function _mergeNamespaces(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in t)){const o=Object.getOwnPropertyDescriptor(n,a);o&&Object.defineProperty(t,a,o.get?o:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function r(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(a){if(a.ep)return;a.ep=!0;const o=r(a);fetch(a.href,o)}})();function getDefaultExportFromCjs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var jsxRuntime={exports:{}},reactJsxRuntime_production={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactJsxRuntime_production;function requireReactJsxRuntime_production(){if(hasRequiredReactJsxRuntime_production)return reactJsxRuntime_production;hasRequiredReactJsxRuntime_production=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function r(n,a,o){var l=null;if(o!==void 0&&(l=""+o),a.key!==void 0&&(l=""+a.key),"key"in a){o={};for(var u in a)u!=="key"&&(o[u]=a[u])}else o=a;return a=o.ref,{$$typeof:t,type:n,key:l,ref:a!==void 0?a:null,props:o}}return reactJsxRuntime_production.Fragment=e,reactJsxRuntime_production.jsx=r,reactJsxRuntime_production.jsxs=r,reactJsxRuntime_production}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),react={exports:{}},react_production={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReact_production;function requireReact_production(){if(hasRequiredReact_production)return react_production;hasRequiredReact_production=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),g=Symbol.for("react.activity"),T=Symbol.iterator;function R(Up){return Up===null||typeof Up!="object"?null:(Up=T&&Up[T]||Up["@@iterator"],typeof Up=="function"?Up:null)}var W={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,J={};function q(Up,l0,y0){this.props=Up,this.context=l0,this.refs=J,this.updater=y0||W}q.prototype.isReactComponent={},q.prototype.setState=function(Up,l0){if(typeof Up!="object"&&typeof Up!="function"&&Up!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Up,l0,"setState")},q.prototype.forceUpdate=function(Up){this.updater.enqueueForceUpdate(this,Up,"forceUpdate")};function Se(){}Se.prototype=q.prototype;function V(Up,l0,y0){this.props=Up,this.context=l0,this.refs=J,this.updater=y0||W}var Y=V.prototype=new Se;Y.constructor=V,k(Y,q.prototype),Y.isPureReactComponent=!0;var ie=Array.isArray;function se(){}var ct={H:null,A:null,T:null,S:null},ae=Object.prototype.hasOwnProperty;function st(Up,l0,y0){var kp=y0.ref;return{$$typeof:t,type:Up,key:l0,ref:kp!==void 0?kp:null,props:y0}}function Ct(Up,l0){return st(Up.type,l0,Up.props)}function $t(Up){return typeof Up=="object"&&Up!==null&&Up.$$typeof===t}function jo(Up){var l0={"=":"=0",":":"=2"};return"$"+Up.replace(/[=:]/g,function(y0){return l0[y0]})}var Lp=/\/+/g;function Mn(Up,l0){return typeof Up=="object"&&Up!==null&&Up.key!=null?jo(""+Up.key):l0.toString(36)}function sa(Up){switch(Up.status){case"fulfilled":return Up.value;case"rejected":throw Up.reason;default:switch(typeof Up.status=="string"?Up.then(se,se):(Up.status="pending",Up.then(function(l0){Up.status==="pending"&&(Up.status="fulfilled",Up.value=l0)},function(l0){Up.status==="pending"&&(Up.status="rejected",Up.reason=l0)})),Up.status){case"fulfilled":return Up.value;case"rejected":throw Up.reason}}throw Up}function re(Up,l0,y0,kp,u0){var f0=typeof Up;(f0==="undefined"||f0==="boolean")&&(Up=null);var v0=!1;if(Up===null)v0=!0;else switch(f0){case"bigint":case"string":case"number":v0=!0;break;case"object":switch(Up.$$typeof){case t:case e:v0=!0;break;case v:return v0=Up._init,re(v0(Up._payload),l0,y0,kp,u0)}}if(v0)return u0=u0(Up),v0=kp===""?"."+Mn(Up,0):kp,ie(u0)?(y0="",v0!=null&&(y0=v0.replace(Lp,"$&/")+"/"),re(u0,l0,y0,"",function(am){return am})):u0!=null&&($t(u0)&&(u0=Ct(u0,y0+(u0.key==null||Up&&Up.key===u0.key?"":(""+u0.key).replace(Lp,"$&/")+"/")+v0)),l0.push(u0)),1;v0=0;var p0=kp===""?".":kp+":";if(ie(Up))for(var rm=0;rm<Up.length;rm++)kp=Up[rm],f0=p0+Mn(kp,rm),v0+=re(kp,l0,y0,f0,u0);else if(rm=R(Up),typeof rm=="function")for(Up=rm.call(Up),rm=0;!(kp=Up.next()).done;)kp=kp.value,f0=p0+Mn(kp,rm++),v0+=re(kp,l0,y0,f0,u0);else if(f0==="object"){if(typeof Up.then=="function")return re(sa(Up),l0,y0,kp,u0);throw l0=String(Up),Error("Objects are not valid as a React child (found: "+(l0==="[object Object]"?"object with keys {"+Object.keys(Up).join(", ")+"}":l0)+"). If you meant to render a collection of children, use an array instead.")}return v0}function $o(Up,l0,y0){if(Up==null)return Up;var kp=[],u0=0;return re(Up,kp,"","",function(f0){return l0.call(y0,f0,u0++)}),kp}function qo(Up){if(Up._status===-1){var l0=Up._result;l0=l0(),l0.then(function(y0){(Up._status===0||Up._status===-1)&&(Up._status=1,Up._result=y0)},function(y0){(Up._status===0||Up._status===-1)&&(Up._status=2,Up._result=y0)}),Up._status===-1&&(Up._status=0,Up._result=l0)}if(Up._status===1)return Up._result.default;throw Up._result}var Kt=typeof reportError=="function"?reportError:function(Up){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l0=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Up=="object"&&Up!==null&&typeof Up.message=="string"?String(Up.message):String(Up),error:Up});if(!window.dispatchEvent(l0))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Up);return}console.error(Up)},i0={map:$o,forEach:function(Up,l0,y0){$o(Up,function(){l0.apply(this,arguments)},y0)},count:function(Up){var l0=0;return $o(Up,function(){l0++}),l0},toArray:function(Up){return $o(Up,function(l0){return l0})||[]},only:function(Up){if(!$t(Up))throw Error("React.Children.only expected to receive a single React element child.");return Up}};return react_production.Activity=g,react_production.Children=i0,react_production.Component=q,react_production.Fragment=r,react_production.Profiler=a,react_production.PureComponent=V,react_production.StrictMode=n,react_production.Suspense=c,react_production.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ct,react_production.__COMPILER_RUNTIME={__proto__:null,c:function(Up){return ct.H.useMemoCache(Up)}},react_production.cache=function(Up){return function(){return Up.apply(null,arguments)}},react_production.cacheSignal=function(){return null},react_production.cloneElement=function(Up,l0,y0){if(Up==null)throw Error("The argument must be a React element, but you passed "+Up+".");var kp=k({},Up.props),u0=Up.key;if(l0!=null)for(f0 in l0.key!==void 0&&(u0=""+l0.key),l0)!ae.call(l0,f0)||f0==="key"||f0==="__self"||f0==="__source"||f0==="ref"&&l0.ref===void 0||(kp[f0]=l0[f0]);var f0=arguments.length-2;if(f0===1)kp.children=y0;else if(1<f0){for(var v0=Array(f0),p0=0;p0<f0;p0++)v0[p0]=arguments[p0+2];kp.children=v0}return st(Up.type,u0,kp)},react_production.createContext=function(Up){return Up={$$typeof:l,_currentValue:Up,_currentValue2:Up,_threadCount:0,Provider:null,Consumer:null},Up.Provider=Up,Up.Consumer={$$typeof:o,_context:Up},Up},react_production.createElement=function(Up,l0,y0){var kp,u0={},f0=null;if(l0!=null)for(kp in l0.key!==void 0&&(f0=""+l0.key),l0)ae.call(l0,kp)&&kp!=="key"&&kp!=="__self"&&kp!=="__source"&&(u0[kp]=l0[kp]);var v0=arguments.length-2;if(v0===1)u0.children=y0;else if(1<v0){for(var p0=Array(v0),rm=0;rm<v0;rm++)p0[rm]=arguments[rm+2];u0.children=p0}if(Up&&Up.defaultProps)for(kp in v0=Up.defaultProps,v0)u0[kp]===void 0&&(u0[kp]=v0[kp]);return st(Up,f0,u0)},react_production.createRef=function(){return{current:null}},react_production.forwardRef=function(Up){return{$$typeof:u,render:Up}},react_production.isValidElement=$t,react_production.lazy=function(Up){return{$$typeof:v,_payload:{_status:-1,_result:Up},_init:qo}},react_production.memo=function(Up,l0){return{$$typeof:h,type:Up,compare:l0===void 0?null:l0}},react_production.startTransition=function(Up){var l0=ct.T,y0={};ct.T=y0;try{var kp=Up(),u0=ct.S;u0!==null&&u0(y0,kp),typeof kp=="object"&&kp!==null&&typeof kp.then=="function"&&kp.then(se,Kt)}catch(f0){Kt(f0)}finally{l0!==null&&y0.types!==null&&(l0.types=y0.types),ct.T=l0}},react_production.unstable_useCacheRefresh=function(){return ct.H.useCacheRefresh()},react_production.use=function(Up){return ct.H.use(Up)},react_production.useActionState=function(Up,l0,y0){return ct.H.useActionState(Up,l0,y0)},react_production.useCallback=function(Up,l0){return ct.H.useCallback(Up,l0)},react_production.useContext=function(Up){return ct.H.useContext(Up)},react_production.useDebugValue=function(){},react_production.useDeferredValue=function(Up,l0){return ct.H.useDeferredValue(Up,l0)},react_production.useEffect=function(Up,l0){return ct.H.useEffect(Up,l0)},react_production.useEffectEvent=function(Up){return ct.H.useEffectEvent(Up)},react_production.useId=function(){return ct.H.useId()},react_production.useImperativeHandle=function(Up,l0,y0){return ct.H.useImperativeHandle(Up,l0,y0)},react_production.useInsertionEffect=function(Up,l0){return ct.H.useInsertionEffect(Up,l0)},react_production.useLayoutEffect=function(Up,l0){return ct.H.useLayoutEffect(Up,l0)},react_production.useMemo=function(Up,l0){return ct.H.useMemo(Up,l0)},react_production.useOptimistic=function(Up,l0){return ct.H.useOptimistic(Up,l0)},react_production.useReducer=function(Up,l0,y0){return ct.H.useReducer(Up,l0,y0)},react_production.useRef=function(Up){return ct.H.useRef(Up)},react_production.useState=function(Up){return ct.H.useState(Up)},react_production.useSyncExternalStore=function(Up,l0,y0){return ct.H.useSyncExternalStore(Up,l0,y0)},react_production.useTransition=function(){return ct.H.useTransition()},react_production.version="19.2.0",react_production}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production()),react.exports}var reactExports=requireReact();const React=getDefaultExportFromCjs(reactExports),React$1=_mergeNamespaces({__proto__:null,default:React},[reactExports]);var client={exports:{}},reactDomClient_production={},scheduler={exports:{}},scheduler_production={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production;function requireScheduler_production(){return hasRequiredScheduler_production||(hasRequiredScheduler_production=1,(function(t){function e(re,$o){var qo=re.length;re.push($o);e:for(;0<qo;){var Kt=qo-1>>>1,i0=re[Kt];if(0<a(i0,$o))re[Kt]=$o,re[qo]=i0,qo=Kt;else break e}}function r(re){return re.length===0?null:re[0]}function n(re){if(re.length===0)return null;var $o=re[0],qo=re.pop();if(qo!==$o){re[0]=qo;e:for(var Kt=0,i0=re.length,Up=i0>>>1;Kt<Up;){var l0=2*(Kt+1)-1,y0=re[l0],kp=l0+1,u0=re[kp];if(0>a(y0,qo))kp<i0&&0>a(u0,y0)?(re[Kt]=u0,re[kp]=qo,Kt=kp):(re[Kt]=y0,re[l0]=qo,Kt=l0);else if(kp<i0&&0>a(u0,qo))re[Kt]=u0,re[kp]=qo,Kt=kp;else break e}}return $o}function a(re,$o){var qo=re.sortIndex-$o.sortIndex;return qo!==0?qo:re.id-$o.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();t.unstable_now=function(){return l.now()-u}}var c=[],h=[],v=1,g=null,T=3,R=!1,W=!1,k=!1,J=!1,q=typeof setTimeout=="function"?setTimeout:null,Se=typeof clearTimeout=="function"?clearTimeout:null,V=typeof setImmediate<"u"?setImmediate:null;function Y(re){for(var $o=r(h);$o!==null;){if($o.callback===null)n(h);else if($o.startTime<=re)n(h),$o.sortIndex=$o.expirationTime,e(c,$o);else break;$o=r(h)}}function ie(re){if(k=!1,Y(re),!W)if(r(c)!==null)W=!0,se||(se=!0,jo());else{var $o=r(h);$o!==null&&sa(ie,$o.startTime-re)}}var se=!1,ct=-1,ae=5,st=-1;function Ct(){return J?!0:!(t.unstable_now()-st<ae)}function $t(){if(J=!1,se){var re=t.unstable_now();st=re;var $o=!0;try{e:{W=!1,k&&(k=!1,Se(ct),ct=-1),R=!0;var qo=T;try{t:{for(Y(re),g=r(c);g!==null&&!(g.expirationTime>re&&Ct());){var Kt=g.callback;if(typeof Kt=="function"){g.callback=null,T=g.priorityLevel;var i0=Kt(g.expirationTime<=re);if(re=t.unstable_now(),typeof i0=="function"){g.callback=i0,Y(re),$o=!0;break t}g===r(c)&&n(c),Y(re)}else n(c);g=r(c)}if(g!==null)$o=!0;else{var Up=r(h);Up!==null&&sa(ie,Up.startTime-re),$o=!1}}break e}finally{g=null,T=qo,R=!1}$o=void 0}}finally{$o?jo():se=!1}}}var jo;if(typeof V=="function")jo=function(){V($t)};else if(typeof MessageChannel<"u"){var Lp=new MessageChannel,Mn=Lp.port2;Lp.port1.onmessage=$t,jo=function(){Mn.postMessage(null)}}else jo=function(){q($t,0)};function sa(re,$o){ct=q(function(){re(t.unstable_now())},$o)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(re){re.callback=null},t.unstable_forceFrameRate=function(re){0>re||125<re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ae=0<re?Math.floor(1e3/re):5},t.unstable_getCurrentPriorityLevel=function(){return T},t.unstable_next=function(re){switch(T){case 1:case 2:case 3:var $o=3;break;default:$o=T}var qo=T;T=$o;try{return re()}finally{T=qo}},t.unstable_requestPaint=function(){J=!0},t.unstable_runWithPriority=function(re,$o){switch(re){case 1:case 2:case 3:case 4:case 5:break;default:re=3}var qo=T;T=re;try{return $o()}finally{T=qo}},t.unstable_scheduleCallback=function(re,$o,qo){var Kt=t.unstable_now();switch(typeof qo=="object"&&qo!==null?(qo=qo.delay,qo=typeof qo=="number"&&0<qo?Kt+qo:Kt):qo=Kt,re){case 1:var i0=-1;break;case 2:i0=250;break;case 5:i0=1073741823;break;case 4:i0=1e4;break;default:i0=5e3}return i0=qo+i0,re={id:v++,callback:$o,priorityLevel:re,startTime:qo,expirationTime:i0,sortIndex:-1},qo>Kt?(re.sortIndex=qo,e(h,re),r(c)===null&&re===r(h)&&(k?(Se(ct),ct=-1):k=!0,sa(ie,qo-Kt))):(re.sortIndex=i0,e(c,re),W||R||(W=!0,se||(se=!0,jo()))),re},t.unstable_shouldYield=Ct,t.unstable_wrapCallback=function(re){var $o=T;return function(){var qo=T;T=$o;try{return re.apply(this,arguments)}finally{T=qo}}}})(scheduler_production)),scheduler_production}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production()),scheduler.exports}var reactDom={exports:{}},reactDom_production={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDom_production;function requireReactDom_production(){if(hasRequiredReactDom_production)return reactDom_production;hasRequiredReactDom_production=1;var t=requireReact();function e(c){var h="https://react.dev/errors/"+c;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)h+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+c+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var n={d:{f:r,r:function(){throw Error(e(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(c,h,v){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:g==null?null:""+g,children:c,containerInfo:h,implementation:v}}var l=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(c,h){if(c==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return reactDom_production.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,reactDom_production.createPortal=function(c,h){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return o(c,h,null,v)},reactDom_production.flushSync=function(c){var h=l.T,v=n.p;try{if(l.T=null,n.p=2,c)return c()}finally{l.T=h,n.p=v,n.d.f()}},reactDom_production.preconnect=function(c,h){typeof c=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,n.d.C(c,h))},reactDom_production.prefetchDNS=function(c){typeof c=="string"&&n.d.D(c)},reactDom_production.preinit=function(c,h){if(typeof c=="string"&&h&&typeof h.as=="string"){var v=h.as,g=u(v,h.crossOrigin),T=typeof h.integrity=="string"?h.integrity:void 0,R=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;v==="style"?n.d.S(c,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:g,integrity:T,fetchPriority:R}):v==="script"&&n.d.X(c,{crossOrigin:g,integrity:T,fetchPriority:R,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},reactDom_production.preinitModule=function(c,h){if(typeof c=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var v=u(h.as,h.crossOrigin);n.d.M(c,{crossOrigin:v,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&n.d.M(c)},reactDom_production.preload=function(c,h){if(typeof c=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var v=h.as,g=u(v,h.crossOrigin);n.d.L(c,v,{crossOrigin:g,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},reactDom_production.preloadModule=function(c,h){if(typeof c=="string")if(h){var v=u(h.as,h.crossOrigin);n.d.m(c,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:v,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else n.d.m(c)},reactDom_production.requestFormReset=function(c){n.d.r(c)},reactDom_production.unstable_batchedUpdates=function(c,h){return c(h)},reactDom_production.useFormState=function(c,h,v){return l.H.useFormState(c,h,v)},reactDom_production.useFormStatus=function(){return l.H.useHostTransitionStatus()},reactDom_production.version="19.2.0",reactDom_production}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),reactDom.exports=requireReactDom_production(),reactDom.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDomClient_production;function requireReactDomClient_production(){if(hasRequiredReactDomClient_production)return reactDomClient_production;hasRequiredReactDomClient_production=1;var t=requireScheduler(),e=requireReact(),r=requireReactDom();function n(i){var s="https://react.dev/errors/"+i;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)s+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+i+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function o(i){var s=i,f=i;if(i.alternate)for(;s.return;)s=s.return;else{i=s;do s=i,(s.flags&4098)!==0&&(f=s.return),i=s.return;while(i)}return s.tag===3?f:null}function l(i){if(i.tag===13){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function u(i){if(i.tag===31){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function c(i){if(o(i)!==i)throw Error(n(188))}function h(i){var s=i.alternate;if(!s){if(s=o(i),s===null)throw Error(n(188));return s!==i?null:i}for(var f=i,D=s;;){var ve=f.return;if(ve===null)break;var ft=ve.alternate;if(ft===null){if(D=ve.return,D!==null){f=D;continue}break}if(ve.child===ft.child){for(ft=ve.child;ft;){if(ft===f)return c(ve),i;if(ft===D)return c(ve),s;ft=ft.sibling}throw Error(n(188))}if(f.return!==D.return)f=ve,D=ft;else{for(var Ci=!1,Zp=ve.child;Zp;){if(Zp===f){Ci=!0,f=ve,D=ft;break}if(Zp===D){Ci=!0,D=ve,f=ft;break}Zp=Zp.sibling}if(!Ci){for(Zp=ft.child;Zp;){if(Zp===f){Ci=!0,f=ft,D=ve;break}if(Zp===D){Ci=!0,D=ft,f=ve;break}Zp=Zp.sibling}if(!Ci)throw Error(n(189))}}if(f.alternate!==D)throw Error(n(190))}if(f.tag!==3)throw Error(n(188));return f.stateNode.current===f?i:s}function v(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i;for(i=i.child;i!==null;){if(s=v(i),s!==null)return s;i=i.sibling}return null}var g=Object.assign,T=Symbol.for("react.element"),R=Symbol.for("react.transitional.element"),W=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),J=Symbol.for("react.strict_mode"),q=Symbol.for("react.profiler"),Se=Symbol.for("react.consumer"),V=Symbol.for("react.context"),Y=Symbol.for("react.forward_ref"),ie=Symbol.for("react.suspense"),se=Symbol.for("react.suspense_list"),ct=Symbol.for("react.memo"),ae=Symbol.for("react.lazy"),st=Symbol.for("react.activity"),Ct=Symbol.for("react.memo_cache_sentinel"),$t=Symbol.iterator;function jo(i){return i===null||typeof i!="object"?null:(i=$t&&i[$t]||i["@@iterator"],typeof i=="function"?i:null)}var Lp=Symbol.for("react.client.reference");function Mn(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===Lp?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case k:return"Fragment";case q:return"Profiler";case J:return"StrictMode";case ie:return"Suspense";case se:return"SuspenseList";case st:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case W:return"Portal";case V:return i.displayName||"Context";case Se:return(i._context.displayName||"Context")+".Consumer";case Y:var s=i.render;return i=i.displayName,i||(i=s.displayName||s.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case ct:return s=i.displayName||null,s!==null?s:Mn(i.type)||"Memo";case ae:s=i._payload,i=i._init;try{return Mn(i(s))}catch{}}return null}var sa=Array.isArray,re=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$o=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,qo={pending:!1,data:null,method:null,action:null},Kt=[],i0=-1;function Up(i){return{current:i}}function l0(i){0>i0||(i.current=Kt[i0],Kt[i0]=null,i0--)}function y0(i,s){i0++,Kt[i0]=i.current,i.current=s}var kp=Up(null),u0=Up(null),f0=Up(null),v0=Up(null);function p0(i,s){switch(y0(f0,s),y0(u0,i),y0(kp,null),s.nodeType){case 9:case 11:i=(i=s.documentElement)&&(i=i.namespaceURI)?w3(i):0;break;default:if(i=s.tagName,s=s.namespaceURI)s=w3(s),i=E3(s,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}l0(kp),y0(kp,i)}function rm(){l0(kp),l0(u0),l0(f0)}function am(i){i.memoizedState!==null&&y0(v0,i);var s=kp.current,f=E3(s,i.type);s!==f&&(y0(u0,i),y0(kp,f))}function ym(i){u0.current===i&&(l0(kp),l0(u0)),v0.current===i&&(l0(v0),W2._currentValue=qo)}var Wm,h0;function f1(i){if(Wm===void 0)try{throw Error()}catch(f){var s=f.stack.trim().match(/\n( *(at )?)/);Wm=s&&s[1]||"",h0=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Wm+i+h0}var T1=!1;function I1(i,s){if(!i||T1)return"";T1=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var D={DetermineComponentFrameRoot:function(){try{if(s){var wm=function(){throw Error()};if(Object.defineProperty(wm.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(wm,[])}catch(Lm){var Am=Lm}Reflect.construct(i,[],wm)}else{try{wm.call()}catch(Lm){Am=Lm}i.call(wm.prototype)}}else{try{throw Error()}catch(Lm){Am=Lm}(wm=i())&&typeof wm.catch=="function"&&wm.catch(function(){})}}catch(Lm){if(Lm&&Am&&typeof Lm.stack=="string")return[Lm.stack,Am.stack]}return[null,null]}};D.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var ve=Object.getOwnPropertyDescriptor(D.DetermineComponentFrameRoot,"name");ve&&ve.configurable&&Object.defineProperty(D.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var ft=D.DetermineComponentFrameRoot(),Ci=ft[0],Zp=ft[1];if(Ci&&Zp){var K0=Ci.split(`
`),Pm=Zp.split(`
`);for(ve=D=0;D<K0.length&&!K0[D].includes("DetermineComponentFrameRoot");)D++;for(;ve<Pm.length&&!Pm[ve].includes("DetermineComponentFrameRoot");)ve++;if(D===K0.length||ve===Pm.length)for(D=K0.length-1,ve=Pm.length-1;1<=D&&0<=ve&&K0[D]!==Pm[ve];)ve--;for(;1<=D&&0<=ve;D--,ve--)if(K0[D]!==Pm[ve]){if(D!==1||ve!==1)do if(D--,ve--,0>ve||K0[D]!==Pm[ve]){var Xm=`
`+K0[D].replace(" at new "," at ");return i.displayName&&Xm.includes("<anonymous>")&&(Xm=Xm.replace("<anonymous>",i.displayName)),Xm}while(1<=D&&0<=ve);break}}}finally{T1=!1,Error.prepareStackTrace=f}return(f=i?i.displayName||i.name:"")?f1(f):""}function p1(i,s){switch(i.tag){case 26:case 27:case 5:return f1(i.type);case 16:return f1("Lazy");case 13:return i.child!==s&&s!==null?f1("Suspense Fallback"):f1("Suspense");case 19:return f1("SuspenseList");case 0:case 15:return I1(i.type,!1);case 11:return I1(i.type.render,!1);case 1:return I1(i.type,!0);case 31:return f1("Activity");default:return""}}function Qm(i){try{var s="",f=null;do s+=p1(i,f),f=i,i=i.return;while(i);return s}catch(D){return`
Error generating stack: `+D.message+`
`+D.stack}}var m1=Object.prototype.hasOwnProperty,W1=t.unstable_scheduleCallback,ug=t.unstable_cancelCallback,ng=t.unstable_shouldYield,Ko=t.unstable_requestPaint,wi=t.unstable_now,S0=t.unstable_getCurrentPriorityLevel,Z0=t.unstable_ImmediatePriority,Pp=t.unstable_UserBlockingPriority,Ip=t.unstable_NormalPriority,x0=t.unstable_LowPriority,B0=t.unstable_IdlePriority,Y0=t.log,im=t.unstable_setDisableYieldValue,om=null,Cm=null;function r1(i){if(typeof Y0=="function"&&im(i),Cm&&typeof Cm.setStrictMode=="function")try{Cm.setStrictMode(om,i)}catch{}}var Om=Math.clz32?Math.clz32:pm,a1=Math.log,hg=Math.LN2;function pm(i){return i>>>=0,i===0?32:31-(a1(i)/hg|0)|0}var S1=256,U1=262144,J1=4194304;function l1(i){var s=i&42;if(s!==0)return s;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Km(i,s,f){var D=i.pendingLanes;if(D===0)return 0;var ve=0,ft=i.suspendedLanes,Ci=i.pingedLanes;i=i.warmLanes;var Zp=D&134217727;return Zp!==0?(D=Zp&~ft,D!==0?ve=l1(D):(Ci&=Zp,Ci!==0?ve=l1(Ci):f||(f=Zp&~i,f!==0&&(ve=l1(f))))):(Zp=D&~ft,Zp!==0?ve=l1(Zp):Ci!==0?ve=l1(Ci):f||(f=D&~i,f!==0&&(ve=l1(f)))),ve===0?0:s!==0&&s!==ve&&(s&ft)===0&&(ft=ve&-ve,f=s&-s,ft>=f||ft===32&&(f&4194048)!==0)?s:ve}function A1(i,s){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&s)===0}function y1(i,s){switch(i){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function uv(){var i=J1;return J1<<=1,(J1&62914560)===0&&(J1=4194304),i}function $g(i){for(var s=[],f=0;31>f;f++)s.push(i);return s}function Sv(i,s){i.pendingLanes|=s,s!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Yv(i,s,f,D,ve,ft){var Ci=i.pendingLanes;i.pendingLanes=f,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=f,i.entangledLanes&=f,i.errorRecoveryDisabledLanes&=f,i.shellSuspendCounter=0;var Zp=i.entanglements,K0=i.expirationTimes,Pm=i.hiddenUpdates;for(f=Ci&~f;0<f;){var Xm=31-Om(f),wm=1<<Xm;Zp[Xm]=0,K0[Xm]=-1;var Am=Pm[Xm];if(Am!==null)for(Pm[Xm]=null,Xm=0;Xm<Am.length;Xm++){var Lm=Am[Xm];Lm!==null&&(Lm.lane&=-536870913)}f&=~wm}D!==0&&my(i,D,0),ft!==0&&ve===0&&i.tag!==0&&(i.suspendedLanes|=ft&~(Ci&~s))}function my(i,s,f){i.pendingLanes|=s,i.suspendedLanes&=~s;var D=31-Om(s);i.entangledLanes|=s,i.entanglements[D]=i.entanglements[D]|1073741824|f&261930}function Vv(i,s){var f=i.entangledLanes|=s;for(i=i.entanglements;f;){var D=31-Om(f),ve=1<<D;ve&s|i[D]&s&&(i[D]|=s),f&=~ve}}function yv(i,s){var f=s&-s;return f=(f&42)!==0?1:Hv(f),(f&(i.suspendedLanes|s))!==0?0:f}function Hv(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function gy(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Qv(){var i=$o.p;return i!==0?i:(i=window.event,i===void 0?32:e5(i.type))}function Ty(i,s){var f=$o.p;try{return $o.p=i,s()}finally{$o.p=f}}var $v=Math.random().toString(36).slice(2),Cv="__reactFiber$"+$v,wg="__reactProps$"+$v,Lv="__reactContainer$"+$v,Pv="__reactEvents$"+$v,Ny="__reactListeners$"+$v,pg="__reactHandles$"+$v,et="__reactResources$"+$v,t0="__reactMarker$"+$v;function oa(i){delete i[Cv],delete i[wg],delete i[Pv],delete i[Ny],delete i[pg]}function a0(i){var s=i[Cv];if(s)return s;for(var f=i.parentNode;f;){if(s=f[Lv]||f[Cv]){if(f=s.alternate,s.child!==null||f!==null&&f.child!==null)for(i=Ww(i);i!==null;){if(f=i[Cv])return f;i=Ww(i)}return s}i=f,f=i.parentNode}return null}function m0(i){if(i=i[Cv]||i[Lv]){var s=i.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return i}return null}function nm(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i.stateNode;throw Error(n(33))}function L0(i){var s=i[et];return s||(s=i[et]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function cm(i){i[t0]=!0}var Gm=new Set,Fm={};function Vm(i,s){D1(i,s),D1(i+"Capture",s)}function D1(i,s){for(Fm[i]=s,i=0;i<s.length;i++)Gm.add(s[i])}var O1=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),tg={},Mg={};function kg(i){return m1.call(Mg,i)?!0:m1.call(tg,i)?!1:O1.test(i)?Mg[i]=!0:(tg[i]=!0,!1)}function cg(i,s,f){if(kg(s))if(f===null)i.removeAttribute(s);else{switch(typeof f){case"undefined":case"function":case"symbol":i.removeAttribute(s);return;case"boolean":var D=s.toLowerCase().slice(0,5);if(D!=="data-"&&D!=="aria-"){i.removeAttribute(s);return}}i.setAttribute(s,""+f)}}function Ag(i,s,f){if(f===null)i.removeAttribute(s);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(s);return}i.setAttribute(s,""+f)}}function K1(i,s,f,D){if(D===null)i.removeAttribute(f);else{switch(typeof D){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(f);return}i.setAttributeNS(s,f,""+D)}}function G1(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function sg(i){var s=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Iv(i,s,f){var D=Object.getOwnPropertyDescriptor(i.constructor.prototype,s);if(!i.hasOwnProperty(s)&&typeof D<"u"&&typeof D.get=="function"&&typeof D.set=="function"){var ve=D.get,ft=D.set;return Object.defineProperty(i,s,{configurable:!0,get:function(){return ve.call(this)},set:function(Ci){f=""+Ci,ft.call(this,Ci)}}),Object.defineProperty(i,s,{enumerable:D.enumerable}),{getValue:function(){return f},setValue:function(Ci){f=""+Ci},stopTracking:function(){i._valueTracker=null,delete i[s]}}}}function d0(i){if(!i._valueTracker){var s=sg(i)?"checked":"value";i._valueTracker=Iv(i,s,""+i[s])}}function y(i){if(!i)return!1;var s=i._valueTracker;if(!s)return!0;var f=s.getValue(),D="";return i&&(D=sg(i)?i.checked?"true":"false":i.value),i=D,i!==f?(s.setValue(i),!0):!1}function N(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var K=/[\n"\\]/g;function ne(i){return i.replace(K,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Rt(i,s,f,D,ve,ft,Ci,Zp){i.name="",Ci!=null&&typeof Ci!="function"&&typeof Ci!="symbol"&&typeof Ci!="boolean"?i.type=Ci:i.removeAttribute("type"),s!=null?Ci==="number"?(s===0&&i.value===""||i.value!=s)&&(i.value=""+G1(s)):i.value!==""+G1(s)&&(i.value=""+G1(s)):Ci!=="submit"&&Ci!=="reset"||i.removeAttribute("value"),s!=null?Pt(i,Ci,G1(s)):f!=null?Pt(i,Ci,G1(f)):D!=null&&i.removeAttribute("value"),ve==null&&ft!=null&&(i.defaultChecked=!!ft),ve!=null&&(i.checked=ve&&typeof ve!="function"&&typeof ve!="symbol"),Zp!=null&&typeof Zp!="function"&&typeof Zp!="symbol"&&typeof Zp!="boolean"?i.name=""+G1(Zp):i.removeAttribute("name")}function lt(i,s,f,D,ve,ft,Ci,Zp){if(ft!=null&&typeof ft!="function"&&typeof ft!="symbol"&&typeof ft!="boolean"&&(i.type=ft),s!=null||f!=null){if(!(ft!=="submit"&&ft!=="reset"||s!=null)){d0(i);return}f=f!=null?""+G1(f):"",s=s!=null?""+G1(s):f,Zp||s===i.value||(i.value=s),i.defaultValue=s}D=D??ve,D=typeof D!="function"&&typeof D!="symbol"&&!!D,i.checked=Zp?i.checked:!!D,i.defaultChecked=!!D,Ci!=null&&typeof Ci!="function"&&typeof Ci!="symbol"&&typeof Ci!="boolean"&&(i.name=Ci),d0(i)}function Pt(i,s,f){s==="number"&&N(i.ownerDocument)===i||i.defaultValue===""+f||(i.defaultValue=""+f)}function Ht(i,s,f,D){if(i=i.options,s){s={};for(var ve=0;ve<f.length;ve++)s["$"+f[ve]]=!0;for(f=0;f<i.length;f++)ve=s.hasOwnProperty("$"+i[f].value),i[f].selected!==ve&&(i[f].selected=ve),ve&&D&&(i[f].defaultSelected=!0)}else{for(f=""+G1(f),s=null,ve=0;ve<i.length;ve++){if(i[ve].value===f){i[ve].selected=!0,D&&(i[ve].defaultSelected=!0);return}s!==null||i[ve].disabled||(s=i[ve])}s!==null&&(s.selected=!0)}}function Dt(i,s,f){if(s!=null&&(s=""+G1(s),s!==i.value&&(i.value=s),f==null)){i.defaultValue!==s&&(i.defaultValue=s);return}i.defaultValue=f!=null?""+G1(f):""}function Zt(i,s,f,D){if(s==null){if(D!=null){if(f!=null)throw Error(n(92));if(sa(D)){if(1<D.length)throw Error(n(93));D=D[0]}f=D}f==null&&(f=""),s=f}f=G1(s),i.defaultValue=f,D=i.textContent,D===f&&D!==""&&D!==null&&(i.value=D),d0(i)}function Er(i,s){if(s){var f=i.firstChild;if(f&&f===i.lastChild&&f.nodeType===3){f.nodeValue=s;return}}i.textContent=s}var Np=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Zo(i,s,f){var D=s.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?D?i.setProperty(s,""):s==="float"?i.cssFloat="":i[s]="":D?i.setProperty(s,f):typeof f!="number"||f===0||Np.has(s)?s==="float"?i.cssFloat=f:i[s]=(""+f).trim():i[s]=f+"px"}function la(i,s,f){if(s!=null&&typeof s!="object")throw Error(n(62));if(i=i.style,f!=null){for(var D in f)!f.hasOwnProperty(D)||s!=null&&s.hasOwnProperty(D)||(D.indexOf("--")===0?i.setProperty(D,""):D==="float"?i.cssFloat="":i[D]="");for(var ve in s)D=s[ve],s.hasOwnProperty(ve)&&f[ve]!==D&&Zo(i,ve,D)}else for(var ft in s)s.hasOwnProperty(ft)&&Zo(i,ft,s[ft])}function Dp(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wp=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Vp=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Kp(i){return Vp.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function r0(){}var D0=null;function E0(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var H0=null,Q0=null;function lm(i){var s=m0(i);if(s&&(i=s.stateNode)){var f=i[wg]||null;e:switch(i=s.stateNode,s.type){case"input":if(Rt(i,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),s=f.name,f.type==="radio"&&s!=null){for(f=i;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+ne(""+s)+'"][type="radio"]'),s=0;s<f.length;s++){var D=f[s];if(D!==i&&D.form===i.form){var ve=D[wg]||null;if(!ve)throw Error(n(90));Rt(D,ve.value,ve.defaultValue,ve.defaultValue,ve.checked,ve.defaultChecked,ve.type,ve.name)}}for(s=0;s<f.length;s++)D=f[s],D.form===i.form&&y(D)}break e;case"textarea":Dt(i,f.value,f.defaultValue);break e;case"select":s=f.value,s!=null&&Ht(i,!!f.multiple,s,!1)}}}var hm=!1;function q0(i,s,f){if(hm)return i(s,f);hm=!0;try{var D=i(s);return D}finally{if(hm=!1,(H0!==null||Q0!==null)&&(K_(),H0&&(s=H0,i=Q0,Q0=H0=null,lm(s),i)))for(s=0;s<i.length;s++)lm(i[s])}}function Bm(i,s){var f=i.stateNode;if(f===null)return null;var D=f[wg]||null;if(D===null)return null;f=D[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(D=!D.disabled)||(i=i.type,D=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!D;break e;default:i=!1}if(i)return null;if(f&&typeof f!="function")throw Error(n(231,s,typeof f));return f}var Im=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h1=!1;if(Im)try{var i1={};Object.defineProperty(i1,"passive",{get:function(){h1=!0}}),window.addEventListener("test",i1,i1),window.removeEventListener("test",i1,i1)}catch{h1=!1}var M1=null,L1=null,c1=null;function j1(){if(c1)return c1;var i,s=L1,f=s.length,D,ve="value"in M1?M1.value:M1.textContent,ft=ve.length;for(i=0;i<f&&s[i]===ve[i];i++);var Ci=f-i;for(D=1;D<=Ci&&s[f-D]===ve[ft-D];D++);return c1=ve.slice(i,1<D?1-D:void 0)}function Hm(i){var s=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&s===13&&(i=13)):i=s,i===10&&(i=13),32<=i||i===13?i:0}function t1(){return!0}function Y1(){return!1}function d1(i){function s(f,D,ve,ft,Ci){this._reactName=f,this._targetInst=ve,this.type=D,this.nativeEvent=ft,this.target=Ci,this.currentTarget=null;for(var Zp in i)i.hasOwnProperty(Zp)&&(f=i[Zp],this[Zp]=f?f(ft):ft[Zp]);return this.isDefaultPrevented=(ft.defaultPrevented!=null?ft.defaultPrevented:ft.returnValue===!1)?t1:Y1,this.isPropagationStopped=Y1,this}return g(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=t1)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=t1)},persist:function(){},isPersistent:t1}),s}var q1={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Z1=d1(q1),x1=g({},q1,{view:0,detail:0}),ag=d1(x1),Og,eg,C1,Bg=g({},x1,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_y,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==C1&&(C1&&i.type==="mousemove"?(Og=i.screenX-C1.screenX,eg=i.screenY-C1.screenY):eg=Og=0,C1=i),Og)},movementY:function(i){return"movementY"in i?i.movementY:eg}}),xg=d1(Bg),Ig=g({},Bg,{dataTransfer:0}),_g=d1(Ig),Hg=g({},x1,{relatedTarget:0}),vv=d1(Hg),jv=g({},q1,{animationName:0,elapsedTime:0,pseudoElement:0}),Uv=d1(jv),vy=g({},q1,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),ay=d1(vy),Tv=g({},q1,{data:0}),yy=d1(Tv),ey={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},iy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ly(i){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(i):(i=xy[i])?!!s[i]:!1}function _y(){return Ly}var Iy=g({},x1,{key:function(i){if(i.key){var s=ey[i.key]||i.key;if(s!=="Unidentified")return s}return i.type==="keypress"?(i=Hm(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?iy[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_y,charCode:function(i){return i.type==="keypress"?Hm(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Hm(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Dv=d1(Iy),Wv=g({},Bg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Zv=d1(Wv),ty=g({},x1,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_y}),Ue=d1(ty),jp=g({},q1,{propertyName:0,elapsedTime:0,pseudoElement:0}),bt=d1(jp),X0=g({},Bg,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),G0=d1(X0),j0=g({},q1,{newState:0,oldState:0}),Ym=d1(j0),xm=[9,13,27,32],V1=Im&&"CompositionEvent"in window,Em=null;Im&&"documentMode"in document&&(Em=document.documentMode);var Zm=Im&&"TextEvent"in window&&!Em,qg=Im&&(!V1||Em&&8<Em&&11>=Em),Sg=" ",$1=!1;function ly(i,s){switch(i){case"keyup":return xm.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bv(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Fg=!1;function kv(i,s){switch(i){case"compositionend":return bv(s);case"keypress":return s.which!==32?null:($1=!0,Sg);case"textInput":return i=s.data,i===Sg&&$1?null:i;default:return null}}function Jg(i,s){if(Fg)return i==="compositionend"||!V1&&ly(i,s)?(i=j1(),c1=L1=M1=null,Fg=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return qg&&s.locale!=="ko"?null:s.data;default:return null}}var ig={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gg(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s==="input"?!!ig[i.type]:s==="textarea"}function Rv(i,s,f,D){H0?Q0?Q0.push(D):Q0=[D]:H0=D,s=ub(s,"onChange"),0<s.length&&(f=new Z1("onChange","change",null,f,D),i.push({event:f,listeners:s}))}var lg=null,mv=null;function Kg(i){Ow(i,0)}function jg(i){var s=nm(i);if(y(s))return i}function gv(i,s){if(i==="change")return s}var ky=!1;if(Im){var ax;if(Im){var ix="oninput"in document;if(!ix){var Mx=document.createElement("div");Mx.setAttribute("oninput","return;"),ix=typeof Mx.oninput=="function"}ax=ix}else ax=!1;ky=ax&&(!document.documentMode||9<document.documentMode)}function t2(){lg&&(lg.detachEvent("onpropertychange",r2),mv=lg=null)}function r2(i){if(i.propertyName==="value"&&jg(mv)){var s=[];Rv(s,mv,i,E0(i)),q0(Kg,s)}}function B3(i,s,f){i==="focusin"?(t2(),lg=s,mv=f,lg.attachEvent("onpropertychange",r2)):i==="focusout"&&t2()}function r5(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return jg(mv)}function n5(i,s){if(i==="click")return jg(s)}function k_(i,s){if(i==="input"||i==="change")return jg(s)}function Y2(i,s){return i===s&&(i!==0||1/i===1/s)||i!==i&&s!==s}var Jy=typeof Object.is=="function"?Object.is:Y2;function _2(i,s){if(Jy(i,s))return!0;if(typeof i!="object"||i===null||typeof s!="object"||s===null)return!1;var f=Object.keys(i),D=Object.keys(s);if(f.length!==D.length)return!1;for(D=0;D<f.length;D++){var ve=f[D];if(!m1.call(s,ve)||!Jy(i[ve],s[ve]))return!1}return!0}function j3(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function V3(i,s){var f=j3(i);i=0;for(var D;f;){if(f.nodeType===3){if(D=i+f.textContent.length,i<=s&&D>=s)return{node:f,offset:s-i};i=D}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=j3(f)}}function H3(i,s){return i&&s?i===s?!0:i&&i.nodeType===3?!1:s&&s.nodeType===3?H3(i,s.parentNode):"contains"in i?i.contains(s):i.compareDocumentPosition?!!(i.compareDocumentPosition(s)&16):!1:!1}function Ab(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var s=N(i.document);s instanceof i.HTMLIFrameElement;){try{var f=typeof s.contentWindow.location.href=="string"}catch{f=!1}if(f)i=s.contentWindow;else break;s=N(i.document)}return s}function zx(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s&&(s==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||s==="textarea"||i.contentEditable==="true")}var Cb=Im&&"documentMode"in document&&11>=document.documentMode,Ix=null,O_=null,Z2=null,Db=!1;function Rb(i,s,f){var D=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;Db||Ix==null||Ix!==N(D)||(D=Ix,"selectionStart"in D&&zx(D)?D={start:D.selectionStart,end:D.selectionEnd}:(D=(D.ownerDocument&&D.ownerDocument.defaultView||window).getSelection(),D={anchorNode:D.anchorNode,anchorOffset:D.anchorOffset,focusNode:D.focusNode,focusOffset:D.focusOffset}),Z2&&_2(Z2,D)||(Z2=D,D=ub(O_,"onSelect"),0<D.length&&(s=new Z1("onSelect","select",null,s,f),i.push({event:s,listeners:D}),s.target=Ix)))}function a2(i,s){var f={};return f[i.toLowerCase()]=s.toLowerCase(),f["Webkit"+i]="webkit"+s,f["Moz"+i]="moz"+s,f}var b2={animationend:a2("Animation","AnimationEnd"),animationiteration:a2("Animation","AnimationIteration"),animationstart:a2("Animation","AnimationStart"),transitionrun:a2("Transition","TransitionRun"),transitionstart:a2("Transition","TransitionStart"),transitioncancel:a2("Transition","TransitionCancel"),transitionend:a2("Transition","TransitionEnd")},P_={},Nb={};Im&&(Nb=document.createElement("div").style,"AnimationEvent"in window||(delete b2.animationend.animation,delete b2.animationiteration.animation,delete b2.animationstart.animation),"TransitionEvent"in window||delete b2.transitionend.transition);function i2(i){if(P_[i])return P_[i];if(!b2[i])return i;var s=b2[i],f;for(f in s)if(s.hasOwnProperty(f)&&f in Nb)return P_[i]=s[f];return i}var G3=i2("animationend"),$3=i2("animationiteration"),W3=i2("animationstart"),a5=i2("transitionrun"),i5=i2("transitionstart"),o5=i2("transitioncancel"),Lb=i2("transitionend"),q3=new Map,kb="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");kb.push("scrollEnd");function ox(i,s){q3.set(i,s),Vm(s,[i])}var F_=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},Ky=[],o2=0,z_=0;function I_(){for(var i=o2,s=z_=o2=0;s<i;){var f=Ky[s];Ky[s++]=null;var D=Ky[s];Ky[s++]=null;var ve=Ky[s];Ky[s++]=null;var ft=Ky[s];if(Ky[s++]=null,D!==null&&ve!==null){var Ci=D.pending;Ci===null?ve.next=ve:(ve.next=Ci.next,Ci.next=ve),D.pending=ve}ft!==0&&X3(f,ve,ft)}}function J2(i,s,f,D){Ky[o2++]=i,Ky[o2++]=s,Ky[o2++]=f,Ky[o2++]=D,z_|=D,i.lanes|=D,i=i.alternate,i!==null&&(i.lanes|=D)}function Ob(i,s,f,D){return J2(i,s,f,D),U_(i)}function s2(i,s){return J2(i,null,null,s),U_(i)}function X3(i,s,f){i.lanes|=f;var D=i.alternate;D!==null&&(D.lanes|=f);for(var ve=!1,ft=i.return;ft!==null;)ft.childLanes|=f,D=ft.alternate,D!==null&&(D.childLanes|=f),ft.tag===22&&(i=ft.stateNode,i===null||i._visibility&1||(ve=!0)),i=ft,ft=ft.return;return i.tag===3?(ft=i.stateNode,ve&&s!==null&&(ve=31-Om(f),i=ft.hiddenUpdates,D=i[ve],D===null?i[ve]=[s]:D.push(s),s.lane=f|536870912),ft):null}function U_(i){if(50<F2)throw F2=0,s3=null,Error(n(185));for(var s=i.return;s!==null;)i=s,s=i.return;return i.tag===3?i.stateNode:null}var l2={};function s5(i,s,f,D){this.tag=i,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=D,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wy(i,s,f,D){return new s5(i,s,f,D)}function Pb(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Ax(i,s){var f=i.alternate;return f===null?(f=Wy(i.tag,s,i.key,i.mode),f.elementType=i.elementType,f.type=i.type,f.stateNode=i.stateNode,f.alternate=i,i.alternate=f):(f.pendingProps=s,f.type=i.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=i.flags&65011712,f.childLanes=i.childLanes,f.lanes=i.lanes,f.child=i.child,f.memoizedProps=i.memoizedProps,f.memoizedState=i.memoizedState,f.updateQueue=i.updateQueue,s=i.dependencies,f.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},f.sibling=i.sibling,f.index=i.index,f.ref=i.ref,f.refCleanup=i.refCleanup,f}function Y3(i,s){i.flags&=65011714;var f=i.alternate;return f===null?(i.childLanes=0,i.lanes=s,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=f.childLanes,i.lanes=f.lanes,i.child=f.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=f.memoizedProps,i.memoizedState=f.memoizedState,i.updateQueue=f.updateQueue,i.type=f.type,s=f.dependencies,i.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),i}function B_(i,s,f,D,ve,ft){var Ci=0;if(D=i,typeof i=="function")Pb(i)&&(Ci=1);else if(typeof i=="string")Ci=Jw(i,f,kp.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case st:return i=Wy(31,f,s,ve),i.elementType=st,i.lanes=ft,i;case k:return u2(f.children,ve,ft,s);case J:Ci=8,ve|=24;break;case q:return i=Wy(12,f,s,ve|2),i.elementType=q,i.lanes=ft,i;case ie:return i=Wy(13,f,s,ve),i.elementType=ie,i.lanes=ft,i;case se:return i=Wy(19,f,s,ve),i.elementType=se,i.lanes=ft,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case V:Ci=10;break e;case Se:Ci=9;break e;case Y:Ci=11;break e;case ct:Ci=14;break e;case ae:Ci=16,D=null;break e}Ci=29,f=Error(n(130,i===null?"null":typeof i,"")),D=null}return s=Wy(Ci,f,s,ve),s.elementType=i,s.type=D,s.lanes=ft,s}function u2(i,s,f,D){return i=Wy(7,i,D,s),i.lanes=f,i}function Fb(i,s,f){return i=Wy(6,i,null,s),i.lanes=f,i}function Z3(i){var s=Wy(18,null,null,0);return s.stateNode=i,s}function j_(i,s,f){return s=Wy(4,i.children!==null?i.children:[],i.key,s),s.lanes=f,s.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},s}var zb=new WeakMap;function sx(i,s){if(typeof i=="object"&&i!==null){var f=zb.get(i);return f!==void 0?f:(s={value:i,source:s,stack:Qm(s)},zb.set(i,s),s)}return{value:i,source:s,stack:Qm(s)}}var w2=[],Ux=0,V_=null,K2=0,qy=[],lx=0,Cx=null,vx=1,yx="";function Dx(i,s){w2[Ux++]=K2,w2[Ux++]=V_,V_=i,K2=s}function J3(i,s,f){qy[lx++]=vx,qy[lx++]=yx,qy[lx++]=Cx,Cx=i;var D=vx;i=yx;var ve=32-Om(D)-1;D&=~(1<<ve),f+=1;var ft=32-Om(s)+ve;if(30<ft){var Ci=ve-ve%5;ft=(D&(1<<Ci)-1).toString(32),D>>=Ci,ve-=Ci,vx=1<<32-Om(s)+ve|f<<ve|D,yx=ft+i}else vx=1<<ft|f<<ve|D,yx=i}function Q2(i){i.return!==null&&(Dx(i,1),J3(i,1,0))}function Ib(i){for(;i===V_;)V_=w2[--Ux],w2[Ux]=null,K2=w2[--Ux],w2[Ux]=null;for(;i===Cx;)Cx=qy[--lx],qy[lx]=null,yx=qy[--lx],qy[lx]=null,vx=qy[--lx],qy[lx]=null}function K3(i,s){qy[lx++]=vx,qy[lx++]=yx,qy[lx++]=Cx,vx=s.id,yx=s.overflow,Cx=i}var Uy=null,uy=null,Nv=!1,Rx=null,ux=!1,Ub=Error(n(519));function Bx(i){var s=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw e_(sx(s,i)),Ub}function Q3(i){var s=i.stateNode,f=i.type,D=i.memoizedProps;switch(s[Cv]=i,s[wg]=D,f){case"dialog":Ev("cancel",s),Ev("close",s);break;case"iframe":case"object":case"embed":Ev("load",s);break;case"video":case"audio":for(f=0;f<j2.length;f++)Ev(j2[f],s);break;case"source":Ev("error",s);break;case"img":case"image":case"link":Ev("error",s),Ev("load",s);break;case"details":Ev("toggle",s);break;case"input":Ev("invalid",s),lt(s,D.value,D.defaultValue,D.checked,D.defaultChecked,D.type,D.name,!0);break;case"select":Ev("invalid",s);break;case"textarea":Ev("invalid",s),Zt(s,D.value,D.defaultValue,D.children)}f=D.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||s.textContent===""+f||D.suppressHydrationWarning===!0||cb(s.textContent,f)?(D.popover!=null&&(Ev("beforetoggle",s),Ev("toggle",s)),D.onScroll!=null&&Ev("scroll",s),D.onScrollEnd!=null&&Ev("scrollend",s),D.onClick!=null&&(s.onclick=r0),s=!0):s=!1,s||Bx(i,!0)}function Bb(i){for(Uy=i.return;Uy;)switch(Uy.tag){case 5:case 31:case 13:ux=!1;return;case 27:case 3:ux=!0;return;default:Uy=Uy.return}}function E2(i){if(i!==Uy)return!1;if(!Nv)return Bb(i),Nv=!0,!1;var s=i.tag,f;if((f=s!==3&&s!==27)&&((f=s===5)&&(f=i.type,f=!(f!=="form"&&f!=="button")||E_(i.type,i.memoizedProps)),f=!f),f&&uy&&Bx(i),Bb(i),s===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));uy=M3(i)}else if(s===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));uy=M3(i)}else s===27?(s=uy,Yx(i.type)?(i=fb,fb=null,uy=i):uy=s):uy=Uy?dx(i.stateNode.nextSibling):null;return!0}function c2(){uy=Uy=null,Nv=!1}function jb(){var i=Rx;return i!==null&&(Yy===null?Yy=i:Yy.push.apply(Yy,i),Rx=null),i}function e_(i){Rx===null?Rx=[i]:Rx.push(i)}var t_=Up(null),jx=null,Nx=null;function Vx(i,s,f){y0(t_,s._currentValue),s._currentValue=f}function Lx(i){i._currentValue=t_.current,l0(t_)}function Vb(i,s,f){for(;i!==null;){var D=i.alternate;if((i.childLanes&s)!==s?(i.childLanes|=s,D!==null&&(D.childLanes|=s)):D!==null&&(D.childLanes&s)!==s&&(D.childLanes|=s),i===f)break;i=i.return}}function S2(i,s,f,D){var ve=i.child;for(ve!==null&&(ve.return=i);ve!==null;){var ft=ve.dependencies;if(ft!==null){var Ci=ve.child;ft=ft.firstContext;e:for(;ft!==null;){var Zp=ft;ft=ve;for(var K0=0;K0<s.length;K0++)if(Zp.context===s[K0]){ft.lanes|=f,Zp=ft.alternate,Zp!==null&&(Zp.lanes|=f),Vb(ft.return,f,i),D||(Ci=null);break e}ft=Zp.next}}else if(ve.tag===18){if(Ci=ve.return,Ci===null)throw Error(n(341));Ci.lanes|=f,ft=Ci.alternate,ft!==null&&(ft.lanes|=f),Vb(Ci,f,i),Ci=null}else Ci=ve.child;if(Ci!==null)Ci.return=ve;else for(Ci=ve;Ci!==null;){if(Ci===i){Ci=null;break}if(ve=Ci.sibling,ve!==null){ve.return=Ci.return,Ci=ve;break}Ci=Ci.return}ve=Ci}}function h2(i,s,f,D){i=null;for(var ve=s,ft=!1;ve!==null;){if(!ft){if((ve.flags&524288)!==0)ft=!0;else if((ve.flags&262144)!==0)break}if(ve.tag===10){var Ci=ve.alternate;if(Ci===null)throw Error(n(387));if(Ci=Ci.memoizedProps,Ci!==null){var Zp=ve.type;Jy(ve.pendingProps.value,Ci.value)||(i!==null?i.push(Zp):i=[Zp])}}else if(ve===v0.current){if(Ci=ve.alternate,Ci===null)throw Error(n(387));Ci.memoizedState.memoizedState!==ve.memoizedState.memoizedState&&(i!==null?i.push(W2):i=[W2])}ve=ve.return}i!==null&&S2(s,i,f,D),s.flags|=262144}function H_(i){for(i=i.firstContext;i!==null;){if(!Jy(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function d2(i){jx=i,Nx=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function By(i){return Hb(jx,i)}function T2(i,s){return jx===null&&d2(i),Hb(i,s)}function Hb(i,s){var f=s._currentValue;if(s={context:s,memoizedValue:f,next:null},Nx===null){if(i===null)throw Error(n(308));Nx=s,i.dependencies={lanes:0,firstContext:s},i.flags|=524288}else Nx=Nx.next=s;return f}var Gb=typeof AbortController<"u"?AbortController:function(){var i=[],s=this.signal={aborted:!1,addEventListener:function(f,D){i.push(D)}};this.abort=function(){s.aborted=!0,i.forEach(function(f){return f()})}},l5=t.unstable_scheduleCallback,u5=t.unstable_NormalPriority,Ay={$$typeof:V,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function $b(){return{controller:new Gb,data:new Map,refCount:0}}function r_(i){i.refCount--,i.refCount===0&&l5(u5,function(){i.controller.abort()})}var f2=null,G_=0,M2=0,A2=null;function c5(i,s){if(f2===null){var f=f2=[];G_=0,M2=m3(),A2={status:"pending",value:void 0,then:function(D){f.push(D)}}}return G_++,s.then(ew,ew),s}function ew(){if(--G_===0&&f2!==null){A2!==null&&(A2.status="fulfilled");var i=f2;f2=null,M2=0,A2=null;for(var s=0;s<i.length;s++)(0,i[s])()}}function Wb(i,s){var f=[],D={status:"pending",value:null,reason:null,then:function(ve){f.push(ve)}};return i.then(function(){D.status="fulfilled",D.value=s;for(var ve=0;ve<f.length;ve++)(0,f[ve])(s)},function(ve){for(D.status="rejected",D.reason=ve,ve=0;ve<f.length;ve++)(0,f[ve])(void 0)}),D}var tw=re.S;re.S=function(i,s){wx=wi(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&c5(i,s),tw!==null&&tw(i,s)};var Hx=Up(null);function qb(){var i=Hx.current;return i!==null?i:Dg.pooledCache}function n_(i,s){s===null?y0(Hx,Hx.current):y0(Hx,s.pool)}function rw(){var i=qb();return i===null?null:{parent:Ay._currentValue,pool:i}}var C2=Error(n(460)),Xb=Error(n(474)),$_=Error(n(542)),W_={then:function(){}};function nw(i){return i=i.status,i==="fulfilled"||i==="rejected"}function aw(i,s,f){switch(f=i[f],f===void 0?i.push(s):f!==s&&(s.then(r0,r0),s=f),s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,Yb(i),i;default:if(typeof s.status=="string")s.then(r0,r0);else{if(i=Dg,i!==null&&100<i.shellSuspendCounter)throw Error(n(482));i=s,i.status="pending",i.then(function(D){if(s.status==="pending"){var ve=s;ve.status="fulfilled",ve.value=D}},function(D){if(s.status==="pending"){var ve=s;ve.status="rejected",ve.reason=D}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,Yb(i),i}throw m2=s,C2}}function p2(i){try{var s=i._init;return s(i._payload)}catch(f){throw f!==null&&typeof f=="object"&&typeof f.then=="function"?(m2=f,C2):f}}var m2=null;function iw(){if(m2===null)throw Error(n(459));var i=m2;return m2=null,i}function Yb(i){if(i===C2||i===$_)throw Error(n(483))}var D2=null,a_=0;function q_(i){var s=a_;return a_+=1,D2===null&&(D2=[]),aw(D2,i,s)}function i_(i,s){s=s.props.ref,i.ref=s!==void 0?s:null}function R2(i,s){throw s.$$typeof===T?Error(n(525)):(i=Object.prototype.toString.call(s),Error(n(31,i==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":i)))}function o_(i){function s(Rm,_m){if(i){var Um=Rm.deletions;Um===null?(Rm.deletions=[_m],Rm.flags|=16):Um.push(_m)}}function f(Rm,_m){if(!i)return null;for(;_m!==null;)s(Rm,_m),_m=_m.sibling;return null}function D(Rm){for(var _m=new Map;Rm!==null;)Rm.key!==null?_m.set(Rm.key,Rm):_m.set(Rm.index,Rm),Rm=Rm.sibling;return _m}function ve(Rm,_m){return Rm=Ax(Rm,_m),Rm.index=0,Rm.sibling=null,Rm}function ft(Rm,_m,Um){return Rm.index=Um,i?(Um=Rm.alternate,Um!==null?(Um=Um.index,Um<_m?(Rm.flags|=67108866,_m):Um):(Rm.flags|=67108866,_m)):(Rm.flags|=1048576,_m)}function Ci(Rm){return i&&Rm.alternate===null&&(Rm.flags|=67108866),Rm}function Zp(Rm,_m,Um,v1){return _m===null||_m.tag!==6?(_m=Fb(Um,Rm.mode,v1),_m.return=Rm,_m):(_m=ve(_m,Um),_m.return=Rm,_m)}function K0(Rm,_m,Um,v1){var Tg=Um.type;return Tg===k?Xm(Rm,_m,Um.props.children,v1,Um.key):_m!==null&&(_m.elementType===Tg||typeof Tg=="object"&&Tg!==null&&Tg.$$typeof===ae&&p2(Tg)===_m.type)?(_m=ve(_m,Um.props),i_(_m,Um),_m.return=Rm,_m):(_m=B_(Um.type,Um.key,Um.props,null,Rm.mode,v1),i_(_m,Um),_m.return=Rm,_m)}function Pm(Rm,_m,Um,v1){return _m===null||_m.tag!==4||_m.stateNode.containerInfo!==Um.containerInfo||_m.stateNode.implementation!==Um.implementation?(_m=j_(Um,Rm.mode,v1),_m.return=Rm,_m):(_m=ve(_m,Um.children||[]),_m.return=Rm,_m)}function Xm(Rm,_m,Um,v1,Tg){return _m===null||_m.tag!==7?(_m=u2(Um,Rm.mode,v1,Tg),_m.return=Rm,_m):(_m=ve(_m,Um),_m.return=Rm,_m)}function wm(Rm,_m,Um){if(typeof _m=="string"&&_m!==""||typeof _m=="number"||typeof _m=="bigint")return _m=Fb(""+_m,Rm.mode,Um),_m.return=Rm,_m;if(typeof _m=="object"&&_m!==null){switch(_m.$$typeof){case R:return Um=B_(_m.type,_m.key,_m.props,null,Rm.mode,Um),i_(Um,_m),Um.return=Rm,Um;case W:return _m=j_(_m,Rm.mode,Um),_m.return=Rm,_m;case ae:return _m=p2(_m),wm(Rm,_m,Um)}if(sa(_m)||jo(_m))return _m=u2(_m,Rm.mode,Um,null),_m.return=Rm,_m;if(typeof _m.then=="function")return wm(Rm,q_(_m),Um);if(_m.$$typeof===V)return wm(Rm,T2(Rm,_m),Um);R2(Rm,_m)}return null}function Am(Rm,_m,Um,v1){var Tg=_m!==null?_m.key:null;if(typeof Um=="string"&&Um!==""||typeof Um=="number"||typeof Um=="bigint")return Tg!==null?null:Zp(Rm,_m,""+Um,v1);if(typeof Um=="object"&&Um!==null){switch(Um.$$typeof){case R:return Um.key===Tg?K0(Rm,_m,Um,v1):null;case W:return Um.key===Tg?Pm(Rm,_m,Um,v1):null;case ae:return Um=p2(Um),Am(Rm,_m,Um,v1)}if(sa(Um)||jo(Um))return Tg!==null?null:Xm(Rm,_m,Um,v1,null);if(typeof Um.then=="function")return Am(Rm,_m,q_(Um),v1);if(Um.$$typeof===V)return Am(Rm,_m,T2(Rm,Um),v1);R2(Rm,Um)}return null}function Lm(Rm,_m,Um,v1,Tg){if(typeof v1=="string"&&v1!==""||typeof v1=="number"||typeof v1=="bigint")return Rm=Rm.get(Um)||null,Zp(_m,Rm,""+v1,Tg);if(typeof v1=="object"&&v1!==null){switch(v1.$$typeof){case R:return Rm=Rm.get(v1.key===null?Um:v1.key)||null,K0(_m,Rm,v1,Tg);case W:return Rm=Rm.get(v1.key===null?Um:v1.key)||null,Pm(_m,Rm,v1,Tg);case ae:return v1=p2(v1),Lm(Rm,_m,Um,v1,Tg)}if(sa(v1)||jo(v1))return Rm=Rm.get(Um)||null,Xm(_m,Rm,v1,Tg,null);if(typeof v1.then=="function")return Lm(Rm,_m,Um,q_(v1),Tg);if(v1.$$typeof===V)return Lm(Rm,_m,Um,T2(_m,v1),Tg);R2(_m,v1)}return null}function X1(Rm,_m,Um,v1){for(var Tg=null,Zg=null,yg=_m,iv=_m=0,Av=null;yg!==null&&iv<Um.length;iv++){yg.index>iv?(Av=yg,yg=null):Av=yg.sibling;var pv=Am(Rm,yg,Um[iv],v1);if(pv===null){yg===null&&(yg=Av);break}i&&yg&&pv.alternate===null&&s(Rm,yg),_m=ft(pv,_m,iv),Zg===null?Tg=pv:Zg.sibling=pv,Zg=pv,yg=Av}if(iv===Um.length)return f(Rm,yg),Nv&&Dx(Rm,iv),Tg;if(yg===null){for(;iv<Um.length;iv++)yg=wm(Rm,Um[iv],v1),yg!==null&&(_m=ft(yg,_m,iv),Zg===null?Tg=yg:Zg.sibling=yg,Zg=yg);return Nv&&Dx(Rm,iv),Tg}for(yg=D(yg);iv<Um.length;iv++)Av=Lm(yg,Rm,iv,Um[iv],v1),Av!==null&&(i&&Av.alternate!==null&&yg.delete(Av.key===null?iv:Av.key),_m=ft(Av,_m,iv),Zg===null?Tg=Av:Zg.sibling=Av,Zg=Av);return i&&yg.forEach(function(py){return s(Rm,py)}),Nv&&Dx(Rm,iv),Tg}function gg(Rm,_m,Um,v1){if(Um==null)throw Error(n(151));for(var Tg=null,Zg=null,yg=_m,iv=_m=0,Av=null,pv=Um.next();yg!==null&&!pv.done;iv++,pv=Um.next()){yg.index>iv?(Av=yg,yg=null):Av=yg.sibling;var py=Am(Rm,yg,pv.value,v1);if(py===null){yg===null&&(yg=Av);break}i&&yg&&py.alternate===null&&s(Rm,yg),_m=ft(py,_m,iv),Zg===null?Tg=py:Zg.sibling=py,Zg=py,yg=Av}if(pv.done)return f(Rm,yg),Nv&&Dx(Rm,iv),Tg;if(yg===null){for(;!pv.done;iv++,pv=Um.next())pv=wm(Rm,pv.value,v1),pv!==null&&(_m=ft(pv,_m,iv),Zg===null?Tg=pv:Zg.sibling=pv,Zg=pv);return Nv&&Dx(Rm,iv),Tg}for(yg=D(yg);!pv.done;iv++,pv=Um.next())pv=Lm(yg,Rm,iv,pv.value,v1),pv!==null&&(i&&pv.alternate!==null&&yg.delete(pv.key===null?iv:pv.key),_m=ft(pv,_m,iv),Zg===null?Tg=pv:Zg.sibling=pv,Zg=pv);return i&&yg.forEach(function(fx){return s(Rm,fx)}),Nv&&Dx(Rm,iv),Tg}function Yg(Rm,_m,Um,v1){if(typeof Um=="object"&&Um!==null&&Um.type===k&&Um.key===null&&(Um=Um.props.children),typeof Um=="object"&&Um!==null){switch(Um.$$typeof){case R:e:{for(var Tg=Um.key;_m!==null;){if(_m.key===Tg){if(Tg=Um.type,Tg===k){if(_m.tag===7){f(Rm,_m.sibling),v1=ve(_m,Um.props.children),v1.return=Rm,Rm=v1;break e}}else if(_m.elementType===Tg||typeof Tg=="object"&&Tg!==null&&Tg.$$typeof===ae&&p2(Tg)===_m.type){f(Rm,_m.sibling),v1=ve(_m,Um.props),i_(v1,Um),v1.return=Rm,Rm=v1;break e}f(Rm,_m);break}else s(Rm,_m);_m=_m.sibling}Um.type===k?(v1=u2(Um.props.children,Rm.mode,v1,Um.key),v1.return=Rm,Rm=v1):(v1=B_(Um.type,Um.key,Um.props,null,Rm.mode,v1),i_(v1,Um),v1.return=Rm,Rm=v1)}return Ci(Rm);case W:e:{for(Tg=Um.key;_m!==null;){if(_m.key===Tg)if(_m.tag===4&&_m.stateNode.containerInfo===Um.containerInfo&&_m.stateNode.implementation===Um.implementation){f(Rm,_m.sibling),v1=ve(_m,Um.children||[]),v1.return=Rm,Rm=v1;break e}else{f(Rm,_m);break}else s(Rm,_m);_m=_m.sibling}v1=j_(Um,Rm.mode,v1),v1.return=Rm,Rm=v1}return Ci(Rm);case ae:return Um=p2(Um),Yg(Rm,_m,Um,v1)}if(sa(Um))return X1(Rm,_m,Um,v1);if(jo(Um)){if(Tg=jo(Um),typeof Tg!="function")throw Error(n(150));return Um=Tg.call(Um),gg(Rm,_m,Um,v1)}if(typeof Um.then=="function")return Yg(Rm,_m,q_(Um),v1);if(Um.$$typeof===V)return Yg(Rm,_m,T2(Rm,Um),v1);R2(Rm,Um)}return typeof Um=="string"&&Um!==""||typeof Um=="number"||typeof Um=="bigint"?(Um=""+Um,_m!==null&&_m.tag===6?(f(Rm,_m.sibling),v1=ve(_m,Um),v1.return=Rm,Rm=v1):(f(Rm,_m),v1=Fb(Um,Rm.mode,v1),v1.return=Rm,Rm=v1),Ci(Rm)):f(Rm,_m)}return function(Rm,_m,Um,v1){try{a_=0;var Tg=Yg(Rm,_m,Um,v1);return D2=null,Tg}catch(yg){if(yg===C2||yg===$_)throw yg;var Zg=Wy(29,yg,null,Rm.mode);return Zg.lanes=v1,Zg.return=Rm,Zg}finally{}}}var Gx=o_(!0),ow=o_(!1),px=!1;function Zb(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function X_(i,s){i=i.updateQueue,s.updateQueue===i&&(s.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function $x(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function mx(i,s,f){var D=i.updateQueue;if(D===null)return null;if(D=D.shared,(hv&2)!==0){var ve=D.pending;return ve===null?s.next=s:(s.next=ve.next,ve.next=s),D.pending=s,s=U_(i),X3(i,null,f),s}return J2(i,D,s,f),U_(i)}function g2(i,s,f){if(s=s.updateQueue,s!==null&&(s=s.shared,(f&4194048)!==0)){var D=s.lanes;D&=i.pendingLanes,f|=D,s.lanes=f,Vv(i,f)}}function s_(i,s){var f=i.updateQueue,D=i.alternate;if(D!==null&&(D=D.updateQueue,f===D)){var ve=null,ft=null;if(f=f.firstBaseUpdate,f!==null){do{var Ci={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};ft===null?ve=ft=Ci:ft=ft.next=Ci,f=f.next}while(f!==null);ft===null?ve=ft=s:ft=ft.next=s}else ve=ft=s;f={baseState:D.baseState,firstBaseUpdate:ve,lastBaseUpdate:ft,shared:D.shared,callbacks:D.callbacks},i.updateQueue=f;return}i=f.lastBaseUpdate,i===null?f.firstBaseUpdate=s:i.next=s,f.lastBaseUpdate=s}var Jb=!1;function l_(){if(Jb){var i=A2;if(i!==null)throw i}}function u_(i,s,f,D){Jb=!1;var ve=i.updateQueue;px=!1;var ft=ve.firstBaseUpdate,Ci=ve.lastBaseUpdate,Zp=ve.shared.pending;if(Zp!==null){ve.shared.pending=null;var K0=Zp,Pm=K0.next;K0.next=null,Ci===null?ft=Pm:Ci.next=Pm,Ci=K0;var Xm=i.alternate;Xm!==null&&(Xm=Xm.updateQueue,Zp=Xm.lastBaseUpdate,Zp!==Ci&&(Zp===null?Xm.firstBaseUpdate=Pm:Zp.next=Pm,Xm.lastBaseUpdate=K0))}if(ft!==null){var wm=ve.baseState;Ci=0,Xm=Pm=K0=null,Zp=ft;do{var Am=Zp.lane&-536870913,Lm=Am!==Zp.lane;if(Lm?(zg&Am)===Am:(D&Am)===Am){Am!==0&&Am===M2&&(Jb=!0),Xm!==null&&(Xm=Xm.next={lane:0,tag:Zp.tag,payload:Zp.payload,callback:null,next:null});e:{var X1=i,gg=Zp;Am=s;var Yg=f;switch(gg.tag){case 1:if(X1=gg.payload,typeof X1=="function"){wm=X1.call(Yg,wm,Am);break e}wm=X1;break e;case 3:X1.flags=X1.flags&-65537|128;case 0:if(X1=gg.payload,Am=typeof X1=="function"?X1.call(Yg,wm,Am):X1,Am==null)break e;wm=g({},wm,Am);break e;case 2:px=!0}}Am=Zp.callback,Am!==null&&(i.flags|=64,Lm&&(i.flags|=8192),Lm=ve.callbacks,Lm===null?ve.callbacks=[Am]:Lm.push(Am))}else Lm={lane:Am,tag:Zp.tag,payload:Zp.payload,callback:Zp.callback,next:null},Xm===null?(Pm=Xm=Lm,K0=wm):Xm=Xm.next=Lm,Ci|=Am;if(Zp=Zp.next,Zp===null){if(Zp=ve.shared.pending,Zp===null)break;Lm=Zp,Zp=Lm.next,Lm.next=null,ve.lastBaseUpdate=Lm,ve.shared.pending=null}}while(!0);Xm===null&&(K0=wm),ve.baseState=K0,ve.firstBaseUpdate=Pm,ve.lastBaseUpdate=Xm,ft===null&&(ve.shared.lanes=0),Vy|=Ci,i.lanes=Ci,i.memoizedState=wm}}function sw(i,s){if(typeof i!="function")throw Error(n(191,i));i.call(s)}function lw(i,s){var f=i.callbacks;if(f!==null)for(i.callbacks=null,i=0;i<f.length;i++)sw(f[i],s)}var N2=Up(null),c_=Up(0);function uw(i,s){i=zy,y0(c_,i),y0(N2,s),zy=i|s.baseLanes}function Y_(){y0(c_,zy),y0(N2,N2.current)}function Kb(){zy=c_.current,l0(N2),l0(c_)}var Xy=Up(null),cx=null;function Wx(i){var s=i.alternate;y0(Mv,Mv.current&1),y0(Xy,i),cx===null&&(s===null||N2.current!==null||s.memoizedState!==null)&&(cx=i)}function Qb(i){y0(Mv,Mv.current),y0(Xy,i),cx===null&&(cx=i)}function cw(i){i.tag===22?(y0(Mv,Mv.current),y0(Xy,i),cx===null&&(cx=i)):qx()}function qx(){y0(Mv,Mv.current),y0(Xy,Xy.current)}function Qy(i){l0(Xy),cx===i&&(cx=null),l0(Mv)}var Mv=Up(0);function Oy(i){for(var s=i;s!==null;){if(s.tag===13){var f=s.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||T3(f)||H2(f)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var kx=0,dv=null,Jv=null,Cy=null,Z_=!1,L2=!1,v2=!1,J_=0,h_=0,k2=null,h5=0;function Ey(){throw Error(n(321))}function e3(i,s){if(s===null)return!1;for(var f=0;f<s.length&&f<i.length;f++)if(!Jy(i[f],s[f]))return!1;return!0}function t3(i,s,f,D,ve,ft){return kx=ft,dv=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,re.H=i===null||i.memoizedState===null?Gt:Gp,v2=!1,ft=f(D,ve),v2=!1,L2&&(ft=dw(s,f,D,ve)),hw(i),ft}function hw(i){re.H=Rp;var s=Jv!==null&&Jv.next!==null;if(kx=0,Cy=Jv=dv=null,Z_=!1,h_=0,k2=null,s)throw Error(n(300));i===null||Wt||(i=i.dependencies,i!==null&&H_(i)&&(Wt=!0))}function dw(i,s,f,D){dv=i;var ve=0;do{if(L2&&(k2=null),h_=0,L2=!1,25<=ve)throw Error(n(301));if(ve+=1,Cy=Jv=null,i.updateQueue!=null){var ft=i.updateQueue;ft.lastEffect=null,ft.events=null,ft.stores=null,ft.memoCache!=null&&(ft.memoCache.index=0)}re.H=c0,ft=s(f,D)}while(L2);return ft}function d5(){var i=re.H,s=i.useState()[0];return s=typeof s.then=="function"?m(s):s,i=i.useState()[0],(Jv!==null?Jv.memoizedState:null)!==i&&(dv.flags|=1024),s}function r3(){var i=J_!==0;return J_=0,i}function n3(i,s,f){s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~f}function nt(i){if(Z_){for(i=i.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}Z_=!1}kx=0,Cy=Jv=dv=null,L2=!1,h_=J_=0,k2=null}function ke(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Cy===null?dv.memoizedState=Cy=i:Cy=Cy.next=i,Cy}function _(){if(Jv===null){var i=dv.alternate;i=i!==null?i.memoizedState:null}else i=Jv.next;var s=Cy===null?dv.memoizedState:Cy.next;if(s!==null)Cy=s,Jv=i;else{if(i===null)throw dv.alternate===null?Error(n(467)):Error(n(310));Jv=i,i={memoizedState:Jv.memoizedState,baseState:Jv.baseState,baseQueue:Jv.baseQueue,queue:Jv.queue,next:null},Cy===null?dv.memoizedState=Cy=i:Cy=Cy.next=i}return Cy}function d(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function m(i){var s=h_;return h_+=1,k2===null&&(k2=[]),i=aw(k2,i,s),s=dv,(Cy===null?s.memoizedState:Cy.next)===null&&(s=s.alternate,re.H=s===null||s.memoizedState===null?Gt:Gp),i}function E(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return m(i);if(i.$$typeof===V)return By(i)}throw Error(n(438,String(i)))}function b(i){var s=null,f=dv.updateQueue;if(f!==null&&(s=f.memoCache),s==null){var D=dv.alternate;D!==null&&(D=D.updateQueue,D!==null&&(D=D.memoCache,D!=null&&(s={data:D.data.map(function(ve){return ve.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),f===null&&(f=d(),dv.updateQueue=f),f.memoCache=s,f=s.data[s.index],f===void 0)for(f=s.data[s.index]=Array(i),D=0;D<i;D++)f[D]=Ct;return s.index++,f}function w(i,s){return typeof s=="function"?s(i):s}function S(i){var s=_();return C(s,Jv,i)}function C(i,s,f){var D=i.queue;if(D===null)throw Error(n(311));D.lastRenderedReducer=f;var ve=i.baseQueue,ft=D.pending;if(ft!==null){if(ve!==null){var Ci=ve.next;ve.next=ft.next,ft.next=Ci}s.baseQueue=ve=ft,D.pending=null}if(ft=i.baseState,ve===null)i.memoizedState=ft;else{s=ve.next;var Zp=Ci=null,K0=null,Pm=s,Xm=!1;do{var wm=Pm.lane&-536870913;if(wm!==Pm.lane?(zg&wm)===wm:(kx&wm)===wm){var Am=Pm.revertLane;if(Am===0)K0!==null&&(K0=K0.next={lane:0,revertLane:0,gesture:null,action:Pm.action,hasEagerState:Pm.hasEagerState,eagerState:Pm.eagerState,next:null}),wm===M2&&(Xm=!0);else if((kx&Am)===Am){Pm=Pm.next,Am===M2&&(Xm=!0);continue}else wm={lane:0,revertLane:Pm.revertLane,gesture:null,action:Pm.action,hasEagerState:Pm.hasEagerState,eagerState:Pm.eagerState,next:null},K0===null?(Zp=K0=wm,Ci=ft):K0=K0.next=wm,dv.lanes|=Am,Vy|=Am;wm=Pm.action,v2&&f(ft,wm),ft=Pm.hasEagerState?Pm.eagerState:f(ft,wm)}else Am={lane:wm,revertLane:Pm.revertLane,gesture:Pm.gesture,action:Pm.action,hasEagerState:Pm.hasEagerState,eagerState:Pm.eagerState,next:null},K0===null?(Zp=K0=Am,Ci=ft):K0=K0.next=Am,dv.lanes|=wm,Vy|=wm;Pm=Pm.next}while(Pm!==null&&Pm!==s);if(K0===null?Ci=ft:K0.next=Zp,!Jy(ft,i.memoizedState)&&(Wt=!0,Xm&&(f=A2,f!==null)))throw f;i.memoizedState=ft,i.baseState=Ci,i.baseQueue=K0,D.lastRenderedState=ft}return ve===null&&(D.lanes=0),[i.memoizedState,D.dispatch]}function p(i){var s=_(),f=s.queue;if(f===null)throw Error(n(311));f.lastRenderedReducer=i;var D=f.dispatch,ve=f.pending,ft=s.memoizedState;if(ve!==null){f.pending=null;var Ci=ve=ve.next;do ft=i(ft,Ci.action),Ci=Ci.next;while(Ci!==ve);Jy(ft,s.memoizedState)||(Wt=!0),s.memoizedState=ft,s.baseQueue===null&&(s.baseState=ft),f.lastRenderedState=ft}return[ft,D]}function F(i,s,f){var D=dv,ve=_(),ft=Nv;if(ft){if(f===void 0)throw Error(n(407));f=f()}else f=s();var Ci=!Jy((Jv||ve).memoizedState,f);if(Ci&&(ve.memoizedState=f,Wt=!0),ve=ve.queue,wt($.bind(null,D,ve,i),[i]),ve.getSnapshot!==s||Ci||Cy!==null&&Cy.memoizedState.tag&1){if(D.flags|=2048,it(9,{destroy:void 0},O.bind(null,D,ve,f,s),null),Dg===null)throw Error(n(349));ft||(kx&127)!==0||A(D,s,f)}return f}function A(i,s,f){i.flags|=16384,i={getSnapshot:s,value:f},s=dv.updateQueue,s===null?(s=d(),dv.updateQueue=s,s.stores=[i]):(f=s.stores,f===null?s.stores=[i]:f.push(i))}function O(i,s,f,D){s.value=f,s.getSnapshot=D,j(s)&&z(i)}function $(i,s,f){return f(function(){j(s)&&z(i)})}function j(i){var s=i.getSnapshot;i=i.value;try{var f=s();return!Jy(i,f)}catch{return!0}}function z(i){var s=s2(i,2);s!==null&&Zy(s,i,2)}function I(i){var s=ke();if(typeof i=="function"){var f=i;if(i=f(),v2){r1(!0);try{f()}finally{r1(!1)}}}return s.memoizedState=s.baseState=i,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:w,lastRenderedState:i},s}function G(i,s,f,D){return i.baseState=f,C(i,Jv,typeof D=="function"?D:w)}function M(i,s,f,D,ve){if(w0(i))throw Error(n(485));if(i=s.action,i!==null){var ft={payload:ve,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Ci){ft.listeners.push(Ci)}};re.T!==null?f(!0):ft.isTransition=!1,D(ft),f=s.pending,f===null?(ft.next=s.pending=ft,L(s,ft)):(ft.next=f.next,s.pending=f.next=ft)}}function L(i,s){var f=s.action,D=s.payload,ve=i.state;if(s.isTransition){var ft=re.T,Ci={};re.T=Ci;try{var Zp=f(ve,D),K0=re.S;K0!==null&&K0(Ci,Zp),B(i,s,Zp)}catch(Pm){ee(i,s,Pm)}finally{ft!==null&&Ci.types!==null&&(ft.types=Ci.types),re.T=ft}}else try{ft=f(ve,D),B(i,s,ft)}catch(Pm){ee(i,s,Pm)}}function B(i,s,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(D){X(i,s,D)},function(D){return ee(i,s,D)}):X(i,s,f)}function X(i,s,f){s.status="fulfilled",s.value=f,yt(s),i.state=f,s=i.pending,s!==null&&(f=s.next,f===s?i.pending=null:(f=f.next,s.next=f,L(i,f)))}function ee(i,s,f){var D=i.pending;if(i.pending=null,D!==null){D=D.next;do s.status="rejected",s.reason=f,yt(s),s=s.next;while(s!==D)}i.action=null}function yt(i){i=i.listeners;for(var s=0;s<i.length;s++)(0,i[s])()}function Ze(i,s){return s}function Re(i,s){if(Nv){var f=Dg.formState;if(f!==null){e:{var D=dv;if(Nv){if(uy){t:{for(var ve=uy,ft=ux;ve.nodeType!==8;){if(!ft){ve=null;break t}if(ve=dx(ve.nextSibling),ve===null){ve=null;break t}}ft=ve.data,ve=ft==="F!"||ft==="F"?ve:null}if(ve){uy=dx(ve.nextSibling),D=ve.data==="F!";break e}}Bx(D)}D=!1}D&&(s=f[0])}}return f=ke(),f.memoizedState=f.baseState=s,D={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ze,lastRenderedState:s},f.queue=D,f=Hp.bind(null,dv,D),D.dispatch=f,D=I(!1),ft=R0.bind(null,dv,!1,D.queue),D=ke(),ve={state:s,dispatch:null,action:i,pending:null},D.queue=ve,f=M.bind(null,dv,ve,ft,f),ve.dispatch=f,D.memoizedState=i,[s,f,!1]}function Q(i){var s=_();return xt(s,Jv,i)}function xt(i,s,f){if(s=C(i,s,Ze)[0],i=S(w)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var D=m(s)}catch(Ci){throw Ci===C2?$_:Ci}else D=s;s=_();var ve=s.queue,ft=ve.dispatch;return f!==s.memoizedState&&(dv.flags|=2048,it(9,{destroy:void 0},tt.bind(null,ve,f),null)),[D,ft,i]}function tt(i,s){i.action=s}function ht(i){var s=_(),f=Jv;if(f!==null)return xt(s,f,i);_(),s=s.memoizedState,f=_();var D=f.queue.dispatch;return f.memoizedState=i,[s,D,!1]}function it(i,s,f,D){return i={tag:i,create:f,deps:D,inst:s,next:null},s=dv.updateQueue,s===null&&(s=d(),dv.updateQueue=s),f=s.lastEffect,f===null?s.lastEffect=i.next=i:(D=f.next,f.next=i,i.next=D,s.lastEffect=i),i}function ut(){return _().memoizedState}function vt(i,s,f,D){var ve=ke();dv.flags|=i,ve.memoizedState=it(1|s,{destroy:void 0},f,D===void 0?null:D)}function _t(i,s,f,D){var ve=_();D=D===void 0?null:D;var ft=ve.memoizedState.inst;Jv!==null&&D!==null&&e3(D,Jv.memoizedState.deps)?ve.memoizedState=it(s,ft,f,D):(dv.flags|=i,ve.memoizedState=it(1|s,ft,f,D))}function Le(i,s){vt(8390656,8,i,s)}function wt(i,s){_t(2048,8,i,s)}function St(i){dv.flags|=4;var s=dv.updateQueue;if(s===null)s=d(),dv.updateQueue=s,s.events=[i];else{var f=s.events;f===null?s.events=[i]:f.push(i)}}function Ut(i){var s=_().memoizedState;return St({ref:s,nextImpl:i}),function(){if((hv&2)!==0)throw Error(n(440));return s.impl.apply(void 0,arguments)}}function kt(i,s){return _t(4,2,i,s)}function jt(i,s){return _t(4,4,i,s)}function aa(i,s){if(typeof s=="function"){i=i();var f=s(i);return function(){typeof f=="function"?f():s(null)}}if(s!=null)return i=i(),s.current=i,function(){s.current=null}}function ca(i,s,f){f=f!=null?f.concat([i]):null,_t(4,4,aa.bind(null,s,i),f)}function Cp(){}function pt(i,s){var f=_();s=s===void 0?null:s;var D=f.memoizedState;return s!==null&&e3(s,D[1])?D[0]:(f.memoizedState=[i,s],i)}function gt(i,s){var f=_();s=s===void 0?null:s;var D=f.memoizedState;if(s!==null&&e3(s,D[1]))return D[0];if(D=i(),v2){r1(!0);try{i()}finally{r1(!1)}}return f.memoizedState=[D,s],D}function te(i,s,f){return f===void 0||(kx&1073741824)!==0&&(zg&261930)===0?i.memoizedState=s:(i.memoizedState=f,i=fw(),dv.lanes|=i,Vy|=i,f)}function Et(i,s,f,D){return Jy(f,s)?f:N2.current!==null?(i=te(i,f,D),Jy(i,s)||(Wt=!0),i):(kx&42)===0||(kx&1073741824)!==0&&(zg&261930)===0?(Wt=!0,i.memoizedState=f):(i=fw(),dv.lanes|=i,Vy|=i,s)}function zt(i,s,f,D,ve){var ft=$o.p;$o.p=ft!==0&&8>ft?ft:8;var Ci=re.T,Zp={};re.T=Zp,R0(i,!1,s,f);try{var K0=ve(),Pm=re.S;if(Pm!==null&&Pm(Zp,K0),K0!==null&&typeof K0=="object"&&typeof K0.then=="function"){var Xm=Wb(K0,D);n0(i,s,Xm,ex(i))}else n0(i,s,D,ex(i))}catch(wm){n0(i,s,{then:function(){},status:"rejected",reason:wm},ex())}finally{$o.p=ft,Ci!==null&&Zp.types!==null&&(Ci.types=Zp.types),re.T=Ci}}function rt(){}function Z(i,s,f,D){if(i.tag!==5)throw Error(n(476));var ve=we(i).queue;zt(i,ve,s,qo,f===null?rt:function(){return ot(i),f(D)})}function we(i){var s=i.memoizedState;if(s!==null)return s;s={memoizedState:qo,baseState:qo,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:w,lastRenderedState:qo},next:null};var f={};return s.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:w,lastRenderedState:f},next:null},i.memoizedState=s,i=i.alternate,i!==null&&(i.memoizedState=s),s}function ot(i){var s=we(i);s.next===null&&(s=i.alternate.memoizedState),n0(i,s.next.queue,{},ex())}function mt(){return By(W2)}function It(){return _().memoizedState}function Yt(){return _().memoizedState}function Sr(i){for(var s=i.return;s!==null;){switch(s.tag){case 24:case 3:var f=ex();i=$x(f);var D=mx(s,i,f);D!==null&&(Zy(D,s,f),g2(D,s,f)),s={cache:$b()},i.payload=s;return}s=s.return}}function Op(i,s,f){var D=ex();f={lane:D,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},w0(i)?_0(s,f):(f=Ob(i,s,f,D),f!==null&&(Zy(f,i,D),ha(f,s,D)))}function Hp(i,s,f){var D=ex();n0(i,s,f,D)}function n0(i,s,f,D){var ve={lane:D,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null};if(w0(i))_0(s,ve);else{var ft=i.alternate;if(i.lanes===0&&(ft===null||ft.lanes===0)&&(ft=s.lastRenderedReducer,ft!==null))try{var Ci=s.lastRenderedState,Zp=ft(Ci,f);if(ve.hasEagerState=!0,ve.eagerState=Zp,Jy(Zp,Ci))return J2(i,s,ve,0),Dg===null&&I_(),!1}catch{}finally{}if(f=Ob(i,s,ve,D),f!==null)return Zy(f,i,D),ha(f,s,D),!0}return!1}function R0(i,s,f,D){if(D={lane:2,revertLane:m3(),gesture:null,action:D,hasEagerState:!1,eagerState:null,next:null},w0(i)){if(s)throw Error(n(479))}else s=Ob(i,f,D,2),s!==null&&Zy(s,i,2)}function w0(i){var s=i.alternate;return i===dv||s!==null&&s===dv}function _0(i,s){L2=Z_=!0;var f=i.pending;f===null?s.next=s:(s.next=f.next,f.next=s),i.pending=s}function ha(i,s,f){if((f&4194048)!==0){var D=s.lanes;D&=i.pendingLanes,f|=D,s.lanes=f,Vv(i,f)}}var Rp={readContext:By,use:E,useCallback:Ey,useContext:Ey,useEffect:Ey,useImperativeHandle:Ey,useLayoutEffect:Ey,useInsertionEffect:Ey,useMemo:Ey,useReducer:Ey,useRef:Ey,useState:Ey,useDebugValue:Ey,useDeferredValue:Ey,useTransition:Ey,useSyncExternalStore:Ey,useId:Ey,useHostTransitionStatus:Ey,useFormState:Ey,useActionState:Ey,useOptimistic:Ey,useMemoCache:Ey,useCacheRefresh:Ey};Rp.useEffectEvent=Ey;var Gt={readContext:By,use:E,useCallback:function(i,s){return ke().memoizedState=[i,s===void 0?null:s],i},useContext:By,useEffect:Le,useImperativeHandle:function(i,s,f){f=f!=null?f.concat([i]):null,vt(4194308,4,aa.bind(null,s,i),f)},useLayoutEffect:function(i,s){return vt(4194308,4,i,s)},useInsertionEffect:function(i,s){vt(4,2,i,s)},useMemo:function(i,s){var f=ke();s=s===void 0?null:s;var D=i();if(v2){r1(!0);try{i()}finally{r1(!1)}}return f.memoizedState=[D,s],D},useReducer:function(i,s,f){var D=ke();if(f!==void 0){var ve=f(s);if(v2){r1(!0);try{f(s)}finally{r1(!1)}}}else ve=s;return D.memoizedState=D.baseState=ve,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:ve},D.queue=i,i=i.dispatch=Op.bind(null,dv,i),[D.memoizedState,i]},useRef:function(i){var s=ke();return i={current:i},s.memoizedState=i},useState:function(i){i=I(i);var s=i.queue,f=Hp.bind(null,dv,s);return s.dispatch=f,[i.memoizedState,f]},useDebugValue:Cp,useDeferredValue:function(i,s){var f=ke();return te(f,i,s)},useTransition:function(){var i=I(!1);return i=zt.bind(null,dv,i.queue,!0,!1),ke().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,s,f){var D=dv,ve=ke();if(Nv){if(f===void 0)throw Error(n(407));f=f()}else{if(f=s(),Dg===null)throw Error(n(349));(zg&127)!==0||A(D,s,f)}ve.memoizedState=f;var ft={value:f,getSnapshot:s};return ve.queue=ft,Le($.bind(null,D,ft,i),[i]),D.flags|=2048,it(9,{destroy:void 0},O.bind(null,D,ft,f,s),null),f},useId:function(){var i=ke(),s=Dg.identifierPrefix;if(Nv){var f=yx,D=vx;f=(D&~(1<<32-Om(D)-1)).toString(32)+f,s="_"+s+"R_"+f,f=J_++,0<f&&(s+="H"+f.toString(32)),s+="_"}else f=h5++,s="_"+s+"r_"+f.toString(32)+"_";return i.memoizedState=s},useHostTransitionStatus:mt,useFormState:Re,useActionState:Re,useOptimistic:function(i){var s=ke();s.memoizedState=s.baseState=i;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=f,s=R0.bind(null,dv,!0,f),f.dispatch=s,[i,s]},useMemoCache:b,useCacheRefresh:function(){return ke().memoizedState=Sr.bind(null,dv)},useEffectEvent:function(i){var s=ke(),f={impl:i};return s.memoizedState=f,function(){if((hv&2)!==0)throw Error(n(440));return f.impl.apply(void 0,arguments)}}},Gp={readContext:By,use:E,useCallback:pt,useContext:By,useEffect:wt,useImperativeHandle:ca,useInsertionEffect:kt,useLayoutEffect:jt,useMemo:gt,useReducer:S,useRef:ut,useState:function(){return S(w)},useDebugValue:Cp,useDeferredValue:function(i,s){var f=_();return Et(f,Jv.memoizedState,i,s)},useTransition:function(){var i=S(w)[0],s=_().memoizedState;return[typeof i=="boolean"?i:m(i),s]},useSyncExternalStore:F,useId:It,useHostTransitionStatus:mt,useFormState:Q,useActionState:Q,useOptimistic:function(i,s){var f=_();return G(f,Jv,i,s)},useMemoCache:b,useCacheRefresh:Yt};Gp.useEffectEvent=Ut;var c0={readContext:By,use:E,useCallback:pt,useContext:By,useEffect:wt,useImperativeHandle:ca,useInsertionEffect:kt,useLayoutEffect:jt,useMemo:gt,useReducer:p,useRef:ut,useState:function(){return p(w)},useDebugValue:Cp,useDeferredValue:function(i,s){var f=_();return Jv===null?te(f,i,s):Et(f,Jv.memoizedState,i,s)},useTransition:function(){var i=p(w)[0],s=_().memoizedState;return[typeof i=="boolean"?i:m(i),s]},useSyncExternalStore:F,useId:It,useHostTransitionStatus:mt,useFormState:ht,useActionState:ht,useOptimistic:function(i,s){var f=_();return Jv!==null?G(f,Jv,i,s):(f.baseState=i,[i,f.queue.dispatch])},useMemoCache:b,useCacheRefresh:Yt};c0.useEffectEvent=Ut;function M0(i,s,f,D){s=i.memoizedState,f=f(D,s),f=f==null?s:g({},s,f),i.memoizedState=f,i.lanes===0&&(i.updateQueue.baseState=f)}var I0={enqueueSetState:function(i,s,f){i=i._reactInternals;var D=ex(),ve=$x(D);ve.payload=s,f!=null&&(ve.callback=f),s=mx(i,ve,D),s!==null&&(Zy(s,i,D),g2(s,i,D))},enqueueReplaceState:function(i,s,f){i=i._reactInternals;var D=ex(),ve=$x(D);ve.tag=1,ve.payload=s,f!=null&&(ve.callback=f),s=mx(i,ve,D),s!==null&&(Zy(s,i,D),g2(s,i,D))},enqueueForceUpdate:function(i,s){i=i._reactInternals;var f=ex(),D=$x(f);D.tag=2,s!=null&&(D.callback=s),s=mx(i,D,f),s!==null&&(Zy(s,i,f),g2(s,i,f))}};function k0(i,s,f,D,ve,ft,Ci){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(D,ft,Ci):s.prototype&&s.prototype.isPureReactComponent?!_2(f,D)||!_2(ve,ft):!0}function V0(i,s,f,D){i=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(f,D),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(f,D),s.state!==i&&I0.enqueueReplaceState(s,s.state,null)}function $0(i,s){var f=s;if("ref"in s){f={};for(var D in s)D!=="ref"&&(f[D]=s[D])}if(i=i.defaultProps){f===s&&(f=g({},f));for(var ve in i)f[ve]===void 0&&(f[ve]=i[ve])}return f}function W0(i){F_(i)}function gm(i){console.error(i)}function F0(i){F_(i)}function bm(i,s){try{var f=i.onUncaughtError;f(s.value,{componentStack:s.stack})}catch(D){setTimeout(function(){throw D})}}function Dm(i,s,f){try{var D=i.onCaughtError;D(f.value,{componentStack:f.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(ve){setTimeout(function(){throw ve})}}function vm(i,s,f){return f=$x(f),f.tag=3,f.payload={element:null},f.callback=function(){bm(i,s)},f}function km(i){return i=$x(i),i.tag=3,i}function Yo(i,s,f,D){var ve=f.type.getDerivedStateFromError;if(typeof ve=="function"){var ft=D.value;i.payload=function(){return ve(ft)},i.callback=function(){Dm(s,f,D)}}var Ci=f.stateNode;Ci!==null&&typeof Ci.componentDidCatch=="function"&&(i.callback=function(){Dm(s,f,D),typeof ve!="function"&&(Ex===null?Ex=new Set([this]):Ex.add(this));var Zp=D.stack;this.componentDidCatch(D.value,{componentStack:Zp!==null?Zp:""})})}function qp(i,s,f,D,ve){if(f.flags|=32768,D!==null&&typeof D=="object"&&typeof D.then=="function"){if(s=f.alternate,s!==null&&h2(s,f,ve,!0),f=Xy.current,f!==null){switch(f.tag){case 31:case 13:return cx===null?m_():f.alternate===null&&sy===0&&(sy=3),f.flags&=-257,f.flags|=65536,f.lanes=ve,D===W_?f.flags|=16384:(s=f.updateQueue,s===null?f.updateQueue=new Set([D]):s.add(D),rb(i,D,ve)),!1;case 22:return f.flags|=65536,D===W_?f.flags|=16384:(s=f.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([D])},f.updateQueue=s):(f=s.retryQueue,f===null?s.retryQueue=new Set([D]):f.add(D)),rb(i,D,ve)),!1}throw Error(n(435,f.tag))}return rb(i,D,ve),m_(),!1}if(Nv)return s=Xy.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=ve,D!==Ub&&(i=Error(n(422),{cause:D}),e_(sx(i,f)))):(D!==Ub&&(s=Error(n(423),{cause:D}),e_(sx(s,f))),i=i.current.alternate,i.flags|=65536,ve&=-ve,i.lanes|=ve,D=sx(D,f),ve=vm(i.stateNode,D,ve),s_(i,ve),sy!==4&&(sy=2)),!1;var ft=Error(n(520),{cause:D});if(ft=sx(ft,f),hx===null?hx=[ft]:hx.push(ft),sy!==4&&(sy=2),s===null)return!0;D=sx(D,f),f=s;do{switch(f.tag){case 3:return f.flags|=65536,i=ve&-ve,f.lanes|=i,i=vm(f.stateNode,D,i),s_(f,i),!1;case 1:if(s=f.type,ft=f.stateNode,(f.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||ft!==null&&typeof ft.componentDidCatch=="function"&&(Ex===null||!Ex.has(ft))))return f.flags|=65536,ve&=-ve,f.lanes|=ve,ve=km(ve),Yo(ve,i,f,D),s_(f,ve),!1}f=f.return}while(f!==null);return!1}var Mt=Error(n(461)),Wt=!1;function xn(i,s,f,D){s.child=i===null?ow(s,null,f,D):Gx(s,i.child,f,D)}function Fp(i,s,f,D,ve){f=f.render;var ft=s.ref;if("ref"in D){var Ci={};for(var Zp in D)Zp!=="ref"&&(Ci[Zp]=D[Zp])}else Ci=D;return d2(s),D=t3(i,s,f,Ci,ft,ve),Zp=r3(),i!==null&&!Wt?(n3(i,s,ve),og(i,s,ve)):(Nv&&Zp&&Q2(s),s.flags|=1,xn(i,s,D,ve),s.child)}function Bp(i,s,f,D,ve){if(i===null){var ft=f.type;return typeof ft=="function"&&!Pb(ft)&&ft.defaultProps===void 0&&f.compare===null?(s.tag=15,s.type=ft,e0(i,s,ft,D,ve)):(i=B_(f.type,null,D,s,s.mode,ve),i.ref=s.ref,i.return=s,s.child=i)}if(ft=i.child,!P1(i,ve)){var Ci=ft.memoizedProps;if(f=f.compare,f=f!==null?f:_2,f(Ci,D)&&i.ref===s.ref)return og(i,s,ve)}return s.flags|=1,i=Ax(ft,D),i.ref=s.ref,i.return=s,s.child=i}function e0(i,s,f,D,ve){if(i!==null){var ft=i.memoizedProps;if(_2(ft,D)&&i.ref===s.ref)if(Wt=!1,s.pendingProps=D=ft,P1(i,ve))(i.flags&131072)!==0&&(Wt=!0);else return s.lanes=i.lanes,og(i,s,ve)}return Nm(i,s,f,D,ve)}function o0(i,s,f,D){var ve=D.children,ft=i!==null?i.memoizedState:null;if(i===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),D.mode==="hidden"){if((s.flags&128)!==0){if(ft=ft!==null?ft.baseLanes|f:f,i!==null){for(D=s.child=i.child,ve=0;D!==null;)ve=ve|D.lanes|D.childLanes,D=D.sibling;D=ve&~ft}else D=0,s.child=null;return T0(i,s,ft,f,D)}if((f&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},i!==null&&n_(s,ft!==null?ft.cachePool:null),ft!==null?uw(s,ft):Y_(),cw(s);else return D=s.lanes=536870912,T0(i,s,ft!==null?ft.baseLanes|f:f,f,D)}else ft!==null?(n_(s,ft.cachePool),uw(s,ft),qx(),s.memoizedState=null):(i!==null&&n_(s,null),Y_(),qx());return xn(i,s,ve,f),s.child}function C0(i,s){return i!==null&&i.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function T0(i,s,f,D,ve){var ft=qb();return ft=ft===null?null:{parent:Ay._currentValue,pool:ft},s.memoizedState={baseLanes:f,cachePool:ft},i!==null&&n_(s,null),Y_(),cw(s),i!==null&&h2(i,s,D,!0),s.childLanes=ve,null}function A0(i,s){return s=E1({mode:s.mode,children:s.children},i.mode),s.ref=i.ref,i.child=s,s.return=i,s}function J0(i,s,f){return Gx(s,i.child,null,f),i=A0(s,s.pendingProps),i.flags|=2,Qy(s),s.memoizedState=null,i}function em(i,s,f){var D=s.pendingProps,ve=(s.flags&128)!==0;if(s.flags&=-129,i===null){if(Nv){if(D.mode==="hidden")return i=A0(s,D),s.lanes=536870912,C0(null,i);if(Qb(s),(i=uy)?(i=S3(i,ux),i=i!==null&&i.data==="&"?i:null,i!==null&&(s.memoizedState={dehydrated:i,treeContext:Cx!==null?{id:vx,overflow:yx}:null,retryLane:536870912,hydrationErrors:null},f=Z3(i),f.return=s,s.child=f,Uy=s,uy=null)):i=null,i===null)throw Bx(s);return s.lanes=536870912,null}return A0(s,D)}var ft=i.memoizedState;if(ft!==null){var Ci=ft.dehydrated;if(Qb(s),ve)if(s.flags&256)s.flags&=-257,s=J0(i,s,f);else if(s.memoizedState!==null)s.child=i.child,s.flags|=128,s=null;else throw Error(n(558));else if(Wt||h2(i,s,f,!1),ve=(f&i.childLanes)!==0,Wt||ve){if(D=Dg,D!==null&&(Ci=yv(D,f),Ci!==0&&Ci!==ft.retryLane))throw ft.retryLane=Ci,s2(i,Ci),Zy(D,i,Ci),Mt;m_(),s=J0(i,s,f)}else i=ft.treeContext,uy=dx(Ci.nextSibling),Uy=s,Nv=!0,Rx=null,ux=!1,i!==null&&K3(s,i),s=A0(s,D),s.flags|=4096;return s}return i=Ax(i.child,{mode:D.mode,children:D.children}),i.ref=s.ref,s.child=i,i.return=s,i}function tm(i,s){var f=s.ref;if(f===null)i!==null&&i.ref!==null&&(s.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(n(284));(i===null||i.ref!==f)&&(s.flags|=4194816)}}function Nm(i,s,f,D,ve){return d2(s),f=t3(i,s,f,D,void 0,ve),D=r3(),i!==null&&!Wt?(n3(i,s,ve),og(i,s,ve)):(Nv&&D&&Q2(s),s.flags|=1,xn(i,s,f,ve),s.child)}function o1(i,s,f,D,ve,ft){return d2(s),s.updateQueue=null,f=dw(s,D,f,ve),hw(i),D=r3(),i!==null&&!Wt?(n3(i,s,ft),og(i,s,ft)):(Nv&&D&&Q2(s),s.flags|=1,xn(i,s,f,ft),s.child)}function N1(i,s,f,D,ve){if(d2(s),s.stateNode===null){var ft=l2,Ci=f.contextType;typeof Ci=="object"&&Ci!==null&&(ft=By(Ci)),ft=new f(D,ft),s.memoizedState=ft.state!==null&&ft.state!==void 0?ft.state:null,ft.updater=I0,s.stateNode=ft,ft._reactInternals=s,ft=s.stateNode,ft.props=D,ft.state=s.memoizedState,ft.refs={},Zb(s),Ci=f.contextType,ft.context=typeof Ci=="object"&&Ci!==null?By(Ci):l2,ft.state=s.memoizedState,Ci=f.getDerivedStateFromProps,typeof Ci=="function"&&(M0(s,f,Ci,D),ft.state=s.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof ft.getSnapshotBeforeUpdate=="function"||typeof ft.UNSAFE_componentWillMount!="function"&&typeof ft.componentWillMount!="function"||(Ci=ft.state,typeof ft.componentWillMount=="function"&&ft.componentWillMount(),typeof ft.UNSAFE_componentWillMount=="function"&&ft.UNSAFE_componentWillMount(),Ci!==ft.state&&I0.enqueueReplaceState(ft,ft.state,null),u_(s,D,ft,ve),l_(),ft.state=s.memoizedState),typeof ft.componentDidMount=="function"&&(s.flags|=4194308),D=!0}else if(i===null){ft=s.stateNode;var Zp=s.memoizedProps,K0=$0(f,Zp);ft.props=K0;var Pm=ft.context,Xm=f.contextType;Ci=l2,typeof Xm=="object"&&Xm!==null&&(Ci=By(Xm));var wm=f.getDerivedStateFromProps;Xm=typeof wm=="function"||typeof ft.getSnapshotBeforeUpdate=="function",Zp=s.pendingProps!==Zp,Xm||typeof ft.UNSAFE_componentWillReceiveProps!="function"&&typeof ft.componentWillReceiveProps!="function"||(Zp||Pm!==Ci)&&V0(s,ft,D,Ci),px=!1;var Am=s.memoizedState;ft.state=Am,u_(s,D,ft,ve),l_(),Pm=s.memoizedState,Zp||Am!==Pm||px?(typeof wm=="function"&&(M0(s,f,wm,D),Pm=s.memoizedState),(K0=px||k0(s,f,K0,D,Am,Pm,Ci))?(Xm||typeof ft.UNSAFE_componentWillMount!="function"&&typeof ft.componentWillMount!="function"||(typeof ft.componentWillMount=="function"&&ft.componentWillMount(),typeof ft.UNSAFE_componentWillMount=="function"&&ft.UNSAFE_componentWillMount()),typeof ft.componentDidMount=="function"&&(s.flags|=4194308)):(typeof ft.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=D,s.memoizedState=Pm),ft.props=D,ft.state=Pm,ft.context=Ci,D=K0):(typeof ft.componentDidMount=="function"&&(s.flags|=4194308),D=!1)}else{ft=s.stateNode,X_(i,s),Ci=s.memoizedProps,Xm=$0(f,Ci),ft.props=Xm,wm=s.pendingProps,Am=ft.context,Pm=f.contextType,K0=l2,typeof Pm=="object"&&Pm!==null&&(K0=By(Pm)),Zp=f.getDerivedStateFromProps,(Pm=typeof Zp=="function"||typeof ft.getSnapshotBeforeUpdate=="function")||typeof ft.UNSAFE_componentWillReceiveProps!="function"&&typeof ft.componentWillReceiveProps!="function"||(Ci!==wm||Am!==K0)&&V0(s,ft,D,K0),px=!1,Am=s.memoizedState,ft.state=Am,u_(s,D,ft,ve),l_();var Lm=s.memoizedState;Ci!==wm||Am!==Lm||px||i!==null&&i.dependencies!==null&&H_(i.dependencies)?(typeof Zp=="function"&&(M0(s,f,Zp,D),Lm=s.memoizedState),(Xm=px||k0(s,f,Xm,D,Am,Lm,K0)||i!==null&&i.dependencies!==null&&H_(i.dependencies))?(Pm||typeof ft.UNSAFE_componentWillUpdate!="function"&&typeof ft.componentWillUpdate!="function"||(typeof ft.componentWillUpdate=="function"&&ft.componentWillUpdate(D,Lm,K0),typeof ft.UNSAFE_componentWillUpdate=="function"&&ft.UNSAFE_componentWillUpdate(D,Lm,K0)),typeof ft.componentDidUpdate=="function"&&(s.flags|=4),typeof ft.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof ft.componentDidUpdate!="function"||Ci===i.memoizedProps&&Am===i.memoizedState||(s.flags|=4),typeof ft.getSnapshotBeforeUpdate!="function"||Ci===i.memoizedProps&&Am===i.memoizedState||(s.flags|=1024),s.memoizedProps=D,s.memoizedState=Lm),ft.props=D,ft.state=Lm,ft.context=K0,D=Xm):(typeof ft.componentDidUpdate!="function"||Ci===i.memoizedProps&&Am===i.memoizedState||(s.flags|=4),typeof ft.getSnapshotBeforeUpdate!="function"||Ci===i.memoizedProps&&Am===i.memoizedState||(s.flags|=1024),D=!1)}return ft=D,tm(i,s),D=(s.flags&128)!==0,ft||D?(ft=s.stateNode,f=D&&typeof f.getDerivedStateFromError!="function"?null:ft.render(),s.flags|=1,i!==null&&D?(s.child=Gx(s,i.child,null,ve),s.child=Gx(s,null,f,ve)):xn(i,s,f,ve),s.memoizedState=ft.state,i=s.child):i=og(i,s,ve),i}function F1(i,s,f,D){return c2(),s.flags|=256,xn(i,s,f,D),s.child}var B1={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function u1(i){return{baseLanes:i,cachePool:rw()}}function zm(i,s,f){return i=i!==null?i.childLanes&~f:0,s&&(i|=Hy),i}function R1(i,s,f){var D=s.pendingProps,ve=!1,ft=(s.flags&128)!==0,Ci;if((Ci=ft)||(Ci=i!==null&&i.memoizedState===null?!1:(Mv.current&2)!==0),Ci&&(ve=!0,s.flags&=-129),Ci=(s.flags&32)!==0,s.flags&=-33,i===null){if(Nv){if(ve?Wx(s):qx(),(i=uy)?(i=S3(i,ux),i=i!==null&&i.data!=="&"?i:null,i!==null&&(s.memoizedState={dehydrated:i,treeContext:Cx!==null?{id:vx,overflow:yx}:null,retryLane:536870912,hydrationErrors:null},f=Z3(i),f.return=s,s.child=f,Uy=s,uy=null)):i=null,i===null)throw Bx(s);return H2(i)?s.lanes=32:s.lanes=536870912,null}var Zp=D.children;return D=D.fallback,ve?(qx(),ve=s.mode,Zp=E1({mode:"hidden",children:Zp},ve),D=u2(D,ve,f,null),Zp.return=s,D.return=s,Zp.sibling=D,s.child=Zp,D=s.child,D.memoizedState=u1(f),D.childLanes=zm(i,Ci,f),s.memoizedState=B1,C0(null,D)):(Wx(s),z1(s,Zp))}var K0=i.memoizedState;if(K0!==null&&(Zp=K0.dehydrated,Zp!==null)){if(ft)s.flags&256?(Wx(s),s.flags&=-257,s=g1(i,s,f)):s.memoizedState!==null?(qx(),s.child=i.child,s.flags|=128,s=null):(qx(),Zp=D.fallback,ve=s.mode,D=E1({mode:"visible",children:D.children},ve),Zp=u2(Zp,ve,f,null),Zp.flags|=2,D.return=s,Zp.return=s,D.sibling=Zp,s.child=D,Gx(s,i.child,null,f),D=s.child,D.memoizedState=u1(f),D.childLanes=zm(i,Ci,f),s.memoizedState=B1,s=C0(null,D));else if(Wx(s),H2(Zp)){if(Ci=Zp.nextSibling&&Zp.nextSibling.dataset,Ci)var Pm=Ci.dgst;Ci=Pm,D=Error(n(419)),D.stack="",D.digest=Ci,e_({value:D,source:null,stack:null}),s=g1(i,s,f)}else if(Wt||h2(i,s,f,!1),Ci=(f&i.childLanes)!==0,Wt||Ci){if(Ci=Dg,Ci!==null&&(D=yv(Ci,f),D!==0&&D!==K0.retryLane))throw K0.retryLane=D,s2(i,D),Zy(Ci,i,D),Mt;T3(Zp)||m_(),s=g1(i,s,f)}else T3(Zp)?(s.flags|=192,s.child=i.child,s=null):(i=K0.treeContext,uy=dx(Zp.nextSibling),Uy=s,Nv=!0,Rx=null,ux=!1,i!==null&&K3(s,i),s=z1(s,D.children),s.flags|=4096);return s}return ve?(qx(),Zp=D.fallback,ve=s.mode,K0=i.child,Pm=K0.sibling,D=Ax(K0,{mode:"hidden",children:D.children}),D.subtreeFlags=K0.subtreeFlags&65011712,Pm!==null?Zp=Ax(Pm,Zp):(Zp=u2(Zp,ve,f,null),Zp.flags|=2),Zp.return=s,D.return=s,D.sibling=Zp,s.child=D,C0(null,D),D=s.child,Zp=i.child.memoizedState,Zp===null?Zp=u1(f):(ve=Zp.cachePool,ve!==null?(K0=Ay._currentValue,ve=ve.parent!==K0?{parent:K0,pool:K0}:ve):ve=rw(),Zp={baseLanes:Zp.baseLanes|f,cachePool:ve}),D.memoizedState=Zp,D.childLanes=zm(i,Ci,f),s.memoizedState=B1,C0(i.child,D)):(Wx(s),f=i.child,i=f.sibling,f=Ax(f,{mode:"visible",children:D.children}),f.return=s,f.sibling=null,i!==null&&(Ci=s.deletions,Ci===null?(s.deletions=[i],s.flags|=16):Ci.push(i)),s.child=f,s.memoizedState=null,f)}function z1(i,s){return s=E1({mode:"visible",children:s},i.mode),s.return=i,i.child=s}function E1(i,s){return i=Wy(22,i,null,s),i.lanes=0,i}function g1(i,s,f){return Gx(s,i.child,null,f),i=z1(s,s.pendingProps.children),i.flags|=2,s.memoizedState=null,i}function w1(i,s,f){i.lanes|=s;var D=i.alternate;D!==null&&(D.lanes|=s),Vb(i.return,s,f)}function s1(i,s,f,D,ve,ft){var Ci=i.memoizedState;Ci===null?i.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:D,tail:f,tailMode:ve,treeForkCount:ft}:(Ci.isBackwards=s,Ci.rendering=null,Ci.renderingStartTime=0,Ci.last=D,Ci.tail=f,Ci.tailMode=ve,Ci.treeForkCount=ft)}function Q1(i,s,f){var D=s.pendingProps,ve=D.revealOrder,ft=D.tail;D=D.children;var Ci=Mv.current,Zp=(Ci&2)!==0;if(Zp?(Ci=Ci&1|2,s.flags|=128):Ci&=1,y0(Mv,Ci),xn(i,s,D,f),D=Nv?K2:0,!Zp&&i!==null&&(i.flags&128)!==0)e:for(i=s.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&w1(i,f,s);else if(i.tag===19)w1(i,f,s);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break e;for(;i.sibling===null;){if(i.return===null||i.return===s)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(ve){case"forwards":for(f=s.child,ve=null;f!==null;)i=f.alternate,i!==null&&Oy(i)===null&&(ve=f),f=f.sibling;f=ve,f===null?(ve=s.child,s.child=null):(ve=f.sibling,f.sibling=null),s1(s,!1,ve,f,ft,D);break;case"backwards":case"unstable_legacy-backwards":for(f=null,ve=s.child,s.child=null;ve!==null;){if(i=ve.alternate,i!==null&&Oy(i)===null){s.child=ve;break}i=ve.sibling,ve.sibling=f,f=ve,ve=i}s1(s,!0,f,null,ft,D);break;case"together":s1(s,!1,null,null,void 0,D);break;default:s.memoizedState=null}return s.child}function og(i,s,f){if(i!==null&&(s.dependencies=i.dependencies),Vy|=s.lanes,(f&s.childLanes)===0)if(i!==null){if(h2(i,s,f,!1),(f&s.childLanes)===0)return null}else return null;if(i!==null&&s.child!==i.child)throw Error(n(153));if(s.child!==null){for(i=s.child,f=Ax(i,i.pendingProps),s.child=f,f.return=s;i.sibling!==null;)i=i.sibling,f=f.sibling=Ax(i,i.pendingProps),f.return=s;f.sibling=null}return s.child}function P1(i,s){return(i.lanes&s)!==0?!0:(i=i.dependencies,!!(i!==null&&H_(i)))}function fg(i,s,f){switch(s.tag){case 3:p0(s,s.stateNode.containerInfo),Vx(s,Ay,i.memoizedState.cache),c2();break;case 27:case 5:am(s);break;case 4:p0(s,s.stateNode.containerInfo);break;case 10:Vx(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Qb(s),null;break;case 13:var D=s.memoizedState;if(D!==null)return D.dehydrated!==null?(Wx(s),s.flags|=128,null):(f&s.child.childLanes)!==0?R1(i,s,f):(Wx(s),i=og(i,s,f),i!==null?i.sibling:null);Wx(s);break;case 19:var ve=(i.flags&128)!==0;if(D=(f&s.childLanes)!==0,D||(h2(i,s,f,!1),D=(f&s.childLanes)!==0),ve){if(D)return Q1(i,s,f);s.flags|=128}if(ve=s.memoizedState,ve!==null&&(ve.rendering=null,ve.tail=null,ve.lastEffect=null),y0(Mv,Mv.current),D)break;return null;case 22:return s.lanes=0,o0(i,s,f,s.pendingProps);case 24:Vx(s,Ay,i.memoizedState.cache)}return og(i,s,f)}function bg(i,s,f){if(i!==null)if(i.memoizedProps!==s.pendingProps)Wt=!0;else{if(!P1(i,f)&&(s.flags&128)===0)return Wt=!1,fg(i,s,f);Wt=(i.flags&131072)!==0}else Wt=!1,Nv&&(s.flags&1048576)!==0&&J3(s,K2,s.index);switch(s.lanes=0,s.tag){case 16:e:{var D=s.pendingProps;if(i=p2(s.elementType),s.type=i,typeof i=="function")Pb(i)?(D=$0(i,D),s.tag=1,s=N1(null,s,i,D,f)):(s.tag=0,s=Nm(null,s,i,D,f));else{if(i!=null){var ve=i.$$typeof;if(ve===Y){s.tag=11,s=Fp(null,s,i,D,f);break e}else if(ve===ct){s.tag=14,s=Bp(null,s,i,D,f);break e}}throw s=Mn(i)||i,Error(n(306,s,""))}}return s;case 0:return Nm(i,s,s.type,s.pendingProps,f);case 1:return D=s.type,ve=$0(D,s.pendingProps),N1(i,s,D,ve,f);case 3:e:{if(p0(s,s.stateNode.containerInfo),i===null)throw Error(n(387));D=s.pendingProps;var ft=s.memoizedState;ve=ft.element,X_(i,s),u_(s,D,null,f);var Ci=s.memoizedState;if(D=Ci.cache,Vx(s,Ay,D),D!==ft.cache&&S2(s,[Ay],f,!0),l_(),D=Ci.element,ft.isDehydrated)if(ft={element:D,isDehydrated:!1,cache:Ci.cache},s.updateQueue.baseState=ft,s.memoizedState=ft,s.flags&256){s=F1(i,s,D,f);break e}else if(D!==ve){ve=sx(Error(n(424)),s),e_(ve),s=F1(i,s,D,f);break e}else{switch(i=s.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(uy=dx(i.firstChild),Uy=s,Nv=!0,Rx=null,ux=!0,f=ow(s,null,D,f),s.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling}else{if(c2(),D===ve){s=og(i,s,f);break e}xn(i,s,D,f)}s=s.child}return s;case 26:return tm(i,s),i===null?(f=Yw(s.type,null,s.pendingProps,null))?s.memoizedState=f:Nv||(f=s.type,i=s.pendingProps,D=w_(f0.current).createElement(f),D[Cv]=s,D[wg]=i,Ry(D,f,i),cm(D),s.stateNode=D):s.memoizedState=Yw(s.type,i.memoizedProps,s.pendingProps,i.memoizedState),null;case 27:return am(s),i===null&&Nv&&(D=s.stateNode=M_(s.type,s.pendingProps,f0.current),Uy=s,ux=!0,ve=uy,Yx(s.type)?(fb=ve,uy=dx(D.firstChild)):uy=ve),xn(i,s,s.pendingProps.children,f),tm(i,s),i===null&&(s.flags|=4194304),s.child;case 5:return i===null&&Nv&&((ve=D=uy)&&(D=Gw(D,s.type,s.pendingProps,ux),D!==null?(s.stateNode=D,Uy=s,uy=dx(D.firstChild),ux=!1,ve=!0):ve=!1),ve||Bx(s)),am(s),ve=s.type,ft=s.pendingProps,Ci=i!==null?i.memoizedProps:null,D=ft.children,E_(ve,ft)?D=null:Ci!==null&&E_(ve,Ci)&&(s.flags|=32),s.memoizedState!==null&&(ve=t3(i,s,d5,null,null,f),W2._currentValue=ve),tm(i,s),xn(i,s,D,f),s.child;case 6:return i===null&&Nv&&((i=f=uy)&&(f=$w(f,s.pendingProps,ux),f!==null?(s.stateNode=f,Uy=s,uy=null,i=!0):i=!1),i||Bx(s)),null;case 13:return R1(i,s,f);case 4:return p0(s,s.stateNode.containerInfo),D=s.pendingProps,i===null?s.child=Gx(s,null,D,f):xn(i,s,D,f),s.child;case 11:return Fp(i,s,s.type,s.pendingProps,f);case 7:return xn(i,s,s.pendingProps,f),s.child;case 8:return xn(i,s,s.pendingProps.children,f),s.child;case 12:return xn(i,s,s.pendingProps.children,f),s.child;case 10:return D=s.pendingProps,Vx(s,s.type,D.value),xn(i,s,D.children,f),s.child;case 9:return ve=s.type._context,D=s.pendingProps.children,d2(s),ve=By(ve),D=D(ve),s.flags|=1,xn(i,s,D,f),s.child;case 14:return Bp(i,s,s.type,s.pendingProps,f);case 15:return e0(i,s,s.type,s.pendingProps,f);case 19:return Q1(i,s,f);case 31:return em(i,s,f);case 22:return o0(i,s,f,s.pendingProps);case 24:return d2(s),D=By(Ay),i===null?(ve=qb(),ve===null&&(ve=Dg,ft=$b(),ve.pooledCache=ft,ft.refCount++,ft!==null&&(ve.pooledCacheLanes|=f),ve=ft),s.memoizedState={parent:D,cache:ve},Zb(s),Vx(s,Ay,ve)):((i.lanes&f)!==0&&(X_(i,s),u_(s,null,null,f),l_()),ve=i.memoizedState,ft=s.memoizedState,ve.parent!==D?(ve={parent:D,cache:D},s.memoizedState=ve,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=ve),Vx(s,Ay,D)):(D=ft.cache,Vx(s,Ay,D),D!==ve.cache&&S2(s,[Ay],f,!0))),xn(i,s,s.pendingProps.children,f),s.child;case 29:throw s.pendingProps}throw Error(n(156,s.tag))}function Cg(i){i.flags|=4}function Ug(i,s,f,D,ve){if((s=(i.mode&32)!==0)&&(s=!1),s){if(i.flags|=16777216,(ve&335544128)===ve)if(i.stateNode.complete)i.flags|=8192;else if(vw())i.flags|=8192;else throw m2=W_,Xb}else i.flags&=-16777217}function rg(i,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!Kw(s))if(vw())i.flags|=8192;else throw m2=W_,Xb}function Ng(i,s){s!==null&&(i.flags|=4),i.flags&16384&&(s=i.tag!==22?uv():536870912,i.lanes|=s,bx|=s)}function dg(i,s){if(!Nv)switch(i.tailMode){case"hidden":s=i.tail;for(var f=null;s!==null;)s.alternate!==null&&(f=s),s=s.sibling;f===null?i.tail=null:f.sibling=null;break;case"collapsed":f=i.tail;for(var D=null;f!==null;)f.alternate!==null&&(D=f),f=f.sibling;D===null?s||i.tail===null?i.tail=null:i.tail.sibling=null:D.sibling=null}}function $m(i){var s=i.alternate!==null&&i.alternate.child===i.child,f=0,D=0;if(s)for(var ve=i.child;ve!==null;)f|=ve.lanes|ve.childLanes,D|=ve.subtreeFlags&65011712,D|=ve.flags&65011712,ve.return=i,ve=ve.sibling;else for(ve=i.child;ve!==null;)f|=ve.lanes|ve.childLanes,D|=ve.subtreeFlags,D|=ve.flags,ve.return=i,ve=ve.sibling;return i.subtreeFlags|=D,i.childLanes=f,s}function Xg(i,s,f){var D=s.pendingProps;switch(Ib(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $m(s),null;case 1:return $m(s),null;case 3:return f=s.stateNode,D=null,i!==null&&(D=i.memoizedState.cache),s.memoizedState.cache!==D&&(s.flags|=2048),Lx(Ay),rm(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(i===null||i.child===null)&&(E2(s)?Cg(s):i===null||i.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,jb())),$m(s),null;case 26:var ve=s.type,ft=s.memoizedState;return i===null?(Cg(s),ft!==null?($m(s),rg(s,ft)):($m(s),Ug(s,ve,null,D,f))):ft?ft!==i.memoizedState?(Cg(s),$m(s),rg(s,ft)):($m(s),s.flags&=-16777217):(i=i.memoizedProps,i!==D&&Cg(s),$m(s),Ug(s,ve,i,D,f)),null;case 27:if(ym(s),f=f0.current,ve=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==D&&Cg(s);else{if(!D){if(s.stateNode===null)throw Error(n(166));return $m(s),null}i=kp.current,E2(s)?Q3(s):(i=M_(ve,D,f),s.stateNode=i,Cg(s))}return $m(s),null;case 5:if(ym(s),ve=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==D&&Cg(s);else{if(!D){if(s.stateNode===null)throw Error(n(166));return $m(s),null}if(ft=kp.current,E2(s))Q3(s);else{var Ci=w_(f0.current);switch(ft){case 1:ft=Ci.createElementNS("http://www.w3.org/2000/svg",ve);break;case 2:ft=Ci.createElementNS("http://www.w3.org/1998/Math/MathML",ve);break;default:switch(ve){case"svg":ft=Ci.createElementNS("http://www.w3.org/2000/svg",ve);break;case"math":ft=Ci.createElementNS("http://www.w3.org/1998/Math/MathML",ve);break;case"script":ft=Ci.createElement("div"),ft.innerHTML="<script><\/script>",ft=ft.removeChild(ft.firstChild);break;case"select":ft=typeof D.is=="string"?Ci.createElement("select",{is:D.is}):Ci.createElement("select"),D.multiple?ft.multiple=!0:D.size&&(ft.size=D.size);break;default:ft=typeof D.is=="string"?Ci.createElement(ve,{is:D.is}):Ci.createElement(ve)}}ft[Cv]=s,ft[wg]=D;e:for(Ci=s.child;Ci!==null;){if(Ci.tag===5||Ci.tag===6)ft.appendChild(Ci.stateNode);else if(Ci.tag!==4&&Ci.tag!==27&&Ci.child!==null){Ci.child.return=Ci,Ci=Ci.child;continue}if(Ci===s)break e;for(;Ci.sibling===null;){if(Ci.return===null||Ci.return===s)break e;Ci=Ci.return}Ci.sibling.return=Ci.return,Ci=Ci.sibling}s.stateNode=ft;e:switch(Ry(ft,ve,D),ve){case"button":case"input":case"select":case"textarea":D=!!D.autoFocus;break e;case"img":D=!0;break e;default:D=!1}D&&Cg(s)}}return $m(s),Ug(s,s.type,i===null?null:i.memoizedProps,s.pendingProps,f),null;case 6:if(i&&s.stateNode!=null)i.memoizedProps!==D&&Cg(s);else{if(typeof D!="string"&&s.stateNode===null)throw Error(n(166));if(i=f0.current,E2(s)){if(i=s.stateNode,f=s.memoizedProps,D=null,ve=Uy,ve!==null)switch(ve.tag){case 27:case 5:D=ve.memoizedProps}i[Cv]=s,i=!!(i.nodeValue===f||D!==null&&D.suppressHydrationWarning===!0||cb(i.nodeValue,f)),i||Bx(s,!0)}else i=w_(i).createTextNode(D),i[Cv]=s,s.stateNode=i}return $m(s),null;case 31:if(f=s.memoizedState,i===null||i.memoizedState!==null){if(D=E2(s),f!==null){if(i===null){if(!D)throw Error(n(318));if(i=s.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(557));i[Cv]=s}else c2(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;$m(s),i=!1}else f=jb(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=f),i=!0;if(!i)return s.flags&256?(Qy(s),s):(Qy(s),null);if((s.flags&128)!==0)throw Error(n(558))}return $m(s),null;case 13:if(D=s.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(ve=E2(s),D!==null&&D.dehydrated!==null){if(i===null){if(!ve)throw Error(n(318));if(ve=s.memoizedState,ve=ve!==null?ve.dehydrated:null,!ve)throw Error(n(317));ve[Cv]=s}else c2(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;$m(s),ve=!1}else ve=jb(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=ve),ve=!0;if(!ve)return s.flags&256?(Qy(s),s):(Qy(s),null)}return Qy(s),(s.flags&128)!==0?(s.lanes=f,s):(f=D!==null,i=i!==null&&i.memoizedState!==null,f&&(D=s.child,ve=null,D.alternate!==null&&D.alternate.memoizedState!==null&&D.alternate.memoizedState.cachePool!==null&&(ve=D.alternate.memoizedState.cachePool.pool),ft=null,D.memoizedState!==null&&D.memoizedState.cachePool!==null&&(ft=D.memoizedState.cachePool.pool),ft!==ve&&(D.flags|=2048)),f!==i&&f&&(s.child.flags|=8192),Ng(s,s.updateQueue),$m(s),null);case 4:return rm(),i===null&&sb(s.stateNode.containerInfo),$m(s),null;case 10:return Lx(s.type),$m(s),null;case 19:if(l0(Mv),D=s.memoizedState,D===null)return $m(s),null;if(ve=(s.flags&128)!==0,ft=D.rendering,ft===null)if(ve)dg(D,!1);else{if(sy!==0||i!==null&&(i.flags&128)!==0)for(i=s.child;i!==null;){if(ft=Oy(i),ft!==null){for(s.flags|=128,dg(D,!1),i=ft.updateQueue,s.updateQueue=i,Ng(s,i),s.subtreeFlags=0,i=f,f=s.child;f!==null;)Y3(f,i),f=f.sibling;return y0(Mv,Mv.current&1|2),Nv&&Dx(s,D.treeForkCount),s.child}i=i.sibling}D.tail!==null&&wi()>p_&&(s.flags|=128,ve=!0,dg(D,!1),s.lanes=4194304)}else{if(!ve)if(i=Oy(ft),i!==null){if(s.flags|=128,ve=!0,i=i.updateQueue,s.updateQueue=i,Ng(s,i),dg(D,!0),D.tail===null&&D.tailMode==="hidden"&&!ft.alternate&&!Nv)return $m(s),null}else 2*wi()-D.renderingStartTime>p_&&f!==536870912&&(s.flags|=128,ve=!0,dg(D,!1),s.lanes=4194304);D.isBackwards?(ft.sibling=s.child,s.child=ft):(i=D.last,i!==null?i.sibling=ft:s.child=ft,D.last=ft)}return D.tail!==null?(i=D.tail,D.rendering=i,D.tail=i.sibling,D.renderingStartTime=wi(),i.sibling=null,f=Mv.current,y0(Mv,ve?f&1|2:f&1),Nv&&Dx(s,D.treeForkCount),i):($m(s),null);case 22:case 23:return Qy(s),Kb(),D=s.memoizedState!==null,i!==null?i.memoizedState!==null!==D&&(s.flags|=8192):D&&(s.flags|=8192),D?(f&536870912)!==0&&(s.flags&128)===0&&($m(s),s.subtreeFlags&6&&(s.flags|=8192)):$m(s),f=s.updateQueue,f!==null&&Ng(s,f.retryQueue),f=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(f=i.memoizedState.cachePool.pool),D=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(D=s.memoizedState.cachePool.pool),D!==f&&(s.flags|=2048),i!==null&&l0(Hx),null;case 24:return f=null,i!==null&&(f=i.memoizedState.cache),s.memoizedState.cache!==f&&(s.flags|=2048),Lx(Ay),$m(s),null;case 25:return null;case 30:return null}throw Error(n(156,s.tag))}function Lt(i,s){switch(Ib(s),s.tag){case 1:return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 3:return Lx(Ay),rm(),i=s.flags,(i&65536)!==0&&(i&128)===0?(s.flags=i&-65537|128,s):null;case 26:case 27:case 5:return ym(s),null;case 31:if(s.memoizedState!==null){if(Qy(s),s.alternate===null)throw Error(n(340));c2()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 13:if(Qy(s),i=s.memoizedState,i!==null&&i.dehydrated!==null){if(s.alternate===null)throw Error(n(340));c2()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 19:return l0(Mv),null;case 4:return rm(),null;case 10:return Lx(s.type),null;case 22:case 23:return Qy(s),Kb(),i!==null&&l0(Hx),i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 24:return Lx(Ay),null;case 25:return null;default:return null}}function At(i,s){switch(Ib(s),s.tag){case 3:Lx(Ay),rm();break;case 26:case 27:case 5:ym(s);break;case 4:rm();break;case 31:s.memoizedState!==null&&Qy(s);break;case 13:Qy(s);break;case 19:l0(Mv);break;case 10:Lx(s.type);break;case 22:case 23:Qy(s),Kb(),i!==null&&l0(Hx);break;case 24:Lx(Ay)}}function Wp(i,s){try{var f=s.updateQueue,D=f!==null?f.lastEffect:null;if(D!==null){var ve=D.next;f=ve;do{if((f.tag&i)===i){D=void 0;var ft=f.create,Ci=f.inst;D=ft(),Ci.destroy=D}f=f.next}while(f!==ve)}}catch(Zp){qv(s,s.return,Zp)}}function Qp(i,s,f){try{var D=s.updateQueue,ve=D!==null?D.lastEffect:null;if(ve!==null){var ft=ve.next;D=ft;do{if((D.tag&i)===i){var Ci=D.inst,Zp=Ci.destroy;if(Zp!==void 0){Ci.destroy=void 0,ve=s;var K0=f,Pm=Zp;try{Pm()}catch(Xm){qv(ve,K0,Xm)}}}D=D.next}while(D!==ft)}}catch(Xm){qv(s,s.return,Xm)}}function g0(i){var s=i.updateQueue;if(s!==null){var f=i.stateNode;try{lw(s,f)}catch(D){qv(i,i.return,D)}}}function $p(i,s,f){f.props=$0(i.type,i.memoizedProps),f.state=i.memoizedState;try{f.componentWillUnmount()}catch(D){qv(i,s,D)}}function Xp(i,s){try{var f=i.ref;if(f!==null){switch(i.tag){case 26:case 27:case 5:var D=i.stateNode;break;case 30:D=i.stateNode;break;default:D=i.stateNode}typeof f=="function"?i.refCleanup=f(D):f.current=D}}catch(ve){qv(i,s,ve)}}function b0(i,s){var f=i.ref,D=i.refCleanup;if(f!==null)if(typeof D=="function")try{D()}catch(ve){qv(i,s,ve)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(ve){qv(i,s,ve)}else f.current=null}function s0(i){var s=i.type,f=i.memoizedProps,D=i.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":f.autoFocus&&D.focus();break e;case"img":f.src?D.src=f.src:f.srcSet&&(D.srcset=f.srcSet)}}catch(ve){qv(i,i.return,ve)}}function O0(i,s,f){try{var D=i.stateNode;w5(D,i.type,f,s),D[wg]=s}catch(ve){qv(i,i.return,ve)}}function U0(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Yx(i.type)||i.tag===4}function mm(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||U0(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Yx(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Jm(i,s,f){var D=i.tag;if(D===5||D===6)i=i.stateNode,s?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(i,s):(s=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,s.appendChild(i),f=f._reactRootContainer,f!=null||s.onclick!==null||(s.onclick=r0));else if(D!==4&&(D===27&&Yx(i.type)&&(f=i.stateNode,s=null),i=i.child,i!==null))for(Jm(i,s,f),i=i.sibling;i!==null;)Jm(i,s,f),i=i.sibling}function qm(i,s,f){var D=i.tag;if(D===5||D===6)i=i.stateNode,s?f.insertBefore(i,s):f.appendChild(i);else if(D!==4&&(D===27&&Yx(i.type)&&(f=i.stateNode),i=i.child,i!==null))for(qm(i,s,f),i=i.sibling;i!==null;)qm(i,s,f),i=i.sibling}function b1(i){var s=i.stateNode,f=i.memoizedProps;try{for(var D=i.type,ve=s.attributes;ve.length;)s.removeAttributeNode(ve[0]);Ry(s,D,f),s[Cv]=i,s[wg]=f}catch(ft){qv(i,i.return,ft)}}var jm=!1,e1=!1,k1=!1,Pg=typeof WeakSet=="function"?WeakSet:Set,H1=null;function ov(i,s){if(i=i.containerInfo,_3=wb,i=Ab(i),zx(i)){if("selectionStart"in i)var f={start:i.selectionStart,end:i.selectionEnd};else e:{f=(f=i.ownerDocument)&&f.defaultView||window;var D=f.getSelection&&f.getSelection();if(D&&D.rangeCount!==0){f=D.anchorNode;var ve=D.anchorOffset,ft=D.focusNode;D=D.focusOffset;try{f.nodeType,ft.nodeType}catch{f=null;break e}var Ci=0,Zp=-1,K0=-1,Pm=0,Xm=0,wm=i,Am=null;t:for(;;){for(var Lm;wm!==f||ve!==0&&wm.nodeType!==3||(Zp=Ci+ve),wm!==ft||D!==0&&wm.nodeType!==3||(K0=Ci+D),wm.nodeType===3&&(Ci+=wm.nodeValue.length),(Lm=wm.firstChild)!==null;)Am=wm,wm=Lm;for(;;){if(wm===i)break t;if(Am===f&&++Pm===ve&&(Zp=Ci),Am===ft&&++Xm===D&&(K0=Ci),(Lm=wm.nextSibling)!==null)break;wm=Am,Am=wm.parentNode}wm=Lm}f=Zp===-1||K0===-1?null:{start:Zp,end:K0}}else f=null}f=f||{start:0,end:0}}else f=null;for(b3={focusedElem:i,selectionRange:f},wb=!1,H1=s;H1!==null;)if(s=H1,i=s.child,(s.subtreeFlags&1028)!==0&&i!==null)i.return=s,H1=i;else for(;H1!==null;){switch(s=H1,ft=s.alternate,i=s.flags,s.tag){case 0:if((i&4)!==0&&(i=s.updateQueue,i=i!==null?i.events:null,i!==null))for(f=0;f<i.length;f++)ve=i[f],ve.ref.impl=ve.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&ft!==null){i=void 0,f=s,ve=ft.memoizedProps,ft=ft.memoizedState,D=f.stateNode;try{var X1=$0(f.type,ve);i=D.getSnapshotBeforeUpdate(X1,ft),D.__reactInternalSnapshotBeforeUpdate=i}catch(gg){qv(f,f.return,gg)}}break;case 3:if((i&1024)!==0){if(i=s.stateNode.containerInfo,f=i.nodeType,f===9)db(i);else if(f===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":db(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(n(163))}if(i=s.sibling,i!==null){i.return=s.return,H1=i;break}H1=s.return}}function mg(i,s,f){var D=f.flags;switch(f.tag){case 0:case 11:case 15:tv(i,f),D&4&&Wp(5,f);break;case 1:if(tv(i,f),D&4)if(i=f.stateNode,s===null)try{i.componentDidMount()}catch(Ci){qv(f,f.return,Ci)}else{var ve=$0(f.type,s.memoizedProps);s=s.memoizedState;try{i.componentDidUpdate(ve,s,i.__reactInternalSnapshotBeforeUpdate)}catch(Ci){qv(f,f.return,Ci)}}D&64&&g0(f),D&512&&Xp(f,f.return);break;case 3:if(tv(i,f),D&64&&(i=f.updateQueue,i!==null)){if(s=null,f.child!==null)switch(f.child.tag){case 27:case 5:s=f.child.stateNode;break;case 1:s=f.child.stateNode}try{lw(i,s)}catch(Ci){qv(f,f.return,Ci)}}break;case 27:s===null&&D&4&&b1(f);case 26:case 5:tv(i,f),s===null&&D&4&&s0(f),D&512&&Xp(f,f.return);break;case 12:tv(i,f);break;case 31:tv(i,f),D&4&&Fv(i,f);break;case 13:tv(i,f),D&4&&wv(i,f),D&64&&(i=f.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(f=v5.bind(null,f),S5(i,f))));break;case 22:if(D=f.memoizedState!==null||jm,!D){s=s!==null&&s.memoizedState!==null||e1,ve=jm;var ft=e1;jm=D,(e1=s)&&!ft?rv(i,f,(f.subtreeFlags&8772)!==0):tv(i,f),jm=ve,e1=ft}break;case 30:break;default:tv(i,f)}}function cv(i){var s=i.alternate;s!==null&&(i.alternate=null,cv(s)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(s=i.stateNode,s!==null&&oa(s)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var Eg=null,Qg=!1;function lv(i,s,f){for(f=f.child;f!==null;)vg(i,s,f),f=f.sibling}function vg(i,s,f){if(Cm&&typeof Cm.onCommitFiberUnmount=="function")try{Cm.onCommitFiberUnmount(om,f)}catch{}switch(f.tag){case 26:e1||b0(f,s),lv(i,s,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:e1||b0(f,s);var D=Eg,ve=Qg;Yx(f.type)&&(Eg=f.stateNode,Qg=!1),lv(i,s,f),Zx(f.stateNode),Eg=D,Qg=ve;break;case 5:e1||b0(f,s);case 6:if(D=Eg,ve=Qg,Eg=null,lv(i,s,f),Eg=D,Qg=ve,Eg!==null)if(Qg)try{(Eg.nodeType===9?Eg.body:Eg.nodeName==="HTML"?Eg.ownerDocument.body:Eg).removeChild(f.stateNode)}catch(ft){qv(f,s,ft)}else try{Eg.removeChild(f.stateNode)}catch(ft){qv(f,s,ft)}break;case 18:Eg!==null&&(Qg?(i=Eg,Vw(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,f.stateNode),z0(i)):Vw(Eg,f.stateNode));break;case 4:D=Eg,ve=Qg,Eg=f.stateNode.containerInfo,Qg=!0,lv(i,s,f),Eg=D,Qg=ve;break;case 0:case 11:case 14:case 15:Qp(2,f,s),e1||Qp(4,f,s),lv(i,s,f);break;case 1:e1||(b0(f,s),D=f.stateNode,typeof D.componentWillUnmount=="function"&&$p(f,s,D)),lv(i,s,f);break;case 21:lv(i,s,f);break;case 22:e1=(D=e1)||f.memoizedState!==null,lv(i,s,f),e1=D;break;default:lv(i,s,f)}}function Fv(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{z0(i)}catch(f){qv(s,s.return,f)}}}function wv(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{z0(i)}catch(f){qv(s,s.return,f)}}function Lg(i){switch(i.tag){case 31:case 13:case 19:var s=i.stateNode;return s===null&&(s=i.stateNode=new Pg),s;case 22:return i=i.stateNode,s=i._retryCache,s===null&&(s=i._retryCache=new Pg),s;default:throw Error(n(435,i.tag))}}function xv(i,s){var f=Lg(i);s.forEach(function(D){if(!f.has(D)){f.add(D);var ve=g_.bind(null,i,D);D.then(ve,ve)}})}function ev(i,s){var f=s.deletions;if(f!==null)for(var D=0;D<f.length;D++){var ve=f[D],ft=i,Ci=s,Zp=Ci;e:for(;Zp!==null;){switch(Zp.tag){case 27:if(Yx(Zp.type)){Eg=Zp.stateNode,Qg=!1;break e}break;case 5:Eg=Zp.stateNode,Qg=!1;break e;case 3:case 4:Eg=Zp.stateNode.containerInfo,Qg=!0;break e}Zp=Zp.return}if(Eg===null)throw Error(n(160));vg(ft,Ci,ve),Eg=null,Qg=!1,ft=ve.alternate,ft!==null&&(ft.return=null),ve.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)ry(s,i),s=s.sibling}var sv=null;function ry(i,s){var f=i.alternate,D=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:ev(s,i),zv(i),D&4&&(Qp(3,i,i.return),Wp(3,i),Qp(5,i,i.return));break;case 1:ev(s,i),zv(i),D&512&&(e1||f===null||b0(f,f.return)),D&64&&jm&&(i=i.updateQueue,i!==null&&(D=i.callbacks,D!==null&&(f=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=f===null?D:f.concat(D))));break;case 26:var ve=sv;if(ev(s,i),zv(i),D&512&&(e1||f===null||b0(f,f.return)),D&4){var ft=f!==null?f.memoizedState:null;if(D=i.memoizedState,f===null)if(D===null)if(i.stateNode===null){e:{D=i.type,f=i.memoizedProps,ve=ve.ownerDocument||ve;t:switch(D){case"title":ft=ve.getElementsByTagName("title")[0],(!ft||ft[t0]||ft[Cv]||ft.namespaceURI==="http://www.w3.org/2000/svg"||ft.hasAttribute("itemprop"))&&(ft=ve.createElement(D),ve.head.insertBefore(ft,ve.querySelector("head > title"))),Ry(ft,D,f),ft[Cv]=i,cm(ft),D=ft;break e;case"link":var Ci=L3("link","href",ve).get(D+(f.href||""));if(Ci){for(var Zp=0;Zp<Ci.length;Zp++)if(ft=Ci[Zp],ft.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&ft.getAttribute("rel")===(f.rel==null?null:f.rel)&&ft.getAttribute("title")===(f.title==null?null:f.title)&&ft.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){Ci.splice(Zp,1);break t}}ft=ve.createElement(D),Ry(ft,D,f),ve.head.appendChild(ft);break;case"meta":if(Ci=L3("meta","content",ve).get(D+(f.content||""))){for(Zp=0;Zp<Ci.length;Zp++)if(ft=Ci[Zp],ft.getAttribute("content")===(f.content==null?null:""+f.content)&&ft.getAttribute("name")===(f.name==null?null:f.name)&&ft.getAttribute("property")===(f.property==null?null:f.property)&&ft.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&ft.getAttribute("charset")===(f.charSet==null?null:f.charSet)){Ci.splice(Zp,1);break t}}ft=ve.createElement(D),Ry(ft,D,f),ve.head.appendChild(ft);break;default:throw Error(n(468,D))}ft[Cv]=i,cm(ft),D=ft}i.stateNode=D}else k3(ve,i.type,i.stateNode);else i.stateNode=gb(ve,D,i.memoizedProps);else ft!==D?(ft===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):ft.count--,D===null?k3(ve,i.type,i.stateNode):gb(ve,D,i.memoizedProps)):D===null&&i.stateNode!==null&&O0(i,i.memoizedProps,f.memoizedProps)}break;case 27:ev(s,i),zv(i),D&512&&(e1||f===null||b0(f,f.return)),f!==null&&D&4&&O0(i,i.memoizedProps,f.memoizedProps);break;case 5:if(ev(s,i),zv(i),D&512&&(e1||f===null||b0(f,f.return)),i.flags&32){ve=i.stateNode;try{Er(ve,"")}catch(X1){qv(i,i.return,X1)}}D&4&&i.stateNode!=null&&(ve=i.memoizedProps,O0(i,ve,f!==null?f.memoizedProps:ve)),D&1024&&(k1=!0);break;case 6:if(ev(s,i),zv(i),D&4){if(i.stateNode===null)throw Error(n(162));D=i.memoizedProps,f=i.stateNode;try{f.nodeValue=D}catch(X1){qv(i,i.return,X1)}}break;case 3:if(A_=null,ve=sv,sv=G2(s.containerInfo),ev(s,i),sv=ve,zv(i),D&4&&f!==null&&f.memoizedState.isDehydrated)try{z0(s.containerInfo)}catch(X1){qv(i,i.return,X1)}k1&&(k1=!1,Vg(i));break;case 4:D=sv,sv=G2(i.stateNode.containerInfo),ev(s,i),zv(i),sv=D;break;case 12:ev(s,i),zv(i);break;case 31:ev(s,i),zv(i),D&4&&(D=i.updateQueue,D!==null&&(i.updateQueue=null,xv(i,D)));break;case 13:ev(s,i),zv(i),i.child.flags&8192&&i.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(f_=wi()),D&4&&(D=i.updateQueue,D!==null&&(i.updateQueue=null,xv(i,D)));break;case 22:ve=i.memoizedState!==null;var K0=f!==null&&f.memoizedState!==null,Pm=jm,Xm=e1;if(jm=Pm||ve,e1=Xm||K0,ev(s,i),e1=Xm,jm=Pm,zv(i),D&8192)e:for(s=i.stateNode,s._visibility=ve?s._visibility&-2:s._visibility|1,ve&&(f===null||K0||jm||e1||Wg(i)),f=null,s=i;;){if(s.tag===5||s.tag===26){if(f===null){K0=f=s;try{if(ft=K0.stateNode,ve)Ci=ft.style,typeof Ci.setProperty=="function"?Ci.setProperty("display","none","important"):Ci.display="none";else{Zp=K0.stateNode;var wm=K0.memoizedProps.style,Am=wm!=null&&wm.hasOwnProperty("display")?wm.display:null;Zp.style.display=Am==null||typeof Am=="boolean"?"":(""+Am).trim()}}catch(X1){qv(K0,K0.return,X1)}}}else if(s.tag===6){if(f===null){K0=s;try{K0.stateNode.nodeValue=ve?"":K0.memoizedProps}catch(X1){qv(K0,K0.return,X1)}}}else if(s.tag===18){if(f===null){K0=s;try{var Lm=K0.stateNode;ve?Hw(Lm,!0):Hw(K0.stateNode,!1)}catch(X1){qv(K0,K0.return,X1)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===i)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break e;for(;s.sibling===null;){if(s.return===null||s.return===i)break e;f===s&&(f=null),s=s.return}f===s&&(f=null),s.sibling.return=s.return,s=s.sibling}D&4&&(D=i.updateQueue,D!==null&&(f=D.retryQueue,f!==null&&(D.retryQueue=null,xv(i,f))));break;case 19:ev(s,i),zv(i),D&4&&(D=i.updateQueue,D!==null&&(i.updateQueue=null,xv(i,D)));break;case 30:break;case 21:break;default:ev(s,i),zv(i)}}function zv(i){var s=i.flags;if(s&2){try{for(var f,D=i.return;D!==null;){if(U0(D)){f=D;break}D=D.return}if(f==null)throw Error(n(160));switch(f.tag){case 27:var ve=f.stateNode,ft=mm(i);qm(i,ft,ve);break;case 5:var Ci=f.stateNode;f.flags&32&&(Er(Ci,""),f.flags&=-33);var Zp=mm(i);qm(i,Zp,Ci);break;case 3:case 4:var K0=f.stateNode.containerInfo,Pm=mm(i);Jm(i,Pm,K0);break;default:throw Error(n(161))}}catch(Xm){qv(i,i.return,Xm)}i.flags&=-3}s&4096&&(i.flags&=-4097)}function Vg(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var s=i;Vg(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),i=i.sibling}}function tv(i,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)mg(i,s.alternate,s),s=s.sibling}function Wg(i){for(i=i.child;i!==null;){var s=i;switch(s.tag){case 0:case 11:case 14:case 15:Qp(4,s,s.return),Wg(s);break;case 1:b0(s,s.return);var f=s.stateNode;typeof f.componentWillUnmount=="function"&&$p(s,s.return,f),Wg(s);break;case 27:Zx(s.stateNode);case 26:case 5:b0(s,s.return),Wg(s);break;case 22:s.memoizedState===null&&Wg(s);break;case 30:Wg(s);break;default:Wg(s)}i=i.sibling}}function rv(i,s,f){for(f=f&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var D=s.alternate,ve=i,ft=s,Ci=ft.flags;switch(ft.tag){case 0:case 11:case 15:rv(ve,ft,f),Wp(4,ft);break;case 1:if(rv(ve,ft,f),D=ft,ve=D.stateNode,typeof ve.componentDidMount=="function")try{ve.componentDidMount()}catch(Pm){qv(D,D.return,Pm)}if(D=ft,ve=D.updateQueue,ve!==null){var Zp=D.stateNode;try{var K0=ve.shared.hiddenCallbacks;if(K0!==null)for(ve.shared.hiddenCallbacks=null,ve=0;ve<K0.length;ve++)sw(K0[ve],Zp)}catch(Pm){qv(D,D.return,Pm)}}f&&Ci&64&&g0(ft),Xp(ft,ft.return);break;case 27:b1(ft);case 26:case 5:rv(ve,ft,f),f&&D===null&&Ci&4&&s0(ft),Xp(ft,ft.return);break;case 12:rv(ve,ft,f);break;case 31:rv(ve,ft,f),f&&Ci&4&&Fv(ve,ft);break;case 13:rv(ve,ft,f),f&&Ci&4&&wv(ve,ft);break;case 22:ft.memoizedState===null&&rv(ve,ft,f),Xp(ft,ft.return);break;case 30:break;default:rv(ve,ft,f)}s=s.sibling}}function Bv(i,s){var f=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(f=i.memoizedState.cachePool.pool),i=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),i!==f&&(i!=null&&i.refCount++,f!=null&&r_(f))}function Kv(i,s){i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&r_(i))}function Ov(i,s,f,D){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)ny(i,s,f,D),s=s.sibling}function ny(i,s,f,D){var ve=s.flags;switch(s.tag){case 0:case 11:case 15:Ov(i,s,f,D),ve&2048&&Wp(9,s);break;case 1:Ov(i,s,f,D);break;case 3:Ov(i,s,f,D),ve&2048&&(i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&r_(i)));break;case 12:if(ve&2048){Ov(i,s,f,D),i=s.stateNode;try{var ft=s.memoizedProps,Ci=ft.id,Zp=ft.onPostCommit;typeof Zp=="function"&&Zp(Ci,s.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(K0){qv(s,s.return,K0)}}else Ov(i,s,f,D);break;case 31:Ov(i,s,f,D);break;case 13:Ov(i,s,f,D);break;case 23:break;case 22:ft=s.stateNode,Ci=s.alternate,s.memoizedState!==null?ft._visibility&2?Ov(i,s,f,D):Gv(i,s):ft._visibility&2?Ov(i,s,f,D):(ft._visibility|=2,oy(i,s,f,D,(s.subtreeFlags&10256)!==0||!1)),ve&2048&&Bv(Ci,s);break;case 24:Ov(i,s,f,D),ve&2048&&Kv(s.alternate,s);break;default:Ov(i,s,f,D)}}function oy(i,s,f,D,ve){for(ve=ve&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var ft=i,Ci=s,Zp=f,K0=D,Pm=Ci.flags;switch(Ci.tag){case 0:case 11:case 15:oy(ft,Ci,Zp,K0,ve),Wp(8,Ci);break;case 23:break;case 22:var Xm=Ci.stateNode;Ci.memoizedState!==null?Xm._visibility&2?oy(ft,Ci,Zp,K0,ve):Gv(ft,Ci):(Xm._visibility|=2,oy(ft,Ci,Zp,K0,ve)),ve&&Pm&2048&&Bv(Ci.alternate,Ci);break;case 24:oy(ft,Ci,Zp,K0,ve),ve&&Pm&2048&&Kv(Ci.alternate,Ci);break;default:oy(ft,Ci,Zp,K0,ve)}s=s.sibling}}function Gv(i,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var f=i,D=s,ve=D.flags;switch(D.tag){case 22:Gv(f,D),ve&2048&&Bv(D.alternate,D);break;case 24:Gv(f,D),ve&2048&&Kv(D.alternate,D);break;default:Gv(f,D)}s=s.sibling}}var nv=8192;function My(i,s,f){if(i.subtreeFlags&nv)for(i=i.child;i!==null;)cy(i,s,f),i=i.sibling}function cy(i,s,f){switch(i.tag){case 26:My(i,s,f),i.flags&nv&&i.memoizedState!==null&&Qw(f,sv,i.memoizedState,i.memoizedProps);break;case 5:My(i,s,f);break;case 3:case 4:var D=sv;sv=G2(i.stateNode.containerInfo),My(i,s,f),sv=D;break;case 22:i.memoizedState===null&&(D=i.alternate,D!==null&&D.memoizedState!==null?(D=nv,nv=16777216,My(i,s,f),nv=D):My(i,s,f));break;default:My(i,s,f)}}function Dy(i){var s=i.alternate;if(s!==null&&(i=s.child,i!==null)){s.child=null;do s=i.sibling,i.sibling=null,i=s;while(i!==null)}}function hy(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var f=0;f<s.length;f++){var D=s[f];H1=D,Fy(D,i)}Dy(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)dy(i),i=i.sibling}function dy(i){switch(i.tag){case 0:case 11:case 15:hy(i),i.flags&2048&&Qp(9,i,i.return);break;case 3:hy(i);break;case 12:hy(i);break;case 22:var s=i.stateNode;i.memoizedState!==null&&s._visibility&2&&(i.return===null||i.return.tag!==13)?(s._visibility&=-3,jy(i)):hy(i);break;default:hy(i)}}function jy(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var f=0;f<s.length;f++){var D=s[f];H1=D,Fy(D,i)}Dy(i)}for(i=i.child;i!==null;){switch(s=i,s.tag){case 0:case 11:case 15:Qp(8,s,s.return),jy(s);break;case 22:f=s.stateNode,f._visibility&2&&(f._visibility&=-3,jy(s));break;default:jy(s)}i=i.sibling}}function Fy(i,s){for(;H1!==null;){var f=H1;switch(f.tag){case 0:case 11:case 15:Qp(8,f,s);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var D=f.memoizedState.cachePool.pool;D!=null&&D.refCount++}break;case 24:r_(f.memoizedState.cache)}if(D=f.child,D!==null)D.return=f,H1=D;else e:for(f=i;H1!==null;){D=H1;var ve=D.sibling,ft=D.return;if(cv(D),D===f){H1=null;break e}if(ve!==null){ve.return=ft,H1=ve;break e}H1=ft}}}var wy={getCacheForType:function(i){var s=By(Ay),f=s.data.get(i);return f===void 0&&(f=i(),s.data.set(i,f)),f},cacheSignal:function(){return By(Ay).controller.signal}},$y=typeof WeakMap=="function"?WeakMap:Map,hv=0,Dg=null,Rg=null,zg=0,av=0,_v=null,fv=!1,by=!1,xx=!1,zy=0,sy=0,Vy=0,_x=0,O2=0,Hy=0,bx=0,hx=null,Yy=null,d_=!1,f_=0,wx=0,p_=1/0,P2=null,Ex=null,fy=0,gx=null,y2=null,Ox=0,a3=0,i3=null,o3=null,F2=0,s3=null;function ex(){return(hv&2)!==0&&zg!==0?zg&-zg:re.T!==null?m3():Qv()}function fw(){if(Hy===0)if((zg&536870912)===0||Nv){var i=U1;U1<<=1,(U1&3932160)===0&&(U1=262144),Hy=i}else Hy=536870912;return i=Xy.current,i!==null&&(i.flags|=32),Hy}function Zy(i,s,f){(i===Dg&&(av===2||av===9)||i.cancelPendingCommit!==null)&&(z2(i,0),Xx(i,zg,Hy,!1)),Sv(i,f),((hv&2)===0||i!==Dg)&&(i===Dg&&((hv&2)===0&&(_x|=f),sy===4&&Xx(i,zg,Hy,!1)),Sx(i))}function pw(i,s,f){if((hv&6)!==0)throw Error(n(327));var D=!f&&(s&127)===0&&(s&i.expiredLanes)===0||A1(i,s),ve=D?m5(i,s):Q_(i,s,!0),ft=D;do{if(ve===0){by&&!D&&Xx(i,s,0,!1);break}else{if(f=i.current.alternate,ft&&!f5(f)){ve=Q_(i,s,!1),ft=!1;continue}if(ve===2){if(ft=s,i.errorRecoveryDisabledLanes&ft)var Ci=0;else Ci=i.pendingLanes&-536870913,Ci=Ci!==0?Ci:Ci&536870912?536870912:0;if(Ci!==0){s=Ci;e:{var Zp=i;ve=hx;var K0=Zp.current.memoizedState.isDehydrated;if(K0&&(z2(Zp,Ci).flags|=256),Ci=Q_(Zp,Ci,!1),Ci!==2){if(xx&&!K0){Zp.errorRecoveryDisabledLanes|=ft,_x|=ft,ve=4;break e}ft=Yy,Yy=ve,ft!==null&&(Yy===null?Yy=ft:Yy.push.apply(Yy,ft))}ve=Ci}if(ft=!1,ve!==2)continue}}if(ve===1){z2(i,0),Xx(i,s,0,!0);break}e:{switch(D=i,ft=ve,ft){case 0:case 1:throw Error(n(345));case 4:if((s&4194048)!==s)break;case 6:Xx(D,s,Hy,!fv);break e;case 2:Yy=null;break;case 3:case 5:break;default:throw Error(n(329))}if((s&62914560)===s&&(ve=f_+300-wi(),10<ve)){if(Xx(D,s,Hy,!fv),Km(D,0,!0)!==0)break e;Ox=s,D.timeoutHandle=Uw(mw.bind(null,D,f,Yy,P2,d_,s,Hy,_x,bx,fv,ft,"Throttled",-0,0),ve);break e}mw(D,f,Yy,P2,d_,s,Hy,_x,bx,fv,ft,null,-0,0)}}break}while(!0);Sx(i)}function mw(i,s,f,D,ve,ft,Ci,Zp,K0,Pm,Xm,wm,Am,Lm){if(i.timeoutHandle=-1,wm=s.subtreeFlags,wm&8192||(wm&16785408)===16785408){wm={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:r0},cy(s,ft,wm);var X1=(ft&62914560)===ft?f_-wi():(ft&4194048)===ft?wx-wi():0;if(X1=R5(wm,X1),X1!==null){Ox=ft,i.cancelPendingCommit=X1(_w.bind(null,i,s,ft,f,D,ve,Ci,Zp,K0,Xm,wm,null,Am,Lm)),Xx(i,ft,Ci,!Pm);return}}_w(i,s,ft,f,D,ve,Ci,Zp,K0)}function f5(i){for(var s=i;;){var f=s.tag;if((f===0||f===11||f===15)&&s.flags&16384&&(f=s.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var D=0;D<f.length;D++){var ve=f[D],ft=ve.getSnapshot;ve=ve.value;try{if(!Jy(ft(),ve))return!1}catch{return!1}}if(f=s.child,s.subtreeFlags&16384&&f!==null)f.return=s,s=f;else{if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Xx(i,s,f,D){s&=~O2,s&=~_x,i.suspendedLanes|=s,i.pingedLanes&=~s,D&&(i.warmLanes|=s),D=i.expirationTimes;for(var ve=s;0<ve;){var ft=31-Om(ve),Ci=1<<ft;D[ft]=-1,ve&=~Ci}f!==0&&my(i,f,s)}function K_(){return(hv&6)===0?(y_(0),!1):!0}function l3(){if(Rg!==null){if(av===0)var i=Rg.return;else i=Rg,Nx=jx=null,nt(i),D2=null,a_=0,i=Rg;for(;i!==null;)At(i.alternate,i),i=i.return;Rg=null}}function z2(i,s){var f=i.timeoutHandle;f!==-1&&(i.timeoutHandle=-1,Bw(f)),f=i.cancelPendingCommit,f!==null&&(i.cancelPendingCommit=null,f()),Ox=0,l3(),Dg=i,Rg=f=Ax(i.current,null),zg=s,av=0,_v=null,fv=!1,by=A1(i,s),xx=!1,bx=Hy=O2=_x=Vy=sy=0,Yy=hx=null,d_=!1,(s&8)!==0&&(s|=s&32);var D=i.entangledLanes;if(D!==0)for(i=i.entanglements,D&=s;0<D;){var ve=31-Om(D),ft=1<<ve;s|=i[ve],D&=~ft}return zy=s,I_(),f}function gw(i,s){dv=null,re.H=Rp,s===C2||s===$_?(s=iw(),av=3):s===Xb?(s=iw(),av=4):av=s===Mt?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,_v=s,Rg===null&&(sy=1,bm(i,sx(s,i.current)))}function vw(){var i=Xy.current;return i===null?!0:(zg&4194048)===zg?cx===null:(zg&62914560)===zg||(zg&536870912)!==0?i===cx:!1}function u3(){var i=re.H;return re.H=Rp,i===null?Rp:i}function c3(){var i=re.A;return re.A=wy,i}function m_(){sy=4,fv||(zg&4194048)!==zg&&Xy.current!==null||(by=!0),(Vy&134217727)===0&&(_x&134217727)===0||Dg===null||Xx(Dg,zg,Hy,!1)}function Q_(i,s,f){var D=hv;hv|=2;var ve=u3(),ft=c3();(Dg!==i||zg!==s)&&(P2=null,z2(i,s)),s=!1;var Ci=sy;e:do try{if(av!==0&&Rg!==null){var Zp=Rg,K0=_v;switch(av){case 8:l3(),Ci=6;break e;case 3:case 2:case 9:case 6:Xy.current===null&&(s=!0);var Pm=av;if(av=0,_v=null,U2(i,Zp,K0,Pm),f&&by){Ci=0;break e}break;default:Pm=av,av=0,_v=null,U2(i,Zp,K0,Pm)}}p5(),Ci=sy;break}catch(Xm){gw(i,Xm)}while(!0);return s&&i.shellSuspendCounter++,Nx=jx=null,hv=D,re.H=ve,re.A=ft,Rg===null&&(Dg=null,zg=0,I_()),Ci}function p5(){for(;Rg!==null;)yw(Rg)}function m5(i,s){var f=hv;hv|=2;var D=u3(),ve=c3();Dg!==i||zg!==s?(P2=null,p_=wi()+500,z2(i,s)):by=A1(i,s);e:do try{if(av!==0&&Rg!==null){s=Rg;var ft=_v;t:switch(av){case 1:av=0,_v=null,U2(i,s,ft,1);break;case 2:case 9:if(nw(ft)){av=0,_v=null,xw(s);break}s=function(){av!==2&&av!==9||Dg!==i||(av=7),Sx(i)},ft.then(s,s);break e;case 3:av=7;break e;case 4:av=5;break e;case 7:nw(ft)?(av=0,_v=null,xw(s)):(av=0,_v=null,U2(i,s,ft,7));break;case 5:var Ci=null;switch(Rg.tag){case 26:Ci=Rg.memoizedState;case 5:case 27:var Zp=Rg;if(Ci?Kw(Ci):Zp.stateNode.complete){av=0,_v=null;var K0=Zp.sibling;if(K0!==null)Rg=K0;else{var Pm=Zp.return;Pm!==null?(Rg=Pm,eb(Pm)):Rg=null}break t}}av=0,_v=null,U2(i,s,ft,5);break;case 6:av=0,_v=null,U2(i,s,ft,6);break;case 8:l3(),sy=6;break e;default:throw Error(n(462))}}I2();break}catch(Xm){gw(i,Xm)}while(!0);return Nx=jx=null,re.H=D,re.A=ve,hv=f,Rg!==null?0:(Dg=null,zg=0,I_(),sy)}function I2(){for(;Rg!==null&&!ng();)yw(Rg)}function yw(i){var s=bg(i.alternate,i,zy);i.memoizedProps=i.pendingProps,s===null?eb(i):Rg=s}function xw(i){var s=i,f=s.alternate;switch(s.tag){case 15:case 0:s=o1(f,s,s.pendingProps,s.type,void 0,zg);break;case 11:s=o1(f,s,s.pendingProps,s.type.render,s.ref,zg);break;case 5:nt(s);default:At(f,s),s=Rg=Y3(s,zy),s=bg(f,s,zy)}i.memoizedProps=i.pendingProps,s===null?eb(i):Rg=s}function U2(i,s,f,D){Nx=jx=null,nt(s),D2=null,a_=0;var ve=s.return;try{if(qp(i,ve,s,f,zg)){sy=1,bm(i,sx(f,i.current)),Rg=null;return}}catch(ft){if(ve!==null)throw Rg=ve,ft;sy=1,bm(i,sx(f,i.current)),Rg=null;return}s.flags&32768?(Nv||D===1?i=!0:by||(zg&536870912)!==0?i=!1:(fv=i=!0,(D===2||D===9||D===3||D===6)&&(D=Xy.current,D!==null&&D.tag===13&&(D.flags|=16384))),h3(s,i)):eb(s)}function eb(i){var s=i;do{if((s.flags&32768)!==0){h3(s,fv);return}i=s.return;var f=Xg(s.alternate,s,zy);if(f!==null){Rg=f;return}if(s=s.sibling,s!==null){Rg=s;return}Rg=s=i}while(s!==null);sy===0&&(sy=5)}function h3(i,s){do{var f=Lt(i.alternate,i);if(f!==null){f.flags&=32767,Rg=f;return}if(f=i.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!s&&(i=i.sibling,i!==null)){Rg=i;return}Rg=i=f}while(i!==null);sy=6,Rg=null}function _w(i,s,f,D,ve,ft,Ci,Zp,K0){i.cancelPendingCommit=null;do tb();while(fy!==0);if((hv&6)!==0)throw Error(n(327));if(s!==null){if(s===i.current)throw Error(n(177));if(ft=s.lanes|s.childLanes,ft|=z_,Yv(i,f,ft,Ci,Zp,K0),i===Dg&&(Rg=Dg=null,zg=0),y2=s,gx=i,Ox=f,a3=ft,i3=ve,o3=D,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,v_(Ip,function(){return Sw(),null})):(i.callbackNode=null,i.callbackPriority=0),D=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||D){D=re.T,re.T=null,ve=$o.p,$o.p=2,Ci=hv,hv|=4;try{ov(i,s,f)}finally{hv=Ci,$o.p=ve,re.T=D}}fy=1,bw(),ww(),d3()}}function bw(){if(fy===1){fy=0;var i=gx,s=y2,f=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||f){f=re.T,re.T=null;var D=$o.p;$o.p=2;var ve=hv;hv|=4;try{ry(s,i);var ft=b3,Ci=Ab(i.containerInfo),Zp=ft.focusedElem,K0=ft.selectionRange;if(Ci!==Zp&&Zp&&Zp.ownerDocument&&H3(Zp.ownerDocument.documentElement,Zp)){if(K0!==null&&zx(Zp)){var Pm=K0.start,Xm=K0.end;if(Xm===void 0&&(Xm=Pm),"selectionStart"in Zp)Zp.selectionStart=Pm,Zp.selectionEnd=Math.min(Xm,Zp.value.length);else{var wm=Zp.ownerDocument||document,Am=wm&&wm.defaultView||window;if(Am.getSelection){var Lm=Am.getSelection(),X1=Zp.textContent.length,gg=Math.min(K0.start,X1),Yg=K0.end===void 0?gg:Math.min(K0.end,X1);!Lm.extend&&gg>Yg&&(Ci=Yg,Yg=gg,gg=Ci);var Rm=V3(Zp,gg),_m=V3(Zp,Yg);if(Rm&&_m&&(Lm.rangeCount!==1||Lm.anchorNode!==Rm.node||Lm.anchorOffset!==Rm.offset||Lm.focusNode!==_m.node||Lm.focusOffset!==_m.offset)){var Um=wm.createRange();Um.setStart(Rm.node,Rm.offset),Lm.removeAllRanges(),gg>Yg?(Lm.addRange(Um),Lm.extend(_m.node,_m.offset)):(Um.setEnd(_m.node,_m.offset),Lm.addRange(Um))}}}}for(wm=[],Lm=Zp;Lm=Lm.parentNode;)Lm.nodeType===1&&wm.push({element:Lm,left:Lm.scrollLeft,top:Lm.scrollTop});for(typeof Zp.focus=="function"&&Zp.focus(),Zp=0;Zp<wm.length;Zp++){var v1=wm[Zp];v1.element.scrollLeft=v1.left,v1.element.scrollTop=v1.top}}wb=!!_3,b3=_3=null}finally{hv=ve,$o.p=D,re.T=f}}i.current=s,fy=2}}function ww(){if(fy===2){fy=0;var i=gx,s=y2,f=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||f){f=re.T,re.T=null;var D=$o.p;$o.p=2;var ve=hv;hv|=4;try{mg(i,s.alternate,s)}finally{hv=ve,$o.p=D,re.T=f}}fy=3}}function d3(){if(fy===4||fy===3){fy=0,Ko();var i=gx,s=y2,f=Ox,D=o3;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?fy=5:(fy=0,y2=gx=null,Ew(i,i.pendingLanes));var ve=i.pendingLanes;if(ve===0&&(Ex=null),gy(f),s=s.stateNode,Cm&&typeof Cm.onCommitFiberRoot=="function")try{Cm.onCommitFiberRoot(om,s,void 0,(s.current.flags&128)===128)}catch{}if(D!==null){s=re.T,ve=$o.p,$o.p=2,re.T=null;try{for(var ft=i.onRecoverableError,Ci=0;Ci<D.length;Ci++){var Zp=D[Ci];ft(Zp.value,{componentStack:Zp.stack})}}finally{re.T=s,$o.p=ve}}(Ox&3)!==0&&tb(),Sx(i),ve=i.pendingLanes,(f&261930)!==0&&(ve&42)!==0?i===s3?F2++:(F2=0,s3=i):F2=0,y_(0)}}function Ew(i,s){(i.pooledCacheLanes&=s)===0&&(s=i.pooledCache,s!=null&&(i.pooledCache=null,r_(s)))}function tb(){return bw(),ww(),d3(),Sw()}function Sw(){if(fy!==5)return!1;var i=gx,s=a3;a3=0;var f=gy(Ox),D=re.T,ve=$o.p;try{$o.p=32>f?32:f,re.T=null,f=i3,i3=null;var ft=gx,Ci=Ox;if(fy=0,y2=gx=null,Ox=0,(hv&6)!==0)throw Error(n(331));var Zp=hv;if(hv|=4,dy(ft.current),ny(ft,ft.current,Ci,f),hv=Zp,y_(0,!1),Cm&&typeof Cm.onPostCommitFiberRoot=="function")try{Cm.onPostCommitFiberRoot(om,ft)}catch{}return!0}finally{$o.p=ve,re.T=D,Ew(i,s)}}function Tw(i,s,f){s=sx(f,s),s=vm(i.stateNode,s,2),i=mx(i,s,2),i!==null&&(Sv(i,2),Sx(i))}function qv(i,s,f){if(i.tag===3)Tw(i,i,f);else for(;s!==null;){if(s.tag===3){Tw(s,i,f);break}else if(s.tag===1){var D=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof D.componentDidCatch=="function"&&(Ex===null||!Ex.has(D))){i=sx(f,i),f=km(2),D=mx(s,f,2),D!==null&&(Yo(f,D,s,i),Sv(D,2),Sx(D));break}}s=s.return}}function rb(i,s,f){var D=i.pingCache;if(D===null){D=i.pingCache=new $y;var ve=new Set;D.set(s,ve)}else ve=D.get(s),ve===void 0&&(ve=new Set,D.set(s,ve));ve.has(f)||(xx=!0,ve.add(f),i=g5.bind(null,i,s,f),s.then(i,i))}function g5(i,s,f){var D=i.pingCache;D!==null&&D.delete(s),i.pingedLanes|=i.suspendedLanes&f,i.warmLanes&=~f,Dg===i&&(zg&f)===f&&(sy===4||sy===3&&(zg&62914560)===zg&&300>wi()-f_?(hv&2)===0&&z2(i,0):O2|=f,bx===zg&&(bx=0)),Sx(i)}function Mw(i,s){s===0&&(s=uv()),i=s2(i,s),i!==null&&(Sv(i,s),Sx(i))}function v5(i){var s=i.memoizedState,f=0;s!==null&&(f=s.retryLane),Mw(i,f)}function g_(i,s){var f=0;switch(i.tag){case 31:case 13:var D=i.stateNode,ve=i.memoizedState;ve!==null&&(f=ve.retryLane);break;case 19:D=i.stateNode;break;case 22:D=i.stateNode._retryCache;break;default:throw Error(n(314))}D!==null&&D.delete(s),Mw(i,f)}function v_(i,s){return W1(i,s)}var tx=null,B2=null,f3=!1,nb=!1,p3=!1,Px=0;function Sx(i){i!==B2&&i.next===null&&(B2===null?tx=B2=i:B2=B2.next=i),nb=!0,f3||(f3=!0,x5())}function y_(i,s){if(!p3&&nb){p3=!0;do for(var f=!1,D=tx;D!==null;){if(i!==0){var ve=D.pendingLanes;if(ve===0)var ft=0;else{var Ci=D.suspendedLanes,Zp=D.pingedLanes;ft=(1<<31-Om(42|i)+1)-1,ft&=ve&~(Ci&~Zp),ft=ft&201326741?ft&201326741|1:ft?ft|2:0}ft!==0&&(f=!0,ib(D,ft))}else ft=zg,ft=Km(D,D===Dg?ft:0,D.cancelPendingCommit!==null||D.timeoutHandle!==-1),(ft&3)===0||A1(D,ft)||(f=!0,ib(D,ft));D=D.next}while(f);p3=!1}}function y5(){Aw()}function Aw(){nb=f3=!1;var i=0;Px!==0&&Iw()&&(i=Px);for(var s=wi(),f=null,D=tx;D!==null;){var ve=D.next,ft=Cw(D,s);ft===0?(D.next=null,f===null?tx=ve:f.next=ve,ve===null&&(B2=f)):(f=D,(i!==0||(ft&3)!==0)&&(nb=!0)),D=ve}fy!==0&&fy!==5||y_(i),Px!==0&&(Px=0)}function Cw(i,s){for(var f=i.suspendedLanes,D=i.pingedLanes,ve=i.expirationTimes,ft=i.pendingLanes&-62914561;0<ft;){var Ci=31-Om(ft),Zp=1<<Ci,K0=ve[Ci];K0===-1?((Zp&f)===0||(Zp&D)!==0)&&(ve[Ci]=y1(Zp,s)):K0<=s&&(i.expiredLanes|=Zp),ft&=~Zp}if(s=Dg,f=zg,f=Km(i,i===s?f:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),D=i.callbackNode,f===0||i===s&&(av===2||av===9)||i.cancelPendingCommit!==null)return D!==null&&D!==null&&ug(D),i.callbackNode=null,i.callbackPriority=0;if((f&3)===0||A1(i,f)){if(s=f&-f,s===i.callbackPriority)return s;switch(D!==null&&ug(D),gy(f)){case 2:case 8:f=Pp;break;case 32:f=Ip;break;case 268435456:f=B0;break;default:f=Ip}return D=ab.bind(null,i),f=W1(f,D),i.callbackPriority=s,i.callbackNode=f,s}return D!==null&&D!==null&&ug(D),i.callbackPriority=2,i.callbackNode=null,2}function ab(i,s){if(fy!==0&&fy!==5)return i.callbackNode=null,i.callbackPriority=0,null;var f=i.callbackNode;if(tb()&&i.callbackNode!==f)return null;var D=zg;return D=Km(i,i===Dg?D:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),D===0?null:(pw(i,D,s),Cw(i,wi()),i.callbackNode!=null&&i.callbackNode===f?ab.bind(null,i):null)}function ib(i,s){if(tb())return null;pw(i,s,!0)}function x5(){jw(function(){(hv&6)!==0?W1(Z0,y5):Aw()})}function m3(){if(Px===0){var i=M2;i===0&&(i=S1,S1<<=1,(S1&261888)===0&&(S1=256)),Px=i}return Px}function Dw(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Kp(""+i)}function Rw(i,s){var f=s.ownerDocument.createElement("input");return f.name=s.name,f.value=s.value,i.id&&f.setAttribute("form",i.id),s.parentNode.insertBefore(f,s),i=new FormData(i),f.parentNode.removeChild(f),i}function Nw(i,s,f,D,ve){if(s==="submit"&&f&&f.stateNode===ve){var ft=Dw((ve[wg]||null).action),Ci=D.submitter;Ci&&(s=(s=Ci[wg]||null)?Dw(s.formAction):Ci.getAttribute("formAction"),s!==null&&(ft=s,Ci=null));var Zp=new Z1("action","action",null,D,ve);i.push({event:Zp,listeners:[{instance:null,listener:function(){if(D.defaultPrevented){if(Px!==0){var K0=Ci?Rw(ve,Ci):new FormData(ve);Z(f,{pending:!0,data:K0,method:ve.method,action:ft},null,K0)}}else typeof ft=="function"&&(Zp.preventDefault(),K0=Ci?Rw(ve,Ci):new FormData(ve),Z(f,{pending:!0,data:K0,method:ve.method,action:ft},ft,K0))},currentTarget:ve}]})}}for(var g3=0;g3<kb.length;g3++){var v3=kb[g3],y3=v3.toLowerCase(),Lw=v3[0].toUpperCase()+v3.slice(1);ox(y3,"on"+Lw)}ox(G3,"onAnimationEnd"),ox($3,"onAnimationIteration"),ox(W3,"onAnimationStart"),ox("dblclick","onDoubleClick"),ox("focusin","onFocus"),ox("focusout","onBlur"),ox(a5,"onTransitionRun"),ox(i5,"onTransitionStart"),ox(o5,"onTransitionCancel"),ox(Lb,"onTransitionEnd"),D1("onMouseEnter",["mouseout","mouseover"]),D1("onMouseLeave",["mouseout","mouseover"]),D1("onPointerEnter",["pointerout","pointerover"]),D1("onPointerLeave",["pointerout","pointerover"]),Vm("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Vm("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Vm("onBeforeInput",["compositionend","keypress","textInput","paste"]),Vm("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Vm("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Vm("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var j2="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(j2));function Ow(i,s){s=(s&4)!==0;for(var f=0;f<i.length;f++){var D=i[f],ve=D.event;D=D.listeners;e:{var ft=void 0;if(s)for(var Ci=D.length-1;0<=Ci;Ci--){var Zp=D[Ci],K0=Zp.instance,Pm=Zp.currentTarget;if(Zp=Zp.listener,K0!==ft&&ve.isPropagationStopped())break e;ft=Zp,ve.currentTarget=Pm;try{ft(ve)}catch(Xm){F_(Xm)}ve.currentTarget=null,ft=K0}else for(Ci=0;Ci<D.length;Ci++){if(Zp=D[Ci],K0=Zp.instance,Pm=Zp.currentTarget,Zp=Zp.listener,K0!==ft&&ve.isPropagationStopped())break e;ft=Zp,ve.currentTarget=Pm;try{ft(ve)}catch(Xm){F_(Xm)}ve.currentTarget=null,ft=K0}}}}function Ev(i,s){var f=s[Pv];f===void 0&&(f=s[Pv]=new Set);var D=i+"__bubble";f.has(D)||(lb(s,i,2,!1),f.add(D))}function ob(i,s,f){var D=0;s&&(D|=4),lb(f,i,D,s)}var x_="_reactListening"+Math.random().toString(36).slice(2);function sb(i){if(!i[x_]){i[x_]=!0,Gm.forEach(function(f){f!=="selectionchange"&&(kw.has(f)||ob(f,!1,i),ob(f,!0,i))});var s=i.nodeType===9?i:i.ownerDocument;s===null||s[x_]||(s[x_]=!0,ob("selectionchange",!1,s))}}function lb(i,s,f,D){switch(e5(s)){case 2:var ve=z3;break;case 8:ve=Eb;break;default:ve=Sb}f=ve.bind(null,s,f,i),ve=void 0,!h1||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(ve=!0),D?ve!==void 0?i.addEventListener(s,f,{capture:!0,passive:ve}):i.addEventListener(s,f,!0):ve!==void 0?i.addEventListener(s,f,{passive:ve}):i.addEventListener(s,f,!1)}function __(i,s,f,D,ve){var ft=D;if((s&1)===0&&(s&2)===0&&D!==null)e:for(;;){if(D===null)return;var Ci=D.tag;if(Ci===3||Ci===4){var Zp=D.stateNode.containerInfo;if(Zp===ve)break;if(Ci===4)for(Ci=D.return;Ci!==null;){var K0=Ci.tag;if((K0===3||K0===4)&&Ci.stateNode.containerInfo===ve)return;Ci=Ci.return}for(;Zp!==null;){if(Ci=a0(Zp),Ci===null)return;if(K0=Ci.tag,K0===5||K0===6||K0===26||K0===27){D=ft=Ci;continue e}Zp=Zp.parentNode}}D=D.return}q0(function(){var Pm=ft,Xm=E0(f),wm=[];e:{var Am=q3.get(i);if(Am!==void 0){var Lm=Z1,X1=i;switch(i){case"keypress":if(Hm(f)===0)break e;case"keydown":case"keyup":Lm=Dv;break;case"focusin":X1="focus",Lm=vv;break;case"focusout":X1="blur",Lm=vv;break;case"beforeblur":case"afterblur":Lm=vv;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Lm=xg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Lm=_g;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Lm=Ue;break;case G3:case $3:case W3:Lm=Uv;break;case Lb:Lm=bt;break;case"scroll":case"scrollend":Lm=ag;break;case"wheel":Lm=G0;break;case"copy":case"cut":case"paste":Lm=ay;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Lm=Zv;break;case"toggle":case"beforetoggle":Lm=Ym}var gg=(s&4)!==0,Yg=!gg&&(i==="scroll"||i==="scrollend"),Rm=gg?Am!==null?Am+"Capture":null:Am;gg=[];for(var _m=Pm,Um;_m!==null;){var v1=_m;if(Um=v1.stateNode,v1=v1.tag,v1!==5&&v1!==26&&v1!==27||Um===null||Rm===null||(v1=Bm(_m,Rm),v1!=null&&gg.push(b_(_m,v1,Um))),Yg)break;_m=_m.return}0<gg.length&&(Am=new Lm(Am,X1,null,f,Xm),wm.push({event:Am,listeners:gg}))}}if((s&7)===0){e:{if(Am=i==="mouseover"||i==="pointerover",Lm=i==="mouseout"||i==="pointerout",Am&&f!==D0&&(X1=f.relatedTarget||f.fromElement)&&(a0(X1)||X1[Lv]))break e;if((Lm||Am)&&(Am=Xm.window===Xm?Xm:(Am=Xm.ownerDocument)?Am.defaultView||Am.parentWindow:window,Lm?(X1=f.relatedTarget||f.toElement,Lm=Pm,X1=X1?a0(X1):null,X1!==null&&(Yg=o(X1),gg=X1.tag,X1!==Yg||gg!==5&&gg!==27&&gg!==6)&&(X1=null)):(Lm=null,X1=Pm),Lm!==X1)){if(gg=xg,v1="onMouseLeave",Rm="onMouseEnter",_m="mouse",(i==="pointerout"||i==="pointerover")&&(gg=Zv,v1="onPointerLeave",Rm="onPointerEnter",_m="pointer"),Yg=Lm==null?Am:nm(Lm),Um=X1==null?Am:nm(X1),Am=new gg(v1,_m+"leave",Lm,f,Xm),Am.target=Yg,Am.relatedTarget=Um,v1=null,a0(Xm)===Pm&&(gg=new gg(Rm,_m+"enter",X1,f,Xm),gg.target=Um,gg.relatedTarget=Yg,v1=gg),Yg=v1,Lm&&X1)t:{for(gg=_5,Rm=Lm,_m=X1,Um=0,v1=Rm;v1;v1=gg(v1))Um++;v1=0;for(var Tg=_m;Tg;Tg=gg(Tg))v1++;for(;0<Um-v1;)Rm=gg(Rm),Um--;for(;0<v1-Um;)_m=gg(_m),v1--;for(;Um--;){if(Rm===_m||_m!==null&&Rm===_m.alternate){gg=Rm;break t}Rm=gg(Rm),_m=gg(_m)}gg=null}else gg=null;Lm!==null&&Pw(wm,Am,Lm,gg,!1),X1!==null&&Yg!==null&&Pw(wm,Yg,X1,gg,!0)}}e:{if(Am=Pm?nm(Pm):window,Lm=Am.nodeName&&Am.nodeName.toLowerCase(),Lm==="select"||Lm==="input"&&Am.type==="file")var Zg=gv;else if(Gg(Am))if(ky)Zg=k_;else{Zg=r5;var yg=B3}else Lm=Am.nodeName,!Lm||Lm.toLowerCase()!=="input"||Am.type!=="checkbox"&&Am.type!=="radio"?Pm&&Dp(Pm.elementType)&&(Zg=gv):Zg=n5;if(Zg&&(Zg=Zg(i,Pm))){Rv(wm,Zg,f,Xm);break e}yg&&yg(i,Am,Pm),i==="focusout"&&Pm&&Am.type==="number"&&Pm.memoizedProps.value!=null&&Pt(Am,"number",Am.value)}switch(yg=Pm?nm(Pm):window,i){case"focusin":(Gg(yg)||yg.contentEditable==="true")&&(Ix=yg,O_=Pm,Z2=null);break;case"focusout":Z2=O_=Ix=null;break;case"mousedown":Db=!0;break;case"contextmenu":case"mouseup":case"dragend":Db=!1,Rb(wm,f,Xm);break;case"selectionchange":if(Cb)break;case"keydown":case"keyup":Rb(wm,f,Xm)}var iv;if(V1)e:{switch(i){case"compositionstart":var Av="onCompositionStart";break e;case"compositionend":Av="onCompositionEnd";break e;case"compositionupdate":Av="onCompositionUpdate";break e}Av=void 0}else Fg?ly(i,f)&&(Av="onCompositionEnd"):i==="keydown"&&f.keyCode===229&&(Av="onCompositionStart");Av&&(qg&&f.locale!=="ko"&&(Fg||Av!=="onCompositionStart"?Av==="onCompositionEnd"&&Fg&&(iv=j1()):(M1=Xm,L1="value"in M1?M1.value:M1.textContent,Fg=!0)),yg=ub(Pm,Av),0<yg.length&&(Av=new yy(Av,i,null,f,Xm),wm.push({event:Av,listeners:yg}),iv?Av.data=iv:(iv=bv(f),iv!==null&&(Av.data=iv)))),(iv=Zm?kv(i,f):Jg(i,f))&&(Av=ub(Pm,"onBeforeInput"),0<Av.length&&(yg=new yy("onBeforeInput","beforeinput",null,f,Xm),wm.push({event:yg,listeners:Av}),yg.data=iv)),Nw(wm,i,Pm,f,Xm)}Ow(wm,s)})}function b_(i,s,f){return{instance:i,listener:s,currentTarget:f}}function ub(i,s){for(var f=s+"Capture",D=[];i!==null;){var ve=i,ft=ve.stateNode;if(ve=ve.tag,ve!==5&&ve!==26&&ve!==27||ft===null||(ve=Bm(i,f),ve!=null&&D.unshift(b_(i,ve,ft)),ve=Bm(i,s),ve!=null&&D.push(b_(i,ve,ft))),i.tag===3)return D;i=i.return}return[]}function _5(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function Pw(i,s,f,D,ve){for(var ft=s._reactName,Ci=[];f!==null&&f!==D;){var Zp=f,K0=Zp.alternate,Pm=Zp.stateNode;if(Zp=Zp.tag,K0!==null&&K0===D)break;Zp!==5&&Zp!==26&&Zp!==27||Pm===null||(K0=Pm,ve?(Pm=Bm(f,ft),Pm!=null&&Ci.unshift(b_(f,Pm,K0))):ve||(Pm=Bm(f,ft),Pm!=null&&Ci.push(b_(f,Pm,K0)))),f=f.return}Ci.length!==0&&i.push({event:s,listeners:Ci})}var b5=/\r\n?/g,Fw=/\u0000|\uFFFD/g;function x3(i){return(typeof i=="string"?i:""+i).replace(b5,`
`).replace(Fw,"")}function cb(i,s){return s=x3(s),x3(i)===s}function Xv(i,s,f,D,ve,ft){switch(f){case"children":typeof D=="string"?s==="body"||s==="textarea"&&D===""||Er(i,D):(typeof D=="number"||typeof D=="bigint")&&s!=="body"&&Er(i,""+D);break;case"className":Ag(i,"class",D);break;case"tabIndex":Ag(i,"tabindex",D);break;case"dir":case"role":case"viewBox":case"width":case"height":Ag(i,f,D);break;case"style":la(i,D,ft);break;case"data":if(s!=="object"){Ag(i,"data",D);break}case"src":case"href":if(D===""&&(s!=="a"||f!=="href")){i.removeAttribute(f);break}if(D==null||typeof D=="function"||typeof D=="symbol"||typeof D=="boolean"){i.removeAttribute(f);break}D=Kp(""+D),i.setAttribute(f,D);break;case"action":case"formAction":if(typeof D=="function"){i.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof ft=="function"&&(f==="formAction"?(s!=="input"&&Xv(i,s,"name",ve.name,ve,null),Xv(i,s,"formEncType",ve.formEncType,ve,null),Xv(i,s,"formMethod",ve.formMethod,ve,null),Xv(i,s,"formTarget",ve.formTarget,ve,null)):(Xv(i,s,"encType",ve.encType,ve,null),Xv(i,s,"method",ve.method,ve,null),Xv(i,s,"target",ve.target,ve,null)));if(D==null||typeof D=="symbol"||typeof D=="boolean"){i.removeAttribute(f);break}D=Kp(""+D),i.setAttribute(f,D);break;case"onClick":D!=null&&(i.onclick=r0);break;case"onScroll":D!=null&&Ev("scroll",i);break;case"onScrollEnd":D!=null&&Ev("scrollend",i);break;case"dangerouslySetInnerHTML":if(D!=null){if(typeof D!="object"||!("__html"in D))throw Error(n(61));if(f=D.__html,f!=null){if(ve.children!=null)throw Error(n(60));i.innerHTML=f}}break;case"multiple":i.multiple=D&&typeof D!="function"&&typeof D!="symbol";break;case"muted":i.muted=D&&typeof D!="function"&&typeof D!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(D==null||typeof D=="function"||typeof D=="boolean"||typeof D=="symbol"){i.removeAttribute("xlink:href");break}f=Kp(""+D),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":D!=null&&typeof D!="function"&&typeof D!="symbol"?i.setAttribute(f,""+D):i.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":D&&typeof D!="function"&&typeof D!="symbol"?i.setAttribute(f,""):i.removeAttribute(f);break;case"capture":case"download":D===!0?i.setAttribute(f,""):D!==!1&&D!=null&&typeof D!="function"&&typeof D!="symbol"?i.setAttribute(f,D):i.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":D!=null&&typeof D!="function"&&typeof D!="symbol"&&!isNaN(D)&&1<=D?i.setAttribute(f,D):i.removeAttribute(f);break;case"rowSpan":case"start":D==null||typeof D=="function"||typeof D=="symbol"||isNaN(D)?i.removeAttribute(f):i.setAttribute(f,D);break;case"popover":Ev("beforetoggle",i),Ev("toggle",i),cg(i,"popover",D);break;case"xlinkActuate":K1(i,"http://www.w3.org/1999/xlink","xlink:actuate",D);break;case"xlinkArcrole":K1(i,"http://www.w3.org/1999/xlink","xlink:arcrole",D);break;case"xlinkRole":K1(i,"http://www.w3.org/1999/xlink","xlink:role",D);break;case"xlinkShow":K1(i,"http://www.w3.org/1999/xlink","xlink:show",D);break;case"xlinkTitle":K1(i,"http://www.w3.org/1999/xlink","xlink:title",D);break;case"xlinkType":K1(i,"http://www.w3.org/1999/xlink","xlink:type",D);break;case"xmlBase":K1(i,"http://www.w3.org/XML/1998/namespace","xml:base",D);break;case"xmlLang":K1(i,"http://www.w3.org/XML/1998/namespace","xml:lang",D);break;case"xmlSpace":K1(i,"http://www.w3.org/XML/1998/namespace","xml:space",D);break;case"is":cg(i,"is",D);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=wp.get(f)||f,cg(i,f,D))}}function V2(i,s,f,D,ve,ft){switch(f){case"style":la(i,D,ft);break;case"dangerouslySetInnerHTML":if(D!=null){if(typeof D!="object"||!("__html"in D))throw Error(n(61));if(f=D.__html,f!=null){if(ve.children!=null)throw Error(n(60));i.innerHTML=f}}break;case"children":typeof D=="string"?Er(i,D):(typeof D=="number"||typeof D=="bigint")&&Er(i,""+D);break;case"onScroll":D!=null&&Ev("scroll",i);break;case"onScrollEnd":D!=null&&Ev("scrollend",i);break;case"onClick":D!=null&&(i.onclick=r0);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Fm.hasOwnProperty(f))e:{if(f[0]==="o"&&f[1]==="n"&&(ve=f.endsWith("Capture"),s=f.slice(2,ve?f.length-7:void 0),ft=i[wg]||null,ft=ft!=null?ft[f]:null,typeof ft=="function"&&i.removeEventListener(s,ft,ve),typeof D=="function")){typeof ft!="function"&&ft!==null&&(f in i?i[f]=null:i.hasAttribute(f)&&i.removeAttribute(f)),i.addEventListener(s,D,ve);break e}f in i?i[f]=D:D===!0?i.setAttribute(f,""):cg(i,f,D)}}}function Ry(i,s,f){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ev("error",i),Ev("load",i);var D=!1,ve=!1,ft;for(ft in f)if(f.hasOwnProperty(ft)){var Ci=f[ft];if(Ci!=null)switch(ft){case"src":D=!0;break;case"srcSet":ve=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,s));default:Xv(i,s,ft,Ci,f,null)}}ve&&Xv(i,s,"srcSet",f.srcSet,f,null),D&&Xv(i,s,"src",f.src,f,null);return;case"input":Ev("invalid",i);var Zp=ft=Ci=ve=null,K0=null,Pm=null;for(D in f)if(f.hasOwnProperty(D)){var Xm=f[D];if(Xm!=null)switch(D){case"name":ve=Xm;break;case"type":Ci=Xm;break;case"checked":K0=Xm;break;case"defaultChecked":Pm=Xm;break;case"value":ft=Xm;break;case"defaultValue":Zp=Xm;break;case"children":case"dangerouslySetInnerHTML":if(Xm!=null)throw Error(n(137,s));break;default:Xv(i,s,D,Xm,f,null)}}lt(i,ft,Zp,K0,Pm,Ci,ve,!1);return;case"select":Ev("invalid",i),D=Ci=ft=null;for(ve in f)if(f.hasOwnProperty(ve)&&(Zp=f[ve],Zp!=null))switch(ve){case"value":ft=Zp;break;case"defaultValue":Ci=Zp;break;case"multiple":D=Zp;default:Xv(i,s,ve,Zp,f,null)}s=ft,f=Ci,i.multiple=!!D,s!=null?Ht(i,!!D,s,!1):f!=null&&Ht(i,!!D,f,!0);return;case"textarea":Ev("invalid",i),ft=ve=D=null;for(Ci in f)if(f.hasOwnProperty(Ci)&&(Zp=f[Ci],Zp!=null))switch(Ci){case"value":D=Zp;break;case"defaultValue":ve=Zp;break;case"children":ft=Zp;break;case"dangerouslySetInnerHTML":if(Zp!=null)throw Error(n(91));break;default:Xv(i,s,Ci,Zp,f,null)}Zt(i,D,ve,ft);return;case"option":for(K0 in f)if(f.hasOwnProperty(K0)&&(D=f[K0],D!=null))switch(K0){case"selected":i.selected=D&&typeof D!="function"&&typeof D!="symbol";break;default:Xv(i,s,K0,D,f,null)}return;case"dialog":Ev("beforetoggle",i),Ev("toggle",i),Ev("cancel",i),Ev("close",i);break;case"iframe":case"object":Ev("load",i);break;case"video":case"audio":for(D=0;D<j2.length;D++)Ev(j2[D],i);break;case"image":Ev("error",i),Ev("load",i);break;case"details":Ev("toggle",i);break;case"embed":case"source":case"link":Ev("error",i),Ev("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Pm in f)if(f.hasOwnProperty(Pm)&&(D=f[Pm],D!=null))switch(Pm){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,s));default:Xv(i,s,Pm,D,f,null)}return;default:if(Dp(s)){for(Xm in f)f.hasOwnProperty(Xm)&&(D=f[Xm],D!==void 0&&V2(i,s,Xm,D,f,void 0));return}}for(Zp in f)f.hasOwnProperty(Zp)&&(D=f[Zp],D!=null&&Xv(i,s,Zp,D,f,null))}function w5(i,s,f,D){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var ve=null,ft=null,Ci=null,Zp=null,K0=null,Pm=null,Xm=null;for(Lm in f){var wm=f[Lm];if(f.hasOwnProperty(Lm)&&wm!=null)switch(Lm){case"checked":break;case"value":break;case"defaultValue":K0=wm;default:D.hasOwnProperty(Lm)||Xv(i,s,Lm,null,D,wm)}}for(var Am in D){var Lm=D[Am];if(wm=f[Am],D.hasOwnProperty(Am)&&(Lm!=null||wm!=null))switch(Am){case"type":ft=Lm;break;case"name":ve=Lm;break;case"checked":Pm=Lm;break;case"defaultChecked":Xm=Lm;break;case"value":Ci=Lm;break;case"defaultValue":Zp=Lm;break;case"children":case"dangerouslySetInnerHTML":if(Lm!=null)throw Error(n(137,s));break;default:Lm!==wm&&Xv(i,s,Am,Lm,D,wm)}}Rt(i,Ci,Zp,K0,Pm,Xm,ft,ve);return;case"select":Lm=Ci=Zp=Am=null;for(ft in f)if(K0=f[ft],f.hasOwnProperty(ft)&&K0!=null)switch(ft){case"value":break;case"multiple":Lm=K0;default:D.hasOwnProperty(ft)||Xv(i,s,ft,null,D,K0)}for(ve in D)if(ft=D[ve],K0=f[ve],D.hasOwnProperty(ve)&&(ft!=null||K0!=null))switch(ve){case"value":Am=ft;break;case"defaultValue":Zp=ft;break;case"multiple":Ci=ft;default:ft!==K0&&Xv(i,s,ve,ft,D,K0)}s=Zp,f=Ci,D=Lm,Am!=null?Ht(i,!!f,Am,!1):!!D!=!!f&&(s!=null?Ht(i,!!f,s,!0):Ht(i,!!f,f?[]:"",!1));return;case"textarea":Lm=Am=null;for(Zp in f)if(ve=f[Zp],f.hasOwnProperty(Zp)&&ve!=null&&!D.hasOwnProperty(Zp))switch(Zp){case"value":break;case"children":break;default:Xv(i,s,Zp,null,D,ve)}for(Ci in D)if(ve=D[Ci],ft=f[Ci],D.hasOwnProperty(Ci)&&(ve!=null||ft!=null))switch(Ci){case"value":Am=ve;break;case"defaultValue":Lm=ve;break;case"children":break;case"dangerouslySetInnerHTML":if(ve!=null)throw Error(n(91));break;default:ve!==ft&&Xv(i,s,Ci,ve,D,ft)}Dt(i,Am,Lm);return;case"option":for(var X1 in f)if(Am=f[X1],f.hasOwnProperty(X1)&&Am!=null&&!D.hasOwnProperty(X1))switch(X1){case"selected":i.selected=!1;break;default:Xv(i,s,X1,null,D,Am)}for(K0 in D)if(Am=D[K0],Lm=f[K0],D.hasOwnProperty(K0)&&Am!==Lm&&(Am!=null||Lm!=null))switch(K0){case"selected":i.selected=Am&&typeof Am!="function"&&typeof Am!="symbol";break;default:Xv(i,s,K0,Am,D,Lm)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var gg in f)Am=f[gg],f.hasOwnProperty(gg)&&Am!=null&&!D.hasOwnProperty(gg)&&Xv(i,s,gg,null,D,Am);for(Pm in D)if(Am=D[Pm],Lm=f[Pm],D.hasOwnProperty(Pm)&&Am!==Lm&&(Am!=null||Lm!=null))switch(Pm){case"children":case"dangerouslySetInnerHTML":if(Am!=null)throw Error(n(137,s));break;default:Xv(i,s,Pm,Am,D,Lm)}return;default:if(Dp(s)){for(var Yg in f)Am=f[Yg],f.hasOwnProperty(Yg)&&Am!==void 0&&!D.hasOwnProperty(Yg)&&V2(i,s,Yg,void 0,D,Am);for(Xm in D)Am=D[Xm],Lm=f[Xm],!D.hasOwnProperty(Xm)||Am===Lm||Am===void 0&&Lm===void 0||V2(i,s,Xm,Am,D,Lm);return}}for(var Rm in f)Am=f[Rm],f.hasOwnProperty(Rm)&&Am!=null&&!D.hasOwnProperty(Rm)&&Xv(i,s,Rm,null,D,Am);for(wm in D)Am=D[wm],Lm=f[wm],!D.hasOwnProperty(wm)||Am===Lm||Am==null&&Lm==null||Xv(i,s,wm,Am,D,Lm)}function hb(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function zw(){if(typeof performance.getEntriesByType=="function"){for(var i=0,s=0,f=performance.getEntriesByType("resource"),D=0;D<f.length;D++){var ve=f[D],ft=ve.transferSize,Ci=ve.initiatorType,Zp=ve.duration;if(ft&&Zp&&hb(Ci)){for(Ci=0,Zp=ve.responseEnd,D+=1;D<f.length;D++){var K0=f[D],Pm=K0.startTime;if(Pm>Zp)break;var Xm=K0.transferSize,wm=K0.initiatorType;Xm&&hb(wm)&&(K0=K0.responseEnd,Ci+=Xm*(K0<Zp?1:(Zp-Pm)/(K0-Pm)))}if(--D,s+=8*(ft+Ci)/(ve.duration/1e3),i++,10<i)break}}if(0<i)return s/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var _3=null,b3=null;function w_(i){return i.nodeType===9?i:i.ownerDocument}function w3(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function E3(i,s){if(i===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&s==="foreignObject"?0:i}function E_(i,s){return i==="textarea"||i==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var S_=null;function Iw(){var i=window.event;return i&&i.type==="popstate"?i===S_?!1:(S_=i,!0):(S_=null,!1)}var Uw=typeof setTimeout=="function"?setTimeout:void 0,Bw=typeof clearTimeout=="function"?clearTimeout:void 0,T_=typeof Promise=="function"?Promise:void 0,jw=typeof queueMicrotask=="function"?queueMicrotask:typeof T_<"u"?function(i){return T_.resolve(null).then(i).catch(E5)}:Uw;function E5(i){setTimeout(function(){throw i})}function Yx(i){return i==="head"}function Vw(i,s){var f=s,D=0;do{var ve=f.nextSibling;if(i.removeChild(f),ve&&ve.nodeType===8)if(f=ve.data,f==="/$"||f==="/&"){if(D===0){i.removeChild(ve),z0(s);return}D--}else if(f==="$"||f==="$?"||f==="$~"||f==="$!"||f==="&")D++;else if(f==="html")Zx(i.ownerDocument.documentElement);else if(f==="head"){f=i.ownerDocument.head,Zx(f);for(var ft=f.firstChild;ft;){var Ci=ft.nextSibling,Zp=ft.nodeName;ft[t0]||Zp==="SCRIPT"||Zp==="STYLE"||Zp==="LINK"&&ft.rel.toLowerCase()==="stylesheet"||f.removeChild(ft),ft=Ci}}else f==="body"&&Zx(i.ownerDocument.body);f=ve}while(f);z0(s)}function Hw(i,s){var f=i;i=0;do{var D=f.nextSibling;if(f.nodeType===1?s?(f._stashedDisplay=f.style.display,f.style.display="none"):(f.style.display=f._stashedDisplay||"",f.getAttribute("style")===""&&f.removeAttribute("style")):f.nodeType===3&&(s?(f._stashedText=f.nodeValue,f.nodeValue=""):f.nodeValue=f._stashedText||""),D&&D.nodeType===8)if(f=D.data,f==="/$"){if(i===0)break;i--}else f!=="$"&&f!=="$?"&&f!=="$~"&&f!=="$!"||i++;f=D}while(f)}function db(i){var s=i.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var f=s;switch(s=s.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":db(f),oa(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}i.removeChild(f)}}function Gw(i,s,f,D){for(;i.nodeType===1;){var ve=f;if(i.nodeName.toLowerCase()!==s.toLowerCase()){if(!D&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(D){if(!i[t0])switch(s){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(ft=i.getAttribute("rel"),ft==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(ft!==ve.rel||i.getAttribute("href")!==(ve.href==null||ve.href===""?null:ve.href)||i.getAttribute("crossorigin")!==(ve.crossOrigin==null?null:ve.crossOrigin)||i.getAttribute("title")!==(ve.title==null?null:ve.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(ft=i.getAttribute("src"),(ft!==(ve.src==null?null:ve.src)||i.getAttribute("type")!==(ve.type==null?null:ve.type)||i.getAttribute("crossorigin")!==(ve.crossOrigin==null?null:ve.crossOrigin))&&ft&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(s==="input"&&i.type==="hidden"){var ft=ve.name==null?null:""+ve.name;if(ve.type==="hidden"&&i.getAttribute("name")===ft)return i}else return i;if(i=dx(i.nextSibling),i===null)break}return null}function $w(i,s,f){if(s==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!f||(i=dx(i.nextSibling),i===null))return null;return i}function S3(i,s){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!s||(i=dx(i.nextSibling),i===null))return null;return i}function T3(i){return i.data==="$?"||i.data==="$~"}function H2(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function S5(i,s){var f=i.ownerDocument;if(i.data==="$~")i._reactRetry=s;else if(i.data!=="$?"||f.readyState!=="loading")s();else{var D=function(){s(),f.removeEventListener("DOMContentLoaded",D)};f.addEventListener("DOMContentLoaded",D),i._reactRetry=D}}function dx(i){for(;i!=null;i=i.nextSibling){var s=i.nodeType;if(s===1||s===3)break;if(s===8){if(s=i.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return i}var fb=null;function M3(i){i=i.nextSibling;for(var s=0;i;){if(i.nodeType===8){var f=i.data;if(f==="/$"||f==="/&"){if(s===0)return dx(i.nextSibling);s--}else f!=="$"&&f!=="$!"&&f!=="$?"&&f!=="$~"&&f!=="&"||s++}i=i.nextSibling}return null}function Ww(i){i=i.previousSibling;for(var s=0;i;){if(i.nodeType===8){var f=i.data;if(f==="$"||f==="$!"||f==="$?"||f==="$~"||f==="&"){if(s===0)return i;s--}else f!=="/$"&&f!=="/&"||s++}i=i.previousSibling}return null}function M_(i,s,f){switch(s=w_(f),i){case"html":if(i=s.documentElement,!i)throw Error(n(452));return i;case"head":if(i=s.head,!i)throw Error(n(453));return i;case"body":if(i=s.body,!i)throw Error(n(454));return i;default:throw Error(n(451))}}function Zx(i){for(var s=i.attributes;s.length;)i.removeAttributeNode(s[0]);oa(i)}var rx=new Map,A3=new Set;function G2(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Py=$o.d;$o.d={f:qw,r:T5,D:M5,C:A5,L:C5,m:mb,X:Xw,S:C3,M:D5};function qw(){var i=Py.f(),s=K_();return i||s}function T5(i){var s=m0(i);s!==null&&s.tag===5&&s.type==="form"?ot(s):Py.r(i)}var Jx=typeof document>"u"?null:document;function pb(i,s,f){var D=Jx;if(D&&typeof s=="string"&&s){var ve=ne(s);ve='link[rel="'+i+'"][href="'+ve+'"]',typeof f=="string"&&(ve+='[crossorigin="'+f+'"]'),A3.has(ve)||(A3.add(ve),i={rel:i,crossOrigin:f,href:s},D.querySelector(ve)===null&&(s=D.createElement("link"),Ry(s,"link",i),cm(s),D.head.appendChild(s)))}}function M5(i){Py.D(i),pb("dns-prefetch",i,null)}function A5(i,s){Py.C(i,s),pb("preconnect",i,s)}function C5(i,s,f){Py.L(i,s,f);var D=Jx;if(D&&i&&s){var ve='link[rel="preload"][as="'+ne(s)+'"]';s==="image"&&f&&f.imageSrcSet?(ve+='[imagesrcset="'+ne(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(ve+='[imagesizes="'+ne(f.imageSizes)+'"]')):ve+='[href="'+ne(i)+'"]';var ft=ve;switch(s){case"style":ft=$2(i);break;case"script":ft=nx(i)}rx.has(ft)||(i=g({rel:"preload",href:s==="image"&&f&&f.imageSrcSet?void 0:i,as:s},f),rx.set(ft,i),D.querySelector(ve)!==null||s==="style"&&D.querySelector(Gy(ft))||s==="script"&&D.querySelector(x2(ft))||(s=D.createElement("link"),Ry(s,"link",i),cm(s),D.head.appendChild(s)))}}function mb(i,s){Py.m(i,s);var f=Jx;if(f&&i){var D=s&&typeof s.as=="string"?s.as:"script",ve='link[rel="modulepreload"][as="'+ne(D)+'"][href="'+ne(i)+'"]',ft=ve;switch(D){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":ft=nx(i)}if(!rx.has(ft)&&(i=g({rel:"modulepreload",href:i},s),rx.set(ft,i),f.querySelector(ve)===null)){switch(D){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(x2(ft)))return}D=f.createElement("link"),Ry(D,"link",i),cm(D),f.head.appendChild(D)}}}function C3(i,s,f){Py.S(i,s,f);var D=Jx;if(D&&i){var ve=L0(D).hoistableStyles,ft=$2(i);s=s||"default";var Ci=ve.get(ft);if(!Ci){var Zp={loading:0,preload:null};if(Ci=D.querySelector(Gy(ft)))Zp.loading=5;else{i=g({rel:"stylesheet",href:i,"data-precedence":s},f),(f=rx.get(ft))&&R3(i,f);var K0=Ci=D.createElement("link");cm(K0),Ry(K0,"link",i),K0._p=new Promise(function(Pm,Xm){K0.onload=Pm,K0.onerror=Xm}),K0.addEventListener("load",function(){Zp.loading|=1}),K0.addEventListener("error",function(){Zp.loading|=2}),Zp.loading|=4,vb(Ci,s,D)}Ci={type:"stylesheet",instance:Ci,count:1,state:Zp},ve.set(ft,Ci)}}}function Xw(i,s){Py.X(i,s);var f=Jx;if(f&&i){var D=L0(f).hoistableScripts,ve=nx(i),ft=D.get(ve);ft||(ft=f.querySelector(x2(ve)),ft||(i=g({src:i,async:!0},s),(s=rx.get(ve))&&N3(i,s),ft=f.createElement("script"),cm(ft),Ry(ft,"link",i),f.head.appendChild(ft)),ft={type:"script",instance:ft,count:1,state:null},D.set(ve,ft))}}function D5(i,s){Py.M(i,s);var f=Jx;if(f&&i){var D=L0(f).hoistableScripts,ve=nx(i),ft=D.get(ve);ft||(ft=f.querySelector(x2(ve)),ft||(i=g({src:i,async:!0,type:"module"},s),(s=rx.get(ve))&&N3(i,s),ft=f.createElement("script"),cm(ft),Ry(ft,"link",i),f.head.appendChild(ft)),ft={type:"script",instance:ft,count:1,state:null},D.set(ve,ft))}}function Yw(i,s,f,D){var ve=(ve=f0.current)?G2(ve):null;if(!ve)throw Error(n(446));switch(i){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(s=$2(f.href),f=L0(ve).hoistableStyles,D=f.get(s),D||(D={type:"style",instance:null,count:0,state:null},f.set(s,D)),D):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){i=$2(f.href);var ft=L0(ve).hoistableStyles,Ci=ft.get(i);if(Ci||(ve=ve.ownerDocument||ve,Ci={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},ft.set(i,Ci),(ft=ve.querySelector(Gy(i)))&&!ft._p&&(Ci.instance=ft,Ci.state.loading=5),rx.has(i)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},rx.set(i,f),ft||Zw(ve,i,f,Ci.state))),s&&D===null)throw Error(n(528,""));return Ci}if(s&&D!==null)throw Error(n(529,""));return null;case"script":return s=f.async,f=f.src,typeof f=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=nx(f),f=L0(ve).hoistableScripts,D=f.get(s),D||(D={type:"script",instance:null,count:0,state:null},f.set(s,D)),D):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,i))}}function $2(i){return'href="'+ne(i)+'"'}function Gy(i){return'link[rel="stylesheet"]['+i+"]"}function D3(i){return g({},i,{"data-precedence":i.precedence,precedence:null})}function Zw(i,s,f,D){i.querySelector('link[rel="preload"][as="style"]['+s+"]")?D.loading=1:(s=i.createElement("link"),D.preload=s,s.addEventListener("load",function(){return D.loading|=1}),s.addEventListener("error",function(){return D.loading|=2}),Ry(s,"link",f),cm(s),i.head.appendChild(s))}function nx(i){return'[src="'+ne(i)+'"]'}function x2(i){return"script[async]"+i}function gb(i,s,f){if(s.count++,s.instance===null)switch(s.type){case"style":var D=i.querySelector('style[data-href~="'+ne(f.href)+'"]');if(D)return s.instance=D,cm(D),D;var ve=g({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return D=(i.ownerDocument||i).createElement("style"),cm(D),Ry(D,"style",ve),vb(D,f.precedence,i),s.instance=D;case"stylesheet":ve=$2(f.href);var ft=i.querySelector(Gy(ve));if(ft)return s.state.loading|=4,s.instance=ft,cm(ft),ft;D=D3(f),(ve=rx.get(ve))&&R3(D,ve),ft=(i.ownerDocument||i).createElement("link"),cm(ft);var Ci=ft;return Ci._p=new Promise(function(Zp,K0){Ci.onload=Zp,Ci.onerror=K0}),Ry(ft,"link",D),s.state.loading|=4,vb(ft,f.precedence,i),s.instance=ft;case"script":return ft=nx(f.src),(ve=i.querySelector(x2(ft)))?(s.instance=ve,cm(ve),ve):(D=f,(ve=rx.get(ft))&&(D=g({},f),N3(D,ve)),i=i.ownerDocument||i,ve=i.createElement("script"),cm(ve),Ry(ve,"link",D),i.head.appendChild(ve),s.instance=ve);case"void":return null;default:throw Error(n(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(D=s.instance,s.state.loading|=4,vb(D,f.precedence,i));return s.instance}function vb(i,s,f){for(var D=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),ve=D.length?D[D.length-1]:null,ft=ve,Ci=0;Ci<D.length;Ci++){var Zp=D[Ci];if(Zp.dataset.precedence===s)ft=Zp;else if(ft!==ve)break}ft?ft.parentNode.insertBefore(i,ft.nextSibling):(s=f.nodeType===9?f.head:f,s.insertBefore(i,s.firstChild))}function R3(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.title==null&&(i.title=s.title)}function N3(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.integrity==null&&(i.integrity=s.integrity)}var A_=null;function L3(i,s,f){if(A_===null){var D=new Map,ve=A_=new Map;ve.set(f,D)}else ve=A_,D=ve.get(f),D||(D=new Map,ve.set(f,D));if(D.has(i))return D;for(D.set(i,null),f=f.getElementsByTagName(i),ve=0;ve<f.length;ve++){var ft=f[ve];if(!(ft[t0]||ft[Cv]||i==="link"&&ft.getAttribute("rel")==="stylesheet")&&ft.namespaceURI!=="http://www.w3.org/2000/svg"){var Ci=ft.getAttribute(s)||"";Ci=i+Ci;var Zp=D.get(Ci);Zp?Zp.push(ft):D.set(Ci,[ft])}}return D}function k3(i,s,f){i=i.ownerDocument||i,i.head.insertBefore(f,s==="title"?i.querySelector("head > title"):null)}function Jw(i,s,f){if(f===1||s.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return i=s.disabled,typeof s.precedence=="string"&&i==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Kw(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function Qw(i,s,f,D){if(f.type==="stylesheet"&&(typeof D.media!="string"||matchMedia(D.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var ve=$2(D.href),ft=s.querySelector(Gy(ve));if(ft){s=ft._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(i.count++,i=yb.bind(i),s.then(i,i)),f.state.loading|=4,f.instance=ft,cm(ft);return}ft=s.ownerDocument||s,D=D3(D),(ve=rx.get(ve))&&R3(D,ve),ft=ft.createElement("link"),cm(ft);var Ci=ft;Ci._p=new Promise(function(Zp,K0){Ci.onload=Zp,Ci.onerror=K0}),Ry(ft,"link",D),f.instance=ft}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(f,s),(s=f.state.preload)&&(f.state.loading&3)===0&&(i.count++,f=yb.bind(i),s.addEventListener("load",f),s.addEventListener("error",f))}}var O3=0;function R5(i,s){return i.stylesheets&&i.count===0&&D_(i,i.stylesheets),0<i.count||0<i.imgCount?function(f){var D=setTimeout(function(){if(i.stylesheets&&D_(i,i.stylesheets),i.unsuspend){var ft=i.unsuspend;i.unsuspend=null,ft()}},6e4+s);0<i.imgBytes&&O3===0&&(O3=62500*zw());var ve=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&D_(i,i.stylesheets),i.unsuspend)){var ft=i.unsuspend;i.unsuspend=null,ft()}},(i.imgBytes>O3?50:800)+s);return i.unsuspend=f,function(){i.unsuspend=null,clearTimeout(D),clearTimeout(ve)}}:null}function yb(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)D_(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var C_=null;function D_(i,s){i.stylesheets=null,i.unsuspend!==null&&(i.count++,C_=new Map,s.forEach(xb,i),C_=null,yb.call(i))}function xb(i,s){if(!(s.state.loading&4)){var f=C_.get(i);if(f)var D=f.get(null);else{f=new Map,C_.set(i,f);for(var ve=i.querySelectorAll("link[data-precedence],style[data-precedence]"),ft=0;ft<ve.length;ft++){var Ci=ve[ft];(Ci.nodeName==="LINK"||Ci.getAttribute("media")!=="not all")&&(f.set(Ci.dataset.precedence,Ci),D=Ci)}D&&f.set(null,D)}ve=s.instance,Ci=ve.getAttribute("data-precedence"),ft=f.get(Ci)||D,ft===D&&f.set(null,ve),f.set(Ci,ve),this.count++,D=yb.bind(this),ve.addEventListener("load",D),ve.addEventListener("error",D),ft?ft.parentNode.insertBefore(ve,ft.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(ve,i.firstChild)),s.state.loading|=4}}var W2={$$typeof:V,Provider:null,Consumer:null,_currentValue:qo,_currentValue2:qo,_threadCount:0};function _b(i,s,f,D,ve,ft,Ci,Zp,K0){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=$g(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$g(0),this.hiddenUpdates=$g(null),this.identifierPrefix=D,this.onUncaughtError=ve,this.onCaughtError=ft,this.onRecoverableError=Ci,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=K0,this.incompleteTransitions=new Map}function P3(i,s,f,D,ve,ft,Ci,Zp,K0,Pm,Xm,wm){return i=new _b(i,s,f,Ci,K0,Pm,Xm,wm,Zp),s=1,ft===!0&&(s|=24),ft=Wy(3,null,null,s),i.current=ft,ft.stateNode=i,s=$b(),s.refCount++,i.pooledCache=s,s.refCount++,ft.memoizedState={element:D,isDehydrated:f,cache:s},Zb(ft),i}function q2(i){return i?(i=l2,i):l2}function Sy(i,s,f,D,ve,ft){ve=q2(ve),D.context===null?D.context=ve:D.pendingContext=ve,D=$x(s),D.payload={element:f},ft=ft===void 0?null:ft,ft!==null&&(D.callback=ft),f=mx(i,D,s),f!==null&&(Zy(f,i,s),g2(f,i,s))}function F3(i,s){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var f=i.retryLane;i.retryLane=f!==0&&f<s?f:s}}function Fx(i,s){F3(i,s),(i=i.alternate)&&F3(i,s)}function R_(i){if(i.tag===13||i.tag===31){var s=s2(i,67108864);s!==null&&Zy(s,i,67108864),Fx(i,67108864)}}function bb(i){if(i.tag===13||i.tag===31){var s=ex();s=Hv(s);var f=s2(i,s);f!==null&&Zy(f,i,s),Fx(i,s)}}var wb=!0;function z3(i,s,f,D){var ve=re.T;re.T=null;var ft=$o.p;try{$o.p=2,Sb(i,s,f,D)}finally{$o.p=ft,re.T=ve}}function Eb(i,s,f,D){var ve=re.T;re.T=null;var ft=$o.p;try{$o.p=8,Sb(i,s,f,D)}finally{$o.p=ft,re.T=ve}}function Sb(i,s,f,D){if(wb){var ve=I3(D);if(ve===null)__(i,s,D,Tb,f),Nt(i,D);else if(Fn(ve,i,s,f,D))D.stopPropagation();else if(Nt(i,D),s&4&&-1<Tt.indexOf(i)){for(;ve!==null;){var ft=m0(ve);if(ft!==null)switch(ft.tag){case 3:if(ft=ft.stateNode,ft.current.memoizedState.isDehydrated){var Ci=l1(ft.pendingLanes);if(Ci!==0){var Zp=ft;for(Zp.pendingLanes|=2,Zp.entangledLanes|=2;Ci;){var K0=1<<31-Om(Ci);Zp.entanglements[1]|=K0,Ci&=~K0}Sx(ft),(hv&6)===0&&(p_=wi()+500,y_(0))}}break;case 31:case 13:Zp=s2(ft,2),Zp!==null&&Zy(Zp,ft,2),K_(),Fx(ft,2)}if(ft=I3(D),ft===null&&__(i,s,D,Tb,f),ft===ve)break;ve=ft}ve!==null&&D.stopPropagation()}else __(i,s,D,null,f)}}function I3(i){return i=E0(i),U3(i)}var Tb=null;function U3(i){if(Tb=null,i=a0(i),i!==null){var s=o(i);if(s===null)i=null;else{var f=s.tag;if(f===13){if(i=l(s),i!==null)return i;i=null}else if(f===31){if(i=u(s),i!==null)return i;i=null}else if(f===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return Tb=i,null}function e5(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(S0()){case Z0:return 2;case Pp:return 8;case Ip:case x0:return 32;case B0:return 268435456;default:return 32}default:return 32}}var N_=!1,Kx=null,Qx=null,x=null,H=new Map,le=new Map,dt=[],Tt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Nt(i,s){switch(i){case"focusin":case"focusout":Kx=null;break;case"dragenter":case"dragleave":Qx=null;break;case"mouseover":case"mouseout":x=null;break;case"pointerover":case"pointerout":H.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":le.delete(s.pointerId)}}function ci(i,s,f,D,ve,ft){return i===null||i.nativeEvent!==ft?(i={blockedOn:s,domEventName:f,eventSystemFlags:D,nativeEvent:ft,targetContainers:[ve]},s!==null&&(s=m0(s),s!==null&&R_(s)),i):(i.eventSystemFlags|=D,s=i.targetContainers,ve!==null&&s.indexOf(ve)===-1&&s.push(ve),i)}function Fn(i,s,f,D,ve){switch(s){case"focusin":return Kx=ci(Kx,i,s,f,D,ve),!0;case"dragenter":return Qx=ci(Qx,i,s,f,D,ve),!0;case"mouseover":return x=ci(x,i,s,f,D,ve),!0;case"pointerover":var ft=ve.pointerId;return H.set(ft,ci(H.get(ft)||null,i,s,f,D,ve)),!0;case"gotpointercapture":return ft=ve.pointerId,le.set(ft,ci(le.get(ft)||null,i,s,f,D,ve)),!0}return!1}function zp(i){var s=a0(i.target);if(s!==null){var f=o(s);if(f!==null){if(s=f.tag,s===13){if(s=l(f),s!==null){i.blockedOn=s,Ty(i.priority,function(){bb(f)});return}}else if(s===31){if(s=u(f),s!==null){i.blockedOn=s,Ty(i.priority,function(){bb(f)});return}}else if(s===3&&f.stateNode.current.memoizedState.isDehydrated){i.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Yp(i){if(i.blockedOn!==null)return!1;for(var s=i.targetContainers;0<s.length;){var f=I3(i.nativeEvent);if(f===null){f=i.nativeEvent;var D=new f.constructor(f.type,f);D0=D,f.target.dispatchEvent(D),D0=null}else return s=m0(f),s!==null&&R_(s),i.blockedOn=f,!1;s.shift()}return!0}function Jp(i,s,f){Yp(i)&&f.delete(s)}function N0(){N_=!1,Kx!==null&&Yp(Kx)&&(Kx=null),Qx!==null&&Yp(Qx)&&(Qx=null),x!==null&&Yp(x)&&(x=null),H.forEach(Jp),le.forEach(Jp)}function P0(i,s){i.blockedOn===s&&(i.blockedOn=null,N_||(N_=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,N0)))}var dm=null;function Mm(i){dm!==i&&(dm=i,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){dm===i&&(dm=null);for(var s=0;s<i.length;s+=3){var f=i[s],D=i[s+1],ve=i[s+2];if(typeof D!="function"){if(U3(D||f)===null)continue;break}var ft=m0(f);ft!==null&&(i.splice(s,3),s-=3,Z(ft,{pending:!0,data:ve,method:f.method,action:D},D,ve))}}))}function z0(i){function s(K0){return P0(K0,i)}Kx!==null&&P0(Kx,i),Qx!==null&&P0(Qx,i),x!==null&&P0(x,i),H.forEach(s),le.forEach(s);for(var f=0;f<dt.length;f++){var D=dt[f];D.blockedOn===i&&(D.blockedOn=null)}for(;0<dt.length&&(f=dt[0],f.blockedOn===null);)zp(f),f.blockedOn===null&&dt.shift();if(f=(i.ownerDocument||i).$$reactFormReplay,f!=null)for(D=0;D<f.length;D+=3){var ve=f[D],ft=f[D+1],Ci=ve[wg]||null;if(typeof ft=="function")Ci||Mm(f);else if(Ci){var Zp=null;if(ft&&ft.hasAttribute("formAction")){if(ve=ft,Ci=ft[wg]||null)Zp=Ci.formAction;else if(U3(ve)!==null)continue}else Zp=Ci.action;typeof Zp=="function"?f[D+1]=Zp:(f.splice(D,3),D-=3),Mm(f)}}}function sm(){function i(ft){ft.canIntercept&&ft.info==="react-transition"&&ft.intercept({handler:function(){return new Promise(function(Ci){return ve=Ci})},focusReset:"manual",scroll:"manual"})}function s(){ve!==null&&(ve(),ve=null),D||setTimeout(f,20)}function f(){if(!D&&!navigation.transition){var ft=navigation.currentEntry;ft&&ft.url!=null&&navigation.navigate(ft.url,{state:ft.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var D=!1,ve=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(f,100),function(){D=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),ve!==null&&(ve(),ve=null)}}}function um(i){this._internalRoot=i}Sm.prototype.render=um.prototype.render=function(i){var s=this._internalRoot;if(s===null)throw Error(n(409));var f=s.current,D=ex();Sy(f,D,i,s,null,null)},Sm.prototype.unmount=um.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var s=i.containerInfo;Sy(i.current,2,null,i,null,null),K_(),s[Lv]=null}};function Sm(i){this._internalRoot=i}Sm.prototype.unstable_scheduleHydration=function(i){if(i){var s=Qv();i={blockedOn:null,target:i,priority:s};for(var f=0;f<dt.length&&s!==0&&s<dt[f].priority;f++);dt.splice(f,0,i),f===0&&zp(i)}};var Tm=e.version;if(Tm!=="19.2.0")throw Error(n(527,Tm,"19.2.0"));$o.findDOMNode=function(i){var s=i._reactInternals;if(s===void 0)throw typeof i.render=="function"?Error(n(188)):(i=Object.keys(i).join(","),Error(n(268,i)));return i=h(s),i=i!==null?v(i):null,i=i===null?null:i.stateNode,i};var fm={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:re,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_1.isDisabled&&_1.supportsFiber)try{om=_1.inject(fm),Cm=_1}catch{}}return reactDomClient_production.createRoot=function(i,s){if(!a(i))throw Error(n(299));var f=!1,D="",ve=W0,ft=gm,Ci=F0;return s!=null&&(s.unstable_strictMode===!0&&(f=!0),s.identifierPrefix!==void 0&&(D=s.identifierPrefix),s.onUncaughtError!==void 0&&(ve=s.onUncaughtError),s.onCaughtError!==void 0&&(ft=s.onCaughtError),s.onRecoverableError!==void 0&&(Ci=s.onRecoverableError)),s=P3(i,1,!1,null,null,f,D,null,ve,ft,Ci,sm),i[Lv]=s.current,sb(i),new um(s)},reactDomClient_production.hydrateRoot=function(i,s,f){if(!a(i))throw Error(n(299));var D=!1,ve="",ft=W0,Ci=gm,Zp=F0,K0=null;return f!=null&&(f.unstable_strictMode===!0&&(D=!0),f.identifierPrefix!==void 0&&(ve=f.identifierPrefix),f.onUncaughtError!==void 0&&(ft=f.onUncaughtError),f.onCaughtError!==void 0&&(Ci=f.onCaughtError),f.onRecoverableError!==void 0&&(Zp=f.onRecoverableError),f.formState!==void 0&&(K0=f.formState)),s=P3(i,1,!0,s,f??null,D,ve,K0,ft,Ci,Zp,sm),s.context=q2(null),f=s.current,D=ex(),D=Hv(D),ve=$x(D),ve.callback=null,mx(f,ve,D),f=D,s.current.lanes=f,Sv(s,f),Sx(s),i[Lv]=s.current,sb(i),new Sm(s)},reactDomClient_production.version="19.2.0",reactDomClient_production}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client.exports;hasRequiredClient=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),client.exports=requireReactDomClient_production(),client.exports}var clientExports=requireClient();const ReactDOM=getDefaultExportFromCjs(clientExports);/**
 * react-router v7.9.4
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var PopStateEventType="popstate";function createBrowserHistory(t={}){function e(n,a){let{pathname:o,search:l,hash:u}=n.location;return createLocation("",{pathname:o,search:l,hash:u},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:createPath(a)}return getUrlBasedHistory(e,r,null,t)}function invariant(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function warning(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function createKey(){return Math.random().toString(36).substring(2,10)}function getHistoryState(t,e){return{usr:t.state,key:t.key,idx:e}}function createLocation(t,e,r=null,n){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?parsePath(e):e,state:r,key:e&&e.key||n||createKey()}}function createPath({pathname:t="/",search:e="",hash:r=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function parsePath(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substring(r),t=t.substring(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substring(n),t=t.substring(0,n)),t&&(e.pathname=t)}return e}function getUrlBasedHistory(t,e,r,n={}){let{window:a=document.defaultView,v5Compat:o=!1}=n,l=a.history,u="POP",c=null,h=v();h==null&&(h=0,l.replaceState({...l.state,idx:h},""));function v(){return(l.state||{idx:null}).idx}function g(){u="POP";let J=v(),q=J==null?null:J-h;h=J,c&&c({action:u,location:k.location,delta:q})}function T(J,q){u="PUSH";let Se=createLocation(k.location,J,q);h=v()+1;let V=getHistoryState(Se,h),Y=k.createHref(Se);try{l.pushState(V,"",Y)}catch(ie){if(ie instanceof DOMException&&ie.name==="DataCloneError")throw ie;a.location.assign(Y)}o&&c&&c({action:u,location:k.location,delta:1})}function R(J,q){u="REPLACE";let Se=createLocation(k.location,J,q);h=v();let V=getHistoryState(Se,h),Y=k.createHref(Se);l.replaceState(V,"",Y),o&&c&&c({action:u,location:k.location,delta:0})}function W(J){return createBrowserURLImpl(J)}let k={get action(){return u},get location(){return t(a,l)},listen(J){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(PopStateEventType,g),c=J,()=>{a.removeEventListener(PopStateEventType,g),c=null}},createHref(J){return e(a,J)},createURL:W,encodeLocation(J){let q=W(J);return{pathname:q.pathname,search:q.search,hash:q.hash}},push:T,replace:R,go(J){return l.go(J)}};return k}function createBrowserURLImpl(t,e=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),invariant(r,"No window.location.(origin|href) available to create URL");let n=typeof t=="string"?t:createPath(t);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function matchRoutes(t,e,r="/"){return matchRoutesImpl(t,e,r,!1)}function matchRoutesImpl(t,e,r,n){let a=typeof e=="string"?parsePath(e):e,o=stripBasename(a.pathname||"/",r);if(o==null)return null;let l=flattenRoutes(t);rankRouteBranches(l);let u=null;for(let c=0;u==null&&c<l.length;++c){let h=decodePath(o);u=matchRouteBranch(l[c],h,n)}return u}function flattenRoutes(t,e=[],r=[],n="",a=!1){let o=(l,u,c=a,h)=>{let v={relativePath:h===void 0?l.path||"":h,caseSensitive:l.caseSensitive===!0,childrenIndex:u,route:l};if(v.relativePath.startsWith("/")){if(!v.relativePath.startsWith(n)&&c)return;invariant(v.relativePath.startsWith(n),`Absolute route path "${v.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),v.relativePath=v.relativePath.slice(n.length)}let g=joinPaths([n,v.relativePath]),T=r.concat(v);l.children&&l.children.length>0&&(invariant(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),flattenRoutes(l.children,e,T,g,c)),!(l.path==null&&!l.index)&&e.push({path:g,score:computeScore(g,l.index),routesMeta:T})};return t.forEach((l,u)=>{if(l.path===""||!l.path?.includes("?"))o(l,u);else for(let c of explodeOptionalSegments(l.path))o(l,u,!0,c)}),e}function explodeOptionalSegments(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,a=r.endsWith("?"),o=r.replace(/\?$/,"");if(n.length===0)return a?[o,""]:[o];let l=explodeOptionalSegments(n.join("/")),u=[];return u.push(...l.map(c=>c===""?o:[o,c].join("/"))),a&&u.push(...l),u.map(c=>t.startsWith("/")&&c===""?"/":c)}function rankRouteBranches(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:compareIndexes(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=t=>t==="*";function computeScore(t,e){let r=t.split("/"),n=r.length;return r.some(isSplat)&&(n+=splatPenalty),e&&(n+=indexRouteValue),r.filter(a=>!isSplat(a)).reduce((a,o)=>a+(paramRe.test(o)?dynamicSegmentValue:o===""?emptySegmentValue:staticSegmentValue),n)}function compareIndexes(t,e){return t.length===e.length&&t.slice(0,-1).every((n,a)=>n===e[a])?t[t.length-1]-e[e.length-1]:0}function matchRouteBranch(t,e,r=!1){let{routesMeta:n}=t,a={},o="/",l=[];for(let u=0;u<n.length;++u){let c=n[u],h=u===n.length-1,v=o==="/"?e:e.slice(o.length)||"/",g=matchPath({path:c.relativePath,caseSensitive:c.caseSensitive,end:h},v),T=c.route;if(!g&&h&&r&&!n[n.length-1].route.index&&(g=matchPath({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},v)),!g)return null;Object.assign(a,g.params),l.push({params:a,pathname:joinPaths([o,g.pathname]),pathnameBase:normalizePathname(joinPaths([o,g.pathnameBase])),route:T}),g.pathnameBase!=="/"&&(o=joinPaths([o,g.pathnameBase]))}return l}function matchPath(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=compilePath(t.path,t.caseSensitive,t.end),a=e.match(r);if(!a)return null;let o=a[0],l=o.replace(/(.)\/+$/,"$1"),u=a.slice(1);return{params:n.reduce((h,{paramName:v,isOptional:g},T)=>{if(v==="*"){let W=u[T]||"";l=o.slice(0,o.length-W.length).replace(/(.)\/+$/,"$1")}const R=u[T];return g&&!R?h[v]=void 0:h[v]=(R||"").replace(/%2F/g,"/"),h},{}),pathname:o,pathnameBase:l,pattern:t}}function compilePath(t,e=!1,r=!0){warning(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let n=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,c)=>(n.push({paramName:u,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(n.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),n]}function decodePath(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return warning(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function stripBasename(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function resolvePath(t,e="/"){let{pathname:r,search:n="",hash:a=""}=typeof t=="string"?parsePath(t):t;return{pathname:r?r.startsWith("/")?r:resolvePathname(r,e):e,search:normalizeSearch(n),hash:normalizeHash(a)}}function resolvePathname(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function getInvalidPathError(t,e,r,n){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function getPathContributingMatches(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function getResolveToMatches(t){let e=getPathContributingMatches(t);return e.map((r,n)=>n===e.length-1?r.pathname:r.pathnameBase)}function resolveTo(t,e,r,n=!1){let a;typeof t=="string"?a=parsePath(t):(a={...t},invariant(!a.pathname||!a.pathname.includes("?"),getInvalidPathError("?","pathname","search",a)),invariant(!a.pathname||!a.pathname.includes("#"),getInvalidPathError("#","pathname","hash",a)),invariant(!a.search||!a.search.includes("#"),getInvalidPathError("#","search","hash",a)));let o=t===""||a.pathname==="",l=o?"/":a.pathname,u;if(l==null)u=r;else{let g=e.length-1;if(!n&&l.startsWith("..")){let T=l.split("/");for(;T[0]==="..";)T.shift(),g-=1;a.pathname=T.join("/")}u=g>=0?e[g]:"/"}let c=resolvePath(a,u),h=l&&l!=="/"&&l.endsWith("/"),v=(o||l===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(h||v)&&(c.pathname+="/"),c}var joinPaths=t=>t.join("/").replace(/\/\/+/g,"/"),normalizePathname=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,normalizeHash=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function isRouteErrorResponse(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var validMutationMethodsArr=["POST","PUT","PATCH","DELETE"];new Set(validMutationMethodsArr);var validRequestMethodsArr=["GET",...validMutationMethodsArr];new Set(validRequestMethodsArr);var DataRouterContext=reactExports.createContext(null);DataRouterContext.displayName="DataRouter";var DataRouterStateContext=reactExports.createContext(null);DataRouterStateContext.displayName="DataRouterState";reactExports.createContext(!1);var ViewTransitionContext=reactExports.createContext({isTransitioning:!1});ViewTransitionContext.displayName="ViewTransition";var FetchersContext=reactExports.createContext(new Map);FetchersContext.displayName="Fetchers";var AwaitContext=reactExports.createContext(null);AwaitContext.displayName="Await";var NavigationContext=reactExports.createContext(null);NavigationContext.displayName="Navigation";var LocationContext=reactExports.createContext(null);LocationContext.displayName="Location";var RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1});RouteContext.displayName="Route";var RouteErrorContext=reactExports.createContext(null);RouteErrorContext.displayName="RouteError";function useHref(t,{relative:e}={}){invariant(useInRouterContext(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=reactExports.useContext(NavigationContext),{hash:a,pathname:o,search:l}=useResolvedPath(t,{relative:e}),u=o;return r!=="/"&&(u=o==="/"?r:joinPaths([r,o])),n.createHref({pathname:u,search:l,hash:a})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return invariant(useInRouterContext(),"useLocation() may be used only in the context of a <Router> component."),reactExports.useContext(LocationContext).location}var navigateEffectWarning="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function useIsomorphicLayoutEffect$1(t){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(t)}function useNavigate(){let{isDataRoute:t}=reactExports.useContext(RouteContext);return t?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){invariant(useInRouterContext(),"useNavigate() may be used only in the context of a <Router> component.");let t=reactExports.useContext(DataRouterContext),{basename:e,navigator:r}=reactExports.useContext(NavigationContext),{matches:n}=reactExports.useContext(RouteContext),{pathname:a}=useLocation(),o=JSON.stringify(getResolveToMatches(n)),l=reactExports.useRef(!1);return useIsomorphicLayoutEffect$1(()=>{l.current=!0}),reactExports.useCallback((c,h={})=>{if(warning(l.current,navigateEffectWarning),!l.current)return;if(typeof c=="number"){r.go(c);return}let v=resolveTo(c,JSON.parse(o),a,h.relative==="path");t==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:joinPaths([e,v.pathname])),(h.replace?r.replace:r.push)(v,h.state,h)},[e,r,o,a,t])}reactExports.createContext(null);function useResolvedPath(t,{relative:e}={}){let{matches:r}=reactExports.useContext(RouteContext),{pathname:n}=useLocation(),a=JSON.stringify(getResolveToMatches(r));return reactExports.useMemo(()=>resolveTo(t,JSON.parse(a),n,e==="path"),[t,a,n,e])}function useRoutesImpl(t,e,r,n,a){invariant(useInRouterContext(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=reactExports.useContext(NavigationContext),{matches:l}=reactExports.useContext(RouteContext),u=l[l.length-1],c=u?u.params:{},h=u?u.pathname:"/",v=u?u.pathnameBase:"/",g=u&&u.route;{let Se=g&&g.path||"";warningOnce(h,!g||Se.endsWith("*")||Se.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${Se}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${Se}"> to <Route path="${Se==="/"?"*":`${Se}/*`}">.`)}let T=useLocation(),R;R=T;let W=R.pathname||"/",k=W;if(v!=="/"){let Se=v.replace(/^\//,"").split("/");k="/"+W.replace(/^\//,"").split("/").slice(Se.length).join("/")}let J=matchRoutes(t,{pathname:k});return warning(g||J!=null,`No routes matched location "${R.pathname}${R.search}${R.hash}" `),warning(J==null||J[J.length-1].route.element!==void 0||J[J.length-1].route.Component!==void 0||J[J.length-1].route.lazy!==void 0,`Matched leaf route at location "${R.pathname}${R.search}${R.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),_renderMatches(J&&J.map(Se=>Object.assign({},Se,{params:Object.assign({},c,Se.params),pathname:joinPaths([v,o.encodeLocation?o.encodeLocation(Se.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:Se.pathname]),pathnameBase:Se.pathnameBase==="/"?v:joinPaths([v,o.encodeLocation?o.encodeLocation(Se.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:Se.pathnameBase])})),l,r,n,a)}function DefaultErrorComponent(){let t=useRouteError(),e=isRouteErrorResponse(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,n="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:n},o={padding:"2px 4px",backgroundColor:n},l=null;return console.error("Error handled by React Router default ErrorBoundary:",t),l=reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("p",null," Hey developer "),reactExports.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",reactExports.createElement("code",{style:o},"ErrorBoundary")," or"," ",reactExports.createElement("code",{style:o},"errorElement")," prop on your route.")),reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},e),r?reactExports.createElement("pre",{style:a},r):null,l)}var defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null),RenderErrorBoundary=class extends reactExports.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.unstable_onError?this.props.unstable_onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function RenderedRoute({routeContext:t,match:e,children:r}){let n=reactExports.useContext(DataRouterContext);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),reactExports.createElement(RouteContext.Provider,{value:t},r)}function _renderMatches(t,e=[],r=null,n=null,a=null){if(t==null){if(!r)return null;if(r.errors)t=r.matches;else if(e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let o=t,l=r?.errors;if(l!=null){let h=o.findIndex(v=>v.route.id&&l?.[v.route.id]!==void 0);invariant(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),o=o.slice(0,Math.min(o.length,h+1))}let u=!1,c=-1;if(r)for(let h=0;h<o.length;h++){let v=o[h];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(c=h),v.route.id){let{loaderData:g,errors:T}=r,R=v.route.loader&&!g.hasOwnProperty(v.route.id)&&(!T||T[v.route.id]===void 0);if(v.route.lazy||R){u=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((h,v,g)=>{let T,R=!1,W=null,k=null;r&&(T=l&&v.route.id?l[v.route.id]:void 0,W=v.route.errorElement||defaultErrorElement,u&&(c<0&&g===0?(warningOnce("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),R=!0,k=null):c===g&&(R=!0,k=v.route.hydrateFallbackElement||null)));let J=e.concat(o.slice(0,g+1)),q=()=>{let Se;return T?Se=W:R?Se=k:v.route.Component?Se=reactExports.createElement(v.route.Component,null):v.route.element?Se=v.route.element:Se=h,reactExports.createElement(RenderedRoute,{match:v,routeContext:{outlet:h,matches:J,isDataRoute:r!=null},children:Se})};return r&&(v.route.ErrorBoundary||v.route.errorElement||g===0)?reactExports.createElement(RenderErrorBoundary,{location:r.location,revalidation:r.revalidation,component:W,error:T,children:q(),routeContext:{outlet:null,matches:J,isDataRoute:!0},unstable_onError:n}):q()},null)}function getDataRouterConsoleError(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext(t){let e=reactExports.useContext(DataRouterContext);return invariant(e,getDataRouterConsoleError(t)),e}function useDataRouterState(t){let e=reactExports.useContext(DataRouterStateContext);return invariant(e,getDataRouterConsoleError(t)),e}function useRouteContext(t){let e=reactExports.useContext(RouteContext);return invariant(e,getDataRouterConsoleError(t)),e}function useCurrentRouteId(t){let e=useRouteContext(t),r=e.matches[e.matches.length-1];return invariant(r.route.id,`${t} can only be used on routes that contain a unique "id"`),r.route.id}function useRouteId(){return useCurrentRouteId("useRouteId")}function useRouteError(){let t=reactExports.useContext(RouteErrorContext),e=useDataRouterState("useRouteError"),r=useCurrentRouteId("useRouteError");return t!==void 0?t:e.errors?.[r]}function useNavigateStable(){let{router:t}=useDataRouterContext("useNavigate"),e=useCurrentRouteId("useNavigate"),r=reactExports.useRef(!1);return useIsomorphicLayoutEffect$1(()=>{r.current=!0}),reactExports.useCallback(async(a,o={})=>{warning(r.current,navigateEffectWarning),r.current&&(typeof a=="number"?t.navigate(a):await t.navigate(a,{fromRouteId:e,...o}))},[t,e])}var alreadyWarned={};function warningOnce(t,e,r){!e&&!alreadyWarned[t]&&(alreadyWarned[t]=!0,warning(!1,r))}reactExports.memo(DataRoutes);function DataRoutes({routes:t,future:e,state:r,unstable_onError:n}){return useRoutesImpl(t,void 0,r,n,e)}function Router({basename:t="/",children:e=null,location:r,navigationType:n="POP",navigator:a,static:o=!1}){invariant(!useInRouterContext(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=t.replace(/^\/*/,"/"),u=reactExports.useMemo(()=>({basename:l,navigator:a,static:o,future:{}}),[l,a,o]);typeof r=="string"&&(r=parsePath(r));let{pathname:c="/",search:h="",hash:v="",state:g=null,key:T="default"}=r,R=reactExports.useMemo(()=>{let W=stripBasename(c,l);return W==null?null:{location:{pathname:W,search:h,hash:v,state:g,key:T},navigationType:n}},[l,c,h,v,g,T,n]);return warning(R!=null,`<Router basename="${l}"> is not able to match the URL "${c}${h}${v}" because it does not start with the basename, so the <Router> won't render anything.`),R==null?null:reactExports.createElement(NavigationContext.Provider,{value:u},reactExports.createElement(LocationContext.Provider,{children:e,value:R}))}var defaultMethod="get",defaultEncType="application/x-www-form-urlencoded";function isHtmlElement(t){return t!=null&&typeof t.tagName=="string"}function isButtonElement(t){return isHtmlElement(t)&&t.tagName.toLowerCase()==="button"}function isFormElement(t){return isHtmlElement(t)&&t.tagName.toLowerCase()==="form"}function isInputElement(t){return isHtmlElement(t)&&t.tagName.toLowerCase()==="input"}function isModifiedEvent(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function shouldProcessLinkClick(t,e){return t.button===0&&(!e||e==="_self")&&!isModifiedEvent(t)}function createSearchParams(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,r)=>{let n=t[r];return e.concat(Array.isArray(n)?n.map(a=>[r,a]):[[r,n]])},[]))}function getSearchParamsForLocation(t,e){let r=createSearchParams(t);return e&&e.forEach((n,a)=>{r.has(a)||e.getAll(a).forEach(o=>{r.append(a,o)})}),r}var _formDataSupportsSubmitter=null;function isFormDataSubmitterSupported(){if(_formDataSupportsSubmitter===null)try{new FormData(document.createElement("form"),0),_formDataSupportsSubmitter=!1}catch{_formDataSupportsSubmitter=!0}return _formDataSupportsSubmitter}var supportedFormEncTypes=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function getFormEncType(t){return t!=null&&!supportedFormEncTypes.has(t)?(warning(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${defaultEncType}"`),null):t}function getFormSubmissionInfo(t,e){let r,n,a,o,l;if(isFormElement(t)){let u=t.getAttribute("action");n=u?stripBasename(u,e):null,r=t.getAttribute("method")||defaultMethod,a=getFormEncType(t.getAttribute("enctype"))||defaultEncType,o=new FormData(t)}else if(isButtonElement(t)||isInputElement(t)&&(t.type==="submit"||t.type==="image")){let u=t.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=t.getAttribute("formaction")||u.getAttribute("action");if(n=c?stripBasename(c,e):null,r=t.getAttribute("formmethod")||u.getAttribute("method")||defaultMethod,a=getFormEncType(t.getAttribute("formenctype"))||getFormEncType(u.getAttribute("enctype"))||defaultEncType,o=new FormData(u,t),!isFormDataSubmitterSupported()){let{name:h,type:v,value:g}=t;if(v==="image"){let T=h?`${h}.`:"";o.append(`${T}x`,"0"),o.append(`${T}y`,"0")}else h&&o.append(h,g)}}else{if(isHtmlElement(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=defaultMethod,n=null,a=defaultEncType,l=t}return o&&a==="text/plain"&&(l=o,o=void 0),{action:n,method:r.toLowerCase(),encType:a,formData:o,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function invariant2(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function singleFetchUrl(t,e,r){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname=`_root.${r}`:e&&stripBasename(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function loadRouteModule(t,e){if(t.id in e)return e[t.id];try{let r=await import(t.module);return e[t.id]=r,r}catch(r){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function isHtmlLinkDescriptor(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function getKeyedPrefetchLinks(t,e,r){let n=await Promise.all(t.map(async a=>{let o=e.routes[a.route.id];if(o){let l=await loadRouteModule(o,r);return l.links?l.links():[]}return[]}));return dedupeLinkDescriptors(n.flat(1).filter(isHtmlLinkDescriptor).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function getNewMatchesForLinks(t,e,r,n,a,o){let l=(c,h)=>r[h]?c.route.id!==r[h].route.id:!0,u=(c,h)=>r[h].pathname!==c.pathname||r[h].route.path?.endsWith("*")&&r[h].params["*"]!==c.params["*"];return o==="assets"?e.filter((c,h)=>l(c,h)||u(c,h)):o==="data"?e.filter((c,h)=>{let v=n.routes[c.route.id];if(!v||!v.hasLoader)return!1;if(l(c,h)||u(c,h))return!0;if(c.route.shouldRevalidate){let g=c.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function getModuleLinkHrefs(t,e,{includeHydrateFallback:r}={}){return dedupeHrefs(t.map(n=>{let a=e.routes[n.route.id];if(!a)return[];let o=[a.module];return a.clientActionModule&&(o=o.concat(a.clientActionModule)),a.clientLoaderModule&&(o=o.concat(a.clientLoaderModule)),r&&a.hydrateFallbackModule&&(o=o.concat(a.hydrateFallbackModule)),a.imports&&(o=o.concat(a.imports)),o}).flat(1))}function dedupeHrefs(t){return[...new Set(t)]}function sortKeys(t){let e={},r=Object.keys(t).sort();for(let n of r)e[n]=t[n];return e}function dedupeLinkDescriptors(t,e){let r=new Set;return new Set(e),t.reduce((n,a)=>{let o=JSON.stringify(sortKeys(a));return r.has(o)||(r.add(o),n.push({key:o,link:a})),n},[])}function useDataRouterContext2(){let t=reactExports.useContext(DataRouterContext);return invariant2(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function useDataRouterStateContext(){let t=reactExports.useContext(DataRouterStateContext);return invariant2(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var FrameworkContext=reactExports.createContext(void 0);FrameworkContext.displayName="FrameworkContext";function useFrameworkContext(){let t=reactExports.useContext(FrameworkContext);return invariant2(t,"You must render this element inside a <HydratedRouter> element"),t}function usePrefetchBehavior(t,e){let r=reactExports.useContext(FrameworkContext),[n,a]=reactExports.useState(!1),[o,l]=reactExports.useState(!1),{onFocus:u,onBlur:c,onMouseEnter:h,onMouseLeave:v,onTouchStart:g}=e,T=reactExports.useRef(null);reactExports.useEffect(()=>{if(t==="render"&&l(!0),t==="viewport"){let k=q=>{q.forEach(Se=>{l(Se.isIntersecting)})},J=new IntersectionObserver(k,{threshold:.5});return T.current&&J.observe(T.current),()=>{J.disconnect()}}},[t]),reactExports.useEffect(()=>{if(n){let k=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(k)}}},[n]);let R=()=>{a(!0)},W=()=>{a(!1),l(!1)};return r?t!=="intent"?[o,T,{}]:[o,T,{onFocus:composeEventHandlers(u,R),onBlur:composeEventHandlers(c,W),onMouseEnter:composeEventHandlers(h,R),onMouseLeave:composeEventHandlers(v,W),onTouchStart:composeEventHandlers(g,R)}]:[!1,T,{}]}function composeEventHandlers(t,e){return r=>{t&&t(r),r.defaultPrevented||e(r)}}function PrefetchPageLinks({page:t,...e}){let{router:r}=useDataRouterContext2(),n=reactExports.useMemo(()=>matchRoutes(r.routes,t,r.basename),[r.routes,t,r.basename]);return n?reactExports.createElement(PrefetchPageLinksImpl,{page:t,matches:n,...e}):null}function useKeyedPrefetchLinks(t){let{manifest:e,routeModules:r}=useFrameworkContext(),[n,a]=reactExports.useState([]);return reactExports.useEffect(()=>{let o=!1;return getKeyedPrefetchLinks(t,e,r).then(l=>{o||a(l)}),()=>{o=!0}},[t,e,r]),n}function PrefetchPageLinksImpl({page:t,matches:e,...r}){let n=useLocation(),{manifest:a,routeModules:o}=useFrameworkContext(),{basename:l}=useDataRouterContext2(),{loaderData:u,matches:c}=useDataRouterStateContext(),h=reactExports.useMemo(()=>getNewMatchesForLinks(t,e,c,a,n,"data"),[t,e,c,a,n]),v=reactExports.useMemo(()=>getNewMatchesForLinks(t,e,c,a,n,"assets"),[t,e,c,a,n]),g=reactExports.useMemo(()=>{if(t===n.pathname+n.search+n.hash)return[];let W=new Set,k=!1;if(e.forEach(q=>{let Se=a.routes[q.route.id];!Se||!Se.hasLoader||(!h.some(V=>V.route.id===q.route.id)&&q.route.id in u&&o[q.route.id]?.shouldRevalidate||Se.hasClientLoader?k=!0:W.add(q.route.id))}),W.size===0)return[];let J=singleFetchUrl(t,l,"data");return k&&W.size>0&&J.searchParams.set("_routes",e.filter(q=>W.has(q.route.id)).map(q=>q.route.id).join(",")),[J.pathname+J.search]},[l,u,n,a,h,e,t,o]),T=reactExports.useMemo(()=>getModuleLinkHrefs(v,a),[v,a]),R=useKeyedPrefetchLinks(v);return reactExports.createElement(reactExports.Fragment,null,g.map(W=>reactExports.createElement("link",{key:W,rel:"prefetch",as:"fetch",href:W,...r})),T.map(W=>reactExports.createElement("link",{key:W,rel:"modulepreload",href:W,...r})),R.map(({key:W,link:k})=>reactExports.createElement("link",{key:W,nonce:r.nonce,...k})))}function mergeRefs(...t){return e=>{t.forEach(r=>{typeof r=="function"?r(e):r!=null&&(r.current=e)})}}var isBrowser=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{isBrowser&&(window.__reactRouterVersion="7.9.4")}catch{}function BrowserRouter({basename:t,children:e,window:r}){let n=reactExports.useRef();n.current==null&&(n.current=createBrowserHistory({window:r,v5Compat:!0}));let a=n.current,[o,l]=reactExports.useState({action:a.action,location:a.location}),u=reactExports.useCallback(c=>{reactExports.startTransition(()=>l(c))},[l]);return reactExports.useLayoutEffect(()=>a.listen(u),[a,u]),reactExports.createElement(Router,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:a})}var ABSOLUTE_URL_REGEX2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link=reactExports.forwardRef(function({onClick:e,discover:r="render",prefetch:n="none",relative:a,reloadDocument:o,replace:l,state:u,target:c,to:h,preventScrollReset:v,viewTransition:g,...T},R){let{basename:W}=reactExports.useContext(NavigationContext),k=typeof h=="string"&&ABSOLUTE_URL_REGEX2.test(h),J,q=!1;if(typeof h=="string"&&k&&(J=h,isBrowser))try{let st=new URL(window.location.href),Ct=h.startsWith("//")?new URL(st.protocol+h):new URL(h),$t=stripBasename(Ct.pathname,W);Ct.origin===st.origin&&$t!=null?h=$t+Ct.search+Ct.hash:q=!0}catch{warning(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let Se=useHref(h,{relative:a}),[V,Y,ie]=usePrefetchBehavior(n,T),se=useLinkClickHandler(h,{replace:l,state:u,target:c,preventScrollReset:v,relative:a,viewTransition:g});function ct(st){e&&e(st),st.defaultPrevented||se(st)}let ae=reactExports.createElement("a",{...T,...ie,href:J||Se,onClick:q||o?e:ct,ref:mergeRefs(R,Y),target:c,"data-discover":!k&&r==="render"?"true":void 0});return V&&!k?reactExports.createElement(reactExports.Fragment,null,ae,reactExports.createElement(PrefetchPageLinks,{page:Se})):ae});Link.displayName="Link";var NavLink=reactExports.forwardRef(function({"aria-current":e="page",caseSensitive:r=!1,className:n="",end:a=!1,style:o,to:l,viewTransition:u,children:c,...h},v){let g=useResolvedPath(l,{relative:h.relative}),T=useLocation(),R=reactExports.useContext(DataRouterStateContext),{navigator:W,basename:k}=reactExports.useContext(NavigationContext),J=R!=null&&useViewTransitionState(g)&&u===!0,q=W.encodeLocation?W.encodeLocation(g).pathname:g.pathname,Se=T.pathname,V=R&&R.navigation&&R.navigation.location?R.navigation.location.pathname:null;r||(Se=Se.toLowerCase(),V=V?V.toLowerCase():null,q=q.toLowerCase()),V&&k&&(V=stripBasename(V,k)||V);const Y=q!=="/"&&q.endsWith("/")?q.length-1:q.length;let ie=Se===q||!a&&Se.startsWith(q)&&Se.charAt(Y)==="/",se=V!=null&&(V===q||!a&&V.startsWith(q)&&V.charAt(q.length)==="/"),ct={isActive:ie,isPending:se,isTransitioning:J},ae=ie?e:void 0,st;typeof n=="function"?st=n(ct):st=[n,ie?"active":null,se?"pending":null,J?"transitioning":null].filter(Boolean).join(" ");let Ct=typeof o=="function"?o(ct):o;return reactExports.createElement(Link,{...h,"aria-current":ae,className:st,ref:v,style:Ct,to:l,viewTransition:u},typeof c=="function"?c(ct):c)});NavLink.displayName="NavLink";var Form=reactExports.forwardRef(({discover:t="render",fetcherKey:e,navigate:r,reloadDocument:n,replace:a,state:o,method:l=defaultMethod,action:u,onSubmit:c,relative:h,preventScrollReset:v,viewTransition:g,...T},R)=>{let W=useSubmit(),k=useFormAction(u,{relative:h}),J=l.toLowerCase()==="get"?"get":"post",q=typeof u=="string"&&ABSOLUTE_URL_REGEX2.test(u),Se=V=>{if(c&&c(V),V.defaultPrevented)return;V.preventDefault();let Y=V.nativeEvent.submitter,ie=Y?.getAttribute("formmethod")||l;W(Y||V.currentTarget,{fetcherKey:e,method:ie,navigate:r,replace:a,state:o,relative:h,preventScrollReset:v,viewTransition:g})};return reactExports.createElement("form",{ref:R,method:J,action:k,onSubmit:n?c:Se,...T,"data-discover":!q&&t==="render"?"true":void 0})});Form.displayName="Form";function getDataRouterConsoleError2(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext3(t){let e=reactExports.useContext(DataRouterContext);return invariant(e,getDataRouterConsoleError2(t)),e}function useLinkClickHandler(t,{target:e,replace:r,state:n,preventScrollReset:a,relative:o,viewTransition:l}={}){let u=useNavigate(),c=useLocation(),h=useResolvedPath(t,{relative:o});return reactExports.useCallback(v=>{if(shouldProcessLinkClick(v,e)){v.preventDefault();let g=r!==void 0?r:createPath(c)===createPath(h);u(t,{replace:g,state:n,preventScrollReset:a,relative:o,viewTransition:l})}},[c,u,h,r,n,e,t,a,o,l])}function useSearchParams(t){warning(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=reactExports.useRef(createSearchParams(t)),r=reactExports.useRef(!1),n=useLocation(),a=reactExports.useMemo(()=>getSearchParamsForLocation(n.search,r.current?null:e.current),[n.search]),o=useNavigate(),l=reactExports.useCallback((u,c)=>{const h=createSearchParams(typeof u=="function"?u(new URLSearchParams(a)):u);r.current=!0,o("?"+h,c)},[o,a]);return[a,l]}var fetcherId=0,getUniqueFetcherId=()=>`__${String(++fetcherId)}__`;function useSubmit(){let{router:t}=useDataRouterContext3("useSubmit"),{basename:e}=reactExports.useContext(NavigationContext),r=useRouteId();return reactExports.useCallback(async(n,a={})=>{let{action:o,method:l,encType:u,formData:c,body:h}=getFormSubmissionInfo(n,e);if(a.navigate===!1){let v=a.fetcherKey||getUniqueFetcherId();await t.fetch(v,r,a.action||o,{preventScrollReset:a.preventScrollReset,formData:c,body:h,formMethod:a.method||l,formEncType:a.encType||u,flushSync:a.flushSync})}else await t.navigate(a.action||o,{preventScrollReset:a.preventScrollReset,formData:c,body:h,formMethod:a.method||l,formEncType:a.encType||u,replace:a.replace,state:a.state,fromRouteId:r,flushSync:a.flushSync,viewTransition:a.viewTransition})},[t,e,r])}function useFormAction(t,{relative:e}={}){let{basename:r}=reactExports.useContext(NavigationContext),n=reactExports.useContext(RouteContext);invariant(n,"useFormAction must be used inside a RouteContext");let[a]=n.matches.slice(-1),o={...useResolvedPath(t||".",{relative:e})},l=useLocation();if(t==null){o.search=l.search;let u=new URLSearchParams(o.search),c=u.getAll("index");if(c.some(v=>v==="")){u.delete("index"),c.filter(g=>g).forEach(g=>u.append("index",g));let v=u.toString();o.search=v?`?${v}`:""}}return(!t||t===".")&&a.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(o.pathname=o.pathname==="/"?r:joinPaths([r,o.pathname])),createPath(o)}function useViewTransitionState(t,{relative:e}={}){let r=reactExports.useContext(ViewTransitionContext);invariant(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=useDataRouterContext3("useViewTransitionState"),a=useResolvedPath(t,{relative:e});if(!r.isTransitioning)return!1;let o=stripBasename(r.currentLocation.pathname,n)||r.currentLocation.pathname,l=stripBasename(r.nextLocation.pathname,n)||r.nextLocation.pathname;return matchPath(a.pathname,l)!=null||matchPath(a.pathname,o)!=null}var reactDomExports=requireReactDom();const PanelGroupContext=reactExports.createContext(null);PanelGroupContext.displayName="PanelGroupContext";const DATA_ATTRIBUTES={group:"data-panel-group",groupDirection:"data-panel-group-direction",groupId:"data-panel-group-id",panel:"data-panel",panelCollapsible:"data-panel-collapsible",panelId:"data-panel-id",panelSize:"data-panel-size",resizeHandle:"data-resize-handle",resizeHandleActive:"data-resize-handle-active",resizeHandleEnabled:"data-panel-resize-handle-enabled",resizeHandleId:"data-panel-resize-handle-id",resizeHandleState:"data-resize-handle-state"},PRECISION=10,useIsomorphicLayoutEffect=reactExports.useLayoutEffect,useId=React$1.useId,wrappedUseId=typeof useId=="function"?useId:()=>null;let counter=0;function useUniqueId(t=null){const e=wrappedUseId(),r=reactExports.useRef(t||e||null);return r.current===null&&(r.current=""+counter++),t??r.current}function PanelWithForwardedRef({children:t,className:e="",collapsedSize:r,collapsible:n,defaultSize:a,forwardedRef:o,id:l,maxSize:u,minSize:c,onCollapse:h,onExpand:v,onResize:g,order:T,style:R,tagName:W="div",...k}){const J=reactExports.useContext(PanelGroupContext);if(J===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:q,expandPanel:Se,getPanelSize:V,getPanelStyle:Y,groupId:ie,isPanelCollapsed:se,reevaluatePanelConstraints:ct,registerPanel:ae,resizePanel:st,unregisterPanel:Ct}=J,$t=useUniqueId(l),jo=reactExports.useRef({callbacks:{onCollapse:h,onExpand:v,onResize:g},constraints:{collapsedSize:r,collapsible:n,defaultSize:a,maxSize:u,minSize:c},id:$t,idIsFromProps:l!==void 0,order:T});reactExports.useRef({didLogMissingDefaultSizeWarning:!1}),useIsomorphicLayoutEffect(()=>{const{callbacks:Mn,constraints:sa}=jo.current,re={...sa};jo.current.id=$t,jo.current.idIsFromProps=l!==void 0,jo.current.order=T,Mn.onCollapse=h,Mn.onExpand=v,Mn.onResize=g,sa.collapsedSize=r,sa.collapsible=n,sa.defaultSize=a,sa.maxSize=u,sa.minSize=c,(re.collapsedSize!==sa.collapsedSize||re.collapsible!==sa.collapsible||re.maxSize!==sa.maxSize||re.minSize!==sa.minSize)&&ct(jo.current,re)}),useIsomorphicLayoutEffect(()=>{const Mn=jo.current;return ae(Mn),()=>{Ct(Mn)}},[T,$t,ae,Ct]),reactExports.useImperativeHandle(o,()=>({collapse:()=>{q(jo.current)},expand:Mn=>{Se(jo.current,Mn)},getId(){return $t},getSize(){return V(jo.current)},isCollapsed(){return se(jo.current)},isExpanded(){return!se(jo.current)},resize:Mn=>{st(jo.current,Mn)}}),[q,Se,V,se,$t,st]);const Lp=Y(jo.current,a);return reactExports.createElement(W,{...k,children:t,className:e,id:$t,style:{...Lp,...R},[DATA_ATTRIBUTES.groupId]:ie,[DATA_ATTRIBUTES.panel]:"",[DATA_ATTRIBUTES.panelCollapsible]:n||void 0,[DATA_ATTRIBUTES.panelId]:$t,[DATA_ATTRIBUTES.panelSize]:parseFloat(""+Lp.flexGrow).toFixed(1)})}const Panel$1=reactExports.forwardRef((t,e)=>reactExports.createElement(PanelWithForwardedRef,{...t,forwardedRef:e}));PanelWithForwardedRef.displayName="Panel";Panel$1.displayName="forwardRef(Panel)";let currentCursorStyle=null,prevRuleIndex=-1,styleElement=null;function getCursorStyle(t,e,r){const n=(e&EXCEEDED_HORIZONTAL_MIN)!==0,a=(e&EXCEEDED_HORIZONTAL_MAX)!==0,o=(e&EXCEEDED_VERTICAL_MIN)!==0,l=(e&EXCEEDED_VERTICAL_MAX)!==0;if(e){if(n)return o?"se-resize":l?"ne-resize":"e-resize";if(a)return o?"sw-resize":l?"nw-resize":"w-resize";if(o)return"s-resize";if(l)return"n-resize"}switch(t){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}function resetGlobalCursorStyle(){styleElement!==null&&(document.head.removeChild(styleElement),currentCursorStyle=null,styleElement=null,prevRuleIndex=-1)}function setGlobalCursorStyle(t,e,r){var n,a;const o=getCursorStyle(t,e);if(currentCursorStyle!==o){if(currentCursorStyle=o,styleElement===null&&(styleElement=document.createElement("style"),document.head.appendChild(styleElement)),prevRuleIndex>=0){var l;(l=styleElement.sheet)===null||l===void 0||l.removeRule(prevRuleIndex)}prevRuleIndex=(n=(a=styleElement.sheet)===null||a===void 0?void 0:a.insertRule(`*{cursor: ${o} !important;}`))!==null&&n!==void 0?n:-1}}function isKeyDown(t){return t.type==="keydown"}function isPointerEvent(t){return t.type.startsWith("pointer")}function isMouseEvent$1(t){return t.type.startsWith("mouse")}function getResizeEventCoordinates(t){if(isPointerEvent(t)){if(t.isPrimary)return{x:t.clientX,y:t.clientY}}else if(isMouseEvent$1(t))return{x:t.clientX,y:t.clientY};return{x:1/0,y:1/0}}function getInputType(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}function intersects(t,e,r){return t.x<e.x+e.width&&t.x+t.width>e.x&&t.y<e.y+e.height&&t.y+t.height>e.y}function compare(t,e){if(t===e)throw new Error("Cannot compare node with itself");const r={a:get_ancestors(t),b:get_ancestors(e)};let n;for(;r.a.at(-1)===r.b.at(-1);)t=r.a.pop(),e=r.b.pop(),n=t;assert(n,"Stacking order can only be calculated for elements with a common ancestor");const a={a:get_z_index(find_stacking_context(r.a)),b:get_z_index(find_stacking_context(r.b))};if(a.a===a.b){const o=n.childNodes,l={a:r.a.at(-1),b:r.b.at(-1)};let u=o.length;for(;u--;){const c=o[u];if(c===l.a)return 1;if(c===l.b)return-1}}return Math.sign(a.a-a.b)}const props=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function is_flex_item(t){var e;const r=getComputedStyle((e=get_parent(t))!==null&&e!==void 0?e:t).display;return r==="flex"||r==="inline-flex"}function creates_stacking_context(t){const e=getComputedStyle(t);return!!(e.position==="fixed"||e.zIndex!=="auto"&&(e.position!=="static"||is_flex_item(t))||+e.opacity<1||"transform"in e&&e.transform!=="none"||"webkitTransform"in e&&e.webkitTransform!=="none"||"mixBlendMode"in e&&e.mixBlendMode!=="normal"||"filter"in e&&e.filter!=="none"||"webkitFilter"in e&&e.webkitFilter!=="none"||"isolation"in e&&e.isolation==="isolate"||props.test(e.willChange)||e.webkitOverflowScrolling==="touch")}function find_stacking_context(t){let e=t.length;for(;e--;){const r=t[e];if(assert(r,"Missing node"),creates_stacking_context(r))return r}return null}function get_z_index(t){return t&&Number(getComputedStyle(t).zIndex)||0}function get_ancestors(t){const e=[];for(;t;)e.push(t),t=get_parent(t);return e}function get_parent(t){const{parentNode:e}=t;return e&&e instanceof ShadowRoot?e.host:e}const EXCEEDED_HORIZONTAL_MIN=1,EXCEEDED_HORIZONTAL_MAX=2,EXCEEDED_VERTICAL_MIN=4,EXCEEDED_VERTICAL_MAX=8,isCoarsePointer=getInputType()==="coarse";let intersectingHandles=[],isPointerDown=!1,ownerDocumentCounts=new Map,panelConstraintFlags=new Map;const registeredResizeHandlers=new Set;function registerResizeHandle(t,e,r,n,a){var o;const{ownerDocument:l}=e,u={direction:r,element:e,hitAreaMargins:n,setResizeHandlerState:a},c=(o=ownerDocumentCounts.get(l))!==null&&o!==void 0?o:0;return ownerDocumentCounts.set(l,c+1),registeredResizeHandlers.add(u),updateListeners(),function(){var v;panelConstraintFlags.delete(t),registeredResizeHandlers.delete(u);const g=(v=ownerDocumentCounts.get(l))!==null&&v!==void 0?v:1;if(ownerDocumentCounts.set(l,g-1),updateListeners(),g===1&&ownerDocumentCounts.delete(l),intersectingHandles.includes(u)){const T=intersectingHandles.indexOf(u);T>=0&&intersectingHandles.splice(T,1),updateCursor(),a("up",!0,null)}}}function handlePointerDown$1(t){const{target:e}=t,{x:r,y:n}=getResizeEventCoordinates(t);isPointerDown=!0,recalculateIntersectingHandles({target:e,x:r,y:n}),updateListeners(),intersectingHandles.length>0&&(updateResizeHandlerStates("down",t),updateCursor(),t.preventDefault(),isWithinResizeHandle(e)||t.stopImmediatePropagation())}function handlePointerMove(t){const{x:e,y:r}=getResizeEventCoordinates(t);if(isPointerDown&&t.type!=="pointerleave"&&t.buttons===0&&(isPointerDown=!1,updateResizeHandlerStates("up",t)),!isPointerDown){const{target:n}=t;recalculateIntersectingHandles({target:n,x:e,y:r})}updateResizeHandlerStates("move",t),updateCursor(),intersectingHandles.length>0&&t.preventDefault()}function handlePointerUp(t){const{target:e}=t,{x:r,y:n}=getResizeEventCoordinates(t);panelConstraintFlags.clear(),isPointerDown=!1,intersectingHandles.length>0&&(t.preventDefault(),isWithinResizeHandle(e)||t.stopImmediatePropagation()),updateResizeHandlerStates("up",t),recalculateIntersectingHandles({target:e,x:r,y:n}),updateCursor(),updateListeners()}function isWithinResizeHandle(t){let e=t;for(;e;){if(e.hasAttribute(DATA_ATTRIBUTES.resizeHandle))return!0;e=e.parentElement}return!1}function recalculateIntersectingHandles({target:t,x:e,y:r}){intersectingHandles.splice(0);let n=null;(t instanceof HTMLElement||t instanceof SVGElement)&&(n=t),registeredResizeHandlers.forEach(a=>{const{element:o,hitAreaMargins:l}=a,u=o.getBoundingClientRect(),{bottom:c,left:h,right:v,top:g}=u,T=isCoarsePointer?l.coarse:l.fine;if(e>=h-T&&e<=v+T&&r>=g-T&&r<=c+T){if(n!==null&&document.contains(n)&&o!==n&&!o.contains(n)&&!n.contains(o)&&compare(n,o)>0){let W=n,k=!1;for(;W&&!W.contains(o);){if(intersects(W.getBoundingClientRect(),u)){k=!0;break}W=W.parentElement}if(k)return}intersectingHandles.push(a)}})}function reportConstraintsViolation(t,e){panelConstraintFlags.set(t,e)}function updateCursor(){let t=!1,e=!1;intersectingHandles.forEach(n=>{const{direction:a}=n;a==="horizontal"?t=!0:e=!0});let r=0;panelConstraintFlags.forEach(n=>{r|=n}),t&&e?setGlobalCursorStyle("intersection",r):t?setGlobalCursorStyle("horizontal",r):e?setGlobalCursorStyle("vertical",r):resetGlobalCursorStyle()}let listenersAbortController;function updateListeners(){var t;(t=listenersAbortController)===null||t===void 0||t.abort(),listenersAbortController=new AbortController;const e={capture:!0,signal:listenersAbortController.signal};registeredResizeHandlers.size&&(isPointerDown?(intersectingHandles.length>0&&ownerDocumentCounts.forEach((r,n)=>{const{body:a}=n;r>0&&(a.addEventListener("contextmenu",handlePointerUp,e),a.addEventListener("pointerleave",handlePointerMove,e),a.addEventListener("pointermove",handlePointerMove,e))}),ownerDocumentCounts.forEach((r,n)=>{const{body:a}=n;a.addEventListener("pointerup",handlePointerUp,e),a.addEventListener("pointercancel",handlePointerUp,e)})):ownerDocumentCounts.forEach((r,n)=>{const{body:a}=n;r>0&&(a.addEventListener("pointerdown",handlePointerDown$1,e),a.addEventListener("pointermove",handlePointerMove,e))}))}function updateResizeHandlerStates(t,e){registeredResizeHandlers.forEach(r=>{const{setResizeHandlerState:n}=r,a=intersectingHandles.includes(r);n(t,a,e)})}function useForceUpdate(){const[t,e]=reactExports.useState(0);return reactExports.useCallback(()=>e(r=>r+1),[])}function assert(t,e){if(!t)throw console.error(e),Error(e)}function fuzzyCompareNumbers(t,e,r=PRECISION){return t.toFixed(r)===e.toFixed(r)?0:t>e?1:-1}function fuzzyNumbersEqual$1(t,e,r=PRECISION){return fuzzyCompareNumbers(t,e,r)===0}function fuzzyNumbersEqual(t,e,r){return fuzzyCompareNumbers(t,e,r)===0}function fuzzyLayoutsEqual(t,e,r){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++){const a=t[n],o=e[n];if(!fuzzyNumbersEqual(a,o,r))return!1}return!0}function resizePanel({panelConstraints:t,panelIndex:e,size:r}){const n=t[e];assert(n!=null,`Panel constraints not found for index ${e}`);let{collapsedSize:a=0,collapsible:o,maxSize:l=100,minSize:u=0}=n;if(fuzzyCompareNumbers(r,u)<0)if(o){const c=(a+u)/2;fuzzyCompareNumbers(r,c)<0?r=a:r=u}else r=u;return r=Math.min(l,r),r=parseFloat(r.toFixed(PRECISION)),r}function adjustLayoutByDelta({delta:t,initialLayout:e,panelConstraints:r,pivotIndices:n,prevLayout:a,trigger:o}){if(fuzzyNumbersEqual(t,0))return e;const l=[...e],[u,c]=n;assert(u!=null,"Invalid first pivot index"),assert(c!=null,"Invalid second pivot index");let h=0;if(o==="keyboard"){{const g=t<0?c:u,T=r[g];assert(T,`Panel constraints not found for index ${g}`);const{collapsedSize:R=0,collapsible:W,minSize:k=0}=T;if(W){const J=e[g];if(assert(J!=null,`Previous layout not found for panel index ${g}`),fuzzyNumbersEqual(J,R)){const q=k-J;fuzzyCompareNumbers(q,Math.abs(t))>0&&(t=t<0?0-q:q)}}}{const g=t<0?u:c,T=r[g];assert(T,`No panel constraints found for index ${g}`);const{collapsedSize:R=0,collapsible:W,minSize:k=0}=T;if(W){const J=e[g];if(assert(J!=null,`Previous layout not found for panel index ${g}`),fuzzyNumbersEqual(J,k)){const q=J-R;fuzzyCompareNumbers(q,Math.abs(t))>0&&(t=t<0?0-q:q)}}}}{const g=t<0?1:-1;let T=t<0?c:u,R=0;for(;;){const k=e[T];assert(k!=null,`Previous layout not found for panel index ${T}`);const q=resizePanel({panelConstraints:r,panelIndex:T,size:100})-k;if(R+=q,T+=g,T<0||T>=r.length)break}const W=Math.min(Math.abs(t),Math.abs(R));t=t<0?0-W:W}{let T=t<0?u:c;for(;T>=0&&T<r.length;){const R=Math.abs(t)-Math.abs(h),W=e[T];assert(W!=null,`Previous layout not found for panel index ${T}`);const k=W-R,J=resizePanel({panelConstraints:r,panelIndex:T,size:k});if(!fuzzyNumbersEqual(W,J)&&(h+=W-J,l[T]=J,h.toFixed(3).localeCompare(Math.abs(t).toFixed(3),void 0,{numeric:!0})>=0))break;t<0?T--:T++}}if(fuzzyLayoutsEqual(a,l))return a;{const g=t<0?c:u,T=e[g];assert(T!=null,`Previous layout not found for panel index ${g}`);const R=T+h,W=resizePanel({panelConstraints:r,panelIndex:g,size:R});if(l[g]=W,!fuzzyNumbersEqual(W,R)){let k=R-W,q=t<0?c:u;for(;q>=0&&q<r.length;){const Se=l[q];assert(Se!=null,`Previous layout not found for panel index ${q}`);const V=Se+k,Y=resizePanel({panelConstraints:r,panelIndex:q,size:V});if(fuzzyNumbersEqual(Se,Y)||(k-=Y-Se,l[q]=Y),fuzzyNumbersEqual(k,0))break;t>0?q--:q++}}}const v=l.reduce((g,T)=>T+g,0);return fuzzyNumbersEqual(v,100)?l:a}function calculateAriaValues({layout:t,panelsArray:e,pivotIndices:r}){let n=0,a=100,o=0,l=0;const u=r[0];assert(u!=null,"No pivot index found"),e.forEach((g,T)=>{const{constraints:R}=g,{maxSize:W=100,minSize:k=0}=R;T===u?(n=k,a=W):(o+=k,l+=W)});const c=Math.min(a,100-o),h=Math.max(n,100-l),v=t[u];return{valueMax:c,valueMin:h,valueNow:v}}function getResizeHandleElementsForGroup(t,e=document){return Array.from(e.querySelectorAll(`[${DATA_ATTRIBUTES.resizeHandleId}][data-panel-group-id="${t}"]`))}function getResizeHandleElementIndex(t,e,r=document){const a=getResizeHandleElementsForGroup(t,r).findIndex(o=>o.getAttribute(DATA_ATTRIBUTES.resizeHandleId)===e);return a??null}function determinePivotIndices(t,e,r){const n=getResizeHandleElementIndex(t,e,r);return n!=null?[n,n+1]:[-1,-1]}function isHTMLElement(t){return t instanceof HTMLElement?!0:typeof t=="object"&&t!==null&&"tagName"in t&&"getAttribute"in t}function getPanelGroupElement(t,e=document){if(isHTMLElement(e)&&e.dataset.panelGroupId==t)return e;const r=e.querySelector(`[data-panel-group][data-panel-group-id="${t}"]`);return r||null}function getResizeHandleElement(t,e=document){const r=e.querySelector(`[${DATA_ATTRIBUTES.resizeHandleId}="${t}"]`);return r||null}function getResizeHandlePanelIds(t,e,r,n=document){var a,o,l,u;const c=getResizeHandleElement(e,n),h=getResizeHandleElementsForGroup(t,n),v=c?h.indexOf(c):-1,g=(a=(o=r[v])===null||o===void 0?void 0:o.id)!==null&&a!==void 0?a:null,T=(l=(u=r[v+1])===null||u===void 0?void 0:u.id)!==null&&l!==void 0?l:null;return[g,T]}function useWindowSplitterPanelGroupBehavior({committedValuesRef:t,eagerValuesRef:e,groupId:r,layout:n,panelDataArray:a,panelGroupElement:o,setLayout:l}){reactExports.useRef({didWarnAboutMissingResizeHandle:!1}),useIsomorphicLayoutEffect(()=>{if(!o)return;const u=getResizeHandleElementsForGroup(r,o);for(let c=0;c<a.length-1;c++){const{valueMax:h,valueMin:v,valueNow:g}=calculateAriaValues({layout:n,panelsArray:a,pivotIndices:[c,c+1]}),T=u[c];if(T!=null){const R=a[c];assert(R,`No panel data found for index "${c}"`),T.setAttribute("aria-controls",R.id),T.setAttribute("aria-valuemax",""+Math.round(h)),T.setAttribute("aria-valuemin",""+Math.round(v)),T.setAttribute("aria-valuenow",g!=null?""+Math.round(g):"")}}return()=>{u.forEach((c,h)=>{c.removeAttribute("aria-controls"),c.removeAttribute("aria-valuemax"),c.removeAttribute("aria-valuemin"),c.removeAttribute("aria-valuenow")})}},[r,n,a,o]),reactExports.useEffect(()=>{if(!o)return;const u=e.current;assert(u,"Eager values not found");const{panelDataArray:c}=u,h=getPanelGroupElement(r,o);assert(h!=null,`No group found for id "${r}"`);const v=getResizeHandleElementsForGroup(r,o);assert(v,`No resize handles found for group id "${r}"`);const g=v.map(T=>{const R=T.getAttribute(DATA_ATTRIBUTES.resizeHandleId);assert(R,"Resize handle element has no handle id attribute");const[W,k]=getResizeHandlePanelIds(r,R,c,o);if(W==null||k==null)return()=>{};const J=q=>{if(!q.defaultPrevented)switch(q.key){case"Enter":{q.preventDefault();const Se=c.findIndex(V=>V.id===W);if(Se>=0){const V=c[Se];assert(V,`No panel data found for index ${Se}`);const Y=n[Se],{collapsedSize:ie=0,collapsible:se,minSize:ct=0}=V.constraints;if(Y!=null&&se){const ae=adjustLayoutByDelta({delta:fuzzyNumbersEqual(Y,ie)?ct-ie:ie-Y,initialLayout:n,panelConstraints:c.map(st=>st.constraints),pivotIndices:determinePivotIndices(r,R,o),prevLayout:n,trigger:"keyboard"});n!==ae&&l(ae)}}break}}};return T.addEventListener("keydown",J),()=>{T.removeEventListener("keydown",J)}});return()=>{g.forEach(T=>T())}},[o,t,e,r,n,a,l])}function areEqual$1(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function getResizeEventCursorPosition(t,e){const r=t==="horizontal",{x:n,y:a}=getResizeEventCoordinates(e);return r?n:a}function calculateDragOffsetPercentage(t,e,r,n,a){const o=r==="horizontal",l=getResizeHandleElement(e,a);assert(l,`No resize handle element found for id "${e}"`);const u=l.getAttribute(DATA_ATTRIBUTES.groupId);assert(u,"Resize handle element has no group id attribute");let{initialCursorPosition:c}=n;const h=getResizeEventCursorPosition(r,t),v=getPanelGroupElement(u,a);assert(v,`No group element found for id "${u}"`);const g=v.getBoundingClientRect(),T=o?g.width:g.height;return(h-c)/T*100}function calculateDeltaPercentage(t,e,r,n,a,o){if(isKeyDown(t)){const l=r==="horizontal";let u=0;t.shiftKey?u=100:a!=null?u=a:u=10;let c=0;switch(t.key){case"ArrowDown":c=l?0:u;break;case"ArrowLeft":c=l?-u:0;break;case"ArrowRight":c=l?u:0;break;case"ArrowUp":c=l?0:-u;break;case"End":c=100;break;case"Home":c=-100;break}return c}else return n==null?0:calculateDragOffsetPercentage(t,e,r,n,o)}function calculateUnsafeDefaultLayout({panelDataArray:t}){const e=Array(t.length),r=t.map(o=>o.constraints);let n=0,a=100;for(let o=0;o<t.length;o++){const l=r[o];assert(l,`Panel constraints not found for index ${o}`);const{defaultSize:u}=l;u!=null&&(n++,e[o]=u,a-=u)}for(let o=0;o<t.length;o++){const l=r[o];assert(l,`Panel constraints not found for index ${o}`);const{defaultSize:u}=l;if(u!=null)continue;const c=t.length-n,h=a/c;n++,e[o]=h,a-=h}return e}function callPanelCallbacks(t,e,r){e.forEach((n,a)=>{const o=t[a];assert(o,`Panel data not found for index ${a}`);const{callbacks:l,constraints:u,id:c}=o,{collapsedSize:h=0,collapsible:v}=u,g=r[c];if(g==null||n!==g){r[c]=n;const{onCollapse:T,onExpand:R,onResize:W}=l;W&&W(n,g),v&&(T||R)&&(R&&(g==null||fuzzyNumbersEqual$1(g,h))&&!fuzzyNumbersEqual$1(n,h)&&R(),T&&(g==null||!fuzzyNumbersEqual$1(g,h))&&fuzzyNumbersEqual$1(n,h)&&T())}})}function compareLayouts(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!=e[r])return!1;return!0}function computePanelFlexBoxStyle({defaultSize:t,dragState:e,layout:r,panelData:n,panelIndex:a,precision:o=3}){const l=r[a];let u;return l==null?u=t!=null?t.toFixed(o):"1":n.length===1?u="1":u=l.toFixed(o),{flexBasis:0,flexGrow:u,flexShrink:1,overflow:"hidden",pointerEvents:e!==null?"none":void 0}}function debounce(t,e=10){let r=null;return(...a)=>{r!==null&&clearTimeout(r),r=setTimeout(()=>{t(...a)},e)}}function initializeDefaultStorage(t){try{if(typeof localStorage<"u")t.getItem=e=>localStorage.getItem(e),t.setItem=(e,r)=>{localStorage.setItem(e,r)};else throw new Error("localStorage not supported in this environment")}catch(e){console.error(e),t.getItem=()=>null,t.setItem=()=>{}}}function getPanelGroupKey(t){return`react-resizable-panels:${t}`}function getPanelKey(t){return t.map(e=>{const{constraints:r,id:n,idIsFromProps:a,order:o}=e;return a?n:o?`${o}:${JSON.stringify(r)}`:JSON.stringify(r)}).sort((e,r)=>e.localeCompare(r)).join(",")}function loadSerializedPanelGroupState(t,e){try{const r=getPanelGroupKey(t),n=e.getItem(r);if(n){const a=JSON.parse(n);if(typeof a=="object"&&a!=null)return a}}catch{}return null}function loadPanelGroupState(t,e,r){var n,a;const o=(n=loadSerializedPanelGroupState(t,r))!==null&&n!==void 0?n:{},l=getPanelKey(e);return(a=o[l])!==null&&a!==void 0?a:null}function savePanelGroupState(t,e,r,n,a){var o;const l=getPanelGroupKey(t),u=getPanelKey(e),c=(o=loadSerializedPanelGroupState(t,a))!==null&&o!==void 0?o:{};c[u]={expandToSizes:Object.fromEntries(r.entries()),layout:n};try{a.setItem(l,JSON.stringify(c))}catch(h){console.error(h)}}function validatePanelGroupLayout({layout:t,panelConstraints:e}){const r=[...t],n=r.reduce((o,l)=>o+l,0);if(r.length!==e.length)throw Error(`Invalid ${e.length} panel layout: ${r.map(o=>`${o}%`).join(", ")}`);if(!fuzzyNumbersEqual(n,100)&&r.length>0)for(let o=0;o<e.length;o++){const l=r[o];assert(l!=null,`No layout data found for index ${o}`);const u=100/n*l;r[o]=u}let a=0;for(let o=0;o<e.length;o++){const l=r[o];assert(l!=null,`No layout data found for index ${o}`);const u=resizePanel({panelConstraints:e,panelIndex:o,size:l});l!=u&&(a+=l-u,r[o]=u)}if(!fuzzyNumbersEqual(a,0))for(let o=0;o<e.length;o++){const l=r[o];assert(l!=null,`No layout data found for index ${o}`);const u=l+a,c=resizePanel({panelConstraints:e,panelIndex:o,size:u});if(l!==c&&(a-=c-l,r[o]=c,fuzzyNumbersEqual(a,0)))break}return r}const LOCAL_STORAGE_DEBOUNCE_INTERVAL=100,defaultStorage={getItem:t=>(initializeDefaultStorage(defaultStorage),defaultStorage.getItem(t)),setItem:(t,e)=>{initializeDefaultStorage(defaultStorage),defaultStorage.setItem(t,e)}},debounceMap={};function PanelGroupWithForwardedRef({autoSaveId:t=null,children:e,className:r="",direction:n,forwardedRef:a,id:o=null,onLayout:l=null,keyboardResizeBy:u=null,storage:c=defaultStorage,style:h,tagName:v="div",...g}){const T=useUniqueId(o),R=reactExports.useRef(null),[W,k]=reactExports.useState(null),[J,q]=reactExports.useState([]),Se=useForceUpdate(),V=reactExports.useRef({}),Y=reactExports.useRef(new Map),ie=reactExports.useRef(0),se=reactExports.useRef({autoSaveId:t,direction:n,dragState:W,id:T,keyboardResizeBy:u,onLayout:l,storage:c}),ct=reactExports.useRef({layout:J,panelDataArray:[],panelDataArrayChanged:!1});reactExports.useRef({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),reactExports.useImperativeHandle(a,()=>({getId:()=>se.current.id,getLayout:()=>{const{layout:y0}=ct.current;return y0},setLayout:y0=>{const{onLayout:kp}=se.current,{layout:u0,panelDataArray:f0}=ct.current,v0=validatePanelGroupLayout({layout:y0,panelConstraints:f0.map(p0=>p0.constraints)});areEqual$1(u0,v0)||(q(v0),ct.current.layout=v0,kp&&kp(v0),callPanelCallbacks(f0,v0,V.current))}}),[]),useIsomorphicLayoutEffect(()=>{se.current.autoSaveId=t,se.current.direction=n,se.current.dragState=W,se.current.id=T,se.current.onLayout=l,se.current.storage=c}),useWindowSplitterPanelGroupBehavior({committedValuesRef:se,eagerValuesRef:ct,groupId:T,layout:J,panelDataArray:ct.current.panelDataArray,setLayout:q,panelGroupElement:R.current}),reactExports.useEffect(()=>{const{panelDataArray:y0}=ct.current;if(t){if(J.length===0||J.length!==y0.length)return;let kp=debounceMap[t];kp==null&&(kp=debounce(savePanelGroupState,LOCAL_STORAGE_DEBOUNCE_INTERVAL),debounceMap[t]=kp);const u0=[...y0],f0=new Map(Y.current);kp(t,u0,f0,J,c)}},[t,J,c]),reactExports.useEffect(()=>{});const ae=reactExports.useCallback(y0=>{const{onLayout:kp}=se.current,{layout:u0,panelDataArray:f0}=ct.current;if(y0.constraints.collapsible){const v0=f0.map(ym=>ym.constraints),{collapsedSize:p0=0,panelSize:rm,pivotIndices:am}=panelDataHelper(f0,y0,u0);if(assert(rm!=null,`Panel size not found for panel "${y0.id}"`),!fuzzyNumbersEqual$1(rm,p0)){Y.current.set(y0.id,rm);const Wm=findPanelDataIndex(f0,y0)===f0.length-1?rm-p0:p0-rm,h0=adjustLayoutByDelta({delta:Wm,initialLayout:u0,panelConstraints:v0,pivotIndices:am,prevLayout:u0,trigger:"imperative-api"});compareLayouts(u0,h0)||(q(h0),ct.current.layout=h0,kp&&kp(h0),callPanelCallbacks(f0,h0,V.current))}}},[]),st=reactExports.useCallback((y0,kp)=>{const{onLayout:u0}=se.current,{layout:f0,panelDataArray:v0}=ct.current;if(y0.constraints.collapsible){const p0=v0.map(f1=>f1.constraints),{collapsedSize:rm=0,panelSize:am=0,minSize:ym=0,pivotIndices:Wm}=panelDataHelper(v0,y0,f0),h0=kp??ym;if(fuzzyNumbersEqual$1(am,rm)){const f1=Y.current.get(y0.id),T1=f1!=null&&f1>=h0?f1:h0,p1=findPanelDataIndex(v0,y0)===v0.length-1?am-T1:T1-am,Qm=adjustLayoutByDelta({delta:p1,initialLayout:f0,panelConstraints:p0,pivotIndices:Wm,prevLayout:f0,trigger:"imperative-api"});compareLayouts(f0,Qm)||(q(Qm),ct.current.layout=Qm,u0&&u0(Qm),callPanelCallbacks(v0,Qm,V.current))}}},[]),Ct=reactExports.useCallback(y0=>{const{layout:kp,panelDataArray:u0}=ct.current,{panelSize:f0}=panelDataHelper(u0,y0,kp);return assert(f0!=null,`Panel size not found for panel "${y0.id}"`),f0},[]),$t=reactExports.useCallback((y0,kp)=>{const{panelDataArray:u0}=ct.current,f0=findPanelDataIndex(u0,y0);return computePanelFlexBoxStyle({defaultSize:kp,dragState:W,layout:J,panelData:u0,panelIndex:f0})},[W,J]),jo=reactExports.useCallback(y0=>{const{layout:kp,panelDataArray:u0}=ct.current,{collapsedSize:f0=0,collapsible:v0,panelSize:p0}=panelDataHelper(u0,y0,kp);return assert(p0!=null,`Panel size not found for panel "${y0.id}"`),v0===!0&&fuzzyNumbersEqual$1(p0,f0)},[]),Lp=reactExports.useCallback(y0=>{const{layout:kp,panelDataArray:u0}=ct.current,{collapsedSize:f0=0,collapsible:v0,panelSize:p0}=panelDataHelper(u0,y0,kp);return assert(p0!=null,`Panel size not found for panel "${y0.id}"`),!v0||fuzzyCompareNumbers(p0,f0)>0},[]),Mn=reactExports.useCallback(y0=>{const{panelDataArray:kp}=ct.current;kp.push(y0),kp.sort((u0,f0)=>{const v0=u0.order,p0=f0.order;return v0==null&&p0==null?0:v0==null?-1:p0==null?1:v0-p0}),ct.current.panelDataArrayChanged=!0,Se()},[Se]);useIsomorphicLayoutEffect(()=>{if(ct.current.panelDataArrayChanged){ct.current.panelDataArrayChanged=!1;const{autoSaveId:y0,onLayout:kp,storage:u0}=se.current,{layout:f0,panelDataArray:v0}=ct.current;let p0=null;if(y0){const am=loadPanelGroupState(y0,v0,u0);am&&(Y.current=new Map(Object.entries(am.expandToSizes)),p0=am.layout)}p0==null&&(p0=calculateUnsafeDefaultLayout({panelDataArray:v0}));const rm=validatePanelGroupLayout({layout:p0,panelConstraints:v0.map(am=>am.constraints)});areEqual$1(f0,rm)||(q(rm),ct.current.layout=rm,kp&&kp(rm),callPanelCallbacks(v0,rm,V.current))}}),useIsomorphicLayoutEffect(()=>{const y0=ct.current;return()=>{y0.layout=[]}},[]);const sa=reactExports.useCallback(y0=>{let kp=!1;const u0=R.current;return u0&&window.getComputedStyle(u0,null).getPropertyValue("direction")==="rtl"&&(kp=!0),function(v0){v0.preventDefault();const p0=R.current;if(!p0)return()=>null;const{direction:rm,dragState:am,id:ym,keyboardResizeBy:Wm,onLayout:h0}=se.current,{layout:f1,panelDataArray:T1}=ct.current,{initialLayout:I1}=am??{},p1=determinePivotIndices(ym,y0,p0);let Qm=calculateDeltaPercentage(v0,y0,rm,am,Wm,p0);const m1=rm==="horizontal";m1&&kp&&(Qm=-Qm);const W1=T1.map(Ko=>Ko.constraints),ug=adjustLayoutByDelta({delta:Qm,initialLayout:I1??f1,panelConstraints:W1,pivotIndices:p1,prevLayout:f1,trigger:isKeyDown(v0)?"keyboard":"mouse-or-touch"}),ng=!compareLayouts(f1,ug);(isPointerEvent(v0)||isMouseEvent$1(v0))&&ie.current!=Qm&&(ie.current=Qm,!ng&&Qm!==0?m1?reportConstraintsViolation(y0,Qm<0?EXCEEDED_HORIZONTAL_MIN:EXCEEDED_HORIZONTAL_MAX):reportConstraintsViolation(y0,Qm<0?EXCEEDED_VERTICAL_MIN:EXCEEDED_VERTICAL_MAX):reportConstraintsViolation(y0,0)),ng&&(q(ug),ct.current.layout=ug,h0&&h0(ug),callPanelCallbacks(T1,ug,V.current))}},[]),re=reactExports.useCallback((y0,kp)=>{const{onLayout:u0}=se.current,{layout:f0,panelDataArray:v0}=ct.current,p0=v0.map(f1=>f1.constraints),{panelSize:rm,pivotIndices:am}=panelDataHelper(v0,y0,f0);assert(rm!=null,`Panel size not found for panel "${y0.id}"`);const Wm=findPanelDataIndex(v0,y0)===v0.length-1?rm-kp:kp-rm,h0=adjustLayoutByDelta({delta:Wm,initialLayout:f0,panelConstraints:p0,pivotIndices:am,prevLayout:f0,trigger:"imperative-api"});compareLayouts(f0,h0)||(q(h0),ct.current.layout=h0,u0&&u0(h0),callPanelCallbacks(v0,h0,V.current))},[]),$o=reactExports.useCallback((y0,kp)=>{const{layout:u0,panelDataArray:f0}=ct.current,{collapsedSize:v0=0,collapsible:p0}=kp,{collapsedSize:rm=0,collapsible:am,maxSize:ym=100,minSize:Wm=0}=y0.constraints,{panelSize:h0}=panelDataHelper(f0,y0,u0);h0!=null&&(p0&&am&&fuzzyNumbersEqual$1(h0,v0)?fuzzyNumbersEqual$1(v0,rm)||re(y0,rm):h0<Wm?re(y0,Wm):h0>ym&&re(y0,ym))},[re]),qo=reactExports.useCallback((y0,kp)=>{const{direction:u0}=se.current,{layout:f0}=ct.current;if(!R.current)return;const v0=getResizeHandleElement(y0,R.current);assert(v0,`Drag handle element not found for id "${y0}"`);const p0=getResizeEventCursorPosition(u0,kp);k({dragHandleId:y0,dragHandleRect:v0.getBoundingClientRect(),initialCursorPosition:p0,initialLayout:f0})},[]),Kt=reactExports.useCallback(()=>{k(null)},[]),i0=reactExports.useCallback(y0=>{const{panelDataArray:kp}=ct.current,u0=findPanelDataIndex(kp,y0);u0>=0&&(kp.splice(u0,1),delete V.current[y0.id],ct.current.panelDataArrayChanged=!0,Se())},[Se]),Up=reactExports.useMemo(()=>({collapsePanel:ae,direction:n,dragState:W,expandPanel:st,getPanelSize:Ct,getPanelStyle:$t,groupId:T,isPanelCollapsed:jo,isPanelExpanded:Lp,reevaluatePanelConstraints:$o,registerPanel:Mn,registerResizeHandle:sa,resizePanel:re,startDragging:qo,stopDragging:Kt,unregisterPanel:i0,panelGroupElement:R.current}),[ae,W,n,st,Ct,$t,T,jo,Lp,$o,Mn,sa,re,qo,Kt,i0]),l0={display:"flex",flexDirection:n==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return reactExports.createElement(PanelGroupContext.Provider,{value:Up},reactExports.createElement(v,{...g,children:e,className:r,id:o,ref:R,style:{...l0,...h},[DATA_ATTRIBUTES.group]:"",[DATA_ATTRIBUTES.groupDirection]:n,[DATA_ATTRIBUTES.groupId]:T}))}const PanelGroup=reactExports.forwardRef((t,e)=>reactExports.createElement(PanelGroupWithForwardedRef,{...t,forwardedRef:e}));PanelGroupWithForwardedRef.displayName="PanelGroup";PanelGroup.displayName="forwardRef(PanelGroup)";function findPanelDataIndex(t,e){return t.findIndex(r=>r===e||r.id===e.id)}function panelDataHelper(t,e,r){const n=findPanelDataIndex(t,e),o=n===t.length-1?[n-1,n]:[n,n+1],l=r[n];return{...e.constraints,panelSize:l,pivotIndices:o}}function useWindowSplitterResizeHandlerBehavior({disabled:t,handleId:e,resizeHandler:r,panelGroupElement:n}){reactExports.useEffect(()=>{if(t||r==null||n==null)return;const a=getResizeHandleElement(e,n);if(a==null)return;const o=l=>{if(!l.defaultPrevented)switch(l.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{l.preventDefault(),r(l);break}case"F6":{l.preventDefault();const u=a.getAttribute(DATA_ATTRIBUTES.groupId);assert(u,`No group element found for id "${u}"`);const c=getResizeHandleElementsForGroup(u,n),h=getResizeHandleElementIndex(u,e,n);assert(h!==null,`No resize element found for id "${e}"`);const v=l.shiftKey?h>0?h-1:c.length-1:h+1<c.length?h+1:0;c[v].focus();break}}};return a.addEventListener("keydown",o),()=>{a.removeEventListener("keydown",o)}},[n,t,e,r])}function PanelResizeHandle({children:t=null,className:e="",disabled:r=!1,hitAreaMargins:n,id:a,onBlur:o,onClick:l,onDragging:u,onFocus:c,onPointerDown:h,onPointerUp:v,style:g={},tabIndex:T=0,tagName:R="div",...W}){var k,J;const q=reactExports.useRef(null),Se=reactExports.useRef({onClick:l,onDragging:u,onPointerDown:h,onPointerUp:v});reactExports.useEffect(()=>{Se.current.onClick=l,Se.current.onDragging=u,Se.current.onPointerDown=h,Se.current.onPointerUp=v});const V=reactExports.useContext(PanelGroupContext);if(V===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:Y,groupId:ie,registerResizeHandle:se,startDragging:ct,stopDragging:ae,panelGroupElement:st}=V,Ct=useUniqueId(a),[$t,jo]=reactExports.useState("inactive"),[Lp,Mn]=reactExports.useState(!1),[sa,re]=reactExports.useState(null),$o=reactExports.useRef({state:$t});useIsomorphicLayoutEffect(()=>{$o.current.state=$t}),reactExports.useEffect(()=>{if(r)re(null);else{const Up=se(Ct);re(()=>Up)}},[r,Ct,se]);const qo=(k=n?.coarse)!==null&&k!==void 0?k:15,Kt=(J=n?.fine)!==null&&J!==void 0?J:5;reactExports.useEffect(()=>{if(r||sa==null)return;const Up=q.current;assert(Up,"Element ref not attached");let l0=!1;return registerResizeHandle(Ct,Up,Y,{coarse:qo,fine:Kt},(kp,u0,f0)=>{if(!u0){jo("inactive");return}switch(kp){case"down":{jo("drag"),l0=!1,assert(f0,'Expected event to be defined for "down" action'),ct(Ct,f0);const{onDragging:v0,onPointerDown:p0}=Se.current;v0?.(!0),p0?.();break}case"move":{const{state:v0}=$o.current;l0=!0,v0!=="drag"&&jo("hover"),assert(f0,'Expected event to be defined for "move" action'),sa(f0);break}case"up":{jo("hover"),ae();const{onClick:v0,onDragging:p0,onPointerUp:rm}=Se.current;p0?.(!1),rm?.(),l0||v0?.();break}}})},[qo,Y,r,Kt,se,Ct,sa,ct,ae]),useWindowSplitterResizeHandlerBehavior({disabled:r,handleId:Ct,resizeHandler:sa,panelGroupElement:st});const i0={touchAction:"none",userSelect:"none"};return reactExports.createElement(R,{...W,children:t,className:e,id:a,onBlur:()=>{Mn(!1),o?.()},onFocus:()=>{Mn(!0),c?.()},ref:q,role:"separator",style:{...i0,...g},tabIndex:T,[DATA_ATTRIBUTES.groupDirection]:Y,[DATA_ATTRIBUTES.groupId]:ie,[DATA_ATTRIBUTES.resizeHandle]:"",[DATA_ATTRIBUTES.resizeHandleActive]:$t==="drag"?"pointer":Lp?"keyboard":void 0,[DATA_ATTRIBUTES.resizeHandleEnabled]:!r,[DATA_ATTRIBUTES.resizeHandleId]:Ct,[DATA_ATTRIBUTES.resizeHandleState]:$t})}PanelResizeHandle.displayName="PanelResizeHandle";var Subscribable=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},defaultTimeoutProvider={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},TimeoutManager=class{#e=defaultTimeoutProvider;#t=!1;setTimeoutProvider(t){this.#e=t}setTimeout(t,e){return this.#e.setTimeout(t,e)}clearTimeout(t){this.#e.clearTimeout(t)}setInterval(t,e){return this.#e.setInterval(t,e)}clearInterval(t){this.#e.clearInterval(t)}},timeoutManager=new TimeoutManager;function systemSetTimeoutZero(t){setTimeout(t,0)}var isServer=typeof window>"u"||"Deno"in globalThis;function noop$2(){}function functionalUpdate(t,e){return typeof t=="function"?t(e):t}function isValidTimeout(t){return typeof t=="number"&&t>=0&&t!==1/0}function timeUntilStale(t,e){return Math.max(t+(e||0)-Date.now(),0)}function resolveStaleTime(t,e){return typeof t=="function"?t(e):t}function resolveEnabled(t,e){return typeof t=="function"?t(e):t}function matchQuery(t,e){const{type:r="all",exact:n,fetchStatus:a,predicate:o,queryKey:l,stale:u}=t;if(l){if(n){if(e.queryHash!==hashQueryKeyByOptions(l,e.options))return!1}else if(!partialMatchKey(e.queryKey,l))return!1}if(r!=="all"){const c=e.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof u=="boolean"&&e.isStale()!==u||a&&a!==e.state.fetchStatus||o&&!o(e))}function matchMutation(t,e){const{exact:r,status:n,predicate:a,mutationKey:o}=t;if(o){if(!e.options.mutationKey)return!1;if(r){if(hashKey(e.options.mutationKey)!==hashKey(o))return!1}else if(!partialMatchKey(e.options.mutationKey,o))return!1}return!(n&&e.state.status!==n||a&&!a(e))}function hashQueryKeyByOptions(t,e){return(e?.queryKeyHashFn||hashKey)(t)}function hashKey(t){return JSON.stringify(t,(e,r)=>isPlainObject$1(r)?Object.keys(r).sort().reduce((n,a)=>(n[a]=r[a],n),{}):r)}function partialMatchKey(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(r=>partialMatchKey(t[r],e[r])):!1}var hasOwn=Object.prototype.hasOwnProperty;function replaceEqualDeep(t,e,r=0){if(t===e)return t;if(r>500)return e;const n=isPlainArray(t)&&isPlainArray(e);if(!n&&!(isPlainObject$1(t)&&isPlainObject$1(e)))return e;const o=(n?t:Object.keys(t)).length,l=n?e:Object.keys(e),u=l.length,c=n?new Array(u):{};let h=0;for(let v=0;v<u;v++){const g=n?v:l[v],T=t[g],R=e[g];if(T===R){c[g]=T,(n?v<o:hasOwn.call(t,g))&&h++;continue}if(T===null||R===null||typeof T!="object"||typeof R!="object"){c[g]=R;continue}const W=replaceEqualDeep(T,R,r+1);c[g]=W,W===T&&h++}return o===u&&h===o?t:c}function shallowEqualObjects(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const r in t)if(t[r]!==e[r])return!1;return!0}function isPlainArray(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function isPlainObject$1(t){if(!hasObjectPrototype(t))return!1;const e=t.constructor;if(e===void 0)return!0;const r=e.prototype;return!(!hasObjectPrototype(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function hasObjectPrototype(t){return Object.prototype.toString.call(t)==="[object Object]"}function sleep$1(t){return new Promise(e=>{timeoutManager.setTimeout(e,t)})}function replaceData(t,e,r){return typeof r.structuralSharing=="function"?r.structuralSharing(t,e):r.structuralSharing!==!1?replaceEqualDeep(t,e):e}function addToEnd(t,e,r=0){const n=[...t,e];return r&&n.length>r?n.slice(1):n}function addToStart(t,e,r=0){const n=[e,...t];return r&&n.length>r?n.slice(0,-1):n}var skipToken=Symbol();function ensureQueryFn(t,e){return!t.queryFn&&e?.initialPromise?()=>e.initialPromise:!t.queryFn||t.queryFn===skipToken?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function shouldThrowError(t,e){return typeof t=="function"?t(...e):!!t}function addConsumeAwareSignal(t,e,r){let n=!1,a;return Object.defineProperty(t,"signal",{enumerable:!0,get:()=>(a??=e(),n||(n=!0,a.aborted?r():a.addEventListener("abort",r,{once:!0})),a)}),t}var FocusManager=class extends Subscribable{#e;#t;#r;constructor(){super(),this.#r=t=>{if(!isServer&&window.addEventListener){const e=()=>t();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#r=t,this.#t?.(),this.#t=t(e=>{typeof e=="boolean"?this.setFocused(e):this.onFocus()})}setFocused(t){this.#e!==t&&(this.#e=t,this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(e=>{e(t)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},focusManager=new FocusManager;function pendingThenable(){let t,e;const r=new Promise((a,o)=>{t=a,e=o});r.status="pending",r.catch(()=>{});function n(a){Object.assign(r,a),delete r.resolve,delete r.reject}return r.resolve=a=>{n({status:"fulfilled",value:a}),t(a)},r.reject=a=>{n({status:"rejected",reason:a}),e(a)},r}var defaultScheduler=systemSetTimeoutZero;function createNotifyManager(){let t=[],e=0,r=u=>{u()},n=u=>{u()},a=defaultScheduler;const o=u=>{e?t.push(u):a(()=>{r(u)})},l=()=>{const u=t;t=[],u.length&&a(()=>{n(()=>{u.forEach(c=>{r(c)})})})};return{batch:u=>{let c;e++;try{c=u()}finally{e--,e||l()}return c},batchCalls:u=>(...c)=>{o(()=>{u(...c)})},schedule:o,setNotifyFunction:u=>{r=u},setBatchNotifyFunction:u=>{n=u},setScheduler:u=>{a=u}}}var notifyManager=createNotifyManager(),OnlineManager=class extends Subscribable{#e=!0;#t;#r;constructor(){super(),this.#r=t=>{if(!isServer&&window.addEventListener){const e=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",r)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#r=t,this.#t?.(),this.#t=t(this.setOnline.bind(this))}setOnline(t){this.#e!==t&&(this.#e=t,this.listeners.forEach(r=>{r(t)}))}isOnline(){return this.#e}},onlineManager=new OnlineManager;function defaultRetryDelay(t){return Math.min(1e3*2**t,3e4)}function canFetch(t){return(t??"online")==="online"?onlineManager.isOnline():!0}var CancelledError=class extends Error{constructor(t){super("CancelledError"),this.revert=t?.revert,this.silent=t?.silent}};function createRetryer(t){let e=!1,r=0,n;const a=pendingThenable(),o=()=>a.status!=="pending",l=k=>{if(!o()){const J=new CancelledError(k);T(J),t.onCancel?.(J)}},u=()=>{e=!0},c=()=>{e=!1},h=()=>focusManager.isFocused()&&(t.networkMode==="always"||onlineManager.isOnline())&&t.canRun(),v=()=>canFetch(t.networkMode)&&t.canRun(),g=k=>{o()||(n?.(),a.resolve(k))},T=k=>{o()||(n?.(),a.reject(k))},R=()=>new Promise(k=>{n=J=>{(o()||h())&&k(J)},t.onPause?.()}).then(()=>{n=void 0,o()||t.onContinue?.()}),W=()=>{if(o())return;let k;const J=r===0?t.initialPromise:void 0;try{k=J??t.fn()}catch(q){k=Promise.reject(q)}Promise.resolve(k).then(g).catch(q=>{if(o())return;const Se=t.retry??(isServer?0:3),V=t.retryDelay??defaultRetryDelay,Y=typeof V=="function"?V(r,q):V,ie=Se===!0||typeof Se=="number"&&r<Se||typeof Se=="function"&&Se(r,q);if(e||!ie){T(q);return}r++,t.onFail?.(r,q),sleep$1(Y).then(()=>h()?void 0:R()).then(()=>{e?T(q):W()})})};return{promise:a,status:()=>a.status,cancel:l,continue:()=>(n?.(),a),cancelRetry:u,continueRetry:c,canStart:v,start:()=>(v()?W():R().then(W),a)}}var Removable=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),isValidTimeout(this.gcTime)&&(this.#e=timeoutManager.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(isServer?1/0:300*1e3))}clearGcTimeout(){this.#e&&(timeoutManager.clearTimeout(this.#e),this.#e=void 0)}},Query=class extends Removable{#e;#t;#r;#a;#n;#s;#o;constructor(t){super(),this.#o=!1,this.#s=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.#a=t.client,this.#r=this.#a.getQueryCache(),this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.#e=getDefaultState$1(this.options),this.state=t.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#n?.promise}setOptions(t){if(this.options={...this.#s,...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const e=getDefaultState$1(this.options);e.data!==void 0&&(this.setState(successState(e.data,e.dataUpdatedAt)),this.#e=e)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#r.remove(this)}setData(t,e){const r=replaceData(this.state.data,t,this.options);return this.#i({data:r,type:"success",dataUpdatedAt:e?.updatedAt,manual:e?.manual}),r}setState(t,e){this.#i({type:"setState",state:t,setStateOptions:e})}cancel(t){const e=this.#n?.promise;return this.#n?.cancel(t),e?e.then(noop$2).catch(noop$2):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(t=>resolveEnabled(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===skipToken||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>resolveStaleTime(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!timeUntilStale(this.state.dataUpdatedAt,t)}onFocus(){this.observers.find(e=>e.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#n?.continue()}onOnline(){this.observers.find(e=>e.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#n?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(e=>e!==t),this.observers.length||(this.#n&&(this.#o?this.#n.cancel({revert:!0}):this.#n.cancelRetry()),this.scheduleGc()),this.#r.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#i({type:"invalidate"})}async fetch(t,e){if(this.state.fetchStatus!=="idle"&&this.#n?.status()!=="rejected"){if(this.state.data!==void 0&&e?.cancelRefetch)this.cancel({silent:!0});else if(this.#n)return this.#n.continueRetry(),this.#n.promise}if(t&&this.setOptions(t),!this.options.queryFn){const u=this.observers.find(c=>c.options.queryFn);u&&this.setOptions(u.options)}const r=new AbortController,n=u=>{Object.defineProperty(u,"signal",{enumerable:!0,get:()=>(this.#o=!0,r.signal)})},a=()=>{const u=ensureQueryFn(this.options,e),h=(()=>{const v={client:this.#a,queryKey:this.queryKey,meta:this.meta};return n(v),v})();return this.#o=!1,this.options.persister?this.options.persister(u,h,this):u(h)},l=(()=>{const u={fetchOptions:e,options:this.options,queryKey:this.queryKey,client:this.#a,state:this.state,fetchFn:a};return n(u),u})();this.options.behavior?.onFetch(l,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==l.fetchOptions?.meta)&&this.#i({type:"fetch",meta:l.fetchOptions?.meta}),this.#n=createRetryer({initialPromise:e?.initialPromise,fn:l.fetchFn,onCancel:u=>{u instanceof CancelledError&&u.revert&&this.setState({...this.#t,fetchStatus:"idle"}),r.abort()},onFail:(u,c)=>{this.#i({type:"failed",failureCount:u,error:c})},onPause:()=>{this.#i({type:"pause"})},onContinue:()=>{this.#i({type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0});try{const u=await this.#n.start();if(u===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(u),this.#r.config.onSuccess?.(u,this),this.#r.config.onSettled?.(u,this.state.error,this),u}catch(u){if(u instanceof CancelledError){if(u.silent)return this.#n.promise;if(u.revert){if(this.state.data===void 0)throw u;return this.state.data}}throw this.#i({type:"error",error:u}),this.#r.config.onError?.(u,this),this.#r.config.onSettled?.(this.state.data,u,this),u}finally{this.scheduleGc()}}#i(t){const e=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...fetchState(r.data,this.options),fetchMeta:t.meta??null};case"success":const n={...r,...successState(t.data,t.dataUpdatedAt),dataUpdateCount:r.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=t.manual?n:void 0,n;case"error":const a=t.error;return{...r,error:a,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=e(this.state),notifyManager.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),this.#r.notify({query:this,type:"updated",action:t})})}};function fetchState(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:canFetch(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function successState(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function getDefaultState$1(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,r=e!==void 0,n=r?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var QueryObserver=class extends Subscribable{constructor(t,e){super(),this.options=e,this.#e=t,this.#i=null,this.#o=pendingThenable(),this.bindMethods(),this.setOptions(e)}#e;#t=void 0;#r=void 0;#a=void 0;#n;#s;#o;#i;#m;#d;#f;#u;#c;#l;#p=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),shouldFetchOnMount(this.#t,this.options)?this.#h():this.updateResult(),this.#x())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return shouldFetchOn(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return shouldFetchOn(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#_(),this.#b(),this.#t.removeObserver(this)}setOptions(t){const e=this.options,r=this.#t;if(this.options=this.#e.defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof resolveEnabled(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#w(),this.#t.setOptions(this.options),e._defaulted&&!shallowEqualObjects(this.options,e)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const n=this.hasListeners();n&&shouldFetchOptionally(this.#t,r,this.options,e)&&this.#h(),this.updateResult(),n&&(this.#t!==r||resolveEnabled(this.options.enabled,this.#t)!==resolveEnabled(e.enabled,this.#t)||resolveStaleTime(this.options.staleTime,this.#t)!==resolveStaleTime(e.staleTime,this.#t))&&this.#g();const a=this.#v();n&&(this.#t!==r||resolveEnabled(this.options.enabled,this.#t)!==resolveEnabled(e.enabled,this.#t)||a!==this.#l)&&this.#y(a)}getOptimisticResult(t){const e=this.#e.getQueryCache().build(this.#e,t),r=this.createResult(e,t);return shouldAssignObserverCurrentProperties(this,r)&&(this.#a=r,this.#s=this.options,this.#n=this.#t.state),r}getCurrentResult(){return this.#a}trackResult(t,e){return new Proxy(t,{get:(r,n)=>(this.trackProp(n),e?.(n),n==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#o.status==="pending"&&this.#o.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(r,n))})}trackProp(t){this.#p.add(t)}getCurrentQuery(){return this.#t}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const e=this.#e.defaultQueryOptions(t),r=this.#e.getQueryCache().build(this.#e,e);return r.fetch().then(()=>this.createResult(r,e))}fetch(t){return this.#h({...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#a))}#h(t){this.#w();let e=this.#t.fetch(this.options,t);return t?.throwOnError||(e=e.catch(noop$2)),e}#g(){this.#_();const t=resolveStaleTime(this.options.staleTime,this.#t);if(isServer||this.#a.isStale||!isValidTimeout(t))return;const r=timeUntilStale(this.#a.dataUpdatedAt,t)+1;this.#u=timeoutManager.setTimeout(()=>{this.#a.isStale||this.updateResult()},r)}#v(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#y(t){this.#b(),this.#l=t,!(isServer||resolveEnabled(this.options.enabled,this.#t)===!1||!isValidTimeout(this.#l)||this.#l===0)&&(this.#c=timeoutManager.setInterval(()=>{(this.options.refetchIntervalInBackground||focusManager.isFocused())&&this.#h()},this.#l))}#x(){this.#g(),this.#y(this.#v())}#_(){this.#u&&(timeoutManager.clearTimeout(this.#u),this.#u=void 0)}#b(){this.#c&&(timeoutManager.clearInterval(this.#c),this.#c=void 0)}createResult(t,e){const r=this.#t,n=this.options,a=this.#a,o=this.#n,l=this.#s,c=t!==r?t.state:this.#r,{state:h}=t;let v={...h},g=!1,T;if(e._optimisticResults){const ae=this.hasListeners(),st=!ae&&shouldFetchOnMount(t,e),Ct=ae&&shouldFetchOptionally(t,r,e,n);(st||Ct)&&(v={...v,...fetchState(h.data,t.options)}),e._optimisticResults==="isRestoring"&&(v.fetchStatus="idle")}let{error:R,errorUpdatedAt:W,status:k}=v;T=v.data;let J=!1;if(e.placeholderData!==void 0&&T===void 0&&k==="pending"){let ae;a?.isPlaceholderData&&e.placeholderData===l?.placeholderData?(ae=a.data,J=!0):ae=typeof e.placeholderData=="function"?e.placeholderData(this.#f?.state.data,this.#f):e.placeholderData,ae!==void 0&&(k="success",T=replaceData(a?.data,ae,e),g=!0)}if(e.select&&T!==void 0&&!J)if(a&&T===o?.data&&e.select===this.#m)T=this.#d;else try{this.#m=e.select,T=e.select(T),T=replaceData(a?.data,T,e),this.#d=T,this.#i=null}catch(ae){this.#i=ae}this.#i&&(R=this.#i,T=this.#d,W=Date.now(),k="error");const q=v.fetchStatus==="fetching",Se=k==="pending",V=k==="error",Y=Se&&q,ie=T!==void 0,ct={status:k,fetchStatus:v.fetchStatus,isPending:Se,isSuccess:k==="success",isError:V,isInitialLoading:Y,isLoading:Y,data:T,dataUpdatedAt:v.dataUpdatedAt,error:R,errorUpdatedAt:W,failureCount:v.fetchFailureCount,failureReason:v.fetchFailureReason,errorUpdateCount:v.errorUpdateCount,isFetched:v.dataUpdateCount>0||v.errorUpdateCount>0,isFetchedAfterMount:v.dataUpdateCount>c.dataUpdateCount||v.errorUpdateCount>c.errorUpdateCount,isFetching:q,isRefetching:q&&!Se,isLoadingError:V&&!ie,isPaused:v.fetchStatus==="paused",isPlaceholderData:g,isRefetchError:V&&ie,isStale:isStale(t,e),refetch:this.refetch,promise:this.#o,isEnabled:resolveEnabled(e.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const ae=ct.data!==void 0,st=ct.status==="error"&&!ae,Ct=Lp=>{st?Lp.reject(ct.error):ae&&Lp.resolve(ct.data)},$t=()=>{const Lp=this.#o=ct.promise=pendingThenable();Ct(Lp)},jo=this.#o;switch(jo.status){case"pending":t.queryHash===r.queryHash&&Ct(jo);break;case"fulfilled":(st||ct.data!==jo.value)&&$t();break;case"rejected":(!st||ct.error!==jo.reason)&&$t();break}}return ct}updateResult(){const t=this.#a,e=this.createResult(this.#t,this.options);if(this.#n=this.#t.state,this.#s=this.options,this.#n.data!==void 0&&(this.#f=this.#t),shallowEqualObjects(e,t))return;this.#a=e;const r=()=>{if(!t)return!0;const{notifyOnChangeProps:n}=this.options,a=typeof n=="function"?n():n;if(a==="all"||!a&&!this.#p.size)return!0;const o=new Set(a??this.#p);return this.options.throwOnError&&o.add("error"),Object.keys(this.#a).some(l=>{const u=l;return this.#a[u]!==t[u]&&o.has(u)})};this.#E({listeners:r()})}#w(){const t=this.#e.getQueryCache().build(this.#e,this.options);if(t===this.#t)return;const e=this.#t;this.#t=t,this.#r=t.state,this.hasListeners()&&(e?.removeObserver(this),t.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#x()}#E(t){notifyManager.batch(()=>{t.listeners&&this.listeners.forEach(e=>{e(this.#a)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function shouldLoadOnMount(t,e){return resolveEnabled(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function shouldFetchOnMount(t,e){return shouldLoadOnMount(t,e)||t.state.data!==void 0&&shouldFetchOn(t,e,e.refetchOnMount)}function shouldFetchOn(t,e,r){if(resolveEnabled(e.enabled,t)!==!1&&resolveStaleTime(e.staleTime,t)!=="static"){const n=typeof r=="function"?r(t):r;return n==="always"||n!==!1&&isStale(t,e)}return!1}function shouldFetchOptionally(t,e,r,n){return(t!==e||resolveEnabled(n.enabled,t)===!1)&&(!r.suspense||t.state.status!=="error")&&isStale(t,r)}function isStale(t,e){return resolveEnabled(e.enabled,t)!==!1&&t.isStaleByTime(resolveStaleTime(e.staleTime,t))}function shouldAssignObserverCurrentProperties(t,e){return!shallowEqualObjects(t.getCurrentResult(),e)}function infiniteQueryBehavior(t){return{onFetch:(e,r)=>{const n=e.options,a=e.fetchOptions?.meta?.fetchMore?.direction,o=e.state.data?.pages||[],l=e.state.data?.pageParams||[];let u={pages:[],pageParams:[]},c=0;const h=async()=>{let v=!1;const g=W=>{addConsumeAwareSignal(W,()=>e.signal,()=>v=!0)},T=ensureQueryFn(e.options,e.fetchOptions),R=async(W,k,J)=>{if(v)return Promise.reject();if(k==null&&W.pages.length)return Promise.resolve(W);const Se=(()=>{const se={client:e.client,queryKey:e.queryKey,pageParam:k,direction:J?"backward":"forward",meta:e.options.meta};return g(se),se})(),V=await T(Se),{maxPages:Y}=e.options,ie=J?addToStart:addToEnd;return{pages:ie(W.pages,V,Y),pageParams:ie(W.pageParams,k,Y)}};if(a&&o.length){const W=a==="backward",k=W?getPreviousPageParam:getNextPageParam,J={pages:o,pageParams:l},q=k(n,J);u=await R(J,q,W)}else{const W=t??o.length;do{const k=c===0?l[0]??n.initialPageParam:getNextPageParam(n,u);if(c>0&&k==null)break;u=await R(u,k),c++}while(c<W)}return u};e.options.persister?e.fetchFn=()=>e.options.persister?.(h,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},r):e.fetchFn=h}}}function getNextPageParam(t,{pages:e,pageParams:r}){const n=e.length-1;return e.length>0?t.getNextPageParam(e[n],e,r[n],r):void 0}function getPreviousPageParam(t,{pages:e,pageParams:r}){return e.length>0?t.getPreviousPageParam?.(e[0],e,r[0],r):void 0}var Mutation=class extends Removable{#e;#t;#r;#a;constructor(t){super(),this.#e=t.client,this.mutationId=t.mutationId,this.#r=t.mutationCache,this.#t=[],this.state=t.state||getDefaultState(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#t.includes(t)||(this.#t.push(t),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#t=this.#t.filter(e=>e!==t),this.scheduleGc(),this.#r.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#r.remove(this))}continue(){return this.#a?.continue()??this.execute(this.state.variables)}async execute(t){const e=()=>{this.#n({type:"continue"})},r={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#a=createRetryer({fn:()=>this.options.mutationFn?this.options.mutationFn(t,r):Promise.reject(new Error("No mutationFn found")),onFail:(o,l)=>{this.#n({type:"failed",failureCount:o,error:l})},onPause:()=>{this.#n({type:"pause"})},onContinue:e,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#r.canRun(this)});const n=this.state.status==="pending",a=!this.#a.canStart();try{if(n)e();else{this.#n({type:"pending",variables:t,isPaused:a}),this.#r.config.onMutate&&await this.#r.config.onMutate(t,this,r);const l=await this.options.onMutate?.(t,r);l!==this.state.context&&this.#n({type:"pending",context:l,variables:t,isPaused:a})}const o=await this.#a.start();return await this.#r.config.onSuccess?.(o,t,this.state.context,this,r),await this.options.onSuccess?.(o,t,this.state.context,r),await this.#r.config.onSettled?.(o,null,this.state.variables,this.state.context,this,r),await this.options.onSettled?.(o,null,t,this.state.context,r),this.#n({type:"success",data:o}),o}catch(o){try{await this.#r.config.onError?.(o,t,this.state.context,this,r)}catch(l){Promise.reject(l)}try{await this.options.onError?.(o,t,this.state.context,r)}catch(l){Promise.reject(l)}try{await this.#r.config.onSettled?.(void 0,o,this.state.variables,this.state.context,this,r)}catch(l){Promise.reject(l)}try{await this.options.onSettled?.(void 0,o,t,this.state.context,r)}catch(l){Promise.reject(l)}throw this.#n({type:"error",error:o}),o}finally{this.#r.runNext(this)}}#n(t){const e=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=e(this.state),notifyManager.batch(()=>{this.#t.forEach(r=>{r.onMutationUpdate(t)}),this.#r.notify({mutation:this,type:"updated",action:t})})}};function getDefaultState(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var MutationCache=class extends Subscribable{constructor(t={}){super(),this.config=t,this.#e=new Set,this.#t=new Map,this.#r=0}#e;#t;#r;build(t,e,r){const n=new Mutation({client:t,mutationCache:this,mutationId:++this.#r,options:t.defaultMutationOptions(e),state:r});return this.add(n),n}add(t){this.#e.add(t);const e=scopeFor(t);if(typeof e=="string"){const r=this.#t.get(e);r?r.push(t):this.#t.set(e,[t])}this.notify({type:"added",mutation:t})}remove(t){if(this.#e.delete(t)){const e=scopeFor(t);if(typeof e=="string"){const r=this.#t.get(e);if(r)if(r.length>1){const n=r.indexOf(t);n!==-1&&r.splice(n,1)}else r[0]===t&&this.#t.delete(e)}}this.notify({type:"removed",mutation:t})}canRun(t){const e=scopeFor(t);if(typeof e=="string"){const n=this.#t.get(e)?.find(a=>a.state.status==="pending");return!n||n===t}else return!0}runNext(t){const e=scopeFor(t);return typeof e=="string"?this.#t.get(e)?.find(n=>n!==t&&n.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){notifyManager.batch(()=>{this.#e.forEach(t=>{this.notify({type:"removed",mutation:t})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(t){const e={exact:!0,...t};return this.getAll().find(r=>matchMutation(e,r))}findAll(t={}){return this.getAll().filter(e=>matchMutation(t,e))}notify(t){notifyManager.batch(()=>{this.listeners.forEach(e=>{e(t)})})}resumePausedMutations(){const t=this.getAll().filter(e=>e.state.isPaused);return notifyManager.batch(()=>Promise.all(t.map(e=>e.continue().catch(noop$2))))}};function scopeFor(t){return t.options.scope?.id}var QueryCache=class extends Subscribable{constructor(t={}){super(),this.config=t,this.#e=new Map}#e;build(t,e,r){const n=e.queryKey,a=e.queryHash??hashQueryKeyByOptions(n,e);let o=this.get(a);return o||(o=new Query({client:t,queryKey:n,queryHash:a,options:t.defaultQueryOptions(e),state:r,defaultOptions:t.getQueryDefaults(n)}),this.add(o)),o}add(t){this.#e.has(t.queryHash)||(this.#e.set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const e=this.#e.get(t.queryHash);e&&(t.destroy(),e===t&&this.#e.delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){notifyManager.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return this.#e.get(t)}getAll(){return[...this.#e.values()]}find(t){const e={exact:!0,...t};return this.getAll().find(r=>matchQuery(e,r))}findAll(t={}){const e=this.getAll();return Object.keys(t).length>0?e.filter(r=>matchQuery(t,r)):e}notify(t){notifyManager.batch(()=>{this.listeners.forEach(e=>{e(t)})})}onFocus(){notifyManager.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){notifyManager.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},QueryClient=class{#e;#t;#r;#a;#n;#s;#o;#i;constructor(t={}){this.#e=t.queryCache||new QueryCache,this.#t=t.mutationCache||new MutationCache,this.#r=t.defaultOptions||{},this.#a=new Map,this.#n=new Map,this.#s=0}mount(){this.#s++,this.#s===1&&(this.#o=focusManager.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#i=onlineManager.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#s--,this.#s===0&&(this.#o?.(),this.#o=void 0,this.#i?.(),this.#i=void 0)}isFetching(t){return this.#e.findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return this.#t.findAll({...t,status:"pending"}).length}getQueryData(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),r=this.#e.build(this,e),n=r.state.data;return n===void 0?this.fetchQuery(t):(t.revalidateIfStale&&r.isStaleByTime(resolveStaleTime(e.staleTime,r))&&this.prefetchQuery(e),Promise.resolve(n))}getQueriesData(t){return this.#e.findAll(t).map(({queryKey:e,state:r})=>{const n=r.data;return[e,n]})}setQueryData(t,e,r){const n=this.defaultQueryOptions({queryKey:t}),o=this.#e.get(n.queryHash)?.state.data,l=functionalUpdate(e,o);if(l!==void 0)return this.#e.build(this,n).setData(l,{...r,manual:!0})}setQueriesData(t,e,r){return notifyManager.batch(()=>this.#e.findAll(t).map(({queryKey:n})=>[n,this.setQueryData(n,e,r)]))}getQueryState(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state}removeQueries(t){const e=this.#e;notifyManager.batch(()=>{e.findAll(t).forEach(r=>{e.remove(r)})})}resetQueries(t,e){const r=this.#e;return notifyManager.batch(()=>(r.findAll(t).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const r={revert:!0,...e},n=notifyManager.batch(()=>this.#e.findAll(t).map(a=>a.cancel(r)));return Promise.all(n).then(noop$2).catch(noop$2)}invalidateQueries(t,e={}){return notifyManager.batch(()=>(this.#e.findAll(t).forEach(r=>{r.invalidate()}),t?.refetchType==="none"?Promise.resolve():this.refetchQueries({...t,type:t?.refetchType??t?.type??"active"},e)))}refetchQueries(t,e={}){const r={...e,cancelRefetch:e.cancelRefetch??!0},n=notifyManager.batch(()=>this.#e.findAll(t).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let o=a.fetch(void 0,r);return r.throwOnError||(o=o.catch(noop$2)),a.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(n).then(noop$2)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const r=this.#e.build(this,e);return r.isStaleByTime(resolveStaleTime(e.staleTime,r))?r.fetch(e):Promise.resolve(r.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(noop$2).catch(noop$2)}fetchInfiniteQuery(t){return t.behavior=infiniteQueryBehavior(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(noop$2).catch(noop$2)}ensureInfiniteQueryData(t){return t.behavior=infiniteQueryBehavior(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return onlineManager.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#r}setDefaultOptions(t){this.#r=t}setQueryDefaults(t,e){this.#a.set(hashKey(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...this.#a.values()],r={};return e.forEach(n=>{partialMatchKey(t,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(t,e){this.#n.set(hashKey(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...this.#n.values()],r={};return e.forEach(n=>{partialMatchKey(t,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(t){if(t._defaulted)return t;const e={...this.#r.queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=hashQueryKeyByOptions(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===skipToken&&(e.enabled=!1),e}defaultMutationOptions(t){return t?._defaulted?t:{...this.#r.mutations,...t?.mutationKey&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},QueryClientContext=reactExports.createContext(void 0),useQueryClient=t=>{const e=reactExports.useContext(QueryClientContext);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},QueryClientProvider=({client:t,children:e})=>(reactExports.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),jsxRuntimeExports.jsx(QueryClientContext.Provider,{value:t,children:e})),IsRestoringContext=reactExports.createContext(!1),useIsRestoring=()=>reactExports.useContext(IsRestoringContext);IsRestoringContext.Provider;function createValue(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var QueryErrorResetBoundaryContext=reactExports.createContext(createValue()),useQueryErrorResetBoundary=()=>reactExports.useContext(QueryErrorResetBoundaryContext),ensurePreventErrorBoundaryRetry=(t,e,r)=>{const n=r?.state.error&&typeof t.throwOnError=="function"?shouldThrowError(t.throwOnError,[r.state.error,r]):t.throwOnError;(t.suspense||t.experimental_prefetchInRender||n)&&(e.isReset()||(t.retryOnMount=!1))},useClearResetErrorBoundary=t=>{reactExports.useEffect(()=>{t.clearReset()},[t])},getHasError=({result:t,errorResetBoundary:e,throwOnError:r,query:n,suspense:a})=>t.isError&&!e.isReset()&&!t.isFetching&&n&&(a&&t.data===void 0||shouldThrowError(r,[t.error,n])),ensureSuspenseTimers=t=>{if(t.suspense){const r=a=>a==="static"?a:Math.max(a??1e3,1e3),n=t.staleTime;t.staleTime=typeof n=="function"?(...a)=>r(n(...a)):r(n),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},willFetch=(t,e)=>t.isLoading&&t.isFetching&&!e,shouldSuspend=(t,e)=>t?.suspense&&e.isPending,fetchOptimistic=(t,e,r)=>e.fetchOptimistic(t).catch(()=>{r.clearReset()});function useBaseQuery(t,e,r){const n=useIsRestoring(),a=useQueryErrorResetBoundary(),o=useQueryClient(),l=o.defaultQueryOptions(t);o.getDefaultOptions().queries?._experimental_beforeQuery?.(l);const u=o.getQueryCache().get(l.queryHash);l._optimisticResults=n?"isRestoring":"optimistic",ensureSuspenseTimers(l),ensurePreventErrorBoundaryRetry(l,a,u),useClearResetErrorBoundary(a);const c=!o.getQueryCache().get(l.queryHash),[h]=reactExports.useState(()=>new e(o,l)),v=h.getOptimisticResult(l),g=!n&&t.subscribed!==!1;if(reactExports.useSyncExternalStore(reactExports.useCallback(T=>{const R=g?h.subscribe(notifyManager.batchCalls(T)):noop$2;return h.updateResult(),R},[h,g]),()=>h.getCurrentResult(),()=>h.getCurrentResult()),reactExports.useEffect(()=>{h.setOptions(l)},[l,h]),shouldSuspend(l,v))throw fetchOptimistic(l,h,a);if(getHasError({result:v,errorResetBoundary:a,throwOnError:l.throwOnError,query:u,suspense:l.suspense}))throw v.error;return o.getDefaultOptions().queries?._experimental_afterQuery?.(l,v),l.experimental_prefetchInRender&&!isServer&&willFetch(v,n)&&(c?fetchOptimistic(l,h,a):u?.promise)?.catch(noop$2).finally(()=>{h.updateResult()}),l.notifyOnChangeProps?v:h.trackResult(v)}function useQuery(t,e){return useBaseQuery(t,QueryObserver)}function cc$1(t){if(typeof t=="string"||typeof t=="number")return""+t;let e="";if(Array.isArray(t))for(let r=0,n;r<t.length;r++)(n=cc$1(t[r]))!==""&&(e+=(e&&" ")+n);else for(let r in t)t[r]&&(e+=(e&&" ")+r);return e}var withSelector={exports:{}},withSelector_production={},shim={exports:{}},useSyncExternalStoreShim_production={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredUseSyncExternalStoreShim_production;function requireUseSyncExternalStoreShim_production(){if(hasRequiredUseSyncExternalStoreShim_production)return useSyncExternalStoreShim_production;hasRequiredUseSyncExternalStoreShim_production=1;var t=requireReact();function e(g,T){return g===T&&(g!==0||1/g===1/T)||g!==g&&T!==T}var r=typeof Object.is=="function"?Object.is:e,n=t.useState,a=t.useEffect,o=t.useLayoutEffect,l=t.useDebugValue;function u(g,T){var R=T(),W=n({inst:{value:R,getSnapshot:T}}),k=W[0].inst,J=W[1];return o(function(){k.value=R,k.getSnapshot=T,c(k)&&J({inst:k})},[g,R,T]),a(function(){return c(k)&&J({inst:k}),g(function(){c(k)&&J({inst:k})})},[g]),l(R),R}function c(g){var T=g.getSnapshot;g=g.value;try{var R=T();return!r(g,R)}catch{return!0}}function h(g,T){return T()}var v=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:u;return useSyncExternalStoreShim_production.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:v,useSyncExternalStoreShim_production}var hasRequiredShim;function requireShim(){return hasRequiredShim||(hasRequiredShim=1,shim.exports=requireUseSyncExternalStoreShim_production()),shim.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredWithSelector_production;function requireWithSelector_production(){if(hasRequiredWithSelector_production)return withSelector_production;hasRequiredWithSelector_production=1;var t=requireReact(),e=requireShim();function r(h,v){return h===v&&(h!==0||1/h===1/v)||h!==h&&v!==v}var n=typeof Object.is=="function"?Object.is:r,a=e.useSyncExternalStore,o=t.useRef,l=t.useEffect,u=t.useMemo,c=t.useDebugValue;return withSelector_production.useSyncExternalStoreWithSelector=function(h,v,g,T,R){var W=o(null);if(W.current===null){var k={hasValue:!1,value:null};W.current=k}else k=W.current;W=u(function(){function q(se){if(!Se){if(Se=!0,V=se,se=T(se),R!==void 0&&k.hasValue){var ct=k.value;if(R(ct,se))return Y=ct}return Y=se}if(ct=Y,n(V,se))return ct;var ae=T(se);return R!==void 0&&R(ct,ae)?(V=se,ct):(V=se,Y=ae)}var Se=!1,V,Y,ie=g===void 0?null:g;return[function(){return q(v())},ie===null?void 0:function(){return q(ie())}]},[v,g,T,R]);var J=a(h,W[0],W[1]);return l(function(){k.hasValue=!0,k.value=J},[J]),c(J),J},withSelector_production}var hasRequiredWithSelector;function requireWithSelector(){return hasRequiredWithSelector||(hasRequiredWithSelector=1,withSelector.exports=requireWithSelector_production()),withSelector.exports}var withSelectorExports=requireWithSelector();const useSyncExternalStoreExports=getDefaultExportFromCjs(withSelectorExports),__vite_import_meta_env__={},createStoreImpl=t=>{let e;const r=new Set,n=(v,g)=>{const T=typeof v=="function"?v(e):v;if(!Object.is(T,e)){const R=e;e=g??(typeof T!="object"||T===null)?T:Object.assign({},e,T),r.forEach(W=>W(e,R))}},a=()=>e,c={setState:n,getState:a,getInitialState:()=>h,subscribe:v=>(r.add(v),()=>r.delete(v)),destroy:()=>{(__vite_import_meta_env__?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},h=e=t(n,a,c);return c},createStore=t=>t?createStoreImpl(t):createStoreImpl,{useDebugValue}=React,{useSyncExternalStoreWithSelector}=useSyncExternalStoreExports,identity$3=t=>t;function useStoreWithEqualityFn(t,e=identity$3,r){const n=useSyncExternalStoreWithSelector(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,r);return useDebugValue(n),n}const createWithEqualityFnImpl=(t,e)=>{const r=createStore(t),n=(a,o=e)=>useStoreWithEqualityFn(r,a,o);return Object.assign(n,r),n},createWithEqualityFn=(t,e)=>t?createWithEqualityFnImpl(t,e):createWithEqualityFnImpl;function shallow$1(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[n,a]of t)if(!Object.is(a,e.get(n)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0}const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!1;for(const n of r)if(!Object.prototype.hasOwnProperty.call(e,n)||!Object.is(t[n],e[n]))return!1;return!0}var noop$1={value:()=>{}};function dispatch(){for(var t=0,e=arguments.length,r={},n;t<e;++t){if(!(n=arguments[t]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new Dispatch(r)}function Dispatch(t){this._=t}function parseTypenames$1(t,e){return t.trim().split(/^|\s+/).map(function(r){var n="",a=r.indexOf(".");if(a>=0&&(n=r.slice(a+1),r=r.slice(0,a)),r&&!e.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}Dispatch.prototype=dispatch.prototype={constructor:Dispatch,on:function(t,e){var r=this._,n=parseTypenames$1(t+"",r),a,o=-1,l=n.length;if(arguments.length<2){for(;++o<l;)if((a=(t=n[o]).type)&&(a=get$2(r[a],t.name)))return a;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<l;)if(a=(t=n[o]).type)r[a]=set$1(r[a],t.name,e);else if(e==null)for(a in r)r[a]=set$1(r[a],t.name,null);return this},copy:function(){var t={},e=this._;for(var r in e)t[r]=e[r].slice();return new Dispatch(t)},call:function(t,e){if((a=arguments.length-2)>0)for(var r=new Array(a),n=0,a,o;n<a;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],n=0,a=o.length;n<a;++n)o[n].value.apply(e,r)},apply:function(t,e,r){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var n=this._[t],a=0,o=n.length;a<o;++a)n[a].value.apply(e,r)}};function get$2(t,e){for(var r=0,n=t.length,a;r<n;++r)if((a=t[r]).name===e)return a.value}function set$1(t,e,r){for(var n=0,a=t.length;n<a;++n)if(t[n].name===e){t[n]=noop$1,t=t.slice(0,n).concat(t.slice(n+1));break}return r!=null&&t.push({name:e,value:r}),t}var xhtml="http://www.w3.org/1999/xhtml";const namespaces={svg:"http://www.w3.org/2000/svg",xhtml,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function namespace(t){var e=t+="",r=e.indexOf(":");return r>=0&&(e=t.slice(0,r))!=="xmlns"&&(t=t.slice(r+1)),namespaces.hasOwnProperty(e)?{space:namespaces[e],local:t}:t}function creatorInherit(t){return function(){var e=this.ownerDocument,r=this.namespaceURI;return r===xhtml&&e.documentElement.namespaceURI===xhtml?e.createElement(t):e.createElementNS(r,t)}}function creatorFixed(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function creator(t){var e=namespace(t);return(e.local?creatorFixed:creatorInherit)(e)}function none(){}function selector$h(t){return t==null?none:function(){return this.querySelector(t)}}function selection_select(t){typeof t!="function"&&(t=selector$h(t));for(var e=this._groups,r=e.length,n=new Array(r),a=0;a<r;++a)for(var o=e[a],l=o.length,u=n[a]=new Array(l),c,h,v=0;v<l;++v)(c=o[v])&&(h=t.call(c,c.__data__,v,o))&&("__data__"in c&&(h.__data__=c.__data__),u[v]=h);return new Selection$1(n,this._parents)}function array(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function empty(){return[]}function selectorAll(t){return t==null?empty:function(){return this.querySelectorAll(t)}}function arrayAll(t){return function(){return array(t.apply(this,arguments))}}function selection_selectAll(t){typeof t=="function"?t=arrayAll(t):t=selectorAll(t);for(var e=this._groups,r=e.length,n=[],a=[],o=0;o<r;++o)for(var l=e[o],u=l.length,c,h=0;h<u;++h)(c=l[h])&&(n.push(t.call(c,c.__data__,h,l)),a.push(c));return new Selection$1(n,a)}function matcher(t){return function(){return this.matches(t)}}function childMatcher(t){return function(e){return e.matches(t)}}var find=Array.prototype.find;function childFind(t){return function(){return find.call(this.children,t)}}function childFirst(){return this.firstElementChild}function selection_selectChild(t){return this.select(t==null?childFirst:childFind(typeof t=="function"?t:childMatcher(t)))}var filter=Array.prototype.filter;function children(){return Array.from(this.children)}function childrenFilter(t){return function(){return filter.call(this.children,t)}}function selection_selectChildren(t){return this.selectAll(t==null?children:childrenFilter(typeof t=="function"?t:childMatcher(t)))}function selection_filter(t){typeof t!="function"&&(t=matcher(t));for(var e=this._groups,r=e.length,n=new Array(r),a=0;a<r;++a)for(var o=e[a],l=o.length,u=n[a]=[],c,h=0;h<l;++h)(c=o[h])&&t.call(c,c.__data__,h,o)&&u.push(c);return new Selection$1(n,this._parents)}function sparse(t){return new Array(t.length)}function selection_enter(){return new Selection$1(this._enter||this._groups.map(sparse),this._parents)}function EnterNode(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}EnterNode.prototype={constructor:EnterNode,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function constant$3(t){return function(){return t}}function bindIndex(t,e,r,n,a,o){for(var l=0,u,c=e.length,h=o.length;l<h;++l)(u=e[l])?(u.__data__=o[l],n[l]=u):r[l]=new EnterNode(t,o[l]);for(;l<c;++l)(u=e[l])&&(a[l]=u)}function bindKey(t,e,r,n,a,o,l){var u,c,h=new Map,v=e.length,g=o.length,T=new Array(v),R;for(u=0;u<v;++u)(c=e[u])&&(T[u]=R=l.call(c,c.__data__,u,e)+"",h.has(R)?a[u]=c:h.set(R,c));for(u=0;u<g;++u)R=l.call(t,o[u],u,o)+"",(c=h.get(R))?(n[u]=c,c.__data__=o[u],h.delete(R)):r[u]=new EnterNode(t,o[u]);for(u=0;u<v;++u)(c=e[u])&&h.get(T[u])===c&&(a[u]=c)}function datum(t){return t.__data__}function selection_data(t,e){if(!arguments.length)return Array.from(this,datum);var r=e?bindKey:bindIndex,n=this._parents,a=this._groups;typeof t!="function"&&(t=constant$3(t));for(var o=a.length,l=new Array(o),u=new Array(o),c=new Array(o),h=0;h<o;++h){var v=n[h],g=a[h],T=g.length,R=arraylike(t.call(v,v&&v.__data__,h,n)),W=R.length,k=u[h]=new Array(W),J=l[h]=new Array(W),q=c[h]=new Array(T);r(v,g,k,J,q,R,e);for(var Se=0,V=0,Y,ie;Se<W;++Se)if(Y=k[Se]){for(Se>=V&&(V=Se+1);!(ie=J[V])&&++V<W;);Y._next=ie||null}}return l=new Selection$1(l,n),l._enter=u,l._exit=c,l}function arraylike(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function selection_exit(){return new Selection$1(this._exit||this._groups.map(sparse),this._parents)}function selection_join(t,e,r){var n=this.enter(),a=this,o=this.exit();return typeof t=="function"?(n=t(n),n&&(n=n.selection())):n=n.append(t+""),e!=null&&(a=e(a),a&&(a=a.selection())),r==null?o.remove():r(o),n&&a?n.merge(a).order():a}function selection_merge(t){for(var e=t.selection?t.selection():t,r=this._groups,n=e._groups,a=r.length,o=n.length,l=Math.min(a,o),u=new Array(a),c=0;c<l;++c)for(var h=r[c],v=n[c],g=h.length,T=u[c]=new Array(g),R,W=0;W<g;++W)(R=h[W]||v[W])&&(T[W]=R);for(;c<a;++c)u[c]=r[c];return new Selection$1(u,this._parents)}function selection_order(){for(var t=this._groups,e=-1,r=t.length;++e<r;)for(var n=t[e],a=n.length-1,o=n[a],l;--a>=0;)(l=n[a])&&(o&&l.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(l,o),o=l);return this}function selection_sort(t){t||(t=ascending);function e(g,T){return g&&T?t(g.__data__,T.__data__):!g-!T}for(var r=this._groups,n=r.length,a=new Array(n),o=0;o<n;++o){for(var l=r[o],u=l.length,c=a[o]=new Array(u),h,v=0;v<u;++v)(h=l[v])&&(c[v]=h);c.sort(e)}return new Selection$1(a,this._parents).order()}function ascending(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function selection_call(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function selection_nodes(){return Array.from(this)}function selection_node(){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var n=t[e],a=0,o=n.length;a<o;++a){var l=n[a];if(l)return l}return null}function selection_size(){let t=0;for(const e of this)++t;return t}function selection_empty(){return!this.node()}function selection_each(t){for(var e=this._groups,r=0,n=e.length;r<n;++r)for(var a=e[r],o=0,l=a.length,u;o<l;++o)(u=a[o])&&t.call(u,u.__data__,o,a);return this}function attrRemove$1(t){return function(){this.removeAttribute(t)}}function attrRemoveNS$1(t){return function(){this.removeAttributeNS(t.space,t.local)}}function attrConstant$1(t,e){return function(){this.setAttribute(t,e)}}function attrConstantNS$1(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function attrFunction$1(t,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttribute(t):this.setAttribute(t,r)}}function attrFunctionNS$1(t,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,r)}}function selection_attr(t,e){var r=namespace(t);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((e==null?r.local?attrRemoveNS$1:attrRemove$1:typeof e=="function"?r.local?attrFunctionNS$1:attrFunction$1:r.local?attrConstantNS$1:attrConstant$1)(r,e))}function defaultView(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function styleRemove$1(t){return function(){this.style.removeProperty(t)}}function styleConstant$1(t,e,r){return function(){this.style.setProperty(t,e,r)}}function styleFunction$1(t,e,r){return function(){var n=e.apply(this,arguments);n==null?this.style.removeProperty(t):this.style.setProperty(t,n,r)}}function selection_style(t,e,r){return arguments.length>1?this.each((e==null?styleRemove$1:typeof e=="function"?styleFunction$1:styleConstant$1)(t,e,r??"")):styleValue(this.node(),t)}function styleValue(t,e){return t.style.getPropertyValue(e)||defaultView(t).getComputedStyle(t,null).getPropertyValue(e)}function propertyRemove(t){return function(){delete this[t]}}function propertyConstant(t,e){return function(){this[t]=e}}function propertyFunction(t,e){return function(){var r=e.apply(this,arguments);r==null?delete this[t]:this[t]=r}}function selection_property(t,e){return arguments.length>1?this.each((e==null?propertyRemove:typeof e=="function"?propertyFunction:propertyConstant)(t,e)):this.node()[t]}function classArray(t){return t.trim().split(/^|\s+/)}function classList(t){return t.classList||new ClassList(t)}function ClassList(t){this._node=t,this._names=classArray(t.getAttribute("class")||"")}ClassList.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function classedAdd(t,e){for(var r=classList(t),n=-1,a=e.length;++n<a;)r.add(e[n])}function classedRemove(t,e){for(var r=classList(t),n=-1,a=e.length;++n<a;)r.remove(e[n])}function classedTrue(t){return function(){classedAdd(this,t)}}function classedFalse(t){return function(){classedRemove(this,t)}}function classedFunction(t,e){return function(){(e.apply(this,arguments)?classedAdd:classedRemove)(this,t)}}function selection_classed(t,e){var r=classArray(t+"");if(arguments.length<2){for(var n=classList(this.node()),a=-1,o=r.length;++a<o;)if(!n.contains(r[a]))return!1;return!0}return this.each((typeof e=="function"?classedFunction:e?classedTrue:classedFalse)(r,e))}function textRemove(){this.textContent=""}function textConstant$1(t){return function(){this.textContent=t}}function textFunction$1(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function selection_text(t){return arguments.length?this.each(t==null?textRemove:(typeof t=="function"?textFunction$1:textConstant$1)(t)):this.node().textContent}function htmlRemove(){this.innerHTML=""}function htmlConstant(t){return function(){this.innerHTML=t}}function htmlFunction(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function selection_html(t){return arguments.length?this.each(t==null?htmlRemove:(typeof t=="function"?htmlFunction:htmlConstant)(t)):this.node().innerHTML}function raise(){this.nextSibling&&this.parentNode.appendChild(this)}function selection_raise(){return this.each(raise)}function lower(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function selection_lower(){return this.each(lower)}function selection_append(t){var e=typeof t=="function"?t:creator(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function constantNull(){return null}function selection_insert(t,e){var r=typeof t=="function"?t:creator(t),n=e==null?constantNull:typeof e=="function"?e:selector$h(e);return this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})}function remove(){var t=this.parentNode;t&&t.removeChild(this)}function selection_remove(){return this.each(remove)}function selection_cloneShallow(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function selection_cloneDeep(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function selection_clone(t){return this.select(t?selection_cloneDeep:selection_cloneShallow)}function selection_datum(t){return arguments.length?this.property("__data__",t):this.node().__data__}function contextListener(t){return function(e){t.call(this,e,this.__data__)}}function parseTypenames(t){return t.trim().split(/^|\s+/).map(function(e){var r="",n=e.indexOf(".");return n>=0&&(r=e.slice(n+1),e=e.slice(0,n)),{type:e,name:r}})}function onRemove(t){return function(){var e=this.__on;if(e){for(var r=0,n=-1,a=e.length,o;r<a;++r)o=e[r],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++n]=o;++n?e.length=n:delete this.__on}}}function onAdd(t,e,r){return function(){var n=this.__on,a,o=contextListener(e);if(n){for(var l=0,u=n.length;l<u;++l)if((a=n[l]).type===t.type&&a.name===t.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=o,a.options=r),a.value=e;return}}this.addEventListener(t.type,o,r),a={type:t.type,name:t.name,value:e,listener:o,options:r},n?n.push(a):this.__on=[a]}}function selection_on(t,e,r){var n=parseTypenames(t+""),a,o=n.length,l;if(arguments.length<2){var u=this.node().__on;if(u){for(var c=0,h=u.length,v;c<h;++c)for(a=0,v=u[c];a<o;++a)if((l=n[a]).type===v.type&&l.name===v.name)return v.value}return}for(u=e?onAdd:onRemove,a=0;a<o;++a)this.each(u(n[a],e,r));return this}function dispatchEvent(t,e,r){var n=defaultView(t),a=n.CustomEvent;typeof a=="function"?a=new a(e,r):(a=n.document.createEvent("Event"),r?(a.initEvent(e,r.bubbles,r.cancelable),a.detail=r.detail):a.initEvent(e,!1,!1)),t.dispatchEvent(a)}function dispatchConstant(t,e){return function(){return dispatchEvent(this,t,e)}}function dispatchFunction(t,e){return function(){return dispatchEvent(this,t,e.apply(this,arguments))}}function selection_dispatch(t,e){return this.each((typeof e=="function"?dispatchFunction:dispatchConstant)(t,e))}function*selection_iterator(){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var n=t[e],a=0,o=n.length,l;a<o;++a)(l=n[a])&&(yield l)}var root=[null];function Selection$1(t,e){this._groups=t,this._parents=e}function selection(){return new Selection$1([[document.documentElement]],root)}function selection_selection(){return this}Selection$1.prototype=selection.prototype={constructor:Selection$1,select:selection_select,selectAll:selection_selectAll,selectChild:selection_selectChild,selectChildren:selection_selectChildren,filter:selection_filter,data:selection_data,enter:selection_enter,exit:selection_exit,join:selection_join,merge:selection_merge,selection:selection_selection,order:selection_order,sort:selection_sort,call:selection_call,nodes:selection_nodes,node:selection_node,size:selection_size,empty:selection_empty,each:selection_each,attr:selection_attr,style:selection_style,property:selection_property,classed:selection_classed,text:selection_text,html:selection_html,raise:selection_raise,lower:selection_lower,append:selection_append,insert:selection_insert,remove:selection_remove,clone:selection_clone,datum:selection_datum,on:selection_on,dispatch:selection_dispatch,[Symbol.iterator]:selection_iterator};function select(t){return typeof t=="string"?new Selection$1([[document.querySelector(t)]],[document.documentElement]):new Selection$1([[t]],root)}function sourceEvent(t){let e;for(;e=t.sourceEvent;)t=e;return t}function pointer(t,e){if(t=sourceEvent(t),e===void 0&&(e=t.currentTarget),e){var r=e.ownerSVGElement||e;if(r.createSVGPoint){var n=r.createSVGPoint();return n.x=t.clientX,n.y=t.clientY,n=n.matrixTransform(e.getScreenCTM().inverse()),[n.x,n.y]}if(e.getBoundingClientRect){var a=e.getBoundingClientRect();return[t.clientX-a.left-e.clientLeft,t.clientY-a.top-e.clientTop]}}return[t.pageX,t.pageY]}const nonpassive={passive:!1},nonpassivecapture={capture:!0,passive:!1};function nopropagation$1(t){t.stopImmediatePropagation()}function noevent$1(t){t.preventDefault(),t.stopImmediatePropagation()}function dragDisable(t){var e=t.document.documentElement,r=select(t).on("dragstart.drag",noevent$1,nonpassivecapture);"onselectstart"in e?r.on("selectstart.drag",noevent$1,nonpassivecapture):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function yesdrag(t,e){var r=t.document.documentElement,n=select(t).on("dragstart.drag",null);e&&(n.on("click.drag",noevent$1,nonpassivecapture),setTimeout(function(){n.on("click.drag",null)},0)),"onselectstart"in r?n.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}const constant$2=t=>()=>t;function DragEvent(t,{sourceEvent:e,subject:r,target:n,identifier:a,active:o,x:l,y:u,dx:c,dy:h,dispatch:v}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:l,enumerable:!0,configurable:!0},y:{value:u,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:h,enumerable:!0,configurable:!0},_:{value:v}})}DragEvent.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function defaultFilter$1(t){return!t.ctrlKey&&!t.button}function defaultContainer(){return this.parentNode}function defaultSubject(t,e){return e??{x:t.x,y:t.y}}function defaultTouchable$1(){return navigator.maxTouchPoints||"ontouchstart"in this}function drag(){var t=defaultFilter$1,e=defaultContainer,r=defaultSubject,n=defaultTouchable$1,a={},o=dispatch("start","drag","end"),l=0,u,c,h,v,g=0;function T(Y){Y.on("mousedown.drag",R).filter(n).on("touchstart.drag",J).on("touchmove.drag",q,nonpassive).on("touchend.drag touchcancel.drag",Se).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function R(Y,ie){if(!(v||!t.call(this,Y,ie))){var se=V(this,e.call(this,Y,ie),Y,ie,"mouse");se&&(select(Y.view).on("mousemove.drag",W,nonpassivecapture).on("mouseup.drag",k,nonpassivecapture),dragDisable(Y.view),nopropagation$1(Y),h=!1,u=Y.clientX,c=Y.clientY,se("start",Y))}}function W(Y){if(noevent$1(Y),!h){var ie=Y.clientX-u,se=Y.clientY-c;h=ie*ie+se*se>g}a.mouse("drag",Y)}function k(Y){select(Y.view).on("mousemove.drag mouseup.drag",null),yesdrag(Y.view,h),noevent$1(Y),a.mouse("end",Y)}function J(Y,ie){if(t.call(this,Y,ie)){var se=Y.changedTouches,ct=e.call(this,Y,ie),ae=se.length,st,Ct;for(st=0;st<ae;++st)(Ct=V(this,ct,Y,ie,se[st].identifier,se[st]))&&(nopropagation$1(Y),Ct("start",Y,se[st]))}}function q(Y){var ie=Y.changedTouches,se=ie.length,ct,ae;for(ct=0;ct<se;++ct)(ae=a[ie[ct].identifier])&&(noevent$1(Y),ae("drag",Y,ie[ct]))}function Se(Y){var ie=Y.changedTouches,se=ie.length,ct,ae;for(v&&clearTimeout(v),v=setTimeout(function(){v=null},500),ct=0;ct<se;++ct)(ae=a[ie[ct].identifier])&&(nopropagation$1(Y),ae("end",Y,ie[ct]))}function V(Y,ie,se,ct,ae,st){var Ct=o.copy(),$t=pointer(st||se,ie),jo,Lp,Mn;if((Mn=r.call(Y,new DragEvent("beforestart",{sourceEvent:se,target:T,identifier:ae,active:l,x:$t[0],y:$t[1],dx:0,dy:0,dispatch:Ct}),ct))!=null)return jo=Mn.x-$t[0]||0,Lp=Mn.y-$t[1]||0,function sa(re,$o,qo){var Kt=$t,i0;switch(re){case"start":a[ae]=sa,i0=l++;break;case"end":delete a[ae],--l;case"drag":$t=pointer(qo||$o,ie),i0=l;break}Ct.call(re,Y,new DragEvent(re,{sourceEvent:$o,subject:Mn,target:T,identifier:ae,active:i0,x:$t[0]+jo,y:$t[1]+Lp,dx:$t[0]-Kt[0],dy:$t[1]-Kt[1],dispatch:Ct}),ct)}}return T.filter=function(Y){return arguments.length?(t=typeof Y=="function"?Y:constant$2(!!Y),T):t},T.container=function(Y){return arguments.length?(e=typeof Y=="function"?Y:constant$2(Y),T):e},T.subject=function(Y){return arguments.length?(r=typeof Y=="function"?Y:constant$2(Y),T):r},T.touchable=function(Y){return arguments.length?(n=typeof Y=="function"?Y:constant$2(!!Y),T):n},T.on=function(){var Y=o.on.apply(o,arguments);return Y===o?T:Y},T.clickDistance=function(Y){return arguments.length?(g=(Y=+Y)*Y,T):Math.sqrt(g)},T}function define(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function extend(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function Color(){}var darker=.7,brighter=1/darker,reI="\\s*([+-]?\\d+)\\s*",reN="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",reP="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",reHex=/^#([0-9a-f]{3,8})$/,reRgbInteger=new RegExp(`^rgb\\(${reI},${reI},${reI}\\)$`),reRgbPercent=new RegExp(`^rgb\\(${reP},${reP},${reP}\\)$`),reRgbaInteger=new RegExp(`^rgba\\(${reI},${reI},${reI},${reN}\\)$`),reRgbaPercent=new RegExp(`^rgba\\(${reP},${reP},${reP},${reN}\\)$`),reHslPercent=new RegExp(`^hsl\\(${reN},${reP},${reP}\\)$`),reHslaPercent=new RegExp(`^hsla\\(${reN},${reP},${reP},${reN}\\)$`),named={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};define(Color,color,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:color_formatHex,formatHex:color_formatHex,formatHex8:color_formatHex8,formatHsl:color_formatHsl,formatRgb:color_formatRgb,toString:color_formatRgb});function color_formatHex(){return this.rgb().formatHex()}function color_formatHex8(){return this.rgb().formatHex8()}function color_formatHsl(){return hslConvert(this).formatHsl()}function color_formatRgb(){return this.rgb().formatRgb()}function color(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=reHex.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?rgbn(e):r===3?new Rgb(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?rgba(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?rgba(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=reRgbInteger.exec(t))?new Rgb(e[1],e[2],e[3],1):(e=reRgbPercent.exec(t))?new Rgb(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=reRgbaInteger.exec(t))?rgba(e[1],e[2],e[3],e[4]):(e=reRgbaPercent.exec(t))?rgba(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=reHslPercent.exec(t))?hsla(e[1],e[2]/100,e[3]/100,1):(e=reHslaPercent.exec(t))?hsla(e[1],e[2]/100,e[3]/100,e[4]):named.hasOwnProperty(t)?rgbn(named[t]):t==="transparent"?new Rgb(NaN,NaN,NaN,0):null}function rgbn(t){return new Rgb(t>>16&255,t>>8&255,t&255,1)}function rgba(t,e,r,n){return n<=0&&(t=e=r=NaN),new Rgb(t,e,r,n)}function rgbConvert(t){return t instanceof Color||(t=color(t)),t?(t=t.rgb(),new Rgb(t.r,t.g,t.b,t.opacity)):new Rgb}function rgb(t,e,r,n){return arguments.length===1?rgbConvert(t):new Rgb(t,e,r,n??1)}function Rgb(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}define(Rgb,rgb,extend(Color,{brighter(t){return t=t==null?brighter:Math.pow(brighter,t),new Rgb(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?darker:Math.pow(darker,t),new Rgb(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Rgb(clampi(this.r),clampi(this.g),clampi(this.b),clampa(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rgb_formatHex,formatHex:rgb_formatHex,formatHex8:rgb_formatHex8,formatRgb:rgb_formatRgb,toString:rgb_formatRgb}));function rgb_formatHex(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}`}function rgb_formatHex8(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex((isNaN(this.opacity)?1:this.opacity)*255)}`}function rgb_formatRgb(){const t=clampa(this.opacity);return`${t===1?"rgb(":"rgba("}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${t===1?")":`, ${t})`}`}function clampa(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function clampi(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function hex(t){return t=clampi(t),(t<16?"0":"")+t.toString(16)}function hsla(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new Hsl(t,e,r,n)}function hslConvert(t){if(t instanceof Hsl)return new Hsl(t.h,t.s,t.l,t.opacity);if(t instanceof Color||(t=color(t)),!t)return new Hsl;if(t instanceof Hsl)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,a=Math.min(e,r,n),o=Math.max(e,r,n),l=NaN,u=o-a,c=(o+a)/2;return u?(e===o?l=(r-n)/u+(r<n)*6:r===o?l=(n-e)/u+2:l=(e-r)/u+4,u/=c<.5?o+a:2-o-a,l*=60):u=c>0&&c<1?0:l,new Hsl(l,u,c,t.opacity)}function hsl(t,e,r,n){return arguments.length===1?hslConvert(t):new Hsl(t,e,r,n??1)}function Hsl(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}define(Hsl,hsl,extend(Color,{brighter(t){return t=t==null?brighter:Math.pow(brighter,t),new Hsl(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?darker:Math.pow(darker,t),new Hsl(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,a=2*r-n;return new Rgb(hsl2rgb(t>=240?t-240:t+120,a,n),hsl2rgb(t,a,n),hsl2rgb(t<120?t+240:t-120,a,n),this.opacity)},clamp(){return new Hsl(clamph(this.h),clampt(this.s),clampt(this.l),clampa(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=clampa(this.opacity);return`${t===1?"hsl(":"hsla("}${clamph(this.h)}, ${clampt(this.s)*100}%, ${clampt(this.l)*100}%${t===1?")":`, ${t})`}`}}));function clamph(t){return t=(t||0)%360,t<0?t+360:t}function clampt(t){return Math.max(0,Math.min(1,t||0))}function hsl2rgb(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}const constant$1=t=>()=>t;function linear(t,e){return function(r){return t+r*e}}function exponential(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function gamma(t){return(t=+t)==1?nogamma:function(e,r){return r-e?exponential(e,r,t):constant$1(isNaN(e)?r:e)}}function nogamma(t,e){var r=e-t;return r?linear(t,r):constant$1(isNaN(t)?e:t)}const interpolateRgb=(function t(e){var r=gamma(e);function n(a,o){var l=r((a=rgb(a)).r,(o=rgb(o)).r),u=r(a.g,o.g),c=r(a.b,o.b),h=nogamma(a.opacity,o.opacity);return function(v){return a.r=l(v),a.g=u(v),a.b=c(v),a.opacity=h(v),a+""}}return n.gamma=t,n})(1);function interpolateNumber(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}var reA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB=new RegExp(reA.source,"g");function zero(t){return function(){return t}}function one(t){return function(e){return t(e)+""}}function interpolateString(t,e){var r=reA.lastIndex=reB.lastIndex=0,n,a,o,l=-1,u=[],c=[];for(t=t+"",e=e+"";(n=reA.exec(t))&&(a=reB.exec(e));)(o=a.index)>r&&(o=e.slice(r,o),u[l]?u[l]+=o:u[++l]=o),(n=n[0])===(a=a[0])?u[l]?u[l]+=a:u[++l]=a:(u[++l]=null,c.push({i:l,x:interpolateNumber(n,a)})),r=reB.lastIndex;return r<e.length&&(o=e.slice(r),u[l]?u[l]+=o:u[++l]=o),u.length<2?c[0]?one(c[0].x):zero(e):(e=c.length,function(h){for(var v=0,g;v<e;++v)u[(g=c[v]).i]=g.x(h);return u.join("")})}var degrees=180/Math.PI,identity$2={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function decompose(t,e,r,n,a,o){var l,u,c;return(l=Math.sqrt(t*t+e*e))&&(t/=l,e/=l),(c=t*r+e*n)&&(r-=t*c,n-=e*c),(u=Math.sqrt(r*r+n*n))&&(r/=u,n/=u,c/=u),t*n<e*r&&(t=-t,e=-e,c=-c,l=-l),{translateX:a,translateY:o,rotate:Math.atan2(e,t)*degrees,skewX:Math.atan(c)*degrees,scaleX:l,scaleY:u}}var svgNode;function parseCss(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?identity$2:decompose(e.a,e.b,e.c,e.d,e.e,e.f)}function parseSvg(t){return t==null||(svgNode||(svgNode=document.createElementNS("http://www.w3.org/2000/svg","g")),svgNode.setAttribute("transform",t),!(t=svgNode.transform.baseVal.consolidate()))?identity$2:(t=t.matrix,decompose(t.a,t.b,t.c,t.d,t.e,t.f))}function interpolateTransform(t,e,r,n){function a(h){return h.length?h.pop()+" ":""}function o(h,v,g,T,R,W){if(h!==g||v!==T){var k=R.push("translate(",null,e,null,r);W.push({i:k-4,x:interpolateNumber(h,g)},{i:k-2,x:interpolateNumber(v,T)})}else(g||T)&&R.push("translate("+g+e+T+r)}function l(h,v,g,T){h!==v?(h-v>180?v+=360:v-h>180&&(h+=360),T.push({i:g.push(a(g)+"rotate(",null,n)-2,x:interpolateNumber(h,v)})):v&&g.push(a(g)+"rotate("+v+n)}function u(h,v,g,T){h!==v?T.push({i:g.push(a(g)+"skewX(",null,n)-2,x:interpolateNumber(h,v)}):v&&g.push(a(g)+"skewX("+v+n)}function c(h,v,g,T,R,W){if(h!==g||v!==T){var k=R.push(a(R)+"scale(",null,",",null,")");W.push({i:k-4,x:interpolateNumber(h,g)},{i:k-2,x:interpolateNumber(v,T)})}else(g!==1||T!==1)&&R.push(a(R)+"scale("+g+","+T+")")}return function(h,v){var g=[],T=[];return h=t(h),v=t(v),o(h.translateX,h.translateY,v.translateX,v.translateY,g,T),l(h.rotate,v.rotate,g,T),u(h.skewX,v.skewX,g,T),c(h.scaleX,h.scaleY,v.scaleX,v.scaleY,g,T),h=v=null,function(R){for(var W=-1,k=T.length,J;++W<k;)g[(J=T[W]).i]=J.x(R);return g.join("")}}}var interpolateTransformCss=interpolateTransform(parseCss,"px, ","px)","deg)"),interpolateTransformSvg=interpolateTransform(parseSvg,", ",")",")"),epsilon2=1e-12;function cosh$2(t){return((t=Math.exp(t))+1/t)/2}function sinh$2(t){return((t=Math.exp(t))-1/t)/2}function tanh$1(t){return((t=Math.exp(2*t))-1)/(t+1)}const interpolateZoom=(function t(e,r,n){function a(o,l){var u=o[0],c=o[1],h=o[2],v=l[0],g=l[1],T=l[2],R=v-u,W=g-c,k=R*R+W*W,J,q;if(k<epsilon2)q=Math.log(T/h)/e,J=function(ct){return[u+ct*R,c+ct*W,h*Math.exp(e*ct*q)]};else{var Se=Math.sqrt(k),V=(T*T-h*h+n*k)/(2*h*r*Se),Y=(T*T-h*h-n*k)/(2*T*r*Se),ie=Math.log(Math.sqrt(V*V+1)-V),se=Math.log(Math.sqrt(Y*Y+1)-Y);q=(se-ie)/e,J=function(ct){var ae=ct*q,st=cosh$2(ie),Ct=h/(r*Se)*(st*tanh$1(e*ae+ie)-sinh$2(ie));return[u+Ct*R,c+Ct*W,h*st/cosh$2(e*ae+ie)]}}return J.duration=q*1e3*e/Math.SQRT2,J}return a.rho=function(o){var l=Math.max(.001,+o),u=l*l,c=u*u;return t(l,u,c)},a})(Math.SQRT2,2,4);var frame=0,timeout$1=0,interval=0,pokeDelay=1e3,taskHead,taskTail,clockLast=0,clockNow=0,clockSkew=0,clock=typeof performance=="object"&&performance.now?performance:Date,setFrame=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function now(){return clockNow||(setFrame(clearNow),clockNow=clock.now()+clockSkew)}function clearNow(){clockNow=0}function Timer(){this._call=this._time=this._next=null}Timer.prototype=timer.prototype={constructor:Timer,restart:function(t,e,r){if(typeof t!="function")throw new TypeError("callback is not a function");r=(r==null?now():+r)+(e==null?0:+e),!this._next&&taskTail!==this&&(taskTail?taskTail._next=this:taskHead=this,taskTail=this),this._call=t,this._time=r,sleep()},stop:function(){this._call&&(this._call=null,this._time=1/0,sleep())}};function timer(t,e,r){var n=new Timer;return n.restart(t,e,r),n}function timerFlush(){now(),++frame;for(var t=taskHead,e;t;)(e=clockNow-t._time)>=0&&t._call.call(void 0,e),t=t._next;--frame}function wake(){clockNow=(clockLast=clock.now())+clockSkew,frame=timeout$1=0;try{timerFlush()}finally{frame=0,nap(),clockNow=0}}function poke(){var t=clock.now(),e=t-clockLast;e>pokeDelay&&(clockSkew-=e,clockLast=t)}function nap(){for(var t,e=taskHead,r,n=1/0;e;)e._call?(n>e._time&&(n=e._time),t=e,e=e._next):(r=e._next,e._next=null,e=t?t._next=r:taskHead=r);taskTail=t,sleep(n)}function sleep(t){if(!frame){timeout$1&&(timeout$1=clearTimeout(timeout$1));var e=t-clockNow;e>24?(t<1/0&&(timeout$1=setTimeout(wake,t-clock.now()-clockSkew)),interval&&(interval=clearInterval(interval))):(interval||(clockLast=clock.now(),interval=setInterval(poke,pokeDelay)),frame=1,setFrame(wake))}}function timeout(t,e,r){var n=new Timer;return e=e==null?0:+e,n.restart(a=>{n.stop(),t(a+e)},e,r),n}var emptyOn=dispatch("start","end","cancel","interrupt"),emptyTween=[],CREATED=0,SCHEDULED=1,STARTING=2,STARTED=3,RUNNING=4,ENDING=5,ENDED=6;function schedule(t,e,r,n,a,o){var l=t.__transition;if(!l)t.__transition={};else if(r in l)return;create$1(t,r,{name:e,index:n,group:a,on:emptyOn,tween:emptyTween,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:CREATED})}function init(t,e){var r=get$1(t,e);if(r.state>CREATED)throw new Error("too late; already scheduled");return r}function set(t,e){var r=get$1(t,e);if(r.state>STARTED)throw new Error("too late; already running");return r}function get$1(t,e){var r=t.__transition;if(!r||!(r=r[e]))throw new Error("transition not found");return r}function create$1(t,e,r){var n=t.__transition,a;n[e]=r,r.timer=timer(o,0,r.time);function o(h){r.state=SCHEDULED,r.timer.restart(l,r.delay,r.time),r.delay<=h&&l(h-r.delay)}function l(h){var v,g,T,R;if(r.state!==SCHEDULED)return c();for(v in n)if(R=n[v],R.name===r.name){if(R.state===STARTED)return timeout(l);R.state===RUNNING?(R.state=ENDED,R.timer.stop(),R.on.call("interrupt",t,t.__data__,R.index,R.group),delete n[v]):+v<e&&(R.state=ENDED,R.timer.stop(),R.on.call("cancel",t,t.__data__,R.index,R.group),delete n[v])}if(timeout(function(){r.state===STARTED&&(r.state=RUNNING,r.timer.restart(u,r.delay,r.time),u(h))}),r.state=STARTING,r.on.call("start",t,t.__data__,r.index,r.group),r.state===STARTING){for(r.state=STARTED,a=new Array(T=r.tween.length),v=0,g=-1;v<T;++v)(R=r.tween[v].value.call(t,t.__data__,r.index,r.group))&&(a[++g]=R);a.length=g+1}}function u(h){for(var v=h<r.duration?r.ease.call(null,h/r.duration):(r.timer.restart(c),r.state=ENDING,1),g=-1,T=a.length;++g<T;)a[g].call(t,v);r.state===ENDING&&(r.on.call("end",t,t.__data__,r.index,r.group),c())}function c(){r.state=ENDED,r.timer.stop(),delete n[e];for(var h in n)return;delete t.__transition}}function interrupt(t,e){var r=t.__transition,n,a,o=!0,l;if(r){e=e==null?null:e+"";for(l in r){if((n=r[l]).name!==e){o=!1;continue}a=n.state>STARTING&&n.state<ENDING,n.state=ENDED,n.timer.stop(),n.on.call(a?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete r[l]}o&&delete t.__transition}}function selection_interrupt(t){return this.each(function(){interrupt(this,t)})}function tweenRemove(t,e){var r,n;return function(){var a=set(this,t),o=a.tween;if(o!==r){n=r=o;for(var l=0,u=n.length;l<u;++l)if(n[l].name===e){n=n.slice(),n.splice(l,1);break}}a.tween=n}}function tweenFunction(t,e,r){var n,a;if(typeof r!="function")throw new Error;return function(){var o=set(this,t),l=o.tween;if(l!==n){a=(n=l).slice();for(var u={name:e,value:r},c=0,h=a.length;c<h;++c)if(a[c].name===e){a[c]=u;break}c===h&&a.push(u)}o.tween=a}}function transition_tween(t,e){var r=this._id;if(t+="",arguments.length<2){for(var n=get$1(this.node(),r).tween,a=0,o=n.length,l;a<o;++a)if((l=n[a]).name===t)return l.value;return null}return this.each((e==null?tweenRemove:tweenFunction)(r,t,e))}function tweenValue(t,e,r){var n=t._id;return t.each(function(){var a=set(this,n);(a.value||(a.value={}))[e]=r.apply(this,arguments)}),function(a){return get$1(a,n).value[e]}}function interpolate(t,e){var r;return(typeof e=="number"?interpolateNumber:e instanceof color?interpolateRgb:(r=color(e))?(e=r,interpolateRgb):interpolateString)(t,e)}function attrRemove(t){return function(){this.removeAttribute(t)}}function attrRemoveNS(t){return function(){this.removeAttributeNS(t.space,t.local)}}function attrConstant(t,e,r){var n,a=r+"",o;return function(){var l=this.getAttribute(t);return l===a?null:l===n?o:o=e(n=l,r)}}function attrConstantNS(t,e,r){var n,a=r+"",o;return function(){var l=this.getAttributeNS(t.space,t.local);return l===a?null:l===n?o:o=e(n=l,r)}}function attrFunction(t,e,r){var n,a,o;return function(){var l,u=r(this),c;return u==null?void this.removeAttribute(t):(l=this.getAttribute(t),c=u+"",l===c?null:l===n&&c===a?o:(a=c,o=e(n=l,u)))}}function attrFunctionNS(t,e,r){var n,a,o;return function(){var l,u=r(this),c;return u==null?void this.removeAttributeNS(t.space,t.local):(l=this.getAttributeNS(t.space,t.local),c=u+"",l===c?null:l===n&&c===a?o:(a=c,o=e(n=l,u)))}}function transition_attr(t,e){var r=namespace(t),n=r==="transform"?interpolateTransformSvg:interpolate;return this.attrTween(t,typeof e=="function"?(r.local?attrFunctionNS:attrFunction)(r,n,tweenValue(this,"attr."+t,e)):e==null?(r.local?attrRemoveNS:attrRemove)(r):(r.local?attrConstantNS:attrConstant)(r,n,e))}function attrInterpolate(t,e){return function(r){this.setAttribute(t,e.call(this,r))}}function attrInterpolateNS(t,e){return function(r){this.setAttributeNS(t.space,t.local,e.call(this,r))}}function attrTweenNS(t,e){var r,n;function a(){var o=e.apply(this,arguments);return o!==n&&(r=(n=o)&&attrInterpolateNS(t,o)),r}return a._value=e,a}function attrTween(t,e){var r,n;function a(){var o=e.apply(this,arguments);return o!==n&&(r=(n=o)&&attrInterpolate(t,o)),r}return a._value=e,a}function transition_attrTween(t,e){var r="attr."+t;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;var n=namespace(t);return this.tween(r,(n.local?attrTweenNS:attrTween)(n,e))}function delayFunction(t,e){return function(){init(this,t).delay=+e.apply(this,arguments)}}function delayConstant(t,e){return e=+e,function(){init(this,t).delay=e}}function transition_delay(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?delayFunction:delayConstant)(e,t)):get$1(this.node(),e).delay}function durationFunction(t,e){return function(){set(this,t).duration=+e.apply(this,arguments)}}function durationConstant(t,e){return e=+e,function(){set(this,t).duration=e}}function transition_duration(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?durationFunction:durationConstant)(e,t)):get$1(this.node(),e).duration}function easeConstant(t,e){if(typeof e!="function")throw new Error;return function(){set(this,t).ease=e}}function transition_ease(t){var e=this._id;return arguments.length?this.each(easeConstant(e,t)):get$1(this.node(),e).ease}function easeVarying(t,e){return function(){var r=e.apply(this,arguments);if(typeof r!="function")throw new Error;set(this,t).ease=r}}function transition_easeVarying(t){if(typeof t!="function")throw new Error;return this.each(easeVarying(this._id,t))}function transition_filter(t){typeof t!="function"&&(t=matcher(t));for(var e=this._groups,r=e.length,n=new Array(r),a=0;a<r;++a)for(var o=e[a],l=o.length,u=n[a]=[],c,h=0;h<l;++h)(c=o[h])&&t.call(c,c.__data__,h,o)&&u.push(c);return new Transition(n,this._parents,this._name,this._id)}function transition_merge(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,r=t._groups,n=e.length,a=r.length,o=Math.min(n,a),l=new Array(n),u=0;u<o;++u)for(var c=e[u],h=r[u],v=c.length,g=l[u]=new Array(v),T,R=0;R<v;++R)(T=c[R]||h[R])&&(g[R]=T);for(;u<n;++u)l[u]=e[u];return new Transition(l,this._parents,this._name,this._id)}function start(t){return(t+"").trim().split(/^|\s+/).every(function(e){var r=e.indexOf(".");return r>=0&&(e=e.slice(0,r)),!e||e==="start"})}function onFunction(t,e,r){var n,a,o=start(e)?init:set;return function(){var l=o(this,t),u=l.on;u!==n&&(a=(n=u).copy()).on(e,r),l.on=a}}function transition_on(t,e){var r=this._id;return arguments.length<2?get$1(this.node(),r).on.on(t):this.each(onFunction(r,t,e))}function removeFunction(t){return function(){var e=this.parentNode;for(var r in this.__transition)if(+r!==t)return;e&&e.removeChild(this)}}function transition_remove(){return this.on("end.remove",removeFunction(this._id))}function transition_select(t){var e=this._name,r=this._id;typeof t!="function"&&(t=selector$h(t));for(var n=this._groups,a=n.length,o=new Array(a),l=0;l<a;++l)for(var u=n[l],c=u.length,h=o[l]=new Array(c),v,g,T=0;T<c;++T)(v=u[T])&&(g=t.call(v,v.__data__,T,u))&&("__data__"in v&&(g.__data__=v.__data__),h[T]=g,schedule(h[T],e,r,T,h,get$1(v,r)));return new Transition(o,this._parents,e,r)}function transition_selectAll(t){var e=this._name,r=this._id;typeof t!="function"&&(t=selectorAll(t));for(var n=this._groups,a=n.length,o=[],l=[],u=0;u<a;++u)for(var c=n[u],h=c.length,v,g=0;g<h;++g)if(v=c[g]){for(var T=t.call(v,v.__data__,g,c),R,W=get$1(v,r),k=0,J=T.length;k<J;++k)(R=T[k])&&schedule(R,e,r,k,T,W);o.push(T),l.push(v)}return new Transition(o,l,e,r)}var Selection=selection.prototype.constructor;function transition_selection(){return new Selection(this._groups,this._parents)}function styleNull(t,e){var r,n,a;return function(){var o=styleValue(this,t),l=(this.style.removeProperty(t),styleValue(this,t));return o===l?null:o===r&&l===n?a:a=e(r=o,n=l)}}function styleRemove(t){return function(){this.style.removeProperty(t)}}function styleConstant(t,e,r){var n,a=r+"",o;return function(){var l=styleValue(this,t);return l===a?null:l===n?o:o=e(n=l,r)}}function styleFunction(t,e,r){var n,a,o;return function(){var l=styleValue(this,t),u=r(this),c=u+"";return u==null&&(c=u=(this.style.removeProperty(t),styleValue(this,t))),l===c?null:l===n&&c===a?o:(a=c,o=e(n=l,u))}}function styleMaybeRemove(t,e){var r,n,a,o="style."+e,l="end."+o,u;return function(){var c=set(this,t),h=c.on,v=c.value[o]==null?u||(u=styleRemove(e)):void 0;(h!==r||a!==v)&&(n=(r=h).copy()).on(l,a=v),c.on=n}}function transition_style(t,e,r){var n=(t+="")=="transform"?interpolateTransformCss:interpolate;return e==null?this.styleTween(t,styleNull(t,n)).on("end.style."+t,styleRemove(t)):typeof e=="function"?this.styleTween(t,styleFunction(t,n,tweenValue(this,"style."+t,e))).each(styleMaybeRemove(this._id,t)):this.styleTween(t,styleConstant(t,n,e),r).on("end.style."+t,null)}function styleInterpolate(t,e,r){return function(n){this.style.setProperty(t,e.call(this,n),r)}}function styleTween(t,e,r){var n,a;function o(){var l=e.apply(this,arguments);return l!==a&&(n=(a=l)&&styleInterpolate(t,l,r)),n}return o._value=e,o}function transition_styleTween(t,e,r){var n="style."+(t+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;return this.tween(n,styleTween(t,e,r??""))}function textConstant(t){return function(){this.textContent=t}}function textFunction(t){return function(){var e=t(this);this.textContent=e??""}}function transition_text(t){return this.tween("text",typeof t=="function"?textFunction(tweenValue(this,"text",t)):textConstant(t==null?"":t+""))}function textInterpolate(t){return function(e){this.textContent=t.call(this,e)}}function textTween(t){var e,r;function n(){var a=t.apply(this,arguments);return a!==r&&(e=(r=a)&&textInterpolate(a)),e}return n._value=t,n}function transition_textTween(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,textTween(t))}function transition_transition(){for(var t=this._name,e=this._id,r=newId(),n=this._groups,a=n.length,o=0;o<a;++o)for(var l=n[o],u=l.length,c,h=0;h<u;++h)if(c=l[h]){var v=get$1(c,e);schedule(c,t,r,h,l,{time:v.time+v.delay+v.duration,delay:0,duration:v.duration,ease:v.ease})}return new Transition(n,this._parents,t,r)}function transition_end(){var t,e,r=this,n=r._id,a=r.size();return new Promise(function(o,l){var u={value:l},c={value:function(){--a===0&&o()}};r.each(function(){var h=set(this,n),v=h.on;v!==t&&(e=(t=v).copy(),e._.cancel.push(u),e._.interrupt.push(u),e._.end.push(c)),h.on=e}),a===0&&o()})}var id$1=0;function Transition(t,e,r,n){this._groups=t,this._parents=e,this._name=r,this._id=n}function newId(){return++id$1}var selection_prototype=selection.prototype;Transition.prototype={constructor:Transition,select:transition_select,selectAll:transition_selectAll,selectChild:selection_prototype.selectChild,selectChildren:selection_prototype.selectChildren,filter:transition_filter,merge:transition_merge,selection:transition_selection,transition:transition_transition,call:selection_prototype.call,nodes:selection_prototype.nodes,node:selection_prototype.node,size:selection_prototype.size,empty:selection_prototype.empty,each:selection_prototype.each,on:transition_on,attr:transition_attr,attrTween:transition_attrTween,style:transition_style,styleTween:transition_styleTween,text:transition_text,textTween:transition_textTween,remove:transition_remove,tween:transition_tween,delay:transition_delay,duration:transition_duration,ease:transition_ease,easeVarying:transition_easeVarying,end:transition_end,[Symbol.iterator]:selection_prototype[Symbol.iterator]};function cubicInOut(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var defaultTiming={time:null,delay:0,duration:250,ease:cubicInOut};function inherit(t,e){for(var r;!(r=t.__transition)||!(r=r[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return r}function selection_transition(t){var e,r;t instanceof Transition?(e=t._id,t=t._name):(e=newId(),(r=defaultTiming).time=now(),t=t==null?null:t+"");for(var n=this._groups,a=n.length,o=0;o<a;++o)for(var l=n[o],u=l.length,c,h=0;h<u;++h)(c=l[h])&&schedule(c,t,e,h,l,r||inherit(c,e));return new Transition(n,this._parents,t,e)}selection.prototype.interrupt=selection_interrupt;selection.prototype.transition=selection_transition;const constant=t=>()=>t;function ZoomEvent(t,{sourceEvent:e,target:r,transform:n,dispatch:a}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:n,enumerable:!0,configurable:!0},_:{value:a}})}function Transform(t,e,r){this.k=t,this.x=e,this.y=r}Transform.prototype={constructor:Transform,scale:function(t){return t===1?this:new Transform(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Transform(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var identity$1=new Transform(1,0,0);Transform.prototype;function nopropagation(t){t.stopImmediatePropagation()}function noevent(t){t.preventDefault(),t.stopImmediatePropagation()}function defaultFilter(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function defaultExtent(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function defaultTransform(){return this.__zoom||identity$1}function defaultWheelDelta(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function defaultTouchable(){return navigator.maxTouchPoints||"ontouchstart"in this}function defaultConstrain(t,e,r){var n=t.invertX(e[0][0])-r[0][0],a=t.invertX(e[1][0])-r[1][0],o=t.invertY(e[0][1])-r[0][1],l=t.invertY(e[1][1])-r[1][1];return t.translate(a>n?(n+a)/2:Math.min(0,n)||Math.max(0,a),l>o?(o+l)/2:Math.min(0,o)||Math.max(0,l))}function zoom(){var t=defaultFilter,e=defaultExtent,r=defaultConstrain,n=defaultWheelDelta,a=defaultTouchable,o=[0,1/0],l=[[-1/0,-1/0],[1/0,1/0]],u=250,c=interpolateZoom,h=dispatch("start","zoom","end"),v,g,T,R=500,W=150,k=0,J=10;function q(Mn){Mn.property("__zoom",defaultTransform).on("wheel.zoom",ae,{passive:!1}).on("mousedown.zoom",st).on("dblclick.zoom",Ct).filter(a).on("touchstart.zoom",$t).on("touchmove.zoom",jo).on("touchend.zoom touchcancel.zoom",Lp).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}q.transform=function(Mn,sa,re,$o){var qo=Mn.selection?Mn.selection():Mn;qo.property("__zoom",defaultTransform),Mn!==qo?ie(Mn,sa,re,$o):qo.interrupt().each(function(){se(this,arguments).event($o).start().zoom(null,typeof sa=="function"?sa.apply(this,arguments):sa).end()})},q.scaleBy=function(Mn,sa,re,$o){q.scaleTo(Mn,function(){var qo=this.__zoom.k,Kt=typeof sa=="function"?sa.apply(this,arguments):sa;return qo*Kt},re,$o)},q.scaleTo=function(Mn,sa,re,$o){q.transform(Mn,function(){var qo=e.apply(this,arguments),Kt=this.__zoom,i0=re==null?Y(qo):typeof re=="function"?re.apply(this,arguments):re,Up=Kt.invert(i0),l0=typeof sa=="function"?sa.apply(this,arguments):sa;return r(V(Se(Kt,l0),i0,Up),qo,l)},re,$o)},q.translateBy=function(Mn,sa,re,$o){q.transform(Mn,function(){return r(this.__zoom.translate(typeof sa=="function"?sa.apply(this,arguments):sa,typeof re=="function"?re.apply(this,arguments):re),e.apply(this,arguments),l)},null,$o)},q.translateTo=function(Mn,sa,re,$o,qo){q.transform(Mn,function(){var Kt=e.apply(this,arguments),i0=this.__zoom,Up=$o==null?Y(Kt):typeof $o=="function"?$o.apply(this,arguments):$o;return r(identity$1.translate(Up[0],Up[1]).scale(i0.k).translate(typeof sa=="function"?-sa.apply(this,arguments):-sa,typeof re=="function"?-re.apply(this,arguments):-re),Kt,l)},$o,qo)};function Se(Mn,sa){return sa=Math.max(o[0],Math.min(o[1],sa)),sa===Mn.k?Mn:new Transform(sa,Mn.x,Mn.y)}function V(Mn,sa,re){var $o=sa[0]-re[0]*Mn.k,qo=sa[1]-re[1]*Mn.k;return $o===Mn.x&&qo===Mn.y?Mn:new Transform(Mn.k,$o,qo)}function Y(Mn){return[(+Mn[0][0]+ +Mn[1][0])/2,(+Mn[0][1]+ +Mn[1][1])/2]}function ie(Mn,sa,re,$o){Mn.on("start.zoom",function(){se(this,arguments).event($o).start()}).on("interrupt.zoom end.zoom",function(){se(this,arguments).event($o).end()}).tween("zoom",function(){var qo=this,Kt=arguments,i0=se(qo,Kt).event($o),Up=e.apply(qo,Kt),l0=re==null?Y(Up):typeof re=="function"?re.apply(qo,Kt):re,y0=Math.max(Up[1][0]-Up[0][0],Up[1][1]-Up[0][1]),kp=qo.__zoom,u0=typeof sa=="function"?sa.apply(qo,Kt):sa,f0=c(kp.invert(l0).concat(y0/kp.k),u0.invert(l0).concat(y0/u0.k));return function(v0){if(v0===1)v0=u0;else{var p0=f0(v0),rm=y0/p0[2];v0=new Transform(rm,l0[0]-p0[0]*rm,l0[1]-p0[1]*rm)}i0.zoom(null,v0)}})}function se(Mn,sa,re){return!re&&Mn.__zooming||new ct(Mn,sa)}function ct(Mn,sa){this.that=Mn,this.args=sa,this.active=0,this.sourceEvent=null,this.extent=e.apply(Mn,sa),this.taps=0}ct.prototype={event:function(Mn){return Mn&&(this.sourceEvent=Mn),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(Mn,sa){return this.mouse&&Mn!=="mouse"&&(this.mouse[1]=sa.invert(this.mouse[0])),this.touch0&&Mn!=="touch"&&(this.touch0[1]=sa.invert(this.touch0[0])),this.touch1&&Mn!=="touch"&&(this.touch1[1]=sa.invert(this.touch1[0])),this.that.__zoom=sa,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(Mn){var sa=select(this.that).datum();h.call(Mn,this.that,new ZoomEvent(Mn,{sourceEvent:this.sourceEvent,target:q,transform:this.that.__zoom,dispatch:h}),sa)}};function ae(Mn,...sa){if(!t.apply(this,arguments))return;var re=se(this,sa).event(Mn),$o=this.__zoom,qo=Math.max(o[0],Math.min(o[1],$o.k*Math.pow(2,n.apply(this,arguments)))),Kt=pointer(Mn);if(re.wheel)(re.mouse[0][0]!==Kt[0]||re.mouse[0][1]!==Kt[1])&&(re.mouse[1]=$o.invert(re.mouse[0]=Kt)),clearTimeout(re.wheel);else{if($o.k===qo)return;re.mouse=[Kt,$o.invert(Kt)],interrupt(this),re.start()}noevent(Mn),re.wheel=setTimeout(i0,W),re.zoom("mouse",r(V(Se($o,qo),re.mouse[0],re.mouse[1]),re.extent,l));function i0(){re.wheel=null,re.end()}}function st(Mn,...sa){if(T||!t.apply(this,arguments))return;var re=Mn.currentTarget,$o=se(this,sa,!0).event(Mn),qo=select(Mn.view).on("mousemove.zoom",l0,!0).on("mouseup.zoom",y0,!0),Kt=pointer(Mn,re),i0=Mn.clientX,Up=Mn.clientY;dragDisable(Mn.view),nopropagation(Mn),$o.mouse=[Kt,this.__zoom.invert(Kt)],interrupt(this),$o.start();function l0(kp){if(noevent(kp),!$o.moved){var u0=kp.clientX-i0,f0=kp.clientY-Up;$o.moved=u0*u0+f0*f0>k}$o.event(kp).zoom("mouse",r(V($o.that.__zoom,$o.mouse[0]=pointer(kp,re),$o.mouse[1]),$o.extent,l))}function y0(kp){qo.on("mousemove.zoom mouseup.zoom",null),yesdrag(kp.view,$o.moved),noevent(kp),$o.event(kp).end()}}function Ct(Mn,...sa){if(t.apply(this,arguments)){var re=this.__zoom,$o=pointer(Mn.changedTouches?Mn.changedTouches[0]:Mn,this),qo=re.invert($o),Kt=re.k*(Mn.shiftKey?.5:2),i0=r(V(Se(re,Kt),$o,qo),e.apply(this,sa),l);noevent(Mn),u>0?select(this).transition().duration(u).call(ie,i0,$o,Mn):select(this).call(q.transform,i0,$o,Mn)}}function $t(Mn,...sa){if(t.apply(this,arguments)){var re=Mn.touches,$o=re.length,qo=se(this,sa,Mn.changedTouches.length===$o).event(Mn),Kt,i0,Up,l0;for(nopropagation(Mn),i0=0;i0<$o;++i0)Up=re[i0],l0=pointer(Up,this),l0=[l0,this.__zoom.invert(l0),Up.identifier],qo.touch0?!qo.touch1&&qo.touch0[2]!==l0[2]&&(qo.touch1=l0,qo.taps=0):(qo.touch0=l0,Kt=!0,qo.taps=1+!!v);v&&(v=clearTimeout(v)),Kt&&(qo.taps<2&&(g=l0[0],v=setTimeout(function(){v=null},R)),interrupt(this),qo.start())}}function jo(Mn,...sa){if(this.__zooming){var re=se(this,sa).event(Mn),$o=Mn.changedTouches,qo=$o.length,Kt,i0,Up,l0;for(noevent(Mn),Kt=0;Kt<qo;++Kt)i0=$o[Kt],Up=pointer(i0,this),re.touch0&&re.touch0[2]===i0.identifier?re.touch0[0]=Up:re.touch1&&re.touch1[2]===i0.identifier&&(re.touch1[0]=Up);if(i0=re.that.__zoom,re.touch1){var y0=re.touch0[0],kp=re.touch0[1],u0=re.touch1[0],f0=re.touch1[1],v0=(v0=u0[0]-y0[0])*v0+(v0=u0[1]-y0[1])*v0,p0=(p0=f0[0]-kp[0])*p0+(p0=f0[1]-kp[1])*p0;i0=Se(i0,Math.sqrt(v0/p0)),Up=[(y0[0]+u0[0])/2,(y0[1]+u0[1])/2],l0=[(kp[0]+f0[0])/2,(kp[1]+f0[1])/2]}else if(re.touch0)Up=re.touch0[0],l0=re.touch0[1];else return;re.zoom("touch",r(V(i0,Up,l0),re.extent,l))}}function Lp(Mn,...sa){if(this.__zooming){var re=se(this,sa).event(Mn),$o=Mn.changedTouches,qo=$o.length,Kt,i0;for(nopropagation(Mn),T&&clearTimeout(T),T=setTimeout(function(){T=null},R),Kt=0;Kt<qo;++Kt)i0=$o[Kt],re.touch0&&re.touch0[2]===i0.identifier?delete re.touch0:re.touch1&&re.touch1[2]===i0.identifier&&delete re.touch1;if(re.touch1&&!re.touch0&&(re.touch0=re.touch1,delete re.touch1),re.touch0)re.touch0[1]=this.__zoom.invert(re.touch0[0]);else if(re.end(),re.taps===2&&(i0=pointer(i0,this),Math.hypot(g[0]-i0[0],g[1]-i0[1])<J)){var Up=select(this).on("dblclick.zoom");Up&&Up.apply(this,arguments)}}}return q.wheelDelta=function(Mn){return arguments.length?(n=typeof Mn=="function"?Mn:constant(+Mn),q):n},q.filter=function(Mn){return arguments.length?(t=typeof Mn=="function"?Mn:constant(!!Mn),q):t},q.touchable=function(Mn){return arguments.length?(a=typeof Mn=="function"?Mn:constant(!!Mn),q):a},q.extent=function(Mn){return arguments.length?(e=typeof Mn=="function"?Mn:constant([[+Mn[0][0],+Mn[0][1]],[+Mn[1][0],+Mn[1][1]]]),q):e},q.scaleExtent=function(Mn){return arguments.length?(o[0]=+Mn[0],o[1]=+Mn[1],q):[o[0],o[1]]},q.translateExtent=function(Mn){return arguments.length?(l[0][0]=+Mn[0][0],l[1][0]=+Mn[1][0],l[0][1]=+Mn[0][1],l[1][1]=+Mn[1][1],q):[[l[0][0],l[0][1]],[l[1][0],l[1][1]]]},q.constrain=function(Mn){return arguments.length?(r=Mn,q):r},q.duration=function(Mn){return arguments.length?(u=+Mn,q):u},q.interpolate=function(Mn){return arguments.length?(c=Mn,q):c},q.on=function(){var Mn=h.on.apply(h,arguments);return Mn===h?q:Mn},q.clickDistance=function(Mn){return arguments.length?(k=(Mn=+Mn)*Mn,q):Math.sqrt(k)},q.tapDistance=function(Mn){return arguments.length?(J=+Mn,q):J},q}const StoreContext=reactExports.createContext(null),Provider$1=StoreContext.Provider,errorMessages={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,e)=>`Couldn't create edge for ${t?"target":"source"} handle id: "${t?e.targetHandle:e.sourceHandle}", edge id: ${e.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},zustandErrorMessage=errorMessages.error001();function useStore$1(t,e){const r=reactExports.useContext(StoreContext);if(r===null)throw new Error(zustandErrorMessage);return useStoreWithEqualityFn(r,t,e)}const useStoreApi=()=>{const t=reactExports.useContext(StoreContext);if(t===null)throw new Error(zustandErrorMessage);return reactExports.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe,destroy:t.destroy}),[t])},selector$g=t=>t.userSelectionActive?"none":"all";function Panel({position:t,children:e,className:r,style:n,...a}){const o=useStore$1(selector$g),l=`${t}`.split("-");return React.createElement("div",{className:cc$1(["react-flow__panel",r,...l]),style:{...n,pointerEvents:o},...a},e)}function Attribution({proOptions:t,position:e="bottom-right"}){return t?.hideAttribution?null:React.createElement(Panel,{position:e,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},React.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const EdgeText=({x:t,y:e,label:r,labelStyle:n={},labelShowBg:a=!0,labelBgStyle:o={},labelBgPadding:l=[2,4],labelBgBorderRadius:u=2,children:c,className:h,...v})=>{const g=reactExports.useRef(null),[T,R]=reactExports.useState({x:0,y:0,width:0,height:0}),W=cc$1(["react-flow__edge-textwrapper",h]);return reactExports.useEffect(()=>{if(g.current){const k=g.current.getBBox();R({x:k.x,y:k.y,width:k.width,height:k.height})}},[r]),typeof r>"u"||!r?null:React.createElement("g",{transform:`translate(${t-T.width/2} ${e-T.height/2})`,className:W,visibility:T.width?"visible":"hidden",...v},a&&React.createElement("rect",{width:T.width+2*l[0],x:-l[0],y:-l[1],height:T.height+2*l[1],className:"react-flow__edge-textbg",style:o,rx:u,ry:u}),React.createElement("text",{className:"react-flow__edge-text",y:T.height/2,dy:"0.3em",ref:g,style:n},r),c)};var EdgeText$1=reactExports.memo(EdgeText);const getDimensions=t=>({width:t.offsetWidth,height:t.offsetHeight}),clamp$1=(t,e=0,r=1)=>Math.min(Math.max(t,e),r),clampPosition=(t={x:0,y:0},e)=>({x:clamp$1(t.x,e[0][0],e[1][0]),y:clamp$1(t.y,e[0][1],e[1][1])}),calcAutoPanVelocity=(t,e,r)=>t<e?clamp$1(Math.abs(t-e),1,50)/50:t>r?-clamp$1(Math.abs(t-r),1,50)/50:0,calcAutoPan=(t,e)=>{const r=calcAutoPanVelocity(t.x,35,e.width-35)*20,n=calcAutoPanVelocity(t.y,35,e.height-35)*20;return[r,n]},getHostForElement=t=>t.getRootNode?.()||window?.document,getBoundsOfBoxes=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),rectToBox=({x:t,y:e,width:r,height:n})=>({x:t,y:e,x2:t+r,y2:e+n}),boxToRect=({x:t,y:e,x2:r,y2:n})=>({x:t,y:e,width:r-t,height:n-e}),nodeToRect=t=>({...t.positionAbsolute||{x:0,y:0},width:t.width||0,height:t.height||0}),getOverlappingArea=(t,e)=>{const r=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),n=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(r*n)},isRectObject=t=>isNumeric(t.width)&&isNumeric(t.height)&&isNumeric(t.x)&&isNumeric(t.y),isNumeric=t=>!isNaN(t)&&isFinite(t),internalsSymbol=Symbol.for("internals"),elementSelectionKeys=["Enter"," ","Escape"],devWarn=(t,e)=>{},isReactKeyboardEvent=t=>"nativeEvent"in t;function isInputDOMNode(t){const r=(isReactKeyboardEvent(t)?t.nativeEvent:t).composedPath?.()?.[0]||t.target;return["INPUT","SELECT","TEXTAREA"].includes(r?.nodeName)||r?.hasAttribute("contenteditable")||!!r?.closest(".nokey")}const isMouseEvent=t=>"clientX"in t,getEventPosition=(t,e)=>{const r=isMouseEvent(t),n=r?t.clientX:t.touches?.[0].clientX,a=r?t.clientY:t.touches?.[0].clientY;return{x:n-(e?.left??0),y:a-(e?.top??0)}},isMacOs=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0,BaseEdge=({id:t,path:e,labelX:r,labelY:n,label:a,labelStyle:o,labelShowBg:l,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:h,style:v,markerEnd:g,markerStart:T,interactionWidth:R=20})=>React.createElement(React.Fragment,null,React.createElement("path",{id:t,style:v,d:e,fill:"none",className:"react-flow__edge-path",markerEnd:g,markerStart:T}),R&&React.createElement("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:R,className:"react-flow__edge-interaction"}),a&&isNumeric(r)&&isNumeric(n)?React.createElement(EdgeText$1,{x:r,y:n,label:a,labelStyle:o,labelShowBg:l,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:h}):null);BaseEdge.displayName="BaseEdge";function getMouseHandler$1(t,e,r){return r===void 0?r:n=>{const a=e().edges.find(o=>o.id===t);a&&r(n,{...a})}}function getEdgeCenter({sourceX:t,sourceY:e,targetX:r,targetY:n}){const a=Math.abs(r-t)/2,o=r<t?r+a:r-a,l=Math.abs(n-e)/2,u=n<e?n+l:n-l;return[o,u,a,l]}function getBezierEdgeCenter({sourceX:t,sourceY:e,targetX:r,targetY:n,sourceControlX:a,sourceControlY:o,targetControlX:l,targetControlY:u}){const c=t*.125+a*.375+l*.375+r*.125,h=e*.125+o*.375+u*.375+n*.125,v=Math.abs(c-t),g=Math.abs(h-e);return[c,h,v,g]}var ConnectionMode;(function(t){t.Strict="strict",t.Loose="loose"})(ConnectionMode||(ConnectionMode={}));var PanOnScrollMode;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(PanOnScrollMode||(PanOnScrollMode={}));var SelectionMode;(function(t){t.Partial="partial",t.Full="full"})(SelectionMode||(SelectionMode={}));var ConnectionLineType;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(ConnectionLineType||(ConnectionLineType={}));var MarkerType;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(MarkerType||(MarkerType={}));var Position;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(Position||(Position={}));function getControl({pos:t,x1:e,y1:r,x2:n,y2:a}){return t===Position.Left||t===Position.Right?[.5*(e+n),r]:[e,.5*(r+a)]}function getSimpleBezierPath({sourceX:t,sourceY:e,sourcePosition:r=Position.Bottom,targetX:n,targetY:a,targetPosition:o=Position.Top}){const[l,u]=getControl({pos:r,x1:t,y1:e,x2:n,y2:a}),[c,h]=getControl({pos:o,x1:n,y1:a,x2:t,y2:e}),[v,g,T,R]=getBezierEdgeCenter({sourceX:t,sourceY:e,targetX:n,targetY:a,sourceControlX:l,sourceControlY:u,targetControlX:c,targetControlY:h});return[`M${t},${e} C${l},${u} ${c},${h} ${n},${a}`,v,g,T,R]}const SimpleBezierEdge=reactExports.memo(({sourceX:t,sourceY:e,targetX:r,targetY:n,sourcePosition:a=Position.Bottom,targetPosition:o=Position.Top,label:l,labelStyle:u,labelShowBg:c,labelBgStyle:h,labelBgPadding:v,labelBgBorderRadius:g,style:T,markerEnd:R,markerStart:W,interactionWidth:k})=>{const[J,q,Se]=getSimpleBezierPath({sourceX:t,sourceY:e,sourcePosition:a,targetX:r,targetY:n,targetPosition:o});return React.createElement(BaseEdge,{path:J,labelX:q,labelY:Se,label:l,labelStyle:u,labelShowBg:c,labelBgStyle:h,labelBgPadding:v,labelBgBorderRadius:g,style:T,markerEnd:R,markerStart:W,interactionWidth:k})});SimpleBezierEdge.displayName="SimpleBezierEdge";const handleDirections={[Position.Left]:{x:-1,y:0},[Position.Right]:{x:1,y:0},[Position.Top]:{x:0,y:-1},[Position.Bottom]:{x:0,y:1}},getDirection=({source:t,sourcePosition:e=Position.Bottom,target:r})=>e===Position.Left||e===Position.Right?t.x<r.x?{x:1,y:0}:{x:-1,y:0}:t.y<r.y?{x:0,y:1}:{x:0,y:-1},distance=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function getPoints({source:t,sourcePosition:e=Position.Bottom,target:r,targetPosition:n=Position.Top,center:a,offset:o}){const l=handleDirections[e],u=handleDirections[n],c={x:t.x+l.x*o,y:t.y+l.y*o},h={x:r.x+u.x*o,y:r.y+u.y*o},v=getDirection({source:c,sourcePosition:e,target:h}),g=v.x!==0?"x":"y",T=v[g];let R=[],W,k;const J={x:0,y:0},q={x:0,y:0},[Se,V,Y,ie]=getEdgeCenter({sourceX:t.x,sourceY:t.y,targetX:r.x,targetY:r.y});if(l[g]*u[g]===-1){W=a.x??Se,k=a.y??V;const ct=[{x:W,y:c.y},{x:W,y:h.y}],ae=[{x:c.x,y:k},{x:h.x,y:k}];l[g]===T?R=g==="x"?ct:ae:R=g==="x"?ae:ct}else{const ct=[{x:c.x,y:h.y}],ae=[{x:h.x,y:c.y}];if(g==="x"?R=l.x===T?ae:ct:R=l.y===T?ct:ae,e===n){const Lp=Math.abs(t[g]-r[g]);if(Lp<=o){const Mn=Math.min(o-1,o-Lp);l[g]===T?J[g]=(c[g]>t[g]?-1:1)*Mn:q[g]=(h[g]>r[g]?-1:1)*Mn}}if(e!==n){const Lp=g==="x"?"y":"x",Mn=l[g]===u[Lp],sa=c[Lp]>h[Lp],re=c[Lp]<h[Lp];(l[g]===1&&(!Mn&&sa||Mn&&re)||l[g]!==1&&(!Mn&&re||Mn&&sa))&&(R=g==="x"?ct:ae)}const st={x:c.x+J.x,y:c.y+J.y},Ct={x:h.x+q.x,y:h.y+q.y},$t=Math.max(Math.abs(st.x-R[0].x),Math.abs(Ct.x-R[0].x)),jo=Math.max(Math.abs(st.y-R[0].y),Math.abs(Ct.y-R[0].y));$t>=jo?(W=(st.x+Ct.x)/2,k=R[0].y):(W=R[0].x,k=(st.y+Ct.y)/2)}return[[t,{x:c.x+J.x,y:c.y+J.y},...R,{x:h.x+q.x,y:h.y+q.y},r],W,k,Y,ie]}function getBend(t,e,r,n){const a=Math.min(distance(t,e)/2,distance(e,r)/2,n),{x:o,y:l}=e;if(t.x===o&&o===r.x||t.y===l&&l===r.y)return`L${o} ${l}`;if(t.y===l){const h=t.x<r.x?-1:1,v=t.y<r.y?1:-1;return`L ${o+a*h},${l}Q ${o},${l} ${o},${l+a*v}`}const u=t.x<r.x?1:-1,c=t.y<r.y?-1:1;return`L ${o},${l+a*c}Q ${o},${l} ${o+a*u},${l}`}function getSmoothStepPath({sourceX:t,sourceY:e,sourcePosition:r=Position.Bottom,targetX:n,targetY:a,targetPosition:o=Position.Top,borderRadius:l=5,centerX:u,centerY:c,offset:h=20}){const[v,g,T,R,W]=getPoints({source:{x:t,y:e},sourcePosition:r,target:{x:n,y:a},targetPosition:o,center:{x:u,y:c},offset:h});return[v.reduce((J,q,Se)=>{let V="";return Se>0&&Se<v.length-1?V=getBend(v[Se-1],q,v[Se+1],l):V=`${Se===0?"M":"L"}${q.x} ${q.y}`,J+=V,J},""),g,T,R,W]}const SmoothStepEdge=reactExports.memo(({sourceX:t,sourceY:e,targetX:r,targetY:n,label:a,labelStyle:o,labelShowBg:l,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:h,style:v,sourcePosition:g=Position.Bottom,targetPosition:T=Position.Top,markerEnd:R,markerStart:W,pathOptions:k,interactionWidth:J})=>{const[q,Se,V]=getSmoothStepPath({sourceX:t,sourceY:e,sourcePosition:g,targetX:r,targetY:n,targetPosition:T,borderRadius:k?.borderRadius,offset:k?.offset});return React.createElement(BaseEdge,{path:q,labelX:Se,labelY:V,label:a,labelStyle:o,labelShowBg:l,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:h,style:v,markerEnd:R,markerStart:W,interactionWidth:J})});SmoothStepEdge.displayName="SmoothStepEdge";const StepEdge=reactExports.memo(t=>React.createElement(SmoothStepEdge,{...t,pathOptions:reactExports.useMemo(()=>({borderRadius:0,offset:t.pathOptions?.offset}),[t.pathOptions?.offset])}));StepEdge.displayName="StepEdge";function getStraightPath({sourceX:t,sourceY:e,targetX:r,targetY:n}){const[a,o,l,u]=getEdgeCenter({sourceX:t,sourceY:e,targetX:r,targetY:n});return[`M ${t},${e}L ${r},${n}`,a,o,l,u]}const StraightEdge=reactExports.memo(({sourceX:t,sourceY:e,targetX:r,targetY:n,label:a,labelStyle:o,labelShowBg:l,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:h,style:v,markerEnd:g,markerStart:T,interactionWidth:R})=>{const[W,k,J]=getStraightPath({sourceX:t,sourceY:e,targetX:r,targetY:n});return React.createElement(BaseEdge,{path:W,labelX:k,labelY:J,label:a,labelStyle:o,labelShowBg:l,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:h,style:v,markerEnd:g,markerStart:T,interactionWidth:R})});StraightEdge.displayName="StraightEdge";function calculateControlOffset(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function getControlWithCurvature({pos:t,x1:e,y1:r,x2:n,y2:a,c:o}){switch(t){case Position.Left:return[e-calculateControlOffset(e-n,o),r];case Position.Right:return[e+calculateControlOffset(n-e,o),r];case Position.Top:return[e,r-calculateControlOffset(r-a,o)];case Position.Bottom:return[e,r+calculateControlOffset(a-r,o)]}}function getBezierPath({sourceX:t,sourceY:e,sourcePosition:r=Position.Bottom,targetX:n,targetY:a,targetPosition:o=Position.Top,curvature:l=.25}){const[u,c]=getControlWithCurvature({pos:r,x1:t,y1:e,x2:n,y2:a,c:l}),[h,v]=getControlWithCurvature({pos:o,x1:n,y1:a,x2:t,y2:e,c:l}),[g,T,R,W]=getBezierEdgeCenter({sourceX:t,sourceY:e,targetX:n,targetY:a,sourceControlX:u,sourceControlY:c,targetControlX:h,targetControlY:v});return[`M${t},${e} C${u},${c} ${h},${v} ${n},${a}`,g,T,R,W]}const BezierEdge=reactExports.memo(({sourceX:t,sourceY:e,targetX:r,targetY:n,sourcePosition:a=Position.Bottom,targetPosition:o=Position.Top,label:l,labelStyle:u,labelShowBg:c,labelBgStyle:h,labelBgPadding:v,labelBgBorderRadius:g,style:T,markerEnd:R,markerStart:W,pathOptions:k,interactionWidth:J})=>{const[q,Se,V]=getBezierPath({sourceX:t,sourceY:e,sourcePosition:a,targetX:r,targetY:n,targetPosition:o,curvature:k?.curvature});return React.createElement(BaseEdge,{path:q,labelX:Se,labelY:V,label:l,labelStyle:u,labelShowBg:c,labelBgStyle:h,labelBgPadding:v,labelBgBorderRadius:g,style:T,markerEnd:R,markerStart:W,interactionWidth:J})});BezierEdge.displayName="BezierEdge";const NodeIdContext=reactExports.createContext(null),Provider$2=NodeIdContext.Provider;NodeIdContext.Consumer;const useNodeId=()=>reactExports.useContext(NodeIdContext),isEdge=t=>"id"in t&&"source"in t&&"target"in t,getEdgeId=({source:t,sourceHandle:e,target:r,targetHandle:n})=>`reactflow__edge-${t}${e||""}-${r}${n||""}`,getMarkerId=(t,e)=>typeof t>"u"?"":typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(n=>`${n}=${t[n]}`).join("&")}`,connectionExists=(t,e)=>e.some(r=>r.source===t.source&&r.target===t.target&&(r.sourceHandle===t.sourceHandle||!r.sourceHandle&&!t.sourceHandle)&&(r.targetHandle===t.targetHandle||!r.targetHandle&&!t.targetHandle)),addEdge=(t,e)=>{if(!t.source||!t.target)return e;let r;return isEdge(t)?r={...t}:r={...t,id:getEdgeId(t)},connectionExists(r,e)?e:e.concat(r)},pointToRendererPoint=({x:t,y:e},[r,n,a],o,[l,u])=>{const c={x:(t-r)/a,y:(e-n)/a};return o?{x:l*Math.round(c.x/l),y:u*Math.round(c.y/u)}:c},rendererPointToPoint=({x:t,y:e},[r,n,a])=>({x:t*a+r,y:e*a+n}),getNodePositionWithOrigin=(t,e=[0,0])=>{if(!t)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const r=(t.width??0)*e[0],n=(t.height??0)*e[1],a={x:t.position.x-r,y:t.position.y-n};return{...a,positionAbsolute:t.positionAbsolute?{x:t.positionAbsolute.x-r,y:t.positionAbsolute.y-n}:a}},getNodesBounds=(t,e=[0,0])=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const r=t.reduce((n,a)=>{const{x:o,y:l}=getNodePositionWithOrigin(a,e).positionAbsolute;return getBoundsOfBoxes(n,rectToBox({x:o,y:l,width:a.width||0,height:a.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return boxToRect(r)},getNodesInside=(t,e,[r,n,a]=[0,0,1],o=!1,l=!1,u=[0,0])=>{const c={x:(e.x-r)/a,y:(e.y-n)/a,width:e.width/a,height:e.height/a},h=[];return t.forEach(v=>{const{width:g,height:T,selectable:R=!0,hidden:W=!1}=v;if(l&&!R||W)return!1;const{positionAbsolute:k}=getNodePositionWithOrigin(v,u),J={x:k.x,y:k.y,width:g||0,height:T||0},q=getOverlappingArea(c,J),Se=typeof g>"u"||typeof T>"u"||g===null||T===null,V=o&&q>0,Y=(g||0)*(T||0);(Se||V||q>=Y||v.dragging)&&h.push(v)}),h},getConnectedEdges=(t,e)=>{const r=t.map(n=>n.id);return e.filter(n=>r.includes(n.source)||r.includes(n.target))},getViewportForBounds=(t,e,r,n,a,o=.1)=>{const l=e/(t.width*(1+o)),u=r/(t.height*(1+o)),c=Math.min(l,u),h=clamp$1(c,n,a),v=t.x+t.width/2,g=t.y+t.height/2,T=e/2-v*h,R=r/2-g*h;return{x:T,y:R,zoom:h}},getD3Transition=(t,e=0)=>t.transition().duration(e);function getHandles(t,e,r,n){return(e[r]||[]).reduce((a,o)=>(`${t.id}-${o.id}-${r}`!==n&&a.push({id:o.id||null,type:r,nodeId:t.id,x:(t.positionAbsolute?.x??0)+o.x+o.width/2,y:(t.positionAbsolute?.y??0)+o.y+o.height/2}),a),[])}function getClosestHandle(t,e,r,n,a,o){const{x:l,y:u}=getEventPosition(t),h=e.elementsFromPoint(l,u).find(W=>W.classList.contains("react-flow__handle"));if(h){const W=h.getAttribute("data-nodeid");if(W){const k=getHandleType(void 0,h),J=h.getAttribute("data-handleid"),q=o({nodeId:W,id:J,type:k});if(q){const Se=a.find(V=>V.nodeId===W&&V.type===k&&V.id===J);return{handle:{id:J,type:k,nodeId:W,x:Se?.x||r.x,y:Se?.y||r.y},validHandleResult:q}}}}let v=[],g=1/0;if(a.forEach(W=>{const k=Math.sqrt((W.x-r.x)**2+(W.y-r.y)**2);if(k<=n){const J=o(W);k<=g&&(k<g?v=[{handle:W,validHandleResult:J}]:k===g&&v.push({handle:W,validHandleResult:J}),g=k)}}),!v.length)return{handle:null,validHandleResult:defaultResult()};if(v.length===1)return v[0];const T=v.some(({validHandleResult:W})=>W.isValid),R=v.some(({handle:W})=>W.type==="target");return v.find(({handle:W,validHandleResult:k})=>R?W.type==="target":T?k.isValid:!0)||v[0]}const nullConnection={source:null,target:null,sourceHandle:null,targetHandle:null},defaultResult=()=>({handleDomNode:null,isValid:!1,connection:nullConnection,endHandle:null});function isValidHandle(t,e,r,n,a,o,l){const u=a==="target",c=l.querySelector(`.react-flow__handle[data-id="${t?.nodeId}-${t?.id}-${t?.type}"]`),h={...defaultResult(),handleDomNode:c};if(c){const v=getHandleType(void 0,c),g=c.getAttribute("data-nodeid"),T=c.getAttribute("data-handleid"),R=c.classList.contains("connectable"),W=c.classList.contains("connectableend"),k={source:u?g:r,sourceHandle:u?T:n,target:u?r:g,targetHandle:u?n:T};h.connection=k,R&&W&&(e===ConnectionMode.Strict?u&&v==="source"||!u&&v==="target":g!==r||T!==n)&&(h.endHandle={nodeId:g,handleId:T,type:v},h.isValid=o(k))}return h}function getHandleLookup({nodes:t,nodeId:e,handleId:r,handleType:n}){return t.reduce((a,o)=>{if(o[internalsSymbol]){const{handleBounds:l}=o[internalsSymbol];let u=[],c=[];l&&(u=getHandles(o,l,"source",`${e}-${r}-${n}`),c=getHandles(o,l,"target",`${e}-${r}-${n}`)),a.push(...u,...c)}return a},[])}function getHandleType(t,e){return t||(e?.classList.contains("target")?"target":e?.classList.contains("source")?"source":null)}function resetRecentHandle(t){t?.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function getConnectionStatus(t,e){let r=null;return e?r="valid":t&&!e&&(r="invalid"),r}function handlePointerDown({event:t,handleId:e,nodeId:r,onConnect:n,isTarget:a,getState:o,setState:l,isValidConnection:u,edgeUpdaterType:c,onReconnectEnd:h}){const v=getHostForElement(t.target),{connectionMode:g,domNode:T,autoPanOnConnect:R,connectionRadius:W,onConnectStart:k,panBy:J,getNodes:q,cancelConnection:Se}=o();let V=0,Y;const{x:ie,y:se}=getEventPosition(t),ct=v?.elementFromPoint(ie,se),ae=getHandleType(c,ct),st=T?.getBoundingClientRect();if(!st||!ae)return;let Ct,$t=getEventPosition(t,st),jo=!1,Lp=null,Mn=!1,sa=null;const re=getHandleLookup({nodes:q(),nodeId:r,handleId:e,handleType:ae}),$o=()=>{if(!R)return;const[i0,Up]=calcAutoPan($t,st);J({x:i0,y:Up}),V=requestAnimationFrame($o)};l({connectionPosition:$t,connectionStatus:null,connectionNodeId:r,connectionHandleId:e,connectionHandleType:ae,connectionStartHandle:{nodeId:r,handleId:e,type:ae},connectionEndHandle:null}),k?.(t,{nodeId:r,handleId:e,handleType:ae});function qo(i0){const{transform:Up}=o();$t=getEventPosition(i0,st);const{handle:l0,validHandleResult:y0}=getClosestHandle(i0,v,pointToRendererPoint($t,Up,!1,[1,1]),W,re,kp=>isValidHandle(kp,g,r,e,a?"target":"source",u,v));if(Y=l0,jo||($o(),jo=!0),sa=y0.handleDomNode,Lp=y0.connection,Mn=y0.isValid,l({connectionPosition:Y&&Mn?rendererPointToPoint({x:Y.x,y:Y.y},Up):$t,connectionStatus:getConnectionStatus(!!Y,Mn),connectionEndHandle:y0.endHandle}),!Y&&!Mn&&!sa)return resetRecentHandle(Ct);Lp.source!==Lp.target&&sa&&(resetRecentHandle(Ct),Ct=sa,sa.classList.add("connecting","react-flow__handle-connecting"),sa.classList.toggle("valid",Mn),sa.classList.toggle("react-flow__handle-valid",Mn))}function Kt(i0){(Y||sa)&&Lp&&Mn&&n?.(Lp),o().onConnectEnd?.(i0),c&&h?.(i0),resetRecentHandle(Ct),Se(),cancelAnimationFrame(V),jo=!1,Mn=!1,Lp=null,sa=null,v.removeEventListener("mousemove",qo),v.removeEventListener("mouseup",Kt),v.removeEventListener("touchmove",qo),v.removeEventListener("touchend",Kt)}v.addEventListener("mousemove",qo),v.addEventListener("mouseup",Kt),v.addEventListener("touchmove",qo),v.addEventListener("touchend",Kt)}const alwaysValid=()=>!0,selector$f=t=>({connectionStartHandle:t.connectionStartHandle,connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName}),connectingSelector=(t,e,r)=>n=>{const{connectionStartHandle:a,connectionEndHandle:o,connectionClickStartHandle:l}=n;return{connecting:a?.nodeId===t&&a?.handleId===e&&a?.type===r||o?.nodeId===t&&o?.handleId===e&&o?.type===r,clickConnecting:l?.nodeId===t&&l?.handleId===e&&l?.type===r}},Handle=reactExports.forwardRef(({type:t="source",position:e=Position.Top,isValidConnection:r,isConnectable:n=!0,isConnectableStart:a=!0,isConnectableEnd:o=!0,id:l,onConnect:u,children:c,className:h,onMouseDown:v,onTouchStart:g,...T},R)=>{const W=l||null,k=t==="target",J=useStoreApi(),q=useNodeId(),{connectOnClick:Se,noPanClassName:V}=useStore$1(selector$f,shallow$1),{connecting:Y,clickConnecting:ie}=useStore$1(connectingSelector(q,W,t),shallow$1);q||J.getState().onError?.("010",errorMessages.error010());const se=st=>{const{defaultEdgeOptions:Ct,onConnect:$t,hasDefaultEdges:jo}=J.getState(),Lp={...Ct,...st};if(jo){const{edges:Mn,setEdges:sa}=J.getState();sa(addEdge(Lp,Mn))}$t?.(Lp),u?.(Lp)},ct=st=>{if(!q)return;const Ct=isMouseEvent(st);a&&(Ct&&st.button===0||!Ct)&&handlePointerDown({event:st,handleId:W,nodeId:q,onConnect:se,isTarget:k,getState:J.getState,setState:J.setState,isValidConnection:r||J.getState().isValidConnection||alwaysValid}),Ct?v?.(st):g?.(st)},ae=st=>{const{onClickConnectStart:Ct,onClickConnectEnd:$t,connectionClickStartHandle:jo,connectionMode:Lp,isValidConnection:Mn}=J.getState();if(!q||!jo&&!a)return;if(!jo){Ct?.(st,{nodeId:q,handleId:W,handleType:t}),J.setState({connectionClickStartHandle:{nodeId:q,type:t,handleId:W}});return}const sa=getHostForElement(st.target),re=r||Mn||alwaysValid,{connection:$o,isValid:qo}=isValidHandle({nodeId:q,id:W,type:t},Lp,jo.nodeId,jo.handleId||null,jo.type,re,sa);qo&&se($o),$t?.(st),J.setState({connectionClickStartHandle:null})};return React.createElement("div",{"data-handleid":W,"data-nodeid":q,"data-handlepos":e,"data-id":`${q}-${W}-${t}`,className:cc$1(["react-flow__handle",`react-flow__handle-${e}`,"nodrag",V,h,{source:!k,target:k,connectable:n,connectablestart:a,connectableend:o,connecting:ie,connectionindicator:n&&(a&&!Y||o&&Y)}]),onMouseDown:ct,onTouchStart:ct,onClick:Se?ae:void 0,ref:R,...T},c)});Handle.displayName="Handle";var Handle$1=reactExports.memo(Handle);const DefaultNode=({data:t,isConnectable:e,targetPosition:r=Position.Top,sourcePosition:n=Position.Bottom})=>React.createElement(React.Fragment,null,React.createElement(Handle$1,{type:"target",position:r,isConnectable:e}),t?.label,React.createElement(Handle$1,{type:"source",position:n,isConnectable:e}));DefaultNode.displayName="DefaultNode";var DefaultNode$1=reactExports.memo(DefaultNode);const InputNode=({data:t,isConnectable:e,sourcePosition:r=Position.Bottom})=>React.createElement(React.Fragment,null,t?.label,React.createElement(Handle$1,{type:"source",position:r,isConnectable:e}));InputNode.displayName="InputNode";var InputNode$1=reactExports.memo(InputNode);const OutputNode=({data:t,isConnectable:e,targetPosition:r=Position.Top})=>React.createElement(React.Fragment,null,React.createElement(Handle$1,{type:"target",position:r,isConnectable:e}),t?.label);OutputNode.displayName="OutputNode";var OutputNode$1=reactExports.memo(OutputNode);const GroupNode=()=>null;GroupNode.displayName="GroupNode";const selector$e=t=>({selectedNodes:t.getNodes().filter(e=>e.selected),selectedEdges:t.edges.filter(e=>e.selected).map(e=>({...e}))}),selectId=t=>t.id;function areEqual(t,e){return shallow$1(t.selectedNodes.map(selectId),e.selectedNodes.map(selectId))&&shallow$1(t.selectedEdges.map(selectId),e.selectedEdges.map(selectId))}const SelectionListener=reactExports.memo(({onSelectionChange:t})=>{const e=useStoreApi(),{selectedNodes:r,selectedEdges:n}=useStore$1(selector$e,areEqual);return reactExports.useEffect(()=>{const a={nodes:r,edges:n};t?.(a),e.getState().onSelectionChange.forEach(o=>o(a))},[r,n,t]),null});SelectionListener.displayName="SelectionListener";const changeSelector=t=>!!t.onSelectionChange;function Wrapper$1({onSelectionChange:t}){const e=useStore$1(changeSelector);return t||e?React.createElement(SelectionListener,{onSelectionChange:t}):null}const selector$d=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset});function useStoreUpdater(t,e){reactExports.useEffect(()=>{typeof t<"u"&&e(t)},[t])}function useDirectStoreUpdater(t,e,r){reactExports.useEffect(()=>{typeof e<"u"&&r({[t]:e})},[e])}const StoreUpdater=({nodes:t,edges:e,defaultNodes:r,defaultEdges:n,onConnect:a,onConnectStart:o,onConnectEnd:l,onClickConnectStart:u,onClickConnectEnd:c,nodesDraggable:h,nodesConnectable:v,nodesFocusable:g,edgesFocusable:T,edgesUpdatable:R,elevateNodesOnSelect:W,minZoom:k,maxZoom:J,nodeExtent:q,onNodesChange:Se,onEdgesChange:V,elementsSelectable:Y,connectionMode:ie,snapGrid:se,snapToGrid:ct,translateExtent:ae,connectOnClick:st,defaultEdgeOptions:Ct,fitView:$t,fitViewOptions:jo,onNodesDelete:Lp,onEdgesDelete:Mn,onNodeDrag:sa,onNodeDragStart:re,onNodeDragStop:$o,onSelectionDrag:qo,onSelectionDragStart:Kt,onSelectionDragStop:i0,noPanClassName:Up,nodeOrigin:l0,rfId:y0,autoPanOnConnect:kp,autoPanOnNodeDrag:u0,onError:f0,connectionRadius:v0,isValidConnection:p0,nodeDragThreshold:rm})=>{const{setNodes:am,setEdges:ym,setDefaultNodesAndEdges:Wm,setMinZoom:h0,setMaxZoom:f1,setTranslateExtent:T1,setNodeExtent:I1,reset:p1}=useStore$1(selector$d,shallow$1),Qm=useStoreApi();return reactExports.useEffect(()=>{const m1=n?.map(W1=>({...W1,...Ct}));return Wm(r,m1),()=>{p1()}},[]),useDirectStoreUpdater("defaultEdgeOptions",Ct,Qm.setState),useDirectStoreUpdater("connectionMode",ie,Qm.setState),useDirectStoreUpdater("onConnect",a,Qm.setState),useDirectStoreUpdater("onConnectStart",o,Qm.setState),useDirectStoreUpdater("onConnectEnd",l,Qm.setState),useDirectStoreUpdater("onClickConnectStart",u,Qm.setState),useDirectStoreUpdater("onClickConnectEnd",c,Qm.setState),useDirectStoreUpdater("nodesDraggable",h,Qm.setState),useDirectStoreUpdater("nodesConnectable",v,Qm.setState),useDirectStoreUpdater("nodesFocusable",g,Qm.setState),useDirectStoreUpdater("edgesFocusable",T,Qm.setState),useDirectStoreUpdater("edgesUpdatable",R,Qm.setState),useDirectStoreUpdater("elementsSelectable",Y,Qm.setState),useDirectStoreUpdater("elevateNodesOnSelect",W,Qm.setState),useDirectStoreUpdater("snapToGrid",ct,Qm.setState),useDirectStoreUpdater("snapGrid",se,Qm.setState),useDirectStoreUpdater("onNodesChange",Se,Qm.setState),useDirectStoreUpdater("onEdgesChange",V,Qm.setState),useDirectStoreUpdater("connectOnClick",st,Qm.setState),useDirectStoreUpdater("fitViewOnInit",$t,Qm.setState),useDirectStoreUpdater("fitViewOnInitOptions",jo,Qm.setState),useDirectStoreUpdater("onNodesDelete",Lp,Qm.setState),useDirectStoreUpdater("onEdgesDelete",Mn,Qm.setState),useDirectStoreUpdater("onNodeDrag",sa,Qm.setState),useDirectStoreUpdater("onNodeDragStart",re,Qm.setState),useDirectStoreUpdater("onNodeDragStop",$o,Qm.setState),useDirectStoreUpdater("onSelectionDrag",qo,Qm.setState),useDirectStoreUpdater("onSelectionDragStart",Kt,Qm.setState),useDirectStoreUpdater("onSelectionDragStop",i0,Qm.setState),useDirectStoreUpdater("noPanClassName",Up,Qm.setState),useDirectStoreUpdater("nodeOrigin",l0,Qm.setState),useDirectStoreUpdater("rfId",y0,Qm.setState),useDirectStoreUpdater("autoPanOnConnect",kp,Qm.setState),useDirectStoreUpdater("autoPanOnNodeDrag",u0,Qm.setState),useDirectStoreUpdater("onError",f0,Qm.setState),useDirectStoreUpdater("connectionRadius",v0,Qm.setState),useDirectStoreUpdater("isValidConnection",p0,Qm.setState),useDirectStoreUpdater("nodeDragThreshold",rm,Qm.setState),useStoreUpdater(t,am),useStoreUpdater(e,ym),useStoreUpdater(k,h0),useStoreUpdater(J,f1),useStoreUpdater(ae,T1),useStoreUpdater(q,I1),null},style={display:"none"},ariaLiveStyle={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},ARIA_NODE_DESC_KEY="react-flow__node-desc",ARIA_EDGE_DESC_KEY="react-flow__edge-desc",ARIA_LIVE_MESSAGE="react-flow__aria-live",selector$c=t=>t.ariaLiveMessage;function AriaLiveMessage({rfId:t}){const e=useStore$1(selector$c);return React.createElement("div",{id:`${ARIA_LIVE_MESSAGE}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:ariaLiveStyle},e)}function A11yDescriptions({rfId:t,disableKeyboardA11y:e}){return React.createElement(React.Fragment,null,React.createElement("div",{id:`${ARIA_NODE_DESC_KEY}-${t}`,style},"Press enter or space to select a node.",!e&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),React.createElement("div",{id:`${ARIA_EDGE_DESC_KEY}-${t}`,style},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!e&&React.createElement(AriaLiveMessage,{rfId:t}))}var useKeyPress=(t=null,e={actInsideInputWithModifier:!0})=>{const[r,n]=reactExports.useState(!1),a=reactExports.useRef(!1),o=reactExports.useRef(new Set([])),[l,u]=reactExports.useMemo(()=>{if(t!==null){const h=(Array.isArray(t)?t:[t]).filter(g=>typeof g=="string").map(g=>g.split("+")),v=h.reduce((g,T)=>g.concat(...T),[]);return[h,v]}return[[],[]]},[t]);return reactExports.useEffect(()=>{const c=typeof document<"u"?document:null,h=e?.target||c;if(t!==null){const v=R=>{if(a.current=R.ctrlKey||R.metaKey||R.shiftKey,(!a.current||a.current&&!e.actInsideInputWithModifier)&&isInputDOMNode(R))return!1;const k=useKeyOrCode(R.code,u);o.current.add(R[k]),isMatchingKey(l,o.current,!1)&&(R.preventDefault(),n(!0))},g=R=>{if((!a.current||a.current&&!e.actInsideInputWithModifier)&&isInputDOMNode(R))return!1;const k=useKeyOrCode(R.code,u);isMatchingKey(l,o.current,!0)?(n(!1),o.current.clear()):o.current.delete(R[k]),R.key==="Meta"&&o.current.clear(),a.current=!1},T=()=>{o.current.clear(),n(!1)};return h?.addEventListener("keydown",v),h?.addEventListener("keyup",g),window.addEventListener("blur",T),()=>{h?.removeEventListener("keydown",v),h?.removeEventListener("keyup",g),window.removeEventListener("blur",T)}}},[t,n]),r};function isMatchingKey(t,e,r){return t.filter(n=>r||n.length===e.size).some(n=>n.every(a=>e.has(a)))}function useKeyOrCode(t,e){return e.includes(t)?"code":"key"}function calculateXYZPosition(t,e,r,n){const a=t.parentNode||t.parentId;if(!a)return r;const o=e.get(a),l=getNodePositionWithOrigin(o,n);return calculateXYZPosition(o,e,{x:(r.x??0)+l.x,y:(r.y??0)+l.y,z:(o[internalsSymbol]?.z??0)>(r.z??0)?o[internalsSymbol]?.z??0:r.z??0},n)}function updateAbsoluteNodePositions(t,e,r){t.forEach(n=>{const a=n.parentNode||n.parentId;if(a&&!t.has(a))throw new Error(`Parent node ${a} not found`);if(a||r?.[n.id]){const{x:o,y:l,z:u}=calculateXYZPosition(n,t,{...n.position,z:n[internalsSymbol]?.z??0},e);n.positionAbsolute={x:o,y:l},n[internalsSymbol].z=u,r?.[n.id]&&(n[internalsSymbol].isParent=!0)}})}function createNodeInternals(t,e,r,n){const a=new Map,o={},l=n?1e3:0;return t.forEach(u=>{const c=(isNumeric(u.zIndex)?u.zIndex:0)+(u.selected?l:0),h=e.get(u.id),v={...u,positionAbsolute:{x:u.position.x,y:u.position.y}},g=u.parentNode||u.parentId;g&&(o[g]=!0);const T=h?.type&&h?.type!==u.type;Object.defineProperty(v,internalsSymbol,{enumerable:!1,value:{handleBounds:T?void 0:h?.[internalsSymbol]?.handleBounds,z:c}}),a.set(u.id,v)}),updateAbsoluteNodePositions(a,r,o),a}function fitView(t,e={}){const{getNodes:r,width:n,height:a,minZoom:o,maxZoom:l,d3Zoom:u,d3Selection:c,fitViewOnInitDone:h,fitViewOnInit:v,nodeOrigin:g}=t(),T=e.initial&&!h&&v;if(u&&c&&(T||!e.initial)){const W=r().filter(J=>{const q=e.includeHiddenNodes?J.width&&J.height:!J.hidden;return e.nodes?.length?q&&e.nodes.some(Se=>Se.id===J.id):q}),k=W.every(J=>J.width&&J.height);if(W.length>0&&k){const J=getNodesBounds(W,g),{x:q,y:Se,zoom:V}=getViewportForBounds(J,n,a,e.minZoom??o,e.maxZoom??l,e.padding??.1),Y=identity$1.translate(q,Se).scale(V);return typeof e.duration=="number"&&e.duration>0?u.transform(getD3Transition(c,e.duration),Y):u.transform(c,Y),!0}}return!1}function handleControlledNodeSelectionChange(t,e){return t.forEach(r=>{const n=e.get(r.id);n&&e.set(n.id,{...n,[internalsSymbol]:n[internalsSymbol],selected:r.selected})}),new Map(e)}function handleControlledEdgeSelectionChange(t,e){return e.map(r=>{const n=t.find(a=>a.id===r.id);return n&&(r.selected=n.selected),r})}function updateNodesAndEdgesSelections({changedNodes:t,changedEdges:e,get:r,set:n}){const{nodeInternals:a,edges:o,onNodesChange:l,onEdgesChange:u,hasDefaultNodes:c,hasDefaultEdges:h}=r();t?.length&&(c&&n({nodeInternals:handleControlledNodeSelectionChange(t,a)}),l?.(t)),e?.length&&(h&&n({edges:handleControlledEdgeSelectionChange(e,o)}),u?.(e))}const noop=()=>{},initialViewportHelper={zoomIn:noop,zoomOut:noop,zoomTo:noop,getZoom:()=>1,setViewport:noop,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:noop,fitBounds:noop,project:t=>t,screenToFlowPosition:t=>t,flowToScreenPosition:t=>t,viewportInitialized:!1},selector$b=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection}),useViewportHelper=()=>{const t=useStoreApi(),{d3Zoom:e,d3Selection:r}=useStore$1(selector$b,shallow$1);return reactExports.useMemo(()=>r&&e?{zoomIn:a=>e.scaleBy(getD3Transition(r,a?.duration),1.2),zoomOut:a=>e.scaleBy(getD3Transition(r,a?.duration),1/1.2),zoomTo:(a,o)=>e.scaleTo(getD3Transition(r,o?.duration),a),getZoom:()=>t.getState().transform[2],setViewport:(a,o)=>{const[l,u,c]=t.getState().transform,h=identity$1.translate(a.x??l,a.y??u).scale(a.zoom??c);e.transform(getD3Transition(r,o?.duration),h)},getViewport:()=>{const[a,o,l]=t.getState().transform;return{x:a,y:o,zoom:l}},fitView:a=>fitView(t.getState,a),setCenter:(a,o,l)=>{const{width:u,height:c,maxZoom:h}=t.getState(),v=typeof l?.zoom<"u"?l.zoom:h,g=u/2-a*v,T=c/2-o*v,R=identity$1.translate(g,T).scale(v);e.transform(getD3Transition(r,l?.duration),R)},fitBounds:(a,o)=>{const{width:l,height:u,minZoom:c,maxZoom:h}=t.getState(),{x:v,y:g,zoom:T}=getViewportForBounds(a,l,u,c,h,o?.padding??.1),R=identity$1.translate(v,g).scale(T);e.transform(getD3Transition(r,o?.duration),R)},project:a=>{const{transform:o,snapToGrid:l,snapGrid:u}=t.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),pointToRendererPoint(a,o,l,u)},screenToFlowPosition:a=>{const{transform:o,snapToGrid:l,snapGrid:u,domNode:c}=t.getState();if(!c)return a;const{x:h,y:v}=c.getBoundingClientRect(),g={x:a.x-h,y:a.y-v};return pointToRendererPoint(g,o,l,u)},flowToScreenPosition:a=>{const{transform:o,domNode:l}=t.getState();if(!l)return a;const{x:u,y:c}=l.getBoundingClientRect(),h=rendererPointToPoint(a,o);return{x:h.x+u,y:h.y+c}},viewportInitialized:!0}:initialViewportHelper,[e,r])};function useReactFlow(){const t=useViewportHelper(),e=useStoreApi(),r=reactExports.useCallback(()=>e.getState().getNodes().map(k=>({...k})),[]),n=reactExports.useCallback(k=>e.getState().nodeInternals.get(k),[]),a=reactExports.useCallback(()=>{const{edges:k=[]}=e.getState();return k.map(J=>({...J}))},[]),o=reactExports.useCallback(k=>{const{edges:J=[]}=e.getState();return J.find(q=>q.id===k)},[]),l=reactExports.useCallback(k=>{const{getNodes:J,setNodes:q,hasDefaultNodes:Se,onNodesChange:V}=e.getState(),Y=J(),ie=typeof k=="function"?k(Y):k;if(Se)q(ie);else if(V){const se=ie.length===0?Y.map(ct=>({type:"remove",id:ct.id})):ie.map(ct=>({item:ct,type:"reset"}));V(se)}},[]),u=reactExports.useCallback(k=>{const{edges:J=[],setEdges:q,hasDefaultEdges:Se,onEdgesChange:V}=e.getState(),Y=typeof k=="function"?k(J):k;if(Se)q(Y);else if(V){const ie=Y.length===0?J.map(se=>({type:"remove",id:se.id})):Y.map(se=>({item:se,type:"reset"}));V(ie)}},[]),c=reactExports.useCallback(k=>{const J=Array.isArray(k)?k:[k],{getNodes:q,setNodes:Se,hasDefaultNodes:V,onNodesChange:Y}=e.getState();if(V){const se=[...q(),...J];Se(se)}else if(Y){const ie=J.map(se=>({item:se,type:"add"}));Y(ie)}},[]),h=reactExports.useCallback(k=>{const J=Array.isArray(k)?k:[k],{edges:q=[],setEdges:Se,hasDefaultEdges:V,onEdgesChange:Y}=e.getState();if(V)Se([...q,...J]);else if(Y){const ie=J.map(se=>({item:se,type:"add"}));Y(ie)}},[]),v=reactExports.useCallback(()=>{const{getNodes:k,edges:J=[],transform:q}=e.getState(),[Se,V,Y]=q;return{nodes:k().map(ie=>({...ie})),edges:J.map(ie=>({...ie})),viewport:{x:Se,y:V,zoom:Y}}},[]),g=reactExports.useCallback(({nodes:k,edges:J})=>{const{nodeInternals:q,getNodes:Se,edges:V,hasDefaultNodes:Y,hasDefaultEdges:ie,onNodesDelete:se,onEdgesDelete:ct,onNodesChange:ae,onEdgesChange:st}=e.getState(),Ct=(k||[]).map(sa=>sa.id),$t=(J||[]).map(sa=>sa.id),jo=Se().reduce((sa,re)=>{const $o=re.parentNode||re.parentId,qo=!Ct.includes(re.id)&&$o&&sa.find(i0=>i0.id===$o);return(typeof re.deletable=="boolean"?re.deletable:!0)&&(Ct.includes(re.id)||qo)&&sa.push(re),sa},[]),Lp=V.filter(sa=>typeof sa.deletable=="boolean"?sa.deletable:!0),Mn=Lp.filter(sa=>$t.includes(sa.id));if(jo||Mn){const sa=getConnectedEdges(jo,Lp),re=[...Mn,...sa],$o=re.reduce((qo,Kt)=>(qo.includes(Kt.id)||qo.push(Kt.id),qo),[]);if((ie||Y)&&(ie&&e.setState({edges:V.filter(qo=>!$o.includes(qo.id))}),Y&&(jo.forEach(qo=>{q.delete(qo.id)}),e.setState({nodeInternals:new Map(q)}))),$o.length>0&&(ct?.(re),st&&st($o.map(qo=>({id:qo,type:"remove"})))),jo.length>0&&(se?.(jo),ae)){const qo=jo.map(Kt=>({id:Kt.id,type:"remove"}));ae(qo)}}},[]),T=reactExports.useCallback(k=>{const J=isRectObject(k),q=J?null:e.getState().nodeInternals.get(k.id);return!J&&!q?[null,null,J]:[J?k:nodeToRect(q),q,J]},[]),R=reactExports.useCallback((k,J=!0,q)=>{const[Se,V,Y]=T(k);return Se?(q||e.getState().getNodes()).filter(ie=>{if(!Y&&(ie.id===V.id||!ie.positionAbsolute))return!1;const se=nodeToRect(ie),ct=getOverlappingArea(se,Se);return J&&ct>0||ct>=Se.width*Se.height}):[]},[]),W=reactExports.useCallback((k,J,q=!0)=>{const[Se]=T(k);if(!Se)return!1;const V=getOverlappingArea(Se,J);return q&&V>0||V>=Se.width*Se.height},[]);return reactExports.useMemo(()=>({...t,getNodes:r,getNode:n,getEdges:a,getEdge:o,setNodes:l,setEdges:u,addNodes:c,addEdges:h,toObject:v,deleteElements:g,getIntersectingNodes:R,isNodeIntersecting:W}),[t,r,n,a,o,l,u,c,h,v,g,R,W])}const deleteKeyOptions={actInsideInputWithModifier:!1};var useGlobalKeyHandler=({deleteKeyCode:t,multiSelectionKeyCode:e})=>{const r=useStoreApi(),{deleteElements:n}=useReactFlow(),a=useKeyPress(t,deleteKeyOptions),o=useKeyPress(e);reactExports.useEffect(()=>{if(a){const{edges:l,getNodes:u}=r.getState(),c=u().filter(v=>v.selected),h=l.filter(v=>v.selected);n({nodes:c,edges:h}),r.setState({nodesSelectionActive:!1})}},[a]),reactExports.useEffect(()=>{r.setState({multiSelectionActive:o})},[o])};function useResizeHandler(t){const e=useStoreApi();reactExports.useEffect(()=>{let r;const n=()=>{if(!t.current)return;const a=getDimensions(t.current);(a.height===0||a.width===0)&&e.getState().onError?.("004",errorMessages.error004()),e.setState({width:a.width||500,height:a.height||500})};return n(),window.addEventListener("resize",n),t.current&&(r=new ResizeObserver(()=>n()),r.observe(t.current)),()=>{window.removeEventListener("resize",n),r&&t.current&&r.unobserve(t.current)}},[])}const containerStyle={position:"absolute",width:"100%",height:"100%",top:0,left:0},viewChanged=(t,e)=>t.x!==e.x||t.y!==e.y||t.zoom!==e.k,eventToFlowTransform=t=>({x:t.x,y:t.y,zoom:t.k}),isWrappedWithClass=(t,e)=>t.target.closest(`.${e}`),isRightClickPan=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),wheelDelta=t=>{const e=t.ctrlKey&&isMacOs()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e},selector$a=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection,d3ZoomHandler:t.d3ZoomHandler,userSelectionActive:t.userSelectionActive}),ZoomPane=({onMove:t,onMoveStart:e,onMoveEnd:r,onPaneContextMenu:n,zoomOnScroll:a=!0,zoomOnPinch:o=!0,panOnScroll:l=!1,panOnScrollSpeed:u=.5,panOnScrollMode:c=PanOnScrollMode.Free,zoomOnDoubleClick:h=!0,elementsSelectable:v,panOnDrag:g=!0,defaultViewport:T,translateExtent:R,minZoom:W,maxZoom:k,zoomActivationKeyCode:J,preventScrolling:q=!0,children:Se,noWheelClassName:V,noPanClassName:Y})=>{const ie=reactExports.useRef(),se=useStoreApi(),ct=reactExports.useRef(!1),ae=reactExports.useRef(!1),st=reactExports.useRef(null),Ct=reactExports.useRef({x:0,y:0,zoom:0}),{d3Zoom:$t,d3Selection:jo,d3ZoomHandler:Lp,userSelectionActive:Mn}=useStore$1(selector$a,shallow$1),sa=useKeyPress(J),re=reactExports.useRef(0),$o=reactExports.useRef(!1),qo=reactExports.useRef();return useResizeHandler(st),reactExports.useEffect(()=>{if(st.current){const Kt=st.current.getBoundingClientRect(),i0=zoom().scaleExtent([W,k]).translateExtent(R),Up=select(st.current).call(i0),l0=identity$1.translate(T.x,T.y).scale(clamp$1(T.zoom,W,k)),y0=[[0,0],[Kt.width,Kt.height]],kp=i0.constrain()(l0,y0,R);i0.transform(Up,kp),i0.wheelDelta(wheelDelta),se.setState({d3Zoom:i0,d3Selection:Up,d3ZoomHandler:Up.on("wheel.zoom"),transform:[kp.x,kp.y,kp.k],domNode:st.current.closest(".react-flow")})}},[]),reactExports.useEffect(()=>{jo&&$t&&(l&&!sa&&!Mn?jo.on("wheel.zoom",Kt=>{if(isWrappedWithClass(Kt,V))return!1;Kt.preventDefault(),Kt.stopImmediatePropagation();const i0=jo.property("__zoom").k||1;if(Kt.ctrlKey&&o){const p0=pointer(Kt),rm=wheelDelta(Kt),am=i0*Math.pow(2,rm);$t.scaleTo(jo,am,p0,Kt);return}const Up=Kt.deltaMode===1?20:1;let l0=c===PanOnScrollMode.Vertical?0:Kt.deltaX*Up,y0=c===PanOnScrollMode.Horizontal?0:Kt.deltaY*Up;!isMacOs()&&Kt.shiftKey&&c!==PanOnScrollMode.Vertical&&(l0=Kt.deltaY*Up,y0=0),$t.translateBy(jo,-(l0/i0)*u,-(y0/i0)*u,{internal:!0});const kp=eventToFlowTransform(jo.property("__zoom")),{onViewportChangeStart:u0,onViewportChange:f0,onViewportChangeEnd:v0}=se.getState();clearTimeout(qo.current),$o.current||($o.current=!0,e?.(Kt,kp),u0?.(kp)),$o.current&&(t?.(Kt,kp),f0?.(kp),qo.current=setTimeout(()=>{r?.(Kt,kp),v0?.(kp),$o.current=!1},150))},{passive:!1}):typeof Lp<"u"&&jo.on("wheel.zoom",function(Kt,i0){if(!q&&Kt.type==="wheel"&&!Kt.ctrlKey||isWrappedWithClass(Kt,V))return null;Kt.preventDefault(),Lp.call(this,Kt,i0)},{passive:!1}))},[Mn,l,c,jo,$t,Lp,sa,o,q,V,e,t,r]),reactExports.useEffect(()=>{$t&&$t.on("start",Kt=>{if(!Kt.sourceEvent||Kt.sourceEvent.internal)return null;re.current=Kt.sourceEvent?.button;const{onViewportChangeStart:i0}=se.getState(),Up=eventToFlowTransform(Kt.transform);ct.current=!0,Ct.current=Up,Kt.sourceEvent?.type==="mousedown"&&se.setState({paneDragging:!0}),i0?.(Up),e?.(Kt.sourceEvent,Up)})},[$t,e]),reactExports.useEffect(()=>{$t&&(Mn&&!ct.current?$t.on("zoom",null):Mn||$t.on("zoom",Kt=>{const{onViewportChange:i0}=se.getState();if(se.setState({transform:[Kt.transform.x,Kt.transform.y,Kt.transform.k]}),ae.current=!!(n&&isRightClickPan(g,re.current??0)),(t||i0)&&!Kt.sourceEvent?.internal){const Up=eventToFlowTransform(Kt.transform);i0?.(Up),t?.(Kt.sourceEvent,Up)}}))},[Mn,$t,t,g,n]),reactExports.useEffect(()=>{$t&&$t.on("end",Kt=>{if(!Kt.sourceEvent||Kt.sourceEvent.internal)return null;const{onViewportChangeEnd:i0}=se.getState();if(ct.current=!1,se.setState({paneDragging:!1}),n&&isRightClickPan(g,re.current??0)&&!ae.current&&n(Kt.sourceEvent),ae.current=!1,(r||i0)&&viewChanged(Ct.current,Kt.transform)){const Up=eventToFlowTransform(Kt.transform);Ct.current=Up,clearTimeout(ie.current),ie.current=setTimeout(()=>{i0?.(Up),r?.(Kt.sourceEvent,Up)},l?150:0)}})},[$t,l,g,r,n]),reactExports.useEffect(()=>{$t&&$t.filter(Kt=>{const i0=sa||a,Up=o&&Kt.ctrlKey;if((g===!0||Array.isArray(g)&&g.includes(1))&&Kt.button===1&&Kt.type==="mousedown"&&(isWrappedWithClass(Kt,"react-flow__node")||isWrappedWithClass(Kt,"react-flow__edge")))return!0;if(!g&&!i0&&!l&&!h&&!o||Mn||!h&&Kt.type==="dblclick"||isWrappedWithClass(Kt,V)&&Kt.type==="wheel"||isWrappedWithClass(Kt,Y)&&(Kt.type!=="wheel"||l&&Kt.type==="wheel"&&!sa)||!o&&Kt.ctrlKey&&Kt.type==="wheel"||!i0&&!l&&!Up&&Kt.type==="wheel"||!g&&(Kt.type==="mousedown"||Kt.type==="touchstart")||Array.isArray(g)&&!g.includes(Kt.button)&&Kt.type==="mousedown")return!1;const l0=Array.isArray(g)&&g.includes(Kt.button)||!Kt.button||Kt.button<=1;return(!Kt.ctrlKey||Kt.type==="wheel")&&l0})},[Mn,$t,a,o,l,h,g,v,sa]),React.createElement("div",{className:"react-flow__renderer",ref:st,style:containerStyle},Se)},selector$9=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function UserSelection(){const{userSelectionActive:t,userSelectionRect:e}=useStore$1(selector$9,shallow$1);return t&&e?React.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:e.width,height:e.height,transform:`translate(${e.x}px, ${e.y}px)`}}):null}function handleParentExpand(t,e){const r=e.parentNode||e.parentId,n=t.find(a=>a.id===r);if(n){const a=e.position.x+e.width-n.width,o=e.position.y+e.height-n.height;if(a>0||o>0||e.position.x<0||e.position.y<0){if(n.style={...n.style},n.style.width=n.style.width??n.width,n.style.height=n.style.height??n.height,a>0&&(n.style.width+=a),o>0&&(n.style.height+=o),e.position.x<0){const l=Math.abs(e.position.x);n.position.x=n.position.x-l,n.style.width+=l,e.position.x=0}if(e.position.y<0){const l=Math.abs(e.position.y);n.position.y=n.position.y-l,n.style.height+=l,e.position.y=0}n.width=n.style.width,n.height=n.style.height}}}function applyChanges(t,e){if(t.some(n=>n.type==="reset"))return t.filter(n=>n.type==="reset").map(n=>n.item);const r=t.filter(n=>n.type==="add").map(n=>n.item);return e.reduce((n,a)=>{const o=t.filter(u=>u.id===a.id);if(o.length===0)return n.push(a),n;const l={...a};for(const u of o)if(u)switch(u.type){case"select":{l.selected=u.selected;break}case"position":{typeof u.position<"u"&&(l.position=u.position),typeof u.positionAbsolute<"u"&&(l.positionAbsolute=u.positionAbsolute),typeof u.dragging<"u"&&(l.dragging=u.dragging),l.expandParent&&handleParentExpand(n,l);break}case"dimensions":{typeof u.dimensions<"u"&&(l.width=u.dimensions.width,l.height=u.dimensions.height),typeof u.updateStyle<"u"&&(l.style={...l.style||{},...u.dimensions}),typeof u.resizing=="boolean"&&(l.resizing=u.resizing),l.expandParent&&handleParentExpand(n,l);break}case"remove":return n}return n.push(l),n},r)}function applyNodeChanges(t,e){return applyChanges(t,e)}function applyEdgeChanges(t,e){return applyChanges(t,e)}const createSelectionChange=(t,e)=>({id:t,type:"select",selected:e});function getSelectionChanges(t,e){return t.reduce((r,n)=>{const a=e.includes(n.id);return!n.selected&&a?(n.selected=!0,r.push(createSelectionChange(n.id,!0))):n.selected&&!a&&(n.selected=!1,r.push(createSelectionChange(n.id,!1))),r},[])}const wrapHandler=(t,e)=>r=>{r.target===e.current&&t?.(r)},selector$8=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,dragging:t.paneDragging}),Pane=reactExports.memo(({isSelecting:t,selectionMode:e=SelectionMode.Full,panOnDrag:r,onSelectionStart:n,onSelectionEnd:a,onPaneClick:o,onPaneContextMenu:l,onPaneScroll:u,onPaneMouseEnter:c,onPaneMouseMove:h,onPaneMouseLeave:v,children:g})=>{const T=reactExports.useRef(null),R=useStoreApi(),W=reactExports.useRef(0),k=reactExports.useRef(0),J=reactExports.useRef(),{userSelectionActive:q,elementsSelectable:Se,dragging:V}=useStore$1(selector$8,shallow$1),Y=()=>{R.setState({userSelectionActive:!1,userSelectionRect:null}),W.current=0,k.current=0},ie=Lp=>{o?.(Lp),R.getState().resetSelectedElements(),R.setState({nodesSelectionActive:!1})},se=Lp=>{if(Array.isArray(r)&&r?.includes(2)){Lp.preventDefault();return}l?.(Lp)},ct=u?Lp=>u(Lp):void 0,ae=Lp=>{const{resetSelectedElements:Mn,domNode:sa}=R.getState();if(J.current=sa?.getBoundingClientRect(),!Se||!t||Lp.button!==0||Lp.target!==T.current||!J.current)return;const{x:re,y:$o}=getEventPosition(Lp,J.current);Mn(),R.setState({userSelectionRect:{width:0,height:0,startX:re,startY:$o,x:re,y:$o}}),n?.(Lp)},st=Lp=>{const{userSelectionRect:Mn,nodeInternals:sa,edges:re,transform:$o,onNodesChange:qo,onEdgesChange:Kt,nodeOrigin:i0,getNodes:Up}=R.getState();if(!t||!J.current||!Mn)return;R.setState({userSelectionActive:!0,nodesSelectionActive:!1});const l0=getEventPosition(Lp,J.current),y0=Mn.startX??0,kp=Mn.startY??0,u0={...Mn,x:l0.x<y0?l0.x:y0,y:l0.y<kp?l0.y:kp,width:Math.abs(l0.x-y0),height:Math.abs(l0.y-kp)},f0=Up(),v0=getNodesInside(sa,u0,$o,e===SelectionMode.Partial,!0,i0),p0=getConnectedEdges(v0,re).map(am=>am.id),rm=v0.map(am=>am.id);if(W.current!==rm.length){W.current=rm.length;const am=getSelectionChanges(f0,rm);am.length&&qo?.(am)}if(k.current!==p0.length){k.current=p0.length;const am=getSelectionChanges(re,p0);am.length&&Kt?.(am)}R.setState({userSelectionRect:u0})},Ct=Lp=>{if(Lp.button!==0)return;const{userSelectionRect:Mn}=R.getState();!q&&Mn&&Lp.target===T.current&&ie?.(Lp),R.setState({nodesSelectionActive:W.current>0}),Y(),a?.(Lp)},$t=Lp=>{q&&(R.setState({nodesSelectionActive:W.current>0}),a?.(Lp)),Y()},jo=Se&&(t||q);return React.createElement("div",{className:cc$1(["react-flow__pane",{dragging:V,selection:t}]),onClick:jo?void 0:wrapHandler(ie,T),onContextMenu:wrapHandler(se,T),onWheel:wrapHandler(ct,T),onMouseEnter:jo?void 0:c,onMouseDown:jo?ae:void 0,onMouseMove:jo?st:h,onMouseUp:jo?Ct:void 0,onMouseLeave:jo?$t:v,ref:T,style:containerStyle},g,React.createElement(UserSelection,null))});Pane.displayName="Pane";function isParentSelected(t,e){const r=t.parentNode||t.parentId;if(!r)return!1;const n=e.get(r);return n?n.selected?!0:isParentSelected(n,e):!1}function hasSelector(t,e,r){let n=t;do{if(n?.matches(e))return!0;if(n===r.current)return!1;n=n.parentElement}while(n);return!1}function getDragItems(t,e,r,n){return Array.from(t.values()).filter(a=>(a.selected||a.id===n)&&(!a.parentNode||a.parentId||!isParentSelected(a,t))&&(a.draggable||e&&typeof a.draggable>"u")).map(a=>({id:a.id,position:a.position||{x:0,y:0},positionAbsolute:a.positionAbsolute||{x:0,y:0},distance:{x:r.x-(a.positionAbsolute?.x??0),y:r.y-(a.positionAbsolute?.y??0)},delta:{x:0,y:0},extent:a.extent,parentNode:a.parentNode||a.parentId,parentId:a.parentNode||a.parentId,width:a.width,height:a.height,expandParent:a.expandParent}))}function clampNodeExtent(t,e){return!e||e==="parent"?e:[e[0],[e[1][0]-(t.width||0),e[1][1]-(t.height||0)]]}function calcNextPosition(t,e,r,n,a=[0,0],o){const l=clampNodeExtent(t,t.extent||n);let u=l;const c=t.parentNode||t.parentId;if(t.extent==="parent"&&!t.expandParent)if(c&&t.width&&t.height){const g=r.get(c),{x:T,y:R}=getNodePositionWithOrigin(g,a).positionAbsolute;u=g&&isNumeric(T)&&isNumeric(R)&&isNumeric(g.width)&&isNumeric(g.height)?[[T+t.width*a[0],R+t.height*a[1]],[T+g.width-t.width+t.width*a[0],R+g.height-t.height+t.height*a[1]]]:u}else o?.("005",errorMessages.error005()),u=l;else if(t.extent&&c&&t.extent!=="parent"){const g=r.get(c),{x:T,y:R}=getNodePositionWithOrigin(g,a).positionAbsolute;u=[[t.extent[0][0]+T,t.extent[0][1]+R],[t.extent[1][0]+T,t.extent[1][1]+R]]}let h={x:0,y:0};if(c){const g=r.get(c);h=getNodePositionWithOrigin(g,a).positionAbsolute}const v=u&&u!=="parent"?clampPosition(e,u):e;return{position:{x:v.x-h.x,y:v.y-h.y},positionAbsolute:v}}function getEventHandlerParams({nodeId:t,dragItems:e,nodeInternals:r}){const n=e.map(a=>({...r.get(a.id),position:a.position,positionAbsolute:a.positionAbsolute}));return[t?n.find(a=>a.id===t):n[0],n]}const getHandleBounds=(t,e,r,n)=>{const a=e.querySelectorAll(t);if(!a||!a.length)return null;const o=Array.from(a),l=e.getBoundingClientRect(),u={x:l.width*n[0],y:l.height*n[1]};return o.map(c=>{const h=c.getBoundingClientRect();return{id:c.getAttribute("data-handleid"),position:c.getAttribute("data-handlepos"),x:(h.left-l.left-u.x)/r,y:(h.top-l.top-u.y)/r,...getDimensions(c)}})};function getMouseHandler(t,e,r){return r===void 0?r:n=>{const a=e().nodeInternals.get(t);a&&r(n,{...a})}}function handleNodeClick({id:t,store:e,unselect:r=!1,nodeRef:n}){const{addSelectedNodes:a,unselectNodesAndEdges:o,multiSelectionActive:l,nodeInternals:u,onError:c}=e.getState(),h=u.get(t);if(!h){c?.("012",errorMessages.error012(t));return}e.setState({nodesSelectionActive:!1}),h.selected?(r||h.selected&&l)&&(o({nodes:[h],edges:[]}),requestAnimationFrame(()=>n?.current?.blur())):a([t])}function useGetPointerPosition(){const t=useStoreApi();return reactExports.useCallback(({sourceEvent:r})=>{const{transform:n,snapGrid:a,snapToGrid:o}=t.getState(),l=r.touches?r.touches[0].clientX:r.clientX,u=r.touches?r.touches[0].clientY:r.clientY,c={x:(l-n[0])/n[2],y:(u-n[1])/n[2]};return{xSnapped:o?a[0]*Math.round(c.x/a[0]):c.x,ySnapped:o?a[1]*Math.round(c.y/a[1]):c.y,...c}},[])}function wrapSelectionDragFunc(t){return(e,r,n)=>t?.(e,n)}function useDrag({nodeRef:t,disabled:e=!1,noDragClassName:r,handleSelector:n,nodeId:a,isSelectable:o,selectNodesOnDrag:l}){const u=useStoreApi(),[c,h]=reactExports.useState(!1),v=reactExports.useRef([]),g=reactExports.useRef({x:null,y:null}),T=reactExports.useRef(0),R=reactExports.useRef(null),W=reactExports.useRef({x:0,y:0}),k=reactExports.useRef(null),J=reactExports.useRef(!1),q=reactExports.useRef(!1),Se=reactExports.useRef(!1),V=useGetPointerPosition();return reactExports.useEffect(()=>{if(t?.current){const Y=select(t.current),ie=({x:ae,y:st})=>{const{nodeInternals:Ct,onNodeDrag:$t,onSelectionDrag:jo,updateNodePositions:Lp,nodeExtent:Mn,snapGrid:sa,snapToGrid:re,nodeOrigin:$o,onError:qo}=u.getState();g.current={x:ae,y:st};let Kt=!1,i0={x:0,y:0,x2:0,y2:0};if(v.current.length>1&&Mn){const l0=getNodesBounds(v.current,$o);i0=rectToBox(l0)}if(v.current=v.current.map(l0=>{const y0={x:ae-l0.distance.x,y:st-l0.distance.y};re&&(y0.x=sa[0]*Math.round(y0.x/sa[0]),y0.y=sa[1]*Math.round(y0.y/sa[1]));const kp=[[Mn[0][0],Mn[0][1]],[Mn[1][0],Mn[1][1]]];v.current.length>1&&Mn&&!l0.extent&&(kp[0][0]=l0.positionAbsolute.x-i0.x+Mn[0][0],kp[1][0]=l0.positionAbsolute.x+(l0.width??0)-i0.x2+Mn[1][0],kp[0][1]=l0.positionAbsolute.y-i0.y+Mn[0][1],kp[1][1]=l0.positionAbsolute.y+(l0.height??0)-i0.y2+Mn[1][1]);const u0=calcNextPosition(l0,y0,Ct,kp,$o,qo);return Kt=Kt||l0.position.x!==u0.position.x||l0.position.y!==u0.position.y,l0.position=u0.position,l0.positionAbsolute=u0.positionAbsolute,l0}),!Kt)return;Lp(v.current,!0,!0),h(!0);const Up=a?$t:wrapSelectionDragFunc(jo);if(Up&&k.current){const[l0,y0]=getEventHandlerParams({nodeId:a,dragItems:v.current,nodeInternals:Ct});Up(k.current,l0,y0)}},se=()=>{if(!R.current)return;const[ae,st]=calcAutoPan(W.current,R.current);if(ae!==0||st!==0){const{transform:Ct,panBy:$t}=u.getState();g.current.x=(g.current.x??0)-ae/Ct[2],g.current.y=(g.current.y??0)-st/Ct[2],$t({x:ae,y:st})&&ie(g.current)}T.current=requestAnimationFrame(se)},ct=ae=>{const{nodeInternals:st,multiSelectionActive:Ct,nodesDraggable:$t,unselectNodesAndEdges:jo,onNodeDragStart:Lp,onSelectionDragStart:Mn}=u.getState();q.current=!0;const sa=a?Lp:wrapSelectionDragFunc(Mn);(!l||!o)&&!Ct&&a&&(st.get(a)?.selected||jo()),a&&o&&l&&handleNodeClick({id:a,store:u,nodeRef:t});const re=V(ae);if(g.current=re,v.current=getDragItems(st,$t,re,a),sa&&v.current){const[$o,qo]=getEventHandlerParams({nodeId:a,dragItems:v.current,nodeInternals:st});sa(ae.sourceEvent,$o,qo)}};if(e)Y.on(".drag",null);else{const ae=drag().on("start",st=>{const{domNode:Ct,nodeDragThreshold:$t}=u.getState();$t===0&&ct(st),Se.current=!1;const jo=V(st);g.current=jo,R.current=Ct?.getBoundingClientRect()||null,W.current=getEventPosition(st.sourceEvent,R.current)}).on("drag",st=>{const Ct=V(st),{autoPanOnNodeDrag:$t,nodeDragThreshold:jo}=u.getState();if(st.sourceEvent.type==="touchmove"&&st.sourceEvent.touches.length>1&&(Se.current=!0),!Se.current){if(!J.current&&q.current&&$t&&(J.current=!0,se()),!q.current){const Lp=Ct.xSnapped-(g?.current?.x??0),Mn=Ct.ySnapped-(g?.current?.y??0);Math.sqrt(Lp*Lp+Mn*Mn)>jo&&ct(st)}(g.current.x!==Ct.xSnapped||g.current.y!==Ct.ySnapped)&&v.current&&q.current&&(k.current=st.sourceEvent,W.current=getEventPosition(st.sourceEvent,R.current),ie(Ct))}}).on("end",st=>{if(!(!q.current||Se.current)&&(h(!1),J.current=!1,q.current=!1,cancelAnimationFrame(T.current),v.current)){const{updateNodePositions:Ct,nodeInternals:$t,onNodeDragStop:jo,onSelectionDragStop:Lp}=u.getState(),Mn=a?jo:wrapSelectionDragFunc(Lp);if(Ct(v.current,!1,!1),Mn){const[sa,re]=getEventHandlerParams({nodeId:a,dragItems:v.current,nodeInternals:$t});Mn(st.sourceEvent,sa,re)}}}).filter(st=>{const Ct=st.target;return!st.button&&(!r||!hasSelector(Ct,`.${r}`,t))&&(!n||hasSelector(Ct,n,t))});return Y.call(ae),()=>{Y.on(".drag",null)}}}},[t,e,r,n,o,u,a,l,V]),c}function useUpdateNodePositions(){const t=useStoreApi();return reactExports.useCallback(r=>{const{nodeInternals:n,nodeExtent:a,updateNodePositions:o,getNodes:l,snapToGrid:u,snapGrid:c,onError:h,nodesDraggable:v}=t.getState(),g=l().filter(Se=>Se.selected&&(Se.draggable||v&&typeof Se.draggable>"u")),T=u?c[0]:5,R=u?c[1]:5,W=r.isShiftPressed?4:1,k=r.x*T*W,J=r.y*R*W,q=g.map(Se=>{if(Se.positionAbsolute){const V={x:Se.positionAbsolute.x+k,y:Se.positionAbsolute.y+J};u&&(V.x=c[0]*Math.round(V.x/c[0]),V.y=c[1]*Math.round(V.y/c[1]));const{positionAbsolute:Y,position:ie}=calcNextPosition(Se,V,n,a,void 0,h);Se.position=ie,Se.positionAbsolute=Y}return Se});o(q,!0,!1)},[])}const arrowKeyDiffs={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var wrapNode=t=>{const e=({id:r,type:n,data:a,xPos:o,yPos:l,xPosOrigin:u,yPosOrigin:c,selected:h,onClick:v,onMouseEnter:g,onMouseMove:T,onMouseLeave:R,onContextMenu:W,onDoubleClick:k,style:J,className:q,isDraggable:Se,isSelectable:V,isConnectable:Y,isFocusable:ie,selectNodesOnDrag:se,sourcePosition:ct,targetPosition:ae,hidden:st,resizeObserver:Ct,dragHandle:$t,zIndex:jo,isParent:Lp,noDragClassName:Mn,noPanClassName:sa,initialized:re,disableKeyboardA11y:$o,ariaLabel:qo,rfId:Kt,hasHandleBounds:i0})=>{const Up=useStoreApi(),l0=reactExports.useRef(null),y0=reactExports.useRef(null),kp=reactExports.useRef(ct),u0=reactExports.useRef(ae),f0=reactExports.useRef(n),v0=V||Se||v||g||T||R,p0=useUpdateNodePositions(),rm=getMouseHandler(r,Up.getState,g),am=getMouseHandler(r,Up.getState,T),ym=getMouseHandler(r,Up.getState,R),Wm=getMouseHandler(r,Up.getState,W),h0=getMouseHandler(r,Up.getState,k),f1=p1=>{const{nodeDragThreshold:Qm}=Up.getState();if(V&&(!se||!Se||Qm>0)&&handleNodeClick({id:r,store:Up,nodeRef:l0}),v){const m1=Up.getState().nodeInternals.get(r);m1&&v(p1,{...m1})}},T1=p1=>{if(!isInputDOMNode(p1)&&!$o)if(elementSelectionKeys.includes(p1.key)&&V){const Qm=p1.key==="Escape";handleNodeClick({id:r,store:Up,unselect:Qm,nodeRef:l0})}else Se&&h&&Object.prototype.hasOwnProperty.call(arrowKeyDiffs,p1.key)&&(Up.setState({ariaLiveMessage:`Moved selected node ${p1.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~o}, y: ${~~l}`}),p0({x:arrowKeyDiffs[p1.key].x,y:arrowKeyDiffs[p1.key].y,isShiftPressed:p1.shiftKey}))};reactExports.useEffect(()=>()=>{y0.current&&(Ct?.unobserve(y0.current),y0.current=null)},[]),reactExports.useEffect(()=>{if(l0.current&&!st){const p1=l0.current;(!re||!i0||y0.current!==p1)&&(y0.current&&Ct?.unobserve(y0.current),Ct?.observe(p1),y0.current=p1)}},[st,re,i0]),reactExports.useEffect(()=>{const p1=f0.current!==n,Qm=kp.current!==ct,m1=u0.current!==ae;l0.current&&(p1||Qm||m1)&&(p1&&(f0.current=n),Qm&&(kp.current=ct),m1&&(u0.current=ae),Up.getState().updateNodeDimensions([{id:r,nodeElement:l0.current,forceUpdate:!0}]))},[r,n,ct,ae]);const I1=useDrag({nodeRef:l0,disabled:st||!Se,noDragClassName:Mn,handleSelector:$t,nodeId:r,isSelectable:V,selectNodesOnDrag:se});return st?null:React.createElement("div",{className:cc$1(["react-flow__node",`react-flow__node-${n}`,{[sa]:Se},q,{selected:h,selectable:V,parent:Lp,dragging:I1}]),ref:l0,style:{zIndex:jo,transform:`translate(${u}px,${c}px)`,pointerEvents:v0?"all":"none",visibility:re?"visible":"hidden",...J},"data-id":r,"data-testid":`rf__node-${r}`,onMouseEnter:rm,onMouseMove:am,onMouseLeave:ym,onContextMenu:Wm,onClick:f1,onDoubleClick:h0,onKeyDown:ie?T1:void 0,tabIndex:ie?0:void 0,role:ie?"button":void 0,"aria-describedby":$o?void 0:`${ARIA_NODE_DESC_KEY}-${Kt}`,"aria-label":qo},React.createElement(Provider$2,{value:r},React.createElement(t,{id:r,data:a,type:n,xPos:o,yPos:l,selected:h,isConnectable:Y,sourcePosition:ct,targetPosition:ae,dragging:I1,dragHandle:$t,zIndex:jo})))};return e.displayName="NodeWrapper",reactExports.memo(e)};const selector$7=t=>{const e=t.getNodes().filter(r=>r.selected);return{...getNodesBounds(e,t.nodeOrigin),transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`,userSelectionActive:t.userSelectionActive}};function NodesSelection({onSelectionContextMenu:t,noPanClassName:e,disableKeyboardA11y:r}){const n=useStoreApi(),{width:a,height:o,x:l,y:u,transformString:c,userSelectionActive:h}=useStore$1(selector$7,shallow$1),v=useUpdateNodePositions(),g=reactExports.useRef(null);if(reactExports.useEffect(()=>{r||g.current?.focus({preventScroll:!0})},[r]),useDrag({nodeRef:g}),h||!a||!o)return null;const T=t?W=>{const k=n.getState().getNodes().filter(J=>J.selected);t(W,k)}:void 0,R=W=>{Object.prototype.hasOwnProperty.call(arrowKeyDiffs,W.key)&&v({x:arrowKeyDiffs[W.key].x,y:arrowKeyDiffs[W.key].y,isShiftPressed:W.shiftKey})};return React.createElement("div",{className:cc$1(["react-flow__nodesselection","react-flow__container",e]),style:{transform:c}},React.createElement("div",{ref:g,className:"react-flow__nodesselection-rect",onContextMenu:T,tabIndex:r?void 0:-1,onKeyDown:r?void 0:R,style:{width:a,height:o,top:u,left:l}}))}var NodesSelection$1=reactExports.memo(NodesSelection);const selector$6=t=>t.nodesSelectionActive,FlowRenderer=({children:t,onPaneClick:e,onPaneMouseEnter:r,onPaneMouseMove:n,onPaneMouseLeave:a,onPaneContextMenu:o,onPaneScroll:l,deleteKeyCode:u,onMove:c,onMoveStart:h,onMoveEnd:v,selectionKeyCode:g,selectionOnDrag:T,selectionMode:R,onSelectionStart:W,onSelectionEnd:k,multiSelectionKeyCode:J,panActivationKeyCode:q,zoomActivationKeyCode:Se,elementsSelectable:V,zoomOnScroll:Y,zoomOnPinch:ie,panOnScroll:se,panOnScrollSpeed:ct,panOnScrollMode:ae,zoomOnDoubleClick:st,panOnDrag:Ct,defaultViewport:$t,translateExtent:jo,minZoom:Lp,maxZoom:Mn,preventScrolling:sa,onSelectionContextMenu:re,noWheelClassName:$o,noPanClassName:qo,disableKeyboardA11y:Kt})=>{const i0=useStore$1(selector$6),Up=useKeyPress(g),l0=useKeyPress(q),y0=l0||Ct,kp=l0||se,u0=Up||T&&y0!==!0;return useGlobalKeyHandler({deleteKeyCode:u,multiSelectionKeyCode:J}),React.createElement(ZoomPane,{onMove:c,onMoveStart:h,onMoveEnd:v,onPaneContextMenu:o,elementsSelectable:V,zoomOnScroll:Y,zoomOnPinch:ie,panOnScroll:kp,panOnScrollSpeed:ct,panOnScrollMode:ae,zoomOnDoubleClick:st,panOnDrag:!Up&&y0,defaultViewport:$t,translateExtent:jo,minZoom:Lp,maxZoom:Mn,zoomActivationKeyCode:Se,preventScrolling:sa,noWheelClassName:$o,noPanClassName:qo},React.createElement(Pane,{onSelectionStart:W,onSelectionEnd:k,onPaneClick:e,onPaneMouseEnter:r,onPaneMouseMove:n,onPaneMouseLeave:a,onPaneContextMenu:o,onPaneScroll:l,panOnDrag:y0,isSelecting:!!u0,selectionMode:R},t,i0&&React.createElement(NodesSelection$1,{onSelectionContextMenu:re,noPanClassName:qo,disableKeyboardA11y:Kt})))};FlowRenderer.displayName="FlowRenderer";var FlowRenderer$1=reactExports.memo(FlowRenderer);function useVisibleNodes(t){return useStore$1(reactExports.useCallback(r=>t?getNodesInside(r.nodeInternals,{x:0,y:0,width:r.width,height:r.height},r.transform,!0):r.getNodes(),[t]))}function createNodeTypes(t){const e={input:wrapNode(t.input||InputNode$1),default:wrapNode(t.default||DefaultNode$1),output:wrapNode(t.output||OutputNode$1),group:wrapNode(t.group||GroupNode)},r={},n=Object.keys(t).filter(a=>!["input","default","output","group"].includes(a)).reduce((a,o)=>(a[o]=wrapNode(t[o]||DefaultNode$1),a),r);return{...e,...n}}const getPositionWithOrigin=({x:t,y:e,width:r,height:n,origin:a})=>!r||!n?{x:t,y:e}:a[0]<0||a[1]<0||a[0]>1||a[1]>1?{x:t,y:e}:{x:t-r*a[0],y:e-n*a[1]},selector$5=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,updateNodeDimensions:t.updateNodeDimensions,onError:t.onError}),NodeRenderer=t=>{const{nodesDraggable:e,nodesConnectable:r,nodesFocusable:n,elementsSelectable:a,updateNodeDimensions:o,onError:l}=useStore$1(selector$5,shallow$1),u=useVisibleNodes(t.onlyRenderVisibleElements),c=reactExports.useRef(),h=reactExports.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const v=new ResizeObserver(g=>{const T=g.map(R=>({id:R.target.getAttribute("data-id"),nodeElement:R.target,forceUpdate:!0}));o(T)});return c.current=v,v},[]);return reactExports.useEffect(()=>()=>{c?.current?.disconnect()},[]),React.createElement("div",{className:"react-flow__nodes",style:containerStyle},u.map(v=>{let g=v.type||"default";t.nodeTypes[g]||(l?.("003",errorMessages.error003(g)),g="default");const T=t.nodeTypes[g]||t.nodeTypes.default,R=!!(v.draggable||e&&typeof v.draggable>"u"),W=!!(v.selectable||a&&typeof v.selectable>"u"),k=!!(v.connectable||r&&typeof v.connectable>"u"),J=!!(v.focusable||n&&typeof v.focusable>"u"),q=t.nodeExtent?clampPosition(v.positionAbsolute,t.nodeExtent):v.positionAbsolute,Se=q?.x??0,V=q?.y??0,Y=getPositionWithOrigin({x:Se,y:V,width:v.width??0,height:v.height??0,origin:t.nodeOrigin});return React.createElement(T,{key:v.id,id:v.id,className:v.className,style:v.style,type:g,data:v.data,sourcePosition:v.sourcePosition||Position.Bottom,targetPosition:v.targetPosition||Position.Top,hidden:v.hidden,xPos:Se,yPos:V,xPosOrigin:Y.x,yPosOrigin:Y.y,selectNodesOnDrag:t.selectNodesOnDrag,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,selected:!!v.selected,isDraggable:R,isSelectable:W,isConnectable:k,isFocusable:J,resizeObserver:h,dragHandle:v.dragHandle,zIndex:v[internalsSymbol]?.z??0,isParent:!!v[internalsSymbol]?.isParent,noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,initialized:!!v.width&&!!v.height,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,ariaLabel:v.ariaLabel,hasHandleBounds:!!v[internalsSymbol]?.handleBounds})}))};NodeRenderer.displayName="NodeRenderer";var NodeRenderer$1=reactExports.memo(NodeRenderer);const shiftX=(t,e,r)=>r===Position.Left?t-e:r===Position.Right?t+e:t,shiftY=(t,e,r)=>r===Position.Top?t-e:r===Position.Bottom?t+e:t,EdgeUpdaterClassName="react-flow__edgeupdater",EdgeAnchor=({position:t,centerX:e,centerY:r,radius:n=10,onMouseDown:a,onMouseEnter:o,onMouseOut:l,type:u})=>React.createElement("circle",{onMouseDown:a,onMouseEnter:o,onMouseOut:l,className:cc$1([EdgeUpdaterClassName,`${EdgeUpdaterClassName}-${u}`]),cx:shiftX(e,n,t),cy:shiftY(r,n,t),r:n,stroke:"transparent",fill:"transparent"}),alwaysValidConnection=()=>!0;var wrapEdge=t=>{const e=({id:r,className:n,type:a,data:o,onClick:l,onEdgeDoubleClick:u,selected:c,animated:h,label:v,labelStyle:g,labelShowBg:T,labelBgStyle:R,labelBgPadding:W,labelBgBorderRadius:k,style:J,source:q,target:Se,sourceX:V,sourceY:Y,targetX:ie,targetY:se,sourcePosition:ct,targetPosition:ae,elementsSelectable:st,hidden:Ct,sourceHandleId:$t,targetHandleId:jo,onContextMenu:Lp,onMouseEnter:Mn,onMouseMove:sa,onMouseLeave:re,reconnectRadius:$o,onReconnect:qo,onReconnectStart:Kt,onReconnectEnd:i0,markerEnd:Up,markerStart:l0,rfId:y0,ariaLabel:kp,isFocusable:u0,isReconnectable:f0,pathOptions:v0,interactionWidth:p0,disableKeyboardA11y:rm})=>{const am=reactExports.useRef(null),[ym,Wm]=reactExports.useState(!1),[h0,f1]=reactExports.useState(!1),T1=useStoreApi(),I1=reactExports.useMemo(()=>`url('#${getMarkerId(l0,y0)}')`,[l0,y0]),p1=reactExports.useMemo(()=>`url('#${getMarkerId(Up,y0)}')`,[Up,y0]);if(Ct)return null;const Qm=Y0=>{const{edges:im,addSelectedEdges:om,unselectNodesAndEdges:Cm,multiSelectionActive:r1}=T1.getState(),Om=im.find(a1=>a1.id===r);Om&&(st&&(T1.setState({nodesSelectionActive:!1}),Om.selected&&r1?(Cm({nodes:[],edges:[Om]}),am.current?.blur()):om([r])),l&&l(Y0,Om))},m1=getMouseHandler$1(r,T1.getState,u),W1=getMouseHandler$1(r,T1.getState,Lp),ug=getMouseHandler$1(r,T1.getState,Mn),ng=getMouseHandler$1(r,T1.getState,sa),Ko=getMouseHandler$1(r,T1.getState,re),wi=(Y0,im)=>{if(Y0.button!==0)return;const{edges:om,isValidConnection:Cm}=T1.getState(),r1=im?Se:q,Om=(im?jo:$t)||null,a1=im?"target":"source",hg=Cm||alwaysValidConnection,pm=im,S1=om.find(l1=>l1.id===r);f1(!0),Kt?.(Y0,S1,a1);const U1=l1=>{f1(!1),i0?.(l1,S1,a1)};handlePointerDown({event:Y0,handleId:Om,nodeId:r1,onConnect:l1=>qo?.(S1,l1),isTarget:pm,getState:T1.getState,setState:T1.setState,isValidConnection:hg,edgeUpdaterType:a1,onReconnectEnd:U1})},S0=Y0=>wi(Y0,!0),Z0=Y0=>wi(Y0,!1),Pp=()=>Wm(!0),Ip=()=>Wm(!1),x0=!st&&!l,B0=Y0=>{if(!rm&&elementSelectionKeys.includes(Y0.key)&&st){const{unselectNodesAndEdges:im,addSelectedEdges:om,edges:Cm}=T1.getState();Y0.key==="Escape"?(am.current?.blur(),im({edges:[Cm.find(Om=>Om.id===r)]})):om([r])}};return React.createElement("g",{className:cc$1(["react-flow__edge",`react-flow__edge-${a}`,n,{selected:c,animated:h,inactive:x0,updating:ym}]),onClick:Qm,onDoubleClick:m1,onContextMenu:W1,onMouseEnter:ug,onMouseMove:ng,onMouseLeave:Ko,onKeyDown:u0?B0:void 0,tabIndex:u0?0:void 0,role:u0?"button":"img","data-testid":`rf__edge-${r}`,"aria-label":kp===null?void 0:kp||`Edge from ${q} to ${Se}`,"aria-describedby":u0?`${ARIA_EDGE_DESC_KEY}-${y0}`:void 0,ref:am},!h0&&React.createElement(t,{id:r,source:q,target:Se,selected:c,animated:h,label:v,labelStyle:g,labelShowBg:T,labelBgStyle:R,labelBgPadding:W,labelBgBorderRadius:k,data:o,style:J,sourceX:V,sourceY:Y,targetX:ie,targetY:se,sourcePosition:ct,targetPosition:ae,sourceHandleId:$t,targetHandleId:jo,markerStart:I1,markerEnd:p1,pathOptions:v0,interactionWidth:p0}),f0&&React.createElement(React.Fragment,null,(f0==="source"||f0===!0)&&React.createElement(EdgeAnchor,{position:ct,centerX:V,centerY:Y,radius:$o,onMouseDown:S0,onMouseEnter:Pp,onMouseOut:Ip,type:"source"}),(f0==="target"||f0===!0)&&React.createElement(EdgeAnchor,{position:ae,centerX:ie,centerY:se,radius:$o,onMouseDown:Z0,onMouseEnter:Pp,onMouseOut:Ip,type:"target"})))};return e.displayName="EdgeWrapper",reactExports.memo(e)};function createEdgeTypes(t){const e={default:wrapEdge(t.default||BezierEdge),straight:wrapEdge(t.bezier||StraightEdge),step:wrapEdge(t.step||StepEdge),smoothstep:wrapEdge(t.step||SmoothStepEdge),simplebezier:wrapEdge(t.simplebezier||SimpleBezierEdge)},r={},n=Object.keys(t).filter(a=>!["default","bezier"].includes(a)).reduce((a,o)=>(a[o]=wrapEdge(t[o]||BezierEdge),a),r);return{...e,...n}}function getHandlePosition(t,e,r=null){const n=(r?.x||0)+e.x,a=(r?.y||0)+e.y,o=r?.width||e.width,l=r?.height||e.height;switch(t){case Position.Top:return{x:n+o/2,y:a};case Position.Right:return{x:n+o,y:a+l/2};case Position.Bottom:return{x:n+o/2,y:a+l};case Position.Left:return{x:n,y:a+l/2}}}function getHandle(t,e){return t?t.length===1||!e?t[0]:e&&t.find(r=>r.id===e)||null:null}const getEdgePositions=(t,e,r,n,a,o)=>{const l=getHandlePosition(r,t,e),u=getHandlePosition(o,n,a);return{sourceX:l.x,sourceY:l.y,targetX:u.x,targetY:u.y}};function isEdgeVisible({sourcePos:t,targetPos:e,sourceWidth:r,sourceHeight:n,targetWidth:a,targetHeight:o,width:l,height:u,transform:c}){const h={x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x+r,e.x+a),y2:Math.max(t.y+n,e.y+o)};h.x===h.x2&&(h.x2+=1),h.y===h.y2&&(h.y2+=1);const v=rectToBox({x:(0-c[0])/c[2],y:(0-c[1])/c[2],width:l/c[2],height:u/c[2]}),g=Math.max(0,Math.min(v.x2,h.x2)-Math.max(v.x,h.x)),T=Math.max(0,Math.min(v.y2,h.y2)-Math.max(v.y,h.y));return Math.ceil(g*T)>0}function getNodeData(t){const e=t?.[internalsSymbol]?.handleBounds||null,r=e&&t?.width&&t?.height&&typeof t?.positionAbsolute?.x<"u"&&typeof t?.positionAbsolute?.y<"u";return[{x:t?.positionAbsolute?.x||0,y:t?.positionAbsolute?.y||0,width:t?.width||0,height:t?.height||0},e,!!r]}const defaultEdgeTree=[{level:0,isMaxLevel:!0,edges:[]}];function groupEdgesByZLevel(t,e,r=!1){let n=-1;const a=t.reduce((l,u)=>{const c=isNumeric(u.zIndex);let h=c?u.zIndex:0;if(r){const v=e.get(u.target),g=e.get(u.source),T=u.selected||v?.selected||g?.selected,R=Math.max(g?.[internalsSymbol]?.z||0,v?.[internalsSymbol]?.z||0,1e3);h=(c?u.zIndex:0)+(T?R:0)}return l[h]?l[h].push(u):l[h]=[u],n=h>n?h:n,l},{}),o=Object.entries(a).map(([l,u])=>{const c=+l;return{edges:u,level:c,isMaxLevel:c===n}});return o.length===0?defaultEdgeTree:o}function useVisibleEdges(t,e,r){const n=useStore$1(reactExports.useCallback(a=>t?a.edges.filter(o=>{const l=e.get(o.source),u=e.get(o.target);return l?.width&&l?.height&&u?.width&&u?.height&&isEdgeVisible({sourcePos:l.positionAbsolute||{x:0,y:0},targetPos:u.positionAbsolute||{x:0,y:0},sourceWidth:l.width,sourceHeight:l.height,targetWidth:u.width,targetHeight:u.height,width:a.width,height:a.height,transform:a.transform})}):a.edges,[t,e]));return groupEdgesByZLevel(n,e,r)}const ArrowSymbol=({color:t="none",strokeWidth:e=1})=>React.createElement("polyline",{style:{stroke:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),ArrowClosedSymbol=({color:t="none",strokeWidth:e=1})=>React.createElement("polyline",{style:{stroke:t,fill:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),MarkerSymbols={[MarkerType.Arrow]:ArrowSymbol,[MarkerType.ArrowClosed]:ArrowClosedSymbol};function useMarkerSymbol(t){const e=useStoreApi();return reactExports.useMemo(()=>Object.prototype.hasOwnProperty.call(MarkerSymbols,t)?MarkerSymbols[t]:(e.getState().onError?.("009",errorMessages.error009(t)),null),[t])}const Marker=({id:t,type:e,color:r,width:n=12.5,height:a=12.5,markerUnits:o="strokeWidth",strokeWidth:l,orient:u="auto-start-reverse"})=>{const c=useMarkerSymbol(e);return c?React.createElement("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${n}`,markerHeight:`${a}`,viewBox:"-10 -10 20 20",markerUnits:o,orient:u,refX:"0",refY:"0"},React.createElement(c,{color:r,strokeWidth:l})):null},markerSelector=({defaultColor:t,rfId:e})=>r=>{const n=[];return r.edges.reduce((a,o)=>([o.markerStart,o.markerEnd].forEach(l=>{if(l&&typeof l=="object"){const u=getMarkerId(l,e);n.includes(u)||(a.push({id:u,color:l.color||t,...l}),n.push(u))}}),a),[]).sort((a,o)=>a.id.localeCompare(o.id))},MarkerDefinitions=({defaultColor:t,rfId:e})=>{const r=useStore$1(reactExports.useCallback(markerSelector({defaultColor:t,rfId:e}),[t,e]),(n,a)=>!(n.length!==a.length||n.some((o,l)=>o.id!==a[l].id)));return React.createElement("defs",null,r.map(n=>React.createElement(Marker,{id:n.id,key:n.id,type:n.type,color:n.color,width:n.width,height:n.height,markerUnits:n.markerUnits,strokeWidth:n.strokeWidth,orient:n.orient})))};MarkerDefinitions.displayName="MarkerDefinitions";var MarkerDefinitions$1=reactExports.memo(MarkerDefinitions);const selector$4=t=>({nodesConnectable:t.nodesConnectable,edgesFocusable:t.edgesFocusable,edgesUpdatable:t.edgesUpdatable,elementsSelectable:t.elementsSelectable,width:t.width,height:t.height,connectionMode:t.connectionMode,nodeInternals:t.nodeInternals,onError:t.onError}),EdgeRenderer=({defaultMarkerColor:t,onlyRenderVisibleElements:e,elevateEdgesOnSelect:r,rfId:n,edgeTypes:a,noPanClassName:o,onEdgeContextMenu:l,onEdgeMouseEnter:u,onEdgeMouseMove:c,onEdgeMouseLeave:h,onEdgeClick:v,onEdgeDoubleClick:g,onReconnect:T,onReconnectStart:R,onReconnectEnd:W,reconnectRadius:k,children:J,disableKeyboardA11y:q})=>{const{edgesFocusable:Se,edgesUpdatable:V,elementsSelectable:Y,width:ie,height:se,connectionMode:ct,nodeInternals:ae,onError:st}=useStore$1(selector$4,shallow$1),Ct=useVisibleEdges(e,ae,r);return ie?React.createElement(React.Fragment,null,Ct.map(({level:$t,edges:jo,isMaxLevel:Lp})=>React.createElement("svg",{key:$t,style:{zIndex:$t},width:ie,height:se,className:"react-flow__edges react-flow__container"},Lp&&React.createElement(MarkerDefinitions$1,{defaultColor:t,rfId:n}),React.createElement("g",null,jo.map(Mn=>{const[sa,re,$o]=getNodeData(ae.get(Mn.source)),[qo,Kt,i0]=getNodeData(ae.get(Mn.target));if(!$o||!i0)return null;let Up=Mn.type||"default";a[Up]||(st?.("011",errorMessages.error011(Up)),Up="default");const l0=a[Up]||a.default,y0=ct===ConnectionMode.Strict?Kt.target:(Kt.target??[]).concat(Kt.source??[]),kp=getHandle(re.source,Mn.sourceHandle),u0=getHandle(y0,Mn.targetHandle),f0=kp?.position||Position.Bottom,v0=u0?.position||Position.Top,p0=!!(Mn.focusable||Se&&typeof Mn.focusable>"u"),rm=Mn.reconnectable||Mn.updatable,am=typeof T<"u"&&(rm||V&&typeof rm>"u");if(!kp||!u0)return st?.("008",errorMessages.error008(kp,Mn)),null;const{sourceX:ym,sourceY:Wm,targetX:h0,targetY:f1}=getEdgePositions(sa,kp,f0,qo,u0,v0);return React.createElement(l0,{key:Mn.id,id:Mn.id,className:cc$1([Mn.className,o]),type:Up,data:Mn.data,selected:!!Mn.selected,animated:!!Mn.animated,hidden:!!Mn.hidden,label:Mn.label,labelStyle:Mn.labelStyle,labelShowBg:Mn.labelShowBg,labelBgStyle:Mn.labelBgStyle,labelBgPadding:Mn.labelBgPadding,labelBgBorderRadius:Mn.labelBgBorderRadius,style:Mn.style,source:Mn.source,target:Mn.target,sourceHandleId:Mn.sourceHandle,targetHandleId:Mn.targetHandle,markerEnd:Mn.markerEnd,markerStart:Mn.markerStart,sourceX:ym,sourceY:Wm,targetX:h0,targetY:f1,sourcePosition:f0,targetPosition:v0,elementsSelectable:Y,onContextMenu:l,onMouseEnter:u,onMouseMove:c,onMouseLeave:h,onClick:v,onEdgeDoubleClick:g,onReconnect:T,onReconnectStart:R,onReconnectEnd:W,reconnectRadius:k,rfId:n,ariaLabel:Mn.ariaLabel,isFocusable:p0,isReconnectable:am,pathOptions:"pathOptions"in Mn?Mn.pathOptions:void 0,interactionWidth:Mn.interactionWidth,disableKeyboardA11y:q})})))),J):null};EdgeRenderer.displayName="EdgeRenderer";var EdgeRenderer$1=reactExports.memo(EdgeRenderer);const selector$3=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function Viewport({children:t}){const e=useStore$1(selector$3);return React.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:e}},t)}function useOnInitHandler(t){const e=useReactFlow(),r=reactExports.useRef(!1);reactExports.useEffect(()=>{!r.current&&e.viewportInitialized&&t&&(setTimeout(()=>t(e),1),r.current=!0)},[t,e.viewportInitialized])}const oppositePosition={[Position.Left]:Position.Right,[Position.Right]:Position.Left,[Position.Top]:Position.Bottom,[Position.Bottom]:Position.Top},ConnectionLine=({nodeId:t,handleType:e,style:r,type:n=ConnectionLineType.Bezier,CustomComponent:a,connectionStatus:o})=>{const{fromNode:l,handleId:u,toX:c,toY:h,connectionMode:v}=useStore$1(reactExports.useCallback(se=>({fromNode:se.nodeInternals.get(t),handleId:se.connectionHandleId,toX:(se.connectionPosition.x-se.transform[0])/se.transform[2],toY:(se.connectionPosition.y-se.transform[1])/se.transform[2],connectionMode:se.connectionMode}),[t]),shallow$1),g=l?.[internalsSymbol]?.handleBounds;let T=g?.[e];if(v===ConnectionMode.Loose&&(T=T||g?.[e==="source"?"target":"source"]),!l||!T)return null;const R=u?T.find(se=>se.id===u):T[0],W=R?R.x+R.width/2:(l.width??0)/2,k=R?R.y+R.height/2:l.height??0,J=(l.positionAbsolute?.x??0)+W,q=(l.positionAbsolute?.y??0)+k,Se=R?.position,V=Se?oppositePosition[Se]:null;if(!Se||!V)return null;if(a)return React.createElement(a,{connectionLineType:n,connectionLineStyle:r,fromNode:l,fromHandle:R,fromX:J,fromY:q,toX:c,toY:h,fromPosition:Se,toPosition:V,connectionStatus:o});let Y="";const ie={sourceX:J,sourceY:q,sourcePosition:Se,targetX:c,targetY:h,targetPosition:V};return n===ConnectionLineType.Bezier?[Y]=getBezierPath(ie):n===ConnectionLineType.Step?[Y]=getSmoothStepPath({...ie,borderRadius:0}):n===ConnectionLineType.SmoothStep?[Y]=getSmoothStepPath(ie):n===ConnectionLineType.SimpleBezier?[Y]=getSimpleBezierPath(ie):Y=`M${J},${q} ${c},${h}`,React.createElement("path",{d:Y,fill:"none",className:"react-flow__connection-path",style:r})};ConnectionLine.displayName="ConnectionLine";const selector$2=t=>({nodeId:t.connectionNodeId,handleType:t.connectionHandleType,nodesConnectable:t.nodesConnectable,connectionStatus:t.connectionStatus,width:t.width,height:t.height});function ConnectionLineWrapper({containerStyle:t,style:e,type:r,component:n}){const{nodeId:a,handleType:o,nodesConnectable:l,width:u,height:c,connectionStatus:h}=useStore$1(selector$2,shallow$1);return!(a&&o&&u&&l)?null:React.createElement("svg",{style:t,width:u,height:c,className:"react-flow__edges react-flow__connectionline react-flow__container"},React.createElement("g",{className:cc$1(["react-flow__connection",h])},React.createElement(ConnectionLine,{nodeId:a,handleType:o,style:e,type:r,CustomComponent:n,connectionStatus:h})))}function useNodeOrEdgeTypes(t,e){return reactExports.useRef(null),useStoreApi(),reactExports.useMemo(()=>e(t),[t])}const GraphView=({nodeTypes:t,edgeTypes:e,onMove:r,onMoveStart:n,onMoveEnd:a,onInit:o,onNodeClick:l,onEdgeClick:u,onNodeDoubleClick:c,onEdgeDoubleClick:h,onNodeMouseEnter:v,onNodeMouseMove:g,onNodeMouseLeave:T,onNodeContextMenu:R,onSelectionContextMenu:W,onSelectionStart:k,onSelectionEnd:J,connectionLineType:q,connectionLineStyle:Se,connectionLineComponent:V,connectionLineContainerStyle:Y,selectionKeyCode:ie,selectionOnDrag:se,selectionMode:ct,multiSelectionKeyCode:ae,panActivationKeyCode:st,zoomActivationKeyCode:Ct,deleteKeyCode:$t,onlyRenderVisibleElements:jo,elementsSelectable:Lp,selectNodesOnDrag:Mn,defaultViewport:sa,translateExtent:re,minZoom:$o,maxZoom:qo,preventScrolling:Kt,defaultMarkerColor:i0,zoomOnScroll:Up,zoomOnPinch:l0,panOnScroll:y0,panOnScrollSpeed:kp,panOnScrollMode:u0,zoomOnDoubleClick:f0,panOnDrag:v0,onPaneClick:p0,onPaneMouseEnter:rm,onPaneMouseMove:am,onPaneMouseLeave:ym,onPaneScroll:Wm,onPaneContextMenu:h0,onEdgeContextMenu:f1,onEdgeMouseEnter:T1,onEdgeMouseMove:I1,onEdgeMouseLeave:p1,onReconnect:Qm,onReconnectStart:m1,onReconnectEnd:W1,reconnectRadius:ug,noDragClassName:ng,noWheelClassName:Ko,noPanClassName:wi,elevateEdgesOnSelect:S0,disableKeyboardA11y:Z0,nodeOrigin:Pp,nodeExtent:Ip,rfId:x0})=>{const B0=useNodeOrEdgeTypes(t,createNodeTypes),Y0=useNodeOrEdgeTypes(e,createEdgeTypes);return useOnInitHandler(o),React.createElement(FlowRenderer$1,{onPaneClick:p0,onPaneMouseEnter:rm,onPaneMouseMove:am,onPaneMouseLeave:ym,onPaneContextMenu:h0,onPaneScroll:Wm,deleteKeyCode:$t,selectionKeyCode:ie,selectionOnDrag:se,selectionMode:ct,onSelectionStart:k,onSelectionEnd:J,multiSelectionKeyCode:ae,panActivationKeyCode:st,zoomActivationKeyCode:Ct,elementsSelectable:Lp,onMove:r,onMoveStart:n,onMoveEnd:a,zoomOnScroll:Up,zoomOnPinch:l0,zoomOnDoubleClick:f0,panOnScroll:y0,panOnScrollSpeed:kp,panOnScrollMode:u0,panOnDrag:v0,defaultViewport:sa,translateExtent:re,minZoom:$o,maxZoom:qo,onSelectionContextMenu:W,preventScrolling:Kt,noDragClassName:ng,noWheelClassName:Ko,noPanClassName:wi,disableKeyboardA11y:Z0},React.createElement(Viewport,null,React.createElement(EdgeRenderer$1,{edgeTypes:Y0,onEdgeClick:u,onEdgeDoubleClick:h,onlyRenderVisibleElements:jo,onEdgeContextMenu:f1,onEdgeMouseEnter:T1,onEdgeMouseMove:I1,onEdgeMouseLeave:p1,onReconnect:Qm,onReconnectStart:m1,onReconnectEnd:W1,reconnectRadius:ug,defaultMarkerColor:i0,noPanClassName:wi,elevateEdgesOnSelect:!!S0,disableKeyboardA11y:Z0,rfId:x0},React.createElement(ConnectionLineWrapper,{style:Se,type:q,component:V,containerStyle:Y})),React.createElement("div",{className:"react-flow__edgelabel-renderer"}),React.createElement(NodeRenderer$1,{nodeTypes:B0,onNodeClick:l,onNodeDoubleClick:c,onNodeMouseEnter:v,onNodeMouseMove:g,onNodeMouseLeave:T,onNodeContextMenu:R,selectNodesOnDrag:Mn,onlyRenderVisibleElements:jo,noPanClassName:wi,noDragClassName:ng,disableKeyboardA11y:Z0,nodeOrigin:Pp,nodeExtent:Ip,rfId:x0})))};GraphView.displayName="GraphView";var GraphView$1=reactExports.memo(GraphView);const infiniteExtent=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],initialState$6={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:infiniteExtent,nodeExtent:infiniteExtent,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:ConnectionMode.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:devWarn,isValidConnection:void 0},createRFStore=()=>createWithEqualityFn((t,e)=>({...initialState$6,setNodes:r=>{const{nodeInternals:n,nodeOrigin:a,elevateNodesOnSelect:o}=e();t({nodeInternals:createNodeInternals(r,n,a,o)})},getNodes:()=>Array.from(e().nodeInternals.values()),setEdges:r=>{const{defaultEdgeOptions:n={}}=e();t({edges:r.map(a=>({...n,...a}))})},setDefaultNodesAndEdges:(r,n)=>{const a=typeof r<"u",o=typeof n<"u",l=a?createNodeInternals(r,new Map,e().nodeOrigin,e().elevateNodesOnSelect):new Map;t({nodeInternals:l,edges:o?n:[],hasDefaultNodes:a,hasDefaultEdges:o})},updateNodeDimensions:r=>{const{onNodesChange:n,nodeInternals:a,fitViewOnInit:o,fitViewOnInitDone:l,fitViewOnInitOptions:u,domNode:c,nodeOrigin:h}=e(),v=c?.querySelector(".react-flow__viewport");if(!v)return;const g=window.getComputedStyle(v),{m22:T}=new window.DOMMatrixReadOnly(g.transform),R=r.reduce((k,J)=>{const q=a.get(J.id);if(q?.hidden)a.set(q.id,{...q,[internalsSymbol]:{...q[internalsSymbol],handleBounds:void 0}});else if(q){const Se=getDimensions(J.nodeElement);!!(Se.width&&Se.height&&(q.width!==Se.width||q.height!==Se.height||J.forceUpdate))&&(a.set(q.id,{...q,[internalsSymbol]:{...q[internalsSymbol],handleBounds:{source:getHandleBounds(".source",J.nodeElement,T,h),target:getHandleBounds(".target",J.nodeElement,T,h)}},...Se}),k.push({id:q.id,type:"dimensions",dimensions:Se}))}return k},[]);updateAbsoluteNodePositions(a,h);const W=l||o&&!l&&fitView(e,{initial:!0,...u});t({nodeInternals:new Map(a),fitViewOnInitDone:W}),R?.length>0&&n?.(R)},updateNodePositions:(r,n=!0,a=!1)=>{const{triggerNodeChanges:o}=e(),l=r.map(u=>{const c={id:u.id,type:"position",dragging:a};return n&&(c.positionAbsolute=u.positionAbsolute,c.position=u.position),c});o(l)},triggerNodeChanges:r=>{const{onNodesChange:n,nodeInternals:a,hasDefaultNodes:o,nodeOrigin:l,getNodes:u,elevateNodesOnSelect:c}=e();if(r?.length){if(o){const h=applyNodeChanges(r,u()),v=createNodeInternals(h,a,l,c);t({nodeInternals:v})}n?.(r)}},addSelectedNodes:r=>{const{multiSelectionActive:n,edges:a,getNodes:o}=e();let l,u=null;n?l=r.map(c=>createSelectionChange(c,!0)):(l=getSelectionChanges(o(),r),u=getSelectionChanges(a,[])),updateNodesAndEdgesSelections({changedNodes:l,changedEdges:u,get:e,set:t})},addSelectedEdges:r=>{const{multiSelectionActive:n,edges:a,getNodes:o}=e();let l,u=null;n?l=r.map(c=>createSelectionChange(c,!0)):(l=getSelectionChanges(a,r),u=getSelectionChanges(o(),[])),updateNodesAndEdgesSelections({changedNodes:u,changedEdges:l,get:e,set:t})},unselectNodesAndEdges:({nodes:r,edges:n}={})=>{const{edges:a,getNodes:o}=e(),l=r||o(),u=n||a,c=l.map(v=>(v.selected=!1,createSelectionChange(v.id,!1))),h=u.map(v=>createSelectionChange(v.id,!1));updateNodesAndEdgesSelections({changedNodes:c,changedEdges:h,get:e,set:t})},setMinZoom:r=>{const{d3Zoom:n,maxZoom:a}=e();n?.scaleExtent([r,a]),t({minZoom:r})},setMaxZoom:r=>{const{d3Zoom:n,minZoom:a}=e();n?.scaleExtent([a,r]),t({maxZoom:r})},setTranslateExtent:r=>{e().d3Zoom?.translateExtent(r),t({translateExtent:r})},resetSelectedElements:()=>{const{edges:r,getNodes:n}=e(),o=n().filter(u=>u.selected).map(u=>createSelectionChange(u.id,!1)),l=r.filter(u=>u.selected).map(u=>createSelectionChange(u.id,!1));updateNodesAndEdgesSelections({changedNodes:o,changedEdges:l,get:e,set:t})},setNodeExtent:r=>{const{nodeInternals:n}=e();n.forEach(a=>{a.positionAbsolute=clampPosition(a.position,r)}),t({nodeExtent:r,nodeInternals:new Map(n)})},panBy:r=>{const{transform:n,width:a,height:o,d3Zoom:l,d3Selection:u,translateExtent:c}=e();if(!l||!u||!r.x&&!r.y)return!1;const h=identity$1.translate(n[0]+r.x,n[1]+r.y).scale(n[2]),v=[[0,0],[a,o]],g=l?.constrain()(h,v,c);return l.transform(u,g),n[0]!==g.x||n[1]!==g.y||n[2]!==g.k},cancelConnection:()=>t({connectionNodeId:initialState$6.connectionNodeId,connectionHandleId:initialState$6.connectionHandleId,connectionHandleType:initialState$6.connectionHandleType,connectionStatus:initialState$6.connectionStatus,connectionStartHandle:initialState$6.connectionStartHandle,connectionEndHandle:initialState$6.connectionEndHandle}),reset:()=>t({...initialState$6})}),Object.is),ReactFlowProvider=({children:t})=>{const e=reactExports.useRef(null);return e.current||(e.current=createRFStore()),React.createElement(Provider$1,{value:e.current},t)};ReactFlowProvider.displayName="ReactFlowProvider";const Wrapper=({children:t})=>reactExports.useContext(StoreContext)?React.createElement(React.Fragment,null,t):React.createElement(ReactFlowProvider,null,t);Wrapper.displayName="ReactFlowWrapper";const defaultNodeTypes={input:InputNode$1,default:DefaultNode$1,output:OutputNode$1,group:GroupNode},defaultEdgeTypes={default:BezierEdge,straight:StraightEdge,step:StepEdge,smoothstep:SmoothStepEdge,simplebezier:SimpleBezierEdge},initNodeOrigin=[0,0],initSnapGrid=[15,15],initDefaultViewport={x:0,y:0,zoom:1},wrapperStyle={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},ReactFlow=reactExports.forwardRef(({nodes:t,edges:e,defaultNodes:r,defaultEdges:n,className:a,nodeTypes:o=defaultNodeTypes,edgeTypes:l=defaultEdgeTypes,onNodeClick:u,onEdgeClick:c,onInit:h,onMove:v,onMoveStart:g,onMoveEnd:T,onConnect:R,onConnectStart:W,onConnectEnd:k,onClickConnectStart:J,onClickConnectEnd:q,onNodeMouseEnter:Se,onNodeMouseMove:V,onNodeMouseLeave:Y,onNodeContextMenu:ie,onNodeDoubleClick:se,onNodeDragStart:ct,onNodeDrag:ae,onNodeDragStop:st,onNodesDelete:Ct,onEdgesDelete:$t,onSelectionChange:jo,onSelectionDragStart:Lp,onSelectionDrag:Mn,onSelectionDragStop:sa,onSelectionContextMenu:re,onSelectionStart:$o,onSelectionEnd:qo,connectionMode:Kt=ConnectionMode.Strict,connectionLineType:i0=ConnectionLineType.Bezier,connectionLineStyle:Up,connectionLineComponent:l0,connectionLineContainerStyle:y0,deleteKeyCode:kp="Backspace",selectionKeyCode:u0="Shift",selectionOnDrag:f0=!1,selectionMode:v0=SelectionMode.Full,panActivationKeyCode:p0="Space",multiSelectionKeyCode:rm=isMacOs()?"Meta":"Control",zoomActivationKeyCode:am=isMacOs()?"Meta":"Control",snapToGrid:ym=!1,snapGrid:Wm=initSnapGrid,onlyRenderVisibleElements:h0=!1,selectNodesOnDrag:f1=!0,nodesDraggable:T1,nodesConnectable:I1,nodesFocusable:p1,nodeOrigin:Qm=initNodeOrigin,edgesFocusable:m1,edgesUpdatable:W1,elementsSelectable:ug,defaultViewport:ng=initDefaultViewport,minZoom:Ko=.5,maxZoom:wi=2,translateExtent:S0=infiniteExtent,preventScrolling:Z0=!0,nodeExtent:Pp,defaultMarkerColor:Ip="#b1b1b7",zoomOnScroll:x0=!0,zoomOnPinch:B0=!0,panOnScroll:Y0=!1,panOnScrollSpeed:im=.5,panOnScrollMode:om=PanOnScrollMode.Free,zoomOnDoubleClick:Cm=!0,panOnDrag:r1=!0,onPaneClick:Om,onPaneMouseEnter:a1,onPaneMouseMove:hg,onPaneMouseLeave:pm,onPaneScroll:S1,onPaneContextMenu:U1,children:J1,onEdgeContextMenu:l1,onEdgeDoubleClick:Km,onEdgeMouseEnter:A1,onEdgeMouseMove:y1,onEdgeMouseLeave:uv,onEdgeUpdate:$g,onEdgeUpdateStart:Sv,onEdgeUpdateEnd:Yv,onReconnect:my,onReconnectStart:Vv,onReconnectEnd:yv,reconnectRadius:Hv=10,edgeUpdaterRadius:gy=10,onNodesChange:Qv,onEdgesChange:Ty,noDragClassName:$v="nodrag",noWheelClassName:Cv="nowheel",noPanClassName:wg="nopan",fitView:Lv=!1,fitViewOptions:Pv,connectOnClick:Ny=!0,attributionPosition:pg,proOptions:et,defaultEdgeOptions:t0,elevateNodesOnSelect:oa=!0,elevateEdgesOnSelect:a0=!1,disableKeyboardA11y:m0=!1,autoPanOnConnect:nm=!0,autoPanOnNodeDrag:L0=!0,connectionRadius:cm=20,isValidConnection:Gm,onError:Fm,style:Vm,id:D1,nodeDragThreshold:O1,...tg},Mg)=>{const kg=D1||"1";return React.createElement("div",{...tg,style:{...Vm,...wrapperStyle},ref:Mg,className:cc$1(["react-flow",a]),"data-testid":"rf__wrapper",id:D1},React.createElement(Wrapper,null,React.createElement(GraphView$1,{onInit:h,onMove:v,onMoveStart:g,onMoveEnd:T,onNodeClick:u,onEdgeClick:c,onNodeMouseEnter:Se,onNodeMouseMove:V,onNodeMouseLeave:Y,onNodeContextMenu:ie,onNodeDoubleClick:se,nodeTypes:o,edgeTypes:l,connectionLineType:i0,connectionLineStyle:Up,connectionLineComponent:l0,connectionLineContainerStyle:y0,selectionKeyCode:u0,selectionOnDrag:f0,selectionMode:v0,deleteKeyCode:kp,multiSelectionKeyCode:rm,panActivationKeyCode:p0,zoomActivationKeyCode:am,onlyRenderVisibleElements:h0,selectNodesOnDrag:f1,defaultViewport:ng,translateExtent:S0,minZoom:Ko,maxZoom:wi,preventScrolling:Z0,zoomOnScroll:x0,zoomOnPinch:B0,zoomOnDoubleClick:Cm,panOnScroll:Y0,panOnScrollSpeed:im,panOnScrollMode:om,panOnDrag:r1,onPaneClick:Om,onPaneMouseEnter:a1,onPaneMouseMove:hg,onPaneMouseLeave:pm,onPaneScroll:S1,onPaneContextMenu:U1,onSelectionContextMenu:re,onSelectionStart:$o,onSelectionEnd:qo,onEdgeContextMenu:l1,onEdgeDoubleClick:Km,onEdgeMouseEnter:A1,onEdgeMouseMove:y1,onEdgeMouseLeave:uv,onReconnect:my??$g,onReconnectStart:Vv??Sv,onReconnectEnd:yv??Yv,reconnectRadius:Hv??gy,defaultMarkerColor:Ip,noDragClassName:$v,noWheelClassName:Cv,noPanClassName:wg,elevateEdgesOnSelect:a0,rfId:kg,disableKeyboardA11y:m0,nodeOrigin:Qm,nodeExtent:Pp}),React.createElement(StoreUpdater,{nodes:t,edges:e,defaultNodes:r,defaultEdges:n,onConnect:R,onConnectStart:W,onConnectEnd:k,onClickConnectStart:J,onClickConnectEnd:q,nodesDraggable:T1,nodesConnectable:I1,nodesFocusable:p1,edgesFocusable:m1,edgesUpdatable:W1,elementsSelectable:ug,elevateNodesOnSelect:oa,minZoom:Ko,maxZoom:wi,nodeExtent:Pp,onNodesChange:Qv,onEdgesChange:Ty,snapToGrid:ym,snapGrid:Wm,connectionMode:Kt,translateExtent:S0,connectOnClick:Ny,defaultEdgeOptions:t0,fitView:Lv,fitViewOptions:Pv,onNodesDelete:Ct,onEdgesDelete:$t,onNodeDragStart:ct,onNodeDrag:ae,onNodeDragStop:st,onSelectionDrag:Mn,onSelectionDragStart:Lp,onSelectionDragStop:sa,noPanClassName:wg,nodeOrigin:Qm,rfId:kg,autoPanOnConnect:nm,autoPanOnNodeDrag:L0,onError:Fm,connectionRadius:cm,isValidConnection:Gm,nodeDragThreshold:O1}),React.createElement(Wrapper$1,{onSelectionChange:jo}),J1,React.createElement(Attribution,{proOptions:et,position:pg}),React.createElement(A11yDescriptions,{rfId:kg,disableKeyboardA11y:m0})))});ReactFlow.displayName="ReactFlow";const selector$1$1=t=>t.domNode?.querySelector(".react-flow__edgelabel-renderer");function EdgeLabelRenderer({children:t}){const e=useStore$1(selector$1$1);return e?reactDomExports.createPortal(t,e):null}const viewportSelector=t=>({x:t.transform[0],y:t.transform[1],zoom:t.transform[2]});function useViewport(){return useStore$1(viewportSelector,shallow$1)}function PlusIcon(){return React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},React.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function MinusIcon(){return React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},React.createElement("path",{d:"M0 0h32v4.2H0z"}))}function FitViewIcon(){return React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},React.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function LockIcon(){return React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},React.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function UnlockIcon(){return React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},React.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const ControlButton=({children:t,className:e,...r})=>React.createElement("button",{type:"button",className:cc$1(["react-flow__controls-button",e]),...r},t);ControlButton.displayName="ControlButton";const selector$1=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom}),Controls=({style:t,showZoom:e=!0,showFitView:r=!0,showInteractive:n=!0,fitViewOptions:a,onZoomIn:o,onZoomOut:l,onFitView:u,onInteractiveChange:c,className:h,children:v,position:g="bottom-left"})=>{const T=useStoreApi(),[R,W]=reactExports.useState(!1),{isInteractive:k,minZoomReached:J,maxZoomReached:q}=useStore$1(selector$1,shallow$1),{zoomIn:Se,zoomOut:V,fitView:Y}=useReactFlow();if(reactExports.useEffect(()=>{W(!0)},[]),!R)return null;const ie=()=>{Se(),o?.()},se=()=>{V(),l?.()},ct=()=>{Y(a),u?.()},ae=()=>{T.setState({nodesDraggable:!k,nodesConnectable:!k,elementsSelectable:!k}),c?.(!k)};return React.createElement(Panel,{className:cc$1(["react-flow__controls",h]),position:g,style:t,"data-testid":"rf__controls"},e&&React.createElement(React.Fragment,null,React.createElement(ControlButton,{onClick:ie,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:q},React.createElement(PlusIcon,null)),React.createElement(ControlButton,{onClick:se,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:J},React.createElement(MinusIcon,null))),r&&React.createElement(ControlButton,{className:"react-flow__controls-fitview",onClick:ct,title:"fit view","aria-label":"fit view"},React.createElement(FitViewIcon,null)),n&&React.createElement(ControlButton,{className:"react-flow__controls-interactive",onClick:ae,title:"toggle interactivity","aria-label":"toggle interactivity"},k?React.createElement(UnlockIcon,null):React.createElement(LockIcon,null)),v)};Controls.displayName="Controls";var Controls$1=reactExports.memo(Controls),BackgroundVariant;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(BackgroundVariant||(BackgroundVariant={}));function LinePattern({color:t,dimensions:e,lineWidth:r}){return React.createElement("path",{stroke:t,strokeWidth:r,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`})}function DotPattern({color:t,radius:e}){return React.createElement("circle",{cx:e,cy:e,r:e,fill:t})}const defaultColor={[BackgroundVariant.Dots]:"#91919a",[BackgroundVariant.Lines]:"#eee",[BackgroundVariant.Cross]:"#e2e2e2"},defaultSize={[BackgroundVariant.Dots]:1,[BackgroundVariant.Lines]:1,[BackgroundVariant.Cross]:6},selector=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function Background({id:t,variant:e=BackgroundVariant.Dots,gap:r=20,size:n,lineWidth:a=1,offset:o=2,color:l,style:u,className:c}){const h=reactExports.useRef(null),{transform:v,patternId:g}=useStore$1(selector,shallow$1),T=l||defaultColor[e],R=n||defaultSize[e],W=e===BackgroundVariant.Dots,k=e===BackgroundVariant.Cross,J=Array.isArray(r)?r:[r,r],q=[J[0]*v[2]||1,J[1]*v[2]||1],Se=R*v[2],V=k?[Se,Se]:q,Y=W?[Se/o,Se/o]:[V[0]/o,V[1]/o];return React.createElement("svg",{className:cc$1(["react-flow__background",c]),style:{...u,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:h,"data-testid":"rf__background"},React.createElement("pattern",{id:g+t,x:v[0]%q[0],y:v[1]%q[1],width:q[0],height:q[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${Y[0]},-${Y[1]})`},W?React.createElement(DotPattern,{color:T,radius:Se/o}):React.createElement(LinePattern,{dimensions:V,color:T,lineWidth:a})),React.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${g+t})`}))}Background.displayName="Background";var Background$1=reactExports.memo(Background);function sortByCtimeDescending(t,e){const r=new Date(t?.data?.aiida?.ctime||0);return new Date(e?.data?.aiida?.ctime||0)-r}function sortByLabel(t,e){return(t?.data?.label||"").localeCompare(e?.data?.label||"")}function categorizeNodes(t){const e=t.filter(a=>a.data?.node_type.includes("calculation")).sort(sortByCtimeDescending),r=t.filter(a=>a.data?.node_type.includes("workflow")).sort(sortByCtimeDescending),n=t.filter(a=>a.data?.node_type.includes("data")).sort(sortByLabel);return{calculation:e,workflow:r,data:n}}function layoutGraphDefault(t,e,r,n=null,a={}){const{spacingX:o=280,spacingY:l=70,groupGapY:u=90,centerX:c=window.innerWidth/2,centerY:h=window.innerHeight/2,smallThreshold:v=20}=a,g=[];let T=[];const R=categorizeNodes(e),W=categorizeNodes(r),k={data:["calculation","workflow","data"],calculation:["data","calculation","workflow"],workflow:["data","calculation","workflow"]},J=t.data?.node_type.split(".")[1],q=k[J]||k.data;g.push({...t,position:{x:c,y:h}});const V=q.flatMap(ie=>[...R[ie]||[],...W[ie]||[]]).length<=v,Y=(ie,se,ct,ae=!0)=>{(ie||[]).forEach((st,Ct)=>{const $t=ae?se+Ct*l:se-Ct*l,jo=c+o*ct;st.position={x:jo,y:$t},g.push(st);let Lp="";if(st?.data?.aiida?.link_label){const re=st.data.aiida.link_label;Lp=re.length>21?`${re.slice(0,18)}...`:re}const Mn={},sa=st.data?.node_type||"";(sa.includes("workflow")||sa.includes("process"))&&(Mn.strokeDasharray="5,5"),T.push({id:`e-${ct<0?st.id+"->":t.id+"->"}${ct<0?t.id:st.id}`,source:ct<0?st.id:t.id,target:ct<0?t.id:st.id,sourcePosition:ct<0?"right":"left",targetPosition:ct<0?"left":"right",type:"custom",style:Mn,data:{label:Lp,labelPosition:ct<0?"start":"end"}})})};if(V){const ie=q.flatMap(st=>R[st]||[]).reverse(),se=q.flatMap(st=>W[st]||[]).reverse(),ct=h-(ie.length-1)/2*l,ae=h-(se.length-1)/2*l;ie.forEach((st,Ct)=>Y([st],ct+Ct*l,-1,!0)),se.forEach((st,Ct)=>Y([st],ae+Ct*l,1,!0))}else{const ie=R[q[0]]||[],se=W[q[0]]||[],ct=q.slice(1,3),ae=ct.flatMap(jo=>R[jo]||[]),st=ct.flatMap(jo=>W[jo]||[]),Ct=h-175;Y(ie,Ct,-1,!0),Y(se,Ct,1,!0);const $t=Ct-u;Y(ae,$t,-1,!1),Y(st,$t,1,!1)}if(n){const ie=[],se=[];T.forEach(ct=>{ct.source.startsWith(n.aiidaUUID)&&ct.target.startsWith(t.aiidaUUID)||ct.source.startsWith(t.aiidaUUID)&&ct.target.startsWith(n.aiidaUUID)?(ct.data.labelOverride=!0,ct.style={stroke:"blue",strokeWidth:2.5,strokeDasharray:""},ie.push(ct)):se.push(ct)}),T=[...se,...ie]}return{nodes:g,edges:T}}const SYNTHETIC_MARKER="_ae_";function generateSyntheticId(t){if(typeof t!="string")return t;const e=Math.random().toString(36).substring(2,6);return`${t}${SYNTHETIC_MARKER}${e}`}function stripSyntheticId(t){if(typeof t!="string")return t;const e=new RegExp(`(${SYNTHETIC_MARKER}[a-z0-9]+)`,"gi");return t.replace(e,"")}async function fetchGeneric(t,e={},r=null){const n=stripSyntheticId(t);try{const a=await fetch(n,e);return a.ok?await a.json():(console.warn(`Fetch failed for ${n} with status ${a.status}`),r)}catch(a){return console.error(`Error fetching ${n} - `,a),r}}async function fetchUsers(t){const e=`${t}/users/`;return(await fetchGeneric(e,{},{data:[]})).data}async function fetchDownloadFormats(t){const e=`${t}/nodes/download_formats/`;return(await fetchGeneric(e,{},{data:[]})).data}async function fetchGroups(t){const e=`${t}/groups`;return(await fetchGeneric(e,{},{data:{groups:[]}}))?.data?.groups||[]}async function fetchFromQueryBuilder(t,e){try{const r=await fetch(`${t}/querybuilder/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return r.ok?(await r.json())?.data||[]:(console.error("QueryBuilder request failed:",r.status,r.statusText),[])}catch(r){return console.error("Error fetching from QueryBuilder:",r),[]}}async function fetchNodeById(t,e){if(!e)return null;const r=`${t}/nodes/${encodeURIComponent(e)}`;return fetchGeneric(r)}async function fetchNodeContents(t,e){if(!e)return null;const r=["attributes","comments","extras","derived_properties"],n={};for(const a of r){const o=`${t}/nodes/${encodeURIComponent(e)}/contents/${a}`,l=await fetchGeneric(o,{},{});l?n[a]=l?.data?.[a]??l:n[a]={}}return n}async function fetchNodeRepoList(t,e){if(!e)return[];const r=stripSyntheticId(e),n=`${t}/nodes/${encodeURIComponent(r)}/repo/list`,a=await fetchGeneric(n,{},{data:{repo_list:[]}});return a?.data?.repo_list?a.data.repo_list.filter(o=>o.type==="FILE").map(o=>({name:o.name,downloadUrl:`${t}/nodes/${encodeURIComponent(r)}/repo/contents?filename="${encodeURIComponent(o.name)}"`})):[]}async function fetchRetrievedUUID(t,e){if(!e)return null;const r=stripSyntheticId(e),n=`${t}/nodes/${encodeURIComponent(r)}/links/outgoing/`;return((await fetchGeneric(n,{},{data:{outgoing:[]}}))?.data?.outgoing||[]).find(u=>u.link_label==="retrieved")?.uuid||null}async function fetchFiles(t,e,r){if(!e)return null;const n=stripSyntheticId(e),a=["input_files","output_files"],o={};for(const l of a){const u=`${t}/calcjobs/${encodeURIComponent(n)}/${l}`,c=await fetchGeneric(u,{},{data:[]}),h=Array.isArray(c.data?.[l])?c.data[l]:Array.isArray(c.data)?c.data:[],g=stripSyntheticId(l==="input_files"?e:r),T=h.filter(R=>R.type==="FILE").map(R=>({...R,downloadUrl:`${t}/nodes/${encodeURIComponent(g)}/repo/contents?filename="${encodeURIComponent(R.name)}"`}));o[l]=T}return o}async function fetchLinks(t,e){if(!e)return{incoming:[],outgoing:[]};try{const r=encodeURIComponent(e),[n,a]=await Promise.all([fetchGeneric(`${t}/nodes/${r}/links/incoming`,{},[]),fetchGeneric(`${t}/nodes/${r}/links/outgoing`,{},[])]);return{incoming:n,outgoing:a}}catch(r){return console.error("Error fetching links:",r),{incoming:[],outgoing:[]}}}async function fetchLinkCounts(t,e=[]){if(!e.length)return e;try{return await Promise.all(e.map(async n=>{if(typeof n?.data?.parentCount=="number"&&typeof n?.data?.childCount=="number")return n;const{incoming:a,outgoing:o}=await fetchLinks(t,n.id),l=(a?.data?.incoming||[]).length,u=(o?.data?.outgoing||[]).length;return{...n,data:{...n.data,parentCount:l,childCount:u}}}))}catch(r){return console.error("Error fetching next level nodes:",r),e}}async function smartFetchData(t,e,r={},n=null){const a=stripSyntheticId(e.id),o=r[a];if(o)return console.debug(`${e.id} data is already cached - ${a}`),{...e,data:{...e.data,...o}};let l={...e.data};const u=async()=>fetchNodeRepoList(t,e.id),c=await fetchNodeContents(t,e.id);l={...l,...c};const h=u();let v=null;e.data.label==="CalcJobNode"&&(v=(async()=>{let W=l.retrievedUUID;W||(W=await fetchRetrievedUUID(t,e.id));const k=await fetchFiles(t,e.id,W);return{retrievedUUID:W,files:k}})());const[g,T]=await Promise.all([h,v]);g&&(l.repo_list=g),T&&(l={...l,...T});const R=stripSyntheticId(e.id);if(n&&e.data.node_type){const W=e.data.node_type.endsWith("|")?e.data.node_type:`${e.data.node_type}|`,k=n[W]||[];l.downloadByFormat=k.reduce((J,q)=>(J[q]=`${t}/nodes/${encodeURIComponent(R)}/download?download_format=${encodeURIComponent(q)}`,J),{})}return{...e,data:l}}async function fetchGraphByNodeId(t,e,r){const a=(await fetchNodeById(t,e)).data.nodes[0];if(!a)return{nodes:[],edges:[]};const{incoming:o,outgoing:l}=await fetchLinks(t,e),u=o?.data?.incoming||[],c=l?.data?.outgoing||[],h=[{id:generateSyntheticId(a.uuid),aiidaUUID:a.uuid,data:{label:a.node_type.split(".").filter(Boolean).pop(),node_type:a.node_type,pos:0,aiida:a,parentCount:u.length,childCount:c.length}},...u.map(T=>({id:generateSyntheticId(T.uuid),aiidaUUID:T.uuid,data:{label:T.node_type.split(".").filter(Boolean).pop(),node_type:T.node_type,pos:1,link_label:T.link_label,aiida:T}})),...c.map(T=>({id:generateSyntheticId(T.uuid),aiidaUUID:T.uuid,data:{label:T.node_type.split(".").filter(Boolean).pop(),node_type:T.node_type,pos:-1,link_label:T.link_label,aiida:T}}))],{nodes:v,edges:g}=layoutGraphDefault(h.find(T=>T.data.pos===0),h.filter(T=>T.data.pos===1),h.filter(T=>T.data.pos===-1),r);return{nodes:v,edges:g}}function Breadcrumbs({trail:t,onClick:e,maxItems:r=10}){const n=t.slice(-r);return jsxRuntimeExports.jsxs("div",{className:"ae:w-full ae:flex ae:gap-2 ae:flex-wrap ae:overflow-x-auto ae:items-center ae:bg-slate-100 ae:border-slate-800 ae:border-t ae:p-2",children:[jsxRuntimeExports.jsx("span",{className:"",children:"History:"}),n.map((a,o)=>jsxRuntimeExports.jsxs(React.Fragment,{children:[jsxRuntimeExports.jsxs("button",{className:"explorerButton ae:text-sm ",onClick:()=>e(a,o),children:[a.data.label," (",a.data.aiida.uuid.split("-")[0],")"]}),o<n.length-1&&jsxRuntimeExports.jsx("span",{className:"ae:mx-1",children:""})]},`${a.id}-${o}`))]})}function ErrorDisplay({message:t,onRetry:e}){return jsxRuntimeExports.jsxs("div",{className:"ae:flex ae:flex-col ae:items-center ae:text-red-500 ae:p-4",children:[jsxRuntimeExports.jsx("div",{className:"ae:text-5xl ae:mb-2",children:""}),jsxRuntimeExports.jsx("span",{className:"ae:text-sm ae:font-medium",children:"Failed to load data"}),t&&jsxRuntimeExports.jsx("span",{className:"ae:text-xs ae:text-gray-400 ae:mt-1",children:t}),e&&jsxRuntimeExports.jsx("button",{onClick:e,className:"ae:mt-3 ae:px-3 ae:py-1 ae:rounded-md ae:bg-red-500 ae:text-white ae:hover:bg-red-600 ae:hover:cursor-pointer",children:"Retry"})]})}const OverlayContext=reactExports.createContext(null);function useOverlayContainer(){const t=reactExports.useContext(OverlayContext);if(!t)throw new Error("useOverlayContainer must be used inside <OverlayProvider>");return t}function OverlayProvider({children:t,className:e=""}){const r=reactExports.useRef(null);return jsxRuntimeExports.jsx(OverlayContext.Provider,{value:r,children:jsxRuntimeExports.jsx("div",{ref:r,className:e,children:t})})}function Overlay({children:t,active:e,onClose:r,title:n,maxWidth:a=""}){const o=useOverlayContainer();return reactExports.useEffect(()=>{if(!e)return;const l=u=>{u.key==="Escape"&&(u.stopPropagation(),r?.())};return document.addEventListener("keydown",l),()=>document.removeEventListener("keydown",l)},[e,r]),!e||!o.current?null:reactDomExports.createPortal(jsxRuntimeExports.jsx("div",{className:"ae:absolute ae:inset-0 ae:z-50 ae:flex ae:items-center ae:justify-center ae:bg-black/30",onClick:r,children:jsxRuntimeExports.jsxs("div",{className:"ae:bg-white ae:w-full ae:mx-4 ae:h-5/6 ae:rounded-md ae:overflow-auto ae:transform ae:transition-all ae:duration-800 ae:ease-in-out",style:{maxWidth:a,width:"100%"},onClick:l=>l.stopPropagation(),children:[jsxRuntimeExports.jsxs("div",{className:"ae:flex ae:justify-between ae:items-center ae:border-b ae:px-3 ae:py-1",children:[n&&jsxRuntimeExports.jsx("div",{className:"ae:text-lg ae:font-medium",children:n}),jsxRuntimeExports.jsx("button",{onClick:r,className:"ae:text-gray-600 ae:hover:text-black ae:hover:bg-slate-50 ae:rounded-lg ae:hover:cursor-pointer ae:p-1",children:""})]}),jsxRuntimeExports.jsx("div",{className:"ae:px-4 ae:py-4",children:t})]})}),o.current)}function Spinner({size:t=100,message:e="Loading..."}){return jsxRuntimeExports.jsxs("div",{className:"ae:flex ae:flex-col ae:items-center ae:justify-center",children:[jsxRuntimeExports.jsx("svg",{className:"ae:animate-spin ae:origin-center",xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 390 390",children:jsxRuntimeExports.jsxs("g",{className:"ae:origin-center",children:[jsxRuntimeExports.jsx("path",{fill:"#0096DE",d:"M232 222c-8 11-11 18-14 32h56v-23l63 39-63 36v-23h-56c3 14 5 20 14 31s14 15 24 22c10 6 16 8 27 10 16 1 25 0 40-5 13-6 20-10 29-21 10-9 11-14 17-27 3-9 4-14 3-23 1-10-1-15-3-25-5-12-9-19-17-29-9-9-16-14-29-20-15-5-23-6-40-4-14 3-20 5-27 9-10 6-15 11-24 21Z"}),jsxRuntimeExports.jsx("path",{fill:"#30B808",d:"M178 238c-6-12-11-19-21-28l-28 48 20 11-65 36v-73l20 11 27-48c-13-4-20-5-34-3-13 2-19 4-30 10-10 6-15 9-22 18-9 14-13 22-16 37-1 15-1 22 3 36 4 13 7 17 16 28 6 7 10 10 18 15s14 6 23 9c13 2 21 2 34 0 13-3 20-7 32-15 11-11 16-18 23-33 5-14 6-20 6-28 0-12-2-18-6-31Z"}),jsxRuntimeExports.jsx("path",{fill:"#FF7D17",d:"M191 183c14 2 21 1 35-3l-28-48-20 11 2-74 63 37-20 11 28 48c10-9 15-15 20-28 5-12 6-19 7-31 0-12-1-18-5-28-7-15-12-23-24-33-12-8-19-12-33-15-12-3-18-2-31 0-10 1-15 3-23 8s-12 9-19 15v1c-9 10-12 16-17 28-3 13-4 21-3 36 4 15 7 23 17 37 10 10 14 14 21 18 10 6 17 8 30 10Z"})]})}),jsxRuntimeExports.jsx("span",{className:"ae:text-base ae:md:text-lg ae:text-gray-500 ae:animate-pulse",children:e})]})}function _extends(){return _extends=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},_extends.apply(null,arguments)}function _objectWithoutPropertiesLoose(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var initialState$5={},Context$5=reactExports.createContext(initialState$5),reducer$5=(t,e)=>_extends({},t,e),useShowToolsStore=()=>reactExports.useContext(Context$5),DispatchShowTools=reactExports.createContext(()=>{});DispatchShowTools.displayName="JVR.DispatchShowTools";function useShowTools(){return reactExports.useReducer(reducer$5,initialState$5)}function useShowToolsDispatch(){return reactExports.useContext(DispatchShowTools)}var ShowTools=t=>{var{initial:e,dispatch:r,children:n}=t;return jsxRuntimeExports.jsx(Context$5.Provider,{value:e,children:jsxRuntimeExports.jsx(DispatchShowTools.Provider,{value:r,children:n})})};ShowTools.displayName="JVR.ShowTools";var initialState$4={},Context$4=reactExports.createContext(initialState$4),reducer$4=(t,e)=>_extends({},t,e),useExpandsStore=()=>reactExports.useContext(Context$4),DispatchExpands=reactExports.createContext(()=>{});DispatchExpands.displayName="JVR.DispatchExpands";function useExpands(){return reactExports.useReducer(reducer$4,initialState$4)}function useExpandsDispatch(){return reactExports.useContext(DispatchExpands)}var Expands=t=>{var{initial:e,dispatch:r,children:n}=t;return jsxRuntimeExports.jsx(Context$4.Provider,{value:e,children:jsxRuntimeExports.jsx(DispatchExpands.Provider,{value:r,children:n})})};Expands.displayName="JVR.Expands";var initialState$3={Str:{as:"span","data-type":"string",style:{color:"var(--w-rjv-type-string-color, #cb4b16)"},className:"w-rjv-type",children:"string"},Url:{as:"a",style:{color:"var(--w-rjv-type-url-color, #0969da)"},"data-type":"url",className:"w-rjv-type",children:"url"},Undefined:{style:{color:"var(--w-rjv-type-undefined-color, #586e75)"},as:"span","data-type":"undefined",className:"w-rjv-type",children:"undefined"},Null:{style:{color:"var(--w-rjv-type-null-color, #d33682)"},as:"span","data-type":"null",className:"w-rjv-type",children:"null"},Map:{style:{color:"var(--w-rjv-type-map-color, #268bd2)",marginRight:3},as:"span","data-type":"map",className:"w-rjv-type",children:"Map"},Nan:{style:{color:"var(--w-rjv-type-nan-color, #859900)"},as:"span","data-type":"nan",className:"w-rjv-type",children:"NaN"},Bigint:{style:{color:"var(--w-rjv-type-bigint-color, #268bd2)"},as:"span","data-type":"bigint",className:"w-rjv-type",children:"bigint"},Int:{style:{color:"var(--w-rjv-type-int-color, #268bd2)"},as:"span","data-type":"int",className:"w-rjv-type",children:"int"},Set:{style:{color:"var(--w-rjv-type-set-color, #268bd2)",marginRight:3},as:"span","data-type":"set",className:"w-rjv-type",children:"Set"},Float:{style:{color:"var(--w-rjv-type-float-color, #859900)"},as:"span","data-type":"float",className:"w-rjv-type",children:"float"},True:{style:{color:"var(--w-rjv-type-boolean-color, #2aa198)"},as:"span","data-type":"bool",className:"w-rjv-type",children:"bool"},False:{style:{color:"var(--w-rjv-type-boolean-color, #2aa198)"},as:"span","data-type":"bool",className:"w-rjv-type",children:"bool"},Date:{style:{color:"var(--w-rjv-type-date-color, #268bd2)"},as:"span","data-type":"date",className:"w-rjv-type",children:"date"}},Context$3=reactExports.createContext(initialState$3),reducer$3=(t,e)=>_extends({},t,e),useTypesStore=()=>reactExports.useContext(Context$3),DispatchTypes=reactExports.createContext(()=>{});DispatchTypes.displayName="JVR.DispatchTypes";function useTypes(){return reactExports.useReducer(reducer$3,initialState$3)}function useTypesDispatch(){return reactExports.useContext(DispatchTypes)}function Types(t){var{initial:e,dispatch:r,children:n}=t;return jsxRuntimeExports.jsx(Context$3.Provider,{value:e,children:jsxRuntimeExports.jsx(DispatchTypes.Provider,{value:r,children:n})})}Types.displayName="JVR.Types";var _excluded$a=["style"];function TriangleArrow(t){var{style:e}=t,r=_objectWithoutPropertiesLoose(t,_excluded$a),n=_extends({cursor:"pointer",height:"1em",width:"1em",userSelect:"none",display:"inline-flex"},e);return jsxRuntimeExports.jsx("svg",_extends({viewBox:"0 0 24 24",fill:"var(--w-rjv-arrow-color, currentColor)",style:n},r,{children:jsxRuntimeExports.jsx("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"})}))}TriangleArrow.displayName="JVR.TriangleArrow";var initialState$2={Arrow:{as:"span",className:"w-rjv-arrow",style:{transform:"rotate(0deg)",transition:"all 0.3s"},children:jsxRuntimeExports.jsx(TriangleArrow,{})},Colon:{as:"span",style:{color:"var(--w-rjv-colon-color, var(--w-rjv-color))",marginLeft:0,marginRight:2},className:"w-rjv-colon",children:":"},Quote:{as:"span",style:{color:"var(--w-rjv-quotes-color, #236a7c)"},className:"w-rjv-quotes",children:'"'},ValueQuote:{as:"span",style:{color:"var(--w-rjv-quotes-string-color, #cb4b16)"},className:"w-rjv-quotes",children:'"'},BracketsLeft:{as:"span",style:{color:"var(--w-rjv-brackets-color, #236a7c)"},className:"w-rjv-brackets-start",children:"["},BracketsRight:{as:"span",style:{color:"var(--w-rjv-brackets-color, #236a7c)"},className:"w-rjv-brackets-end",children:"]"},BraceLeft:{as:"span",style:{color:"var(--w-rjv-curlybraces-color, #236a7c)"},className:"w-rjv-curlybraces-start",children:"{"},BraceRight:{as:"span",style:{color:"var(--w-rjv-curlybraces-color, #236a7c)"},className:"w-rjv-curlybraces-end",children:"}"}},Context$2=reactExports.createContext(initialState$2),reducer$2=(t,e)=>_extends({},t,e),useSymbolsStore=()=>reactExports.useContext(Context$2),DispatchSymbols=reactExports.createContext(()=>{});DispatchSymbols.displayName="JVR.DispatchSymbols";function useSymbols(){return reactExports.useReducer(reducer$2,initialState$2)}function useSymbolsDispatch(){return reactExports.useContext(DispatchSymbols)}var Symbols=t=>{var{initial:e,dispatch:r,children:n}=t;return jsxRuntimeExports.jsx(Context$2.Provider,{value:e,children:jsxRuntimeExports.jsx(DispatchSymbols.Provider,{value:r,children:n})})};Symbols.displayName="JVR.Symbols";var initialState$1={Copied:{className:"w-rjv-copied",style:{height:"1em",width:"1em",cursor:"pointer",verticalAlign:"middle",marginLeft:5}},CountInfo:{as:"span",className:"w-rjv-object-size",style:{color:"var(--w-rjv-info-color, #0000004d)",paddingLeft:8,fontStyle:"italic"}},CountInfoExtra:{as:"span",className:"w-rjv-object-extra",style:{paddingLeft:8}},Ellipsis:{as:"span",style:{cursor:"pointer",color:"var(--w-rjv-ellipsis-color, #cb4b16)",userSelect:"none"},className:"w-rjv-ellipsis",children:"..."},Row:{as:"div",className:"w-rjv-line"},KeyName:{as:"span",className:"w-rjv-object-key"}},Context$1=reactExports.createContext(initialState$1),reducer$1=(t,e)=>_extends({},t,e),useSectionStore=()=>reactExports.useContext(Context$1),DispatchSection=reactExports.createContext(()=>{});DispatchSection.displayName="JVR.DispatchSection";function useSection(){return reactExports.useReducer(reducer$1,initialState$1)}function useSectionDispatch(){return reactExports.useContext(DispatchSection)}var Section=t=>{var{initial:e,dispatch:r,children:n}=t;return jsxRuntimeExports.jsx(Context$1.Provider,{value:e,children:jsxRuntimeExports.jsx(DispatchSection.Provider,{value:r,children:n})})};Section.displayName="JVR.Section";var initialState={objectSortKeys:!1,indentWidth:15},Context=reactExports.createContext(initialState);Context.displayName="JVR.Context";var DispatchContext=reactExports.createContext(()=>{});DispatchContext.displayName="JVR.DispatchContext";function reducer(t,e){return _extends({},t,e)}var useStore=()=>reactExports.useContext(Context),Provider=t=>{var{children:e,initialState:r,initialTypes:n}=t,[a,o]=reactExports.useReducer(reducer,Object.assign({},initialState,r)),[l,u]=useShowTools(),[c,h]=useExpands(),[v,g]=useTypes(),[T,R]=useSymbols(),[W,k]=useSection();return reactExports.useEffect(()=>o(_extends({},r)),[r]),jsxRuntimeExports.jsx(Context.Provider,{value:a,children:jsxRuntimeExports.jsx(DispatchContext.Provider,{value:o,children:jsxRuntimeExports.jsx(ShowTools,{initial:l,dispatch:u,children:jsxRuntimeExports.jsx(Expands,{initial:c,dispatch:h,children:jsxRuntimeExports.jsx(Types,{initial:_extends({},v,n),dispatch:g,children:jsxRuntimeExports.jsx(Symbols,{initial:T,dispatch:R,children:jsxRuntimeExports.jsx(Section,{initial:W,dispatch:k,children:e})})})})})})})};Provider.displayName="JVR.Provider";function _objectDestructuringEmpty(t){if(t==null)throw new TypeError("Cannot destructure "+t)}var _excluded$9=["isNumber","value","parentValue","keyName","keys"],_excluded2$5=["as","render"],_excluded3$1=["as","render"],_excluded4$1=["as","render"],_excluded5$1=["as","style","render"],_excluded6$1=["as","render"],_excluded7$1=["as","render"],_excluded8$1=["as","render"],_excluded9$1=["as","render"],Quote$1=t=>{var{Quote:e={}}=useSymbolsStore(),{isNumber:r,value:n,parentValue:a,keyName:o,keys:l}=t,u=_objectWithoutPropertiesLoose(t,_excluded$9);if(r)return null;var{as:c,render:h}=e,v=_objectWithoutPropertiesLoose(e,_excluded2$5),g=c||"span",T=_extends({},u,v),R={value:n,parentValue:a,keyName:o,keys:l||(o?[o]:[])},W=h&&typeof h=="function"&&h(T,R);return W||jsxRuntimeExports.jsx(g,_extends({},T))};Quote$1.displayName="JVR.Quote";var ValueQuote$1=t=>{var{ValueQuote:e={}}=useSymbolsStore(),r=_extends({},(_objectDestructuringEmpty(t),t)),{as:n,render:a}=e,o=_objectWithoutPropertiesLoose(e,_excluded3$1),l=n||"span",u=_extends({},r,o),c=a&&typeof a=="function"&&a(u,{});return c||jsxRuntimeExports.jsx(l,_extends({},u))};ValueQuote$1.displayName="JVR.ValueQuote";var Colon$1=t=>{var{value:e,parentValue:r,keyName:n,keys:a}=t,{Colon:o={}}=useSymbolsStore(),{as:l,render:u}=o,c=_objectWithoutPropertiesLoose(o,_excluded4$1),h=l||"span",v=u&&typeof u=="function"&&u(c,{value:e,parentValue:r,keyName:n,keys:a||(n?[n]:[])});return v||jsxRuntimeExports.jsx(h,_extends({},c))};Colon$1.displayName="JVR.Colon";var Arrow$1=t=>{var{Arrow:e={}}=useSymbolsStore(),r=useExpandsStore(),{expandKey:n,style:a,value:o,parentValue:l,keyName:u,keys:c}=t,h=!!r[n],{as:v,style:g,render:T}=e,R=_objectWithoutPropertiesLoose(e,_excluded5$1),W=v||"span",k=T&&typeof T=="function",J=_extends({},R,{"data-expanded":h,style:_extends({},g,a)}),q={value:o,parentValue:l,keyName:u,keys:c||(u?[u]:[])},Se=k&&T(J,q);return Se||jsxRuntimeExports.jsx(W,_extends({},R,{style:_extends({},g,a)}))};Arrow$1.displayName="JVR.Arrow";var BracketsOpen=t=>{var{isBrackets:e,value:r,parentValue:n,keyName:a,keys:o}=t,{BracketsLeft:l={},BraceLeft:u={}}=useSymbolsStore(),c={value:r,parentValue:n,keyName:a,keys:o||(a?[a]:[])};if(e){var{as:h,render:v}=l,g=_objectWithoutPropertiesLoose(l,_excluded6$1),T=h||"span",R=v&&typeof v=="function"&&v(g,c);return R||jsxRuntimeExports.jsx(T,_extends({},g))}var{as:W,render:k}=u,J=_objectWithoutPropertiesLoose(u,_excluded7$1),q=W||"span",Se=k&&typeof k=="function"&&k(J,c);return Se||jsxRuntimeExports.jsx(q,_extends({},J))};BracketsOpen.displayName="JVR.BracketsOpen";var BracketsClose=t=>{var{isBrackets:e,isVisiable:r,value:n,parentValue:a,keyName:o,keys:l}=t,u={value:n,parentValue:a,keyName:o,keys:l||(o?[o]:[])};if(!r)return null;var{BracketsRight:c={},BraceRight:h={}}=useSymbolsStore();if(e){var{as:v,render:g}=c,T=_objectWithoutPropertiesLoose(c,_excluded8$1),R=v||"span",W=g&&typeof g=="function"&&g(T,u);return W||jsxRuntimeExports.jsx(R,_extends({},T))}var{as:k,render:J}=h,q=_objectWithoutPropertiesLoose(h,_excluded9$1),Se=k||"span",V=J&&typeof J=="function"&&J(q,u);return V||jsxRuntimeExports.jsx(Se,_extends({},q))};BracketsClose.displayName="JVR.BracketsClose";var NestedClose=t=>{var e,{keyName:r,value:n,expandKey:a,parentValue:o,level:l,keys:u=[]}=t,c=useExpandsStore(),{collapsed:h,shouldExpandNodeInitially:v}=useStore(),g=typeof h=="boolean"?h:typeof h=="number"?l>h:!1,T=(e=c[a])!=null?e:v?!1:g,R=v&&v(!T,{value:n,keys:u,level:l,keyName:r,parentValue:o});if(c[a]===void 0&&!R)return null;var W=Object.keys(n).length;if(T||W===0)return null;var k={paddingLeft:4},J={keyName:r,value:n,keys:u,parentValue:o},q=Array.isArray(n),Se=n instanceof Set;return jsxRuntimeExports.jsx("div",{style:k,children:jsxRuntimeExports.jsx(BracketsClose,_extends({isBrackets:q||Se},J,{isVisiable:!0}))})};NestedClose.displayName="JVR.NestedClose";var _excluded$8=["as","render"],_excluded2$4=["as","render"],_excluded3=["as","render"],_excluded4=["as","render"],_excluded5=["as","render"],_excluded6=["as","render"],_excluded7=["as","render"],_excluded8=["as","render"],_excluded9=["as","render"],_excluded0=["as","render"],_excluded1=["as","render"],_excluded10=["as","render"],_excluded11=["as","render"],bigIntToString=t=>{if(t===void 0)return"0n";if(typeof t=="string")try{t=BigInt(t)}catch{return"0n"}return t?t.toString()+"n":"0n"},SetComp=t=>{var{value:e,keyName:r}=t,{Set:n={},displayDataTypes:a}=useTypesStore(),o=e instanceof Set;if(!o||!a)return null;var{as:l,render:u}=n,c=_objectWithoutPropertiesLoose(n,_excluded$8),h=u&&typeof u=="function",v=h&&u(c,{type:"type",value:e,keyName:r});if(v)return v;var g=l||"span";return jsxRuntimeExports.jsx(g,_extends({},c))};SetComp.displayName="JVR.SetComp";var MapComp=t=>{var{value:e,keyName:r}=t,{Map:n={},displayDataTypes:a}=useTypesStore(),o=e instanceof Map;if(!o||!a)return null;var{as:l,render:u}=n,c=_objectWithoutPropertiesLoose(n,_excluded2$4),h=u&&typeof u=="function",v=h&&u(c,{type:"type",value:e,keyName:r});if(v)return v;var g=l||"span";return jsxRuntimeExports.jsx(g,_extends({},c))};MapComp.displayName="JVR.MapComp";var defalutStyle={opacity:.75,paddingRight:4},TypeString=t=>{var{children:e="",keyName:r,keys:n}=t,{Str:a={},displayDataTypes:o}=useTypesStore(),{shortenTextAfterLength:l=30,stringEllipsis:u="..."}=useStore(),{as:c,render:h}=a,v=_objectWithoutPropertiesLoose(a,_excluded3),g=e,[T,R]=reactExports.useState(l&&g.length>l);reactExports.useEffect(()=>R(l&&g.length>l),[l]);var W=c||"span",k=_extends({},defalutStyle,a.style||{});l>0&&(v.style=_extends({},v.style,{cursor:g.length<=l?"initial":"pointer"}),g.length>l&&(v.onClick=()=>{R(!T)}));var J=T?""+g.slice(0,l)+u:g,q=h&&typeof h=="function",Se=q&&h(_extends({},v,{style:k}),{type:"type",value:e,keyName:r,keys:n}),V=T?"w-rjv-value w-rjv-value-short":"w-rjv-value",Y=q&&h(_extends({},v,{children:J,className:V}),{type:"value",value:e,keyName:r,keys:n});return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[o&&(Se||jsxRuntimeExports.jsx(W,_extends({},v,{style:k}))),Y||jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(ValueQuote$1,{}),jsxRuntimeExports.jsx(W,_extends({},v,{className:V,children:J})),jsxRuntimeExports.jsx(ValueQuote$1,{})]})]})};TypeString.displayName="JVR.TypeString";var TypeTrue=t=>{var{children:e,keyName:r,keys:n}=t,{True:a={},displayDataTypes:o}=useTypesStore(),{as:l,render:u}=a,c=_objectWithoutPropertiesLoose(a,_excluded4),h=l||"span",v=_extends({},defalutStyle,a.style||{}),g=u&&typeof u=="function",T=g&&u(_extends({},c,{style:v}),{type:"type",value:e,keyName:r,keys:n}),R=g&&u(_extends({},c,{children:e,className:"w-rjv-value"}),{type:"value",value:e,keyName:r,keys:n});return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[o&&(T||jsxRuntimeExports.jsx(h,_extends({},c,{style:v}))),R||jsxRuntimeExports.jsx(h,_extends({},c,{className:"w-rjv-value",children:e?.toString()}))]})};TypeTrue.displayName="JVR.TypeTrue";var TypeFalse=t=>{var{children:e,keyName:r,keys:n}=t,{False:a={},displayDataTypes:o}=useTypesStore(),{as:l,render:u}=a,c=_objectWithoutPropertiesLoose(a,_excluded5),h=l||"span",v=_extends({},defalutStyle,a.style||{}),g=u&&typeof u=="function",T=g&&u(_extends({},c,{style:v}),{type:"type",value:e,keyName:r,keys:n}),R=g&&u(_extends({},c,{children:e,className:"w-rjv-value"}),{type:"value",value:e,keyName:r,keys:n});return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[o&&(T||jsxRuntimeExports.jsx(h,_extends({},c,{style:v}))),R||jsxRuntimeExports.jsx(h,_extends({},c,{className:"w-rjv-value",children:e?.toString()}))]})};TypeFalse.displayName="JVR.TypeFalse";var TypeFloat=t=>{var{children:e,keyName:r,keys:n}=t,{Float:a={},displayDataTypes:o}=useTypesStore(),{as:l,render:u}=a,c=_objectWithoutPropertiesLoose(a,_excluded6),h=l||"span",v=_extends({},defalutStyle,a.style||{}),g=u&&typeof u=="function",T=g&&u(_extends({},c,{style:v}),{type:"type",value:e,keyName:r,keys:n}),R=g&&u(_extends({},c,{children:e,className:"w-rjv-value"}),{type:"value",value:e,keyName:r,keys:n});return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[o&&(T||jsxRuntimeExports.jsx(h,_extends({},c,{style:v}))),R||jsxRuntimeExports.jsx(h,_extends({},c,{className:"w-rjv-value",children:e?.toString()}))]})};TypeFloat.displayName="JVR.TypeFloat";var TypeInt=t=>{var{children:e,keyName:r,keys:n}=t,{Int:a={},displayDataTypes:o}=useTypesStore(),{as:l,render:u}=a,c=_objectWithoutPropertiesLoose(a,_excluded7),h=l||"span",v=_extends({},defalutStyle,a.style||{}),g=u&&typeof u=="function",T=g&&u(_extends({},c,{style:v}),{type:"type",value:e,keyName:r,keys:n}),R=g&&u(_extends({},c,{children:e,className:"w-rjv-value"}),{type:"value",value:e,keyName:r,keys:n});return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[o&&(T||jsxRuntimeExports.jsx(h,_extends({},c,{style:v}))),R||jsxRuntimeExports.jsx(h,_extends({},c,{className:"w-rjv-value",children:e?.toString()}))]})};TypeInt.displayName="JVR.TypeInt";var TypeBigint=t=>{var{children:e,keyName:r,keys:n}=t,{Bigint:a={},displayDataTypes:o}=useTypesStore(),{as:l,render:u}=a,c=_objectWithoutPropertiesLoose(a,_excluded8),h=l||"span",v=_extends({},defalutStyle,a.style||{}),g=u&&typeof u=="function",T=g&&u(_extends({},c,{style:v}),{type:"type",value:e,keyName:r,keys:n}),R=g&&u(_extends({},c,{children:e,className:"w-rjv-value"}),{type:"value",value:e,keyName:r,keys:n});return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[o&&(T||jsxRuntimeExports.jsx(h,_extends({},c,{style:v}))),R||jsxRuntimeExports.jsx(h,_extends({},c,{className:"w-rjv-value",children:bigIntToString(e?.toString())}))]})};TypeBigint.displayName="JVR.TypeFloat";var TypeUrl=t=>{var{children:e,keyName:r,keys:n}=t,{Url:a={},displayDataTypes:o}=useTypesStore(),{as:l,render:u}=a,c=_objectWithoutPropertiesLoose(a,_excluded9),h=l||"span",v=_extends({},defalutStyle,a.style),g=u&&typeof u=="function",T=g&&u(_extends({},c,{style:v}),{type:"type",value:e,keyName:r,keys:n}),R=g&&u(_extends({},c,{children:e?.href,className:"w-rjv-value"}),{type:"value",value:e,keyName:r,keys:n});return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[o&&(T||jsxRuntimeExports.jsx(h,_extends({},c,{style:v}))),R||jsxRuntimeExports.jsxs("a",_extends({href:e?.href,target:"_blank"},c,{className:"w-rjv-value",children:[jsxRuntimeExports.jsx(ValueQuote$1,{}),e?.href,jsxRuntimeExports.jsx(ValueQuote$1,{})]}))]})};TypeUrl.displayName="JVR.TypeUrl";var TypeDate=t=>{var{children:e,keyName:r,keys:n}=t,{Date:a={},displayDataTypes:o}=useTypesStore(),{as:l,render:u}=a,c=_objectWithoutPropertiesLoose(a,_excluded0),h=l||"span",v=_extends({},defalutStyle,a.style||{}),g=u&&typeof u=="function",T=g&&u(_extends({},c,{style:v}),{type:"type",value:e,keyName:r,keys:n}),R=e instanceof Date?e.toLocaleString():e,W=g&&u(_extends({},c,{children:R,className:"w-rjv-value"}),{type:"value",value:e,keyName:r,keys:n});return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[o&&(T||jsxRuntimeExports.jsx(h,_extends({},c,{style:v}))),W||jsxRuntimeExports.jsx(h,_extends({},c,{className:"w-rjv-value",children:R}))]})};TypeDate.displayName="JVR.TypeDate";var TypeUndefined=t=>{var{children:e,keyName:r,keys:n}=t,{Undefined:a={},displayDataTypes:o}=useTypesStore(),{as:l,render:u}=a,c=_objectWithoutPropertiesLoose(a,_excluded1),h=l||"span",v=_extends({},defalutStyle,a.style||{}),g=u&&typeof u=="function",T=g&&u(_extends({},c,{style:v}),{type:"type",value:e,keyName:r,keys:n}),R=g&&u(_extends({},c,{children:e,className:"w-rjv-value"}),{type:"value",value:e,keyName:r,keys:n});return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[o&&(T||jsxRuntimeExports.jsx(h,_extends({},c,{style:v}))),R]})};TypeUndefined.displayName="JVR.TypeUndefined";var TypeNull=t=>{var{children:e,keyName:r,keys:n}=t,{Null:a={},displayDataTypes:o}=useTypesStore(),{as:l,render:u}=a,c=_objectWithoutPropertiesLoose(a,_excluded10),h=l||"span",v=_extends({},defalutStyle,a.style||{}),g=u&&typeof u=="function",T=g&&u(_extends({},c,{style:v}),{type:"type",value:e,keyName:r,keys:n}),R=g&&u(_extends({},c,{children:e,className:"w-rjv-value"}),{type:"value",value:e,keyName:r,keys:n});return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[o&&(T||jsxRuntimeExports.jsx(h,_extends({},c,{style:v}))),R]})};TypeNull.displayName="JVR.TypeNull";var TypeNan=t=>{var{children:e,keyName:r,keys:n}=t,{Nan:a={},displayDataTypes:o}=useTypesStore(),{as:l,render:u}=a,c=_objectWithoutPropertiesLoose(a,_excluded11),h=l||"span",v=_extends({},defalutStyle,a.style||{}),g=u&&typeof u=="function",T=g&&u(_extends({},c,{style:v}),{type:"type",value:e,keyName:r,keys:n}),R=g&&u(_extends({},c,{children:e?.toString(),className:"w-rjv-value"}),{type:"value",value:e,keyName:r,keys:n});return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[o&&(T||jsxRuntimeExports.jsx(h,_extends({},c,{style:v}))),R]})};TypeNan.displayName="JVR.TypeNan";var isFloat=t=>Number(t)===t&&t%1!==0||isNaN(t),Value=t=>{var{value:e,keyName:r,keys:n}=t,a={keyName:r,keys:n};return e instanceof URL?jsxRuntimeExports.jsx(TypeUrl,_extends({},a,{children:e})):typeof e=="string"?jsxRuntimeExports.jsx(TypeString,_extends({},a,{children:e})):e===!0?jsxRuntimeExports.jsx(TypeTrue,_extends({},a,{children:e})):e===!1?jsxRuntimeExports.jsx(TypeFalse,_extends({},a,{children:e})):e===null?jsxRuntimeExports.jsx(TypeNull,_extends({},a,{children:e})):e===void 0?jsxRuntimeExports.jsx(TypeUndefined,_extends({},a,{children:e})):e instanceof Date?jsxRuntimeExports.jsx(TypeDate,_extends({},a,{children:e})):typeof e=="number"&&isNaN(e)?jsxRuntimeExports.jsx(TypeNan,_extends({},a,{children:e})):typeof e=="number"&&isFloat(e)?jsxRuntimeExports.jsx(TypeFloat,_extends({},a,{children:e})):typeof e=="bigint"?jsxRuntimeExports.jsx(TypeBigint,_extends({},a,{children:e})):typeof e=="number"?jsxRuntimeExports.jsx(TypeInt,_extends({},a,{children:e})):null};Value.displayName="JVR.Value";function useSymbolsRender(t,e,r){var n=useSymbolsDispatch(),a=[t.className,e.className].filter(Boolean).join(" "),o=_extends({},t,e,{className:a,style:_extends({},t.style,e.style),children:e.children||t.children});reactExports.useEffect(()=>n({[r]:o}),[e])}function useTypesRender(t,e,r){var n=useTypesDispatch(),a=[t.className,e.className].filter(Boolean).join(" "),o=_extends({},t,e,{className:a,style:_extends({},t.style,e.style),children:e.children||t.children});reactExports.useEffect(()=>n({[r]:o}),[e])}function useSectionRender(t,e,r){var n=useSectionDispatch(),a=[t.className,e.className].filter(Boolean).join(" "),o=_extends({},t,e,{className:a,style:_extends({},t.style,e.style),children:e.children||t.children});reactExports.useEffect(()=>n({[r]:o}),[e])}var _excluded$7=["as","render"],KeyName=t=>{var{KeyName:e={}}=useSectionStore();return useSectionRender(e,t,"KeyName"),null};KeyName.displayName="JVR.KeyName";var KeyNameComp=t=>{var{children:e,value:r,parentValue:n,keyName:a,keys:o}=t,l=typeof e=="number",u={color:l?"var(--w-rjv-key-number, #268bd2)":"var(--w-rjv-key-string, #002b36)"},{KeyName:c={}}=useSectionStore(),{as:h,render:v}=c,g=_objectWithoutPropertiesLoose(c,_excluded$7);g.style=_extends({},g.style,u);var T=h||"span",R=v&&typeof v=="function"&&v(_extends({},g,{children:e}),{value:r,parentValue:n,keyName:a,keys:o||(a?[a]:[])});return R||jsxRuntimeExports.jsx(T,_extends({},g,{children:e}))};KeyNameComp.displayName="JVR.KeyNameComp";var _excluded$6=["children","value","parentValue","keyName","keys"],_excluded2$3=["as","render","children"],Row=t=>{var{Row:e={}}=useSectionStore();return useSectionRender(e,t,"Row"),null};Row.displayName="JVR.Row";var RowComp=t=>{var{children:e,value:r,parentValue:n,keyName:a,keys:o}=t,l=_objectWithoutPropertiesLoose(t,_excluded$6),{Row:u={}}=useSectionStore(),{as:c,render:h}=u,v=_objectWithoutPropertiesLoose(u,_excluded2$3),g=c||"div",T=h&&typeof h=="function"&&h(_extends({},l,v,{children:e}),{value:r,keyName:a,parentValue:n,keys:o});return T||jsxRuntimeExports.jsx(g,_extends({},l,v,{children:e}))};RowComp.displayName="JVR.RowComp";function usePrevious(t){var e=reactExports.useRef();return reactExports.useEffect(()=>{e.current=t}),e.current}function useHighlight(t){var{value:e,highlightUpdates:r,highlightContainer:n}=t,a=usePrevious(e),o=reactExports.useMemo(()=>{if(!r||a===void 0)return!1;if(typeof e!=typeof a)return!0;if(typeof e=="number")return isNaN(e)&&isNaN(a)?!1:e!==a;if(Array.isArray(e)!==Array.isArray(a))return!0;if(typeof e=="object"||typeof e=="function")return!1;if(e!==a)return!0},[r,e]);reactExports.useEffect(()=>{n&&n.current&&o&&"animate"in n.current&&n.current.animate([{backgroundColor:"var(--w-rjv-update-color, #ebcb8b)"},{backgroundColor:""}],{duration:1e3,easing:"ease-in"})},[o,e,n])}var _excluded$5=["keyName","value","parentValue","expandKey","keys","beforeCopy"],_excluded2$2=["as","render"],Copied$1=t=>{var{keyName:e,value:r,parentValue:n,expandKey:a,keys:o,beforeCopy:l}=t,u=_objectWithoutPropertiesLoose(t,_excluded$5),{onCopied:c,enableClipboard:h,beforeCopy:v}=useStore(),g=useShowToolsStore(),T=g[a],[R,W]=reactExports.useState(!1),{Copied:k={}}=useSectionStore(),J=k?.beforeCopy;if(h===!1||!T)return null;var q=ae=>{ae.stopPropagation();var st="";typeof r=="number"&&r===1/0?st="Infinity":typeof r=="number"&&isNaN(r)?st="NaN":typeof r=="bigint"?st=bigIntToString(r):r instanceof Date?st=r.toLocaleString():st=JSON.stringify(r,(jo,Lp)=>typeof Lp=="bigint"?bigIntToString(Lp):Lp,2);var Ct=l||J||v;Ct&&typeof Ct=="function"&&(st=Ct(st,e,r,n,a,o)),c&&c(st,r),W(!0);var $t=navigator.clipboard||{writeText(jo){return new Promise((Lp,Mn)=>{var sa=document.createElement("textarea");sa.style.position="absolute",sa.style.opacity="0",sa.style.left="-99999999px",sa.value=jo,document.body.appendChild(sa),sa.select(),document.execCommand("copy")?Lp():Mn(),sa.remove()})}};$t.writeText(st).then(()=>{var jo=setTimeout(()=>{W(!1),clearTimeout(jo)},3e3)}).catch(jo=>{})},Se={style:{display:"inline-flex"},fill:R?"var(--w-rjv-copied-success-color, #28a745)":"var(--w-rjv-copied-color, currentColor)",onClick:q},{render:V}=k,Y=_objectWithoutPropertiesLoose(k,_excluded2$2),ie=_extends({},Y,u,Se,{style:_extends({},Y.style,u.style,Se.style)}),se=V&&typeof V=="function",ct=se&&V(_extends({},ie,{"data-copied":R}),{value:r,keyName:e,keys:o,parentValue:n});return ct||(R?jsxRuntimeExports.jsx("svg",_extends({viewBox:"0 0 32 36"},ie,{children:jsxRuntimeExports.jsx("path",{d:"M27.5,33 L2.5,33 L2.5,12.5 L27.5,12.5 L27.5,15.2249049 C29.1403264,13.8627542 29.9736597,13.1778155 30,13.1700887 C30,11.9705278 30,10.0804982 30,7.5 C30,6.1 28.9,5 27.5,5 L20,5 C20,2.2 17.8,0 15,0 C12.2,0 10,2.2 10,5 L2.5,5 C1.1,5 0,6.1 0,7.5 L0,33 C0,34.4 1.1,36 2.5,36 L27.5,36 C28.9,36 30,34.4 30,33 L30,26.1114493 L27.5,28.4926435 L27.5,33 Z M7.5,7.5 L10,7.5 C10,7.5 12.5,6.4 12.5,5 C12.5,3.6 13.6,2.5 15,2.5 C16.4,2.5 17.5,3.6 17.5,5 C17.5,6.4 18.8,7.5 20,7.5 L22.5,7.5 C22.5,7.5 25,8.6 25,10 L5,10 C5,8.5 6.1,7.5 7.5,7.5 Z M5,27.5 L10,27.5 L10,25 L5,25 L5,27.5 Z M28.5589286,16 L32,19.6 L21.0160714,30.5382252 L13.5303571,24.2571429 L17.1303571,20.6571429 L21.0160714,24.5428571 L28.5589286,16 Z M17.5,15 L5,15 L5,17.5 L17.5,17.5 L17.5,15 Z M10,20 L5,20 L5,22.5 L10,22.5 L10,20 Z"})})):jsxRuntimeExports.jsx("svg",_extends({viewBox:"0 0 32 36"},ie,{children:jsxRuntimeExports.jsx("path",{d:"M27.5,33 L2.5,33 L2.5,12.5 L27.5,12.5 L27.5,20 L30,20 L30,7.5 C30,6.1 28.9,5 27.5,5 L20,5 C20,2.2 17.8,0 15,0 C12.2,0 10,2.2 10,5 L2.5,5 C1.1,5 0,6.1 0,7.5 L0,33 C0,34.4 1.1,36 2.5,36 L27.5,36 C28.9,36 30,34.4 30,33 L30,29 L27.5,29 L27.5,33 Z M7.5,7.5 L10,7.5 C10,7.5 12.5,6.4 12.5,5 C12.5,3.6 13.6,2.5 15,2.5 C16.4,2.5 17.5,3.6 17.5,5 C17.5,6.4 18.8,7.5 20,7.5 L22.5,7.5 C22.5,7.5 25,8.6 25,10 L5,10 C5,8.5 6.1,7.5 7.5,7.5 Z M5,27.5 L10,27.5 L10,25 L5,25 L5,27.5 Z M22.5,21.5 L22.5,16.5 L12.5,24 L22.5,31.5 L22.5,26.5 L32,26.5 L32,21.5 L22.5,21.5 Z M17.5,15 L5,15 L5,17.5 L17.5,17.5 L17.5,15 Z M10,20 L5,20 L5,22.5 L10,22.5 L10,20 Z"})})))};Copied$1.displayName="JVR.Copied";function useIdCompat(){var t=reactExports.useRef(null);return t.current===null&&(t.current="custom-id-"+Math.random().toString(36).substr(2,9)),t.current}var KeyValues=t=>{var e,{keyName:r,value:n,expandKey:a="",level:o,keys:l=[],parentValue:u}=t,c=useExpandsStore(),{objectSortKeys:h,indentWidth:v,collapsed:g,shouldExpandNodeInitially:T}=useStore(),R=typeof g=="boolean"?g:typeof g=="number"?o>g:!1,W=(e=c[a])!=null?e:T?!1:R,k=T&&T(!W,{value:n,keys:l,level:o,keyName:r,parentValue:u});if(c[a]===void 0&&!k||W)return null;var J=Array.isArray(n),q=J?Object.entries(n).map(V=>[Number(V[0]),V[1]]):Object.entries(n);h&&(q=h===!0?q.sort((V,Y)=>{var[ie]=V,[se]=Y;return typeof ie=="string"&&typeof se=="string"?ie.localeCompare(se):0}):q.sort((V,Y)=>{var[ie,se]=V,[ct,ae]=Y;return typeof ie=="string"&&typeof ct=="string"?h(ie,ct,se,ae):0}));var Se={borderLeft:"var(--w-rjv-border-left-width, 1px) var(--w-rjv-line-style, solid) var(--w-rjv-line-color, #ebebeb)",paddingLeft:v,marginLeft:6};return jsxRuntimeExports.jsx("div",{className:"w-rjv-wrap",style:Se,children:q.map((V,Y)=>{var[ie,se]=V;return jsxRuntimeExports.jsx(KeyValuesItem,{parentValue:n,keyName:ie,keys:[...l,ie],value:se,level:o},Y)})})};KeyValues.displayName="JVR.KeyValues";var KayName=t=>{var{keyName:e,parentValue:r,keys:n,value:a}=t,{highlightUpdates:o}=useStore(),l=typeof e=="number",u=reactExports.useRef(null);useHighlight({value:a,highlightUpdates:o,highlightContainer:u});var c={keyName:e,value:a,keys:n,parentValue:r};return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsxs("span",{ref:u,children:[jsxRuntimeExports.jsx(Quote$1,_extends({isNumber:l,"data-placement":"left"},c)),jsxRuntimeExports.jsx(KeyNameComp,_extends({},c,{children:e})),jsxRuntimeExports.jsx(Quote$1,_extends({isNumber:l,"data-placement":"right"},c))]}),jsxRuntimeExports.jsx(Colon$1,_extends({},c))]})};KayName.displayName="JVR.KayName";var KeyValuesItem=t=>{var{keyName:e,value:r,parentValue:n,level:a=0,keys:o=[]}=t,l=useShowToolsDispatch(),u=useIdCompat(),c=Array.isArray(r),h=r instanceof Set,v=r instanceof Map,g=r instanceof Date,T=r instanceof URL,R=r&&typeof r=="object"&&!c&&!h&&!v&&!g&&!T,W=R||c||h||v;if(W){var k=h?Array.from(r):v?Object.fromEntries(r):r;return jsxRuntimeExports.jsx(Container,{keyName:e,value:k,parentValue:n,initialValue:r,keys:o,level:a+1})}var J={onMouseEnter:()=>l({[u]:!0}),onMouseLeave:()=>l({[u]:!1})};return jsxRuntimeExports.jsxs(RowComp,_extends({className:"w-rjv-line",value:r,keyName:e,keys:o,parentValue:n},J,{children:[jsxRuntimeExports.jsx(KayName,{keyName:e,value:r,keys:o,parentValue:n}),jsxRuntimeExports.jsx(Value,{keyName:e,value:r,keys:o}),jsxRuntimeExports.jsx(Copied$1,{keyName:e,value:r,keys:o,parentValue:n,expandKey:u})]}))};KeyValuesItem.displayName="JVR.KeyValuesItem";var _excluded$4=["value","keyName"],_excluded2$1=["as","render"],CountInfoExtra=t=>{var{CountInfoExtra:e={}}=useSectionStore();return useSectionRender(e,t,"CountInfoExtra"),null};CountInfoExtra.displayName="JVR.CountInfoExtra";var CountInfoExtraComps=t=>{var{value:e={},keyName:r}=t,n=_objectWithoutPropertiesLoose(t,_excluded$4),{CountInfoExtra:a={}}=useSectionStore(),{as:o,render:l}=a,u=_objectWithoutPropertiesLoose(a,_excluded2$1);if(!l&&!u.children)return null;var c=o||"span",h=l&&typeof l=="function",v=_extends({},u,n),g=h&&l(v,{value:e,keyName:r});return g||jsxRuntimeExports.jsx(c,_extends({},v))};CountInfoExtraComps.displayName="JVR.CountInfoExtraComps";var _excluded$3=["value","keyName"],_excluded2=["as","render"],CountInfo=t=>{var{CountInfo:e={}}=useSectionStore();return useSectionRender(e,t,"CountInfo"),null};CountInfo.displayName="JVR.CountInfo";var CountInfoComp=t=>{var{value:e={},keyName:r}=t,n=_objectWithoutPropertiesLoose(t,_excluded$3),{displayObjectSize:a}=useStore(),{CountInfo:o={}}=useSectionStore();if(!a)return null;var{as:l,render:u}=o,c=_objectWithoutPropertiesLoose(o,_excluded2),h=l||"span";c.style=_extends({},c.style,t.style);var v=Object.keys(e).length;c.children||(c.children=v+" item"+(v===1?"":"s"));var g=_extends({},c,n),T=u&&typeof u=="function",R=T&&u(_extends({},g,{"data-length":v}),{value:e,keyName:r});return R||jsxRuntimeExports.jsx(h,_extends({},g))};CountInfoComp.displayName="JVR.CountInfoComp";var _excluded$2=["as","render"],Ellipsis=t=>{var{Ellipsis:e={}}=useSectionStore();return useSectionRender(e,t,"Ellipsis"),null};Ellipsis.displayName="JVR.Ellipsis";var EllipsisComp=t=>{var{isExpanded:e,value:r,keyName:n}=t,{Ellipsis:a={}}=useSectionStore(),{as:o,render:l}=a,u=_objectWithoutPropertiesLoose(a,_excluded$2),c=o||"span",h=l&&typeof l=="function"&&l(_extends({},u,{"data-expanded":e}),{value:r,keyName:n});return h||(!e||typeof r=="object"&&Object.keys(r).length==0?null:jsxRuntimeExports.jsx(c,_extends({},u)))};EllipsisComp.displayName="JVR.EllipsisComp";var NestedOpen=t=>{var e,{keyName:r,expandKey:n,keys:a=[],initialValue:o,value:l,parentValue:u,level:c}=t,h=useExpandsStore(),v=useExpandsDispatch(),{onExpand:g,collapsed:T,shouldExpandNodeInitially:R}=useStore(),W=typeof T=="boolean"?T:typeof T=="number"?c>T:!1,k=(e=h[n])!=null?e:R?!1:W,J=R&&R(!k,{value:l,keys:a,level:c,keyName:r,parentValue:u});h[n]===void 0&&R&&(k=!J);var q=()=>{var $t={expand:!k,value:l,keyid:n,keyName:r};g&&g($t),v({[n]:$t.expand})},Se={display:"inline-flex",alignItems:"center"},V={transform:"rotate("+(k?"-90":"0")+"deg)",transition:"all 0.3s"},Y=Object.keys(l).length,ie=typeof l=="object",se=Array.isArray(l),ct=l instanceof Set,ae=Y!==0&&(se||ct||ie),st={style:Se};ae&&(st.onClick=q);var Ct={keyName:r,value:l,keys:a,parentValue:u};return jsxRuntimeExports.jsxs("span",_extends({},st,{children:[ae&&jsxRuntimeExports.jsx(Arrow$1,_extends({style:V,expandKey:n},Ct)),(r||typeof r=="number")&&jsxRuntimeExports.jsx(KayName,_extends({},Ct)),jsxRuntimeExports.jsx(SetComp,{value:o,keyName:r}),jsxRuntimeExports.jsx(MapComp,{value:o,keyName:r}),jsxRuntimeExports.jsx(BracketsOpen,_extends({isBrackets:se||ct},Ct)),jsxRuntimeExports.jsx(EllipsisComp,{keyName:r,value:l,isExpanded:k}),jsxRuntimeExports.jsx(BracketsClose,_extends({isVisiable:k||!ae,isBrackets:se||ct},Ct)),jsxRuntimeExports.jsx(CountInfoComp,{value:l,keyName:r}),jsxRuntimeExports.jsx(CountInfoExtraComps,{value:l,keyName:r}),jsxRuntimeExports.jsx(Copied$1,{keyName:r,value:l,expandKey:n,parentValue:u,keys:a})]}))};NestedOpen.displayName="JVR.NestedOpen";var _excluded$1=["className","children","parentValue","keyid","level","value","initialValue","keys","keyName"],Container=reactExports.forwardRef((t,e)=>{var{className:r="",parentValue:n,level:a=1,value:o,initialValue:l,keys:u,keyName:c}=t,h=_objectWithoutPropertiesLoose(t,_excluded$1),v=useShowToolsDispatch(),g=useIdCompat(),T=[r,"w-rjv-inner"].filter(Boolean).join(" "),R={onMouseEnter:()=>v({[g]:!0}),onMouseLeave:()=>v({[g]:!1})};return jsxRuntimeExports.jsxs("div",_extends({className:T,ref:e},h,R,{children:[jsxRuntimeExports.jsx(NestedOpen,{expandKey:g,value:o,level:a,keys:u,parentValue:n,keyName:c,initialValue:l}),jsxRuntimeExports.jsx(KeyValues,{expandKey:g,value:o,level:a,keys:u,parentValue:n,keyName:c}),jsxRuntimeExports.jsx(NestedClose,{expandKey:g,value:o,level:a,keys:u,parentValue:n,keyName:c})]}))});Container.displayName="JVR.Container";var BraceLeft=t=>{var{BraceLeft:e={}}=useSymbolsStore();return useSymbolsRender(e,t,"BraceLeft"),null};BraceLeft.displayName="JVR.BraceLeft";var BraceRight=t=>{var{BraceRight:e={}}=useSymbolsStore();return useSymbolsRender(e,t,"BraceRight"),null};BraceRight.displayName="JVR.BraceRight";var BracketsLeft=t=>{var{BracketsLeft:e={}}=useSymbolsStore();return useSymbolsRender(e,t,"BracketsLeft"),null};BracketsLeft.displayName="JVR.BracketsLeft";var BracketsRight=t=>{var{BracketsRight:e={}}=useSymbolsStore();return useSymbolsRender(e,t,"BracketsRight"),null};BracketsRight.displayName="JVR.BracketsRight";var Arrow=t=>{var{Arrow:e={}}=useSymbolsStore();return useSymbolsRender(e,t,"Arrow"),null};Arrow.displayName="JVR.Arrow";var Colon=t=>{var{Colon:e={}}=useSymbolsStore();return useSymbolsRender(e,t,"Colon"),null};Colon.displayName="JVR.Colon";var Quote=t=>{var{Quote:e={}}=useSymbolsStore();return useSymbolsRender(e,t,"Quote"),null};Quote.displayName="JVR.Quote";var ValueQuote=t=>{var{ValueQuote:e={}}=useSymbolsStore();return useSymbolsRender(e,t,"ValueQuote"),null};ValueQuote.displayName="JVR.ValueQuote";var Bigint=t=>{var{Bigint:e={}}=useTypesStore();return useTypesRender(e,t,"Bigint"),null};Bigint.displayName="JVR.Bigint";var Date$1=t=>{var{Date:e={}}=useTypesStore();return useTypesRender(e,t,"Date"),null};Date$1.displayName="JVR.Date";var False=t=>{var{False:e={}}=useTypesStore();return useTypesRender(e,t,"False"),null};False.displayName="JVR.False";var Float=t=>{var{Float:e={}}=useTypesStore();return useTypesRender(e,t,"Float"),null};Float.displayName="JVR.Float";var Int=t=>{var{Int:e={}}=useTypesStore();return useTypesRender(e,t,"Int"),null};Int.displayName="JVR.Int";var Map$1=t=>{var{Map:e={}}=useTypesStore();return useTypesRender(e,t,"Map"),null};Map$1.displayName="JVR.Map";var Nan=t=>{var{Nan:e={}}=useTypesStore();return useTypesRender(e,t,"Nan"),null};Nan.displayName="JVR.Nan";var Null=t=>{var{Null:e={}}=useTypesStore();return useTypesRender(e,t,"Null"),null};Null.displayName="JVR.Null";var Set$1=t=>{var{Set:e={}}=useTypesStore();return useTypesRender(e,t,"Set"),null};Set$1.displayName="JVR.Set";var StringText=t=>{var{Str:e={}}=useTypesStore();return useTypesRender(e,t,"Str"),null};StringText.displayName="JVR.StringText";var True=t=>{var{True:e={}}=useTypesStore();return useTypesRender(e,t,"True"),null};True.displayName="JVR.True";var Undefined=t=>{var{Undefined:e={}}=useTypesStore();return useTypesRender(e,t,"Undefined"),null};Undefined.displayName="JVR.Undefined";var Url=t=>{var{Url:e={}}=useTypesStore();return useTypesRender(e,t,"Url"),null};Url.displayName="JVR.Url";var Copied=t=>{var{Copied:e={}}=useSectionStore();return useSectionRender(e,t,"Copied"),null};Copied.displayName="JVR.Copied";var _excluded=["className","style","value","children","collapsed","shouldExpandNodeInitially","indentWidth","displayObjectSize","shortenTextAfterLength","stringEllipsis","highlightUpdates","enableClipboard","displayDataTypes","objectSortKeys","onExpand","onCopied","beforeCopy"],JsonView=reactExports.forwardRef((t,e)=>{var{className:r="",style:n,value:a,children:o,collapsed:l=!1,shouldExpandNodeInitially:u=()=>!0,indentWidth:c=15,displayObjectSize:h=!0,shortenTextAfterLength:v=30,stringEllipsis:g,highlightUpdates:T=!0,enableClipboard:R=!0,displayDataTypes:W=!0,objectSortKeys:k=!1,onExpand:J,onCopied:q,beforeCopy:Se}=t,V=_objectWithoutPropertiesLoose(t,_excluded),Y=_extends({lineHeight:1.4,fontFamily:"var(--w-rjv-font-family, Menlo, monospace)",color:"var(--w-rjv-color, #002b36)",backgroundColor:"var(--w-rjv-background-color, #00000000)",fontSize:13},n),ie=["w-json-view-container","w-rjv",r].filter(Boolean).join(" ");return jsxRuntimeExports.jsxs(Provider,{initialState:{value:a,objectSortKeys:k,indentWidth:c,shouldExpandNodeInitially:l===!1?u:()=>!1,displayObjectSize:h,collapsed:l,enableClipboard:R,shortenTextAfterLength:v,stringEllipsis:g,highlightUpdates:T,onCopied:q,onExpand:J,beforeCopy:Se},initialTypes:{displayDataTypes:W},children:[jsxRuntimeExports.jsx(Container,_extends({value:a},V,{ref:e,className:ie,style:Y})),o]})});JsonView.Bigint=Bigint;JsonView.Date=Date$1;JsonView.False=False;JsonView.Float=Float;JsonView.Int=Int;JsonView.Map=Map$1;JsonView.Nan=Nan;JsonView.Null=Null;JsonView.Set=Set$1;JsonView.String=StringText;JsonView.True=True;JsonView.Undefined=Undefined;JsonView.Url=Url;JsonView.ValueQuote=ValueQuote;JsonView.Arrow=Arrow;JsonView.Colon=Colon;JsonView.Quote=Quote;JsonView.Ellipsis=Ellipsis;JsonView.BraceLeft=BraceLeft;JsonView.BraceRight=BraceRight;JsonView.BracketsLeft=BracketsLeft;JsonView.BracketsRight=BracketsRight;JsonView.Copied=Copied;JsonView.CountInfo=CountInfo;JsonView.CountInfoExtra=CountInfoExtra;JsonView.KeyName=KeyName;JsonView.Row=Row;JsonView.displayName="JVR.JsonView";function DebugViewer({debugInfo:t}){return jsxRuntimeExports.jsxs("div",{className:"ae:p-2 ae:w-full ae:h-full ae:overflow-y-auto ae:bg-white",children:[jsxRuntimeExports.jsxs("section",{className:"ae:mb-4",children:[jsxRuntimeExports.jsx("div",{className:"ae:text-lg ae:mb-3 ae:flex ae:items-center ae:gap-2",children:"Debug Overview"}),jsxRuntimeExports.jsx("p",{className:"ae:text-gray-700 ae:leading-relaxed",children:"This panel displays current debug and performance information for the Aiida Explorer. You can inspect cache statistics, node fetch timings, breadcrumb counts, and other runtime metrics in real time."})]}),jsxRuntimeExports.jsxs("section",{children:[jsxRuntimeExports.jsx("div",{className:"ae:text-md ae-font-semibold ae:mb-2",children:"Debug Info JSON"}),jsxRuntimeExports.jsx("div",{className:"ae:max-h-[60vh] ae:overflow-auto ae:border ae:border-gray-200 ae:rounded ae:p-2 ae:bg-gray-50",children:jsxRuntimeExports.jsx(JsonView,{value:t,collapsed:!1,displayDataTypes:!1,enableClipboard:!0,highlightUpdates:!1})})]})]})}function CustomEdge({id:t,sourceX:e,sourceY:r,targetX:n,targetY:a,sourcePosition:o,targetPosition:l,data:u={},style:c={}}){const[h]=getSmoothStepPath({sourceX:e,sourceY:r,sourcePosition:o,targetX:n,targetY:a,targetPosition:l}),{zoom:v}=useViewport(),T={...{stroke:"grey",strokeWidth:1},...c||{}};if(!u.label)return jsxRuntimeExports.jsx(BaseEdge,{id:t,path:h});let R=.5,W="translate(-50%, -50%)";u.labelPosition==="start"?(R=.02,W="translate(0%, -50%)"):u.labelPosition==="end"&&(R=.98,W="translate(-100%, -50%)");const k=e+(n-e)*R,J=r+(a-r)*R,q=v>1.1?"ae:text-xs":"ae:text-sm";return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(BaseEdge,{id:t,path:h,interactionWidth:0,style:T}),jsxRuntimeExports.jsx(EdgeLabelRenderer,{children:jsxRuntimeExports.jsx("div",{className:`ae:absolute ae:bg-slate-200  
          ae:rounded-sm ae:px-1 ae:py-0.5 
          ${q} ae:pointer-events-drag ae:z-50
            ${u.labelOverride?"ae:border-blue-700 ae:font-medium ae:text-blue-700 ae:border-2":"ae:border-slate-300 ae:font-light ae:text-slate-700 ae:border"}`,style:{left:`${k}px`,top:`${J}px`,transform:W},children:u.label.length>21?`${u.label.slice(0,18)}...`:u.label})})]})}function getNodeDisplay(t){switch(t.label){case"AbstractCode":return"";case"ArrayData":return"";case"BandsData":{const r=t.attributes?.["array|bands"];return r?.[1]!==void 0?`Num. bands: ${r[1]}`:""}case"Bool":return t.attributes?.value!==void 0?`Value: ${t.attributes.value}`:"";case"CalcFunctionNode":{const r=t?.aiida?.process_type?.split(".").at(-1);return r||""}case"CalcJobNode":{const r=t?.aiida?.process_type?.split(":")[1];return r||""}case"Code":{const r=t?.attributes?.input_plugin;return r||""}case"Dict":return t?.attributes?`Num. keys: ${Object.keys(t.attributes).length}`:"";case"EnumData":return"";case"Float":case"Int":return t.attributes?.value!==void 0?`Value: ${t.attributes.value}`:"";case"JsonableData":return"";case"List":return t.attributes?.value!==void 0?`Length: ${t.attributes.list.length}`:"";case"Str":return"";case"KpointsData":if(t.attributes?.mesh){const[r,n,a]=t.attributes.mesh;return`Grid: ${r}  ${n}  ${a}`}if(t.attributes?.labels&&t.attributes?.label_numbers){let r=t.attributes.labels.join("  ");return r.length>20&&(r=r.slice(0,17)+"..."),`Path: ${r}`}return"";case"StructureData":{let r=function(n,a=22){const o={0:"",1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:""},l=n.replace(/\d/g,u=>o[u]||u);return l.length>a?l.slice(0,a-3)+"...":l};return t.extras?.formula_hill?`${r(t.extras.formula_hill)}`:t.derived_properties?.formula?`${r(t.derived_properties?.formula)}`:""}case"UpfData":{const r=t.attributes?.filename;return r?`${r}`:""}case"XyData":return"";case"SinglefileData":return"";case"FolderData":{const r=t?.repo_list?.length||0;return r?`Num. Files: ${r}`:""}case"RemoteData":return"";case"InstalledCode":return"";case"PortableCode":return"";case"ContainerizedCode":return"";case"WorkChainNode":{const r=t?.aiida?.process_type?.split(":")[1];return r||""}default:return""}}function getNodeColorClasses(t,e=!1){let r="ae:bg-gray-200",n="ae:text-black",a="ae:transition-all";return t?.startsWith("process.workflow")?(r="ae:bg-orange-300",a="ae:border-orange-400 ae:shadow-md"):t?.startsWith("process")?(r="ae:bg-red-300",a="ae:border-red-400 ae:shadow-md"):t?.startsWith("data")&&(r="ae:bg-green-300",a="ae:border-green-400 ae:shadow-md"),e&&(a="ae:border-blue-600 ae:shadow-md ae:rounded ae:transition ae:duration-700",r="ae:bg-blue-100 ae:glow-4",n="ae:text-black ae:font-medium"),{bgClass:r,textClass:n,borderStyle:a}}function HorizontalNode({data:t,selected:e}){const{zoom:r}=useViewport(),n="ae:min-w-[150px] ae:text-center ae:py-1.5 ae:rounded ae:border-3",a=r>1.2,l=`
  ae:absolute
  ae:top-1/3
  ae:bottom-1/3
  ae:flex
  ae:items-center
  ${a?"ae:text-[8px]":"ae:text-[10px]"}
  ae:text-slate-600
  ae:font-light
  ${a?"":"ae:hidden"}
`,u=`${l} ae:left-0 ae:ml-0.5 ae:pr-1 ae:pl-0.5 ae:bg-gray-400/50 ae:rounded-r-sm`,c=`${l} ae:right-0 ae:mr-0.5 ae:pl-1 ae:pr-0.5 ae:bg-gray-400/50 ae:rounded-l-sm`,{bgClass:h,textClass:v,borderStyle:g}=getNodeColorClasses(t.node_type,e,t.pos),T=t.aiida.uuid.split("-")[0],R=getNodeDisplay(t),W=r>1.2?"ae:text-[12px]":"ae:text-[14px]",k=jsxRuntimeExports.jsxs("div",{className:`${W}`,children:[t.label,r>1.2&&jsxRuntimeExports.jsx("br",{}),r>1.2&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"ae:text-[8px] ae:opacity-80",children:`uuid: ${T}`}),jsxRuntimeExports.jsx("div",{className:"ae:text-[8px] ae:opacity-80 ",children:`${R}`})]})]});return jsxRuntimeExports.jsxs("div",{className:`${n} ${h} ${v} ${g}`,children:[jsxRuntimeExports.jsx("div",{className:u,children:t.parentCount>99?"99+":t.parentCount??""}),jsxRuntimeExports.jsx("div",{className:c,children:t.childCount>99?"99+":t.childCount??""}),k,jsxRuntimeExports.jsx(Handle$1,{type:"target",position:Position.Left,style:{pointerEvents:"none",opacity:0,marginLeft:"4px"}}),jsxRuntimeExports.jsx(Handle$1,{type:"source",position:Position.Right,style:{pointerEvents:"none",opacity:0,marginRight:"4px"}})]})}const HorizontalNode$1=reactExports.memo(HorizontalNode),nodeTypes={custom:HorizontalNode$1},edgeTypes={custom:CustomEdge};function FlowChart({nodes:t,edges:e,setNodes:r,setEdges:n,selectedNode:a,onNodeSelect:o,onNodeDoubleSelect:l,onInit:u}){const c=reactExports.useCallback((g,T)=>{o&&o(T)},[o]),h=reactExports.useCallback((g,T)=>{l&&l(T)},[l]),v=t.map(g=>({...g,type:"custom",selected:a?.id===g.id}));return jsxRuntimeExports.jsx("div",{className:"ae:w-full ae:h-full",children:jsxRuntimeExports.jsxs(ReactFlow,{className:"ae:bg-slate-50",nodes:v,edges:e,nodeTypes,onNodesChange:g=>r(T=>applyNodeChanges(g,T)),onEdgesChange:g=>n(T=>applyEdgeChanges(g,T)),edgeTypes,edgesFocusable:!1,onNodeClick:c,onNodeDoubleClick:h,fitView:!0,nodesDraggable:!0,nodesConnectable:!1,onInit:u,children:[jsxRuntimeExports.jsx(Controls$1,{}),jsxRuntimeExports.jsx(Background$1,{variant:"dots",gap:12,size:1})]})})}function GroupIcon({size:t=14,className:e=""}){return jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[jsxRuntimeExports.jsx("path",{d:"M15.536 11.293a1 1 0 0 0 0 1.414l2.376 2.377a1 1 0 0 0 1.414 0l2.377-2.377a1 1 0 0 0 0-1.414l-2.377-2.377a1 1 0 0 0-1.414 0z"}),jsxRuntimeExports.jsx("path",{d:"M2.297 11.293a1 1 0 0 0 0 1.414l2.377 2.377a1 1 0 0 0 1.414 0l2.377-2.377a1 1 0 0 0 0-1.414L6.088 8.916a1 1 0 0 0-1.414 0z"}),jsxRuntimeExports.jsx("path",{d:"M8.916 17.912a1 1 0 0 0 0 1.415l2.377 2.376a1 1 0 0 0 1.414 0l2.377-2.376a1 1 0 0 0 0-1.415l-2.377-2.376a1 1 0 0 0-1.414 0z"}),jsxRuntimeExports.jsx("path",{d:"M8.916 4.674a1 1 0 0 0 0 1.414l2.377 2.376a1 1 0 0 0 1.414 0l2.377-2.376a1 1 0 0 0 0-1.414l-2.377-2.377a1 1 0 0 0-1.414 0z"})]})}function DownloadIcon({data:t=null,downloadUrl:e=null,filename:r="data.json",size:n=14,className:a=""}){const o=()=>{if(e){const l=document.createElement("a");l.href=e,l.download=r,l.target="_blank",l.rel="noopener noreferrer",l.click();return}if(t){const l=JSON.stringify(t,null,2),u=new Blob([l],{type:"application/json"}),c=URL.createObjectURL(u),h=document.createElement("a");h.href=c,h.download=r,h.click(),URL.revokeObjectURL(c)}};return jsxRuntimeExports.jsx("button",{type:"button",onClick:o,title:"Download",className:"ae:p-1",children:jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:a,children:[jsxRuntimeExports.jsx("path",{d:"M12 15V3"}),jsxRuntimeExports.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),jsxRuntimeExports.jsx("path",{d:"m7 10 5 5 5-5"})]})})}function ClipBoardIcon({size:t=14,className:e=""}){return jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[jsxRuntimeExports.jsx("rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2"}),jsxRuntimeExports.jsx("path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"})]})}function ClipboardCopyIcon({size:t=18,className:e=""}){return jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[jsxRuntimeExports.jsx("path",{d:"m12 15 2 2 4-4"}),jsxRuntimeExports.jsx("rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2"}),jsxRuntimeExports.jsx("path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"})]})}function RightDropDownIcon({size:t=14,className:e=""}){return jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:jsxRuntimeExports.jsx("path",{d:"m9 18 6-6-6-6"})})}function DownDropDownIcon({size:t=14,className:e=""}){return jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:jsxRuntimeExports.jsx("path",{d:"m6 9 6 6 6-6"})})}function ViewIcon({size:t=14,className:e=""}){return jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[jsxRuntimeExports.jsx("path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0"}),jsxRuntimeExports.jsx("circle",{cx:"12",cy:"12",r:"3"})]})}function LinksIcon({size:t=14,className:e=""}){return jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[jsxRuntimeExports.jsx("path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"}),jsxRuntimeExports.jsx("path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"})]})}function QuestionIcon({size:t=14,className:e=""}){return jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[jsxRuntimeExports.jsx("circle",{cx:"12",cy:"12",r:"10"}),jsxRuntimeExports.jsx("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),jsxRuntimeExports.jsx("path",{d:"M12 17h.01"})]})}function ClickIcon({size:t=14,className:e=""}){return jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[jsxRuntimeExports.jsx("path",{d:"M12.034 12.681a.498.498 0 0 1 .647-.647l9 3.5a.5.5 0 0 1-.033.943l-3.444 1.068a1 1 0 0 0-.66.66l-1.067 3.443a.5.5 0 0 1-.943.033z"}),jsxRuntimeExports.jsx("path",{d:"M5 3a2 2 0 0 0-2 2"}),jsxRuntimeExports.jsx("path",{d:"M19 3a2 2 0 0 1 2 2"}),jsxRuntimeExports.jsx("path",{d:"M5 21a2 2 0 0 1-2-2"}),jsxRuntimeExports.jsx("path",{d:"M9 3h1"}),jsxRuntimeExports.jsx("path",{d:"M9 21h2"}),jsxRuntimeExports.jsx("path",{d:"M14 3h1"}),jsxRuntimeExports.jsx("path",{d:"M3 9v1"}),jsxRuntimeExports.jsx("path",{d:"M21 9v2"}),jsxRuntimeExports.jsx("path",{d:"M3 14v1"})]})}function ClickIcon2({size:t=14,className:e=""}){return jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:jsxRuntimeExports.jsx("path",{d:"M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z"})})}function DoubleClickIcon({size:t=24,className:e}){return jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[jsxRuntimeExports.jsx("path",{d:"M14 4.1 12 6"}),jsxRuntimeExports.jsx("path",{d:"m5.1 8-2.9-.8"}),jsxRuntimeExports.jsx("path",{d:"m6 12-1.9 2"}),jsxRuntimeExports.jsx("path",{d:"M7.2 2.2 8 5.1"}),jsxRuntimeExports.jsx("path",{d:"M9.037 9.69a.498.498 0 0 1 .653-.653l11 4.5a.5.5 0 0 1-.074.949l-4.349 1.041a1 1 0 0 0-.74.739l-1.04 4.35a.5.5 0 0 1-.95.074z"})]})}function BreadcrumbsIcon({size:t=14,className:e=""}){return jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[jsxRuntimeExports.jsx("path",{d:"M16 14v2.2l1.6 1"}),jsxRuntimeExports.jsx("path",{d:"M7 20H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H20a2 2 0 0 1 2 2"}),jsxRuntimeExports.jsx("circle",{cx:"16",cy:"16",r:"6"})]})}function GraphIcon({size:t=14,className:e=""}){return jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[jsxRuntimeExports.jsx("rect",{x:"16",y:"16",width:"6",height:"6",rx:"1"}),jsxRuntimeExports.jsx("rect",{x:"2",y:"16",width:"6",height:"6",rx:"1"}),jsxRuntimeExports.jsx("rect",{x:"9",y:"2",width:"6",height:"6",rx:"1"}),jsxRuntimeExports.jsx("path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3"}),jsxRuntimeExports.jsx("path",{d:"M12 12V8"})]})}function GithubIcon({size:t=14,className:e=""}){return jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[jsxRuntimeExports.jsx("path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"}),jsxRuntimeExports.jsx("path",{d:"M9 18c-4.51 2-5-2-7-2"})]})}function BugIcon({size:t=14,className:e=""}){return jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[jsxRuntimeExports.jsx("path",{d:"M12 20v-9"}),jsxRuntimeExports.jsx("path",{d:"M14 7a4 4 0 0 1 4 4v3a6 6 0 0 1-12 0v-3a4 4 0 0 1 4-4z"}),jsxRuntimeExports.jsx("path",{d:"M14.12 3.88 16 2"}),jsxRuntimeExports.jsx("path",{d:"M21 21a4 4 0 0 0-3.81-4"}),jsxRuntimeExports.jsx("path",{d:"M21 5a4 4 0 0 1-3.55 3.97"}),jsxRuntimeExports.jsx("path",{d:"M22 13h-4"}),jsxRuntimeExports.jsx("path",{d:"M3 21a4 4 0 0 1 3.81-4"}),jsxRuntimeExports.jsx("path",{d:"M3 5a4 4 0 0 0 3.55 3.97"}),jsxRuntimeExports.jsx("path",{d:"M6 13H2"}),jsxRuntimeExports.jsx("path",{d:"m8 2 1.88 1.88"}),jsxRuntimeExports.jsx("path",{d:"M9 7.13V6a3 3 0 1 1 6 0v1.13"})]})}function SettingsIcon({size:t=14,className:e=""}){return jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[jsxRuntimeExports.jsx("path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"}),jsxRuntimeExports.jsx("circle",{cx:"12",cy:"12",r:"3"})]})}function FullscreenIcon({size:t=14,className:e=""}){return jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[jsxRuntimeExports.jsx("path",{d:"M3 7V5a2 2 0 0 1 2-2h2"}),jsxRuntimeExports.jsx("path",{d:"M17 3h2a2 2 0 0 1 2 2v2"}),jsxRuntimeExports.jsx("path",{d:"M21 17v2a2 2 0 0 1-2 2h-2"}),jsxRuntimeExports.jsx("path",{d:"M7 21H5a2 2 0 0 1-2-2v-2"}),jsxRuntimeExports.jsx("rect",{width:"10",height:"8",x:"7",y:"8",rx:"1"})]})}function TypeCheckboxTree({types:t,selectedTypes:e,setSelectedTypes:r,level:n=0}){const[a,o]=reactExports.useState({}),l=h=>h.every(v=>e.includes(v.label)),u=h=>h.some(v=>e.includes(v.label))&&!l(h),c=(h,v)=>{if(!v||v.length===0){r(T=>T.includes(h)?T.filter(R=>R!==h):[...T,h]);return}r(T=>{const R=new Set(T),W=(J,q)=>{J.forEach(Se=>{q?R.add(Se.label):R.delete(Se.label),Se.children&&W(Se.children,q)})};return R.has(h)&&l(v)?(R.delete(h),W(v,!1)):(R.add(h),W(v,!0)),[...R]});const g=T=>{const R={};return T.forEach(W=>{W.children&&(R[W.label]=!0,Object.assign(R,g(W.children)))}),R};o(T=>({...T,[h]:!0,...g(v)}))};return jsxRuntimeExports.jsx("div",{className:"ae:flex ae:flex-col",children:t.map(({label:h,children:v})=>{const g=e.includes(h),T=v&&u(v);return jsxRuntimeExports.jsxs("div",{style:{marginLeft:`${n*8}px`},children:[jsxRuntimeExports.jsxs("div",{className:"ae:flex ae:items-center ae:gap-1 ae:cursor-pointer",onClick:()=>c(h,v),children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:g,ref:R=>{R&&(R.indeterminate=T)},onChange:R=>R.stopPropagation(),className:"ae:cursor-pointer"}),v&&v.length>0&&jsxRuntimeExports.jsx("button",{type:"button",onClick:R=>{R.stopPropagation(),o(W=>({...W,[h]:!W[h]}))},className:"ae:p-0.5 ae:focus:outline-none",children:a[h]?jsxRuntimeExports.jsx(DownDropDownIcon,{size:14}):jsxRuntimeExports.jsx(RightDropDownIcon,{size:14})}),jsxRuntimeExports.jsx("span",{children:h})]}),v&&v.length>0&&a[h]&&jsxRuntimeExports.jsx(TypeCheckboxTree,{types:v,selectedTypes:e,setSelectedTypes:r,level:n+1})]},h)})})}const aiidaTypes=[{label:"Data",type:"data",children:[{label:"Int",type:"data.core.int.%"},{label:"Float",type:"data.core.float.%"},{label:"ArrayData",type:"data.core.array.%",children:[{label:"BandsData",type:"data.core.array.bands.%"},{label:"XyData",type:"data.core.array.xy.%"},{label:"TrajectoryData",type:"data.core.array.trajectory.%"},{label:"KpointsData",type:"data.core.array.kpoints.%"}]},{label:"Str",type:"data.core.str.%"},{label:"Bool",type:"data.core.bool.%"},{label:"List",type:"data.core.list.%"},{label:"Dict",type:"data.core.dict.%"},{label:"StructureData",type:"data.core.structure.%"},{label:"RemoteData",type:"data.core.remote.%"},{label:"FolderData",type:"data.core.folder.%"},{label:"SinglefileData",type:"data.core.singlefile.%"},{label:"UpfData",type:"data.core.upf.%"},{label:"Code",type:"data.core.code.%"}]},{label:"Process",type:"process.%",children:[{label:"CalcJob",type:"process.calculation.calcjob.%"},{label:"CalcFunction",type:"process.calculation.calcfunction.%"},{label:"WorkFunction",type:"process.workflow.workfunction.%"},{label:"Workgraph",type:"process.workflow.workgraph.%"},{label:"Workchain",type:"process.workflow.workchain.%"}]}];function getFlattenedNodeTypes(t,e){const r=[],n=a=>{a.forEach(o=>{t.includes(o.label)&&r.push(o.type),o.children&&n(o.children)})};return n(e),r}function buildQuery({groups:t=[],nodeTypes:e=[],limit:r=50,offset:n=0}={}){const a=[{entity_type:"",orm_base:"node",tag:"node",joining_keyword:null,joining_value:null,edge_tag:null,outerjoin:!1}],o={node:{}},l={node:["id","uuid","node_type","label","ctime","mtime"]};if(e.length===1?o.node.node_type={like:e[0]}:e.length>1&&(o.node={or:e.map(u=>({node_type:{like:u}}))}),t.length>0){const u="core_1",c="node--core_1";a.push({entity_type:"group.core",orm_base:"group",tag:u,joining_keyword:"with_node",joining_value:"node",edge_tag:c,outerjoin:!1}),o[u]={type_string:{like:"%"},or:t.map(h=>({label:h}))},o[c]={},l[u]=[],l[c]=[]}return{path:a,filters:o,project:l,project_map:{},order_by:[],limit:r,offset:n,distinct:!0}}function SortIcon({direction:t="asc",size:e=14,className:r=""}){return jsxRuntimeExports.jsx("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",className:`${r} ae:transform ${t==="asc"?"rotate-180":""}`,children:jsxRuntimeExports.jsx("path",{d:"M6 9l6 6 6-6",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"})})}function DataTable({title:t,columns:e,data:r=[],maxWidth:n="2000px",maxHeight:a=null,sortableCols:o=!0,breakableCols:l=!1,renderIfMissing:u=!1}){const[c,h]=reactExports.useState({key:null,direction:"asc"}),v=reactExports.useMemo(()=>{if(!r)return[];if(!c.key)return r;const g=[...r].sort((T,R)=>{const W=T[c.key],k=R[c.key];return!isNaN(W)&&!isNaN(k)?W-k:String(W).localeCompare(String(k))});return c.direction==="asc"?g:g.reverse()},[r,c]);return!u&&(!r||r.length===0)?null:jsxRuntimeExports.jsxs("div",{className:"ae:p-2",style:{maxWidth:n},children:[jsxRuntimeExports.jsx("div",{className:"explorerHeading ae:pb-2",children:t}),jsxRuntimeExports.jsx("div",{className:"ae:overflow-x-auto ae:shadow-md ae:md:shadow ae:bg-white",style:a?{maxHeight:a,overflowY:"auto"}:{},children:jsxRuntimeExports.jsxs("table",{className:"ae:min-w-full ae:text-xs ae:md:text-sm ae:text-left",children:[jsxRuntimeExports.jsx("thead",{className:"ae:bg-slate-100 ae:text-slate-700",children:jsxRuntimeExports.jsx("tr",{children:e.map(g=>{const T=Array.isArray(o)?o.includes(g):o;return jsxRuntimeExports.jsx("th",{className:`ae:px-3 ae:md:px-4 ae:py-0.5 ae:md:py-1 ae:font-medium ${T?"ae:cursor-pointer ae:select-none":""}`,onClick:()=>T&&h(R=>({key:g,direction:R.key===g&&R.direction==="asc"?"desc":"asc"})),children:jsxRuntimeExports.jsxs("div",{className:"ae:flex ae:items-center ae:gap-1",children:[g,T&&c.key===g&&jsxRuntimeExports.jsx(SortIcon,{direction:c.direction,size:14,className:"ae:ml-1 ae:text-slate-500"})]})},g)})})}),jsxRuntimeExports.jsx("tbody",{children:v.map((g,T)=>jsxRuntimeExports.jsx("tr",{className:T%2===0?"ae:bg-slate-50":"ae:bg-slate-100",children:e.map(R=>{const k=["ae:px-3 ae:md:px-4 ae:py-0.5 ae:md:py-2 ae:text-slate-900",(Array.isArray(l)?l.includes(R):l)?"ae:whitespace-normal ae:break-all":"ae:whitespace-nowrap"].join(" ");return jsxRuntimeExports.jsx("td",{className:k,children:g[R]},R)})},g.id||T))})]})})]})}function useMediaQuery(t){const[e,r]=reactExports.useState(()=>typeof window<"u"?window.matchMedia(t).matches:!1);return reactExports.useEffect(()=>{if(typeof window>"u")return;const n=window.matchMedia(t),a=o=>{r(o.matches),console.log("media query fired")};return n.addEventListener("change",a),r(n.matches),()=>n.removeEventListener("change",a)},[t]),e}const columnLabels={uuid:"Unique ID",label:"Label",full_type:"Type",ctime:"Created",mtime:"Modified",id:"ID"},columnOrder=["Unique ID","Label","Type","Created","Modified",""];function formatValue(t,e,r=!1){if(e==null)return"";switch(t){case"Type":return typeof e!="string"?e:r&&e.replace(/\|$/,"").split(".").at(-2)||e;case"Created":case"Modified":{const n=new Date(e);return r?n.toISOString().split("T")[0]:n.toLocaleString()}case"Unique ID":return r&&typeof e=="string"?e.split("-")[0]:e;default:return e}}function formatTableData(t,e,r=!1){return t.map(n=>{const a={};return columnOrder.forEach(o=>{const l=Object.keys(columnLabels).find(u=>columnLabels[u]===o);l&&n[l]!==void 0&&(a[o]=formatValue(o,n[l],r))}),a[""]=jsxRuntimeExports.jsx("button",{onClick:()=>e(n.uuid),className:"explorerButton ae:bg-slate-500 ae:hover:bg-slate-700 ae:text-white",children:"View"}),a})}function sortGroups(t){return[...t].sort((e,r)=>{const n=/^\d/.test(e.label),a=/^\d/.test(r.label);return n&&!a?1:!n&&a?-1:e.label.localeCompare(r.label,void 0,{numeric:!0})})}function GroupsViewer({restApiUrl:t,setRootNodeId:e}){const[r,n]=reactExports.useState([]),[a,o]=reactExports.useState([]),[l,u]=reactExports.useState([]),[c,h]=reactExports.useState([]),[v,g]=reactExports.useState(0),[T,R]=reactExports.useState(!1),[W,k]=reactExports.useState(null),[J,q]=reactExports.useState(""),Se=200,V=useMediaQuery("(max-width: 790px)"),Y=V?columnOrder.filter(ae=>ae!=="Created"):columnOrder;reactExports.useEffect(()=>{fetchGroups(t).then(n).catch(console.error)},[t]);const ie=reactExports.useCallback(async(ae=0,st=Se)=>{R(!0),k(null);try{const Ct=getFlattenedNodeTypes(l,aiidaTypes),$t=buildQuery({groups:a,nodeTypes:Ct,limit:st,offset:ae}),Lp=(await fetchFromQueryBuilder(t,$t)).node||[];h(Mn=>ae===0?Lp:[...Mn,...Lp]),g(ae+Lp.length)}catch(Ct){console.error(Ct),k(Ct.message||"Failed to fetch nodes")}finally{R(!1)}},[t,a,l]);reactExports.useEffect(()=>{c.length===0&&ie(0,1e3)},[r,c.length,ie]);const se=reactExports.useMemo(()=>formatTableData(c,e,V),[c,V,e]),ct=()=>{J.trim()!==""&&(e(J.trim()),q(""))};return jsxRuntimeExports.jsxs("div",{className:"ae:flex ae:flex-col ae:lg:flex-row ae:gap-4 ae:overflow-auto ae:w-full ae:items-start",children:[jsxRuntimeExports.jsxs("div",{className:"ae:min-w-[250px] ae:max-w-[400px] ae:flex-shrink-0 ae:bg-slate-50 ae:p-2 ae:px-3 ae:rounded",children:[jsxRuntimeExports.jsxs("div",{className:"ae:flex ae:gap-4 ae:items-center ae:mb-2",children:[jsxRuntimeExports.jsx("div",{className:"ae:font-medium",children:"Filter by Node Types"}),jsxRuntimeExports.jsx("button",{onClick:()=>ie(0),className:"explorerButton ae:bg-slate-500 ae:hover:bg-slate-700 ae:text-white",children:"Apply"})]}),jsxRuntimeExports.jsx(TypeCheckboxTree,{types:aiidaTypes,selectedTypes:l,setSelectedTypes:u}),jsxRuntimeExports.jsx("div",{className:"ae:font-medium ae:my-2 ae:mt-4",children:"Filter by Defined Groups"}),sortGroups(r).map(ae=>jsxRuntimeExports.jsxs("label",{className:"ae:flex ae:items-start ae:gap-2 ae:mb-1",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",className:"ae:mt-1",checked:a.includes(ae.label),onChange:st=>o(Ct=>st.target.checked?[...Ct,ae.label]:Ct.filter($t=>$t!==ae.label))}),jsxRuntimeExports.jsx("span",{className:"ae:truncate ae:block",title:ae.label,children:ae.label})]},ae.label))]}),jsxRuntimeExports.jsxs("div",{className:"ae:flex-1 ae:bg-white ae:rounded ae:gap-2",children:[jsxRuntimeExports.jsxs("div",{className:"ae:flex ae:flex-col ae:lg:flex-row ae:lg:items-center ae:gap-2",children:[jsxRuntimeExports.jsxs("div",{className:"ae:flex-1 ae:flex ae:items-center ae:gap-2 ae:py-2",children:[jsxRuntimeExports.jsxs("div",{className:"ae:text-xl ae:font-medium",children:[se.length," nodes loaded"]}),se.length>0&&jsxRuntimeExports.jsx("button",{onClick:()=>ie(v),className:"explorerButton ae:bg-slate-500 ae:hover:bg-slate-700 ae:text-white",children:"Load next 200"})]}),jsxRuntimeExports.jsxs("div",{className:"ae:flex ae:flex-col ae:sm:flex-row ae:items-start ae:sm:items-center ae:gap-2 ae:py-1 ae:w-full ae:lg:w-auto",children:[jsxRuntimeExports.jsx("span",{className:"ae:font-medium",children:"Navigate via UUID:"}),jsxRuntimeExports.jsx("input",{type:"text",value:J,onChange:ae=>q(ae.target.value),placeholder:"Enter a UUID",className:"ae:flex-1 ae:min-w-80 ae:border-2 ae:border-gray-300 ae:focus:outline-none ae:focus:border-slate-500 ae:px-2 ae:py-1 ae:rounded"}),jsxRuntimeExports.jsx("button",{onClick:ct,className:"explorerButton ae:bg-slate-500 ae:hover:bg-slate-700 ae:text-white",children:"Go"})]})]}),T&&jsxRuntimeExports.jsx("div",{className:"ae:w-full ae:h-[400px] ae:flex ae:items-center ae:justify-center",children:jsxRuntimeExports.jsx(Spinner,{})}),W&&!T&&jsxRuntimeExports.jsx("div",{className:"ae:w-full ae:h-[400px] ae:flex ae:flex-col ae:items-center ae:justify-center",children:jsxRuntimeExports.jsx(ErrorDisplay,{message:W,onRetry:()=>ie(v)})}),!T&&!W&&jsxRuntimeExports.jsx(DataTable,{columns:Y,data:se,maxWidth:"3000px",sortableCols:["Unique ID","Label","Type","Created","Modified"],renderIfMissing:!0,breakableCols:["Unique ID","Label","Type","Created","Modified"]})]})]})}function HelpViewer(){return jsxRuntimeExports.jsxs("div",{className:"ae:p-2 ae:w-full ae:h-full ae:overflow-y-auto ae:bg-white",children:[jsxRuntimeExports.jsxs("section",{className:"ae:mb-4",children:[jsxRuntimeExports.jsx("div",{className:"ae:text-lg  ae:mb-3 ae:flex ae:items-center ae:gap-2",children:"Overview"}),jsxRuntimeExports.jsxs("p",{className:"ae:text-gray-700 ae:leading-relaxed",children:["Aiida Explorer is an interactive tool for visualizing AiiDA workflows and calculations. You can navigate nodes, inspect their details, and explore relationships between workflows, calculations, and data nodes. This tool leverages the"," ",jsxRuntimeExports.jsx("a",{href:"https://aiida.readthedocs.io/projects/aiida-core/en/stable/internals/rest_api.html",className:"ae:text-blue-400 ae:hover:underline ae:hover:text-blue-700",target:"_blank",children:"AiiDA REST API"})," ","and presents data retrieved from it in a curated manner."]})]}),jsxRuntimeExports.jsxs("section",{className:"ae:mb-4",children:[jsxRuntimeExports.jsxs("div",{className:"ae:text-lg  ae:mb-3 ae:flex ae:items-center ae:gap-2",children:[jsxRuntimeExports.jsx(GraphIcon,{size:24})," Provenance"]}),jsxRuntimeExports.jsxs("p",{className:"ae:text-gray-700 ae:leading-relaxed",children:["Using AiiDA for high-throughput workflows comes with the benefit of AiiDA provenence. This provenence stores how calculations were performed and the results from them. Every node is part of a directed acyclic graph (DAG) that records the inputs, outputs, and intermediate steps. Understanding provenance helps reproducability and facilitates sharing. Learn more in the"," ",jsxRuntimeExports.jsx("a",{href:"https://aiida.readthedocs.io/projects/aiida-core/en/latest/",className:"ae:text-blue-400 ae:hover:underline ae:hover:text-blue-700",target:"_blank",children:"official docs."})," ","This tool uses the the 'API endpoint /links' to build up a local view of each node."]})]}),jsxRuntimeExports.jsxs("section",{className:"ae:mb-4",children:[jsxRuntimeExports.jsxs("div",{className:"ae:text-lg ae:mb-3 ae:flex ae:items-center ae:gap-2",children:[jsxRuntimeExports.jsx(ClickIcon,{size:24})," Inspecting Nodes"]}),jsxRuntimeExports.jsxs("ul",{className:"ae:pl-4 ae:list-inside ae:text-gray-700 ae:space-y-1",children:[jsxRuntimeExports.jsxs("li",{className:"ae:flex ae:items-center ae:gap-2",children:[jsxRuntimeExports.jsxs("span",{className:"ae:flex ae:items-center ae:gap-1 ae:font-medium",children:[jsxRuntimeExports.jsx(ClickIcon2,{size:22})," Click a node:"]}),jsxRuntimeExports.jsx("span",{className:"ae:text-gray-700",children:"Highlights the node and displays detailed information in the side panel."})]}),jsxRuntimeExports.jsxs("li",{className:"ae:flex ae:items-center ae:gap-2",children:[jsxRuntimeExports.jsxs("span",{className:"ae:flex ae:items-center ae:gap-1 ae:font-medium",children:[jsxRuntimeExports.jsx(DoubleClickIcon,{size:22})," Double-click a node:"]}),jsxRuntimeExports.jsx("span",{className:"ae:text-gray-700",children:"Sets the node as the central focus, building the links and centering the graph."})]}),jsxRuntimeExports.jsxs("li",{className:"ae:flex ae:items-center ae:gap-2",children:[jsxRuntimeExports.jsxs("span",{className:"ae:flex ae:items-center ae:gap-1 ae:font-medium",children:[jsxRuntimeExports.jsx(BreadcrumbsIcon,{size:22})," Breadcrumbs:"]}),jsxRuntimeExports.jsx("span",{className:"ae:text-gray-700",children:"Quickly navigate back to previously explored nodes. A history of the last 10 visited nodes is retained."})]})]})]}),jsxRuntimeExports.jsxs("section",{className:"ae:mb-4",children:[jsxRuntimeExports.jsxs("div",{className:"ae:text-lg ae:mb-3 ae:flex ae:items-center ae:gap-2",children:[jsxRuntimeExports.jsx(GraphIcon,{size:26})," Buttons & Controls"]}),jsxRuntimeExports.jsxs("ul",{className:"ae:pl-4 ae:list-inside ae:text-gray-700 ae:space-y-1",children:[jsxRuntimeExports.jsxs("li",{className:"ae:flex ae:items-center ae:gap-2",children:[jsxRuntimeExports.jsxs("span",{className:"ae:flex ae:items-center ae:gap-1 ae:font-medium",children:[jsxRuntimeExports.jsx(GroupIcon,{size:22})," Find node:"]}),jsxRuntimeExports.jsx("span",{className:"ae:text-gray-700",children:"Provides a graphical interface for simple AiiDA queries using the querybuilder endpoint."})]}),jsxRuntimeExports.jsxs("li",{className:"ae:flex ae:items-center ae:gap-2",children:[jsxRuntimeExports.jsxs("span",{className:"ae:flex ae:items-center ae:gap-1 ae:font-medium",children:[jsxRuntimeExports.jsx(LinksIcon,{size:20})," Get Counts:"]}),jsxRuntimeExports.jsx("span",{className:"ae:text-gray-700",children:"Fetches the parent/child counts for all nodes currently visible in the graph."})]}),jsxRuntimeExports.jsxs("li",{className:"ae:flex ae:items-center ae:gap-2",children:[jsxRuntimeExports.jsxs("span",{className:"ae:flex ae:items-center ae:gap-1 ae:font-medium",children:[jsxRuntimeExports.jsx(QuestionIcon,{size:20})," Help:"]}),jsxRuntimeExports.jsx("span",{className:"ae:text-gray-700",children:"Opens this help overlay."})]})]})]}),jsxRuntimeExports.jsxs("p",{className:"ae:text-gray-500 ae:text-sm ae:mt-6",children:["This tool is currently in beta testing stage. Report unexpected behaviour, bugs or general suggestions on"," ",jsxRuntimeExports.jsxs("a",{href:"https://github.com/aiidateam/aiida-explorer/issues/new",className:"ae:group ae:inline-flex ae:items-center ae:gap-0.5 ae:text-blue-400",target:"_blank",children:[jsxRuntimeExports.jsx("span",{className:"ae:transition-colors ae:group-hover:ae:text-blue-700",children:"GitHub."}),jsxRuntimeExports.jsx("span",{className:"ae:inline-flex ae:items-center ae:justify-center ae:w-5 ae:h-5 ae:rounded-full ae:bg-blue-400 ae:group-hover:bg-blue-700 ae:transition-colors",children:jsxRuntimeExports.jsx(GithubIcon,{className:"ae:w-[18px] ae:h-[18px] ae:text-white"})})]})]})]})}function useContainerMediaQuery(t,e){const[r,n]=reactExports.useState(null);return reactExports.useEffect(()=>{if(!t.current)return;const a=t.current,o=()=>{const{width:u,height:c}=a.getBoundingClientRect();for(const h of e)if(h.predicate(u,c)){n(h.name);return}n(null)};o();const l=new ResizeObserver(()=>{o()});return l.observe(a),()=>l.disconnect()},[t,e]),r}function useRootNode(t,e,r){const n=t!==void 0,[a,o]=reactExports.useState(e),l=n?t:a,u=reactExports.useCallback(c=>{n||o(c),r(c)},[n,r]);return[l,u]}function TopControls({onFindNode:t,onGetLinkCounts:e,onHelp:r,onDebug:n,onFullscreen:a,isLoading:o,disableGetCounts:l=!1,debugMode:u=!1,fullscreenToggle:c=!1}){const h="ae:hidden ae:@sm:inline";return jsxRuntimeExports.jsxs("div",{className:"ae:@container ae:w-full ae:shadow-md ae:bg-slate-100 ae:border-b ae:px-4 ae:py-2 ae:flex ae:justify-between ae:items-center ae:z-50",children:[jsxRuntimeExports.jsxs("div",{className:"ae:flex ae:gap-2",children:[jsxRuntimeExports.jsxs("button",{className:"explorerButton ae:flex ae:items-center ae:gap-1",onClick:t,children:[jsxRuntimeExports.jsx(GroupIcon,{className:"ae:w-5 ae:h-5"}),jsxRuntimeExports.jsx("span",{className:h,children:"Find Node"})]}),jsxRuntimeExports.jsxs("button",{className:"explorerButton ae:flex ae:items-center ae:gap-1",onClick:e,disabled:l||o,children:[jsxRuntimeExports.jsx(LinksIcon,{className:"ae:w-5 ae:h-5"}),jsxRuntimeExports.jsx("span",{className:h,children:"Get Link Counts"})]})]}),jsxRuntimeExports.jsxs("div",{className:"ae:flex ae:gap-2",children:[jsxRuntimeExports.jsxs("button",{className:"explorerButton ae:flex ae:items-center ae:gap-1",onClick:r,children:[jsxRuntimeExports.jsx(QuestionIcon,{className:"ae:w-5 ae:h-5"}),jsxRuntimeExports.jsx("span",{className:h,children:"Help"})]}),u&&n&&jsxRuntimeExports.jsxs("button",{className:"explorerButton ae:flex ae:items-center ae:gap-1 ae:text-red-600",onClick:n,children:[jsxRuntimeExports.jsx(BugIcon,{className:"ae:w-5 ae:h-5"}),jsxRuntimeExports.jsx("span",{className:h,children:"Debug"})]}),c&&a&&jsxRuntimeExports.jsxs("button",{className:"explorerButton ae:flex ae:items-center ae:gap-1",onClick:a,children:[jsxRuntimeExports.jsx(FullscreenIcon,{className:"ae:w-5 ae:h-5"}),jsxRuntimeExports.jsx("span",{className:h,children:"Fullscreen"})]})]})]})}function FormattedMetaData({nodeData:t,userData:e}){const r=e?.users||[],n=t?.aiida,[a,o]=reactExports.useState(!1);if(!n)return jsxRuntimeExports.jsx("div",{className:"ae:p-4 ae:text-slate-500 ae:italic",children:"No metadata available"});const l=Array.isArray(r)?r.find(u=>u.id===n.user_id):null;return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"ae:flex ae:gap-2 ae:items-center ae:cursor-pointer ae:md:cursor-default",onClick:()=>o(!a),children:[jsxRuntimeExports.jsx("div",{className:"explorerHeadingBig",children:t.label||""}),jsxRuntimeExports.jsx("span",{className:"ae:lg:hidden ae:transition-transform ae:duration-200",children:a?"":""})]}),jsxRuntimeExports.jsx("div",{className:`${a?"ae:block":"ae:hidden"} ae:mt-1 ae:lg:block ae:lg:mt-2`,children:jsxRuntimeExports.jsxs("div",{className:"ae:space-y-1 ae:px-1 ae:text-xs ae:lg:text-sm",children:[n.uuid&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"ae:font-medium",children:"UUID:"})," ",n.uuid]}),n.ctime&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"ae:font-medium",children:"Created:"})," ",n.ctime]}),n.mtime&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"ae:font-medium",children:"Modified:"})," ",n.mtime]}),n.node_type&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"ae:font-medium",children:"Node Type:"})," ",n.node_type]}),l&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"ae:font-medium",children:"Creator:"})," ",l.first_name," ",l.last_name||"",l.institution&&jsxRuntimeExports.jsxs("span",{className:"ae:text-gray-500",children:[" ","(",l.institution,")"]})]})]})})]})}function FileTable$1({title:t,dataArray:e=[],onView:r}){const n="ae:transition-colors ae:duration-75",a="ae:hover:scale-105 ae:transition-all ae:duration-75 ae:hover:cursor-pointer";if(!Array.isArray(e)||e.length===0)return null;const o=["File","Download","View"],l=e.map(u=>({File:u.name,Download:jsxRuntimeExports.jsx("a",{href:u.downloadUrl||"#",download:u.name||void 0,rel:"noopener noreferrer",className:`ae:text-blue-600 ae:hover:text-blue-800 ${n}`,children:jsxRuntimeExports.jsx(DownloadIcon,{size:18,className:a})}),View:jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>r?.(u.name,u.downloadUrl),className:`ae:text-green-600 ae:hover:text-green-800 ${n}`,children:jsxRuntimeExports.jsx(ViewIcon,{size:18,className:a})})}));return jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(DataTable,{title:t,columns:o,data:l,sortableCols:["File"]})})}function RawDataVisualiser({nodeData:t={}}){const[e,r]=reactExports.useState(null),[n,a]=reactExports.useState(null),[o,l]=reactExports.useState(!1),u=async(v,g)=>{try{const R=await(await fetch(g)).text();r(R),a(v),l(!0)}catch(T){console.error("Error loading preview:",T),r("Failed to load preview."),a(v),l(!0)}},c=[{title:"Attributes",data:t.attributes},{title:"Derived properties",data:t.derived_properties},{title:"Extras",data:t.extras},{title:"Full AiiDA metadata",data:t.aiida,collapseLevel:0}],h=jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(FileTable$1,{title:"Download node by format",dataArray:t.downloadByFormat?Object.entries(t.downloadByFormat).map(([v,g])=>({name:v,downloadUrl:g})):[],onView:u}),jsxRuntimeExports.jsx(FileTable$1,{title:"Files in this node",dataArray:t.repo_list||[],onView:u})]});return jsxRuntimeExports.jsxs("div",{className:"ae:flex ae:flex-col ae:px-3 ae:py-2 ae:gap-2 ae:lg:gap-4",children:[h,c.map((v,g)=>{const T=v.data||{};return Object.keys(T).length===0?null:jsxRuntimeExports.jsxs("div",{className:"ae:py-1 ae:px-2",children:[jsxRuntimeExports.jsx("div",{className:"ae:flex ae:items-center ae:gap-2 ae:pb-2",children:jsxRuntimeExports.jsx("div",{className:"explorerHeading",children:v.title})}),jsxRuntimeExports.jsx("div",{className:"ae:max-h-32 ae:md:max-h-96 ae:overflow-auto ae:border ae:border-slate-200 ae:rounded ae:p-1 ae:bg-slate-100",children:jsxRuntimeExports.jsxs(JsonView,{value:T,collapsed:!1,shouldExpandNodeInitially:(R,{level:W})=>W<2,displayDataTypes:!1,enableClipboard:!0,shortenTextAfterLength:38,children:[jsxRuntimeExports.jsx(JsonView.Quote,{render:({children:R,...W},{type:k})=>k==="key"?null:jsxRuntimeExports.jsx("span",{...W,children:R})}),jsxRuntimeExports.jsx(JsonView.Copied,{render:({"data-copied":R,onClick:W,...k})=>jsxRuntimeExports.jsx("button",{...k,onClick:W,type:"button",className:"ae:flex ae:items-center ae:gap-1 ae:text-slate-700 ae:hover:text-blue-500",children:R?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(ClipboardCopyIcon,{size:16,className:"ae:text-xs ae:text-green-400"})}):jsxRuntimeExports.jsx(ClipBoardIcon,{size:16})})})]})})]},g)}),jsxRuntimeExports.jsx(Overlay,{active:o,onClose:()=>l(!1),title:`Preview: ${n}`,children:jsxRuntimeExports.jsx("pre",{className:"ae:overflow-y-auto ae:whitespace-pre-wrap ae:text-sm ae:flex-1",children:e})})]})}function transpose(t){const e=t.length,r=t[0].length,n=new Array(r);for(let a=0;a<r;a++){n[a]=new Array(e);for(let o=0;o<e;o++)n[a][o]=t[o][a]}return n}const baseColors=["#636EFA","#EF553B","#00CC96","#AB63FA","#FFA15A","#19D3F3","#FF6692","#B6E880","#FF97FF","#FECB52"];function getColor(t){return t<baseColors.length?baseColors[t]:`hsl(${t*47%360}, 70%, 50%)`}function mergeLegendTracesByName(t){const e=new Set;return t.map(n=>{const a=n.name||"",o=!e.has(a);return o&&e.add(a),{...n,legendgroup:a,showlegend:o}})}function getXYData(t){const e=[],r=[];let n=null;return t.paths.forEach((a,o)=>{const l=a.x,u=a.values;o>0&&(e.push(null),r.forEach(c=>c.push(null))),l.forEach((c,h)=>{c===n&&(e.push(null),r.forEach(v=>v.push(null))),e.push(c),n=c,u.forEach((v,g)=>{r[g]||(r[g]=[]),r[g].push(v[h])})})}),{xs:e,ys:r}}function prettifyLabels(t){const e={GAMMA:"",DELTA:"",SIGMA:"",LAMBDA:""};Object.keys(e).forEach(n=>{const a=new RegExp(n,"gi");t=t.replace(a,e[n])}),t=t.replace(/\bG\b/g,""),t=t.replace(/-/g,"");const r={0:"",1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:""};return t=t.replace(/_(.)/g,(n,a)=>r[a]||n),t}function getXLabelPos(t=td.paths){const e=[0];for(const r of t)r.x.length<3||e.push(r.x[r.x.length-1]);return e}function getXLabelsfromkpath(t){const e=t.flat(),r=[];r.push(e[0]);for(let n=1;n<e.length-1;n++)e[n]===e[n+1]?(r.push(e[n]),n++):(r.push(e[n]+"|"+e[n+1]),n++);return r.push(e[e.length-1]),r}function getXYRangeForAxis(t,e="x",r="y"){let n=1/0,a=-1/0,o=1/0,l=-1/0;for(const u of t){const c=u.xaxis===e||!u.xaxis&&e==="x",h=u.yaxis===r||!u.yaxis&&r==="y";if(!(!c||!h)){for(const v of u.x??[])typeof v=="number"&&(n=Math.min(n,v),a=Math.max(a,v));for(const v of u.y??[])typeof v=="number"&&(o=Math.min(o,v),l=Math.max(l,v))}}return{x:n===1/0?null:[n,a],y:o===1/0?null:[o,l]}}function createFermiLine(t,e,r,n={}){return{x:t,y:e,mode:"lines",type:"scatter",name:`Fermi [${r}eV]`,legendgroup:`fermi-${r}`,showlegend:n.showlegend??!0,line:{color:"green",width:1.25,dash:"dash"},...n}}function addfermiLines(t,e,r,n){const a=[...e];if(r&&!n){const{y:o}=getXYRangeForAxis(e);for(const l of t)a.push(createFermiLine([l,l],[o[0],o[1]],l))}else if(n&&!r){const{x:o}=getXYRangeForAxis(e);for(const l of t)a.push(createFermiLine([o[0],o[1]],[l,l],l))}else if(n&&r){const{x:o}=getXYRangeForAxis(e,"x2","y"),{x:l}=getXYRangeForAxis(e,"x","y");for(const u of t)a.push(createFermiLine([l[0],l[1]],[u,u],u)),a.push(createFermiLine([o[0],o[1]],[u,u],u,{showlegend:!1,xaxis:"x2",yaxis:"y"}))}return a}var cjs,hasRequiredCjs;function requireCjs(){if(hasRequiredCjs)return cjs;hasRequiredCjs=1;var t=function(Se){return e(Se)&&!r(Se)};function e(q){return!!q&&typeof q=="object"}function r(q){var Se=Object.prototype.toString.call(q);return Se==="[object RegExp]"||Se==="[object Date]"||o(q)}var n=typeof Symbol=="function"&&Symbol.for,a=n?Symbol.for("react.element"):60103;function o(q){return q.$$typeof===a}function l(q){return Array.isArray(q)?[]:{}}function u(q,Se){return Se.clone!==!1&&Se.isMergeableObject(q)?k(l(q),q,Se):q}function c(q,Se,V){return q.concat(Se).map(function(Y){return u(Y,V)})}function h(q,Se){if(!Se.customMerge)return k;var V=Se.customMerge(q);return typeof V=="function"?V:k}function v(q){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(q).filter(function(Se){return Object.propertyIsEnumerable.call(q,Se)}):[]}function g(q){return Object.keys(q).concat(v(q))}function T(q,Se){try{return Se in q}catch{return!1}}function R(q,Se){return T(q,Se)&&!(Object.hasOwnProperty.call(q,Se)&&Object.propertyIsEnumerable.call(q,Se))}function W(q,Se,V){var Y={};return V.isMergeableObject(q)&&g(q).forEach(function(ie){Y[ie]=u(q[ie],V)}),g(Se).forEach(function(ie){R(q,ie)||(T(q,ie)&&V.isMergeableObject(Se[ie])?Y[ie]=h(ie,V)(q[ie],Se[ie],V):Y[ie]=u(Se[ie],V))}),Y}function k(q,Se,V){V=V||{},V.arrayMerge=V.arrayMerge||c,V.isMergeableObject=V.isMergeableObject||t,V.cloneUnlessOtherwiseSpecified=u;var Y=Array.isArray(Se),ie=Array.isArray(q),se=Y===ie;return se?Y?V.arrayMerge(q,Se,V):W(q,Se,V):u(Se,V)}k.all=function(Se,V){if(!Array.isArray(Se))throw new Error("first argument should be an array");return Se.reduce(function(Y,ie){return k(Y,ie,V)},{})};var J=k;return cjs=J,cjs}var cjsExports=requireCjs();const deepmerge=getDefaultExportFromCjs(cjsExports),plotLayoutDefault={title:"Multi Trace Plot with border",hovermode:"closest",uirevision:!0,shapes:[{type:"rect",xref:"paper",yref:"paper",x0:0,y0:0,x1:1,y1:1,line:{color:"black",width:2},layer:"above"}],margin:{l:55,r:10,t:10,b:45},dragmode:"zoom",xaxis:{title:{text:"x-axis",font:{size:18,color:"#212529"}},showgrid:!0,showline:!1,zeroline:!1,ticks:"inside",tickfont:{size:16,color:"#212529"}},yaxis:{title:{text:"y-axis",font:{size:19,color:"#212529"}},showgrid:!0,zeroline:!1,showline:!1,ticks:"inside",color:"#212529",tickfont:{color:"#212529",size:19}},legend:{x:1.01,y:1,xanchor:"left",yanchor:"top",orientation:"v"}},plotBandLayout=deepmerge(plotLayoutDefault,{title:"BSPlot",xaxis:{title:{text:"K-path",font:{size:18,color:"#212529"}},showgrid:!0,showline:!1,zeroline:!1,ticks:"inside",tickfont:{size:16,color:"#212529"}},yaxis:{title:{text:"Energy [eV]",font:{size:19,color:"#212529"}},showgrid:!0,zeroline:!1,showline:!1,ticks:"inside",color:"#212529",tickfont:{color:"#212529",size:19}}}),plotDOSLayout=deepmerge(plotLayoutDefault,{title:"DOSPlot",xaxis:{title:{text:"Energy [eV]",font:{size:18,color:"#212529"}},showgrid:!0,zeroline:!1,ticks:"inside",tickfont:{size:16,color:"#212529"}},yaxis:{title:{text:"Density of States",font:{size:18,color:"#212529"}},showgrid:!0,zeroline:!1,ticks:"inside",tickfont:{size:16,color:"#212529"}}}),plotDOSLayoutF=deepmerge(plotLayoutDefault,{title:"DOSPlot",xaxis:{title:{text:"Density of States",font:{size:18,color:"#212529"}},showgrid:!0,zeroline:!1,ticks:"inside",tickfont:{size:16,color:"#212529"}},yaxis:{title:{text:"Energy [eV]",font:{size:18,color:"#212529"}},showgrid:!0,zeroline:!1,ticks:"inside",tickfont:{size:16,color:"#212529"}}}),plotCombinedLayout={shapes:[{type:"rect",xref:"paper",yref:"paper",x0:0,y0:0,x1:.7,y1:1,line:{color:"black",width:2},layer:"above"},{type:"rect",xref:"paper",yref:"paper",x0:.73,y0:0,x1:1,y1:1,line:{color:"black",width:2},layer:"above"}],grid:{rows:1,columns:2,pattern:"independent"},xaxis:{domain:[0,.7],autorange:!0},xaxis2:{title:{text:"Energy [eV]",font:{size:18}},showgrid:!0,zeroline:!1,ticks:"inside",tickfont:{size:16,color:"#212529"},domain:[.73,1],autorange:!0,showgrid:!0},yaxis:{autorange:!0},margin:{l:60,r:30,b:40,t:40},showlegend:!0,legend:{}},traceDefaultBands={mode:"lines",dash:"solid",line:{color:"rgba(90, 60, 255, 0.85)",width:1},name:"Band Structure"},traceDefaultDos={name:"DOS",legendgroup:"DOS",showlegend:!0,type:"scatter",mode:"lines",dash:"dash",line:{color:"rgba(90, 60, 255, 0.85)",width:2},fill:"toself"};var plotlyBasic_min$1={exports:{}},plotlyBasic_min=plotlyBasic_min$1.exports,hasRequiredPlotlyBasic_min;function requirePlotlyBasic_min(){return hasRequiredPlotlyBasic_min||(hasRequiredPlotlyBasic_min=1,(function(t){(function(e,r){t.exports?t.exports=r():e.moduleName=r()})(typeof self<"u"?self:plotlyBasic_min,()=>{var e=(()=>{var r=(nt,ke)=>()=>(ke||nt((ke={exports:{}}).exports,ke),ke.exports),n=r(nt=>{nt.version="3.1.2"}),a=r((nt,ke)=>{(function(_,d,m){d[_]=d[_]||m(),typeof ke<"u"&&ke.exports&&(ke.exports=d[_])})("Promise",typeof window<"u"?window:nt,function(){var _,d,m,E=Object.prototype.toString,b=typeof setImmediate<"u"?function(G){return setImmediate(G)}:setTimeout;try{Object.defineProperty({},"x",{}),_=function(G,M,L,B){return Object.defineProperty(G,M,{value:L,writable:!0,configurable:B!==!1})}}catch{_=function(M,L,B){return M[L]=B,M}}m=(function(){var G,M,L;function B(X,ee){this.fn=X,this.self=ee,this.next=void 0}return{add:function(X,ee){L=new B(X,ee),M?M.next=L:G=L,M=L,L=void 0},drain:function(){var X=G;for(G=M=d=void 0;X;)X.fn.call(X.self),X=X.next}}})();function w(G,M){m.add(G,M),d||(d=b(m.drain))}function S(G){var M,L=typeof G;return G!=null&&(L=="object"||L=="function")&&(M=G.then),typeof M=="function"?M:!1}function C(){for(var G=0;G<this.chain.length;G++)p(this,this.state===1?this.chain[G].success:this.chain[G].failure,this.chain[G]);this.chain.length=0}function p(G,M,L){var B,X;try{M===!1?L.reject(G.msg):(M===!0?B=G.msg:B=M.call(void 0,G.msg),B===L.promise?L.reject(TypeError("Promise-chain cycle")):(X=S(B))?X.call(B,L.resolve,L.reject):L.resolve(B))}catch(ee){L.reject(ee)}}function F(G){var M,L=this;if(!L.triggered){L.triggered=!0,L.def&&(L=L.def);try{(M=S(G))?w(function(){var B=new $(L);try{M.call(G,function(){F.apply(B,arguments)},function(){A.apply(B,arguments)})}catch(X){A.call(B,X)}}):(L.msg=G,L.state=1,L.chain.length>0&&w(C,L))}catch(B){A.call(new $(L),B)}}}function A(G){var M=this;M.triggered||(M.triggered=!0,M.def&&(M=M.def),M.msg=G,M.state=2,M.chain.length>0&&w(C,M))}function O(G,M,L,B){for(var X=0;X<M.length;X++)(function(ee){G.resolve(M[ee]).then(function(yt){L(ee,yt)},B)})(X)}function $(G){this.def=G,this.triggered=!1}function j(G){this.promise=G,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function z(G){if(typeof G!="function")throw TypeError("Not a function");if(this.__NPO__!==0)throw TypeError("Not a promise");this.__NPO__=1;var M=new j(this);this.then=function(L,B){var X={success:typeof L=="function"?L:!0,failure:typeof B=="function"?B:!1};return X.promise=new this.constructor(function(ee,yt){if(typeof ee!="function"||typeof yt!="function")throw TypeError("Not a function");X.resolve=ee,X.reject=yt}),M.chain.push(X),M.state!==0&&w(C,M),X.promise},this.catch=function(L){return this.then(void 0,L)};try{G.call(void 0,function(L){F.call(M,L)},function(L){A.call(M,L)})}catch(L){A.call(M,L)}}var I=_({},"constructor",z,!1);return z.prototype=I,_(I,"__NPO__",0,!1),_(z,"resolve",function(G){var M=this;return G&&typeof G=="object"&&G.__NPO__===1?G:new M(function(L,B){if(typeof L!="function"||typeof B!="function")throw TypeError("Not a function");L(G)})}),_(z,"reject",function(G){return new this(function(M,L){if(typeof M!="function"||typeof L!="function")throw TypeError("Not a function");L(G)})}),_(z,"all",function(G){var M=this;return E.call(G)!="[object Array]"?M.reject(TypeError("Not an array")):G.length===0?M.resolve([]):new M(function(L,B){if(typeof L!="function"||typeof B!="function")throw TypeError("Not a function");var X=G.length,ee=Array(X),yt=0;O(M,G,function(Ze,Re){ee[Ze]=Re,++yt===X&&L(ee)},B)})}),_(z,"race",function(G){var M=this;return E.call(G)!="[object Array]"?M.reject(TypeError("Not an array")):new M(function(L,B){if(typeof L!="function"||typeof B!="function")throw TypeError("Not a function");O(M,G,function(X,ee){L(ee)},B)})}),z})}),o=r((nt,ke)=>{(function(){var _={version:"3.8.2"},d=[].slice,m=function(x){return d.call(x)},E=self.document;function b(x){return x&&(x.ownerDocument||x.document||x).documentElement}function w(x){return x&&(x.ownerDocument&&x.ownerDocument.defaultView||x.document&&x||x.defaultView)}if(E)try{m(E.documentElement.childNodes)[0].nodeType}catch{m=function(H){for(var le=H.length,dt=new Array(le);le--;)dt[le]=H[le];return dt}}if(Date.now||(Date.now=function(){return+new Date}),E)try{E.createElement("DIV").style.setProperty("opacity",0,"")}catch{var S=this.Element.prototype,C=S.setAttribute,p=S.setAttributeNS,F=this.CSSStyleDeclaration.prototype,A=F.setProperty;S.setAttribute=function(H,le){C.call(this,H,le+"")},S.setAttributeNS=function(H,le,dt){p.call(this,H,le,dt+"")},F.setProperty=function(H,le,dt){A.call(this,H,le+"",dt)}}_.ascending=O;function O(x,H){return x<H?-1:x>H?1:x>=H?0:NaN}_.descending=function(x,H){return H<x?-1:H>x?1:H>=x?0:NaN},_.min=function(x,H){var le=-1,dt=x.length,Tt,Nt;if(arguments.length===1){for(;++le<dt;)if((Nt=x[le])!=null&&Nt>=Nt){Tt=Nt;break}for(;++le<dt;)(Nt=x[le])!=null&&Tt>Nt&&(Tt=Nt)}else{for(;++le<dt;)if((Nt=H.call(x,x[le],le))!=null&&Nt>=Nt){Tt=Nt;break}for(;++le<dt;)(Nt=H.call(x,x[le],le))!=null&&Tt>Nt&&(Tt=Nt)}return Tt},_.max=function(x,H){var le=-1,dt=x.length,Tt,Nt;if(arguments.length===1){for(;++le<dt;)if((Nt=x[le])!=null&&Nt>=Nt){Tt=Nt;break}for(;++le<dt;)(Nt=x[le])!=null&&Nt>Tt&&(Tt=Nt)}else{for(;++le<dt;)if((Nt=H.call(x,x[le],le))!=null&&Nt>=Nt){Tt=Nt;break}for(;++le<dt;)(Nt=H.call(x,x[le],le))!=null&&Nt>Tt&&(Tt=Nt)}return Tt},_.extent=function(x,H){var le=-1,dt=x.length,Tt,Nt,ci;if(arguments.length===1){for(;++le<dt;)if((Nt=x[le])!=null&&Nt>=Nt){Tt=ci=Nt;break}for(;++le<dt;)(Nt=x[le])!=null&&(Tt>Nt&&(Tt=Nt),ci<Nt&&(ci=Nt))}else{for(;++le<dt;)if((Nt=H.call(x,x[le],le))!=null&&Nt>=Nt){Tt=ci=Nt;break}for(;++le<dt;)(Nt=H.call(x,x[le],le))!=null&&(Tt>Nt&&(Tt=Nt),ci<Nt&&(ci=Nt))}return[Tt,ci]};function $(x){return x===null?NaN:+x}function j(x){return!isNaN(x)}_.sum=function(x,H){var le=0,dt=x.length,Tt,Nt=-1;if(arguments.length===1)for(;++Nt<dt;)j(Tt=+x[Nt])&&(le+=Tt);else for(;++Nt<dt;)j(Tt=+H.call(x,x[Nt],Nt))&&(le+=Tt);return le},_.mean=function(x,H){var le=0,dt=x.length,Tt,Nt=-1,ci=dt;if(arguments.length===1)for(;++Nt<dt;)j(Tt=$(x[Nt]))?le+=Tt:--ci;else for(;++Nt<dt;)j(Tt=$(H.call(x,x[Nt],Nt)))?le+=Tt:--ci;if(ci)return le/ci},_.quantile=function(x,H){var le=(x.length-1)*H+1,dt=Math.floor(le),Tt=+x[dt-1],Nt=le-dt;return Nt?Tt+Nt*(x[dt]-Tt):Tt},_.median=function(x,H){var le=[],dt=x.length,Tt,Nt=-1;if(arguments.length===1)for(;++Nt<dt;)j(Tt=$(x[Nt]))&&le.push(Tt);else for(;++Nt<dt;)j(Tt=$(H.call(x,x[Nt],Nt)))&&le.push(Tt);if(le.length)return _.quantile(le.sort(O),.5)},_.variance=function(x,H){var le=x.length,dt=0,Tt,Nt,ci=0,Fn=-1,zp=0;if(arguments.length===1)for(;++Fn<le;)j(Tt=$(x[Fn]))&&(Nt=Tt-dt,dt+=Nt/++zp,ci+=Nt*(Tt-dt));else for(;++Fn<le;)j(Tt=$(H.call(x,x[Fn],Fn)))&&(Nt=Tt-dt,dt+=Nt/++zp,ci+=Nt*(Tt-dt));if(zp>1)return ci/(zp-1)},_.deviation=function(){var x=_.variance.apply(this,arguments);return x&&Math.sqrt(x)};function z(x){return{left:function(H,le,dt,Tt){for(arguments.length<3&&(dt=0),arguments.length<4&&(Tt=H.length);dt<Tt;){var Nt=dt+Tt>>>1;x(H[Nt],le)<0?dt=Nt+1:Tt=Nt}return dt},right:function(H,le,dt,Tt){for(arguments.length<3&&(dt=0),arguments.length<4&&(Tt=H.length);dt<Tt;){var Nt=dt+Tt>>>1;x(H[Nt],le)>0?Tt=Nt:dt=Nt+1}return dt}}}var I=z(O);_.bisectLeft=I.left,_.bisect=_.bisectRight=I.right,_.bisector=function(x){return z(x.length===1?function(H,le){return O(x(H),le)}:x)},_.shuffle=function(x,H,le){(dt=arguments.length)<3&&(le=x.length,dt<2&&(H=0));for(var dt=le-H,Tt,Nt;dt;)Nt=Math.random()*dt--|0,Tt=x[dt+H],x[dt+H]=x[Nt+H],x[Nt+H]=Tt;return x},_.permute=function(x,H){for(var le=H.length,dt=new Array(le);le--;)dt[le]=x[H[le]];return dt},_.pairs=function(x){for(var H=0,le=x.length-1,dt,Tt=x[0],Nt=new Array(le<0?0:le);H<le;)Nt[H]=[dt=Tt,Tt=x[++H]];return Nt},_.transpose=function(x){if(!(Nt=x.length))return[];for(var H=-1,le=_.min(x,G),dt=new Array(le);++H<le;)for(var Tt=-1,Nt,ci=dt[H]=new Array(Nt);++Tt<Nt;)ci[Tt]=x[Tt][H];return dt};function G(x){return x.length}_.zip=function(){return _.transpose(arguments)},_.keys=function(x){var H=[];for(var le in x)H.push(le);return H},_.values=function(x){var H=[];for(var le in x)H.push(x[le]);return H},_.entries=function(x){var H=[];for(var le in x)H.push({key:le,value:x[le]});return H},_.merge=function(x){for(var H=x.length,le,dt=-1,Tt=0,Nt,ci;++dt<H;)Tt+=x[dt].length;for(Nt=new Array(Tt);--H>=0;)for(ci=x[H],le=ci.length;--le>=0;)Nt[--Tt]=ci[le];return Nt};var M=Math.abs;_.range=function(x,H,le){if(arguments.length<3&&(le=1,arguments.length<2&&(H=x,x=0)),(H-x)/le===1/0)throw new Error("infinite range");var dt=[],Tt=L(M(le)),Nt=-1,ci;if(x*=Tt,H*=Tt,le*=Tt,le<0)for(;(ci=x+le*++Nt)>H;)dt.push(ci/Tt);else for(;(ci=x+le*++Nt)<H;)dt.push(ci/Tt);return dt};function L(x){for(var H=1;x*H%1;)H*=10;return H}function B(x,H){for(var le in H)Object.defineProperty(x.prototype,le,{value:H[le],enumerable:!1})}_.map=function(x,H){var le=new X;if(x instanceof X)x.forEach(function(Fn,zp){le.set(Fn,zp)});else if(Array.isArray(x)){var dt=-1,Tt=x.length,Nt;if(arguments.length===1)for(;++dt<Tt;)le.set(dt,x[dt]);else for(;++dt<Tt;)le.set(H.call(x,Nt=x[dt],dt),Nt)}else for(var ci in x)le.set(ci,x[ci]);return le};function X(){this._=Object.create(null)}var ee="__proto__",yt="\0";B(X,{has:Q,get:function(x){return this._[Ze(x)]},set:function(x,H){return this._[Ze(x)]=H},remove:xt,keys:tt,values:function(){var x=[];for(var H in this._)x.push(this._[H]);return x},entries:function(){var x=[];for(var H in this._)x.push({key:Re(H),value:this._[H]});return x},size:ht,empty:it,forEach:function(x){for(var H in this._)x.call(this,Re(H),this._[H])}});function Ze(x){return(x+="")===ee||x[0]===yt?yt+x:x}function Re(x){return(x+="")[0]===yt?x.slice(1):x}function Q(x){return Ze(x)in this._}function xt(x){return(x=Ze(x))in this._&&delete this._[x]}function tt(){var x=[];for(var H in this._)x.push(Re(H));return x}function ht(){var x=0;for(var H in this._)++x;return x}function it(){for(var x in this._)return!1;return!0}_.nest=function(){var x={},H=[],le=[],dt,Tt;function Nt(Fn,zp,Yp){if(Yp>=H.length)return Tt?Tt.call(x,zp):dt?zp.sort(dt):zp;for(var Jp=-1,N0=zp.length,P0=H[Yp++],dm,Mm,z0,sm=new X,um;++Jp<N0;)(um=sm.get(dm=P0(Mm=zp[Jp])))?um.push(Mm):sm.set(dm,[Mm]);return Fn?(Mm=Fn(),z0=function(Sm,Tm){Mm.set(Sm,Nt(Fn,Tm,Yp))}):(Mm={},z0=function(Sm,Tm){Mm[Sm]=Nt(Fn,Tm,Yp)}),sm.forEach(z0),Mm}function ci(Fn,zp){if(zp>=H.length)return Fn;var Yp=[],Jp=le[zp++];return Fn.forEach(function(N0,P0){Yp.push({key:N0,values:ci(P0,zp)})}),Jp?Yp.sort(function(N0,P0){return Jp(N0.key,P0.key)}):Yp}return x.map=function(Fn,zp){return Nt(zp,Fn,0)},x.entries=function(Fn){return ci(Nt(_.map,Fn,0),0)},x.key=function(Fn){return H.push(Fn),x},x.sortKeys=function(Fn){return le[H.length-1]=Fn,x},x.sortValues=function(Fn){return dt=Fn,x},x.rollup=function(Fn){return Tt=Fn,x},x},_.set=function(x){var H=new ut;if(x)for(var le=0,dt=x.length;le<dt;++le)H.add(x[le]);return H};function ut(){this._=Object.create(null)}B(ut,{has:Q,add:function(x){return this._[Ze(x+="")]=!0,x},remove:xt,values:tt,size:ht,empty:it,forEach:function(x){for(var H in this._)x.call(this,Re(H))}}),_.behavior={};function vt(x){return x}_.rebind=function(x,H){for(var le=1,dt=arguments.length,Tt;++le<dt;)x[Tt=arguments[le]]=_t(x,H,H[Tt]);return x};function _t(x,H,le){return function(){var dt=le.apply(H,arguments);return dt===H?x:dt}}function Le(x,H){if(H in x)return H;H=H.charAt(0).toUpperCase()+H.slice(1);for(var le=0,dt=wt.length;le<dt;++le){var Tt=wt[le]+H;if(Tt in x)return Tt}}var wt=["webkit","ms","moz","Moz","o","O"];function St(){}_.dispatch=function(){for(var x=new Ut,H=-1,le=arguments.length;++H<le;)x[arguments[H]]=kt(x);return x};function Ut(){}Ut.prototype.on=function(x,H){var le=x.indexOf("."),dt="";if(le>=0&&(dt=x.slice(le+1),x=x.slice(0,le)),x)return arguments.length<2?this[x].on(dt):this[x].on(dt,H);if(arguments.length===2){if(H==null)for(x in this)this.hasOwnProperty(x)&&this[x].on(dt,null);return this}};function kt(x){var H=[],le=new X;function dt(){for(var Tt=H,Nt=-1,ci=Tt.length,Fn;++Nt<ci;)(Fn=Tt[Nt].on)&&Fn.apply(this,arguments);return x}return dt.on=function(Tt,Nt){var ci=le.get(Tt),Fn;return arguments.length<2?ci&&ci.on:(ci&&(ci.on=null,H=H.slice(0,Fn=H.indexOf(ci)).concat(H.slice(Fn+1)),le.remove(Tt)),Nt&&H.push(le.set(Tt,{on:Nt})),x)},dt}_.event=null;function jt(){_.event.preventDefault()}function aa(){for(var x=_.event,H;H=x.sourceEvent;)x=H;return x}function ca(x){for(var H=new Ut,le=0,dt=arguments.length;++le<dt;)H[arguments[le]]=kt(H);return H.of=function(Tt,Nt){return function(ci){try{var Fn=ci.sourceEvent=_.event;ci.target=x,_.event=ci,H[ci.type].apply(Tt,Nt)}finally{_.event=Fn}}},H}_.requote=function(x){return x.replace(Cp,"\\$&")};var Cp=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,pt={}.__proto__?function(x,H){x.__proto__=H}:function(x,H){for(var le in H)x[le]=H[le]};function gt(x){return pt(x,rt),x}var te=function(x,H){return H.querySelector(x)},Et=function(x,H){return H.querySelectorAll(x)},zt=function(x,H){var le=x.matches||x[Le(x,"matchesSelector")];return zt=function(dt,Tt){return le.call(dt,Tt)},zt(x,H)};typeof Sizzle=="function"&&(te=function(x,H){return Sizzle(x,H)[0]||null},Et=Sizzle,zt=Sizzle.matchesSelector),_.selection=function(){return _.select(E.documentElement)};var rt=_.selection.prototype=[];rt.select=function(x){var H=[],le,dt,Tt,Nt;x=Z(x);for(var ci=-1,Fn=this.length;++ci<Fn;){H.push(le=[]),le.parentNode=(Tt=this[ci]).parentNode;for(var zp=-1,Yp=Tt.length;++zp<Yp;)(Nt=Tt[zp])?(le.push(dt=x.call(Nt,Nt.__data__,zp,ci)),dt&&"__data__"in Nt&&(dt.__data__=Nt.__data__)):le.push(null)}return gt(H)};function Z(x){return typeof x=="function"?x:function(){return te(x,this)}}rt.selectAll=function(x){var H=[],le,dt;x=we(x);for(var Tt=-1,Nt=this.length;++Tt<Nt;)for(var ci=this[Tt],Fn=-1,zp=ci.length;++Fn<zp;)(dt=ci[Fn])&&(H.push(le=m(x.call(dt,dt.__data__,Fn,Tt))),le.parentNode=dt);return gt(H)};function we(x){return typeof x=="function"?x:function(){return Et(x,this)}}var ot="http://www.w3.org/1999/xhtml",mt={svg:"http://www.w3.org/2000/svg",xhtml:ot,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};_.ns={prefix:mt,qualify:function(x){var H=x.indexOf(":"),le=x;return H>=0&&(le=x.slice(0,H))!=="xmlns"&&(x=x.slice(H+1)),mt.hasOwnProperty(le)?{space:mt[le],local:x}:x}},rt.attr=function(x,H){if(arguments.length<2){if(typeof x=="string"){var le=this.node();return x=_.ns.qualify(x),x.local?le.getAttributeNS(x.space,x.local):le.getAttribute(x)}for(H in x)this.each(It(H,x[H]));return this}return this.each(It(x,H))};function It(x,H){x=_.ns.qualify(x);function le(){this.removeAttribute(x)}function dt(){this.removeAttributeNS(x.space,x.local)}function Tt(){this.setAttribute(x,H)}function Nt(){this.setAttributeNS(x.space,x.local,H)}function ci(){var zp=H.apply(this,arguments);zp==null?this.removeAttribute(x):this.setAttribute(x,zp)}function Fn(){var zp=H.apply(this,arguments);zp==null?this.removeAttributeNS(x.space,x.local):this.setAttributeNS(x.space,x.local,zp)}return H==null?x.local?dt:le:typeof H=="function"?x.local?Fn:ci:x.local?Nt:Tt}function Yt(x){return x.trim().replace(/\s+/g," ")}rt.classed=function(x,H){if(arguments.length<2){if(typeof x=="string"){var le=this.node(),dt=(x=Op(x)).length,Tt=-1;if(H=le.classList){for(;++Tt<dt;)if(!H.contains(x[Tt]))return!1}else for(H=le.getAttribute("class");++Tt<dt;)if(!Sr(x[Tt]).test(H))return!1;return!0}for(H in x)this.each(Hp(H,x[H]));return this}return this.each(Hp(x,H))};function Sr(x){return new RegExp("(?:^|\\s+)"+_.requote(x)+"(?:\\s+|$)","g")}function Op(x){return(x+"").trim().split(/^|\s+/)}function Hp(x,H){x=Op(x).map(n0);var le=x.length;function dt(){for(var Nt=-1;++Nt<le;)x[Nt](this,H)}function Tt(){for(var Nt=-1,ci=H.apply(this,arguments);++Nt<le;)x[Nt](this,ci)}return typeof H=="function"?Tt:dt}function n0(x){var H=Sr(x);return function(le,dt){if(Tt=le.classList)return dt?Tt.add(x):Tt.remove(x);var Tt=le.getAttribute("class")||"";dt?(H.lastIndex=0,H.test(Tt)||le.setAttribute("class",Yt(Tt+" "+x))):le.setAttribute("class",Yt(Tt.replace(H," ")))}}rt.style=function(x,H,le){var dt=arguments.length;if(dt<3){if(typeof x!="string"){dt<2&&(H="");for(le in x)this.each(R0(le,x[le],H));return this}if(dt<2){var Tt=this.node();return w(Tt).getComputedStyle(Tt,null).getPropertyValue(x)}le=""}return this.each(R0(x,H,le))};function R0(x,H,le){function dt(){this.style.removeProperty(x)}function Tt(){this.style.setProperty(x,H,le)}function Nt(){var ci=H.apply(this,arguments);ci==null?this.style.removeProperty(x):this.style.setProperty(x,ci,le)}return H==null?dt:typeof H=="function"?Nt:Tt}rt.property=function(x,H){if(arguments.length<2){if(typeof x=="string")return this.node()[x];for(H in x)this.each(w0(H,x[H]));return this}return this.each(w0(x,H))};function w0(x,H){function le(){delete this[x]}function dt(){this[x]=H}function Tt(){var Nt=H.apply(this,arguments);Nt==null?delete this[x]:this[x]=Nt}return H==null?le:typeof H=="function"?Tt:dt}rt.text=function(x){return arguments.length?this.each(typeof x=="function"?function(){var H=x.apply(this,arguments);this.textContent=H??""}:x==null?function(){this.textContent=""}:function(){this.textContent=x}):this.node().textContent},rt.html=function(x){return arguments.length?this.each(typeof x=="function"?function(){var H=x.apply(this,arguments);this.innerHTML=H??""}:x==null?function(){this.innerHTML=""}:function(){this.innerHTML=x}):this.node().innerHTML},rt.append=function(x){return x=_0(x),this.select(function(){return this.appendChild(x.apply(this,arguments))})};function _0(x){function H(){var dt=this.ownerDocument,Tt=this.namespaceURI;return Tt===ot&&dt.documentElement.namespaceURI===ot?dt.createElement(x):dt.createElementNS(Tt,x)}function le(){return this.ownerDocument.createElementNS(x.space,x.local)}return typeof x=="function"?x:(x=_.ns.qualify(x)).local?le:H}rt.insert=function(x,H){return x=_0(x),H=Z(H),this.select(function(){return this.insertBefore(x.apply(this,arguments),H.apply(this,arguments)||null)})},rt.remove=function(){return this.each(ha)};function ha(){var x=this.parentNode;x&&x.removeChild(this)}rt.data=function(x,H){var le=-1,dt=this.length,Tt,Nt;if(!arguments.length){for(x=new Array(dt=(Tt=this[0]).length);++le<dt;)(Nt=Tt[le])&&(x[le]=Nt.__data__);return x}function ci(Jp,N0){var P0,dm=Jp.length,Mm=N0.length,z0=Math.min(dm,Mm),sm=new Array(Mm),um=new Array(Mm),Sm=new Array(dm),Tm,fm;if(H){var _1=new X,i=new Array(dm),s;for(P0=-1;++P0<dm;)(Tm=Jp[P0])&&(_1.has(s=H.call(Tm,Tm.__data__,P0))?Sm[P0]=Tm:_1.set(s,Tm),i[P0]=s);for(P0=-1;++P0<Mm;)(Tm=_1.get(s=H.call(N0,fm=N0[P0],P0)))?Tm!==!0&&(sm[P0]=Tm,Tm.__data__=fm):um[P0]=Rp(fm),_1.set(s,!0);for(P0=-1;++P0<dm;)P0 in i&&_1.get(i[P0])!==!0&&(Sm[P0]=Jp[P0])}else{for(P0=-1;++P0<z0;)Tm=Jp[P0],fm=N0[P0],Tm?(Tm.__data__=fm,sm[P0]=Tm):um[P0]=Rp(fm);for(;P0<Mm;++P0)um[P0]=Rp(N0[P0]);for(;P0<dm;++P0)Sm[P0]=Jp[P0]}um.update=sm,um.parentNode=sm.parentNode=Sm.parentNode=Jp.parentNode,Fn.push(um),zp.push(sm),Yp.push(Sm)}var Fn=M0([]),zp=gt([]),Yp=gt([]);if(typeof x=="function")for(;++le<dt;)ci(Tt=this[le],x.call(Tt,Tt.parentNode.__data__,le));else for(;++le<dt;)ci(Tt=this[le],x);return zp.enter=function(){return Fn},zp.exit=function(){return Yp},zp};function Rp(x){return{__data__:x}}rt.datum=function(x){return arguments.length?this.property("__data__",x):this.property("__data__")},rt.filter=function(x){var H=[],le,dt,Tt;typeof x!="function"&&(x=Gt(x));for(var Nt=0,ci=this.length;Nt<ci;Nt++){H.push(le=[]),le.parentNode=(dt=this[Nt]).parentNode;for(var Fn=0,zp=dt.length;Fn<zp;Fn++)(Tt=dt[Fn])&&x.call(Tt,Tt.__data__,Fn,Nt)&&le.push(Tt)}return gt(H)};function Gt(x){return function(){return zt(this,x)}}rt.order=function(){for(var x=-1,H=this.length;++x<H;)for(var le=this[x],dt=le.length-1,Tt=le[dt],Nt;--dt>=0;)(Nt=le[dt])&&(Tt&&Tt!==Nt.nextSibling&&Tt.parentNode.insertBefore(Nt,Tt),Tt=Nt);return this},rt.sort=function(x){x=Gp.apply(this,arguments);for(var H=-1,le=this.length;++H<le;)this[H].sort(x);return this.order()};function Gp(x){return arguments.length||(x=O),function(H,le){return H&&le?x(H.__data__,le.__data__):!H-!le}}rt.each=function(x){return c0(this,function(H,le,dt){x.call(H,H.__data__,le,dt)})};function c0(x,H){for(var le=0,dt=x.length;le<dt;le++)for(var Tt=x[le],Nt=0,ci=Tt.length,Fn;Nt<ci;Nt++)(Fn=Tt[Nt])&&H(Fn,Nt,le);return x}rt.call=function(x){var H=m(arguments);return x.apply(H[0]=this,H),this},rt.empty=function(){return!this.node()},rt.node=function(){for(var x=0,H=this.length;x<H;x++)for(var le=this[x],dt=0,Tt=le.length;dt<Tt;dt++){var Nt=le[dt];if(Nt)return Nt}return null},rt.size=function(){var x=0;return c0(this,function(){++x}),x};function M0(x){return pt(x,I0),x}var I0=[];_.selection.enter=M0,_.selection.enter.prototype=I0,I0.append=rt.append,I0.empty=rt.empty,I0.node=rt.node,I0.call=rt.call,I0.size=rt.size,I0.select=function(x){for(var H=[],le,dt,Tt,Nt,ci,Fn=-1,zp=this.length;++Fn<zp;){Tt=(Nt=this[Fn]).update,H.push(le=[]),le.parentNode=Nt.parentNode;for(var Yp=-1,Jp=Nt.length;++Yp<Jp;)(ci=Nt[Yp])?(le.push(Tt[Yp]=dt=x.call(Nt.parentNode,ci.__data__,Yp,Fn)),dt.__data__=ci.__data__):le.push(null)}return gt(H)},I0.insert=function(x,H){return arguments.length<2&&(H=k0(this)),rt.insert.call(this,x,H)};function k0(x){var H,le;return function(dt,Tt,Nt){var ci=x[Nt].update,Fn=ci.length,zp;for(Nt!=le&&(le=Nt,H=0),Tt>=H&&(H=Tt+1);!(zp=ci[H])&&++H<Fn;);return zp}}_.select=function(x){var H;return typeof x=="string"?(H=[te(x,E)],H.parentNode=E.documentElement):(H=[x],H.parentNode=b(x)),gt([H])},_.selectAll=function(x){var H;return typeof x=="string"?(H=m(Et(x,E)),H.parentNode=E.documentElement):(H=m(x),H.parentNode=null),gt([H])},rt.on=function(x,H,le){var dt=arguments.length;if(dt<3){if(typeof x!="string"){dt<2&&(H=!1);for(le in x)this.each(V0(le,x[le],H));return this}if(dt<2)return(dt=this.node()["__on"+x])&&dt._;le=!1}return this.each(V0(x,H,le))};function V0(x,H,le){var dt="__on"+x,Tt=x.indexOf("."),Nt=W0;Tt>0&&(x=x.slice(0,Tt));var ci=$0.get(x);ci&&(x=ci,Nt=gm);function Fn(){var Jp=this[dt];Jp&&(this.removeEventListener(x,Jp,Jp.$),delete this[dt])}function zp(){var Jp=Nt(H,m(arguments));Fn.call(this),this.addEventListener(x,this[dt]=Jp,Jp.$=le),Jp._=H}function Yp(){var Jp=new RegExp("^__on([^.]+)"+_.requote(x)+"$"),N0;for(var P0 in this)if(N0=P0.match(Jp)){var dm=this[P0];this.removeEventListener(N0[1],dm,dm.$),delete this[P0]}}return Tt?H?zp:Fn:H?St:Yp}var $0=_.map({mouseenter:"mouseover",mouseleave:"mouseout"});E&&$0.forEach(function(x){"on"+x in E&&$0.remove(x)});function W0(x,H){return function(le){var dt=_.event;_.event=le,H[0]=this.__data__;try{x.apply(this,H)}finally{_.event=dt}}}function gm(x,H){var le=W0(x,H);return function(dt){var Tt=this,Nt=dt.relatedTarget;(!Nt||Nt!==Tt&&!(Nt.compareDocumentPosition(Tt)&8))&&le.call(Tt,dt)}}var F0,bm=0;function Dm(x){var H=".dragsuppress-"+ ++bm,le="click"+H,dt=_.select(w(x)).on("touchmove"+H,jt).on("dragstart"+H,jt).on("selectstart"+H,jt);if(F0==null&&(F0="onselectstart"in x?!1:Le(x.style,"userSelect")),F0){var Tt=b(x).style,Nt=Tt[F0];Tt[F0]="none"}return function(ci){if(dt.on(H,null),F0&&(Tt[F0]=Nt),ci){var Fn=function(){dt.on(le,null)};dt.on(le,function(){jt(),Fn()},!0),setTimeout(Fn,0)}}}_.mouse=function(x){return km(x,aa())};var vm=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function km(x,H){H.changedTouches&&(H=H.changedTouches[0]);var le=x.ownerSVGElement||x;if(le.createSVGPoint){var dt=le.createSVGPoint();if(vm<0){var Tt=w(x);if(Tt.scrollX||Tt.scrollY){le=_.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var Nt=le[0][0].getScreenCTM();vm=!(Nt.f||Nt.e),le.remove()}}return vm?(dt.x=H.pageX,dt.y=H.pageY):(dt.x=H.clientX,dt.y=H.clientY),dt=dt.matrixTransform(x.getScreenCTM().inverse()),[dt.x,dt.y]}var ci=x.getBoundingClientRect();return[H.clientX-ci.left-x.clientLeft,H.clientY-ci.top-x.clientTop]}_.touch=function(x,H,le){if(arguments.length<3&&(le=H,H=aa().changedTouches),H){for(var dt=0,Tt=H.length,Nt;dt<Tt;++dt)if((Nt=H[dt]).identifier===le)return km(x,Nt)}},_.behavior.drag=function(){var x=ca(Tt,"drag","dragstart","dragend"),H=null,le=Nt(St,_.mouse,w,"mousemove","mouseup"),dt=Nt(Yo,_.touch,vt,"touchmove","touchend");function Tt(){this.on("mousedown.drag",le).on("touchstart.drag",dt)}function Nt(ci,Fn,zp,Yp,Jp){return function(){var N0=this,P0=_.event.target.correspondingElement||_.event.target,dm=N0.parentNode,Mm=x.of(N0,arguments),z0=0,sm=ci(),um=".drag"+(sm==null?"":"-"+sm),Sm,Tm=_.select(zp(P0)).on(Yp+um,i).on(Jp+um,s),fm=Dm(P0),_1=Fn(dm,sm);H?(Sm=H.apply(N0,arguments),Sm=[Sm.x-_1[0],Sm.y-_1[1]]):Sm=[0,0],Mm({type:"dragstart"});function i(){var f=Fn(dm,sm),D,ve;f&&(D=f[0]-_1[0],ve=f[1]-_1[1],z0|=D|ve,_1=f,Mm({type:"drag",x:f[0]+Sm[0],y:f[1]+Sm[1],dx:D,dy:ve}))}function s(){Fn(dm,sm)&&(Tm.on(Yp+um,null).on(Jp+um,null),fm(z0),Mm({type:"dragend"}))}}}return Tt.origin=function(ci){return arguments.length?(H=ci,Tt):H},_.rebind(Tt,x,"on")};function Yo(){return _.event.changedTouches[0].identifier}_.touches=function(x,H){return arguments.length<2&&(H=aa().touches),H?m(H).map(function(le){var dt=km(x,le);return dt.identifier=le.identifier,dt}):[]};var qp=1e-6,Mt=qp*qp,Wt=Math.PI,xn=2*Wt,Fp=xn-qp,Bp=Wt/2,e0=Wt/180,o0=180/Wt;function C0(x,H,le){return(H[0]-x[0])*(le[1]-x[1])-(H[1]-x[1])*(le[0]-x[0])}function T0(x){return x>1?Bp:x<-1?-Bp:Math.asin(x)}function A0(x){return((x=Math.exp(x))-1/x)/2}function J0(x){return((x=Math.exp(x))+1/x)/2}function em(x){return((x=Math.exp(2*x))-1)/(x+1)}var tm=Math.SQRT2,Nm=2,o1=4;_.interpolateZoom=function(x,H){var le=x[0],dt=x[1],Tt=x[2],Nt=H[0],ci=H[1],Fn=H[2],zp=Nt-le,Yp=ci-dt,Jp=zp*zp+Yp*Yp,N0,P0;if(Jp<Mt)P0=Math.log(Fn/Tt)/tm,N0=function(Sm){return[le+Sm*zp,dt+Sm*Yp,Tt*Math.exp(tm*Sm*P0)]};else{var dm=Math.sqrt(Jp),Mm=(Fn*Fn-Tt*Tt+o1*Jp)/(2*Tt*Nm*dm),z0=(Fn*Fn-Tt*Tt-o1*Jp)/(2*Fn*Nm*dm),sm=Math.log(Math.sqrt(Mm*Mm+1)-Mm),um=Math.log(Math.sqrt(z0*z0+1)-z0);P0=(um-sm)/tm,N0=function(Sm){var Tm=Sm*P0,fm=J0(sm),_1=Tt/(Nm*dm)*(fm*em(tm*Tm+sm)-A0(sm));return[le+_1*zp,dt+_1*Yp,Tt*fm/J0(tm*Tm+sm)]}}return N0.duration=P0*1e3,N0},_.behavior.zoom=function(){var x={x:0,y:0,k:1},H,le,dt,Tt=[960,500],Nt=N1,ci=250,Fn=0,zp="mousedown.zoom",Yp="mousemove.zoom",Jp="mouseup.zoom",N0,P0="touchstart.zoom",dm,Mm=ca(Tm,"zoomstart","zoom","zoomend"),z0,sm,um,Sm;B1||(B1="onwheel"in E?(F1=function(){return-_.event.deltaY*(_.event.deltaMode?120:1)},"wheel"):"onmousewheel"in E?(F1=function(){return _.event.wheelDelta},"mousewheel"):(F1=function(){return-_.event.detail},"MozMousePixelScroll"));function Tm(wm){wm.on(zp,Zp).on(B1+".zoom",Pm).on("dblclick.zoom",Xm).on(P0,K0)}Tm.event=function(wm){wm.each(function(){var Am=Mm.of(this,arguments),Lm=x;Fx?_.select(this).transition().each("start.zoom",function(){x=this.__chart__||{x:0,y:0,k:1},ve(Am)}).tween("zoom:zoom",function(){var X1=Tt[0],gg=Tt[1],Yg=le?le[0]:X1/2,Rm=le?le[1]:gg/2,_m=_.interpolateZoom([(Yg-x.x)/x.k,(Rm-x.y)/x.k,X1/x.k],[(Yg-Lm.x)/Lm.k,(Rm-Lm.y)/Lm.k,X1/Lm.k]);return function(Um){var v1=_m(Um),Tg=X1/v1[2];this.__chart__=x={x:Yg-v1[0]*Tg,y:Rm-v1[1]*Tg,k:Tg},ft(Am)}}).each("interrupt.zoom",function(){Ci(Am)}).each("end.zoom",function(){Ci(Am)}):(this.__chart__=x,ve(Am),ft(Am),Ci(Am))})},Tm.translate=function(wm){return arguments.length?(x={x:+wm[0],y:+wm[1],k:x.k},D(),Tm):[x.x,x.y]},Tm.scale=function(wm){return arguments.length?(x={x:x.x,y:x.y,k:null},i(+wm),D(),Tm):x.k},Tm.scaleExtent=function(wm){return arguments.length?(Nt=wm==null?N1:[+wm[0],+wm[1]],Tm):Nt},Tm.center=function(wm){return arguments.length?(dt=wm&&[+wm[0],+wm[1]],Tm):dt},Tm.size=function(wm){return arguments.length?(Tt=wm&&[+wm[0],+wm[1]],Tm):Tt},Tm.duration=function(wm){return arguments.length?(ci=+wm,Tm):ci},Tm.x=function(wm){return arguments.length?(sm=wm,z0=wm.copy(),x={x:0,y:0,k:1},Tm):sm},Tm.y=function(wm){return arguments.length?(Sm=wm,um=wm.copy(),x={x:0,y:0,k:1},Tm):Sm};function fm(wm){return[(wm[0]-x.x)/x.k,(wm[1]-x.y)/x.k]}function _1(wm){return[wm[0]*x.k+x.x,wm[1]*x.k+x.y]}function i(wm){x.k=Math.max(Nt[0],Math.min(Nt[1],wm))}function s(wm,Am){Am=_1(Am),x.x+=wm[0]-Am[0],x.y+=wm[1]-Am[1]}function f(wm,Am,Lm,X1){wm.__chart__={x:x.x,y:x.y,k:x.k},i(Math.pow(2,X1)),s(le=Am,Lm),wm=_.select(wm),ci>0&&(wm=wm.transition().duration(ci)),wm.call(Tm.event)}function D(){sm&&sm.domain(z0.range().map(function(wm){return(wm-x.x)/x.k}).map(z0.invert)),Sm&&Sm.domain(um.range().map(function(wm){return(wm-x.y)/x.k}).map(um.invert))}function ve(wm){Fn++||wm({type:"zoomstart"})}function ft(wm){D(),wm({type:"zoom",scale:x.k,translate:[x.x,x.y]})}function Ci(wm){--Fn||(wm({type:"zoomend"}),le=null)}function Zp(){var wm=this,Am=Mm.of(wm,arguments),Lm=0,X1=_.select(w(wm)).on(Yp,Rm).on(Jp,_m),gg=fm(_.mouse(wm)),Yg=Dm(wm);_b.call(wm),ve(Am);function Rm(){Lm=1,s(_.mouse(wm),gg),ft(Am)}function _m(){X1.on(Yp,null).on(Jp,null),Yg(Lm),Ci(Am)}}function K0(){var wm=this,Am=Mm.of(wm,arguments),Lm={},X1=0,gg,Yg=".zoom-"+_.event.changedTouches[0].identifier,Rm="touchmove"+Yg,_m="touchend"+Yg,Um=[],v1=_.select(wm),Tg=Dm(wm);yg(),ve(Am),v1.on(zp,null).on(P0,yg);function Zg(){var pv=_.touches(wm);return gg=x.k,pv.forEach(function(py){py.identifier in Lm&&(Lm[py.identifier]=fm(py))}),pv}function yg(){var pv=_.event.target;_.select(pv).on(Rm,iv).on(_m,Av),Um.push(pv);for(var py=_.event.changedTouches,fx=0,e2=py.length;fx<e2;++fx)Lm[py[fx].identifier]=null;var Tx=Zg(),Mb=Date.now();if(Tx.length===1){if(Mb-dm<500){var L_=Tx[0];f(wm,L_,Lm[L_.identifier],Math.floor(Math.log(x.k)/Math.LN2)+1),jt()}dm=Mb}else if(Tx.length>1){var L_=Tx[0],X2=Tx[1],t5=L_[0]-X2[0],N5=L_[1]-X2[1];X1=t5*t5+N5*N5}}function iv(){var pv=_.touches(wm),py,fx,e2,Tx;_b.call(wm);for(var Mb=0,L_=pv.length;Mb<L_;++Mb,Tx=null)if(e2=pv[Mb],Tx=Lm[e2.identifier]){if(fx)break;py=e2,fx=Tx}if(Tx){var X2=(X2=e2[0]-py[0])*X2+(X2=e2[1]-py[1])*X2,t5=X1&&Math.sqrt(X2/X1);py=[(py[0]+e2[0])/2,(py[1]+e2[1])/2],fx=[(fx[0]+Tx[0])/2,(fx[1]+Tx[1])/2],i(t5*gg)}dm=null,s(py,fx),ft(Am)}function Av(){if(_.event.touches.length){for(var pv=_.event.changedTouches,py=0,fx=pv.length;py<fx;++py)delete Lm[pv[py].identifier];for(var e2 in Lm)return void Zg()}_.selectAll(Um).on(Yg,null),v1.on(zp,Zp).on(P0,K0),Tg(),Ci(Am)}}function Pm(){var wm=Mm.of(this,arguments);N0?clearTimeout(N0):(_b.call(this),H=fm(le=dt||_.mouse(this)),ve(wm)),N0=setTimeout(function(){N0=null,Ci(wm)},50),jt(),i(Math.pow(2,F1()*.002)*x.k),s(le,H),ft(wm)}function Xm(){var wm=_.mouse(this),Am=Math.log(x.k)/Math.LN2;f(this,wm,fm(wm),_.event.shiftKey?Math.ceil(Am)-1:Math.floor(Am)+1)}return _.rebind(Tm,Mm,"on")};var N1=[0,1/0],F1,B1;_.color=u1;function u1(){}u1.prototype.toString=function(){return this.rgb()+""},_.hsl=zm;function zm(x,H,le){return this instanceof zm?(this.h=+x,this.s=+H,void(this.l=+le)):arguments.length<2?x instanceof zm?new zm(x.h,x.s,x.l):Qp(""+x,g0,zm):new zm(x,H,le)}var R1=zm.prototype=new u1;R1.brighter=function(x){return x=Math.pow(.7,arguments.length?x:1),new zm(this.h,this.s,this.l/x)},R1.darker=function(x){return x=Math.pow(.7,arguments.length?x:1),new zm(this.h,this.s,x*this.l)},R1.rgb=function(){return z1(this.h,this.s,this.l)};function z1(x,H,le){var dt,Tt;x=isNaN(x)?0:(x%=360)<0?x+360:x,H=isNaN(H)||H<0?0:H>1?1:H,le=le<0?0:le>1?1:le,Tt=le<=.5?le*(1+H):le+H-le*H,dt=2*le-Tt;function Nt(Fn){return Fn>360?Fn-=360:Fn<0&&(Fn+=360),Fn<60?dt+(Tt-dt)*Fn/60:Fn<180?Tt:Fn<240?dt+(Tt-dt)*(240-Fn)/60:dt}function ci(Fn){return Math.round(Nt(Fn)*255)}return new $m(ci(x+120),ci(x),ci(x-120))}_.hcl=E1;function E1(x,H,le){return this instanceof E1?(this.h=+x,this.c=+H,void(this.l=+le)):arguments.length<2?x instanceof E1?new E1(x.h,x.c,x.l):x instanceof s1?Ug(x.l,x.a,x.b):Ug((x=$p((x=_.rgb(x)).r,x.g,x.b)).l,x.a,x.b):new E1(x,H,le)}var g1=E1.prototype=new u1;g1.brighter=function(x){return new E1(this.h,this.c,Math.min(100,this.l+Q1*(arguments.length?x:1)))},g1.darker=function(x){return new E1(this.h,this.c,Math.max(0,this.l-Q1*(arguments.length?x:1)))},g1.rgb=function(){return w1(this.h,this.c,this.l).rgb()};function w1(x,H,le){return isNaN(x)&&(x=0),isNaN(H)&&(H=0),new s1(le,Math.cos(x*=e0)*H,Math.sin(x)*H)}_.lab=s1;function s1(x,H,le){return this instanceof s1?(this.l=+x,this.a=+H,void(this.b=+le)):arguments.length<2?x instanceof s1?new s1(x.l,x.a,x.b):x instanceof E1?w1(x.h,x.c,x.l):$p((x=$m(x)).r,x.g,x.b):new s1(x,H,le)}var Q1=18,og=.95047,P1=1,fg=1.08883,bg=s1.prototype=new u1;bg.brighter=function(x){return new s1(Math.min(100,this.l+Q1*(arguments.length?x:1)),this.a,this.b)},bg.darker=function(x){return new s1(Math.max(0,this.l-Q1*(arguments.length?x:1)),this.a,this.b)},bg.rgb=function(){return Cg(this.l,this.a,this.b)};function Cg(x,H,le){var dt=(x+16)/116,Tt=dt+H/500,Nt=dt-le/200;return Tt=rg(Tt)*og,dt=rg(dt)*P1,Nt=rg(Nt)*fg,new $m(dg(3.2404542*Tt-1.5371385*dt-.4985314*Nt),dg(-.969266*Tt+1.8760108*dt+.041556*Nt),dg(.0556434*Tt-.2040259*dt+1.0572252*Nt))}function Ug(x,H,le){return x>0?new E1(Math.atan2(le,H)*o0,Math.sqrt(H*H+le*le),x):new E1(NaN,NaN,x)}function rg(x){return x>.206893034?x*x*x:(x-4/29)/7.787037}function Ng(x){return x>.008856?Math.pow(x,1/3):7.787037*x+4/29}function dg(x){return Math.round(255*(x<=.00304?12.92*x:1.055*Math.pow(x,1/2.4)-.055))}_.rgb=$m;function $m(x,H,le){return this instanceof $m?(this.r=~~x,this.g=~~H,void(this.b=~~le)):arguments.length<2?x instanceof $m?new $m(x.r,x.g,x.b):Qp(""+x,$m,z1):new $m(x,H,le)}function Xg(x){return new $m(x>>16,x>>8&255,x&255)}function Lt(x){return Xg(x)+""}var At=$m.prototype=new u1;At.brighter=function(x){x=Math.pow(.7,arguments.length?x:1);var H=this.r,le=this.g,dt=this.b,Tt=30;return!H&&!le&&!dt?new $m(Tt,Tt,Tt):(H&&H<Tt&&(H=Tt),le&&le<Tt&&(le=Tt),dt&&dt<Tt&&(dt=Tt),new $m(Math.min(255,H/x),Math.min(255,le/x),Math.min(255,dt/x)))},At.darker=function(x){return x=Math.pow(.7,arguments.length?x:1),new $m(x*this.r,x*this.g,x*this.b)},At.hsl=function(){return g0(this.r,this.g,this.b)},At.toString=function(){return"#"+Wp(this.r)+Wp(this.g)+Wp(this.b)};function Wp(x){return x<16?"0"+Math.max(0,x).toString(16):Math.min(255,x).toString(16)}function Qp(x,H,le){var dt=0,Tt=0,Nt=0,ci,Fn,zp;if(ci=/([a-z]+)\((.*)\)/.exec(x=x.toLowerCase()),ci)switch(Fn=ci[2].split(","),ci[1]){case"hsl":return le(parseFloat(Fn[0]),parseFloat(Fn[1])/100,parseFloat(Fn[2])/100);case"rgb":return H(b0(Fn[0]),b0(Fn[1]),b0(Fn[2]))}return(zp=s0.get(x))?H(zp.r,zp.g,zp.b):(x!=null&&x.charAt(0)==="#"&&!isNaN(zp=parseInt(x.slice(1),16))&&(x.length===4?(dt=(zp&3840)>>4,dt=dt>>4|dt,Tt=zp&240,Tt=Tt>>4|Tt,Nt=zp&15,Nt=Nt<<4|Nt):x.length===7&&(dt=(zp&16711680)>>16,Tt=(zp&65280)>>8,Nt=zp&255)),H(dt,Tt,Nt))}function g0(x,H,le){var dt=Math.min(x/=255,H/=255,le/=255),Tt=Math.max(x,H,le),Nt=Tt-dt,ci,Fn,zp=(Tt+dt)/2;return Nt?(Fn=zp<.5?Nt/(Tt+dt):Nt/(2-Tt-dt),x==Tt?ci=(H-le)/Nt+(H<le?6:0):H==Tt?ci=(le-x)/Nt+2:ci=(x-H)/Nt+4,ci*=60):(ci=NaN,Fn=zp>0&&zp<1?0:ci),new zm(ci,Fn,zp)}function $p(x,H,le){x=Xp(x),H=Xp(H),le=Xp(le);var dt=Ng((.4124564*x+.3575761*H+.1804375*le)/og),Tt=Ng((.2126729*x+.7151522*H+.072175*le)/P1),Nt=Ng((.0193339*x+.119192*H+.9503041*le)/fg);return s1(116*Tt-16,500*(dt-Tt),200*(Tt-Nt))}function Xp(x){return(x/=255)<=.04045?x/12.92:Math.pow((x+.055)/1.055,2.4)}function b0(x){var H=parseFloat(x);return x.charAt(x.length-1)==="%"?Math.round(H*2.55):H}var s0=_.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});s0.forEach(function(x,H){s0.set(x,Xg(H))});function O0(x){return typeof x=="function"?x:function(){return x}}_.functor=O0,_.xhr=U0(vt);function U0(x){return function(H,le,dt){return arguments.length===2&&typeof le=="function"&&(dt=le,le=null),mm(H,le,x,dt)}}function mm(x,H,le,dt){var Tt={},Nt=_.dispatch("beforesend","progress","load","error"),ci={},Fn=new XMLHttpRequest,zp=null;self.XDomainRequest&&!("withCredentials"in Fn)&&/^(http(s)?:)?\/\//.test(x)&&(Fn=new XDomainRequest),"onload"in Fn?Fn.onload=Fn.onerror=Yp:Fn.onreadystatechange=function(){Fn.readyState>3&&Yp()};function Yp(){var Jp=Fn.status,N0;if(!Jp&&qm(Fn)||Jp>=200&&Jp<300||Jp===304){try{N0=le.call(Tt,Fn)}catch(P0){Nt.error.call(Tt,P0);return}Nt.load.call(Tt,N0)}else Nt.error.call(Tt,Fn)}return Fn.onprogress=function(Jp){var N0=_.event;_.event=Jp;try{Nt.progress.call(Tt,Fn)}finally{_.event=N0}},Tt.header=function(Jp,N0){return Jp=(Jp+"").toLowerCase(),arguments.length<2?ci[Jp]:(N0==null?delete ci[Jp]:ci[Jp]=N0+"",Tt)},Tt.mimeType=function(Jp){return arguments.length?(H=Jp==null?null:Jp+"",Tt):H},Tt.responseType=function(Jp){return arguments.length?(zp=Jp,Tt):zp},Tt.response=function(Jp){return le=Jp,Tt},["get","post"].forEach(function(Jp){Tt[Jp]=function(){return Tt.send.apply(Tt,[Jp].concat(m(arguments)))}}),Tt.send=function(Jp,N0,P0){if(arguments.length===2&&typeof N0=="function"&&(P0=N0,N0=null),Fn.open(Jp,x,!0),H!=null&&!("accept"in ci)&&(ci.accept=H+",*/*"),Fn.setRequestHeader)for(var dm in ci)Fn.setRequestHeader(dm,ci[dm]);return H!=null&&Fn.overrideMimeType&&Fn.overrideMimeType(H),zp!=null&&(Fn.responseType=zp),P0!=null&&Tt.on("error",P0).on("load",function(Mm){P0(null,Mm)}),Nt.beforesend.call(Tt,Fn),Fn.send(N0??null),Tt},Tt.abort=function(){return Fn.abort(),Tt},_.rebind(Tt,Nt,"on"),dt==null?Tt:Tt.get(Jm(dt))}function Jm(x){return x.length===1?function(H,le){x(H==null?le:null)}:x}function qm(x){var H=x.responseType;return H&&H!=="text"?x.response:x.responseText}_.dsv=function(x,H){var le=new RegExp('["'+x+`
]`),dt=x.charCodeAt(0);function Tt(Yp,Jp,N0){arguments.length<3&&(N0=Jp,Jp=null);var P0=mm(Yp,H,Jp==null?Nt:ci(Jp),N0);return P0.row=function(dm){return arguments.length?P0.response((Jp=dm)==null?Nt:ci(dm)):Jp},P0}function Nt(Yp){return Tt.parse(Yp.responseText)}function ci(Yp){return function(Jp){return Tt.parse(Jp.responseText,Yp)}}Tt.parse=function(Yp,Jp){var N0;return Tt.parseRows(Yp,function(P0,dm){if(N0)return N0(P0,dm-1);var Mm=function(z0){for(var sm={},um=P0.length,Sm=0;Sm<um;++Sm)sm[P0[Sm]]=z0[Sm];return sm};N0=Jp?function(z0,sm){return Jp(Mm(z0),sm)}:Mm})},Tt.parseRows=function(Yp,Jp){var N0={},P0={},dm=[],Mm=Yp.length,z0=0,sm=0,um,Sm;function Tm(){if(z0>=Mm)return P0;if(Sm)return Sm=!1,N0;var _1=z0;if(Yp.charCodeAt(_1)===34){for(var i=_1;i++<Mm;)if(Yp.charCodeAt(i)===34){if(Yp.charCodeAt(i+1)!==34)break;++i}z0=i+2;var s=Yp.charCodeAt(i+1);return s===13?(Sm=!0,Yp.charCodeAt(i+2)===10&&++z0):s===10&&(Sm=!0),Yp.slice(_1+1,i).replace(/""/g,'"')}for(;z0<Mm;){var s=Yp.charCodeAt(z0++),f=1;if(s===10)Sm=!0;else if(s===13)Sm=!0,Yp.charCodeAt(z0)===10&&(++z0,++f);else if(s!==dt)continue;return Yp.slice(_1,z0-f)}return Yp.slice(_1)}for(;(um=Tm())!==P0;){for(var fm=[];um!==N0&&um!==P0;)fm.push(um),um=Tm();Jp&&(fm=Jp(fm,sm++))==null||dm.push(fm)}return dm},Tt.format=function(Yp){if(Array.isArray(Yp[0]))return Tt.formatRows(Yp);var Jp=new ut,N0=[];return Yp.forEach(function(P0){for(var dm in P0)Jp.has(dm)||N0.push(Jp.add(dm))}),[N0.map(zp).join(x)].concat(Yp.map(function(P0){return N0.map(function(dm){return zp(P0[dm])}).join(x)})).join(`
`)},Tt.formatRows=function(Yp){return Yp.map(Fn).join(`
`)};function Fn(Yp){return Yp.map(zp).join(x)}function zp(Yp){return le.test(Yp)?'"'+Yp.replace(/\"/g,'""')+'"':Yp}return Tt},_.csv=_.dsv(",","text/csv"),_.tsv=_.dsv("	","text/tab-separated-values");var b1,jm,e1,k1,Pg=this[Le(this,"requestAnimationFrame")]||function(x){setTimeout(x,17)};_.timer=function(){H1.apply(this,arguments)};function H1(x,H,le){var dt=arguments.length;dt<2&&(H=0),dt<3&&(le=Date.now());var Tt=le+H,Nt={c:x,t:Tt,n:null};return jm?jm.n=Nt:b1=Nt,jm=Nt,e1||(k1=clearTimeout(k1),e1=1,Pg(ov)),Nt}function ov(){var x=mg(),H=cv()-x;H>24?(isFinite(H)&&(clearTimeout(k1),k1=setTimeout(ov,H)),e1=0):(e1=1,Pg(ov))}_.timer.flush=function(){mg(),cv()};function mg(){for(var x=Date.now(),H=b1;H;)x>=H.t&&H.c(x-H.t)&&(H.c=null),H=H.n;return x}function cv(){for(var x,H=b1,le=1/0;H;)H.c?(H.t<le&&(le=H.t),H=(x=H).n):H=x?x.n=H.n:b1=H.n;return jm=x,le}_.round=function(x,H){return H?Math.round(x*(H=Math.pow(10,H)))/H:Math.round(x)},_.geom={};function Eg(x){return x[0]}function Qg(x){return x[1]}_.geom.hull=function(x){var H=Eg,le=Qg;if(arguments.length)return dt(x);function dt(Tt){if(Tt.length<3)return[];var Nt=O0(H),ci=O0(le),Fn,zp=Tt.length,Yp=[],Jp=[];for(Fn=0;Fn<zp;Fn++)Yp.push([+Nt.call(this,Tt[Fn],Fn),+ci.call(this,Tt[Fn],Fn),Fn]);for(Yp.sort(vg),Fn=0;Fn<zp;Fn++)Jp.push([Yp[Fn][0],-Yp[Fn][1]]);var N0=lv(Yp),P0=lv(Jp),dm=P0[0]===N0[0],Mm=P0[P0.length-1]===N0[N0.length-1],z0=[];for(Fn=N0.length-1;Fn>=0;--Fn)z0.push(Tt[Yp[N0[Fn]][2]]);for(Fn=+dm;Fn<P0.length-Mm;++Fn)z0.push(Tt[Yp[P0[Fn]][2]]);return z0}return dt.x=function(Tt){return arguments.length?(H=Tt,dt):H},dt.y=function(Tt){return arguments.length?(le=Tt,dt):le},dt};function lv(x){for(var H=x.length,le=[0,1],dt=2,Tt=2;Tt<H;Tt++){for(;dt>1&&C0(x[le[dt-2]],x[le[dt-1]],x[Tt])<=0;)--dt;le[dt++]=Tt}return le.slice(0,dt)}function vg(x,H){return x[0]-H[0]||x[1]-H[1]}_.geom.polygon=function(x){return pt(x,Fv),x};var Fv=_.geom.polygon.prototype=[];Fv.area=function(){for(var x=-1,H=this.length,le,dt=this[H-1],Tt=0;++x<H;)le=dt,dt=this[x],Tt+=le[1]*dt[0]-le[0]*dt[1];return Tt*.5},Fv.centroid=function(x){var H=-1,le=this.length,dt=0,Tt=0,Nt,ci=this[le-1],Fn;for(arguments.length||(x=-1/(6*this.area()));++H<le;)Nt=ci,ci=this[H],Fn=Nt[0]*ci[1]-ci[0]*Nt[1],dt+=(Nt[0]+ci[0])*Fn,Tt+=(Nt[1]+ci[1])*Fn;return[dt*x,Tt*x]},Fv.clip=function(x){for(var H,le=xv(x),dt=-1,Tt=this.length-xv(this),Nt,ci,Fn=this[Tt-1],zp,Yp,Jp;++dt<Tt;){for(H=x.slice(),x.length=0,zp=this[dt],Yp=H[(ci=H.length-le)-1],Nt=-1;++Nt<ci;)Jp=H[Nt],wv(Jp,Fn,zp)?(wv(Yp,Fn,zp)||x.push(Lg(Yp,Jp,Fn,zp)),x.push(Jp)):wv(Yp,Fn,zp)&&x.push(Lg(Yp,Jp,Fn,zp)),Yp=Jp;le&&x.push(x[0]),Fn=zp}return x};function wv(x,H,le){return(le[0]-H[0])*(x[1]-H[1])<(le[1]-H[1])*(x[0]-H[0])}function Lg(x,H,le,dt){var Tt=x[0],Nt=le[0],ci=H[0]-Tt,Fn=dt[0]-Nt,zp=x[1],Yp=le[1],Jp=H[1]-zp,N0=dt[1]-Yp,P0=(Fn*(zp-Yp)-N0*(Tt-Nt))/(N0*ci-Fn*Jp);return[Tt+P0*ci,zp+P0*Jp]}function xv(x){var H=x[0],le=x[x.length-1];return!(H[0]-le[0]||H[1]-le[1])}var ev,sv,ry,zv=[],Vg,tv,Wg=[];function rv(){_v(this),this.edge=this.site=this.circle=null}function Bv(x){var H=zv.pop()||new rv;return H.site=x,H}function Kv(x){dy(x),ry.remove(x),zv.push(x),_v(x)}function Ov(x){var H=x.circle,le=H.x,dt=H.cy,Tt={x:le,y:dt},Nt=x.P,ci=x.N,Fn=[x];Kv(x);for(var zp=Nt;zp.circle&&M(le-zp.circle.x)<qp&&M(dt-zp.circle.cy)<qp;)Nt=zp.P,Fn.unshift(zp),Kv(zp),zp=Nt;Fn.unshift(zp),dy(zp);for(var Yp=ci;Yp.circle&&M(le-Yp.circle.x)<qp&&M(dt-Yp.circle.cy)<qp;)ci=Yp.N,Fn.push(Yp),Kv(Yp),Yp=ci;Fn.push(Yp),dy(Yp);var Jp=Fn.length,N0;for(N0=1;N0<Jp;++N0)Yp=Fn[N0],zp=Fn[N0-1],Rg(Yp.edge,zp.site,Yp.site,Tt);zp=Fn[0],Yp=Fn[Jp-1],Yp.edge=hv(zp.site,Yp.site,null,Tt),hy(zp),hy(Yp)}function ny(x){for(var H=x.x,le=x.y,dt,Tt,Nt,ci,Fn=ry._;Fn;)if(Nt=oy(Fn,le)-H,Nt>qp)Fn=Fn.L;else if(ci=H-Gv(Fn,le),ci>qp){if(!Fn.R){dt=Fn;break}Fn=Fn.R}else{Nt>-qp?(dt=Fn.P,Tt=Fn):ci>-qp?(dt=Fn,Tt=Fn.N):dt=Tt=Fn;break}var zp=Bv(x);if(ry.insert(dt,zp),!(!dt&&!Tt)){if(dt===Tt){dy(dt),Tt=Bv(dt.site),ry.insert(zp,Tt),zp.edge=Tt.edge=hv(dt.site,zp.site),hy(dt),hy(Tt);return}if(!Tt){zp.edge=hv(dt.site,zp.site);return}dy(dt),dy(Tt);var Yp=dt.site,Jp=Yp.x,N0=Yp.y,P0=x.x-Jp,dm=x.y-N0,Mm=Tt.site,z0=Mm.x-Jp,sm=Mm.y-N0,um=2*(P0*sm-dm*z0),Sm=P0*P0+dm*dm,Tm=z0*z0+sm*sm,fm={x:(sm*Sm-dm*Tm)/um+Jp,y:(P0*Tm-z0*Sm)/um+N0};Rg(Tt.edge,Yp,Mm,fm),zp.edge=hv(Yp,x,null,fm),Tt.edge=hv(x,Mm,null,fm),hy(dt),hy(Tt)}}function oy(x,H){var le=x.site,dt=le.x,Tt=le.y,Nt=Tt-H;if(!Nt)return dt;var ci=x.P;if(!ci)return-1/0;le=ci.site;var Fn=le.x,zp=le.y,Yp=zp-H;if(!Yp)return Fn;var Jp=Fn-dt,N0=1/Nt-1/Yp,P0=Jp/Yp;return N0?(-P0+Math.sqrt(P0*P0-2*N0*(Jp*Jp/(-2*Yp)-zp+Yp/2+Tt-Nt/2)))/N0+dt:(dt+Fn)/2}function Gv(x,H){var le=x.N;if(le)return oy(le,H);var dt=x.site;return dt.y===H?dt.x:1/0}function nv(x){this.site=x,this.edges=[]}nv.prototype.prepare=function(){for(var x=this.edges,H=x.length,le;H--;)le=x[H].edge,(!le.b||!le.a)&&x.splice(H,1);return x.sort(cy),x.length};function My(x){for(var H=x[0][0],le=x[1][0],dt=x[0][1],Tt=x[1][1],Nt,ci,Fn,zp,Yp=sv,Jp=Yp.length,N0,P0,dm,Mm,z0,sm;Jp--;)if(N0=Yp[Jp],!(!N0||!N0.prepare()))for(dm=N0.edges,Mm=dm.length,P0=0;P0<Mm;)sm=dm[P0].end(),Fn=sm.x,zp=sm.y,z0=dm[++P0%Mm].start(),Nt=z0.x,ci=z0.y,(M(Fn-Nt)>qp||M(zp-ci)>qp)&&(dm.splice(P0,0,new zg(Dg(N0.site,sm,M(Fn-H)<qp&&Tt-zp>qp?{x:H,y:M(Nt-H)<qp?ci:Tt}:M(zp-Tt)<qp&&le-Fn>qp?{x:M(ci-Tt)<qp?Nt:le,y:Tt}:M(Fn-le)<qp&&zp-dt>qp?{x:le,y:M(Nt-le)<qp?ci:dt}:M(zp-dt)<qp&&Fn-H>qp?{x:M(ci-dt)<qp?Nt:H,y:dt}:null),N0.site,null)),++Mm)}function cy(x,H){return H.angle-x.angle}function Dy(){_v(this),this.x=this.y=this.arc=this.site=this.cy=null}function hy(x){var H=x.P,le=x.N;if(!(!H||!le)){var dt=H.site,Tt=x.site,Nt=le.site;if(dt!==Nt){var ci=Tt.x,Fn=Tt.y,zp=dt.x-ci,Yp=dt.y-Fn,Jp=Nt.x-ci,N0=Nt.y-Fn,P0=2*(zp*N0-Yp*Jp);if(!(P0>=-Mt)){var dm=zp*zp+Yp*Yp,Mm=Jp*Jp+N0*N0,z0=(N0*dm-Yp*Mm)/P0,sm=(zp*Mm-Jp*dm)/P0,N0=sm+Fn,um=Wg.pop()||new Dy;um.arc=x,um.site=Tt,um.x=z0+ci,um.y=N0+Math.sqrt(z0*z0+sm*sm),um.cy=N0,x.circle=um;for(var Sm=null,Tm=tv._;Tm;)if(um.y<Tm.y||um.y===Tm.y&&um.x<=Tm.x)if(Tm.L)Tm=Tm.L;else{Sm=Tm.P;break}else if(Tm.R)Tm=Tm.R;else{Sm=Tm;break}tv.insert(Sm,um),Sm||(Vg=um)}}}}function dy(x){var H=x.circle;H&&(H.P||(Vg=H.N),tv.remove(H),Wg.push(H),_v(H),x.circle=null)}function jy(x,H,le,dt){return function(Tt){var Nt=Tt.a,ci=Tt.b,Fn=Nt.x,zp=Nt.y,Yp=ci.x,Jp=ci.y,N0=0,P0=1,dm=Yp-Fn,Mm=Jp-zp,z0;if(z0=x-Fn,!(!dm&&z0>0)){if(z0/=dm,dm<0){if(z0<N0)return;z0<P0&&(P0=z0)}else if(dm>0){if(z0>P0)return;z0>N0&&(N0=z0)}if(z0=le-Fn,!(!dm&&z0<0)){if(z0/=dm,dm<0){if(z0>P0)return;z0>N0&&(N0=z0)}else if(dm>0){if(z0<N0)return;z0<P0&&(P0=z0)}if(z0=H-zp,!(!Mm&&z0>0)){if(z0/=Mm,Mm<0){if(z0<N0)return;z0<P0&&(P0=z0)}else if(Mm>0){if(z0>P0)return;z0>N0&&(N0=z0)}if(z0=dt-zp,!(!Mm&&z0<0)){if(z0/=Mm,Mm<0){if(z0>P0)return;z0>N0&&(N0=z0)}else if(Mm>0){if(z0<N0)return;z0<P0&&(P0=z0)}return N0>0&&(Tt.a={x:Fn+N0*dm,y:zp+N0*Mm}),P0<1&&(Tt.b={x:Fn+P0*dm,y:zp+P0*Mm}),Tt}}}}}}function Fy(x){for(var H=ev,le=jy(x[0][0],x[0][1],x[1][0],x[1][1]),dt=H.length,Tt;dt--;)Tt=H[dt],(!wy(Tt,x)||!le(Tt)||M(Tt.a.x-Tt.b.x)<qp&&M(Tt.a.y-Tt.b.y)<qp)&&(Tt.a=Tt.b=null,H.splice(dt,1))}function wy(x,H){var le=x.b;if(le)return!0;var dt=x.a,Tt=H[0][0],Nt=H[1][0],ci=H[0][1],Fn=H[1][1],zp=x.l,Yp=x.r,Jp=zp.x,N0=zp.y,P0=Yp.x,dm=Yp.y,Mm=(Jp+P0)/2,z0=(N0+dm)/2,sm,um;if(dm===N0){if(Mm<Tt||Mm>=Nt)return;if(Jp>P0){if(!dt)dt={x:Mm,y:ci};else if(dt.y>=Fn)return;le={x:Mm,y:Fn}}else{if(!dt)dt={x:Mm,y:Fn};else if(dt.y<ci)return;le={x:Mm,y:ci}}}else if(sm=(Jp-P0)/(dm-N0),um=z0-sm*Mm,sm<-1||sm>1)if(Jp>P0){if(!dt)dt={x:(ci-um)/sm,y:ci};else if(dt.y>=Fn)return;le={x:(Fn-um)/sm,y:Fn}}else{if(!dt)dt={x:(Fn-um)/sm,y:Fn};else if(dt.y<ci)return;le={x:(ci-um)/sm,y:ci}}else if(N0<dm){if(!dt)dt={x:Tt,y:sm*Tt+um};else if(dt.x>=Nt)return;le={x:Nt,y:sm*Nt+um}}else{if(!dt)dt={x:Nt,y:sm*Nt+um};else if(dt.x<Tt)return;le={x:Tt,y:sm*Tt+um}}return x.a=dt,x.b=le,!0}function $y(x,H){this.l=x,this.r=H,this.a=this.b=null}function hv(x,H,le,dt){var Tt=new $y(x,H);return ev.push(Tt),le&&Rg(Tt,x,H,le),dt&&Rg(Tt,H,x,dt),sv[x.i].edges.push(new zg(Tt,x,H)),sv[H.i].edges.push(new zg(Tt,H,x)),Tt}function Dg(x,H,le){var dt=new $y(x,null);return dt.a=H,dt.b=le,ev.push(dt),dt}function Rg(x,H,le,dt){!x.a&&!x.b?(x.a=dt,x.l=H,x.r=le):x.l===le?x.b=dt:x.a=dt}function zg(x,H,le){var dt=x.a,Tt=x.b;this.edge=x,this.site=H,this.angle=le?Math.atan2(le.y-H.y,le.x-H.x):x.l===H?Math.atan2(Tt.x-dt.x,dt.y-Tt.y):Math.atan2(dt.x-Tt.x,Tt.y-dt.y)}zg.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};function av(){this._=null}function _v(x){x.U=x.C=x.L=x.R=x.P=x.N=null}av.prototype={insert:function(x,H){var le,dt,Tt;if(x){if(H.P=x,H.N=x.N,x.N&&(x.N.P=H),x.N=H,x.R){for(x=x.R;x.L;)x=x.L;x.L=H}else x.R=H;le=x}else this._?(x=xx(this._),H.P=null,H.N=x,x.P=x.L=H,le=x):(H.P=H.N=null,this._=H,le=null);for(H.L=H.R=null,H.U=le,H.C=!0,x=H;le&&le.C;)dt=le.U,le===dt.L?(Tt=dt.R,Tt&&Tt.C?(le.C=Tt.C=!1,dt.C=!0,x=dt):(x===le.R&&(fv(this,le),x=le,le=x.U),le.C=!1,dt.C=!0,by(this,dt))):(Tt=dt.L,Tt&&Tt.C?(le.C=Tt.C=!1,dt.C=!0,x=dt):(x===le.L&&(by(this,le),x=le,le=x.U),le.C=!1,dt.C=!0,fv(this,dt))),le=x.U;this._.C=!1},remove:function(x){x.N&&(x.N.P=x.P),x.P&&(x.P.N=x.N),x.N=x.P=null;var H=x.U,le,dt=x.L,Tt=x.R,Nt,ci;if(dt?Tt?Nt=xx(Tt):Nt=dt:Nt=Tt,H?H.L===x?H.L=Nt:H.R=Nt:this._=Nt,dt&&Tt?(ci=Nt.C,Nt.C=x.C,Nt.L=dt,dt.U=Nt,Nt!==Tt?(H=Nt.U,Nt.U=x.U,x=Nt.R,H.L=x,Nt.R=Tt,Tt.U=Nt):(Nt.U=H,H=Nt,x=Nt.R)):(ci=x.C,x=Nt),x&&(x.U=H),!ci){if(x&&x.C){x.C=!1;return}do{if(x===this._)break;if(x===H.L){if(le=H.R,le.C&&(le.C=!1,H.C=!0,fv(this,H),le=H.R),le.L&&le.L.C||le.R&&le.R.C){(!le.R||!le.R.C)&&(le.L.C=!1,le.C=!0,by(this,le),le=H.R),le.C=H.C,H.C=le.R.C=!1,fv(this,H),x=this._;break}}else if(le=H.L,le.C&&(le.C=!1,H.C=!0,by(this,H),le=H.L),le.L&&le.L.C||le.R&&le.R.C){(!le.L||!le.L.C)&&(le.R.C=!1,le.C=!0,fv(this,le),le=H.L),le.C=H.C,H.C=le.L.C=!1,by(this,H),x=this._;break}le.C=!0,x=H,H=H.U}while(!x.C);x&&(x.C=!1)}}};function fv(x,H){var le=H,dt=H.R,Tt=le.U;Tt?Tt.L===le?Tt.L=dt:Tt.R=dt:x._=dt,dt.U=Tt,le.U=dt,le.R=dt.L,le.R&&(le.R.U=le),dt.L=le}function by(x,H){var le=H,dt=H.L,Tt=le.U;Tt?Tt.L===le?Tt.L=dt:Tt.R=dt:x._=dt,dt.U=Tt,le.U=dt,le.L=dt.R,le.L&&(le.L.U=le),dt.R=le}function xx(x){for(;x.L;)x=x.L;return x}function zy(x,H){var le=x.sort(sy).pop(),dt,Tt,Nt;for(ev=[],sv=new Array(x.length),ry=new av,tv=new av;;)if(Nt=Vg,le&&(!Nt||le.y<Nt.y||le.y===Nt.y&&le.x<Nt.x))(le.x!==dt||le.y!==Tt)&&(sv[le.i]=new nv(le),ny(le),dt=le.x,Tt=le.y),le=x.pop();else if(Nt)Ov(Nt.arc);else break;H&&(Fy(H),My(H));var ci={cells:sv,edges:ev};return ry=tv=ev=sv=null,ci}function sy(x,H){return H.y-x.y||H.x-x.x}_.geom.voronoi=function(x){var H=Eg,le=Qg,dt=H,Tt=le,Nt=Vy;if(x)return ci(x);function ci(zp){var Yp=new Array(zp.length),Jp=Nt[0][0],N0=Nt[0][1],P0=Nt[1][0],dm=Nt[1][1];return zy(Fn(zp),Nt).cells.forEach(function(Mm,z0){var sm=Mm.edges,um=Mm.site,Sm=Yp[z0]=sm.length?sm.map(function(Tm){var fm=Tm.start();return[fm.x,fm.y]}):um.x>=Jp&&um.x<=P0&&um.y>=N0&&um.y<=dm?[[Jp,dm],[P0,dm],[P0,N0],[Jp,N0]]:[];Sm.point=zp[z0]}),Yp}function Fn(zp){return zp.map(function(Yp,Jp){return{x:Math.round(dt(Yp,Jp)/qp)*qp,y:Math.round(Tt(Yp,Jp)/qp)*qp,i:Jp}})}return ci.links=function(zp){return zy(Fn(zp)).edges.filter(function(Yp){return Yp.l&&Yp.r}).map(function(Yp){return{source:zp[Yp.l.i],target:zp[Yp.r.i]}})},ci.triangles=function(zp){var Yp=[];return zy(Fn(zp)).cells.forEach(function(Jp,N0){for(var P0=Jp.site,dm=Jp.edges.sort(cy),Mm=-1,z0=dm.length,sm,um,Sm=dm[z0-1].edge,Tm=Sm.l===P0?Sm.r:Sm.l;++Mm<z0;)sm=Sm,um=Tm,Sm=dm[Mm].edge,Tm=Sm.l===P0?Sm.r:Sm.l,N0<um.i&&N0<Tm.i&&_x(P0,um,Tm)<0&&Yp.push([zp[N0],zp[um.i],zp[Tm.i]])}),Yp},ci.x=function(zp){return arguments.length?(dt=O0(H=zp),ci):H},ci.y=function(zp){return arguments.length?(Tt=O0(le=zp),ci):le},ci.clipExtent=function(zp){return arguments.length?(Nt=zp??Vy,ci):Nt===Vy?null:Nt},ci.size=function(zp){return arguments.length?ci.clipExtent(zp&&[[0,0],zp]):Nt===Vy?null:Nt&&Nt[1]},ci};var Vy=[[-1e6,-1e6],[1e6,1e6]];function _x(x,H,le){return(x.x-le.x)*(H.y-x.y)-(x.x-H.x)*(le.y-x.y)}_.geom.delaunay=function(x){return _.geom.voronoi().triangles(x)},_.geom.quadtree=function(x,H,le,dt,Tt){var Nt=Eg,ci=Qg,Fn;if(Fn=arguments.length)return Nt=O2,ci=Hy,Fn===3&&(Tt=le,dt=H,le=H=0),zp(x);function zp(Yp){var Jp,N0=O0(Nt),P0=O0(ci),dm,Mm,z0,sm,um,Sm,Tm,fm;if(H!=null)um=H,Sm=le,Tm=dt,fm=Tt;else if(Tm=fm=-(um=Sm=1/0),dm=[],Mm=[],sm=Yp.length,Fn)for(z0=0;z0<sm;++z0)Jp=Yp[z0],Jp.x<um&&(um=Jp.x),Jp.y<Sm&&(Sm=Jp.y),Jp.x>Tm&&(Tm=Jp.x),Jp.y>fm&&(fm=Jp.y),dm.push(Jp.x),Mm.push(Jp.y);else for(z0=0;z0<sm;++z0){var _1=+N0(Jp=Yp[z0],z0),i=+P0(Jp,z0);_1<um&&(um=_1),i<Sm&&(Sm=i),_1>Tm&&(Tm=_1),i>fm&&(fm=i),dm.push(_1),Mm.push(i)}var s=Tm-um,f=fm-Sm;s>f?fm=Sm+s:Tm=um+f;function D(Ci,Zp,K0,Pm,Xm,wm,Am,Lm){if(!(isNaN(K0)||isNaN(Pm)))if(Ci.leaf){var X1=Ci.x,gg=Ci.y;if(X1!=null)if(M(X1-K0)+M(gg-Pm)<.01)ve(Ci,Zp,K0,Pm,Xm,wm,Am,Lm);else{var Yg=Ci.point;Ci.x=Ci.y=Ci.point=null,ve(Ci,Yg,X1,gg,Xm,wm,Am,Lm),ve(Ci,Zp,K0,Pm,Xm,wm,Am,Lm)}else Ci.x=K0,Ci.y=Pm,Ci.point=Zp}else ve(Ci,Zp,K0,Pm,Xm,wm,Am,Lm)}function ve(Ci,Zp,K0,Pm,Xm,wm,Am,Lm){var X1=(Xm+Am)*.5,gg=(wm+Lm)*.5,Yg=K0>=X1,Rm=Pm>=gg,_m=Rm<<1|Yg;Ci.leaf=!1,Ci=Ci.nodes[_m]||(Ci.nodes[_m]=bx()),Yg?Xm=X1:Am=X1,Rm?wm=gg:Lm=gg,D(Ci,Zp,K0,Pm,Xm,wm,Am,Lm)}var ft=bx();if(ft.add=function(Ci){D(ft,Ci,+N0(Ci,++z0),+P0(Ci,z0),um,Sm,Tm,fm)},ft.visit=function(Ci){hx(Ci,ft,um,Sm,Tm,fm)},ft.find=function(Ci){return Yy(ft,Ci[0],Ci[1],um,Sm,Tm,fm)},z0=-1,H==null){for(;++z0<sm;)D(ft,Yp[z0],dm[z0],Mm[z0],um,Sm,Tm,fm);--z0}else Yp.forEach(ft.add);return dm=Mm=Yp=Jp=null,ft}return zp.x=function(Yp){return arguments.length?(Nt=Yp,zp):Nt},zp.y=function(Yp){return arguments.length?(ci=Yp,zp):ci},zp.extent=function(Yp){return arguments.length?(Yp==null?H=le=dt=Tt=null:(H=+Yp[0][0],le=+Yp[0][1],dt=+Yp[1][0],Tt=+Yp[1][1]),zp):H==null?null:[[H,le],[dt,Tt]]},zp.size=function(Yp){return arguments.length?(Yp==null?H=le=dt=Tt=null:(H=le=0,dt=+Yp[0],Tt=+Yp[1]),zp):H==null?null:[dt-H,Tt-le]},zp};function O2(x){return x.x}function Hy(x){return x.y}function bx(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function hx(x,H,le,dt,Tt,Nt){if(!x(H,le,dt,Tt,Nt)){var ci=(le+Tt)*.5,Fn=(dt+Nt)*.5,zp=H.nodes;zp[0]&&hx(x,zp[0],le,dt,ci,Fn),zp[1]&&hx(x,zp[1],ci,dt,Tt,Fn),zp[2]&&hx(x,zp[2],le,Fn,ci,Nt),zp[3]&&hx(x,zp[3],ci,Fn,Tt,Nt)}}function Yy(x,H,le,dt,Tt,Nt,ci){var Fn=1/0,zp;return(function Yp(Jp,N0,P0,dm,Mm){if(!(N0>Nt||P0>ci||dm<dt||Mm<Tt)){if(z0=Jp.point){var z0,sm=H-Jp.x,um=le-Jp.y,Sm=sm*sm+um*um;if(Sm<Fn){var Tm=Math.sqrt(Fn=Sm);dt=H-Tm,Tt=le-Tm,Nt=H+Tm,ci=le+Tm,zp=z0}}for(var fm=Jp.nodes,_1=(N0+dm)*.5,i=(P0+Mm)*.5,s=H>=_1,f=le>=i,D=f<<1|s,ve=D+4;D<ve;++D)if(Jp=fm[D&3])switch(D&3){case 0:Yp(Jp,N0,P0,_1,i);break;case 1:Yp(Jp,_1,P0,dm,i);break;case 2:Yp(Jp,N0,i,_1,Mm);break;case 3:Yp(Jp,_1,i,dm,Mm);break}}})(x,dt,Tt,Nt,ci),zp}_.interpolateRgb=d_;function d_(x,H){x=_.rgb(x),H=_.rgb(H);var le=x.r,dt=x.g,Tt=x.b,Nt=H.r-le,ci=H.g-dt,Fn=H.b-Tt;return function(zp){return"#"+Wp(Math.round(le+Nt*zp))+Wp(Math.round(dt+ci*zp))+Wp(Math.round(Tt+Fn*zp))}}_.interpolateObject=f_;function f_(x,H){var le={},dt={},Tt;for(Tt in x)Tt in H?le[Tt]=fy(x[Tt],H[Tt]):dt[Tt]=x[Tt];for(Tt in H)Tt in x||(dt[Tt]=H[Tt]);return function(Nt){for(Tt in le)dt[Tt]=le[Tt](Nt);return dt}}_.interpolateNumber=wx;function wx(x,H){return x=+x,H=+H,function(le){return x*(1-le)+H*le}}_.interpolateString=p_;function p_(x,H){var le=P2.lastIndex=Ex.lastIndex=0,dt,Tt,Nt,ci=-1,Fn=[],zp=[];for(x=x+"",H=H+"";(dt=P2.exec(x))&&(Tt=Ex.exec(H));)(Nt=Tt.index)>le&&(Nt=H.slice(le,Nt),Fn[ci]?Fn[ci]+=Nt:Fn[++ci]=Nt),(dt=dt[0])===(Tt=Tt[0])?Fn[ci]?Fn[ci]+=Tt:Fn[++ci]=Tt:(Fn[++ci]=null,zp.push({i:ci,x:wx(dt,Tt)})),le=Ex.lastIndex;return le<H.length&&(Nt=H.slice(le),Fn[ci]?Fn[ci]+=Nt:Fn[++ci]=Nt),Fn.length<2?zp[0]?(H=zp[0].x,function(Yp){return H(Yp)+""}):function(){return H}:(H=zp.length,function(Yp){for(var Jp=0,N0;Jp<H;++Jp)Fn[(N0=zp[Jp]).i]=N0.x(Yp);return Fn.join("")})}var P2=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ex=new RegExp(P2.source,"g");_.interpolate=fy;function fy(x,H){for(var le=_.interpolators.length,dt;--le>=0&&!(dt=_.interpolators[le](x,H)););return dt}_.interpolators=[function(x,H){var le=typeof H;return(le==="string"?s0.has(H.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(H)?d_:p_:H instanceof u1?d_:Array.isArray(H)?gx:le==="object"&&isNaN(H)?f_:wx)(x,H)}],_.interpolateArray=gx;function gx(x,H){var le=[],dt=[],Tt=x.length,Nt=H.length,ci=Math.min(x.length,H.length),Fn;for(Fn=0;Fn<ci;++Fn)le.push(fy(x[Fn],H[Fn]));for(;Fn<Tt;++Fn)dt[Fn]=x[Fn];for(;Fn<Nt;++Fn)dt[Fn]=H[Fn];return function(zp){for(Fn=0;Fn<ci;++Fn)dt[Fn]=le[Fn](zp);return dt}}var y2=function(){return vt},Ox=_.map({linear:y2,poly:Zy,quad:function(){return s3},cubic:function(){return ex},sin:function(){return pw},exp:function(){return mw},circle:function(){return f5},elastic:Xx,back:K_,bounce:function(){return l3}}),a3=_.map({in:vt,out:o3,"in-out":F2,"out-in":function(x){return F2(o3(x))}});_.ease=function(x){var H=x.indexOf("-"),le=H>=0?x.slice(0,H):x,dt=H>=0?x.slice(H+1):"in";return le=Ox.get(le)||y2,dt=a3.get(dt)||vt,i3(dt(le.apply(null,d.call(arguments,1))))};function i3(x){return function(H){return H<=0?0:H>=1?1:x(H)}}function o3(x){return function(H){return 1-x(1-H)}}function F2(x){return function(H){return .5*(H<.5?x(2*H):2-x(2-2*H))}}function s3(x){return x*x}function ex(x){return x*x*x}function fw(x){if(x<=0)return 0;if(x>=1)return 1;var H=x*x,le=H*x;return 4*(x<.5?le:3*(x-H)+le-.75)}function Zy(x){return function(H){return Math.pow(H,x)}}function pw(x){return 1-Math.cos(x*Bp)}function mw(x){return Math.pow(2,10*(x-1))}function f5(x){return 1-Math.sqrt(1-x*x)}function Xx(x,H){var le;return arguments.length<2&&(H=.45),arguments.length?le=H/xn*Math.asin(1/x):(x=1,le=H/4),function(dt){return 1+x*Math.pow(2,-10*dt)*Math.sin((dt-le)*xn/H)}}function K_(x){return x||(x=1.70158),function(H){return H*H*((x+1)*H-x)}}function l3(x){return x<1/2.75?7.5625*x*x:x<2/2.75?7.5625*(x-=1.5/2.75)*x+.75:x<2.5/2.75?7.5625*(x-=2.25/2.75)*x+.9375:7.5625*(x-=2.625/2.75)*x+.984375}_.interpolateHcl=z2;function z2(x,H){x=_.hcl(x),H=_.hcl(H);var le=x.h,dt=x.c,Tt=x.l,Nt=H.h-le,ci=H.c-dt,Fn=H.l-Tt;return isNaN(ci)&&(ci=0,dt=isNaN(dt)?H.c:dt),isNaN(Nt)?(Nt=0,le=isNaN(le)?H.h:le):Nt>180?Nt-=360:Nt<-180&&(Nt+=360),function(zp){return w1(le+Nt*zp,dt+ci*zp,Tt+Fn*zp)+""}}_.interpolateHsl=gw;function gw(x,H){x=_.hsl(x),H=_.hsl(H);var le=x.h,dt=x.s,Tt=x.l,Nt=H.h-le,ci=H.s-dt,Fn=H.l-Tt;return isNaN(ci)&&(ci=0,dt=isNaN(dt)?H.s:dt),isNaN(Nt)?(Nt=0,le=isNaN(le)?H.h:le):Nt>180?Nt-=360:Nt<-180&&(Nt+=360),function(zp){return z1(le+Nt*zp,dt+ci*zp,Tt+Fn*zp)+""}}_.interpolateLab=vw;function vw(x,H){x=_.lab(x),H=_.lab(H);var le=x.l,dt=x.a,Tt=x.b,Nt=H.l-le,ci=H.a-dt,Fn=H.b-Tt;return function(zp){return Cg(le+Nt*zp,dt+ci*zp,Tt+Fn*zp)+""}}_.interpolateRound=u3;function u3(x,H){return H-=x,function(le){return Math.round(x+H*le)}}_.transform=function(x){var H=E.createElementNS(_.ns.prefix.svg,"g");return(_.transform=function(le){if(le!=null){H.setAttribute("transform",le);var dt=H.transform.baseVal.consolidate()}return new c3(dt?dt.matrix:m5)})(x)};function c3(x){var H=[x.a,x.b],le=[x.c,x.d],dt=Q_(H),Tt=m_(H,le),Nt=Q_(p5(le,H,-Tt))||0;H[0]*le[1]<le[0]*H[1]&&(H[0]*=-1,H[1]*=-1,dt*=-1,Tt*=-1),this.rotate=(dt?Math.atan2(H[1],H[0]):Math.atan2(-le[0],le[1]))*o0,this.translate=[x.e,x.f],this.scale=[dt,Nt],this.skew=Nt?Math.atan2(Tt,Nt)*o0:0}c3.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};function m_(x,H){return x[0]*H[0]+x[1]*H[1]}function Q_(x){var H=Math.sqrt(m_(x,x));return H&&(x[0]/=H,x[1]/=H),H}function p5(x,H,le){return x[0]+=le*H[0],x[1]+=le*H[1],x}var m5={a:1,b:0,c:0,d:1,e:0,f:0};_.interpolateTransform=h3;function I2(x){return x.length?x.pop()+",":""}function yw(x,H,le,dt){if(x[0]!==H[0]||x[1]!==H[1]){var Tt=le.push("translate(",null,",",null,")");dt.push({i:Tt-4,x:wx(x[0],H[0])},{i:Tt-2,x:wx(x[1],H[1])})}else(H[0]||H[1])&&le.push("translate("+H+")")}function xw(x,H,le,dt){x!==H?(x-H>180?H+=360:H-x>180&&(x+=360),dt.push({i:le.push(I2(le)+"rotate(",null,")")-2,x:wx(x,H)})):H&&le.push(I2(le)+"rotate("+H+")")}function U2(x,H,le,dt){x!==H?dt.push({i:le.push(I2(le)+"skewX(",null,")")-2,x:wx(x,H)}):H&&le.push(I2(le)+"skewX("+H+")")}function eb(x,H,le,dt){if(x[0]!==H[0]||x[1]!==H[1]){var Tt=le.push(I2(le)+"scale(",null,",",null,")");dt.push({i:Tt-4,x:wx(x[0],H[0])},{i:Tt-2,x:wx(x[1],H[1])})}else(H[0]!==1||H[1]!==1)&&le.push(I2(le)+"scale("+H+")")}function h3(x,H){var le=[],dt=[];return x=_.transform(x),H=_.transform(H),yw(x.translate,H.translate,le,dt),xw(x.rotate,H.rotate,le,dt),U2(x.skew,H.skew,le,dt),eb(x.scale,H.scale,le,dt),x=H=null,function(Tt){for(var Nt=-1,ci=dt.length,Fn;++Nt<ci;)le[(Fn=dt[Nt]).i]=Fn.x(Tt);return le.join("")}}function _w(x,H){return H=(H-=x=+x)||1/H,function(le){return(le-x)/H}}function bw(x,H){return H=(H-=x=+x)||1/H,function(le){return Math.max(0,Math.min(1,(le-x)/H))}}_.layout={},_.layout.bundle=function(){return function(x){for(var H=[],le=-1,dt=x.length;++le<dt;)H.push(ww(x[le]));return H}};function ww(x){for(var H=x.source,le=x.target,dt=Ew(H,le),Tt=[H];H!==dt;)H=H.parent,Tt.push(H);for(var Nt=Tt.length;le!==dt;)Tt.splice(Nt,0,le),le=le.parent;return Tt}function d3(x){for(var H=[],le=x.parent;le!=null;)H.push(x),x=le,le=le.parent;return H.push(x),H}function Ew(x,H){if(x===H)return x;for(var le=d3(x),dt=d3(H),Tt=le.pop(),Nt=dt.pop(),ci=null;Tt===Nt;)ci=Tt,Tt=le.pop(),Nt=dt.pop();return ci}_.layout.chord=function(){var x={},H,le,dt,Tt,Nt=0,ci,Fn,zp;function Yp(){var N0={},P0=[],dm=_.range(Tt),Mm=[],z0,sm,um,Sm,Tm;for(H=[],le=[],z0=0,Sm=-1;++Sm<Tt;){for(sm=0,Tm=-1;++Tm<Tt;)sm+=dt[Sm][Tm];P0.push(sm),Mm.push(_.range(Tt)),z0+=sm}for(ci&&dm.sort(function(ft,Ci){return ci(P0[ft],P0[Ci])}),Fn&&Mm.forEach(function(ft,Ci){ft.sort(function(Zp,K0){return Fn(dt[Ci][Zp],dt[Ci][K0])})}),z0=(xn-Nt*Tt)/z0,sm=0,Sm=-1;++Sm<Tt;){for(um=sm,Tm=-1;++Tm<Tt;){var fm=dm[Sm],_1=Mm[fm][Tm],i=dt[fm][_1],s=sm,f=sm+=i*z0;N0[fm+"-"+_1]={index:fm,subindex:_1,startAngle:s,endAngle:f,value:i}}le[fm]={index:fm,startAngle:um,endAngle:sm,value:P0[fm]},sm+=Nt}for(Sm=-1;++Sm<Tt;)for(Tm=Sm-1;++Tm<Tt;){var D=N0[Sm+"-"+Tm],ve=N0[Tm+"-"+Sm];(D.value||ve.value)&&H.push(D.value<ve.value?{source:ve,target:D}:{source:D,target:ve})}zp&&Jp()}function Jp(){H.sort(function(N0,P0){return zp((N0.source.value+N0.target.value)/2,(P0.source.value+P0.target.value)/2)})}return x.matrix=function(N0){return arguments.length?(Tt=(dt=N0)&&dt.length,H=le=null,x):dt},x.padding=function(N0){return arguments.length?(Nt=N0,H=le=null,x):Nt},x.sortGroups=function(N0){return arguments.length?(ci=N0,H=le=null,x):ci},x.sortSubgroups=function(N0){return arguments.length?(Fn=N0,H=null,x):Fn},x.sortChords=function(N0){return arguments.length?(zp=N0,H&&Jp(),x):zp},x.chords=function(){return H||Yp(),H},x.groups=function(){return le||Yp(),le},x},_.layout.force=function(){var x={},H=_.dispatch("start","tick","end"),le,dt=[1,1],Tt,Nt,ci=.9,Fn=g5,zp=Mw,Yp=-30,Jp=v5,N0=.1,P0=.64,dm=[],Mm=[],z0,sm,um;function Sm(fm){return function(_1,i,s,f){if(_1.point!==fm){var D=_1.cx-fm.x,ve=_1.cy-fm.y,ft=f-i,Ci=D*D+ve*ve;if(ft*ft/P0<Ci){if(Ci<Jp){var Zp=_1.charge/Ci;fm.px-=D*Zp,fm.py-=ve*Zp}return!0}if(_1.point&&Ci&&Ci<Jp){var Zp=_1.pointCharge/Ci;fm.px-=D*Zp,fm.py-=ve*Zp}}return!_1.charge}}x.tick=function(){if((Nt*=.99)<.005)return le=null,H.end({type:"end",alpha:Nt=0}),!0;var fm=dm.length,_1=Mm.length,i,s,f,D,ve,ft,Ci,Zp,K0;for(s=0;s<_1;++s)f=Mm[s],D=f.source,ve=f.target,Zp=ve.x-D.x,K0=ve.y-D.y,(ft=Zp*Zp+K0*K0)&&(ft=Nt*sm[s]*((ft=Math.sqrt(ft))-z0[s])/ft,Zp*=ft,K0*=ft,ve.x-=Zp*(Ci=D.weight+ve.weight?D.weight/(D.weight+ve.weight):.5),ve.y-=K0*Ci,D.x+=Zp*(Ci=1-Ci),D.y+=K0*Ci);if((Ci=Nt*N0)&&(Zp=dt[0]/2,K0=dt[1]/2,s=-1,Ci))for(;++s<fm;)f=dm[s],f.x+=(Zp-f.x)*Ci,f.y+=(K0-f.y)*Ci;if(Yp)for(rb(i=_.geom.quadtree(dm),Nt,um),s=-1;++s<fm;)(f=dm[s]).fixed||i.visit(Sm(f));for(s=-1;++s<fm;)f=dm[s],f.fixed?(f.x=f.px,f.y=f.py):(f.x-=(f.px-(f.px=f.x))*ci,f.y-=(f.py-(f.py=f.y))*ci);H.tick({type:"tick",alpha:Nt})},x.nodes=function(fm){return arguments.length?(dm=fm,x):dm},x.links=function(fm){return arguments.length?(Mm=fm,x):Mm},x.size=function(fm){return arguments.length?(dt=fm,x):dt},x.linkDistance=function(fm){return arguments.length?(Fn=typeof fm=="function"?fm:+fm,x):Fn},x.distance=x.linkDistance,x.linkStrength=function(fm){return arguments.length?(zp=typeof fm=="function"?fm:+fm,x):zp},x.friction=function(fm){return arguments.length?(ci=+fm,x):ci},x.charge=function(fm){return arguments.length?(Yp=typeof fm=="function"?fm:+fm,x):Yp},x.chargeDistance=function(fm){return arguments.length?(Jp=fm*fm,x):Math.sqrt(Jp)},x.gravity=function(fm){return arguments.length?(N0=+fm,x):N0},x.theta=function(fm){return arguments.length?(P0=fm*fm,x):Math.sqrt(P0)},x.alpha=function(fm){return arguments.length?(fm=+fm,Nt?fm>0?Nt=fm:(le.c=null,le.t=NaN,le=null,H.end({type:"end",alpha:Nt=0})):fm>0&&(H.start({type:"start",alpha:Nt=fm}),le=H1(x.tick)),x):Nt},x.start=function(){var fm,_1=dm.length,i=Mm.length,s=dt[0],f=dt[1],D,ve;for(fm=0;fm<_1;++fm)(ve=dm[fm]).index=fm,ve.weight=0;for(fm=0;fm<i;++fm)ve=Mm[fm],typeof ve.source=="number"&&(ve.source=dm[ve.source]),typeof ve.target=="number"&&(ve.target=dm[ve.target]),++ve.source.weight,++ve.target.weight;for(fm=0;fm<_1;++fm)ve=dm[fm],isNaN(ve.x)&&(ve.x=ft("x",s)),isNaN(ve.y)&&(ve.y=ft("y",f)),isNaN(ve.px)&&(ve.px=ve.x),isNaN(ve.py)&&(ve.py=ve.y);if(z0=[],typeof Fn=="function")for(fm=0;fm<i;++fm)z0[fm]=+Fn.call(this,Mm[fm],fm);else for(fm=0;fm<i;++fm)z0[fm]=Fn;if(sm=[],typeof zp=="function")for(fm=0;fm<i;++fm)sm[fm]=+zp.call(this,Mm[fm],fm);else for(fm=0;fm<i;++fm)sm[fm]=zp;if(um=[],typeof Yp=="function")for(fm=0;fm<_1;++fm)um[fm]=+Yp.call(this,dm[fm],fm);else for(fm=0;fm<_1;++fm)um[fm]=Yp;function ft(Ci,Zp){if(!D){for(D=new Array(_1),Xm=0;Xm<_1;++Xm)D[Xm]=[];for(Xm=0;Xm<i;++Xm){var K0=Mm[Xm];D[K0.source.index].push(K0.target),D[K0.target.index].push(K0.source)}}for(var Pm=D[fm],Xm=-1,wm=Pm.length,Am;++Xm<wm;)if(!isNaN(Am=Pm[Xm][Ci]))return Am;return Math.random()*Zp}return x.resume()},x.resume=function(){return x.alpha(.1)},x.stop=function(){return x.alpha(0)},x.drag=function(){if(Tt||(Tt=_.behavior.drag().origin(vt).on("dragstart.force",tb).on("drag.force",Tm).on("dragend.force",Sw)),!arguments.length)return Tt;this.on("mouseover.force",Tw).on("mouseout.force",qv).call(Tt)};function Tm(fm){fm.px=_.event.x,fm.py=_.event.y,x.resume()}return _.rebind(x,H,"on")};function tb(x){x.fixed|=2}function Sw(x){x.fixed&=-7}function Tw(x){x.fixed|=4,x.px=x.x,x.py=x.y}function qv(x){x.fixed&=-5}function rb(x,H,le){var dt=0,Tt=0;if(x.charge=0,!x.leaf)for(var Nt=x.nodes,ci=Nt.length,Fn=-1,zp;++Fn<ci;)zp=Nt[Fn],zp!=null&&(rb(zp,H,le),x.charge+=zp.charge,dt+=zp.charge*zp.cx,Tt+=zp.charge*zp.cy);if(x.point){x.leaf||(x.point.x+=Math.random()-.5,x.point.y+=Math.random()-.5);var Yp=H*le[x.point.index];x.charge+=x.pointCharge=Yp,dt+=Yp*x.point.x,Tt+=Yp*x.point.y}x.cx=dt/x.charge,x.cy=Tt/x.charge}var g5=20,Mw=1,v5=1/0;_.layout.hierarchy=function(){var x=nb,H=B2,le=f3;function dt(Tt){var Nt=[Tt],ci=[],Fn;for(Tt.depth=0;(Fn=Nt.pop())!=null;)if(ci.push(Fn),(Yp=H.call(dt,Fn,Fn.depth))&&(zp=Yp.length)){for(var zp,Yp,Jp;--zp>=0;)Nt.push(Jp=Yp[zp]),Jp.parent=Fn,Jp.depth=Fn.depth+1;le&&(Fn.value=0),Fn.children=Yp}else le&&(Fn.value=+le.call(dt,Fn,Fn.depth)||0),delete Fn.children;return tx(Tt,function(N0){var P0,dm;x&&(P0=N0.children)&&P0.sort(x),le&&(dm=N0.parent)&&(dm.value+=N0.value)}),ci}return dt.sort=function(Tt){return arguments.length?(x=Tt,dt):x},dt.children=function(Tt){return arguments.length?(H=Tt,dt):H},dt.value=function(Tt){return arguments.length?(le=Tt,dt):le},dt.revalue=function(Tt){return le&&(v_(Tt,function(Nt){Nt.children&&(Nt.value=0)}),tx(Tt,function(Nt){var ci;Nt.children||(Nt.value=+le.call(dt,Nt,Nt.depth)||0),(ci=Nt.parent)&&(ci.value+=Nt.value)})),Tt},dt};function g_(x,H){return _.rebind(x,H,"sort","children","value"),x.nodes=x,x.links=p3,x}function v_(x,H){for(var le=[x];(x=le.pop())!=null;)if(H(x),(Tt=x.children)&&(dt=Tt.length))for(var dt,Tt;--dt>=0;)le.push(Tt[dt])}function tx(x,H){for(var le=[x],dt=[];(x=le.pop())!=null;)if(dt.push(x),(ci=x.children)&&(Nt=ci.length))for(var Tt=-1,Nt,ci;++Tt<Nt;)le.push(ci[Tt]);for(;(x=dt.pop())!=null;)H(x)}function B2(x){return x.children}function f3(x){return x.value}function nb(x,H){return H.value-x.value}function p3(x){return _.merge(x.map(function(H){return(H.children||[]).map(function(le){return{source:H,target:le}})}))}_.layout.partition=function(){var x=_.layout.hierarchy(),H=[1,1];function le(Nt,ci,Fn,zp){var Yp=Nt.children;if(Nt.x=ci,Nt.y=Nt.depth*zp,Nt.dx=Fn,Nt.dy=zp,Yp&&(N0=Yp.length)){var Jp=-1,N0,P0,dm;for(Fn=Nt.value?Fn/Nt.value:0;++Jp<N0;)le(P0=Yp[Jp],ci,dm=P0.value*Fn,zp),ci+=dm}}function dt(Nt){var ci=Nt.children,Fn=0;if(ci&&(Yp=ci.length))for(var zp=-1,Yp;++zp<Yp;)Fn=Math.max(Fn,dt(ci[zp]));return 1+Fn}function Tt(Nt,ci){var Fn=x.call(this,Nt,ci);return le(Fn[0],0,H[0],H[1]/dt(Fn[0])),Fn}return Tt.size=function(Nt){return arguments.length?(H=Nt,Tt):H},g_(Tt,x)},_.layout.pie=function(){var x=Number,H=Px,le=0,dt=xn,Tt=0;function Nt(ci){var Fn=ci.length,zp=ci.map(function(Sm,Tm){return+x.call(Nt,Sm,Tm)}),Yp=+(typeof le=="function"?le.apply(this,arguments):le),Jp=(typeof dt=="function"?dt.apply(this,arguments):dt)-Yp,N0=Math.min(Math.abs(Jp)/Fn,+(typeof Tt=="function"?Tt.apply(this,arguments):Tt)),P0=N0*(Jp<0?-1:1),dm=_.sum(zp),Mm=dm?(Jp-Fn*P0)/dm:0,z0=_.range(Fn),sm=[],um;return H!=null&&z0.sort(H===Px?function(Sm,Tm){return zp[Tm]-zp[Sm]}:function(Sm,Tm){return H(ci[Sm],ci[Tm])}),z0.forEach(function(Sm){sm[Sm]={data:ci[Sm],value:um=zp[Sm],startAngle:Yp,endAngle:Yp+=um*Mm+P0,padAngle:N0}}),sm}return Nt.value=function(ci){return arguments.length?(x=ci,Nt):x},Nt.sort=function(ci){return arguments.length?(H=ci,Nt):H},Nt.startAngle=function(ci){return arguments.length?(le=ci,Nt):le},Nt.endAngle=function(ci){return arguments.length?(dt=ci,Nt):dt},Nt.padAngle=function(ci){return arguments.length?(Tt=ci,Nt):Tt},Nt};var Px={};_.layout.stack=function(){var x=vt,H=ab,le=ib,dt=y5,Tt=Sx,Nt=y_;function ci(Fn,zp){if(!(Mm=Fn.length))return Fn;var Yp=Fn.map(function(Sm,Tm){return x.call(ci,Sm,Tm)}),Jp=Yp.map(function(Sm){return Sm.map(function(Tm,fm){return[Tt.call(ci,Tm,fm),Nt.call(ci,Tm,fm)]})}),N0=H.call(ci,Jp,zp);Yp=_.permute(Yp,N0),Jp=_.permute(Jp,N0);var P0=le.call(ci,Jp,zp),dm=Yp[0].length,Mm,z0,sm,um;for(sm=0;sm<dm;++sm)for(dt.call(ci,Yp[0][sm],um=P0[sm],Jp[0][sm][1]),z0=1;z0<Mm;++z0)dt.call(ci,Yp[z0][sm],um+=Jp[z0-1][sm][1],Jp[z0][sm][1]);return Fn}return ci.values=function(Fn){return arguments.length?(x=Fn,ci):x},ci.order=function(Fn){return arguments.length?(H=typeof Fn=="function"?Fn:Aw.get(Fn)||ab,ci):H},ci.offset=function(Fn){return arguments.length?(le=typeof Fn=="function"?Fn:Cw.get(Fn)||ib,ci):le},ci.x=function(Fn){return arguments.length?(Tt=Fn,ci):Tt},ci.y=function(Fn){return arguments.length?(Nt=Fn,ci):Nt},ci.out=function(Fn){return arguments.length?(dt=Fn,ci):dt},ci};function Sx(x){return x.x}function y_(x){return x.y}function y5(x,H,le){x.y0=H,x.y=le}var Aw=_.map({"inside-out":function(x){var H=x.length,le,dt,Tt=x.map(x5),Nt=x.map(m3),ci=_.range(H).sort(function(N0,P0){return Tt[N0]-Tt[P0]}),Fn=0,zp=0,Yp=[],Jp=[];for(le=0;le<H;++le)dt=ci[le],Fn<zp?(Fn+=Nt[dt],Yp.push(dt)):(zp+=Nt[dt],Jp.push(dt));return Jp.reverse().concat(Yp)},reverse:function(x){return _.range(x.length).reverse()},default:ab}),Cw=_.map({silhouette:function(x){var H=x.length,le=x[0].length,dt=[],Tt=0,Nt,ci,Fn,zp=[];for(ci=0;ci<le;++ci){for(Nt=0,Fn=0;Nt<H;Nt++)Fn+=x[Nt][ci][1];Fn>Tt&&(Tt=Fn),dt.push(Fn)}for(ci=0;ci<le;++ci)zp[ci]=(Tt-dt[ci])/2;return zp},wiggle:function(x){var H=x.length,le=x[0],dt=le.length,Tt,Nt,ci,Fn,zp,Yp,Jp,N0,P0,dm=[];for(dm[0]=N0=P0=0,Nt=1;Nt<dt;++Nt){for(Tt=0,Fn=0;Tt<H;++Tt)Fn+=x[Tt][Nt][1];for(Tt=0,zp=0,Jp=le[Nt][0]-le[Nt-1][0];Tt<H;++Tt){for(ci=0,Yp=(x[Tt][Nt][1]-x[Tt][Nt-1][1])/(2*Jp);ci<Tt;++ci)Yp+=(x[ci][Nt][1]-x[ci][Nt-1][1])/Jp;zp+=Yp*x[Tt][Nt][1]}dm[Nt]=N0-=Fn?zp/Fn*Jp:0,N0<P0&&(P0=N0)}for(Nt=0;Nt<dt;++Nt)dm[Nt]-=P0;return dm},expand:function(x){var H=x.length,le=x[0].length,dt=1/H,Tt,Nt,ci,Fn=[];for(Nt=0;Nt<le;++Nt){for(Tt=0,ci=0;Tt<H;Tt++)ci+=x[Tt][Nt][1];if(ci)for(Tt=0;Tt<H;Tt++)x[Tt][Nt][1]/=ci;else for(Tt=0;Tt<H;Tt++)x[Tt][Nt][1]=dt}for(Nt=0;Nt<le;++Nt)Fn[Nt]=0;return Fn},zero:ib});function ab(x){return _.range(x.length)}function ib(x){for(var H=-1,le=x[0].length,dt=[];++H<le;)dt[H]=0;return dt}function x5(x){for(var H=1,le=0,dt=x[0][1],Tt,Nt=x.length;H<Nt;++H)(Tt=x[H][1])>dt&&(le=H,dt=Tt);return le}function m3(x){return x.reduce(Dw,0)}function Dw(x,H){return x+H[1]}_.layout.histogram=function(){var x=!0,H=Number,le=g3,dt=Rw;function Tt(Nt,ci){for(var Fn=[],zp=Nt.map(H,this),Yp=le.call(this,zp,ci),Jp=dt.call(this,Yp,zp,ci),N0,ci=-1,P0=zp.length,dm=Jp.length-1,Mm=x?1:1/P0,z0;++ci<dm;)N0=Fn[ci]=[],N0.dx=Jp[ci+1]-(N0.x=Jp[ci]),N0.y=0;if(dm>0)for(ci=-1;++ci<P0;)z0=zp[ci],z0>=Yp[0]&&z0<=Yp[1]&&(N0=Fn[_.bisect(Jp,z0,1,dm)-1],N0.y+=Mm,N0.push(Nt[ci]));return Fn}return Tt.value=function(Nt){return arguments.length?(H=Nt,Tt):H},Tt.range=function(Nt){return arguments.length?(le=O0(Nt),Tt):le},Tt.bins=function(Nt){return arguments.length?(dt=typeof Nt=="number"?function(ci){return Nw(ci,Nt)}:O0(Nt),Tt):dt},Tt.frequency=function(Nt){return arguments.length?(x=!!Nt,Tt):x},Tt};function Rw(x,H){return Nw(x,Math.ceil(Math.log(H.length)/Math.LN2+1))}function Nw(x,H){for(var le=-1,dt=+x[0],Tt=(x[1]-dt)/H,Nt=[];++le<=H;)Nt[le]=Tt*le+dt;return Nt}function g3(x){return[_.min(x),_.max(x)]}_.layout.pack=function(){var x=_.layout.hierarchy().sort(v3),H=0,le=[1,1],dt;function Tt(Nt,ci){var Fn=x.call(this,Nt,ci),zp=Fn[0],Yp=le[0],Jp=le[1],N0=dt==null?Math.sqrt:typeof dt=="function"?dt:function(){return dt};if(zp.x=zp.y=0,tx(zp,function(dm){dm.r=+N0(dm.value)}),tx(zp,kw),H){var P0=H*(dt?1:Math.max(2*zp.r/Yp,2*zp.r/Jp))/2;tx(zp,function(dm){dm.r+=P0}),tx(zp,kw),tx(zp,function(dm){dm.r-=P0})}return ob(zp,Yp/2,Jp/2,dt?1:1/Math.max(2*zp.r/Yp,2*zp.r/Jp)),Fn}return Tt.size=function(Nt){return arguments.length?(le=Nt,Tt):le},Tt.radius=function(Nt){return arguments.length?(dt=Nt==null||typeof Nt=="function"?Nt:+Nt,Tt):dt},Tt.padding=function(Nt){return arguments.length?(H=+Nt,Tt):H},g_(Tt,x)};function v3(x,H){return x.value-H.value}function y3(x,H){var le=x._pack_next;x._pack_next=H,H._pack_prev=x,H._pack_next=le,le._pack_prev=H}function Lw(x,H){x._pack_next=H,H._pack_prev=x}function j2(x,H){var le=H.x-x.x,dt=H.y-x.y,Tt=x.r+H.r;return .999*Tt*Tt>le*le+dt*dt}function kw(x){if(!(H=x.children)||!(P0=H.length))return;var H,le=1/0,dt=-1/0,Tt=1/0,Nt=-1/0,ci,Fn,zp,Yp,Jp,N0,P0;function dm(fm){le=Math.min(fm.x-fm.r,le),dt=Math.max(fm.x+fm.r,dt),Tt=Math.min(fm.y-fm.r,Tt),Nt=Math.max(fm.y+fm.r,Nt)}if(H.forEach(Ow),ci=H[0],ci.x=-ci.r,ci.y=0,dm(ci),P0>1&&(Fn=H[1],Fn.x=Fn.r,Fn.y=0,dm(Fn),P0>2))for(zp=H[2],x_(ci,Fn,zp),dm(zp),y3(ci,zp),ci._pack_prev=zp,y3(zp,Fn),Fn=ci._pack_next,Yp=3;Yp<P0;Yp++){x_(ci,Fn,zp=H[Yp]);var Mm=0,z0=1,sm=1;for(Jp=Fn._pack_next;Jp!==Fn;Jp=Jp._pack_next,z0++)if(j2(Jp,zp)){Mm=1;break}if(Mm==1)for(N0=ci._pack_prev;N0!==Jp._pack_prev&&!j2(N0,zp);N0=N0._pack_prev,sm++);Mm?(z0<sm||z0==sm&&Fn.r<ci.r?Lw(ci,Fn=Jp):Lw(ci=N0,Fn),Yp--):(y3(ci,zp),Fn=zp,dm(zp))}var um=(le+dt)/2,Sm=(Tt+Nt)/2,Tm=0;for(Yp=0;Yp<P0;Yp++)zp=H[Yp],zp.x-=um,zp.y-=Sm,Tm=Math.max(Tm,zp.r+Math.sqrt(zp.x*zp.x+zp.y*zp.y));x.r=Tm,H.forEach(Ev)}function Ow(x){x._pack_next=x._pack_prev=x}function Ev(x){delete x._pack_next,delete x._pack_prev}function ob(x,H,le,dt){var Tt=x.children;if(x.x=H+=dt*x.x,x.y=le+=dt*x.y,x.r*=dt,Tt)for(var Nt=-1,ci=Tt.length;++Nt<ci;)ob(Tt[Nt],H,le,dt)}function x_(x,H,le){var dt=x.r+le.r,Tt=H.x-x.x,Nt=H.y-x.y;if(dt&&(Tt||Nt)){var ci=H.r+le.r,Fn=Tt*Tt+Nt*Nt;ci*=ci,dt*=dt;var zp=.5+(dt-ci)/(2*Fn),Yp=Math.sqrt(Math.max(0,2*ci*(dt+Fn)-(dt-=Fn)*dt-ci*ci))/(2*Fn);le.x=x.x+zp*Tt+Yp*Nt,le.y=x.y+zp*Nt-Yp*Tt}else le.x=x.x+dt,le.y=x.y}_.layout.tree=function(){var x=_.layout.hierarchy().sort(null).value(null),H=sb,le=[1,1],dt=null;function Tt(Jp,N0){var P0=x.call(this,Jp,N0),dm=P0[0],Mm=Nt(dm);if(tx(Mm,ci),Mm.parent.m=-Mm.z,v_(Mm,Fn),dt)v_(dm,Yp);else{var z0=dm,sm=dm,um=dm;v_(dm,function(_1){_1.x<z0.x&&(z0=_1),_1.x>sm.x&&(sm=_1),_1.depth>um.depth&&(um=_1)});var Sm=H(z0,sm)/2-z0.x,Tm=le[0]/(sm.x+H(sm,z0)/2+Sm),fm=le[1]/(um.depth||1);v_(dm,function(_1){_1.x=(_1.x+Sm)*Tm,_1.y=_1.depth*fm})}return P0}function Nt(Jp){for(var N0={A:null,children:[Jp]},P0=[N0],dm;(dm=P0.pop())!=null;)for(var Mm=dm.children,z0,sm=0,um=Mm.length;sm<um;++sm)P0.push((Mm[sm]=z0={_:Mm[sm],parent:dm,children:(z0=Mm[sm].children)&&z0.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:sm}).a=z0);return N0.children[0]}function ci(Jp){var N0=Jp.children,P0=Jp.parent.children,dm=Jp.i?P0[Jp.i-1]:null;if(N0.length){ub(Jp);var Mm=(N0[0].z+N0[N0.length-1].z)/2;dm?(Jp.z=dm.z+H(Jp._,dm._),Jp.m=Jp.z-Mm):Jp.z=Mm}else dm&&(Jp.z=dm.z+H(Jp._,dm._));Jp.parent.A=zp(Jp,dm,Jp.parent.A||P0[0])}function Fn(Jp){Jp._.x=Jp.z+Jp.parent.m,Jp.m+=Jp.parent.m}function zp(Jp,N0,P0){if(N0){for(var dm=Jp,Mm=Jp,z0=N0,sm=dm.parent.children[0],um=dm.m,Sm=Mm.m,Tm=z0.m,fm=sm.m,_1;z0=__(z0),dm=lb(dm),z0&&dm;)sm=lb(sm),Mm=__(Mm),Mm.a=Jp,_1=z0.z+Tm-dm.z-um+H(z0._,dm._),_1>0&&(b_(_5(z0,Jp,P0),Jp,_1),um+=_1,Sm+=_1),Tm+=z0.m,um+=dm.m,fm+=sm.m,Sm+=Mm.m;z0&&!__(Mm)&&(Mm.t=z0,Mm.m+=Tm-Sm),dm&&!lb(sm)&&(sm.t=dm,sm.m+=um-fm,P0=Jp)}return P0}function Yp(Jp){Jp.x*=le[0],Jp.y=Jp.depth*le[1]}return Tt.separation=function(Jp){return arguments.length?(H=Jp,Tt):H},Tt.size=function(Jp){return arguments.length?(dt=(le=Jp)==null?Yp:null,Tt):dt?null:le},Tt.nodeSize=function(Jp){return arguments.length?(dt=(le=Jp)==null?null:Yp,Tt):dt?le:null},g_(Tt,x)};function sb(x,H){return x.parent==H.parent?1:2}function lb(x){var H=x.children;return H.length?H[0]:x.t}function __(x){var H=x.children,le;return(le=H.length)?H[le-1]:x.t}function b_(x,H,le){var dt=le/(H.i-x.i);H.c-=dt,H.s+=le,x.c+=dt,H.z+=le,H.m+=le}function ub(x){for(var H=0,le=0,dt=x.children,Tt=dt.length,Nt;--Tt>=0;)Nt=dt[Tt],Nt.z+=H,Nt.m+=H,H+=Nt.s+(le+=Nt.c)}function _5(x,H,le){return x.a.parent===H.parent?x.a:le}_.layout.cluster=function(){var x=_.layout.hierarchy().sort(null).value(null),H=sb,le=[1,1],dt=!1;function Tt(Nt,ci){var Fn=x.call(this,Nt,ci),zp=Fn[0],Yp,Jp=0;tx(zp,function(z0){var sm=z0.children;sm&&sm.length?(z0.x=b5(sm),z0.y=Pw(sm)):(z0.x=Yp?Jp+=H(z0,Yp):0,z0.y=0,Yp=z0)});var N0=Fw(zp),P0=x3(zp),dm=N0.x-H(N0,P0)/2,Mm=P0.x+H(P0,N0)/2;return tx(zp,dt?function(z0){z0.x=(z0.x-zp.x)*le[0],z0.y=(zp.y-z0.y)*le[1]}:function(z0){z0.x=(z0.x-dm)/(Mm-dm)*le[0],z0.y=(1-(zp.y?z0.y/zp.y:1))*le[1]}),Fn}return Tt.separation=function(Nt){return arguments.length?(H=Nt,Tt):H},Tt.size=function(Nt){return arguments.length?(dt=(le=Nt)==null,Tt):dt?null:le},Tt.nodeSize=function(Nt){return arguments.length?(dt=(le=Nt)!=null,Tt):dt?le:null},g_(Tt,x)};function Pw(x){return 1+_.max(x,function(H){return H.y})}function b5(x){return x.reduce(function(H,le){return H+le.x},0)/x.length}function Fw(x){var H=x.children;return H&&H.length?Fw(H[0]):x}function x3(x){var H=x.children,le;return H&&(le=H.length)?x3(H[le-1]):x}_.layout.treemap=function(){var x=_.layout.hierarchy(),H=Math.round,le=[1,1],dt=null,Tt=cb,Nt=!1,ci,Fn="squarify",zp=.5*(1+Math.sqrt(5));function Yp(z0,sm){for(var um=-1,Sm=z0.length,Tm,fm;++um<Sm;)fm=(Tm=z0[um]).value*(sm<0?0:sm),Tm.area=isNaN(fm)||fm<=0?0:fm}function Jp(z0){var sm=z0.children;if(sm&&sm.length){var um=Tt(z0),Sm=[],Tm=sm.slice(),fm,_1=1/0,i,s=Fn==="slice"?um.dx:Fn==="dice"?um.dy:Fn==="slice-dice"?z0.depth&1?um.dy:um.dx:Math.min(um.dx,um.dy),f;for(Yp(Tm,um.dx*um.dy/z0.value),Sm.area=0;(f=Tm.length)>0;)Sm.push(fm=Tm[f-1]),Sm.area+=fm.area,Fn!=="squarify"||(i=P0(Sm,s))<=_1?(Tm.pop(),_1=i):(Sm.area-=Sm.pop().area,dm(Sm,s,um,!1),s=Math.min(um.dx,um.dy),Sm.length=Sm.area=0,_1=1/0);Sm.length&&(dm(Sm,s,um,!0),Sm.length=Sm.area=0),sm.forEach(Jp)}}function N0(z0){var sm=z0.children;if(sm&&sm.length){var um=Tt(z0),Sm=sm.slice(),Tm,fm=[];for(Yp(Sm,um.dx*um.dy/z0.value),fm.area=0;Tm=Sm.pop();)fm.push(Tm),fm.area+=Tm.area,Tm.z!=null&&(dm(fm,Tm.z?um.dx:um.dy,um,!Sm.length),fm.length=fm.area=0);sm.forEach(N0)}}function P0(z0,sm){for(var um=z0.area,Sm,Tm=0,fm=1/0,_1=-1,i=z0.length;++_1<i;)(Sm=z0[_1].area)&&(Sm<fm&&(fm=Sm),Sm>Tm&&(Tm=Sm));return um*=um,sm*=sm,um?Math.max(sm*Tm*zp/um,um/(sm*fm*zp)):1/0}function dm(z0,sm,um,Sm){var Tm=-1,fm=z0.length,_1=um.x,i=um.y,s=sm?H(z0.area/sm):0,f;if(sm==um.dx){for((Sm||s>um.dy)&&(s=um.dy);++Tm<fm;)f=z0[Tm],f.x=_1,f.y=i,f.dy=s,_1+=f.dx=Math.min(um.x+um.dx-_1,s?H(f.area/s):0);f.z=!0,f.dx+=um.x+um.dx-_1,um.y+=s,um.dy-=s}else{for((Sm||s>um.dx)&&(s=um.dx);++Tm<fm;)f=z0[Tm],f.x=_1,f.y=i,f.dx=s,i+=f.dy=Math.min(um.y+um.dy-i,s?H(f.area/s):0);f.z=!1,f.dy+=um.y+um.dy-i,um.x+=s,um.dx-=s}}function Mm(z0){var sm=ci||x(z0),um=sm[0];return um.x=um.y=0,um.value?(um.dx=le[0],um.dy=le[1]):um.dx=um.dy=0,ci&&x.revalue(um),Yp([um],um.dx*um.dy/um.value),(ci?N0:Jp)(um),Nt&&(ci=sm),sm}return Mm.size=function(z0){return arguments.length?(le=z0,Mm):le},Mm.padding=function(z0){if(!arguments.length)return dt;function sm(Tm){var fm=z0.call(Mm,Tm,Tm.depth);return fm==null?cb(Tm):Xv(Tm,typeof fm=="number"?[fm,fm,fm,fm]:fm)}function um(Tm){return Xv(Tm,z0)}var Sm;return Tt=(dt=z0)==null?cb:(Sm=typeof z0)=="function"?sm:(Sm==="number"&&(z0=[z0,z0,z0,z0]),um),Mm},Mm.round=function(z0){return arguments.length?(H=z0?Math.round:Number,Mm):H!=Number},Mm.sticky=function(z0){return arguments.length?(Nt=z0,ci=null,Mm):Nt},Mm.ratio=function(z0){return arguments.length?(zp=z0,Mm):zp},Mm.mode=function(z0){return arguments.length?(Fn=z0+"",Mm):Fn},g_(Mm,x)};function cb(x){return{x:x.x,y:x.y,dx:x.dx,dy:x.dy}}function Xv(x,H){var le=x.x+H[3],dt=x.y+H[0],Tt=x.dx-H[1]-H[3],Nt=x.dy-H[0]-H[2];return Tt<0&&(le+=Tt/2,Tt=0),Nt<0&&(dt+=Nt/2,Nt=0),{x:le,y:dt,dx:Tt,dy:Nt}}_.random={normal:function(x,H){var le=arguments.length;return le<2&&(H=1),le<1&&(x=0),function(){var dt,Tt,Nt;do dt=Math.random()*2-1,Tt=Math.random()*2-1,Nt=dt*dt+Tt*Tt;while(!Nt||Nt>1);return x+H*dt*Math.sqrt(-2*Math.log(Nt)/Nt)}},logNormal:function(){var x=_.random.normal.apply(_,arguments);return function(){return Math.exp(x())}},bates:function(x){var H=_.random.irwinHall(x);return function(){return H()/x}},irwinHall:function(x){return function(){for(var H=0,le=0;le<x;le++)H+=Math.random();return H}}},_.scale={};function V2(x){var H=x[0],le=x[x.length-1];return H<le?[H,le]:[le,H]}function Ry(x){return x.rangeExtent?x.rangeExtent():V2(x.range())}function w5(x,H,le,dt){var Tt=le(x[0],x[1]),Nt=dt(H[0],H[1]);return function(ci){return Nt(Tt(ci))}}function hb(x,H){var le=0,dt=x.length-1,Tt=x[le],Nt=x[dt],ci;return Nt<Tt&&(ci=le,le=dt,dt=ci,ci=Tt,Tt=Nt,Nt=ci),x[le]=H.floor(Tt),x[dt]=H.ceil(Nt),x}function zw(x){return x?{floor:function(H){return Math.floor(H/x)*x},ceil:function(H){return Math.ceil(H/x)*x}}:_3}var _3={floor:vt,ceil:vt};function b3(x,H,le,dt){var Tt=[],Nt=[],ci=0,Fn=Math.min(x.length,H.length)-1;for(x[Fn]<x[0]&&(x=x.slice().reverse(),H=H.slice().reverse());++ci<=Fn;)Tt.push(le(x[ci-1],x[ci])),Nt.push(dt(H[ci-1],H[ci]));return function(zp){var Yp=_.bisect(x,zp,1,Fn)-1;return Nt[Yp](Tt[Yp](zp))}}_.scale.linear=function(){return w_([0,1],[0,1],fy,!1)};function w_(x,H,le,dt){var Tt,Nt;function ci(){var zp=Math.min(x.length,H.length)>2?b3:w5,Yp=dt?bw:_w;return Tt=zp(x,H,Yp,le),Nt=zp(H,x,Yp,fy),Fn}function Fn(zp){return Tt(zp)}return Fn.invert=function(zp){return Nt(zp)},Fn.domain=function(zp){return arguments.length?(x=zp.map(Number),ci()):x},Fn.range=function(zp){return arguments.length?(H=zp,ci()):H},Fn.rangeRound=function(zp){return Fn.range(zp).interpolate(u3)},Fn.clamp=function(zp){return arguments.length?(dt=zp,ci()):dt},Fn.interpolate=function(zp){return arguments.length?(le=zp,ci()):le},Fn.ticks=function(zp){return S_(x,zp)},Fn.tickFormat=function(zp,Yp){return d3_scale_linearTickFormat(x,zp,Yp)},Fn.nice=function(zp){return E3(x,zp),ci()},Fn.copy=function(){return w_(x,H,le,dt)},ci()}function w3(x,H){return _.rebind(x,H,"range","rangeRound","interpolate","clamp")}function E3(x,H){return hb(x,zw(E_(x,H)[2])),hb(x,zw(E_(x,H)[2])),x}function E_(x,H){H==null&&(H=10);var le=V2(x),dt=le[1]-le[0],Tt=Math.pow(10,Math.floor(Math.log(dt/H)/Math.LN10)),Nt=H/dt*Tt;return Nt<=.15?Tt*=10:Nt<=.35?Tt*=5:Nt<=.75&&(Tt*=2),le[0]=Math.ceil(le[0]/Tt)*Tt,le[1]=Math.floor(le[1]/Tt)*Tt+Tt*.5,le[2]=Tt,le}function S_(x,H){return _.range.apply(_,E_(x,H))}_.scale.log=function(){return Iw(_.scale.linear().domain([0,1]),10,!0,[1,10])};function Iw(x,H,le,dt){function Tt(Fn){return(le?Math.log(Fn<0?0:Fn):-Math.log(Fn>0?0:-Fn))/Math.log(H)}function Nt(Fn){return le?Math.pow(H,Fn):-Math.pow(H,-Fn)}function ci(Fn){return x(Tt(Fn))}return ci.invert=function(Fn){return Nt(x.invert(Fn))},ci.domain=function(Fn){return arguments.length?(le=Fn[0]>=0,x.domain((dt=Fn.map(Number)).map(Tt)),ci):dt},ci.base=function(Fn){return arguments.length?(H=+Fn,x.domain(dt.map(Tt)),ci):H},ci.nice=function(){var Fn=hb(dt.map(Tt),le?Math:Uw);return x.domain(Fn),dt=Fn.map(Nt),ci},ci.ticks=function(){var Fn=V2(dt),zp=[],Yp=Fn[0],Jp=Fn[1],N0=Math.floor(Tt(Yp)),P0=Math.ceil(Tt(Jp)),dm=H%1?2:H;if(isFinite(P0-N0)){if(le){for(;N0<P0;N0++)for(var Mm=1;Mm<dm;Mm++)zp.push(Nt(N0)*Mm);zp.push(Nt(N0))}else for(zp.push(Nt(N0));N0++<P0;)for(var Mm=dm-1;Mm>0;Mm--)zp.push(Nt(N0)*Mm);for(N0=0;zp[N0]<Yp;N0++);for(P0=zp.length;zp[P0-1]>Jp;P0--);zp=zp.slice(N0,P0)}return zp},ci.copy=function(){return Iw(x.copy(),H,le,dt)},w3(ci,x)}var Uw={floor:function(x){return-Math.ceil(-x)},ceil:function(x){return-Math.floor(-x)}};_.scale.pow=function(){return Bw(_.scale.linear(),1,[0,1])};function Bw(x,H,le){var dt=T_(H),Tt=T_(1/H);function Nt(ci){return x(dt(ci))}return Nt.invert=function(ci){return Tt(x.invert(ci))},Nt.domain=function(ci){return arguments.length?(x.domain((le=ci.map(Number)).map(dt)),Nt):le},Nt.ticks=function(ci){return S_(le,ci)},Nt.tickFormat=function(ci,Fn){return d3_scale_linearTickFormat(le,ci,Fn)},Nt.nice=function(ci){return Nt.domain(E3(le,ci))},Nt.exponent=function(ci){return arguments.length?(dt=T_(H=ci),Tt=T_(1/H),x.domain(le.map(dt)),Nt):H},Nt.copy=function(){return Bw(x.copy(),H,le)},w3(Nt,x)}function T_(x){return function(H){return H<0?-Math.pow(-H,x):Math.pow(H,x)}}_.scale.sqrt=function(){return _.scale.pow().exponent(.5)},_.scale.ordinal=function(){return jw([],{t:"range",a:[[]]})};function jw(x,H){var le,dt,Tt;function Nt(Fn){return dt[((le.get(Fn)||(H.t==="range"?le.set(Fn,x.push(Fn)):NaN))-1)%dt.length]}function ci(Fn,zp){return _.range(x.length).map(function(Yp){return Fn+zp*Yp})}return Nt.domain=function(Fn){if(!arguments.length)return x;x=[],le=new X;for(var zp=-1,Yp=Fn.length,Jp;++zp<Yp;)le.has(Jp=Fn[zp])||le.set(Jp,x.push(Jp));return Nt[H.t].apply(Nt,H.a)},Nt.range=function(Fn){return arguments.length?(dt=Fn,Tt=0,H={t:"range",a:arguments},Nt):dt},Nt.rangePoints=function(Fn,zp){arguments.length<2&&(zp=0);var Yp=Fn[0],Jp=Fn[1],N0=x.length<2?(Yp=(Yp+Jp)/2,0):(Jp-Yp)/(x.length-1+zp);return dt=ci(Yp+N0*zp/2,N0),Tt=0,H={t:"rangePoints",a:arguments},Nt},Nt.rangeRoundPoints=function(Fn,zp){arguments.length<2&&(zp=0);var Yp=Fn[0],Jp=Fn[1],N0=x.length<2?(Yp=Jp=Math.round((Yp+Jp)/2),0):(Jp-Yp)/(x.length-1+zp)|0;return dt=ci(Yp+Math.round(N0*zp/2+(Jp-Yp-(x.length-1+zp)*N0)/2),N0),Tt=0,H={t:"rangeRoundPoints",a:arguments},Nt},Nt.rangeBands=function(Fn,zp,Yp){arguments.length<2&&(zp=0),arguments.length<3&&(Yp=zp);var Jp=Fn[1]<Fn[0],N0=Fn[Jp-0],P0=Fn[1-Jp],dm=(P0-N0)/(x.length-zp+2*Yp);return dt=ci(N0+dm*Yp,dm),Jp&&dt.reverse(),Tt=dm*(1-zp),H={t:"rangeBands",a:arguments},Nt},Nt.rangeRoundBands=function(Fn,zp,Yp){arguments.length<2&&(zp=0),arguments.length<3&&(Yp=zp);var Jp=Fn[1]<Fn[0],N0=Fn[Jp-0],P0=Fn[1-Jp],dm=Math.floor((P0-N0)/(x.length-zp+2*Yp));return dt=ci(N0+Math.round((P0-N0-(x.length-zp)*dm)/2),dm),Jp&&dt.reverse(),Tt=Math.round(dm*(1-zp)),H={t:"rangeRoundBands",a:arguments},Nt},Nt.rangeBand=function(){return Tt},Nt.rangeExtent=function(){return V2(H.a[0])},Nt.copy=function(){return jw(x,H)},Nt.domain(x)}_.scale.category10=function(){return _.scale.ordinal().range(E5)},_.scale.category20=function(){return _.scale.ordinal().range(Yx)},_.scale.category20b=function(){return _.scale.ordinal().range(Vw)},_.scale.category20c=function(){return _.scale.ordinal().range(Hw)};var E5=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(Lt),Yx=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(Lt),Vw=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(Lt),Hw=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(Lt);_.scale.quantile=function(){return db([],[])};function db(x,H){var le;function dt(){var Nt=0,ci=H.length;for(le=[];++Nt<ci;)le[Nt-1]=_.quantile(x,Nt/ci);return Tt}function Tt(Nt){if(!isNaN(Nt=+Nt))return H[_.bisect(le,Nt)]}return Tt.domain=function(Nt){return arguments.length?(x=Nt.map($).filter(j).sort(O),dt()):x},Tt.range=function(Nt){return arguments.length?(H=Nt,dt()):H},Tt.quantiles=function(){return le},Tt.invertExtent=function(Nt){return Nt=H.indexOf(Nt),Nt<0?[NaN,NaN]:[Nt>0?le[Nt-1]:x[0],Nt<le.length?le[Nt]:x[x.length-1]]},Tt.copy=function(){return db(x,H)},dt()}_.scale.quantize=function(){return Gw(0,1,[0,1])};function Gw(x,H,le){var dt,Tt;function Nt(Fn){return le[Math.max(0,Math.min(Tt,Math.floor(dt*(Fn-x))))]}function ci(){return dt=le.length/(H-x),Tt=le.length-1,Nt}return Nt.domain=function(Fn){return arguments.length?(x=+Fn[0],H=+Fn[Fn.length-1],ci()):[x,H]},Nt.range=function(Fn){return arguments.length?(le=Fn,ci()):le},Nt.invertExtent=function(Fn){return Fn=le.indexOf(Fn),Fn=Fn<0?NaN:Fn/dt+x,[Fn,Fn+1/dt]},Nt.copy=function(){return Gw(x,H,le)},ci()}_.scale.threshold=function(){return $w([.5],[0,1])};function $w(x,H){function le(dt){if(dt<=dt)return H[_.bisect(x,dt)]}return le.domain=function(dt){return arguments.length?(x=dt,le):x},le.range=function(dt){return arguments.length?(H=dt,le):H},le.invertExtent=function(dt){return dt=H.indexOf(dt),[x[dt-1],x[dt]]},le.copy=function(){return $w(x,H)},le}_.scale.identity=function(){return S3([0,1])};function S3(x){function H(le){return+le}return H.invert=H,H.domain=H.range=function(le){return arguments.length?(x=le.map(H),H):x},H.ticks=function(le){return S_(x,le)},H.tickFormat=function(le,dt){return d3_scale_linearTickFormat(x,le,dt)},H.copy=function(){return S3(x)},H}_.svg={};function T3(){return 0}_.svg.arc=function(){var x=S5,H=dx,le=T3,dt=H2,Tt=fb,Nt=M3,ci=Ww;function Fn(){var Yp=Math.max(0,+x.apply(this,arguments)),Jp=Math.max(0,+H.apply(this,arguments)),N0=Tt.apply(this,arguments)-Bp,P0=Nt.apply(this,arguments)-Bp,dm=Math.abs(P0-N0),Mm=N0>P0?0:1;if(Jp<Yp&&(z0=Jp,Jp=Yp,Yp=z0),dm>=Fp)return zp(Jp,Mm)+(Yp?zp(Yp,1-Mm):"")+"Z";var z0,sm,um,Sm,Tm=0,fm=0,_1,i,s,f,D,ve,ft,Ci,Zp=[];if((Sm=(+ci.apply(this,arguments)||0)/2)&&(um=dt===H2?Math.sqrt(Yp*Yp+Jp*Jp):+dt.apply(this,arguments),Mm||(fm*=-1),Jp&&(fm=T0(um/Jp*Math.sin(Sm))),Yp&&(Tm=T0(um/Yp*Math.sin(Sm)))),Jp){_1=Jp*Math.cos(N0+fm),i=Jp*Math.sin(N0+fm),s=Jp*Math.cos(P0-fm),f=Jp*Math.sin(P0-fm);var K0=Math.abs(P0-N0-2*fm)<=Wt?0:1;if(fm&&M_(_1,i,s,f)===Mm^K0){var Pm=(N0+P0)/2;_1=Jp*Math.cos(Pm),i=Jp*Math.sin(Pm),s=f=null}}else _1=i=0;if(Yp){D=Yp*Math.cos(P0-Tm),ve=Yp*Math.sin(P0-Tm),ft=Yp*Math.cos(N0+Tm),Ci=Yp*Math.sin(N0+Tm);var Xm=Math.abs(N0-P0+2*Tm)<=Wt?0:1;if(Tm&&M_(D,ve,ft,Ci)===1-Mm^Xm){var wm=(N0+P0)/2;D=Yp*Math.cos(wm),ve=Yp*Math.sin(wm),ft=Ci=null}}else D=ve=0;if(dm>qp&&(z0=Math.min(Math.abs(Jp-Yp)/2,+le.apply(this,arguments)))>.001){sm=Yp<Jp^Mm?0:1;var Am=z0,Lm=z0;if(dm<Wt){var X1=ft==null?[D,ve]:s==null?[_1,i]:Lg([_1,i],[ft,Ci],[s,f],[D,ve]),gg=_1-X1[0],Yg=i-X1[1],Rm=s-X1[0],_m=f-X1[1],Um=1/Math.sin(Math.acos((gg*Rm+Yg*_m)/(Math.sqrt(gg*gg+Yg*Yg)*Math.sqrt(Rm*Rm+_m*_m)))/2),v1=Math.sqrt(X1[0]*X1[0]+X1[1]*X1[1]);Lm=Math.min(z0,(Yp-v1)/(Um-1)),Am=Math.min(z0,(Jp-v1)/(Um+1))}if(s!=null){var Tg=Zx(ft==null?[D,ve]:[ft,Ci],[_1,i],Jp,Am,Mm),Zg=Zx([s,f],[D,ve],Jp,Am,Mm);z0===Am?Zp.push("M",Tg[0],"A",Am,",",Am," 0 0,",sm," ",Tg[1],"A",Jp,",",Jp," 0 ",1-Mm^M_(Tg[1][0],Tg[1][1],Zg[1][0],Zg[1][1]),",",Mm," ",Zg[1],"A",Am,",",Am," 0 0,",sm," ",Zg[0]):Zp.push("M",Tg[0],"A",Am,",",Am," 0 1,",sm," ",Zg[0])}else Zp.push("M",_1,",",i);if(ft!=null){var yg=Zx([_1,i],[ft,Ci],Yp,-Lm,Mm),iv=Zx([D,ve],s==null?[_1,i]:[s,f],Yp,-Lm,Mm);z0===Lm?Zp.push("L",iv[0],"A",Lm,",",Lm," 0 0,",sm," ",iv[1],"A",Yp,",",Yp," 0 ",Mm^M_(iv[1][0],iv[1][1],yg[1][0],yg[1][1]),",",1-Mm," ",yg[1],"A",Lm,",",Lm," 0 0,",sm," ",yg[0]):Zp.push("L",iv[0],"A",Lm,",",Lm," 0 0,",sm," ",yg[0])}else Zp.push("L",D,",",ve)}else Zp.push("M",_1,",",i),s!=null&&Zp.push("A",Jp,",",Jp," 0 ",K0,",",Mm," ",s,",",f),Zp.push("L",D,",",ve),ft!=null&&Zp.push("A",Yp,",",Yp," 0 ",Xm,",",1-Mm," ",ft,",",Ci);return Zp.push("Z"),Zp.join("")}function zp(Yp,Jp){return"M0,"+Yp+"A"+Yp+","+Yp+" 0 1,"+Jp+" 0,"+-Yp+"A"+Yp+","+Yp+" 0 1,"+Jp+" 0,"+Yp}return Fn.innerRadius=function(Yp){return arguments.length?(x=O0(Yp),Fn):x},Fn.outerRadius=function(Yp){return arguments.length?(H=O0(Yp),Fn):H},Fn.cornerRadius=function(Yp){return arguments.length?(le=O0(Yp),Fn):le},Fn.padRadius=function(Yp){return arguments.length?(dt=Yp==H2?H2:O0(Yp),Fn):dt},Fn.startAngle=function(Yp){return arguments.length?(Tt=O0(Yp),Fn):Tt},Fn.endAngle=function(Yp){return arguments.length?(Nt=O0(Yp),Fn):Nt},Fn.padAngle=function(Yp){return arguments.length?(ci=O0(Yp),Fn):ci},Fn.centroid=function(){var Yp=(+x.apply(this,arguments)+ +H.apply(this,arguments))/2,Jp=(+Tt.apply(this,arguments)+ +Nt.apply(this,arguments))/2-Bp;return[Math.cos(Jp)*Yp,Math.sin(Jp)*Yp]},Fn};var H2="auto";function S5(x){return x.innerRadius}function dx(x){return x.outerRadius}function fb(x){return x.startAngle}function M3(x){return x.endAngle}function Ww(x){return x&&x.padAngle}function M_(x,H,le,dt){return(x-le)*H-(H-dt)*x>0?0:1}function Zx(x,H,le,dt,Tt){var Nt=x[0]-H[0],ci=x[1]-H[1],Fn=(Tt?dt:-dt)/Math.sqrt(Nt*Nt+ci*ci),zp=Fn*ci,Yp=-Fn*Nt,Jp=x[0]+zp,N0=x[1]+Yp,P0=H[0]+zp,dm=H[1]+Yp,Mm=(Jp+P0)/2,z0=(N0+dm)/2,sm=P0-Jp,um=dm-N0,Sm=sm*sm+um*um,Tm=le-dt,fm=Jp*dm-P0*N0,_1=(um<0?-1:1)*Math.sqrt(Math.max(0,Tm*Tm*Sm-fm*fm)),i=(fm*um-sm*_1)/Sm,s=(-fm*sm-um*_1)/Sm,f=(fm*um+sm*_1)/Sm,D=(-fm*sm+um*_1)/Sm,ve=i-Mm,ft=s-z0,Ci=f-Mm,Zp=D-z0;return ve*ve+ft*ft>Ci*Ci+Zp*Zp&&(i=f,s=D),[[i-zp,s-Yp],[i*le/Tm,s*le/Tm]]}function rx(){return!0}function A3(x){var H=Eg,le=Qg,dt=rx,Tt=Py,Nt=Tt.key,ci=.7;function Fn(zp){var Yp=[],Jp=[],N0=-1,P0=zp.length,dm,Mm=O0(H),z0=O0(le);function sm(){Yp.push("M",Tt(x(Jp),ci))}for(;++N0<P0;)dt.call(this,dm=zp[N0],N0)?Jp.push([+Mm.call(this,dm,N0),+z0.call(this,dm,N0)]):Jp.length&&(sm(),Jp=[]);return Jp.length&&sm(),Yp.length?Yp.join(""):null}return Fn.x=function(zp){return arguments.length?(H=zp,Fn):H},Fn.y=function(zp){return arguments.length?(le=zp,Fn):le},Fn.defined=function(zp){return arguments.length?(dt=zp,Fn):dt},Fn.interpolate=function(zp){return arguments.length?(typeof zp=="function"?Nt=Tt=zp:Nt=(Tt=G2.get(zp)||Py).key,Fn):Nt},Fn.tension=function(zp){return arguments.length?(ci=zp,Fn):ci},Fn}_.svg.line=function(){return A3(vt)};var G2=_.map({linear:Py,"linear-closed":qw,step:T5,"step-before":Jx,"step-after":pb,basis:Xw,"basis-open":D5,"basis-closed":Yw,bundle:$2,cardinal:C5,"cardinal-open":M5,"cardinal-closed":A5,monotone:N3});G2.forEach(function(x,H){H.key=x,H.closed=/-closed$/.test(x)});function Py(x){return x.length>1?x.join("L"):x+"Z"}function qw(x){return x.join("L")+"Z"}function T5(x){for(var H=0,le=x.length,dt=x[0],Tt=[dt[0],",",dt[1]];++H<le;)Tt.push("H",(dt[0]+(dt=x[H])[0])/2,"V",dt[1]);return le>1&&Tt.push("H",dt[0]),Tt.join("")}function Jx(x){for(var H=0,le=x.length,dt=x[0],Tt=[dt[0],",",dt[1]];++H<le;)Tt.push("V",(dt=x[H])[1],"H",dt[0]);return Tt.join("")}function pb(x){for(var H=0,le=x.length,dt=x[0],Tt=[dt[0],",",dt[1]];++H<le;)Tt.push("H",(dt=x[H])[0],"V",dt[1]);return Tt.join("")}function M5(x,H){return x.length<4?Py(x):x[1]+mb(x.slice(1,-1),C3(x,H))}function A5(x,H){return x.length<3?qw(x):x[0]+mb((x.push(x[0]),x),C3([x[x.length-2]].concat(x,[x[1]]),H))}function C5(x,H){return x.length<3?Py(x):x[0]+mb(x,C3(x,H))}function mb(x,H){if(H.length<1||x.length!=H.length&&x.length!=H.length+2)return Py(x);var le=x.length!=H.length,dt="",Tt=x[0],Nt=x[1],ci=H[0],Fn=ci,zp=1;if(le&&(dt+="Q"+(Nt[0]-ci[0]*2/3)+","+(Nt[1]-ci[1]*2/3)+","+Nt[0]+","+Nt[1],Tt=x[1],zp=2),H.length>1){Fn=H[1],Nt=x[zp],zp++,dt+="C"+(Tt[0]+ci[0])+","+(Tt[1]+ci[1])+","+(Nt[0]-Fn[0])+","+(Nt[1]-Fn[1])+","+Nt[0]+","+Nt[1];for(var Yp=2;Yp<H.length;Yp++,zp++)Nt=x[zp],Fn=H[Yp],dt+="S"+(Nt[0]-Fn[0])+","+(Nt[1]-Fn[1])+","+Nt[0]+","+Nt[1]}if(le){var Jp=x[zp];dt+="Q"+(Nt[0]+Fn[0]*2/3)+","+(Nt[1]+Fn[1]*2/3)+","+Jp[0]+","+Jp[1]}return dt}function C3(x,H){for(var le=[],dt=(1-H)/2,Tt,Nt=x[0],ci=x[1],Fn=1,zp=x.length;++Fn<zp;)Tt=Nt,Nt=ci,ci=x[Fn],le.push([dt*(ci[0]-Tt[0]),dt*(ci[1]-Tt[1])]);return le}function Xw(x){if(x.length<3)return Py(x);var H=1,le=x.length,dt=x[0],Tt=dt[0],Nt=dt[1],ci=[Tt,Tt,Tt,(dt=x[1])[0]],Fn=[Nt,Nt,Nt,dt[1]],zp=[Tt,",",Nt,"L",Gy(nx,ci),",",Gy(nx,Fn)];for(x.push(x[le-1]);++H<=le;)dt=x[H],ci.shift(),ci.push(dt[0]),Fn.shift(),Fn.push(dt[1]),x2(zp,ci,Fn);return x.pop(),zp.push("L",dt),zp.join("")}function D5(x){if(x.length<4)return Py(x);for(var H=[],le=-1,dt=x.length,Tt,Nt=[0],ci=[0];++le<3;)Tt=x[le],Nt.push(Tt[0]),ci.push(Tt[1]);for(H.push(Gy(nx,Nt)+","+Gy(nx,ci)),--le;++le<dt;)Tt=x[le],Nt.shift(),Nt.push(Tt[0]),ci.shift(),ci.push(Tt[1]),x2(H,Nt,ci);return H.join("")}function Yw(x){for(var H,le=-1,dt=x.length,Tt=dt+4,Nt,ci=[],Fn=[];++le<4;)Nt=x[le%dt],ci.push(Nt[0]),Fn.push(Nt[1]);for(H=[Gy(nx,ci),",",Gy(nx,Fn)],--le;++le<Tt;)Nt=x[le%dt],ci.shift(),ci.push(Nt[0]),Fn.shift(),Fn.push(Nt[1]),x2(H,ci,Fn);return H.join("")}function $2(x,H){var le=x.length-1;if(le)for(var dt=x[0][0],Tt=x[0][1],Nt=x[le][0]-dt,ci=x[le][1]-Tt,Fn=-1,zp,Yp;++Fn<=le;)zp=x[Fn],Yp=Fn/le,zp[0]=H*zp[0]+(1-H)*(dt+Yp*Nt),zp[1]=H*zp[1]+(1-H)*(Tt+Yp*ci);return Xw(x)}function Gy(x,H){return x[0]*H[0]+x[1]*H[1]+x[2]*H[2]+x[3]*H[3]}var D3=[0,2/3,1/3,0],Zw=[0,1/3,2/3,0],nx=[0,1/6,2/3,1/6];function x2(x,H,le){x.push("C",Gy(D3,H),",",Gy(D3,le),",",Gy(Zw,H),",",Gy(Zw,le),",",Gy(nx,H),",",Gy(nx,le))}function gb(x,H){return(H[1]-x[1])/(H[0]-x[0])}function vb(x){for(var H=0,le=x.length-1,dt=[],Tt=x[0],Nt=x[1],ci=dt[0]=gb(Tt,Nt);++H<le;)dt[H]=(ci+(ci=gb(Tt=Nt,Nt=x[H+1])))/2;return dt[H]=ci,dt}function R3(x){for(var H=[],le,dt,Tt,Nt,ci=vb(x),Fn=-1,zp=x.length-1;++Fn<zp;)le=gb(x[Fn],x[Fn+1]),M(le)<qp?ci[Fn]=ci[Fn+1]=0:(dt=ci[Fn]/le,Tt=ci[Fn+1]/le,Nt=dt*dt+Tt*Tt,Nt>9&&(Nt=le*3/Math.sqrt(Nt),ci[Fn]=Nt*dt,ci[Fn+1]=Nt*Tt));for(Fn=-1;++Fn<=zp;)Nt=(x[Math.min(zp,Fn+1)][0]-x[Math.max(0,Fn-1)][0])/(6*(1+ci[Fn]*ci[Fn])),H.push([Nt||0,ci[Fn]*Nt||0]);return H}function N3(x){return x.length<3?Py(x):x[0]+mb(x,R3(x))}_.svg.line.radial=function(){var x=A3(A_);return x.radius=x.x,delete x.x,x.angle=x.y,delete x.y,x};function A_(x){for(var H,le=-1,dt=x.length,Tt,Nt;++le<dt;)H=x[le],Tt=H[0],Nt=H[1]-Bp,H[0]=Tt*Math.cos(Nt),H[1]=Tt*Math.sin(Nt);return x}function L3(x){var H=Eg,le=Eg,dt=0,Tt=Qg,Nt=rx,ci=Py,Fn=ci.key,zp=ci,Yp="L",Jp=.7;function N0(P0){var dm=[],Mm=[],z0=[],sm=-1,um=P0.length,Sm,Tm=O0(H),fm=O0(dt),_1=H===le?function(){return s}:O0(le),i=dt===Tt?function(){return f}:O0(Tt),s,f;function D(){dm.push("M",ci(x(z0),Jp),Yp,zp(x(Mm.reverse()),Jp),"Z")}for(;++sm<um;)Nt.call(this,Sm=P0[sm],sm)?(Mm.push([s=+Tm.call(this,Sm,sm),f=+fm.call(this,Sm,sm)]),z0.push([+_1.call(this,Sm,sm),+i.call(this,Sm,sm)])):Mm.length&&(D(),Mm=[],z0=[]);return Mm.length&&D(),dm.length?dm.join(""):null}return N0.x=function(P0){return arguments.length?(H=le=P0,N0):le},N0.x0=function(P0){return arguments.length?(H=P0,N0):H},N0.x1=function(P0){return arguments.length?(le=P0,N0):le},N0.y=function(P0){return arguments.length?(dt=Tt=P0,N0):Tt},N0.y0=function(P0){return arguments.length?(dt=P0,N0):dt},N0.y1=function(P0){return arguments.length?(Tt=P0,N0):Tt},N0.defined=function(P0){return arguments.length?(Nt=P0,N0):Nt},N0.interpolate=function(P0){return arguments.length?(typeof P0=="function"?Fn=ci=P0:Fn=(ci=G2.get(P0)||Py).key,zp=ci.reverse||ci,Yp=ci.closed?"M":"L",N0):Fn},N0.tension=function(P0){return arguments.length?(Jp=P0,N0):Jp},N0}Jx.reverse=pb,pb.reverse=Jx,_.svg.area=function(){return L3(vt)},_.svg.area.radial=function(){var x=L3(A_);return x.radius=x.x,delete x.x,x.innerRadius=x.x0,delete x.x0,x.outerRadius=x.x1,delete x.x1,x.angle=x.y,delete x.y,x.startAngle=x.y0,delete x.y0,x.endAngle=x.y1,delete x.y1,x};function k3(x){return x.source}function Jw(x){return x.target}_.svg.chord=function(){var x=k3,H=Jw,le=Kw,dt=fb,Tt=M3;function Nt(Jp,N0){var P0=ci(this,x,Jp,N0),dm=ci(this,H,Jp,N0);return"M"+P0.p0+zp(P0.r,P0.p1,P0.a1-P0.a0)+(Fn(P0,dm)?Yp(P0.r,P0.p1,P0.r,P0.p0):Yp(P0.r,P0.p1,dm.r,dm.p0)+zp(dm.r,dm.p1,dm.a1-dm.a0)+Yp(dm.r,dm.p1,P0.r,P0.p0))+"Z"}function ci(Jp,N0,P0,dm){var Mm=N0.call(Jp,P0,dm),z0=le.call(Jp,Mm,dm),sm=dt.call(Jp,Mm,dm)-Bp,um=Tt.call(Jp,Mm,dm)-Bp;return{r:z0,a0:sm,a1:um,p0:[z0*Math.cos(sm),z0*Math.sin(sm)],p1:[z0*Math.cos(um),z0*Math.sin(um)]}}function Fn(Jp,N0){return Jp.a0==N0.a0&&Jp.a1==N0.a1}function zp(Jp,N0,P0){return"A"+Jp+","+Jp+" 0 "+ +(P0>Wt)+",1 "+N0}function Yp(Jp,N0,P0,dm){return"Q 0,0 "+dm}return Nt.radius=function(Jp){return arguments.length?(le=O0(Jp),Nt):le},Nt.source=function(Jp){return arguments.length?(x=O0(Jp),Nt):x},Nt.target=function(Jp){return arguments.length?(H=O0(Jp),Nt):H},Nt.startAngle=function(Jp){return arguments.length?(dt=O0(Jp),Nt):dt},Nt.endAngle=function(Jp){return arguments.length?(Tt=O0(Jp),Nt):Tt},Nt};function Kw(x){return x.radius}_.svg.diagonal=function(){var x=k3,H=Jw,le=Qw;function dt(Tt,Nt){var ci=x.call(this,Tt,Nt),Fn=H.call(this,Tt,Nt),zp=(ci.y+Fn.y)/2,Yp=[ci,{x:ci.x,y:zp},{x:Fn.x,y:zp},Fn];return Yp=Yp.map(le),"M"+Yp[0]+"C"+Yp[1]+" "+Yp[2]+" "+Yp[3]}return dt.source=function(Tt){return arguments.length?(x=O0(Tt),dt):x},dt.target=function(Tt){return arguments.length?(H=O0(Tt),dt):H},dt.projection=function(Tt){return arguments.length?(le=Tt,dt):le},dt};function Qw(x){return[x.x,x.y]}_.svg.diagonal.radial=function(){var x=_.svg.diagonal(),H=Qw,le=x.projection;return x.projection=function(dt){return arguments.length?le(O3(H=dt)):H},x};function O3(x){return function(){var H=x.apply(this,arguments),le=H[0],dt=H[1]-Bp;return[le*Math.cos(dt),le*Math.sin(dt)]}}_.svg.symbol=function(){var x=yb,H=R5;function le(dt,Tt){return(D_.get(x.call(this,dt,Tt))||C_)(H.call(this,dt,Tt))}return le.type=function(dt){return arguments.length?(x=O0(dt),le):x},le.size=function(dt){return arguments.length?(H=O0(dt),le):H},le};function R5(){return 64}function yb(){return"circle"}function C_(x){var H=Math.sqrt(x/Wt);return"M0,"+H+"A"+H+","+H+" 0 1,1 0,"+-H+"A"+H+","+H+" 0 1,1 0,"+H+"Z"}var D_=_.map({circle:C_,cross:function(x){var H=Math.sqrt(x/5)/2;return"M"+-3*H+","+-H+"H"+-H+"V"+-3*H+"H"+H+"V"+-H+"H"+3*H+"V"+H+"H"+H+"V"+3*H+"H"+-H+"V"+H+"H"+-3*H+"Z"},diamond:function(x){var H=Math.sqrt(x/(2*W2)),le=H*W2;return"M0,"+-H+"L"+le+",0 0,"+H+" "+-le+",0Z"},square:function(x){var H=Math.sqrt(x)/2;return"M"+-H+","+-H+"L"+H+","+-H+" "+H+","+H+" "+-H+","+H+"Z"},"triangle-down":function(x){var H=Math.sqrt(x/xb),le=H*xb/2;return"M0,"+le+"L"+H+","+-le+" "+-H+","+-le+"Z"},"triangle-up":function(x){var H=Math.sqrt(x/xb),le=H*xb/2;return"M0,"+-le+"L"+H+","+le+" "+-H+","+le+"Z"}});_.svg.symbolTypes=D_.keys();var xb=Math.sqrt(3),W2=Math.tan(30*e0);rt.transition=function(x){for(var H=Fx||++F3,le=z3(x),dt=[],Tt,Nt,ci=R_||{time:Date.now(),ease:fw,delay:0,duration:250},Fn=-1,zp=this.length;++Fn<zp;){dt.push(Tt=[]);for(var Yp=this[Fn],Jp=-1,N0=Yp.length;++Jp<N0;)(Nt=Yp[Jp])&&Eb(Nt,Jp,le,H,ci),Tt.push(Nt)}return q2(dt,le,H)},rt.interrupt=function(x){return this.each(x==null?_b:P3(z3(x)))};var _b=P3(z3());function P3(x){return function(){var H,le,dt;(H=this[x])&&(dt=H[le=H.active])&&(dt.timer.c=null,dt.timer.t=NaN,--H.count?delete H[le]:delete this[x],H.active+=.5,dt.event&&dt.event.interrupt.call(this,this.__data__,dt.index))}}function q2(x,H,le){return pt(x,Sy),x.namespace=H,x.id=le,x}var Sy=[],F3=0,Fx,R_;Sy.call=rt.call,Sy.empty=rt.empty,Sy.node=rt.node,Sy.size=rt.size,_.transition=function(x,H){return x&&x.transition?Fx?x.transition(H):x:_.selection().transition(x)},_.transition.prototype=Sy,Sy.select=function(x){var H=this.id,le=this.namespace,dt=[],Tt,Nt,ci;x=Z(x);for(var Fn=-1,zp=this.length;++Fn<zp;){dt.push(Tt=[]);for(var Yp=this[Fn],Jp=-1,N0=Yp.length;++Jp<N0;)(ci=Yp[Jp])&&(Nt=x.call(ci,ci.__data__,Jp,Fn))?("__data__"in ci&&(Nt.__data__=ci.__data__),Eb(Nt,Jp,le,H,ci[le][H]),Tt.push(Nt)):Tt.push(null)}return q2(dt,le,H)},Sy.selectAll=function(x){var H=this.id,le=this.namespace,dt=[],Tt,Nt,ci,Fn,zp;x=we(x);for(var Yp=-1,Jp=this.length;++Yp<Jp;)for(var N0=this[Yp],P0=-1,dm=N0.length;++P0<dm;)if(ci=N0[P0]){zp=ci[le][H],Nt=x.call(ci,ci.__data__,P0,Yp),dt.push(Tt=[]);for(var Mm=-1,z0=Nt.length;++Mm<z0;)(Fn=Nt[Mm])&&Eb(Fn,Mm,le,H,zp),Tt.push(Fn)}return q2(dt,le,H)},Sy.filter=function(x){var H=[],le,dt,Tt;typeof x!="function"&&(x=Gt(x));for(var Nt=0,ci=this.length;Nt<ci;Nt++){H.push(le=[]);for(var dt=this[Nt],Fn=0,zp=dt.length;Fn<zp;Fn++)(Tt=dt[Fn])&&x.call(Tt,Tt.__data__,Fn,Nt)&&le.push(Tt)}return q2(H,this.namespace,this.id)},Sy.tween=function(x,H){var le=this.id,dt=this.namespace;return arguments.length<2?this.node()[dt][le].tween.get(x):c0(this,H==null?function(Tt){Tt[dt][le].tween.remove(x)}:function(Tt){Tt[dt][le].tween.set(x,H)})};function bb(x,H,le,dt){var Tt=x.id,Nt=x.namespace;return c0(x,typeof le=="function"?function(ci,Fn,zp){ci[Nt][Tt].tween.set(H,dt(le.call(ci,ci.__data__,Fn,zp)))}:(le=dt(le),function(ci){ci[Nt][Tt].tween.set(H,le)}))}Sy.attr=function(x,H){if(arguments.length<2){for(H in x)this.attr(H,x[H]);return this}var le=x=="transform"?h3:fy,dt=_.ns.qualify(x);function Tt(){this.removeAttribute(dt)}function Nt(){this.removeAttributeNS(dt.space,dt.local)}function ci(zp){return zp==null?Tt:(zp+="",function(){var Yp=this.getAttribute(dt),Jp;return Yp!==zp&&(Jp=le(Yp,zp),function(N0){this.setAttribute(dt,Jp(N0))})})}function Fn(zp){return zp==null?Nt:(zp+="",function(){var Yp=this.getAttributeNS(dt.space,dt.local),Jp;return Yp!==zp&&(Jp=le(Yp,zp),function(N0){this.setAttributeNS(dt.space,dt.local,Jp(N0))})})}return bb(this,"attr."+x,H,dt.local?Fn:ci)},Sy.attrTween=function(x,H){var le=_.ns.qualify(x);function dt(Nt,ci){var Fn=H.call(this,Nt,ci,this.getAttribute(le));return Fn&&function(zp){this.setAttribute(le,Fn(zp))}}function Tt(Nt,ci){var Fn=H.call(this,Nt,ci,this.getAttributeNS(le.space,le.local));return Fn&&function(zp){this.setAttributeNS(le.space,le.local,Fn(zp))}}return this.tween("attr."+x,le.local?Tt:dt)},Sy.style=function(x,H,le){var dt=arguments.length;if(dt<3){if(typeof x!="string"){dt<2&&(H="");for(le in x)this.style(le,x[le],H);return this}le=""}function Tt(){this.style.removeProperty(x)}function Nt(ci){return ci==null?Tt:(ci+="",function(){var Fn=w(this).getComputedStyle(this,null).getPropertyValue(x),zp;return Fn!==ci&&(zp=fy(Fn,ci),function(Yp){this.style.setProperty(x,zp(Yp),le)})})}return bb(this,"style."+x,H,Nt)},Sy.styleTween=function(x,H,le){arguments.length<3&&(le="");function dt(Tt,Nt){var ci=H.call(this,Tt,Nt,w(this).getComputedStyle(this,null).getPropertyValue(x));return ci&&function(Fn){this.style.setProperty(x,ci(Fn),le)}}return this.tween("style."+x,dt)},Sy.text=function(x){return bb(this,"text",x,wb)};function wb(x){return x==null&&(x=""),function(){this.textContent=x}}Sy.remove=function(){var x=this.namespace;return this.each("end.transition",function(){var H;this[x].count<2&&(H=this.parentNode)&&H.removeChild(this)})},Sy.ease=function(x){var H=this.id,le=this.namespace;return arguments.length<1?this.node()[le][H].ease:(typeof x!="function"&&(x=_.ease.apply(_,arguments)),c0(this,function(dt){dt[le][H].ease=x}))},Sy.delay=function(x){var H=this.id,le=this.namespace;return arguments.length<1?this.node()[le][H].delay:c0(this,typeof x=="function"?function(dt,Tt,Nt){dt[le][H].delay=+x.call(dt,dt.__data__,Tt,Nt)}:(x=+x,function(dt){dt[le][H].delay=x}))},Sy.duration=function(x){var H=this.id,le=this.namespace;return arguments.length<1?this.node()[le][H].duration:c0(this,typeof x=="function"?function(dt,Tt,Nt){dt[le][H].duration=Math.max(1,x.call(dt,dt.__data__,Tt,Nt))}:(x=Math.max(1,x),function(dt){dt[le][H].duration=x}))},Sy.each=function(x,H){var le=this.id,dt=this.namespace;if(arguments.length<2){var Tt=R_,Nt=Fx;try{Fx=le,c0(this,function(ci,Fn,zp){R_=ci[dt][le],x.call(ci,ci.__data__,Fn,zp)})}finally{R_=Tt,Fx=Nt}}else c0(this,function(ci){var Fn=ci[dt][le];(Fn.event||(Fn.event=_.dispatch("start","end","interrupt"))).on(x,H)});return this},Sy.transition=function(){for(var x=this.id,H=++F3,le=this.namespace,dt=[],Tt,Nt,ci,Fn,zp=0,Yp=this.length;zp<Yp;zp++){dt.push(Tt=[]);for(var Nt=this[zp],Jp=0,N0=Nt.length;Jp<N0;Jp++)(ci=Nt[Jp])&&(Fn=ci[le][x],Eb(ci,Jp,le,H,{time:Fn.time,ease:Fn.ease,delay:Fn.delay+Fn.duration,duration:Fn.duration})),Tt.push(ci)}return q2(dt,le,H)};function z3(x){return x==null?"__transition__":"__transition_"+x+"__"}function Eb(x,H,le,dt,Tt){var Nt=x[le]||(x[le]={active:0,count:0}),ci=Nt[dt],Fn,zp,Yp,Jp,N0;function P0(z0){var sm=ci.delay;if(zp.t=sm+Fn,sm<=z0)return dm(z0-sm);zp.c=dm}function dm(z0){var sm=Nt.active,um=Nt[sm];um&&(um.timer.c=null,um.timer.t=NaN,--Nt.count,delete Nt[sm],um.event&&um.event.interrupt.call(x,x.__data__,um.index));for(var Sm in Nt)if(+Sm<dt){var Tm=Nt[Sm];Tm.timer.c=null,Tm.timer.t=NaN,--Nt.count,delete Nt[Sm]}zp.c=Mm,H1(function(){return zp.c&&Mm(z0||1)&&(zp.c=null,zp.t=NaN),1},0,Fn),Nt.active=dt,ci.event&&ci.event.start.call(x,x.__data__,H),N0=[],ci.tween.forEach(function(fm,_1){(_1=_1.call(x,x.__data__,H))&&N0.push(_1)}),Jp=ci.ease,Yp=ci.duration}function Mm(z0){for(var sm=z0/Yp,um=Jp(sm),Sm=N0.length;Sm>0;)N0[--Sm].call(x,um);if(sm>=1)return ci.event&&ci.event.end.call(x,x.__data__,H),--Nt.count?delete Nt[dt]:delete x[le],1}ci||(Fn=Tt.time,zp=H1(P0,0,Fn),ci=Nt[dt]={tween:new X,time:Fn,timer:zp,delay:Tt.delay,duration:Tt.duration,ease:Tt.ease,index:H},Tt=null,++Nt.count)}_.svg.axis=function(){var x=_.scale.linear(),H=Sb,le=6,dt=6,Tt=3,Nt=[10],ci=null,Fn;function zp(Yp){Yp.each(function(){var Jp=_.select(this),N0=this.__chart__||x,P0=this.__chart__=x.copy(),dm=ci??(P0.ticks?P0.ticks.apply(P0,Nt):P0.domain()),Mm=Fn??(P0.tickFormat?P0.tickFormat.apply(P0,Nt):vt),z0=Jp.selectAll(".tick").data(dm,P0),sm=z0.enter().insert("g",".domain").attr("class","tick").style("opacity",qp),um=_.transition(z0.exit()).style("opacity",qp).remove(),Sm=_.transition(z0.order()).style("opacity",1),Tm=Math.max(le,0)+Tt,fm,_1=Ry(P0),i=Jp.selectAll(".domain").data([0]),s=(i.enter().append("path").attr("class","domain"),_.transition(i));sm.append("line"),sm.append("text");var f=sm.select("line"),D=Sm.select("line"),ve=z0.select("text").text(Mm),ft=sm.select("text"),Ci=Sm.select("text"),Zp=H==="top"||H==="left"?-1:1,K0,Pm,Xm,wm;if(H==="bottom"||H==="top"?(fm=Tb,K0="x",Xm="y",Pm="x2",wm="y2",ve.attr("dy",Zp<0?"0em":".71em").style("text-anchor","middle"),s.attr("d","M"+_1[0]+","+Zp*dt+"V0H"+_1[1]+"V"+Zp*dt)):(fm=U3,K0="y",Xm="x",Pm="y2",wm="x2",ve.attr("dy",".32em").style("text-anchor",Zp<0?"end":"start"),s.attr("d","M"+Zp*dt+","+_1[0]+"H0V"+_1[1]+"H"+Zp*dt)),f.attr(wm,Zp*le),ft.attr(Xm,Zp*Tm),D.attr(Pm,0).attr(wm,Zp*le),Ci.attr(K0,0).attr(Xm,Zp*Tm),P0.rangeBand){var Am=P0,Lm=Am.rangeBand()/2;N0=P0=function(X1){return Am(X1)+Lm}}else N0.rangeBand?N0=P0:um.call(fm,P0,N0);sm.call(fm,N0,P0),Sm.call(fm,P0,P0)})}return zp.scale=function(Yp){return arguments.length?(x=Yp,zp):x},zp.orient=function(Yp){return arguments.length?(H=Yp in I3?Yp+"":Sb,zp):H},zp.ticks=function(){return arguments.length?(Nt=m(arguments),zp):Nt},zp.tickValues=function(Yp){return arguments.length?(ci=Yp,zp):ci},zp.tickFormat=function(Yp){return arguments.length?(Fn=Yp,zp):Fn},zp.tickSize=function(Yp){var Jp=arguments.length;return Jp?(le=+Yp,dt=+arguments[Jp-1],zp):le},zp.innerTickSize=function(Yp){return arguments.length?(le=+Yp,zp):le},zp.outerTickSize=function(Yp){return arguments.length?(dt=+Yp,zp):dt},zp.tickPadding=function(Yp){return arguments.length?(Tt=+Yp,zp):Tt},zp.tickSubdivide=function(){return arguments.length&&zp},zp};var Sb="bottom",I3={top:1,right:1,bottom:1,left:1};function Tb(x,H,le){x.attr("transform",function(dt){var Tt=H(dt);return"translate("+(isFinite(Tt)?Tt:le(dt))+",0)"})}function U3(x,H,le){x.attr("transform",function(dt){var Tt=H(dt);return"translate(0,"+(isFinite(Tt)?Tt:le(dt))+")"})}_.svg.brush=function(){var x=ca(Jp,"brushstart","brush","brushend"),H=null,le=null,dt=[0,0],Tt=[0,0],Nt,ci,Fn=!0,zp=!0,Yp=N_[0];function Jp(z0){z0.each(function(){var sm=_.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",Mm).on("touchstart.brush",Mm),um=sm.selectAll(".background").data([0]);um.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),sm.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var Sm=sm.selectAll(".resize").data(Yp,vt);Sm.exit().remove(),Sm.enter().append("g").attr("class",function(i){return"resize "+i}).style("cursor",function(i){return e5[i]}).append("rect").attr("x",function(i){return/[ew]$/.test(i)?-3:null}).attr("y",function(i){return/^[ns]/.test(i)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),Sm.style("display",Jp.empty()?"none":null);var Tm=_.transition(sm),fm=_.transition(um),_1;H&&(_1=Ry(H),fm.attr("x",_1[0]).attr("width",_1[1]-_1[0]),P0(Tm)),le&&(_1=Ry(le),fm.attr("y",_1[0]).attr("height",_1[1]-_1[0]),dm(Tm)),N0(Tm)})}Jp.event=function(z0){z0.each(function(){var sm=x.of(this,arguments),um={x:dt,y:Tt,i:Nt,j:ci},Sm=this.__chart__||um;this.__chart__=um,Fx?_.select(this).transition().each("start.brush",function(){Nt=Sm.i,ci=Sm.j,dt=Sm.x,Tt=Sm.y,sm({type:"brushstart"})}).tween("brush:brush",function(){var Tm=gx(dt,um.x),fm=gx(Tt,um.y);return Nt=ci=null,function(_1){dt=um.x=Tm(_1),Tt=um.y=fm(_1),sm({type:"brush",mode:"resize"})}}).each("end.brush",function(){Nt=um.i,ci=um.j,sm({type:"brush",mode:"resize"}),sm({type:"brushend"})}):(sm({type:"brushstart"}),sm({type:"brush",mode:"resize"}),sm({type:"brushend"}))})};function N0(z0){z0.selectAll(".resize").attr("transform",function(sm){return"translate("+dt[+/e$/.test(sm)]+","+Tt[+/^s/.test(sm)]+")"})}function P0(z0){z0.select(".extent").attr("x",dt[0]),z0.selectAll(".extent,.n>rect,.s>rect").attr("width",dt[1]-dt[0])}function dm(z0){z0.select(".extent").attr("y",Tt[0]),z0.selectAll(".extent,.e>rect,.w>rect").attr("height",Tt[1]-Tt[0])}function Mm(){var z0=this,sm=_.select(_.event.target),um=x.of(z0,arguments),Sm=_.select(z0),Tm=sm.datum(),fm=!/^(n|s)$/.test(Tm)&&H,_1=!/^(e|w)$/.test(Tm)&&le,i=sm.classed("extent"),s=Dm(z0),f,D=_.mouse(z0),ve,ft=_.select(w(z0)).on("keydown.brush",K0).on("keyup.brush",Pm);if(_.event.changedTouches?ft.on("touchmove.brush",Xm).on("touchend.brush",Am):ft.on("mousemove.brush",Xm).on("mouseup.brush",Am),Sm.interrupt().selectAll("*").interrupt(),i)D[0]=dt[0]-D[0],D[1]=Tt[0]-D[1];else if(Tm){var Ci=+/w$/.test(Tm),Zp=+/^n/.test(Tm);ve=[dt[1-Ci]-D[0],Tt[1-Zp]-D[1]],D[0]=dt[Ci],D[1]=Tt[Zp]}else _.event.altKey&&(f=D.slice());Sm.style("pointer-events","none").selectAll(".resize").style("display",null),_.select("body").style("cursor",sm.style("cursor")),um({type:"brushstart"}),Xm();function K0(){_.event.keyCode==32&&(i||(f=null,D[0]-=dt[1],D[1]-=Tt[1],i=2),jt())}function Pm(){_.event.keyCode==32&&i==2&&(D[0]+=dt[1],D[1]+=Tt[1],i=0,jt())}function Xm(){var Lm=_.mouse(z0),X1=!1;ve&&(Lm[0]+=ve[0],Lm[1]+=ve[1]),i||(_.event.altKey?(f||(f=[(dt[0]+dt[1])/2,(Tt[0]+Tt[1])/2]),D[0]=dt[+(Lm[0]<f[0])],D[1]=Tt[+(Lm[1]<f[1])]):f=null),fm&&wm(Lm,H,0)&&(P0(Sm),X1=!0),_1&&wm(Lm,le,1)&&(dm(Sm),X1=!0),X1&&(N0(Sm),um({type:"brush",mode:i?"move":"resize"}))}function wm(Lm,X1,gg){var Yg=Ry(X1),Rm=Yg[0],_m=Yg[1],Um=D[gg],v1=gg?Tt:dt,Tg=v1[1]-v1[0],Zg,yg;if(i&&(Rm-=Um,_m-=Tg+Um),Zg=(gg?zp:Fn)?Math.max(Rm,Math.min(_m,Lm[gg])):Lm[gg],i?yg=(Zg+=Um)+Tg:(f&&(Um=Math.max(Rm,Math.min(_m,2*f[gg]-Zg))),Um<Zg?(yg=Zg,Zg=Um):yg=Um),v1[0]!=Zg||v1[1]!=yg)return gg?ci=null:Nt=null,v1[0]=Zg,v1[1]=yg,!0}function Am(){Xm(),Sm.style("pointer-events","all").selectAll(".resize").style("display",Jp.empty()?"none":null),_.select("body").style("cursor",null),ft.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),s(),um({type:"brushend"})}}return Jp.x=function(z0){return arguments.length?(H=z0,Yp=N_[!H<<1|!le],Jp):H},Jp.y=function(z0){return arguments.length?(le=z0,Yp=N_[!H<<1|!le],Jp):le},Jp.clamp=function(z0){return arguments.length?(H&&le?(Fn=!!z0[0],zp=!!z0[1]):H?Fn=!!z0:le&&(zp=!!z0),Jp):H&&le?[Fn,zp]:H?Fn:le?zp:null},Jp.extent=function(z0){var sm,um,Sm,Tm,fm;return arguments.length?(H&&(sm=z0[0],um=z0[1],le&&(sm=sm[0],um=um[0]),Nt=[sm,um],H.invert&&(sm=H(sm),um=H(um)),um<sm&&(fm=sm,sm=um,um=fm),(sm!=dt[0]||um!=dt[1])&&(dt=[sm,um])),le&&(Sm=z0[0],Tm=z0[1],H&&(Sm=Sm[1],Tm=Tm[1]),ci=[Sm,Tm],le.invert&&(Sm=le(Sm),Tm=le(Tm)),Tm<Sm&&(fm=Sm,Sm=Tm,Tm=fm),(Sm!=Tt[0]||Tm!=Tt[1])&&(Tt=[Sm,Tm])),Jp):(H&&(Nt?(sm=Nt[0],um=Nt[1]):(sm=dt[0],um=dt[1],H.invert&&(sm=H.invert(sm),um=H.invert(um)),um<sm&&(fm=sm,sm=um,um=fm))),le&&(ci?(Sm=ci[0],Tm=ci[1]):(Sm=Tt[0],Tm=Tt[1],le.invert&&(Sm=le.invert(Sm),Tm=le.invert(Tm)),Tm<Sm&&(fm=Sm,Sm=Tm,Tm=fm))),H&&le?[[sm,Sm],[um,Tm]]:H?[sm,um]:le&&[Sm,Tm])},Jp.clear=function(){return Jp.empty()||(dt=[0,0],Tt=[0,0],Nt=ci=null),Jp},Jp.empty=function(){return!!H&&dt[0]==dt[1]||!!le&&Tt[0]==Tt[1]},_.rebind(Jp,x,"on")};var e5={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},N_=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];_.text=U0(function(x){return x.responseText}),_.json=function(x,H){return mm(x,"application/json",Kx,H)};function Kx(x){return JSON.parse(x.responseText)}_.html=function(x,H){return mm(x,"text/html",Qx,H)};function Qx(x){var H=E.createRange();return H.selectNode(E.body),H.createContextualFragment(x.responseText)}_.xml=U0(function(x){return x.responseXML}),typeof ke=="object"&&ke.exports?ke.exports=_:this.d3=_}).apply(self)}),l=r((nt,ke)=>{(function(_,d){typeof nt=="object"&&typeof ke<"u"?d(nt):(_=_||self,d(_.d3=_.d3||{}))})(nt,function(_){var d=new Date,m=new Date;function E(Gt,Gp,c0,M0){function I0(k0){return Gt(k0=arguments.length===0?new Date:new Date(+k0)),k0}return I0.floor=function(k0){return Gt(k0=new Date(+k0)),k0},I0.ceil=function(k0){return Gt(k0=new Date(k0-1)),Gp(k0,1),Gt(k0),k0},I0.round=function(k0){var V0=I0(k0),$0=I0.ceil(k0);return k0-V0<$0-k0?V0:$0},I0.offset=function(k0,V0){return Gp(k0=new Date(+k0),V0==null?1:Math.floor(V0)),k0},I0.range=function(k0,V0,$0){var W0=[],gm;if(k0=I0.ceil(k0),$0=$0==null?1:Math.floor($0),!(k0<V0)||!($0>0))return W0;do W0.push(gm=new Date(+k0)),Gp(k0,$0),Gt(k0);while(gm<k0&&k0<V0);return W0},I0.filter=function(k0){return E(function(V0){if(V0>=V0)for(;Gt(V0),!k0(V0);)V0.setTime(V0-1)},function(V0,$0){if(V0>=V0)if($0<0)for(;++$0<=0;)for(;Gp(V0,-1),!k0(V0););else for(;--$0>=0;)for(;Gp(V0,1),!k0(V0););})},c0&&(I0.count=function(k0,V0){return d.setTime(+k0),m.setTime(+V0),Gt(d),Gt(m),Math.floor(c0(d,m))},I0.every=function(k0){return k0=Math.floor(k0),!isFinite(k0)||!(k0>0)?null:k0>1?I0.filter(M0?function(V0){return M0(V0)%k0===0}:function(V0){return I0.count(0,V0)%k0===0}):I0}),I0}var b=E(function(){},function(Gt,Gp){Gt.setTime(+Gt+Gp)},function(Gt,Gp){return Gp-Gt});b.every=function(Gt){return Gt=Math.floor(Gt),!isFinite(Gt)||!(Gt>0)?null:Gt>1?E(function(Gp){Gp.setTime(Math.floor(Gp/Gt)*Gt)},function(Gp,c0){Gp.setTime(+Gp+c0*Gt)},function(Gp,c0){return(c0-Gp)/Gt}):b};var w=b.range,S=1e3,C=6e4,p=36e5,F=864e5,A=6048e5,O=E(function(Gt){Gt.setTime(Gt-Gt.getMilliseconds())},function(Gt,Gp){Gt.setTime(+Gt+Gp*S)},function(Gt,Gp){return(Gp-Gt)/S},function(Gt){return Gt.getUTCSeconds()}),$=O.range,j=E(function(Gt){Gt.setTime(Gt-Gt.getMilliseconds()-Gt.getSeconds()*S)},function(Gt,Gp){Gt.setTime(+Gt+Gp*C)},function(Gt,Gp){return(Gp-Gt)/C},function(Gt){return Gt.getMinutes()}),z=j.range,I=E(function(Gt){Gt.setTime(Gt-Gt.getMilliseconds()-Gt.getSeconds()*S-Gt.getMinutes()*C)},function(Gt,Gp){Gt.setTime(+Gt+Gp*p)},function(Gt,Gp){return(Gp-Gt)/p},function(Gt){return Gt.getHours()}),G=I.range,M=E(function(Gt){Gt.setHours(0,0,0,0)},function(Gt,Gp){Gt.setDate(Gt.getDate()+Gp)},function(Gt,Gp){return(Gp-Gt-(Gp.getTimezoneOffset()-Gt.getTimezoneOffset())*C)/F},function(Gt){return Gt.getDate()-1}),L=M.range;function B(Gt){return E(function(Gp){Gp.setDate(Gp.getDate()-(Gp.getDay()+7-Gt)%7),Gp.setHours(0,0,0,0)},function(Gp,c0){Gp.setDate(Gp.getDate()+c0*7)},function(Gp,c0){return(c0-Gp-(c0.getTimezoneOffset()-Gp.getTimezoneOffset())*C)/A})}var X=B(0),ee=B(1),yt=B(2),Ze=B(3),Re=B(4),Q=B(5),xt=B(6),tt=X.range,ht=ee.range,it=yt.range,ut=Ze.range,vt=Re.range,_t=Q.range,Le=xt.range,wt=E(function(Gt){Gt.setDate(1),Gt.setHours(0,0,0,0)},function(Gt,Gp){Gt.setMonth(Gt.getMonth()+Gp)},function(Gt,Gp){return Gp.getMonth()-Gt.getMonth()+(Gp.getFullYear()-Gt.getFullYear())*12},function(Gt){return Gt.getMonth()}),St=wt.range,Ut=E(function(Gt){Gt.setMonth(0,1),Gt.setHours(0,0,0,0)},function(Gt,Gp){Gt.setFullYear(Gt.getFullYear()+Gp)},function(Gt,Gp){return Gp.getFullYear()-Gt.getFullYear()},function(Gt){return Gt.getFullYear()});Ut.every=function(Gt){return!isFinite(Gt=Math.floor(Gt))||!(Gt>0)?null:E(function(Gp){Gp.setFullYear(Math.floor(Gp.getFullYear()/Gt)*Gt),Gp.setMonth(0,1),Gp.setHours(0,0,0,0)},function(Gp,c0){Gp.setFullYear(Gp.getFullYear()+c0*Gt)})};var kt=Ut.range,jt=E(function(Gt){Gt.setUTCSeconds(0,0)},function(Gt,Gp){Gt.setTime(+Gt+Gp*C)},function(Gt,Gp){return(Gp-Gt)/C},function(Gt){return Gt.getUTCMinutes()}),aa=jt.range,ca=E(function(Gt){Gt.setUTCMinutes(0,0,0)},function(Gt,Gp){Gt.setTime(+Gt+Gp*p)},function(Gt,Gp){return(Gp-Gt)/p},function(Gt){return Gt.getUTCHours()}),Cp=ca.range,pt=E(function(Gt){Gt.setUTCHours(0,0,0,0)},function(Gt,Gp){Gt.setUTCDate(Gt.getUTCDate()+Gp)},function(Gt,Gp){return(Gp-Gt)/F},function(Gt){return Gt.getUTCDate()-1}),gt=pt.range;function te(Gt){return E(function(Gp){Gp.setUTCDate(Gp.getUTCDate()-(Gp.getUTCDay()+7-Gt)%7),Gp.setUTCHours(0,0,0,0)},function(Gp,c0){Gp.setUTCDate(Gp.getUTCDate()+c0*7)},function(Gp,c0){return(c0-Gp)/A})}var Et=te(0),zt=te(1),rt=te(2),Z=te(3),we=te(4),ot=te(5),mt=te(6),It=Et.range,Yt=zt.range,Sr=rt.range,Op=Z.range,Hp=we.range,n0=ot.range,R0=mt.range,w0=E(function(Gt){Gt.setUTCDate(1),Gt.setUTCHours(0,0,0,0)},function(Gt,Gp){Gt.setUTCMonth(Gt.getUTCMonth()+Gp)},function(Gt,Gp){return Gp.getUTCMonth()-Gt.getUTCMonth()+(Gp.getUTCFullYear()-Gt.getUTCFullYear())*12},function(Gt){return Gt.getUTCMonth()}),_0=w0.range,ha=E(function(Gt){Gt.setUTCMonth(0,1),Gt.setUTCHours(0,0,0,0)},function(Gt,Gp){Gt.setUTCFullYear(Gt.getUTCFullYear()+Gp)},function(Gt,Gp){return Gp.getUTCFullYear()-Gt.getUTCFullYear()},function(Gt){return Gt.getUTCFullYear()});ha.every=function(Gt){return!isFinite(Gt=Math.floor(Gt))||!(Gt>0)?null:E(function(Gp){Gp.setUTCFullYear(Math.floor(Gp.getUTCFullYear()/Gt)*Gt),Gp.setUTCMonth(0,1),Gp.setUTCHours(0,0,0,0)},function(Gp,c0){Gp.setUTCFullYear(Gp.getUTCFullYear()+c0*Gt)})};var Rp=ha.range;_.timeDay=M,_.timeDays=L,_.timeFriday=Q,_.timeFridays=_t,_.timeHour=I,_.timeHours=G,_.timeInterval=E,_.timeMillisecond=b,_.timeMilliseconds=w,_.timeMinute=j,_.timeMinutes=z,_.timeMonday=ee,_.timeMondays=ht,_.timeMonth=wt,_.timeMonths=St,_.timeSaturday=xt,_.timeSaturdays=Le,_.timeSecond=O,_.timeSeconds=$,_.timeSunday=X,_.timeSundays=tt,_.timeThursday=Re,_.timeThursdays=vt,_.timeTuesday=yt,_.timeTuesdays=it,_.timeWednesday=Ze,_.timeWednesdays=ut,_.timeWeek=X,_.timeWeeks=tt,_.timeYear=Ut,_.timeYears=kt,_.utcDay=pt,_.utcDays=gt,_.utcFriday=ot,_.utcFridays=n0,_.utcHour=ca,_.utcHours=Cp,_.utcMillisecond=b,_.utcMilliseconds=w,_.utcMinute=jt,_.utcMinutes=aa,_.utcMonday=zt,_.utcMondays=Yt,_.utcMonth=w0,_.utcMonths=_0,_.utcSaturday=mt,_.utcSaturdays=R0,_.utcSecond=O,_.utcSeconds=$,_.utcSunday=Et,_.utcSundays=It,_.utcThursday=we,_.utcThursdays=Hp,_.utcTuesday=rt,_.utcTuesdays=Sr,_.utcWednesday=Z,_.utcWednesdays=Op,_.utcWeek=Et,_.utcWeeks=It,_.utcYear=ha,_.utcYears=Rp,Object.defineProperty(_,"__esModule",{value:!0})})}),u=r((nt,ke)=>{(function(_,d){typeof nt=="object"&&typeof ke<"u"?d(nt,l()):(_=_||self,d(_.d3=_.d3||{},_.d3))})(nt,function(_,d){function m(Yo){if(0<=Yo.y&&Yo.y<100){var qp=new Date(-1,Yo.m,Yo.d,Yo.H,Yo.M,Yo.S,Yo.L);return qp.setFullYear(Yo.y),qp}return new Date(Yo.y,Yo.m,Yo.d,Yo.H,Yo.M,Yo.S,Yo.L)}function E(Yo){if(0<=Yo.y&&Yo.y<100){var qp=new Date(Date.UTC(-1,Yo.m,Yo.d,Yo.H,Yo.M,Yo.S,Yo.L));return qp.setUTCFullYear(Yo.y),qp}return new Date(Date.UTC(Yo.y,Yo.m,Yo.d,Yo.H,Yo.M,Yo.S,Yo.L))}function b(Yo,qp,Mt){return{y:Yo,m:qp,d:Mt,H:0,M:0,S:0,L:0}}function w(Yo){var qp=Yo.dateTime,Mt=Yo.date,Wt=Yo.time,xn=Yo.periods,Fp=Yo.days,Bp=Yo.shortDays,e0=Yo.months,o0=Yo.shortMonths,C0=$(xn),T0=j(xn),A0=$(Fp),J0=j(Fp),em=$(Bp),tm=j(Bp),Nm=$(e0),o1=j(e0),N1=$(o0),F1=j(o0),B1={a:Cg,A:Ug,b:rg,B:Ng,c:null,d:wt,e:wt,f:aa,H:St,I:Ut,j:kt,L:jt,m:ca,M:Cp,p:dg,q:$m,Q:V0,s:$0,S:pt,u:gt,U:te,V:Et,w:zt,W:rt,x:null,X:null,y:Z,Y:we,Z:ot,"%":k0},u1={a:Xg,A:Lt,b:At,B:Wp,c:null,d:mt,e:mt,f:Hp,H:It,I:Yt,j:Sr,L:Op,m:n0,M:R0,p:Qp,q:g0,Q:V0,s:$0,S:w0,u:_0,U:ha,V:Rp,w:Gt,W:Gp,x:null,X:null,y:c0,Y:M0,Z:I0,"%":k0},zm={a:w1,A:s1,b:Q1,B:og,c:P1,d:Re,e:Re,f:ut,H:xt,I:xt,j:Q,L:it,m:Ze,M:tt,p:g1,q:yt,Q:_t,s:Le,S:ht,u:I,U:G,V:M,w:z,W:L,x:fg,X:bg,y:X,Y:B,Z:ee,"%":vt};B1.x=R1(Mt,B1),B1.X=R1(Wt,B1),B1.c=R1(qp,B1),u1.x=R1(Mt,u1),u1.X=R1(Wt,u1),u1.c=R1(qp,u1);function R1($p,Xp){return function(b0){var s0=[],O0=-1,U0=0,mm=$p.length,Jm,qm,b1;for(b0 instanceof Date||(b0=new Date(+b0));++O0<mm;)$p.charCodeAt(O0)===37&&(s0.push($p.slice(U0,O0)),(qm=S[Jm=$p.charAt(++O0)])!=null?Jm=$p.charAt(++O0):qm=Jm==="e"?" ":"0",(b1=Xp[Jm])&&(Jm=b1(b0,qm)),s0.push(Jm),U0=O0+1);return s0.push($p.slice(U0,O0)),s0.join("")}}function z1($p,Xp){return function(b0){var s0=b(1900,void 0,1),O0=E1(s0,$p,b0+="",0),U0,mm;if(O0!=b0.length)return null;if("Q"in s0)return new Date(s0.Q);if("s"in s0)return new Date(s0.s*1e3+("L"in s0?s0.L:0));if(Xp&&!("Z"in s0)&&(s0.Z=0),"p"in s0&&(s0.H=s0.H%12+s0.p*12),s0.m===void 0&&(s0.m="q"in s0?s0.q:0),"V"in s0){if(s0.V<1||s0.V>53)return null;"w"in s0||(s0.w=1),"Z"in s0?(U0=E(b(s0.y,0,1)),mm=U0.getUTCDay(),U0=mm>4||mm===0?d.utcMonday.ceil(U0):d.utcMonday(U0),U0=d.utcDay.offset(U0,(s0.V-1)*7),s0.y=U0.getUTCFullYear(),s0.m=U0.getUTCMonth(),s0.d=U0.getUTCDate()+(s0.w+6)%7):(U0=m(b(s0.y,0,1)),mm=U0.getDay(),U0=mm>4||mm===0?d.timeMonday.ceil(U0):d.timeMonday(U0),U0=d.timeDay.offset(U0,(s0.V-1)*7),s0.y=U0.getFullYear(),s0.m=U0.getMonth(),s0.d=U0.getDate()+(s0.w+6)%7)}else("W"in s0||"U"in s0)&&("w"in s0||(s0.w="u"in s0?s0.u%7:"W"in s0?1:0),mm="Z"in s0?E(b(s0.y,0,1)).getUTCDay():m(b(s0.y,0,1)).getDay(),s0.m=0,s0.d="W"in s0?(s0.w+6)%7+s0.W*7-(mm+5)%7:s0.w+s0.U*7-(mm+6)%7);return"Z"in s0?(s0.H+=s0.Z/100|0,s0.M+=s0.Z%100,E(s0)):m(s0)}}function E1($p,Xp,b0,s0){for(var O0=0,U0=Xp.length,mm=b0.length,Jm,qm;O0<U0;){if(s0>=mm)return-1;if(Jm=Xp.charCodeAt(O0++),Jm===37){if(Jm=Xp.charAt(O0++),qm=zm[Jm in S?Xp.charAt(O0++):Jm],!qm||(s0=qm($p,b0,s0))<0)return-1}else if(Jm!=b0.charCodeAt(s0++))return-1}return s0}function g1($p,Xp,b0){var s0=C0.exec(Xp.slice(b0));return s0?($p.p=T0[s0[0].toLowerCase()],b0+s0[0].length):-1}function w1($p,Xp,b0){var s0=em.exec(Xp.slice(b0));return s0?($p.w=tm[s0[0].toLowerCase()],b0+s0[0].length):-1}function s1($p,Xp,b0){var s0=A0.exec(Xp.slice(b0));return s0?($p.w=J0[s0[0].toLowerCase()],b0+s0[0].length):-1}function Q1($p,Xp,b0){var s0=N1.exec(Xp.slice(b0));return s0?($p.m=F1[s0[0].toLowerCase()],b0+s0[0].length):-1}function og($p,Xp,b0){var s0=Nm.exec(Xp.slice(b0));return s0?($p.m=o1[s0[0].toLowerCase()],b0+s0[0].length):-1}function P1($p,Xp,b0){return E1($p,qp,Xp,b0)}function fg($p,Xp,b0){return E1($p,Mt,Xp,b0)}function bg($p,Xp,b0){return E1($p,Wt,Xp,b0)}function Cg($p){return Bp[$p.getDay()]}function Ug($p){return Fp[$p.getDay()]}function rg($p){return o0[$p.getMonth()]}function Ng($p){return e0[$p.getMonth()]}function dg($p){return xn[+($p.getHours()>=12)]}function $m($p){return 1+~~($p.getMonth()/3)}function Xg($p){return Bp[$p.getUTCDay()]}function Lt($p){return Fp[$p.getUTCDay()]}function At($p){return o0[$p.getUTCMonth()]}function Wp($p){return e0[$p.getUTCMonth()]}function Qp($p){return xn[+($p.getUTCHours()>=12)]}function g0($p){return 1+~~($p.getUTCMonth()/3)}return{format:function($p){var Xp=R1($p+="",B1);return Xp.toString=function(){return $p},Xp},parse:function($p){var Xp=z1($p+="",!1);return Xp.toString=function(){return $p},Xp},utcFormat:function($p){var Xp=R1($p+="",u1);return Xp.toString=function(){return $p},Xp},utcParse:function($p){var Xp=z1($p+="",!0);return Xp.toString=function(){return $p},Xp}}}var S={"-":"",_:" ",0:"0"},C=/^\s*\d+/,p=/^%/,F=/[\\^$*+?|[\]().{}]/g;function A(Yo,qp,Mt){var Wt=Yo<0?"-":"",xn=(Wt?-Yo:Yo)+"",Fp=xn.length;return Wt+(Fp<Mt?new Array(Mt-Fp+1).join(qp)+xn:xn)}function O(Yo){return Yo.replace(F,"\\$&")}function $(Yo){return new RegExp("^(?:"+Yo.map(O).join("|")+")","i")}function j(Yo){for(var qp={},Mt=-1,Wt=Yo.length;++Mt<Wt;)qp[Yo[Mt].toLowerCase()]=Mt;return qp}function z(Yo,qp,Mt){var Wt=C.exec(qp.slice(Mt,Mt+1));return Wt?(Yo.w=+Wt[0],Mt+Wt[0].length):-1}function I(Yo,qp,Mt){var Wt=C.exec(qp.slice(Mt,Mt+1));return Wt?(Yo.u=+Wt[0],Mt+Wt[0].length):-1}function G(Yo,qp,Mt){var Wt=C.exec(qp.slice(Mt,Mt+2));return Wt?(Yo.U=+Wt[0],Mt+Wt[0].length):-1}function M(Yo,qp,Mt){var Wt=C.exec(qp.slice(Mt,Mt+2));return Wt?(Yo.V=+Wt[0],Mt+Wt[0].length):-1}function L(Yo,qp,Mt){var Wt=C.exec(qp.slice(Mt,Mt+2));return Wt?(Yo.W=+Wt[0],Mt+Wt[0].length):-1}function B(Yo,qp,Mt){var Wt=C.exec(qp.slice(Mt,Mt+4));return Wt?(Yo.y=+Wt[0],Mt+Wt[0].length):-1}function X(Yo,qp,Mt){var Wt=C.exec(qp.slice(Mt,Mt+2));return Wt?(Yo.y=+Wt[0]+(+Wt[0]>68?1900:2e3),Mt+Wt[0].length):-1}function ee(Yo,qp,Mt){var Wt=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(qp.slice(Mt,Mt+6));return Wt?(Yo.Z=Wt[1]?0:-(Wt[2]+(Wt[3]||"00")),Mt+Wt[0].length):-1}function yt(Yo,qp,Mt){var Wt=C.exec(qp.slice(Mt,Mt+1));return Wt?(Yo.q=Wt[0]*3-3,Mt+Wt[0].length):-1}function Ze(Yo,qp,Mt){var Wt=C.exec(qp.slice(Mt,Mt+2));return Wt?(Yo.m=Wt[0]-1,Mt+Wt[0].length):-1}function Re(Yo,qp,Mt){var Wt=C.exec(qp.slice(Mt,Mt+2));return Wt?(Yo.d=+Wt[0],Mt+Wt[0].length):-1}function Q(Yo,qp,Mt){var Wt=C.exec(qp.slice(Mt,Mt+3));return Wt?(Yo.m=0,Yo.d=+Wt[0],Mt+Wt[0].length):-1}function xt(Yo,qp,Mt){var Wt=C.exec(qp.slice(Mt,Mt+2));return Wt?(Yo.H=+Wt[0],Mt+Wt[0].length):-1}function tt(Yo,qp,Mt){var Wt=C.exec(qp.slice(Mt,Mt+2));return Wt?(Yo.M=+Wt[0],Mt+Wt[0].length):-1}function ht(Yo,qp,Mt){var Wt=C.exec(qp.slice(Mt,Mt+2));return Wt?(Yo.S=+Wt[0],Mt+Wt[0].length):-1}function it(Yo,qp,Mt){var Wt=C.exec(qp.slice(Mt,Mt+3));return Wt?(Yo.L=+Wt[0],Mt+Wt[0].length):-1}function ut(Yo,qp,Mt){var Wt=C.exec(qp.slice(Mt,Mt+6));return Wt?(Yo.L=Math.floor(Wt[0]/1e3),Mt+Wt[0].length):-1}function vt(Yo,qp,Mt){var Wt=p.exec(qp.slice(Mt,Mt+1));return Wt?Mt+Wt[0].length:-1}function _t(Yo,qp,Mt){var Wt=C.exec(qp.slice(Mt));return Wt?(Yo.Q=+Wt[0],Mt+Wt[0].length):-1}function Le(Yo,qp,Mt){var Wt=C.exec(qp.slice(Mt));return Wt?(Yo.s=+Wt[0],Mt+Wt[0].length):-1}function wt(Yo,qp){return A(Yo.getDate(),qp,2)}function St(Yo,qp){return A(Yo.getHours(),qp,2)}function Ut(Yo,qp){return A(Yo.getHours()%12||12,qp,2)}function kt(Yo,qp){return A(1+d.timeDay.count(d.timeYear(Yo),Yo),qp,3)}function jt(Yo,qp){return A(Yo.getMilliseconds(),qp,3)}function aa(Yo,qp){return jt(Yo,qp)+"000"}function ca(Yo,qp){return A(Yo.getMonth()+1,qp,2)}function Cp(Yo,qp){return A(Yo.getMinutes(),qp,2)}function pt(Yo,qp){return A(Yo.getSeconds(),qp,2)}function gt(Yo){var qp=Yo.getDay();return qp===0?7:qp}function te(Yo,qp){return A(d.timeSunday.count(d.timeYear(Yo)-1,Yo),qp,2)}function Et(Yo,qp){var Mt=Yo.getDay();return Yo=Mt>=4||Mt===0?d.timeThursday(Yo):d.timeThursday.ceil(Yo),A(d.timeThursday.count(d.timeYear(Yo),Yo)+(d.timeYear(Yo).getDay()===4),qp,2)}function zt(Yo){return Yo.getDay()}function rt(Yo,qp){return A(d.timeMonday.count(d.timeYear(Yo)-1,Yo),qp,2)}function Z(Yo,qp){return A(Yo.getFullYear()%100,qp,2)}function we(Yo,qp){return A(Yo.getFullYear()%1e4,qp,4)}function ot(Yo){var qp=Yo.getTimezoneOffset();return(qp>0?"-":(qp*=-1,"+"))+A(qp/60|0,"0",2)+A(qp%60,"0",2)}function mt(Yo,qp){return A(Yo.getUTCDate(),qp,2)}function It(Yo,qp){return A(Yo.getUTCHours(),qp,2)}function Yt(Yo,qp){return A(Yo.getUTCHours()%12||12,qp,2)}function Sr(Yo,qp){return A(1+d.utcDay.count(d.utcYear(Yo),Yo),qp,3)}function Op(Yo,qp){return A(Yo.getUTCMilliseconds(),qp,3)}function Hp(Yo,qp){return Op(Yo,qp)+"000"}function n0(Yo,qp){return A(Yo.getUTCMonth()+1,qp,2)}function R0(Yo,qp){return A(Yo.getUTCMinutes(),qp,2)}function w0(Yo,qp){return A(Yo.getUTCSeconds(),qp,2)}function _0(Yo){var qp=Yo.getUTCDay();return qp===0?7:qp}function ha(Yo,qp){return A(d.utcSunday.count(d.utcYear(Yo)-1,Yo),qp,2)}function Rp(Yo,qp){var Mt=Yo.getUTCDay();return Yo=Mt>=4||Mt===0?d.utcThursday(Yo):d.utcThursday.ceil(Yo),A(d.utcThursday.count(d.utcYear(Yo),Yo)+(d.utcYear(Yo).getUTCDay()===4),qp,2)}function Gt(Yo){return Yo.getUTCDay()}function Gp(Yo,qp){return A(d.utcMonday.count(d.utcYear(Yo)-1,Yo),qp,2)}function c0(Yo,qp){return A(Yo.getUTCFullYear()%100,qp,2)}function M0(Yo,qp){return A(Yo.getUTCFullYear()%1e4,qp,4)}function I0(){return"+0000"}function k0(){return"%"}function V0(Yo){return+Yo}function $0(Yo){return Math.floor(+Yo/1e3)}var W0;gm({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function gm(Yo){return W0=w(Yo),_.timeFormat=W0.format,_.timeParse=W0.parse,_.utcFormat=W0.utcFormat,_.utcParse=W0.utcParse,W0}var F0="%Y-%m-%dT%H:%M:%S.%LZ";function bm(Yo){return Yo.toISOString()}var Dm=Date.prototype.toISOString?bm:_.utcFormat(F0);function vm(Yo){var qp=new Date(Yo);return isNaN(qp)?null:qp}var km=+new Date("2000-01-01T00:00:00.000Z")?vm:_.utcParse(F0);_.isoFormat=Dm,_.isoParse=km,_.timeFormatDefaultLocale=gm,_.timeFormatLocale=w,Object.defineProperty(_,"__esModule",{value:!0})})}),c=r((nt,ke)=>{(function(_,d){typeof nt=="object"&&typeof ke<"u"?d(nt):(_=typeof globalThis<"u"?globalThis:_||self,d(_.d3=_.d3||{}))})(nt,function(_){function d(Ze){return Math.abs(Ze=Math.round(Ze))>=1e21?Ze.toLocaleString("en").replace(/,/g,""):Ze.toString(10)}function m(Ze,Re){if((Q=(Ze=Re?Ze.toExponential(Re-1):Ze.toExponential()).indexOf("e"))<0)return null;var Q,xt=Ze.slice(0,Q);return[xt.length>1?xt[0]+xt.slice(2):xt,+Ze.slice(Q+1)]}function E(Ze){return Ze=m(Math.abs(Ze)),Ze?Ze[1]:NaN}function b(Ze,Re){return function(Q,xt){for(var tt=Q.length,ht=[],it=0,ut=Ze[0],vt=0;tt>0&&ut>0&&(vt+ut+1>xt&&(ut=Math.max(1,xt-vt)),ht.push(Q.substring(tt-=ut,tt+ut)),!((vt+=ut+1)>xt));)ut=Ze[it=(it+1)%Ze.length];return ht.reverse().join(Re)}}function w(Ze){return function(Re){return Re.replace(/[0-9]/g,function(Q){return Ze[+Q]})}}var S=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function C(Ze){if(!(Re=S.exec(Ze)))throw new Error("invalid format: "+Ze);var Re;return new p({fill:Re[1],align:Re[2],sign:Re[3],symbol:Re[4],zero:Re[5],width:Re[6],comma:Re[7],precision:Re[8]&&Re[8].slice(1),trim:Re[9],type:Re[10]})}C.prototype=p.prototype;function p(Ze){this.fill=Ze.fill===void 0?" ":Ze.fill+"",this.align=Ze.align===void 0?">":Ze.align+"",this.sign=Ze.sign===void 0?"-":Ze.sign+"",this.symbol=Ze.symbol===void 0?"":Ze.symbol+"",this.zero=!!Ze.zero,this.width=Ze.width===void 0?void 0:+Ze.width,this.comma=!!Ze.comma,this.precision=Ze.precision===void 0?void 0:+Ze.precision,this.trim=!!Ze.trim,this.type=Ze.type===void 0?"":Ze.type+""}p.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function F(Ze){e:for(var Re=Ze.length,Q=1,xt=-1,tt;Q<Re;++Q)switch(Ze[Q]){case".":xt=tt=Q;break;case"0":xt===0&&(xt=Q),tt=Q;break;default:if(!+Ze[Q])break e;xt>0&&(xt=0);break}return xt>0?Ze.slice(0,xt)+Ze.slice(tt+1):Ze}var A;function O(Ze,Re){var Q=m(Ze,Re);if(!Q)return Ze+"";var xt=Q[0],tt=Q[1],ht=tt-(A=Math.max(-8,Math.min(8,Math.floor(tt/3)))*3)+1,it=xt.length;return ht===it?xt:ht>it?xt+new Array(ht-it+1).join("0"):ht>0?xt.slice(0,ht)+"."+xt.slice(ht):"0."+new Array(1-ht).join("0")+m(Ze,Math.max(0,Re+ht-1))[0]}function $(Ze,Re){var Q=m(Ze,Re);if(!Q)return Ze+"";var xt=Q[0],tt=Q[1];return tt<0?"0."+new Array(-tt).join("0")+xt:xt.length>tt+1?xt.slice(0,tt+1)+"."+xt.slice(tt+1):xt+new Array(tt-xt.length+2).join("0")}var j={"%":function(Ze,Re){return(Ze*100).toFixed(Re)},b:function(Ze){return Math.round(Ze).toString(2)},c:function(Ze){return Ze+""},d,e:function(Ze,Re){return Ze.toExponential(Re)},f:function(Ze,Re){return Ze.toFixed(Re)},g:function(Ze,Re){return Ze.toPrecision(Re)},o:function(Ze){return Math.round(Ze).toString(8)},p:function(Ze,Re){return $(Ze*100,Re)},r:$,s:O,X:function(Ze){return Math.round(Ze).toString(16).toUpperCase()},x:function(Ze){return Math.round(Ze).toString(16)}};function z(Ze){return Ze}var I=Array.prototype.map,G=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function M(Ze){var Re=Ze.grouping===void 0||Ze.thousands===void 0?z:b(I.call(Ze.grouping,Number),Ze.thousands+""),Q=Ze.currency===void 0?"":Ze.currency[0]+"",xt=Ze.currency===void 0?"":Ze.currency[1]+"",tt=Ze.decimal===void 0?".":Ze.decimal+"",ht=Ze.numerals===void 0?z:w(I.call(Ze.numerals,String)),it=Ze.percent===void 0?"%":Ze.percent+"",ut=Ze.minus===void 0?"-":Ze.minus+"",vt=Ze.nan===void 0?"NaN":Ze.nan+"";function _t(wt){wt=C(wt);var St=wt.fill,Ut=wt.align,kt=wt.sign,jt=wt.symbol,aa=wt.zero,ca=wt.width,Cp=wt.comma,pt=wt.precision,gt=wt.trim,te=wt.type;te==="n"?(Cp=!0,te="g"):j[te]||(pt===void 0&&(pt=12),gt=!0,te="g"),(aa||St==="0"&&Ut==="=")&&(aa=!0,St="0",Ut="=");var Et=jt==="$"?Q:jt==="#"&&/[boxX]/.test(te)?"0"+te.toLowerCase():"",zt=jt==="$"?xt:/[%p]/.test(te)?it:"",rt=j[te],Z=/[defgprs%]/.test(te);pt=pt===void 0?6:/[gprs]/.test(te)?Math.max(1,Math.min(21,pt)):Math.max(0,Math.min(20,pt));function we(ot){var mt=Et,It=zt,Yt,Sr,Op;if(te==="c")It=rt(ot)+It,ot="";else{ot=+ot;var Hp=ot<0||1/ot<0;if(ot=isNaN(ot)?vt:rt(Math.abs(ot),pt),gt&&(ot=F(ot)),Hp&&+ot==0&&kt!=="+"&&(Hp=!1),mt=(Hp?kt==="("?kt:ut:kt==="-"||kt==="("?"":kt)+mt,It=(te==="s"?G[8+A/3]:"")+It+(Hp&&kt==="("?")":""),Z){for(Yt=-1,Sr=ot.length;++Yt<Sr;)if(Op=ot.charCodeAt(Yt),48>Op||Op>57){It=(Op===46?tt+ot.slice(Yt+1):ot.slice(Yt))+It,ot=ot.slice(0,Yt);break}}}Cp&&!aa&&(ot=Re(ot,1/0));var n0=mt.length+ot.length+It.length,R0=n0<ca?new Array(ca-n0+1).join(St):"";switch(Cp&&aa&&(ot=Re(R0+ot,R0.length?ca-It.length:1/0),R0=""),Ut){case"<":ot=mt+ot+It+R0;break;case"=":ot=mt+R0+ot+It;break;case"^":ot=R0.slice(0,n0=R0.length>>1)+mt+ot+It+R0.slice(n0);break;default:ot=R0+mt+ot+It;break}return ht(ot)}return we.toString=function(){return wt+""},we}function Le(wt,St){var Ut=_t((wt=C(wt),wt.type="f",wt)),kt=Math.max(-8,Math.min(8,Math.floor(E(St)/3)))*3,jt=Math.pow(10,-kt),aa=G[8+kt/3];return function(ca){return Ut(jt*ca)+aa}}return{format:_t,formatPrefix:Le}}var L;B({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function B(Ze){return L=M(Ze),_.format=L.format,_.formatPrefix=L.formatPrefix,L}function X(Ze){return Math.max(0,-E(Math.abs(Ze)))}function ee(Ze,Re){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(E(Re)/3)))*3-E(Math.abs(Ze)))}function yt(Ze,Re){return Ze=Math.abs(Ze),Re=Math.abs(Re)-Ze,Math.max(0,E(Re)-E(Ze))+1}_.FormatSpecifier=p,_.formatDefaultLocale=B,_.formatLocale=M,_.formatSpecifier=C,_.precisionFixed=X,_.precisionPrefix=ee,_.precisionRound=yt,Object.defineProperty(_,"__esModule",{value:!0})})}),h=r((nt,ke)=>{ke.exports=function(_){for(var d=_.length,m,E=0;E<d;E++)if(m=_.charCodeAt(E),(m<9||m>13)&&m!==32&&m!==133&&m!==160&&m!==5760&&m!==6158&&(m<8192||m>8205)&&m!==8232&&m!==8233&&m!==8239&&m!==8287&&m!==8288&&m!==12288&&m!==65279)return!1;return!0}}),v=r((nt,ke)=>{var _=h();ke.exports=function(d){var m=typeof d;if(m==="string"){var E=d;if(d=+d,d===0&&_(E))return!1}else if(m!=="number")return!1;return d-d<1}}),g=r((nt,ke)=>{ke.exports={BADNUM:void 0,FP_SAFE:Number.MAX_VALUE*1e-4,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,ONEMILLI:1,ONEMICROSEC:.001,EPOCHJD:24405875e-1,ALMOST_EQUAL:1-1e-6,LOG_CLIP:10,MINUS_SIGN:""}}),T=r((nt,ke)=>{(function(_,d){typeof nt=="object"&&typeof ke<"u"?d(nt):(_=typeof globalThis<"u"?globalThis:_||self,d(_["base64-arraybuffer"]={}))})(nt,function(_){for(var d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",m=typeof Uint8Array>"u"?[]:new Uint8Array(256),E=0;E<d.length;E++)m[d.charCodeAt(E)]=E;var b=function(S){var C=new Uint8Array(S),p,F=C.length,A="";for(p=0;p<F;p+=3)A+=d[C[p]>>2],A+=d[(C[p]&3)<<4|C[p+1]>>4],A+=d[(C[p+1]&15)<<2|C[p+2]>>6],A+=d[C[p+2]&63];return F%3===2?A=A.substring(0,A.length-1)+"=":F%3===1&&(A=A.substring(0,A.length-2)+"=="),A},w=function(S){var C=S.length*.75,p=S.length,F,A=0,O,$,j,z;S[S.length-1]==="="&&(C--,S[S.length-2]==="="&&C--);var I=new ArrayBuffer(C),G=new Uint8Array(I);for(F=0;F<p;F+=4)O=m[S.charCodeAt(F)],$=m[S.charCodeAt(F+1)],j=m[S.charCodeAt(F+2)],z=m[S.charCodeAt(F+3)],G[A++]=O<<2|$>>4,G[A++]=($&15)<<4|j>>2,G[A++]=(j&3)<<6|z&63;return I};_.decode=w,_.encode=b,Object.defineProperty(_,"__esModule",{value:!0})})}),R=r((nt,ke)=>{ke.exports=function(_){return window&&window.process&&window.process.versions?Object.prototype.toString.call(_)==="[object Object]":Object.prototype.toString.call(_)==="[object Object]"&&Object.getPrototypeOf(_).hasOwnProperty("hasOwnProperty")}}),W=r(nt=>{var ke=T().decode,_=R(),d=Array.isArray,m=ArrayBuffer,E=DataView;function b(O){return m.isView(O)&&!(O instanceof E)}nt.isTypedArray=b;function w(O){return d(O)||b(O)}nt.isArrayOrTypedArray=w;function S(O){return!w(O[0])}nt.isArray1D=S,nt.ensureArray=function(O,$){return d(O)||(O=[]),O.length=$,O};var C={u1c:typeof Uint8ClampedArray>"u"?void 0:Uint8ClampedArray,i1:typeof Int8Array>"u"?void 0:Int8Array,u1:typeof Uint8Array>"u"?void 0:Uint8Array,i2:typeof Int16Array>"u"?void 0:Int16Array,u2:typeof Uint16Array>"u"?void 0:Uint16Array,i4:typeof Int32Array>"u"?void 0:Int32Array,u4:typeof Uint32Array>"u"?void 0:Uint32Array,f4:typeof Float32Array>"u"?void 0:Float32Array,f8:typeof Float64Array>"u"?void 0:Float64Array};C.uint8c=C.u1c,C.uint8=C.u1,C.int8=C.i1,C.uint16=C.u2,C.int16=C.i2,C.uint32=C.u4,C.int32=C.i4,C.float32=C.f4,C.float64=C.f8;function p(O){return O.constructor===ArrayBuffer}nt.isArrayBuffer=p,nt.decodeTypedArraySpec=function(O){var $=[],j=F(O),z=j.dtype,I=C[z];if(!I)throw new Error('Error in dtype: "'+z+'"');var G=I.BYTES_PER_ELEMENT,M=j.bdata;p(M)||(M=ke(M));var L=j.shape===void 0?[M.byteLength/G]:(""+j.shape).split(",");L.reverse();var B=L.length,X,ee,yt=+L[0],Ze=G*yt,Re=0;if(B===1)$=new I(M);else if(B===2)for(X=+L[1],ee=0;ee<X;ee++)$[ee]=new I(M,Re,yt),Re+=Ze;else if(B===3){X=+L[1];for(var Q=+L[2],xt=0;xt<Q;xt++)for($[xt]=[],ee=0;ee<X;ee++)$[xt][ee]=new I(M,Re,yt),Re+=Ze}else throw new Error("ndim: "+B+'is not supported with the shape:"'+j.shape+'"');return $.bdata=j.bdata,$.dtype=j.dtype,$.shape=L.reverse().join(","),O._inputArray=$,$},nt.isTypedArraySpec=function(O){return _(O)&&O.hasOwnProperty("dtype")&&typeof O.dtype=="string"&&O.hasOwnProperty("bdata")&&(typeof O.bdata=="string"||p(O.bdata))&&(O.shape===void 0||O.hasOwnProperty("shape")&&(typeof O.shape=="string"||typeof O.shape=="number"))};function F(O){return{bdata:O.bdata,dtype:O.dtype,shape:O.shape}}nt.concat=function(){var O=[],$=!0,j=0,z,I,G,M,L,B,X,ee;for(G=0;G<arguments.length;G++)M=arguments[G],B=M.length,B&&(I?O.push(M):(I=M,L=B),d(M)?z=!1:($=!1,j?z!==M.constructor&&(z=!1):z=M.constructor),j+=B);if(!j)return[];if(!O.length)return I;if($)return I.concat.apply(I,O);if(z){for(X=new z(j),X.set(I),G=0;G<O.length;G++)M=O[G],X.set(M,L),L+=M.length;return X}for(X=new Array(j),ee=0;ee<I.length;ee++)X[ee]=I[ee];for(G=0;G<O.length;G++){for(M=O[G],ee=0;ee<M.length;ee++)X[L+ee]=M[ee];L+=ee}return X},nt.maxRowLength=function(O){return A(O,Math.max,0)},nt.minRowLength=function(O){return A(O,Math.min,1/0)};function A(O,$,j){if(w(O))if(w(O[0])){for(var z=j,I=0;I<O.length;I++)z=$(z,O[I].length);return z}else return O.length;return 0}}),k=r((nt,ke)=>{var _=v(),d=W().isArrayOrTypedArray;ke.exports=function(A,O){if(_(O))O=String(O);else if(typeof O!="string"||O.substr(O.length-4)==="[-1]")throw"bad property string";var $=O.split("."),j,z,I,G;for(G=0;G<$.length;G++)if(String($[G]).slice(0,2)==="__")throw"bad property string";for(G=0;G<$.length;){if(j=String($[G]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/),j){if(j[1])$[G]=j[1];else if(G===0)$.splice(0,1);else throw"bad property string";for(z=j[2].substr(1,j[2].length-2).split("]["),I=0;I<z.length;I++)G++,$.splice(G,0,Number(z[I]))}G++}return typeof A!="object"?F(A,O,$):{set:w(A,$,O),get:m(A,$),astr:O,parts:$,obj:A}};function m(A,O){return function($){var j=A,z,I,G,M,L;for(M=0;M<O.length-1;M++){if(z=O[M],z===-1){for(I=!0,G=[],L=0;L<j.length;L++)G[L]=m(j[L],O.slice(M+1))($),G[L]!==G[0]&&(I=!1);return I?G[0]:G}if(typeof z=="number"&&!d(j)||(j=j[z],typeof j!="object"||j===null))return}if(!(typeof j!="object"||j===null)&&(G=j[O[M]],!(!$&&G===null)))return G}}var E=/(^|\.)args\[/;function b(A,O){return A===void 0||A===null&&!O.match(E)}function w(A,O,$){return function(j){var z=A,I="",G=b(j,$),M,L;for(L=0;L<O.length-1;L++){if(M=O[L],typeof M=="number"&&!d(z))throw"array index but container is not an array";if(M===-1){if(G=!C(z,O.slice(L+1),j,$),G)break;return}if(!p(z,M,O[L+1],G))break;if(z=z[M],typeof z!="object"||z===null)throw"container is not an object";I=S(I,M)}if(G){if(L===O.length-1&&(delete z[O[L]],Array.isArray(z)&&+O[L]===z.length-1))for(;z.length&&z[z.length-1]===void 0;)z.pop()}else z[O[L]]=j}}function S(A,O){var $=O;return _(O)?$="["+O+"]":A&&($="."+O),A+$}function C(A,O,$,j){var z=d($),I=!0,G=$,M=j.replace("-1",0),L=z?!1:b($,M),B=O[0],X;for(X=0;X<A.length;X++)M=j.replace("-1",X),z&&(G=$[X%$.length],L=b(G,M)),L&&(I=!1),p(A,X,B,L)&&w(A[X],O,j.replace("-1",X))(G);return I}function p(A,O,$,j){if(A[O]===void 0){if(j)return!1;typeof $=="number"?A[O]=[]:A[O]={}}return!0}function F(A,O,$){return{set:function(){throw"bad container"},get:function(){},astr:O,parts:$,obj:A}}}),J=r((nt,ke)=>{var _=k(),d=/^\w*$/,m=0,E=1,b=2,w=3,S=4;ke.exports=function(C,p,F,A){F=F||"name",A=A||"value";var O,$,j,z={};p&&p.length?(j=_(C,p),$=j.get()):$=C,p=p||"";var I={};if($)for(O=0;O<$.length;O++)I[$[O][F]]=O;var G=d.test(A),M={set:function(L,B){var X=B===null?S:m;if(!$){if(!j||X===S)return;$=[],j.set($)}var ee=I[L];if(ee===void 0){if(X===S)return;X=X|w,ee=$.length,I[L]=ee}else B!==(G?$[ee][A]:_($[ee],A).get())&&(X=X|b);var yt=$[ee]=$[ee]||{};return yt[F]=L,G?yt[A]=B:_(yt,A).set(B),B!==null&&(X=X&~S),z[ee]=z[ee]|X,M},get:function(L){if($){var B=I[L];if(B!==void 0)return G?$[B][A]:_($[B],A).get()}},rename:function(L,B){var X=I[L];return X===void 0||(z[X]=z[X]|E,I[B]=X,delete I[L],$[X][F]=B),M},remove:function(L){var B=I[L];if(B===void 0)return M;var X=$[B];if(Object.keys(X).length>2)return z[B]=z[B]|b,M.set(L,null);if(G){for(O=B;O<$.length;O++)z[O]=z[O]|w;for(O=B;O<$.length;O++)I[$[O][F]]--;$.splice(B,1),delete I[L]}else _(X,A).set(null),z[B]=z[B]|b|S;return M},constructUpdate:function(){for(var L,B,X={},ee=Object.keys(z),yt=0;yt<ee.length;yt++)B=ee[yt],L=p+"["+B+"]",$[B]?(z[B]&E&&(X[L+"."+F]=$[B][F]),z[B]&b&&(G?X[L+"."+A]=z[B]&S?null:$[B][A]:X[L+"."+A]=z[B]&S?null:_($[B],A).get())):X[L]=null;return X}};return M}}),q=r((nt,ke)=>{var _=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,d=/^[^\.\[\]]+$/;ke.exports=function(m,E){for(;E;){var b=m.match(_);if(b)m=b[1];else if(m.match(d))m="";else throw new Error("bad relativeAttr call:"+[m,E]);if(E.charAt(0)==="^")E=E.slice(1);else break}return m&&E.charAt(0)!=="["?m+"."+E:m+E}}),Se=r((nt,ke)=>{var _=v();ke.exports=function(d,m){if(d>0)return Math.log(d)/Math.LN10;var E=Math.log(Math.min(m[0],m[1]))/Math.LN10;return _(E)||(E=Math.log(Math.max(m[0],m[1]))/Math.LN10-6),E}}),V=r((nt,ke)=>{var _=W().isArrayOrTypedArray,d=R();ke.exports=function m(E,b){for(var w in b){var S=b[w],C=E[w];if(C!==S)if(w.charAt(0)==="_"||typeof S=="function"){if(w in E)continue;E[w]=S}else if(_(S)&&_(C)&&d(S[0])){if(w==="customdata"||w==="ids")continue;for(var p=Math.min(S.length,C.length),F=0;F<p;F++)C[F]!==S[F]&&d(S[F])&&d(C[F])&&m(C[F],S[F])}else d(S)&&d(C)&&(m(C,S),Object.keys(C).length||delete E[w])}}}),Y=r((nt,ke)=>{function _(m,E){var b=m%E;return b<0?b+E:b}function d(m,E){return Math.abs(m)>E/2?m-Math.round(m/E)*E:m}ke.exports={mod:_,modHalf:d}}),ie=r((nt,ke)=>{(function(_){var d=/^\s+/,m=/\s+$/,E=0,b=_.round,w=_.min,S=_.max,C=_.random;function p(Z,we){if(Z=Z||"",we=we||{},Z instanceof p)return Z;if(!(this instanceof p))return new p(Z,we);var ot=F(Z);this._originalInput=Z,this._r=ot.r,this._g=ot.g,this._b=ot.b,this._a=ot.a,this._roundA=b(100*this._a)/100,this._format=we.format||ot.format,this._gradientType=we.gradientType,this._r<1&&(this._r=b(this._r)),this._g<1&&(this._g=b(this._g)),this._b<1&&(this._b=b(this._b)),this._ok=ot.ok,this._tc_id=E++}p.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var Z=this.toRgb();return(Z.r*299+Z.g*587+Z.b*114)/1e3},getLuminance:function(){var Z=this.toRgb(),we,ot,mt,It,Yt,Sr;return we=Z.r/255,ot=Z.g/255,mt=Z.b/255,we<=.03928?It=we/12.92:It=_.pow((we+.055)/1.055,2.4),ot<=.03928?Yt=ot/12.92:Yt=_.pow((ot+.055)/1.055,2.4),mt<=.03928?Sr=mt/12.92:Sr=_.pow((mt+.055)/1.055,2.4),.2126*It+.7152*Yt+.0722*Sr},setAlpha:function(Z){return this._a=wt(Z),this._roundA=b(100*this._a)/100,this},toHsv:function(){var Z=j(this._r,this._g,this._b);return{h:Z.h*360,s:Z.s,v:Z.v,a:this._a}},toHsvString:function(){var Z=j(this._r,this._g,this._b),we=b(Z.h*360),ot=b(Z.s*100),mt=b(Z.v*100);return this._a==1?"hsv("+we+", "+ot+"%, "+mt+"%)":"hsva("+we+", "+ot+"%, "+mt+"%, "+this._roundA+")"},toHsl:function(){var Z=O(this._r,this._g,this._b);return{h:Z.h*360,s:Z.s,l:Z.l,a:this._a}},toHslString:function(){var Z=O(this._r,this._g,this._b),we=b(Z.h*360),ot=b(Z.s*100),mt=b(Z.l*100);return this._a==1?"hsl("+we+", "+ot+"%, "+mt+"%)":"hsla("+we+", "+ot+"%, "+mt+"%, "+this._roundA+")"},toHex:function(Z){return I(this._r,this._g,this._b,Z)},toHexString:function(Z){return"#"+this.toHex(Z)},toHex8:function(Z){return G(this._r,this._g,this._b,this._a,Z)},toHex8String:function(Z){return"#"+this.toHex8(Z)},toRgb:function(){return{r:b(this._r),g:b(this._g),b:b(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+b(this._r)+", "+b(this._g)+", "+b(this._b)+")":"rgba("+b(this._r)+", "+b(this._g)+", "+b(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:b(St(this._r,255)*100)+"%",g:b(St(this._g,255)*100)+"%",b:b(St(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+b(St(this._r,255)*100)+"%, "+b(St(this._g,255)*100)+"%, "+b(St(this._b,255)*100)+"%)":"rgba("+b(St(this._r,255)*100)+"%, "+b(St(this._g,255)*100)+"%, "+b(St(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:_t[I(this._r,this._g,this._b,!0)]||!1},toFilter:function(Z){var we="#"+M(this._r,this._g,this._b,this._a),ot=we,mt=this._gradientType?"GradientType = 1, ":"";if(Z){var It=p(Z);ot="#"+M(It._r,It._g,It._b,It._a)}return"progid:DXImageTransform.Microsoft.gradient("+mt+"startColorstr="+we+",endColorstr="+ot+")"},toString:function(Z){var we=!!Z;Z=Z||this._format;var ot=!1,mt=this._a<1&&this._a>=0,It=!we&&mt&&(Z==="hex"||Z==="hex6"||Z==="hex3"||Z==="hex4"||Z==="hex8"||Z==="name");return It?Z==="name"&&this._a===0?this.toName():this.toRgbString():(Z==="rgb"&&(ot=this.toRgbString()),Z==="prgb"&&(ot=this.toPercentageRgbString()),(Z==="hex"||Z==="hex6")&&(ot=this.toHexString()),Z==="hex3"&&(ot=this.toHexString(!0)),Z==="hex4"&&(ot=this.toHex8String(!0)),Z==="hex8"&&(ot=this.toHex8String()),Z==="name"&&(ot=this.toName()),Z==="hsl"&&(ot=this.toHslString()),Z==="hsv"&&(ot=this.toHsvString()),ot||this.toHexString())},clone:function(){return p(this.toString())},_applyModification:function(Z,we){var ot=Z.apply(null,[this].concat([].slice.call(we)));return this._r=ot._r,this._g=ot._g,this._b=ot._b,this.setAlpha(ot._a),this},lighten:function(){return this._applyModification(ee,arguments)},brighten:function(){return this._applyModification(yt,arguments)},darken:function(){return this._applyModification(Ze,arguments)},desaturate:function(){return this._applyModification(L,arguments)},saturate:function(){return this._applyModification(B,arguments)},greyscale:function(){return this._applyModification(X,arguments)},spin:function(){return this._applyModification(Re,arguments)},_applyCombination:function(Z,we){return Z.apply(null,[this].concat([].slice.call(we)))},analogous:function(){return this._applyCombination(it,arguments)},complement:function(){return this._applyCombination(Q,arguments)},monochromatic:function(){return this._applyCombination(ut,arguments)},splitcomplement:function(){return this._applyCombination(ht,arguments)},triad:function(){return this._applyCombination(xt,arguments)},tetrad:function(){return this._applyCombination(tt,arguments)}},p.fromRatio=function(Z,we){if(typeof Z=="object"){var ot={};for(var mt in Z)Z.hasOwnProperty(mt)&&(mt==="a"?ot[mt]=Z[mt]:ot[mt]=Cp(Z[mt]));Z=ot}return p(Z,we)};function F(Z){var we={r:0,g:0,b:0},ot=1,mt=null,It=null,Yt=null,Sr=!1,Op=!1;return typeof Z=="string"&&(Z=zt(Z)),typeof Z=="object"&&(Et(Z.r)&&Et(Z.g)&&Et(Z.b)?(we=A(Z.r,Z.g,Z.b),Sr=!0,Op=String(Z.r).substr(-1)==="%"?"prgb":"rgb"):Et(Z.h)&&Et(Z.s)&&Et(Z.v)?(mt=Cp(Z.s),It=Cp(Z.v),we=z(Z.h,mt,It),Sr=!0,Op="hsv"):Et(Z.h)&&Et(Z.s)&&Et(Z.l)&&(mt=Cp(Z.s),Yt=Cp(Z.l),we=$(Z.h,mt,Yt),Sr=!0,Op="hsl"),Z.hasOwnProperty("a")&&(ot=Z.a)),ot=wt(ot),{ok:Sr,format:Z.format||Op,r:w(255,S(we.r,0)),g:w(255,S(we.g,0)),b:w(255,S(we.b,0)),a:ot}}function A(Z,we,ot){return{r:St(Z,255)*255,g:St(we,255)*255,b:St(ot,255)*255}}function O(Z,we,ot){Z=St(Z,255),we=St(we,255),ot=St(ot,255);var mt=S(Z,we,ot),It=w(Z,we,ot),Yt,Sr,Op=(mt+It)/2;if(mt==It)Yt=Sr=0;else{var Hp=mt-It;switch(Sr=Op>.5?Hp/(2-mt-It):Hp/(mt+It),mt){case Z:Yt=(we-ot)/Hp+(we<ot?6:0);break;case we:Yt=(ot-Z)/Hp+2;break;case ot:Yt=(Z-we)/Hp+4;break}Yt/=6}return{h:Yt,s:Sr,l:Op}}function $(Z,we,ot){var mt,It,Yt;Z=St(Z,360),we=St(we,100),ot=St(ot,100);function Sr(n0,R0,w0){return w0<0&&(w0+=1),w0>1&&(w0-=1),w0<1/6?n0+(R0-n0)*6*w0:w0<1/2?R0:w0<2/3?n0+(R0-n0)*(2/3-w0)*6:n0}if(we===0)mt=It=Yt=ot;else{var Op=ot<.5?ot*(1+we):ot+we-ot*we,Hp=2*ot-Op;mt=Sr(Hp,Op,Z+1/3),It=Sr(Hp,Op,Z),Yt=Sr(Hp,Op,Z-1/3)}return{r:mt*255,g:It*255,b:Yt*255}}function j(Z,we,ot){Z=St(Z,255),we=St(we,255),ot=St(ot,255);var mt=S(Z,we,ot),It=w(Z,we,ot),Yt,Sr,Op=mt,Hp=mt-It;if(Sr=mt===0?0:Hp/mt,mt==It)Yt=0;else{switch(mt){case Z:Yt=(we-ot)/Hp+(we<ot?6:0);break;case we:Yt=(ot-Z)/Hp+2;break;case ot:Yt=(Z-we)/Hp+4;break}Yt/=6}return{h:Yt,s:Sr,v:Op}}function z(Z,we,ot){Z=St(Z,360)*6,we=St(we,100),ot=St(ot,100);var mt=_.floor(Z),It=Z-mt,Yt=ot*(1-we),Sr=ot*(1-It*we),Op=ot*(1-(1-It)*we),Hp=mt%6,n0=[ot,Sr,Yt,Yt,Op,ot][Hp],R0=[Op,ot,ot,Sr,Yt,Yt][Hp],w0=[Yt,Yt,Op,ot,ot,Sr][Hp];return{r:n0*255,g:R0*255,b:w0*255}}function I(Z,we,ot,mt){var It=[ca(b(Z).toString(16)),ca(b(we).toString(16)),ca(b(ot).toString(16))];return mt&&It[0].charAt(0)==It[0].charAt(1)&&It[1].charAt(0)==It[1].charAt(1)&&It[2].charAt(0)==It[2].charAt(1)?It[0].charAt(0)+It[1].charAt(0)+It[2].charAt(0):It.join("")}function G(Z,we,ot,mt,It){var Yt=[ca(b(Z).toString(16)),ca(b(we).toString(16)),ca(b(ot).toString(16)),ca(pt(mt))];return It&&Yt[0].charAt(0)==Yt[0].charAt(1)&&Yt[1].charAt(0)==Yt[1].charAt(1)&&Yt[2].charAt(0)==Yt[2].charAt(1)&&Yt[3].charAt(0)==Yt[3].charAt(1)?Yt[0].charAt(0)+Yt[1].charAt(0)+Yt[2].charAt(0)+Yt[3].charAt(0):Yt.join("")}function M(Z,we,ot,mt){var It=[ca(pt(mt)),ca(b(Z).toString(16)),ca(b(we).toString(16)),ca(b(ot).toString(16))];return It.join("")}p.equals=function(Z,we){return!Z||!we?!1:p(Z).toRgbString()==p(we).toRgbString()},p.random=function(){return p.fromRatio({r:C(),g:C(),b:C()})};function L(Z,we){we=we===0?0:we||10;var ot=p(Z).toHsl();return ot.s-=we/100,ot.s=Ut(ot.s),p(ot)}function B(Z,we){we=we===0?0:we||10;var ot=p(Z).toHsl();return ot.s+=we/100,ot.s=Ut(ot.s),p(ot)}function X(Z){return p(Z).desaturate(100)}function ee(Z,we){we=we===0?0:we||10;var ot=p(Z).toHsl();return ot.l+=we/100,ot.l=Ut(ot.l),p(ot)}function yt(Z,we){we=we===0?0:we||10;var ot=p(Z).toRgb();return ot.r=S(0,w(255,ot.r-b(255*-(we/100)))),ot.g=S(0,w(255,ot.g-b(255*-(we/100)))),ot.b=S(0,w(255,ot.b-b(255*-(we/100)))),p(ot)}function Ze(Z,we){we=we===0?0:we||10;var ot=p(Z).toHsl();return ot.l-=we/100,ot.l=Ut(ot.l),p(ot)}function Re(Z,we){var ot=p(Z).toHsl(),mt=(ot.h+we)%360;return ot.h=mt<0?360+mt:mt,p(ot)}function Q(Z){var we=p(Z).toHsl();return we.h=(we.h+180)%360,p(we)}function xt(Z){var we=p(Z).toHsl(),ot=we.h;return[p(Z),p({h:(ot+120)%360,s:we.s,l:we.l}),p({h:(ot+240)%360,s:we.s,l:we.l})]}function tt(Z){var we=p(Z).toHsl(),ot=we.h;return[p(Z),p({h:(ot+90)%360,s:we.s,l:we.l}),p({h:(ot+180)%360,s:we.s,l:we.l}),p({h:(ot+270)%360,s:we.s,l:we.l})]}function ht(Z){var we=p(Z).toHsl(),ot=we.h;return[p(Z),p({h:(ot+72)%360,s:we.s,l:we.l}),p({h:(ot+216)%360,s:we.s,l:we.l})]}function it(Z,we,ot){we=we||6,ot=ot||30;var mt=p(Z).toHsl(),It=360/ot,Yt=[p(Z)];for(mt.h=(mt.h-(It*we>>1)+720)%360;--we;)mt.h=(mt.h+It)%360,Yt.push(p(mt));return Yt}function ut(Z,we){we=we||6;for(var ot=p(Z).toHsv(),mt=ot.h,It=ot.s,Yt=ot.v,Sr=[],Op=1/we;we--;)Sr.push(p({h:mt,s:It,v:Yt})),Yt=(Yt+Op)%1;return Sr}p.mix=function(Z,we,ot){ot=ot===0?0:ot||50;var mt=p(Z).toRgb(),It=p(we).toRgb(),Yt=ot/100,Sr={r:(It.r-mt.r)*Yt+mt.r,g:(It.g-mt.g)*Yt+mt.g,b:(It.b-mt.b)*Yt+mt.b,a:(It.a-mt.a)*Yt+mt.a};return p(Sr)},p.readability=function(Z,we){var ot=p(Z),mt=p(we);return(_.max(ot.getLuminance(),mt.getLuminance())+.05)/(_.min(ot.getLuminance(),mt.getLuminance())+.05)},p.isReadable=function(Z,we,ot){var mt=p.readability(Z,we),It,Yt;switch(Yt=!1,It=rt(ot),It.level+It.size){case"AAsmall":case"AAAlarge":Yt=mt>=4.5;break;case"AAlarge":Yt=mt>=3;break;case"AAAsmall":Yt=mt>=7;break}return Yt},p.mostReadable=function(Z,we,ot){var mt=null,It=0,Yt,Sr,Op,Hp;ot=ot||{},Sr=ot.includeFallbackColors,Op=ot.level,Hp=ot.size;for(var n0=0;n0<we.length;n0++)Yt=p.readability(Z,we[n0]),Yt>It&&(It=Yt,mt=p(we[n0]));return p.isReadable(Z,mt,{level:Op,size:Hp})||!Sr?mt:(ot.includeFallbackColors=!1,p.mostReadable(Z,["#fff","#000"],ot))};var vt=p.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},_t=p.hexNames=Le(vt);function Le(Z){var we={};for(var ot in Z)Z.hasOwnProperty(ot)&&(we[Z[ot]]=ot);return we}function wt(Z){return Z=parseFloat(Z),(isNaN(Z)||Z<0||Z>1)&&(Z=1),Z}function St(Z,we){jt(Z)&&(Z="100%");var ot=aa(Z);return Z=w(we,S(0,parseFloat(Z))),ot&&(Z=parseInt(Z*we,10)/100),_.abs(Z-we)<1e-6?1:Z%we/parseFloat(we)}function Ut(Z){return w(1,S(0,Z))}function kt(Z){return parseInt(Z,16)}function jt(Z){return typeof Z=="string"&&Z.indexOf(".")!=-1&&parseFloat(Z)===1}function aa(Z){return typeof Z=="string"&&Z.indexOf("%")!=-1}function ca(Z){return Z.length==1?"0"+Z:""+Z}function Cp(Z){return Z<=1&&(Z=Z*100+"%"),Z}function pt(Z){return _.round(parseFloat(Z)*255).toString(16)}function gt(Z){return kt(Z)/255}var te=(function(){var Z="[-\\+]?\\d+%?",we="[-\\+]?\\d*\\.\\d+%?",ot="(?:"+we+")|(?:"+Z+")",mt="[\\s|\\(]+("+ot+")[,|\\s]+("+ot+")[,|\\s]+("+ot+")\\s*\\)?",It="[\\s|\\(]+("+ot+")[,|\\s]+("+ot+")[,|\\s]+("+ot+")[,|\\s]+("+ot+")\\s*\\)?";return{CSS_UNIT:new RegExp(ot),rgb:new RegExp("rgb"+mt),rgba:new RegExp("rgba"+It),hsl:new RegExp("hsl"+mt),hsla:new RegExp("hsla"+It),hsv:new RegExp("hsv"+mt),hsva:new RegExp("hsva"+It),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}})();function Et(Z){return!!te.CSS_UNIT.exec(Z)}function zt(Z){Z=Z.replace(d,"").replace(m,"").toLowerCase();var we=!1;if(vt[Z])Z=vt[Z],we=!0;else if(Z=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var ot;return(ot=te.rgb.exec(Z))?{r:ot[1],g:ot[2],b:ot[3]}:(ot=te.rgba.exec(Z))?{r:ot[1],g:ot[2],b:ot[3],a:ot[4]}:(ot=te.hsl.exec(Z))?{h:ot[1],s:ot[2],l:ot[3]}:(ot=te.hsla.exec(Z))?{h:ot[1],s:ot[2],l:ot[3],a:ot[4]}:(ot=te.hsv.exec(Z))?{h:ot[1],s:ot[2],v:ot[3]}:(ot=te.hsva.exec(Z))?{h:ot[1],s:ot[2],v:ot[3],a:ot[4]}:(ot=te.hex8.exec(Z))?{r:kt(ot[1]),g:kt(ot[2]),b:kt(ot[3]),a:gt(ot[4]),format:we?"name":"hex8"}:(ot=te.hex6.exec(Z))?{r:kt(ot[1]),g:kt(ot[2]),b:kt(ot[3]),format:we?"name":"hex"}:(ot=te.hex4.exec(Z))?{r:kt(ot[1]+""+ot[1]),g:kt(ot[2]+""+ot[2]),b:kt(ot[3]+""+ot[3]),a:gt(ot[4]+""+ot[4]),format:we?"name":"hex8"}:(ot=te.hex3.exec(Z))?{r:kt(ot[1]+""+ot[1]),g:kt(ot[2]+""+ot[2]),b:kt(ot[3]+""+ot[3]),format:we?"name":"hex"}:!1}function rt(Z){var we,ot;return Z=Z||{level:"AA",size:"small"},we=(Z.level||"AA").toUpperCase(),ot=(Z.size||"small").toLowerCase(),we!=="AA"&&we!=="AAA"&&(we="AA"),ot!=="small"&&ot!=="large"&&(ot="small"),{level:we,size:ot}}typeof ke<"u"&&ke.exports?ke.exports=p:window.tinycolor=p})(Math)}),se=r(nt=>{var ke=R(),_=Array.isArray;function d(E,b){var w,S;for(w=0;w<E.length;w++){if(S=E[w],S!==null&&typeof S=="object")return!1;S!==void 0&&(b[w]=S)}return!0}nt.extendFlat=function(){return m(arguments,!1,!1,!1)},nt.extendDeep=function(){return m(arguments,!0,!1,!1)},nt.extendDeepAll=function(){return m(arguments,!0,!0,!1)},nt.extendDeepNoArrays=function(){return m(arguments,!0,!1,!0)};function m(E,b,w,S){var C=E[0],p=E.length,F,A,O,$,j,z,I;if(p===2&&_(C)&&_(E[1])&&C.length===0){if(I=d(E[1],C),I)return C;C.splice(0,C.length)}for(var G=1;G<p;G++){F=E[G];for(A in F)O=C[A],$=F[A],S&&_($)?C[A]=$:b&&$&&(ke($)||(j=_($)))?(j?(j=!1,z=O&&_(O)?O:[]):z=O&&ke(O)?O:{},C[A]=m([z,$],b,w,S)):(typeof $<"u"||w)&&(C[A]=$)}return C}}),ct=r((nt,ke)=>{ke.exports=function(_){var d=_.variantValues,m=_.editType,E=_.colorEditType;E===void 0&&(E=m);var b={editType:m,valType:"integer",min:1,max:1e3,extras:["normal","bold"],dflt:"normal"};_.noNumericWeightValues&&(b.valType="enumerated",b.values=b.extras,b.extras=void 0,b.min=void 0,b.max=void 0);var w={family:{valType:"string",noBlank:!0,strict:!0,editType:m},size:{valType:"number",min:1,editType:m},color:{valType:"color",editType:E},weight:b,style:{editType:m,valType:"enumerated",values:["normal","italic"],dflt:"normal"},variant:_.noFontVariant?void 0:{editType:m,valType:"enumerated",values:d||["normal","small-caps","all-small-caps","all-petite-caps","petite-caps","unicase"],dflt:"normal"},textcase:_.noFontTextcase?void 0:{editType:m,valType:"enumerated",values:["normal","word caps","upper","lower"],dflt:"normal"},lineposition:_.noFontLineposition?void 0:{editType:m,valType:"flaglist",flags:["under","over","through"],extras:["none"],dflt:"none"},shadow:_.noFontShadow?void 0:{editType:m,valType:"string",dflt:_.autoShadowDflt?"auto":"none"},editType:m};return _.autoSize&&(w.size.dflt="auto"),_.autoColor&&(w.color.dflt="auto"),_.arrayOk&&(w.family.arrayOk=!0,w.weight.arrayOk=!0,w.style.arrayOk=!0,_.noFontVariant||(w.variant.arrayOk=!0),_.noFontTextcase||(w.textcase.arrayOk=!0),_.noFontLineposition||(w.lineposition.arrayOk=!0),_.noFontShadow||(w.shadow.arrayOk=!0),w.size.arrayOk=!0,w.color.arrayOk=!0),w}}),ae=r((nt,ke)=>{ke.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}}),st=r((nt,ke)=>{var _=ae(),d=ct(),m=d({editType:"none"});m.family.dflt=_.HOVERFONT,m.size.dflt=_.HOVERFONTSIZE,ke.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoversubplots:{valType:"enumerated",values:["single","overlaying","axis"],dflt:"overlaying",editType:"none"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:m,grouptitlefont:d({editType:"none"}),align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},showarrow:{valType:"boolean",dflt:!0,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}}),Ct=r((nt,ke)=>{var _=ct(),d=st().hoverlabel,m=se().extendFlat;ke.exports={hoverlabel:{bgcolor:m({},d.bgcolor,{arrayOk:!0}),bordercolor:m({},d.bordercolor,{arrayOk:!0}),font:_({arrayOk:!0,editType:"none"}),align:m({},d.align,{arrayOk:!0}),namelength:m({},d.namelength,{arrayOk:!0}),showarrow:m({},d.showarrow),editType:"none"}}}),$t=r((nt,ke)=>{var _=ct(),d=Ct();ke.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legend:{valType:"subplotid",dflt:"legend",editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:_({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},legendwidth:{valType:"number",min:0,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:d.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},uirevision:{valType:"any",editType:"none"}}}),jo=r((nt,ke)=>{var _=ie(),d={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},m=d.RdBu;function E(S,C){if(C||(C=m),!S)return C;function p(){try{S=d[S]||JSON.parse(S)}catch{S=C}}return typeof S=="string"&&(p(),typeof S=="string"&&p()),b(S)?S:C}function b(S){var C=0;if(!Array.isArray(S)||S.length<2||!S[0]||!S[S.length-1]||+S[0][0]!=0||+S[S.length-1][0]!=1)return!1;for(var p=0;p<S.length;p++){var F=S[p];if(F.length!==2||+F[0]<C||!_(F[1]).isValid())return!1;C=+F[0]}return!0}function w(S){return d[S]!==void 0?!0:b(S)}ke.exports={scales:d,defaultScale:m,get:E,isValid:w}}),Lp=r(nt=>{nt.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],nt.defaultLine="#444",nt.lightLine="#eee",nt.background="#fff",nt.borderLine="#BEC8D9",nt.lightFraction=1e3/11}),Mn=r((nt,ke)=>{var _=ie(),d=v(),m=W().isTypedArray,E=ke.exports={},b=Lp();E.defaults=b.defaults;var w=E.defaultLine=b.defaultLine;E.lightLine=b.lightLine;var S=E.background=b.background;E.tinyRGB=function(p){var F=p.toRgb();return"rgb("+Math.round(F.r)+", "+Math.round(F.g)+", "+Math.round(F.b)+")"},E.rgb=function(p){return E.tinyRGB(_(p))},E.opacity=function(p){return p?_(p).getAlpha():0},E.addOpacity=function(p,F){var A=_(p).toRgb();return"rgba("+Math.round(A.r)+", "+Math.round(A.g)+", "+Math.round(A.b)+", "+F+")"},E.combine=function(p,F){var A=_(p).toRgb();if(A.a===1)return _(p).toRgbString();var O=_(F||S).toRgb(),$=O.a===1?O:{r:255*(1-O.a)+O.r*O.a,g:255*(1-O.a)+O.g*O.a,b:255*(1-O.a)+O.b*O.a},j={r:$.r*(1-A.a)+A.r*A.a,g:$.g*(1-A.a)+A.g*A.a,b:$.b*(1-A.a)+A.b*A.a};return _(j).toRgbString()},E.interpolate=function(p,F,A){var O=_(p).toRgb(),$=_(F).toRgb(),j={r:A*O.r+(1-A)*$.r,g:A*O.g+(1-A)*$.g,b:A*O.b+(1-A)*$.b};return _(j).toRgbString()},E.contrast=function(p,F,A){var O=_(p);O.getAlpha()!==1&&(O=_(E.combine(p,S)));var $=O.isDark()?F?O.lighten(F):S:A?O.darken(A):w;return $.toString()},E.stroke=function(p,F){var A=_(F);p.style({stroke:E.tinyRGB(A),"stroke-opacity":A.getAlpha()})},E.fill=function(p,F){var A=_(F);p.style({fill:E.tinyRGB(A),"fill-opacity":A.getAlpha()})},E.clean=function(p){if(!(!p||typeof p!="object")){var F=Object.keys(p),A,O,$,j;for(A=0;A<F.length;A++)if($=F[A],j=p[$],$.substr($.length-5)==="color")if(Array.isArray(j))for(O=0;O<j.length;O++)j[O]=C(j[O]);else p[$]=C(j);else if($.substr($.length-10)==="colorscale"&&Array.isArray(j))for(O=0;O<j.length;O++)Array.isArray(j[O])&&(j[O][1]=C(j[O][1]));else if(Array.isArray(j)){var z=j[0];if(!Array.isArray(z)&&z&&typeof z=="object")for(O=0;O<j.length;O++)E.clean(j[O])}else j&&typeof j=="object"&&!m(j)&&E.clean(j)}};function C(p){if(d(p)||typeof p!="string")return p;var F=p.trim();if(F.substr(0,3)!=="rgb")return p;var A=F.match(/^rgba?\s*\(([^()]*)\)$/);if(!A)return p;var O=A[1].trim().split(/\s*[\s,]\s*/),$=F.charAt(3)==="a"&&O.length===4;if(!$&&O.length!==3)return p;for(var j=0;j<O.length;j++){if(!O[j].length||(O[j]=Number(O[j]),!(O[j]>=0)))return p;if(j===3)O[j]>1&&(O[j]=1);else if(O[j]>=1)return p}var z=Math.round(O[0]*255)+", "+Math.round(O[1]*255)+", "+Math.round(O[2]*255);return $?"rgba("+z+", "+O[3]+")":"rgb("+z+")"}}),sa=r((nt,ke)=>{ke.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}}),re=r(nt=>{nt.counter=function(ke,_,d,m){var E=(_||"")+(d?"":"$"),b=m===!1?"":"^";return ke==="xy"?new RegExp(b+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+E):new RegExp(b+ke+"([2-9]|[1-9][0-9]+)?"+E)}}),$o=r(nt=>{var ke=v(),_=ie(),d=se().extendFlat,m=$t(),E=jo(),b=Mn(),w=sa().DESELECTDIM,S=k(),C=re().counter,p=Y().modHalf,F=W().isArrayOrTypedArray,A=W().isTypedArraySpec,O=W().decodeTypedArraySpec;nt.valObjectMeta={data_array:{coerceFunction:function(j,z,I){z.set(F(j)?j:A(j)?O(j):I)}},enumerated:{coerceFunction:function(j,z,I,G){G.coerceNumber&&(j=+j),G.values.indexOf(j)===-1?z.set(I):z.set(j)},validateFunction:function(j,z){z.coerceNumber&&(j=+j);for(var I=z.values,G=0;G<I.length;G++){var M=String(I[G]);if(M.charAt(0)==="/"&&M.charAt(M.length-1)==="/"){var L=new RegExp(M.substr(1,M.length-2));if(L.test(j))return!0}else if(j===I[G])return!0}return!1}},boolean:{coerceFunction:function(j,z,I){j===!0||j===!1?z.set(j):z.set(I)}},number:{coerceFunction:function(j,z,I,G){A(j)&&(j=O(j)),!ke(j)||G.min!==void 0&&j<G.min||G.max!==void 0&&j>G.max?z.set(I):z.set(+j)}},integer:{coerceFunction:function(j,z,I,G){if((G.extras||[]).indexOf(j)!==-1){z.set(j);return}A(j)&&(j=O(j)),j%1||!ke(j)||G.min!==void 0&&j<G.min||G.max!==void 0&&j>G.max?z.set(I):z.set(+j)}},string:{coerceFunction:function(j,z,I,G){if(typeof j!="string"){var M=typeof j=="number";G.strict===!0||!M?z.set(I):z.set(String(j))}else G.noBlank&&!j?z.set(I):z.set(j)}},color:{coerceFunction:function(j,z,I){A(j)&&(j=O(j)),_(j).isValid()?z.set(j):z.set(I)}},colorlist:{coerceFunction:function(j,z,I){function G(M){return _(M).isValid()}!Array.isArray(j)||!j.length?z.set(I):j.every(G)?z.set(j):z.set(I)}},colorscale:{coerceFunction:function(j,z,I){z.set(E.get(j,I))}},angle:{coerceFunction:function(j,z,I){A(j)&&(j=O(j)),j==="auto"?z.set("auto"):ke(j)?z.set(p(+j,360)):z.set(I)}},subplotid:{coerceFunction:function(j,z,I,G){var M=G.regex||C(I);if(typeof j=="string"&&M.test(j)){z.set(j);return}z.set(I)},validateFunction:function(j,z){var I=z.dflt;return j===I?!0:typeof j!="string"?!1:!!C(I).test(j)}},flaglist:{coerceFunction:function(j,z,I,G){if((G.extras||[]).indexOf(j)!==-1){z.set(j);return}if(typeof j!="string"){z.set(I);return}for(var M=j.split("+"),L=0;L<M.length;){var B=M[L];G.flags.indexOf(B)===-1||M.indexOf(B)<L?M.splice(L,1):L++}M.length?z.set(M.join("+")):z.set(I)}},any:{coerceFunction:function(j,z,I){j===void 0?z.set(I):z.set(A(j)?O(j):j)}},info_array:{coerceFunction:function(j,z,I,G){function M(vt,_t,Le){var wt,St={set:function(Ut){wt=Ut}};return Le===void 0&&(Le=_t.dflt),nt.valObjectMeta[_t.valType].coerceFunction(vt,St,Le,_t),wt}if(A(j)&&(j=O(j)),!F(j)){z.set(I);return}var L=G.dimensions===2||G.dimensions==="1-2"&&Array.isArray(j)&&F(j[0]),B=G.items,X=[],ee=Array.isArray(B),yt=ee&&L&&F(B[0]),Ze=L&&ee&&!yt,Re=ee&&!Ze?B.length:j.length,Q,xt,tt,ht,it,ut;if(I=Array.isArray(I)?I:[],L)for(Q=0;Q<Re;Q++)for(X[Q]=[],tt=F(j[Q])?j[Q]:[],Ze?it=B.length:ee?it=B[Q].length:it=tt.length,xt=0;xt<it;xt++)Ze?ht=B[xt]:ee?ht=B[Q][xt]:ht=B,ut=M(tt[xt],ht,(I[Q]||[])[xt]),ut!==void 0&&(X[Q][xt]=ut);else for(Q=0;Q<Re;Q++)ut=M(j[Q],ee?B[Q]:B,I[Q]),ut!==void 0&&(X[Q]=ut);z.set(X)},validateFunction:function(j,z){if(!F(j))return!1;var I=z.items,G=Array.isArray(I),M=z.dimensions===2;if(!z.freeLength&&j.length!==I.length)return!1;for(var L=0;L<j.length;L++)if(M){if(!F(j[L])||!z.freeLength&&j[L].length!==I[L].length)return!1;for(var B=0;B<j[L].length;B++)if(!$(j[L][B],G?I[L][B]:I))return!1}else if(!$(j[L],G?I[L]:I))return!1;return!0}}},nt.coerce=function(j,z,I,G,M){var L=S(I,G).get(),B=S(j,G),X=S(z,G),ee=B.get(),yt=z._template;if(ee===void 0&&yt&&(ee=S(yt,G).get(),yt=0),M===void 0&&(M=L.dflt),L.arrayOk){if(F(ee))return X.set(ee),ee;if(A(ee))return ee=O(ee),X.set(ee),ee}var Ze=nt.valObjectMeta[L.valType].coerceFunction;Ze(ee,X,M,L);var Re=X.get();return yt&&Re===M&&!$(ee,L)&&(ee=S(yt,G).get(),Ze(ee,X,M,L),Re=X.get()),Re},nt.coerce2=function(j,z,I,G,M){var L=S(j,G),B=nt.coerce(j,z,I,G,M),X=L.get();return X!=null?B:!1},nt.coerceFont=function(j,z,I,G){G||(G={}),I=d({},I),I=d(I,G.overrideDflt||{});var M={family:j(z+".family",I.family),size:j(z+".size",I.size),color:j(z+".color",I.color),weight:j(z+".weight",I.weight),style:j(z+".style",I.style)};if(G.noFontVariant||(M.variant=j(z+".variant",I.variant)),G.noFontLineposition||(M.lineposition=j(z+".lineposition",I.lineposition)),G.noFontTextcase||(M.textcase=j(z+".textcase",I.textcase)),!G.noFontShadow){var L=I.shadow;L==="none"&&G.autoShadowDflt&&(L="auto"),M.shadow=j(z+".shadow",L)}return M},nt.coercePattern=function(j,z,I,G){var M=j(z+".shape"),L;if(M||(L=j(z+".path")),M||L){M&&j(z+".solidity"),j(z+".size");var B=j(z+".fillmode"),X=B==="overlay";if(!G){var ee=j(z+".bgcolor",X?I:void 0);j(z+".fgcolor",X?b.contrast(ee):I)}j(z+".fgopacity",X?.5:1)}},nt.coerceHoverinfo=function(j,z,I){var G=z._module.attributes,M=G.hoverinfo?G:m,L=M.hoverinfo,B;if(I._dataLength===1){var X=L.dflt==="all"?L.flags.slice():L.dflt.split("+");X.splice(X.indexOf("name"),1),B=X.join("+")}return nt.coerce(j,z,M,"hoverinfo",B)},nt.coerceSelectionMarkerOpacity=function(j,z){if(j.marker){var I=j.marker.opacity;if(I!==void 0){var G,M;!F(I)&&!j.selected&&!j.unselected&&(G=I,M=w*I),z("selected.marker.opacity",G),z("unselected.marker.opacity",M)}}};function $(j,z){var I=nt.valObjectMeta[z.valType];if(z.arrayOk&&F(j))return!0;if(I.validateFunction)return I.validateFunction(j,z);var G={},M=G,L={set:function(B){M=B}};return I.coerceFunction(j,L,G,z),M!==G}nt.validate=$}),qo=r((nt,ke)=>{var _={staticPlot:{valType:"boolean",dflt:!1},typesetMath:{valType:"boolean",dflt:!0},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},editSelection:{valType:"boolean",dflt:!0},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox","map"],extras:[!0,!1],dflt:"gl3d+geo+map"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/un/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},d={};function m(E,b){for(var w in E){var S=E[w];S.valType?b[w]=S.dflt:(b[w]||(b[w]={}),m(S,b[w]))}}m(_,d),ke.exports={configAttributes:_,dfltConfig:d}}),Kt=r((nt,ke)=>{var _=o(),d=v(),m=[];ke.exports=function(E,b){if(m.indexOf(E)!==-1)return;m.push(E);var w=1e3;d(b)?w=b:b==="long"&&(w=3e3);var S=_.select("body").selectAll(".plotly-notifier").data([0]);S.enter().append("div").classed("plotly-notifier",!0);var C=S.selectAll(".notifier-note").data(m);function p(F){F.duration(700).style("opacity",0).each("end",function(A){var O=m.indexOf(A);O!==-1&&m.splice(O,1),_.select(this).remove()})}C.enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(F){var A=_.select(this);A.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){A.transition().call(p)});for(var O=A.append("p"),$=F.split(/<br\s*\/?>/g),j=0;j<$.length;j++)j&&O.append("br"),O.append("span").text($[j]);b==="stick"?A.transition().duration(350).style("opacity",1):A.transition().duration(700).style("opacity",1).transition().delay(w).call(p)})}}),i0=r((nt,ke)=>{var _=qo().dfltConfig,d=Kt(),m=ke.exports={};m.log=function(){var E;if(_.logging>1){var b=["LOG:"];for(E=0;E<arguments.length;E++)b.push(arguments[E]);console.trace.apply(console,b)}if(_.notifyOnLogging>1){var w=[];for(E=0;E<arguments.length;E++)w.push(arguments[E]);d(w.join("<br>"),"long")}},m.warn=function(){var E;if(_.logging>0){var b=["WARN:"];for(E=0;E<arguments.length;E++)b.push(arguments[E]);console.trace.apply(console,b)}if(_.notifyOnLogging>0){var w=[];for(E=0;E<arguments.length;E++)w.push(arguments[E]);d(w.join("<br>"),"stick")}},m.error=function(){var E;if(_.logging>0){var b=["ERROR:"];for(E=0;E<arguments.length;E++)b.push(arguments[E]);console.error.apply(console,b)}if(_.notifyOnLogging>0){var w=[];for(E=0;E<arguments.length;E++)w.push(arguments[E]);d(w.join("<br>"),"stick")}}}),Up=r((nt,ke)=>{ke.exports=function(){}}),l0=r((nt,ke)=>{ke.exports=function(_,d){if(d instanceof RegExp){for(var m=d.toString(),E=0;E<_.length;E++)if(_[E]instanceof RegExp&&_[E].toString()===m)return _;_.push(d)}else(d||d===0)&&_.indexOf(d)===-1&&_.push(d);return _}}),y0=r((nt,ke)=>{ke.exports=_;function _(){var d=new Float32Array(16);return d[0]=1,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=1,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=1,d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,d}}),kp=r((nt,ke)=>{ke.exports=_;function _(d){var m=new Float32Array(16);return m[0]=d[0],m[1]=d[1],m[2]=d[2],m[3]=d[3],m[4]=d[4],m[5]=d[5],m[6]=d[6],m[7]=d[7],m[8]=d[8],m[9]=d[9],m[10]=d[10],m[11]=d[11],m[12]=d[12],m[13]=d[13],m[14]=d[14],m[15]=d[15],m}}),u0=r((nt,ke)=>{ke.exports=_;function _(d,m){return d[0]=m[0],d[1]=m[1],d[2]=m[2],d[3]=m[3],d[4]=m[4],d[5]=m[5],d[6]=m[6],d[7]=m[7],d[8]=m[8],d[9]=m[9],d[10]=m[10],d[11]=m[11],d[12]=m[12],d[13]=m[13],d[14]=m[14],d[15]=m[15],d}}),f0=r((nt,ke)=>{ke.exports=_;function _(d){return d[0]=1,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=1,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=1,d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,d}}),v0=r((nt,ke)=>{ke.exports=_;function _(d,m){if(d===m){var E=m[1],b=m[2],w=m[3],S=m[6],C=m[7],p=m[11];d[1]=m[4],d[2]=m[8],d[3]=m[12],d[4]=E,d[6]=m[9],d[7]=m[13],d[8]=b,d[9]=S,d[11]=m[14],d[12]=w,d[13]=C,d[14]=p}else d[0]=m[0],d[1]=m[4],d[2]=m[8],d[3]=m[12],d[4]=m[1],d[5]=m[5],d[6]=m[9],d[7]=m[13],d[8]=m[2],d[9]=m[6],d[10]=m[10],d[11]=m[14],d[12]=m[3],d[13]=m[7],d[14]=m[11],d[15]=m[15];return d}}),p0=r((nt,ke)=>{ke.exports=_;function _(d,m){var E=m[0],b=m[1],w=m[2],S=m[3],C=m[4],p=m[5],F=m[6],A=m[7],O=m[8],$=m[9],j=m[10],z=m[11],I=m[12],G=m[13],M=m[14],L=m[15],B=E*p-b*C,X=E*F-w*C,ee=E*A-S*C,yt=b*F-w*p,Ze=b*A-S*p,Re=w*A-S*F,Q=O*G-$*I,xt=O*M-j*I,tt=O*L-z*I,ht=$*M-j*G,it=$*L-z*G,ut=j*L-z*M,vt=B*ut-X*it+ee*ht+yt*tt-Ze*xt+Re*Q;return vt?(vt=1/vt,d[0]=(p*ut-F*it+A*ht)*vt,d[1]=(w*it-b*ut-S*ht)*vt,d[2]=(G*Re-M*Ze+L*yt)*vt,d[3]=(j*Ze-$*Re-z*yt)*vt,d[4]=(F*tt-C*ut-A*xt)*vt,d[5]=(E*ut-w*tt+S*xt)*vt,d[6]=(M*ee-I*Re-L*X)*vt,d[7]=(O*Re-j*ee+z*X)*vt,d[8]=(C*it-p*tt+A*Q)*vt,d[9]=(b*tt-E*it-S*Q)*vt,d[10]=(I*Ze-G*ee+L*B)*vt,d[11]=($*ee-O*Ze-z*B)*vt,d[12]=(p*xt-C*ht-F*Q)*vt,d[13]=(E*ht-b*xt+w*Q)*vt,d[14]=(G*X-I*yt-M*B)*vt,d[15]=(O*yt-$*X+j*B)*vt,d):null}}),rm=r((nt,ke)=>{ke.exports=_;function _(d,m){var E=m[0],b=m[1],w=m[2],S=m[3],C=m[4],p=m[5],F=m[6],A=m[7],O=m[8],$=m[9],j=m[10],z=m[11],I=m[12],G=m[13],M=m[14],L=m[15];return d[0]=p*(j*L-z*M)-$*(F*L-A*M)+G*(F*z-A*j),d[1]=-(b*(j*L-z*M)-$*(w*L-S*M)+G*(w*z-S*j)),d[2]=b*(F*L-A*M)-p*(w*L-S*M)+G*(w*A-S*F),d[3]=-(b*(F*z-A*j)-p*(w*z-S*j)+$*(w*A-S*F)),d[4]=-(C*(j*L-z*M)-O*(F*L-A*M)+I*(F*z-A*j)),d[5]=E*(j*L-z*M)-O*(w*L-S*M)+I*(w*z-S*j),d[6]=-(E*(F*L-A*M)-C*(w*L-S*M)+I*(w*A-S*F)),d[7]=E*(F*z-A*j)-C*(w*z-S*j)+O*(w*A-S*F),d[8]=C*($*L-z*G)-O*(p*L-A*G)+I*(p*z-A*$),d[9]=-(E*($*L-z*G)-O*(b*L-S*G)+I*(b*z-S*$)),d[10]=E*(p*L-A*G)-C*(b*L-S*G)+I*(b*A-S*p),d[11]=-(E*(p*z-A*$)-C*(b*z-S*$)+O*(b*A-S*p)),d[12]=-(C*($*M-j*G)-O*(p*M-F*G)+I*(p*j-F*$)),d[13]=E*($*M-j*G)-O*(b*M-w*G)+I*(b*j-w*$),d[14]=-(E*(p*M-F*G)-C*(b*M-w*G)+I*(b*F-w*p)),d[15]=E*(p*j-F*$)-C*(b*j-w*$)+O*(b*F-w*p),d}}),am=r((nt,ke)=>{ke.exports=_;function _(d){var m=d[0],E=d[1],b=d[2],w=d[3],S=d[4],C=d[5],p=d[6],F=d[7],A=d[8],O=d[9],$=d[10],j=d[11],z=d[12],I=d[13],G=d[14],M=d[15],L=m*C-E*S,B=m*p-b*S,X=m*F-w*S,ee=E*p-b*C,yt=E*F-w*C,Ze=b*F-w*p,Re=A*I-O*z,Q=A*G-$*z,xt=A*M-j*z,tt=O*G-$*I,ht=O*M-j*I,it=$*M-j*G;return L*it-B*ht+X*tt+ee*xt-yt*Q+Ze*Re}}),ym=r((nt,ke)=>{ke.exports=_;function _(d,m,E){var b=m[0],w=m[1],S=m[2],C=m[3],p=m[4],F=m[5],A=m[6],O=m[7],$=m[8],j=m[9],z=m[10],I=m[11],G=m[12],M=m[13],L=m[14],B=m[15],X=E[0],ee=E[1],yt=E[2],Ze=E[3];return d[0]=X*b+ee*p+yt*$+Ze*G,d[1]=X*w+ee*F+yt*j+Ze*M,d[2]=X*S+ee*A+yt*z+Ze*L,d[3]=X*C+ee*O+yt*I+Ze*B,X=E[4],ee=E[5],yt=E[6],Ze=E[7],d[4]=X*b+ee*p+yt*$+Ze*G,d[5]=X*w+ee*F+yt*j+Ze*M,d[6]=X*S+ee*A+yt*z+Ze*L,d[7]=X*C+ee*O+yt*I+Ze*B,X=E[8],ee=E[9],yt=E[10],Ze=E[11],d[8]=X*b+ee*p+yt*$+Ze*G,d[9]=X*w+ee*F+yt*j+Ze*M,d[10]=X*S+ee*A+yt*z+Ze*L,d[11]=X*C+ee*O+yt*I+Ze*B,X=E[12],ee=E[13],yt=E[14],Ze=E[15],d[12]=X*b+ee*p+yt*$+Ze*G,d[13]=X*w+ee*F+yt*j+Ze*M,d[14]=X*S+ee*A+yt*z+Ze*L,d[15]=X*C+ee*O+yt*I+Ze*B,d}}),Wm=r((nt,ke)=>{ke.exports=_;function _(d,m,E){var b=E[0],w=E[1],S=E[2],C,p,F,A,O,$,j,z,I,G,M,L;return m===d?(d[12]=m[0]*b+m[4]*w+m[8]*S+m[12],d[13]=m[1]*b+m[5]*w+m[9]*S+m[13],d[14]=m[2]*b+m[6]*w+m[10]*S+m[14],d[15]=m[3]*b+m[7]*w+m[11]*S+m[15]):(C=m[0],p=m[1],F=m[2],A=m[3],O=m[4],$=m[5],j=m[6],z=m[7],I=m[8],G=m[9],M=m[10],L=m[11],d[0]=C,d[1]=p,d[2]=F,d[3]=A,d[4]=O,d[5]=$,d[6]=j,d[7]=z,d[8]=I,d[9]=G,d[10]=M,d[11]=L,d[12]=C*b+O*w+I*S+m[12],d[13]=p*b+$*w+G*S+m[13],d[14]=F*b+j*w+M*S+m[14],d[15]=A*b+z*w+L*S+m[15]),d}}),h0=r((nt,ke)=>{ke.exports=_;function _(d,m,E){var b=E[0],w=E[1],S=E[2];return d[0]=m[0]*b,d[1]=m[1]*b,d[2]=m[2]*b,d[3]=m[3]*b,d[4]=m[4]*w,d[5]=m[5]*w,d[6]=m[6]*w,d[7]=m[7]*w,d[8]=m[8]*S,d[9]=m[9]*S,d[10]=m[10]*S,d[11]=m[11]*S,d[12]=m[12],d[13]=m[13],d[14]=m[14],d[15]=m[15],d}}),f1=r((nt,ke)=>{ke.exports=_;function _(d,m,E,b){var w=b[0],S=b[1],C=b[2],p=Math.sqrt(w*w+S*S+C*C),F,A,O,$,j,z,I,G,M,L,B,X,ee,yt,Ze,Re,Q,xt,tt,ht,it,ut,vt,_t;return Math.abs(p)<1e-6?null:(p=1/p,w*=p,S*=p,C*=p,F=Math.sin(E),A=Math.cos(E),O=1-A,$=m[0],j=m[1],z=m[2],I=m[3],G=m[4],M=m[5],L=m[6],B=m[7],X=m[8],ee=m[9],yt=m[10],Ze=m[11],Re=w*w*O+A,Q=S*w*O+C*F,xt=C*w*O-S*F,tt=w*S*O-C*F,ht=S*S*O+A,it=C*S*O+w*F,ut=w*C*O+S*F,vt=S*C*O-w*F,_t=C*C*O+A,d[0]=$*Re+G*Q+X*xt,d[1]=j*Re+M*Q+ee*xt,d[2]=z*Re+L*Q+yt*xt,d[3]=I*Re+B*Q+Ze*xt,d[4]=$*tt+G*ht+X*it,d[5]=j*tt+M*ht+ee*it,d[6]=z*tt+L*ht+yt*it,d[7]=I*tt+B*ht+Ze*it,d[8]=$*ut+G*vt+X*_t,d[9]=j*ut+M*vt+ee*_t,d[10]=z*ut+L*vt+yt*_t,d[11]=I*ut+B*vt+Ze*_t,m!==d&&(d[12]=m[12],d[13]=m[13],d[14]=m[14],d[15]=m[15]),d)}}),T1=r((nt,ke)=>{ke.exports=_;function _(d,m,E){var b=Math.sin(E),w=Math.cos(E),S=m[4],C=m[5],p=m[6],F=m[7],A=m[8],O=m[9],$=m[10],j=m[11];return m!==d&&(d[0]=m[0],d[1]=m[1],d[2]=m[2],d[3]=m[3],d[12]=m[12],d[13]=m[13],d[14]=m[14],d[15]=m[15]),d[4]=S*w+A*b,d[5]=C*w+O*b,d[6]=p*w+$*b,d[7]=F*w+j*b,d[8]=A*w-S*b,d[9]=O*w-C*b,d[10]=$*w-p*b,d[11]=j*w-F*b,d}}),I1=r((nt,ke)=>{ke.exports=_;function _(d,m,E){var b=Math.sin(E),w=Math.cos(E),S=m[0],C=m[1],p=m[2],F=m[3],A=m[8],O=m[9],$=m[10],j=m[11];return m!==d&&(d[4]=m[4],d[5]=m[5],d[6]=m[6],d[7]=m[7],d[12]=m[12],d[13]=m[13],d[14]=m[14],d[15]=m[15]),d[0]=S*w-A*b,d[1]=C*w-O*b,d[2]=p*w-$*b,d[3]=F*w-j*b,d[8]=S*b+A*w,d[9]=C*b+O*w,d[10]=p*b+$*w,d[11]=F*b+j*w,d}}),p1=r((nt,ke)=>{ke.exports=_;function _(d,m,E){var b=Math.sin(E),w=Math.cos(E),S=m[0],C=m[1],p=m[2],F=m[3],A=m[4],O=m[5],$=m[6],j=m[7];return m!==d&&(d[8]=m[8],d[9]=m[9],d[10]=m[10],d[11]=m[11],d[12]=m[12],d[13]=m[13],d[14]=m[14],d[15]=m[15]),d[0]=S*w+A*b,d[1]=C*w+O*b,d[2]=p*w+$*b,d[3]=F*w+j*b,d[4]=A*w-S*b,d[5]=O*w-C*b,d[6]=$*w-p*b,d[7]=j*w-F*b,d}}),Qm=r((nt,ke)=>{ke.exports=_;function _(d,m,E){var b,w,S,C=E[0],p=E[1],F=E[2],A=Math.sqrt(C*C+p*p+F*F);return Math.abs(A)<1e-6?null:(A=1/A,C*=A,p*=A,F*=A,b=Math.sin(m),w=Math.cos(m),S=1-w,d[0]=C*C*S+w,d[1]=p*C*S+F*b,d[2]=F*C*S-p*b,d[3]=0,d[4]=C*p*S-F*b,d[5]=p*p*S+w,d[6]=F*p*S+C*b,d[7]=0,d[8]=C*F*S+p*b,d[9]=p*F*S-C*b,d[10]=F*F*S+w,d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,d)}}),m1=r((nt,ke)=>{ke.exports=_;function _(d,m,E){var b=m[0],w=m[1],S=m[2],C=m[3],p=b+b,F=w+w,A=S+S,O=b*p,$=b*F,j=b*A,z=w*F,I=w*A,G=S*A,M=C*p,L=C*F,B=C*A;return d[0]=1-(z+G),d[1]=$+B,d[2]=j-L,d[3]=0,d[4]=$-B,d[5]=1-(O+G),d[6]=I+M,d[7]=0,d[8]=j+L,d[9]=I-M,d[10]=1-(O+z),d[11]=0,d[12]=E[0],d[13]=E[1],d[14]=E[2],d[15]=1,d}}),W1=r((nt,ke)=>{ke.exports=_;function _(d,m){return d[0]=m[0],d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=m[1],d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=m[2],d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,d}}),ug=r((nt,ke)=>{ke.exports=_;function _(d,m){return d[0]=1,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=1,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=1,d[11]=0,d[12]=m[0],d[13]=m[1],d[14]=m[2],d[15]=1,d}}),ng=r((nt,ke)=>{ke.exports=_;function _(d,m){var E=Math.sin(m),b=Math.cos(m);return d[0]=1,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=b,d[6]=E,d[7]=0,d[8]=0,d[9]=-E,d[10]=b,d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,d}}),Ko=r((nt,ke)=>{ke.exports=_;function _(d,m){var E=Math.sin(m),b=Math.cos(m);return d[0]=b,d[1]=0,d[2]=-E,d[3]=0,d[4]=0,d[5]=1,d[6]=0,d[7]=0,d[8]=E,d[9]=0,d[10]=b,d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,d}}),wi=r((nt,ke)=>{ke.exports=_;function _(d,m){var E=Math.sin(m),b=Math.cos(m);return d[0]=b,d[1]=E,d[2]=0,d[3]=0,d[4]=-E,d[5]=b,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=1,d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,d}}),S0=r((nt,ke)=>{ke.exports=_;function _(d,m){var E=m[0],b=m[1],w=m[2],S=m[3],C=E+E,p=b+b,F=w+w,A=E*C,O=b*C,$=b*p,j=w*C,z=w*p,I=w*F,G=S*C,M=S*p,L=S*F;return d[0]=1-$-I,d[1]=O+L,d[2]=j-M,d[3]=0,d[4]=O-L,d[5]=1-A-I,d[6]=z+G,d[7]=0,d[8]=j+M,d[9]=z-G,d[10]=1-A-$,d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,d}}),Z0=r((nt,ke)=>{ke.exports=_;function _(d,m,E,b,w,S,C){var p=1/(E-m),F=1/(w-b),A=1/(S-C);return d[0]=S*2*p,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=S*2*F,d[6]=0,d[7]=0,d[8]=(E+m)*p,d[9]=(w+b)*F,d[10]=(C+S)*A,d[11]=-1,d[12]=0,d[13]=0,d[14]=C*S*2*A,d[15]=0,d}}),Pp=r((nt,ke)=>{ke.exports=_;function _(d,m,E,b,w){var S=1/Math.tan(m/2),C=1/(b-w);return d[0]=S/E,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=S,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=(w+b)*C,d[11]=-1,d[12]=0,d[13]=0,d[14]=2*w*b*C,d[15]=0,d}}),Ip=r((nt,ke)=>{ke.exports=_;function _(d,m,E,b){var w=Math.tan(m.upDegrees*Math.PI/180),S=Math.tan(m.downDegrees*Math.PI/180),C=Math.tan(m.leftDegrees*Math.PI/180),p=Math.tan(m.rightDegrees*Math.PI/180),F=2/(C+p),A=2/(w+S);return d[0]=F,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=A,d[6]=0,d[7]=0,d[8]=-((C-p)*F*.5),d[9]=(w-S)*A*.5,d[10]=b/(E-b),d[11]=-1,d[12]=0,d[13]=0,d[14]=b*E/(E-b),d[15]=0,d}}),x0=r((nt,ke)=>{ke.exports=_;function _(d,m,E,b,w,S,C){var p=1/(m-E),F=1/(b-w),A=1/(S-C);return d[0]=-2*p,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=-2*F,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=2*A,d[11]=0,d[12]=(m+E)*p,d[13]=(w+b)*F,d[14]=(C+S)*A,d[15]=1,d}}),B0=r((nt,ke)=>{var _=f0();ke.exports=d;function d(m,E,b,w){var S,C,p,F,A,O,$,j,z,I,G=E[0],M=E[1],L=E[2],B=w[0],X=w[1],ee=w[2],yt=b[0],Ze=b[1],Re=b[2];return Math.abs(G-yt)<1e-6&&Math.abs(M-Ze)<1e-6&&Math.abs(L-Re)<1e-6?_(m):($=G-yt,j=M-Ze,z=L-Re,I=1/Math.sqrt($*$+j*j+z*z),$*=I,j*=I,z*=I,S=X*z-ee*j,C=ee*$-B*z,p=B*j-X*$,I=Math.sqrt(S*S+C*C+p*p),I?(I=1/I,S*=I,C*=I,p*=I):(S=0,C=0,p=0),F=j*p-z*C,A=z*S-$*p,O=$*C-j*S,I=Math.sqrt(F*F+A*A+O*O),I?(I=1/I,F*=I,A*=I,O*=I):(F=0,A=0,O=0),m[0]=S,m[1]=F,m[2]=$,m[3]=0,m[4]=C,m[5]=A,m[6]=j,m[7]=0,m[8]=p,m[9]=O,m[10]=z,m[11]=0,m[12]=-(S*G+C*M+p*L),m[13]=-(F*G+A*M+O*L),m[14]=-($*G+j*M+z*L),m[15]=1,m)}}),Y0=r((nt,ke)=>{ke.exports=_;function _(d){return"mat4("+d[0]+", "+d[1]+", "+d[2]+", "+d[3]+", "+d[4]+", "+d[5]+", "+d[6]+", "+d[7]+", "+d[8]+", "+d[9]+", "+d[10]+", "+d[11]+", "+d[12]+", "+d[13]+", "+d[14]+", "+d[15]+")"}}),im=r((nt,ke)=>{ke.exports={create:y0(),clone:kp(),copy:u0(),identity:f0(),transpose:v0(),invert:p0(),adjoint:rm(),determinant:am(),multiply:ym(),translate:Wm(),scale:h0(),rotate:f1(),rotateX:T1(),rotateY:I1(),rotateZ:p1(),fromRotation:Qm(),fromRotationTranslation:m1(),fromScaling:W1(),fromTranslation:ug(),fromXRotation:ng(),fromYRotation:Ko(),fromZRotation:wi(),fromQuat:S0(),frustum:Z0(),perspective:Pp(),perspectiveFromFieldOfView:Ip(),ortho:x0(),lookAt:B0(),str:Y0()}}),om=r(nt=>{var ke=im();nt.init2dArray=function(_,d){for(var m=new Array(_),E=0;E<_;E++)m[E]=new Array(d);return m},nt.transposeRagged=function(_){var d=0,m=_.length,E,b;for(E=0;E<m;E++)d=Math.max(d,_[E].length);var w=new Array(d);for(E=0;E<d;E++)for(w[E]=new Array(m),b=0;b<m;b++)w[E][b]=_[b][E];return w},nt.dot=function(_,d){if(!(_.length&&d.length)||_.length!==d.length)return null;var m=_.length,E,b;if(_[0].length)for(E=new Array(m),b=0;b<m;b++)E[b]=nt.dot(_[b],d);else if(d[0].length){var w=nt.transposeRagged(d);for(E=new Array(w.length),b=0;b<w.length;b++)E[b]=nt.dot(_,w[b])}else for(E=0,b=0;b<m;b++)E+=_[b]*d[b];return E},nt.translationMatrix=function(_,d){return[[1,0,_],[0,1,d],[0,0,1]]},nt.rotationMatrix=function(_){var d=_*Math.PI/180;return[[Math.cos(d),-Math.sin(d),0],[Math.sin(d),Math.cos(d),0],[0,0,1]]},nt.rotationXYMatrix=function(_,d,m){return nt.dot(nt.dot(nt.translationMatrix(d,m),nt.rotationMatrix(_)),nt.translationMatrix(-d,-m))},nt.apply3DTransform=function(_){return function(){var d=arguments,m=arguments.length===1?d[0]:[d[0],d[1],d[2]||0];return nt.dot(_,[m[0],m[1],m[2],1]).slice(0,3)}},nt.apply2DTransform=function(_){return function(){var d=arguments;d.length===3&&(d=d[0]);var m=arguments.length===1?d[0]:[d[0],d[1]];return nt.dot(_,[m[0],m[1],1]).slice(0,2)}},nt.apply2DTransform2=function(_){var d=nt.apply2DTransform(_);return function(m){return d(m.slice(0,2)).concat(d(m.slice(2,4)))}},nt.convertCssMatrix=function(_){if(_){var d=_.length;if(d===16)return _;if(d===6)return[_[0],_[1],0,0,_[2],_[3],0,0,0,0,1,0,_[4],_[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},nt.inverseTransformMatrix=function(_){var d=[];return ke.invert(d,_),[[d[0],d[1],d[2],d[3]],[d[4],d[5],d[6],d[7]],[d[8],d[9],d[10],d[11]],[d[12],d[13],d[14],d[15]]]}}),Cm=r((nt,ke)=>{var _=o(),d=i0(),m=om(),E=im();function b(G){var M;if(typeof G=="string"){if(M=document.getElementById(G),M===null)throw new Error("No DOM element with id '"+G+"' exists on the page.");return M}else if(G==null)throw new Error("DOM element provided is null or undefined");return G}function w(G){var M=_.select(G);return M.node()instanceof HTMLElement&&M.size()&&M.classed("js-plotly-plot")}function S(G){var M=G&&G.parentNode;M&&M.removeChild(G)}function C(G,M){p("global",G,M)}function p(G,M,L){var B="plotly.js-style-"+G,X=document.getElementById(B);if(!(X&&X.matches(".no-inline-styles"))){X||(X=document.createElement("style"),X.setAttribute("id",B),X.appendChild(document.createTextNode("")),document.head.appendChild(X));var ee=X.sheet;ee?ee.insertRule?ee.insertRule(M+"{"+L+"}",0):ee.addRule?ee.addRule(M,L,0):d.warn("addStyleRule failed"):d.warn("Cannot addRelatedStyleRule, probably due to strict CSP...")}}function F(G){var M="plotly.js-style-"+G,L=document.getElementById(M);L&&S(L)}function A(G,M,L,B,X,ee){var yt=B.split(":"),Ze=X.split(":"),Re="data-btn-style-event-added";ee||(ee=document),ee.querySelectorAll(G).forEach(function(Q){Q.getAttribute(Re)||(Q.addEventListener("mouseenter",function(){var xt=this.querySelector(L);xt&&(xt.style[yt[0]]=yt[1])}),Q.addEventListener("mouseleave",function(){var xt=this.querySelector(L);xt&&(M&&this.matches(M)?xt.style[yt[0]]=yt[1]:xt.style[Ze[0]]=Ze[1])}),Q.setAttribute(Re,!0))})}function O(G){var M=j(G),L=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return M.forEach(function(B){var X=$(B);if(X){var ee=m.convertCssMatrix(X);L=E.multiply(L,L,ee)}}),L}function $(G){var M=window.getComputedStyle(G,null),L=M.getPropertyValue("-webkit-transform")||M.getPropertyValue("-moz-transform")||M.getPropertyValue("-ms-transform")||M.getPropertyValue("-o-transform")||M.getPropertyValue("transform");return L==="none"?null:L.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(B){return+B})}function j(G){for(var M=[];z(G);)M.push(G),G=G.parentNode,typeof ShadowRoot=="function"&&G instanceof ShadowRoot&&(G=G.host);return M}function z(G){return G&&(G instanceof Element||G instanceof HTMLElement)}function I(G,M){return G&&M&&G.top===M.top&&G.left===M.left&&G.right===M.right&&G.bottom===M.bottom}ke.exports={getGraphDiv:b,isPlotDiv:w,removeElement:S,addStyleRule:C,addRelatedStyleRule:p,deleteRelatedStyleRule:F,setStyleOnHover:A,getFullTransformMatrix:O,getElementTransformMatrix:$,getElementAndAncestors:j,equalDomRects:I}}),r1=r((nt,ke)=>{ke.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}}),Om=r((nt,ke)=>{var _=se().extendFlat,d=R(),m={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},E={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},b=m.flags.slice().concat(["fullReplot"]),w=E.flags.slice().concat("layoutReplot");ke.exports={traces:m,layout:E,traceFlags:function(){return S(b)},layoutFlags:function(){return S(w)},update:function(F,A){var O=A.editType;if(O&&O!=="none")for(var $=O.split("+"),j=0;j<$.length;j++)F[$[j]]=!0},overrideAll:C};function S(F){for(var A={},O=0;O<F.length;O++)A[F[O]]=!1;return A}function C(F,A,O){var $=_({},F);for(var j in $){var z=$[j];d(z)&&($[j]=p(z,A,O,j))}return O==="from-root"&&($.editType=A),$}function p(F,A,O,$){if(F.valType){var j=_({},F);if(j.editType=A,Array.isArray(F.items)){j.items=new Array(F.items.length);for(var z=0;z<F.items.length;z++)j.items[z]=p(F.items[z],A)}return j}else return C(F,A,$.charAt(0)==="_"?"nested":"from-root")}}),a1=r(nt=>{nt.dash={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"},nt.pattern={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style"},path:{valType:"string",arrayOk:!0,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style"},editType:"style"}}),hg=r((nt,ke)=>{ke.exports={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"}}),pm=r(nt=>{var ke=hg(),_=ke.FORMAT_LINK,d=ke.DATE_FORMAT_LINK;function m(b){var w=b&&b.supportOther;return["Variables are inserted using %{variable},",'for example "y: %{y}"'+(w?" as well as %{xother}, {%_xother}, {%_xother_}, {%xother_}. When showing info for several points, *xother* will be added to those with different x positions from the first point. An underscore before or after *(x|y)other* will add a space on that side, only when this field is shown.":"."),`Numbers are formatted using d3-format's syntax %{variable:d3-format}, for example "Price: %{y:$.2f}".`,_,"for details on the formatting syntax.",`Dates are formatted using d3-time-format's syntax %{variable|d3-time-format}, for example "Day: %{2019-01-01|%A}".`,d,"for details on the date formatting syntax."].join(" ")}nt.templateFormatStringDescription=m;function E(b){var w=b.description?" "+b.description:"",S=b.keys||[];if(S.length>0){for(var C=[],p=0;p<S.length;p++)C[p]="`"+S[p]+"`";w=w+"Finally, the template string has access to ",S.length===1?w=w+"variable "+C[0]:w=w+"variables "+C.slice(0,-1).join(", ")+" and "+C.slice(-1)+"."}return w}nt.hovertemplateAttrs=function(b,w){b=b||{},w=w||{},E(w);var S={valType:"string",dflt:"",editType:b.editType||"none"};return b.arrayOk!==!1&&(S.arrayOk=!0),S},nt.texttemplateAttrs=function(b,w){b=b||{},w=w||{},E(w);var S={valType:"string",dflt:"",editType:b.editType||"calc"};return b.arrayOk!==!1&&(S.arrayOk=!0),S},nt.shapeTexttemplateAttrs=function(b,w){b=b||{},w=w||{},b.newshape,E(w);var S={valType:"string",dflt:"",editType:b.editType||"arraydraw"};return S}}),S1=r((nt,ke)=>{function _(L,B){return B?B.d2l(L):L}function d(L,B){return B?B.l2d(L):L}function m(L){return L.x0}function E(L){return L.x1}function b(L){return L.y0}function w(L){return L.y1}function S(L){return L.x0shift||0}function C(L){return L.x1shift||0}function p(L){return L.y0shift||0}function F(L){return L.y1shift||0}function A(L,B){return _(L.x1,B)+C(L)-_(L.x0,B)-S(L)}function O(L,B,X){return _(L.y1,X)+F(L)-_(L.y0,X)-p(L)}function $(L,B){return Math.abs(A(L,B))}function j(L,B,X){return Math.abs(O(L,B,X))}function z(L,B,X){return L.type!=="line"?void 0:Math.sqrt(Math.pow(A(L,B),2)+Math.pow(O(L,B,X),2))}function I(L,B){return d((_(L.x1,B)+C(L)+_(L.x0,B)+S(L))/2,B)}function G(L,B,X){return d((_(L.y1,X)+F(L)+_(L.y0,X)+p(L))/2,X)}function M(L,B,X){return L.type!=="line"?void 0:O(L,B,X)/A(L,B)}ke.exports={x0:m,x1:E,y0:b,y1:w,slope:M,dx:A,dy:O,width:$,height:j,length:z,xcenter:I,ycenter:G}}),U1=r((nt,ke)=>{var _=Om().overrideAll,d=$t(),m=ct(),E=a1().dash,b=se().extendFlat,w=pm().shapeTexttemplateAttrs,S=S1();ke.exports=_({newshape:{visible:b({},d.visible,{}),showlegend:{valType:"boolean",dflt:!1},legend:b({},d.legend,{}),legendgroup:b({},d.legendgroup,{}),legendgrouptitle:{text:b({},d.legendgrouptitle.text,{}),font:m({})},legendrank:b({},d.legendrank,{}),legendwidth:b({},d.legendwidth,{}),line:{color:{valType:"color"},width:{valType:"number",min:0,dflt:4},dash:b({},E,{dflt:"solid"})},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd"},opacity:{valType:"number",min:0,max:1,dflt:1},layer:{valType:"enumerated",values:["below","above","between"],dflt:"above"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal"},name:b({},d.name,{}),label:{text:{valType:"string",dflt:""},texttemplate:w({newshape:!0},{keys:Object.keys(S)}),font:m({}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"]},textangle:{valType:"angle",dflt:"auto"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto"},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},padding:{valType:"number",dflt:3,min:0}}},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)"},opacity:{valType:"number",min:0,max:1,dflt:.5}}},"none","from-root")}),J1=r((nt,ke)=>{var _=a1().dash,d=se().extendFlat;ke.exports={newselection:{mode:{valType:"enumerated",values:["immediate","gradual"],dflt:"immediate",editType:"none"},line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:1,dflt:1,editType:"none"},dash:d({},_,{dflt:"dot",editType:"none"}),editType:"none"},editType:"none"},activeselection:{fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}}),l1=r((nt,ke)=>{ke.exports=function(_){var d=_.editType;return{t:{valType:"number",dflt:0,editType:d},r:{valType:"number",dflt:0,editType:d},b:{valType:"number",dflt:0,editType:d},l:{valType:"number",dflt:0,editType:d},editType:d}}}),Km=r((nt,ke)=>{var _=ct(),d=r1(),m=Lp(),E=U1(),b=J1(),w=l1(),S=se().extendFlat,C=_({editType:"calc"});C.family.dflt='"Open Sans", verdana, arial, sans-serif',C.size.dflt=12,C.color.dflt=m.defaultLine,ke.exports={font:C,title:{text:{valType:"string",editType:"layoutstyle"},font:_({editType:"layoutstyle"}),subtitle:{text:{valType:"string",editType:"layoutstyle"},font:_({editType:"layoutstyle"}),editType:"layoutstyle"},xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:S(w({editType:"layoutstyle"}),{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},minreducedwidth:{valType:"number",min:2,dflt:64,editType:"plot"},minreducedheight:{valType:"number",min:2,dflt:64,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:m.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:m.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:m.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:E.newshape,activeshape:E.activeshape,newselection:b.newselection,activeselection:b.activeselection,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:S({},d.transition,{editType:"none"})}}),A1=r(()=>{(function(){if(!document.getElementById("ce8d464691048653ffe3a57c6c18ab566e8366f186677868cf724621a857b4fe")){var nt=document.createElement("style");nt.id="ce8d464691048653ffe3a57c6c18ab566e8366f186677868cf724621a857b4fe",nt.textContent=`.maplibregl-map{font:12px/20px Helvetica Neue,Arial,Helvetica,sans-serif;overflow:hidden;position:relative;-webkit-tap-highlight-color:rgb(0 0 0/0)}.maplibregl-canvas{left:0;position:absolute;top:0}.maplibregl-map:fullscreen{height:100%;width:100%}.maplibregl-ctrl-group button.maplibregl-ctrl-compass{touch-action:none}.maplibregl-canvas-container.maplibregl-interactive,.maplibregl-ctrl-group button.maplibregl-ctrl-compass{cursor:grab;-webkit-user-select:none;-moz-user-select:none;user-select:none}.maplibregl-canvas-container.maplibregl-interactive.maplibregl-track-pointer{cursor:pointer}.maplibregl-canvas-container.maplibregl-interactive:active,.maplibregl-ctrl-group button.maplibregl-ctrl-compass:active{cursor:grabbing}.maplibregl-canvas-container.maplibregl-touch-zoom-rotate,.maplibregl-canvas-container.maplibregl-touch-zoom-rotate .maplibregl-canvas{touch-action:pan-x pan-y}.maplibregl-canvas-container.maplibregl-touch-drag-pan,.maplibregl-canvas-container.maplibregl-touch-drag-pan .maplibregl-canvas{touch-action:pinch-zoom}.maplibregl-canvas-container.maplibregl-touch-zoom-rotate.maplibregl-touch-drag-pan,.maplibregl-canvas-container.maplibregl-touch-zoom-rotate.maplibregl-touch-drag-pan .maplibregl-canvas{touch-action:none}.maplibregl-canvas-container.maplibregl-touch-drag-pan.maplibregl-cooperative-gestures,.maplibregl-canvas-container.maplibregl-touch-drag-pan.maplibregl-cooperative-gestures .maplibregl-canvas{touch-action:pan-x pan-y}.maplibregl-ctrl-bottom-left,.maplibregl-ctrl-bottom-right,.maplibregl-ctrl-top-left,.maplibregl-ctrl-top-right{pointer-events:none;position:absolute;z-index:2}.maplibregl-ctrl-top-left{left:0;top:0}.maplibregl-ctrl-top-right{right:0;top:0}.maplibregl-ctrl-bottom-left{bottom:0;left:0}.maplibregl-ctrl-bottom-right{bottom:0;right:0}.maplibregl-ctrl{clear:both;pointer-events:auto;transform:translate(0)}.maplibregl-ctrl-top-left .maplibregl-ctrl{float:left;margin:10px 0 0 10px}.maplibregl-ctrl-top-right .maplibregl-ctrl{float:right;margin:10px 10px 0 0}.maplibregl-ctrl-bottom-left .maplibregl-ctrl{float:left;margin:0 0 10px 10px}.maplibregl-ctrl-bottom-right .maplibregl-ctrl{float:right;margin:0 10px 10px 0}.maplibregl-ctrl-group{background:#fff;border-radius:4px}.maplibregl-ctrl-group:not(:empty){box-shadow:0 0 0 2px rgba(0,0,0,.1)}@media (forced-colors:active){.maplibregl-ctrl-group:not(:empty){box-shadow:0 0 0 2px ButtonText}}.maplibregl-ctrl-group button{background-color:transparent;border:0;box-sizing:border-box;cursor:pointer;display:block;height:29px;outline:none;padding:0;width:29px}.maplibregl-ctrl-group button+button{border-top:1px solid #ddd}.maplibregl-ctrl button .maplibregl-ctrl-icon{background-position:50%;background-repeat:no-repeat;display:block;height:100%;width:100%}@media (forced-colors:active){.maplibregl-ctrl-icon{background-color:transparent}.maplibregl-ctrl-group button+button{border-top:1px solid ButtonText}}.maplibregl-ctrl button::-moz-focus-inner{border:0;padding:0}.maplibregl-ctrl-attrib-button:focus,.maplibregl-ctrl-group button:focus{box-shadow:0 0 2px 2px #0096ff}.maplibregl-ctrl button:disabled{cursor:not-allowed}.maplibregl-ctrl button:disabled .maplibregl-ctrl-icon{opacity:.25}.maplibregl-ctrl button:not(:disabled):hover{background-color:rgb(0 0 0/5%)}.maplibregl-ctrl-group button:focus:focus-visible{box-shadow:0 0 2px 2px #0096ff}.maplibregl-ctrl-group button:focus:not(:focus-visible){box-shadow:none}.maplibregl-ctrl-group button:focus:first-child{border-radius:4px 4px 0 0}.maplibregl-ctrl-group button:focus:last-child{border-radius:0 0 4px 4px}.maplibregl-ctrl-group button:focus:only-child{border-radius:inherit}.maplibregl-ctrl button.maplibregl-ctrl-zoom-out .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23333' viewBox='0 0 29 29'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-zoom-in .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23333' viewBox='0 0 29 29'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5'/%3E%3C/svg%3E")}@media (forced-colors:active){.maplibregl-ctrl button.maplibregl-ctrl-zoom-out .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff' viewBox='0 0 29 29'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-zoom-in .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff' viewBox='0 0 29 29'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5'/%3E%3C/svg%3E")}}@media (forced-colors:active) and (prefers-color-scheme:light){.maplibregl-ctrl button.maplibregl-ctrl-zoom-out .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 29 29'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-zoom-in .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 29 29'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5'/%3E%3C/svg%3E")}}.maplibregl-ctrl button.maplibregl-ctrl-fullscreen .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23333' viewBox='0 0 29 29'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-shrink .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 29 29'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1z'/%3E%3C/svg%3E")}@media (forced-colors:active){.maplibregl-ctrl button.maplibregl-ctrl-fullscreen .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff' viewBox='0 0 29 29'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-shrink .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff' viewBox='0 0 29 29'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1z'/%3E%3C/svg%3E")}}@media (forced-colors:active) and (prefers-color-scheme:light){.maplibregl-ctrl button.maplibregl-ctrl-fullscreen .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 29 29'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-shrink .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 29 29'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1z'/%3E%3C/svg%3E")}}.maplibregl-ctrl button.maplibregl-ctrl-compass .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23333' viewBox='0 0 29 29'%3E%3Cpath d='m10.5 14 4-8 4 8z'/%3E%3Cpath fill='%23ccc' d='m10.5 16 4 8 4-8z'/%3E%3C/svg%3E")}@media (forced-colors:active){.maplibregl-ctrl button.maplibregl-ctrl-compass .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff' viewBox='0 0 29 29'%3E%3Cpath d='m10.5 14 4-8 4 8z'/%3E%3Cpath fill='%23ccc' d='m10.5 16 4 8 4-8z'/%3E%3C/svg%3E")}}@media (forced-colors:active) and (prefers-color-scheme:light){.maplibregl-ctrl button.maplibregl-ctrl-compass .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 29 29'%3E%3Cpath d='m10.5 14 4-8 4 8z'/%3E%3Cpath fill='%23ccc' d='m10.5 16 4 8 4-8z'/%3E%3C/svg%3E")}}.maplibregl-ctrl button.maplibregl-ctrl-terrain .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='22' height='22' fill='%23333' viewBox='0 0 22 22'%3E%3Cpath d='m1.754 13.406 4.453-4.851 3.09 3.09 3.281 3.277.969-.969-3.309-3.312 3.844-4.121 6.148 6.886h1.082v-.855l-7.207-8.07-4.84 5.187L6.169 6.57l-5.48 5.965v.871ZM.688 16.844h20.625v1.375H.688Zm0 0'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-terrain-enabled .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='22' height='22' fill='%2333b5e5' viewBox='0 0 22 22'%3E%3Cpath d='m1.754 13.406 4.453-4.851 3.09 3.09 3.281 3.277.969-.969-3.309-3.312 3.844-4.121 6.148 6.886h1.082v-.855l-7.207-8.07-4.84 5.187L6.169 6.57l-5.48 5.965v.871ZM.688 16.844h20.625v1.375H.688Zm0 0'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23333' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate:disabled .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23aaa' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath fill='red' d='m14 5 1 1-9 9-1-1z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-active .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%2333b5e5' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-active-error .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23e58978' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-background .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%2333b5e5' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-background-error .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23e54e33' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-waiting .maplibregl-ctrl-icon{animation:maplibregl-spin 2s linear infinite}@media (forced-colors:active){.maplibregl-ctrl button.maplibregl-ctrl-geolocate .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate:disabled .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23999' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath fill='red' d='m14 5 1 1-9 9-1-1z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-active .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%2333b5e5' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-active-error .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23e58978' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-background .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%2333b5e5' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-background-error .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23e54e33' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3C/svg%3E")}}@media (forced-colors:active) and (prefers-color-scheme:light){.maplibregl-ctrl button.maplibregl-ctrl-geolocate .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate:disabled .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23666' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath fill='red' d='m14 5 1 1-9 9-1-1z'/%3E%3C/svg%3E")}}@keyframes maplibregl-spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}a.maplibregl-ctrl-logo{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='88' height='23' fill='none'%3E%3Cpath fill='%23000' fill-opacity='.4' fill-rule='evenodd' d='M17.408 16.796h-1.827l2.501-12.095h.198l3.324 6.533.988 2.19.988-2.19 3.258-6.533h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.929 5.644h-.098l-2.914-5.644-.757-1.71-.345 1.71zm1.958-3.42-.726 3.663a1.255 1.255 0 0 1-1.232 1.011h-1.827a1.255 1.255 0 0 1-1.229-1.509l2.501-12.095a1.255 1.255 0 0 1 1.23-1.001h.197a1.25 1.25 0 0 1 1.12.685l3.19 6.273 3.125-6.263a1.25 1.25 0 0 1 1.123-.695h.181a1.255 1.255 0 0 1 1.227.991l1.443 6.71a5 5 0 0 1 .314-.787l.009-.016a4.6 4.6 0 0 1 1.777-1.887c.782-.46 1.668-.667 2.611-.667a4.6 4.6 0 0 1 1.7.32l.306.134c.21-.16.474-.256.759-.256h1.694a1.255 1.255 0 0 1 1.212.925 1.255 1.255 0 0 1 1.212-.925h1.711c.284 0 .545.094.755.252.613-.3 1.312-.45 2.075-.45 1.356 0 2.557.445 3.482 1.4q.47.48.763 1.064V4.701a1.255 1.255 0 0 1 1.255-1.255h1.86A1.255 1.255 0 0 1 54.44 4.7v9.194h2.217c.19 0 .37.043.532.118v-4.77c0-.356.147-.678.385-.906a2.42 2.42 0 0 1-.682-1.71c0-.665.267-1.253.735-1.7a2.45 2.45 0 0 1 1.722-.674 2.43 2.43 0 0 1 1.705.675q.318.302.504.683V4.7a1.255 1.255 0 0 1 1.255-1.255h1.744A1.255 1.255 0 0 1 65.812 4.7v3.335a4.8 4.8 0 0 1 1.526-.246c.938 0 1.817.214 2.59.69a4.47 4.47 0 0 1 1.67 1.743v-.98a1.255 1.255 0 0 1 1.256-1.256h1.777c.233 0 .451.064.639.174a3.4 3.4 0 0 1 1.567-.372c.346 0 .861.02 1.285.232a1.25 1.25 0 0 1 .689 1.004 4.7 4.7 0 0 1 .853-.588c.795-.44 1.675-.647 2.61-.647 1.385 0 2.65.39 3.525 1.396.836.938 1.168 2.173 1.168 3.528q-.001.515-.056 1.051a1.255 1.255 0 0 1-.947 1.09l.408.952a1.255 1.255 0 0 1-.477 1.552c-.418.268-.92.463-1.458.612-.613.171-1.304.244-2.049.244-1.06 0-2.043-.207-2.886-.698l-.015-.008c-.798-.48-1.419-1.135-1.818-1.963l-.004-.008a5.8 5.8 0 0 1-.548-2.512q0-.429.053-.843a1.3 1.3 0 0 1-.333-.086l-.166-.004c-.223 0-.426.062-.643.228-.03.024-.142.139-.142.59v3.883a1.255 1.255 0 0 1-1.256 1.256h-1.777a1.255 1.255 0 0 1-1.256-1.256V15.69l-.032.057a4.8 4.8 0 0 1-1.86 1.833 5.04 5.04 0 0 1-2.484.634 4.5 4.5 0 0 1-1.935-.424 1.25 1.25 0 0 1-.764.258h-1.71a1.255 1.255 0 0 1-1.256-1.255V7.687a2.4 2.4 0 0 1-.428.625c.253.23.412.561.412.93v7.553a1.255 1.255 0 0 1-1.256 1.255h-1.843a1.25 1.25 0 0 1-.894-.373c-.228.23-.544.373-.894.373H51.32a1.255 1.255 0 0 1-1.256-1.255v-1.251l-.061.117a4.7 4.7 0 0 1-1.782 1.884 4.77 4.77 0 0 1-2.485.67 5.6 5.6 0 0 1-1.485-.188l.009 2.764a1.255 1.255 0 0 1-1.255 1.259h-1.729a1.255 1.255 0 0 1-1.255-1.255v-3.537a1.255 1.255 0 0 1-1.167.793h-1.679a1.25 1.25 0 0 1-.77-.263 4.5 4.5 0 0 1-1.945.429c-.885 0-1.724-.21-2.495-.632l-.017-.01a5 5 0 0 1-1.081-.836 1.255 1.255 0 0 1-1.254 1.312h-1.81a1.255 1.255 0 0 1-1.228-.99l-.782-3.625-2.044 3.939a1.25 1.25 0 0 1-1.115.676h-.098a1.25 1.25 0 0 1-1.116-.68l-2.061-3.994zM35.92 16.63l.207-.114.223-.15q.493-.356.735-.785l.061-.118.033 1.332h1.678V9.242h-1.694l-.033 1.267q-.133-.329-.526-.658l-.032-.028a3.2 3.2 0 0 0-.668-.428l-.27-.12a3.3 3.3 0 0 0-1.235-.23q-1.136-.001-1.974.493a3.36 3.36 0 0 0-1.3 1.382q-.445.89-.444 2.074 0 1.2.51 2.107a3.8 3.8 0 0 0 1.382 1.381 3.9 3.9 0 0 0 1.893.477q.795 0 1.455-.33zm-2.789-5.38q-.576.675-.575 1.762 0 1.102.559 1.794.576.675 1.645.675a2.25 2.25 0 0 0 .934-.19 2.2 2.2 0 0 0 .468-.29l.178-.161a2.2 2.2 0 0 0 .397-.561q.244-.5.244-1.15v-.115q0-.708-.296-1.267l-.043-.077a2.2 2.2 0 0 0-.633-.709l-.13-.086-.047-.028a2.1 2.1 0 0 0-1.073-.285q-1.052 0-1.629.692zm2.316 2.706c.163-.17.28-.407.28-.83v-.114c0-.292-.06-.508-.15-.68a.96.96 0 0 0-.353-.389.85.85 0 0 0-.464-.127c-.4 0-.56.114-.664.239l-.01.012c-.148.174-.275.45-.275.945 0 .506.122.801.27.99.097.11.266.224.68.224.303 0 .504-.09.687-.269zm7.545 1.705a2.6 2.6 0 0 0 .331.423q.319.33.755.548l.173.074q.65.255 1.49.255 1.02 0 1.844-.493a3.45 3.45 0 0 0 1.316-1.4q.493-.904.493-2.089 0-1.909-.988-2.913-.988-1.02-2.584-1.02-.898 0-1.575.347a3 3 0 0 0-.415.262l-.199.166a3.4 3.4 0 0 0-.64.82V9.242h-1.712v11.553h1.729l-.017-5.134zm.53-1.138q.206.29.48.5l.155.11.053.034q.51.296 1.119.297 1.07 0 1.645-.675.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.435 0-.835.16a2 2 0 0 0-.284.136 2 2 0 0 0-.363.254 2.2 2.2 0 0 0-.46.569l-.082.162a2.6 2.6 0 0 0-.213 1.072v.115q0 .707.296 1.267l.135.211zm.964-.818a1.1 1.1 0 0 0 .367.385.94.94 0 0 0 .476.118c.423 0 .59-.117.687-.23.159-.194.28-.478.28-.95 0-.53-.133-.8-.266-.952l-.021-.025c-.078-.094-.231-.221-.68-.221a1 1 0 0 0-.503.135l-.012.007a.86.86 0 0 0-.335.343c-.073.133-.132.324-.132.614v.115a1.4 1.4 0 0 0 .14.66zm15.7-6.222q.347-.346.346-.856a1.05 1.05 0 0 0-.345-.79 1.18 1.18 0 0 0-.84-.329q-.51 0-.855.33a1.05 1.05 0 0 0-.346.79q0 .51.346.855.345.346.856.346.51 0 .839-.346zm4.337 9.314.033-1.332q.191.403.59.747l.098.081a4 4 0 0 0 .316.224l.223.122a3.2 3.2 0 0 0 1.44.322 3.8 3.8 0 0 0 1.875-.477 3.5 3.5 0 0 0 1.382-1.366q.527-.89.526-2.09 0-1.184-.444-2.073a3.24 3.24 0 0 0-1.283-1.399q-.823-.51-1.942-.51a3.5 3.5 0 0 0-1.527.344l-.086.043-.165.09a3 3 0 0 0-.33.214q-.432.315-.656.707a2 2 0 0 0-.099.198l.082-1.283V4.701h-1.744v12.095zm.473-2.509a2.5 2.5 0 0 0 .566.7q.117.098.245.18l.144.08a2.1 2.1 0 0 0 .975.232q1.07 0 1.645-.675.576-.69.576-1.778 0-1.102-.576-1.777-.56-.691-1.645-.692a2.2 2.2 0 0 0-1.015.235q-.22.113-.415.282l-.15.142a2.1 2.1 0 0 0-.42.594q-.223.479-.223 1.1v.115q0 .705.293 1.26zm2.616-.293c.157-.191.28-.479.28-.967 0-.51-.13-.79-.276-.961l-.021-.026c-.082-.1-.232-.225-.67-.225a.87.87 0 0 0-.681.279l-.012.011c-.154.155-.274.38-.274.807v.115c0 .285.057.499.144.669a1.1 1.1 0 0 0 .367.405c.137.082.28.123.455.123.423 0 .59-.118.686-.23zm8.266-3.013q.345-.13.724-.14l.069-.002q.493 0 .642.099l.247-1.794q-.196-.099-.717-.099a2.3 2.3 0 0 0-.545.063 2 2 0 0 0-.411.148 2.2 2.2 0 0 0-.4.249 2.5 2.5 0 0 0-.485.499 2.7 2.7 0 0 0-.32.581l-.05.137v-1.48h-1.778v7.553h1.777v-3.884q0-.546.159-.943a1.5 1.5 0 0 1 .466-.636 2.5 2.5 0 0 1 .399-.253 2 2 0 0 1 .224-.099zm9.784 2.656.05-.922q0-1.743-.856-2.698-.838-.97-2.584-.97-1.119-.001-2.007.493a3.46 3.46 0 0 0-1.4 1.382q-.493.906-.493 2.106 0 1.07.428 1.975.428.89 1.332 1.432.906.526 2.255.526.973 0 1.668-.185l.044-.012.135-.04q.613-.184.984-.421l-.542-1.267q-.3.162-.642.274l-.297.087q-.51.131-1.3.131-.954 0-1.497-.444a1.6 1.6 0 0 1-.192-.193q-.366-.44-.512-1.234l-.004-.021zm-5.427-1.256-.003.022h3.752v-.138q-.011-.727-.288-1.118a1 1 0 0 0-.156-.176q-.46-.428-1.316-.428-.986 0-1.494.604-.379.45-.494 1.234zm-27.053 2.77V4.7h-1.86v12.095h5.333V15.15zm7.103-5.908v7.553h-1.843V9.242h1.843z'/%3E%3Cpath fill='%23fff' d='m19.63 11.151-.757-1.71-.345 1.71-1.12 5.644h-1.827L18.083 4.7h.197l3.325 6.533.988 2.19.988-2.19L26.839 4.7h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.93 5.644h-.098l-2.913-5.644zm14.836 5.81q-1.02 0-1.893-.478a3.8 3.8 0 0 1-1.381-1.382q-.51-.906-.51-2.106 0-1.185.444-2.074a3.36 3.36 0 0 1 1.3-1.382q.839-.494 1.974-.494a3.3 3.3 0 0 1 1.234.231 3.3 3.3 0 0 1 .97.575q.396.33.527.659l.033-1.267h1.694v7.553H37.18l-.033-1.332q-.279.593-1.02 1.053a3.17 3.17 0 0 1-1.662.444zm.296-1.482q.938 0 1.58-.642.642-.66.642-1.711v-.115q0-.708-.296-1.267a2.2 2.2 0 0 0-.807-.872 2.1 2.1 0 0 0-1.119-.313q-1.053 0-1.629.692-.575.675-.575 1.76 0 1.103.559 1.795.577.675 1.645.675zm6.521-6.237h1.711v1.4q.906-1.597 2.83-1.597 1.596 0 2.584 1.02.988 1.005.988 2.914 0 1.185-.493 2.09a3.46 3.46 0 0 1-1.316 1.399 3.5 3.5 0 0 1-1.844.493q-.954 0-1.662-.329a2.67 2.67 0 0 1-1.086-.97l.017 5.134h-1.728zm4.048 6.22q1.07 0 1.645-.674.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.592 0-1.12.296-.51.28-.822.823-.296.527-.296 1.234v.115q0 .708.296 1.267.313.543.823.855.51.296 1.119.297z'/%3E%3Cpath fill='%23e1e3e9' d='M51.325 4.7h1.86v10.45h3.473v1.646h-5.333zm7.12 4.542h1.843v7.553h-1.843zm.905-1.415a1.16 1.16 0 0 1-.856-.346 1.17 1.17 0 0 1-.346-.856 1.05 1.05 0 0 1 .346-.79q.346-.329.856-.329.494 0 .839.33a1.05 1.05 0 0 1 .345.79 1.16 1.16 0 0 1-.345.855q-.33.346-.84.346zm7.875 9.133a3.17 3.17 0 0 1-1.662-.444q-.723-.46-1.004-1.053l-.033 1.332h-1.71V4.701h1.743v4.657l-.082 1.283q.279-.658 1.086-1.119a3.5 3.5 0 0 1 1.778-.477q1.119 0 1.942.51a3.24 3.24 0 0 1 1.283 1.4q.445.888.444 2.072 0 1.201-.526 2.09a3.5 3.5 0 0 1-1.382 1.366 3.8 3.8 0 0 1-1.876.477zm-.296-1.481q1.069 0 1.645-.675.577-.69.577-1.778 0-1.102-.577-1.776-.56-.691-1.645-.692a2.12 2.12 0 0 0-1.58.659q-.642.641-.642 1.694v.115q0 .71.296 1.267a2.4 2.4 0 0 0 .807.872 2.1 2.1 0 0 0 1.119.313zm5.927-6.237h1.777v1.481q.263-.757.856-1.217a2.14 2.14 0 0 1 1.349-.46q.527 0 .724.098l-.247 1.794q-.149-.099-.642-.099-.774 0-1.416.494-.626.493-.626 1.58v3.883h-1.777V9.242zm9.534 7.718q-1.35 0-2.255-.526-.904-.543-1.332-1.432a4.6 4.6 0 0 1-.428-1.975q0-1.2.493-2.106a3.46 3.46 0 0 1 1.4-1.382q.889-.495 2.007-.494 1.744 0 2.584.97.855.956.856 2.7 0 .444-.05.92h-5.43q.18 1.005.708 1.45.542.443 1.497.443.79 0 1.3-.131a4 4 0 0 0 .938-.362l.542 1.267q-.411.263-1.119.46-.708.198-1.711.197zm1.596-4.558q.016-1.02-.444-1.432-.46-.428-1.316-.428-1.728 0-1.991 1.86z'/%3E%3Cpath d='M5.074 15.948a.484.657 0 0 0-.486.659v1.84a.484.657 0 0 0 .486.659h4.101a.484.657 0 0 0 .486-.659v-1.84a.484.657 0 0 0-.486-.659zm3.56 1.16H5.617v.838h3.017z' style='fill:%23fff;fill-rule:evenodd;stroke-width:1.03600001'/%3E%3Cg style='stroke-width:1.12603545'%3E%3Cpath d='M-9.408-1.416c-3.833-.025-7.056 2.912-7.08 6.615-.02 3.08 1.653 4.832 3.107 6.268.903.892 1.721 1.74 2.32 2.902l-.525-.004c-.543-.003-.992.304-1.24.639a1.87 1.87 0 0 0-.362 1.121l-.011 1.877c-.003.402.104.787.347 1.125.244.338.688.653 1.23.656l4.142.028c.542.003.99-.306 1.238-.641a1.87 1.87 0 0 0 .363-1.121l.012-1.875a1.87 1.87 0 0 0-.348-1.127c-.243-.338-.688-.653-1.23-.656l-.518-.004c.597-1.145 1.425-1.983 2.348-2.87 1.473-1.414 3.18-3.149 3.2-6.226-.016-3.59-2.923-6.684-6.993-6.707m-.006 1.1v.002c3.274.02 5.92 2.532 5.9 5.6-.017 2.706-1.39 4.026-2.863 5.44-1.034.994-2.118 2.033-2.814 3.633-.018.041-.052.055-.075.065q-.013.004-.02.01a.34.34 0 0 1-.226.084.34.34 0 0 1-.224-.086l-.092-.077c-.699-1.615-1.768-2.669-2.781-3.67-1.454-1.435-2.797-2.762-2.78-5.478.02-3.067 2.7-5.545 5.975-5.523m-.02 2.826c-1.62-.01-2.944 1.315-2.955 2.96-.01 1.646 1.295 2.988 2.916 2.999h.002c1.621.01 2.943-1.316 2.953-2.961.011-1.646-1.294-2.988-2.916-2.998m-.005 1.1c1.017.006 1.829.83 1.822 1.89s-.83 1.874-1.848 1.867c-1.018-.006-1.829-.83-1.822-1.89s.83-1.874 1.848-1.868m-2.155 11.857 4.14.025c.271.002.49.305.487.676l-.013 1.875c-.003.37-.224.67-.495.668l-4.14-.025c-.27-.002-.487-.306-.485-.676l.012-1.875c.003-.37.224-.67.494-.668' style='color:%23000;font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:medium;line-height:normal;font-family:sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-feature-settings:normal;text-indent:0;text-align:start;text-decoration:none;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:%23000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;text-anchor:start;white-space:normal;shape-padding:0;clip-rule:evenodd;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:%23000;solid-opacity:1;vector-effect:none;fill:%23000;fill-opacity:.4;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto' transform='translate(15.553 2.85)scale(.88807)'/%3E%3Cpath d='M-9.415-.316C-12.69-.338-15.37 2.14-15.39 5.207c-.017 2.716 1.326 4.041 2.78 5.477 1.013 1 2.081 2.055 2.78 3.67l.092.076a.34.34 0 0 0 .225.086.34.34 0 0 0 .227-.083l.019-.01c.022-.009.057-.024.074-.064.697-1.6 1.78-2.64 2.814-3.634 1.473-1.414 2.847-2.733 2.864-5.44.02-3.067-2.627-5.58-5.901-5.601m-.057 8.784c1.621.011 2.944-1.315 2.955-2.96.01-1.646-1.295-2.988-2.916-2.999-1.622-.01-2.945 1.315-2.955 2.96s1.295 2.989 2.916 3' style='clip-rule:evenodd;fill:%23e1e3e9;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4' transform='translate(15.553 2.85)scale(.88807)'/%3E%3Cpath d='M-11.594 15.465c-.27-.002-.492.297-.494.668l-.012 1.876c-.003.371.214.673.485.675l4.14.027c.271.002.492-.298.495-.668l.012-1.877c.003-.37-.215-.672-.485-.674z' style='clip-rule:evenodd;fill:%23fff;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4' transform='translate(15.553 2.85)scale(.88807)'/%3E%3C/g%3E%3C/svg%3E");background-repeat:no-repeat;cursor:pointer;display:block;height:23px;margin:0 0 -4px -4px;overflow:hidden;width:88px}a.maplibregl-ctrl-logo.maplibregl-compact{width:14px}@media (forced-colors:active){a.maplibregl-ctrl-logo{background-color:transparent;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='88' height='23' fill='none'%3E%3Cpath fill='%23000' fill-opacity='.4' fill-rule='evenodd' d='M17.408 16.796h-1.827l2.501-12.095h.198l3.324 6.533.988 2.19.988-2.19 3.258-6.533h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.929 5.644h-.098l-2.914-5.644-.757-1.71-.345 1.71zm1.958-3.42-.726 3.663a1.255 1.255 0 0 1-1.232 1.011h-1.827a1.255 1.255 0 0 1-1.229-1.509l2.501-12.095a1.255 1.255 0 0 1 1.23-1.001h.197a1.25 1.25 0 0 1 1.12.685l3.19 6.273 3.125-6.263a1.25 1.25 0 0 1 1.123-.695h.181a1.255 1.255 0 0 1 1.227.991l1.443 6.71a5 5 0 0 1 .314-.787l.009-.016a4.6 4.6 0 0 1 1.777-1.887c.782-.46 1.668-.667 2.611-.667a4.6 4.6 0 0 1 1.7.32l.306.134c.21-.16.474-.256.759-.256h1.694a1.255 1.255 0 0 1 1.212.925 1.255 1.255 0 0 1 1.212-.925h1.711c.284 0 .545.094.755.252.613-.3 1.312-.45 2.075-.45 1.356 0 2.557.445 3.482 1.4q.47.48.763 1.064V4.701a1.255 1.255 0 0 1 1.255-1.255h1.86A1.255 1.255 0 0 1 54.44 4.7v9.194h2.217c.19 0 .37.043.532.118v-4.77c0-.356.147-.678.385-.906a2.42 2.42 0 0 1-.682-1.71c0-.665.267-1.253.735-1.7a2.45 2.45 0 0 1 1.722-.674 2.43 2.43 0 0 1 1.705.675q.318.302.504.683V4.7a1.255 1.255 0 0 1 1.255-1.255h1.744A1.255 1.255 0 0 1 65.812 4.7v3.335a4.8 4.8 0 0 1 1.526-.246c.938 0 1.817.214 2.59.69a4.47 4.47 0 0 1 1.67 1.743v-.98a1.255 1.255 0 0 1 1.256-1.256h1.777c.233 0 .451.064.639.174a3.4 3.4 0 0 1 1.567-.372c.346 0 .861.02 1.285.232a1.25 1.25 0 0 1 .689 1.004 4.7 4.7 0 0 1 .853-.588c.795-.44 1.675-.647 2.61-.647 1.385 0 2.65.39 3.525 1.396.836.938 1.168 2.173 1.168 3.528q-.001.515-.056 1.051a1.255 1.255 0 0 1-.947 1.09l.408.952a1.255 1.255 0 0 1-.477 1.552c-.418.268-.92.463-1.458.612-.613.171-1.304.244-2.049.244-1.06 0-2.043-.207-2.886-.698l-.015-.008c-.798-.48-1.419-1.135-1.818-1.963l-.004-.008a5.8 5.8 0 0 1-.548-2.512q0-.429.053-.843a1.3 1.3 0 0 1-.333-.086l-.166-.004c-.223 0-.426.062-.643.228-.03.024-.142.139-.142.59v3.883a1.255 1.255 0 0 1-1.256 1.256h-1.777a1.255 1.255 0 0 1-1.256-1.256V15.69l-.032.057a4.8 4.8 0 0 1-1.86 1.833 5.04 5.04 0 0 1-2.484.634 4.5 4.5 0 0 1-1.935-.424 1.25 1.25 0 0 1-.764.258h-1.71a1.255 1.255 0 0 1-1.256-1.255V7.687a2.4 2.4 0 0 1-.428.625c.253.23.412.561.412.93v7.553a1.255 1.255 0 0 1-1.256 1.255h-1.843a1.25 1.25 0 0 1-.894-.373c-.228.23-.544.373-.894.373H51.32a1.255 1.255 0 0 1-1.256-1.255v-1.251l-.061.117a4.7 4.7 0 0 1-1.782 1.884 4.77 4.77 0 0 1-2.485.67 5.6 5.6 0 0 1-1.485-.188l.009 2.764a1.255 1.255 0 0 1-1.255 1.259h-1.729a1.255 1.255 0 0 1-1.255-1.255v-3.537a1.255 1.255 0 0 1-1.167.793h-1.679a1.25 1.25 0 0 1-.77-.263 4.5 4.5 0 0 1-1.945.429c-.885 0-1.724-.21-2.495-.632l-.017-.01a5 5 0 0 1-1.081-.836 1.255 1.255 0 0 1-1.254 1.312h-1.81a1.255 1.255 0 0 1-1.228-.99l-.782-3.625-2.044 3.939a1.25 1.25 0 0 1-1.115.676h-.098a1.25 1.25 0 0 1-1.116-.68l-2.061-3.994zM35.92 16.63l.207-.114.223-.15q.493-.356.735-.785l.061-.118.033 1.332h1.678V9.242h-1.694l-.033 1.267q-.133-.329-.526-.658l-.032-.028a3.2 3.2 0 0 0-.668-.428l-.27-.12a3.3 3.3 0 0 0-1.235-.23q-1.136-.001-1.974.493a3.36 3.36 0 0 0-1.3 1.382q-.445.89-.444 2.074 0 1.2.51 2.107a3.8 3.8 0 0 0 1.382 1.381 3.9 3.9 0 0 0 1.893.477q.795 0 1.455-.33zm-2.789-5.38q-.576.675-.575 1.762 0 1.102.559 1.794.576.675 1.645.675a2.25 2.25 0 0 0 .934-.19 2.2 2.2 0 0 0 .468-.29l.178-.161a2.2 2.2 0 0 0 .397-.561q.244-.5.244-1.15v-.115q0-.708-.296-1.267l-.043-.077a2.2 2.2 0 0 0-.633-.709l-.13-.086-.047-.028a2.1 2.1 0 0 0-1.073-.285q-1.052 0-1.629.692zm2.316 2.706c.163-.17.28-.407.28-.83v-.114c0-.292-.06-.508-.15-.68a.96.96 0 0 0-.353-.389.85.85 0 0 0-.464-.127c-.4 0-.56.114-.664.239l-.01.012c-.148.174-.275.45-.275.945 0 .506.122.801.27.99.097.11.266.224.68.224.303 0 .504-.09.687-.269zm7.545 1.705a2.6 2.6 0 0 0 .331.423q.319.33.755.548l.173.074q.65.255 1.49.255 1.02 0 1.844-.493a3.45 3.45 0 0 0 1.316-1.4q.493-.904.493-2.089 0-1.909-.988-2.913-.988-1.02-2.584-1.02-.898 0-1.575.347a3 3 0 0 0-.415.262l-.199.166a3.4 3.4 0 0 0-.64.82V9.242h-1.712v11.553h1.729l-.017-5.134zm.53-1.138q.206.29.48.5l.155.11.053.034q.51.296 1.119.297 1.07 0 1.645-.675.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.435 0-.835.16a2 2 0 0 0-.284.136 2 2 0 0 0-.363.254 2.2 2.2 0 0 0-.46.569l-.082.162a2.6 2.6 0 0 0-.213 1.072v.115q0 .707.296 1.267l.135.211zm.964-.818a1.1 1.1 0 0 0 .367.385.94.94 0 0 0 .476.118c.423 0 .59-.117.687-.23.159-.194.28-.478.28-.95 0-.53-.133-.8-.266-.952l-.021-.025c-.078-.094-.231-.221-.68-.221a1 1 0 0 0-.503.135l-.012.007a.86.86 0 0 0-.335.343c-.073.133-.132.324-.132.614v.115a1.4 1.4 0 0 0 .14.66zm15.7-6.222q.347-.346.346-.856a1.05 1.05 0 0 0-.345-.79 1.18 1.18 0 0 0-.84-.329q-.51 0-.855.33a1.05 1.05 0 0 0-.346.79q0 .51.346.855.345.346.856.346.51 0 .839-.346zm4.337 9.314.033-1.332q.191.403.59.747l.098.081a4 4 0 0 0 .316.224l.223.122a3.2 3.2 0 0 0 1.44.322 3.8 3.8 0 0 0 1.875-.477 3.5 3.5 0 0 0 1.382-1.366q.527-.89.526-2.09 0-1.184-.444-2.073a3.24 3.24 0 0 0-1.283-1.399q-.823-.51-1.942-.51a3.5 3.5 0 0 0-1.527.344l-.086.043-.165.09a3 3 0 0 0-.33.214q-.432.315-.656.707a2 2 0 0 0-.099.198l.082-1.283V4.701h-1.744v12.095zm.473-2.509a2.5 2.5 0 0 0 .566.7q.117.098.245.18l.144.08a2.1 2.1 0 0 0 .975.232q1.07 0 1.645-.675.576-.69.576-1.778 0-1.102-.576-1.777-.56-.691-1.645-.692a2.2 2.2 0 0 0-1.015.235q-.22.113-.415.282l-.15.142a2.1 2.1 0 0 0-.42.594q-.223.479-.223 1.1v.115q0 .705.293 1.26zm2.616-.293c.157-.191.28-.479.28-.967 0-.51-.13-.79-.276-.961l-.021-.026c-.082-.1-.232-.225-.67-.225a.87.87 0 0 0-.681.279l-.012.011c-.154.155-.274.38-.274.807v.115c0 .285.057.499.144.669a1.1 1.1 0 0 0 .367.405c.137.082.28.123.455.123.423 0 .59-.118.686-.23zm8.266-3.013q.345-.13.724-.14l.069-.002q.493 0 .642.099l.247-1.794q-.196-.099-.717-.099a2.3 2.3 0 0 0-.545.063 2 2 0 0 0-.411.148 2.2 2.2 0 0 0-.4.249 2.5 2.5 0 0 0-.485.499 2.7 2.7 0 0 0-.32.581l-.05.137v-1.48h-1.778v7.553h1.777v-3.884q0-.546.159-.943a1.5 1.5 0 0 1 .466-.636 2.5 2.5 0 0 1 .399-.253 2 2 0 0 1 .224-.099zm9.784 2.656.05-.922q0-1.743-.856-2.698-.838-.97-2.584-.97-1.119-.001-2.007.493a3.46 3.46 0 0 0-1.4 1.382q-.493.906-.493 2.106 0 1.07.428 1.975.428.89 1.332 1.432.906.526 2.255.526.973 0 1.668-.185l.044-.012.135-.04q.613-.184.984-.421l-.542-1.267q-.3.162-.642.274l-.297.087q-.51.131-1.3.131-.954 0-1.497-.444a1.6 1.6 0 0 1-.192-.193q-.366-.44-.512-1.234l-.004-.021zm-5.427-1.256-.003.022h3.752v-.138q-.011-.727-.288-1.118a1 1 0 0 0-.156-.176q-.46-.428-1.316-.428-.986 0-1.494.604-.379.45-.494 1.234zm-27.053 2.77V4.7h-1.86v12.095h5.333V15.15zm7.103-5.908v7.553h-1.843V9.242h1.843z'/%3E%3Cpath fill='%23fff' d='m19.63 11.151-.757-1.71-.345 1.71-1.12 5.644h-1.827L18.083 4.7h.197l3.325 6.533.988 2.19.988-2.19L26.839 4.7h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.93 5.644h-.098l-2.913-5.644zm14.836 5.81q-1.02 0-1.893-.478a3.8 3.8 0 0 1-1.381-1.382q-.51-.906-.51-2.106 0-1.185.444-2.074a3.36 3.36 0 0 1 1.3-1.382q.839-.494 1.974-.494a3.3 3.3 0 0 1 1.234.231 3.3 3.3 0 0 1 .97.575q.396.33.527.659l.033-1.267h1.694v7.553H37.18l-.033-1.332q-.279.593-1.02 1.053a3.17 3.17 0 0 1-1.662.444zm.296-1.482q.938 0 1.58-.642.642-.66.642-1.711v-.115q0-.708-.296-1.267a2.2 2.2 0 0 0-.807-.872 2.1 2.1 0 0 0-1.119-.313q-1.053 0-1.629.692-.575.675-.575 1.76 0 1.103.559 1.795.577.675 1.645.675zm6.521-6.237h1.711v1.4q.906-1.597 2.83-1.597 1.596 0 2.584 1.02.988 1.005.988 2.914 0 1.185-.493 2.09a3.46 3.46 0 0 1-1.316 1.399 3.5 3.5 0 0 1-1.844.493q-.954 0-1.662-.329a2.67 2.67 0 0 1-1.086-.97l.017 5.134h-1.728zm4.048 6.22q1.07 0 1.645-.674.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.592 0-1.12.296-.51.28-.822.823-.296.527-.296 1.234v.115q0 .708.296 1.267.313.543.823.855.51.296 1.119.297z'/%3E%3Cpath fill='%23e1e3e9' d='M51.325 4.7h1.86v10.45h3.473v1.646h-5.333zm7.12 4.542h1.843v7.553h-1.843zm.905-1.415a1.16 1.16 0 0 1-.856-.346 1.17 1.17 0 0 1-.346-.856 1.05 1.05 0 0 1 .346-.79q.346-.329.856-.329.494 0 .839.33a1.05 1.05 0 0 1 .345.79 1.16 1.16 0 0 1-.345.855q-.33.346-.84.346zm7.875 9.133a3.17 3.17 0 0 1-1.662-.444q-.723-.46-1.004-1.053l-.033 1.332h-1.71V4.701h1.743v4.657l-.082 1.283q.279-.658 1.086-1.119a3.5 3.5 0 0 1 1.778-.477q1.119 0 1.942.51a3.24 3.24 0 0 1 1.283 1.4q.445.888.444 2.072 0 1.201-.526 2.09a3.5 3.5 0 0 1-1.382 1.366 3.8 3.8 0 0 1-1.876.477zm-.296-1.481q1.069 0 1.645-.675.577-.69.577-1.778 0-1.102-.577-1.776-.56-.691-1.645-.692a2.12 2.12 0 0 0-1.58.659q-.642.641-.642 1.694v.115q0 .71.296 1.267a2.4 2.4 0 0 0 .807.872 2.1 2.1 0 0 0 1.119.313zm5.927-6.237h1.777v1.481q.263-.757.856-1.217a2.14 2.14 0 0 1 1.349-.46q.527 0 .724.098l-.247 1.794q-.149-.099-.642-.099-.774 0-1.416.494-.626.493-.626 1.58v3.883h-1.777V9.242zm9.534 7.718q-1.35 0-2.255-.526-.904-.543-1.332-1.432a4.6 4.6 0 0 1-.428-1.975q0-1.2.493-2.106a3.46 3.46 0 0 1 1.4-1.382q.889-.495 2.007-.494 1.744 0 2.584.97.855.956.856 2.7 0 .444-.05.92h-5.43q.18 1.005.708 1.45.542.443 1.497.443.79 0 1.3-.131a4 4 0 0 0 .938-.362l.542 1.267q-.411.263-1.119.46-.708.198-1.711.197zm1.596-4.558q.016-1.02-.444-1.432-.46-.428-1.316-.428-1.728 0-1.991 1.86z'/%3E%3Cpath d='M5.074 15.948a.484.657 0 0 0-.486.659v1.84a.484.657 0 0 0 .486.659h4.101a.484.657 0 0 0 .486-.659v-1.84a.484.657 0 0 0-.486-.659zm3.56 1.16H5.617v.838h3.017z' style='fill:%23fff;fill-rule:evenodd;stroke-width:1.03600001'/%3E%3Cg style='stroke-width:1.12603545'%3E%3Cpath d='M-9.408-1.416c-3.833-.025-7.056 2.912-7.08 6.615-.02 3.08 1.653 4.832 3.107 6.268.903.892 1.721 1.74 2.32 2.902l-.525-.004c-.543-.003-.992.304-1.24.639a1.87 1.87 0 0 0-.362 1.121l-.011 1.877c-.003.402.104.787.347 1.125.244.338.688.653 1.23.656l4.142.028c.542.003.99-.306 1.238-.641a1.87 1.87 0 0 0 .363-1.121l.012-1.875a1.87 1.87 0 0 0-.348-1.127c-.243-.338-.688-.653-1.23-.656l-.518-.004c.597-1.145 1.425-1.983 2.348-2.87 1.473-1.414 3.18-3.149 3.2-6.226-.016-3.59-2.923-6.684-6.993-6.707m-.006 1.1v.002c3.274.02 5.92 2.532 5.9 5.6-.017 2.706-1.39 4.026-2.863 5.44-1.034.994-2.118 2.033-2.814 3.633-.018.041-.052.055-.075.065q-.013.004-.02.01a.34.34 0 0 1-.226.084.34.34 0 0 1-.224-.086l-.092-.077c-.699-1.615-1.768-2.669-2.781-3.67-1.454-1.435-2.797-2.762-2.78-5.478.02-3.067 2.7-5.545 5.975-5.523m-.02 2.826c-1.62-.01-2.944 1.315-2.955 2.96-.01 1.646 1.295 2.988 2.916 2.999h.002c1.621.01 2.943-1.316 2.953-2.961.011-1.646-1.294-2.988-2.916-2.998m-.005 1.1c1.017.006 1.829.83 1.822 1.89s-.83 1.874-1.848 1.867c-1.018-.006-1.829-.83-1.822-1.89s.83-1.874 1.848-1.868m-2.155 11.857 4.14.025c.271.002.49.305.487.676l-.013 1.875c-.003.37-.224.67-.495.668l-4.14-.025c-.27-.002-.487-.306-.485-.676l.012-1.875c.003-.37.224-.67.494-.668' style='color:%23000;font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:medium;line-height:normal;font-family:sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-feature-settings:normal;text-indent:0;text-align:start;text-decoration:none;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:%23000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;text-anchor:start;white-space:normal;shape-padding:0;clip-rule:evenodd;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:%23000;solid-opacity:1;vector-effect:none;fill:%23000;fill-opacity:.4;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto' transform='translate(15.553 2.85)scale(.88807)'/%3E%3Cpath d='M-9.415-.316C-12.69-.338-15.37 2.14-15.39 5.207c-.017 2.716 1.326 4.041 2.78 5.477 1.013 1 2.081 2.055 2.78 3.67l.092.076a.34.34 0 0 0 .225.086.34.34 0 0 0 .227-.083l.019-.01c.022-.009.057-.024.074-.064.697-1.6 1.78-2.64 2.814-3.634 1.473-1.414 2.847-2.733 2.864-5.44.02-3.067-2.627-5.58-5.901-5.601m-.057 8.784c1.621.011 2.944-1.315 2.955-2.96.01-1.646-1.295-2.988-2.916-2.999-1.622-.01-2.945 1.315-2.955 2.96s1.295 2.989 2.916 3' style='clip-rule:evenodd;fill:%23e1e3e9;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4' transform='translate(15.553 2.85)scale(.88807)'/%3E%3Cpath d='M-11.594 15.465c-.27-.002-.492.297-.494.668l-.012 1.876c-.003.371.214.673.485.675l4.14.027c.271.002.492-.298.495-.668l.012-1.877c.003-.37-.215-.672-.485-.674z' style='clip-rule:evenodd;fill:%23fff;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4' transform='translate(15.553 2.85)scale(.88807)'/%3E%3C/g%3E%3C/svg%3E")}}@media (forced-colors:active) and (prefers-color-scheme:light){a.maplibregl-ctrl-logo{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='88' height='23' fill='none'%3E%3Cpath fill='%23000' fill-opacity='.4' fill-rule='evenodd' d='M17.408 16.796h-1.827l2.501-12.095h.198l3.324 6.533.988 2.19.988-2.19 3.258-6.533h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.929 5.644h-.098l-2.914-5.644-.757-1.71-.345 1.71zm1.958-3.42-.726 3.663a1.255 1.255 0 0 1-1.232 1.011h-1.827a1.255 1.255 0 0 1-1.229-1.509l2.501-12.095a1.255 1.255 0 0 1 1.23-1.001h.197a1.25 1.25 0 0 1 1.12.685l3.19 6.273 3.125-6.263a1.25 1.25 0 0 1 1.123-.695h.181a1.255 1.255 0 0 1 1.227.991l1.443 6.71a5 5 0 0 1 .314-.787l.009-.016a4.6 4.6 0 0 1 1.777-1.887c.782-.46 1.668-.667 2.611-.667a4.6 4.6 0 0 1 1.7.32l.306.134c.21-.16.474-.256.759-.256h1.694a1.255 1.255 0 0 1 1.212.925 1.255 1.255 0 0 1 1.212-.925h1.711c.284 0 .545.094.755.252.613-.3 1.312-.45 2.075-.45 1.356 0 2.557.445 3.482 1.4q.47.48.763 1.064V4.701a1.255 1.255 0 0 1 1.255-1.255h1.86A1.255 1.255 0 0 1 54.44 4.7v9.194h2.217c.19 0 .37.043.532.118v-4.77c0-.356.147-.678.385-.906a2.42 2.42 0 0 1-.682-1.71c0-.665.267-1.253.735-1.7a2.45 2.45 0 0 1 1.722-.674 2.43 2.43 0 0 1 1.705.675q.318.302.504.683V4.7a1.255 1.255 0 0 1 1.255-1.255h1.744A1.255 1.255 0 0 1 65.812 4.7v3.335a4.8 4.8 0 0 1 1.526-.246c.938 0 1.817.214 2.59.69a4.47 4.47 0 0 1 1.67 1.743v-.98a1.255 1.255 0 0 1 1.256-1.256h1.777c.233 0 .451.064.639.174a3.4 3.4 0 0 1 1.567-.372c.346 0 .861.02 1.285.232a1.25 1.25 0 0 1 .689 1.004 4.7 4.7 0 0 1 .853-.588c.795-.44 1.675-.647 2.61-.647 1.385 0 2.65.39 3.525 1.396.836.938 1.168 2.173 1.168 3.528q-.001.515-.056 1.051a1.255 1.255 0 0 1-.947 1.09l.408.952a1.255 1.255 0 0 1-.477 1.552c-.418.268-.92.463-1.458.612-.613.171-1.304.244-2.049.244-1.06 0-2.043-.207-2.886-.698l-.015-.008c-.798-.48-1.419-1.135-1.818-1.963l-.004-.008a5.8 5.8 0 0 1-.548-2.512q0-.429.053-.843a1.3 1.3 0 0 1-.333-.086l-.166-.004c-.223 0-.426.062-.643.228-.03.024-.142.139-.142.59v3.883a1.255 1.255 0 0 1-1.256 1.256h-1.777a1.255 1.255 0 0 1-1.256-1.256V15.69l-.032.057a4.8 4.8 0 0 1-1.86 1.833 5.04 5.04 0 0 1-2.484.634 4.5 4.5 0 0 1-1.935-.424 1.25 1.25 0 0 1-.764.258h-1.71a1.255 1.255 0 0 1-1.256-1.255V7.687a2.4 2.4 0 0 1-.428.625c.253.23.412.561.412.93v7.553a1.255 1.255 0 0 1-1.256 1.255h-1.843a1.25 1.25 0 0 1-.894-.373c-.228.23-.544.373-.894.373H51.32a1.255 1.255 0 0 1-1.256-1.255v-1.251l-.061.117a4.7 4.7 0 0 1-1.782 1.884 4.77 4.77 0 0 1-2.485.67 5.6 5.6 0 0 1-1.485-.188l.009 2.764a1.255 1.255 0 0 1-1.255 1.259h-1.729a1.255 1.255 0 0 1-1.255-1.255v-3.537a1.255 1.255 0 0 1-1.167.793h-1.679a1.25 1.25 0 0 1-.77-.263 4.5 4.5 0 0 1-1.945.429c-.885 0-1.724-.21-2.495-.632l-.017-.01a5 5 0 0 1-1.081-.836 1.255 1.255 0 0 1-1.254 1.312h-1.81a1.255 1.255 0 0 1-1.228-.99l-.782-3.625-2.044 3.939a1.25 1.25 0 0 1-1.115.676h-.098a1.25 1.25 0 0 1-1.116-.68l-2.061-3.994zM35.92 16.63l.207-.114.223-.15q.493-.356.735-.785l.061-.118.033 1.332h1.678V9.242h-1.694l-.033 1.267q-.133-.329-.526-.658l-.032-.028a3.2 3.2 0 0 0-.668-.428l-.27-.12a3.3 3.3 0 0 0-1.235-.23q-1.136-.001-1.974.493a3.36 3.36 0 0 0-1.3 1.382q-.445.89-.444 2.074 0 1.2.51 2.107a3.8 3.8 0 0 0 1.382 1.381 3.9 3.9 0 0 0 1.893.477q.795 0 1.455-.33zm-2.789-5.38q-.576.675-.575 1.762 0 1.102.559 1.794.576.675 1.645.675a2.25 2.25 0 0 0 .934-.19 2.2 2.2 0 0 0 .468-.29l.178-.161a2.2 2.2 0 0 0 .397-.561q.244-.5.244-1.15v-.115q0-.708-.296-1.267l-.043-.077a2.2 2.2 0 0 0-.633-.709l-.13-.086-.047-.028a2.1 2.1 0 0 0-1.073-.285q-1.052 0-1.629.692zm2.316 2.706c.163-.17.28-.407.28-.83v-.114c0-.292-.06-.508-.15-.68a.96.96 0 0 0-.353-.389.85.85 0 0 0-.464-.127c-.4 0-.56.114-.664.239l-.01.012c-.148.174-.275.45-.275.945 0 .506.122.801.27.99.097.11.266.224.68.224.303 0 .504-.09.687-.269zm7.545 1.705a2.6 2.6 0 0 0 .331.423q.319.33.755.548l.173.074q.65.255 1.49.255 1.02 0 1.844-.493a3.45 3.45 0 0 0 1.316-1.4q.493-.904.493-2.089 0-1.909-.988-2.913-.988-1.02-2.584-1.02-.898 0-1.575.347a3 3 0 0 0-.415.262l-.199.166a3.4 3.4 0 0 0-.64.82V9.242h-1.712v11.553h1.729l-.017-5.134zm.53-1.138q.206.29.48.5l.155.11.053.034q.51.296 1.119.297 1.07 0 1.645-.675.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.435 0-.835.16a2 2 0 0 0-.284.136 2 2 0 0 0-.363.254 2.2 2.2 0 0 0-.46.569l-.082.162a2.6 2.6 0 0 0-.213 1.072v.115q0 .707.296 1.267l.135.211zm.964-.818a1.1 1.1 0 0 0 .367.385.94.94 0 0 0 .476.118c.423 0 .59-.117.687-.23.159-.194.28-.478.28-.95 0-.53-.133-.8-.266-.952l-.021-.025c-.078-.094-.231-.221-.68-.221a1 1 0 0 0-.503.135l-.012.007a.86.86 0 0 0-.335.343c-.073.133-.132.324-.132.614v.115a1.4 1.4 0 0 0 .14.66zm15.7-6.222q.347-.346.346-.856a1.05 1.05 0 0 0-.345-.79 1.18 1.18 0 0 0-.84-.329q-.51 0-.855.33a1.05 1.05 0 0 0-.346.79q0 .51.346.855.345.346.856.346.51 0 .839-.346zm4.337 9.314.033-1.332q.191.403.59.747l.098.081a4 4 0 0 0 .316.224l.223.122a3.2 3.2 0 0 0 1.44.322 3.8 3.8 0 0 0 1.875-.477 3.5 3.5 0 0 0 1.382-1.366q.527-.89.526-2.09 0-1.184-.444-2.073a3.24 3.24 0 0 0-1.283-1.399q-.823-.51-1.942-.51a3.5 3.5 0 0 0-1.527.344l-.086.043-.165.09a3 3 0 0 0-.33.214q-.432.315-.656.707a2 2 0 0 0-.099.198l.082-1.283V4.701h-1.744v12.095zm.473-2.509a2.5 2.5 0 0 0 .566.7q.117.098.245.18l.144.08a2.1 2.1 0 0 0 .975.232q1.07 0 1.645-.675.576-.69.576-1.778 0-1.102-.576-1.777-.56-.691-1.645-.692a2.2 2.2 0 0 0-1.015.235q-.22.113-.415.282l-.15.142a2.1 2.1 0 0 0-.42.594q-.223.479-.223 1.1v.115q0 .705.293 1.26zm2.616-.293c.157-.191.28-.479.28-.967 0-.51-.13-.79-.276-.961l-.021-.026c-.082-.1-.232-.225-.67-.225a.87.87 0 0 0-.681.279l-.012.011c-.154.155-.274.38-.274.807v.115c0 .285.057.499.144.669a1.1 1.1 0 0 0 .367.405c.137.082.28.123.455.123.423 0 .59-.118.686-.23zm8.266-3.013q.345-.13.724-.14l.069-.002q.493 0 .642.099l.247-1.794q-.196-.099-.717-.099a2.3 2.3 0 0 0-.545.063 2 2 0 0 0-.411.148 2.2 2.2 0 0 0-.4.249 2.5 2.5 0 0 0-.485.499 2.7 2.7 0 0 0-.32.581l-.05.137v-1.48h-1.778v7.553h1.777v-3.884q0-.546.159-.943a1.5 1.5 0 0 1 .466-.636 2.5 2.5 0 0 1 .399-.253 2 2 0 0 1 .224-.099zm9.784 2.656.05-.922q0-1.743-.856-2.698-.838-.97-2.584-.97-1.119-.001-2.007.493a3.46 3.46 0 0 0-1.4 1.382q-.493.906-.493 2.106 0 1.07.428 1.975.428.89 1.332 1.432.906.526 2.255.526.973 0 1.668-.185l.044-.012.135-.04q.613-.184.984-.421l-.542-1.267q-.3.162-.642.274l-.297.087q-.51.131-1.3.131-.954 0-1.497-.444a1.6 1.6 0 0 1-.192-.193q-.366-.44-.512-1.234l-.004-.021zm-5.427-1.256-.003.022h3.752v-.138q-.011-.727-.288-1.118a1 1 0 0 0-.156-.176q-.46-.428-1.316-.428-.986 0-1.494.604-.379.45-.494 1.234zm-27.053 2.77V4.7h-1.86v12.095h5.333V15.15zm7.103-5.908v7.553h-1.843V9.242h1.843z'/%3E%3Cpath fill='%23fff' d='m19.63 11.151-.757-1.71-.345 1.71-1.12 5.644h-1.827L18.083 4.7h.197l3.325 6.533.988 2.19.988-2.19L26.839 4.7h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.93 5.644h-.098l-2.913-5.644zm14.836 5.81q-1.02 0-1.893-.478a3.8 3.8 0 0 1-1.381-1.382q-.51-.906-.51-2.106 0-1.185.444-2.074a3.36 3.36 0 0 1 1.3-1.382q.839-.494 1.974-.494a3.3 3.3 0 0 1 1.234.231 3.3 3.3 0 0 1 .97.575q.396.33.527.659l.033-1.267h1.694v7.553H37.18l-.033-1.332q-.279.593-1.02 1.053a3.17 3.17 0 0 1-1.662.444zm.296-1.482q.938 0 1.58-.642.642-.66.642-1.711v-.115q0-.708-.296-1.267a2.2 2.2 0 0 0-.807-.872 2.1 2.1 0 0 0-1.119-.313q-1.053 0-1.629.692-.575.675-.575 1.76 0 1.103.559 1.795.577.675 1.645.675zm6.521-6.237h1.711v1.4q.906-1.597 2.83-1.597 1.596 0 2.584 1.02.988 1.005.988 2.914 0 1.185-.493 2.09a3.46 3.46 0 0 1-1.316 1.399 3.5 3.5 0 0 1-1.844.493q-.954 0-1.662-.329a2.67 2.67 0 0 1-1.086-.97l.017 5.134h-1.728zm4.048 6.22q1.07 0 1.645-.674.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.592 0-1.12.296-.51.28-.822.823-.296.527-.296 1.234v.115q0 .708.296 1.267.313.543.823.855.51.296 1.119.297z'/%3E%3Cpath fill='%23e1e3e9' d='M51.325 4.7h1.86v10.45h3.473v1.646h-5.333zm7.12 4.542h1.843v7.553h-1.843zm.905-1.415a1.16 1.16 0 0 1-.856-.346 1.17 1.17 0 0 1-.346-.856 1.05 1.05 0 0 1 .346-.79q.346-.329.856-.329.494 0 .839.33a1.05 1.05 0 0 1 .345.79 1.16 1.16 0 0 1-.345.855q-.33.346-.84.346zm7.875 9.133a3.17 3.17 0 0 1-1.662-.444q-.723-.46-1.004-1.053l-.033 1.332h-1.71V4.701h1.743v4.657l-.082 1.283q.279-.658 1.086-1.119a3.5 3.5 0 0 1 1.778-.477q1.119 0 1.942.51a3.24 3.24 0 0 1 1.283 1.4q.445.888.444 2.072 0 1.201-.526 2.09a3.5 3.5 0 0 1-1.382 1.366 3.8 3.8 0 0 1-1.876.477zm-.296-1.481q1.069 0 1.645-.675.577-.69.577-1.778 0-1.102-.577-1.776-.56-.691-1.645-.692a2.12 2.12 0 0 0-1.58.659q-.642.641-.642 1.694v.115q0 .71.296 1.267a2.4 2.4 0 0 0 .807.872 2.1 2.1 0 0 0 1.119.313zm5.927-6.237h1.777v1.481q.263-.757.856-1.217a2.14 2.14 0 0 1 1.349-.46q.527 0 .724.098l-.247 1.794q-.149-.099-.642-.099-.774 0-1.416.494-.626.493-.626 1.58v3.883h-1.777V9.242zm9.534 7.718q-1.35 0-2.255-.526-.904-.543-1.332-1.432a4.6 4.6 0 0 1-.428-1.975q0-1.2.493-2.106a3.46 3.46 0 0 1 1.4-1.382q.889-.495 2.007-.494 1.744 0 2.584.97.855.956.856 2.7 0 .444-.05.92h-5.43q.18 1.005.708 1.45.542.443 1.497.443.79 0 1.3-.131a4 4 0 0 0 .938-.362l.542 1.267q-.411.263-1.119.46-.708.198-1.711.197zm1.596-4.558q.016-1.02-.444-1.432-.46-.428-1.316-.428-1.728 0-1.991 1.86z'/%3E%3Cpath d='M5.074 15.948a.484.657 0 0 0-.486.659v1.84a.484.657 0 0 0 .486.659h4.101a.484.657 0 0 0 .486-.659v-1.84a.484.657 0 0 0-.486-.659zm3.56 1.16H5.617v.838h3.017z' style='fill:%23fff;fill-rule:evenodd;stroke-width:1.03600001'/%3E%3Cg style='stroke-width:1.12603545'%3E%3Cpath d='M-9.408-1.416c-3.833-.025-7.056 2.912-7.08 6.615-.02 3.08 1.653 4.832 3.107 6.268.903.892 1.721 1.74 2.32 2.902l-.525-.004c-.543-.003-.992.304-1.24.639a1.87 1.87 0 0 0-.362 1.121l-.011 1.877c-.003.402.104.787.347 1.125.244.338.688.653 1.23.656l4.142.028c.542.003.99-.306 1.238-.641a1.87 1.87 0 0 0 .363-1.121l.012-1.875a1.87 1.87 0 0 0-.348-1.127c-.243-.338-.688-.653-1.23-.656l-.518-.004c.597-1.145 1.425-1.983 2.348-2.87 1.473-1.414 3.18-3.149 3.2-6.226-.016-3.59-2.923-6.684-6.993-6.707m-.006 1.1v.002c3.274.02 5.92 2.532 5.9 5.6-.017 2.706-1.39 4.026-2.863 5.44-1.034.994-2.118 2.033-2.814 3.633-.018.041-.052.055-.075.065q-.013.004-.02.01a.34.34 0 0 1-.226.084.34.34 0 0 1-.224-.086l-.092-.077c-.699-1.615-1.768-2.669-2.781-3.67-1.454-1.435-2.797-2.762-2.78-5.478.02-3.067 2.7-5.545 5.975-5.523m-.02 2.826c-1.62-.01-2.944 1.315-2.955 2.96-.01 1.646 1.295 2.988 2.916 2.999h.002c1.621.01 2.943-1.316 2.953-2.961.011-1.646-1.294-2.988-2.916-2.998m-.005 1.1c1.017.006 1.829.83 1.822 1.89s-.83 1.874-1.848 1.867c-1.018-.006-1.829-.83-1.822-1.89s.83-1.874 1.848-1.868m-2.155 11.857 4.14.025c.271.002.49.305.487.676l-.013 1.875c-.003.37-.224.67-.495.668l-4.14-.025c-.27-.002-.487-.306-.485-.676l.012-1.875c.003-.37.224-.67.494-.668' style='color:%23000;font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:medium;line-height:normal;font-family:sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-feature-settings:normal;text-indent:0;text-align:start;text-decoration:none;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:%23000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;text-anchor:start;white-space:normal;shape-padding:0;clip-rule:evenodd;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:%23000;solid-opacity:1;vector-effect:none;fill:%23000;fill-opacity:.4;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto' transform='translate(15.553 2.85)scale(.88807)'/%3E%3Cpath d='M-9.415-.316C-12.69-.338-15.37 2.14-15.39 5.207c-.017 2.716 1.326 4.041 2.78 5.477 1.013 1 2.081 2.055 2.78 3.67l.092.076a.34.34 0 0 0 .225.086.34.34 0 0 0 .227-.083l.019-.01c.022-.009.057-.024.074-.064.697-1.6 1.78-2.64 2.814-3.634 1.473-1.414 2.847-2.733 2.864-5.44.02-3.067-2.627-5.58-5.901-5.601m-.057 8.784c1.621.011 2.944-1.315 2.955-2.96.01-1.646-1.295-2.988-2.916-2.999-1.622-.01-2.945 1.315-2.955 2.96s1.295 2.989 2.916 3' style='clip-rule:evenodd;fill:%23e1e3e9;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4' transform='translate(15.553 2.85)scale(.88807)'/%3E%3Cpath d='M-11.594 15.465c-.27-.002-.492.297-.494.668l-.012 1.876c-.003.371.214.673.485.675l4.14.027c.271.002.492-.298.495-.668l.012-1.877c.003-.37-.215-.672-.485-.674z' style='clip-rule:evenodd;fill:%23fff;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4' transform='translate(15.553 2.85)scale(.88807)'/%3E%3C/g%3E%3C/svg%3E")}}.maplibregl-ctrl.maplibregl-ctrl-attrib{background-color:hsla(0,0%,100%,.5);margin:0;padding:0 5px}@media screen{.maplibregl-ctrl-attrib.maplibregl-compact{background-color:#fff;border-radius:12px;box-sizing:content-box;color:#000;margin:10px;min-height:20px;padding:2px 24px 2px 0;position:relative}.maplibregl-ctrl-attrib.maplibregl-compact-show{padding:2px 28px 2px 8px;visibility:visible}.maplibregl-ctrl-bottom-left>.maplibregl-ctrl-attrib.maplibregl-compact-show,.maplibregl-ctrl-top-left>.maplibregl-ctrl-attrib.maplibregl-compact-show{border-radius:12px;padding:2px 8px 2px 28px}.maplibregl-ctrl-attrib.maplibregl-compact .maplibregl-ctrl-attrib-inner{display:none}.maplibregl-ctrl-attrib-button{background-color:hsla(0,0%,100%,.5);background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' fill-rule='evenodd' viewBox='0 0 20 20'%3E%3Cpath d='M4 10a6 6 0 1 0 12 0 6 6 0 1 0-12 0m5-3a1 1 0 1 0 2 0 1 1 0 1 0-2 0m0 3a1 1 0 1 1 2 0v3a1 1 0 1 1-2 0'/%3E%3C/svg%3E");border:0;border-radius:12px;box-sizing:border-box;cursor:pointer;display:none;height:24px;outline:none;position:absolute;right:0;top:0;width:24px}.maplibregl-ctrl-attrib summary.maplibregl-ctrl-attrib-button{-webkit-appearance:none;-moz-appearance:none;appearance:none;list-style:none}.maplibregl-ctrl-attrib summary.maplibregl-ctrl-attrib-button::-webkit-details-marker{display:none}.maplibregl-ctrl-bottom-left .maplibregl-ctrl-attrib-button,.maplibregl-ctrl-top-left .maplibregl-ctrl-attrib-button{left:0}.maplibregl-ctrl-attrib.maplibregl-compact .maplibregl-ctrl-attrib-button,.maplibregl-ctrl-attrib.maplibregl-compact-show .maplibregl-ctrl-attrib-inner{display:block}.maplibregl-ctrl-attrib.maplibregl-compact-show .maplibregl-ctrl-attrib-button{background-color:rgb(0 0 0/5%)}.maplibregl-ctrl-bottom-right>.maplibregl-ctrl-attrib.maplibregl-compact:after{bottom:0;right:0}.maplibregl-ctrl-top-right>.maplibregl-ctrl-attrib.maplibregl-compact:after{right:0;top:0}.maplibregl-ctrl-top-left>.maplibregl-ctrl-attrib.maplibregl-compact:after{left:0;top:0}.maplibregl-ctrl-bottom-left>.maplibregl-ctrl-attrib.maplibregl-compact:after{bottom:0;left:0}}@media screen and (forced-colors:active){.maplibregl-ctrl-attrib.maplibregl-compact:after{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' fill='%23fff' fill-rule='evenodd' viewBox='0 0 20 20'%3E%3Cpath d='M4 10a6 6 0 1 0 12 0 6 6 0 1 0-12 0m5-3a1 1 0 1 0 2 0 1 1 0 1 0-2 0m0 3a1 1 0 1 1 2 0v3a1 1 0 1 1-2 0'/%3E%3C/svg%3E")}}@media screen and (forced-colors:active) and (prefers-color-scheme:light){.maplibregl-ctrl-attrib.maplibregl-compact:after{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' fill-rule='evenodd' viewBox='0 0 20 20'%3E%3Cpath d='M4 10a6 6 0 1 0 12 0 6 6 0 1 0-12 0m5-3a1 1 0 1 0 2 0 1 1 0 1 0-2 0m0 3a1 1 0 1 1 2 0v3a1 1 0 1 1-2 0'/%3E%3C/svg%3E")}}.maplibregl-ctrl-attrib a{color:rgba(0,0,0,.75);text-decoration:none}.maplibregl-ctrl-attrib a:hover{color:inherit;text-decoration:underline}.maplibregl-attrib-empty{display:none}.maplibregl-ctrl-scale{background-color:hsla(0,0%,100%,.75);border:2px solid #333;border-top:#333;box-sizing:border-box;color:#333;font-size:10px;padding:0 5px}.maplibregl-popup{display:flex;left:0;pointer-events:none;position:absolute;top:0;will-change:transform}.maplibregl-popup-anchor-top,.maplibregl-popup-anchor-top-left,.maplibregl-popup-anchor-top-right{flex-direction:column}.maplibregl-popup-anchor-bottom,.maplibregl-popup-anchor-bottom-left,.maplibregl-popup-anchor-bottom-right{flex-direction:column-reverse}.maplibregl-popup-anchor-left{flex-direction:row}.maplibregl-popup-anchor-right{flex-direction:row-reverse}.maplibregl-popup-tip{border:10px solid transparent;height:0;width:0;z-index:1}.maplibregl-popup-anchor-top .maplibregl-popup-tip{align-self:center;border-bottom-color:#fff;border-top:none}.maplibregl-popup-anchor-top-left .maplibregl-popup-tip{align-self:flex-start;border-bottom-color:#fff;border-left:none;border-top:none}.maplibregl-popup-anchor-top-right .maplibregl-popup-tip{align-self:flex-end;border-bottom-color:#fff;border-right:none;border-top:none}.maplibregl-popup-anchor-bottom .maplibregl-popup-tip{align-self:center;border-bottom:none;border-top-color:#fff}.maplibregl-popup-anchor-bottom-left .maplibregl-popup-tip{align-self:flex-start;border-bottom:none;border-left:none;border-top-color:#fff}.maplibregl-popup-anchor-bottom-right .maplibregl-popup-tip{align-self:flex-end;border-bottom:none;border-right:none;border-top-color:#fff}.maplibregl-popup-anchor-left .maplibregl-popup-tip{align-self:center;border-left:none;border-right-color:#fff}.maplibregl-popup-anchor-right .maplibregl-popup-tip{align-self:center;border-left-color:#fff;border-right:none}.maplibregl-popup-close-button{background-color:transparent;border:0;border-radius:0 3px 0 0;cursor:pointer;position:absolute;right:0;top:0}.maplibregl-popup-close-button:hover{background-color:rgb(0 0 0/5%)}.maplibregl-popup-content{background:#fff;border-radius:3px;box-shadow:0 1px 2px rgba(0,0,0,.1);padding:15px 10px;pointer-events:auto;position:relative}.maplibregl-popup-anchor-top-left .maplibregl-popup-content{border-top-left-radius:0}.maplibregl-popup-anchor-top-right .maplibregl-popup-content{border-top-right-radius:0}.maplibregl-popup-anchor-bottom-left .maplibregl-popup-content{border-bottom-left-radius:0}.maplibregl-popup-anchor-bottom-right .maplibregl-popup-content{border-bottom-right-radius:0}.maplibregl-popup-track-pointer{display:none}.maplibregl-popup-track-pointer *{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.maplibregl-map:hover .maplibregl-popup-track-pointer{display:flex}.maplibregl-map:active .maplibregl-popup-track-pointer{display:none}.maplibregl-marker{left:0;position:absolute;top:0;transition:opacity .2s;will-change:transform}.maplibregl-user-location-dot,.maplibregl-user-location-dot:before{background-color:#1da1f2;border-radius:50%;height:15px;width:15px}.maplibregl-user-location-dot:before{animation:maplibregl-user-location-dot-pulse 2s infinite;content:"";position:absolute}.maplibregl-user-location-dot:after{border:2px solid #fff;border-radius:50%;box-shadow:0 0 3px rgba(0,0,0,.35);box-sizing:border-box;content:"";height:19px;left:-2px;position:absolute;top:-2px;width:19px}@keyframes maplibregl-user-location-dot-pulse{0%{opacity:1;transform:scale(1)}70%{opacity:0;transform:scale(3)}to{opacity:0;transform:scale(1)}}.maplibregl-user-location-dot-stale{background-color:#aaa}.maplibregl-user-location-dot-stale:after{display:none}.maplibregl-user-location-accuracy-circle{background-color:#1da1f233;border-radius:100%;height:1px;width:1px}.maplibregl-crosshair,.maplibregl-crosshair .maplibregl-interactive,.maplibregl-crosshair .maplibregl-interactive:active{cursor:crosshair}.maplibregl-boxzoom{background:#fff;border:2px dotted #202020;height:0;left:0;opacity:.5;position:absolute;top:0;width:0}.maplibregl-cooperative-gesture-screen{align-items:center;background:rgba(0,0,0,.4);color:#fff;display:flex;font-size:1.4em;inset:0;justify-content:center;line-height:1.2;opacity:0;padding:1rem;pointer-events:none;position:absolute;transition:opacity 1s ease 1s;z-index:99999}.maplibregl-cooperative-gesture-screen.maplibregl-show{opacity:1;transition:opacity .05s}.maplibregl-cooperative-gesture-screen .maplibregl-mobile-message{display:none}@media (hover:none),(width <= 480px){.maplibregl-cooperative-gesture-screen .maplibregl-desktop-message{display:none}.maplibregl-cooperative-gesture-screen .maplibregl-mobile-message{display:block}}.maplibregl-pseudo-fullscreen{height:100%!important;left:0!important;position:fixed!important;top:0!important;width:100%!important;z-index:99999}`,document.head.appendChild(nt)}})()}),y1=r(nt=>{var ke=i0(),_=Up(),d=l0(),m=R(),E=Cm().addStyleRule,b=se(),w=$t(),S=Km(),C=b.extendFlat,p=b.extendDeepAll;nt.modules={},nt.allCategories={},nt.allTypes=[],nt.subplotsRegistry={},nt.componentsRegistry={},nt.layoutArrayContainers=[],nt.layoutArrayRegexes=[],nt.traceLayoutAttributes={},nt.localeRegistry={},nt.apiMethodRegistry={},nt.collectableSubplotTypes=null,nt.register=function(L){if(nt.collectableSubplotTypes=null,L)L&&!Array.isArray(L)&&(L=[L]);else throw new Error("No argument passed to Plotly.register.");for(var B=0;B<L.length;B++){var X=L[B];if(!X)throw new Error("Invalid module was attempted to be registered!");switch(X.moduleType){case"trace":F(X);break;case"transform":$(X);break;case"component":O(X);break;case"locale":j(X);break;case"apiMethod":var ee=X.name;nt.apiMethodRegistry[ee]=X.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},nt.getModule=function(L){var B=nt.modules[M(L)];return B?B._module:!1},nt.traceIs=function(L,B){if(L=M(L),L==="various")return!1;var X=nt.modules[L];return X||(L&&ke.log("Unrecognized trace type "+L+"."),X=nt.modules[w.type.dflt]),!!X.categories[B]},nt.getComponentMethod=function(L,B){var X=nt.componentsRegistry[L];return X&&X[B]||_},nt.call=function(){var L=arguments[0],B=[].slice.call(arguments,1);return nt.apiMethodRegistry[L].apply(null,B)};function F(L){var B=L.name,X=L.categories,ee=L.meta;if(nt.modules[B]){ke.log("Type "+B+" already registered");return}nt.subplotsRegistry[L.basePlotModule.name]||A(L.basePlotModule);for(var yt={},Ze=0;Ze<X.length;Ze++)yt[X[Ze]]=!0,nt.allCategories[X[Ze]]=!0;nt.modules[B]={_module:L,categories:yt},ee&&Object.keys(ee).length&&(nt.modules[B].meta=ee),nt.allTypes.push(B);for(var Re in nt.componentsRegistry)I(Re,B);L.layoutAttributes&&C(nt.traceLayoutAttributes,L.layoutAttributes);var Q=L.basePlotModule,xt=Q.name;if(xt==="mapbox"){var tt=Q.constants.styleRules;for(var ht in tt)E(".js-plotly-plot .plotly .mapboxgl-"+ht,tt[ht])}xt==="map"&&A1(),(xt==="geo"||xt==="mapbox"||xt==="map")&&window.PlotlyGeoAssets===void 0&&(window.PlotlyGeoAssets={topojson:{}})}function A(L){var B=L.name;if(nt.subplotsRegistry[B]){ke.log("Plot type "+B+" already registered.");return}z(L),nt.subplotsRegistry[B]=L;for(var X in nt.componentsRegistry)G(X,L.name)}function O(L){if(typeof L.name!="string")throw new Error("Component module *name* must be a string.");var B=L.name;nt.componentsRegistry[B]=L,L.layoutAttributes&&(L.layoutAttributes._isLinkedToArray&&d(nt.layoutArrayContainers,B),z(L));for(var X in nt.modules)I(B,X);for(var ee in nt.subplotsRegistry)G(B,ee);L.schema&&L.schema.layout&&p(S,L.schema.layout)}function $(L){if(typeof L.name!="string")throw new Error("Transform module *name* must be a string.");var B="Transform module "+L.name,X=typeof L.transform=="function",ee=typeof L.calcTransform=="function";if(!X&&!ee)throw new Error(B+" is missing a *transform* or *calcTransform* method.");X&&ee&&ke.log([B+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),m(L.attributes)||ke.log(B+" registered without an *attributes* object."),typeof L.supplyDefaults!="function"&&ke.log(B+" registered without a *supplyDefaults* method.")}function j(L){var B=L.name,X=B.split("-")[0],ee=L.dictionary,yt=L.format,Ze=ee&&Object.keys(ee).length,Re=yt&&Object.keys(yt).length,Q=nt.localeRegistry,xt=Q[B];if(xt||(Q[B]=xt={}),X!==B){var tt=Q[X];tt||(Q[X]=tt={}),Ze&&tt.dictionary===xt.dictionary&&(tt.dictionary=ee),Re&&tt.format===xt.format&&(tt.format=yt)}Ze&&(xt.dictionary=ee),Re&&(xt.format=yt)}function z(L){if(L.layoutAttributes){var B=L.layoutAttributes._arrayAttrRegexps;if(B)for(var X=0;X<B.length;X++)d(nt.layoutArrayRegexes,B[X])}}function I(L,B){var X=nt.componentsRegistry[L].schema;if(!(!X||!X.traces)){var ee=X.traces[B];ee&&p(nt.modules[B]._module.attributes,ee)}}function G(L,B){var X=nt.componentsRegistry[L].schema;if(!(!X||!X.subplots)){var ee=nt.subplotsRegistry[B],yt=ee.layoutAttributes,Ze=ee.attr==="subplot"?ee.name:ee.attr;Array.isArray(Ze)&&(Ze=Ze[0]);var Re=X.subplots[Ze];yt&&Re&&p(yt,Re)}}function M(L){return typeof L=="object"&&(L=L.type),L}}),uv=r(nt=>{var ke=u().timeFormat,_=v(),d=i0(),m=Y().mod,E=g(),b=E.BADNUM,w=E.ONEDAY,S=E.ONEHOUR,C=E.ONEMIN,p=E.ONESEC,F=E.EPOCHJD,A=y1(),O=u().utcFormat,$=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,j=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,z=new Date().getFullYear()-70;function I(vt){return vt&&A.componentsRegistry.calendars&&typeof vt=="string"&&vt!=="gregorian"}nt.dateTick0=function(vt,_t){var Le=G(vt,!!_t);if(_t<2)return Le;var wt=nt.dateTime2ms(Le,vt);return wt+=w*(_t-1),nt.ms2DateTime(wt,0,vt)};function G(vt,_t){return I(vt)?_t?A.getComponentMethod("calendars","CANONICAL_SUNDAY")[vt]:A.getComponentMethod("calendars","CANONICAL_TICK")[vt]:_t?"2000-01-02":"2000-01-01"}nt.dfltRange=function(vt){return I(vt)?A.getComponentMethod("calendars","DFLTRANGE")[vt]:["2000-01-01","2001-01-01"]},nt.isJSDate=function(vt){return typeof vt=="object"&&vt!==null&&typeof vt.getTime=="function"};var M,L;nt.dateTime2ms=function(vt,_t){if(nt.isJSDate(vt)){var Le=vt.getTimezoneOffset()*C,wt=(vt.getUTCMinutes()-vt.getMinutes())*C+(vt.getUTCSeconds()-vt.getSeconds())*p+(vt.getUTCMilliseconds()-vt.getMilliseconds());if(wt){var St=3*C;Le=Le-St/2+m(wt-Le+St/2,St)}return vt=Number(vt)-Le,vt>=M&&vt<=L?vt:b}if(typeof vt!="string"&&typeof vt!="number")return b;vt=String(vt);var Ut=I(_t),kt=vt.charAt(0);Ut&&(kt==="G"||kt==="g")&&(vt=vt.substr(1),_t="");var jt=Ut&&_t.substr(0,7)==="chinese",aa=vt.match(jt?j:$);if(!aa)return b;var ca=aa[1],Cp=aa[3]||"1",pt=Number(aa[5]||1),gt=Number(aa[7]||0),te=Number(aa[9]||0),Et=Number(aa[11]||0);if(Ut){if(ca.length===2)return b;ca=Number(ca);var zt;try{var rt=A.getComponentMethod("calendars","getCal")(_t);if(jt){var Z=Cp.charAt(Cp.length-1)==="i";Cp=parseInt(Cp,10),zt=rt.newDate(ca,rt.toMonthIndex(ca,Cp,Z),pt)}else zt=rt.newDate(ca,Number(Cp),pt)}catch{return b}return zt?(zt.toJD()-F)*w+gt*S+te*C+Et*p:b}ca.length===2?ca=(Number(ca)+2e3-z)%100+z:ca=Number(ca),Cp-=1;var we=new Date(Date.UTC(2e3,Cp,pt,gt,te));return we.setUTCFullYear(ca),we.getUTCMonth()!==Cp||we.getUTCDate()!==pt?b:we.getTime()+Et*p},M=nt.MIN_MS=nt.dateTime2ms("-9999"),L=nt.MAX_MS=nt.dateTime2ms("9999-12-31 23:59:59.9999"),nt.isDateTime=function(vt,_t){return nt.dateTime2ms(vt,_t)!==b};function B(vt,_t){return String(vt+Math.pow(10,_t)).substr(1)}var X=90*w,ee=3*S,yt=5*C;nt.ms2DateTime=function(vt,_t,Le){if(typeof vt!="number"||!(vt>=M&&vt<=L))return b;_t||(_t=0);var wt=Math.floor(m(vt+.05,1)*10),St=Math.round(vt-wt/10),Ut,kt,jt,aa,ca,Cp;if(I(Le)){var pt=Math.floor(St/w)+F,gt=Math.floor(m(vt,w));try{Ut=A.getComponentMethod("calendars","getCal")(Le).fromJD(pt).formatDate("yyyy-mm-dd")}catch{Ut=O("G%Y-%m-%d")(new Date(St))}if(Ut.charAt(0)==="-")for(;Ut.length<11;)Ut="-0"+Ut.substr(1);else for(;Ut.length<10;)Ut="0"+Ut;kt=_t<X?Math.floor(gt/S):0,jt=_t<X?Math.floor(gt%S/C):0,aa=_t<ee?Math.floor(gt%C/p):0,ca=_t<yt?gt%p*10+wt:0}else Cp=new Date(St),Ut=O("%Y-%m-%d")(Cp),kt=_t<X?Cp.getUTCHours():0,jt=_t<X?Cp.getUTCMinutes():0,aa=_t<ee?Cp.getUTCSeconds():0,ca=_t<yt?Cp.getUTCMilliseconds()*10+wt:0;return Ze(Ut,kt,jt,aa,ca)},nt.ms2DateTimeLocal=function(vt){if(!(vt>=M+w&&vt<=L-w))return b;var _t=Math.floor(m(vt+.05,1)*10),Le=new Date(Math.round(vt-_t/10)),wt=ke("%Y-%m-%d")(Le),St=Le.getHours(),Ut=Le.getMinutes(),kt=Le.getSeconds(),jt=Le.getUTCMilliseconds()*10+_t;return Ze(wt,St,Ut,kt,jt)};function Ze(vt,_t,Le,wt,St){if((_t||Le||wt||St)&&(vt+=" "+B(_t,2)+":"+B(Le,2),(wt||St)&&(vt+=":"+B(wt,2),St))){for(var Ut=4;St%10===0;)Ut-=1,St/=10;vt+="."+B(St,Ut)}return vt}nt.cleanDate=function(vt,_t,Le){if(vt===b)return _t;if(nt.isJSDate(vt)||typeof vt=="number"&&isFinite(vt)){if(I(Le))return d.error("JS Dates and milliseconds are incompatible with world calendars",vt),_t;if(vt=nt.ms2DateTimeLocal(+vt),!vt&&_t!==void 0)return _t}else if(!nt.isDateTime(vt,Le))return d.error("unrecognized date",vt),_t;return vt};var Re=/%\d?f/g,Q=/%h/g,xt={1:"1",2:"1",3:"2",4:"2"};function tt(vt,_t,Le,wt){vt=vt.replace(Re,function(Ut){var kt=Math.min(+Ut.charAt(1)||6,6),jt=(_t/1e3%1+2).toFixed(kt).substr(2).replace(/0+$/,"")||"0";return jt});var St=new Date(Math.floor(_t+.05));if(vt=vt.replace(Q,function(){return xt[Le("%q")(St)]}),I(wt))try{vt=A.getComponentMethod("calendars","worldCalFmt")(vt,_t,wt)}catch{return"Invalid"}return Le(vt)(St)}var ht=[59,59.9,59.99,59.999,59.9999];function it(vt,_t){var Le=m(vt+.05,w),wt=B(Math.floor(Le/S),2)+":"+B(m(Math.floor(Le/C),60),2);if(_t!=="M"){_(_t)||(_t=0);var St=Math.min(m(vt/p,60),ht[_t]),Ut=(100+St).toFixed(_t).substr(1);_t>0&&(Ut=Ut.replace(/0+$/,"").replace(/[\.]$/,"")),wt+=":"+Ut}return wt}nt.formatDate=function(vt,_t,Le,wt,St,Ut){if(St=I(St)&&St,!_t)if(Le==="y")_t=Ut.year;else if(Le==="m")_t=Ut.month;else if(Le==="d")_t=Ut.dayMonth+`
`+Ut.year;else return it(vt,Le)+`
`+tt(Ut.dayMonthYear,vt,wt,St);return tt(_t,vt,wt,St)};var ut=3*w;nt.incrementMonth=function(vt,_t,Le){Le=I(Le)&&Le;var wt=m(vt,w);if(vt=Math.round(vt-wt),Le)try{var St=Math.round(vt/w)+F,Ut=A.getComponentMethod("calendars","getCal")(Le),kt=Ut.fromJD(St);return _t%12?Ut.add(kt,_t,"m"):Ut.add(kt,_t/12,"y"),(kt.toJD()-F)*w+wt}catch{d.error("invalid ms "+vt+" in calendar "+Le)}var jt=new Date(vt+ut);return jt.setUTCMonth(jt.getUTCMonth()+_t)+wt-ut},nt.findExactDates=function(vt,_t){for(var Le=0,wt=0,St=0,Ut=0,kt,jt,aa=I(_t)&&A.getComponentMethod("calendars","getCal")(_t),ca=0;ca<vt.length;ca++){if(jt=vt[ca],!_(jt)){Ut++;continue}if(!(jt%w))if(aa)try{kt=aa.fromJD(jt/w+F),kt.day()===1?kt.month()===1?Le++:wt++:St++}catch{}else kt=new Date(jt),kt.getUTCDate()===1?kt.getUTCMonth()===0?Le++:wt++:St++}wt+=Le,St+=wt;var Cp=vt.length-Ut;return{exactYears:Le/Cp,exactMonths:wt/Cp,exactDays:St/Cp}}}),$g=r((nt,ke)=>{ke.exports=function(_){return _}}),Sv=r(nt=>{var ke=v(),_=i0(),d=$g(),m=g().BADNUM,E=1e-9;nt.findBin=function(p,F,A){if(ke(F.start))return A?Math.ceil((p-F.start)/F.size-E)-1:Math.floor((p-F.start)/F.size+E);var O=0,$=F.length,j=0,z=$>1?(F[$-1]-F[0])/($-1):1,I,G;for(z>=0?G=A?b:w:G=A?C:S,p+=z*E*(A?-1:1)*(z>=0?1:-1);O<$&&j++<100;)I=Math.floor((O+$)/2),G(F[I],p)?O=I+1:$=I;return j>90&&_.log("Long binary search..."),O-1};function b(p,F){return p<F}function w(p,F){return p<=F}function S(p,F){return p>F}function C(p,F){return p>=F}nt.sorterAsc=function(p,F){return p-F},nt.sorterDes=function(p,F){return F-p},nt.distinctVals=function(p){var F=p.slice();F.sort(nt.sorterAsc);var A;for(A=F.length-1;A>-1&&F[A]===m;A--);for(var O=F[A]-F[0]||1,$=O/(A||1)/1e4,j=[],z,I=0;I<=A;I++){var G=F[I],M=G-z;z===void 0?(j.push(G),z=G):M>$&&(O=Math.min(O,M),j.push(G),z=G)}return{vals:j,minDiff:O}},nt.roundUp=function(p,F,A){for(var O=0,$=F.length-1,j,z=0,I=A?0:1,G=A?1:0,M=A?Math.ceil:Math.floor;O<$&&z++<100;)j=M((O+$)/2),F[j]<=p?O=j+I:$=j-G;return F[O]},nt.sort=function(p,F){for(var A=0,O=0,$=1;$<p.length;$++){var j=F(p[$],p[$-1]);if(j<0?A=1:j>0&&(O=1),A&&O)return p.sort(F)}return O?p:p.reverse()},nt.findIndexOfMin=function(p,F){F=F||d;for(var A=1/0,O,$=0;$<p.length;$++){var j=F(p[$]);j<A&&(A=j,O=$)}return O}}),Yv=r((nt,ke)=>{ke.exports=function(_){return Object.keys(_).sort()}}),my=r(nt=>{var ke=v(),_=W().isArrayOrTypedArray;nt.aggNums=function(d,m,E,b){var w,S;if((!b||b>E.length)&&(b=E.length),ke(m)||(m=!1),_(E[0])){for(S=new Array(b),w=0;w<b;w++)S[w]=nt.aggNums(d,m,E[w]);E=S}for(w=0;w<b;w++)ke(m)?ke(E[w])&&(m=d(+m,+E[w])):m=E[w];return m},nt.len=function(d){return nt.aggNums(function(m){return m+1},0,d)},nt.mean=function(d,m){return m||(m=nt.len(d)),nt.aggNums(function(E,b){return E+b},0,d)/m},nt.geometricMean=function(d,m){return m||(m=nt.len(d)),Math.pow(nt.aggNums(function(E,b){return E*b},1,d),1/m)},nt.midRange=function(d){if(!(d===void 0||d.length===0))return(nt.aggNums(Math.max,null,d)+nt.aggNums(Math.min,null,d))/2},nt.variance=function(d,m,E){return m||(m=nt.len(d)),ke(E)||(E=nt.mean(d,m)),nt.aggNums(function(b,w){return b+Math.pow(w-E,2)},0,d)/m},nt.stdev=function(d,m,E){return Math.sqrt(nt.variance(d,m,E))},nt.median=function(d){var m=d.slice().sort();return nt.interp(m,.5)},nt.interp=function(d,m){if(!ke(m))throw"n should be a finite number";if(m=m*d.length-.5,m<0)return d[0];if(m>d.length-1)return d[d.length-1];var E=m%1;return E*d[Math.ceil(m)]+(1-E)*d[Math.floor(m)]}}),Vv=r((nt,ke)=>{var _=Y(),d=_.mod,m=_.modHalf,E=Math.PI,b=2*E;function w(G){return G/180*E}function S(G){return G/E*180}function C(G){return Math.abs(G[1]-G[0])>b-1e-14}function p(G,M){return m(M-G,b)}function F(G,M){return Math.abs(p(G,M))}function A(G,M){if(C(M))return!0;var L,B;M[0]<M[1]?(L=M[0],B=M[1]):(L=M[1],B=M[0]),L=d(L,b),B=d(B,b),L>B&&(B+=b);var X=d(G,b),ee=X+b;return X>=L&&X<=B||ee>=L&&ee<=B}function O(G,M,L,B){if(!A(M,B))return!1;var X,ee;return L[0]<L[1]?(X=L[0],ee=L[1]):(X=L[1],ee=L[0]),G>=X&&G<=ee}function $(G,M,L,B,X,ee,yt){X=X||0,ee=ee||0;var Ze=C([L,B]),Re,Q,xt,tt,ht;Ze?(Re=0,Q=E,xt=b):L<B?(Re=L,xt=B):(Re=B,xt=L),G<M?(tt=G,ht=M):(tt=M,ht=G);function it(Le,wt){return[Le*Math.cos(wt)+X,ee-Le*Math.sin(wt)]}var ut=Math.abs(xt-Re)<=E?0:1;function vt(Le,wt,St){return"A"+[Le,Le]+" "+[0,ut,St]+" "+it(Le,wt)}var _t;return Ze?tt===null?_t="M"+it(ht,Re)+vt(ht,Q,0)+vt(ht,xt,0)+"Z":_t="M"+it(tt,Re)+vt(tt,Q,0)+vt(tt,xt,0)+"ZM"+it(ht,Re)+vt(ht,Q,1)+vt(ht,xt,1)+"Z":tt===null?(_t="M"+it(ht,Re)+vt(ht,xt,0),yt&&(_t+="L0,0Z")):_t="M"+it(tt,Re)+"L"+it(ht,Re)+vt(ht,xt,0)+"L"+it(tt,xt)+vt(tt,Re,1)+"Z",_t}function j(G,M,L,B,X){return $(null,G,M,L,B,X,0)}function z(G,M,L,B,X){return $(null,G,M,L,B,X,1)}function I(G,M,L,B,X,ee){return $(G,M,L,B,X,ee,1)}ke.exports={deg2rad:w,rad2deg:S,angleDelta:p,angleDist:F,isFullCircle:C,isAngleInsideSector:A,isPtInsideSector:O,pathArc:j,pathSector:z,pathAnnulus:I}}),yv=r(nt=>{nt.isLeftAnchor=function(ke){return ke.xanchor==="left"||ke.xanchor==="auto"&&ke.x<=1/3},nt.isCenterAnchor=function(ke){return ke.xanchor==="center"||ke.xanchor==="auto"&&ke.x>1/3&&ke.x<2/3},nt.isRightAnchor=function(ke){return ke.xanchor==="right"||ke.xanchor==="auto"&&ke.x>=2/3},nt.isTopAnchor=function(ke){return ke.yanchor==="top"||ke.yanchor==="auto"&&ke.y>=2/3},nt.isMiddleAnchor=function(ke){return ke.yanchor==="middle"||ke.yanchor==="auto"&&ke.y>1/3&&ke.y<2/3},nt.isBottomAnchor=function(ke){return ke.yanchor==="bottom"||ke.yanchor==="auto"&&ke.y<=1/3}}),Hv=r(nt=>{var ke=Y().mod;nt.segmentsIntersect=_;function _(w,S,C,p,F,A,O,$){var j=C-w,z=F-w,I=O-F,G=p-S,M=A-S,L=$-A,B=j*L-I*G;if(B===0)return null;var X=(z*L-I*M)/B,ee=(z*G-j*M)/B;return ee<0||ee>1||X<0||X>1?null:{x:w+j*X,y:S+G*X}}nt.segmentDistance=function(w,S,C,p,F,A,O,$){if(_(w,S,C,p,F,A,O,$))return 0;var j=C-w,z=p-S,I=O-F,G=$-A,M=j*j+z*z,L=I*I+G*G,B=Math.min(d(j,z,M,F-w,A-S),d(j,z,M,O-w,$-S),d(I,G,L,w-F,S-A),d(I,G,L,C-F,p-A));return Math.sqrt(B)};function d(w,S,C,p,F){var A=p*w+F*S;if(A<0)return p*p+F*F;if(A>C){var O=p-w,$=F-S;return O*O+$*$}else{var j=p*S-F*w;return j*j/C}}var m,E,b;nt.getTextLocation=function(w,S,C,p){if((w!==E||p!==b)&&(m={},E=w,b=p),m[C])return m[C];var F=w.getPointAtLength(ke(C-p/2,S)),A=w.getPointAtLength(ke(C+p/2,S)),O=Math.atan((A.y-F.y)/(A.x-F.x)),$=w.getPointAtLength(ke(C,S)),j=($.x*4+F.x+A.x)/6,z=($.y*4+F.y+A.y)/6,I={x:j,y:z,theta:O};return m[C]=I,I},nt.clearLocationCache=function(){E=null},nt.getVisibleSegment=function(w,S,C){var p=S.left,F=S.right,A=S.top,O=S.bottom,$=0,j=w.getTotalLength(),z=j,I,G;function M(B){var X=w.getPointAtLength(B);B===0?I=X:B===j&&(G=X);var ee=X.x<p?p-X.x:X.x>F?X.x-F:0,yt=X.y<A?A-X.y:X.y>O?X.y-O:0;return Math.sqrt(ee*ee+yt*yt)}for(var L=M($);L;){if($+=L+C,$>z)return;L=M($)}for(L=M(z);L;){if(z-=L+C,$>z)return;L=M(z)}return{min:$,max:z,len:z-$,total:j,isClosed:$===0&&z===j&&Math.abs(I.x-G.x)<.1&&Math.abs(I.y-G.y)<.1}},nt.findPointOnPath=function(w,S,C,p){p=p||{};for(var F=p.pathLength||w.getTotalLength(),A=p.tolerance||.001,O=p.iterationLimit||30,$=w.getPointAtLength(0)[C]>w.getPointAtLength(F)[C]?-1:1,j=0,z=0,I=F,G,M,L;j<O;){if(G=(z+I)/2,M=w.getPointAtLength(G),L=M[C]-S,Math.abs(L)<A)return M;$*L>0?I=G:z=G,j++}return M}}),gy=r(nt=>{var ke={};nt.throttle=function(d,m,E){var b=ke[d],w=Date.now();if(!b){for(var S in ke)ke[S].ts<w-6e4&&delete ke[S];b=ke[d]={ts:0,timer:null}}_(b);function C(){E(),b.ts=Date.now(),b.onDone&&(b.onDone(),b.onDone=null)}if(w>b.ts+m){C();return}b.timer=setTimeout(function(){C(),b.timer=null},m)},nt.done=function(d){var m=ke[d];return!m||!m.timer?Promise.resolve():new Promise(function(E){var b=m.onDone;m.onDone=function(){b&&b(),E(),m.onDone=null}})},nt.clear=function(d){if(d)_(ke[d]),delete ke[d];else for(var m in ke)nt.clear(m)};function _(d){d&&d.timer!==null&&(clearTimeout(d.timer),d.timer=null)}}),Qv=r((nt,ke)=>{ke.exports=function(_){_._responsiveChartHandler&&(window.removeEventListener("resize",_._responsiveChartHandler),delete _._responsiveChartHandler)}}),Ty=r((nt,ke)=>{ke.exports=E,ke.exports.isMobile=E,ke.exports.default=E;var _=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,d=/CrOS/,m=/android|ipad|playbook|silk/i;function E(b){b||(b={});let w=b.ua;if(!w&&typeof navigator<"u"&&(w=navigator.userAgent),w&&w.headers&&typeof w.headers["user-agent"]=="string"&&(w=w.headers["user-agent"]),typeof w!="string")return!1;let S=_.test(w)&&!d.test(w)||!!b.tablet&&m.test(w);return!S&&b.tablet&&b.featureDetect&&navigator&&navigator.maxTouchPoints>1&&w.indexOf("Macintosh")!==-1&&w.indexOf("Safari")!==-1&&(S=!0),S}}),$v=r((nt,ke)=>{var _=v(),d=Ty();ke.exports=function(E){var b;if(E&&E.hasOwnProperty("userAgent")?b=E.userAgent:b=m(),typeof b!="string")return!0;var w=d({ua:{headers:{"user-agent":b}},tablet:!0,featureDetect:!1});if(!w)for(var S=b.split(" "),C=1;C<S.length;C++){var p=S[C];if(p.indexOf("Safari")!==-1)for(var F=C-1;F>-1;F--){var A=S[F];if(A.substr(0,8)==="Version/"){var O=A.substr(8).split(".")[0];if(_(O)&&(O=+O),O>=13)return!0}}}return w};function m(){var E;return typeof navigator<"u"&&(E=navigator.userAgent),E&&E.headers&&typeof E.headers["user-agent"]=="string"&&(E=E.headers["user-agent"]),E}}),Cv=r((nt,ke)=>{var _=o();ke.exports=function(d,m,E){var b=d.selectAll("g."+E.replace(/\s/g,".")).data(m,function(S){return S[0].trace.uid});b.exit().remove(),b.enter().append("g").attr("class",E),b.order();var w=d.classed("rangeplot")?"nodeRangePlot3":"node3";return b.each(function(S){S[0][w]=_.select(this)}),b}}),wg=r((nt,ke)=>{var _=y1();ke.exports=function(d,m){for(var E=d._context.locale,b=0;b<2;b++){for(var w=d._context.locales,S=0;S<2;S++){var C=(w[E]||{}).dictionary;if(C){var p=C[m];if(p)return p}w=_.localeRegistry}var F=E.split("-")[0];if(F===E)break;E=F}return m}}),Lv=r((nt,ke)=>{ke.exports=function(_){for(var d={},m=[],E=0,b=0;b<_.length;b++){var w=_[b];d[w]!==1&&(d[w]=1,m[E++]=w)}return m}}),Pv=r((nt,ke)=>{ke.exports=function(E){for(var b=m(E)?d:_,w=[],S=0;S<E.length;S++){var C=E[S];b(C)&&w.push(C)}return w};function _(E){return E.visible===!0}function d(E){var b=E[0].trace;return b.visible===!0&&b._length!==0}function m(E){return Array.isArray(E)&&Array.isArray(E[0])&&E[0][0]&&E[0][0].trace}}),Ny=r((nt,ke)=>{ke.exports=function(_,d){if(!d)return _;var m=1/Math.abs(d),E=m>1?(m*_+m*d)/m:_+d,b=String(E).length;if(b>16){var w=String(d).length,S=String(_).length;if(b>=S+w){var C=parseFloat(E).toPrecision(12);C.indexOf("e+")===-1&&(E=+C)}}return E}}),pg=r((nt,ke)=>{var _=v(),d=g().BADNUM,m=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;ke.exports=function(E){return typeof E=="string"&&(E=E.replace(m,"")),_(E)?Number(E):d}}),et=r((nt,ke)=>{var _=o(),d=u().utcFormat,m=c().format,E=v(),b=g(),w=b.FP_SAFE,S=-w,C=b.BADNUM,p=ke.exports={};p.adjustFormat=function(rt){return!rt||/^\d[.]\df/.test(rt)||/[.]\d%/.test(rt)?rt:rt==="0.f"?"~f":/^\d%/.test(rt)?"~%":/^\ds/.test(rt)?"~s":!/^[~,.0$]/.test(rt)&&/[&fps]/.test(rt)?"~"+rt:rt};var F={};p.warnBadFormat=function(rt){var Z=String(rt);F[Z]||(F[Z]=1,p.warn('encountered bad format: "'+Z+'"'))},p.noFormat=function(rt){return String(rt)},p.numberFormat=function(rt){var Z;try{Z=m(p.adjustFormat(rt))}catch{return p.warnBadFormat(rt),p.noFormat}return Z},p.nestedProperty=k(),p.keyedContainer=J(),p.relativeAttr=q(),p.isPlainObject=R(),p.toLogRange=Se(),p.relinkPrivateKeys=V();var A=W();p.isArrayBuffer=A.isArrayBuffer,p.isTypedArray=A.isTypedArray,p.isArrayOrTypedArray=A.isArrayOrTypedArray,p.isArray1D=A.isArray1D,p.ensureArray=A.ensureArray,p.concat=A.concat,p.maxRowLength=A.maxRowLength,p.minRowLength=A.minRowLength;var O=Y();p.mod=O.mod,p.modHalf=O.modHalf;var $=$o();p.valObjectMeta=$.valObjectMeta,p.coerce=$.coerce,p.coerce2=$.coerce2,p.coerceFont=$.coerceFont,p.coercePattern=$.coercePattern,p.coerceHoverinfo=$.coerceHoverinfo,p.coerceSelectionMarkerOpacity=$.coerceSelectionMarkerOpacity,p.validate=$.validate;var j=uv();p.dateTime2ms=j.dateTime2ms,p.isDateTime=j.isDateTime,p.ms2DateTime=j.ms2DateTime,p.ms2DateTimeLocal=j.ms2DateTimeLocal,p.cleanDate=j.cleanDate,p.isJSDate=j.isJSDate,p.formatDate=j.formatDate,p.incrementMonth=j.incrementMonth,p.dateTick0=j.dateTick0,p.dfltRange=j.dfltRange,p.findExactDates=j.findExactDates,p.MIN_MS=j.MIN_MS,p.MAX_MS=j.MAX_MS;var z=Sv();p.findBin=z.findBin,p.sorterAsc=z.sorterAsc,p.sorterDes=z.sorterDes,p.distinctVals=z.distinctVals,p.roundUp=z.roundUp,p.sort=z.sort,p.findIndexOfMin=z.findIndexOfMin,p.sortObjectKeys=Yv();var I=my();p.aggNums=I.aggNums,p.len=I.len,p.mean=I.mean,p.geometricMean=I.geometricMean,p.median=I.median,p.midRange=I.midRange,p.variance=I.variance,p.stdev=I.stdev,p.interp=I.interp;var G=om();p.init2dArray=G.init2dArray,p.transposeRagged=G.transposeRagged,p.dot=G.dot,p.translationMatrix=G.translationMatrix,p.rotationMatrix=G.rotationMatrix,p.rotationXYMatrix=G.rotationXYMatrix,p.apply3DTransform=G.apply3DTransform,p.apply2DTransform=G.apply2DTransform,p.apply2DTransform2=G.apply2DTransform2,p.convertCssMatrix=G.convertCssMatrix,p.inverseTransformMatrix=G.inverseTransformMatrix;var M=Vv();p.deg2rad=M.deg2rad,p.rad2deg=M.rad2deg,p.angleDelta=M.angleDelta,p.angleDist=M.angleDist,p.isFullCircle=M.isFullCircle,p.isAngleInsideSector=M.isAngleInsideSector,p.isPtInsideSector=M.isPtInsideSector,p.pathArc=M.pathArc,p.pathSector=M.pathSector,p.pathAnnulus=M.pathAnnulus;var L=yv();p.isLeftAnchor=L.isLeftAnchor,p.isCenterAnchor=L.isCenterAnchor,p.isRightAnchor=L.isRightAnchor,p.isTopAnchor=L.isTopAnchor,p.isMiddleAnchor=L.isMiddleAnchor,p.isBottomAnchor=L.isBottomAnchor;var B=Hv();p.segmentsIntersect=B.segmentsIntersect,p.segmentDistance=B.segmentDistance,p.getTextLocation=B.getTextLocation,p.clearLocationCache=B.clearLocationCache,p.getVisibleSegment=B.getVisibleSegment,p.findPointOnPath=B.findPointOnPath;var X=se();p.extendFlat=X.extendFlat,p.extendDeep=X.extendDeep,p.extendDeepAll=X.extendDeepAll,p.extendDeepNoArrays=X.extendDeepNoArrays;var ee=i0();p.log=ee.log,p.warn=ee.warn,p.error=ee.error;var yt=re();p.counterRegex=yt.counter;var Ze=gy();p.throttle=Ze.throttle,p.throttleDone=Ze.done,p.clearThrottle=Ze.clear;var Re=Cm();p.getGraphDiv=Re.getGraphDiv,p.isPlotDiv=Re.isPlotDiv,p.removeElement=Re.removeElement,p.addStyleRule=Re.addStyleRule,p.addRelatedStyleRule=Re.addRelatedStyleRule,p.deleteRelatedStyleRule=Re.deleteRelatedStyleRule,p.setStyleOnHover=Re.setStyleOnHover,p.getFullTransformMatrix=Re.getFullTransformMatrix,p.getElementTransformMatrix=Re.getElementTransformMatrix,p.getElementAndAncestors=Re.getElementAndAncestors,p.equalDomRects=Re.equalDomRects,p.clearResponsive=Qv(),p.preserveDrawingBuffer=$v(),p.makeTraceGroups=Cv(),p._=wg(),p.notifier=Kt(),p.filterUnique=Lv(),p.filterVisible=Pv(),p.pushUnique=l0(),p.increment=Ny(),p.cleanNumber=pg(),p.ensureNumber=function(rt){return E(rt)?(rt=Number(rt),rt>w||rt<S?C:rt):C},p.isIndex=function(rt,Z){return Z!==void 0&&rt>=Z?!1:E(rt)&&rt>=0&&rt%1===0},p.noop=Up(),p.identity=$g(),p.repeat=function(rt,Z){for(var we=new Array(Z),ot=0;ot<Z;ot++)we[ot]=rt;return we},p.swapAttrs=function(rt,Z,we,ot){we||(we="x"),ot||(ot="y");for(var mt=0;mt<Z.length;mt++){var It=Z[mt],Yt=p.nestedProperty(rt,It.replace("?",we)),Sr=p.nestedProperty(rt,It.replace("?",ot)),Op=Yt.get();Yt.set(Sr.get()),Sr.set(Op)}},p.raiseToTop=function(rt){rt.parentNode.appendChild(rt)},p.cancelTransition=function(rt){return rt.transition().duration(0)},p.constrain=function(rt,Z,we){return Z>we?Math.max(we,Math.min(Z,rt)):Math.max(Z,Math.min(we,rt))},p.bBoxIntersect=function(rt,Z,we){return we=we||0,rt.left<=Z.right+we&&Z.left<=rt.right+we&&rt.top<=Z.bottom+we&&Z.top<=rt.bottom+we},p.simpleMap=function(rt,Z,we,ot,mt){for(var It=rt.length,Yt=new Array(It),Sr=0;Sr<It;Sr++)Yt[Sr]=Z(rt[Sr],we,ot,mt);return Yt},p.randstr=function rt(Z,we,ot,mt){if(ot||(ot=16),we===void 0&&(we=24),we<=0)return"0";var It=Math.log(Math.pow(2,we))/Math.log(ot),Yt="",Sr,Op,Hp;for(Sr=2;It===1/0;Sr*=2)It=Math.log(Math.pow(2,we/Sr))/Math.log(ot)*Sr;var n0=It-Math.floor(It);for(Sr=0;Sr<Math.floor(It);Sr++)Hp=Math.floor(Math.random()*ot).toString(ot),Yt=Hp+Yt;n0&&(Op=Math.pow(ot,n0),Hp=Math.floor(Math.random()*Op).toString(ot),Yt=Hp+Yt);var R0=parseInt(Yt,ot);return Z&&Z[Yt]||R0!==1/0&&R0>=Math.pow(2,we)?mt>10?(p.warn("randstr failed uniqueness"),Yt):rt(Z,we,ot,(mt||0)+1):Yt},p.OptionControl=function(rt,Z){rt||(rt={}),Z||(Z="opt");var we={};return we.optionList=[],we._newoption=function(ot){ot[Z]=rt,we[ot.name]=ot,we.optionList.push(ot)},we["_"+Z]=rt,we},p.smooth=function(rt,Z){if(Z=Math.round(Z)||0,Z<2)return rt;var we=rt.length,ot=2*we,mt=2*Z-1,It=new Array(mt),Yt=new Array(we),Sr,Op,Hp,n0;for(Sr=0;Sr<mt;Sr++)It[Sr]=(1-Math.cos(Math.PI*(Sr+1)/Z))/(2*Z);for(Sr=0;Sr<we;Sr++){for(n0=0,Op=0;Op<mt;Op++)Hp=Sr+Op+1-Z,Hp<-we?Hp-=ot*Math.round(Hp/ot):Hp>=ot&&(Hp-=ot*Math.floor(Hp/ot)),Hp<0?Hp=-1-Hp:Hp>=we&&(Hp=ot-1-Hp),n0+=rt[Hp]*It[Op];Yt[Sr]=n0}return Yt},p.syncOrAsync=function(rt,Z,we){var ot,mt;function It(){return p.syncOrAsync(rt,Z,we)}for(;rt.length;)if(mt=rt.splice(0,1)[0],ot=mt(Z),ot&&ot.then)return ot.then(It);return we&&we(Z)},p.stripTrailingSlash=function(rt){return rt.substr(-1)==="/"?rt.substr(0,rt.length-1):rt},p.noneOrAll=function(rt,Z,we){if(rt){var ot=!1,mt=!0,It,Yt;for(It=0;It<we.length;It++)Yt=rt[we[It]],Yt!=null?ot=!0:mt=!1;if(ot&&!mt)for(It=0;It<we.length;It++)rt[we[It]]=Z[we[It]]}},p.mergeArray=function(rt,Z,we,ot){var mt=typeof ot=="function";if(p.isArrayOrTypedArray(rt))for(var It=Math.min(rt.length,Z.length),Yt=0;Yt<It;Yt++){var Sr=rt[Yt];Z[Yt][we]=mt?ot(Sr):Sr}},p.mergeArrayCastPositive=function(rt,Z,we){return p.mergeArray(rt,Z,we,function(ot){var mt=+ot;return isFinite(mt)&&mt>0?mt:0})},p.fillArray=function(rt,Z,we,ot){if(ot=ot||p.identity,p.isArrayOrTypedArray(rt))for(var mt=0;mt<Z.length;mt++)Z[mt][we]=ot(rt[mt])},p.castOption=function(rt,Z,we,ot){ot=ot||p.identity;var mt=p.nestedProperty(rt,we).get();return p.isArrayOrTypedArray(mt)?Array.isArray(Z)&&p.isArrayOrTypedArray(mt[Z[0]])?ot(mt[Z[0]][Z[1]]):ot(mt[Z]):mt},p.extractOption=function(rt,Z,we,ot){if(we in rt)return rt[we];var mt=p.nestedProperty(Z,ot).get();if(!Array.isArray(mt))return mt};function Q(rt){var Z={};for(var we in rt)for(var ot=rt[we],mt=0;mt<ot.length;mt++)Z[ot[mt]]=+we;return Z}p.tagSelected=function(rt,Z,we){var ot=Z.selectedpoints,mt=Z._indexToPoints,It;mt&&(It=Q(mt));function Yt(R0){return R0!==void 0&&R0<rt.length}for(var Sr=0;Sr<ot.length;Sr++){var Op=ot[Sr];if(p.isIndex(Op)||p.isArrayOrTypedArray(Op)&&p.isIndex(Op[0])&&p.isIndex(Op[1])){var Hp=It?It[Op]:Op,n0=we?we[Hp]:Hp;Yt(n0)&&(rt[n0].selected=1)}}},p.selIndices2selPoints=function(rt){var Z=rt.selectedpoints,we=rt._indexToPoints;if(we){for(var ot=Q(we),mt=[],It=0;It<Z.length;It++){var Yt=Z[It];if(p.isIndex(Yt)){var Sr=ot[Yt];p.isIndex(Sr)&&mt.push(Sr)}}return mt}else return Z},p.getTargetArray=function(rt,Z){var we=Z.target;if(typeof we=="string"&&we){var ot=p.nestedProperty(rt,we).get();return p.isArrayOrTypedArray(ot)?ot:!1}else if(p.isArrayOrTypedArray(we))return we;return!1};function xt(rt,Z,we){var ot={};typeof Z!="object"&&(Z={});var mt=we==="pieLike"?-1:3,It=Object.keys(rt),Yt,Sr,Op;for(Yt=0;Yt<It.length;Yt++)Sr=It[Yt],Op=rt[Sr],!(Sr.charAt(0)==="_"||typeof Op=="function")&&(Sr==="module"?ot[Sr]=Op:Array.isArray(Op)?Sr==="colorscale"||mt===-1?ot[Sr]=Op.slice():ot[Sr]=Op.slice(0,mt):p.isTypedArray(Op)?mt===-1?ot[Sr]=Op.subarray():ot[Sr]=Op.subarray(0,mt):Op&&typeof Op=="object"?ot[Sr]=xt(rt[Sr],Z[Sr],we):ot[Sr]=Op);for(It=Object.keys(Z),Yt=0;Yt<It.length;Yt++)Sr=It[Yt],Op=Z[Sr],(typeof Op!="object"||!(Sr in ot)||typeof ot[Sr]!="object")&&(ot[Sr]=Op);return ot}p.minExtend=xt,p.titleCase=function(rt){return rt.charAt(0).toUpperCase()+rt.substr(1)},p.containsAny=function(rt,Z){for(var we=0;we<Z.length;we++)if(rt.indexOf(Z[we])!==-1)return!0;return!1};var tt=/Version\/[\d\.]+.*Safari/;p.isSafari=function(){return tt.test(window.navigator.userAgent)};var ht=/iPad|iPhone|iPod/;p.isIOS=function(){return ht.test(window.navigator.userAgent)};var it=/Macintosh.+AppleWebKit.+Gecko\)$/;p.isMacWKWebView=()=>it.test(window.navigator.userAgent);var ut=/Firefox\/(\d+)\.\d+/;p.getFirefoxVersion=function(){var rt=ut.exec(window.navigator.userAgent);if(rt&&rt.length===2){var Z=parseInt(rt[1]);if(!isNaN(Z))return Z}return null},p.isD3Selection=function(rt){return rt instanceof _.selection},p.ensureSingle=function(rt,Z,we,ot){var mt=rt.select(Z+(we?"."+we:""));if(mt.size())return mt;var It=rt.append(Z);return we&&It.classed(we,!0),ot&&It.call(ot),It},p.ensureSingleById=function(rt,Z,we,ot){var mt=rt.select(Z+"#"+we);if(mt.size())return mt;var It=rt.append(Z).attr("id",we);return ot&&It.call(ot),It},p.objectFromPath=function(rt,Z){for(var we=rt.split("."),ot,mt=ot={},It=0;It<we.length;It++){var Yt=we[It],Sr=null,Op=we[It].match(/(.*)\[([0-9]+)\]/);Op?(Yt=Op[1],Sr=Op[2],ot=ot[Yt]=[],It===we.length-1?ot[Sr]=Z:ot[Sr]={},ot=ot[Sr]):(It===we.length-1?ot[Yt]=Z:ot[Yt]={},ot=ot[Yt])}return mt};var vt=/^([^\[\.]+)\.(.+)?/,_t=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;function Le(rt){return rt.slice(0,2)==="__"}p.expandObjectPaths=function(rt){var Z,we,ot,mt,It,Yt,Sr;if(typeof rt=="object"&&!Array.isArray(rt)){for(we in rt)if(rt.hasOwnProperty(we))if(Z=we.match(vt)){if(mt=rt[we],ot=Z[1],Le(ot))continue;delete rt[we],rt[ot]=p.extendDeepNoArrays(rt[ot]||{},p.objectFromPath(we,p.expandObjectPaths(mt))[ot])}else if(Z=we.match(_t)){if(mt=rt[we],ot=Z[1],Le(ot))continue;if(It=parseInt(Z[2]),delete rt[we],rt[ot]=rt[ot]||[],Z[3]===".")Sr=Z[4],Yt=rt[ot][It]=rt[ot][It]||{},p.extendDeepNoArrays(Yt,p.objectFromPath(Sr,p.expandObjectPaths(mt)));else{if(Le(ot))continue;rt[ot][It]=p.expandObjectPaths(mt)}}else{if(Le(we))continue;rt[we]=p.expandObjectPaths(rt[we])}}return rt},p.numSeparate=function(rt,Z,we){if(we||(we=!1),typeof Z!="string"||Z.length===0)throw new Error("Separator string required for formatting!");typeof rt=="number"&&(rt=String(rt));var ot=/(\d+)(\d{3})/,mt=Z.charAt(0),It=Z.charAt(1),Yt=rt.split("."),Sr=Yt[0],Op=Yt.length>1?mt+Yt[1]:"";if(It&&(Yt.length>1||Sr.length>4||we))for(;ot.test(Sr);)Sr=Sr.replace(ot,"$1"+It+"$2");return Sr+Op},p.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var wt=/^\w*$/;p.templateString=function(rt,Z){var we={};return rt.replace(p.TEMPLATE_STRING_REGEX,function(ot,mt){var It;return wt.test(mt)?It=Z[mt]:(we[mt]=we[mt]||p.nestedProperty(Z,mt).get,It=we[mt](!0)),It!==void 0?It:""})};var St={max:10,count:0,name:"hovertemplate"};p.hovertemplateString=function(){return Cp.apply(St,arguments)};var Ut={max:10,count:0,name:"texttemplate"};p.texttemplateString=function(){return Cp.apply(Ut,arguments)};var kt=/^(\S+)([\*\/])(-?\d+(\.\d+)?)$/;function jt(rt){var Z=rt.match(kt);return Z?{key:Z[1],op:Z[2],number:Number(Z[3])}:{key:rt,op:null,number:null}}var aa={max:10,count:0,name:"texttemplate",parseMultDiv:!0};p.texttemplateStringForShapes=function(){return Cp.apply(aa,arguments)};var ca=/^[:|\|]/;function Cp(rt,Z,we){var ot=this,mt=arguments;return Z||(Z={}),rt.replace(p.TEMPLATE_STRING_REGEX,function(It,Yt,Sr){var Op=Yt==="xother"||Yt==="yother",Hp=Yt==="_xother"||Yt==="_yother",n0=Yt==="_xother_"||Yt==="_yother_",R0=Yt==="xother_"||Yt==="yother_",w0=Op||Hp||R0||n0,_0=Yt;(Hp||n0)&&(_0=_0.substring(1)),(R0||n0)&&(_0=_0.substring(0,_0.length-1));var ha=null,Rp=null;if(ot.parseMultDiv){var Gt=jt(_0);_0=Gt.key,ha=Gt.op,Rp=Gt.number}var Gp;if(w0){if(Gp=Z[_0],Gp===void 0)return""}else{var c0,M0;for(M0=3;M0<mt.length;M0++)if(c0=mt[M0],!!c0){if(c0.hasOwnProperty(_0)){Gp=c0[_0];break}if(wt.test(_0)||(Gp=p.nestedProperty(c0,_0).get(!0)),Gp!==void 0)break}}if(Gp!==void 0&&(ha==="*"&&(Gp*=Rp),ha==="/"&&(Gp/=Rp)),Gp===void 0&&ot)return ot.count<ot.max&&(p.warn("Variable '"+_0+"' in "+ot.name+" could not be found!"),Gp=It),ot.count===ot.max&&p.warn("Too many "+ot.name+" warnings - additional warnings will be suppressed"),ot.count++,It;if(Sr){var I0;if(Sr[0]===":"&&(I0=we?we.numberFormat:p.numberFormat,Gp!==""&&(Gp=I0(Sr.replace(ca,""))(Gp))),Sr[0]==="|"){I0=we?we.timeFormat:d;var k0=p.dateTime2ms(Gp);Gp=p.formatDate(k0,Sr.replace(ca,""),!1,I0)}}else{var V0=_0+"Label";Z.hasOwnProperty(V0)&&(Gp=Z[V0])}return w0&&(Gp="("+Gp+")",(Hp||n0)&&(Gp=" "+Gp),(R0||n0)&&(Gp=Gp+" ")),Gp})}var pt=48,gt=57;p.subplotSort=function(rt,Z){for(var we=Math.min(rt.length,Z.length)+1,ot=0,mt=0,It=0;It<we;It++){var Yt=rt.charCodeAt(It)||0,Sr=Z.charCodeAt(It)||0,Op=Yt>=pt&&Yt<=gt,Hp=Sr>=pt&&Sr<=gt;if(Op&&(ot=10*ot+Yt-pt),Hp&&(mt=10*mt+Sr-pt),!Op||!Hp){if(ot!==mt)return ot-mt;if(Yt!==Sr)return Yt-Sr}}return mt-ot};var te=2e9;p.seedPseudoRandom=function(){te=2e9},p.pseudoRandom=function(){var rt=te;return te=(69069*te+1)%4294967296,Math.abs(te-rt)<429496729?p.pseudoRandom():te/4294967296},p.fillText=function(rt,Z,we){var ot=Array.isArray(we)?function(Yt){we.push(Yt)}:function(Yt){we.text=Yt},mt=p.extractOption(rt,Z,"htx","hovertext");if(p.isValidTextValue(mt))return ot(mt);var It=p.extractOption(rt,Z,"tx","text");if(p.isValidTextValue(It))return ot(It)},p.isValidTextValue=function(rt){return rt||rt===0},p.formatPercent=function(rt,Z){Z=Z||0;for(var we=(Math.round(100*rt*Math.pow(10,Z))*Math.pow(.1,Z)).toFixed(Z)+"%",ot=0;ot<Z;ot++)we.indexOf(".")!==-1&&(we=we.replace("0%","%"),we=we.replace(".%","%"));return we},p.isHidden=function(rt){var Z=window.getComputedStyle(rt).display;return!Z||Z==="none"},p.strTranslate=function(rt,Z){return rt||Z?"translate("+rt+","+Z+")":""},p.strRotate=function(rt){return rt?"rotate("+rt+")":""},p.strScale=function(rt){return rt!==1?"scale("+rt+")":""},p.getTextTransform=function(rt){var Z=rt.noCenter,we=rt.textX,ot=rt.textY,mt=rt.targetX,It=rt.targetY,Yt=rt.anchorX||0,Sr=rt.anchorY||0,Op=rt.rotate,Hp=rt.scale;return Hp?Hp>1&&(Hp=1):Hp=0,p.strTranslate(mt-Hp*(we+Yt),It-Hp*(ot+Sr))+p.strScale(Hp)+(Op?"rotate("+Op+(Z?"":" "+we+" "+ot)+")":"")},p.setTransormAndDisplay=function(rt,Z){rt.attr("transform",p.getTextTransform(Z)),rt.style("display",Z.scale?null:"none")},p.ensureUniformFontSize=function(rt,Z){var we=p.extendFlat({},Z);return we.size=Math.max(Z.size,rt._fullLayout.uniformtext.minsize||0),we},p.join2=function(rt,Z,we){var ot=rt.length;return ot>1?rt.slice(0,-1).join(Z)+we+rt[ot-1]:rt.join(Z)},p.bigFont=function(rt){return Math.round(1.2*rt)};var Et=p.getFirefoxVersion(),zt=Et!==null&&Et<86;p.getPositionFromD3Event=function(){return zt?[_.event.layerX,_.event.layerY]:[_.event.offsetX,_.event.offsetY]}}),t0=r(()=>{var nt=et(),ke={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X:focus-within .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-group a":"display:grid;place-content:center;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;border:none;background:rgba(0,0,0,0);","X .modebar-btn svg":"position:relative;","X .modebar-btn:focus-visible":"outline:1px solid #000;outline-offset:1px;border-radius:3px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:rgba(0,0,0,0);border:6px solid rgba(0,0,0,0);z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid rgba(0,0,0,0);border-left-color:#69738a;margin-top:8px;margin-right:-30px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(d in ke)_=d.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier"),nt.addStyleRule(_,ke[d]);var _,d}),oa=r((nt,ke)=>{ke.exports=!0}),a0=r((nt,ke)=>{var _=oa(),d;typeof window.matchMedia=="function"?d=!window.matchMedia("(hover: none)").matches:d=_,ke.exports=d}),m0=r((nt,ke)=>{var _=typeof Reflect=="object"?Reflect:null,d=_&&typeof _.apply=="function"?_.apply:function(X,ee,yt){return Function.prototype.apply.call(X,ee,yt)},m;_&&typeof _.ownKeys=="function"?m=_.ownKeys:Object.getOwnPropertySymbols?m=function(X){return Object.getOwnPropertyNames(X).concat(Object.getOwnPropertySymbols(X))}:m=function(X){return Object.getOwnPropertyNames(X)};function E(X){console&&console.warn&&console.warn(X)}var b=Number.isNaN||function(X){return X!==X};function w(){w.init.call(this)}ke.exports=w,ke.exports.once=M,w.EventEmitter=w,w.prototype._events=void 0,w.prototype._eventsCount=0,w.prototype._maxListeners=void 0;var S=10;function C(X){if(typeof X!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof X)}Object.defineProperty(w,"defaultMaxListeners",{enumerable:!0,get:function(){return S},set:function(X){if(typeof X!="number"||X<0||b(X))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+X+".");S=X}}),w.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},w.prototype.setMaxListeners=function(X){if(typeof X!="number"||X<0||b(X))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+X+".");return this._maxListeners=X,this};function p(X){return X._maxListeners===void 0?w.defaultMaxListeners:X._maxListeners}w.prototype.getMaxListeners=function(){return p(this)},w.prototype.emit=function(X){for(var ee=[],yt=1;yt<arguments.length;yt++)ee.push(arguments[yt]);var Ze=X==="error",Re=this._events;if(Re!==void 0)Ze=Ze&&Re.error===void 0;else if(!Ze)return!1;if(Ze){var Q;if(ee.length>0&&(Q=ee[0]),Q instanceof Error)throw Q;var xt=new Error("Unhandled error."+(Q?" ("+Q.message+")":""));throw xt.context=Q,xt}var tt=Re[X];if(tt===void 0)return!1;if(typeof tt=="function")d(tt,this,ee);else for(var ht=tt.length,it=z(tt,ht),yt=0;yt<ht;++yt)d(it[yt],this,ee);return!0};function F(X,ee,yt,Ze){var Re,Q,xt;if(C(yt),Q=X._events,Q===void 0?(Q=X._events=Object.create(null),X._eventsCount=0):(Q.newListener!==void 0&&(X.emit("newListener",ee,yt.listener?yt.listener:yt),Q=X._events),xt=Q[ee]),xt===void 0)xt=Q[ee]=yt,++X._eventsCount;else if(typeof xt=="function"?xt=Q[ee]=Ze?[yt,xt]:[xt,yt]:Ze?xt.unshift(yt):xt.push(yt),Re=p(X),Re>0&&xt.length>Re&&!xt.warned){xt.warned=!0;var tt=new Error("Possible EventEmitter memory leak detected. "+xt.length+" "+String(ee)+" listeners added. Use emitter.setMaxListeners() to increase limit");tt.name="MaxListenersExceededWarning",tt.emitter=X,tt.type=ee,tt.count=xt.length,E(tt)}return X}w.prototype.addListener=function(X,ee){return F(this,X,ee,!1)},w.prototype.on=w.prototype.addListener,w.prototype.prependListener=function(X,ee){return F(this,X,ee,!0)};function A(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function O(X,ee,yt){var Ze={fired:!1,wrapFn:void 0,target:X,type:ee,listener:yt},Re=A.bind(Ze);return Re.listener=yt,Ze.wrapFn=Re,Re}w.prototype.once=function(X,ee){return C(ee),this.on(X,O(this,X,ee)),this},w.prototype.prependOnceListener=function(X,ee){return C(ee),this.prependListener(X,O(this,X,ee)),this},w.prototype.removeListener=function(X,ee){var yt,Ze,Re,Q,xt;if(C(ee),Ze=this._events,Ze===void 0)return this;if(yt=Ze[X],yt===void 0)return this;if(yt===ee||yt.listener===ee)--this._eventsCount===0?this._events=Object.create(null):(delete Ze[X],Ze.removeListener&&this.emit("removeListener",X,yt.listener||ee));else if(typeof yt!="function"){for(Re=-1,Q=yt.length-1;Q>=0;Q--)if(yt[Q]===ee||yt[Q].listener===ee){xt=yt[Q].listener,Re=Q;break}if(Re<0)return this;Re===0?yt.shift():I(yt,Re),yt.length===1&&(Ze[X]=yt[0]),Ze.removeListener!==void 0&&this.emit("removeListener",X,xt||ee)}return this},w.prototype.off=w.prototype.removeListener,w.prototype.removeAllListeners=function(X){var ee,yt,Ze;if(yt=this._events,yt===void 0)return this;if(yt.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):yt[X]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete yt[X]),this;if(arguments.length===0){var Re=Object.keys(yt),Q;for(Ze=0;Ze<Re.length;++Ze)Q=Re[Ze],Q!=="removeListener"&&this.removeAllListeners(Q);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(ee=yt[X],typeof ee=="function")this.removeListener(X,ee);else if(ee!==void 0)for(Ze=ee.length-1;Ze>=0;Ze--)this.removeListener(X,ee[Ze]);return this};function $(X,ee,yt){var Ze=X._events;if(Ze===void 0)return[];var Re=Ze[ee];return Re===void 0?[]:typeof Re=="function"?yt?[Re.listener||Re]:[Re]:yt?G(Re):z(Re,Re.length)}w.prototype.listeners=function(X){return $(this,X,!0)},w.prototype.rawListeners=function(X){return $(this,X,!1)},w.listenerCount=function(X,ee){return typeof X.listenerCount=="function"?X.listenerCount(ee):j.call(X,ee)},w.prototype.listenerCount=j;function j(X){var ee=this._events;if(ee!==void 0){var yt=ee[X];if(typeof yt=="function")return 1;if(yt!==void 0)return yt.length}return 0}w.prototype.eventNames=function(){return this._eventsCount>0?m(this._events):[]};function z(X,ee){for(var yt=new Array(ee),Ze=0;Ze<ee;++Ze)yt[Ze]=X[Ze];return yt}function I(X,ee){for(;ee+1<X.length;ee++)X[ee]=X[ee+1];X.pop()}function G(X){for(var ee=new Array(X.length),yt=0;yt<ee.length;++yt)ee[yt]=X[yt].listener||X[yt];return ee}function M(X,ee){return new Promise(function(yt,Ze){function Re(xt){X.removeListener(ee,Q),Ze(xt)}function Q(){typeof X.removeListener=="function"&&X.removeListener("error",Re),yt([].slice.call(arguments))}B(X,ee,Q,{once:!0}),ee!=="error"&&L(X,Re,{once:!0})})}function L(X,ee,yt){typeof X.on=="function"&&B(X,"error",ee,yt)}function B(X,ee,yt,Ze){if(typeof X.on=="function")Ze.once?X.once(ee,yt):X.on(ee,yt);else if(typeof X.addEventListener=="function")X.addEventListener(ee,function Re(Q){Ze.once&&X.removeEventListener(ee,Re),yt(Q)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof X)}}),nm=r((nt,ke)=>{var _=m0().EventEmitter,d={init:function(m){if(m._ev instanceof _)return m;var E=new _,b=new _;return m._ev=E,m._internalEv=b,m.on=E.on.bind(E),m.once=E.once.bind(E),m.removeListener=E.removeListener.bind(E),m.removeAllListeners=E.removeAllListeners.bind(E),m._internalOn=b.on.bind(b),m._internalOnce=b.once.bind(b),m._removeInternalListener=b.removeListener.bind(b),m._removeAllInternalListeners=b.removeAllListeners.bind(b),m.emit=function(w,S){E.emit(w,S),b.emit(w,S)},typeof m.addEventListener=="function"&&m.addEventListener("wheel",()=>{},{passive:!0}),m},triggerHandler:function(m,E,b){var w,S=m._ev;if(!S)return;var C=S._events[E];if(!C)return;function p(A){if(A.listener){if(S.removeListener(E,A.listener),!A.fired)return A.fired=!0,A.listener.apply(S,[b])}else return A.apply(S,[b])}C=Array.isArray(C)?C:[C];var F;for(F=0;F<C.length-1;F++)p(C[F]);return w=p(C[F]),w},purge:function(m){return delete m._ev,delete m.on,delete m.once,delete m.removeListener,delete m.removeAllListeners,delete m.emit,delete m._ev,delete m._internalEv,delete m._internalOn,delete m._internalOnce,delete m._removeInternalListener,delete m._removeAllInternalListeners,m}};ke.exports=d}),L0=r((nt,ke)=>{var _=et(),d=qo().dfltConfig;function m(b,w){for(var S=[],C,p=0;p<w.length;p++)C=w[p],C===b?S[p]=C:typeof C=="object"?S[p]=Array.isArray(C)?_.extendDeep([],C):_.extendDeepAll({},C):S[p]=C;return S}var E={};E.add=function(b,w,S,C,p){var F,A;if(b.undoQueue=b.undoQueue||{index:0,queue:[],sequence:!1},A=b.undoQueue.index,b.autoplay){b.undoQueue.inSequence||(b.autoplay=!1);return}!b.undoQueue.sequence||b.undoQueue.beginSequence?(F={undo:{calls:[],args:[]},redo:{calls:[],args:[]}},b.undoQueue.queue.splice(A,b.undoQueue.queue.length-A,F),b.undoQueue.index+=1):F=b.undoQueue.queue[A-1],b.undoQueue.beginSequence=!1,F&&(F.undo.calls.unshift(w),F.undo.args.unshift(S),F.redo.calls.push(C),F.redo.args.push(p)),b.undoQueue.queue.length>d.queueLength&&(b.undoQueue.queue.shift(),b.undoQueue.index--)},E.startSequence=function(b){b.undoQueue=b.undoQueue||{index:0,queue:[],sequence:!1},b.undoQueue.sequence=!0,b.undoQueue.beginSequence=!0},E.stopSequence=function(b){b.undoQueue=b.undoQueue||{index:0,queue:[],sequence:!1},b.undoQueue.sequence=!1,b.undoQueue.beginSequence=!1},E.undo=function(b){var w,S;if(!(b.undoQueue===void 0||isNaN(b.undoQueue.index)||b.undoQueue.index<=0)){for(b.undoQueue.index--,w=b.undoQueue.queue[b.undoQueue.index],b.undoQueue.inSequence=!0,S=0;S<w.undo.calls.length;S++)E.plotDo(b,w.undo.calls[S],w.undo.args[S]);b.undoQueue.inSequence=!1,b.autoplay=!1}},E.redo=function(b){var w,S;if(!(b.undoQueue===void 0||isNaN(b.undoQueue.index)||b.undoQueue.index>=b.undoQueue.queue.length)){for(w=b.undoQueue.queue[b.undoQueue.index],b.undoQueue.inSequence=!0,S=0;S<w.redo.calls.length;S++)E.plotDo(b,w.redo.calls[S],w.redo.args[S]);b.undoQueue.inSequence=!1,b.autoplay=!1,b.undoQueue.index++}},E.plotDo=function(b,w,S){b.autoplay=!0,S=m(b,S),w.apply(null,S)},ke.exports=E}),cm=r((nt,ke)=>{ke.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}}),Gm=r(nt=>{var ke=y1(),_=et(),d=$t(),m=Km(),E=cm(),b=r1(),w=qo().configAttributes,S=Om(),C=_.extendDeepAll,p=_.isPlainObject,F=_.isArrayOrTypedArray,A=_.nestedProperty,O=_.valObjectMeta,$="_isSubplotObj",j="_isLinkedToArray",z="_arrayAttrRegexps",I="_deprecated",G=[$,j,z,I];nt.IS_SUBPLOT_OBJ=$,nt.IS_LINKED_TO_ARRAY=j,nt.DEPRECATED=I,nt.UNDERSCORE_ATTRS=G,nt.get=function(){var it={};return ke.allTypes.forEach(function(ut){it[ut]=X(ut)}),{defs:{valObjects:O,metaKeys:G.concat(["description","role","editType","impliedEdits"]),editType:{traces:S.traces,layout:S.layout},impliedEdits:{}},traces:it,layout:ee(),frames:yt(),animation:Ze(b),config:Ze(w)}},nt.crawl=function(it,ut,vt,_t){var Le=vt||0;_t=_t||"",Object.keys(it).forEach(function(wt){var St=it[wt];if(G.indexOf(wt)===-1){var Ut=(_t?_t+".":"")+wt;ut(St,wt,it,Le,Ut),!nt.isValObject(St)&&p(St)&&wt!=="impliedEdits"&&nt.crawl(St,ut,Le+1,Ut)}})},nt.isValObject=function(it){return it&&it.valType!==void 0},nt.findArrayAttributes=function(it){var ut=[],vt=[],_t=[],Le,wt;function St(kt,jt,aa,ca){vt=vt.slice(0,ca).concat([jt]),_t=_t.slice(0,ca).concat([kt&&kt._isLinkedToArray]);var Cp=kt&&(kt.valType==="data_array"||kt.arrayOk===!0)&&!(vt[ca-1]==="colorbar"&&(jt==="ticktext"||jt==="tickvals"));Cp&&Ut(Le,0,"")}function Ut(kt,jt,aa){var ca=kt[vt[jt]],Cp=aa+vt[jt];if(jt===vt.length-1)F(ca)&&ut.push(wt+Cp);else if(_t[jt]){if(Array.isArray(ca))for(var pt=0;pt<ca.length;pt++)p(ca[pt])&&Ut(ca[pt],jt+1,Cp+"["+pt+"].")}else p(ca)&&Ut(ca,jt+1,Cp+".")}return Le=it,wt="",nt.crawl(d,St),it._module&&it._module.attributes&&nt.crawl(it._module.attributes,St),ut},nt.getTraceValObject=function(it,ut){var vt=ut[0],_t=1,Le,wt,St=it._module;if(St||(St=(ke.modules[it.type||d.type.dflt]||{})._module),!St)return!1;if(Le=St.attributes,wt=Le&&Le[vt],!wt){var Ut=St.basePlotModule;Ut&&Ut.attributes&&(wt=Ut.attributes[vt])}return wt||(wt=d[vt]),L(wt,ut,_t)},nt.getLayoutValObject=function(it,ut){var vt=M(it,ut[0]);return L(vt,ut,1)};function M(it,ut){var vt,_t,Le,wt,St=it._basePlotModules;if(St){var Ut;for(vt=0;vt<St.length;vt++){if(Le=St[vt],Le.attrRegex&&Le.attrRegex.test(ut)){if(Le.layoutAttrOverrides)return Le.layoutAttrOverrides;!Ut&&Le.layoutAttributes&&(Ut=Le.layoutAttributes)}var kt=Le.baseLayoutAttrOverrides;if(kt&&ut in kt)return kt[ut]}if(Ut)return Ut}var jt=it._modules;if(jt){for(vt=0;vt<jt.length;vt++)if(wt=jt[vt].layoutAttributes,wt&&ut in wt)return wt[ut]}for(_t in ke.componentsRegistry){if(Le=ke.componentsRegistry[_t],Le.name==="colorscale"&&ut.indexOf("coloraxis")===0)return Le.layoutAttributes[ut];if(!Le.schema&&ut===Le.name)return Le.layoutAttributes}return ut in m?m[ut]:!1}function L(it,ut,vt){if(!it)return!1;if(it._isLinkedToArray){if(B(ut[vt]))vt++;else if(vt<ut.length)return!1}for(;vt<ut.length;vt++){var _t=it[ut[vt]];if(p(_t))it=_t;else break;if(vt===ut.length-1)break;if(it._isLinkedToArray){if(vt++,!B(ut[vt]))return!1}else if(it.valType==="info_array"){vt++;var Le=ut[vt];if(!B(Le))return!1;var wt=it.items;if(Array.isArray(wt)){if(Le>=wt.length)return!1;if(it.dimensions===2){if(vt++,ut.length===vt)return it;var St=ut[vt];if(!B(St))return!1;it=wt[Le][St]}else it=wt[Le]}else it=wt}}return it}function B(it){return it===Math.round(it)&&it>=0}function X(it){var ut,vt;ut=ke.modules[it]._module,vt=ut.basePlotModule;var _t={};_t.type=null;var Le=C({},d),wt=C({},ut.attributes);nt.crawl(wt,function(kt,jt,aa,ca,Cp){A(Le,Cp).set(void 0),kt===void 0&&A(wt,Cp).set(void 0)}),C(_t,Le),ke.traceIs(it,"noOpacity")&&delete _t.opacity,ke.traceIs(it,"showLegend")||(delete _t.showlegend,delete _t.legendgroup),ke.traceIs(it,"noHover")&&(delete _t.hoverinfo,delete _t.hoverlabel),ut.selectPoints||delete _t.selectedpoints,C(_t,wt),vt.attributes&&C(_t,vt.attributes),_t.type=it;var St={meta:ut.meta||{},categories:ut.categories||{},animatable:!!ut.animatable,type:it,attributes:Ze(_t)};if(ut.layoutAttributes){var Ut={};C(Ut,ut.layoutAttributes),St.layoutAttributes=Ze(Ut)}return ut.animatable||nt.crawl(St,function(kt){nt.isValObject(kt)&&"anim"in kt&&delete kt.anim}),St}function ee(){var it={},ut,vt;C(it,m);for(ut in ke.subplotsRegistry)if(vt=ke.subplotsRegistry[ut],!!vt.layoutAttributes)if(Array.isArray(vt.attr))for(var _t=0;_t<vt.attr.length;_t++)tt(it,vt,vt.attr[_t]);else{var Le=vt.attr==="subplot"?vt.name:vt.attr;tt(it,vt,Le)}for(ut in ke.componentsRegistry){vt=ke.componentsRegistry[ut];var wt=vt.schema;if(wt&&(wt.subplots||wt.layout)){var St=wt.subplots;if(St&&St.xaxis&&!St.yaxis)for(var Ut in St.xaxis)delete it.yaxis[Ut];delete it.xaxis.shift,delete it.xaxis.autoshift}else vt.name==="colorscale"?C(it,vt.layoutAttributes):vt.layoutAttributes&&ht(it,vt.layoutAttributes,vt.name)}return{layoutAttributes:Ze(it)}}function yt(){var it={frames:C({},E)};return Ze(it),it.frames}function Ze(it){return Re(it),Q(it),xt(it),it}function Re(it){function ut(_t){return{valType:"string",editType:"none"}}function vt(_t,Le,wt){nt.isValObject(_t)?(_t.arrayOk===!0||_t.valType==="data_array")&&(wt[Le+"src"]=ut()):p(_t)&&(_t.role="object")}nt.crawl(it,vt)}function Q(it){function ut(vt,_t,Le){if(vt){var wt=vt[j];wt&&(delete vt[j],Le[_t]={items:{}},Le[_t].items[wt]=vt,Le[_t].role="object")}}nt.crawl(it,ut)}function xt(it){function ut(vt){for(var _t in vt)if(p(vt[_t]))ut(vt[_t]);else if(Array.isArray(vt[_t]))for(var Le=0;Le<vt[_t].length;Le++)ut(vt[_t][Le]);else vt[_t]instanceof RegExp&&(vt[_t]=vt[_t].toString())}ut(it)}function tt(it,ut,vt){var _t=A(it,vt),Le=C({},ut.layoutAttributes);Le[$]=!0,_t.set(Le)}function ht(it,ut,vt){var _t=A(it,vt);_t.set(C(_t.get()||{},ut))}}),Fm=r(nt=>{var ke=et(),_=$t(),d="templateitemname",m={name:{valType:"string",editType:"none"}};m[d]={valType:"string",editType:"calc"},nt.templatedArray=function(w,S){return S._isLinkedToArray=w,S.name=m.name,S[d]=m[d],S},nt.traceTemplater=function(w){var S={},C,p;for(C in w)p=w[C],Array.isArray(p)&&p.length&&(S[C]=0);function F(A){C=ke.coerce(A,{},_,"type");var O={type:C,_template:null};if(C in S){p=w[C];var $=S[C]%p.length;S[C]++,O._template=p[$]}return O}return{newTrace:F}},nt.newContainer=function(w,S,C){var p=w._template,F=p&&(p[S]||C&&p[C]);ke.isPlainObject(F)||(F=null);var A=w[S]={_template:F};return A},nt.arrayTemplater=function(w,S,C){var p=w._template,F=p&&p[b(S)],A=p&&p[S];(!Array.isArray(A)||!A.length)&&(A=[]);var O={};function $(z){var I={name:z.name,_input:z},G=I[d]=z[d];if(!E(G))return I._template=F,I;for(var M=0;M<A.length;M++){var L=A[M];if(L.name===G)return O[G]=1,I._template=L,I}return I[C]=z[C]||!1,I._template=!1,I}function j(){for(var z=[],I=0;I<A.length;I++){var G=A[I],M=G.name;if(E(M)&&!O[M]){var L={_template:G,name:M,_input:{_templateitemname:M}};L[d]=G[d],z.push(L),O[M]=1}}return z}return{newItem:$,defaultItems:j}};function E(w){return w&&typeof w=="string"}function b(w){var S=w.length-1;return w.charAt(S)!=="s"&&ke.warn("bad argument to arrayDefaultKey: "+w),w.substr(0,w.length-1)+"defaults"}nt.arrayDefaultKey=b,nt.arrayEditor=function(w,S,C){var p=(ke.nestedProperty(w,S).get()||[]).length,F=C._index,A=F>=p&&(C._input||{})._templateitemname;A&&(F=p);var O=S+"["+F+"]",$;function j(){$={},A&&($[O]={},$[O][d]=A)}j();function z(L,B){$[L]=B}function I(L,B){A?ke.nestedProperty($[O],L).set(B):$[O+"."+L]=B}function G(){var L=$;return j(),L}function M(L,B){L&&I(L,B);var X=G();for(var ee in X)ke.nestedProperty(w,ee).set(X[ee])}return{modifyBase:z,modifyItem:I,getUpdateObj:G,applyUpdate:M}}}),Vm=r((nt,ke)=>{var _=re().counter;ke.exports={idRegex:{x:_("x","( domain)?"),y:_("y","( domain)?")},attrRegex:_("[xy]axis"),xAxisMatch:_("xaxis"),yAxisMatch:_("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINZOOM:20,DRAGGERSIZE:20,REDRAWDELAY:50,DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"},zindexSeparator:"z"}}),D1=r(nt=>{var ke=y1(),_=Vm();nt.id2name=function(m){if(!(typeof m!="string"||!m.match(_.AX_ID_PATTERN))){var E=m.split(" ")[0].substr(1);return E==="1"&&(E=""),m.charAt(0)+"axis"+E}},nt.name2id=function(m){if(m.match(_.AX_NAME_PATTERN)){var E=m.substr(5);return E==="1"&&(E=""),m.charAt(0)+E}},nt.cleanId=function(m,E,b){var w=/( domain)$/.test(m);if(!(typeof m!="string"||!m.match(_.AX_ID_PATTERN))&&!(E&&m.charAt(0)!==E)&&!(w&&!b)){var S=m.split(" ")[0].substr(1).replace(/^0+/,"");return S==="1"&&(S=""),m.charAt(0)+S+(w&&b?" domain":"")}},nt.list=function(m,E,b){var w=m._fullLayout;if(!w)return[];var S=nt.listIds(m,E),C=new Array(S.length),p;for(p=0;p<S.length;p++){var F=S[p];C[p]=w[F.charAt(0)+"axis"+F.substr(1)]}if(!b){var A=w._subplots.gl3d||[];for(p=0;p<A.length;p++){var O=w[A[p]];E?C.push(O[E+"axis"]):C.push(O.xaxis,O.yaxis,O.zaxis)}}return C},nt.listIds=function(m,E){var b=m._fullLayout;if(!b)return[];var w=b._subplots;return E?w[E+"axis"]:w.xaxis.concat(w.yaxis)},nt.getFromId=function(m,E,b){var w=m._fullLayout;return E=E===void 0||typeof E!="string"?E:E.replace(" domain",""),b==="x"?E=E.replace(/y[0-9]*/,""):b==="y"&&(E=E.replace(/x[0-9]*/,"")),w[nt.id2name(E)]},nt.getFromTrace=function(m,E,b){var w=m._fullLayout,S=null;if(ke.traceIs(E,"gl3d")){var C=E.scene;C.substr(0,5)==="scene"&&(S=w[C][b+"axis"])}else S=nt.getFromId(m,E[b+"axis"]||b);return S},nt.idSort=function(m,E){var b=m.charAt(0),w=E.charAt(0);return b!==w?b>w?1:-1:+(m.substr(1)||1)-+(E.substr(1)||1)},nt.ref2id=function(m){return/^[xyz]/.test(m)?m.split(" ")[0]:!1};function d(m,E){if(E&&E.length){for(var b=0;b<E.length;b++)if(E[b][m])return!0}return!1}nt.isLinked=function(m,E){return d(E,m._axisMatchGroups)||d(E,m._axisConstraintGroups)}}),O1=r((nt,ke)=>{function _(m){var E=m._fullLayout._zoomlayer;E&&E.selectAll(".outline-controllers").remove()}function d(m){var E=m._fullLayout._zoomlayer;E&&E.selectAll(".select-outline").remove(),m._fullLayout._outlining=!1}ke.exports={clearOutlineControllers:_,clearOutline:d}}),tg=r((nt,ke)=>{ke.exports={scattermode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},scattergap:{valType:"number",min:0,max:1,editType:"calc"}}}),Mg=r(nt=>{var ke=y1();Vm().SUBPLOT_PATTERN,nt.getSubplotCalcData=function(_,d,m){var E=ke.subplotsRegistry[d];if(!E)return[];for(var b=E.attr,w=[],S=0;S<_.length;S++){var C=_[S],p=C[0].trace;p[b]===m&&w.push(C)}return w},nt.getModuleCalcData=function(_,d,m){var E=[],b=[],w;if(typeof d=="string"?w=ke.getModule(d).plot:typeof d=="function"?w=d:w=d.plot,!w)return[E,_];for(var S=m,C=0;C<_.length;C++){var p=_[C],F=p[0].trace,A=F.zorder!==void 0;F.visible!==!0||F._length===0||(F._module&&F._module.plot===w&&(!A||F.zorder===S)?E.push(p):b.push(p))}return[E,b]},nt.getSubplotData=function(_,d,m){if(!ke.subplotsRegistry[d])return[];for(var E=ke.subplotsRegistry[d].attr,b=[],w,S,C,p=0;p<_.length;p++)w=_[p],w[E]===m&&b.push(w);return b}}),kg=r(nt=>{var ke=y1(),_=et();nt.manageCommandObserver=function(S,C,p,F){var A={},O=!0;C&&C._commandObserver&&(A=C._commandObserver),A.cache||(A.cache={}),A.lookupTable={};var $=nt.hasSimpleAPICommandBindings(S,p,A.lookupTable);if(C&&C._commandObserver){if($)return A;if(C._commandObserver.remove)return C._commandObserver.remove(),C._commandObserver=null,A}if($){d(S,$,A.cache),A.check=function(){if(O){var I=d(S,$,A.cache);return I.changed&&F&&A.lookupTable[I.value]!==void 0&&(A.disable(),Promise.resolve(F({value:I.value,type:$.type,prop:$.prop,traces:$.traces,index:A.lookupTable[I.value]})).then(A.enable,A.enable)),I.changed}};for(var j=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],z=0;z<j.length;z++)S._internalOn(j[z],A.check);A.remove=function(){for(var I=0;I<j.length;I++)S._removeInternalListener(j[I],A.check)}}else _.log("Unable to automatically bind plot updates to API command"),A.lookupTable={},A.remove=function(){};return A.disable=function(){O=!1},A.enable=function(){O=!0},C&&(C._commandObserver=A),A},nt.hasSimpleAPICommandBindings=function(S,C,p){var F,A=C.length,O;for(F=0;F<A;F++){var $,j=C[F],z=j.method,I=j.args;if(Array.isArray(I)||(I=[]),!z)return!1;var G=nt.computeAPICommandBindings(S,z,I);if(G.length!==1)return!1;if(!O)O=G[0],Array.isArray(O.traces)&&O.traces.sort();else{if($=G[0],$.type!==O.type||$.prop!==O.prop)return!1;if(Array.isArray(O.traces))if(Array.isArray($.traces)){$.traces.sort();for(var M=0;M<O.traces.length;M++)if(O.traces[M]!==$.traces[M])return!1}else return!1;else if($.prop!==O.prop)return!1}$=G[0];var L=$.value;if(Array.isArray(L))if(L.length===1)L=L[0];else return!1;p&&(p[L]=F)}return O};function d(S,C,p){var F,A,O,$=!1;if(C.type==="data")F=S._fullData[C.traces!==null?C.traces[0]:0];else if(C.type==="layout")F=S._fullLayout;else return!1;return A=_.nestedProperty(F,C.prop).get(),O=p[C.type]=p[C.type]||{},O.hasOwnProperty(C.prop)&&O[C.prop]!==A&&($=!0),O[C.prop]=A,{changed:$,value:A}}nt.executeAPICommand=function(S,C,p){if(C==="skip")return Promise.resolve();var F=ke.apiMethodRegistry[C],A=[S];Array.isArray(p)||(p=[]);for(var O=0;O<p.length;O++)A.push(p[O]);return F.apply(null,A).catch(function($){return _.warn("API call to Plotly."+C+" rejected.",$),Promise.reject($)})},nt.computeAPICommandBindings=function(S,C,p){var F;switch(Array.isArray(p)||(p=[]),C){case"restyle":F=b(S,p);break;case"relayout":F=E(S,p);break;case"update":F=b(S,[p[0],p[2]]).concat(E(S,[p[1]]));break;case"animate":F=m(S,p);break;default:F=[]}return F};function m(S,C){return Array.isArray(C[0])&&C[0].length===1&&["string","number"].indexOf(typeof C[0][0])!==-1?[{type:"layout",prop:"_currentFrame",value:C[0][0].toString()}]:[]}function E(S,C){var p=[],F=C[0],A={};if(typeof F=="string")A[F]=C[1];else if(_.isPlainObject(F))A=F;else return p;return w(A,function(O,$,j){p.push({type:"layout",prop:O,value:j})},"",0),p}function b(S,C){var p,F,A,O,$=[];if(F=C[0],A=C[1],p=C[2],O={},typeof F=="string")O[F]=A;else if(_.isPlainObject(F))O=F,p===void 0&&(p=A);else return $;return p===void 0&&(p=null),w(O,function(j,z,I){var G,M;if(Array.isArray(I)){M=I.slice();var L=Math.min(M.length,S.data.length);p&&(L=Math.min(L,p.length)),G=[];for(var B=0;B<L;B++)G[B]=p?p[B]:B}else M=I,G=p?p.slice():null;if(G===null)Array.isArray(M)&&(M=M[0]);else if(Array.isArray(G)){if(!Array.isArray(M)){var X=M;M=[];for(var ee=0;ee<G.length;ee++)M[ee]=X}M.length=Math.min(G.length,M.length)}$.push({type:"data",prop:j,traces:G,value:M})},"",0),$}function w(S,C,p,F){Object.keys(S).forEach(function(A){var O=S[A];if(A[0]!=="_"){var $=p+(F>0?".":"")+A;_.isPlainObject(O)?w(O,C,$,F+1):C($,A,O)}})}}),cg=r((nt,ke)=>{var _=o(),d=u().timeFormatLocale,m=c().formatLocale,E=v(),b=T(),w=y1(),S=Gm(),C=Fm(),p=et(),F=Mn(),A=g().BADNUM,O=D1(),$=O1().clearOutline,j=tg(),z=r1(),I=cm(),G=Mg().getModuleCalcData,M=p.relinkPrivateKeys,L=p._,B=ke.exports={};p.extendFlat(B,w),B.attributes=$t(),B.attributes.type.values=B.allTypes,B.fontAttrs=ct(),B.layoutAttributes=Km();var X=kg();B.executeAPICommand=X.executeAPICommand,B.computeAPICommandBindings=X.computeAPICommandBindings,B.manageCommandObserver=X.manageCommandObserver,B.hasSimpleAPICommandBindings=X.hasSimpleAPICommandBindings,B.redrawText=function(pt){return pt=p.getGraphDiv(pt),new Promise(function(gt){setTimeout(function(){pt._fullLayout&&(w.getComponentMethod("annotations","draw")(pt),w.getComponentMethod("legend","draw")(pt),w.getComponentMethod("colorbar","draw")(pt),gt(B.previousPromises(pt)))},300)})},B.resize=function(pt){pt=p.getGraphDiv(pt);var gt,te=new Promise(function(Et,zt){(!pt||p.isHidden(pt))&&zt(new Error("Resize must be passed a displayed plot div element.")),pt._redrawTimer&&clearTimeout(pt._redrawTimer),pt._resolveResize&&(gt=pt._resolveResize),pt._resolveResize=Et,pt._redrawTimer=setTimeout(function(){if(!pt.layout||pt.layout.width&&pt.layout.height||p.isHidden(pt)){Et(pt);return}delete pt.layout.width,delete pt.layout.height;var rt=pt.changed;pt.autoplay=!0,w.call("relayout",pt,{autosize:!0}).then(function(){pt.changed=rt,pt._resolveResize===Et&&(delete pt._resolveResize,Et(pt))})},100)});return gt&&gt(te),te},B.previousPromises=function(pt){if((pt._promises||[]).length)return Promise.all(pt._promises).then(function(){pt._promises=[]})},B.addLinks=function(pt){if(!(!pt._context.showLink&&!pt._context.showSources)){var gt=pt._fullLayout,te=p.ensureSingle(gt._paper,"text","js-plot-link-container",function(ot){ot.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:F.defaultLine,"pointer-events":"all"}).each(function(){var mt=_.select(this);mt.append("tspan").classed("js-link-to-tool",!0),mt.append("tspan").classed("js-link-spacer",!0),mt.append("tspan").classed("js-sourcelinks",!0)})}),Et=te.node(),zt={y:gt._paper.attr("height")-9};document.body.contains(Et)&&Et.getComputedTextLength()>=gt.width-20?(zt["text-anchor"]="start",zt.x=5):(zt["text-anchor"]="end",zt.x=gt._paper.attr("width")-7),te.attr(zt);var rt=te.select(".js-link-to-tool"),Z=te.select(".js-link-spacer"),we=te.select(".js-sourcelinks");pt._context.showSources&&pt._context.showSources(pt),pt._context.showLink&&ee(pt,rt),Z.text(rt.text()&&we.text()?" - ":"")}};function ee(pt,gt){gt.text("");var te=gt.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(pt._context.linkText+" ");if(pt._context.sendData)te.on("click",function(){B.sendDataToCloud(pt)});else{var Et=window.location.pathname.split("/"),zt=window.location.search;te.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+Et[2].split(".")[0]+"/"+Et[1]+zt})}}B.sendDataToCloud=function(pt){var gt=(window.PLOTLYENV||{}).BASE_URL||pt._context.plotlyServerURL;if(gt){pt.emit("plotly_beforeexport");var te=_.select(pt).append("div").attr("id","hiddenform").style("display","none"),Et=te.append("form").attr({action:gt+"/external",method:"post",target:"_blank"}),zt=Et.append("input").attr({type:"text",name:"data"});return zt.node().value=B.graphJson(pt,!1,"keepdata"),Et.node().submit(),te.remove(),pt.emit("plotly_afterexport"),!1}};var yt=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],Ze=["year","month","dayMonth","dayMonthYear"];B.supplyDefaults=function(pt,gt){var te=gt&&gt.skipUpdateCalc,Et=pt._fullLayout||{};if(Et._skipDefaults){delete Et._skipDefaults;return}var zt=pt._fullLayout={},rt=pt.layout||{},Z=pt._fullData||[],we=pt._fullData=[],ot=pt.data||[],mt=pt.calcdata||[],It=pt._context||{},Yt;pt._transitionData||B.createTransitionData(pt),zt._dfltTitle={plot:L(pt,"Click to enter Plot title"),subtitle:L(pt,"Click to enter Plot subtitle"),x:L(pt,"Click to enter X axis title"),y:L(pt,"Click to enter Y axis title"),colorbar:L(pt,"Click to enter Colorscale title"),annotation:L(pt,"new text")},zt._traceWord=L(pt,"trace");var Sr=xt(pt,yt);if(zt._mapboxAccessToken=It.mapboxAccessToken,Et._initialAutoSizeIsDone){var Op=Et.width,Hp=Et.height;B.supplyLayoutGlobalDefaults(rt,zt,Sr),rt.width||(zt.width=Op),rt.height||(zt.height=Hp),B.sanitizeMargins(zt)}else{B.supplyLayoutGlobalDefaults(rt,zt,Sr);var n0=!rt.width||!rt.height,R0=zt.autosize,w0=It.autosizable,_0=n0&&(R0||w0);_0?B.plotAutoSize(pt,rt,zt):n0&&B.sanitizeMargins(zt),!R0&&n0&&(rt.width=zt.width,rt.height=zt.height)}zt._d3locale=tt(Sr,zt.separators),zt._extraFormat=xt(pt,Ze),zt._initialAutoSizeIsDone=!0,zt._dataLength=ot.length,zt._modules=[],zt._visibleModules=[],zt._basePlotModules=[];var ha=zt._subplots=Q(),Rp=zt._splomAxes={x:{},y:{}},Gt=zt._splomSubplots={};zt._splomGridDflt={},zt._scatterStackOpts={},zt._firstScatter={},zt._alignmentOpts={},zt._colorAxes={},zt._requestRangeslider={},zt._traceUids=Re(Z,ot),B.supplyDataDefaults(ot,we,rt,zt);var Gp=Object.keys(Rp.x),c0=Object.keys(Rp.y);if(Gp.length>1&&c0.length>1){for(w.getComponentMethod("grid","sizeDefaults")(rt,zt),Yt=0;Yt<Gp.length;Yt++)p.pushUnique(ha.xaxis,Gp[Yt]);for(Yt=0;Yt<c0.length;Yt++)p.pushUnique(ha.yaxis,c0[Yt]);for(var M0 in Gt)p.pushUnique(ha.cartesian,M0)}if(zt._has=B._hasPlotType.bind(zt),Z.length===we.length)for(Yt=0;Yt<we.length;Yt++)M(we[Yt],Z[Yt]);B.supplyLayoutModuleDefaults(rt,zt,we,pt._transitionData);var I0=zt._visibleModules,k0=[];for(Yt=0;Yt<I0.length;Yt++){var V0=I0[Yt].crossTraceDefaults;V0&&p.pushUnique(k0,V0)}for(Yt=0;Yt<k0.length;Yt++)k0[Yt](we,zt);zt._hasOnlyLargeSploms=zt._basePlotModules.length===1&&zt._basePlotModules[0].name==="splom"&&Gp.length>15&&c0.length>15&&zt.shapes.length===0&&zt.images.length===0,B.linkSubplots(we,zt,Z,Et),B.cleanPlot(we,zt,Z,Et);var $0=!!(Et._has&&Et._has("cartesian")),W0=!!(zt._has&&zt._has("cartesian")),gm=$0,F0=W0;gm&&!F0?Et._bgLayer.remove():F0&&!gm&&(zt._shouldCreateBgLayer=!0),Et._zoomlayer&&!pt._dragging&&$({_fullLayout:Et}),ht(we,zt),M(zt,Et),w.getComponentMethod("colorscale","crossTraceDefaults")(we,zt),zt._preGUI||(zt._preGUI={}),zt._tracePreGUI||(zt._tracePreGUI={});var bm=zt._tracePreGUI,Dm={},vm;for(vm in bm)Dm[vm]="old";for(Yt=0;Yt<we.length;Yt++)vm=we[Yt]._fullInput.uid,Dm[vm]||(bm[vm]={}),Dm[vm]="new";for(vm in Dm)Dm[vm]==="old"&&delete bm[vm];vt(zt),w.getComponentMethod("rangeslider","makeData")(zt),!te&&mt.length===we.length&&B.supplyDefaultsUpdateCalc(mt,we)},B.supplyDefaultsUpdateCalc=function(pt,gt){for(var te=0;te<gt.length;te++){var Et=gt[te],zt=(pt[te]||[])[0];if(zt&&zt.trace){var rt=zt.trace;if(rt._hasCalcTransform){var Z=rt._arrayAttrs,we,ot,mt;for(we=0;we<Z.length;we++)ot=Z[we],mt=p.nestedProperty(rt,ot).get().slice(),p.nestedProperty(Et,ot).set(mt)}zt.trace=Et}}};function Re(pt,gt){var te=gt.length,Et=[],zt,rt;for(zt=0;zt<pt.length;zt++){var Z=pt[zt]._fullInput;Z!==rt&&Et.push(Z),rt=Z}var we=Et.length,ot=new Array(te),mt={};function It(Op,Hp){ot[Hp]=Op,mt[Op]=1}function Yt(Op,Hp){if(Op&&typeof Op=="string"&&!mt[Op])return It(Op,Hp),!0}for(zt=0;zt<te;zt++){var Sr=gt[zt].uid;typeof Sr=="number"&&(Sr=String(Sr)),!Yt(Sr,zt)&&(zt<we&&Yt(Et[zt].uid,zt)||It(p.randstr(mt),zt))}return ot}function Q(){var pt=w.collectableSubplotTypes,gt={},te,Et;if(!pt){pt=[];var zt=w.subplotsRegistry;for(var rt in zt){var Z=zt[rt],we=Z.attr;if(we&&(pt.push(rt),Array.isArray(we)))for(Et=0;Et<we.length;Et++)p.pushUnique(pt,we[Et])}}for(te=0;te<pt.length;te++)gt[pt[te]]=[];return gt}function xt(pt,gt){var te=pt._context.locale;te||(te="en-US");var Et=!1,zt={};function rt(Yt){for(var Sr=!0,Op=0;Op<gt.length;Op++){var Hp=gt[Op];zt[Hp]||(Yt[Hp]?zt[Hp]=Yt[Hp]:Sr=!1)}Sr&&(Et=!0)}for(var Z=0;Z<2;Z++){for(var we=pt._context.locales,ot=0;ot<2;ot++){var mt=(we[te]||{}).format;if(mt&&(rt(mt),Et))break;we=w.localeRegistry}var It=te.split("-")[0];if(Et||It===te)break;te=It}return Et||rt(w.localeRegistry.en.format),zt}function tt(pt,gt){return pt.decimal=gt.charAt(0),pt.thousands=gt.charAt(1),{numberFormat:function(te){try{te=m(pt).format(p.adjustFormat(te))}catch{return p.warnBadFormat(te),p.noFormat}return te},timeFormat:d(pt).utcFormat}}function ht(pt,gt){var te,Et=[];gt.meta&&(te=gt._meta={meta:gt.meta,layout:{meta:gt.meta}});for(var zt=0;zt<pt.length;zt++){var rt=pt[zt];rt.meta?Et[rt.index]=rt._meta={meta:rt.meta}:gt.meta&&(rt._meta={meta:gt.meta}),gt.meta&&(rt._meta.layout={meta:gt.meta})}Et.length&&(te||(te=gt._meta={}),te.data=Et)}B.createTransitionData=function(pt){pt._transitionData||(pt._transitionData={}),pt._transitionData._frames||(pt._transitionData._frames=[]),pt._transitionData._frameHash||(pt._transitionData._frameHash={}),pt._transitionData._counter||(pt._transitionData._counter=0),pt._transitionData._interruptCallbacks||(pt._transitionData._interruptCallbacks=[])},B._hasPlotType=function(pt){var gt,te=this._basePlotModules||[];for(gt=0;gt<te.length;gt++)if(te[gt].name===pt)return!0;var Et=this._modules||[];for(gt=0;gt<Et.length;gt++){var zt=Et[gt].name;if(zt===pt)return!0;var rt=w.modules[zt];if(rt&&rt.categories[pt])return!0}return!1},B.cleanPlot=function(pt,gt,te,Et){var zt,rt,Z=Et._basePlotModules||[];for(zt=0;zt<Z.length;zt++){var we=Z[zt];we.clean&&we.clean(pt,gt,te,Et)}var ot=Et._has&&Et._has("gl"),mt=gt._has&&gt._has("gl");ot&&!mt&&Et._glcontainer!==void 0&&(Et._glcontainer.selectAll(".gl-canvas").remove(),Et._glcontainer.selectAll(".no-webgl").remove(),Et._glcanvas=null);var It=!!Et._infolayer;e:for(zt=0;zt<te.length;zt++){var Yt=te[zt],Sr=Yt.uid;for(rt=0;rt<pt.length;rt++){var Op=pt[rt];if(Sr===Op.uid)continue e}It&&Et._infolayer.select(".cb"+Sr).remove()}},B.linkSubplots=function(pt,gt,te,Et){var zt,rt,Z=Et._plots||{},we=gt._plots={},ot=gt._subplots,mt={_fullData:pt,_fullLayout:gt},It=ot.cartesian||[];for(zt=0;zt<It.length;zt++){var Yt=It[zt],Sr=Z[Yt],Op=O.getFromId(mt,Yt,"x"),Hp=O.getFromId(mt,Yt,"y"),n0;for(Sr?n0=we[Yt]=Sr:(n0=we[Yt]={},n0.id=Yt),Op._counterAxes.push(Hp._id),Hp._counterAxes.push(Op._id),Op._subplotsWith.push(Yt),Hp._subplotsWith.push(Yt),n0.xaxis=Op,n0.yaxis=Hp,n0._hasClipOnAxisFalse=!1,rt=0;rt<pt.length;rt++){var R0=pt[rt];if(R0.xaxis===n0.xaxis._id&&R0.yaxis===n0.yaxis._id&&R0.cliponaxis===!1){n0._hasClipOnAxisFalse=!0;break}}}var w0=O.list(mt,null,!0),_0;for(zt=0;zt<w0.length;zt++){_0=w0[zt];var ha=null;_0.overlaying&&(ha=O.getFromId(mt,_0.overlaying),ha&&ha.overlaying&&(_0.overlaying=!1,ha=null)),_0._mainAxis=ha||_0,ha&&(_0.domain=ha.domain.slice()),_0._anchorAxis=_0.anchor==="free"?null:O.getFromId(mt,_0.anchor)}for(zt=0;zt<w0.length;zt++)if(_0=w0[zt],_0._counterAxes.sort(O.idSort),_0._subplotsWith.sort(p.subplotSort),_0._mainSubplot=it(_0,gt),_0._counterAxes.length&&(_0.spikemode&&_0.spikemode.indexOf("across")!==-1||_0.automargin&&_0.mirror&&_0.anchor!=="free"||w.getComponentMethod("rangeslider","isVisible")(_0))){var Rp=1,Gt=0;for(rt=0;rt<_0._counterAxes.length;rt++){var Gp=O.getFromId(mt,_0._counterAxes[rt]);Rp=Math.min(Rp,Gp.domain[0]),Gt=Math.max(Gt,Gp.domain[1])}Rp<Gt&&(_0._counterDomainMin=Rp,_0._counterDomainMax=Gt)}};function it(pt,gt){var te={_fullLayout:gt},Et=pt._id.charAt(0)==="x",zt=pt._mainAxis._anchorAxis,rt="",Z="",we="";if(zt&&(we=zt._mainAxis._id,rt=Et?pt._id+we:we+pt._id),!rt||!gt._plots[rt]){rt="";for(var ot=pt._counterAxes,mt=0;mt<ot.length;mt++){var It=ot[mt],Yt=Et?pt._id+It:It+pt._id;Z||(Z=Yt);var Sr=O.getFromId(te,It);if(we&&Sr.overlaying===we){rt=Yt;break}}}return rt||Z}B.clearExpandedTraceDefaultColors=function(pt){var gt,te,Et;function zt(Z,we,ot,mt){te[mt]=we,te.length=mt+1,Z.valType==="color"&&Z.dflt===void 0&&gt.push(te.join("."))}for(te=[],gt=pt._module._colorAttrs,gt||(pt._module._colorAttrs=gt=[],S.crawl(pt._module.attributes,zt)),Et=0;Et<gt.length;Et++){var rt=p.nestedProperty(pt,"_input."+gt[Et]);rt.get()||p.nestedProperty(pt,gt[Et]).set(null)}},B.supplyDataDefaults=function(pt,gt,te,Et){var zt=Et._modules,rt=Et._visibleModules,Z=Et._basePlotModules,we=0,ot,mt,It;Et._transformModules=[];function Yt(w0){gt.push(w0);var _0=w0._module;_0&&(p.pushUnique(zt,_0),w0.visible===!0&&p.pushUnique(rt,_0),p.pushUnique(Z,w0._module.basePlotModule),w0._input.visible!==!1&&we++)}var Sr={},Op=[],Hp=(te.template||{}).data||{},n0=C.traceTemplater(Hp);for(ot=0;ot<pt.length;ot++)It=pt[ot],mt=n0.newTrace(It),mt.uid=Et._traceUids[ot],B.supplyTraceDefaults(It,mt,we,Et,ot),mt.index=ot,mt._input=It,mt._fullInput=mt,Yt(mt),w.traceIs(mt,"carpetAxis")&&(Sr[mt.carpet]=mt),w.traceIs(mt,"carpetDependent")&&Op.push(ot);for(ot=0;ot<Op.length;ot++)if(mt=gt[Op[ot]],!!mt.visible){var R0=Sr[mt.carpet];if(mt._carpet=R0,!R0||!R0.visible){mt.visible=!1;continue}mt.xaxis=R0.xaxis,mt.yaxis=R0.yaxis}},B.supplyAnimationDefaults=function(pt){pt=pt||{};var gt,te={};function Et(zt,rt){return p.coerce(pt||{},te,z,zt,rt)}if(Et("mode"),Et("direction"),Et("fromcurrent"),Array.isArray(pt.frame))for(te.frame=[],gt=0;gt<pt.frame.length;gt++)te.frame[gt]=B.supplyAnimationFrameDefaults(pt.frame[gt]||{});else te.frame=B.supplyAnimationFrameDefaults(pt.frame||{});if(Array.isArray(pt.transition))for(te.transition=[],gt=0;gt<pt.transition.length;gt++)te.transition[gt]=B.supplyAnimationTransitionDefaults(pt.transition[gt]||{});else te.transition=B.supplyAnimationTransitionDefaults(pt.transition||{});return te},B.supplyAnimationFrameDefaults=function(pt){var gt={};function te(Et,zt){return p.coerce(pt||{},gt,z.frame,Et,zt)}return te("duration"),te("redraw"),gt},B.supplyAnimationTransitionDefaults=function(pt){var gt={};function te(Et,zt){return p.coerce(pt||{},gt,z.transition,Et,zt)}return te("duration"),te("easing"),gt},B.supplyFrameDefaults=function(pt){var gt={};function te(Et,zt){return p.coerce(pt,gt,I,Et,zt)}return te("group"),te("name"),te("traces"),te("baseframe"),te("data"),te("layout"),gt},B.supplyTraceDefaults=function(pt,gt,te,Et,zt){var rt=Et.colorway||F.defaults,Z=rt[te%rt.length],we;function ot(ha,Rp){return p.coerce(pt,gt,B.attributes,ha,Rp)}var mt=ot("visible");ot("type"),ot("name",Et._traceWord+" "+zt),ot("uirevision",Et.uirevision);var It=B.getModule(gt);if(gt._module=It,It){var Yt=It.basePlotModule,Sr=Yt.attr,Op=Yt.attributes;if(Sr&&Op){var Hp=Et._subplots,n0="";if(Array.isArray(Sr))for(we=0;we<Sr.length;we++){var R0=Sr[we],w0=p.coerce(pt,gt,Op,R0);Hp[R0]&&p.pushUnique(Hp[R0],w0),n0+=w0}else n0=p.coerce(pt,gt,Op,Sr);Hp[Yt.name]&&p.pushUnique(Hp[Yt.name],n0)}}if(mt&&(ot("customdata"),ot("ids"),ot("meta"),w.traceIs(gt,"showLegend")?(p.coerce(pt,gt,It.attributes.showlegend?It.attributes:B.attributes,"showlegend"),ot("legend"),ot("legendwidth"),ot("legendgroup"),ot("legendgrouptitle.text"),ot("legendrank"),gt._dfltShowLegend=!0):gt._dfltShowLegend=!1,It&&It.supplyDefaults(pt,gt,Z,Et),w.traceIs(gt,"noOpacity")||ot("opacity"),w.traceIs(gt,"notLegendIsolatable")&&(gt.visible=!!gt.visible),w.traceIs(gt,"noHover")||(gt.hovertemplate||p.coerceHoverinfo(pt,gt,Et),gt.type!=="parcats"&&w.getComponentMethod("fx","supplyDefaults")(pt,gt,Z,Et)),It&&It.selectPoints)){var _0=ot("selectedpoints");p.isTypedArray(_0)&&(gt.selectedpoints=Array.from(_0))}return gt},B.supplyLayoutGlobalDefaults=function(pt,gt,te){function Et(Yt,Sr){return p.coerce(pt,gt,B.layoutAttributes,Yt,Sr)}var zt=pt.template;p.isPlainObject(zt)&&(gt.template=zt,gt._template=zt.layout,gt._dataTemplate=zt.data),Et("autotypenumbers");var rt=p.coerceFont(Et,"font"),Z=rt.size;p.coerceFont(Et,"title.font",rt,{overrideDflt:{size:Math.round(Z*1.4)}}),Et("title.text",gt._dfltTitle.plot),Et("title.xref");var we=Et("title.yref");Et("title.pad.t"),Et("title.pad.r"),Et("title.pad.b"),Et("title.pad.l");var ot=Et("title.automargin");Et("title.x"),Et("title.xanchor"),Et("title.y"),Et("title.yanchor"),Et("title.subtitle.text",gt._dfltTitle.subtitle),p.coerceFont(Et,"title.subtitle.font",rt,{overrideDflt:{size:Math.round(gt.title.font.size*.7)}}),ot&&(we==="paper"&&(gt.title.y!==0&&(gt.title.y=1),gt.title.yanchor==="auto"&&(gt.title.yanchor=gt.title.y===0?"top":"bottom")),we==="container"&&(gt.title.y==="auto"&&(gt.title.y=1),gt.title.yanchor==="auto"&&(gt.title.yanchor=gt.title.y<.5?"bottom":"top")));var mt=Et("uniformtext.mode");mt&&Et("uniformtext.minsize"),Et("autosize",!(pt.width&&pt.height)),Et("width"),Et("height"),Et("minreducedwidth"),Et("minreducedheight"),Et("margin.l"),Et("margin.r"),Et("margin.t"),Et("margin.b"),Et("margin.pad"),Et("margin.autoexpand"),pt.width&&pt.height&&B.sanitizeMargins(gt),w.getComponentMethod("grid","sizeDefaults")(pt,gt),Et("paper_bgcolor"),Et("separators",te.decimal+te.thousands),Et("hidesources"),Et("colorway"),Et("datarevision");var It=Et("uirevision");Et("editrevision",It),Et("selectionrevision",It),w.getComponentMethod("modebar","supplyLayoutDefaults")(pt,gt),w.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(pt,gt,Et),w.getComponentMethod("selections","supplyDrawNewSelectionDefaults")(pt,gt,Et),Et("meta"),p.isPlainObject(pt.transition)&&(Et("transition.duration"),Et("transition.easing"),Et("transition.ordering")),w.getComponentMethod("calendars","handleDefaults")(pt,gt,"calendar"),w.getComponentMethod("fx","supplyLayoutGlobalDefaults")(pt,gt,Et),p.coerce(pt,gt,j,"scattermode")};function ut(pt){return typeof pt=="string"&&pt.substr(pt.length-2)==="px"&&parseFloat(pt)}B.plotAutoSize=function(pt,gt,te){var Et=pt._context||{},zt=Et.frameMargins,rt,Z,we=p.isPlotDiv(pt);if(we&&pt.emit("plotly_autosize"),Et.fillFrame)rt=window.innerWidth,Z=window.innerHeight,document.body.style.overflow="hidden";else{var ot=we?window.getComputedStyle(pt):{};if(rt=ut(ot.width)||ut(ot.maxWidth)||te.width,Z=ut(ot.height)||ut(ot.maxHeight)||te.height,E(zt)&&zt>0){var mt=1-2*zt;rt=Math.round(mt*rt),Z=Math.round(mt*Z)}}var It=B.layoutAttributes.width.min,Yt=B.layoutAttributes.height.min;rt<It&&(rt=It),Z<Yt&&(Z=Yt);var Sr=!gt.width&&Math.abs(te.width-rt)>1,Op=!gt.height&&Math.abs(te.height-Z)>1;(Op||Sr)&&(Sr&&(te.width=rt),Op&&(te.height=Z)),pt._initialAutoSize||(pt._initialAutoSize={width:rt,height:Z}),B.sanitizeMargins(te)},B.supplyLayoutModuleDefaults=function(pt,gt,te,Et){var zt=w.componentsRegistry,rt=gt._basePlotModules,Z,we,ot,mt=w.subplotsRegistry.cartesian;for(Z in zt)ot=zt[Z],ot.includeBasePlot&&ot.includeBasePlot(pt,gt);rt.length||rt.push(mt),gt._has("cartesian")&&(w.getComponentMethod("grid","contentDefaults")(pt,gt),mt.finalizeSubplots(pt,gt));for(var It in gt._subplots)gt._subplots[It].sort(p.subplotSort);for(we=0;we<rt.length;we++)ot=rt[we],ot.supplyLayoutDefaults&&ot.supplyLayoutDefaults(pt,gt,te);var Yt=gt._modules;for(we=0;we<Yt.length;we++)ot=Yt[we],ot.supplyLayoutDefaults&&ot.supplyLayoutDefaults(pt,gt,te);var Sr=gt._transformModules;for(we=0;we<Sr.length;we++)ot=Sr[we],ot.supplyLayoutDefaults&&ot.supplyLayoutDefaults(pt,gt,te,Et);for(Z in zt)ot=zt[Z],ot.supplyLayoutDefaults&&ot.supplyLayoutDefaults(pt,gt,te)},B.purge=function(pt){var gt=pt._fullLayout||{};gt._glcontainer!==void 0&&(gt._glcontainer.selectAll(".gl-canvas").remove(),gt._glcontainer.remove(),gt._glcanvas=null),gt._modeBar&&gt._modeBar.destroy(),pt._transitionData&&(pt._transitionData._interruptCallbacks&&(pt._transitionData._interruptCallbacks.length=0),pt._transitionData._animationRaf&&window.cancelAnimationFrame(pt._transitionData._animationRaf)),p.clearThrottle(),p.clearResponsive(pt),delete pt.data,delete pt.layout,delete pt._fullData,delete pt._fullLayout,delete pt.calcdata,delete pt.empty,delete pt.fid,delete pt.undoqueue,delete pt.undonum,delete pt.autoplay,delete pt.changed,delete pt._promises,delete pt._redrawTimer,delete pt._hmlumcount,delete pt._hmpixcount,delete pt._transitionData,delete pt._transitioning,delete pt._initialAutoSize,delete pt._transitioningWithDuration,delete pt._dragging,delete pt._dragged,delete pt._dragdata,delete pt._hoverdata,delete pt._snapshotInProgress,delete pt._editing,delete pt._mouseDownTime,delete pt._legendMouseDownTime,pt.removeAllListeners&&pt.removeAllListeners()},B.style=function(pt){var gt=pt._fullLayout._visibleModules,te=[],Et;for(Et=0;Et<gt.length;Et++){var zt=gt[Et];zt.style&&p.pushUnique(te,zt.style)}for(Et=0;Et<te.length;Et++)te[Et](pt)},B.sanitizeMargins=function(pt){if(!(!pt||!pt.margin)){var gt=pt.width,te=pt.height,Et=pt.margin,zt=gt-(Et.l+Et.r),rt=te-(Et.t+Et.b),Z;zt<0&&(Z=(gt-1)/(Et.l+Et.r),Et.l=Math.floor(Z*Et.l),Et.r=Math.floor(Z*Et.r)),rt<0&&(Z=(te-1)/(Et.t+Et.b),Et.t=Math.floor(Z*Et.t),Et.b=Math.floor(Z*Et.b))}},B.clearAutoMarginIds=function(pt){pt._fullLayout._pushmarginIds={}},B.allowAutoMargin=function(pt,gt){pt._fullLayout._pushmarginIds[gt]=1};function vt(pt){var gt=pt.margin;if(!pt._size){var te=pt._size={l:Math.round(gt.l),r:Math.round(gt.r),t:Math.round(gt.t),b:Math.round(gt.b),p:Math.round(gt.pad)};te.w=Math.round(pt.width)-te.l-te.r,te.h=Math.round(pt.height)-te.t-te.b}pt._pushmargin||(pt._pushmargin={}),pt._pushmarginIds||(pt._pushmarginIds={}),pt._reservedMargin||(pt._reservedMargin={})}var _t=2,Le=2;B.autoMargin=function(pt,gt,te){var Et=pt._fullLayout,zt=Et.width,rt=Et.height,Z=Et.margin,we=Et.minreducedwidth,ot=Et.minreducedheight,mt=p.constrain(zt-Z.l-Z.r,_t,we),It=p.constrain(rt-Z.t-Z.b,Le,ot),Yt=Math.max(0,zt-mt),Sr=Math.max(0,rt-It),Op=Et._pushmargin,Hp=Et._pushmarginIds;if(Z.autoexpand!==!1){if(!te)delete Op[gt],delete Hp[gt];else{var n0=te.pad;if(n0===void 0&&(n0=Math.min(12,Z.l,Z.r,Z.t,Z.b)),Yt){var R0=(te.l+te.r)/Yt;R0>1&&(te.l/=R0,te.r/=R0)}if(Sr){var w0=(te.t+te.b)/Sr;w0>1&&(te.t/=w0,te.b/=w0)}var _0=te.xl!==void 0?te.xl:te.x,ha=te.xr!==void 0?te.xr:te.x,Rp=te.yt!==void 0?te.yt:te.y,Gt=te.yb!==void 0?te.yb:te.y;Op[gt]={l:{val:_0,size:te.l+n0},r:{val:ha,size:te.r+n0},b:{val:Gt,size:te.b+n0},t:{val:Rp,size:te.t+n0}},Hp[gt]=1}if(!Et._replotting)return B.doAutoMargin(pt)}};function wt(pt){if("_redrawFromAutoMarginCount"in pt._fullLayout)return!1;var gt=O.list(pt,"",!0);for(var te in gt)if(gt[te].autoshift||gt[te].shift)return!0;return!1}B.doAutoMargin=function(pt){var gt=pt._fullLayout,te=gt.width,Et=gt.height;gt._size||(gt._size={}),vt(gt);var zt=gt._size,rt=gt.margin,Z={t:0,b:0,l:0,r:0},we=p.extendFlat({},zt),ot=rt.l,mt=rt.r,It=rt.t,Yt=rt.b,Sr=gt._pushmargin,Op=gt._pushmarginIds,Hp=gt.minreducedwidth,n0=gt.minreducedheight;if(rt.autoexpand!==!1){for(var R0 in Sr)Op[R0]||delete Sr[R0];var w0=pt._fullLayout._reservedMargin;for(var _0 in w0)for(var ha in w0[_0]){var Rp=w0[_0][ha];Z[ha]=Math.max(Z[ha],Rp)}Sr.base={l:{val:0,size:ot},r:{val:1,size:mt},t:{val:1,size:It},b:{val:0,size:Yt}};for(var Gt in Z){var Gp=0;for(var c0 in Sr)c0!=="base"&&E(Sr[c0][Gt].size)&&(Gp=Sr[c0][Gt].size>Gp?Sr[c0][Gt].size:Gp);var M0=Math.max(0,rt[Gt]-Gp);Z[Gt]=Math.max(0,Z[Gt]-M0)}for(var I0 in Sr){var k0=Sr[I0].l||{},V0=Sr[I0].b||{},$0=k0.val,W0=k0.size,gm=V0.val,F0=V0.size,bm=te-Z.r-Z.l,Dm=Et-Z.t-Z.b;for(var vm in Sr){if(E(W0)&&Sr[vm].r){var km=Sr[vm].r.val,Yo=Sr[vm].r.size;if(km>$0){var qp=(W0*km+(Yo-bm)*$0)/(km-$0),Mt=(Yo*(1-$0)+(W0-bm)*(1-km))/(km-$0);qp+Mt>ot+mt&&(ot=qp,mt=Mt)}}if(E(F0)&&Sr[vm].t){var Wt=Sr[vm].t.val,xn=Sr[vm].t.size;if(Wt>gm){var Fp=(F0*Wt+(xn-Dm)*gm)/(Wt-gm),Bp=(xn*(1-gm)+(F0-Dm)*(1-Wt))/(Wt-gm);Fp+Bp>Yt+It&&(Yt=Fp,It=Bp)}}}}}var e0=p.constrain(te-rt.l-rt.r,_t,Hp),o0=p.constrain(Et-rt.t-rt.b,Le,n0),C0=Math.max(0,te-e0),T0=Math.max(0,Et-o0);if(C0){var A0=(ot+mt)/C0;A0>1&&(ot/=A0,mt/=A0)}if(T0){var J0=(Yt+It)/T0;J0>1&&(Yt/=J0,It/=J0)}if(zt.l=Math.round(ot)+Z.l,zt.r=Math.round(mt)+Z.r,zt.t=Math.round(It)+Z.t,zt.b=Math.round(Yt)+Z.b,zt.p=Math.round(rt.pad),zt.w=Math.round(te)-zt.l-zt.r,zt.h=Math.round(Et)-zt.t-zt.b,!gt._replotting&&(B.didMarginChange(we,zt)||wt(pt))){"_redrawFromAutoMarginCount"in gt?gt._redrawFromAutoMarginCount++:gt._redrawFromAutoMarginCount=1;var em=3*(1+Object.keys(Op).length);if(gt._redrawFromAutoMarginCount<em)return w.call("_doPlot",pt);gt._size=we,p.warn("Too many auto-margin redraws.")}St(pt)};function St(pt){var gt=O.list(pt,"",!0);["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(te){for(var Et=0;Et<gt.length;Et++){var zt=gt[Et][te];zt&&zt()}})}var Ut=["l","r","t","b","p","w","h"];B.didMarginChange=function(pt,gt){for(var te=0;te<Ut.length;te++){var Et=Ut[te],zt=pt[Et],rt=gt[Et];if(!E(zt)||Math.abs(rt-zt)>1)return!0}return!1},B.graphJson=function(pt,gt,te,Et,zt,rt){(zt&&gt&&!pt._fullData||zt&&!gt&&!pt._fullLayout)&&B.supplyDefaults(pt);var Z=zt?pt._fullData:pt.data,we=zt?pt._fullLayout:pt.layout,ot=(pt._transitionData||{})._frames;function mt(Sr,Op){if(typeof Sr=="function")return Op?"_function_":null;if(p.isPlainObject(Sr)){var Hp={},n0;return Object.keys(Sr).sort().forEach(function(ha){if(["_","["].indexOf(ha.charAt(0))===-1){if(typeof Sr[ha]=="function"){Op&&(Hp[ha]="_function");return}if(te==="keepdata"){if(ha.substr(ha.length-3)==="src")return}else if(te==="keepstream"){if(n0=Sr[ha+"src"],typeof n0=="string"&&n0.indexOf(":")>0&&!p.isPlainObject(Sr.stream))return}else if(te!=="keepall"&&(n0=Sr[ha+"src"],typeof n0=="string"&&n0.indexOf(":")>0))return;Hp[ha]=mt(Sr[ha],Op)}}),Hp}var R0=Array.isArray(Sr),w0=p.isTypedArray(Sr);if((R0||w0)&&Sr.dtype&&Sr.shape){var _0=Sr.bdata;return mt({dtype:Sr.dtype,shape:Sr.shape,bdata:p.isArrayBuffer(_0)?b.encode(_0):_0},Op)}return R0?Sr.map(function(ha){return mt(ha,Op)}):w0?p.simpleMap(Sr,p.identity):p.isJSDate(Sr)?p.ms2DateTimeLocal(+Sr):Sr}var It={data:(Z||[]).map(function(Sr){var Op=mt(Sr);return gt&&delete Op.fit,Op})};if(!gt&&(It.layout=mt(we),zt)){var Yt=we._size;It.layout.computed={margin:{b:Yt.b,l:Yt.l,r:Yt.r,t:Yt.t}}}return ot&&(It.frames=mt(ot)),rt&&(It.config=mt(pt._context,!0)),Et==="object"?It:JSON.stringify(It)},B.modifyFrames=function(pt,gt){var te,Et,zt,rt=pt._transitionData._frames,Z=pt._transitionData._frameHash;for(te=0;te<gt.length;te++)switch(Et=gt[te],Et.type){case"replace":zt=Et.value;var we=(rt[Et.index]||{}).name,ot=zt.name;rt[Et.index]=Z[ot]=zt,ot!==we&&(delete Z[we],Z[ot]=zt);break;case"insert":zt=Et.value,Z[zt.name]=zt,rt.splice(Et.index,0,zt);break;case"delete":zt=rt[Et.index],delete Z[zt.name],rt.splice(Et.index,1);break}return Promise.resolve()},B.computeFrame=function(pt,gt){var te=pt._transitionData._frameHash,Et,zt,rt,Z;if(!gt)throw new Error("computeFrame must be given a string frame name");var we=te[gt.toString()];if(!we)return!1;for(var ot=[we],mt=[we.name];we.baseframe&&(we=te[we.baseframe.toString()])&&mt.indexOf(we.name)===-1;)ot.push(we),mt.push(we.name);for(var It={};we=ot.pop();)if(we.layout&&(It.layout=B.extendLayout(It.layout,we.layout)),we.data){if(It.data||(It.data=[]),zt=we.traces,!zt)for(zt=[],Et=0;Et<we.data.length;Et++)zt[Et]=Et;for(It.traces||(It.traces=[]),Et=0;Et<we.data.length;Et++)rt=zt[Et],rt!=null&&(Z=It.traces.indexOf(rt),Z===-1&&(Z=It.data.length,It.traces[Z]=rt),It.data[Z]=B.extendTrace(It.data[Z],we.data[Et]))}return It},B.recomputeFrameHash=function(pt){for(var gt=pt._transitionData._frameHash={},te=pt._transitionData._frames,Et=0;Et<te.length;Et++){var zt=te[Et];zt&&zt.name&&(gt[zt.name]=zt)}},B.extendObjectWithContainers=function(pt,gt,te){var Et,zt,rt,Z,we,ot,mt,It,Yt=p.extendDeepNoArrays({},gt||{}),Sr=p.expandObjectPaths(Yt),Op={};if(te&&te.length)for(rt=0;rt<te.length;rt++)Et=p.nestedProperty(Sr,te[rt]),zt=Et.get(),zt===void 0?p.nestedProperty(Op,te[rt]).set(null):(Et.set(null),p.nestedProperty(Op,te[rt]).set(zt));if(pt=p.extendDeepNoArrays(pt||{},Sr),te&&te.length){for(rt=0;rt<te.length;rt++)if(we=p.nestedProperty(Op,te[rt]),mt=we.get(),!!mt){for(ot=p.nestedProperty(pt,te[rt]),It=ot.get(),Array.isArray(It)||(It=[],ot.set(It)),Z=0;Z<mt.length;Z++){var Hp=mt[Z];Hp===null?It[Z]=null:It[Z]=B.extendObjectWithContainers(It[Z],Hp)}ot.set(It)}}return pt},B.dataArrayContainers=["transforms","dimensions"],B.layoutArrayContainers=w.layoutArrayContainers,B.extendTrace=function(pt,gt){return B.extendObjectWithContainers(pt,gt,B.dataArrayContainers)},B.extendLayout=function(pt,gt){return B.extendObjectWithContainers(pt,gt,B.layoutArrayContainers)},B.transition=function(pt,gt,te,Et,zt,rt){var Z={redraw:zt.redraw},we={},ot=[];return Z.prepareFn=function(){for(var mt=Array.isArray(gt)?gt.length:0,It=Et.slice(0,mt),Yt=0;Yt<It.length;Yt++){var Sr=It[Yt],Op=pt._fullData[Sr],Hp=Op._module;if(Hp){if(Hp.animatable){var n0=Hp.basePlotModule.name;we[n0]||(we[n0]=[]),we[n0].push(Sr)}pt.data[It[Yt]]=B.extendTrace(pt.data[It[Yt]],gt[Yt])}}var R0=p.expandObjectPaths(p.extendDeepNoArrays({},te)),w0=/^[xy]axis[0-9]*$/;for(var _0 in R0)w0.test(_0)&&delete R0[_0].range;B.extendLayout(pt.layout,R0),delete pt.calcdata,B.supplyDefaults(pt),B.doCalcdata(pt);var ha=p.expandObjectPaths(te);if(ha){var Rp=pt._fullLayout._plots;for(var Gt in Rp){var Gp=Rp[Gt],c0=Gp.xaxis,M0=Gp.yaxis,I0=c0.range.slice(),k0=M0.range.slice(),V0=null,$0=null,W0=null,gm=null;Array.isArray(ha[c0._name+".range"])?V0=ha[c0._name+".range"].slice():Array.isArray((ha[c0._name]||{}).range)&&(V0=ha[c0._name].range.slice()),Array.isArray(ha[M0._name+".range"])?$0=ha[M0._name+".range"].slice():Array.isArray((ha[M0._name]||{}).range)&&($0=ha[M0._name].range.slice()),I0&&V0&&(c0.r2l(I0[0])!==c0.r2l(V0[0])||c0.r2l(I0[1])!==c0.r2l(V0[1]))&&(W0={xr0:I0,xr1:V0}),k0&&$0&&(M0.r2l(k0[0])!==M0.r2l($0[0])||M0.r2l(k0[1])!==M0.r2l($0[1]))&&(gm={yr0:k0,yr1:$0}),(W0||gm)&&ot.push(p.extendFlat({plotinfo:Gp},W0,gm))}}return Promise.resolve()},Z.runFn=function(mt){var It,Yt=pt._fullLayout._basePlotModules,Sr=ot.length,Op;if(te)for(Op=0;Op<Yt.length;Op++)Yt[Op].transitionAxes&&Yt[Op].transitionAxes(pt,ot,rt,mt);Sr?(It=p.extendFlat({},rt),It.duration=0,delete we.cartesian):It=rt;for(var Hp in we){var n0=we[Hp],R0=pt._fullData[n0[0]]._module;R0.basePlotModule.plot(pt,n0,It,mt)}},kt(pt,rt,Z)},B.transitionFromReact=function(pt,gt,te,Et){var zt=pt._fullLayout,rt=zt.transition,Z={},we=[];return Z.prepareFn=function(){var ot=zt._plots;Z.redraw=!1,gt.anim==="some"&&(Z.redraw=!0),te.anim==="some"&&(Z.redraw=!0);for(var mt in ot){var It=ot[mt],Yt=It.xaxis,Sr=It.yaxis,Op=Et[Yt._name].range.slice(),Hp=Et[Sr._name].range.slice(),n0=Yt.range.slice(),R0=Sr.range.slice();Yt.setScale(),Sr.setScale();var w0=null,_0=null;(Yt.r2l(Op[0])!==Yt.r2l(n0[0])||Yt.r2l(Op[1])!==Yt.r2l(n0[1]))&&(w0={xr0:Op,xr1:n0}),(Sr.r2l(Hp[0])!==Sr.r2l(R0[0])||Sr.r2l(Hp[1])!==Sr.r2l(R0[1]))&&(_0={yr0:Hp,yr1:R0}),(w0||_0)&&we.push(p.extendFlat({plotinfo:It},w0,_0))}return Promise.resolve()},Z.runFn=function(ot){for(var mt=pt._fullData,It=pt._fullLayout,Yt=It._basePlotModules,Sr,Op,Hp,n0=[],R0=0;R0<mt.length;R0++)n0.push(R0);function w0(){if(pt._fullLayout)for(var ha=0;ha<Yt.length;ha++)Yt[ha].transitionAxes&&Yt[ha].transitionAxes(pt,we,Sr,ot)}function _0(){if(pt._fullLayout)for(var ha=0;ha<Yt.length;ha++)Yt[ha].plot(pt,Hp,Op,ot)}we.length&&gt.anim?rt.ordering==="traces first"?(Sr=p.extendFlat({},rt,{duration:0}),Hp=n0,Op=rt,setTimeout(w0,rt.duration),_0()):(Sr=rt,Hp=null,Op=p.extendFlat({},rt,{duration:0}),setTimeout(_0,Sr.duration),w0()):we.length?(Sr=rt,w0()):gt.anim&&(Hp=n0,Op=rt,_0())},kt(pt,rt,Z)};function kt(pt,gt,te){var Et=!1;function zt(Yt){var Sr=Promise.resolve();if(!Yt)return Sr;for(;Yt.length;)Sr=Sr.then(Yt.shift());return Sr}function rt(Yt){if(Yt)for(;Yt.length;)Yt.shift()}function Z(){return pt.emit("plotly_transitioning",[]),new Promise(function(Yt){pt._transitioning=!0,gt.duration>0&&(pt._transitioningWithDuration=!0),pt._transitionData._interruptCallbacks.push(function(){Et=!0}),te.redraw&&pt._transitionData._interruptCallbacks.push(function(){return w.call("redraw",pt)}),pt._transitionData._interruptCallbacks.push(function(){pt.emit("plotly_transitioninterrupted",[])});var Sr=0,Op=0;function Hp(){return Sr++,function(){Op++,!Et&&Op===Sr&&we(Yt)}}te.runFn(Hp),setTimeout(Hp())})}function we(Yt){if(pt._transitionData)return rt(pt._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(te.redraw)return w.call("redraw",pt)}).then(function(){pt._transitioning=!1,pt._transitioningWithDuration=!1,pt.emit("plotly_transitioned",[])}).then(Yt)}function ot(){if(pt._transitionData)return pt._transitioning=!1,zt(pt._transitionData._interruptCallbacks)}var mt=[B.previousPromises,ot,te.prepareFn,B.rehover,B.reselect,Z],It=p.syncOrAsync(mt,pt);return(!It||!It.then)&&(It=Promise.resolve()),It.then(function(){return pt})}B.doCalcdata=function(pt,gt){var te=O.list(pt),Et=pt._fullData,zt=pt._fullLayout,rt,Z,we,ot,mt=new Array(Et.length),It=(pt.calcdata||[]).slice();for(pt.calcdata=mt,zt._numBoxes=0,zt._numViolins=0,zt._violinScaleGroupStats={},pt._hmpixcount=0,pt._hmlumcount=0,zt._piecolormap={},zt._sunburstcolormap={},zt._treemapcolormap={},zt._iciclecolormap={},zt._funnelareacolormap={},we=0;we<Et.length;we++)if(Array.isArray(gt)&&gt.indexOf(we)===-1){mt[we]=It[we];continue}for(we=0;we<Et.length;we++)rt=Et[we],rt._arrayAttrs=S.findArrayAttributes(rt),rt._extremes={};var Yt=zt._subplots.polar||[];for(we=0;we<Yt.length;we++)te.push(zt[Yt[we]].radialaxis,zt[Yt[we]].angularaxis);for(var Sr in zt._colorAxes){var Op=zt[Sr];Op.cauto!==!1&&(delete Op.cmin,delete Op.cmax)}var Hp=!1;function n0(_0){if(rt=Et[_0],Z=rt._module,rt.visible===!0&&rt.transforms){if(Z&&Z.calc){var ha=Z.calc(pt,rt);ha[0]&&ha[0].t&&ha[0].t._scene&&delete ha[0].t._scene.dirty}for(ot=0;ot<rt.transforms.length;ot++){var Rp=rt.transforms[ot];Z=transformsRegistry[Rp.type],Z&&Z.calcTransform&&(rt._hasCalcTransform=!0,Hp=!0,Z.calcTransform(pt,rt,Rp))}}}function R0(_0,ha){if(rt=Et[_0],Z=rt._module,!!Z.isContainer===ha){var Rp=[];if(rt.visible===!0&&rt._length!==0){delete rt._indexToPoints;var Gt=rt.transforms||[];for(ot=Gt.length-1;ot>=0;ot--)if(Gt[ot].enabled){rt._indexToPoints=Gt[ot]._indexToPoints;break}Z&&Z.calc&&(Rp=Z.calc(pt,rt))}(!Array.isArray(Rp)||!Rp[0])&&(Rp=[{x:A,y:A}]),Rp[0].t||(Rp[0].t={}),Rp[0].trace=rt,mt[_0]=Rp}}for(ca(te,Et,zt),we=0;we<Et.length;we++)R0(we,!0);for(we=0;we<Et.length;we++)n0(we);for(Hp&&ca(te,Et,zt),we=0;we<Et.length;we++)R0(we,!0);for(we=0;we<Et.length;we++)R0(we,!1);Cp(pt);var w0=aa(te,pt);if(w0.length){for(zt._numBoxes=0,zt._numViolins=0,we=0;we<w0.length;we++)R0(w0[we],!0);for(we=0;we<w0.length;we++)R0(w0[we],!1);Cp(pt)}w.getComponentMethod("fx","calc")(pt),w.getComponentMethod("errorbars","calc")(pt)};var jt=/(total|sum|min|max|mean|geometric mean|median) (ascending|descending)/;function aa(pt,gt){var te=[],Et,zt,rt,Z,we;function ot(vm,km,Yo){var qp=km._id.charAt(0);if(vm==="histogram2dcontour"){var Mt=km._counterAxes[0],Wt=O.getFromId(gt,Mt),xn=qp==="x"||Mt==="x"&&Wt.type==="category",Fp=qp==="y"||Mt==="y"&&Wt.type==="category";return function(Bp,e0){return Bp===0||e0===0||xn&&Bp===Yo[e0].length-1||Fp&&e0===Yo.length-1?-1:(qp==="y"?e0:Bp)-1}}else return function(Bp,e0){return qp==="y"?e0:Bp}}var mt={min:function(vm){return p.aggNums(Math.min,null,vm)},max:function(vm){return p.aggNums(Math.max,null,vm)},sum:function(vm){return p.aggNums(function(km,Yo){return km+Yo},null,vm)},total:function(vm){return p.aggNums(function(km,Yo){return km+Yo},null,vm)},mean:function(vm){return p.mean(vm)},"geometric mean":function(vm){return p.geometricMean(vm)},median:function(vm){return p.median(vm)}};function It(vm,km){return vm[1]-km[1]}function Yt(vm,km){return km[1]-vm[1]}for(Et=0;Et<pt.length;Et++){var Sr=pt[Et];if(Sr.type==="category"){var Op=Sr.categoryorder.match(jt);if(Op){var Hp=Op[1],n0=Op[2],R0=Sr._id.charAt(0),w0=R0==="x",_0=[];for(zt=0;zt<Sr._categories.length;zt++)_0.push([Sr._categories[zt],[]]);for(zt=0;zt<Sr._traceIndices.length;zt++){var ha=Sr._traceIndices[zt],Rp=gt._fullData[ha];if(Rp.visible===!0){var Gt=Rp.type;w.traceIs(Rp,"histogram")&&(delete Rp._xautoBinFinished,delete Rp._yautoBinFinished);var Gp=Gt==="splom",c0=Gt==="scattergl",M0=gt.calcdata[ha];for(rt=0;rt<M0.length;rt++){var I0=M0[rt],k0,V0;if(Gp){var $0=Rp._axesDim[Sr._id];if(!w0){var W0=Rp._diag[$0][0];W0&&(Sr=gt._fullLayout[O.id2name(W0)])}var gm=I0.trace.dimensions[$0].values;for(Z=0;Z<gm.length;Z++)for(k0=Sr._categoriesMap[gm[Z]],we=0;we<I0.trace.dimensions.length;we++)if(we!==$0){var F0=I0.trace.dimensions[we];_0[k0][1].push(F0.values[Z])}}else if(c0){for(Z=0;Z<I0.t.x.length;Z++)w0?(k0=I0.t.x[Z],V0=I0.t.y[Z]):(k0=I0.t.y[Z],V0=I0.t.x[Z]),_0[k0][1].push(V0);I0.t&&I0.t._scene&&delete I0.t._scene.dirty}else if(I0.hasOwnProperty("z")){V0=I0.z;var bm=ot(Rp.type,Sr,V0);for(Z=0;Z<V0.length;Z++)for(we=0;we<V0[Z].length;we++)k0=bm(we,Z),k0+1&&_0[k0][1].push(V0[Z][we])}else for(k0=I0.p,k0===void 0&&(k0=I0[R0]),V0=I0.s,V0===void 0&&(V0=I0.v),V0===void 0&&(V0=w0?I0.y:I0.x),Array.isArray(V0)||(V0===void 0?V0=[]:V0=[V0]),Z=0;Z<V0.length;Z++)_0[k0][1].push(V0[Z])}}}Sr._categoriesValue=_0;var Dm=[];for(zt=0;zt<_0.length;zt++)Dm.push([_0[zt][0],mt[Hp](_0[zt][1])]);Dm.sort(n0==="descending"?Yt:It),Sr._categoriesAggregatedValue=Dm,Sr._initialCategories=Dm.map(function(vm){return vm[0]}),te=te.concat(Sr.sortByInitialCategories())}}}return te}function ca(pt,gt,te){var Et={};function zt(ot){ot.clearCalc(),ot.type==="multicategory"&&ot.setupMultiCategory(gt),Et[ot._id]=1}p.simpleMap(pt,zt);for(var rt=te._axisMatchGroups||[],Z=0;Z<rt.length;Z++)for(var we in rt[Z])Et[we]||zt(te[O.id2name(we)])}function Cp(pt){var gt=pt._fullLayout,te=gt._visibleModules,Et={},zt,rt,Z;for(rt=0;rt<te.length;rt++){var we=te[rt],ot=we.crossTraceCalc;if(ot){var mt=we.basePlotModule.name;Et[mt]?p.pushUnique(Et[mt],ot):Et[mt]=[ot]}}for(Z in Et){var It=Et[Z],Yt=gt._subplots[Z];if(Array.isArray(Yt))for(zt=0;zt<Yt.length;zt++){var Sr=Yt[zt],Op=Z==="cartesian"?gt._plots[Sr]:gt[Sr];for(rt=0;rt<It.length;rt++)It[rt](pt,Op,Sr)}else for(rt=0;rt<It.length;rt++)It[rt](pt)}}B.rehover=function(pt){pt._fullLayout._rehover&&pt._fullLayout._rehover()},B.redrag=function(pt){pt._fullLayout._redrag&&pt._fullLayout._redrag()},B.reselect=function(pt){var gt=pt._fullLayout,te=(pt.layout||{}).selections,Et=gt._previousSelections;gt._previousSelections=te;var zt=gt._reselect||JSON.stringify(te)!==JSON.stringify(Et);w.getComponentMethod("selections","reselect")(pt,zt)},B.generalUpdatePerTraceModule=function(pt,gt,te,Et){var zt=gt.traceHash,rt={},Z;for(Z=0;Z<te.length;Z++){var we=te[Z],ot=we[0].trace;ot.visible&&(rt[ot.type]=rt[ot.type]||[],rt[ot.type].push(we))}for(var mt in zt)if(!rt[mt]){var It=zt[mt][0],Yt=It[0].trace;Yt.visible=!1,rt[mt]=[It]}for(var Sr in rt){var Op=rt[Sr],Hp=Op[0][0].trace._module;Hp.plot(pt,gt,p.filterVisible(Op),Et)}gt.traceHash=rt},B.plotBasePlot=function(pt,gt,te,Et,zt){var rt=w.getModule(pt),Z=G(gt.calcdata,rt)[0];rt.plot(gt,Z,Et,zt)},B.cleanBasePlot=function(pt,gt,te,Et,zt){var rt=zt._has&&zt._has(pt),Z=te._has&&te._has(pt);rt&&!Z&&zt["_"+pt+"layer"].selectAll("g.trace").remove()}}),Ag=r(nt=>{nt.xmlns="http://www.w3.org/2000/xmlns/",nt.svg="http://www.w3.org/2000/svg",nt.xlink="http://www.w3.org/1999/xlink",nt.svgAttrs={xmlns:nt.svg,"xmlns:xlink":nt.xlink}}),K1=r((nt,ke)=>{ke.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}}),G1=r(nt=>{var ke=o(),_=et(),d=_.strTranslate,m=Ag(),E=K1().LINE_SPACING,b=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;nt.convertToTspans=function(Le,wt,St){var Ut=Le.text(),kt=!Le.attr("data-notex")&&wt&&wt._context.typesetMath&&typeof MathJax<"u"&&Ut.match(b),jt=ke.select(Le.node().parentNode);if(jt.empty())return;var aa=Le.attr("class")?Le.attr("class").split(" ")[0]:"text";aa+="-math",jt.selectAll("svg."+aa).remove(),jt.selectAll("g."+aa+"-group").remove(),Le.style("display",null).attr({"data-unformatted":Ut,"data-math":"N"});function ca(){jt.empty()||(aa=Le.attr("class")+"-math",jt.select("svg."+aa).remove()),Le.text("").style("white-space","pre");var Cp=it(Le.node(),Ut);Cp&&Le.style("pointer-events","all"),nt.positionText(Le),St&&St.call(Le)}return kt?(wt&&wt._promises||[]).push(new Promise(function(Cp){Le.style("display","none");var pt=parseInt(Le.node().style.fontSize,10),gt={fontSize:pt};F(kt[2],gt,function(te,Et,zt){jt.selectAll("svg."+aa).remove(),jt.selectAll("g."+aa+"-group").remove();var rt=te&&te.select("svg");if(!rt||!rt.node()){ca(),Cp();return}var Z=jt.append("g").classed(aa+"-group",!0).attr({"pointer-events":"none","data-unformatted":Ut,"data-math":"Y"});Z.node().appendChild(rt.node()),Et&&Et.node()&&rt.node().insertBefore(Et.node().cloneNode(!0),rt.node().firstChild);var we=zt.width,ot=zt.height;rt.attr({class:aa,height:ot,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var mt=Le.node().style.fill||"black",It=rt.select("g");It.attr({fill:mt,stroke:mt});var Yt=It.node().getBoundingClientRect(),Sr=Yt.width,Op=Yt.height;(Sr>we||Op>ot)&&(rt.style("overflow","hidden"),Yt=rt.node().getBoundingClientRect(),Sr=Yt.width,Op=Yt.height);var Hp=+Le.attr("x"),n0=+Le.attr("y"),R0=pt||Le.node().getBoundingClientRect().height,w0=-R0/4;if(aa[0]==="y")Z.attr({transform:"rotate("+[-90,Hp,n0]+")"+d(-Sr/2,w0-Op/2)});else if(aa[0]==="l")n0=w0-Op/2;else if(aa[0]==="a"&&aa.indexOf("atitle")!==0)Hp=0,n0=w0;else{var _0=Le.attr("text-anchor");Hp=Hp-Sr*(_0==="middle"?.5:_0==="end"?1:0),n0=n0+w0-Op/2}rt.attr({x:Hp,y:n0}),St&&St.call(Le,Z),Cp(Z)})})):ca(),Le};var w=/(<|&lt;|&#60;)/g,S=/(>|&gt;|&#62;)/g;function C(Le){return Le.replace(w,"\\lt ").replace(S,"\\gt ")}var p=[["$","$"],["\\(","\\)"]];function F(Le,wt,St){var Ut=parseInt((MathJax.version||"").split(".")[0]);if(Ut!==2&&Ut!==3){_.warn("No MathJax version:",MathJax.version);return}var kt,jt,aa,ca,Cp=function(){return jt=_.extendDeepAll({},MathJax.Hub.config),aa=MathJax.Hub.processSectionDelay,MathJax.Hub.processSectionDelay!==void 0&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:p},displayAlign:"left"})},pt=function(){jt=_.extendDeepAll({},MathJax.config),MathJax.config.tex||(MathJax.config.tex={}),MathJax.config.tex.inlineMath=p},gt=function(){if(kt=MathJax.Hub.config.menuSettings.renderer,kt!=="SVG")return MathJax.Hub.setRenderer("SVG")},te=function(){kt=MathJax.config.startup.output,kt!=="svg"&&(MathJax.config.startup.output="svg")},Et=function(){var mt="math-output-"+_.randstr({},64);ca=ke.select("body").append("div").attr({id:mt}).style({visibility:"hidden",position:"absolute","font-size":wt.fontSize+"px"}).text(C(Le));var It=ca.node();return Ut===2?MathJax.Hub.Typeset(It):MathJax.typeset([It])},zt=function(){var mt=ca.select(Ut===2?".MathJax_SVG":".MathJax"),It=!mt.empty()&&ca.select("svg").node();if(!It)_.log("There was an error in the tex syntax.",Le),St();else{var Yt=It.getBoundingClientRect(),Sr;Ut===2?Sr=ke.select("body").select("#MathJax_SVG_glyphs"):Sr=mt.select("defs"),St(mt,Sr,Yt)}ca.remove()},rt=function(){if(kt!=="SVG")return MathJax.Hub.setRenderer(kt)},Z=function(){kt!=="svg"&&(MathJax.config.startup.output=kt)},we=function(){return aa!==void 0&&(MathJax.Hub.processSectionDelay=aa),MathJax.Hub.Config(jt)},ot=function(){MathJax.config=jt};Ut===2?MathJax.Hub.Queue(Cp,gt,Et,zt,rt,we):Ut===3&&(pt(),te(),MathJax.startup.defaultReady(),MathJax.startup.promise.then(function(){Et(),zt(),Z(),ot()}))}var A={sup:"font-size:70%",sub:"font-size:70%",s:"text-decoration:line-through",u:"text-decoration:underline",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},O={sub:"0.3em",sup:"-0.6em"},$={sub:"-0.21em",sup:"0.42em"},j="",z=["http:","https:","mailto:","",void 0,":"],I=nt.NEWLINES=/(\r\n?|\n)/g,G=/(<[^<>]*>)/,M=/<(\/?)([^ >]*)(\s+(.*))?>/i,L=/<br(\s+.*)?>/i;nt.BR_TAG_ALL=/<br(\s+.*)?>/gi;var B=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,X=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,ee=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,yt=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function Ze(Le,wt){if(!Le)return null;var St=Le.match(wt),Ut=St&&(St[3]||St[4]);return Ut&&tt(Ut)}var Re=/(^|;)\s*color:/;nt.plainText=function(Le,wt){wt=wt||{};for(var St=wt.len!==void 0&&wt.len!==-1?wt.len:1/0,Ut=wt.allowedTags!==void 0?wt.allowedTags:["br"],kt="...",jt=kt.length,aa=Le.split(G),ca=[],Cp="",pt=0,gt=0;gt<aa.length;gt++){var te=aa[gt],Et=te.match(M),zt=Et&&Et[2].toLowerCase();if(zt)Ut.indexOf(zt)!==-1&&(ca.push(te),Cp=zt);else{var rt=te.length;if(pt+rt<St)ca.push(te),pt+=rt;else if(pt<St){var Z=St-pt;Cp&&(Cp!=="br"||Z<=jt||rt<=jt)&&ca.pop(),St>jt?ca.push(te.substr(0,Z-jt)+kt):ca.push(te.substr(0,Z));break}Cp=""}}return ca.join("")};var Q={mu:"",amp:"&",lt:"<",gt:">",nbsp:"",times:"",plusmn:"",deg:""},xt=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function tt(Le){return Le.replace(xt,function(wt,St){var Ut;return St.charAt(0)==="#"?Ut=ht(St.charAt(1)==="x"?parseInt(St.substr(2),16):parseInt(St.substr(1),10)):Ut=Q[St],Ut||wt})}nt.convertEntities=tt;function ht(Le){if(!(Le>1114111)){var wt=String.fromCodePoint;if(wt)return wt(Le);var St=String.fromCharCode;return Le<=65535?St(Le):St((Le>>10)+55232,Le%1024+56320)}}function it(Le,wt){wt=wt.replace(I," ");var St=!1,Ut=[],kt,jt=-1;function aa(){jt++;var Op=document.createElementNS(m.svg,"tspan");ke.select(Op).attr({class:"line",dy:jt*E+"em"}),Le.appendChild(Op),kt=Op;var Hp=Ut;if(Ut=[{node:Op}],Hp.length>1)for(var n0=1;n0<Hp.length;n0++)ca(Hp[n0])}function ca(Op){var Hp=Op.type,n0={},R0;if(Hp==="a"){R0="a";var w0=Op.target,_0=Op.href,ha=Op.popup;_0&&(n0={"xlink:xlink:show":w0==="_blank"||w0.charAt(0)!=="_"?"new":"replace",target:w0,"xlink:xlink:href":_0},ha&&(n0.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+ha+'");return false;'))}else R0="tspan";Op.style&&(n0.style=Op.style);var Rp=document.createElementNS(m.svg,R0);if(Hp==="sup"||Hp==="sub"){Cp(kt,j),kt.appendChild(Rp);var Gt=document.createElementNS(m.svg,"tspan");Cp(Gt,j),ke.select(Gt).attr("dy",$[Hp]),n0.dy=O[Hp],kt.appendChild(Rp),kt.appendChild(Gt)}else kt.appendChild(Rp);ke.select(Rp).attr(n0),kt=Op.node=Rp,Ut.push(Op)}function Cp(Op,Hp){Op.appendChild(document.createTextNode(Hp))}function pt(Op){if(Ut.length===1){_.log("Ignoring unexpected end tag </"+Op+">.",wt);return}var Hp=Ut.pop();Op!==Hp.type&&_.log("Start tag <"+Hp.type+"> doesnt match end tag <"+Op+">. Pretending it did match.",wt),kt=Ut[Ut.length-1].node}var gt=L.test(wt);gt?aa():(kt=Le,Ut=[{node:Le}]);for(var te=wt.split(G),Et=0;Et<te.length;Et++){var zt=te[Et],rt=zt.match(M),Z=rt&&rt[2].toLowerCase(),we=A[Z];if(Z==="br")aa();else if(we===void 0)Cp(kt,tt(zt));else if(rt[1])pt(Z);else{var ot=rt[4],mt={type:Z},It=Ze(ot,B);if(It?(It=It.replace(Re,"$1 fill:"),we&&(It+=";"+we)):we&&(It=we),It&&(mt.style=It),Z==="a"){St=!0;var Yt=Ze(ot,X);if(Yt){var Sr=ut(Yt);Sr&&(mt.href=Sr,mt.target=Ze(ot,ee)||"_blank",mt.popup=Ze(ot,yt))}}ca(mt)}}return St}function ut(Le){var wt=encodeURI(decodeURI(Le)),St=document.createElement("a"),Ut=document.createElement("a");St.href=Le,Ut.href=wt;var kt=St.protocol,jt=Ut.protocol;return z.indexOf(kt)!==-1&&z.indexOf(jt)!==-1?wt:""}nt.sanitizeHTML=function(Le){Le=Le.replace(I," ");for(var wt=document.createElement("p"),St=wt,Ut=[],kt=Le.split(G),jt=0;jt<kt.length;jt++){var aa=kt[jt],ca=aa.match(M),Cp=ca&&ca[2].toLowerCase();if(Cp in A)if(ca[1])Ut.length&&(St=Ut.pop());else{var pt=ca[4],gt=Ze(pt,B),te=gt?{style:gt}:{};if(Cp==="a"){var Et=Ze(pt,X);if(Et){var zt=ut(Et);if(zt){te.href=zt;var rt=Ze(pt,ee);rt&&(te.target=rt)}}}var Z=document.createElement(Cp);St.appendChild(Z),ke.select(Z).attr(te),St=Z,Ut.push(Z)}else St.appendChild(document.createTextNode(tt(aa)))}var we="innerHTML";return wt[we]},nt.lineCount=function(Le){return Le.selectAll("tspan.line").size()||1},nt.positionText=function(Le,wt,St){return Le.each(function(){var Ut=ke.select(this);function kt(ca,Cp){return Cp===void 0?(Cp=Ut.attr(ca),Cp===null&&(Ut.attr(ca,0),Cp=0)):Ut.attr(ca,Cp),Cp}var jt=kt("x",wt),aa=kt("y",St);this.nodeName==="text"&&Ut.selectAll("tspan.line").attr({x:jt,y:aa})})};function vt(Le,wt,St){var Ut=St.horizontalAlign,kt=St.verticalAlign||"top",jt=Le.node().getBoundingClientRect(),aa=wt.node().getBoundingClientRect(),ca,Cp,pt;return kt==="bottom"?Cp=function(){return jt.bottom-ca.height}:kt==="middle"?Cp=function(){return jt.top+(jt.height-ca.height)/2}:Cp=function(){return jt.top},Ut==="right"?pt=function(){return jt.right-ca.width}:Ut==="center"?pt=function(){return jt.left+(jt.width-ca.width)/2}:pt=function(){return jt.left},function(){ca=this.node().getBoundingClientRect();var gt=pt()-aa.left,te=Cp()-aa.top,Et=St.gd||{};if(St.gd){Et._fullLayout._calcInverseTransform(Et);var zt=_.apply3DTransform(Et._fullLayout._invTransform)(gt,te);gt=zt[0],te=zt[1]}return this.style({top:te+"px",left:gt+"px","z-index":1e3}),this}}var _t="1px ";nt.makeTextShadow=function(Le){var wt=_t,St=_t,Ut=_t;return wt+St+Ut+Le+", -"+wt+"-"+St+Ut+Le+", "+wt+"-"+St+Ut+Le+", -"+wt+St+Ut+Le},nt.makeEditable=function(Le,wt){var St=wt.gd,Ut=wt.delegate,kt=ke.dispatch("edit","input","cancel"),jt=Ut||Le;if(Le.style({"pointer-events":Ut?"none":"all"}),Le.size()!==1)throw new Error("boo");function aa(){Cp(),Le.style({opacity:0});var pt=jt.attr("class"),gt;pt?gt="."+pt.split(" ")[0]+"-math-group":gt="[class*=-math-group]",gt&&ke.select(Le.node().parentNode).select(gt).style({opacity:0})}function ca(pt){var gt=pt.node(),te=document.createRange();te.selectNodeContents(gt);var Et=window.getSelection();Et.removeAllRanges(),Et.addRange(te),gt.focus()}function Cp(){var pt=ke.select(St),gt=pt.select(".svg-container"),te=gt.append("div"),Et=Le.node().style,zt=parseFloat(Et.fontSize||12),rt=wt.text;rt===void 0&&(rt=Le.attr("data-unformatted")),te.classed("plugin-editable editable",!0).style({position:"absolute","font-family":Et.fontFamily||"Arial","font-size":zt,color:wt.fill||Et.fill||"black",opacity:1,"background-color":wt.background||"transparent",outline:"#ffffff33 1px solid",margin:[-zt/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(rt).call(vt(Le,gt,wt)).on("blur",function(){St._editing=!1,Le.text(this.textContent).style({opacity:1});var Z=ke.select(this).attr("class"),we;Z?we="."+Z.split(" ")[0]+"-math-group":we="[class*=-math-group]",we&&ke.select(Le.node().parentNode).select(we).style({opacity:0});var ot=this.textContent;ke.select(this).transition().duration(0).remove(),ke.select(document).on("mouseup",null),kt.edit.call(Le,ot)}).on("focus",function(){var Z=this;St._editing=!0,ke.select(document).on("mouseup",function(){if(ke.event.target===Z)return!1;document.activeElement===te.node()&&te.node().blur()})}).on("keyup",function(){ke.event.which===27?(St._editing=!1,Le.style({opacity:1}),ke.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),kt.cancel.call(Le,this.textContent)):(kt.input.call(Le,this.textContent),ke.select(this).call(vt(Le,gt,wt)))}).on("keydown",function(){ke.event.which===13&&this.blur()}).call(ca)}return wt.immediate?aa():jt.on("click",aa),ke.rebind(Le,kt,"on")}}),sg=r((nt,ke)=>{var _=o(),d=ie(),m=v(),E=et(),b=Mn(),w=jo().isValid;function S(I,G,M){var L=G?E.nestedProperty(I,G).get()||{}:I,B=L[M||"color"];B&&B._inputArray&&(B=B._inputArray);var X=!1;if(E.isArrayOrTypedArray(B)){for(var ee=0;ee<B.length;ee++)if(m(B[ee])){X=!0;break}}return E.isPlainObject(L)&&(X||L.showscale===!0||m(L.cmin)&&m(L.cmax)||w(L.colorscale)||E.isPlainObject(L.colorbar))}var C=["showscale","autocolorscale","colorscale","reversescale","colorbar"],p=["min","max","mid","auto"];function F(I){var G=I._colorAx,M=G||I,L={},B,X,ee;for(X=0;X<C.length;X++)ee=C[X],L[ee]=M[ee];if(G)for(B="c",X=0;X<p.length;X++)ee=p[X],L[ee]=M["c"+ee];else{var yt;for(X=0;X<p.length;X++){if(ee=p[X],yt="c"+ee,yt in M){L[ee]=M[yt];continue}yt="z"+ee,yt in M&&(L[ee]=M[yt])}B=yt.charAt(0)}return L._sync=function(Ze,Re){var Q=p.indexOf(Ze)!==-1?B+Ze:Ze;M[Q]=M["_"+Q]=Re},L}function A(I){for(var G=F(I),M=G.min,L=G.max,B=G.reversescale?O(G.colorscale):G.colorscale,X=B.length,ee=new Array(X),yt=new Array(X),Ze=0;Ze<X;Ze++){var Re=B[Ze];ee[Ze]=M+Re[0]*(L-M),yt[Ze]=Re[1]}return{domain:ee,range:yt}}function O(I){for(var G=I.length,M=new Array(G),L=G-1,B=0;L>=0;L--,B++){var X=I[L];M[B]=[1-X[0],X[1]]}return M}function $(I,G){G=G||{};for(var M=I.domain,L=I.range,B=L.length,X=new Array(B),ee=0;ee<B;ee++){var yt=d(L[ee]).toRgb();X[ee]=[yt.r,yt.g,yt.b,yt.a]}var Ze=_.scale.linear().domain(M).range(X).clamp(!0),Re=G.noNumericCheck,Q=G.returnArray,xt;return Re&&Q?xt=Ze:Re?xt=function(tt){return z(Ze(tt))}:Q?xt=function(tt){return m(tt)?Ze(tt):d(tt).isValid()?tt:b.defaultLine}:xt=function(tt){return m(tt)?z(Ze(tt)):d(tt).isValid()?tt:b.defaultLine},xt.domain=Ze.domain,xt.range=function(){return L},xt}function j(I,G){return $(A(I),G)}function z(I){var G={r:I[0],g:I[1],b:I[2],a:I[3]};return d(G).toRgbString()}ke.exports={hasColorscale:S,extractOpts:F,extractScale:A,flipScale:O,makeColorScaleFunc:$,makeColorScaleFuncFromTrace:j}}),Iv=r((nt,ke)=>{var _=hg(),d=_.FORMAT_LINK,m=_.DATE_FORMAT_LINK;function E(S,C){return{valType:"string",dflt:"",editType:"none",description:(C?b:w)("hover text",S)+["By default the values are formatted using "+(C?"generic number format":"`"+S+"axis.hoverformat`")+"."].join(" ")}}function b(S,C){return["Sets the "+S+" formatting rule"+(C?"for `"+C+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+d+"."].join(" ")}function w(S,C){return b(S,C)+[" And for dates see: "+m+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}ke.exports={axisHoverFormat:E,descriptionOnlyNumbers:b,descriptionWithDates:w}}),d0=r((nt,ke)=>{var _=ct(),d=Lp(),m=a1().dash,E=se().extendFlat,b=Fm().templatedArray;pm().templateFormatStringDescription;var w=Iv().descriptionWithDates,S=g().ONEDAY,C=Vm(),p=C.HOUR_PATTERN,F=C.WEEKDAY_PATTERN,A={valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}},O=E({},A,{values:A.values.slice().concat(["sync"])});function $(Re){return{valType:"integer",min:0,dflt:Re?5:0,editType:"ticks"}}var j={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},z={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},I={valType:"data_array",editType:"ticks"},G={valType:"enumerated",values:["outside","inside",""],editType:"ticks"};function M(Re){var Q={valType:"number",min:0,editType:"ticks"};return Re||(Q.dflt=5),Q}function L(Re){var Q={valType:"number",min:0,editType:"ticks"};return Re||(Q.dflt=1),Q}var B={valType:"color",dflt:d.defaultLine,editType:"ticks"},X={valType:"color",dflt:d.lightLine,editType:"ticks"};function ee(Re){var Q={valType:"number",min:0,editType:"ticks"};return Re||(Q.dflt=1),Q}var yt=E({},m,{editType:"ticks"}),Ze={valType:"boolean",editType:"ticks"};ke.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:d.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:_({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed","min reversed","max reversed","min","max"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},autorangeoptions:{minallowed:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},maxallowed:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},clipmin:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},clipmax:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},include:{valType:"any",arrayOk:!0,editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},editType:"plot"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},minallowed:{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},maxallowed:{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},modebardisable:{valType:"flaglist",flags:["autoscale","zoominout"],extras:["none"],dflt:"none",editType:"modebar"},insiderange:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},scaleanchor:{valType:"enumerated",values:[C.idRegex.x.toString(),C.idRegex.y.toString(),!1],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[C.idRegex.x.toString(),C.idRegex.y.toString()],editType:"calc"},rangebreaks:b("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[F,p,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:S},editType:"calc"}),tickmode:O,nticks:$(),tick0:j,dtick:z,ticklabelstep:{valType:"integer",min:1,dflt:1,editType:"ticks"},tickvals:I,ticktext:{valType:"data_array",editType:"ticks"},ticks:G,tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},ticklabelshift:{valType:"integer",dflt:0,editType:"ticks"},ticklabelstandoff:{valType:"integer",dflt:0,editType:"ticks"},ticklabelindex:{valType:"integer",arrayOk:!0,editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:M(),tickwidth:L(),tickcolor:B,showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},labelalias:{valType:"any",dflt:!1,editType:"ticks"},automargin:{valType:"flaglist",flags:["height","width","left","right","top","bottom"],extras:[!0,!1],dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:E({},m,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:_({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},autotickangles:{valType:"info_array",freeLength:!0,items:{valType:"angle"},dflt:[0,30,90],editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B","SI extended"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:w("tick label")},tickformatstops:b("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:w("hover text")},unifiedhovertitle:{text:{valType:"string",dflt:"",editType:"none"},editType:"none"},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:d.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:Ze,gridcolor:X,gridwidth:ee(),griddash:yt,zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:d.defaultLine,editType:"ticks"},zerolinelayer:{valType:"enumerated",values:["above traces","below traces"],dflt:"below traces",editType:"plot"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:d.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",C.idRegex.x.toString(),C.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",C.idRegex.x.toString(),C.idRegex.y.toString()],editType:"plot"},minor:{tickmode:A,nticks:$("minor"),tick0:j,dtick:z,tickvals:I,ticks:G,ticklen:M("minor"),tickwidth:L("minor"),tickcolor:B,gridcolor:X,gridwidth:ee("minor"),griddash:yt,showgrid:Ze,editType:"ticks"},minorloglabels:{valType:"enumerated",values:["small digits","complete","none"],dflt:"small digits",editType:"calc"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},autoshift:{valType:"boolean",dflt:!1,editType:"plot"},shift:{valType:"number",editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","geometric mean ascending","geometric mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc"}}),y=r((nt,ke)=>{var _=d0(),d=ct(),m=se().extendFlat,E=Om().overrideAll;ke.exports=E({orientation:{valType:"enumerated",values:["h","v"],dflt:"v"},thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number"},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},xanchor:{valType:"enumerated",values:["left","center","right"]},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number"},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},ypad:{valType:"number",min:0,dflt:10},outlinecolor:_.linecolor,outlinewidth:_.linewidth,bordercolor:_.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:_.minor.tickmode,nticks:_.nticks,tick0:_.tick0,dtick:_.dtick,tickvals:_.tickvals,ticktext:_.ticktext,ticks:m({},_.ticks,{dflt:""}),ticklabeloverflow:m({},_.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside"},ticklen:_.ticklen,tickwidth:_.tickwidth,tickcolor:_.tickcolor,ticklabelstep:_.ticklabelstep,showticklabels:_.showticklabels,labelalias:_.labelalias,tickfont:d({}),tickangle:_.tickangle,tickformat:_.tickformat,tickformatstops:_.tickformatstops,tickprefix:_.tickprefix,showtickprefix:_.showtickprefix,ticksuffix:_.ticksuffix,showticksuffix:_.showticksuffix,separatethousands:_.separatethousands,exponentformat:_.exponentformat,minexponent:_.minexponent,showexponent:_.showexponent,title:{text:{valType:"string"},font:d({}),side:{valType:"enumerated",values:["right","top","bottom"]}}},"colorbars","from-root")}),N=r((nt,ke)=>{var _=y(),d=re().counter,m=Yv(),E=jo().scales;m(E);function b(w){return"`"+w+"`"}ke.exports=function(w,S){w=w||"",S=S||{};var C=S.cLetter||"c";"onlyIfNumerical"in S&&S.onlyIfNumerical;var p="noScale"in S?S.noScale:w==="marker.line",F="showScaleDflt"in S?S.showScaleDflt:C==="z",A=typeof S.colorscaleDflt=="string"?E[S.colorscaleDflt]:null,O=S.editTypeOverride||"",$=w?w+".":"",j;"colorAttr"in S?(j=S.colorAttr,S.colorAttr):(j={z:"z",c:"color"}[C],""+b($+j));var z=C+"auto",I=C+"min",G=C+"max",M=C+"mid",L={};L[I]=L[G]=void 0;var B={};B[z]=!1;var X={};return j==="color"&&(X.color={valType:"color",arrayOk:!0,editType:O||"style"},S.anim&&(X.color.anim=!0)),X[z]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:L},X[I]={valType:"number",dflt:null,editType:O||"plot",impliedEdits:B},X[G]={valType:"number",dflt:null,editType:O||"plot",impliedEdits:B},X[M]={valType:"number",dflt:null,editType:"calc",impliedEdits:L},X.colorscale={valType:"colorscale",editType:"calc",dflt:A,impliedEdits:{autocolorscale:!1}},X.autocolorscale={valType:"boolean",dflt:S.autoColorDflt!==!1,editType:"calc",impliedEdits:{colorscale:void 0}},X.reversescale={valType:"boolean",dflt:!1,editType:"plot"},p||(X.showscale={valType:"boolean",dflt:F,editType:"calc"},X.colorbar=_),S.noColorAxis||(X.coloraxis={valType:"subplotid",regex:d("coloraxis"),dflt:null,editType:"calc"}),X}}),K=r((nt,ke)=>{var _=se().extendFlat,d=N(),m=jo().scales;ke.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:m.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:m.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:m.RdBu,editType:"calc"}},coloraxis:_({_isSubplotObj:!0,editType:"calc"},d("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}}),ne=r((nt,ke)=>{var _=et();ke.exports=function(d){return _.isPlainObject(d.colorbar)}}),Rt=r(nt=>{var ke=v(),_=et(),d=g(),m=d.ONEDAY,E=d.ONEWEEK;nt.dtick=function(b,w){var S=w==="log",C=w==="date",p=w==="category",F=C?m:1;if(!b)return F;if(ke(b))return b=Number(b),b<=0?F:p?Math.max(1,Math.round(b)):C?Math.max(.1,b):b;if(typeof b!="string"||!(C||S))return F;var A=b.charAt(0),O=b.substr(1);return O=ke(O)?Number(O):0,O<=0||!(C&&A==="M"&&O===Math.round(O)||S&&A==="L"||S&&A==="D"&&(O===1||O===2))?F:b},nt.tick0=function(b,w,S,C){if(w==="date")return _.cleanDate(b,_.dateTick0(S,C%E===0?1:0));if(!(C==="D1"||C==="D2"))return ke(b)?Number(b):0}}),lt=r((nt,ke)=>{var _=Rt(),d=et().isArrayOrTypedArray,m=W().isTypedArraySpec,E=W().decodeTypedArraySpec;ke.exports=function(b,w,S,C,p){p||(p={});var F=p.isMinor,A=F?b.minor||{}:b,O=F?w.minor:w,$=F?"minor.":"";function j(ee){var yt=A[ee];return m(yt)&&(yt=E(yt)),yt!==void 0?yt:(O._template||{})[ee]}var z=j("tick0"),I=j("dtick"),G=j("tickvals"),M=d(G)?"array":I?"linear":"auto",L=S($+"tickmode",M);if(L==="auto"||L==="sync")S($+"nticks");else if(L==="linear"){var B=O.dtick=_.dtick(I,C);O.tick0=_.tick0(z,C,w.calendar,B)}else if(C!=="multicategory"){var X=S($+"tickvals");X===void 0?O.tickmode="auto":F||S("ticktext")}}}),Pt=r((nt,ke)=>{var _=et(),d=d0();ke.exports=function(m,E,b,w){var S=w.isMinor,C=S?m.minor||{}:m,p=S?E.minor:E,F=S?d.minor:d,A=S?"minor.":"",O=_.coerce2(C,p,F,"ticklen",S?(E.ticklen||5)*.6:void 0),$=_.coerce2(C,p,F,"tickwidth",S?E.tickwidth||1:void 0),j=_.coerce2(C,p,F,"tickcolor",(S?E.tickcolor:void 0)||p.color),z=b(A+"ticks",!S&&w.outerTicks||O||$||j?"outside":"");z||(delete p.ticklen,delete p.tickwidth,delete p.tickcolor)}}),Ht=r((nt,ke)=>{ke.exports=function(_){var d=["showexponent","showtickprefix","showticksuffix"],m=d.filter(function(b){return _[b]!==void 0}),E=function(b){return _[b]===_[m[0]]};if(m.every(E)||m.length===1)return _[m[0]]}}),Dt=r((nt,ke)=>{var _=et(),d=Fm();ke.exports=function(m,E,b){var w=b.name,S=b.inclusionAttr||"visible",C=E[w],p=_.isArrayOrTypedArray(m[w])?m[w]:[],F=E[w]=[],A=d.arrayTemplater(E,w,S),O,$;for(O=0;O<p.length;O++){var j=p[O];_.isPlainObject(j)?$=A.newItem(j):($=A.newItem({}),$[S]=!1),$._index=O,$[S]!==!1&&b.handleItemDefaults(j,$,E,b),F.push($)}var z=A.defaultItems();for(O=0;O<z.length;O++)$=z[O],$._index=F.length,b.handleItemDefaults({},$,E,b,{}),F.push($);if(_.isArrayOrTypedArray(C)){var I=Math.min(C.length,F.length);for(O=0;O<I;O++)_.relinkPrivateKeys(F[O],C[O])}return F}}),Zt=r((nt,ke)=>{var _=et(),d=Mn().contrast,m=d0(),E=Ht(),b=Dt();ke.exports=function(S,C,p,F,A){A||(A={});var O=p("labelalias");_.isPlainObject(O)||delete C.labelalias;var $=E(S),j=p("showticklabels");if(j){A.noTicklabelshift||p("ticklabelshift"),A.noTicklabelstandoff||p("ticklabelstandoff");var z=A.font||{},I=C.color,G=C.ticklabelposition||"",M=G.indexOf("inside")!==-1?d(A.bgColor):I&&I!==m.color.dflt?I:z.color;if(_.coerceFont(p,"tickfont",z,{overrideDflt:{color:M}}),!A.noTicklabelstep&&F!=="multicategory"&&F!=="log"&&p("ticklabelstep"),!A.noAng){var L=p("tickangle");!A.noAutotickangles&&L==="auto"&&p("autotickangles")}if(F!=="category"){var B=p("tickformat");b(S,C,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:w}),C.tickformatstops.length||delete C.tickformatstops,!A.noExp&&!B&&F!=="date"&&(p("showexponent",$),p("exponentformat"),p("minexponent"),p("separatethousands"))}!A.noMinorloglabels&&F==="log"&&p("minorloglabels")}};function w(S,C){function p(A,O){return _.coerce(S,C,m.tickformatstops,A,O)}var F=p("enabled");F&&(p("dtickrange"),p("value"))}}),Er=r((nt,ke)=>{var _=Ht();ke.exports=function(d,m,E,b,w){w||(w={});var S=w.tickSuffixDflt,C=_(d),p=E("tickprefix");p&&E("showtickprefix",C);var F=E("ticksuffix",S);F&&E("showticksuffix",C)}}),Np=r((nt,ke)=>{var _=et(),d=Fm(),m=lt(),E=Pt(),b=Zt(),w=Er(),S=y();ke.exports=function(C,p,F){var A=d.newContainer(p,"colorbar"),O=C.colorbar||{};function $(Le,wt){return _.coerce(O,A,S,Le,wt)}var j=F.margin||{t:0,b:0,l:0,r:0},z=F.width-j.l-j.r,I=F.height-j.t-j.b,G=$("orientation"),M=G==="v",L=$("thicknessmode");$("thickness",L==="fraction"?30/(M?z:I):30);var B=$("lenmode");$("len",B==="fraction"?1:M?I:z);var X=$("yref"),ee=$("xref"),yt=X==="paper",Ze=ee==="paper",Re,Q,xt,tt="left";M?(xt="middle",tt=Ze?"left":"right",Re=Ze?1.02:1,Q=.5):(xt=yt?"bottom":"top",tt="center",Re=.5,Q=yt?1.02:1),_.coerce(O,A,{x:{valType:"number",min:Ze?-2:0,max:Ze?3:1,dflt:Re}},"x"),_.coerce(O,A,{y:{valType:"number",min:yt?-2:0,max:yt?3:1,dflt:Q}},"y"),$("xanchor",tt),$("xpad"),$("yanchor",xt),$("ypad"),_.noneOrAll(O,A,["x","y"]),$("outlinecolor"),$("outlinewidth"),$("bordercolor"),$("borderwidth"),$("bgcolor");var ht=_.coerce(O,A,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:M?["outside","inside","outside top","inside top","outside bottom","inside bottom"]:["outside","inside","outside left","inside left","outside right","inside right"]}},"ticklabelposition");$("ticklabeloverflow",ht.indexOf("inside")!==-1?"hide past domain":"hide past div"),m(O,A,$,"linear");var it=F.font,ut={noAutotickangles:!0,noTicklabelshift:!0,noTicklabelstandoff:!0,outerTicks:!1,font:it};ht.indexOf("inside")!==-1&&(ut.bgColor="black"),w(O,A,$,"linear",ut),b(O,A,$,"linear",ut),E(O,A,$,"linear",ut),$("title.text",F._dfltTitle.colorbar);var vt=A.showticklabels?A.tickfont:it,_t=_.extendFlat({},it,{family:vt.family,size:_.bigFont(vt.size)});_.coerceFont($,"title.font",_t),$("title.side",M?"top":"right")}}),Zo=r((nt,ke)=>{var _=v(),d=et(),m=ne(),E=Np(),b=jo().isValid,w=y1().traceIs;function S(C,p){var F=p.slice(0,p.length-1);return p?d.nestedProperty(C,F).get()||{}:C}ke.exports=function C(p,F,A,O,$){var j=$.prefix,z=$.cLetter,I="_module"in F,G=S(p,j),M=S(F,j),L=S(F._template||{},j)||{},B=function(){return delete p.coloraxis,delete F.coloraxis,C(p,F,A,O,$)};if(I){var X=A._colorAxes||{},ee=O(j+"coloraxis");if(ee){var yt=w(F,"contour")&&d.nestedProperty(F,"contours.coloring").get()||"heatmap",Ze=X[ee];Ze?(Ze[2].push(B),Ze[0]!==yt&&(Ze[0]=!1,d.warn(["Ignoring coloraxis:",ee,"setting","as it is linked to incompatible colorscales."].join(" ")))):X[ee]=[yt,F,[B]];return}}var Re=G[z+"min"],Q=G[z+"max"],xt=_(Re)&&_(Q)&&Re<Q,tt=O(j+z+"auto",!xt);tt?O(j+z+"mid"):(O(j+z+"min"),O(j+z+"max"));var ht=G.colorscale,it=L.colorscale,ut;if(ht!==void 0&&(ut=!b(ht)),it!==void 0&&(ut=!b(it)),O(j+"autocolorscale",ut),O(j+"colorscale"),O(j+"reversescale"),j!=="marker.line."){var vt;j&&I&&(vt=m(G));var _t=O(j+"showscale",vt);_t&&(j&&L&&(M._template=L),E(G,M,A))}}}),la=r((nt,ke)=>{var _=et(),d=Fm(),m=K(),E=Zo();ke.exports=function(b,w){function S(z,I){return _.coerce(b,w,m,z,I)}S("colorscale.sequential"),S("colorscale.sequentialminus"),S("colorscale.diverging");var C=w._colorAxes,p,F;function A(z,I){return _.coerce(p,F,m.coloraxis,z,I)}for(var O in C){var $=C[O];if($[0])p=b[O]||{},F=d.newContainer(w,O,"coloraxis"),F._name=O,E(p,F,w,A,{prefix:"",cLetter:"c"});else{for(var j=0;j<$[2].length;j++)$[2][j]();delete w._colorAxes[O]}}}}),Dp=r((nt,ke)=>{var _=et(),d=sg().hasColorscale,m=sg().extractOpts;ke.exports=function(E,b){function w($,j){var z=$["_"+j];z!==void 0&&($[j]=z)}function S($,j){var z=j.container?_.nestedProperty($,j.container).get():$;if(z)if(z.coloraxis)z._colorAx=b[z.coloraxis];else{var I=m(z),G=I.auto;(G||I.min===void 0)&&w(z,j.min),(G||I.max===void 0)&&w(z,j.max),I.autocolorscale&&w(z,"colorscale")}}for(var C=0;C<E.length;C++){var p=E[C],F=p._module.colorbar;if(F)if(Array.isArray(F))for(var A=0;A<F.length;A++)S(p,F[A]);else S(p,F);d(p,"marker.line")&&S(p,{container:"marker.line",min:"cmin",max:"cmax"})}for(var O in b._colorAxes)S(b[O],{min:"cmin",max:"cmax"})}}),wp=r((nt,ke)=>{var _=v(),d=et(),m=sg().extractOpts;ke.exports=function(E,b,w){var S=E._fullLayout,C=w.vals,p=w.containerStr,F=p?d.nestedProperty(b,p).get():b,A=m(F),O=A.auto!==!1,$=A.min,j=A.max,z=A.mid,I=function(){return d.aggNums(Math.min,null,C)},G=function(){return d.aggNums(Math.max,null,C)};if($===void 0?$=I():O&&(F._colorAx&&_($)?$=Math.min($,I()):$=I()),j===void 0?j=G():O&&(F._colorAx&&_(j)?j=Math.max(j,G()):j=G()),O&&z!==void 0&&(j-z>z-$?$=z-(j-z):j-z<z-$&&(j=z+(z-$))),$===j&&($-=.5,j+=.5),A._sync("min",$),A._sync("max",j),A.autocolorscale){var M;$*j<0?M=S.colorscale.diverging:$>=0?M=S.colorscale.sequential:M=S.colorscale.sequentialminus,A._sync("colorscale",M)}}}),Vp=r((nt,ke)=>{var _=jo(),d=sg();ke.exports={moduleType:"component",name:"colorscale",attributes:N(),layoutAttributes:K(),supplyLayoutDefaults:la(),handleDefaults:Zo(),crossTraceDefaults:Dp(),calc:wp(),scales:_.scales,defaultScale:_.defaultScale,getScale:_.get,isValidScale:_.isValid,hasColorscale:d.hasColorscale,extractOpts:d.extractOpts,extractScale:d.extractScale,flipScale:d.flipScale,makeColorScaleFunc:d.makeColorScaleFunc,makeColorScaleFuncFromTrace:d.makeColorScaleFuncFromTrace}}),Kp=r((nt,ke)=>{var _=et(),d=W().isTypedArraySpec;ke.exports={hasLines:function(m){return m.visible&&m.mode&&m.mode.indexOf("lines")!==-1},hasMarkers:function(m){return m.visible&&(m.mode&&m.mode.indexOf("markers")!==-1||m.type==="splom")},hasText:function(m){return m.visible&&m.mode&&m.mode.indexOf("text")!==-1},isBubble:function(m){var E=m.marker;return _.isPlainObject(E)&&(_.isArrayOrTypedArray(E.size)||d(E.size))}}}),r0=r((nt,ke)=>{var _=v();ke.exports=function(d,m){m||(m=2);var E=d.marker,b=E.sizeref||1,w=E.sizemin||0,S=E.sizemode==="area"?function(C){return Math.sqrt(C/b)}:function(C){return C/b};return function(C){var p=S(C/m);return _(p)&&p>0?Math.max(p,w):0}}}),D0=r(nt=>{var ke=et();nt.getSubplot=function(w){return w.subplot||w.xaxis+w.yaxis||w.geo},nt.isTraceInSubplots=function(w,S){if(w.type==="splom"){for(var C=w.xaxes||[],p=w.yaxes||[],F=0;F<C.length;F++)for(var A=0;A<p.length;A++)if(S.indexOf(C[F]+p[A])!==-1)return!0;return!1}return S.indexOf(nt.getSubplot(w))!==-1},nt.flat=function(w,S){for(var C=new Array(w.length),p=0;p<w.length;p++)C[p]=S;return C},nt.p2c=function(w,S){for(var C=new Array(w.length),p=0;p<w.length;p++)C[p]=w[p].p2c(S);return C},nt.getDistanceFunction=function(w,S,C,p){return w==="closest"?p||nt.quadrature(S,C):w.charAt(0)==="x"?S:C},nt.getClosest=function(w,S,C){if(C.index!==!1)C.index>=0&&C.index<w.length?C.distance=0:C.index=!1;else for(var p=1/0,F=w.length,A=0;A<F;A++)p=S(w[A]),p<=C.distance&&(C.index=A,C.distance=p);return C},nt.inbox=function(w,S,C){return w*S<0||w===0?C:1/0},nt.quadrature=function(w,S){return function(C){var p=w(C),F=S(C);return Math.sqrt(p*p+F*F)}},nt.makeEventData=function(w,S,C){var p="index"in w?w.index:w.pointNumber,F={data:S._input,fullData:S,curveNumber:S.index,pointNumber:p};if(S._indexToPoints){var A=S._indexToPoints[p];A.length===1?F.pointIndex=A[0]:F.pointIndices=A}else F.pointIndex=p;return S._module.eventData?F=S._module.eventData(F,w,S,C,p):("xVal"in w?F.x=w.xVal:"x"in w&&(F.x=w.x),"yVal"in w?F.y=w.yVal:"y"in w&&(F.y=w.y),w.xa&&(F.xaxis=w.xa),w.ya&&(F.yaxis=w.ya),w.zLabelVal!==void 0&&(F.z=w.zLabelVal)),nt.appendArrayPointValue(F,S,p),F},nt.appendArrayPointValue=function(w,S,C){var p=S._arrayAttrs;if(p)for(var F=0;F<p.length;F++){var A=p[F],O=d(A);if(w[O]===void 0){var $=ke.nestedProperty(S,A).get(),j=m($,C);j!==void 0&&(w[O]=j)}}},nt.appendArrayMultiPointValues=function(w,S,C){var p=S._arrayAttrs;if(p)for(var F=0;F<p.length;F++){var A=p[F],O=d(A);if(w[O]===void 0){for(var $=ke.nestedProperty(S,A).get(),j=new Array(C.length),z=0;z<C.length;z++)j[z]=m($,C[z]);w[O]=j}}};var _={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function d(w){return _[w]||w}function m(w,S){if(Array.isArray(S)){if(Array.isArray(w)&&Array.isArray(w[S[0]]))return w[S[0]][S[1]]}else return w[S]}var E={x:!0,y:!0},b={"x unified":!0,"y unified":!0};nt.isUnifiedHover=function(w){return typeof w!="string"?!1:!!b[w]},nt.isXYhover=function(w){return typeof w!="string"?!1:!!E[w]}}),E0=r((nt,ke)=>{ke.exports=m;var _={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},d=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function m(w){var S=[];return w.replace(d,function(C,p,F){var A=p.toLowerCase();for(F=b(F),A=="m"&&F.length>2&&(S.push([p].concat(F.splice(0,2))),A="l",p=p=="m"?"l":"L");;){if(F.length==_[A])return F.unshift(p),S.push(F);if(F.length<_[A])throw new Error("malformed path data");S.push([p].concat(F.splice(0,_[A])))}}),S}var E=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function b(w){var S=w.match(E);return S?S.map(Number):[]}}),H0=r((nt,ke)=>{var _=E0(),d=function(z,I){return I?Math.round(z*(I=Math.pow(10,I)))/I:Math.round(z)},m="M0,0Z",E=Math.sqrt(2),b=Math.sqrt(3),w=Math.PI,S=Math.cos,C=Math.sin;ke.exports={circle:{n:0,f:function(z,I,G){if(p(I))return m;var M=d(z,2),L="M"+M+",0A"+M+","+M+" 0 1,1 0,-"+M+"A"+M+","+M+" 0 0,1 "+M+",0Z";return G?j(I,G,L):L}},square:{n:1,f:function(z,I,G){if(p(I))return m;var M=d(z,2);return j(I,G,"M"+M+","+M+"H-"+M+"V-"+M+"H"+M+"Z")}},diamond:{n:2,f:function(z,I,G){if(p(I))return m;var M=d(z*1.3,2);return j(I,G,"M"+M+",0L0,"+M+"L-"+M+",0L0,-"+M+"Z")}},cross:{n:3,f:function(z,I,G){if(p(I))return m;var M=d(z*.4,2),L=d(z*1.2,2);return j(I,G,"M"+L+","+M+"H"+M+"V"+L+"H-"+M+"V"+M+"H-"+L+"V-"+M+"H-"+M+"V-"+L+"H"+M+"V-"+M+"H"+L+"Z")}},x:{n:4,f:function(z,I,G){if(p(I))return m;var M=d(z*.8/E,2),L="l"+M+","+M,B="l"+M+",-"+M,X="l-"+M+",-"+M,ee="l-"+M+","+M;return j(I,G,"M0,"+M+L+B+X+B+X+ee+X+ee+L+ee+L+"Z")}},"triangle-up":{n:5,f:function(z,I,G){if(p(I))return m;var M=d(z*2/b,2),L=d(z/2,2),B=d(z,2);return j(I,G,"M-"+M+","+L+"H"+M+"L0,-"+B+"Z")}},"triangle-down":{n:6,f:function(z,I,G){if(p(I))return m;var M=d(z*2/b,2),L=d(z/2,2),B=d(z,2);return j(I,G,"M-"+M+",-"+L+"H"+M+"L0,"+B+"Z")}},"triangle-left":{n:7,f:function(z,I,G){if(p(I))return m;var M=d(z*2/b,2),L=d(z/2,2),B=d(z,2);return j(I,G,"M"+L+",-"+M+"V"+M+"L-"+B+",0Z")}},"triangle-right":{n:8,f:function(z,I,G){if(p(I))return m;var M=d(z*2/b,2),L=d(z/2,2),B=d(z,2);return j(I,G,"M-"+L+",-"+M+"V"+M+"L"+B+",0Z")}},"triangle-ne":{n:9,f:function(z,I,G){if(p(I))return m;var M=d(z*.6,2),L=d(z*1.2,2);return j(I,G,"M-"+L+",-"+M+"H"+M+"V"+L+"Z")}},"triangle-se":{n:10,f:function(z,I,G){if(p(I))return m;var M=d(z*.6,2),L=d(z*1.2,2);return j(I,G,"M"+M+",-"+L+"V"+M+"H-"+L+"Z")}},"triangle-sw":{n:11,f:function(z,I,G){if(p(I))return m;var M=d(z*.6,2),L=d(z*1.2,2);return j(I,G,"M"+L+","+M+"H-"+M+"V-"+L+"Z")}},"triangle-nw":{n:12,f:function(z,I,G){if(p(I))return m;var M=d(z*.6,2),L=d(z*1.2,2);return j(I,G,"M-"+M+","+L+"V-"+M+"H"+L+"Z")}},pentagon:{n:13,f:function(z,I,G){if(p(I))return m;var M=d(z*.951,2),L=d(z*.588,2),B=d(-z,2),X=d(z*-.309,2),ee=d(z*.809,2);return j(I,G,"M"+M+","+X+"L"+L+","+ee+"H-"+L+"L-"+M+","+X+"L0,"+B+"Z")}},hexagon:{n:14,f:function(z,I,G){if(p(I))return m;var M=d(z,2),L=d(z/2,2),B=d(z*b/2,2);return j(I,G,"M"+B+",-"+L+"V"+L+"L0,"+M+"L-"+B+","+L+"V-"+L+"L0,-"+M+"Z")}},hexagon2:{n:15,f:function(z,I,G){if(p(I))return m;var M=d(z,2),L=d(z/2,2),B=d(z*b/2,2);return j(I,G,"M-"+L+","+B+"H"+L+"L"+M+",0L"+L+",-"+B+"H-"+L+"L-"+M+",0Z")}},octagon:{n:16,f:function(z,I,G){if(p(I))return m;var M=d(z*.924,2),L=d(z*.383,2);return j(I,G,"M-"+L+",-"+M+"H"+L+"L"+M+",-"+L+"V"+L+"L"+L+","+M+"H-"+L+"L-"+M+","+L+"V-"+L+"Z")}},star:{n:17,f:function(z,I,G){if(p(I))return m;var M=z*1.4,L=d(M*.225,2),B=d(M*.951,2),X=d(M*.363,2),ee=d(M*.588,2),yt=d(-M,2),Ze=d(M*-.309,2),Re=d(M*.118,2),Q=d(M*.809,2),xt=d(M*.382,2);return j(I,G,"M"+L+","+Ze+"H"+B+"L"+X+","+Re+"L"+ee+","+Q+"L0,"+xt+"L-"+ee+","+Q+"L-"+X+","+Re+"L-"+B+","+Ze+"H-"+L+"L0,"+yt+"Z")}},hexagram:{n:18,f:function(z,I,G){if(p(I))return m;var M=d(z*.66,2),L=d(z*.38,2),B=d(z*.76,2);return j(I,G,"M-"+B+",0l-"+L+",-"+M+"h"+B+"l"+L+",-"+M+"l"+L+","+M+"h"+B+"l-"+L+","+M+"l"+L+","+M+"h-"+B+"l-"+L+","+M+"l-"+L+",-"+M+"h-"+B+"Z")}},"star-triangle-up":{n:19,f:function(z,I,G){if(p(I))return m;var M=d(z*b*.8,2),L=d(z*.8,2),B=d(z*1.6,2),X=d(z*4,2),ee="A "+X+","+X+" 0 0 1 ";return j(I,G,"M-"+M+","+L+ee+M+","+L+ee+"0,-"+B+ee+"-"+M+","+L+"Z")}},"star-triangle-down":{n:20,f:function(z,I,G){if(p(I))return m;var M=d(z*b*.8,2),L=d(z*.8,2),B=d(z*1.6,2),X=d(z*4,2),ee="A "+X+","+X+" 0 0 1 ";return j(I,G,"M"+M+",-"+L+ee+"-"+M+",-"+L+ee+"0,"+B+ee+M+",-"+L+"Z")}},"star-square":{n:21,f:function(z,I,G){if(p(I))return m;var M=d(z*1.1,2),L=d(z*2,2),B="A "+L+","+L+" 0 0 1 ";return j(I,G,"M-"+M+",-"+M+B+"-"+M+","+M+B+M+","+M+B+M+",-"+M+B+"-"+M+",-"+M+"Z")}},"star-diamond":{n:22,f:function(z,I,G){if(p(I))return m;var M=d(z*1.4,2),L=d(z*1.9,2),B="A "+L+","+L+" 0 0 1 ";return j(I,G,"M-"+M+",0"+B+"0,"+M+B+M+",0"+B+"0,-"+M+B+"-"+M+",0Z")}},"diamond-tall":{n:23,f:function(z,I,G){if(p(I))return m;var M=d(z*.7,2),L=d(z*1.4,2);return j(I,G,"M0,"+L+"L"+M+",0L0,-"+L+"L-"+M+",0Z")}},"diamond-wide":{n:24,f:function(z,I,G){if(p(I))return m;var M=d(z*1.4,2),L=d(z*.7,2);return j(I,G,"M0,"+L+"L"+M+",0L0,-"+L+"L-"+M+",0Z")}},hourglass:{n:25,f:function(z,I,G){if(p(I))return m;var M=d(z,2);return j(I,G,"M"+M+","+M+"H-"+M+"L"+M+",-"+M+"H-"+M+"Z")},noDot:!0},bowtie:{n:26,f:function(z,I,G){if(p(I))return m;var M=d(z,2);return j(I,G,"M"+M+","+M+"V-"+M+"L-"+M+","+M+"V-"+M+"Z")},noDot:!0},"circle-cross":{n:27,f:function(z,I,G){if(p(I))return m;var M=d(z,2);return j(I,G,"M0,"+M+"V-"+M+"M"+M+",0H-"+M+"M"+M+",0A"+M+","+M+" 0 1,1 0,-"+M+"A"+M+","+M+" 0 0,1 "+M+",0Z")},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(z,I,G){if(p(I))return m;var M=d(z,2),L=d(z/E,2);return j(I,G,"M"+L+","+L+"L-"+L+",-"+L+"M"+L+",-"+L+"L-"+L+","+L+"M"+M+",0A"+M+","+M+" 0 1,1 0,-"+M+"A"+M+","+M+" 0 0,1 "+M+",0Z")},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(z,I,G){if(p(I))return m;var M=d(z,2);return j(I,G,"M0,"+M+"V-"+M+"M"+M+",0H-"+M+"M"+M+","+M+"H-"+M+"V-"+M+"H"+M+"Z")},needLine:!0,noDot:!0},"square-x":{n:30,f:function(z,I,G){if(p(I))return m;var M=d(z,2);return j(I,G,"M"+M+","+M+"L-"+M+",-"+M+"M"+M+",-"+M+"L-"+M+","+M+"M"+M+","+M+"H-"+M+"V-"+M+"H"+M+"Z")},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(z,I,G){if(p(I))return m;var M=d(z*1.3,2);return j(I,G,"M"+M+",0L0,"+M+"L-"+M+",0L0,-"+M+"ZM0,-"+M+"V"+M+"M-"+M+",0H"+M)},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(z,I,G){if(p(I))return m;var M=d(z*1.3,2),L=d(z*.65,2);return j(I,G,"M"+M+",0L0,"+M+"L-"+M+",0L0,-"+M+"ZM-"+L+",-"+L+"L"+L+","+L+"M-"+L+","+L+"L"+L+",-"+L)},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(z,I,G){if(p(I))return m;var M=d(z*1.4,2);return j(I,G,"M0,"+M+"V-"+M+"M"+M+",0H-"+M)},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(z,I,G){if(p(I))return m;var M=d(z,2);return j(I,G,"M"+M+","+M+"L-"+M+",-"+M+"M"+M+",-"+M+"L-"+M+","+M)},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(z,I,G){if(p(I))return m;var M=d(z*1.2,2),L=d(z*.85,2);return j(I,G,"M0,"+M+"V-"+M+"M"+M+",0H-"+M+"M"+L+","+L+"L-"+L+",-"+L+"M"+L+",-"+L+"L-"+L+","+L)},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(z,I,G){if(p(I))return m;var M=d(z/2,2),L=d(z,2);return j(I,G,"M"+M+","+L+"V-"+L+"M"+(M-L)+",-"+L+"V"+L+"M"+L+","+M+"H-"+L+"M-"+L+","+(M-L)+"H"+L)},needLine:!0,noFill:!0},"y-up":{n:37,f:function(z,I,G){if(p(I))return m;var M=d(z*1.2,2),L=d(z*1.6,2),B=d(z*.8,2);return j(I,G,"M-"+M+","+B+"L0,0M"+M+","+B+"L0,0M0,-"+L+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(z,I,G){if(p(I))return m;var M=d(z*1.2,2),L=d(z*1.6,2),B=d(z*.8,2);return j(I,G,"M-"+M+",-"+B+"L0,0M"+M+",-"+B+"L0,0M0,"+L+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(z,I,G){if(p(I))return m;var M=d(z*1.2,2),L=d(z*1.6,2),B=d(z*.8,2);return j(I,G,"M"+B+","+M+"L0,0M"+B+",-"+M+"L0,0M-"+L+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(z,I,G){if(p(I))return m;var M=d(z*1.2,2),L=d(z*1.6,2),B=d(z*.8,2);return j(I,G,"M-"+B+","+M+"L0,0M-"+B+",-"+M+"L0,0M"+L+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(z,I,G){if(p(I))return m;var M=d(z*1.4,2);return j(I,G,"M"+M+",0H-"+M)},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(z,I,G){if(p(I))return m;var M=d(z*1.4,2);return j(I,G,"M0,"+M+"V-"+M)},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(z,I,G){if(p(I))return m;var M=d(z,2);return j(I,G,"M"+M+",-"+M+"L-"+M+","+M)},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(z,I,G){if(p(I))return m;var M=d(z,2);return j(I,G,"M"+M+","+M+"L-"+M+",-"+M)},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(z,I,G){if(p(I))return m;var M=d(z,2),L=d(z*2,2);return j(I,G,"M0,0L-"+M+","+L+"H"+M+"Z")},backoff:1,noDot:!0},"arrow-down":{n:46,f:function(z,I,G){if(p(I))return m;var M=d(z,2),L=d(z*2,2);return j(I,G,"M0,0L-"+M+",-"+L+"H"+M+"Z")},noDot:!0},"arrow-left":{n:47,f:function(z,I,G){if(p(I))return m;var M=d(z*2,2),L=d(z,2);return j(I,G,"M0,0L"+M+",-"+L+"V"+L+"Z")},noDot:!0},"arrow-right":{n:48,f:function(z,I,G){if(p(I))return m;var M=d(z*2,2),L=d(z,2);return j(I,G,"M0,0L-"+M+",-"+L+"V"+L+"Z")},noDot:!0},"arrow-bar-up":{n:49,f:function(z,I,G){if(p(I))return m;var M=d(z,2),L=d(z*2,2);return j(I,G,"M-"+M+",0H"+M+"M0,0L-"+M+","+L+"H"+M+"Z")},backoff:1,needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(z,I,G){if(p(I))return m;var M=d(z,2),L=d(z*2,2);return j(I,G,"M-"+M+",0H"+M+"M0,0L-"+M+",-"+L+"H"+M+"Z")},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(z,I,G){if(p(I))return m;var M=d(z*2,2),L=d(z,2);return j(I,G,"M0,-"+L+"V"+L+"M0,0L"+M+",-"+L+"V"+L+"Z")},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(z,I,G){if(p(I))return m;var M=d(z*2,2),L=d(z,2);return j(I,G,"M0,-"+L+"V"+L+"M0,0L-"+M+",-"+L+"V"+L+"Z")},needLine:!0,noDot:!0},arrow:{n:53,f:function(z,I,G){if(p(I))return m;var M=w/2.5,L=2*z*S(M),B=2*z*C(M);return j(I,G,"M0,0L"+-L+","+B+"L"+L+","+B+"Z")},backoff:.9,noDot:!0},"arrow-wide":{n:54,f:function(z,I,G){if(p(I))return m;var M=w/4,L=2*z*S(M),B=2*z*C(M);return j(I,G,"M0,0L"+-L+","+B+"A "+2*z+","+2*z+" 0 0 1 "+L+","+B+"Z")},backoff:.4,noDot:!0}};function p(z){return z===null}var F,A,O,$;function j(z,I,G){if((!z||z%360===0)&&!I)return G;if(O===z&&$===I&&F===G)return A;O=z,$=I,F=G;function M(ut,vt){var _t=S(ut),Le=C(ut),wt=vt[0],St=vt[1]+(I||0);return[wt*_t-St*Le,wt*Le+St*_t]}for(var L=z/180*w,B=0,X=0,ee=_(G),yt="",Ze=0;Ze<ee.length;Ze++){var Re=ee[Ze],Q=Re[0],xt=B,tt=X;if(Q==="M"||Q==="L")B=+Re[1],X=+Re[2];else if(Q==="m"||Q==="l")B+=+Re[1],X+=+Re[2];else if(Q==="H")B=+Re[1];else if(Q==="h")B+=+Re[1];else if(Q==="V")X=+Re[1];else if(Q==="v")X+=+Re[1];else if(Q==="A"){B=+Re[1],X=+Re[2];var ht=M(L,[+Re[6],+Re[7]]);Re[6]=ht[0],Re[7]=ht[1],Re[3]=+Re[3]+z}(Q==="H"||Q==="V")&&(Q="L"),(Q==="h"||Q==="v")&&(Q="l"),(Q==="m"||Q==="l")&&(B-=xt,X-=tt);var it=M(L,[B,X]);(Q==="H"||Q==="V")&&(Q="L"),(Q==="M"||Q==="L"||Q==="m"||Q==="l")&&(Re[1]=it[0],Re[2]=it[1]),Re[0]=Q,yt+=Re[0]+Re.slice(1).join(",")}return A=yt,yt}}),Q0=r((nt,ke)=>{var _=o(),d=et(),m=d.numberFormat,E=v(),b=ie(),w=y1(),S=Mn(),C=Vp(),p=d.strTranslate,F=G1(),A=Ag(),O=K1(),$=O.LINE_SPACING,j=sa().DESELECTDIM,z=Kp(),I=r0(),G=D0().appendArrayPointValue,M=ke.exports={};M.font=function(ha,Rp){var Gt=Rp.variant,Gp=Rp.style,c0=Rp.weight,M0=Rp.color,I0=Rp.size,k0=Rp.family,V0=Rp.shadow,$0=Rp.lineposition,W0=Rp.textcase;k0&&ha.style("font-family",k0),I0+1&&ha.style("font-size",I0+"px"),M0&&ha.call(S.fill,M0),c0&&ha.style("font-weight",c0),Gp&&ha.style("font-style",Gp),Gt&&ha.style("font-variant",Gt),W0&&ha.style("text-transform",L(X(W0))),V0&&ha.style("text-shadow",V0==="auto"?F.makeTextShadow(S.contrast(M0)):L(V0)),$0&&ha.style("text-decoration-line",L(ee($0)))};function L(ha){return ha==="none"?void 0:ha}var B={normal:"none",lower:"lowercase",upper:"uppercase","word caps":"capitalize"};function X(ha){return B[ha]}function ee(ha){return ha.replace("under","underline").replace("over","overline").replace("through","line-through").split("+").join(" ")}M.setPosition=function(ha,Rp,Gt){ha.attr("x",Rp).attr("y",Gt)},M.setSize=function(ha,Rp,Gt){ha.attr("width",Rp).attr("height",Gt)},M.setRect=function(ha,Rp,Gt,Gp,c0){ha.call(M.setPosition,Rp,Gt).call(M.setSize,Gp,c0)},M.translatePoint=function(ha,Rp,Gt,Gp){var c0=Gt.c2p(ha.x),M0=Gp.c2p(ha.y);if(E(c0)&&E(M0)&&Rp.node())Rp.node().nodeName==="text"?Rp.attr("x",c0).attr("y",M0):Rp.attr("transform",p(c0,M0));else return!1;return!0},M.translatePoints=function(ha,Rp,Gt){ha.each(function(Gp){var c0=_.select(this);M.translatePoint(Gp,c0,Rp,Gt)})},M.hideOutsideRangePoint=function(ha,Rp,Gt,Gp,c0,M0){Rp.attr("display",Gt.isPtWithinRange(ha,c0)&&Gp.isPtWithinRange(ha,M0)?null:"none")},M.hideOutsideRangePoints=function(ha,Rp){if(Rp._hasClipOnAxisFalse){var Gt=Rp.xaxis,Gp=Rp.yaxis;ha.each(function(c0){var M0=c0[0].trace,I0=M0.xcalendar,k0=M0.ycalendar,V0=w.traceIs(M0,"bar-like")?".bartext":".point,.textpoint";ha.selectAll(V0).each(function($0){M.hideOutsideRangePoint($0,_.select(this),Gt,Gp,I0,k0)})})}},M.crispRound=function(ha,Rp,Gt){return!Rp||!E(Rp)?Gt||0:ha._context.staticPlot?Rp:Rp<1?1:Math.round(Rp)},M.singleLineStyle=function(ha,Rp,Gt,Gp,c0){Rp.style("fill","none");var M0=(((ha||[])[0]||{}).trace||{}).line||{},I0=Gt||M0.width||0,k0=c0||M0.dash||"";S.stroke(Rp,Gp||M0.color),M.dashLine(Rp,k0,I0)},M.lineGroupStyle=function(ha,Rp,Gt,Gp){ha.style("fill","none").each(function(c0){var M0=(((c0||[])[0]||{}).trace||{}).line||{},I0=Rp||M0.width||0,k0=Gp||M0.dash||"";_.select(this).call(S.stroke,Gt||M0.color).call(M.dashLine,k0,I0)})},M.dashLine=function(ha,Rp,Gt){Gt=+Gt||0,Rp=M.dashStyle(Rp,Gt),ha.style({"stroke-dasharray":Rp,"stroke-width":Gt+"px"})},M.dashStyle=function(ha,Rp){Rp=+Rp||1;var Gt=Math.max(Rp,3);return ha==="solid"?ha="":ha==="dot"?ha=Gt+"px,"+Gt+"px":ha==="dash"?ha=3*Gt+"px,"+3*Gt+"px":ha==="longdash"?ha=5*Gt+"px,"+5*Gt+"px":ha==="dashdot"?ha=3*Gt+"px,"+Gt+"px,"+Gt+"px,"+Gt+"px":ha==="longdashdot"&&(ha=5*Gt+"px,"+2*Gt+"px,"+Gt+"px,"+2*Gt+"px"),ha};function yt(ha,Rp,Gt,Gp){var c0=Rp.fillpattern,M0=Rp.fillgradient,I0=M.getPatternAttr,k0=c0&&(I0(c0.shape,0,"")||I0(c0.path,0,""));if(k0){var V0=I0(c0.bgcolor,0,null),$0=I0(c0.fgcolor,0,null),W0=c0.fgopacity,gm=I0(c0.size,0,8),F0=I0(c0.solidity,0,.3),bm=Rp.uid;M.pattern(ha,"point",Gt,bm,k0,gm,F0,void 0,c0.fillmode,V0,$0,W0)}else if(M0&&M0.type!=="none"){var Dm=M0.type,vm="scatterfill-"+Rp.uid;if(Gp&&(vm="legendfill-"+Rp.uid),!Gp&&(M0.start!==void 0||M0.stop!==void 0)){var km,Yo;Dm==="horizontal"?(km={x:M0.start,y:0},Yo={x:M0.stop,y:0}):Dm==="vertical"&&(km={x:0,y:M0.start},Yo={x:0,y:M0.stop}),km.x=Rp._xA.c2p(km.x===void 0?Rp._extremes.x.min[0].val:km.x,!0),km.y=Rp._yA.c2p(km.y===void 0?Rp._extremes.y.min[0].val:km.y,!0),Yo.x=Rp._xA.c2p(Yo.x===void 0?Rp._extremes.x.max[0].val:Yo.x,!0),Yo.y=Rp._yA.c2p(Yo.y===void 0?Rp._extremes.y.max[0].val:Yo.y,!0),ha.call(it,Gt,vm,"linear",M0.colorscale,"fill",km,Yo,!0,!1)}else Dm==="horizontal"&&(Dm=Dm+"reversed"),ha.call(M.gradient,Gt,vm,Dm,M0.colorscale,"fill")}else Rp.fillcolor&&ha.call(S.fill,Rp.fillcolor)}M.singleFillStyle=function(ha,Rp){var Gt=_.select(ha.node()),Gp=Gt.data(),c0=((Gp[0]||[])[0]||{}).trace||{};yt(ha,c0,Rp,!1)},M.fillGroupStyle=function(ha,Rp,Gt){ha.style("stroke-width",0).each(function(Gp){var c0=_.select(this);Gp[0].trace&&yt(c0,Gp[0].trace,Rp,Gt)})};var Ze=H0();M.symbolNames=[],M.symbolFuncs=[],M.symbolBackOffs=[],M.symbolNeedLines={},M.symbolNoDot={},M.symbolNoFill={},M.symbolList=[],Object.keys(Ze).forEach(function(ha){var Rp=Ze[ha],Gt=Rp.n;M.symbolList.push(Gt,String(Gt),ha,Gt+100,String(Gt+100),ha+"-open"),M.symbolNames[Gt]=ha,M.symbolFuncs[Gt]=Rp.f,M.symbolBackOffs[Gt]=Rp.backoff||0,Rp.needLine&&(M.symbolNeedLines[Gt]=!0),Rp.noDot?M.symbolNoDot[Gt]=!0:M.symbolList.push(Gt+200,String(Gt+200),ha+"-dot",Gt+300,String(Gt+300),ha+"-open-dot"),Rp.noFill&&(M.symbolNoFill[Gt]=!0)});var Re=M.symbolNames.length,Q="M0,0.5L0.5,0L0,-0.5L-0.5,0Z";M.symbolNumber=function(ha){if(E(ha))ha=+ha;else if(typeof ha=="string"){var Rp=0;ha.indexOf("-open")>0&&(Rp=100,ha=ha.replace("-open","")),ha.indexOf("-dot")>0&&(Rp+=200,ha=ha.replace("-dot","")),ha=M.symbolNames.indexOf(ha),ha>=0&&(ha+=Rp)}return ha%100>=Re||ha>=400?0:Math.floor(Math.max(ha,0))};function xt(ha,Rp,Gt,Gp){var c0=ha%100;return M.symbolFuncs[c0](Rp,Gt,Gp)+(ha>=200?Q:"")}var tt=m("~f"),ht={radial:{type:"radial"},radialreversed:{type:"radial",reversed:!0},horizontal:{type:"linear",start:{x:1,y:0},stop:{x:0,y:0}},horizontalreversed:{type:"linear",start:{x:1,y:0},stop:{x:0,y:0},reversed:!0},vertical:{type:"linear",start:{x:0,y:1},stop:{x:0,y:0}},verticalreversed:{type:"linear",start:{x:0,y:1},stop:{x:0,y:0},reversed:!0}};M.gradient=function(ha,Rp,Gt,Gp,c0,M0){var I0=ht[Gp];return it(ha,Rp,Gt,I0.type,c0,M0,I0.start,I0.stop,!1,I0.reversed)};function it(ha,Rp,Gt,Gp,c0,M0,I0,k0,V0,$0){var W0=c0.length,gm;Gp==="linear"?gm={node:"linearGradient",attrs:{x1:I0.x,y1:I0.y,x2:k0.x,y2:k0.y,gradientUnits:V0?"userSpaceOnUse":"objectBoundingBox"},reversed:$0}:Gp==="radial"&&(gm={node:"radialGradient",reversed:$0});for(var F0=new Array(W0),bm=0;bm<W0;bm++)gm.reversed?F0[W0-1-bm]=[tt((1-c0[bm][0])*100),c0[bm][1]]:F0[bm]=[tt(c0[bm][0]*100),c0[bm][1]];var Dm=Rp._fullLayout,vm="g"+Dm._uid+"-"+Gt,km=Dm._defs.select(".gradients").selectAll("#"+vm).data([Gp+F0.join(";")],d.identity);km.exit().remove(),km.enter().append(gm.node).each(function(){var Yo=_.select(this);gm.attrs&&Yo.attr(gm.attrs),Yo.attr("id",vm);var qp=Yo.selectAll("stop").data(F0);qp.exit().remove(),qp.enter().append("stop"),qp.each(function(Mt){var Wt=b(Mt[1]);_.select(this).attr({offset:Mt[0]+"%","stop-color":S.tinyRGB(Wt),"stop-opacity":Wt.getAlpha()})})}),ha.style(M0,zt(vm,Rp)).style(M0+"-opacity",null),ha.classed("gradient_filled",!0)}M.pattern=function(ha,Rp,Gt,Gp,c0,M0,I0,k0,V0,$0,W0,gm){var F0=Rp==="legend";k0&&(V0==="overlay"?($0=k0,W0=S.contrast($0)):($0=void 0,W0=k0));var bm=Gt._fullLayout,Dm="p"+bm._uid+"-"+Gp,vm,km,Yo=function(J0,em,tm,Nm,o1){return Nm+(o1-Nm)*(J0-em)/(tm-em)},qp,Mt,Wt,xn,Fp={},Bp=b(W0),e0=S.tinyRGB(Bp),o0=Bp.getAlpha(),C0=gm*o0;switch(c0){case"/":vm=M0*Math.sqrt(2),km=M0*Math.sqrt(2),qp="M-"+vm/4+","+km/4+"l"+vm/2+",-"+km/2+"M0,"+km+"L"+vm+",0M"+vm/4*3+","+km/4*5+"l"+vm/2+",-"+km/2,Mt=I0*M0,xn="path",Fp={d:qp,opacity:C0,stroke:e0,"stroke-width":Mt+"px"};break;case"\\":vm=M0*Math.sqrt(2),km=M0*Math.sqrt(2),qp="M"+vm/4*3+",-"+km/4+"l"+vm/2+","+km/2+"M0,0L"+vm+","+km+"M-"+vm/4+","+km/4*3+"l"+vm/2+","+km/2,Mt=I0*M0,xn="path",Fp={d:qp,opacity:C0,stroke:e0,"stroke-width":Mt+"px"};break;case"x":vm=M0*Math.sqrt(2),km=M0*Math.sqrt(2),qp="M-"+vm/4+","+km/4+"l"+vm/2+",-"+km/2+"M0,"+km+"L"+vm+",0M"+vm/4*3+","+km/4*5+"l"+vm/2+",-"+km/2+"M"+vm/4*3+",-"+km/4+"l"+vm/2+","+km/2+"M0,0L"+vm+","+km+"M-"+vm/4+","+km/4*3+"l"+vm/2+","+km/2,Mt=M0-M0*Math.sqrt(1-I0),xn="path",Fp={d:qp,opacity:C0,stroke:e0,"stroke-width":Mt+"px"};break;case"|":vm=M0,km=M0,xn="path",qp="M"+vm/2+",0L"+vm/2+","+km,Mt=I0*M0,xn="path",Fp={d:qp,opacity:C0,stroke:e0,"stroke-width":Mt+"px"};break;case"-":vm=M0,km=M0,xn="path",qp="M0,"+km/2+"L"+vm+","+km/2,Mt=I0*M0,xn="path",Fp={d:qp,opacity:C0,stroke:e0,"stroke-width":Mt+"px"};break;case"+":vm=M0,km=M0,xn="path",qp="M"+vm/2+",0L"+vm/2+","+km+"M0,"+km/2+"L"+vm+","+km/2,Mt=M0-M0*Math.sqrt(1-I0),xn="path",Fp={d:qp,opacity:C0,stroke:e0,"stroke-width":Mt+"px"};break;case".":vm=M0,km=M0,I0<Math.PI/4?Wt=Math.sqrt(I0*M0*M0/Math.PI):Wt=Yo(I0,Math.PI/4,1,M0/2,M0/Math.sqrt(2)),xn="circle",Fp={cx:vm/2,cy:km/2,r:Wt,opacity:C0,fill:e0};break;default:vm=M0,km=M0,xn="path",Fp={d:c0,opacity:C0,fill:e0};break}var T0=[c0||"noSh",$0||"noBg",W0||"noFg",M0,I0].join(";"),A0=bm._defs.select(".patterns").selectAll("#"+Dm).data([T0],d.identity);A0.exit().remove(),A0.enter().append("pattern").each(function(){var J0=_.select(this);if(J0.attr({id:Dm,width:vm+"px",height:km+"px",patternUnits:"userSpaceOnUse",patternTransform:F0?"scale(0.8)":""}),$0){var em=b($0),tm=S.tinyRGB(em),Nm=em.getAlpha(),o1=J0.selectAll("rect").data([0]);o1.exit().remove(),o1.enter().append("rect").attr({width:vm+"px",height:km+"px",fill:tm,"fill-opacity":Nm})}var N1=J0.selectAll(xn).data([0]);N1.exit().remove(),N1.enter().append(xn).attr(Fp)}),ha.style("fill",zt(Dm,Gt)).style("fill-opacity",null),ha.classed("pattern_filled",!0)},M.initGradients=function(ha){var Rp=ha._fullLayout,Gt=d.ensureSingle(Rp._defs,"g","gradients");Gt.selectAll("linearGradient,radialGradient").remove(),_.select(ha).selectAll(".gradient_filled").classed("gradient_filled",!1)},M.initPatterns=function(ha){var Rp=ha._fullLayout,Gt=d.ensureSingle(Rp._defs,"g","patterns");Gt.selectAll("pattern").remove(),_.select(ha).selectAll(".pattern_filled").classed("pattern_filled",!1)},M.getPatternAttr=function(ha,Rp,Gt){return ha&&d.isArrayOrTypedArray(ha)?Rp<ha.length?ha[Rp]:Gt:ha},M.pointStyle=function(ha,Rp,Gt,Gp){if(ha.size()){var c0=M.makePointStyleFns(Rp);ha.each(function(M0){M.singlePointStyle(M0,_.select(this),Rp,c0,Gt,Gp)})}},M.singlePointStyle=function(ha,Rp,Gt,Gp,c0,M0){var I0=Gt.marker,k0=I0.line;if(M0&&M0.i>=0&&ha.i===void 0&&(ha.i=M0.i),Rp.style("opacity",Gp.selectedOpacityFn?Gp.selectedOpacityFn(ha):ha.mo===void 0?I0.opacity:ha.mo),Gp.ms2mrc){var V0;ha.ms==="various"||I0.size==="various"?V0=3:V0=Gp.ms2mrc(ha.ms),ha.mrc=V0,Gp.selectedSizeFn&&(V0=ha.mrc=Gp.selectedSizeFn(ha));var $0=M.symbolNumber(ha.mx||I0.symbol)||0;ha.om=$0%200>=100;var W0=_0(ha,Gt),gm=we(ha,Gt);Rp.attr("d",xt($0,V0,W0,gm))}var F0=!1,bm,Dm,vm;if(ha.so)vm=k0.outlierwidth,Dm=k0.outliercolor,bm=I0.outliercolor;else{var km=(k0||{}).width;vm=(ha.mlw+1||km+1||(ha.trace?(ha.trace.marker.line||{}).width:0)+1)-1||0,"mlc"in ha?Dm=ha.mlcc=Gp.lineScale(ha.mlc):d.isArrayOrTypedArray(k0.color)?Dm=S.defaultLine:Dm=k0.color,d.isArrayOrTypedArray(I0.color)&&(bm=S.defaultLine,F0=!0),"mc"in ha?bm=ha.mcc=Gp.markerScale(ha.mc):bm=I0.color||I0.colors||"rgba(0,0,0,0)",Gp.selectedColorFn&&(bm=Gp.selectedColorFn(ha))}if(ha.om)Rp.call(S.stroke,bm).style({"stroke-width":(vm||1)+"px",fill:"none"});else{Rp.style("stroke-width",(ha.isBlank?0:vm)+"px");var Yo=I0.gradient,qp=ha.mgt;qp?F0=!0:qp=Yo&&Yo.type,d.isArrayOrTypedArray(qp)&&(qp=qp[0],ht[qp]||(qp=0));var Mt=I0.pattern,Wt=M.getPatternAttr,xn=Mt&&(Wt(Mt.shape,ha.i,"")||Wt(Mt.path,ha.i,""));if(qp&&qp!=="none"){var Fp=ha.mgc;Fp?F0=!0:Fp=Yo.color;var Bp=Gt.uid;F0&&(Bp+="-"+ha.i),M.gradient(Rp,c0,Bp,qp,[[0,Fp],[1,bm]],"fill")}else if(xn){var e0=!1,o0=Mt.fgcolor;!o0&&M0&&M0.color&&(o0=M0.color,e0=!0);var C0=Wt(o0,ha.i,M0&&M0.color||null),T0=Wt(Mt.bgcolor,ha.i,null),A0=Mt.fgopacity,J0=Wt(Mt.size,ha.i,8),em=Wt(Mt.solidity,ha.i,.3);e0=e0||ha.mcc||d.isArrayOrTypedArray(Mt.shape)||d.isArrayOrTypedArray(Mt.path)||d.isArrayOrTypedArray(Mt.bgcolor)||d.isArrayOrTypedArray(Mt.fgcolor)||d.isArrayOrTypedArray(Mt.size)||d.isArrayOrTypedArray(Mt.solidity);var tm=Gt.uid;e0&&(tm+="-"+ha.i),M.pattern(Rp,"point",c0,tm,xn,J0,em,ha.mcc,Mt.fillmode,T0,C0,A0)}else d.isArrayOrTypedArray(bm)?S.fill(Rp,bm[ha.i]):S.fill(Rp,bm);vm&&S.stroke(Rp,Dm)}},M.makePointStyleFns=function(ha){var Rp={},Gt=ha.marker;return Rp.markerScale=M.tryColorscale(Gt,""),Rp.lineScale=M.tryColorscale(Gt,"line"),w.traceIs(ha,"symbols")&&(Rp.ms2mrc=z.isBubble(ha)?I(ha):function(){return(Gt.size||6)/2}),ha.selectedpoints&&d.extendFlat(Rp,M.makeSelectedPointStyleFns(ha)),Rp},M.makeSelectedPointStyleFns=function(ha){var Rp={},Gt=ha.selected||{},Gp=ha.unselected||{},c0=ha.marker||{},M0=Gt.marker||{},I0=Gp.marker||{},k0=c0.opacity,V0=M0.opacity,$0=I0.opacity,W0=V0!==void 0,gm=$0!==void 0;(d.isArrayOrTypedArray(k0)||W0||gm)&&(Rp.selectedOpacityFn=function(Wt){var xn=Wt.mo===void 0?c0.opacity:Wt.mo;return Wt.selected?W0?V0:xn:gm?$0:j*xn});var F0=c0.color,bm=M0.color,Dm=I0.color;(bm||Dm)&&(Rp.selectedColorFn=function(Wt){var xn=Wt.mcc||F0;return Wt.selected?bm||xn:Dm||xn});var vm=c0.size,km=M0.size,Yo=I0.size,qp=km!==void 0,Mt=Yo!==void 0;return w.traceIs(ha,"symbols")&&(qp||Mt)&&(Rp.selectedSizeFn=function(Wt){var xn=Wt.mrc||vm/2;return Wt.selected?qp?km/2:xn:Mt?Yo/2:xn}),Rp},M.makeSelectedTextStyleFns=function(ha){var Rp={},Gt=ha.selected||{},Gp=ha.unselected||{},c0=ha.textfont||{},M0=Gt.textfont||{},I0=Gp.textfont||{},k0=c0.color,V0=M0.color,$0=I0.color;return Rp.selectedTextColorFn=function(W0){var gm=W0.tc||k0;return W0.selected?V0||gm:$0||(V0?gm:S.addOpacity(gm,j))},Rp},M.selectedPointStyle=function(ha,Rp){if(!(!ha.size()||!Rp.selectedpoints)){var Gt=M.makeSelectedPointStyleFns(Rp),Gp=Rp.marker||{},c0=[];Gt.selectedOpacityFn&&c0.push(function(M0,I0){M0.style("opacity",Gt.selectedOpacityFn(I0))}),Gt.selectedColorFn&&c0.push(function(M0,I0){S.fill(M0,Gt.selectedColorFn(I0))}),Gt.selectedSizeFn&&c0.push(function(M0,I0){var k0=I0.mx||Gp.symbol||0,V0=Gt.selectedSizeFn(I0);M0.attr("d",xt(M.symbolNumber(k0),V0,_0(I0,Rp),we(I0,Rp))),I0.mrc2=V0}),c0.length&&ha.each(function(M0){for(var I0=_.select(this),k0=0;k0<c0.length;k0++)c0[k0](I0,M0)})}},M.tryColorscale=function(ha,Rp){var Gt=Rp?d.nestedProperty(ha,Rp).get():ha;if(Gt){var Gp=Gt.color;if((Gt.colorscale||Gt._colorAx)&&d.isArrayOrTypedArray(Gp))return C.makeColorScaleFuncFromTrace(Gt)}return d.identity};var ut={start:1,end:-1,middle:0,bottom:1,top:-1};function vt(ha,Rp,Gt,Gp,c0){var M0=_.select(ha.node().parentNode),I0=Rp.indexOf("top")!==-1?"top":Rp.indexOf("bottom")!==-1?"bottom":"middle",k0=Rp.indexOf("left")!==-1?"end":Rp.indexOf("right")!==-1?"start":"middle",V0=Gp?Gp/.8+1:0,$0=(F.lineCount(ha)-1)*$+1,W0=ut[k0]*V0,gm=Gt*.75+ut[I0]*V0+(ut[I0]-1)*$0*Gt/2;ha.attr("text-anchor",k0),c0||M0.attr("transform",p(W0,gm))}function _t(ha,Rp){var Gt=ha.ts||Rp.textfont.size;return E(Gt)&&Gt>0?Gt:0}M.textPointStyle=function(ha,Rp,Gt){if(ha.size()){var Gp;if(Rp.selectedpoints){var c0=M.makeSelectedTextStyleFns(Rp);Gp=c0.selectedTextColorFn}var M0=Rp.texttemplate,I0=Gt._fullLayout;ha.each(function(k0){var V0=_.select(this),$0=M0?d.extractOption(k0,Rp,"txt","texttemplate"):d.extractOption(k0,Rp,"tx","text");if(!$0&&$0!==0){V0.remove();return}if(M0){var W0=Rp._module.formatLabels,gm=W0?W0(k0,Rp,I0):{},F0={};G(F0,Rp,k0.i);var bm=Rp._meta||{};$0=d.texttemplateString($0,gm,I0._d3locale,F0,k0,bm)}var Dm=k0.tp||Rp.textposition,vm=_t(k0,Rp),km=Gp?Gp(k0):k0.tc||Rp.textfont.color;V0.call(M.font,{family:k0.tf||Rp.textfont.family,weight:k0.tw||Rp.textfont.weight,style:k0.ty||Rp.textfont.style,variant:k0.tv||Rp.textfont.variant,textcase:k0.tC||Rp.textfont.textcase,lineposition:k0.tE||Rp.textfont.lineposition,shadow:k0.tS||Rp.textfont.shadow,size:vm,color:km}).text($0).call(F.convertToTspans,Gt).call(vt,Dm,vm,k0.mrc)})}},M.selectedTextStyle=function(ha,Rp){if(!(!ha.size()||!Rp.selectedpoints)){var Gt=M.makeSelectedTextStyleFns(Rp);ha.each(function(Gp){var c0=_.select(this),M0=Gt.selectedTextColorFn(Gp),I0=Gp.tp||Rp.textposition,k0=_t(Gp,Rp);S.fill(c0,M0);var V0=w.traceIs(Rp,"bar-like");vt(c0,I0,k0,Gp.mrc2||Gp.mrc,V0)})}};var Le=.5;M.smoothopen=function(ha,Rp){if(ha.length<3)return"M"+ha.join("L");var Gt="M"+ha[0],Gp=[],c0;for(c0=1;c0<ha.length-1;c0++)Gp.push(aa(ha[c0-1],ha[c0],ha[c0+1],Rp));for(Gt+="Q"+Gp[0][0]+" "+ha[1],c0=2;c0<ha.length-1;c0++)Gt+="C"+Gp[c0-2][1]+" "+Gp[c0-1][0]+" "+ha[c0];return Gt+="Q"+Gp[ha.length-3][1]+" "+ha[ha.length-1],Gt},M.smoothclosed=function(ha,Rp){if(ha.length<3)return"M"+ha.join("L")+"Z";var Gt="M"+ha[0],Gp=ha.length-1,c0=[aa(ha[Gp],ha[0],ha[1],Rp)],M0;for(M0=1;M0<Gp;M0++)c0.push(aa(ha[M0-1],ha[M0],ha[M0+1],Rp));for(c0.push(aa(ha[Gp-1],ha[Gp],ha[0],Rp)),M0=1;M0<=Gp;M0++)Gt+="C"+c0[M0-1][1]+" "+c0[M0][0]+" "+ha[M0];return Gt+="C"+c0[Gp][1]+" "+c0[0][0]+" "+ha[0]+"Z",Gt};var wt,St;function Ut(ha,Rp,Gt){return Gt&&(ha=pt(ha)),Rp?jt(ha[1]):kt(ha[0])}function kt(ha){var Rp=_.round(ha,2);return wt=Rp,Rp}function jt(ha){var Rp=_.round(ha,2);return St=Rp,Rp}function aa(ha,Rp,Gt,Gp){var c0=ha[0]-Rp[0],M0=ha[1]-Rp[1],I0=Gt[0]-Rp[0],k0=Gt[1]-Rp[1],V0=Math.pow(c0*c0+M0*M0,Le/2),$0=Math.pow(I0*I0+k0*k0,Le/2),W0=($0*$0*c0-V0*V0*I0)*Gp,gm=($0*$0*M0-V0*V0*k0)*Gp,F0=3*$0*(V0+$0),bm=3*V0*(V0+$0);return[[kt(Rp[0]+(F0&&W0/F0)),jt(Rp[1]+(F0&&gm/F0))],[kt(Rp[0]-(bm&&W0/bm)),jt(Rp[1]-(bm&&gm/bm))]]}var ca={hv:function(ha,Rp,Gt){return"H"+kt(Rp[0])+"V"+Ut(Rp,1,Gt)},vh:function(ha,Rp,Gt){return"V"+jt(Rp[1])+"H"+Ut(Rp,0,Gt)},hvh:function(ha,Rp,Gt){return"H"+kt((ha[0]+Rp[0])/2)+"V"+jt(Rp[1])+"H"+Ut(Rp,0,Gt)},vhv:function(ha,Rp,Gt){return"V"+jt((ha[1]+Rp[1])/2)+"H"+kt(Rp[0])+"V"+Ut(Rp,1,Gt)}},Cp=function(ha,Rp,Gt){return"L"+Ut(Rp,0,Gt)+","+Ut(Rp,1,Gt)};M.steps=function(ha){var Rp=ca[ha]||Cp;return function(Gt){for(var Gp="M"+kt(Gt[0][0])+","+jt(Gt[0][1]),c0=Gt.length,M0=1;M0<c0;M0++)Gp+=Rp(Gt[M0-1],Gt[M0],M0===c0-1);return Gp}};function pt(ha,Rp){var Gt=ha.backoff,Gp=ha.trace,c0=ha.d,M0=ha.i;if(Gt&&Gp&&Gp.marker&&Gp.marker.angle%360===0&&Gp.line&&Gp.line.shape!=="spline"){var I0=d.isArrayOrTypedArray(Gt),k0=ha,V0=Rp?Rp[0]:wt||0,$0=Rp?Rp[1]:St||0,W0=k0[0],gm=k0[1],F0=W0-V0,bm=gm-$0,Dm=Math.atan2(bm,F0),vm=I0?Gt[M0]:Gt;if(vm==="auto"){var km=k0.i;Gp.type==="scatter"&&km--;var Yo=k0.marker,qp=Yo.symbol;d.isArrayOrTypedArray(qp)&&(qp=qp[km]);var Mt=Yo.size;d.isArrayOrTypedArray(Mt)&&(Mt=Mt[km]),vm=Yo?M.symbolBackOffs[M.symbolNumber(qp)]*Mt:0,vm+=M.getMarkerStandoff(c0[km],Gp)||0}var Wt=W0-vm*Math.cos(Dm),xn=gm-vm*Math.sin(Dm);(Wt<=W0&&Wt>=V0||Wt>=W0&&Wt<=V0)&&(xn<=gm&&xn>=$0||xn>=gm&&xn<=$0)&&(ha=[Wt,xn])}return ha}M.applyBackoff=pt,M.makeTester=function(){var ha=d.ensureSingleById(_.select("body"),"svg","js-plotly-tester",function(Gt){Gt.attr(A.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),Rp=d.ensureSingle(ha,"path","js-reference-point",function(Gt){Gt.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});M.tester=ha,M.testref=Rp},M.savedBBoxes={};var gt=0,te=1e4;M.bBox=function(ha,Rp,Gt){Gt||(Gt=Et(ha));var Gp;if(Gt){if(Gp=M.savedBBoxes[Gt],Gp)return d.extendFlat({},Gp)}else if(ha.childNodes.length===1){var c0=ha.childNodes[0];if(Gt=Et(c0),Gt){var M0=+c0.getAttribute("x")||0,I0=+c0.getAttribute("y")||0,k0=c0.getAttribute("transform");if(!k0){var V0=M.bBox(c0,!1,Gt);return M0&&(V0.left+=M0,V0.right+=M0),I0&&(V0.top+=I0,V0.bottom+=I0),V0}if(Gt+="~"+M0+"~"+I0+"~"+k0,Gp=M.savedBBoxes[Gt],Gp)return d.extendFlat({},Gp)}}var $0,W0;Rp?$0=ha:(W0=M.tester.node(),$0=ha.cloneNode(!0),W0.appendChild($0)),_.select($0).attr("transform",null).call(F.positionText,0,0);var gm=$0.getBoundingClientRect(),F0=M.testref.node().getBoundingClientRect();Rp||W0.removeChild($0);var bm={height:gm.height,width:gm.width,left:gm.left-F0.left,top:gm.top-F0.top,right:gm.right-F0.left,bottom:gm.bottom-F0.top};return gt>=te&&(M.savedBBoxes={},gt=0),Gt&&(M.savedBBoxes[Gt]=bm),gt++,d.extendFlat({},bm)};function Et(ha){var Rp=ha.getAttribute("data-unformatted");if(Rp!==null)return Rp+ha.getAttribute("data-math")+ha.getAttribute("text-anchor")+ha.getAttribute("style")}M.setClipUrl=function(ha,Rp,Gt){ha.attr("clip-path",zt(Rp,Gt))};function zt(ha,Rp){if(!ha)return null;var Gt=Rp._context,Gp=Gt._exportedPlot?"":Gt._baseUrl||"";return Gp?"url('"+Gp+"#"+ha+"')":"url(#"+ha+")"}M.getTranslate=function(ha){var Rp=/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,Gt=ha.attr?"attr":"getAttribute",Gp=ha[Gt]("transform")||"",c0=Gp.replace(Rp,function(M0,I0,k0){return[I0,k0].join(" ")}).split(" ");return{x:+c0[0]||0,y:+c0[1]||0}},M.setTranslate=function(ha,Rp,Gt){var Gp=/(\btranslate\(.*?\);?)/,c0=ha.attr?"attr":"getAttribute",M0=ha.attr?"attr":"setAttribute",I0=ha[c0]("transform")||"";return Rp=Rp||0,Gt=Gt||0,I0=I0.replace(Gp,"").trim(),I0+=p(Rp,Gt),I0=I0.trim(),ha[M0]("transform",I0),I0},M.getScale=function(ha){var Rp=/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,Gt=ha.attr?"attr":"getAttribute",Gp=ha[Gt]("transform")||"",c0=Gp.replace(Rp,function(M0,I0,k0){return[I0,k0].join(" ")}).split(" ");return{x:+c0[0]||1,y:+c0[1]||1}},M.setScale=function(ha,Rp,Gt){var Gp=/(\bscale\(.*?\);?)/,c0=ha.attr?"attr":"getAttribute",M0=ha.attr?"attr":"setAttribute",I0=ha[c0]("transform")||"";return Rp=Rp||1,Gt=Gt||1,I0=I0.replace(Gp,"").trim(),I0+="scale("+Rp+","+Gt+")",I0=I0.trim(),ha[M0]("transform",I0),I0};var rt=/\s*sc.*/;M.setPointGroupScale=function(ha,Rp,Gt){if(Rp=Rp||1,Gt=Gt||1,!!ha){var Gp=Rp===1&&Gt===1?"":"scale("+Rp+","+Gt+")";ha.each(function(){var c0=(this.getAttribute("transform")||"").replace(rt,"");c0+=Gp,c0=c0.trim(),this.setAttribute("transform",c0)})}};var Z=/translate\([^)]*\)\s*$/;M.setTextPointsScale=function(ha,Rp,Gt){ha&&ha.each(function(){var Gp,c0=_.select(this),M0=c0.select("text");if(M0.node()){var I0=parseFloat(M0.attr("x")||0),k0=parseFloat(M0.attr("y")||0),V0=(c0.attr("transform")||"").match(Z);Rp===1&&Gt===1?Gp=[]:Gp=[p(I0,k0),"scale("+Rp+","+Gt+")",p(-I0,-k0)],V0&&Gp.push(V0),c0.attr("transform",Gp.join(""))}})};function we(ha,Rp){var Gt;return ha&&(Gt=ha.mf),Gt===void 0&&(Gt=Rp.marker&&Rp.marker.standoff||0),!Rp._geo&&!Rp._xA?-Gt:Gt}M.getMarkerStandoff=we;var ot=Math.atan2,mt=Math.cos,It=Math.sin;function Yt(ha,Rp){var Gt=Rp[0],Gp=Rp[1];return[Gt*mt(ha)-Gp*It(ha),Gt*It(ha)+Gp*mt(ha)]}var Sr,Op,Hp,n0,R0,w0;function _0(ha,Rp){var Gt=ha.ma;Gt===void 0&&(Gt=Rp.marker.angle,(!Gt||d.isArrayOrTypedArray(Gt))&&(Gt=0));var Gp,c0,M0=Rp.marker.angleref;if(M0==="previous"||M0==="north"){if(Rp._geo){var I0=Rp._geo.project(ha.lonlat);Gp=I0[0],c0=I0[1]}else{var k0=Rp._xA,V0=Rp._yA;if(k0&&V0)Gp=k0.c2p(ha.x),c0=V0.c2p(ha.y);else return 90}if(Rp._geo){var $0=ha.lonlat[0],W0=ha.lonlat[1],gm=Rp._geo.project([$0,W0+1e-5]),F0=Rp._geo.project([$0+1e-5,W0]),bm=ot(F0[1]-c0,F0[0]-Gp),Dm=ot(gm[1]-c0,gm[0]-Gp),vm;if(M0==="north")vm=Gt/180*Math.PI;else if(M0==="previous"){var km=$0/180*Math.PI,Yo=W0/180*Math.PI,qp=Sr/180*Math.PI,Mt=Op/180*Math.PI,Wt=qp-km,xn=mt(Mt)*It(Wt),Fp=It(Mt)*mt(Yo)-mt(Mt)*It(Yo)*mt(Wt);vm=-ot(xn,Fp)-Math.PI,Sr=$0,Op=W0}var Bp=Yt(bm,[mt(vm),0]),e0=Yt(Dm,[It(vm),0]);Gt=ot(Bp[1]+e0[1],Bp[0]+e0[0])/Math.PI*180,M0==="previous"&&!(w0===Rp.uid&&ha.i===R0+1)&&(Gt=null)}if(M0==="previous"&&!Rp._geo)if(w0===Rp.uid&&ha.i===R0+1&&E(Gp)&&E(c0)){var o0=Gp-Hp,C0=c0-n0,T0=Rp.line&&Rp.line.shape||"",A0=T0.slice(T0.length-1);A0==="h"&&(C0=0),A0==="v"&&(o0=0),Gt+=ot(C0,o0)/Math.PI*180+90}else Gt=null}return Hp=Gp,n0=c0,R0=ha.i,w0=Rp.uid,Gt}M.getMarkerAngle=_0}),lm=r((nt,ke)=>{var _=o(),d=v(),m=cg(),E=y1(),b=et(),w=b.strTranslate,S=Q0(),C=Mn(),p=G1(),F=sa(),A=K1().OPPOSITE_SIDE,O=/ [XY][0-9]* /,$=1.6,j=1.6;function z(I,G,M){var L=I._fullLayout,B=M.propContainer,X=M.propName,ee=M.placeholder,yt=M.traceIndex,Ze=M.avoid||{},Re=M.attributes,Q=M.transform,xt=M.containerGroup,tt=1,ht=B.title,it=(ht&&ht.text?ht.text:"").trim(),ut=!1,vt=ht&&ht.font?ht.font:{},_t=vt.family,Le=vt.size,wt=vt.color,St=vt.weight,Ut=vt.style,kt=vt.variant,jt=vt.textcase,aa=vt.lineposition,ca=vt.shadow,Cp=M.subtitlePropName,pt=!!Cp,gt=M.subtitlePlaceholder,te=(B.title||{}).subtitle||{text:"",font:{}},Et=(te.text||"").trim(),zt=!1,rt=1,Z=te.font,we=Z.family,ot=Z.size,mt=Z.color,It=Z.weight,Yt=Z.style,Sr=Z.variant,Op=Z.textcase,Hp=Z.lineposition,n0=Z.shadow,R0;X==="title.text"?R0="titleText":X.indexOf("axis")!==-1?R0="axisTitleText":X.indexOf("colorbar")!==-1&&(R0="colorbarTitleText");var w0=I._context.edits[R0];function _0(F0,bm){return F0===void 0||bm===void 0?!1:F0.replace(O," % ")===bm.replace(O," % ")}it===""?tt=0:_0(it,ee)&&(w0||(it=""),tt=.2,ut=!0),pt&&(Et===""?rt=0:_0(Et,gt)&&(w0||(Et=""),rt=.2,zt=!0)),M._meta?it=b.templateString(it,M._meta):L._meta&&(it=b.templateString(it,L._meta));var ha=it||Et||w0,Rp;xt||(xt=b.ensureSingle(L._infolayer,"g","g-"+G),Rp=L._hColorbarMoveTitle);var Gt=xt.selectAll("text."+G).data(ha?[0]:[]);Gt.enter().append("text"),Gt.text(it).attr("class",G),Gt.exit().remove();var Gp=null,c0=G+"-subtitle",M0=Et||w0;if(pt&&(Gp=xt.selectAll("text."+c0).data(M0?[0]:[]),Gp.enter().append("text"),Gp.text(Et).attr("class",c0),Gp.exit().remove()),!ha)return xt;function I0(F0,bm){b.syncOrAsync([k0,V0],{title:F0,subtitle:bm})}function k0(F0){var bm=F0.title,Dm=F0.subtitle,vm;!Q&&Rp&&(Q={}),Q?(vm="",Q.rotate&&(vm+="rotate("+[Q.rotate,Re.x,Re.y]+")"),(Q.offset||Rp)&&(vm+=w(0,(Q.offset||0)-(Rp||0)))):vm=null,bm.attr("transform",vm);function km(Fp){if(Fp){var Bp=_.select(Fp.node().parentNode).select("."+c0);if(!Bp.empty()){var e0=Fp.node().getBBox();if(e0.height){var o0=e0.y+e0.height+$*ot;Bp.attr("y",o0)}}}}if(bm.style("opacity",tt*C.opacity(wt)).call(S.font,{color:C.rgb(wt),size:_.round(Le,2),family:_t,weight:St,style:Ut,variant:kt,textcase:jt,shadow:ca,lineposition:aa}).attr(Re).call(p.convertToTspans,I,km),Dm&&!Dm.empty()){var Yo=xt.select("."+G+"-math-group"),qp=bm.node().getBBox(),Mt=Yo.node()?Yo.node().getBBox():void 0,Wt=Mt?Mt.y+Mt.height+$*ot:qp.y+qp.height+j*ot,xn=b.extendFlat({},Re,{y:Wt});Dm.attr("transform",vm),Dm.style("opacity",rt*C.opacity(mt)).call(S.font,{color:C.rgb(mt),size:_.round(ot,2),family:we,weight:It,style:Yt,variant:Sr,textcase:Op,shadow:n0,lineposition:Hp}).attr(xn).call(p.convertToTspans,I)}return m.previousPromises(I)}function V0(F0){var bm=F0.title,Dm=_.select(bm.node().parentNode);if(Ze&&Ze.selection&&Ze.side&&it){Dm.attr("transform",null);var vm=A[Ze.side],km=Ze.side==="left"||Ze.side==="top"?-1:1,Yo=d(Ze.pad)?Ze.pad:2,qp=S.bBox(Dm.node()),Mt={t:0,b:0,l:0,r:0},Wt=I._fullLayout._reservedMargin;for(var xn in Wt)for(var Fp in Wt[xn]){var Bp=Wt[xn][Fp];Mt[Fp]=Math.max(Mt[Fp],Bp)}var e0={left:Mt.l,top:Mt.t,right:L.width-Mt.r,bottom:L.height-Mt.b},o0=Ze.maxShift||km*(e0[Ze.side]-qp[Ze.side]),C0=0;if(o0<0)C0=o0;else{var T0=Ze.offsetLeft||0,A0=Ze.offsetTop||0;qp.left-=T0,qp.right-=T0,qp.top-=A0,qp.bottom-=A0,Ze.selection.each(function(){var em=S.bBox(this);b.bBoxIntersect(qp,em,Yo)&&(C0=Math.max(C0,km*(em[Ze.side]-qp[vm])+Yo))}),C0=Math.min(o0,C0),B._titleScoot=Math.abs(C0)}if(C0>0||o0<0){var J0={left:[-C0,0],right:[C0,0],top:[0,-C0],bottom:[0,C0]}[Ze.side];Dm.attr("transform",w(J0[0],J0[1]))}}}Gt.call(I0,Gp);function $0(F0,bm){F0.text(bm).on("mouseover.opacity",function(){_.select(this).transition().duration(F.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){_.select(this).transition().duration(F.HIDE_PLACEHOLDER).style("opacity",0)})}if(w0&&(it?Gt.on(".opacity",null):($0(Gt,ee),ut=!0),Gt.call(p.makeEditable,{gd:I}).on("edit",function(F0){yt!==void 0?E.call("_guiRestyle",I,X,F0,yt):E.call("_guiRelayout",I,X,F0)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(I0)}).on("input",function(F0){this.text(F0||" ").call(p.positionText,Re.x,Re.y)}),pt)){if(pt&&!it){var W0=Gt.node().getBBox(),gm=W0.y+W0.height+j*ot;Gp.attr("y",gm)}Et?Gp.on(".opacity",null):($0(Gp,gt),zt=!0),Gp.call(p.makeEditable,{gd:I}).on("edit",function(F0){E.call("_guiRelayout",I,"title.subtitle.text",F0)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(I0)}).on("input",function(F0){this.text(F0||" ").call(p.positionText,Gp.attr("x"),Gp.attr("y"))})}return Gt.classed("js-placeholder",ut),Gp&&!Gp.empty()&&Gp.classed("js-placeholder",zt),xt}ke.exports={draw:z,SUBTITLE_PADDING_EM:j,SUBTITLE_PADDING_MATHJAX_EM:$}}),hm=r((nt,ke)=>{var _=o(),d=u().utcFormat,m=et(),E=m.numberFormat,b=v(),w=m.cleanNumber,S=m.ms2DateTime,C=m.dateTime2ms,p=m.ensureNumber,F=m.isArrayOrTypedArray,A=g(),O=A.FP_SAFE,$=A.BADNUM,j=A.LOG_CLIP,z=A.ONEWEEK,I=A.ONEDAY,G=A.ONEHOUR,M=A.ONEMIN,L=A.ONESEC,B=D1(),X=Vm(),ee=X.HOUR_PATTERN,yt=X.WEEKDAY_PATTERN;function Ze(Q){return Math.pow(10,Q)}function Re(Q){return Q!=null}ke.exports=function(Q,xt){xt=xt||{};var tt=Q._id||"x",ht=tt.charAt(0);function it(te,Et){if(te>0)return Math.log(te)/Math.LN10;if(te<=0&&Et&&Q.range&&Q.range.length===2){var zt=Q.range[0],rt=Q.range[1];return .5*(zt+rt-2*j*Math.abs(zt-rt))}else return $}function ut(te,Et,zt,rt){if((rt||{}).msUTC&&b(te))return+te;var Z=C(te,zt||Q.calendar);if(Z===$)if(b(te)){te=+te;var we=Math.floor(m.mod(te+.05,1)*10),ot=Math.round(te-we/10);Z=C(new Date(ot))+we/10}else return $;return Z}function vt(te,Et,zt){return S(te,Et,zt||Q.calendar)}function _t(te){return Q._categories[Math.round(te)]}function Le(te){if(Re(te)){if(Q._categoriesMap===void 0&&(Q._categoriesMap={}),Q._categoriesMap[te]!==void 0)return Q._categoriesMap[te];Q._categories.push(typeof te=="number"?String(te):te);var Et=Q._categories.length-1;return Q._categoriesMap[te]=Et,Et}return $}function wt(te,Et){for(var zt=new Array(Et),rt=0;rt<Et;rt++){var Z=(te[0]||[])[rt],we=(te[1]||[])[rt];zt[rt]=St([Z,we])}return zt}function St(te){if(Q._categoriesMap)return Q._categoriesMap[te]}function Ut(te){var Et=St(te);if(Et!==void 0)return Et;if(b(te))return+te}function kt(te){return b(te)?+te:St(te)}function jt(te,Et,zt){return _.round(zt+Et*te,2)}function aa(te,Et,zt){return(te-zt)/Et}var ca=function(te){return b(te)?jt(te,Q._m,Q._b):$},Cp=function(te){return aa(te,Q._m,Q._b)};if(Q.rangebreaks){var pt=ht==="y";ca=function(te){if(!b(te))return $;var Et=Q._rangebreaks.length;if(!Et)return jt(te,Q._m,Q._b);var zt=pt;Q.range[0]>Q.range[1]&&(zt=!zt);for(var rt=zt?-1:1,Z=rt*te,we=0,ot=0;ot<Et;ot++){var mt=rt*Q._rangebreaks[ot].min,It=rt*Q._rangebreaks[ot].max;if(Z<mt)break;if(Z>It)we=ot+1;else{we=Z<(mt+It)/2?ot:ot+1;break}}var Yt=Q._B[we]||0;return isFinite(Yt)?jt(te,Q._m2,Yt):0},Cp=function(te){var Et=Q._rangebreaks.length;if(!Et)return aa(te,Q._m,Q._b);for(var zt=0,rt=0;rt<Et&&!(te<Q._rangebreaks[rt].pmin);rt++)te>Q._rangebreaks[rt].pmax&&(zt=rt+1);return aa(te,Q._m2,Q._B[zt])}}Q.c2l=Q.type==="log"?it:p,Q.l2c=Q.type==="log"?Ze:p,Q.l2p=ca,Q.p2l=Cp,Q.c2p=Q.type==="log"?function(te,Et){return ca(it(te,Et))}:ca,Q.p2c=Q.type==="log"?function(te){return Ze(Cp(te))}:Cp,["linear","-"].indexOf(Q.type)!==-1?(Q.d2r=Q.r2d=Q.d2c=Q.r2c=Q.d2l=Q.r2l=w,Q.c2d=Q.c2r=Q.l2d=Q.l2r=p,Q.d2p=Q.r2p=function(te){return Q.l2p(w(te))},Q.p2d=Q.p2r=Cp,Q.cleanPos=p):Q.type==="log"?(Q.d2r=Q.d2l=function(te,Et){return it(w(te),Et)},Q.r2d=Q.r2c=function(te){return Ze(w(te))},Q.d2c=Q.r2l=w,Q.c2d=Q.l2r=p,Q.c2r=it,Q.l2d=Ze,Q.d2p=function(te,Et){return Q.l2p(Q.d2r(te,Et))},Q.p2d=function(te){return Ze(Cp(te))},Q.r2p=function(te){return Q.l2p(w(te))},Q.p2r=Cp,Q.cleanPos=p):Q.type==="date"?(Q.d2r=Q.r2d=m.identity,Q.d2c=Q.r2c=Q.d2l=Q.r2l=ut,Q.c2d=Q.c2r=Q.l2d=Q.l2r=vt,Q.d2p=Q.r2p=function(te,Et,zt){return Q.l2p(ut(te,0,zt))},Q.p2d=Q.p2r=function(te,Et,zt){return vt(Cp(te),Et,zt)},Q.cleanPos=function(te){return m.cleanDate(te,$,Q.calendar)}):Q.type==="category"?(Q.d2c=Q.d2l=Le,Q.r2d=Q.c2d=Q.l2d=_t,Q.d2r=Q.d2l_noadd=Ut,Q.r2c=function(te){var Et=kt(te);return Et!==void 0?Et:Q.fraction2r(.5)},Q.l2r=Q.c2r=p,Q.r2l=kt,Q.d2p=function(te){return Q.l2p(Q.r2c(te))},Q.p2d=function(te){return _t(Cp(te))},Q.r2p=Q.d2p,Q.p2r=Cp,Q.cleanPos=function(te){return typeof te=="string"&&te!==""?te:p(te)}):Q.type==="multicategory"&&(Q.r2d=Q.c2d=Q.l2d=_t,Q.d2r=Q.d2l_noadd=Ut,Q.r2c=function(te){var Et=Ut(te);return Et!==void 0?Et:Q.fraction2r(.5)},Q.r2c_just_indices=St,Q.l2r=Q.c2r=p,Q.r2l=Ut,Q.d2p=function(te){return Q.l2p(Q.r2c(te))},Q.p2d=function(te){return _t(Cp(te))},Q.r2p=Q.d2p,Q.p2r=Cp,Q.cleanPos=function(te){return Array.isArray(te)||typeof te=="string"&&te!==""?te:p(te)},Q.setupMultiCategory=function(te){var Et=Q._traceIndices,zt,rt,Z=Q._matchGroup;if(Z&&Q._categories.length===0){for(var we in Z)if(we!==tt){var ot=xt[B.id2name(we)];Et=Et.concat(ot._traceIndices)}}var mt=[[0,{}],[0,{}]],It=[];for(zt=0;zt<Et.length;zt++){var Yt=te[Et[zt]];if(ht in Yt){var Sr=Yt[ht],Op=Yt._length||m.minRowLength(Sr);if(F(Sr[0])&&F(Sr[1]))for(rt=0;rt<Op;rt++){var Hp=Sr[0][rt],n0=Sr[1][rt];Re(Hp)&&Re(n0)&&(It.push([Hp,n0]),Hp in mt[0][1]||(mt[0][1][Hp]=mt[0][0]++),n0 in mt[1][1]||(mt[1][1][n0]=mt[1][0]++))}}}for(It.sort(function(R0,w0){var _0=mt[0][1],ha=_0[R0[0]]-_0[w0[0]];if(ha)return ha;var Rp=mt[1][1];return Rp[R0[1]]-Rp[w0[1]]}),zt=0;zt<It.length;zt++)Le(It[zt])}),Q.fraction2r=function(te){var Et=Q.r2l(Q.range[0]),zt=Q.r2l(Q.range[1]);return Q.l2r(Et+te*(zt-Et))},Q.r2fraction=function(te){var Et=Q.r2l(Q.range[0]),zt=Q.r2l(Q.range[1]);return(Q.r2l(te)-Et)/(zt-Et)},Q.limitRange=function(te){var Et=Q.minallowed,zt=Q.maxallowed;if(!(Et===void 0&&zt===void 0)){te||(te="range");var rt=m.nestedProperty(Q,te).get(),Z=m.simpleMap(rt,Q.r2l),we=Z[1]<Z[0];we&&Z.reverse();var ot=m.simpleMap([Et,zt],Q.r2l);if(Et!==void 0&&Z[0]<ot[0]&&(rt[we?1:0]=Et),zt!==void 0&&Z[1]>ot[1]&&(rt[we?0:1]=zt),rt[0]===rt[1]){var mt=Q.l2r(Et),It=Q.l2r(zt);if(Et!==void 0){var Yt=mt+1;zt!==void 0&&(Yt=Math.min(Yt,It)),rt[we?1:0]=Yt}if(zt!==void 0){var Sr=It+1;Et!==void 0&&(Sr=Math.max(Sr,mt)),rt[we?0:1]=Sr}}}},Q.cleanRange=function(te,Et){Q._cleanRange(te,Et),Q.limitRange(te)},Q._cleanRange=function(te,Et){Et||(Et={}),te||(te="range");var zt=m.nestedProperty(Q,te).get(),rt,Z;if(Q.type==="date"?Z=m.dfltRange(Q.calendar):ht==="y"?Z=X.DFLTRANGEY:Q._name==="realaxis"?Z=[0,1]:Z=Et.dfltRange||X.DFLTRANGEX,Z=Z.slice(),(Q.rangemode==="tozero"||Q.rangemode==="nonnegative")&&(Z[0]=0),!zt||zt.length!==2){m.nestedProperty(Q,te).set(Z);return}var we=zt[0]===null,ot=zt[1]===null;for(Q.type==="date"&&!Q.autorange&&(zt[0]=m.cleanDate(zt[0],$,Q.calendar),zt[1]=m.cleanDate(zt[1],$,Q.calendar)),rt=0;rt<2;rt++)if(Q.type==="date"){if(!m.isDateTime(zt[rt],Q.calendar)){Q[te]=Z;break}if(Q.r2l(zt[0])===Q.r2l(zt[1])){var mt=m.constrain(Q.r2l(zt[0]),m.MIN_MS+1e3,m.MAX_MS-1e3);zt[0]=Q.l2r(mt-1e3),zt[1]=Q.l2r(mt+1e3);break}}else{if(!b(zt[rt]))if(!(we||ot)&&b(zt[1-rt]))zt[rt]=zt[1-rt]*(rt?10:.1);else{Q[te]=Z;break}if(zt[rt]<-O?zt[rt]=-O:zt[rt]>O&&(zt[rt]=O),zt[0]===zt[1]){var It=Math.max(1,Math.abs(zt[0]*1e-6));zt[0]-=It,zt[1]+=It}}},Q.setScale=function(te){var Et=xt._size;if(Q.overlaying){var zt=B.getFromId({_fullLayout:xt},Q.overlaying);Q.domain=zt.domain}var rt=te&&Q._r?"_r":"range",Z=Q.calendar;Q.cleanRange(rt);var we=Q.r2l(Q[rt][0],Z),ot=Q.r2l(Q[rt][1],Z),mt=ht==="y";if(mt?(Q._offset=Et.t+(1-Q.domain[1])*Et.h,Q._length=Et.h*(Q.domain[1]-Q.domain[0]),Q._m=Q._length/(we-ot),Q._b=-Q._m*ot):(Q._offset=Et.l+Q.domain[0]*Et.w,Q._length=Et.w*(Q.domain[1]-Q.domain[0]),Q._m=Q._length/(ot-we),Q._b=-Q._m*we),Q._rangebreaks=[],Q._lBreaks=0,Q._m2=0,Q._B=[],Q.rangebreaks){var It,Yt;if(Q._rangebreaks=Q.locateBreaks(Math.min(we,ot),Math.max(we,ot)),Q._rangebreaks.length){for(It=0;It<Q._rangebreaks.length;It++)Yt=Q._rangebreaks[It],Q._lBreaks+=Math.abs(Yt.max-Yt.min);var Sr=mt;we>ot&&(Sr=!Sr),Sr&&Q._rangebreaks.reverse();var Op=Sr?-1:1;for(Q._m2=Op*Q._length/(Math.abs(ot-we)-Q._lBreaks),Q._B.push(-Q._m2*(mt?ot:we)),It=0;It<Q._rangebreaks.length;It++)Yt=Q._rangebreaks[It],Q._B.push(Q._B[Q._B.length-1]-Op*Q._m2*(Yt.max-Yt.min));for(It=0;It<Q._rangebreaks.length;It++)Yt=Q._rangebreaks[It],Yt.pmin=ca(Yt.min),Yt.pmax=ca(Yt.max)}}if(!isFinite(Q._m)||!isFinite(Q._b)||Q._length<0)throw xt._replotting=!1,new Error("Something went wrong with axis scaling")},Q.maskBreaks=function(te){var Et=Q.rangebreaks||[],zt,rt,Z,we,ot;Et._cachedPatterns||(Et._cachedPatterns=Et.map(function(_0){return _0.enabled&&_0.bounds?m.simpleMap(_0.bounds,_0.pattern?w:Q.d2c):null})),Et._cachedValues||(Et._cachedValues=Et.map(function(_0){return _0.enabled&&_0.values?m.simpleMap(_0.values,Q.d2c).sort(m.sorterAsc):null}));for(var mt=0;mt<Et.length;mt++){var It=Et[mt];if(It.enabled){if(It.bounds){var Yt=It.pattern;switch(zt=Et._cachedPatterns[mt],rt=zt[0],Z=zt[1],Yt){case yt:ot=new Date(te),we=ot.getUTCDay(),rt>Z&&(Z+=7,we<rt&&(we+=7));break;case ee:ot=new Date(te);var Sr=ot.getUTCHours(),Op=ot.getUTCMinutes(),Hp=ot.getUTCSeconds(),n0=ot.getUTCMilliseconds();we=Sr+(Op/60+Hp/3600+n0/36e5),rt>Z&&(Z+=24,we<rt&&(we+=24));break;case"":we=te;break}if(we>=rt&&we<Z)return $}else for(var R0=Et._cachedValues[mt],w0=0;w0<R0.length;w0++)if(rt=R0[w0],Z=rt+It.dvalue,te>=rt&&te<Z)return $}}return te},Q.locateBreaks=function(te,Et){var zt,rt,Z,we,ot=[];if(!Q.rangebreaks)return ot;var mt=Q.rangebreaks.slice().sort(function(Rp,Gt){return Rp.pattern===yt&&Gt.pattern===ee?-1:Gt.pattern===yt&&Rp.pattern===ee?1:0}),It=function(Rp,Gt){if(Rp=m.constrain(Rp,te,Et),Gt=m.constrain(Gt,te,Et),Rp!==Gt){for(var Gp=!0,c0=0;c0<ot.length;c0++){var M0=ot[c0];Rp<M0.max&&Gt>=M0.min&&(Rp<M0.min&&(M0.min=Rp),Gt>M0.max&&(M0.max=Gt),Gp=!1)}Gp&&ot.push({min:Rp,max:Gt})}};for(zt=0;zt<mt.length;zt++){var Yt=mt[zt];if(Yt.enabled)if(Yt.bounds){var Sr=te,Op=Et;Yt.pattern&&(Sr=Math.floor(Sr)),rt=m.simpleMap(Yt.bounds,Yt.pattern?w:Q.r2l),Z=rt[0],we=rt[1];var Hp=new Date(Sr),n0,R0;switch(Yt.pattern){case yt:R0=z,n0=((we<Z?7:0)+(we-Z))*I,Sr+=Z*I-(Hp.getUTCDay()*I+Hp.getUTCHours()*G+Hp.getUTCMinutes()*M+Hp.getUTCSeconds()*L+Hp.getUTCMilliseconds());break;case ee:R0=I,n0=((we<Z?24:0)+(we-Z))*G,Sr+=Z*G-(Hp.getUTCHours()*G+Hp.getUTCMinutes()*M+Hp.getUTCSeconds()*L+Hp.getUTCMilliseconds());break;default:Sr=Math.min(rt[0],rt[1]),Op=Math.max(rt[0],rt[1]),R0=Op-Sr,n0=R0}for(var w0=Sr;w0<Op;w0+=R0)It(w0,w0+n0)}else for(var _0=m.simpleMap(Yt.values,Q.d2c),ha=0;ha<_0.length;ha++)Z=_0[ha],we=Z+Yt.dvalue,It(Z,we)}return ot.sort(function(Rp,Gt){return Rp.min-Gt.min}),ot},Q.makeCalcdata=function(te,Et,zt){var rt,Z,we,ot,mt=Q.type,It=mt==="date"&&te[Et+"calendar"];if(Et in te){if(rt=te[Et],ot=te._length||m.minRowLength(rt),m.isTypedArray(rt)&&(mt==="linear"||mt==="log")){if(ot===rt.length)return rt;if(rt.subarray)return rt.subarray(0,ot)}if(mt==="multicategory")return wt(rt,ot);for(Z=new Array(ot),we=0;we<ot;we++)Z[we]=Q.d2c(rt[we],0,It,zt)}else{var Yt=Et+"0"in te?Q.d2c(te[Et+"0"],0,It):0,Sr=te["d"+Et]?Number(te["d"+Et]):1;for(rt=te[{x:"y",y:"x"}[Et]],ot=te._length||rt.length,Z=new Array(ot),we=0;we<ot;we++)Z[we]=Yt+we*Sr}if(Q.rangebreaks)for(we=0;we<ot;we++)Z[we]=Q.maskBreaks(Z[we]);return Z},Q.isValidRange=function(te,Et){return Array.isArray(te)&&te.length===2&&(Et&&te[0]===null||b(Q.r2l(te[0])))&&(Et&&te[1]===null||b(Q.r2l(te[1])))},Q.getAutorangeDflt=function(te,Et){var zt=!Q.isValidRange(te,"nullOk");return zt&&Et&&Et.reverseDflt?zt="reversed":te&&(te[0]===null&&te[1]===null?zt=!0:te[0]===null&&te[1]!==null?zt="min":te[0]!==null&&te[1]===null&&(zt="max")),zt},Q.isReversed=function(){var te=Q.autorange;return te==="reversed"||te==="min reversed"||te==="max reversed"},Q.isPtWithinRange=function(te,Et){var zt=Q.c2l(te[ht],null,Et),rt=Q.r2l(Q.range[0]),Z=Q.r2l(Q.range[1]);return rt<Z?rt<=zt&&zt<=Z:Z<=zt&&zt<=rt},Q._emptyCategories=function(){Q._categories=[],Q._categoriesMap={}},Q.clearCalc=function(){var te=Q._matchGroup;if(te){var Et=null,zt=null;for(var rt in te){var Z=xt[B.id2name(rt)];if(Z._categories){Et=Z._categories,zt=Z._categoriesMap;break}}Et&&zt?(Q._categories=Et,Q._categoriesMap=zt):Q._emptyCategories()}else Q._emptyCategories();if(Q._initialCategories)for(var we=0;we<Q._initialCategories.length;we++)Le(Q._initialCategories[we])},Q.sortByInitialCategories=function(){var te=[];if(Q._emptyCategories(),Q._initialCategories)for(var Et=0;Et<Q._initialCategories.length;Et++)Le(Q._initialCategories[Et]);te=te.concat(Q._traceIndices);var zt=Q._matchGroup;for(var rt in zt)if(tt!==rt){var Z=xt[B.id2name(rt)];Z._categories=Q._categories,Z._categoriesMap=Q._categoriesMap,te=te.concat(Z._traceIndices)}return te};var gt=xt._d3locale;Q.type==="date"&&(Q._dateFormat=gt?gt.timeFormat:d,Q._extraFormat=xt._extraFormat),Q._separators=xt.separators,Q._numFormat=gt?gt.numberFormat:E,delete Q._minDtick,delete Q._forceTick0}}),q0=r((nt,ke)=>{var _=v(),d=et(),m=g().BADNUM,E=d.isArrayOrTypedArray,b=d.isDateTime,w=d.cleanNumber,S=Math.round;ke.exports=function(j,z,I){var G=j,M=I.noMultiCategory;if(E(G)&&!G.length)return"-";if(!M&&$(G))return"multicategory";if(M&&Array.isArray(G[0])){for(var L=[],B=0;B<G.length;B++)if(E(G[B]))for(var X=0;X<G[B].length;X++)L.push(G[B][X]);G=L}if(F(G,z))return"date";var ee=I.autotypenumbers!=="strict";return O(G,ee)?"category":p(G,ee)?"linear":"-"};function C(j,z){return z?_(j):typeof j=="number"}function p(j,z){for(var I=j.length,G=0;G<I;G++)if(C(j[G],z))return!0;return!1}function F(j,z){for(var I=j.length,G=A(I),M=0,L=0,B={},X=0;X<I;X+=G){var ee=S(X),yt=j[ee],Ze=String(yt);B[Ze]||(B[Ze]=1,b(yt,z)&&M++,_(yt)&&L++)}return M>L*2}function A(j){return Math.max(1,(j-1)/1e3)}function O(j,z){for(var I=j.length,G=A(I),M=0,L=0,B={},X=0;X<I;X+=G){var ee=S(X),yt=j[ee],Ze=String(yt);if(!B[Ze]){B[Ze]=1;var Re=typeof yt;Re==="boolean"?L++:(z?w(yt)!==m:Re==="number")?M++:Re==="string"&&L++}}return L>M*2}function $(j){return E(j[0])&&E(j[1])}}),Bm=r((nt,ke)=>{var _=o(),d=v(),m=et(),E=g().FP_SAFE,b=y1(),w=Q0(),S=D1(),C=S.getFromId,p=S.isLinked;ke.exports={applyAutorangeOptions:xt,getAutoRange:F,makePadFn:O,doAutoRange:I,findExtremes:G,concatExtremes:z};function F(tt,ht){var it,ut,vt=[],_t=tt._fullLayout,Le=O(_t,ht,0),wt=O(_t,ht,1),St=z(tt,ht),Ut=St.min,kt=St.max;if(Ut.length===0||kt.length===0)return m.simpleMap(ht.range,ht.r2l);var jt=Ut[0].val,aa=kt[0].val;for(it=1;it<Ut.length&&jt===aa;it++)jt=Math.min(jt,Ut[it].val);for(it=1;it<kt.length&&jt===aa;it++)aa=Math.max(aa,kt[it].val);var ca=ht.autorange,Cp=ca==="reversed"||ca==="min reversed"||ca==="max reversed";if(!Cp&&ht.range){var pt=m.simpleMap(ht.range,ht.r2l);Cp=pt[1]<pt[0]}ht.autorange==="reversed"&&(ht.autorange=!0);var gt=ht.rangemode,te=gt==="tozero",Et=gt==="nonnegative",zt=ht._length,rt=zt/10,Z=0,we,ot,mt,It,Yt,Sr;for(it=0;it<Ut.length;it++)for(we=Ut[it],ut=0;ut<kt.length;ut++)ot=kt[ut],Sr=ot.val-we.val-A(ht,we.val,ot.val),Sr>0&&(Yt=zt-Le(we)-wt(ot),Yt>rt?Sr/Yt>Z&&(mt=we,It=ot,Z=Sr/Yt):Sr/zt>Z&&(mt={val:we.val,nopad:1},It={val:ot.val,nopad:1},Z=Sr/zt));function Op(_0,ha){return Math.max(_0,wt(ha))}if(jt===aa){var Hp=jt-1,n0=jt+1;if(te)if(jt===0)vt=[0,1];else{var R0=(jt>0?kt:Ut).reduce(Op,0),w0=jt/(1-Math.min(.5,R0/zt));vt=jt>0?[0,w0]:[w0,0]}else Et?vt=[Math.max(0,Hp),Math.max(1,n0)]:vt=[Hp,n0]}else te?(mt.val>=0&&(mt={val:0,nopad:1}),It.val<=0&&(It={val:0,nopad:1})):Et&&(mt.val-Z*Le(mt)<0&&(mt={val:0,nopad:1}),It.val<=0&&(It={val:1,nopad:1})),Z=(It.val-mt.val-A(ht,we.val,ot.val))/(zt-Le(mt)-wt(It)),vt=[mt.val-Z*Le(mt),It.val+Z*wt(It)];return vt=xt(vt,ht),ht.limitRange&&ht.limitRange(),Cp&&vt.reverse(),m.simpleMap(vt,ht.l2r||Number)}function A(tt,ht,it){var ut=0;if(tt.rangebreaks)for(var vt=tt.locateBreaks(ht,it),_t=0;_t<vt.length;_t++){var Le=vt[_t];ut+=Le.max-Le.min}return ut}function O(tt,ht,it){var ut=.05*ht._length,vt=ht._anchorAxis||{};if((ht.ticklabelposition||"").indexOf("inside")!==-1||(vt.ticklabelposition||"").indexOf("inside")!==-1){var _t=ht.isReversed();if(!_t){var Le=m.simpleMap(ht.range,ht.r2l);_t=Le[1]<Le[0]}_t&&(it=!it)}var wt=0;return p(tt,ht._id)||(wt=j(tt,ht,it)),ut=Math.max(wt,ut),ht.constrain==="domain"&&ht._inputDomain&&(ut*=(ht._inputDomain[1]-ht._inputDomain[0])/(ht.domain[1]-ht.domain[0])),function(St){return St.nopad?0:St.pad+(St.extrapad?ut:wt)}}var $=3;function j(tt,ht,it){var ut=0,vt=ht._id.charAt(0)==="x";for(var _t in tt._plots){var Le=tt._plots[_t];if(!(ht._id!==Le.xaxis._id&&ht._id!==Le.yaxis._id)){var wt=(vt?Le.yaxis:Le.xaxis)||{};if((wt.ticklabelposition||"").indexOf("inside")!==-1&&(!it&&(wt.side==="left"||wt.side==="bottom")||it&&(wt.side==="top"||wt.side==="right"))){if(wt._vals){var St=m.deg2rad(wt._tickAngles[wt._id+"tick"]||0),Ut=Math.abs(Math.cos(St)),kt=Math.abs(Math.sin(St));if(!wt._vals[0].bb){var jt=wt._id+"tick",aa=wt._selections[jt];aa.each(function(Et){var zt=_.select(this),rt=zt.select(".text-math-group");rt.empty()&&(Et.bb=w.bBox(zt.node()))})}for(var ca=0;ca<wt._vals.length;ca++){var Cp=wt._vals[ca],pt=Cp.bb;if(pt){var gt=2*$+pt.width,te=2*$+pt.height;ut=Math.max(ut,vt?Math.max(gt*Ut,te*kt):Math.max(te*Ut,gt*kt))}}}wt.ticks==="inside"&&wt.ticklabelposition==="inside"&&(ut+=wt.ticklen||0)}}}return ut}function z(tt,ht,it){var ut=ht._id,vt=tt._fullData,_t=tt._fullLayout,Le=[],wt=[],St,Ut,kt;function jt(gt,te){for(St=0;St<te.length;St++){var Et=gt[te[St]],zt=(Et._extremes||{})[ut];if(Et.visible===!0&&zt){for(Ut=0;Ut<zt.min.length;Ut++)kt=zt.min[Ut],M(Le,kt.val,kt.pad,{extrapad:kt.extrapad});for(Ut=0;Ut<zt.max.length;Ut++)kt=zt.max[Ut],L(wt,kt.val,kt.pad,{extrapad:kt.extrapad})}}}if(jt(vt,ht._traceIndices),jt(_t.annotations||[],ht._annIndices||[]),jt(_t.shapes||[],ht._shapeIndices||[]),ht._matchGroup&&!it){for(var aa in ht._matchGroup)if(aa!==ht._id){var ca=C(tt,aa),Cp=z(tt,ca,!0),pt=ht._length/ca._length;for(Ut=0;Ut<Cp.min.length;Ut++)kt=Cp.min[Ut],M(Le,kt.val,kt.pad*pt,{extrapad:kt.extrapad});for(Ut=0;Ut<Cp.max.length;Ut++)kt=Cp.max[Ut],L(wt,kt.val,kt.pad*pt,{extrapad:kt.extrapad})}}return{min:Le,max:wt}}function I(tt,ht,it){if(ht.setScale(),ht.autorange){ht.range=it?it.slice():F(tt,ht),ht._r=ht.range.slice(),ht._rl=m.simpleMap(ht._r,ht.r2l);var ut=ht._input,vt={};vt[ht._attr+".range"]=ht.range,vt[ht._attr+".autorange"]=ht.autorange,b.call("_storeDirectGUIEdit",tt.layout,tt._fullLayout._preGUI,vt),ut.range=ht.range.slice(),ut.autorange=ht.autorange}var _t=ht._anchorAxis;if(_t&&_t.rangeslider){var Le=_t.rangeslider[ht._name];Le&&Le.rangemode==="auto"&&(Le.range=F(tt,ht)),_t._input.rangeslider[ht._name]=m.extendFlat({},Le)}}function G(tt,ht,it){it||(it={}),tt._m||tt.setScale();var ut=[],vt=[],_t=ht.length,Le=it.padded||!1,wt=it.tozero&&(tt.type==="linear"||tt.type==="-"),St=tt.type==="log",Ut=!1,kt=it.vpadLinearized||!1,jt,aa,ca,Cp,pt,gt,te,Et,zt;function rt(Op){if(Array.isArray(Op))return Ut=!0,function(n0){return Math.max(Number(Op[n0]||0),0)};var Hp=Math.max(Number(Op||0),0);return function(){return Hp}}var Z=rt((tt._m>0?it.ppadplus:it.ppadminus)||it.ppad||0),we=rt((tt._m>0?it.ppadminus:it.ppadplus)||it.ppad||0),ot=rt(it.vpadplus||it.vpad),mt=rt(it.vpadminus||it.vpad);if(!Ut){if(Et=1/0,zt=-1/0,St)for(jt=0;jt<_t;jt++)aa=ht[jt],aa<Et&&aa>0&&(Et=aa),aa>zt&&aa<E&&(zt=aa);else for(jt=0;jt<_t;jt++)aa=ht[jt],aa<Et&&aa>-E&&(Et=aa),aa>zt&&aa<E&&(zt=aa);ht=[Et,zt],_t=2}var It={tozero:wt,extrapad:Le};function Yt(Op){ca=ht[Op],d(ca)&&(gt=Z(Op),te=we(Op),kt?(Cp=tt.c2l(ca)-mt(Op),pt=tt.c2l(ca)+ot(Op)):(Et=ca-mt(Op),zt=ca+ot(Op),St&&Et<zt/10&&(Et=zt/10),Cp=tt.c2l(Et),pt=tt.c2l(zt)),wt&&(Cp=Math.min(0,Cp),pt=Math.max(0,pt)),X(Cp)&&M(ut,Cp,te,It),X(pt)&&L(vt,pt,gt,It))}var Sr=Math.min(6,_t);for(jt=0;jt<Sr;jt++)Yt(jt);for(jt=_t-1;jt>=Sr;jt--)Yt(jt);return{min:ut,max:vt,opts:it}}function M(tt,ht,it,ut){B(tt,ht,it,ut,ee)}function L(tt,ht,it,ut){B(tt,ht,it,ut,yt)}function B(tt,ht,it,ut,vt){for(var _t=ut.tozero,Le=ut.extrapad,wt=!0,St=0;St<tt.length&&wt;St++){var Ut=tt[St];if(vt(Ut.val,ht)&&Ut.pad>=it&&(Ut.extrapad||!Le)){wt=!1;break}else vt(ht,Ut.val)&&Ut.pad<=it&&(Le||!Ut.extrapad)&&(tt.splice(St,1),St--)}if(wt){var kt=_t&&ht===0;tt.push({val:ht,pad:kt?0:it,extrapad:kt?!1:Le})}}function X(tt){return d(tt)&&Math.abs(tt)<E}function ee(tt,ht){return tt<=ht}function yt(tt,ht){return tt>=ht}function Ze(tt,ht){var it=ht.autorangeoptions;return it&&it.minallowed!==void 0&&Q(ht,it.minallowed,it.maxallowed)?it.minallowed:it&&it.clipmin!==void 0&&Q(ht,it.clipmin,it.clipmax)?Math.max(tt,ht.d2l(it.clipmin)):tt}function Re(tt,ht){var it=ht.autorangeoptions;return it&&it.maxallowed!==void 0&&Q(ht,it.minallowed,it.maxallowed)?it.maxallowed:it&&it.clipmax!==void 0&&Q(ht,it.clipmin,it.clipmax)?Math.min(tt,ht.d2l(it.clipmax)):tt}function Q(tt,ht,it){return ht!==void 0&&it!==void 0?(ht=tt.d2l(ht),it=tt.d2l(it),ht<it):!0}function xt(tt,ht){if(!ht||!ht.autorangeoptions)return tt;var it=tt[0],ut=tt[1],vt=ht.autorangeoptions.include;if(vt!==void 0){var _t=ht.d2l(it),Le=ht.d2l(ut);m.isArrayOrTypedArray(vt)||(vt=[vt]);for(var wt=0;wt<vt.length;wt++){var St=ht.d2l(vt[wt]);_t>=St&&(_t=St,it=St),Le<=St&&(Le=St,ut=St)}}return it=Ze(it,ht),ut=Re(ut,ht),[it,ut]}}),Im=r((nt,ke)=>{var _=o(),d=v(),m=cg(),E=y1(),b=et(),w=b.strTranslate,S=G1(),C=lm(),p=Mn(),F=Q0(),A=d0(),O=Rt(),$=g(),j=$.ONEMAXYEAR,z=$.ONEAVGYEAR,I=$.ONEMINYEAR,G=$.ONEMAXQUARTER,M=$.ONEAVGQUARTER,L=$.ONEMINQUARTER,B=$.ONEMAXMONTH,X=$.ONEAVGMONTH,ee=$.ONEMINMONTH,yt=$.ONEWEEK,Ze=$.ONEDAY,Re=Ze/2,Q=$.ONEHOUR,xt=$.ONEMIN,tt=$.ONESEC,ht=$.ONEMILLI,it=$.ONEMICROSEC,ut=$.MINUS_SIGN,vt=$.BADNUM,_t={K:"zeroline"},Le={K:"gridline",L:"path"},wt={K:"minor-gridline",L:"path"},St={K:"tick",L:"path"},Ut={K:"tick",L:"text"},kt={width:["x","r","l","xl","xr"],height:["y","t","b","yt","yb"],right:["r","xr"],left:["l","xl"],top:["t","yt"],bottom:["b","yb"]},jt=K1(),aa=jt.MID_SHIFT,ca=jt.CAP_SHIFT,Cp=jt.LINE_SPACING,pt=jt.OPPOSITE_SIDE,gt=3,te=ke.exports={};te.setConvert=hm();var Et=q0(),zt=D1(),rt=zt.idSort,Z=zt.isLinked;te.id2name=zt.id2name,te.name2id=zt.name2id,te.cleanId=zt.cleanId,te.list=zt.list,te.listIds=zt.listIds,te.getFromId=zt.getFromId,te.getFromTrace=zt.getFromTrace;var we=Bm();te.getAutoRange=we.getAutoRange,te.findExtremes=we.findExtremes;var ot=1e-4;function mt(Lt){var At=(Lt[1]-Lt[0])*ot;return[Lt[0]-At,Lt[1]+At]}te.coerceRef=function(Lt,At,Wp,Qp,g0,$p){var Xp=Qp.charAt(Qp.length-1),b0=Wp._fullLayout._subplots[Xp+"axis"],s0=Qp+"ref",O0={};return g0||(g0=b0[0]||(typeof $p=="string"?$p:$p[0])),$p||($p=g0),b0=b0.concat(b0.map(function(U0){return U0+" domain"})),O0[s0]={valType:"enumerated",values:b0.concat($p?typeof $p=="string"?[$p]:$p:[]),dflt:g0},b.coerce(Lt,At,O0,s0)},te.getRefType=function(Lt){return Lt===void 0?Lt:Lt==="paper"?"paper":Lt==="pixel"?"pixel":/( domain)$/.test(Lt)?"domain":"range"},te.coercePosition=function(Lt,At,Wp,Qp,g0,$p){var Xp,b0,s0=te.getRefType(Qp);if(s0!=="range")Xp=b.ensureNumber,b0=Wp(g0,$p);else{var O0=te.getFromId(At,Qp);$p=O0.fraction2r($p),b0=Wp(g0,$p),Xp=O0.cleanPos}Lt[g0]=Xp(b0)},te.cleanPosition=function(Lt,At,Wp){var Qp=Wp==="paper"||Wp==="pixel"?b.ensureNumber:te.getFromId(At,Wp).cleanPos;return Qp(Lt)},te.redrawComponents=function(Lt,At){At=At||te.listIds(Lt);var Wp=Lt._fullLayout;function Qp(g0,$p,Xp,b0){for(var s0=E.getComponentMethod(g0,$p),O0={},U0=0;U0<At.length;U0++)for(var mm=Wp[te.id2name(At[U0])],Jm=mm[Xp],qm=0;qm<Jm.length;qm++){var b1=Jm[qm];if(!O0[b1]&&(s0(Lt,b1),O0[b1]=1,b0))return}}Qp("annotations","drawOne","_annIndices"),Qp("shapes","drawOne","_shapeIndices"),Qp("images","draw","_imgIndices",!0),Qp("selections","drawOne","_selectionIndices")};var It=te.getDataConversions=function(Lt,At,Wp,Qp){var g0,$p=Wp==="x"||Wp==="y"||Wp==="z"?Wp:Qp;if(b.isArrayOrTypedArray($p)){if(g0={type:Et(Qp,void 0,{autotypenumbers:Lt._fullLayout.autotypenumbers}),_categories:[]},te.setConvert(g0),g0.type==="category")for(var Xp=0;Xp<Qp.length;Xp++)g0.d2c(Qp[Xp])}else g0=te.getFromTrace(Lt,At,$p);return g0?{d2c:g0.d2c,c2d:g0.c2d}:$p==="ids"?{d2c:Sr,c2d:Sr}:{d2c:Yt,c2d:Yt}};function Yt(Lt){return+Lt}function Sr(Lt){return String(Lt)}te.getDataToCoordFunc=function(Lt,At,Wp,Qp){return It(Lt,At,Wp,Qp).d2c},te.counterLetter=function(Lt){var At=Lt.charAt(0);if(At==="x")return"y";if(At==="y")return"x"},te.minDtick=function(Lt,At,Wp,Qp){["log","category","multicategory"].indexOf(Lt.type)!==-1||!Qp?Lt._minDtick=0:Lt._minDtick===void 0?(Lt._minDtick=At,Lt._forceTick0=Wp):Lt._minDtick&&((Lt._minDtick/At+1e-6)%1<2e-6&&((Wp-Lt._forceTick0)/At%1+1.000001)%1<2e-6?(Lt._minDtick=At,Lt._forceTick0=Wp):((At/Lt._minDtick+1e-6)%1>2e-6||((Wp-Lt._forceTick0)/Lt._minDtick%1+1.000001)%1>2e-6)&&(Lt._minDtick=0))},te.saveRangeInitial=function(Lt,At){for(var Wp=te.list(Lt,"",!0),Qp=!1,g0=0;g0<Wp.length;g0++){var $p=Wp[g0],Xp=$p._rangeInitial0===void 0&&$p._rangeInitial1===void 0,b0=Xp||$p.range[0]!==$p._rangeInitial0||$p.range[1]!==$p._rangeInitial1,s0=$p.autorange;(Xp&&s0!==!0||At&&b0)&&($p._rangeInitial0=s0==="min"||s0==="max reversed"?void 0:$p.range[0],$p._rangeInitial1=s0==="max"||s0==="min reversed"?void 0:$p.range[1],$p._autorangeInitial=s0,Qp=!0)}return Qp},te.saveShowSpikeInitial=function(Lt,At){for(var Wp=te.list(Lt,"",!0),Qp=!1,g0="on",$p=0;$p<Wp.length;$p++){var Xp=Wp[$p],b0=Xp._showSpikeInitial===void 0,s0=b0||Xp.showspikes!==Xp._showspikes;(b0||At&&s0)&&(Xp._showSpikeInitial=Xp.showspikes,Qp=!0),g0==="on"&&!Xp.showspikes&&(g0="off")}return Lt._fullLayout._cartesianSpikesEnabled=g0,Qp},te.autoBin=function(Lt,At,Wp,Qp,g0,$p){var Xp=b.aggNums(Math.min,null,Lt),b0=b.aggNums(Math.max,null,Lt);if(At.type==="category"||At.type==="multicategory")return{start:Xp-.5,end:b0+.5,size:Math.max(1,Math.round($p)||1),_dataSpan:b0-Xp};g0||(g0=At.calendar);var s0;if(At.type==="log"?s0={type:"linear",range:[Xp,b0]}:s0={type:At.type,range:b.simpleMap([Xp,b0],At.c2r,0,g0),calendar:g0},te.setConvert(s0),$p=$p&&O.dtick($p,s0.type),$p)s0.dtick=$p,s0.tick0=O.tick0(void 0,s0.type,g0);else{var O0;if(Wp)O0=(b0-Xp)/Wp;else{var U0=b.distinctVals(Lt),mm=Math.pow(10,Math.floor(Math.log(U0.minDiff)/Math.LN10)),Jm=mm*b.roundUp(U0.minDiff/mm,[.9,1.9,4.9,9.9],!0);O0=Math.max(Jm,2*b.stdev(Lt)/Math.pow(Lt.length,Qp?.25:.4)),d(O0)||(O0=1)}te.autoTicks(s0,O0)}var qm=s0.dtick,b1=te.tickIncrement(te.tickFirst(s0),qm,"reverse",g0),jm,e1;if(typeof qm=="number")b1=Op(b1,Lt,s0,Xp,b0),e1=1+Math.floor((b0-b1)/qm),jm=b1+e1*qm;else for(s0.dtick.charAt(0)==="M"&&(b1=Hp(b1,Lt,qm,Xp,g0)),jm=b1,e1=0;jm<=b0;)jm=te.tickIncrement(jm,qm,!1,g0),e1++;return{start:At.c2r(b1,0,g0),end:At.c2r(jm,0,g0),size:qm,_dataSpan:b0-Xp}};function Op(Lt,At,Wp,Qp,g0){var $p=0,Xp=0,b0=0,s0=0;function O0(qm){return(1+(qm-Lt)*100/Wp.dtick)%100<2}for(var U0=0;U0<At.length;U0++)At[U0]%1===0?b0++:d(At[U0])||s0++,O0(At[U0])&&$p++,O0(At[U0]+Wp.dtick/2)&&Xp++;var mm=At.length-s0;if(b0===mm&&Wp.type!=="date")Wp.dtick<1?Lt=Qp-.5*Wp.dtick:(Lt-=.5,Lt+Wp.dtick<Qp&&(Lt+=Wp.dtick));else if(Xp<mm*.1&&($p>mm*.3||O0(Qp)||O0(g0))){var Jm=Wp.dtick/2;Lt+=Lt+Jm<Qp?Jm:-Jm}return Lt}function Hp(Lt,At,Wp,Qp,g0){var $p=b.findExactDates(At,g0),Xp=.8;if($p.exactDays>Xp){var b0=Number(Wp.substr(1));$p.exactYears>Xp&&b0%12===0?Lt=te.tickIncrement(Lt,"M6","reverse")+Ze*1.5:$p.exactMonths>Xp?Lt=te.tickIncrement(Lt,"M1","reverse")+Ze*15.5:Lt-=Re;var s0=te.tickIncrement(Lt,Wp);if(s0<=Qp)return s0}return Lt}te.prepMinorTicks=function(Lt,At,Wp){if(!At.minor.dtick){delete Lt.dtick;var Qp=At.dtick&&d(At._tmin),g0;if(Qp){var $p=te.tickIncrement(At._tmin,At.dtick,!0);g0=[At._tmin,$p*.99+At._tmin*.01]}else{var Xp=b.simpleMap(At.range,At.r2l);g0=[Xp[0],.8*Xp[0]+.2*Xp[1]]}if(Lt.range=b.simpleMap(g0,At.l2r),Lt._isMinor=!0,te.prepTicks(Lt,Wp),Qp){var b0=d(At.dtick),s0=d(Lt.dtick),O0=b0?At.dtick:+At.dtick.substring(1),U0=s0?Lt.dtick:+Lt.dtick.substring(1);b0&&s0?n0(O0,U0)?O0===2*yt&&U0===2*Ze&&(Lt.dtick=yt):O0===2*yt&&U0===3*Ze?Lt.dtick=yt:O0===yt&&!(At._input.minor||{}).nticks?Lt.dtick=Ze:R0(O0/U0,2.5)?Lt.dtick=O0/2:Lt.dtick=O0:String(At.dtick).charAt(0)==="M"?s0?Lt.dtick="M1":n0(O0,U0)?O0>=12&&U0===2&&(Lt.dtick="M3"):Lt.dtick=At.dtick:String(Lt.dtick).charAt(0)==="L"?String(At.dtick).charAt(0)==="L"?n0(O0,U0)||(Lt.dtick=R0(O0/U0,2.5)?At.dtick/2:At.dtick):Lt.dtick="D1":Lt.dtick==="D2"&&+At.dtick>1&&(Lt.dtick=1)}Lt.range=At.range}At.minor._tick0Init===void 0&&(Lt.tick0=At.tick0)};function n0(Lt,At){return Math.abs((Lt/At+.5)%1-.5)<.001}function R0(Lt,At){return Math.abs(Lt/At-1)<.001}te.prepTicks=function(Lt,At){var Wp=b.simpleMap(Lt.range,Lt.r2l,void 0,void 0,At);if(Lt.tickmode==="auto"||!Lt.dtick){var Qp=Lt.nticks,g0;Qp||(Lt.type==="category"||Lt.type==="multicategory"?(g0=Lt.tickfont?b.bigFont(Lt.tickfont.size||12):15,Qp=Lt._length/g0):(g0=Lt._id.charAt(0)==="y"?40:80,Qp=b.constrain(Lt._length/g0,4,9)+1),Lt._name==="radialaxis"&&(Qp*=2)),Lt.minor&&Lt.minor.tickmode!=="array"||Lt.tickmode==="array"&&(Qp*=100),Lt._roughDTick=Math.abs(Wp[1]-Wp[0])/Qp,te.autoTicks(Lt,Lt._roughDTick),Lt._minDtick>0&&Lt.dtick<Lt._minDtick*2&&(Lt.dtick=Lt._minDtick,Lt.tick0=Lt.l2r(Lt._forceTick0))}Lt.ticklabelmode==="period"&&_0(Lt),Lt.tick0||(Lt.tick0=Lt.type==="date"?"2000-01-01":0),Lt.type==="date"&&Lt.dtick<.1&&(Lt.dtick=.1),F0(Lt)};function w0(Lt){return+Lt.substring(1)}function _0(Lt){var At;function Wp(){return!(d(Lt.dtick)||Lt.dtick.charAt(0)!=="M")}var Qp=Wp(),g0=te.getTickFormat(Lt);if(g0){var $p=Lt._dtickInit!==Lt.dtick;/%[fLQsSMX]/.test(g0)||(/%[HI]/.test(g0)?(At=Q,$p&&!Qp&&Lt.dtick<Q&&(Lt.dtick=Q)):/%p/.test(g0)?(At=Re,$p&&!Qp&&Lt.dtick<Re&&(Lt.dtick=Re)):/%[Aadejuwx]/.test(g0)?(At=Ze,$p&&!Qp&&Lt.dtick<Ze&&(Lt.dtick=Ze)):/%[UVW]/.test(g0)?(At=yt,$p&&!Qp&&Lt.dtick<yt&&(Lt.dtick=yt)):/%[Bbm]/.test(g0)?(At=X,$p&&(Qp?w0(Lt.dtick)<1:Lt.dtick<ee)&&(Lt.dtick="M1")):/%[q]/.test(g0)?(At=M,$p&&(Qp?w0(Lt.dtick)<3:Lt.dtick<L)&&(Lt.dtick="M3")):/%[Yy]/.test(g0)&&(At=z,$p&&(Qp?w0(Lt.dtick)<12:Lt.dtick<I)&&(Lt.dtick="M12")))}Qp=Wp(),Qp&&Lt.tick0===Lt._dowTick0&&(Lt.tick0=Lt._rawTick0),Lt._definedDelta=At}function ha(Lt,At,Wp){for(var Qp=0;Qp<Lt.length;Qp++){var g0=Lt[Qp].value,$p=Qp,Xp=Qp+1;Qp<Lt.length-1?($p=Qp,Xp=Qp+1):Qp>0?($p=Qp-1,Xp=Qp):($p=Qp,Xp=Qp);var b0=Lt[$p].value,s0=Lt[Xp].value,O0=Math.abs(s0-b0),U0=Wp||O0,mm=0;U0>=I?O0>=I&&O0<=j?mm=O0:mm=z:Wp===M&&U0>=L?O0>=L&&O0<=G?mm=O0:mm=M:U0>=ee?O0>=ee&&O0<=B?mm=O0:mm=X:Wp===yt&&U0>=yt?mm=yt:U0>=Ze?mm=Ze:Wp===Re&&U0>=Re?mm=Re:Wp===Q&&U0>=Q&&(mm=Q);var Jm;mm>=O0&&(mm=O0,Jm=!0);var qm=g0+mm;if(At.rangebreaks&&mm>0){for(var b1=84,jm=0,e1=0;e1<b1;e1++){var k1=(e1+.5)/b1;At.maskBreaks(g0*(1-k1)+k1*qm)!==vt&&jm++}mm*=jm/b1,mm||(Lt[Qp].drop=!0),Jm&&O0>yt&&(mm=O0)}(mm>0||Qp===0)&&(Lt[Qp].periodX=g0+mm/2)}}te.calcTicks=function(Lt,At){for(var Wp=Lt.type,Qp=Lt.calendar,g0=Lt.ticklabelstep,$p=Lt.ticklabelmode==="period",Xp=Lt.range[0]>Lt.range[1],b0=!Lt.ticklabelindex||b.isArrayOrTypedArray(Lt.ticklabelindex)?Lt.ticklabelindex:[Lt.ticklabelindex],s0=b.simpleMap(Lt.range,Lt.r2l,void 0,void 0,At),O0=s0[1]<s0[0],U0=Math.min(s0[0],s0[1]),mm=Math.max(s0[0],s0[1]),Jm=Math.max(1e3,Lt._length||0),qm=[],b1=[],jm=[],e1=[],k1=[],Pg=Lt.minor&&(Lt.minor.ticks||Lt.minor.showgrid),H1=1;H1>=(Pg?0:1);H1--){var ov=!H1;H1?(Lt._dtickInit=Lt.dtick,Lt._tick0Init=Lt.tick0):(Lt.minor._dtickInit=Lt.minor.dtick,Lt.minor._tick0Init=Lt.minor.tick0);var mg=H1?Lt:b.extendFlat({},Lt,Lt.minor);if(ov?te.prepMinorTicks(mg,Lt,At):te.prepTicks(mg,At),mg.tickmode==="array"){H1?(jm=[],qm=Gp(Lt,!ov)):(e1=[],b1=Gp(Lt,!ov));continue}if(mg.tickmode==="sync"){jm=[],qm=Gt(Lt);continue}var cv=mt(s0),Eg=cv[0],Qg=cv[1],lv=d(mg.dtick),vg=Wp==="log"&&!(lv||mg.dtick.charAt(0)==="L"),Fv=te.tickFirst(mg,At);if(H1){if(Lt._tmin=Fv,Fv<Eg!==O0)break;(Wp==="category"||Wp==="multicategory")&&(Qg=O0?Math.max(-.5,Qg):Math.min(Lt._categories.length-.5,Qg))}var wv=null,Lg=Fv,xv;if(H1){var ev;lv?ev=Lt.dtick:Wp==="date"?typeof Lt.dtick=="string"&&Lt.dtick.charAt(0)==="M"&&(ev=X*Lt.dtick.substring(1)):ev=Lt._roughDTick,xv=Math.round((Lt.r2l(Lg)-Lt.r2l(Lt.tick0))/ev)-1}var sv=mg.dtick;for(mg.rangebreaks&&mg._tick0Init!==mg.tick0&&(Lg=Ug(Lg,Lt),O0||(Lg=te.tickIncrement(Lg,sv,!O0,Qp))),H1&&$p&&(Lg=te.tickIncrement(Lg,sv,!O0,Qp),xv--);O0?Lg>=Qg:Lg<=Qg;Lg=te.tickIncrement(Lg,sv,O0,Qp)){if(H1&&xv++,mg.rangebreaks&&!O0){if(Lg<Eg)continue;if(mg.maskBreaks(Lg)===vt&&Ug(Lg,mg)>=mm)break}if(jm.length>Jm||Lg===wv)break;wv=Lg;var ry={value:Lg};H1?(vg&&Lg!==(Lg|0)&&(ry.simpleLabel=!0),g0>1&&xv%g0&&(ry.skipLabel=!0),jm.push(ry)):(ry.minor=!0,e1.push(ry))}}if(!e1||e1.length<2)b0=!1;else{var zv=(e1[1].value-e1[0].value)*(Xp?-1:1);Xg(zv,Lt.tickformat)||(b0=!1)}if(!b0)k1=jm;else{var Vg=jm.concat(e1);$p&&jm.length&&(Vg=Vg.slice(1)),Vg=Vg.sort(function(Dg,Rg){return Dg.value-Rg.value}).filter(function(Dg,Rg,zg){return Rg===0||Dg.value!==zg[Rg-1].value});var tv=Vg.map(function(Dg,Rg){return Dg.minor===void 0&&!Dg.skipLabel?Rg:null}).filter(function(Dg){return Dg!==null});tv.forEach(function(Dg){b0.map(function(Rg){var zg=Dg+Rg;zg>=0&&zg<Vg.length&&b.pushUnique(k1,Vg[zg])})})}if(Pg){var Wg=Lt.minor.ticks==="inside"&&Lt.ticks==="outside"||Lt.minor.ticks==="outside"&&Lt.ticks==="inside";if(!Wg){for(var rv=jm.map(function(Dg){return Dg.value}),Bv=[],Kv=0;Kv<e1.length;Kv++){var Ov=e1[Kv],ny=Ov.value;if(rv.indexOf(ny)===-1){for(var oy=!1,Gv=0;!oy&&Gv<jm.length;Gv++)1e7+jm[Gv].value===1e7+ny&&(oy=!0);oy||Bv.push(Ov)}}e1=Bv}}$p&&ha(k1,Lt,Lt._definedDelta);var nv;if(Lt.rangebreaks){var My=Lt._id.charAt(0)==="y",cy=1;Lt.tickmode==="auto"&&(cy=Lt.tickfont?Lt.tickfont.size:12);var Dy=NaN;for(nv=jm.length-1;nv>-1;nv--){if(jm[nv].drop){jm.splice(nv,1);continue}jm[nv].value=Ug(jm[nv].value,Lt);var hy=Lt.c2p(jm[nv].value);(My?Dy>hy-cy:Dy<hy+cy)?jm.splice(O0?nv+1:nv,1):Dy=hy}}Cg(Lt)&&Math.abs(s0[1]-s0[0])===360&&jm.pop(),Lt._tmax=(jm[jm.length-1]||{}).value,Lt._prevDateHead="",Lt._inCalcTicks=!0;var dy,jy=function(Dg){Dg.text="",Lt._prevDateHead=dy};jm=jm.concat(e1);function Fy(Dg,Rg){var zg=te.tickText(Dg,Rg.value,!1,Rg.simpleLabel),av=Rg.periodX;return av!==void 0&&(zg.periodX=av,(av>mm||av<U0)&&(av>mm&&(zg.periodX=mm),av<U0&&(zg.periodX=U0),jy(zg))),zg}var wy;for(nv=0;nv<jm.length;nv++){var $y=jm[nv].minor,hv=jm[nv].value;$y?(b0&&k1.indexOf(jm[nv])!==-1?wy=Fy(Lt,jm[nv]):wy={x:hv},wy.minor=!0,b1.push(wy)):(dy=Lt._prevDateHead,wy=Fy(Lt,jm[nv]),(jm[nv].skipLabel||b0&&k1.indexOf(jm[nv])===-1)&&jy(wy),qm.push(wy))}return qm=qm.concat(b1),Lt._inCalcTicks=!1,$p&&qm.length&&(qm[0].noTick=!0),qm};function Rp(Lt,At){return Lt.rangebreaks&&(At=At.filter(function(Wp){return Lt.maskBreaks(Wp.x)!==vt})),At}function Gt(Lt){var At=Lt._mainAxis,Wp=[];if(At._vals){for(var Qp=0;Qp<At._vals.length;Qp++)if(!At._vals[Qp].noTick){var g0=At.l2p(At._vals[Qp].x),$p=Lt.p2l(g0),Xp=te.tickText(Lt,$p);At._vals[Qp].minor&&(Xp.minor=!0,Xp.text=""),Wp.push(Xp)}}return Wp=Rp(Lt,Wp),Wp}function Gp(Lt,At){var Wp=b.simpleMap(Lt.range,Lt.r2l),Qp=mt(Wp),g0=Math.min(Qp[0],Qp[1]),$p=Math.max(Qp[0],Qp[1]),Xp=Lt.type==="category"?Lt.d2l_noadd:Lt.d2l;Lt.type==="log"&&String(Lt.dtick).charAt(0)!=="L"&&(Lt.dtick="L"+Math.pow(10,Math.floor(Math.min(Lt.range[0],Lt.range[1]))-1));for(var b0=[],s0=0;s0<=1;s0++)if(!(At!==void 0&&(At&&s0||At===!1&&!s0))&&!(s0&&!Lt.minor)){var O0=s0?Lt.minor.tickvals:Lt.tickvals,U0=s0?[]:Lt.ticktext;if(O0){b.isArrayOrTypedArray(U0)||(U0=[]);for(var mm=0;mm<O0.length;mm++){var Jm=Xp(O0[mm]);if(Jm>g0&&Jm<$p){var qm=te.tickText(Lt,Jm,!1,String(U0[mm]));s0&&(qm.minor=!0,qm.text=""),b0.push(qm)}}}}return b0=Rp(Lt,b0),b0}var c0=[2,5,10],M0=[1,2,3,6,12],I0=[1,2,5,10,15,30],k0=[1,2,3,7,14],V0=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],$0=[-.301,0,.301,.699,1],W0=[15,30,45,90,180];function gm(Lt,At,Wp){return At*b.roundUp(Lt/At,Wp)}te.autoTicks=function(Lt,At,Wp){var Qp;function g0(mm){return Math.pow(mm,Math.floor(Math.log(At)/Math.LN10))}if(Lt.type==="date"){Lt.tick0=b.dateTick0(Lt.calendar,0);var $p=2*At;if($p>z)At/=z,Qp=g0(10),Lt.dtick="M"+12*gm(At,Qp,c0);else if($p>X)At/=X,Lt.dtick="M"+gm(At,1,M0);else if($p>Ze){if(Lt.dtick=gm(At,Ze,Lt._hasDayOfWeekBreaks?[1,2,7,14]:k0),!Wp){var Xp=te.getTickFormat(Lt),b0=Lt.ticklabelmode==="period";b0&&(Lt._rawTick0=Lt.tick0),/%[uVW]/.test(Xp)?Lt.tick0=b.dateTick0(Lt.calendar,2):Lt.tick0=b.dateTick0(Lt.calendar,1),b0&&(Lt._dowTick0=Lt.tick0)}}else $p>Q?Lt.dtick=gm(At,Q,M0):$p>xt?Lt.dtick=gm(At,xt,I0):$p>tt?Lt.dtick=gm(At,tt,I0):(Qp=g0(10),Lt.dtick=gm(At,Qp,c0))}else if(Lt.type==="log"){Lt.tick0=0;var s0=b.simpleMap(Lt.range,Lt.r2l);if(Lt._isMinor&&(At*=1.5),At>.7)Lt.dtick=Math.ceil(At);else if(Math.abs(s0[1]-s0[0])<1){var O0=1.5*Math.abs((s0[1]-s0[0])/At);At=Math.abs(Math.pow(10,s0[1])-Math.pow(10,s0[0]))/O0,Qp=g0(10),Lt.dtick="L"+gm(At,Qp,c0)}else Lt.dtick=At>.3?"D2":"D1"}else Lt.type==="category"||Lt.type==="multicategory"?(Lt.tick0=0,Lt.dtick=Math.ceil(Math.max(At,1))):Cg(Lt)?(Lt.tick0=0,Qp=1,Lt.dtick=gm(At,Qp,W0)):(Lt.tick0=0,Qp=g0(10),Lt.dtick=gm(At,Qp,c0));if(Lt.dtick===0&&(Lt.dtick=1),!d(Lt.dtick)&&typeof Lt.dtick!="string"){var U0=Lt.dtick;throw Lt.dtick=1,"ax.dtick error: "+String(U0)}};function F0(Lt){var At=Lt.dtick;if(Lt._tickexponent=0,!d(At)&&typeof At!="string"&&(At=1),(Lt.type==="category"||Lt.type==="multicategory")&&(Lt._tickround=null),Lt.type==="date"){var Wp=Lt.r2l(Lt.tick0),Qp=Lt.l2r(Wp).replace(/(^-|i)/g,""),g0=Qp.length;if(String(At).charAt(0)==="M")g0>10||Qp.substr(5)!=="01-01"?Lt._tickround="d":Lt._tickround=+At.substr(1)%12===0?"y":"m";else if(At>=Ze&&g0<=10||At>=Ze*15)Lt._tickround="d";else if(At>=xt&&g0<=16||At>=Q)Lt._tickround="M";else if(At>=tt&&g0<=19||At>=xt)Lt._tickround="S";else{var $p=Lt.l2r(Wp+At).replace(/^-/,"").length;Lt._tickround=Math.max(g0,$p)-20,Lt._tickround<0&&(Lt._tickround=4)}}else if(d(At)||At.charAt(0)==="L"){var Xp=Lt.range.map(Lt.r2d||Number);d(At)||(At=Number(At.substr(1))),Lt._tickround=2-Math.floor(Math.log(At)/Math.LN10+.01);var b0=Math.max(Math.abs(Xp[0]),Math.abs(Xp[1])),s0=Math.floor(Math.log(b0)/Math.LN10+.01),O0=Lt.minexponent===void 0?3:Lt.minexponent;Math.abs(s0)>O0&&(Bp(Lt.exponentformat)&&Lt.exponentformat!=="SI extended"&&!e0(s0)||Bp(Lt.exponentformat)&&Lt.exponentformat==="SI extended"&&!o0(s0)?Lt._tickexponent=3*Math.round((s0-1)/3):Lt._tickexponent=s0)}else Lt._tickround=null}te.tickIncrement=function(Lt,At,Wp,Qp){var g0=Wp?-1:1;if(d(At))return b.increment(Lt,g0*At);var $p=At.charAt(0),Xp=g0*Number(At.substr(1));if($p==="M")return b.incrementMonth(Lt,Xp,Qp);if($p==="L")return Math.log(Math.pow(10,Lt)+Xp)/Math.LN10;if($p==="D"){var b0=At==="D2"?$0:V0,s0=Lt+g0*.01,O0=b.roundUp(b.mod(s0,1),b0,Wp);return Math.floor(s0)+Math.log(_.round(Math.pow(10,O0),1))/Math.LN10}throw"unrecognized dtick "+String(At)},te.tickFirst=function(Lt,At){var Wp=Lt.r2l||Number,Qp=b.simpleMap(Lt.range,Wp,void 0,void 0,At),g0=Qp[1]<Qp[0],$p=g0?Math.floor:Math.ceil,Xp=mt(Qp)[0],b0=Lt.dtick,s0=Wp(Lt.tick0);if(d(b0)){var O0=$p((Xp-s0)/b0)*b0+s0;return(Lt.type==="category"||Lt.type==="multicategory")&&(O0=b.constrain(O0,0,Lt._categories.length-1)),O0}var U0=b0.charAt(0),mm=Number(b0.substr(1));if(U0==="M"){for(var Jm=0,qm=s0,b1,jm,e1;Jm<10;){if(b1=te.tickIncrement(qm,b0,g0,Lt.calendar),(b1-Xp)*(qm-Xp)<=0)return g0?Math.min(qm,b1):Math.max(qm,b1);jm=(Xp-(qm+b1)/2)/(b1-qm),e1=U0+(Math.abs(Math.round(jm))||1)*mm,qm=te.tickIncrement(qm,e1,jm<0?!g0:g0,Lt.calendar),Jm++}return b.error("tickFirst did not converge",Lt),qm}else{if(U0==="L")return Math.log($p((Math.pow(10,Xp)-s0)/mm)*mm+s0)/Math.LN10;if(U0==="D"){var k1=b0==="D2"?$0:V0,Pg=b.roundUp(b.mod(Xp,1),k1,g0);return Math.floor(Xp)+Math.log(_.round(Math.pow(10,Pg),1))/Math.LN10}else throw"unrecognized dtick "+String(b0)}},te.tickText=function(Lt,At,Wp,Qp){var g0=bm(Lt,At),$p=Lt.tickmode==="array",Xp=Wp||$p,b0=Lt.type,s0=b0==="category"?Lt.d2l_noadd:Lt.d2l,O0,U0=function(e1){var k1=Lt.l2p(e1);return k1>=0&&k1<=Lt._length?e1:null};if($p&&b.isArrayOrTypedArray(Lt.ticktext)){var mm=b.simpleMap(Lt.range,Lt.r2l),Jm=(Math.abs(mm[1]-mm[0])-(Lt._lBreaks||0))/1e4;for(O0=0;O0<Lt.ticktext.length&&!(Math.abs(At-s0(Lt.tickvals[O0]))<Jm);O0++);if(O0<Lt.ticktext.length)return g0.text=String(Lt.ticktext[O0]),g0.xbnd=[U0(g0.x-.5),U0(g0.x+Lt.dtick-.5)],g0}function qm(e1){if(e1===void 0)return!0;if(Wp)return e1==="none";var k1={first:Lt._tmin,last:Lt._tmax}[e1];return e1!=="all"&&At!==k1}var b1=Wp?"never":Lt.exponentformat!=="none"&&qm(Lt.showexponent)?"hide":"";if(b0==="date"?Dm(Lt,g0,Wp,Xp):b0==="log"?vm(Lt,g0,Wp,Xp,b1):b0==="category"?km(Lt,g0):b0==="multicategory"?Yo(Lt,g0,Wp):Cg(Lt)?Mt(Lt,g0,Wp,Xp,b1):qp(Lt,g0,Wp,Xp,b1),Qp||(Lt.tickprefix&&!qm(Lt.showtickprefix)&&(g0.text=Lt.tickprefix+g0.text),Lt.ticksuffix&&!qm(Lt.showticksuffix)&&(g0.text+=Lt.ticksuffix)),Lt.labelalias&&Lt.labelalias.hasOwnProperty(g0.text)){var jm=Lt.labelalias[g0.text];typeof jm=="string"&&(g0.text=jm)}return(Lt.tickson==="boundaries"||Lt.showdividers)&&(g0.xbnd=[U0(g0.x-.5),U0(g0.x+Lt.dtick-.5)]),g0},te.hoverLabelText=function(Lt,At,Wp){Wp&&(Lt=b.extendFlat({},Lt,{hoverformat:Wp}));var Qp=b.isArrayOrTypedArray(At)?At[0]:At,g0=b.isArrayOrTypedArray(At)?At[1]:void 0;if(g0!==void 0&&g0!==Qp)return te.hoverLabelText(Lt,Qp,Wp)+" - "+te.hoverLabelText(Lt,g0,Wp);var $p=Lt.type==="log"&&Qp<=0,Xp=te.tickText(Lt,Lt.c2l($p?-Qp:Qp),"hover").text;return $p?Qp===0?"0":ut+Xp:Xp};function bm(Lt,At,Wp){var Qp=Lt.tickfont||{};return{x:At,dx:0,dy:0,text:Wp||"",fontSize:Qp.size,font:Qp.family,fontWeight:Qp.weight,fontStyle:Qp.style,fontVariant:Qp.variant,fontTextcase:Qp.textcase,fontLineposition:Qp.lineposition,fontShadow:Qp.shadow,fontColor:Qp.color}}function Dm(Lt,At,Wp,Qp){var g0=Lt._tickround,$p=Wp&&Lt.hoverformat||te.getTickFormat(Lt);Qp=!$p&&Qp,Qp&&(d(g0)?g0=4:g0={y:"m",m:"d",d:"M",M:"S",S:4}[g0]);var Xp=b.formatDate(At.x,$p,g0,Lt._dateFormat,Lt.calendar,Lt._extraFormat),b0,s0=Xp.indexOf(`
`);if(s0!==-1&&(b0=Xp.substr(s0+1),Xp=Xp.substr(0,s0)),Qp&&(b0!==void 0&&(Xp==="00:00:00"||Xp==="00:00")?(Xp=b0,b0=""):Xp.length===8&&(Xp=Xp.replace(/:00$/,""))),b0)if(Wp)g0==="d"?Xp+=", "+b0:Xp=b0+(Xp?", "+Xp:"");else if(!Lt._inCalcTicks||Lt._prevDateHead!==b0)Lt._prevDateHead=b0,Xp+="<br>"+b0;else{var O0=rg(Lt),U0=Lt._trueSide||Lt.side;(!O0&&U0==="top"||O0&&U0==="bottom")&&(Xp+="<br> ")}At.text=Xp}function vm(Lt,At,Wp,Qp,g0){var $p=Lt.dtick,Xp=At.x,b0=Lt.tickformat,s0=typeof $p=="string"&&$p.charAt(0);if(g0==="never"&&(g0=""),Qp&&s0!=="L"&&($p="L3",s0="L"),b0||s0==="L")At.text=T0(Math.pow(10,Xp),Lt,g0,Qp);else if(d($p)||s0==="D"&&(Lt.minorloglabels==="complete"||b.mod(Xp+.01,1)<.1)){Lt.minorloglabels==="complete"&&!(b.mod(Xp+.01,1)<.1)&&(At.fontSize*=.75);var O0=Math.pow(10,Xp).toExponential(0),U0=O0.split("e"),mm=+U0[1],Jm=Math.abs(mm),qm=Lt.exponentformat;qm==="power"||Bp(qm)&&qm!=="SI extended"&&e0(mm)||Bp(qm)&&qm==="SI extended"&&o0(mm)?(At.text=U0[0],Jm>0&&(At.text+="x10"),At.text==="1x10"&&(At.text="10"),mm!==0&&mm!==1&&(At.text+="<sup>"+(mm>0?"":ut)+Jm+"</sup>"),At.fontSize*=1.25):(qm==="e"||qm==="E")&&Jm>2?At.text=U0[0]+qm+(mm>0?"+":ut)+Jm:(At.text=T0(Math.pow(10,Xp),Lt,"","fakehover"),$p==="D1"&&Lt._id.charAt(0)==="y"&&(At.dy-=At.fontSize/6))}else if(s0==="D")At.text=Lt.minorloglabels==="none"?"":String(Math.round(Math.pow(10,b.mod(Xp,1)))),At.fontSize*=.75;else throw"unrecognized dtick "+String($p);if(Lt.dtick==="D1"){var b1=String(At.text).charAt(0);(b1==="0"||b1==="1")&&(Lt._id.charAt(0)==="y"?At.dx-=At.fontSize/4:(At.dy+=At.fontSize/2,At.dx+=(Lt.range[1]>Lt.range[0]?1:-1)*At.fontSize*(Xp<0?.5:.25)))}}function km(Lt,At){var Wp=Lt._categories[Math.round(At.x)];Wp===void 0&&(Wp=""),At.text=String(Wp)}function Yo(Lt,At,Wp){var Qp=Math.round(At.x),g0=Lt._categories[Qp]||[],$p=g0[1]===void 0?"":String(g0[1]),Xp=g0[0]===void 0?"":String(g0[0]);Wp?At.text=Xp+" - "+$p:(At.text=$p,At.text2=Xp)}function qp(Lt,At,Wp,Qp,g0){g0==="never"?g0="":Lt.showexponent==="all"&&Math.abs(At.x/Lt.dtick)<1e-6&&(g0="hide"),At.text=T0(At.x,Lt,g0,Qp)}function Mt(Lt,At,Wp,Qp,g0){if(Lt.thetaunit==="radians"&&!Wp){var $p=At.x/180;if($p===0)At.text="0";else{var Xp=Wt($p);if(Xp[1]>=100)At.text=T0(b.deg2rad(At.x),Lt,g0,Qp);else{var b0=At.x<0;Xp[1]===1?Xp[0]===1?At.text="":At.text=Xp[0]+"":At.text=["<sup>",Xp[0],"</sup>","","<sub>",Xp[1],"</sub>",""].join(""),b0&&(At.text=ut+At.text)}}}else At.text=T0(At.x,Lt,g0,Qp)}function Wt(Lt){function At(b0,s0){return Math.abs(b0-s0)<=1e-6}function Wp(b0,s0){return At(s0,0)?b0:Wp(s0,b0%s0)}function Qp(b0){for(var s0=1;!At(Math.round(b0*s0)/s0,b0);)s0*=10;return s0}var g0=Qp(Lt),$p=Lt*g0,Xp=Math.abs(Wp($p,g0));return[Math.round($p/Xp),Math.round(g0/Xp)]}var xn=["f","p","n","","m","","k","M","G","T"],Fp=["q","r","y","z","a",...xn,"P","E","Z","Y","R","Q"],Bp=Lt=>["SI","SI extended","B"].includes(Lt);function e0(Lt){return Lt>14||Lt<-15}function o0(Lt){return Lt>32||Lt<-30}function C0(Lt,At){return Bp(At)?!!(At==="SI extended"&&o0(Lt)||At!=="SI extended"&&e0(Lt)):!1}function T0(Lt,At,Wp,Qp){var g0=Lt<0,$p=At._tickround,Xp=Wp||At.exponentformat||"B",b0=At._tickexponent,s0=te.getTickFormat(At),O0=At.separatethousands;if(Qp){var U0={exponentformat:Xp,minexponent:At.minexponent,dtick:At.showexponent==="none"?At.dtick:d(Lt)&&Math.abs(Lt)||1,range:At.showexponent==="none"?At.range.map(At.r2d):[0,Lt||1]};F0(U0),$p=(Number(U0._tickround)||0)+4,b0=U0._tickexponent,At.hoverformat&&(s0=At.hoverformat)}if(s0)return At._numFormat(s0)(Lt).replace(/-/g,ut);var mm=Math.pow(10,-$p)/2;if(Xp==="none"&&(b0=0),Lt=Math.abs(Lt),Lt<mm)Lt="0",g0=!1;else{if(Lt+=mm,b0&&(Lt*=Math.pow(10,-b0),$p+=b0),$p===0)Lt=String(Math.floor(Lt));else if($p<0){Lt=String(Math.round(Lt)),Lt=Lt.substr(0,Lt.length+$p);for(var Jm=$p;Jm<0;Jm++)Lt+="0"}else{Lt=String(Lt);var qm=Lt.indexOf(".")+1;qm&&(Lt=Lt.substr(0,qm+$p).replace(/\.?0+$/,""))}Lt=b.numSeparate(Lt,At._separators,O0)}if(b0&&Xp!=="hide"){C0(b0,Xp)&&(Xp="power");var b1;b0<0?b1=ut+-b0:Xp!=="power"?b1="+"+b0:b1=String(b0),Xp==="e"||Xp==="E"?Lt+=Xp+b1:Xp==="power"?Lt+="10<sup>"+b1+"</sup>":Xp==="B"&&b0===9?Lt+="B":Bp(Xp)&&(Lt+=Xp==="SI extended"?Fp[b0/3+10]:xn[b0/3+5])}return g0?ut+Lt:Lt}te.getTickFormat=function(Lt){var At;function Wp(s0){return typeof s0!="string"?s0:Number(s0.replace("M",""))*X}function Qp(s0,O0){var U0=["L","D"];if(typeof s0==typeof O0){if(typeof s0=="number")return s0-O0;var mm=U0.indexOf(s0.charAt(0)),Jm=U0.indexOf(O0.charAt(0));return mm===Jm?Number(s0.replace(/(L|D)/g,""))-Number(O0.replace(/(L|D)/g,"")):mm-Jm}else return typeof s0=="number"?1:-1}function g0(s0,O0,U0){var mm=U0||function(b1){return b1},Jm=O0[0],qm=O0[1];return(!Jm&&typeof Jm!="number"||mm(Jm)<=mm(s0))&&(!qm&&typeof qm!="number"||mm(qm)>=mm(s0))}function $p(s0,O0){var U0=O0[0]===null,mm=O0[1]===null,Jm=Qp(s0,O0[0])>=0,qm=Qp(s0,O0[1])<=0;return(U0||Jm)&&(mm||qm)}var Xp,b0;if(Lt.tickformatstops&&Lt.tickformatstops.length>0)switch(Lt.type){case"date":case"linear":{for(At=0;At<Lt.tickformatstops.length;At++)if(b0=Lt.tickformatstops[At],b0.enabled&&g0(Lt.dtick,b0.dtickrange,Wp)){Xp=b0;break}break}case"log":{for(At=0;At<Lt.tickformatstops.length;At++)if(b0=Lt.tickformatstops[At],b0.enabled&&$p(Lt.dtick,b0.dtickrange)){Xp=b0;break}break}}return Xp?Xp.value:Lt.tickformat},te.getSubplots=function(Lt,At){var Wp=Lt._fullLayout._subplots,Qp=Wp.cartesian.concat(Wp.gl2d||[]),g0=At?te.findSubplotsWithAxis(Qp,At):Qp;return g0.sort(function($p,Xp){var b0=$p.substr(1).split("y"),s0=Xp.substr(1).split("y");return b0[0]===s0[0]?+b0[1]-+s0[1]:+b0[0]-+s0[0]}),g0},te.findSubplotsWithAxis=function(Lt,At){for(var Wp=new RegExp(At._id.charAt(0)==="x"?"^"+At._id+"y":At._id+"$"),Qp=[],g0=0;g0<Lt.length;g0++){var $p=Lt[g0];Wp.test($p)&&Qp.push($p)}return Qp},te.makeClipPaths=function(Lt){var At=Lt._fullLayout;if(!At._hasOnlyLargeSploms){var Wp={_offset:0,_length:At.width,_id:""},Qp={_offset:0,_length:At.height,_id:""},g0=te.list(Lt,"x",!0),$p=te.list(Lt,"y",!0),Xp=[],b0,s0;for(b0=0;b0<g0.length;b0++)for(Xp.push({x:g0[b0],y:Qp}),s0=0;s0<$p.length;s0++)b0===0&&Xp.push({x:Wp,y:$p[s0]}),Xp.push({x:g0[b0],y:$p[s0]});var O0=At._clips.selectAll(".axesclip").data(Xp,function(U0){return U0.x._id+U0.y._id});O0.enter().append("clipPath").classed("axesclip",!0).attr("id",function(U0){return"clip"+At._uid+U0.x._id+U0.y._id}).append("rect"),O0.exit().remove(),O0.each(function(U0){_.select(this).select("rect").attr({x:U0.x._offset||0,y:U0.y._offset||0,width:U0.x._length||1,height:U0.y._length||1})})}},te.draw=function(Lt,At,Wp){var Qp=Lt._fullLayout;At==="redraw"&&Qp._paper.selectAll("g.subplot").each(function(s0){var O0=s0[0],U0=Qp._plots[O0];if(U0){var mm=U0.xaxis,Jm=U0.yaxis;U0.xaxislayer.selectAll("."+mm._id+"tick").remove(),U0.yaxislayer.selectAll("."+Jm._id+"tick").remove(),U0.xaxislayer.selectAll("."+mm._id+"tick2").remove(),U0.yaxislayer.selectAll("."+Jm._id+"tick2").remove(),U0.xaxislayer.selectAll("."+mm._id+"divider").remove(),U0.yaxislayer.selectAll("."+Jm._id+"divider").remove(),U0.minorGridlayer&&U0.minorGridlayer.selectAll("path").remove(),U0.gridlayer&&U0.gridlayer.selectAll("path").remove(),U0.zerolinelayer&&U0.zerolinelayer.selectAll("path").remove(),U0.zerolinelayerAbove&&U0.zerolinelayerAbove.selectAll("path").remove(),Qp._infolayer.select(".g-"+mm._id+"title").remove(),Qp._infolayer.select(".g-"+Jm._id+"title").remove()}});var g0=!At||At==="redraw"?te.listIds(Lt):At,$p=te.list(Lt),Xp=$p.filter(function(s0){return s0.autoshift}).map(function(s0){return s0.overlaying});g0.map(function(s0){var O0=te.getFromId(Lt,s0);if(O0.tickmode==="sync"&&O0.overlaying){var U0=g0.findIndex(function(mm){return mm===O0.overlaying});U0>=0&&g0.unshift(g0.splice(U0,1).shift())}});var b0={false:{left:0,right:0}};return b.syncOrAsync(g0.map(function(s0){return function(){if(s0){var O0=te.getFromId(Lt,s0);Wp||(Wp={}),Wp.axShifts=b0,Wp.overlayingShiftedAx=Xp;var U0=te.drawOne(Lt,O0,Wp);return O0._shiftPusher&&dg(O0,O0._fullDepth||0,b0,!0),O0._r=O0.range.slice(),O0._rl=b.simpleMap(O0._r,O0.r2l),U0}}}))},te.drawOne=function(Lt,At,Wp){Wp=Wp||{};var Qp=Wp.axShifts||{},g0=Wp.overlayingShiftedAx||[],$p,Xp,b0;At.setScale();var s0=Lt._fullLayout,O0=At._id,U0=O0.charAt(0),mm=te.counterLetter(O0),Jm=s0._plots[At._mainSubplot],qm=At.zerolinelayer==="above traces";if(!Jm)return;if(At._shiftPusher=At.autoshift||g0.indexOf(At._id)!==-1||g0.indexOf(At.overlaying)!==-1,At._shiftPusher&At.anchor==="free"){var b1=At.linewidth/2||0;At.ticks==="inside"&&(b1+=At.ticklen),dg(At,b1,Qp,!0),dg(At,At.shift||0,Qp,!1)}(Wp.skipTitle!==!0||At._shift===void 0)&&(At._shift=$m(At,Qp));var jm=Jm[U0+"axislayer"],e1=At._mainLinePosition,k1=e1+=At._shift,Pg=At._mainMirrorPosition,H1=At._vals=te.calcTicks(At),ov=[At.mirror,k1,Pg].join("_");for($p=0;$p<H1.length;$p++)H1[$p].axInfo=ov;At._selections={},At._tickAngles&&(At._prevTickAngles=At._tickAngles),At._tickAngles={},At._depth=null;var mg={};function cv(Dg){var Rg=O0+(Dg||"tick");return mg[Rg]||(mg[Rg]=Nm(At,Rg,k1)),mg[Rg]}if(At.visible){var Eg=te.makeTransTickFn(At),Qg=te.makeTransTickLabelFn(At),lv,vg,Fv=At.ticks==="inside",wv=At.ticks==="outside";if(At.tickson==="boundaries"){var Lg=J0(At,H1);vg=te.clipEnds(At,Lg),lv=Fv?vg:Lg}else vg=te.clipEnds(At,H1),lv=Fv&&At.ticklabelmode!=="period"?vg:H1;var xv=At._gridVals=vg,ev=tm(At,H1);if(!s0._hasOnlyLargeSploms){var sv=At._subplotsWith,ry={};for($p=0;$p<sv.length;$p++){Xp=sv[$p],b0=s0._plots[Xp];var zv=b0[mm+"axis"],Vg=zv._mainAxis._id;if(!ry[Vg]){ry[Vg]=1;var tv=U0==="x"?"M0,"+zv._offset+"v"+zv._length:"M"+zv._offset+",0h"+zv._length;te.drawGrid(Lt,At,{vals:xv,counterAxis:zv,layer:b0.gridlayer.select("."+O0),minorLayer:b0.minorGridlayer.select("."+O0),path:tv,transFn:Eg}),te.drawZeroLine(Lt,At,{counterAxis:zv,layer:qm?b0.zerolinelayerAbove:b0.zerolinelayer,path:tv,transFn:Eg})}}}var Wg,rv=te.getTickSigns(At),Bv=te.getTickSigns(At,"minor");if(At.ticks||At.minor&&At.minor.ticks){var Kv=te.makeTickPath(At,k1,rv[2]),Ov=te.makeTickPath(At,k1,Bv[2],{minor:!0}),ny,oy,Gv,nv;if(At._anchorAxis&&At.mirror&&At.mirror!==!0?(ny=te.makeTickPath(At,Pg,rv[3]),oy=te.makeTickPath(At,Pg,Bv[3],{minor:!0}),Gv=Kv+ny,nv=Ov+oy):(ny="",oy="",Gv=Kv,nv=Ov),At.showdividers&&wv&&At.tickson==="boundaries"){var My={};for($p=0;$p<ev.length;$p++)My[ev[$p].x]=1;Wg=function(Dg){return My[Dg.x]?ny:Gv}}else Wg=function(Dg){return Dg.minor?nv:Gv}}if(te.drawTicks(Lt,At,{vals:lv,layer:jm,path:Wg,transFn:Eg}),At.mirror==="allticks"){var cy=Object.keys(At._linepositions||{});for($p=0;$p<cy.length;$p++){Xp=cy[$p],b0=s0._plots[Xp];var Dy=At._linepositions[Xp]||[],hy=Dy[0],dy=Dy[1],jy=Dy[2],Fy=te.makeTickPath(At,hy,jy?rv[0]:Bv[0],{minor:jy})+te.makeTickPath(At,dy,jy?rv[1]:Bv[1],{minor:jy});te.drawTicks(Lt,At,{vals:lv,layer:b0[U0+"axislayer"],path:Fy,transFn:Eg})}}var wy=[];if(wy.push(function(){return te.drawLabels(Lt,At,{vals:H1,layer:jm,plotinfo:b0,transFn:Qg,labelFns:te.makeLabelFns(At,k1)})}),At.type==="multicategory"){var $y={x:2,y:10}[U0];wy.push(function(){var Dg={x:"height",y:"width"}[U0],Rg=cv()[Dg]+$y+(At._tickAngles[O0+"tick"]?At.tickfont.size*Cp:0);return te.drawLabels(Lt,At,{vals:em(At,H1),layer:jm,cls:O0+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:Eg,labelFns:te.makeLabelFns(At,k1+Rg*rv[4])})}),wy.push(function(){return At._depth=rv[4]*(cv("tick2")[At.side]-k1),B1(Lt,At,{vals:ev,layer:jm,path:te.makeTickPath(At,k1,rv[4],{len:At._depth}),transFn:Eg})})}else At.title.hasOwnProperty("standoff")&&wy.push(function(){At._depth=rv[4]*(cv()[At.side]-k1)});var hv=E.getComponentMethod("rangeslider","isVisible")(At);return!Wp.skipTitle&&!(hv&&At.side==="bottom")&&wy.push(function(){return zm(Lt,At)}),wy.push(function(){var Dg=At.side.charAt(0),Rg=pt[At.side].charAt(0),zg=te.getPxPosition(Lt,At),av=wv?At.ticklen:0,_v,fv,by,xx;(At.automargin||hv||At._shiftPusher)&&(At.type==="multicategory"?_v=cv("tick2"):(_v=cv(),U0==="x"&&Dg==="b"&&(At._depth=Math.max(_v.width>0?_v.bottom-zg:0,av))));var zy=0,sy=0;if(At._shiftPusher&&(zy=Math.max(av,_v.height>0?Dg==="l"?zg-_v.left:_v.right-zg:0),At.title.text!==s0._dfltTitle[U0]&&(sy=(At._titleStandoff||0)+(At._titleScoot||0),Dg==="l"&&(sy+=u1(At))),At._fullDepth=Math.max(zy,sy)),At.automargin){fv={x:0,y:0,r:0,l:0,t:0,b:0};var Vy=[0,1],_x=typeof At._shift=="number"?At._shift:0;if(U0==="x"){if(Dg==="b"?fv[Dg]=At._depth:(fv[Dg]=At._depth=Math.max(_v.width>0?zg-_v.top:0,av),Vy.reverse()),_v.width>0){var O2=_v.right-(At._offset+At._length);O2>0&&(fv.xr=1,fv.r=O2);var Hy=At._offset-_v.left;Hy>0&&(fv.xl=0,fv.l=Hy)}}else if(Dg==="l"?(At._depth=Math.max(_v.height>0?zg-_v.left:0,av),fv[Dg]=At._depth-_x):(At._depth=Math.max(_v.height>0?_v.right-zg:0,av),fv[Dg]=At._depth+_x,Vy.reverse()),_v.height>0){var bx=_v.bottom-(At._offset+At._length);bx>0&&(fv.yb=0,fv.b=bx);var hx=At._offset-_v.top;hx>0&&(fv.yt=1,fv.t=hx)}fv[mm]=At.anchor==="free"?At.position:At._anchorAxis.domain[Vy[0]],At.title.text!==s0._dfltTitle[U0]&&(fv[Dg]+=u1(At)+(At.title.standoff||0)),At.mirror&&At.anchor!=="free"&&(by={x:0,y:0,r:0,l:0,t:0,b:0},by[Rg]=At.linewidth,At.mirror&&At.mirror!==!0&&(by[Rg]+=av),At.mirror===!0||At.mirror==="ticks"?by[mm]=At._anchorAxis.domain[Vy[1]]:(At.mirror==="all"||At.mirror==="allticks")&&(by[mm]=[At._counterDomainMin,At._counterDomainMax][Vy[1]]))}hv&&(xx=E.getComponentMethod("rangeslider","autoMarginOpts")(Lt,At)),typeof At.automargin=="string"&&(A0(fv,At.automargin),A0(by,At.automargin)),m.autoMargin(Lt,w1(At),fv),m.autoMargin(Lt,s1(At),by),m.autoMargin(Lt,Q1(At),xx)}),b.syncOrAsync(wy)}};function A0(Lt,At){if(Lt){var Wp=Object.keys(kt).reduce(function(Qp,g0){return At.indexOf(g0)!==-1&&kt[g0].forEach(function($p){Qp[$p]=1}),Qp},{});Object.keys(Lt).forEach(function(Qp){Wp[Qp]||(Qp.length===1?Lt[Qp]=0:delete Lt[Qp])})}}function J0(Lt,At){var Wp=[],Qp,g0=function($p,Xp){var b0=$p.xbnd[Xp];b0!==null&&Wp.push(b.extendFlat({},$p,{x:b0}))};if(At.length){for(Qp=0;Qp<At.length;Qp++)g0(At[Qp],0);g0(At[Qp-1],1)}return Wp}function em(Lt,At){for(var Wp=[],Qp={},g0=0;g0<At.length;g0++){var $p=At[g0];Qp[$p.text2]?Qp[$p.text2].push($p.x):Qp[$p.text2]=[$p.x]}for(var Xp in Qp)Wp.push(bm(Lt,b.interp(Qp[Xp],.5),Xp));return Wp}function tm(Lt,At){var Wp=[],Qp,g0,$p=At.length&&At[At.length-1].x<At[0].x,Xp=function(s0,O0){var U0=s0.xbnd[O0];U0!==null&&Wp.push(b.extendFlat({},s0,{x:U0}))};if(Lt.showdividers&&At.length){for(Qp=0;Qp<At.length;Qp++){var b0=At[Qp];b0.text2!==g0&&Xp(b0,$p?1:0),g0=b0.text2}Xp(At[Qp-1],$p?0:1)}return Wp}function Nm(Lt,At,Wp){var Qp,g0,$p,Xp;if(Lt._selections[At].size())Qp=1/0,g0=-1/0,$p=1/0,Xp=-1/0,Lt._selections[At].each(function(){var s0=g1(this);if(s0.node().style.display!=="none"){var O0=F.bBox(s0.node().parentNode);Qp=Math.min(Qp,O0.top),g0=Math.max(g0,O0.bottom),$p=Math.min($p,O0.left),Xp=Math.max(Xp,O0.right)}});else{var b0=te.makeLabelFns(Lt,Wp);Qp=g0=b0.yFn({dx:0,dy:0,fontSize:0}),$p=Xp=b0.xFn({dx:0,dy:0,fontSize:0})}return{top:Qp,bottom:g0,left:$p,right:Xp,height:g0-Qp,width:Xp-$p}}te.getTickSigns=function(Lt,At){var Wp=Lt._id.charAt(0),Qp={x:"top",y:"right"}[Wp],g0=Lt.side===Qp?1:-1,$p=[-1,1,g0,-g0],Xp=At?(Lt.minor||{}).ticks:Lt.ticks;return Xp!=="inside"==(Wp==="x")&&($p=$p.map(function(b0){return-b0})),Lt.side&&$p.push({l:-1,t:-1,r:1,b:1}[Lt.side.charAt(0)]),$p},te.makeTransTickFn=function(Lt){return Lt._id.charAt(0)==="x"?function(At){return w(Lt._offset+Lt.l2p(At.x),0)}:function(At){return w(0,Lt._offset+Lt.l2p(At.x))}},te.makeTransTickLabelFn=function(Lt){var At=N1(Lt),Wp=Lt.ticklabelshift||0,Qp=Lt.ticklabelstandoff||0,g0=At[0],$p=At[1],Xp=Lt.range[0]>Lt.range[1],b0=Lt.ticklabelposition&&Lt.ticklabelposition.indexOf("inside")!==-1,s0=!b0;if(Wp){var O0=Xp?-1:1;Wp=Wp*O0}if(Qp){var U0=Lt.side,mm=b0&&(U0==="top"||U0==="left")||s0&&(U0==="bottom"||U0==="right")?1:-1;Qp=Qp*mm}return Lt._id.charAt(0)==="x"?function(Jm){return w(g0+Lt._offset+Lt.l2p(o1(Jm))+Wp,$p+Qp)}:function(Jm){return w($p+Qp,g0+Lt._offset+Lt.l2p(o1(Jm))+Wp)}};function o1(Lt){return Lt.periodX!==void 0?Lt.periodX:Lt.x}function N1(Lt){var At=Lt.ticklabelposition||"",Wp=Lt.tickson||"",Qp=function(b1){return At.indexOf(b1)!==-1},g0=Qp("top"),$p=Qp("left"),Xp=Qp("right"),b0=Qp("bottom"),s0=Qp("inside"),O0=Wp!=="boundaries"&&(b0||$p||g0||Xp);if(!O0&&!s0)return[0,0];var U0=Lt.side,mm=O0?(Lt.tickwidth||0)/2:0,Jm=gt,qm=Lt.tickfont?Lt.tickfont.size:12;return(b0||g0)&&(mm+=qm*ca,Jm+=(Lt.linewidth||0)/2),($p||Xp)&&(mm+=(Lt.linewidth||0)/2,Jm+=gt),s0&&U0==="top"&&(Jm-=qm*(1-ca)),($p||g0)&&(mm=-mm),(U0==="bottom"||U0==="right")&&(Jm=-Jm),[O0?mm:0,s0?Jm:0]}te.makeTickPath=function(Lt,At,Wp,Qp){Qp||(Qp={});var g0=Qp.minor;if(g0&&!Lt.minor)return"";var $p=Qp.len!==void 0?Qp.len:g0?Lt.minor.ticklen:Lt.ticklen,Xp=Lt._id.charAt(0),b0=(Lt.linewidth||1)/2;return Xp==="x"?"M0,"+(At+b0*Wp)+"v"+$p*Wp:"M"+(At+b0*Wp)+",0h"+$p*Wp},te.makeLabelFns=function(Lt,At,Wp){var Qp=Lt.ticklabelposition||"",g0=Lt.tickson||"",$p=function(Lg){return Qp.indexOf(Lg)!==-1},Xp=$p("top"),b0=$p("left"),s0=$p("right"),O0=$p("bottom"),U0=g0!=="boundaries"&&(O0||b0||Xp||s0),mm=$p("inside"),Jm=Qp==="inside"&&Lt.ticks==="inside"||!mm&&Lt.ticks==="outside"&&g0!=="boundaries",qm=0,b1=0,jm=Jm?Lt.ticklen:0;if(mm?jm*=-1:U0&&(jm=0),Jm&&(qm+=jm,Wp)){var e1=b.deg2rad(Wp);qm=jm*Math.cos(e1)+1,b1=jm*Math.sin(e1)}Lt.showticklabels&&(Jm||Lt.showline)&&(qm+=.2*Lt.tickfont.size),qm+=(Lt.linewidth||1)/2*(mm?-1:1);var k1={labelStandoff:qm,labelShift:b1},Pg,H1,ov,mg,cv=0,Eg=Lt.side,Qg=Lt._id.charAt(0),lv=Lt.tickangle,vg;if(Qg==="x")vg=!mm&&Eg==="bottom"||mm&&Eg==="top",mg=vg?1:-1,mm&&(mg*=-1),Pg=b1*mg,H1=At+qm*mg,ov=vg?1:-.2,Math.abs(lv)===90&&(mm?ov+=aa:lv===-90&&Eg==="bottom"?ov=ca:lv===90&&Eg==="top"?ov=aa:ov=.5,cv=aa/2*(lv/90)),k1.xFn=function(Lg){return Lg.dx+Pg+cv*Lg.fontSize},k1.yFn=function(Lg){return Lg.dy+H1+Lg.fontSize*ov},k1.anchorFn=function(Lg,xv){if(U0){if(b0)return"end";if(s0)return"start"}return!d(xv)||xv===0||xv===180?"middle":xv*mg<0!==mm?"end":"start"},k1.heightFn=function(Lg,xv,ev){return xv<-60||xv>60?-.5*ev:Lt.side==="top"!==mm?-ev:0};else if(Qg==="y"){if(vg=!mm&&Eg==="left"||mm&&Eg==="right",mg=vg?1:-1,mm&&(mg*=-1),Pg=qm,H1=b1*mg,ov=0,!mm&&Math.abs(lv)===90&&(lv===-90&&Eg==="left"||lv===90&&Eg==="right"?ov=ca:ov=.5),mm){var Fv=d(lv)?+lv:0;if(Fv!==0){var wv=b.deg2rad(Fv);cv=Math.abs(Math.sin(wv))*ca*mg,ov=0}}k1.xFn=function(Lg){return Lg.dx+At-(Pg+Lg.fontSize*ov)*mg+cv*Lg.fontSize},k1.yFn=function(Lg){return Lg.dy+H1+Lg.fontSize*aa},k1.anchorFn=function(Lg,xv){return d(xv)&&Math.abs(xv)===90?"middle":vg?"end":"start"},k1.heightFn=function(Lg,xv,ev){return Lt.side==="right"&&(xv*=-1),xv<-30?-ev:xv<30?-.5*ev:0}}return k1};function F1(Lt){return[Lt.text,Lt.x,Lt.axInfo,Lt.font,Lt.fontSize,Lt.fontColor].join("_")}te.drawTicks=function(Lt,At,Wp){Wp=Wp||{};var Qp=At._id+"tick",g0=[].concat(At.minor&&At.minor.ticks?Wp.vals.filter(function(Xp){return Xp.minor&&!Xp.noTick}):[]).concat(At.ticks?Wp.vals.filter(function(Xp){return!Xp.minor&&!Xp.noTick}):[]),$p=Wp.layer.selectAll("path."+Qp).data(g0,F1);$p.exit().remove(),$p.enter().append("path").classed(Qp,1).classed("ticks",1).classed("crisp",Wp.crisp!==!1).each(function(Xp){return p.stroke(_.select(this),Xp.minor?At.minor.tickcolor:At.tickcolor)}).style("stroke-width",function(Xp){return F.crispRound(Lt,Xp.minor?At.minor.tickwidth:At.tickwidth,1)+"px"}).attr("d",Wp.path).style("display",null),Ng(At,[St]),$p.attr("transform",Wp.transFn)},te.drawGrid=function(Lt,At,Wp){if(Wp=Wp||{},At.tickmode!=="sync"){var Qp=At._id+"grid",g0=At.minor&&At.minor.showgrid,$p=g0?Wp.vals.filter(function(k1){return k1.minor}):[],Xp=At.showgrid?Wp.vals.filter(function(k1){return!k1.minor}):[],b0=Wp.counterAxis;if(b0&&te.shouldShowZeroLine(Lt,At,b0))for(var s0=At.tickmode==="array",O0=0;O0<Xp.length;O0++){var U0=Xp[O0].x;if(s0?!U0:Math.abs(U0)<At.dtick/100)if(Xp=Xp.slice(0,O0).concat(Xp.slice(O0+1)),s0)O0--;else break}At._gw=F.crispRound(Lt,At.gridwidth,1);for(var mm=g0?F.crispRound(Lt,At.minor.gridwidth,1):0,Jm=Wp.layer,qm=Wp.minorLayer,b1=1;b1>=0;b1--){var jm=b1?Jm:qm;if(jm){var e1=jm.selectAll("path."+Qp).data(b1?Xp:$p,F1);e1.exit().remove(),e1.enter().append("path").classed(Qp,1).classed("crisp",Wp.crisp!==!1),e1.attr("transform",Wp.transFn).attr("d",Wp.path).each(function(k1){return p.stroke(_.select(this),k1.minor?At.minor.gridcolor:At.gridcolor||"#ddd")}).style("stroke-dasharray",function(k1){return F.dashStyle(k1.minor?At.minor.griddash:At.griddash,k1.minor?At.minor.gridwidth:At.gridwidth)}).style("stroke-width",function(k1){return(k1.minor?mm:At._gw)+"px"}).style("display",null),typeof Wp.path=="function"&&e1.attr("d",Wp.path)}}Ng(At,[Le,wt])}},te.drawZeroLine=function(Lt,At,Wp){Wp=Wp||Wp;var Qp=At._id+"zl",g0=te.shouldShowZeroLine(Lt,At,Wp.counterAxis),$p=Wp.layer.selectAll("path."+Qp).data(g0?[{x:0,id:At._id}]:[]);$p.exit().remove(),$p.enter().append("path").classed(Qp,1).classed("zl",1).classed("crisp",Wp.crisp!==!1).each(function(){Wp.layer.selectAll("path").sort(function(Xp,b0){return rt(Xp.id,b0.id)})}),$p.attr("transform",Wp.transFn).attr("d",Wp.path).call(p.stroke,At.zerolinecolor||p.defaultLine).style("stroke-width",F.crispRound(Lt,At.zerolinewidth,At._gw||1)+"px").style("display",null),Ng(At,[_t])},te.drawLabels=function(Lt,At,Wp){Wp=Wp||{};var Qp=Lt._fullLayout,g0=At._id,$p=At.zerolinelayer==="above traces",Xp=Wp.cls||g0+"tick",b0=Wp.vals.filter(function(Vg){return Vg.text}),s0=Wp.labelFns,O0=Wp.secondary?0:At.tickangle,U0=(At._prevTickAngles||{})[Xp],mm=Wp.layer.selectAll("g."+Xp).data(At.showticklabels?b0:[],F1),Jm=[];mm.enter().append("g").classed(Xp,1).append("text").attr("text-anchor","middle").each(function(Vg){var tv=_.select(this),Wg=Lt._promises.length;tv.call(S.positionText,s0.xFn(Vg),s0.yFn(Vg)).call(F.font,{family:Vg.font,size:Vg.fontSize,color:Vg.fontColor,weight:Vg.fontWeight,style:Vg.fontStyle,variant:Vg.fontVariant,textcase:Vg.fontTextcase,lineposition:Vg.fontLineposition,shadow:Vg.fontShadow}).text(Vg.text).call(S.convertToTspans,Lt),Lt._promises[Wg]?Jm.push(Lt._promises.pop().then(function(){qm(tv,O0)})):qm(tv,O0)}),Ng(At,[Ut]),mm.exit().remove(),Wp.repositionOnUpdate&&mm.each(function(Vg){_.select(this).select("text").call(S.positionText,s0.xFn(Vg),s0.yFn(Vg))});function qm(Vg,tv){Vg.each(function(Wg){var rv=_.select(this),Bv=rv.select(".text-math-group"),Kv=s0.anchorFn(Wg,tv),Ov=Wp.transFn.call(rv.node(),Wg)+(d(tv)&&+tv!=0?" rotate("+tv+","+s0.xFn(Wg)+","+(s0.yFn(Wg)-Wg.fontSize/2)+")":""),ny=S.lineCount(rv),oy=Cp*Wg.fontSize,Gv=s0.heightFn(Wg,d(tv)?+tv:0,(ny-1)*oy);if(Gv&&(Ov+=w(0,Gv)),Bv.empty()){var nv=rv.select("text");nv.attr({transform:Ov,"text-anchor":Kv}),nv.style("display",null),At._adjustTickLabelsOverflow&&At._adjustTickLabelsOverflow()}else{var My=F.bBox(Bv.node()).width,cy=My*{end:-.5,start:.5}[Kv];Bv.attr("transform",Ov+w(cy,0))}})}At._adjustTickLabelsOverflow=function(){var Vg=At.ticklabeloverflow;if(!(!Vg||Vg==="allow")){var tv=Vg.indexOf("hide")!==-1,Wg=At._id.charAt(0)==="x",rv=0,Bv=Wg?Lt._fullLayout.width:Lt._fullLayout.height;if(Vg.indexOf("domain")!==-1){var Kv=b.simpleMap(At.range,At.r2l);rv=At.l2p(Kv[0])+At._offset,Bv=At.l2p(Kv[1])+At._offset}var Ov=Math.min(rv,Bv),ny=Math.max(rv,Bv),oy=At.side,Gv=1/0,nv=-1/0;mm.each(function(hy){var dy=_.select(this),jy=dy.select(".text-math-group");if(jy.empty()){var Fy=F.bBox(dy.node()),wy=0;Wg?(Fy.right>ny||Fy.left<Ov)&&(wy=1):(Fy.bottom>ny||Fy.top+(At.tickangle?0:hy.fontSize/4)<Ov)&&(wy=1);var $y=dy.select("text");wy?tv&&$y.style("display","none"):$y.node().style.display!=="none"&&($y.style("display",null),oy==="bottom"||oy==="right"?Gv=Math.min(Gv,Wg?Fy.top:Fy.left):Gv=-1/0,oy==="top"||oy==="left"?nv=Math.max(nv,Wg?Fy.bottom:Fy.right):nv=1/0)}});for(var My in Qp._plots){var cy=Qp._plots[My];if(!(At._id!==cy.xaxis._id&&At._id!==cy.yaxis._id)){var Dy=Wg?cy.yaxis:cy.xaxis;Dy&&(Dy["_visibleLabelMin_"+At._id]=Gv,Dy["_visibleLabelMax_"+At._id]=nv)}}}},At._hideCounterAxisInsideTickLabels=function(Vg){var tv=At._id.charAt(0)==="x",Wg=[];for(var rv in Qp._plots){var Bv=Qp._plots[rv];At._id!==Bv.xaxis._id&&At._id!==Bv.yaxis._id||Wg.push(tv?Bv.yaxis:Bv.xaxis)}Wg.forEach(function(Kv,Ov){Kv&&rg(Kv)&&(Vg||[_t,wt,Le,St,Ut]).forEach(function(ny){var oy=ny.K==="tick"&&ny.L==="text"&&At.ticklabelmode==="period",Gv=Qp._plots[At._mainSubplot],nv;if(ny.K===_t.K){var My=$p?Gv.zerolinelayerAbove:Gv.zerolinelayer;nv=My.selectAll("."+At._id+"zl")}else ny.K===wt.K?nv=Gv.minorGridlayer.selectAll("."+At._id):ny.K===Le.K?nv=Gv.gridlayer.selectAll("."+At._id):nv=Gv[At._id.charAt(0)+"axislayer"];nv.each(function(){var cy=_.select(this);ny.L&&(cy=cy.selectAll(ny.L)),cy.each(function(Dy){var hy=At.l2p(oy?o1(Dy):Dy.x)+At._offset,dy=_.select(this);hy<At["_visibleLabelMax_"+Kv._id]&&hy>At["_visibleLabelMin_"+Kv._id]?dy.style("display","none"):ny.K==="tick"&&!Ov&&dy.node().style.display!=="none"&&dy.style("display",null)})})})})},qm(mm,U0+1?U0:O0);function b1(){return Jm.length&&Promise.all(Jm)}var jm=null;function e1(){if(qm(mm,O0),b0.length&&At.autotickangles&&(At.type!=="log"||String(At.dtick).charAt(0)!=="D")){jm=At.autotickangles[0];var Vg=0,tv=[],Wg,rv=1;mm.each(function(fv){Vg=Math.max(Vg,fv.fontSize);var by=At.l2p(fv.x),xx=g1(this),zy=F.bBox(xx.node());rv=Math.max(rv,S.lineCount(xx)),tv.push({top:0,bottom:10,height:10,left:by-zy.width/2,right:by+zy.width/2+2,width:zy.width+2})});var Bv=(At.tickson==="boundaries"||At.showdividers)&&!Wp.secondary,Kv=b0.length,Ov=Math.abs((b0[Kv-1].x-b0[0].x)*At._m)/(Kv-1),ny=Bv?Ov/2:Ov,oy=Bv?At.ticklen:Vg*1.25*rv,Gv=Math.sqrt(Math.pow(ny,2)+Math.pow(oy,2)),nv=ny/Gv,My=At.autotickangles.map(function(fv){return fv*Math.PI/180}),cy=My.find(function(fv){return Math.abs(Math.cos(fv))<=nv});cy===void 0&&(cy=My.reduce(function(fv,by){return Math.abs(Math.cos(fv))<Math.abs(Math.cos(by))?fv:by},My[0]));var Dy=cy*(180/Math.PI);if(Bv){var hy=2;for(At.ticks&&(hy+=At.tickwidth/2),Wg=0;Wg<tv.length;Wg++){var dy=b0[Wg].xbnd,jy=tv[Wg];if(dy[0]!==null&&jy.left-At.l2p(dy[0])<hy||dy[1]!==null&&At.l2p(dy[1])-jy.right<hy){jm=Dy;break}}}else{var Fy=At.ticklabelposition||"",wy=At.tickson||"",$y=function(fv){return Fy.indexOf(fv)!==-1},hv=$y("top"),Dg=$y("left"),Rg=$y("right"),zg=$y("bottom"),av=wy!=="boundaries"&&(zg||Dg||hv||Rg),_v=av?(At.tickwidth||0)+2*gt:0;for(Wg=0;Wg<tv.length-1;Wg++)if(b.bBoxIntersect(tv[Wg],tv[Wg+1],_v)){jm=Dy;break}}jm&&qm(mm,jm)}}At._selections&&(At._selections[Xp]=mm);var k1=[b1];At.automargin&&Qp._redrawFromAutoMarginCount&&U0===90?(jm=U0,k1.push(function(){qm(mm,U0)})):k1.push(e1),At._tickAngles&&k1.push(function(){At._tickAngles[Xp]=jm===null?d(O0)?O0:0:jm});var Pg=function(){var Vg=0,tv=0;return mm.each(function(Wg,rv){var Bv=g1(this),Kv=Bv.select(".text-math-group");if(Kv.empty()){var Ov;At._vals[rv]&&(Ov=At._vals[rv].bb||F.bBox(Bv.node()),At._vals[rv].bb=Ov),Vg=Math.max(Vg,Ov.width),tv=Math.max(tv,Ov.height)}}),{labelsMaxW:Vg,labelsMaxH:tv}},H1=At._anchorAxis;if(H1&&(H1.autorange||H1.insiderange)&&rg(At)&&!Z(Qp,At._id)&&(Qp._insideTickLabelsUpdaterange||(Qp._insideTickLabelsUpdaterange={}),H1.autorange&&(Qp._insideTickLabelsUpdaterange[H1._name+".autorange"]=H1.autorange,k1.push(Pg)),H1.insiderange)){var ov=Pg(),mg=At._id.charAt(0)==="y"?ov.labelsMaxW:ov.labelsMaxH;mg+=2*gt,At.ticklabelposition==="inside"&&(mg+=At.ticklen||0);var cv=At.side==="right"||At.side==="top"?1:-1,Eg=cv===1?1:0,Qg=cv===1?0:1,lv=[];lv[Qg]=H1.range[Qg];var vg=H1.range,Fv=H1.r2p(vg[Eg]),wv=H1.r2p(vg[Qg]),Lg=Qp._insideTickLabelsUpdaterange[H1._name+".range"];if(Lg){var xv=H1.r2p(Lg[Eg]),ev=H1.r2p(Lg[Qg]),sv=cv*(At._id.charAt(0)==="y"?1:-1);sv*Fv<sv*xv&&(Fv=xv,lv[Eg]=vg[Eg]=Lg[Eg]),sv*wv>sv*ev&&(wv=ev,lv[Qg]=vg[Qg]=Lg[Qg])}var ry=Math.abs(wv-Fv);ry-mg>0?(ry-=mg,mg*=1+mg/ry):mg=0,At._id.charAt(0)!=="y"&&(mg=-mg),lv[Eg]=H1.p2r(H1.r2p(vg[Eg])+cv*mg),H1.autorange==="min"||H1.autorange==="max reversed"?(lv[0]=null,H1._rangeInitial0=void 0,H1._rangeInitial1=void 0):(H1.autorange==="max"||H1.autorange==="min reversed")&&(lv[1]=null,H1._rangeInitial0=void 0,H1._rangeInitial1=void 0),Qp._insideTickLabelsUpdaterange[H1._name+".range"]=lv}var zv=b.syncOrAsync(k1);return zv&&zv.then&&Lt._promises.push(zv),zv};function B1(Lt,At,Wp){var Qp=At._id+"divider",g0=Wp.vals,$p=Wp.layer.selectAll("path."+Qp).data(g0,F1);$p.exit().remove(),$p.enter().insert("path",":first-child").classed(Qp,1).classed("crisp",1).call(p.stroke,At.dividercolor).style("stroke-width",F.crispRound(Lt,At.dividerwidth,1)+"px"),$p.attr("transform",Wp.transFn).attr("d",Wp.path)}te.getPxPosition=function(Lt,At){var Wp=Lt._fullLayout._size,Qp=At._id.charAt(0),g0=At.side,$p;if(At.anchor!=="free"?$p=At._anchorAxis:Qp==="x"?$p={_offset:Wp.t+(1-(At.position||0))*Wp.h,_length:0}:Qp==="y"&&($p={_offset:Wp.l+(At.position||0)*Wp.w+At._shift,_length:0}),g0==="top"||g0==="left")return $p._offset;if(g0==="bottom"||g0==="right")return $p._offset+$p._length};function u1(Lt){var At=Lt.title.font.size,Wp=(Lt.title.text.match(S.BR_TAG_ALL)||[]).length;return Lt.title.hasOwnProperty("standoff")?At*(ca+Wp*Cp):Wp?At*(Wp+1)*Cp:At}function zm(Lt,At){var Wp=Lt._fullLayout,Qp=At._id,g0=Qp.charAt(0),$p=At.title.font.size,Xp,b0=(At.title.text.match(S.BR_TAG_ALL)||[]).length;if(At.title.hasOwnProperty("standoff"))At.side==="bottom"||At.side==="right"?Xp=At._depth+At.title.standoff+$p*ca:(At.side==="top"||At.side==="left")&&(Xp=At._depth+At.title.standoff+$p*(aa+b0*Cp));else{var s0=rg(At);if(At.type==="multicategory")Xp=At._depth;else{var O0=1.5*$p;s0&&(O0=.5*$p,At.ticks==="outside"&&(O0+=At.ticklen)),Xp=10+O0+(At.linewidth?At.linewidth-1:0)}s0||(g0==="x"?Xp+=At.side==="top"?$p*(At.showticklabels?1:0):$p*(At.showticklabels?1.5:.5):Xp+=At.side==="right"?$p*(At.showticklabels?1:.5):$p*(At.showticklabels?.5:0))}var U0=te.getPxPosition(Lt,At),mm,Jm,qm;g0==="x"?(Jm=At._offset+At._length/2,qm=At.side==="top"?U0-Xp:U0+Xp):(qm=At._offset+At._length/2,Jm=At.side==="right"?U0+Xp:U0-Xp,mm={rotate:"-90",offset:0});var b1;if(At.type!=="multicategory"){var jm=At._selections[At._id+"tick"];if(b1={selection:jm,side:At.side},jm&&jm.node()&&jm.node().parentNode){var e1=F.getTranslate(jm.node().parentNode);b1.offsetLeft=e1.x,b1.offsetTop=e1.y}At.title.hasOwnProperty("standoff")&&(b1.pad=0)}return At._titleStandoff=Xp,C.draw(Lt,Qp+"title",{propContainer:At,propName:At._name+".title.text",placeholder:Wp._dfltTitle[g0],avoid:b1,transform:mm,attributes:{x:Jm,y:qm,"text-anchor":"middle"}})}te.shouldShowZeroLine=function(Lt,At,Wp){var Qp=b.simpleMap(At.range,At.r2l);return Qp[0]*Qp[1]<=0&&At.zeroline&&(At.type==="linear"||At.type==="-")&&!(At.rangebreaks&&At.maskBreaks(0)===vt)&&(R1(At,0)||!z1(Lt,At,Wp,Qp)||E1(Lt,At))},te.clipEnds=function(Lt,At){return At.filter(function(Wp){return R1(Lt,Wp.x)})};function R1(Lt,At){var Wp=Lt.l2p(At);return Wp>1&&Wp<Lt._length-1}function z1(Lt,At,Wp,Qp){var g0=Wp._mainAxis;if(!g0)return;var $p=Lt._fullLayout,Xp=At._id.charAt(0),b0=te.counterLetter(At._id),s0=At._offset+(Math.abs(Qp[0])<Math.abs(Qp[1])==(Xp==="x")?0:At._length);function O0(b1){if(!b1.showline||!b1.linewidth)return!1;var jm=Math.max((b1.linewidth+At.zerolinewidth)/2,1);function e1(H1){return typeof H1=="number"&&Math.abs(H1-s0)<jm}if(e1(b1._mainLinePosition)||e1(b1._mainMirrorPosition))return!0;var k1=b1._linepositions||{};for(var Pg in k1)if(e1(k1[Pg][0])||e1(k1[Pg][1]))return!0}var U0=$p._plots[Wp._mainSubplot];if(!(U0.mainplotinfo||U0).overlays.length)return O0(Wp);for(var mm=te.list(Lt,b0),Jm=0;Jm<mm.length;Jm++){var qm=mm[Jm];if(qm._mainAxis===g0&&O0(qm))return!0}}function E1(Lt,At){for(var Wp=Lt._fullData,Qp=At._mainSubplot,g0=At._id.charAt(0),$p=0;$p<Wp.length;$p++){var Xp=Wp[$p];if(Xp.visible===!0&&Xp.xaxis+Xp.yaxis===Qp&&(E.traceIs(Xp,"bar-like")&&Xp.orientation==={x:"h",y:"v"}[g0]||Xp.fill&&Xp.fill.charAt(Xp.fill.length-1)===g0))return!0}return!1}function g1(Lt){var At=_.select(Lt),Wp=At.select(".text-math-group");return Wp.empty()?At.select("text"):Wp}te.allowAutoMargin=function(Lt){for(var At=te.list(Lt,"",!0),Wp=0;Wp<At.length;Wp++){var Qp=At[Wp];Qp.automargin&&(m.allowAutoMargin(Lt,w1(Qp)),Qp.mirror&&m.allowAutoMargin(Lt,s1(Qp))),E.getComponentMethod("rangeslider","isVisible")(Qp)&&m.allowAutoMargin(Lt,Q1(Qp))}};function w1(Lt){return Lt._id+".automargin"}function s1(Lt){return w1(Lt)+".mirror"}function Q1(Lt){return Lt._id+".rangeslider"}te.swap=function(Lt,At){for(var Wp=og(Lt,At),Qp=0;Qp<Wp.length;Qp++)fg(Lt,Wp[Qp].x,Wp[Qp].y)};function og(Lt,At){var Wp=[],Qp,g0;for(Qp=0;Qp<At.length;Qp++){var $p=[],Xp=Lt._fullData[At[Qp]].xaxis,b0=Lt._fullData[At[Qp]].yaxis;if(!(!Xp||!b0)){for(g0=0;g0<Wp.length;g0++)(Wp[g0].x.indexOf(Xp)!==-1||Wp[g0].y.indexOf(b0)!==-1)&&$p.push(g0);if(!$p.length){Wp.push({x:[Xp],y:[b0]});continue}var s0=Wp[$p[0]],O0;if($p.length>1)for(g0=1;g0<$p.length;g0++)O0=Wp[$p[g0]],P1(s0.x,O0.x),P1(s0.y,O0.y);P1(s0.x,[Xp]),P1(s0.y,[b0])}}return Wp}function P1(Lt,At){for(var Wp=0;Wp<At.length;Wp++)Lt.indexOf(At[Wp])===-1&&Lt.push(At[Wp])}function fg(Lt,At,Wp){var Qp=[],g0=[],$p=Lt.layout,Xp,b0;for(Xp=0;Xp<At.length;Xp++)Qp.push(te.getFromId(Lt,At[Xp]));for(Xp=0;Xp<Wp.length;Xp++)g0.push(te.getFromId(Lt,Wp[Xp]));var s0=Object.keys(A),O0=["anchor","domain","overlaying","position","side","tickangle","editType"],U0=["linear","log"];for(Xp=0;Xp<s0.length;Xp++){var mm=s0[Xp],Jm=Qp[0][mm],qm=g0[0][mm],b1=!0,jm=!1,e1=!1;if(!(mm.charAt(0)==="_"||typeof Jm=="function"||O0.indexOf(mm)!==-1)){for(b0=1;b0<Qp.length&&b1;b0++){var k1=Qp[b0][mm];mm==="type"&&U0.indexOf(Jm)!==-1&&U0.indexOf(k1)!==-1&&Jm!==k1?jm=!0:k1!==Jm&&(b1=!1)}for(b0=1;b0<g0.length&&b1;b0++){var Pg=g0[b0][mm];mm==="type"&&U0.indexOf(qm)!==-1&&U0.indexOf(Pg)!==-1&&qm!==Pg?e1=!0:g0[b0][mm]!==qm&&(b1=!1)}b1&&(jm&&($p[Qp[0]._name].type="linear"),e1&&($p[g0[0]._name].type="linear"),bg($p,mm,Qp,g0,Lt._fullLayout._dfltTitle))}}for(Xp=0;Xp<Lt._fullLayout.annotations.length;Xp++){var H1=Lt._fullLayout.annotations[Xp];At.indexOf(H1.xref)!==-1&&Wp.indexOf(H1.yref)!==-1&&b.swapAttrs($p.annotations[Xp],["?"])}}function bg(Lt,At,Wp,Qp,g0){var $p=b.nestedProperty,Xp=$p(Lt[Wp[0]._name],At).get(),b0=$p(Lt[Qp[0]._name],At).get(),s0;for(At==="title"&&(Xp&&Xp.text===g0.x&&(Xp.text=g0.y),b0&&b0.text===g0.y&&(b0.text=g0.x)),s0=0;s0<Wp.length;s0++)$p(Lt,Wp[s0]._name+"."+At).set(b0);for(s0=0;s0<Qp.length;s0++)$p(Lt,Qp[s0]._name+"."+At).set(Xp)}function Cg(Lt){return Lt._id==="angularaxis"}function Ug(Lt,At){for(var Wp=At._rangebreaks.length,Qp=0;Qp<Wp;Qp++){var g0=At._rangebreaks[Qp];if(Lt>=g0.min&&Lt<g0.max)return g0.max}return Lt}function rg(Lt){return(Lt.ticklabelposition||"").indexOf("inside")!==-1}function Ng(Lt,At){rg(Lt._anchorAxis||{})&&Lt._hideCounterAxisInsideTickLabels&&Lt._hideCounterAxisInsideTickLabels(At)}function dg(Lt,At,Wp,Qp){var g0=Lt.anchor!=="free"&&(Lt.overlaying===void 0||Lt.overlaying===!1)?Lt._id:Lt.overlaying,$p;Qp?$p=Lt.side==="right"?At:-At:$p=At,g0 in Wp||(Wp[g0]={}),Lt.side in Wp[g0]||(Wp[g0][Lt.side]=0),Wp[g0][Lt.side]+=$p}function $m(Lt,At){return Lt.autoshift?At[Lt.overlaying][Lt.side]:Lt.shift||0}function Xg(Lt,At){return/%f/.test(At)?Lt>=it:/%L/.test(At)?Lt>=ht:/%[SX]/.test(At)?Lt>=tt:/%M/.test(At)?Lt>=xt:/%[HI]/.test(At)?Lt>=Q:/%p/.test(At)?Lt>=Re:/%[Aadejuwx]/.test(At)?Lt>=Ze:/%[UVW]/.test(At)?Lt>=yt:/%[Bbm]/.test(At)?Lt>=ee:/%[q]/.test(At)?Lt>=L:/%[Yy]/.test(At)?Lt>=I:!0}}),h1=r((nt,ke)=>{ke.exports=function(_,d,m){var E,b;if(m){var w=d==="reversed"||d==="min reversed"||d==="max reversed";E=m[w?1:0],b=m[w?0:1]}var S=_("autorangeoptions.minallowed",b===null?E:void 0),C=_("autorangeoptions.maxallowed",E===null?b:void 0);S===void 0&&_("autorangeoptions.clipmin"),C===void 0&&_("autorangeoptions.clipmax"),_("autorangeoptions.include")}}),i1=r((nt,ke)=>{var _=h1();ke.exports=function(d,m,E,b){var w=m._template||{},S=m.type||w.type||"-";E("minallowed"),E("maxallowed");var C=E("range");if(!C){var p;!b.noInsiderange&&S!=="log"&&(p=E("insiderange"),p&&(p[0]===null||p[1]===null)&&(m.insiderange=!1,p=void 0),p&&(C=E("range",p)))}var F=m.getAutorangeDflt(C,b),A=E("autorange",F),O;C&&(C[0]===null&&C[1]===null||(C[0]===null||C[1]===null)&&(A==="reversed"||A===!0)||C[0]!==null&&(A==="min"||A==="max reversed")||C[1]!==null&&(A==="max"||A==="min reversed"))&&(C=void 0,delete m.range,m.autorange=!0,O=!0),O||(F=m.getAutorangeDflt(C,b),A=E("autorange",F)),A&&(_(E,A,C),(S==="linear"||S==="-")&&E("rangemode")),m.cleanRange()}}),M1=r((nt,ke)=>{var _={left:0,top:0};ke.exports=d;function d(E,b,w){b=b||E.currentTarget||E.srcElement,Array.isArray(w)||(w=[0,0]);var S=E.clientX||0,C=E.clientY||0,p=m(b);return w[0]=S-p.left,w[1]=C-p.top,w}function m(E){return E===window||E===document||E===document.body?_:E.getBoundingClientRect()}}),L1=r((nt,ke)=>{var _=oa();function d(){var m=!1;try{var E=Object.defineProperty({},"passive",{get:function(){m=!0}});window.addEventListener("test",null,E),window.removeEventListener("test",null,E)}catch{m=!1}return m}ke.exports=_&&d()}),c1=r((nt,ke)=>{ke.exports=function(_,d,m,E,b){var w=(_-m)/(E-m),S=w+d/(E-m),C=(w+S)/2;return b==="left"||b==="bottom"?w:b==="center"||b==="middle"?C:b==="right"||b==="top"?S:w<2/3-C?w:S>4/3-C?S:C}}),j1=r((nt,ke)=>{var _=et(),d=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];ke.exports=function(m,E,b,w){return b==="left"?m=0:b==="center"?m=1:b==="right"?m=2:m=_.constrain(Math.floor(m*3),0,2),w==="bottom"?E=0:w==="middle"?E=1:w==="top"?E=2:E=_.constrain(Math.floor(E*3),0,2),d[E][m]}}),Hm=r((nt,ke)=>{var _=nm(),d=gy(),m=Cm().getGraphDiv,E=ae(),b=ke.exports={};b.wrapped=function(w,S,C){w=m(w),w._fullLayout&&d.clear(w._fullLayout._uid+E.HOVERID),b.raw(w,S,C)},b.raw=function(w,S){var C=w._fullLayout,p=w._hoverdata;S||(S={}),!(S.target&&!w._dragged&&_.triggerHandler(w,"plotly_beforehover",S)===!1)&&(C._hoverlayer.selectAll("g").remove(),C._hoverlayer.selectAll("line").remove(),C._hoverlayer.selectAll("circle").remove(),w._hoverdata=void 0,S.target&&p&&w.emit("plotly_unhover",{event:S,points:p}))}}),t1=r((nt,ke)=>{var _=M1(),d=a0(),m=L1(),E=et().removeElement,b=Vm(),w=ke.exports={};w.align=c1(),w.getCursor=j1();var S=Hm();w.unhover=S.wrapped,w.unhoverRaw=S.raw,w.init=function(F){var A=F.gd,O=1,$=A._context.doubleClickDelay,j=F.element,z,I,G,M,L,B,X,ee;A._mouseDownTime||(A._mouseDownTime=0),j.style.pointerEvents="all",j.onmousedown=Re,m?(j._ontouchstart&&j.removeEventListener("touchstart",j._ontouchstart),j._ontouchstart=Re,j.addEventListener("touchstart",Re,{passive:!1})):j.ontouchstart=Re;function yt(tt,ht,it){return Math.abs(tt)<it&&(tt=0),Math.abs(ht)<it&&(ht=0),[tt,ht]}var Ze=F.clampFn||yt;function Re(tt){A._dragged=!1,A._dragging=!0;var ht=p(tt);z=ht[0],I=ht[1],X=tt.target,B=tt,ee=tt.buttons===2||tt.ctrlKey,typeof tt.clientX>"u"&&typeof tt.clientY>"u"&&(tt.clientX=z,tt.clientY=I),G=new Date().getTime(),G-A._mouseDownTime<$?O+=1:(O=1,A._mouseDownTime=G),F.prepFn&&F.prepFn(tt,z,I),d&&!ee?(L=C(),L.style.cursor=window.getComputedStyle(j).cursor):d||(L=document,M=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(j).cursor),document.addEventListener("mouseup",xt),document.addEventListener("touchend",xt),F.dragmode!==!1&&(tt.preventDefault(),document.addEventListener("mousemove",Q),document.addEventListener("touchmove",Q,{passive:!1}))}function Q(tt){tt.preventDefault();var ht=p(tt),it=F.minDrag||b.MINDRAG,ut=Ze(ht[0]-z,ht[1]-I,it),vt=ut[0],_t=ut[1];(vt||_t)&&(A._dragged=!0,w.unhover(A,tt)),A._dragged&&F.moveFn&&!ee&&(A._dragdata={element:j,dx:vt,dy:_t},F.moveFn(vt,_t))}function xt(tt){if(delete A._dragdata,F.dragmode!==!1&&(tt.preventDefault(),document.removeEventListener("mousemove",Q),document.removeEventListener("touchmove",Q)),document.removeEventListener("mouseup",xt),document.removeEventListener("touchend",xt),d?E(L):M&&(L.documentElement.style.cursor=M,M=null),!A._dragging){A._dragged=!1;return}if(A._dragging=!1,new Date().getTime()-A._mouseDownTime>$&&(O=Math.max(O-1,1)),A._dragged)F.doneFn&&F.doneFn();else{var ht;B.target===X?ht=B:(ht={target:X,srcElement:X,toElement:X},Object.keys(B).concat(Object.keys(B.__proto__)).forEach(it=>{var ut=B[it];!ht[it]&&typeof ut!="function"&&(ht[it]=ut)})),F.clickFn&&F.clickFn(O,ht),ee||X.dispatchEvent(new MouseEvent("click",tt))}A._dragging=!1,A._dragged=!1}};function C(){var F=document.createElement("div");F.className="dragcover";var A=F.style;return A.position="fixed",A.left=0,A.right=0,A.top=0,A.bottom=0,A.zIndex=999999999,A.background="none",document.body.appendChild(F),F}w.coverSlip=C;function p(F){return _(F.changedTouches?F.changedTouches[0]:F,document.body)}}),Y1=r((nt,ke)=>{ke.exports=function(_,d){(_.attr("class")||"").split(" ").forEach(function(m){m.indexOf("cursor-")===0&&_.classed(m,!1)}),d&&_.classed("cursor-"+d,!0)}}),d1=r((nt,ke)=>{var _=Y1(),d="data-savedcursor",m="!!";ke.exports=function(E,b){var w=E.attr(d);if(b){if(!w){for(var S=(E.attr("class")||"").split(" "),C=0;C<S.length;C++){var p=S[C];p.indexOf("cursor-")===0&&E.attr(d,p.substr(7)).classed(p,!1)}E.attr(d)||E.attr(d,m)}_(E,b)}else w&&(E.attr(d,null),w===m?_(E):_(E,w))}}),q1=r((nt,ke)=>{var _=ct(),d=Lp();ke.exports={_isSubplotObj:!0,visible:{valType:"boolean",dflt:!0,editType:"legend"},bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:d.defaultLine,editType:"legend"},maxheight:{valType:"number",min:0,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:_({editType:"legend"}),grouptitlefont:_({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},entrywidth:{valType:"number",min:0,editType:"legend"},entrywidthmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels",editType:"legend"},indentation:{valType:"number",min:-15,dflt:0,editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend"},x:{valType:"number",editType:"legend"},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",editType:"legend"},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:_({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left","top center","top right"],editType:"legend"},editType:"legend"},editType:"legend"}}),Z1=r(nt=>{nt.isGrouped=function(ke){return(ke.traceorder||"").indexOf("grouped")!==-1},nt.isVertical=function(ke){return ke.orientation!=="h"},nt.isReversed=function(ke){return(ke.traceorder||"").indexOf("reversed")!==-1}}),x1=r((nt,ke)=>{var _=y1(),d=et(),m=Fm(),E=$t(),b=q1(),w=Km(),S=Z1();function C(p,F,A,O){var $=F[p]||{},j=m.newContainer(A,p);function z(Cp,pt){return d.coerce($,j,b,Cp,pt)}var I=d.coerceFont(z,"font",A.font);z("bgcolor",A.paper_bgcolor),z("bordercolor");var G=z("visible");if(G){for(var M,L=function(Cp,pt){var gt=M._input,te=M;return d.coerce(gt,te,E,Cp,pt)},B=A.font||{},X=d.coerceFont(z,"grouptitlefont",B,{overrideDflt:{size:Math.round(B.size*1.1)}}),ee=0,yt=!1,Ze="normal",Re=(A.shapes||[]).filter(function(Cp){return Cp.showlegend}),Q=O.concat(Re).filter(function(Cp){return p===(Cp.legend||"legend")}),xt=0;xt<Q.length;xt++)if(M=Q[xt],!!M.visible){var tt=M._isShape;(M.showlegend||M._dfltShowLegend&&!(M._module&&M._module.attributes&&M._module.attributes.showlegend&&M._module.attributes.showlegend.dflt===!1))&&(ee++,M.showlegend&&(yt=!0,(!tt&&_.traceIs(M,"pie-like")||M._input.showlegend===!0)&&ee++),d.coerceFont(L,"legendgrouptitle.font",X)),(!tt&&_.traceIs(M,"bar")&&A.barmode==="stack"||["tonextx","tonexty"].indexOf(M.fill)!==-1)&&(Ze=S.isGrouped({traceorder:Ze})?"grouped+reversed":"reversed"),M.legendgroup!==void 0&&M.legendgroup!==""&&(Ze=S.isReversed({traceorder:Ze})?"reversed+grouped":"grouped")}var ht=d.coerce(F,A,w,"showlegend",yt&&ee>(p==="legend"?1:0));if(ht===!1&&(A[p]=void 0),!(ht===!1&&!$.uirevision)&&(z("uirevision",A.uirevision),ht!==!1)){z("borderwidth");var it=z("orientation"),ut=z("yref"),vt=z("xref"),_t=it==="h",Le=ut==="paper",wt=vt==="paper",St,Ut,kt,jt="left";_t?(St=0,_.getComponentMethod("rangeslider","isVisible")(F.xaxis)?Le?(Ut=1.1,kt="bottom"):(Ut=1,kt="top"):Le?(Ut=-.1,kt="top"):(Ut=0,kt="bottom")):(Ut=1,kt="auto",wt?St=1.02:(St=1,jt="right")),d.coerce($,j,{x:{valType:"number",editType:"legend",min:wt?-2:0,max:wt?3:1,dflt:St}},"x"),d.coerce($,j,{y:{valType:"number",editType:"legend",min:Le?-2:0,max:Le?3:1,dflt:Ut}},"y"),z("traceorder",Ze),S.isGrouped(A[p])&&z("tracegroupgap"),z("entrywidth"),z("entrywidthmode"),z("indentation"),z("itemsizing"),z("itemwidth"),z("itemclick"),z("itemdoubleclick"),z("groupclick"),z("xanchor",jt),z("yanchor",kt),z("maxheight"),z("valign"),d.noneOrAll($,j,["x","y"]);var aa=z("title.text");if(aa){z("title.side",_t?"left":"top");var ca=d.extendFlat({},I,{size:d.bigFont(I.size)});d.coerceFont(z,"title.font",ca)}}}}ke.exports=function(p,F,A){var O,$=A.slice(),j=F.shapes;if(j)for(O=0;O<j.length;O++){var z=j[O];if(z.showlegend){var I={_input:z._input,visible:z.visible,showlegend:z.showlegend,legend:z.legend};$.push(I)}}var G=["legend"];for(O=0;O<$.length;O++)d.pushUnique(G,$[O].legend);for(F._legends=[],O=0;O<G.length;O++){var M=G[O];C(M,p,F,$),F[M]&&(F[M]._id=M),F._legends.push(M)}}}),ag=r((nt,ke)=>{var _=y1(),d=et(),m=d.pushUnique,E=!0;ke.exports=function(b,w,S){var C=w._fullLayout;if(w._dragged||w._editing)return;var p=C.legend.itemclick,F=C.legend.itemdoubleclick,A=C.legend.groupclick;S===1&&p==="toggle"&&F==="toggleothers"&&E&&w.data&&w._context.showTips&&d.notifier(d._(w,"Double-click on legend to isolate one trace"),"long"),E=!1;var O;if(S===1?O=p:S===2&&(O=F),!O)return;var $=A==="togglegroup",j=C.hiddenlabels?C.hiddenlabels.slice():[],z=b.data()[0][0];if(z.groupTitle&&z.noClick)return;var I=w._fullData,G=(C.shapes||[]).filter(function(_0){return _0.showlegend}),M=I.concat(G),L=z.trace;L._isShape&&(L=L._fullInput);var B=L.legendgroup,X,ee,yt,Ze,Re,Q,xt={},tt=[],ht=[],it=[];function ut(_0,ha){var Rp=tt.indexOf(_0),Gt=xt.visible;return Gt||(Gt=xt.visible=[]),tt.indexOf(_0)===-1&&(tt.push(_0),Rp=tt.length-1),Gt[Rp]=ha,Rp}var vt=(C.shapes||[]).map(function(_0){return _0._input}),_t=!1;function Le(_0,ha){vt[_0].visible=ha,_t=!0}function wt(_0,ha){if(!(z.groupTitle&&!$)){var Rp=_0._fullInput||_0,Gt=Rp._isShape,Gp=Rp.index;Gp===void 0&&(Gp=Rp._index);var c0=Rp.visible===!1?!1:ha;Gt?Le(Gp,c0):ut(Gp,c0)}}var St=L.legend,Ut=L._fullInput,kt=Ut&&Ut._isShape;if(!kt&&_.traceIs(L,"pie-like")){var jt=z.label,aa=j.indexOf(jt);if(O==="toggle")aa===-1?j.push(jt):j.splice(aa,1);else if(O==="toggleothers"){var ca=aa!==-1,Cp=[];for(X=0;X<w.calcdata.length;X++){var pt=w.calcdata[X];for(ee=0;ee<pt.length;ee++){var gt=pt[ee],te=gt.label;St===pt[0].trace.legend&&jt!==te&&(j.indexOf(te)===-1&&(ca=!0),m(j,te),Cp.push(te))}}if(!ca)for(var Et=0;Et<Cp.length;Et++){var zt=j.indexOf(Cp[Et]);zt!==-1&&j.splice(zt,1)}}_.call("_guiRelayout",w,"hiddenlabels",j)}else{var rt=B&&B.length,Z=[],we;if(rt)for(X=0;X<M.length;X++)we=M[X],we.visible&&we.legendgroup===B&&Z.push(X);if(O==="toggle"){var ot;switch(L.visible){case!0:ot="legendonly";break;case!1:ot=!1;break;case"legendonly":ot=!0;break}if(rt)if($)for(X=0;X<M.length;X++){var mt=M[X];mt.visible!==!1&&mt.legendgroup===B&&wt(mt,ot)}else wt(L,ot);else wt(L,ot)}else if(O==="toggleothers"){var It,Yt,Sr,Op,Hp,n0=!0;for(X=0;X<M.length;X++)if(Hp=M[X],It=Hp===L,Sr=Hp.showlegend!==!0,!(It||Sr)&&(Yt=rt&&Hp.legendgroup===B,!Yt&&Hp.legend===St&&Hp.visible===!0&&!_.traceIs(Hp,"notLegendIsolatable"))){n0=!1;break}for(X=0;X<M.length;X++)if(Hp=M[X],!(Hp.visible===!1||Hp.legend!==St)&&!_.traceIs(Hp,"notLegendIsolatable"))switch(L.visible){case"legendonly":wt(Hp,!0);break;case!0:Op=n0?!0:"legendonly",It=Hp===L,Sr=Hp.showlegend!==!0&&!Hp.legendgroup,Yt=It||rt&&Hp.legendgroup===B,wt(Hp,Yt||Sr?!0:Op);break}}for(X=0;X<ht.length;X++)if(yt=ht[X],!!yt){var R0=yt.constructUpdate(),w0=Object.keys(R0);for(ee=0;ee<w0.length;ee++)Ze=w0[ee],Q=xt[Ze]=xt[Ze]||[],Q[it[X]]=R0[Ze]}for(Re=Object.keys(xt),X=0;X<Re.length;X++)for(Ze=Re[X],ee=0;ee<tt.length;ee++)xt[Ze].hasOwnProperty(ee)||(xt[Ze][ee]=void 0);_t?_.call("_guiUpdate",w,xt,{shapes:vt},tt):_.call("_guiRestyle",w,xt,tt)}}}),Og=r((nt,ke)=>{ke.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}}),eg=r((nt,ke)=>{var _=y1(),d=Z1();ke.exports=function(m,E,b){var w=E._inHover,S=d.isGrouped(E),C=d.isReversed(E),p={},F=[],A=!1,O={},$=0,j=0,z,I;function G(wt,St,Ut){if(E.visible!==!1&&!(b&&wt!==E._id))if(St===""||!d.isGrouped(E)){var kt="~~i"+$;F.push(kt),p[kt]=[Ut],$++}else F.indexOf(St)===-1?(F.push(St),A=!0,p[St]=[Ut]):p[St].push(Ut)}for(z=0;z<m.length;z++){var M=m[z],L=M[0],B=L.trace,X=B.legend,ee=B.legendgroup;if(!(!w&&(!B.visible||!B.showlegend)))if(_.traceIs(B,"pie-like"))for(O[ee]||(O[ee]={}),I=0;I<M.length;I++){var yt=M[I].label;O[ee][yt]||(G(X,ee,{label:yt,color:M[I].color,i:M[I].i,trace:B,pts:M[I].pts}),O[ee][yt]=!0,j=Math.max(j,(yt||"").length))}else G(X,ee,L),j=Math.max(j,(B.name||"").length)}if(!F.length)return[];var Ze=!A||!S,Re=[];for(z=0;z<F.length;z++){var Q=p[F[z]];Ze?Re.push(Q[0]):Re.push(Q)}for(Ze&&(Re=[Re]),z=0;z<Re.length;z++){var xt=1/0;for(I=0;I<Re[z].length;I++){var tt=Re[z][I].trace.legendrank;xt>tt&&(xt=tt)}Re[z][0]._groupMinRank=xt,Re[z][0]._preGroupSort=z}var ht=function(wt,St){return wt[0]._groupMinRank-St[0]._groupMinRank||wt[0]._preGroupSort-St[0]._preGroupSort},it=function(wt,St){return wt.trace.legendrank-St.trace.legendrank||wt._preSort-St._preSort};for(Re.forEach(function(wt,St){wt[0]._preGroupSort=St}),Re.sort(ht),z=0;z<Re.length;z++){Re[z].forEach(function(wt,St){wt._preSort=St}),Re[z].sort(it);var ut=Re[z][0].trace,vt=null;for(I=0;I<Re[z].length;I++){var _t=Re[z][I].trace.legendgrouptitle;if(_t&&_t.text){vt=_t,w&&(_t.font=E._groupTitleFont);break}}if(C&&Re[z].reverse(),vt){var Le=!1;for(I=0;I<Re[z].length;I++)if(_.traceIs(Re[z][I].trace,"pie-like")){Le=!0;break}Re[z].unshift({i:-1,groupTitle:vt,noClick:Le,trace:{showlegend:ut.showlegend,legendgroup:ut.legendgroup,visible:E.groupclick==="toggleitem"?!0:ut.visible}})}for(I=0;I<Re[z].length;I++)Re[z][I]=[Re[z][I]]}return E._lgroupsLength=Re.length,E._maxNameLength=j,Re}}),C1=r(nt=>{var ke=et();function _(d){return d.indexOf("e")!==-1?d.replace(/[.]?0+e/,"e"):d.indexOf(".")!==-1?d.replace(/[.]?0+$/,""):d}nt.formatPiePercent=function(d,m){var E=_((d*100).toPrecision(3));return ke.numSeparate(E,m)+"%"},nt.formatPieValue=function(d,m){var E=_(d.toPrecision(10));return ke.numSeparate(E,m)},nt.getFirstFilled=function(d,m){if(ke.isArrayOrTypedArray(d))for(var E=0;E<m.length;E++){var b=d[m[E]];if(b||b===0||b==="")return b}},nt.castOption=function(d,m){if(ke.isArrayOrTypedArray(d))return nt.getFirstFilled(d,m);if(d)return d},nt.getRotationAngle=function(d){return(d==="auto"?0:d)*Math.PI/180}}),Bg=r((nt,ke)=>{var _=Q0(),d=Mn();ke.exports=function(m,E,b,w){var S=b.marker.pattern;S&&S.shape?_.pointStyle(m,b,w,E):d.fill(m,E.color)}}),xg=r((nt,ke)=>{var _=Mn(),d=C1().castOption,m=Bg();ke.exports=function(E,b,w,S){var C=w.marker.line,p=d(C.color,b.pts)||_.defaultLine,F=d(C.width,b.pts)||0;E.call(m,b,w,S).style("stroke-width",F).call(_.stroke,p)}}),Ig=r((nt,ke)=>{var _=o(),d=y1(),m=et(),E=m.strTranslate,b=Q0(),w=Mn(),S=sg().extractOpts,C=Kp(),p=xg(),F=C1().castOption,A=Og(),O=12,$=5,j=2,z=10,I=5;ke.exports=function(B,X,ee){var yt=X._fullLayout;ee||(ee=yt.legend);var Ze=ee.itemsizing==="constant",Re=ee.itemwidth,Q=(Re+A.itemGap*2)/2,xt=E(Q,0),tt=function(Cp,pt,gt,te){var Et;if(Cp+1)Et=Cp;else if(pt&&pt.width>0)Et=pt.width;else return 0;return Ze?te:Math.min(Et,gt)};B.each(function(Cp){var pt=_.select(this),gt=m.ensureSingle(pt,"g","layers");gt.style("opacity",Cp[0].trace.opacity);var te=ee.indentation,Et=ee.valign,zt=Cp[0].lineHeight,rt=Cp[0].height;if(Et==="middle"&&te===0||!zt||!rt)gt.attr("transform",null);else{var Z={top:1,bottom:-1}[Et],we=Z*(.5*(zt-rt+3))||0,ot=ee.indentation;gt.attr("transform",E(ot,we))}var mt=gt.selectAll("g.legendfill").data([Cp]);mt.enter().append("g").classed("legendfill",!0);var It=gt.selectAll("g.legendlines").data([Cp]);It.enter().append("g").classed("legendlines",!0);var Yt=gt.selectAll("g.legendsymbols").data([Cp]);Yt.enter().append("g").classed("legendsymbols",!0),Yt.selectAll("g.legendpoints").data([Cp]).enter().append("g").classed("legendpoints",!0)}).each(ca).each(ut).each(_t).each(vt).each(wt).each(jt).each(kt).each(ht).each(it).each(St).each(Ut);function ht(Cp){var pt=M(Cp),gt=pt.showFill,te=pt.showLine,Et=pt.showGradientLine,zt=pt.showGradientFill,rt=pt.anyFill,Z=pt.anyLine,we=Cp[0],ot=we.trace,mt,It,Yt=S(ot),Sr=Yt.colorscale,Op=Yt.reversescale,Hp=function(Gt){if(Gt.size())if(gt)b.fillGroupStyle(Gt,X,!0);else{var Gp="legendfill-"+ot.uid;b.gradient(Gt,X,Gp,G(Op),Sr,"fill")}},n0=function(Gt){if(Gt.size()){var Gp="legendline-"+ot.uid;b.lineGroupStyle(Gt),b.gradient(Gt,X,Gp,G(Op),Sr,"stroke")}},R0=C.hasMarkers(ot)||!rt?"M5,0":Z?"M5,-2":"M5,-3",w0=_.select(this),_0=w0.select(".legendfill").selectAll("path").data(gt||zt?[Cp]:[]);if(_0.enter().append("path").classed("js-fill",!0),_0.exit().remove(),_0.attr("d",R0+"h"+Re+"v6h-"+Re+"z").call(Hp),te||Et){var ha=tt(void 0,ot.line,z,$);It=m.minExtend(ot,{line:{width:ha}}),mt=[m.minExtend(we,{trace:It})]}var Rp=w0.select(".legendlines").selectAll("path").data(te||Et?[mt]:[]);Rp.enter().append("path").classed("js-line",!0),Rp.exit().remove(),Rp.attr("d",R0+(Et?"l"+Re+",0.0001":"h"+Re)).call(te?b.lineGroupStyle:n0)}function it(Cp){var pt=M(Cp),gt=pt.anyFill,te=pt.anyLine,Et=pt.showLine,zt=pt.showMarker,rt=Cp[0],Z=rt.trace,we=!zt&&!te&&!gt&&C.hasText(Z),ot,mt;function It(_0,ha,Rp,Gt){var Gp=m.nestedProperty(Z,_0).get(),c0=m.isArrayOrTypedArray(Gp)&&ha?ha(Gp):Gp;if(Ze&&c0&&Gt!==void 0&&(c0=Gt),Rp){if(c0<Rp[0])return Rp[0];if(c0>Rp[1])return Rp[1]}return c0}function Yt(_0){return rt._distinct&&rt.index&&_0[rt.index]?_0[rt.index]:_0[0]}if(zt||we||Et){var Sr={},Op={};if(zt){Sr.mc=It("marker.color",Yt),Sr.mx=It("marker.symbol",Yt),Sr.mo=It("marker.opacity",m.mean,[.2,1]),Sr.mlc=It("marker.line.color",Yt),Sr.mlw=It("marker.line.width",m.mean,[0,5],j),Op.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var Hp=It("marker.size",m.mean,[2,16],O);Sr.ms=Hp,Op.marker.size=Hp}Et&&(Op.line={width:It("line.width",Yt,[0,10],$)}),we&&(Sr.tx="Aa",Sr.tp=It("textposition",Yt),Sr.ts=10,Sr.tc=It("textfont.color",Yt),Sr.tf=It("textfont.family",Yt),Sr.tw=It("textfont.weight",Yt),Sr.ty=It("textfont.style",Yt),Sr.tv=It("textfont.variant",Yt),Sr.tC=It("textfont.textcase",Yt),Sr.tE=It("textfont.lineposition",Yt),Sr.tS=It("textfont.shadow",Yt)),ot=[m.minExtend(rt,Sr)],mt=m.minExtend(Z,Op),mt.selectedpoints=null,mt.texttemplate=null}var n0=_.select(this).select("g.legendpoints"),R0=n0.selectAll("path.scatterpts").data(zt?ot:[]);R0.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",xt),R0.exit().remove(),R0.call(b.pointStyle,mt,X),zt&&(ot[0].mrc=3);var w0=n0.selectAll("g.pointtext").data(we?ot:[]);w0.enter().append("g").classed("pointtext",!0).append("text").attr("transform",xt),w0.exit().remove(),w0.selectAll("text").call(b.textPointStyle,mt,X)}function ut(Cp){var pt=Cp[0].trace,gt=pt.type==="waterfall";if(Cp[0]._distinct&&gt){var te=Cp[0].trace[Cp[0].dir].marker;return Cp[0].mc=te.color,Cp[0].mlw=te.line.width,Cp[0].mlc=te.line.color,Le(Cp,this,"waterfall")}var Et=[];pt.visible&&gt&&(Et=Cp[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var zt=_.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(Et);zt.enter().append("path").classed("legendwaterfall",!0).attr("transform",xt).style("stroke-miterlimit",1),zt.exit().remove(),zt.each(function(rt){var Z=_.select(this),we=pt[rt[0]].marker,ot=tt(void 0,we.line,I,j);Z.attr("d",rt[1]).style("stroke-width",ot+"px").call(w.fill,we.color),ot&&Z.call(w.stroke,we.line.color)})}function vt(Cp){Le(Cp,this)}function _t(Cp){Le(Cp,this,"funnel")}function Le(Cp,pt,gt){var te=Cp[0].trace,Et=te.marker||{},zt=Et.line||{},rt=Et.cornerradius?"M6,3a3,3,0,0,1-3,3H-3a3,3,0,0,1-3-3V-3a3,3,0,0,1,3-3H3a3,3,0,0,1,3,3Z":"M6,6H-6V-6H6Z",Z=gt?te.visible&&te.type===gt:d.traceIs(te,"bar"),we=_.select(pt).select("g.legendpoints").selectAll("path.legend"+gt).data(Z?[Cp]:[]);we.enter().append("path").classed("legend"+gt,!0).attr("d",rt).attr("transform",xt),we.exit().remove(),we.each(function(ot){var mt=_.select(this),It=ot[0],Yt=tt(It.mlw,Et.line,I,j);mt.style("stroke-width",Yt+"px");var Sr=It.mcc;if(!ee._inHover&&"mc"in It){var Op=S(Et),Hp=Op.mid;Hp===void 0&&(Hp=(Op.max+Op.min)/2),Sr=b.tryColorscale(Et,"")(Hp)}var n0=Sr||It.mc||Et.color,R0=Et.pattern,w0=b.getPatternAttr,_0=R0&&(w0(R0.shape,0,"")||w0(R0.path,0,""));if(_0){var ha=w0(R0.bgcolor,0,null),Rp=w0(R0.fgcolor,0,null),Gt=R0.fgopacity,Gp=L(R0.size,8,10),c0=L(R0.solidity,.5,1),M0="legend-"+te.uid;mt.call(b.pattern,"legend",X,M0,_0,Gp,c0,Sr,R0.fillmode,ha,Rp,Gt)}else mt.call(w.fill,n0);Yt&&w.stroke(mt,It.mlc||zt.color)})}function wt(Cp){var pt=Cp[0].trace,gt=_.select(this).select("g.legendpoints").selectAll("path.legendbox").data(pt.visible&&d.traceIs(pt,"box-violin")?[Cp]:[]);gt.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",xt),gt.exit().remove(),gt.each(function(){var te=_.select(this);if((pt.boxpoints==="all"||pt.points==="all")&&w.opacity(pt.fillcolor)===0&&w.opacity((pt.line||{}).color)===0){var Et=m.minExtend(pt,{marker:{size:Ze?O:m.constrain(pt.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});gt.call(b.pointStyle,Et,X)}else{var zt=tt(void 0,pt.line,I,j);te.style("stroke-width",zt+"px").call(w.fill,pt.fillcolor),zt&&w.stroke(te,pt.line.color)}})}function St(Cp){var pt=Cp[0].trace,gt=_.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(pt.visible&&pt.type==="candlestick"?[Cp,Cp]:[]);gt.enter().append("path").classed("legendcandle",!0).attr("d",function(te,Et){return Et?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",xt).style("stroke-miterlimit",1),gt.exit().remove(),gt.each(function(te,Et){var zt=_.select(this),rt=pt[Et?"increasing":"decreasing"],Z=tt(void 0,rt.line,I,j);zt.style("stroke-width",Z+"px").call(w.fill,rt.fillcolor),Z&&w.stroke(zt,rt.line.color)})}function Ut(Cp){var pt=Cp[0].trace,gt=_.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(pt.visible&&pt.type==="ohlc"?[Cp,Cp]:[]);gt.enter().append("path").classed("legendohlc",!0).attr("d",function(te,Et){return Et?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",xt).style("stroke-miterlimit",1),gt.exit().remove(),gt.each(function(te,Et){var zt=_.select(this),rt=pt[Et?"increasing":"decreasing"],Z=tt(void 0,rt.line,I,j);zt.style("fill","none").call(b.dashLine,rt.line.dash,Z),Z&&w.stroke(zt,rt.line.color)})}function kt(Cp){aa(Cp,this,"pie")}function jt(Cp){aa(Cp,this,"funnelarea")}function aa(Cp,pt,gt){var te=Cp[0],Et=te.trace,zt=gt?Et.visible&&Et.type===gt:d.traceIs(Et,gt),rt=_.select(pt).select("g.legendpoints").selectAll("path.legend"+gt).data(zt?[Cp]:[]);if(rt.enter().append("path").classed("legend"+gt,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",xt),rt.exit().remove(),rt.size()){var Z=Et.marker||{},we=tt(F(Z.line.width,te.pts),Z.line,I,j),ot="pieLike",mt=m.minExtend(Et,{marker:{line:{width:we}}},ot),It=m.minExtend(te,{trace:mt},ot);p(rt,It,mt,X)}}function ca(Cp){var pt=Cp[0].trace,gt,te=[];if(pt.visible)switch(pt.type){case"histogram2d":case"heatmap":te=[["M-15,-2V4H15V-2Z"]],gt=!0;break;case"choropleth":case"choroplethmapbox":case"choroplethmap":te=[["M-6,-6V6H6V-6Z"]],gt=!0;break;case"densitymapbox":case"densitymap":te=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],gt="radial";break;case"cone":te=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],gt=!1;break;case"streamtube":te=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],gt=!1;break;case"surface":te=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],gt=!0;break;case"mesh3d":te=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],gt=!1;break;case"volume":te=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],gt=!0;break;case"isosurface":te=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],gt=!1;break}var Et=_.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(te);Et.enter().append("path").classed("legend3dandfriends",!0).attr("transform",xt).style("stroke-miterlimit",1),Et.exit().remove(),Et.each(function(zt,rt){var Z=_.select(this),we=S(pt),ot=we.colorscale,mt=we.reversescale,It=function(Hp){if(Hp.size()){var n0="legendfill-"+pt.uid;b.gradient(Hp,X,n0,G(mt,gt==="radial"),ot,"fill")}},Yt;if(ot){if(!gt){var Sr=ot.length;Yt=rt===0?ot[mt?Sr-1:0][1]:rt===1?ot[mt?0:Sr-1][1]:ot[Math.floor((Sr-1)/2)][1]}}else{var Op=pt.vertexcolor||pt.facecolor||pt.color;Yt=m.isArrayOrTypedArray(Op)?Op[rt]||Op[0]:Op}Z.attr("d",zt[0]),Yt?Z.call(w.fill,Yt):Z.call(It)})}};function G(B,X){var ee=X?"radial":"horizontal";return ee+(B?"":"reversed")}function M(B){var X=B[0].trace,ee=X.contours,yt=C.hasLines(X),Ze=C.hasMarkers(X),Re=X.visible&&X.fill&&X.fill!=="none",Q=!1,xt=!1;if(ee){var tt=ee.coloring;tt==="lines"?Q=!0:yt=tt==="none"||tt==="heatmap"||ee.showlines,ee.type==="constraint"?Re=ee._operation!=="=":(tt==="fill"||tt==="heatmap")&&(xt=!0)}return{showMarker:Ze,showLine:yt,showFill:Re,showGradientLine:Q,showGradientFill:xt,anyLine:yt||Q,anyFill:Re||xt}}function L(B,X,ee){return B&&m.isArrayOrTypedArray(B)?X:B>ee?ee:B}}),_g=r((nt,ke)=>{var _=o(),d=et(),m=cg(),E=y1(),b=nm(),w=t1(),S=Q0(),C=Mn(),p=G1(),F=ag(),A=Og(),O=K1(),$=O.LINE_SPACING,j=O.FROM_TL,z=O.FROM_BR,I=eg(),G=Ig(),M=Z1(),L=1,B=/^legend[0-9]*$/;ke.exports=function(St,Ut){if(Ut)ee(St,Ut);else{var kt=St._fullLayout,jt=kt._legends,aa=kt._infolayer.selectAll('[class^="legend"]');aa.each(function(){var gt=_.select(this),te=gt.attr("class"),Et=te.split(" ")[0];Et.match(B)&&jt.indexOf(Et)===-1&&gt.remove()});for(var ca=0;ca<jt.length;ca++){var Cp=jt[ca],pt=St._fullLayout[Cp];ee(St,pt)}}};function X(St,Ut,kt){if(!(Ut.title.side!=="top center"&&Ut.title.side!=="top right")){var jt=Ut.title.font,aa=jt.size*$,ca=0,Cp=St.node(),pt=S.bBox(Cp).width;Ut.title.side==="top center"?ca=.5*(Ut._width-2*kt-2*A.titlePad-pt):Ut.title.side==="top right"&&(ca=Ut._width-2*kt-2*A.titlePad-pt),p.positionText(St,kt+A.titlePad+ca,kt+aa)}}function ee(St,Ut){var kt=Ut||{},jt=St._fullLayout,aa=wt(kt),ca,Cp,pt=kt._inHover;if(pt?(Cp=kt.layer,ca="hover"):(Cp=jt._infolayer,ca=aa),!!Cp){ca+=jt._uid,St._legendMouseDownTime||(St._legendMouseDownTime=0);var gt;if(pt){if(!kt.entries)return;gt=I(kt.entries,kt)}else{for(var te=(St.calcdata||[]).slice(),Et=jt.shapes,zt=0;zt<Et.length;zt++){var rt=Et[zt];if(rt.showlegend){var Z={_isShape:!0,_fullInput:rt,index:rt._index,name:rt.name||rt.label.text||"shape "+rt._index,legend:rt.legend,legendgroup:rt.legendgroup,legendgrouptitle:rt.legendgrouptitle,legendrank:rt.legendrank,legendwidth:rt.legendwidth,showlegend:rt.showlegend,visible:rt.visible,opacity:rt.opacity,mode:rt.type==="line"?"lines":"markers",line:rt.line,marker:{line:rt.line,color:rt.fillcolor,size:12,symbol:rt.type==="rect"?"square":rt.type==="circle"?"circle":"hexagon2"}};te.push([{trace:Z}])}}gt=jt.showlegend&&I(te,kt,jt._legends.length>1)}var we=jt.hiddenlabels||[];if(!pt&&(!jt.showlegend||!gt.length))return Cp.selectAll("."+aa).remove(),jt._topdefs.select("#"+ca).remove(),m.autoMargin(St,aa);var ot=d.ensureSingle(Cp,"g",aa,function(w0){pt||w0.attr("pointer-events","all")}),mt=d.ensureSingleById(jt._topdefs,"clipPath",ca,function(w0){w0.append("rect")}),It=d.ensureSingle(ot,"rect","bg",function(w0){w0.attr("shape-rendering","crispEdges")});It.call(C.stroke,kt.bordercolor).call(C.fill,kt.bgcolor).style("stroke-width",kt.borderwidth+"px");var Yt=d.ensureSingle(ot,"g","scrollbox"),Sr=kt.title;kt._titleWidth=0,kt._titleHeight=0;var Op;Sr.text?(Op=d.ensureSingle(Yt,"text",aa+"titletext"),Op.attr("text-anchor","start").call(S.font,Sr.font).text(Sr.text),tt(Op,Yt,St,kt,L)):Yt.selectAll("."+aa+"titletext").remove();var Hp=d.ensureSingle(ot,"rect","scrollbar",function(w0){w0.attr(A.scrollBarEnterAttrs).call(C.fill,A.scrollBarColor)}),n0=Yt.selectAll("g.groups").data(gt);n0.enter().append("g").attr("class","groups"),n0.exit().remove();var R0=n0.selectAll("g.traces").data(d.identity);R0.enter().append("g").attr("class","traces"),R0.exit().remove(),R0.style("opacity",function(w0){var _0=w0[0].trace;return E.traceIs(_0,"pie-like")?we.indexOf(w0[0].label)!==-1?.5:1:_0.visible==="legendonly"?.5:1}).each(function(){_.select(this).call(Re,St,kt)}).call(G,St,kt).each(function(){pt||_.select(this).call(xt,St,aa)}),d.syncOrAsync([m.previousPromises,function(){return ut(St,n0,R0,kt)},function(){var w0=jt._size,_0=kt.borderwidth,ha=kt.xref==="paper",Rp=kt.yref==="paper";if(Sr.text&&X(Op,kt,_0),!pt){var Gt,Gp;ha?Gt=w0.l+w0.w*kt.x-j[_t(kt)]*kt._width:Gt=jt.width*kt.x-j[_t(kt)]*kt._width,Rp?Gp=w0.t+w0.h*(1-kt.y)-j[Le(kt)]*kt._effHeight:Gp=jt.height*(1-kt.y)-j[Le(kt)]*kt._effHeight;var c0=vt(St,aa,Gt,Gp);if(c0)return;if(jt.margin.autoexpand){var M0=Gt,I0=Gp;Gt=ha?d.constrain(Gt,0,jt.width-kt._width):M0,Gp=Rp?d.constrain(Gp,0,jt.height-kt._effHeight):I0,Gt!==M0&&d.log("Constrain "+aa+".x to make legend fit inside graph"),Gp!==I0&&d.log("Constrain "+aa+".y to make legend fit inside graph")}S.setTranslate(ot,Gt,Gp)}if(Hp.on(".drag",null),ot.on("wheel",null),pt||kt._height<=kt._maxHeight||St._context.staticPlot){var k0=kt._effHeight;pt&&(k0=kt._height),It.attr({width:kt._width-_0,height:k0-_0,x:_0/2,y:_0/2}),S.setTranslate(Yt,0,0),mt.select("rect").attr({width:kt._width-2*_0,height:k0-2*_0,x:_0,y:_0}),S.setClipUrl(Yt,ca,St),S.setRect(Hp,0,0,0,0),delete kt._scrollY}else{var V0=Math.max(A.scrollBarMinHeight,kt._effHeight*kt._effHeight/kt._height),$0=kt._effHeight-V0-2*A.scrollBarMargin,W0=kt._height-kt._effHeight,gm=$0/W0,F0=Math.min(kt._scrollY||0,W0);It.attr({width:kt._width-2*_0+A.scrollBarWidth+A.scrollBarMargin,height:kt._effHeight-_0,x:_0/2,y:_0/2}),mt.select("rect").attr({width:kt._width-2*_0+A.scrollBarWidth+A.scrollBarMargin,height:kt._effHeight-2*_0,x:_0,y:_0+F0}),S.setClipUrl(Yt,ca,St),Wt(F0,V0,gm),ot.on("wheel",function(){F0=d.constrain(kt._scrollY+_.event.deltaY/$0*W0,0,W0),Wt(F0,V0,gm),F0!==0&&F0!==W0&&_.event.preventDefault()});var bm,Dm,vm,km=function(o0,C0,T0){var A0=(T0-C0)/gm+o0;return d.constrain(A0,0,W0)},Yo=function(o0,C0,T0){var A0=(C0-T0)/gm+o0;return d.constrain(A0,0,W0)},qp=_.behavior.drag().on("dragstart",function(){var o0=_.event.sourceEvent;o0.type==="touchstart"?bm=o0.changedTouches[0].clientY:bm=o0.clientY,vm=F0}).on("drag",function(){var o0=_.event.sourceEvent;o0.buttons===2||o0.ctrlKey||(o0.type==="touchmove"?Dm=o0.changedTouches[0].clientY:Dm=o0.clientY,F0=km(vm,bm,Dm),Wt(F0,V0,gm))});Hp.call(qp);var Mt=_.behavior.drag().on("dragstart",function(){var o0=_.event.sourceEvent;o0.type==="touchstart"&&(bm=o0.changedTouches[0].clientY,vm=F0)}).on("drag",function(){var o0=_.event.sourceEvent;o0.type==="touchmove"&&(Dm=o0.changedTouches[0].clientY,F0=Yo(vm,bm,Dm),Wt(F0,V0,gm))});Yt.call(Mt)}function Wt(o0,C0,T0){kt._scrollY=St._fullLayout[aa]._scrollY=o0,S.setTranslate(Yt,0,-o0),S.setRect(Hp,kt._width,A.scrollBarMargin+o0*T0,A.scrollBarWidth,C0),mt.select("rect").attr("y",_0+o0)}if(St._context.edits.legendPosition){var xn,Fp,Bp,e0;ot.classed("cursor-move",!0),w.init({element:ot.node(),gd:St,prepFn:function(o0){if(o0.target!==Hp.node()){var C0=S.getTranslate(ot);Bp=C0.x,e0=C0.y}},moveFn:function(o0,C0){if(Bp!==void 0&&e0!==void 0){var T0=Bp+o0,A0=e0+C0;S.setTranslate(ot,T0,A0),xn=w.align(T0,kt._width,w0.l,w0.l+w0.w,kt.xanchor),Fp=w.align(A0+kt._height,-kt._height,w0.t+w0.h,w0.t,kt.yanchor)}},doneFn:function(){if(xn!==void 0&&Fp!==void 0){var o0={};o0[aa+".x"]=xn,o0[aa+".y"]=Fp,E.call("_guiRelayout",St,o0)}},clickFn:function(o0,C0){var T0=Cp.selectAll("g.traces").filter(function(){var A0=this.getBoundingClientRect();return C0.clientX>=A0.left&&C0.clientX<=A0.right&&C0.clientY>=A0.top&&C0.clientY<=A0.bottom});T0.size()>0&&Ze(St,ot,T0,o0,C0)}})}}],St)}}function yt(St,Ut,kt){var jt=St[0],aa=jt.width,ca=Ut.entrywidthmode,Cp=jt.trace.legendwidth||Ut.entrywidth;return ca==="fraction"?Ut._maxWidth*Cp:kt+(Cp||aa)}function Ze(St,Ut,kt,jt,aa){var ca=kt.data()[0][0].trace,Cp={event:aa,node:kt.node(),curveNumber:ca.index,expandedIndex:ca.index,data:St.data,layout:St.layout,frames:St._transitionData._frames,config:St._context,fullData:St._fullData,fullLayout:St._fullLayout};ca._group&&(Cp.group=ca._group),E.traceIs(ca,"pie-like")&&(Cp.label=kt.datum()[0].label);var pt=b.triggerHandler(St,"plotly_legendclick",Cp);if(jt===1){if(pt===!1)return;Ut._clickTimeout=setTimeout(function(){St._fullLayout&&F(kt,St,jt)},St._context.doubleClickDelay)}else if(jt===2){Ut._clickTimeout&&clearTimeout(Ut._clickTimeout),St._legendMouseDownTime=0;var gt=b.triggerHandler(St,"plotly_legenddoubleclick",Cp);gt!==!1&&pt!==!1&&F(kt,St,jt)}}function Re(St,Ut,kt){var jt=wt(kt),aa=St.data()[0][0],ca=aa.trace,Cp=E.traceIs(ca,"pie-like"),pt=!kt._inHover&&Ut._context.edits.legendText&&!Cp,gt=kt._maxNameLength,te,Et;aa.groupTitle?(te=aa.groupTitle.text,Et=aa.groupTitle.font):(Et=kt.font,kt.entries?te=aa.text:(te=Cp?aa.label:ca.name,ca._meta&&(te=d.templateString(te,ca._meta))));var zt=d.ensureSingle(St,"text",jt+"text");zt.attr("text-anchor","start").call(S.font,Et).text(pt?Q(te,gt):te);var rt=kt.indentation+kt.itemwidth+A.itemGap*2;p.positionText(zt,rt,0),pt?zt.call(p.makeEditable,{gd:Ut,text:te}).call(tt,St,Ut,kt).on("edit",function(Z){this.text(Q(Z,gt)).call(tt,St,Ut,kt);var we=aa.trace._fullInput||{},ot={};return ot.name=Z,we._isShape?E.call("_guiRelayout",Ut,"shapes["+ca.index+"].name",ot.name):E.call("_guiRestyle",Ut,ot,ca.index)}):tt(zt,St,Ut,kt)}function Q(St,Ut){var kt=Math.max(4,Ut);if(St&&St.trim().length>=kt/2)return St;St=St||"";for(var jt=kt-St.length;jt>0;jt--)St+=" ";return St}function xt(St,Ut,kt){var jt=Ut._context.doubleClickDelay,aa,ca=1,Cp=d.ensureSingle(St,"rect",kt+"toggle",function(pt){Ut._context.staticPlot||pt.style("cursor","pointer").attr("pointer-events","all"),pt.call(C.fill,"rgba(0,0,0,0)")});Ut._context.staticPlot||(Cp.on("mousedown",function(){aa=new Date().getTime(),aa-Ut._legendMouseDownTime<jt?ca+=1:(ca=1,Ut._legendMouseDownTime=aa)}),Cp.on("mouseup",function(){if(!(Ut._dragged||Ut._editing)){var pt=Ut._fullLayout[kt];new Date().getTime()-Ut._legendMouseDownTime>jt&&(ca=Math.max(ca-1,1)),Ze(Ut,pt,St,ca,_.event)}}))}function tt(St,Ut,kt,jt,aa){jt._inHover&&St.attr("data-notex",!0),p.convertToTspans(St,kt,function(){ht(Ut,kt,jt,aa)})}function ht(St,Ut,kt,jt){var aa=St.data()[0][0];if(!kt._inHover&&aa&&!aa.trace.showlegend){St.remove();return}var ca=St.select("g[class*=math-group]"),Cp=ca.node(),pt=wt(kt);kt||(kt=Ut._fullLayout[pt]);var gt=kt.borderwidth,te;jt===L?te=kt.title.font:aa.groupTitle?te=aa.groupTitle.font:te=kt.font;var Et=te.size*$,zt,rt;if(Cp){var Z=S.bBox(Cp);zt=Z.height,rt=Z.width,jt===L?S.setTranslate(ca,gt,gt+zt*.75):S.setTranslate(ca,0,zt*.25)}else{var we="."+pt+(jt===L?"title":"")+"text",ot=St.select(we),mt=p.lineCount(ot),It=ot.node();if(zt=Et*mt,rt=It?S.bBox(It).width:0,jt===L)kt.title.side==="left"&&(rt+=A.itemGap*2),p.positionText(ot,gt+A.titlePad,gt+Et);else{var Yt=A.itemGap*2+kt.indentation+kt.itemwidth;aa.groupTitle&&(Yt=A.itemGap,rt-=kt.indentation+kt.itemwidth),p.positionText(ot,Yt,-Et*((mt-1)/2-.3))}}jt===L?(kt._titleWidth=rt,kt._titleHeight=zt):(aa.lineHeight=Et,aa.height=Math.max(zt,16)+3,aa.width=rt)}function it(St){var Ut=0,kt=0,jt=St.title.side;return jt&&(jt.indexOf("left")!==-1&&(Ut=St._titleWidth),jt.indexOf("top")!==-1&&(kt=St._titleHeight)),[Ut,kt]}function ut(St,Ut,kt,jt){var aa=St._fullLayout,ca=wt(jt);jt||(jt=aa[ca]);var Cp=aa._size,pt=M.isVertical(jt),gt=M.isGrouped(jt),te=jt.entrywidthmode==="fraction",Et=jt.borderwidth,zt=2*Et,rt=A.itemGap,Z=jt.indentation+jt.itemwidth+rt*2,we=2*(Et+rt),ot=Le(jt),mt=jt.y<0||jt.y===0&&ot==="top",It=jt.y>1||jt.y===1&&ot==="bottom",Yt=jt.tracegroupgap,Sr={};let{orientation:Op,yref:Hp}=jt,{maxheight:n0}=jt,R0=mt||It||Op!=="v"||Hp!=="paper";n0||(n0=R0?.5:1);let w0=R0?aa.height:Cp.h;jt._maxHeight=Math.max(n0>1?n0:n0*w0,30);var _0=0;jt._width=0,jt._height=0;var ha=it(jt);if(pt)kt.each(function(Wt){var xn=Wt[0].height;S.setTranslate(this,Et+ha[0],Et+ha[1]+jt._height+xn/2+rt),jt._height+=xn,jt._width=Math.max(jt._width,Wt[0].width)}),_0=Z+jt._width,jt._width+=rt+Z+zt,jt._height+=we,gt&&(Ut.each(function(Wt,xn){S.setTranslate(this,0,xn*jt.tracegroupgap)}),jt._height+=(jt._lgroupsLength-1)*jt.tracegroupgap);else{var Rp=_t(jt),Gt=jt.x<0||jt.x===0&&Rp==="right",Gp=jt.x>1||jt.x===1&&Rp==="left",c0=It||mt,M0=aa.width/2;jt._maxWidth=Math.max(Gt?c0&&Rp==="left"?Cp.l+Cp.w:M0:Gp?c0&&Rp==="right"?Cp.r+Cp.w:M0:Cp.w,2*Z);var I0=0,k0=0;kt.each(function(Wt){var xn=yt(Wt,jt,Z);I0=Math.max(I0,xn),k0+=xn}),_0=null;var V0=0;if(gt){var $0=0,W0=0,gm=0;Ut.each(function(){var Wt=0,xn=0;_.select(this).selectAll("g.traces").each(function(Bp){var e0=yt(Bp,jt,Z),o0=Bp[0].height;S.setTranslate(this,ha[0],ha[1]+Et+rt+o0/2+xn),xn+=o0,Wt=Math.max(Wt,e0),Sr[Bp[0].trace.legendgroup]=Wt});var Fp=Wt+rt;W0>0&&Fp+Et+W0>jt._maxWidth?(V0=Math.max(V0,W0),W0=0,gm+=$0+Yt,$0=xn):$0=Math.max($0,xn),S.setTranslate(this,W0,gm),W0+=Fp}),jt._width=Math.max(V0,W0)+Et,jt._height=gm+$0+we}else{var F0=kt.size(),bm=k0+zt+(F0-1)*rt<jt._maxWidth,Dm=0,vm=0,km=0,Yo=0;kt.each(function(Wt){var xn=Wt[0].height,Fp=yt(Wt,jt,Z),Bp=bm?Fp:I0;te||(Bp+=rt),Bp+Et+vm-rt>=jt._maxWidth&&(V0=Math.max(V0,Yo),vm=0,km+=Dm,jt._height+=Dm,Dm=0),S.setTranslate(this,ha[0]+Et+vm,ha[1]+Et+km+xn/2+rt),Yo=vm+Fp+rt,vm+=Bp,Dm=Math.max(Dm,xn)}),bm?(jt._width=vm+zt,jt._height=Dm+we):(jt._width=Math.max(V0,Yo)+zt,jt._height+=Dm+we)}}jt._width=Math.ceil(Math.max(jt._width+ha[0],jt._titleWidth+2*(Et+A.titlePad))),jt._height=Math.ceil(Math.max(jt._height+ha[1],jt._titleHeight+2*(Et+A.itemGap))),jt._effHeight=Math.min(jt._height,jt._maxHeight);var qp=St._context.edits,Mt=qp.legendText||qp.legendPosition;kt.each(function(Wt){var xn=_.select(this).select("."+ca+"toggle"),Fp=Wt[0].height,Bp=Wt[0].trace.legendgroup,e0=yt(Wt,jt,Z);gt&&Bp!==""&&(e0=Sr[Bp]);var o0=Mt?Z:_0||e0;!pt&&!te&&(o0+=rt/2),S.setRect(xn,0,-Fp/2,o0,Fp)})}function vt(St,Ut,kt,jt){var aa=St._fullLayout,ca=aa[Ut],Cp=_t(ca),pt=Le(ca),gt=ca.xref==="paper",te=ca.yref==="paper";St._fullLayout._reservedMargin[Ut]={};var Et=ca.y<.5?"b":"t",zt=ca.x<.5?"l":"r",rt={r:aa.width-kt,l:kt+ca._width,b:aa.height-jt,t:jt+ca._effHeight};if(gt&&te)return m.autoMargin(St,Ut,{x:ca.x,y:ca.y,l:ca._width*j[Cp],r:ca._width*z[Cp],b:ca._effHeight*z[pt],t:ca._effHeight*j[pt]});gt?St._fullLayout._reservedMargin[Ut][Et]=rt[Et]:te||ca.orientation==="v"?St._fullLayout._reservedMargin[Ut][zt]=rt[zt]:St._fullLayout._reservedMargin[Ut][Et]=rt[Et]}function _t(St){return d.isRightAnchor(St)?"right":d.isCenterAnchor(St)?"center":"left"}function Le(St){return d.isBottomAnchor(St)?"bottom":d.isMiddleAnchor(St)?"middle":"top"}function wt(St){return St._id||"legend"}}),Hg=r(nt=>{var ke=o(),_=v(),d=ie(),m=et(),E=m.pushUnique,b=m.strTranslate,w=m.strRotate,S=nm(),C=G1(),p=d1(),F=Q0(),A=Mn(),O=t1(),$=Im(),j=Vm().zindexSeparator,z=y1(),I=D0(),G=ae(),M=x1(),L=_g(),B=G.YANGLE,X=Math.PI*B/180,ee=1/Math.sin(X),yt=Math.cos(X),Ze=Math.sin(X),Re=G.HOVERARROWSIZE,Q=G.HOVERTEXTPAD,xt={box:!0,ohlc:!0,violin:!0,candlestick:!0},tt={scatter:!0,scattergl:!0,splom:!0};function ht(Z,we){return Z.distance-we.distance}nt.hover=function(Z,we,ot,mt){Z=m.getGraphDiv(Z);var It=we.target;m.throttle(Z._fullLayout._uid+G.HOVERID,G.HOVERMINTIME,function(){it(Z,we,ot,mt,It)})},nt.loneHover=function(Z,we){var ot=!0;Array.isArray(Z)||(ot=!1,Z=[Z]);var mt=we.gd,It=Et(mt),Yt=zt(mt),Sr=Z.map(function(Gt){var Gp=Gt._x0||Gt.x0||Gt.x||0,c0=Gt._x1||Gt.x1||Gt.x||0,M0=Gt._y0||Gt.y0||Gt.y||0,I0=Gt._y1||Gt.y1||Gt.y||0,k0=Gt.eventData;if(k0){var V0=Math.min(Gp,c0),$0=Math.max(Gp,c0),W0=Math.min(M0,I0),gm=Math.max(M0,I0),F0=Gt.trace;if(z.traceIs(F0,"gl3d")){var bm=mt._fullLayout[F0.scene]._scene.container,Dm=bm.offsetLeft,vm=bm.offsetTop;V0+=Dm,$0+=Dm,W0+=vm,gm+=vm}k0.bbox={x0:V0+Yt,x1:$0+Yt,y0:W0+It,y1:gm+It},we.inOut_bbox&&we.inOut_bbox.push(k0.bbox)}else k0=!1;return{color:Gt.color||A.defaultLine,x0:Gt.x0||Gt.x||0,x1:Gt.x1||Gt.x||0,y0:Gt.y0||Gt.y||0,y1:Gt.y1||Gt.y||0,xLabel:Gt.xLabel,yLabel:Gt.yLabel,zLabel:Gt.zLabel,text:Gt.text,name:Gt.name,idealAlign:Gt.idealAlign,borderColor:Gt.borderColor,fontFamily:Gt.fontFamily,fontSize:Gt.fontSize,fontColor:Gt.fontColor,fontWeight:Gt.fontWeight,fontStyle:Gt.fontStyle,fontVariant:Gt.fontVariant,nameLength:Gt.nameLength,textAlign:Gt.textAlign,trace:Gt.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:Gt.hovertemplate||!1,hovertemplateLabels:Gt.hovertemplateLabels||!1,eventData:k0}}),Op=!1,Hp=_t(Sr,{gd:mt,hovermode:"closest",rotateLabels:Op,bgColor:we.bgColor||A.background,container:ke.select(we.container),outerContainer:we.outerContainer||we.container}),n0=Hp.hoverLabels,R0=5,w0=0,_0=0;n0.sort(function(Gt,Gp){return Gt.y0-Gp.y0}).each(function(Gt,Gp){var c0=Gt.y0-Gt.by/2;c0-R0<w0?Gt.offset=w0-c0+R0:Gt.offset=0,w0=c0+Gt.by+Gt.offset,Gp===we.anchorIndex&&(_0=Gt.offset)}).each(function(Gt){Gt.offset-=_0});var ha=mt._fullLayout._invScaleX,Rp=mt._fullLayout._invScaleY;return kt(n0,Op,ha,Rp),ot?n0:n0.node()};function it(Z,we,ot,mt,It){ot||(ot="xy"),typeof ot=="string"&&(ot=ot.split(j)[0]);var Yt=Array.isArray(ot)?ot:[ot],Sr,Op=Z._fullLayout,Hp=Op.hoversubplots,n0=Op._plots||[],R0=n0[ot],w0=Op._has("cartesian"),_0=we.hovermode||Op.hovermode,ha=(_0||"").charAt(0)==="x",Rp=(_0||"").charAt(0)==="y",Gt,Gp;if(w0&&(ha||Rp)&&Hp==="axis"){for(var c0=Yt.length,M0=0;M0<c0;M0++)if(Sr=Yt[M0],n0[Sr]){Gt=$.getFromId(Z,Sr,"x"),Gp=$.getFromId(Z,Sr,"y");var I0=(ha?Gt:Gp)._subplotsWith;if(I0&&I0.length)for(var k0=0;k0<I0.length;k0++)E(Yt,I0[k0])}}if(R0&&Hp!=="single"){var V0=R0.overlays.map(function(vg){return vg.id});Yt=Yt.concat(V0)}for(var $0=Yt.length,W0=new Array($0),gm=new Array($0),F0=!1,bm=0;bm<$0;bm++)if(Sr=Yt[bm],n0[Sr])F0=!0,W0[bm]=n0[Sr].xaxis,gm[bm]=n0[Sr].yaxis;else if(Op[Sr]&&Op[Sr]._subplot){var Dm=Op[Sr]._subplot;W0[bm]=Dm.xaxis,gm[bm]=Dm.yaxis}else{m.warn("Unrecognized subplot: "+Sr);return}if(_0&&!F0&&(_0="closest"),["x","y","closest","x unified","y unified"].indexOf(_0)===-1||!Z.calcdata||Z.querySelector(".zoombox")||Z._dragging)return O.unhoverRaw(Z,we);var vm=Op.hoverdistance;vm===-1&&(vm=1/0);var km=Op.spikedistance;km===-1&&(km=1/0);var Yo=[],qp=[],Mt,Wt,xn,Fp,Bp,e0,o0,C0,T0,A0,J0,em,tm,Nm={hLinePoint:null,vLinePoint:null},o1=!1;if(Array.isArray(we))for(_0="array",xn=0;xn<we.length;xn++)Bp=Z.calcdata[we[xn].curveNumber||0],Bp&&(e0=Bp[0].trace,Bp[0].trace.hoverinfo!=="skip"&&(qp.push(Bp),e0.orientation==="h"&&(o1=!0)));else{var N1=Z.calcdata.slice();for(N1.sort(function(vg,Fv){var wv=vg[0].trace.zorder||0,Lg=Fv[0].trace.zorder||0;return wv-Lg}),Fp=0;Fp<N1.length;Fp++)Bp=N1[Fp],e0=Bp[0].trace,e0.hoverinfo!=="skip"&&I.isTraceInSubplots(e0,Yt)&&(qp.push(Bp),e0.orientation==="h"&&(o1=!0));var F1=!It,B1,u1;if(F1)"xpx"in we?B1=we.xpx:B1=W0[0]._length/2,"ypx"in we?u1=we.ypx:u1=gm[0]._length/2;else{if(S.triggerHandler(Z,"plotly_beforehover",we)===!1)return;var zm=It.getBoundingClientRect();B1=we.clientX-zm.left,u1=we.clientY-zm.top,Op._calcInverseTransform(Z);var R1=m.apply3DTransform(Op._invTransform)(B1,u1);if(B1=R1[0],u1=R1[1],B1<0||B1>W0[0]._length||u1<0||u1>gm[0]._length)return O.unhoverRaw(Z,we)}if(we.pointerX=B1+W0[0]._offset,we.pointerY=u1+gm[0]._offset,"xval"in we?Mt=I.flat(Yt,we.xval):Mt=I.p2c(W0,B1),"yval"in we?Wt=I.flat(Yt,we.yval):Wt=I.p2c(gm,u1),!_(Mt[0])||!_(Wt[0]))return m.warn("Fx.hover failed",we,Z),O.unhoverRaw(Z,we)}var z1=1/0;function E1(vg,Fv){for(Fp=0;Fp<qp.length;Fp++)if(Bp=qp[Fp],!(!Bp||!Bp[0]||!Bp[0].trace)&&(e0=Bp[0].trace,!(e0.visible!==!0||e0._length===0)&&["carpet","contourcarpet"].indexOf(e0._module.name)===-1)){if(T0=_0,I.isUnifiedHover(T0)&&(T0=T0.charAt(0)),e0.type==="splom"?(C0=0,o0=Yt[C0]):(o0=I.getSubplot(e0),C0=Yt.indexOf(o0)),em={cd:Bp,trace:e0,xa:W0[C0],ya:gm[C0],maxHoverDistance:vm,maxSpikeDistance:km,index:!1,distance:Math.min(z1,vm),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:A.defaultLine,name:e0.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},Op[o0]&&(em.subplot=Op[o0]._subplot),Op._splomScenes&&Op._splomScenes[e0.uid]&&(em.scene=Op._splomScenes[e0.uid]),T0==="array"){var wv=we[Fp];"pointNumber"in wv?(em.index=wv.pointNumber,T0="closest"):(T0="","xval"in wv&&(A0=wv.xval,T0="x"),"yval"in wv&&(J0=wv.yval,T0=T0?"closest":"y"))}else vg!==void 0&&Fv!==void 0?(A0=vg,J0=Fv):(A0=Mt[C0],J0=Wt[C0]);if(tm=Yo.length,vm!==0)if(e0._module&&e0._module.hoverPoints){var Lg=e0._module.hoverPoints(em,A0,J0,T0,{finiteRange:!0,hoverLayer:Op._hoverlayer,hoversubplots:Hp,gd:Z});if(Lg)for(var xv,ev=0;ev<Lg.length;ev++)xv=Lg[ev],_(xv.x0)&&_(xv.y0)&&Yo.push(jt(xv,_0))}else m.log("Unrecognized trace type in hover:",e0);if(_0==="closest"&&Yo.length>tm&&(Yo.splice(0,tm),z1=Yo[0].distance),w0&&km!==0&&Yo.length===0){em.distance=km,em.index=!1;var sv=e0._module.hoverPoints(em,A0,J0,"closest",{hoverLayer:Op._hoverlayer});if(sv&&(sv=sv.filter(function(rv){return rv.spikeDistance<=km})),sv&&sv.length){var ry,zv=sv.filter(function(rv){return rv.xa.showspikes&&rv.xa.spikesnap!=="hovered data"});if(zv.length){var Vg=zv[0];_(Vg.x0)&&_(Vg.y0)&&(ry=w1(Vg),(!Nm.vLinePoint||Nm.vLinePoint.spikeDistance>ry.spikeDistance)&&(Nm.vLinePoint=ry))}var tv=sv.filter(function(rv){return rv.ya.showspikes&&rv.ya.spikesnap!=="hovered data"});if(tv.length){var Wg=tv[0];_(Wg.x0)&&_(Wg.y0)&&(ry=w1(Wg),(!Nm.hLinePoint||Nm.hLinePoint.spikeDistance>ry.spikeDistance)&&(Nm.hLinePoint=ry))}}}}}E1();function g1(vg,Fv,wv){for(var Lg=null,xv=1/0,ev,sv=0;sv<vg.length;sv++)Gt&&Gt._id!==vg[sv].xa._id||Gp&&Gp._id!==vg[sv].ya._id||(ev=vg[sv].spikeDistance,wv&&sv===0&&(ev=-1/0),ev<=xv&&ev<=Fv&&(Lg=vg[sv],xv=ev));return Lg}function w1(vg){return vg?{xa:vg.xa,ya:vg.ya,x:vg.xSpike!==void 0?vg.xSpike:(vg.x0+vg.x1)/2,y:vg.ySpike!==void 0?vg.ySpike:(vg.y0+vg.y1)/2,distance:vg.distance,spikeDistance:vg.spikeDistance,curveNumber:vg.trace.index,color:vg.color,pointNumber:vg.index}:null}var s1={fullLayout:Op,container:Op._hoverlayer,event:we};Z._spikepoints;var Q1={vLinePoint:Nm.vLinePoint,hLinePoint:Nm.hLinePoint};Z._spikepoints=Q1;var og=function(){var vg=Yo.filter(function(wv){return Gt&&Gt._id===wv.xa._id&&Gp&&Gp._id===wv.ya._id}),Fv=Yo.filter(function(wv){return!(Gt&&Gt._id===wv.xa._id&&Gp&&Gp._id===wv.ya._id)});vg.sort(ht),Fv.sort(ht),Yo=vg.concat(Fv),Yo=gt(Yo,_0)};og();var P1=_0.charAt(0),fg=(P1==="x"||P1==="y")&&Yo[0]&&tt[Yo[0].trace.type];if(w0&&km!==0&&Yo.length!==0){var bg=Yo.filter(function(vg){return vg.ya.showspikes}),Cg=g1(bg,km,fg);Nm.hLinePoint=w1(Cg);var Ug=Yo.filter(function(vg){return vg.xa.showspikes}),rg=g1(Ug,km,fg);Nm.vLinePoint=w1(rg)}if(Yo.length===0){var Ng=O.unhoverRaw(Z,we);return w0&&(Nm.hLinePoint!==null||Nm.vLinePoint!==null)&&Cp()&&aa(Z,Nm,s1),Ng}if(w0&&Cp()&&aa(Z,Nm,s1),I.isXYhover(T0)&&Yo[0].length!==0&&Yo[0].trace.type!=="splom"){var dg=Yo[0];xt[dg.trace.type]?Yo=Yo.filter(function(vg){return vg.trace.index===dg.trace.index}):Yo=[dg];var $m=Yo.length,Xg=te("x",dg,Op),Lt=te("y",dg,Op);E1(Xg,Lt);var At=[],Wp={},Qp=0,g0=function(vg){var Fv=xt[vg.trace.type]?ut(vg):vg.trace.index;if(!Wp[Fv])Qp++,Wp[Fv]=Qp,At.push(vg);else{var wv=Wp[Fv]-1,Lg=At[wv];wv>0&&Math.abs(vg.distance)<Math.abs(Lg.distance)&&(At[wv]=vg)}},$p;for($p=0;$p<$m;$p++)g0(Yo[$p]);for($p=Yo.length-1;$p>$m-1;$p--)g0(Yo[$p]);Yo=At,og()}var Xp=Z._hoverdata,b0=[],s0=Et(Z),O0=zt(Z);for(xn=0;xn<Yo.length;xn++){var U0=Yo[xn],mm=I.makeEventData(U0,U0.trace,U0.cd);if(U0.hovertemplate!==!1){var Jm=!1;U0.cd[U0.index]&&U0.cd[U0.index].ht&&(Jm=U0.cd[U0.index].ht),U0.hovertemplate=Jm||U0.trace.hovertemplate||!1}if(U0.xa&&U0.ya){var qm=U0.x0+U0.xa._offset,b1=U0.x1+U0.xa._offset,jm=U0.y0+U0.ya._offset,e1=U0.y1+U0.ya._offset,k1=Math.min(qm,b1),Pg=Math.max(qm,b1),H1=Math.min(jm,e1),ov=Math.max(jm,e1);mm.bbox={x0:k1+O0,x1:Pg+O0,y0:H1+s0,y1:ov+s0}}U0.eventData=[mm],b0.push(mm)}Z._hoverdata=b0;var mg=_0==="y"&&(qp.length>1||Yo.length>1)||_0==="closest"&&o1&&Yo.length>1,cv=A.combine(Op.plot_bgcolor||A.background,Op.paper_bgcolor),Eg=_t(Yo,{gd:Z,hovermode:_0,rotateLabels:mg,bgColor:cv,container:Op._hoverlayer,outerContainer:Op._paper.node(),commonLabelOpts:Op.hoverlabel,hoverdistance:Op.hoverdistance}),Qg=Eg.hoverLabels;if(I.isUnifiedHover(_0)||(wt(Qg,mg,Op,Eg.commonLabelBoundingBox),kt(Qg,mg,Op._invScaleX,Op._invScaleY)),It&&It.tagName){var lv=z.getComponentMethod("annotations","hasClickToShow")(Z,b0);p(ke.select(It),lv?"pointer":"")}!It||mt||!ca(Z,we,Xp)||(Xp&&Z.emit("plotly_unhover",{event:we,points:Xp}),Z.emit("plotly_hover",{event:we,points:Z._hoverdata,xaxes:W0,yaxes:gm,xvals:Mt,yvals:Wt}))}function ut(Z){return[Z.trace.index,Z.index,Z.x0,Z.y0,Z.name,Z.attr,Z.xa?Z.xa._id:"",Z.ya?Z.ya._id:""].join(",")}var vt=/<extra>([\s\S]*)<\/extra>/;function _t(Z,we){var ot=we.gd,mt=ot._fullLayout,It=we.hovermode,Yt=we.rotateLabels,Sr=we.bgColor,Op=we.container,Hp=we.outerContainer,n0=we.commonLabelOpts||{};if(Z.length===0)return[[]];var R0=we.fontFamily||G.HOVERFONT,w0=we.fontSize||G.HOVERFONTSIZE,_0=we.fontWeight||mt.font.weight,ha=we.fontStyle||mt.font.style,Rp=we.fontVariant||mt.font.variant,Gt=we.fontTextcase||mt.font.textcase,Gp=we.fontLineposition||mt.font.lineposition,c0=we.fontShadow||mt.font.shadow,M0=Z[0],I0=M0.xa,k0=M0.ya,V0=It.charAt(0),$0=V0+"Label",W0=M0[$0];if(W0===void 0&&I0.type==="multicategory")for(var gm=0;gm<Z.length&&(W0=Z[gm][$0],W0===void 0);gm++);var F0=rt(ot,Hp),bm=F0.top,Dm=F0.width,vm=F0.height,km=W0!==void 0&&M0.distance<=we.hoverdistance&&(It==="x"||It==="y");if(km){var Yo=!0,qp,Mt;for(qp=0;qp<Z.length;qp++)if(Yo&&Z[qp].zLabel===void 0&&(Yo=!1),Mt=Z[qp].hoverinfo||Z[qp].trace.hoverinfo,Mt){var Wt=Array.isArray(Mt)?Mt:Mt.split("+");if(Wt.indexOf("all")===-1&&Wt.indexOf(It)===-1){km=!1;break}}Yo&&(km=!1)}var xn=Op.selectAll("g.axistext").data(km?[0]:[]);xn.enter().append("g").classed("axistext",!0),xn.exit().remove();var Fp={minX:0,maxX:0,minY:0,maxY:0};if(xn.each(function(){var $m=ke.select(this),Xg=m.ensureSingle($m,"path","",function(mg){mg.style({"stroke-width":"1px"})}),Lt=m.ensureSingle($m,"text","",function(mg){mg.attr("data-notex",1)}),At=n0.bgcolor||A.defaultLine,Wp=n0.bordercolor||A.contrast(At),Qp=A.contrast(At),g0=n0.font,$p={weight:g0.weight||_0,style:g0.style||ha,variant:g0.variant||Rp,textcase:g0.textcase||Gt,lineposition:g0.lineposition||Gp,shadow:g0.shadow||c0,family:g0.family||R0,size:g0.size||w0,color:g0.color||Qp};Xg.style({fill:At,stroke:Wp}),Lt.text(W0).call(F.font,$p).call(C.positionText,0,0).call(C.convertToTspans,ot),$m.attr("transform","");var Xp=rt(ot,Lt.node()),b0,s0;if(It==="x"){var O0=I0.side==="top"?"-":"";Lt.attr("text-anchor","middle").call(C.positionText,0,I0.side==="top"?bm-Xp.bottom-Re-Q:bm-Xp.top+Re+Q),b0=I0._offset+(M0.x0+M0.x1)/2,s0=k0._offset+(I0.side==="top"?0:k0._length);var U0=Xp.width/2+Q,mm=b0;b0<U0?mm=U0:b0>mt.width-U0&&(mm=mt.width-U0),Xg.attr("d","M"+(b0-mm)+",0L"+(b0-mm+Re)+","+O0+Re+"H"+U0+"v"+O0+(Q*2+Xp.height)+"H"+-U0+"V"+O0+Re+"H"+(b0-mm-Re)+"Z"),b0=mm,Fp.minX=b0-U0,Fp.maxX=b0+U0,I0.side==="top"?(Fp.minY=s0-(Q*2+Xp.height),Fp.maxY=s0-Q):(Fp.minY=s0+Q,Fp.maxY=s0+(Q*2+Xp.height))}else{var Jm,qm,b1;k0.side==="right"?(Jm="start",qm=1,b1="",b0=I0._offset+I0._length):(Jm="end",qm=-1,b1="-",b0=I0._offset),s0=k0._offset+(M0.y0+M0.y1)/2,Lt.attr("text-anchor",Jm),Xg.attr("d","M0,0L"+b1+Re+","+Re+"V"+(Q+Xp.height/2)+"h"+b1+(Q*2+Xp.width)+"V-"+(Q+Xp.height/2)+"H"+b1+Re+"V-"+Re+"Z"),Fp.minY=s0-(Q+Xp.height/2),Fp.maxY=s0+(Q+Xp.height/2),k0.side==="right"?(Fp.minX=b0+Re,Fp.maxX=b0+Re+(Q*2+Xp.width)):(Fp.minX=b0-Re-(Q*2+Xp.width),Fp.maxX=b0-Re);var jm=Xp.height/2,e1=bm-Xp.top-jm,k1="clip"+mt._uid+"commonlabel"+k0._id,Pg;if(b0<Xp.width+2*Q+Re){Pg="M-"+(Re+Q)+"-"+jm+"h-"+(Xp.width-Q)+"V"+jm+"h"+(Xp.width-Q)+"Z";var H1=Xp.width-b0+Q;C.positionText(Lt,H1,e1),Jm==="end"&&Lt.selectAll("tspan").each(function(){var mg=ke.select(this),cv=F.tester.append("text").text(mg.text()).call(F.font,$p),Eg=rt(ot,cv.node());Math.round(Eg.width)<Math.round(Xp.width)&&mg.attr("x",H1-Eg.width),cv.remove()})}else C.positionText(Lt,qm*(Q+Re),e1),Pg=null;var ov=mt._topclips.selectAll("#"+k1).data(Pg?[0]:[]);ov.enter().append("clipPath").attr("id",k1).append("path"),ov.exit().remove(),ov.select("path").attr("d",Pg),F.setClipUrl(Lt,Pg?k1:null,ot)}$m.attr("transform",b(b0,s0))}),I.isUnifiedHover(It)){Op.selectAll("g.hovertext").remove();var Bp=Z.filter(function($m){return $m.hoverinfo!=="none"});if(Bp.length===0)return[];var e0=mt.hoverlabel,o0=e0.font,C0=Bp[0],T0=((It==="x unified"?C0.xa:C0.ya).unifiedhovertitle||{}).text,A0=T0?m.hovertemplateString(T0,{},mt._d3locale,It==="x unified"?{xa:C0.xa,x:C0.xVal}:{ya:C0.ya,y:C0.yVal}):W0,J0={showlegend:!0,legend:{title:{text:A0,font:o0},font:o0,bgcolor:e0.bgcolor,bordercolor:e0.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:mt.legend?mt.legend.traceorder:void 0,orientation:"v"}},em={font:o0};M(J0,em,ot._fullData);var tm=em.legend;tm.entries=[];for(var Nm=0;Nm<Bp.length;Nm++){var o1=Bp[Nm];if(o1.hoverinfo!=="none"){var N1=Le(o1,!0,It,mt,W0),F1=N1[0],B1=N1[1];o1.name=B1,B1!==""?o1.text=B1+" : "+F1:o1.text=F1;var u1=o1.cd[o1.index];u1&&(u1.mc&&(o1.mc=u1.mc),u1.mcc&&(o1.mc=u1.mcc),u1.mlc&&(o1.mlc=u1.mlc),u1.mlcc&&(o1.mlc=u1.mlcc),u1.mlw&&(o1.mlw=u1.mlw),u1.mrc&&(o1.mrc=u1.mrc),u1.dir&&(o1.dir=u1.dir)),o1._distinct=!0,tm.entries.push([o1])}}tm.entries.sort(function($m,Xg){return $m[0].trace.index-Xg[0].trace.index}),tm.layer=Op,tm._inHover=!0,tm._groupTitleFont=e0.grouptitlefont,L(ot,tm);var zm=Op.select("g.legend"),R1=rt(ot,zm.node()),z1=R1.width+2*Q,E1=R1.height+2*Q,g1=Bp[0],w1=(g1.x0+g1.x1)/2,s1=(g1.y0+g1.y1)/2,Q1=!(z.traceIs(g1.trace,"bar-like")||z.traceIs(g1.trace,"box-violin")),og,P1;V0==="y"?Q1?(P1=s1-Q,og=s1+Q):(P1=Math.min.apply(null,Bp.map(function($m){return Math.min($m.y0,$m.y1)})),og=Math.max.apply(null,Bp.map(function($m){return Math.max($m.y0,$m.y1)}))):P1=og=m.mean(Bp.map(function($m){return($m.y0+$m.y1)/2}))-E1/2;var fg,bg;V0==="x"?Q1?(fg=w1+Q,bg=w1-Q):(fg=Math.max.apply(null,Bp.map(function($m){return Math.max($m.x0,$m.x1)})),bg=Math.min.apply(null,Bp.map(function($m){return Math.min($m.x0,$m.x1)}))):fg=bg=m.mean(Bp.map(function($m){return($m.x0+$m.x1)/2}))-z1/2;var Cg=I0._offset,Ug=k0._offset;og+=Ug,fg+=Cg,bg+=Cg-z1,P1+=Ug-E1;var rg,Ng;return fg+z1<Dm&&fg>=0?rg=fg:bg+z1<Dm&&bg>=0?rg=bg:Cg+z1<Dm?rg=Cg:fg-w1<w1-bg+z1?rg=Dm-z1:rg=0,rg+=Q,og+E1<vm&&og>=0?Ng=og:P1+E1<vm&&P1>=0?Ng=P1:Ug+E1<vm?Ng=Ug:og-s1<s1-P1+E1?Ng=vm-E1:Ng=0,Ng+=Q,zm.attr("transform",b(rg-1,Ng-1)),zm}var dg=Op.selectAll("g.hovertext").data(Z,function($m){return ut($m)});return dg.enter().append("g").classed("hovertext",!0).each(function(){var $m=ke.select(this);$m.append("rect").call(A.fill,A.addOpacity(Sr,.8)),$m.append("text").classed("name",!0),$m.append("path").style("stroke-width","1px"),$m.append("text").classed("nums",!0).call(F.font,{weight:_0,style:ha,variant:Rp,textcase:Gt,lineposition:Gp,shadow:c0,family:R0,size:w0})}),dg.exit().remove(),dg.each(function($m){var Xg=ke.select(this).attr("transform",""),Lt=$m.color;Array.isArray(Lt)&&(Lt=Lt[$m.eventData[0].pointNumber]);var At=$m.bgcolor||Lt,Wp=A.combine(A.opacity(At)?At:A.defaultLine,Sr),Qp=A.combine(A.opacity(Lt)?Lt:A.defaultLine,Sr),g0=$m.borderColor||A.contrast(Wp),$p=Le($m,km,It,mt,W0,Xg),Xp=$p[0],b0=$p[1],s0=Xg.select("text.nums").call(F.font,{family:$m.fontFamily||R0,size:$m.fontSize||w0,color:$m.fontColor||g0,weight:$m.fontWeight||_0,style:$m.fontStyle||ha,variant:$m.fontVariant||Rp,textcase:$m.fontTextcase||Gt,lineposition:$m.fontLineposition||Gp,shadow:$m.fontShadow||c0}).text(Xp).attr("data-notex",1).call(C.positionText,0,0).call(C.convertToTspans,ot),O0=Xg.select("text.name"),U0=0,mm=0;if(b0&&b0!==Xp){O0.call(F.font,{family:$m.fontFamily||R0,size:$m.fontSize||w0,color:Qp,weight:$m.fontWeight||_0,style:$m.fontStyle||ha,variant:$m.fontVariant||Rp,textcase:$m.fontTextcase||Gt,lineposition:$m.fontLineposition||Gp,shadow:$m.fontShadow||c0}).text(b0).attr("data-notex",1).call(C.positionText,0,0).call(C.convertToTspans,ot);var Jm=rt(ot,O0.node());U0=Jm.width+2*Q,mm=Jm.height+2*Q}else O0.remove(),Xg.select("rect").remove();Xg.select("path").style({fill:Wp,stroke:g0});var qm=$m.xa._offset+($m.x0+$m.x1)/2,b1=$m.ya._offset+($m.y0+$m.y1)/2,jm=Math.abs($m.x1-$m.x0),e1=Math.abs($m.y1-$m.y0),k1=rt(ot,s0.node()),Pg=k1.width/mt._invScaleX,H1=k1.height/mt._invScaleY;$m.ty0=(bm-k1.top)/mt._invScaleY,$m.bx=Pg+2*Q,$m.by=Math.max(H1+2*Q,mm),$m.anchor="start",$m.txwidth=Pg,$m.tx2width=U0,$m.offset=0;var ov=(Pg+Re+Q+U0)*mt._invScaleX,mg,cv;if(Yt)$m.pos=qm,mg=b1+e1/2+ov<=vm,cv=b1-e1/2-ov>=0,($m.idealAlign==="top"||!mg)&&cv?(b1-=e1/2,$m.anchor="end"):mg?(b1+=e1/2,$m.anchor="start"):$m.anchor="middle",$m.crossPos=b1;else{if($m.pos=b1,mg=qm+jm/2+ov<=Dm,cv=qm-jm/2-ov>=0,($m.idealAlign==="left"||!mg)&&cv)qm-=jm/2,$m.anchor="end";else if(mg)qm+=jm/2,$m.anchor="start";else{$m.anchor="middle";var Eg=ov/2,Qg=qm+Eg-Dm,lv=qm-Eg;Qg>0&&(qm-=Qg),lv<0&&(qm+=-lv)}$m.crossPos=qm}s0.attr("text-anchor",$m.anchor),U0&&O0.attr("text-anchor",$m.anchor),Xg.attr("transform",b(qm,b1)+(Yt?w(B):""))}),{hoverLabels:dg,commonLabelBoundingBox:Fp}}function Le(Z,we,ot,mt,It,Yt){var Sr="",Op="";Z.nameOverride!==void 0&&(Z.name=Z.nameOverride),Z.name&&(Z.trace._meta&&(Z.name=m.templateString(Z.name,Z.trace._meta)),Sr=pt(Z.name,Z.nameLength));var Hp=ot.charAt(0),n0=Hp==="x"?"y":"x";Z.zLabel!==void 0?(Z.xLabel!==void 0&&(Op+="x: "+Z.xLabel+"<br>"),Z.yLabel!==void 0&&(Op+="y: "+Z.yLabel+"<br>"),Z.trace.type!=="choropleth"&&Z.trace.type!=="choroplethmapbox"&&Z.trace.type!=="choroplethmap"&&(Op+=(Op?"z: ":"")+Z.zLabel)):we&&Z[Hp+"Label"]===It?Op=Z[n0+"Label"]||"":Z.xLabel===void 0?Z.yLabel!==void 0&&Z.trace.type!=="scattercarpet"&&(Op=Z.yLabel):Z.yLabel===void 0?Op=Z.xLabel:Op="("+Z.xLabel+", "+Z.yLabel+")",(Z.text||Z.text===0)&&!Array.isArray(Z.text)&&(Op+=(Op?"<br>":"")+Z.text),Z.extraText!==void 0&&(Op+=(Op?"<br>":"")+Z.extraText),Yt&&Op===""&&!Z.hovertemplate&&(Sr===""&&Yt.remove(),Op=Sr);var R0=Z.hovertemplate||!1;if(R0){var w0=Z.hovertemplateLabels||Z;Z[Hp+"Label"]!==It&&(w0[Hp+"other"]=w0[Hp+"Val"],w0[Hp+"otherLabel"]=w0[Hp+"Label"]),Op=m.hovertemplateString(R0,w0,mt._d3locale,Z.eventData[0]||{},Z.trace._meta),Op=Op.replace(vt,function(_0,ha){return Sr=pt(ha,Z.nameLength),""})}return[Op,Sr]}function wt(Z,we,ot,mt){var It=we?"xa":"ya",Yt=we?"ya":"xa",Sr=0,Op=1,Hp=Z.size(),n0=new Array(Hp),R0=0,w0=mt.minX,_0=mt.maxX,ha=mt.minY,Rp=mt.maxY,Gt=function(Mt){return Mt*ot._invScaleX},Gp=function(Mt){return Mt*ot._invScaleY};Z.each(function(Mt){var Wt=Mt[It],xn=Mt[Yt],Fp=Wt._id.charAt(0)==="x",Bp=Wt.range;R0===0&&Bp&&Bp[0]>Bp[1]!==Fp&&(Op=-1);var e0=0,o0=Fp?ot.width:ot.height;if(ot.hovermode==="x"||ot.hovermode==="y"){var C0=St(Mt,we),T0=Mt.anchor,A0=T0==="end"?-1:1,J0,em;if(T0==="middle")J0=Mt.crossPos+(Fp?Gp(C0.y-Mt.by/2):Gt(Mt.bx/2+Mt.tx2width/2)),em=J0+(Fp?Gp(Mt.by):Gt(Mt.bx));else if(Fp)J0=Mt.crossPos+Gp(Re+C0.y)-Gp(Mt.by/2-Re),em=J0+Gp(Mt.by);else{var tm=Gt(A0*Re+C0.x),Nm=tm+Gt(A0*Mt.bx);J0=Mt.crossPos+Math.min(tm,Nm),em=Mt.crossPos+Math.max(tm,Nm)}Fp?ha!==void 0&&Rp!==void 0&&Math.min(em,Rp)-Math.max(J0,ha)>1&&(xn.side==="left"?(e0=xn._mainLinePosition,o0=ot.width):o0=xn._mainLinePosition):w0!==void 0&&_0!==void 0&&Math.min(em,_0)-Math.max(J0,w0)>1&&(xn.side==="top"?(e0=xn._mainLinePosition,o0=ot.height):o0=xn._mainLinePosition)}n0[R0++]=[{datum:Mt,traceIndex:Mt.trace.index,dp:0,pos:Mt.pos,posref:Mt.posref,size:Mt.by*(Fp?ee:1)/2,pmin:e0,pmax:o0}]}),n0.sort(function(Mt,Wt){return Mt[0].posref-Wt[0].posref||Op*(Wt[0].traceIndex-Mt[0].traceIndex)});var c0,M0,I0,k0,V0,$0,W0;function gm(Mt){var Wt=Mt[0],xn=Mt[Mt.length-1];if(M0=Wt.pmin-Wt.pos-Wt.dp+Wt.size,I0=xn.pos+xn.dp+xn.size-Wt.pmax,M0>.01){for(V0=Mt.length-1;V0>=0;V0--)Mt[V0].dp+=M0;c0=!1}if(!(I0<.01)){if(M0<-.01){for(V0=Mt.length-1;V0>=0;V0--)Mt[V0].dp-=I0;c0=!1}if(c0){var Fp=0;for(k0=0;k0<Mt.length;k0++)$0=Mt[k0],$0.pos+$0.dp+$0.size>Wt.pmax&&Fp++;for(k0=Mt.length-1;k0>=0&&!(Fp<=0);k0--)$0=Mt[k0],$0.pos>Wt.pmax-1&&($0.del=!0,Fp--);for(k0=0;k0<Mt.length&&!(Fp<=0);k0++)if($0=Mt[k0],$0.pos<Wt.pmin+1)for($0.del=!0,Fp--,I0=$0.size*2,V0=Mt.length-1;V0>=0;V0--)Mt[V0].dp-=I0;for(k0=Mt.length-1;k0>=0&&!(Fp<=0);k0--)$0=Mt[k0],$0.pos+$0.dp+$0.size>Wt.pmax&&($0.del=!0,Fp--)}}}for(;!c0&&Sr<=Hp;){for(Sr++,c0=!0,k0=0;k0<n0.length-1;){var F0=n0[k0],bm=n0[k0+1],Dm=F0[F0.length-1],vm=bm[0];if(M0=Dm.pos+Dm.dp+Dm.size-vm.pos-vm.dp+vm.size,M0>.01){for(V0=bm.length-1;V0>=0;V0--)bm[V0].dp+=M0;for(F0.push.apply(F0,bm),n0.splice(k0+1,1),W0=0,V0=F0.length-1;V0>=0;V0--)W0+=F0[V0].dp;for(I0=W0/F0.length,V0=F0.length-1;V0>=0;V0--)F0[V0].dp-=I0;c0=!1}else k0++}n0.forEach(gm)}for(k0=n0.length-1;k0>=0;k0--){var km=n0[k0];for(V0=km.length-1;V0>=0;V0--){var Yo=km[V0],qp=Yo.datum;qp.offset=Yo.dp,qp.del=Yo.del}}}function St(Z,we){var ot=0,mt=Z.offset;return we&&(mt*=-Ze,ot=Z.offset*yt),{x:ot,y:mt}}function Ut(Z){var we={start:1,end:-1,middle:0}[Z.anchor],ot=we*(Re+Q),mt=ot+we*(Z.txwidth+Q),It=Z.anchor==="middle";return It&&(ot-=Z.tx2width/2,mt+=Z.txwidth/2+Q),{alignShift:we,textShiftX:ot,text2ShiftX:mt}}function kt(Z,we,ot,mt){var It=function(Sr){return Sr*ot},Yt=function(Sr){return Sr*mt};Z.each(function(Sr){var Op=ke.select(this);if(Sr.del)return Op.remove();var Hp=Op.select("text.nums"),n0=Sr.anchor,R0=n0==="end"?-1:1,w0=Ut(Sr),_0=St(Sr,we),ha=_0.x,Rp=_0.y,Gt=n0==="middle",Gp="hoverlabel"in Sr.trace?Sr.trace.hoverlabel.showarrow:!0,c0;Gt?c0="M-"+It(Sr.bx/2+Sr.tx2width/2)+","+Yt(Rp-Sr.by/2)+"h"+It(Sr.bx)+"v"+Yt(Sr.by)+"h-"+It(Sr.bx)+"Z":Gp?c0="M0,0L"+It(R0*Re+ha)+","+Yt(Re+Rp)+"v"+Yt(Sr.by/2-Re)+"h"+It(R0*Sr.bx)+"v-"+Yt(Sr.by)+"H"+It(R0*Re+ha)+"V"+Yt(Rp-Re)+"Z":c0="M"+It(R0*Re+ha)+","+Yt(Rp-Sr.by/2)+"h"+It(R0*Sr.bx)+"v"+Yt(Sr.by)+"h"+It(-R0*Sr.bx)+"Z",Op.select("path").attr("d",c0);var M0=ha+w0.textShiftX,I0=Rp+Sr.ty0-Sr.by/2+Q,k0=Sr.textAlign||"auto";k0!=="auto"&&(k0==="left"&&n0!=="start"?(Hp.attr("text-anchor","start"),M0=Gt?-Sr.bx/2-Sr.tx2width/2+Q:-Sr.bx-Q):k0==="right"&&n0!=="end"&&(Hp.attr("text-anchor","end"),M0=Gt?Sr.bx/2-Sr.tx2width/2-Q:Sr.bx+Q)),Hp.call(C.positionText,It(M0),Yt(I0)),Sr.tx2width&&(Op.select("text.name").call(C.positionText,It(w0.text2ShiftX+w0.alignShift*Q+ha),Yt(Rp+Sr.ty0-Sr.by/2+Q)),Op.select("rect").call(F.setRect,It(w0.text2ShiftX+(w0.alignShift-1)*Sr.tx2width/2+ha),Yt(Rp-Sr.by/2-1),It(Sr.tx2width),Yt(Sr.by+2)))})}function jt(Z,we){var ot=Z.index,mt=Z.trace||{},It=Z.cd[0],Yt=Z.cd[ot]||{};function Sr(_0){return _0||_(_0)&&_0===0}var Op=Array.isArray(ot)?function(_0,ha){var Rp=m.castOption(It,ot,_0);return Sr(Rp)?Rp:m.extractOption({},mt,"",ha)}:function(_0,ha){return m.extractOption(Yt,mt,_0,ha)};function Hp(_0,ha,Rp){var Gt=Op(ha,Rp);Sr(Gt)&&(Z[_0]=Gt)}if(Hp("hoverinfo","hi","hoverinfo"),Hp("bgcolor","hbg","hoverlabel.bgcolor"),Hp("borderColor","hbc","hoverlabel.bordercolor"),Hp("fontFamily","htf","hoverlabel.font.family"),Hp("fontSize","hts","hoverlabel.font.size"),Hp("fontColor","htc","hoverlabel.font.color"),Hp("fontWeight","htw","hoverlabel.font.weight"),Hp("fontStyle","hty","hoverlabel.font.style"),Hp("fontVariant","htv","hoverlabel.font.variant"),Hp("nameLength","hnl","hoverlabel.namelength"),Hp("textAlign","hta","hoverlabel.align"),Z.posref=we==="y"||we==="closest"&&mt.orientation==="h"?Z.xa._offset+(Z.x0+Z.x1)/2:Z.ya._offset+(Z.y0+Z.y1)/2,Z.x0=m.constrain(Z.x0,0,Z.xa._length),Z.x1=m.constrain(Z.x1,0,Z.xa._length),Z.y0=m.constrain(Z.y0,0,Z.ya._length),Z.y1=m.constrain(Z.y1,0,Z.ya._length),Z.xLabelVal!==void 0&&(Z.xLabel="xLabel"in Z?Z.xLabel:$.hoverLabelText(Z.xa,Z.xLabelVal,mt.xhoverformat),Z.xVal=Z.xa.c2d(Z.xLabelVal)),Z.yLabelVal!==void 0&&(Z.yLabel="yLabel"in Z?Z.yLabel:$.hoverLabelText(Z.ya,Z.yLabelVal,mt.yhoverformat),Z.yVal=Z.ya.c2d(Z.yLabelVal)),Z.zLabelVal!==void 0&&Z.zLabel===void 0&&(Z.zLabel=String(Z.zLabelVal)),!isNaN(Z.xerr)&&!(Z.xa.type==="log"&&Z.xerr<=0)){var n0=$.tickText(Z.xa,Z.xa.c2l(Z.xerr),"hover").text;Z.xerrneg!==void 0?Z.xLabel+=" +"+n0+" / -"+$.tickText(Z.xa,Z.xa.c2l(Z.xerrneg),"hover").text:Z.xLabel+="  "+n0,we==="x"&&(Z.distance+=1)}if(!isNaN(Z.yerr)&&!(Z.ya.type==="log"&&Z.yerr<=0)){var R0=$.tickText(Z.ya,Z.ya.c2l(Z.yerr),"hover").text;Z.yerrneg!==void 0?Z.yLabel+=" +"+R0+" / -"+$.tickText(Z.ya,Z.ya.c2l(Z.yerrneg),"hover").text:Z.yLabel+="  "+R0,we==="y"&&(Z.distance+=1)}var w0=Z.hoverinfo||Z.trace.hoverinfo;return w0&&w0!=="all"&&(w0=Array.isArray(w0)?w0:w0.split("+"),w0.indexOf("x")===-1&&(Z.xLabel=void 0),w0.indexOf("y")===-1&&(Z.yLabel=void 0),w0.indexOf("z")===-1&&(Z.zLabel=void 0),w0.indexOf("text")===-1&&(Z.text=void 0),w0.indexOf("name")===-1&&(Z.name=void 0)),Z}function aa(Z,we,ot){var mt=ot.container,It=ot.fullLayout,Yt=It._size,Sr=ot.event,Op=!!we.hLinePoint,Hp=!!we.vLinePoint,n0,R0;if(mt.selectAll(".spikeline").remove(),!!(Hp||Op)){var w0=A.combine(It.plot_bgcolor,It.paper_bgcolor);if(Op){var _0=we.hLinePoint,ha,Rp;n0=_0&&_0.xa,R0=_0&&_0.ya;var Gt=R0.spikesnap;Gt==="cursor"?(ha=Sr.pointerX,Rp=Sr.pointerY):(ha=n0._offset+_0.x,Rp=R0._offset+_0.y);var Gp=d.readability(_0.color,w0)<1.5?A.contrast(w0):_0.color,c0=R0.spikemode,M0=R0.spikethickness,I0=R0.spikecolor||Gp,k0=$.getPxPosition(Z,R0),V0,$0;if(c0.indexOf("toaxis")!==-1||c0.indexOf("across")!==-1){if(c0.indexOf("toaxis")!==-1&&(V0=k0,$0=ha),c0.indexOf("across")!==-1){var W0=R0._counterDomainMin,gm=R0._counterDomainMax;R0.anchor==="free"&&(W0=Math.min(W0,R0.position),gm=Math.max(gm,R0.position)),V0=Yt.l+W0*Yt.w,$0=Yt.l+gm*Yt.w}mt.insert("line",":first-child").attr({x1:V0,x2:$0,y1:Rp,y2:Rp,"stroke-width":M0,stroke:I0,"stroke-dasharray":F.dashStyle(R0.spikedash,M0)}).classed("spikeline",!0).classed("crisp",!0),mt.insert("line",":first-child").attr({x1:V0,x2:$0,y1:Rp,y2:Rp,"stroke-width":M0+2,stroke:w0}).classed("spikeline",!0).classed("crisp",!0)}c0.indexOf("marker")!==-1&&mt.insert("circle",":first-child").attr({cx:k0+(R0.side!=="right"?M0:-M0),cy:Rp,r:M0,fill:I0}).classed("spikeline",!0)}if(Hp){var F0=we.vLinePoint,bm,Dm;n0=F0&&F0.xa,R0=F0&&F0.ya;var vm=n0.spikesnap;vm==="cursor"?(bm=Sr.pointerX,Dm=Sr.pointerY):(bm=n0._offset+F0.x,Dm=R0._offset+F0.y);var km=d.readability(F0.color,w0)<1.5?A.contrast(w0):F0.color,Yo=n0.spikemode,qp=n0.spikethickness,Mt=n0.spikecolor||km,Wt=$.getPxPosition(Z,n0),xn,Fp;if(Yo.indexOf("toaxis")!==-1||Yo.indexOf("across")!==-1){if(Yo.indexOf("toaxis")!==-1&&(xn=Wt,Fp=Dm),Yo.indexOf("across")!==-1){var Bp=n0._counterDomainMin,e0=n0._counterDomainMax;n0.anchor==="free"&&(Bp=Math.min(Bp,n0.position),e0=Math.max(e0,n0.position)),xn=Yt.t+(1-e0)*Yt.h,Fp=Yt.t+(1-Bp)*Yt.h}mt.insert("line",":first-child").attr({x1:bm,x2:bm,y1:xn,y2:Fp,"stroke-width":qp,stroke:Mt,"stroke-dasharray":F.dashStyle(n0.spikedash,qp)}).classed("spikeline",!0).classed("crisp",!0),mt.insert("line",":first-child").attr({x1:bm,x2:bm,y1:xn,y2:Fp,"stroke-width":qp+2,stroke:w0}).classed("spikeline",!0).classed("crisp",!0)}Yo.indexOf("marker")!==-1&&mt.insert("circle",":first-child").attr({cx:bm,cy:Wt-(n0.side!=="top"?qp:-qp),r:qp,fill:Mt}).classed("spikeline",!0)}}}function ca(Z,we,ot){if(!ot||ot.length!==Z._hoverdata.length)return!0;for(var mt=ot.length-1;mt>=0;mt--){var It=ot[mt],Yt=Z._hoverdata[mt];if(It.curveNumber!==Yt.curveNumber||String(It.pointNumber)!==String(Yt.pointNumber)||String(It.pointNumbers)!==String(Yt.pointNumbers)||It.binNumber!==Yt.binNumber)return!0}return!1}function Cp(Z,we){return!0}function pt(Z,we){return C.plainText(Z||"",{len:we,allowedTags:["br","sub","sup","b","i","em","s","u"]})}function gt(Z,we){for(var ot=we.charAt(0),mt=[],It=[],Yt=[],Sr=0;Sr<Z.length;Sr++){var Op=Z[Sr];z.traceIs(Op.trace,"bar-like")||z.traceIs(Op.trace,"box-violin")?Yt.push(Op):Op.trace[ot+"period"]?It.push(Op):mt.push(Op)}return mt.concat(It).concat(Yt)}function te(Z,we,ot){var mt=we[Z+"a"],It=we[Z+"Val"],Yt=we.cd[0];if(mt.type==="category"||mt.type==="multicategory")It=mt._categoriesMap[It];else if(mt.type==="date"){var Sr=we.trace[Z+"periodalignment"];if(Sr){var Op=we.cd[we.index],Hp=Op[Z+"Start"];Hp===void 0&&(Hp=Op[Z]);var n0=Op[Z+"End"];n0===void 0&&(n0=Op[Z]);var R0=n0-Hp;Sr==="end"?It+=R0:Sr==="middle"&&(It+=R0/2)}It=mt.d2c(It)}return Yt&&Yt.t&&Yt.t.posLetter===mt._id&&(ot.boxmode==="group"||ot.violinmode==="group")&&(It+=Yt.t.dPos),It}function Et(Z){return Z.offsetTop+Z.clientTop}function zt(Z){return Z.offsetLeft+Z.clientLeft}function rt(Z,we){var ot=Z._fullLayout,mt=we.getBoundingClientRect(),It=mt.left,Yt=mt.top,Sr=It+mt.width,Op=Yt+mt.height,Hp=m.apply3DTransform(ot._invTransform)(It,Yt),n0=m.apply3DTransform(ot._invTransform)(Sr,Op),R0=Hp[0],w0=Hp[1],_0=n0[0],ha=n0[1];return{x:R0,y:w0,width:_0-R0,height:ha-w0,top:Math.min(w0,ha),left:Math.min(R0,_0),right:Math.max(R0,_0),bottom:Math.max(w0,ha)}}}),vv=r((nt,ke)=>{var _=et(),d=Mn(),m=D0().isUnifiedHover;ke.exports=function(E,b,w,S){S=S||{};var C=b.legend;function p(F){S.font[F]||(S.font[F]=C?b.legend.font[F]:b.font[F])}b&&m(b.hovermode)&&(S.font||(S.font={}),p("size"),p("family"),p("color"),p("weight"),p("style"),p("variant"),C?(S.bgcolor||(S.bgcolor=d.combine(b.legend.bgcolor,b.paper_bgcolor)),S.bordercolor||(S.bordercolor=b.legend.bordercolor)):S.bgcolor||(S.bgcolor=b.paper_bgcolor)),w("hoverlabel.bgcolor",S.bgcolor),w("hoverlabel.bordercolor",S.bordercolor),w("hoverlabel.namelength",S.namelength),w("hoverlabel.showarrow",S.showarrow),_.coerceFont(w,"hoverlabel.font",S.font),w("hoverlabel.align",S.align)}}),jv=r((nt,ke)=>{var _=et(),d=vv(),m=st();ke.exports=function(E,b){function w(S,C){return _.coerce(E,b,m,S,C)}d(E,b,w)}}),Uv=r((nt,ke)=>{var _=et(),d=Ct(),m=vv();ke.exports=function(E,b,w,S){function C(F,A){return _.coerce(E,b,d,F,A)}var p=_.extendFlat({},S.hoverlabel);b.hovertemplate&&(p.namelength=-1),m(E,b,C,p)}}),vy=r((nt,ke)=>{var _=et(),d=st();ke.exports=function(m,E){function b(w,S){return E[w]!==void 0?E[w]:_.coerce(m,E,d,w,S)}return b("clickmode"),b("hoversubplots"),b("hovermode")}}),ay=r((nt,ke)=>{var _=et(),d=st(),m=vy(),E=vv();ke.exports=function(b,w){function S(j,z){return _.coerce(b,w,d,j,z)}var C=m(b,w);C&&(S("hoverdistance"),S("spikedistance"));var p=S("dragmode");p==="select"&&S("selectdirection");var F=w._has("mapbox"),A=w._has("map"),O=w._has("geo"),$=w._basePlotModules.length;w.dragmode==="zoom"&&((F||A||O)&&$===1||(F||A)&&O&&$===2)&&(w.dragmode="pan"),E(b,w,S),_.coerceFont(S,"hoverlabel.grouptitlefont",w.hoverlabel.font)}}),Tv=r((nt,ke)=>{var _=et(),d=y1();ke.exports=function(E){var b=E.calcdata,w=E._fullLayout;function S(O){return function($){return _.coerceHoverinfo({hoverinfo:$},{_module:O._module},w)}}for(var C=0;C<b.length;C++){var p=b[C],F=p[0].trace;if(!d.traceIs(F,"pie-like")){var A=d.traceIs(F,"2dMap")?m:_.fillArray;A(F.hoverinfo,p,"hi",S(F)),F.hovertemplate&&A(F.hovertemplate,p,"ht"),F.hoverlabel&&(A(F.hoverlabel.bgcolor,p,"hbg"),A(F.hoverlabel.bordercolor,p,"hbc"),A(F.hoverlabel.font.size,p,"hts"),A(F.hoverlabel.font.color,p,"htc"),A(F.hoverlabel.font.family,p,"htf"),A(F.hoverlabel.font.weight,p,"htw"),A(F.hoverlabel.font.style,p,"hty"),A(F.hoverlabel.font.variant,p,"htv"),A(F.hoverlabel.namelength,p,"hnl"),A(F.hoverlabel.align,p,"hta"),A(F.hoverlabel.showarrow,p,"htsa"))}}};function m(E,b,w,S){S=S||_.identity,Array.isArray(E)&&(b[0][w]=S(E))}}),yy=r((nt,ke)=>{var _=y1(),d=Hg().hover;ke.exports=function(m,E,b){var w=_.getComponentMethod("annotations","onClick")(m,m._hoverdata);b!==void 0&&d(m,E,b,!0);function S(){m.emit("plotly_click",{points:m._hoverdata,event:E})}m._hoverdata&&E&&E.target&&(w&&w.then?w.then(S):S(),E.stopImmediatePropagation&&E.stopImmediatePropagation())}}),ey=r((nt,ke)=>{var _=o(),d=et(),m=t1(),E=D0(),b=st(),w=Hg();ke.exports={moduleType:"component",name:"fx",constants:ae(),schema:{layout:b},attributes:Ct(),layoutAttributes:b,supplyLayoutGlobalDefaults:jv(),supplyDefaults:Uv(),supplyLayoutDefaults:ay(),calc:Tv(),getDistanceFunction:E.getDistanceFunction,getClosest:E.getClosest,inbox:E.inbox,quadrature:E.quadrature,appendArrayPointValue:E.appendArrayPointValue,castHoverOption:C,castHoverinfo:p,hover:w.hover,unhover:m.unhover,loneHover:w.loneHover,loneUnhover:S,click:yy()};function S(F){var A=d.isD3Selection(F)?F:_.select(F);A.selectAll("g.hovertext").remove(),A.selectAll(".spikeline").remove()}function C(F,A,O){return d.castOption(F,A,"hoverlabel."+O)}function p(F,A,O){function $(j){return d.coerceHoverinfo({hoverinfo:j},{_module:F._module},A)}return d.castOption(F,O,"hoverinfo",$)}}),iy=r(nt=>{nt.selectMode=function(ke){return ke==="lasso"||ke==="select"},nt.drawMode=function(ke){return ke==="drawclosedpath"||ke==="drawopenpath"||ke==="drawline"||ke==="drawrect"||ke==="drawcircle"},nt.openMode=function(ke){return ke==="drawline"||ke==="drawopenpath"},nt.rectMode=function(ke){return ke==="select"||ke==="drawline"||ke==="drawrect"||ke==="drawcircle"},nt.freeMode=function(ke){return ke==="lasso"||ke==="drawclosedpath"||ke==="drawopenpath"},nt.selectingOrDrawing=function(ke){return nt.freeMode(ke)||nt.rectMode(ke)}}),xy=r((nt,ke)=>{ke.exports=function(_){var d=_._fullLayout;d._glcanvas&&d._glcanvas.size()&&d._glcanvas.each(function(m){m.regl&&m.regl.clear({color:!0,depth:!0})})}}),Ly=r((nt,ke)=>{ke.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:["<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'>"," <title>plotly-logomark</title>"," <g id='symbol'>","  <rect fill='#000' x='0' y='0' width='132' height='132' rx='18' ry='18'/>","  <circle fill='#9EF' cx='102' cy='30' r='6'/>","  <circle fill='#BAC' cx='78' cy='30' r='6'/>","  <circle fill='#BAC' cx='78' cy='54' r='6'/>","  <circle fill='#D69' cx='54' cy='30' r='6'/>","  <circle fill='#F26' cx='30' cy='30' r='6'/>","  <circle fill='#F26' cx='30' cy='54' r='6'/>","  <path fill='#FFF' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/>","  <path fill='#FFF' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/>","  <path fill='#FFF' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/>","  <path fill='#FFF' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/>"," </g>","</svg>"].join("")}}}),_y=r((nt,ke)=>{var _=32;ke.exports={CIRCLE_SIDES:_,i000:0,i090:_/4,i180:_/2,i270:_/4*3,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}}),Iy=r((nt,ke)=>{var _=et().strTranslate;function d(w,S){switch(w.type){case"log":return w.p2d(S);case"date":return w.p2r(S,0,w.calendar);default:return w.p2r(S)}}function m(w,S){switch(w.type){case"log":return w.d2p(S);case"date":return w.r2p(S,0,w.calendar);default:return w.r2p(S)}}function E(w){var S=w._id.charAt(0)==="y"?1:0;return function(C){return d(w,C[S])}}function b(w){return _(w.xaxis._offset,w.yaxis._offset)}ke.exports={p2r:d,r2p:m,axValue:E,getTransform:b}}),Dv=r(nt=>{var ke=E0(),_=_y(),d=_.CIRCLE_SIDES,m=_.SQRT2,E=Iy(),b=E.p2r,w=E.r2p,S=[0,3,4,5,6,1,2],C=[0,3,4,1,2];nt.writePaths=function(A){var O=A.length;if(!O)return"M0,0Z";for(var $="",j=0;j<O;j++)for(var z=A[j].length,I=0;I<z;I++){var G=A[j][I][0];if(G==="Z")$+="Z";else for(var M=A[j][I].length,L=0;L<M;L++){var B=L;G==="Q"||G==="S"?B=C[L]:G==="C"&&(B=S[L]),$+=A[j][I][B],L>0&&L<M-1&&($+=",")}}return $},nt.readPaths=function(A,O,$,j){var z=ke(A),I=[],G=-1,M=function(){G++,I[G]=[]},L,B=0,X=0,ee,yt,Ze=function(){ee=B,yt=X};Ze();for(var Re=0;Re<z.length;Re++){var Q=[],xt,tt,ht,it,ut=z[Re][0],vt=ut;switch(ut){case"M":M(),B=+z[Re][1],X=+z[Re][2],Q.push([vt,B,X]),Ze();break;case"Q":case"S":xt=+z[Re][1],ht=+z[Re][2],B=+z[Re][3],X=+z[Re][4],Q.push([vt,B,X,xt,ht]);break;case"C":xt=+z[Re][1],ht=+z[Re][2],tt=+z[Re][3],it=+z[Re][4],B=+z[Re][5],X=+z[Re][6],Q.push([vt,B,X,xt,ht,tt,it]);break;case"T":case"L":B=+z[Re][1],X=+z[Re][2],Q.push([vt,B,X]);break;case"H":vt="L",B=+z[Re][1],Q.push([vt,B,X]);break;case"V":vt="L",X=+z[Re][1],Q.push([vt,B,X]);break;case"A":vt="L";var _t=+z[Re][1],Le=+z[Re][2];+z[Re][4]||(_t=-_t,Le=-Le);var wt=B-_t,St=X;for(L=1;L<=d/2;L++){var Ut=2*Math.PI*L/d;Q.push([vt,wt+_t*Math.cos(Ut),St+Le*Math.sin(Ut)])}break;case"Z":(B!==ee||X!==yt)&&(B=ee,X=yt,Q.push([vt,B,X]));break}for(var kt=($||{}).domain,jt=O._fullLayout._size,aa=$&&$.xsizemode==="pixel",ca=$&&$.ysizemode==="pixel",Cp=j===!1,pt=0;pt<Q.length;pt++){for(L=0;L+2<7;L+=2){var gt=Q[pt][L+1],te=Q[pt][L+2];gt===void 0||te===void 0||(B=gt,X=te,$&&($.xaxis&&$.xaxis.p2r?(Cp&&(gt-=$.xaxis._offset),aa?gt=w($.xaxis,$.xanchor)+gt:gt=b($.xaxis,gt)):(Cp&&(gt-=jt.l),kt?gt=kt.x[0]+gt/jt.w:gt=gt/jt.w),$.yaxis&&$.yaxis.p2r?(Cp&&(te-=$.yaxis._offset),ca?te=w($.yaxis,$.yanchor)-te:te=b($.yaxis,te)):(Cp&&(te-=jt.t),kt?te=kt.y[1]-te/jt.h:te=1-te/jt.h)),Q[pt][L+1]=gt,Q[pt][L+2]=te)}I[G].push(Q[pt].slice())}}return I};function p(A,O){return Math.abs(A-O)<=1e-6}function F(A,O){var $=O[1]-A[1],j=O[2]-A[2];return Math.sqrt($*$+j*j)}nt.pointsOnRectangle=function(A){var O=A.length;if(O!==5)return!1;for(var $=1;$<3;$++){var j=A[0][$]-A[1][$],z=A[3][$]-A[2][$];if(!p(j,z))return!1;var I=A[0][$]-A[3][$],G=A[1][$]-A[2][$];if(!p(I,G))return!1}return!p(A[0][1],A[1][1])&&!p(A[0][1],A[3][1])?!1:!!(F(A[0],A[1])*F(A[0],A[3]))},nt.pointsOnEllipse=function(A){var O=A.length;if(O!==d+1)return!1;O=d;for(var $=0;$<O;$++){var j=(O*2-$)%O,z=(O/2+j)%O,I=(O/2+$)%O;if(!p(F(A[$],A[I]),F(A[j],A[z])))return!1}return!0},nt.handleEllipse=function(A,O,$){if(!A)return[O,$];var j=nt.ellipseOver({x0:O[0],y0:O[1],x1:$[0],y1:$[1]}),z=(j.x1+j.x0)/2,I=(j.y1+j.y0)/2,G=(j.x1-j.x0)/2,M=(j.y1-j.y0)/2;G||(G=M=M/m),M||(M=G=G/m);for(var L=[],B=0;B<d;B++){var X=B*2*Math.PI/d;L.push([z+G*Math.cos(X),I+M*Math.sin(X)])}return L},nt.ellipseOver=function(A){var O=A.x0,$=A.y0,j=A.x1,z=A.y1,I=j-O,G=z-$;O-=I,$-=G;var M=(O+j)/2,L=($+z)/2,B=m;return I*=B,G*=B,{x0:M-I,y0:L-G,x1:M+I,y1:L+G}},nt.fixDatesForPaths=function(A,O,$){var j=O.type==="date",z=$.type==="date";if(!j&&!z)return A;for(var I=0;I<A.length;I++)for(var G=0;G<A[I].length;G++)for(var M=0;M+2<A[I][G].length;M+=2)j&&(A[I][G][M+1]=A[I][G][M+1].replace(" ","_")),z&&(A[I][G][M+2]=A[I][G][M+2].replace(" ","_"));return A}}),Wv=r((nt,ke)=>{var _=D1(),d=iy(),m=d.drawMode,E=d.openMode,b=_y(),w=b.i000,S=b.i090,C=b.i180,p=b.i270,F=b.cos45,A=b.sin45,O=Iy(),$=O.p2r,j=O.r2p,z=O1(),I=z.clearOutline,G=Dv(),M=G.readPaths,L=G.writePaths,B=G.ellipseOver,X=G.fixDatesForPaths;function ee(Ze,Re){if(Ze.length){var Q=Ze[0][0];if(Q){var xt=Re.gd,tt=Re.isActiveShape,ht=Re.dragmode,it=(xt.layout||{}).shapes||[];if(!m(ht)&&tt!==void 0){var ut=xt._fullLayout._activeShapeIndex;if(ut<it.length)switch(xt._fullLayout.shapes[ut].type){case"rect":ht="drawrect";break;case"circle":ht="drawcircle";break;case"line":ht="drawline";break;case"path":var vt=it[ut].path||"";vt[vt.length-1]==="Z"?ht="drawclosedpath":ht="drawopenpath";break}}var _t=yt(Ze,Re,ht);I(xt);for(var Le=Re.editHelpers,wt=(Le||{}).modifyItem,St=[],Ut=0;Ut<it.length;Ut++){var kt=xt._fullLayout.shapes[Ut];if(St[Ut]=kt._input,tt!==void 0&&Ut===xt._fullLayout._activeShapeIndex){var jt=_t;switch(kt.type){case"line":case"rect":case"circle":var aa=_.getFromId(xt,kt.xref);kt.xref.charAt(0)==="x"&&aa.type.includes("category")?(wt("x0",jt.x0-(kt.x0shift||0)),wt("x1",jt.x1-(kt.x1shift||0))):(wt("x0",jt.x0),wt("x1",jt.x1));var ca=_.getFromId(xt,kt.yref);kt.yref.charAt(0)==="y"&&ca.type.includes("category")?(wt("y0",jt.y0-(kt.y0shift||0)),wt("y1",jt.y1-(kt.y1shift||0))):(wt("y0",jt.y0),wt("y1",jt.y1));break;case"path":wt("path",jt.path);break}}}return tt===void 0?(St.push(_t),St):Le?Le.getUpdateObj():{}}}}function yt(Ze,Re,Q){var xt=Ze[0][0],tt=Re.gd,ht=xt.getAttribute("d"),it=tt._fullLayout.newshape,ut=Re.plotinfo,vt=Re.isActiveShape,_t=ut.xaxis,Le=ut.yaxis,wt=!!ut.domain||!ut.xaxis,St=!!ut.domain||!ut.yaxis,Ut=E(Q),kt=M(ht,tt,ut,vt),jt={editable:!0,visible:it.visible,name:it.name,showlegend:it.showlegend,legend:it.legend,legendwidth:it.legendwidth,legendgroup:it.legendgroup,legendgrouptitle:{text:it.legendgrouptitle.text,font:it.legendgrouptitle.font},legendrank:it.legendrank,label:it.label,xref:wt?"paper":_t._id,yref:St?"paper":Le._id,layer:it.layer,opacity:it.opacity,line:{color:it.line.color,width:it.line.width,dash:it.line.dash}};Ut||(jt.fillcolor=it.fillcolor,jt.fillrule=it.fillrule);var aa;if(kt.length===1&&(aa=kt[0]),aa&&aa.length===5&&Q==="drawrect")jt.type="rect",jt.x0=aa[0][1],jt.y0=aa[0][2],jt.x1=aa[2][1],jt.y1=aa[2][2];else if(aa&&Q==="drawline")jt.type="line",jt.x0=aa[0][1],jt.y0=aa[0][2],jt.x1=aa[1][1],jt.y1=aa[1][2];else if(aa&&Q==="drawcircle"){jt.type="circle";var ca=aa[w][1],Cp=aa[S][1],pt=aa[C][1],gt=aa[p][1],te=aa[w][2],Et=aa[S][2],zt=aa[C][2],rt=aa[p][2],Z=ut.xaxis&&(ut.xaxis.type==="date"||ut.xaxis.type==="log"),we=ut.yaxis&&(ut.yaxis.type==="date"||ut.yaxis.type==="log");Z&&(ca=j(ut.xaxis,ca),Cp=j(ut.xaxis,Cp),pt=j(ut.xaxis,pt),gt=j(ut.xaxis,gt)),we&&(te=j(ut.yaxis,te),Et=j(ut.yaxis,Et),zt=j(ut.yaxis,zt),rt=j(ut.yaxis,rt));var ot=(Cp+gt)/2,mt=(te+zt)/2,It=(gt-Cp+pt-ca)/2,Yt=(rt-Et+zt-te)/2,Sr=B({x0:ot,y0:mt,x1:ot+It*F,y1:mt+Yt*A});Z&&(Sr.x0=$(ut.xaxis,Sr.x0),Sr.x1=$(ut.xaxis,Sr.x1)),we&&(Sr.y0=$(ut.yaxis,Sr.y0),Sr.y1=$(ut.yaxis,Sr.y1)),jt.x0=Sr.x0,jt.y0=Sr.y0,jt.x1=Sr.x1,jt.y1=Sr.y1}else jt.type="path",_t&&Le&&X(kt,_t,Le),jt.path=L(kt),aa=null;return jt}ke.exports={newShapes:ee,createShapeObj:yt}}),Zv=r((nt,ke)=>{var _=iy(),d=_.selectMode,m=O1(),E=m.clearOutline,b=Dv(),w=b.readPaths,S=b.writePaths,C=b.fixDatesForPaths;ke.exports=function(p,F){if(p.length){var A=p[0][0];if(A){var O=A.getAttribute("d"),$=F.gd,j=$._fullLayout.newselection,z=F.plotinfo,I=z.xaxis,G=z.yaxis,M=F.isActiveSelection,L=F.dragmode,B=($.layout||{}).selections||[];if(!d(L)&&M!==void 0){var X=$._fullLayout._activeSelectionIndex;if(X<B.length)switch($._fullLayout.selections[X].type){case"rect":L="select";break;case"path":L="lasso";break}}var ee=w(O,$,z,M),yt={xref:I._id,yref:G._id,opacity:j.opacity,line:{color:j.line.color,width:j.line.width,dash:j.line.dash}},Ze;ee.length===1&&(Ze=ee[0]),Ze&&Ze.length===5&&L==="select"?(yt.type="rect",yt.x0=Ze[0][1],yt.y0=Ze[0][2],yt.x1=Ze[2][1],yt.y1=Ze[2][2]):(yt.type="path",I&&G&&C(ee,I,G),yt.path=S(ee),Ze=null),E($);for(var Re=F.editHelpers,Q=(Re||{}).modifyItem,xt=[],tt=0;tt<B.length;tt++){var ht=$._fullLayout.selections[tt];if(!ht){xt[tt]=ht;continue}if(xt[tt]=ht._input,M!==void 0&&tt===$._fullLayout._activeSelectionIndex){var it=yt;switch(ht.type){case"rect":Q("x0",it.x0),Q("x1",it.x1),Q("y0",it.y0),Q("y1",it.y1);break;case"path":Q("path",it.path);break}}}return M===void 0?(xt.push(yt),xt):Re?Re.getUpdateObj():{}}}}}),ty=r((nt,ke)=>{ke.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}}),Ue=r(nt=>{var ke=ty(),_=et(),d=Im();nt.rangeToShapePosition=function(b){return b.type==="log"?b.r2d:function(w){return w}},nt.shapePositionToRange=function(b){return b.type==="log"?b.d2r:function(w){return w}},nt.decodeDate=function(b){return function(w){return w.replace&&(w=w.replace("_"," ")),b(w)}},nt.encodeDate=function(b){return function(w){return b(w).replace(" ","_")}},nt.extractPathCoords=function(b,w,S){var C=[],p=b.match(ke.segmentRE);return p.forEach(function(F){var A=w[F.charAt(0)].drawn;if(A!==void 0){var O=F.substr(1).match(ke.paramRE);if(!(!O||O.length<A)){var $=O[A],j=S?$:_.cleanNumber($);C.push(j)}}}),C},nt.getDataToPixel=function(b,w,S,C,p){var F=b._fullLayout._size,A;if(w)if(p==="domain")A=function($){return w._length*(C?1-$:$)+w._offset};else{var O=nt.shapePositionToRange(w);A=function($){var j=E(w,S);return w._offset+w.r2p(O($,!0))+j},w.type==="date"&&(A=nt.decodeDate(A))}else C?A=function($){return F.t+F.h*(1-$)}:A=function($){return F.l+F.w*$};return A},nt.getPixelToData=function(b,w,S,C){var p=b._fullLayout._size,F;if(w)if(C==="domain")F=function(O){var $=(O-w._offset)/w._length;return S?1-$:$};else{var A=nt.rangeToShapePosition(w);F=function(O){return A(w.p2r(O-w._offset))}}else S?F=function(O){return 1-(O-p.t)/p.h}:F=function(O){return(O-p.l)/p.w};return F},nt.roundPositionForSharpStrokeRendering=function(b,w){var S=Math.round(w%2)===1,C=Math.round(b);return S?C+.5:C},nt.makeShapesOptionsAndPlotinfo=function(b,w){var S=b._fullLayout.shapes[w]||{},C=b._fullLayout._plots[S.xref+S.yref],p=!!C;return p?C._hadPlotinfo=!0:(C={},S.xref&&S.xref!=="paper"&&(C.xaxis=b._fullLayout[S.xref+"axis"]),S.yref&&S.yref!=="paper"&&(C.yaxis=b._fullLayout[S.yref+"axis"])),C.xsizemode=S.xsizemode,C.ysizemode=S.ysizemode,C.xanchor=S.xanchor,C.yanchor=S.yanchor,{options:S,plotinfo:C}},nt.makeSelectionsOptionsAndPlotinfo=function(b,w){var S=b._fullLayout.selections[w]||{},C=b._fullLayout._plots[S.xref+S.yref],p=!!C;return p?C._hadPlotinfo=!0:(C={},S.xref&&(C.xaxis=b._fullLayout[S.xref+"axis"]),S.yref&&(C.yaxis=b._fullLayout[S.yref+"axis"])),{options:S,plotinfo:C}},nt.getPathString=function(b,w){var S=w.type,C=d.getRefType(w.xref),p=d.getRefType(w.yref),F=d.getFromId(b,w.xref),A=d.getFromId(b,w.yref),O=b._fullLayout._size,$,j,z,I,G=E(F,w.x0shift),M=E(F,w.x1shift),L=E(A,w.y0shift),B=E(A,w.y1shift),X,ee,yt,Ze;if(F?C==="domain"?j=function(Le){return F._offset+F._length*Le}:($=nt.shapePositionToRange(F),j=function(Le){return F._offset+F.r2p($(Le,!0))}):j=function(Le){return O.l+O.w*Le},A?p==="domain"?I=function(Le){return A._offset+A._length*(1-Le)}:(z=nt.shapePositionToRange(A),I=function(Le){return A._offset+A.r2p(z(Le,!0))}):I=function(Le){return O.t+O.h*(1-Le)},S==="path")return F&&F.type==="date"&&(j=nt.decodeDate(j)),A&&A.type==="date"&&(I=nt.decodeDate(I)),m(w,j,I);if(w.xsizemode==="pixel"){var Re=j(w.xanchor);X=Re+w.x0+G,ee=Re+w.x1+M}else X=j(w.x0)+G,ee=j(w.x1)+M;if(w.ysizemode==="pixel"){var Q=I(w.yanchor);yt=Q-w.y0+L,Ze=Q-w.y1+B}else yt=I(w.y0)+L,Ze=I(w.y1)+B;if(S==="line")return"M"+X+","+yt+"L"+ee+","+Ze;if(S==="rect")return"M"+X+","+yt+"H"+ee+"V"+Ze+"H"+X+"Z";var xt=(X+ee)/2,tt=(yt+Ze)/2,ht=Math.abs(xt-X),it=Math.abs(tt-yt),ut="A"+ht+","+it,vt=xt+ht+","+tt,_t=xt+","+(tt-it);return"M"+vt+ut+" 0 1,1 "+_t+ut+" 0 0,1 "+vt+"Z"};function m(b,w,S){var C=b.path,p=b.xsizemode,F=b.ysizemode,A=b.xanchor,O=b.yanchor;return C.replace(ke.segmentRE,function($){var j=0,z=$.charAt(0),I=ke.paramIsX[z],G=ke.paramIsY[z],M=ke.numParams[z],L=$.substr(1).replace(ke.paramRE,function(B){return I[j]?p==="pixel"?B=w(A)+Number(B):B=w(B):G[j]&&(F==="pixel"?B=S(O)-Number(B):B=S(B)),j++,j>M&&(B="X"),B});return j>M&&(L=L.replace(/[\s,]*X.*/,""),_.log("Ignoring extra params in segment "+$)),z+L})}function E(b,w){w=w||0;var S=0;return w&&b&&(b.type==="category"||b.type==="multicategory")&&(S=(b.r2p(1)-b.r2p(0))*w),S}}),jp=r((nt,ke)=>{var _=et(),d=Im(),m=G1(),E=Q0(),b=Dv().readPaths,w=Ue(),S=w.getPathString,C=S1(),p=K1().FROM_TL;ke.exports=function(O,$,j,z){if(z.selectAll(".shape-label").remove(),!!(j.label.text||j.label.texttemplate)){var I;if(j.label.texttemplate){var G={};if(j.type!=="path"){var M=d.getFromId(O,j.xref),L=d.getFromId(O,j.yref);for(var B in C){var X=C[B](j,M,L);X!==void 0&&(G[B]=X)}}I=_.texttemplateStringForShapes(j.label.texttemplate,{},O._fullLayout._d3locale,G)}else I=j.label.text;var ee={"data-index":$},yt=j.label.font,Ze={"data-notex":1},Re=z.append("g").attr(ee).classed("shape-label",!0),Q=Re.append("text").attr(Ze).classed("shape-label-text",!0).text(I),xt,tt,ht,it;if(j.path){var ut=S(O,j),vt=b(ut,O);xt=1/0,ht=1/0,tt=-1/0,it=-1/0;for(var _t=0;_t<vt.length;_t++)for(var Le=0;Le<vt[_t].length;Le++)for(var wt=vt[_t][Le],St=1;St<wt.length;St+=2){var Ut=wt[St],kt=wt[St+1];xt=Math.min(xt,Ut),tt=Math.max(tt,Ut),ht=Math.min(ht,kt),it=Math.max(it,kt)}}else{var jt=d.getFromId(O,j.xref),aa=j.x0shift,ca=j.x1shift,Cp=d.getRefType(j.xref),pt=d.getFromId(O,j.yref),gt=j.y0shift,te=j.y1shift,Et=d.getRefType(j.yref),zt=function(Sr,Op){var Hp=w.getDataToPixel(O,jt,Op,!1,Cp);return Hp(Sr)},rt=function(Sr,Op){var Hp=w.getDataToPixel(O,pt,Op,!0,Et);return Hp(Sr)};xt=zt(j.x0,aa),tt=zt(j.x1,ca),ht=rt(j.y0,gt),it=rt(j.y1,te)}var Z=j.label.textangle;Z==="auto"&&(j.type==="line"?Z=F(xt,ht,tt,it):Z=0),Q.call(function(Sr){return Sr.call(E.font,yt).attr({}),m.convertToTspans(Sr,O),Sr});var we=E.bBox(Q.node()),ot=A(xt,ht,tt,it,j,Z,we),mt=ot.textx,It=ot.texty,Yt=ot.xanchor;Q.attr({"text-anchor":{left:"start",center:"middle",right:"end"}[Yt],y:It,x:mt,transform:"rotate("+Z+","+mt+","+It+")"}).call(m.positionText,mt,It)}};function F(O,$,j,z){var I,G;return G=Math.abs(j-O),j>=O?I=$-z:I=z-$,-180/Math.PI*Math.atan2(I,G)}function A(O,$,j,z,I,G,M){var L=I.label.textposition,B=I.label.textangle,X=I.label.padding,ee=I.type,yt=Math.PI/180*G,Ze=Math.sin(yt),Re=Math.cos(yt),Q=I.label.xanchor,xt=I.label.yanchor,tt,ht,it,ut;if(ee==="line"){L==="start"?(tt=O,ht=$):L==="end"?(tt=j,ht=z):(tt=(O+j)/2,ht=($+z)/2),Q==="auto"&&(L==="start"?B==="auto"?j>O?Q="left":j<O?Q="right":Q="center":j>O?Q="right":j<O?Q="left":Q="center":L==="end"?B==="auto"?j>O?Q="right":j<O?Q="left":Q="center":j>O?Q="left":j<O?Q="right":Q="center":Q="center");var vt={left:1,center:0,right:-1},_t={bottom:-1,middle:0,top:1};if(B==="auto"){var Le=_t[xt];it=-X*Ze*Le,ut=X*Re*Le}else{var wt=vt[Q],St=_t[xt];it=X*wt,ut=X*St}tt=tt+it,ht=ht+ut}else it=X+3,L.indexOf("right")!==-1?(tt=Math.max(O,j)-it,Q==="auto"&&(Q="right")):L.indexOf("left")!==-1?(tt=Math.min(O,j)+it,Q==="auto"&&(Q="left")):(tt=(O+j)/2,Q==="auto"&&(Q="center")),L.indexOf("top")!==-1?ht=Math.min($,z):L.indexOf("bottom")!==-1?ht=Math.max($,z):ht=($+z)/2,ut=X,xt==="bottom"?ht=ht-ut:xt==="top"&&(ht=ht+ut);var Ut=p[xt],kt=I.label.font.size,jt=M.height,aa=(jt*Ut-kt)*Ze,ca=-(jt*Ut-kt)*Re;return{textx:tt+aa,texty:ht+ca,xanchor:Q}}}),bt=r((nt,ke)=>{var _=et(),d=_.strTranslate,m=t1(),E=iy(),b=E.drawMode,w=E.selectMode,S=y1(),C=Mn(),p=_y(),F=p.i000,A=p.i090,O=p.i180,$=p.i270,j=O1(),z=j.clearOutlineControllers,I=Dv(),G=I.pointsOnRectangle,M=I.pointsOnEllipse,L=I.writePaths,B=Wv().newShapes,X=Wv().createShapeObj,ee=Zv(),yt=jp();ke.exports=function xt(tt,ht,it,ut){ut||(ut=0);var vt=it.gd;function _t(){xt(tt,ht,it,ut++),(M(tt[0])||it.hasText)&&Le({redrawing:!0})}function Le(w0){var _0={};it.isActiveShape!==void 0&&(it.isActiveShape=!1,_0=B(ht,it)),it.isActiveSelection!==void 0&&(it.isActiveSelection=!1,_0=ee(ht,it),vt._fullLayout._reselect=!0),Object.keys(_0).length&&S.call((w0||{}).redrawing?"relayout":"_guiRelayout",vt,_0)}var wt=vt._fullLayout,St=wt._zoomlayer,Ut=it.dragmode,kt=b(Ut),jt=w(Ut);(kt||jt)&&(vt._fullLayout._outlining=!0),z(vt),ht.attr("d",L(tt));var aa,ca,Cp,pt,gt;if(!ut&&(it.isActiveShape||it.isActiveSelection)){gt=Ze([],tt);var te=St.append("g").attr("class","outline-controllers");It(te),R0()}if(kt&&it.hasText){var Et=St.select(".label-temp"),zt=X(ht,it,it.dragmode);yt(vt,"label-temp",zt,Et)}function rt(w0){Cp=+w0.srcElement.getAttribute("data-i"),pt=+w0.srcElement.getAttribute("data-j"),aa[Cp][pt].moveFn=Z}function Z(w0,_0){if(tt.length){var ha=gt[Cp][pt][1],Rp=gt[Cp][pt][2],Gt=tt[Cp],Gp=Gt.length;if(G(Gt)){var c0=w0,M0=_0;if(it.isActiveSelection){var I0=Re(Gt,pt);I0[1]===Gt[pt][1]?M0=0:c0=0}for(var k0=0;k0<Gp;k0++)if(k0!==pt){var V0=Gt[k0];V0[1]===Gt[pt][1]&&(V0[1]=ha+c0),V0[2]===Gt[pt][2]&&(V0[2]=Rp+M0)}if(Gt[pt][1]=ha+c0,Gt[pt][2]=Rp+M0,!G(Gt))for(var $0=0;$0<Gp;$0++)for(var W0=0;W0<Gt[$0].length;W0++)Gt[$0][W0]=gt[Cp][$0][W0]}else Gt[pt][1]=ha+w0,Gt[pt][2]=Rp+_0;_t()}}function we(){Le()}function ot(){if(tt.length&&tt[Cp]&&tt[Cp].length){for(var w0=[],_0=0;_0<tt[Cp].length;_0++)_0!==pt&&w0.push(tt[Cp][_0]);w0.length>1&&!(w0.length===2&&w0[1][0]==="Z")&&(pt===0&&(w0[0][0]="M"),tt[Cp]=w0,_t(),Le())}}function mt(w0,_0){if(w0===2){Cp=+_0.srcElement.getAttribute("data-i"),pt=+_0.srcElement.getAttribute("data-j");var ha=tt[Cp];!G(ha)&&!M(ha)&&ot()}}function It(w0){aa=[];for(var _0=0;_0<tt.length;_0++){var ha=tt[_0],Rp=G(ha),Gt=!Rp&&M(ha);aa[_0]=[];for(var Gp=ha.length,c0=0;c0<Gp;c0++)if(ha[c0][0]!=="Z"&&!(Gt&&c0!==F&&c0!==A&&c0!==O&&c0!==$)){var M0=Rp&&it.isActiveSelection,I0;M0&&(I0=Re(ha,c0));var k0=ha[c0][1],V0=ha[c0][2],$0=w0.append(M0?"rect":"circle").attr("data-i",_0).attr("data-j",c0).style({fill:C.background,stroke:C.defaultLine,"stroke-width":1,"shape-rendering":"crispEdges"});if(M0){var W0=I0[1]-k0,gm=I0[2]-V0,F0=gm?5:Math.max(Math.min(25,Math.abs(W0)-5),5),bm=W0?5:Math.max(Math.min(25,Math.abs(gm)-5),5);$0.classed(gm?"cursor-ew-resize":"cursor-ns-resize",!0).attr("width",F0).attr("height",bm).attr("x",k0-F0/2).attr("y",V0-bm/2).attr("transform",d(W0/2,gm/2))}else $0.classed("cursor-grab",!0).attr("r",5).attr("cx",k0).attr("cy",V0);aa[_0][c0]={element:$0.node(),gd:vt,prepFn:rt,doneFn:we,clickFn:mt},m.init(aa[_0][c0])}}}function Yt(w0,_0){if(tt.length)for(var ha=0;ha<tt.length;ha++)for(var Rp=0;Rp<tt[ha].length;Rp++)for(var Gt=0;Gt+2<tt[ha][Rp].length;Gt+=2)tt[ha][Rp][Gt+1]=gt[ha][Rp][Gt+1]+w0,tt[ha][Rp][Gt+2]=gt[ha][Rp][Gt+2]+_0}function Sr(w0,_0){Yt(w0,_0),_t()}function Op(w0){Cp=+w0.srcElement.getAttribute("data-i"),Cp||(Cp=0),ca[Cp].moveFn=Sr}function Hp(){Le()}function n0(w0){w0===2&&Q(vt)}function R0(){if(ca=[],!!tt.length){var w0=0;ca[w0]={element:ht[0][0],gd:vt,prepFn:Op,doneFn:Hp,clickFn:n0},m.init(ca[w0])}}};function Ze(xt,tt){for(var ht=0;ht<tt.length;ht++){var it=tt[ht];xt[ht]=[];for(var ut=0;ut<it.length;ut++){xt[ht][ut]=[];for(var vt=0;vt<it[ut].length;vt++)xt[ht][ut][vt]=it[ut][vt]}}return xt}function Re(xt,tt){var ht=xt[tt][1],it=xt[tt][2],ut=xt.length,vt,_t,Le;return vt=(tt+1)%ut,_t=xt[vt][1],Le=xt[vt][2],_t===ht&&Le===it&&(vt=(tt+2)%ut,_t=xt[vt][1],Le=xt[vt][2]),[vt,_t,Le]}function Q(xt){if(w(xt._fullLayout.dragmode)){z(xt);var tt=xt._fullLayout._activeSelectionIndex,ht=(xt.layout||{}).selections||[];if(tt<ht.length){for(var it=[],ut=0;ut<ht.length;ut++)ut!==tt&&it.push(ht[ut]);delete xt._fullLayout._activeSelectionIndex;var vt=xt._fullLayout.selections[tt];xt._fullLayout._deselect={xref:vt.xref,yref:vt.yref},S.call("_guiRelayout",xt,{selections:it})}}}}),X0=r((nt,ke)=>{var _=o(),d=y1(),m=et(),E=Im(),b=Dv().readPaths,w=bt(),S=jp(),C=O1().clearOutlineControllers,p=Mn(),F=Q0(),A=Fm().arrayEditor,O=t1(),$=Y1(),j=ty(),z=Ue(),I=z.getPathString;ke.exports={draw:G,drawOne:B,eraseActiveShape:Q,drawLabel:S};function G(xt){var tt=xt._fullLayout;tt._shapeUpperLayer.selectAll("path").remove(),tt._shapeLowerLayer.selectAll("path").remove(),tt._shapeUpperLayer.selectAll("text").remove(),tt._shapeLowerLayer.selectAll("text").remove();for(var ht in tt._plots){var it=tt._plots[ht].shapelayer;it&&(it.selectAll("path").remove(),it.selectAll("text").remove())}for(var ut=0;ut<tt.shapes.length;ut++)tt.shapes[ut].visible===!0&&B(xt,ut)}function M(xt){return!!xt._fullLayout._outlining}function L(xt){return!xt._context.edits.shapePosition}function B(xt,tt){xt._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+tt+'"]').remove();var ht=z.makeShapesOptionsAndPlotinfo(xt,tt),it=ht.options,ut=ht.plotinfo;if(!it._input||it.visible!==!0)return;if(it.layer==="above")_t(xt._fullLayout._shapeUpperLayer);else if(it.xref==="paper"||it.yref==="paper")_t(xt._fullLayout._shapeLowerLayer);else if(it.layer==="between")_t(ut.shapelayerBetween);else if(ut._hadPlotinfo){var vt=ut.mainplotinfo||ut;_t(vt.shapelayer)}else _t(xt._fullLayout._shapeLowerLayer);function _t(Le){var wt=I(xt,it),St={"data-index":tt,"fill-rule":it.fillrule,d:wt},Ut=it.opacity,kt=it.fillcolor,jt=it.line.width?it.line.color:"rgba(0,0,0,0)",aa=it.line.width,ca=it.line.dash;!aa&&it.editable===!0&&(aa=5,ca="solid");var Cp=wt[wt.length-1]!=="Z",pt=L(xt)&&it.editable&&xt._fullLayout._activeShapeIndex===tt;pt&&(kt=Cp?"rgba(0,0,0,0)":xt._fullLayout.activeshape.fillcolor,Ut=xt._fullLayout.activeshape.opacity);var gt=Le.append("g").classed("shape-group",!0).attr({"data-index":tt}),te=gt.append("path").attr(St).style("opacity",Ut).call(p.stroke,jt).call(p.fill,kt).call(F.dashLine,ca,aa);X(gt,xt,it),S(xt,tt,it,gt);var Et;if((pt||xt._context.edits.shapePosition)&&(Et=A(xt.layout,"shapes",it)),pt){te.style({cursor:"move"});var zt={element:te.node(),plotinfo:ut,gd:xt,editHelpers:Et,hasText:it.label.text||it.label.texttemplate,isActiveShape:!0},rt=b(wt,xt);w(rt,te,zt)}else xt._context.edits.shapePosition?ee(xt,te,it,tt,Le,Et):it.editable===!0&&te.style("pointer-events",Cp||p.opacity(kt)*Ut<=.5?"stroke":"all");te.node().addEventListener("click",function(){return Ze(xt,te)})}}function X(xt,tt,ht){var it=(ht.xref+ht.yref).replace(/paper/g,"").replace(/[xyz][0-9]* *domain/g,"");F.setClipUrl(xt,it?"clip"+tt._fullLayout._uid+it:null,tt)}function ee(xt,tt,ht,it,ut,vt){var _t=10,Le=10,wt=ht.xsizemode==="pixel",St=ht.ysizemode==="pixel",Ut=ht.type==="line",kt=ht.type==="path",jt=vt.modifyItem,aa,ca,Cp,pt,gt,te,Et,zt,rt,Z,we,ot,mt,It,Yt,Sr=_.select(tt.node().parentNode),Op=E.getFromId(xt,ht.xref),Hp=E.getRefType(ht.xref),n0=E.getFromId(xt,ht.yref),R0=E.getRefType(ht.yref),w0=ht.x0shift,_0=ht.x1shift,ha=ht.y0shift,Rp=ht.y1shift,Gt=function(Wt,xn){var Fp=z.getDataToPixel(xt,Op,xn,!1,Hp);return Fp(Wt)},Gp=function(Wt,xn){var Fp=z.getDataToPixel(xt,n0,xn,!0,R0);return Fp(Wt)},c0=z.getPixelToData(xt,Op,!1,Hp),M0=z.getPixelToData(xt,n0,!0,R0),I0=$0(),k0={element:I0.node(),gd:xt,prepFn:F0,doneFn:bm,clickFn:Dm},V0;O.init(k0),I0.node().onmousemove=gm;function $0(){return Ut?W0():tt}function W0(){var Wt=10,xn=Math.max(ht.line.width,Wt),Fp=ut.append("g").attr("data-index",it).attr("drag-helper",!0);Fp.append("path").attr("d",tt.attr("d")).style({cursor:"move","stroke-width":xn,"stroke-opacity":"0"});var Bp={"fill-opacity":"0"},e0=Math.max(xn/2,Wt);return Fp.append("circle").attr({"data-line-point":"start-point",cx:wt?Gt(ht.xanchor)+ht.x0:Gt(ht.x0,w0),cy:St?Gp(ht.yanchor)-ht.y0:Gp(ht.y0,ha),r:e0}).style(Bp).classed("cursor-grab",!0),Fp.append("circle").attr({"data-line-point":"end-point",cx:wt?Gt(ht.xanchor)+ht.x1:Gt(ht.x1,_0),cy:St?Gp(ht.yanchor)-ht.y1:Gp(ht.y1,Rp),r:e0}).style(Bp).classed("cursor-grab",!0),Fp}function gm(Wt){if(M(xt)){V0=null;return}if(Ut)Wt.target.tagName==="path"?V0="move":V0=Wt.target.attributes["data-line-point"].value==="start-point"?"resize-over-start-point":"resize-over-end-point";else{var xn=k0.element.getBoundingClientRect(),Fp=xn.right-xn.left,Bp=xn.bottom-xn.top,e0=Wt.clientX-xn.left,o0=Wt.clientY-xn.top,C0=!kt&&Fp>_t&&Bp>Le&&!Wt.shiftKey?O.getCursor(e0/Fp,1-o0/Bp):"move";$(tt,C0),V0=C0.split("-")[0]}}function F0(Wt){M(xt)||(wt&&(gt=Gt(ht.xanchor)),St&&(te=Gp(ht.yanchor)),ht.type==="path"?Yt=ht.path:(aa=wt?ht.x0:Gt(ht.x0),ca=St?ht.y0:Gp(ht.y0),Cp=wt?ht.x1:Gt(ht.x1),pt=St?ht.y1:Gp(ht.y1)),aa<Cp?(rt=aa,mt="x0",Z=Cp,It="x1"):(rt=Cp,mt="x1",Z=aa,It="x0"),!St&&ca<pt||St&&ca>pt?(Et=ca,we="y0",zt=pt,ot="y1"):(Et=pt,we="y1",zt=ca,ot="y0"),gm(Wt),Yo(ut,ht),Mt(tt,ht,xt),k0.moveFn=V0==="move"?vm:km,k0.altKey=Wt.altKey)}function bm(){M(xt)||($(tt),qp(ut),X(tt,xt,ht),d.call("_guiRelayout",xt,vt.getUpdateObj()))}function Dm(){M(xt)||qp(ut)}function vm(Wt,xn){if(ht.type==="path"){var Fp=function(o0){return o0},Bp=Fp,e0=Fp;wt?jt("xanchor",ht.xanchor=c0(gt+Wt)):(Bp=function(o0){return c0(Gt(o0)+Wt)},Op&&Op.type==="date"&&(Bp=z.encodeDate(Bp))),St?jt("yanchor",ht.yanchor=M0(te+xn)):(e0=function(o0){return M0(Gp(o0)+xn)},n0&&n0.type==="date"&&(e0=z.encodeDate(e0))),jt("path",ht.path=yt(Yt,Bp,e0))}else wt?jt("xanchor",ht.xanchor=c0(gt+Wt)):(jt("x0",ht.x0=c0(aa+Wt)),jt("x1",ht.x1=c0(Cp+Wt))),St?jt("yanchor",ht.yanchor=M0(te+xn)):(jt("y0",ht.y0=M0(ca+xn)),jt("y1",ht.y1=M0(pt+xn)));tt.attr("d",I(xt,ht)),Yo(ut,ht),S(xt,it,ht,Sr)}function km(Wt,xn){if(kt){var Fp=function(zm){return zm},Bp=Fp,e0=Fp;wt?jt("xanchor",ht.xanchor=c0(gt+Wt)):(Bp=function(zm){return c0(Gt(zm)+Wt)},Op&&Op.type==="date"&&(Bp=z.encodeDate(Bp))),St?jt("yanchor",ht.yanchor=M0(te+xn)):(e0=function(zm){return M0(Gp(zm)+xn)},n0&&n0.type==="date"&&(e0=z.encodeDate(e0))),jt("path",ht.path=yt(Yt,Bp,e0))}else if(Ut){if(V0==="resize-over-start-point"){var o0=aa+Wt,C0=St?ca-xn:ca+xn;jt("x0",ht.x0=wt?o0:c0(o0)),jt("y0",ht.y0=St?C0:M0(C0))}else if(V0==="resize-over-end-point"){var T0=Cp+Wt,A0=St?pt-xn:pt+xn;jt("x1",ht.x1=wt?T0:c0(T0)),jt("y1",ht.y1=St?A0:M0(A0))}}else{var J0=function(zm){return V0.indexOf(zm)!==-1},em=J0("n"),tm=J0("s"),Nm=J0("w"),o1=J0("e"),N1=em?Et+xn:Et,F1=tm?zt+xn:zt,B1=Nm?rt+Wt:rt,u1=o1?Z+Wt:Z;St&&(em&&(N1=Et-xn),tm&&(F1=zt-xn)),(!St&&F1-N1>Le||St&&N1-F1>Le)&&(jt(we,ht[we]=St?N1:M0(N1)),jt(ot,ht[ot]=St?F1:M0(F1))),u1-B1>_t&&(jt(mt,ht[mt]=wt?B1:c0(B1)),jt(It,ht[It]=wt?u1:c0(u1)))}tt.attr("d",I(xt,ht)),Yo(ut,ht),S(xt,it,ht,Sr)}function Yo(Wt,xn){(wt||St)&&Fp();function Fp(){var Bp=xn.type!=="path",e0=Wt.selectAll(".visual-cue").data([0]),o0=1;e0.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":o0}).classed("visual-cue",!0);var C0=Gt(wt?xn.xanchor:m.midRange(Bp?[xn.x0,xn.x1]:z.extractPathCoords(xn.path,j.paramIsX))),T0=Gp(St?xn.yanchor:m.midRange(Bp?[xn.y0,xn.y1]:z.extractPathCoords(xn.path,j.paramIsY)));if(C0=z.roundPositionForSharpStrokeRendering(C0,o0),T0=z.roundPositionForSharpStrokeRendering(T0,o0),wt&&St){var A0="M"+(C0-1-o0)+","+(T0-1-o0)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z";e0.attr("d",A0)}else if(wt){var J0="M"+(C0-1-o0)+","+(T0-9-o0)+"v18 h2 v-18 Z";e0.attr("d",J0)}else{var em="M"+(C0-9-o0)+","+(T0-1-o0)+"h18 v2 h-18 Z";e0.attr("d",em)}}}function qp(Wt){Wt.selectAll(".visual-cue").remove()}function Mt(Wt,xn,Fp){var Bp=xn.xref,e0=xn.yref,o0=E.getFromId(Fp,Bp),C0=E.getFromId(Fp,e0),T0="";Bp!=="paper"&&!o0.autorange&&(T0+=Bp),e0!=="paper"&&!C0.autorange&&(T0+=e0),F.setClipUrl(Wt,T0?"clip"+Fp._fullLayout._uid+T0:null,Fp)}}function yt(xt,tt,ht){return xt.replace(j.segmentRE,function(it){var ut=0,vt=it.charAt(0),_t=j.paramIsX[vt],Le=j.paramIsY[vt],wt=j.numParams[vt],St=it.substr(1).replace(j.paramRE,function(Ut){return ut>=wt||(_t[ut]?Ut=tt(Ut):Le[ut]&&(Ut=ht(Ut)),ut++),Ut});return vt+St})}function Ze(xt,tt){if(L(xt)){var ht=tt.node(),it=+ht.getAttribute("data-index");if(it>=0){if(it===xt._fullLayout._activeShapeIndex){Re(xt);return}xt._fullLayout._activeShapeIndex=it,xt._fullLayout._deactivateShape=Re,G(xt)}}}function Re(xt){if(L(xt)){var tt=xt._fullLayout._activeShapeIndex;tt>=0&&(C(xt),delete xt._fullLayout._activeShapeIndex,G(xt))}}function Q(xt){if(L(xt)){C(xt);var tt=xt._fullLayout._activeShapeIndex,ht=(xt.layout||{}).shapes||[];if(tt<ht.length){for(var it=[],ut=0;ut<ht.length;ut++)ut!==tt&&it.push(ht[ut]);return delete xt._fullLayout._activeShapeIndex,d.call("_guiRelayout",xt,{shapes:it})}}}}),G0=r((nt,ke)=>{var _=y1(),d=cg(),m=D1(),E=Ly(),b=X0().eraseActiveShape,w=et(),S=w._,C=ke.exports={};C.toImage={name:"toImage",title:function(ee){var yt=ee._context.toImageButtonOptions||{},Ze=yt.format||"png";return Ze==="png"?S(ee,"Download plot as a PNG"):S(ee,"Download plot")},icon:E.camera,click:function(ee){var yt=ee._context.toImageButtonOptions,Ze={format:yt.format||"png"};w.notifier(S(ee,"Taking snapshot - this may take a few seconds"),"long"),["filename","width","height","scale"].forEach(function(Re){Re in yt&&(Ze[Re]=yt[Re])}),_.call("downloadImage",ee,Ze).then(function(Re){w.notifier(S(ee,"Snapshot succeeded")+" - "+Re,"long")}).catch(function(){w.notifier(S(ee,"Sorry, there was a problem downloading your snapshot!"),"long")})}},C.sendDataToCloud={name:"sendDataToCloud",title:function(ee){return S(ee,"Edit in Chart Studio")},icon:E.disk,click:function(ee){d.sendDataToCloud(ee)}},C.editInChartStudio={name:"editInChartStudio",title:function(ee){return S(ee,"Edit in Chart Studio")},icon:E.pencil,click:function(ee){d.sendDataToCloud(ee)}},C.zoom2d={name:"zoom2d",_cat:"zoom",title:function(ee){return S(ee,"Zoom")},attr:"dragmode",val:"zoom",icon:E.zoombox,click:p},C.pan2d={name:"pan2d",_cat:"pan",title:function(ee){return S(ee,"Pan")},attr:"dragmode",val:"pan",icon:E.pan,click:p},C.select2d={name:"select2d",_cat:"select",title:function(ee){return S(ee,"Box Select")},attr:"dragmode",val:"select",icon:E.selectbox,click:p},C.lasso2d={name:"lasso2d",_cat:"lasso",title:function(ee){return S(ee,"Lasso Select")},attr:"dragmode",val:"lasso",icon:E.lasso,click:p},C.drawclosedpath={name:"drawclosedpath",title:function(ee){return S(ee,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:E.drawclosedpath,click:p},C.drawopenpath={name:"drawopenpath",title:function(ee){return S(ee,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:E.drawopenpath,click:p},C.drawline={name:"drawline",title:function(ee){return S(ee,"Draw line")},attr:"dragmode",val:"drawline",icon:E.drawline,click:p},C.drawrect={name:"drawrect",title:function(ee){return S(ee,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:E.drawrect,click:p},C.drawcircle={name:"drawcircle",title:function(ee){return S(ee,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:E.drawcircle,click:p},C.eraseshape={name:"eraseshape",title:function(ee){return S(ee,"Erase active shape")},icon:E.eraseshape,click:b},C.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(ee){return S(ee,"Zoom in")},attr:"zoom",val:"in",icon:E.zoom_plus,click:p},C.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(ee){return S(ee,"Zoom out")},attr:"zoom",val:"out",icon:E.zoom_minus,click:p},C.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(ee){return S(ee,"Autoscale")},attr:"zoom",val:"auto",icon:E.autoscale,click:p},C.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(ee){return S(ee,"Reset axes")},attr:"zoom",val:"reset",icon:E.home,click:p},C.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(ee){return S(ee,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:E.tooltip_basic,gravity:"ne",click:p},C.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(ee){return S(ee,"Compare data on hover")},attr:"hovermode",val:function(ee){return ee._fullLayout._isHoriz?"y":"x"},icon:E.tooltip_compare,gravity:"ne",click:p};function p(ee,yt){var Ze=yt.currentTarget,Re=Ze.getAttribute("data-attr"),Q=Ze.getAttribute("data-val")||!0,xt=ee._fullLayout,tt={},ht=m.list(ee,null,!0),it=xt._cartesianSpikesEnabled,ut,vt;if(Re==="zoom"){var _t=Q==="in"?.5:2,Le=(1+_t)/2,wt=(1-_t)/2,St,Ut;for(vt=0;vt<ht.length;vt++)if(ut=ht[vt],Ut=ut.modebardisable==="none"||ut.modebardisable.indexOf(Q==="auto"||Q==="reset"?"autoscale":"zoominout")===-1,Ut&&!ut.fixedrange)if(St=ut._name,Q==="auto")tt[St+".autorange"]=!0;else if(Q==="reset")ut._rangeInitial0===void 0&&ut._rangeInitial1===void 0?tt[St+".autorange"]=!0:ut._rangeInitial0===void 0?(tt[St+".autorange"]=ut._autorangeInitial,tt[St+".range"]=[null,ut._rangeInitial1]):ut._rangeInitial1===void 0?(tt[St+".range"]=[ut._rangeInitial0,null],tt[St+".autorange"]=ut._autorangeInitial):tt[St+".range"]=[ut._rangeInitial0,ut._rangeInitial1],ut._showSpikeInitial!==void 0&&(tt[St+".showspikes"]=ut._showSpikeInitial,it==="on"&&!ut._showSpikeInitial&&(it="off"));else{var kt=[ut.r2l(ut.range[0]),ut.r2l(ut.range[1])],jt=[Le*kt[0]+wt*kt[1],Le*kt[1]+wt*kt[0]];tt[St+".range[0]"]=ut.l2r(jt[0]),tt[St+".range[1]"]=ut.l2r(jt[1])}}else Re==="hovermode"&&(Q==="x"||Q==="y")&&(Q=xt._isHoriz?"y":"x",Ze.setAttribute("data-val",Q)),tt[Re]=Q;xt._cartesianSpikesEnabled=it,_.call("_guiRelayout",ee,tt)}C.zoom3d={name:"zoom3d",_cat:"zoom",title:function(ee){return S(ee,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:E.zoombox,click:F},C.pan3d={name:"pan3d",_cat:"pan",title:function(ee){return S(ee,"Pan")},attr:"scene.dragmode",val:"pan",icon:E.pan,click:F},C.orbitRotation={name:"orbitRotation",title:function(ee){return S(ee,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:E["3d_rotate"],click:F},C.tableRotation={name:"tableRotation",title:function(ee){return S(ee,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:E["z-axis"],click:F};function F(ee,yt){for(var Ze=yt.currentTarget,Re=Ze.getAttribute("data-attr"),Q=Ze.getAttribute("data-val")||!0,xt=ee._fullLayout._subplots.gl3d||[],tt={},ht=Re.split("."),it=0;it<xt.length;it++)tt[xt[it]+"."+ht[1]]=Q;var ut=Q==="pan"?Q:"zoom";tt.dragmode=ut,_.call("_guiRelayout",ee,tt)}C.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(ee){return S(ee,"Reset camera to default")},attr:"resetDefault",icon:E.home,click:A},C.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(ee){return S(ee,"Reset camera to last save")},attr:"resetLastSave",icon:E.movie,click:A};function A(ee,yt){for(var Ze=yt.currentTarget,Re=Ze.getAttribute("data-attr"),Q=Re==="resetLastSave",xt=Re==="resetDefault",tt=ee._fullLayout,ht=tt._subplots.gl3d||[],it={},ut=0;ut<ht.length;ut++){var vt=ht[ut],_t=vt+".camera",Le=vt+".aspectratio",wt=vt+".aspectmode",St=tt[vt]._scene,Ut;Q?(it[_t+".up"]=St.viewInitial.up,it[_t+".eye"]=St.viewInitial.eye,it[_t+".center"]=St.viewInitial.center,Ut=!0):xt&&(it[_t+".up"]=null,it[_t+".eye"]=null,it[_t+".center"]=null,Ut=!0),Ut&&(it[Le+".x"]=St.viewInitial.aspectratio.x,it[Le+".y"]=St.viewInitial.aspectratio.y,it[Le+".z"]=St.viewInitial.aspectratio.z,it[wt]=St.viewInitial.aspectmode)}_.call("_guiRelayout",ee,it)}C.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(ee){return S(ee,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:E.tooltip_basic,gravity:"ne",click:$};function O(ee,yt){var Ze=yt.currentTarget,Re=Ze._previousVal,Q=ee._fullLayout,xt=Q._subplots.gl3d||[],tt=["xaxis","yaxis","zaxis"],ht={},it={};if(Re)it=Re,Ze._previousVal=null;else{for(var ut=0;ut<xt.length;ut++){var vt=xt[ut],_t=Q[vt],Le=vt+".hovermode";ht[Le]=_t.hovermode,it[Le]=!1;for(var wt=0;wt<3;wt++){var St=tt[wt],Ut=vt+"."+St+".showspikes";it[Ut]=!1,ht[Ut]=_t[St].showspikes}}Ze._previousVal=ht}return it}function $(ee,yt){var Ze=O(ee,yt);_.call("_guiRelayout",ee,Ze)}C.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(ee){return S(ee,"Zoom in")},attr:"zoom",val:"in",icon:E.zoom_plus,click:j},C.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(ee){return S(ee,"Zoom out")},attr:"zoom",val:"out",icon:E.zoom_minus,click:j},C.resetGeo={name:"resetGeo",_cat:"reset",title:function(ee){return S(ee,"Reset")},attr:"reset",val:null,icon:E.autoscale,click:j},C.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(ee){return S(ee,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:E.tooltip_basic,gravity:"ne",click:I};function j(ee,yt){for(var Ze=yt.currentTarget,Re=Ze.getAttribute("data-attr"),Q=Ze.getAttribute("data-val")||!0,xt=ee._fullLayout,tt=xt._subplots.geo||[],ht=0;ht<tt.length;ht++){var it=tt[ht],ut=xt[it];if(Re==="zoom"){var vt=ut.projection.scale,_t=Q==="in"?2*vt:.5*vt;_.call("_guiRelayout",ee,it+".projection.scale",_t)}}Re==="reset"&&X(ee,"geo")}C.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(ee){return S(ee,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:E.tooltip_basic,gravity:"ne",click:I};function z(ee){var yt=ee._fullLayout;return yt.hovermode?!1:yt._has("cartesian")?yt._isHoriz?"y":"x":"closest"}function I(ee){var yt=z(ee);_.call("_guiRelayout",ee,"hovermode",yt)}C.resetViewSankey={name:"resetSankeyGroup",title:function(ee){return S(ee,"Reset view")},icon:E.home,click:function(ee){for(var yt={"node.groups":[],"node.x":[],"node.y":[]},Ze=0;Ze<ee._fullData.length;Ze++){var Re=ee._fullData[Ze]._viewInitial;yt["node.groups"].push(Re.node.groups.slice()),yt["node.x"].push(Re.node.x.slice()),yt["node.y"].push(Re.node.y.slice())}_.call("restyle",ee,yt)}},C.toggleHover={name:"toggleHover",title:function(ee){return S(ee,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:E.tooltip_basic,gravity:"ne",click:function(ee,yt){var Ze=O(ee,yt);Ze.hovermode=z(ee),_.call("_guiRelayout",ee,Ze)}},C.resetViews={name:"resetViews",title:function(ee){return S(ee,"Reset views")},icon:E.home,click:function(ee,yt){var Ze=yt.currentTarget;Ze.setAttribute("data-attr","zoom"),Ze.setAttribute("data-val","reset"),p(ee,yt),Ze.setAttribute("data-attr","resetLastSave"),A(ee,yt),X(ee,"geo"),X(ee,"mapbox"),X(ee,"map")}},C.toggleSpikelines={name:"toggleSpikelines",title:function(ee){return S(ee,"Toggle Spike Lines")},icon:E.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(ee){var yt=ee._fullLayout,Ze=yt._cartesianSpikesEnabled;yt._cartesianSpikesEnabled=Ze==="on"?"off":"on",_.call("_guiRelayout",ee,G(ee))}};function G(ee){for(var yt=ee._fullLayout,Ze=yt._cartesianSpikesEnabled==="on",Re=m.list(ee,null,!0),Q={},xt=0;xt<Re.length;xt++){var tt=Re[xt];Q[tt._name+".showspikes"]=Ze?!0:tt._showSpikeInitial}return Q}C.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(ee){return S(ee,"Reset view")},attr:"reset",icon:E.home,click:function(ee){X(ee,"mapbox")}},C.resetViewMap={name:"resetViewMap",_cat:"resetView",title:function(ee){return S(ee,"Reset view")},attr:"reset",icon:E.home,click:function(ee){X(ee,"map")}},C.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(ee){return S(ee,"Zoom in")},attr:"zoom",val:"in",icon:E.zoom_plus,click:M},C.zoomInMap={name:"zoomInMap",_cat:"zoomin",title:function(ee){return S(ee,"Zoom in")},attr:"zoom",val:"in",icon:E.zoom_plus,click:L},C.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(ee){return S(ee,"Zoom out")},attr:"zoom",val:"out",icon:E.zoom_minus,click:M},C.zoomOutMap={name:"zoomOutMap",_cat:"zoomout",title:function(ee){return S(ee,"Zoom out")},attr:"zoom",val:"out",icon:E.zoom_minus,click:L};function M(ee,yt){B(ee,yt,"mapbox")}function L(ee,yt){B(ee,yt,"map")}function B(ee,yt,Ze){for(var Re=yt.currentTarget,Q=Re.getAttribute("data-val"),xt=ee._fullLayout,tt=xt._subplots[Ze]||[],ht=1.05,it={},ut=0;ut<tt.length;ut++){var vt=tt[ut],_t=xt[vt].zoom,Le=Q==="in"?ht*_t:_t/ht;it[vt+".zoom"]=Le}_.call("_guiRelayout",ee,it)}function X(ee,yt){for(var Ze=ee._fullLayout,Re=Ze._subplots[yt]||[],Q={},xt=0;xt<Re.length;xt++)for(var tt=Re[xt],ht=Ze[tt]._subplot,it=ht.viewInitial,ut=Object.keys(it),vt=0;vt<ut.length;vt++){var _t=ut[vt];Q[tt+"."+_t]=it[_t]}_.call("_guiRelayout",ee,Q)}}),j0=r((nt,ke)=>{var _=G0(),d=Object.keys(_),m=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],E=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(m),b=[],w=function(S){if(E.indexOf(S._cat||S.name)===-1){var C=S.name,p=(S._cat||S.name).toLowerCase();b.indexOf(C)===-1&&b.push(C),b.indexOf(p)===-1&&b.push(p)}};d.forEach(function(S){w(_[S])}),b.sort(),ke.exports={DRAW_MODES:m,backButtons:E,foreButtons:b}}),Ym=r((nt,ke)=>{j0(),ke.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"}}}),xm=r((nt,ke)=>{var _=et(),d=Mn(),m=Fm(),E=Ym();ke.exports=function(b,w){var S=b.modebar||{},C=m.newContainer(w,"modebar");function p(A,O){return _.coerce(S,C,E,A,O)}p("orientation"),p("bgcolor",d.addOpacity(w.paper_bgcolor,.5));var F=d.contrast(d.rgb(w.modebar.bgcolor));p("color",d.addOpacity(F,.3)),p("activecolor",d.addOpacity(F,.7)),p("uirevision",w.uirevision),p("add"),p("remove")}}),V1=r((nt,ke)=>{var _=o(),d=v(),m=et(),E=Ly(),b=n().version,w=new DOMParser;function S(A){this.container=A.container,this.element=document.createElement("div"),this.update(A.graphInfo,A.buttons),this.container.appendChild(this.element)}var C=S.prototype;C.update=function(A,O){this.graphInfo=A;var $=this.graphInfo._context,j=this.graphInfo._fullLayout,z="modebar-"+j._uid;this.element.setAttribute("id",z),this.element.setAttribute("role","toolbar"),this._uid=z,this.element.className="modebar modebar--custom",$.displayModeBar==="hover"&&(this.element.className+=" modebar--hover ease-bg"),j.modebar.orientation==="v"&&(this.element.className+=" vertical",O=O.reverse());var I=j.modebar,G="#"+z+" .modebar-group";document.querySelectorAll(G).forEach(function(ee){ee.style.backgroundColor=I.bgcolor});var M=!this.hasButtons(O),L=this.hasLogo!==$.displaylogo,B=this.locale!==$.locale;if(this.locale=$.locale,(M||L||B)&&(this.removeAllButtons(),this.updateButtons(O),$.watermark||$.displaylogo)){var X=this.getLogo();$.watermark&&(X.className=X.className+" watermark"),j.modebar.orientation==="v"?this.element.insertBefore(X,this.element.childNodes[0]):this.element.appendChild(X),this.hasLogo=!0}this.updateActiveButton(),m.setStyleOnHover("#"+z+" .modebar-btn",".active",".icon path","fill: "+I.activecolor,"fill: "+I.color,this.element)},C.updateButtons=function(A){var O=this;this.buttons=A,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function($){var j=O.createGroup();$.forEach(function(z){var I=z.name;if(!I)throw new Error("must provide button 'name' in button config");if(O.buttonsNames.indexOf(I)!==-1)throw new Error("button name '"+I+"' is taken");O.buttonsNames.push(I);var G=O.createButton(z);O.buttonElements.push(G),j.appendChild(G)}),O.element.appendChild(j)})},C.createGroup=function(){var A=document.createElement("div");A.className="modebar-group";var O=this.graphInfo._fullLayout.modebar;return A.style.backgroundColor=O.bgcolor,A},C.createButton=function(A){var O=this,$=document.createElement("button");$.setAttribute("type","button"),$.setAttribute("rel","tooltip"),$.className="modebar-btn";var j=A.title;j===void 0?j=A.name:typeof j=="function"&&(j=j(this.graphInfo)),(j||j===0)&&($.setAttribute("data-title",j),$.setAttribute("aria-label",j)),A.attr!==void 0&&$.setAttribute("data-attr",A.attr);var z=A.val;z!==void 0&&(typeof z=="function"&&(z=z(this.graphInfo)),$.setAttribute("data-val",z));var I=A.click;if(typeof I!="function")throw new Error("must provide button 'click' function in button config");$.addEventListener("click",function(M){A.click(O.graphInfo,M),O.updateActiveButton(M.currentTarget)}),$.setAttribute("data-toggle",A.toggle||!1),A.toggle&&_.select($).classed("active",!0);var G=A.icon;return typeof G=="function"?$.appendChild(G()):$.appendChild(this.createIcon(G||E.question)),$.setAttribute("data-gravity",A.gravity||"n"),$},C.createIcon=function(A){var O=d(A.height)?Number(A.height):A.ascent-A.descent,$="http://www.w3.org/2000/svg",j;if(A.path){j=document.createElementNS($,"svg"),j.setAttribute("viewBox",[0,0,A.width,O].join(" ")),j.setAttribute("class","icon");var z=document.createElementNS($,"path");z.setAttribute("d",A.path),A.transform?z.setAttribute("transform",A.transform):A.ascent!==void 0&&z.setAttribute("transform","matrix(1 0 0 -1 0 "+A.ascent+")"),j.appendChild(z)}if(A.svg){var I=w.parseFromString(A.svg,"application/xml");j=I.childNodes[0]}return j.setAttribute("height","1em"),j.setAttribute("width","1em"),j},C.updateActiveButton=function(A){var O=this.graphInfo._fullLayout,$=A!==void 0?A.getAttribute("data-attr"):null;this.buttonElements.forEach(function(j){var z=j.getAttribute("data-val")||!0,I=j.getAttribute("data-attr"),G=j.getAttribute("data-toggle")==="true",M=_.select(j),L=function(ee,yt){var Ze=O.modebar,Re=ee.querySelector(".icon path");Re&&(yt||ee.matches(":hover")?Re.style.fill=Ze.activecolor:Re.style.fill=Ze.color)};if(G){if(I===$){var B=!M.classed("active");M.classed("active",B),L(j,B)}}else{var X=I===null?I:m.nestedProperty(O,I).get();M.classed("active",X===z),L(j,X===z)}})},C.hasButtons=function(A){var O=this.buttons;if(!O||A.length!==O.length)return!1;for(var $=0;$<A.length;++$){if(A[$].length!==O[$].length)return!1;for(var j=0;j<A[$].length;j++)if(A[$][j].name!==O[$][j].name)return!1}return!0};function p(A){return A+" (v"+b+")"}C.getLogo=function(){var A=this.createGroup(),O=document.createElement("a");return O.href="https://plotly.com/",O.target="_blank",O.setAttribute("data-title",p(m._(this.graphInfo,"Produced with Plotly.js"))),O.className="modebar-btn plotlyjsicon modebar-btn--logo",O.appendChild(this.createIcon(E.newplotlylogo)),A.appendChild(O),A},C.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},C.destroy=function(){m.removeElement(this.container.querySelector(".modebar"))};function F(A,O){var $=A._fullLayout,j=new S({graphInfo:A,container:$._modebardiv.node(),buttons:O});return $._privateplot&&_.select(j.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),j}ke.exports=F}),Em=r((nt,ke)=>{var _=D1(),d=Kp(),m=y1(),E=D0().isUnifiedHover,b=V1(),w=G0(),S=j0().DRAW_MODES,C=et().extendDeep;ke.exports=function(z){var I=z._fullLayout,G=z._context,M=I._modeBar;if(!G.displayModeBar&&!G.watermark){M&&(M.destroy(),delete I._modeBar);return}if(!Array.isArray(G.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(G.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var L=G.modeBarButtons,B;Array.isArray(L)&&L.length?B=j(L):!G.displayModeBar&&G.watermark?B=[]:B=p(z),M?M.update(z,B):I._modeBar=b(z,B)};function p(z){var I=z._fullLayout,G=z._fullData,M=z._context;function L(Z,we){if(typeof we=="string"){if(we.toLowerCase()===Z.toLowerCase())return!0}else{var ot=we.name,mt=we._cat||we.name;if(ot===Z||mt===Z.toLowerCase())return!0}return!1}var B=I.modebar.add;typeof B=="string"&&(B=[B]);var X=I.modebar.remove;typeof X=="string"&&(X=[X]);var ee=M.modeBarButtonsToAdd.concat(B.filter(function(Z){for(var we=0;we<M.modeBarButtonsToRemove.length;we++)if(L(Z,M.modeBarButtonsToRemove[we]))return!1;return!0})),yt=M.modeBarButtonsToRemove.concat(X.filter(function(Z){for(var we=0;we<M.modeBarButtonsToAdd.length;we++)if(L(Z,M.modeBarButtonsToAdd[we]))return!1;return!0})),Ze=I._has("cartesian"),Re=I._has("gl3d"),Q=I._has("geo"),xt=I._has("pie"),tt=I._has("funnelarea"),ht=I._has("ternary"),it=I._has("mapbox"),ut=I._has("map"),vt=I._has("polar"),_t=I._has("smith"),Le=I._has("sankey"),wt=F(I),St=E(I.hovermode),Ut=[];function kt(Z){if(Z.length){for(var we=[],ot=0;ot<Z.length;ot++){for(var mt=Z[ot],It=w[mt],Yt=It.name.toLowerCase(),Sr=(It._cat||It.name).toLowerCase(),Op=!1,Hp=0;Hp<yt.length;Hp++){var n0=yt[Hp].toLowerCase();if(n0===Yt||n0===Sr){Op=!0;break}}Op||we.push(w[mt])}Ut.push(we)}}var jt=["toImage"];M.showEditInChartStudio?jt.push("editInChartStudio"):M.showSendToCloud&&jt.push("sendDataToCloud"),kt(jt);var aa=[],ca=[],Cp=[],pt=[];(Ze||xt||tt||ht)+Q+Re+it+ut+vt+_t>1?(ca=["toggleHover"],Cp=["resetViews"]):Q?(aa=["zoomInGeo","zoomOutGeo"],ca=["hoverClosestGeo"],Cp=["resetGeo"]):Re?(ca=["hoverClosest3d"],Cp=["resetCameraDefault3d","resetCameraLastSave3d"]):it?(aa=["zoomInMapbox","zoomOutMapbox"],ca=["toggleHover"],Cp=["resetViewMapbox"]):ut?(aa=["zoomInMap","zoomOutMap"],ca=["toggleHover"],Cp=["resetViewMap"]):xt?ca=["hoverClosestPie"]:Le?(ca=["hoverClosestCartesian","hoverCompareCartesian"],Cp=["resetViewSankey"]):ca=["toggleHover"],Ze&&ca.push("toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"),(O(G)||St)&&(ca=[]),Ze&&!wt&&(aa=["zoomIn2d","zoomOut2d","autoScale2d"],Cp[0]!=="resetViews"&&(Cp=["resetScale2d"])),Re?pt=["zoom3d","pan3d","orbitRotation","tableRotation"]:Ze&&!wt||ht?pt=["zoom2d","pan2d"]:it||ut||Q?pt=["pan2d"]:vt&&(pt=["zoom2d"]),A(G)&&pt.push("select2d","lasso2d");var gt=[],te=function(Z){gt.indexOf(Z)===-1&&ca.indexOf(Z)!==-1&&gt.push(Z)};if(Array.isArray(ee)){for(var Et=[],zt=0;zt<ee.length;zt++){var rt=ee[zt];typeof rt=="string"?(rt=rt.toLowerCase(),S.indexOf(rt)!==-1?(I._has("mapbox")||I._has("map")||I._has("cartesian"))&&pt.push(rt):rt==="togglespikelines"?te("toggleSpikelines"):rt==="togglehover"?te("toggleHover"):rt==="hovercompare"?te("hoverCompareCartesian"):rt==="hoverclosest"?(te("hoverClosestCartesian"),te("hoverClosestGeo"),te("hoverClosest3d"),te("hoverClosestPie")):rt==="v1hovermode"&&(te("hoverClosestCartesian"),te("hoverCompareCartesian"),te("hoverClosestGeo"),te("hoverClosest3d"),te("hoverClosestPie"))):Et.push(rt)}ee=Et}return kt(pt),kt(aa.concat(Cp)),kt(gt),$(Ut,ee)}function F(z){for(var I=_.list({_fullLayout:z},null,!0),G=0;G<I.length;G++){var M=I[G].modebardisable;if(!I[G].fixedrange&&M!=="autoscale+zoominout"&&M!=="zoominout+autoscale")return!1}return!0}function A(z){for(var I=!1,G=0;G<z.length&&!I;G++){var M=z[G];!M._module||!M._module.selectPoints||(m.traceIs(M,"scatter-like")?(d.hasMarkers(M)||d.hasText(M))&&(I=!0):m.traceIs(M,"box-violin")?(M.boxpoints==="all"||M.points==="all")&&(I=!0):I=!0)}return I}function O(z){for(var I=0;I<z.length;I++)if(!m.traceIs(z[I],"noHover"))return!1;return!0}function $(z,I){if(I.length)if(Array.isArray(I[0]))for(var G=0;G<I.length;G++)z.push(I[G]);else z.push(I);return z}function j(z){for(var I=C([],z),G=0;G<I.length;G++)for(var M=I[G],L=0;L<M.length;L++){var B=M[L];if(typeof B=="string")if(w[B]!==void 0)I[G][L]=w[B];else throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "))}return I}}),Zm=r((nt,ke)=>{ke.exports={moduleType:"component",name:"modebar",layoutAttributes:Ym(),supplyLayoutDefaults:xm(),manage:Em()}}),qg=r((nt,ke)=>{var _=K1().FROM_BL;ke.exports=function(d,m,E){E===void 0&&(E=_[d.constraintoward||"center"]);var b=[d.r2l(d.range[0]),d.r2l(d.range[1])],w=b[0]+(b[1]-b[0])*E;d.range=d._input.range=[d.l2r(w+(b[0]-w)*m),d.l2r(w+(b[1]-w)*m)],d.setScale()}}),Sg=r(nt=>{var ke=et(),_=Bm(),d=D1().id2name,m=d0(),E=qg(),b=hm(),w=g().ALMOST_EQUAL,S=K1().FROM_BL;nt.handleDefaults=function(z,I,G){var M=G.axIds,L=G.axHasImage,B=I._axisConstraintGroups=[],X=I._axisMatchGroups=[],ee,yt,Ze,Re,Q,xt,tt,ht;for(ee=0;ee<M.length;ee++)Re=d(M[ee]),Q=z[Re],xt=I[Re],C(Q,xt,{axIds:M,layoutOut:I,hasImage:L[Re]});function it(jt,aa){for(ee=0;ee<jt.length;ee++){yt=jt[ee];for(Ze in yt)I[d(Ze)][aa]=yt}}for(it(X,"_matchGroup"),ee=0;ee<B.length;ee++){yt=B[ee];for(Ze in yt)if(xt=I[d(Ze)],xt.fixedrange){for(var ut in yt){var vt=d(ut);(z[vt]||{}).fixedrange===!1&&ke.warn("fixedrange was specified as false for axis "+vt+" but was overridden because another axis in its constraint group has fixedrange true"),I[vt].fixedrange=!0}break}}for(ee=0;ee<B.length;){yt=B[ee];for(Ze in yt){xt=I[d(Ze)],xt._matchGroup&&Object.keys(xt._matchGroup).length===Object.keys(yt).length&&(B.splice(ee,1),ee--);break}ee++}it(B,"_constraintGroup");var _t=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],Le=!1,wt=!1;function St(){ht=xt[tt],tt==="rangebreaks"&&(wt=xt._hasDayOfWeekBreaks)}for(ee=0;ee<X.length;ee++){yt=X[ee];for(var Ut=0;Ut<_t.length;Ut++){tt=_t[Ut],ht=null;var kt;for(Ze in yt)if(Re=d(Ze),Q=z[Re],xt=I[Re],tt in xt){if(!xt.matches&&(kt=xt,tt in Q)){St();break}ht===null&&tt in Q&&St()}if(tt==="range"&&ht&&Q.range&&Q.range.length===2&&Q.range[0]!==null&&Q.range[1]!==null&&(Le=!0),tt==="autorange"&&ht===null&&Le&&(ht=!1),ht===null&&tt in kt&&(ht=kt[tt]),ht!==null)for(Ze in yt)xt=I[d(Ze)],xt[tt]=tt==="range"?ht.slice():ht,tt==="rangebreaks"&&(xt._hasDayOfWeekBreaks=wt,b(xt,I))}}};function C(z,I,G){var M=G.axIds,L=G.layoutOut,B=G.hasImage,X=L._axisConstraintGroups,ee=L._axisMatchGroups,yt=I._id,Ze=yt.charAt(0),Re=((L._splomAxes||{})[Ze]||{})[yt]||{},Q=I._id,xt=Q.charAt(0)==="x";I._matchGroup=null,I._constraintGroup=null;function tt(pt,gt){return ke.coerce(z,I,m,pt,gt)}tt("constrain",B?"domain":"range"),ke.coerce(z,I,{constraintoward:{valType:"enumerated",values:xt?["left","center","right"]:["bottom","middle","top"],dflt:xt?"center":"middle"}},"constraintoward");var ht=I.type,it,ut,vt=[];for(it=0;it<M.length;it++)if(ut=M[it],ut!==Q){var _t=L[d(ut)];_t.type===ht&&vt.push(ut)}var Le=F(X,Q);if(Le){var wt=[];for(it=0;it<vt.length;it++)ut=vt[it],Le[ut]||wt.push(ut);vt=wt}var St=vt.length,Ut,kt;St&&(z.matches||Re.matches)&&(Ut=ke.coerce(z,I,{matches:{valType:"enumerated",values:vt,dflt:vt.indexOf(Re.matches)!==-1?Re.matches:void 0}},"matches"));var jt=B&&!xt?I.anchor:void 0;if(St&&!Ut&&(z.scaleanchor||jt)&&(kt=ke.coerce(z,I,{scaleanchor:{valType:"enumerated",values:vt.concat([!1])}},"scaleanchor",jt)),Ut){I._matchGroup=A(ee,Q,Ut,1);var aa=L[d(Ut)],ca=p(L,I)/p(L,aa);xt!==(Ut.charAt(0)==="x")&&(ca=(xt?"x":"y")+ca),A(X,Q,Ut,ca)}else z.matches&&M.indexOf(z.matches)!==-1&&ke.warn("ignored "+I._name+'.matches: "'+z.matches+'" to avoid an infinite loop');if(kt){var Cp=tt("scaleratio");Cp||(Cp=I.scaleratio=1),A(X,Q,kt,Cp)}else z.scaleanchor&&M.indexOf(z.scaleanchor)!==-1&&ke.warn("ignored "+I._name+'.scaleanchor: "'+z.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function p(z,I){var G=I.domain;return G||(G=z[d(I.overlaying)].domain),G[1]-G[0]}function F(z,I){for(var G=0;G<z.length;G++)if(z[G][I])return z[G];return null}function A(z,I,G,M){var L,B,X,ee,yt,Ze=F(z,I);Ze===null?(Ze={},Ze[I]=1,yt=z.length,z.push(Ze)):yt=z.indexOf(Ze);var Re=Object.keys(Ze);for(L=0;L<z.length;L++)if(X=z[L],L!==yt&&X[G]){var Q=X[G];for(B=0;B<Re.length;B++)ee=Re[B],X[ee]=O(Q,O(M,Ze[ee]));z.splice(yt,1);return}if(M!==1)for(B=0;B<Re.length;B++){var xt=Re[B];Ze[xt]=O(M,Ze[xt])}Ze[G]=1}function O(z,I){var G="",M="",L,B;typeof z=="string"&&(G=z.match(/^[xy]*/)[0],L=G.length,z=+z.substr(L)),typeof I=="string"&&(M=I.match(/^[xy]*/)[0],B=M.length,I=+I.substr(B));var X=z*I;return!L&&!B?X:!L||!B||G.charAt(0)===M.charAt(0)?G+M+z*I:L===B?X:(L>B?G.substr(B):M.substr(L))+X}function $(z,I){for(var G=I._size,M=G.h/G.w,L={},B=Object.keys(z),X=0;X<B.length;X++){var ee=B[X],yt=z[ee];if(typeof yt=="string"){var Ze=yt.match(/^[xy]*/)[0],Re=Ze.length;yt=+yt.substr(Re);for(var Q=Ze.charAt(0)==="y"?M:1/M,xt=0;xt<Re;xt++)yt*=Q}L[ee]=yt}return L}nt.enforce=function(z){var I=z._fullLayout,G=I._axisConstraintGroups||[],M,L,B,X,ee,yt,Ze,Re;for(M=0;M<G.length;M++){B=$(G[M],I);var Q=Object.keys(B),xt=1/0,tt=0,ht=1/0,it={},ut={},vt=!1;for(L=0;L<Q.length;L++)X=Q[L],ut[X]=ee=I[d(X)],ee._inputDomain?ee.domain=ee._inputDomain.slice():ee._inputDomain=ee.domain.slice(),ee._inputRange||(ee._inputRange=ee.range.slice()),ee.setScale(),it[X]=yt=Math.abs(ee._m)/B[X],xt=Math.min(xt,yt),(ee.constrain==="domain"||!ee._constraintShrinkable)&&(ht=Math.min(ht,yt)),delete ee._constraintShrinkable,tt=Math.max(tt,yt),ee.constrain==="domain"&&(vt=!0);if(!(xt>w*tt&&!vt)){for(L=0;L<Q.length;L++)if(X=Q[L],yt=it[X],ee=ut[X],Ze=ee.constrain,yt!==ht||Ze==="domain")if(Re=yt/ht,Ze==="range")E(ee,Re);else{var _t=ee._inputDomain,Le=(ee.domain[1]-ee.domain[0])/(_t[1]-_t[0]),wt=(ee.r2l(ee.range[1])-ee.r2l(ee.range[0]))/(ee.r2l(ee._inputRange[1])-ee.r2l(ee._inputRange[0]));if(Re/=Le,Re*wt<1){ee.domain=ee._input.domain=_t.slice(),E(ee,Re);continue}if(wt<1&&(ee.range=ee._input.range=ee._inputRange.slice(),Re*=wt),ee.autorange){var St=ee.r2l(ee.range[0]),Ut=ee.r2l(ee.range[1]),kt=(St+Ut)/2,jt=kt,aa=kt,ca=Math.abs(Ut-kt),Cp=kt-ca*Re*1.0001,pt=kt+ca*Re*1.0001,gt=_.makePadFn(I,ee,0),te=_.makePadFn(I,ee,1);j(ee,Re);var Et=Math.abs(ee._m),zt=_.concatExtremes(z,ee),rt=zt.min,Z=zt.max,we,ot;for(ot=0;ot<rt.length;ot++)we=rt[ot].val-gt(rt[ot])/Et,we>Cp&&we<jt&&(jt=we);for(ot=0;ot<Z.length;ot++)we=Z[ot].val+te(Z[ot])/Et,we<pt&&we>aa&&(aa=we);var mt=(aa-jt)/(2*ca);Re/=mt,jt=ee.l2r(jt),aa=ee.l2r(aa),ee.range=ee._input.range=St<Ut?[jt,aa]:[aa,jt]}j(ee,Re)}}}},nt.getAxisGroup=function(z,I){for(var G=z._axisMatchGroups,M=0;M<G.length;M++){var L=G[M];if(L[I])return"g"+M}return I},nt.clean=function(z,I){if(I._inputDomain){for(var G=!1,M=I._id,L=z._fullLayout._axisConstraintGroups,B=0;B<L.length;B++)if(L[B][M]){G=!0;break}(!G||I.constrain!=="domain")&&(I._input.domain=I.domain=I._inputDomain,delete I._inputDomain)}};function j(z,I){var G=z._inputDomain,M=S[z.constraintoward],L=G[0]+(G[1]-G[0])*M;z.domain=z._input.domain=[L+(G[0]-L)/I,L+(G[1]-L)/I],z.setScale()}}),$1=r(nt=>{var ke=o(),_=y1(),d=cg(),m=et(),E=G1(),b=xy(),w=Mn(),S=Q0(),C=lm(),p=Zm(),F=Im(),A=K1(),O=Sg(),$=O.enforce,j=O.clean,z=Bm().doAutoRange,I="start",G="middle",M="end",L=Vm().zindexSeparator;nt.layoutStyles=function(Le){return m.syncOrAsync([d.doAutoMargin,X],Le)};function B(Le,wt,St){for(var Ut=0;Ut<St.length;Ut++){var kt=St[Ut][0],jt=St[Ut][1];if(!(kt[0]>=Le[1]||kt[1]<=Le[0])&&jt[0]<wt[1]&&jt[1]>wt[0])return!0}return!1}function X(Le){var wt=Le._fullLayout,St=wt._size,Ut=St.p,kt=F.list(Le,"",!0),jt,aa,ca,Cp,pt,gt;if(wt._paperdiv.style({width:Le._context.responsive&&wt.autosize&&!Le._context._hasZeroWidth&&!Le.layout.width?"100%":wt.width+"px",height:Le._context.responsive&&wt.autosize&&!Le._context._hasZeroHeight&&!Le.layout.height?"100%":wt.height+"px"}).selectAll(".main-svg").call(S.setSize,wt.width,wt.height),Le._context.setBackground(Le,wt.paper_bgcolor),nt.drawMainTitle(Le),p.manage(Le),!wt._has("cartesian"))return d.previousPromises(Le);function te(Mt,Wt,xn){var Fp=Mt._lw/2;if(Mt._id.charAt(0)==="x"){if(Wt){if(xn==="top")return Wt._offset-Ut-Fp}else return St.t+St.h*(1-(Mt.position||0))+Fp%1;return Wt._offset+Wt._length+Ut+Fp}if(Wt){if(xn==="right")return Wt._offset+Wt._length+Ut+Fp}else return St.l+St.w*(Mt.position||0)+Fp%1;return Wt._offset-Ut-Fp}for(jt=0;jt<kt.length;jt++){Cp=kt[jt];var Et=Cp._anchorAxis;Cp._linepositions={},Cp._lw=S.crispRound(Le,Cp.linewidth,1),Cp._mainLinePosition=te(Cp,Et,Cp.side),Cp._mainMirrorPosition=Cp.mirror&&Et?te(Cp,Et,A.OPPOSITE_SIDE[Cp.side]):null}var zt=[],rt=[],Z=[],we=w.opacity(wt.paper_bgcolor)===1&&w.opacity(wt.plot_bgcolor)===1&&wt.paper_bgcolor===wt.plot_bgcolor;for(aa in wt._plots)if(ca=wt._plots[aa],ca.mainplot)ca.bg&&ca.bg.remove(),ca.bg=void 0;else{var ot=ca.xaxis.domain,mt=ca.yaxis.domain,It=ca.plotgroup;if(B(ot,mt,Z)&&aa.indexOf(L)===-1){var Yt=It.node(),Sr=ca.bg=m.ensureSingle(It,"rect","bg");Yt.insertBefore(Sr.node(),Yt.childNodes[0]),rt.push(aa)}else It.select("rect.bg").remove(),Z.push([ot,mt]),we||(zt.push(aa),rt.push(aa))}var Op=wt._bgLayer.selectAll(".bg").data(zt);for(Op.enter().append("rect").classed("bg",!0),Op.exit().remove(),Op.each(function(Mt){wt._plots[Mt].bg=ke.select(this)}),jt=0;jt<rt.length;jt++)ca=wt._plots[rt[jt]],pt=ca.xaxis,gt=ca.yaxis,ca.bg&&pt._offset!==void 0&&gt._offset!==void 0&&ca.bg.call(S.setRect,pt._offset-Ut,gt._offset-Ut,pt._length+2*Ut,gt._length+2*Ut).call(w.fill,wt.plot_bgcolor).style("stroke-width",0);if(!wt._hasOnlyLargeSploms)for(aa in wt._plots){ca=wt._plots[aa],pt=ca.xaxis,gt=ca.yaxis;var Hp=ca.clipId="clip"+wt._uid+aa+"plot",n0=m.ensureSingleById(wt._clips,"clipPath",Hp,function(Mt){Mt.classed("plotclip",!0).append("rect")});ca.clipRect=n0.select("rect").attr({width:pt._length,height:gt._length}),S.setTranslate(ca.plot,pt._offset,gt._offset);var R0,w0;ca._hasClipOnAxisFalse?(R0=null,w0=Hp):(R0=Hp,w0=null),S.setClipUrl(ca.plot,R0,Le),ca.layerClipId=w0}var _0,ha,Rp,Gt,Gp,c0,M0,I0,k0,V0,$0,W0,gm;function F0(Mt){return"M"+_0+","+Mt+"H"+ha}function bm(Mt){return"M"+pt._offset+","+Mt+"h"+pt._length}function Dm(Mt){return"M"+Mt+","+I0+"V"+M0}function vm(Mt){return gt._shift!==void 0&&(Mt+=gt._shift),"M"+Mt+","+gt._offset+"v"+gt._length}function km(Mt,Wt,xn){if(!Mt.showline||aa!==Mt._mainSubplot)return"";if(!Mt._anchorAxis)return xn(Mt._mainLinePosition);var Fp=Wt(Mt._mainLinePosition);return Mt.mirror&&(Fp+=Wt(Mt._mainMirrorPosition)),Fp}for(aa in wt._plots){ca=wt._plots[aa],pt=ca.xaxis,gt=ca.yaxis;var Yo="M0,0";ee(pt,aa)&&(Gp=Ze(pt,"left",gt,kt),_0=pt._offset-(Gp?Ut+Gp:0),c0=Ze(pt,"right",gt,kt),ha=pt._offset+pt._length+(c0?Ut+c0:0),Rp=te(pt,gt,"bottom"),Gt=te(pt,gt,"top"),gm=!pt._anchorAxis||aa!==pt._mainSubplot,gm&&(pt.mirror==="allticks"||pt.mirror==="all")&&(pt._linepositions[aa]=[Rp,Gt]),Yo=km(pt,F0,bm),gm&&pt.showline&&(pt.mirror==="all"||pt.mirror==="allticks")&&(Yo+=F0(Rp)+F0(Gt)),ca.xlines.style("stroke-width",pt._lw+"px").call(w.stroke,pt.showline?pt.linecolor:"rgba(0,0,0,0)")),ca.xlines.attr("d",Yo);var qp="M0,0";ee(gt,aa)&&($0=Ze(gt,"bottom",pt,kt),M0=gt._offset+gt._length+($0?Ut:0),W0=Ze(gt,"top",pt,kt),I0=gt._offset-(W0?Ut:0),k0=te(gt,pt,"left"),V0=te(gt,pt,"right"),gm=!gt._anchorAxis||aa!==gt._mainSubplot,gm&&(gt.mirror==="allticks"||gt.mirror==="all")&&(gt._linepositions[aa]=[k0,V0]),qp=km(gt,Dm,vm),gm&&gt.showline&&(gt.mirror==="all"||gt.mirror==="allticks")&&(qp+=Dm(k0)+Dm(V0)),ca.ylines.style("stroke-width",gt._lw+"px").call(w.stroke,gt.showline?gt.linecolor:"rgba(0,0,0,0)")),ca.ylines.attr("d",qp)}return F.makeClipPaths(Le),d.previousPromises(Le)}function ee(Le,wt){return(Le.ticks||Le.showline)&&(wt===Le._mainSubplot||Le.mirror==="all"||Le.mirror==="allticks")}function yt(Le,wt,St){if(!St.showline||!St._lw)return!1;if(St.mirror==="all"||St.mirror==="allticks")return!0;var Ut=St._anchorAxis;if(!Ut)return!1;var kt=A.FROM_BL[wt];return St.side===wt?Ut.domain[kt]===Le.domain[kt]:St.mirror&&Ut.domain[1-kt]===Le.domain[1-kt]}function Ze(Le,wt,St,Ut){if(yt(Le,wt,St))return St._lw;for(var kt=0;kt<Ut.length;kt++){var jt=Ut[kt];if(jt._mainAxis===St._mainAxis&&yt(Le,wt,jt))return jt._lw}return 0}nt.drawMainTitle=function(Le){var wt=Le._fullLayout.title,St=Le._fullLayout,Ut=vt(St),kt=_t(St),jt=it(St,kt),aa=ht(St,Ut);if(C.draw(Le,"gtitle",{propContainer:St,propName:"title.text",subtitlePropName:"title.subtitle.text",placeholder:St._dfltTitle.plot,subtitlePlaceholder:St._dfltTitle.subtitle,attributes:{x:aa,y:jt,"text-anchor":Ut,dy:kt}}),wt.text&&wt.automargin){var ca=ke.select(Le).selectAll(".gtitle"),Cp=S.bBox(ke.select(Le).selectAll(".g-gtitle").node()).height,pt=xt(Le,wt,Cp);if(pt>0){tt(Le,jt,pt,Cp),ca.attr({x:aa,y:jt,"text-anchor":Ut,dy:ut(wt.yanchor)}).call(E.positionText,aa,jt);var gt=(wt.text.match(E.BR_TAG_ALL)||[]).length;if(gt){var te=A.LINE_SPACING*gt+A.MID_SHIFT;wt.y===0&&(te=-te),ca.selectAll(".line").each(function(){var we=+this.getAttribute("dy").slice(0,-2)-te+"em";this.setAttribute("dy",we)})}var Et=ke.select(Le).selectAll(".gtitle-subtitle");if(Et.node()){var zt=ca.node().getBBox(),rt=zt.y+zt.height,Z=rt+C.SUBTITLE_PADDING_EM*wt.subtitle.font.size;Et.attr({x:aa,y:Z,"text-anchor":Ut,dy:ut(wt.yanchor)}).call(E.positionText,aa,Z)}}}};function Re(Le,wt,St,Ut,kt){var jt=wt.yref==="paper"?Le._fullLayout._size.h:Le._fullLayout.height,aa=m.isTopAnchor(wt)?Ut:Ut-kt,ca=St==="b"?jt-aa:aa;return m.isTopAnchor(wt)&&St==="t"||m.isBottomAnchor(wt)&&St==="b"?!1:ca<kt}function Q(Le,wt,St,Ut,kt){var jt=0;return St==="middle"&&(jt+=kt/2),Le==="t"?(St==="top"&&(jt+=kt),jt+=Ut-wt*Ut):(St==="bottom"&&(jt+=kt),jt+=wt*Ut),jt}function xt(Le,wt,St){var Ut=wt.y,kt=wt.yanchor,jt=Ut>.5?"t":"b",aa=Le._fullLayout.margin[jt],ca=0;return wt.yref==="paper"?ca=St+wt.pad.t+wt.pad.b:wt.yref==="container"&&(ca=Q(jt,Ut,kt,Le._fullLayout.height,St)+wt.pad.t+wt.pad.b),ca>aa?ca:0}function tt(Le,wt,St,Ut){var kt="title.automargin",jt=Le._fullLayout.title,aa=jt.y>.5?"t":"b",ca={x:jt.x,y:jt.y,t:0,b:0},Cp={};jt.yref==="paper"&&Re(Le,jt,aa,wt,Ut)?ca[aa]=St:jt.yref==="container"&&(Cp[aa]=St,Le._fullLayout._reservedMargin[kt]=Cp),d.allowAutoMargin(Le,kt),d.autoMargin(Le,kt,ca)}function ht(Le,wt){var St=Le.title,Ut=Le._size,kt=0;switch(wt===I?kt=St.pad.l:wt===M&&(kt=-St.pad.r),St.xref){case"paper":return Ut.l+Ut.w*St.x+kt;case"container":default:return Le.width*St.x+kt}}function it(Le,wt){var St=Le.title,Ut=Le._size,kt=0;if(wt==="0em"||!wt?kt=-St.pad.b:wt===A.CAP_SHIFT+"em"&&(kt=St.pad.t),St.y==="auto")return Ut.t/2;switch(St.yref){case"paper":return Ut.t+Ut.h-Ut.h*St.y+kt;case"container":default:return Le.height-Le.height*St.y+kt}}function ut(Le){return Le==="top"?A.CAP_SHIFT+.3+"em":Le==="bottom"?"-0.3em":A.MID_SHIFT+"em"}function vt(Le){var wt=Le.title,St=G;return m.isRightAnchor(wt)?St=M:m.isLeftAnchor(wt)&&(St=I),St}function _t(Le){var wt=Le.title,St="0em";return m.isTopAnchor(wt)?St=A.CAP_SHIFT+"em":m.isMiddleAnchor(wt)&&(St=A.MID_SHIFT+"em"),St}nt.doTraceStyle=function(Le){var wt=Le.calcdata,St=[],Ut;for(Ut=0;Ut<wt.length;Ut++){var kt=wt[Ut],jt=kt[0]||{},aa=jt.trace||{},ca=aa._module||{},Cp=ca.arraysToCalcdata;Cp&&Cp(kt,aa);var pt=ca.editStyle;pt&&St.push({fn:pt,cd0:jt})}if(St.length){for(Ut=0;Ut<St.length;Ut++){var gt=St[Ut];gt.fn(Le,gt.cd0)}b(Le),nt.redrawReglTraces(Le)}return d.style(Le),_.getComponentMethod("legend","draw")(Le),d.previousPromises(Le)},nt.doColorBars=function(Le){return _.getComponentMethod("colorbar","draw")(Le),d.previousPromises(Le)},nt.layoutReplot=function(Le){var wt=Le.layout;return Le.layout=void 0,_.call("_doPlot",Le,"",wt)},nt.doLegend=function(Le){return _.getComponentMethod("legend","draw")(Le),d.previousPromises(Le)},nt.doTicksRelayout=function(Le){return F.draw(Le,"redraw"),Le._fullLayout._hasOnlyLargeSploms&&(_.subplotsRegistry.splom.updateGrid(Le),b(Le),nt.redrawReglTraces(Le)),nt.drawMainTitle(Le),d.previousPromises(Le)},nt.doModeBar=function(Le){var wt=Le._fullLayout;p.manage(Le);for(var St=0;St<wt._basePlotModules.length;St++){var Ut=wt._basePlotModules[St].updateFx;Ut&&Ut(Le)}return d.previousPromises(Le)},nt.doCamera=function(Le){for(var wt=Le._fullLayout,St=wt._subplots.gl3d,Ut=0;Ut<St.length;Ut++){var kt=wt[St[Ut]],jt=kt._scene;jt.setViewport(kt)}},nt.drawData=function(Le){var wt=Le._fullLayout;b(Le);for(var St=wt._basePlotModules,Ut=0;Ut<St.length;Ut++)St[Ut].plot(Le);return nt.redrawReglTraces(Le),d.style(Le),_.getComponentMethod("selections","draw")(Le),_.getComponentMethod("shapes","draw")(Le),_.getComponentMethod("annotations","draw")(Le),_.getComponentMethod("images","draw")(Le),wt._replotting=!1,d.previousPromises(Le)},nt.redrawReglTraces=function(Le){var wt=Le._fullLayout;if(wt._has("regl")){var St=Le._fullData,Ut=[],kt=[],jt,aa;for(wt._hasOnlyLargeSploms&&wt._splomGrid.draw(),jt=0;jt<St.length;jt++){var ca=St[jt];ca.visible===!0&&ca._length!==0&&(ca.type==="splom"?wt._splomScenes[ca.uid].draw():ca.type==="scattergl"?m.pushUnique(Ut,ca.xaxis+ca.yaxis):ca.type==="scatterpolargl"&&m.pushUnique(kt,ca.subplot))}for(jt=0;jt<Ut.length;jt++)aa=wt._plots[Ut[jt]],aa._scene&&aa._scene.draw();for(jt=0;jt<kt.length;jt++)aa=wt[kt[jt]]._subplot,aa._scene&&aa._scene.draw()}},nt.doAutoRangeAndConstraints=function(Le){for(var wt=F.list(Le,"",!0),St,Ut={},kt=0;kt<wt.length;kt++)if(St=wt[kt],!Ut[St._id]){Ut[St._id]=1,j(Le,St),z(Le,St);var jt=St._matchGroup;if(jt)for(var aa in jt){var ca=F.getFromId(Le,aa);z(Le,ca,St.range),Ut[aa]=1}}$(Le)},nt.finalDraw=function(Le){_.getComponentMethod("rangeslider","draw")(Le),_.getComponentMethod("rangeselector","draw")(Le)},nt.drawMarginPushers=function(Le){_.getComponentMethod("legend","draw")(Le),_.getComponentMethod("rangeselector","draw")(Le),_.getComponentMethod("sliders","draw")(Le),_.getComponentMethod("updatemenus","draw")(Le),_.getComponentMethod("colorbar","draw")(Le)}}),ly=r((nt,ke)=>{var _=Dv().readPaths,d=bt(),m=O1().clearOutlineControllers,E=Mn(),b=Q0(),w=Fm().arrayEditor,S=Ue(),C=S.getPathString;ke.exports={draw:p,drawOne:A,activateLastSelection:j};function p(I){var G=I._fullLayout;m(I),G._selectionLayer.selectAll("path").remove();for(var M in G._plots){var L=G._plots[M].selectionLayer;L&&L.selectAll("path").remove()}for(var B=0;B<G.selections.length;B++)A(I,B)}function F(I){return I._context.editSelection}function A(I,G){I._fullLayout._paperdiv.selectAll('.selectionlayer [data-index="'+G+'"]').remove();var M=S.makeSelectionsOptionsAndPlotinfo(I,G),L=M.options,B=M.plotinfo;if(!L._input)return;X(I._fullLayout._selectionLayer);function X(ee){var yt=C(I,L),Ze={"data-index":G,"fill-rule":"evenodd",d:yt},Re=L.opacity,Q="rgba(0,0,0,0)",xt=L.line.color||E.contrast(I._fullLayout.plot_bgcolor),tt=L.line.width,ht=L.line.dash;tt||(tt=5,ht="solid");var it=F(I)&&I._fullLayout._activeSelectionIndex===G;it&&(Q=I._fullLayout.activeselection.fillcolor,Re=I._fullLayout.activeselection.opacity);for(var ut=[],vt=1;vt>=0;vt--){var _t=ee.append("path").attr(Ze).style("opacity",vt?.1:Re).call(E.stroke,xt).call(E.fill,Q).call(b.dashLine,vt?"solid":ht,vt?4+tt:tt);if(O(_t,I,L),it){var Le=w(I.layout,"selections",L);_t.style({cursor:"move"});var wt={element:_t.node(),plotinfo:B,gd:I,editHelpers:Le,isActiveSelection:!0},St=_(yt,I);d(St,_t,wt)}else _t.style("pointer-events",vt?"all":"none");ut[vt]=_t}var Ut=ut[0],kt=ut[1];kt.node().addEventListener("click",function(){return $(I,Ut)})}}function O(I,G,M){var L=M.xref+M.yref;b.setClipUrl(I,"clip"+G._fullLayout._uid+L,G)}function $(I,G){if(F(I)){var M=G.node(),L=+M.getAttribute("data-index");if(L>=0){if(L===I._fullLayout._activeSelectionIndex){z(I);return}I._fullLayout._activeSelectionIndex=L,I._fullLayout._deactivateSelection=z,p(I)}}}function j(I){if(F(I)){var G=I._fullLayout.selections.length-1;I._fullLayout._activeSelectionIndex=G,I._fullLayout._deactivateSelection=z,p(I)}}function z(I){if(F(I)){var G=I._fullLayout._activeSelectionIndex;G>=0&&(m(I),delete I._fullLayout._activeSelectionIndex,p(I))}}}),bv=r((nt,ke)=>{function _(){var d,m=0,E=!1;function b(w,S){return d.list.push({type:w,data:S?JSON.parse(JSON.stringify(S)):void 0}),d}return d={list:[],segmentId:function(){return m++},checkIntersection:function(w,S){return b("check",{seg1:w,seg2:S})},segmentChop:function(w,S){return b("div_seg",{seg:w,pt:S}),b("chop",{seg:w,pt:S})},statusRemove:function(w){return b("pop_seg",{seg:w})},segmentUpdate:function(w){return b("seg_update",{seg:w})},segmentNew:function(w,S){return b("new_seg",{seg:w,primary:S})},segmentRemove:function(w){return b("rem_seg",{seg:w})},tempStatus:function(w,S,C){return b("temp_status",{seg:w,above:S,below:C})},rewind:function(w){return b("rewind",{seg:w})},status:function(w,S,C){return b("status",{seg:w,above:S,below:C})},vert:function(w){return w===E?d:(E=w,b("vert",{x:w}))},log:function(w){return typeof w!="string"&&(w=JSON.stringify(w,!1,"  ")),b("log",{txt:w})},reset:function(){return b("reset")},selected:function(w){return b("selected",{segs:w})},chainStart:function(w){return b("chain_start",{seg:w})},chainRemoveHead:function(w,S){return b("chain_rem_head",{index:w,pt:S})},chainRemoveTail:function(w,S){return b("chain_rem_tail",{index:w,pt:S})},chainNew:function(w,S){return b("chain_new",{pt1:w,pt2:S})},chainMatch:function(w){return b("chain_match",{index:w})},chainClose:function(w){return b("chain_close",{index:w})},chainAddHead:function(w,S){return b("chain_add_head",{index:w,pt:S})},chainAddTail:function(w,S){return b("chain_add_tail",{index:w,pt:S})},chainConnect:function(w,S){return b("chain_con",{index1:w,index2:S})},chainReverse:function(w){return b("chain_rev",{index:w})},chainJoin:function(w,S){return b("chain_join",{index1:w,index2:S})},done:function(){return b("done")}},d}ke.exports=_}),Fg=r((nt,ke)=>{function _(d){typeof d!="number"&&(d=1e-10);var m={epsilon:function(E){return typeof E=="number"&&(d=E),d},pointAboveOrOnLine:function(E,b,w){var S=b[0],C=b[1],p=w[0],F=w[1],A=E[0],O=E[1];return(p-S)*(O-C)-(F-C)*(A-S)>=-d},pointBetween:function(E,b,w){var S=E[1]-b[1],C=w[0]-b[0],p=E[0]-b[0],F=w[1]-b[1],A=p*C+S*F;if(A<d)return!1;var O=C*C+F*F;return!(A-O>-d)},pointsSameX:function(E,b){return Math.abs(E[0]-b[0])<d},pointsSameY:function(E,b){return Math.abs(E[1]-b[1])<d},pointsSame:function(E,b){return m.pointsSameX(E,b)&&m.pointsSameY(E,b)},pointsCompare:function(E,b){return m.pointsSameX(E,b)?m.pointsSameY(E,b)?0:E[1]<b[1]?-1:1:E[0]<b[0]?-1:1},pointsCollinear:function(E,b,w){var S=E[0]-b[0],C=E[1]-b[1],p=b[0]-w[0],F=b[1]-w[1];return Math.abs(S*F-p*C)<d},linesIntersect:function(E,b,w,S){var C=b[0]-E[0],p=b[1]-E[1],F=S[0]-w[0],A=S[1]-w[1],O=C*A-p*F;if(Math.abs(O)<d)return!1;var $=E[0]-w[0],j=E[1]-w[1],z=(F*j-A*$)/O,I=(C*j-p*$)/O,G={alongA:0,alongB:0,pt:[E[0]+z*C,E[1]+z*p]};return z<=-d?G.alongA=-2:z<d?G.alongA=-1:z-1<=-d?G.alongA=0:z-1<d?G.alongA=1:G.alongA=2,I<=-d?G.alongB=-2:I<d?G.alongB=-1:I-1<=-d?G.alongB=0:I-1<d?G.alongB=1:G.alongB=2,G},pointInsideRegion:function(E,b){for(var w=E[0],S=E[1],C=b[b.length-1][0],p=b[b.length-1][1],F=!1,A=0;A<b.length;A++){var O=b[A][0],$=b[A][1];$-S>d!=p-S>d&&(C-O)*(S-$)/(p-$)+O-w>d&&(F=!F),C=O,p=$}return F}};return m}ke.exports=_}),kv=r((nt,ke)=>{var _={create:function(){var d={root:{root:!0,next:null},exists:function(m){return!(m===null||m===d.root)},isEmpty:function(){return d.root.next===null},getHead:function(){return d.root.next},insertBefore:function(m,E){for(var b=d.root,w=d.root.next;w!==null;){if(E(w)){m.prev=w.prev,m.next=w,w.prev.next=m,w.prev=m;return}b=w,w=w.next}b.next=m,m.prev=b,m.next=null},findTransition:function(m){for(var E=d.root,b=d.root.next;b!==null&&!m(b);)E=b,b=b.next;return{before:E===d.root?null:E,after:b,insert:function(w){return w.prev=E,w.next=b,E.next=w,b!==null&&(b.prev=w),w}}}};return d},node:function(d){return d.prev=null,d.next=null,d.remove=function(){d.prev.next=d.next,d.next&&(d.next.prev=d.prev),d.prev=null,d.next=null},d}};ke.exports=_}),Jg=r((nt,ke)=>{var _=kv();function d(m,E,b){function w(G,M){return{id:b?b.segmentId():-1,start:G,end:M,myFill:{above:null,below:null},otherFill:null}}function S(G,M,L){return{id:b?b.segmentId():-1,start:G,end:M,myFill:{above:L.myFill.above,below:L.myFill.below},otherFill:null}}var C=_.create();function p(G,M,L,B,X,ee){var yt=E.pointsCompare(M,X);return yt!==0?yt:E.pointsSame(L,ee)?0:G!==B?G?1:-1:E.pointAboveOrOnLine(L,B?X:ee,B?ee:X)?1:-1}function F(G,M){C.insertBefore(G,function(L){var B=p(G.isStart,G.pt,M,L.isStart,L.pt,L.other.pt);return B<0})}function A(G,M){var L=_.node({isStart:!0,pt:G.start,seg:G,primary:M,other:null,status:null});return F(L,G.end),L}function O(G,M,L){var B=_.node({isStart:!1,pt:M.end,seg:M,primary:L,other:G,status:null});G.other=B,F(B,G.pt)}function $(G,M){var L=A(G,M);return O(L,G,M),L}function j(G,M){b&&b.segmentChop(G.seg,M),G.other.remove(),G.seg.end=M,G.other.pt=M,F(G.other,G.pt)}function z(G,M){var L=S(M,G.seg.end,G.seg);return j(G,M),$(L,G.primary)}function I(G,M){var L=_.create();function B(_t,Le){var wt=_t.seg.start,St=_t.seg.end,Ut=Le.seg.start,kt=Le.seg.end;return E.pointsCollinear(wt,Ut,kt)?E.pointsCollinear(St,Ut,kt)||E.pointAboveOrOnLine(St,Ut,kt)?1:-1:E.pointAboveOrOnLine(wt,Ut,kt)?1:-1}function X(_t){return L.findTransition(function(Le){var wt=B(_t,Le.ev);return wt>0})}function ee(_t,Le){var wt=_t.seg,St=Le.seg,Ut=wt.start,kt=wt.end,jt=St.start,aa=St.end;b&&b.checkIntersection(wt,St);var ca=E.linesIntersect(Ut,kt,jt,aa);if(ca===!1){if(!E.pointsCollinear(Ut,kt,jt)||E.pointsSame(Ut,aa)||E.pointsSame(kt,jt))return!1;var Cp=E.pointsSame(Ut,jt),pt=E.pointsSame(kt,aa);if(Cp&&pt)return Le;var gt=!Cp&&E.pointBetween(Ut,jt,aa),te=!pt&&E.pointBetween(kt,jt,aa);if(Cp)return te?z(Le,kt):z(_t,aa),Le;gt&&(pt||(te?z(Le,kt):z(_t,aa)),z(Le,Ut))}else ca.alongA===0&&(ca.alongB===-1?z(_t,jt):ca.alongB===0?z(_t,ca.pt):ca.alongB===1&&z(_t,aa)),ca.alongB===0&&(ca.alongA===-1?z(Le,Ut):ca.alongA===0?z(Le,ca.pt):ca.alongA===1&&z(Le,kt));return!1}for(var yt=[];!C.isEmpty();){var Ze=C.getHead();if(b&&b.vert(Ze.pt[0]),Ze.isStart){let _t=function(){if(Q){var Le=ee(Ze,Q);if(Le)return Le}return xt?ee(Ze,xt):!1};b&&b.segmentNew(Ze.seg,Ze.primary);var Re=X(Ze),Q=Re.before?Re.before.ev:null,xt=Re.after?Re.after.ev:null;b&&b.tempStatus(Ze.seg,Q?Q.seg:!1,xt?xt.seg:!1);var tt=_t();if(tt){if(m){var ht;Ze.seg.myFill.below===null?ht=!0:ht=Ze.seg.myFill.above!==Ze.seg.myFill.below,ht&&(tt.seg.myFill.above=!tt.seg.myFill.above)}else tt.seg.otherFill=Ze.seg.myFill;b&&b.segmentUpdate(tt.seg),Ze.other.remove(),Ze.remove()}if(C.getHead()!==Ze){b&&b.rewind(Ze.seg);continue}if(m){var ht;Ze.seg.myFill.below===null?ht=!0:ht=Ze.seg.myFill.above!==Ze.seg.myFill.below,xt?Ze.seg.myFill.below=xt.seg.myFill.above:Ze.seg.myFill.below=G,ht?Ze.seg.myFill.above=!Ze.seg.myFill.below:Ze.seg.myFill.above=Ze.seg.myFill.below}else if(Ze.seg.otherFill===null){var it;xt?Ze.primary===xt.primary?it=xt.seg.otherFill.above:it=xt.seg.myFill.above:it=Ze.primary?M:G,Ze.seg.otherFill={above:it,below:it}}b&&b.status(Ze.seg,Q?Q.seg:!1,xt?xt.seg:!1),Ze.other.status=Re.insert(_.node({ev:Ze}))}else{var ut=Ze.status;if(ut===null)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(L.exists(ut.prev)&&L.exists(ut.next)&&ee(ut.prev.ev,ut.next.ev),b&&b.statusRemove(ut.ev.seg),ut.remove(),!Ze.primary){var vt=Ze.seg.myFill;Ze.seg.myFill=Ze.seg.otherFill,Ze.seg.otherFill=vt}yt.push(Ze.seg)}C.getHead().remove()}return b&&b.done(),yt}return m?{addRegion:function(G){for(var M,L=G[G.length-1],B=0;B<G.length;B++){M=L,L=G[B];var X=E.pointsCompare(M,L);X!==0&&$(w(X<0?M:L,X<0?L:M),!0)}},calculate:function(G){return I(G,!1)}}:{calculate:function(G,M,L,B){return G.forEach(function(X){$(S(X.start,X.end,X),!0)}),L.forEach(function(X){$(S(X.start,X.end,X),!1)}),I(M,B)}}}ke.exports=d}),ig=r((nt,ke)=>{function _(d,m,E){var b=[],w=[];return d.forEach(function(S){var C=S.start,p=S.end;if(m.pointsSame(C,p)){console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");return}E&&E.chainStart(S);var F={index:0,matches_head:!1,matches_pt1:!1},A={index:0,matches_head:!1,matches_pt1:!1},O=F;function $(it,ut,vt){return O.index=it,O.matches_head=ut,O.matches_pt1=vt,O===F?(O=A,!1):(O=null,!0)}for(var j=0;j<b.length;j++){var z=b[j],I=z[0];z[1];var G=z[z.length-1];if(z[z.length-2],m.pointsSame(I,C)){if($(j,!0,!0))break}else if(m.pointsSame(I,p)){if($(j,!0,!1))break}else if(m.pointsSame(G,C)){if($(j,!1,!0))break}else if(m.pointsSame(G,p)&&$(j,!1,!1))break}if(O===F){b.push([C,p]),E&&E.chainNew(C,p);return}if(O===A){E&&E.chainMatch(F.index);var M=F.index,L=F.matches_pt1?p:C,B=F.matches_head,z=b[M],X=B?z[0]:z[z.length-1],ee=B?z[1]:z[z.length-2],yt=B?z[z.length-1]:z[0],Ze=B?z[z.length-2]:z[1];if(m.pointsCollinear(ee,X,L)&&(B?(E&&E.chainRemoveHead(F.index,L),z.shift()):(E&&E.chainRemoveTail(F.index,L),z.pop()),X=ee),m.pointsSame(yt,L)){b.splice(M,1),m.pointsCollinear(Ze,yt,X)&&(B?(E&&E.chainRemoveTail(F.index,X),z.pop()):(E&&E.chainRemoveHead(F.index,X),z.shift())),E&&E.chainClose(F.index),w.push(z);return}B?(E&&E.chainAddHead(F.index,L),z.unshift(L)):(E&&E.chainAddTail(F.index,L),z.push(L));return}function Re(it){E&&E.chainReverse(it),b[it].reverse()}function Q(it,ut){var vt=b[it],_t=b[ut],Le=vt[vt.length-1],wt=vt[vt.length-2],St=_t[0],Ut=_t[1];m.pointsCollinear(wt,Le,St)&&(E&&E.chainRemoveTail(it,Le),vt.pop(),Le=wt),m.pointsCollinear(Le,St,Ut)&&(E&&E.chainRemoveHead(ut,St),_t.shift()),E&&E.chainJoin(it,ut),b[it]=vt.concat(_t),b.splice(ut,1)}var xt=F.index,tt=A.index;E&&E.chainConnect(xt,tt);var ht=b[xt].length<b[tt].length;F.matches_head?A.matches_head?ht?(Re(xt),Q(xt,tt)):(Re(tt),Q(tt,xt)):Q(tt,xt):A.matches_head?Q(xt,tt):ht?(Re(xt),Q(tt,xt)):(Re(tt),Q(xt,tt))}),w}ke.exports=_}),Gg=r((nt,ke)=>{function _(m,E,b){var w=[];return m.forEach(function(S){var C=(S.myFill.above?8:0)+(S.myFill.below?4:0)+(S.otherFill&&S.otherFill.above?2:0)+(S.otherFill&&S.otherFill.below?1:0);E[C]!==0&&w.push({id:b?b.segmentId():-1,start:S.start,end:S.end,myFill:{above:E[C]===1,below:E[C]===2},otherFill:null})}),b&&b.selected(w),w}var d={union:function(m,E){return _(m,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],E)},intersect:function(m,E){return _(m,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],E)},difference:function(m,E){return _(m,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],E)},differenceRev:function(m,E){return _(m,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],E)},xor:function(m,E){return _(m,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],E)}};ke.exports=d}),Rv=r((nt,ke)=>{var _={toPolygon:function(d,m){function E(S){if(S.length<=0)return d.segments({inverted:!1,regions:[]});function C(A){var O=A.slice(0,A.length-1);return d.segments({inverted:!1,regions:[O]})}for(var p=C(S[0]),F=1;F<S.length;F++)p=d.selectDifference(d.combine(p,C(S[F])));return p}if(m.type==="Polygon")return d.polygon(E(m.coordinates));if(m.type==="MultiPolygon"){for(var b=d.segments({inverted:!1,regions:[]}),w=0;w<m.coordinates.length;w++)b=d.selectUnion(d.combine(b,E(m.coordinates[w])));return d.polygon(b)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(d,m,E){E=d.polygon(d.segments(E));function b(z,I){return m.pointInsideRegion([(z[0][0]+z[1][0])*.5,(z[0][1]+z[1][1])*.5],I)}function w(z){return{region:z,children:[]}}var S=w(null);function C(z,I){for(var G=0;G<z.children.length;G++){var M=z.children[G];if(b(I,M.region)){C(M,I);return}}for(var L=w(I),G=0;G<z.children.length;G++){var M=z.children[G];b(M.region,I)&&(L.children.push(M),z.children.splice(G,1),G--)}z.children.push(L)}for(var p=0;p<E.regions.length;p++){var F=E.regions[p];F.length<3||C(S,F)}function A(z,I){for(var G=0,M=z[z.length-1][0],L=z[z.length-1][1],B=[],X=0;X<z.length;X++){var ee=z[X][0],yt=z[X][1];B.push([ee,yt]),G+=yt*M-ee*L,M=ee,L=yt}var Ze=G<0;return Ze!==I&&B.reverse(),B.push([B[0][0],B[0][1]]),B}var O=[];function $(z){var I=[A(z.region,!1)];O.push(I);for(var G=0;G<z.children.length;G++)I.push(j(z.children[G]))}function j(z){for(var I=0;I<z.children.length;I++)$(z.children[I]);return A(z.region,!0)}for(var p=0;p<S.children.length;p++)$(S.children[p]);return O.length<=0?{type:"Polygon",coordinates:[]}:O.length==1?{type:"Polygon",coordinates:O[0]}:{type:"MultiPolygon",coordinates:O}}};ke.exports=_}),lg=r((nt,ke)=>{var _=bv(),d=Fg(),m=Jg(),E=ig(),b=Gg(),w=Rv(),S=!1,C=d(),p;p={buildLog:function(A){return A===!0?S=_():A===!1&&(S=!1),S===!1?!1:S.list},epsilon:function(A){return C.epsilon(A)},segments:function(A){var O=m(!0,C,S);return A.regions.forEach(O.addRegion),{segments:O.calculate(A.inverted),inverted:A.inverted}},combine:function(A,O){var $=m(!1,C,S);return{combined:$.calculate(A.segments,A.inverted,O.segments,O.inverted),inverted1:A.inverted,inverted2:O.inverted}},selectUnion:function(A){return{segments:b.union(A.combined,S),inverted:A.inverted1||A.inverted2}},selectIntersect:function(A){return{segments:b.intersect(A.combined,S),inverted:A.inverted1&&A.inverted2}},selectDifference:function(A){return{segments:b.difference(A.combined,S),inverted:A.inverted1&&!A.inverted2}},selectDifferenceRev:function(A){return{segments:b.differenceRev(A.combined,S),inverted:!A.inverted1&&A.inverted2}},selectXor:function(A){return{segments:b.xor(A.combined,S),inverted:A.inverted1!==A.inverted2}},polygon:function(A){return{regions:E(A.segments,C,S),inverted:A.inverted}},polygonFromGeoJSON:function(A){return w.toPolygon(p,A)},polygonToGeoJSON:function(A){return w.fromPolygon(p,C,A)},union:function(A,O){return F(A,O,p.selectUnion)},intersect:function(A,O){return F(A,O,p.selectIntersect)},difference:function(A,O){return F(A,O,p.selectDifference)},differenceRev:function(A,O){return F(A,O,p.selectDifferenceRev)},xor:function(A,O){return F(A,O,p.selectXor)}};function F(A,O,$){var j=p.segments(A),z=p.segments(O),I=p.combine(j,z),G=$(I);return p.polygon(G)}typeof window=="object"&&(window.PolyBool=p),ke.exports=p}),mv=r((nt,ke)=>{ke.exports=function(_,d,m,E){var b=_[0],w=_[1],S=!1;m===void 0&&(m=0),E===void 0&&(E=d.length);for(var C=E-m,p=0,F=C-1;p<C;F=p++){var A=d[p+m][0],O=d[p+m][1],$=d[F+m][0],j=d[F+m][1],z=O>w!=j>w&&b<($-A)*(w-O)/(j-O)+A;z&&(S=!S)}return S}}),Kg=r((nt,ke)=>{var _=om().dot,d=g().BADNUM,m=ke.exports={};m.tester=function(E){var b=E.slice(),w=b[0][0],S=w,C=b[0][1],p=C,F;for((b[b.length-1][0]!==b[0][0]||b[b.length-1][1]!==b[0][1])&&b.push(b[0]),F=1;F<b.length;F++)w=Math.min(w,b[F][0]),S=Math.max(S,b[F][0]),C=Math.min(C,b[F][1]),p=Math.max(p,b[F][1]);var A=!1,O;b.length===5&&(b[0][0]===b[1][0]?b[2][0]===b[3][0]&&b[0][1]===b[3][1]&&b[1][1]===b[2][1]&&(A=!0,O=function(G){return G[0]===b[0][0]}):b[0][1]===b[1][1]&&b[2][1]===b[3][1]&&b[0][0]===b[3][0]&&b[1][0]===b[2][0]&&(A=!0,O=function(G){return G[1]===b[0][1]}));function $(G,M){var L=G[0],B=G[1];return!(L===d||L<w||L>S||B===d||B<C||B>p||M&&O(G))}function j(G,M){var L=G[0],B=G[1];if(L===d||L<w||L>S||B===d||B<C||B>p)return!1;var X=b.length,ee=b[0][0],yt=b[0][1],Ze=0,Re,Q,xt,tt,ht;for(Re=1;Re<X;Re++)if(Q=ee,xt=yt,ee=b[Re][0],yt=b[Re][1],tt=Math.min(Q,ee),!(L<tt||L>Math.max(Q,ee)||B>Math.max(xt,yt)))if(B<Math.min(xt,yt))L!==tt&&Ze++;else{if(ee===Q?ht=B:ht=xt+(L-Q)*(yt-xt)/(ee-Q),B===ht)return!(Re===1&&M);B<=ht&&L!==tt&&Ze++}return Ze%2===1}var z=!0,I=b[0];for(F=1;F<b.length;F++)if(I[0]!==b[F][0]||I[1]!==b[F][1]){z=!1;break}return{xmin:w,xmax:S,ymin:C,ymax:p,pts:b,contains:A?$:j,isRect:A,degenerate:z}},m.isSegmentBent=function(E,b,w,S){var C=E[b],p=[E[w][0]-C[0],E[w][1]-C[1]],F=_(p,p),A=Math.sqrt(F),O=[-p[1]/A,p[0]/A],$,j,z;for($=b+1;$<w;$++)if(j=[E[$][0]-C[0],E[$][1]-C[1]],z=_(j,p),z<0||z>F||Math.abs(_(j,O))>S)return!0;return!1},m.filter=function(E,b){var w=[E[0]],S=0,C=0;function p(A){E.push(A);var O=w.length,$=S;w.splice(C+1);for(var j=$+1;j<E.length;j++)(j===E.length-1||m.isSegmentBent(E,$,j+1,b))&&(w.push(E[j]),w.length<O-2&&(S=j,C=w.length-1),$=j)}if(E.length>1){var F=E.pop();p(F)}return{addPt:p,raw:E,filtered:w}}}),jg=r((nt,ke)=>{ke.exports={BENDPX:1.5,MINSELECT:12,SELECTDELAY:100,SELECTID:"-select"}}),gv=r((nt,ke)=>{var _=lg(),d=mv(),m=y1(),E=Q0().dashStyle,b=Mn(),w=ey(),S=D0().makeEventData,C=iy(),p=C.freeMode,F=C.rectMode,A=C.drawMode,O=C.openMode,$=C.selectMode,j=Ue(),z=ty(),I=bt(),G=O1().clearOutline,M=Dv(),L=M.handleEllipse,B=M.readPaths,X=Wv().newShapes,ee=Zv(),yt=ly().activateLastSelection,Ze=et(),Re=Ze.sorterAsc,Q=Kg(),xt=gy(),tt=D1().getFromId,ht=xy(),it=$1().redrawReglTraces,ut=jg(),vt=ut.MINSELECT,_t=Q.filter,Le=Q.tester,wt=Iy(),St=wt.p2r,Ut=wt.axValue,kt=wt.getTransform;function jt(Yo){return Yo.subplot!==void 0}function aa(Yo,qp,Mt,Wt,xn){var Fp=!jt(Wt),Bp=p(xn),e0=F(xn),o0=O(xn),C0=A(xn),T0=$(xn),A0=xn==="drawline",J0=xn==="drawcircle",em=A0||J0,tm=Wt.gd,Nm=tm._fullLayout,o1=T0&&Nm.newselection.mode==="immediate"&&Fp,N1=Nm._zoomlayer,F1=Wt.element.getBoundingClientRect(),B1=Wt.plotinfo,u1=kt(B1),zm=qp-F1.left,R1=Mt-F1.top;Nm._calcInverseTransform(tm);var z1=Ze.apply3DTransform(Nm._invTransform)(zm,R1);zm=z1[0],R1=z1[1];var E1=Nm._invScaleX,g1=Nm._invScaleY,w1=zm,s1=R1,Q1="M"+zm+","+R1,og=Wt.xaxes[0],P1=Wt.yaxes[0],fg=og._length,bg=P1._length,Cg=Yo.altKey&&!(A(xn)&&o0),Ug,rg,Ng,dg,$m,Xg,Lt;Et(Yo,tm,Wt),Bp&&(Ug=_t([[zm,R1]],ut.BENDPX));var At=N1.selectAll("path.select-outline-"+B1.id).data([1]),Wp=C0?Nm.newshape:Nm.newselection;C0&&(Wt.hasText=Wp.label.text||Wp.label.texttemplate);var Qp=C0&&!o0?Wp.fillcolor:"rgba(0,0,0,0)",g0=Wp.line.color||(Fp?b.contrast(tm._fullLayout.plot_bgcolor):"#7f7f7f");At.enter().append("path").attr("class","select-outline select-outline-"+B1.id).style({opacity:C0?Wp.opacity/2:1,"stroke-dasharray":E(Wp.line.dash,Wp.line.width),"stroke-width":Wp.line.width+"px","shape-rendering":"crispEdges"}).call(b.stroke,g0).call(b.fill,Qp).attr("fill-rule","evenodd").classed("cursor-move",!!C0).attr("transform",u1).attr("d",Q1+"Z");var $p=N1.append("path").attr("class","zoombox-corners").style({fill:b.background,stroke:b.defaultLine,"stroke-width":1}).attr("transform",u1).attr("d","M0,0Z");if(C0&&Wt.hasText){var Xp=N1.select(".label-temp");Xp.empty()&&(Xp=N1.append("g").classed("label-temp",!0).classed("select-outline",!0).style({opacity:.8}))}var b0=Nm._uid+ut.SELECTID,s0=[],O0=ot(tm,Wt.xaxes,Wt.yaxes,Wt.subplot);o1&&!Yo.shiftKey&&(Wt._clearSubplotSelections=function(){if(Fp){var mm=og._id,Jm=P1._id;M0(tm,mm,Jm,O0);for(var qm=(tm.layout||{}).selections||[],b1=[],jm=!1,e1=0;e1<qm.length;e1++){var k1=Nm.selections[e1];!k1||k1.xref!==mm||k1.yref!==Jm?b1.push(qm[e1]):jm=!0}jm&&(tm._fullLayout._noEmitSelectedAtStart=!0,m.call("_guiRelayout",tm,{selections:b1}))}});var U0=bm(Wt);Wt.moveFn=function(mm,Jm){Wt._clearSubplotSelections&&(Wt._clearSubplotSelections(),Wt._clearSubplotSelections=void 0),w1=Math.max(0,Math.min(fg,E1*mm+zm)),s1=Math.max(0,Math.min(bg,g1*Jm+R1));var qm=Math.abs(w1-zm),b1=Math.abs(s1-R1);if(e0){var jm,e1,k1;if(T0){var Pg=Nm.selectdirection;switch(Pg==="any"?b1<Math.min(qm*.6,vt)?jm="h":qm<Math.min(b1*.6,vt)?jm="v":jm="d":jm=Pg,jm){case"h":e1=J0?bg/2:0,k1=bg;break;case"v":e1=J0?fg/2:0,k1=fg;break}}if(C0)switch(Nm.newshape.drawdirection){case"vertical":jm="h",e1=J0?bg/2:0,k1=bg;break;case"horizontal":jm="v",e1=J0?fg/2:0,k1=fg;break;case"ortho":qm<b1?(jm="h",e1=R1,k1=s1):(jm="v",e1=zm,k1=w1);break;default:jm="d"}jm==="h"?(dg=em?L(J0,[w1,e1],[w1,k1]):[[zm,e1],[zm,k1],[w1,k1],[w1,e1]],dg.xmin=em?w1:Math.min(zm,w1),dg.xmax=em?w1:Math.max(zm,w1),dg.ymin=Math.min(e1,k1),dg.ymax=Math.max(e1,k1),$p.attr("d","M"+dg.xmin+","+(R1-vt)+"h-4v"+2*vt+"h4ZM"+(dg.xmax-1)+","+(R1-vt)+"h4v"+2*vt+"h-4Z")):jm==="v"?(dg=em?L(J0,[e1,s1],[k1,s1]):[[e1,R1],[e1,s1],[k1,s1],[k1,R1]],dg.xmin=Math.min(e1,k1),dg.xmax=Math.max(e1,k1),dg.ymin=em?s1:Math.min(R1,s1),dg.ymax=em?s1:Math.max(R1,s1),$p.attr("d","M"+(zm-vt)+","+dg.ymin+"v-4h"+2*vt+"v4ZM"+(zm-vt)+","+(dg.ymax-1)+"v4h"+2*vt+"v-4Z")):jm==="d"&&(dg=em?L(J0,[zm,R1],[w1,s1]):[[zm,R1],[zm,s1],[w1,s1],[w1,R1]],dg.xmin=Math.min(zm,w1),dg.xmax=Math.max(zm,w1),dg.ymin=Math.min(R1,s1),dg.ymax=Math.max(R1,s1),$p.attr("d","M0,0Z"))}else Bp&&(Ug.addPt([w1,s1]),dg=Ug.filtered);if(Wt.selectionDefs&&Wt.selectionDefs.length?(Ng=w0(Wt.mergedPolygons,dg,Cg),dg.subtract=Cg,rg=te(Wt.selectionDefs.concat([dg]))):(Ng=[dg],rg=Le(dg)),I(ha(Ng,o0),At,Wt),T0){var H1=Gt(tm,!1),ov=H1.eventData?H1.eventData.points.slice():[];H1=Gt(tm,!1,rg,O0,Wt),rg=H1.selectionTesters,Lt=H1.eventData;var mg;Ug?mg=Ug.filtered:mg=W0(Ng),xt.throttle(b0,ut.SELECTDELAY,function(){s0=Rp(rg,O0);for(var cv=s0.slice(),Eg=0;Eg<ov.length;Eg++){for(var Qg=ov[Eg],lv=!1,vg=0;vg<cv.length;vg++)if(cv[vg].curveNumber===Qg.curveNumber&&cv[vg].pointNumber===Qg.pointNumber){lv=!0;break}lv||cv.push(Qg)}cv.length&&(Lt||(Lt={}),Lt.points=cv),U0(Lt,mg),Dm(tm,Lt)})}},Wt.clickFn=function(mm,Jm){if($p.remove(),tm._fullLayout._activeShapeIndex>=0){tm._fullLayout._deactivateShape(tm);return}if(!C0){var qm=Nm.clickmode;xt.done(b0).then(function(){if(xt.clear(b0),mm===2){for(At.remove(),$m=0;$m<O0.length;$m++)Xg=O0[$m],Xg._module.selectPoints(Xg,!1);if(n0(tm,O0),Z(Wt),km(tm),O0.length){var b1=O0[0].xaxis,jm=O0[0].yaxis;if(b1&&jm){for(var e1=[],k1=tm._fullLayout.selections,Pg=0;Pg<k1.length;Pg++){var H1=k1[Pg];H1&&(H1.xref!==b1._id||H1.yref!==jm._id)&&e1.push(H1)}e1.length<k1.length&&(tm._fullLayout._noEmitSelectedAtStart=!0,m.call("_guiRelayout",tm,{selections:e1}))}}}else qm.indexOf("select")>-1&&ca(Jm,tm,Wt.xaxes,Wt.yaxes,Wt.subplot,Wt,At),qm==="event"&&vm(tm,void 0);w.click(tm,Jm,B1.id)}).catch(Ze.error)}},Wt.doneFn=function(){$p.remove(),xt.done(b0).then(function(){xt.clear(b0),!o1&&dg&&Wt.selectionDefs&&(dg.subtract=Cg,Wt.selectionDefs.push(dg),Wt.mergedPolygons.length=0,[].push.apply(Wt.mergedPolygons,Ng)),(o1||C0)&&Z(Wt,o1),Wt.doneFnCompleted&&Wt.doneFnCompleted(s0),T0&&vm(tm,Lt)}).catch(Ze.error)}}function ca(Yo,qp,Mt,Wt,xn,Fp,Bp){var e0=qp._hoverdata,o0=qp._fullLayout,C0=o0.clickmode,T0=C0.indexOf("event")>-1,A0=[],J0,em,tm,Nm,o1,N1,F1,B1,u1,zm;if(It(e0)){Et(Yo,qp,Fp),J0=ot(qp,Mt,Wt,xn);var R1=Yt(e0,J0),z1=R1.pointNumbers.length>0;if(z1?Op(J0,R1):Hp(J0)&&(F1=Sr(R1))){for(Bp&&Bp.remove(),zm=0;zm<J0.length;zm++)em=J0[zm],em._module.selectPoints(em,!1);n0(qp,J0),Z(Fp),T0&&km(qp)}else{B1=Yo.shiftKey&&(F1!==void 0?F1:Sr(R1)),tm=Cp(R1.pointNumber,R1.searchInfo,B1);var E1=Fp.selectionDefs.concat([tm]);for(Nm=te(E1),zm=0;zm<J0.length;zm++)if(o1=J0[zm]._module.selectPoints(J0[zm],Nm),N1=_0(o1,J0[zm]),A0.length)for(var g1=0;g1<N1.length;g1++)A0.push(N1[g1]);else A0=N1;if(u1={points:A0},n0(qp,J0,u1),tm&&Fp&&Fp.selectionDefs.push(tm),Bp){var w1=Fp.mergedPolygons,s1=O(Fp.dragmode);I(ha(w1,s1),Bp,Fp)}T0&&vm(qp,u1)}}}function Cp(Yo,qp,Mt){return{pointNumber:Yo,searchInfo:qp,subtract:!!Mt}}function pt(Yo){return"pointNumber"in Yo&&"searchInfo"in Yo}function gt(Yo){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(qp,Mt,Wt,xn){var Fp=Yo.searchInfo.cd[0].trace.index,Bp=xn.cd[0].trace.index;return Bp===Fp&&Wt===Yo.pointNumber},isRect:!1,degenerate:!1,subtract:!!Yo.subtract}}function te(Yo){if(!Yo.length)return;for(var qp=[],Mt=pt(Yo[0])?0:Yo[0][0][0],Wt=Mt,xn=pt(Yo[0])?0:Yo[0][0][1],Fp=xn,Bp=0;Bp<Yo.length;Bp++)if(pt(Yo[Bp]))qp.push(gt(Yo[Bp]));else{var e0=Le(Yo[Bp]);e0.subtract=!!Yo[Bp].subtract,qp.push(e0),Mt=Math.min(Mt,e0.xmin),Wt=Math.max(Wt,e0.xmax),xn=Math.min(xn,e0.ymin),Fp=Math.max(Fp,e0.ymax)}function o0(C0,T0,A0,J0){for(var em=!1,tm=0;tm<qp.length;tm++)qp[tm].contains(C0,T0,A0,J0)&&(em=!qp[tm].subtract);return em}return{xmin:Mt,xmax:Wt,ymin:xn,ymax:Fp,pts:[],contains:o0,isRect:!1,degenerate:!1}}function Et(Yo,qp,Mt){var Wt=qp._fullLayout,xn=Mt.plotinfo,Fp=Mt.dragmode,Bp=Wt._lastSelectedSubplot&&Wt._lastSelectedSubplot===xn.id,e0=(Yo.shiftKey||Yo.altKey)&&!(A(Fp)&&O(Fp));Bp&&e0&&xn.selection&&xn.selection.selectionDefs&&!Mt.selectionDefs?(Mt.selectionDefs=xn.selection.selectionDefs,Mt.mergedPolygons=xn.selection.mergedPolygons):(!e0||!xn.selection)&&Z(Mt),Bp||(G(qp),Wt._lastSelectedSubplot=xn.id)}function zt(Yo){return Yo._fullLayout._activeShapeIndex>=0}function rt(Yo){return Yo._fullLayout._activeSelectionIndex>=0}function Z(Yo,qp){var Mt=Yo.dragmode,Wt=Yo.plotinfo,xn=Yo.gd;zt(xn)&&xn._fullLayout._deactivateShape(xn),rt(xn)&&xn._fullLayout._deactivateSelection(xn);var Fp=xn._fullLayout,Bp=Fp._zoomlayer,e0=A(Mt),o0=$(Mt);if(e0||o0){var C0=Bp.selectAll(".select-outline-"+Wt.id);if(C0&&xn._fullLayout._outlining){var T0;e0&&(T0=X(C0,Yo)),T0&&m.call("_guiRelayout",xn,{shapes:T0});var A0;o0&&!jt(Yo)&&(A0=ee(C0,Yo)),A0&&(xn._fullLayout._noEmitSelectedAtStart=!0,m.call("_guiRelayout",xn,{selections:A0}).then(function(){qp&&yt(xn)})),xn._fullLayout._outlining=!1}}Wt.selection={},Wt.selection.selectionDefs=Yo.selectionDefs=[],Wt.selection.mergedPolygons=Yo.mergedPolygons=[]}function we(Yo){return Yo._id}function ot(Yo,qp,Mt,Wt){if(!Yo.calcdata)return[];var xn=[],Fp=qp.map(we),Bp=Mt.map(we),e0,o0,C0;for(C0=0;C0<Yo.calcdata.length;C0++)if(e0=Yo.calcdata[C0],o0=e0[0].trace,!(o0.visible!==!0||!o0._module||!o0._module.selectPoints))if(jt({subplot:Wt})&&(o0.subplot===Wt||o0.geo===Wt))xn.push(mt(o0._module,e0,qp[0],Mt[0]));else if(o0.type==="splom"){if(o0._xaxes[Fp[0]]&&o0._yaxes[Bp[0]]){var T0=mt(o0._module,e0,qp[0],Mt[0]);T0.scene=Yo._fullLayout._splomScenes[o0.uid],xn.push(T0)}}else if(o0.type==="sankey"){var A0=mt(o0._module,e0,qp[0],Mt[0]);xn.push(A0)}else{if(Fp.indexOf(o0.xaxis)===-1&&(!o0._xA||!o0._xA.overlaying)||Bp.indexOf(o0.yaxis)===-1&&(!o0._yA||!o0._yA.overlaying))continue;xn.push(mt(o0._module,e0,tt(Yo,o0.xaxis),tt(Yo,o0.yaxis)))}return xn}function mt(Yo,qp,Mt,Wt){return{_module:Yo,cd:qp,xaxis:Mt,yaxis:Wt}}function It(Yo){return Yo&&Array.isArray(Yo)&&Yo[0].hoverOnBox!==!0}function Yt(Yo,qp){var Mt=Yo[0],Wt=-1,xn=[],Fp,Bp;for(Bp=0;Bp<qp.length;Bp++)if(Fp=qp[Bp],Mt.fullData.index===Fp.cd[0].trace.index){if(Mt.hoverOnBox===!0)break;Mt.pointNumber!==void 0?Wt=Mt.pointNumber:Mt.binNumber!==void 0&&(Wt=Mt.binNumber,xn=Mt.pointNumbers);break}return{pointNumber:Wt,pointNumbers:xn,searchInfo:Fp}}function Sr(Yo){var qp=Yo.searchInfo.cd[0].trace,Mt=Yo.pointNumber,Wt=Yo.pointNumbers,xn=Wt.length>0,Fp=xn?Wt[0]:Mt;return qp.selectedpoints?qp.selectedpoints.indexOf(Fp)>-1:!1}function Op(Yo,qp){var Mt=[],Wt,xn,Fp,Bp;for(Bp=0;Bp<Yo.length;Bp++)Wt=Yo[Bp],Wt.cd[0].trace.selectedpoints&&Wt.cd[0].trace.selectedpoints.length>0&&Mt.push(Wt);if(Mt.length===1&&(Fp=Mt[0]===qp.searchInfo,Fp&&(xn=qp.searchInfo.cd[0].trace,xn.selectedpoints.length===qp.pointNumbers.length))){for(Bp=0;Bp<qp.pointNumbers.length;Bp++)if(xn.selectedpoints.indexOf(qp.pointNumbers[Bp])<0)return!1;return!0}return!1}function Hp(Yo){var qp=0,Mt,Wt,xn;for(xn=0;xn<Yo.length;xn++)if(Mt=Yo[xn],Wt=Mt.cd[0].trace,Wt.selectedpoints&&(Wt.selectedpoints.length>1||(qp+=Wt.selectedpoints.length,qp>1)))return!1;return qp===1}function n0(Yo,qp,Mt){var Wt;for(Wt=0;Wt<qp.length;Wt++){var xn=qp[Wt].cd[0].trace._fullInput,Fp=Yo._fullLayout._tracePreGUI[xn.uid]||{};Fp.selectedpoints===void 0&&(Fp.selectedpoints=xn._input.selectedpoints||null)}var Bp;if(Mt){var e0=Mt.points||[];for(Wt=0;Wt<qp.length;Wt++)Bp=qp[Wt].cd[0].trace,Bp._input.selectedpoints=Bp._fullInput.selectedpoints=[],Bp._fullInput!==Bp&&(Bp.selectedpoints=[]);for(var o0=0;o0<e0.length;o0++){var C0=e0[o0],T0=C0.data,A0=C0.fullData,J0=C0.pointIndex,em=C0.pointIndices;em?([].push.apply(T0.selectedpoints,em),Bp._fullInput!==Bp&&[].push.apply(A0.selectedpoints,em)):(T0.selectedpoints.push(J0),Bp._fullInput!==Bp&&A0.selectedpoints.push(J0))}}else for(Wt=0;Wt<qp.length;Wt++)Bp=qp[Wt].cd[0].trace,delete Bp.selectedpoints,delete Bp._input.selectedpoints,Bp._fullInput!==Bp&&delete Bp._fullInput.selectedpoints;R0(Yo,qp)}function R0(Yo,qp){for(var Mt=!1,Wt=0;Wt<qp.length;Wt++){var xn=qp[Wt],Fp=xn.cd;m.traceIs(Fp[0].trace,"regl")&&(Mt=!0);var Bp=xn._module,e0=Bp.styleOnSelect||Bp.style;e0&&(e0(Yo,Fp,Fp[0].node3),Fp[0].nodeRangePlot3&&e0(Yo,Fp,Fp[0].nodeRangePlot3))}Mt&&(ht(Yo),it(Yo))}function w0(Yo,qp,Mt){for(var Wt=Mt?_.difference:_.union,xn=Wt({regions:Yo},{regions:[qp]}),Fp=xn.regions.reverse(),Bp=0;Bp<Fp.length;Bp++){var e0=Fp[Bp];e0.subtract=V0(e0,Fp.slice(0,Bp))}return Fp}function _0(Yo,qp){if(Array.isArray(Yo))for(var Mt=qp.cd,Wt=qp.cd[0].trace,xn=0;xn<Yo.length;xn++)Yo[xn]=S(Yo[xn],Wt,Mt);return Yo}function ha(Yo,qp){for(var Mt=[],Wt=0;Wt<Yo.length;Wt++){Mt[Wt]=[];for(var xn=0;xn<Yo[Wt].length;xn++){Mt[Wt][xn]=[],Mt[Wt][xn][0]=xn?"L":"M";for(var Fp=0;Fp<Yo[Wt][xn].length;Fp++)Mt[Wt][xn].push(Yo[Wt][xn][Fp])}qp||Mt[Wt].push(["Z",Mt[Wt][0][1],Mt[Wt][0][2]])}return Mt}function Rp(Yo,qp){for(var Mt=[],Wt,xn=[],Fp,Bp=0;Bp<qp.length;Bp++){var e0=qp[Bp];Fp=e0._module.selectPoints(e0,Yo),xn.push(Fp),Wt=_0(Fp,e0),Mt=Mt.concat(Wt)}return Mt}function Gt(Yo,qp,Mt,Wt,xn){var Fp=!!Wt,Bp,e0,o0;xn&&(Bp=xn.plotinfo,e0=xn.xaxes[0]._id,o0=xn.yaxes[0]._id);var C0=[],T0=[],A0=k0(Yo),J0=Yo._fullLayout;if(Bp){var em=J0._zoomlayer,tm=J0.dragmode,Nm=A(tm),o1=$(tm);if(Nm||o1){var N1=tt(Yo,e0,"x"),F1=tt(Yo,o0,"y");if(N1&&F1){var B1=em.selectAll(".select-outline-"+Bp.id);if(B1&&Yo._fullLayout._outlining&&B1.length){for(var u1=B1[0][0],zm=u1.getAttribute("d"),R1=B(zm,Yo,Bp),z1=[],E1=0;E1<R1.length;E1++){for(var g1=R1[E1],w1=[],s1=0;s1<g1.length;s1++)w1.push([$0(N1,g1[s1][1]),$0(F1,g1[s1][2])]);w1.xref=e0,w1.yref=o0,w1.subtract=V0(w1,z1),z1.push(w1)}A0=A0.concat(z1)}}}}var Q1=e0&&o0?[e0+o0]:J0._subplots.cartesian;Gp(Yo);for(var og={},P1=0;P1<Q1.length;P1++){var fg=Q1[P1],bg=fg.indexOf("y"),Cg=fg.slice(0,bg),Ug=fg.slice(bg),rg=e0&&o0?Mt:void 0;if(rg=I0(A0,Cg,Ug,rg),rg){var Ng=Wt;if(!Fp){var dg=tt(Yo,Cg,"x"),$m=tt(Yo,Ug,"y");Ng=ot(Yo,[dg],[$m],fg);for(var Xg=0;Xg<Ng.length;Xg++){var Lt=Ng[Xg],At=Lt.cd[0],Wp=At.trace;if(Lt._module.name==="scattergl"&&!At.t.xpx){var Qp=Wp.x,g0=Wp.y,$p=Wp._length;At.t.xpx=[],At.t.ypx=[];for(var Xp=0;Xp<$p;Xp++)At.t.xpx[Xp]=dg.c2p(Qp[Xp]),At.t.ypx[Xp]=$m.c2p(g0[Xp])}Lt._module.name==="splom"&&(og[Wp.uid]||(og[Wp.uid]=!0))}}var b0=Rp(rg,Ng);C0=C0.concat(b0),T0=T0.concat(Ng)}}var s0={points:C0};n0(Yo,T0,s0);var O0=J0.clickmode,U0=O0.indexOf("event")>-1&&qp;if(!Bp&&qp){var mm=k0(Yo,!0);if(mm.length){var Jm=mm[0].xref,qm=mm[0].yref;if(Jm&&qm){var b1=W0(mm),jm=F0([tt(Yo,Jm,"x"),tt(Yo,qm,"y")]);jm(s0,b1)}}Yo._fullLayout._noEmitSelectedAtStart?Yo._fullLayout._noEmitSelectedAtStart=!1:U0&&vm(Yo,s0),J0._reselect=!1}if(!Bp&&J0._deselect){var e1=J0._deselect;e0=e1.xref,o0=e1.yref,c0(e0,o0,T0)||M0(Yo,e0,o0,Wt),U0&&(s0.points.length?vm(Yo,s0):km(Yo)),J0._deselect=!1}return{eventData:s0,selectionTesters:Mt}}function Gp(Yo){var qp=Yo.calcdata;if(qp)for(var Mt=0;Mt<qp.length;Mt++){var Wt=qp[Mt][0],xn=Wt.trace,Fp=Yo._fullLayout._splomScenes;if(Fp){var Bp=Fp[xn.uid];Bp&&(Bp.selectBatch=[])}}}function c0(Yo,qp,Mt){for(var Wt=0;Wt<Mt.length;Wt++){var xn=Mt[Wt];if(xn.xaxis&&xn.xaxis._id===Yo&&xn.yaxis&&xn.yaxis._id===qp)return!0}return!1}function M0(Yo,qp,Mt,Wt){Wt=ot(Yo,[tt(Yo,qp,"x")],[tt(Yo,Mt,"y")],qp+Mt);for(var xn=0;xn<Wt.length;xn++){var Fp=Wt[xn];Fp._module.selectPoints(Fp,!1)}n0(Yo,Wt)}function I0(Yo,qp,Mt,Wt){for(var xn,Fp=0;Fp<Yo.length;Fp++){var Bp=Yo[Fp];if(!(qp!==Bp.xref||Mt!==Bp.yref))if(xn){var e0=!!Bp.subtract;xn=w0(xn,Bp,e0),Wt=te(xn)}else xn=[Bp],Wt=Le(Bp)}return Wt}function k0(Yo,qp){for(var Mt=[],Wt=Yo._fullLayout,xn=Wt.selections,Fp=xn.length,Bp=0;Bp<Fp;Bp++)if(!(qp&&Bp!==Wt._activeSelectionIndex)){var e0=xn[Bp];if(e0){var o0=e0.xref,C0=e0.yref,T0=tt(Yo,o0,"x"),A0=tt(Yo,C0,"y"),J0,em,tm,Nm,o1;if(e0.type==="rect"){o1=[];var N1=$0(T0,e0.x0),F1=$0(T0,e0.x1),B1=$0(A0,e0.y0),u1=$0(A0,e0.y1);o1=[[N1,B1],[N1,u1],[F1,u1],[F1,B1]],J0=Math.min(N1,F1),em=Math.max(N1,F1),tm=Math.min(B1,u1),Nm=Math.max(B1,u1),o1.xmin=J0,o1.xmax=em,o1.ymin=tm,o1.ymax=Nm,o1.xref=o0,o1.yref=C0,o1.subtract=!1,o1.isRect=!0,Mt.push(o1)}else if(e0.type==="path")for(var zm=e0.path.split("Z"),R1=[],z1=0;z1<zm.length;z1++){var E1=zm[z1];if(E1){E1+="Z";var g1=j.extractPathCoords(E1,z.paramIsX,"raw"),w1=j.extractPathCoords(E1,z.paramIsY,"raw");J0=1/0,em=-1/0,tm=1/0,Nm=-1/0,o1=[];for(var s1=0;s1<g1.length;s1++){var Q1=$0(T0,g1[s1]),og=$0(A0,w1[s1]);o1.push([Q1,og]),J0=Math.min(Q1,J0),em=Math.max(Q1,em),tm=Math.min(og,tm),Nm=Math.max(og,Nm)}o1.xmin=J0,o1.xmax=em,o1.ymin=tm,o1.ymax=Nm,o1.xref=o0,o1.yref=C0,o1.subtract=V0(o1,R1),R1.push(o1),Mt.push(o1)}}}}return Mt}function V0(Yo,qp){for(var Mt=!1,Wt=0;Wt<qp.length;Wt++)for(var xn=qp[Wt],Fp=0;Fp<Yo.length;Fp++)if(d(Yo[Fp],xn)){Mt=!Mt;break}return Mt}function $0(Yo,qp){return Yo.type==="date"&&(qp=qp.replace("_"," ")),Yo.type==="log"?Yo.c2p(qp):Yo.r2p(qp,null,Yo.calendar)}function W0(Yo){for(var qp=Yo.length,Mt=[],Wt=0;Wt<qp;Wt++){var xn=Yo[Wt];Mt=Mt.concat(xn),Mt=Mt.concat([xn[0]])}return gm(Mt)}function gm(Yo){return Yo.isRect=Yo.length===5&&Yo[0][0]===Yo[4][0]&&Yo[0][1]===Yo[4][1]&&Yo[0][0]===Yo[1][0]&&Yo[2][0]===Yo[3][0]&&Yo[0][1]===Yo[3][1]&&Yo[1][1]===Yo[2][1]||Yo[0][1]===Yo[1][1]&&Yo[2][1]===Yo[3][1]&&Yo[0][0]===Yo[3][0]&&Yo[1][0]===Yo[2][0],Yo.isRect&&(Yo.xmin=Math.min(Yo[0][0],Yo[2][0]),Yo.xmax=Math.max(Yo[0][0],Yo[2][0]),Yo.ymin=Math.min(Yo[0][1],Yo[2][1]),Yo.ymax=Math.max(Yo[0][1],Yo[2][1])),Yo}function F0(Yo){return function(qp,Mt){for(var Wt,xn,Fp=0;Fp<Yo.length;Fp++){var Bp=Yo[Fp],e0=Bp._id,o0=e0.charAt(0);if(Mt.isRect){Wt||(Wt={});var C0=Mt[o0+"min"],T0=Mt[o0+"max"];C0!==void 0&&T0!==void 0&&(Wt[e0]=[St(Bp,C0),St(Bp,T0)].sort(Re))}else xn||(xn={}),xn[e0]=Mt.map(Ut(Bp))}Wt&&(qp.range=Wt),xn&&(qp.lassoPoints=xn)}}function bm(Yo){var qp=Yo.plotinfo;return qp.fillRangeItems||F0(Yo.xaxes.concat(Yo.yaxes))}function Dm(Yo,qp){Yo.emit("plotly_selecting",qp)}function vm(Yo,qp){qp&&(qp.selections=(Yo.layout||{}).selections||[]),Yo.emit("plotly_selected",qp)}function km(Yo){Yo.emit("plotly_deselect",null)}ke.exports={reselect:Gt,prepSelect:aa,clearOutline:G,clearSelectionsCache:Z,selectOnClick:ca}}),ky=r((nt,ke)=>{ke.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]}),ax=r((nt,ke)=>{ke.exports={axisRefDescription:function(_,d,m){return["If set to a",_,"axis id (e.g. *"+_+"* or","*"+_+"2*), the `"+_+"` position refers to a",_,"coordinate. If set to *paper*, the `"+_+"`","position refers to the distance from the",d,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",d,"("+m+"). If set to a",_,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",d,"of the domain of that axis: e.g.,","*"+_+"2 domain* refers to the domain of the second",_," axis and a",_,"position of 0.5 refers to the","point between the",d,"and the",m,"of the domain of the","second",_,"axis."].join(" ")}}}),ix=r((nt,ke)=>{var _=ky(),d=ct(),m=Vm(),E=Fm().templatedArray;ax(),ke.exports=E("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:d({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:_.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:_.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",m.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",m.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",m.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",m.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:d({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc"})}),Mx=r((nt,ke)=>{ke.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}}),t2=r((nt,ke)=>{ke.exports=function(_){return{valType:"color",editType:"style",anim:!0}}}),r2=r((nt,ke)=>{var _=Iv().axisHoverFormat,d=pm().texttemplateAttrs,m=pm().hovertemplateAttrs,E=N(),b=ct(),w=a1().dash,S=a1().pattern,C=Q0(),p=Mx(),F=se().extendFlat,A=t2();function O(z){return{valType:"any",dflt:0,editType:"calc"}}function $(z){return{valType:"any",editType:"calc"}}function j(z){return{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"}}ke.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:O(),yperiod:O(),xperiod0:$(),yperiod0:$(),xperiodalignment:j(),yperiodalignment:j(),xhoverformat:_("x"),yhoverformat:_("y"),offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:d({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:m({},{keys:p.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:F({},w,{editType:"style"}),backoff:{valType:"number",min:0,dflt:"auto",arrayOk:!0,editType:"plot"},simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:A(!0),fillgradient:F({type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],dflt:"none",editType:"calc"},start:{valType:"number",editType:"calc"},stop:{valType:"number",editType:"calc"},colorscale:{valType:"colorscale",editType:"style"},editType:"calc"}),fillpattern:S,marker:F({symbol:{valType:"enumerated",values:C.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},angle:{valType:"angle",dflt:0,arrayOk:!0,editType:"plot",anim:!1},angleref:{valType:"enumerated",values:["previous","up"],dflt:"up",editType:"plot",anim:!1},standoff:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"plot",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:F({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},E("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},E("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:b({editType:"calc",colorEditType:"style",arrayOk:!0}),zorder:{valType:"integer",dflt:0,editType:"plot"}}}),B3=r((nt,ke)=>{var _=ix(),d=r2().line,m=a1().dash,E=se().extendFlat,b=Om().overrideAll,w=Fm().templatedArray;ax(),ke.exports=b(w("selection",{type:{valType:"enumerated",values:["rect","path"]},xref:E({},_.xref,{}),yref:E({},_.yref,{}),x0:{valType:"any"},x1:{valType:"any"},y0:{valType:"any"},y1:{valType:"any"},path:{valType:"string",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:.7,editType:"arraydraw"},line:{color:d.color,width:E({},d.width,{min:1,dflt:1}),dash:E({},m,{dflt:"dot"})}}),"arraydraw","from-root")}),r5=r((nt,ke)=>{var _=et(),d=Im(),m=Dt(),E=B3(),b=Ue();ke.exports=function(S,C){m(S,C,{name:"selections",handleItemDefaults:w});for(var p=C.selections,F=0;F<p.length;F++){var A=p[F];A&&A.path===void 0&&(A.x0===void 0||A.x1===void 0||A.y0===void 0||A.y1===void 0)&&(C.selections[F]=null)}};function w(S,C,p){function F(ht,it){return _.coerce(S,C,E,ht,it)}var A=F("path"),O=A?"path":"rect",$=F("type",O),j=$!=="path";j&&delete C.path,F("opacity"),F("line.color"),F("line.width"),F("line.dash");for(var z=["x","y"],I=0;I<2;I++){var G=z[I],M={_fullLayout:p},L,B,X,ee=d.coerceRef(S,C,M,G);if(L=d.getFromId(M,ee),L._selectionIndices.push(C._index),X=b.rangeToShapePosition(L),B=b.shapePositionToRange(L),j){var yt=G+"0",Ze=G+"1",Re=S[yt],Q=S[Ze];S[yt]=B(S[yt],!0),S[Ze]=B(S[Ze],!0),d.coercePosition(C,M,F,ee,yt),d.coercePosition(C,M,F,ee,Ze);var xt=C[yt],tt=C[Ze];xt!==void 0&&tt!==void 0&&(C[yt]=X(xt),C[Ze]=X(tt),S[yt]=Re,S[Ze]=Q)}}j&&_.noneOrAll(S,C,["x0","x1","y0","y1"])}}),n5=r((nt,ke)=>{ke.exports=function(_,d,m){m("newselection.mode");var E=m("newselection.line.width");E&&(m("newselection.line.color"),m("newselection.line.dash")),m("activeselection.fillcolor"),m("activeselection.opacity")}}),k_=r((nt,ke)=>{var _=y1(),d=et(),m=D1();ke.exports=function(E){return function(b,w){var S=b[E];if(Array.isArray(S))for(var C=_.subplotsRegistry.cartesian,p=C.idRegex,F=w._subplots,A=F.xaxis,O=F.yaxis,$=F.cartesian,j=w._has("cartesian"),z=0;z<S.length;z++){var I=S[z];if(d.isPlainObject(I)){var G=m.cleanId(I.xref,"x",!1),M=m.cleanId(I.yref,"y",!1),L=p.x.test(G),B=p.y.test(M);if(L||B){j||d.pushUnique(w._basePlotModules,C);var X=!1;L&&A.indexOf(G)===-1&&(A.push(G),X=!0),B&&O.indexOf(M)===-1&&(O.push(M),X=!0),X&&L&&B&&$.push(G+M)}}}}}}),Y2=r((nt,ke)=>{var _=ly(),d=gv();ke.exports={moduleType:"component",name:"selections",layoutAttributes:B3(),supplyLayoutDefaults:r5(),supplyDrawNewSelectionDefaults:n5(),includeBasePlot:k_()("selections"),draw:_.draw,drawOne:_.drawOne,reselect:d.reselect,prepSelect:d.prepSelect,clearOutline:d.clearOutline,clearSelectionsCache:d.clearSelectionsCache,selectOnClick:d.selectOnClick}}),Jy=r((nt,ke)=>{var _=o(),d=et(),m=d.numberFormat,E=ie(),b=L1(),w=y1(),S=d.strTranslate,C=G1(),p=Mn(),F=Q0(),A=ey(),O=Im(),$=Y1(),j=t1(),z=iy(),I=z.selectingOrDrawing,G=z.freeMode,M=K1().FROM_TL,L=xy(),B=$1().redrawReglTraces,X=cg(),ee=D1().getFromId,yt=Y2().prepSelect,Ze=Y2().clearOutline,Re=Y2().selectOnClick,Q=qg(),xt=Vm(),tt=xt.MINDRAG,ht=xt.MINZOOM,it=!0;function ut(mt,It,Yt,Sr,Op,Hp,n0,R0){var w0=mt._fullLayout._zoomlayer,_0=n0+R0==="nsew",ha=(n0+R0).length===1,Rp,Gt,Gp,c0,M0,I0,k0,V0,$0,W0,gm,F0,bm,Dm,vm,km,Yo,qp,Mt,Wt,xn,Fp,Bp;Yt+=It.yaxis._shift;function e0(){if(Rp=It.xaxis,Gt=It.yaxis,$0=Rp._length,W0=Gt._length,k0=Rp._offset,V0=Gt._offset,Gp={},Gp[Rp._id]=Rp,c0={},c0[Gt._id]=Gt,n0&&R0)for(var At=It.overlays,Wp=0;Wp<At.length;Wp++){var Qp=At[Wp].xaxis;Gp[Qp._id]=Qp;var g0=At[Wp].yaxis;c0[g0._id]=g0}M0=ot(Gp),I0=ot(c0),bm=Le(M0,R0),Dm=Le(I0,n0),vm=!Dm&&!bm,F0=Z(mt,mt._fullLayout._axisMatchGroups,Gp,c0),gm=Z(mt,mt._fullLayout._axisConstraintGroups,Gp,c0,F0);var $p=gm.isSubplotConstrained||F0.isSubplotConstrained;km=R0||$p,Yo=n0||$p;var Xp=mt._fullLayout;qp=Xp._has("scattergl"),Mt=Xp._has("splom"),Wt=Xp._has("svg")}e0();var o0=jt(Dm+bm,mt._fullLayout.dragmode,_0),C0=_t(It,n0+R0+"drag",o0,Yt,Sr,Op,Hp);if(vm&&!_0)return C0.onmousedown=null,C0.style.pointerEvents="none",C0;var T0={element:C0,gd:mt,plotinfo:It};T0.prepFn=function(At,Wp,Qp){var g0=T0.dragmode,$p=mt._fullLayout.dragmode;$p!==g0&&(T0.dragmode=$p),e0(),Fp=mt._fullLayout._invScaleX,Bp=mt._fullLayout._invScaleY,vm||(_0?At.shiftKey?$p==="pan"?$p="zoom":I($p)||($p="pan"):At.ctrlKey&&($p="pan"):$p="pan"),G($p)?T0.minDrag=1:T0.minDrag=void 0,I($p)?(T0.xaxes=M0,T0.yaxes=I0,yt(At,Wp,Qp,T0,$p)):(T0.clickFn=J0,I(g0)&&A0(),vm||($p==="zoom"?(T0.moveFn=E1,T0.doneFn=w1,T0.minDrag=1,z1(At,Wp,Qp)):$p==="pan"&&(T0.moveFn=bg,T0.doneFn=Ng))),mt._fullLayout._redrag=function(){var Xp=mt._dragdata;if(Xp&&Xp.element===C0){var b0=mt._fullLayout.dragmode;I(b0)||(e0(),dg([0,0,$0,W0]),T0.moveFn(Xp.dx,Xp.dy))}}};function A0(){T0.plotinfo.selection=!1,Ze(mt)}function J0(At,Wp){var Qp=T0.gd;if(Qp._fullLayout._activeShapeIndex>=0){Qp._fullLayout._deactivateShape(Qp);return}var g0=Qp._fullLayout.clickmode;if(gt(Qp),At===2&&!ha&&rg(),_0)g0.indexOf("select")>-1&&Re(Wp,Qp,M0,I0,It.id,T0),g0.indexOf("event")>-1&&A.click(Qp,Wp,It.id);else if(At===1&&ha){var $p=n0?Gt:Rp,Xp=n0==="s"||R0==="w"?0:1,b0=$p._name+".range["+Xp+"]",s0=wt($p,Xp),O0="left",U0="middle";if($p.fixedrange)return;n0?(U0=n0==="n"?"top":"bottom",$p.side==="right"&&(O0="right")):R0==="e"&&(O0="right"),Qp._context.showAxisRangeEntryBoxes&&_.select(C0).call(C.makeEditable,{gd:Qp,immediate:!0,background:Qp._fullLayout.paper_bgcolor,text:String(s0),fill:$p.tickfont?$p.tickfont.color:"#444",horizontalAlign:O0,verticalAlign:U0}).on("edit",function(mm){var Jm=$p.d2r(mm);Jm!==void 0&&w.call("_guiRelayout",Qp,b0,Jm)})}}j.init(T0);var em,tm,Nm,o1,N1,F1,B1,u1,zm,R1;function z1(At,Wp,Qp){var g0=C0.getBoundingClientRect();em=Wp-g0.left,tm=Qp-g0.top,mt._fullLayout._calcInverseTransform(mt);var $p=d.apply3DTransform(mt._fullLayout._invTransform)(em,tm);em=$p[0],tm=$p[1],Nm={l:em,r:em,w:0,t:tm,b:tm,h:0},o1=mt._hmpixcount?mt._hmlumcount/mt._hmpixcount:E(mt._fullLayout.plot_bgcolor).getLuminance(),N1="M0,0H"+$0+"V"+W0+"H0V0",F1=!1,B1="xy",R1=!1,u1=aa(w0,o1,k0,V0,N1),zm=ca(w0,k0,V0)}function E1(At,Wp){if(mt._transitioningWithDuration)return!1;var Qp=Math.max(0,Math.min($0,Fp*At+em)),g0=Math.max(0,Math.min(W0,Bp*Wp+tm)),$p=Math.abs(Qp-em),Xp=Math.abs(g0-tm);Nm.l=Math.min(em,Qp),Nm.r=Math.max(em,Qp),Nm.t=Math.min(tm,g0),Nm.b=Math.max(tm,g0);function b0(){B1="",Nm.r=Nm.l,Nm.t=Nm.b,zm.attr("d","M0,0Z")}if(gm.isSubplotConstrained)$p>ht||Xp>ht?(B1="xy",$p/$0>Xp/W0?(Xp=$p*W0/$0,tm>g0?Nm.t=tm-Xp:Nm.b=tm+Xp):($p=Xp*$0/W0,em>Qp?Nm.l=em-$p:Nm.r=em+$p),zm.attr("d",rt(Nm))):b0();else if(F0.isSubplotConstrained)if($p>ht||Xp>ht){B1="xy";var s0=Math.min(Nm.l/$0,(W0-Nm.b)/W0),O0=Math.max(Nm.r/$0,(W0-Nm.t)/W0);Nm.l=s0*$0,Nm.r=O0*$0,Nm.b=(1-s0)*W0,Nm.t=(1-O0)*W0,zm.attr("d",rt(Nm))}else b0();else!Dm||Xp<Math.min(Math.max($p*.6,tt),ht)?$p<tt||!bm?b0():(Nm.t=0,Nm.b=W0,B1="x",zm.attr("d",Et(Nm,tm))):!bm||$p<Math.min(Xp*.6,ht)?(Nm.l=0,Nm.r=$0,B1="y",zm.attr("d",zt(Nm,em))):(B1="xy",zm.attr("d",rt(Nm)));Nm.w=Nm.r-Nm.l,Nm.h=Nm.b-Nm.t,B1&&(R1=!0),mt._dragged=R1,Cp(u1,zm,Nm,N1,F1,o1),g1(),mt.emit("plotly_relayouting",xn),F1=!0}function g1(){xn={},(B1==="xy"||B1==="x")&&(St(M0,Nm.l/$0,Nm.r/$0,xn,gm.xaxes),Cg("x",xn)),(B1==="xy"||B1==="y")&&(St(I0,(W0-Nm.b)/W0,(W0-Nm.t)/W0,xn,gm.yaxes),Cg("y",xn))}function w1(){g1(),gt(mt),Ng(),te(mt)}var s1=[0,0,$0,W0],Q1=null,og=xt.REDRAWDELAY,P1=It.mainplot?mt._fullLayout._plots[It.mainplot]:It;function fg(At){if(!mt._context._scrollZoom.cartesian&&!mt._fullLayout._enablescrollzoom)return;if(A0(),mt._transitioningWithDuration){At.preventDefault(),At.stopPropagation();return}e0(),clearTimeout(Q1);var Wp=-At.deltaY;if(isFinite(Wp)||(Wp=At.wheelDelta/10),!isFinite(Wp)){d.log("Did not find wheel motion attributes: ",At);return}var Qp=Math.exp(-Math.min(Math.max(Wp,-20),20)/200),g0=P1.draglayer.select(".nsewdrag").node().getBoundingClientRect(),$p=(At.clientX-g0.left)/g0.width,Xp=(g0.bottom-At.clientY)/g0.height,b0;function s0(O0,U0,mm){if(O0.fixedrange)return;var Jm=d.simpleMap(O0.range,O0.r2l),qm=Jm[0]+(Jm[1]-Jm[0])*U0;function b1(jm){return O0.l2r(qm+(jm-qm)*mm)}O0.range=Jm.map(b1)}if(km){for(R0||($p=.5),b0=0;b0<M0.length;b0++)s0(M0[b0],$p,Qp);Cg("x"),s1[2]*=Qp,s1[0]+=s1[2]*$p*(1/Qp-1)}if(Yo){for(n0||(Xp=.5),b0=0;b0<I0.length;b0++)s0(I0[b0],Xp,Qp);Cg("y"),s1[3]*=Qp,s1[1]+=s1[3]*(1-Xp)*(1/Qp-1)}dg(s1),Ug(),mt.emit("plotly_relayouting",xn),Q1=setTimeout(function(){mt._fullLayout&&(s1=[0,0,$0,W0],Ng())},og),At.preventDefault()}n0.length*R0.length!==1&&we(C0,fg);function bg(At,Wp){if(At=At*Fp,Wp=Wp*Bp,mt._transitioningWithDuration)return;if(mt._fullLayout._replotting=!0,bm==="ew"||Dm==="ns"){var Qp=bm?-At:0,g0=Dm?-Wp:0;if(F0.isSubplotConstrained){if(bm&&Dm){var $p=(At/$0-Wp/W0)/2;At=$p*$0,Wp=-$p*W0,Qp=-At,g0=-Wp}Dm?Qp=-g0*$0/W0:g0=-Qp*W0/$0}bm&&(Ut(M0,At),Cg("x")),Dm&&(Ut(I0,Wp),Cg("y")),dg([Qp,g0,$0,W0]),Ug(),mt.emit("plotly_relayouting",xn);return}function Xp(b1,jm,e1){for(var k1=1-jm,Pg,H1,ov=0;ov<b1.length;ov++){var mg=b1[ov];if(!mg.fixedrange){Pg=mg,H1=mg._rl[k1]+(mg._rl[jm]-mg._rl[k1])/kt(e1/mg._length);var cv=mg.l2r(H1);cv!==!1&&cv!==void 0&&(mg.range[jm]=cv)}}return Pg._length*(Pg._rl[jm]-H1)/(Pg._rl[jm]-Pg._rl[k1])}var b0=bm==="w"==(Dm==="n")?1:-1;if(bm&&Dm&&(gm.isSubplotConstrained||F0.isSubplotConstrained)){var s0=(At/$0+b0*Wp/W0)/2;At=s0*$0,Wp=b0*s0*W0}var O0,U0;if(bm==="w"?At=Xp(M0,0,At):bm==="e"?At=Xp(M0,1,-At):bm||(At=0),Dm==="n"?Wp=Xp(I0,1,Wp):Dm==="s"?Wp=Xp(I0,0,-Wp):Dm||(Wp=0),O0=bm==="w"?At:0,U0=Dm==="n"?Wp:0,gm.isSubplotConstrained&&!F0.isSubplotConstrained||F0.isSubplotConstrained&&bm&&Dm&&b0>0){var mm;if(F0.isSubplotConstrained||!bm&&Dm.length===1){for(mm=0;mm<M0.length;mm++)M0[mm].range=M0[mm]._r.slice(),Q(M0[mm],1-Wp/W0);At=Wp*$0/W0,O0=At/2}if(F0.isSubplotConstrained||!Dm&&bm.length===1){for(mm=0;mm<I0.length;mm++)I0[mm].range=I0[mm]._r.slice(),Q(I0[mm],1-At/$0);Wp=At*W0/$0,U0=Wp/2}}(!F0.isSubplotConstrained||!Dm)&&Cg("x"),(!F0.isSubplotConstrained||!bm)&&Cg("y");var Jm=$0-At,qm=W0-Wp;F0.isSubplotConstrained&&!(bm&&Dm)&&(bm?(U0=O0?0:At*W0/$0,qm=Jm*W0/$0):(O0=U0?0:Wp*$0/W0,Jm=qm*$0/W0)),dg([O0,U0,Jm,qm]),Ug(),mt.emit("plotly_relayouting",xn)}function Cg(At,Wp){for(var Qp=F0.isSubplotConstrained?{x:I0,y:M0}[At]:F0[At+"axes"],g0=F0.isSubplotConstrained?{x:M0,y:I0}[At]:[],$p=0;$p<Qp.length;$p++){var Xp=Qp[$p],b0=Xp._id,s0=F0.xLinks[b0]||F0.yLinks[b0],O0=g0[0]||Gp[s0]||c0[s0];O0&&(Wp?(Wp[Xp._name+".range[0]"]=Wp[O0._name+".range[0]"],Wp[Xp._name+".range[1]"]=Wp[O0._name+".range[1]"]):Xp.range=O0.range.slice())}}function Ug(){var At=[],Wp;function Qp(b0){for(Wp=0;Wp<b0.length;Wp++)b0[Wp].fixedrange||At.push(b0[Wp]._id)}function g0(b0,s0){for(Wp=0;Wp<b0.length;Wp++){var O0=b0[Wp],U0=O0[s0];!O0.fixedrange&&U0.tickmode==="sync"&&At.push(U0._id)}}for(km&&(Qp(M0),Qp(gm.xaxes),Qp(F0.xaxes),g0(It.overlays,"xaxis")),Yo&&(Qp(I0),Qp(gm.yaxes),Qp(F0.yaxes),g0(It.overlays,"yaxis")),xn={},Wp=0;Wp<At.length;Wp++){var $p=At[Wp],Xp=ee(mt,$p);O.drawOne(mt,Xp,{skipTitle:!0}),xn[Xp._name+".range[0]"]=Xp.range[0],xn[Xp._name+".range[1]"]=Xp.range[1]}O.redrawComponents(mt,At)}function rg(){if(!mt._transitioningWithDuration){var At=mt._context.doubleClick,Wp=[];bm&&(Wp=Wp.concat(M0)),Dm&&(Wp=Wp.concat(I0)),F0.xaxes&&(Wp=Wp.concat(F0.xaxes)),F0.yaxes&&(Wp=Wp.concat(F0.yaxes));var Qp={},g0,$p;if(At==="reset+autosize")for(At="autosize",$p=0;$p<Wp.length;$p++){g0=Wp[$p];var Xp=g0._rangeInitial0,b0=g0._rangeInitial1,s0=Xp!==void 0||b0!==void 0;if(s0&&(Xp!==void 0&&Xp!==g0.range[0]||b0!==void 0&&b0!==g0.range[1])||!s0&&g0.autorange!==!0){At="reset";break}}if(At==="autosize")for($p=0;$p<Wp.length;$p++)g0=Wp[$p],g0.fixedrange||(Qp[g0._name+".autorange"]=!0);else if(At==="reset"){for((bm||gm.isSubplotConstrained)&&(Wp=Wp.concat(gm.xaxes)),Dm&&!gm.isSubplotConstrained&&(Wp=Wp.concat(gm.yaxes)),gm.isSubplotConstrained&&(bm?Dm||(Wp=Wp.concat(I0)):Wp=Wp.concat(M0)),$p=0;$p<Wp.length;$p++)if(g0=Wp[$p],!g0.fixedrange){var O0=g0._name,U0=g0._autorangeInitial;g0._rangeInitial0===void 0&&g0._rangeInitial1===void 0?Qp[O0+".autorange"]=!0:g0._rangeInitial0===void 0?(Qp[O0+".autorange"]=U0,Qp[O0+".range"]=[null,g0._rangeInitial1]):g0._rangeInitial1===void 0?(Qp[O0+".range"]=[g0._rangeInitial0,null],Qp[O0+".autorange"]=U0):Qp[O0+".range"]=[g0._rangeInitial0,g0._rangeInitial1]}}mt.emit("plotly_doubleclick",null),w.call("_guiRelayout",mt,Qp)}}function Ng(){dg([0,0,$0,W0]),d.syncOrAsync([X.previousPromises,function(){mt._fullLayout._replotting=!1,w.call("_guiRelayout",mt,xn)}],mt)}function dg(At){var Wp=mt._fullLayout,Qp=Wp._plots,g0=Wp._subplots.cartesian,$p,Xp,b0,s0;if(Mt&&w.subplotsRegistry.splom.drag(mt),qp){for($p=0;$p<g0.length;$p++)if(Xp=Qp[g0[$p]],b0=Xp.xaxis,s0=Xp.yaxis,Xp._scene){b0.limitRange&&b0.limitRange(),s0.limitRange&&s0.limitRange();var O0=d.simpleMap(b0.range,b0.r2l),U0=d.simpleMap(s0.range,s0.r2l);Xp._scene.update({range:[O0[0],U0[0],O0[1],U0[1]]})}}if((Mt||qp)&&(L(mt),B(mt)),Wt){var mm=At[2]/Rp._length,Jm=At[3]/Gt._length;for($p=0;$p<g0.length;$p++){Xp=Qp[g0[$p]],b0=Xp.xaxis,s0=Xp.yaxis;var qm=(km||F0.isSubplotConstrained)&&!b0.fixedrange&&Gp[b0._id],b1=(Yo||F0.isSubplotConstrained)&&!s0.fixedrange&&c0[s0._id],jm,e1,k1,Pg;if(qm?(jm=mm,k1=R0||F0.isSubplotConstrained?At[0]:Lt(b0,jm)):F0.xaHash[b0._id]?(jm=mm,k1=At[0]*b0._length/Rp._length):F0.yaHash[b0._id]?(jm=Jm,k1=Dm==="ns"?-At[1]*b0._length/Gt._length:Lt(b0,jm,{n:"top",s:"bottom"}[Dm])):(jm=$m(b0,mm,Jm),k1=Xg(b0,jm)),jm>1&&(b0.maxallowed!==void 0&&km===(b0.range[0]<b0.range[1]?"e":"w")||b0.minallowed!==void 0&&km===(b0.range[0]<b0.range[1]?"w":"e"))&&(jm=1,k1=0),b1?(e1=Jm,Pg=n0||F0.isSubplotConstrained?At[1]:Lt(s0,e1)):F0.yaHash[s0._id]?(e1=Jm,Pg=At[1]*s0._length/Gt._length):F0.xaHash[s0._id]?(e1=mm,Pg=bm==="ew"?-At[0]*s0._length/Rp._length:Lt(s0,e1,{e:"right",w:"left"}[bm])):(e1=$m(s0,mm,Jm),Pg=Xg(s0,e1)),e1>1&&(s0.maxallowed!==void 0&&Yo===(s0.range[0]<s0.range[1]?"n":"s")||s0.minallowed!==void 0&&Yo===(s0.range[0]<s0.range[1]?"s":"n"))&&(e1=1,Pg=0),!(!jm&&!e1)){jm||(jm=1),e1||(e1=1);var H1=b0._offset-k1/jm,ov=s0._offset-Pg/e1;Xp.clipRect.call(F.setTranslate,k1,Pg).call(F.setScale,jm,e1),Xp.plot.call(F.setTranslate,H1,ov).call(F.setScale,1/jm,1/e1),(jm!==Xp.xScaleFactor||e1!==Xp.yScaleFactor)&&(F.setPointGroupScale(Xp.zoomScalePts,jm,e1),F.setTextPointsScale(Xp.zoomScaleTxt,jm,e1)),F.hideOutsideRangePoints(Xp.clipOnAxisFalseTraces,Xp),Xp.xScaleFactor=jm,Xp.yScaleFactor=e1}}}}function $m(At,Wp,Qp){return At.fixedrange?0:km&&gm.xaHash[At._id]?Wp:Yo&&(gm.isSubplotConstrained?gm.xaHash:gm.yaHash)[At._id]?Qp:0}function Xg(At,Wp){return Wp?(At.range=At._r.slice(),Q(At,Wp),Lt(At,Wp)):0}function Lt(At,Wp,Qp){return At._length*(1-Wp)*M[Qp||At.constraintoward||"middle"]}return C0}function vt(mt,It,Yt,Sr){var Op=d.ensureSingle(mt.draglayer,It,Yt,function(Hp){Hp.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",mt.id)});return Op.call($,Sr),Op.node()}function _t(mt,It,Yt,Sr,Op,Hp,n0){var R0=vt(mt,"rect",It,Yt);return _.select(R0).call(F.setRect,Sr,Op,Hp,n0),R0}function Le(mt,It){for(var Yt=0;Yt<mt.length;Yt++)if(!mt[Yt].fixedrange)return It;return""}function wt(mt,It){var Yt=mt.range[It],Sr=Math.abs(Yt-mt.range[1-It]),Op;return mt.type==="date"?Yt:mt.type==="log"?(Op=Math.ceil(Math.max(0,-Math.log(Sr)/Math.LN10))+3,m("."+Op+"g")(Math.pow(10,Yt))):(Op=Math.floor(Math.log(Math.abs(Yt))/Math.LN10)-Math.floor(Math.log(Sr)/Math.LN10)+4,m("."+String(Op)+"g")(Yt))}function St(mt,It,Yt,Sr,Op){for(var Hp=0;Hp<mt.length;Hp++){var n0=mt[Hp];if(!n0.fixedrange)if(n0.rangebreaks){var R0=n0._id.charAt(0)==="y",w0=R0?1-It:It,_0=R0?1-Yt:Yt;Sr[n0._name+".range[0]"]=n0.l2r(n0.p2l(w0*n0._length)),Sr[n0._name+".range[1]"]=n0.l2r(n0.p2l(_0*n0._length))}else{var ha=n0._rl[0],Rp=n0._rl[1]-ha;Sr[n0._name+".range[0]"]=n0.l2r(ha+Rp*It),Sr[n0._name+".range[1]"]=n0.l2r(ha+Rp*Yt)}}if(Op&&Op.length){var Gt=(It+(1-Yt))/2;St(Op,Gt,1-Gt,Sr,[])}}function Ut(mt,It){for(var Yt=0;Yt<mt.length;Yt++){var Sr=mt[Yt];if(!Sr.fixedrange){if(Sr.rangebreaks){var Op=0,Hp=Sr._length,n0=Sr.p2l(Op+It)-Sr.p2l(Op),R0=Sr.p2l(Hp+It)-Sr.p2l(Hp),w0=(n0+R0)/2;Sr.range=[Sr.l2r(Sr._rl[0]-w0),Sr.l2r(Sr._rl[1]-w0)]}else Sr.range=[Sr.l2r(Sr._rl[0]-It/Sr._m),Sr.l2r(Sr._rl[1]-It/Sr._m)];Sr.limitRange&&Sr.limitRange()}}}function kt(mt){return 1-(mt>=0?Math.min(mt,.9):1/(1/Math.max(mt,-.3)+3.222))}function jt(mt,It,Yt){return mt?mt==="nsew"?Yt?"":It==="pan"?"move":"crosshair":mt.toLowerCase()+"-resize":"pointer"}function aa(mt,It,Yt,Sr,Op){return mt.append("path").attr("class","zoombox").style({fill:It>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",S(Yt,Sr)).attr("d",Op+"Z")}function ca(mt,It,Yt){return mt.append("path").attr("class","zoombox-corners").style({fill:p.background,stroke:p.defaultLine,"stroke-width":1,opacity:0}).attr("transform",S(It,Yt)).attr("d","M0,0Z")}function Cp(mt,It,Yt,Sr,Op,Hp){mt.attr("d",Sr+"M"+Yt.l+","+Yt.t+"v"+Yt.h+"h"+Yt.w+"v-"+Yt.h+"h-"+Yt.w+"Z"),pt(mt,It,Op,Hp)}function pt(mt,It,Yt,Sr){Yt||(mt.transition().style("fill",Sr>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),It.transition().style("opacity",1).duration(200))}function gt(mt){_.select(mt).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function te(mt){it&&mt.data&&mt._context.showTips&&(d.notifier(d._(mt,"Double-click to zoom back out"),"long"),it=!1)}function Et(mt,It){return"M"+(mt.l-.5)+","+(It-ht-.5)+"h-3v"+(2*ht+1)+"h3ZM"+(mt.r+.5)+","+(It-ht-.5)+"h3v"+(2*ht+1)+"h-3Z"}function zt(mt,It){return"M"+(It-ht-.5)+","+(mt.t-.5)+"v-3h"+(2*ht+1)+"v3ZM"+(It-ht-.5)+","+(mt.b+.5)+"v3h"+(2*ht+1)+"v-3Z"}function rt(mt){var It=Math.floor(Math.min(mt.b-mt.t,mt.r-mt.l,ht)/2);return"M"+(mt.l-3.5)+","+(mt.t-.5+It)+"h3v"+-It+"h"+It+"v-3h-"+(It+3)+"ZM"+(mt.r+3.5)+","+(mt.t-.5+It)+"h-3v"+-It+"h"+-It+"v-3h"+(It+3)+"ZM"+(mt.r+3.5)+","+(mt.b+.5-It)+"h-3v"+It+"h"+-It+"v3h"+(It+3)+"ZM"+(mt.l-3.5)+","+(mt.b+.5-It)+"h3v"+It+"h"+It+"v3h-"+(It+3)+"Z"}function Z(mt,It,Yt,Sr,Op){for(var Hp=!1,n0={},R0={},w0,_0,ha,Rp,Gt=(Op||{}).xaHash,Gp=(Op||{}).yaHash,c0=0;c0<It.length;c0++){var M0=It[c0];for(w0 in Yt)if(M0[w0]){for(ha in M0)!(Op&&(Gt[ha]||Gp[ha]))&&!(ha.charAt(0)==="x"?Yt:Sr)[ha]&&(n0[ha]=w0);for(_0 in Sr)!(Op&&(Gt[_0]||Gp[_0]))&&M0[_0]&&(Hp=!0)}for(_0 in Sr)if(M0[_0])for(Rp in M0)!(Op&&(Gt[Rp]||Gp[Rp]))&&!(Rp.charAt(0)==="x"?Yt:Sr)[Rp]&&(R0[Rp]=_0)}Hp&&(d.extendFlat(n0,R0),R0={});var I0={},k0=[];for(ha in n0){var V0=ee(mt,ha);k0.push(V0),I0[V0._id]=V0}var $0={},W0=[];for(Rp in R0){var gm=ee(mt,Rp);W0.push(gm),$0[gm._id]=gm}return{xaHash:I0,yaHash:$0,xaxes:k0,yaxes:W0,xLinks:n0,yLinks:R0,isSubplotConstrained:Hp}}function we(mt,It){if(!b)mt.onwheel!==void 0?mt.onwheel=It:mt.onmousewheel!==void 0?mt.onmousewheel=It:mt.isAddedWheelEvent||(mt.isAddedWheelEvent=!0,mt.addEventListener("wheel",It,{passive:!1}));else{var Yt=mt.onwheel!==void 0?"wheel":"mousewheel";mt._onwheel&&mt.removeEventListener(Yt,mt._onwheel),mt._onwheel=It,mt.addEventListener(Yt,It,{passive:!1})}}function ot(mt){var It=[];for(var Yt in mt)It.push(mt[Yt]);return It}ke.exports={makeDragBox:ut,makeDragger:vt,makeRectDragger:_t,makeZoombox:aa,makeCorners:ca,updateZoombox:Cp,xyCorners:rt,transitionZoombox:pt,removeZoombox:gt,showDoubleClickNotifier:te,attachWheelEventHandler:we}}),_2=r(nt=>{var ke=o(),_=ey(),d=t1(),m=Y1(),E=Jy().makeDragBox,b=Vm().DRAGGERSIZE;nt.initInteractions=function(w){var S=w._fullLayout;if(w._context.staticPlot){ke.select(w).selectAll(".drag").remove();return}if(!(!S._has("cartesian")&&!S._has("splom"))){var C=Object.keys(S._plots||{}).sort(function(F,A){if((S._plots[F].mainplot&&!0)===(S._plots[A].mainplot&&!0)){var O=F.split("y"),$=A.split("y");return O[0]===$[0]?Number(O[1]||1)-Number($[1]||1):Number(O[0]||1)-Number($[0]||1)}return S._plots[F].mainplot?1:-1});C.forEach(function(F){var A=S._plots[F],O=A.xaxis,$=A.yaxis;if(!A.mainplot){var j=E(w,A,O._offset,$._offset,O._length,$._length,"ns","ew");j.onmousemove=function(G){w._fullLayout._rehover=function(){w._fullLayout._hoversubplot===F&&w._fullLayout._plots[F]&&_.hover(w,G,F)},_.hover(w,G,F),w._fullLayout._lasthover=j,w._fullLayout._hoversubplot=F},j.onmouseout=function(G){w._dragging||(w._fullLayout._hoversubplot=null,d.unhover(w,G))},w._context.showAxisDragHandles&&(E(w,A,O._offset-b,$._offset-b,b,b,"n","w"),E(w,A,O._offset+O._length,$._offset-b,b,b,"n","e"),E(w,A,O._offset-b,$._offset+$._length,b,b,"s","w"),E(w,A,O._offset+O._length,$._offset+$._length,b,b,"s","e"))}if(w._context.showAxisDragHandles){if(F===O._mainSubplot){var z=O._mainLinePosition;O.side==="top"&&(z-=b),E(w,A,O._offset+O._length*.1,z,O._length*.8,b,"","ew"),E(w,A,O._offset,z,O._length*.1,b,"","w"),E(w,A,O._offset+O._length*.9,z,O._length*.1,b,"","e")}if(F===$._mainSubplot){var I=$._mainLinePosition;$.side!=="right"&&(I-=b),E(w,A,I,$._offset+$._length*.1,b,$._length*.8,"ns",""),E(w,A,I,$._offset+$._length*.9,b,$._length*.1,"s",""),E(w,A,I,$._offset,b,$._length*.1,"n","")}}});var p=S._hoverlayer.node();p.onmousemove=function(F){F.target=w._fullLayout._lasthover,_.hover(w,F,S._hoversubplot)},p.onclick=function(F){F.target=w._fullLayout._lasthover,_.click(w,F)},p.onmousedown=function(F){w._fullLayout._lasthover.onmousedown(F)},nt.updateFx(w)}},nt.updateFx=function(w){var S=w._fullLayout,C=S.dragmode==="pan"?"move":"crosshair";m(S._draggers,C)}}),j3=r((nt,ke)=>{var _=y1();ke.exports=function(d){for(var m=_.layoutArrayContainers,E=_.layoutArrayRegexes,b=d.split("[")[0],w,S,C=0;C<E.length;C++)if(S=d.match(E[C]),S&&S.index===0){w=S[0];break}if(w||(w=m[m.indexOf(b)]),!w)return!1;var p=d.substr(w.length);return p?(S=p.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/),S?{array:w,index:Number(S[1]),property:S[3]||""}:!1):{array:w,index:"",property:""}}}),V3=r(nt=>{var ke=R(),_=Up(),d=i0(),m=Sv().sorterAsc,E=y1();nt.containerArrayMatch=j3();var b=nt.isAddVal=function(S){return S==="add"||ke(S)},w=nt.isRemoveVal=function(S){return S===null||S==="remove"};nt.applyContainerArrayChanges=function(S,C,p,F,A){var O=C.astr,$=E.getComponentMethod(O,"supplyLayoutDefaults"),j=E.getComponentMethod(O,"draw"),z=E.getComponentMethod(O,"drawOne"),I=F.replot||F.recalc||$===_||j===_,G=S.layout,M=S._fullLayout;if(p[""]){Object.keys(p).length>1&&d.warn("Full array edits are incompatible with other edits",O);var L=p[""][""];if(w(L))C.set(null);else if(Array.isArray(L))C.set(L);else return d.warn("Unrecognized full array edit value",O,L),!0;return I?!1:($(G,M),j(S),!0)}var B=Object.keys(p).map(Number).sort(m),X=C.get(),ee=X||[],yt=A(M,O).get(),Ze=[],Re=-1,Q=ee.length,xt,tt,ht,it,ut,vt,_t,Le;for(xt=0;xt<B.length;xt++){if(ht=B[xt],it=p[ht],ut=Object.keys(it),vt=it[""],_t=b(vt),ht<0||ht>ee.length-(_t?0:1)){d.warn("index out of range",O,ht);continue}if(vt!==void 0)ut.length>1&&d.warn("Insertion & removal are incompatible with edits to the same index.",O,ht),w(vt)?Ze.push(ht):_t?(vt==="add"&&(vt={}),ee.splice(ht,0,vt),yt&&yt.splice(ht,0,{})):d.warn("Unrecognized full object edit value",O,ht,vt),Re===-1&&(Re=ht);else for(tt=0;tt<ut.length;tt++)Le=O+"["+ht+"].",A(ee[ht],ut[tt],Le).set(it[ut[tt]])}for(xt=Ze.length-1;xt>=0;xt--)ee.splice(Ze[xt],1),yt&&yt.splice(Ze[xt],1);if(ee.length?X||C.set(ee):C.set(null),I)return!1;if($(G,M),z!==_){var wt;if(Re===-1)wt=B;else{for(Q=Math.max(ee.length,Q),wt=[],xt=0;xt<B.length&&(ht=B[xt],!(ht>=Re));xt++)wt.push(ht);for(xt=Re;xt<Q;xt++)wt.push(xt)}for(xt=0;xt<wt.length;xt++)z(S,wt[xt])}else j(S);return!0}}),H3=r(nt=>{var ke=v(),_=y1(),d=et(),m=cg(),E=D1(),b=Mn(),w=E.cleanId,S=E.getFromTrace,C=_.traceIs,p=["x","y","z"];nt.clearPromiseQueue=function(M){Array.isArray(M._promises)&&M._promises.length>0&&d.log("Clearing previous rejected promises from queue."),M._promises=[]},nt.cleanLayout=function(M){var L;M||(M={}),M.xaxis1&&(M.xaxis||(M.xaxis=M.xaxis1),delete M.xaxis1),M.yaxis1&&(M.yaxis||(M.yaxis=M.yaxis1),delete M.yaxis1),M.scene1&&(M.scene||(M.scene=M.scene1),delete M.scene1);var B=(m.subplotsRegistry.cartesian||{}).attrRegex;(m.subplotsRegistry.polar||{}).attrRegex,(m.subplotsRegistry.ternary||{}).attrRegex,(m.subplotsRegistry.gl3d||{}).attrRegex;var X=Object.keys(M);for(L=0;L<X.length;L++){var ee=X[L];if(B&&B.test(ee)){var yt=M[ee];yt.anchor&&yt.anchor!=="free"&&(yt.anchor=w(yt.anchor)),yt.overlaying&&(yt.overlaying=w(yt.overlaying)),yt.type||(yt.isdate?yt.type="date":yt.islog?yt.type="log":yt.isdate===!1&&yt.islog===!1&&(yt.type="linear")),(yt.autorange==="withzero"||yt.autorange==="tozero")&&(yt.autorange=!0,yt.rangemode="tozero"),yt.insiderange&&delete yt.range,delete yt.islog,delete yt.isdate,delete yt.categories,j(yt,"domain")&&delete yt.domain}}var Ze=Array.isArray(M.annotations)?M.annotations.length:0;for(L=0;L<Ze;L++){var Re=M.annotations[L];d.isPlainObject(Re)&&(F(Re,"xref"),F(Re,"yref"))}var Q=Array.isArray(M.shapes)?M.shapes.length:0;for(L=0;L<Q;L++){var xt=M.shapes[L];d.isPlainObject(xt)&&(F(xt,"xref"),F(xt,"yref"))}var tt=Array.isArray(M.images)?M.images.length:0;for(L=0;L<tt;L++){var ht=M.images[L];d.isPlainObject(ht)&&(F(ht,"xref"),F(ht,"yref"))}var it=M.legend;return it&&(it.x>3?(it.x=1.02,it.xanchor="left"):it.x<-2&&(it.x=-.02,it.xanchor="right"),it.y>3?(it.y=1.02,it.yanchor="bottom"):it.y<-2&&(it.y=-.02,it.yanchor="top")),M.dragmode==="rotate"&&(M.dragmode="orbit"),b.clean(M),M.template&&M.template.layout&&nt.cleanLayout(M.template.layout),M};function F(M,L){var B=M[L],X=L.charAt(0);B&&B!=="paper"&&(M[L]=w(B,X,!0))}nt.cleanData=function(M){for(var L=0;L<M.length;L++){var B=M[L],X;if(B.type==="histogramy"&&"xbins"in B&&!("ybins"in B)&&(B.ybins=B.xbins,delete B.xbins),B.type==="histogramy"&&nt.swapXYData(B),(B.type==="histogramx"||B.type==="histogramy")&&(B.type="histogram"),"scl"in B&&!("colorscale"in B)&&(B.colorscale=B.scl,delete B.scl),"reversescl"in B&&!("reversescale"in B)&&(B.reversescale=B.reversescl,delete B.reversescl),B.xaxis&&(B.xaxis=w(B.xaxis,"x")),B.yaxis&&(B.yaxis=w(B.yaxis,"y")),C(B,"gl3d")&&B.scene&&(B.scene=m.subplotsRegistry.gl3d.cleanId(B.scene)),!C(B,"pie-like")&&!C(B,"bar-like"))if(Array.isArray(B.textposition))for(X=0;X<B.textposition.length;X++)B.textposition[X]=$(B.textposition[X]);else B.textposition&&(B.textposition=$(B.textposition));var ee=_.getModule(B);if(ee&&ee.colorbar){var yt=ee.colorbar.container,Ze=yt?B[yt]:B;Ze&&Ze.colorscale&&(Ze.colorscale==="YIGnBu"&&(Ze.colorscale="YlGnBu"),Ze.colorscale==="YIOrRd"&&(Ze.colorscale="YlOrRd"))}if(B.type==="surface"&&d.isPlainObject(B.contours)){var Re=["x","y","z"];for(X=0;X<Re.length;X++){var Q=B.contours[Re[X]];d.isPlainObject(Q)&&(Q.highlightColor&&(Q.highlightcolor=Q.highlightColor,delete Q.highlightColor),Q.highlightWidth&&(Q.highlightwidth=Q.highlightWidth,delete Q.highlightWidth))}}if(B.type==="candlestick"||B.type==="ohlc"){var xt=(B.increasing||{}).showlegend!==!1,tt=(B.decreasing||{}).showlegend!==!1,ht=A(B.increasing),it=A(B.decreasing);if(ht!==!1&&it!==!1){var ut=O(ht,it,xt,tt);ut&&(B.name=ut)}else(ht||it)&&!B.name&&(B.name=ht||it)}j(B,"line")&&delete B.line,"marker"in B&&(j(B.marker,"line")&&delete B.marker.line,j(B,"marker")&&delete B.marker),b.clean(B),B.autobinx&&(delete B.autobinx,delete B.xbins),B.autobiny&&(delete B.autobiny,delete B.ybins)}};function A(M){if(!d.isPlainObject(M))return!1;var L=M.name;return delete M.name,delete M.showlegend,(typeof L=="string"||typeof L=="number")&&String(L)}function O(M,L,B,X){if(B&&!X)return M;if(X&&!B||!M.trim())return L;if(!L.trim())return M;var ee=Math.min(M.length,L.length),yt;for(yt=0;yt<ee&&M.charAt(yt)===L.charAt(yt);yt++);var Ze=M.substr(0,yt);return Ze.trim()}function $(M){var L="middle",B="center";return typeof M=="string"&&(M.indexOf("top")!==-1?L="top":M.indexOf("bottom")!==-1&&(L="bottom"),M.indexOf("left")!==-1?B="left":M.indexOf("right")!==-1&&(B="right")),L+" "+B}function j(M,L){return L in M&&typeof M[L]=="object"&&Object.keys(M[L]).length===0}nt.swapXYData=function(M){var L;if(d.swapAttrs(M,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(M.z)&&Array.isArray(M.z[0])&&(M.transpose?delete M.transpose:M.transpose=!0),M.error_x&&M.error_y){var B=M.error_y,X="copy_ystyle"in B?B.copy_ystyle:!(B.color||B.thickness||B.width);d.swapAttrs(M,["error_?.copy_ystyle"]),X&&d.swapAttrs(M,["error_?.color","error_?.thickness","error_?.width"])}if(typeof M.hoverinfo=="string"){var ee=M.hoverinfo.split("+");for(L=0;L<ee.length;L++)ee[L]==="x"?ee[L]="y":ee[L]==="y"&&(ee[L]="x");M.hoverinfo=ee.join("+")}},nt.coerceTraceIndices=function(M,L){if(ke(L))return[L];if(!Array.isArray(L)||!L.length)return M.data.map(function(ee,yt){return yt});if(Array.isArray(L)){for(var B=[],X=0;X<L.length;X++)d.isIndex(L[X],M.data.length)?B.push(L[X]):d.warn("trace index (",L[X],") is not a number or is out of bounds");return B}return L},nt.manageArrayContainers=function(M,L,B){var X=M.obj,ee=M.parts,yt=ee.length,Ze=ee[yt-1],Re=ke(Ze);if(Re&&L===null){var Q=ee.slice(0,yt-1).join("."),xt=d.nestedProperty(X,Q).get();xt.splice(Ze,1)}else Re&&M.get()===void 0&&M.get()===void 0&&(B[M.astr]=null),M.set(L)};var z=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function I(M){var L=M.search(z);if(L>0)return M.substr(0,L)}nt.hasParent=function(M,L){for(var B=I(L);B;){if(B in M)return!0;B=I(B)}return!1},nt.clearAxisTypes=function(M,L,B){for(var X=0;X<L.length;X++)for(var ee=M._fullData[X],yt=0;yt<3;yt++){var Ze=S(M,ee,p[yt]);if(Ze&&Ze.type!=="log"){var Re=Ze._name,Q=Ze._id.substr(1);if(Q.substr(0,5)==="scene"){if(B[Q]!==void 0)continue;Re=Q+"."+Re}var xt=Re+".type";B[Re]===void 0&&B[xt]===void 0&&d.nestedProperty(M.layout,xt).set(null)}}};var G=(M,L)=>{let B=(...X)=>X.every(ee=>d.isPlainObject(ee))||X.every(ee=>Array.isArray(ee));if([M,L].every(X=>Array.isArray(X))){if(M.length!==L.length)return!1;for(let X=0;X<M.length;X++){let ee=M[X],yt=L[X];if(ee!==yt&&!(B(ee,yt)&&G(ee,yt)))return!1}return!0}else if([M,L].every(X=>d.isPlainObject(X))){if(Object.keys(M).length!==Object.keys(L).length)return!1;for(let X in M){if(X.startsWith("_"))continue;let ee=M[X],yt=L[X];if(ee!==yt&&!(B(ee,yt)&&G(ee,yt)))return!1}return!0}return!1};nt.collectionsAreEqual=G}),Ab=r(nt=>{var ke=o(),_=v(),d=a0(),m=et(),E=m.nestedProperty,b=nm(),w=L0(),S=y1(),C=Gm(),p=cg(),F=Im(),A=i1(),O=d0(),$=Q0(),j=Mn(),z=_2().initInteractions,I=Ag(),G=Y2().clearOutline,M=qo().dfltConfig,L=V3(),B=H3(),X=$1(),ee=Om(),yt=Vm().AX_NAME_PATTERN,Ze=0,Re=5;function Q(Mt,Wt,xn,Fp){var Bp;if(Mt=m.getGraphDiv(Mt),b.init(Mt),m.isPlainObject(Wt)){var e0=Wt;Wt=e0.data,xn=e0.layout,Fp=e0.config,Bp=e0.frames}var o0=b.triggerHandler(Mt,"plotly_beforeplot",[Wt,xn,Fp]);if(o0===!1)return Promise.reject();!Wt&&!xn&&!m.isPlotDiv(Mt)&&m.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",Mt);function C0(){if(Bp)return nt.addFrames(Mt,Bp)}ut(Mt,Fp),xn||(xn={}),ke.select(Mt).classed("js-plotly-plot",!0),$.makeTester(),Array.isArray(Mt._promises)||(Mt._promises=[]);var T0=(Mt.data||[]).length===0&&Array.isArray(Wt);Array.isArray(Wt)&&(B.cleanData(Wt),T0?Mt.data=Wt:Mt.data.push.apply(Mt.data,Wt),Mt.empty=!1),(!Mt.layout||T0)&&(Mt.layout=B.cleanLayout(xn)),p.supplyDefaults(Mt);var A0=Mt._fullLayout,J0=A0._has("cartesian");A0._replotting=!0,(T0||A0._shouldCreateBgLayer)&&(qp(Mt),A0._shouldCreateBgLayer&&delete A0._shouldCreateBgLayer),$.initGradients(Mt),$.initPatterns(Mt),T0&&F.saveShowSpikeInitial(Mt);var em=!Mt.calcdata||Mt.calcdata.length!==(Mt._fullData||[]).length;em&&p.doCalcdata(Mt);for(var tm=0;tm<Mt.calcdata.length;tm++)Mt.calcdata[tm][0].trace=Mt._fullData[tm];Mt._context.responsive?Mt._responsiveChartHandler||(Mt._responsiveChartHandler=function(){m.isHidden(Mt)||p.resize(Mt)},window.addEventListener("resize",Mt._responsiveChartHandler)):m.clearResponsive(Mt);var Nm=m.extendFlat({},A0._size),o1=0;function N1(){for(var g1=A0._basePlotModules,w1=0;w1<g1.length;w1++)g1[w1].drawFramework&&g1[w1].drawFramework(Mt);!A0._glcanvas&&A0._has("gl")&&(A0._glcanvas=A0._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(P1){return P1.key}),A0._glcanvas.enter().append("canvas").attr("class",function(P1){return"gl-canvas gl-canvas-"+P1.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));var s1=Mt._context.plotGlPixelRatio;if(A0._glcanvas){A0._glcanvas.attr("width",A0.width*s1).attr("height",A0.height*s1).style("width",A0.width+"px").style("height",A0.height+"px");var Q1=A0._glcanvas.data()[0].regl;if(Q1&&(Math.floor(A0.width*s1)!==Q1._gl.drawingBufferWidth||Math.floor(A0.height*s1)!==Q1._gl.drawingBufferHeight)){var og="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(o1)m.error(og);else return m.log(og+" Clearing graph and plotting again."),p.cleanPlot([],{},Mt._fullData,A0),p.supplyDefaults(Mt),A0=Mt._fullLayout,p.doCalcdata(Mt),o1++,N1()}}return A0.modebar.orientation==="h"?A0._modebardiv.style("height",null).style("width","100%"):A0._modebardiv.style("width",null).style("height",A0.height+"px"),p.previousPromises(Mt)}function F1(){if(p.clearAutoMarginIds(Mt),X.drawMarginPushers(Mt),F.allowAutoMargin(Mt),Mt._fullLayout.title.text&&Mt._fullLayout.title.automargin&&p.allowAutoMargin(Mt,"title.automargin"),A0._has("pie"))for(var g1=Mt._fullData,w1=0;w1<g1.length;w1++){var s1=g1[w1];s1.type==="pie"&&s1.automargin&&p.allowAutoMargin(Mt,"pie."+s1.uid+".automargin")}return p.doAutoMargin(Mt),p.previousPromises(Mt)}function B1(){if(p.didMarginChange(Nm,A0._size))return m.syncOrAsync([F1,X.layoutStyles],Mt)}function u1(){if(!em){zm();return}return m.syncOrAsync([S.getComponentMethod("shapes","calcAutorange"),S.getComponentMethod("annotations","calcAutorange"),zm],Mt)}function zm(){Mt._transitioning||(X.doAutoRangeAndConstraints(Mt),T0&&F.saveRangeInitial(Mt),S.getComponentMethod("rangeslider","calcAutorange")(Mt))}function R1(){return F.draw(Mt,T0?"":"redraw")}var z1=[p.previousPromises,C0,N1,F1,B1];J0&&z1.push(u1),z1.push(X.layoutStyles),J0&&z1.push(R1,function(g1){var w1=g1._fullLayout._insideTickLabelsUpdaterange;if(w1)return g1._fullLayout._insideTickLabelsUpdaterange=void 0,It(g1,w1).then(function(){F.saveRangeInitial(g1,!0)})}),z1.push(X.drawData,X.finalDraw,z,p.addLinks,p.rehover,p.redrag,p.reselect,p.doAutoMargin,p.previousPromises);var E1=m.syncOrAsync(z1,Mt);return(!E1||!E1.then)&&(E1=Promise.resolve()),E1.then(function(){return xt(Mt),Mt})}function xt(Mt){var Wt=Mt._fullLayout;Wt._redrawFromAutoMarginCount?Wt._redrawFromAutoMarginCount--:Mt.emit("plotly_afterplot")}function tt(Mt){return m.extendFlat(M,Mt)}function ht(Mt,Wt){try{Mt._fullLayout._paper.style("background",Wt)}catch(xn){m.error(xn)}}function it(Mt,Wt){var xn=j.combine(Wt,"white");ht(Mt,xn)}function ut(Mt,Wt){if(!Mt._context){Mt._context=m.extendDeep({},M);var xn=ke.select("base");Mt._context._baseUrl=xn.size()&&xn.attr("href")?window.location.href.split("#")[0]:""}var Fp=Mt._context,Bp,e0,o0;if(Wt){for(e0=Object.keys(Wt),Bp=0;Bp<e0.length;Bp++)o0=e0[Bp],!(o0==="editable"||o0==="edits")&&o0 in Fp&&(o0==="setBackground"&&Wt[o0]==="opaque"?Fp[o0]=it:Fp[o0]=Wt[o0]);var C0=Wt.editable;if(C0!==void 0)for(Fp.editable=C0,e0=Object.keys(Fp.edits),Bp=0;Bp<e0.length;Bp++)Fp.edits[e0[Bp]]=C0;if(Wt.edits)for(e0=Object.keys(Wt.edits),Bp=0;Bp<e0.length;Bp++)o0=e0[Bp],o0 in Fp.edits&&(Fp.edits[o0]=Wt.edits[o0]);Fp._exportedPlot=Wt._exportedPlot}Fp.staticPlot&&(Fp.editable=!1,Fp.edits={},Fp.autosizable=!1,Fp.scrollZoom=!1,Fp.doubleClick=!1,Fp.showTips=!1,Fp.showLink=!1,Fp.displayModeBar=!1),Fp.displayModeBar==="hover"&&!d&&(Fp.displayModeBar=!0),(Fp.setBackground==="transparent"||typeof Fp.setBackground!="function")&&(Fp.setBackground=ht),Fp._hasZeroHeight=Fp._hasZeroHeight||Mt.clientHeight===0,Fp._hasZeroWidth=Fp._hasZeroWidth||Mt.clientWidth===0;var T0=Fp.scrollZoom,A0=Fp._scrollZoom={};if(T0===!0)A0.cartesian=1,A0.gl3d=1,A0.geo=1,A0.mapbox=1,A0.map=1;else if(typeof T0=="string"){var J0=T0.split("+");for(Bp=0;Bp<J0.length;Bp++)A0[J0[Bp]]=1}else T0!==!1&&(A0.gl3d=1,A0.geo=1,A0.mapbox=1,A0.map=1)}function vt(Mt){if(Mt=m.getGraphDiv(Mt),!m.isPlotDiv(Mt))throw new Error("This element is not a Plotly plot: "+Mt);return B.cleanData(Mt.data),B.cleanLayout(Mt.layout),Mt.calcdata=void 0,nt._doPlot(Mt).then(function(){return Mt.emit("plotly_redraw"),Mt})}function _t(Mt,Wt,xn,Fp){return Mt=m.getGraphDiv(Mt),p.cleanPlot([],{},Mt._fullData||[],Mt._fullLayout||{}),p.purge(Mt),nt._doPlot(Mt,Wt,xn,Fp)}function Le(Mt,Wt){var xn=Wt+1,Fp=[],Bp,e0;for(Bp=0;Bp<Mt.length;Bp++)e0=Mt[Bp],e0<0?Fp.push(xn+e0):Fp.push(e0);return Fp}function wt(Mt,Wt,xn){var Fp,Bp;for(Fp=0;Fp<Wt.length;Fp++){if(Bp=Wt[Fp],Bp!==parseInt(Bp,10))throw new Error("all values in "+xn+" must be integers");if(Bp>=Mt.data.length||Bp<-Mt.data.length)throw new Error(xn+" must be valid indices for gd.data.");if(Wt.indexOf(Bp,Fp+1)>-1||Bp>=0&&Wt.indexOf(-Mt.data.length+Bp)>-1||Bp<0&&Wt.indexOf(Mt.data.length+Bp)>-1)throw new Error("each index in "+xn+" must be unique.")}}function St(Mt,Wt,xn){if(!Array.isArray(Mt.data))throw new Error("gd.data must be an array.");if(typeof Wt>"u")throw new Error("currentIndices is a required argument.");if(Array.isArray(Wt)||(Wt=[Wt]),wt(Mt,Wt,"currentIndices"),typeof xn<"u"&&!Array.isArray(xn)&&(xn=[xn]),typeof xn<"u"&&wt(Mt,xn,"newIndices"),typeof xn<"u"&&Wt.length!==xn.length)throw new Error("current and new indices must be of equal length.")}function Ut(Mt,Wt,xn){var Fp,Bp;if(!Array.isArray(Mt.data))throw new Error("gd.data must be an array.");if(typeof Wt>"u")throw new Error("traces must be defined.");for(Array.isArray(Wt)||(Wt=[Wt]),Fp=0;Fp<Wt.length;Fp++)if(Bp=Wt[Fp],typeof Bp!="object"||Array.isArray(Bp)||Bp===null)throw new Error("all values in traces array must be non-array objects");if(typeof xn<"u"&&!Array.isArray(xn)&&(xn=[xn]),typeof xn<"u"&&xn.length!==Wt.length)throw new Error("if indices is specified, traces.length must equal indices.length")}function kt(Mt,Wt,xn,Fp){var Bp=m.isPlainObject(Fp);if(!Array.isArray(Mt.data))throw new Error("gd.data must be an array");if(!m.isPlainObject(Wt))throw new Error("update must be a key:value object");if(typeof xn>"u")throw new Error("indices must be an integer or array of integers");wt(Mt,xn,"indices");for(var e0 in Wt){if(!Array.isArray(Wt[e0])||Wt[e0].length!==xn.length)throw new Error("attribute "+e0+" must be an array of length equal to indices array length");if(Bp&&(!(e0 in Fp)||!Array.isArray(Fp[e0])||Fp[e0].length!==Wt[e0].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 correspondence with the keys and number of traces in the update object")}}function jt(Mt,Wt,xn,Fp){var Bp=m.isPlainObject(Fp),e0=[],o0,C0,T0,A0,J0;Array.isArray(xn)||(xn=[xn]),xn=Le(xn,Mt.data.length-1);for(var em in Wt)for(var tm=0;tm<xn.length;tm++){if(o0=Mt.data[xn[tm]],T0=E(o0,em),C0=T0.get(),A0=Wt[em][tm],!m.isArrayOrTypedArray(A0))throw new Error("attribute: "+em+" index: "+tm+" must be an array");if(!m.isArrayOrTypedArray(C0))throw new Error("cannot extend missing or non-array attribute: "+em);if(C0.constructor!==A0.constructor)throw new Error("cannot extend array with an array of a different type: "+em);J0=Bp?Fp[em][tm]:Fp,_(J0)||(J0=-1),e0.push({prop:T0,target:C0,insert:A0,maxp:Math.floor(J0)})}return e0}function aa(Mt,Wt,xn,Fp,Bp){kt(Mt,Wt,xn,Fp);for(var e0=jt(Mt,Wt,xn,Fp),o0={},C0={},T0=0;T0<e0.length;T0++){var A0=e0[T0].prop,J0=e0[T0].maxp,em=Bp(e0[T0].target,e0[T0].insert,J0);A0.set(em[0]),Array.isArray(o0[A0.astr])||(o0[A0.astr]=[]),o0[A0.astr].push(em[1]),Array.isArray(C0[A0.astr])||(C0[A0.astr]=[]),C0[A0.astr].push(e0[T0].target.length)}return{update:o0,maxPoints:C0}}function ca(Mt,Wt){var xn=new Mt.constructor(Mt.length+Wt.length);return xn.set(Mt),xn.set(Wt,Mt.length),xn}function Cp(Mt,Wt,xn,Fp){Mt=m.getGraphDiv(Mt);function Bp(T0,A0,J0){var em,tm;if(m.isTypedArray(T0))if(J0<0){var Nm=new T0.constructor(0),o1=ca(T0,A0);J0<0?(em=o1,tm=Nm):(em=Nm,tm=o1)}else if(em=new T0.constructor(J0),tm=new T0.constructor(T0.length+A0.length-J0),J0===A0.length)em.set(A0),tm.set(T0);else if(J0<A0.length){var N1=A0.length-J0;em.set(A0.subarray(N1)),tm.set(T0),tm.set(A0.subarray(0,N1),T0.length)}else{var F1=J0-A0.length,B1=T0.length-F1;em.set(T0.subarray(B1)),em.set(A0,F1),tm.set(T0.subarray(0,B1))}else em=T0.concat(A0),tm=J0>=0&&J0<em.length?em.splice(0,em.length-J0):[];return[em,tm]}var e0=aa(Mt,Wt,xn,Fp,Bp),o0=nt.redraw(Mt),C0=[Mt,e0.update,xn,e0.maxPoints];return w.add(Mt,nt.prependTraces,C0,Cp,arguments),o0}function pt(Mt,Wt,xn,Fp){Mt=m.getGraphDiv(Mt);function Bp(T0,A0,J0){var em,tm;if(m.isTypedArray(T0))if(J0<=0){var Nm=new T0.constructor(0),o1=ca(A0,T0);J0<0?(em=o1,tm=Nm):(em=Nm,tm=o1)}else if(em=new T0.constructor(J0),tm=new T0.constructor(T0.length+A0.length-J0),J0===A0.length)em.set(A0),tm.set(T0);else if(J0<A0.length){var N1=A0.length-J0;em.set(A0.subarray(0,N1)),tm.set(A0.subarray(N1)),tm.set(T0,N1)}else{var F1=J0-A0.length;em.set(A0),em.set(T0.subarray(0,F1),A0.length),tm.set(T0.subarray(F1))}else em=A0.concat(T0),tm=J0>=0&&J0<em.length?em.splice(J0,em.length):[];return[em,tm]}var e0=aa(Mt,Wt,xn,Fp,Bp),o0=nt.redraw(Mt),C0=[Mt,e0.update,xn,e0.maxPoints];return w.add(Mt,nt.extendTraces,C0,pt,arguments),o0}function gt(Mt,Wt,xn){Mt=m.getGraphDiv(Mt);var Fp=[],Bp=nt.deleteTraces,e0=gt,o0=[Mt,Fp],C0=[Mt,Wt],T0,A0;for(Ut(Mt,Wt,xn),Array.isArray(Wt)||(Wt=[Wt]),Wt=Wt.map(function(J0){return m.extendFlat({},J0)}),B.cleanData(Wt),T0=0;T0<Wt.length;T0++)Mt.data.push(Wt[T0]);for(T0=0;T0<Wt.length;T0++)Fp.push(-Wt.length+T0);if(typeof xn>"u")return A0=nt.redraw(Mt),w.add(Mt,Bp,o0,e0,C0),A0;Array.isArray(xn)||(xn=[xn]);try{St(Mt,Fp,xn)}catch(J0){throw Mt.data.splice(Mt.data.length-Wt.length,Wt.length),J0}return w.startSequence(Mt),w.add(Mt,Bp,o0,e0,C0),A0=nt.moveTraces(Mt,Fp,xn),w.stopSequence(Mt),A0}function te(Mt,Wt){Mt=m.getGraphDiv(Mt);var xn=[],Fp=nt.addTraces,Bp=te,e0=[Mt,xn,Wt],o0=[Mt,Wt],C0,T0;if(typeof Wt>"u")throw new Error("indices must be an integer or array of integers.");for(Array.isArray(Wt)||(Wt=[Wt]),wt(Mt,Wt,"indices"),Wt=Le(Wt,Mt.data.length-1),Wt.sort(m.sorterDes),C0=0;C0<Wt.length;C0+=1)T0=Mt.data.splice(Wt[C0],1)[0],xn.push(T0);var A0=nt.redraw(Mt);return w.add(Mt,Fp,e0,Bp,o0),A0}function Et(Mt,Wt,xn){Mt=m.getGraphDiv(Mt);var Fp=[],Bp=[],e0=Et,o0=Et,C0=[Mt,xn,Wt],T0=[Mt,Wt,xn],A0;if(St(Mt,Wt,xn),Wt=Array.isArray(Wt)?Wt:[Wt],typeof xn>"u")for(xn=[],A0=0;A0<Wt.length;A0++)xn.push(-Wt.length+A0);for(xn=Array.isArray(xn)?xn:[xn],Wt=Le(Wt,Mt.data.length-1),xn=Le(xn,Mt.data.length-1),A0=0;A0<Mt.data.length;A0++)Wt.indexOf(A0)===-1&&Fp.push(Mt.data[A0]);for(A0=0;A0<Wt.length;A0++)Bp.push({newIndex:xn[A0],trace:Mt.data[Wt[A0]]});for(Bp.sort(function(em,tm){return em.newIndex-tm.newIndex}),A0=0;A0<Bp.length;A0+=1)Fp.splice(Bp[A0].newIndex,0,Bp[A0].trace);Mt.data=Fp;var J0=nt.redraw(Mt);return w.add(Mt,e0,C0,o0,T0),J0}function zt(Mt,Wt,xn,Fp){Mt=m.getGraphDiv(Mt),B.clearPromiseQueue(Mt);var Bp={};if(typeof Wt=="string")Bp[Wt]=xn;else if(m.isPlainObject(Wt))Bp=m.extendFlat({},Wt),Fp===void 0&&(Fp=xn);else return m.warn("Restyle fail.",Wt,xn,Fp),Promise.reject();Object.keys(Bp).length&&(Mt.changed=!0);var e0=B.coerceTraceIndices(Mt,Fp),o0=mt(Mt,Bp,e0),C0=o0.flags;C0.calc&&(Mt.calcdata=void 0),C0.clearAxisTypes&&B.clearAxisTypes(Mt,e0,{});var T0=[];C0.fullReplot?T0.push(nt._doPlot):(T0.push(p.previousPromises),p.supplyDefaults(Mt),C0.markerSize&&(p.doCalcdata(Mt),Sr(T0)),C0.style&&T0.push(X.doTraceStyle),C0.colorbars&&T0.push(X.doColorBars),T0.push(xt)),T0.push(p.rehover,p.redrag,p.reselect),w.add(Mt,zt,[Mt,o0.undoit,o0.traces],zt,[Mt,o0.redoit,o0.traces]);var A0=m.syncOrAsync(T0,Mt);return(!A0||!A0.then)&&(A0=Promise.resolve()),A0.then(function(){return Mt.emit("plotly_restyle",o0.eventData),Mt})}function rt(Mt){return Mt===void 0?null:Mt}function Z(Mt,Wt){return Wt?function(xn,Fp,Bp){var e0=E(xn,Fp),o0=e0.set;return e0.set=function(C0){var T0=(Bp||"")+Fp;we(T0,e0.get(),C0,Mt),o0(C0)},e0}:E}function we(Mt,Wt,xn,Fp){if(Array.isArray(Wt)||Array.isArray(xn))for(var Bp=Array.isArray(Wt)?Wt:[],e0=Array.isArray(xn)?xn:[],o0=Math.max(Bp.length,e0.length),C0=0;C0<o0;C0++)we(Mt+"["+C0+"]",Bp[C0],e0[C0],Fp);else if(m.isPlainObject(Wt)||m.isPlainObject(xn)){var T0=m.isPlainObject(Wt)?Wt:{},A0=m.isPlainObject(xn)?xn:{},J0=m.extendFlat({},T0,A0);for(var em in J0)we(Mt+"."+em,T0[em],A0[em],Fp)}else Fp[Mt]===void 0&&(Fp[Mt]=rt(Wt))}function ot(Mt,Wt,xn){for(var Fp in xn){var Bp=E(Mt,Fp);we(Fp,Bp.get(),xn[Fp],Wt)}}function mt(Mt,Wt,xn){var Fp=Mt._fullLayout,Bp=Mt._fullData,e0=Mt.data,o0=Fp._guiEditing,C0=Z(Fp._preGUI,o0),T0=m.extendDeepAll({},Wt),A0,J0=ee.traceFlags(),em={},tm={},Nm;function o1(){return xn.map(function(){})}function N1(U0){var mm=F.id2name(U0);Nm.indexOf(mm)===-1&&Nm.push(mm)}function F1(U0){return"LAYOUT"+U0+".autorange"}function B1(U0){return"LAYOUT"+U0+".range"}function u1(U0){for(var mm=U0;mm<Bp.length;mm++)if(Bp[mm]._input===e0[U0])return Bp[mm]}function zm(U0,mm,Jm){if(Array.isArray(U0)){U0.forEach(function(e1){zm(e1,mm,Jm)});return}if(!(U0 in Wt||B.hasParent(Wt,U0))){var qm;if(U0.substr(0,6)==="LAYOUT")qm=C0(Mt.layout,U0.replace("LAYOUT",""));else{var b1=xn[Jm],jm=Fp._tracePreGUI[u1(b1)._fullInput.uid];qm=Z(jm,o0)(e0[b1],U0)}U0 in tm||(tm[U0]=o1()),tm[U0][Jm]===void 0&&(tm[U0][Jm]=rt(qm.get())),mm!==void 0&&qm.set(mm)}}function R1(U0){return function(mm){return Bp[mm][U0]}}function z1(U0){return function(mm,Jm){return mm===!1?Bp[xn[Jm]][U0]:null}}for(var E1 in Wt){if(B.hasParent(Wt,E1))throw new Error("cannot set "+E1+" and a parent attribute simultaneously");var g1=Wt[E1],w1,s1,Q1,og,P1,fg;if((E1==="autobinx"||E1==="autobiny")&&(E1=E1.charAt(E1.length-1)+"bins",Array.isArray(g1)?g1=g1.map(z1(E1)):g1===!1?g1=xn.map(R1(E1)):g1=null),em[E1]=g1,E1.substr(0,6)==="LAYOUT"){Q1=C0(Mt.layout,E1.replace("LAYOUT","")),tm[E1]=[rt(Q1.get())],Q1.set(Array.isArray(g1)?g1[0]:g1),J0.calc=!0;continue}for(tm[E1]=o1(),A0=0;A0<xn.length;A0++){w1=e0[xn[A0]],s1=u1(xn[A0]);var bg=Fp._tracePreGUI[s1._fullInput.uid];if(Q1=Z(bg,o0)(w1,E1),og=Q1.get(),P1=Array.isArray(g1)?g1[A0%g1.length]:g1,P1!==void 0){var Cg=Q1.parts[Q1.parts.length-1],Ug=E1.substr(0,E1.length-Cg.length-1),rg=Ug?Ug+".":"",Ng=Ug?E(s1,Ug).get():s1;if(fg=C.getTraceValObject(s1,Q1.parts),fg&&fg.impliedEdits&&P1!==null)for(var dg in fg.impliedEdits)zm(m.relativeAttr(E1,dg),fg.impliedEdits[dg],A0);else if((Cg==="thicknessmode"||Cg==="lenmode")&&og!==P1&&(P1==="fraction"||P1==="pixels")&&Ng){var $m=Fp._size,Xg=Ng.orient,Lt=Xg==="top"||Xg==="bottom";if(Cg==="thicknessmode"){var At=Lt?$m.h:$m.w;zm(rg+"thickness",Ng.thickness*(P1==="fraction"?1/At:At),A0)}else{var Wp=Lt?$m.w:$m.h;zm(rg+"len",Ng.len*(P1==="fraction"?1/Wp:Wp),A0)}}else if(E1==="type"&&(P1==="pie"!=(og==="pie")||P1==="funnelarea"!=(og==="funnelarea"))){var Qp="x",g0="y";(P1==="bar"||og==="bar")&&w1.orientation==="h"&&(Qp="y",g0="x"),m.swapAttrs(w1,["?","?src"],"labels",Qp),m.swapAttrs(w1,["d?","?0"],"label",Qp),m.swapAttrs(w1,["?","?src"],"values",g0),og==="pie"||og==="funnelarea"?(E(w1,"marker.color").set(E(w1,"marker.colors").get()),Fp._pielayer.selectAll("g.trace").remove()):S.traceIs(w1,"cartesian")&&E(w1,"marker.colors").set(E(w1,"marker.color").get())}tm[E1][A0]=rt(og);var $p=["swapxy","swapxyaxes","orientation","orientationaxes"];if($p.indexOf(E1)!==-1){if(E1==="orientation"){Q1.set(P1);var Xp=w1.x&&!w1.y?"h":"v";if((Q1.get()||Xp)===s1.orientation)continue}else E1==="orientationaxes"&&(w1.orientation={v:"h",h:"v"}[s1.orientation]);B.swapXYData(w1),J0.calc=J0.clearAxisTypes=!0}else p.dataArrayContainers.indexOf(Q1.parts[0])!==-1?(B.manageArrayContainers(Q1,P1,tm),J0.calc=!0):(fg?fg.arrayOk&&!S.traceIs(s1,"regl")&&(m.isArrayOrTypedArray(P1)||m.isArrayOrTypedArray(og))?J0.calc=!0:ee.update(J0,fg):J0.calc=!0,Q1.set(P1))}}if(["swapxyaxes","orientationaxes"].indexOf(E1)!==-1&&F.swap(Mt,xn),E1==="orientationaxes"){var b0=E(Mt.layout,"hovermode"),s0=b0.get();s0==="x"?b0.set("y"):s0==="y"?b0.set("x"):s0==="x unified"?b0.set("y unified"):s0==="y unified"&&b0.set("x unified")}if(["orientation","type"].indexOf(E1)!==-1){for(Nm=[],A0=0;A0<xn.length;A0++){var O0=e0[xn[A0]];S.traceIs(O0,"cartesian")&&(N1(O0.xaxis||"x"),N1(O0.yaxis||"y"))}zm(Nm.map(F1),!0,0),zm(Nm.map(B1),[0,1],0)}}return(J0.calc||J0.plot)&&(J0.fullReplot=!0),{flags:J0,undoit:tm,redoit:em,traces:xn,eventData:m.extendDeepNoArrays([],[T0,xn])}}function It(Mt,Wt,xn){Mt=m.getGraphDiv(Mt),B.clearPromiseQueue(Mt);var Fp={};if(typeof Wt=="string")Fp[Wt]=xn;else if(m.isPlainObject(Wt))Fp=m.extendFlat({},Wt);else return m.warn("Relayout fail.",Wt,xn),Promise.reject();Object.keys(Fp).length&&(Mt.changed=!0);var Bp=R0(Mt,Fp),e0=Bp.flags;e0.calc&&(Mt.calcdata=void 0);var o0=[p.previousPromises];e0.layoutReplot?o0.push(X.layoutReplot):Object.keys(Fp).length&&(Yt(Mt,e0,Bp)||p.supplyDefaults(Mt),e0.legend&&o0.push(X.doLegend),e0.layoutstyle&&o0.push(X.layoutStyles),e0.axrange&&Sr(o0,Bp.rangesAltered),e0.ticks&&o0.push(X.doTicksRelayout),e0.modebar&&o0.push(X.doModeBar),e0.camera&&o0.push(X.doCamera),e0.colorbars&&o0.push(X.doColorBars),o0.push(xt)),o0.push(p.rehover,p.redrag,p.reselect),w.add(Mt,It,[Mt,Bp.undoit],It,[Mt,Bp.redoit]);var C0=m.syncOrAsync(o0,Mt);return(!C0||!C0.then)&&(C0=Promise.resolve(Mt)),C0.then(function(){return Mt.emit("plotly_relayout",Bp.eventData),Mt})}function Yt(Mt,Wt,xn){var Fp=Mt._fullLayout;if(!Wt.axrange)return!1;for(var Bp in Wt)if(Bp!=="axrange"&&Wt[Bp])return!1;var e0,o0,C0=function(Nm,o1){return m.coerce(e0,o0,O,Nm,o1)},T0={};for(var A0 in xn.rangesAltered){var J0=F.id2name(A0);if(e0=Mt.layout[J0],o0=Fp[J0],A(e0,o0,C0,T0),o0._matchGroup){for(var em in o0._matchGroup)if(em!==A0){var tm=Fp[F.id2name(em)];tm.autorange=o0.autorange,tm.range=o0.range.slice(),tm._input.range=o0.range.slice()}}}return!0}function Sr(Mt,Wt){var xn=Wt?function(Fp){var Bp=[],e0=!0;for(var o0 in Wt){var C0=F.getFromId(Fp,o0);if(Bp.push(o0),(C0.ticklabelposition||"").indexOf("inside")!==-1&&C0._anchorAxis&&Bp.push(C0._anchorAxis._id),C0._matchGroup)for(var T0 in C0._matchGroup)Wt[T0]||Bp.push(T0)}return F.draw(Fp,Bp,{skipTitle:e0})}:function(Fp){return F.draw(Fp,"redraw")};Mt.push(G,X.doAutoRangeAndConstraints,xn,X.drawData,X.finalDraw)}var Op=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,Hp=/^[xyz]axis[0-9]*\.autorange$/,n0=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function R0(Mt,Wt){var xn=Mt.layout,Fp=Mt._fullLayout,Bp=Fp._guiEditing,e0=Z(Fp._preGUI,Bp),o0=Object.keys(Wt),C0=F.list(Mt),T0=m.extendDeepAll({},Wt),A0={},J0,em,tm;for(o0=Object.keys(Wt),em=0;em<o0.length;em++)if(o0[em].indexOf("allaxes")===0){for(tm=0;tm<C0.length;tm++){var Nm=C0[tm]._id.substr(1),o1=Nm.indexOf("scene")!==-1?Nm+".":"",N1=o0[em].replace("allaxes",o1+C0[tm]._name);Wt[N1]||(Wt[N1]=Wt[o0[em]])}delete Wt[o0[em]]}var F1=ee.layoutFlags(),B1={},u1={};function zm(jm,e1){if(Array.isArray(jm)){jm.forEach(function(Pg){zm(Pg,e1)});return}if(!(jm in Wt||B.hasParent(Wt,jm))){var k1=e0(xn,jm);jm in u1||(u1[jm]=rt(k1.get())),e1!==void 0&&k1.set(e1)}}var R1={},z1;function E1(jm){var e1=F.name2id(jm.split(".")[0]);return R1[e1]=1,e1}for(var g1 in Wt){if(B.hasParent(Wt,g1))throw new Error("cannot set "+g1+" and a parent attribute simultaneously");for(var w1=e0(xn,g1),s1=Wt[g1],Q1=w1.parts.length,og=Q1-1;og>0&&typeof w1.parts[og]!="string";)og--;var P1=w1.parts[og],fg=w1.parts[og-1]+"."+P1,bg=w1.parts.slice(0,og).join("."),Cg=E(Mt.layout,bg).get(),Ug=E(Fp,bg).get(),rg=w1.get();if(s1!==void 0){B1[g1]=s1,u1[g1]=P1==="reverse"?s1:rt(rg);var Ng=C.getLayoutValObject(Fp,w1.parts);if(Ng&&Ng.impliedEdits&&s1!==null)for(var dg in Ng.impliedEdits)zm(m.relativeAttr(g1,dg),Ng.impliedEdits[dg]);if(["width","height"].indexOf(g1)!==-1)if(s1){zm("autosize",null);var $m=g1==="height"?"width":"height";zm($m,Fp[$m])}else Fp[g1]=Mt._initialAutoSize[g1];else if(g1==="autosize")zm("width",s1?null:Fp.width),zm("height",s1?null:Fp.height);else if(fg.match(Op))E1(fg),E(Fp,bg+"._inputRange").set(null);else if(fg.match(Hp)){E1(fg),E(Fp,bg+"._inputRange").set(null);var Xg=E(Fp,bg).get();Xg._inputDomain&&(Xg._input.domain=Xg._inputDomain.slice())}else fg.match(n0)&&E(Fp,bg+"._inputDomain").set(null);if(P1==="type"){z1=Cg;var Lt=Ug.type==="linear"&&s1==="log",At=Ug.type==="log"&&s1==="linear";if(Lt||At){if(!z1||!z1.range)zm(bg+".autorange",!0);else if(Ug.autorange)Lt&&(z1.range=z1.range[1]>z1.range[0]?[1,2]:[2,1]);else{var Wp=z1.range[0],Qp=z1.range[1];Lt?(Wp<=0&&Qp<=0&&zm(bg+".autorange",!0),Wp<=0?Wp=Qp/1e6:Qp<=0&&(Qp=Wp/1e6),zm(bg+".range[0]",Math.log(Wp)/Math.LN10),zm(bg+".range[1]",Math.log(Qp)/Math.LN10)):(zm(bg+".range[0]",Math.pow(10,Wp)),zm(bg+".range[1]",Math.pow(10,Qp)))}Array.isArray(Fp._subplots.polar)&&Fp._subplots.polar.length&&Fp[w1.parts[0]]&&w1.parts[1]==="radialaxis"&&delete Fp[w1.parts[0]]._subplot.viewInitial["radialaxis.range"],S.getComponentMethod("annotations","convertCoords")(Mt,Ug,s1,zm),S.getComponentMethod("images","convertCoords")(Mt,Ug,s1,zm)}else zm(bg+".autorange",!0),zm(bg+".range",null);E(Fp,bg+"._inputRange").set(null)}else if(P1.match(yt)){var g0=E(Fp,g1).get(),$p=(s1||{}).type;(!$p||$p==="-")&&($p="linear"),S.getComponentMethod("annotations","convertCoords")(Mt,g0,$p,zm),S.getComponentMethod("images","convertCoords")(Mt,g0,$p,zm)}var Xp=L.containerArrayMatch(g1);if(Xp){J0=Xp.array,em=Xp.index;var b0=Xp.property,s0=Ng||{editType:"calc"};em!==""&&b0===""&&(L.isAddVal(s1)?u1[g1]=null:L.isRemoveVal(s1)?u1[g1]=(E(xn,J0).get()||[])[em]:m.warn("unrecognized full object value",Wt)),ee.update(F1,s0),A0[J0]||(A0[J0]={});var O0=A0[J0][em];O0||(O0=A0[J0][em]={}),O0[b0]=s1,delete Wt[g1]}else P1==="reverse"?(Cg.range?Cg.range.reverse():(zm(bg+".autorange",!0),Cg.range=[1,0]),Ug.autorange?F1.calc=!0:F1.plot=!0):(g1==="dragmode"&&(s1===!1&&rg!==!1||s1!==!1&&rg===!1)||Fp._has("scatter-like")&&Fp._has("regl")&&g1==="dragmode"&&(s1==="lasso"||s1==="select")&&!(rg==="lasso"||rg==="select")?F1.plot=!0:Ng?ee.update(F1,Ng):F1.calc=!0,w1.set(s1))}}for(J0 in A0){var U0=L.applyContainerArrayChanges(Mt,e0(xn,J0),A0[J0],F1,e0);U0||(F1.plot=!0)}for(var mm in R1){z1=F.getFromId(Mt,mm);var Jm=z1&&z1._constraintGroup;if(Jm){F1.calc=!0;for(var qm in Jm)R1[qm]||(F.getFromId(Mt,qm)._constraintShrinkable=!0)}}(w0(Mt)||Wt.height||Wt.width)&&(F1.plot=!0);var b1=Fp.shapes;for(em=0;em<b1.length;em++)if(b1[em].showlegend){F1.calc=!0;break}return(F1.plot||F1.calc)&&(F1.layoutReplot=!0),{flags:F1,rangesAltered:R1,undoit:u1,redoit:B1,eventData:T0}}function w0(Mt){var Wt=Mt._fullLayout,xn=Wt.width,Fp=Wt.height;return Mt.layout.autosize&&p.plotAutoSize(Mt,Mt.layout,Wt),Wt.width!==xn||Wt.height!==Fp}function _0(Mt,Wt,xn,Fp){Mt=m.getGraphDiv(Mt),B.clearPromiseQueue(Mt),m.isPlainObject(Wt)||(Wt={}),m.isPlainObject(xn)||(xn={}),Object.keys(Wt).length&&(Mt.changed=!0),Object.keys(xn).length&&(Mt.changed=!0);var Bp=B.coerceTraceIndices(Mt,Fp),e0=mt(Mt,m.extendFlat({},Wt),Bp),o0=e0.flags,C0=R0(Mt,m.extendFlat({},xn)),T0=C0.flags;(o0.calc||T0.calc)&&(Mt.calcdata=void 0),o0.clearAxisTypes&&B.clearAxisTypes(Mt,Bp,xn);var A0=[];T0.layoutReplot?A0.push(X.layoutReplot):o0.fullReplot?A0.push(nt._doPlot):(A0.push(p.previousPromises),Yt(Mt,T0,C0)||p.supplyDefaults(Mt),o0.style&&A0.push(X.doTraceStyle),(o0.colorbars||T0.colorbars)&&A0.push(X.doColorBars),T0.legend&&A0.push(X.doLegend),T0.layoutstyle&&A0.push(X.layoutStyles),T0.axrange&&Sr(A0,C0.rangesAltered),T0.ticks&&A0.push(X.doTicksRelayout),T0.modebar&&A0.push(X.doModeBar),T0.camera&&A0.push(X.doCamera),A0.push(xt)),A0.push(p.rehover,p.redrag,p.reselect),w.add(Mt,_0,[Mt,e0.undoit,C0.undoit,e0.traces],_0,[Mt,e0.redoit,C0.redoit,e0.traces]);var J0=m.syncOrAsync(A0,Mt);return(!J0||!J0.then)&&(J0=Promise.resolve(Mt)),J0.then(function(){return Mt.emit("plotly_update",{data:e0.eventData,layout:C0.eventData}),Mt})}function ha(Mt){return function(Wt){Wt._fullLayout._guiEditing=!0;var xn=Mt.apply(null,arguments);return Wt._fullLayout._guiEditing=!1,xn}}var Rp=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^(map\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],Gt=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function Gp(Mt,Wt){for(var xn=0;xn<Wt.length;xn++){var Fp=Wt[xn],Bp=Mt.match(Fp.pattern);if(Bp){var e0=Bp[1]||"";return{head:e0,tail:Mt.substr(e0.length+1),attr:Fp.attr}}}}function c0(Mt,Wt){var xn=E(Wt,Mt).get();if(xn!==void 0)return xn;var Fp=Mt.split(".");for(Fp.pop();Fp.length>1;)if(Fp.pop(),xn=E(Wt,Fp.join(".")+".uirevision").get(),xn!==void 0)return xn;return Wt.uirevision}function M0(Mt,Wt){for(var xn=0;xn<Wt.length;xn++)if(Wt[xn]._fullInput.uid===Mt)return xn;return-1}function I0(Mt,Wt,xn){for(var Fp=0;Fp<Wt.length;Fp++)if(Wt[Fp].uid===Mt)return Fp;return!Wt[xn]||Wt[xn].uid?-1:xn}function k0(Mt,Wt){var xn=m.isPlainObject(Mt),Fp=Array.isArray(Mt);return xn||Fp?(xn&&m.isPlainObject(Wt)||Fp&&Array.isArray(Wt))&&JSON.stringify(Mt)===JSON.stringify(Wt):Mt===Wt}function V0(Mt,Wt,xn,Fp){var Bp=Fp._preGUI,e0,o0,C0,T0,A0,J0,em,tm,Nm,o1,N1=[],F1={},B1={};for(e0 in Bp){if(A0=Gp(e0,Rp),A0){if(Nm=A0.head,o1=A0.tail,o0=A0.attr||Nm+".uirevision",C0=E(Fp,o0).get(),T0=C0&&c0(o0,Wt),T0&&T0===C0){if(J0=Bp[e0],J0===null&&(J0=void 0),em=E(Wt,e0),tm=em.get(),k0(tm,J0)){tm===void 0&&o1==="autorange"&&N1.push(Nm),em.set(rt(E(Fp,e0).get()));continue}else if(o1==="autorange"||o1.substr(0,6)==="range["){var u1=Bp[Nm+".range[0]"],zm=Bp[Nm+".range[1]"],R1=Bp[Nm+".autorange"];if(R1||R1===null&&u1===null&&zm===null){if(!(Nm in F1)){var z1=E(Wt,Nm).get();F1[Nm]=z1&&(z1.autorange||z1.autorange!==!1&&(!z1.range||z1.range.length!==2))}if(F1[Nm]){em.set(rt(E(Fp,e0).get()));continue}}}}}else m.warn("unrecognized GUI edit: "+e0);delete Bp[e0],A0&&A0.tail.substr(0,6)==="range["&&(B1[A0.head]=1)}for(var E1=0;E1<N1.length;E1++){var g1=N1[E1];if(B1[g1]){var w1=E(Wt,g1).get();w1&&delete w1.autorange}}var s1=Fp._tracePreGUI;for(var Q1 in s1){var og=s1[Q1],P1=null,fg;for(e0 in og){if(!P1){var bg=M0(Q1,xn);if(bg<0){delete s1[Q1];break}var Cg=xn[bg];fg=Cg._fullInput;var Ug=I0(Q1,Mt,fg.index);if(Ug<0){delete s1[Q1];break}P1=Mt[Ug]}if(A0=Gp(e0,Gt),A0){if(A0.attr?(C0=E(Fp,A0.attr).get(),T0=C0&&c0(A0.attr,Wt)):(C0=fg.uirevision,T0=P1.uirevision,T0===void 0&&(T0=Wt.uirevision)),T0&&T0===C0&&(J0=og[e0],J0===null&&(J0=void 0),em=E(P1,e0),tm=em.get(),k0(tm,J0))){em.set(rt(E(fg,e0).get()));continue}}else m.warn("unrecognized GUI edit: "+e0+" in trace uid "+Q1);delete og[e0]}}}function $0(Mt,Wt,xn,Fp){var Bp,e0;function o0(){return nt.addFrames(Mt,Bp)}Mt=m.getGraphDiv(Mt),B.clearPromiseQueue(Mt);var C0=Mt._fullData,T0=Mt._fullLayout;if(!m.isPlotDiv(Mt)||!C0||!T0)e0=nt.newPlot(Mt,Wt,xn,Fp);else{if(m.isPlainObject(Wt)){var A0=Wt;Wt=A0.data,xn=A0.layout,Fp=A0.config,Bp=A0.frames}var J0=!1;if(Fp){let fg=m.extendDeepAll({},Mt._context);Mt._context=void 0,ut(Mt,Fp),J0=!B.collectionsAreEqual(fg,Mt._context)}if(J0){let fg=Mt._ev.eventNames().map(bg=>[bg,Mt._ev.listeners(bg)]);e0=nt.newPlot(Mt,Wt,xn,Fp).then(()=>{for(let[bg,Cg]of fg)Cg.forEach(Ug=>Mt.on(bg,Ug));return nt.react(Mt,Wt,xn,Fp)})}else{Mt.data=Wt||[],B.cleanData(Mt.data),Mt.layout=xn||{},B.cleanLayout(Mt.layout),V0(Mt.data,Mt.layout,C0,T0),p.supplyDefaults(Mt,{skipUpdateCalc:!0});var em=Mt._fullData,tm=Mt._fullLayout,Nm=tm.datarevision===void 0,o1=tm.transition,N1=gm(Mt,T0,tm,Nm,o1),F1=N1.newDataRevision,B1=W0(Mt,C0,em,Nm,o1,F1);if(w0(Mt)&&(N1.layoutReplot=!0),B1.calc||N1.calc){Mt.calcdata=void 0;for(var u1=Object.getOwnPropertyNames(tm),zm=0;zm<u1.length;zm++){var R1=u1[zm],z1=R1.substring(0,5);if(z1==="xaxis"||z1==="yaxis"){var E1=tm[R1]._emptyCategories;E1&&E1()}}}else p.supplyDefaultsUpdateCalc(Mt.calcdata,em);var g1=[];if(Bp&&(Mt._transitionData={},p.createTransitionData(Mt),g1.push(o0)),tm.transition&&(B1.anim||N1.anim))N1.ticks&&g1.push(X.doTicksRelayout),p.doCalcdata(Mt),X.doAutoRangeAndConstraints(Mt),g1.push(function(){return p.transitionFromReact(Mt,B1,N1,T0)});else if(B1.fullReplot||N1.layoutReplot)Mt._fullLayout._skipDefaults=!0,g1.push(nt._doPlot);else{for(var w1 in N1.arrays){var s1=N1.arrays[w1];if(s1.length){var Q1=S.getComponentMethod(w1,"drawOne");if(Q1!==m.noop)for(var og=0;og<s1.length;og++)Q1(Mt,s1[og]);else{var P1=S.getComponentMethod(w1,"draw");if(P1===m.noop)throw new Error("cannot draw components: "+w1);P1(Mt)}}}g1.push(p.previousPromises),B1.style&&g1.push(X.doTraceStyle),(B1.colorbars||N1.colorbars)&&g1.push(X.doColorBars),N1.legend&&g1.push(X.doLegend),N1.layoutstyle&&g1.push(X.layoutStyles),N1.axrange&&Sr(g1),N1.ticks&&g1.push(X.doTicksRelayout),N1.modebar&&g1.push(X.doModeBar),N1.camera&&g1.push(X.doCamera),g1.push(xt)}g1.push(p.rehover,p.redrag,p.reselect),e0=m.syncOrAsync(g1,Mt),(!e0||!e0.then)&&(e0=Promise.resolve(Mt))}}return e0.then(()=>(J0||Mt.emit("plotly_react",{config:Fp,data:Wt,layout:xn}),Mt))}function W0(Mt,Wt,xn,Fp,Bp,e0){var o0=Wt.length===xn.length;if(!Bp&&!o0)return{fullReplot:!0,calc:!0};var C0=ee.traceFlags();C0.arrays={},C0.nChanges=0,C0.nChangesAnim=0;var T0,A0;function J0(Nm){var o1=C.getTraceValObject(A0,Nm);return!A0._module.animatable&&o1.anim&&(o1.anim=!1),o1}var em={getValObject:J0,flags:C0,immutable:Fp,transition:Bp,newDataRevision:e0,gd:Mt},tm={};for(T0=0;T0<Wt.length;T0++)if(xn[T0]){if(A0=xn[T0]._fullInput,tm[A0.uid])continue;tm[A0.uid]=1,F0(Wt[T0]._fullInput,A0,[],em)}return(C0.calc||C0.plot)&&(C0.fullReplot=!0),Bp&&C0.nChanges&&C0.nChangesAnim&&(C0.anim=C0.nChanges===C0.nChangesAnim&&o0?"all":"some"),C0}function gm(Mt,Wt,xn,Fp,Bp){var e0=ee.layoutFlags();e0.arrays={},e0.rangesAltered={},e0.nChanges=0,e0.nChangesAnim=0;function o0(tm){return C.getLayoutValObject(xn,tm)}for(var C0 in xn)if(!(!C0.startsWith("xaxis")&&!C0.startsWith("yaxis"))&&Wt[C0]){var T0=xn[C0].domain,A0=Wt[C0].domain,J0=Wt[C0]._inputDomain;Wt[C0]._inputDomain&&(T0[0]===J0[0]&&T0[1]===J0[1]?xn[C0].domain=Wt[C0].domain:(T0[0]!==A0[0]||T0[1]!==A0[1])&&(xn[C0]._inputDomain=null))}var em={getValObject:o0,flags:e0,immutable:Fp,transition:Bp,gd:Mt};return F0(Wt,xn,[],em),(e0.plot||e0.calc)&&(e0.layoutReplot=!0),Bp&&e0.nChanges&&e0.nChangesAnim&&(e0.anim=e0.nChanges===e0.nChangesAnim?"all":"some"),e0}function F0(Mt,Wt,xn,Fp){var Bp,e0,o0,C0=Fp.getValObject,T0=Fp.flags,A0=Fp.immutable,J0=Fp.inArray,em=Fp.arrayIndex;function tm(){var bg=Bp.editType;if(J0&&bg.indexOf("arraydraw")!==-1){m.pushUnique(T0.arrays[J0],em);return}ee.update(T0,Bp),bg!=="none"&&T0.nChanges++,Fp.transition&&Bp.anim&&T0.nChangesAnim++,(Op.test(o0)||Hp.test(o0))&&(T0.rangesAltered[xn[0]]=1),e0==="datarevision"&&(T0.newDataRevision=1)}function Nm(bg){return bg.valType==="data_array"||bg.arrayOk}for(e0 in Mt){if(T0.calc&&!Fp.transition)return;var o1=Mt[e0],N1=Wt[e0],F1=xn.concat(e0);if(o0=F1.join("."),!(e0.charAt(0)==="_"||typeof o1=="function"||o1===N1)){if((e0==="tick0"||e0==="dtick")&&xn[0]!=="geo"){var B1=Wt.tickmode;if(B1==="auto"||B1==="array"||!B1)continue}if(!(e0==="range"&&Wt.autorange)&&!((e0==="zmin"||e0==="zmax")&&Wt.type==="contourcarpet")&&(Bp=C0(F1),!!Bp&&!(Bp._compareAsJSON&&JSON.stringify(o1)===JSON.stringify(N1)))){var u1=Bp.valType,zm,R1=Nm(Bp),z1=Array.isArray(o1),E1=Array.isArray(N1);if(z1&&E1){var g1="_input_"+e0,w1=Mt[g1],s1=Wt[g1];if(Array.isArray(w1)&&w1===s1)continue}if(N1===void 0)R1&&z1?T0.calc=!0:tm();else if(Bp._isLinkedToArray){var Q1=[],og=!1;J0||(T0.arrays[e0]=Q1);var P1=Math.min(o1.length,N1.length),fg=Math.max(o1.length,N1.length);if(P1!==fg)if(Bp.editType==="arraydraw")og=!0;else{tm();continue}for(zm=0;zm<P1;zm++)F0(o1[zm],N1[zm],F1.concat(zm),m.extendFlat({inArray:e0,arrayIndex:zm},Fp));if(og)for(zm=P1;zm<fg;zm++)Q1.push(zm)}else!u1&&m.isPlainObject(o1)?F0(o1,N1,F1,Fp):R1?z1&&E1?(A0&&(T0.calc=!0),(A0||Fp.newDataRevision)&&tm()):z1!==E1?T0.calc=!0:tm():z1&&E1?(o1.length!==N1.length||String(o1)!==String(N1))&&tm():tm()}}}for(e0 in Wt)if(!(e0 in Mt||e0.charAt(0)==="_"||typeof Wt[e0]=="function"))if(Bp=C0(xn.concat(e0)),Nm(Bp)&&Array.isArray(Wt[e0])){T0.calc=!0;return}else tm()}function bm(Mt,Wt,xn){if(Mt=m.getGraphDiv(Mt),!m.isPlotDiv(Mt))throw new Error("This element is not a Plotly plot: "+Mt+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var Fp=Mt._transitionData;Fp._frameQueue||(Fp._frameQueue=[]),xn=p.supplyAnimationDefaults(xn);var Bp=xn.transition,e0=xn.frame;Fp._frameWaitingCnt===void 0&&(Fp._frameWaitingCnt=0);function o0(A0){return Array.isArray(Bp)?A0>=Bp.length?Bp[0]:Bp[A0]:Bp}function C0(A0){return Array.isArray(e0)?A0>=e0.length?e0[0]:e0[A0]:e0}function T0(A0,J0){var em=0;return function(){if(A0&&++em===J0)return A0()}}return new Promise(function(A0,J0){function em(){if(Fp._frameQueue.length!==0){for(;Fp._frameQueue.length;){var P1=Fp._frameQueue.pop();P1.onInterrupt&&P1.onInterrupt()}Mt.emit("plotly_animationinterrupted",[])}}function tm(P1){if(P1.length!==0){for(var fg=0;fg<P1.length;fg++){var bg;P1[fg].type==="byname"?bg=p.computeFrame(Mt,P1[fg].name):bg=P1[fg].data;var Cg=C0(fg),Ug=o0(fg);Ug.duration=Math.min(Ug.duration,Cg.duration);var rg={frame:bg,name:P1[fg].name,frameOpts:Cg,transitionOpts:Ug};fg===P1.length-1&&(rg.onComplete=T0(A0,2),rg.onInterrupt=J0),Fp._frameQueue.push(rg)}xn.mode==="immediate"&&(Fp._lastFrameAt=-1/0),Fp._animationRaf||N1()}}function Nm(){Mt.emit("plotly_animated"),window.cancelAnimationFrame(Fp._animationRaf),Fp._animationRaf=null}function o1(){Fp._currentFrame&&Fp._currentFrame.onComplete&&Fp._currentFrame.onComplete();var P1=Fp._currentFrame=Fp._frameQueue.shift();if(P1){var fg=P1.name?P1.name.toString():null;Mt._fullLayout._currentFrame=fg,Fp._lastFrameAt=Date.now(),Fp._timeToNext=P1.frameOpts.duration,p.transition(Mt,P1.frame.data,P1.frame.layout,B.coerceTraceIndices(Mt,P1.frame.traces),P1.frameOpts,P1.transitionOpts).then(function(){P1.onComplete&&P1.onComplete()}),Mt.emit("plotly_animatingframe",{name:fg,frame:P1.frame,animation:{frame:P1.frameOpts,transition:P1.transitionOpts}})}else Nm()}function N1(){Mt.emit("plotly_animating"),Fp._lastFrameAt=-1/0,Fp._timeToNext=0,Fp._runningTransitions=0,Fp._currentFrame=null;var P1=function(){Fp._animationRaf=window.requestAnimationFrame(P1),Date.now()-Fp._lastFrameAt>Fp._timeToNext&&o1()};P1()}var F1=0;function B1(P1){return Array.isArray(Bp)?F1>=Bp.length?P1.transitionOpts=Bp[F1]:P1.transitionOpts=Bp[0]:P1.transitionOpts=Bp,F1++,P1}var u1,zm,R1=[],z1=Wt==null,E1=Array.isArray(Wt),g1=!z1&&!E1&&m.isPlainObject(Wt);if(g1)R1.push({type:"object",data:B1(m.extendFlat({},Wt))});else if(z1||["string","number"].indexOf(typeof Wt)!==-1)for(u1=0;u1<Fp._frames.length;u1++)zm=Fp._frames[u1],zm&&(z1||String(zm.group)===String(Wt))&&R1.push({type:"byname",name:String(zm.name),data:B1({name:zm.name})});else if(E1)for(u1=0;u1<Wt.length;u1++){var w1=Wt[u1];["number","string"].indexOf(typeof w1)!==-1?(w1=String(w1),R1.push({type:"byname",name:w1,data:B1({name:w1})})):m.isPlainObject(w1)&&R1.push({type:"object",data:B1(m.extendFlat({},w1))})}for(u1=0;u1<R1.length;u1++)if(zm=R1[u1],zm.type==="byname"&&!Fp._frameHash[zm.data.name]){m.warn('animate failure: frame not found: "'+zm.data.name+'"'),J0();return}["next","immediate"].indexOf(xn.mode)!==-1&&em(),xn.direction==="reverse"&&R1.reverse();var s1=Mt._fullLayout._currentFrame;if(s1&&xn.fromcurrent){var Q1=-1;for(u1=0;u1<R1.length;u1++)if(zm=R1[u1],zm.type==="byname"&&zm.name===s1){Q1=u1;break}if(Q1>0&&Q1<R1.length-1){var og=[];for(u1=0;u1<R1.length;u1++)zm=R1[u1],(R1[u1].type!=="byname"||u1>Q1)&&og.push(zm);R1=og}}R1.length>0?tm(R1):(Mt.emit("plotly_animated"),A0())})}function Dm(Mt,Wt,xn){if(Mt=m.getGraphDiv(Mt),Wt==null)return Promise.resolve();if(!m.isPlotDiv(Mt))throw new Error("This element is not a Plotly plot: "+Mt+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var Fp,Bp,e0,o0,C0=Mt._transitionData._frames,T0=Mt._transitionData._frameHash;if(!Array.isArray(Wt))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+Wt);var A0=C0.length+Wt.length*2,J0=[],em={};for(Fp=Wt.length-1;Fp>=0;Fp--)if(m.isPlainObject(Wt[Fp])){var tm=Wt[Fp].name,Nm=(T0[tm]||em[tm]||{}).name,o1=Wt[Fp].name,N1=T0[Nm]||em[Nm];Nm&&o1&&typeof o1=="number"&&N1&&Ze<Re&&(Ze++,m.warn('addFrames: overwriting frame "'+(T0[Nm]||em[Nm]).name+'" with a frame whose name of type "number" also equates to "'+Nm+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),Ze===Re&&m.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),em[tm]={name:tm},J0.push({frame:p.supplyFrameDefaults(Wt[Fp]),index:xn&&xn[Fp]!==void 0&&xn[Fp]!==null?xn[Fp]:A0+Fp})}J0.sort(function(g1,w1){return g1.index>w1.index?-1:g1.index<w1.index?1:0});var F1=[],B1=[],u1=C0.length;for(Fp=J0.length-1;Fp>=0;Fp--){if(Bp=J0[Fp].frame,typeof Bp.name=="number"&&m.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!Bp.name)for(;T0[Bp.name="frame "+Mt._transitionData._counter++];);if(T0[Bp.name]){for(e0=0;e0<C0.length&&(C0[e0]||{}).name!==Bp.name;e0++);F1.push({type:"replace",index:e0,value:Bp}),B1.unshift({type:"replace",index:e0,value:C0[e0]})}else o0=Math.max(0,Math.min(J0[Fp].index,u1)),F1.push({type:"insert",index:o0,value:Bp}),B1.unshift({type:"delete",index:o0}),u1++}var zm=p.modifyFrames,R1=p.modifyFrames,z1=[Mt,B1],E1=[Mt,F1];return w&&w.add(Mt,zm,z1,R1,E1),p.modifyFrames(Mt,F1)}function vm(Mt,Wt){if(Mt=m.getGraphDiv(Mt),!m.isPlotDiv(Mt))throw new Error("This element is not a Plotly plot: "+Mt);var xn,Fp,Bp=Mt._transitionData._frames,e0=[],o0=[];if(!Wt)for(Wt=[],xn=0;xn<Bp.length;xn++)Wt.push(xn);for(Wt=Wt.slice(),Wt.sort(),xn=Wt.length-1;xn>=0;xn--)Fp=Wt[xn],e0.push({type:"delete",index:Fp}),o0.unshift({type:"insert",index:Fp,value:Bp[Fp]});var C0=p.modifyFrames,T0=p.modifyFrames,A0=[Mt,o0],J0=[Mt,e0];return w&&w.add(Mt,C0,A0,T0,J0),p.modifyFrames(Mt,e0)}function km(Mt){Mt=m.getGraphDiv(Mt);var Wt=Mt._fullLayout||{},xn=Mt._fullData||[];return p.cleanPlot([],{},xn,Wt),p.purge(Mt),b.purge(Mt),Wt._container&&Wt._container.remove(),delete Mt._context,Mt}function Yo(Mt){var Wt=Mt._fullLayout,xn=Mt.getBoundingClientRect();if(!m.equalDomRects(xn,Wt._lastBBox)){var Fp=Wt._invTransform=m.inverseTransformMatrix(m.getFullTransformMatrix(Mt));Wt._invScaleX=Math.sqrt(Fp[0][0]*Fp[0][0]+Fp[0][1]*Fp[0][1]+Fp[0][2]*Fp[0][2]),Wt._invScaleY=Math.sqrt(Fp[1][0]*Fp[1][0]+Fp[1][1]*Fp[1][1]+Fp[1][2]*Fp[1][2]),Wt._lastBBox=xn}}function qp(Mt){var Wt=ke.select(Mt),xn=Mt._fullLayout;if(xn._calcInverseTransform=Yo,xn._calcInverseTransform(Mt),xn._container=Wt.selectAll(".plot-container").data([0]),xn._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0).style({width:"100%",height:"100%"}),xn._paperdiv=xn._container.selectAll(".svg-container").data([0]),xn._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),xn._glcontainer=xn._paperdiv.selectAll(".gl-container").data([{}]),xn._glcontainer.enter().append("div").classed("gl-container",!0),xn._paperdiv.selectAll(".main-svg").remove(),xn._paperdiv.select(".modebar-container").remove(),xn._paper=xn._paperdiv.insert("svg",":first-child").classed("main-svg",!0),xn._toppaper=xn._paperdiv.append("svg").classed("main-svg",!0),xn._modebardiv=xn._paperdiv.append("div"),delete xn._modeBar,xn._hoverpaper=xn._paperdiv.append("svg").classed("main-svg",!0),!xn._uid){var Fp={};ke.selectAll("defs").each(function(){this.id&&(Fp[this.id.split("-")[1]]=1)}),xn._uid=m.randstr(Fp)}xn._paperdiv.selectAll(".main-svg").attr(I.svgAttrs),xn._defs=xn._paper.append("defs").attr("id","defs-"+xn._uid),xn._clips=xn._defs.append("g").classed("clips",!0),xn._topdefs=xn._toppaper.append("defs").attr("id","topdefs-"+xn._uid),xn._topclips=xn._topdefs.append("g").classed("clips",!0),xn._bgLayer=xn._paper.append("g").classed("bglayer",!0),xn._draggers=xn._paper.append("g").classed("draglayer",!0);var Bp=xn._paper.append("g").classed("layer-below",!0);xn._imageLowerLayer=Bp.append("g").classed("imagelayer",!0),xn._shapeLowerLayer=Bp.append("g").classed("shapelayer",!0),xn._cartesianlayer=xn._paper.append("g").classed("cartesianlayer",!0),xn._polarlayer=xn._paper.append("g").classed("polarlayer",!0),xn._smithlayer=xn._paper.append("g").classed("smithlayer",!0),xn._ternarylayer=xn._paper.append("g").classed("ternarylayer",!0),xn._geolayer=xn._paper.append("g").classed("geolayer",!0),xn._funnelarealayer=xn._paper.append("g").classed("funnelarealayer",!0),xn._pielayer=xn._paper.append("g").classed("pielayer",!0),xn._iciclelayer=xn._paper.append("g").classed("iciclelayer",!0),xn._treemaplayer=xn._paper.append("g").classed("treemaplayer",!0),xn._sunburstlayer=xn._paper.append("g").classed("sunburstlayer",!0),xn._indicatorlayer=xn._toppaper.append("g").classed("indicatorlayer",!0),xn._glimages=xn._paper.append("g").classed("glimages",!0);var e0=xn._toppaper.append("g").classed("layer-above",!0);xn._imageUpperLayer=e0.append("g").classed("imagelayer",!0),xn._shapeUpperLayer=e0.append("g").classed("shapelayer",!0),xn._selectionLayer=xn._toppaper.append("g").classed("selectionlayer",!0),xn._infolayer=xn._toppaper.append("g").classed("infolayer",!0),xn._menulayer=xn._toppaper.append("g").classed("menulayer",!0),xn._zoomlayer=xn._toppaper.append("g").classed("zoomlayer",!0),xn._hoverlayer=xn._hoverpaper.append("g").classed("hoverlayer",!0),xn._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),Mt.emit("plotly_framework")}nt.animate=bm,nt.addFrames=Dm,nt.deleteFrames=vm,nt.addTraces=gt,nt.deleteTraces=te,nt.extendTraces=Cp,nt.moveTraces=Et,nt.prependTraces=pt,nt.newPlot=_t,nt._doPlot=Q,nt.purge=km,nt.react=$0,nt.redraw=vt,nt.relayout=It,nt.restyle=zt,nt.setPlotConfig=tt,nt.update=_0,nt._guiRelayout=ha(It),nt._guiRestyle=ha(zt),nt._guiUpdate=ha(_0),nt._storeDirectGUIEdit=ot}),zx=r(nt=>{var ke=y1();nt.getDelay=function(m){return m._has&&(m._has("gl3d")||m._has("mapbox")||m._has("map"))?500:0},nt.getRedrawFunc=function(m){return function(){ke.getComponentMethod("colorbar","draw")(m)}},nt.encodeSVG=function(m){return"data:image/svg+xml,"+encodeURIComponent(m)},nt.encodeJSON=function(m){return"data:application/json,"+encodeURIComponent(m)};var _=window.URL||window.webkitURL;nt.createObjectURL=function(m){return _.createObjectURL(m)},nt.revokeObjectURL=function(m){return _.revokeObjectURL(m)},nt.createBlob=function(m,E){if(E==="svg")return new window.Blob([m],{type:"image/svg+xml;charset=utf-8"});if(E==="full-json")return new window.Blob([m],{type:"application/json;charset=utf-8"});var b=d(window.atob(m));return new window.Blob([b],{type:"image/"+E})},nt.octetStream=function(m){document.location.href="data:application/octet-stream"+m};function d(m){for(var E=m.length,b=new ArrayBuffer(E),w=new Uint8Array(b),S=0;S<E;S++)w[S]=m.charCodeAt(S);return b}nt.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/}),Cb=r((nt,ke)=>{var _=o();et();var d=Q0(),m=Mn();Ag();var E=/"/g,b="TOBESTRIPPED",w=new RegExp('("'+b+")|("+b+'")',"g");function S(p){var F=_.select("body").append("div").style({display:"none"}).html(""),A=p.replace(/(&[^;]*;)/gi,function(O){return O==="&lt;"?"&#60;":O==="&rt;"?"&#62;":O.indexOf("<")!==-1||O.indexOf(">")!==-1?"":F.html(O).text()});return F.remove(),A}function C(p){return p.replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")}ke.exports=function(p,F,A){var O=p._fullLayout,$=O._paper,j=O._toppaper,z=O.width,I=O.height,G;$.insert("rect",":first-child").call(d.setRect,0,0,z,I).call(m.fill,O.paper_bgcolor);var M=O._basePlotModules||[];for(G=0;G<M.length;G++){var L=M[G];L.toSVG&&L.toSVG(p)}if(j){var B=j.node().childNodes,X=Array.prototype.slice.call(B);for(G=0;G<X.length;G++){var ee=X[G];ee.childNodes.length&&$.node().appendChild(ee)}}O._draggers&&O._draggers.remove(),$.node().style.background="",$.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var Ze=_.select(this);if(this.style.visibility==="hidden"||this.style.display==="none"){Ze.remove();return}else Ze.style({visibility:null,display:null});var Re=this.style.fontFamily;Re&&Re.indexOf('"')!==-1&&Ze.style("font-family",Re.replace(E,b));var Q=this.style.fontWeight;Q&&(Q==="normal"||Q==="400")&&Ze.style("font-weight",void 0);var xt=this.style.fontStyle;xt&&xt==="normal"&&Ze.style("font-style",void 0);var tt=this.style.fontVariant;tt&&tt==="normal"&&Ze.style("font-variant",void 0)}),$.selectAll(".gradient_filled,.pattern_filled").each(function(){var Ze=_.select(this),Re=this.style.fill;Re&&Re.indexOf("url(")!==-1&&Ze.style("fill",Re.replace(E,b));var Q=this.style.stroke;Q&&Q.indexOf("url(")!==-1&&Ze.style("stroke",Q.replace(E,b))}),(F==="pdf"||F==="eps")&&$.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),F==="svg"&&A&&($.attr("width",A*z),$.attr("height",A*I),$.attr("viewBox","0 0 "+z+" "+I));var yt=new window.XMLSerializer().serializeToString($.node());return yt=S(yt),yt=C(yt),yt=yt.replace(w,"'"),yt}}),Ix=r((nt,ke)=>{var _=et(),d=m0().EventEmitter,m=zx();function E(b){var w=b.emitter||new d,S=new Promise(function(C,p){var F=window.Image,A=b.svg,O=b.format||"png",$=b.canvas,j=b.scale||1,z=b.width||300,I=b.height||150,G=j*z,M=j*I,L=$.getContext("2d",{willReadFrequently:!0}),B=new F,X,ee;O==="svg"||_.isSafari()?ee=m.encodeSVG(A):(X=m.createBlob(A,"svg"),ee=m.createObjectURL(X)),$.width=G,$.height=M,B.onload=function(){var yt;switch(X=null,m.revokeObjectURL(ee),O!=="svg"&&L.drawImage(B,0,0,G,M),O){case"jpeg":yt=$.toDataURL("image/jpeg");break;case"png":yt=$.toDataURL("image/png");break;case"webp":yt=$.toDataURL("image/webp");break;case"svg":yt=ee;break;default:var Ze="Image format is not jpeg, png, svg or webp.";if(p(new Error(Ze)),!b.promise)return w.emit("error",Ze)}C(yt),b.promise||w.emit("success",yt)},B.onerror=function(yt){if(X=null,m.revokeObjectURL(ee),p(yt),!b.promise)return w.emit("error",yt)},B.src=ee});return b.promise?S:w}ke.exports=E}),O_=r((nt,ke)=>{var _=v(),d=Ab(),m=cg(),E=et(),b=zx(),w=Cb(),S=Ix(),C=n().version,p={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};function F(A,O){O=O||{};var $,j,z,I;E.isPlainObject(A)?($=A.data||[],j=A.layout||{},z=A.config||{},I={}):(A=E.getGraphDiv(A),$=E.extendDeep([],A.data),j=E.extendDeep({},A.layout),z=A._context,I=A._fullLayout||{});function G(_t){return!(_t in O)||E.validate(O[_t],p[_t])}if(!G("width")&&O.width!==null||!G("height")&&O.height!==null)throw new Error("Height and width should be pixel values.");if(!G("format"))throw new Error("Export format is not "+E.join2(p.format.values,", "," or ")+".");var M={};function L(_t,Le){return E.coerce(O,M,p,_t,Le)}var B=L("format"),X=L("width"),ee=L("height"),yt=L("scale"),Ze=L("setBackground"),Re=L("imageDataOnly"),Q=document.createElement("div");Q.style.position="absolute",Q.style.left="-5000px",document.body.appendChild(Q);var xt=E.extendFlat({},j);X?xt.width=X:O.width===null&&_(I.width)&&(xt.width=I.width),ee?xt.height=ee:O.height===null&&_(I.height)&&(xt.height=I.height);var tt=E.extendFlat({},z,{_exportedPlot:!0,staticPlot:!0,setBackground:Ze}),ht=b.getRedrawFunc(Q);function it(){return new Promise(function(_t){setTimeout(_t,b.getDelay(Q._fullLayout))})}function ut(){return new Promise(function(_t,Le){var wt=w(Q,B,yt),St=Q._fullLayout.width,Ut=Q._fullLayout.height;function kt(){d.purge(Q),document.body.removeChild(Q)}if(B==="full-json"){var jt=m.graphJson(Q,!1,"keepdata","object",!0,!0);return jt.version=C,jt=JSON.stringify(jt),kt(),_t(Re?jt:b.encodeJSON(jt))}if(kt(),B==="svg")return _t(Re?wt:b.encodeSVG(wt));var aa=document.createElement("canvas");aa.id=E.randstr(),S({format:B,width:St,height:Ut,scale:yt,canvas:aa,svg:wt,promise:!0}).then(_t).catch(Le)})}function vt(_t){return Re?_t.replace(b.IMAGE_URL_PREFIX,""):_t}return new Promise(function(_t,Le){d.newPlot(Q,$,xt,tt).then(ht).then(it).then(ut).then(function(wt){_t(vt(wt))}).catch(function(wt){Le(wt)})})}ke.exports=F}),Z2=r((nt,ke)=>{var _=et(),d=cg(),m=Gm(),E=qo().dfltConfig,b=_.isPlainObject,w=Array.isArray,S=_.isArrayOrTypedArray;ke.exports=function(M,L){M===void 0&&(M=[]),L===void 0&&(L={});var B=m.get(),X=[],ee={_context:_.extendFlat({},E)},yt,Ze;w(M)?(ee.data=_.extendDeep([],M),yt=M):(ee.data=[],yt=[],X.push(O("array","data"))),b(L)?(ee.layout=_.extendDeep({},L),Ze=L):(ee.layout={},Ze={},arguments.length>1&&X.push(O("object","layout"))),d.supplyDefaults(ee);for(var Re=ee._fullData,Q=yt.length,xt=0;xt<Q;xt++){var tt=yt[xt],ht=["data",xt];if(!b(tt)){X.push(O("object",ht));continue}var it=Re[xt],ut=it.type,vt=B.traces[ut].attributes;vt.type={valType:"enumerated",values:[ut]},it.visible===!1&&tt.visible!==!1&&X.push(O("invisible",ht)),C(tt,it,vt,X,ht)}var _t=ee._fullLayout,Le=p(B,Re);return C(Ze,_t,Le,X,"layout"),X.length===0?void 0:X};function C(M,L,B,X,ee,yt){yt=yt||[];for(var Ze=Object.keys(M),Re=0;Re<Ze.length;Re++){var Q=Ze[Re],xt=yt.slice();xt.push(Q);var tt=M[Q],ht=L[Q],it=j(B,Q),ut=(it||{}).valType,vt=ut==="info_array",_t=ut==="colorscale",Le=(it||{}).items;if(!$(B,Q))X.push(O("schema",ee,xt));else if(b(tt)&&b(ht)&&ut!=="any")C(tt,ht,it,X,ee,xt);else if(vt&&w(tt)){tt.length>ht.length&&X.push(O("unused",ee,xt.concat(ht.length)));var wt=ht.length,St=Array.isArray(Le);St&&(wt=Math.min(wt,Le.length));var Ut,kt,jt,aa,ca;if(it.dimensions===2)for(kt=0;kt<wt;kt++)if(w(tt[kt])){tt[kt].length>ht[kt].length&&X.push(O("unused",ee,xt.concat(kt,ht[kt].length)));var Cp=ht[kt].length;for(Ut=0;Ut<(St?Math.min(Cp,Le[kt].length):Cp);Ut++)jt=St?Le[kt][Ut]:Le,aa=tt[kt][Ut],ca=ht[kt][Ut],_.validate(aa,jt)?ca!==aa&&ca!==+aa&&X.push(O("dynamic",ee,xt.concat(kt,Ut),aa,ca)):X.push(O("value",ee,xt.concat(kt,Ut),aa))}else X.push(O("array",ee,xt.concat(kt),tt[kt]));else for(kt=0;kt<wt;kt++)jt=St?Le[kt]:Le,aa=tt[kt],ca=ht[kt],_.validate(aa,jt)?ca!==aa&&ca!==+aa&&X.push(O("dynamic",ee,xt.concat(kt),aa,ca)):X.push(O("value",ee,xt.concat(kt),aa))}else if(it.items&&!vt&&w(tt)){var pt=Le[Object.keys(Le)[0]],gt=[],te,Et;for(te=0;te<ht.length;te++){var zt=ht[te]._index||te;if(Et=xt.slice(),Et.push(zt),b(tt[zt])&&b(ht[te])){gt.push(zt);var rt=tt[zt],Z=ht[te];b(rt)&&rt.visible!==!1&&Z.visible===!1?X.push(O("invisible",ee,Et)):C(rt,Z,pt,X,ee,Et)}}for(te=0;te<tt.length;te++)Et=xt.slice(),Et.push(te),b(tt[te])?gt.indexOf(te)===-1&&X.push(O("unused",ee,Et)):X.push(O("object",ee,Et,tt[te]))}else!b(tt)&&b(ht)?X.push(O("object",ee,xt,tt)):!S(tt)&&S(ht)&&!vt&&!_t?X.push(O("array",ee,xt,tt)):Q in L?_.validate(tt,it)?it.valType==="enumerated"&&(it.coerceNumber&&tt!==+ht||!S(tt)&&tt!==ht||String(tt)!==String(ht))&&X.push(O("dynamic",ee,xt,tt,ht)):X.push(O("value",ee,xt,tt)):X.push(O("unused",ee,xt,tt))}return X}function p(M,L){for(var B=M.layout.layoutAttributes,X=0;X<L.length;X++){var ee=L[X],yt=M.traces[ee.type],Ze=yt.layoutAttributes;Ze&&(ee.subplot?_.extendFlat(B[yt.attributes.subplot.dflt],Ze):_.extendFlat(B,Ze))}return B}var F={object:function(M,L){var B;return M==="layout"&&L===""?B="The layout argument":M[0]==="data"&&L===""?B="Trace "+M[1]+" in the data argument":B=A(M)+"key "+L,B+" must be linked to an object container"},array:function(M,L){var B;return M==="data"?B="The data argument":B=A(M)+"key "+L,B+" must be linked to an array container"},schema:function(M,L){return A(M)+"key "+L+" is not part of the schema"},unused:function(M,L,B){var X=b(B)?"container":"key";return A(M)+X+" "+L+" did not get coerced"},dynamic:function(M,L,B,X){return[A(M)+"key",L,"(set to '"+B+"')","got reset to","'"+X+"'","during defaults."].join(" ")},invisible:function(M,L){return(L?A(M)+"item "+L:"Trace "+M[1])+" got defaulted to be not visible"},value:function(M,L,B){return[A(M)+"key "+L,"is set to an invalid value ("+B+")"].join(" ")}};function A(M){return w(M)?"In data trace "+M[1]+", ":"In "+M+", "}function O(M,L,B,X,ee){B=B||"";var yt,Ze;w(L)?(yt=L[0],Ze=L[1]):(yt=L,Ze=null);var Re=G(B),Q=F[M](L,Re,X,ee);return _.log(Q),{code:M,container:yt,trace:Ze,path:B,astr:Re,msg:Q}}function $(M,L){var B=I(L),X=B.keyMinusId,ee=B.id;return X in M&&M[X]._isSubplotObj&&ee?!0:L in M}function j(M,L){if(L in M)return M[L];var B=I(L);return M[B.keyMinusId]}var z=_.counterRegex("([a-z]+)");function I(M){var L=M.match(z);return{keyMinusId:L&&L[1],id:L&&L[2]}}function G(M){if(!w(M))return String(M);for(var L="",B=0;B<M.length;B++){var X=M[B];typeof X=="number"?L=L.substr(0,L.length-1)+"["+X+"]":L+=X,B<M.length-1&&(L+=".")}return L}}),Db=r((nt,ke)=>{var _=et(),d=zx();function m(E,b,w){var S=document.createElement("a"),C="download"in S,p=new Promise(function(F,A){var O,$;if(C)return O=d.createBlob(E,w),$=d.createObjectURL(O),S.href=$,S.download=b,document.body.appendChild(S),S.click(),document.body.removeChild(S),d.revokeObjectURL($),O=null,F(b);if(_.isSafari()){var j=w==="svg"?",":";base64,";return d.octetStream(j+encodeURIComponent(E)),F(b)}A(new Error("download error"))});return p}ke.exports=m}),Rb=r((nt,ke)=>{var _=et(),d=O_(),m=Db();zx();function E(b,w){var S;return _.isPlainObject(b)||(S=_.getGraphDiv(b)),w=w||{},w.format=w.format||"png",w.width=w.width||null,w.height=w.height||null,w.imageDataOnly=!0,new Promise(function(C,p){S&&S._snapshotInProgress&&p(new Error("Snapshotting already in progress.")),S&&(S._snapshotInProgress=!0);var F=d(b,w),A=w.filename||b.fn||"newplot";A+="."+w.format.replace("-","."),F.then(function(O){return S&&(S._snapshotInProgress=!1),m(O,A,w.format)}).then(function(O){C(O)}).catch(function(O){S&&(S._snapshotInProgress=!1),p(O)})})}ke.exports=E}),a2=r(nt=>{var ke=et(),_=ke.isPlainObject,d=Gm(),m=cg(),E=$t(),b=Fm(),w=qo().dfltConfig;nt.makeTemplate=function(z){z=ke.isPlainObject(z)?z:ke.getGraphDiv(z),z=ke.extendDeep({_context:w},{data:z.data,layout:z.layout}),m.supplyDefaults(z);var I=z.data||[],G=z.layout||{};G._basePlotModules=z._fullLayout._basePlotModules,G._modules=z._fullLayout._modules;var M={data:{},layout:{}};I.forEach(function(tt){var ht={};p(tt,ht,A.bind(null,tt));var it=ke.coerce(tt,{},E,"type"),ut=M.data[it];ut||(ut=M.data[it]=[]),ut.push(ht)}),p(G,M.layout,F.bind(null,G)),delete M.layout.template;var L=G.template;if(_(L)){var B=L.layout,X,ee,yt,Ze,Re,Q;_(B)&&S(B,M.layout);var xt=L.data;if(_(xt)){for(ee in M.data)if(yt=xt[ee],Array.isArray(yt)){for(Re=M.data[ee],Q=Re.length,Ze=yt.length,X=0;X<Q;X++)S(yt[X%Ze],Re[X]);for(X=Q;X<Ze;X++)Re.push(ke.extendDeep({},yt[X]))}for(ee in xt)ee in M.data||(M.data[ee]=ke.extendDeep([],xt[ee]))}}return M};function S(z,I){z=ke.extendDeep({},z);var G=Object.keys(z).sort(),M,L;function B(Re,Q,xt){if(_(Q)&&_(Re))S(Re,Q);else if(Array.isArray(Q)&&Array.isArray(Re)){var tt=b.arrayTemplater({_template:z},xt);for(L=0;L<Q.length;L++){var ht=Q[L],it=tt.newItem(ht)._template;it&&S(it,ht)}var ut=tt.defaultItems();for(L=0;L<ut.length;L++)Q.push(ut[L]._template);for(L=0;L<Q.length;L++)delete Q[L].templateitemname}}for(M=0;M<G.length;M++){var X=G[M],ee=z[X];if(X in I?B(ee,I[X],X):I[X]=ee,C(X)===X)for(var yt in I){var Ze=C(yt);yt!==Ze&&Ze===X&&!(yt in z)&&B(ee,I[yt],X)}}}function C(z){return z.replace(/[0-9]+$/,"")}function p(z,I,G,M,L){var B=L&&G(L);for(var X in z){var ee=z[X],yt=O(z,X,M),Ze=O(z,X,L),Re=G(Ze);if(!Re){var Q=C(X);Q!==X&&(Ze=O(z,Q,L),Re=G(Ze))}if(!(B&&B===Re)&&!(!Re||Re._noTemplating||Re.valType==="data_array"||Re.arrayOk&&Array.isArray(ee)))if(!Re.valType&&_(ee))p(ee,I,G,yt,Ze);else if(Re._isLinkedToArray&&Array.isArray(ee))for(var xt=!1,tt=0,ht={},it=0;it<ee.length;it++){var ut=ee[it];if(_(ut)){var vt=ut.name;if(vt)ht[vt]||(p(ut,I,G,O(ee,tt,yt),O(ee,tt,Ze)),tt++,ht[vt]=1);else if(!xt){var _t=b.arrayDefaultKey(X),Le=O(z,_t,M),wt=O(ee,tt,yt);p(ut,I,G,wt,O(ee,tt,Ze));var St=ke.nestedProperty(I,wt),Ut=ke.nestedProperty(I,Le);Ut.set(St.get()),St.set(null),xt=!0}}}else{var kt=ke.nestedProperty(I,yt);kt.set(ee)}}}function F(z,I){return d.getLayoutValObject(z,ke.nestedProperty({},I).parts)}function A(z,I){return d.getTraceValObject(z,ke.nestedProperty({},I).parts)}function O(z,I,G){var M;return G?Array.isArray(z)?M=G+"["+I+"]":M=G+"."+I:M=I,M}nt.validateTemplate=function(z,I){var G=ke.extendDeep({},{_context:w,data:z.data,layout:z.layout}),M=G.layout||{};_(I)||(I=M.template||{});var L=I.layout,B=I.data,X=[];G.layout=M,G.layout.template=I,m.supplyDefaults(G);var ee=G._fullLayout,yt=G._fullData,Ze={};function Re(Le,wt){for(var St in Le)if(St.charAt(0)!=="_"&&_(Le[St])){var Ut=C(St),kt=[],jt;for(jt=0;jt<wt.length;jt++)kt.push(O(Le,St,wt[jt])),Ut!==St&&kt.push(O(Le,Ut,wt[jt]));for(jt=0;jt<kt.length;jt++)Ze[kt[jt]]=1;Re(Le[St],kt)}}function Q(Le,wt){for(var St in Le)if(St.indexOf("defaults")===-1&&_(Le[St])){var Ut=O(Le,St,wt);Ze[Ut]?Q(Le[St],Ut):X.push({code:"unused",path:Ut})}}if(_(L)?(Re(ee,["layout"]),Q(L,"layout")):X.push({code:"layout"}),!_(B))X.push({code:"data"});else{for(var xt={},tt,ht=0;ht<yt.length;ht++){var it=yt[ht];tt=it.type,xt[tt]=(xt[tt]||0)+1,it._fullInput._template||X.push({code:"missing",index:it.index,traceType:tt})}for(tt in B){var ut=B[tt].length,vt=xt[tt]||0;ut>vt?X.push({code:"unused",traceType:tt,templateCount:ut,dataCount:vt}):vt>ut&&X.push({code:"reused",traceType:tt,templateCount:ut,dataCount:vt})}}function _t(Le,wt){for(var St in Le)if(St.charAt(0)!=="_"){var Ut=Le[St],kt=O(Le,St,wt);_(Ut)?(Array.isArray(Le)&&Ut._template===!1&&Ut.templateitemname&&X.push({code:"missing",path:kt,templateitemname:Ut.templateitemname}),_t(Ut,kt)):Array.isArray(Ut)&&$(Ut)&&_t(Ut,kt)}}if(_t({data:yt,layout:ee},""),X.length)return X.map(j)};function $(z){for(var I=0;I<z.length;I++)if(_(z[I]))return!0}function j(z){var I;switch(z.code){case"data":I="The template has no key data.";break;case"layout":I="The template has no key layout.";break;case"missing":z.path?I="There are no templates for item "+z.path+" with name "+z.templateitemname:I="There are no templates for trace "+z.index+", of type "+z.traceType+".";break;case"unused":z.path?I="The template item at "+z.path+" was not used in constructing the plot.":z.dataCount?I="Some of the templates of type "+z.traceType+" were not used. The template has "+z.templateCount+" traces, the data only has "+z.dataCount+" of this type.":I="The template has "+z.templateCount+" traces of type "+z.traceType+" but there are none in the data.";break;case"reused":I="Some of the templates of type "+z.traceType+" were used more than once. The template has "+z.templateCount+" traces, the data has "+z.dataCount+" of this type.";break}return z.msg=I,z}}),b2=r(nt=>{var ke=Ab();nt._doPlot=ke._doPlot,nt.newPlot=ke.newPlot,nt.restyle=ke.restyle,nt.relayout=ke.relayout,nt.redraw=ke.redraw,nt.update=ke.update,nt._guiRestyle=ke._guiRestyle,nt._guiRelayout=ke._guiRelayout,nt._guiUpdate=ke._guiUpdate,nt._storeDirectGUIEdit=ke._storeDirectGUIEdit,nt.react=ke.react,nt.extendTraces=ke.extendTraces,nt.prependTraces=ke.prependTraces,nt.addTraces=ke.addTraces,nt.deleteTraces=ke.deleteTraces,nt.moveTraces=ke.moveTraces,nt.purge=ke.purge,nt.addFrames=ke.addFrames,nt.deleteFrames=ke.deleteFrames,nt.animate=ke.animate,nt.setPlotConfig=ke.setPlotConfig;var _=Cm().getGraphDiv,d=X0().eraseActiveShape;nt.deleteActiveShape=function(E){return d(_(E))},nt.toImage=O_(),nt.validate=Z2(),nt.downloadImage=Rb();var m=a2();nt.makeTemplate=m.makeTemplate,nt.validateTemplate=m.validateTemplate}),P_=r((nt,ke)=>{var _=et(),d=y1();ke.exports=function(m,E,b,w){var S=w("x"),C=w("y"),p,F=d.getComponentMethod("calendars","handleTraceDefaults");if(F(m,E,["x","y"],b),S){var A=_.minRowLength(S);C?p=Math.min(A,_.minRowLength(C)):(p=A,w("y0"),w("dy"))}else{if(!C)return 0;p=_.minRowLength(C),w("x0"),w("dx")}return E._length=p,p}}),Nb=r((nt,ke)=>{var _=et().dateTick0,d=g(),m=d.ONEWEEK;function E(b,w){return b%m===0?_(w,1):_(w,0)}ke.exports=function(b,w,S,C,p){if(p||(p={x:!0,y:!0}),p.x){var F=C("xperiod");F&&(C("xperiod0",E(F,w.xcalendar)),C("xperiodalignment"))}if(p.y){var A=C("yperiod");A&&(C("yperiod0",E(A,w.ycalendar)),C("yperiodalignment"))}}}),i2=r((nt,ke)=>{var _=["orientation","groupnorm","stackgaps"];ke.exports=function(d,m,E,b){var w=E._scatterStackOpts,S=b("stackgroup");if(S){var C=m.xaxis+m.yaxis,p=w[C];p||(p=w[C]={});var F=p[S],A=!1;F?F.traces.push(m):(F=p[S]={traceIndices:[],traces:[m]},A=!0);for(var O={orientation:m.x&&!m.y?"h":"v"},$=0;$<_.length;$++){var j=_[$],z=j+"Found";if(!F[z]){var I=d[j]!==void 0,G=j==="orientation";if((I||A)&&(F[j]=b(j,O[j]),G&&(F.fillDflt=F[j]==="h"?"tonextx":"tonexty"),I&&(F[z]=!0,!A&&(delete F.traces[0][j],G))))for(var M=0;M<F.traces.length-1;M++){var L=F.traces[M];L._input.fill!==L.fill&&(L.fill=F.fillDflt)}}}return F}}}),G3=r((nt,ke)=>{var _=Mn(),d=sg().hasColorscale,m=Zo(),E=Kp();ke.exports=function(b,w,S,C,p,F){var A=E.isBubble(b),O=(b.line||{}).color,$;if(F=F||{},O&&(S=O),p("marker.symbol"),p("marker.opacity",A?.7:1),p("marker.size"),F.noAngle||(p("marker.angle"),F.noAngleRef||p("marker.angleref"),F.noStandOff||p("marker.standoff")),p("marker.color",S),d(b,"marker")&&m(b,w,C,p,{prefix:"marker.",cLetter:"c"}),F.noSelect||(p("selected.marker.color"),p("unselected.marker.color"),p("selected.marker.size"),p("unselected.marker.size")),F.noLine||(O&&!Array.isArray(O)&&w.marker.color!==O?$=O:A?$=_.background:$=_.defaultLine,p("marker.line.color",$),d(b,"marker.line")&&m(b,w,C,p,{prefix:"marker.line.",cLetter:"c"}),p("marker.line.width",A?1:0)),A&&(p("marker.sizeref"),p("marker.sizemin"),p("marker.sizemode")),F.gradient){var j=p("marker.gradient.type");j!=="none"&&p("marker.gradient.color")}}}),$3=r((nt,ke)=>{var _=et().isArrayOrTypedArray,d=sg().hasColorscale,m=Zo();ke.exports=function(E,b,w,S,C,p){p||(p={});var F=(E.marker||{}).color;if(F&&F._inputArray&&(F=F._inputArray),C("line.color",w),d(E,"line"))m(E,b,S,C,{prefix:"line.",cLetter:"c"});else{var A=(_(F)?!1:F)||w;C("line.color",A)}C("line.width"),p.noDash||C("line.dash"),p.backoff&&C("line.backoff")}}),W3=r((nt,ke)=>{ke.exports=function(_,d,m){var E=m("line.shape");E==="spline"&&m("line.smoothing")}}),a5=r((nt,ke)=>{var _=et();ke.exports=function(d,m,E,b,w){w=w||{},b("textposition"),_.coerceFont(b,"textfont",w.font||E.font,w),w.noSelect||(b("selected.textfont.color"),b("unselected.textfont.color"))}}),i5=r((nt,ke)=>{var _=Mn(),d=et().isArrayOrTypedArray;function m(E){for(var b=_.interpolate(E[0][1],E[1][1],.5),w=2;w<E.length;w++){var S=_.interpolate(E[w-1][1],E[w][1],.5);b=_.interpolate(b,S,E[w-1][0]/E[w][0])}return b}ke.exports=function(E,b,w,S,C){C||(C={});var p=!1;if(b.marker){var F=b.marker.color,A=(b.marker.line||{}).color;F&&!d(F)?p=F:A&&!d(A)&&(p=A)}var O;if(C.moduleHasFillgradient){var $=S("fillgradient.type");if($!=="none"){S("fillgradient.start"),S("fillgradient.stop");var j=S("fillgradient.colorscale");j&&(O=m(j))}}S("fillcolor",_.addOpacity((b.line||{}).color||p||O||w,.5))}}),o5=r((nt,ke)=>{var _=et(),d=y1(),m=r2(),E=Mx(),b=Kp(),w=P_(),S=Nb(),C=i2(),p=G3(),F=$3(),A=W3(),O=a5(),$=i5(),j=et().coercePattern;ke.exports=function(z,I,G,M){function L(xt,tt){return _.coerce(z,I,m,xt,tt)}var B=w(z,I,M,L);if(B||(I.visible=!1),!!I.visible){S(z,I,M,L),L("xhoverformat"),L("yhoverformat"),L("zorder");var X=C(z,I,M,L);M.scattermode==="group"&&I.orientation===void 0&&L("orientation","v");var ee=!X&&B<E.PTS_LINESONLY?"lines+markers":"lines";L("text"),L("hovertext"),L("mode",ee),b.hasMarkers(I)&&p(z,I,G,M,L,{gradient:!0}),b.hasLines(I)&&(F(z,I,G,M,L,{backoff:!0}),A(z,I,L),L("connectgaps"),L("line.simplify")),b.hasText(I)&&(L("texttemplate"),O(z,I,M,L));var yt=[];(b.hasMarkers(I)||b.hasText(I))&&(L("cliponaxis"),L("marker.maxdisplayed"),yt.push("points")),L("fill",X?X.fillDflt:"none"),I.fill!=="none"&&($(z,I,G,L,{moduleHasFillgradient:!0}),b.hasLines(I)||A(z,I,L),j(L,"fillpattern",I.fillcolor,!1));var Ze=(I.line||{}).color,Re=(I.marker||{}).color;(I.fill==="tonext"||I.fill==="toself")&&yt.push("fills"),L("hoveron",yt.join("+")||"points"),I.hoveron!=="fills"&&L("hovertemplate");var Q=d.getComponentMethod("errorbars","supplyDefaults");Q(z,I,Ze||Re||G,{axis:"y"}),Q(z,I,Ze||Re||G,{axis:"x",inherit:"y"}),_.coerceSelectionMarkerOpacity(I,L)}}}),Lb=r((nt,ke)=>{var _=Sg().getAxisGroup;ke.exports=function(d,m,E,b,w){var S=m.orientation,C=m[{v:"x",h:"y"}[S]+"axis"],p=_(E,C)+S,F=E._alignmentOpts||{},A=b("alignmentgroup"),O=F[p];O||(O=F[p]={});var $=O[A];$?$.traces.push(m):$=O[A]={traces:[m],alignmentIndex:Object.keys(O).length,offsetGroups:{}};var j=b("offsetgroup")||"",z=$.offsetGroups,I=z[j];m._offsetIndex=0,(w!=="group"||j)&&(I||(I=z[j]={offsetIndex:Object.keys(z).length}),m._offsetIndex=I.offsetIndex)}}),q3=r((nt,ke)=>{var _=et(),d=Lb(),m=r2();ke.exports=function(E,b){var w,S,C,p=b.scattermode;function F(z){return _.coerce(S._input,S,m,z)}if(b.scattermode==="group")for(C=0;C<E.length;C++)S=E[C],S.type==="scatter"&&(w=S._input,d(w,S,b,F,p));for(C=0;C<E.length;C++){var A=E[C];if(A.type==="scatter"){var O=A.fill;if(!(O==="none"||O==="toself")&&(A.opacity=void 0,O==="tonexty"||O==="tonextx"))for(var $=C-1;$>=0;$--){var j=E[$];if(j.type==="scatter"&&j.xaxis===A.xaxis&&j.yaxis===A.yaxis){j.opacity=void 0;break}}}}}}),kb=r((nt,ke)=>{var _=et(),d=tg();ke.exports=function(m,E){function b(S,C){return _.coerce(m,E,d,S,C)}var w=E.barmode==="group";E.scattermode==="group"&&b("scattergap",w?E.bargap:.2)}}),ox=r((nt,ke)=>{var _=v(),d=et(),m=d.dateTime2ms,E=d.incrementMonth,b=g(),w=b.ONEAVGMONTH;ke.exports=function(S,C,p,F){if(C.type!=="date")return{vals:F};var A=S[p+"periodalignment"];if(!A)return{vals:F};var O=S[p+"period"],$;if(_(O)){if(O=+O,O<=0)return{vals:F}}else if(typeof O=="string"&&O.charAt(0)==="M"){var j=+O.substring(1);if(j>0&&Math.round(j)===j)$=j;else return{vals:F}}for(var z=C.calendar,I=A==="start",G=A==="end",M=S[p+"period0"],L=m(M,z)||0,B=[],X=[],ee=[],yt=F.length,Ze=0;Ze<yt;Ze++){var Re=F[Ze],Q,xt,tt;if($){for(Q=Math.round((Re-L)/($*w)),tt=E(L,$*Q,z);tt>Re;)tt=E(tt,-$,z);for(;tt<=Re;)tt=E(tt,$,z);xt=E(tt,-$,z)}else{for(Q=Math.round((Re-L)/O),tt=L+Q*O;tt>Re;)tt-=O;for(;tt<=Re;)tt+=O;xt=tt-O}B[Ze]=I?xt:G?tt:(xt+tt)/2,X[Ze]=xt,ee[Ze]=tt}return{vals:B,starts:X,ends:ee}}}),F_=r((nt,ke)=>{var _=sg().hasColorscale,d=wp(),m=Kp();ke.exports=function(E,b){m.hasLines(b)&&_(b,"line")&&d(E,b,{vals:b.line.color,containerStr:"line",cLetter:"c"}),m.hasMarkers(b)&&(_(b,"marker")&&d(E,b,{vals:b.marker.color,containerStr:"marker",cLetter:"c"}),_(b,"marker.line")&&d(E,b,{vals:b.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}}),Ky=r((nt,ke)=>{var _=et();ke.exports=function(d,m){for(var E=0;E<d.length;E++)d[E].i=E;_.mergeArray(m.text,d,"tx"),_.mergeArray(m.texttemplate,d,"txt"),_.mergeArray(m.hovertext,d,"htx"),_.mergeArray(m.customdata,d,"data"),_.mergeArray(m.textposition,d,"tp"),m.textfont&&(_.mergeArrayCastPositive(m.textfont.size,d,"ts"),_.mergeArray(m.textfont.color,d,"tc"),_.mergeArray(m.textfont.family,d,"tf"),_.mergeArray(m.textfont.weight,d,"tw"),_.mergeArray(m.textfont.style,d,"ty"),_.mergeArray(m.textfont.variant,d,"tv"),_.mergeArray(m.textfont.textcase,d,"tC"),_.mergeArray(m.textfont.lineposition,d,"tE"),_.mergeArray(m.textfont.shadow,d,"tS"));var b=m.marker;if(b){_.mergeArrayCastPositive(b.size,d,"ms"),_.mergeArrayCastPositive(b.opacity,d,"mo"),_.mergeArray(b.symbol,d,"mx"),_.mergeArray(b.angle,d,"ma"),_.mergeArray(b.standoff,d,"mf"),_.mergeArray(b.color,d,"mc");var w=b.line;b.line&&(_.mergeArray(w.color,d,"mlc"),_.mergeArrayCastPositive(w.width,d,"mlw"));var S=b.gradient;S&&S.type!=="none"&&(_.mergeArray(S.type,d,"mgt"),_.mergeArray(S.color,d,"mgc"))}}}),o2=r((nt,ke)=>{var _=et();ke.exports=function(d,m){_.isArrayOrTypedArray(m.selectedpoints)&&_.tagSelected(d,m)}}),z_=r((nt,ke)=>{var _=v(),d=et(),m=Im(),E=ox(),b=g().BADNUM,w=Kp(),S=F_(),C=Ky(),p=o2();function F(I,G){var M=I._fullLayout,L=G._xA=m.getFromId(I,G.xaxis||"x","x"),B=G._yA=m.getFromId(I,G.yaxis||"y","y"),X=L.makeCalcdata(G,"x"),ee=B.makeCalcdata(G,"y"),yt=E(G,L,"x",X),Ze=E(G,B,"y",ee),Re=yt.vals,Q=Ze.vals,xt=G._length,tt=new Array(xt),ht=G.ids,it=z(G,M,L,B),ut=!1,vt,_t,Le,wt,St,Ut;$(M,G);var kt="x",jt="y",aa;if(it)d.pushUnique(it.traceIndices,G.index),vt=it.orientation==="v",vt?(jt="s",aa="x"):(kt="s",aa="y"),St=it.stackgaps==="interpolate";else{var ca=O(G,xt);A(I,G,L,B,Re,Q,ca)}var Cp=!!G.xperiodalignment,pt=!!G.yperiodalignment;for(_t=0;_t<xt;_t++){var gt=tt[_t]={},te=_(Re[_t]),Et=_(Q[_t]);te&&Et?(gt[kt]=Re[_t],gt[jt]=Q[_t],Cp&&(gt.orig_x=X[_t],gt.xEnd=yt.ends[_t],gt.xStart=yt.starts[_t]),pt&&(gt.orig_y=ee[_t],gt.yEnd=Ze.ends[_t],gt.yStart=Ze.starts[_t])):it&&(vt?te:Et)?(gt[aa]=vt?Re[_t]:Q[_t],gt.gap=!0,St?(gt.s=b,ut=!0):gt.s=0):gt[kt]=gt[jt]=b,ht&&(gt.id=String(ht[_t]))}if(C(tt,G),S(I,G),p(tt,G),it){for(_t=0;_t<tt.length;)tt[_t][aa]===b?tt.splice(_t,1):_t++;if(d.sort(tt,function(we,ot){return we[aa]-ot[aa]||we.i-ot.i}),ut){for(_t=0;_t<tt.length-1&&tt[_t].gap;)_t++;for(Ut=tt[_t].s,Ut||(Ut=tt[_t].s=0),Le=0;Le<_t;Le++)tt[Le].s=Ut;for(wt=tt.length-1;wt>_t&&tt[wt].gap;)wt--;for(Ut=tt[wt].s,Le=tt.length-1;Le>wt;Le--)tt[Le].s=Ut;for(;_t<wt;)if(_t++,tt[_t].gap){for(Le=_t+1;tt[Le].gap;)Le++;for(var zt=tt[_t-1][aa],rt=tt[_t-1].s,Z=(tt[Le].s-rt)/(tt[Le][aa]-zt);_t<Le;)tt[_t].s=rt+(tt[_t][aa]-zt)*Z,_t++}}}return tt}function A(I,G,M,L,B,X,ee){var yt=G._length,Ze=I._fullLayout,Re=M._id,Q=L._id,xt=Ze._firstScatter[j(G)]===G.uid,tt=(z(G,Ze,M,L)||{}).orientation,ht=G.fill;M._minDtick=0,L._minDtick=0;var it={padded:!0},ut={padded:!0};ee&&(it.ppad=ut.ppad=ee);var vt=yt<2||B[0]!==B[yt-1]||X[0]!==X[yt-1];vt&&(ht==="tozerox"||ht==="tonextx"&&(xt||tt==="h"))?it.tozero=!0:!(G.error_y||{}).visible&&(ht==="tonexty"||ht==="tozeroy"||!w.hasMarkers(G)&&!w.hasText(G))&&(it.padded=!1,it.ppad=0),vt&&(ht==="tozeroy"||ht==="tonexty"&&(xt||tt==="v"))?ut.tozero=!0:(ht==="tonextx"||ht==="tozerox")&&(ut.padded=!1),Re&&(G._extremes[Re]=m.findExtremes(M,B,it)),Q&&(G._extremes[Q]=m.findExtremes(L,X,ut))}function O(I,G){if(w.hasMarkers(I)){var M=I.marker,L=1.6*(I.marker.sizeref||1),B;if(I.marker.sizemode==="area"?B=function(Re){return Math.max(Math.sqrt((Re||0)/L),3)}:B=function(Re){return Math.max((Re||0)/L,3)},d.isArrayOrTypedArray(M.size)){var X={type:"linear"};m.setConvert(X);for(var ee=X.makeCalcdata(I.marker,"size"),yt=new Array(G),Ze=0;Ze<G;Ze++)yt[Ze]=B(ee[Ze]);return yt}else return B(M.size)}}function $(I,G){var M=j(G),L=I._firstScatter;L[M]||(L[M]=G.uid)}function j(I){var G=I.stackgroup;return I.xaxis+I.yaxis+I.type+(G?"-"+G:"")}function z(I,G,M,L){var B=I.stackgroup;if(B){var X=G._scatterStackOpts[M._id+L._id][B],ee=X.orientation==="v"?L:M;if(ee.type==="linear"||ee.type==="log")return X}}ke.exports={calc:F,calcMarkerSize:O,calcAxisExpansion:A,setFirstScatter:$,getStackOpts:z}}),I_=r((nt,ke)=>{ke.exports=d;var _=et().distinctVals;function d(m,E){this.traces=m,this.sepNegVal=E.sepNegVal,this.overlapNoMerge=E.overlapNoMerge;for(var b=1/0,w=E.posAxis._id.charAt(0),S=[],C=0;C<m.length;C++){for(var p=m[C],F=0;F<p.length;F++){var A=p[F],O=A.p;O===void 0&&(O=A[w]),O!==void 0&&S.push(O)}p[0]&&p[0].width1&&(b=Math.min(p[0].width1,b))}this.positions=S;var $=_(S);this.distinctPositions=$.vals,$.vals.length===1&&b!==1/0?this.minDiff=b:this.minDiff=Math.min($.minDiff,b);var j=(E.posAxis||{}).type;(j==="category"||j==="multicategory")&&(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}d.prototype.put=function(m,E,b){var w=this.getLabel(m,E,b),S=this.bins[w]||0;return this.bins[w]=S+b,S},d.prototype.get=function(m,E,b){var w=this.getLabel(m,E,b);return this.bins[w]||0},d.prototype.getLabel=function(m,E,b){var w=b<0&&this.sepNegVal?"v":"^",S=this.overlapNoMerge?m:Math.round(m/this.binWidth);return w+S+"g"+E}}),J2=r((nt,ke)=>{var _=v(),d=et().isArrayOrTypedArray,m=g().BADNUM,E=y1(),b=Im(),w=Sg().getAxisGroup,S=I_();function C(tt,ht){for(var it=ht.xaxis,ut=ht.yaxis,vt=tt._fullLayout,_t=tt._fullData,Le=tt.calcdata,wt=[],St=[],Ut=0;Ut<_t.length;Ut++){var kt=_t[Ut];if(kt.visible===!0&&E.traceIs(kt,"bar")&&kt.xaxis===it._id&&kt.yaxis===ut._id&&(kt.orientation==="h"?wt.push(Le[Ut]):St.push(Le[Ut]),kt._computePh))for(var jt=tt.calcdata[Ut],aa=0;aa<jt.length;aa++)typeof jt[aa].ph0=="function"&&(jt[aa].ph0=jt[aa].ph0()),typeof jt[aa].ph1=="function"&&(jt[aa].ph1=jt[aa].ph1())}var ca={xCat:it.type==="category"||it.type==="multicategory",yCat:ut.type==="category"||ut.type==="multicategory",mode:vt.barmode,norm:vt.barnorm,gap:vt.bargap,groupgap:vt.bargroupgap};p(tt,it,ut,St,ca),p(tt,ut,it,wt,ca)}function p(tt,ht,it,ut,vt){if(ut.length){var _t,Le,wt,St,Ut;switch(O(it,ut),vt.mode){case"overlay":$(tt,ht,it,ut,vt);break;case"group":for(_t=[],Le=[],wt=0;wt<ut.length;wt++)St=ut[wt],Ut=St[0].trace,Ut.offset===void 0?Le.push(St):_t.push(St);Le.length&&j(tt,ht,it,Le,vt),_t.length&&$(tt,ht,it,_t,vt);break;case"stack":case"relative":for(_t=[],Le=[],wt=0;wt<ut.length;wt++)St=ut[wt],Ut=St[0].trace,Ut.base===void 0?Le.push(St):_t.push(St);A(Le),Le.length&&z(tt,ht,it,Le,vt),_t.length&&$(tt,ht,it,_t,vt);break}F(ut),Q(ut,ht)}}function F(tt){var ht,it,ut,vt,_t,Le,wt;for(ht=0;ht<tt.length;ht++)it=tt[ht],ut=it[0].trace,vt=it[0].t,vt.cornerradiusvalue===void 0&&(_t=ut.marker?ut.marker.cornerradius:void 0,_t!==void 0&&(Le=_(_t)?+_t:+_t.slice(0,-1),wt=_(_t)?"px":"%",vt.cornerradiusvalue=Le,vt.cornerradiusform=wt))}function A(tt){if(!(tt.length<2)){var ht,it,ut,vt,_t,Le,wt;for(ht=0;ht<tt.length&&(it=tt[ht],ut=it[0].trace,_t=ut.marker?ut.marker.cornerradius:void 0,_t===void 0);ht++);if(_t!==void 0)for(Le=_(_t)?+_t:+_t.slice(0,-1),wt=_(_t)?"px":"%",ht=0;ht<tt.length;ht++)it=tt[ht],vt=it[0].t,vt.cornerradiusvalue=Le,vt.cornerradiusform=wt}}function O(tt,ht){var it,ut;for(it=0;it<ht.length;it++){var vt=ht[it],_t=vt[0].trace,Le=_t.type==="funnel"?_t._base:_t.base,wt,St=_t.orientation==="h"?_t.xcalendar:_t.ycalendar,Ut=tt.type==="category"||tt.type==="multicategory"?function(){return null}:tt.d2c;if(d(Le)){for(ut=0;ut<Math.min(Le.length,vt.length);ut++)wt=Ut(Le[ut],0,St),_(wt)?(vt[ut].b=+wt,vt[ut].hasB=1):vt[ut].b=0;for(;ut<vt.length;ut++)vt[ut].b=0}else{wt=Ut(Le,0,St);var kt=_(wt);for(wt=kt?wt:0,ut=0;ut<vt.length;ut++)vt[ut].b=wt,kt&&(vt[ut].hasB=1)}}}function $(tt,ht,it,ut,vt){for(var _t=0;_t<ut.length;_t++){var Le=ut[_t],wt=new S([Le],{posAxis:ht,sepNegVal:!1,overlapNoMerge:!vt.norm});I(tt,ht,wt,vt),vt.norm?(ee(wt),Ze(it,wt,vt)):B(it,wt)}}function j(tt,ht,it,ut,vt){var _t=new S(ut,{posAxis:ht,sepNegVal:!1,overlapNoMerge:!vt.norm});I(tt,ht,_t,vt),yt(_t,ht),vt.norm?(ee(_t),Ze(it,_t,vt)):B(it,_t)}function z(tt,ht,it,ut,vt){var _t=new S(ut,{posAxis:ht,sepNegVal:vt.mode==="relative",overlapNoMerge:!(vt.norm||vt.mode==="stack"||vt.mode==="relative")});I(tt,ht,_t,vt),X(it,_t,vt);for(var Le=0;Le<ut.length;Le++)for(var wt=ut[Le],St=wt[0].t.offsetindex,Ut=0;Ut<wt.length;Ut++){var kt=wt[Ut];if(kt.s!==m){var jt=kt.b+kt.s===_t.get(kt.p,St,kt.s);jt&&(kt._outmost=!0)}}vt.norm&&Ze(it,_t,vt)}function I(tt,ht,it,ut){var vt=tt._fullLayout,_t=it.positions,Le=it.distinctPositions,wt=it.minDiff,St=it.traces,Ut=St.length,kt=_t.length!==Le.length,jt=wt*(1-ut.gap),aa,ca,Cp,pt;if(ht._id==="angularaxis")aa=jt,ca=aa*(1-(ut.groupgap||0)),Cp=-ca/2;else{var gt=w(vt,ht._id)+St[0][0].trace.orientation;pt=vt._alignmentOpts[gt]||{}}for(var te=0;te<Ut;te++){var Et=St[te],zt=Et[0].trace;if(ht._id!=="angularaxis"){var rt=pt[zt.alignmentgroup]||{},Z=Object.keys(rt.offsetGroups||{}).length;Z?aa=jt/Z:aa=kt?jt/Ut:jt,ca=aa*(1-(ut.groupgap||0)),Z?Cp=((2*zt._offsetIndex+1-Z)*aa-ca)/2:Cp=kt?((2*te+1-Ut)*aa-ca)/2:-ca/2}var we=Et[0].t;we.barwidth=ca,we.offsetindex=zt._offsetIndex||0,we.poffset=Cp,we.bargroupwidth=jt,we.bardelta=wt}it.binWidth=St[0][0].t.barwidth/100,G(it),M(ht,it),ht._id==="angularaxis"?L(ht,it):L(ht,it,kt)}function G(tt){var ht=tt.traces,it,ut;for(it=0;it<ht.length;it++){var vt=ht[it],_t=vt[0],Le=_t.trace,wt=_t.t,St=Le._offset||Le.offset,Ut=wt.poffset,kt;if(d(St)){for(kt=Array.prototype.slice.call(St,0,vt.length),ut=0;ut<kt.length;ut++)_(kt[ut])||(kt[ut]=Ut);for(ut=kt.length;ut<vt.length;ut++)kt.push(Ut);wt.poffset=kt}else St!==void 0&&(wt.poffset=St);var jt=Le._width||Le.width,aa=wt.barwidth;if(d(jt)){var ca=Array.prototype.slice.call(jt,0,vt.length);for(ut=0;ut<ca.length;ut++)_(ca[ut])||(ca[ut]=aa);for(ut=ca.length;ut<vt.length;ut++)ca.push(aa);if(wt.barwidth=ca,St===void 0){for(kt=[],ut=0;ut<vt.length;ut++)kt.push(Ut+(aa-ca[ut])/2);wt.poffset=kt}}else jt!==void 0&&(wt.barwidth=jt,St===void 0&&(wt.poffset=Ut+(aa-jt)/2))}}function M(tt,ht){for(var it=ht.traces,ut=xt(tt),vt=0;vt<it.length;vt++)for(var _t=it[vt],Le=_t[0].t,wt=Le.poffset,St=d(wt),Ut=Le.barwidth,kt=d(Ut),jt=0;jt<_t.length;jt++){var aa=_t[jt],ca=aa.w=kt?Ut[jt]:Ut;aa.p===void 0&&(aa.p=aa[ut],aa["orig_"+ut]=aa[ut]);var Cp=(St?wt[jt]:wt)+ca/2;aa[ut]=aa.p+Cp}}function L(tt,ht,it){var ut=ht.traces,vt=ht.minDiff,_t=vt/2;b.minDtick(tt,ht.minDiff,ht.distinctPositions[0],it);for(var Le=0;Le<ut.length;Le++){var wt=ut[Le],St=wt[0],Ut=St.trace,kt=[],jt,aa,ca,Cp;for(Cp=0;Cp<wt.length;Cp++)jt=wt[Cp],aa=jt.p-_t,ca=jt.p+_t,kt.push(aa,ca);if(Ut.width||Ut.offset){var pt=St.t,gt=pt.poffset,te=pt.barwidth,Et=d(gt),zt=d(te);for(Cp=0;Cp<wt.length;Cp++){jt=wt[Cp];var rt=Et?gt[Cp]:gt,Z=zt?te[Cp]:te;aa=jt.p+rt,ca=aa+Z,kt.push(aa,ca)}}Ut._extremes[tt._id]=b.findExtremes(tt,kt,{padded:!1})}}function B(tt,ht){for(var it=ht.traces,ut=xt(tt),vt=0;vt<it.length;vt++){for(var _t=it[vt],Le=_t[0].trace,wt=Le.type==="scatter",St=Le.orientation==="v",Ut=[],kt=!1,jt=0;jt<_t.length;jt++){var aa=_t[jt],ca=wt?0:aa.b,Cp=wt?St?aa.y:aa.x:ca+aa.s;aa[ut]=Cp,Ut.push(Cp),aa.hasB&&Ut.push(ca),(!aa.hasB||!aa.b)&&(kt=!0)}Le._extremes[tt._id]=b.findExtremes(tt,Ut,{tozero:kt,padded:!0})}}function X(tt,ht,it){var ut=xt(tt),vt=ht.traces,_t,Le,wt,St,Ut,kt,jt;for(St=0;St<vt.length;St++)if(_t=vt[St],Le=_t[0].trace,Le.type==="funnel")for(jt=_t[0].t.offsetindex,Ut=0;Ut<_t.length;Ut++)kt=_t[Ut],kt.s!==m&&ht.put(kt.p,jt,-.5*kt.s);for(St=0;St<vt.length;St++){_t=vt[St],Le=_t[0].trace,wt=Le.type==="funnel",jt=Le.type==="barpolar"?0:_t[0].t.offsetindex;var aa=[];for(Ut=0;Ut<_t.length;Ut++)if(kt=_t[Ut],kt.s!==m){var ca;wt?ca=kt.s:ca=kt.s+kt.b;var Cp=ht.put(kt.p,jt,ca),pt=Cp+ca;kt.b=Cp,kt[ut]=pt,it.norm||(aa.push(pt),kt.hasB&&aa.push(Cp))}it.norm||(Le._extremes[tt._id]=b.findExtremes(tt,aa,{tozero:!0,padded:!0}))}}function ee(tt){for(var ht=tt.traces,it=0;it<ht.length;it++)for(var ut=ht[it],vt=ut[0].t.offsetindex,_t=0;_t<ut.length;_t++){var Le=ut[_t];Le.s!==m&&tt.put(Le.p,vt,Le.b+Le.s)}}function yt(tt,ht){for(var it=tt.traces,ut=0;ut<it.length;ut++){var vt=it[ut],_t=vt[0].trace,Le=vt[0].t.offsetindex;if(_t.base===void 0)for(var wt=new S([vt],{posAxis:ht,sepNegVal:!0,overlapNoMerge:!0}),St=0;St<vt.length;St++){var Ut=vt[St];if(Ut.p!==m){var kt=wt.put(Ut.p,Le,Ut.b+Ut.s);kt&&(Ut.b=kt)}}}}function Ze(tt,ht,it){var ut=ht.traces,vt=xt(tt),_t=it.norm==="fraction"?1:100,Le=_t/1e9,wt=tt.l2c(tt.c2l(0)),St=it.mode==="stack"?_t:wt;function Ut(we){return _(tt.c2l(we))&&(we<wt-Le||we>St+Le||!_(wt))}for(var kt=0;kt<ut.length;kt++){for(var jt=ut[kt],aa=jt[0].t.offsetindex,ca=jt[0].trace,Cp=[],pt=!1,gt=!1,te=0;te<jt.length;te++){var Et=jt[te];if(Et.s!==m){var zt=Math.abs(_t/ht.get(Et.p,aa,Et.s));Et.b*=zt,Et.s*=zt;var rt=Et.b,Z=rt+Et.s;Et[vt]=Z,Cp.push(Z),gt=gt||Ut(Z),Et.hasB&&(Cp.push(rt),gt=gt||Ut(rt)),(!Et.hasB||!Et.b)&&(pt=!0)}}ca._extremes[tt._id]=b.findExtremes(tt,Cp,{tozero:pt,padded:gt})}}function Re(tt,ht,it,ut){for(var vt=xt(ut),_t=0;_t<tt.length;_t++)for(var Le=tt[_t],wt=0;wt<Le.length;wt++){var St=Le[wt],Ut=St[vt];St._sMin=ht[Ut],St._sMax=it[Ut]}}function Q(tt,ht){var it=xt(ht),ut={},vt,_t,Le,wt=1/0,St=-1/0;for(vt=0;vt<tt.length;vt++)for(Le=tt[vt],_t=0;_t<Le.length;_t++){var Ut=Le[_t].p;_(Ut)&&(wt=Math.min(wt,Ut),St=Math.max(St,Ut))}var kt=1e4/(St-wt),jt=ut.round=function(mt){return String(Math.round(kt*(mt-wt)))},aa={},ca={},Cp=tt.some(function(mt){var It=mt[0].trace;return"marker"in It&&It.marker.cornerradius});for(vt=0;vt<tt.length;vt++){Le=tt[vt],Le[0].t.extents=ut;var pt=Le[0].t.poffset,gt=d(pt);for(_t=0;_t<Le.length;_t++){var te=Le[_t],Et=te[it]-te.w/2;if(_(Et)){var zt=te[it]+te.w/2,rt=jt(te.p);ut[rt]?ut[rt]=[Math.min(Et,ut[rt][0]),Math.max(zt,ut[rt][1])]:ut[rt]=[Et,zt]}if(te.p0=te.p+(gt?pt[_t]:pt),te.p1=te.p0+te.w,te.s0=te.b,te.s1=te.s0+te.s,Cp){var Z=Math.min(te.s0,te.s1)||0,we=Math.max(te.s0,te.s1)||0,ot=te[it];aa[ot]=ot in aa?Math.min(aa[ot],Z):Z,ca[ot]=ot in ca?Math.max(ca[ot],we):we}}}Cp&&Re(tt,aa,ca,ht)}function xt(tt){return tt._id.charAt(0)}ke.exports={crossTraceCalc:C,setGroupPositions:p}}),Ob=r((nt,ke)=>{var _=z_(),d=J2().setGroupPositions;function m(w,S){for(var C=S.xaxis,p=S.yaxis,F=w._fullLayout,A=w._fullData,O=w.calcdata,$=[],j=[],z=0;z<A.length;z++){var I=A[z];I.visible===!0&&I.type==="scatter"&&I.xaxis===C._id&&I.yaxis===p._id&&(I.orientation==="h"?$.push(O[z]):I.orientation==="v"&&j.push(O[z]))}var G={mode:F.scattermode,gap:F.scattergap};d(w,C,p,j,G),d(w,p,C,$,G)}ke.exports=function(w,S){w._fullLayout.scattermode==="group"&&m(w,S);var C=S.xaxis,p=S.yaxis,F=C._id+p._id,A=w._fullLayout._scatterStackOpts[F];if(A){var O=w.calcdata,$,j,z,I,G,M,L,B,X,ee,yt,Ze,Re,Q,xt;for(var tt in A){ee=A[tt];var ht=ee.traceIndices;if(ht.length){for(yt=ee.stackgaps==="interpolate",Ze=ee.groupnorm,ee.orientation==="v"?(Re="x",Q="y"):(Re="y",Q="x"),xt=new Array(ht.length),$=0;$<xt.length;$++)xt[$]=!1;M=O[ht[0]];var it=new Array(M.length);for($=0;$<M.length;$++)it[$]=M[$][Re];for($=1;$<ht.length;$++){for(G=O[ht[$]],j=z=0;j<G.length;j++){for(L=G[j][Re];L>it[z]&&z<it.length;z++)E(G,j,it[z],$,xt,yt,Re),j++;if(L!==it[z]){for(I=0;I<$;I++)E(O[ht[I]],z,L,I,xt,yt,Re);it.splice(z,0,L)}z++}for(;z<it.length;z++)E(G,j,it[z],$,xt,yt,Re),j++}var ut=it.length;for(j=0;j<M.length;j++){for(B=M[j][Q]=M[j].s,$=1;$<ht.length;$++)G=O[ht[$]],G[0].trace._rawLength=G[0].trace._length,G[0].trace._length=ut,B+=G[j].s,G[j][Q]=B;if(Ze)for(X=(Ze==="fraction"?B:B/100)||1,$=0;$<ht.length;$++){var vt=O[ht[$]][j];vt[Q]/=X,vt.sNorm=vt.s/X}}for($=0;$<ht.length;$++){G=O[ht[$]];var _t=G[0].trace,Le=_.calcMarkerSize(_t,_t._rawLength),wt=Array.isArray(Le);if(Le&&xt[$]||wt){var St=Le;for(Le=new Array(ut),j=0;j<ut;j++)Le[j]=G[j].gap?0:wt?St[G[j].i]:St}var Ut=new Array(ut),kt=new Array(ut);for(j=0;j<ut;j++)Ut[j]=G[j].x,kt[j]=G[j].y;_.calcAxisExpansion(w,_t,C,p,Ut,kt,Le),G[0].t.orientation=ee.orientation}}}}};function E(w,S,C,p,F,A,O){F[p]=!0;var $={i:null,gap:!0,s:0};if($[O]=C,w.splice(S,0,$),S&&C===w[S-1][O]){var j=w[S-1];$.s=j.s,$.i=j.i,$.gap=j.gap}else A&&($.s=b(w,S,C,O));S||(w[0].t=w[1].t,w[0].trace=w[1].trace,delete w[1].t,delete w[1].trace)}function b(w,S,C,p){var F=w[S-1],A=w[S+1];return A?F?F.s+(A.s-F.s)*(C-F[p])/(A[p]-F[p]):A.s:F.s}}),s2=r((nt,ke)=>{var _=Q0(),d=g(),m=d.BADNUM,E=d.LOG_CLIP,b=E+.5,w=E-.5,S=et(),C=S.segmentsIntersect,p=S.constrain,F=Mx();ke.exports=function(A,O){var $=O.trace||{},j=O.xaxis,z=O.yaxis,I=j.type==="log",G=z.type==="log",M=j._length,L=z._length,B=O.backoff,X=$.marker,ee=O.connectGaps,yt=O.baseTolerance,Ze=O.shape,Re=Ze==="linear",Q=$.fill&&$.fill!=="none",xt=[],tt=F.minTolerance,ht=A.length,it=new Array(ht),ut=0,vt,_t,Le,wt,St,Ut,kt,jt,aa,ca,Cp,pt,gt,te,Et,zt;function rt(o0){var C0=A[o0];if(!C0)return!1;var T0=O.linearized?j.l2p(C0.x):j.c2p(C0.x),A0=O.linearized?z.l2p(C0.y):z.c2p(C0.y);if(T0===m){if(I&&(T0=j.c2p(C0.x,!0)),T0===m)return!1;G&&A0===m&&(T0*=Math.abs(j._m*L*(j._m>0?b:w)/(z._m*M*(z._m>0?b:w)))),T0*=1e3}if(A0===m){if(G&&(A0=z.c2p(C0.y,!0)),A0===m)return!1;A0*=1e3}return[T0,A0]}function Z(o0,C0,T0,A0){var J0=T0-o0,em=A0-C0,tm=.5-o0,Nm=.5-C0,o1=J0*J0+em*em,N1=J0*tm+em*Nm;if(N1>0&&N1<o1){var F1=tm*em-Nm*J0;if(F1*F1<o1)return!0}}var we,ot;function mt(o0,C0){var T0=o0[0]/M,A0=o0[1]/L,J0=Math.max(0,-T0,T0-1,-A0,A0-1);return J0&&we!==void 0&&Z(T0,A0,we,ot)&&(J0=0),J0&&C0&&Z(T0,A0,C0[0]/M,C0[1]/L)&&(J0=0),(1+F.toleranceGrowth*J0)*yt}function It(o0,C0){var T0=o0[0]-C0[0],A0=o0[1]-C0[1];return Math.sqrt(T0*T0+A0*A0)}var Yt=F.maxScreensAway,Sr=-M*Yt,Op=M*(1+Yt),Hp=-L*Yt,n0=L*(1+Yt),R0=[[Sr,Hp,Op,Hp],[Op,Hp,Op,n0],[Op,n0,Sr,n0],[Sr,n0,Sr,Hp]],w0,_0,ha,Rp,Gt,Gp;function c0(o0,C0){for(var T0=[],A0=0,J0=0;J0<4;J0++){var em=R0[J0],tm=C(o0[0],o0[1],C0[0],C0[1],em[0],em[1],em[2],em[3]);tm&&(!A0||Math.abs(tm.x-T0[0][0])>1||Math.abs(tm.y-T0[0][1])>1)&&(tm=[tm.x,tm.y],A0&&It(tm,o0)<It(T0[0],o0)?T0.unshift(tm):T0.push(tm),A0++)}return T0}function M0(o0){if(o0[0]<Sr||o0[0]>Op||o0[1]<Hp||o0[1]>n0)return[p(o0[0],Sr,Op),p(o0[1],Hp,n0)]}function I0(o0,C0){if(o0[0]===C0[0]&&(o0[0]===Sr||o0[0]===Op)||o0[1]===C0[1]&&(o0[1]===Hp||o0[1]===n0))return!0}function k0(o0,C0){var T0=[],A0=M0(o0),J0=M0(C0);return A0&&J0&&I0(A0,J0)||(A0&&T0.push(A0),J0&&T0.push(J0)),T0}function V0(o0,C0,T0){return function(A0,J0){var em=M0(A0),tm=M0(J0),Nm=[];if(em&&tm&&I0(em,tm))return Nm;em&&Nm.push(em),tm&&Nm.push(tm);var o1=2*S.constrain((A0[o0]+J0[o0])/2,C0,T0)-((em||A0)[o0]+(tm||J0)[o0]);if(o1){var N1;em&&tm?N1=o1>0==em[o0]>tm[o0]?em:tm:N1=em||tm,N1[o0]+=o1}return Nm}}var $0;Ze==="linear"||Ze==="spline"?$0=c0:Ze==="hv"||Ze==="vh"?$0=k0:Ze==="hvh"?$0=V0(0,Sr,Op):Ze==="vhv"&&($0=V0(1,Hp,n0));function W0(o0,C0){var T0=C0[0]-o0[0],A0=(C0[1]-o0[1])/T0,J0=(o0[1]*C0[0]-C0[1]*o0[0])/T0;return J0>0?[A0>0?Sr:Op,n0]:[A0>0?Op:Sr,Hp]}function gm(o0){var C0=o0[0],T0=o0[1],A0=C0===it[ut-1][0],J0=T0===it[ut-1][1];if(!(A0&&J0))if(ut>1){var em=C0===it[ut-2][0],tm=T0===it[ut-2][1];A0&&(C0===Sr||C0===Op)&&em?tm?ut--:it[ut-1]=o0:J0&&(T0===Hp||T0===n0)&&tm?em?ut--:it[ut-1]=o0:it[ut++]=o0}else it[ut++]=o0}function F0(o0){it[ut-1][0]!==o0[0]&&it[ut-1][1]!==o0[1]&&gm([ha,Rp]),gm(o0),Gt=null,ha=Rp=0}var bm=S.isArrayOrTypedArray(X);function Dm(o0){if(o0&&B&&(o0.i=vt,o0.d=A,o0.trace=$,o0.marker=bm?X[o0.i]:X,o0.backoff=B),we=o0[0]/M,ot=o0[1]/L,w0=o0[0]<Sr?Sr:o0[0]>Op?Op:0,_0=o0[1]<Hp?Hp:o0[1]>n0?n0:0,w0||_0){if(!ut)it[ut++]=[w0||o0[0],_0||o0[1]];else if(Gt){var C0=$0(Gt,o0);C0.length>1&&(F0(C0[0]),it[ut++]=C0[1])}else Gp=$0(it[ut-1],o0)[0],it[ut++]=Gp;var T0=it[ut-1];w0&&_0&&(T0[0]!==w0||T0[1]!==_0)?(Gt&&(ha!==w0&&Rp!==_0?gm(ha&&Rp?W0(Gt,o0):[ha||w0,Rp||_0]):ha&&Rp&&gm([ha,Rp])),gm([w0,_0])):ha-w0&&Rp-_0&&gm([w0||ha,_0||Rp]),Gt=o0,ha=w0,Rp=_0}else Gt&&F0($0(Gt,o0)[0]),it[ut++]=o0}for(vt=0;vt<ht;vt++)if(_t=rt(vt),!!_t){for(ut=0,Gt=null,Dm(_t),vt++;vt<ht;vt++){if(wt=rt(vt),!wt){if(ee)continue;break}if(!Re||!O.simplify){Dm(wt);continue}var vm=rt(vt+1);if(ca=It(wt,_t),!(!(Q&&(ut===0||ut===ht-1))&&ca<mt(wt,vm)*tt)){for(jt=[(wt[0]-_t[0])/ca,(wt[1]-_t[1])/ca],St=_t,Cp=ca,pt=te=Et=0,kt=!1,Le=wt,vt++;vt<A.length;vt++){if(Ut=vm,vm=rt(vt+1),!Ut){if(ee)continue;break}if(aa=[Ut[0]-_t[0],Ut[1]-_t[1]],zt=aa[0]*jt[1]-aa[1]*jt[0],te=Math.min(te,zt),Et=Math.max(Et,zt),Et-te>mt(Ut,vm))break;Le=Ut,gt=aa[0]*jt[0]+aa[1]*jt[1],gt>Cp?(Cp=gt,wt=Ut,kt=!1):gt<pt&&(pt=gt,St=Ut,kt=!0)}if(kt?(Dm(wt),Le!==St&&Dm(St)):(St!==_t&&Dm(St),Le!==wt&&Dm(wt)),Dm(Le),vt>=A.length||!Ut)break;Dm(Ut),_t=Ut}}Gt&&gm([ha||Gt[0],Rp||Gt[1]]),xt.push(it.slice(0,ut))}var km=Ze.slice(Ze.length-1);if(B&&km!=="h"&&km!=="v"){for(var Yo=!1,qp=-1,Mt=[],Wt=0;Wt<xt.length;Wt++)for(var xn=0;xn<xt[Wt].length-1;xn++){var Fp=xt[Wt][xn],Bp=xt[Wt][xn+1],e0=_.applyBackoff(Bp,Fp);(e0[0]!==Bp[0]||e0[1]!==Bp[1])&&(Yo=!0),Mt[qp+1]||(qp++,Mt[qp]=[Fp,[e0[0],e0[1]]])}return Yo?Mt:xt}return xt}}),X3=r((nt,ke)=>{var _={tonextx:1,tonexty:1,tonext:1};ke.exports=function(d,m,E){var b,w,S,C,p,F={},A=!1,O=-1,$=0,j=-1;for(w=0;w<E.length;w++)b=E[w][0].trace,S=b.stackgroup||"",S?S in F?p=F[S]:(p=F[S]=$,$++):b.fill in _&&j>=0?p=j:(p=j=$,$++),p<O&&(A=!0),b._groupIndex=O=p;var z=E.slice();A&&z.sort(function(G,M){var L=G[0].trace,B=M[0].trace;return L._groupIndex-B._groupIndex||L.index-B.index});var I={};for(w=0;w<z.length;w++)b=z[w][0].trace,S=b.stackgroup||"",b.visible===!0?(b._nexttrace=null,b.fill in _&&(C=I[S],b._prevtrace=C||null,C&&(C._nexttrace=b)),b._ownfill=b.fill&&(b.fill.substr(0,6)==="tozero"||b.fill==="toself"||b.fill.substr(0,2)==="to"&&!b._prevtrace),I[S]=b):b._prevtrace=b._nexttrace=b._ownfill=null;return z}}),U_=r((nt,ke)=>{var _=o(),d=y1(),m=et(),E=m.ensureSingle,b=m.identity,w=Q0(),S=Kp(),C=s2(),p=X3(),F=Kg().tester;ke.exports=function(j,z,I,G,M,L){var B,X,ee=!M,yt=!!M&&M.duration>0,Ze=p(j,z,I);if(B=G.selectAll("g.trace").data(Ze,function(Q){return Q[0].trace.uid}),B.enter().append("g").attr("class",function(Q){return"trace scatter trace"+Q[0].trace.uid}).style("stroke-miterlimit",2),B.order(),A(j,B,z),yt){L&&(X=L());var Re=_.transition().duration(M.duration).ease(M.easing).each("end",function(){X&&X()}).each("interrupt",function(){X&&X()});Re.each(function(){G.selectAll("g.trace").each(function(Q,xt){O(j,xt,z,Q,Ze,this,M)})})}else B.each(function(Q,xt){O(j,xt,z,Q,Ze,this,M)});ee&&B.exit().remove(),G.selectAll("path:not([d])").remove()};function A(j,z,I){z.each(function(G){var M=E(_.select(this),"g","fills");w.setClipUrl(M,I.layerClipId,j);var L=G[0].trace,B=[];L._ownfill&&B.push("_ownFill"),L._nexttrace&&B.push("_nextFill");var X=M.selectAll("g").data(B,b);X.enter().append("g"),X.exit().each(function(ee){L[ee]=null}).remove(),X.order().each(function(ee){L[ee]=E(_.select(this),"path","js-fill")})})}function O(j,z,I,G,M,L,B){var X=j._context.staticPlot,ee;$(j,z,I,G,M);var yt=!!B&&B.duration>0;function Ze(F0){return yt?F0.transition():F0}var Re=I.xaxis,Q=I.yaxis,xt=G[0].trace,tt=xt.line,ht=_.select(L),it=E(ht,"g","errorbars"),ut=E(ht,"g","lines"),vt=E(ht,"g","points"),_t=E(ht,"g","text");if(d.getComponentMethod("errorbars","plot")(j,it,I,B),xt.visible!==!0)return;Ze(ht).style("opacity",xt.opacity);var Le,wt,St=xt.fill.charAt(xt.fill.length-1);St!=="x"&&St!=="y"&&(St="");var Ut,kt;St==="y"?(Ut=1,kt=Q.c2p(0,!0)):St==="x"&&(Ut=0,kt=Re.c2p(0,!0)),G[0][I.isRangePlot?"nodeRangePlot3":"node3"]=ht;var jt="",aa=[],ca=xt._prevtrace,Cp=null,pt=null;ca&&(jt=ca._prevRevpath||"",wt=ca._nextFill,aa=ca._ownPolygons,Cp=ca._fillsegments,pt=ca._fillElement);var gt,te,Et="",zt="",rt,Z,we,ot,mt,It,Yt=[];xt._polygons=[];var Sr=[],Op=[],Hp=m.noop;if(Le=xt._ownFill,S.hasLines(xt)||xt.fill!=="none"){wt&&wt.datum(G),["hv","vh","hvh","vhv"].indexOf(tt.shape)!==-1?(rt=w.steps(tt.shape),Z=w.steps(tt.shape.split("").reverse().join(""))):tt.shape==="spline"?rt=Z=function(F0){var bm=F0[F0.length-1];return F0.length>1&&F0[0][0]===bm[0]&&F0[0][1]===bm[1]?w.smoothclosed(F0.slice(1),tt.smoothing):w.smoothopen(F0,tt.smoothing)}:rt=Z=function(F0){return"M"+F0.join("L")},we=function(F0){return Z(F0.reverse())},Op=C(G,{xaxis:Re,yaxis:Q,trace:xt,connectGaps:xt.connectgaps,baseTolerance:Math.max(tt.width||1,3)/4,shape:tt.shape,backoff:tt.backoff,simplify:tt.simplify,fill:xt.fill}),Sr=new Array(Op.length);var n0=0;for(ee=0;ee<Op.length;ee++){var R0,w0=Op[ee];!R0||!St?(R0=w0.slice(),Sr[n0]=R0,n0++):R0.push.apply(R0,w0)}xt._fillElement=null,xt._fillExclusionElement=pt,xt._fillsegments=Sr.slice(0,n0),Sr=xt._fillsegments,Op.length&&(ot=Op[0][0].slice(),mt=Op[Op.length-1],It=mt[mt.length-1].slice()),Hp=function(F0){return function(bm){if(gt=rt(bm),te=we(bm),Et?St?(Et+="L"+gt.substr(1),zt=te+("L"+zt.substr(1))):(Et+="Z"+gt,zt=te+"Z"+zt):(Et=gt,zt=te),S.hasLines(xt)){var Dm=_.select(this);if(Dm.datum(G),F0)Ze(Dm.style("opacity",0).attr("d",gt).call(w.lineGroupStyle)).style("opacity",1);else{var vm=Ze(Dm);vm.attr("d",gt),w.singleLineStyle(G,vm)}}}}}var _0=ut.selectAll(".js-line").data(Op);Ze(_0.exit()).style("opacity",0).remove(),_0.each(Hp(!1)),_0.enter().append("path").classed("js-line",!0).style("vector-effect",X?"none":"non-scaling-stroke").call(w.lineGroupStyle).each(Hp(!0)),w.setClipUrl(_0,I.layerClipId,j);function ha(F0){Ze(F0).attr("d","M0,0Z")}var Rp=function(){var F0=new Array(Sr.length);for(ee=0;ee<Sr.length;ee++)F0[ee]=F(Sr[ee]);return F0},Gt=function(F0){var bm,Dm;if(!F0||F0.length===0)for(bm=new Array(Sr.length),Dm=0;Dm<Sr.length;Dm++){var vm=Sr[Dm][0].slice(),km=Sr[Dm][Sr[Dm].length-1].slice();vm[Ut]=km[Ut]=kt;var Yo=[km,vm],qp=Yo.concat(Sr[Dm]);bm[Dm]=F(qp)}else{for(bm=new Array(F0.length-1+Sr.length),Dm=0;Dm<F0.length-1;Dm++)bm[Dm]=F(F0[Dm]);var Mt=F0[F0.length-1].slice();for(Mt.reverse(),Dm=0;Dm<Sr.length;Dm++)bm[F0.length-1+Dm]=F(Sr[Dm].concat(Mt))}return bm};Op.length?(Le?(Le.datum(G),ot&&It&&(St?(ot[Ut]=It[Ut]=kt,Ze(Le).attr("d","M"+It+"L"+ot+"L"+Et.substr(1)).call(w.singleFillStyle,j),Yt=Gt(null)):(Ze(Le).attr("d",Et+"Z").call(w.singleFillStyle,j),Yt=Rp())),xt._polygons=Yt,xt._fillElement=Le):wt&&(xt.fill.substr(0,6)==="tonext"&&Et&&jt?(xt.fill==="tonext"?(Ze(wt).attr("d",Et+"Z"+jt+"Z").call(w.singleFillStyle,j),Yt=Rp(),xt._polygons=Yt.concat(aa)):(Ze(wt).attr("d",Et+"L"+jt.substr(1)+"Z").call(w.singleFillStyle,j),Yt=Gt(Cp),xt._polygons=Yt),xt._fillElement=wt):ha(wt)),xt._prevRevpath=zt):(Le?ha(Le):wt&&ha(wt),xt._prevRevpath=null),xt._ownPolygons=Yt;function Gp(F0){return F0.filter(function(bm){return!bm.gap&&bm.vis})}function c0(F0){return F0.filter(function(bm){return bm.vis})}function M0(F0){return F0.filter(function(bm){return!bm.gap})}function I0(F0){return F0.id}function k0(F0){if(F0.ids)return I0}function V0(){return!1}function $0(F0,bm,Dm){var vm,km,Yo,qp=Dm[0].trace,Mt=S.hasMarkers(qp),Wt=S.hasText(qp),xn=k0(qp),Fp=V0,Bp=V0;if(Mt||Wt){var e0=b,o0=qp.stackgroup,C0=o0&&j._fullLayout._scatterStackOpts[Re._id+Q._id][o0].stackgaps==="infer zero";qp.marker.maxdisplayed||qp._needsCull?e0=C0?c0:Gp:o0&&!C0&&(e0=M0),Mt&&(Fp=e0),Wt&&(Bp=e0)}km=F0.selectAll("path.point"),vm=km.data(Fp,xn);var T0=vm.enter().append("path").classed("point",!0);yt&&T0.call(w.pointStyle,qp,j).call(w.translatePoints,Re,Q).style("opacity",0).transition().style("opacity",1),vm.order();var A0;Mt&&(A0=w.makePointStyleFns(qp)),vm.each(function(J0){var em=_.select(this),tm=Ze(em);Yo=w.translatePoint(J0,tm,Re,Q),Yo?(w.singlePointStyle(J0,tm,qp,A0,j),I.layerClipId&&w.hideOutsideRangePoint(J0,tm,Re,Q,qp.xcalendar,qp.ycalendar),qp.customdata&&em.classed("plotly-customdata",J0.data!==null&&J0.data!==void 0)):tm.remove()}),yt?vm.exit().transition().style("opacity",0).remove():vm.exit().remove(),km=bm.selectAll("g"),vm=km.data(Bp,xn),vm.enter().append("g").classed("textpoint",!0).append("text"),vm.order(),vm.each(function(J0){var em=_.select(this),tm=Ze(em.select("text"));Yo=w.translatePoint(J0,tm,Re,Q),Yo?I.layerClipId&&w.hideOutsideRangePoint(J0,em,Re,Q,qp.xcalendar,qp.ycalendar):em.remove()}),vm.selectAll("text").call(w.textPointStyle,qp,j).each(function(J0){var em=Re.c2p(J0.x),tm=Q.c2p(J0.y);_.select(this).selectAll("tspan.line").each(function(){Ze(_.select(this)).attr({x:em,y:tm})})}),vm.exit().remove()}vt.datum(G),_t.datum(G),$0(vt,_t,G);var W0=xt.cliponaxis===!1,gm=W0?null:I.layerClipId;w.setClipUrl(vt,gm,j),w.setClipUrl(_t,gm,j)}function $(j,z,I,G,M){var L=I.xaxis,B=I.yaxis,X=_.extent(m.simpleMap(L.range,L.r2c)),ee=_.extent(m.simpleMap(B.range,B.r2c)),yt=G[0].trace;if(S.hasMarkers(yt)){var Ze=yt.marker.maxdisplayed;if(Ze!==0){var Re=G.filter(function(ht){return ht.x>=X[0]&&ht.x<=X[1]&&ht.y>=ee[0]&&ht.y<=ee[1]}),Q=Math.ceil(Re.length/Ze),xt=0;M.forEach(function(ht,it){var ut=ht[0].trace;S.hasMarkers(ut)&&ut.marker.maxdisplayed>0&&it<z&&xt++});var tt=Math.round(xt*Q/3+Math.floor(xt/3)*Q/7.1);G.forEach(function(ht){delete ht.vis}),Re.forEach(function(ht,it){Math.round((it+tt)%Q)===0&&(ht.vis=!0)})}}}}),l2=r((nt,ke)=>{ke.exports={container:"marker",min:"cmin",max:"cmax"}}),s5=r((nt,ke)=>{var _=Im();ke.exports=function(d,m,E){var b={},w={_fullLayout:E},S=_.getFromTrace(w,m,"x"),C=_.getFromTrace(w,m,"y"),p=d.orig_x;p===void 0&&(p=d.x);var F=d.orig_y;return F===void 0&&(F=d.y),b.xLabel=_.tickText(S,S.c2l(p),!0).text,b.yLabel=_.tickText(C,C.c2l(F),!0).text,b}}),Wy=r((nt,ke)=>{var _=o(),d=Q0(),m=y1();function E(C){var p=_.select(C).selectAll("g.trace.scatter");p.style("opacity",function(F){return F[0].trace.opacity}),p.selectAll("g.points").each(function(F){var A=_.select(this),O=F.trace||F[0].trace;b(A,O,C)}),p.selectAll("g.text").each(function(F){var A=_.select(this),O=F.trace||F[0].trace;w(A,O,C)}),p.selectAll("g.trace path.js-line").call(d.lineGroupStyle),p.selectAll("g.trace path.js-fill").call(d.fillGroupStyle,C,!1),m.getComponentMethod("errorbars","style")(p)}function b(C,p,F){d.pointStyle(C.selectAll("path.point"),p,F)}function w(C,p,F){d.textPointStyle(C.selectAll("text"),p,F)}function S(C,p,F){var A=p[0].trace;A.selectedpoints?(d.selectedPointStyle(F.selectAll("path.point"),A),d.selectedTextStyle(F.selectAll("text"),A)):(b(F,A,C),w(F,A,C))}ke.exports={style:E,stylePoints:b,styleText:w,styleOnSelect:S}}),Pb=r((nt,ke)=>{var _=Mn(),d=Kp();ke.exports=function(m,E){var b,w;if(m.mode==="lines")return b=m.line.color,b&&_.opacity(b)?b:m.fillcolor;if(m.mode==="none")return m.fill?m.fillcolor:"";var S=E.mcc||(m.marker||{}).color,C=E.mlcc||((m.marker||{}).line||{}).color;return w=S&&_.opacity(S)?S:C&&_.opacity(C)&&(E.mlw||((m.marker||{}).line||{}).width)?C:"",w?_.opacity(w)<.3?_.addOpacity(w,.3):w:(b=(m.line||{}).color,b&&_.opacity(b)&&d.hasLines(m)&&m.line.width?b:m.fillcolor)}}),Ax=r((nt,ke)=>{var _=et(),d=ey(),m=y1(),E=Pb(),b=Mn(),w=_.fillText;ke.exports=function(S,C,p,F){var A=S.cd,O=A[0].trace,$=S.xa,j=S.ya,z=$.c2p(C),I=j.c2p(p),G=[z,I],M=O.hoveron||"",L=O.mode.indexOf("markers")!==-1?3:.5,B=!!O.xperiodalignment,X=!!O.yperiodalignment;if(M.indexOf("points")!==-1){var ee=function(jt){if(B){var aa=$.c2p(jt.xStart),ca=$.c2p(jt.xEnd);return z>=Math.min(aa,ca)&&z<=Math.max(aa,ca)?0:1/0}var Cp=Math.max(3,jt.mrc||0),pt=1-1/Cp,gt=Math.abs($.c2p(jt.x)-z);return gt<Cp?pt*gt/Cp:gt-Cp+pt},yt=function(jt){if(X){var aa=j.c2p(jt.yStart),ca=j.c2p(jt.yEnd);return I>=Math.min(aa,ca)&&I<=Math.max(aa,ca)?0:1/0}var Cp=Math.max(3,jt.mrc||0),pt=1-1/Cp,gt=Math.abs(j.c2p(jt.y)-I);return gt<Cp?pt*gt/Cp:gt-Cp+pt},Ze=function(jt){var aa=Math.max(L,jt.mrc||0),ca=$.c2p(jt.x)-z,Cp=j.c2p(jt.y)-I;return Math.max(Math.sqrt(ca*ca+Cp*Cp)-aa,1-L/aa)},Re=d.getDistanceFunction(F,ee,yt,Ze);if(d.getClosest(A,Re,S),S.index!==!1){var Q=A[S.index],xt=$.c2p(Q.x,!0),tt=j.c2p(Q.y,!0),ht=Q.mrc||1;S.index=Q.i;var it=A[0].t.orientation,ut=it&&(Q.sNorm||Q.s),vt=it==="h"?ut:Q.orig_x!==void 0?Q.orig_x:Q.x,_t=it==="v"?ut:Q.orig_y!==void 0?Q.orig_y:Q.y;return _.extendFlat(S,{color:E(O,Q),x0:xt-ht,x1:xt+ht,xLabelVal:vt,y0:tt-ht,y1:tt+ht,yLabelVal:_t,spikeDistance:Ze(Q),hovertemplate:O.hovertemplate}),w(Q,O,S),m.getComponentMethod("errorbars","hoverInfo")(Q,O,S),[S]}}function Le(jt){if(!jt)return!1;var aa=jt.node();try{var ca=new DOMPoint(G[0],G[1]);return aa.isPointInFill(ca)}catch{var Cp=aa.ownerSVGElement.createSVGPoint();return Cp.x=G[0],Cp.y=G[1],aa.isPointInFill(Cp)}}function wt(jt){var aa,ca=[],Cp=1/0,pt=-1/0,gt=1/0,te=-1/0,Et;for(aa=0;aa<jt.length;aa++){var zt=jt[aa];zt.contains(G)&&(ca.push(zt),gt=Math.min(gt,zt.ymin),te=Math.max(te,zt.ymax))}if(ca.length===0)return null;gt=Math.max(gt,0),te=Math.min(te,j._length),Et=(gt+te)/2;var rt,Z,we,ot,mt,It,Yt;for(aa=0;aa<ca.length;aa++)for(Z=ca[aa].pts,rt=1;rt<Z.length;rt++)It=Z[rt-1][1],Yt=Z[rt][1],It>Et!=Yt>=Et&&(ot=Z[rt-1][0],mt=Z[rt][0],Yt-It&&(we=ot+(mt-ot)*(Et-It)/(Yt-It),Cp=Math.min(Cp,we),pt=Math.max(pt,we)));return Cp=Math.max(Cp,0),pt=Math.min(pt,$._length),{x0:Cp,x1:pt,y0:Et,y1:Et}}if(M.indexOf("fills")!==-1&&O._fillElement){var St=Le(O._fillElement)&&!Le(O._fillExclusionElement);if(St){var Ut=wt(O._polygons);Ut===null&&(Ut={x0:G[0],x1:G[0],y0:G[1],y1:G[1]});var kt=b.defaultLine;return b.opacity(O.fillcolor)?kt=O.fillcolor:b.opacity((O.line||{}).color)&&(kt=O.line.color),_.extendFlat(S,{distance:S.maxHoverDistance,x0:Ut.x0,x1:Ut.x1,y0:Ut.y0,y1:Ut.y1,color:kt,hovertemplate:!1}),delete S.index,O.text&&!_.isArrayOrTypedArray(O.text)?S.text=String(O.text):S.text=O.name,[S]}}}}),Y3=r((nt,ke)=>{var _=Kp();ke.exports=function(d,m){var E=d.cd,b=d.xaxis,w=d.yaxis,S=[],C=E[0].trace,p,F,A,O,$=!_.hasMarkers(C)&&!_.hasText(C);if($)return[];if(m===!1)for(p=0;p<E.length;p++)E[p].selected=0;else for(p=0;p<E.length;p++)F=E[p],A=b.c2p(F.x),O=w.c2p(F.y),F.i!==null&&m.contains([A,O],!1,p,d)?(S.push({pointNumber:F.i,x:b.c2d(F.x),y:w.c2d(F.y)}),F.selected=1):F.selected=0;return S}}),B_=r((nt,ke)=>{ke.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}}),u2=r((nt,ke)=>{var _=y1().traceIs,d=q0();ke.exports=function(S,C,p,F){p("autotypenumbers",F.autotypenumbersDflt);var A=p("type",(F.splomStash||{}).type);A==="-"&&(m(C,F.data),C.type==="-"?C.type="linear":S.type=C.type)};function m(S,C){if(S.type==="-"){var p=S._id,F=p.charAt(0),A;p.indexOf("scene")!==-1&&(p=F);var O=E(C,p,F);if(O){if(O.type==="histogram"&&F==={v:"y",h:"x"}[O.orientation||"v"]){S.type="linear";return}var $=F+"calendar",j=O[$],z={noMultiCategory:!_(O,"cartesian")||_(O,"noMultiCategory")};if(O.type==="box"&&O._hasPreCompStats&&F==={h:"x",v:"y"}[O.orientation||"v"]&&(z.noMultiCategory=!0),z.autotypenumbers=S.autotypenumbers,w(O,F)){var I=b(O),G=[];for(A=0;A<C.length;A++){var M=C[A];!_(M,"box-violin")||(M[F+"axis"]||F)!==p||(M[I]!==void 0?G.push(M[I][0]):M.name!==void 0?G.push(M.name):G.push("text"),M[$]!==j&&(j=void 0))}S.type=d(G,j,z)}else if(O.type==="splom"){var L=O.dimensions,B=L[O._axesDim[p]];B.visible&&(S.type=d(B.values,j,z))}else S.type=d(O[F]||[O[F+"0"]],j,z)}}}function E(S,C,p){for(var F=0;F<S.length;F++){var A=S[F];if(A.type==="splom"&&A._length>0&&(A["_"+p+"axes"]||{})[C]||(A[p+"axis"]||p)===C&&(w(A,p)||(A[p]||[]).length||A[p+"0"]))return A}}function b(S){return{v:"x",h:"y"}[S.orientation||"v"]}function w(S,C){var p=b(S),F=_(S,"box-violin"),A=_(S._fullInput||{},"candlestick");return F&&!A&&C===p&&S[p]===void 0&&S[p+"0"]===void 0}}),Fb=r((nt,ke)=>{var _=W().isTypedArraySpec;function d(m,E){var b=E.dataAttr||m._id.charAt(0),w={},S,C,p;if(E.axData)S=E.axData;else for(S=[],C=0;C<E.data.length;C++){var F=E.data[C];F[b+"axis"]===m._id&&S.push(F)}for(C=0;C<S.length;C++){var A=S[C][b];for(p=0;p<A.length;p++){var O=A[p];O!=null&&(w[O]=1)}}return Object.keys(w)}ke.exports=function(m,E,b,w){if(E.type==="category"){var S=m.categoryarray,C=Array.isArray(S)&&S.length>0||_(S),p;C&&(p="array");var F=b("categoryorder",p),A;F==="array"&&(A=b("categoryarray")),!C&&F==="array"&&(F=E.categoryorder="trace"),F==="trace"?E._initialCategories=[]:F==="array"?E._initialCategories=A.slice():(A=d(E,w).sort(),F==="category ascending"?E._initialCategories=A:F==="category descending"&&(E._initialCategories=A.reverse()))}}}),Z3=r((nt,ke)=>{var _=ie().mix,d=Lp(),m=et();ke.exports=function(E,b,w,S){S=S||{};var C=S.dfltColor;function p(Q,xt){return m.coerce2(E,b,S.attributes,Q,xt)}var F=p("linecolor",C),A=p("linewidth"),O=w("showline",S.showLine||!!F||!!A);O||(delete b.linecolor,delete b.linewidth);var $=_(C,S.bgColor,S.blend||d.lightFraction).toRgbString(),j=p("gridcolor",$),z=p("gridwidth"),I=p("griddash"),G=w("showgrid",S.showGrid||!!j||!!z||!!I);if(G||(delete b.gridcolor,delete b.gridwidth,delete b.griddash),S.hasMinor){var M=_(b.gridcolor,S.bgColor,67).toRgbString(),L=p("minor.gridcolor",M),B=p("minor.gridwidth",b.gridwidth||1),X=p("minor.griddash",b.griddash||"solid"),ee=w("minor.showgrid",!!L||!!B||!!X);ee||(delete b.minor.gridcolor,delete b.minor.gridwidth,delete b.minor.griddash)}if(!S.noZeroLine){p("zerolinelayer");var yt=p("zerolinecolor",C),Ze=p("zerolinewidth"),Re=w("zeroline",S.showGrid||!!yt||!!Ze);Re||(delete b.zerolinelayer,delete b.zerolinecolor,delete b.zerolinewidth)}}}),j_=r((nt,ke)=>{var _=v(),d=y1(),m=et(),E=Fm(),b=Dt(),w=d0(),S=lt(),C=Pt(),p=Zt(),F=Er(),A=Fb(),O=Z3(),$=i1(),j=hm(),z=Vm().WEEKDAY_PATTERN,I=Vm().HOUR_PATTERN;ke.exports=function(B,X,ee,yt,Ze){var Re=yt.letter,Q=yt.font||{},xt=yt.splomStash||{},tt=ee("visible",!yt.visibleDflt),ht=X._template||{},it=X.type||ht.type||"-",ut;if(it==="date"){var vt=d.getComponentMethod("calendars","handleDefaults");vt(B,X,"calendar",yt.calendar),yt.noTicklabelmode||(ut=ee("ticklabelmode"))}!yt.noTicklabelindex&&(it==="date"||it==="linear")&&ee("ticklabelindex");var _t="";(!yt.noTicklabelposition||it==="multicategory")&&(_t=m.coerce(B,X,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:ut==="period"?["outside","inside"]:Re==="x"?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),yt.noTicklabeloverflow||ee("ticklabeloverflow",_t.indexOf("inside")!==-1?"hide past domain":it==="category"||it==="multicategory"?"allow":"hide past div"),j(X,Ze),$(B,X,ee,yt),A(B,X,ee,yt),yt.noHover||(it!=="category"&&ee("hoverformat"),yt.noUnifiedhovertitle||ee("unifiedhovertitle.text"));var Le=ee("color"),wt=Le!==w.color.dflt?Le:Q.color,St=xt.label||Ze._dfltTitle[Re];if(F(B,X,ee,it,yt),!tt)return X;ee("title.text",St),m.coerceFont(ee,"title.font",Q,{overrideDflt:{size:m.bigFont(Q.size),color:wt}}),S(B,X,ee,it);var Ut=yt.hasMinor;if(Ut&&(E.newContainer(X,"minor"),S(B,X,ee,it,{isMinor:!0})),p(B,X,ee,it,yt),C(B,X,ee,yt),Ut){var kt=yt.isMinor;yt.isMinor=!0,C(B,X,ee,yt),yt.isMinor=kt}O(B,X,ee,{dfltColor:Le,bgColor:yt.bgColor,showGrid:yt.showGrid,hasMinor:Ut,attributes:w}),Ut&&!X.minor.ticks&&!X.minor.showgrid&&delete X.minor,(X.showline||X.ticks)&&ee("mirror");var jt=it==="multicategory";if(!yt.noTickson&&(it==="category"||jt)&&(X.ticks||X.showgrid)&&(jt?(ee("tickson","boundaries"),delete X.ticklabelposition):ee("tickson")),jt){var aa=ee("showdividers");aa&&(ee("dividercolor"),ee("dividerwidth"))}if(it==="date")if(b(B,X,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:G}),!X.rangebreaks.length)delete X.rangebreaks;else{for(var ca=0;ca<X.rangebreaks.length;ca++)if(X.rangebreaks[ca].pattern===z){X._hasDayOfWeekBreaks=!0;break}if(j(X,Ze),Ze._has("scattergl")||Ze._has("splom"))for(var Cp=0;Cp<yt.data.length;Cp++){var pt=yt.data[Cp];(pt.type==="scattergl"||pt.type==="splom")&&(pt.visible=!1,m.warn(pt.type+" traces do not work on axes with rangebreaks. Setting trace "+pt.index+" to `visible: false`."))}}return X};function G(B,X,ee){function yt(vt,_t){return m.coerce(B,X,w.rangebreaks,vt,_t)}var Ze=yt("enabled");if(Ze){var Re=yt("bounds");if(Re&&Re.length>=2){var Q="",xt,tt;if(Re.length===2){for(xt=0;xt<2;xt++)if(tt=L(Re[xt]),tt){Q=z;break}}var ht=yt("pattern",Q);if(ht===z)for(xt=0;xt<2;xt++)tt=L(Re[xt]),tt&&(X.bounds[xt]=Re[xt]=tt-1);if(ht)for(xt=0;xt<2;xt++)switch(tt=Re[xt],ht){case z:if(!_(tt)){X.enabled=!1;return}if(tt=+tt,tt!==Math.floor(tt)||tt<0||tt>=7){X.enabled=!1;return}X.bounds[xt]=Re[xt]=tt;break;case I:if(!_(tt)){X.enabled=!1;return}if(tt=+tt,tt<0||tt>24){X.enabled=!1;return}X.bounds[xt]=Re[xt]=tt;break}if(ee.autorange===!1){var it=ee.range;if(it[0]<it[1]){if(Re[0]<it[0]&&Re[1]>it[1]){X.enabled=!1;return}}else if(Re[0]>it[0]&&Re[1]<it[1]){X.enabled=!1;return}}}else{var ut=yt("values");if(ut&&ut.length)yt("dvalue");else{X.enabled=!1;return}}}}var M={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function L(B){if(typeof B=="string")return M[B.substr(0,3).toLowerCase()]}}),zb=r((nt,ke)=>{var _=v(),d=et();ke.exports=function(m,E,b,w){var S=w.counterAxes||[],C=w.overlayableAxes||[],p=w.letter,F=w.grid,A=w.overlayingDomain,O,$,j,z,I,G;F&&($=F._domains[p][F._axisMap[E._id]],O=F._anchors[E._id],$&&(j=F[p+"side"].split(" ")[0],z=F.domain[p][j==="right"||j==="top"?1:0])),$=$||[0,1],O=O||(_(m.position)?"free":S[0]||"free"),j=j||(p==="x"?"bottom":"left"),z=z||0,I=0,G=!1;var M=d.coerce(m,E,{anchor:{valType:"enumerated",values:["free"].concat(S),dflt:O}},"anchor"),L=d.coerce(m,E,{side:{valType:"enumerated",values:p==="x"?["bottom","top"]:["left","right"],dflt:j}},"side");if(M==="free"){if(p==="y"){var B=b("autoshift");B&&(z=L==="left"?A[0]:A[1],G=E.automargin?E.automargin:!0,I=L==="left"?-3:3),b("shift",I)}b("position",z)}b("automargin",G);var X=!1;if(C.length&&(X=d.coerce(m,E,{overlaying:{valType:"enumerated",values:[!1].concat(C),dflt:!1}},"overlaying")),!X){var ee=b("domain",$);ee[0]>ee[1]-1/4096&&(E.domain=$),d.noneOrAll(m.domain,E.domain,$),E.tickmode==="sync"&&(E.tickmode="auto")}return b("layer"),E}}),sx=r((nt,ke)=>{var _=et(),d=Mn(),m=D0().isUnifiedHover,E=vy(),b=Fm(),w=Km(),S=d0(),C=u2(),p=j_(),F=Sg(),A=zb(),O=D1(),$=O.id2name,j=O.name2id,z=Vm().AX_ID_PATTERN,I=y1(),G=I.traceIs,M=I.getComponentMethod;function L(B,X,ee){Array.isArray(B[X])?B[X].push(ee):B[X]=[ee]}ke.exports=function(B,X,ee){var yt=X.autotypenumbers,Ze={},Re={},Q={},xt={},tt={},ht={},it={},ut={},vt={},_t={},Le,wt;for(Le=0;Le<ee.length;Le++){var St=ee[Le];if(G(St,"cartesian")){var Ut;if(St.xaxis)Ut=$(St.xaxis),L(Ze,Ut,St);else if(St.xaxes)for(wt=0;wt<St.xaxes.length;wt++)L(Ze,$(St.xaxes[wt]),St);var kt;if(St.yaxis)kt=$(St.yaxis),L(Ze,kt,St);else if(St.yaxes)for(wt=0;wt<St.yaxes.length;wt++)L(Ze,$(St.yaxes[wt]),St);if(St.type==="funnel"?St.orientation==="h"?(Ut&&(Re[Ut]=!0),kt&&(it[kt]=!0)):kt&&(Q[kt]=!0):St.type==="image"?(kt&&(ut[kt]=!0),Ut&&(ut[Ut]=!0)):(kt&&(tt[kt]=!0,ht[kt]=!0),(!G(St,"carpet")||St.type==="carpet"&&!St._cheater)&&Ut&&(xt[Ut]=!0)),St.type==="carpet"&&St._cheater&&Ut&&(Re[Ut]=!0),G(St,"2dMap")&&(vt[Ut]=!0,vt[kt]=!0),G(St,"oriented")){var jt=St.orientation==="h"?kt:Ut;_t[jt]=!0}}}var aa=X._subplots,ca=aa.xaxis,Cp=aa.yaxis,pt=_.simpleMap(ca,$),gt=_.simpleMap(Cp,$),te=pt.concat(gt),Et=d.background;ca.length&&Cp.length&&(Et=_.coerce(B,X,w,"plot_bgcolor"));var zt=d.combine(Et,X.paper_bgcolor),rt,Z,we,ot,mt;function It(){var xn=Ze[rt]||[];mt._traceIndices=xn.map(function(Fp){return Fp.index}),mt._annIndices=[],mt._shapeIndices=[],mt._selectionIndices=[],mt._imgIndices=[],mt._subplotsWith=[],mt._counterAxes=[],mt._name=mt._attr=rt,mt._id=Z}function Yt(xn,Fp){return _.coerce(ot,mt,S,xn,Fp)}function Sr(xn,Fp){return _.coerce2(ot,mt,S,xn,Fp)}function Op(xn){return xn==="x"?Cp:ca}function Hp(xn,Fp){for(var Bp=xn==="x"?pt:gt,e0=[],o0=0;o0<Bp.length;o0++){var C0=Bp[o0];C0!==Fp&&!(B[C0]||{}).overlaying&&e0.push(j(C0))}return e0}var n0={x:Op("x"),y:Op("y")},R0=n0.x.concat(n0.y),w0={},_0=[];function ha(){var xn=ot.matches;z.test(xn)&&R0.indexOf(xn)===-1&&(w0[xn]=ot.type,_0=Object.keys(w0))}var Rp=E(B,X),Gt=m(Rp);for(Le=0;Le<te.length;Le++){rt=te[Le],Z=j(rt),we=rt.charAt(0),_.isPlainObject(B[rt])||(B[rt]={}),ot=B[rt],mt=b.newContainer(X,rt,we+"axis"),It();var Gp=we==="x"&&!xt[rt]&&Re[rt]||we==="y"&&!tt[rt]&&Q[rt],c0=we==="y"&&(!ht[rt]&&it[rt]||ut[rt]),M0={hasMinor:!0,letter:we,font:X.font,outerTicks:vt[rt],showGrid:!_t[rt],data:Ze[rt]||[],bgColor:zt,calendar:X.calendar,automargin:!0,visibleDflt:Gp,reverseDflt:c0,autotypenumbersDflt:yt,splomStash:((X._splomAxes||{})[we]||{})[Z],noAutotickangles:we==="y"};Yt("uirevision",X.uirevision),C(ot,mt,Yt,M0),p(ot,mt,Yt,M0,X);var I0=Gt&&we===Rp.charAt(0),k0=Sr("spikecolor",Gt?mt.color:void 0),V0=Sr("spikethickness",Gt?1.5:void 0),$0=Sr("spikedash",Gt?"dot":void 0),W0=Sr("spikemode",Gt?"across":void 0),gm=Sr("spikesnap"),F0=Yt("showspikes",!!I0||!!k0||!!V0||!!$0||!!W0||!!gm);F0||(delete mt.spikecolor,delete mt.spikethickness,delete mt.spikedash,delete mt.spikemode,delete mt.spikesnap);var bm=$(ot.overlaying),Dm=[0,1];if(X[bm]!==void 0){var vm=$(X[bm].anchor);X[vm]!==void 0&&(Dm=X[vm].domain)}A(ot,mt,Yt,{letter:we,counterAxes:n0[we],overlayableAxes:Hp(we,rt),grid:X.grid,overlayingDomain:Dm}),Yt("title.standoff"),ha(),mt._input=ot}for(Le=0;Le<_0.length;){Z=_0[Le++],rt=$(Z),we=rt.charAt(0),_.isPlainObject(B[rt])||(B[rt]={}),ot=B[rt],mt=b.newContainer(X,rt,we+"axis"),It();var km={letter:we,font:X.font,outerTicks:vt[rt],showGrid:!_t[rt],data:[],bgColor:zt,calendar:X.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:yt,splomStash:((X._splomAxes||{})[we]||{})[Z]};Yt("uirevision",X.uirevision),mt.type=w0[Z]||"linear",p(ot,mt,Yt,km,X),A(ot,mt,Yt,{letter:we,counterAxes:n0[we],overlayableAxes:Hp(we,rt),grid:X.grid}),Yt("fixedrange"),Yt("modebardisable"),ha(),mt._input=ot}var Yo=M("rangeslider","handleDefaults"),qp=M("rangeselector","handleDefaults");for(Le=0;Le<pt.length;Le++)rt=pt[Le],ot=B[rt],mt=X[rt],Yo(B,X,rt),mt.type==="date"&&qp(ot,mt,X,gt,mt.calendar),Yt("fixedrange"),Yt("modebardisable");for(Le=0;Le<gt.length;Le++){rt=gt[Le],ot=B[rt],mt=X[rt];var Mt=X[$(mt.anchor)],Wt=M("rangeslider","isVisible")(Mt);Yt("fixedrange",Wt),Yt("modebardisable")}F.handleDefaults(B,X,{axIds:R0.concat(_0).sort(O.idSort),axHasImage:ut})}}),w2=r((nt,ke)=>{var _=o(),d=y1(),m=et(),E=Q0(),b=Im();ke.exports=function(w,S,C,p){var F=w._fullLayout;if(S.length===0){b.redrawComponents(w);return}function A(X){var ee=X.xaxis,yt=X.yaxis;F._defs.select("#"+X.clipId+"> rect").call(E.setTranslate,0,0).call(E.setScale,1,1),X.plot.call(E.setTranslate,ee._offset,yt._offset).call(E.setScale,1,1);var Ze=X.plot.selectAll(".scatterlayer .trace");Ze.selectAll(".point").call(E.setPointGroupScale,1,1),Ze.selectAll(".textpoint").call(E.setTextPointsScale,1,1),Ze.call(E.hideOutsideRangePoints,X)}function O(X,ee){var yt=X.plotinfo,Ze=yt.xaxis,Re=yt.yaxis,Q=Ze._length,xt=Re._length,tt=!!X.xr1,ht=!!X.yr1,it=[];if(tt){var ut=m.simpleMap(X.xr0,Ze.r2l),vt=m.simpleMap(X.xr1,Ze.r2l),_t=ut[1]-ut[0],Le=vt[1]-vt[0];it[0]=(ut[0]*(1-ee)+ee*vt[0]-ut[0])/(ut[1]-ut[0])*Q,it[2]=Q*(1-ee+ee*Le/_t),Ze.range[0]=Ze.l2r(ut[0]*(1-ee)+ee*vt[0]),Ze.range[1]=Ze.l2r(ut[1]*(1-ee)+ee*vt[1])}else it[0]=0,it[2]=Q;if(ht){var wt=m.simpleMap(X.yr0,Re.r2l),St=m.simpleMap(X.yr1,Re.r2l),Ut=wt[1]-wt[0],kt=St[1]-St[0];it[1]=(wt[1]*(1-ee)+ee*St[1]-wt[1])/(wt[0]-wt[1])*xt,it[3]=xt*(1-ee+ee*kt/Ut),Re.range[0]=Ze.l2r(wt[0]*(1-ee)+ee*St[0]),Re.range[1]=Re.l2r(wt[1]*(1-ee)+ee*St[1])}else it[1]=0,it[3]=xt;b.drawOne(w,Ze,{skipTitle:!0}),b.drawOne(w,Re,{skipTitle:!0}),b.redrawComponents(w,[Ze._id,Re._id]);var jt=tt?Q/it[2]:1,aa=ht?xt/it[3]:1,ca=tt?it[0]:0,Cp=ht?it[1]:0,pt=tt?it[0]/it[2]*Q:0,gt=ht?it[1]/it[3]*xt:0,te=Ze._offset-pt,Et=Re._offset-gt;yt.clipRect.call(E.setTranslate,ca,Cp).call(E.setScale,1/jt,1/aa),yt.plot.call(E.setTranslate,te,Et).call(E.setScale,jt,aa),E.setPointGroupScale(yt.zoomScalePts,1/jt,1/aa),E.setTextPointsScale(yt.zoomScaleTxt,1/jt,1/aa)}var $;p&&($=p());function j(){for(var X={},ee=0;ee<S.length;ee++){var yt=S[ee],Ze=yt.plotinfo.xaxis,Re=yt.plotinfo.yaxis;yt.xr1&&(X[Ze._name+".range"]=yt.xr1.slice()),yt.yr1&&(X[Re._name+".range"]=yt.yr1.slice())}return $&&$(),d.call("relayout",w,X).then(function(){for(var Q=0;Q<S.length;Q++)A(S[Q].plotinfo)})}function z(){for(var X={},ee=0;ee<S.length;ee++){var yt=S[ee],Ze=yt.plotinfo.xaxis,Re=yt.plotinfo.yaxis;yt.xr0&&(X[Ze._name+".range"]=yt.xr0.slice()),yt.yr0&&(X[Re._name+".range"]=yt.yr0.slice())}return d.call("relayout",w,X).then(function(){for(var Q=0;Q<S.length;Q++)A(S[Q].plotinfo)})}var I,G,M,L=_.ease(C.easing);w._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(M),M=null,z()});function B(){G=Date.now();for(var X=Math.min(1,(G-I)/C.duration),ee=L(X),yt=0;yt<S.length;yt++)O(S[yt],ee);G-I>C.duration?(j(),M=window.cancelAnimationFrame(B)):M=window.requestAnimationFrame(B)}return I=Date.now(),M=window.requestAnimationFrame(B),Promise.resolve()}}),Ux=r(nt=>{var ke=o(),_=y1(),d=et(),m=cg(),E=Q0(),b=Mg().getModuleCalcData,w=D1(),S=Vm(),C=Ag(),p=d.ensureSingle;function F(G,M,L){return d.ensureSingle(G,M,L,function(B){B.datum(L)})}var A=S.zindexSeparator;nt.name="cartesian",nt.attr=["xaxis","yaxis"],nt.idRoot=["x","y"],nt.idRegex=S.idRegex,nt.attrRegex=S.attrRegex,nt.attributes=B_(),nt.layoutAttributes=d0(),nt.supplyLayoutDefaults=sx(),nt.transitionAxes=w2(),nt.finalizeSubplots=function(G,M){var L=M._subplots,B=L.xaxis,X=L.yaxis,ee=L.cartesian,yt=ee,Ze={},Re={},Q,xt,tt;for(Q=0;Q<yt.length;Q++){var ht=yt[Q].split("y");Ze[ht[0]]=1,Re["y"+ht[1]]=1}for(Q=0;Q<B.length;Q++)xt=B[Q],Ze[xt]||(tt=(G[w.id2name(xt)]||{}).anchor,S.idRegex.y.test(tt)||(tt="y"),ee.push(xt+tt),yt.push(xt+tt),Re[tt]||(Re[tt]=1,d.pushUnique(X,tt)));for(Q=0;Q<X.length;Q++)tt=X[Q],Re[tt]||(xt=(G[w.id2name(tt)]||{}).anchor,S.idRegex.x.test(xt)||(xt="x"),ee.push(xt+tt),yt.push(xt+tt),Ze[xt]||(Ze[xt]=1,d.pushUnique(B,xt)));if(!yt.length){xt="",tt="";for(var it in G)if(S.attrRegex.test(it)){var ut=it.charAt(0);ut==="x"?(!xt||+it.substr(5)<+xt.substr(5))&&(xt=it):(!tt||+it.substr(5)<+tt.substr(5))&&(tt=it)}xt=xt?w.name2id(xt):"x",tt=tt?w.name2id(tt):"y",B.push(xt),X.push(tt),ee.push(xt+tt)}},nt.plot=function(G,M,L,B){var X=G._fullLayout,ee=X._subplots.cartesian,yt=G.calcdata,Ze;if(!Array.isArray(M))for(M=[],Ze=0;Ze<yt.length;Ze++)M.push(Ze);for(var Re=X._zindices,Q=0;Q<Re.length;Q++){var xt=Re[Q];for(Ze=0;Ze<ee.length;Ze++){var tt=ee[Ze],ht=X._plots[tt];if(Q>0){var it=ht.id;if(it.indexOf(A)!==-1)continue;it+=A+(Q+1),ht=d.extendFlat({},ht,{id:it,plot:X._cartesianlayer.selectAll(".subplot").select("."+it)})}for(var ut=[],vt,_t=0;_t<yt.length;_t++){var Le=yt[_t],wt=Le[0].trace;xt===(wt.zorder||0)&&wt.xaxis+wt.yaxis===tt&&((M.indexOf(wt.index)!==-1||wt.carpet)&&(vt&&vt[0].trace.xaxis+vt[0].trace.yaxis===tt&&["tonextx","tonexty","tonext"].indexOf(wt.fill)!==-1&&ut.indexOf(vt)===-1&&ut.push(vt),ut.push(Le)),vt=Le)}O(G,ht,ut,L,B)}}};function O(G,M,L,B,X){for(var ee=S.traceLayerClasses,yt=G._fullLayout,Ze=yt._zindices,Re=yt._modules,Q,xt,tt,ht=[],it=[],ut=0;ut<Ze.length;ut++)for(var vt=Ze[ut],_t=0;_t<Re.length;_t++){Q=Re[_t];var Le=Q.name,wt=_.modules[Le].categories;if(wt.svg){var St=Q.layerName||Le+"layer",Ut=St+(ut?Number(ut)+1:""),kt=Q.plot;xt=b(L,kt,vt),tt=xt[0],L=xt[1],tt.length&&ht.push({i:ee.indexOf(St),zindex:ut,className:Ut,plotMethod:kt,cdModule:tt}),wt.zoomScale&&it.push("."+Ut)}}ht.sort(function(ca,Cp){return(ca.zindex||0)-(Cp.zindex||0)||ca.i-Cp.i});var jt=M.plot.selectAll("g.mlayer").data(ht,function(ca){return ca.className});if(jt.enter().append("g").attr("class",function(ca){return ca.className}).classed("mlayer",!0).classed("rangeplot",M.isRangePlot),jt.exit().remove(),jt.order(),jt.each(function(ca){var Cp=ke.select(this),pt=ca.className;ca.plotMethod(G,M,ca.cdModule,Cp,B,X),S.clipOnAxisFalseQuery.indexOf("."+pt)===-1&&E.setClipUrl(Cp,M.layerClipId,G)}),yt._has("scattergl")&&(Q=_.getModule("scattergl"),tt=b(L,Q)[0],Q.plot(G,M,tt)),!G._context.staticPlot&&(M._hasClipOnAxisFalse&&(M.clipOnAxisFalseTraces=M.plot.selectAll(S.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),it.length)){var aa=M.plot.selectAll(it.join(",")).selectAll(".trace");M.zoomScalePts=aa.selectAll("path.point"),M.zoomScaleTxt=aa.selectAll(".textpoint")}}nt.clean=function(G,M,L,B){var X=B._plots||{},ee=M._plots||{},yt=B._subplots||{},Ze,Re,Q;if(B._hasOnlyLargeSploms&&!M._hasOnlyLargeSploms)for(Q in X)Ze=X[Q],Ze.plotgroup&&Ze.plotgroup.remove();var xt=B._has&&B._has("gl"),tt=M._has&&M._has("gl");if(xt&&!tt)for(Q in X)Ze=X[Q],Ze._scene&&Ze._scene.destroy();if(yt.xaxis&&yt.yaxis){var ht=w.listIds({_fullLayout:B});for(Re=0;Re<ht.length;Re++){var it=ht[Re];M[w.id2name(it)]||B._infolayer.selectAll(".g-"+it+"title").remove()}}var ut=B._has&&B._has("cartesian"),vt=M._has&&M._has("cartesian");if(ut&&!vt)z(B._cartesianlayer.selectAll(".subplot"),B),B._defs.selectAll(".axesclip").remove(),delete B._axisConstraintGroups,delete B._axisMatchGroups;else if(yt.cartesian)for(Re=0;Re<yt.cartesian.length;Re++){var _t=yt.cartesian[Re];if(_t.indexOf(A)===-1&&!ee[_t]){var Le="."+_t+",."+_t+"-x,."+_t+"-y";B._cartesianlayer.selectAll(Le).remove(),I(_t,B)}}},nt.drawFramework=function(G){var M=G._fullLayout,L=G.calcdata,B,X={};for(B=0;B<L.length;B++){var ee=L[B][0],yt=ee.trace,Ze=yt.zorder||0;X[Ze]||(X[Ze]=[]),X[Ze].push(ee)}var Re=Object.keys(X).map(Number).sort(d.sorterAsc);Re.length||(Re=[0]),M._zindices=Re;var Q=$(G),xt=Q.length,tt=[];for(B=0;B<xt;B++)tt[B]=Q[B].slice();for(var ht=1;ht<Re.length;ht++){var it=[];for(B=0;B<xt;B++)it[B]=Q[B].slice(),it[B][0]+=A+(ht+1);tt=tt.concat(it)}var ut=M._cartesianlayer.selectAll(".subplot").data(tt,String);ut.enter().append("g").attr("class",function(vt){return"subplot "+vt[0]}),ut.order(),ut.exit().call(z,M),ut.each(function(vt){var _t=vt[0],Le=_t.indexOf(A),wt=Le!==-1,St=wt?_t.slice(0,Le):_t,Ut=M._plots[_t];Ut||(Ut=d.extendFlat({},M._plots[St]),Ut&&(Ut.id=_t,M._plots[_t]=Ut,M._subplots.cartesian.push(_t))),Ut&&(Ut.plotgroup=ke.select(this),j(G,Ut),wt||(Ut.draglayer=p(M._draggers,"g",_t)))})},nt.rangePlot=function(G,M,L){j(G,M),O(G,M,L),m.style(G)};function $(G){var M=G._fullLayout,L=M._zindices.length,B=M._subplots.cartesian,X=B.length,ee,yt,Ze,Re,Q,xt,tt=[],ht=[];for(ee=0;ee<X;ee++){Ze=B[ee],Re=M._plots[Ze],Q=Re.xaxis,xt=Re.yaxis;var it=Q._mainAxis,ut=xt._mainAxis,vt=it._id+ut._id,_t=M._plots[vt];Re.overlays=[],vt!==Ze&&_t?(Re.mainplot=vt,Re.mainplotinfo=_t,ht.push(Ze)):(Re.mainplot=void 0,Re.mainplotinfo=void 0,tt.push(Ze))}for(ee=0;ee<ht.length;ee++)Ze=ht[ee],Re=M._plots[Ze],Re.mainplotinfo.overlays.push(Re);var Le=tt.concat(ht),wt=[];for(ee=0;ee<X;ee++){Ze=Le[ee],Re=M._plots[Ze],Q=Re.xaxis,xt=Re.yaxis;for(var St=[],Ut=1;Ut<=L;Ut++){var kt="";for(Ut>1&&(kt+=A+Ut),St.push(Ze+kt),yt=0;yt<Re.overlays.length;yt++)St.push(Re.overlays[yt].id+kt)}St=St.concat([Q.layer,xt.layer,Q.overlaying||"",xt.overlaying||""]),wt.push(St)}return wt}function j(G,M){var L=G._fullLayout,B=M.plotgroup,X=M.id,ee=X.indexOf(A),yt=ee!==-1,Ze=S.layerValue2layerClass[M.xaxis.layer],Re=S.layerValue2layerClass[M.yaxis.layer],Q=L._hasOnlyLargeSploms,xt=L._zindices.length>1,tt=M.mainplotinfo;if(!M.mainplot||xt)if(Q)M.xlines=p(B,"path","xlines-above"),M.ylines=p(B,"path","ylines-above"),M.xaxislayer=p(B,"g","xaxislayer-above"),M.yaxislayer=p(B,"g","yaxislayer-above");else{if(!yt){var ht=p(B,"g","layer-subplot");M.shapelayer=p(ht,"g","shapelayer"),M.imagelayer=p(ht,"g","imagelayer"),tt&&xt?(M.minorGridlayer=tt.minorGridlayer,M.gridlayer=tt.gridlayer,M.zerolinelayer=tt.zerolinelayer):(M.minorGridlayer=p(B,"g","minor-gridlayer"),M.gridlayer=p(B,"g","gridlayer"),M.zerolinelayer=p(B,"g","zerolinelayer"));var it=p(B,"g","layer-between");M.shapelayerBetween=p(it,"g","shapelayer"),M.imagelayerBetween=p(it,"g","imagelayer"),p(B,"path","xlines-below"),p(B,"path","ylines-below"),M.overlinesBelow=p(B,"g","overlines-below"),p(B,"g","xaxislayer-below"),p(B,"g","yaxislayer-below"),M.overaxesBelow=p(B,"g","overaxes-below")}M.overplot=p(B,"g","overplot"),M.plot=p(M.overplot,"g",X),tt&&xt?M.zerolinelayerAbove=tt.zerolinelayerAbove:M.zerolinelayerAbove=p(B,"g","zerolinelayer-above"),yt||(M.xlines=p(B,"path","xlines-above"),M.ylines=p(B,"path","ylines-above"),M.overlinesAbove=p(B,"g","overlines-above"),p(B,"g","xaxislayer-above"),p(B,"g","yaxislayer-above"),M.overaxesAbove=p(B,"g","overaxes-above"),M.xlines=B.select(".xlines-"+Ze),M.ylines=B.select(".ylines-"+Re),M.xaxislayer=B.select(".xaxislayer-"+Ze),M.yaxislayer=B.select(".yaxislayer-"+Re))}else{var ut=tt.plotgroup,vt=X+"-x",_t=X+"-y";M.minorGridlayer=tt.minorGridlayer,M.gridlayer=tt.gridlayer,M.zerolinelayer=tt.zerolinelayer,M.zerolinelayerAbove=tt.zerolinelayerAbove,p(tt.overlinesBelow,"path",vt),p(tt.overlinesBelow,"path",_t),p(tt.overaxesBelow,"g",vt),p(tt.overaxesBelow,"g",_t),M.plot=p(tt.overplot,"g",X),p(tt.overlinesAbove,"path",vt),p(tt.overlinesAbove,"path",_t),p(tt.overaxesAbove,"g",vt),p(tt.overaxesAbove,"g",_t),M.xlines=ut.select(".overlines-"+Ze).select("."+vt),M.ylines=ut.select(".overlines-"+Re).select("."+_t),M.xaxislayer=ut.select(".overaxes-"+Ze).select("."+vt),M.yaxislayer=ut.select(".overaxes-"+Re).select("."+_t)}yt||(Q||(F(M.minorGridlayer,"g",M.xaxis._id),F(M.minorGridlayer,"g",M.yaxis._id),M.minorGridlayer.selectAll("g").map(function(Le){return Le[0]}).sort(w.idSort),F(M.gridlayer,"g",M.xaxis._id),F(M.gridlayer,"g",M.yaxis._id),M.gridlayer.selectAll("g").map(function(Le){return Le[0]}).sort(w.idSort)),M.xlines.style("fill","none").classed("crisp",!0),M.ylines.style("fill","none").classed("crisp",!0))}function z(G,M){if(G){var L={};G.each(function(Re){var Q=Re[0],xt=ke.select(this);xt.remove(),I(Q,M),L[Q]=!0});for(var B in M._plots)for(var X=M._plots[B],ee=X.overlays||[],yt=0;yt<ee.length;yt++){var Ze=ee[yt];L[Ze.id]&&Ze.plot.selectAll(".trace").remove()}}}function I(G,M){M._draggers.selectAll("g."+G).remove(),M._defs.select("#clip"+M._uid+G+"plot").remove()}nt.toSVG=function(G){var M=G._fullLayout._glimages,L=ke.select(G).selectAll(".svg-container"),B=L.filter(function(ee,yt){return yt===L.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus");function X(){var ee=this,yt=ee.toDataURL("image/png"),Ze=M.append("svg:image");Ze.attr({xmlns:C.svg,"xlink:href":yt,preserveAspectRatio:"none",x:0,y:0,width:ee.style.width,height:ee.style.height})}B.each(X)},nt.updateFx=_2().updateFx}),V_=r((nt,ke)=>{var _=Kp();ke.exports={hasLines:_.hasLines,hasMarkers:_.hasMarkers,hasText:_.hasText,isBubble:_.isBubble,attributes:r2(),layoutAttributes:tg(),supplyDefaults:o5(),crossTraceDefaults:q3(),supplyLayoutDefaults:kb(),calc:z_().calc,crossTraceCalc:Ob(),arraysToCalcdata:Ky(),plot:U_(),colorbar:l2(),formatLabels:s5(),style:Wy().style,styleOnSelect:Wy().styleOnSelect,hoverPoints:Ax(),selectPoints:Y3(),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:Ux(),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}}),K2=r((nt,ke)=>{var _=o(),d=Mn(),m=ky(),E=et(),b=E.strScale,w=E.strRotate,S=E.strTranslate;ke.exports=function(C,p,F){var A=C.node(),O=m[F.arrowhead||0],$=m[F.startarrowhead||0],j=(F.arrowwidth||1)*(F.arrowsize||1),z=(F.arrowwidth||1)*(F.startarrowsize||1),I=p.indexOf("start")>=0,G=p.indexOf("end")>=0,M=O.backoff*j+F.standoff,L=$.backoff*z+F.startstandoff,B,X,ee,yt;if(A.nodeName==="line"){B={x:+C.attr("x1"),y:+C.attr("y1")},X={x:+C.attr("x2"),y:+C.attr("y2")};var Ze=B.x-X.x,Re=B.y-X.y;if(ee=Math.atan2(Re,Ze),yt=ee+Math.PI,M&&L&&M+L>Math.sqrt(Ze*Ze+Re*Re)){Ut();return}if(M){if(M*M>Ze*Ze+Re*Re){Ut();return}var Q=M*Math.cos(ee),xt=M*Math.sin(ee);X.x+=Q,X.y+=xt,C.attr({x2:X.x,y2:X.y})}if(L){if(L*L>Ze*Ze+Re*Re){Ut();return}var tt=L*Math.cos(ee),ht=L*Math.sin(ee);B.x-=tt,B.y-=ht,C.attr({x1:B.x,y1:B.y})}}else if(A.nodeName==="path"){var it=A.getTotalLength(),ut="";if(it<M+L){Ut();return}var vt=A.getPointAtLength(0),_t=A.getPointAtLength(.1);ee=Math.atan2(vt.y-_t.y,vt.x-_t.x),B=A.getPointAtLength(Math.min(L,it)),ut="0px,"+L+"px,";var Le=A.getPointAtLength(it),wt=A.getPointAtLength(it-.1);yt=Math.atan2(Le.y-wt.y,Le.x-wt.x),X=A.getPointAtLength(Math.max(0,it-M));var St=ut?L+M:M;ut+=it-St+"px,"+it+"px",C.style("stroke-dasharray",ut)}function Ut(){C.style("stroke-dasharray","0px,100px")}function kt(jt,aa,ca,Cp){jt.path&&(jt.noRotate&&(ca=0),_.select(A.parentNode).append("path").attr({class:C.attr("class"),d:jt.path,transform:S(aa.x,aa.y)+w(ca*180/Math.PI)+b(Cp)}).style({fill:d.rgb(F.arrowcolor),"stroke-width":0}))}I&&kt($,B,ee,z),G&&kt(O,X,yt,j)}}),qy=r((nt,ke)=>{var _=o(),d=y1(),m=cg(),E=et(),b=E.strTranslate,w=Im(),S=Mn(),C=Q0(),p=ey(),F=G1(),A=Y1(),O=t1(),$=Fm().arrayEditor,j=K2();ke.exports={draw:z,drawOne:I,drawRaw:M};function z(L){var B=L._fullLayout;B._infolayer.selectAll(".annotation").remove();for(var X=0;X<B.annotations.length;X++)B.annotations[X].visible&&I(L,X);return m.previousPromises(L)}function I(L,B){var X=L._fullLayout,ee=X.annotations[B]||{},yt=w.getFromId(L,ee.xref),Ze=w.getFromId(L,ee.yref);yt&&yt.setScale(),Ze&&Ze.setScale(),M(L,ee,B,!1,yt,Ze)}function G(L,B,X,ee,yt){var Ze=yt[X],Re=yt[X+"ref"],Q=X.indexOf("y")!==-1,xt=w.getRefType(Re)==="domain",tt=Q?ee.h:ee.w;return L?xt?Ze+(Q?-B:B)/L._length:L.p2r(L.r2p(Ze)+B):Ze+(Q?-B:B)/tt}function M(L,B,X,ee,yt,Ze){var Re=L._fullLayout,Q=L._fullLayout._size,xt=L._context.edits,tt,ht;ee?(tt="annotation-"+ee,ht=ee+".annotations"):(tt="annotation",ht="annotations");var it=$(L.layout,ht,B),ut=it.modifyBase,vt=it.modifyItem,_t=it.getUpdateObj;Re._infolayer.selectAll("."+tt+'[data-index="'+X+'"]').remove();var Le="clip"+Re._uid+"_ann"+X;if(!B._input||B.visible===!1){_.selectAll("#"+Le).remove();return}var wt={x:{},y:{}},St=+B.textangle||0,Ut=Re._infolayer.append("g").classed(tt,!0).attr("data-index",String(X)).style("opacity",B.opacity),kt=Ut.append("g").classed("annotation-text-g",!0),jt=xt[B.showarrow?"annotationTail":"annotationPosition"],aa=B.captureevents||xt.annotationText||jt;function ca(Yt){var Sr={index:X,annotation:B._input,fullAnnotation:B,event:Yt};return ee&&(Sr.subplotId=ee),Sr}var Cp=kt.append("g").style("pointer-events",aa?"all":null).call(A,"pointer").on("click",function(){L._dragging=!1,L.emit("plotly_clickannotation",ca(_.event))});B.hovertext&&Cp.on("mouseover",function(){var Yt=B.hoverlabel,Sr=Yt.font,Op=this.getBoundingClientRect(),Hp=L.getBoundingClientRect();p.loneHover({x0:Op.left-Hp.left,x1:Op.right-Hp.left,y:(Op.top+Op.bottom)/2-Hp.top,text:B.hovertext,color:Yt.bgcolor,borderColor:Yt.bordercolor,fontFamily:Sr.family,fontSize:Sr.size,fontColor:Sr.color,fontWeight:Sr.weight,fontStyle:Sr.style,fontVariant:Sr.variant,fontShadow:Sr.fontShadow,fontLineposition:Sr.fontLineposition,fontTextcase:Sr.fontTextcase},{container:Re._hoverlayer.node(),outerContainer:Re._paper.node(),gd:L})}).on("mouseout",function(){p.loneUnhover(Re._hoverlayer.node())});var pt=B.borderwidth,gt=B.borderpad,te=pt+gt,Et=Cp.append("rect").attr("class","bg").style("stroke-width",pt+"px").call(S.stroke,B.bordercolor).call(S.fill,B.bgcolor),zt=B.width||B.height,rt=Re._topclips.selectAll("#"+Le).data(zt?[0]:[]);rt.enter().append("clipPath").classed("annclip",!0).attr("id",Le).append("rect"),rt.exit().remove();var Z=B.font,we=Re._meta?E.templateString(B.text,Re._meta):B.text,ot=Cp.append("text").classed("annotation-text",!0).text(we);function mt(Yt){return Yt.call(C.font,Z).attr({"text-anchor":{left:"start",right:"end"}[B.align]||"middle"}),F.convertToTspans(Yt,L,It),Yt}function It(){var Yt=ot.selectAll("a");if(Yt.size()===1&&Yt.text()===ot.text()){var Sr=Cp.insert("a",":first-child").attr({"xlink:xlink:href":Yt.attr("xlink:href"),"xlink:xlink:show":Yt.attr("xlink:show")}).style({cursor:"pointer"});Sr.node().appendChild(Et.node())}var Op=Cp.select(".annotation-text-math-group"),Hp=!Op.empty(),n0=C.bBox((Hp?Op:ot).node()),R0=n0.width,w0=n0.height,_0=B.width||R0,ha=B.height||w0,Rp=Math.round(_0+2*te),Gt=Math.round(ha+2*te);function Gp(u1,zm){return zm==="auto"&&(u1<1/3?zm="left":u1>2/3?zm="right":zm="center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[zm]}for(var c0=!1,M0=["x","y"],I0=0;I0<M0.length;I0++){var k0=M0[I0],V0=B[k0+"ref"]||k0,$0=B["a"+k0+"ref"],W0={x:yt,y:Ze}[k0],gm=(St+(k0==="x"?0:-90))*Math.PI/180,F0=Rp*Math.cos(gm),bm=Gt*Math.sin(gm),Dm=Math.abs(F0)+Math.abs(bm),vm=B[k0+"anchor"],km=B[k0+"shift"]*(k0==="x"?1:-1),Yo=wt[k0],qp,Mt,Wt,xn,Fp,Bp=w.getRefType(V0);if(W0&&Bp!=="domain"){var e0=W0.r2fraction(B[k0]);(e0<0||e0>1)&&($0===V0?(e0=W0.r2fraction(B["a"+k0]),(e0<0||e0>1)&&(c0=!0)):c0=!0),qp=W0._offset+W0.r2p(B[k0]),xn=.5}else{var o0=Bp==="domain";k0==="x"?(Wt=B[k0],qp=o0?W0._offset+W0._length*Wt:qp=Q.l+Q.w*Wt):(Wt=1-B[k0],qp=o0?W0._offset+W0._length*Wt:qp=Q.t+Q.h*Wt),xn=B.showarrow?.5:Wt}if(B.showarrow){Yo.head=qp;var C0=B["a"+k0];if(Fp=F0*Gp(.5,B.xanchor)-bm*Gp(.5,B.yanchor),$0===V0){var T0=w.getRefType($0);T0==="domain"?(k0==="y"&&(C0=1-C0),Yo.tail=W0._offset+W0._length*C0):T0==="paper"?k0==="y"?(C0=1-C0,Yo.tail=Q.t+Q.h*C0):Yo.tail=Q.l+Q.w*C0:Yo.tail=W0._offset+W0.r2p(C0),Mt=Fp}else Yo.tail=qp+C0,Mt=Fp+C0;Yo.text=Yo.tail+Fp;var A0=Re[k0==="x"?"width":"height"];if(V0==="paper"&&(Yo.head=E.constrain(Yo.head,1,A0-1)),$0==="pixel"){var J0=-Math.max(Yo.tail-3,Yo.text),em=Math.min(Yo.tail+3,Yo.text)-A0;J0>0?(Yo.tail+=J0,Yo.text+=J0):em>0&&(Yo.tail-=em,Yo.text-=em)}Yo.tail+=km,Yo.head+=km}else Fp=Dm*Gp(xn,vm),Mt=Fp,Yo.text=qp+Fp;Yo.text+=km,Fp+=km,Mt+=km,B["_"+k0+"padplus"]=Dm/2+Mt,B["_"+k0+"padminus"]=Dm/2-Mt,B["_"+k0+"size"]=Dm,B["_"+k0+"shift"]=Fp}if(c0){Cp.remove();return}var tm=0,Nm=0;if(B.align!=="left"&&(tm=(_0-R0)*(B.align==="center"?.5:1)),B.valign!=="top"&&(Nm=(ha-w0)*(B.valign==="middle"?.5:1)),Hp)Op.select("svg").attr({x:te+tm-1,y:te+Nm}).call(C.setClipUrl,zt?Le:null,L);else{var o1=te+Nm-n0.top,N1=te+tm-n0.left;ot.call(F.positionText,N1,o1).call(C.setClipUrl,zt?Le:null,L)}rt.select("rect").call(C.setRect,te,te,_0,ha),Et.call(C.setRect,pt/2,pt/2,Rp-pt,Gt-pt),Cp.call(C.setTranslate,Math.round(wt.x.text-Rp/2),Math.round(wt.y.text-Gt/2)),kt.attr({transform:"rotate("+St+","+wt.x.text+","+wt.y.text+")"});var F1=function(u1,zm){Ut.selectAll(".annotation-arrow-g").remove();var R1=wt.x.head,z1=wt.y.head,E1=wt.x.tail+u1,g1=wt.y.tail+zm,w1=wt.x.text+u1,s1=wt.y.text+zm,Q1=E.rotationXYMatrix(St,w1,s1),og=E.apply2DTransform(Q1),P1=E.apply2DTransform2(Q1),fg=+Et.attr("width"),bg=+Et.attr("height"),Cg=w1-.5*fg,Ug=Cg+fg,rg=s1-.5*bg,Ng=rg+bg,dg=[[Cg,rg,Cg,Ng],[Cg,Ng,Ug,Ng],[Ug,Ng,Ug,rg],[Ug,rg,Cg,rg]].map(P1);if(!dg.reduce(function(O0,U0){return O0^!!E.segmentsIntersect(R1,z1,R1+1e6,z1+1e6,U0[0],U0[1],U0[2],U0[3])},!1)){dg.forEach(function(O0){var U0=E.segmentsIntersect(E1,g1,R1,z1,O0[0],O0[1],O0[2],O0[3]);U0&&(E1=U0.x,g1=U0.y)});var $m=B.arrowwidth,Xg=B.arrowcolor,Lt=B.arrowside,At=Ut.append("g").style({opacity:S.opacity(Xg)}).classed("annotation-arrow-g",!0),Wp=At.append("path").attr("d","M"+E1+","+g1+"L"+R1+","+z1).style("stroke-width",$m+"px").call(S.stroke,S.rgb(Xg));if(j(Wp,Lt,B),xt.annotationPosition&&Wp.node().parentNode&&!ee){var Qp=R1,g0=z1;if(B.standoff){var $p=Math.sqrt(Math.pow(R1-E1,2)+Math.pow(z1-g1,2));Qp+=B.standoff*(E1-R1)/$p,g0+=B.standoff*(g1-z1)/$p}var Xp=At.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(E1-Qp)+","+(g1-g0),transform:b(Qp,g0)}).style("stroke-width",$m+6+"px").call(S.stroke,"rgba(0,0,0,0)").call(S.fill,"rgba(0,0,0,0)"),b0,s0;O.init({element:Xp.node(),gd:L,prepFn:function(){var O0=C.getTranslate(Cp);b0=O0.x,s0=O0.y,yt&&yt.autorange&&ut(yt._name+".autorange",!0),Ze&&Ze.autorange&&ut(Ze._name+".autorange",!0)},moveFn:function(O0,U0){var mm=og(b0,s0),Jm=mm[0]+O0,qm=mm[1]+U0;Cp.call(C.setTranslate,Jm,qm),vt("x",G(yt,O0,"x",Q,B)),vt("y",G(Ze,U0,"y",Q,B)),B.axref===B.xref&&vt("ax",G(yt,O0,"ax",Q,B)),B.ayref===B.yref&&vt("ay",G(Ze,U0,"ay",Q,B)),At.attr("transform",b(O0,U0)),kt.attr({transform:"rotate("+St+","+Jm+","+qm+")"})},doneFn:function(){d.call("_guiRelayout",L,_t());var O0=document.querySelector(".js-notes-box-panel");O0&&O0.redraw(O0.selectedObj)}})}}};if(B.showarrow&&F1(0,0),jt){var B1;O.init({element:Cp.node(),gd:L,prepFn:function(){B1=kt.attr("transform")},moveFn:function(u1,zm){var R1="pointer";if(B.showarrow)B.axref===B.xref?vt("ax",G(yt,u1,"ax",Q,B)):vt("ax",B.ax+u1),B.ayref===B.yref?vt("ay",G(Ze,zm,"ay",Q.w,B)):vt("ay",B.ay+zm),F1(u1,zm);else{if(ee)return;var z1,E1;if(yt)z1=G(yt,u1,"x",Q,B);else{var g1=B._xsize/Q.w,w1=B.x+(B._xshift-B.xshift)/Q.w-g1/2;z1=O.align(w1+u1/Q.w,g1,0,1,B.xanchor)}if(Ze)E1=G(Ze,zm,"y",Q,B);else{var s1=B._ysize/Q.h,Q1=B.y-(B._yshift+B.yshift)/Q.h-s1/2;E1=O.align(Q1-zm/Q.h,s1,0,1,B.yanchor)}vt("x",z1),vt("y",E1),(!yt||!Ze)&&(R1=O.getCursor(yt?.5:z1,Ze?.5:E1,B.xanchor,B.yanchor))}kt.attr({transform:b(u1,zm)+B1}),A(Cp,R1)},clickFn:function(u1,zm){B.captureevents&&L.emit("plotly_clickannotation",ca(zm))},doneFn:function(){A(Cp),d.call("_guiRelayout",L,_t());var u1=document.querySelector(".js-notes-box-panel");u1&&u1.redraw(u1.selectedObj)}})}}xt.annotationText?ot.call(F.makeEditable,{delegate:Cp,gd:L}).call(mt).on("edit",function(Yt){B.text=Yt,this.call(mt),vt("text",Yt),yt&&yt.autorange&&ut(yt._name+".autorange",!0),Ze&&Ze.autorange&&ut(Ze._name+".autorange",!0),d.call("_guiRelayout",L,_t())}):ot.call(mt)}}),lx=r((nt,ke)=>{var _=et(),d=y1(),m=Fm().arrayEditor;ke.exports={hasClickToShow:E,onClick:b};function E(C,p){var F=w(C,p);return F.on.length>0||F.explicitOff.length>0}function b(C,p){var F=w(C,p),A=F.on,O=F.off.concat(F.explicitOff),$={},j=C._fullLayout.annotations,z,I;if(A.length||O.length){for(z=0;z<A.length;z++)I=m(C.layout,"annotations",j[A[z]]),I.modifyItem("visible",!0),_.extendFlat($,I.getUpdateObj());for(z=0;z<O.length;z++)I=m(C.layout,"annotations",j[O[z]]),I.modifyItem("visible",!1),_.extendFlat($,I.getUpdateObj());return d.call("update",C,{},$)}}function w(C,p){var F=C._fullLayout.annotations,A=[],O=[],$=[],j=(p||[]).length,z,I,G,M,L,B,X,ee;for(z=0;z<F.length;z++)if(G=F[z],M=G.clicktoshow,M){for(I=0;I<j;I++)if(L=p[I],B=L.xaxis,X=L.yaxis,B._id===G.xref&&X._id===G.yref&&B.d2r(L.x)===S(G._xclick,B)&&X.d2r(L.y)===S(G._yclick,X)){G.visible?M==="onout"?ee=O:ee=$:ee=A,ee.push(z);break}I===j&&G.visible&&M==="onout"&&O.push(z)}return{on:A,off:O,explicitOff:$}}function S(C,p){return p.type==="log"?p.l2r(C):p.d2r(C)}}),Cx=r((nt,ke)=>{var _=et(),d=Mn();ke.exports=function(m,E,b,w){w("opacity");var S=w("bgcolor"),C=w("bordercolor"),p=d.opacity(C);w("borderpad");var F=w("borderwidth"),A=w("showarrow");w("text",A?" ":b._dfltTitle.annotation),w("textangle"),_.coerceFont(w,"font",b.font),w("width"),w("align");var O=w("height");if(O&&w("valign"),A){var $=w("arrowside"),j,z;$.indexOf("end")!==-1&&(j=w("arrowhead"),z=w("arrowsize")),$.indexOf("start")!==-1&&(w("startarrowhead",j),w("startarrowsize",z)),w("arrowcolor",p?E.bordercolor:d.defaultLine),w("arrowwidth",(p&&F||1)*2),w("standoff"),w("startstandoff")}var I=w("hovertext"),G=b.hoverlabel||{};if(I){var M=w("hoverlabel.bgcolor",G.bgcolor||(d.opacity(S)?d.rgb(S):d.defaultLine)),L=w("hoverlabel.bordercolor",G.bordercolor||d.contrast(M)),B=_.extendFlat({},G.font);B.color||(B.color=L),_.coerceFont(w,"hoverlabel.font",B)}w("captureevents",!!I)}}),vx=r((nt,ke)=>{var _=et(),d=Im(),m=Dt(),E=Cx(),b=ix();ke.exports=function(S,C){m(S,C,{name:"annotations",handleItemDefaults:w})};function w(S,C,p){function F(Q,xt){return _.coerce(S,C,b,Q,xt)}var A=F("visible"),O=F("clicktoshow");if(A||O){E(S,C,p,F);for(var $=C.showarrow,j=["x","y"],z=[-10,-30],I={_fullLayout:p},G=0;G<2;G++){var M=j[G],L=d.coerceRef(S,C,I,M,"","paper");if(L!=="paper"){var B=d.getFromId(I,L);B._annIndices.push(C._index)}if(d.coercePosition(C,I,F,L,M,.5),$){var X="a"+M,ee=d.coerceRef(S,C,I,X,"pixel",["pixel","paper"]);ee!=="pixel"&&ee!==L&&(ee=C[X]="pixel");var yt=ee==="pixel"?z[G]:.4;d.coercePosition(C,I,F,ee,X,yt)}F(M+"anchor"),F(M+"shift")}if(_.noneOrAll(S,C,["x","y"]),$&&_.noneOrAll(S,C,["ax","ay"]),O){var Ze=F("xclick"),Re=F("yclick");C._xclick=Ze===void 0?C.x:d.cleanPosition(Ze,I,C.xref),C._yclick=Re===void 0?C.y:d.cleanPosition(Re,I,C.yref)}}}}),yx=r((nt,ke)=>{var _=et(),d=Im(),m=qy().draw;ke.exports=function(w){var S=w._fullLayout,C=_.filterVisible(S.annotations);if(C.length&&w._fullData.length)return _.syncOrAsync([m,E],w)};function E(w){var S=w._fullLayout;_.filterVisible(S.annotations).forEach(function(C){var p=d.getFromId(w,C.xref),F=d.getFromId(w,C.yref),A=d.getRefType(C.xref),O=d.getRefType(C.yref);C._extremes={},A==="range"&&b(C,p),O==="range"&&b(C,F)})}function b(w,S){var C=S._id,p=C.charAt(0),F=w[p],A=w["a"+p],O=w[p+"ref"],$=w["a"+p+"ref"],j=w["_"+p+"padplus"],z=w["_"+p+"padminus"],I={x:1,y:-1}[p]*w[p+"shift"],G=3*w.arrowsize*w.arrowwidth||0,M=G+I,L=G-I,B=3*w.startarrowsize*w.arrowwidth||0,X=B+I,ee=B-I,yt;if($===O){var Ze=d.findExtremes(S,[S.r2c(F)],{ppadplus:M,ppadminus:L}),Re=d.findExtremes(S,[S.r2c(A)],{ppadplus:Math.max(j,X),ppadminus:Math.max(z,ee)});yt={min:[Ze.min[0],Re.min[0]],max:[Ze.max[0],Re.max[0]]}}else X=A?X+A:X,ee=A?ee-A:ee,yt=d.findExtremes(S,[S.r2c(F)],{ppadplus:Math.max(j,M,X),ppadminus:Math.max(z,L,ee)});w._extremes[C]=yt}}),Dx=r((nt,ke)=>{var _=v(),d=Se();ke.exports=function(m,E,b,w){E=E||{};var S=b==="log"&&E.type==="linear",C=b==="linear"&&E.type==="log";if(!(S||C))return;var p=m._fullLayout.annotations,F=E._id.charAt(0),A,O;function $(z){var I=A[z],G=null;S?G=d(I,E.range):G=Math.pow(10,I),_(G)||(G=null),w(O+z,G)}for(var j=0;j<p.length;j++)A=p[j],O="annotations["+j+"].",A[F+"ref"]===E._id&&$(F),A["a"+F+"ref"]===E._id&&$("a"+F)}}),J3=r((nt,ke)=>{var _=qy(),d=lx();ke.exports={moduleType:"component",name:"annotations",layoutAttributes:ix(),supplyLayoutDefaults:vx(),includeBasePlot:k_()("annotations"),calcAutorange:yx(),draw:_.draw,drawOne:_.drawOne,drawRaw:_.drawRaw,hasClickToShow:d.hasClickToShow,onClick:d.onClick,convertCoords:Dx()}}),Q2=r((nt,ke)=>{var _=ix(),d=Om().overrideAll,m=Fm().templatedArray;ke.exports=d(m("annotation",{visible:_.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:_.xanchor,xshift:_.xshift,yanchor:_.yanchor,yshift:_.yshift,text:_.text,textangle:_.textangle,font:_.font,width:_.width,height:_.height,opacity:_.opacity,align:_.align,valign:_.valign,bgcolor:_.bgcolor,bordercolor:_.bordercolor,borderpad:_.borderpad,borderwidth:_.borderwidth,showarrow:_.showarrow,arrowcolor:_.arrowcolor,arrowhead:_.arrowhead,startarrowhead:_.startarrowhead,arrowside:_.arrowside,arrowsize:_.arrowsize,startarrowsize:_.startarrowsize,arrowwidth:_.arrowwidth,standoff:_.standoff,startstandoff:_.startstandoff,hovertext:_.hovertext,hoverlabel:_.hoverlabel,captureevents:_.captureevents}),"calc","from-root")}),Ib=r((nt,ke)=>{var _=et(),d=Im(),m=Dt(),E=Cx(),b=Q2();ke.exports=function(S,C,p){m(S,C,{name:"annotations",handleItemDefaults:w,fullLayout:p.fullLayout})};function w(S,C,p,F){function A(j,z){return _.coerce(S,C,b,j,z)}function O(j){var z=j+"axis",I={_fullLayout:{}};return I._fullLayout[z]=p[z],d.coercePosition(C,I,A,j,j,.5)}var $=A("visible");$&&(E(S,C,F.fullLayout,A),O("x"),O("y"),O("z"),_.noneOrAll(S,C,["x","y","z"]),C.xref="x",C.yref="y",C.zref="z",A("xanchor"),A("yanchor"),A("xshift"),A("yshift"),C.showarrow&&(C.axref="pixel",C.ayref="pixel",A("ax",-10),A("ay",-30),_.noneOrAll(S,C,["ax","ay"])))}}),K3=r((nt,ke)=>{var _=et(),d=Im();ke.exports=function(E){for(var b=E.fullSceneLayout,w=b.annotations,S=0;S<w.length;S++)m(w[S],E);E.fullLayout._infolayer.selectAll(".annotation-"+E.id).remove()};function m(E,b){var w=b.fullSceneLayout,S=w.domain,C=b.fullLayout._size,p={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};E._xa={},_.extendFlat(E._xa,p),d.setConvert(E._xa),E._xa._offset=C.l+S.x[0]*C.w,E._xa.l2p=function(){return .5*(1+E._pdata[0]/E._pdata[3])*C.w*(S.x[1]-S.x[0])},E._ya={},_.extendFlat(E._ya,p),d.setConvert(E._ya),E._ya._offset=C.t+(1-S.y[1])*C.h,E._ya.l2p=function(){return .5*(1-E._pdata[1]/E._pdata[3])*C.h*(S.y[1]-S.y[0])}}}),Uy=r((nt,ke)=>{function _(m,E){var b=[0,0,0,0],w,S;for(w=0;w<4;++w)for(S=0;S<4;++S)b[S]+=m[4*w+S]*E[w];return b}function d(m,E){var b=_(m.projection,_(m.view,_(m.model,[E[0],E[1],E[2],1])));return b}ke.exports=d}),uy=r((nt,ke)=>{var _=qy().drawRaw,d=Uy(),m=["x","y","z"];ke.exports=function(E){for(var b=E.fullSceneLayout,w=E.dataScale,S=b.annotations,C=0;C<S.length;C++){for(var p=S[C],F=!1,A=0;A<3;A++){var O=m[A],$=p[O],j=b[O+"axis"],z=j.r2fraction($);if(z<0||z>1){F=!0;break}}F?E.fullLayout._infolayer.select(".annotation-"+E.id+'[data-index="'+C+'"]').remove():(p._pdata=d(E.glplot.cameraParams,[b.xaxis.r2l(p.x)*w[0],b.yaxis.r2l(p.y)*w[1],b.zaxis.r2l(p.z)*w[2]]),_(E.graphDiv,p,C,E.id,p._xa,p._ya))}}}),Nv=r((nt,ke)=>{var _=y1(),d=et();ke.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:Q2()}}},layoutAttributes:Q2(),handleDefaults:Ib(),includeBasePlot:m,convert:K3(),draw:uy()};function m(E,b){var w=_.subplotsRegistry.gl3d;if(w)for(var S=w.attrRegex,C=Object.keys(E),p=0;p<C.length;p++){var F=C[p];S.test(F)&&(E[F].annotations||[]).length&&(d.pushUnique(b._basePlotModules,w),d.pushUnique(b._subplots.gl3d,F))}}}),Rx=r((nt,ke)=>{var _=ix(),d=ct(),m=r2().line,E=a1().dash,b=se().extendFlat,w=Fm().templatedArray;ax();var S=$t(),C=pm().shapeTexttemplateAttrs,p=S1();ke.exports=w("shape",{visible:b({},S.visible,{editType:"calc+arraydraw"}),showlegend:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},legend:b({},S.legend,{editType:"calc+arraydraw"}),legendgroup:b({},S.legendgroup,{editType:"calc+arraydraw"}),legendgrouptitle:{text:b({},S.legendgrouptitle.text,{editType:"calc+arraydraw"}),font:d({editType:"calc+arraydraw"}),editType:"calc+arraydraw"},legendrank:b({},S.legendrank,{editType:"calc+arraydraw"}),legendwidth:b({},S.legendwidth,{editType:"calc+arraydraw"}),type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above","between"],dflt:"above",editType:"arraydraw"},xref:b({},_.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},x0shift:{valType:"number",dflt:0,min:-1,max:1,editType:"calc"},x1shift:{valType:"number",dflt:0,min:-1,max:1,editType:"calc"},yref:b({},_.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},y0shift:{valType:"number",dflt:0,min:-1,max:1,editType:"calc"},y1shift:{valType:"number",dflt:0,min:-1,max:1,editType:"calc"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:b({},m.color,{editType:"arraydraw"}),width:b({},m.width,{editType:"calc+arraydraw"}),dash:b({},E,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},label:{text:{valType:"string",dflt:"",editType:"arraydraw"},texttemplate:C({},{keys:Object.keys(p)}),font:d({editType:"calc+arraydraw",colorEditType:"arraydraw"}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"],editType:"arraydraw"},textangle:{valType:"angle",dflt:"auto",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],editType:"calc+arraydraw"},padding:{valType:"number",dflt:3,min:0,editType:"arraydraw"},editType:"arraydraw"},editType:"arraydraw"})}),ux=r((nt,ke)=>{var _=et(),d=Im(),m=Dt(),E=Rx(),b=Ue();ke.exports=function(C,p){m(C,p,{name:"shapes",handleItemDefaults:S})};function w(C,p){return C?"bottom":p.indexOf("top")!==-1?"top":p.indexOf("bottom")!==-1?"bottom":"middle"}function S(C,p,F){function A(pt,gt){return _.coerce(C,p,E,pt,gt)}p._isShape=!0;var O=A("visible");if(O){var $=A("showlegend");$&&(A("legend"),A("legendwidth"),A("legendgroup"),A("legendgrouptitle.text"),_.coerceFont(A,"legendgrouptitle.font"),A("legendrank"));var j=A("path"),z=j?"path":"rect",I=A("type",z),G=I!=="path";G&&delete p.path,A("editable"),A("layer"),A("opacity"),A("fillcolor"),A("fillrule");var M=A("line.width");M&&(A("line.color"),A("line.dash"));for(var L=A("xsizemode"),B=A("ysizemode"),X=["x","y"],ee=0;ee<2;ee++){var yt=X[ee],Ze=yt+"anchor",Re=yt==="x"?L:B,Q={_fullLayout:F},xt,tt,ht,it=d.coerceRef(C,p,Q,yt,void 0,"paper"),ut=d.getRefType(it);if(ut==="range"?(xt=d.getFromId(Q,it),xt._shapeIndices.push(p._index),ht=b.rangeToShapePosition(xt),tt=b.shapePositionToRange(xt),(xt.type==="category"||xt.type==="multicategory")&&(A(yt+"0shift"),A(yt+"1shift"))):tt=ht=_.identity,G){var vt=.25,_t=.75,Le=yt+"0",wt=yt+"1",St=C[Le],Ut=C[wt];C[Le]=tt(C[Le],!0),C[wt]=tt(C[wt],!0),Re==="pixel"?(A(Le,0),A(wt,10)):(d.coercePosition(p,Q,A,it,Le,vt),d.coercePosition(p,Q,A,it,wt,_t)),p[Le]=ht(p[Le]),p[wt]=ht(p[wt]),C[Le]=St,C[wt]=Ut}if(Re==="pixel"){var kt=C[Ze];C[Ze]=tt(C[Ze],!0),d.coercePosition(p,Q,A,it,Ze,.25),p[Ze]=ht(p[Ze]),C[Ze]=kt}}G&&_.noneOrAll(C,p,["x0","x1","y0","y1"]);var jt=I==="line",aa,ca;if(G&&(aa=A("label.texttemplate")),aa||(ca=A("label.text")),ca||aa){A("label.textangle");var Cp=A("label.textposition",jt?"middle":"middle center");A("label.xanchor"),A("label.yanchor",w(jt,Cp)),A("label.padding"),_.coerceFont(A,"label.font",F.font)}}}}),Ub=r((nt,ke)=>{var _=Mn(),d=et();function m(E,b){return E?"bottom":b.indexOf("top")!==-1?"top":b.indexOf("bottom")!==-1?"bottom":"middle"}ke.exports=function(E,b,w){w("newshape.visible"),w("newshape.name"),w("newshape.showlegend"),w("newshape.legend"),w("newshape.legendwidth"),w("newshape.legendgroup"),w("newshape.legendgrouptitle.text"),d.coerceFont(w,"newshape.legendgrouptitle.font"),w("newshape.legendrank"),w("newshape.drawdirection"),w("newshape.layer"),w("newshape.fillcolor"),w("newshape.fillrule"),w("newshape.opacity");var S=w("newshape.line.width");if(S){var C=(E||{}).plot_bgcolor||"#FFF";w("newshape.line.color",_.contrast(C)),w("newshape.line.dash")}var p=E.dragmode==="drawline",F=w("newshape.label.text"),A=w("newshape.label.texttemplate");if(F||A){w("newshape.label.textangle");var O=w("newshape.label.textposition",p?"middle":"middle center");w("newshape.label.xanchor"),w("newshape.label.yanchor",m(p,O)),w("newshape.label.padding"),d.coerceFont(w,"newshape.label.font",b.font)}w("activeshape.fillcolor"),w("activeshape.opacity")}}),Bx=r((nt,ke)=>{var _=et(),d=Im(),m=ty(),E=Ue();ke.exports=function(p){var F=p._fullLayout,A=_.filterVisible(F.shapes);if(!(!A.length||!p._fullData.length))for(var O=0;O<A.length;O++){var $=A[O];$._extremes={};var j,z,I=d.getRefType($.xref),G=d.getRefType($.yref);$.xref!=="paper"&&I!=="domain"&&(j=d.getFromId(p,$.xref),z=C(j,$,m.paramIsX),z&&($._extremes[j._id]=d.findExtremes(j,z,b($)))),$.yref!=="paper"&&G!=="domain"&&(j=d.getFromId(p,$.yref),z=C(j,$,m.paramIsY),z&&($._extremes[j._id]=d.findExtremes(j,z,w($))))}};function b(p){return S(p.line.width,p.xsizemode,p.x0,p.x1,p.path,!1)}function w(p){return S(p.line.width,p.ysizemode,p.y0,p.y1,p.path,!0)}function S(p,F,A,O,$,j){var z=p/2,I=j;if(F==="pixel"){var G=$?E.extractPathCoords($,j?m.paramIsY:m.paramIsX):[A,O],M=_.aggNums(Math.max,null,G),L=_.aggNums(Math.min,null,G),B=L<0?Math.abs(L)+z:z,X=M>0?M+z:z;return{ppad:z,ppadplus:I?B:X,ppadminus:I?X:B}}else return{ppad:z}}function C(p,F,A){var O=p._id.charAt(0)==="x"?"x":"y",$=p.type==="category"||p.type==="multicategory",j,z,I=0,G=0,M=$?p.r2c:p.d2c,L=F[O+"sizemode"]==="scaled";if(L?(j=F[O+"0"],z=F[O+"1"],$&&(I=F[O+"0shift"],G=F[O+"1shift"])):(j=F[O+"anchor"],z=F[O+"anchor"]),j!==void 0)return[M(j)+I,M(z)+G];if(F.path){var B=1/0,X=-1/0,ee=F.path.match(m.segmentRE),yt,Ze,Re,Q,xt;for(p.type==="date"&&(M=E.decodeDate(M)),yt=0;yt<ee.length;yt++)Ze=ee[yt],Re=A[Ze.charAt(0)].drawn,Re!==void 0&&(Q=ee[yt].substr(1).match(m.paramRE),!(!Q||Q.length<Re)&&(xt=M(Q[Re]),xt<B&&(B=xt),xt>X&&(X=xt)));if(X>=B)return[B,X]}}}),Q3=r((nt,ke)=>{var _=X0();ke.exports={moduleType:"component",name:"shapes",layoutAttributes:Rx(),supplyLayoutDefaults:ux(),supplyDrawNewShapeDefaults:Ub(),includeBasePlot:k_()("shapes"),calcAutorange:Bx(),draw:_.draw,drawOne:_.drawOne}}),Bb=r((nt,ke)=>{var _=Vm(),d=Fm().templatedArray;ax(),ke.exports=d("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",_.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",_.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})}),E2=r((nt,ke)=>{var _=et(),d=Im(),m=Dt(),E=Bb(),b="images";ke.exports=function(S,C){var p={name:b,handleItemDefaults:w};m(S,C,p)};function w(S,C,p){function F(L,B){return _.coerce(S,C,E,L,B)}var A=F("source"),O=F("visible",!!A);if(!O)return C;F("layer"),F("xanchor"),F("yanchor"),F("sizex"),F("sizey"),F("sizing"),F("opacity");for(var $={_fullLayout:p},j=["x","y"],z=0;z<2;z++){var I=j[z],G=d.coerceRef(S,C,$,I,"paper",void 0);if(G!=="paper"){var M=d.getFromId($,G);M._imgIndices.push(C._index)}d.coercePosition(C,$,F,G,I,0)}return C}}),c2=r((nt,ke)=>{var _=o(),d=Q0(),m=Im(),E=D1(),b=Ag();ke.exports=function(w){var S=w._fullLayout,C=[],p={},F=[],A,O;for(O=0;O<S.images.length;O++){var $=S.images[O];if($.visible)if($.layer==="below"&&$.xref!=="paper"&&$.yref!=="paper"){A=E.ref2id($.xref)+E.ref2id($.yref);var j=S._plots[A];if(!j){F.push($);continue}j.mainplot&&(A=j.mainplot.id),p[A]||(p[A]=[]),p[A].push($)}else $.layer==="above"?C.push($):F.push($)}var z={x:{left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-1/2},right:{sizing:"xMax",offset:-1}},y:{top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-1/2},bottom:{sizing:"YMax",offset:-1}}};function I(Re){var Q=_.select(this);if(this._imgSrc!==Re.source)if(Q.attr("xmlns",b.svg),!w._context.staticPlot||Re.source&&Re.source.slice(0,5)==="data:")Q.attr("xlink:href",Re.source),this._imgSrc=Re.source;else{var xt=new Promise((function(tt){var ht=new Image;this.img=ht,ht.setAttribute("crossOrigin","anonymous"),ht.onerror=it,ht.onload=function(){var ut=document.createElement("canvas");ut.width=this.width,ut.height=this.height;var vt=ut.getContext("2d",{willReadFrequently:!0});vt.drawImage(this,0,0);var _t=ut.toDataURL("image/png");Q.attr("xlink:href",_t),tt()},Q.on("error",it),ht.src=Re.source,this._imgSrc=Re.source;function it(){Q.remove(),tt()}}).bind(this));w._promises.push(xt)}}function G(Re){var Q=_.select(this),xt=m.getFromId(w,Re.xref),tt=m.getFromId(w,Re.yref),ht=m.getRefType(Re.xref)==="domain",it=m.getRefType(Re.yref)==="domain",ut=S._size,vt,_t;xt!==void 0?vt=typeof Re.xref=="string"&&ht?xt._length*Re.sizex:Math.abs(xt.l2p(Re.sizex)-xt.l2p(0)):vt=Re.sizex*ut.w,tt!==void 0?_t=typeof Re.yref=="string"&&it?tt._length*Re.sizey:Math.abs(tt.l2p(Re.sizey)-tt.l2p(0)):_t=Re.sizey*ut.h;var Le=vt*z.x[Re.xanchor].offset,wt=_t*z.y[Re.yanchor].offset,St=z.x[Re.xanchor].sizing+z.y[Re.yanchor].sizing,Ut,kt;switch(xt!==void 0?Ut=typeof Re.xref=="string"&&ht?xt._length*Re.x+xt._offset:xt.r2p(Re.x)+xt._offset:Ut=Re.x*ut.w+ut.l,Ut+=Le,tt!==void 0?kt=typeof Re.yref=="string"&&it?tt._length*(1-Re.y)+tt._offset:tt.r2p(Re.y)+tt._offset:kt=ut.h-Re.y*ut.h+ut.t,kt+=wt,Re.sizing){case"fill":St+=" slice";break;case"stretch":St="none";break}Q.attr({x:Ut,y:kt,width:vt,height:_t,preserveAspectRatio:St,opacity:Re.opacity});var jt=xt&&m.getRefType(Re.xref)!=="domain"?xt._id:"",aa=tt&&m.getRefType(Re.yref)!=="domain"?tt._id:"",ca=jt+aa;d.setClipUrl(Q,ca?"clip"+S._uid+ca:null,w)}function M(Re){return[Re.xref,Re.x,Re.sizex,Re.yref,Re.y,Re.sizey].join("_")}function L(Re,Q){return Re._index-Q._index}var B=S._imageLowerLayer.selectAll("image").data(F,M),X=S._imageUpperLayer.selectAll("image").data(C,M);B.enter().append("image"),X.enter().append("image"),B.exit().remove(),X.exit().remove(),B.each(function(Re){I.bind(this)(Re),G.bind(this)(Re)}),X.each(function(Re){I.bind(this)(Re),G.bind(this)(Re)}),B.sort(L),X.sort(L);var ee=Object.keys(S._plots);for(O=0;O<ee.length;O++){A=ee[O];var yt=S._plots[A];if(yt.imagelayer){var Ze=yt.imagelayer.selectAll("image").data(p[A]||[],M);Ze.enter().append("image"),Ze.exit().remove(),Ze.each(function(Re){I.bind(this)(Re),G.bind(this)(Re)}),Ze.sort(L)}}}}),jb=r((nt,ke)=>{var _=v(),d=Se();ke.exports=function(m,E,b,w){E=E||{};var S=b==="log"&&E.type==="linear",C=b==="linear"&&E.type==="log";if(S||C){for(var p=m._fullLayout.images,F=E._id.charAt(0),A,O,$=0;$<p.length;$++)if(A=p[$],O="images["+$+"].",A[F+"ref"]===E._id){var j=A[F],z=A["size"+F],I=null,G=null;if(S){I=d(j,E.range);var M=z/Math.pow(10,I)/2;G=2*Math.log(M+Math.sqrt(1+M*M))/Math.LN10}else I=Math.pow(10,j),G=I*(Math.pow(10,z/2)-Math.pow(10,-z/2));_(I)?_(G)||(G=null):(I=null,G=null),w(O+F,I),w(O+"size"+F,G)}}}}),e_=r((nt,ke)=>{ke.exports={moduleType:"component",name:"images",layoutAttributes:Bb(),supplyLayoutDefaults:E2(),includeBasePlot:k_()("images"),draw:c2(),convertCoords:jb()}}),t_=r((nt,ke)=>{ke.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"",right:"",up:"",down:""}}}),jx=r((nt,ke)=>{var _=ct(),d=Lp(),m=se().extendFlat,E=Om().overrideAll,b=l1(),w=Fm().templatedArray,S=w("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});ke.exports=E(w("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:S,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:m(b({editType:"arraydraw"}),{}),font:_({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:d.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")}),Nx=r((nt,ke)=>{var _=et(),d=Dt(),m=jx(),E=t_(),b=E.name,w=m.buttons;ke.exports=function(p,F){var A={name:b,handleItemDefaults:S};d(p,F,A)};function S(p,F,A){function O(z,I){return _.coerce(p,F,m,z,I)}var $=d(p,F,{name:"buttons",handleItemDefaults:C}),j=O("visible",$.length>0);j&&(O("active"),O("direction"),O("type"),O("showactive"),O("x"),O("y"),_.noneOrAll(p,F,["x","y"]),O("xanchor"),O("yanchor"),O("pad.t"),O("pad.r"),O("pad.b"),O("pad.l"),_.coerceFont(O,"font",A.font),O("bgcolor",A.paper_bgcolor),O("bordercolor"),O("borderwidth"))}function C(p,F){function A($,j){return _.coerce(p,F,w,$,j)}var O=A("visible",p.method==="skip"||Array.isArray(p.args));O&&(A("method"),A("args"),A("args2"),A("label"),A("execute"))}}),Vx=r((nt,ke)=>{ke.exports=b;var _=o(),d=Mn(),m=Q0(),E=et();function b(w,S,C){this.gd=w,this.container=S,this.id=C,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}b.barWidth=2,b.barLength=20,b.barRadius=2,b.barPad=1,b.barColor="#808BA4",b.prototype.enable=function(w,S,C){var p=this.gd._fullLayout,F=p.width,A=p.height;this.position=w;var O=this.position.l,$=this.position.w,j=this.position.t,z=this.position.h,I=this.position.direction,G=I==="down",M=I==="left",L=I==="right",B=I==="up",X=$,ee=z,yt,Ze,Re,Q;!G&&!M&&!L&&!B&&(this.position.direction="down",G=!0);var xt=G||B;xt?(yt=O,Ze=yt+X,G?(Re=j,Q=Math.min(Re+ee,A),ee=Q-Re):(Q=j+ee,Re=Math.max(Q-ee,0),ee=Q-Re)):(Re=j,Q=Re+ee,M?(Ze=O+X,yt=Math.max(Ze-X,0),X=Ze-yt):(yt=O,Ze=Math.min(yt+X,F),X=Ze-yt)),this._box={l:yt,t:Re,w:X,h:ee};var tt=$>X,ht=b.barLength+2*b.barPad,it=b.barWidth+2*b.barPad,ut=O,vt=j+z;vt+it>A&&(vt=A-it);var _t=this.container.selectAll("rect.scrollbar-horizontal").data(tt?[0]:[]);_t.exit().on(".drag",null).remove(),_t.enter().append("rect").classed("scrollbar-horizontal",!0).call(d.fill,b.barColor),tt?(this.hbar=_t.attr({rx:b.barRadius,ry:b.barRadius,x:ut,y:vt,width:ht,height:it}),this._hbarXMin=ut+ht/2,this._hbarTranslateMax=X-ht):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var Le=z>ee,wt=b.barWidth+2*b.barPad,St=b.barLength+2*b.barPad,Ut=O+$,kt=j;Ut+wt>F&&(Ut=F-wt);var jt=this.container.selectAll("rect.scrollbar-vertical").data(Le?[0]:[]);jt.exit().on(".drag",null).remove(),jt.enter().append("rect").classed("scrollbar-vertical",!0).call(d.fill,b.barColor),Le?(this.vbar=jt.attr({rx:b.barRadius,ry:b.barRadius,x:Ut,y:kt,width:wt,height:St}),this._vbarYMin=kt+St/2,this._vbarTranslateMax=ee-St):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var aa=this.id,ca=yt-.5,Cp=Le?Ze+wt+.5:Ze+.5,pt=Re-.5,gt=tt?Q+it+.5:Q+.5,te=p._topdefs.selectAll("#"+aa).data(tt||Le?[0]:[]);if(te.exit().remove(),te.enter().append("clipPath").attr("id",aa).append("rect"),tt||Le?(this._clipRect=te.select("rect").attr({x:Math.floor(ca),y:Math.floor(pt),width:Math.ceil(Cp)-Math.floor(ca),height:Math.ceil(gt)-Math.floor(pt)}),this.container.call(m.setClipUrl,aa,this.gd),this.bg.attr({x:O,y:j,width:$,height:z})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(m.setClipUrl,null),delete this._clipRect),tt||Le){var Et=_.behavior.drag().on("dragstart",function(){_.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(Et);var zt=_.behavior.drag().on("dragstart",function(){_.event.sourceEvent.preventDefault(),_.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));tt&&this.hbar.on(".drag",null).call(zt),Le&&this.vbar.on(".drag",null).call(zt)}this.setTranslate(S,C)},b.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(m.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},b.prototype._onBoxDrag=function(){var w=this.translateX,S=this.translateY;this.hbar&&(w-=_.event.dx),this.vbar&&(S-=_.event.dy),this.setTranslate(w,S)},b.prototype._onBoxWheel=function(){var w=this.translateX,S=this.translateY;this.hbar&&(w+=_.event.deltaY),this.vbar&&(S+=_.event.deltaY),this.setTranslate(w,S)},b.prototype._onBarDrag=function(){var w=this.translateX,S=this.translateY;if(this.hbar){var C=w+this._hbarXMin,p=C+this._hbarTranslateMax,F=E.constrain(_.event.x,C,p),A=(F-C)/(p-C),O=this.position.w-this._box.w;w=A*O}if(this.vbar){var $=S+this._vbarYMin,j=$+this._vbarTranslateMax,z=E.constrain(_.event.y,$,j),I=(z-$)/(j-$),G=this.position.h-this._box.h;S=I*G}this.setTranslate(w,S)},b.prototype.setTranslate=function(w,S){var C=this.position.w-this._box.w,p=this.position.h-this._box.h;if(w=E.constrain(w||0,0,C),S=E.constrain(S||0,0,p),this.translateX=w,this.translateY=S,this.container.call(m.setTranslate,this._box.l-this.position.l-w,this._box.t-this.position.t-S),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+w-.5),y:Math.floor(this.position.t+S-.5)}),this.hbar){var F=w/C;this.hbar.call(m.setTranslate,w+F*this._hbarTranslateMax,S)}if(this.vbar){var A=S/p;this.vbar.call(m.setTranslate,w,S+A*this._vbarTranslateMax)}}}),Lx=r((nt,ke)=>{var _=o(),d=cg(),m=Mn(),E=Q0(),b=et(),w=G1(),S=Fm().arrayEditor,C=K1().LINE_SPACING,p=t_(),F=Vx();ke.exports=function(ht){var it=ht._fullLayout,ut=b.filterVisible(it[p.name]);function vt(aa){d.autoMargin(ht,Q(aa))}var _t=it._menulayer.selectAll("g."+p.containerClassName).data(ut.length>0?[0]:[]);if(_t.enter().append("g").classed(p.containerClassName,!0).style("cursor","pointer"),_t.exit().each(function(){_.select(this).selectAll("g."+p.headerGroupClassName).each(vt)}).remove(),ut.length!==0){var Le=_t.selectAll("g."+p.headerGroupClassName).data(ut,A);Le.enter().append("g").classed(p.headerGroupClassName,!0);for(var wt=b.ensureSingle(_t,"g",p.dropdownButtonGroupClassName,function(aa){aa.style("pointer-events","all")}),St=0;St<ut.length;St++){var Ut=ut[St];Re(ht,Ut)}var kt="updatemenus"+it._uid,jt=new F(ht,wt,kt);Le.enter().size()&&(wt.node().parentNode.appendChild(wt.node()),wt.call(tt)),Le.exit().each(function(aa){wt.call(tt),vt(aa)}).remove(),Le.each(function(aa){var ca=_.select(this),Cp=aa.type==="dropdown"?wt:null;d.manageCommandObserver(ht,aa,aa.buttons,function(pt){j(ht,aa,aa.buttons[pt.index],ca,Cp,jt,pt.index,!0)}),aa.type==="dropdown"?(z(ht,ca,wt,jt,aa),$(wt,aa)&&I(ht,ca,wt,jt,aa)):I(ht,ca,null,null,aa)})}};function A(ht){return ht._index}function O(ht){return+ht.attr(p.menuIndexAttrName)==-1}function $(ht,it){return+ht.attr(p.menuIndexAttrName)===it._index}function j(ht,it,ut,vt,_t,Le,wt,St){it.active=wt,S(ht.layout,p.name,it).applyUpdate("active",wt),it.type==="buttons"?I(ht,vt,null,null,it):it.type==="dropdown"&&(_t.attr(p.menuIndexAttrName,"-1"),z(ht,vt,_t,Le,it),St||I(ht,vt,_t,Le,it))}function z(ht,it,ut,vt,_t){var Le=b.ensureSingle(it,"g",p.headerClassName,function(ca){ca.style("pointer-events","all")}),wt=_t._dims,St=_t.active,Ut=_t.buttons[St]||p.blankHeaderOpts,kt={y:_t.pad.t,yPad:0,x:_t.pad.l,xPad:0,index:0},jt={width:wt.headerWidth,height:wt.headerHeight};Le.call(L,_t,Ut,ht).call(xt,_t,kt,jt);var aa=b.ensureSingle(it,"text",p.headerArrowClassName,function(ca){ca.attr("text-anchor","end").call(E.font,_t.font).text(p.arrowSymbol[_t.direction])});aa.attr({x:wt.headerWidth-p.arrowOffsetX+_t.pad.l,y:wt.headerHeight/2+p.textOffsetY+_t.pad.t}),Le.on("click",function(){ut.call(tt,String($(ut,_t)?-1:_t._index)),I(ht,it,ut,vt,_t)}),Le.on("mouseover",function(){Le.call(yt)}),Le.on("mouseout",function(){Le.call(Ze,_t)}),E.setTranslate(it,wt.lx,wt.ly)}function I(ht,it,ut,vt,_t){ut||(ut=it,ut.attr("pointer-events","all"));var Le=!O(ut)||_t.type==="buttons"?_t.buttons:[],wt=_t.type==="dropdown"?p.dropdownButtonClassName:p.buttonClassName,St=ut.selectAll("g."+wt).data(b.filterVisible(Le)),Ut=St.enter().append("g").classed(wt,!0),kt=St.exit();_t.type==="dropdown"?(Ut.attr("opacity","0").transition().attr("opacity","1"),kt.transition().attr("opacity","0").remove()):kt.remove();var jt=0,aa=0,ca=_t._dims,Cp=["up","down"].indexOf(_t.direction)!==-1;_t.type==="dropdown"&&(Cp?aa=ca.headerHeight+p.gapButtonHeader:jt=ca.headerWidth+p.gapButtonHeader),_t.type==="dropdown"&&_t.direction==="up"&&(aa=-p.gapButtonHeader+p.gapButton-ca.openHeight),_t.type==="dropdown"&&_t.direction==="left"&&(jt=-p.gapButtonHeader+p.gapButton-ca.openWidth);var pt={x:ca.lx+jt+_t.pad.l,y:ca.ly+aa+_t.pad.t,yPad:p.gapButton,xPad:p.gapButton,index:0},gt={l:pt.x+_t.borderwidth,t:pt.y+_t.borderwidth};St.each(function(te,Et){var zt=_.select(this);zt.call(L,_t,te,ht).call(xt,_t,pt),zt.on("click",function(){_.event.defaultPrevented||(te.execute&&(te.args2&&_t.active===Et?(j(ht,_t,te,it,ut,vt,-1),d.executeAPICommand(ht,te.method,te.args2)):(j(ht,_t,te,it,ut,vt,Et),d.executeAPICommand(ht,te.method,te.args))),ht.emit("plotly_buttonclicked",{menu:_t,button:te,active:_t.active}))}),zt.on("mouseover",function(){zt.call(yt)}),zt.on("mouseout",function(){zt.call(Ze,_t),St.call(ee,_t)})}),St.call(ee,_t),Cp?(gt.w=Math.max(ca.openWidth,ca.headerWidth),gt.h=pt.y-gt.t):(gt.w=pt.x-gt.l,gt.h=Math.max(ca.openHeight,ca.headerHeight)),gt.direction=_t.direction,vt&&(St.size()?G(ht,it,ut,vt,_t,gt):M(vt))}function G(ht,it,ut,vt,_t,Le){var wt=_t.direction,St=wt==="up"||wt==="down",Ut=_t._dims,kt=_t.active,jt,aa,ca;if(St)for(aa=0,ca=0;ca<kt;ca++)aa+=Ut.heights[ca]+p.gapButton;else for(jt=0,ca=0;ca<kt;ca++)jt+=Ut.widths[ca]+p.gapButton;vt.enable(Le,jt,aa),vt.hbar&&vt.hbar.attr("opacity","0").transition().attr("opacity","1"),vt.vbar&&vt.vbar.attr("opacity","0").transition().attr("opacity","1")}function M(ht){var it=!!ht.hbar,ut=!!ht.vbar;it&&ht.hbar.transition().attr("opacity","0").each("end",function(){it=!1,ut||ht.disable()}),ut&&ht.vbar.transition().attr("opacity","0").each("end",function(){ut=!1,it||ht.disable()})}function L(ht,it,ut,vt){ht.call(B,it).call(X,it,ut,vt)}function B(ht,it){var ut=b.ensureSingle(ht,"rect",p.itemRectClassName,function(vt){vt.attr({rx:p.rx,ry:p.ry,"shape-rendering":"crispEdges"})});ut.call(m.stroke,it.bordercolor).call(m.fill,it.bgcolor).style("stroke-width",it.borderwidth+"px")}function X(ht,it,ut,vt){var _t=b.ensureSingle(ht,"text",p.itemTextClassName,function(St){St.attr({"text-anchor":"start","data-notex":1})}),Le=ut.label,wt=vt._fullLayout._meta;wt&&(Le=b.templateString(Le,wt)),_t.call(E.font,it.font).text(Le).call(w.convertToTspans,vt)}function ee(ht,it){var ut=it.active;ht.each(function(vt,_t){var Le=_.select(this);_t===ut&&it.showactive&&Le.select("rect."+p.itemRectClassName).call(m.fill,p.activeColor)})}function yt(ht){ht.select("rect."+p.itemRectClassName).call(m.fill,p.hoverColor)}function Ze(ht,it){ht.select("rect."+p.itemRectClassName).call(m.fill,it.bgcolor)}function Re(ht,it){var ut=it._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},vt=E.tester.selectAll("g."+p.dropdownButtonClassName).data(b.filterVisible(it.buttons));vt.enter().append("g").classed(p.dropdownButtonClassName,!0);var _t=["up","down"].indexOf(it.direction)!==-1;vt.each(function(jt,aa){var ca=_.select(this);ca.call(L,it,jt,ht);var Cp=ca.select("."+p.itemTextClassName),pt=Cp.node()&&E.bBox(Cp.node()).width,gt=Math.max(pt+p.textPadX,p.minWidth),te=it.font.size*C,Et=w.lineCount(Cp),zt=Math.max(te*Et,p.minHeight)+p.textOffsetY;zt=Math.ceil(zt),gt=Math.ceil(gt),ut.widths[aa]=gt,ut.heights[aa]=zt,ut.height1=Math.max(ut.height1,zt),ut.width1=Math.max(ut.width1,gt),_t?(ut.totalWidth=Math.max(ut.totalWidth,gt),ut.openWidth=ut.totalWidth,ut.totalHeight+=zt+p.gapButton,ut.openHeight+=zt+p.gapButton):(ut.totalWidth+=gt+p.gapButton,ut.openWidth+=gt+p.gapButton,ut.totalHeight=Math.max(ut.totalHeight,zt),ut.openHeight=ut.totalHeight)}),_t?ut.totalHeight-=p.gapButton:ut.totalWidth-=p.gapButton,ut.headerWidth=ut.width1+p.arrowPadX,ut.headerHeight=ut.height1,it.type==="dropdown"&&(_t?(ut.width1+=p.arrowPadX,ut.totalHeight=ut.height1):ut.totalWidth=ut.width1,ut.totalWidth+=p.arrowPadX),vt.remove();var Le=ut.totalWidth+it.pad.l+it.pad.r,wt=ut.totalHeight+it.pad.t+it.pad.b,St=ht._fullLayout._size;ut.lx=St.l+St.w*it.x,ut.ly=St.t+St.h*(1-it.y);var Ut="left";b.isRightAnchor(it)&&(ut.lx-=Le,Ut="right"),b.isCenterAnchor(it)&&(ut.lx-=Le/2,Ut="center");var kt="top";b.isBottomAnchor(it)&&(ut.ly-=wt,kt="bottom"),b.isMiddleAnchor(it)&&(ut.ly-=wt/2,kt="middle"),ut.totalWidth=Math.ceil(ut.totalWidth),ut.totalHeight=Math.ceil(ut.totalHeight),ut.lx=Math.round(ut.lx),ut.ly=Math.round(ut.ly),d.autoMargin(ht,Q(it),{x:it.x,y:it.y,l:Le*({right:1,center:.5}[Ut]||0),r:Le*({left:1,center:.5}[Ut]||0),b:wt*({top:1,middle:.5}[kt]||0),t:wt*({bottom:1,middle:.5}[kt]||0)})}function Q(ht){return p.autoMarginIdRoot+ht._index}function xt(ht,it,ut,vt){vt=vt||{};var _t=ht.select("."+p.itemRectClassName),Le=ht.select("."+p.itemTextClassName),wt=it.borderwidth,St=ut.index,Ut=it._dims;E.setTranslate(ht,wt+ut.x,wt+ut.y);var kt=["up","down"].indexOf(it.direction)!==-1,jt=vt.height||(kt?Ut.heights[St]:Ut.height1);_t.attr({x:0,y:0,width:vt.width||(kt?Ut.width1:Ut.widths[St]),height:jt});var aa=it.font.size*C,ca=w.lineCount(Le),Cp=(ca-1)*aa/2;w.positionText(Le,p.textOffsetX,jt/2-Cp+p.textOffsetY),kt?ut.y+=Ut.heights[St]+ut.yPad:ut.x+=Ut.widths[St]+ut.xPad,ut.index++}function tt(ht,it){ht.attr(p.menuIndexAttrName,it||"-1").selectAll("g."+p.dropdownButtonClassName).remove()}}),Vb=r((nt,ke)=>{var _=t_();ke.exports={moduleType:"component",name:_.name,layoutAttributes:jx(),supplyLayoutDefaults:Nx(),draw:Lx()}}),S2=r((nt,ke)=>{ke.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}}),h2=r((nt,ke)=>{var _=ct(),d=l1(),m=se().extendDeepAll,E=Om().overrideAll,b=r1(),w=Fm().templatedArray,S=S2(),C=w("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});ke.exports=E(w("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:C,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:m(d({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:b.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:_({})},font:_({}),activebgcolor:{valType:"color",dflt:S.gripBgActiveColor},bgcolor:{valType:"color",dflt:S.railBgColor},bordercolor:{valType:"color",dflt:S.railBorderColor},borderwidth:{valType:"number",min:0,dflt:S.railBorderWidth},ticklen:{valType:"number",min:0,dflt:S.tickLength},tickcolor:{valType:"color",dflt:S.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:S.minorTickLength}}),"arraydraw","from-root")}),H_=r((nt,ke)=>{var _=et(),d=Dt(),m=h2(),E=S2(),b=E.name,w=m.steps;ke.exports=function(p,F){d(p,F,{name:b,handleItemDefaults:S})};function S(p,F,A){function O(B,X){return _.coerce(p,F,m,B,X)}for(var $=d(p,F,{name:"steps",handleItemDefaults:C}),j=0,z=0;z<$.length;z++)$[z].visible&&j++;var I;if(j<2?I=F.visible=!1:I=O("visible"),!!I){F._stepCount=j;var G=F._visibleSteps=_.filterVisible($),M=O("active");($[M]||{}).visible||(F.active=G[0]._index),O("x"),O("y"),_.noneOrAll(p,F,["x","y"]),O("xanchor"),O("yanchor"),O("len"),O("lenmode"),O("pad.t"),O("pad.r"),O("pad.b"),O("pad.l"),_.coerceFont(O,"font",A.font);var L=O("currentvalue.visible");L&&(O("currentvalue.xanchor"),O("currentvalue.prefix"),O("currentvalue.suffix"),O("currentvalue.offset"),_.coerceFont(O,"currentvalue.font",F.font)),O("transition.duration"),O("transition.easing"),O("bgcolor"),O("activebgcolor"),O("bordercolor"),O("borderwidth"),O("ticklen"),O("tickwidth"),O("tickcolor"),O("minorticklen")}}function C(p,F){function A(j,z){return _.coerce(p,F,w,j,z)}var O;if(p.method!=="skip"&&!Array.isArray(p.args)?O=F.visible=!1:O=A("visible"),O){A("method"),A("args");var $=A("label","step-"+F._index);A("value",$),A("execute")}}}),d2=r((nt,ke)=>{var _=o(),d=cg(),m=Mn(),E=Q0(),b=et(),w=b.strTranslate,S=G1(),C=Fm().arrayEditor,p=S2(),F=K1(),A=F.LINE_SPACING,O=F.FROM_TL,$=F.FROM_BR;ke.exports=function(_t){var Le=_t._context.staticPlot,wt=_t._fullLayout,St=z(wt,_t),Ut=wt._infolayer.selectAll("g."+p.containerClassName).data(St.length>0?[0]:[]);Ut.enter().append("g").classed(p.containerClassName,!0).style("cursor",Le?null:"ew-resize");function kt(Cp){Cp._commandObserver&&(Cp._commandObserver.remove(),delete Cp._commandObserver),d.autoMargin(_t,j(Cp))}if(Ut.exit().each(function(){_.select(this).selectAll("g."+p.groupClassName).each(kt)}).remove(),St.length!==0){var jt=Ut.selectAll("g."+p.groupClassName).data(St,I);jt.enter().append("g").classed(p.groupClassName,!0),jt.exit().each(kt).remove();for(var aa=0;aa<St.length;aa++){var ca=St[aa];G(_t,ca)}jt.each(function(Cp){var pt=_.select(this);xt(Cp),d.manageCommandObserver(_t,Cp,Cp._visibleSteps,function(gt){var te=pt.data()[0];te.active!==gt.index&&(te._dragging||Ze(_t,pt,te,gt.index,!1,!0))}),M(_t,_.select(this),Cp)})}};function j(_t){return p.autoMarginIdRoot+_t._index}function z(_t,Le){for(var wt=_t[p.name],St=[],Ut=0;Ut<wt.length;Ut++){var kt=wt[Ut];kt.visible&&(kt._gd=Le,St.push(kt))}return St}function I(_t){return _t._index}function G(_t,Le){var wt=E.tester.selectAll("g."+p.labelGroupClass).data(Le._visibleSteps);wt.enter().append("g").classed(p.labelGroupClass,!0);var St=0,Ut=0;wt.each(function(zt){var rt=_.select(this),Z=X(rt,{step:zt},Le),we=Z.node();if(we){var ot=E.bBox(we);Ut=Math.max(Ut,ot.height),St=Math.max(St,ot.width)}}),wt.remove();var kt=Le._dims={};kt.inputAreaWidth=Math.max(p.railWidth,p.gripHeight);var jt=_t._fullLayout._size;kt.lx=jt.l+jt.w*Le.x,kt.ly=jt.t+jt.h*(1-Le.y),Le.lenmode==="fraction"?kt.outerLength=Math.round(jt.w*Le.len):kt.outerLength=Le.len,kt.inputAreaStart=0,kt.inputAreaLength=Math.round(kt.outerLength-Le.pad.l-Le.pad.r);var aa=kt.inputAreaLength-2*p.stepInset,ca=aa/(Le._stepCount-1),Cp=St+p.labelPadding;if(kt.labelStride=Math.max(1,Math.ceil(Cp/ca)),kt.labelHeight=Ut,kt.currentValueMaxWidth=0,kt.currentValueHeight=0,kt.currentValueTotalHeight=0,kt.currentValueMaxLines=1,Le.currentvalue.visible){var pt=E.tester.append("g");wt.each(function(zt){var rt=L(pt,Le,zt.label),Z=rt.node()&&E.bBox(rt.node())||{width:0,height:0},we=S.lineCount(rt);kt.currentValueMaxWidth=Math.max(kt.currentValueMaxWidth,Math.ceil(Z.width)),kt.currentValueHeight=Math.max(kt.currentValueHeight,Math.ceil(Z.height)),kt.currentValueMaxLines=Math.max(kt.currentValueMaxLines,we)}),kt.currentValueTotalHeight=kt.currentValueHeight+Le.currentvalue.offset,pt.remove()}kt.height=kt.currentValueTotalHeight+p.tickOffset+Le.ticklen+p.labelOffset+kt.labelHeight+Le.pad.t+Le.pad.b;var gt="left";b.isRightAnchor(Le)&&(kt.lx-=kt.outerLength,gt="right"),b.isCenterAnchor(Le)&&(kt.lx-=kt.outerLength/2,gt="center");var te="top";b.isBottomAnchor(Le)&&(kt.ly-=kt.height,te="bottom"),b.isMiddleAnchor(Le)&&(kt.ly-=kt.height/2,te="middle"),kt.outerLength=Math.ceil(kt.outerLength),kt.height=Math.ceil(kt.height),kt.lx=Math.round(kt.lx),kt.ly=Math.round(kt.ly);var Et={y:Le.y,b:kt.height*$[te],t:kt.height*O[te]};Le.lenmode==="fraction"?(Et.l=0,Et.xl=Le.x-Le.len*O[gt],Et.r=0,Et.xr=Le.x+Le.len*$[gt]):(Et.x=Le.x,Et.l=kt.outerLength*O[gt],Et.r=kt.outerLength*$[gt]),d.autoMargin(_t,j(Le),Et)}function M(_t,Le,wt){(wt.steps[wt.active]||{}).visible||(wt.active=wt._visibleSteps[0]._index),Le.call(L,wt).call(vt,wt).call(ee,wt).call(Q,wt).call(ut,_t,wt).call(B,_t,wt);var St=wt._dims;E.setTranslate(Le,St.lx+wt.pad.l,St.ly+wt.pad.t),Le.call(tt,wt,!1),Le.call(L,wt)}function L(_t,Le,wt){if(Le.currentvalue.visible){var St=Le._dims,Ut,kt;switch(Le.currentvalue.xanchor){case"right":Ut=St.inputAreaLength-p.currentValueInset-St.currentValueMaxWidth,kt="left";break;case"center":Ut=St.inputAreaLength*.5,kt="middle";break;default:Ut=p.currentValueInset,kt="left"}var jt=b.ensureSingle(_t,"text",p.labelClass,function(te){te.attr({"text-anchor":kt,"data-notex":1})}),aa=Le.currentvalue.prefix?Le.currentvalue.prefix:"";if(typeof wt=="string")aa+=wt;else{var ca=Le.steps[Le.active].label,Cp=Le._gd._fullLayout._meta;Cp&&(ca=b.templateString(ca,Cp)),aa+=ca}Le.currentvalue.suffix&&(aa+=Le.currentvalue.suffix),jt.call(E.font,Le.currentvalue.font).text(aa).call(S.convertToTspans,Le._gd);var pt=S.lineCount(jt),gt=(St.currentValueMaxLines+1-pt)*Le.currentvalue.font.size*A;return S.positionText(jt,Ut,gt),jt}}function B(_t,Le,wt){var St=b.ensureSingle(_t,"rect",p.gripRectClass,function(Ut){Ut.call(Re,Le,_t,wt).style("pointer-events","all")});St.attr({width:p.gripWidth,height:p.gripHeight,rx:p.gripRadius,ry:p.gripRadius}).call(m.stroke,wt.bordercolor).call(m.fill,wt.bgcolor).style("stroke-width",wt.borderwidth+"px")}function X(_t,Le,wt){var St=b.ensureSingle(_t,"text",p.labelClass,function(jt){jt.attr({"text-anchor":"middle","data-notex":1})}),Ut=Le.step.label,kt=wt._gd._fullLayout._meta;return kt&&(Ut=b.templateString(Ut,kt)),St.call(E.font,wt.font).text(Ut).call(S.convertToTspans,wt._gd),St}function ee(_t,Le){var wt=b.ensureSingle(_t,"g",p.labelsClass),St=Le._dims,Ut=wt.selectAll("g."+p.labelGroupClass).data(St.labelSteps);Ut.enter().append("g").classed(p.labelGroupClass,!0),Ut.exit().remove(),Ut.each(function(kt){var jt=_.select(this);jt.call(X,kt,Le),E.setTranslate(jt,ht(Le,kt.fraction),p.tickOffset+Le.ticklen+Le.font.size*A+p.labelOffset+St.currentValueTotalHeight)})}function yt(_t,Le,wt,St,Ut){var kt=Math.round(St*(wt._stepCount-1)),jt=wt._visibleSteps[kt]._index;jt!==wt.active&&Ze(_t,Le,wt,jt,!0,Ut)}function Ze(_t,Le,wt,St,Ut,kt){var jt=wt.active;wt.active=St,C(_t.layout,p.name,wt).applyUpdate("active",St);var aa=wt.steps[wt.active];Le.call(tt,wt,kt),Le.call(L,wt),_t.emit("plotly_sliderchange",{slider:wt,step:wt.steps[wt.active],interaction:Ut,previousActive:jt}),aa&&aa.method&&Ut&&(Le._nextMethod?(Le._nextMethod.step=aa,Le._nextMethod.doCallback=Ut,Le._nextMethod.doTransition=kt):(Le._nextMethod={step:aa,doCallback:Ut,doTransition:kt},Le._nextMethodRaf=window.requestAnimationFrame(function(){var ca=Le._nextMethod.step;ca.method&&(ca.execute&&d.executeAPICommand(_t,ca.method,ca.args),Le._nextMethod=null,Le._nextMethodRaf=null)})))}function Re(_t,Le,wt){if(Le._context.staticPlot)return;var St=wt.node(),Ut=_.select(Le);function kt(){return wt.data()[0]}function jt(){var aa=kt();Le.emit("plotly_sliderstart",{slider:aa});var ca=wt.select("."+p.gripRectClass);_.event.stopPropagation(),_.event.preventDefault(),ca.call(m.fill,aa.activebgcolor);var Cp=it(aa,_.mouse(St)[0]);yt(Le,wt,aa,Cp,!0),aa._dragging=!0;function pt(){var te=kt(),Et=it(te,_.mouse(St)[0]);yt(Le,wt,te,Et,!1)}Ut.on("mousemove",pt),Ut.on("touchmove",pt);function gt(){var te=kt();te._dragging=!1,ca.call(m.fill,te.bgcolor),Ut.on("mouseup",null),Ut.on("mousemove",null),Ut.on("touchend",null),Ut.on("touchmove",null),Le.emit("plotly_sliderend",{slider:te,step:te.steps[te.active]})}Ut.on("mouseup",gt),Ut.on("touchend",gt)}_t.on("mousedown",jt),_t.on("touchstart",jt)}function Q(_t,Le){var wt=_t.selectAll("rect."+p.tickRectClass).data(Le._visibleSteps),St=Le._dims;wt.enter().append("rect").classed(p.tickRectClass,!0),wt.exit().remove(),wt.attr({width:Le.tickwidth+"px","shape-rendering":"crispEdges"}),wt.each(function(Ut,kt){var jt=kt%St.labelStride===0,aa=_.select(this);aa.attr({height:jt?Le.ticklen:Le.minorticklen}).call(m.fill,Le.tickcolor),E.setTranslate(aa,ht(Le,kt/(Le._stepCount-1))-.5*Le.tickwidth,(jt?p.tickOffset:p.minorTickOffset)+St.currentValueTotalHeight)})}function xt(_t){var Le=_t._dims;Le.labelSteps=[];for(var wt=_t._stepCount,St=0;St<wt;St+=Le.labelStride)Le.labelSteps.push({fraction:St/(wt-1),step:_t._visibleSteps[St]})}function tt(_t,Le,wt){for(var St=_t.select("rect."+p.gripRectClass),Ut=0,kt=0;kt<Le._stepCount;kt++)if(Le._visibleSteps[kt]._index===Le.active){Ut=kt;break}var jt=ht(Le,Ut/(Le._stepCount-1));if(!Le._invokingCommand){var aa=St;wt&&Le.transition.duration>0&&(aa=aa.transition().duration(Le.transition.duration).ease(Le.transition.easing)),aa.attr("transform",w(jt-p.gripWidth*.5,Le._dims.currentValueTotalHeight))}}function ht(_t,Le){var wt=_t._dims;return wt.inputAreaStart+p.stepInset+(wt.inputAreaLength-2*p.stepInset)*Math.min(1,Math.max(0,Le))}function it(_t,Le){var wt=_t._dims;return Math.min(1,Math.max(0,(Le-p.stepInset-wt.inputAreaStart)/(wt.inputAreaLength-2*p.stepInset-2*wt.inputAreaStart)))}function ut(_t,Le,wt){var St=wt._dims,Ut=b.ensureSingle(_t,"rect",p.railTouchRectClass,function(kt){kt.call(Re,Le,_t,wt).style("pointer-events","all")});Ut.attr({width:St.inputAreaLength,height:Math.max(St.inputAreaWidth,p.tickOffset+wt.ticklen+St.labelHeight)}).call(m.fill,wt.bgcolor).attr("opacity",0),E.setTranslate(Ut,0,St.currentValueTotalHeight)}function vt(_t,Le){var wt=Le._dims,St=wt.inputAreaLength-p.railInset*2,Ut=b.ensureSingle(_t,"rect",p.railRectClass);Ut.attr({width:St,height:p.railWidth,rx:p.railRadius,ry:p.railRadius,"shape-rendering":"crispEdges"}).call(m.stroke,Le.bordercolor).call(m.fill,Le.bgcolor).style("stroke-width",Le.borderwidth+"px"),E.setTranslate(Ut,p.railInset,(wt.inputAreaWidth-p.railWidth)*.5+wt.currentValueTotalHeight)}}),By=r((nt,ke)=>{var _=S2();ke.exports={moduleType:"component",name:_.name,layoutAttributes:h2(),supplyLayoutDefaults:H_(),draw:d2()}}),T2=r((nt,ke)=>{var _=Lp();ke.exports={bgcolor:{valType:"color",dflt:_.background,editType:"plot"},bordercolor:{valType:"color",dflt:_.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}}),Hb=r((nt,ke)=>{ke.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}}),Gb=r((nt,ke)=>{ke.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}}),l5=r(nt=>{var ke=D1(),_=G1(),d=Gb(),m=K1().LINE_SPACING,E=d.name;function b(w){var S=w&&w[E];return S&&S.visible}nt.isVisible=b,nt.makeData=function(w){for(var S=ke.list({_fullLayout:w},"x",!0),C=w.margin,p=[],F=0;F<S.length;F++){var A=S[F];if(b(A)){p.push(A);var O=A[E];O._id=E+A._id,O._height=(w.height-C.b-C.t)*O.thickness,O._offsetShift=Math.floor(O.borderwidth/2)}}w._rangeSliderData=p},nt.autoMarginOpts=function(w,S){var C=w._fullLayout,p=S[E],F=S._id.charAt(0),A=0,O=0;if(S.side==="bottom"&&(A=S._depth,S.title.text!==C._dfltTitle[F])){O=1.5*S.title.font.size+10+p._offsetShift;var $=(S.title.text.match(_.BR_TAG_ALL)||[]).length;O+=$*S.title.font.size*m}return{x:0,y:S._counterDomainMin,l:0,r:0,t:0,b:p._height+A+Math.max(C.margin.b,O),pad:d.extraPad+p._offsetShift*2}}}),u5=r((nt,ke)=>{var _=et(),d=Fm(),m=D1(),E=T2(),b=Hb();ke.exports=function(w,S,C){var p=w[C],F=S[C];if(!(p.rangeslider||S._requestRangeslider[F._id]))return;_.isPlainObject(p.rangeslider)||(p.rangeslider={});var A=p.rangeslider,O=d.newContainer(F,"rangeslider");function $(Q,xt){return _.coerce(A,O,E,Q,xt)}var j,z;function I(Q,xt){return _.coerce(j,z,b,Q,xt)}var G=$("visible");if(G){$("bgcolor",S.plot_bgcolor),$("bordercolor"),$("borderwidth"),$("thickness"),$("autorange",!F.isValidRange(A.range)),$("range");var M=S._subplots;if(M)for(var L=M.cartesian.filter(function(Q){return Q.substr(0,Q.indexOf("y"))===m.name2id(C)}).map(function(Q){return Q.substr(Q.indexOf("y"),Q.length)}),B=_.simpleMap(L,m.id2name),X=0;X<B.length;X++){var ee=B[X];j=A[ee]||{},z=d.newContainer(O,ee,"yaxis");var yt=S[ee],Ze;j.range&&yt.isValidRange(j.range)&&(Ze="fixed");var Re=I("rangemode",Ze);Re!=="match"&&I("range",yt.range.slice())}O._input=A}}}),Ay=r((nt,ke)=>{var _=D1().list,d=Bm().getAutoRange,m=Gb();ke.exports=function(E){for(var b=_(E,"x",!0),w=0;w<b.length;w++){var S=b[w],C=S[m.name];C&&C.visible&&C.autorange&&(C._input.autorange=!0,C._input.range=C.range=d(E,S))}}}),$b=r((nt,ke)=>{var _=o(),d=y1(),m=cg(),E=et(),b=E.strTranslate,w=Q0(),S=Mn(),C=lm(),p=Ux(),F=D1(),A=t1(),O=Y1(),$=Gb();ke.exports=function(Re){for(var Q=Re._fullLayout,xt=Q._rangeSliderData,tt=0;tt<xt.length;tt++){var ht=xt[tt][$.name];ht._clipId=ht._id+"-"+Q._uid}function it(vt){return vt._name}var ut=Q._infolayer.selectAll("g."+$.containerClassName).data(xt,it);ut.exit().each(function(vt){var _t=vt[$.name];Q._topdefs.select("#"+_t._clipId).remove()}).remove(),xt.length!==0&&(ut.enter().append("g").classed($.containerClassName,!0).attr("pointer-events","all"),ut.each(function(vt){var _t=_.select(this),Le=vt[$.name],wt=Q[F.id2name(vt.anchor)],St=Le[F.id2name(vt.anchor)];if(Le.range){var Ut=E.simpleMap(Le.range,vt.r2l),kt=E.simpleMap(vt.range,vt.r2l),jt;kt[0]<kt[1]?jt=[Math.min(Ut[0],kt[0]),Math.max(Ut[1],kt[1])]:jt=[Math.max(Ut[0],kt[0]),Math.min(Ut[1],kt[1])],Le.range=Le._input.range=E.simpleMap(jt,vt.l2r)}vt.cleanRange("rangeslider.range");var aa=Q._size,ca=vt.domain;Le._width=aa.w*(ca[1]-ca[0]);var Cp=Math.round(aa.l+aa.w*ca[0]),pt=Math.round(aa.t+aa.h*(1-vt._counterDomainMin)+(vt.side==="bottom"?vt._depth:0)+Le._offsetShift+$.extraPad);_t.attr("transform",b(Cp,pt)),Le._rl=E.simpleMap(Le.range,vt.r2l);var gt=Le._rl[0],te=Le._rl[1],Et=te-gt;if(Le.p2d=function(Op){return Op/Le._width*Et+gt},Le.d2p=function(Op){return(Op-gt)/Et*Le._width},vt.rangebreaks){var zt=vt.locateBreaks(gt,te);if(zt.length){var rt,Z,we=0;for(rt=0;rt<zt.length;rt++)Z=zt[rt],we+=Z.max-Z.min;var ot=Le._width/(te-gt-we),mt=[-ot*gt];for(rt=0;rt<zt.length;rt++)Z=zt[rt],mt.push(mt[mt.length-1]-ot*(Z.max-Z.min));for(Le.d2p=function(Op){for(var Hp=mt[0],n0=0;n0<zt.length;n0++){var R0=zt[n0];if(Op>=R0.max)Hp=mt[n0+1];else if(Op<R0.min)break}return Hp+ot*Op},rt=0;rt<zt.length;rt++)Z=zt[rt],Z.pmin=Le.d2p(Z.min),Z.pmax=Le.d2p(Z.max);Le.p2d=function(Op){for(var Hp=mt[0],n0=0;n0<zt.length;n0++){var R0=zt[n0];if(Op>=R0.pmax)Hp=mt[n0+1];else if(Op<R0.pmin)break}return(Op-Hp)/ot}}}if(St.rangemode!=="match"){var It=wt.r2l(St.range[0]),Yt=wt.r2l(St.range[1]),Sr=Yt-It;Le.d2pOppAxis=function(Op){return(Op-It)/Sr*Le._height}}_t.call(M,Re,vt,Le).call(L,Re,vt,Le).call(B,Re,vt,Le).call(ee,Re,vt,Le,St).call(yt,Re,vt,Le).call(Ze,Re,vt,Le),z(_t,Re,vt,Le),G(_t,Re,vt,Le,wt,St),vt.side==="bottom"&&C.draw(Re,vt._id+"title",{propContainer:vt,propName:vt._name+".title.text",placeholder:Q._dfltTitle.x,attributes:{x:vt._offset+vt._length/2,y:pt+Le._height+Le._offsetShift+10+1.5*vt.title.font.size,"text-anchor":"middle"}})}))};function j(Re){return typeof Re.clientX=="number"?Re.clientX:Re.touches&&Re.touches.length>0?Re.touches[0].clientX:0}function z(Re,Q,xt,tt){if(Q._context.staticPlot)return;var ht=Re.select("rect."+$.slideBoxClassName).node(),it=Re.select("rect."+$.grabAreaMinClassName).node(),ut=Re.select("rect."+$.grabAreaMaxClassName).node();function vt(){var _t=_.event,Le=_t.target,wt=j(_t),St=wt-Re.node().getBoundingClientRect().left,Ut=tt.d2p(xt._rl[0]),kt=tt.d2p(xt._rl[1]),jt=A.coverSlip();this.addEventListener("touchmove",aa),this.addEventListener("touchend",ca),jt.addEventListener("mousemove",aa),jt.addEventListener("mouseup",ca);function aa(Cp){var pt=j(Cp),gt=+pt-wt,te,Et,zt;switch(Le){case ht:if(zt="ew-resize",Ut+gt>xt._length||kt+gt<0)return;te=Ut+gt,Et=kt+gt;break;case it:if(zt="col-resize",Ut+gt>xt._length)return;te=Ut+gt,Et=kt;break;case ut:if(zt="col-resize",kt+gt<0)return;te=Ut,Et=kt+gt;break;default:zt="ew-resize",te=St,Et=St+gt;break}if(Et<te){var rt=Et;Et=te,te=rt}tt._pixelMin=te,tt._pixelMax=Et,O(_.select(jt),zt),I(Re,Q,xt,tt)}function ca(){jt.removeEventListener("mousemove",aa),jt.removeEventListener("mouseup",ca),this.removeEventListener("touchmove",aa),this.removeEventListener("touchend",ca),E.removeElement(jt)}}Re.on("mousedown",vt),Re.on("touchstart",vt)}function I(Re,Q,xt,tt){function ht(vt){return xt.l2r(E.constrain(vt,tt._rl[0],tt._rl[1]))}var it=ht(tt.p2d(tt._pixelMin)),ut=ht(tt.p2d(tt._pixelMax));window.requestAnimationFrame(function(){d.call("_guiRelayout",Q,xt._name+".range",[it,ut])})}function G(Re,Q,xt,tt,ht,it){var ut=$.handleWidth/2;function vt(Cp){return E.constrain(Cp,0,tt._width)}function _t(Cp){return E.constrain(Cp,0,tt._height)}function Le(Cp){return E.constrain(Cp,-ut,tt._width+ut)}var wt=vt(tt.d2p(xt._rl[0])),St=vt(tt.d2p(xt._rl[1]));if(Re.select("rect."+$.slideBoxClassName).attr("x",wt).attr("width",St-wt),Re.select("rect."+$.maskMinClassName).attr("width",wt),Re.select("rect."+$.maskMaxClassName).attr("x",St).attr("width",tt._width-St),it.rangemode!=="match"){var Ut=tt._height-_t(tt.d2pOppAxis(ht._rl[1])),kt=tt._height-_t(tt.d2pOppAxis(ht._rl[0]));Re.select("rect."+$.maskMinOppAxisClassName).attr("x",wt).attr("height",Ut).attr("width",St-wt),Re.select("rect."+$.maskMaxOppAxisClassName).attr("x",wt).attr("y",kt).attr("height",tt._height-kt).attr("width",St-wt),Re.select("rect."+$.slideBoxClassName).attr("y",Ut).attr("height",kt-Ut)}var jt=.5,aa=Math.round(Le(wt-ut))-jt,ca=Math.round(Le(St-ut))+jt;Re.select("g."+$.grabberMinClassName).attr("transform",b(aa,jt)),Re.select("g."+$.grabberMaxClassName).attr("transform",b(ca,jt))}function M(Re,Q,xt,tt){var ht=E.ensureSingle(Re,"rect",$.bgClassName,function(_t){_t.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),it=tt.borderwidth%2===0?tt.borderwidth:tt.borderwidth-1,ut=-tt._offsetShift,vt=w.crispRound(Q,tt.borderwidth);ht.attr({width:tt._width+it,height:tt._height+it,transform:b(ut,ut),"stroke-width":vt}).call(S.stroke,tt.bordercolor).call(S.fill,tt.bgcolor)}function L(Re,Q,xt,tt){var ht=Q._fullLayout,it=E.ensureSingleById(ht._topdefs,"clipPath",tt._clipId,function(ut){ut.append("rect").attr({x:0,y:0})});it.select("rect").attr({width:tt._width,height:tt._height})}function B(Re,Q,xt,tt){var ht=Q.calcdata,it=Re.selectAll("g."+$.rangePlotClassName).data(xt._subplotsWith,E.identity);it.enter().append("g").attr("class",function(vt){return $.rangePlotClassName+" "+vt}).call(w.setClipUrl,tt._clipId,Q),it.order(),it.exit().remove();var ut;it.each(function(vt,_t){var Le=_.select(this),wt=_t===0,St=F.getFromId(Q,vt,"y"),Ut=St._name,kt=tt[Ut],jt={data:[],layout:{xaxis:{type:xt.type,domain:[0,1],range:tt.range.slice(),calendar:xt.calendar},width:tt._width,height:tt._height,margin:{t:0,b:0,l:0,r:0}},_context:Q._context};xt.rangebreaks&&(jt.layout.xaxis.rangebreaks=xt.rangebreaks),jt.layout[Ut]={type:St.type,domain:[0,1],range:kt.rangemode!=="match"?kt.range.slice():St.range.slice(),calendar:St.calendar},St.rangebreaks&&(jt.layout[Ut].rangebreaks=St.rangebreaks),m.supplyDefaults(jt);var aa=jt._fullLayout.xaxis,ca=jt._fullLayout[Ut];aa.clearCalc(),aa.setScale(),ca.clearCalc(),ca.setScale();var Cp={id:vt,plotgroup:Le,xaxis:aa,yaxis:ca,isRangePlot:!0};wt?ut=Cp:(Cp.mainplot="xy",Cp.mainplotinfo=ut),p.rangePlot(Q,Cp,X(ht,vt))})}function X(Re,Q){for(var xt=[],tt=0;tt<Re.length;tt++){var ht=Re[tt],it=ht[0].trace;it.xaxis+it.yaxis===Q&&xt.push(ht)}return xt}function ee(Re,Q,xt,tt,ht){var it=E.ensureSingle(Re,"rect",$.maskMinClassName,function(Le){Le.attr({x:0,y:0,"shape-rendering":"crispEdges"})});it.attr("height",tt._height).call(S.fill,$.maskColor);var ut=E.ensureSingle(Re,"rect",$.maskMaxClassName,function(Le){Le.attr({y:0,"shape-rendering":"crispEdges"})});if(ut.attr("height",tt._height).call(S.fill,$.maskColor),ht.rangemode!=="match"){var vt=E.ensureSingle(Re,"rect",$.maskMinOppAxisClassName,function(Le){Le.attr({y:0,"shape-rendering":"crispEdges"})});vt.attr("width",tt._width).call(S.fill,$.maskOppAxisColor);var _t=E.ensureSingle(Re,"rect",$.maskMaxOppAxisClassName,function(Le){Le.attr({y:0,"shape-rendering":"crispEdges"})});_t.attr("width",tt._width).style("border-top",$.maskOppBorder).call(S.fill,$.maskOppAxisColor)}}function yt(Re,Q,xt,tt){if(!Q._context.staticPlot){var ht=E.ensureSingle(Re,"rect",$.slideBoxClassName,function(it){it.attr({y:0,cursor:$.slideBoxCursor,"shape-rendering":"crispEdges"})});ht.attr({height:tt._height,fill:$.slideBoxFill})}}function Ze(Re,Q,xt,tt){var ht=E.ensureSingle(Re,"g",$.grabberMinClassName),it=E.ensureSingle(Re,"g",$.grabberMaxClassName),ut={x:0,width:$.handleWidth,rx:$.handleRadius,fill:S.background,stroke:S.defaultLine,"stroke-width":$.handleStrokeWidth,"shape-rendering":"crispEdges"},vt={y:Math.round(tt._height/4),height:Math.round(tt._height/2)},_t=E.ensureSingle(ht,"rect",$.handleMinClassName,function(kt){kt.attr(ut)});_t.attr(vt);var Le=E.ensureSingle(it,"rect",$.handleMaxClassName,function(kt){kt.attr(ut)});Le.attr(vt);var wt={width:$.grabAreaWidth,x:0,y:0,fill:$.grabAreaFill,cursor:Q._context.staticPlot?void 0:$.grabAreaCursor},St=E.ensureSingle(ht,"rect",$.grabAreaMinClassName,function(kt){kt.attr(wt)});St.attr("height",tt._height);var Ut=E.ensureSingle(it,"rect",$.grabAreaMaxClassName,function(kt){kt.attr(wt)});Ut.attr("height",tt._height)}}),r_=r((nt,ke)=>{var _=et(),d=T2(),m=Hb(),E=l5();ke.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:_.extendFlat({},d,{yaxis:m})}}},layoutAttributes:T2(),handleDefaults:u5(),calcAutorange:Ay(),draw:$b(),isVisible:E.isVisible,makeData:E.makeData,autoMarginOpts:E.autoMarginOpts}}),f2=r((nt,ke)=>{var _=ct(),d=Lp(),m=Fm().templatedArray,E=m("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});ke.exports={visible:{valType:"boolean",editType:"plot"},buttons:E,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:_({editType:"plot"}),bgcolor:{valType:"color",dflt:d.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:d.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}}),G_=r((nt,ke)=>{ke.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}}),M2=r((nt,ke)=>{var _=et(),d=Mn(),m=Fm(),E=Dt(),b=f2(),w=G_();ke.exports=function(p,F,A,O,$){var j=p.rangeselector||{},z=m.newContainer(F,"rangeselector");function I(X,ee){return _.coerce(j,z,b,X,ee)}var G=E(j,z,{name:"buttons",handleItemDefaults:S,calendar:$}),M=I("visible",G.length>0);if(M){var L=C(F,A,O);I("x",L[0]),I("y",L[1]),_.noneOrAll(p,F,["x","y"]),I("xanchor"),I("yanchor"),_.coerceFont(I,"font",A.font);var B=I("bgcolor");I("activecolor",d.contrast(B,w.lightAmount,w.darkAmount)),I("bordercolor"),I("borderwidth")}};function S(p,F,A,O){var $=O.calendar;function j(G,M){return _.coerce(p,F,b.buttons,G,M)}var z=j("visible");if(z){var I=j("step");I!=="all"&&($&&$!=="gregorian"&&(I==="month"||I==="year")?F.stepmode="backward":j("stepmode"),j("count")),j("label")}}function C(p,F,A){for(var O=A.filter(function(I){return F[I].anchor===p._id}),$=0,j=0;j<O.length;j++){var z=F[O[j]].domain;z&&($=Math.max(z[1],$))}return[p.domain[0],$+w.yPad]}}),A2=r((nt,ke)=>{var _=l(),d=et().titleCase;ke.exports=function(E,b){var w=E._name,S={};if(b.step==="all")S[w+".autorange"]=!0;else{var C=m(E,b);S[w+".range[0]"]=C[0],S[w+".range[1]"]=C[1]}return S};function m(E,b){var w=E.range,S=new Date(E.r2l(w[1])),C=b.step,p=_["utc"+d(C)],F=b.count,A;switch(b.stepmode){case"backward":A=E.l2r(+p.offset(S,-F));break;case"todate":var O=p.offset(S,-F);A=E.l2r(+p.ceil(O));break}var $=w[1];return[A,$]}}),c5=r((nt,ke)=>{var _=o(),d=y1(),m=cg(),E=Mn(),b=Q0(),w=et(),S=w.strTranslate,C=G1(),p=D1(),F=K1(),A=F.LINE_SPACING,O=F.FROM_TL,$=F.FROM_BR,j=G_(),z=A2();ke.exports=function(Ze){var Re=Ze._fullLayout,Q=Re._infolayer.selectAll(".rangeselector").data(I(Ze),G);Q.enter().append("g").classed("rangeselector",!0),Q.exit().remove(),Q.style({cursor:"pointer","pointer-events":"all"}),Q.each(function(xt){var tt=_.select(this),ht=xt,it=ht.rangeselector,ut=tt.selectAll("g.button").data(w.filterVisible(it.buttons));ut.enter().append("g").classed("button",!0),ut.exit().remove(),ut.each(function(vt){var _t=_.select(this),Le=z(ht,vt);vt._isActive=M(ht,vt,Le),_t.call(L,it,vt),_t.call(X,it,vt,Ze),_t.on("click",function(){Ze._dragged||d.call("_guiRelayout",Ze,Le)}),_t.on("mouseover",function(){vt._isHovered=!0,_t.call(L,it,vt)}),_t.on("mouseout",function(){vt._isHovered=!1,_t.call(L,it,vt)})}),yt(Ze,ut,it,ht._name,tt)})};function I(Ze){for(var Re=p.list(Ze,"x",!0),Q=[],xt=0;xt<Re.length;xt++){var tt=Re[xt];tt.rangeselector&&tt.rangeselector.visible&&Q.push(tt)}return Q}function G(Ze){return Ze._id}function M(Ze,Re,Q){if(Re.step==="all")return Ze.autorange===!0;var xt=Object.keys(Q);return Ze.range[0]===Q[xt[0]]&&Ze.range[1]===Q[xt[1]]}function L(Ze,Re,Q){var xt=w.ensureSingle(Ze,"rect","selector-rect",function(tt){tt.attr("shape-rendering","crispEdges")});xt.attr({rx:j.rx,ry:j.ry}),xt.call(E.stroke,Re.bordercolor).call(E.fill,B(Re,Q)).style("stroke-width",Re.borderwidth+"px")}function B(Ze,Re){return Re._isActive||Re._isHovered?Ze.activecolor:Ze.bgcolor}function X(Ze,Re,Q,xt){function tt(it){C.convertToTspans(it,xt)}var ht=w.ensureSingle(Ze,"text","selector-text",function(it){it.attr("text-anchor","middle")});ht.call(b.font,Re.font).text(ee(Q,xt._fullLayout._meta)).call(tt)}function ee(Ze,Re){return Ze.label?Re?w.templateString(Ze.label,Re):Ze.label:Ze.step==="all"?"all":Ze.count+Ze.step.charAt(0)}function yt(Ze,Re,Q,xt,tt){var ht=0,it=0,ut=Q.borderwidth;Re.each(function(){var Ut=_.select(this),kt=Ut.select(".selector-text"),jt=Q.font.size*A,aa=Math.max(jt*C.lineCount(kt),16)+3;it=Math.max(it,aa)}),Re.each(function(){var Ut=_.select(this),kt=Ut.select(".selector-rect"),jt=Ut.select(".selector-text"),aa=jt.node()&&b.bBox(jt.node()).width,ca=Q.font.size*A,Cp=C.lineCount(jt),pt=Math.max(aa+10,j.minButtonWidth);Ut.attr("transform",S(ut+ht,ut)),kt.attr({x:0,y:0,width:pt,height:it}),C.positionText(jt,pt/2,it/2-(Cp-1)*ca/2+3),ht+=pt+5});var vt=Ze._fullLayout._size,_t=vt.l+vt.w*Q.x,Le=vt.t+vt.h*(1-Q.y),wt="left";w.isRightAnchor(Q)&&(_t-=ht,wt="right"),w.isCenterAnchor(Q)&&(_t-=ht/2,wt="center");var St="top";w.isBottomAnchor(Q)&&(Le-=it,St="bottom"),w.isMiddleAnchor(Q)&&(Le-=it/2,St="middle"),ht=Math.ceil(ht),it=Math.ceil(it),_t=Math.round(_t),Le=Math.round(Le),m.autoMargin(Ze,xt+"-range-selector",{x:Q.x,y:Q.y,l:ht*O[wt],r:ht*$[wt],b:it*$[St],t:it*O[St]}),tt.attr("transform",S(_t,Le))}}),ew=r((nt,ke)=>{ke.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:f2()}}},layoutAttributes:f2(),handleDefaults:M2(),draw:c5()}}),Wb=r(nt=>{var ke=se().extendFlat;nt.attributes=function(_,d){_=_||{},d=d||{};var m={valType:"info_array",editType:_.editType,items:[{valType:"number",min:0,max:1,editType:_.editType},{valType:"number",min:0,max:1,editType:_.editType}],dflt:[0,1]};_.name&&_.name+"",_.trace,d.description&&""+d.description;var E={x:ke({},m,{}),y:ke({},m,{}),editType:_.editType};return _.noGridCell||(E.row={valType:"integer",min:0,dflt:0,editType:_.editType},E.column={valType:"integer",min:0,dflt:0,editType:_.editType}),E},nt.defaults=function(_,d,m,E){var b=E&&E.x||[0,1],w=E&&E.y||[0,1],S=d.grid;if(S){var C=m("domain.column");C!==void 0&&(C<S.columns?b=S._domains.x[C]:delete _.domain.column);var p=m("domain.row");p!==void 0&&(p<S.rows?w=S._domains.y[p]:delete _.domain.row)}var F=m("domain.x",b),A=m("domain.y",w);F[0]<F[1]||(_.domain.x=b.slice()),A[0]<A[1]||(_.domain.y=w.slice())}}),tw=r((nt,ke)=>{var _=et(),d=re().counter,m=Wb().attributes,E=Vm().idRegex,b=Fm(),w={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[d("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[E.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[E.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:m({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function S(O,$,j){var z=$[j+"axes"],I=Object.keys((O._splomAxes||{})[j]||{});if(Array.isArray(z))return z;if(I.length)return I}function C(O,$){var j=O.grid||{},z=S($,j,"x"),I=S($,j,"y");if(!O.grid&&!z&&!I)return;var G=Array.isArray(j.subplots)&&Array.isArray(j.subplots[0]),M=Array.isArray(z),L=Array.isArray(I),B=M&&z!==j.xaxes&&L&&I!==j.yaxes,X,ee;G?(X=j.subplots.length,ee=j.subplots[0].length):(L&&(X=I.length),M&&(ee=z.length));var yt=b.newContainer($,"grid");function Ze(Le,wt){return _.coerce(j,yt,w,Le,wt)}var Re=Ze("rows",X),Q=Ze("columns",ee);if(!(Re*Q>1)){delete $.grid;return}if(!G&&!M&&!L){var xt=Ze("pattern")==="independent";xt&&(G=!0)}yt._hasSubplotGrid=G;var tt=Ze("roworder"),ht=tt==="top to bottom",it=G?.2:.1,ut=G?.3:.1,vt,_t;B&&$._splomGridDflt&&(vt=$._splomGridDflt.xside,_t=$._splomGridDflt.yside),yt._domains={x:p("x",Ze,it,vt,Q),y:p("y",Ze,ut,_t,Re,ht)}}function p(O,$,j,z,I,G){var M=$(O+"gap",j),L=$("domain."+O);$(O+"side",z);for(var B=new Array(I),X=L[0],ee=(L[1]-X)/(I-M),yt=ee*(1-M),Ze=0;Ze<I;Ze++){var Re=X+ee*Ze;B[G?I-1-Ze:Ze]=[Re,Re+yt]}return B}function F(O,$){var j=$.grid;if(!(!j||!j._domains)){var z=O.grid||{},I=$._subplots,G=j._hasSubplotGrid,M=j.rows,L=j.columns,B=j.pattern==="independent",X,ee,yt,Ze,Re,Q,xt,tt=j._axisMap={};if(G){var ht=z.subplots||[];Q=j.subplots=new Array(M);var it=1;for(X=0;X<M;X++){var ut=Q[X]=new Array(L),vt=ht[X]||[];for(ee=0;ee<L;ee++)if(B?(Re=it===1?"xy":"x"+it+"y"+it,it++):Re=vt[ee],ut[ee]="",I.cartesian.indexOf(Re)!==-1){if(xt=Re.indexOf("y"),yt=Re.slice(0,xt),Ze=Re.slice(xt),tt[yt]!==void 0&&tt[yt]!==ee||tt[Ze]!==void 0&&tt[Ze]!==X)continue;ut[ee]=Re,tt[yt]=ee,tt[Ze]=X}}}else{var _t=S($,z,"x"),Le=S($,z,"y");j.xaxes=A(_t,I.xaxis,L,tt,"x"),j.yaxes=A(Le,I.yaxis,M,tt,"y")}var wt=j._anchors={},St=j.roworder==="top to bottom";for(var Ut in tt){var kt=Ut.charAt(0),jt=j[kt+"side"],aa,ca,Cp;if(jt.length<8)wt[Ut]="free";else if(kt==="x"){if(jt.charAt(0)==="t"===St?(aa=0,ca=1,Cp=M):(aa=M-1,ca=-1,Cp=-1),G){var pt=tt[Ut];for(X=aa;X!==Cp;X+=ca)if(Re=Q[X][pt],!!Re&&(xt=Re.indexOf("y"),Re.slice(0,xt)===Ut)){wt[Ut]=Re.slice(xt);break}}else for(X=aa;X!==Cp;X+=ca)if(Ze=j.yaxes[X],I.cartesian.indexOf(Ut+Ze)!==-1){wt[Ut]=Ze;break}}else if(jt.charAt(0)==="l"?(aa=0,ca=1,Cp=L):(aa=L-1,ca=-1,Cp=-1),G){var gt=tt[Ut];for(X=aa;X!==Cp;X+=ca)if(Re=Q[gt][X],!!Re&&(xt=Re.indexOf("y"),Re.slice(xt)===Ut)){wt[Ut]=Re.slice(0,xt);break}}else for(X=aa;X!==Cp;X+=ca)if(yt=j.xaxes[X],I.cartesian.indexOf(yt+Ut)!==-1){wt[Ut]=yt;break}}}}function A(O,$,j,z,I){var G=new Array(j),M;function L(B,X){$.indexOf(X)!==-1&&z[X]===void 0?(G[B]=X,z[X]=B):G[B]=""}if(Array.isArray(O))for(M=0;M<j;M++)L(M,O[M]);else for(L(0,I),M=1;M<j;M++)L(M,I+(M+1));return G}ke.exports={moduleType:"component",name:"grid",schema:{layout:{grid:w}},layoutAttributes:w,sizeDefaults:C,contentDefaults:F}}),Hx=r((nt,ke)=>{ke.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc"}}),qb=r((nt,ke)=>{var _=v(),d=y1(),m=et(),E=Fm(),b=Hx();ke.exports=function(w,S,C,p){var F="error_"+p.axis,A=E.newContainer(S,F),O=w[F]||{};function $(B,X){return m.coerce(O,A,b,B,X)}var j=O.array!==void 0||O.value!==void 0||O.type==="sqrt",z=$("visible",j);if(z!==!1){var I=$("type","array"in O?"data":"percent"),G=!0;I!=="sqrt"&&(G=$("symmetric",!((I==="data"?"arrayminus":"valueminus")in O))),I==="data"?($("array"),$("traceref"),G||($("arrayminus"),$("tracerefminus"))):(I==="percent"||I==="constant")&&($("value"),G||$("valueminus"));var M="copy_"+p.inherit+"style";if(p.inherit){var L=S["error_"+p.inherit];(L||{}).visible&&$(M,!(O.color||_(O.thickness)||_(O.width)))}(!p.inherit||!A[M])&&($("color",C),$("thickness"),$("width",d.traceIs(S,"gl3d")?0:4))}}}),n_=r((nt,ke)=>{ke.exports=function(d){var m=d.type,E=d.symmetric;if(m==="data"){var b=d.array||[];if(E)return function(p,F){var A=+b[F];return[A,A]};var w=d.arrayminus||[];return function(p,F){var A=+b[F],O=+w[F];return!isNaN(A)||!isNaN(O)?[O||0,A||0]:[NaN,NaN]}}else{var S=_(m,d.value),C=_(m,d.valueminus);return E||d.valueminus===void 0?function(p){var F=S(p);return[F,F]}:function(p){return[C(p),S(p)]}}};function _(d,m){if(d==="percent")return function(E){return Math.abs(E*m/100)};if(d==="constant")return function(){return Math.abs(m)};if(d==="sqrt")return function(E){return Math.sqrt(Math.abs(E))}}}),rw=r((nt,ke)=>{var _=v(),d=y1(),m=Im(),E=et(),b=n_();ke.exports=function(S){for(var C=S.calcdata,p=0;p<C.length;p++){var F=C[p],A=F[0].trace;if(A.visible===!0&&d.traceIs(A,"errorBarsOK")){var O=m.getFromId(S,A.xaxis),$=m.getFromId(S,A.yaxis);w(F,A,O,"x"),w(F,A,$,"y")}}};function w(S,C,p,F){var A=C["error_"+F]||{},O=A.visible&&["linear","log"].indexOf(p.type)!==-1,$=[];if(O){for(var j=b(A),z=0;z<S.length;z++){var I=S[z],G=I.i;if(G===void 0)G=z;else if(G===null)continue;var M=I[F];if(_(p.c2l(M))){var L=j(M,G);if(_(L[0])&&_(L[1])){var B=I[F+"s"]=M-L[0],X=I[F+"h"]=M+L[1];$.push(B,X)}}}var ee=p._id,yt=C._extremes[ee],Ze=m.findExtremes(p,$,E.extendFlat({tozero:yt.opts.tozero},{padded:!0}));yt.min=yt.min.concat(Ze.min),yt.max=yt.max.concat(Ze.max)}}}),C2=r((nt,ke)=>{var _=o(),d=v(),m=Q0(),E=Kp();ke.exports=function(w,S,C,p){var F,A=C.xaxis,O=C.yaxis,$=p&&p.duration>0,j=w._context.staticPlot;S.each(function(z){var I=z[0].trace,G=I.error_x||{},M=I.error_y||{},L;I.ids&&(L=function(yt){return yt.id});var B=E.hasMarkers(I)&&I.marker.maxdisplayed>0;!M.visible&&!G.visible&&(z=[]);var X=_.select(this).selectAll("g.errorbar").data(z,L);if(X.exit().remove(),!!z.length){G.visible||X.selectAll("path.xerror").remove(),M.visible||X.selectAll("path.yerror").remove(),X.style("opacity",1);var ee=X.enter().append("g").classed("errorbar",!0);$&&ee.style("opacity",0).transition().duration(p.duration).style("opacity",1),m.setClipUrl(X,C.layerClipId,w),X.each(function(yt){var Ze=_.select(this),Re=b(yt,A,O);if(!(B&&!yt.vis)){var Q,xt=Ze.select("path.yerror");if(M.visible&&d(Re.x)&&d(Re.yh)&&d(Re.ys)){var tt=M.width;Q="M"+(Re.x-tt)+","+Re.yh+"h"+2*tt+"m-"+tt+",0V"+Re.ys,Re.noYS||(Q+="m-"+tt+",0h"+2*tt),F=!xt.size(),F?xt=Ze.append("path").style("vector-effect",j?"none":"non-scaling-stroke").classed("yerror",!0):$&&(xt=xt.transition().duration(p.duration).ease(p.easing)),xt.attr("d",Q)}else xt.remove();var ht=Ze.select("path.xerror");if(G.visible&&d(Re.y)&&d(Re.xh)&&d(Re.xs)){var it=(G.copy_ystyle?M:G).width;Q="M"+Re.xh+","+(Re.y-it)+"v"+2*it+"m0,-"+it+"H"+Re.xs,Re.noXS||(Q+="m0,-"+it+"v"+2*it),F=!ht.size(),F?ht=Ze.append("path").style("vector-effect",j?"none":"non-scaling-stroke").classed("xerror",!0):$&&(ht=ht.transition().duration(p.duration).ease(p.easing)),ht.attr("d",Q)}else ht.remove()}})}})};function b(w,S,C){var p={x:S.c2p(w.x),y:C.c2p(w.y)};return w.yh!==void 0&&(p.yh=C.c2p(w.yh),p.ys=C.c2p(w.ys),d(p.ys)||(p.noYS=!0,p.ys=C.c2p(w.ys,!0))),w.xh!==void 0&&(p.xh=S.c2p(w.xh),p.xs=S.c2p(w.xs),d(p.xs)||(p.noXS=!0,p.xs=S.c2p(w.xs,!0))),p}}),Xb=r((nt,ke)=>{var _=o(),d=Mn();ke.exports=function(m){m.each(function(E){var b=E[0].trace,w=b.error_y||{},S=b.error_x||{},C=_.select(this);C.selectAll("path.yerror").style("stroke-width",w.thickness+"px").call(d.stroke,w.color),S.copy_ystyle&&(S=w),C.selectAll("path.xerror").style("stroke-width",S.thickness+"px").call(d.stroke,S.color)})}}),$_=r((nt,ke)=>{var _=et(),d=Om().overrideAll,m=Hx(),E={error_x:_.extendFlat({},m),error_y:_.extendFlat({},m)};delete E.error_x.copy_zstyle,delete E.error_y.copy_zstyle,delete E.error_y.copy_ystyle;var b={error_x:_.extendFlat({},m),error_y:_.extendFlat({},m),error_z:_.extendFlat({},m)};delete b.error_x.copy_ystyle,delete b.error_y.copy_ystyle,delete b.error_z.copy_ystyle,delete b.error_z.copy_zstyle,ke.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:E,bar:E,histogram:E,scatter3d:d(b,"calc","nested"),scattergl:d(E,"calc","nested")}},supplyDefaults:qb(),calc:rw(),makeComputeError:n_(),plot:C2(),style:Xb(),hoverInfo:w};function w(S,C,p){(C.error_y||{}).visible&&(p.yerr=S.yh-S.y,C.error_y.symmetric||(p.yerrneg=S.y-S.ys)),(C.error_x||{}).visible&&(p.xerr=S.xh-S.x,C.error_x.symmetric||(p.xerrneg=S.x-S.xs))}}),W_=r((nt,ke)=>{ke.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}}),nw=r((nt,ke)=>{var _=o(),d=ie(),m=cg(),E=y1(),b=Im(),w=t1(),S=et(),C=S.strTranslate,p=se().extendFlat,F=Y1(),A=Q0(),O=Mn(),$=lm(),j=G1(),z=sg().flipScale,I=j_(),G=zb(),M=d0(),L=K1(),B=L.LINE_SPACING,X=L.FROM_TL,ee=L.FROM_BR,yt=W_().cn;function Ze(it){var ut=it._fullLayout,vt=ut._infolayer.selectAll("g."+yt.colorbar).data(Re(it),function(_t){return _t._id});vt.enter().append("g").attr("class",function(_t){return _t._id}).classed(yt.colorbar,!0),vt.each(function(_t){var Le=_.select(this);S.ensureSingle(Le,"rect",yt.cbbg),S.ensureSingle(Le,"g",yt.cbfills),S.ensureSingle(Le,"g",yt.cblines),S.ensureSingle(Le,"g",yt.cbaxis,function(St){St.classed(yt.crisp,!0)}),S.ensureSingle(Le,"g",yt.cbtitleunshift,function(St){St.append("g").classed(yt.cbtitle,!0)}),S.ensureSingle(Le,"rect",yt.cboutline);var wt=Q(Le,_t,it);wt&&wt.then&&(it._promises||[]).push(wt),it._context.edits.colorbarPosition&&xt(Le,_t,it)}),vt.exit().each(function(_t){m.autoMargin(it,_t._id)}).remove(),vt.order()}function Re(it){var ut=it._fullLayout,vt=it.calcdata,_t=[],Le,wt,St,Ut;function kt(Z){return p(Z,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function jt(){typeof Ut.calc=="function"?Ut.calc(it,St,Le):(Le._fillgradient=wt.reversescale?z(wt.colorscale):wt.colorscale,Le._zrange=[wt[Ut.min],wt[Ut.max]])}for(var aa=0;aa<vt.length;aa++){var ca=vt[aa];if(St=ca[0].trace,!!St._module){var Cp=St._module.colorbar;if(St.visible===!0&&Cp)for(var pt=Array.isArray(Cp),gt=pt?Cp:[Cp],te=0;te<gt.length;te++){Ut=gt[te];var Et=Ut.container;wt=Et?St[Et]:St,wt&&wt.showscale&&(Le=kt(wt.colorbar),Le._id="cb"+St.uid+(pt&&Et?"-"+Et:""),Le._traceIndex=St.index,Le._propPrefix=(Et?Et+".":"")+"colorbar.",Le._meta=St._meta,jt(),_t.push(Le))}}}for(var zt in ut._colorAxes)if(wt=ut[zt],wt.showscale){var rt=ut._colorAxes[zt];Le=kt(wt.colorbar),Le._id="cb"+zt,Le._propPrefix=zt+".colorbar.",Le._meta=ut._meta,Ut={min:"cmin",max:"cmax"},rt[0]!=="heatmap"&&(St=rt[1],Ut.calc=St._module.colorbar.calc),jt(),_t.push(Le)}return _t}function Q(it,ut,vt){var _t=ut.orientation==="v",Le=ut.len,wt=ut.lenmode,St=ut.thickness,Ut=ut.thicknessmode,kt=ut.outlinewidth,jt=ut.borderwidth,aa=ut.bgcolor,ca=ut.xanchor,Cp=ut.yanchor,pt=ut.xpad,gt=ut.ypad,te=ut.x,Et=_t?ut.y:1-ut.y,zt=ut.yref==="paper",rt=ut.xref==="paper",Z=vt._fullLayout,we=Z._size,ot=ut._fillcolor,mt=ut._line,It=ut.title,Yt=It.side,Sr=ut._zrange||_.extent((typeof ot=="function"?ot:mt.color).domain()),Op=typeof mt.color=="function"?mt.color:function(){return mt.color},Hp=typeof ot=="function"?ot:function(){return ot},n0=ut._levels,R0=tt(vt,ut,Sr),w0=R0.fill,_0=R0.line,ha=Math.round(St*(Ut==="fraction"?_t?we.w:we.h:1)),Rp=ha/(_t?we.w:we.h),Gt=Math.round(Le*(wt==="fraction"?_t?we.h:we.w:1)),Gp=Gt/(_t?we.h:we.w),c0=rt?we.w:vt._fullLayout.width,M0=zt?we.h:vt._fullLayout.height,I0=Math.round(_t?te*c0+pt:Et*M0+gt),k0={center:.5,right:1}[ca]||0,V0={top:1,middle:.5}[Cp]||0,$0=_t?te-k0*Rp:Et-V0*Rp,W0=_t?Et-V0*Gp:te-k0*Gp,gm=Math.round(_t?M0*(1-W0):c0*W0);ut._lenFrac=Gp,ut._thickFrac=Rp,ut._uFrac=$0,ut._vFrac=W0;var F0=ut._axis=ht(vt,ut,Sr);F0.position=Rp+(_t?te+pt/we.w:Et+gt/we.h);var bm=["top","bottom"].indexOf(Yt)!==-1;if(_t&&bm&&(F0.title.side=Yt,F0.titlex=te+pt/we.w,F0.titley=W0+(It.side==="top"?Gp-gt/we.h:gt/we.h)),!_t&&!bm&&(F0.title.side=Yt,F0.titley=Et+gt/we.h,F0.titlex=W0+pt/we.w),mt.color&&ut.tickmode==="auto"){F0.tickmode="linear",F0.tick0=n0.start;var Dm=n0.size,vm=S.constrain(Gt/50,4,15)+1,km=(Sr[1]-Sr[0])/((ut.nticks||vm)*Dm);if(km>1){var Yo=Math.pow(10,Math.floor(Math.log(km)/Math.LN10));Dm*=Yo*S.roundUp(km/Yo,[2,5,10]),(Math.abs(n0.start)/n0.size+1e-6)%1<2e-6&&(F0.tick0=0)}F0.dtick=Dm}F0.domain=_t?[W0+gt/we.h,W0+Gp-gt/we.h]:[W0+pt/we.w,W0+Gp-pt/we.w],F0.setScale(),it.attr("transform",C(Math.round(we.l),Math.round(we.t)));var qp=it.select("."+yt.cbtitleunshift).attr("transform",C(-Math.round(we.l),-Math.round(we.t))),Mt=F0.ticklabelposition,Wt=F0.title.font.size,xn=it.select("."+yt.cbaxis),Fp,Bp=0,e0=0;function o0(em,tm){var Nm={propContainer:F0,propName:ut._propPrefix+"title.text",traceIndex:ut._traceIndex,_meta:ut._meta,placeholder:Z._dfltTitle.colorbar,containerGroup:it.select("."+yt.cbtitle)},o1=em.charAt(0)==="h"?em.substr(1):"h"+em;it.selectAll("."+o1+",."+o1+"-math-group").remove(),$.draw(vt,em,p(Nm,tm||{}))}function C0(){if(_t&&bm||!_t&&!bm){var em,tm;Yt==="top"&&(em=pt+we.l+c0*te,tm=gt+we.t+M0*(1-W0-Gp)+3+Wt*.75),Yt==="bottom"&&(em=pt+we.l+c0*te,tm=gt+we.t+M0*(1-W0)-3-Wt*.25),Yt==="right"&&(tm=gt+we.t+M0*Et+3+Wt*.75,em=pt+we.l+c0*W0),o0(F0._id+"title",{attributes:{x:em,y:tm,"text-anchor":_t?"start":"middle"}})}}function T0(){if(_t&&!bm||!_t&&bm){var em=F0.position||0,tm=F0._offset+F0._length/2,Nm,o1;if(Yt==="right")o1=tm,Nm=we.l+c0*em+10+Wt*(F0.showticklabels?1:.5);else if(Nm=tm,Yt==="bottom"&&(o1=we.t+M0*em+10+(Mt.indexOf("inside")===-1?F0.tickfont.size:0)+(F0.ticks!=="inside"&&ut.ticklen||0)),Yt==="top"){var N1=It.text.split("<br>").length;o1=we.t+M0*em+10-ha-B*Wt*N1}o0((_t?"h":"v")+F0._id+"title",{avoid:{selection:_.select(vt).selectAll("g."+F0._id+"tick"),side:Yt,offsetTop:_t?0:we.t,offsetLeft:_t?we.l:0,maxShift:_t?Z.width:Z.height},attributes:{x:Nm,y:o1,"text-anchor":"middle"},transform:{rotate:_t?-90:0,offset:0}})}}function A0(){if(!_t&&!bm||_t&&bm){var em=it.select("."+yt.cbtitle),tm=em.select("text"),Nm=[-kt/2,kt/2],o1=em.select(".h"+F0._id+"title-math-group").node(),N1=15.6;tm.node()&&(N1=parseInt(tm.node().style.fontSize,10)*B);var F1;if(o1?(F1=A.bBox(o1),e0=F1.width,Bp=F1.height,Bp>N1&&(Nm[1]-=(Bp-N1)/2)):tm.node()&&!tm.classed(yt.jsPlaceholder)&&(F1=A.bBox(tm.node()),e0=F1.width,Bp=F1.height),_t){if(Bp){if(Bp+=5,Yt==="top")F0.domain[1]-=Bp/we.h,Nm[1]*=-1;else{F0.domain[0]+=Bp/we.h;var B1=j.lineCount(tm);Nm[1]+=(1-B1)*N1}em.attr("transform",C(Nm[0],Nm[1])),F0.setScale()}}else e0&&(Yt==="right"&&(F0.domain[0]+=(e0+Wt/2)/we.w),em.attr("transform",C(Nm[0],Nm[1])),F0.setScale())}it.selectAll("."+yt.cbfills+",."+yt.cblines).attr("transform",_t?C(0,Math.round(we.h*(1-F0.domain[1]))):C(Math.round(we.w*F0.domain[0]),0)),xn.attr("transform",_t?C(0,Math.round(-we.t)):C(Math.round(-we.l),0));var u1=it.select("."+yt.cbfills).selectAll("rect."+yt.cbfill).attr("style","").data(w0);u1.enter().append("rect").classed(yt.cbfill,!0).attr("style",""),u1.exit().remove();var zm=Sr.map(F0.c2p).map(Math.round).sort(function(w1,s1){return w1-s1});u1.each(function(w1,s1){var Q1=[s1===0?Sr[0]:(w0[s1]+w0[s1-1])/2,s1===w0.length-1?Sr[1]:(w0[s1]+w0[s1+1])/2].map(F0.c2p).map(Math.round);_t&&(Q1[1]=S.constrain(Q1[1]+(Q1[1]>Q1[0])?1:-1,zm[0],zm[1]));var og=_.select(this).attr(_t?"x":"y",I0).attr(_t?"y":"x",_.min(Q1)).attr(_t?"width":"height",Math.max(ha,2)).attr(_t?"height":"width",Math.max(_.max(Q1)-_.min(Q1),2));if(ut._fillgradient)A.gradient(og,vt,ut._id,_t?"vertical":"horizontalreversed",ut._fillgradient,"fill");else{var P1=Hp(w1).replace("e-","");og.attr("fill",d(P1).toHexString())}});var R1=it.select("."+yt.cblines).selectAll("path."+yt.cbline).data(mt.color&&mt.width?_0:[]);R1.enter().append("path").classed(yt.cbline,!0),R1.exit().remove(),R1.each(function(w1){var s1=I0,Q1=Math.round(F0.c2p(w1))+mt.width/2%1;_.select(this).attr("d","M"+(_t?s1+","+Q1:Q1+","+s1)+(_t?"h":"v")+ha).call(A.lineGroupStyle,mt.width,Op(w1),mt.dash)}),xn.selectAll("g."+F0._id+"tick,path").remove();var z1=I0+ha+(kt||0)/2-(ut.ticks==="outside"?1:0),E1=b.calcTicks(F0),g1=b.getTickSigns(F0)[2];return b.drawTicks(vt,F0,{vals:F0.ticks==="inside"?b.clipEnds(F0,E1):E1,layer:xn,path:b.makeTickPath(F0,z1,g1),transFn:b.makeTransTickFn(F0)}),b.drawLabels(vt,F0,{vals:E1,layer:xn,transFn:b.makeTransTickLabelFn(F0),labelFns:b.makeLabelFns(F0,z1)})}function J0(){var em,tm=ha+kt/2;Mt.indexOf("inside")===-1&&(em=A.bBox(xn.node()),tm+=_t?em.width:em.height),Fp=qp.select("text");var Nm=0,o1=_t&&Yt==="top",N1=!_t&&Yt==="right",F1=0;if(Fp.node()&&!Fp.classed(yt.jsPlaceholder)){var B1,u1=qp.select(".h"+F0._id+"title-math-group").node();u1&&(_t&&bm||!_t&&!bm)?(em=A.bBox(u1),Nm=em.width,B1=em.height):(em=A.bBox(qp.node()),Nm=em.right-we.l-(_t?I0:gm),B1=em.bottom-we.t-(_t?gm:I0),!_t&&Yt==="top"&&(tm+=em.height,F1=em.height)),N1&&(Fp.attr("transform",C(Nm/2+Wt/2,0)),Nm*=2),tm=Math.max(tm,_t?Nm:B1)}var zm=(_t?pt:gt)*2+tm+jt+kt/2,R1=0;!_t&&It.text&&Cp==="bottom"&&Et<=0&&(R1=zm/2,zm+=R1,F1+=R1),Z._hColorbarMoveTitle=R1,Z._hColorbarMoveCBTitle=F1;var z1=jt+kt,E1=(_t?I0:gm)-z1/2-(_t?pt:0),g1=(_t?gm:I0)-(_t?Gt:gt+F1-R1);it.select("."+yt.cbbg).attr("x",E1).attr("y",g1).attr(_t?"width":"height",Math.max(zm-R1,2)).attr(_t?"height":"width",Math.max(Gt+z1,2)).call(O.fill,aa).call(O.stroke,ut.bordercolor).style("stroke-width",jt);var w1=N1?Math.max(Nm-10,0):0;it.selectAll("."+yt.cboutline).attr("x",(_t?I0:gm+pt)+w1).attr("y",(_t?gm+gt-Gt:I0)+(o1?Bp:0)).attr(_t?"width":"height",Math.max(ha,2)).attr(_t?"height":"width",Math.max(Gt-(_t?2*gt+Bp:2*pt+w1),2)).call(O.stroke,ut.outlinecolor).style({fill:"none","stroke-width":kt});var s1=_t?k0*zm:0,Q1=_t?0:(1-V0)*zm-F1;if(s1=rt?we.l-s1:-s1,Q1=zt?we.t-Q1:-Q1,it.attr("transform",C(s1,Q1)),!_t&&(jt||d(aa).getAlpha()&&!d.equals(Z.paper_bgcolor,aa))){var og=xn.selectAll("text"),P1=og[0].length,fg=it.select("."+yt.cbbg).node(),bg=A.bBox(fg),Cg=A.getTranslate(it),Ug=2;og.each(function(g0,$p){var Xp=0,b0=P1-1;if($p===Xp||$p===b0){var s0=A.bBox(this),O0=A.getTranslate(this),U0;if($p===b0){var mm=s0.right+O0.x,Jm=bg.right+Cg.x+gm-jt-Ug+te;U0=Jm-mm,U0>0&&(U0=0)}else if($p===Xp){var qm=s0.left+O0.x,b1=bg.left+Cg.x+gm+jt+Ug;U0=b1-qm,U0<0&&(U0=0)}U0&&(P1<3?this.setAttribute("transform","translate("+U0+",0) "+this.getAttribute("transform")):this.setAttribute("visibility","hidden"))}})}var rg={},Ng=X[ca],dg=ee[ca],$m=X[Cp],Xg=ee[Cp],Lt=zm-ha;_t?(wt==="pixels"?(rg.y=Et,rg.t=Gt*$m,rg.b=Gt*Xg):(rg.t=rg.b=0,rg.yt=Et+Le*$m,rg.yb=Et-Le*Xg),Ut==="pixels"?(rg.x=te,rg.l=zm*Ng,rg.r=zm*dg):(rg.l=Lt*Ng,rg.r=Lt*dg,rg.xl=te-St*Ng,rg.xr=te+St*dg)):(wt==="pixels"?(rg.x=te,rg.l=Gt*Ng,rg.r=Gt*dg):(rg.l=rg.r=0,rg.xl=te+Le*Ng,rg.xr=te-Le*dg),Ut==="pixels"?(rg.y=1-Et,rg.t=zm*$m,rg.b=zm*Xg):(rg.t=Lt*$m,rg.b=Lt*Xg,rg.yt=Et-St*$m,rg.yb=Et+St*Xg));var At=ut.y<.5?"b":"t",Wp=ut.x<.5?"l":"r";vt._fullLayout._reservedMargin[ut._id]={};var Qp={r:Z.width-E1-s1,l:E1+rg.r,b:Z.height-g1-Q1,t:g1+rg.b};rt&&zt?m.autoMargin(vt,ut._id,rg):rt?vt._fullLayout._reservedMargin[ut._id][At]=Qp[At]:zt||_t?vt._fullLayout._reservedMargin[ut._id][Wp]=Qp[Wp]:vt._fullLayout._reservedMargin[ut._id][At]=Qp[At]}return S.syncOrAsync([m.previousPromises,C0,A0,T0,m.previousPromises,J0],vt)}function xt(it,ut,vt){var _t=ut.orientation==="v",Le=vt._fullLayout,wt=Le._size,St,Ut,kt;w.init({element:it.node(),gd:vt,prepFn:function(){St=it.attr("transform"),F(it)},moveFn:function(jt,aa){it.attr("transform",St+C(jt,aa)),Ut=w.align((_t?ut._uFrac:ut._vFrac)+jt/wt.w,_t?ut._thickFrac:ut._lenFrac,0,1,ut.xanchor),kt=w.align((_t?ut._vFrac:1-ut._uFrac)-aa/wt.h,_t?ut._lenFrac:ut._thickFrac,0,1,ut.yanchor);var ca=w.getCursor(Ut,kt,ut.xanchor,ut.yanchor);F(it,ca)},doneFn:function(){if(F(it),Ut!==void 0&&kt!==void 0){var jt={};jt[ut._propPrefix+"x"]=Ut,jt[ut._propPrefix+"y"]=kt,ut._traceIndex!==void 0?E.call("_guiRestyle",vt,jt,ut._traceIndex):E.call("_guiRelayout",vt,jt)}}})}function tt(it,ut,vt){var _t=ut._levels,Le=[],wt=[],St,Ut,kt=_t.end+_t.size/100,jt=_t.size,aa=1.001*vt[0]-.001*vt[1],ca=1.001*vt[1]-.001*vt[0];for(Ut=0;Ut<1e5&&(St=_t.start+Ut*jt,!(jt>0?St>=kt:St<=kt));Ut++)St>aa&&St<ca&&Le.push(St);if(ut._fillgradient)wt=[0];else if(typeof ut._fillcolor=="function"){var Cp=ut._filllevels;if(Cp)for(kt=Cp.end+Cp.size/100,jt=Cp.size,Ut=0;Ut<1e5&&(St=Cp.start+Ut*jt,!(jt>0?St>=kt:St<=kt));Ut++)St>vt[0]&&St<vt[1]&&wt.push(St);else wt=Le.map(function(pt){return pt-_t.size/2}),wt.push(wt[wt.length-1]+_t.size)}else ut._fillcolor&&typeof ut._fillcolor=="string"&&(wt=[0]);return _t.size<0&&(Le.reverse(),wt.reverse()),{line:Le,fill:wt}}function ht(it,ut,vt){var _t=it._fullLayout,Le=ut.orientation==="v",wt={type:"linear",range:vt,tickmode:ut.tickmode,nticks:ut.nticks,tick0:ut.tick0,dtick:ut.dtick,tickvals:ut.tickvals,ticktext:ut.ticktext,ticks:ut.ticks,ticklen:ut.ticklen,tickwidth:ut.tickwidth,tickcolor:ut.tickcolor,showticklabels:ut.showticklabels,labelalias:ut.labelalias,ticklabelposition:ut.ticklabelposition,ticklabeloverflow:ut.ticklabeloverflow,ticklabelstep:ut.ticklabelstep,tickfont:ut.tickfont,tickangle:ut.tickangle,tickformat:ut.tickformat,exponentformat:ut.exponentformat,minexponent:ut.minexponent,separatethousands:ut.separatethousands,showexponent:ut.showexponent,showtickprefix:ut.showtickprefix,tickprefix:ut.tickprefix,showticksuffix:ut.showticksuffix,ticksuffix:ut.ticksuffix,title:ut.title,showline:!0,anchor:"free",side:Le?"right":"bottom",position:1},St=Le?"y":"x",Ut={type:"linear",_id:St+ut._id},kt={letter:St,font:_t.font,noAutotickangles:St==="y",noHover:!0,noTickson:!0,noTicklabelmode:!0,noInsideRange:!0,calendar:_t.calendar};function jt(aa,ca){return S.coerce(wt,Ut,M,aa,ca)}return I(wt,Ut,jt,kt,_t),G(wt,Ut,jt,kt),Ut}ke.exports={draw:Ze}}),aw=r((nt,ke)=>{ke.exports={moduleType:"component",name:"colorbar",attributes:y(),supplyDefaults:Np(),draw:nw().draw,hasColorbar:ne()}}),p2=r((nt,ke)=>{ke.exports={moduleType:"component",name:"legend",layoutAttributes:q1(),supplyLayoutDefaults:x1(),draw:_g(),style:Ig()}}),m2=r((nt,ke)=>{ke.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}}),iw=r((nt,ke)=>{ke.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}}),Yb=r((nt,ke)=>{var _=y1(),d=et(),m=d.extendFlat,E=d.extendDeep;function b(S){var C;switch(S){case"themes__thumb":C={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":C={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:C={}}return C}function w(S){var C=["xaxis","yaxis","zaxis"];return C.indexOf(S.slice(0,5))>-1}ke.exports=function(S,C){var p,F=S.data,A=S.layout,O=E([],F),$=E({},A,b(C.tileClass)),j=S._context||{};if(C.width&&($.width=C.width),C.height&&($.height=C.height),C.tileClass==="thumbnail"||C.tileClass==="themes__thumb"){$.annotations=[];var z=Object.keys($);for(p=0;p<z.length;p++)w(z[p])&&($[z[p]].title={text:""});for(p=0;p<O.length;p++){var I=O[p];I.showscale=!1,I.marker&&(I.marker.showscale=!1),_.traceIs(I,"pie-like")&&(I.textposition="none")}}if(Array.isArray(C.annotations))for(p=0;p<C.annotations.length;p++)$.annotations.push(C.annotations[p]);var G=Object.keys($).filter(function(ee){return ee.match(/^scene\d*$/)});if(G.length){var M={};for(C.tileClass==="thumbnail"&&(M={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),p=0;p<G.length;p++){var L=$[G[p]];L.xaxis||(L.xaxis={}),L.yaxis||(L.yaxis={}),L.zaxis||(L.zaxis={}),m(L.xaxis,M),m(L.yaxis,M),m(L.zaxis,M),L._scene=null}}var B=document.createElement("div");C.tileClass&&(B.className=C.tileClass);var X={gd:B,td:B,layout:$,data:O,config:{staticPlot:C.staticPlot===void 0?!0:C.staticPlot,plotGlPixelRatio:C.plotGlPixelRatio===void 0?2:C.plotGlPixelRatio,displaylogo:C.displaylogo||!1,showLink:C.showLink||!1,showTips:C.showTips||!1,mapboxAccessToken:j.mapboxAccessToken}};return C.setBackground!=="transparent"&&(X.config.setBackground=C.setBackground||"opaque"),X.gd.defaultLayout=b(C.tileClass),X}}),D2=r((nt,ke)=>{var _=m0().EventEmitter,d=y1(),m=et(),E=zx(),b=Yb(),w=Cb(),S=Ix();function C(p,F){var A=new _,O=b(p,{format:"png"}),$=O.gd;$.style.position="absolute",$.style.left="-5000px",document.body.appendChild($);function j(){var I=E.getDelay($._fullLayout);setTimeout(function(){var G=w($),M=document.createElement("canvas");M.id=m.randstr(),A=S({format:F.format,width:$._fullLayout.width,height:$._fullLayout.height,canvas:M,emitter:A,svg:G}),A.clean=function(){$&&document.body.removeChild($)}},I)}var z=E.getRedrawFunc($);return d.call("_doPlot",$,O.data,O.layout,O.config).then(z).then(j).catch(function(I){A.emit("error",I)}),A}ke.exports=C}),a_=r((nt,ke)=>{var _=zx(),d={getDelay:_.getDelay,getRedrawFunc:_.getRedrawFunc,clone:Yb(),toSVG:Cb(),svgToImg:Ix(),toImage:D2(),downloadImage:Rb()};ke.exports=d}),q_=r(nt=>{nt.version=n().version,a(),t0();var ke=y1(),_=nt.register=ke.register,d=b2(),m=Object.keys(d);for(b=0;b<m.length;b++)E=m[b],E.charAt(0)!=="_"&&(nt[E]=d[E]),_({moduleType:"apiMethod",name:E,fn:d[E]});var E,b;_(V_()),_([J3(),Nv(),Y2(),Q3(),e_(),Vb(),By(),r_(),ew(),tw(),$_(),Vp(),aw(),p2(),ey(),Zm()]),_([m2(),iw()]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(_(window.PlotlyLocales),delete window.PlotlyLocales),nt.Icons=Ly();var w=ey(),S=cg();nt.Plots={resize:S.resize,graphJson:S.graphJson,sendDataToCloud:S.sendDataToCloud},nt.Fx={hover:w.hover,unhover:w.unhover,loneHover:w.loneHover,loneUnhover:w.loneUnhover},nt.Snapshot=a_(),nt.PlotSchema=Gm()}),i_=r((nt,ke)=>{ke.exports=q_()}),R2=r((nt,ke)=>{ke.exports={TEXTPAD:3,eventDataKeys:["value","label"]}}),o_=r((nt,ke)=>{var _=r2(),d=Iv().axisHoverFormat,m=pm().hovertemplateAttrs,E=pm().texttemplateAttrs,b=N(),w=ct(),S=R2(),C=a1().pattern,p=se().extendFlat,F=w({editType:"calc",arrayOk:!0,colorEditType:"style"}),A=_.marker,O=A.line,$=p({},O.width,{dflt:0}),j=p({width:$,editType:"calc"},b("marker.line")),z=p({line:j,editType:"calc"},b("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"},pattern:C,cornerradius:{valType:"any",editType:"calc"}});ke.exports={x:_.x,x0:_.x0,dx:_.dx,y:_.y,y0:_.y0,dy:_.dy,xperiod:_.xperiod,yperiod:_.yperiod,xperiod0:_.xperiod0,yperiod0:_.yperiod0,xperiodalignment:_.xperiodalignment,yperiodalignment:_.yperiodalignment,xhoverformat:d("x"),yhoverformat:d("y"),text:_.text,texttemplate:E({editType:"plot"},{keys:S.eventDataKeys}),hovertext:_.hovertext,hovertemplate:m({},{keys:S.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:p({},F,{}),insidetextfont:p({},F,{}),outsidetextfont:p({},F,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:p({},_.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:z,offsetgroup:_.offsetgroup,alignmentgroup:_.alignmentgroup,selected:{marker:{opacity:_.selected.marker.opacity,color:_.selected.marker.color,editType:"style"},textfont:_.selected.textfont,editType:"style"},unselected:{marker:{opacity:_.unselected.marker.opacity,color:_.unselected.marker.color,editType:"style"},textfont:_.unselected.textfont,editType:"style"},zorder:_.zorder}}),Gx=r((nt,ke)=>{ke.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},barcornerradius:{valType:"any",editType:"calc"}}}),ow=r((nt,ke)=>{var _=Mn(),d=sg().hasColorscale,m=Zo(),E=et().coercePattern;ke.exports=function(b,w,S,C,p){var F=S("marker.color",C),A=d(b,"marker");A&&m(b,w,p,S,{prefix:"marker.",cLetter:"c"}),S("marker.line.color",_.defaultLine),d(b,"marker.line")&&m(b,w,p,S,{prefix:"marker.line.",cLetter:"c"}),S("marker.line.width"),S("marker.opacity"),E(S,"marker.pattern",F,A),S("selected.marker.color"),S("unselected.marker.color")}}),px=r((nt,ke)=>{var _=v(),d=et(),m=Mn(),E=y1(),b=P_(),w=Nb(),S=ow(),C=Lb(),p=o_(),F=d.coerceFont;function A(z,I,G,M){function L(Ze,Re){return d.coerce(z,I,p,Ze,Re)}var B=b(z,I,M,L);if(!B){I.visible=!1;return}w(z,I,M,L),L("xhoverformat"),L("yhoverformat"),L("zorder"),L("orientation",I.x&&!I.y?"h":"v"),L("base"),L("offset"),L("width"),L("text"),L("hovertext"),L("hovertemplate");var X=L("textposition");j(z,I,M,L,X,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),S(z,I,L,G,M);var ee=(I.marker.line||{}).color,yt=E.getComponentMethod("errorbars","supplyDefaults");yt(z,I,ee||m.defaultLine,{axis:"y"}),yt(z,I,ee||m.defaultLine,{axis:"x",inherit:"y"}),d.coerceSelectionMarkerOpacity(I,L)}function O(z,I){var G,M;function L(ee,yt){return d.coerce(M._input,M,p,ee,yt)}for(var B=0;B<z.length;B++)if(M=z[B],M.type==="bar"){G=M._input;var X=L("marker.cornerradius",I.barcornerradius);M.marker&&(M.marker.cornerradius=$(X)),C(G,M,I,L,I.barmode)}}function $(z){if(_(z)){if(z=+z,z>=0)return z}else if(typeof z=="string"&&(z=z.trim(),z.slice(-1)==="%"&&_(z.slice(0,-1))&&(z=+z.slice(0,-1),z>=0)))return z+"%"}function j(z,I,G,M,L,B){B=B||{};var X=B.moduleHasSelected!==!1,ee=B.moduleHasUnselected!==!1,yt=B.moduleHasConstrain!==!1,Ze=B.moduleHasCliponaxis!==!1,Re=B.moduleHasTextangle!==!1,Q=B.moduleHasInsideanchor!==!1,xt=!!B.hasPathbar,tt=Array.isArray(L)||L==="auto",ht=tt||L==="inside",it=tt||L==="outside";if(ht||it){var ut=F(M,"textfont",G.font),vt=d.extendFlat({},ut),_t=z.textfont&&z.textfont.color,Le=!_t;if(Le&&delete vt.color,F(M,"insidetextfont",vt),xt){var wt=d.extendFlat({},ut);Le&&delete wt.color,F(M,"pathbar.textfont",wt)}it&&F(M,"outsidetextfont",ut),X&&M("selected.textfont.color"),ee&&M("unselected.textfont.color"),yt&&M("constraintext"),Ze&&M("cliponaxis"),Re&&M("textangle"),M("texttemplate")}ht&&Q&&M("insidetextanchor")}ke.exports={supplyDefaults:A,crossTraceDefaults:O,handleText:j,validateCornerradius:$}}),Zb=r((nt,ke)=>{var _=y1(),d=Im(),m=et(),E=Gx(),b=px().validateCornerradius;ke.exports=function(w,S,C){function p(X,ee){return m.coerce(w,S,E,X,ee)}for(var F=!1,A=!1,O=!1,$={},j=p("barmode"),z=j==="group",I=0;I<C.length;I++){var G=C[I];if(_.traceIs(G,"bar")&&G.visible)F=!0;else continue;var M=G.xaxis+G.yaxis;if(z?($[M]&&(O=!0),$[M]=!0):(M+=G._input.offsetgroup,$.length>0&&!$[M]&&(O=!0),$[M]=!0),G.visible&&G.type==="histogram"){var L=d.getFromId({_fullLayout:S},G[G.orientation==="v"?"xaxis":"yaxis"]);L.type!=="category"&&(A=!0)}}if(!F){delete S.barmode;return}j!=="overlay"&&p("barnorm"),p("bargap",A&&!O?0:.2),p("bargroupgap");var B=p("barcornerradius");S.barcornerradius=b(B)}}),X_=r((nt,ke)=>{var _=et();ke.exports=function(d,m){for(var E=0;E<d.length;E++)d[E].i=E;_.mergeArray(m.text,d,"tx"),_.mergeArray(m.hovertext,d,"htx");var b=m.marker;if(b){_.mergeArray(b.opacity,d,"mo",!0),_.mergeArray(b.color,d,"mc");var w=b.line;w&&(_.mergeArray(w.color,d,"mlc"),_.mergeArrayCastPositive(w.width,d,"mlw"))}}}),$x=r((nt,ke)=>{var _=Im(),d=ox(),m=sg().hasColorscale,E=wp(),b=X_(),w=o2();ke.exports=function(S,C){var p=_.getFromId(S,C.xaxis||"x"),F=_.getFromId(S,C.yaxis||"y"),A,O,$,j,z,I,G={msUTC:!!(C.base||C.base===0)};C.orientation==="h"?(A=p.makeCalcdata(C,"x",G),$=F.makeCalcdata(C,"y"),j=d(C,F,"y",$),z=!!C.yperiodalignment,I="y"):(A=F.makeCalcdata(C,"y",G),$=p.makeCalcdata(C,"x"),j=d(C,p,"x",$),z=!!C.xperiodalignment,I="x"),O=j.vals;for(var M=Math.min(O.length,A.length),L=new Array(M),B=0;B<M;B++)L[B]={p:O[B],s:A[B]},z&&(L[B].orig_p=$[B],L[B][I+"End"]=j.ends[B],L[B][I+"Start"]=j.starts[B]),C.ids&&(L[B].id=String(C.ids[B]));return m(C,"marker")&&E(S,C,{vals:C.marker.color,containerStr:"marker",cLetter:"c"}),m(C,"marker.line")&&E(S,C,{vals:C.marker.line.color,containerStr:"marker.line",cLetter:"c"}),b(L,C),w(L,C),L}}),mx=r((nt,ke)=>{var _=o(),d=et();function m(S,C,p){var F=S._fullLayout,A=F["_"+p+"Text_minsize"];if(A){var O=F.uniformtext.mode==="hide",$;switch(p){case"funnelarea":case"pie":case"sunburst":$="g.slice";break;case"treemap":case"icicle":$="g.slice, g.pathbar";break;default:$="g.points > g.point"}C.selectAll($).each(function(j){var z=j.transform;if(z){z.scale=O&&z.hide?0:A/z.fontSize;var I=_.select(this).select("text");d.setTransormAndDisplay(I,z)}})}}function E(S,C,p){if(p.uniformtext.mode){var F=w(S),A=p.uniformtext.minsize,O=C.scale*C.fontSize;C.hide=O<A,p[F]=p[F]||1/0,C.hide||(p[F]=Math.min(p[F],Math.max(O,A)))}}function b(S,C){var p=w(S);C[p]=void 0}function w(S){return"_"+S+"Text_minsize"}ke.exports={recordMinTextSize:E,clearMinTextSize:b,resizeText:m}}),g2=r(nt=>{var ke=v(),_=ie(),d=et().isArrayOrTypedArray;nt.coerceString=function(m,E,b){if(typeof E=="string"){if(E||!m.noBlank)return E}else if((typeof E=="number"||E===!0)&&!m.strict)return String(E);return b!==void 0?b:m.dflt},nt.coerceNumber=function(m,E,b){if(ke(E)){E=+E;var w=m.min,S=m.max,C=w!==void 0&&E<w||S!==void 0&&E>S;if(!C)return E}return b!==void 0?b:m.dflt},nt.coerceColor=function(m,E,b){return _(E).isValid()?E:b!==void 0?b:m.dflt},nt.coerceEnumerated=function(m,E,b){return m.coerceNumber&&(E=+E),m.values.indexOf(E)!==-1?E:b!==void 0?b:m.dflt},nt.getValue=function(m,E){var b;return d(m)?E<m.length&&(b=m[E]):b=m,b},nt.getLineWidth=function(m,E){var b=0<E.mlw?E.mlw:d(m.marker.line.width)?0:m.marker.line.width;return b}}),s_=r((nt,ke)=>{var _=o(),d=Mn(),m=Q0(),E=et(),b=y1(),w=mx().resizeText,S=o_(),C=S.textfont,p=S.insidetextfont,F=S.outsidetextfont,A=g2();function O(Ze){var Re=_.select(Ze).selectAll('g[class^="barlayer"]').selectAll("g.trace");w(Ze,Re,"bar");var Q=Re.size(),xt=Ze._fullLayout;Re.style("opacity",function(tt){return tt[0].trace.opacity}).each(function(tt){(xt.barmode==="stack"&&Q>1||xt.bargap===0&&xt.bargroupgap===0&&!tt[0].trace.marker.line.width)&&_.select(this).attr("shape-rendering","crispEdges")}),Re.selectAll("g.points").each(function(tt){var ht=_.select(this),it=tt[0].trace;$(ht,it,Ze)}),b.getComponentMethod("errorbars","style")(Re)}function $(Ze,Re,Q){m.pointStyle(Ze.selectAll("path"),Re,Q),j(Ze,Re,Q)}function j(Ze,Re,Q){Ze.selectAll("text").each(function(xt){var tt=_.select(this),ht=E.ensureUniformFontSize(Q,M(tt,xt,Re,Q));m.font(tt,ht)})}function z(Ze,Re,Q){var xt=Re[0].trace;xt.selectedpoints?I(Q,xt,Ze):($(Q,xt,Ze),b.getComponentMethod("errorbars","style")(Q))}function I(Ze,Re,Q){m.selectedPointStyle(Ze.selectAll("path"),Re),G(Ze.selectAll("text"),Re,Q)}function G(Ze,Re,Q){Ze.each(function(xt){var tt=_.select(this),ht;if(xt.selected){ht=E.ensureUniformFontSize(Q,M(tt,xt,Re,Q));var it=Re.selected.textfont&&Re.selected.textfont.color;it&&(ht.color=it),m.font(tt,ht)}else m.selectedTextStyle(tt,Re)})}function M(Ze,Re,Q,xt){var tt=xt._fullLayout.font,ht=Q.textfont;if(Ze.classed("bartext-inside")){var it=yt(Re,Q);ht=B(Q,Re.i,tt,it)}else Ze.classed("bartext-outside")&&(ht=X(Q,Re.i,tt));return ht}function L(Ze,Re,Q){return ee(C,Ze.textfont,Re,Q)}function B(Ze,Re,Q,xt){var tt=L(Ze,Re,Q),ht=Ze._input.textfont===void 0||Ze._input.textfont.color===void 0||Array.isArray(Ze.textfont.color)&&Ze.textfont.color[Re]===void 0;return ht&&(tt={color:d.contrast(xt),family:tt.family,size:tt.size,weight:tt.weight,style:tt.style,variant:tt.variant,textcase:tt.textcase,lineposition:tt.lineposition,shadow:tt.shadow}),ee(p,Ze.insidetextfont,Re,tt)}function X(Ze,Re,Q){var xt=L(Ze,Re,Q);return ee(F,Ze.outsidetextfont,Re,xt)}function ee(Ze,Re,Q,xt){Re=Re||{};var tt=A.getValue(Re.family,Q),ht=A.getValue(Re.size,Q),it=A.getValue(Re.color,Q),ut=A.getValue(Re.weight,Q),vt=A.getValue(Re.style,Q),_t=A.getValue(Re.variant,Q),Le=A.getValue(Re.textcase,Q),wt=A.getValue(Re.lineposition,Q),St=A.getValue(Re.shadow,Q);return{family:A.coerceString(Ze.family,tt,xt.family),size:A.coerceNumber(Ze.size,ht,xt.size),color:A.coerceColor(Ze.color,it,xt.color),weight:A.coerceString(Ze.weight,ut,xt.weight),style:A.coerceString(Ze.style,vt,xt.style),variant:A.coerceString(Ze.variant,_t,xt.variant),textcase:A.coerceString(Ze.variant,Le,xt.textcase),lineposition:A.coerceString(Ze.variant,wt,xt.lineposition),shadow:A.coerceString(Ze.variant,St,xt.shadow)}}function yt(Ze,Re){return Re.type==="waterfall"?Re[Ze.dir].marker.color:Ze.mcc||Ze.mc||Re.marker.color}ke.exports={style:O,styleTextPoints:j,styleOnSelect:z,getInsideTextFont:B,getOutsideTextFont:X,getBarColor:yt,resizeText:w}}),Jb=r((nt,ke)=>{var _=o(),d=v(),m=et(),E=G1(),b=Mn(),w=Q0(),S=y1(),C=Im().tickText,p=mx(),F=p.recordMinTextSize,A=p.clearMinTextSize,O=s_(),$=g2(),j=R2(),z=o_(),I=z.text,G=z.textposition,M=D0().appendArrayPointValue,L=j.TEXTPAD;function B(jt){return jt.id}function X(jt){if(jt.ids)return B}function ee(jt){return(jt>0)-(jt<0)}function yt(jt,aa){return jt<aa?1:-1}function Ze(jt,aa,ca,Cp){var pt=[],gt=[],te=Cp?aa:ca,Et=Cp?ca:aa;return pt[0]=te.c2p(jt.s0,!0),gt[0]=Et.c2p(jt.p0,!0),pt[1]=te.c2p(jt.s1,!0),gt[1]=Et.c2p(jt.p1,!0),Cp?[pt,gt]:[gt,pt]}function Re(jt,aa,ca,Cp){if(!aa.uniformtext.mode&&Q(ca)){var pt;return Cp&&(pt=Cp()),jt.transition().duration(ca.duration).ease(ca.easing).each("end",function(){pt&&pt()}).each("interrupt",function(){pt&&pt()})}else return jt}function Q(jt){return jt&&jt.duration>0}function xt(jt,aa,ca,Cp,pt,gt){var te=aa.xaxis,Et=aa.yaxis,zt=jt._fullLayout,rt=jt._context.staticPlot;pt||(pt={mode:zt.barmode,norm:zt.barmode,gap:zt.bargap,groupgap:zt.bargroupgap},A("bar",zt));var Z=m.makeTraceGroups(Cp,ca,"trace bars").each(function(we){var ot=_.select(this),mt=we[0].trace,It=we[0].t,Yt=mt.type==="waterfall",Sr=mt.type==="funnel",Op=mt.type==="histogram",Hp=mt.type==="bar",n0=Hp||Sr,R0=0;Yt&&mt.connector.visible&&mt.connector.mode==="between"&&(R0=mt.connector.line.width/2);var w0=mt.orientation==="h",_0=Q(pt),ha=m.ensureSingle(ot,"g","points"),Rp=X(mt),Gt=ha.selectAll("g.point").data(m.identity,Rp);Gt.enter().append("g").classed("point",!0),Gt.exit().remove(),Gt.each(function(c0,M0){var I0=_.select(this),k0=Ze(c0,te,Et,w0),V0=k0[0][0],$0=k0[0][1],W0=k0[1][0],gm=k0[1][1],F0=(w0?$0-V0:gm-W0)===0;F0&&n0&&$.getLineWidth(mt,c0)&&(F0=!1),F0||(F0=!d(V0)||!d($0)||!d(W0)||!d(gm)),c0.isBlank=F0,F0&&(w0?$0=V0:gm=W0),R0&&!F0&&(w0?(V0-=yt(V0,$0)*R0,$0+=yt(V0,$0)*R0):(W0-=yt(W0,gm)*R0,gm+=yt(W0,gm)*R0));var bm,Dm;if(mt.type==="waterfall"){if(!F0){var vm=mt[c0.dir].marker;bm=vm.line.width,Dm=vm.color}}else bm=$.getLineWidth(mt,c0),Dm=c0.mc||mt.marker.color;function km(z1){var E1=_.round(bm/2%1,2);return pt.gap===0&&pt.groupgap===0?_.round(Math.round(z1)-E1,2):z1}function Yo(z1,E1,g1){return g1&&z1===E1?z1:Math.abs(z1-E1)>=2?km(z1):z1>E1?Math.ceil(z1):Math.floor(z1)}var qp=b.opacity(Dm),Mt=qp<1||bm>.01?km:Yo;jt._context.staticPlot||(V0=Mt(V0,$0,w0),$0=Mt($0,V0,w0),W0=Mt(W0,gm,!w0),gm=Mt(gm,W0,!w0));var Wt=w0?te.c2p:Et.c2p,xn;c0.s0>0?xn=c0._sMax:c0.s0<0?xn=c0._sMin:xn=c0.s1>0?c0._sMax:c0._sMin;function Fp(z1,E1){if(!z1)return 0;var g1=Math.abs(w0?gm-W0:$0-V0),w1=Math.abs(w0?$0-V0:gm-W0),s1=Mt(Math.abs(Wt(xn,!0)-Wt(0,!0))),Q1=c0.hasB?Math.min(g1/2,w1/2):Math.min(g1/2,s1),og;if(E1==="%"){var P1=Math.min(50,z1);og=g1*(P1/100)}else og=z1;return Mt(Math.max(Math.min(og,Q1),0))}var Bp=Hp||Op?Fp(It.cornerradiusvalue,It.cornerradiusform):0,e0,o0,C0="M"+V0+","+W0+"V"+gm+"H"+$0+"V"+W0+"Z",T0=0;if(Bp&&c0.s){var A0=ee(c0.s0)===0||ee(c0.s)===ee(c0.s0)?c0.s1:c0.s0;if(T0=Mt(c0.hasB?0:Math.abs(Wt(xn,!0)-Wt(A0,!0))),T0<Bp){var J0=yt(V0,$0),em=yt(W0,gm),tm=J0===-em?1:0;if(w0)if(c0.hasB)e0="M"+(V0+Bp*J0)+","+W0+"A "+Bp+","+Bp+" 0 0 "+tm+" "+V0+","+(W0+Bp*em)+"V"+(gm-Bp*em)+"A "+Bp+","+Bp+" 0 0 "+tm+" "+(V0+Bp*J0)+","+gm+"H"+($0-Bp*J0)+"A "+Bp+","+Bp+" 0 0 "+tm+" "+$0+","+(gm-Bp*em)+"V"+(W0+Bp*em)+"A "+Bp+","+Bp+" 0 0 "+tm+" "+($0-Bp*J0)+","+W0+"Z";else{o0=Math.abs($0-V0)+T0;var Nm=o0<Bp?Bp-Math.sqrt(o0*(2*Bp-o0)):0,o1=T0>0?Math.sqrt(T0*(2*Bp-T0)):0,N1=J0>0?Math.max:Math.min;e0="M"+V0+","+W0+"V"+(gm-Nm*em)+"H"+N1($0-(Bp-T0)*J0,V0)+"A "+Bp+","+Bp+" 0 0 "+tm+" "+$0+","+(gm-Bp*em-o1)+"V"+(W0+Bp*em+o1)+"A "+Bp+","+Bp+" 0 0 "+tm+" "+N1($0-(Bp-T0)*J0,V0)+","+(W0+Nm*em)+"Z"}else if(c0.hasB)e0="M"+(V0+Bp*J0)+","+W0+"A "+Bp+","+Bp+" 0 0 "+tm+" "+V0+","+(W0+Bp*em)+"V"+(gm-Bp*em)+"A "+Bp+","+Bp+" 0 0 "+tm+" "+(V0+Bp*J0)+","+gm+"H"+($0-Bp*J0)+"A "+Bp+","+Bp+" 0 0 "+tm+" "+$0+","+(gm-Bp*em)+"V"+(W0+Bp*em)+"A "+Bp+","+Bp+" 0 0 "+tm+" "+($0-Bp*J0)+","+W0+"Z";else{o0=Math.abs(gm-W0)+T0;var F1=o0<Bp?Bp-Math.sqrt(o0*(2*Bp-o0)):0,B1=T0>0?Math.sqrt(T0*(2*Bp-T0)):0,u1=em>0?Math.max:Math.min;e0="M"+(V0+F1*J0)+","+W0+"V"+u1(gm-(Bp-T0)*em,W0)+"A "+Bp+","+Bp+" 0 0 "+tm+" "+(V0+Bp*J0-B1)+","+gm+"H"+($0-Bp*J0+B1)+"A "+Bp+","+Bp+" 0 0 "+tm+" "+($0-F1*J0)+","+u1(gm-(Bp-T0)*em,W0)+"V"+W0+"Z"}}else e0=C0}else e0=C0;var zm=Re(m.ensureSingle(I0,"path"),zt,pt,gt);if(zm.style("vector-effect",rt?"none":"non-scaling-stroke").attr("d",isNaN(($0-V0)*(gm-W0))||F0&&jt._context.staticPlot?"M0,0Z":e0).call(w.setClipUrl,aa.layerClipId,jt),!zt.uniformtext.mode&&_0){var R1=w.makePointStyleFns(mt);w.singlePointStyle(c0,zm,mt,R1,jt)}tt(jt,aa,I0,we,M0,V0,$0,W0,gm,Bp,T0,pt,gt),aa.layerClipId&&w.hideOutsideRangePoint(c0,I0.select("text"),te,Et,mt.xcalendar,mt.ycalendar)});var Gp=mt.cliponaxis===!1;w.setClipUrl(ot,Gp?null:aa.layerClipId,jt)});S.getComponentMethod("errorbars","plot")(jt,Z,aa,pt)}function tt(jt,aa,ca,Cp,pt,gt,te,Et,zt,rt,Z,we,ot){var mt=aa.xaxis,It=aa.yaxis,Yt=jt._fullLayout,Sr;function Op(o0,C0,T0){var A0=m.ensureSingle(o0,"text").text(C0).attr({class:"bartext bartext-"+Sr,"text-anchor":"middle","data-notex":1}).call(w.font,T0).call(E.convertToTspans,jt);return A0}var Hp=Cp[0].trace,n0=Hp.orientation==="h",R0=wt(Yt,Cp,pt,mt,It);Sr=St(Hp,pt);var w0=we.mode==="stack"||we.mode==="relative",_0=Cp[pt],ha=!w0||_0._outmost,Rp=_0.hasB,Gt=rt&&rt-Z>L;if(!R0||Sr==="none"||(_0.isBlank||gt===te||Et===zt)&&(Sr==="auto"||Sr==="inside")){ca.select("text").remove();return}var Gp=Yt.font,c0=O.getBarColor(Cp[pt],Hp),M0=O.getInsideTextFont(Hp,pt,Gp,c0),I0=O.getOutsideTextFont(Hp,pt,Gp),k0=Hp.insidetextanchor||"end",V0=ca.datum();n0?mt.type==="log"&&V0.s0<=0&&(mt.range[0]<mt.range[1]?gt=0:gt=mt._length):It.type==="log"&&V0.s0<=0&&(It.range[0]<It.range[1]?Et=It._length:Et=0);var $0=Math.abs(te-gt),W0=Math.abs(zt-Et),gm=$0-2*L,F0=W0-2*L,bm,Dm,vm,km,Yo;if(Sr==="outside"&&!ha&&!_0.hasB&&(Sr="inside"),Sr==="auto")if(ha){Sr="inside",Yo=m.ensureUniformFontSize(jt,M0),bm=Op(ca,R0,Yo),Dm=w.bBox(bm.node()),vm=Dm.width,km=Dm.height;var qp=vm>0&&km>0,Mt;Gt?Rp?Mt=ht(gm-2*rt,F0,vm,km,n0)||ht(gm,F0-2*rt,vm,km,n0):n0?Mt=ht(gm-(rt-Z),F0,vm,km,n0)||ht(gm,F0-2*(rt-Z),vm,km,n0):Mt=ht(gm,F0-(rt-Z),vm,km,n0)||ht(gm-2*(rt-Z),F0,vm,km,n0):Mt=ht(gm,F0,vm,km,n0),qp&&Mt?Sr="inside":(Sr="outside",bm.remove(),bm=null)}else Sr="inside";if(!bm){Yo=m.ensureUniformFontSize(jt,Sr==="outside"?I0:M0),bm=Op(ca,R0,Yo);var Wt=bm.attr("transform");if(bm.attr("transform",""),Dm=w.bBox(bm.node()),vm=Dm.width,km=Dm.height,bm.attr("transform",Wt),vm<=0||km<=0){bm.remove();return}}var xn=Hp.textangle,Fp,Bp;Sr==="outside"?(Bp=Hp.constraintext==="both"||Hp.constraintext==="outside",Fp=Le(gt,te,Et,zt,Dm,{isHorizontal:n0,constrained:Bp,angle:xn})):(Bp=Hp.constraintext==="both"||Hp.constraintext==="inside",Fp=vt(gt,te,Et,zt,Dm,{isHorizontal:n0,constrained:Bp,angle:xn,anchor:k0,hasB:Rp,r:rt,overhead:Z})),Fp.fontSize=Yo.size,F(Hp.type==="histogram"?"bar":Hp.type,Fp,Yt),_0.transform=Fp;var e0=Re(bm,Yt,we,ot);m.setTransormAndDisplay(e0,Fp)}function ht(jt,aa,ca,Cp,pt){if(jt<0||aa<0)return!1;var gt=ca<=jt&&Cp<=aa,te=ca<=aa&&Cp<=jt,Et=pt?jt>=ca*(aa/Cp):aa>=Cp*(jt/ca);return gt||te||Et}function it(jt){return jt==="auto"?0:jt}function ut(jt,aa){var ca=Math.PI/180*aa,Cp=Math.abs(Math.sin(ca)),pt=Math.abs(Math.cos(ca));return{x:jt.width*pt+jt.height*Cp,y:jt.width*Cp+jt.height*pt}}function vt(jt,aa,ca,Cp,pt,gt){var te=!!gt.isHorizontal,Et=!!gt.constrained,zt=gt.angle||0,rt=gt.anchor,Z=rt==="end",we=rt==="start",ot=gt.leftToRight||0,mt=(ot+1)/2,It=1-mt,Yt=gt.hasB,Sr=gt.r,Op=gt.overhead,Hp=pt.width,n0=pt.height,R0=Math.abs(aa-jt),w0=Math.abs(Cp-ca),_0=R0>2*L&&w0>2*L?L:0;R0-=2*_0,w0-=2*_0;var ha=it(zt);zt==="auto"&&!(Hp<=R0&&n0<=w0)&&(Hp>R0||n0>w0)&&(!(Hp>w0||n0>R0)||Hp<n0!=R0<w0)&&(ha+=90);var Rp=ut(pt,ha),Gt,Gp;if(Sr&&Sr-Op>L){var c0=_t(jt,aa,ca,Cp,Rp,Sr,Op,te,Yt);Gt=c0.scale,Gp=c0.pad}else Gt=1,Et&&(Gt=Math.min(1,R0/Rp.x,w0/Rp.y)),Gp=0;var M0=pt.left*It+pt.right*mt,I0=(pt.top+pt.bottom)/2,k0=(jt+L)*It+(aa-L)*mt,V0=(ca+Cp)/2,$0=0,W0=0;if(we||Z){var gm=(te?Rp.x:Rp.y)/2;Sr&&(Z||Yt)&&(_0+=Gp);var F0=te?yt(jt,aa):yt(ca,Cp);te?we?(k0=jt+F0*_0,$0=-F0*gm):(k0=aa-F0*_0,$0=F0*gm):we?(V0=ca+F0*_0,W0=-F0*gm):(V0=Cp-F0*_0,W0=F0*gm)}return{textX:M0,textY:I0,targetX:k0,targetY:V0,anchorX:$0,anchorY:W0,scale:Gt,rotate:ha}}function _t(jt,aa,ca,Cp,pt,gt,te,Et,zt){var rt=Math.max(0,Math.abs(aa-jt)-2*L),Z=Math.max(0,Math.abs(Cp-ca)-2*L),we=gt-L,ot=te?we-Math.sqrt(we*we-(we-te)*(we-te)):we,mt=zt?we*2:Et?we-te:2*ot,It=zt?we*2:Et?2*ot:we-te,Yt,Sr,Op,Hp,n0;return pt.y/pt.x>=Z/(rt-mt)?Hp=Z/pt.y:pt.y/pt.x<=(Z-It)/rt?Hp=rt/pt.x:!zt&&Et?(Yt=pt.x*pt.x+pt.y*pt.y/4,Sr=-2*pt.x*(rt-we)-pt.y*(Z/2-we),Op=(rt-we)*(rt-we)+(Z/2-we)*(Z/2-we)-we*we,Hp=(-Sr+Math.sqrt(Sr*Sr-4*Yt*Op))/(2*Yt)):zt?(Yt=(pt.x*pt.x+pt.y*pt.y)/4,Sr=-pt.x*(rt/2-we)-pt.y*(Z/2-we),Op=(rt/2-we)*(rt/2-we)+(Z/2-we)*(Z/2-we)-we*we,Hp=(-Sr+Math.sqrt(Sr*Sr-4*Yt*Op))/(2*Yt)):(Yt=pt.x*pt.x/4+pt.y*pt.y,Sr=-pt.x*(rt/2-we)-2*pt.y*(Z-we),Op=(rt/2-we)*(rt/2-we)+(Z-we)*(Z-we)-we*we,Hp=(-Sr+Math.sqrt(Sr*Sr-4*Yt*Op))/(2*Yt)),Hp=Math.min(1,Hp),Et?n0=Math.max(0,we-Math.sqrt(Math.max(0,we*we-(we-(Z-pt.y*Hp)/2)*(we-(Z-pt.y*Hp)/2)))-te):n0=Math.max(0,we-Math.sqrt(Math.max(0,we*we-(we-(rt-pt.x*Hp)/2)*(we-(rt-pt.x*Hp)/2)))-te),{scale:Hp,pad:n0}}function Le(jt,aa,ca,Cp,pt,gt){var te=!!gt.isHorizontal,Et=!!gt.constrained,zt=gt.angle||0,rt=pt.width,Z=pt.height,we=Math.abs(aa-jt),ot=Math.abs(Cp-ca),mt;te?mt=ot>2*L?L:0:mt=we>2*L?L:0;var It=1;Et&&(It=te?Math.min(1,ot/Z):Math.min(1,we/rt));var Yt=it(zt),Sr=ut(pt,Yt),Op=(te?Sr.x:Sr.y)/2,Hp=(pt.left+pt.right)/2,n0=(pt.top+pt.bottom)/2,R0=(jt+aa)/2,w0=(ca+Cp)/2,_0=0,ha=0,Rp=te?yt(aa,jt):yt(ca,Cp);return te?(R0=aa-Rp*mt,_0=Rp*Op):(w0=Cp+Rp*mt,ha=-Rp*Op),{textX:Hp,textY:n0,targetX:R0,targetY:w0,anchorX:_0,anchorY:ha,scale:It,rotate:Yt}}function wt(jt,aa,ca,Cp,pt){var gt=aa[0].trace,te=gt.texttemplate,Et;return te?Et=Ut(jt,aa,ca,Cp,pt):gt.textinfo?Et=kt(aa,ca,Cp,pt):Et=$.getValue(gt.text,ca),$.coerceString(I,Et)}function St(jt,aa){var ca=$.getValue(jt.textposition,aa);return $.coerceEnumerated(G,ca)}function Ut(jt,aa,ca,Cp,pt){var gt=aa[0].trace,te=m.castOption(gt,ca,"texttemplate");if(!te)return"";var Et=gt.type==="histogram",zt=gt.type==="waterfall",rt=gt.type==="funnel",Z=gt.orientation==="h",we,ot,mt,It;Z?(we="y",ot=pt,mt="x",It=Cp):(we="x",ot=Cp,mt="y",It=pt);function Yt(_0){return C(ot,ot.c2l(_0),!0).text}function Sr(_0){return C(It,It.c2l(_0),!0).text}var Op=aa[ca],Hp={};Hp.label=Op.p,Hp.labelLabel=Hp[we+"Label"]=Yt(Op.p);var n0=m.castOption(gt,Op.i,"text");(n0===0||n0)&&(Hp.text=n0),Hp.value=Op.s,Hp.valueLabel=Hp[mt+"Label"]=Sr(Op.s);var R0={};M(R0,gt,Op.i),(Et||R0.x===void 0)&&(R0.x=Z?Hp.value:Hp.label),(Et||R0.y===void 0)&&(R0.y=Z?Hp.label:Hp.value),(Et||R0.xLabel===void 0)&&(R0.xLabel=Z?Hp.valueLabel:Hp.labelLabel),(Et||R0.yLabel===void 0)&&(R0.yLabel=Z?Hp.labelLabel:Hp.valueLabel),zt&&(Hp.delta=+Op.rawS||Op.s,Hp.deltaLabel=Sr(Hp.delta),Hp.final=Op.v,Hp.finalLabel=Sr(Hp.final),Hp.initial=Hp.final-Hp.delta,Hp.initialLabel=Sr(Hp.initial)),rt&&(Hp.value=Op.s,Hp.valueLabel=Sr(Hp.value),Hp.percentInitial=Op.begR,Hp.percentInitialLabel=m.formatPercent(Op.begR),Hp.percentPrevious=Op.difR,Hp.percentPreviousLabel=m.formatPercent(Op.difR),Hp.percentTotal=Op.sumR,Hp.percenTotalLabel=m.formatPercent(Op.sumR));var w0=m.castOption(gt,Op.i,"customdata");return w0&&(Hp.customdata=w0),m.texttemplateString(te,Hp,jt._d3locale,R0,Hp,gt._meta||{})}function kt(jt,aa,ca,Cp){var pt=jt[0].trace,gt=pt.orientation==="h",te=pt.type==="waterfall",Et=pt.type==="funnel";function zt(w0){var _0=gt?Cp:ca;return C(_0,w0,!0).text}function rt(w0){var _0=gt?ca:Cp;return C(_0,+w0,!0).text}var Z=pt.textinfo,we=jt[aa],ot=Z.split("+"),mt=[],It,Yt=function(w0){return ot.indexOf(w0)!==-1};if(Yt("label")&&mt.push(zt(jt[aa].p)),Yt("text")&&(It=m.castOption(pt,we.i,"text"),(It===0||It)&&mt.push(It)),te){var Sr=+we.rawS||we.s,Op=we.v,Hp=Op-Sr;Yt("initial")&&mt.push(rt(Hp)),Yt("delta")&&mt.push(rt(Sr)),Yt("final")&&mt.push(rt(Op))}if(Et){Yt("value")&&mt.push(rt(we.s));var n0=0;Yt("percent initial")&&n0++,Yt("percent previous")&&n0++,Yt("percent total")&&n0++;var R0=n0>1;Yt("percent initial")&&(It=m.formatPercent(we.begR),R0&&(It+=" of initial"),mt.push(It)),Yt("percent previous")&&(It=m.formatPercent(we.difR),R0&&(It+=" of previous"),mt.push(It)),Yt("percent total")&&(It=m.formatPercent(we.sumR),R0&&(It+=" of total"),mt.push(It))}return mt.join("<br>")}ke.exports={plot:xt,toMoveInsideBar:vt}}),l_=r((nt,ke)=>{var _=ey(),d=y1(),m=Mn(),E=et().fillText,b=g2().getLineWidth,w=Im().hoverLabelText,S=g().BADNUM;function C(A,O,$,j,z){var I=p(A,O,$,j,z);if(I){var G=I.cd,M=G[0].trace,L=G[I.index];return I.color=F(M,L),d.getComponentMethod("errorbars","hoverInfo")(L,M,I),[I]}}function p(A,O,$,j,z){var I=A.cd,G=I[0].trace,M=I[0].t,L=j==="closest",B=G.type==="waterfall",X=A.maxHoverDistance,ee=A.maxSpikeDistance,yt,Ze,Re,Q,xt,tt,ht;G.orientation==="h"?(yt=$,Ze=O,Re="y",Q="x",xt=Cp,tt=jt):(yt=O,Ze=$,Re="x",Q="y",tt=Cp,xt=jt);var it=G[Re+"period"],ut=L||it;function vt(It){return Le(It,-1)}function _t(It){return Le(It,1)}function Le(It,Yt){var Sr=It.w;return It[Re]+Yt*Sr/2}function wt(It){return It[Re+"End"]-It[Re+"Start"]}var St=L?vt:it?function(It){return It.p-wt(It)/2}:function(It){return Math.min(vt(It),It.p-M.bardelta/2)},Ut=L?_t:it?function(It){return It.p+wt(It)/2}:function(It){return Math.max(_t(It),It.p+M.bardelta/2)};function kt(It,Yt,Sr){return z.finiteRange&&(Sr=0),_.inbox(It-yt,Yt-yt,Sr+Math.min(1,Math.abs(Yt-It)/ht)-1)}function jt(It){return kt(St(It),Ut(It),X)}function aa(It){return kt(vt(It),_t(It),ee)}function ca(It){var Yt=It[Q];if(B){var Sr=Math.abs(It.rawS)||0;Ze>0?Yt+=Sr:Ze<0&&(Yt-=Sr)}return Yt}function Cp(It){var Yt=Ze,Sr=It.b,Op=ca(It);return _.inbox(Sr-Yt,Op-Yt,X+(Op-Yt)/(Op-Sr)-1)}function pt(It){var Yt=Ze,Sr=It.b,Op=ca(It);return _.inbox(Sr-Yt,Op-Yt,ee+(Op-Yt)/(Op-Sr)-1)}var gt=A[Re+"a"],te=A[Q+"a"];ht=Math.abs(gt.r2c(gt.range[1])-gt.r2c(gt.range[0]));function Et(It){return(xt(It)+tt(It))/2}var zt=_.getDistanceFunction(j,xt,tt,Et);if(_.getClosest(I,zt,A),A.index!==!1&&I[A.index].p!==S){ut||(St=function(It){return Math.min(vt(It),It.p-M.bargroupwidth/2)},Ut=function(It){return Math.max(_t(It),It.p+M.bargroupwidth/2)});var rt=A.index,Z=I[rt],we=G.base?Z.b+Z.s:Z.s;A[Q+"0"]=A[Q+"1"]=te.c2p(Z[Q],!0),A[Q+"LabelVal"]=we;var ot=M.extents[M.extents.round(Z.p)];A[Re+"0"]=gt.c2p(L?St(Z):ot[0],!0),A[Re+"1"]=gt.c2p(L?Ut(Z):ot[1],!0);var mt=Z.orig_p!==void 0;return A[Re+"LabelVal"]=mt?Z.orig_p:Z.p,A.labelLabel=w(gt,A[Re+"LabelVal"],G[Re+"hoverformat"]),A.valueLabel=w(te,A[Q+"LabelVal"],G[Q+"hoverformat"]),A.baseLabel=w(te,Z.b,G[Q+"hoverformat"]),A.spikeDistance=(pt(Z)+aa(Z))/2,A[Re+"Spike"]=gt.c2p(Z.p,!0),E(Z,G,A),A.hovertemplate=G.hovertemplate,A}}function F(A,O){var $=O.mcc||A.marker.color,j=O.mlcc||A.marker.line.color,z=b(A,O);if(m.opacity($))return $;if(m.opacity(j)&&z)return j}ke.exports={hoverPoints:C,hoverOnBars:p,getTraceColor:F}}),u_=r((nt,ke)=>{ke.exports=function(_,d,m){return _.x="xVal"in d?d.xVal:d.x,_.y="yVal"in d?d.yVal:d.y,d.xa&&(_.xaxis=d.xa),d.ya&&(_.yaxis=d.ya),m.orientation==="h"?(_.label=_.y,_.value=_.x):(_.label=_.x,_.value=_.y),_}}),sw=r((nt,ke)=>{ke.exports=function(d,m){var E=d.cd,b=d.xaxis,w=d.yaxis,S=E[0].trace,C=S.type==="funnel",p=S.orientation==="h",F=[],A;if(m===!1)for(A=0;A<E.length;A++)E[A].selected=0;else for(A=0;A<E.length;A++){var O=E[A],$="ct"in O?O.ct:_(O,b,w,p,C);m.contains($,!1,A,d)?(F.push({pointNumber:A,x:b.c2d(O.x),y:w.c2d(O.y)}),O.selected=1):O.selected=0}return F};function _(d,m,E,b,w){var S=m.c2p(b?d.s0:d.p0,!0),C=m.c2p(b?d.s1:d.p1,!0),p=E.c2p(b?d.p0:d.s0,!0),F=E.c2p(b?d.p1:d.s1,!0);return w?[(S+C)/2,(p+F)/2]:b?[C,(p+F)/2]:[(S+C)/2,F]}}),lw=r((nt,ke)=>{ke.exports={attributes:o_(),layoutAttributes:Gx(),supplyDefaults:px().supplyDefaults,crossTraceDefaults:px().crossTraceDefaults,supplyLayoutDefaults:Zb(),calc:$x(),crossTraceCalc:J2().crossTraceCalc,colorbar:l2(),arraysToCalcdata:X_(),plot:Jb().plot,style:s_().style,styleOnSelect:s_().styleOnSelect,hoverPoints:l_().hoverPoints,eventData:u_(),selectPoints:sw(),moduleType:"trace",name:"bar",basePlotModule:Ux(),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{}}}),N2=r((nt,ke)=>{ke.exports=lw()}),c_=r((nt,ke)=>{var _=$t(),d=Wb().attributes,m=ct(),E=Lp(),b=pm().hovertemplateAttrs,w=pm().texttemplateAttrs,S=se().extendFlat,C=a1().pattern,p=m({editType:"plot",arrayOk:!0,colorEditType:"plot"});ke.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:E.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},pattern:C,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:S({},_.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:b({},{keys:["label","color","value","percent","text"]}),texttemplate:w({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:S({},p,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:S({},p,{}),outsidetextfont:S({},p,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:S({},p,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:d({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"}}}),uw=r((nt,ke)=>{var _=v(),d=et(),m=c_(),E=Wb().defaults,b=px().handleText,w=et().coercePattern;function S(F,A){var O=d.isArrayOrTypedArray(F),$=d.isArrayOrTypedArray(A),j=Math.min(O?F.length:1/0,$?A.length:1/0);if(isFinite(j)||(j=0),j&&$){for(var z,I=0;I<j;I++){var G=A[I];if(_(G)&&G>0){z=!0;break}}z||(j=0)}return{hasLabels:O,hasValues:$,len:j}}function C(F,A,O,$,j){var z=$("marker.line.width");z&&$("marker.line.color",j?void 0:O.paper_bgcolor);var I=$("marker.colors");w($,"marker.pattern",I),F.marker&&!A.marker.pattern.fgcolor&&(A.marker.pattern.fgcolor=F.marker.colors),A.marker.pattern.bgcolor||(A.marker.pattern.bgcolor=O.paper_bgcolor)}function p(F,A,O,$){function j(tt,ht){return d.coerce(F,A,m,tt,ht)}var z=j("labels"),I=j("values"),G=S(z,I),M=G.len;if(A._hasLabels=G.hasLabels,A._hasValues=G.hasValues,!A._hasLabels&&A._hasValues&&(j("label0"),j("dlabel")),!M){A.visible=!1;return}A._length=M,C(F,A,$,j,!0),j("scalegroup");var L=j("text"),B=j("texttemplate"),X;if(B||(X=j("textinfo",d.isArrayOrTypedArray(L)?"text+percent":"percent")),j("hovertext"),j("hovertemplate"),B||X&&X!=="none"){var ee=j("textposition");b(F,A,$,j,ee,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1});var yt=Array.isArray(ee)||ee==="auto",Ze=yt||ee==="outside";Ze&&j("automargin"),(ee==="inside"||ee==="auto"||Array.isArray(ee))&&j("insidetextorientation")}else X==="none"&&j("textposition","none");E(A,$,j);var Re=j("hole"),Q=j("title.text");if(Q){var xt=j("title.position",Re?"middle center":"top center");!Re&&xt==="middle center"&&(A.title.position="top center"),d.coerceFont(j,"title.font",$.font)}j("sort"),j("direction"),j("rotation"),j("pull")}ke.exports={handleLabelsAndValues:S,handleMarkerDefaults:C,supplyDefaults:p}}),Y_=r((nt,ke)=>{ke.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}}),Kb=r((nt,ke)=>{var _=et(),d=Y_();ke.exports=function(m,E){function b(w,S){return _.coerce(m,E,d,w,S)}b("hiddenlabels"),b("piecolorway",E.colorway),b("extendpiecolors")}}),Xy=r((nt,ke)=>{var _=v(),d=ie(),m=Mn(),E={};function b(p,F){var A=[],O=p._fullLayout,$=O.hiddenlabels||[],j=F.labels,z=F.marker.colors||[],I=F.values,G=F._length,M=F._hasValues&&G,L,B;if(F.dlabel)for(j=new Array(G),L=0;L<G;L++)j[L]=String(F.label0+L*F.dlabel);var X={},ee=w(O["_"+F.type+"colormap"]),yt=0,Ze=!1;for(L=0;L<G;L++){var Re,Q,xt;if(M){if(Re=I[L],!_(Re))continue;Re=+Re}else Re=1;Q=j[L],(Q===void 0||Q==="")&&(Q=L),Q=String(Q);var tt=X[Q];tt===void 0?(X[Q]=A.length,xt=$.indexOf(Q)!==-1,xt||(yt+=Re),A.push({v:Re,label:Q,color:ee(z[L],Q),i:L,pts:[L],hidden:xt})):(Ze=!0,B=A[tt],B.v+=Re,B.pts.push(L),B.hidden||(yt+=Re),B.color===!1&&z[L]&&(B.color=ee(z[L],Q)))}A=A.filter(function(it){return it.v>=0});var ht=F.type==="funnelarea"?Ze:F.sort;return ht&&A.sort(function(it,ut){return ut.v-it.v}),A[0]&&(A[0].vTotal=yt),A}function w(p){return function(F,A){return!F||(F=d(F),!F.isValid())?!1:(F=m.addOpacity(F,F.getAlpha()),p[A]||(p[A]=F),F)}}function S(p,F){var A=(F||{}).type;A||(A="pie");var O=p._fullLayout,$=p.calcdata,j=O[A+"colorway"],z=O["_"+A+"colormap"];O["extend"+A+"colors"]&&(j=C(j,E));for(var I=0,G=0;G<$.length;G++){var M=$[G],L=M[0].trace.type;if(L===A)for(var B=0;B<M.length;B++){var X=M[B];X.color===!1&&(z[X.label]?X.color=z[X.label]:(z[X.label]=X.color=j[I%j.length],I++))}}}function C(p,F){var A,O=JSON.stringify(p),$=F[O];if(!$){for($=p.slice(),A=0;A<p.length;A++)$.push(d(p[A]).lighten(20).toHexString());for(A=0;A<p.length;A++)$.push(d(p[A]).darken(20).toHexString());F[O]=$}return $}ke.exports={calc:b,crossTraceCalc:S,makePullColorFn:w,generateExtendedColors:C}}),cx=r((nt,ke)=>{var _=D0().appendArrayMultiPointValues;ke.exports=function(d,m){var E={curveNumber:m.index,pointNumbers:d.pts,data:m._input,fullData:m,label:d.label,color:d.color,value:d.v,percent:d.percent,text:d.text,bbox:d.bbox,v:d.v};return d.pts.length===1&&(E.pointNumber=E.i=d.pts[0]),_(E,m,d.pts),m.type==="funnelarea"&&(delete E.v,delete E.i),E}}),Wx=r((nt,ke)=>{var _=o(),d=cg(),m=ey(),E=Mn(),b=Q0(),w=et(),S=w.strScale,C=w.strTranslate,p=G1(),F=mx(),A=F.recordMinTextSize,O=F.clearMinTextSize,$=R2().TEXTPAD,j=C1(),z=cx(),I=et().isValidTextValue;function G(gt,te){var Et=gt._context.staticPlot,zt=gt._fullLayout,rt=zt._size;O("pie",zt),ee(te,gt),kt(te,rt);var Z=w.makeTraceGroups(zt._pielayer,te,"trace").each(function(we){var ot=_.select(this),mt=we[0],It=mt.trace;aa(we),ot.attr("stroke-linejoin","round"),ot.each(function(){var Yt=_.select(this).selectAll("g.slice").data(we);Yt.enter().append("g").classed("slice",!0),Yt.exit().remove();var Sr=[[[],[]],[[],[]]],Op=!1;Yt.each(function(Gt,Gp){if(Gt.hidden){_.select(this).selectAll("path,g").remove();return}Gt.pointNumber=Gt.i,Gt.curveNumber=It.index,Sr[Gt.pxmid[1]<0?0:1][Gt.pxmid[0]<0?0:1].push(Gt);var c0=mt.cx,M0=mt.cy,I0=_.select(this),k0=I0.selectAll("path.surface").data([Gt]);if(k0.enter().append("path").classed("surface",!0).style({"pointer-events":Et?"none":"all"}),I0.call(L,gt,we),It.pull){var V0=+j.castOption(It.pull,Gt.pts)||0;V0>0&&(c0+=V0*Gt.pxmid[0],M0+=V0*Gt.pxmid[1])}Gt.cxFinal=c0,Gt.cyFinal=M0;function $0(km,Yo,qp,Mt){var Wt=Mt*(Yo[0]-km[0]),xn=Mt*(Yo[1]-km[1]);return"a"+Mt*mt.r+","+Mt*mt.r+" 0 "+Gt.largeArc+(qp?" 1 ":" 0 ")+Wt+","+xn}var W0=It.hole;if(Gt.v===mt.vTotal){var gm="M"+(c0+Gt.px0[0])+","+(M0+Gt.px0[1])+$0(Gt.px0,Gt.pxmid,!0,1)+$0(Gt.pxmid,Gt.px0,!0,1)+"Z";W0?k0.attr("d","M"+(c0+W0*Gt.px0[0])+","+(M0+W0*Gt.px0[1])+$0(Gt.px0,Gt.pxmid,!1,W0)+$0(Gt.pxmid,Gt.px0,!1,W0)+"Z"+gm):k0.attr("d",gm)}else{var F0=$0(Gt.px0,Gt.px1,!0,1);if(W0){var bm=1-W0;k0.attr("d","M"+(c0+W0*Gt.px1[0])+","+(M0+W0*Gt.px1[1])+$0(Gt.px1,Gt.px0,!1,W0)+"l"+bm*Gt.px0[0]+","+bm*Gt.px0[1]+F0+"Z")}else k0.attr("d","M"+c0+","+M0+"l"+Gt.px0[0]+","+Gt.px0[1]+F0+"Z")}Cp(gt,Gt,mt);var Dm=j.castOption(It.textposition,Gt.pts),vm=I0.selectAll("g.slicetext").data(Gt.text&&Dm!=="none"?[0]:[]);vm.enter().append("g").classed("slicetext",!0),vm.exit().remove(),vm.each(function(){var km=w.ensureSingle(_.select(this),"text","",function(e0){e0.attr("data-notex",1)}),Yo=w.ensureUniformFontSize(gt,Dm==="outside"?B(It,Gt,zt.font):X(It,Gt,zt.font));km.text(Gt.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(b.font,Yo).call(p.convertToTspans,gt);var qp=b.bBox(km.node()),Mt;if(Dm==="outside")Mt=ut(qp,Gt);else if(Mt=yt(qp,Gt,mt),Dm==="auto"&&Mt.scale<1){var Wt=w.ensureUniformFontSize(gt,It.outsidetextfont);km.call(b.font,Wt),qp=b.bBox(km.node()),Mt=ut(qp,Gt)}var xn=Mt.textPosAngle,Fp=xn===void 0?Gt.pxmid:ca(mt.r,xn);if(Mt.targetX=c0+Fp[0]*Mt.rCenter+(Mt.x||0),Mt.targetY=M0+Fp[1]*Mt.rCenter+(Mt.y||0),pt(Mt,qp),Mt.outside){var Bp=Mt.targetY;Gt.yLabelMin=Bp-qp.height/2,Gt.yLabelMid=Bp,Gt.yLabelMax=Bp+qp.height/2,Gt.labelExtraX=0,Gt.labelExtraY=0,Op=!0}Mt.fontSize=Yo.size,A(It.type,Mt,zt),we[Gp].transform=Mt,w.setTransormAndDisplay(km,Mt)})});var Hp=_.select(this).selectAll("g.titletext").data(It.title.text?[0]:[]);if(Hp.enter().append("g").classed("titletext",!0),Hp.exit().remove(),Hp.each(function(){var Gt=w.ensureSingle(_.select(this),"text","",function(M0){M0.attr("data-notex",1)}),Gp=It.title.text;It._meta&&(Gp=w.templateString(Gp,It._meta)),Gt.text(Gp).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(b.font,It.title.font).call(p.convertToTspans,gt);var c0;It.title.position==="middle center"?c0=vt(mt):c0=_t(mt,rt),Gt.attr("transform",C(c0.x,c0.y)+S(Math.min(1,c0.scale))+C(c0.tx,c0.ty))}),Op&&Ut(Sr,It),M(Yt,It),Op&&It.automargin){var n0=b.bBox(ot.node()),R0=It.domain,w0=rt.w*(R0.x[1]-R0.x[0]),_0=rt.h*(R0.y[1]-R0.y[0]),ha=(.5*w0-mt.r)/rt.w,Rp=(.5*_0-mt.r)/rt.h;d.autoMargin(gt,"pie."+It.uid+".automargin",{xl:R0.x[0]-ha,xr:R0.x[1]+ha,yb:R0.y[0]-Rp,yt:R0.y[1]+Rp,l:Math.max(mt.cx-mt.r-n0.left,0),r:Math.max(n0.right-(mt.cx+mt.r),0),b:Math.max(n0.bottom-(mt.cy+mt.r),0),t:Math.max(mt.cy-mt.r-n0.top,0),pad:5})}})});setTimeout(function(){Z.selectAll("tspan").each(function(){var we=_.select(this);we.attr("dy")&&we.attr("dy",we.attr("dy"))})},0)}function M(gt,te){gt.each(function(Et){var zt=_.select(this);if(!Et.labelExtraX&&!Et.labelExtraY){zt.select("path.textline").remove();return}var rt=zt.select("g.slicetext text");Et.transform.targetX+=Et.labelExtraX,Et.transform.targetY+=Et.labelExtraY,w.setTransormAndDisplay(rt,Et.transform);var Z=Et.cxFinal+Et.pxmid[0],we=Et.cyFinal+Et.pxmid[1],ot="M"+Z+","+we,mt=(Et.yLabelMax-Et.yLabelMin)*(Et.pxmid[0]<0?-1:1)/4;if(Et.labelExtraX){var It=Et.labelExtraX*Et.pxmid[1]/Et.pxmid[0],Yt=Et.yLabelMid+Et.labelExtraY-(Et.cyFinal+Et.pxmid[1]);Math.abs(It)>Math.abs(Yt)?ot+="l"+Yt*Et.pxmid[0]/Et.pxmid[1]+","+Yt+"H"+(Z+Et.labelExtraX+mt):ot+="l"+Et.labelExtraX+","+It+"v"+(Yt-It)+"h"+mt}else ot+="V"+(Et.yLabelMid+Et.labelExtraY)+"h"+mt;w.ensureSingle(zt,"path","textline").call(E.stroke,te.outsidetextfont.color).attr({"stroke-width":Math.min(2,te.outsidetextfont.size/8),d:ot,fill:"none"})})}function L(gt,te,Et){var zt=Et[0],rt=zt.cx,Z=zt.cy,we=zt.trace,ot=we.type==="funnelarea";"_hasHoverLabel"in we||(we._hasHoverLabel=!1),"_hasHoverEvent"in we||(we._hasHoverEvent=!1),gt.on("mouseover",function(mt){var It=te._fullLayout,Yt=te._fullData[we.index];if(!(te._dragging||It.hovermode===!1)){var Sr=Yt.hoverinfo;if(Array.isArray(Sr)&&(Sr=m.castHoverinfo({hoverinfo:[j.castOption(Sr,mt.pts)],_module:we._module},It,0)),Sr==="all"&&(Sr="label+text+value+percent+name"),Yt.hovertemplate||Sr!=="none"&&Sr!=="skip"&&Sr){var Op=mt.rInscribed||0,Hp=rt+mt.pxmid[0]*(1-Op),n0=Z+mt.pxmid[1]*(1-Op),R0=It.separators,w0=[];if(Sr&&Sr.indexOf("label")!==-1&&w0.push(mt.label),mt.text=j.castOption(Yt.hovertext||Yt.text,mt.pts),Sr&&Sr.indexOf("text")!==-1){var _0=mt.text;w.isValidTextValue(_0)&&w0.push(_0)}mt.value=mt.v,mt.valueLabel=j.formatPieValue(mt.v,R0),Sr&&Sr.indexOf("value")!==-1&&w0.push(mt.valueLabel),mt.percent=mt.v/zt.vTotal,mt.percentLabel=j.formatPiePercent(mt.percent,R0),Sr&&Sr.indexOf("percent")!==-1&&w0.push(mt.percentLabel);var ha=Yt.hoverlabel,Rp=ha.font,Gt=[];m.loneHover({trace:we,x0:Hp-Op*zt.r,x1:Hp+Op*zt.r,y:n0,_x0:ot?rt+mt.TL[0]:Hp-Op*zt.r,_x1:ot?rt+mt.TR[0]:Hp+Op*zt.r,_y0:ot?Z+mt.TL[1]:n0-Op*zt.r,_y1:ot?Z+mt.BL[1]:n0+Op*zt.r,text:w0.join("<br>"),name:Yt.hovertemplate||Sr.indexOf("name")!==-1?Yt.name:void 0,idealAlign:mt.pxmid[0]<0?"left":"right",color:j.castOption(ha.bgcolor,mt.pts)||mt.color,borderColor:j.castOption(ha.bordercolor,mt.pts),fontFamily:j.castOption(Rp.family,mt.pts),fontSize:j.castOption(Rp.size,mt.pts),fontColor:j.castOption(Rp.color,mt.pts),nameLength:j.castOption(ha.namelength,mt.pts),textAlign:j.castOption(ha.align,mt.pts),hovertemplate:j.castOption(Yt.hovertemplate,mt.pts),hovertemplateLabels:mt,eventData:[z(mt,Yt)]},{container:It._hoverlayer.node(),outerContainer:It._paper.node(),gd:te,inOut_bbox:Gt}),mt.bbox=Gt[0],we._hasHoverLabel=!0}we._hasHoverEvent=!0,te.emit("plotly_hover",{points:[z(mt,Yt)],event:_.event})}}),gt.on("mouseout",function(mt){var It=te._fullLayout,Yt=te._fullData[we.index],Sr=_.select(this).datum();we._hasHoverEvent&&(mt.originalEvent=_.event,te.emit("plotly_unhover",{points:[z(Sr,Yt)],event:_.event}),we._hasHoverEvent=!1),we._hasHoverLabel&&(m.loneUnhover(It._hoverlayer.node()),we._hasHoverLabel=!1)}),gt.on("click",function(mt){var It=te._fullLayout,Yt=te._fullData[we.index];te._dragging||It.hovermode===!1||(te._hoverdata=[z(mt,Yt)],m.click(te,_.event))})}function B(gt,te,Et){var zt=j.castOption(gt.outsidetextfont.color,te.pts)||j.castOption(gt.textfont.color,te.pts)||Et.color,rt=j.castOption(gt.outsidetextfont.family,te.pts)||j.castOption(gt.textfont.family,te.pts)||Et.family,Z=j.castOption(gt.outsidetextfont.size,te.pts)||j.castOption(gt.textfont.size,te.pts)||Et.size,we=j.castOption(gt.outsidetextfont.weight,te.pts)||j.castOption(gt.textfont.weight,te.pts)||Et.weight,ot=j.castOption(gt.outsidetextfont.style,te.pts)||j.castOption(gt.textfont.style,te.pts)||Et.style,mt=j.castOption(gt.outsidetextfont.variant,te.pts)||j.castOption(gt.textfont.variant,te.pts)||Et.variant,It=j.castOption(gt.outsidetextfont.textcase,te.pts)||j.castOption(gt.textfont.textcase,te.pts)||Et.textcase,Yt=j.castOption(gt.outsidetextfont.lineposition,te.pts)||j.castOption(gt.textfont.lineposition,te.pts)||Et.lineposition,Sr=j.castOption(gt.outsidetextfont.shadow,te.pts)||j.castOption(gt.textfont.shadow,te.pts)||Et.shadow;return{color:zt,family:rt,size:Z,weight:we,style:ot,variant:mt,textcase:It,lineposition:Yt,shadow:Sr}}function X(gt,te,Et){var zt=j.castOption(gt.insidetextfont.color,te.pts);!zt&&gt._input.textfont&&(zt=j.castOption(gt._input.textfont.color,te.pts));var rt=j.castOption(gt.insidetextfont.family,te.pts)||j.castOption(gt.textfont.family,te.pts)||Et.family,Z=j.castOption(gt.insidetextfont.size,te.pts)||j.castOption(gt.textfont.size,te.pts)||Et.size,we=j.castOption(gt.insidetextfont.weight,te.pts)||j.castOption(gt.textfont.weight,te.pts)||Et.weight,ot=j.castOption(gt.insidetextfont.style,te.pts)||j.castOption(gt.textfont.style,te.pts)||Et.style,mt=j.castOption(gt.insidetextfont.variant,te.pts)||j.castOption(gt.textfont.variant,te.pts)||Et.variant,It=j.castOption(gt.insidetextfont.textcase,te.pts)||j.castOption(gt.textfont.textcase,te.pts)||Et.textcase,Yt=j.castOption(gt.insidetextfont.lineposition,te.pts)||j.castOption(gt.textfont.lineposition,te.pts)||Et.lineposition,Sr=j.castOption(gt.insidetextfont.shadow,te.pts)||j.castOption(gt.textfont.shadow,te.pts)||Et.shadow;return{color:zt||E.contrast(te.color),family:rt,size:Z,weight:we,style:ot,variant:mt,textcase:It,lineposition:Yt,shadow:Sr}}function ee(gt,te){for(var Et,zt,rt=0;rt<gt.length;rt++)if(Et=gt[rt][0],zt=Et.trace,zt.title.text){var Z=zt.title.text;zt._meta&&(Z=w.templateString(Z,zt._meta));var we=b.tester.append("text").attr("data-notex",1).text(Z).call(b.font,zt.title.font).call(p.convertToTspans,te),ot=b.bBox(we.node(),!0);Et.titleBox={width:ot.width,height:ot.height},we.remove()}}function yt(gt,te,Et){var zt=Et.r||te.rpx1,rt=te.rInscribed,Z=te.startangle===te.stopangle;if(Z)return{rCenter:1-rt,scale:0,rotate:0,textPosAngle:0};var we=te.ring,ot=we===1&&Math.abs(te.startangle-te.stopangle)===Math.PI*2,mt=te.halfangle,It=te.midangle,Yt=Et.trace.insidetextorientation,Sr=Yt==="horizontal",Op=Yt==="tangential",Hp=Yt==="radial",n0=Yt==="auto",R0=[],w0;if(!n0){var _0=function(I0,k0){if(Ze(te,I0)){var V0=Math.abs(I0-te.startangle),$0=Math.abs(I0-te.stopangle),W0=V0<$0?V0:$0;k0==="tan"?w0=Q(gt,zt,we,W0,0):w0=Re(gt,zt,we,W0,Math.PI/2),w0.textPosAngle=I0,R0.push(w0)}},ha;if(Sr||Op){for(ha=4;ha>=-4;ha-=2)_0(Math.PI*ha,"tan");for(ha=4;ha>=-4;ha-=2)_0(Math.PI*(ha+1),"tan")}if(Sr||Hp){for(ha=4;ha>=-4;ha-=2)_0(Math.PI*(ha+1.5),"rad");for(ha=4;ha>=-4;ha-=2)_0(Math.PI*(ha+.5),"rad")}}if(ot||n0||Sr){var Rp=Math.sqrt(gt.width*gt.width+gt.height*gt.height);if(w0={scale:rt*zt*2/Rp,rCenter:1-rt,rotate:0},w0.textPosAngle=(te.startangle+te.stopangle)/2,w0.scale>=1)return w0;R0.push(w0)}(n0||Hp)&&(w0=Re(gt,zt,we,mt,It),w0.textPosAngle=(te.startangle+te.stopangle)/2,R0.push(w0)),(n0||Op)&&(w0=Q(gt,zt,we,mt,It),w0.textPosAngle=(te.startangle+te.stopangle)/2,R0.push(w0));for(var Gt=0,Gp=0,c0=0;c0<R0.length;c0++){var M0=R0[c0].scale;if(Gp<M0&&(Gp=M0,Gt=c0),!n0&&Gp>=1)break}return R0[Gt]}function Ze(gt,te){var Et=gt.startangle,zt=gt.stopangle;return Et>te&&te>zt||Et<te&&te<zt}function Re(gt,te,Et,zt,rt){te=Math.max(0,te-2*$);var Z=gt.width/gt.height,we=ht(Z,zt,te,Et);return{scale:we*2/gt.height,rCenter:xt(Z,we/te),rotate:tt(rt)}}function Q(gt,te,Et,zt,rt){te=Math.max(0,te-2*$);var Z=gt.height/gt.width,we=ht(Z,zt,te,Et);return{scale:we*2/gt.width,rCenter:xt(Z,we/te),rotate:tt(rt+Math.PI/2)}}function xt(gt,te){return Math.cos(te)-gt*te}function tt(gt){return(180/Math.PI*gt+720)%180-90}function ht(gt,te,Et,zt){var rt=gt+1/(2*Math.tan(te));return Et*Math.min(1/(Math.sqrt(rt*rt+.5)+rt),zt/(Math.sqrt(gt*gt+zt/2)+gt))}function it(gt,te){return gt.v===te.vTotal&&!te.trace.hole?1:Math.min(1/(1+1/Math.sin(gt.halfangle)),gt.ring/2)}function ut(gt,te){var Et=te.pxmid[0],zt=te.pxmid[1],rt=gt.width/2,Z=gt.height/2;return Et<0&&(rt*=-1),zt<0&&(Z*=-1),{scale:1,rCenter:1,rotate:0,x:rt+Math.abs(Z)*(rt>0?1:-1)/2,y:Z/(1+Et*Et/(zt*zt)),outside:!0}}function vt(gt){var te=Math.sqrt(gt.titleBox.width*gt.titleBox.width+gt.titleBox.height*gt.titleBox.height);return{x:gt.cx,y:gt.cy,scale:gt.trace.hole*gt.r*2/te,tx:0,ty:-gt.titleBox.height/2+gt.trace.title.font.size}}function _t(gt,te){var Et=1,zt=1,rt,Z=gt.trace,we={x:gt.cx,y:gt.cy},ot={tx:0,ty:0};ot.ty+=Z.title.font.size,rt=St(Z),Z.title.position.indexOf("top")!==-1?(we.y-=(1+rt)*gt.r,ot.ty-=gt.titleBox.height):Z.title.position.indexOf("bottom")!==-1&&(we.y+=(1+rt)*gt.r);var mt=Le(gt.r,gt.trace.aspectratio),It=te.w*(Z.domain.x[1]-Z.domain.x[0])/2;return Z.title.position.indexOf("left")!==-1?(It=It+mt,we.x-=(1+rt)*mt,ot.tx+=gt.titleBox.width/2):Z.title.position.indexOf("center")!==-1?It*=2:Z.title.position.indexOf("right")!==-1&&(It=It+mt,we.x+=(1+rt)*mt,ot.tx-=gt.titleBox.width/2),Et=It/gt.titleBox.width,zt=wt(gt,te)/gt.titleBox.height,{x:we.x,y:we.y,scale:Math.min(Et,zt),tx:ot.tx,ty:ot.ty}}function Le(gt,te){return gt/(te===void 0?1:te)}function wt(gt,te){var Et=gt.trace,zt=te.h*(Et.domain.y[1]-Et.domain.y[0]);return Math.min(gt.titleBox.height,zt/2)}function St(gt){var te=gt.pull;if(!te)return 0;var Et;if(w.isArrayOrTypedArray(te))for(te=0,Et=0;Et<gt.pull.length;Et++)gt.pull[Et]>te&&(te=gt.pull[Et]);return te}function Ut(gt,te){var Et,zt,rt,Z,we,ot,mt,It,Yt,Sr,Op,Hp,n0;function R0(Rp,Gt){return Rp.pxmid[1]-Gt.pxmid[1]}function w0(Rp,Gt){return Gt.pxmid[1]-Rp.pxmid[1]}function _0(Rp,Gt){Gt||(Gt={});var Gp=Gt.labelExtraY+(zt?Gt.yLabelMax:Gt.yLabelMin),c0=zt?Rp.yLabelMin:Rp.yLabelMax,M0=zt?Rp.yLabelMax:Rp.yLabelMin,I0=Rp.cyFinal+we(Rp.px0[1],Rp.px1[1]),k0=Gp-c0,V0,$0,W0,gm,F0,bm;if(k0*mt>0&&(Rp.labelExtraY=k0),!!w.isArrayOrTypedArray(te.pull))for($0=0;$0<Sr.length;$0++)W0=Sr[$0],!(W0===Rp||(j.castOption(te.pull,Rp.pts)||0)>=(j.castOption(te.pull,W0.pts)||0))&&((Rp.pxmid[1]-W0.pxmid[1])*mt>0?(gm=W0.cyFinal+we(W0.px0[1],W0.px1[1]),k0=gm-c0-Rp.labelExtraY,k0*mt>0&&(Rp.labelExtraY+=k0)):(M0+Rp.labelExtraY-I0)*mt>0&&(V0=3*ot*Math.abs($0-Sr.indexOf(Rp)),F0=W0.cxFinal+Z(W0.px0[0],W0.px1[0]),bm=F0+V0-(Rp.cxFinal+Rp.pxmid[0])-Rp.labelExtraX,bm*ot>0&&(Rp.labelExtraX+=bm)))}for(zt=0;zt<2;zt++)for(rt=zt?R0:w0,we=zt?Math.max:Math.min,mt=zt?1:-1,Et=0;Et<2;Et++){for(Z=Et?Math.max:Math.min,ot=Et?1:-1,It=gt[zt][Et],It.sort(rt),Yt=gt[1-zt][Et],Sr=Yt.concat(It),Hp=[],Op=0;Op<It.length;Op++)It[Op].yLabelMid!==void 0&&Hp.push(It[Op]);for(n0=!1,Op=0;zt&&Op<Yt.length;Op++)if(Yt[Op].yLabelMid!==void 0){n0=Yt[Op];break}for(Op=0;Op<Hp.length;Op++){var ha=Op&&Hp[Op-1];n0&&!Op&&(ha=n0),_0(Hp[Op],ha)}}}function kt(gt,te){for(var Et=[],zt=0;zt<gt.length;zt++){var rt=gt[zt][0],Z=rt.trace,we=Z.domain,ot=te.w*(we.x[1]-we.x[0]),mt=te.h*(we.y[1]-we.y[0]);Z.title.text&&Z.title.position!=="middle center"&&(mt-=wt(rt,te));var It=ot/2,Yt=mt/2;Z.type==="funnelarea"&&!Z.scalegroup&&(Yt/=Z.aspectratio),rt.r=Math.min(It,Yt)/(1+St(Z)),rt.cx=te.l+te.w*(Z.domain.x[1]+Z.domain.x[0])/2,rt.cy=te.t+te.h*(1-Z.domain.y[0])-mt/2,Z.title.text&&Z.title.position.indexOf("bottom")!==-1&&(rt.cy-=wt(rt,te)),Z.scalegroup&&Et.indexOf(Z.scalegroup)===-1&&Et.push(Z.scalegroup)}jt(gt,Et)}function jt(gt,te){for(var Et,zt,rt,Z=0;Z<te.length;Z++){var we=1/0,ot=te[Z];for(zt=0;zt<gt.length;zt++)if(Et=gt[zt][0],rt=Et.trace,rt.scalegroup===ot){var mt;if(rt.type==="pie")mt=Et.r*Et.r;else if(rt.type==="funnelarea"){var It,Yt;rt.aspectratio>1?(It=Et.r,Yt=It/rt.aspectratio):(Yt=Et.r,It=Yt*rt.aspectratio),It*=(1+rt.baseratio)/2,mt=It*Yt}we=Math.min(we,mt/Et.vTotal)}for(zt=0;zt<gt.length;zt++)if(Et=gt[zt][0],rt=Et.trace,rt.scalegroup===ot){var Sr=we*Et.vTotal;rt.type==="funnelarea"&&(Sr/=(1+rt.baseratio)/2,Sr/=rt.aspectratio),Et.r=Math.sqrt(Sr)}}}function aa(gt){var te=gt[0],Et=te.r,zt=te.trace,rt=j.getRotationAngle(zt.rotation),Z=2*Math.PI/te.vTotal,we="px0",ot="px1",mt,It,Yt;if(zt.direction==="counterclockwise"){for(mt=0;mt<gt.length&&gt[mt].hidden;mt++);if(mt===gt.length)return;rt+=Z*gt[mt].v,Z*=-1,we="px1",ot="px0"}for(Yt=ca(Et,rt),mt=0;mt<gt.length;mt++)It=gt[mt],!It.hidden&&(It[we]=Yt,It.startangle=rt,rt+=Z*It.v/2,It.pxmid=ca(Et,rt),It.midangle=rt,rt+=Z*It.v/2,Yt=ca(Et,rt),It.stopangle=rt,It[ot]=Yt,It.largeArc=It.v>te.vTotal/2?1:0,It.halfangle=Math.PI*Math.min(It.v/te.vTotal,.5),It.ring=1-zt.hole,It.rInscribed=it(It,te))}function ca(gt,te){return[gt*Math.sin(te),-gt*Math.cos(te)]}function Cp(gt,te,Et){var zt=gt._fullLayout,rt=Et.trace,Z=rt.texttemplate,we=rt.textinfo;if(!Z&&we&&we!=="none"){var ot=we.split("+"),mt=function(Gt){return ot.indexOf(Gt)!==-1},It=mt("label"),Yt=mt("text"),Sr=mt("value"),Op=mt("percent"),Hp=zt.separators,n0;if(n0=It?[te.label]:[],Yt){var R0=j.getFirstFilled(rt.text,te.pts);I(R0)&&n0.push(R0)}Sr&&n0.push(j.formatPieValue(te.v,Hp)),Op&&n0.push(j.formatPiePercent(te.v/Et.vTotal,Hp)),te.text=n0.join("<br>")}function w0(Gt){return{label:Gt.label,value:Gt.v,valueLabel:j.formatPieValue(Gt.v,zt.separators),percent:Gt.v/Et.vTotal,percentLabel:j.formatPiePercent(Gt.v/Et.vTotal,zt.separators),color:Gt.color,text:Gt.text,customdata:w.castOption(rt,Gt.i,"customdata")}}if(Z){var _0=w.castOption(rt,te.i,"texttemplate");if(!_0)te.text="";else{var ha=w0(te),Rp=j.getFirstFilled(rt.text,te.pts);(I(Rp)||Rp==="")&&(ha.text=Rp),te.text=w.texttemplateString(_0,ha,gt._fullLayout._d3locale,ha,rt._meta||{})}}}function pt(gt,te){var Et=gt.rotate*Math.PI/180,zt=Math.cos(Et),rt=Math.sin(Et),Z=(te.left+te.right)/2,we=(te.top+te.bottom)/2;gt.textX=Z*zt-we*rt,gt.textY=Z*rt+we*zt,gt.noCenter=!0}ke.exports={plot:G,formatSliceLabel:Cp,transformInsideText:yt,determineInsideTextFont:X,positionTitleOutside:_t,prerenderTitles:ee,layoutAreas:kt,attachFxHandlers:L,computeTransform:pt}}),Qb=r((nt,ke)=>{var _=o(),d=xg(),m=mx().resizeText;ke.exports=function(E){var b=E._fullLayout._pielayer.selectAll(".trace");m(E,b,"pie"),b.each(function(w){var S=w[0],C=S.trace,p=_.select(this);p.style({opacity:C.opacity}),p.selectAll("path.surface").each(function(F){_.select(this).call(d,F,C,E)})})}}),cw=r(nt=>{var ke=cg();nt.name="pie",nt.plot=function(_,d,m,E){ke.plotBasePlot(nt.name,_,d,m,E)},nt.clean=function(_,d,m,E){ke.cleanBasePlot(nt.name,_,d,m,E)}}),qx=r((nt,ke)=>{ke.exports={attributes:c_(),supplyDefaults:uw().supplyDefaults,supplyLayoutDefaults:Kb(),layoutAttributes:Y_(),calc:Xy().calc,crossTraceCalc:Xy().crossTraceCalc,plot:Wx().plot,style:Qb(),styleOne:xg(),moduleType:"trace",name:"pie",basePlotModule:cw(),categories:["pie-like","pie","showLegend"],meta:{}}}),Qy=r((nt,ke)=>{ke.exports=qx()}),Mv=r((nt,ke)=>{var _=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable;function E(w){if(w==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(w)}function b(){try{if(!Object.assign)return!1;var w=new String("abc");if(w[5]="de",Object.getOwnPropertyNames(w)[0]==="5")return!1;for(var S={},C=0;C<10;C++)S["_"+String.fromCharCode(C)]=C;var p=Object.getOwnPropertyNames(S).map(function(A){return S[A]});if(p.join("")!=="0123456789")return!1;var F={};return"abcdefghijklmnopqrst".split("").forEach(function(A){F[A]=A}),Object.keys(Object.assign({},F)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}ke.exports=b()?Object.assign:function(w,S){for(var C,p=E(w),F,A=1;A<arguments.length;A++){C=Object(arguments[A]);for(var O in C)d.call(C,O)&&(p[O]=C[O]);if(_){F=_(C);for(var $=0;$<F.length;$++)m.call(C,F[$])&&(p[F[$]]=C[F[$]])}}return p}}),Oy=r((nt,ke)=>{var _=Mv();function d(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}_(d.prototype,{instance:function(C,p){C=(C||"gregorian").toLowerCase(),p=p||"";var F=this._localCals[C+"-"+p];if(!F&&this.calendars[C]&&(F=new this.calendars[C](p),this._localCals[C+"-"+p]=F),!F)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,C);return F},newDate:function(C,p,F,A,O){return A=(C!=null&&C.year?C.calendar():typeof A=="string"?this.instance(A,O):A)||this.instance(),A.newDate(C,p,F)},substituteDigits:function(C){return function(p){return(p+"").replace(/[0-9]/g,function(F){return C[F]})}},substituteChineseDigits:function(C,p){return function(F){for(var A="",O=0;F>0;){var $=F%10;A=($===0?"":C[$]+p[O])+A,O++,F=Math.floor(F/10)}return A.indexOf(C[1]+p[1])===0&&(A=A.substr(1)),A||C[0]}}});function m(C,p,F,A){if(this._calendar=C,this._year=p,this._month=F,this._day=A,this._calendar._validateLevel===0&&!this._calendar.isValid(this._year,this._month,this._day))throw(S.local.invalidDate||S.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function E(C,p){return C=""+C,"000000".substring(0,p-C.length)+C}_(m.prototype,{newDate:function(C,p,F){return this._calendar.newDate(C??this,p,F)},year:function(C){return arguments.length===0?this._year:this.set(C,"y")},month:function(C){return arguments.length===0?this._month:this.set(C,"m")},day:function(C){return arguments.length===0?this._day:this.set(C,"d")},date:function(C,p,F){if(!this._calendar.isValid(C,p,F))throw(S.local.invalidDate||S.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=C,this._month=p,this._day=F,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(C,p){return this._calendar.add(this,C,p)},set:function(C,p){return this._calendar.set(this,C,p)},compareTo:function(C){if(this._calendar.name!==C._calendar.name)throw(S.local.differentCalendars||S.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,C._calendar.local.name);var p=this._year!==C._year?this._year-C._year:this._month!==C._month?this.monthOfYear()-C.monthOfYear():this._day-C._day;return p===0?0:p<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(C){return this._calendar.fromJD(C)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(C){return this._calendar.fromJSDate(C)},toString:function(){return(this.year()<0?"-":"")+E(Math.abs(this.year()),4)+"-"+E(this.month(),2)+"-"+E(this.day(),2)}});function b(){this.shortYearCutoff="+10"}_(b.prototype,{_validateLevel:0,newDate:function(C,p,F){return C==null?this.today():(C.year&&(this._validate(C,p,F,S.local.invalidDate||S.regionalOptions[""].invalidDate),F=C.day(),p=C.month(),C=C.year()),new m(this,C,p,F))},today:function(){return this.fromJSDate(new Date)},epoch:function(C){var p=this._validate(C,this.minMonth,this.minDay,S.local.invalidYear||S.regionalOptions[""].invalidYear);return p.year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(C){var p=this._validate(C,this.minMonth,this.minDay,S.local.invalidYear||S.regionalOptions[""].invalidYear);return(p.year()<0?"-":"")+E(Math.abs(p.year()),4)},monthsInYear:function(C){return this._validate(C,this.minMonth,this.minDay,S.local.invalidYear||S.regionalOptions[""].invalidYear),12},monthOfYear:function(C,p){var F=this._validate(C,p,this.minDay,S.local.invalidMonth||S.regionalOptions[""].invalidMonth);return(F.month()+this.monthsInYear(F)-this.firstMonth)%this.monthsInYear(F)+this.minMonth},fromMonthOfYear:function(C,p){var F=(p+this.firstMonth-2*this.minMonth)%this.monthsInYear(C)+this.minMonth;return this._validate(C,F,this.minDay,S.local.invalidMonth||S.regionalOptions[""].invalidMonth),F},daysInYear:function(C){var p=this._validate(C,this.minMonth,this.minDay,S.local.invalidYear||S.regionalOptions[""].invalidYear);return this.leapYear(p)?366:365},dayOfYear:function(C,p,F){var A=this._validate(C,p,F,S.local.invalidDate||S.regionalOptions[""].invalidDate);return A.toJD()-this.newDate(A.year(),this.fromMonthOfYear(A.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(C,p,F){var A=this._validate(C,p,F,S.local.invalidDate||S.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(A))+2)%this.daysInWeek()},extraInfo:function(C,p,F){return this._validate(C,p,F,S.local.invalidDate||S.regionalOptions[""].invalidDate),{}},add:function(C,p,F){return this._validate(C,this.minMonth,this.minDay,S.local.invalidDate||S.regionalOptions[""].invalidDate),this._correctAdd(C,this._add(C,p,F),p,F)},_add:function(C,p,F){if(this._validateLevel++,F==="d"||F==="w"){var A=C.toJD()+p*(F==="w"?this.daysInWeek():1),O=C.calendar().fromJD(A);return this._validateLevel--,[O.year(),O.month(),O.day()]}try{var $=C.year()+(F==="y"?p:0),j=C.monthOfYear()+(F==="m"?p:0),O=C.day(),z=function(M){for(;j<M.minMonth;)$--,j+=M.monthsInYear($);for(var L=M.monthsInYear($);j>L-1+M.minMonth;)$++,j-=L,L=M.monthsInYear($)};F==="y"?(C.month()!==this.fromMonthOfYear($,j)&&(j=this.newDate($,C.month(),this.minDay).monthOfYear()),j=Math.min(j,this.monthsInYear($)),O=Math.min(O,this.daysInMonth($,this.fromMonthOfYear($,j)))):F==="m"&&(z(this),O=Math.min(O,this.daysInMonth($,this.fromMonthOfYear($,j))));var I=[$,this.fromMonthOfYear($,j),O];return this._validateLevel--,I}catch(G){throw this._validateLevel--,G}},_correctAdd:function(C,p,F,A){if(!this.hasYearZero&&(A==="y"||A==="m")&&(p[0]===0||C.year()>0!=p[0]>0)){var O={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[A],$=F<0?-1:1;p=this._add(C,F*O[0]+$*O[1],O[2])}return C.date(p[0],p[1],p[2])},set:function(C,p,F){this._validate(C,this.minMonth,this.minDay,S.local.invalidDate||S.regionalOptions[""].invalidDate);var A=F==="y"?p:C.year(),O=F==="m"?p:C.month(),$=F==="d"?p:C.day();return(F==="y"||F==="m")&&($=Math.min($,this.daysInMonth(A,O))),C.date(A,O,$)},isValid:function(C,p,F){this._validateLevel++;var A=this.hasYearZero||C!==0;if(A){var O=this.newDate(C,p,this.minDay);A=p>=this.minMonth&&p-this.minMonth<this.monthsInYear(O)&&F>=this.minDay&&F-this.minDay<this.daysInMonth(O)}return this._validateLevel--,A},toJSDate:function(C,p,F){var A=this._validate(C,p,F,S.local.invalidDate||S.regionalOptions[""].invalidDate);return S.instance().fromJD(this.toJD(A)).toJSDate()},fromJSDate:function(C){return this.fromJD(S.instance().fromJSDate(C).toJD())},_validate:function(C,p,F,A){if(C.year){if(this._validateLevel===0&&this.name!==C.calendar().name)throw(S.local.differentCalendars||S.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,C.calendar().local.name);return C}try{if(this._validateLevel++,this._validateLevel===1&&!this.isValid(C,p,F))throw A.replace(/\{0\}/,this.local.name);var O=this.newDate(C,p,F);return this._validateLevel--,O}catch($){throw this._validateLevel--,$}}});function w(C){this.local=this.regionalOptions[C]||this.regionalOptions[""]}w.prototype=new b,_(w.prototype,{name:"Gregorian",jdEpoch:17214255e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(F){var p=this._validate(F,this.minMonth,this.minDay,S.local.invalidYear||S.regionalOptions[""].invalidYear),F=p.year()+(p.year()<0?1:0);return F%4===0&&(F%100!==0||F%400===0)},weekOfYear:function(C,p,F){var A=this.newDate(C,p,F);return A.add(4-(A.dayOfWeek()||7),"d"),Math.floor((A.dayOfYear()-1)/7)+1},daysInMonth:function(C,p){var F=this._validate(C,p,this.minDay,S.local.invalidMonth||S.regionalOptions[""].invalidMonth);return this.daysPerMonth[F.month()-1]+(F.month()===2&&this.leapYear(F.year())?1:0)},weekDay:function(C,p,F){return(this.dayOfWeek(C,p,F)||7)<6},toJD:function(C,p,F){var A=this._validate(C,p,F,S.local.invalidDate||S.regionalOptions[""].invalidDate);C=A.year(),p=A.month(),F=A.day(),C<0&&C++,p<3&&(p+=12,C--);var O=Math.floor(C/100),$=2-O+Math.floor(O/4);return Math.floor(365.25*(C+4716))+Math.floor(30.6001*(p+1))+F+$-1524.5},fromJD:function(C){var p=Math.floor(C+.5),F=Math.floor((p-186721625e-2)/36524.25);F=p+1+F-Math.floor(F/4);var A=F+1524,O=Math.floor((A-122.1)/365.25),$=Math.floor(365.25*O),j=Math.floor((A-$)/30.6001),z=A-$-Math.floor(j*30.6001),I=j-(j>13.5?13:1),G=O-(I>2.5?4716:4715);return G<=0&&G--,this.newDate(G,I,z)},toJSDate:function(C,p,F){var A=this._validate(C,p,F,S.local.invalidDate||S.regionalOptions[""].invalidDate),O=new Date(A.year(),A.month()-1,A.day());return O.setHours(0),O.setMinutes(0),O.setSeconds(0),O.setMilliseconds(0),O.setHours(O.getHours()>12?O.getHours()+2:0),O},fromJSDate:function(C){return this.newDate(C.getFullYear(),C.getMonth()+1,C.getDate())}});var S=ke.exports=new d;S.cdate=m,S.baseCalendar=b,S.calendars.gregorian=w}),kx=r(()=>{var nt=Mv(),ke=Oy();nt(ke.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),ke.local=ke.regionalOptions[""],nt(ke.cdate.prototype,{formatDate:function(_,d){return typeof _!="string"&&(d=_,_=""),this._calendar.formatDate(_||"",this,d)}}),nt(ke.baseCalendar.prototype,{UNIX_EPOCH:ke.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:1440*60,TICKS_EPOCH:ke.instance().jdEpoch,TICKS_PER_DAY:1440*60*1e7,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(_,d,m){if(typeof _!="string"&&(m=d,d=_,_=""),!d)return"";if(d.calendar()!==this)throw ke.local.invalidFormat||ke.regionalOptions[""].invalidFormat;_=_||this.local.dateFormat,m=m||{};for(var E=m.dayNamesShort||this.local.dayNamesShort,b=m.dayNames||this.local.dayNames,w=m.monthNumbers||this.local.monthNumbers,S=m.monthNamesShort||this.local.monthNamesShort,C=m.monthNames||this.local.monthNames,p=m.calculateWeek||this.local.calculateWeek,F=function(X,ee){for(var yt=1;B+yt<_.length&&_.charAt(B+yt)===X;)yt++;return B+=yt-1,Math.floor(yt/(ee||1))>1},A=function(X,ee,yt,Ze){var Re=""+ee;if(F(X,Ze))for(;Re.length<yt;)Re="0"+Re;return Re},O=function(X,ee,yt,Ze){return F(X)?Ze[ee]:yt[ee]},$=this,j=function(X){return typeof w=="function"?w.call($,X,F("m")):G(A("m",X.month(),2))},z=function(X,ee){return ee?typeof C=="function"?C.call($,X):C[X.month()-$.minMonth]:typeof S=="function"?S.call($,X):S[X.month()-$.minMonth]},I=this.local.digits,G=function(X){return m.localNumbers&&I?I(X):X},M="",L=!1,B=0;B<_.length;B++)if(L)_.charAt(B)==="'"&&!F("'")?L=!1:M+=_.charAt(B);else switch(_.charAt(B)){case"d":M+=G(A("d",d.day(),2));break;case"D":M+=O("D",d.dayOfWeek(),E,b);break;case"o":M+=A("o",d.dayOfYear(),3);break;case"w":M+=A("w",d.weekOfYear(),2);break;case"m":M+=j(d);break;case"M":M+=z(d,F("M"));break;case"y":M+=F("y",2)?d.year():(d.year()%100<10?"0":"")+d.year()%100;break;case"Y":F("Y",2),M+=d.formatYear();break;case"J":M+=d.toJD();break;case"@":M+=(d.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":M+=(d.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":F("'")?M+="'":L=!0;break;default:M+=_.charAt(B)}return M},parseDate:function(_,d,m){if(d==null)throw ke.local.invalidArguments||ke.regionalOptions[""].invalidArguments;if(d=typeof d=="object"?d.toString():d+"",d==="")return null;_=_||this.local.dateFormat,m=m||{};var E=m.shortYearCutoff||this.shortYearCutoff;E=typeof E!="string"?E:this.today().year()%100+parseInt(E,10);for(var b=m.dayNamesShort||this.local.dayNamesShort,w=m.dayNames||this.local.dayNames,S=m.parseMonth||this.local.parseMonth,C=m.monthNumbers||this.local.monthNumbers,p=m.monthNamesShort||this.local.monthNamesShort,F=m.monthNames||this.local.monthNames,A=-1,O=-1,$=-1,j=-1,z=-1,I=!1,G=!1,M=function(ht,it){for(var ut=1;Q+ut<_.length&&_.charAt(Q+ut)===ht;)ut++;return Q+=ut-1,Math.floor(ut/(it||1))>1},L=function(ht,it){var ut=M(ht,it),vt=[2,3,ut?4:2,ut?4:2,10,11,20]["oyYJ@!".indexOf(ht)+1],_t=new RegExp("^-?\\d{1,"+vt+"}"),Le=d.substring(Re).match(_t);if(!Le)throw(ke.local.missingNumberAt||ke.regionalOptions[""].missingNumberAt).replace(/\{0\}/,Re);return Re+=Le[0].length,parseInt(Le[0],10)},B=this,X=function(){if(typeof C=="function"){M("m");var ht=C.call(B,d.substring(Re));return Re+=ht.length,ht}return L("m")},ee=function(ht,it,ut,vt){for(var _t=M(ht,vt)?ut:it,Le=0;Le<_t.length;Le++)if(d.substr(Re,_t[Le].length).toLowerCase()===_t[Le].toLowerCase())return Re+=_t[Le].length,Le+B.minMonth;throw(ke.local.unknownNameAt||ke.regionalOptions[""].unknownNameAt).replace(/\{0\}/,Re)},yt=function(){if(typeof F=="function"){var ht=M("M")?F.call(B,d.substring(Re)):p.call(B,d.substring(Re));return Re+=ht.length,ht}return ee("M",p,F)},Ze=function(){if(d.charAt(Re)!==_.charAt(Q))throw(ke.local.unexpectedLiteralAt||ke.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,Re);Re++},Re=0,Q=0;Q<_.length;Q++)if(G)_.charAt(Q)==="'"&&!M("'")?G=!1:Ze();else switch(_.charAt(Q)){case"d":j=L("d");break;case"D":ee("D",b,w);break;case"o":z=L("o");break;case"w":L("w");break;case"m":$=X();break;case"M":$=yt();break;case"y":var xt=Q;I=!M("y",2),Q=xt,O=L("y",2);break;case"Y":O=L("Y",2);break;case"J":A=L("J")+.5,d.charAt(Re)==="."&&(Re++,L("J"));break;case"@":A=L("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":A=L("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":Re=d.length;break;case"'":M("'")?Ze():G=!0;break;default:Ze()}if(Re<d.length)throw ke.local.unexpectedText||ke.regionalOptions[""].unexpectedText;if(O===-1?O=this.today().year():O<100&&I&&(O+=E===-1?1900:this.today().year()-this.today().year()%100-(O<=E?0:100)),typeof $=="string"&&($=S.call(this,O,$)),z>-1){$=1,j=z;for(var tt=this.daysInMonth(O,$);j>tt;tt=this.daysInMonth(O,$))$++,j-=tt}return A>-1?this.fromJD(A):this.newDate(O,$,j)},determineDate:function(_,d,m,E,b){m&&typeof m!="object"&&(b=E,E=m,m=null),typeof E!="string"&&(b=E,E="");var w=this,S=function(C){try{return w.parseDate(E,C,b)}catch{}C=C.toLowerCase();for(var p=(C.match(/^c/)&&m?m.newDate():null)||w.today(),F=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,A=F.exec(C);A;)p.add(parseInt(A[1],10),A[2]||"d"),A=F.exec(C);return p};return d=d?d.newDate():null,_=_==null?d:typeof _=="string"?S(_):typeof _=="number"?isNaN(_)||_===1/0||_===-1/0?d:w.today().add(_,"d"):w.newDate(_),_}})}),dv=r(()=>{var nt=Oy(),ke=Mv(),_=nt.instance();function d(A){this.local=this.regionalOptions[A||""]||this.regionalOptions[""]}d.prototype=new nt.baseCalendar,ke(d.prototype,{name:"Chinese",jdEpoch:17214255e-1,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(A,O){if(typeof A=="string"){var $=A.match(E);return $?$[0]:""}var j=this._validateYear(A),z=A.month(),I=""+this.toChineseMonth(j,z);return O&&I.length<2&&(I="0"+I),this.isIntercalaryMonth(j,z)&&(I+="i"),I},monthNames:function(A){if(typeof A=="string"){var O=A.match(b);return O?O[0]:""}var $=this._validateYear(A),j=A.month(),z=this.toChineseMonth($,j),I=["","","","","","","","","","","",""][z-1];return this.isIntercalaryMonth($,j)&&(I=""+I),I},monthNamesShort:function(A){if(typeof A=="string"){var O=A.match(w);return O?O[0]:""}var $=this._validateYear(A),j=A.month(),z=this.toChineseMonth($,j),I=["","","","","","","","","","","",""][z-1];return this.isIntercalaryMonth($,j)&&(I=""+I),I},parseMonth:function(A,O){A=this._validateYear(A);var $=parseInt(O),j;if(isNaN($))O[0]===""&&(j=!0,O=O.substring(1)),O[O.length-1]===""&&(O=O.substring(0,O.length-1)),$=1+["","","","","","","","","","","",""].indexOf(O);else{var z=O[O.length-1];j=z==="i"||z==="I"}var I=this.toMonthIndex(A,$,j);return I},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(A,O){if(A.year&&(A=A.year()),typeof A!="number"||A<1888||A>2111)throw O.replace(/\{0\}/,this.local.name);return A},toMonthIndex:function(A,O,$){var j=this.intercalaryMonth(A),z=$&&O!==j;if(z||O<1||O>12)throw nt.local.invalidMonth.replace(/\{0\}/,this.local.name);var I;return j?!$&&O<=j?I=O-1:I=O:I=O-1,I},toChineseMonth:function(A,O){A.year&&(A=A.year(),O=A.month());var $=this.intercalaryMonth(A),j=$?12:11;if(O<0||O>j)throw nt.local.invalidMonth.replace(/\{0\}/,this.local.name);var z;return $?O<$?z=O+1:z=O:z=O+1,z},intercalaryMonth:function(A){A=this._validateYear(A);var O=S[A-S[0]],$=O>>13;return $},isIntercalaryMonth:function(A,O){A.year&&(A=A.year(),O=A.month());var $=this.intercalaryMonth(A);return!!$&&$===O},leapYear:function(A){return this.intercalaryMonth(A)!==0},weekOfYear:function(A,O,$){var j=this._validateYear(A,nt.local.invalidyear),z=C[j-C[0]],I=z>>9&4095,G=z>>5&15,M=z&31,L;L=_.newDate(I,G,M),L.add(4-(L.dayOfWeek()||7),"d");var B=this.toJD(A,O,$)-L.toJD();return 1+Math.floor(B/7)},monthsInYear:function(A){return this.leapYear(A)?13:12},daysInMonth:function(A,O){A.year&&(O=A.month(),A=A.year()),A=this._validateYear(A);var $=S[A-S[0]],j=$>>13,z=j?12:11;if(O>z)throw nt.local.invalidMonth.replace(/\{0\}/,this.local.name);var I=$&1<<12-O?30:29;return I},weekDay:function(A,O,$){return(this.dayOfWeek(A,O,$)||7)<6},toJD:function(A,O,$){var j=this._validate(A,I,$,nt.local.invalidDate);A=this._validateYear(j.year()),O=j.month(),$=j.day();var z=this.isIntercalaryMonth(A,O),I=this.toChineseMonth(A,O),G=F(A,I,$,z);return _.toJD(G.year,G.month,G.day)},fromJD:function(A){var O=_.fromJD(A),$=p(O.year(),O.month(),O.day()),j=this.toMonthIndex($.year,$.month,$.isIntercalary);return this.newDate($.year,j,$.day)},fromString:function(A){var O=A.match(m),$=this._validateYear(+O[1]),j=+O[2],z=!!O[3],I=this.toMonthIndex($,j,z),G=+O[4];return this.newDate($,I,G)},add:function(A,O,$){var j=A.year(),z=A.month(),I=this.isIntercalaryMonth(j,z),G=this.toChineseMonth(j,z),M=Object.getPrototypeOf(d.prototype).add.call(this,A,O,$);if($==="y"){var L=M.year(),B=M.month(),X=this.isIntercalaryMonth(L,G),ee=I&&X?this.toMonthIndex(L,G,!0):this.toMonthIndex(L,G,!1);ee!==B&&M.month(ee)}return M}});var m=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,E=/^\d?\d[iI]?/m,b=/^??[]?/m,w=/^??[]?/m;nt.calendars.chinese=d;var S=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],C=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904];function p(A,O,$,j){var z,I;if(typeof A=="object")z=A,I=O||{};else{var G=typeof A=="number"&&A>=1888&&A<=2111;if(!G)throw new Error("Solar year outside range 1888-2111");var M=typeof O=="number"&&O>=1&&O<=12;if(!M)throw new Error("Solar month outside range 1 - 12");var L=typeof $=="number"&&$>=1&&$<=31;if(!L)throw new Error("Solar day outside range 1 - 31");z={year:A,month:O,day:$},I={}}var B=C[z.year-C[0]],X=z.year<<9|z.month<<5|z.day;I.year=X>=B?z.year:z.year-1,B=C[I.year-C[0]];var ee=B>>9&4095,yt=B>>5&15,Ze=B&31,Re,Q=new Date(ee,yt-1,Ze),xt=new Date(z.year,z.month-1,z.day);Re=Math.round((xt-Q)/(24*3600*1e3));var tt=S[I.year-S[0]],ht;for(ht=0;ht<13;ht++){var it=tt&1<<12-ht?30:29;if(Re<it)break;Re-=it}var ut=tt>>13;return!ut||ht<ut?(I.isIntercalary=!1,I.month=1+ht):ht===ut?(I.isIntercalary=!0,I.month=ht):(I.isIntercalary=!1,I.month=ht),I.day=1+Re,I}function F(A,O,$,j,z){var I,G;if(typeof A=="object")G=A,I=O||{};else{var M=typeof A=="number"&&A>=1888&&A<=2111;if(!M)throw new Error("Lunar year outside range 1888-2111");var L=typeof O=="number"&&O>=1&&O<=12;if(!L)throw new Error("Lunar month outside range 1 - 12");var B=typeof $=="number"&&$>=1&&$<=30;if(!B)throw new Error("Lunar day outside range 1 - 30");var X;typeof j=="object"?(X=!1,I=j):(X=!!j,I={}),G={year:A,month:O,day:$,isIntercalary:X}}var ee;ee=G.day-1;var yt=S[G.year-S[0]],Ze=yt>>13,Re;Ze&&(G.month>Ze||G.isIntercalary)?Re=G.month:Re=G.month-1;for(var Q=0;Q<Re;Q++){var xt=yt&1<<12-Q?30:29;ee+=xt}var tt=C[G.year-C[0]],ht=tt>>9&4095,it=tt>>5&15,ut=tt&31,vt=new Date(ht,it-1,ut+ee);return I.year=vt.getFullYear(),I.month=1+vt.getMonth(),I.day=vt.getDate(),I}}),Jv=r(()=>{var nt=Oy(),ke=Mv();function _(d){this.local=this.regionalOptions[d||""]||this.regionalOptions[""]}_.prototype=new nt.baseCalendar,ke(_.prototype,{name:"Coptic",jdEpoch:18250295e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(E){var m=this._validate(E,this.minMonth,this.minDay,nt.local.invalidYear),E=m.year()+(m.year()<0?1:0);return E%4===3||E%4===-1},monthsInYear:function(d){return this._validate(d,this.minMonth,this.minDay,nt.local.invalidYear||nt.regionalOptions[""].invalidYear),13},weekOfYear:function(d,m,E){var b=this.newDate(d,m,E);return b.add(-b.dayOfWeek(),"d"),Math.floor((b.dayOfYear()-1)/7)+1},daysInMonth:function(d,m){var E=this._validate(d,m,this.minDay,nt.local.invalidMonth);return this.daysPerMonth[E.month()-1]+(E.month()===13&&this.leapYear(E.year())?1:0)},weekDay:function(d,m,E){return(this.dayOfWeek(d,m,E)||7)<6},toJD:function(d,m,E){var b=this._validate(d,m,E,nt.local.invalidDate);return d=b.year(),d<0&&d++,b.day()+(b.month()-1)*30+(d-1)*365+Math.floor(d/4)+this.jdEpoch-1},fromJD:function(d){var m=Math.floor(d)+.5-this.jdEpoch,E=Math.floor((m-Math.floor((m+366)/1461))/365)+1;E<=0&&E--,m=Math.floor(d)+.5-this.newDate(E,1,1).toJD();var b=Math.floor(m/30)+1,w=m-(b-1)*30+1;return this.newDate(E,b,w)}}),nt.calendars.coptic=_}),Cy=r(()=>{var nt=Oy(),ke=Mv();function _(m){this.local=this.regionalOptions[m||""]||this.regionalOptions[""]}_.prototype=new nt.baseCalendar,ke(_.prototype,{name:"Discworld",jdEpoch:17214255e-1,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(m){return this._validate(m,this.minMonth,this.minDay,nt.local.invalidYear),!1},monthsInYear:function(m){return this._validate(m,this.minMonth,this.minDay,nt.local.invalidYear),13},daysInYear:function(m){return this._validate(m,this.minMonth,this.minDay,nt.local.invalidYear),400},weekOfYear:function(m,E,b){var w=this.newDate(m,E,b);return w.add(-w.dayOfWeek(),"d"),Math.floor((w.dayOfYear()-1)/8)+1},daysInMonth:function(m,E){var b=this._validate(m,E,this.minDay,nt.local.invalidMonth);return this.daysPerMonth[b.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(m,E,b){var w=this._validate(m,E,b,nt.local.invalidDate);return(w.day()+1)%8},weekDay:function(m,E,b){var w=this.dayOfWeek(m,E,b);return w>=2&&w<=6},extraInfo:function(m,E,b){var w=this._validate(m,E,b,nt.local.invalidDate);return{century:d[Math.floor((w.year()-1)/100)+1]||""}},toJD:function(m,E,b){var w=this._validate(m,E,b,nt.local.invalidDate);return m=w.year()+(w.year()<0?1:0),E=w.month(),b=w.day(),b+(E>1?16:0)+(E>2?(E-2)*32:0)+(m-1)*400+this.jdEpoch-1},fromJD:function(m){m=Math.floor(m+.5)-Math.floor(this.jdEpoch)-1;var E=Math.floor(m/400)+1;m-=(E-1)*400,m+=m>15?16:0;var b=Math.floor(m/32)+1,w=m-(b-1)*32+1;return this.newDate(E<=0?E-1:E,b,w)}});var d={20:"Fruitbat",21:"Anchovy"};nt.calendars.discworld=_}),Z_=r(()=>{var nt=Oy(),ke=Mv();function _(d){this.local=this.regionalOptions[d||""]||this.regionalOptions[""]}_.prototype=new nt.baseCalendar,ke(_.prototype,{name:"Ethiopian",jdEpoch:17242205e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(E){var m=this._validate(E,this.minMonth,this.minDay,nt.local.invalidYear),E=m.year()+(m.year()<0?1:0);return E%4===3||E%4===-1},monthsInYear:function(d){return this._validate(d,this.minMonth,this.minDay,nt.local.invalidYear||nt.regionalOptions[""].invalidYear),13},weekOfYear:function(d,m,E){var b=this.newDate(d,m,E);return b.add(-b.dayOfWeek(),"d"),Math.floor((b.dayOfYear()-1)/7)+1},daysInMonth:function(d,m){var E=this._validate(d,m,this.minDay,nt.local.invalidMonth);return this.daysPerMonth[E.month()-1]+(E.month()===13&&this.leapYear(E.year())?1:0)},weekDay:function(d,m,E){return(this.dayOfWeek(d,m,E)||7)<6},toJD:function(d,m,E){var b=this._validate(d,m,E,nt.local.invalidDate);return d=b.year(),d<0&&d++,b.day()+(b.month()-1)*30+(d-1)*365+Math.floor(d/4)+this.jdEpoch-1},fromJD:function(d){var m=Math.floor(d)+.5-this.jdEpoch,E=Math.floor((m-Math.floor((m+366)/1461))/365)+1;E<=0&&E--,m=Math.floor(d)+.5-this.newDate(E,1,1).toJD();var b=Math.floor(m/30)+1,w=m-(b-1)*30+1;return this.newDate(E,b,w)}}),nt.calendars.ethiopian=_}),L2=r(()=>{var nt=Oy(),ke=Mv();function _(m){this.local=this.regionalOptions[m||""]||this.regionalOptions[""]}_.prototype=new nt.baseCalendar,ke(_.prototype,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(m){var E=this._validate(m,this.minMonth,this.minDay,nt.local.invalidYear);return this._leapYear(E.year())},_leapYear:function(m){return m=m<0?m+1:m,d(m*7+1,19)<7},monthsInYear:function(m){return this._validate(m,this.minMonth,this.minDay,nt.local.invalidYear),this._leapYear(m.year?m.year():m)?13:12},weekOfYear:function(m,E,b){var w=this.newDate(m,E,b);return w.add(-w.dayOfWeek(),"d"),Math.floor((w.dayOfYear()-1)/7)+1},daysInYear:function(m){var E=this._validate(m,this.minMonth,this.minDay,nt.local.invalidYear);return m=E.year(),this.toJD(m===-1?1:m+1,7,1)-this.toJD(m,7,1)},daysInMonth:function(m,E){return m.year&&(E=m.month(),m=m.year()),this._validate(m,E,this.minDay,nt.local.invalidMonth),E===12&&this.leapYear(m)||E===8&&d(this.daysInYear(m),10)===5?30:E===9&&d(this.daysInYear(m),10)===3?29:this.daysPerMonth[E-1]},weekDay:function(m,E,b){return this.dayOfWeek(m,E,b)!==6},extraInfo:function(m,E,b){var w=this._validate(m,E,b,nt.local.invalidDate);return{yearType:(this.leapYear(w)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(w)%10-3]}},toJD:function(m,E,b){var w=this._validate(m,E,b,nt.local.invalidDate);m=w.year(),E=w.month(),b=w.day();var S=m<=0?m+1:m,C=this.jdEpoch+this._delay1(S)+this._delay2(S)+b+1;if(E<7){for(var p=7;p<=this.monthsInYear(m);p++)C+=this.daysInMonth(m,p);for(var p=1;p<E;p++)C+=this.daysInMonth(m,p)}else for(var p=7;p<E;p++)C+=this.daysInMonth(m,p);return C},_delay1:function(m){var E=Math.floor((235*m-234)/19),b=12084+13753*E,w=E*29+Math.floor(b/25920);return d(3*(w+1),7)<3&&w++,w},_delay2:function(m){var E=this._delay1(m-1),b=this._delay1(m),w=this._delay1(m+1);return w-b===356?2:b-E===382?1:0},fromJD:function(m){m=Math.floor(m)+.5;for(var E=Math.floor((m-this.jdEpoch)*98496/35975351)-1;m>=this.toJD(E===-1?1:E+1,7,1);)E++;for(var b=m<this.toJD(E,1,1)?7:1;m>this.toJD(E,b,this.daysInMonth(E,b));)b++;var w=m-this.toJD(E,b,1)+1;return this.newDate(E,b,w)}});function d(m,E){return m-E*Math.floor(m/E)}nt.calendars.hebrew=_}),v2=r(()=>{var nt=Oy(),ke=Mv();function _(d){this.local=this.regionalOptions[d||""]||this.regionalOptions[""]}_.prototype=new nt.baseCalendar,ke(_.prototype,{name:"Islamic",jdEpoch:19484395e-1,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-khams","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(d){var m=this._validate(d,this.minMonth,this.minDay,nt.local.invalidYear);return(m.year()*11+14)%30<11},weekOfYear:function(d,m,E){var b=this.newDate(d,m,E);return b.add(-b.dayOfWeek(),"d"),Math.floor((b.dayOfYear()-1)/7)+1},daysInYear:function(d){return this.leapYear(d)?355:354},daysInMonth:function(d,m){var E=this._validate(d,m,this.minDay,nt.local.invalidMonth);return this.daysPerMonth[E.month()-1]+(E.month()===12&&this.leapYear(E.year())?1:0)},weekDay:function(d,m,E){return this.dayOfWeek(d,m,E)!==5},toJD:function(d,m,E){var b=this._validate(d,m,E,nt.local.invalidDate);return d=b.year(),m=b.month(),E=b.day(),d=d<=0?d+1:d,E+Math.ceil(29.5*(m-1))+(d-1)*354+Math.floor((3+11*d)/30)+this.jdEpoch-1},fromJD:function(d){d=Math.floor(d)+.5;var m=Math.floor((30*(d-this.jdEpoch)+10646)/10631);m=m<=0?m-1:m;var E=Math.min(12,Math.ceil((d-29-this.toJD(m,1,1))/29.5)+1),b=d-this.toJD(m,E,1)+1;return this.newDate(m,E,b)}}),nt.calendars.islamic=_}),J_=r(()=>{var nt=Oy(),ke=Mv();function _(d){this.local=this.regionalOptions[d||""]||this.regionalOptions[""]}_.prototype=new nt.baseCalendar,ke(_.prototype,{name:"Julian",jdEpoch:17214235e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(E){var m=this._validate(E,this.minMonth,this.minDay,nt.local.invalidYear),E=m.year()<0?m.year()+1:m.year();return E%4===0},weekOfYear:function(d,m,E){var b=this.newDate(d,m,E);return b.add(4-(b.dayOfWeek()||7),"d"),Math.floor((b.dayOfYear()-1)/7)+1},daysInMonth:function(d,m){var E=this._validate(d,m,this.minDay,nt.local.invalidMonth);return this.daysPerMonth[E.month()-1]+(E.month()===2&&this.leapYear(E.year())?1:0)},weekDay:function(d,m,E){return(this.dayOfWeek(d,m,E)||7)<6},toJD:function(d,m,E){var b=this._validate(d,m,E,nt.local.invalidDate);return d=b.year(),m=b.month(),E=b.day(),d<0&&d++,m<=2&&(d--,m+=12),Math.floor(365.25*(d+4716))+Math.floor(30.6001*(m+1))+E-1524.5},fromJD:function(d){var m=Math.floor(d+.5),E=m+1524,b=Math.floor((E-122.1)/365.25),w=Math.floor(365.25*b),S=Math.floor((E-w)/30.6001),C=S-Math.floor(S<14?1:13),p=b-Math.floor(C>2?4716:4715),F=E-w-Math.floor(30.6001*S);return p<=0&&p--,this.newDate(p,C,F)}}),nt.calendars.julian=_}),h_=r(()=>{var nt=Oy(),ke=Mv();function _(E){this.local=this.regionalOptions[E||""]||this.regionalOptions[""]}_.prototype=new nt.baseCalendar,ke(_.prototype,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(E){return this._validate(E,this.minMonth,this.minDay,nt.local.invalidYear),!1},formatYear:function(E){var b=this._validate(E,this.minMonth,this.minDay,nt.local.invalidYear);E=b.year();var w=Math.floor(E/400);E=E%400,E+=E<0?400:0;var S=Math.floor(E/20);return w+"."+S+"."+E%20},forYear:function(E){if(E=E.split("."),E.length<3)throw"Invalid Mayan year";for(var b=0,w=0;w<E.length;w++){var S=parseInt(E[w],10);if(Math.abs(S)>19||w>0&&S<0)throw"Invalid Mayan year";b=b*20+S}return b},monthsInYear:function(E){return this._validate(E,this.minMonth,this.minDay,nt.local.invalidYear),18},weekOfYear:function(E,b,w){return this._validate(E,b,w,nt.local.invalidDate),0},daysInYear:function(E){return this._validate(E,this.minMonth,this.minDay,nt.local.invalidYear),360},daysInMonth:function(E,b){return this._validate(E,b,this.minDay,nt.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(E,b,w){var S=this._validate(E,b,w,nt.local.invalidDate);return S.day()},weekDay:function(E,b,w){return this._validate(E,b,w,nt.local.invalidDate),!0},extraInfo:function(E,b,w){var S=this._validate(E,b,w,nt.local.invalidDate),C=S.toJD(),p=this._toHaab(C),F=this._toTzolkin(C);return{haabMonthName:this.local.haabMonths[p[0]-1],haabMonth:p[0],haabDay:p[1],tzolkinDayName:this.local.tzolkinMonths[F[0]-1],tzolkinDay:F[0],tzolkinTrecena:F[1]}},_toHaab:function(E){E-=this.jdEpoch;var b=d(E+8+340,365);return[Math.floor(b/20)+1,d(b,20)]},_toTzolkin:function(E){return E-=this.jdEpoch,[m(E+20,20),m(E+4,13)]},toJD:function(E,b,w){var S=this._validate(E,b,w,nt.local.invalidDate);return S.day()+S.month()*20+S.year()*360+this.jdEpoch},fromJD:function(E){E=Math.floor(E)+.5-this.jdEpoch;var b=Math.floor(E/360);E=E%360,E+=E<0?360:0;var w=Math.floor(E/20),S=E%20;return this.newDate(b,w,S)}});function d(E,b){return E-b*Math.floor(E/b)}function m(E,b){return d(E-1,b)+1}nt.calendars.mayan=_}),k2=r(()=>{var nt=Oy(),ke=Mv();function _(m){this.local=this.regionalOptions[m||""]||this.regionalOptions[""]}_.prototype=new nt.baseCalendar;var d=nt.instance("gregorian");ke(_.prototype,{name:"Nanakshahi",jdEpoch:22576735e-1,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(m){var E=this._validate(m,this.minMonth,this.minDay,nt.local.invalidYear||nt.regionalOptions[""].invalidYear);return d.leapYear(E.year()+(E.year()<1?1:0)+1469)},weekOfYear:function(m,E,b){var w=this.newDate(m,E,b);return w.add(1-(w.dayOfWeek()||7),"d"),Math.floor((w.dayOfYear()-1)/7)+1},daysInMonth:function(m,E){var b=this._validate(m,E,this.minDay,nt.local.invalidMonth);return this.daysPerMonth[b.month()-1]+(b.month()===12&&this.leapYear(b.year())?1:0)},weekDay:function(m,E,b){return(this.dayOfWeek(m,E,b)||7)<6},toJD:function(S,E,b){var w=this._validate(S,E,b,nt.local.invalidMonth),S=w.year();S<0&&S++;for(var C=w.day(),p=1;p<w.month();p++)C+=this.daysPerMonth[p-1];return C+d.toJD(S+1468,3,13)},fromJD:function(m){m=Math.floor(m+.5);for(var E=Math.floor((m-(this.jdEpoch-1))/366);m>=this.toJD(E+1,1,1);)E++;for(var b=m-Math.floor(this.toJD(E,1,1)+.5)+1,w=1;b>this.daysInMonth(E,w);)b-=this.daysInMonth(E,w),w++;return this.newDate(E,w,b)}}),nt.calendars.nanakshahi=_}),h5=r(()=>{var nt=Oy(),ke=Mv();function _(d){this.local=this.regionalOptions[d||""]||this.regionalOptions[""]}_.prototype=new nt.baseCalendar,ke(_.prototype,{name:"Nepali",jdEpoch:17007095e-1,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(d){return this.daysInYear(d)!==this.daysPerYear},weekOfYear:function(d,m,E){var b=this.newDate(d,m,E);return b.add(-b.dayOfWeek(),"d"),Math.floor((b.dayOfYear()-1)/7)+1},daysInYear:function(d){var m=this._validate(d,this.minMonth,this.minDay,nt.local.invalidYear);if(d=m.year(),typeof this.NEPALI_CALENDAR_DATA[d]>"u")return this.daysPerYear;for(var E=0,b=this.minMonth;b<=12;b++)E+=this.NEPALI_CALENDAR_DATA[d][b];return E},daysInMonth:function(d,m){return d.year&&(m=d.month(),d=d.year()),this._validate(d,m,this.minDay,nt.local.invalidMonth),typeof this.NEPALI_CALENDAR_DATA[d]>"u"?this.daysPerMonth[m-1]:this.NEPALI_CALENDAR_DATA[d][m]},weekDay:function(d,m,E){return this.dayOfWeek(d,m,E)!==6},toJD:function(d,m,E){var b=this._validate(d,m,E,nt.local.invalidDate);d=b.year(),m=b.month(),E=b.day();var w=nt.instance(),S=0,C=m,p=d;this._createMissingCalendarData(d);var F=d-(C>9||C===9&&E>=this.NEPALI_CALENDAR_DATA[p][0]?56:57);for(m!==9&&(S=E,C--);C!==9;)C<=0&&(C=12,p--),S+=this.NEPALI_CALENDAR_DATA[p][C],C--;return m===9?(S+=E-this.NEPALI_CALENDAR_DATA[p][0],S<0&&(S+=w.daysInYear(F))):S+=this.NEPALI_CALENDAR_DATA[p][9]-this.NEPALI_CALENDAR_DATA[p][0],w.newDate(F,1,1).add(S,"d").toJD()},fromJD:function(d){var m=nt.instance(),E=m.fromJD(d),b=E.year(),w=E.dayOfYear(),S=b+56;this._createMissingCalendarData(S);for(var C=9,p=this.NEPALI_CALENDAR_DATA[S][0],F=this.NEPALI_CALENDAR_DATA[S][C]-p+1;w>F;)C++,C>12&&(C=1,S++),F+=this.NEPALI_CALENDAR_DATA[S][C];var A=this.NEPALI_CALENDAR_DATA[S][C]-(F-w);return this.newDate(S,C,A)},_createMissingCalendarData:function(d){var m=this.daysPerMonth.slice(0);m.unshift(17);for(var E=d-1;E<d+2;E++)typeof this.NEPALI_CALENDAR_DATA[E]>"u"&&(this.NEPALI_CALENDAR_DATA[E]=m)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}}),nt.calendars.nepali=_}),Ey=r(()=>{var nt=Oy(),ke=Mv();function _(m){this.local=this.regionalOptions[m||""]||this.regionalOptions[""]}function d(m){var E=m-475;m<0&&E++;var b=.242197,w=b*E,S=b*(E+1),C=w-Math.floor(w),p=S-Math.floor(S);return C>p}_.prototype=new nt.baseCalendar,ke(_.prototype,{name:"Persian",jdEpoch:19483205e-1,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Dey","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Dey","Bah","Esf"],dayNames:["Yekshanbeh","Doshanbeh","Seshanbeh","Chahrshanbeh","Panjshanbeh","Jom'eh","Shanbeh"],dayNamesShort:["Yek","Do","Se","Cha","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(m){var E=this._validate(m,this.minMonth,this.minDay,nt.local.invalidYear);return d(E.year())},weekOfYear:function(m,E,b){var w=this.newDate(m,E,b);return w.add(-((w.dayOfWeek()+1)%7),"d"),Math.floor((w.dayOfYear()-1)/7)+1},daysInMonth:function(m,E){var b=this._validate(m,E,this.minDay,nt.local.invalidMonth);return this.daysPerMonth[b.month()-1]+(b.month()===12&&this.leapYear(b.year())?1:0)},weekDay:function(m,E,b){return this.dayOfWeek(m,E,b)!==5},toJD:function(m,E,b){var w=this._validate(m,E,b,nt.local.invalidDate);m=w.year(),E=w.month(),b=w.day();var S=0;if(m>0)for(var C=1;C<m;C++)d(C)&&S++;else if(m<0)for(var C=m;C<0;C++)d(C)&&S--;return b+(E<=7?(E-1)*31:(E-1)*30+6)+(m>0?m-1:m)*365+S+this.jdEpoch-1},fromJD:function(m){m=Math.floor(m)+.5;var E=475+(m-this.toJD(475,1,1))/365.242197,b=Math.floor(E);b<=0&&b--,m>this.toJD(b,12,d(b)?30:29)&&(b++,b===0&&b++);var w=m-this.toJD(b,1,1)+1,S=w<=186?Math.ceil(w/31):Math.ceil((w-6)/30),C=m-this.toJD(b,S,1)+1;return this.newDate(b,S,C)}}),nt.calendars.persian=_,nt.calendars.jalali=_}),e3=r(()=>{var nt=Oy(),ke=Mv(),_=nt.instance();function d(m){this.local=this.regionalOptions[m||""]||this.regionalOptions[""]}d.prototype=new nt.baseCalendar,ke(d.prototype,{name:"Taiwan",jdEpoch:24194025e-1,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(b){var E=this._validate(b,this.minMonth,this.minDay,nt.local.invalidYear),b=this._t2gYear(E.year());return _.leapYear(b)},weekOfYear:function(S,E,b){var w=this._validate(S,this.minMonth,this.minDay,nt.local.invalidYear),S=this._t2gYear(w.year());return _.weekOfYear(S,w.month(),w.day())},daysInMonth:function(m,E){var b=this._validate(m,E,this.minDay,nt.local.invalidMonth);return this.daysPerMonth[b.month()-1]+(b.month()===2&&this.leapYear(b.year())?1:0)},weekDay:function(m,E,b){return(this.dayOfWeek(m,E,b)||7)<6},toJD:function(S,E,b){var w=this._validate(S,E,b,nt.local.invalidDate),S=this._t2gYear(w.year());return _.toJD(S,w.month(),w.day())},fromJD:function(m){var E=_.fromJD(m),b=this._g2tYear(E.year());return this.newDate(b,E.month(),E.day())},_t2gYear:function(m){return m+this.yearsOffset+(m>=-this.yearsOffset&&m<=-1?1:0)},_g2tYear:function(m){return m-this.yearsOffset-(m>=1&&m<=this.yearsOffset?1:0)}}),nt.calendars.taiwan=d}),t3=r(()=>{var nt=Oy(),ke=Mv(),_=nt.instance();function d(m){this.local=this.regionalOptions[m||""]||this.regionalOptions[""]}d.prototype=new nt.baseCalendar,ke(d.prototype,{name:"Thai",jdEpoch:15230985e-1,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(b){var E=this._validate(b,this.minMonth,this.minDay,nt.local.invalidYear),b=this._t2gYear(E.year());return _.leapYear(b)},weekOfYear:function(S,E,b){var w=this._validate(S,this.minMonth,this.minDay,nt.local.invalidYear),S=this._t2gYear(w.year());return _.weekOfYear(S,w.month(),w.day())},daysInMonth:function(m,E){var b=this._validate(m,E,this.minDay,nt.local.invalidMonth);return this.daysPerMonth[b.month()-1]+(b.month()===2&&this.leapYear(b.year())?1:0)},weekDay:function(m,E,b){return(this.dayOfWeek(m,E,b)||7)<6},toJD:function(S,E,b){var w=this._validate(S,E,b,nt.local.invalidDate),S=this._t2gYear(w.year());return _.toJD(S,w.month(),w.day())},fromJD:function(m){var E=_.fromJD(m),b=this._g2tYear(E.year());return this.newDate(b,E.month(),E.day())},_t2gYear:function(m){return m-this.yearsOffset-(m>=1&&m<=this.yearsOffset?1:0)},_g2tYear:function(m){return m+this.yearsOffset+(m>=-this.yearsOffset&&m<=-1?1:0)}}),nt.calendars.thai=d}),hw=r(()=>{var nt=Oy(),ke=Mv();function _(m){this.local=this.regionalOptions[m||""]||this.regionalOptions[""]}_.prototype=new nt.baseCalendar,ke(_.prototype,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thalth","Yawm al-Arba","Yawm al-Khams","Yawm al-Juma","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(m){var E=this._validate(m,this.minMonth,this.minDay,nt.local.invalidYear);return this.daysInYear(E.year())===355},weekOfYear:function(m,E,b){var w=this.newDate(m,E,b);return w.add(-w.dayOfWeek(),"d"),Math.floor((w.dayOfYear()-1)/7)+1},daysInYear:function(m){for(var E=0,b=1;b<=12;b++)E+=this.daysInMonth(m,b);return E},daysInMonth:function(m,E){for(var b=this._validate(m,E,this.minDay,nt.local.invalidMonth),w=b.toJD()-24e5+.5,S=0,C=0;C<d.length;C++){if(d[C]>w)return d[S]-d[S-1];S++}return 30},weekDay:function(m,E,b){return this.dayOfWeek(m,E,b)!==5},toJD:function(m,E,b){var w=this._validate(m,E,b,nt.local.invalidDate),S=12*(w.year()-1)+w.month()-15292,C=w.day()+d[S-1]-1;return C+24e5-.5},fromJD:function(m){for(var E=m-24e5+.5,b=0,w=0;w<d.length&&!(d[w]>E);w++)b++;var S=b+15292,C=Math.floor((S-1)/12),p=C+1,F=S-12*C,A=E-d[b-1]+1;return this.newDate(p,F,A)},isValid:function(m,E,b){var w=nt.baseCalendar.prototype.isValid.apply(this,arguments);return w&&(m=m.year!=null?m.year:m,w=m>=1276&&m<=1500),w},_validate:function(m,E,b,w){var S=nt.baseCalendar.prototype._validate.apply(this,arguments);if(S.year<1276||S.year>1500)throw w.replace(/\{0\}/,this.local.name);return S}}),nt.calendars.ummalqura=_;var d=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]}),dw=r((nt,ke)=>{ke.exports=Oy(),kx(),dv(),Jv(),Cy(),Z_(),L2(),v2(),J_(),h_(),k2(),h5(),Ey(),e3(),t3(),hw()}),d5=r((nt,ke)=>{var _=dw(),d=et(),m=g(),E=m.EPOCHJD,b=m.ONEDAY,w={valType:"enumerated",values:d.sortObjectKeys(_.calendars),editType:"calc",dflt:"gregorian"},S=function(yt,Ze,Re,Q){var xt={};return xt[Re]=w,d.coerce(yt,Ze,xt,Re,Q)},C=function(yt,Ze,Re,Q){for(var xt=0;xt<Re.length;xt++)S(yt,Ze,Re[xt]+"calendar",Q.calendar)},p={chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},F={chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},A={chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},O="##",$={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:O,w:O,c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}};function j(yt,Ze,Re){for(var Q=Math.floor((Ze+.05)/b)+E,xt=I(Re).fromJD(Q),tt=0,ht,it,ut,vt,_t;(tt=yt.indexOf("%",tt))!==-1;)ht=yt.charAt(tt+1),ht==="0"||ht==="-"||ht==="_"?(ut=3,it=yt.charAt(tt+2),ht==="_"&&(ht="-")):(it=ht,ht="0",ut=2),vt=$[it],vt?(vt===O?_t=O:_t=xt.formatDate(vt[ht]),yt=yt.substr(0,tt)+_t+yt.substr(tt+ut),tt+=_t.length):tt+=ut;return yt}var z={};function I(yt){var Ze=z[yt];return Ze||(Ze=z[yt]=_.instance(yt),Ze)}function G(yt){return d.extendFlat({},w,{description:yt})}function M(yt){return"Sets the calendar system to use with `"+yt+"` date data."}var L={xcalendar:G(M("x"))},B=d.extendFlat({},L,{ycalendar:G(M("y"))}),X=d.extendFlat({},B,{zcalendar:G(M("z"))}),ee=G(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));ke.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:B,bar:B,box:B,heatmap:B,contour:B,histogram:B,histogram2d:B,histogram2dcontour:B,scatter3d:X,surface:X,mesh3d:X,scattergl:B,ohlc:L,candlestick:L},layout:{calendar:G(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:ee},yaxis:{calendar:ee},scene:{xaxis:{calendar:ee},yaxis:{calendar:ee},zaxis:{calendar:ee}},polar:{radialaxis:{calendar:ee}}}},layoutAttributes:w,handleDefaults:S,handleTraceDefaults:C,CANONICAL_SUNDAY:F,CANONICAL_TICK:p,DFLTRANGE:A,getCal:I,worldCalFmt:j}}),r3=r((nt,ke)=>{ke.exports=d5()}),n3=r((nt,ke)=>{var _=i_();_.register([N2(),Qy(),r3()]),ke.exports=_});return n3()})();/*! Bundled license information:

		native-promise-only/lib/npo.src.js:
		  (*! Native Promise Only
		      v0.8.1 (c) Kyle Simpson
		      MIT License: http://getify.mit-license.org
		  *)

		polybooljs/index.js:
		  (*
		   * @copyright 2016 Sean Connelly (@voidqk), http://syntheti.cc
		   * @license MIT
		   * @preserve Project Home: https://github.com/voidqk/polybooljs
		   *)

		object-assign/index.js:
		  (*
		  object-assign
		  (c) Sindre Sorhus
		  @license MIT
		  *)
		*/return window.Plotly=e,e})})(plotlyBasic_min$1)),plotlyBasic_min$1.exports}var plotlyBasic_minExports=requirePlotlyBasic_min();const Plotly=getDefaultExportFromCjs(plotlyBasic_minExports);function getBandTraces(t,e,r={}){const n=[];return e.forEach((a,o)=>{n.push({name:r.name,legendgroup:r.name,showlegend:o===0,...traceDefaultBands,...r,x:t,y:a})}),n}function getBandLayout(t=[],e=[]){return deepmerge.all([plotBandLayout,{xaxis:{tickvals:e,ticktext:t},yaxis:{}}])}function getBandStructure(t){const r=getXLabelsfromkpath(t[0].bandsData.path).map(prettifyLabels),n=getXLabelPos(t[0].bandsData.paths),a=getBandLayout(r,n);let o=[];for(const[l,u]of t.entries()){let c=u.traceFormat;(!c||Object.keys(c).length===0)&&(c={name:`Band Structure ${l}`,line:{color:getColor(l),width:1}});const h=u.bandsData,{xs:v,ys:g}=getXYData(h),T=getBandTraces(v,g,c);o.push(...T)}return{bandTraces:o,bandLayout:a}}function getDosLayout(t="h"){let e;return t==="v"?e=plotDOSLayoutF:e=plotDOSLayout,e}function getDosTraces(t,e="h",r={}){const n=e==="v"?t.y:t.x,a=e==="v"?t.x:t.y;return{...traceDefaultDos,...r,x:n,y:a}}function getDos(t,e="h"){const r=[];for(const[a,o]of t.entries()){let l=o.traceFormat;(!l||Object.keys(l).length===0)&&(l={name:`DOS ${a}`,line:{color:getColor(a),width:2}});const u=o.dosData,c=getDosTraces(u,e,l);r.push(c)}const n=getDosLayout(e);return{dosTraces:r,dosLayout:n}}function getProjectionTraces(t,e,r,n={},a=1){const o=transpose(r),l=transpose(e),u=[];return l.forEach((c,h)=>{const v=o[h],g=new Float64Array(c.length),T=new Float64Array(c.length);for(let J=0;J<c.length;J++){const q=v[J]*a;g[J]=c[J]+q,T[J]=c[J]-q}const R=t.length,W=new Float32Array(R*2),k=new Float32Array(R*2);for(let J=0;J<R;J++)W[J]=t[J],k[J]=T[J],W[2*R-1-J]=t[J],k[2*R-1-J]=g[J];u.push({name:n.name,legendgroup:n.name,type:"scatter",mode:"lines",fill:"toself",...n,showlegend:h===0,x:W,y:k})}),u}function handleSettings(t,e){for(const r in t)t[r]!==null&&typeof t[r]=="object"&&!Array.isArray(t[r])&&e[r]&&typeof e[r]=="object"&&!Array.isArray(e[r])?e[r]=deepmerge(e[r],t[r]):e[r]=t[r]}function BandsVisualiser(t,{bandsDataArray:e=[],dosDataArray:r=[],fermiLevels:n=[],customTraces:a=[],settings:o={}}){let l=[],u={},c=[],h=[],v={};typeof n=="number"&&(n=[n]);const g=e.length>0,T=r.length>0;if(g){const J=getBandStructure(e);l=J.bandTraces,u=J.bandLayout;for(const[q,Se]of e.entries())if(Se.hasOwnProperty("projections"))for(const[V,Y]of Se.projections.entries()){const ie=Y.traceFormat&&Object.keys(Y.traceFormat).length>0?Y.traceFormat:{name:`Projection ${V}`,line:{color:getColor(V),width:0}};c.push(...getProjectionTraces(Se.bandsData.x,Se.bandsData.y,Y.projData.weights,ie))}}if(T){const q=getDos(r,g?"v":"h");h=q.dosTraces,v=q.dosLayout}let R={},W=[];if(T&&!g)W=h,R={...v,showlegend:v?.showlegend??!0};else if(g&&!T)W=[...l,...c],R={...u,showlegend:u?.showlegend??!0};else if(T&&g){h=h.map(q=>({...q,xaxis:"x2",yaxis:"y"}));const J=mergeLegendTracesByName([...c,...h]);W=[...l,...J],R={...plotCombinedLayout,xaxis:{...plotCombinedLayout.xaxis||{},...u?.xaxis||{}},xaxis2:{...plotCombinedLayout.xaxis2||{},...v?.xaxis2||{}},yaxis:{...plotCombinedLayout.yaxis||{},...u?.yaxis||{},...v?.yaxis||{}}}}for(const J of a)console.log(J),J.target==="dos"?W.push({...J,xaxis:"x2",yaxis:"y"}):J.target==="bands"?W.push({...J,xaxis:"x",yaxis:"y"}):W.push({...J});const k=addfermiLines(n,W,T,g);handleSettings(o,R),Plotly.react(t,k,R,{displaylogo:!1,responsive:!0})}function CardContainer({children:t,header:e,footer:r,className:n="",childrenClassName:a="",style:o={}}){return jsxRuntimeExports.jsxs("div",{className:`ae:w-full ae:max-w-full ae:bg-slate-100 ae:border ae:border-slate-200 ae:p-3 ae:rounded-md ae:shadow-md ${n}`,style:o,children:[e&&jsxRuntimeExports.jsx("div",{className:"explorerHeadingBig ae:mb-2",children:e}),jsxRuntimeExports.jsx("div",{className:`ae:px-1 ${a}`,children:t}),r&&jsxRuntimeExports.jsx("div",{className:"ae:mt-2 ae:text-sm ae:text-gray-500",children:r})]})}function BandsDataVisualiser({nodeData:t}){const e=reactExports.useRef(null),[r,n]=reactExports.useState(null),[a,o]=reactExports.useState(!1),[l,u]=reactExports.useState(null),c=t.downloadByFormat?.json,h=t?.attributes?.units||"N/A";return reactExports.useEffect(()=>{if(!c)return;(async()=>{o(!0),u(null);try{const g=await fetch(c);if(!g.ok)throw new Error(`HTTP error: ${g.status}`);const T=await g.json();n([{bandsData:T}])}catch(g){console.error("Failed to fetch bands JSON:",g),u(g.message)}finally{o(!1)}})()},[c]),reactExports.useEffect(()=>{!e.current||!r||BandsVisualiser(e.current,{bandsDataArray:r,settings:{showlegend:!1,yaxis:{title:{text:`Value [${h}]`}},xaxis:{title:{text:"Path"}},margin:{l:80,b:45}}})},[r,h]),jsxRuntimeExports.jsx("div",{className:"ae:w-full ae:mx-auto ae:p-4 ae:space-y-6",children:jsxRuntimeExports.jsx(CardContainer,{header:"Bands Structure Plot",className:"ae:!px-1.5 ae:!pt-2",childrenClassName:"ae:!p-0",children:jsxRuntimeExports.jsxs("div",{className:"ae:w-full ae:h-[450px] ae:relative ae:flex ae:items-center ae:justify-center",children:[a&&jsxRuntimeExports.jsx(Spinner,{}),l&&!a&&jsxRuntimeExports.jsx(ErrorDisplay,{message:l,onRetry:()=>{}}),!a&&!l&&r&&jsxRuntimeExports.jsx("div",{ref:e,className:"ae:absolute ae:inset-0 "})]})})})}function FileTable({title:t,dataArray:e=[],onView:r}){const n=["File","Download","View"],a=e.map(o=>({File:o.name,Download:jsxRuntimeExports.jsx("a",{href:o.downloadUrl||"#",download:o.name||void 0,rel:"noopener noreferrer",className:"ae:text-blue-600 ae:hover:text-blue-800 ae:transition-colors ae:duration-75",children:jsxRuntimeExports.jsx(DownloadIcon,{size:18,className:"ae:hover:scale-105 ae:transition-all ae:duration-75"})}),View:jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>r?.(o.name,o.downloadUrl),className:"ae:text-green-600 ae:hover:text-green-800 ae:transition-colors ae:duration-75",children:jsxRuntimeExports.jsx(ViewIcon,{size:18,className:"ae:hover:scale-105 ae:transition-all ae:duration-75"})})}));return jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(DataTable,{title:t,columns:n,data:a,sortableCols:["File"]})})}function CalcJobVisualiser({nodeData:t={}}){const[e,r]=reactExports.useState(null),[n,a]=reactExports.useState(null),[o,l]=reactExports.useState(!1),u=async(h,v)=>{try{const T=await(await fetch(v)).text();r(T),a(h),l(!0)}catch(g){console.error("Error loading preview:",g),r("Failed to load preview."),a(h),l(!0)}},c=jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(FileTable,{title:"Input Files (in this node)",dataArray:t.files?.input_files||[],onView:u}),jsxRuntimeExports.jsx(FileTable,{title:"Output Files (retrieved)",dataArray:t.files?.output_files||[],onView:u})]});return jsxRuntimeExports.jsxs("div",{className:"ae:flex ae:flex-col ae:px-3 ae:py-2 ae:gap-2 ae:lg:gap-4",children:[c,jsxRuntimeExports.jsx(Overlay,{active:o,onClose:()=>l(!1),title:`Preview: ${n}`,children:jsxRuntimeExports.jsx("pre",{className:"ae:overflow-y-auto ae:whitespace-pre-wrap ae:text-sm ae:flex-1",children:e})})]})}const Qn={ROTATE:0,DOLLY:1,PAN:2},$n={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},Jo=0,ua=1,Qo=2,_o=1,tl=2,en=3,gn=0,Te=1,Xe=2,mn=0,ti=1,da=2,fa=3,pa=4,el=5,wn=100,nl=101,il=102,rl=103,sl=104,al=200,ol=201,ll=202,cl=203,is=204,rs=205,hl=206,ul=207,dl=208,fl=209,pl=210,ml=211,_l=212,gl=213,vl=214,ss=0,as=1,os=2,ii=3,ls=4,cs=5,hs=6,us=7,go=0,xl=1,Ml=2,_n=0,Sl=1,El=2,yl=3,Tl=4,bl=5,Al=6,Rl=7,vo=300,ri=301,si=302,ds=303,fs=304,gr=306,ps=1e3,Pn=1001,ms=1002,Ge=1003,wl=1004,Pi=1005,Ye=1006,yr=1007,Dn=1008,sn=1009,xo=1010,Mo=1011,vi=1012,Ys=1013,Ln=1014,nn=1015,yi=1016,qs=1017,Ks=1018,xi=1020,So=35902,Eo=35899,yo=1021,To=1022,Ve=1023,Mi=1026,Si=1027,bo=1028,Zs=1029,Ao=1030,js=1031,$s=1033,sr=33776,ar=33777,or=33778,lr=33779,_s=35840,gs=35841,vs=35842,xs=35843,Ms=36196,Ss=37492,Es=37496,ys=37808,Ts=37809,bs=37810,As=37811,Rs=37812,ws=37813,Cs=37814,Ps=37815,Ds=37816,Ls=37817,Us=37818,Is=37819,Ns=37820,Fs=37821,Os=36492,Bs=36494,zs=36495,Hs=36283,Vs=36284,Gs=36285,ks=36286,Cl=3200,Pl=3201,Dl=0,Ll=1,pn="",Ne="srgb",ai="srgb-linear",hr="linear",Jt="srgb",On=7680,ma=519,Ul=512,Il=513,Nl=514,Ro=515,Fl=516,Ol=517,Bl=518,zl=519,_a=35044,ga="300 es",qe=2e3,ur=2001;class Nn{addEventListener(e,r){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(r)===-1&&n[e].push(r)}hasEventListener(e,r){const n=this._listeners;return n===void 0?!1:n[e]!==void 0&&n[e].indexOf(r)!==-1}removeEventListener(e,r){const n=this._listeners;if(n===void 0)return;const a=n[e];if(a!==void 0){const o=a.indexOf(r);o!==-1&&a.splice(o,1)}}dispatchEvent(e){const r=this._listeners;if(r===void 0)return;const n=r[e.type];if(n!==void 0){e.target=this;const a=n.slice(0);for(let o=0,l=a.length;o<l;o++)a[o].call(this,e);e.target=null}}}const _e=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],gi=Math.PI/180,Ws=180/Math.PI;function Ti(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,r=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(_e[t&255]+_e[t>>8&255]+_e[t>>16&255]+_e[t>>24&255]+"-"+_e[e&255]+_e[e>>8&255]+"-"+_e[e>>16&15|64]+_e[e>>24&255]+"-"+_e[r&63|128]+_e[r>>8&255]+"-"+_e[r>>16&255]+_e[r>>24&255]+_e[n&255]+_e[n>>8&255]+_e[n>>16&255]+_e[n>>24&255]).toLowerCase()}function Vt(t,e,r){return Math.max(e,Math.min(r,t))}function Hl(t,e){return(t%e+e)%e}function Tr(t,e,r){return(1-r)*t+r*e}function hi(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return t/4294967295;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int32Array:return Math.max(t/2147483647,-1);case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function Ee(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return Math.round(t*4294967295);case Uint16Array:return Math.round(t*65535);case Uint8Array:return Math.round(t*255);case Int32Array:return Math.round(t*2147483647);case Int16Array:return Math.round(t*32767);case Int8Array:return Math.round(t*127);default:throw new Error("Invalid component type.")}}const Vl={DEG2RAD:gi};class Bt{constructor(e=0,r=0){Bt.prototype.isVector2=!0,this.x=e,this.y=r}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,r){return this.x=e,this.y=r,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,r){switch(e){case 0:this.x=r;break;case 1:this.y=r;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,r){return this.x=e.x+r.x,this.y=e.y+r.y,this}addScaledVector(e,r){return this.x+=e.x*r,this.y+=e.y*r,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,r){return this.x=e.x-r.x,this.y=e.y-r.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const r=this.x,n=this.y,a=e.elements;return this.x=a[0]*r+a[3]*n+a[6],this.y=a[1]*r+a[4]*n+a[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,r){return this.x=Vt(this.x,e.x,r.x),this.y=Vt(this.y,e.y,r.y),this}clampScalar(e,r){return this.x=Vt(this.x,e,r),this.y=Vt(this.y,e,r),this}clampLength(e,r){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Vt(n,e,r))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const r=Math.sqrt(this.lengthSq()*e.lengthSq());if(r===0)return Math.PI/2;const n=this.dot(e)/r;return Math.acos(Vt(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const r=this.x-e.x,n=this.y-e.y;return r*r+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,r){return this.x+=(e.x-this.x)*r,this.y+=(e.y-this.y)*r,this}lerpVectors(e,r,n){return this.x=e.x+(r.x-e.x)*n,this.y=e.y+(r.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,r=0){return this.x=e[r],this.y=e[r+1],this}toArray(e=[],r=0){return e[r]=this.x,e[r+1]=this.y,e}fromBufferAttribute(e,r){return this.x=e.getX(r),this.y=e.getY(r),this}rotateAround(e,r){const n=Math.cos(r),a=Math.sin(r),o=this.x-e.x,l=this.y-e.y;return this.x=o*n-l*a+e.x,this.y=o*a+l*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Un{constructor(e=0,r=0,n=0,a=1){this.isQuaternion=!0,this._x=e,this._y=r,this._z=n,this._w=a}static slerpFlat(e,r,n,a,o,l,u){let c=n[a+0],h=n[a+1],v=n[a+2],g=n[a+3];const T=o[l+0],R=o[l+1],W=o[l+2],k=o[l+3];if(u===0){e[r+0]=c,e[r+1]=h,e[r+2]=v,e[r+3]=g;return}if(u===1){e[r+0]=T,e[r+1]=R,e[r+2]=W,e[r+3]=k;return}if(g!==k||c!==T||h!==R||v!==W){let J=1-u;const q=c*T+h*R+v*W+g*k,Se=q>=0?1:-1,V=1-q*q;if(V>Number.EPSILON){const ie=Math.sqrt(V),se=Math.atan2(ie,q*Se);J=Math.sin(J*se)/ie,u=Math.sin(u*se)/ie}const Y=u*Se;if(c=c*J+T*Y,h=h*J+R*Y,v=v*J+W*Y,g=g*J+k*Y,J===1-u){const ie=1/Math.sqrt(c*c+h*h+v*v+g*g);c*=ie,h*=ie,v*=ie,g*=ie}}e[r]=c,e[r+1]=h,e[r+2]=v,e[r+3]=g}static multiplyQuaternionsFlat(e,r,n,a,o,l){const u=n[a],c=n[a+1],h=n[a+2],v=n[a+3],g=o[l],T=o[l+1],R=o[l+2],W=o[l+3];return e[r]=u*W+v*g+c*R-h*T,e[r+1]=c*W+v*T+h*g-u*R,e[r+2]=h*W+v*R+u*T-c*g,e[r+3]=v*W-u*g-c*T-h*R,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,r,n,a){return this._x=e,this._y=r,this._z=n,this._w=a,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,r=!0){const n=e._x,a=e._y,o=e._z,l=e._order,u=Math.cos,c=Math.sin,h=u(n/2),v=u(a/2),g=u(o/2),T=c(n/2),R=c(a/2),W=c(o/2);switch(l){case"XYZ":this._x=T*v*g+h*R*W,this._y=h*R*g-T*v*W,this._z=h*v*W+T*R*g,this._w=h*v*g-T*R*W;break;case"YXZ":this._x=T*v*g+h*R*W,this._y=h*R*g-T*v*W,this._z=h*v*W-T*R*g,this._w=h*v*g+T*R*W;break;case"ZXY":this._x=T*v*g-h*R*W,this._y=h*R*g+T*v*W,this._z=h*v*W+T*R*g,this._w=h*v*g-T*R*W;break;case"ZYX":this._x=T*v*g-h*R*W,this._y=h*R*g+T*v*W,this._z=h*v*W-T*R*g,this._w=h*v*g+T*R*W;break;case"YZX":this._x=T*v*g+h*R*W,this._y=h*R*g+T*v*W,this._z=h*v*W-T*R*g,this._w=h*v*g-T*R*W;break;case"XZY":this._x=T*v*g-h*R*W,this._y=h*R*g-T*v*W,this._z=h*v*W+T*R*g,this._w=h*v*g+T*R*W;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+l)}return r===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,r){const n=r/2,a=Math.sin(n);return this._x=e.x*a,this._y=e.y*a,this._z=e.z*a,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const r=e.elements,n=r[0],a=r[4],o=r[8],l=r[1],u=r[5],c=r[9],h=r[2],v=r[6],g=r[10],T=n+u+g;if(T>0){const R=.5/Math.sqrt(T+1);this._w=.25/R,this._x=(v-c)*R,this._y=(o-h)*R,this._z=(l-a)*R}else if(n>u&&n>g){const R=2*Math.sqrt(1+n-u-g);this._w=(v-c)/R,this._x=.25*R,this._y=(a+l)/R,this._z=(o+h)/R}else if(u>g){const R=2*Math.sqrt(1+u-n-g);this._w=(o-h)/R,this._x=(a+l)/R,this._y=.25*R,this._z=(c+v)/R}else{const R=2*Math.sqrt(1+g-n-u);this._w=(l-a)/R,this._x=(o+h)/R,this._y=(c+v)/R,this._z=.25*R}return this._onChangeCallback(),this}setFromUnitVectors(e,r){let n=e.dot(r)+1;return n<1e-8?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*r.z-e.z*r.y,this._y=e.z*r.x-e.x*r.z,this._z=e.x*r.y-e.y*r.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Vt(this.dot(e),-1,1)))}rotateTowards(e,r){const n=this.angleTo(e);if(n===0)return this;const a=Math.min(1,r/n);return this.slerp(e,a),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,r){const n=e._x,a=e._y,o=e._z,l=e._w,u=r._x,c=r._y,h=r._z,v=r._w;return this._x=n*v+l*u+a*h-o*c,this._y=a*v+l*c+o*u-n*h,this._z=o*v+l*h+n*c-a*u,this._w=l*v-n*u-a*c-o*h,this._onChangeCallback(),this}slerp(e,r){if(r===0)return this;if(r===1)return this.copy(e);const n=this._x,a=this._y,o=this._z,l=this._w;let u=l*e._w+n*e._x+a*e._y+o*e._z;if(u<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,u=-u):this.copy(e),u>=1)return this._w=l,this._x=n,this._y=a,this._z=o,this;const c=1-u*u;if(c<=Number.EPSILON){const R=1-r;return this._w=R*l+r*this._w,this._x=R*n+r*this._x,this._y=R*a+r*this._y,this._z=R*o+r*this._z,this.normalize(),this}const h=Math.sqrt(c),v=Math.atan2(h,u),g=Math.sin((1-r)*v)/h,T=Math.sin(r*v)/h;return this._w=l*g+this._w*T,this._x=n*g+this._x*T,this._y=a*g+this._y*T,this._z=o*g+this._z*T,this._onChangeCallback(),this}slerpQuaternions(e,r,n){return this.copy(e).slerp(r,n)}random(){const e=2*Math.PI*Math.random(),r=2*Math.PI*Math.random(),n=Math.random(),a=Math.sqrt(1-n),o=Math.sqrt(n);return this.set(a*Math.sin(e),a*Math.cos(e),o*Math.sin(r),o*Math.cos(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,r=0){return this._x=e[r],this._y=e[r+1],this._z=e[r+2],this._w=e[r+3],this._onChangeCallback(),this}toArray(e=[],r=0){return e[r]=this._x,e[r+1]=this._y,e[r+2]=this._z,e[r+3]=this._w,e}fromBufferAttribute(e,r){return this._x=e.getX(r),this._y=e.getY(r),this._z=e.getZ(r),this._w=e.getW(r),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class U{constructor(e=0,r=0,n=0){U.prototype.isVector3=!0,this.x=e,this.y=r,this.z=n}set(e,r,n){return n===void 0&&(n=this.z),this.x=e,this.y=r,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,r){switch(e){case 0:this.x=r;break;case 1:this.y=r;break;case 2:this.z=r;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,r){return this.x=e.x+r.x,this.y=e.y+r.y,this.z=e.z+r.z,this}addScaledVector(e,r){return this.x+=e.x*r,this.y+=e.y*r,this.z+=e.z*r,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,r){return this.x=e.x-r.x,this.y=e.y-r.y,this.z=e.z-r.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,r){return this.x=e.x*r.x,this.y=e.y*r.y,this.z=e.z*r.z,this}applyEuler(e){return this.applyQuaternion(va.setFromEuler(e))}applyAxisAngle(e,r){return this.applyQuaternion(va.setFromAxisAngle(e,r))}applyMatrix3(e){const r=this.x,n=this.y,a=this.z,o=e.elements;return this.x=o[0]*r+o[3]*n+o[6]*a,this.y=o[1]*r+o[4]*n+o[7]*a,this.z=o[2]*r+o[5]*n+o[8]*a,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const r=this.x,n=this.y,a=this.z,o=e.elements,l=1/(o[3]*r+o[7]*n+o[11]*a+o[15]);return this.x=(o[0]*r+o[4]*n+o[8]*a+o[12])*l,this.y=(o[1]*r+o[5]*n+o[9]*a+o[13])*l,this.z=(o[2]*r+o[6]*n+o[10]*a+o[14])*l,this}applyQuaternion(e){const r=this.x,n=this.y,a=this.z,o=e.x,l=e.y,u=e.z,c=e.w,h=2*(l*a-u*n),v=2*(u*r-o*a),g=2*(o*n-l*r);return this.x=r+c*h+l*g-u*v,this.y=n+c*v+u*h-o*g,this.z=a+c*g+o*v-l*h,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const r=this.x,n=this.y,a=this.z,o=e.elements;return this.x=o[0]*r+o[4]*n+o[8]*a,this.y=o[1]*r+o[5]*n+o[9]*a,this.z=o[2]*r+o[6]*n+o[10]*a,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,r){return this.x=Vt(this.x,e.x,r.x),this.y=Vt(this.y,e.y,r.y),this.z=Vt(this.z,e.z,r.z),this}clampScalar(e,r){return this.x=Vt(this.x,e,r),this.y=Vt(this.y,e,r),this.z=Vt(this.z,e,r),this}clampLength(e,r){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Vt(n,e,r))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,r){return this.x+=(e.x-this.x)*r,this.y+=(e.y-this.y)*r,this.z+=(e.z-this.z)*r,this}lerpVectors(e,r,n){return this.x=e.x+(r.x-e.x)*n,this.y=e.y+(r.y-e.y)*n,this.z=e.z+(r.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,r){const n=e.x,a=e.y,o=e.z,l=r.x,u=r.y,c=r.z;return this.x=a*c-o*u,this.y=o*l-n*c,this.z=n*u-a*l,this}projectOnVector(e){const r=e.lengthSq();if(r===0)return this.set(0,0,0);const n=e.dot(this)/r;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return br.copy(this).projectOnVector(e),this.sub(br)}reflect(e){return this.sub(br.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const r=Math.sqrt(this.lengthSq()*e.lengthSq());if(r===0)return Math.PI/2;const n=this.dot(e)/r;return Math.acos(Vt(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const r=this.x-e.x,n=this.y-e.y,a=this.z-e.z;return r*r+n*n+a*a}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,r,n){const a=Math.sin(r)*e;return this.x=a*Math.sin(n),this.y=Math.cos(r)*e,this.z=a*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,r,n){return this.x=e*Math.sin(r),this.y=n,this.z=e*Math.cos(r),this}setFromMatrixPosition(e){const r=e.elements;return this.x=r[12],this.y=r[13],this.z=r[14],this}setFromMatrixScale(e){const r=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),a=this.setFromMatrixColumn(e,2).length();return this.x=r,this.y=n,this.z=a,this}setFromMatrixColumn(e,r){return this.fromArray(e.elements,r*4)}setFromMatrix3Column(e,r){return this.fromArray(e.elements,r*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,r=0){return this.x=e[r],this.y=e[r+1],this.z=e[r+2],this}toArray(e=[],r=0){return e[r]=this.x,e[r+1]=this.y,e[r+2]=this.z,e}fromBufferAttribute(e,r){return this.x=e.getX(r),this.y=e.getY(r),this.z=e.getZ(r),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,r=Math.random()*2-1,n=Math.sqrt(1-r*r);return this.x=n*Math.cos(e),this.y=r,this.z=n*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const br=new U,va=new Un;class Ft{constructor(e,r,n,a,o,l,u,c,h){Ft.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,r,n,a,o,l,u,c,h)}set(e,r,n,a,o,l,u,c,h){const v=this.elements;return v[0]=e,v[1]=a,v[2]=u,v[3]=r,v[4]=o,v[5]=c,v[6]=n,v[7]=l,v[8]=h,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const r=this.elements,n=e.elements;return r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r[4]=n[4],r[5]=n[5],r[6]=n[6],r[7]=n[7],r[8]=n[8],this}extractBasis(e,r,n){return e.setFromMatrix3Column(this,0),r.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const r=e.elements;return this.set(r[0],r[4],r[8],r[1],r[5],r[9],r[2],r[6],r[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,r){const n=e.elements,a=r.elements,o=this.elements,l=n[0],u=n[3],c=n[6],h=n[1],v=n[4],g=n[7],T=n[2],R=n[5],W=n[8],k=a[0],J=a[3],q=a[6],Se=a[1],V=a[4],Y=a[7],ie=a[2],se=a[5],ct=a[8];return o[0]=l*k+u*Se+c*ie,o[3]=l*J+u*V+c*se,o[6]=l*q+u*Y+c*ct,o[1]=h*k+v*Se+g*ie,o[4]=h*J+v*V+g*se,o[7]=h*q+v*Y+g*ct,o[2]=T*k+R*Se+W*ie,o[5]=T*J+R*V+W*se,o[8]=T*q+R*Y+W*ct,this}multiplyScalar(e){const r=this.elements;return r[0]*=e,r[3]*=e,r[6]*=e,r[1]*=e,r[4]*=e,r[7]*=e,r[2]*=e,r[5]*=e,r[8]*=e,this}determinant(){const e=this.elements,r=e[0],n=e[1],a=e[2],o=e[3],l=e[4],u=e[5],c=e[6],h=e[7],v=e[8];return r*l*v-r*u*h-n*o*v+n*u*c+a*o*h-a*l*c}invert(){const e=this.elements,r=e[0],n=e[1],a=e[2],o=e[3],l=e[4],u=e[5],c=e[6],h=e[7],v=e[8],g=v*l-u*h,T=u*c-v*o,R=h*o-l*c,W=r*g+n*T+a*R;if(W===0)return this.set(0,0,0,0,0,0,0,0,0);const k=1/W;return e[0]=g*k,e[1]=(a*h-v*n)*k,e[2]=(u*n-a*l)*k,e[3]=T*k,e[4]=(v*r-a*c)*k,e[5]=(a*o-u*r)*k,e[6]=R*k,e[7]=(n*c-h*r)*k,e[8]=(l*r-n*o)*k,this}transpose(){let e;const r=this.elements;return e=r[1],r[1]=r[3],r[3]=e,e=r[2],r[2]=r[6],r[6]=e,e=r[5],r[5]=r[7],r[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const r=this.elements;return e[0]=r[0],e[1]=r[3],e[2]=r[6],e[3]=r[1],e[4]=r[4],e[5]=r[7],e[6]=r[2],e[7]=r[5],e[8]=r[8],this}setUvTransform(e,r,n,a,o,l,u){const c=Math.cos(o),h=Math.sin(o);return this.set(n*c,n*h,-n*(c*l+h*u)+l+e,-a*h,a*c,-a*(-h*l+c*u)+u+r,0,0,1),this}scale(e,r){return this.premultiply(Ar.makeScale(e,r)),this}rotate(e){return this.premultiply(Ar.makeRotation(-e)),this}translate(e,r){return this.premultiply(Ar.makeTranslation(e,r)),this}makeTranslation(e,r){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,r,0,0,1),this}makeRotation(e){const r=Math.cos(e),n=Math.sin(e);return this.set(r,-n,0,n,r,0,0,0,1),this}makeScale(e,r){return this.set(e,0,0,0,r,0,0,0,1),this}equals(e){const r=this.elements,n=e.elements;for(let a=0;a<9;a++)if(r[a]!==n[a])return!1;return!0}fromArray(e,r=0){for(let n=0;n<9;n++)this.elements[n]=e[n+r];return this}toArray(e=[],r=0){const n=this.elements;return e[r]=n[0],e[r+1]=n[1],e[r+2]=n[2],e[r+3]=n[3],e[r+4]=n[4],e[r+5]=n[5],e[r+6]=n[6],e[r+7]=n[7],e[r+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const Ar=new Ft;function wo(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}function dr(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function Gl(){const t=dr("canvas");return t.style.display="block",t}const xa={};function Ei(t){t in xa||(xa[t]=!0,console.warn(t))}function kl(t,e,r){return new Promise(function(n,a){function o(){switch(t.clientWaitSync(e,t.SYNC_FLUSH_COMMANDS_BIT,0)){case t.WAIT_FAILED:a();break;case t.TIMEOUT_EXPIRED:setTimeout(o,r);break;default:n()}}setTimeout(o,r)})}const Ma=new Ft().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),Sa=new Ft().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function Wl(){const t={enabled:!0,workingColorSpace:ai,spaces:{},convert:function(a,o,l){return this.enabled===!1||o===l||!o||!l||(this.spaces[o].transfer===Jt&&(a.r=rn(a.r),a.g=rn(a.g),a.b=rn(a.b)),this.spaces[o].primaries!==this.spaces[l].primaries&&(a.applyMatrix3(this.spaces[o].toXYZ),a.applyMatrix3(this.spaces[l].fromXYZ)),this.spaces[l].transfer===Jt&&(a.r=ei(a.r),a.g=ei(a.g),a.b=ei(a.b))),a},workingToColorSpace:function(a,o){return this.convert(a,this.workingColorSpace,o)},colorSpaceToWorking:function(a,o){return this.convert(a,o,this.workingColorSpace)},getPrimaries:function(a){return this.spaces[a].primaries},getTransfer:function(a){return a===pn?hr:this.spaces[a].transfer},getToneMappingMode:function(a){return this.spaces[a].outputColorSpaceConfig.toneMappingMode||"standard"},getLuminanceCoefficients:function(a,o=this.workingColorSpace){return a.fromArray(this.spaces[o].luminanceCoefficients)},define:function(a){Object.assign(this.spaces,a)},_getMatrix:function(a,o,l){return a.copy(this.spaces[o].toXYZ).multiply(this.spaces[l].fromXYZ)},_getDrawingBufferColorSpace:function(a){return this.spaces[a].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(a=this.workingColorSpace){return this.spaces[a].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(a,o){return Ei("THREE.ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),t.workingToColorSpace(a,o)},toWorkingColorSpace:function(a,o){return Ei("THREE.ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),t.colorSpaceToWorking(a,o)}},e=[.64,.33,.3,.6,.15,.06],r=[.2126,.7152,.0722],n=[.3127,.329];return t.define({[ai]:{primaries:e,whitePoint:n,transfer:hr,toXYZ:Ma,fromXYZ:Sa,luminanceCoefficients:r,workingColorSpaceConfig:{unpackColorSpace:Ne},outputColorSpaceConfig:{drawingBufferColorSpace:Ne}},[Ne]:{primaries:e,whitePoint:n,transfer:Jt,toXYZ:Ma,fromXYZ:Sa,luminanceCoefficients:r,outputColorSpaceConfig:{drawingBufferColorSpace:Ne}}}),t}const Xt=Wl();function rn(t){return t<.04045?t*.0773993808:Math.pow(t*.9478672986+.0521327014,2.4)}function ei(t){return t<.0031308?t*12.92:1.055*Math.pow(t,.41666)-.055}let Bn;class Xl{static getDataURL(e,r="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{Bn===void 0&&(Bn=dr("canvas")),Bn.width=e.width,Bn.height=e.height;const a=Bn.getContext("2d");e instanceof ImageData?a.putImageData(e,0,0):a.drawImage(e,0,0,e.width,e.height),n=Bn}return n.toDataURL(r)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const r=dr("canvas");r.width=e.width,r.height=e.height;const n=r.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const a=n.getImageData(0,0,e.width,e.height),o=a.data;for(let l=0;l<o.length;l++)o[l]=rn(o[l]/255)*255;return n.putImageData(a,0,0),r}else if(e.data){const r=e.data.slice(0);for(let n=0;n<r.length;n++)r instanceof Uint8Array||r instanceof Uint8ClampedArray?r[n]=Math.floor(rn(r[n]/255)*255):r[n]=rn(r[n]);return{data:r,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let Yl=0;class Js{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Yl++}),this.uuid=Ti(),this.data=e,this.dataReady=!0,this.version=0}getSize(e){const r=this.data;return typeof HTMLVideoElement<"u"&&r instanceof HTMLVideoElement?e.set(r.videoWidth,r.videoHeight,0):r instanceof VideoFrame?e.set(r.displayHeight,r.displayWidth,0):r!==null?e.set(r.width,r.height,r.depth||0):e.set(0,0,0),e}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const r=e===void 0||typeof e=="string";if(!r&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const n={uuid:this.uuid,url:""},a=this.data;if(a!==null){let o;if(Array.isArray(a)){o=[];for(let l=0,u=a.length;l<u;l++)a[l].isDataTexture?o.push(Rr(a[l].image)):o.push(Rr(a[l]))}else o=Rr(a);n.url=o}return r||(e.images[this.uuid]=n),n}}function Rr(t){return typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap?Xl.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let ql=0;const wr=new U;class be extends Nn{constructor(e=be.DEFAULT_IMAGE,r=be.DEFAULT_MAPPING,n=Pn,a=Pn,o=Ye,l=Dn,u=Ve,c=sn,h=be.DEFAULT_ANISOTROPY,v=pn){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:ql++}),this.uuid=Ti(),this.name="",this.source=new Js(e),this.mipmaps=[],this.mapping=r,this.channel=0,this.wrapS=n,this.wrapT=a,this.magFilter=o,this.minFilter=l,this.anisotropy=h,this.format=u,this.internalFormat=null,this.type=c,this.offset=new Bt(0,0),this.repeat=new Bt(1,1),this.center=new Bt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Ft,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=v,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(e&&e.depth&&e.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(wr).x}get height(){return this.source.getSize(wr).y}get depth(){return this.source.getSize(wr).z}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(e,r){this.updateRanges.push({start:e,count:r})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isArrayTexture=e.isArrayTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}setValues(e){for(const r in e){const n=e[r];if(n===void 0){console.warn(`THREE.Texture.setValues(): parameter '${r}' has value of undefined.`);continue}const a=this[r];if(a===void 0){console.warn(`THREE.Texture.setValues(): property '${r}' does not exist.`);continue}a&&n&&a.isVector2&&n.isVector2||a&&n&&a.isVector3&&n.isVector3||a&&n&&a.isMatrix3&&n.isMatrix3?a.copy(n):this[r]=n}}toJSON(e){const r=e===void 0||typeof e=="string";if(!r&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const n={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),r||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==vo)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case ps:e.x=e.x-Math.floor(e.x);break;case Pn:e.x=e.x<0?0:1;break;case ms:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case ps:e.y=e.y-Math.floor(e.y);break;case Pn:e.y=e.y<0?0:1;break;case ms:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}be.DEFAULT_IMAGE=null;be.DEFAULT_MAPPING=vo;be.DEFAULT_ANISOTROPY=1;class oe{constructor(e=0,r=0,n=0,a=1){oe.prototype.isVector4=!0,this.x=e,this.y=r,this.z=n,this.w=a}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,r,n,a){return this.x=e,this.y=r,this.z=n,this.w=a,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,r){switch(e){case 0:this.x=r;break;case 1:this.y=r;break;case 2:this.z=r;break;case 3:this.w=r;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,r){return this.x=e.x+r.x,this.y=e.y+r.y,this.z=e.z+r.z,this.w=e.w+r.w,this}addScaledVector(e,r){return this.x+=e.x*r,this.y+=e.y*r,this.z+=e.z*r,this.w+=e.w*r,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,r){return this.x=e.x-r.x,this.y=e.y-r.y,this.z=e.z-r.z,this.w=e.w-r.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const r=this.x,n=this.y,a=this.z,o=this.w,l=e.elements;return this.x=l[0]*r+l[4]*n+l[8]*a+l[12]*o,this.y=l[1]*r+l[5]*n+l[9]*a+l[13]*o,this.z=l[2]*r+l[6]*n+l[10]*a+l[14]*o,this.w=l[3]*r+l[7]*n+l[11]*a+l[15]*o,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const r=Math.sqrt(1-e.w*e.w);return r<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/r,this.y=e.y/r,this.z=e.z/r),this}setAxisAngleFromRotationMatrix(e){let r,n,a,o;const l=e.elements,u=l[0],c=l[4],h=l[8],v=l[1],g=l[5],T=l[9],R=l[2],W=l[6],k=l[10];if(Math.abs(c-v)<.01&&Math.abs(h-R)<.01&&Math.abs(T-W)<.01){if(Math.abs(c+v)<.1&&Math.abs(h+R)<.1&&Math.abs(T+W)<.1&&Math.abs(u+g+k-3)<.1)return this.set(1,0,0,0),this;r=Math.PI;const q=(u+1)/2,Se=(g+1)/2,V=(k+1)/2,Y=(c+v)/4,ie=(h+R)/4,se=(T+W)/4;return q>Se&&q>V?q<.01?(n=0,a=.707106781,o=.707106781):(n=Math.sqrt(q),a=Y/n,o=ie/n):Se>V?Se<.01?(n=.707106781,a=0,o=.707106781):(a=Math.sqrt(Se),n=Y/a,o=se/a):V<.01?(n=.707106781,a=.707106781,o=0):(o=Math.sqrt(V),n=ie/o,a=se/o),this.set(n,a,o,r),this}let J=Math.sqrt((W-T)*(W-T)+(h-R)*(h-R)+(v-c)*(v-c));return Math.abs(J)<.001&&(J=1),this.x=(W-T)/J,this.y=(h-R)/J,this.z=(v-c)/J,this.w=Math.acos((u+g+k-1)/2),this}setFromMatrixPosition(e){const r=e.elements;return this.x=r[12],this.y=r[13],this.z=r[14],this.w=r[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,r){return this.x=Vt(this.x,e.x,r.x),this.y=Vt(this.y,e.y,r.y),this.z=Vt(this.z,e.z,r.z),this.w=Vt(this.w,e.w,r.w),this}clampScalar(e,r){return this.x=Vt(this.x,e,r),this.y=Vt(this.y,e,r),this.z=Vt(this.z,e,r),this.w=Vt(this.w,e,r),this}clampLength(e,r){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Vt(n,e,r))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,r){return this.x+=(e.x-this.x)*r,this.y+=(e.y-this.y)*r,this.z+=(e.z-this.z)*r,this.w+=(e.w-this.w)*r,this}lerpVectors(e,r,n){return this.x=e.x+(r.x-e.x)*n,this.y=e.y+(r.y-e.y)*n,this.z=e.z+(r.z-e.z)*n,this.w=e.w+(r.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,r=0){return this.x=e[r],this.y=e[r+1],this.z=e[r+2],this.w=e[r+3],this}toArray(e=[],r=0){return e[r]=this.x,e[r+1]=this.y,e[r+2]=this.z,e[r+3]=this.w,e}fromBufferAttribute(e,r){return this.x=e.getX(r),this.y=e.getY(r),this.z=e.getZ(r),this.w=e.getW(r),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Kl extends Nn{constructor(e=1,r=1,n={}){super(),n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Ye,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},n),this.isRenderTarget=!0,this.width=e,this.height=r,this.depth=n.depth,this.scissor=new oe(0,0,e,r),this.scissorTest=!1,this.viewport=new oe(0,0,e,r);const a={width:e,height:r,depth:n.depth},o=new be(a);this.textures=[];const l=n.count;for(let u=0;u<l;u++)this.textures[u]=o.clone(),this.textures[u].isRenderTargetTexture=!0,this.textures[u].renderTarget=this;this._setTextureOptions(n),this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=n.depthTexture,this.samples=n.samples,this.multiview=n.multiview}_setTextureOptions(e={}){const r={minFilter:Ye,generateMipmaps:!1,flipY:!1,internalFormat:null};e.mapping!==void 0&&(r.mapping=e.mapping),e.wrapS!==void 0&&(r.wrapS=e.wrapS),e.wrapT!==void 0&&(r.wrapT=e.wrapT),e.wrapR!==void 0&&(r.wrapR=e.wrapR),e.magFilter!==void 0&&(r.magFilter=e.magFilter),e.minFilter!==void 0&&(r.minFilter=e.minFilter),e.format!==void 0&&(r.format=e.format),e.type!==void 0&&(r.type=e.type),e.anisotropy!==void 0&&(r.anisotropy=e.anisotropy),e.colorSpace!==void 0&&(r.colorSpace=e.colorSpace),e.flipY!==void 0&&(r.flipY=e.flipY),e.generateMipmaps!==void 0&&(r.generateMipmaps=e.generateMipmaps),e.internalFormat!==void 0&&(r.internalFormat=e.internalFormat);for(let n=0;n<this.textures.length;n++)this.textures[n].setValues(r)}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,r,n=1){if(this.width!==e||this.height!==r||this.depth!==n){this.width=e,this.height=r,this.depth=n;for(let a=0,o=this.textures.length;a<o;a++)this.textures[a].image.width=e,this.textures[a].image.height=r,this.textures[a].image.depth=n,this.textures[a].isArrayTexture=this.textures[a].image.depth>1;this.dispose()}this.viewport.set(0,0,e,r),this.scissor.set(0,0,e,r)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let r=0,n=e.textures.length;r<n;r++){this.textures[r]=e.textures[r].clone(),this.textures[r].isRenderTargetTexture=!0,this.textures[r].renderTarget=this;const a=Object.assign({},e.textures[r].image);this.textures[r].source=new Js(a)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class In extends Kl{constructor(e=1,r=1,n={}){super(e,r,n),this.isWebGLRenderTarget=!0}}class Co extends be{constructor(e=null,r=1,n=1,a=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:r,height:n,depth:a},this.magFilter=Ge,this.minFilter=Ge,this.wrapR=Pn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class Zl extends be{constructor(e=null,r=1,n=1,a=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:r,height:n,depth:a},this.magFilter=Ge,this.minFilter=Ge,this.wrapR=Pn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class bi{constructor(e=new U(1/0,1/0,1/0),r=new U(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=r}set(e,r){return this.min.copy(e),this.max.copy(r),this}setFromArray(e){this.makeEmpty();for(let r=0,n=e.length;r<n;r+=3)this.expandByPoint(Be.fromArray(e,r));return this}setFromBufferAttribute(e){this.makeEmpty();for(let r=0,n=e.count;r<n;r++)this.expandByPoint(Be.fromBufferAttribute(e,r));return this}setFromPoints(e){this.makeEmpty();for(let r=0,n=e.length;r<n;r++)this.expandByPoint(e[r]);return this}setFromCenterAndSize(e,r){const n=Be.copy(r).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,r=!1){return this.makeEmpty(),this.expandByObject(e,r)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,r=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(n!==void 0){const o=n.getAttribute("position");if(r===!0&&o!==void 0&&e.isInstancedMesh!==!0)for(let l=0,u=o.count;l<u;l++)e.isMesh===!0?e.getVertexPosition(l,Be):Be.fromBufferAttribute(o,l),Be.applyMatrix4(e.matrixWorld),this.expandByPoint(Be);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),Di.copy(e.boundingBox)):(n.boundingBox===null&&n.computeBoundingBox(),Di.copy(n.boundingBox)),Di.applyMatrix4(e.matrixWorld),this.union(Di)}const a=e.children;for(let o=0,l=a.length;o<l;o++)this.expandByObject(a[o],r);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,r){return r.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Be),Be.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let r,n;return e.normal.x>0?(r=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(r=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(r+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(r+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(r+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(r+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),r<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(ui),Li.subVectors(this.max,ui),zn.subVectors(e.a,ui),Hn.subVectors(e.b,ui),Vn.subVectors(e.c,ui),on.subVectors(Hn,zn),ln$1.subVectors(Vn,Hn),Sn.subVectors(zn,Vn);let r=[0,-on.z,on.y,0,-ln$1.z,ln$1.y,0,-Sn.z,Sn.y,on.z,0,-on.x,ln$1.z,0,-ln$1.x,Sn.z,0,-Sn.x,-on.y,on.x,0,-ln$1.y,ln$1.x,0,-Sn.y,Sn.x,0];return!Cr(r,zn,Hn,Vn,Li)||(r=[1,0,0,0,1,0,0,0,1],!Cr(r,zn,Hn,Vn,Li))?!1:(Ui.crossVectors(on,ln$1),r=[Ui.x,Ui.y,Ui.z],Cr(r,zn,Hn,Vn,Li))}clampPoint(e,r){return r.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Be).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Be).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(je[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),je[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),je[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),je[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),je[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),je[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),je[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),je[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(je),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(e){return this.min.fromArray(e.min),this.max.fromArray(e.max),this}}const je=[new U,new U,new U,new U,new U,new U,new U,new U],Be=new U,Di=new bi,zn=new U,Hn=new U,Vn=new U,on=new U,ln$1=new U,Sn=new U,ui=new U,Li=new U,Ui=new U,En=new U;function Cr(t,e,r,n,a){for(let o=0,l=t.length-3;o<=l;o+=3){En.fromArray(t,o);const u=a.x*Math.abs(En.x)+a.y*Math.abs(En.y)+a.z*Math.abs(En.z),c=e.dot(En),h=r.dot(En),v=n.dot(En);if(Math.max(-Math.max(c,h,v),Math.min(c,h,v))>u)return!1}return!0}const jl=new bi,di=new U,Pr=new U;class vr{constructor(e=new U,r=-1){this.isSphere=!0,this.center=e,this.radius=r}set(e,r){return this.center.copy(e),this.radius=r,this}setFromPoints(e,r){const n=this.center;r!==void 0?n.copy(r):jl.setFromPoints(e).getCenter(n);let a=0;for(let o=0,l=e.length;o<l;o++)a=Math.max(a,n.distanceToSquared(e[o]));return this.radius=Math.sqrt(a),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const r=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=r*r}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,r){const n=this.center.distanceToSquared(e);return r.copy(e),n>this.radius*this.radius&&(r.sub(this.center).normalize(),r.multiplyScalar(this.radius).add(this.center)),r}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;di.subVectors(e,this.center);const r=di.lengthSq();if(r>this.radius*this.radius){const n=Math.sqrt(r),a=(n-this.radius)*.5;this.center.addScaledVector(di,a/n),this.radius+=a}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(Pr.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(di.copy(e.center).add(Pr)),this.expandByPoint(di.copy(e.center).sub(Pr))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(e){return this.radius=e.radius,this.center.fromArray(e.center),this}}const $e=new U,Dr=new U,Ii=new U,cn=new U,Lr=new U,Ni=new U,Ur=new U;class Qs{constructor(e=new U,r=new U(0,0,-1)){this.origin=e,this.direction=r}set(e,r){return this.origin.copy(e),this.direction.copy(r),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,r){return r.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,$e)),this}closestPointToPoint(e,r){r.subVectors(e,this.origin);const n=r.dot(this.direction);return n<0?r.copy(this.origin):r.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const r=$e.subVectors(e,this.origin).dot(this.direction);return r<0?this.origin.distanceToSquared(e):($e.copy(this.origin).addScaledVector(this.direction,r),$e.distanceToSquared(e))}distanceSqToSegment(e,r,n,a){Dr.copy(e).add(r).multiplyScalar(.5),Ii.copy(r).sub(e).normalize(),cn.copy(this.origin).sub(Dr);const o=e.distanceTo(r)*.5,l=-this.direction.dot(Ii),u=cn.dot(this.direction),c=-cn.dot(Ii),h=cn.lengthSq(),v=Math.abs(1-l*l);let g,T,R,W;if(v>0)if(g=l*c-u,T=l*u-c,W=o*v,g>=0)if(T>=-W)if(T<=W){const k=1/v;g*=k,T*=k,R=g*(g+l*T+2*u)+T*(l*g+T+2*c)+h}else T=o,g=Math.max(0,-(l*T+u)),R=-g*g+T*(T+2*c)+h;else T=-o,g=Math.max(0,-(l*T+u)),R=-g*g+T*(T+2*c)+h;else T<=-W?(g=Math.max(0,-(-l*o+u)),T=g>0?-o:Math.min(Math.max(-o,-c),o),R=-g*g+T*(T+2*c)+h):T<=W?(g=0,T=Math.min(Math.max(-o,-c),o),R=T*(T+2*c)+h):(g=Math.max(0,-(l*o+u)),T=g>0?o:Math.min(Math.max(-o,-c),o),R=-g*g+T*(T+2*c)+h);else T=l>0?-o:o,g=Math.max(0,-(l*T+u)),R=-g*g+T*(T+2*c)+h;return n&&n.copy(this.origin).addScaledVector(this.direction,g),a&&a.copy(Dr).addScaledVector(Ii,T),R}intersectSphere(e,r){$e.subVectors(e.center,this.origin);const n=$e.dot(this.direction),a=$e.dot($e)-n*n,o=e.radius*e.radius;if(a>o)return null;const l=Math.sqrt(o-a),u=n-l,c=n+l;return c<0?null:u<0?this.at(c,r):this.at(u,r)}intersectsSphere(e){return e.radius<0?!1:this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const r=e.normal.dot(this.direction);if(r===0)return e.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/r;return n>=0?n:null}intersectPlane(e,r){const n=this.distanceToPlane(e);return n===null?null:this.at(n,r)}intersectsPlane(e){const r=e.distanceToPoint(this.origin);return r===0||e.normal.dot(this.direction)*r<0}intersectBox(e,r){let n,a,o,l,u,c;const h=1/this.direction.x,v=1/this.direction.y,g=1/this.direction.z,T=this.origin;return h>=0?(n=(e.min.x-T.x)*h,a=(e.max.x-T.x)*h):(n=(e.max.x-T.x)*h,a=(e.min.x-T.x)*h),v>=0?(o=(e.min.y-T.y)*v,l=(e.max.y-T.y)*v):(o=(e.max.y-T.y)*v,l=(e.min.y-T.y)*v),n>l||o>a||((o>n||isNaN(n))&&(n=o),(l<a||isNaN(a))&&(a=l),g>=0?(u=(e.min.z-T.z)*g,c=(e.max.z-T.z)*g):(u=(e.max.z-T.z)*g,c=(e.min.z-T.z)*g),n>c||u>a)||((u>n||n!==n)&&(n=u),(c<a||a!==a)&&(a=c),a<0)?null:this.at(n>=0?n:a,r)}intersectsBox(e){return this.intersectBox(e,$e)!==null}intersectTriangle(e,r,n,a,o){Lr.subVectors(r,e),Ni.subVectors(n,e),Ur.crossVectors(Lr,Ni);let l=this.direction.dot(Ur),u;if(l>0){if(a)return null;u=1}else if(l<0)u=-1,l=-l;else return null;cn.subVectors(this.origin,e);const c=u*this.direction.dot(Ni.crossVectors(cn,Ni));if(c<0)return null;const h=u*this.direction.dot(Lr.cross(cn));if(h<0||c+h>l)return null;const v=-u*cn.dot(Ur);return v<0?null:this.at(v/l,o)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class he{constructor(e,r,n,a,o,l,u,c,h,v,g,T,R,W,k,J){he.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,r,n,a,o,l,u,c,h,v,g,T,R,W,k,J)}set(e,r,n,a,o,l,u,c,h,v,g,T,R,W,k,J){const q=this.elements;return q[0]=e,q[4]=r,q[8]=n,q[12]=a,q[1]=o,q[5]=l,q[9]=u,q[13]=c,q[2]=h,q[6]=v,q[10]=g,q[14]=T,q[3]=R,q[7]=W,q[11]=k,q[15]=J,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new he().fromArray(this.elements)}copy(e){const r=this.elements,n=e.elements;return r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r[4]=n[4],r[5]=n[5],r[6]=n[6],r[7]=n[7],r[8]=n[8],r[9]=n[9],r[10]=n[10],r[11]=n[11],r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15],this}copyPosition(e){const r=this.elements,n=e.elements;return r[12]=n[12],r[13]=n[13],r[14]=n[14],this}setFromMatrix3(e){const r=e.elements;return this.set(r[0],r[3],r[6],0,r[1],r[4],r[7],0,r[2],r[5],r[8],0,0,0,0,1),this}extractBasis(e,r,n){return e.setFromMatrixColumn(this,0),r.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,r,n){return this.set(e.x,r.x,n.x,0,e.y,r.y,n.y,0,e.z,r.z,n.z,0,0,0,0,1),this}extractRotation(e){const r=this.elements,n=e.elements,a=1/Gn.setFromMatrixColumn(e,0).length(),o=1/Gn.setFromMatrixColumn(e,1).length(),l=1/Gn.setFromMatrixColumn(e,2).length();return r[0]=n[0]*a,r[1]=n[1]*a,r[2]=n[2]*a,r[3]=0,r[4]=n[4]*o,r[5]=n[5]*o,r[6]=n[6]*o,r[7]=0,r[8]=n[8]*l,r[9]=n[9]*l,r[10]=n[10]*l,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,this}makeRotationFromEuler(e){const r=this.elements,n=e.x,a=e.y,o=e.z,l=Math.cos(n),u=Math.sin(n),c=Math.cos(a),h=Math.sin(a),v=Math.cos(o),g=Math.sin(o);if(e.order==="XYZ"){const T=l*v,R=l*g,W=u*v,k=u*g;r[0]=c*v,r[4]=-c*g,r[8]=h,r[1]=R+W*h,r[5]=T-k*h,r[9]=-u*c,r[2]=k-T*h,r[6]=W+R*h,r[10]=l*c}else if(e.order==="YXZ"){const T=c*v,R=c*g,W=h*v,k=h*g;r[0]=T+k*u,r[4]=W*u-R,r[8]=l*h,r[1]=l*g,r[5]=l*v,r[9]=-u,r[2]=R*u-W,r[6]=k+T*u,r[10]=l*c}else if(e.order==="ZXY"){const T=c*v,R=c*g,W=h*v,k=h*g;r[0]=T-k*u,r[4]=-l*g,r[8]=W+R*u,r[1]=R+W*u,r[5]=l*v,r[9]=k-T*u,r[2]=-l*h,r[6]=u,r[10]=l*c}else if(e.order==="ZYX"){const T=l*v,R=l*g,W=u*v,k=u*g;r[0]=c*v,r[4]=W*h-R,r[8]=T*h+k,r[1]=c*g,r[5]=k*h+T,r[9]=R*h-W,r[2]=-h,r[6]=u*c,r[10]=l*c}else if(e.order==="YZX"){const T=l*c,R=l*h,W=u*c,k=u*h;r[0]=c*v,r[4]=k-T*g,r[8]=W*g+R,r[1]=g,r[5]=l*v,r[9]=-u*v,r[2]=-h*v,r[6]=R*g+W,r[10]=T-k*g}else if(e.order==="XZY"){const T=l*c,R=l*h,W=u*c,k=u*h;r[0]=c*v,r[4]=-g,r[8]=h*v,r[1]=T*g+k,r[5]=l*v,r[9]=R*g-W,r[2]=W*g-R,r[6]=u*v,r[10]=k*g+T}return r[3]=0,r[7]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,this}makeRotationFromQuaternion(e){return this.compose($l,e,Jl)}lookAt(e,r,n){const a=this.elements;return Ce.subVectors(e,r),Ce.lengthSq()===0&&(Ce.z=1),Ce.normalize(),hn.crossVectors(n,Ce),hn.lengthSq()===0&&(Math.abs(n.z)===1?Ce.x+=1e-4:Ce.z+=1e-4,Ce.normalize(),hn.crossVectors(n,Ce)),hn.normalize(),Fi.crossVectors(Ce,hn),a[0]=hn.x,a[4]=Fi.x,a[8]=Ce.x,a[1]=hn.y,a[5]=Fi.y,a[9]=Ce.y,a[2]=hn.z,a[6]=Fi.z,a[10]=Ce.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,r){const n=e.elements,a=r.elements,o=this.elements,l=n[0],u=n[4],c=n[8],h=n[12],v=n[1],g=n[5],T=n[9],R=n[13],W=n[2],k=n[6],J=n[10],q=n[14],Se=n[3],V=n[7],Y=n[11],ie=n[15],se=a[0],ct=a[4],ae=a[8],st=a[12],Ct=a[1],$t=a[5],jo=a[9],Lp=a[13],Mn=a[2],sa=a[6],re=a[10],$o=a[14],qo=a[3],Kt=a[7],i0=a[11],Up=a[15];return o[0]=l*se+u*Ct+c*Mn+h*qo,o[4]=l*ct+u*$t+c*sa+h*Kt,o[8]=l*ae+u*jo+c*re+h*i0,o[12]=l*st+u*Lp+c*$o+h*Up,o[1]=v*se+g*Ct+T*Mn+R*qo,o[5]=v*ct+g*$t+T*sa+R*Kt,o[9]=v*ae+g*jo+T*re+R*i0,o[13]=v*st+g*Lp+T*$o+R*Up,o[2]=W*se+k*Ct+J*Mn+q*qo,o[6]=W*ct+k*$t+J*sa+q*Kt,o[10]=W*ae+k*jo+J*re+q*i0,o[14]=W*st+k*Lp+J*$o+q*Up,o[3]=Se*se+V*Ct+Y*Mn+ie*qo,o[7]=Se*ct+V*$t+Y*sa+ie*Kt,o[11]=Se*ae+V*jo+Y*re+ie*i0,o[15]=Se*st+V*Lp+Y*$o+ie*Up,this}multiplyScalar(e){const r=this.elements;return r[0]*=e,r[4]*=e,r[8]*=e,r[12]*=e,r[1]*=e,r[5]*=e,r[9]*=e,r[13]*=e,r[2]*=e,r[6]*=e,r[10]*=e,r[14]*=e,r[3]*=e,r[7]*=e,r[11]*=e,r[15]*=e,this}determinant(){const e=this.elements,r=e[0],n=e[4],a=e[8],o=e[12],l=e[1],u=e[5],c=e[9],h=e[13],v=e[2],g=e[6],T=e[10],R=e[14],W=e[3],k=e[7],J=e[11],q=e[15];return W*(+o*c*g-a*h*g-o*u*T+n*h*T+a*u*R-n*c*R)+k*(+r*c*R-r*h*T+o*l*T-a*l*R+a*h*v-o*c*v)+J*(+r*h*g-r*u*R-o*l*g+n*l*R+o*u*v-n*h*v)+q*(-a*u*v-r*c*g+r*u*T+a*l*g-n*l*T+n*c*v)}transpose(){const e=this.elements;let r;return r=e[1],e[1]=e[4],e[4]=r,r=e[2],e[2]=e[8],e[8]=r,r=e[6],e[6]=e[9],e[9]=r,r=e[3],e[3]=e[12],e[12]=r,r=e[7],e[7]=e[13],e[13]=r,r=e[11],e[11]=e[14],e[14]=r,this}setPosition(e,r,n){const a=this.elements;return e.isVector3?(a[12]=e.x,a[13]=e.y,a[14]=e.z):(a[12]=e,a[13]=r,a[14]=n),this}invert(){const e=this.elements,r=e[0],n=e[1],a=e[2],o=e[3],l=e[4],u=e[5],c=e[6],h=e[7],v=e[8],g=e[9],T=e[10],R=e[11],W=e[12],k=e[13],J=e[14],q=e[15],Se=g*J*h-k*T*h+k*c*R-u*J*R-g*c*q+u*T*q,V=W*T*h-v*J*h-W*c*R+l*J*R+v*c*q-l*T*q,Y=v*k*h-W*g*h+W*u*R-l*k*R-v*u*q+l*g*q,ie=W*g*c-v*k*c-W*u*T+l*k*T+v*u*J-l*g*J,se=r*Se+n*V+a*Y+o*ie;if(se===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const ct=1/se;return e[0]=Se*ct,e[1]=(k*T*o-g*J*o-k*a*R+n*J*R+g*a*q-n*T*q)*ct,e[2]=(u*J*o-k*c*o+k*a*h-n*J*h-u*a*q+n*c*q)*ct,e[3]=(g*c*o-u*T*o-g*a*h+n*T*h+u*a*R-n*c*R)*ct,e[4]=V*ct,e[5]=(v*J*o-W*T*o+W*a*R-r*J*R-v*a*q+r*T*q)*ct,e[6]=(W*c*o-l*J*o-W*a*h+r*J*h+l*a*q-r*c*q)*ct,e[7]=(l*T*o-v*c*o+v*a*h-r*T*h-l*a*R+r*c*R)*ct,e[8]=Y*ct,e[9]=(W*g*o-v*k*o-W*n*R+r*k*R+v*n*q-r*g*q)*ct,e[10]=(l*k*o-W*u*o+W*n*h-r*k*h-l*n*q+r*u*q)*ct,e[11]=(v*u*o-l*g*o-v*n*h+r*g*h+l*n*R-r*u*R)*ct,e[12]=ie*ct,e[13]=(v*k*a-W*g*a+W*n*T-r*k*T-v*n*J+r*g*J)*ct,e[14]=(W*u*a-l*k*a-W*n*c+r*k*c+l*n*J-r*u*J)*ct,e[15]=(l*g*a-v*u*a+v*n*c-r*g*c-l*n*T+r*u*T)*ct,this}scale(e){const r=this.elements,n=e.x,a=e.y,o=e.z;return r[0]*=n,r[4]*=a,r[8]*=o,r[1]*=n,r[5]*=a,r[9]*=o,r[2]*=n,r[6]*=a,r[10]*=o,r[3]*=n,r[7]*=a,r[11]*=o,this}getMaxScaleOnAxis(){const e=this.elements,r=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],a=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(r,n,a))}makeTranslation(e,r,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,r,0,0,1,n,0,0,0,1),this}makeRotationX(e){const r=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,r,-n,0,0,n,r,0,0,0,0,1),this}makeRotationY(e){const r=Math.cos(e),n=Math.sin(e);return this.set(r,0,n,0,0,1,0,0,-n,0,r,0,0,0,0,1),this}makeRotationZ(e){const r=Math.cos(e),n=Math.sin(e);return this.set(r,-n,0,0,n,r,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,r){const n=Math.cos(r),a=Math.sin(r),o=1-n,l=e.x,u=e.y,c=e.z,h=o*l,v=o*u;return this.set(h*l+n,h*u-a*c,h*c+a*u,0,h*u+a*c,v*u+n,v*c-a*l,0,h*c-a*u,v*c+a*l,o*c*c+n,0,0,0,0,1),this}makeScale(e,r,n){return this.set(e,0,0,0,0,r,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,r,n,a,o,l){return this.set(1,n,o,0,e,1,l,0,r,a,1,0,0,0,0,1),this}compose(e,r,n){const a=this.elements,o=r._x,l=r._y,u=r._z,c=r._w,h=o+o,v=l+l,g=u+u,T=o*h,R=o*v,W=o*g,k=l*v,J=l*g,q=u*g,Se=c*h,V=c*v,Y=c*g,ie=n.x,se=n.y,ct=n.z;return a[0]=(1-(k+q))*ie,a[1]=(R+Y)*ie,a[2]=(W-V)*ie,a[3]=0,a[4]=(R-Y)*se,a[5]=(1-(T+q))*se,a[6]=(J+Se)*se,a[7]=0,a[8]=(W+V)*ct,a[9]=(J-Se)*ct,a[10]=(1-(T+k))*ct,a[11]=0,a[12]=e.x,a[13]=e.y,a[14]=e.z,a[15]=1,this}decompose(e,r,n){const a=this.elements;let o=Gn.set(a[0],a[1],a[2]).length();const l=Gn.set(a[4],a[5],a[6]).length(),u=Gn.set(a[8],a[9],a[10]).length();this.determinant()<0&&(o=-o),e.x=a[12],e.y=a[13],e.z=a[14],ze.copy(this);const c=1/o,h=1/l,v=1/u;return ze.elements[0]*=c,ze.elements[1]*=c,ze.elements[2]*=c,ze.elements[4]*=h,ze.elements[5]*=h,ze.elements[6]*=h,ze.elements[8]*=v,ze.elements[9]*=v,ze.elements[10]*=v,r.setFromRotationMatrix(ze),n.x=o,n.y=l,n.z=u,this}makePerspective(e,r,n,a,o,l,u=qe,c=!1){const h=this.elements,v=2*o/(r-e),g=2*o/(n-a),T=(r+e)/(r-e),R=(n+a)/(n-a);let W,k;if(c)W=o/(l-o),k=l*o/(l-o);else if(u===qe)W=-(l+o)/(l-o),k=-2*l*o/(l-o);else if(u===ur)W=-l/(l-o),k=-l*o/(l-o);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+u);return h[0]=v,h[4]=0,h[8]=T,h[12]=0,h[1]=0,h[5]=g,h[9]=R,h[13]=0,h[2]=0,h[6]=0,h[10]=W,h[14]=k,h[3]=0,h[7]=0,h[11]=-1,h[15]=0,this}makeOrthographic(e,r,n,a,o,l,u=qe,c=!1){const h=this.elements,v=2/(r-e),g=2/(n-a),T=-(r+e)/(r-e),R=-(n+a)/(n-a);let W,k;if(c)W=1/(l-o),k=l/(l-o);else if(u===qe)W=-2/(l-o),k=-(l+o)/(l-o);else if(u===ur)W=-1/(l-o),k=-o/(l-o);else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+u);return h[0]=v,h[4]=0,h[8]=0,h[12]=T,h[1]=0,h[5]=g,h[9]=0,h[13]=R,h[2]=0,h[6]=0,h[10]=W,h[14]=k,h[3]=0,h[7]=0,h[11]=0,h[15]=1,this}equals(e){const r=this.elements,n=e.elements;for(let a=0;a<16;a++)if(r[a]!==n[a])return!1;return!0}fromArray(e,r=0){for(let n=0;n<16;n++)this.elements[n]=e[n+r];return this}toArray(e=[],r=0){const n=this.elements;return e[r]=n[0],e[r+1]=n[1],e[r+2]=n[2],e[r+3]=n[3],e[r+4]=n[4],e[r+5]=n[5],e[r+6]=n[6],e[r+7]=n[7],e[r+8]=n[8],e[r+9]=n[9],e[r+10]=n[10],e[r+11]=n[11],e[r+12]=n[12],e[r+13]=n[13],e[r+14]=n[14],e[r+15]=n[15],e}}const Gn=new U,ze=new he,$l=new U(0,0,0),Jl=new U(1,1,1),hn=new U,Fi=new U,Ce=new U,Ea=new he,ya=new Un;class an{constructor(e=0,r=0,n=0,a=an.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=r,this._z=n,this._order=a}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,r,n,a=this._order){return this._x=e,this._y=r,this._z=n,this._order=a,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,r=this._order,n=!0){const a=e.elements,o=a[0],l=a[4],u=a[8],c=a[1],h=a[5],v=a[9],g=a[2],T=a[6],R=a[10];switch(r){case"XYZ":this._y=Math.asin(Vt(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-v,R),this._z=Math.atan2(-l,o)):(this._x=Math.atan2(T,h),this._z=0);break;case"YXZ":this._x=Math.asin(-Vt(v,-1,1)),Math.abs(v)<.9999999?(this._y=Math.atan2(u,R),this._z=Math.atan2(c,h)):(this._y=Math.atan2(-g,o),this._z=0);break;case"ZXY":this._x=Math.asin(Vt(T,-1,1)),Math.abs(T)<.9999999?(this._y=Math.atan2(-g,R),this._z=Math.atan2(-l,h)):(this._y=0,this._z=Math.atan2(c,o));break;case"ZYX":this._y=Math.asin(-Vt(g,-1,1)),Math.abs(g)<.9999999?(this._x=Math.atan2(T,R),this._z=Math.atan2(c,o)):(this._x=0,this._z=Math.atan2(-l,h));break;case"YZX":this._z=Math.asin(Vt(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-v,h),this._y=Math.atan2(-g,o)):(this._x=0,this._y=Math.atan2(u,R));break;case"XZY":this._z=Math.asin(-Vt(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(T,h),this._y=Math.atan2(u,o)):(this._x=Math.atan2(-v,R),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+r)}return this._order=r,n===!0&&this._onChangeCallback(),this}setFromQuaternion(e,r,n){return Ea.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Ea,r,n)}setFromVector3(e,r=this._order){return this.set(e.x,e.y,e.z,r)}reorder(e){return ya.setFromEuler(this),this.setFromQuaternion(ya,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],r=0){return e[r]=this._x,e[r+1]=this._y,e[r+2]=this._z,e[r+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}an.DEFAULT_ORDER="XYZ";class Po{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let Ql=0;const Ta=new U,kn=new Un,Je=new he,Oi=new U,fi=new U,tc=new U,ec=new Un,ba=new U(1,0,0),Aa=new U(0,1,0),Ra=new U(0,0,1),wa={type:"added"},nc={type:"removed"},Wn={type:"childadded",child:null},Ir={type:"childremoved",child:null};class Me extends Nn{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Ql++}),this.uuid=Ti(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Me.DEFAULT_UP.clone();const e=new U,r=new an,n=new Un,a=new U(1,1,1);function o(){n.setFromEuler(r,!1)}function l(){r.setFromQuaternion(n,void 0,!1)}r._onChange(o),n._onChange(l),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:r},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:a},modelViewMatrix:{value:new he},normalMatrix:{value:new Ft}}),this.matrix=new he,this.matrixWorld=new he,this.matrixAutoUpdate=Me.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Me.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Po,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,r){this.quaternion.setFromAxisAngle(e,r)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,r){return kn.setFromAxisAngle(e,r),this.quaternion.multiply(kn),this}rotateOnWorldAxis(e,r){return kn.setFromAxisAngle(e,r),this.quaternion.premultiply(kn),this}rotateX(e){return this.rotateOnAxis(ba,e)}rotateY(e){return this.rotateOnAxis(Aa,e)}rotateZ(e){return this.rotateOnAxis(Ra,e)}translateOnAxis(e,r){return Ta.copy(e).applyQuaternion(this.quaternion),this.position.add(Ta.multiplyScalar(r)),this}translateX(e){return this.translateOnAxis(ba,e)}translateY(e){return this.translateOnAxis(Aa,e)}translateZ(e){return this.translateOnAxis(Ra,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Je.copy(this.matrixWorld).invert())}lookAt(e,r,n){e.isVector3?Oi.copy(e):Oi.set(e,r,n);const a=this.parent;this.updateWorldMatrix(!0,!1),fi.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Je.lookAt(fi,Oi,this.up):Je.lookAt(Oi,fi,this.up),this.quaternion.setFromRotationMatrix(Je),a&&(Je.extractRotation(a.matrixWorld),kn.setFromRotationMatrix(Je),this.quaternion.premultiply(kn.invert()))}add(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.add(arguments[r]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(wa),Wn.child=e,this.dispatchEvent(Wn),Wn.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const r=this.children.indexOf(e);return r!==-1&&(e.parent=null,this.children.splice(r,1),e.dispatchEvent(nc),Ir.child=e,this.dispatchEvent(Ir),Ir.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Je.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Je.multiply(e.parent.matrixWorld)),e.applyMatrix4(Je),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(wa),Wn.child=e,this.dispatchEvent(Wn),Wn.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,r){if(this[e]===r)return this;for(let n=0,a=this.children.length;n<a;n++){const o=this.children[n].getObjectByProperty(e,r);if(o!==void 0)return o}}getObjectsByProperty(e,r,n=[]){this[e]===r&&n.push(this);const a=this.children;for(let o=0,l=a.length;o<l;o++)a[o].getObjectsByProperty(e,r,n);return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(fi,e,tc),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(fi,ec,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const r=this.matrixWorld.elements;return e.set(r[8],r[9],r[10]).normalize()}raycast(){}traverse(e){e(this);const r=this.children;for(let n=0,a=r.length;n<a;n++)r[n].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const r=this.children;for(let n=0,a=r.length;n<a;n++)r[n].traverseVisible(e)}traverseAncestors(e){const r=this.parent;r!==null&&(e(r),r.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const r=this.children;for(let n=0,a=r.length;n<a;n++)r[n].updateMatrixWorld(e)}updateWorldMatrix(e,r){const n=this.parent;if(e===!0&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),r===!0){const a=this.children;for(let o=0,l=a.length;o<l;o++)a[o].updateWorldMatrix(!1,!0)}}toJSON(e){const r=e===void 0||typeof e=="string",n={};r&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const a={};a.uuid=this.uuid,a.type=this.type,this.name!==""&&(a.name=this.name),this.castShadow===!0&&(a.castShadow=!0),this.receiveShadow===!0&&(a.receiveShadow=!0),this.visible===!1&&(a.visible=!1),this.frustumCulled===!1&&(a.frustumCulled=!1),this.renderOrder!==0&&(a.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(a.userData=this.userData),a.layers=this.layers.mask,a.matrix=this.matrix.toArray(),a.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(a.matrixAutoUpdate=!1),this.isInstancedMesh&&(a.type="InstancedMesh",a.count=this.count,a.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(a.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(a.type="BatchedMesh",a.perObjectFrustumCulled=this.perObjectFrustumCulled,a.sortObjects=this.sortObjects,a.drawRanges=this._drawRanges,a.reservedRanges=this._reservedRanges,a.geometryInfo=this._geometryInfo.map(u=>({...u,boundingBox:u.boundingBox?u.boundingBox.toJSON():void 0,boundingSphere:u.boundingSphere?u.boundingSphere.toJSON():void 0})),a.instanceInfo=this._instanceInfo.map(u=>({...u})),a.availableInstanceIds=this._availableInstanceIds.slice(),a.availableGeometryIds=this._availableGeometryIds.slice(),a.nextIndexStart=this._nextIndexStart,a.nextVertexStart=this._nextVertexStart,a.geometryCount=this._geometryCount,a.maxInstanceCount=this._maxInstanceCount,a.maxVertexCount=this._maxVertexCount,a.maxIndexCount=this._maxIndexCount,a.geometryInitialized=this._geometryInitialized,a.matricesTexture=this._matricesTexture.toJSON(e),a.indirectTexture=this._indirectTexture.toJSON(e),this._colorsTexture!==null&&(a.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(a.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(a.boundingBox=this.boundingBox.toJSON()));function o(u,c){return u[c.uuid]===void 0&&(u[c.uuid]=c.toJSON(e)),c.uuid}if(this.isScene)this.background&&(this.background.isColor?a.background=this.background.toJSON():this.background.isTexture&&(a.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(a.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){a.geometry=o(e.geometries,this.geometry);const u=this.geometry.parameters;if(u!==void 0&&u.shapes!==void 0){const c=u.shapes;if(Array.isArray(c))for(let h=0,v=c.length;h<v;h++){const g=c[h];o(e.shapes,g)}else o(e.shapes,c)}}if(this.isSkinnedMesh&&(a.bindMode=this.bindMode,a.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(o(e.skeletons,this.skeleton),a.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const u=[];for(let c=0,h=this.material.length;c<h;c++)u.push(o(e.materials,this.material[c]));a.material=u}else a.material=o(e.materials,this.material);if(this.children.length>0){a.children=[];for(let u=0;u<this.children.length;u++)a.children.push(this.children[u].toJSON(e).object)}if(this.animations.length>0){a.animations=[];for(let u=0;u<this.animations.length;u++){const c=this.animations[u];a.animations.push(o(e.animations,c))}}if(r){const u=l(e.geometries),c=l(e.materials),h=l(e.textures),v=l(e.images),g=l(e.shapes),T=l(e.skeletons),R=l(e.animations),W=l(e.nodes);u.length>0&&(n.geometries=u),c.length>0&&(n.materials=c),h.length>0&&(n.textures=h),v.length>0&&(n.images=v),g.length>0&&(n.shapes=g),T.length>0&&(n.skeletons=T),R.length>0&&(n.animations=R),W.length>0&&(n.nodes=W)}return n.object=a,n;function l(u){const c=[];for(const h in u){const v=u[h];delete v.metadata,c.push(v)}return c}}clone(e){return new this.constructor().copy(this,e)}copy(e,r=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),r===!0)for(let n=0;n<e.children.length;n++){const a=e.children[n];this.add(a.clone())}return this}}Me.DEFAULT_UP=new U(0,1,0);Me.DEFAULT_MATRIX_AUTO_UPDATE=!0;Me.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const He=new U,Qe=new U,Nr=new U,tn=new U,Xn=new U,Yn=new U,Ca=new U,Fr=new U,Or=new U,Br=new U,zr=new oe,Hr=new oe,Vr=new oe;class Oe{constructor(e=new U,r=new U,n=new U){this.a=e,this.b=r,this.c=n}static getNormal(e,r,n,a){a.subVectors(n,r),He.subVectors(e,r),a.cross(He);const o=a.lengthSq();return o>0?a.multiplyScalar(1/Math.sqrt(o)):a.set(0,0,0)}static getBarycoord(e,r,n,a,o){He.subVectors(a,r),Qe.subVectors(n,r),Nr.subVectors(e,r);const l=He.dot(He),u=He.dot(Qe),c=He.dot(Nr),h=Qe.dot(Qe),v=Qe.dot(Nr),g=l*h-u*u;if(g===0)return o.set(0,0,0),null;const T=1/g,R=(h*c-u*v)*T,W=(l*v-u*c)*T;return o.set(1-R-W,W,R)}static containsPoint(e,r,n,a){return this.getBarycoord(e,r,n,a,tn)===null?!1:tn.x>=0&&tn.y>=0&&tn.x+tn.y<=1}static getInterpolation(e,r,n,a,o,l,u,c){return this.getBarycoord(e,r,n,a,tn)===null?(c.x=0,c.y=0,"z"in c&&(c.z=0),"w"in c&&(c.w=0),null):(c.setScalar(0),c.addScaledVector(o,tn.x),c.addScaledVector(l,tn.y),c.addScaledVector(u,tn.z),c)}static getInterpolatedAttribute(e,r,n,a,o,l){return zr.setScalar(0),Hr.setScalar(0),Vr.setScalar(0),zr.fromBufferAttribute(e,r),Hr.fromBufferAttribute(e,n),Vr.fromBufferAttribute(e,a),l.setScalar(0),l.addScaledVector(zr,o.x),l.addScaledVector(Hr,o.y),l.addScaledVector(Vr,o.z),l}static isFrontFacing(e,r,n,a){return He.subVectors(n,r),Qe.subVectors(e,r),He.cross(Qe).dot(a)<0}set(e,r,n){return this.a.copy(e),this.b.copy(r),this.c.copy(n),this}setFromPointsAndIndices(e,r,n,a){return this.a.copy(e[r]),this.b.copy(e[n]),this.c.copy(e[a]),this}setFromAttributeAndIndices(e,r,n,a){return this.a.fromBufferAttribute(e,r),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,a),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return He.subVectors(this.c,this.b),Qe.subVectors(this.a,this.b),He.cross(Qe).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Oe.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,r){return Oe.getBarycoord(e,this.a,this.b,this.c,r)}getInterpolation(e,r,n,a,o){return Oe.getInterpolation(e,this.a,this.b,this.c,r,n,a,o)}containsPoint(e){return Oe.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Oe.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,r){const n=this.a,a=this.b,o=this.c;let l,u;Xn.subVectors(a,n),Yn.subVectors(o,n),Fr.subVectors(e,n);const c=Xn.dot(Fr),h=Yn.dot(Fr);if(c<=0&&h<=0)return r.copy(n);Or.subVectors(e,a);const v=Xn.dot(Or),g=Yn.dot(Or);if(v>=0&&g<=v)return r.copy(a);const T=c*g-v*h;if(T<=0&&c>=0&&v<=0)return l=c/(c-v),r.copy(n).addScaledVector(Xn,l);Br.subVectors(e,o);const R=Xn.dot(Br),W=Yn.dot(Br);if(W>=0&&R<=W)return r.copy(o);const k=R*h-c*W;if(k<=0&&h>=0&&W<=0)return u=h/(h-W),r.copy(n).addScaledVector(Yn,u);const J=v*W-R*g;if(J<=0&&g-v>=0&&R-W>=0)return Ca.subVectors(o,a),u=(g-v)/(g-v+(R-W)),r.copy(a).addScaledVector(Ca,u);const q=1/(J+k+T);return l=k*q,u=T*q,r.copy(n).addScaledVector(Xn,l).addScaledVector(Yn,u)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const Do={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},un={h:0,s:0,l:0},Bi={h:0,s:0,l:0};function Gr(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+(e-t)*6*r:r<1/2?e:r<2/3?t+(e-t)*6*(2/3-r):t}class qt{constructor(e,r,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,r,n)}set(e,r,n){if(r===void 0&&n===void 0){const a=e;a&&a.isColor?this.copy(a):typeof a=="number"?this.setHex(a):typeof a=="string"&&this.setStyle(a)}else this.setRGB(e,r,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,r=Ne){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Xt.colorSpaceToWorking(this,r),this}setRGB(e,r,n,a=Xt.workingColorSpace){return this.r=e,this.g=r,this.b=n,Xt.colorSpaceToWorking(this,a),this}setHSL(e,r,n,a=Xt.workingColorSpace){if(e=Hl(e,1),r=Vt(r,0,1),n=Vt(n,0,1),r===0)this.r=this.g=this.b=n;else{const o=n<=.5?n*(1+r):n+r-n*r,l=2*n-o;this.r=Gr(l,o,e+1/3),this.g=Gr(l,o,e),this.b=Gr(l,o,e-1/3)}return Xt.colorSpaceToWorking(this,a),this}setStyle(e,r=Ne){function n(o){o!==void 0&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let a;if(a=/^(\w+)\(([^\)]*)\)/.exec(e)){let o;const l=a[1],u=a[2];switch(l){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return n(o[4]),this.setRGB(Math.min(255,parseInt(o[1],10))/255,Math.min(255,parseInt(o[2],10))/255,Math.min(255,parseInt(o[3],10))/255,r);if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return n(o[4]),this.setRGB(Math.min(100,parseInt(o[1],10))/100,Math.min(100,parseInt(o[2],10))/100,Math.min(100,parseInt(o[3],10))/100,r);break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return n(o[4]),this.setHSL(parseFloat(o[1])/360,parseFloat(o[2])/100,parseFloat(o[3])/100,r);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(a=/^\#([A-Fa-f\d]+)$/.exec(e)){const o=a[1],l=o.length;if(l===3)return this.setRGB(parseInt(o.charAt(0),16)/15,parseInt(o.charAt(1),16)/15,parseInt(o.charAt(2),16)/15,r);if(l===6)return this.setHex(parseInt(o,16),r);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,r);return this}setColorName(e,r=Ne){const n=Do[e.toLowerCase()];return n!==void 0?this.setHex(n,r):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=rn(e.r),this.g=rn(e.g),this.b=rn(e.b),this}copyLinearToSRGB(e){return this.r=ei(e.r),this.g=ei(e.g),this.b=ei(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Ne){return Xt.workingToColorSpace(ge.copy(this),e),Math.round(Vt(ge.r*255,0,255))*65536+Math.round(Vt(ge.g*255,0,255))*256+Math.round(Vt(ge.b*255,0,255))}getHexString(e=Ne){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,r=Xt.workingColorSpace){Xt.workingToColorSpace(ge.copy(this),r);const n=ge.r,a=ge.g,o=ge.b,l=Math.max(n,a,o),u=Math.min(n,a,o);let c,h;const v=(u+l)/2;if(u===l)c=0,h=0;else{const g=l-u;switch(h=v<=.5?g/(l+u):g/(2-l-u),l){case n:c=(a-o)/g+(a<o?6:0);break;case a:c=(o-n)/g+2;break;case o:c=(n-a)/g+4;break}c/=6}return e.h=c,e.s=h,e.l=v,e}getRGB(e,r=Xt.workingColorSpace){return Xt.workingToColorSpace(ge.copy(this),r),e.r=ge.r,e.g=ge.g,e.b=ge.b,e}getStyle(e=Ne){Xt.workingToColorSpace(ge.copy(this),e);const r=ge.r,n=ge.g,a=ge.b;return e!==Ne?`color(${e} ${r.toFixed(3)} ${n.toFixed(3)} ${a.toFixed(3)})`:`rgb(${Math.round(r*255)},${Math.round(n*255)},${Math.round(a*255)})`}offsetHSL(e,r,n){return this.getHSL(un),this.setHSL(un.h+e,un.s+r,un.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,r){return this.r=e.r+r.r,this.g=e.g+r.g,this.b=e.b+r.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,r){return this.r+=(e.r-this.r)*r,this.g+=(e.g-this.g)*r,this.b+=(e.b-this.b)*r,this}lerpColors(e,r,n){return this.r=e.r+(r.r-e.r)*n,this.g=e.g+(r.g-e.g)*n,this.b=e.b+(r.b-e.b)*n,this}lerpHSL(e,r){this.getHSL(un),e.getHSL(Bi);const n=Tr(un.h,Bi.h,r),a=Tr(un.s,Bi.s,r),o=Tr(un.l,Bi.l,r);return this.setHSL(n,a,o),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const r=this.r,n=this.g,a=this.b,o=e.elements;return this.r=o[0]*r+o[3]*n+o[6]*a,this.g=o[1]*r+o[4]*n+o[7]*a,this.b=o[2]*r+o[5]*n+o[8]*a,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,r=0){return this.r=e[r],this.g=e[r+1],this.b=e[r+2],this}toArray(e=[],r=0){return e[r]=this.r,e[r+1]=this.g,e[r+2]=this.b,e}fromBufferAttribute(e,r){return this.r=e.getX(r),this.g=e.getY(r),this.b=e.getZ(r),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const ge=new qt;qt.NAMES=Do;let ic=0;class Ai extends Nn{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:ic++}),this.uuid=Ti(),this.name="",this.type="Material",this.blending=ti,this.side=gn,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=is,this.blendDst=rs,this.blendEquation=wn,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new qt(0,0,0),this.blendAlpha=0,this.depthFunc=ii,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=ma,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=On,this.stencilZFail=On,this.stencilZPass=On,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const r in e){const n=e[r];if(n===void 0){console.warn(`THREE.Material: parameter '${r}' has value of undefined.`);continue}const a=this[r];if(a===void 0){console.warn(`THREE.Material: '${r}' is not a property of THREE.${this.type}.`);continue}a&&a.isColor?a.set(n):a&&a.isVector3&&n&&n.isVector3?a.copy(n):this[r]=n}}toJSON(e){const r=e===void 0||typeof e=="string";r&&(e={textures:{},images:{}});const n={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.sheenColorMap&&this.sheenColorMap.isTexture&&(n.sheenColorMap=this.sheenColorMap.toJSON(e).uuid),this.sheenRoughnessMap&&this.sheenRoughnessMap.isTexture&&(n.sheenRoughnessMap=this.sheenRoughnessMap.toJSON(e).uuid),this.dispersion!==void 0&&(n.dispersion=this.dispersion),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(n.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapRotation!==void 0&&(n.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==ti&&(n.blending=this.blending),this.side!==gn&&(n.side=this.side),this.vertexColors===!0&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=!0),this.blendSrc!==is&&(n.blendSrc=this.blendSrc),this.blendDst!==rs&&(n.blendDst=this.blendDst),this.blendEquation!==wn&&(n.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(n.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(n.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==ii&&(n.depthFunc=this.depthFunc),this.depthTest===!1&&(n.depthTest=this.depthTest),this.depthWrite===!1&&(n.depthWrite=this.depthWrite),this.colorWrite===!1&&(n.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==ma&&(n.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(n.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==On&&(n.stencilFail=this.stencilFail),this.stencilZFail!==On&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==On&&(n.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(n.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaHash===!0&&(n.alphaHash=!0),this.alphaToCoverage===!0&&(n.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=!0),this.forceSinglePass===!0&&(n.forceSinglePass=!0),this.wireframe===!0&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=!0),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function a(o){const l=[];for(const u in o){const c=o[u];delete c.metadata,l.push(c)}return l}if(r){const o=a(e.textures),l=a(e.images);o.length>0&&(n.textures=o),l.length>0&&(n.images=l)}return n}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const r=e.clippingPlanes;let n=null;if(r!==null){const a=r.length;n=new Array(a);for(let o=0;o!==a;++o)n[o]=r[o].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class ni extends Ai{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new qt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new an,this.combine=go,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const ce=new U,zi=new Bt;let rc=0;class Ke{constructor(e,r,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:rc++}),this.name="",this.array=e,this.itemSize=r,this.count=e!==void 0?e.length/r:0,this.normalized=n,this.usage=_a,this.updateRanges=[],this.gpuType=nn,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,r){this.updateRanges.push({start:e,count:r})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,r,n){e*=this.itemSize,n*=r.itemSize;for(let a=0,o=this.itemSize;a<o;a++)this.array[e+a]=r.array[n+a];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let r=0,n=this.count;r<n;r++)zi.fromBufferAttribute(this,r),zi.applyMatrix3(e),this.setXY(r,zi.x,zi.y);else if(this.itemSize===3)for(let r=0,n=this.count;r<n;r++)ce.fromBufferAttribute(this,r),ce.applyMatrix3(e),this.setXYZ(r,ce.x,ce.y,ce.z);return this}applyMatrix4(e){for(let r=0,n=this.count;r<n;r++)ce.fromBufferAttribute(this,r),ce.applyMatrix4(e),this.setXYZ(r,ce.x,ce.y,ce.z);return this}applyNormalMatrix(e){for(let r=0,n=this.count;r<n;r++)ce.fromBufferAttribute(this,r),ce.applyNormalMatrix(e),this.setXYZ(r,ce.x,ce.y,ce.z);return this}transformDirection(e){for(let r=0,n=this.count;r<n;r++)ce.fromBufferAttribute(this,r),ce.transformDirection(e),this.setXYZ(r,ce.x,ce.y,ce.z);return this}set(e,r=0){return this.array.set(e,r),this}getComponent(e,r){let n=this.array[e*this.itemSize+r];return this.normalized&&(n=hi(n,this.array)),n}setComponent(e,r,n){return this.normalized&&(n=Ee(n,this.array)),this.array[e*this.itemSize+r]=n,this}getX(e){let r=this.array[e*this.itemSize];return this.normalized&&(r=hi(r,this.array)),r}setX(e,r){return this.normalized&&(r=Ee(r,this.array)),this.array[e*this.itemSize]=r,this}getY(e){let r=this.array[e*this.itemSize+1];return this.normalized&&(r=hi(r,this.array)),r}setY(e,r){return this.normalized&&(r=Ee(r,this.array)),this.array[e*this.itemSize+1]=r,this}getZ(e){let r=this.array[e*this.itemSize+2];return this.normalized&&(r=hi(r,this.array)),r}setZ(e,r){return this.normalized&&(r=Ee(r,this.array)),this.array[e*this.itemSize+2]=r,this}getW(e){let r=this.array[e*this.itemSize+3];return this.normalized&&(r=hi(r,this.array)),r}setW(e,r){return this.normalized&&(r=Ee(r,this.array)),this.array[e*this.itemSize+3]=r,this}setXY(e,r,n){return e*=this.itemSize,this.normalized&&(r=Ee(r,this.array),n=Ee(n,this.array)),this.array[e+0]=r,this.array[e+1]=n,this}setXYZ(e,r,n,a){return e*=this.itemSize,this.normalized&&(r=Ee(r,this.array),n=Ee(n,this.array),a=Ee(a,this.array)),this.array[e+0]=r,this.array[e+1]=n,this.array[e+2]=a,this}setXYZW(e,r,n,a,o){return e*=this.itemSize,this.normalized&&(r=Ee(r,this.array),n=Ee(n,this.array),a=Ee(a,this.array),o=Ee(o,this.array)),this.array[e+0]=r,this.array[e+1]=n,this.array[e+2]=a,this.array[e+3]=o,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==_a&&(e.usage=this.usage),e}}class Lo extends Ke{constructor(e,r,n){super(new Uint16Array(e),r,n)}}class Uo extends Ke{constructor(e,r,n){super(new Uint32Array(e),r,n)}}class me extends Ke{constructor(e,r,n){super(new Float32Array(e),r,n)}}let sc=0;const Ie=new he,kr=new Me,qn=new U,Pe=new bi,pi=new bi,pe=new U;class Ae extends Nn{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:sc++}),this.uuid=Ti(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(wo(e)?Uo:Lo)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,r){return this.attributes[e]=r,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,r,n=0){this.groups.push({start:e,count:r,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,r){this.drawRange.start=e,this.drawRange.count=r}applyMatrix4(e){const r=this.attributes.position;r!==void 0&&(r.applyMatrix4(e),r.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const o=new Ft().getNormalMatrix(e);n.applyNormalMatrix(o),n.needsUpdate=!0}const a=this.attributes.tangent;return a!==void 0&&(a.transformDirection(e),a.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Ie.makeRotationFromQuaternion(e),this.applyMatrix4(Ie),this}rotateX(e){return Ie.makeRotationX(e),this.applyMatrix4(Ie),this}rotateY(e){return Ie.makeRotationY(e),this.applyMatrix4(Ie),this}rotateZ(e){return Ie.makeRotationZ(e),this.applyMatrix4(Ie),this}translate(e,r,n){return Ie.makeTranslation(e,r,n),this.applyMatrix4(Ie),this}scale(e,r,n){return Ie.makeScale(e,r,n),this.applyMatrix4(Ie),this}lookAt(e){return kr.lookAt(e),kr.updateMatrix(),this.applyMatrix4(kr.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(qn).negate(),this.translate(qn.x,qn.y,qn.z),this}setFromPoints(e){const r=this.getAttribute("position");if(r===void 0){const n=[];for(let a=0,o=e.length;a<o;a++){const l=e[a];n.push(l.x,l.y,l.z||0)}this.setAttribute("position",new me(n,3))}else{const n=Math.min(e.length,r.count);for(let a=0;a<n;a++){const o=e[a];r.setXYZ(a,o.x,o.y,o.z||0)}e.length>r.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),r.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new bi);const e=this.attributes.position,r=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new U(-1/0,-1/0,-1/0),new U(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),r)for(let n=0,a=r.length;n<a;n++){const o=r[n];Pe.setFromBufferAttribute(o),this.morphTargetsRelative?(pe.addVectors(this.boundingBox.min,Pe.min),this.boundingBox.expandByPoint(pe),pe.addVectors(this.boundingBox.max,Pe.max),this.boundingBox.expandByPoint(pe)):(this.boundingBox.expandByPoint(Pe.min),this.boundingBox.expandByPoint(Pe.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new vr);const e=this.attributes.position,r=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new U,1/0);return}if(e){const n=this.boundingSphere.center;if(Pe.setFromBufferAttribute(e),r)for(let o=0,l=r.length;o<l;o++){const u=r[o];pi.setFromBufferAttribute(u),this.morphTargetsRelative?(pe.addVectors(Pe.min,pi.min),Pe.expandByPoint(pe),pe.addVectors(Pe.max,pi.max),Pe.expandByPoint(pe)):(Pe.expandByPoint(pi.min),Pe.expandByPoint(pi.max))}Pe.getCenter(n);let a=0;for(let o=0,l=e.count;o<l;o++)pe.fromBufferAttribute(e,o),a=Math.max(a,n.distanceToSquared(pe));if(r)for(let o=0,l=r.length;o<l;o++){const u=r[o],c=this.morphTargetsRelative;for(let h=0,v=u.count;h<v;h++)pe.fromBufferAttribute(u,h),c&&(qn.fromBufferAttribute(e,h),pe.add(qn)),a=Math.max(a,n.distanceToSquared(pe))}this.boundingSphere.radius=Math.sqrt(a),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,r=this.attributes;if(e===null||r.position===void 0||r.normal===void 0||r.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=r.position,a=r.normal,o=r.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Ke(new Float32Array(4*n.count),4));const l=this.getAttribute("tangent"),u=[],c=[];for(let ae=0;ae<n.count;ae++)u[ae]=new U,c[ae]=new U;const h=new U,v=new U,g=new U,T=new Bt,R=new Bt,W=new Bt,k=new U,J=new U;function q(ae,st,Ct){h.fromBufferAttribute(n,ae),v.fromBufferAttribute(n,st),g.fromBufferAttribute(n,Ct),T.fromBufferAttribute(o,ae),R.fromBufferAttribute(o,st),W.fromBufferAttribute(o,Ct),v.sub(h),g.sub(h),R.sub(T),W.sub(T);const $t=1/(R.x*W.y-W.x*R.y);isFinite($t)&&(k.copy(v).multiplyScalar(W.y).addScaledVector(g,-R.y).multiplyScalar($t),J.copy(g).multiplyScalar(R.x).addScaledVector(v,-W.x).multiplyScalar($t),u[ae].add(k),u[st].add(k),u[Ct].add(k),c[ae].add(J),c[st].add(J),c[Ct].add(J))}let Se=this.groups;Se.length===0&&(Se=[{start:0,count:e.count}]);for(let ae=0,st=Se.length;ae<st;++ae){const Ct=Se[ae],$t=Ct.start,jo=Ct.count;for(let Lp=$t,Mn=$t+jo;Lp<Mn;Lp+=3)q(e.getX(Lp+0),e.getX(Lp+1),e.getX(Lp+2))}const V=new U,Y=new U,ie=new U,se=new U;function ct(ae){ie.fromBufferAttribute(a,ae),se.copy(ie);const st=u[ae];V.copy(st),V.sub(ie.multiplyScalar(ie.dot(st))).normalize(),Y.crossVectors(se,st);const Ct=Y.dot(c[ae])<0?-1:1;l.setXYZW(ae,V.x,V.y,V.z,Ct)}for(let ae=0,st=Se.length;ae<st;++ae){const Ct=Se[ae],$t=Ct.start,jo=Ct.count;for(let Lp=$t,Mn=$t+jo;Lp<Mn;Lp+=3)ct(e.getX(Lp+0)),ct(e.getX(Lp+1)),ct(e.getX(Lp+2))}}computeVertexNormals(){const e=this.index,r=this.getAttribute("position");if(r!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new Ke(new Float32Array(r.count*3),3),this.setAttribute("normal",n);else for(let T=0,R=n.count;T<R;T++)n.setXYZ(T,0,0,0);const a=new U,o=new U,l=new U,u=new U,c=new U,h=new U,v=new U,g=new U;if(e)for(let T=0,R=e.count;T<R;T+=3){const W=e.getX(T+0),k=e.getX(T+1),J=e.getX(T+2);a.fromBufferAttribute(r,W),o.fromBufferAttribute(r,k),l.fromBufferAttribute(r,J),v.subVectors(l,o),g.subVectors(a,o),v.cross(g),u.fromBufferAttribute(n,W),c.fromBufferAttribute(n,k),h.fromBufferAttribute(n,J),u.add(v),c.add(v),h.add(v),n.setXYZ(W,u.x,u.y,u.z),n.setXYZ(k,c.x,c.y,c.z),n.setXYZ(J,h.x,h.y,h.z)}else for(let T=0,R=r.count;T<R;T+=3)a.fromBufferAttribute(r,T+0),o.fromBufferAttribute(r,T+1),l.fromBufferAttribute(r,T+2),v.subVectors(l,o),g.subVectors(a,o),v.cross(g),n.setXYZ(T+0,v.x,v.y,v.z),n.setXYZ(T+1,v.x,v.y,v.z),n.setXYZ(T+2,v.x,v.y,v.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let r=0,n=e.count;r<n;r++)pe.fromBufferAttribute(e,r),pe.normalize(),e.setXYZ(r,pe.x,pe.y,pe.z)}toNonIndexed(){function e(u,c){const h=u.array,v=u.itemSize,g=u.normalized,T=new h.constructor(c.length*v);let R=0,W=0;for(let k=0,J=c.length;k<J;k++){u.isInterleavedBufferAttribute?R=c[k]*u.data.stride+u.offset:R=c[k]*v;for(let q=0;q<v;q++)T[W++]=h[R++]}return new Ke(T,v,g)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const r=new Ae,n=this.index.array,a=this.attributes;for(const u in a){const c=a[u],h=e(c,n);r.setAttribute(u,h)}const o=this.morphAttributes;for(const u in o){const c=[],h=o[u];for(let v=0,g=h.length;v<g;v++){const T=h[v],R=e(T,n);c.push(R)}r.morphAttributes[u]=c}r.morphTargetsRelative=this.morphTargetsRelative;const l=this.groups;for(let u=0,c=l.length;u<c;u++){const h=l[u];r.addGroup(h.start,h.count,h.materialIndex)}return r}toJSON(){const e={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const c=this.parameters;for(const h in c)c[h]!==void 0&&(e[h]=c[h]);return e}e.data={attributes:{}};const r=this.index;r!==null&&(e.data.index={type:r.array.constructor.name,array:Array.prototype.slice.call(r.array)});const n=this.attributes;for(const c in n){const h=n[c];e.data.attributes[c]=h.toJSON(e.data)}const a={};let o=!1;for(const c in this.morphAttributes){const h=this.morphAttributes[c],v=[];for(let g=0,T=h.length;g<T;g++){const R=h[g];v.push(R.toJSON(e.data))}v.length>0&&(a[c]=v,o=!0)}o&&(e.data.morphAttributes=a,e.data.morphTargetsRelative=this.morphTargetsRelative);const l=this.groups;l.length>0&&(e.data.groups=JSON.parse(JSON.stringify(l)));const u=this.boundingSphere;return u!==null&&(e.data.boundingSphere=u.toJSON()),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const r={};this.name=e.name;const n=e.index;n!==null&&this.setIndex(n.clone());const a=e.attributes;for(const h in a){const v=a[h];this.setAttribute(h,v.clone(r))}const o=e.morphAttributes;for(const h in o){const v=[],g=o[h];for(let T=0,R=g.length;T<R;T++)v.push(g[T].clone(r));this.morphAttributes[h]=v}this.morphTargetsRelative=e.morphTargetsRelative;const l=e.groups;for(let h=0,v=l.length;h<v;h++){const g=l[h];this.addGroup(g.start,g.count,g.materialIndex)}const u=e.boundingBox;u!==null&&(this.boundingBox=u.clone());const c=e.boundingSphere;return c!==null&&(this.boundingSphere=c.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const Pa=new he,yn=new Qs,Hi=new vr,Da=new U,Vi=new U,Gi=new U,ki=new U,Wr=new U,Wi=new U,La=new U,Xi=new U;class De extends Me{constructor(e=new Ae,r=new ni){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=r,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(e,r){return super.copy(e,r),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,r=Object.keys(e);if(r.length>0){const n=e[r[0]];if(n!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,o=n.length;a<o;a++){const l=n[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=a}}}}getVertexPosition(e,r){const n=this.geometry,a=n.attributes.position,o=n.morphAttributes.position,l=n.morphTargetsRelative;r.fromBufferAttribute(a,e);const u=this.morphTargetInfluences;if(o&&u){Wi.set(0,0,0);for(let c=0,h=o.length;c<h;c++){const v=u[c],g=o[c];v!==0&&(Wr.fromBufferAttribute(g,e),l?Wi.addScaledVector(Wr,v):Wi.addScaledVector(Wr.sub(r),v))}r.add(Wi)}return r}raycast(e,r){const n=this.geometry,a=this.material,o=this.matrixWorld;a!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),Hi.copy(n.boundingSphere),Hi.applyMatrix4(o),yn.copy(e.ray).recast(e.near),!(Hi.containsPoint(yn.origin)===!1&&(yn.intersectSphere(Hi,Da)===null||yn.origin.distanceToSquared(Da)>(e.far-e.near)**2))&&(Pa.copy(o).invert(),yn.copy(e.ray).applyMatrix4(Pa),!(n.boundingBox!==null&&yn.intersectsBox(n.boundingBox)===!1)&&this._computeIntersections(e,r,yn)))}_computeIntersections(e,r,n){let a;const o=this.geometry,l=this.material,u=o.index,c=o.attributes.position,h=o.attributes.uv,v=o.attributes.uv1,g=o.attributes.normal,T=o.groups,R=o.drawRange;if(u!==null)if(Array.isArray(l))for(let W=0,k=T.length;W<k;W++){const J=T[W],q=l[J.materialIndex],Se=Math.max(J.start,R.start),V=Math.min(u.count,Math.min(J.start+J.count,R.start+R.count));for(let Y=Se,ie=V;Y<ie;Y+=3){const se=u.getX(Y),ct=u.getX(Y+1),ae=u.getX(Y+2);a=Yi(this,q,e,n,h,v,g,se,ct,ae),a&&(a.faceIndex=Math.floor(Y/3),a.face.materialIndex=J.materialIndex,r.push(a))}}else{const W=Math.max(0,R.start),k=Math.min(u.count,R.start+R.count);for(let J=W,q=k;J<q;J+=3){const Se=u.getX(J),V=u.getX(J+1),Y=u.getX(J+2);a=Yi(this,l,e,n,h,v,g,Se,V,Y),a&&(a.faceIndex=Math.floor(J/3),r.push(a))}}else if(c!==void 0)if(Array.isArray(l))for(let W=0,k=T.length;W<k;W++){const J=T[W],q=l[J.materialIndex],Se=Math.max(J.start,R.start),V=Math.min(c.count,Math.min(J.start+J.count,R.start+R.count));for(let Y=Se,ie=V;Y<ie;Y+=3){const se=Y,ct=Y+1,ae=Y+2;a=Yi(this,q,e,n,h,v,g,se,ct,ae),a&&(a.faceIndex=Math.floor(Y/3),a.face.materialIndex=J.materialIndex,r.push(a))}}else{const W=Math.max(0,R.start),k=Math.min(c.count,R.start+R.count);for(let J=W,q=k;J<q;J+=3){const Se=J,V=J+1,Y=J+2;a=Yi(this,l,e,n,h,v,g,Se,V,Y),a&&(a.faceIndex=Math.floor(J/3),r.push(a))}}}}function ac(t,e,r,n,a,o,l,u){let c;if(e.side===Te?c=n.intersectTriangle(l,o,a,!0,u):c=n.intersectTriangle(a,o,l,e.side===gn,u),c===null)return null;Xi.copy(u),Xi.applyMatrix4(t.matrixWorld);const h=r.ray.origin.distanceTo(Xi);return h<r.near||h>r.far?null:{distance:h,point:Xi.clone(),object:t}}function Yi(t,e,r,n,a,o,l,u,c,h){t.getVertexPosition(u,Vi),t.getVertexPosition(c,Gi),t.getVertexPosition(h,ki);const v=ac(t,e,r,n,Vi,Gi,ki,La);if(v){const g=new U;Oe.getBarycoord(La,Vi,Gi,ki,g),a&&(v.uv=Oe.getInterpolatedAttribute(a,u,c,h,g,new Bt)),o&&(v.uv1=Oe.getInterpolatedAttribute(o,u,c,h,g,new Bt)),l&&(v.normal=Oe.getInterpolatedAttribute(l,u,c,h,g,new U),v.normal.dot(n.direction)>0&&v.normal.multiplyScalar(-1));const T={a:u,b:c,c:h,normal:new U,materialIndex:0};Oe.getNormal(Vi,Gi,ki,T.normal),v.face=T,v.barycoord=g}return v}class Ri extends Ae{constructor(e=1,r=1,n=1,a=1,o=1,l=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:r,depth:n,widthSegments:a,heightSegments:o,depthSegments:l};const u=this;a=Math.floor(a),o=Math.floor(o),l=Math.floor(l);const c=[],h=[],v=[],g=[];let T=0,R=0;W("z","y","x",-1,-1,n,r,e,l,o,0),W("z","y","x",1,-1,n,r,-e,l,o,1),W("x","z","y",1,1,e,n,r,a,l,2),W("x","z","y",1,-1,e,n,-r,a,l,3),W("x","y","z",1,-1,e,r,n,a,o,4),W("x","y","z",-1,-1,e,r,-n,a,o,5),this.setIndex(c),this.setAttribute("position",new me(h,3)),this.setAttribute("normal",new me(v,3)),this.setAttribute("uv",new me(g,2));function W(k,J,q,Se,V,Y,ie,se,ct,ae,st){const Ct=Y/ct,$t=ie/ae,jo=Y/2,Lp=ie/2,Mn=se/2,sa=ct+1,re=ae+1;let $o=0,qo=0;const Kt=new U;for(let i0=0;i0<re;i0++){const Up=i0*$t-Lp;for(let l0=0;l0<sa;l0++){const y0=l0*Ct-jo;Kt[k]=y0*Se,Kt[J]=Up*V,Kt[q]=Mn,h.push(Kt.x,Kt.y,Kt.z),Kt[k]=0,Kt[J]=0,Kt[q]=se>0?1:-1,v.push(Kt.x,Kt.y,Kt.z),g.push(l0/ct),g.push(1-i0/ae),$o+=1}}for(let i0=0;i0<ae;i0++)for(let Up=0;Up<ct;Up++){const l0=T+Up+sa*i0,y0=T+Up+sa*(i0+1),kp=T+(Up+1)+sa*(i0+1),u0=T+(Up+1)+sa*i0;c.push(l0,y0,u0),c.push(y0,kp,u0),qo+=6}u.addGroup(R,qo,st),R+=qo,T+=$o}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ri(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function oi(t){const e={};for(const r in t){e[r]={};for(const n in t[r]){const a=t[r][n];a&&(a.isColor||a.isMatrix3||a.isMatrix4||a.isVector2||a.isVector3||a.isVector4||a.isTexture||a.isQuaternion)?a.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[r][n]=null):e[r][n]=a.clone():Array.isArray(a)?e[r][n]=a.slice():e[r][n]=a}}return e}function xe(t){const e={};for(let r=0;r<t.length;r++){const n=oi(t[r]);for(const a in n)e[a]=n[a]}return e}function oc(t){const e=[];for(let r=0;r<t.length;r++)e.push(t[r].clone());return e}function Io(t){const e=t.getRenderTarget();return e===null?t.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Xt.workingColorSpace}const lc={clone:oi,merge:xe};var cc=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,hc=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class vn extends Ai{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=cc,this.fragmentShader=hc,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=oi(e.uniforms),this.uniformsGroups=oc(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const r=super.toJSON(e);r.glslVersion=this.glslVersion,r.uniforms={};for(const a in this.uniforms){const o=this.uniforms[a].value;o&&o.isTexture?r.uniforms[a]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?r.uniforms[a]={type:"c",value:o.getHex()}:o&&o.isVector2?r.uniforms[a]={type:"v2",value:o.toArray()}:o&&o.isVector3?r.uniforms[a]={type:"v3",value:o.toArray()}:o&&o.isVector4?r.uniforms[a]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?r.uniforms[a]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?r.uniforms[a]={type:"m4",value:o.toArray()}:r.uniforms[a]={value:o}}Object.keys(this.defines).length>0&&(r.defines=this.defines),r.vertexShader=this.vertexShader,r.fragmentShader=this.fragmentShader,r.lights=this.lights,r.clipping=this.clipping;const n={};for(const a in this.extensions)this.extensions[a]===!0&&(n[a]=!0);return Object.keys(n).length>0&&(r.extensions=n),r}}class No extends Me{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new he,this.projectionMatrix=new he,this.projectionMatrixInverse=new he,this.coordinateSystem=qe,this._reversedDepth=!1}get reversedDepth(){return this._reversedDepth}copy(e,r){return super.copy(e,r),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,r){super.updateWorldMatrix(e,r),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const dn=new U,Ua=new Bt,Ia=new Bt;class Fe extends No{constructor(e=50,r=1,n=.1,a=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=a,this.focus=10,this.aspect=r,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,r){return super.copy(e,r),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const r=.5*this.getFilmHeight()/e;this.fov=Ws*2*Math.atan(r),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(gi*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Ws*2*Math.atan(Math.tan(gi*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,r,n){dn.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),r.set(dn.x,dn.y).multiplyScalar(-e/dn.z),dn.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(dn.x,dn.y).multiplyScalar(-e/dn.z)}getViewSize(e,r){return this.getViewBounds(e,Ua,Ia),r.subVectors(Ia,Ua)}setViewOffset(e,r,n,a,o,l){this.aspect=e/r,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=r,this.view.offsetX=n,this.view.offsetY=a,this.view.width=o,this.view.height=l,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let r=e*Math.tan(gi*.5*this.fov)/this.zoom,n=2*r,a=this.aspect*n,o=-.5*a;const l=this.view;if(this.view!==null&&this.view.enabled){const c=l.fullWidth,h=l.fullHeight;o+=l.offsetX*a/c,r-=l.offsetY*n/h,a*=l.width/c,n*=l.height/h}const u=this.filmOffset;u!==0&&(o+=e*u/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+a,r,r-n,e,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const r=super.toJSON(e);return r.object.fov=this.fov,r.object.zoom=this.zoom,r.object.near=this.near,r.object.far=this.far,r.object.focus=this.focus,r.object.aspect=this.aspect,this.view!==null&&(r.object.view=Object.assign({},this.view)),r.object.filmGauge=this.filmGauge,r.object.filmOffset=this.filmOffset,r}}const Kn=-90,Zn=1;class uc extends Me{constructor(e,r,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const a=new Fe(Kn,Zn,e,r);a.layers=this.layers,this.add(a);const o=new Fe(Kn,Zn,e,r);o.layers=this.layers,this.add(o);const l=new Fe(Kn,Zn,e,r);l.layers=this.layers,this.add(l);const u=new Fe(Kn,Zn,e,r);u.layers=this.layers,this.add(u);const c=new Fe(Kn,Zn,e,r);c.layers=this.layers,this.add(c);const h=new Fe(Kn,Zn,e,r);h.layers=this.layers,this.add(h)}updateCoordinateSystem(){const e=this.coordinateSystem,r=this.children.concat(),[n,a,o,l,u,c]=r;for(const h of r)this.remove(h);if(e===qe)n.up.set(0,1,0),n.lookAt(1,0,0),a.up.set(0,1,0),a.lookAt(-1,0,0),o.up.set(0,0,-1),o.lookAt(0,1,0),l.up.set(0,0,1),l.lookAt(0,-1,0),u.up.set(0,1,0),u.lookAt(0,0,1),c.up.set(0,1,0),c.lookAt(0,0,-1);else if(e===ur)n.up.set(0,-1,0),n.lookAt(-1,0,0),a.up.set(0,-1,0),a.lookAt(1,0,0),o.up.set(0,0,1),o.lookAt(0,1,0),l.up.set(0,0,-1),l.lookAt(0,-1,0),u.up.set(0,-1,0),u.lookAt(0,0,1),c.up.set(0,-1,0),c.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const h of r)this.add(h),h.updateMatrixWorld()}update(e,r){this.parent===null&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:a}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[o,l,u,c,h,v]=this.children,g=e.getRenderTarget(),T=e.getActiveCubeFace(),R=e.getActiveMipmapLevel(),W=e.xr.enabled;e.xr.enabled=!1;const k=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,a),e.render(r,o),e.setRenderTarget(n,1,a),e.render(r,l),e.setRenderTarget(n,2,a),e.render(r,u),e.setRenderTarget(n,3,a),e.render(r,c),e.setRenderTarget(n,4,a),e.render(r,h),n.texture.generateMipmaps=k,e.setRenderTarget(n,5,a),e.render(r,v),e.setRenderTarget(g,T,R),e.xr.enabled=W,n.texture.needsPMREMUpdate=!0}}class Fo extends be{constructor(e=[],r=ri,n,a,o,l,u,c,h,v){super(e,r,n,a,o,l,u,c,h,v),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class dc extends In{constructor(e=1,r={}){super(e,e,r),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},a=[n,n,n,n,n,n];this.texture=new Fo(a),this._setTextureOptions(r),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(e,r){this.texture.type=r.type,this.texture.colorSpace=r.colorSpace,this.texture.generateMipmaps=r.generateMipmaps,this.texture.minFilter=r.minFilter,this.texture.magFilter=r.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},a=new Ri(5,5,5),o=new vn({name:"CubemapFromEquirect",uniforms:oi(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:Te,blending:mn});o.uniforms.tEquirect.value=r;const l=new De(a,o),u=r.minFilter;return r.minFilter===Dn&&(r.minFilter=Ye),new uc(1,10,this).update(e,l),r.minFilter=u,l.geometry.dispose(),l.material.dispose(),this}clear(e,r=!0,n=!0,a=!0){const o=e.getRenderTarget();for(let l=0;l<6;l++)e.setRenderTarget(this,l),e.clear(r,n,a);e.setRenderTarget(o)}}class qi extends Me{constructor(){super(),this.isGroup=!0,this.type="Group"}}const fc={type:"move"};class Xr{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new qi,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new qi,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new U,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new U),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new qi,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new U,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new U),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const r=this._hand;if(r)for(const n of e.hand.values())this._getHandJoint(r,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,r,n){let a=null,o=null,l=null;const u=this._targetRay,c=this._grip,h=this._hand;if(e&&r.session.visibilityState!=="visible-blurred"){if(h&&e.hand){l=!0;for(const k of e.hand.values()){const J=r.getJointPose(k,n),q=this._getHandJoint(h,k);J!==null&&(q.matrix.fromArray(J.transform.matrix),q.matrix.decompose(q.position,q.rotation,q.scale),q.matrixWorldNeedsUpdate=!0,q.jointRadius=J.radius),q.visible=J!==null}const v=h.joints["index-finger-tip"],g=h.joints["thumb-tip"],T=v.position.distanceTo(g.position),R=.02,W=.005;h.inputState.pinching&&T>R+W?(h.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!h.inputState.pinching&&T<=R-W&&(h.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else c!==null&&e.gripSpace&&(o=r.getPose(e.gripSpace,n),o!==null&&(c.matrix.fromArray(o.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,o.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(o.linearVelocity)):c.hasLinearVelocity=!1,o.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(o.angularVelocity)):c.hasAngularVelocity=!1));u!==null&&(a=r.getPose(e.targetRaySpace,n),a===null&&o!==null&&(a=o),a!==null&&(u.matrix.fromArray(a.transform.matrix),u.matrix.decompose(u.position,u.rotation,u.scale),u.matrixWorldNeedsUpdate=!0,a.linearVelocity?(u.hasLinearVelocity=!0,u.linearVelocity.copy(a.linearVelocity)):u.hasLinearVelocity=!1,a.angularVelocity?(u.hasAngularVelocity=!0,u.angularVelocity.copy(a.angularVelocity)):u.hasAngularVelocity=!1,this.dispatchEvent(fc)))}return u!==null&&(u.visible=a!==null),c!==null&&(c.visible=o!==null),h!==null&&(h.visible=l!==null),this}_getHandJoint(e,r){if(e.joints[r.jointName]===void 0){const n=new qi;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[r.jointName]=n,e.add(n)}return e.joints[r.jointName]}}class pc extends Me{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new an,this.environmentIntensity=1,this.environmentRotation=new an,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,r){return super.copy(e,r),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const r=super.toJSON(e);return this.fog!==null&&(r.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(r.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(r.object.backgroundIntensity=this.backgroundIntensity),r.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(r.object.environmentIntensity=this.environmentIntensity),r.object.environmentRotation=this.environmentRotation.toArray(),r}}const Yr=new U,mc=new U,_c=new Ft;class fn{constructor(e=new U(1,0,0),r=0){this.isPlane=!0,this.normal=e,this.constant=r}set(e,r){return this.normal.copy(e),this.constant=r,this}setComponents(e,r,n,a){return this.normal.set(e,r,n),this.constant=a,this}setFromNormalAndCoplanarPoint(e,r){return this.normal.copy(e),this.constant=-r.dot(this.normal),this}setFromCoplanarPoints(e,r,n){const a=Yr.subVectors(n,r).cross(mc.subVectors(e,r)).normalize();return this.setFromNormalAndCoplanarPoint(a,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,r){return r.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,r){const n=e.delta(Yr),a=this.normal.dot(n);if(a===0)return this.distanceToPoint(e.start)===0?r.copy(e.start):null;const o=-(e.start.dot(this.normal)+this.constant)/a;return o<0||o>1?null:r.copy(e.start).addScaledVector(n,o)}intersectsLine(e){const r=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return r<0&&n>0||n<0&&r>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,r){const n=r||_c.getNormalMatrix(e),a=this.coplanarPoint(Yr).applyMatrix4(e),o=this.normal.applyMatrix3(n).normalize();return this.constant=-a.dot(o),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Tn=new vr,gc=new Bt(.5,.5),Ki=new U;class Oo{constructor(e=new fn,r=new fn,n=new fn,a=new fn,o=new fn,l=new fn){this.planes=[e,r,n,a,o,l]}set(e,r,n,a,o,l){const u=this.planes;return u[0].copy(e),u[1].copy(r),u[2].copy(n),u[3].copy(a),u[4].copy(o),u[5].copy(l),this}copy(e){const r=this.planes;for(let n=0;n<6;n++)r[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,r=qe,n=!1){const a=this.planes,o=e.elements,l=o[0],u=o[1],c=o[2],h=o[3],v=o[4],g=o[5],T=o[6],R=o[7],W=o[8],k=o[9],J=o[10],q=o[11],Se=o[12],V=o[13],Y=o[14],ie=o[15];if(a[0].setComponents(h-l,R-v,q-W,ie-Se).normalize(),a[1].setComponents(h+l,R+v,q+W,ie+Se).normalize(),a[2].setComponents(h+u,R+g,q+k,ie+V).normalize(),a[3].setComponents(h-u,R-g,q-k,ie-V).normalize(),n)a[4].setComponents(c,T,J,Y).normalize(),a[5].setComponents(h-c,R-T,q-J,ie-Y).normalize();else if(a[4].setComponents(h-c,R-T,q-J,ie-Y).normalize(),r===qe)a[5].setComponents(h+c,R+T,q+J,ie+Y).normalize();else if(r===ur)a[5].setComponents(c,T,J,Y).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+r);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Tn.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const r=e.geometry;r.boundingSphere===null&&r.computeBoundingSphere(),Tn.copy(r.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Tn)}intersectsSprite(e){Tn.center.set(0,0,0);const r=gc.distanceTo(e.center);return Tn.radius=.7071067811865476+r,Tn.applyMatrix4(e.matrixWorld),this.intersectsSphere(Tn)}intersectsSphere(e){const r=this.planes,n=e.center,a=-e.radius;for(let o=0;o<6;o++)if(r[o].distanceToPoint(n)<a)return!1;return!0}intersectsBox(e){const r=this.planes;for(let n=0;n<6;n++){const a=r[n];if(Ki.x=a.normal.x>0?e.max.x:e.min.x,Ki.y=a.normal.y>0?e.max.y:e.min.y,Ki.z=a.normal.z>0?e.max.z:e.min.z,a.distanceToPoint(Ki)<0)return!1}return!0}containsPoint(e){const r=this.planes;for(let n=0;n<6;n++)if(r[n].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}class fr extends Ai{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new qt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const pr=new U,mr=new U,Na=new he,mi=new Qs,Zi=new vr,qr=new U,Fa=new U;class ta extends Me{constructor(e=new Ae,r=new fr){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=r,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,r){return super.copy(e,r),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const r=e.attributes.position,n=[0];for(let a=1,o=r.count;a<o;a++)pr.fromBufferAttribute(r,a-1),mr.fromBufferAttribute(r,a),n[a]=n[a-1],n[a]+=pr.distanceTo(mr);e.setAttribute("lineDistance",new me(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,r){const n=this.geometry,a=this.matrixWorld,o=e.params.Line.threshold,l=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),Zi.copy(n.boundingSphere),Zi.applyMatrix4(a),Zi.radius+=o,e.ray.intersectsSphere(Zi)===!1)return;Na.copy(a).invert(),mi.copy(e.ray).applyMatrix4(Na);const u=o/((this.scale.x+this.scale.y+this.scale.z)/3),c=u*u,h=this.isLineSegments?2:1,v=n.index,g=n.attributes.position;if(v!==null){const T=Math.max(0,l.start),R=Math.min(v.count,l.start+l.count);for(let W=T,k=R-1;W<k;W+=h){const J=v.getX(W),q=v.getX(W+1),Se=ji(this,e,mi,c,J,q,W);Se&&r.push(Se)}if(this.isLineLoop){const W=v.getX(R-1),k=v.getX(T),J=ji(this,e,mi,c,W,k,R-1);J&&r.push(J)}}else{const T=Math.max(0,l.start),R=Math.min(g.count,l.start+l.count);for(let W=T,k=R-1;W<k;W+=h){const J=ji(this,e,mi,c,W,W+1,W);J&&r.push(J)}if(this.isLineLoop){const W=ji(this,e,mi,c,R-1,T,R-1);W&&r.push(W)}}}updateMorphTargets(){const e=this.geometry.morphAttributes,r=Object.keys(e);if(r.length>0){const n=e[r[0]];if(n!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,o=n.length;a<o;a++){const l=n[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=a}}}}}function ji(t,e,r,n,a,o,l){const u=t.geometry.attributes.position;if(pr.fromBufferAttribute(u,a),mr.fromBufferAttribute(u,o),r.distanceSqToSegment(pr,mr,qr,Fa)>n)return;qr.applyMatrix4(t.matrixWorld);const c=e.ray.origin.distanceTo(qr);if(!(c<e.near||c>e.far))return{distance:c,point:Fa.clone().applyMatrix4(t.matrixWorld),index:l,face:null,faceIndex:null,barycoord:null,object:t}}const Oa=new U,Ba=new U;class vc extends ta{constructor(e,r){super(e,r),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const r=e.attributes.position,n=[];for(let a=0,o=r.count;a<o;a+=2)Oa.fromBufferAttribute(r,a),Ba.fromBufferAttribute(r,a+1),n[a]=a===0?0:n[a-1],n[a+1]=n[a]+Oa.distanceTo(Ba);e.setAttribute("lineDistance",new me(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class Bo extends be{constructor(e,r,n=Ln,a,o,l,u=Ge,c=Ge,h,v=Mi,g=1){if(v!==Mi&&v!==Si)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");const T={width:e,height:r,depth:g};super(T,a,o,l,u,c,v,n,h),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new Js(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const r=super.toJSON(e);return this.compareFunction!==null&&(r.compareFunction=this.compareFunction),r}}class zo extends be{constructor(e=null){super(),this.sourceTexture=e,this.isExternalTexture=!0}copy(e){return super.copy(e),this.sourceTexture=e.sourceTexture,this}}class ea extends Ae{constructor(e=1,r=1,n=1,a=32,o=1,l=!1,u=0,c=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:r,height:n,radialSegments:a,heightSegments:o,openEnded:l,thetaStart:u,thetaLength:c};const h=this;a=Math.floor(a),o=Math.floor(o);const v=[],g=[],T=[],R=[];let W=0;const k=[],J=n/2;let q=0;Se(),l===!1&&(e>0&&V(!0),r>0&&V(!1)),this.setIndex(v),this.setAttribute("position",new me(g,3)),this.setAttribute("normal",new me(T,3)),this.setAttribute("uv",new me(R,2));function Se(){const Y=new U,ie=new U;let se=0;const ct=(r-e)/n;for(let ae=0;ae<=o;ae++){const st=[],Ct=ae/o,$t=Ct*(r-e)+e;for(let jo=0;jo<=a;jo++){const Lp=jo/a,Mn=Lp*c+u,sa=Math.sin(Mn),re=Math.cos(Mn);ie.x=$t*sa,ie.y=-Ct*n+J,ie.z=$t*re,g.push(ie.x,ie.y,ie.z),Y.set(sa,ct,re).normalize(),T.push(Y.x,Y.y,Y.z),R.push(Lp,1-Ct),st.push(W++)}k.push(st)}for(let ae=0;ae<a;ae++)for(let st=0;st<o;st++){const Ct=k[st][ae],$t=k[st+1][ae],jo=k[st+1][ae+1],Lp=k[st][ae+1];(e>0||st!==0)&&(v.push(Ct,$t,Lp),se+=3),(r>0||st!==o-1)&&(v.push($t,jo,Lp),se+=3)}h.addGroup(q,se,0),q+=se}function V(Y){const ie=W,se=new Bt,ct=new U;let ae=0;const st=Y===!0?e:r,Ct=Y===!0?1:-1;for(let jo=1;jo<=a;jo++)g.push(0,J*Ct,0),T.push(0,Ct,0),R.push(.5,.5),W++;const $t=W;for(let jo=0;jo<=a;jo++){const Lp=jo/a*c+u,Mn=Math.cos(Lp),sa=Math.sin(Lp);ct.x=st*sa,ct.y=J*Ct,ct.z=st*Mn,g.push(ct.x,ct.y,ct.z),T.push(0,Ct,0),se.x=Mn*.5+.5,se.y=sa*.5*Ct+.5,R.push(se.x,se.y),W++}for(let jo=0;jo<a;jo++){const Lp=ie+jo,Mn=$t+jo;Y===!0?v.push(Mn,Mn+1,Lp):v.push(Mn+1,Mn,Lp),ae+=3}h.addGroup(q,ae,Y===!0?1:2),q+=ae}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ea(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class na extends ea{constructor(e=1,r=1,n=32,a=1,o=!1,l=0,u=Math.PI*2){super(0,e,r,n,a,o,l,u),this.type="ConeGeometry",this.parameters={radius:e,height:r,radialSegments:n,heightSegments:a,openEnded:o,thetaStart:l,thetaLength:u}}static fromJSON(e){return new na(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}const $i=new U,Ji=new U,Kr=new U,Qi=new Oe;class xc extends Ae{constructor(e=null,r=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:r},e!==null){const n=Math.pow(10,4),a=Math.cos(gi*r),o=e.getIndex(),l=e.getAttribute("position"),u=o?o.count:l.count,c=[0,0,0],h=["a","b","c"],v=new Array(3),g={},T=[];for(let R=0;R<u;R+=3){o?(c[0]=o.getX(R),c[1]=o.getX(R+1),c[2]=o.getX(R+2)):(c[0]=R,c[1]=R+1,c[2]=R+2);const{a:W,b:k,c:J}=Qi;if(W.fromBufferAttribute(l,c[0]),k.fromBufferAttribute(l,c[1]),J.fromBufferAttribute(l,c[2]),Qi.getNormal(Kr),v[0]=`${Math.round(W.x*n)},${Math.round(W.y*n)},${Math.round(W.z*n)}`,v[1]=`${Math.round(k.x*n)},${Math.round(k.y*n)},${Math.round(k.z*n)}`,v[2]=`${Math.round(J.x*n)},${Math.round(J.y*n)},${Math.round(J.z*n)}`,!(v[0]===v[1]||v[1]===v[2]||v[2]===v[0]))for(let q=0;q<3;q++){const Se=(q+1)%3,V=v[q],Y=v[Se],ie=Qi[h[q]],se=Qi[h[Se]],ct=`${V}_${Y}`,ae=`${Y}_${V}`;ae in g&&g[ae]?(Kr.dot(g[ae].normal)<=a&&(T.push(ie.x,ie.y,ie.z),T.push(se.x,se.y,se.z)),g[ae]=null):ct in g||(g[ct]={index0:c[q],index1:c[Se],normal:Kr.clone()})}}for(const R in g)if(g[R]){const{index0:W,index1:k}=g[R];$i.fromBufferAttribute(l,W),Ji.fromBufferAttribute(l,k),T.push($i.x,$i.y,$i.z),T.push(Ji.x,Ji.y,Ji.z)}this.setAttribute("position",new me(T,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class xr extends Ae{constructor(e=1,r=1,n=1,a=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:r,widthSegments:n,heightSegments:a};const o=e/2,l=r/2,u=Math.floor(n),c=Math.floor(a),h=u+1,v=c+1,g=e/u,T=r/c,R=[],W=[],k=[],J=[];for(let q=0;q<v;q++){const Se=q*T-l;for(let V=0;V<h;V++){const Y=V*g-o;W.push(Y,-Se,0),k.push(0,0,1),J.push(V/u),J.push(1-q/c)}}for(let q=0;q<c;q++)for(let Se=0;Se<u;Se++){const V=Se+h*q,Y=Se+h*(q+1),ie=Se+1+h*(q+1),se=Se+1+h*q;R.push(V,Y,se),R.push(Y,ie,se)}this.setIndex(R),this.setAttribute("position",new me(W,3)),this.setAttribute("normal",new me(k,3)),this.setAttribute("uv",new me(J,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new xr(e.width,e.height,e.widthSegments,e.heightSegments)}}class _r extends Ae{constructor(e=1,r=32,n=16,a=0,o=Math.PI*2,l=0,u=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:r,heightSegments:n,phiStart:a,phiLength:o,thetaStart:l,thetaLength:u},r=Math.max(3,Math.floor(r)),n=Math.max(2,Math.floor(n));const c=Math.min(l+u,Math.PI);let h=0;const v=[],g=new U,T=new U,R=[],W=[],k=[],J=[];for(let q=0;q<=n;q++){const Se=[],V=q/n;let Y=0;q===0&&l===0?Y=.5/r:q===n&&c===Math.PI&&(Y=-.5/r);for(let ie=0;ie<=r;ie++){const se=ie/r;g.x=-e*Math.cos(a+se*o)*Math.sin(l+V*u),g.y=e*Math.cos(l+V*u),g.z=e*Math.sin(a+se*o)*Math.sin(l+V*u),W.push(g.x,g.y,g.z),T.copy(g).normalize(),k.push(T.x,T.y,T.z),J.push(se+Y,1-V),Se.push(h++)}v.push(Se)}for(let q=0;q<n;q++)for(let Se=0;Se<r;Se++){const V=v[q][Se+1],Y=v[q][Se],ie=v[q+1][Se],se=v[q+1][Se+1];(q!==0||l>0)&&R.push(V,Y,se),(q!==n-1||c<Math.PI)&&R.push(Y,ie,se)}this.setIndex(R),this.setAttribute("position",new me(W,3)),this.setAttribute("normal",new me(k,3)),this.setAttribute("uv",new me(J,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new _r(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Mc extends Ai{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Cl,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class Sc extends Ai{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class Ec extends No{constructor(e=-1,r=1,n=1,a=-1,o=.1,l=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=r,this.top=n,this.bottom=a,this.near=o,this.far=l,this.updateProjectionMatrix()}copy(e,r){return super.copy(e,r),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,r,n,a,o,l){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=r,this.view.offsetX=n,this.view.offsetY=a,this.view.width=o,this.view.height=l,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),r=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,a=(this.top+this.bottom)/2;let o=n-e,l=n+e,u=a+r,c=a-r;if(this.view!==null&&this.view.enabled){const h=(this.right-this.left)/this.view.fullWidth/this.zoom,v=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=h*this.view.offsetX,l=o+h*this.view.width,u-=v*this.view.offsetY,c=u-v*this.view.height}this.projectionMatrix.makeOrthographic(o,l,u,c,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const r=super.toJSON(e);return r.object.zoom=this.zoom,r.object.left=this.left,r.object.right=this.right,r.object.top=this.top,r.object.bottom=this.bottom,r.object.near=this.near,r.object.far=this.far,this.view!==null&&(r.object.view=Object.assign({},this.view)),r}}class yc extends Fe{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}class za{constructor(e=1,r=0,n=0){this.radius=e,this.phi=r,this.theta=n}set(e,r,n){return this.radius=e,this.phi=r,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Vt(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,r,n){return this.radius=Math.sqrt(e*e+r*r+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(Vt(r/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}const Ha=new U;let tr,Zr;class Va extends Me{constructor(e=new U(0,0,1),r=new U(0,0,0),n=1,a=16776960,o=n*.2,l=o*.2){super(),this.type="ArrowHelper",tr===void 0&&(tr=new Ae,tr.setAttribute("position",new me([0,0,0,0,1,0],3)),Zr=new na(.5,1,5,1),Zr.translate(0,-.5,0)),this.position.copy(r),this.line=new ta(tr,new fr({color:a,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new De(Zr,new ni({color:a,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,o,l)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{Ha.set(e.z,0,-e.x).normalize();const r=Math.acos(e.y);this.quaternion.setFromAxisAngle(Ha,r)}}setLength(e,r=e*.2,n=r*.2){this.line.scale.set(1,Math.max(1e-4,e-r),1),this.line.updateMatrix(),this.cone.scale.set(n,r,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class Tc extends Nn{constructor(e,r=null){super(),this.object=e,this.domElement=r,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){console.warn("THREE.Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}}function Ga(t,e,r,n){const a=bc(n);switch(r){case yo:return t*e;case bo:return t*e/a.components*a.byteLength;case Zs:return t*e/a.components*a.byteLength;case Ao:return t*e*2/a.components*a.byteLength;case js:return t*e*2/a.components*a.byteLength;case To:return t*e*3/a.components*a.byteLength;case Ve:return t*e*4/a.components*a.byteLength;case $s:return t*e*4/a.components*a.byteLength;case sr:case ar:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*8;case or:case lr:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case gs:case xs:return Math.max(t,16)*Math.max(e,8)/4;case _s:case vs:return Math.max(t,8)*Math.max(e,8)/2;case Ms:case Ss:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*8;case Es:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case ys:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case Ts:return Math.floor((t+4)/5)*Math.floor((e+3)/4)*16;case bs:return Math.floor((t+4)/5)*Math.floor((e+4)/5)*16;case As:return Math.floor((t+5)/6)*Math.floor((e+4)/5)*16;case Rs:return Math.floor((t+5)/6)*Math.floor((e+5)/6)*16;case ws:return Math.floor((t+7)/8)*Math.floor((e+4)/5)*16;case Cs:return Math.floor((t+7)/8)*Math.floor((e+5)/6)*16;case Ps:return Math.floor((t+7)/8)*Math.floor((e+7)/8)*16;case Ds:return Math.floor((t+9)/10)*Math.floor((e+4)/5)*16;case Ls:return Math.floor((t+9)/10)*Math.floor((e+5)/6)*16;case Us:return Math.floor((t+9)/10)*Math.floor((e+7)/8)*16;case Is:return Math.floor((t+9)/10)*Math.floor((e+9)/10)*16;case Ns:return Math.floor((t+11)/12)*Math.floor((e+9)/10)*16;case Fs:return Math.floor((t+11)/12)*Math.floor((e+11)/12)*16;case Os:case Bs:case zs:return Math.ceil(t/4)*Math.ceil(e/4)*16;case Hs:case Vs:return Math.ceil(t/4)*Math.ceil(e/4)*8;case Gs:case ks:return Math.ceil(t/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${r} format.`)}function bc(t){switch(t){case sn:case xo:return{byteLength:1,components:1};case vi:case Mo:case yi:return{byteLength:2,components:1};case qs:case Ks:return{byteLength:2,components:4};case Ln:case Ys:case nn:return{byteLength:4,components:1};case So:case Eo:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${t}.`)}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"180"}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="180");/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function Ho(){let t=null,e=!1,r=null,n=null;function a(o,l){r(o,l),n=t.requestAnimationFrame(a)}return{start:function(){e!==!0&&r!==null&&(n=t.requestAnimationFrame(a),e=!0)},stop:function(){t.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(o){r=o},setContext:function(o){t=o}}}function Ac(t){const e=new WeakMap;function r(u,c){const h=u.array,v=u.usage,g=h.byteLength,T=t.createBuffer();t.bindBuffer(c,T),t.bufferData(c,h,v),u.onUploadCallback();let R;if(h instanceof Float32Array)R=t.FLOAT;else if(typeof Float16Array<"u"&&h instanceof Float16Array)R=t.HALF_FLOAT;else if(h instanceof Uint16Array)u.isFloat16BufferAttribute?R=t.HALF_FLOAT:R=t.UNSIGNED_SHORT;else if(h instanceof Int16Array)R=t.SHORT;else if(h instanceof Uint32Array)R=t.UNSIGNED_INT;else if(h instanceof Int32Array)R=t.INT;else if(h instanceof Int8Array)R=t.BYTE;else if(h instanceof Uint8Array)R=t.UNSIGNED_BYTE;else if(h instanceof Uint8ClampedArray)R=t.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+h);return{buffer:T,type:R,bytesPerElement:h.BYTES_PER_ELEMENT,version:u.version,size:g}}function n(u,c,h){const v=c.array,g=c.updateRanges;if(t.bindBuffer(h,u),g.length===0)t.bufferSubData(h,0,v);else{g.sort((R,W)=>R.start-W.start);let T=0;for(let R=1;R<g.length;R++){const W=g[T],k=g[R];k.start<=W.start+W.count+1?W.count=Math.max(W.count,k.start+k.count-W.start):(++T,g[T]=k)}g.length=T+1;for(let R=0,W=g.length;R<W;R++){const k=g[R];t.bufferSubData(h,k.start*v.BYTES_PER_ELEMENT,v,k.start,k.count)}c.clearUpdateRanges()}c.onUploadCallback()}function a(u){return u.isInterleavedBufferAttribute&&(u=u.data),e.get(u)}function o(u){u.isInterleavedBufferAttribute&&(u=u.data);const c=e.get(u);c&&(t.deleteBuffer(c.buffer),e.delete(u))}function l(u,c){if(u.isInterleavedBufferAttribute&&(u=u.data),u.isGLBufferAttribute){const v=e.get(u);(!v||v.version<u.version)&&e.set(u,{buffer:u.buffer,type:u.type,bytesPerElement:u.elementSize,version:u.version});return}const h=e.get(u);if(h===void 0)e.set(u,r(u,c));else if(h.version<u.version){if(h.size!==u.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");n(h.buffer,u,c),h.version=u.version}}return{get:a,remove:o,update:l}}var Rc=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,wc=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,Cc=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,Pc=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Dc=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,Lc=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Uc=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Ic=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Nc=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,Fc=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,Oc=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,Bc=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,zc=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,Hc=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Vc=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Gc=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,kc=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Wc=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Xc=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,Yc=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,qc=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,Kc=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,Zc=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,jc=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,$c=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,Jc=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Qc=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,th=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,eh=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,nh=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,ih="gl_FragColor = linearToOutputTexel( gl_FragColor );",rh=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,sh=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,ah=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,oh=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,lh=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,ch=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,hh=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,uh=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,dh=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,fh=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,ph=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,mh=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,_h=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,gh=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,vh=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,xh=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,Mh=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,Sh=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,Eh=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,yh=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,Th=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,bh=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Ah=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Rh=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,wh=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,Ch=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,Ph=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Dh=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Lh=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,Uh=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,Ih=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Nh=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Fh=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Oh=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Bh=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,zh=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,Hh=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Vh=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Gh=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,kh=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Wh=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,Xh=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Yh=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,qh=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Kh=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,Zh=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,jh=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,$h=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,Jh=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,Qh=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,tu=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,eu=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,nu=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,iu=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,ru=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,su=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,au=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,ou=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,lu=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		float depth = unpackRGBAToDepth( texture2D( depths, uv ) );
		#ifdef USE_REVERSED_DEPTH_BUFFER
			return step( depth, compare );
		#else
			return step( compare, depth );
		#endif
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow( sampler2D shadow, vec2 uv, float compare ) {
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		#ifdef USE_REVERSED_DEPTH_BUFFER
			float hard_shadow = step( distribution.x, compare );
		#else
			float hard_shadow = step( compare, distribution.x );
		#endif
		if ( hard_shadow != 1.0 ) {
			float distance = compare - distribution.x;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,cu=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,hu=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,uu=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,du=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,fu=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,pu=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,mu=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,_u=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,gu=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,vu=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,xu=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,Mu=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,Su=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,Eu=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,yu=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Tu=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,bu=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const Au=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,Ru=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,wu=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Cu=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Pu=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Du=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Lu=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,Uu=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	#ifdef USE_REVERSED_DEPTH_BUFFER
		float fragCoordZ = vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ];
	#else
		float fragCoordZ = 0.5 * vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ] + 0.5;
	#endif
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,Iu=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Nu=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,Fu=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,Ou=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Bu=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,zu=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Hu=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Vu=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Gu=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,ku=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Wu=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,Xu=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Yu=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,qu=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,Ku=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Zu=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,ju=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,$u=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Ju=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Qu=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,td$1=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,ed=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,nd=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,id=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,rd=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,sd=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Ot={alphahash_fragment:Rc,alphahash_pars_fragment:wc,alphamap_fragment:Cc,alphamap_pars_fragment:Pc,alphatest_fragment:Dc,alphatest_pars_fragment:Lc,aomap_fragment:Uc,aomap_pars_fragment:Ic,batching_pars_vertex:Nc,batching_vertex:Fc,begin_vertex:Oc,beginnormal_vertex:Bc,bsdfs:zc,iridescence_fragment:Hc,bumpmap_pars_fragment:Vc,clipping_planes_fragment:Gc,clipping_planes_pars_fragment:kc,clipping_planes_pars_vertex:Wc,clipping_planes_vertex:Xc,color_fragment:Yc,color_pars_fragment:qc,color_pars_vertex:Kc,color_vertex:Zc,common:jc,cube_uv_reflection_fragment:$c,defaultnormal_vertex:Jc,displacementmap_pars_vertex:Qc,displacementmap_vertex:th,emissivemap_fragment:eh,emissivemap_pars_fragment:nh,colorspace_fragment:ih,colorspace_pars_fragment:rh,envmap_fragment:sh,envmap_common_pars_fragment:ah,envmap_pars_fragment:oh,envmap_pars_vertex:lh,envmap_physical_pars_fragment:xh,envmap_vertex:ch,fog_vertex:hh,fog_pars_vertex:uh,fog_fragment:dh,fog_pars_fragment:fh,gradientmap_pars_fragment:ph,lightmap_pars_fragment:mh,lights_lambert_fragment:_h,lights_lambert_pars_fragment:gh,lights_pars_begin:vh,lights_toon_fragment:Mh,lights_toon_pars_fragment:Sh,lights_phong_fragment:Eh,lights_phong_pars_fragment:yh,lights_physical_fragment:Th,lights_physical_pars_fragment:bh,lights_fragment_begin:Ah,lights_fragment_maps:Rh,lights_fragment_end:wh,logdepthbuf_fragment:Ch,logdepthbuf_pars_fragment:Ph,logdepthbuf_pars_vertex:Dh,logdepthbuf_vertex:Lh,map_fragment:Uh,map_pars_fragment:Ih,map_particle_fragment:Nh,map_particle_pars_fragment:Fh,metalnessmap_fragment:Oh,metalnessmap_pars_fragment:Bh,morphinstance_vertex:zh,morphcolor_vertex:Hh,morphnormal_vertex:Vh,morphtarget_pars_vertex:Gh,morphtarget_vertex:kh,normal_fragment_begin:Wh,normal_fragment_maps:Xh,normal_pars_fragment:Yh,normal_pars_vertex:qh,normal_vertex:Kh,normalmap_pars_fragment:Zh,clearcoat_normal_fragment_begin:jh,clearcoat_normal_fragment_maps:$h,clearcoat_pars_fragment:Jh,iridescence_pars_fragment:Qh,opaque_fragment:tu,packing:eu,premultiplied_alpha_fragment:nu,project_vertex:iu,dithering_fragment:ru,dithering_pars_fragment:su,roughnessmap_fragment:au,roughnessmap_pars_fragment:ou,shadowmap_pars_fragment:lu,shadowmap_pars_vertex:cu,shadowmap_vertex:hu,shadowmask_pars_fragment:uu,skinbase_vertex:du,skinning_pars_vertex:fu,skinning_vertex:pu,skinnormal_vertex:mu,specularmap_fragment:_u,specularmap_pars_fragment:gu,tonemapping_fragment:vu,tonemapping_pars_fragment:xu,transmission_fragment:Mu,transmission_pars_fragment:Su,uv_pars_fragment:Eu,uv_pars_vertex:yu,uv_vertex:Tu,worldpos_vertex:bu,background_vert:Au,background_frag:Ru,backgroundCube_vert:wu,backgroundCube_frag:Cu,cube_vert:Pu,cube_frag:Du,depth_vert:Lu,depth_frag:Uu,distanceRGBA_vert:Iu,distanceRGBA_frag:Nu,equirect_vert:Fu,equirect_frag:Ou,linedashed_vert:Bu,linedashed_frag:zu,meshbasic_vert:Hu,meshbasic_frag:Vu,meshlambert_vert:Gu,meshlambert_frag:ku,meshmatcap_vert:Wu,meshmatcap_frag:Xu,meshnormal_vert:Yu,meshnormal_frag:qu,meshphong_vert:Ku,meshphong_frag:Zu,meshphysical_vert:ju,meshphysical_frag:$u,meshtoon_vert:Ju,meshtoon_frag:Qu,points_vert:td$1,points_frag:ed,shadow_vert:nd,shadow_frag:id,sprite_vert:rd,sprite_frag:sd},at={common:{diffuse:{value:new qt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Ft},alphaMap:{value:null},alphaMapTransform:{value:new Ft},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Ft}},envmap:{envMap:{value:null},envMapRotation:{value:new Ft},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Ft}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Ft}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Ft},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Ft},normalScale:{value:new Bt(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Ft},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Ft}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Ft}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Ft}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new qt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new qt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Ft},alphaTest:{value:0},uvTransform:{value:new Ft}},sprite:{diffuse:{value:new qt(16777215)},opacity:{value:1},center:{value:new Bt(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Ft},alphaMap:{value:null},alphaMapTransform:{value:new Ft},alphaTest:{value:0}}},We={basic:{uniforms:xe([at.common,at.specularmap,at.envmap,at.aomap,at.lightmap,at.fog]),vertexShader:Ot.meshbasic_vert,fragmentShader:Ot.meshbasic_frag},lambert:{uniforms:xe([at.common,at.specularmap,at.envmap,at.aomap,at.lightmap,at.emissivemap,at.bumpmap,at.normalmap,at.displacementmap,at.fog,at.lights,{emissive:{value:new qt(0)}}]),vertexShader:Ot.meshlambert_vert,fragmentShader:Ot.meshlambert_frag},phong:{uniforms:xe([at.common,at.specularmap,at.envmap,at.aomap,at.lightmap,at.emissivemap,at.bumpmap,at.normalmap,at.displacementmap,at.fog,at.lights,{emissive:{value:new qt(0)},specular:{value:new qt(1118481)},shininess:{value:30}}]),vertexShader:Ot.meshphong_vert,fragmentShader:Ot.meshphong_frag},standard:{uniforms:xe([at.common,at.envmap,at.aomap,at.lightmap,at.emissivemap,at.bumpmap,at.normalmap,at.displacementmap,at.roughnessmap,at.metalnessmap,at.fog,at.lights,{emissive:{value:new qt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Ot.meshphysical_vert,fragmentShader:Ot.meshphysical_frag},toon:{uniforms:xe([at.common,at.aomap,at.lightmap,at.emissivemap,at.bumpmap,at.normalmap,at.displacementmap,at.gradientmap,at.fog,at.lights,{emissive:{value:new qt(0)}}]),vertexShader:Ot.meshtoon_vert,fragmentShader:Ot.meshtoon_frag},matcap:{uniforms:xe([at.common,at.bumpmap,at.normalmap,at.displacementmap,at.fog,{matcap:{value:null}}]),vertexShader:Ot.meshmatcap_vert,fragmentShader:Ot.meshmatcap_frag},points:{uniforms:xe([at.points,at.fog]),vertexShader:Ot.points_vert,fragmentShader:Ot.points_frag},dashed:{uniforms:xe([at.common,at.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Ot.linedashed_vert,fragmentShader:Ot.linedashed_frag},depth:{uniforms:xe([at.common,at.displacementmap]),vertexShader:Ot.depth_vert,fragmentShader:Ot.depth_frag},normal:{uniforms:xe([at.common,at.bumpmap,at.normalmap,at.displacementmap,{opacity:{value:1}}]),vertexShader:Ot.meshnormal_vert,fragmentShader:Ot.meshnormal_frag},sprite:{uniforms:xe([at.sprite,at.fog]),vertexShader:Ot.sprite_vert,fragmentShader:Ot.sprite_frag},background:{uniforms:{uvTransform:{value:new Ft},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Ot.background_vert,fragmentShader:Ot.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Ft}},vertexShader:Ot.backgroundCube_vert,fragmentShader:Ot.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Ot.cube_vert,fragmentShader:Ot.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Ot.equirect_vert,fragmentShader:Ot.equirect_frag},distanceRGBA:{uniforms:xe([at.common,at.displacementmap,{referencePosition:{value:new U},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Ot.distanceRGBA_vert,fragmentShader:Ot.distanceRGBA_frag},shadow:{uniforms:xe([at.lights,at.fog,{color:{value:new qt(0)},opacity:{value:1}}]),vertexShader:Ot.shadow_vert,fragmentShader:Ot.shadow_frag}};We.physical={uniforms:xe([We.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Ft},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Ft},clearcoatNormalScale:{value:new Bt(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Ft},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Ft},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Ft},sheen:{value:0},sheenColor:{value:new qt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Ft},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Ft},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Ft},transmissionSamplerSize:{value:new Bt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Ft},attenuationDistance:{value:0},attenuationColor:{value:new qt(0)},specularColor:{value:new qt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Ft},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Ft},anisotropyVector:{value:new Bt},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Ft}}]),vertexShader:Ot.meshphysical_vert,fragmentShader:Ot.meshphysical_frag};const er={r:0,b:0,g:0},bn=new an,ad=new he;function od(t,e,r,n,a,o,l){const u=new qt(0);let c=o===!0?0:1,h,v,g=null,T=0,R=null;function W(V){let Y=V.isScene===!0?V.background:null;return Y&&Y.isTexture&&(Y=(V.backgroundBlurriness>0?r:e).get(Y)),Y}function k(V){let Y=!1;const ie=W(V);ie===null?q(u,c):ie&&ie.isColor&&(q(ie,1),Y=!0);const se=t.xr.getEnvironmentBlendMode();se==="additive"?n.buffers.color.setClear(0,0,0,1,l):se==="alpha-blend"&&n.buffers.color.setClear(0,0,0,0,l),(t.autoClear||Y)&&(n.buffers.depth.setTest(!0),n.buffers.depth.setMask(!0),n.buffers.color.setMask(!0),t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil))}function J(V,Y){const ie=W(Y);ie&&(ie.isCubeTexture||ie.mapping===gr)?(v===void 0&&(v=new De(new Ri(1,1,1),new vn({name:"BackgroundCubeMaterial",uniforms:oi(We.backgroundCube.uniforms),vertexShader:We.backgroundCube.vertexShader,fragmentShader:We.backgroundCube.fragmentShader,side:Te,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),v.geometry.deleteAttribute("normal"),v.geometry.deleteAttribute("uv"),v.onBeforeRender=function(se,ct,ae){this.matrixWorld.copyPosition(ae.matrixWorld)},Object.defineProperty(v.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),a.update(v)),bn.copy(Y.backgroundRotation),bn.x*=-1,bn.y*=-1,bn.z*=-1,ie.isCubeTexture&&ie.isRenderTargetTexture===!1&&(bn.y*=-1,bn.z*=-1),v.material.uniforms.envMap.value=ie,v.material.uniforms.flipEnvMap.value=ie.isCubeTexture&&ie.isRenderTargetTexture===!1?-1:1,v.material.uniforms.backgroundBlurriness.value=Y.backgroundBlurriness,v.material.uniforms.backgroundIntensity.value=Y.backgroundIntensity,v.material.uniforms.backgroundRotation.value.setFromMatrix4(ad.makeRotationFromEuler(bn)),v.material.toneMapped=Xt.getTransfer(ie.colorSpace)!==Jt,(g!==ie||T!==ie.version||R!==t.toneMapping)&&(v.material.needsUpdate=!0,g=ie,T=ie.version,R=t.toneMapping),v.layers.enableAll(),V.unshift(v,v.geometry,v.material,0,0,null)):ie&&ie.isTexture&&(h===void 0&&(h=new De(new xr(2,2),new vn({name:"BackgroundMaterial",uniforms:oi(We.background.uniforms),vertexShader:We.background.vertexShader,fragmentShader:We.background.fragmentShader,side:gn,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),h.geometry.deleteAttribute("normal"),Object.defineProperty(h.material,"map",{get:function(){return this.uniforms.t2D.value}}),a.update(h)),h.material.uniforms.t2D.value=ie,h.material.uniforms.backgroundIntensity.value=Y.backgroundIntensity,h.material.toneMapped=Xt.getTransfer(ie.colorSpace)!==Jt,ie.matrixAutoUpdate===!0&&ie.updateMatrix(),h.material.uniforms.uvTransform.value.copy(ie.matrix),(g!==ie||T!==ie.version||R!==t.toneMapping)&&(h.material.needsUpdate=!0,g=ie,T=ie.version,R=t.toneMapping),h.layers.enableAll(),V.unshift(h,h.geometry,h.material,0,0,null))}function q(V,Y){V.getRGB(er,Io(t)),n.buffers.color.setClear(er.r,er.g,er.b,Y,l)}function Se(){v!==void 0&&(v.geometry.dispose(),v.material.dispose(),v=void 0),h!==void 0&&(h.geometry.dispose(),h.material.dispose(),h=void 0)}return{getClearColor:function(){return u},setClearColor:function(V,Y=1){u.set(V),c=Y,q(u,c)},getClearAlpha:function(){return c},setClearAlpha:function(V){c=V,q(u,c)},render:k,addToRenderList:J,dispose:Se}}function ld(t,e){const r=t.getParameter(t.MAX_VERTEX_ATTRIBS),n={},a=T(null);let o=a,l=!1;function u(Ct,$t,jo,Lp,Mn){let sa=!1;const re=g(Lp,jo,$t);o!==re&&(o=re,h(o.object)),sa=R(Ct,Lp,jo,Mn),sa&&W(Ct,Lp,jo,Mn),Mn!==null&&e.update(Mn,t.ELEMENT_ARRAY_BUFFER),(sa||l)&&(l=!1,Y(Ct,$t,jo,Lp),Mn!==null&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e.get(Mn).buffer))}function c(){return t.createVertexArray()}function h(Ct){return t.bindVertexArray(Ct)}function v(Ct){return t.deleteVertexArray(Ct)}function g(Ct,$t,jo){const Lp=jo.wireframe===!0;let Mn=n[Ct.id];Mn===void 0&&(Mn={},n[Ct.id]=Mn);let sa=Mn[$t.id];sa===void 0&&(sa={},Mn[$t.id]=sa);let re=sa[Lp];return re===void 0&&(re=T(c()),sa[Lp]=re),re}function T(Ct){const $t=[],jo=[],Lp=[];for(let Mn=0;Mn<r;Mn++)$t[Mn]=0,jo[Mn]=0,Lp[Mn]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:$t,enabledAttributes:jo,attributeDivisors:Lp,object:Ct,attributes:{},index:null}}function R(Ct,$t,jo,Lp){const Mn=o.attributes,sa=$t.attributes;let re=0;const $o=jo.getAttributes();for(const qo in $o)if($o[qo].location>=0){const Kt=Mn[qo];let i0=sa[qo];if(i0===void 0&&(qo==="instanceMatrix"&&Ct.instanceMatrix&&(i0=Ct.instanceMatrix),qo==="instanceColor"&&Ct.instanceColor&&(i0=Ct.instanceColor)),Kt===void 0||Kt.attribute!==i0||i0&&Kt.data!==i0.data)return!0;re++}return o.attributesNum!==re||o.index!==Lp}function W(Ct,$t,jo,Lp){const Mn={},sa=$t.attributes;let re=0;const $o=jo.getAttributes();for(const qo in $o)if($o[qo].location>=0){let Kt=sa[qo];Kt===void 0&&(qo==="instanceMatrix"&&Ct.instanceMatrix&&(Kt=Ct.instanceMatrix),qo==="instanceColor"&&Ct.instanceColor&&(Kt=Ct.instanceColor));const i0={};i0.attribute=Kt,Kt&&Kt.data&&(i0.data=Kt.data),Mn[qo]=i0,re++}o.attributes=Mn,o.attributesNum=re,o.index=Lp}function k(){const Ct=o.newAttributes;for(let $t=0,jo=Ct.length;$t<jo;$t++)Ct[$t]=0}function J(Ct){q(Ct,0)}function q(Ct,$t){const jo=o.newAttributes,Lp=o.enabledAttributes,Mn=o.attributeDivisors;jo[Ct]=1,Lp[Ct]===0&&(t.enableVertexAttribArray(Ct),Lp[Ct]=1),Mn[Ct]!==$t&&(t.vertexAttribDivisor(Ct,$t),Mn[Ct]=$t)}function Se(){const Ct=o.newAttributes,$t=o.enabledAttributes;for(let jo=0,Lp=$t.length;jo<Lp;jo++)$t[jo]!==Ct[jo]&&(t.disableVertexAttribArray(jo),$t[jo]=0)}function V(Ct,$t,jo,Lp,Mn,sa,re){re===!0?t.vertexAttribIPointer(Ct,$t,jo,Mn,sa):t.vertexAttribPointer(Ct,$t,jo,Lp,Mn,sa)}function Y(Ct,$t,jo,Lp){k();const Mn=Lp.attributes,sa=jo.getAttributes(),re=$t.defaultAttributeValues;for(const $o in sa){const qo=sa[$o];if(qo.location>=0){let Kt=Mn[$o];if(Kt===void 0&&($o==="instanceMatrix"&&Ct.instanceMatrix&&(Kt=Ct.instanceMatrix),$o==="instanceColor"&&Ct.instanceColor&&(Kt=Ct.instanceColor)),Kt!==void 0){const i0=Kt.normalized,Up=Kt.itemSize,l0=e.get(Kt);if(l0===void 0)continue;const y0=l0.buffer,kp=l0.type,u0=l0.bytesPerElement,f0=kp===t.INT||kp===t.UNSIGNED_INT||Kt.gpuType===Ys;if(Kt.isInterleavedBufferAttribute){const v0=Kt.data,p0=v0.stride,rm=Kt.offset;if(v0.isInstancedInterleavedBuffer){for(let am=0;am<qo.locationSize;am++)q(qo.location+am,v0.meshPerAttribute);Ct.isInstancedMesh!==!0&&Lp._maxInstanceCount===void 0&&(Lp._maxInstanceCount=v0.meshPerAttribute*v0.count)}else for(let am=0;am<qo.locationSize;am++)J(qo.location+am);t.bindBuffer(t.ARRAY_BUFFER,y0);for(let am=0;am<qo.locationSize;am++)V(qo.location+am,Up/qo.locationSize,kp,i0,p0*u0,(rm+Up/qo.locationSize*am)*u0,f0)}else{if(Kt.isInstancedBufferAttribute){for(let v0=0;v0<qo.locationSize;v0++)q(qo.location+v0,Kt.meshPerAttribute);Ct.isInstancedMesh!==!0&&Lp._maxInstanceCount===void 0&&(Lp._maxInstanceCount=Kt.meshPerAttribute*Kt.count)}else for(let v0=0;v0<qo.locationSize;v0++)J(qo.location+v0);t.bindBuffer(t.ARRAY_BUFFER,y0);for(let v0=0;v0<qo.locationSize;v0++)V(qo.location+v0,Up/qo.locationSize,kp,i0,Up*u0,Up/qo.locationSize*v0*u0,f0)}}else if(re!==void 0){const i0=re[$o];if(i0!==void 0)switch(i0.length){case 2:t.vertexAttrib2fv(qo.location,i0);break;case 3:t.vertexAttrib3fv(qo.location,i0);break;case 4:t.vertexAttrib4fv(qo.location,i0);break;default:t.vertexAttrib1fv(qo.location,i0)}}}}Se()}function ie(){ae();for(const Ct in n){const $t=n[Ct];for(const jo in $t){const Lp=$t[jo];for(const Mn in Lp)v(Lp[Mn].object),delete Lp[Mn];delete $t[jo]}delete n[Ct]}}function se(Ct){if(n[Ct.id]===void 0)return;const $t=n[Ct.id];for(const jo in $t){const Lp=$t[jo];for(const Mn in Lp)v(Lp[Mn].object),delete Lp[Mn];delete $t[jo]}delete n[Ct.id]}function ct(Ct){for(const $t in n){const jo=n[$t];if(jo[Ct.id]===void 0)continue;const Lp=jo[Ct.id];for(const Mn in Lp)v(Lp[Mn].object),delete Lp[Mn];delete jo[Ct.id]}}function ae(){st(),l=!0,o!==a&&(o=a,h(o.object))}function st(){a.geometry=null,a.program=null,a.wireframe=!1}return{setup:u,reset:ae,resetDefaultState:st,dispose:ie,releaseStatesOfGeometry:se,releaseStatesOfProgram:ct,initAttributes:k,enableAttribute:J,disableUnusedAttributes:Se}}function cd(t,e,r){let n;function a(h){n=h}function o(h,v){t.drawArrays(n,h,v),r.update(v,n,1)}function l(h,v,g){g!==0&&(t.drawArraysInstanced(n,h,v,g),r.update(v,n,g))}function u(h,v,g){if(g===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(n,h,0,v,0,g);let T=0;for(let R=0;R<g;R++)T+=v[R];r.update(T,n,1)}function c(h,v,g,T){if(g===0)return;const R=e.get("WEBGL_multi_draw");if(R===null)for(let W=0;W<h.length;W++)l(h[W],v[W],T[W]);else{R.multiDrawArraysInstancedWEBGL(n,h,0,v,0,T,0,g);let W=0;for(let k=0;k<g;k++)W+=v[k]*T[k];r.update(W,n,1)}}this.setMode=a,this.render=o,this.renderInstances=l,this.renderMultiDraw=u,this.renderMultiDrawInstances=c}function hd(t,e,r,n){let a;function o(){if(a!==void 0)return a;if(e.has("EXT_texture_filter_anisotropic")===!0){const ct=e.get("EXT_texture_filter_anisotropic");a=t.getParameter(ct.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else a=0;return a}function l(ct){return!(ct!==Ve&&n.convert(ct)!==t.getParameter(t.IMPLEMENTATION_COLOR_READ_FORMAT))}function u(ct){const ae=ct===yi&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(ct!==sn&&n.convert(ct)!==t.getParameter(t.IMPLEMENTATION_COLOR_READ_TYPE)&&ct!==nn&&!ae)}function c(ct){if(ct==="highp"){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";ct="mediump"}return ct==="mediump"&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let h=r.precision!==void 0?r.precision:"highp";const v=c(h);v!==h&&(console.warn("THREE.WebGLRenderer:",h,"not supported, using",v,"instead."),h=v);const g=r.logarithmicDepthBuffer===!0,T=r.reversedDepthBuffer===!0&&e.has("EXT_clip_control"),R=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),W=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),k=t.getParameter(t.MAX_TEXTURE_SIZE),J=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),q=t.getParameter(t.MAX_VERTEX_ATTRIBS),Se=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),V=t.getParameter(t.MAX_VARYING_VECTORS),Y=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),ie=W>0,se=t.getParameter(t.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:o,getMaxPrecision:c,textureFormatReadable:l,textureTypeReadable:u,precision:h,logarithmicDepthBuffer:g,reversedDepthBuffer:T,maxTextures:R,maxVertexTextures:W,maxTextureSize:k,maxCubemapSize:J,maxAttributes:q,maxVertexUniforms:Se,maxVaryings:V,maxFragmentUniforms:Y,vertexTextures:ie,maxSamples:se}}function ud(t){const e=this;let r=null,n=0,a=!1,o=!1;const l=new fn,u=new Ft,c={value:null,needsUpdate:!1};this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(g,T){const R=g.length!==0||T||n!==0||a;return a=T,n=g.length,R},this.beginShadows=function(){o=!0,v(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(g,T){r=v(g,T,0)},this.setState=function(g,T,R){const W=g.clippingPlanes,k=g.clipIntersection,J=g.clipShadows,q=t.get(g);if(!a||W===null||W.length===0||o&&!J)o?v(null):h();else{const Se=o?0:n,V=Se*4;let Y=q.clippingState||null;c.value=Y,Y=v(W,T,V,R);for(let ie=0;ie!==V;++ie)Y[ie]=r[ie];q.clippingState=Y,this.numIntersection=k?this.numPlanes:0,this.numPlanes+=Se}};function h(){c.value!==r&&(c.value=r,c.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function v(g,T,R,W){const k=g!==null?g.length:0;let J=null;if(k!==0){if(J=c.value,W!==!0||J===null){const q=R+k*4,Se=T.matrixWorldInverse;u.getNormalMatrix(Se),(J===null||J.length<q)&&(J=new Float32Array(q));for(let V=0,Y=R;V!==k;++V,Y+=4)l.copy(g[V]).applyMatrix4(Se,u),l.normal.toArray(J,Y),J[Y+3]=l.constant}c.value=J,c.needsUpdate=!0}return e.numPlanes=k,e.numIntersection=0,J}}function dd(t){let e=new WeakMap;function r(l,u){return u===ds?l.mapping=ri:u===fs&&(l.mapping=si),l}function n(l){if(l&&l.isTexture){const u=l.mapping;if(u===ds||u===fs)if(e.has(l)){const c=e.get(l).texture;return r(c,l.mapping)}else{const c=l.image;if(c&&c.height>0){const h=new dc(c.height);return h.fromEquirectangularTexture(t,l),e.set(l,h),l.addEventListener("dispose",a),r(h.texture,l.mapping)}else return null}}return l}function a(l){const u=l.target;u.removeEventListener("dispose",a);const c=e.get(u);c!==void 0&&(e.delete(u),c.dispose())}function o(){e=new WeakMap}return{get:n,dispose:o}}const Jn=4,ka=[.125,.215,.35,.446,.526,.582],Cn=20,jr=new Ec,Wa=new qt;let $r=null,Jr=0,Qr=0,ts=!1;const Rn=(1+Math.sqrt(5))/2,jn=1/Rn,Xa=[new U(-Rn,jn,0),new U(Rn,jn,0),new U(-jn,0,Rn),new U(jn,0,Rn),new U(0,Rn,-jn),new U(0,Rn,jn),new U(-1,1,-1),new U(1,1,-1),new U(-1,1,1),new U(1,1,1)],fd=new U;class Ya{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,r=0,n=.1,a=100,o={}){const{size:l=256,position:u=fd}=o;$r=this._renderer.getRenderTarget(),Jr=this._renderer.getActiveCubeFace(),Qr=this._renderer.getActiveMipmapLevel(),ts=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(l);const c=this._allocateTargets();return c.depthBuffer=!0,this._sceneToCubeUV(e,n,a,c,u),r>0&&this._blur(c,0,0,r),this._applyPMREM(c),this._cleanup(c),c}fromEquirectangular(e,r=null){return this._fromTexture(e,r)}fromCubemap(e,r=null){return this._fromTexture(e,r)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=Za(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=Ka(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget($r,Jr,Qr),this._renderer.xr.enabled=ts,e.scissorTest=!1,nr(e,0,0,e.width,e.height)}_fromTexture(e,r){e.mapping===ri||e.mapping===si?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),$r=this._renderer.getRenderTarget(),Jr=this._renderer.getActiveCubeFace(),Qr=this._renderer.getActiveMipmapLevel(),ts=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=r||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),r=4*this._cubeSize,n={magFilter:Ye,minFilter:Ye,generateMipmaps:!1,type:yi,format:Ve,colorSpace:ai,depthBuffer:!1},a=qa(e,r,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==r){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=qa(e,r,n);const{_lodMax:o}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=pd(o)),this._blurMaterial=md(o,e,r)}return a}_compileMaterial(e){const r=new De(this._lodPlanes[0],e);this._renderer.compile(r,jr)}_sceneToCubeUV(e,r,n,a,o){const l=new Fe(90,1,r,n),u=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],h=this._renderer,v=h.autoClear,g=h.toneMapping;h.getClearColor(Wa),h.toneMapping=_n,h.autoClear=!1,h.state.buffers.depth.getReversed()&&(h.setRenderTarget(a),h.clearDepth(),h.setRenderTarget(null));const T=new ni({name:"PMREM.Background",side:Te,depthWrite:!1,depthTest:!1}),R=new De(new Ri,T);let W=!1;const k=e.background;k?k.isColor&&(T.color.copy(k),e.background=null,W=!0):(T.color.copy(Wa),W=!0);for(let J=0;J<6;J++){const q=J%3;q===0?(l.up.set(0,u[J],0),l.position.set(o.x,o.y,o.z),l.lookAt(o.x+c[J],o.y,o.z)):q===1?(l.up.set(0,0,u[J]),l.position.set(o.x,o.y,o.z),l.lookAt(o.x,o.y+c[J],o.z)):(l.up.set(0,u[J],0),l.position.set(o.x,o.y,o.z),l.lookAt(o.x,o.y,o.z+c[J]));const Se=this._cubeSize;nr(a,q*Se,J>2?Se:0,Se,Se),h.setRenderTarget(a),W&&h.render(R,l),h.render(e,l)}R.geometry.dispose(),R.material.dispose(),h.toneMapping=g,h.autoClear=v,e.background=k}_textureToCubeUV(e,r){const n=this._renderer,a=e.mapping===ri||e.mapping===si;a?(this._cubemapMaterial===null&&(this._cubemapMaterial=Za()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=Ka());const o=a?this._cubemapMaterial:this._equirectMaterial,l=new De(this._lodPlanes[0],o),u=o.uniforms;u.envMap.value=e;const c=this._cubeSize;nr(r,0,0,3*c,2*c),n.setRenderTarget(r),n.render(l,jr)}_applyPMREM(e){const r=this._renderer,n=r.autoClear;r.autoClear=!1;const a=this._lodPlanes.length;for(let o=1;o<a;o++){const l=Math.sqrt(this._sigmas[o]*this._sigmas[o]-this._sigmas[o-1]*this._sigmas[o-1]),u=Xa[(a-o-1)%Xa.length];this._blur(e,o-1,o,l,u)}r.autoClear=n}_blur(e,r,n,a,o){const l=this._pingPongRenderTarget;this._halfBlur(e,l,r,n,a,"latitudinal",o),this._halfBlur(l,e,n,n,a,"longitudinal",o)}_halfBlur(e,r,n,a,o,l,u){const c=this._renderer,h=this._blurMaterial;l!=="latitudinal"&&l!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const v=3,g=new De(this._lodPlanes[a],h),T=h.uniforms,R=this._sizeLods[n]-1,W=isFinite(o)?Math.PI/(2*R):2*Math.PI/(2*Cn-1),k=o/W,J=isFinite(o)?1+Math.floor(v*k):Cn;J>Cn&&console.warn(`sigmaRadians, ${o}, is too large and will clip, as it requested ${J} samples when the maximum is set to ${Cn}`);const q=[];let Se=0;for(let ct=0;ct<Cn;++ct){const ae=ct/k,st=Math.exp(-ae*ae/2);q.push(st),ct===0?Se+=st:ct<J&&(Se+=2*st)}for(let ct=0;ct<q.length;ct++)q[ct]=q[ct]/Se;T.envMap.value=e.texture,T.samples.value=J,T.weights.value=q,T.latitudinal.value=l==="latitudinal",u&&(T.poleAxis.value=u);const{_lodMax:V}=this;T.dTheta.value=W,T.mipInt.value=V-n;const Y=this._sizeLods[a],ie=3*Y*(a>V-Jn?a-V+Jn:0),se=4*(this._cubeSize-Y);nr(r,ie,se,3*Y,2*Y),c.setRenderTarget(r),c.render(g,jr)}}function pd(t){const e=[],r=[],n=[];let a=t;const o=t-Jn+1+ka.length;for(let l=0;l<o;l++){const u=Math.pow(2,a);r.push(u);let c=1/u;l>t-Jn?c=ka[l-t+Jn-1]:l===0&&(c=0),n.push(c);const h=1/(u-2),v=-h,g=1+h,T=[v,v,g,v,g,g,v,v,g,g,v,g],R=6,W=6,k=3,J=2,q=1,Se=new Float32Array(k*W*R),V=new Float32Array(J*W*R),Y=new Float32Array(q*W*R);for(let se=0;se<R;se++){const ct=se%3*2/3-1,ae=se>2?0:-1,st=[ct,ae,0,ct+2/3,ae,0,ct+2/3,ae+1,0,ct,ae,0,ct+2/3,ae+1,0,ct,ae+1,0];Se.set(st,k*W*se),V.set(T,J*W*se);const Ct=[se,se,se,se,se,se];Y.set(Ct,q*W*se)}const ie=new Ae;ie.setAttribute("position",new Ke(Se,k)),ie.setAttribute("uv",new Ke(V,J)),ie.setAttribute("faceIndex",new Ke(Y,q)),e.push(ie),a>Jn&&a--}return{lodPlanes:e,sizeLods:r,sigmas:n}}function qa(t,e,r){const n=new In(t,e,r);return n.texture.mapping=gr,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function nr(t,e,r,n,a){t.viewport.set(e,r,n,a),t.scissor.set(e,r,n,a)}function md(t,e,r){const n=new Float32Array(Cn),a=new U(0,1,0);return new vn({name:"SphericalGaussianBlur",defines:{n:Cn,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/r,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:a}},vertexShader:ia(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:mn,depthTest:!1,depthWrite:!1})}function Ka(){return new vn({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:ia(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:mn,depthTest:!1,depthWrite:!1})}function Za(){return new vn({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:ia(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:mn,depthTest:!1,depthWrite:!1})}function ia(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function _d(t){let e=new WeakMap,r=null;function n(u){if(u&&u.isTexture){const c=u.mapping,h=c===ds||c===fs,v=c===ri||c===si;if(h||v){let g=e.get(u);const T=g!==void 0?g.texture.pmremVersion:0;if(u.isRenderTargetTexture&&u.pmremVersion!==T)return r===null&&(r=new Ya(t)),g=h?r.fromEquirectangular(u,g):r.fromCubemap(u,g),g.texture.pmremVersion=u.pmremVersion,e.set(u,g),g.texture;if(g!==void 0)return g.texture;{const R=u.image;return h&&R&&R.height>0||v&&R&&a(R)?(r===null&&(r=new Ya(t)),g=h?r.fromEquirectangular(u):r.fromCubemap(u),g.texture.pmremVersion=u.pmremVersion,e.set(u,g),u.addEventListener("dispose",o),g.texture):null}}}return u}function a(u){let c=0;const h=6;for(let v=0;v<h;v++)u[v]!==void 0&&c++;return c===h}function o(u){const c=u.target;c.removeEventListener("dispose",o);const h=e.get(c);h!==void 0&&(e.delete(c),h.dispose())}function l(){e=new WeakMap,r!==null&&(r.dispose(),r=null)}return{get:n,dispose:l}}function gd(t){const e={};function r(n){if(e[n]!==void 0)return e[n];let a;switch(n){case"WEBGL_depth_texture":a=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":a=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":a=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":a=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:a=t.getExtension(n)}return e[n]=a,a}return{has:function(n){return r(n)!==null},init:function(){r("EXT_color_buffer_float"),r("WEBGL_clip_cull_distance"),r("OES_texture_float_linear"),r("EXT_color_buffer_half_float"),r("WEBGL_multisampled_render_to_texture"),r("WEBGL_render_shared_exponent")},get:function(n){const a=r(n);return a===null&&Ei("THREE.WebGLRenderer: "+n+" extension not supported."),a}}}function vd(t,e,r,n){const a={},o=new WeakMap;function l(g){const T=g.target;T.index!==null&&e.remove(T.index);for(const W in T.attributes)e.remove(T.attributes[W]);T.removeEventListener("dispose",l),delete a[T.id];const R=o.get(T);R&&(e.remove(R),o.delete(T)),n.releaseStatesOfGeometry(T),T.isInstancedBufferGeometry===!0&&delete T._maxInstanceCount,r.memory.geometries--}function u(g,T){return a[T.id]===!0||(T.addEventListener("dispose",l),a[T.id]=!0,r.memory.geometries++),T}function c(g){const T=g.attributes;for(const R in T)e.update(T[R],t.ARRAY_BUFFER)}function h(g){const T=[],R=g.index,W=g.attributes.position;let k=0;if(R!==null){const Se=R.array;k=R.version;for(let V=0,Y=Se.length;V<Y;V+=3){const ie=Se[V+0],se=Se[V+1],ct=Se[V+2];T.push(ie,se,se,ct,ct,ie)}}else if(W!==void 0){const Se=W.array;k=W.version;for(let V=0,Y=Se.length/3-1;V<Y;V+=3){const ie=V+0,se=V+1,ct=V+2;T.push(ie,se,se,ct,ct,ie)}}else return;const J=new(wo(T)?Uo:Lo)(T,1);J.version=k;const q=o.get(g);q&&e.remove(q),o.set(g,J)}function v(g){const T=o.get(g);if(T){const R=g.index;R!==null&&T.version<R.version&&h(g)}else h(g);return o.get(g)}return{get:u,update:c,getWireframeAttribute:v}}function xd(t,e,r){let n;function a(T){n=T}let o,l;function u(T){o=T.type,l=T.bytesPerElement}function c(T,R){t.drawElements(n,R,o,T*l),r.update(R,n,1)}function h(T,R,W){W!==0&&(t.drawElementsInstanced(n,R,o,T*l,W),r.update(R,n,W))}function v(T,R,W){if(W===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(n,R,0,o,T,0,W);let k=0;for(let J=0;J<W;J++)k+=R[J];r.update(k,n,1)}function g(T,R,W,k){if(W===0)return;const J=e.get("WEBGL_multi_draw");if(J===null)for(let q=0;q<T.length;q++)h(T[q]/l,R[q],k[q]);else{J.multiDrawElementsInstancedWEBGL(n,R,0,o,T,0,k,0,W);let q=0;for(let Se=0;Se<W;Se++)q+=R[Se]*k[Se];r.update(q,n,1)}}this.setMode=a,this.setIndex=u,this.render=c,this.renderInstances=h,this.renderMultiDraw=v,this.renderMultiDrawInstances=g}function Md(t){const e={geometries:0,textures:0},r={frame:0,calls:0,triangles:0,points:0,lines:0};function n(o,l,u){switch(r.calls++,l){case t.TRIANGLES:r.triangles+=u*(o/3);break;case t.LINES:r.lines+=u*(o/2);break;case t.LINE_STRIP:r.lines+=u*(o-1);break;case t.LINE_LOOP:r.lines+=u*o;break;case t.POINTS:r.points+=u*o;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",l);break}}function a(){r.calls=0,r.triangles=0,r.points=0,r.lines=0}return{memory:e,render:r,programs:null,autoReset:!0,reset:a,update:n}}function Sd(t,e,r){const n=new WeakMap,a=new oe;function o(l,u,c){const h=l.morphTargetInfluences,v=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,g=v!==void 0?v.length:0;let T=n.get(u);if(T===void 0||T.count!==g){let R=function(){ae.dispose(),n.delete(u),u.removeEventListener("dispose",R)};T!==void 0&&T.texture.dispose();const W=u.morphAttributes.position!==void 0,k=u.morphAttributes.normal!==void 0,J=u.morphAttributes.color!==void 0,q=u.morphAttributes.position||[],Se=u.morphAttributes.normal||[],V=u.morphAttributes.color||[];let Y=0;W===!0&&(Y=1),k===!0&&(Y=2),J===!0&&(Y=3);let ie=u.attributes.position.count*Y,se=1;ie>e.maxTextureSize&&(se=Math.ceil(ie/e.maxTextureSize),ie=e.maxTextureSize);const ct=new Float32Array(ie*se*4*g),ae=new Co(ct,ie,se,g);ae.type=nn,ae.needsUpdate=!0;const st=Y*4;for(let Ct=0;Ct<g;Ct++){const $t=q[Ct],jo=Se[Ct],Lp=V[Ct],Mn=ie*se*4*Ct;for(let sa=0;sa<$t.count;sa++){const re=sa*st;W===!0&&(a.fromBufferAttribute($t,sa),ct[Mn+re+0]=a.x,ct[Mn+re+1]=a.y,ct[Mn+re+2]=a.z,ct[Mn+re+3]=0),k===!0&&(a.fromBufferAttribute(jo,sa),ct[Mn+re+4]=a.x,ct[Mn+re+5]=a.y,ct[Mn+re+6]=a.z,ct[Mn+re+7]=0),J===!0&&(a.fromBufferAttribute(Lp,sa),ct[Mn+re+8]=a.x,ct[Mn+re+9]=a.y,ct[Mn+re+10]=a.z,ct[Mn+re+11]=Lp.itemSize===4?a.w:1)}}T={count:g,texture:ae,size:new Bt(ie,se)},n.set(u,T),u.addEventListener("dispose",R)}if(l.isInstancedMesh===!0&&l.morphTexture!==null)c.getUniforms().setValue(t,"morphTexture",l.morphTexture,r);else{let R=0;for(let k=0;k<h.length;k++)R+=h[k];const W=u.morphTargetsRelative?1:1-R;c.getUniforms().setValue(t,"morphTargetBaseInfluence",W),c.getUniforms().setValue(t,"morphTargetInfluences",h)}c.getUniforms().setValue(t,"morphTargetsTexture",T.texture,r),c.getUniforms().setValue(t,"morphTargetsTextureSize",T.size)}return{update:o}}function Ed(t,e,r,n){let a=new WeakMap;function o(c){const h=n.render.frame,v=c.geometry,g=e.get(c,v);if(a.get(g)!==h&&(e.update(g),a.set(g,h)),c.isInstancedMesh&&(c.hasEventListener("dispose",u)===!1&&c.addEventListener("dispose",u),a.get(c)!==h&&(r.update(c.instanceMatrix,t.ARRAY_BUFFER),c.instanceColor!==null&&r.update(c.instanceColor,t.ARRAY_BUFFER),a.set(c,h))),c.isSkinnedMesh){const T=c.skeleton;a.get(T)!==h&&(T.update(),a.set(T,h))}return g}function l(){a=new WeakMap}function u(c){const h=c.target;h.removeEventListener("dispose",u),r.remove(h.instanceMatrix),h.instanceColor!==null&&r.remove(h.instanceColor)}return{update:o,dispose:l}}const Vo=new be,ja=new Bo(1,1),Go=new Co,ko=new Zl,Wo=new Fo,$a=[],Ja=[],Qa=new Float32Array(16),to=new Float32Array(9),eo=new Float32Array(4);function li(t,e,r){const n=t[0];if(n<=0||n>0)return t;const a=e*r;let o=$a[a];if(o===void 0&&(o=new Float32Array(a),$a[a]=o),e!==0){n.toArray(o,0);for(let l=1,u=0;l!==e;++l)u+=r,t[l].toArray(o,u)}return o}function de(t,e){if(t.length!==e.length)return!1;for(let r=0,n=t.length;r<n;r++)if(t[r]!==e[r])return!1;return!0}function fe(t,e){for(let r=0,n=e.length;r<n;r++)t[r]=e[r]}function Mr(t,e){let r=Ja[e];r===void 0&&(r=new Int32Array(e),Ja[e]=r);for(let n=0;n!==e;++n)r[n]=t.allocateTextureUnit();return r}function yd(t,e){const r=this.cache;r[0]!==e&&(t.uniform1f(this.addr,e),r[0]=e)}function Td(t,e){const r=this.cache;if(e.x!==void 0)(r[0]!==e.x||r[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),r[0]=e.x,r[1]=e.y);else{if(de(r,e))return;t.uniform2fv(this.addr,e),fe(r,e)}}function bd(t,e){const r=this.cache;if(e.x!==void 0)(r[0]!==e.x||r[1]!==e.y||r[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),r[0]=e.x,r[1]=e.y,r[2]=e.z);else if(e.r!==void 0)(r[0]!==e.r||r[1]!==e.g||r[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),r[0]=e.r,r[1]=e.g,r[2]=e.b);else{if(de(r,e))return;t.uniform3fv(this.addr,e),fe(r,e)}}function Ad(t,e){const r=this.cache;if(e.x!==void 0)(r[0]!==e.x||r[1]!==e.y||r[2]!==e.z||r[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),r[0]=e.x,r[1]=e.y,r[2]=e.z,r[3]=e.w);else{if(de(r,e))return;t.uniform4fv(this.addr,e),fe(r,e)}}function Rd(t,e){const r=this.cache,n=e.elements;if(n===void 0){if(de(r,e))return;t.uniformMatrix2fv(this.addr,!1,e),fe(r,e)}else{if(de(r,n))return;eo.set(n),t.uniformMatrix2fv(this.addr,!1,eo),fe(r,n)}}function wd(t,e){const r=this.cache,n=e.elements;if(n===void 0){if(de(r,e))return;t.uniformMatrix3fv(this.addr,!1,e),fe(r,e)}else{if(de(r,n))return;to.set(n),t.uniformMatrix3fv(this.addr,!1,to),fe(r,n)}}function Cd(t,e){const r=this.cache,n=e.elements;if(n===void 0){if(de(r,e))return;t.uniformMatrix4fv(this.addr,!1,e),fe(r,e)}else{if(de(r,n))return;Qa.set(n),t.uniformMatrix4fv(this.addr,!1,Qa),fe(r,n)}}function Pd(t,e){const r=this.cache;r[0]!==e&&(t.uniform1i(this.addr,e),r[0]=e)}function Dd(t,e){const r=this.cache;if(e.x!==void 0)(r[0]!==e.x||r[1]!==e.y)&&(t.uniform2i(this.addr,e.x,e.y),r[0]=e.x,r[1]=e.y);else{if(de(r,e))return;t.uniform2iv(this.addr,e),fe(r,e)}}function Ld(t,e){const r=this.cache;if(e.x!==void 0)(r[0]!==e.x||r[1]!==e.y||r[2]!==e.z)&&(t.uniform3i(this.addr,e.x,e.y,e.z),r[0]=e.x,r[1]=e.y,r[2]=e.z);else{if(de(r,e))return;t.uniform3iv(this.addr,e),fe(r,e)}}function Ud(t,e){const r=this.cache;if(e.x!==void 0)(r[0]!==e.x||r[1]!==e.y||r[2]!==e.z||r[3]!==e.w)&&(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),r[0]=e.x,r[1]=e.y,r[2]=e.z,r[3]=e.w);else{if(de(r,e))return;t.uniform4iv(this.addr,e),fe(r,e)}}function Id(t,e){const r=this.cache;r[0]!==e&&(t.uniform1ui(this.addr,e),r[0]=e)}function Nd(t,e){const r=this.cache;if(e.x!==void 0)(r[0]!==e.x||r[1]!==e.y)&&(t.uniform2ui(this.addr,e.x,e.y),r[0]=e.x,r[1]=e.y);else{if(de(r,e))return;t.uniform2uiv(this.addr,e),fe(r,e)}}function Fd(t,e){const r=this.cache;if(e.x!==void 0)(r[0]!==e.x||r[1]!==e.y||r[2]!==e.z)&&(t.uniform3ui(this.addr,e.x,e.y,e.z),r[0]=e.x,r[1]=e.y,r[2]=e.z);else{if(de(r,e))return;t.uniform3uiv(this.addr,e),fe(r,e)}}function Od(t,e){const r=this.cache;if(e.x!==void 0)(r[0]!==e.x||r[1]!==e.y||r[2]!==e.z||r[3]!==e.w)&&(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),r[0]=e.x,r[1]=e.y,r[2]=e.z,r[3]=e.w);else{if(de(r,e))return;t.uniform4uiv(this.addr,e),fe(r,e)}}function Bd(t,e,r){const n=this.cache,a=r.allocateTextureUnit();n[0]!==a&&(t.uniform1i(this.addr,a),n[0]=a);let o;this.type===t.SAMPLER_2D_SHADOW?(ja.compareFunction=Ro,o=ja):o=Vo,r.setTexture2D(e||o,a)}function zd(t,e,r){const n=this.cache,a=r.allocateTextureUnit();n[0]!==a&&(t.uniform1i(this.addr,a),n[0]=a),r.setTexture3D(e||ko,a)}function Hd(t,e,r){const n=this.cache,a=r.allocateTextureUnit();n[0]!==a&&(t.uniform1i(this.addr,a),n[0]=a),r.setTextureCube(e||Wo,a)}function Vd(t,e,r){const n=this.cache,a=r.allocateTextureUnit();n[0]!==a&&(t.uniform1i(this.addr,a),n[0]=a),r.setTexture2DArray(e||Go,a)}function Gd(t){switch(t){case 5126:return yd;case 35664:return Td;case 35665:return bd;case 35666:return Ad;case 35674:return Rd;case 35675:return wd;case 35676:return Cd;case 5124:case 35670:return Pd;case 35667:case 35671:return Dd;case 35668:case 35672:return Ld;case 35669:case 35673:return Ud;case 5125:return Id;case 36294:return Nd;case 36295:return Fd;case 36296:return Od;case 35678:case 36198:case 36298:case 36306:case 35682:return Bd;case 35679:case 36299:case 36307:return zd;case 35680:case 36300:case 36308:case 36293:return Hd;case 36289:case 36303:case 36311:case 36292:return Vd}}function kd(t,e){t.uniform1fv(this.addr,e)}function Wd(t,e){const r=li(e,this.size,2);t.uniform2fv(this.addr,r)}function Xd(t,e){const r=li(e,this.size,3);t.uniform3fv(this.addr,r)}function Yd(t,e){const r=li(e,this.size,4);t.uniform4fv(this.addr,r)}function qd(t,e){const r=li(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,r)}function Kd(t,e){const r=li(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,r)}function Zd(t,e){const r=li(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,r)}function jd(t,e){t.uniform1iv(this.addr,e)}function $d(t,e){t.uniform2iv(this.addr,e)}function Jd(t,e){t.uniform3iv(this.addr,e)}function Qd(t,e){t.uniform4iv(this.addr,e)}function tf(t,e){t.uniform1uiv(this.addr,e)}function ef(t,e){t.uniform2uiv(this.addr,e)}function nf(t,e){t.uniform3uiv(this.addr,e)}function rf(t,e){t.uniform4uiv(this.addr,e)}function sf(t,e,r){const n=this.cache,a=e.length,o=Mr(r,a);de(n,o)||(t.uniform1iv(this.addr,o),fe(n,o));for(let l=0;l!==a;++l)r.setTexture2D(e[l]||Vo,o[l])}function af(t,e,r){const n=this.cache,a=e.length,o=Mr(r,a);de(n,o)||(t.uniform1iv(this.addr,o),fe(n,o));for(let l=0;l!==a;++l)r.setTexture3D(e[l]||ko,o[l])}function of(t,e,r){const n=this.cache,a=e.length,o=Mr(r,a);de(n,o)||(t.uniform1iv(this.addr,o),fe(n,o));for(let l=0;l!==a;++l)r.setTextureCube(e[l]||Wo,o[l])}function lf(t,e,r){const n=this.cache,a=e.length,o=Mr(r,a);de(n,o)||(t.uniform1iv(this.addr,o),fe(n,o));for(let l=0;l!==a;++l)r.setTexture2DArray(e[l]||Go,o[l])}function cf(t){switch(t){case 5126:return kd;case 35664:return Wd;case 35665:return Xd;case 35666:return Yd;case 35674:return qd;case 35675:return Kd;case 35676:return Zd;case 5124:case 35670:return jd;case 35667:case 35671:return $d;case 35668:case 35672:return Jd;case 35669:case 35673:return Qd;case 5125:return tf;case 36294:return ef;case 36295:return nf;case 36296:return rf;case 35678:case 36198:case 36298:case 36306:case 35682:return sf;case 35679:case 36299:case 36307:return af;case 35680:case 36300:case 36308:case 36293:return of;case 36289:case 36303:case 36311:case 36292:return lf}}class hf{constructor(e,r,n){this.id=e,this.addr=n,this.cache=[],this.type=r.type,this.setValue=Gd(r.type)}}class uf{constructor(e,r,n){this.id=e,this.addr=n,this.cache=[],this.type=r.type,this.size=r.size,this.setValue=cf(r.type)}}class df{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,r,n){const a=this.seq;for(let o=0,l=a.length;o!==l;++o){const u=a[o];u.setValue(e,r[u.id],n)}}}const es=/(\w+)(\])?(\[|\.)?/g;function no(t,e){t.seq.push(e),t.map[e.id]=e}function ff(t,e,r){const n=t.name,a=n.length;for(es.lastIndex=0;;){const o=es.exec(n),l=es.lastIndex;let u=o[1];const c=o[2]==="]",h=o[3];if(c&&(u=u|0),h===void 0||h==="["&&l+2===a){no(r,h===void 0?new hf(u,t,e):new uf(u,t,e));break}else{let v=r.map[u];v===void 0&&(v=new df(u),no(r,v)),r=v}}}class cr{constructor(e,r){this.seq=[],this.map={};const n=e.getProgramParameter(r,e.ACTIVE_UNIFORMS);for(let a=0;a<n;++a){const o=e.getActiveUniform(r,a),l=e.getUniformLocation(r,o.name);ff(o,l,this)}}setValue(e,r,n,a){const o=this.map[r];o!==void 0&&o.setValue(e,n,a)}setOptional(e,r,n){const a=r[n];a!==void 0&&this.setValue(e,n,a)}static upload(e,r,n,a){for(let o=0,l=r.length;o!==l;++o){const u=r[o],c=n[u.id];c.needsUpdate!==!1&&u.setValue(e,c.value,a)}}static seqWithValue(e,r){const n=[];for(let a=0,o=e.length;a!==o;++a){const l=e[a];l.id in r&&n.push(l)}return n}}function io(t,e,r){const n=t.createShader(e);return t.shaderSource(n,r),t.compileShader(n),n}const pf=37297;let mf=0;function _f(t,e){const r=t.split(`
`),n=[],a=Math.max(e-6,0),o=Math.min(e+6,r.length);for(let l=a;l<o;l++){const u=l+1;n.push(`${u===e?">":" "} ${u}: ${r[l]}`)}return n.join(`
`)}const ro=new Ft;function gf(t){Xt._getMatrix(ro,Xt.workingColorSpace,t);const e=`mat3( ${ro.elements.map(r=>r.toFixed(4))} )`;switch(Xt.getTransfer(t)){case hr:return[e,"LinearTransferOETF"];case Jt:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",t),[e,"LinearTransferOETF"]}}function so(t,e,r){const n=t.getShaderParameter(e,t.COMPILE_STATUS),a=(t.getShaderInfoLog(e)||"").trim();if(n&&a==="")return"";const o=/ERROR: 0:(\d+)/.exec(a);if(o){const l=parseInt(o[1]);return r.toUpperCase()+`

`+a+`

`+_f(t.getShaderSource(e),l)}else return a}function vf(t,e){const r=gf(e);return[`vec4 ${t}( vec4 value ) {`,`	return ${r[1]}( vec4( value.rgb * ${r[0]}, value.a ) );`,"}"].join(`
`)}function xf(t,e){let r;switch(e){case Sl:r="Linear";break;case El:r="Reinhard";break;case yl:r="Cineon";break;case Tl:r="ACESFilmic";break;case Al:r="AgX";break;case Rl:r="Neutral";break;case bl:r="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),r="Linear"}return"vec3 "+t+"( vec3 color ) { return "+r+"ToneMapping( color ); }"}const ir=new U;function Mf(){Xt.getLuminanceCoefficients(ir);const t=ir.x.toFixed(4),e=ir.y.toFixed(4),r=ir.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${t}, ${e}, ${r} );`,"	return dot( weights, rgb );","}"].join(`
`)}function Sf(t){return[t.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",t.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(_i).join(`
`)}function Ef(t){const e=[];for(const r in t){const n=t[r];n!==!1&&e.push("#define "+r+" "+n)}return e.join(`
`)}function yf(t,e){const r={},n=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let a=0;a<n;a++){const o=t.getActiveAttrib(e,a),l=o.name;let u=1;o.type===t.FLOAT_MAT2&&(u=2),o.type===t.FLOAT_MAT3&&(u=3),o.type===t.FLOAT_MAT4&&(u=4),r[l]={type:o.type,location:t.getAttribLocation(e,l),locationSize:u}}return r}function _i(t){return t!==""}function ao(t,e){const r=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,r).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function oo(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Tf=/^[ \t]*#include +<([\w\d./]+)>/gm;function Xs(t){return t.replace(Tf,Af)}const bf=new Map;function Af(t,e){let r=Ot[e];if(r===void 0){const n=bf.get(e);if(n!==void 0)r=Ot[n],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,n);else throw new Error("Can not resolve #include <"+e+">")}return Xs(r)}const Rf=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function lo(t){return t.replace(Rf,wf)}function wf(t,e,r,n){let a="";for(let o=parseInt(e);o<parseInt(r);o++)a+=n.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return a}function co(t){let e=`precision ${t.precision} float;
	precision ${t.precision} int;
	precision ${t.precision} sampler2D;
	precision ${t.precision} samplerCube;
	precision ${t.precision} sampler3D;
	precision ${t.precision} sampler2DArray;
	precision ${t.precision} sampler2DShadow;
	precision ${t.precision} samplerCubeShadow;
	precision ${t.precision} sampler2DArrayShadow;
	precision ${t.precision} isampler2D;
	precision ${t.precision} isampler3D;
	precision ${t.precision} isamplerCube;
	precision ${t.precision} isampler2DArray;
	precision ${t.precision} usampler2D;
	precision ${t.precision} usampler3D;
	precision ${t.precision} usamplerCube;
	precision ${t.precision} usampler2DArray;
	`;return t.precision==="highp"?e+=`
#define HIGH_PRECISION`:t.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:t.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function Cf(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===_o?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===tl?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===en&&(e="SHADOWMAP_TYPE_VSM"),e}function Pf(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case ri:case si:e="ENVMAP_TYPE_CUBE";break;case gr:e="ENVMAP_TYPE_CUBE_UV";break}return e}function Df(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case si:e="ENVMAP_MODE_REFRACTION";break}return e}function Lf(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case go:e="ENVMAP_BLENDING_MULTIPLY";break;case xl:e="ENVMAP_BLENDING_MIX";break;case Ml:e="ENVMAP_BLENDING_ADD";break}return e}function Uf(t){const e=t.envMapCubeUVHeight;if(e===null)return null;const r=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,r),112)),texelHeight:n,maxMip:r}}function If(t,e,r,n){const a=t.getContext(),o=r.defines;let l=r.vertexShader,u=r.fragmentShader;const c=Cf(r),h=Pf(r),v=Df(r),g=Lf(r),T=Uf(r),R=Sf(r),W=Ef(o),k=a.createProgram();let J,q,Se=r.glslVersion?"#version "+r.glslVersion+`
`:"";r.isRawShaderMaterial?(J=["#define SHADER_TYPE "+r.shaderType,"#define SHADER_NAME "+r.shaderName,W].filter(_i).join(`
`),J.length>0&&(J+=`
`),q=["#define SHADER_TYPE "+r.shaderType,"#define SHADER_NAME "+r.shaderName,W].filter(_i).join(`
`),q.length>0&&(q+=`
`)):(J=[co(r),"#define SHADER_TYPE "+r.shaderType,"#define SHADER_NAME "+r.shaderName,W,r.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",r.batching?"#define USE_BATCHING":"",r.batchingColor?"#define USE_BATCHING_COLOR":"",r.instancing?"#define USE_INSTANCING":"",r.instancingColor?"#define USE_INSTANCING_COLOR":"",r.instancingMorph?"#define USE_INSTANCING_MORPH":"",r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp2?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+v:"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",r.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",r.displacementMap?"#define USE_DISPLACEMENTMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.anisotropy?"#define USE_ANISOTROPY":"",r.anisotropyMap?"#define USE_ANISOTROPYMAP":"",r.clearcoatMap?"#define USE_CLEARCOATMAP":"",r.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",r.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",r.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",r.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",r.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.alphaHash?"#define USE_ALPHAHASH":"",r.transmission?"#define USE_TRANSMISSION":"",r.transmissionMap?"#define USE_TRANSMISSIONMAP":"",r.thicknessMap?"#define USE_THICKNESSMAP":"",r.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",r.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",r.mapUv?"#define MAP_UV "+r.mapUv:"",r.alphaMapUv?"#define ALPHAMAP_UV "+r.alphaMapUv:"",r.lightMapUv?"#define LIGHTMAP_UV "+r.lightMapUv:"",r.aoMapUv?"#define AOMAP_UV "+r.aoMapUv:"",r.emissiveMapUv?"#define EMISSIVEMAP_UV "+r.emissiveMapUv:"",r.bumpMapUv?"#define BUMPMAP_UV "+r.bumpMapUv:"",r.normalMapUv?"#define NORMALMAP_UV "+r.normalMapUv:"",r.displacementMapUv?"#define DISPLACEMENTMAP_UV "+r.displacementMapUv:"",r.metalnessMapUv?"#define METALNESSMAP_UV "+r.metalnessMapUv:"",r.roughnessMapUv?"#define ROUGHNESSMAP_UV "+r.roughnessMapUv:"",r.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+r.anisotropyMapUv:"",r.clearcoatMapUv?"#define CLEARCOATMAP_UV "+r.clearcoatMapUv:"",r.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+r.clearcoatNormalMapUv:"",r.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+r.clearcoatRoughnessMapUv:"",r.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+r.iridescenceMapUv:"",r.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+r.iridescenceThicknessMapUv:"",r.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+r.sheenColorMapUv:"",r.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+r.sheenRoughnessMapUv:"",r.specularMapUv?"#define SPECULARMAP_UV "+r.specularMapUv:"",r.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+r.specularColorMapUv:"",r.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+r.specularIntensityMapUv:"",r.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+r.transmissionMapUv:"",r.thicknessMapUv?"#define THICKNESSMAP_UV "+r.thicknessMapUv:"",r.vertexTangents&&r.flatShading===!1?"#define USE_TANGENT":"",r.vertexColors?"#define USE_COLOR":"",r.vertexAlphas?"#define USE_COLOR_ALPHA":"",r.vertexUv1s?"#define USE_UV1":"",r.vertexUv2s?"#define USE_UV2":"",r.vertexUv3s?"#define USE_UV3":"",r.pointsUvs?"#define USE_POINTS_UV":"",r.flatShading?"#define FLAT_SHADED":"",r.skinning?"#define USE_SKINNING":"",r.morphTargets?"#define USE_MORPHTARGETS":"",r.morphNormals&&r.flatShading===!1?"#define USE_MORPHNORMALS":"",r.morphColors?"#define USE_MORPHCOLORS":"",r.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+r.morphTextureStride:"",r.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+r.morphTargetsCount:"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+c:"",r.sizeAttenuation?"#define USE_SIZEATTENUATION":"",r.numLightProbes>0?"#define USE_LIGHT_PROBES":"",r.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",r.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(_i).join(`
`),q=[co(r),"#define SHADER_TYPE "+r.shaderType,"#define SHADER_NAME "+r.shaderName,W,r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp2?"#define FOG_EXP2":"",r.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",r.map?"#define USE_MAP":"",r.matcap?"#define USE_MATCAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+h:"",r.envMap?"#define "+v:"",r.envMap?"#define "+g:"",T?"#define CUBEUV_TEXEL_WIDTH "+T.texelWidth:"",T?"#define CUBEUV_TEXEL_HEIGHT "+T.texelHeight:"",T?"#define CUBEUV_MAX_MIP "+T.maxMip+".0":"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",r.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.anisotropy?"#define USE_ANISOTROPY":"",r.anisotropyMap?"#define USE_ANISOTROPYMAP":"",r.clearcoat?"#define USE_CLEARCOAT":"",r.clearcoatMap?"#define USE_CLEARCOATMAP":"",r.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",r.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",r.dispersion?"#define USE_DISPERSION":"",r.iridescence?"#define USE_IRIDESCENCE":"",r.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",r.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",r.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.alphaTest?"#define USE_ALPHATEST":"",r.alphaHash?"#define USE_ALPHAHASH":"",r.sheen?"#define USE_SHEEN":"",r.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",r.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",r.transmission?"#define USE_TRANSMISSION":"",r.transmissionMap?"#define USE_TRANSMISSIONMAP":"",r.thicknessMap?"#define USE_THICKNESSMAP":"",r.vertexTangents&&r.flatShading===!1?"#define USE_TANGENT":"",r.vertexColors||r.instancingColor||r.batchingColor?"#define USE_COLOR":"",r.vertexAlphas?"#define USE_COLOR_ALPHA":"",r.vertexUv1s?"#define USE_UV1":"",r.vertexUv2s?"#define USE_UV2":"",r.vertexUv3s?"#define USE_UV3":"",r.pointsUvs?"#define USE_POINTS_UV":"",r.gradientMap?"#define USE_GRADIENTMAP":"",r.flatShading?"#define FLAT_SHADED":"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+c:"",r.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",r.numLightProbes>0?"#define USE_LIGHT_PROBES":"",r.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",r.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",r.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",r.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",r.toneMapping!==_n?"#define TONE_MAPPING":"",r.toneMapping!==_n?Ot.tonemapping_pars_fragment:"",r.toneMapping!==_n?xf("toneMapping",r.toneMapping):"",r.dithering?"#define DITHERING":"",r.opaque?"#define OPAQUE":"",Ot.colorspace_pars_fragment,vf("linearToOutputTexel",r.outputColorSpace),Mf(),r.useDepthPacking?"#define DEPTH_PACKING "+r.depthPacking:"",`
`].filter(_i).join(`
`)),l=Xs(l),l=ao(l,r),l=oo(l,r),u=Xs(u),u=ao(u,r),u=oo(u,r),l=lo(l),u=lo(u),r.isRawShaderMaterial!==!0&&(Se=`#version 300 es
`,J=[R,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+J,q=["#define varying in",r.glslVersion===ga?"":"layout(location = 0) out highp vec4 pc_fragColor;",r.glslVersion===ga?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+q);const V=Se+J+l,Y=Se+q+u,ie=io(a,a.VERTEX_SHADER,V),se=io(a,a.FRAGMENT_SHADER,Y);a.attachShader(k,ie),a.attachShader(k,se),r.index0AttributeName!==void 0?a.bindAttribLocation(k,0,r.index0AttributeName):r.morphTargets===!0&&a.bindAttribLocation(k,0,"position"),a.linkProgram(k);function ct($t){if(t.debug.checkShaderErrors){const jo=a.getProgramInfoLog(k)||"",Lp=a.getShaderInfoLog(ie)||"",Mn=a.getShaderInfoLog(se)||"",sa=jo.trim(),re=Lp.trim(),$o=Mn.trim();let qo=!0,Kt=!0;if(a.getProgramParameter(k,a.LINK_STATUS)===!1)if(qo=!1,typeof t.debug.onShaderError=="function")t.debug.onShaderError(a,k,ie,se);else{const i0=so(a,ie,"vertex"),Up=so(a,se,"fragment");console.error("THREE.WebGLProgram: Shader Error "+a.getError()+" - VALIDATE_STATUS "+a.getProgramParameter(k,a.VALIDATE_STATUS)+`

Material Name: `+$t.name+`
Material Type: `+$t.type+`

Program Info Log: `+sa+`
`+i0+`
`+Up)}else sa!==""?console.warn("THREE.WebGLProgram: Program Info Log:",sa):(re===""||$o==="")&&(Kt=!1);Kt&&($t.diagnostics={runnable:qo,programLog:sa,vertexShader:{log:re,prefix:J},fragmentShader:{log:$o,prefix:q}})}a.deleteShader(ie),a.deleteShader(se),ae=new cr(a,k),st=yf(a,k)}let ae;this.getUniforms=function(){return ae===void 0&&ct(this),ae};let st;this.getAttributes=function(){return st===void 0&&ct(this),st};let Ct=r.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return Ct===!1&&(Ct=a.getProgramParameter(k,pf)),Ct},this.destroy=function(){n.releaseStatesOfProgram(this),a.deleteProgram(k),this.program=void 0},this.type=r.shaderType,this.name=r.shaderName,this.id=mf++,this.cacheKey=e,this.usedTimes=1,this.program=k,this.vertexShader=ie,this.fragmentShader=se,this}let Nf=0;class Ff{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const r=e.vertexShader,n=e.fragmentShader,a=this._getShaderStage(r),o=this._getShaderStage(n),l=this._getShaderCacheForMaterial(e);return l.has(a)===!1&&(l.add(a),a.usedTimes++),l.has(o)===!1&&(l.add(o),o.usedTimes++),this}remove(e){const r=this.materialCache.get(e);for(const n of r)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const r=this.materialCache;let n=r.get(e);return n===void 0&&(n=new Set,r.set(e,n)),n}_getShaderStage(e){const r=this.shaderCache;let n=r.get(e);return n===void 0&&(n=new Of(e),r.set(e,n)),n}}class Of{constructor(e){this.id=Nf++,this.code=e,this.usedTimes=0}}function Bf(t,e,r,n,a,o,l){const u=new Po,c=new Ff,h=new Set,v=[],g=a.logarithmicDepthBuffer,T=a.vertexTextures;let R=a.precision;const W={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function k(st){return h.add(st),st===0?"uv":`uv${st}`}function J(st,Ct,$t,jo,Lp){const Mn=jo.fog,sa=Lp.geometry,re=st.isMeshStandardMaterial?jo.environment:null,$o=(st.isMeshStandardMaterial?r:e).get(st.envMap||re),qo=$o&&$o.mapping===gr?$o.image.height:null,Kt=W[st.type];st.precision!==null&&(R=a.getMaxPrecision(st.precision),R!==st.precision&&console.warn("THREE.WebGLProgram.getParameters:",st.precision,"not supported, using",R,"instead."));const i0=sa.morphAttributes.position||sa.morphAttributes.normal||sa.morphAttributes.color,Up=i0!==void 0?i0.length:0;let l0=0;sa.morphAttributes.position!==void 0&&(l0=1),sa.morphAttributes.normal!==void 0&&(l0=2),sa.morphAttributes.color!==void 0&&(l0=3);let y0,kp,u0,f0;if(Kt){const $g=We[Kt];y0=$g.vertexShader,kp=$g.fragmentShader}else y0=st.vertexShader,kp=st.fragmentShader,c.update(st),u0=c.getVertexShaderID(st),f0=c.getFragmentShaderID(st);const v0=t.getRenderTarget(),p0=t.state.buffers.depth.getReversed(),rm=Lp.isInstancedMesh===!0,am=Lp.isBatchedMesh===!0,ym=!!st.map,Wm=!!st.matcap,h0=!!$o,f1=!!st.aoMap,T1=!!st.lightMap,I1=!!st.bumpMap,p1=!!st.normalMap,Qm=!!st.displacementMap,m1=!!st.emissiveMap,W1=!!st.metalnessMap,ug=!!st.roughnessMap,ng=st.anisotropy>0,Ko=st.clearcoat>0,wi=st.dispersion>0,S0=st.iridescence>0,Z0=st.sheen>0,Pp=st.transmission>0,Ip=ng&&!!st.anisotropyMap,x0=Ko&&!!st.clearcoatMap,B0=Ko&&!!st.clearcoatNormalMap,Y0=Ko&&!!st.clearcoatRoughnessMap,im=S0&&!!st.iridescenceMap,om=S0&&!!st.iridescenceThicknessMap,Cm=Z0&&!!st.sheenColorMap,r1=Z0&&!!st.sheenRoughnessMap,Om=!!st.specularMap,a1=!!st.specularColorMap,hg=!!st.specularIntensityMap,pm=Pp&&!!st.transmissionMap,S1=Pp&&!!st.thicknessMap,U1=!!st.gradientMap,J1=!!st.alphaMap,l1=st.alphaTest>0,Km=!!st.alphaHash,A1=!!st.extensions;let y1=_n;st.toneMapped&&(v0===null||v0.isXRRenderTarget===!0)&&(y1=t.toneMapping);const uv={shaderID:Kt,shaderType:st.type,shaderName:st.name,vertexShader:y0,fragmentShader:kp,defines:st.defines,customVertexShaderID:u0,customFragmentShaderID:f0,isRawShaderMaterial:st.isRawShaderMaterial===!0,glslVersion:st.glslVersion,precision:R,batching:am,batchingColor:am&&Lp._colorsTexture!==null,instancing:rm,instancingColor:rm&&Lp.instanceColor!==null,instancingMorph:rm&&Lp.morphTexture!==null,supportsVertexTextures:T,outputColorSpace:v0===null?t.outputColorSpace:v0.isXRRenderTarget===!0?v0.texture.colorSpace:ai,alphaToCoverage:!!st.alphaToCoverage,map:ym,matcap:Wm,envMap:h0,envMapMode:h0&&$o.mapping,envMapCubeUVHeight:qo,aoMap:f1,lightMap:T1,bumpMap:I1,normalMap:p1,displacementMap:T&&Qm,emissiveMap:m1,normalMapObjectSpace:p1&&st.normalMapType===Ll,normalMapTangentSpace:p1&&st.normalMapType===Dl,metalnessMap:W1,roughnessMap:ug,anisotropy:ng,anisotropyMap:Ip,clearcoat:Ko,clearcoatMap:x0,clearcoatNormalMap:B0,clearcoatRoughnessMap:Y0,dispersion:wi,iridescence:S0,iridescenceMap:im,iridescenceThicknessMap:om,sheen:Z0,sheenColorMap:Cm,sheenRoughnessMap:r1,specularMap:Om,specularColorMap:a1,specularIntensityMap:hg,transmission:Pp,transmissionMap:pm,thicknessMap:S1,gradientMap:U1,opaque:st.transparent===!1&&st.blending===ti&&st.alphaToCoverage===!1,alphaMap:J1,alphaTest:l1,alphaHash:Km,combine:st.combine,mapUv:ym&&k(st.map.channel),aoMapUv:f1&&k(st.aoMap.channel),lightMapUv:T1&&k(st.lightMap.channel),bumpMapUv:I1&&k(st.bumpMap.channel),normalMapUv:p1&&k(st.normalMap.channel),displacementMapUv:Qm&&k(st.displacementMap.channel),emissiveMapUv:m1&&k(st.emissiveMap.channel),metalnessMapUv:W1&&k(st.metalnessMap.channel),roughnessMapUv:ug&&k(st.roughnessMap.channel),anisotropyMapUv:Ip&&k(st.anisotropyMap.channel),clearcoatMapUv:x0&&k(st.clearcoatMap.channel),clearcoatNormalMapUv:B0&&k(st.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Y0&&k(st.clearcoatRoughnessMap.channel),iridescenceMapUv:im&&k(st.iridescenceMap.channel),iridescenceThicknessMapUv:om&&k(st.iridescenceThicknessMap.channel),sheenColorMapUv:Cm&&k(st.sheenColorMap.channel),sheenRoughnessMapUv:r1&&k(st.sheenRoughnessMap.channel),specularMapUv:Om&&k(st.specularMap.channel),specularColorMapUv:a1&&k(st.specularColorMap.channel),specularIntensityMapUv:hg&&k(st.specularIntensityMap.channel),transmissionMapUv:pm&&k(st.transmissionMap.channel),thicknessMapUv:S1&&k(st.thicknessMap.channel),alphaMapUv:J1&&k(st.alphaMap.channel),vertexTangents:!!sa.attributes.tangent&&(p1||ng),vertexColors:st.vertexColors,vertexAlphas:st.vertexColors===!0&&!!sa.attributes.color&&sa.attributes.color.itemSize===4,pointsUvs:Lp.isPoints===!0&&!!sa.attributes.uv&&(ym||J1),fog:!!Mn,useFog:st.fog===!0,fogExp2:!!Mn&&Mn.isFogExp2,flatShading:st.flatShading===!0&&st.wireframe===!1,sizeAttenuation:st.sizeAttenuation===!0,logarithmicDepthBuffer:g,reversedDepthBuffer:p0,skinning:Lp.isSkinnedMesh===!0,morphTargets:sa.morphAttributes.position!==void 0,morphNormals:sa.morphAttributes.normal!==void 0,morphColors:sa.morphAttributes.color!==void 0,morphTargetsCount:Up,morphTextureStride:l0,numDirLights:Ct.directional.length,numPointLights:Ct.point.length,numSpotLights:Ct.spot.length,numSpotLightMaps:Ct.spotLightMap.length,numRectAreaLights:Ct.rectArea.length,numHemiLights:Ct.hemi.length,numDirLightShadows:Ct.directionalShadowMap.length,numPointLightShadows:Ct.pointShadowMap.length,numSpotLightShadows:Ct.spotShadowMap.length,numSpotLightShadowsWithMaps:Ct.numSpotLightShadowsWithMaps,numLightProbes:Ct.numLightProbes,numClippingPlanes:l.numPlanes,numClipIntersection:l.numIntersection,dithering:st.dithering,shadowMapEnabled:t.shadowMap.enabled&&$t.length>0,shadowMapType:t.shadowMap.type,toneMapping:y1,decodeVideoTexture:ym&&st.map.isVideoTexture===!0&&Xt.getTransfer(st.map.colorSpace)===Jt,decodeVideoTextureEmissive:m1&&st.emissiveMap.isVideoTexture===!0&&Xt.getTransfer(st.emissiveMap.colorSpace)===Jt,premultipliedAlpha:st.premultipliedAlpha,doubleSided:st.side===Xe,flipSided:st.side===Te,useDepthPacking:st.depthPacking>=0,depthPacking:st.depthPacking||0,index0AttributeName:st.index0AttributeName,extensionClipCullDistance:A1&&st.extensions.clipCullDistance===!0&&n.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(A1&&st.extensions.multiDraw===!0||am)&&n.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:n.has("KHR_parallel_shader_compile"),customProgramCacheKey:st.customProgramCacheKey()};return uv.vertexUv1s=h.has(1),uv.vertexUv2s=h.has(2),uv.vertexUv3s=h.has(3),h.clear(),uv}function q(st){const Ct=[];if(st.shaderID?Ct.push(st.shaderID):(Ct.push(st.customVertexShaderID),Ct.push(st.customFragmentShaderID)),st.defines!==void 0)for(const $t in st.defines)Ct.push($t),Ct.push(st.defines[$t]);return st.isRawShaderMaterial===!1&&(Se(Ct,st),V(Ct,st),Ct.push(t.outputColorSpace)),Ct.push(st.customProgramCacheKey),Ct.join()}function Se(st,Ct){st.push(Ct.precision),st.push(Ct.outputColorSpace),st.push(Ct.envMapMode),st.push(Ct.envMapCubeUVHeight),st.push(Ct.mapUv),st.push(Ct.alphaMapUv),st.push(Ct.lightMapUv),st.push(Ct.aoMapUv),st.push(Ct.bumpMapUv),st.push(Ct.normalMapUv),st.push(Ct.displacementMapUv),st.push(Ct.emissiveMapUv),st.push(Ct.metalnessMapUv),st.push(Ct.roughnessMapUv),st.push(Ct.anisotropyMapUv),st.push(Ct.clearcoatMapUv),st.push(Ct.clearcoatNormalMapUv),st.push(Ct.clearcoatRoughnessMapUv),st.push(Ct.iridescenceMapUv),st.push(Ct.iridescenceThicknessMapUv),st.push(Ct.sheenColorMapUv),st.push(Ct.sheenRoughnessMapUv),st.push(Ct.specularMapUv),st.push(Ct.specularColorMapUv),st.push(Ct.specularIntensityMapUv),st.push(Ct.transmissionMapUv),st.push(Ct.thicknessMapUv),st.push(Ct.combine),st.push(Ct.fogExp2),st.push(Ct.sizeAttenuation),st.push(Ct.morphTargetsCount),st.push(Ct.morphAttributeCount),st.push(Ct.numDirLights),st.push(Ct.numPointLights),st.push(Ct.numSpotLights),st.push(Ct.numSpotLightMaps),st.push(Ct.numHemiLights),st.push(Ct.numRectAreaLights),st.push(Ct.numDirLightShadows),st.push(Ct.numPointLightShadows),st.push(Ct.numSpotLightShadows),st.push(Ct.numSpotLightShadowsWithMaps),st.push(Ct.numLightProbes),st.push(Ct.shadowMapType),st.push(Ct.toneMapping),st.push(Ct.numClippingPlanes),st.push(Ct.numClipIntersection),st.push(Ct.depthPacking)}function V(st,Ct){u.disableAll(),Ct.supportsVertexTextures&&u.enable(0),Ct.instancing&&u.enable(1),Ct.instancingColor&&u.enable(2),Ct.instancingMorph&&u.enable(3),Ct.matcap&&u.enable(4),Ct.envMap&&u.enable(5),Ct.normalMapObjectSpace&&u.enable(6),Ct.normalMapTangentSpace&&u.enable(7),Ct.clearcoat&&u.enable(8),Ct.iridescence&&u.enable(9),Ct.alphaTest&&u.enable(10),Ct.vertexColors&&u.enable(11),Ct.vertexAlphas&&u.enable(12),Ct.vertexUv1s&&u.enable(13),Ct.vertexUv2s&&u.enable(14),Ct.vertexUv3s&&u.enable(15),Ct.vertexTangents&&u.enable(16),Ct.anisotropy&&u.enable(17),Ct.alphaHash&&u.enable(18),Ct.batching&&u.enable(19),Ct.dispersion&&u.enable(20),Ct.batchingColor&&u.enable(21),Ct.gradientMap&&u.enable(22),st.push(u.mask),u.disableAll(),Ct.fog&&u.enable(0),Ct.useFog&&u.enable(1),Ct.flatShading&&u.enable(2),Ct.logarithmicDepthBuffer&&u.enable(3),Ct.reversedDepthBuffer&&u.enable(4),Ct.skinning&&u.enable(5),Ct.morphTargets&&u.enable(6),Ct.morphNormals&&u.enable(7),Ct.morphColors&&u.enable(8),Ct.premultipliedAlpha&&u.enable(9),Ct.shadowMapEnabled&&u.enable(10),Ct.doubleSided&&u.enable(11),Ct.flipSided&&u.enable(12),Ct.useDepthPacking&&u.enable(13),Ct.dithering&&u.enable(14),Ct.transmission&&u.enable(15),Ct.sheen&&u.enable(16),Ct.opaque&&u.enable(17),Ct.pointsUvs&&u.enable(18),Ct.decodeVideoTexture&&u.enable(19),Ct.decodeVideoTextureEmissive&&u.enable(20),Ct.alphaToCoverage&&u.enable(21),st.push(u.mask)}function Y(st){const Ct=W[st.type];let $t;if(Ct){const jo=We[Ct];$t=lc.clone(jo.uniforms)}else $t=st.uniforms;return $t}function ie(st,Ct){let $t;for(let jo=0,Lp=v.length;jo<Lp;jo++){const Mn=v[jo];if(Mn.cacheKey===Ct){$t=Mn,++$t.usedTimes;break}}return $t===void 0&&($t=new If(t,Ct,st,o),v.push($t)),$t}function se(st){if(--st.usedTimes===0){const Ct=v.indexOf(st);v[Ct]=v[v.length-1],v.pop(),st.destroy()}}function ct(st){c.remove(st)}function ae(){c.dispose()}return{getParameters:J,getProgramCacheKey:q,getUniforms:Y,acquireProgram:ie,releaseProgram:se,releaseShaderCache:ct,programs:v,dispose:ae}}function zf(){let t=new WeakMap;function e(l){return t.has(l)}function r(l){let u=t.get(l);return u===void 0&&(u={},t.set(l,u)),u}function n(l){t.delete(l)}function a(l,u,c){t.get(l)[u]=c}function o(){t=new WeakMap}return{has:e,get:r,remove:n,update:a,dispose:o}}function Hf(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function ho(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function uo(){const t=[];let e=0;const r=[],n=[],a=[];function o(){e=0,r.length=0,n.length=0,a.length=0}function l(g,T,R,W,k,J){let q=t[e];return q===void 0?(q={id:g.id,object:g,geometry:T,material:R,groupOrder:W,renderOrder:g.renderOrder,z:k,group:J},t[e]=q):(q.id=g.id,q.object=g,q.geometry=T,q.material=R,q.groupOrder=W,q.renderOrder=g.renderOrder,q.z=k,q.group=J),e++,q}function u(g,T,R,W,k,J){const q=l(g,T,R,W,k,J);R.transmission>0?n.push(q):R.transparent===!0?a.push(q):r.push(q)}function c(g,T,R,W,k,J){const q=l(g,T,R,W,k,J);R.transmission>0?n.unshift(q):R.transparent===!0?a.unshift(q):r.unshift(q)}function h(g,T){r.length>1&&r.sort(g||Hf),n.length>1&&n.sort(T||ho),a.length>1&&a.sort(T||ho)}function v(){for(let g=e,T=t.length;g<T;g++){const R=t[g];if(R.id===null)break;R.id=null,R.object=null,R.geometry=null,R.material=null,R.group=null}}return{opaque:r,transmissive:n,transparent:a,init:o,push:u,unshift:c,finish:v,sort:h}}function Vf(){let t=new WeakMap;function e(n,a){const o=t.get(n);let l;return o===void 0?(l=new uo,t.set(n,[l])):a>=o.length?(l=new uo,o.push(l)):l=o[a],l}function r(){t=new WeakMap}return{get:e,dispose:r}}function Gf(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let r;switch(e.type){case"DirectionalLight":r={direction:new U,color:new qt};break;case"SpotLight":r={position:new U,direction:new U,color:new qt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":r={position:new U,color:new qt,distance:0,decay:0};break;case"HemisphereLight":r={direction:new U,skyColor:new qt,groundColor:new qt};break;case"RectAreaLight":r={color:new qt,position:new U,halfWidth:new U,halfHeight:new U};break}return t[e.id]=r,r}}}function kf(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let r;switch(e.type){case"DirectionalLight":r={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Bt};break;case"SpotLight":r={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Bt};break;case"PointLight":r={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Bt,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=r,r}}}let Wf=0;function Xf(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function Yf(t){const e=new Gf,r=kf(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let h=0;h<9;h++)n.probe.push(new U);const a=new U,o=new he,l=new he;function u(h){let v=0,g=0,T=0;for(let st=0;st<9;st++)n.probe[st].set(0,0,0);let R=0,W=0,k=0,J=0,q=0,Se=0,V=0,Y=0,ie=0,se=0,ct=0;h.sort(Xf);for(let st=0,Ct=h.length;st<Ct;st++){const $t=h[st],jo=$t.color,Lp=$t.intensity,Mn=$t.distance,sa=$t.shadow&&$t.shadow.map?$t.shadow.map.texture:null;if($t.isAmbientLight)v+=jo.r*Lp,g+=jo.g*Lp,T+=jo.b*Lp;else if($t.isLightProbe){for(let re=0;re<9;re++)n.probe[re].addScaledVector($t.sh.coefficients[re],Lp);ct++}else if($t.isDirectionalLight){const re=e.get($t);if(re.color.copy($t.color).multiplyScalar($t.intensity),$t.castShadow){const $o=$t.shadow,qo=r.get($t);qo.shadowIntensity=$o.intensity,qo.shadowBias=$o.bias,qo.shadowNormalBias=$o.normalBias,qo.shadowRadius=$o.radius,qo.shadowMapSize=$o.mapSize,n.directionalShadow[R]=qo,n.directionalShadowMap[R]=sa,n.directionalShadowMatrix[R]=$t.shadow.matrix,Se++}n.directional[R]=re,R++}else if($t.isSpotLight){const re=e.get($t);re.position.setFromMatrixPosition($t.matrixWorld),re.color.copy(jo).multiplyScalar(Lp),re.distance=Mn,re.coneCos=Math.cos($t.angle),re.penumbraCos=Math.cos($t.angle*(1-$t.penumbra)),re.decay=$t.decay,n.spot[k]=re;const $o=$t.shadow;if($t.map&&(n.spotLightMap[ie]=$t.map,ie++,$o.updateMatrices($t),$t.castShadow&&se++),n.spotLightMatrix[k]=$o.matrix,$t.castShadow){const qo=r.get($t);qo.shadowIntensity=$o.intensity,qo.shadowBias=$o.bias,qo.shadowNormalBias=$o.normalBias,qo.shadowRadius=$o.radius,qo.shadowMapSize=$o.mapSize,n.spotShadow[k]=qo,n.spotShadowMap[k]=sa,Y++}k++}else if($t.isRectAreaLight){const re=e.get($t);re.color.copy(jo).multiplyScalar(Lp),re.halfWidth.set($t.width*.5,0,0),re.halfHeight.set(0,$t.height*.5,0),n.rectArea[J]=re,J++}else if($t.isPointLight){const re=e.get($t);if(re.color.copy($t.color).multiplyScalar($t.intensity),re.distance=$t.distance,re.decay=$t.decay,$t.castShadow){const $o=$t.shadow,qo=r.get($t);qo.shadowIntensity=$o.intensity,qo.shadowBias=$o.bias,qo.shadowNormalBias=$o.normalBias,qo.shadowRadius=$o.radius,qo.shadowMapSize=$o.mapSize,qo.shadowCameraNear=$o.camera.near,qo.shadowCameraFar=$o.camera.far,n.pointShadow[W]=qo,n.pointShadowMap[W]=sa,n.pointShadowMatrix[W]=$t.shadow.matrix,V++}n.point[W]=re,W++}else if($t.isHemisphereLight){const re=e.get($t);re.skyColor.copy($t.color).multiplyScalar(Lp),re.groundColor.copy($t.groundColor).multiplyScalar(Lp),n.hemi[q]=re,q++}}J>0&&(t.has("OES_texture_float_linear")===!0?(n.rectAreaLTC1=at.LTC_FLOAT_1,n.rectAreaLTC2=at.LTC_FLOAT_2):(n.rectAreaLTC1=at.LTC_HALF_1,n.rectAreaLTC2=at.LTC_HALF_2)),n.ambient[0]=v,n.ambient[1]=g,n.ambient[2]=T;const ae=n.hash;(ae.directionalLength!==R||ae.pointLength!==W||ae.spotLength!==k||ae.rectAreaLength!==J||ae.hemiLength!==q||ae.numDirectionalShadows!==Se||ae.numPointShadows!==V||ae.numSpotShadows!==Y||ae.numSpotMaps!==ie||ae.numLightProbes!==ct)&&(n.directional.length=R,n.spot.length=k,n.rectArea.length=J,n.point.length=W,n.hemi.length=q,n.directionalShadow.length=Se,n.directionalShadowMap.length=Se,n.pointShadow.length=V,n.pointShadowMap.length=V,n.spotShadow.length=Y,n.spotShadowMap.length=Y,n.directionalShadowMatrix.length=Se,n.pointShadowMatrix.length=V,n.spotLightMatrix.length=Y+ie-se,n.spotLightMap.length=ie,n.numSpotLightShadowsWithMaps=se,n.numLightProbes=ct,ae.directionalLength=R,ae.pointLength=W,ae.spotLength=k,ae.rectAreaLength=J,ae.hemiLength=q,ae.numDirectionalShadows=Se,ae.numPointShadows=V,ae.numSpotShadows=Y,ae.numSpotMaps=ie,ae.numLightProbes=ct,n.version=Wf++)}function c(h,v){let g=0,T=0,R=0,W=0,k=0;const J=v.matrixWorldInverse;for(let q=0,Se=h.length;q<Se;q++){const V=h[q];if(V.isDirectionalLight){const Y=n.directional[g];Y.direction.setFromMatrixPosition(V.matrixWorld),a.setFromMatrixPosition(V.target.matrixWorld),Y.direction.sub(a),Y.direction.transformDirection(J),g++}else if(V.isSpotLight){const Y=n.spot[R];Y.position.setFromMatrixPosition(V.matrixWorld),Y.position.applyMatrix4(J),Y.direction.setFromMatrixPosition(V.matrixWorld),a.setFromMatrixPosition(V.target.matrixWorld),Y.direction.sub(a),Y.direction.transformDirection(J),R++}else if(V.isRectAreaLight){const Y=n.rectArea[W];Y.position.setFromMatrixPosition(V.matrixWorld),Y.position.applyMatrix4(J),l.identity(),o.copy(V.matrixWorld),o.premultiply(J),l.extractRotation(o),Y.halfWidth.set(V.width*.5,0,0),Y.halfHeight.set(0,V.height*.5,0),Y.halfWidth.applyMatrix4(l),Y.halfHeight.applyMatrix4(l),W++}else if(V.isPointLight){const Y=n.point[T];Y.position.setFromMatrixPosition(V.matrixWorld),Y.position.applyMatrix4(J),T++}else if(V.isHemisphereLight){const Y=n.hemi[k];Y.direction.setFromMatrixPosition(V.matrixWorld),Y.direction.transformDirection(J),k++}}}return{setup:u,setupView:c,state:n}}function fo(t){const e=new Yf(t),r=[],n=[];function a(v){h.camera=v,r.length=0,n.length=0}function o(v){r.push(v)}function l(v){n.push(v)}function u(){e.setup(r)}function c(v){e.setupView(r,v)}const h={lightsArray:r,shadowsArray:n,camera:null,lights:e,transmissionRenderTarget:{}};return{init:a,state:h,setupLights:u,setupLightsView:c,pushLight:o,pushShadow:l}}function qf(t){let e=new WeakMap;function r(a,o=0){const l=e.get(a);let u;return l===void 0?(u=new fo(t),e.set(a,[u])):o>=l.length?(u=new fo(t),l.push(u)):u=l[o],u}function n(){e=new WeakMap}return{get:r,dispose:n}}const Kf=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,Zf=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function jf(t,e,r){let n=new Oo;const a=new Bt,o=new Bt,l=new oe,u=new Mc({depthPacking:Pl}),c=new Sc,h={},v=r.maxTextureSize,g={[gn]:Te,[Te]:gn,[Xe]:Xe},T=new vn({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Bt},radius:{value:4}},vertexShader:Kf,fragmentShader:Zf}),R=T.clone();R.defines.HORIZONTAL_PASS=1;const W=new Ae;W.setAttribute("position",new Ke(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const k=new De(W,T),J=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=_o;let q=this.type;this.render=function(se,ct,ae){if(J.enabled===!1||J.autoUpdate===!1&&J.needsUpdate===!1||se.length===0)return;const st=t.getRenderTarget(),Ct=t.getActiveCubeFace(),$t=t.getActiveMipmapLevel(),jo=t.state;jo.setBlending(mn),jo.buffers.depth.getReversed()===!0?jo.buffers.color.setClear(0,0,0,0):jo.buffers.color.setClear(1,1,1,1),jo.buffers.depth.setTest(!0),jo.setScissorTest(!1);const Lp=q!==en&&this.type===en,Mn=q===en&&this.type!==en;for(let sa=0,re=se.length;sa<re;sa++){const $o=se[sa],qo=$o.shadow;if(qo===void 0){console.warn("THREE.WebGLShadowMap:",$o,"has no shadow.");continue}if(qo.autoUpdate===!1&&qo.needsUpdate===!1)continue;a.copy(qo.mapSize);const Kt=qo.getFrameExtents();if(a.multiply(Kt),o.copy(qo.mapSize),(a.x>v||a.y>v)&&(a.x>v&&(o.x=Math.floor(v/Kt.x),a.x=o.x*Kt.x,qo.mapSize.x=o.x),a.y>v&&(o.y=Math.floor(v/Kt.y),a.y=o.y*Kt.y,qo.mapSize.y=o.y)),qo.map===null||Lp===!0||Mn===!0){const Up=this.type!==en?{minFilter:Ge,magFilter:Ge}:{};qo.map!==null&&qo.map.dispose(),qo.map=new In(a.x,a.y,Up),qo.map.texture.name=$o.name+".shadowMap",qo.camera.updateProjectionMatrix()}t.setRenderTarget(qo.map),t.clear();const i0=qo.getViewportCount();for(let Up=0;Up<i0;Up++){const l0=qo.getViewport(Up);l.set(o.x*l0.x,o.y*l0.y,o.x*l0.z,o.y*l0.w),jo.viewport(l),qo.updateMatrices($o,Up),n=qo.getFrustum(),Y(ct,ae,qo.camera,$o,this.type)}qo.isPointLightShadow!==!0&&this.type===en&&Se(qo,ae),qo.needsUpdate=!1}q=this.type,J.needsUpdate=!1,t.setRenderTarget(st,Ct,$t)};function Se(se,ct){const ae=e.update(k);T.defines.VSM_SAMPLES!==se.blurSamples&&(T.defines.VSM_SAMPLES=se.blurSamples,R.defines.VSM_SAMPLES=se.blurSamples,T.needsUpdate=!0,R.needsUpdate=!0),se.mapPass===null&&(se.mapPass=new In(a.x,a.y)),T.uniforms.shadow_pass.value=se.map.texture,T.uniforms.resolution.value=se.mapSize,T.uniforms.radius.value=se.radius,t.setRenderTarget(se.mapPass),t.clear(),t.renderBufferDirect(ct,null,ae,T,k,null),R.uniforms.shadow_pass.value=se.mapPass.texture,R.uniforms.resolution.value=se.mapSize,R.uniforms.radius.value=se.radius,t.setRenderTarget(se.map),t.clear(),t.renderBufferDirect(ct,null,ae,R,k,null)}function V(se,ct,ae,st){let Ct=null;const $t=ae.isPointLight===!0?se.customDistanceMaterial:se.customDepthMaterial;if($t!==void 0)Ct=$t;else if(Ct=ae.isPointLight===!0?c:u,t.localClippingEnabled&&ct.clipShadows===!0&&Array.isArray(ct.clippingPlanes)&&ct.clippingPlanes.length!==0||ct.displacementMap&&ct.displacementScale!==0||ct.alphaMap&&ct.alphaTest>0||ct.map&&ct.alphaTest>0||ct.alphaToCoverage===!0){const jo=Ct.uuid,Lp=ct.uuid;let Mn=h[jo];Mn===void 0&&(Mn={},h[jo]=Mn);let sa=Mn[Lp];sa===void 0&&(sa=Ct.clone(),Mn[Lp]=sa,ct.addEventListener("dispose",ie)),Ct=sa}if(Ct.visible=ct.visible,Ct.wireframe=ct.wireframe,st===en?Ct.side=ct.shadowSide!==null?ct.shadowSide:ct.side:Ct.side=ct.shadowSide!==null?ct.shadowSide:g[ct.side],Ct.alphaMap=ct.alphaMap,Ct.alphaTest=ct.alphaToCoverage===!0?.5:ct.alphaTest,Ct.map=ct.map,Ct.clipShadows=ct.clipShadows,Ct.clippingPlanes=ct.clippingPlanes,Ct.clipIntersection=ct.clipIntersection,Ct.displacementMap=ct.displacementMap,Ct.displacementScale=ct.displacementScale,Ct.displacementBias=ct.displacementBias,Ct.wireframeLinewidth=ct.wireframeLinewidth,Ct.linewidth=ct.linewidth,ae.isPointLight===!0&&Ct.isMeshDistanceMaterial===!0){const jo=t.properties.get(Ct);jo.light=ae}return Ct}function Y(se,ct,ae,st,Ct){if(se.visible===!1)return;if(se.layers.test(ct.layers)&&(se.isMesh||se.isLine||se.isPoints)&&(se.castShadow||se.receiveShadow&&Ct===en)&&(!se.frustumCulled||n.intersectsObject(se))){se.modelViewMatrix.multiplyMatrices(ae.matrixWorldInverse,se.matrixWorld);const jo=e.update(se),Lp=se.material;if(Array.isArray(Lp)){const Mn=jo.groups;for(let sa=0,re=Mn.length;sa<re;sa++){const $o=Mn[sa],qo=Lp[$o.materialIndex];if(qo&&qo.visible){const Kt=V(se,qo,st,Ct);se.onBeforeShadow(t,se,ct,ae,jo,Kt,$o),t.renderBufferDirect(ae,null,jo,Kt,se,$o),se.onAfterShadow(t,se,ct,ae,jo,Kt,$o)}}}else if(Lp.visible){const Mn=V(se,Lp,st,Ct);se.onBeforeShadow(t,se,ct,ae,jo,Mn,null),t.renderBufferDirect(ae,null,jo,Mn,se,null),se.onAfterShadow(t,se,ct,ae,jo,Mn,null)}}const $t=se.children;for(let jo=0,Lp=$t.length;jo<Lp;jo++)Y($t[jo],ct,ae,st,Ct)}function ie(se){se.target.removeEventListener("dispose",ie);for(const ct in h){const ae=h[ct],st=se.target.uuid;st in ae&&(ae[st].dispose(),delete ae[st])}}}const $f={[ss]:as,[os]:hs,[ls]:us,[ii]:cs,[as]:ss,[hs]:os,[us]:ls,[cs]:ii};function Jf(t,e){function r(){let pm=!1;const S1=new oe;let U1=null;const J1=new oe(0,0,0,0);return{setMask:function(l1){U1!==l1&&!pm&&(t.colorMask(l1,l1,l1,l1),U1=l1)},setLocked:function(l1){pm=l1},setClear:function(l1,Km,A1,y1,uv){uv===!0&&(l1*=y1,Km*=y1,A1*=y1),S1.set(l1,Km,A1,y1),J1.equals(S1)===!1&&(t.clearColor(l1,Km,A1,y1),J1.copy(S1))},reset:function(){pm=!1,U1=null,J1.set(-1,0,0,0)}}}function n(){let pm=!1,S1=!1,U1=null,J1=null,l1=null;return{setReversed:function(Km){if(S1!==Km){const A1=e.get("EXT_clip_control");Km?A1.clipControlEXT(A1.LOWER_LEFT_EXT,A1.ZERO_TO_ONE_EXT):A1.clipControlEXT(A1.LOWER_LEFT_EXT,A1.NEGATIVE_ONE_TO_ONE_EXT),S1=Km;const y1=l1;l1=null,this.setClear(y1)}},getReversed:function(){return S1},setTest:function(Km){Km?v0(t.DEPTH_TEST):p0(t.DEPTH_TEST)},setMask:function(Km){U1!==Km&&!pm&&(t.depthMask(Km),U1=Km)},setFunc:function(Km){if(S1&&(Km=$f[Km]),J1!==Km){switch(Km){case ss:t.depthFunc(t.NEVER);break;case as:t.depthFunc(t.ALWAYS);break;case os:t.depthFunc(t.LESS);break;case ii:t.depthFunc(t.LEQUAL);break;case ls:t.depthFunc(t.EQUAL);break;case cs:t.depthFunc(t.GEQUAL);break;case hs:t.depthFunc(t.GREATER);break;case us:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}J1=Km}},setLocked:function(Km){pm=Km},setClear:function(Km){l1!==Km&&(S1&&(Km=1-Km),t.clearDepth(Km),l1=Km)},reset:function(){pm=!1,U1=null,J1=null,l1=null,S1=!1}}}function a(){let pm=!1,S1=null,U1=null,J1=null,l1=null,Km=null,A1=null,y1=null,uv=null;return{setTest:function($g){pm||($g?v0(t.STENCIL_TEST):p0(t.STENCIL_TEST))},setMask:function($g){S1!==$g&&!pm&&(t.stencilMask($g),S1=$g)},setFunc:function($g,Sv,Yv){(U1!==$g||J1!==Sv||l1!==Yv)&&(t.stencilFunc($g,Sv,Yv),U1=$g,J1=Sv,l1=Yv)},setOp:function($g,Sv,Yv){(Km!==$g||A1!==Sv||y1!==Yv)&&(t.stencilOp($g,Sv,Yv),Km=$g,A1=Sv,y1=Yv)},setLocked:function($g){pm=$g},setClear:function($g){uv!==$g&&(t.clearStencil($g),uv=$g)},reset:function(){pm=!1,S1=null,U1=null,J1=null,l1=null,Km=null,A1=null,y1=null,uv=null}}}const o=new r,l=new n,u=new a,c=new WeakMap,h=new WeakMap;let v={},g={},T=new WeakMap,R=[],W=null,k=!1,J=null,q=null,Se=null,V=null,Y=null,ie=null,se=null,ct=new qt(0,0,0),ae=0,st=!1,Ct=null,$t=null,jo=null,Lp=null,Mn=null;const sa=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let re=!1,$o=0;const qo=t.getParameter(t.VERSION);qo.indexOf("WebGL")!==-1?($o=parseFloat(/^WebGL (\d)/.exec(qo)[1]),re=$o>=1):qo.indexOf("OpenGL ES")!==-1&&($o=parseFloat(/^OpenGL ES (\d)/.exec(qo)[1]),re=$o>=2);let Kt=null,i0={};const Up=t.getParameter(t.SCISSOR_BOX),l0=t.getParameter(t.VIEWPORT),y0=new oe().fromArray(Up),kp=new oe().fromArray(l0);function u0(pm,S1,U1,J1){const l1=new Uint8Array(4),Km=t.createTexture();t.bindTexture(pm,Km),t.texParameteri(pm,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(pm,t.TEXTURE_MAG_FILTER,t.NEAREST);for(let A1=0;A1<U1;A1++)pm===t.TEXTURE_3D||pm===t.TEXTURE_2D_ARRAY?t.texImage3D(S1,0,t.RGBA,1,1,J1,0,t.RGBA,t.UNSIGNED_BYTE,l1):t.texImage2D(S1+A1,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,l1);return Km}const f0={};f0[t.TEXTURE_2D]=u0(t.TEXTURE_2D,t.TEXTURE_2D,1),f0[t.TEXTURE_CUBE_MAP]=u0(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),f0[t.TEXTURE_2D_ARRAY]=u0(t.TEXTURE_2D_ARRAY,t.TEXTURE_2D_ARRAY,1,1),f0[t.TEXTURE_3D]=u0(t.TEXTURE_3D,t.TEXTURE_3D,1,1),o.setClear(0,0,0,1),l.setClear(1),u.setClear(0),v0(t.DEPTH_TEST),l.setFunc(ii),I1(!1),p1(ua),v0(t.CULL_FACE),f1(mn);function v0(pm){v[pm]!==!0&&(t.enable(pm),v[pm]=!0)}function p0(pm){v[pm]!==!1&&(t.disable(pm),v[pm]=!1)}function rm(pm,S1){return g[pm]!==S1?(t.bindFramebuffer(pm,S1),g[pm]=S1,pm===t.DRAW_FRAMEBUFFER&&(g[t.FRAMEBUFFER]=S1),pm===t.FRAMEBUFFER&&(g[t.DRAW_FRAMEBUFFER]=S1),!0):!1}function am(pm,S1){let U1=R,J1=!1;if(pm){U1=T.get(S1),U1===void 0&&(U1=[],T.set(S1,U1));const l1=pm.textures;if(U1.length!==l1.length||U1[0]!==t.COLOR_ATTACHMENT0){for(let Km=0,A1=l1.length;Km<A1;Km++)U1[Km]=t.COLOR_ATTACHMENT0+Km;U1.length=l1.length,J1=!0}}else U1[0]!==t.BACK&&(U1[0]=t.BACK,J1=!0);J1&&t.drawBuffers(U1)}function ym(pm){return W!==pm?(t.useProgram(pm),W=pm,!0):!1}const Wm={[wn]:t.FUNC_ADD,[nl]:t.FUNC_SUBTRACT,[il]:t.FUNC_REVERSE_SUBTRACT};Wm[rl]=t.MIN,Wm[sl]=t.MAX;const h0={[al]:t.ZERO,[ol]:t.ONE,[ll]:t.SRC_COLOR,[is]:t.SRC_ALPHA,[pl]:t.SRC_ALPHA_SATURATE,[dl]:t.DST_COLOR,[hl]:t.DST_ALPHA,[cl]:t.ONE_MINUS_SRC_COLOR,[rs]:t.ONE_MINUS_SRC_ALPHA,[fl]:t.ONE_MINUS_DST_COLOR,[ul]:t.ONE_MINUS_DST_ALPHA,[ml]:t.CONSTANT_COLOR,[_l]:t.ONE_MINUS_CONSTANT_COLOR,[gl]:t.CONSTANT_ALPHA,[vl]:t.ONE_MINUS_CONSTANT_ALPHA};function f1(pm,S1,U1,J1,l1,Km,A1,y1,uv,$g){if(pm===mn){k===!0&&(p0(t.BLEND),k=!1);return}if(k===!1&&(v0(t.BLEND),k=!0),pm!==el){if(pm!==J||$g!==st){if((q!==wn||Y!==wn)&&(t.blendEquation(t.FUNC_ADD),q=wn,Y=wn),$g)switch(pm){case ti:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case da:t.blendFunc(t.ONE,t.ONE);break;case fa:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case pa:t.blendFuncSeparate(t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ZERO,t.ONE);break;default:console.error("THREE.WebGLState: Invalid blending: ",pm);break}else switch(pm){case ti:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case da:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE,t.ONE,t.ONE);break;case fa:console.error("THREE.WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case pa:console.error("THREE.WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:console.error("THREE.WebGLState: Invalid blending: ",pm);break}Se=null,V=null,ie=null,se=null,ct.set(0,0,0),ae=0,J=pm,st=$g}return}l1=l1||S1,Km=Km||U1,A1=A1||J1,(S1!==q||l1!==Y)&&(t.blendEquationSeparate(Wm[S1],Wm[l1]),q=S1,Y=l1),(U1!==Se||J1!==V||Km!==ie||A1!==se)&&(t.blendFuncSeparate(h0[U1],h0[J1],h0[Km],h0[A1]),Se=U1,V=J1,ie=Km,se=A1),(y1.equals(ct)===!1||uv!==ae)&&(t.blendColor(y1.r,y1.g,y1.b,uv),ct.copy(y1),ae=uv),J=pm,st=!1}function T1(pm,S1){pm.side===Xe?p0(t.CULL_FACE):v0(t.CULL_FACE);let U1=pm.side===Te;S1&&(U1=!U1),I1(U1),pm.blending===ti&&pm.transparent===!1?f1(mn):f1(pm.blending,pm.blendEquation,pm.blendSrc,pm.blendDst,pm.blendEquationAlpha,pm.blendSrcAlpha,pm.blendDstAlpha,pm.blendColor,pm.blendAlpha,pm.premultipliedAlpha),l.setFunc(pm.depthFunc),l.setTest(pm.depthTest),l.setMask(pm.depthWrite),o.setMask(pm.colorWrite);const J1=pm.stencilWrite;u.setTest(J1),J1&&(u.setMask(pm.stencilWriteMask),u.setFunc(pm.stencilFunc,pm.stencilRef,pm.stencilFuncMask),u.setOp(pm.stencilFail,pm.stencilZFail,pm.stencilZPass)),m1(pm.polygonOffset,pm.polygonOffsetFactor,pm.polygonOffsetUnits),pm.alphaToCoverage===!0?v0(t.SAMPLE_ALPHA_TO_COVERAGE):p0(t.SAMPLE_ALPHA_TO_COVERAGE)}function I1(pm){Ct!==pm&&(pm?t.frontFace(t.CW):t.frontFace(t.CCW),Ct=pm)}function p1(pm){pm!==Jo?(v0(t.CULL_FACE),pm!==$t&&(pm===ua?t.cullFace(t.BACK):pm===Qo?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):p0(t.CULL_FACE),$t=pm}function Qm(pm){pm!==jo&&(re&&t.lineWidth(pm),jo=pm)}function m1(pm,S1,U1){pm?(v0(t.POLYGON_OFFSET_FILL),(Lp!==S1||Mn!==U1)&&(t.polygonOffset(S1,U1),Lp=S1,Mn=U1)):p0(t.POLYGON_OFFSET_FILL)}function W1(pm){pm?v0(t.SCISSOR_TEST):p0(t.SCISSOR_TEST)}function ug(pm){pm===void 0&&(pm=t.TEXTURE0+sa-1),Kt!==pm&&(t.activeTexture(pm),Kt=pm)}function ng(pm,S1,U1){U1===void 0&&(Kt===null?U1=t.TEXTURE0+sa-1:U1=Kt);let J1=i0[U1];J1===void 0&&(J1={type:void 0,texture:void 0},i0[U1]=J1),(J1.type!==pm||J1.texture!==S1)&&(Kt!==U1&&(t.activeTexture(U1),Kt=U1),t.bindTexture(pm,S1||f0[pm]),J1.type=pm,J1.texture=S1)}function Ko(){const pm=i0[Kt];pm!==void 0&&pm.type!==void 0&&(t.bindTexture(pm.type,null),pm.type=void 0,pm.texture=void 0)}function wi(){try{t.compressedTexImage2D(...arguments)}catch(pm){console.error("THREE.WebGLState:",pm)}}function S0(){try{t.compressedTexImage3D(...arguments)}catch(pm){console.error("THREE.WebGLState:",pm)}}function Z0(){try{t.texSubImage2D(...arguments)}catch(pm){console.error("THREE.WebGLState:",pm)}}function Pp(){try{t.texSubImage3D(...arguments)}catch(pm){console.error("THREE.WebGLState:",pm)}}function Ip(){try{t.compressedTexSubImage2D(...arguments)}catch(pm){console.error("THREE.WebGLState:",pm)}}function x0(){try{t.compressedTexSubImage3D(...arguments)}catch(pm){console.error("THREE.WebGLState:",pm)}}function B0(){try{t.texStorage2D(...arguments)}catch(pm){console.error("THREE.WebGLState:",pm)}}function Y0(){try{t.texStorage3D(...arguments)}catch(pm){console.error("THREE.WebGLState:",pm)}}function im(){try{t.texImage2D(...arguments)}catch(pm){console.error("THREE.WebGLState:",pm)}}function om(){try{t.texImage3D(...arguments)}catch(pm){console.error("THREE.WebGLState:",pm)}}function Cm(pm){y0.equals(pm)===!1&&(t.scissor(pm.x,pm.y,pm.z,pm.w),y0.copy(pm))}function r1(pm){kp.equals(pm)===!1&&(t.viewport(pm.x,pm.y,pm.z,pm.w),kp.copy(pm))}function Om(pm,S1){let U1=h.get(S1);U1===void 0&&(U1=new WeakMap,h.set(S1,U1));let J1=U1.get(pm);J1===void 0&&(J1=t.getUniformBlockIndex(S1,pm.name),U1.set(pm,J1))}function a1(pm,S1){const U1=h.get(S1).get(pm);c.get(S1)!==U1&&(t.uniformBlockBinding(S1,U1,pm.__bindingPointIndex),c.set(S1,U1))}function hg(){t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.blendFuncSeparate(t.ONE,t.ZERO,t.ONE,t.ZERO),t.blendColor(0,0,0,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(t.LESS),l.setReversed(!1),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.clearStencil(0),t.cullFace(t.BACK),t.frontFace(t.CCW),t.polygonOffset(0,0),t.activeTexture(t.TEXTURE0),t.bindFramebuffer(t.FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),v={},Kt=null,i0={},g={},T=new WeakMap,R=[],W=null,k=!1,J=null,q=null,Se=null,V=null,Y=null,ie=null,se=null,ct=new qt(0,0,0),ae=0,st=!1,Ct=null,$t=null,jo=null,Lp=null,Mn=null,y0.set(0,0,t.canvas.width,t.canvas.height),kp.set(0,0,t.canvas.width,t.canvas.height),o.reset(),l.reset(),u.reset()}return{buffers:{color:o,depth:l,stencil:u},enable:v0,disable:p0,bindFramebuffer:rm,drawBuffers:am,useProgram:ym,setBlending:f1,setMaterial:T1,setFlipSided:I1,setCullFace:p1,setLineWidth:Qm,setPolygonOffset:m1,setScissorTest:W1,activeTexture:ug,bindTexture:ng,unbindTexture:Ko,compressedTexImage2D:wi,compressedTexImage3D:S0,texImage2D:im,texImage3D:om,updateUBOMapping:Om,uniformBlockBinding:a1,texStorage2D:B0,texStorage3D:Y0,texSubImage2D:Z0,texSubImage3D:Pp,compressedTexSubImage2D:Ip,compressedTexSubImage3D:x0,scissor:Cm,viewport:r1,reset:hg}}function Qf(t,e,r,n,a,o,l){const u=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,c=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),h=new Bt,v=new WeakMap;let g;const T=new WeakMap;let R=!1;try{R=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function W(Ko,wi){return R?new OffscreenCanvas(Ko,wi):dr("canvas")}function k(Ko,wi,S0){let Z0=1;const Pp=ng(Ko);if((Pp.width>S0||Pp.height>S0)&&(Z0=S0/Math.max(Pp.width,Pp.height)),Z0<1)if(typeof HTMLImageElement<"u"&&Ko instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&Ko instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&Ko instanceof ImageBitmap||typeof VideoFrame<"u"&&Ko instanceof VideoFrame){const Ip=Math.floor(Z0*Pp.width),x0=Math.floor(Z0*Pp.height);g===void 0&&(g=W(Ip,x0));const B0=wi?W(Ip,x0):g;return B0.width=Ip,B0.height=x0,B0.getContext("2d").drawImage(Ko,0,0,Ip,x0),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Pp.width+"x"+Pp.height+") to ("+Ip+"x"+x0+")."),B0}else return"data"in Ko&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Pp.width+"x"+Pp.height+")."),Ko;return Ko}function J(Ko){return Ko.generateMipmaps}function q(Ko){t.generateMipmap(Ko)}function Se(Ko){return Ko.isWebGLCubeRenderTarget?t.TEXTURE_CUBE_MAP:Ko.isWebGL3DRenderTarget?t.TEXTURE_3D:Ko.isWebGLArrayRenderTarget||Ko.isCompressedArrayTexture?t.TEXTURE_2D_ARRAY:t.TEXTURE_2D}function V(Ko,wi,S0,Z0,Pp=!1){if(Ko!==null){if(t[Ko]!==void 0)return t[Ko];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Ko+"'")}let Ip=wi;if(wi===t.RED&&(S0===t.FLOAT&&(Ip=t.R32F),S0===t.HALF_FLOAT&&(Ip=t.R16F),S0===t.UNSIGNED_BYTE&&(Ip=t.R8)),wi===t.RED_INTEGER&&(S0===t.UNSIGNED_BYTE&&(Ip=t.R8UI),S0===t.UNSIGNED_SHORT&&(Ip=t.R16UI),S0===t.UNSIGNED_INT&&(Ip=t.R32UI),S0===t.BYTE&&(Ip=t.R8I),S0===t.SHORT&&(Ip=t.R16I),S0===t.INT&&(Ip=t.R32I)),wi===t.RG&&(S0===t.FLOAT&&(Ip=t.RG32F),S0===t.HALF_FLOAT&&(Ip=t.RG16F),S0===t.UNSIGNED_BYTE&&(Ip=t.RG8)),wi===t.RG_INTEGER&&(S0===t.UNSIGNED_BYTE&&(Ip=t.RG8UI),S0===t.UNSIGNED_SHORT&&(Ip=t.RG16UI),S0===t.UNSIGNED_INT&&(Ip=t.RG32UI),S0===t.BYTE&&(Ip=t.RG8I),S0===t.SHORT&&(Ip=t.RG16I),S0===t.INT&&(Ip=t.RG32I)),wi===t.RGB_INTEGER&&(S0===t.UNSIGNED_BYTE&&(Ip=t.RGB8UI),S0===t.UNSIGNED_SHORT&&(Ip=t.RGB16UI),S0===t.UNSIGNED_INT&&(Ip=t.RGB32UI),S0===t.BYTE&&(Ip=t.RGB8I),S0===t.SHORT&&(Ip=t.RGB16I),S0===t.INT&&(Ip=t.RGB32I)),wi===t.RGBA_INTEGER&&(S0===t.UNSIGNED_BYTE&&(Ip=t.RGBA8UI),S0===t.UNSIGNED_SHORT&&(Ip=t.RGBA16UI),S0===t.UNSIGNED_INT&&(Ip=t.RGBA32UI),S0===t.BYTE&&(Ip=t.RGBA8I),S0===t.SHORT&&(Ip=t.RGBA16I),S0===t.INT&&(Ip=t.RGBA32I)),wi===t.RGB&&(S0===t.UNSIGNED_INT_5_9_9_9_REV&&(Ip=t.RGB9_E5),S0===t.UNSIGNED_INT_10F_11F_11F_REV&&(Ip=t.R11F_G11F_B10F)),wi===t.RGBA){const x0=Pp?hr:Xt.getTransfer(Z0);S0===t.FLOAT&&(Ip=t.RGBA32F),S0===t.HALF_FLOAT&&(Ip=t.RGBA16F),S0===t.UNSIGNED_BYTE&&(Ip=x0===Jt?t.SRGB8_ALPHA8:t.RGBA8),S0===t.UNSIGNED_SHORT_4_4_4_4&&(Ip=t.RGBA4),S0===t.UNSIGNED_SHORT_5_5_5_1&&(Ip=t.RGB5_A1)}return(Ip===t.R16F||Ip===t.R32F||Ip===t.RG16F||Ip===t.RG32F||Ip===t.RGBA16F||Ip===t.RGBA32F)&&e.get("EXT_color_buffer_float"),Ip}function Y(Ko,wi){let S0;return Ko?wi===null||wi===Ln||wi===xi?S0=t.DEPTH24_STENCIL8:wi===nn?S0=t.DEPTH32F_STENCIL8:wi===vi&&(S0=t.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):wi===null||wi===Ln||wi===xi?S0=t.DEPTH_COMPONENT24:wi===nn?S0=t.DEPTH_COMPONENT32F:wi===vi&&(S0=t.DEPTH_COMPONENT16),S0}function ie(Ko,wi){return J(Ko)===!0||Ko.isFramebufferTexture&&Ko.minFilter!==Ge&&Ko.minFilter!==Ye?Math.log2(Math.max(wi.width,wi.height))+1:Ko.mipmaps!==void 0&&Ko.mipmaps.length>0?Ko.mipmaps.length:Ko.isCompressedTexture&&Array.isArray(Ko.image)?wi.mipmaps.length:1}function se(Ko){const wi=Ko.target;wi.removeEventListener("dispose",se),ae(wi),wi.isVideoTexture&&v.delete(wi)}function ct(Ko){const wi=Ko.target;wi.removeEventListener("dispose",ct),Ct(wi)}function ae(Ko){const wi=n.get(Ko);if(wi.__webglInit===void 0)return;const S0=Ko.source,Z0=T.get(S0);if(Z0){const Pp=Z0[wi.__cacheKey];Pp.usedTimes--,Pp.usedTimes===0&&st(Ko),Object.keys(Z0).length===0&&T.delete(S0)}n.remove(Ko)}function st(Ko){const wi=n.get(Ko);t.deleteTexture(wi.__webglTexture);const S0=Ko.source,Z0=T.get(S0);delete Z0[wi.__cacheKey],l.memory.textures--}function Ct(Ko){const wi=n.get(Ko);if(Ko.depthTexture&&(Ko.depthTexture.dispose(),n.remove(Ko.depthTexture)),Ko.isWebGLCubeRenderTarget)for(let Z0=0;Z0<6;Z0++){if(Array.isArray(wi.__webglFramebuffer[Z0]))for(let Pp=0;Pp<wi.__webglFramebuffer[Z0].length;Pp++)t.deleteFramebuffer(wi.__webglFramebuffer[Z0][Pp]);else t.deleteFramebuffer(wi.__webglFramebuffer[Z0]);wi.__webglDepthbuffer&&t.deleteRenderbuffer(wi.__webglDepthbuffer[Z0])}else{if(Array.isArray(wi.__webglFramebuffer))for(let Z0=0;Z0<wi.__webglFramebuffer.length;Z0++)t.deleteFramebuffer(wi.__webglFramebuffer[Z0]);else t.deleteFramebuffer(wi.__webglFramebuffer);if(wi.__webglDepthbuffer&&t.deleteRenderbuffer(wi.__webglDepthbuffer),wi.__webglMultisampledFramebuffer&&t.deleteFramebuffer(wi.__webglMultisampledFramebuffer),wi.__webglColorRenderbuffer)for(let Z0=0;Z0<wi.__webglColorRenderbuffer.length;Z0++)wi.__webglColorRenderbuffer[Z0]&&t.deleteRenderbuffer(wi.__webglColorRenderbuffer[Z0]);wi.__webglDepthRenderbuffer&&t.deleteRenderbuffer(wi.__webglDepthRenderbuffer)}const S0=Ko.textures;for(let Z0=0,Pp=S0.length;Z0<Pp;Z0++){const Ip=n.get(S0[Z0]);Ip.__webglTexture&&(t.deleteTexture(Ip.__webglTexture),l.memory.textures--),n.remove(S0[Z0])}n.remove(Ko)}let $t=0;function jo(){$t=0}function Lp(){const Ko=$t;return Ko>=a.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+Ko+" texture units while this GPU supports only "+a.maxTextures),$t+=1,Ko}function Mn(Ko){const wi=[];return wi.push(Ko.wrapS),wi.push(Ko.wrapT),wi.push(Ko.wrapR||0),wi.push(Ko.magFilter),wi.push(Ko.minFilter),wi.push(Ko.anisotropy),wi.push(Ko.internalFormat),wi.push(Ko.format),wi.push(Ko.type),wi.push(Ko.generateMipmaps),wi.push(Ko.premultiplyAlpha),wi.push(Ko.flipY),wi.push(Ko.unpackAlignment),wi.push(Ko.colorSpace),wi.join()}function sa(Ko,wi){const S0=n.get(Ko);if(Ko.isVideoTexture&&W1(Ko),Ko.isRenderTargetTexture===!1&&Ko.isExternalTexture!==!0&&Ko.version>0&&S0.__version!==Ko.version){const Z0=Ko.image;if(Z0===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Z0.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{f0(S0,Ko,wi);return}}else Ko.isExternalTexture&&(S0.__webglTexture=Ko.sourceTexture?Ko.sourceTexture:null);r.bindTexture(t.TEXTURE_2D,S0.__webglTexture,t.TEXTURE0+wi)}function re(Ko,wi){const S0=n.get(Ko);if(Ko.isRenderTargetTexture===!1&&Ko.version>0&&S0.__version!==Ko.version){f0(S0,Ko,wi);return}r.bindTexture(t.TEXTURE_2D_ARRAY,S0.__webglTexture,t.TEXTURE0+wi)}function $o(Ko,wi){const S0=n.get(Ko);if(Ko.isRenderTargetTexture===!1&&Ko.version>0&&S0.__version!==Ko.version){f0(S0,Ko,wi);return}r.bindTexture(t.TEXTURE_3D,S0.__webglTexture,t.TEXTURE0+wi)}function qo(Ko,wi){const S0=n.get(Ko);if(Ko.version>0&&S0.__version!==Ko.version){v0(S0,Ko,wi);return}r.bindTexture(t.TEXTURE_CUBE_MAP,S0.__webglTexture,t.TEXTURE0+wi)}const Kt={[ps]:t.REPEAT,[Pn]:t.CLAMP_TO_EDGE,[ms]:t.MIRRORED_REPEAT},i0={[Ge]:t.NEAREST,[wl]:t.NEAREST_MIPMAP_NEAREST,[Pi]:t.NEAREST_MIPMAP_LINEAR,[Ye]:t.LINEAR,[yr]:t.LINEAR_MIPMAP_NEAREST,[Dn]:t.LINEAR_MIPMAP_LINEAR},Up={[Ul]:t.NEVER,[zl]:t.ALWAYS,[Il]:t.LESS,[Ro]:t.LEQUAL,[Nl]:t.EQUAL,[Bl]:t.GEQUAL,[Fl]:t.GREATER,[Ol]:t.NOTEQUAL};function l0(Ko,wi){if(wi.type===nn&&e.has("OES_texture_float_linear")===!1&&(wi.magFilter===Ye||wi.magFilter===yr||wi.magFilter===Pi||wi.magFilter===Dn||wi.minFilter===Ye||wi.minFilter===yr||wi.minFilter===Pi||wi.minFilter===Dn)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),t.texParameteri(Ko,t.TEXTURE_WRAP_S,Kt[wi.wrapS]),t.texParameteri(Ko,t.TEXTURE_WRAP_T,Kt[wi.wrapT]),(Ko===t.TEXTURE_3D||Ko===t.TEXTURE_2D_ARRAY)&&t.texParameteri(Ko,t.TEXTURE_WRAP_R,Kt[wi.wrapR]),t.texParameteri(Ko,t.TEXTURE_MAG_FILTER,i0[wi.magFilter]),t.texParameteri(Ko,t.TEXTURE_MIN_FILTER,i0[wi.minFilter]),wi.compareFunction&&(t.texParameteri(Ko,t.TEXTURE_COMPARE_MODE,t.COMPARE_REF_TO_TEXTURE),t.texParameteri(Ko,t.TEXTURE_COMPARE_FUNC,Up[wi.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(wi.magFilter===Ge||wi.minFilter!==Pi&&wi.minFilter!==Dn||wi.type===nn&&e.has("OES_texture_float_linear")===!1)return;if(wi.anisotropy>1||n.get(wi).__currentAnisotropy){const S0=e.get("EXT_texture_filter_anisotropic");t.texParameterf(Ko,S0.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(wi.anisotropy,a.getMaxAnisotropy())),n.get(wi).__currentAnisotropy=wi.anisotropy}}}function y0(Ko,wi){let S0=!1;Ko.__webglInit===void 0&&(Ko.__webglInit=!0,wi.addEventListener("dispose",se));const Z0=wi.source;let Pp=T.get(Z0);Pp===void 0&&(Pp={},T.set(Z0,Pp));const Ip=Mn(wi);if(Ip!==Ko.__cacheKey){Pp[Ip]===void 0&&(Pp[Ip]={texture:t.createTexture(),usedTimes:0},l.memory.textures++,S0=!0),Pp[Ip].usedTimes++;const x0=Pp[Ko.__cacheKey];x0!==void 0&&(Pp[Ko.__cacheKey].usedTimes--,x0.usedTimes===0&&st(wi)),Ko.__cacheKey=Ip,Ko.__webglTexture=Pp[Ip].texture}return S0}function kp(Ko,wi,S0){return Math.floor(Math.floor(Ko/S0)/wi)}function u0(Ko,wi,S0,Z0){const Pp=Ko.updateRanges;if(Pp.length===0)r.texSubImage2D(t.TEXTURE_2D,0,0,0,wi.width,wi.height,S0,Z0,wi.data);else{Pp.sort((im,om)=>im.start-om.start);let Ip=0;for(let im=1;im<Pp.length;im++){const om=Pp[Ip],Cm=Pp[im],r1=om.start+om.count,Om=kp(Cm.start,wi.width,4),a1=kp(om.start,wi.width,4);Cm.start<=r1+1&&Om===a1&&kp(Cm.start+Cm.count-1,wi.width,4)===Om?om.count=Math.max(om.count,Cm.start+Cm.count-om.start):(++Ip,Pp[Ip]=Cm)}Pp.length=Ip+1;const x0=t.getParameter(t.UNPACK_ROW_LENGTH),B0=t.getParameter(t.UNPACK_SKIP_PIXELS),Y0=t.getParameter(t.UNPACK_SKIP_ROWS);t.pixelStorei(t.UNPACK_ROW_LENGTH,wi.width);for(let im=0,om=Pp.length;im<om;im++){const Cm=Pp[im],r1=Math.floor(Cm.start/4),Om=Math.ceil(Cm.count/4),a1=r1%wi.width,hg=Math.floor(r1/wi.width),pm=Om;t.pixelStorei(t.UNPACK_SKIP_PIXELS,a1),t.pixelStorei(t.UNPACK_SKIP_ROWS,hg),r.texSubImage2D(t.TEXTURE_2D,0,a1,hg,pm,1,S0,Z0,wi.data)}Ko.clearUpdateRanges(),t.pixelStorei(t.UNPACK_ROW_LENGTH,x0),t.pixelStorei(t.UNPACK_SKIP_PIXELS,B0),t.pixelStorei(t.UNPACK_SKIP_ROWS,Y0)}}function f0(Ko,wi,S0){let Z0=t.TEXTURE_2D;(wi.isDataArrayTexture||wi.isCompressedArrayTexture)&&(Z0=t.TEXTURE_2D_ARRAY),wi.isData3DTexture&&(Z0=t.TEXTURE_3D);const Pp=y0(Ko,wi),Ip=wi.source;r.bindTexture(Z0,Ko.__webglTexture,t.TEXTURE0+S0);const x0=n.get(Ip);if(Ip.version!==x0.__version||Pp===!0){r.activeTexture(t.TEXTURE0+S0);const B0=Xt.getPrimaries(Xt.workingColorSpace),Y0=wi.colorSpace===pn?null:Xt.getPrimaries(wi.colorSpace),im=wi.colorSpace===pn||B0===Y0?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,wi.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,wi.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,wi.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,im);let om=k(wi.image,!1,a.maxTextureSize);om=ug(wi,om);const Cm=o.convert(wi.format,wi.colorSpace),r1=o.convert(wi.type);let Om=V(wi.internalFormat,Cm,r1,wi.colorSpace,wi.isVideoTexture);l0(Z0,wi);let a1;const hg=wi.mipmaps,pm=wi.isVideoTexture!==!0,S1=x0.__version===void 0||Pp===!0,U1=Ip.dataReady,J1=ie(wi,om);if(wi.isDepthTexture)Om=Y(wi.format===Si,wi.type),S1&&(pm?r.texStorage2D(t.TEXTURE_2D,1,Om,om.width,om.height):r.texImage2D(t.TEXTURE_2D,0,Om,om.width,om.height,0,Cm,r1,null));else if(wi.isDataTexture)if(hg.length>0){pm&&S1&&r.texStorage2D(t.TEXTURE_2D,J1,Om,hg[0].width,hg[0].height);for(let l1=0,Km=hg.length;l1<Km;l1++)a1=hg[l1],pm?U1&&r.texSubImage2D(t.TEXTURE_2D,l1,0,0,a1.width,a1.height,Cm,r1,a1.data):r.texImage2D(t.TEXTURE_2D,l1,Om,a1.width,a1.height,0,Cm,r1,a1.data);wi.generateMipmaps=!1}else pm?(S1&&r.texStorage2D(t.TEXTURE_2D,J1,Om,om.width,om.height),U1&&u0(wi,om,Cm,r1)):r.texImage2D(t.TEXTURE_2D,0,Om,om.width,om.height,0,Cm,r1,om.data);else if(wi.isCompressedTexture)if(wi.isCompressedArrayTexture){pm&&S1&&r.texStorage3D(t.TEXTURE_2D_ARRAY,J1,Om,hg[0].width,hg[0].height,om.depth);for(let l1=0,Km=hg.length;l1<Km;l1++)if(a1=hg[l1],wi.format!==Ve)if(Cm!==null)if(pm){if(U1)if(wi.layerUpdates.size>0){const A1=Ga(a1.width,a1.height,wi.format,wi.type);for(const y1 of wi.layerUpdates){const uv=a1.data.subarray(y1*A1/a1.data.BYTES_PER_ELEMENT,(y1+1)*A1/a1.data.BYTES_PER_ELEMENT);r.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,l1,0,0,y1,a1.width,a1.height,1,Cm,uv)}wi.clearLayerUpdates()}else r.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,l1,0,0,0,a1.width,a1.height,om.depth,Cm,a1.data)}else r.compressedTexImage3D(t.TEXTURE_2D_ARRAY,l1,Om,a1.width,a1.height,om.depth,0,a1.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else pm?U1&&r.texSubImage3D(t.TEXTURE_2D_ARRAY,l1,0,0,0,a1.width,a1.height,om.depth,Cm,r1,a1.data):r.texImage3D(t.TEXTURE_2D_ARRAY,l1,Om,a1.width,a1.height,om.depth,0,Cm,r1,a1.data)}else{pm&&S1&&r.texStorage2D(t.TEXTURE_2D,J1,Om,hg[0].width,hg[0].height);for(let l1=0,Km=hg.length;l1<Km;l1++)a1=hg[l1],wi.format!==Ve?Cm!==null?pm?U1&&r.compressedTexSubImage2D(t.TEXTURE_2D,l1,0,0,a1.width,a1.height,Cm,a1.data):r.compressedTexImage2D(t.TEXTURE_2D,l1,Om,a1.width,a1.height,0,a1.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):pm?U1&&r.texSubImage2D(t.TEXTURE_2D,l1,0,0,a1.width,a1.height,Cm,r1,a1.data):r.texImage2D(t.TEXTURE_2D,l1,Om,a1.width,a1.height,0,Cm,r1,a1.data)}else if(wi.isDataArrayTexture)if(pm){if(S1&&r.texStorage3D(t.TEXTURE_2D_ARRAY,J1,Om,om.width,om.height,om.depth),U1)if(wi.layerUpdates.size>0){const l1=Ga(om.width,om.height,wi.format,wi.type);for(const Km of wi.layerUpdates){const A1=om.data.subarray(Km*l1/om.data.BYTES_PER_ELEMENT,(Km+1)*l1/om.data.BYTES_PER_ELEMENT);r.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,Km,om.width,om.height,1,Cm,r1,A1)}wi.clearLayerUpdates()}else r.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,0,om.width,om.height,om.depth,Cm,r1,om.data)}else r.texImage3D(t.TEXTURE_2D_ARRAY,0,Om,om.width,om.height,om.depth,0,Cm,r1,om.data);else if(wi.isData3DTexture)pm?(S1&&r.texStorage3D(t.TEXTURE_3D,J1,Om,om.width,om.height,om.depth),U1&&r.texSubImage3D(t.TEXTURE_3D,0,0,0,0,om.width,om.height,om.depth,Cm,r1,om.data)):r.texImage3D(t.TEXTURE_3D,0,Om,om.width,om.height,om.depth,0,Cm,r1,om.data);else if(wi.isFramebufferTexture){if(S1)if(pm)r.texStorage2D(t.TEXTURE_2D,J1,Om,om.width,om.height);else{let l1=om.width,Km=om.height;for(let A1=0;A1<J1;A1++)r.texImage2D(t.TEXTURE_2D,A1,Om,l1,Km,0,Cm,r1,null),l1>>=1,Km>>=1}}else if(hg.length>0){if(pm&&S1){const l1=ng(hg[0]);r.texStorage2D(t.TEXTURE_2D,J1,Om,l1.width,l1.height)}for(let l1=0,Km=hg.length;l1<Km;l1++)a1=hg[l1],pm?U1&&r.texSubImage2D(t.TEXTURE_2D,l1,0,0,Cm,r1,a1):r.texImage2D(t.TEXTURE_2D,l1,Om,Cm,r1,a1);wi.generateMipmaps=!1}else if(pm){if(S1){const l1=ng(om);r.texStorage2D(t.TEXTURE_2D,J1,Om,l1.width,l1.height)}U1&&r.texSubImage2D(t.TEXTURE_2D,0,0,0,Cm,r1,om)}else r.texImage2D(t.TEXTURE_2D,0,Om,Cm,r1,om);J(wi)&&q(Z0),x0.__version=Ip.version,wi.onUpdate&&wi.onUpdate(wi)}Ko.__version=wi.version}function v0(Ko,wi,S0){if(wi.image.length!==6)return;const Z0=y0(Ko,wi),Pp=wi.source;r.bindTexture(t.TEXTURE_CUBE_MAP,Ko.__webglTexture,t.TEXTURE0+S0);const Ip=n.get(Pp);if(Pp.version!==Ip.__version||Z0===!0){r.activeTexture(t.TEXTURE0+S0);const x0=Xt.getPrimaries(Xt.workingColorSpace),B0=wi.colorSpace===pn?null:Xt.getPrimaries(wi.colorSpace),Y0=wi.colorSpace===pn||x0===B0?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,wi.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,wi.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,wi.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,Y0);const im=wi.isCompressedTexture||wi.image[0].isCompressedTexture,om=wi.image[0]&&wi.image[0].isDataTexture,Cm=[];for(let Km=0;Km<6;Km++)!im&&!om?Cm[Km]=k(wi.image[Km],!0,a.maxCubemapSize):Cm[Km]=om?wi.image[Km].image:wi.image[Km],Cm[Km]=ug(wi,Cm[Km]);const r1=Cm[0],Om=o.convert(wi.format,wi.colorSpace),a1=o.convert(wi.type),hg=V(wi.internalFormat,Om,a1,wi.colorSpace),pm=wi.isVideoTexture!==!0,S1=Ip.__version===void 0||Z0===!0,U1=Pp.dataReady;let J1=ie(wi,r1);l0(t.TEXTURE_CUBE_MAP,wi);let l1;if(im){pm&&S1&&r.texStorage2D(t.TEXTURE_CUBE_MAP,J1,hg,r1.width,r1.height);for(let Km=0;Km<6;Km++){l1=Cm[Km].mipmaps;for(let A1=0;A1<l1.length;A1++){const y1=l1[A1];wi.format!==Ve?Om!==null?pm?U1&&r.compressedTexSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Km,A1,0,0,y1.width,y1.height,Om,y1.data):r.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Km,A1,hg,y1.width,y1.height,0,y1.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):pm?U1&&r.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Km,A1,0,0,y1.width,y1.height,Om,a1,y1.data):r.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Km,A1,hg,y1.width,y1.height,0,Om,a1,y1.data)}}}else{if(l1=wi.mipmaps,pm&&S1){l1.length>0&&J1++;const Km=ng(Cm[0]);r.texStorage2D(t.TEXTURE_CUBE_MAP,J1,hg,Km.width,Km.height)}for(let Km=0;Km<6;Km++)if(om){pm?U1&&r.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Km,0,0,0,Cm[Km].width,Cm[Km].height,Om,a1,Cm[Km].data):r.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Km,0,hg,Cm[Km].width,Cm[Km].height,0,Om,a1,Cm[Km].data);for(let A1=0;A1<l1.length;A1++){const y1=l1[A1].image[Km].image;pm?U1&&r.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Km,A1+1,0,0,y1.width,y1.height,Om,a1,y1.data):r.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Km,A1+1,hg,y1.width,y1.height,0,Om,a1,y1.data)}}else{pm?U1&&r.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Km,0,0,0,Om,a1,Cm[Km]):r.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Km,0,hg,Om,a1,Cm[Km]);for(let A1=0;A1<l1.length;A1++){const y1=l1[A1];pm?U1&&r.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Km,A1+1,0,0,Om,a1,y1.image[Km]):r.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Km,A1+1,hg,Om,a1,y1.image[Km])}}}J(wi)&&q(t.TEXTURE_CUBE_MAP),Ip.__version=Pp.version,wi.onUpdate&&wi.onUpdate(wi)}Ko.__version=wi.version}function p0(Ko,wi,S0,Z0,Pp,Ip){const x0=o.convert(S0.format,S0.colorSpace),B0=o.convert(S0.type),Y0=V(S0.internalFormat,x0,B0,S0.colorSpace),im=n.get(wi),om=n.get(S0);if(om.__renderTarget=wi,!im.__hasExternalTextures){const Cm=Math.max(1,wi.width>>Ip),r1=Math.max(1,wi.height>>Ip);Pp===t.TEXTURE_3D||Pp===t.TEXTURE_2D_ARRAY?r.texImage3D(Pp,Ip,Y0,Cm,r1,wi.depth,0,x0,B0,null):r.texImage2D(Pp,Ip,Y0,Cm,r1,0,x0,B0,null)}r.bindFramebuffer(t.FRAMEBUFFER,Ko),m1(wi)?u.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,Z0,Pp,om.__webglTexture,0,Qm(wi)):(Pp===t.TEXTURE_2D||Pp>=t.TEXTURE_CUBE_MAP_POSITIVE_X&&Pp<=t.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&t.framebufferTexture2D(t.FRAMEBUFFER,Z0,Pp,om.__webglTexture,Ip),r.bindFramebuffer(t.FRAMEBUFFER,null)}function rm(Ko,wi,S0){if(t.bindRenderbuffer(t.RENDERBUFFER,Ko),wi.depthBuffer){const Z0=wi.depthTexture,Pp=Z0&&Z0.isDepthTexture?Z0.type:null,Ip=Y(wi.stencilBuffer,Pp),x0=wi.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,B0=Qm(wi);m1(wi)?u.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,B0,Ip,wi.width,wi.height):S0?t.renderbufferStorageMultisample(t.RENDERBUFFER,B0,Ip,wi.width,wi.height):t.renderbufferStorage(t.RENDERBUFFER,Ip,wi.width,wi.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,x0,t.RENDERBUFFER,Ko)}else{const Z0=wi.textures;for(let Pp=0;Pp<Z0.length;Pp++){const Ip=Z0[Pp],x0=o.convert(Ip.format,Ip.colorSpace),B0=o.convert(Ip.type),Y0=V(Ip.internalFormat,x0,B0,Ip.colorSpace),im=Qm(wi);S0&&m1(wi)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,im,Y0,wi.width,wi.height):m1(wi)?u.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,im,Y0,wi.width,wi.height):t.renderbufferStorage(t.RENDERBUFFER,Y0,wi.width,wi.height)}}t.bindRenderbuffer(t.RENDERBUFFER,null)}function am(Ko,wi){if(wi&&wi.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(r.bindFramebuffer(t.FRAMEBUFFER,Ko),!(wi.depthTexture&&wi.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const S0=n.get(wi.depthTexture);S0.__renderTarget=wi,(!S0.__webglTexture||wi.depthTexture.image.width!==wi.width||wi.depthTexture.image.height!==wi.height)&&(wi.depthTexture.image.width=wi.width,wi.depthTexture.image.height=wi.height,wi.depthTexture.needsUpdate=!0),sa(wi.depthTexture,0);const Z0=S0.__webglTexture,Pp=Qm(wi);if(wi.depthTexture.format===Mi)m1(wi)?u.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,Z0,0,Pp):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,Z0,0);else if(wi.depthTexture.format===Si)m1(wi)?u.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,Z0,0,Pp):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,Z0,0);else throw new Error("Unknown depthTexture format")}function ym(Ko){const wi=n.get(Ko),S0=Ko.isWebGLCubeRenderTarget===!0;if(wi.__boundDepthTexture!==Ko.depthTexture){const Z0=Ko.depthTexture;if(wi.__depthDisposeCallback&&wi.__depthDisposeCallback(),Z0){const Pp=()=>{delete wi.__boundDepthTexture,delete wi.__depthDisposeCallback,Z0.removeEventListener("dispose",Pp)};Z0.addEventListener("dispose",Pp),wi.__depthDisposeCallback=Pp}wi.__boundDepthTexture=Z0}if(Ko.depthTexture&&!wi.__autoAllocateDepthBuffer){if(S0)throw new Error("target.depthTexture not supported in Cube render targets");const Z0=Ko.texture.mipmaps;Z0&&Z0.length>0?am(wi.__webglFramebuffer[0],Ko):am(wi.__webglFramebuffer,Ko)}else if(S0){wi.__webglDepthbuffer=[];for(let Z0=0;Z0<6;Z0++)if(r.bindFramebuffer(t.FRAMEBUFFER,wi.__webglFramebuffer[Z0]),wi.__webglDepthbuffer[Z0]===void 0)wi.__webglDepthbuffer[Z0]=t.createRenderbuffer(),rm(wi.__webglDepthbuffer[Z0],Ko,!1);else{const Pp=Ko.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,Ip=wi.__webglDepthbuffer[Z0];t.bindRenderbuffer(t.RENDERBUFFER,Ip),t.framebufferRenderbuffer(t.FRAMEBUFFER,Pp,t.RENDERBUFFER,Ip)}}else{const Z0=Ko.texture.mipmaps;if(Z0&&Z0.length>0?r.bindFramebuffer(t.FRAMEBUFFER,wi.__webglFramebuffer[0]):r.bindFramebuffer(t.FRAMEBUFFER,wi.__webglFramebuffer),wi.__webglDepthbuffer===void 0)wi.__webglDepthbuffer=t.createRenderbuffer(),rm(wi.__webglDepthbuffer,Ko,!1);else{const Pp=Ko.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,Ip=wi.__webglDepthbuffer;t.bindRenderbuffer(t.RENDERBUFFER,Ip),t.framebufferRenderbuffer(t.FRAMEBUFFER,Pp,t.RENDERBUFFER,Ip)}}r.bindFramebuffer(t.FRAMEBUFFER,null)}function Wm(Ko,wi,S0){const Z0=n.get(Ko);wi!==void 0&&p0(Z0.__webglFramebuffer,Ko,Ko.texture,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,0),S0!==void 0&&ym(Ko)}function h0(Ko){const wi=Ko.texture,S0=n.get(Ko),Z0=n.get(wi);Ko.addEventListener("dispose",ct);const Pp=Ko.textures,Ip=Ko.isWebGLCubeRenderTarget===!0,x0=Pp.length>1;if(x0||(Z0.__webglTexture===void 0&&(Z0.__webglTexture=t.createTexture()),Z0.__version=wi.version,l.memory.textures++),Ip){S0.__webglFramebuffer=[];for(let B0=0;B0<6;B0++)if(wi.mipmaps&&wi.mipmaps.length>0){S0.__webglFramebuffer[B0]=[];for(let Y0=0;Y0<wi.mipmaps.length;Y0++)S0.__webglFramebuffer[B0][Y0]=t.createFramebuffer()}else S0.__webglFramebuffer[B0]=t.createFramebuffer()}else{if(wi.mipmaps&&wi.mipmaps.length>0){S0.__webglFramebuffer=[];for(let B0=0;B0<wi.mipmaps.length;B0++)S0.__webglFramebuffer[B0]=t.createFramebuffer()}else S0.__webglFramebuffer=t.createFramebuffer();if(x0)for(let B0=0,Y0=Pp.length;B0<Y0;B0++){const im=n.get(Pp[B0]);im.__webglTexture===void 0&&(im.__webglTexture=t.createTexture(),l.memory.textures++)}if(Ko.samples>0&&m1(Ko)===!1){S0.__webglMultisampledFramebuffer=t.createFramebuffer(),S0.__webglColorRenderbuffer=[],r.bindFramebuffer(t.FRAMEBUFFER,S0.__webglMultisampledFramebuffer);for(let B0=0;B0<Pp.length;B0++){const Y0=Pp[B0];S0.__webglColorRenderbuffer[B0]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,S0.__webglColorRenderbuffer[B0]);const im=o.convert(Y0.format,Y0.colorSpace),om=o.convert(Y0.type),Cm=V(Y0.internalFormat,im,om,Y0.colorSpace,Ko.isXRRenderTarget===!0),r1=Qm(Ko);t.renderbufferStorageMultisample(t.RENDERBUFFER,r1,Cm,Ko.width,Ko.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+B0,t.RENDERBUFFER,S0.__webglColorRenderbuffer[B0])}t.bindRenderbuffer(t.RENDERBUFFER,null),Ko.depthBuffer&&(S0.__webglDepthRenderbuffer=t.createRenderbuffer(),rm(S0.__webglDepthRenderbuffer,Ko,!0)),r.bindFramebuffer(t.FRAMEBUFFER,null)}}if(Ip){r.bindTexture(t.TEXTURE_CUBE_MAP,Z0.__webglTexture),l0(t.TEXTURE_CUBE_MAP,wi);for(let B0=0;B0<6;B0++)if(wi.mipmaps&&wi.mipmaps.length>0)for(let Y0=0;Y0<wi.mipmaps.length;Y0++)p0(S0.__webglFramebuffer[B0][Y0],Ko,wi,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+B0,Y0);else p0(S0.__webglFramebuffer[B0],Ko,wi,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+B0,0);J(wi)&&q(t.TEXTURE_CUBE_MAP),r.unbindTexture()}else if(x0){for(let B0=0,Y0=Pp.length;B0<Y0;B0++){const im=Pp[B0],om=n.get(im);let Cm=t.TEXTURE_2D;(Ko.isWebGL3DRenderTarget||Ko.isWebGLArrayRenderTarget)&&(Cm=Ko.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY),r.bindTexture(Cm,om.__webglTexture),l0(Cm,im),p0(S0.__webglFramebuffer,Ko,im,t.COLOR_ATTACHMENT0+B0,Cm,0),J(im)&&q(Cm)}r.unbindTexture()}else{let B0=t.TEXTURE_2D;if((Ko.isWebGL3DRenderTarget||Ko.isWebGLArrayRenderTarget)&&(B0=Ko.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY),r.bindTexture(B0,Z0.__webglTexture),l0(B0,wi),wi.mipmaps&&wi.mipmaps.length>0)for(let Y0=0;Y0<wi.mipmaps.length;Y0++)p0(S0.__webglFramebuffer[Y0],Ko,wi,t.COLOR_ATTACHMENT0,B0,Y0);else p0(S0.__webglFramebuffer,Ko,wi,t.COLOR_ATTACHMENT0,B0,0);J(wi)&&q(B0),r.unbindTexture()}Ko.depthBuffer&&ym(Ko)}function f1(Ko){const wi=Ko.textures;for(let S0=0,Z0=wi.length;S0<Z0;S0++){const Pp=wi[S0];if(J(Pp)){const Ip=Se(Ko),x0=n.get(Pp).__webglTexture;r.bindTexture(Ip,x0),q(Ip),r.unbindTexture()}}}const T1=[],I1=[];function p1(Ko){if(Ko.samples>0){if(m1(Ko)===!1){const wi=Ko.textures,S0=Ko.width,Z0=Ko.height;let Pp=t.COLOR_BUFFER_BIT;const Ip=Ko.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,x0=n.get(Ko),B0=wi.length>1;if(B0)for(let im=0;im<wi.length;im++)r.bindFramebuffer(t.FRAMEBUFFER,x0.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+im,t.RENDERBUFFER,null),r.bindFramebuffer(t.FRAMEBUFFER,x0.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+im,t.TEXTURE_2D,null,0);r.bindFramebuffer(t.READ_FRAMEBUFFER,x0.__webglMultisampledFramebuffer);const Y0=Ko.texture.mipmaps;Y0&&Y0.length>0?r.bindFramebuffer(t.DRAW_FRAMEBUFFER,x0.__webglFramebuffer[0]):r.bindFramebuffer(t.DRAW_FRAMEBUFFER,x0.__webglFramebuffer);for(let im=0;im<wi.length;im++){if(Ko.resolveDepthBuffer&&(Ko.depthBuffer&&(Pp|=t.DEPTH_BUFFER_BIT),Ko.stencilBuffer&&Ko.resolveStencilBuffer&&(Pp|=t.STENCIL_BUFFER_BIT)),B0){t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,x0.__webglColorRenderbuffer[im]);const om=n.get(wi[im]).__webglTexture;t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,om,0)}t.blitFramebuffer(0,0,S0,Z0,0,0,S0,Z0,Pp,t.NEAREST),c===!0&&(T1.length=0,I1.length=0,T1.push(t.COLOR_ATTACHMENT0+im),Ko.depthBuffer&&Ko.resolveDepthBuffer===!1&&(T1.push(Ip),I1.push(Ip),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,I1)),t.invalidateFramebuffer(t.READ_FRAMEBUFFER,T1))}if(r.bindFramebuffer(t.READ_FRAMEBUFFER,null),r.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),B0)for(let im=0;im<wi.length;im++){r.bindFramebuffer(t.FRAMEBUFFER,x0.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+im,t.RENDERBUFFER,x0.__webglColorRenderbuffer[im]);const om=n.get(wi[im]).__webglTexture;r.bindFramebuffer(t.FRAMEBUFFER,x0.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+im,t.TEXTURE_2D,om,0)}r.bindFramebuffer(t.DRAW_FRAMEBUFFER,x0.__webglMultisampledFramebuffer)}else if(Ko.depthBuffer&&Ko.resolveDepthBuffer===!1&&c){const wi=Ko.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,[wi])}}}function Qm(Ko){return Math.min(a.maxSamples,Ko.samples)}function m1(Ko){const wi=n.get(Ko);return Ko.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&wi.__useRenderToTexture!==!1}function W1(Ko){const wi=l.render.frame;v.get(Ko)!==wi&&(v.set(Ko,wi),Ko.update())}function ug(Ko,wi){const S0=Ko.colorSpace,Z0=Ko.format,Pp=Ko.type;return Ko.isCompressedTexture===!0||Ko.isVideoTexture===!0||S0!==ai&&S0!==pn&&(Xt.getTransfer(S0)===Jt?(Z0!==Ve||Pp!==sn)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",S0)),wi}function ng(Ko){return typeof HTMLImageElement<"u"&&Ko instanceof HTMLImageElement?(h.width=Ko.naturalWidth||Ko.width,h.height=Ko.naturalHeight||Ko.height):typeof VideoFrame<"u"&&Ko instanceof VideoFrame?(h.width=Ko.displayWidth,h.height=Ko.displayHeight):(h.width=Ko.width,h.height=Ko.height),h}this.allocateTextureUnit=Lp,this.resetTextureUnits=jo,this.setTexture2D=sa,this.setTexture2DArray=re,this.setTexture3D=$o,this.setTextureCube=qo,this.rebindTextures=Wm,this.setupRenderTarget=h0,this.updateRenderTargetMipmap=f1,this.updateMultisampleRenderTarget=p1,this.setupDepthRenderbuffer=ym,this.setupFrameBufferTexture=p0,this.useMultisampledRTT=m1}function tp(t,e){function r(n,a=pn){let o;const l=Xt.getTransfer(a);if(n===sn)return t.UNSIGNED_BYTE;if(n===qs)return t.UNSIGNED_SHORT_4_4_4_4;if(n===Ks)return t.UNSIGNED_SHORT_5_5_5_1;if(n===So)return t.UNSIGNED_INT_5_9_9_9_REV;if(n===Eo)return t.UNSIGNED_INT_10F_11F_11F_REV;if(n===xo)return t.BYTE;if(n===Mo)return t.SHORT;if(n===vi)return t.UNSIGNED_SHORT;if(n===Ys)return t.INT;if(n===Ln)return t.UNSIGNED_INT;if(n===nn)return t.FLOAT;if(n===yi)return t.HALF_FLOAT;if(n===yo)return t.ALPHA;if(n===To)return t.RGB;if(n===Ve)return t.RGBA;if(n===Mi)return t.DEPTH_COMPONENT;if(n===Si)return t.DEPTH_STENCIL;if(n===bo)return t.RED;if(n===Zs)return t.RED_INTEGER;if(n===Ao)return t.RG;if(n===js)return t.RG_INTEGER;if(n===$s)return t.RGBA_INTEGER;if(n===sr||n===ar||n===or||n===lr)if(l===Jt)if(o=e.get("WEBGL_compressed_texture_s3tc_srgb"),o!==null){if(n===sr)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===ar)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===or)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===lr)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(o=e.get("WEBGL_compressed_texture_s3tc"),o!==null){if(n===sr)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===ar)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===or)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===lr)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(n===_s||n===gs||n===vs||n===xs)if(o=e.get("WEBGL_compressed_texture_pvrtc"),o!==null){if(n===_s)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===gs)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===vs)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===xs)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(n===Ms||n===Ss||n===Es)if(o=e.get("WEBGL_compressed_texture_etc"),o!==null){if(n===Ms||n===Ss)return l===Jt?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(n===Es)return l===Jt?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(n===ys||n===Ts||n===bs||n===As||n===Rs||n===ws||n===Cs||n===Ps||n===Ds||n===Ls||n===Us||n===Is||n===Ns||n===Fs)if(o=e.get("WEBGL_compressed_texture_astc"),o!==null){if(n===ys)return l===Jt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===Ts)return l===Jt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===bs)return l===Jt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===As)return l===Jt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===Rs)return l===Jt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===ws)return l===Jt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===Cs)return l===Jt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===Ps)return l===Jt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===Ds)return l===Jt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===Ls)return l===Jt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===Us)return l===Jt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===Is)return l===Jt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===Ns)return l===Jt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===Fs)return l===Jt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(n===Os||n===Bs||n===zs)if(o=e.get("EXT_texture_compression_bptc"),o!==null){if(n===Os)return l===Jt?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===Bs)return o.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===zs)return o.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(n===Hs||n===Vs||n===Gs||n===ks)if(o=e.get("EXT_texture_compression_rgtc"),o!==null){if(n===Hs)return o.COMPRESSED_RED_RGTC1_EXT;if(n===Vs)return o.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===Gs)return o.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===ks)return o.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return n===xi?t.UNSIGNED_INT_24_8:t[n]!==void 0?t[n]:null}return{convert:r}}const ep=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,np=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class ip{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,r){if(this.texture===null){const n=new zo(e.texture);(e.depthNear!==r.depthNear||e.depthFar!==r.depthFar)&&(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=n}}getMesh(e){if(this.texture!==null&&this.mesh===null){const r=e.cameras[0].viewport,n=new vn({vertexShader:ep,fragmentShader:np,uniforms:{depthColor:{value:this.texture},depthWidth:{value:r.z},depthHeight:{value:r.w}}});this.mesh=new De(new xr(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class rp extends Nn{constructor(e,r){super();const n=this;let a=null,o=1,l=null,u="local-floor",c=1,h=null,v=null,g=null,T=null,R=null,W=null;const k=typeof XRWebGLBinding<"u",J=new ip,q={},Se=r.getContextAttributes();let V=null,Y=null;const ie=[],se=[],ct=new Bt;let ae=null;const st=new Fe;st.viewport=new oe;const Ct=new Fe;Ct.viewport=new oe;const $t=[st,Ct],jo=new yc;let Lp=null,Mn=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(f0){let v0=ie[f0];return v0===void 0&&(v0=new Xr,ie[f0]=v0),v0.getTargetRaySpace()},this.getControllerGrip=function(f0){let v0=ie[f0];return v0===void 0&&(v0=new Xr,ie[f0]=v0),v0.getGripSpace()},this.getHand=function(f0){let v0=ie[f0];return v0===void 0&&(v0=new Xr,ie[f0]=v0),v0.getHandSpace()};function sa(f0){const v0=se.indexOf(f0.inputSource);if(v0===-1)return;const p0=ie[v0];p0!==void 0&&(p0.update(f0.inputSource,f0.frame,h||l),p0.dispatchEvent({type:f0.type,data:f0.inputSource}))}function re(){a.removeEventListener("select",sa),a.removeEventListener("selectstart",sa),a.removeEventListener("selectend",sa),a.removeEventListener("squeeze",sa),a.removeEventListener("squeezestart",sa),a.removeEventListener("squeezeend",sa),a.removeEventListener("end",re),a.removeEventListener("inputsourceschange",$o);for(let f0=0;f0<ie.length;f0++){const v0=se[f0];v0!==null&&(se[f0]=null,ie[f0].disconnect(v0))}Lp=null,Mn=null,J.reset();for(const f0 in q)delete q[f0];e.setRenderTarget(V),R=null,T=null,g=null,a=null,Y=null,u0.stop(),n.isPresenting=!1,e.setPixelRatio(ae),e.setSize(ct.width,ct.height,!1),n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(f0){o=f0,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(f0){u=f0,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return h||l},this.setReferenceSpace=function(f0){h=f0},this.getBaseLayer=function(){return T!==null?T:R},this.getBinding=function(){return g===null&&k&&(g=new XRWebGLBinding(a,r)),g},this.getFrame=function(){return W},this.getSession=function(){return a},this.setSession=async function(f0){if(a=f0,a!==null){if(V=e.getRenderTarget(),a.addEventListener("select",sa),a.addEventListener("selectstart",sa),a.addEventListener("selectend",sa),a.addEventListener("squeeze",sa),a.addEventListener("squeezestart",sa),a.addEventListener("squeezeend",sa),a.addEventListener("end",re),a.addEventListener("inputsourceschange",$o),Se.xrCompatible!==!0&&await r.makeXRCompatible(),ae=e.getPixelRatio(),e.getSize(ct),k&&"createProjectionLayer"in XRWebGLBinding.prototype){let v0=null,p0=null,rm=null;Se.depth&&(rm=Se.stencil?r.DEPTH24_STENCIL8:r.DEPTH_COMPONENT24,v0=Se.stencil?Si:Mi,p0=Se.stencil?xi:Ln);const am={colorFormat:r.RGBA8,depthFormat:rm,scaleFactor:o};g=this.getBinding(),T=g.createProjectionLayer(am),a.updateRenderState({layers:[T]}),e.setPixelRatio(1),e.setSize(T.textureWidth,T.textureHeight,!1),Y=new In(T.textureWidth,T.textureHeight,{format:Ve,type:sn,depthTexture:new Bo(T.textureWidth,T.textureHeight,p0,void 0,void 0,void 0,void 0,void 0,void 0,v0),stencilBuffer:Se.stencil,colorSpace:e.outputColorSpace,samples:Se.antialias?4:0,resolveDepthBuffer:T.ignoreDepthValues===!1,resolveStencilBuffer:T.ignoreDepthValues===!1})}else{const v0={antialias:Se.antialias,alpha:!0,depth:Se.depth,stencil:Se.stencil,framebufferScaleFactor:o};R=new XRWebGLLayer(a,r,v0),a.updateRenderState({baseLayer:R}),e.setPixelRatio(1),e.setSize(R.framebufferWidth,R.framebufferHeight,!1),Y=new In(R.framebufferWidth,R.framebufferHeight,{format:Ve,type:sn,colorSpace:e.outputColorSpace,stencilBuffer:Se.stencil,resolveDepthBuffer:R.ignoreDepthValues===!1,resolveStencilBuffer:R.ignoreDepthValues===!1})}Y.isXRRenderTarget=!0,this.setFoveation(c),h=null,l=await a.requestReferenceSpace(u),u0.setContext(a),u0.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(a!==null)return a.environmentBlendMode},this.getDepthTexture=function(){return J.getDepthTexture()};function $o(f0){for(let v0=0;v0<f0.removed.length;v0++){const p0=f0.removed[v0],rm=se.indexOf(p0);rm>=0&&(se[rm]=null,ie[rm].disconnect(p0))}for(let v0=0;v0<f0.added.length;v0++){const p0=f0.added[v0];let rm=se.indexOf(p0);if(rm===-1){for(let ym=0;ym<ie.length;ym++)if(ym>=se.length){se.push(p0),rm=ym;break}else if(se[ym]===null){se[ym]=p0,rm=ym;break}if(rm===-1)break}const am=ie[rm];am&&am.connect(p0)}}const qo=new U,Kt=new U;function i0(f0,v0,p0){qo.setFromMatrixPosition(v0.matrixWorld),Kt.setFromMatrixPosition(p0.matrixWorld);const rm=qo.distanceTo(Kt),am=v0.projectionMatrix.elements,ym=p0.projectionMatrix.elements,Wm=am[14]/(am[10]-1),h0=am[14]/(am[10]+1),f1=(am[9]+1)/am[5],T1=(am[9]-1)/am[5],I1=(am[8]-1)/am[0],p1=(ym[8]+1)/ym[0],Qm=Wm*I1,m1=Wm*p1,W1=rm/(-I1+p1),ug=W1*-I1;if(v0.matrixWorld.decompose(f0.position,f0.quaternion,f0.scale),f0.translateX(ug),f0.translateZ(W1),f0.matrixWorld.compose(f0.position,f0.quaternion,f0.scale),f0.matrixWorldInverse.copy(f0.matrixWorld).invert(),am[10]===-1)f0.projectionMatrix.copy(v0.projectionMatrix),f0.projectionMatrixInverse.copy(v0.projectionMatrixInverse);else{const ng=Wm+W1,Ko=h0+W1,wi=Qm-ug,S0=m1+(rm-ug),Z0=f1*h0/Ko*ng,Pp=T1*h0/Ko*ng;f0.projectionMatrix.makePerspective(wi,S0,Z0,Pp,ng,Ko),f0.projectionMatrixInverse.copy(f0.projectionMatrix).invert()}}function Up(f0,v0){v0===null?f0.matrixWorld.copy(f0.matrix):f0.matrixWorld.multiplyMatrices(v0.matrixWorld,f0.matrix),f0.matrixWorldInverse.copy(f0.matrixWorld).invert()}this.updateCamera=function(f0){if(a===null)return;let v0=f0.near,p0=f0.far;J.texture!==null&&(J.depthNear>0&&(v0=J.depthNear),J.depthFar>0&&(p0=J.depthFar)),jo.near=Ct.near=st.near=v0,jo.far=Ct.far=st.far=p0,(Lp!==jo.near||Mn!==jo.far)&&(a.updateRenderState({depthNear:jo.near,depthFar:jo.far}),Lp=jo.near,Mn=jo.far),jo.layers.mask=f0.layers.mask|6,st.layers.mask=jo.layers.mask&3,Ct.layers.mask=jo.layers.mask&5;const rm=f0.parent,am=jo.cameras;Up(jo,rm);for(let ym=0;ym<am.length;ym++)Up(am[ym],rm);am.length===2?i0(jo,st,Ct):jo.projectionMatrix.copy(st.projectionMatrix),l0(f0,jo,rm)};function l0(f0,v0,p0){p0===null?f0.matrix.copy(v0.matrixWorld):(f0.matrix.copy(p0.matrixWorld),f0.matrix.invert(),f0.matrix.multiply(v0.matrixWorld)),f0.matrix.decompose(f0.position,f0.quaternion,f0.scale),f0.updateMatrixWorld(!0),f0.projectionMatrix.copy(v0.projectionMatrix),f0.projectionMatrixInverse.copy(v0.projectionMatrixInverse),f0.isPerspectiveCamera&&(f0.fov=Ws*2*Math.atan(1/f0.projectionMatrix.elements[5]),f0.zoom=1)}this.getCamera=function(){return jo},this.getFoveation=function(){if(!(T===null&&R===null))return c},this.setFoveation=function(f0){c=f0,T!==null&&(T.fixedFoveation=f0),R!==null&&R.fixedFoveation!==void 0&&(R.fixedFoveation=f0)},this.hasDepthSensing=function(){return J.texture!==null},this.getDepthSensingMesh=function(){return J.getMesh(jo)},this.getCameraTexture=function(f0){return q[f0]};let y0=null;function kp(f0,v0){if(v=v0.getViewerPose(h||l),W=v0,v!==null){const p0=v.views;R!==null&&(e.setRenderTargetFramebuffer(Y,R.framebuffer),e.setRenderTarget(Y));let rm=!1;p0.length!==jo.cameras.length&&(jo.cameras.length=0,rm=!0);for(let ym=0;ym<p0.length;ym++){const Wm=p0[ym];let h0=null;if(R!==null)h0=R.getViewport(Wm);else{const T1=g.getViewSubImage(T,Wm);h0=T1.viewport,ym===0&&(e.setRenderTargetTextures(Y,T1.colorTexture,T1.depthStencilTexture),e.setRenderTarget(Y))}let f1=$t[ym];f1===void 0&&(f1=new Fe,f1.layers.enable(ym),f1.viewport=new oe,$t[ym]=f1),f1.matrix.fromArray(Wm.transform.matrix),f1.matrix.decompose(f1.position,f1.quaternion,f1.scale),f1.projectionMatrix.fromArray(Wm.projectionMatrix),f1.projectionMatrixInverse.copy(f1.projectionMatrix).invert(),f1.viewport.set(h0.x,h0.y,h0.width,h0.height),ym===0&&(jo.matrix.copy(f1.matrix),jo.matrix.decompose(jo.position,jo.quaternion,jo.scale)),rm===!0&&jo.cameras.push(f1)}const am=a.enabledFeatures;if(am&&am.includes("depth-sensing")&&a.depthUsage=="gpu-optimized"&&k){g=n.getBinding();const ym=g.getDepthInformation(p0[0]);ym&&ym.isValid&&ym.texture&&J.init(ym,a.renderState)}if(am&&am.includes("camera-access")&&k){e.state.unbindTexture(),g=n.getBinding();for(let ym=0;ym<p0.length;ym++){const Wm=p0[ym].camera;if(Wm){let h0=q[Wm];h0||(h0=new zo,q[Wm]=h0);const f1=g.getCameraImage(Wm);h0.sourceTexture=f1}}}}for(let p0=0;p0<ie.length;p0++){const rm=se[p0],am=ie[p0];rm!==null&&am!==void 0&&am.update(rm,v0,h||l)}y0&&y0(f0,v0),v0.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:v0}),W=null}const u0=new Ho;u0.setAnimationLoop(kp),this.setAnimationLoop=function(f0){y0=f0},this.dispose=function(){}}}const An=new an,sp=new he;function ap(t,e){function r(J,q){J.matrixAutoUpdate===!0&&J.updateMatrix(),q.value.copy(J.matrix)}function n(J,q){q.color.getRGB(J.fogColor.value,Io(t)),q.isFog?(J.fogNear.value=q.near,J.fogFar.value=q.far):q.isFogExp2&&(J.fogDensity.value=q.density)}function a(J,q,Se,V,Y){q.isMeshBasicMaterial||q.isMeshLambertMaterial?o(J,q):q.isMeshToonMaterial?(o(J,q),g(J,q)):q.isMeshPhongMaterial?(o(J,q),v(J,q)):q.isMeshStandardMaterial?(o(J,q),T(J,q),q.isMeshPhysicalMaterial&&R(J,q,Y)):q.isMeshMatcapMaterial?(o(J,q),W(J,q)):q.isMeshDepthMaterial?o(J,q):q.isMeshDistanceMaterial?(o(J,q),k(J,q)):q.isMeshNormalMaterial?o(J,q):q.isLineBasicMaterial?(l(J,q),q.isLineDashedMaterial&&u(J,q)):q.isPointsMaterial?c(J,q,Se,V):q.isSpriteMaterial?h(J,q):q.isShadowMaterial?(J.color.value.copy(q.color),J.opacity.value=q.opacity):q.isShaderMaterial&&(q.uniformsNeedUpdate=!1)}function o(J,q){J.opacity.value=q.opacity,q.color&&J.diffuse.value.copy(q.color),q.emissive&&J.emissive.value.copy(q.emissive).multiplyScalar(q.emissiveIntensity),q.map&&(J.map.value=q.map,r(q.map,J.mapTransform)),q.alphaMap&&(J.alphaMap.value=q.alphaMap,r(q.alphaMap,J.alphaMapTransform)),q.bumpMap&&(J.bumpMap.value=q.bumpMap,r(q.bumpMap,J.bumpMapTransform),J.bumpScale.value=q.bumpScale,q.side===Te&&(J.bumpScale.value*=-1)),q.normalMap&&(J.normalMap.value=q.normalMap,r(q.normalMap,J.normalMapTransform),J.normalScale.value.copy(q.normalScale),q.side===Te&&J.normalScale.value.negate()),q.displacementMap&&(J.displacementMap.value=q.displacementMap,r(q.displacementMap,J.displacementMapTransform),J.displacementScale.value=q.displacementScale,J.displacementBias.value=q.displacementBias),q.emissiveMap&&(J.emissiveMap.value=q.emissiveMap,r(q.emissiveMap,J.emissiveMapTransform)),q.specularMap&&(J.specularMap.value=q.specularMap,r(q.specularMap,J.specularMapTransform)),q.alphaTest>0&&(J.alphaTest.value=q.alphaTest);const Se=e.get(q),V=Se.envMap,Y=Se.envMapRotation;V&&(J.envMap.value=V,An.copy(Y),An.x*=-1,An.y*=-1,An.z*=-1,V.isCubeTexture&&V.isRenderTargetTexture===!1&&(An.y*=-1,An.z*=-1),J.envMapRotation.value.setFromMatrix4(sp.makeRotationFromEuler(An)),J.flipEnvMap.value=V.isCubeTexture&&V.isRenderTargetTexture===!1?-1:1,J.reflectivity.value=q.reflectivity,J.ior.value=q.ior,J.refractionRatio.value=q.refractionRatio),q.lightMap&&(J.lightMap.value=q.lightMap,J.lightMapIntensity.value=q.lightMapIntensity,r(q.lightMap,J.lightMapTransform)),q.aoMap&&(J.aoMap.value=q.aoMap,J.aoMapIntensity.value=q.aoMapIntensity,r(q.aoMap,J.aoMapTransform))}function l(J,q){J.diffuse.value.copy(q.color),J.opacity.value=q.opacity,q.map&&(J.map.value=q.map,r(q.map,J.mapTransform))}function u(J,q){J.dashSize.value=q.dashSize,J.totalSize.value=q.dashSize+q.gapSize,J.scale.value=q.scale}function c(J,q,Se,V){J.diffuse.value.copy(q.color),J.opacity.value=q.opacity,J.size.value=q.size*Se,J.scale.value=V*.5,q.map&&(J.map.value=q.map,r(q.map,J.uvTransform)),q.alphaMap&&(J.alphaMap.value=q.alphaMap,r(q.alphaMap,J.alphaMapTransform)),q.alphaTest>0&&(J.alphaTest.value=q.alphaTest)}function h(J,q){J.diffuse.value.copy(q.color),J.opacity.value=q.opacity,J.rotation.value=q.rotation,q.map&&(J.map.value=q.map,r(q.map,J.mapTransform)),q.alphaMap&&(J.alphaMap.value=q.alphaMap,r(q.alphaMap,J.alphaMapTransform)),q.alphaTest>0&&(J.alphaTest.value=q.alphaTest)}function v(J,q){J.specular.value.copy(q.specular),J.shininess.value=Math.max(q.shininess,1e-4)}function g(J,q){q.gradientMap&&(J.gradientMap.value=q.gradientMap)}function T(J,q){J.metalness.value=q.metalness,q.metalnessMap&&(J.metalnessMap.value=q.metalnessMap,r(q.metalnessMap,J.metalnessMapTransform)),J.roughness.value=q.roughness,q.roughnessMap&&(J.roughnessMap.value=q.roughnessMap,r(q.roughnessMap,J.roughnessMapTransform)),q.envMap&&(J.envMapIntensity.value=q.envMapIntensity)}function R(J,q,Se){J.ior.value=q.ior,q.sheen>0&&(J.sheenColor.value.copy(q.sheenColor).multiplyScalar(q.sheen),J.sheenRoughness.value=q.sheenRoughness,q.sheenColorMap&&(J.sheenColorMap.value=q.sheenColorMap,r(q.sheenColorMap,J.sheenColorMapTransform)),q.sheenRoughnessMap&&(J.sheenRoughnessMap.value=q.sheenRoughnessMap,r(q.sheenRoughnessMap,J.sheenRoughnessMapTransform))),q.clearcoat>0&&(J.clearcoat.value=q.clearcoat,J.clearcoatRoughness.value=q.clearcoatRoughness,q.clearcoatMap&&(J.clearcoatMap.value=q.clearcoatMap,r(q.clearcoatMap,J.clearcoatMapTransform)),q.clearcoatRoughnessMap&&(J.clearcoatRoughnessMap.value=q.clearcoatRoughnessMap,r(q.clearcoatRoughnessMap,J.clearcoatRoughnessMapTransform)),q.clearcoatNormalMap&&(J.clearcoatNormalMap.value=q.clearcoatNormalMap,r(q.clearcoatNormalMap,J.clearcoatNormalMapTransform),J.clearcoatNormalScale.value.copy(q.clearcoatNormalScale),q.side===Te&&J.clearcoatNormalScale.value.negate())),q.dispersion>0&&(J.dispersion.value=q.dispersion),q.iridescence>0&&(J.iridescence.value=q.iridescence,J.iridescenceIOR.value=q.iridescenceIOR,J.iridescenceThicknessMinimum.value=q.iridescenceThicknessRange[0],J.iridescenceThicknessMaximum.value=q.iridescenceThicknessRange[1],q.iridescenceMap&&(J.iridescenceMap.value=q.iridescenceMap,r(q.iridescenceMap,J.iridescenceMapTransform)),q.iridescenceThicknessMap&&(J.iridescenceThicknessMap.value=q.iridescenceThicknessMap,r(q.iridescenceThicknessMap,J.iridescenceThicknessMapTransform))),q.transmission>0&&(J.transmission.value=q.transmission,J.transmissionSamplerMap.value=Se.texture,J.transmissionSamplerSize.value.set(Se.width,Se.height),q.transmissionMap&&(J.transmissionMap.value=q.transmissionMap,r(q.transmissionMap,J.transmissionMapTransform)),J.thickness.value=q.thickness,q.thicknessMap&&(J.thicknessMap.value=q.thicknessMap,r(q.thicknessMap,J.thicknessMapTransform)),J.attenuationDistance.value=q.attenuationDistance,J.attenuationColor.value.copy(q.attenuationColor)),q.anisotropy>0&&(J.anisotropyVector.value.set(q.anisotropy*Math.cos(q.anisotropyRotation),q.anisotropy*Math.sin(q.anisotropyRotation)),q.anisotropyMap&&(J.anisotropyMap.value=q.anisotropyMap,r(q.anisotropyMap,J.anisotropyMapTransform))),J.specularIntensity.value=q.specularIntensity,J.specularColor.value.copy(q.specularColor),q.specularColorMap&&(J.specularColorMap.value=q.specularColorMap,r(q.specularColorMap,J.specularColorMapTransform)),q.specularIntensityMap&&(J.specularIntensityMap.value=q.specularIntensityMap,r(q.specularIntensityMap,J.specularIntensityMapTransform))}function W(J,q){q.matcap&&(J.matcap.value=q.matcap)}function k(J,q){const Se=e.get(q).light;J.referencePosition.value.setFromMatrixPosition(Se.matrixWorld),J.nearDistance.value=Se.shadow.camera.near,J.farDistance.value=Se.shadow.camera.far}return{refreshFogUniforms:n,refreshMaterialUniforms:a}}function op(t,e,r,n){let a={},o={},l=[];const u=t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS);function c(Se,V){const Y=V.program;n.uniformBlockBinding(Se,Y)}function h(Se,V){let Y=a[Se.id];Y===void 0&&(W(Se),Y=v(Se),a[Se.id]=Y,Se.addEventListener("dispose",J));const ie=V.program;n.updateUBOMapping(Se,ie);const se=e.render.frame;o[Se.id]!==se&&(T(Se),o[Se.id]=se)}function v(Se){const V=g();Se.__bindingPointIndex=V;const Y=t.createBuffer(),ie=Se.__size,se=Se.usage;return t.bindBuffer(t.UNIFORM_BUFFER,Y),t.bufferData(t.UNIFORM_BUFFER,ie,se),t.bindBuffer(t.UNIFORM_BUFFER,null),t.bindBufferBase(t.UNIFORM_BUFFER,V,Y),Y}function g(){for(let Se=0;Se<u;Se++)if(l.indexOf(Se)===-1)return l.push(Se),Se;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function T(Se){const V=a[Se.id],Y=Se.uniforms,ie=Se.__cache;t.bindBuffer(t.UNIFORM_BUFFER,V);for(let se=0,ct=Y.length;se<ct;se++){const ae=Array.isArray(Y[se])?Y[se]:[Y[se]];for(let st=0,Ct=ae.length;st<Ct;st++){const $t=ae[st];if(R($t,se,st,ie)===!0){const jo=$t.__offset,Lp=Array.isArray($t.value)?$t.value:[$t.value];let Mn=0;for(let sa=0;sa<Lp.length;sa++){const re=Lp[sa],$o=k(re);typeof re=="number"||typeof re=="boolean"?($t.__data[0]=re,t.bufferSubData(t.UNIFORM_BUFFER,jo+Mn,$t.__data)):re.isMatrix3?($t.__data[0]=re.elements[0],$t.__data[1]=re.elements[1],$t.__data[2]=re.elements[2],$t.__data[3]=0,$t.__data[4]=re.elements[3],$t.__data[5]=re.elements[4],$t.__data[6]=re.elements[5],$t.__data[7]=0,$t.__data[8]=re.elements[6],$t.__data[9]=re.elements[7],$t.__data[10]=re.elements[8],$t.__data[11]=0):(re.toArray($t.__data,Mn),Mn+=$o.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(t.UNIFORM_BUFFER,jo,$t.__data)}}}t.bindBuffer(t.UNIFORM_BUFFER,null)}function R(Se,V,Y,ie){const se=Se.value,ct=V+"_"+Y;if(ie[ct]===void 0)return typeof se=="number"||typeof se=="boolean"?ie[ct]=se:ie[ct]=se.clone(),!0;{const ae=ie[ct];if(typeof se=="number"||typeof se=="boolean"){if(ae!==se)return ie[ct]=se,!0}else if(ae.equals(se)===!1)return ae.copy(se),!0}return!1}function W(Se){const V=Se.uniforms;let Y=0;const ie=16;for(let ct=0,ae=V.length;ct<ae;ct++){const st=Array.isArray(V[ct])?V[ct]:[V[ct]];for(let Ct=0,$t=st.length;Ct<$t;Ct++){const jo=st[Ct],Lp=Array.isArray(jo.value)?jo.value:[jo.value];for(let Mn=0,sa=Lp.length;Mn<sa;Mn++){const re=Lp[Mn],$o=k(re),qo=Y%ie,Kt=qo%$o.boundary,i0=qo+Kt;Y+=Kt,i0!==0&&ie-i0<$o.storage&&(Y+=ie-i0),jo.__data=new Float32Array($o.storage/Float32Array.BYTES_PER_ELEMENT),jo.__offset=Y,Y+=$o.storage}}}const se=Y%ie;return se>0&&(Y+=ie-se),Se.__size=Y,Se.__cache={},this}function k(Se){const V={boundary:0,storage:0};return typeof Se=="number"||typeof Se=="boolean"?(V.boundary=4,V.storage=4):Se.isVector2?(V.boundary=8,V.storage=8):Se.isVector3||Se.isColor?(V.boundary=16,V.storage=12):Se.isVector4?(V.boundary=16,V.storage=16):Se.isMatrix3?(V.boundary=48,V.storage=48):Se.isMatrix4?(V.boundary=64,V.storage=64):Se.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",Se),V}function J(Se){const V=Se.target;V.removeEventListener("dispose",J);const Y=l.indexOf(V.__bindingPointIndex);l.splice(Y,1),t.deleteBuffer(a[V.id]),delete a[V.id],delete o[V.id]}function q(){for(const Se in a)t.deleteBuffer(a[Se]);l=[],a={},o={}}return{bind:c,update:h,dispose:q}}class lp{constructor(e={}){const{canvas:r=Gl(),context:n=null,depth:a=!0,stencil:o=!1,alpha:l=!1,antialias:u=!1,premultipliedAlpha:c=!0,preserveDrawingBuffer:h=!1,powerPreference:v="default",failIfMajorPerformanceCaveat:g=!1,reversedDepthBuffer:T=!1}=e;this.isWebGLRenderer=!0;let R;if(n!==null){if(typeof WebGLRenderingContext<"u"&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");R=n.getContextAttributes().alpha}else R=l;const W=new Uint32Array(4),k=new Int32Array(4);let J=null,q=null;const Se=[],V=[];this.domElement=r,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=_n,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const Y=this;let ie=!1;this._outputColorSpace=Ne;let se=0,ct=0,ae=null,st=-1,Ct=null;const $t=new oe,jo=new oe;let Lp=null;const Mn=new qt(0);let sa=0,re=r.width,$o=r.height,qo=1,Kt=null,i0=null;const Up=new oe(0,0,re,$o),l0=new oe(0,0,re,$o);let y0=!1;const kp=new Oo;let u0=!1,f0=!1;const v0=new he,p0=new U,rm=new oe,am={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let ym=!1;function Wm(){return ae===null?qo:1}let h0=n;function f1(oa,a0){return r.getContext(oa,a0)}try{const oa={alpha:!0,depth:a,stencil:o,antialias:u,premultipliedAlpha:c,preserveDrawingBuffer:h,powerPreference:v,failIfMajorPerformanceCaveat:g};if("setAttribute"in r&&r.setAttribute("data-engine","three.js r180"),r.addEventListener("webglcontextlost",U1,!1),r.addEventListener("webglcontextrestored",J1,!1),r.addEventListener("webglcontextcreationerror",l1,!1),h0===null){const a0="webgl2";if(h0=f1(a0,oa),h0===null)throw f1(a0)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(oa){throw console.error("THREE.WebGLRenderer: "+oa.message),oa}let T1,I1,p1,Qm,m1,W1,ug,ng,Ko,wi,S0,Z0,Pp,Ip,x0,B0,Y0,im,om,Cm,r1,Om,a1,hg;function pm(){T1=new gd(h0),T1.init(),Om=new tp(h0,T1),I1=new hd(h0,T1,e,Om),p1=new Jf(h0,T1),I1.reversedDepthBuffer&&T&&p1.buffers.depth.setReversed(!0),Qm=new Md(h0),m1=new zf,W1=new Qf(h0,T1,p1,m1,I1,Om,Qm),ug=new dd(Y),ng=new _d(Y),Ko=new Ac(h0),a1=new ld(h0,Ko),wi=new vd(h0,Ko,Qm,a1),S0=new Ed(h0,wi,Ko,Qm),om=new Sd(h0,I1,W1),B0=new ud(m1),Z0=new Bf(Y,ug,ng,T1,I1,a1,B0),Pp=new ap(Y,m1),Ip=new Vf,x0=new qf(T1),im=new od(Y,ug,ng,p1,S0,R,c),Y0=new jf(Y,S0,I1),hg=new op(h0,Qm,I1,p1),Cm=new cd(h0,T1,Qm),r1=new xd(h0,T1,Qm),Qm.programs=Z0.programs,Y.capabilities=I1,Y.extensions=T1,Y.properties=m1,Y.renderLists=Ip,Y.shadowMap=Y0,Y.state=p1,Y.info=Qm}pm();const S1=new rp(Y,h0);this.xr=S1,this.getContext=function(){return h0},this.getContextAttributes=function(){return h0.getContextAttributes()},this.forceContextLoss=function(){const oa=T1.get("WEBGL_lose_context");oa&&oa.loseContext()},this.forceContextRestore=function(){const oa=T1.get("WEBGL_lose_context");oa&&oa.restoreContext()},this.getPixelRatio=function(){return qo},this.setPixelRatio=function(oa){oa!==void 0&&(qo=oa,this.setSize(re,$o,!1))},this.getSize=function(oa){return oa.set(re,$o)},this.setSize=function(oa,a0,m0=!0){if(S1.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}re=oa,$o=a0,r.width=Math.floor(oa*qo),r.height=Math.floor(a0*qo),m0===!0&&(r.style.width=oa+"px",r.style.height=a0+"px"),this.setViewport(0,0,oa,a0)},this.getDrawingBufferSize=function(oa){return oa.set(re*qo,$o*qo).floor()},this.setDrawingBufferSize=function(oa,a0,m0){re=oa,$o=a0,qo=m0,r.width=Math.floor(oa*m0),r.height=Math.floor(a0*m0),this.setViewport(0,0,oa,a0)},this.getCurrentViewport=function(oa){return oa.copy($t)},this.getViewport=function(oa){return oa.copy(Up)},this.setViewport=function(oa,a0,m0,nm){oa.isVector4?Up.set(oa.x,oa.y,oa.z,oa.w):Up.set(oa,a0,m0,nm),p1.viewport($t.copy(Up).multiplyScalar(qo).round())},this.getScissor=function(oa){return oa.copy(l0)},this.setScissor=function(oa,a0,m0,nm){oa.isVector4?l0.set(oa.x,oa.y,oa.z,oa.w):l0.set(oa,a0,m0,nm),p1.scissor(jo.copy(l0).multiplyScalar(qo).round())},this.getScissorTest=function(){return y0},this.setScissorTest=function(oa){p1.setScissorTest(y0=oa)},this.setOpaqueSort=function(oa){Kt=oa},this.setTransparentSort=function(oa){i0=oa},this.getClearColor=function(oa){return oa.copy(im.getClearColor())},this.setClearColor=function(){im.setClearColor(...arguments)},this.getClearAlpha=function(){return im.getClearAlpha()},this.setClearAlpha=function(){im.setClearAlpha(...arguments)},this.clear=function(oa=!0,a0=!0,m0=!0){let nm=0;if(oa){let L0=!1;if(ae!==null){const cm=ae.texture.format;L0=cm===$s||cm===js||cm===Zs}if(L0){const cm=ae.texture.type,Gm=cm===sn||cm===Ln||cm===vi||cm===xi||cm===qs||cm===Ks,Fm=im.getClearColor(),Vm=im.getClearAlpha(),D1=Fm.r,O1=Fm.g,tg=Fm.b;Gm?(W[0]=D1,W[1]=O1,W[2]=tg,W[3]=Vm,h0.clearBufferuiv(h0.COLOR,0,W)):(k[0]=D1,k[1]=O1,k[2]=tg,k[3]=Vm,h0.clearBufferiv(h0.COLOR,0,k))}else nm|=h0.COLOR_BUFFER_BIT}a0&&(nm|=h0.DEPTH_BUFFER_BIT),m0&&(nm|=h0.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),h0.clear(nm)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){r.removeEventListener("webglcontextlost",U1,!1),r.removeEventListener("webglcontextrestored",J1,!1),r.removeEventListener("webglcontextcreationerror",l1,!1),im.dispose(),Ip.dispose(),x0.dispose(),m1.dispose(),ug.dispose(),ng.dispose(),S0.dispose(),a1.dispose(),hg.dispose(),Z0.dispose(),S1.dispose(),S1.removeEventListener("sessionstart",Yv),S1.removeEventListener("sessionend",my),Vv.stop()};function U1(oa){oa.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),ie=!0}function J1(){console.log("THREE.WebGLRenderer: Context Restored."),ie=!1;const oa=Qm.autoReset,a0=Y0.enabled,m0=Y0.autoUpdate,nm=Y0.needsUpdate,L0=Y0.type;pm(),Qm.autoReset=oa,Y0.enabled=a0,Y0.autoUpdate=m0,Y0.needsUpdate=nm,Y0.type=L0}function l1(oa){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",oa.statusMessage)}function Km(oa){const a0=oa.target;a0.removeEventListener("dispose",Km),A1(a0)}function A1(oa){y1(oa),m1.remove(oa)}function y1(oa){const a0=m1.get(oa).programs;a0!==void 0&&(a0.forEach(function(m0){Z0.releaseProgram(m0)}),oa.isShaderMaterial&&Z0.releaseShaderCache(oa))}this.renderBufferDirect=function(oa,a0,m0,nm,L0,cm){a0===null&&(a0=am);const Gm=L0.isMesh&&L0.matrixWorld.determinant()<0,Fm=Lv(oa,a0,m0,nm,L0);p1.setMaterial(nm,Gm);let Vm=m0.index,D1=1;if(nm.wireframe===!0){if(Vm=wi.getWireframeAttribute(m0),Vm===void 0)return;D1=2}const O1=m0.drawRange,tg=m0.attributes.position;let Mg=O1.start*D1,kg=(O1.start+O1.count)*D1;cm!==null&&(Mg=Math.max(Mg,cm.start*D1),kg=Math.min(kg,(cm.start+cm.count)*D1)),Vm!==null?(Mg=Math.max(Mg,0),kg=Math.min(kg,Vm.count)):tg!=null&&(Mg=Math.max(Mg,0),kg=Math.min(kg,tg.count));const cg=kg-Mg;if(cg<0||cg===1/0)return;a1.setup(L0,nm,Fm,m0,Vm);let Ag,K1=Cm;if(Vm!==null&&(Ag=Ko.get(Vm),K1=r1,K1.setIndex(Ag)),L0.isMesh)nm.wireframe===!0?(p1.setLineWidth(nm.wireframeLinewidth*Wm()),K1.setMode(h0.LINES)):K1.setMode(h0.TRIANGLES);else if(L0.isLine){let G1=nm.linewidth;G1===void 0&&(G1=1),p1.setLineWidth(G1*Wm()),L0.isLineSegments?K1.setMode(h0.LINES):L0.isLineLoop?K1.setMode(h0.LINE_LOOP):K1.setMode(h0.LINE_STRIP)}else L0.isPoints?K1.setMode(h0.POINTS):L0.isSprite&&K1.setMode(h0.TRIANGLES);if(L0.isBatchedMesh)if(L0._multiDrawInstances!==null)Ei("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),K1.renderMultiDrawInstances(L0._multiDrawStarts,L0._multiDrawCounts,L0._multiDrawCount,L0._multiDrawInstances);else if(T1.get("WEBGL_multi_draw"))K1.renderMultiDraw(L0._multiDrawStarts,L0._multiDrawCounts,L0._multiDrawCount);else{const G1=L0._multiDrawStarts,sg=L0._multiDrawCounts,Iv=L0._multiDrawCount,d0=Vm?Ko.get(Vm).bytesPerElement:1,y=m1.get(nm).currentProgram.getUniforms();for(let N=0;N<Iv;N++)y.setValue(h0,"_gl_DrawID",N),K1.render(G1[N]/d0,sg[N])}else if(L0.isInstancedMesh)K1.renderInstances(Mg,cg,L0.count);else if(m0.isInstancedBufferGeometry){const G1=m0._maxInstanceCount!==void 0?m0._maxInstanceCount:1/0,sg=Math.min(m0.instanceCount,G1);K1.renderInstances(Mg,cg,sg)}else K1.render(Mg,cg)};function uv(oa,a0,m0){oa.transparent===!0&&oa.side===Xe&&oa.forceSinglePass===!1?(oa.side=Te,oa.needsUpdate=!0,$v(oa,a0,m0),oa.side=gn,oa.needsUpdate=!0,$v(oa,a0,m0),oa.side=Xe):$v(oa,a0,m0)}this.compile=function(oa,a0,m0=null){m0===null&&(m0=oa),q=x0.get(m0),q.init(a0),V.push(q),m0.traverseVisible(function(L0){L0.isLight&&L0.layers.test(a0.layers)&&(q.pushLight(L0),L0.castShadow&&q.pushShadow(L0))}),oa!==m0&&oa.traverseVisible(function(L0){L0.isLight&&L0.layers.test(a0.layers)&&(q.pushLight(L0),L0.castShadow&&q.pushShadow(L0))}),q.setupLights();const nm=new Set;return oa.traverse(function(L0){if(!(L0.isMesh||L0.isPoints||L0.isLine||L0.isSprite))return;const cm=L0.material;if(cm)if(Array.isArray(cm))for(let Gm=0;Gm<cm.length;Gm++){const Fm=cm[Gm];uv(Fm,m0,L0),nm.add(Fm)}else uv(cm,m0,L0),nm.add(cm)}),q=V.pop(),nm},this.compileAsync=function(oa,a0,m0=null){const nm=this.compile(oa,a0,m0);return new Promise(L0=>{function cm(){if(nm.forEach(function(Gm){m1.get(Gm).currentProgram.isReady()&&nm.delete(Gm)}),nm.size===0){L0(oa);return}setTimeout(cm,10)}T1.get("KHR_parallel_shader_compile")!==null?cm():setTimeout(cm,10)})};let $g=null;function Sv(oa){$g&&$g(oa)}function Yv(){Vv.stop()}function my(){Vv.start()}const Vv=new Ho;Vv.setAnimationLoop(Sv),typeof self<"u"&&Vv.setContext(self),this.setAnimationLoop=function(oa){$g=oa,S1.setAnimationLoop(oa),oa===null?Vv.stop():Vv.start()},S1.addEventListener("sessionstart",Yv),S1.addEventListener("sessionend",my),this.render=function(oa,a0){if(a0!==void 0&&a0.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(ie===!0)return;if(oa.matrixWorldAutoUpdate===!0&&oa.updateMatrixWorld(),a0.parent===null&&a0.matrixWorldAutoUpdate===!0&&a0.updateMatrixWorld(),S1.enabled===!0&&S1.isPresenting===!0&&(S1.cameraAutoUpdate===!0&&S1.updateCamera(a0),a0=S1.getCamera()),oa.isScene===!0&&oa.onBeforeRender(Y,oa,a0,ae),q=x0.get(oa,V.length),q.init(a0),V.push(q),v0.multiplyMatrices(a0.projectionMatrix,a0.matrixWorldInverse),kp.setFromProjectionMatrix(v0,qe,a0.reversedDepth),f0=this.localClippingEnabled,u0=B0.init(this.clippingPlanes,f0),J=Ip.get(oa,Se.length),J.init(),Se.push(J),S1.enabled===!0&&S1.isPresenting===!0){const cm=Y.xr.getDepthSensingMesh();cm!==null&&yv(cm,a0,-1/0,Y.sortObjects)}yv(oa,a0,0,Y.sortObjects),J.finish(),Y.sortObjects===!0&&J.sort(Kt,i0),ym=S1.enabled===!1||S1.isPresenting===!1||S1.hasDepthSensing()===!1,ym&&im.addToRenderList(J,oa),this.info.render.frame++,u0===!0&&B0.beginShadows();const m0=q.state.shadowsArray;Y0.render(m0,oa,a0),u0===!0&&B0.endShadows(),this.info.autoReset===!0&&this.info.reset();const nm=J.opaque,L0=J.transmissive;if(q.setupLights(),a0.isArrayCamera){const cm=a0.cameras;if(L0.length>0)for(let Gm=0,Fm=cm.length;Gm<Fm;Gm++){const Vm=cm[Gm];gy(nm,L0,oa,Vm)}ym&&im.render(oa);for(let Gm=0,Fm=cm.length;Gm<Fm;Gm++){const Vm=cm[Gm];Hv(J,oa,Vm,Vm.viewport)}}else L0.length>0&&gy(nm,L0,oa,a0),ym&&im.render(oa),Hv(J,oa,a0);ae!==null&&ct===0&&(W1.updateMultisampleRenderTarget(ae),W1.updateRenderTargetMipmap(ae)),oa.isScene===!0&&oa.onAfterRender(Y,oa,a0),a1.resetDefaultState(),st=-1,Ct=null,V.pop(),V.length>0?(q=V[V.length-1],u0===!0&&B0.setGlobalState(Y.clippingPlanes,q.state.camera)):q=null,Se.pop(),Se.length>0?J=Se[Se.length-1]:J=null};function yv(oa,a0,m0,nm){if(oa.visible===!1)return;if(oa.layers.test(a0.layers)){if(oa.isGroup)m0=oa.renderOrder;else if(oa.isLOD)oa.autoUpdate===!0&&oa.update(a0);else if(oa.isLight)q.pushLight(oa),oa.castShadow&&q.pushShadow(oa);else if(oa.isSprite){if(!oa.frustumCulled||kp.intersectsSprite(oa)){nm&&rm.setFromMatrixPosition(oa.matrixWorld).applyMatrix4(v0);const cm=S0.update(oa),Gm=oa.material;Gm.visible&&J.push(oa,cm,Gm,m0,rm.z,null)}}else if((oa.isMesh||oa.isLine||oa.isPoints)&&(!oa.frustumCulled||kp.intersectsObject(oa))){const cm=S0.update(oa),Gm=oa.material;if(nm&&(oa.boundingSphere!==void 0?(oa.boundingSphere===null&&oa.computeBoundingSphere(),rm.copy(oa.boundingSphere.center)):(cm.boundingSphere===null&&cm.computeBoundingSphere(),rm.copy(cm.boundingSphere.center)),rm.applyMatrix4(oa.matrixWorld).applyMatrix4(v0)),Array.isArray(Gm)){const Fm=cm.groups;for(let Vm=0,D1=Fm.length;Vm<D1;Vm++){const O1=Fm[Vm],tg=Gm[O1.materialIndex];tg&&tg.visible&&J.push(oa,cm,tg,m0,rm.z,O1)}}else Gm.visible&&J.push(oa,cm,Gm,m0,rm.z,null)}}const L0=oa.children;for(let cm=0,Gm=L0.length;cm<Gm;cm++)yv(L0[cm],a0,m0,nm)}function Hv(oa,a0,m0,nm){const L0=oa.opaque,cm=oa.transmissive,Gm=oa.transparent;q.setupLightsView(m0),u0===!0&&B0.setGlobalState(Y.clippingPlanes,m0),nm&&p1.viewport($t.copy(nm)),L0.length>0&&Qv(L0,a0,m0),cm.length>0&&Qv(cm,a0,m0),Gm.length>0&&Qv(Gm,a0,m0),p1.buffers.depth.setTest(!0),p1.buffers.depth.setMask(!0),p1.buffers.color.setMask(!0),p1.setPolygonOffset(!1)}function gy(oa,a0,m0,nm){if((m0.isScene===!0?m0.overrideMaterial:null)!==null)return;q.state.transmissionRenderTarget[nm.id]===void 0&&(q.state.transmissionRenderTarget[nm.id]=new In(1,1,{generateMipmaps:!0,type:T1.has("EXT_color_buffer_half_float")||T1.has("EXT_color_buffer_float")?yi:sn,minFilter:Dn,samples:4,stencilBuffer:o,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Xt.workingColorSpace}));const L0=q.state.transmissionRenderTarget[nm.id],cm=nm.viewport||$t;L0.setSize(cm.z*Y.transmissionResolutionScale,cm.w*Y.transmissionResolutionScale);const Gm=Y.getRenderTarget(),Fm=Y.getActiveCubeFace(),Vm=Y.getActiveMipmapLevel();Y.setRenderTarget(L0),Y.getClearColor(Mn),sa=Y.getClearAlpha(),sa<1&&Y.setClearColor(16777215,.5),Y.clear(),ym&&im.render(m0);const D1=Y.toneMapping;Y.toneMapping=_n;const O1=nm.viewport;if(nm.viewport!==void 0&&(nm.viewport=void 0),q.setupLightsView(nm),u0===!0&&B0.setGlobalState(Y.clippingPlanes,nm),Qv(oa,m0,nm),W1.updateMultisampleRenderTarget(L0),W1.updateRenderTargetMipmap(L0),T1.has("WEBGL_multisampled_render_to_texture")===!1){let tg=!1;for(let Mg=0,kg=a0.length;Mg<kg;Mg++){const cg=a0[Mg],Ag=cg.object,K1=cg.geometry,G1=cg.material,sg=cg.group;if(G1.side===Xe&&Ag.layers.test(nm.layers)){const Iv=G1.side;G1.side=Te,G1.needsUpdate=!0,Ty(Ag,m0,nm,K1,G1,sg),G1.side=Iv,G1.needsUpdate=!0,tg=!0}}tg===!0&&(W1.updateMultisampleRenderTarget(L0),W1.updateRenderTargetMipmap(L0))}Y.setRenderTarget(Gm,Fm,Vm),Y.setClearColor(Mn,sa),O1!==void 0&&(nm.viewport=O1),Y.toneMapping=D1}function Qv(oa,a0,m0){const nm=a0.isScene===!0?a0.overrideMaterial:null;for(let L0=0,cm=oa.length;L0<cm;L0++){const Gm=oa[L0],Fm=Gm.object,Vm=Gm.geometry,D1=Gm.group;let O1=Gm.material;O1.allowOverride===!0&&nm!==null&&(O1=nm),Fm.layers.test(m0.layers)&&Ty(Fm,a0,m0,Vm,O1,D1)}}function Ty(oa,a0,m0,nm,L0,cm){oa.onBeforeRender(Y,a0,m0,nm,L0,cm),oa.modelViewMatrix.multiplyMatrices(m0.matrixWorldInverse,oa.matrixWorld),oa.normalMatrix.getNormalMatrix(oa.modelViewMatrix),L0.onBeforeRender(Y,a0,m0,nm,oa,cm),L0.transparent===!0&&L0.side===Xe&&L0.forceSinglePass===!1?(L0.side=Te,L0.needsUpdate=!0,Y.renderBufferDirect(m0,a0,nm,L0,oa,cm),L0.side=gn,L0.needsUpdate=!0,Y.renderBufferDirect(m0,a0,nm,L0,oa,cm),L0.side=Xe):Y.renderBufferDirect(m0,a0,nm,L0,oa,cm),oa.onAfterRender(Y,a0,m0,nm,L0,cm)}function $v(oa,a0,m0){a0.isScene!==!0&&(a0=am);const nm=m1.get(oa),L0=q.state.lights,cm=q.state.shadowsArray,Gm=L0.state.version,Fm=Z0.getParameters(oa,L0.state,cm,a0,m0),Vm=Z0.getProgramCacheKey(Fm);let D1=nm.programs;nm.environment=oa.isMeshStandardMaterial?a0.environment:null,nm.fog=a0.fog,nm.envMap=(oa.isMeshStandardMaterial?ng:ug).get(oa.envMap||nm.environment),nm.envMapRotation=nm.environment!==null&&oa.envMap===null?a0.environmentRotation:oa.envMapRotation,D1===void 0&&(oa.addEventListener("dispose",Km),D1=new Map,nm.programs=D1);let O1=D1.get(Vm);if(O1!==void 0){if(nm.currentProgram===O1&&nm.lightsStateVersion===Gm)return wg(oa,Fm),O1}else Fm.uniforms=Z0.getUniforms(oa),oa.onBeforeCompile(Fm,Y),O1=Z0.acquireProgram(Fm,Vm),D1.set(Vm,O1),nm.uniforms=Fm.uniforms;const tg=nm.uniforms;return(!oa.isShaderMaterial&&!oa.isRawShaderMaterial||oa.clipping===!0)&&(tg.clippingPlanes=B0.uniform),wg(oa,Fm),nm.needsLights=Ny(oa),nm.lightsStateVersion=Gm,nm.needsLights&&(tg.ambientLightColor.value=L0.state.ambient,tg.lightProbe.value=L0.state.probe,tg.directionalLights.value=L0.state.directional,tg.directionalLightShadows.value=L0.state.directionalShadow,tg.spotLights.value=L0.state.spot,tg.spotLightShadows.value=L0.state.spotShadow,tg.rectAreaLights.value=L0.state.rectArea,tg.ltc_1.value=L0.state.rectAreaLTC1,tg.ltc_2.value=L0.state.rectAreaLTC2,tg.pointLights.value=L0.state.point,tg.pointLightShadows.value=L0.state.pointShadow,tg.hemisphereLights.value=L0.state.hemi,tg.directionalShadowMap.value=L0.state.directionalShadowMap,tg.directionalShadowMatrix.value=L0.state.directionalShadowMatrix,tg.spotShadowMap.value=L0.state.spotShadowMap,tg.spotLightMatrix.value=L0.state.spotLightMatrix,tg.spotLightMap.value=L0.state.spotLightMap,tg.pointShadowMap.value=L0.state.pointShadowMap,tg.pointShadowMatrix.value=L0.state.pointShadowMatrix),nm.currentProgram=O1,nm.uniformsList=null,O1}function Cv(oa){if(oa.uniformsList===null){const a0=oa.currentProgram.getUniforms();oa.uniformsList=cr.seqWithValue(a0.seq,oa.uniforms)}return oa.uniformsList}function wg(oa,a0){const m0=m1.get(oa);m0.outputColorSpace=a0.outputColorSpace,m0.batching=a0.batching,m0.batchingColor=a0.batchingColor,m0.instancing=a0.instancing,m0.instancingColor=a0.instancingColor,m0.instancingMorph=a0.instancingMorph,m0.skinning=a0.skinning,m0.morphTargets=a0.morphTargets,m0.morphNormals=a0.morphNormals,m0.morphColors=a0.morphColors,m0.morphTargetsCount=a0.morphTargetsCount,m0.numClippingPlanes=a0.numClippingPlanes,m0.numIntersection=a0.numClipIntersection,m0.vertexAlphas=a0.vertexAlphas,m0.vertexTangents=a0.vertexTangents,m0.toneMapping=a0.toneMapping}function Lv(oa,a0,m0,nm,L0){a0.isScene!==!0&&(a0=am),W1.resetTextureUnits();const cm=a0.fog,Gm=nm.isMeshStandardMaterial?a0.environment:null,Fm=ae===null?Y.outputColorSpace:ae.isXRRenderTarget===!0?ae.texture.colorSpace:ai,Vm=(nm.isMeshStandardMaterial?ng:ug).get(nm.envMap||Gm),D1=nm.vertexColors===!0&&!!m0.attributes.color&&m0.attributes.color.itemSize===4,O1=!!m0.attributes.tangent&&(!!nm.normalMap||nm.anisotropy>0),tg=!!m0.morphAttributes.position,Mg=!!m0.morphAttributes.normal,kg=!!m0.morphAttributes.color;let cg=_n;nm.toneMapped&&(ae===null||ae.isXRRenderTarget===!0)&&(cg=Y.toneMapping);const Ag=m0.morphAttributes.position||m0.morphAttributes.normal||m0.morphAttributes.color,K1=Ag!==void 0?Ag.length:0,G1=m1.get(nm),sg=q.state.lights;if(u0===!0&&(f0===!0||oa!==Ct)){const Pt=oa===Ct&&nm.id===st;B0.setState(nm,oa,Pt)}let Iv=!1;nm.version===G1.__version?(G1.needsLights&&G1.lightsStateVersion!==sg.state.version||G1.outputColorSpace!==Fm||L0.isBatchedMesh&&G1.batching===!1||!L0.isBatchedMesh&&G1.batching===!0||L0.isBatchedMesh&&G1.batchingColor===!0&&L0.colorTexture===null||L0.isBatchedMesh&&G1.batchingColor===!1&&L0.colorTexture!==null||L0.isInstancedMesh&&G1.instancing===!1||!L0.isInstancedMesh&&G1.instancing===!0||L0.isSkinnedMesh&&G1.skinning===!1||!L0.isSkinnedMesh&&G1.skinning===!0||L0.isInstancedMesh&&G1.instancingColor===!0&&L0.instanceColor===null||L0.isInstancedMesh&&G1.instancingColor===!1&&L0.instanceColor!==null||L0.isInstancedMesh&&G1.instancingMorph===!0&&L0.morphTexture===null||L0.isInstancedMesh&&G1.instancingMorph===!1&&L0.morphTexture!==null||G1.envMap!==Vm||nm.fog===!0&&G1.fog!==cm||G1.numClippingPlanes!==void 0&&(G1.numClippingPlanes!==B0.numPlanes||G1.numIntersection!==B0.numIntersection)||G1.vertexAlphas!==D1||G1.vertexTangents!==O1||G1.morphTargets!==tg||G1.morphNormals!==Mg||G1.morphColors!==kg||G1.toneMapping!==cg||G1.morphTargetsCount!==K1)&&(Iv=!0):(Iv=!0,G1.__version=nm.version);let d0=G1.currentProgram;Iv===!0&&(d0=$v(nm,a0,L0));let y=!1,N=!1,K=!1;const ne=d0.getUniforms(),Rt=G1.uniforms;if(p1.useProgram(d0.program)&&(y=!0,N=!0,K=!0),nm.id!==st&&(st=nm.id,N=!0),y||Ct!==oa){p1.buffers.depth.getReversed()&&oa.reversedDepth!==!0&&(oa._reversedDepth=!0,oa.updateProjectionMatrix()),ne.setValue(h0,"projectionMatrix",oa.projectionMatrix),ne.setValue(h0,"viewMatrix",oa.matrixWorldInverse);const Pt=ne.map.cameraPosition;Pt!==void 0&&Pt.setValue(h0,p0.setFromMatrixPosition(oa.matrixWorld)),I1.logarithmicDepthBuffer&&ne.setValue(h0,"logDepthBufFC",2/(Math.log(oa.far+1)/Math.LN2)),(nm.isMeshPhongMaterial||nm.isMeshToonMaterial||nm.isMeshLambertMaterial||nm.isMeshBasicMaterial||nm.isMeshStandardMaterial||nm.isShaderMaterial)&&ne.setValue(h0,"isOrthographic",oa.isOrthographicCamera===!0),Ct!==oa&&(Ct=oa,N=!0,K=!0)}if(L0.isSkinnedMesh){ne.setOptional(h0,L0,"bindMatrix"),ne.setOptional(h0,L0,"bindMatrixInverse");const Pt=L0.skeleton;Pt&&(Pt.boneTexture===null&&Pt.computeBoneTexture(),ne.setValue(h0,"boneTexture",Pt.boneTexture,W1))}L0.isBatchedMesh&&(ne.setOptional(h0,L0,"batchingTexture"),ne.setValue(h0,"batchingTexture",L0._matricesTexture,W1),ne.setOptional(h0,L0,"batchingIdTexture"),ne.setValue(h0,"batchingIdTexture",L0._indirectTexture,W1),ne.setOptional(h0,L0,"batchingColorTexture"),L0._colorsTexture!==null&&ne.setValue(h0,"batchingColorTexture",L0._colorsTexture,W1));const lt=m0.morphAttributes;if((lt.position!==void 0||lt.normal!==void 0||lt.color!==void 0)&&om.update(L0,m0,d0),(N||G1.receiveShadow!==L0.receiveShadow)&&(G1.receiveShadow=L0.receiveShadow,ne.setValue(h0,"receiveShadow",L0.receiveShadow)),nm.isMeshGouraudMaterial&&nm.envMap!==null&&(Rt.envMap.value=Vm,Rt.flipEnvMap.value=Vm.isCubeTexture&&Vm.isRenderTargetTexture===!1?-1:1),nm.isMeshStandardMaterial&&nm.envMap===null&&a0.environment!==null&&(Rt.envMapIntensity.value=a0.environmentIntensity),N&&(ne.setValue(h0,"toneMappingExposure",Y.toneMappingExposure),G1.needsLights&&Pv(Rt,K),cm&&nm.fog===!0&&Pp.refreshFogUniforms(Rt,cm),Pp.refreshMaterialUniforms(Rt,nm,qo,$o,q.state.transmissionRenderTarget[oa.id]),cr.upload(h0,Cv(G1),Rt,W1)),nm.isShaderMaterial&&nm.uniformsNeedUpdate===!0&&(cr.upload(h0,Cv(G1),Rt,W1),nm.uniformsNeedUpdate=!1),nm.isSpriteMaterial&&ne.setValue(h0,"center",L0.center),ne.setValue(h0,"modelViewMatrix",L0.modelViewMatrix),ne.setValue(h0,"normalMatrix",L0.normalMatrix),ne.setValue(h0,"modelMatrix",L0.matrixWorld),nm.isShaderMaterial||nm.isRawShaderMaterial){const Pt=nm.uniformsGroups;for(let Ht=0,Dt=Pt.length;Ht<Dt;Ht++){const Zt=Pt[Ht];hg.update(Zt,d0),hg.bind(Zt,d0)}}return d0}function Pv(oa,a0){oa.ambientLightColor.needsUpdate=a0,oa.lightProbe.needsUpdate=a0,oa.directionalLights.needsUpdate=a0,oa.directionalLightShadows.needsUpdate=a0,oa.pointLights.needsUpdate=a0,oa.pointLightShadows.needsUpdate=a0,oa.spotLights.needsUpdate=a0,oa.spotLightShadows.needsUpdate=a0,oa.rectAreaLights.needsUpdate=a0,oa.hemisphereLights.needsUpdate=a0}function Ny(oa){return oa.isMeshLambertMaterial||oa.isMeshToonMaterial||oa.isMeshPhongMaterial||oa.isMeshStandardMaterial||oa.isShadowMaterial||oa.isShaderMaterial&&oa.lights===!0}this.getActiveCubeFace=function(){return se},this.getActiveMipmapLevel=function(){return ct},this.getRenderTarget=function(){return ae},this.setRenderTargetTextures=function(oa,a0,m0){const nm=m1.get(oa);nm.__autoAllocateDepthBuffer=oa.resolveDepthBuffer===!1,nm.__autoAllocateDepthBuffer===!1&&(nm.__useRenderToTexture=!1),m1.get(oa.texture).__webglTexture=a0,m1.get(oa.depthTexture).__webglTexture=nm.__autoAllocateDepthBuffer?void 0:m0,nm.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(oa,a0){const m0=m1.get(oa);m0.__webglFramebuffer=a0,m0.__useDefaultFramebuffer=a0===void 0};const pg=h0.createFramebuffer();this.setRenderTarget=function(oa,a0=0,m0=0){ae=oa,se=a0,ct=m0;let nm=!0,L0=null,cm=!1,Gm=!1;if(oa){const Fm=m1.get(oa);if(Fm.__useDefaultFramebuffer!==void 0)p1.bindFramebuffer(h0.FRAMEBUFFER,null),nm=!1;else if(Fm.__webglFramebuffer===void 0)W1.setupRenderTarget(oa);else if(Fm.__hasExternalTextures)W1.rebindTextures(oa,m1.get(oa.texture).__webglTexture,m1.get(oa.depthTexture).__webglTexture);else if(oa.depthBuffer){const O1=oa.depthTexture;if(Fm.__boundDepthTexture!==O1){if(O1!==null&&m1.has(O1)&&(oa.width!==O1.image.width||oa.height!==O1.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");W1.setupDepthRenderbuffer(oa)}}const Vm=oa.texture;(Vm.isData3DTexture||Vm.isDataArrayTexture||Vm.isCompressedArrayTexture)&&(Gm=!0);const D1=m1.get(oa).__webglFramebuffer;oa.isWebGLCubeRenderTarget?(Array.isArray(D1[a0])?L0=D1[a0][m0]:L0=D1[a0],cm=!0):oa.samples>0&&W1.useMultisampledRTT(oa)===!1?L0=m1.get(oa).__webglMultisampledFramebuffer:Array.isArray(D1)?L0=D1[m0]:L0=D1,$t.copy(oa.viewport),jo.copy(oa.scissor),Lp=oa.scissorTest}else $t.copy(Up).multiplyScalar(qo).floor(),jo.copy(l0).multiplyScalar(qo).floor(),Lp=y0;if(m0!==0&&(L0=pg),p1.bindFramebuffer(h0.FRAMEBUFFER,L0)&&nm&&p1.drawBuffers(oa,L0),p1.viewport($t),p1.scissor(jo),p1.setScissorTest(Lp),cm){const Fm=m1.get(oa.texture);h0.framebufferTexture2D(h0.FRAMEBUFFER,h0.COLOR_ATTACHMENT0,h0.TEXTURE_CUBE_MAP_POSITIVE_X+a0,Fm.__webglTexture,m0)}else if(Gm){const Fm=a0;for(let Vm=0;Vm<oa.textures.length;Vm++){const D1=m1.get(oa.textures[Vm]);h0.framebufferTextureLayer(h0.FRAMEBUFFER,h0.COLOR_ATTACHMENT0+Vm,D1.__webglTexture,m0,Fm)}}else if(oa!==null&&m0!==0){const Fm=m1.get(oa.texture);h0.framebufferTexture2D(h0.FRAMEBUFFER,h0.COLOR_ATTACHMENT0,h0.TEXTURE_2D,Fm.__webglTexture,m0)}st=-1},this.readRenderTargetPixels=function(oa,a0,m0,nm,L0,cm,Gm,Fm=0){if(!(oa&&oa.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Vm=m1.get(oa).__webglFramebuffer;if(oa.isWebGLCubeRenderTarget&&Gm!==void 0&&(Vm=Vm[Gm]),Vm){p1.bindFramebuffer(h0.FRAMEBUFFER,Vm);try{const D1=oa.textures[Fm],O1=D1.format,tg=D1.type;if(!I1.textureFormatReadable(O1)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!I1.textureTypeReadable(tg)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}a0>=0&&a0<=oa.width-nm&&m0>=0&&m0<=oa.height-L0&&(oa.textures.length>1&&h0.readBuffer(h0.COLOR_ATTACHMENT0+Fm),h0.readPixels(a0,m0,nm,L0,Om.convert(O1),Om.convert(tg),cm))}finally{const D1=ae!==null?m1.get(ae).__webglFramebuffer:null;p1.bindFramebuffer(h0.FRAMEBUFFER,D1)}}},this.readRenderTargetPixelsAsync=async function(oa,a0,m0,nm,L0,cm,Gm,Fm=0){if(!(oa&&oa.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Vm=m1.get(oa).__webglFramebuffer;if(oa.isWebGLCubeRenderTarget&&Gm!==void 0&&(Vm=Vm[Gm]),Vm)if(a0>=0&&a0<=oa.width-nm&&m0>=0&&m0<=oa.height-L0){p1.bindFramebuffer(h0.FRAMEBUFFER,Vm);const D1=oa.textures[Fm],O1=D1.format,tg=D1.type;if(!I1.textureFormatReadable(O1))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!I1.textureTypeReadable(tg))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const Mg=h0.createBuffer();h0.bindBuffer(h0.PIXEL_PACK_BUFFER,Mg),h0.bufferData(h0.PIXEL_PACK_BUFFER,cm.byteLength,h0.STREAM_READ),oa.textures.length>1&&h0.readBuffer(h0.COLOR_ATTACHMENT0+Fm),h0.readPixels(a0,m0,nm,L0,Om.convert(O1),Om.convert(tg),0);const kg=ae!==null?m1.get(ae).__webglFramebuffer:null;p1.bindFramebuffer(h0.FRAMEBUFFER,kg);const cg=h0.fenceSync(h0.SYNC_GPU_COMMANDS_COMPLETE,0);return h0.flush(),await kl(h0,cg,4),h0.bindBuffer(h0.PIXEL_PACK_BUFFER,Mg),h0.getBufferSubData(h0.PIXEL_PACK_BUFFER,0,cm),h0.deleteBuffer(Mg),h0.deleteSync(cg),cm}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(oa,a0=null,m0=0){const nm=Math.pow(2,-m0),L0=Math.floor(oa.image.width*nm),cm=Math.floor(oa.image.height*nm),Gm=a0!==null?a0.x:0,Fm=a0!==null?a0.y:0;W1.setTexture2D(oa,0),h0.copyTexSubImage2D(h0.TEXTURE_2D,m0,0,0,Gm,Fm,L0,cm),p1.unbindTexture()};const et=h0.createFramebuffer(),t0=h0.createFramebuffer();this.copyTextureToTexture=function(oa,a0,m0=null,nm=null,L0=0,cm=null){cm===null&&(L0!==0?(Ei("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),cm=L0,L0=0):cm=0);let Gm,Fm,Vm,D1,O1,tg,Mg,kg,cg;const Ag=oa.isCompressedTexture?oa.mipmaps[cm]:oa.image;if(m0!==null)Gm=m0.max.x-m0.min.x,Fm=m0.max.y-m0.min.y,Vm=m0.isBox3?m0.max.z-m0.min.z:1,D1=m0.min.x,O1=m0.min.y,tg=m0.isBox3?m0.min.z:0;else{const lt=Math.pow(2,-L0);Gm=Math.floor(Ag.width*lt),Fm=Math.floor(Ag.height*lt),oa.isDataArrayTexture?Vm=Ag.depth:oa.isData3DTexture?Vm=Math.floor(Ag.depth*lt):Vm=1,D1=0,O1=0,tg=0}nm!==null?(Mg=nm.x,kg=nm.y,cg=nm.z):(Mg=0,kg=0,cg=0);const K1=Om.convert(a0.format),G1=Om.convert(a0.type);let sg;a0.isData3DTexture?(W1.setTexture3D(a0,0),sg=h0.TEXTURE_3D):a0.isDataArrayTexture||a0.isCompressedArrayTexture?(W1.setTexture2DArray(a0,0),sg=h0.TEXTURE_2D_ARRAY):(W1.setTexture2D(a0,0),sg=h0.TEXTURE_2D),h0.pixelStorei(h0.UNPACK_FLIP_Y_WEBGL,a0.flipY),h0.pixelStorei(h0.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a0.premultiplyAlpha),h0.pixelStorei(h0.UNPACK_ALIGNMENT,a0.unpackAlignment);const Iv=h0.getParameter(h0.UNPACK_ROW_LENGTH),d0=h0.getParameter(h0.UNPACK_IMAGE_HEIGHT),y=h0.getParameter(h0.UNPACK_SKIP_PIXELS),N=h0.getParameter(h0.UNPACK_SKIP_ROWS),K=h0.getParameter(h0.UNPACK_SKIP_IMAGES);h0.pixelStorei(h0.UNPACK_ROW_LENGTH,Ag.width),h0.pixelStorei(h0.UNPACK_IMAGE_HEIGHT,Ag.height),h0.pixelStorei(h0.UNPACK_SKIP_PIXELS,D1),h0.pixelStorei(h0.UNPACK_SKIP_ROWS,O1),h0.pixelStorei(h0.UNPACK_SKIP_IMAGES,tg);const ne=oa.isDataArrayTexture||oa.isData3DTexture,Rt=a0.isDataArrayTexture||a0.isData3DTexture;if(oa.isDepthTexture){const lt=m1.get(oa),Pt=m1.get(a0),Ht=m1.get(lt.__renderTarget),Dt=m1.get(Pt.__renderTarget);p1.bindFramebuffer(h0.READ_FRAMEBUFFER,Ht.__webglFramebuffer),p1.bindFramebuffer(h0.DRAW_FRAMEBUFFER,Dt.__webglFramebuffer);for(let Zt=0;Zt<Vm;Zt++)ne&&(h0.framebufferTextureLayer(h0.READ_FRAMEBUFFER,h0.COLOR_ATTACHMENT0,m1.get(oa).__webglTexture,L0,tg+Zt),h0.framebufferTextureLayer(h0.DRAW_FRAMEBUFFER,h0.COLOR_ATTACHMENT0,m1.get(a0).__webglTexture,cm,cg+Zt)),h0.blitFramebuffer(D1,O1,Gm,Fm,Mg,kg,Gm,Fm,h0.DEPTH_BUFFER_BIT,h0.NEAREST);p1.bindFramebuffer(h0.READ_FRAMEBUFFER,null),p1.bindFramebuffer(h0.DRAW_FRAMEBUFFER,null)}else if(L0!==0||oa.isRenderTargetTexture||m1.has(oa)){const lt=m1.get(oa),Pt=m1.get(a0);p1.bindFramebuffer(h0.READ_FRAMEBUFFER,et),p1.bindFramebuffer(h0.DRAW_FRAMEBUFFER,t0);for(let Ht=0;Ht<Vm;Ht++)ne?h0.framebufferTextureLayer(h0.READ_FRAMEBUFFER,h0.COLOR_ATTACHMENT0,lt.__webglTexture,L0,tg+Ht):h0.framebufferTexture2D(h0.READ_FRAMEBUFFER,h0.COLOR_ATTACHMENT0,h0.TEXTURE_2D,lt.__webglTexture,L0),Rt?h0.framebufferTextureLayer(h0.DRAW_FRAMEBUFFER,h0.COLOR_ATTACHMENT0,Pt.__webglTexture,cm,cg+Ht):h0.framebufferTexture2D(h0.DRAW_FRAMEBUFFER,h0.COLOR_ATTACHMENT0,h0.TEXTURE_2D,Pt.__webglTexture,cm),L0!==0?h0.blitFramebuffer(D1,O1,Gm,Fm,Mg,kg,Gm,Fm,h0.COLOR_BUFFER_BIT,h0.NEAREST):Rt?h0.copyTexSubImage3D(sg,cm,Mg,kg,cg+Ht,D1,O1,Gm,Fm):h0.copyTexSubImage2D(sg,cm,Mg,kg,D1,O1,Gm,Fm);p1.bindFramebuffer(h0.READ_FRAMEBUFFER,null),p1.bindFramebuffer(h0.DRAW_FRAMEBUFFER,null)}else Rt?oa.isDataTexture||oa.isData3DTexture?h0.texSubImage3D(sg,cm,Mg,kg,cg,Gm,Fm,Vm,K1,G1,Ag.data):a0.isCompressedArrayTexture?h0.compressedTexSubImage3D(sg,cm,Mg,kg,cg,Gm,Fm,Vm,K1,Ag.data):h0.texSubImage3D(sg,cm,Mg,kg,cg,Gm,Fm,Vm,K1,G1,Ag):oa.isDataTexture?h0.texSubImage2D(h0.TEXTURE_2D,cm,Mg,kg,Gm,Fm,K1,G1,Ag.data):oa.isCompressedTexture?h0.compressedTexSubImage2D(h0.TEXTURE_2D,cm,Mg,kg,Ag.width,Ag.height,K1,Ag.data):h0.texSubImage2D(h0.TEXTURE_2D,cm,Mg,kg,Gm,Fm,K1,G1,Ag);h0.pixelStorei(h0.UNPACK_ROW_LENGTH,Iv),h0.pixelStorei(h0.UNPACK_IMAGE_HEIGHT,d0),h0.pixelStorei(h0.UNPACK_SKIP_PIXELS,y),h0.pixelStorei(h0.UNPACK_SKIP_ROWS,N),h0.pixelStorei(h0.UNPACK_SKIP_IMAGES,K),cm===0&&a0.generateMipmaps&&h0.generateMipmap(sg),p1.unbindTexture()},this.initRenderTarget=function(oa){m1.get(oa).__webglFramebuffer===void 0&&W1.setupRenderTarget(oa)},this.initTexture=function(oa){oa.isCubeTexture?W1.setTextureCube(oa,0):oa.isData3DTexture?W1.setTexture3D(oa,0):oa.isDataArrayTexture||oa.isCompressedArrayTexture?W1.setTexture2DArray(oa,0):W1.setTexture2D(oa,0),p1.unbindTexture()},this.resetState=function(){se=0,ct=0,ae=null,p1.reset(),a1.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return qe}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const r=this.getContext();r.drawingBufferColorSpace=Xt._getDrawingBufferColorSpace(e),r.unpackColorSpace=Xt._getUnpackColorSpace()}}const po={type:"change"},ra={type:"start"},Xo={type:"end"},rr=new Qs,mo=new fn,cp=Math.cos(70*Vl.DEG2RAD),ue=new U,ye=2*Math.PI,Qt={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},ns=1e-6;class hp extends Tc{constructor(e,r=null){super(e,r),this.state=Qt.NONE,this.target=new U,this.cursor=new U,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.keyRotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:Qn.ROTATE,MIDDLE:Qn.DOLLY,RIGHT:Qn.PAN},this.touches={ONE:$n.ROTATE,TWO:$n.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this._lastPosition=new U,this._lastQuaternion=new Un,this._lastTargetPosition=new U,this._quat=new Un().setFromUnitVectors(e.up,new U(0,1,0)),this._quatInverse=this._quat.clone().invert(),this._spherical=new za,this._sphericalDelta=new za,this._scale=1,this._panOffset=new U,this._rotateStart=new Bt,this._rotateEnd=new Bt,this._rotateDelta=new Bt,this._panStart=new Bt,this._panEnd=new Bt,this._panDelta=new Bt,this._dollyStart=new Bt,this._dollyEnd=new Bt,this._dollyDelta=new Bt,this._dollyDirection=new U,this._mouse=new Bt,this._performCursorZoom=!1,this._pointers=[],this._pointerPositions={},this._controlActive=!1,this._onPointerMove=dp.bind(this),this._onPointerDown=up.bind(this),this._onPointerUp=fp.bind(this),this._onContextMenu=Mp.bind(this),this._onMouseWheel=_p.bind(this),this._onKeyDown=gp.bind(this),this._onTouchStart=vp.bind(this),this._onTouchMove=xp.bind(this),this._onMouseDown=pp.bind(this),this._onMouseMove=mp.bind(this),this._interceptControlDown=Sp.bind(this),this._interceptControlUp=Ep.bind(this),this.domElement!==null&&this.connect(this.domElement),this.update()}connect(e){super.connect(e),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerUp),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1}),this.domElement.getRootNode().addEventListener("keydown",this._interceptControlDown,{passive:!0,capture:!0}),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerUp),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.stopListenToKeyEvents(),this.domElement.getRootNode().removeEventListener("keydown",this._interceptControlDown,{capture:!0}),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}getPolarAngle(){return this._spherical.phi}getAzimuthalAngle(){return this._spherical.theta}getDistance(){return this.object.position.distanceTo(this.target)}listenToKeyEvents(e){e.addEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=e}stopListenToKeyEvents(){this._domElementKeyEvents!==null&&(this._domElementKeyEvents.removeEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=null)}saveState(){this.target0.copy(this.target),this.position0.copy(this.object.position),this.zoom0=this.object.zoom}reset(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(po),this.update(),this.state=Qt.NONE}update(e=null){const r=this.object.position;ue.copy(r).sub(this.target),ue.applyQuaternion(this._quat),this._spherical.setFromVector3(ue),this.autoRotate&&this.state===Qt.NONE&&this._rotateLeft(this._getAutoRotationAngle(e)),this.enableDamping?(this._spherical.theta+=this._sphericalDelta.theta*this.dampingFactor,this._spherical.phi+=this._sphericalDelta.phi*this.dampingFactor):(this._spherical.theta+=this._sphericalDelta.theta,this._spherical.phi+=this._sphericalDelta.phi);let n=this.minAzimuthAngle,a=this.maxAzimuthAngle;isFinite(n)&&isFinite(a)&&(n<-Math.PI?n+=ye:n>Math.PI&&(n-=ye),a<-Math.PI?a+=ye:a>Math.PI&&(a-=ye),n<=a?this._spherical.theta=Math.max(n,Math.min(a,this._spherical.theta)):this._spherical.theta=this._spherical.theta>(n+a)/2?Math.max(n,this._spherical.theta):Math.min(a,this._spherical.theta)),this._spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this._spherical.phi)),this._spherical.makeSafe(),this.enableDamping===!0?this.target.addScaledVector(this._panOffset,this.dampingFactor):this.target.add(this._panOffset),this.target.sub(this.cursor),this.target.clampLength(this.minTargetRadius,this.maxTargetRadius),this.target.add(this.cursor);let o=!1;if(this.zoomToCursor&&this._performCursorZoom||this.object.isOrthographicCamera)this._spherical.radius=this._clampDistance(this._spherical.radius);else{const l=this._spherical.radius;this._spherical.radius=this._clampDistance(this._spherical.radius*this._scale),o=l!=this._spherical.radius}if(ue.setFromSpherical(this._spherical),ue.applyQuaternion(this._quatInverse),r.copy(this.target).add(ue),this.object.lookAt(this.target),this.enableDamping===!0?(this._sphericalDelta.theta*=1-this.dampingFactor,this._sphericalDelta.phi*=1-this.dampingFactor,this._panOffset.multiplyScalar(1-this.dampingFactor)):(this._sphericalDelta.set(0,0,0),this._panOffset.set(0,0,0)),this.zoomToCursor&&this._performCursorZoom){let l=null;if(this.object.isPerspectiveCamera){const u=ue.length();l=this._clampDistance(u*this._scale);const c=u-l;this.object.position.addScaledVector(this._dollyDirection,c),this.object.updateMatrixWorld(),o=!!c}else if(this.object.isOrthographicCamera){const u=new U(this._mouse.x,this._mouse.y,0);u.unproject(this.object);const c=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),this.object.updateProjectionMatrix(),o=c!==this.object.zoom;const h=new U(this._mouse.x,this._mouse.y,0);h.unproject(this.object),this.object.position.sub(h).add(u),this.object.updateMatrixWorld(),l=ue.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),this.zoomToCursor=!1;l!==null&&(this.screenSpacePanning?this.target.set(0,0,-1).transformDirection(this.object.matrix).multiplyScalar(l).add(this.object.position):(rr.origin.copy(this.object.position),rr.direction.set(0,0,-1).transformDirection(this.object.matrix),Math.abs(this.object.up.dot(rr.direction))<cp?this.object.lookAt(this.target):(mo.setFromNormalAndCoplanarPoint(this.object.up,this.target),rr.intersectPlane(mo,this.target))))}else if(this.object.isOrthographicCamera){const l=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),l!==this.object.zoom&&(this.object.updateProjectionMatrix(),o=!0)}return this._scale=1,this._performCursorZoom=!1,o||this._lastPosition.distanceToSquared(this.object.position)>ns||8*(1-this._lastQuaternion.dot(this.object.quaternion))>ns||this._lastTargetPosition.distanceToSquared(this.target)>ns?(this.dispatchEvent(po),this._lastPosition.copy(this.object.position),this._lastQuaternion.copy(this.object.quaternion),this._lastTargetPosition.copy(this.target),!0):!1}_getAutoRotationAngle(e){return e!==null?ye/60*this.autoRotateSpeed*e:ye/60/60*this.autoRotateSpeed}_getZoomScale(e){const r=Math.abs(e*.01);return Math.pow(.95,this.zoomSpeed*r)}_rotateLeft(e){this._sphericalDelta.theta-=e}_rotateUp(e){this._sphericalDelta.phi-=e}_panLeft(e,r){ue.setFromMatrixColumn(r,0),ue.multiplyScalar(-e),this._panOffset.add(ue)}_panUp(e,r){this.screenSpacePanning===!0?ue.setFromMatrixColumn(r,1):(ue.setFromMatrixColumn(r,0),ue.crossVectors(this.object.up,ue)),ue.multiplyScalar(e),this._panOffset.add(ue)}_pan(e,r){const n=this.domElement;if(this.object.isPerspectiveCamera){const a=this.object.position;ue.copy(a).sub(this.target);let o=ue.length();o*=Math.tan(this.object.fov/2*Math.PI/180),this._panLeft(2*e*o/n.clientHeight,this.object.matrix),this._panUp(2*r*o/n.clientHeight,this.object.matrix)}else this.object.isOrthographicCamera?(this._panLeft(e*(this.object.right-this.object.left)/this.object.zoom/n.clientWidth,this.object.matrix),this._panUp(r*(this.object.top-this.object.bottom)/this.object.zoom/n.clientHeight,this.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),this.enablePan=!1)}_dollyOut(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale/=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_dollyIn(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale*=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_updateZoomParameters(e,r){if(!this.zoomToCursor)return;this._performCursorZoom=!0;const n=this.domElement.getBoundingClientRect(),a=e-n.left,o=r-n.top,l=n.width,u=n.height;this._mouse.x=a/l*2-1,this._mouse.y=-(o/u)*2+1,this._dollyDirection.set(this._mouse.x,this._mouse.y,1).unproject(this.object).sub(this.object.position).normalize()}_clampDistance(e){return Math.max(this.minDistance,Math.min(this.maxDistance,e))}_handleMouseDownRotate(e){this._rotateStart.set(e.clientX,e.clientY)}_handleMouseDownDolly(e){this._updateZoomParameters(e.clientX,e.clientX),this._dollyStart.set(e.clientX,e.clientY)}_handleMouseDownPan(e){this._panStart.set(e.clientX,e.clientY)}_handleMouseMoveRotate(e){this._rotateEnd.set(e.clientX,e.clientY),this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const r=this.domElement;this._rotateLeft(ye*this._rotateDelta.x/r.clientHeight),this._rotateUp(ye*this._rotateDelta.y/r.clientHeight),this._rotateStart.copy(this._rotateEnd),this.update()}_handleMouseMoveDolly(e){this._dollyEnd.set(e.clientX,e.clientY),this._dollyDelta.subVectors(this._dollyEnd,this._dollyStart),this._dollyDelta.y>0?this._dollyOut(this._getZoomScale(this._dollyDelta.y)):this._dollyDelta.y<0&&this._dollyIn(this._getZoomScale(this._dollyDelta.y)),this._dollyStart.copy(this._dollyEnd),this.update()}_handleMouseMovePan(e){this._panEnd.set(e.clientX,e.clientY),this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd),this.update()}_handleMouseWheel(e){this._updateZoomParameters(e.clientX,e.clientY),e.deltaY<0?this._dollyIn(this._getZoomScale(e.deltaY)):e.deltaY>0&&this._dollyOut(this._getZoomScale(e.deltaY)),this.update()}_handleKeyDown(e){let r=!1;switch(e.code){case this.keys.UP:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateUp(ye*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,this.keyPanSpeed),r=!0;break;case this.keys.BOTTOM:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateUp(-ye*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,-this.keyPanSpeed),r=!0;break;case this.keys.LEFT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateLeft(ye*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(this.keyPanSpeed,0),r=!0;break;case this.keys.RIGHT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateLeft(-ye*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(-this.keyPanSpeed,0),r=!0;break}r&&(e.preventDefault(),this.update())}_handleTouchStartRotate(e){if(this._pointers.length===1)this._rotateStart.set(e.pageX,e.pageY);else{const r=this._getSecondPointerPosition(e),n=.5*(e.pageX+r.x),a=.5*(e.pageY+r.y);this._rotateStart.set(n,a)}}_handleTouchStartPan(e){if(this._pointers.length===1)this._panStart.set(e.pageX,e.pageY);else{const r=this._getSecondPointerPosition(e),n=.5*(e.pageX+r.x),a=.5*(e.pageY+r.y);this._panStart.set(n,a)}}_handleTouchStartDolly(e){const r=this._getSecondPointerPosition(e),n=e.pageX-r.x,a=e.pageY-r.y,o=Math.sqrt(n*n+a*a);this._dollyStart.set(0,o)}_handleTouchStartDollyPan(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enablePan&&this._handleTouchStartPan(e)}_handleTouchStartDollyRotate(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enableRotate&&this._handleTouchStartRotate(e)}_handleTouchMoveRotate(e){if(this._pointers.length==1)this._rotateEnd.set(e.pageX,e.pageY);else{const n=this._getSecondPointerPosition(e),a=.5*(e.pageX+n.x),o=.5*(e.pageY+n.y);this._rotateEnd.set(a,o)}this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const r=this.domElement;this._rotateLeft(ye*this._rotateDelta.x/r.clientHeight),this._rotateUp(ye*this._rotateDelta.y/r.clientHeight),this._rotateStart.copy(this._rotateEnd)}_handleTouchMovePan(e){if(this._pointers.length===1)this._panEnd.set(e.pageX,e.pageY);else{const r=this._getSecondPointerPosition(e),n=.5*(e.pageX+r.x),a=.5*(e.pageY+r.y);this._panEnd.set(n,a)}this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd)}_handleTouchMoveDolly(e){const r=this._getSecondPointerPosition(e),n=e.pageX-r.x,a=e.pageY-r.y,o=Math.sqrt(n*n+a*a);this._dollyEnd.set(0,o),this._dollyDelta.set(0,Math.pow(this._dollyEnd.y/this._dollyStart.y,this.zoomSpeed)),this._dollyOut(this._dollyDelta.y),this._dollyStart.copy(this._dollyEnd);const l=(e.pageX+r.x)*.5,u=(e.pageY+r.y)*.5;this._updateZoomParameters(l,u)}_handleTouchMoveDollyPan(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enablePan&&this._handleTouchMovePan(e)}_handleTouchMoveDollyRotate(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enableRotate&&this._handleTouchMoveRotate(e)}_addPointer(e){this._pointers.push(e.pointerId)}_removePointer(e){delete this._pointerPositions[e.pointerId];for(let r=0;r<this._pointers.length;r++)if(this._pointers[r]==e.pointerId){this._pointers.splice(r,1);return}}_isTrackingPointer(e){for(let r=0;r<this._pointers.length;r++)if(this._pointers[r]==e.pointerId)return!0;return!1}_trackPointer(e){let r=this._pointerPositions[e.pointerId];r===void 0&&(r=new Bt,this._pointerPositions[e.pointerId]=r),r.set(e.pageX,e.pageY)}_getSecondPointerPosition(e){const r=e.pointerId===this._pointers[0]?this._pointers[1]:this._pointers[0];return this._pointerPositions[r]}_customWheelEvent(e){const r=e.deltaMode,n={clientX:e.clientX,clientY:e.clientY,deltaY:e.deltaY};switch(r){case 1:n.deltaY*=16;break;case 2:n.deltaY*=100;break}return e.ctrlKey&&!this._controlActive&&(n.deltaY*=10),n}}function up(t){this.enabled!==!1&&(this._pointers.length===0&&(this.domElement.setPointerCapture(t.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerup",this._onPointerUp)),!this._isTrackingPointer(t)&&(this._addPointer(t),t.pointerType==="touch"?this._onTouchStart(t):this._onMouseDown(t)))}function dp(t){this.enabled!==!1&&(t.pointerType==="touch"?this._onTouchMove(t):this._onMouseMove(t))}function fp(t){switch(this._removePointer(t),this._pointers.length){case 0:this.domElement.releasePointerCapture(t.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.dispatchEvent(Xo),this.state=Qt.NONE;break;case 1:const e=this._pointers[0],r=this._pointerPositions[e];this._onTouchStart({pointerId:e,pageX:r.x,pageY:r.y});break}}function pp(t){let e;switch(t.button){case 0:e=this.mouseButtons.LEFT;break;case 1:e=this.mouseButtons.MIDDLE;break;case 2:e=this.mouseButtons.RIGHT;break;default:e=-1}switch(e){case Qn.DOLLY:if(this.enableZoom===!1)return;this._handleMouseDownDolly(t),this.state=Qt.DOLLY;break;case Qn.ROTATE:if(t.ctrlKey||t.metaKey||t.shiftKey){if(this.enablePan===!1)return;this._handleMouseDownPan(t),this.state=Qt.PAN}else{if(this.enableRotate===!1)return;this._handleMouseDownRotate(t),this.state=Qt.ROTATE}break;case Qn.PAN:if(t.ctrlKey||t.metaKey||t.shiftKey){if(this.enableRotate===!1)return;this._handleMouseDownRotate(t),this.state=Qt.ROTATE}else{if(this.enablePan===!1)return;this._handleMouseDownPan(t),this.state=Qt.PAN}break;default:this.state=Qt.NONE}this.state!==Qt.NONE&&this.dispatchEvent(ra)}function mp(t){switch(this.state){case Qt.ROTATE:if(this.enableRotate===!1)return;this._handleMouseMoveRotate(t);break;case Qt.DOLLY:if(this.enableZoom===!1)return;this._handleMouseMoveDolly(t);break;case Qt.PAN:if(this.enablePan===!1)return;this._handleMouseMovePan(t);break}}function _p(t){this.enabled===!1||this.enableZoom===!1||this.state!==Qt.NONE||(t.preventDefault(),this.dispatchEvent(ra),this._handleMouseWheel(this._customWheelEvent(t)),this.dispatchEvent(Xo))}function gp(t){this.enabled!==!1&&this._handleKeyDown(t)}function vp(t){switch(this._trackPointer(t),this._pointers.length){case 1:switch(this.touches.ONE){case $n.ROTATE:if(this.enableRotate===!1)return;this._handleTouchStartRotate(t),this.state=Qt.TOUCH_ROTATE;break;case $n.PAN:if(this.enablePan===!1)return;this._handleTouchStartPan(t),this.state=Qt.TOUCH_PAN;break;default:this.state=Qt.NONE}break;case 2:switch(this.touches.TWO){case $n.DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchStartDollyPan(t),this.state=Qt.TOUCH_DOLLY_PAN;break;case $n.DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchStartDollyRotate(t),this.state=Qt.TOUCH_DOLLY_ROTATE;break;default:this.state=Qt.NONE}break;default:this.state=Qt.NONE}this.state!==Qt.NONE&&this.dispatchEvent(ra)}function xp(t){switch(this._trackPointer(t),this.state){case Qt.TOUCH_ROTATE:if(this.enableRotate===!1)return;this._handleTouchMoveRotate(t),this.update();break;case Qt.TOUCH_PAN:if(this.enablePan===!1)return;this._handleTouchMovePan(t),this.update();break;case Qt.TOUCH_DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchMoveDollyPan(t),this.update();break;case Qt.TOUCH_DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchMoveDollyRotate(t),this.update();break;default:this.state=Qt.NONE}}function Mp(t){this.enabled!==!1&&t.preventDefault()}function Sp(t){t.key==="Control"&&(this._controlActive=!0,this.domElement.getRootNode().addEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}function Ep(t){t.key==="Control"&&(this._controlActive=!1,this.domElement.getRootNode().removeEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}var yp=function(t,e){return e=typeof e<"u"?e:!1,t=t.replace(/GAMMA/gi,"&Gamma;"),t=t.replace(/DELTA/gi,"&Delta;"),t=t.replace(/SIGMA/gi,"&Sigma;"),t=t.replace(/LAMBDA/gi,"&Lambda;"),t=t.replace(/\-/gi,"&mdash;"),e?t=t.replace(/_(.)/gi,function(r,n,a,o){return'<tspan baseline-shift="sub">'+n+"</tspan>"}):t=t.replace(/_(.)/gi,function(r,n,a,o){return"<sub>"+n+"</sub>"}),t},Tp=function(n,a,r){var n=n,a=a;r==null&&(r={});var o=r.showAxes??!0,l=r.showBVectors??!0,u=r.showPathpoints??!1,c=r.disableInteractOverlay??!1,h=r.cameraState??null,v=!1,g=[],T=new ni({color:13975119,opacity:.15,transparent:!0,side:Xe}),R=new fr({color:3355443,opacity:1,transparent:!1,linewidth:1}),W=new fr({color:285405,opacity:1,transparent:!1}),k=new ni({color:3311805,opacity:1,transparent:!1}),J=new ni({color:8925746,opacity:1,transparent:!1}),q=null,Se=null,V=null;this.resizeRenderer=function(){if(n){var ae=window.devicePixelRatio||1,st=n.offsetWidth,Ct=n.offsetHeight;V&&(Se.aspect=st/Ct,Se.updateProjectionMatrix(),V.setSize(st*ae,Ct*ae),V.domElement.style.width=st+"px",V.domElement.style.height=Ct+"px",V.domElement.width=st*ae,V.domElement.height=Ct*ae,ct())}},this.getCameraState=function(){return!Se||!this.controls?null:{position:Se.position.clone(),target:this.controls.target.clone()}};var Y=function(ae,st){st=typeof st<"u"?st:"#000000";var Ct;{var Ct=document.createElement("div");Ct.style.position="absolute",Ct.style.fontFamily="'Helvetica Neue', Helvetica, Arial, sans-serif",Ct.style.color=st,Ct.style.width=100,Ct.style.height=100,Ct.style.fontSize="12px",Ct.innerHTML=ae,Ct.style.top="-100px",Ct.style.left="-100px",Ct.style.userSelect="none",Ct.style.userSelect="none",Ct.style.webkitUserSelect="none",Ct.style.MozUserSelect="none",Ct.setAttribute("unselectable","on"),Ct.style.pointerEvents="none"}return Ct},ie=function(ae){var st=document.createElement("div");st.classList.add(ae),st.style.position="absolute",st.style.fontFamily="'Helvetica Neue', Helvetica, Arial, sans-serif",st.style.zIndex=1,st.style.width="100%",st.style.height="100%",st.style.display="table",st.style.top="0px",st.style.left="0px",st.style.textAlign="center",st.style.verticalAlign="middle",st.style.userSelect="none",st.style.userSelect="none",st.style.webkitUserSelect="none",st.style.MozUserSelect="none",st.setAttribute("unselectable","on");var Ct=document.createElement("span");return Ct.innerHTML="Double click to toggle interaction",Ct.style.color="rgb(80, 80, 80)",Ct.style.fontSize="24px",Ct.style.fontWeight="bold",Ct.style.backgroundColor="rgba(230,230,230,0.5)",Ct.style.display="table-cell",Ct.style.verticalAlign="middle",Ct.style.lineHeight="normal",Ct.style.userSelect="none",Ct.style.userSelect="none",Ct.style.webkitUserSelect="none",Ct.style.MozUserSelect="none",Ct.setAttribute("unselectable","on"),Ct.onmouseover=function(){this.style.backgroundColor="rgba(230,230,230,0.5)",this.innerHTML="Double click to toggle interaction"},Ct.onmouseleave=function(){this.style.backgroundColor="rgba(255,255,255,0.01)",this.innerHTML=""},st.appendChild(Ct),st};this.loadBZ=function(ae){if(ae==null||Object.keys(ae).length===0||n==null||n.id==""||a==null)return;let st=ae.b1,Ct=ae.b2,$t=ae.b3,jo=ae.faces_data,Lp=ae.kpoints,Mn=ae.path,sa=ae.explicit_kpoints_abs;var re=window.devicePixelRatio||1;a.innerHTML="";for(var $o=n;$o.firstChild;)$o.removeChild($o.firstChild);g=[],q=new pc;let qo=$o.offsetWidth,Kt=$o.offsetHeight;Se=new Fe(45,qo/Kt,.01,1e3),Se.position.z=3,V=new lp({alpha:!0,preserveDrawingBuffer:!0}),V.setClearColor(16777215,0),V.setSize(qo*re,Kt*re),V.domElement.style.width=qo+"px",V.domElement.style.height=Kt+"px",V.domElement.width=qo*re,V.domElement.height=Kt*re,$o.appendChild(V.domElement);let i0=new hp(Se,V.domElement);this.controls=i0,this.camera=Se,h&&(Se.position.copy(h.position),i0.target.copy(h.target),i0.update()),i0.addEventListener("change",ct),i0.enableDamping=!0,i0.dampingFactor=.25,i0.enableZoom=!0;let Up=Math.sqrt(Math.max(Math.pow(st[0],2)+Math.pow(st[1],2)+Math.pow(st[2],2),Math.pow(Ct[0],2)+Math.pow(Ct[1],2)+Math.pow(Ct[2],2),Math.pow($t[0],2)+Math.pow($t[1],2)+Math.pow($t[2],2)));var l0=Up*1.5;if(Se.position.z=Up*3,o){var y0=[[new U(1,0,0),'<span style="font-style: italic">x</span>'],[new U(0,1,0),'<span style="font-style: italic">y</span>'],[new U(0,0,1),'<span style="font-style: italic">z</span>']];y0.forEach(function(ug){var ng=ug[0],Ko=ug[1],wi=new U(0,0,0),S0=5592405,Z0=new Va(ng,wi,l0,S0,l0/10,l0/20);q.add(Z0);var Pp="#555555",Ip=Y(Ko,Pp),x0=ng.clone();x0.sub(wi),x0.multiplyScalar(l0),$o.appendChild(Ip),g.push([x0,Ip])})}var kp=[[st,'<span style="font-weight: bold">b</span><sub>1</sub>'],[Ct,'<span style="font-weight: bold">b</span><sub>2</sub>'],[$t,'<span style="font-weight: bold">b</span><sub>3</sub>']],kp;if(l||(kp=[]),kp.forEach(function(ug){var ng=ug[0],Ko=ug[1],wi=Math.sqrt(Math.pow(ng[0],2)+Math.pow(ng[1],2)+Math.pow(ng[2],2)),S0=new U(ng[0]/wi,ng[1]/wi,ng[2]/wi),Z0=new U(0,0,0),Pp=0,Ip=new Va(S0,Z0,length=wi,Pp=Pp,wi/10,wi/20);q.add(Ip);var x0=Y(Ko=Ko),B0=S0.clone();B0.sub(Z0),B0.multiplyScalar(wi),$o.appendChild(x0),g.push([B0,x0])}),jo){var u0=new Ae,f0=[];jo.triangles_vertices.forEach(function(ug){f0.push(ug[0],ug[1],ug[2])}),u0.setAttribute("position",new me(f0,3));var v0=[];jo.triangles.forEach(function(ug){v0.push(ug[0],ug[1],ug[2])}),u0.setIndex(v0);var p0=new De(u0,T),rm=new xc(p0.geometry),am=new vc(rm,R);q.add(p0),q.add(am)}if(Lp)for(var ym in Lp){let ug=Lp[ym],ng=.02*Up;var Wm=new _r(ng,16,16),h0=new De(Wm,k);h0.translateX(ug[0]),h0.translateY(ug[1]),h0.translateZ(ug[2]),q.add(h0),ym=yp(ym,v);var f1=Y(ym);$o.appendChild(f1),g.push([new U(ug[0],ug[1],ug[2]),f1])}if(Mn&&Lp&&Mn.forEach(function(ug){var ng=ug[0],Ko=ug[1],wi=Lp[ng],S0=Lp[Ko],Z0=[];Z0.push(new U(wi[0],wi[1],wi[2])),Z0.push(new U(S0[0],S0[1],S0[2]));var Pp=new Ae().setFromPoints(Z0),Ip=new ta(Pp,W);Ip.material.linewidth=4,q.add(Ip)}),u&&sa)for(var T1 in sa){var I1=sa[T1],p1=.01*Up,Wm=new _r(p1,16,16),h0=new De(Wm,J);h0.translateX(I1[0]),h0.translateY(I1[1]),h0.translateZ(I1[2]),q.add(h0)}ct();var Qm=function(ug,ng){if(typeof ng>"u")var Ko=!i0.enabled;else var Ko=ng;i0.enabled=Ko;for(var wi=$o.getElementsByClassName("BZDoubleClickText"),S0=0;S0<wi.length;S0++)$o.removeChild(wi[S0]);Ko||$o.appendChild(ie("BZDoubleClickText"))};c||(Qm(),$o.addEventListener("dblclick",Qm));var m1,W1=!1;$o.addEventListener("touchend",function(ug){if(typeof m1<"u"&&clearTimeout(m1),W1)W1=!1,ug.preventDefault(),Qm();else{if(ug.targetTouches.length!=0){typeof m1<"u"&&(clearTimeout(m1),W1=!1);return}W1=!0,m1=setTimeout(function(){W1=!1},500)}}),$o.addEventListener("touchcancel",function(ug){typeof m1<"u"&&(clearTimeout(m1),W1=!1)}),$o.addEventListener("touchmove",function(ug){typeof m1<"u"&&(clearTimeout(m1),W1=!1)})};function se(ae,st){var Ct=ae.clone().project(st),$t=window.devicePixelRatio||1,jo,Lp;{var jo=.5*V.domElement.width/$t,Lp=.5*V.domElement.height/$t;Ct.x=Ct.x*jo+jo,Ct.y=-(Ct.y*Lp)+Lp}return{left:Ct.x,top:Ct.y}}function ct(){V.render(q,Se),g.forEach(function(ae){var st=ae[0],Ct=ae[1],$t=se(st,Se);Ct.style.top=$t.top+"px",Ct.style.left=$t.left+"px"})}};function bp(t){let e="";for(;e.length<t;)e+=Math.random().toString(36).substring(2);return e.substring(0,t)}function Ap(t,e,r,n){let a=document.createElement("div");a.className="bz-main-container";let o=bp(6),l=document.createElement("div");l.id=`canvas-${o}`,l.className="bz-canvas3d";let u=document.createElement("div");u.id=`info-${o}`,a.appendChild(l),a.appendChild(u),t.appendChild(a);let c=new Tp(l,u,r);return window.addEventListener("resize",c.resizeRenderer),requestAnimationFrame(()=>{c.loadBZ(e),n&&n(c)}),c}const labelStyle="ae:flex ae:items-center ae:gap-1 ae:pt-1 ae:text-xs";function BZControls({showPathpoints:t,setShowPathpoints:e,showBVectors:r,setShowBVectors:n,showAxes:a,setShowAxes:o}){const[l,u]=reactExports.useState(!1),c=reactExports.useRef(null);return reactExports.useEffect(()=>{function h(v){c.current&&!c.current.contains(v.target)&&u(!1)}return document.addEventListener("click",h),()=>document.removeEventListener("click",h)},[]),reactExports.useEffect(()=>{function h(v){v.key==="Escape"&&u(!1)}return document.addEventListener("click",h),()=>document.removeEventListener("click",h)},[]),jsxRuntimeExports.jsxs("div",{ref:c,className:`ae:absolute  ae:top-1.5 ae:right-1.5 ae:z-10 ae:overflow-hidden ae:rounded-sm ae:border ae:bg-slate-50  ae:transition-all ae:duration-300 ${l?"ae:w-22":"ae:w-8.5"}`,children:[jsxRuntimeExports.jsx("button",{className:`explorerButton ae:flex ae:items-center ae:gap-2 ae:w-full ${l?"ae:justify-end ae:border-b":"ae:justify-end"}`,onClick:()=>u(h=>!h),"aria-expanded":l,children:jsxRuntimeExports.jsx(SettingsIcon,{className:"ae:w-4 ae:h-4"})}),l&&jsxRuntimeExports.jsxs("div",{className:"ae:flex ae:flex-col ae:pb-2 ae:pl-2",children:[jsxRuntimeExports.jsxs("label",{className:`${labelStyle}`,children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:t,onChange:h=>e(h.target.checked)}),"Kpoints"]}),jsxRuntimeExports.jsxs("label",{className:`${labelStyle}`,children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:a,onChange:h=>o(h.target.checked)}),"Axes"]}),jsxRuntimeExports.jsxs("label",{className:`${labelStyle}`,children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:r,onChange:h=>n(h.target.checked)}),"Bvectors"]})]})]})}function useContainerBucket(t,e=100){const[r,n]=reactExports.useState(null);return reactExports.useEffect(()=>{if(!t.current)return;const a=t.current,o=()=>{const{width:u}=a.getBoundingClientRect(),c=Math.floor(u/e);n(h=>h!==c?c:h)};o();const l=new ResizeObserver(()=>{o()});return l.observe(a),()=>l.disconnect()},[t,e]),r}function BZVisualizer({data:t}){const e=reactExports.useRef(null),r=reactExports.useRef(null),n=reactExports.useRef(null),[a,o]=reactExports.useState(!1),[l,u]=reactExports.useState(!0),[c,h]=reactExports.useState(!0),v=useContainerBucket(e,50);return reactExports.useEffect(()=>{if(!e.current)return;const g=setTimeout(()=>{r.current?.getCameraState&&(n.current=r.current.getCameraState()),e.current.innerHTML="",r.current=Ap(e.current,t,{showAxes:c,showBVectors:l,showPathpoints:a,disableInteractOverlay:!0},T=>{n.current&&(T.camera.position.copy(n.current.position),T.controls.target.copy(n.current.target),T.controls.update())})},100);return()=>clearTimeout(g)},[t,c,l,a,v]),jsxRuntimeExports.jsxs("div",{className:"ae:relative ae:w-full",style:{height:"400px"},children:[jsxRuntimeExports.jsx(BZControls,{showPathpoints:a,setShowPathpoints:o,showBVectors:l,setShowBVectors:u,showAxes:c,setShowAxes:h}),jsxRuntimeExports.jsx("div",{ref:e,style:{width:"100%",height:"100%"}})]})}const RoundVals=(t,e=4,r=[])=>t.map(n=>Object.fromEntries(Object.entries(n).map(([a,o])=>[a,r.includes(a)?o:typeof o=="number"?o.toFixed(e):o])));function reciprocalLattice(t){if(!t||t.length<3)return[[1,0,0],[0,1,0],[0,0,1]];const[e,r,n]=t,a=(v,g)=>[v[1]*g[2]-v[2]*g[1],v[2]*g[0]-v[0]*g[2],v[0]*g[1]-v[1]*g[0]],l=((v,g)=>v[0]*g[0]+v[1]*g[1]+v[2]*g[2])(e,a(r,n)),u=a(r,n).map(v=>2*Math.PI*v/l),c=a(n,e).map(v=>2*Math.PI*v/l),h=a(e,r).map(v=>2*Math.PI*v/l);return[u,c,h]}const Columns={recipColumns:["","x","y","z"],cellColumns:["x","y","z"],meshOffsetCols:["","b","b","b"],pbcCols:["Axis","Value"],kpointColumns:["Kx","Ky","Kz"],kpointColumnsR:["Kx","Ky","Kz"]};function KpointsDataVisualiser({nodeData:t={}}){const[e,r]=reactExports.useState(!0),[n,a]=reactExports.useState({}),[o,l]=reactExports.useState(null),[u,c]=reactExports.useState([]);if(reactExports.useEffect(()=>{let v=!0;r(!0);const g=t.attributes||{},T=t.derived_properties||{};let R=null,W=null,k=null;g.cell&&([R,W,k]=reciprocalLattice(g.cell));const J=g.cell?{...T,b1:R,b2:W,b3:k,kpoints:T.labelled_kpoints_abs,path:T.labelled_path}:null,q=R&&W&&k?RoundVals([{"":"b",x:R[0],y:R[1],z:R[2]},{"":"b",x:W[0],y:W[1],z:W[2]},{"":"b",x:k[0],y:k[1],z:k[2]}],4):[],Se=RoundVals((g.cell||[]).map(ae=>({x:ae[0]??0,y:ae[1]??0,z:ae[2]??0}))),V=(()=>{const[ae,st,Ct]=g.mesh??["N/A","N/A","N/A"],[$t,jo,Lp]=Array.isArray(g.offset?.[0])?g.offset[0]:g.offset??[0,0,0];return[{"":"Mesh","b":ae,"b":st,"b":Ct},{"":"Offset","b":$t??0,"b":jo??0,"b":Lp??0}]})(),Y=[{Axis:"b",Value:String(g.pbc1)},{Axis:"b",Value:String(g.pbc2)},{Axis:"b",Value:String(g.pbc3)}],ie=RoundVals((T.explicit_kpoints_abs||[]).map(ae=>({Kx:ae[0]??0,Ky:ae[1]??0,Kz:ae[2]??0})),5),se=RoundVals((T.explicit_kpoints_rel||[]).map(ae=>({Kx:ae[0]??0,Ky:ae[1]??0,Kz:ae[2]??0})),5),ct=[{title:"Reciprocal cell vectors (1/)",columns:Columns.recipColumns,data:q},{title:"Cell",columns:Columns.cellColumns,data:Se},{title:"Kpoints mesh and offset",columns:Columns.meshOffsetCols,data:V},{title:"PBC Flags",columns:Columns.pbcCols,data:Y},{title:"Kpoints (1/)",columns:Columns.kpointColumns,data:ie},{title:"Kpoints (scaled units)",columns:Columns.kpointColumnsR,data:se}];return v&&(a(g),l(J),c(ct),r(!1)),()=>{v=!1}},[t]),e)return jsxRuntimeExports.jsx("div",{className:"ae:w-full ae:min-h-[450px] ae:flex ae:items-center ae:justify-center",children:jsxRuntimeExports.jsx(Spinner,{})});const h=n?.labels&&n?.label_numbers?n.labels.join("  ").slice(0,20):null;return jsxRuntimeExports.jsxs("div",{className:"ae:w-full ae:mx-auto ae:p-4 ae:space-y-2",children:[n?.cell&&o&&jsxRuntimeExports.jsx(CardContainer,{header:`Brillouin Zone${h?` (${h})`:""}`,className:"ae:px-1.5! ae:py-2!",childrenClassName:"ae:!p-0",children:jsxRuntimeExports.jsx("div",{className:"ae:w-full",children:jsxRuntimeExports.jsx(BZVisualizer,{data:o})})}),jsxRuntimeExports.jsx("div",{className:"ae:@container",children:jsxRuntimeExports.jsx("div",{className:"ae:grid ae:grid-cols-1 ae:@xl:grid-cols-2",children:u.map(({title:v,columns:g,data:T})=>jsxRuntimeExports.jsx(DataTable,{title:v,columns:g,data:T,sortableCols:!1},v))})})]})}var DEFAULT_CONFIG={relTol:1e-12,absTol:1e-15,matrix:"Matrix",number:"number",numberFallback:"number",precision:64,predictable:!1,randomSeed:null,legacySubset:!1};function getSafeProperty(t,e){if(isSafeProperty(t,e))return t[e];throw typeof t[e]=="function"&&isSafeMethod(t,e)?new Error('Cannot access method "'+e+'" as a property'):new Error('No access to property "'+e+'"')}function setSafeProperty(t,e,r){if(isSafeProperty(t,e))return t[e]=r,r;throw new Error('No access to property "'+e+'"')}function isSafeProperty(t,e){return!isPlainObject(t)&&!Array.isArray(t)?!1:hasOwnProperty(safeNativeProperties,e)?!0:!(e in Object.prototype||e in Function.prototype)}function isSafeMethod(t,e){return t==null||typeof t[e]!="function"||hasOwnProperty(t,e)&&Object.getPrototypeOf&&e in Object.getPrototypeOf(t)?!1:hasOwnProperty(safeNativeMethods,e)?!0:!(e in Object.prototype||e in Function.prototype)}function isPlainObject(t){return typeof t=="object"&&t&&t.constructor===Object}var safeNativeProperties={length:!0,name:!0},safeNativeMethods={toString:!0,valueOf:!0,toLocaleString:!0};class ObjectWrappingMap{constructor(e){this.wrappedObject=e,this[Symbol.iterator]=this.entries}keys(){return Object.keys(this.wrappedObject).filter(e=>this.has(e)).values()}get(e){return getSafeProperty(this.wrappedObject,e)}set(e,r){return setSafeProperty(this.wrappedObject,e,r),this}has(e){return isSafeProperty(this.wrappedObject,e)&&e in this.wrappedObject}entries(){return mapIterator(this.keys(),e=>[e,this.get(e)])}forEach(e){for(var r of this.keys())e(this.get(r),r,this)}delete(e){isSafeProperty(this.wrappedObject,e)&&delete this.wrappedObject[e]}clear(){for(var e of this.keys())this.delete(e)}get size(){return Object.keys(this.wrappedObject).length}}function mapIterator(t,e){return{next:()=>{var r=t.next();return r.done?r:{value:e(r.value),done:!1}}}}function isNumber(t){return typeof t=="number"}function isBigNumber(t){return!t||typeof t!="object"||typeof t.constructor!="function"?!1:t.isBigNumber===!0&&typeof t.constructor.prototype=="object"&&t.constructor.prototype.isBigNumber===!0||typeof t.constructor.isDecimal=="function"&&t.constructor.isDecimal(t)===!0}function isBigInt(t){return typeof t=="bigint"}function isComplex(t){return t&&typeof t=="object"&&Object.getPrototypeOf(t).isComplex===!0||!1}function isFraction(t){return t&&typeof t=="object"&&Object.getPrototypeOf(t).isFraction===!0||!1}function isUnit(t){return t&&t.constructor.prototype.isUnit===!0||!1}function isString(t){return typeof t=="string"}var isArray=Array.isArray;function isMatrix(t){return t&&t.constructor.prototype.isMatrix===!0||!1}function isCollection(t){return Array.isArray(t)||isMatrix(t)}function isDenseMatrix(t){return t&&t.isDenseMatrix&&t.constructor.prototype.isMatrix===!0||!1}function isSparseMatrix(t){return t&&t.isSparseMatrix&&t.constructor.prototype.isMatrix===!0||!1}function isRange(t){return t&&t.constructor.prototype.isRange===!0||!1}function isIndex(t){return t&&t.constructor.prototype.isIndex===!0||!1}function isBoolean(t){return typeof t=="boolean"}function isResultSet(t){return t&&t.constructor.prototype.isResultSet===!0||!1}function isHelp(t){return t&&t.constructor.prototype.isHelp===!0||!1}function isFunction(t){return typeof t=="function"}function isDate(t){return t instanceof Date}function isRegExp(t){return t instanceof RegExp}function isObject(t){return!!(t&&typeof t=="object"&&t.constructor===Object&&!isComplex(t)&&!isFraction(t))}function isMap(t){return t?t instanceof Map||t instanceof ObjectWrappingMap||typeof t.set=="function"&&typeof t.get=="function"&&typeof t.keys=="function"&&typeof t.has=="function":!1}function isNull(t){return t===null}function isUndefined(t){return t===void 0}function isAccessorNode(t){return t&&t.isAccessorNode===!0&&t.constructor.prototype.isNode===!0||!1}function isArrayNode(t){return t&&t.isArrayNode===!0&&t.constructor.prototype.isNode===!0||!1}function isAssignmentNode(t){return t&&t.isAssignmentNode===!0&&t.constructor.prototype.isNode===!0||!1}function isBlockNode(t){return t&&t.isBlockNode===!0&&t.constructor.prototype.isNode===!0||!1}function isConditionalNode(t){return t&&t.isConditionalNode===!0&&t.constructor.prototype.isNode===!0||!1}function isConstantNode(t){return t&&t.isConstantNode===!0&&t.constructor.prototype.isNode===!0||!1}function isFunctionAssignmentNode(t){return t&&t.isFunctionAssignmentNode===!0&&t.constructor.prototype.isNode===!0||!1}function isFunctionNode(t){return t&&t.isFunctionNode===!0&&t.constructor.prototype.isNode===!0||!1}function isIndexNode(t){return t&&t.isIndexNode===!0&&t.constructor.prototype.isNode===!0||!1}function isNode(t){return t&&t.isNode===!0&&t.constructor.prototype.isNode===!0||!1}function isObjectNode(t){return t&&t.isObjectNode===!0&&t.constructor.prototype.isNode===!0||!1}function isOperatorNode(t){return t&&t.isOperatorNode===!0&&t.constructor.prototype.isNode===!0||!1}function isParenthesisNode(t){return t&&t.isParenthesisNode===!0&&t.constructor.prototype.isNode===!0||!1}function isRangeNode(t){return t&&t.isRangeNode===!0&&t.constructor.prototype.isNode===!0||!1}function isRelationalNode(t){return t&&t.isRelationalNode===!0&&t.constructor.prototype.isNode===!0||!1}function isSymbolNode(t){return t&&t.isSymbolNode===!0&&t.constructor.prototype.isNode===!0||!1}function isChain(t){return t&&t.constructor.prototype.isChain===!0||!1}function typeOf(t){var e=typeof t;return e==="object"?t===null?"null":isBigNumber(t)?"BigNumber":t.constructor&&t.constructor.name?t.constructor.name:"Object":e}function clone$2(t){var e=typeof t;if(e==="number"||e==="bigint"||e==="string"||e==="boolean"||t===null||t===void 0)return t;if(typeof t.clone=="function")return t.clone();if(Array.isArray(t))return t.map(function(r){return clone$2(r)});if(t instanceof Date)return new Date(t.valueOf());if(isBigNumber(t))return t;if(isObject(t))return mapObject(t,clone$2);if(e==="function")return t;throw new TypeError("Cannot clone: unknown type of value (value: ".concat(t,")"))}function mapObject(t,e){var r={};for(var n in t)hasOwnProperty(t,n)&&(r[n]=e(t[n]));return r}function deepStrictEqual(t,e){var r,n,a;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(n=0,a=t.length;n<a;n++)if(!deepStrictEqual(t[n],e[n]))return!1;return!0}else{if(typeof t=="function")return t===e;if(t instanceof Object){if(Array.isArray(e)||!(e instanceof Object))return!1;for(r in t)if(!(r in e)||!deepStrictEqual(t[r],e[r]))return!1;for(r in e)if(!(r in t))return!1;return!0}else return t===e}}function hasOwnProperty(t,e){return t&&Object.hasOwnProperty.call(t,e)}function pickShallow(t,e){for(var r={},n=0;n<e.length;n++){var a=e[n],o=t[a];o!==void 0&&(r[a]=o)}return r}var MATRIX_OPTIONS=["Matrix","Array"],NUMBER_OPTIONS=["number","BigNumber","bigint","Fraction"],config$1=function(e){if(e)throw new Error(`The global config is readonly. 
Please create a mathjs instance if you want to change the default configuration. 
Example:

  import { create, all } from 'mathjs';
  const mathjs = create(all);
  mathjs.config({ number: 'BigNumber' });
`);return Object.freeze(DEFAULT_CONFIG)};_extends(config$1,DEFAULT_CONFIG,{MATRIX_OPTIONS,NUMBER_OPTIONS});function ok(){return!0}function notOk(){return!1}function undef(){}const NOT_TYPED_FUNCTION="Argument is not a typed-function.";function create(){function t(Ko){return typeof Ko=="object"&&Ko!==null&&Ko.constructor===Object}const e=[{name:"number",test:function(Ko){return typeof Ko=="number"}},{name:"string",test:function(Ko){return typeof Ko=="string"}},{name:"boolean",test:function(Ko){return typeof Ko=="boolean"}},{name:"Function",test:function(Ko){return typeof Ko=="function"}},{name:"Array",test:Array.isArray},{name:"Date",test:function(Ko){return Ko instanceof Date}},{name:"RegExp",test:function(Ko){return Ko instanceof RegExp}},{name:"Object",test:t},{name:"null",test:function(Ko){return Ko===null}},{name:"undefined",test:function(Ko){return Ko===void 0}}],r={name:"any",test:ok,isAny:!0};let n,a,o=0,l={createCount:0};function u(Ko){const wi=n.get(Ko);if(wi)return wi;let S0='Unknown type "'+Ko+'"';const Z0=Ko.toLowerCase();let Pp;for(Pp of a)if(Pp.toLowerCase()===Z0){S0+='. Did you mean "'+Pp+'" ?';break}throw new TypeError(S0)}function c(Ko){let wi=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"any";const S0=wi?u(wi).index:a.length,Z0=[];for(let Ip=0;Ip<Ko.length;++Ip){if(!Ko[Ip]||typeof Ko[Ip].name!="string"||typeof Ko[Ip].test!="function")throw new TypeError("Object with properties {name: string, test: function} expected");const x0=Ko[Ip].name;if(n.has(x0))throw new TypeError('Duplicate type name "'+x0+'"');Z0.push(x0),n.set(x0,{name:x0,test:Ko[Ip].test,isAny:Ko[Ip].isAny,index:S0+Ip,conversionsTo:[]})}const Pp=a.slice(S0);a=a.slice(0,S0).concat(Z0).concat(Pp);for(let Ip=S0+Z0.length;Ip<a.length;++Ip)n.get(a[Ip]).index=Ip}function h(){n=new Map,a=[],o=0,c([r],!1)}h(),c(e);function v(){let Ko;for(Ko of a)n.get(Ko).conversionsTo=[];o=0}function g(Ko){const wi=a.filter(S0=>{const Z0=n.get(S0);return!Z0.isAny&&Z0.test(Ko)});return wi.length?wi:["any"]}function T(Ko){return Ko&&typeof Ko=="function"&&"_typedFunctionData"in Ko}function R(Ko,wi,S0){if(!T(Ko))throw new TypeError(NOT_TYPED_FUNCTION);const Z0=S0&&S0.exact,Pp=Array.isArray(wi)?wi.join(","):wi,Ip=Y(Pp),x0=J(Ip);if(!Z0||x0 in Ko.signatures){const om=Ko._typedFunctionData.signatureMap.get(x0);if(om)return om}const B0=Ip.length;let Y0;if(Z0){Y0=[];let om;for(om in Ko.signatures)Y0.push(Ko._typedFunctionData.signatureMap.get(om))}else Y0=Ko._typedFunctionData.signatures;for(let om=0;om<B0;++om){const Cm=Ip[om],r1=[];let Om;for(Om of Y0){const a1=ae(Om.params,om);if(!(!a1||Cm.restParam&&!a1.restParam)){if(!a1.hasAny){const hg=V(a1);if(Cm.types.some(pm=>!hg.has(pm.name)))continue}r1.push(Om)}}if(Y0=r1,Y0.length===0)break}let im;for(im of Y0)if(im.params.length<=B0)return im;throw new TypeError("Signature not found (signature: "+(Ko.name||"unnamed")+"("+J(Ip,", ")+"))")}function W(Ko,wi,S0){return R(Ko,wi,S0).implementation}function k(Ko,wi){const S0=u(wi);if(S0.test(Ko))return Ko;const Z0=S0.conversionsTo;if(Z0.length===0)throw new Error("There are no conversions to "+wi+" defined.");for(let Pp=0;Pp<Z0.length;Pp++)if(u(Z0[Pp].from).test(Ko))return Z0[Pp].convert(Ko);throw new Error("Cannot convert "+Ko+" to "+wi)}function J(Ko){let wi=arguments.length>1&&arguments[1]!==void 0?arguments[1]:",";return Ko.map(S0=>S0.name).join(wi)}function q(Ko){const wi=Ko.indexOf("...")===0,Z0=(wi?Ko.length>3?Ko.slice(3):"any":Ko).split("|").map(B0=>u(B0.trim()));let Pp=!1,Ip=wi?"...":"";return{types:Z0.map(function(B0){return Pp=B0.isAny||Pp,Ip+=B0.name+"|",{name:B0.name,typeIndex:B0.index,test:B0.test,isAny:B0.isAny,conversion:null,conversionIndex:-1}}),name:Ip.slice(0,-1),hasAny:Pp,hasConversion:!1,restParam:wi}}function Se(Ko){const wi=Ko.types.map(x0=>x0.name),S0=$o(wi);let Z0=Ko.hasAny,Pp=Ko.name;const Ip=S0.map(function(x0){const B0=u(x0.from);return Z0=B0.isAny||Z0,Pp+="|"+x0.from,{name:x0.from,typeIndex:B0.index,test:B0.test,isAny:B0.isAny,conversion:x0,conversionIndex:x0.index}});return{types:Ko.types.concat(Ip),name:Pp,hasAny:Z0,hasConversion:Ip.length>0,restParam:Ko.restParam}}function V(Ko){return Ko.typeSet||(Ko.typeSet=new Set,Ko.types.forEach(wi=>Ko.typeSet.add(wi.name))),Ko.typeSet}function Y(Ko){const wi=[];if(typeof Ko!="string")throw new TypeError("Signatures must be strings");const S0=Ko.trim();if(S0==="")return wi;const Z0=S0.split(",");for(let Pp=0;Pp<Z0.length;++Pp){const Ip=q(Z0[Pp].trim());if(Ip.restParam&&Pp!==Z0.length-1)throw new SyntaxError('Unexpected rest parameter "'+Z0[Pp]+'": only allowed for the last parameter');if(Ip.types.length===0)return null;wi.push(Ip)}return wi}function ie(Ko){const wi=rm(Ko);return wi?wi.restParam:!1}function se(Ko){if(!Ko||Ko.types.length===0)return ok;if(Ko.types.length===1)return u(Ko.types[0].name).test;if(Ko.types.length===2){const wi=u(Ko.types[0].name).test,S0=u(Ko.types[1].name).test;return function(Pp){return wi(Pp)||S0(Pp)}}else{const wi=Ko.types.map(function(S0){return u(S0.name).test});return function(Z0){for(let Pp=0;Pp<wi.length;Pp++)if(wi[Pp](Z0))return!0;return!1}}}function ct(Ko){let wi,S0,Z0;if(ie(Ko)){wi=p0(Ko).map(se);const Pp=wi.length,Ip=se(rm(Ko)),x0=function(B0){for(let Y0=Pp;Y0<B0.length;Y0++)if(!Ip(B0[Y0]))return!1;return!0};return function(Y0){for(let im=0;im<wi.length;im++)if(!wi[im](Y0[im]))return!1;return x0(Y0)&&Y0.length>=Pp+1}}else return Ko.length===0?function(Ip){return Ip.length===0}:Ko.length===1?(S0=se(Ko[0]),function(Ip){return S0(Ip[0])&&Ip.length===1}):Ko.length===2?(S0=se(Ko[0]),Z0=se(Ko[1]),function(Ip){return S0(Ip[0])&&Z0(Ip[1])&&Ip.length===2}):(wi=Ko.map(se),function(Ip){for(let x0=0;x0<wi.length;x0++)if(!wi[x0](Ip[x0]))return!1;return Ip.length===wi.length})}function ae(Ko,wi){return wi<Ko.length?Ko[wi]:ie(Ko)?rm(Ko):null}function st(Ko,wi){const S0=ae(Ko,wi);return S0?V(S0):new Set}function Ct(Ko){return Ko.conversion===null||Ko.conversion===void 0}function $t(Ko,wi){const S0=new Set;return Ko.forEach(Z0=>{const Pp=st(Z0.params,wi);let Ip;for(Ip of Pp)S0.add(Ip)}),S0.has("any")?["any"]:Array.from(S0)}function jo(Ko,wi,S0){let Z0,Pp;const Ip=Ko||"unnamed";let x0=S0,B0;for(B0=0;B0<wi.length;B0++){const Cm=[];if(x0.forEach(r1=>{const Om=ae(r1.params,B0),a1=se(Om);(B0<r1.params.length||ie(r1.params))&&a1(wi[B0])&&Cm.push(r1)}),Cm.length===0){if(Pp=$t(x0,B0),Pp.length>0){const r1=g(wi[B0]);return Z0=new TypeError("Unexpected type of argument in function "+Ip+" (expected: "+Pp.join(" or ")+", actual: "+r1.join(" | ")+", index: "+B0+")"),Z0.data={category:"wrongType",fn:Ip,index:B0,actual:r1,expected:Pp},Z0}}else x0=Cm}const Y0=x0.map(function(Cm){return ie(Cm.params)?1/0:Cm.params.length});if(wi.length<Math.min.apply(null,Y0))return Pp=$t(x0,B0),Z0=new TypeError("Too few arguments in function "+Ip+" (expected: "+Pp.join(" or ")+", index: "+wi.length+")"),Z0.data={category:"tooFewArgs",fn:Ip,index:wi.length,expected:Pp},Z0;const im=Math.max.apply(null,Y0);if(wi.length>im)return Z0=new TypeError("Too many arguments in function "+Ip+" (expected: "+im+", actual: "+wi.length+")"),Z0.data={category:"tooManyArgs",fn:Ip,index:wi.length,expectedLength:im},Z0;const om=[];for(let Cm=0;Cm<wi.length;++Cm)om.push(g(wi[Cm]).join("|"));return Z0=new TypeError('Arguments of type "'+om.join(", ")+'" do not match any of the defined signatures of function '+Ip+"."),Z0.data={category:"mismatch",actual:om},Z0}function Lp(Ko){let wi=a.length+1;for(let S0=0;S0<Ko.types.length;S0++)Ct(Ko.types[S0])&&(wi=Math.min(wi,Ko.types[S0].typeIndex));return wi}function Mn(Ko){let wi=o+1;for(let S0=0;S0<Ko.types.length;S0++)Ct(Ko.types[S0])||(wi=Math.min(wi,Ko.types[S0].conversionIndex));return wi}function sa(Ko,wi){if(Ko.hasAny){if(!wi.hasAny)return 1}else if(wi.hasAny)return-1;if(Ko.restParam){if(!wi.restParam)return 1}else if(wi.restParam)return-1;if(Ko.hasConversion){if(!wi.hasConversion)return 1}else if(wi.hasConversion)return-1;const S0=Lp(Ko)-Lp(wi);if(S0<0)return-1;if(S0>0)return 1;const Z0=Mn(Ko)-Mn(wi);return Z0<0?-1:Z0>0?1:0}function re(Ko,wi){const S0=Ko.params,Z0=wi.params,Pp=rm(S0),Ip=rm(Z0),x0=ie(S0),B0=ie(Z0);if(x0&&Pp.hasAny){if(!B0||!Ip.hasAny)return 1}else if(B0&&Ip.hasAny)return-1;let Y0=0,im=0,om;for(om of S0)om.hasAny&&++Y0,om.hasConversion&&++im;let Cm=0,r1=0;for(om of Z0)om.hasAny&&++Cm,om.hasConversion&&++r1;if(Y0!==Cm)return Y0-Cm;if(x0&&Pp.hasConversion){if(!B0||!Ip.hasConversion)return 1}else if(B0&&Ip.hasConversion)return-1;if(im!==r1)return im-r1;if(x0){if(!B0)return 1}else if(B0)return-1;const Om=(S0.length-Z0.length)*(x0?-1:1);if(Om!==0)return Om;const a1=[];let hg=0;for(let S1=0;S1<S0.length;++S1){const U1=sa(S0[S1],Z0[S1]);a1.push(U1),hg+=U1}if(hg!==0)return hg;let pm;for(pm of a1)if(pm!==0)return pm;return 0}function $o(Ko){if(Ko.length===0)return[];const wi=Ko.map(u);Ko.length>1&&wi.sort((Pp,Ip)=>Pp.index-Ip.index);let S0=wi[0].conversionsTo;if(Ko.length===1)return S0;S0=S0.concat([]);const Z0=new Set(Ko);for(let Pp=1;Pp<wi.length;++Pp){let Ip;for(Ip of wi[Pp].conversionsTo)Z0.has(Ip.from)||(S0.push(Ip),Z0.add(Ip.from))}return S0}function qo(Ko,wi){let S0=wi;if(Ko.some(Pp=>Pp.hasConversion)){const Pp=ie(Ko),Ip=Ko.map(Kt);S0=function(){const B0=[],Y0=Pp?arguments.length-1:arguments.length;for(let im=0;im<Y0;im++)B0[im]=Ip[im](arguments[im]);return Pp&&(B0[Y0]=arguments[Y0].map(Ip[Y0])),wi.apply(this,B0)}}let Z0=S0;if(ie(Ko)){const Pp=Ko.length-1;Z0=function(){return S0.apply(this,am(arguments,0,Pp).concat([am(arguments,Pp)]))}}return Z0}function Kt(Ko){let wi,S0,Z0,Pp;const Ip=[],x0=[];switch(Ko.types.forEach(function(B0){B0.conversion&&(Ip.push(u(B0.conversion.from).test),x0.push(B0.conversion.convert))}),x0.length){case 0:return function(Y0){return Y0};case 1:return wi=Ip[0],Z0=x0[0],function(Y0){return wi(Y0)?Z0(Y0):Y0};case 2:return wi=Ip[0],S0=Ip[1],Z0=x0[0],Pp=x0[1],function(Y0){return wi(Y0)?Z0(Y0):S0(Y0)?Pp(Y0):Y0};default:return function(Y0){for(let im=0;im<x0.length;im++)if(Ip[im](Y0))return x0[im](Y0);return Y0}}}function i0(Ko){function wi(S0,Z0,Pp){if(Z0<S0.length){const Ip=S0[Z0];let x0=[];if(Ip.restParam){const B0=Ip.types.filter(Ct);B0.length<Ip.types.length&&x0.push({types:B0,name:"..."+B0.map(Y0=>Y0.name).join("|"),hasAny:B0.some(Y0=>Y0.isAny),hasConversion:!1,restParam:!0}),x0.push(Ip)}else x0=Ip.types.map(function(B0){return{types:[B0],name:B0.name,hasAny:B0.isAny,hasConversion:B0.conversion,restParam:!1}});return Wm(x0,function(B0){return wi(S0,Z0+1,Pp.concat([B0]))})}else return[Pp]}return wi(Ko,0,[])}function Up(Ko,wi){const S0=Math.max(Ko.length,wi.length);for(let B0=0;B0<S0;B0++){const Y0=st(Ko,B0),im=st(wi,B0);let om=!1,Cm;for(Cm of im)if(Y0.has(Cm)){om=!0;break}if(!om)return!1}const Z0=Ko.length,Pp=wi.length,Ip=ie(Ko),x0=ie(wi);return Ip?x0?Z0===Pp:Pp>=Z0:x0?Z0>=Pp:Z0===Pp}function l0(Ko){return Ko.map(wi=>p1(wi)?T1(wi.referToSelf.callback):I1(wi)?f1(wi.referTo.references,wi.referTo.callback):wi)}function y0(Ko,wi,S0){const Z0=[];let Pp;for(Pp of Ko){let Ip=S0[Pp];if(typeof Ip!="number")throw new TypeError('No definition for referenced signature "'+Pp+'"');if(Ip=wi[Ip],typeof Ip!="function")return!1;Z0.push(Ip)}return Z0}function kp(Ko,wi,S0){const Z0=l0(Ko),Pp=new Array(Z0.length).fill(!1);let Ip=!0;for(;Ip;){Ip=!1;let x0=!0;for(let B0=0;B0<Z0.length;++B0){if(Pp[B0])continue;const Y0=Z0[B0];if(p1(Y0))Z0[B0]=Y0.referToSelf.callback(S0),Z0[B0].referToSelf=Y0.referToSelf,Pp[B0]=!0,x0=!1;else if(I1(Y0)){const im=y0(Y0.referTo.references,Z0,wi);im?(Z0[B0]=Y0.referTo.callback.apply(this,im),Z0[B0].referTo=Y0.referTo,Pp[B0]=!0,x0=!1):Ip=!0}}if(x0&&Ip)throw new SyntaxError("Circular reference detected in resolving typed.referTo")}return Z0}function u0(Ko){const wi=/\bthis(\(|\.signatures\b)/;Object.keys(Ko).forEach(S0=>{const Z0=Ko[S0];if(wi.test(Z0.toString()))throw new SyntaxError("Using `this` to self-reference a function is deprecated since typed-function@3. Use typed.referTo and typed.referToSelf instead.")})}function f0(Ko,wi){if(l.createCount++,Object.keys(wi).length===0)throw new SyntaxError("No signatures provided");l.warnAgainstDeprecatedThis&&u0(wi);const S0=[],Z0=[],Pp={},Ip=[];let x0;for(x0 in wi){if(!Object.prototype.hasOwnProperty.call(wi,x0))continue;const L0=Y(x0);if(!L0)continue;S0.forEach(function(Vm){if(Up(Vm,L0))throw new TypeError('Conflicting signatures "'+J(Vm)+'" and "'+J(L0)+'".')}),S0.push(L0);const cm=Z0.length;Z0.push(wi[x0]);const Gm=L0.map(Se);let Fm;for(Fm of i0(Gm)){const Vm=J(Fm);Ip.push({params:Fm,name:Vm,fn:cm}),Fm.every(D1=>!D1.hasConversion)&&(Pp[Vm]=cm)}}Ip.sort(re);const B0=kp(Z0,Pp,nm);let Y0;for(Y0 in Pp)Object.prototype.hasOwnProperty.call(Pp,Y0)&&(Pp[Y0]=B0[Pp[Y0]]);const im=[],om=new Map;for(Y0 of Ip)om.has(Y0.name)||(Y0.fn=B0[Y0.fn],im.push(Y0),om.set(Y0.name,Y0));const Cm=im[0]&&im[0].params.length<=2&&!ie(im[0].params),r1=im[1]&&im[1].params.length<=2&&!ie(im[1].params),Om=im[2]&&im[2].params.length<=2&&!ie(im[2].params),a1=im[3]&&im[3].params.length<=2&&!ie(im[3].params),hg=im[4]&&im[4].params.length<=2&&!ie(im[4].params),pm=im[5]&&im[5].params.length<=2&&!ie(im[5].params),S1=Cm&&r1&&Om&&a1&&hg&&pm;for(let L0=0;L0<im.length;++L0)im[L0].test=ct(im[L0].params);const U1=Cm?se(im[0].params[0]):notOk,J1=r1?se(im[1].params[0]):notOk,l1=Om?se(im[2].params[0]):notOk,Km=a1?se(im[3].params[0]):notOk,A1=hg?se(im[4].params[0]):notOk,y1=pm?se(im[5].params[0]):notOk,uv=Cm?se(im[0].params[1]):notOk,$g=r1?se(im[1].params[1]):notOk,Sv=Om?se(im[2].params[1]):notOk,Yv=a1?se(im[3].params[1]):notOk,my=hg?se(im[4].params[1]):notOk,Vv=pm?se(im[5].params[1]):notOk;for(let L0=0;L0<im.length;++L0)im[L0].implementation=qo(im[L0].params,im[L0].fn);const yv=Cm?im[0].implementation:undef,Hv=r1?im[1].implementation:undef,gy=Om?im[2].implementation:undef,Qv=a1?im[3].implementation:undef,Ty=hg?im[4].implementation:undef,$v=pm?im[5].implementation:undef,Cv=Cm?im[0].params.length:-1,wg=r1?im[1].params.length:-1,Lv=Om?im[2].params.length:-1,Pv=a1?im[3].params.length:-1,Ny=hg?im[4].params.length:-1,pg=pm?im[5].params.length:-1,et=S1?6:0,t0=im.length,oa=im.map(L0=>L0.test),a0=im.map(L0=>L0.implementation),m0=function(){for(let cm=et;cm<t0;cm++)if(oa[cm](arguments))return a0[cm].apply(this,arguments);return l.onMismatch(Ko,arguments,im)};function nm(L0,cm){return arguments.length===Cv&&U1(L0)&&uv(cm)?yv.apply(this,arguments):arguments.length===wg&&J1(L0)&&$g(cm)?Hv.apply(this,arguments):arguments.length===Lv&&l1(L0)&&Sv(cm)?gy.apply(this,arguments):arguments.length===Pv&&Km(L0)&&Yv(cm)?Qv.apply(this,arguments):arguments.length===Ny&&A1(L0)&&my(cm)?Ty.apply(this,arguments):arguments.length===pg&&y1(L0)&&Vv(cm)?$v.apply(this,arguments):m0.apply(this,arguments)}try{Object.defineProperty(nm,"name",{value:Ko})}catch{}return nm.signatures=Pp,nm._typedFunctionData={signatures:im,signatureMap:om},nm}function v0(Ko,wi,S0){throw jo(Ko,wi,S0)}function p0(Ko){return am(Ko,0,Ko.length-1)}function rm(Ko){return Ko[Ko.length-1]}function am(Ko,wi,S0){return Array.prototype.slice.call(Ko,wi,S0)}function ym(Ko,wi){for(let S0=0;S0<Ko.length;S0++)if(wi(Ko[S0]))return Ko[S0]}function Wm(Ko,wi){return Array.prototype.concat.apply([],Ko.map(wi))}function h0(){const Ko=p0(arguments).map(S0=>J(Y(S0))),wi=rm(arguments);if(typeof wi!="function")throw new TypeError("Callback function expected as last argument");return f1(Ko,wi)}function f1(Ko,wi){return{referTo:{references:Ko,callback:wi}}}function T1(Ko){if(typeof Ko!="function")throw new TypeError("Callback function expected as first argument");return{referToSelf:{callback:Ko}}}function I1(Ko){return Ko&&typeof Ko.referTo=="object"&&Array.isArray(Ko.referTo.references)&&typeof Ko.referTo.callback=="function"}function p1(Ko){return Ko&&typeof Ko.referToSelf=="object"&&typeof Ko.referToSelf.callback=="function"}function Qm(Ko,wi){if(!Ko)return wi;if(wi&&wi!==Ko){const S0=new Error("Function names do not match (expected: "+Ko+", actual: "+wi+")");throw S0.data={actual:wi,expected:Ko},S0}return Ko}function m1(Ko){let wi;for(const S0 in Ko)Object.prototype.hasOwnProperty.call(Ko,S0)&&(T(Ko[S0])||typeof Ko[S0].signature=="string")&&(wi=Qm(wi,Ko[S0].name));return wi}function W1(Ko,wi){let S0;for(S0 in wi)if(Object.prototype.hasOwnProperty.call(wi,S0)){if(S0 in Ko&&wi[S0]!==Ko[S0]){const Z0=new Error('Signature "'+S0+'" is defined twice');throw Z0.data={signature:S0,sourceFunction:wi[S0],destFunction:Ko[S0]},Z0}Ko[S0]=wi[S0]}}const ug=l;l=function(Ko){const wi=typeof Ko=="string",S0=wi?1:0;let Z0=wi?Ko:"";const Pp={};for(let Ip=S0;Ip<arguments.length;++Ip){const x0=arguments[Ip];let B0={},Y0;if(typeof x0=="function"?(Y0=x0.name,typeof x0.signature=="string"?B0[x0.signature]=x0:T(x0)&&(B0=x0.signatures)):t(x0)&&(B0=x0,wi||(Y0=m1(x0))),Object.keys(B0).length===0){const im=new TypeError("Argument to 'typed' at index "+Ip+" is not a (typed) function, nor an object with signatures as keys and functions as values.");throw im.data={index:Ip,argument:x0},im}wi||(Z0=Qm(Z0,Y0)),W1(Pp,B0)}return f0(Z0||"",Pp)},l.create=create,l.createCount=ug.createCount,l.onMismatch=v0,l.throwMismatchError=v0,l.createError=jo,l.clear=h,l.clearConversions=v,l.addTypes=c,l._findType=u,l.referTo=h0,l.referToSelf=T1,l.convert=k,l.findSignature=R,l.find=W,l.isTypedFunction=T,l.warnAgainstDeprecatedThis=!0,l.addType=function(Ko,wi){let S0="any";wi!==!1&&n.has("Object")&&(S0="Object"),l.addTypes([Ko],S0)};function ng(Ko){if(!Ko||typeof Ko.from!="string"||typeof Ko.to!="string"||typeof Ko.convert!="function")throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");if(Ko.to===Ko.from)throw new SyntaxError('Illegal to define conversion from "'+Ko.from+'" to itself.')}return l.addConversion=function(Ko){let wi=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{override:!1};ng(Ko);const S0=u(Ko.to),Z0=S0.conversionsTo.find(Pp=>Pp.from===Ko.from);if(Z0)if(wi&&wi.override)l.removeConversion({from:Z0.from,to:Ko.to,convert:Z0.convert});else throw new Error('There is already a conversion from "'+Ko.from+'" to "'+S0.name+'"');S0.conversionsTo.push({from:Ko.from,convert:Ko.convert,index:o++})},l.addConversions=function(Ko,wi){Ko.forEach(S0=>l.addConversion(S0,wi))},l.removeConversion=function(Ko){ng(Ko);const wi=u(Ko.to),S0=ym(wi.conversionsTo,Pp=>Pp.from===Ko.from);if(!S0)throw new Error("Attempt to remove nonexistent conversion from "+Ko.from+" to "+Ko.to);if(S0.convert!==Ko.convert)throw new Error("Conversion to remove does not match existing conversion");const Z0=wi.conversionsTo.indexOf(S0);wi.conversionsTo.splice(Z0,1)},l.resolve=function(Ko,wi){if(!T(Ko))throw new TypeError(NOT_TYPED_FUNCTION);const S0=Ko._typedFunctionData.signatures;for(let Z0=0;Z0<S0.length;++Z0)if(S0[Z0].test(wi))return S0[Z0];return null},l}const typedFunction=create();function factory(t,e,r,n){function a(o){var l=pickShallow(o,e.map(stripOptionalNotation));return assertDependencies(t,e,o),r(l)}return a.isFactory=!0,a.fn=t,a.dependencies=e.slice().sort(),n&&(a.meta=n),a}function assertDependencies(t,e,r){var n=e.filter(o=>!isOptionalDependency(o)).every(o=>r[o]!==void 0);if(!n){var a=e.filter(o=>r[o]===void 0);throw new Error('Cannot create function "'.concat(t,'", ')+"some dependencies are missing: ".concat(a.map(o=>'"'.concat(o,'"')).join(", "),"."))}}function isOptionalDependency(t){return t&&t[0]==="?"}function stripOptionalNotation(t){return t&&t[0]==="?"?t.slice(1):t}function isInteger(t){return typeof t=="boolean"?!0:Number.isFinite(t)?t===Math.round(t):!1}function formatNumberToBase(t,e,r){var n={2:"0b",8:"0o",16:"0x"},a=n[e],o="";if(r){if(r<1)throw new Error("size must be in greater than 0");if(!isInteger(r))throw new Error("size must be an integer");if(t>2**(r-1)-1||t<-(2**(r-1)))throw new Error("Value must be in range [-2^".concat(r-1,", 2^").concat(r-1,"-1]"));if(!isInteger(t))throw new Error("Value must be an integer");t<0&&(t=t+2**r),o="i".concat(r)}var l="";return t<0&&(t=-t,l="-"),"".concat(l).concat(a).concat(t.toString(e)).concat(o)}function format$2(t,e){if(typeof e=="function")return e(t);if(t===1/0)return"Infinity";if(t===-1/0)return"-Infinity";if(isNaN(t))return"NaN";var{notation:r,precision:n,wordSize:a}=normalizeFormatOptions(e);switch(r){case"fixed":return toFixed$1(t,n);case"exponential":return toExponential$1(t,n);case"engineering":return toEngineering$1(t,n);case"bin":return formatNumberToBase(t,2,a);case"oct":return formatNumberToBase(t,8,a);case"hex":return formatNumberToBase(t,16,a);case"auto":return toPrecision(t,n,e).replace(/((\.\d*?)(0+))($|e)/,function(){var o=arguments[2],l=arguments[4];return o!=="."?o+l:l});default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function normalizeFormatOptions(t){var e="auto",r,n;if(t!==void 0)if(isNumber(t))r=t;else if(isBigNumber(t))r=t.toNumber();else if(isObject(t))t.precision!==void 0&&(r=_toNumberOrThrow(t.precision,()=>{throw new Error('Option "precision" must be a number or BigNumber')})),t.wordSize!==void 0&&(n=_toNumberOrThrow(t.wordSize,()=>{throw new Error('Option "wordSize" must be a number or BigNumber')})),t.notation&&(e=t.notation);else throw new Error("Unsupported type of options, number, BigNumber, or object expected");return{notation:e,precision:r,wordSize:n}}function splitNumber(t){var e=String(t).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!e)throw new SyntaxError("Invalid number "+t);var r=e[1],n=e[2],a=parseFloat(e[4]||"0"),o=n.indexOf(".");a+=o!==-1?o-1:n.length-1;var l=n.replace(".","").replace(/^0*/,function(u){return a-=u.length,""}).replace(/0*$/,"").split("").map(function(u){return parseInt(u)});return l.length===0&&(l.push(0),a++),{sign:r,coefficients:l,exponent:a}}function toEngineering$1(t,e){if(isNaN(t)||!Number.isFinite(t))return String(t);var r=splitNumber(t),n=roundDigits(r,e),a=n.exponent,o=n.coefficients,l=a%3===0?a:a<0?a-3-a%3:a-a%3;if(isNumber(e))for(;e>o.length||a-l+1>o.length;)o.push(0);else for(var u=Math.abs(a-l)-(o.length-1),c=0;c<u;c++)o.push(0);for(var h=Math.abs(a-l),v=1;h>0;)v++,h--;var g=o.slice(v).join(""),T=isNumber(e)&&g.length||g.match(/[1-9]/)?"."+g:"",R=o.slice(0,v).join("")+T+"e"+(a>=0?"+":"")+l.toString();return n.sign+R}function toFixed$1(t,e){if(isNaN(t)||!Number.isFinite(t))return String(t);var r=splitNumber(t),n=typeof e=="number"?roundDigits(r,r.exponent+1+e):r,a=n.coefficients,o=n.exponent+1,l=o+(e||0);return a.length<l&&(a=a.concat(zeros(l-a.length))),o<0&&(a=zeros(-o+1).concat(a),o=1),o<a.length&&a.splice(o,0,o===0?"0.":"."),n.sign+a.join("")}function toExponential$1(t,e){if(isNaN(t)||!Number.isFinite(Number(t)))return String(t);var r=splitNumber(t),n=e?roundDigits(r,e):r,a=n.coefficients,o=n.exponent;a.length<e&&(a=a.concat(zeros(e-a.length)));var l=a.shift();return n.sign+l+(a.length>0?"."+a.join(""):"")+"e"+(o>=0?"+":"")+o}function toPrecision(t,e,r){if(isNaN(t)||!Number.isFinite(t))return String(t);var n=_toNumberOrDefault$1(r?.lowerExp,-3),a=_toNumberOrDefault$1(r?.upperExp,5),o=splitNumber(t),l=e?roundDigits(o,e):o;if(l.exponent<n||l.exponent>=a)return toExponential$1(t,e);var u=l.coefficients,c=l.exponent;u.length<e&&(u=u.concat(zeros(e-u.length))),u=u.concat(zeros(c-u.length+1+(u.length<e?e-u.length:0))),u=zeros(-c).concat(u);var h=c>0?c:0;return h<u.length-1&&u.splice(h+1,0,"."),l.sign+u.join("")}function roundDigits(t,e){for(var r={sign:t.sign,coefficients:t.coefficients,exponent:t.exponent},n=r.coefficients;e<=0;)n.unshift(0),r.exponent++,e++;if(n.length>e){var a=n.splice(e,n.length-e);if(a[0]>=5){var o=e-1;for(n[o]++;n[o]===10;)n.pop(),o===0&&(n.unshift(0),r.exponent++,o++),o--,n[o]++}}return r}function zeros(t){for(var e=[],r=0;r<t;r++)e.push(0);return e}function digits(t){return t.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}function nearlyEqual$1(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e-8,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(r<=0)throw new Error("Relative tolerance must be greater than 0");if(n<0)throw new Error("Absolute tolerance must be at least 0");return isNaN(t)||isNaN(e)?!1:!Number.isFinite(t)||!Number.isFinite(e)?t===e:t===e?!0:Math.abs(t-e)<=Math.max(r*Math.max(Math.abs(t),Math.abs(e)),n)}function _toNumberOrThrow(t,e){if(isNumber(t))return t;if(isBigNumber(t))return t.toNumber();e()}function _toNumberOrDefault$1(t,e){return isNumber(t)?t:isBigNumber(t)?t.toNumber():e}var _createTyped2=function(){return _createTyped2=typedFunction.create,typedFunction},dependencies$s=["?BigNumber","?Complex","?DenseMatrix","?Fraction"],createTyped=factory("typed",dependencies$s,function(e){var{BigNumber:r,Complex:n,DenseMatrix:a,Fraction:o}=e,l=_createTyped2();return l.clear(),l.addTypes([{name:"number",test:isNumber},{name:"Complex",test:isComplex},{name:"BigNumber",test:isBigNumber},{name:"bigint",test:isBigInt},{name:"Fraction",test:isFraction},{name:"Unit",test:isUnit},{name:"identifier",test:u=>isString&&/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])*$/.test(u)},{name:"string",test:isString},{name:"Chain",test:isChain},{name:"Array",test:isArray},{name:"Matrix",test:isMatrix},{name:"DenseMatrix",test:isDenseMatrix},{name:"SparseMatrix",test:isSparseMatrix},{name:"Range",test:isRange},{name:"Index",test:isIndex},{name:"boolean",test:isBoolean},{name:"ResultSet",test:isResultSet},{name:"Help",test:isHelp},{name:"function",test:isFunction},{name:"Date",test:isDate},{name:"RegExp",test:isRegExp},{name:"null",test:isNull},{name:"undefined",test:isUndefined},{name:"AccessorNode",test:isAccessorNode},{name:"ArrayNode",test:isArrayNode},{name:"AssignmentNode",test:isAssignmentNode},{name:"BlockNode",test:isBlockNode},{name:"ConditionalNode",test:isConditionalNode},{name:"ConstantNode",test:isConstantNode},{name:"FunctionNode",test:isFunctionNode},{name:"FunctionAssignmentNode",test:isFunctionAssignmentNode},{name:"IndexNode",test:isIndexNode},{name:"Node",test:isNode},{name:"ObjectNode",test:isObjectNode},{name:"OperatorNode",test:isOperatorNode},{name:"ParenthesisNode",test:isParenthesisNode},{name:"RangeNode",test:isRangeNode},{name:"RelationalNode",test:isRelationalNode},{name:"SymbolNode",test:isSymbolNode},{name:"Map",test:isMap},{name:"Object",test:isObject}]),l.addConversions([{from:"number",to:"BigNumber",convert:function(c){if(r||throwNoBignumber(c),digits(c)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+c+"). Use function bignumber(x) to convert to BigNumber.");return new r(c)}},{from:"number",to:"Complex",convert:function(c){return n||throwNoComplex(c),new n(c,0)}},{from:"BigNumber",to:"Complex",convert:function(c){return n||throwNoComplex(c),new n(c.toNumber(),0)}},{from:"bigint",to:"number",convert:function(c){if(c>Number.MAX_SAFE_INTEGER)throw new TypeError("Cannot implicitly convert bigint to number: value exceeds the max safe integer value (value: "+c+")");return Number(c)}},{from:"bigint",to:"BigNumber",convert:function(c){return r||throwNoBignumber(c),new r(c.toString())}},{from:"bigint",to:"Fraction",convert:function(c){return o||throwNoFraction(c),new o(c)}},{from:"Fraction",to:"BigNumber",convert:function(c){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(c){return n||throwNoComplex(c),new n(c.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(c){o||throwNoFraction(c);var h=new o(c);if(h.valueOf()!==c)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+c+"). Use function fraction(x) to convert to Fraction.");return h}},{from:"string",to:"number",convert:function(c){var h=Number(c);if(isNaN(h))throw new Error('Cannot convert "'+c+'" to a number');return h}},{from:"string",to:"BigNumber",convert:function(c){r||throwNoBignumber(c);try{return new r(c)}catch{throw new Error('Cannot convert "'+c+'" to BigNumber')}}},{from:"string",to:"bigint",convert:function(c){try{return BigInt(c)}catch{throw new Error('Cannot convert "'+c+'" to BigInt')}}},{from:"string",to:"Fraction",convert:function(c){o||throwNoFraction(c);try{return new o(c)}catch{throw new Error('Cannot convert "'+c+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(c){n||throwNoComplex(c);try{return new n(c)}catch{throw new Error('Cannot convert "'+c+'" to Complex')}}},{from:"boolean",to:"number",convert:function(c){return+c}},{from:"boolean",to:"BigNumber",convert:function(c){return r||throwNoBignumber(c),new r(+c)}},{from:"boolean",to:"bigint",convert:function(c){return BigInt(+c)}},{from:"boolean",to:"Fraction",convert:function(c){return o||throwNoFraction(c),new o(+c)}},{from:"boolean",to:"string",convert:function(c){return String(c)}},{from:"Array",to:"Matrix",convert:function(c){return a||throwNoMatrix(),new a(c)}},{from:"Matrix",to:"Array",convert:function(c){return c.valueOf()}}]),l.onMismatch=(u,c,h)=>{var v=l.createError(u,c,h);if(["wrongType","mismatch"].includes(v.data.category)&&c.length===1&&isCollection(c[0])&&h.some(T=>!T.params.includes(","))){var g=new TypeError("Function '".concat(u,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(u,")'."));throw g.data=v.data,g}throw v},l.onMismatch=(u,c,h)=>{var v=l.createError(u,c,h);if(["wrongType","mismatch"].includes(v.data.category)&&c.length===1&&isCollection(c[0])&&h.some(T=>!T.params.includes(","))){var g=new TypeError("Function '".concat(u,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(u,")'."));throw g.data=v.data,g}throw v},l});function throwNoBignumber(t){throw new Error("Cannot convert value ".concat(t," into a BigNumber: no class 'BigNumber' provided"))}function throwNoComplex(t){throw new Error("Cannot convert value ".concat(t," into a Complex number: no class 'Complex' provided"))}function throwNoMatrix(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}function throwNoFraction(t){throw new Error("Cannot convert value ".concat(t," into a Fraction, no class 'Fraction' provided."))}/*!
 *  decimal.js v10.6.0
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2025 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var EXP_LIMIT=9e15,MAX_DIGITS=1e9,NUMERALS="0123456789abcdef",LN10="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",PI="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",DEFAULTS={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-EXP_LIMIT,maxE:EXP_LIMIT,crypto:!1},inexact,quadrant,external=!0,decimalError="[DecimalError] ",invalidArgument=decimalError+"Invalid argument: ",precisionLimitExceeded=decimalError+"Precision limit exceeded",cryptoUnavailable=decimalError+"crypto unavailable",tag="[object Decimal]",mathfloor=Math.floor,mathpow=Math.pow,isBinary=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,isHex=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,isOctal=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,isDecimal=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,BASE=1e7,LOG_BASE=7,MAX_SAFE_INTEGER=9007199254740991,LN10_PRECISION=LN10.length-1,PI_PRECISION=PI.length-1,P$2={toStringTag:tag};P$2.absoluteValue=P$2.abs=function(){var t=new this.constructor(this);return t.s<0&&(t.s=1),finalise(t)};P$2.ceil=function(){return finalise(new this.constructor(this),this.e+1,2)};P$2.clampedTo=P$2.clamp=function(t,e){var r,n=this,a=n.constructor;if(t=new a(t),e=new a(e),!t.s||!e.s)return new a(NaN);if(t.gt(e))throw Error(invalidArgument+e);return r=n.cmp(t),r<0?t:n.cmp(e)>0?e:new a(n)};P$2.comparedTo=P$2.cmp=function(t){var e,r,n,a,o=this,l=o.d,u=(t=new o.constructor(t)).d,c=o.s,h=t.s;if(!l||!u)return!c||!h?NaN:c!==h?c:l===u?0:!l^c<0?1:-1;if(!l[0]||!u[0])return l[0]?c:u[0]?-h:0;if(c!==h)return c;if(o.e!==t.e)return o.e>t.e^c<0?1:-1;for(n=l.length,a=u.length,e=0,r=n<a?n:a;e<r;++e)if(l[e]!==u[e])return l[e]>u[e]^c<0?1:-1;return n===a?0:n>a^c<0?1:-1};P$2.cosine=P$2.cos=function(){var t,e,r=this,n=r.constructor;return r.d?r.d[0]?(t=n.precision,e=n.rounding,n.precision=t+Math.max(r.e,r.sd())+LOG_BASE,n.rounding=1,r=cosine(n,toLessThanHalfPi(n,r)),n.precision=t,n.rounding=e,finalise(quadrant==2||quadrant==3?r.neg():r,t,e,!0)):new n(1):new n(NaN)};P$2.cubeRoot=P$2.cbrt=function(){var t,e,r,n,a,o,l,u,c,h,v=this,g=v.constructor;if(!v.isFinite()||v.isZero())return new g(v);for(external=!1,o=v.s*mathpow(v.s*v,1/3),!o||Math.abs(o)==1/0?(r=digitsToString(v.d),t=v.e,(o=(t-r.length+1)%3)&&(r+=o==1||o==-2?"0":"00"),o=mathpow(r,1/3),t=mathfloor((t+1)/3)-(t%3==(t<0?-1:2)),o==1/0?r="5e"+t:(r=o.toExponential(),r=r.slice(0,r.indexOf("e")+1)+t),n=new g(r),n.s=v.s):n=new g(o.toString()),l=(t=g.precision)+3;;)if(u=n,c=u.times(u).times(u),h=c.plus(v),n=divide(h.plus(v).times(u),h.plus(c),l+2,1),digitsToString(u.d).slice(0,l)===(r=digitsToString(n.d)).slice(0,l))if(r=r.slice(l-3,l+1),r=="9999"||!a&&r=="4999"){if(!a&&(finalise(u,t+1,0),u.times(u).times(u).eq(v))){n=u;break}l+=4,a=1}else{(!+r||!+r.slice(1)&&r.charAt(0)=="5")&&(finalise(n,t+1,1),e=!n.times(n).times(n).eq(v));break}return external=!0,finalise(n,t,g.rounding,e)};P$2.decimalPlaces=P$2.dp=function(){var t,e=this.d,r=NaN;if(e){if(t=e.length-1,r=(t-mathfloor(this.e/LOG_BASE))*LOG_BASE,t=e[t],t)for(;t%10==0;t/=10)r--;r<0&&(r=0)}return r};P$2.dividedBy=P$2.div=function(t){return divide(this,new this.constructor(t))};P$2.dividedToIntegerBy=P$2.divToInt=function(t){var e=this,r=e.constructor;return finalise(divide(e,new r(t),0,1,1),r.precision,r.rounding)};P$2.equals=P$2.eq=function(t){return this.cmp(t)===0};P$2.floor=function(){return finalise(new this.constructor(this),this.e+1,3)};P$2.greaterThan=P$2.gt=function(t){return this.cmp(t)>0};P$2.greaterThanOrEqualTo=P$2.gte=function(t){var e=this.cmp(t);return e==1||e===0};P$2.hyperbolicCosine=P$2.cosh=function(){var t,e,r,n,a,o=this,l=o.constructor,u=new l(1);if(!o.isFinite())return new l(o.s?1/0:NaN);if(o.isZero())return u;r=l.precision,n=l.rounding,l.precision=r+Math.max(o.e,o.sd())+4,l.rounding=1,a=o.d.length,a<32?(t=Math.ceil(a/3),e=(1/tinyPow(4,t)).toString()):(t=16,e="2.3283064365386962890625e-10"),o=taylorSeries(l,1,o.times(e),new l(1),!0);for(var c,h=t,v=new l(8);h--;)c=o.times(o),o=u.minus(c.times(v.minus(c.times(v))));return finalise(o,l.precision=r,l.rounding=n,!0)};P$2.hyperbolicSine=P$2.sinh=function(){var t,e,r,n,a=this,o=a.constructor;if(!a.isFinite()||a.isZero())return new o(a);if(e=o.precision,r=o.rounding,o.precision=e+Math.max(a.e,a.sd())+4,o.rounding=1,n=a.d.length,n<3)a=taylorSeries(o,2,a,a,!0);else{t=1.4*Math.sqrt(n),t=t>16?16:t|0,a=a.times(1/tinyPow(5,t)),a=taylorSeries(o,2,a,a,!0);for(var l,u=new o(5),c=new o(16),h=new o(20);t--;)l=a.times(a),a=a.times(u.plus(l.times(c.times(l).plus(h))))}return o.precision=e,o.rounding=r,finalise(a,e,r,!0)};P$2.hyperbolicTangent=P$2.tanh=function(){var t,e,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+7,n.rounding=1,divide(r.sinh(),r.cosh(),n.precision=t,n.rounding=e)):new n(r.s)};P$2.inverseCosine=P$2.acos=function(){var t=this,e=t.constructor,r=t.abs().cmp(1),n=e.precision,a=e.rounding;return r!==-1?r===0?t.isNeg()?getPi(e,n,a):new e(0):new e(NaN):t.isZero()?getPi(e,n+4,a).times(.5):(e.precision=n+6,e.rounding=1,t=new e(1).minus(t).div(t.plus(1)).sqrt().atan(),e.precision=n,e.rounding=a,t.times(2))};P$2.inverseHyperbolicCosine=P$2.acosh=function(){var t,e,r=this,n=r.constructor;return r.lte(1)?new n(r.eq(1)?0:NaN):r.isFinite()?(t=n.precision,e=n.rounding,n.precision=t+Math.max(Math.abs(r.e),r.sd())+4,n.rounding=1,external=!1,r=r.times(r).minus(1).sqrt().plus(r),external=!0,n.precision=t,n.rounding=e,r.ln()):new n(r)};P$2.inverseHyperbolicSine=P$2.asinh=function(){var t,e,r=this,n=r.constructor;return!r.isFinite()||r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+2*Math.max(Math.abs(r.e),r.sd())+6,n.rounding=1,external=!1,r=r.times(r).plus(1).sqrt().plus(r),external=!0,n.precision=t,n.rounding=e,r.ln())};P$2.inverseHyperbolicTangent=P$2.atanh=function(){var t,e,r,n,a=this,o=a.constructor;return a.isFinite()?a.e>=0?new o(a.abs().eq(1)?a.s/0:a.isZero()?a:NaN):(t=o.precision,e=o.rounding,n=a.sd(),Math.max(n,t)<2*-a.e-1?finalise(new o(a),t,e,!0):(o.precision=r=n-a.e,a=divide(a.plus(1),new o(1).minus(a),r+t,1),o.precision=t+4,o.rounding=1,a=a.ln(),o.precision=t,o.rounding=e,a.times(.5))):new o(NaN)};P$2.inverseSine=P$2.asin=function(){var t,e,r,n,a=this,o=a.constructor;return a.isZero()?new o(a):(e=a.abs().cmp(1),r=o.precision,n=o.rounding,e!==-1?e===0?(t=getPi(o,r+4,n).times(.5),t.s=a.s,t):new o(NaN):(o.precision=r+6,o.rounding=1,a=a.div(new o(1).minus(a.times(a)).sqrt().plus(1)).atan(),o.precision=r,o.rounding=n,a.times(2)))};P$2.inverseTangent=P$2.atan=function(){var t,e,r,n,a,o,l,u,c,h=this,v=h.constructor,g=v.precision,T=v.rounding;if(h.isFinite()){if(h.isZero())return new v(h);if(h.abs().eq(1)&&g+4<=PI_PRECISION)return l=getPi(v,g+4,T).times(.25),l.s=h.s,l}else{if(!h.s)return new v(NaN);if(g+4<=PI_PRECISION)return l=getPi(v,g+4,T).times(.5),l.s=h.s,l}for(v.precision=u=g+10,v.rounding=1,r=Math.min(28,u/LOG_BASE+2|0),t=r;t;--t)h=h.div(h.times(h).plus(1).sqrt().plus(1));for(external=!1,e=Math.ceil(u/LOG_BASE),n=1,c=h.times(h),l=new v(h),a=h;t!==-1;)if(a=a.times(c),o=l.minus(a.div(n+=2)),a=a.times(c),l=o.plus(a.div(n+=2)),l.d[e]!==void 0)for(t=e;l.d[t]===o.d[t]&&t--;);return r&&(l=l.times(2<<r-1)),external=!0,finalise(l,v.precision=g,v.rounding=T,!0)};P$2.isFinite=function(){return!!this.d};P$2.isInteger=P$2.isInt=function(){return!!this.d&&mathfloor(this.e/LOG_BASE)>this.d.length-2};P$2.isNaN=function(){return!this.s};P$2.isNegative=P$2.isNeg=function(){return this.s<0};P$2.isPositive=P$2.isPos=function(){return this.s>0};P$2.isZero=function(){return!!this.d&&this.d[0]===0};P$2.lessThan=P$2.lt=function(t){return this.cmp(t)<0};P$2.lessThanOrEqualTo=P$2.lte=function(t){return this.cmp(t)<1};P$2.logarithm=P$2.log=function(t){var e,r,n,a,o,l,u,c,h=this,v=h.constructor,g=v.precision,T=v.rounding,R=5;if(t==null)t=new v(10),e=!0;else{if(t=new v(t),r=t.d,t.s<0||!r||!r[0]||t.eq(1))return new v(NaN);e=t.eq(10)}if(r=h.d,h.s<0||!r||!r[0]||h.eq(1))return new v(r&&!r[0]?-1/0:h.s!=1?NaN:r?0:1/0);if(e)if(r.length>1)o=!0;else{for(a=r[0];a%10===0;)a/=10;o=a!==1}if(external=!1,u=g+R,l=naturalLogarithm(h,u),n=e?getLn10(v,u+10):naturalLogarithm(t,u),c=divide(l,n,u,1),checkRoundingDigits(c.d,a=g,T))do if(u+=10,l=naturalLogarithm(h,u),n=e?getLn10(v,u+10):naturalLogarithm(t,u),c=divide(l,n,u,1),!o){+digitsToString(c.d).slice(a+1,a+15)+1==1e14&&(c=finalise(c,g+1,0));break}while(checkRoundingDigits(c.d,a+=10,T));return external=!0,finalise(c,g,T)};P$2.minus=P$2.sub=function(t){var e,r,n,a,o,l,u,c,h,v,g,T,R=this,W=R.constructor;if(t=new W(t),!R.d||!t.d)return!R.s||!t.s?t=new W(NaN):R.d?t.s=-t.s:t=new W(t.d||R.s!==t.s?R:NaN),t;if(R.s!=t.s)return t.s=-t.s,R.plus(t);if(h=R.d,T=t.d,u=W.precision,c=W.rounding,!h[0]||!T[0]){if(T[0])t.s=-t.s;else if(h[0])t=new W(R);else return new W(c===3?-0:0);return external?finalise(t,u,c):t}if(r=mathfloor(t.e/LOG_BASE),v=mathfloor(R.e/LOG_BASE),h=h.slice(),o=v-r,o){for(g=o<0,g?(e=h,o=-o,l=T.length):(e=T,r=v,l=h.length),n=Math.max(Math.ceil(u/LOG_BASE),l)+2,o>n&&(o=n,e.length=1),e.reverse(),n=o;n--;)e.push(0);e.reverse()}else{for(n=h.length,l=T.length,g=n<l,g&&(l=n),n=0;n<l;n++)if(h[n]!=T[n]){g=h[n]<T[n];break}o=0}for(g&&(e=h,h=T,T=e,t.s=-t.s),l=h.length,n=T.length-l;n>0;--n)h[l++]=0;for(n=T.length;n>o;){if(h[--n]<T[n]){for(a=n;a&&h[--a]===0;)h[a]=BASE-1;--h[a],h[n]+=BASE}h[n]-=T[n]}for(;h[--l]===0;)h.pop();for(;h[0]===0;h.shift())--r;return h[0]?(t.d=h,t.e=getBase10Exponent(h,r),external?finalise(t,u,c):t):new W(c===3?-0:0)};P$2.modulo=P$2.mod=function(t){var e,r=this,n=r.constructor;return t=new n(t),!r.d||!t.s||t.d&&!t.d[0]?new n(NaN):!t.d||r.d&&!r.d[0]?finalise(new n(r),n.precision,n.rounding):(external=!1,n.modulo==9?(e=divide(r,t.abs(),0,3,1),e.s*=t.s):e=divide(r,t,0,n.modulo,1),e=e.times(t),external=!0,r.minus(e))};P$2.naturalExponential=P$2.exp=function(){return naturalExponential(this)};P$2.naturalLogarithm=P$2.ln=function(){return naturalLogarithm(this)};P$2.negated=P$2.neg=function(){var t=new this.constructor(this);return t.s=-t.s,finalise(t)};P$2.plus=P$2.add=function(t){var e,r,n,a,o,l,u,c,h,v,g=this,T=g.constructor;if(t=new T(t),!g.d||!t.d)return!g.s||!t.s?t=new T(NaN):g.d||(t=new T(t.d||g.s===t.s?g:NaN)),t;if(g.s!=t.s)return t.s=-t.s,g.minus(t);if(h=g.d,v=t.d,u=T.precision,c=T.rounding,!h[0]||!v[0])return v[0]||(t=new T(g)),external?finalise(t,u,c):t;if(o=mathfloor(g.e/LOG_BASE),n=mathfloor(t.e/LOG_BASE),h=h.slice(),a=o-n,a){for(a<0?(r=h,a=-a,l=v.length):(r=v,n=o,l=h.length),o=Math.ceil(u/LOG_BASE),l=o>l?o+1:l+1,a>l&&(a=l,r.length=1),r.reverse();a--;)r.push(0);r.reverse()}for(l=h.length,a=v.length,l-a<0&&(a=l,r=v,v=h,h=r),e=0;a;)e=(h[--a]=h[a]+v[a]+e)/BASE|0,h[a]%=BASE;for(e&&(h.unshift(e),++n),l=h.length;h[--l]==0;)h.pop();return t.d=h,t.e=getBase10Exponent(h,n),external?finalise(t,u,c):t};P$2.precision=P$2.sd=function(t){var e,r=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(invalidArgument+t);return r.d?(e=getPrecision(r.d),t&&r.e+1>e&&(e=r.e+1)):e=NaN,e};P$2.round=function(){var t=this,e=t.constructor;return finalise(new e(t),t.e+1,e.rounding)};P$2.sine=P$2.sin=function(){var t,e,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+Math.max(r.e,r.sd())+LOG_BASE,n.rounding=1,r=sine(n,toLessThanHalfPi(n,r)),n.precision=t,n.rounding=e,finalise(quadrant>2?r.neg():r,t,e,!0)):new n(NaN)};P$2.squareRoot=P$2.sqrt=function(){var t,e,r,n,a,o,l=this,u=l.d,c=l.e,h=l.s,v=l.constructor;if(h!==1||!u||!u[0])return new v(!h||h<0&&(!u||u[0])?NaN:u?l:1/0);for(external=!1,h=Math.sqrt(+l),h==0||h==1/0?(e=digitsToString(u),(e.length+c)%2==0&&(e+="0"),h=Math.sqrt(e),c=mathfloor((c+1)/2)-(c<0||c%2),h==1/0?e="5e"+c:(e=h.toExponential(),e=e.slice(0,e.indexOf("e")+1)+c),n=new v(e)):n=new v(h.toString()),r=(c=v.precision)+3;;)if(o=n,n=o.plus(divide(l,o,r+2,1)).times(.5),digitsToString(o.d).slice(0,r)===(e=digitsToString(n.d)).slice(0,r))if(e=e.slice(r-3,r+1),e=="9999"||!a&&e=="4999"){if(!a&&(finalise(o,c+1,0),o.times(o).eq(l))){n=o;break}r+=4,a=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(finalise(n,c+1,1),t=!n.times(n).eq(l));break}return external=!0,finalise(n,c,v.rounding,t)};P$2.tangent=P$2.tan=function(){var t,e,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+10,n.rounding=1,r=r.sin(),r.s=1,r=divide(r,new n(1).minus(r.times(r)).sqrt(),t+10,0),n.precision=t,n.rounding=e,finalise(quadrant==2||quadrant==4?r.neg():r,t,e,!0)):new n(NaN)};P$2.times=P$2.mul=function(t){var e,r,n,a,o,l,u,c,h,v=this,g=v.constructor,T=v.d,R=(t=new g(t)).d;if(t.s*=v.s,!T||!T[0]||!R||!R[0])return new g(!t.s||T&&!T[0]&&!R||R&&!R[0]&&!T?NaN:!T||!R?t.s/0:t.s*0);for(r=mathfloor(v.e/LOG_BASE)+mathfloor(t.e/LOG_BASE),c=T.length,h=R.length,c<h&&(o=T,T=R,R=o,l=c,c=h,h=l),o=[],l=c+h,n=l;n--;)o.push(0);for(n=h;--n>=0;){for(e=0,a=c+n;a>n;)u=o[a]+R[n]*T[a-n-1]+e,o[a--]=u%BASE|0,e=u/BASE|0;o[a]=(o[a]+e)%BASE|0}for(;!o[--l];)o.pop();return e?++r:o.shift(),t.d=o,t.e=getBase10Exponent(o,r),external?finalise(t,g.precision,g.rounding):t};P$2.toBinary=function(t,e){return toStringBinary(this,2,t,e)};P$2.toDecimalPlaces=P$2.toDP=function(t,e){var r=this,n=r.constructor;return r=new n(r),t===void 0?r:(checkInt32(t,0,MAX_DIGITS),e===void 0?e=n.rounding:checkInt32(e,0,8),finalise(r,t+r.e+1,e))};P$2.toExponential=function(t,e){var r,n=this,a=n.constructor;return t===void 0?r=finiteToString(n,!0):(checkInt32(t,0,MAX_DIGITS),e===void 0?e=a.rounding:checkInt32(e,0,8),n=finalise(new a(n),t+1,e),r=finiteToString(n,!0,t+1)),n.isNeg()&&!n.isZero()?"-"+r:r};P$2.toFixed=function(t,e){var r,n,a=this,o=a.constructor;return t===void 0?r=finiteToString(a):(checkInt32(t,0,MAX_DIGITS),e===void 0?e=o.rounding:checkInt32(e,0,8),n=finalise(new o(a),t+a.e+1,e),r=finiteToString(n,!1,t+n.e+1)),a.isNeg()&&!a.isZero()?"-"+r:r};P$2.toFraction=function(t){var e,r,n,a,o,l,u,c,h,v,g,T,R=this,W=R.d,k=R.constructor;if(!W)return new k(R);if(h=r=new k(1),n=c=new k(0),e=new k(n),o=e.e=getPrecision(W)-R.e-1,l=o%LOG_BASE,e.d[0]=mathpow(10,l<0?LOG_BASE+l:l),t==null)t=o>0?e:h;else{if(u=new k(t),!u.isInt()||u.lt(h))throw Error(invalidArgument+u);t=u.gt(e)?o>0?e:h:u}for(external=!1,u=new k(digitsToString(W)),v=k.precision,k.precision=o=W.length*LOG_BASE*2;g=divide(u,e,0,1,1),a=r.plus(g.times(n)),a.cmp(t)!=1;)r=n,n=a,a=h,h=c.plus(g.times(a)),c=a,a=e,e=u.minus(g.times(a)),u=a;return a=divide(t.minus(r),n,0,1,1),c=c.plus(a.times(h)),r=r.plus(a.times(n)),c.s=h.s=R.s,T=divide(h,n,o,1).minus(R).abs().cmp(divide(c,r,o,1).minus(R).abs())<1?[h,n]:[c,r],k.precision=v,external=!0,T};P$2.toHexadecimal=P$2.toHex=function(t,e){return toStringBinary(this,16,t,e)};P$2.toNearest=function(t,e){var r=this,n=r.constructor;if(r=new n(r),t==null){if(!r.d)return r;t=new n(1),e=n.rounding}else{if(t=new n(t),e===void 0?e=n.rounding:checkInt32(e,0,8),!r.d)return t.s?r:t;if(!t.d)return t.s&&(t.s=r.s),t}return t.d[0]?(external=!1,r=divide(r,t,0,e,1).times(t),external=!0,finalise(r)):(t.s=r.s,r=t),r};P$2.toNumber=function(){return+this};P$2.toOctal=function(t,e){return toStringBinary(this,8,t,e)};P$2.toPower=P$2.pow=function(t){var e,r,n,a,o,l,u=this,c=u.constructor,h=+(t=new c(t));if(!u.d||!t.d||!u.d[0]||!t.d[0])return new c(mathpow(+u,h));if(u=new c(u),u.eq(1))return u;if(n=c.precision,o=c.rounding,t.eq(1))return finalise(u,n,o);if(e=mathfloor(t.e/LOG_BASE),e>=t.d.length-1&&(r=h<0?-h:h)<=MAX_SAFE_INTEGER)return a=intPow(c,u,r,n),t.s<0?new c(1).div(a):finalise(a,n,o);if(l=u.s,l<0){if(e<t.d.length-1)return new c(NaN);if((t.d[e]&1)==0&&(l=1),u.e==0&&u.d[0]==1&&u.d.length==1)return u.s=l,u}return r=mathpow(+u,h),e=r==0||!isFinite(r)?mathfloor(h*(Math.log("0."+digitsToString(u.d))/Math.LN10+u.e+1)):new c(r+"").e,e>c.maxE+1||e<c.minE-1?new c(e>0?l/0:0):(external=!1,c.rounding=u.s=1,r=Math.min(12,(e+"").length),a=naturalExponential(t.times(naturalLogarithm(u,n+r)),n),a.d&&(a=finalise(a,n+5,1),checkRoundingDigits(a.d,n,o)&&(e=n+10,a=finalise(naturalExponential(t.times(naturalLogarithm(u,e+r)),e),e+5,1),+digitsToString(a.d).slice(n+1,n+15)+1==1e14&&(a=finalise(a,n+1,0)))),a.s=l,external=!0,c.rounding=o,finalise(a,n,o))};P$2.toPrecision=function(t,e){var r,n=this,a=n.constructor;return t===void 0?r=finiteToString(n,n.e<=a.toExpNeg||n.e>=a.toExpPos):(checkInt32(t,1,MAX_DIGITS),e===void 0?e=a.rounding:checkInt32(e,0,8),n=finalise(new a(n),t,e),r=finiteToString(n,t<=n.e||n.e<=a.toExpNeg,t)),n.isNeg()&&!n.isZero()?"-"+r:r};P$2.toSignificantDigits=P$2.toSD=function(t,e){var r=this,n=r.constructor;return t===void 0?(t=n.precision,e=n.rounding):(checkInt32(t,1,MAX_DIGITS),e===void 0?e=n.rounding:checkInt32(e,0,8)),finalise(new n(r),t,e)};P$2.toString=function(){var t=this,e=t.constructor,r=finiteToString(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()&&!t.isZero()?"-"+r:r};P$2.truncated=P$2.trunc=function(){return finalise(new this.constructor(this),this.e+1,1)};P$2.valueOf=P$2.toJSON=function(){var t=this,e=t.constructor,r=finiteToString(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()?"-"+r:r};function digitsToString(t){var e,r,n,a=t.length-1,o="",l=t[0];if(a>0){for(o+=l,e=1;e<a;e++)n=t[e]+"",r=LOG_BASE-n.length,r&&(o+=getZeroString(r)),o+=n;l=t[e],n=l+"",r=LOG_BASE-n.length,r&&(o+=getZeroString(r))}else if(l===0)return"0";for(;l%10===0;)l/=10;return o+l}function checkInt32(t,e,r){if(t!==~~t||t<e||t>r)throw Error(invalidArgument+t)}function checkRoundingDigits(t,e,r,n){var a,o,l,u;for(o=t[0];o>=10;o/=10)--e;return--e<0?(e+=LOG_BASE,a=0):(a=Math.ceil((e+1)/LOG_BASE),e%=LOG_BASE),o=mathpow(10,LOG_BASE-e),u=t[a]%o|0,n==null?e<3?(e==0?u=u/100|0:e==1&&(u=u/10|0),l=r<4&&u==99999||r>3&&u==49999||u==5e4||u==0):l=(r<4&&u+1==o||r>3&&u+1==o/2)&&(t[a+1]/o/100|0)==mathpow(10,e-2)-1||(u==o/2||u==0)&&(t[a+1]/o/100|0)==0:e<4?(e==0?u=u/1e3|0:e==1?u=u/100|0:e==2&&(u=u/10|0),l=(n||r<4)&&u==9999||!n&&r>3&&u==4999):l=((n||r<4)&&u+1==o||!n&&r>3&&u+1==o/2)&&(t[a+1]/o/1e3|0)==mathpow(10,e-3)-1,l}function convertBase(t,e,r){for(var n,a=[0],o,l=0,u=t.length;l<u;){for(o=a.length;o--;)a[o]*=e;for(a[0]+=NUMERALS.indexOf(t.charAt(l++)),n=0;n<a.length;n++)a[n]>r-1&&(a[n+1]===void 0&&(a[n+1]=0),a[n+1]+=a[n]/r|0,a[n]%=r)}return a.reverse()}function cosine(t,e){var r,n,a;if(e.isZero())return e;n=e.d.length,n<32?(r=Math.ceil(n/3),a=(1/tinyPow(4,r)).toString()):(r=16,a="2.3283064365386962890625e-10"),t.precision+=r,e=taylorSeries(t,1,e.times(a),new t(1));for(var o=r;o--;){var l=e.times(e);e=l.times(l).minus(l).times(8).plus(1)}return t.precision-=r,e}var divide=(function(){function t(n,a,o){var l,u=0,c=n.length;for(n=n.slice();c--;)l=n[c]*a+u,n[c]=l%o|0,u=l/o|0;return u&&n.unshift(u),n}function e(n,a,o,l){var u,c;if(o!=l)c=o>l?1:-1;else for(u=c=0;u<o;u++)if(n[u]!=a[u]){c=n[u]>a[u]?1:-1;break}return c}function r(n,a,o,l){for(var u=0;o--;)n[o]-=u,u=n[o]<a[o]?1:0,n[o]=u*l+n[o]-a[o];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,o,l,u,c){var h,v,g,T,R,W,k,J,q,Se,V,Y,ie,se,ct,ae,st,Ct,$t,jo,Lp=n.constructor,Mn=n.s==a.s?1:-1,sa=n.d,re=a.d;if(!sa||!sa[0]||!re||!re[0])return new Lp(!n.s||!a.s||(sa?re&&sa[0]==re[0]:!re)?NaN:sa&&sa[0]==0||!re?Mn*0:Mn/0);for(c?(R=1,v=n.e-a.e):(c=BASE,R=LOG_BASE,v=mathfloor(n.e/R)-mathfloor(a.e/R)),$t=re.length,st=sa.length,q=new Lp(Mn),Se=q.d=[],g=0;re[g]==(sa[g]||0);g++);if(re[g]>(sa[g]||0)&&v--,o==null?(se=o=Lp.precision,l=Lp.rounding):u?se=o+(n.e-a.e)+1:se=o,se<0)Se.push(1),W=!0;else{if(se=se/R+2|0,g=0,$t==1){for(T=0,re=re[0],se++;(g<st||T)&&se--;g++)ct=T*c+(sa[g]||0),Se[g]=ct/re|0,T=ct%re|0;W=T||g<st}else{for(T=c/(re[0]+1)|0,T>1&&(re=t(re,T,c),sa=t(sa,T,c),$t=re.length,st=sa.length),ae=$t,V=sa.slice(0,$t),Y=V.length;Y<$t;)V[Y++]=0;jo=re.slice(),jo.unshift(0),Ct=re[0],re[1]>=c/2&&++Ct;do T=0,h=e(re,V,$t,Y),h<0?(ie=V[0],$t!=Y&&(ie=ie*c+(V[1]||0)),T=ie/Ct|0,T>1?(T>=c&&(T=c-1),k=t(re,T,c),J=k.length,Y=V.length,h=e(k,V,J,Y),h==1&&(T--,r(k,$t<J?jo:re,J,c))):(T==0&&(h=T=1),k=re.slice()),J=k.length,J<Y&&k.unshift(0),r(V,k,Y,c),h==-1&&(Y=V.length,h=e(re,V,$t,Y),h<1&&(T++,r(V,$t<Y?jo:re,Y,c))),Y=V.length):h===0&&(T++,V=[0]),Se[g++]=T,h&&V[0]?V[Y++]=sa[ae]||0:(V=[sa[ae]],Y=1);while((ae++<st||V[0]!==void 0)&&se--);W=V[0]!==void 0}Se[0]||Se.shift()}if(R==1)q.e=v,inexact=W;else{for(g=1,T=Se[0];T>=10;T/=10)g++;q.e=g+v*R-1,finalise(q,u?o+q.e+1:o,l,W)}return q}})();function finalise(t,e,r,n){var a,o,l,u,c,h,v,g,T,R=t.constructor;e:if(e!=null){if(g=t.d,!g)return t;for(a=1,u=g[0];u>=10;u/=10)a++;if(o=e-a,o<0)o+=LOG_BASE,l=e,v=g[T=0],c=v/mathpow(10,a-l-1)%10|0;else if(T=Math.ceil((o+1)/LOG_BASE),u=g.length,T>=u)if(n){for(;u++<=T;)g.push(0);v=c=0,a=1,o%=LOG_BASE,l=o-LOG_BASE+1}else break e;else{for(v=u=g[T],a=1;u>=10;u/=10)a++;o%=LOG_BASE,l=o-LOG_BASE+a,c=l<0?0:v/mathpow(10,a-l-1)%10|0}if(n=n||e<0||g[T+1]!==void 0||(l<0?v:v%mathpow(10,a-l-1)),h=r<4?(c||n)&&(r==0||r==(t.s<0?3:2)):c>5||c==5&&(r==4||n||r==6&&(o>0?l>0?v/mathpow(10,a-l):0:g[T-1])%10&1||r==(t.s<0?8:7)),e<1||!g[0])return g.length=0,h?(e-=t.e+1,g[0]=mathpow(10,(LOG_BASE-e%LOG_BASE)%LOG_BASE),t.e=-e||0):g[0]=t.e=0,t;if(o==0?(g.length=T,u=1,T--):(g.length=T+1,u=mathpow(10,LOG_BASE-o),g[T]=l>0?(v/mathpow(10,a-l)%mathpow(10,l)|0)*u:0),h)for(;;)if(T==0){for(o=1,l=g[0];l>=10;l/=10)o++;for(l=g[0]+=u,u=1;l>=10;l/=10)u++;o!=u&&(t.e++,g[0]==BASE&&(g[0]=1));break}else{if(g[T]+=u,g[T]!=BASE)break;g[T--]=0,u=1}for(o=g.length;g[--o]===0;)g.pop()}return external&&(t.e>R.maxE?(t.d=null,t.e=NaN):t.e<R.minE&&(t.e=0,t.d=[0])),t}function finiteToString(t,e,r){if(!t.isFinite())return nonFiniteToString(t);var n,a=t.e,o=digitsToString(t.d),l=o.length;return e?(r&&(n=r-l)>0?o=o.charAt(0)+"."+o.slice(1)+getZeroString(n):l>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(t.e<0?"e":"e+")+t.e):a<0?(o="0."+getZeroString(-a-1)+o,r&&(n=r-l)>0&&(o+=getZeroString(n))):a>=l?(o+=getZeroString(a+1-l),r&&(n=r-a-1)>0&&(o=o+"."+getZeroString(n))):((n=a+1)<l&&(o=o.slice(0,n)+"."+o.slice(n)),r&&(n=r-l)>0&&(a+1===l&&(o+="."),o+=getZeroString(n))),o}function getBase10Exponent(t,e){var r=t[0];for(e*=LOG_BASE;r>=10;r/=10)e++;return e}function getLn10(t,e,r){if(e>LN10_PRECISION)throw external=!0,r&&(t.precision=r),Error(precisionLimitExceeded);return finalise(new t(LN10),e,1,!0)}function getPi(t,e,r){if(e>PI_PRECISION)throw Error(precisionLimitExceeded);return finalise(new t(PI),e,r,!0)}function getPrecision(t){var e=t.length-1,r=e*LOG_BASE+1;if(e=t[e],e){for(;e%10==0;e/=10)r--;for(e=t[0];e>=10;e/=10)r++}return r}function getZeroString(t){for(var e="";t--;)e+="0";return e}function intPow(t,e,r,n){var a,o=new t(1),l=Math.ceil(n/LOG_BASE+4);for(external=!1;;){if(r%2&&(o=o.times(e),truncate(o.d,l)&&(a=!0)),r=mathfloor(r/2),r===0){r=o.d.length-1,a&&o.d[r]===0&&++o.d[r];break}e=e.times(e),truncate(e.d,l)}return external=!0,o}function isOdd(t){return t.d[t.d.length-1]&1}function maxOrMin(t,e,r){for(var n,a,o=new t(e[0]),l=0;++l<e.length;){if(a=new t(e[l]),!a.s){o=a;break}n=o.cmp(a),(n===r||n===0&&o.s===r)&&(o=a)}return o}function naturalExponential(t,e){var r,n,a,o,l,u,c,h=0,v=0,g=0,T=t.constructor,R=T.rounding,W=T.precision;if(!t.d||!t.d[0]||t.e>17)return new T(t.d?t.d[0]?t.s<0?0:1/0:1:t.s?t.s<0?0:t:NaN);for(e==null?(external=!1,c=W):c=e,u=new T(.03125);t.e>-2;)t=t.times(u),g+=5;for(n=Math.log(mathpow(2,g))/Math.LN10*2+5|0,c+=n,r=o=l=new T(1),T.precision=c;;){if(o=finalise(o.times(t),c,1),r=r.times(++v),u=l.plus(divide(o,r,c,1)),digitsToString(u.d).slice(0,c)===digitsToString(l.d).slice(0,c)){for(a=g;a--;)l=finalise(l.times(l),c,1);if(e==null)if(h<3&&checkRoundingDigits(l.d,c-n,R,h))T.precision=c+=10,r=o=u=new T(1),v=0,h++;else return finalise(l,T.precision=W,R,external=!0);else return T.precision=W,l}l=u}}function naturalLogarithm(t,e){var r,n,a,o,l,u,c,h,v,g,T,R=1,W=10,k=t,J=k.d,q=k.constructor,Se=q.rounding,V=q.precision;if(k.s<0||!J||!J[0]||!k.e&&J[0]==1&&J.length==1)return new q(J&&!J[0]?-1/0:k.s!=1?NaN:J?0:k);if(e==null?(external=!1,v=V):v=e,q.precision=v+=W,r=digitsToString(J),n=r.charAt(0),Math.abs(o=k.e)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)k=k.times(t),r=digitsToString(k.d),n=r.charAt(0),R++;o=k.e,n>1?(k=new q("0."+r),o++):k=new q(n+"."+r.slice(1))}else return h=getLn10(q,v+2,V).times(o+""),k=naturalLogarithm(new q(n+"."+r.slice(1)),v-W).plus(h),q.precision=V,e==null?finalise(k,V,Se,external=!0):k;for(g=k,c=l=k=divide(k.minus(1),k.plus(1),v,1),T=finalise(k.times(k),v,1),a=3;;){if(l=finalise(l.times(T),v,1),h=c.plus(divide(l,new q(a),v,1)),digitsToString(h.d).slice(0,v)===digitsToString(c.d).slice(0,v))if(c=c.times(2),o!==0&&(c=c.plus(getLn10(q,v+2,V).times(o+""))),c=divide(c,new q(R),v,1),e==null)if(checkRoundingDigits(c.d,v-W,Se,u))q.precision=v+=W,h=l=k=divide(g.minus(1),g.plus(1),v,1),T=finalise(k.times(k),v,1),a=u=1;else return finalise(c,q.precision=V,Se,external=!0);else return q.precision=V,c;c=h,a+=2}}function nonFiniteToString(t){return String(t.s*t.s/0)}function parseDecimal(t,e){var r,n,a;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),n=0;e.charCodeAt(n)===48;n++);for(a=e.length;e.charCodeAt(a-1)===48;--a);if(e=e.slice(n,a),e){if(a-=n,t.e=r=r-n-1,t.d=[],n=(r+1)%LOG_BASE,r<0&&(n+=LOG_BASE),n<a){for(n&&t.d.push(+e.slice(0,n)),a-=LOG_BASE;n<a;)t.d.push(+e.slice(n,n+=LOG_BASE));e=e.slice(n),n=LOG_BASE-e.length}else n-=a;for(;n--;)e+="0";t.d.push(+e),external&&(t.e>t.constructor.maxE?(t.d=null,t.e=NaN):t.e<t.constructor.minE&&(t.e=0,t.d=[0]))}else t.e=0,t.d=[0];return t}function parseOther(t,e){var r,n,a,o,l,u,c,h,v;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),isDecimal.test(e))return parseDecimal(t,e)}else if(e==="Infinity"||e==="NaN")return+e||(t.s=NaN),t.e=NaN,t.d=null,t;if(isHex.test(e))r=16,e=e.toLowerCase();else if(isBinary.test(e))r=2;else if(isOctal.test(e))r=8;else throw Error(invalidArgument+e);for(o=e.search(/p/i),o>0?(c=+e.slice(o+1),e=e.substring(2,o)):e=e.slice(2),o=e.indexOf("."),l=o>=0,n=t.constructor,l&&(e=e.replace(".",""),u=e.length,o=u-o,a=intPow(n,new n(r),o,o*2)),h=convertBase(e,r,BASE),v=h.length-1,o=v;h[o]===0;--o)h.pop();return o<0?new n(t.s*0):(t.e=getBase10Exponent(h,v),t.d=h,external=!1,l&&(t=divide(t,a,u*4)),c&&(t=t.times(Math.abs(c)<54?mathpow(2,c):Decimal.pow(2,c))),external=!0,t)}function sine(t,e){var r,n=e.d.length;if(n<3)return e.isZero()?e:taylorSeries(t,2,e,e);r=1.4*Math.sqrt(n),r=r>16?16:r|0,e=e.times(1/tinyPow(5,r)),e=taylorSeries(t,2,e,e);for(var a,o=new t(5),l=new t(16),u=new t(20);r--;)a=e.times(e),e=e.times(o.plus(a.times(l.times(a).minus(u))));return e}function taylorSeries(t,e,r,n,a){var o,l,u,c,h=t.precision,v=Math.ceil(h/LOG_BASE);for(external=!1,c=r.times(r),u=new t(n);;){if(l=divide(u.times(c),new t(e++*e++),h,1),u=a?n.plus(l):n.minus(l),n=divide(l.times(c),new t(e++*e++),h,1),l=u.plus(n),l.d[v]!==void 0){for(o=v;l.d[o]===u.d[o]&&o--;);if(o==-1)break}o=u,u=n,n=l,l=o}return external=!0,l.d.length=v+1,l}function tinyPow(t,e){for(var r=t;--e;)r*=t;return r}function toLessThanHalfPi(t,e){var r,n=e.s<0,a=getPi(t,t.precision,1),o=a.times(.5);if(e=e.abs(),e.lte(o))return quadrant=n?4:1,e;if(r=e.divToInt(a),r.isZero())quadrant=n?3:2;else{if(e=e.minus(r.times(a)),e.lte(o))return quadrant=isOdd(r)?n?2:3:n?4:1,e;quadrant=isOdd(r)?n?1:4:n?3:2}return e.minus(a).abs()}function toStringBinary(t,e,r,n){var a,o,l,u,c,h,v,g,T,R=t.constructor,W=r!==void 0;if(W?(checkInt32(r,1,MAX_DIGITS),n===void 0?n=R.rounding:checkInt32(n,0,8)):(r=R.precision,n=R.rounding),!t.isFinite())v=nonFiniteToString(t);else{for(v=finiteToString(t),l=v.indexOf("."),W?(a=2,e==16?r=r*4-3:e==8&&(r=r*3-2)):a=e,l>=0&&(v=v.replace(".",""),T=new R(1),T.e=v.length-l,T.d=convertBase(finiteToString(T),10,a),T.e=T.d.length),g=convertBase(v,10,a),o=c=g.length;g[--c]==0;)g.pop();if(!g[0])v=W?"0p+0":"0";else{if(l<0?o--:(t=new R(t),t.d=g,t.e=o,t=divide(t,T,r,n,0,a),g=t.d,o=t.e,h=inexact),l=g[r],u=a/2,h=h||g[r+1]!==void 0,h=n<4?(l!==void 0||h)&&(n===0||n===(t.s<0?3:2)):l>u||l===u&&(n===4||h||n===6&&g[r-1]&1||n===(t.s<0?8:7)),g.length=r,h)for(;++g[--r]>a-1;)g[r]=0,r||(++o,g.unshift(1));for(c=g.length;!g[c-1];--c);for(l=0,v="";l<c;l++)v+=NUMERALS.charAt(g[l]);if(W){if(c>1)if(e==16||e==8){for(l=e==16?4:3,--c;c%l;c++)v+="0";for(g=convertBase(v,a,e),c=g.length;!g[c-1];--c);for(l=1,v="1.";l<c;l++)v+=NUMERALS.charAt(g[l])}else v=v.charAt(0)+"."+v.slice(1);v=v+(o<0?"p":"p+")+o}else if(o<0){for(;++o;)v="0"+v;v="0."+v}else if(++o>c)for(o-=c;o--;)v+="0";else o<c&&(v=v.slice(0,o)+"."+v.slice(o))}v=(e==16?"0x":e==2?"0b":e==8?"0o":"")+v}return t.s<0?"-"+v:v}function truncate(t,e){if(t.length>e)return t.length=e,!0}function abs$1(t){return new this(t).abs()}function acos(t){return new this(t).acos()}function acosh(t){return new this(t).acosh()}function add(t,e){return new this(t).plus(e)}function asin(t){return new this(t).asin()}function asinh(t){return new this(t).asinh()}function atan(t){return new this(t).atan()}function atanh(t){return new this(t).atanh()}function atan2(t,e){t=new this(t),e=new this(e);var r,n=this.precision,a=this.rounding,o=n+4;return!t.s||!e.s?r=new this(NaN):!t.d&&!e.d?(r=getPi(this,o,1).times(e.s>0?.25:.75),r.s=t.s):!e.d||t.isZero()?(r=e.s<0?getPi(this,n,a):new this(0),r.s=t.s):!t.d||e.isZero()?(r=getPi(this,o,1).times(.5),r.s=t.s):e.s<0?(this.precision=o,this.rounding=1,r=this.atan(divide(t,e,o,1)),e=getPi(this,o,1),this.precision=n,this.rounding=a,r=t.s<0?r.minus(e):r.plus(e)):r=this.atan(divide(t,e,o,1)),r}function cbrt(t){return new this(t).cbrt()}function ceil(t){return finalise(t=new this(t),t.e+1,2)}function clamp(t,e,r){return new this(t).clamp(e,r)}function config(t){if(!t||typeof t!="object")throw Error(decimalError+"Object expected");var e,r,n,a=t.defaults===!0,o=["precision",1,MAX_DIGITS,"rounding",0,8,"toExpNeg",-EXP_LIMIT,0,"toExpPos",0,EXP_LIMIT,"maxE",0,EXP_LIMIT,"minE",-EXP_LIMIT,0,"modulo",0,9];for(e=0;e<o.length;e+=3)if(r=o[e],a&&(this[r]=DEFAULTS[r]),(n=t[r])!==void 0)if(mathfloor(n)===n&&n>=o[e+1]&&n<=o[e+2])this[r]=n;else throw Error(invalidArgument+r+": "+n);if(r="crypto",a&&(this[r]=DEFAULTS[r]),(n=t[r])!==void 0)if(n===!0||n===!1||n===0||n===1)if(n)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[r]=!0;else throw Error(cryptoUnavailable);else this[r]=!1;else throw Error(invalidArgument+r+": "+n);return this}function cos(t){return new this(t).cos()}function cosh$1(t){return new this(t).cosh()}function clone$1(t){var e,r,n;function a(o){var l,u,c,h=this;if(!(h instanceof a))return new a(o);if(h.constructor=a,isDecimalInstance(o)){h.s=o.s,external?!o.d||o.e>a.maxE?(h.e=NaN,h.d=null):o.e<a.minE?(h.e=0,h.d=[0]):(h.e=o.e,h.d=o.d.slice()):(h.e=o.e,h.d=o.d?o.d.slice():o.d);return}if(c=typeof o,c==="number"){if(o===0){h.s=1/o<0?-1:1,h.e=0,h.d=[0];return}if(o<0?(o=-o,h.s=-1):h.s=1,o===~~o&&o<1e7){for(l=0,u=o;u>=10;u/=10)l++;external?l>a.maxE?(h.e=NaN,h.d=null):l<a.minE?(h.e=0,h.d=[0]):(h.e=l,h.d=[o]):(h.e=l,h.d=[o]);return}if(o*0!==0){o||(h.s=NaN),h.e=NaN,h.d=null;return}return parseDecimal(h,o.toString())}if(c==="string")return(u=o.charCodeAt(0))===45?(o=o.slice(1),h.s=-1):(u===43&&(o=o.slice(1)),h.s=1),isDecimal.test(o)?parseDecimal(h,o):parseOther(h,o);if(c==="bigint")return o<0?(o=-o,h.s=-1):h.s=1,parseDecimal(h,o.toString());throw Error(invalidArgument+o)}if(a.prototype=P$2,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.EUCLID=9,a.config=a.set=config,a.clone=clone$1,a.isDecimal=isDecimalInstance,a.abs=abs$1,a.acos=acos,a.acosh=acosh,a.add=add,a.asin=asin,a.asinh=asinh,a.atan=atan,a.atanh=atanh,a.atan2=atan2,a.cbrt=cbrt,a.ceil=ceil,a.clamp=clamp,a.cos=cos,a.cosh=cosh$1,a.div=div,a.exp=exp,a.floor=floor,a.hypot=hypot$1,a.ln=ln,a.log=log,a.log10=log10,a.log2=log2,a.max=max,a.min=min,a.mod=mod$1,a.mul=mul,a.pow=pow,a.random=random,a.round=round,a.sign=sign,a.sin=sin,a.sinh=sinh$1,a.sqrt=sqrt,a.sub=sub,a.sum=sum,a.tan=tan,a.tanh=tanh,a.trunc=trunc,t===void 0&&(t={}),t&&t.defaults!==!0)for(n=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<n.length;)t.hasOwnProperty(r=n[e++])||(t[r]=this[r]);return a.config(t),a}function div(t,e){return new this(t).div(e)}function exp(t){return new this(t).exp()}function floor(t){return finalise(t=new this(t),t.e+1,3)}function hypot$1(){var t,e,r=new this(0);for(external=!1,t=0;t<arguments.length;)if(e=new this(arguments[t++]),e.d)r.d&&(r=r.plus(e.times(e)));else{if(e.s)return external=!0,new this(1/0);r=e}return external=!0,r.sqrt()}function isDecimalInstance(t){return t instanceof Decimal||t&&t.toStringTag===tag||!1}function ln(t){return new this(t).ln()}function log(t,e){return new this(t).log(e)}function log2(t){return new this(t).log(2)}function log10(t){return new this(t).log(10)}function max(){return maxOrMin(this,arguments,-1)}function min(){return maxOrMin(this,arguments,1)}function mod$1(t,e){return new this(t).mod(e)}function mul(t,e){return new this(t).mul(e)}function pow(t,e){return new this(t).pow(e)}function random(t){var e,r,n,a,o=0,l=new this(1),u=[];if(t===void 0?t=this.precision:checkInt32(t,1,MAX_DIGITS),n=Math.ceil(t/LOG_BASE),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(n));o<n;)a=e[o],a>=429e7?e[o]=crypto.getRandomValues(new Uint32Array(1))[0]:u[o++]=a%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(n*=4);o<n;)a=e[o]+(e[o+1]<<8)+(e[o+2]<<16)+((e[o+3]&127)<<24),a>=214e7?crypto.randomBytes(4).copy(e,o):(u.push(a%1e7),o+=4);o=n/4}else throw Error(cryptoUnavailable);else for(;o<n;)u[o++]=Math.random()*1e7|0;for(n=u[--o],t%=LOG_BASE,n&&t&&(a=mathpow(10,LOG_BASE-t),u[o]=(n/a|0)*a);u[o]===0;o--)u.pop();if(o<0)r=0,u=[0];else{for(r=-1;u[0]===0;r-=LOG_BASE)u.shift();for(n=1,a=u[0];a>=10;a/=10)n++;n<LOG_BASE&&(r-=LOG_BASE-n)}return l.e=r,l.d=u,l}function round(t){return finalise(t=new this(t),t.e+1,this.rounding)}function sign(t){return t=new this(t),t.d?t.d[0]?t.s:0*t.s:t.s||NaN}function sin(t){return new this(t).sin()}function sinh$1(t){return new this(t).sinh()}function sqrt(t){return new this(t).sqrt()}function sub(t,e){return new this(t).sub(e)}function sum(){var t=0,e=arguments,r=new this(e[t]);for(external=!1;r.s&&++t<e.length;)r=r.plus(e[t]);return external=!0,finalise(r,this.precision,this.rounding)}function tan(t){return new this(t).tan()}function tanh(t){return new this(t).tanh()}function trunc(t){return finalise(t=new this(t),t.e+1,1)}P$2[Symbol.for("nodejs.util.inspect.custom")]=P$2.toString;P$2[Symbol.toStringTag]="Decimal";var Decimal=P$2.constructor=clone$1(DEFAULTS);LN10=new Decimal(LN10);PI=new Decimal(PI);var name$r="BigNumber",dependencies$r=["?on","config"],createBigNumberClass=factory(name$r,dependencies$r,t=>{var{on:e,config:r}=t,n=Decimal.clone({precision:r.precision,modulo:Decimal.EUCLID});return n.prototype=Object.create(n.prototype),n.prototype.type="BigNumber",n.prototype.isBigNumber=!0,n.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},n.fromJSON=function(a){return new n(a.value)},e&&e("config",function(a,o){a.precision!==o.precision&&n.config({precision:a.precision})}),n},{isClass:!0});const cosh=Math.cosh||function(t){return Math.abs(t)<1e-9?1-t:(Math.exp(t)+Math.exp(-t))*.5},sinh=Math.sinh||function(t){return Math.abs(t)<1e-9?t:(Math.exp(t)-Math.exp(-t))*.5},cosm1=function(t){const e=Math.PI/4;if(-e>t||t>e)return Math.cos(t)-1;const r=t*t;return r*(r*(r*(r*(r*(r*(r*(r/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-1/2)},hypot=function(t,e){return t=Math.abs(t),e=Math.abs(e),t<e&&([t,e]=[e,t]),t<1e8?Math.sqrt(t*t+e*e):(e/=t,t*Math.sqrt(1+e*e))},parser_exit=function(){throw SyntaxError("Invalid Param")};function logHypot(t,e){const r=Math.abs(t),n=Math.abs(e);return t===0?Math.log(n):e===0?Math.log(r):r<3e3&&n<3e3?Math.log(t*t+e*e)*.5:(t=t*.5,e=e*.5,.5*Math.log(t*t+e*e)+Math.LN2)}const P$1={re:0,im:0},parse$1=function(t,e){const r=P$1;if(t==null)r.re=r.im=0;else if(e!==void 0)r.re=t,r.im=e;else switch(typeof t){case"object":if("im"in t&&"re"in t)r.re=t.re,r.im=t.im;else if("abs"in t&&"arg"in t){if(!isFinite(t.abs)&&isFinite(t.arg))return Complex$1.INFINITY;r.re=t.abs*Math.cos(t.arg),r.im=t.abs*Math.sin(t.arg)}else if("r"in t&&"phi"in t){if(!isFinite(t.r)&&isFinite(t.phi))return Complex$1.INFINITY;r.re=t.r*Math.cos(t.phi),r.im=t.r*Math.sin(t.phi)}else t.length===2?(r.re=t[0],r.im=t[1]):parser_exit();break;case"string":r.im=r.re=0;const n=t.replace(/_/g,"").match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g);let a=1,o=0;n===null&&parser_exit();for(let l=0;l<n.length;l++){const u=n[l];u===" "||u==="	"||u===`
`||(u==="+"?a++:u==="-"?o++:u==="i"||u==="I"?(a+o===0&&parser_exit(),n[l+1]!==" "&&!isNaN(n[l+1])?(r.im+=parseFloat((o%2?"-":"")+n[l+1]),l++):r.im+=parseFloat((o%2?"-":"")+"1"),a=o=0):((a+o===0||isNaN(u))&&parser_exit(),n[l+1]==="i"||n[l+1]==="I"?(r.im+=parseFloat((o%2?"-":"")+u),l++):r.re+=parseFloat((o%2?"-":"")+u),a=o=0))}a+o>0&&parser_exit();break;case"number":r.im=0,r.re=t;break;default:parser_exit()}return isNaN(r.re)||isNaN(r.im),r};function Complex$1(t,e){if(!(this instanceof Complex$1))return new Complex$1(t,e);const r=parse$1(t,e);this.re=r.re,this.im=r.im}Complex$1.prototype={re:0,im:0,sign:function(){const t=hypot(this.re,this.im);return new Complex$1(this.re/t,this.im/t)},add:function(t,e){const r=parse$1(t,e),n=this.isInfinite(),a=!(isFinite(r.re)&&isFinite(r.im));return n||a?n&&a?Complex$1.NAN:Complex$1.INFINITY:new Complex$1(this.re+r.re,this.im+r.im)},sub:function(t,e){const r=parse$1(t,e),n=this.isInfinite(),a=!(isFinite(r.re)&&isFinite(r.im));return n||a?n&&a?Complex$1.NAN:Complex$1.INFINITY:new Complex$1(this.re-r.re,this.im-r.im)},mul:function(t,e){const r=parse$1(t,e),n=this.isInfinite(),a=!(isFinite(r.re)&&isFinite(r.im)),o=this.re===0&&this.im===0,l=r.re===0&&r.im===0;return n&&l||a&&o?Complex$1.NAN:n||a?Complex$1.INFINITY:r.im===0&&this.im===0?new Complex$1(this.re*r.re,0):new Complex$1(this.re*r.re-this.im*r.im,this.re*r.im+this.im*r.re)},div:function(t,e){const r=parse$1(t,e),n=this.isInfinite(),a=!(isFinite(r.re)&&isFinite(r.im)),o=this.re===0&&this.im===0,l=r.re===0&&r.im===0;if(o&&l||n&&a)return Complex$1.NAN;if(l||n)return Complex$1.INFINITY;if(o||a)return Complex$1.ZERO;if(r.im===0)return new Complex$1(this.re/r.re,this.im/r.re);if(Math.abs(r.re)<Math.abs(r.im)){const u=r.re/r.im,c=r.re*u+r.im;return new Complex$1((this.re*u+this.im)/c,(this.im*u-this.re)/c)}else{const u=r.im/r.re,c=r.im*u+r.re;return new Complex$1((this.re+this.im*u)/c,(this.im-this.re*u)/c)}},pow:function(t,e){const r=parse$1(t,e),n=this.re===0&&this.im===0;if(r.re===0&&r.im===0)return Complex$1.ONE;if(r.im===0){if(this.im===0&&this.re>0)return new Complex$1(Math.pow(this.re,r.re),0);if(this.re===0)switch((r.re%4+4)%4){case 0:return new Complex$1(Math.pow(this.im,r.re),0);case 1:return new Complex$1(0,Math.pow(this.im,r.re));case 2:return new Complex$1(-Math.pow(this.im,r.re),0);case 3:return new Complex$1(0,-Math.pow(this.im,r.re))}}if(n&&r.re>0)return Complex$1.ZERO;const o=Math.atan2(this.im,this.re),l=logHypot(this.re,this.im);let u=Math.exp(r.re*l-r.im*o),c=r.im*l+r.re*o;return new Complex$1(u*Math.cos(c),u*Math.sin(c))},sqrt:function(){const t=this.re,e=this.im;if(e===0)return t>=0?new Complex$1(Math.sqrt(t),0):new Complex$1(0,Math.sqrt(-t));const r=hypot(t,e);let n=Math.sqrt(.5*(r+Math.abs(t))),a=Math.abs(e)/(2*n);return t>=0?new Complex$1(n,e<0?-a:a):new Complex$1(a,e<0?-n:n)},exp:function(){const t=Math.exp(this.re);return this.im===0?new Complex$1(t,0):new Complex$1(t*Math.cos(this.im),t*Math.sin(this.im))},expm1:function(){const t=this.re,e=this.im;return new Complex$1(Math.expm1(t)*Math.cos(e)+cosm1(e),Math.exp(t)*Math.sin(e))},log:function(){const t=this.re,e=this.im;return e===0&&t>0?new Complex$1(Math.log(t),0):new Complex$1(logHypot(t,e),Math.atan2(e,t))},abs:function(){return hypot(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){const t=this.re,e=this.im;return new Complex$1(Math.sin(t)*cosh(e),Math.cos(t)*sinh(e))},cos:function(){const t=this.re,e=this.im;return new Complex$1(Math.cos(t)*cosh(e),-Math.sin(t)*sinh(e))},tan:function(){const t=2*this.re,e=2*this.im,r=Math.cos(t)+cosh(e);return new Complex$1(Math.sin(t)/r,sinh(e)/r)},cot:function(){const t=2*this.re,e=2*this.im,r=Math.cos(t)-cosh(e);return new Complex$1(-Math.sin(t)/r,sinh(e)/r)},sec:function(){const t=this.re,e=this.im,r=.5*cosh(2*e)+.5*Math.cos(2*t);return new Complex$1(Math.cos(t)*cosh(e)/r,Math.sin(t)*sinh(e)/r)},csc:function(){const t=this.re,e=this.im,r=.5*cosh(2*e)-.5*Math.cos(2*t);return new Complex$1(Math.sin(t)*cosh(e)/r,-Math.cos(t)*sinh(e)/r)},asin:function(){const t=this.re,e=this.im,r=new Complex$1(e*e-t*t+1,-2*t*e).sqrt(),n=new Complex$1(r.re-e,r.im+t).log();return new Complex$1(n.im,-n.re)},acos:function(){const t=this.re,e=this.im,r=new Complex$1(e*e-t*t+1,-2*t*e).sqrt(),n=new Complex$1(r.re-e,r.im+t).log();return new Complex$1(Math.PI/2-n.im,n.re)},atan:function(){const t=this.re,e=this.im;if(t===0){if(e===1)return new Complex$1(0,1/0);if(e===-1)return new Complex$1(0,-1/0)}const r=t*t+(1-e)*(1-e),n=new Complex$1((1-e*e-t*t)/r,-2*t/r).log();return new Complex$1(-.5*n.im,.5*n.re)},acot:function(){const t=this.re,e=this.im;if(e===0)return new Complex$1(Math.atan2(1,t),0);const r=t*t+e*e;return r!==0?new Complex$1(t/r,-e/r).atan():new Complex$1(t!==0?t/0:0,e!==0?-e/0:0).atan()},asec:function(){const t=this.re,e=this.im;if(t===0&&e===0)return new Complex$1(0,1/0);const r=t*t+e*e;return r!==0?new Complex$1(t/r,-e/r).acos():new Complex$1(t!==0?t/0:0,e!==0?-e/0:0).acos()},acsc:function(){const t=this.re,e=this.im;if(t===0&&e===0)return new Complex$1(Math.PI/2,1/0);const r=t*t+e*e;return r!==0?new Complex$1(t/r,-e/r).asin():new Complex$1(t!==0?t/0:0,e!==0?-e/0:0).asin()},sinh:function(){const t=this.re,e=this.im;return new Complex$1(sinh(t)*Math.cos(e),cosh(t)*Math.sin(e))},cosh:function(){const t=this.re,e=this.im;return new Complex$1(cosh(t)*Math.cos(e),sinh(t)*Math.sin(e))},tanh:function(){const t=2*this.re,e=2*this.im,r=cosh(t)+Math.cos(e);return new Complex$1(sinh(t)/r,Math.sin(e)/r)},coth:function(){const t=2*this.re,e=2*this.im,r=cosh(t)-Math.cos(e);return new Complex$1(sinh(t)/r,-Math.sin(e)/r)},csch:function(){const t=this.re,e=this.im,r=Math.cos(2*e)-cosh(2*t);return new Complex$1(-2*sinh(t)*Math.cos(e)/r,2*cosh(t)*Math.sin(e)/r)},sech:function(){const t=this.re,e=this.im,r=Math.cos(2*e)+cosh(2*t);return new Complex$1(2*cosh(t)*Math.cos(e)/r,-2*sinh(t)*Math.sin(e)/r)},asinh:function(){let t=this.im;this.im=-this.re,this.re=t;const e=this.asin();return this.re=-this.im,this.im=t,t=e.re,e.re=-e.im,e.im=t,e},acosh:function(){const t=this.acos();if(t.im<=0){const e=t.re;t.re=-t.im,t.im=e}else{const e=t.im;t.im=-t.re,t.re=e}return t},atanh:function(){const t=this.re,e=this.im,r=t>1&&e===0,n=1-t,a=1+t,o=n*n+e*e,l=o!==0?new Complex$1((a*n-e*e)/o,(e*n+a*e)/o):new Complex$1(t!==-1?t/0:0,e!==0?e/0:0),u=l.re;return l.re=logHypot(l.re,l.im)/2,l.im=Math.atan2(l.im,u)/2,r&&(l.im=-l.im),l},acoth:function(){const t=this.re,e=this.im;if(t===0&&e===0)return new Complex$1(0,Math.PI/2);const r=t*t+e*e;return r!==0?new Complex$1(t/r,-e/r).atanh():new Complex$1(t!==0?t/0:0,e!==0?-e/0:0).atanh()},acsch:function(){const t=this.re,e=this.im;if(e===0)return new Complex$1(t!==0?Math.log(t+Math.sqrt(t*t+1)):1/0,0);const r=t*t+e*e;return r!==0?new Complex$1(t/r,-e/r).asinh():new Complex$1(t!==0?t/0:0,e!==0?-e/0:0).asinh()},asech:function(){const t=this.re,e=this.im;if(this.isZero())return Complex$1.INFINITY;const r=t*t+e*e;return r!==0?new Complex$1(t/r,-e/r).acosh():new Complex$1(t!==0?t/0:0,e!==0?-e/0:0).acosh()},inverse:function(){if(this.isZero())return Complex$1.INFINITY;if(this.isInfinite())return Complex$1.ZERO;const t=this.re,e=this.im,r=t*t+e*e;return new Complex$1(t/r,-e/r)},conjugate:function(){return new Complex$1(this.re,-this.im)},neg:function(){return new Complex$1(-this.re,-this.im)},ceil:function(t){return t=Math.pow(10,t||0),new Complex$1(Math.ceil(this.re*t)/t,Math.ceil(this.im*t)/t)},floor:function(t){return t=Math.pow(10,t||0),new Complex$1(Math.floor(this.re*t)/t,Math.floor(this.im*t)/t)},round:function(t){return t=Math.pow(10,t||0),new Complex$1(Math.round(this.re*t)/t,Math.round(this.im*t)/t)},equals:function(t,e){const r=parse$1(t,e);return Math.abs(r.re-this.re)<=Complex$1.EPSILON&&Math.abs(r.im-this.im)<=Complex$1.EPSILON},clone:function(){return new Complex$1(this.re,this.im)},toString:function(){let t=this.re,e=this.im,r="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(t)<Complex$1.EPSILON&&(t=0),Math.abs(e)<Complex$1.EPSILON&&(e=0),e===0?r+t:(t!==0?(r+=t,r+=" ",e<0?(e=-e,r+="-"):r+="+",r+=" "):e<0&&(e=-e,r+="-"),e!==1&&(r+=e),r+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return this.im===0?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return this.im===0&&this.re===0},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!this.isFinite()}};Complex$1.ZERO=new Complex$1(0,0);Complex$1.ONE=new Complex$1(1,0);Complex$1.I=new Complex$1(0,1);Complex$1.PI=new Complex$1(Math.PI,0);Complex$1.E=new Complex$1(Math.E,0);Complex$1.INFINITY=new Complex$1(1/0,1/0);Complex$1.NAN=new Complex$1(NaN,NaN);Complex$1.EPSILON=1e-15;var name$q="Complex",dependencies$q=[],createComplexClass=factory(name$q,dependencies$q,()=>(Object.defineProperty(Complex$1,"name",{value:"Complex"}),Complex$1.prototype.constructor=Complex$1,Complex$1.prototype.type="Complex",Complex$1.prototype.isComplex=!0,Complex$1.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},Complex$1.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},Complex$1.prototype.format=function(t){var e="",r=this.im,n=this.re,a=format$2(this.re,t),o=format$2(this.im,t),l=isNumber(t)?t:t?t.precision:null;if(l!==null){var u=Math.pow(10,-l);Math.abs(n/r)<u&&(n=0),Math.abs(r/n)<u&&(r=0)}return r===0?e=a:n===0?r===1?e="i":r===-1?e="-i":e=o+"i":r<0?r===-1?e=a+" - i":e=a+" - "+o.substring(1)+"i":r===1?e=a+" + i":e=a+" + "+o+"i",e},Complex$1.fromPolar=function(t){switch(arguments.length){case 1:{var e=arguments[0];if(typeof e=="object")return Complex$1(e);throw new TypeError("Input has to be an object with r and phi keys.")}case 2:{var r=arguments[0],n=arguments[1];if(isNumber(r)){if(isUnit(n)&&n.hasBase("ANGLE")&&(n=n.toNumber("rad")),isNumber(n))return new Complex$1({r,phi:n});throw new TypeError("Phi is not a number nor an angle unit.")}else throw new TypeError("Radius r is not a number.")}default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},Complex$1.prototype.valueOf=Complex$1.prototype.toString,Complex$1.fromJSON=function(t){return new Complex$1(t)},Complex$1.compare=function(t,e){return t.re>e.re?1:t.re<e.re?-1:t.im>e.im?1:t.im<e.im?-1:0},Complex$1),{isClass:!0});typeof BigInt>"u"&&(BigInt=function(t){if(isNaN(t))throw new Error("");return t});const C_ZERO=BigInt(0),C_ONE=BigInt(1),C_TWO=BigInt(2),C_THREE=BigInt(3),C_FIVE=BigInt(5),C_TEN=BigInt(10);BigInt(Number.MAX_SAFE_INTEGER);const MAX_CYCLE_LEN=2e3,P={s:C_ONE,n:C_ZERO,d:C_ONE};function assign(t,e){try{t=BigInt(t)}catch{throw InvalidParameter()}return t*e}function ifloor(t){return typeof t=="bigint"?t:Math.floor(t)}function newFraction(t,e){if(e===C_ZERO)throw DivisionByZero();const r=Object.create(Fraction$1.prototype);r.s=t<C_ZERO?-C_ONE:C_ONE,t=t<C_ZERO?-t:t;const n=gcd(t,e);return r.n=t/n,r.d=e/n,r}const FACTORSTEPS=[C_TWO*C_TWO,C_TWO,C_TWO*C_TWO,C_TWO,C_TWO*C_TWO,C_TWO*C_THREE,C_TWO,C_TWO*C_THREE];function factorize(t){const e=Object.create(null);if(t<=C_ONE)return e[t]=C_ONE,e;const r=n=>{e[n]=(e[n]||C_ZERO)+C_ONE};for(;t%C_TWO===C_ZERO;)r(C_TWO),t/=C_TWO;for(;t%C_THREE===C_ZERO;)r(C_THREE),t/=C_THREE;for(;t%C_FIVE===C_ZERO;)r(C_FIVE),t/=C_FIVE;for(let n=0,a=C_TWO+C_FIVE;a*a<=t;){for(;t%a===C_ZERO;)r(a),t/=a;a+=FACTORSTEPS[n],n=n+1&7}return t>C_ONE&&r(t),e}const parse=function(t,e){let r=C_ZERO,n=C_ONE,a=C_ONE;if(t!=null)if(e!==void 0){if(typeof t=="bigint")r=t;else{if(isNaN(t))throw InvalidParameter();if(t%1!==0)throw NonIntegerParameter();r=BigInt(t)}if(typeof e=="bigint")n=e;else{if(isNaN(e))throw InvalidParameter();if(e%1!==0)throw NonIntegerParameter();n=BigInt(e)}a=r*n}else if(typeof t=="object"){if("d"in t&&"n"in t)r=BigInt(t.n),n=BigInt(t.d),"s"in t&&(r*=BigInt(t.s));else if(0 in t)r=BigInt(t[0]),1 in t&&(n=BigInt(t[1]));else if(typeof t=="bigint")r=t;else throw InvalidParameter();a=r*n}else if(typeof t=="number"){if(isNaN(t))throw InvalidParameter();if(t<0&&(a=-C_ONE,t=-t),t%1===0)r=BigInt(t);else{let o=1,l=0,u=1,c=1,h=1,v=1e7;for(t>=1&&(o=10**Math.floor(1+Math.log10(t)),t/=o);u<=v&&h<=v;){let g=(l+c)/(u+h);if(t===g){u+h<=v?(r=l+c,n=u+h):h>u?(r=c,n=h):(r=l,n=u);break}else t>g?(l+=c,u+=h):(c+=l,h+=u),u>v?(r=c,n=h):(r=l,n=u)}r=BigInt(r)*BigInt(o),n=BigInt(n)}}else if(typeof t=="string"){let o=0,l=C_ZERO,u=C_ZERO,c=C_ZERO,h=C_ONE,v=C_ONE,g=t.replace(/_/g,"").match(/\d+|./g);if(g===null)throw InvalidParameter();if(g[o]==="-"?(a=-C_ONE,o++):g[o]==="+"&&o++,g.length===o+1?u=assign(g[o++],a):g[o+1]==="."||g[o]==="."?(g[o]!=="."&&(l=assign(g[o++],a)),o++,(o+1===g.length||g[o+1]==="("&&g[o+3]===")"||g[o+1]==="'"&&g[o+3]==="'")&&(u=assign(g[o],a),h=C_TEN**BigInt(g[o].length),o++),(g[o]==="("&&g[o+2]===")"||g[o]==="'"&&g[o+2]==="'")&&(c=assign(g[o+1],a),v=C_TEN**BigInt(g[o+1].length)-C_ONE,o+=3)):g[o+1]==="/"||g[o+1]===":"?(u=assign(g[o],a),h=assign(g[o+2],C_ONE),o+=3):g[o+3]==="/"&&g[o+1]===" "&&(l=assign(g[o],a),u=assign(g[o+2],a),h=assign(g[o+4],C_ONE),o+=5),g.length<=o)n=h*v,a=r=c+n*l+v*u;else throw InvalidParameter()}else if(typeof t=="bigint")r=t,a=t,n=C_ONE;else throw InvalidParameter();if(n===C_ZERO)throw DivisionByZero();P.s=a<C_ZERO?-C_ONE:C_ONE,P.n=r<C_ZERO?-r:r,P.d=n<C_ZERO?-n:n};function modpow(t,e,r){let n=C_ONE;for(;e>C_ZERO;t=t*t%r,e>>=C_ONE)e&C_ONE&&(n=n*t%r);return n}function cycleLen(t,e){for(;e%C_TWO===C_ZERO;e/=C_TWO);for(;e%C_FIVE===C_ZERO;e/=C_FIVE);if(e===C_ONE)return C_ZERO;let r=C_TEN%e,n=1;for(;r!==C_ONE;n++)if(r=r*C_TEN%e,n>MAX_CYCLE_LEN)return C_ZERO;return BigInt(n)}function cycleStart(t,e,r){let n=C_ONE,a=modpow(C_TEN,r,e);for(let o=0;o<300;o++){if(n===a)return BigInt(o);n=n*C_TEN%e,a=a*C_TEN%e}return 0}function gcd(t,e){if(!t)return e;if(!e)return t;for(;;){if(t%=e,!t)return e;if(e%=t,!e)return t}}function Fraction$1(t,e){if(parse(t,e),this instanceof Fraction$1)t=gcd(P.d,P.n),this.s=P.s,this.n=P.n/t,this.d=P.d/t;else return newFraction(P.s*P.n,P.d)}const DivisionByZero=function(){return new Error("Division by Zero")},InvalidParameter=function(){return new Error("Invalid argument")},NonIntegerParameter=function(){return new Error("Parameters must be integer")};Fraction$1.prototype={s:C_ONE,n:C_ZERO,d:C_ONE,abs:function(){return newFraction(this.n,this.d)},neg:function(){return newFraction(-this.s*this.n,this.d)},add:function(t,e){return parse(t,e),newFraction(this.s*this.n*P.d+P.s*this.d*P.n,this.d*P.d)},sub:function(t,e){return parse(t,e),newFraction(this.s*this.n*P.d-P.s*this.d*P.n,this.d*P.d)},mul:function(t,e){return parse(t,e),newFraction(this.s*P.s*this.n*P.n,this.d*P.d)},div:function(t,e){return parse(t,e),newFraction(this.s*P.s*this.n*P.d,this.d*P.n)},clone:function(){return newFraction(this.s*this.n,this.d)},mod:function(t,e){if(t===void 0)return newFraction(this.s*this.n%this.d,C_ONE);if(parse(t,e),C_ZERO===P.n*this.d)throw DivisionByZero();return newFraction(this.s*(P.d*this.n)%(P.n*this.d),P.d*this.d)},gcd:function(t,e){return parse(t,e),newFraction(gcd(P.n,this.n)*gcd(P.d,this.d),P.d*this.d)},lcm:function(t,e){return parse(t,e),P.n===C_ZERO&&this.n===C_ZERO?newFraction(C_ZERO,C_ONE):newFraction(P.n*this.n,gcd(P.n,this.n)*gcd(P.d,this.d))},inverse:function(){return newFraction(this.s*this.d,this.n)},pow:function(t,e){if(parse(t,e),P.d===C_ONE)return P.s<C_ZERO?newFraction((this.s*this.d)**P.n,this.n**P.n):newFraction((this.s*this.n)**P.n,this.d**P.n);if(this.s<C_ZERO)return null;let r=factorize(this.n),n=factorize(this.d),a=C_ONE,o=C_ONE;for(let l in r)if(l!=="1"){if(l==="0"){a=C_ZERO;break}if(r[l]*=P.n,r[l]%P.d===C_ZERO)r[l]/=P.d;else return null;a*=BigInt(l)**r[l]}for(let l in n)if(l!=="1"){if(n[l]*=P.n,n[l]%P.d===C_ZERO)n[l]/=P.d;else return null;o*=BigInt(l)**n[l]}return P.s<C_ZERO?newFraction(o,a):newFraction(a,o)},log:function(t,e){if(parse(t,e),this.s<=C_ZERO||P.s<=C_ZERO)return null;const r=Object.create(null),n=factorize(P.n),a=factorize(P.d),o=factorize(this.n),l=factorize(this.d);for(const h in a)n[h]=(n[h]||C_ZERO)-a[h];for(const h in l)o[h]=(o[h]||C_ZERO)-l[h];for(const h in n)h!=="1"&&(r[h]=!0);for(const h in o)h!=="1"&&(r[h]=!0);let u=null,c=null;for(const h in r){const v=n[h]||C_ZERO,g=o[h]||C_ZERO;if(v===C_ZERO){if(g!==C_ZERO)return null;continue}let T=g,R=v;const W=gcd(T,R);if(T/=W,R/=W,u===null&&c===null)u=T,c=R;else if(T*c!==u*R)return null}return u!==null&&c!==null?newFraction(u,c):null},equals:function(t,e){return parse(t,e),this.s*this.n*P.d===P.s*P.n*this.d},lt:function(t,e){return parse(t,e),this.s*this.n*P.d<P.s*P.n*this.d},lte:function(t,e){return parse(t,e),this.s*this.n*P.d<=P.s*P.n*this.d},gt:function(t,e){return parse(t,e),this.s*this.n*P.d>P.s*P.n*this.d},gte:function(t,e){return parse(t,e),this.s*this.n*P.d>=P.s*P.n*this.d},compare:function(t,e){parse(t,e);let r=this.s*this.n*P.d-P.s*P.n*this.d;return(C_ZERO<r)-(r<C_ZERO)},ceil:function(t){return t=C_TEN**BigInt(t||0),newFraction(ifloor(this.s*t*this.n/this.d)+(t*this.n%this.d>C_ZERO&&this.s>=C_ZERO?C_ONE:C_ZERO),t)},floor:function(t){return t=C_TEN**BigInt(t||0),newFraction(ifloor(this.s*t*this.n/this.d)-(t*this.n%this.d>C_ZERO&&this.s<C_ZERO?C_ONE:C_ZERO),t)},round:function(t){return t=C_TEN**BigInt(t||0),newFraction(ifloor(this.s*t*this.n/this.d)+this.s*((this.s>=C_ZERO?C_ONE:C_ZERO)+C_TWO*(t*this.n%this.d)>this.d?C_ONE:C_ZERO),t)},roundTo:function(t,e){parse(t,e);const r=this.n*P.d,n=this.d*P.n,a=r%n;let o=ifloor(r/n);return a+a>=n&&o++,newFraction(this.s*o*P.n,P.d)},divisible:function(t,e){return parse(t,e),P.n===C_ZERO?!1:this.n*P.d%(P.n*this.d)===C_ZERO},valueOf:function(){return Number(this.s*this.n)/Number(this.d)},toString:function(t=15){let e=this.n,r=this.d,n=cycleLen(e,r),a=cycleStart(e,r,n),o=this.s<C_ZERO?"-":"";if(o+=ifloor(e/r),e%=r,e*=C_TEN,e&&(o+="."),n){for(let l=a;l--;)o+=ifloor(e/r),e%=r,e*=C_TEN;o+="(";for(let l=n;l--;)o+=ifloor(e/r),e%=r,e*=C_TEN;o+=")"}else for(let l=t;e&&l--;)o+=ifloor(e/r),e%=r,e*=C_TEN;return o},toFraction:function(t=!1){let e=this.n,r=this.d,n=this.s<C_ZERO?"-":"";if(r===C_ONE)n+=e;else{const a=ifloor(e/r);t&&a>C_ZERO&&(n+=a,n+=" ",e%=r),n+=e,n+="/",n+=r}return n},toLatex:function(t=!1){let e=this.n,r=this.d,n=this.s<C_ZERO?"-":"";if(r===C_ONE)n+=e;else{const a=ifloor(e/r);t&&a>C_ZERO&&(n+=a,e%=r),n+="\\frac{",n+=e,n+="}{",n+=r,n+="}"}return n},toContinued:function(){let t=this.n,e=this.d;const r=[];for(;e;){r.push(ifloor(t/e));const n=t%e;t=e,e=n}return r},simplify:function(t=.001){const e=BigInt(Math.ceil(1/t)),r=this.abs(),n=r.toContinued();for(let a=1;a<n.length;a++){let o=newFraction(n[a-1],C_ONE);for(let u=a-2;u>=0;u--)o=o.inverse().add(n[u]);let l=o.sub(r);if(l.n*e<l.d)return o.mul(this.s)}return this}};var name$p="Fraction",dependencies$p=[],createFractionClass=factory(name$p,dependencies$p,()=>(Object.defineProperty(Fraction$1,"name",{value:"Fraction"}),Fraction$1.prototype.constructor=Fraction$1,Fraction$1.prototype.type="Fraction",Fraction$1.prototype.isFraction=!0,Fraction$1.prototype.toJSON=function(){return{mathjs:"Fraction",n:String(this.s*this.n),d:String(this.d)}},Fraction$1.fromJSON=function(t){return new Fraction$1(t)},Fraction$1),{isClass:!0}),name$o="Matrix",dependencies$o=[],createMatrixClass=factory(name$o,dependencies$o,()=>{function t(){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator")}return t.prototype.type="Matrix",t.prototype.isMatrix=!0,t.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},t.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},t.prototype.create=function(e,r){throw new Error("Cannot invoke create on a Matrix interface")},t.prototype.subset=function(e,r,n){throw new Error("Cannot invoke subset on a Matrix interface")},t.prototype.get=function(e){throw new Error("Cannot invoke get on a Matrix interface")},t.prototype.set=function(e,r,n){throw new Error("Cannot invoke set on a Matrix interface")},t.prototype.resize=function(e,r){throw new Error("Cannot invoke resize on a Matrix interface")},t.prototype.reshape=function(e,r){throw new Error("Cannot invoke reshape on a Matrix interface")},t.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},t.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},t.prototype.map=function(e,r){throw new Error("Cannot invoke map on a Matrix interface")},t.prototype.forEach=function(e){throw new Error("Cannot invoke forEach on a Matrix interface")},t.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},t.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},t.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},t.prototype.format=function(e){throw new Error("Cannot invoke format on a Matrix interface")},t.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},t},{isClass:!0});function formatBigNumberToBase(t,e,r){var n=t.constructor,a=new n(2),o="";if(r){if(r<1)throw new Error("size must be in greater than 0");if(!isInteger(r))throw new Error("size must be an integer");if(t.greaterThan(a.pow(r-1).sub(1))||t.lessThan(a.pow(r-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(r-1,", 2^").concat(r-1,"-1]"));if(!t.isInteger())throw new Error("Value must be an integer");t.lessThan(0)&&(t=t.add(a.pow(r))),o="i".concat(r)}switch(e){case 2:return"".concat(t.toBinary()).concat(o);case 8:return"".concat(t.toOctal()).concat(o);case 16:return"".concat(t.toHexadecimal()).concat(o);default:throw new Error("Base ".concat(e," not supported "))}}function format$1(t,e){if(typeof e=="function")return e(t);if(!t.isFinite())return t.isNaN()?"NaN":t.gt(0)?"Infinity":"-Infinity";var{notation:r,precision:n,wordSize:a}=normalizeFormatOptions(e);switch(r){case"fixed":return toFixed(t,n);case"exponential":return toExponential(t,n);case"engineering":return toEngineering(t,n);case"bin":return formatBigNumberToBase(t,2,a);case"oct":return formatBigNumberToBase(t,8,a);case"hex":return formatBigNumberToBase(t,16,a);case"auto":{var o=_toNumberOrDefault(e?.lowerExp,-3),l=_toNumberOrDefault(e?.upperExp,5);if(t.isZero())return"0";var u,c=t.toSignificantDigits(n),h=c.e;return h>=o&&h<l?u=c.toFixed():u=toExponential(t,n),u.replace(/((\.\d*?)(0+))($|e)/,function(){var v=arguments[2],g=arguments[4];return v!=="."?v+g:g})}default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function toEngineering(t,e){var r=t.e,n=r%3===0?r:r<0?r-3-r%3:r-r%3,a=t.mul(Math.pow(10,-n)),o=a.toPrecision(e);if(o.includes("e")){var l=t.constructor;o=new l(o).toFixed()}return o+"e"+(r>=0?"+":"")+n.toString()}function toExponential(t,e){return e!==void 0?t.toExponential(e-1):t.toExponential()}function toFixed(t,e){return t.toFixed(e)}function _toNumberOrDefault(t,e){return isNumber(t)?t:isBigNumber(t)?t.toNumber():e}function format(t,e){var r=_format(t,e);return e&&typeof e=="object"&&"truncate"in e&&r.length>e.truncate?r.substring(0,e.truncate-3)+"...":r}function _format(t,e){if(typeof t=="number")return format$2(t,e);if(isBigNumber(t))return format$1(t,e);if(looksLikeFraction(t))return!e||e.fraction!=="decimal"?"".concat(t.s*t.n,"/").concat(t.d):t.toString();if(Array.isArray(t))return formatArray(t,e);if(isString(t))return stringify(t);if(typeof t=="function")return t.syntax?String(t.syntax):"function";if(t&&typeof t=="object"){if(typeof t.format=="function")return t.format(e);if(t&&t.toString(e)!=={}.toString())return t.toString(e);var r=Object.keys(t).map(n=>stringify(n)+": "+format(t[n],e));return"{"+r.join(", ")+"}"}return String(t)}function stringify(t){for(var e=String(t),r="",n=0;n<e.length;){var a=e.charAt(n);r+=a in controlCharacters?controlCharacters[a]:a,n++}return'"'+r+'"'}var controlCharacters={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"};function formatArray(t,e){if(Array.isArray(t)){for(var r="[",n=t.length,a=0;a<n;a++)a!==0&&(r+=", "),r+=formatArray(t[a],e);return r+="]",r}else return format(t,e)}function looksLikeFraction(t){return t&&typeof t=="object"&&typeof t.s=="bigint"&&typeof t.n=="bigint"&&typeof t.d=="bigint"||!1}function DimensionError(t,e,r){if(!(this instanceof DimensionError))throw new SyntaxError("Constructor must be called with the new operator");this.actual=t,this.expected=e,this.relation=r,this.message="Dimension mismatch ("+(Array.isArray(t)?"["+t.join(", ")+"]":t)+" "+(this.relation||"!=")+" "+(Array.isArray(e)?"["+e.join(", ")+"]":e)+")",this.stack=new Error().stack}DimensionError.prototype=new RangeError;DimensionError.prototype.constructor=RangeError;DimensionError.prototype.name="DimensionError";DimensionError.prototype.isDimensionError=!0;function IndexError(t,e,r){if(!(this instanceof IndexError))throw new SyntaxError("Constructor must be called with the new operator");this.index=t,arguments.length<3?(this.min=0,this.max=e):(this.min=e,this.max=r),this.min!==void 0&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":this.max!==void 0&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=new Error().stack}IndexError.prototype=new RangeError;IndexError.prototype.constructor=RangeError;IndexError.prototype.name="IndexError";IndexError.prototype.isIndexError=!0;function arraySize(t){for(var e=[];Array.isArray(t);)e.push(t.length),t=t[0];return e}function _validate(t,e,r){var n,a=t.length;if(a!==e[r])throw new DimensionError(a,e[r]);if(r<e.length-1){var o=r+1;for(n=0;n<a;n++){var l=t[n];if(!Array.isArray(l))throw new DimensionError(e.length-1,e.length,"<");_validate(t[n],e,o)}}else for(n=0;n<a;n++)if(Array.isArray(t[n]))throw new DimensionError(e.length+1,e.length,">")}function validate(t,e){var r=e.length===0;if(r){if(Array.isArray(t))throw new DimensionError(t.length,0)}else _validate(t,e,0)}function validateIndex(t,e){if(t!==void 0){if(!isNumber(t)||!isInteger(t))throw new TypeError("Index must be an integer (value: "+t+")");if(t<0||typeof e=="number"&&t>=e)throw new IndexError(t,e)}}function resize(t,e,r){if(!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new Error("Resizing to scalar is not supported");e.forEach(function(a){if(!isNumber(a)||!isInteger(a)||a<0)throw new TypeError("Invalid size, must contain positive integers (size: "+format(e)+")")}),(isNumber(t)||isBigNumber(t))&&(t=[t]);var n=r!==void 0?r:0;return _resize(t,e,0,n),t}function _resize(t,e,r,n){var a,o,l=t.length,u=e[r],c=Math.min(l,u);if(t.length=u,r<e.length-1){var h=r+1;for(a=0;a<c;a++)o=t[a],Array.isArray(o)||(o=[o],t[a]=o),_resize(o,e,h,n);for(a=c;a<u;a++)o=[],t[a]=o,_resize(o,e,h,n)}else{for(a=0;a<c;a++)for(;Array.isArray(t[a]);)t[a]=t[a][0];for(a=c;a<u;a++)t[a]=n}}function reshape(t,e){var r=flatten(t,!0),n=r.length;if(!Array.isArray(t)||!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new DimensionError(0,n,"!=");e=processSizesWildcard(e,n);var a=product(e);if(n!==a)throw new DimensionError(a,n,"!=");try{return _reshape(r,e)}catch(o){throw o instanceof DimensionError?new DimensionError(a,n,"!="):o}}function processSizesWildcard(t,e){var r=product(t),n=t.slice(),a=-1,o=t.indexOf(a),l=t.indexOf(a,o+1)>=0;if(l)throw new Error("More than one wildcard in sizes");var u=o>=0,c=e%r===0;if(u)if(c)n[o]=-e/r;else throw new Error("Could not replace wildcard, since "+e+" is no multiple of "+-r);return n}function product(t){return t.reduce((e,r)=>e*r,1)}function _reshape(t,e){for(var r=t,n,a=e.length-1;a>0;a--){var o=e[a];n=[];for(var l=r.length/o,u=0;u<l;u++)n.push(r.slice(u*o,(u+1)*o));r=n}return r}function unsqueeze(t,e,r,n){var a=n||arraySize(t);if(r)for(var o=0;o<r;o++)t=[t],a.unshift(1);for(t=_unsqueeze(t,e,0);a.length<e;)a.push(1);return t}function _unsqueeze(t,e,r){var n,a;if(Array.isArray(t)){var o=r+1;for(n=0,a=t.length;n<a;n++)t[n]=_unsqueeze(t[n],e,o)}else for(var l=r;l<e;l++)t=[t];return t}function flatten(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!Array.isArray(t))return t;if(typeof e!="boolean")throw new TypeError("Boolean expected for second argument of flatten");var r=[];return e?a(t):n(t),r;function n(o){for(var l=0;l<o.length;l++){var u=o[l];Array.isArray(u)?n(u):r.push(u)}}function a(o){if(Array.isArray(o[0]))for(var l=0;l<o.length;l++)a(o[l]);else for(var u=0;u<o.length;u++)r.push(o[u])}}function getArrayDataType(t,e){for(var r,n=0,a=0;a<t.length;a++){var o=t[a],l=Array.isArray(o);if(a===0&&l&&(n=o.length),l&&o.length!==n)return;var u=l?getArrayDataType(o,e):e(o);if(r===void 0)r=u;else if(r!==u)return"mixed"}return r}function concatRecursive(t,e,r,n){if(n<r){if(t.length!==e.length)throw new DimensionError(t.length,e.length);for(var a=[],o=0;o<t.length;o++)a[o]=concatRecursive(t[o],e[o],r,n+1);return a}else return t.concat(e)}function concat(){var t=Array.prototype.slice.call(arguments,0,-1),e=Array.prototype.slice.call(arguments,-1);if(t.length===1)return t[0];if(t.length>1)return t.slice(1).reduce(function(r,n){return concatRecursive(r,n,e,0)},t[0]);throw new Error("Wrong number of arguments in function concat")}function broadcastSizes(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];for(var n=e.map(T=>T.length),a=Math.max(...n),o=new Array(a).fill(null),l=0;l<e.length;l++)for(var u=e[l],c=n[l],h=0;h<c;h++){var v=a-c+h;u[h]>o[v]&&(o[v]=u[h])}for(var g=0;g<e.length;g++)checkBroadcastingRules(e[g],o);return o}function checkBroadcastingRules(t,e){for(var r=e.length,n=t.length,a=0;a<n;a++){var o=r-n+a;if(t[a]<e[o]&&t[a]>1||t[a]>e[o])throw new Error("shape mismatch: mismatch is found in arg with shape (".concat(t,") not possible to broadcast dimension ").concat(n," with size ").concat(t[a]," to size ").concat(e[o]))}}function broadcastTo(t,e){var r=arraySize(t);if(deepStrictEqual(r,e))return t;checkBroadcastingRules(r,e);var n=broadcastSizes(r,e),a=n.length,o=[...Array(a-r.length).fill(1),...r],l=clone(t);r.length<a&&(l=reshape(l,o),r=arraySize(l));for(var u=0;u<a;u++)r[u]<n[u]&&(l=stretch(l,n[u],u),r=arraySize(l));return l}function stretch(t,e,r){return concat(...Array(e).fill(t),r)}function get(t,e){if(!Array.isArray(t))throw new Error("Array expected");var r=arraySize(t);if(e.length!==r.length)throw new DimensionError(e.length,r.length);for(var n=0;n<e.length;n++)validateIndex(e[n],r[n]);return e.reduce((a,o)=>a[o],t)}function deepMap$1(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(t.length===0)return[];if(r)return o(t);var n=[];return a(t,0);function a(l,u){if(Array.isArray(l)){for(var c=l.length,h=Array(c),v=0;v<c;v++)n[u]=v,h[v]=a(l[v],u+1);return h}else return e(l,n.slice(0,u),t)}function o(l){if(Array.isArray(l)){for(var u=l.length,c=Array(u),h=0;h<u;h++)c[h]=o(l[h]);return c}else return e(l)}}function clone(t){return _extends([],t)}function optimizeCallback(t,e,r,n){if(typedFunction.isTypedFunction(t)){var a;if(n)a=1;else{var o=e.isMatrix?e.size():arraySize(e),l=o.length?o[o.length-1]===0:!0;if(l)return{isUnary:n,fn:t};var u=o.map(()=>0),c=e.isMatrix?e.get(u):get(e,u);a=_findNumberOfArgumentsTyped(t,c,u,e)}var h;if(e.isMatrix&&e.dataType!=="mixed"&&e.dataType!==void 0){var v=_findSingleSignatureWithArity(t,a);h=v!==void 0?v:t}else h=t;return a>=1&&a<=3?{isUnary:a===1,fn:function(){for(var T=arguments.length,R=new Array(T),W=0;W<T;W++)R[W]=arguments[W];return _tryFunctionWithArgs(h,R.slice(0,a),r,t.name)}}:{isUnary:!1,fn:function(){for(var T=arguments.length,R=new Array(T),W=0;W<T;W++)R[W]=arguments[W];return _tryFunctionWithArgs(h,R,r,t.name)}}}return n===void 0?{isUnary:_findIfCallbackIsUnary(t),fn:t}:{isUnary:n,fn:t}}function _findSingleSignatureWithArity(t,e){var r=[];if(Object.entries(t.signatures).forEach(n=>{var[a,o]=n;a.split(",").length===e&&r.push(o)}),r.length===1)return r[0]}function _findIfCallbackIsUnary(t){if(t.length!==1)return!1;var e=t.toString();if(/arguments/.test(e))return!1;var r=e.match(/\(.*?\)/);return!/\.\.\./.test(r)}function _findNumberOfArgumentsTyped(t,e,r,n){for(var a=[e,r,n],o=3;o>0;o--){var l=a.slice(0,o);if(typedFunction.resolve(t,l)!==null)return o}}function _tryFunctionWithArgs(t,e,r,n){try{return t(...e)}catch(a){_createCallbackError(a,e,r,n)}}function _createCallbackError(t,e,r,n){var a;if(t instanceof TypeError&&((a=t.data)===null||a===void 0?void 0:a.category)==="wrongType"){var o=[];throw o.push("value: ".concat(typeOf(e[0]))),e.length>=2&&o.push("index: ".concat(typeOf(e[1]))),e.length>=3&&o.push("array: ".concat(typeOf(e[2]))),new TypeError("Function ".concat(r," cannot apply callback arguments ")+"".concat(n,"(").concat(o.join(", "),") at index ").concat(JSON.stringify(e[1])))}else throw new TypeError("Function ".concat(r," cannot apply callback arguments ")+"to function ".concat(n,": ").concat(t.message))}var name$n="DenseMatrix",dependencies$n=["Matrix","config"],createDenseMatrixClass=factory(name$n,dependencies$n,t=>{var{Matrix:e,config:r}=t;function n(g,T){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(T&&!isString(T))throw new Error("Invalid datatype: "+T);if(isMatrix(g))g.type==="DenseMatrix"?(this._data=clone$2(g._data),this._size=clone$2(g._size),this._datatype=T||g._datatype):(this._data=g.toArray(),this._size=g.size(),this._datatype=T||g._datatype);else if(g&&isArray(g.data)&&isArray(g.size))this._data=g.data,this._size=g.size,validate(this._data,this._size),this._datatype=T||g.datatype;else if(isArray(g))this._data=v(g),this._size=arraySize(this._data),validate(this._data,this._size),this._datatype=T;else{if(g)throw new TypeError("Unsupported type of data ("+typeOf(g)+")");this._data=[],this._size=[0],this._datatype=T}}n.prototype=new e,n.prototype.createDenseMatrix=function(g,T){return new n(g,T)},Object.defineProperty(n,"name",{value:"DenseMatrix"}),n.prototype.constructor=n,n.prototype.type="DenseMatrix",n.prototype.isDenseMatrix=!0,n.prototype.getDataType=function(){return getArrayDataType(this._data,typeOf)},n.prototype.storage=function(){return"dense"},n.prototype.datatype=function(){return this._datatype},n.prototype.create=function(g,T){return new n(g,T)},n.prototype.subset=function(g,T,R){switch(arguments.length){case 1:return a(this,g);case 2:case 3:return l(this,g,T,R);default:throw new SyntaxError("Wrong number of arguments")}},n.prototype.get=function(g){return get(this._data,g)},n.prototype.set=function(g,T,R){if(!isArray(g))throw new TypeError("Array expected");if(g.length<this._size.length)throw new DimensionError(g.length,this._size.length,"<");var W,k,J,q=g.map(function(V){return V+1});h(this,q,R);var Se=this._data;for(W=0,k=g.length-1;W<k;W++)J=g[W],validateIndex(J,Se.length),Se=Se[J];return J=g[g.length-1],validateIndex(J,Se.length),Se[J]=T,this};function a(g,T){if(!isIndex(T))throw new TypeError("Invalid index");var R=r.legacySubset?T.size().every(ie=>ie===1):T.isScalar();if(R)return g.get(T.min());var W=T.size();if(W.length!==g._size.length)throw new DimensionError(W.length,g._size.length);for(var k=T.min(),J=T.max(),q=0,Se=g._size.length;q<Se;q++)validateIndex(k[q],g._size[q]),validateIndex(J[q],g._size[q]);var V=new n,Y=o(g._data,T);return V._size=Y.size,V._datatype=g._datatype,V._data=Y.data,r.legacySubset?V.reshape(T.size()):V}function o(g,T){var R=T.size().length-1,W=Array(R);return{data:k(g),size:W.filter(J=>J!==null)};function k(J){var q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,Se=T.dimension(q);function V(Y,ie){return isNumber(Y)?ie(Y):Y.map(ie).valueOf()}return isNumber(Se)?W[q]=null:W[q]=Se.size()[0],q<R?V(Se,Y=>(validateIndex(Y,J.length),k(J[Y],q+1))):V(Se,Y=>(validateIndex(Y,J.length),J[Y]))}}function l(g,T,R,W){if(!T||T.isIndex!==!0)throw new TypeError("Invalid index");var k=T.size(),J=T.isScalar(),q;if(isMatrix(R)?(q=R.size(),R=R.valueOf()):q=arraySize(R),J){if(q.length!==0)throw new TypeError("Scalar expected");g.set(T.min(),R,W)}else{if(!deepStrictEqual(q,k)){if(q.length===0)R=broadcastTo([R],k);else try{R=broadcastTo(R,k)}catch{}q=arraySize(R)}if(k.length<g._size.length)throw new DimensionError(k.length,g._size.length,"<");if(q.length<k.length){for(var Se=0,V=0;k[Se]===1&&q[Se]===1;)Se++;for(;k[Se]===1;)V++,Se++;R=unsqueeze(R,k.length,V,q)}if(!deepStrictEqual(k,q))throw new DimensionError(k,q,">");var Y=T.max().map(function(ie){return ie+1});h(g,Y,W),u(g._data,T,R)}return g}function u(g,T,R){var W=T.size().length-1;k(g,R);function k(J,q){var Se=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,V=T.dimension(Se),Y=(se,ct)=>{validateIndex(se,J.length),k(J[se],q[ct[0]],Se+1)},ie=(se,ct)=>{validateIndex(se,J.length),J[se]=q[ct[0]]};Se<W?isNumber(V)?Y(V,[0]):V.forEach(Y):isNumber(V)?ie(V,[0]):V.forEach(ie)}}n.prototype.resize=function(g,T,R){if(!isCollection(g))throw new TypeError("Array or Matrix expected");var W=g.valueOf().map(J=>Array.isArray(J)&&J.length===1?J[0]:J),k=R?this.clone():this;return c(k,W,T)};function c(g,T,R){if(T.length===0){for(var W=g._data;isArray(W);)W=W[0];return W}return g._size=T.slice(0),g._data=resize(g._data,g._size,R),g}n.prototype.reshape=function(g,T){var R=T?this.clone():this;R._data=reshape(R._data,g);var W=R._size.reduce((k,J)=>k*J);return R._size=processSizesWildcard(g,W),R};function h(g,T,R){for(var W=g._size.slice(0),k=!1;W.length<T.length;)W.push(0),k=!0;for(var J=0,q=T.length;J<q;J++)T[J]>W[J]&&(W[J]=T[J],k=!0);k&&c(g,W,R)}n.prototype.clone=function(){var g=new n({data:clone$2(this._data),size:clone$2(this._size),datatype:this._datatype});return g},n.prototype.size=function(){return this._size.slice(0)},n.prototype.map=function(g){var T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,R=this,W=R._size.length-1;if(W<0)return R.clone();var k=optimizeCallback(g,R,"map",T),J=k.fn,q=R.create(void 0,R._datatype);if(q._size=R._size,T||k.isUnary)return q._data=ct(R._data),q;if(W===0){for(var Se=R.valueOf(),V=Array(Se.length),Y=0;Y<Se.length;Y++)V[Y]=J(Se[Y],[Y],R);return q._data=V,q}var ie=[];return q._data=se(R._data),q;function se(ae){var st=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,Ct=Array(ae.length);if(st<W)for(var $t=0;$t<ae.length;$t++)ie[st]=$t,Ct[$t]=se(ae[$t],st+1);else for(var jo=0;jo<ae.length;jo++)ie[st]=jo,Ct[jo]=J(ae[jo],ie.slice(),R);return Ct}function ct(ae){var st=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,Ct=Array(ae.length);if(st<W)for(var $t=0;$t<ae.length;$t++)Ct[$t]=ct(ae[$t],st+1);else for(var jo=0;jo<ae.length;jo++)Ct[jo]=J(ae[jo]);return Ct}},n.prototype.forEach=function(g){var T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,R=this,W=R._size.length-1;if(W<0)return;var k=optimizeCallback(g,R,"map",T),J=k.fn;if(T||k.isUnary){Y(R._data);return}if(W===0){for(var q=0;q<R._data.length;q++)J(R._data[q],[q],R);return}var Se=[];V(R._data);function V(ie){var se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(se<W)for(var ct=0;ct<ie.length;ct++)Se[se]=ct,V(ie[ct],se+1);else for(var ae=0;ae<ie.length;ae++)Se[se]=ae,J(ie[ae],Se.slice(),R)}function Y(ie){var se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(se<W)for(var ct=0;ct<ie.length;ct++)Y(ie[ct],se+1);else for(var ae=0;ae<ie.length;ae++)J(ie[ae])}},n.prototype[Symbol.iterator]=function*(){var g=this._size.length-1;if(!(g<0)){if(g===0){for(var T=0;T<this._data.length;T++)yield{value:this._data[T],index:[T]};return}for(var R=Array(g+1).fill(0),W=this._size.reduce((V,Y)=>V*Y,1),k=0;k<W;k++){for(var J=this._data,q=0;q<g;q++)J=J[R[q]];yield{value:J[R[g]],index:R.slice()};for(var Se=g;Se>=0&&(R[Se]++,!(R[Se]<this._size[Se]));Se--)R[Se]=0}}},n.prototype.rows=function(){var g=[],T=this.size();if(T.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");var R=this._data;for(var W of R)g.push(new n([W],this._datatype));return g},n.prototype.columns=function(){var g=this,T=[],R=this.size();if(R.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var W=this._data,k=function(Se){var V=W.map(Y=>[Y[Se]]);T.push(new n(V,g._datatype))},J=0;J<R[1];J++)k(J);return T},n.prototype.toArray=function(){return clone$2(this._data)},n.prototype.valueOf=function(){return this._data},n.prototype.format=function(g){return format(this._data,g)},n.prototype.toString=function(){return format(this._data)},n.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},n.prototype.diagonal=function(g){if(g){if(isBigNumber(g)&&(g=g.toNumber()),!isNumber(g)||!isInteger(g))throw new TypeError("The parameter k must be an integer number")}else g=0;for(var T=g>0?g:0,R=g<0?-g:0,W=this._size[0],k=this._size[1],J=Math.min(W-R,k-T),q=[],Se=0;Se<J;Se++)q[Se]=this._data[Se+R][Se+T];return new n({data:q,size:[J],datatype:this._datatype})},n.diagonal=function(g,T,R,W){if(!isArray(g))throw new TypeError("Array expected, size parameter");if(g.length!==2)throw new Error("Only two dimensions matrix are supported");if(g=g.map(function(ae){if(isBigNumber(ae)&&(ae=ae.toNumber()),!isNumber(ae)||!isInteger(ae)||ae<1)throw new Error("Size values must be positive integers");return ae}),R){if(isBigNumber(R)&&(R=R.toNumber()),!isNumber(R)||!isInteger(R))throw new TypeError("The parameter k must be an integer number")}else R=0;var k=R>0?R:0,J=R<0?-R:0,q=g[0],Se=g[1],V=Math.min(q-J,Se-k),Y;if(isArray(T)){if(T.length!==V)throw new Error("Invalid value array length");Y=function(st){return T[st]}}else if(isMatrix(T)){var ie=T.size();if(ie.length!==1||ie[0]!==V)throw new Error("Invalid matrix length");Y=function(st){return T.get([st])}}else Y=function(){return T};W||(W=isBigNumber(Y(0))?Y(0).mul(0):0);var se=[];if(g.length>0){se=resize(se,g,W);for(var ct=0;ct<V;ct++)se[ct+J][ct+k]=Y(ct)}return new n({data:se,size:[q,Se]})},n.fromJSON=function(g){return new n(g)},n.prototype.swapRows=function(g,T){if(!isNumber(g)||!isInteger(g)||!isNumber(T)||!isInteger(T))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return validateIndex(g,this._size[0]),validateIndex(T,this._size[0]),n._swapRows(g,T,this._data),this},n._swapRows=function(g,T,R){var W=R[g];R[g]=R[T],R[T]=W};function v(g){return isMatrix(g)?v(g.valueOf()):isArray(g)?g.map(v):g}return n},{isClass:!0});function deepMap(t,e,r){if(!r)return isMatrix(t)?t.map(a=>e(a),!1,!0):deepMap$1(t,e,!0);var n=a=>a===0?a:e(a);return isMatrix(t)?t.map(a=>n(a),!1,!0):deepMap$1(t,n,!0)}var n1="number",n2="number, number";function absNumber(t){return Math.abs(t)}absNumber.signature=n1;function addNumber(t,e){return t+e}addNumber.signature=n2;function subtractNumber(t,e){return t-e}subtractNumber.signature=n2;function multiplyNumber(t,e){return t*e}multiplyNumber.signature=n2;function unaryMinusNumber(t){return-t}unaryMinusNumber.signature=n1;function nearlyEqual(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e-9,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(r<=0)throw new Error("Relative tolerance must be greater than 0");if(n<0)throw new Error("Absolute tolerance must be at least 0");return t.isNaN()||e.isNaN()?!1:!t.isFinite()||!e.isFinite()?t.eq(e):t.eq(e)?!0:t.minus(e).abs().lte(t.constructor.max(t.constructor.max(t.abs(),e.abs()).mul(r),n))}var name$m="isZero",dependencies$m=["typed","equalScalar"],createIsZero=factory(name$m,dependencies$m,t=>{var{typed:e,equalScalar:r}=t;return e(name$m,{"number | BigNumber | Complex | Fraction":n=>r(n,0),bigint:n=>n===0n,Unit:e.referToSelf(n=>a=>e.find(n,a.valueType())(a.value)),"Array | Matrix":e.referToSelf(n=>a=>deepMap(a,n))})});function complexEquals(t,e,r,n){return nearlyEqual$1(t.re,e.re,r,n)&&nearlyEqual$1(t.im,e.im,r,n)}var createCompareUnits=factory("compareUnits",["typed"],t=>{var{typed:e}=t;return{"Unit, Unit":e.referToSelf(r=>(n,a)=>{if(!n.equalBase(a))throw new Error("Cannot compare units with different base");return e.find(r,[n.valueType(),a.valueType()])(n.value,a.value)})}}),name$l="equalScalar",dependencies$l=["typed","config"],createEqualScalar=factory(name$l,dependencies$l,t=>{var{typed:e,config:r}=t,n=createCompareUnits({typed:e});return e(name$l,{"boolean, boolean":function(o,l){return o===l},"number, number":function(o,l){return nearlyEqual$1(o,l,r.relTol,r.absTol)},"BigNumber, BigNumber":function(o,l){return o.eq(l)||nearlyEqual(o,l,r.relTol,r.absTol)},"bigint, bigint":function(o,l){return o===l},"Fraction, Fraction":function(o,l){return o.equals(l)},"Complex, Complex":function(o,l){return complexEquals(o,l,r.relTol,r.absTol)}},n)});factory(name$l,["typed","config"],t=>{var{typed:e,config:r}=t;return e(name$l,{"number, number":function(a,o){return nearlyEqual$1(a,o,r.relTol,r.absTol)}})});var name$k="SparseMatrix",dependencies$k=["typed","equalScalar","Matrix"],createSparseMatrixClass=factory(name$k,dependencies$k,t=>{var{typed:e,equalScalar:r,Matrix:n}=t;function a(k,J){if(!(this instanceof a))throw new SyntaxError("Constructor must be called with the new operator");if(J&&!isString(J))throw new Error("Invalid datatype: "+J);if(isMatrix(k))o(this,k,J);else if(k&&isArray(k.index)&&isArray(k.ptr)&&isArray(k.size))this._values=k.values,this._index=k.index,this._ptr=k.ptr,this._size=k.size,this._datatype=J||k.datatype;else if(isArray(k))l(this,k,J);else{if(k)throw new TypeError("Unsupported type of data ("+typeOf(k)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=J}}function o(k,J,q){J.type==="SparseMatrix"?(k._values=J._values?clone$2(J._values):void 0,k._index=clone$2(J._index),k._ptr=clone$2(J._ptr),k._size=clone$2(J._size),k._datatype=q||J._datatype):l(k,J.valueOf(),q||J._datatype)}function l(k,J,q){k._values=[],k._index=[],k._ptr=[],k._datatype=q;var Se=J.length,V=0,Y=r,ie=0;if(isString(q)&&(Y=e.find(r,[q,q])||r,ie=e.convert(0,q)),Se>0){var se=0;do{k._ptr.push(k._index.length);for(var ct=0;ct<Se;ct++){var ae=J[ct];if(isArray(ae)){if(se===0&&V<ae.length&&(V=ae.length),se<ae.length){var st=ae[se];Y(st,ie)||(k._values.push(st),k._index.push(ct))}}else se===0&&V<1&&(V=1),Y(ae,ie)||(k._values.push(ae),k._index.push(ct))}se++}while(se<V)}for(;k._ptr.length<=V;)k._ptr.push(k._index.length);k._size=[Se,V]}a.prototype=new n,a.prototype.createSparseMatrix=function(k,J){return new a(k,J)},Object.defineProperty(a,"name",{value:"SparseMatrix"}),a.prototype.constructor=a,a.prototype.type="SparseMatrix",a.prototype.isSparseMatrix=!0,a.prototype.getDataType=function(){return getArrayDataType(this._values,typeOf)},a.prototype.storage=function(){return"sparse"},a.prototype.datatype=function(){return this._datatype},a.prototype.create=function(k,J){return new a(k,J)},a.prototype.density=function(){var k=this._size[0],J=this._size[1];return k!==0&&J!==0?this._index.length/(k*J):0},a.prototype.subset=function(k,J,q){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return u(this,k);case 2:case 3:return c(this,k,J,q);default:throw new SyntaxError("Wrong number of arguments")}};function u(k,J){if(!isIndex(J))throw new TypeError("Invalid index");var q=J.isScalar();if(q)return k.get(J.min());var Se=J.size();if(Se.length!==k._size.length)throw new DimensionError(Se.length,k._size.length);var V,Y,ie,se,ct=J.min(),ae=J.max();for(V=0,Y=k._size.length;V<Y;V++)validateIndex(ct[V],k._size[V]),validateIndex(ae[V],k._size[V]);var st=k._values,Ct=k._index,$t=k._ptr,jo=J.dimension(0),Lp=J.dimension(1),Mn=[],sa=[];function re(Up,l0){sa[Up]=l0[0],Mn[Up]=!0}Number.isInteger(jo)?re(jo,[0]):jo.forEach(re);var $o=st?[]:void 0,qo=[],Kt=[];function i0(Up){for(Kt.push(qo.length),ie=$t[Up],se=$t[Up+1];ie<se;ie++)V=Ct[ie],Mn[V]===!0&&(qo.push(sa[V]),$o&&$o.push(st[ie]))}return Number.isInteger(Lp)?i0(Lp):Lp.forEach(i0),Kt.push(qo.length),new a({values:$o,index:qo,ptr:Kt,size:Se,datatype:k._datatype})}function c(k,J,q,Se){if(!J||J.isIndex!==!0)throw new TypeError("Invalid index");var V=J.size(),Y=J.isScalar(),ie;if(isMatrix(q)?(ie=q.size(),q=q.toArray()):ie=arraySize(q),Y){if(ie.length!==0)throw new TypeError("Scalar expected");k.set(J.min(),q,Se)}else{if(V.length!==1&&V.length!==2)throw new DimensionError(V.length,k._size.length,"<");if(ie.length<V.length){for(var se=0,ct=0;V[se]===1&&ie[se]===1;)se++;for(;V[se]===1;)ct++,se++;q=unsqueeze(q,V.length,ct,ie)}if(!deepStrictEqual(V,ie))throw new DimensionError(V,ie,">");if(V.length===1){var ae=J.dimension(0);$t(ae,(jo,Lp)=>{validateIndex(jo),k.set([jo,0],q[Lp[0]],Se)})}else{var st=J.dimension(0),Ct=J.dimension(1);$t(st,(jo,Lp)=>{validateIndex(jo),$t(Ct,(Mn,sa)=>{validateIndex(Mn),k.set([jo,Mn],q[Lp[0]][sa[0]],Se)})})}}return k;function $t(jo,Lp){isNumber(jo)?Lp(jo,[0]):jo.forEach(Lp)}}a.prototype.get=function(k){if(!isArray(k))throw new TypeError("Array expected");if(k.length!==this._size.length)throw new DimensionError(k.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var J=k[0],q=k[1];validateIndex(J,this._size[0]),validateIndex(q,this._size[1]);var Se=h(J,this._ptr[q],this._ptr[q+1],this._index);return Se<this._ptr[q+1]&&this._index[Se]===J?this._values[Se]:0},a.prototype.set=function(k,J,q){if(!isArray(k))throw new TypeError("Array expected");if(k.length!==this._size.length)throw new DimensionError(k.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var Se=k[0],V=k[1],Y=this._size[0],ie=this._size[1],se=r,ct=0;isString(this._datatype)&&(se=e.find(r,[this._datatype,this._datatype])||r,ct=e.convert(0,this._datatype)),(Se>Y-1||V>ie-1)&&(T(this,Math.max(Se+1,Y),Math.max(V+1,ie),q),Y=this._size[0],ie=this._size[1]),validateIndex(Se,Y),validateIndex(V,ie);var ae=h(Se,this._ptr[V],this._ptr[V+1],this._index);return ae<this._ptr[V+1]&&this._index[ae]===Se?se(J,ct)?v(ae,V,this._values,this._index,this._ptr):this._values[ae]=J:se(J,ct)||g(ae,Se,V,J,this._values,this._index,this._ptr),this};function h(k,J,q,Se){if(q-J===0)return q;for(var V=J;V<q;V++)if(Se[V]===k)return V;return J}function v(k,J,q,Se,V){q.splice(k,1),Se.splice(k,1);for(var Y=J+1;Y<V.length;Y++)V[Y]--}function g(k,J,q,Se,V,Y,ie){V.splice(k,0,Se),Y.splice(k,0,J);for(var se=q+1;se<ie.length;se++)ie[se]++}a.prototype.resize=function(k,J,q){if(!isCollection(k))throw new TypeError("Array or Matrix expected");var Se=k.valueOf().map(Y=>Array.isArray(Y)&&Y.length===1?Y[0]:Y);if(Se.length!==2)throw new Error("Only two dimensions matrix are supported");Se.forEach(function(Y){if(!isNumber(Y)||!isInteger(Y)||Y<0)throw new TypeError("Invalid size, must contain positive integers (size: "+format(Se)+")")});var V=q?this.clone():this;return T(V,Se[0],Se[1],J)};function T(k,J,q,Se){var V=Se||0,Y=r,ie=0;isString(k._datatype)&&(Y=e.find(r,[k._datatype,k._datatype])||r,ie=e.convert(0,k._datatype),V=e.convert(V,k._datatype));var se=!Y(V,ie),ct=k._size[0],ae=k._size[1],st,Ct,$t;if(q>ae){for(Ct=ae;Ct<q;Ct++)if(k._ptr[Ct]=k._values.length,se)for(st=0;st<ct;st++)k._values.push(V),k._index.push(st);k._ptr[q]=k._values.length}else q<ae&&(k._ptr.splice(q+1,ae-q),k._values.splice(k._ptr[q],k._values.length),k._index.splice(k._ptr[q],k._index.length));if(ae=q,J>ct){if(se){var jo=0;for(Ct=0;Ct<ae;Ct++){k._ptr[Ct]=k._ptr[Ct]+jo,$t=k._ptr[Ct+1]+jo;var Lp=0;for(st=ct;st<J;st++,Lp++)k._values.splice($t+Lp,0,V),k._index.splice($t+Lp,0,st),jo++}k._ptr[ae]=k._values.length}}else if(J<ct){var Mn=0;for(Ct=0;Ct<ae;Ct++){k._ptr[Ct]=k._ptr[Ct]-Mn;var sa=k._ptr[Ct],re=k._ptr[Ct+1]-Mn;for($t=sa;$t<re;$t++)st=k._index[$t],st>J-1&&(k._values.splice($t,1),k._index.splice($t,1),Mn++)}k._ptr[Ct]=k._values.length}return k._size[0]=J,k._size[1]=q,k}a.prototype.reshape=function(k,J){if(!isArray(k))throw new TypeError("Array expected");if(k.length!==2)throw new Error("Sparse matrices can only be reshaped in two dimensions");k.forEach(function(Kt){if(!isNumber(Kt)||!isInteger(Kt)||Kt<=-2||Kt===0)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+format(k)+")")});var q=this._size[0]*this._size[1];k=processSizesWildcard(k,q);var Se=k[0]*k[1];if(q!==Se)throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var V=J?this.clone():this;if(this._size[0]===k[0]&&this._size[1]===k[1])return V;for(var Y=[],ie=0;ie<V._ptr.length;ie++)for(var se=0;se<V._ptr[ie+1]-V._ptr[ie];se++)Y.push(ie);for(var ct=V._values.slice(),ae=V._index.slice(),st=0;st<V._index.length;st++){var Ct=ae[st],$t=Y[st],jo=Ct*V._size[1]+$t;Y[st]=jo%k[1],ae[st]=Math.floor(jo/k[1])}V._values.length=0,V._index.length=0,V._ptr.length=k[1]+1,V._size=k.slice();for(var Lp=0;Lp<V._ptr.length;Lp++)V._ptr[Lp]=0;for(var Mn=0;Mn<ct.length;Mn++){var sa=ae[Mn],re=Y[Mn],$o=ct[Mn],qo=h(sa,V._ptr[re],V._ptr[re+1],V._index);g(qo,sa,re,$o,V._values,V._index,V._ptr)}return V},a.prototype.clone=function(){var k=new a({values:this._values?clone$2(this._values):void 0,index:clone$2(this._index),ptr:clone$2(this._ptr),size:clone$2(this._size),datatype:this._datatype});return k},a.prototype.size=function(){return this._size.slice(0)},a.prototype.map=function(k,J){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var q=this,Se=this._size[0],V=this._size[1],Y=optimizeCallback(k,q,"map"),ie=function(ct,ae,st){return Y.fn(ct,[ae,st],q)};return R(this,0,Se-1,0,V-1,ie,J)};function R(k,J,q,Se,V,Y,ie){var se=[],ct=[],ae=[],st=r,Ct=0;isString(k._datatype)&&(st=e.find(r,[k._datatype,k._datatype])||r,Ct=e.convert(0,k._datatype));for(var $t=function(y0,kp,u0){var f0=Y(y0,kp,u0);st(f0,Ct)||(se.push(f0),ct.push(kp))},jo=Se;jo<=V;jo++){ae.push(se.length);var Lp=k._ptr[jo],Mn=k._ptr[jo+1];if(ie)for(var sa=Lp;sa<Mn;sa++){var re=k._index[sa];re>=J&&re<=q&&$t(k._values[sa],re-J,jo-Se)}else{for(var $o={},qo=Lp;qo<Mn;qo++){var Kt=k._index[qo];$o[Kt]=k._values[qo]}for(var i0=J;i0<=q;i0++){var Up=i0 in $o?$o[i0]:0;$t(Up,i0-J,jo-Se)}}}return ae.push(se.length),new a({values:se,index:ct,ptr:ae,size:[q-J+1,V-Se+1]})}a.prototype.forEach=function(k,J){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var q=this,Se=this._size[0],V=this._size[1],Y=optimizeCallback(k,q,"forEach"),ie=0;ie<V;ie++){var se=this._ptr[ie],ct=this._ptr[ie+1];if(J)for(var ae=se;ae<ct;ae++){var st=this._index[ae];Y.fn(this._values[ae],[st,ie],q)}else{for(var Ct={},$t=se;$t<ct;$t++){var jo=this._index[$t];Ct[jo]=this._values[$t]}for(var Lp=0;Lp<Se;Lp++){var Mn=Lp in Ct?Ct[Lp]:0;Y.fn(Mn,[Lp,ie],q)}}}},a.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var k=this._size[1],J=0;J<k;J++)for(var q=this._ptr[J],Se=this._ptr[J+1],V=q;V<Se;V++){var Y=this._index[V];yield{value:this._values[V],index:[Y,J]}}},a.prototype.toArray=function(){return W(this._values,this._index,this._ptr,this._size,!0)},a.prototype.valueOf=function(){return W(this._values,this._index,this._ptr,this._size,!1)};function W(k,J,q,Se,V){var Y=Se[0],ie=Se[1],se=[],ct,ae;for(ct=0;ct<Y;ct++)for(se[ct]=[],ae=0;ae<ie;ae++)se[ct][ae]=0;for(ae=0;ae<ie;ae++)for(var st=q[ae],Ct=q[ae+1],$t=st;$t<Ct;$t++)ct=J[$t],se[ct][ae]=k?V?clone$2(k[$t]):k[$t]:1;return se}return a.prototype.format=function(k){for(var J=this._size[0],q=this._size[1],Se=this.density(),V="Sparse Matrix ["+format(J,k)+" x "+format(q,k)+"] density: "+format(Se,k)+`
`,Y=0;Y<q;Y++)for(var ie=this._ptr[Y],se=this._ptr[Y+1],ct=ie;ct<se;ct++){var ae=this._index[ct];V+=`
    (`+format(ae,k)+", "+format(Y,k)+") ==> "+(this._values?format(this._values[ct],k):"X")}return V},a.prototype.toString=function(){return format(this.toArray())},a.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},a.prototype.diagonal=function(k){if(k){if(isBigNumber(k)&&(k=k.toNumber()),!isNumber(k)||!isInteger(k))throw new TypeError("The parameter k must be an integer number")}else k=0;var J=k>0?k:0,q=k<0?-k:0,Se=this._size[0],V=this._size[1],Y=Math.min(Se-q,V-J),ie=[],se=[],ct=[];ct[0]=0;for(var ae=J;ae<V&&ie.length<Y;ae++)for(var st=this._ptr[ae],Ct=this._ptr[ae+1],$t=st;$t<Ct;$t++){var jo=this._index[$t];if(jo===ae-J+q){ie.push(this._values[$t]),se[ie.length-1]=jo-q;break}}return ct.push(ie.length),new a({values:ie,index:se,ptr:ct,size:[Y,1]})},a.fromJSON=function(k){return new a(k)},a.diagonal=function(k,J,q,Se,V){if(!isArray(k))throw new TypeError("Array expected, size parameter");if(k.length!==2)throw new Error("Only two dimensions matrix are supported");if(k=k.map(function(Kt){if(isBigNumber(Kt)&&(Kt=Kt.toNumber()),!isNumber(Kt)||!isInteger(Kt)||Kt<1)throw new Error("Size values must be positive integers");return Kt}),q){if(isBigNumber(q)&&(q=q.toNumber()),!isNumber(q)||!isInteger(q))throw new TypeError("The parameter k must be an integer number")}else q=0;var Y=r,ie=0;isString(V)&&(Y=e.find(r,[V,V])||r,ie=e.convert(0,V));var se=q>0?q:0,ct=q<0?-q:0,ae=k[0],st=k[1],Ct=Math.min(ae-ct,st-se),$t;if(isArray(J)){if(J.length!==Ct)throw new Error("Invalid value array length");$t=function(i0){return J[i0]}}else if(isMatrix(J)){var jo=J.size();if(jo.length!==1||jo[0]!==Ct)throw new Error("Invalid matrix length");$t=function(i0){return J.get([i0])}}else $t=function(){return J};for(var Lp=[],Mn=[],sa=[],re=0;re<st;re++){sa.push(Lp.length);var $o=re-se;if($o>=0&&$o<Ct){var qo=$t($o);Y(qo,ie)||(Mn.push($o+ct),Lp.push(qo))}}return sa.push(Lp.length),new a({values:Lp,index:Mn,ptr:sa,size:[ae,st]})},a.prototype.swapRows=function(k,J){if(!isNumber(k)||!isInteger(k)||!isNumber(J)||!isInteger(J))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return validateIndex(k,this._size[0]),validateIndex(J,this._size[0]),a._swapRows(k,J,this._size[1],this._values,this._index,this._ptr),this},a._forEachRow=function(k,J,q,Se,V){for(var Y=Se[k],ie=Se[k+1],se=Y;se<ie;se++)V(q[se],J[se])},a._swapRows=function(k,J,q,Se,V,Y){for(var ie=0;ie<q;ie++){var se=Y[ie],ct=Y[ie+1],ae=h(k,se,ct,V),st=h(J,se,ct,V);if(ae<ct&&st<ct&&V[ae]===k&&V[st]===J){if(Se){var Ct=Se[ae];Se[ae]=Se[st],Se[st]=Ct}continue}if(ae<ct&&V[ae]===k&&(st>=ct||V[st]!==J)){var $t=Se?Se[ae]:void 0;V.splice(st,0,J),Se&&Se.splice(st,0,$t),V.splice(st<=ae?ae+1:ae,1),Se&&Se.splice(st<=ae?ae+1:ae,1);continue}if(st<ct&&V[st]===J&&(ae>=ct||V[ae]!==k)){var jo=Se?Se[st]:void 0;V.splice(ae,0,k),Se&&Se.splice(ae,0,jo),V.splice(ae<=st?st+1:st,1),Se&&Se.splice(ae<=st?st+1:st,1)}}},a},{isClass:!0}),name$j="number",dependencies$j=["typed"];function getNonDecimalNumberParts(t){var e=t.match(/(0[box])([0-9a-fA-F]*)\.([0-9a-fA-F]*)/);if(e){var r={"0b":2,"0o":8,"0x":16}[e[1]],n=e[2],a=e[3];return{input:t,radix:r,integerPart:n,fractionalPart:a}}else return null}function makeNumberFromNonDecimalParts(t){for(var e=parseInt(t.integerPart,t.radix),r=0,n=0;n<t.fractionalPart.length;n++){var a=parseInt(t.fractionalPart[n],t.radix);r+=a/Math.pow(t.radix,n+1)}var o=e+r;if(isNaN(o))throw new SyntaxError('String "'+t.input+'" is not a valid number');return o}var createNumber=factory(name$j,dependencies$j,t=>{var{typed:e}=t,r=e("number",{"":function(){return 0},number:function(a){return a},string:function(a){if(a==="NaN")return NaN;var o=getNonDecimalNumberParts(a);if(o)return makeNumberFromNonDecimalParts(o);var l=0,u=a.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);u&&(l=Number(u[2]),a=u[1]);var c=Number(a);if(isNaN(c))throw new SyntaxError('String "'+a+'" is not a valid number');if(u){if(c>2**l-1)throw new SyntaxError('String "'.concat(a,'" is out of range'));c>=2**(l-1)&&(c=c-2**l)}return c},BigNumber:function(a){return a.toNumber()},bigint:function(a){return Number(a)},Fraction:function(a){return a.valueOf()},Unit:e.referToSelf(n=>a=>{var o=a.clone();return o.value=n(a.value),o}),null:function(a){return 0},"Unit, string | Unit":function(a,o){return a.toNumber(o)},"Array | Matrix":e.referToSelf(n=>a=>deepMap(a,n))});return r.fromJSON=function(n){return parseFloat(n.value)},r}),name$i="bignumber",dependencies$i=["typed","BigNumber"],createBignumber=factory(name$i,dependencies$i,t=>{var{typed:e,BigNumber:r}=t;return e("bignumber",{"":function(){return new r(0)},number:function(a){return new r(a+"")},string:function(a){var o=a.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);if(o){var l=o[2],u=r(o[1]),c=new r(2).pow(Number(l));if(u.gt(c.sub(1)))throw new SyntaxError('String "'.concat(a,'" is out of range'));var h=new r(2).pow(Number(l)-1);return u.gte(h)?u.sub(c):u}return new r(a)},BigNumber:function(a){return a},bigint:function(a){return new r(a.toString())},Unit:e.referToSelf(n=>a=>{var o=a.clone();return o.value=n(a.value),o}),Fraction:function(a){return new r(String(a.n)).div(String(a.d)).times(String(a.s))},null:function(a){return new r(0)},"Array | Matrix":e.referToSelf(n=>a=>deepMap(a,n))})}),name$h="fraction",dependencies$h=["typed","Fraction"],createFraction=factory(name$h,dependencies$h,t=>{var{typed:e,Fraction:r}=t;return e("fraction",{number:function(a){if(!Number.isFinite(a)||isNaN(a))throw new Error(a+" cannot be represented as a fraction");return new r(a)},string:function(a){return new r(a)},"number, number":function(a,o){return new r(a,o)},"bigint, bigint":function(a,o){return new r(a,o)},null:function(a){return new r(0)},BigNumber:function(a){return new r(a.toString())},bigint:function(a){return new r(a.toString())},Fraction:function(a){return a},Unit:e.referToSelf(n=>a=>{var o=a.clone();return o.value=n(a.value),o}),Object:function(a){return new r(a)},"Array | Matrix":e.referToSelf(n=>a=>deepMap(a,n))})}),name$g="matrix",dependencies$g=["typed","Matrix","DenseMatrix","SparseMatrix"],createMatrix=factory(name$g,dependencies$g,t=>{var{typed:e,Matrix:r,DenseMatrix:n,SparseMatrix:a}=t;return e(name$g,{"":function(){return o([])},string:function(u){return o([],u)},"string, string":function(u,c){return o([],u,c)},Array:function(u){return o(u)},Matrix:function(u){return o(u,u.storage())},"Array | Matrix, string":o,"Array | Matrix, string, string":o});function o(l,u,c){if(u==="dense"||u==="default"||u===void 0)return new n(l,c);if(u==="sparse")return new a(l,c);throw new TypeError("Unknown matrix type "+JSON.stringify(u)+".")}}),name$f="unaryMinus",dependencies$f=["typed"],createUnaryMinus=factory(name$f,dependencies$f,t=>{var{typed:e}=t;return e(name$f,{number:unaryMinusNumber,"Complex | BigNumber | Fraction":r=>r.neg(),bigint:r=>-r,Unit:e.referToSelf(r=>n=>{var a=n.clone();return a.value=e.find(r,a.valueType())(n.value),a}),"Array | Matrix":e.referToSelf(r=>n=>deepMap(n,r,!0))})}),name$e="abs",dependencies$e=["typed"],createAbs=factory(name$e,dependencies$e,t=>{var{typed:e}=t;return e(name$e,{number:absNumber,"Complex | BigNumber | Fraction | Unit":r=>r.abs(),bigint:r=>r<0n?-r:r,"Array | Matrix":e.referToSelf(r=>n=>deepMap(n,r,!0))})}),name$d="addScalar",dependencies$d=["typed"],createAddScalar=factory(name$d,dependencies$d,t=>{var{typed:e}=t;return e(name$d,{"number, number":addNumber,"Complex, Complex":function(n,a){return n.add(a)},"BigNumber, BigNumber":function(n,a){return n.plus(a)},"bigint, bigint":function(n,a){return n+a},"Fraction, Fraction":function(n,a){return n.add(a)},"Unit, Unit":e.referToSelf(r=>(n,a)=>{if(n.value===null||n.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(a.value===null||a.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!n.equalBase(a))throw new Error("Units do not match");var o=n.clone();return o.value=e.find(r,[o.valueType(),a.valueType()])(o.value,a.value),o.fixPrefix=!1,o})})}),name$c="subtractScalar",dependencies$c=["typed"],createSubtractScalar=factory(name$c,dependencies$c,t=>{var{typed:e}=t;return e(name$c,{"number, number":subtractNumber,"Complex, Complex":function(n,a){return n.sub(a)},"BigNumber, BigNumber":function(n,a){return n.minus(a)},"bigint, bigint":function(n,a){return n-a},"Fraction, Fraction":function(n,a){return n.sub(a)},"Unit, Unit":e.referToSelf(r=>(n,a)=>{if(n.value===null||n.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(a.value===null||a.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!n.equalBase(a))throw new Error("Units do not match");var o=n.clone();return o.value=e.find(r,[o.valueType(),a.valueType()])(o.value,a.value),o.fixPrefix=!1,o})})}),name$b="matAlgo11xS0s",dependencies$b=["typed","equalScalar"],createMatAlgo11xS0s=factory(name$b,dependencies$b,t=>{var{typed:e,equalScalar:r}=t;return function(a,o,l,u){var c=a._values,h=a._index,v=a._ptr,g=a._size,T=a._datatype;if(!c)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var R=g[0],W=g[1],k,J=r,q=0,Se=l;typeof T=="string"&&(k=T,J=e.find(r,[k,k]),q=e.convert(0,k),o=e.convert(o,k),Se=e.find(l,[k,k]));for(var V=[],Y=[],ie=[],se=0;se<W;se++){ie[se]=Y.length;for(var ct=v[se],ae=v[se+1],st=ct;st<ae;st++){var Ct=h[st],$t=u?Se(o,c[st]):Se(c[st],o);J($t,q)||(Y.push(Ct),V.push($t))}}return ie[W]=Y.length,a.createSparseMatrix({values:V,index:Y,ptr:ie,size:[R,W],datatype:k})}}),name$a="matAlgo14xDs",dependencies$a=["typed"],createMatAlgo14xDs=factory(name$a,dependencies$a,t=>{var{typed:e}=t;return function(a,o,l,u){var c=a._data,h=a._size,v=a._datatype,g,T=l;typeof v=="string"&&(g=v,o=e.convert(o,g),T=e.find(l,[g,g]));var R=h.length>0?r(T,0,h,h[0],c,o,u):[];return a.createDenseMatrix({data:R,size:clone$2(h),datatype:g})};function r(n,a,o,l,u,c,h){var v=[];if(a===o.length-1)for(var g=0;g<l;g++)v[g]=h?n(c,u[g]):n(u[g],c);else for(var T=0;T<l;T++)v[T]=r(n,a+1,o,o[a+1],u[T],c,h);return v}}),name$9="multiplyScalar",dependencies$9=["typed"],createMultiplyScalar=factory(name$9,dependencies$9,t=>{var{typed:e}=t;return e("multiplyScalar",{"number, number":multiplyNumber,"Complex, Complex":function(n,a){return n.mul(a)},"BigNumber, BigNumber":function(n,a){return n.times(a)},"bigint, bigint":function(n,a){return n*a},"Fraction, Fraction":function(n,a){return n.mul(a)},"number | Fraction | BigNumber | Complex, Unit":(r,n)=>n.multiply(r),"Unit, number | Fraction | BigNumber | Complex | Unit":(r,n)=>r.multiply(n)})}),name$8="multiply",dependencies$8=["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],createMultiply=factory(name$8,dependencies$8,t=>{var{typed:e,matrix:r,addScalar:n,multiplyScalar:a,equalScalar:o,dot:l}=t,u=createMatAlgo11xS0s({typed:e,equalScalar:o}),c=createMatAlgo14xDs({typed:e});function h(ie,se){switch(ie.length){case 1:switch(se.length){case 1:if(ie[0]!==se[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(ie[0]!==se[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+ie[0]+") must match Matrix rows ("+se[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+se.length+" dimensions)")}break;case 2:switch(se.length){case 1:if(ie[1]!==se[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+ie[1]+") must match Vector length ("+se[0]+")");break;case 2:if(ie[1]!==se[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+ie[1]+") must match Matrix B rows ("+se[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+se.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+ie.length+" dimensions)")}}function v(ie,se,ct){if(ct===0)throw new Error("Cannot multiply two empty vectors");return l(ie,se)}function g(ie,se){if(se.storage()!=="dense")throw new Error("Support for SparseMatrix not implemented");return T(ie,se)}function T(ie,se){var ct=ie._data,ae=ie._size,st=ie._datatype||ie.getDataType(),Ct=se._data,$t=se._size,jo=se._datatype||se.getDataType(),Lp=ae[0],Mn=$t[1],sa,re=n,$o=a;st&&jo&&st===jo&&typeof st=="string"&&st!=="mixed"&&(sa=st,re=e.find(n,[sa,sa]),$o=e.find(a,[sa,sa]));for(var qo=[],Kt=0;Kt<Mn;Kt++){for(var i0=$o(ct[0],Ct[0][Kt]),Up=1;Up<Lp;Up++)i0=re(i0,$o(ct[Up],Ct[Up][Kt]));qo[Kt]=i0}return ie.createDenseMatrix({data:qo,size:[Mn],datatype:st===ie._datatype&&jo===se._datatype?sa:void 0})}var R=e("_multiplyMatrixVector",{"DenseMatrix, any":k,"SparseMatrix, any":Se}),W=e("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":J,"DenseMatrix, SparseMatrix":q,"SparseMatrix, DenseMatrix":V,"SparseMatrix, SparseMatrix":Y});function k(ie,se){var ct=ie._data,ae=ie._size,st=ie._datatype||ie.getDataType(),Ct=se._data,$t=se._datatype||se.getDataType(),jo=ae[0],Lp=ae[1],Mn,sa=n,re=a;st&&$t&&st===$t&&typeof st=="string"&&st!=="mixed"&&(Mn=st,sa=e.find(n,[Mn,Mn]),re=e.find(a,[Mn,Mn]));for(var $o=[],qo=0;qo<jo;qo++){for(var Kt=ct[qo],i0=re(Kt[0],Ct[0]),Up=1;Up<Lp;Up++)i0=sa(i0,re(Kt[Up],Ct[Up]));$o[qo]=i0}return ie.createDenseMatrix({data:$o,size:[jo],datatype:st===ie._datatype&&$t===se._datatype?Mn:void 0})}function J(ie,se){var ct=ie._data,ae=ie._size,st=ie._datatype||ie.getDataType(),Ct=se._data,$t=se._size,jo=se._datatype||se.getDataType(),Lp=ae[0],Mn=ae[1],sa=$t[1],re,$o=n,qo=a;st&&jo&&st===jo&&typeof st=="string"&&st!=="mixed"&&st!=="mixed"&&(re=st,$o=e.find(n,[re,re]),qo=e.find(a,[re,re]));for(var Kt=[],i0=0;i0<Lp;i0++){var Up=ct[i0];Kt[i0]=[];for(var l0=0;l0<sa;l0++){for(var y0=qo(Up[0],Ct[0][l0]),kp=1;kp<Mn;kp++)y0=$o(y0,qo(Up[kp],Ct[kp][l0]));Kt[i0][l0]=y0}}return ie.createDenseMatrix({data:Kt,size:[Lp,sa],datatype:st===ie._datatype&&jo===se._datatype?re:void 0})}function q(ie,se){var ct=ie._data,ae=ie._size,st=ie._datatype||ie.getDataType(),Ct=se._values,$t=se._index,jo=se._ptr,Lp=se._size,Mn=se._datatype||se._data===void 0?se._datatype:se.getDataType();if(!Ct)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var sa=ae[0],re=Lp[1],$o,qo=n,Kt=a,i0=o,Up=0;st&&Mn&&st===Mn&&typeof st=="string"&&st!=="mixed"&&($o=st,qo=e.find(n,[$o,$o]),Kt=e.find(a,[$o,$o]),i0=e.find(o,[$o,$o]),Up=e.convert(0,$o));for(var l0=[],y0=[],kp=[],u0=se.createSparseMatrix({values:l0,index:y0,ptr:kp,size:[sa,re],datatype:st===ie._datatype&&Mn===se._datatype?$o:void 0}),f0=0;f0<re;f0++){kp[f0]=y0.length;var v0=jo[f0],p0=jo[f0+1];if(p0>v0)for(var rm=0,am=0;am<sa;am++){for(var ym=am+1,Wm=void 0,h0=v0;h0<p0;h0++){var f1=$t[h0];rm!==ym?(Wm=Kt(ct[am][f1],Ct[h0]),rm=ym):Wm=qo(Wm,Kt(ct[am][f1],Ct[h0]))}rm===ym&&!i0(Wm,Up)&&(y0.push(am),l0.push(Wm))}}return kp[re]=y0.length,u0}function Se(ie,se){var ct=ie._values,ae=ie._index,st=ie._ptr,Ct=ie._datatype||ie._data===void 0?ie._datatype:ie.getDataType();if(!ct)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var $t=se._data,jo=se._datatype||se.getDataType(),Lp=ie._size[0],Mn=se._size[0],sa=[],re=[],$o=[],qo,Kt=n,i0=a,Up=o,l0=0;Ct&&jo&&Ct===jo&&typeof Ct=="string"&&Ct!=="mixed"&&(qo=Ct,Kt=e.find(n,[qo,qo]),i0=e.find(a,[qo,qo]),Up=e.find(o,[qo,qo]),l0=e.convert(0,qo));var y0=[],kp=[];$o[0]=0;for(var u0=0;u0<Mn;u0++){var f0=$t[u0];if(!Up(f0,l0))for(var v0=st[u0],p0=st[u0+1],rm=v0;rm<p0;rm++){var am=ae[rm];kp[am]?y0[am]=Kt(y0[am],i0(f0,ct[rm])):(kp[am]=!0,re.push(am),y0[am]=i0(f0,ct[rm]))}}for(var ym=re.length,Wm=0;Wm<ym;Wm++){var h0=re[Wm];sa[Wm]=y0[h0]}return $o[1]=re.length,ie.createSparseMatrix({values:sa,index:re,ptr:$o,size:[Lp,1],datatype:Ct===ie._datatype&&jo===se._datatype?qo:void 0})}function V(ie,se){var ct=ie._values,ae=ie._index,st=ie._ptr,Ct=ie._datatype||ie._data===void 0?ie._datatype:ie.getDataType();if(!ct)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var $t=se._data,jo=se._datatype||se.getDataType(),Lp=ie._size[0],Mn=se._size[0],sa=se._size[1],re,$o=n,qo=a,Kt=o,i0=0;Ct&&jo&&Ct===jo&&typeof Ct=="string"&&Ct!=="mixed"&&(re=Ct,$o=e.find(n,[re,re]),qo=e.find(a,[re,re]),Kt=e.find(o,[re,re]),i0=e.convert(0,re));for(var Up=[],l0=[],y0=[],kp=ie.createSparseMatrix({values:Up,index:l0,ptr:y0,size:[Lp,sa],datatype:Ct===ie._datatype&&jo===se._datatype?re:void 0}),u0=[],f0=[],v0=0;v0<sa;v0++){y0[v0]=l0.length;for(var p0=v0+1,rm=0;rm<Mn;rm++){var am=$t[rm][v0];if(!Kt(am,i0))for(var ym=st[rm],Wm=st[rm+1],h0=ym;h0<Wm;h0++){var f1=ae[h0];f0[f1]!==p0?(f0[f1]=p0,l0.push(f1),u0[f1]=qo(am,ct[h0])):u0[f1]=$o(u0[f1],qo(am,ct[h0]))}}for(var T1=y0[v0],I1=l0.length,p1=T1;p1<I1;p1++){var Qm=l0[p1];Up[p1]=u0[Qm]}}return y0[sa]=l0.length,kp}function Y(ie,se){var ct=ie._values,ae=ie._index,st=ie._ptr,Ct=ie._datatype||ie._data===void 0?ie._datatype:ie.getDataType(),$t=se._values,jo=se._index,Lp=se._ptr,Mn=se._datatype||se._data===void 0?se._datatype:se.getDataType(),sa=ie._size[0],re=se._size[1],$o=ct&&$t,qo,Kt=n,i0=a;Ct&&Mn&&Ct===Mn&&typeof Ct=="string"&&Ct!=="mixed"&&(qo=Ct,Kt=e.find(n,[qo,qo]),i0=e.find(a,[qo,qo]));for(var Up=$o?[]:void 0,l0=[],y0=[],kp=ie.createSparseMatrix({values:Up,index:l0,ptr:y0,size:[sa,re],datatype:Ct===ie._datatype&&Mn===se._datatype?qo:void 0}),u0=$o?[]:void 0,f0=[],v0,p0,rm,am,ym,Wm,h0,f1,T1=0;T1<re;T1++){y0[T1]=l0.length;var I1=T1+1;for(ym=Lp[T1],Wm=Lp[T1+1],am=ym;am<Wm;am++)if(f1=jo[am],$o)for(p0=st[f1],rm=st[f1+1],v0=p0;v0<rm;v0++)h0=ae[v0],f0[h0]!==I1?(f0[h0]=I1,l0.push(h0),u0[h0]=i0($t[am],ct[v0])):u0[h0]=Kt(u0[h0],i0($t[am],ct[v0]));else for(p0=st[f1],rm=st[f1+1],v0=p0;v0<rm;v0++)h0=ae[v0],f0[h0]!==I1&&(f0[h0]=I1,l0.push(h0));if($o)for(var p1=y0[T1],Qm=l0.length,m1=p1;m1<Qm;m1++){var W1=l0[m1];Up[m1]=u0[W1]}}return y0[re]=l0.length,kp}return e(name$8,a,{"Array, Array":e.referTo("Matrix, Matrix",ie=>(se,ct)=>{h(arraySize(se),arraySize(ct));var ae=ie(r(se),r(ct));return isMatrix(ae)?ae.valueOf():ae}),"Matrix, Matrix":function(se,ct){var ae=se.size(),st=ct.size();return h(ae,st),ae.length===1?st.length===1?v(se,ct,ae[0]):g(se,ct):st.length===1?R(se,ct):W(se,ct)},"Matrix, Array":e.referTo("Matrix,Matrix",ie=>(se,ct)=>ie(se,r(ct))),"Array, Matrix":e.referToSelf(ie=>(se,ct)=>ie(r(se,ct.storage()),ct)),"SparseMatrix, any":function(se,ct){return u(se,ct,a,!1)},"DenseMatrix, any":function(se,ct){return c(se,ct,a,!1)},"any, SparseMatrix":function(se,ct){return u(ct,se,a,!0)},"any, DenseMatrix":function(se,ct){return c(ct,se,a,!0)},"Array, any":function(se,ct){return c(r(se),ct,a,!1).valueOf()},"any, Array":function(se,ct){return c(r(ct),se,a,!0).valueOf()},"any, any":a,"any, any, ...any":e.referToSelf(ie=>(se,ct,ae)=>{for(var st=ie(se,ct),Ct=0;Ct<ae.length;Ct++)st=ie(st,ae[Ct]);return st})})}),name$7="conj",dependencies$7=["typed"],createConj=factory(name$7,dependencies$7,t=>{var{typed:e}=t;return e(name$7,{"number | BigNumber | Fraction":r=>r,Complex:r=>r.conjugate(),Unit:e.referToSelf(r=>n=>new n.constructor(r(n.toNumeric()),n.formatUnits())),"Array | Matrix":e.referToSelf(r=>n=>deepMap(n,r))})}),name$6="identity",dependencies$6=["typed","config","matrix","BigNumber","DenseMatrix","SparseMatrix"],createIdentity=factory(name$6,dependencies$6,t=>{var{typed:e,config:r,matrix:n,BigNumber:a,DenseMatrix:o,SparseMatrix:l}=t;return e(name$6,{"":function(){return r.matrix==="Matrix"?n([]):[]},string:function(v){return n(v)},"number | BigNumber":function(v){return c(v,v,r.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, string":function(v,g){return c(v,v,g)},"number | BigNumber, number | BigNumber":function(v,g){return c(v,g,r.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, number | BigNumber, string":function(v,g,T){return c(v,g,T)},Array:function(v){return u(v)},"Array, string":function(v,g){return u(v,g)},Matrix:function(v){return u(v.valueOf(),v.storage())},"Matrix, string":function(v,g){return u(v.valueOf(),g)}});function u(h,v){switch(h.length){case 0:return v?n(v):[];case 1:return c(h[0],h[0],v);case 2:return c(h[0],h[1],v);default:throw new Error("Vector containing two values expected")}}function c(h,v,g){var T=isBigNumber(h)||isBigNumber(v)?a:null;if(isBigNumber(h)&&(h=h.toNumber()),isBigNumber(v)&&(v=v.toNumber()),!isInteger(h)||h<1)throw new Error("Parameters in function identity must be positive integers");if(!isInteger(v)||v<1)throw new Error("Parameters in function identity must be positive integers");var R=T?new a(1):1,W=T?new T(0):0,k=[h,v];if(g){if(g==="sparse")return l.diagonal(k,R,0,W);if(g==="dense")return o.diagonal(k,R,0,W);throw new TypeError('Unknown matrix type "'.concat(g,'"'))}for(var J=resize([],k,W),q=h<v?h:v,Se=0;Se<q;Se++)J[Se][Se]=R;return J}});function noBignumber(){throw new Error('No "bignumber" implementation available')}function noFraction(){throw new Error('No "fraction" implementation available')}var name$5="size",dependencies$5=["typed"],createSize=factory(name$5,dependencies$5,t=>{var{typed:e}=t;return e(name$5,{Matrix:r=>r.size(),Array:arraySize,string:r=>[r.length],"number | Complex | BigNumber | Unit | boolean | null":r=>[]})}),name$4="numeric",dependencies$4=["number","?bignumber","?fraction"],createNumeric=factory(name$4,dependencies$4,t=>{var{number:e,bignumber:r,fraction:n}=t,a={string:!0,number:!0,BigNumber:!0,Fraction:!0},o={number:l=>e(l),BigNumber:r?l=>r(l):noBignumber,bigint:l=>BigInt(l),Fraction:n?l=>n(l):noFraction};return function(u){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"number",h=arguments.length>2?arguments[2]:void 0;if(h!==void 0)throw new SyntaxError("numeric() takes one or two arguments");var v=typeOf(u);if(!(v in a))throw new TypeError("Cannot convert "+u+' of type "'+v+'"; valid input types are '+Object.keys(a).join(", "));if(!(c in o))throw new TypeError("Cannot convert "+u+' to type "'+c+'"; valid output types are '+Object.keys(o).join(", "));return c===v?u:o[c](u)}}),name$3="divideScalar",dependencies$3=["typed","numeric"],createDivideScalar=factory(name$3,dependencies$3,t=>{var{typed:e,numeric:r}=t;return e(name$3,{"number, number":function(a,o){return a/o},"Complex, Complex":function(a,o){return a.div(o)},"BigNumber, BigNumber":function(a,o){return a.div(o)},"bigint, bigint":function(a,o){return a/o},"Fraction, Fraction":function(a,o){return a.div(o)},"Unit, number | Complex | Fraction | BigNumber | Unit":(n,a)=>n.divide(a),"number | Fraction | Complex | BigNumber, Unit":(n,a)=>a.divideInto(n)})}),name$2="dot",dependencies$2=["typed","addScalar","multiplyScalar","conj","size"],createDot=factory(name$2,dependencies$2,t=>{var{typed:e,addScalar:r,multiplyScalar:n,conj:a,size:o}=t;return e(name$2,{"Array | DenseMatrix, Array | DenseMatrix":u,"SparseMatrix, SparseMatrix":c});function l(h,v){var g=o(h),T=o(v),R,W;if(g.length===1)R=g[0];else if(g.length===2&&g[1]===1)R=g[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+g.join(", ")+")");if(T.length===1)W=T[0];else if(T.length===2&&T[1]===1)W=T[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+T.join(", ")+")");if(R!==W)throw new RangeError("Vectors must have equal length ("+R+" != "+W+")");if(R===0)throw new RangeError("Cannot calculate the dot product of empty vectors");return R}function u(h,v){var g=l(h,v),T=isMatrix(h)?h._data:h,R=isMatrix(h)?h._datatype||h.getDataType():void 0,W=isMatrix(v)?v._data:v,k=isMatrix(v)?v._datatype||v.getDataType():void 0,J=o(h).length===2,q=o(v).length===2,Se=r,V=n;if(R&&k&&R===k&&typeof R=="string"&&R!=="mixed"){var Y=R;Se=e.find(r,[Y,Y]),V=e.find(n,[Y,Y])}if(!J&&!q){for(var ie=V(a(T[0]),W[0]),se=1;se<g;se++)ie=Se(ie,V(a(T[se]),W[se]));return ie}if(!J&&q){for(var ct=V(a(T[0]),W[0][0]),ae=1;ae<g;ae++)ct=Se(ct,V(a(T[ae]),W[ae][0]));return ct}if(J&&!q){for(var st=V(a(T[0][0]),W[0]),Ct=1;Ct<g;Ct++)st=Se(st,V(a(T[Ct][0]),W[Ct]));return st}if(J&&q){for(var $t=V(a(T[0][0]),W[0][0]),jo=1;jo<g;jo++)$t=Se($t,V(a(T[jo][0]),W[jo][0]));return $t}}function c(h,v){l(h,v);for(var g=h._index,T=h._values,R=v._index,W=v._values,k=0,J=r,q=n,Se=0,V=0;Se<g.length&&V<R.length;){var Y=g[Se],ie=R[V];if(Y<ie){Se++;continue}if(Y>ie){V++;continue}Y===ie&&(k=J(k,q(T[Se],W[V])),Se++,V++)}return k}}),name$1="det",dependencies$1=["typed","matrix","subtractScalar","multiply","divideScalar","isZero","unaryMinus"],createDet=factory(name$1,dependencies$1,t=>{var{typed:e,matrix:r,subtractScalar:n,multiply:a,divideScalar:o,isZero:l,unaryMinus:u}=t;return e(name$1,{any:function(v){return clone$2(v)},"Array | Matrix":function(v){var g;switch(isMatrix(v)?g=v.size():Array.isArray(v)?(v=r(v),g=v.size()):g=[],g.length){case 0:return clone$2(v);case 1:if(g[0]===1)return clone$2(v.valueOf()[0]);if(g[0]===0)return 1;throw new RangeError("Matrix must be square (size: "+format(g)+")");case 2:{var T=g[0],R=g[1];if(T===R)return c(v.clone().valueOf(),T);if(R===0)return 1;throw new RangeError("Matrix must be square (size: "+format(g)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+format(g)+")")}}});function c(h,v,g){if(v===1)return clone$2(h[0][0]);if(v===2)return n(a(h[0][0],h[1][1]),a(h[1][0],h[0][1]));for(var T=!1,R=new Array(v).fill(0).map((ct,ae)=>ae),W=0;W<v;W++){var k=R[W];if(l(h[k][W])){var J=void 0;for(J=W+1;J<v;J++)if(!l(h[R[J]][W])){k=R[J],R[J]=R[W],R[W]=k,T=!T;break}if(J===v)return h[k][W]}for(var q=h[k][W],Se=W===0?1:h[R[W-1]][W-1],V=W+1;V<v;V++)for(var Y=R[V],ie=W+1;ie<v;ie++)h[Y][ie]=o(n(a(h[Y][ie],q),a(h[Y][W],h[k][ie])),Se)}var se=h[R[v-1]][v-1];return T?u(se):se}}),name="inv",dependencies=["typed","matrix","divideScalar","addScalar","multiply","unaryMinus","det","identity","abs"],createInv=factory(name,dependencies,t=>{var{typed:e,matrix:r,divideScalar:n,addScalar:a,multiply:o,unaryMinus:l,det:u,identity:c,abs:h}=t;return e(name,{"Array | Matrix":function(T){var R=isMatrix(T)?T.size():arraySize(T);switch(R.length){case 1:if(R[0]===1)return isMatrix(T)?r([n(1,T.valueOf()[0])]):[n(1,T[0])];throw new RangeError("Matrix must be square (size: "+format(R)+")");case 2:{var W=R[0],k=R[1];if(W===k)return isMatrix(T)?r(v(T.valueOf(),W,k),T.storage()):v(T,W,k);throw new RangeError("Matrix must be square (size: "+format(R)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+format(R)+")")}},any:function(T){return n(1,T)}});function v(g,T,R){var W,k,J,q,Se;if(T===1){if(q=g[0][0],q===0)throw Error("Cannot calculate inverse, determinant is zero");return[[n(1,q)]]}else if(T===2){var V=u(g);if(V===0)throw Error("Cannot calculate inverse, determinant is zero");return[[n(g[1][1],V),n(l(g[0][1]),V)],[n(l(g[1][0]),V),n(g[0][0],V)]]}else{var Y=g.concat();for(W=0;W<T;W++)Y[W]=Y[W].concat();for(var ie=c(T).valueOf(),se=0;se<R;se++){var ct=h(Y[se][se]),ae=se;for(W=se+1;W<T;)h(Y[W][se])>ct&&(ct=h(Y[W][se]),ae=W),W++;if(ct===0)throw Error("Cannot calculate inverse, determinant is zero");W=ae,W!==se&&(Se=Y[se],Y[se]=Y[W],Y[W]=Se,Se=ie[se],ie[se]=ie[W],ie[W]=Se);var st=Y[se],Ct=ie[se];for(W=0;W<T;W++){var $t=Y[W],jo=ie[W];if(W!==se){if($t[se]!==0){for(J=n(l($t[se]),st[se]),k=se;k<R;k++)$t[k]=a($t[k],o(J,st[k]));for(k=0;k<R;k++)jo[k]=a(jo[k],o(J,Ct[k]))}}else{for(J=st[se],k=se;k<R;k++)$t[k]=n($t[k],J);for(k=0;k<R;k++)jo[k]=n(jo[k],J)}}}return ie}}}),BigNumber=createBigNumberClass({config:config$1}),Complex=createComplexClass({}),Fraction=createFractionClass({}),Matrix=createMatrixClass({}),DenseMatrix=createDenseMatrixClass({Matrix,config:config$1}),typed=createTyped({BigNumber,Complex,DenseMatrix,Fraction}),abs=createAbs({typed}),addScalar=createAddScalar({typed}),conj=createConj({typed}),equalScalar=createEqualScalar({config:config$1,typed}),multiplyScalar=createMultiplyScalar({typed}),number=createNumber({typed}),size=createSize({typed}),SparseMatrix=createSparseMatrixClass({Matrix,equalScalar,typed}),subtractScalar=createSubtractScalar({typed}),bignumber=createBignumber({BigNumber,typed}),dot=createDot({addScalar,conj,multiplyScalar,size,typed}),isZero=createIsZero({equalScalar,typed}),matrix=createMatrix({DenseMatrix,Matrix,SparseMatrix,typed}),multiply=createMultiply({addScalar,dot,equalScalar,matrix,multiplyScalar,typed}),fraction=createFraction({Fraction,typed}),identity=createIdentity({BigNumber,DenseMatrix,SparseMatrix,config:config$1,matrix,typed}),numeric=createNumeric({bignumber,fraction,number}),unaryMinus=createUnaryMinus({typed}),divideScalar=createDivideScalar({numeric,typed}),det=createDet({divideScalar,isZero,matrix,multiply,subtractScalar,typed,unaryMinus}),inv=createInv({abs,addScalar,det,divideScalar,identity,matrix,multiply,typed,unaryMinus});const ControlBox=({viewerParams:t,onViewerParamChange:e,onViewerEvent:r})=>{const n=(l,u)=>{let c=t.supercell;c[l]=parseInt(u),e("supercell",c)},a=l=>{e(l,!t[l])},o=l=>{r("camera",l)};return jsxRuntimeExports.jsxs("div",{className:"control-box",children:[jsxRuntimeExports.jsxs("div",{className:"control-box-row",children:[jsxRuntimeExports.jsxs("div",{className:"supercell-container",children:[jsxRuntimeExports.jsx("label",{children:"Supercell: "}),jsxRuntimeExports.jsx("div",{style:{display:"flex"},children:[0,1,2].map(l=>jsxRuntimeExports.jsx("input",{className:"supercell-input",type:"number",min:"1",max:"99",value:t.supercell[l],onChange:u=>n(l,u.target.value)},l))})]}),jsxRuntimeExports.jsxs("div",{className:"camera-controls",children:[jsxRuntimeExports.jsx("label",{children:"Camera: "}),jsxRuntimeExports.jsx("button",{className:"camera-button",onClick:()=>o("x"),children:"x"}),jsxRuntimeExports.jsx("button",{className:"camera-button",onClick:()=>o("y"),children:"y"}),jsxRuntimeExports.jsx("button",{className:"camera-button",onClick:()=>o("z"),children:"z"})]})]}),jsxRuntimeExports.jsxs("div",{className:"control-box-row",style:{display:"flex"},children:[jsxRuntimeExports.jsxs("label",{className:"option-checkbox",children:[jsxRuntimeExports.jsx("input",{className:"control-box-input",type:"checkbox",checked:t.bonds,onChange:()=>a("bonds")}),jsxRuntimeExports.jsx("span",{children:"Bonds"})]}),jsxRuntimeExports.jsxs("label",{className:"option-checkbox",children:[jsxRuntimeExports.jsx("input",{className:"control-box-input",type:"checkbox",checked:t.packedCell,onChange:()=>a("packedCell")}),jsxRuntimeExports.jsx("span",{children:"Packed cell"})]}),jsxRuntimeExports.jsxs("label",{className:"option-checkbox",children:[jsxRuntimeExports.jsx("input",{className:"control-box-input",type:"checkbox",checked:t.atomLabels,onChange:()=>a("atomLabels")}),jsxRuntimeExports.jsx("span",{children:"Atom labels"})]}),jsxRuntimeExports.jsxs("label",{className:"option-checkbox",children:[jsxRuntimeExports.jsx("input",{className:"control-box-input",type:"checkbox",checked:t.spaceFilling,onChange:()=>a("vdwRadius")}),jsxRuntimeExports.jsx("span",{children:"vdW radius"})]})]})]})};var _3DmolMin={exports:{}};/*! For license information please see 3Dmol-min.js.LICENSE.txt */var hasRequired_3DmolMin;function require_3DmolMin(){return hasRequired_3DmolMin||(hasRequired_3DmolMin=1,(function(module,exports){var factory;factory=()=>(()=>{var __webpack_modules__={3:(t,e,r)=>{var n=r(663),a=r(981),o=r(972),l=r(681),u=r(834),c=r(746),h=r(670),v=Object.prototype.toString;function g(R){if(!(this instanceof g))return new g(R);this.options=a.assign({chunkSize:16384,windowBits:0,to:""},R||{});var W=this.options;W.raw&&W.windowBits>=0&&W.windowBits<16&&(W.windowBits=-W.windowBits,W.windowBits===0&&(W.windowBits=-15)),!(W.windowBits>=0&&W.windowBits<16)||R&&R.windowBits||(W.windowBits+=32),W.windowBits>15&&W.windowBits<48&&(15&W.windowBits||(W.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var k=n.inflateInit2(this.strm,W.windowBits);if(k!==l.Z_OK)throw new Error(u[k]);if(this.header=new h,n.inflateGetHeader(this.strm,this.header),W.dictionary&&(typeof W.dictionary=="string"?W.dictionary=o.string2buf(W.dictionary):v.call(W.dictionary)==="[object ArrayBuffer]"&&(W.dictionary=new Uint8Array(W.dictionary)),W.raw&&(k=n.inflateSetDictionary(this.strm,W.dictionary))!==l.Z_OK))throw new Error(u[k])}function T(R,W){var k=new g(W);if(k.push(R,!0),k.err)throw k.msg||u[k.err];return k.result}g.prototype.push=function(R,W){var k,J,q,Se,V,Y=this.strm,ie=this.options.chunkSize,se=this.options.dictionary,ct=!1;if(this.ended)return!1;J=W===~~W?W:W===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof R=="string"?Y.input=o.binstring2buf(R):v.call(R)==="[object ArrayBuffer]"?Y.input=new Uint8Array(R):Y.input=R,Y.next_in=0,Y.avail_in=Y.input.length;do{if(Y.avail_out===0&&(Y.output=new a.Buf8(ie),Y.next_out=0,Y.avail_out=ie),(k=n.inflate(Y,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&se&&(k=n.inflateSetDictionary(this.strm,se)),k===l.Z_BUF_ERROR&&ct===!0&&(k=l.Z_OK,ct=!1),k!==l.Z_STREAM_END&&k!==l.Z_OK)return this.onEnd(k),this.ended=!0,!1;Y.next_out&&(Y.avail_out!==0&&k!==l.Z_STREAM_END&&(Y.avail_in!==0||J!==l.Z_FINISH&&J!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(q=o.utf8border(Y.output,Y.next_out),Se=Y.next_out-q,V=o.buf2string(Y.output,q),Y.next_out=Se,Y.avail_out=ie-Se,Se&&a.arraySet(Y.output,Y.output,q,Se,0),this.onData(V)):this.onData(a.shrinkBuf(Y.output,Y.next_out)))),Y.avail_in===0&&Y.avail_out===0&&(ct=!0)}while((Y.avail_in>0||Y.avail_out===0)&&k!==l.Z_STREAM_END);return k===l.Z_STREAM_END&&(J=l.Z_FINISH),J===l.Z_FINISH?(k=n.inflateEnd(this.strm),this.onEnd(k),this.ended=!0,k===l.Z_OK):J!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),Y.avail_out=0,!0)},g.prototype.onData=function(R){this.chunks.push(R)},g.prototype.onEnd=function(R){R===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=R,this.msg=this.strm.msg},e.Inflate=g,e.inflate=T,e.inflateRaw=function(R,W){return(W=W||{}).raw=!0,T(R,W)},e.ungzip=T},16:(t,e,r)=>{r.r(e),r.d(e,{CAP:()=>n,CC:()=>h.CC,CONTEXTS_PER_VIEWPORT:()=>Vm,Color:()=>h.Color,CustomLinear:()=>v.CustomLinear,Cylinder:()=>u.Cylinder,GLDraw:()=>a,GLModel:()=>wg,GLShape:()=>m0,GLViewer:()=>O1,GLVolumetricRender:()=>Fm,Gradient:()=>v.Gradient,GradientType:()=>v.GradientType,Label:()=>Gm,LabelCount:()=>L0,MarchingCube:()=>et,MarchingCubeInitializer:()=>pg,Matrix3:()=>c.Matrix3,Matrix4:()=>c.Matrix4,Parsers:()=>Om,PausableTimer:()=>g.PausableTimer,PointGrid:()=>t0,ProteinSurface:()=>oa,Quaternion:()=>c.Quaternion,ROYGB:()=>v.ROYGB,RWB:()=>v.RWB,Ray:()=>c.Ray,Sinebow:()=>v.Sinebow,Sphere:()=>u.Sphere,SurfaceType:()=>Lv,Triangle:()=>u.Triangle,Vector2:()=>c.Vector2,Vector3:()=>c.Vector3,VolumeData:()=>a0.VolumeData,adjustVolumeStyle:()=>g.adjustVolumeStyle,applyPartialCharges:()=>Iv,autoinit:()=>cg,autoload:()=>G1,base64ToArray:()=>g.base64ToArray,bondLength:()=>p0.bondLength,builtinColorSchemes:()=>h.builtinColorSchemes,builtinGradients:()=>v.builtinGradients,chains:()=>h.chains,clamp:()=>c.clamp,conversionMatrix3:()=>c.conversionMatrix3,createStereoViewer:()=>kg,createViewer:()=>tg,createViewerGrid:()=>Mg,deepCopy:()=>g.deepCopy,degToRad:()=>c.degToRad,download:()=>g.download,drawCartoon:()=>jo,elementColors:()=>h.elementColors,extend:()=>g.extend,get:()=>g.get,getAtomProperty:()=>g.getAtomProperty,getColorFromStyle:()=>g.getColorFromStyle,getElement:()=>g.getElement,getExtent:()=>g.getExtent,getGradient:()=>v.getGradient,getPropertyRange:()=>g.getPropertyRange,getbin:()=>g.getbin,htmlColors:()=>h.htmlColors,inflateString:()=>g.inflateString,isEmptyObject:()=>g.isEmptyObject,isNumeric:()=>g.isNumeric,makeFunction:()=>g.makeFunction,mergeGeos:()=>g.mergeGeos,normalizeValue:()=>v.normalizeValue,partialCharges:()=>sg,processing_autoinit:()=>Ag,residues:()=>h.residues,setBondLength:()=>p0.setBondLength,setSyncSurface:()=>Ny,specStringToObject:()=>g.specStringToObject,splitMesh:()=>nm,ssColors:()=>h.ssColors,subdivide_spline:()=>T,syncSurface:()=>Pv,viewers:()=>K1});var n,a,o=r(111),l=r(378),u=r(99),c=r(529),h=r(222);(function(d0){d0[d0.NONE=0]="NONE",d0[d0.FLAT=1]="FLAT",d0[d0.ROUND=2]="ROUND"})(n||(n={})),(function(d0){function y(ne,Rt,lt){var Pt,Ht,Dt,Zt,Er,Np=Math.hypot(ne,Rt);Np<1e-4?(Ht=0,Dt=1):(Ht=-ne/Np,Dt=Rt/Np),Rt=-Ht*ne+Dt*Rt,(Pt=Math.hypot(Rt,lt))<1e-4?(Zt=0,Er=1):(Zt=lt/Pt,Er=Rt/Pt);var Zo=new Float32Array(9);return Zo[0]=Dt,Zo[1]=Ht,Zo[2]=0,Zo[3]=-Ht*Er,Zo[4]=Dt*Er,Zo[5]=Zt,Zo[6]=Ht*Zt,Zo[7]=-Dt*Zt,Zo[8]=Er,Zo}var N=new class{constructor(){this.cache={};let ne,Rt=[],lt=Math.pow(2,4),Pt=2,Ht=Math.pow(2,Pt),Dt=lt/Ht;for(Rt[0]=new c.Vector3(-1,0,0),Rt[Dt]=new c.Vector3(0,0,1),Rt[2*Dt]=new c.Vector3(1,0,0),Rt[3*Dt]=new c.Vector3(0,0,-1),Pt=3;Pt<=4;Pt++){for(Ht=Math.pow(2,Pt-1),Dt=lt/Ht,ne=0;ne<Ht-1;ne++)Rt[Dt/2+ne*Dt]=Rt[ne*Dt].clone().add(Rt[(ne+1)*Dt]).normalize();ne=Ht-1,Rt[Dt/2+ne*Dt]=Rt[ne*Dt].clone().add(Rt[0]).normalize()}this.basisVectors=Rt}getVerticesForRadius(ne,Rt,lt){if(this.cache!==void 0&&this.cache[ne]!==void 0&&this.cache[ne][Rt+lt]!==void 0)return this.cache[ne][Rt+lt];for(var Pt,Ht=this.basisVectors.length,Dt=[],Zt=[],Er=0;Er<Ht;Er++)Dt.push(this.basisVectors[Er].clone().multiplyScalar(ne)),Dt.push(this.basisVectors[Er].clone().multiplyScalar(ne)),Pt=this.basisVectors[Er].clone().normalize(),Zt.push(Pt),Zt.push(Pt);var Np,Zo,la=[],Dp=10,wp=Ht,Vp=2*Math.PI,Kp=Math.PI,r0=!1,D0=!1;for(Zo=0;Zo<=Dp;Zo++){r0=Zo===0||Zo===Dp,D0=Zo===5;var E0=[],H0=[];for(Np=0;Np<=wp;Np++)if(D0){var Q0=Np<wp?2*Np:0;H0.push(Q0+1),E0.push(Q0)}else{var lm=Np/wp,hm=Zo/Dp;if(r0&&Np!==0)r0&&E0.push(Dt.length-1);else if(Np<wp){var q0=new c.Vector3;q0.x=-ne*Math.cos(0+lm*Vp)*Math.sin(0+hm*Kp),q0.y=Rt==1?0:ne*Math.cos(0+hm*Kp),q0.z=ne*Math.sin(0+lm*Vp)*Math.sin(0+hm*Kp),Math.abs(q0.x)<1e-5&&(q0.x=0),Math.abs(q0.y)<1e-5&&(q0.y=0),Math.abs(q0.z)<1e-5&&(q0.z=0),Rt==n.FLAT?(Pt=new c.Vector3(0,Math.cos(0+hm*Kp),0)).normalize():(Pt=new c.Vector3(q0.x,q0.y,q0.z)).normalize(),Dt.push(q0),Zt.push(Pt),E0.push(Dt.length-1)}else E0.push(Dt.length-wp)}D0&&la.push(H0),la.push(E0)}var Bm={vertices:Dt,normals:Zt,verticesRows:la,w:wp,h:Dp};return ne in this.cache||(this.cache[ne]={}),this.cache[ne][Rt+lt]=Bm,Bm}};d0.drawCylinder=function(ne,Rt,lt,Pt,Ht,Dt=0,Zt=0){if(!Rt||!lt)return;let Er=function(G0){if(typeof G0=="string"){let j0=G0;return j0.toLowerCase()=="flat"?n.FLAT:j0.toLowerCase()=="round"?n.ROUND:n.NONE}return G0};Dt=Er(Dt);var Np=(Zt=Er(Zt))||Dt;Ht=Ht||{r:0,g:0,b:0};var Zo,la,Dp,wp,Vp,Kp,r0=y(lt.x-Rt.x,lt.y-Rt.y,lt.z-Rt.z),D0=N.getVerticesForRadius(Pt,Zt,"to"),E0=D0.w,H0=D0.h,Q0=Np?H0*E0+2:2*E0,lm=ne.updateGeoGroup(Q0),hm=D0.vertices,q0=D0.normals,Bm=D0.verticesRows,Im=Bm[H0/2],h1=Bm[H0/2+1],i1=lm.vertices,M1=lm.vertexArray,L1=lm.normalArray,c1=lm.colorArray,j1=lm.faceArray;for(Dp=0;Dp<E0;++Dp){var Hm=2*Dp;wp=r0[0]*hm[Hm].x+r0[3]*hm[Hm].y+r0[6]*hm[Hm].z,Vp=r0[1]*hm[Hm].x+r0[4]*hm[Hm].y+r0[7]*hm[Hm].z,Kp=r0[5]*hm[Hm].y+r0[8]*hm[Hm].z,Zo=3*(i1+Hm),la=lm.faceidx,M1[Zo]=wp+Rt.x,M1[Zo+1]=Vp+Rt.y,M1[Zo+2]=Kp+Rt.z,M1[Zo+3]=wp+lt.x,M1[Zo+4]=Vp+lt.y,M1[Zo+5]=Kp+lt.z,L1[Zo]=wp,L1[Zo+3]=wp,L1[Zo+1]=Vp,L1[Zo+4]=Vp,L1[Zo+2]=Kp,L1[Zo+5]=Kp,c1[Zo]=Ht.r,c1[Zo+3]=Ht.r,c1[Zo+1]=Ht.g,c1[Zo+4]=Ht.g,c1[Zo+2]=Ht.b,c1[Zo+5]=Ht.b,j1[la]=h1[Dp]+i1,j1[la+1]=h1[Dp+1]+i1,j1[la+2]=Im[Dp]+i1,j1[la+3]=Im[Dp]+i1,j1[la+4]=h1[Dp+1]+i1,j1[la+5]=Im[Dp+1]+i1,lm.faceidx+=6}if(Np){var t1,Y1,d1,q1,Z1,x1,ag,Og,eg,C1,Bg,xg,Ig,_g,Hg,vv,jv,Uv,vy,ay,Tv,yy,ey,iy,xy,Ly,_y,Iy,Dv,Wv,Zv,ty,Ue=Dt?H0+1:H0/2+1;for(Vp=Zt?0:H0/2;Vp<Ue;Vp++)if(Vp!==H0/2){var jp=Vp<=H0/2?lt:Rt,bt=N.getVerticesForRadius(Pt,Zt,"to"),X0=N.getVerticesForRadius(Pt,Dt,"from");for(jp===lt?(hm=bt.vertices,q0=bt.normals,Bm=bt.verticesRows):jp==Rt&&(hm=X0.vertices,q0=X0.normals,Bm=X0.verticesRows),wp=0;wp<E0;wp++)la=lm.faceidx,Dv=3*((t1=Bm[Vp][wp+1])+i1),Wv=3*((Y1=Bm[Vp][wp])+i1),Zv=3*((d1=Bm[Vp+1][wp])+i1),ty=3*((q1=Bm[Vp+1][wp+1])+i1),Z1=r0[0]*hm[t1].x+r0[3]*hm[t1].y+r0[6]*hm[t1].z,x1=r0[0]*hm[Y1].x+r0[3]*hm[Y1].y+r0[6]*hm[Y1].z,ag=r0[0]*hm[d1].x+r0[3]*hm[d1].y+r0[6]*hm[d1].z,Og=r0[0]*hm[q1].x+r0[3]*hm[q1].y+r0[6]*hm[q1].z,eg=r0[1]*hm[t1].x+r0[4]*hm[t1].y+r0[7]*hm[t1].z,C1=r0[1]*hm[Y1].x+r0[4]*hm[Y1].y+r0[7]*hm[Y1].z,Bg=r0[1]*hm[d1].x+r0[4]*hm[d1].y+r0[7]*hm[d1].z,xg=r0[1]*hm[q1].x+r0[4]*hm[q1].y+r0[7]*hm[q1].z,Ig=r0[5]*hm[t1].y+r0[8]*hm[t1].z,_g=r0[5]*hm[Y1].y+r0[8]*hm[Y1].z,Hg=r0[5]*hm[d1].y+r0[8]*hm[d1].z,vv=r0[5]*hm[q1].y+r0[8]*hm[q1].z,M1[Dv]=Z1+jp.x,M1[Wv]=x1+jp.x,M1[Zv]=ag+jp.x,M1[ty]=Og+jp.x,M1[Dv+1]=eg+jp.y,M1[Wv+1]=C1+jp.y,M1[Zv+1]=Bg+jp.y,M1[ty+1]=xg+jp.y,M1[Dv+2]=Ig+jp.z,M1[Wv+2]=_g+jp.z,M1[Zv+2]=Hg+jp.z,M1[ty+2]=vv+jp.z,c1[Dv]=Ht.r,c1[Wv]=Ht.r,c1[Zv]=Ht.r,c1[ty]=Ht.r,c1[Dv+1]=Ht.g,c1[Wv+1]=Ht.g,c1[Zv+1]=Ht.g,c1[ty+1]=Ht.g,c1[Dv+2]=Ht.b,c1[Wv+2]=Ht.b,c1[Zv+2]=Ht.b,c1[ty+2]=Ht.b,jv=r0[0]*q0[t1].x+r0[3]*q0[t1].y+r0[6]*q0[t1].z,Uv=r0[0]*q0[Y1].x+r0[3]*q0[Y1].y+r0[6]*q0[Y1].z,vy=r0[0]*q0[d1].x+r0[3]*q0[d1].y+r0[6]*q0[d1].z,ay=r0[0]*q0[q1].x+r0[3]*q0[q1].y+r0[6]*q0[q1].z,Tv=r0[1]*q0[t1].x+r0[4]*q0[t1].y+r0[7]*q0[t1].z,yy=r0[1]*q0[Y1].x+r0[4]*q0[Y1].y+r0[7]*q0[Y1].z,ey=r0[1]*q0[d1].x+r0[4]*q0[d1].y+r0[7]*q0[d1].z,iy=r0[1]*q0[q1].x+r0[4]*q0[q1].y+r0[7]*q0[q1].z,xy=r0[5]*q0[t1].y+r0[8]*q0[t1].z,Ly=r0[5]*q0[Y1].y+r0[8]*q0[Y1].z,_y=r0[5]*q0[d1].y+r0[8]*q0[d1].z,Iy=r0[5]*q0[q1].y+r0[8]*q0[q1].z,Vp===0?(L1[Dv]=jv,L1[Zv]=vy,L1[ty]=ay,L1[Dv+1]=Tv,L1[Zv+1]=ey,L1[ty+1]=iy,L1[Dv+2]=xy,L1[Zv+2]=_y,L1[ty+2]=Iy,j1[la]=t1+i1,j1[la+1]=d1+i1,j1[la+2]=q1+i1,lm.faceidx+=3):Vp===Ue-1?(L1[Dv]=jv,L1[Wv]=Uv,L1[Zv]=vy,L1[Dv+1]=Tv,L1[Wv+1]=yy,L1[Zv+1]=ey,L1[Dv+2]=xy,L1[Wv+2]=Ly,L1[Zv+2]=_y,j1[la]=t1+i1,j1[la+1]=Y1+i1,j1[la+2]=d1+i1,lm.faceidx+=3):(L1[Dv]=jv,L1[Wv]=Uv,L1[ty]=ay,L1[Dv+1]=Tv,L1[Wv+1]=yy,L1[ty+1]=iy,L1[Dv+2]=xy,L1[Wv+2]=Ly,L1[ty+2]=Iy,L1[Wv]=Uv,L1[Zv]=vy,L1[ty]=ay,L1[Wv+1]=yy,L1[Zv+1]=ey,L1[ty+1]=iy,L1[Wv+2]=Ly,L1[Zv+2]=_y,L1[ty+2]=Iy,j1[la]=t1+i1,j1[la+1]=Y1+i1,j1[la+2]=q1+i1,j1[la+3]=Y1+i1,j1[la+4]=d1+i1,j1[la+5]=q1+i1,lm.faceidx+=6)}}lm.vertices+=Q0},d0.drawCone=function(ne,Rt,lt,Pt,Ht){if(!Rt||!lt)return;Ht=Ht||{r:0,g:0,b:0};let Dt=new c.Vector3(lt.x-Rt.x,lt.y-Rt.y,lt.z-Rt.z);var Zt=y(Dt.x,Dt.y,Dt.z);Dt=Dt.normalize();var Er,Np,Zo,la,Dp,wp,Vp=N.basisVectors.length,Kp=N.basisVectors,r0=Vp+2,D0=ne.updateGeoGroup(r0),E0=D0.vertices,H0=D0.vertexArray,Q0=D0.normalArray,lm=D0.colorArray,hm=D0.faceArray;for(H0[Er=3*E0]=Rt.x,H0[Er+1]=Rt.y,H0[Er+2]=Rt.z,Q0[Er]=-Dt.x,Q0[Er+1]=-Dt.y,Q0[Er+2]=-Dt.z,lm[Er]=Ht.r,lm[Er+1]=Ht.g,lm[Er+2]=Ht.b,H0[Er+3]=lt.x,H0[Er+4]=lt.y,H0[Er+5]=lt.z,Q0[Er+3]=Dt.x,Q0[Er+4]=Dt.y,Q0[Er+5]=Dt.z,lm[Er+3]=Ht.r,lm[Er+4]=Ht.g,lm[Er+5]=Ht.b,Er+=6,Zo=0;Zo<Vp;++Zo){var q0=Kp[Zo].clone();q0.multiplyScalar(Pt),la=Zt[0]*q0.x+Zt[3]*q0.y+Zt[6]*q0.z,Dp=Zt[1]*q0.x+Zt[4]*q0.y+Zt[7]*q0.z,wp=Zt[5]*q0.y+Zt[8]*q0.z,H0[Er]=la+Rt.x,H0[Er+1]=Dp+Rt.y,H0[Er+2]=wp+Rt.z,Q0[Er]=la,Q0[Er+1]=Dp,Q0[Er+2]=wp,lm[Er]=Ht.r,lm[Er+1]=Ht.g,lm[Er+2]=Ht.b,Er+=3}for(D0.vertices+=Vp+2,Np=D0.faceidx,Zo=0;Zo<Vp;Zo++){var Bm=E0+2+Zo,Im=E0+2+(Zo+1)%Vp;hm[Np]=Bm,hm[Np+1]=Im,hm[Np+2]=E0,hm[Np+=3]=Bm,hm[Np+1]=Im,hm[Np+2]=E0+1,Np+=3}D0.faceidx+=6*Vp};var K=new class{constructor(){this.cache=new Map}getVerticesForRadius(ne,Rt){Rt=Rt||2,this.cache.has(Rt)||this.cache.set(Rt,new Map);let lt=this.cache.get(Rt);if(lt.has(ne))return lt.get(ne);var Pt={vertices:[],verticesRows:[],normals:[]},Ht=16*Rt,Dt=10*Rt;ne<1&&(Ht=10*Rt,Dt=8*Rt);var Zt,Er,Np=2*Math.PI,Zo=Math.PI;for(Er=0;Er<=Dt;Er++){let Dp=[];for(Zt=0;Zt<=Ht;Zt++){let wp=Zt/Ht,Vp=Er/Dt,Kp=-ne*Math.cos(0+wp*Np)*Math.sin(0+Vp*Zo),r0=ne*Math.cos(0+Vp*Zo),D0=ne*Math.sin(0+wp*Np)*Math.sin(0+Vp*Zo);var la=new c.Vector3(Kp,r0,D0);la.normalize(),Pt.vertices.push({x:Kp,y:r0,z:D0}),Pt.normals.push(la),Dp.push(Pt.vertices.length-1)}Pt.verticesRows.push(Dp)}return lt.set(ne,Pt),Pt}};d0.drawSphere=function(ne,Rt,lt,Pt,Ht){var Dt=K.getVerticesForRadius(lt,Ht),Zt=Dt.vertices,Er=Dt.normals,Np=ne.updateGeoGroup(Zt.length),Zo=Np.vertices,la=Np.vertexArray,Dp=Np.colorArray,wp=Np.faceArray,Vp=Np.lineArray,Kp=Np.normalArray;for(let E0=0,H0=Zt.length;E0<H0;++E0){let Q0=3*(Zo+E0),lm=Zt[E0];la[Q0]=lm.x+Rt.x,la[Q0+1]=lm.y+Rt.y,la[Q0+2]=lm.z+Rt.z,Dp[Q0]=Pt.r,Dp[Q0+1]=Pt.g,Dp[Q0+2]=Pt.b}Np.vertices+=Zt.length;let r0=Dt.verticesRows,D0=r0.length-1;for(let E0=0;E0<D0;E0++){let H0=r0[E0].length-1;for(let Q0=0;Q0<H0;Q0++){let lm=Np.faceidx,hm=Np.lineidx,q0=r0[E0][Q0+1]+Zo,Bm=3*q0,Im=r0[E0][Q0]+Zo,h1=3*Im,i1=r0[E0+1][Q0]+Zo,M1=3*i1,L1=r0[E0+1][Q0+1]+Zo,c1=3*L1,j1=Er[q0-Zo],Hm=Er[Im-Zo],t1=Er[i1-Zo],Y1=Er[L1-Zo];Math.abs(Zt[q0-Zo].y)===lt?(Kp[Bm]=j1.x,Kp[M1]=t1.x,Kp[c1]=Y1.x,Kp[Bm+1]=j1.y,Kp[M1+1]=t1.y,Kp[c1+1]=Y1.y,Kp[Bm+2]=j1.z,Kp[M1+2]=t1.z,Kp[c1+2]=Y1.z,wp[lm]=q0,wp[lm+1]=i1,wp[lm+2]=L1,Vp[hm]=q0,Vp[hm+1]=i1,Vp[hm+2]=q0,Vp[hm+3]=L1,Vp[hm+4]=i1,Vp[hm+5]=L1,Np.faceidx+=3,Np.lineidx+=6):Math.abs(Zt[i1-Zo].y)===lt?(Kp[Bm]=j1.x,Kp[h1]=Hm.x,Kp[M1]=t1.x,Kp[Bm+1]=j1.y,Kp[h1+1]=Hm.y,Kp[M1+1]=t1.y,Kp[Bm+2]=j1.z,Kp[h1+2]=Hm.z,Kp[M1+2]=t1.z,wp[lm]=q0,wp[lm+1]=Im,wp[lm+2]=i1,Vp[hm]=q0,Vp[hm+1]=Im,Vp[hm+2]=q0,Vp[hm+3]=i1,Vp[hm+4]=Im,Vp[hm+5]=i1,Np.faceidx+=3,Np.lineidx+=6):(Kp[Bm]=j1.x,Kp[h1]=Hm.x,Kp[c1]=Y1.x,Kp[Bm+1]=j1.y,Kp[h1+1]=Hm.y,Kp[c1+1]=Y1.y,Kp[Bm+2]=j1.z,Kp[h1+2]=Hm.z,Kp[c1+2]=Y1.z,Kp[h1]=Hm.x,Kp[M1]=t1.x,Kp[c1]=Y1.x,Kp[h1+1]=Hm.y,Kp[M1+1]=t1.y,Kp[c1+1]=Y1.y,Kp[h1+2]=Hm.z,Kp[M1+2]=t1.z,Kp[c1+2]=Y1.z,wp[lm]=q0,wp[lm+1]=Im,wp[lm+2]=L1,wp[lm+3]=Im,wp[lm+4]=i1,wp[lm+5]=L1,Vp[hm]=q0,Vp[hm+1]=Im,Vp[hm+2]=q0,Vp[hm+3]=L1,Vp[hm+4]=Im,Vp[hm+5]=i1,Vp[hm+6]=i1,Vp[hm+7]=L1,Np.faceidx+=6,Np.lineidx+=8)}}}})(a||(a={}));var v=r(546),g=r(864);function T(d0,y){var N,K,ne,Rt,lt,Pt,Ht,Dt,Zt,Er=[],Np=d0;for((Np=[]).push(d0[0]),N=1,K=d0.length-1;N<K;N++)if(lt=d0[N],Pt=d0[N+1],lt.smoothen){var Zo=new c.Vector3((lt.x+Pt.x)/2,(lt.y+Pt.y)/2,(lt.z+Pt.z)/2);Zo.atom=lt.atom,Np.push(Zo)}else Np.push(lt);for(Np.push(d0[d0.length-1]),N=-1,ne=Np.length;N<=ne-3;N++)if(Rt=Np[N===-1?0:N],lt=Np[N+1],Pt=Np[N+2],Ht=Np[N===ne-3?ne-1:N+3],Dt=new c.Vector3().subVectors(Pt,Rt).multiplyScalar(.5),Zt=new c.Vector3().subVectors(Ht,lt).multiplyScalar(.5),!Pt.skip)for(var la=0;la<y;la++){var Dp=1/y*la,wp=lt.x+Dp*Dt.x+Dp*Dp*(-3*lt.x+3*Pt.x-2*Dt.x-Zt.x)+Dp*Dp*Dp*(2*lt.x-2*Pt.x+Dt.x+Zt.x),Vp=lt.y+Dp*Dt.y+Dp*Dp*(-3*lt.y+3*Pt.y-2*Dt.y-Zt.y)+Dp*Dp*Dp*(2*lt.y-2*Pt.y+Dt.y+Zt.y),Kp=lt.z+Dp*Dt.z+Dp*Dp*(-3*lt.z+3*Pt.z-2*Dt.z-Zt.z)+Dp*Dp*Dp*(2*lt.z-2*Pt.z+Dt.z+Zt.z),r0=new c.Vector3(wp,Vp,Kp);r0.atom=la<y/2?lt.atom:Pt.atom,Er.push(r0)}return Er.push(Np[Np.length-1]),Er}const R=.5,W=1.3,k=.8,J=.4,q=.4;function Se(d0,y,N,K){for(var ne,Rt,lt,Pt,Ht=0,Dt=y.length;Ht<Dt;Ht++){Pt=Math.round(Ht*(K.length-1)/Dt),lt=h.CC.color(K[Pt]);var Zt=d0.updateGeoGroup(2),Er=Zt.vertexArray,Np=Zt.colorArray,Zo=Zt.faceArray;Er[Rt=3*(ne=Zt.vertices)]=y[Ht].x,Er[Rt+1]=y[Ht].y,Er[Rt+2]=y[Ht].z,Er[Rt+3]=N[Ht].x,Er[Rt+4]=N[Ht].y,Er[Rt+5]=N[Ht].z;for(var la=0;la<6;++la)Np[Rt+3*la]=lt.r,Np[Rt+1+3*la]=lt.g,Np[Rt+2+3*la]=lt.b;if(Ht>0){var Dp=[ne,ne+1,ne-1,ne-2],wp=Zt.faceidx;Zo[wp]=Dp[0],Zo[wp+1]=Dp[1],Zo[wp+2]=Dp[3],Zo[wp+3]=Dp[1],Zo[wp+4]=Dp[2],Zo[wp+5]=Dp[3],Zt.faceidx+=6}Zt.vertices+=2}}function V(d0,y,N,K,ne,Rt,lt){lt&&lt!=="default"||(lt="rectangle"),lt==="edged"?(function(Pt,Ht,Dt,Zt,Er){if(!(Ht.length<2)){var Np,Zo;if(Np=Ht[0],Zo=Ht[Ht.length-1],Np=T(Np,Zt),Zo=T(Zo,Zt),!Er)return Se(Pt,Np,Zo,Dt);var la,Dp,wp,Vp,Kp,r0,D0,E0,H0,Q0,lm,hm,q0,Bm,Im,h1,i1,M1,L1,c1,j1,Hm,t1=[],Y1=[[0,2,-6,-8],[-4,-2,6,4],[7,-1,-5,3],[-3,5,1,-7]];for(q0=0,Bm=Np.length;q0<Bm;q0++){if(Q0=Math.round(q0*(Dt.length-1)/Bm),H0=h.CC.color(Dt[Q0]),t1.push(Dp=Np[q0]),t1.push(Dp),t1.push(wp=Zo[q0]),t1.push(wp),q0<Bm-1){var d1=Np[q0+1].clone().sub(Np[q0]);la=Zo[q0].clone().sub(Np[q0]).cross(d1).normalize().multiplyScalar(Er)}for(t1.push(Vp=Np[q0].clone().add(la)),t1.push(Vp),t1.push(Kp=Zo[q0].clone().add(la)),t1.push(Kp),Dp.atom!==void 0&&(lm=Dp.atom),c1=(L1=Pt.updateGeoGroup(8)).vertexArray,j1=L1.colorArray,Hm=L1.faceArray,c1[D0=3*(r0=L1.vertices)]=Dp.x,c1[D0+1]=Dp.y,c1[D0+2]=Dp.z,c1[D0+3]=Dp.x,c1[D0+4]=Dp.y,c1[D0+5]=Dp.z,c1[D0+6]=wp.x,c1[D0+7]=wp.y,c1[D0+8]=wp.z,c1[D0+9]=wp.x,c1[D0+10]=wp.y,c1[D0+11]=wp.z,c1[D0+12]=Vp.x,c1[D0+13]=Vp.y,c1[D0+14]=Vp.z,c1[D0+15]=Vp.x,c1[D0+16]=Vp.y,c1[D0+17]=Vp.z,c1[D0+18]=Kp.x,c1[D0+19]=Kp.y,c1[D0+20]=Kp.z,c1[D0+21]=Kp.x,c1[D0+22]=Kp.y,c1[D0+23]=Kp.z,Im=0;Im<8;++Im)j1[D0+3*Im]=H0.r,j1[D0+1+3*Im]=H0.g,j1[D0+2+3*Im]=H0.b;if(q0>0){var q1=hm!==void 0&&lm!==void 0&&hm.serial!==lm.serial;for(Im=0;Im<4;Im++){var Z1=[r0+Y1[Im][0],r0+Y1[Im][1],r0+Y1[Im][2],r0+Y1[Im][3]];if(Hm[E0=L1.faceidx]=Z1[0],Hm[E0+1]=Z1[1],Hm[E0+2]=Z1[3],Hm[E0+3]=Z1[1],Hm[E0+4]=Z1[2],Hm[E0+5]=Z1[3],L1.faceidx+=6,lm.clickable||hm.clickable||lm.hoverable||hm.hoverable){var x1=t1[Z1[3]].clone(),ag=t1[Z1[0]].clone(),Og=t1[Z1[2]].clone(),eg=t1[Z1[1]].clone();if(x1.atom=t1[Z1[3]].atom||null,Og.atom=t1[Z1[2]].atom||null,ag.atom=t1[Z1[0]].atom||null,eg.atom=t1[Z1[1]].atom||null,q1){var C1=x1.clone().add(ag).multiplyScalar(.5),Bg=Og.clone().add(eg).multiplyScalar(.5),xg=x1.clone().add(eg).multiplyScalar(.5);Im%2==0?((hm.clickable||hm.hoverable)&&(h1=new u.Triangle(C1,xg,x1),i1=new u.Triangle(Bg,Og,xg),M1=new u.Triangle(xg,Og,x1),hm.intersectionShape.triangle.push(h1),hm.intersectionShape.triangle.push(i1),hm.intersectionShape.triangle.push(M1)),(lm.clickable||lm.hoverable)&&(h1=new u.Triangle(ag,eg,xg),i1=new u.Triangle(eg,Bg,xg),M1=new u.Triangle(ag,xg,C1),lm.intersectionShape.triangle.push(h1),lm.intersectionShape.triangle.push(i1),lm.intersectionShape.triangle.push(M1))):((lm.clickable||lm.hoverable)&&(h1=new u.Triangle(C1,xg,x1),i1=new u.Triangle(Bg,Og,xg),M1=new u.Triangle(xg,Og,x1),lm.intersectionShape.triangle.push(h1),lm.intersectionShape.triangle.push(i1),lm.intersectionShape.triangle.push(M1)),(hm.clickable||hm.hoverable)&&(h1=new u.Triangle(ag,eg,xg),i1=new u.Triangle(eg,Bg,xg),M1=new u.Triangle(ag,xg,C1),hm.intersectionShape.triangle.push(h1),hm.intersectionShape.triangle.push(i1),hm.intersectionShape.triangle.push(M1)))}else(lm.clickable||lm.hoverable)&&(h1=new u.Triangle(ag,eg,x1),i1=new u.Triangle(eg,Og,x1),lm.intersectionShape.triangle.push(h1),lm.intersectionShape.triangle.push(i1))}}}L1.vertices+=8,hm=lm}var Ig=t1.length-8;for(c1=(L1=Pt.updateGeoGroup(8)).vertexArray,j1=L1.colorArray,Hm=L1.faceArray,D0=3*(r0=L1.vertices),E0=L1.faceidx,q0=0;q0<4;q0++){t1.push(t1[2*q0]),t1.push(t1[Ig+2*q0]);var _g=t1[2*q0],Hg=t1[Ig+2*q0];c1[D0+6*q0]=_g.x,c1[D0+1+6*q0]=_g.y,c1[D0+2+6*q0]=_g.z,c1[D0+3+6*q0]=Hg.x,c1[D0+4+6*q0]=Hg.y,c1[D0+5+6*q0]=Hg.z,j1[D0+6*q0]=H0.r,j1[D0+1+6*q0]=H0.g,j1[D0+2+6*q0]=H0.b,j1[D0+3+6*q0]=H0.r,j1[D0+4+6*q0]=H0.g,j1[D0+5+6*q0]=H0.b}Ig+=8,h1=[r0,r0+2,r0+6,r0+4],i1=[r0+1,r0+5,r0+7,r0+3],Hm[E0]=h1[0],Hm[E0+1]=h1[1],Hm[E0+2]=h1[3],Hm[E0+3]=h1[1],Hm[E0+4]=h1[2],Hm[E0+5]=h1[3],Hm[E0+6]=i1[0],Hm[E0+7]=i1[1],Hm[E0+8]=i1[3],Hm[E0+9]=i1[1],Hm[E0+10]=i1[2],Hm[E0+11]=i1[3],L1.faceidx+=12,L1.vertices+=8}})(d0,y,N,K,ne):lt!=="rectangle"&&lt!=="oval"&&lt!=="parabola"||(function(Pt,Ht,Dt,Zt,Er,Np,Zo){var la,Dp,wp,Vp,Kp,r0,D0,E0,H0,Q0;if((wp=Ht.length)<2||Ht[0].length<2)return;for(la=0;la<wp;la++)Ht[la]=T(Ht[la],Zt);if(Vp=Ht[0].length,!Er)return Se(Pt,Ht[0],Ht[wp-1],Dt);var lm=[],hm=[],q0=[];for(Dp=0;Dp<wp;Dp++)lm.push(.25+1.5*Math.sqrt((wp-1)*Dp-Math.pow(Dp,2))/(wp-1)),hm.push(.5),q0.push(2*(Math.pow(Dp/wp,2)-Dp/wp)+.6);var Bm,Im,h1,i1,M1,L1,c1,j1,Hm,t1,Y1=[];for(Dp=0;Dp<2*wp-1;Dp++)Y1[Dp]=[Dp,Dp+1,Dp+1-2*wp,Dp-2*wp];Y1[2*wp-1]=[Dp,Dp+1-2*wp,Dp+1-4*wp,Dp-2*wp];let d1=Pt.updateGeoGroup();for(la=0;la<Vp;la++){let ag=Pt.groups,Og=!1;var q1,Z1;for(d1=Pt.updateGeoGroup(2*wp),ag!=Pt.groups&&la>0&&(la-=1,Og=!0),L1=Math.round(la*(Dt.length-1)/Vp),M1=h.CC.color(Dt[L1]),H0=D0,Q0=E0,D0=[],E0=[],Kp=[],Ht[0][la].atom!==void 0&&(i1=Ht[0][la].atom,Zo==="oval"?r0=lm:Zo==="rectangle"?r0=hm:Zo==="parabola"&&(r0=q0)),r0||(r0=hm),Dp=0;Dp<wp;Dp++)q1=la<Vp-1?Ht[Dp][la+1].clone().sub(Ht[Dp][la]):Ht[Dp][la-1].clone().sub(Ht[Dp][la]).negate(),Z1=Dp<wp-1?Ht[Dp+1][la].clone().sub(Ht[Dp][la]):Ht[Dp-1][la].clone().sub(Ht[Dp][la]).negate(),Kp[Dp]=Z1.cross(q1).normalize().multiplyScalar(Er*r0[Dp]);for(Dp=0;Dp<wp;Dp++)D0[Dp]=Ht[Dp][la].clone().add(Kp[Dp].clone().negate());for(Dp=0;Dp<wp;Dp++)E0[Dp]=Ht[Dp][la].clone().add(Kp[Dp]);for(c1=d1.vertexArray,j1=d1.colorArray,Hm=d1.faceArray,Im=3*(Bm=d1.vertices),Dp=0;Dp<wp;Dp++)c1[Im+3*Dp+0]=D0[Dp].x,c1[Im+3*Dp+1]=D0[Dp].y,c1[Im+3*Dp+2]=D0[Dp].z;for(Dp=0;Dp<wp;Dp++)c1[Im+3*Dp+0+3*wp]=E0[wp-1-Dp].x,c1[Im+3*Dp+1+3*wp]=E0[wp-1-Dp].y,c1[Im+3*Dp+2+3*wp]=E0[wp-1-Dp].z;for(Dp=0;Dp<2*wp;++Dp)j1[Im+3*Dp+0]=M1.r,j1[Im+3*Dp+1]=M1.g,j1[Im+3*Dp+2]=M1.b;if(la>0&&!Og){for(Dp=0;Dp<2*wp;Dp++)t1=[Bm+Y1[Dp][0],Bm+Y1[Dp][1],Bm+Y1[Dp][2],Bm+Y1[Dp][3]],Hm[h1=d1.faceidx]=t1[0],Hm[h1+1]=t1[1],Hm[h1+2]=t1[3],Hm[h1+3]=t1[1],Hm[h1+4]=t1[2],Hm[h1+5]=t1[3],d1.faceidx+=6;if(i1.clickable||i1.hoverable){var x1=[];for(Dp in x1.push(new u.Triangle(H0[0],D0[0],D0[wp-1])),x1.push(new u.Triangle(H0[0],D0[wp-1],H0[wp-1])),x1.push(new u.Triangle(H0[wp-1],D0[wp-1],E0[wp-1])),x1.push(new u.Triangle(H0[wp-1],E0[wp-1],Q0[wp-1])),x1.push(new u.Triangle(E0[0],Q0[0],Q0[wp-1])),x1.push(new u.Triangle(E0[wp-1],E0[0],Q0[wp-1])),x1.push(new u.Triangle(D0[0],H0[0],Q0[0])),x1.push(new u.Triangle(E0[0],D0[0],Q0[0])),x1)i1.intersectionShape.triangle.push(x1[Dp])}}d1.vertices+=2*wp}for(c1=d1.vertexArray,j1=d1.colorArray,Hm=d1.faceArray,Im=3*(Bm=d1.vertices),h1=d1.faceidx,la=0;la<wp-1;la++)t1=[la,la+1,2*wp-2-la,2*wp-1-la],Hm[h1=d1.faceidx]=t1[0],Hm[h1+1]=t1[1],Hm[h1+2]=t1[3],Hm[h1+3]=t1[1],Hm[h1+4]=t1[2],Hm[h1+5]=t1[3],d1.faceidx+=6;for(la=0;la<wp-1;la++)t1=[Bm-1-la,Bm-2-la,Bm-2*wp+la+1,Bm-2*wp+la],Hm[h1=d1.faceidx]=t1[0],Hm[h1+1]=t1[1],Hm[h1+2]=t1[3],Hm[h1+3]=t1[1],Hm[h1+4]=t1[2],Hm[h1+5]=t1[3],d1.faceidx+=6})(d0,y,N,K,ne,0,lt)}function Y(d0){return d0&&d0.elem==="C"&&d0.atom==="CA"}function ie(d0,y){if(d0&&y&&d0.chain===y.chain){if(!(d0.hetflag||y.hetflag||d0.reschain!==y.reschain||d0.resi!==y.resi&&d0.resi!==y.resi-1))return!0;if(d0.resi<y.resi){var N=d0.x-y.x,K=d0.y-y.y,ne=d0.z-y.z,Rt=N*N+K*K+ne*ne;if(d0.atom=="CA"&&y.atom=="CA"&&Rt<16||(d0.atom=="P"||y.atom=="P")&&Rt<64)return!0}}return!1}function se(d0,y,N,K,ne){if(y!=null&&y.vertices!=0){ne&&(y.initTypedArrays(),y.setUpNormals());var Rt=new l.MeshDoubleLambertMaterial;Rt.vertexColors=l.Coloring.FaceColors,typeof N=="number"&&N>=0&&N<1&&(Rt.transparent=!0,Rt.opacity=N),Rt.outline=K;var lt=new l.Mesh(y,Rt);d0.add(lt)}}function ct(d0,y,N,K,ne,Rt,lt,Pt,Ht){var Dt,Zt,Er,Np,Zo,la;if(K&&ne&&lt){var Dp=ne.sub(K);Dp.normalize();var wp=Pt[Ht];for(Zt=Ht+1;Zt<Pt.length&&(wp=Pt[Zt]).atom!=lt.atom;Zt++);if((wp=wp?new c.Vector3(wp.x,wp.y,wp.z):new c.Vector3(0,0,0)).sub(K),lt.ss==="arrow start"){var Vp=wp.clone().multiplyScalar(.3).cross(ne);K.add(Vp);var Kp=wp.clone().cross(Dp).normalize();Dp.rotateAboutVector(Kp,.43)}for(lt.style.cartoon.ribbon?Dt=lt.style.cartoon.thickness||J:lt.style.cartoon.width?Dt=lt.style.cartoon.width:lt.ss==="c"?Dt=lt.atom==="P"?k:R:lt.ss==="arrow start"?(Dt=W,Zo=!0):Dt=lt.ss==="arrow end"||lt.ss==="h"&&lt.style.cartoon.tubes||lt.ss==="tube start"?R:W,Rt!=null&&Dp.dot(Rt)<0&&Dp.negate(),Dp.multiplyScalar(Dt),Zt=0;Zt<y;Zt++)Er=2*Zt/(y-1)-1,(Np=new c.Vector3(K.x+Er*Dp.x,K.y+Er*Dp.y,K.z+Er*Dp.z)).atom=lt,lt.ss==="s"&&(Np.smoothen=!0),d0[Zt].push(Np);if(Zo)for(Dp.multiplyScalar(2),Zt=0;Zt<y;Zt++)Er=2*Zt/(y-1)-1,(Np=new c.Vector3(K.x+Er*Dp.x,K.y+Er*Dp.y,K.z+Er*Dp.z)).atom=lt,Np.smoothen=!1,Np.skip=!0,d0[Zt].push(Np);return la=lt.style.cartoon.style||"default",d0.style?d0.style!=la&&(console.log("Warning: a cartoon chain's strand-style is ambiguous"),d0.style="default"):d0.style=la,lt.ss!=="arrow start"&&lt.ss!=="arrow end"||(lt.ss="s"),Zo}}const ae={C:!0,CA:!0,O:!0,P:!0,OP2:!0,O2P:!0,"O5'":!0,"O3'":!0,"C5'":!0,"C2'":!0,"O5*":!0,"O3*":!0,"C5*":!0,"C2*":!0,N1:!0,N3:!0},st={DA:!0,DG:!0,A:!0,G:!0},Ct={DT:!0,DC:!0,U:!0,C:!0,T:!0},$t={DA:!0,DG:!0,A:!0,G:!0,DT:!0,DC:!0,U:!0,C:!0,T:!0};function jo(d0,y,N,K=10){let ne=K,Rt=K;var lt,Pt,Ht,Dt,Zt,Er,Np,Zo,la,Dp,wp,Vp,Kp,r0,D0,E0,H0,Q0,lm=new l.Geometry(!0),hm=new l.Geometry(!0),q0=[],Bm=[],Im=1,h1=!1,i1={};for(var M1 in v.Gradient.builtinGradients)v.Gradient.builtinGradients.hasOwnProperty(M1)&&(i1[M1]=new v.Gradient.builtinGradients[M1](N[1],N[0]));var L1=function(_g,Hg){return N&&Hg.color==="spectrum"?Hg.colorscheme in i1?i1[Hg.colorscheme].valueToHex(_g.resi):i1.sinebow.valueToHex(_g.resi):(0,g.getColorFromStyle)(_g,Hg).getHex()};for(Zo=0;Zo<ne;Zo++)Bm[Zo]=[];var c1=!1,j1=!1,Hm=[];for(Zo in y){if((Dt=y[Zo]).elem==="C"&&Dt.atom==="CA"){var t1=ie(Ht,Dt);t1&&Dt.ss==="s"?c1=!0:c1&&(Ht&&Pt&&Ht.style.cartoon.arrows&&Pt.style.cartoon.arrows&&(Ht.ss="arrow end",Pt.ss="arrow start"),c1=!1),t1&&(Ht.ss==="h"||Ht.ss=="tube start")&&Ht.style.cartoon.tubes?!j1&&Ht.ss!="tube start"&&Dt.style.cartoon.tubes&&(Dt.ss="tube start",j1=!0):j1&&(Ht.ss==="tube start"?Ht.ss="tube end":Pt&&Pt.style.cartoon.tubes&&(Pt.ss="tube end"),j1=!1),Pt=Ht,Ht=Dt}Dt&&Dt.atom in ae&&Hm.push(Dt)}j1&&Ht.style.cartoon.tubes&&(Ht.ss="tube end",j1=!1);var Y1=function(_g){Bm[0].length>0&&V(hm,Bm,q0,Rt,Np,0,Bm.style);var Hg=[],vv=null;if(_g){for(Zo=0;Zo<ne;Zo++)Hg[Zo]=Bm[Zo][Bm[Zo].length-1];vv=q0[q0.length-1]}for(Bm=[],Zo=0;Zo<ne;Zo++)Bm[Zo]=[];if(q0=[],_g){for(Zo=0;Zo<ne;Zo++)Bm[Zo].push(Hg[Zo]);q0.push(vv)}se(d0,hm,Im,h1,!0),se(d0,lm,Im,h1,!1),hm=new l.Geometry(!0),lm=new l.Geometry(!0)};Ht=void 0;let d1=[];for(var q1=0;q1<Hm.length;q1++){var Z1=(Dt=Hm[q1]).resn.trim(),x1=Z1 in $t;if(Im=1,lt=Dt.style.cartoon,Ht&&Ht.style.cartoon&&(Im=Ht.style.cartoon.opacity),Ht&&Ht.style.cartoon&&Ht.style.cartoon.outline&&(h1=Ht.style.cartoon.outline),!Ht||!Ht.style.cartoon||Dt.style.cartoon&&Ht.style.cartoon.opacity==Dt.style.cartoon.opacity||Y1(Ht.chain==Dt.chain),Ht&&Dt&&!ie(Ht,Dt)&&Ht.chain&&Ht.chain==Dt.chain&&!Ht.hetflag&&!Dt.hetflag&&Ht.reschain+1==Dt.reschain&&d1.push([Ht,Dt]),lt.style==="trace"){if(!Dt.hetflag&&(Dt.elem==="C"&&Dt.atom==="CA"||x1&&Dt.atom==="P"||Dt.atom==="BB")){if(Er=L1(Dt,lt),Np=(0,g.isNumeric)(lt.thickness)?lt.thickness:J,ie(Ht,Dt))if(Er==Zt){var ag=h.CC.color(Er);a.drawCylinder(lm,Ht,Dt,Np,ag,2,2)}else{var Og=new c.Vector3().addVectors(Ht,Dt).multiplyScalar(.5),eg=h.CC.color(Zt),C1=h.CC.color(Er);a.drawCylinder(lm,Ht,Og,Np,eg,2,0),a.drawCylinder(lm,Og,Dt,Np,C1,0,2)}if((Dt.clickable===!0||Dt.hoverable)&&Dt.intersectionShape!==void 0){var Bg=new c.Vector3(Dt.x,Dt.y,Dt.z);Dt.intersectionShape.sphere.push(new u.Sphere(Bg,Np))}Ht=Dt,Zt=Er}}else{if(Y(Dt)||x1&&(Dt.atom==="P"||Dt.atom.indexOf("O5")==0)){if(Q0)if(Dt.ss==="tube end")Q0=!1,H0=new c.Vector3(Dt.x,Dt.y,Dt.z),a.drawCylinder(lm,E0,H0,2,h.CC.color(Zt),1,1),Dt.ss="h";else{if(Ht.chain==Dt.chain&&Ht.ss!=="tube end")continue;Q0=!1,Ht.ss="h",H0=new c.Vector3(Ht.x,Ht.y,Ht.z),a.drawCylinder(lm,E0,H0,2,h.CC.color(Zt),1,1)}if(Ht&&(!ie(Ht,Dt)||Ht.ss==="tube start")){for(Ht.ss==="tube start"&&(Q0=!0,E0=new c.Vector3(Ht.x,Ht.y,Ht.z),Ht.ss="h"),D0&&(r0=Vp?new c.Vector3().addVectors(Ht,Vp).multiplyScalar(.5):new c.Vector3(Ht.x,Ht.y,Ht.z),a.drawCylinder(lm,r0,D0,q,h.CC.color(D0.color),0,2),ct(Bm,ne,!0,Vp,Kp,wp,Ht,Hm,q1),q0.push(Er),r0=null,D0=null),Bm[0].length>0&&V(hm,Bm,q0,Rt,Np,0,Bm.style),Bm=[],Zo=0;Zo<ne;Zo++)Bm[Zo]=[];q0=[]}if(Ht===void 0||Ht.rescode!=Dt.rescode||Ht.resi!=Dt.resi){if(D0&&Ht!=null){var xg=(r0=new c.Vector3().addVectors(Ht,Dt).multiplyScalar(.5)).clone().sub(D0).multiplyScalar(.02);r0.add(xg),a.drawCylinder(lm,r0,D0,q,h.CC.color(D0.color),0,2),r0=null,D0=null}Er=L1(Dt,lt),q0.push(Er),Np=(0,g.isNumeric)(lt.thickness)?lt.thickness:J,Ht=Dt,(la=new c.Vector3(Ht.x,Ht.y,Ht.z)).resi=Ht.resi,Zt=Er}Dt.clickable!==!0&&Dt.hoverable!==!0||Dt.intersectionShape!==void 0&&Dt.intersectionShape.triangle!==void 0||(Dt.intersectionShape={sphere:null,cylinder:[],line:[],triangle:[]})}else Ht!=null&&(Y(Ht)&&Dt.atom==="O"||x1&&Ht.atom==="P"&&(Dt.atom==="OP2"||Dt.atom==="O2P")||x1&&Ht.atom.indexOf("O5")==0&&Dt.atom.indexOf("C5")==0)?((Dp=new c.Vector3(Dt.x,Dt.y,Dt.z)).resi=Dt.resi,Dt.atom!=="OP2"&&Dt.atom!=="O2P"||(Kp=new c.Vector3(Dt.x,Dt.y,Dt.z))):x1&&Dt.atom.indexOf("O3")==0?Vp=new c.Vector3(Dt.x,Dt.y,Dt.z):(Dt.atom==="N1"&&Z1 in st||Dt.atom==="N3"&&Z1 in Ct)&&((D0=new c.Vector3(Dt.x,Dt.y,Dt.z)).color=(0,g.getColorFromStyle)(Dt,lt).getHex());Dp&&la&&Dp.resi===la.resi&&(ct(Bm,ne,!0,la,Dp,wp,Ht,Hm,q1),wp=Dp,la=null,Dp=null,q0.push(Er))}}D0&&(r0=Vp?new c.Vector3().addVectors(Ht,Vp).multiplyScalar(.5):new c.Vector3(Ht.x,Ht.y,Ht.z),a.drawCylinder(lm,r0,D0,q,h.CC.color(D0.color),0,2),ct(Bm,ne,!0,Vp,Kp,wp,Ht,Hm,q1),q0.push(Er)),Y1(!1);var Ig=function(_g,Hg){if(_g.style.cartoon.gapcutoff&&_g.style.cartoon.gapcutoff==Hg.style.cartoon.gapcutoff){let jv=_g.style.cartoon.gapcutoff,Uv=Hg.resi-_g.resi;if(Uv>0&&Uv<jv){let vy=.25,ay=Hg.x-_g.x,Tv=Hg.y-_g.y,yy=Hg.z-_g.z,ey=Math.sqrt(ay*ay+Tv*Tv+yy*yy),iy=ey/(2*Uv),xy=new c.Vector3(_g.x,_g.y,_g.z),Ly=ey/iy,_y=new c.Vector3((Hg.x-_g.x)/Ly,(Hg.y-_g.y)/Ly,(Hg.z-_g.z)/Ly);xy.add({x:_y.x/2,y:_y.y/2,z:_y.z/2});let Iy=xy.clone().add(_y);_y.multiplyScalar(2);let Dv=(0,g.extend)({},_g);for(var vv=0;vv<Uv;vv++){Dv.resi+=1;let Wv=L1(Dv,Dv.style.cartoon);a.drawCylinder(lm,xy,Iy,vy,h.CC.color(Wv),n.FLAT,n.FLAT),xy.add(_y),Iy.add(_y)}Y1(!1)}}};for(let _g of d1)Ig(_g[0],_g[1])}var Lp=r(797),Mn=r(865),sa=r(392);function re(d0,y){for(var N=[[]],K=(y=y||{}).assignBonds===void 0||y.assignBonds,ne=d0.trimStart().split(/\r?\n|\r/);ne.length>0&&!(ne.length<3);){var Rt=parseInt(ne[0]);if(isNaN(Rt)||Rt<=0||ne.length<Rt+2)break;var lt=/Lattice\s*=\s*["\{\}]([^"\{\}]+)["\{\}]\s*/gi.exec(ne[1]);if(lt!=null&&lt.length>1){var Pt=new Float32Array(lt[1].split(/\s+/)),Ht=new l.Matrix3(Pt[0],Pt[3],Pt[6],Pt[1],Pt[4],Pt[7],Pt[2],Pt[5],Pt[8]);N.modelData=[{cryst:{matrix:Ht}}]}for(var Dt=2,Zt=N[N.length-1].length,Er=Zt+Rt,Np=Zt;Np<Er;Np++){var Zo=ne[Dt++].trim().split(/\s+/),la={};la.serial=Np;var Dp=Zo[0];la.atom=la.elem=Dp[0].toUpperCase()+Dp.substring(1,2).toLowerCase(),la.x=parseFloat(Zo[1]),la.y=parseFloat(Zo[2]),la.z=parseFloat(Zo[3]),la.hetflag=!0,la.bonds=[],la.bondOrder=[],la.properties={},N[N.length-1][Np]=la,Zo.length>=7&&(la.dx=parseFloat(Zo[4]),la.dy=parseFloat(Zo[5]),la.dz=parseFloat(Zo[6]))}if(!y.multimodel)break;N.push([]),ne.splice(0,Dt)}if(K)for(let Vp=0;Vp<N.length;Vp++)(0,sa.assignBonds)(N[Vp],y);if(y.onemol){var wp=N;(N=[]).push(wp[0]);for(let Vp=1;Vp<wp.length;Vp++){let Kp=N[0].length;for(let r0=0;r0<wp[Vp].length;r0++){let D0=wp[Vp][r0];for(let E0=0;E0<D0.bonds.length;E0++)D0.bonds[E0]=D0.bonds[E0]+Kp;D0.index=N[0].length,D0.serial=N[0].length,N[0].push(D0)}}}return N}function $o(d0,y){var N="V2000",K=d0.split(/\r?\n|\r/);return K.length>3&&K[3].length>38&&(N=K[3].substring(34,39)),N==="V2000"?(function(ne,Rt){var lt=[[]],Pt=!1;for(Rt.keepH!==void 0&&(Pt=!Rt.keepH);ne.length>0&&!(ne.length<4);){var Ht=parseInt(ne[3].substring(0,3));if(isNaN(Ht)||Ht<=0)break;var Dt=parseInt(ne[3].substring(3,6)),Zt=4;if(ne.length<4+Ht+Dt)break;var Er,Np,Zo=[],la=lt[lt.length-1].length,Dp=la+Ht;for(Er=la;Er<Dp;Er++,Zt++){var wp={},Vp=(Np=ne[Zt]).substring(31,34).replace(/ /g,"");wp.atom=wp.elem=Vp[0].toUpperCase()+Vp.substring(1).toLowerCase(),wp.elem==="H"&&Pt||(wp.serial=Er,Zo[Er]=lt[lt.length-1].length,wp.x=parseFloat(Np.substring(0,10)),wp.y=parseFloat(Np.substring(10,20)),wp.z=parseFloat(Np.substring(20,30)),wp.hetflag=!0,wp.bonds=[],wp.bondOrder=[],wp.properties={},wp.index=lt[lt.length-1].length,lt[lt.length-1].push(wp))}for(Er=0;Er<Dt;Er++,Zt++){Np=ne[Zt];var Kp=Zo[parseInt(Np.substring(0,3))-1+la],r0=Zo[parseInt(Np.substring(3,6))-1+la],D0=parseFloat(Np.substring(6));Kp!==void 0&&r0!==void 0&&(lt[lt.length-1][Kp].bonds.push(r0),lt[lt.length-1][Kp].bondOrder.push(D0),lt[lt.length-1][r0].bonds.push(Kp),lt[lt.length-1][r0].bondOrder.push(D0))}if(!Rt.multimodel)break;for(Rt.onemol||lt.push([]);ne[Zt]!=="$$$$"&&Zt<ne.length;)Zt++;ne.splice(0,++Zt)}return lt})(K,y):N==="V3000"?(function(ne,Rt){var lt=[[]],Pt=!1;for(Rt.keepH!==void 0&&(Pt=!Rt.keepH);ne.length>0&&!(ne.length<8)&&ne[4].startsWith("M  V30 BEGIN CTAB")&&ne[5].startsWith("M  V30 COUNTS")&&!(ne[5].length<14);){var Ht=ne[5].substring(13).match(/\S+/g);if(Ht.length<2)break;var Dt=parseInt(Ht[0]);if(isNaN(Dt)||Dt<=0)break;var Zt=parseInt(Ht[1]),Er=7;if(ne.length<8+Dt+Zt)break;var Np,Zo=[],la=lt[lt.length-1].length,Dp=la+Dt;for(Np=la;Np<Dp;Np++,Er++){var wp=ne[Er].substring(6).match(/\S+/g);if(wp.length>4){var Vp={},Kp=wp[1].replace(/ /g,"");Vp.atom=Vp.elem=Kp[0].toUpperCase()+Kp.substring(1).toLowerCase(),Vp.elem==="H"&&Pt||(Vp.serial=Np,Zo[Np]=lt[lt.length-1].length,Vp.x=parseFloat(wp[2]),Vp.y=parseFloat(wp[3]),Vp.z=parseFloat(wp[4]),Vp.hetflag=!0,Vp.bonds=[],Vp.bondOrder=[],Vp.properties={},Vp.index=lt[lt.length-1].length,lt[lt.length-1].push(Vp))}}if(ne[Er]!=="M  V30 END ATOM"||(Er++,Zt===0||ne[Er]!=="M  V30 BEGIN BOND"))break;for(Er++,Np=0;Np<Zt;Np++,Er++){var r0=ne[Er].substring(6).match(/\S+/g);if(r0.length>3){var D0=Zo[parseInt(r0[2])-1+la],E0=Zo[parseInt(r0[3])-1+la],H0=parseFloat(r0[1]);D0!==void 0&&E0!==void 0&&(lt[lt.length-1][D0].bonds.push(E0),lt[lt.length-1][D0].bondOrder.push(H0),lt[lt.length-1][E0].bonds.push(D0),lt[lt.length-1][E0].bondOrder.push(H0))}}if(!Rt.multimodel)break;for(Rt.onemol||lt.push([]);ne[Er]!=="$$$$"&&Er<ne.length;)Er++;ne.splice(0,++Er)}return lt})(K,y):[[""]]}function qo(d0,y){var N=[[]];typeof d0=="string"&&(d0=JSON.parse(d0));for(var K=d0.m,ne=K[0].a,Rt=K[0].b,lt=K[0].s,Pt=y!==void 0&&y.parseStyle!==void 0?y.parseStyle:lt!==void 0,Ht=N[N.length-1].length,Dt=0;Dt<ne.length;Dt++){var Zt=ne[Dt],Er={};Er.id=Zt.i,Er.x=Zt.x,Er.y=Zt.y,Er.z=Zt.z||0,Er.bonds=[],Er.bondOrder=[];var Np=Zt.l||"C";Er.elem=Np[0].toUpperCase()+Np.substring(1).toLowerCase(),Er.serial=N[N.length-1].length,Pt&&(Er.style=lt[Zt.s||0]),N[N.length-1].push(Er)}for(let Zo=0;Zo<Rt.length;Zo++){let la=Rt[Zo],Dp=la.b+Ht,wp=la.e+Ht,Vp=la.o||1,Kp=N[N.length-1][Dp],r0=N[N.length-1][wp];Kp.bonds.push(wp),Kp.bondOrder.push(Vp),r0.bonds.push(Dp),r0.bondOrder.push(Vp)}return N}function Kt(d0,y){(function(Dt,Zt){const Er=Zt||3.2,Np=Er*Er,Zo=[];for(let la=0,Dp=Dt.length;la<Dp;la++){Dt[la].index=la;const wp=Dt[la];wp.hetflag||wp.atom!=="N"&&wp.atom!=="O"||(Zo.push(wp),wp.hbondOther=null,wp.hbondDistanceSq=Number.POSITIVE_INFINITY)}Zo.sort(function(la,Dp){return la.z-Dp.z});for(let la=0,Dp=Zo.length;la<Dp;la++){const wp=Zo[la];for(let Vp=la+1;Vp<Dp;Vp++){const Kp=Zo[Vp],r0=Kp.z-wp.z;if(r0>Er)break;if(Kp.atom==wp.atom)continue;const D0=Math.abs(Kp.y-wp.y);if(D0>Er)continue;const E0=Math.abs(Kp.x-wp.x);if(E0>Er)continue;const H0=E0*E0+D0*D0+r0*r0;H0>Np||Kp.chain==wp.chain&&Math.abs(Kp.resi-wp.resi)<4||(H0<wp.hbondDistanceSq&&(wp.hbondOther=Kp,wp.hbondDistanceSq=H0),H0<Kp.hbondDistanceSq&&(Kp.hbondOther=wp,Kp.hbondDistanceSq=H0))}}})(d0,y);const N={};let K,ne,Rt,lt,Pt,Ht;for(K=0,ne=d0.length;K<ne;K++)if(Pt=d0[K],N[Pt.chain]===void 0&&(N[Pt.chain]=[]),isFinite(Pt.hbondDistanceSq)){const Dt=Pt.hbondOther;N[Dt.chain]===void 0&&(N[Dt.chain]=[]),Math.abs(Dt.resi-Pt.resi)===4&&(N[Pt.chain][Pt.resi]="h")}for(Rt in N)for(lt=1;lt<N[Rt].length-1;lt++){const Dt=N[Rt][lt-1],Zt=N[Rt][lt+1];Ht=N[Rt][lt],Dt=="h"&&Dt==Zt&&Ht!=Dt&&(N[Rt][lt]=Dt)}for(K=0,ne=d0.length;K<ne;K++)Pt=d0[K],isFinite(Pt.hbondDistanceSq)&&N[Pt.chain][Pt.resi]!="h"&&Pt.ss!=="h"&&(N[Pt.chain][Pt.resi]="maybesheet");for(let Dt=0,Zt=d0.length;Dt<Zt;Dt++)if(Pt=d0[Dt],isFinite(Pt.hbondDistanceSq)&&N[Pt.chain][Pt.resi]=="maybesheet"){let Er=Pt.hbondOther,Np=N[Er.chain][Er.resi];Np!="maybesheet"&&Np!="s"||(N[Pt.chain][Pt.resi]="s",N[Er.chain][Er.resi]="s")}for(let Dt in N){for(let Zt=1;Zt<N[Dt].length-1;Zt++){const Er=N[Dt][Zt-1],Np=N[Dt][Zt+1];Ht=N[Dt][Zt],Er=="s"&&Er==Np&&Ht!=Er&&(N[Dt][Zt]=Er)}for(let Zt=0;Zt<N[Dt].length;Zt++){const Er=N[Dt][Zt];Er!="h"&&Er!="s"||N[Dt][Zt-1]!=Er&&N[Dt][Zt+1]!=Er&&delete N[Dt][Zt]}}for(K=0,ne=d0.length;K<ne;K++)Pt=d0[K],Ht=N[Pt.chain][Pt.resi],delete Pt.hbondOther,delete Pt.hbondDistanceSq,Ht!==void 0&&Ht!=="maybesheet"&&(Pt.ss=Ht,N[Pt.chain][Pt.resi-1]!=Ht&&(Pt.ssbegin=!0),N[Pt.chain][Pt.resi+1]!=Ht&&(Pt.ssend=!0))}function i0(d0,y,N,K){const ne=!N.duplicateAssemblyAtoms,Rt=y.length;let lt=Rt,Pt=-1,Ht=null,Dt=null;(N.normalizeAssembly||N.wrapAtoms)&&K&&(Ht=(0,l.conversionMatrix3)(K.a,K.b,K.c,K.alpha,K.beta,K.gamma),Dt=new l.Matrix3,Dt.getInverse3(Ht));let Zt=function(Zo){let la=Zo.clone().applyMatrix3(Dt);const Dp=[la.x,la.y,la.z],wp=[0,0,0];for(let Kp=0;Kp<3;Kp++){for(;Dp[Kp]<-.001;)Dp[Kp]+=1,wp[Kp]+=1;for(;Dp[Kp]>1.001;)Dp[Kp]-=1,wp[Kp]-=1}const Vp=new l.Vector3(wp[0],wp[1],wp[2]);return Vp.applyMatrix3(Ht),Vp};if(N.normalizeAssembly&&K)for(let Zo=0;Zo<d0.length;Zo++){const la=new l.Vector3(0,0,0);for(let wp=0;wp<Rt;wp++){const Vp=new l.Vector3(y[wp].x,y[wp].y,y[wp].z);Vp.applyMatrix4(d0[Zo]),la.add(Vp)}la.divideScalar(Rt);const Dp=Zt(la);d0[Zo].isNearlyIdentity()&&Dp.lengthSq()>.001&&(Pt=Zo),d0[Zo].translate(Dp)}if(ne){if(d0.length>1)for(let Zo=0;Zo<y.length;Zo++){var Er=[];for(let la=0;la<d0.length;la++)if(!d0[la].isNearlyIdentity()){var Np=new l.Vector3;Np.set(y[Zo].x,y[Zo].y,y[Zo].z),Np.applyMatrix4(d0[la]),Er.push(Np)}y[Zo].symmetries=Er}}else{for(let Zo=0;Zo<Rt;Zo++)y[Zo].sym=-1;for(let Zo=0;Zo<d0.length;Zo++)if(d0[Zo].isNearlyIdentity()||Pt==Zo)for(let la=0;la<Rt;la++)y[la].sym=Zo;else{let la=new l.Vector3;for(let Dp=0;Dp<Rt;Dp++){const wp=[];for(let Kp=0;Kp<y[Dp].bonds.length;Kp++)wp.push(y[Dp].bonds[Kp]+lt);if(la.set(y[Dp].x,y[Dp].y,y[Dp].z),la.applyMatrix4(d0[Zo]),N.wrapAtoms&&K){let Kp=Zt(la);la.add(Kp)}const Vp={};for(const Kp in y[Dp])Vp[Kp]=y[Dp][Kp];Vp.x=la.x,Vp.y=la.y,Vp.z=la.z,Vp.bonds=wp,Vp.sym=Zo,Vp.index=y.length,y.push(Vp)}lt=y.length}if(N.wrapAtoms&&K){let Zo=new l.Vector3;for(let la=0;la<Rt;la++){Zo.set(y[la].x,y[la].y,y[la].z);let Dp=Zt(Zo);Zo.add(Dp),y[la].x=Zo.x,y[la].y=Zo.y,y[la].z=Zo.z}}if(Pt>=0){const Zo=new l.Vector3;for(let la=0;la<Rt;la++)Zo.set(y[la].x,y[la].y,y[la].z),Zo.applyMatrix4(d0[Pt]),y[la].x=Zo.x,y[la].y=Zo.y,y[la].z=Zo.z}d0.length=0}}var Up=r(408);const l0=new Set(["ABU","ACD","ALA","ALB","ALI","ARG","AR0","ASN","ASP","ASX","BAS","CYS","CYH","CYX","CSS","CSH","GLN","GLU","GLX","GLY","HIS","HIE","HID","HIP","HYP","ILE","ILU","LEU","LYS","MET","PCA","PGA","PHE","PR0","PRO","PRZ","SER","THR","TRP","TYR","VAL","A","1MA","C","5MC","OMC","G","1MG","2MG","M2G","7MG","OMG","YG","I","T","U","+U","H2U","5MU","PSU","ACE","F0R","H2O","HOH","WAT"]);function y0(d0,y){const N=[],K=[];for(let Pt=0,Ht=d0.length;Pt<Ht;Pt++){const Dt=d0[Pt];Dt.index=Pt,Dt.hetflag||!l0.has(Dt.resn)?K.push(Dt):N.push(Dt)}(0,sa.assignBonds)(K,y),N.sort(function(Pt,Ht){return Pt.chain!==Ht.chain?Pt.chain<Ht.chain?-1:1:Pt.resi-Ht.resi});let ne,Rt=-1,lt=-1;for(let Pt=0,Ht=N.length;Pt<Ht;Pt++){const Dt=N[Pt];Dt.resi!==Rt&&(Rt=Dt.resi,ne||lt++,ne=!1),Dt.reschain=lt;for(let Zt=Pt+1;Zt<N.length;Zt++){const Er=N[Zt];if(Er.chain!==Dt.chain||Er.resi-Dt.resi>1)break;(0,Up.areConnected)(Dt,Er,y)&&(Dt.bonds.indexOf(Er.index)===-1&&(Dt.bonds.push(Er.index),Dt.bondOrder.push(1),Er.bonds.push(Dt.index),Er.bondOrder.push(1)),Dt.resi!==Er.resi&&(ne=!0))}}}const kp=function(d0,y,N,K){return new l.Vector3(y,N,K).applyMatrix3(d0)};function u0(d0,y={}){const N=[],K=!y.doAssembly,ne=N.modelData=[],Rt=y.assignBonds===void 0||y.assignBonds;function lt(Np,Zo){const la=[];let Dp=0,wp=0;for(;wp<Np.length;){for(;Np.substring(wp,wp+Zo.length)!==Zo&&wp<Np.length;)if(Np[wp]==="'"){for(wp++;wp<Np.length&&Np[wp]!=="'";)wp++;for(;Np.substring(wp,wp+Zo.length)!==Zo&&wp<Np.length;)wp++}else if(Np[wp]==='"'){for(wp++;wp<Np.length&&Np[wp]!=='"';)wp++;wp++}else wp++;la.push(Np.substring(Dp,wp)),Dp=wp+=Zo.length}return la}const Pt=d0.split(/\r?\n|\r/),Ht=[];let Dt=!1;for(let Np=0;Np<Pt.length;Np++){var Zt=Pt[Np].split("#")[0];if(Dt?Zt[0]===";"&&(Dt=!1):Zt[0]===";"&&(Dt=!0),Dt||Zt!==""){if(!Dt&&(Zt=Zt.trim())[0]==="_"){const Zo=Zt.split(/\s/)[0].indexOf(".");if(Zo>-1){let la=Zt.split("");la[Zo]="_",Zt=(Zt=la.join("")).substring(0,Zo)+"_"+Zt.substring(Zo+1)}}Ht.push(Zt)}}let Er=0;for(;Er<Ht.length;){for(;!Ht[Er].startsWith("data_")||Ht[Er]==="data_global";)Er++;Er++;const Np={};for(;Er<Ht.length&&!Ht[Er].startsWith("data_");)if(Ht[Er][0]===void 0)Er++;else if(Ht[Er][0]==="_"){const wp=Ht[Er].split(/\s/)[0].toLowerCase(),Vp=Np[wp]=Np[wp]||[],Kp=Ht[Er].substring(Ht[Er].indexOf(wp)+wp.length);if(Kp==="")if(Er++,Ht[Er][0]===";"){let r0=Ht[Er].substring(1);for(Er++;Ht[Er]!==";";)r0=r0+`
`+Ht[Er],Er++;Vp.push(r0)}else Vp.push(Ht[Er]);else Vp.push(Kp.trim());Er++}else if(Ht[Er].substring(0,5)==="loop_"){Er++;const wp=[];for(;Ht[Er]===""||Ht[Er][0]==="_";){if(Ht[Er]!==""){let Kp=Ht[Er].split(/\s/)[0].toLowerCase(),r0=Np[Kp]=Np[Kp]||[];wp.push(r0)}Er++}let Vp=0;for(;Er<Ht.length&&Ht[Er][0]!=="_"&&!Ht[Er].startsWith("loop_")&&!Ht[Er].startsWith("data_");){let Kp=lt(Ht[Er]," ");for(let r0=0;r0<Kp.length;r0++)Kp[r0]!==""&&(wp[Vp].push(Kp[r0]),Vp=(Vp+1)%wp.length);Er++}}else Er++;ne.push({symmetries:[]}),N.push([]);const Zo=Np._atom_site_id!==void 0?Np._atom_site_id.length:Np._atom_site_label.length;let la;if(Np._cell_length_a!==void 0){const wp=parseFloat(Np._cell_length_a),Vp=parseFloat(Np._cell_length_b),Kp=parseFloat(Np._cell_length_c),r0=parseFloat(Np._cell_angle_alpha)||90,D0=parseFloat(Np._cell_angle_beta)||90,E0=parseFloat(Np._cell_angle_gamma)||90;la=(0,l.conversionMatrix3)(wp,Vp,Kp,r0,D0,E0),ne[ne.length-1].cryst={a:wp,b:Vp,c:Kp,alpha:r0,beta:D0,gamma:E0}}for(let wp=0;wp<Zo;wp++){if(Np._atom_site_group_pdb!==void 0&&Np._atom_site_group_pdb[wp]==="TER")continue;const Vp={};if(Np._atom_site_cartn_x!==void 0)Vp.x=parseFloat(Np._atom_site_cartn_x[wp]),Vp.y=parseFloat(Np._atom_site_cartn_y[wp]),Vp.z=parseFloat(Np._atom_site_cartn_z[wp]);else{const r0=kp(la,parseFloat(Np._atom_site_fract_x[wp]),parseFloat(Np._atom_site_fract_y[wp]),parseFloat(Np._atom_site_fract_z[wp]));Vp.x=r0.x,Vp.y=r0.y,Vp.z=r0.z}Vp.chain=Np._atom_site_auth_asym_id?Np._atom_site_auth_asym_id[wp]:Np._atom_site_label_asym_id?Np._atom_site_label_asym_id[wp]:void 0,Vp.lchain=Np._atom_site_label_asym_id?Np._atom_site_label_asym_id[wp]:void 0,Vp.resi=Np._atom_site_auth_seq_id?parseInt(Np._atom_site_auth_seq_id[wp]):Np._atom_site_label_seq_id?Np._atom_site_label_seq_id[wp]:void 0,Vp.resn=Np._atom_site_auth_comp_id?Np._atom_site_auth_comp_id[wp].trim():Np._atom_site_label_comp_id?Np._atom_site_label_comp_id[wp].trim():void 0,Vp.atom=Np._atom_site_auth_atom_id?Np._atom_site_auth_atom_id[wp].replace(/"/gm,""):Np._atom_site_label_atom_id?Np._atom_site_label_atom_id[wp].replace(/"/gm,""):void 0,Vp.hetflag=!Np._atom_site_group_pdb||Np._atom_site_group_pdb[wp]==="HETA"||Np._atom_site_group_pdb[wp]==="HETATM",Np._atom_site_b_iso_or_equiv&&(Vp.b=parseFloat(Np._atom_site_b_iso_or_equiv[wp]));let Kp="X";Np._atom_site_type_symbol?Kp=Np._atom_site_type_symbol[wp].replace(/\(?\+?\d+.*/,""):Np._atom_site_label&&(Kp=Np._atom_site_label[wp].split("_")[0].replace(/\(?\d+.*/,"")),Vp.elem=Kp[0].toUpperCase()+Kp.substring(1,2).toLowerCase(),Vp.bonds=[],Vp.ss="c",Vp.serial=wp,Vp.bondOrder=[],Vp.properties={},N[N.length-1].push(Vp)}if(Np._pdbx_struct_oper_list_id!==void 0&&!K)for(let wp=0;wp<Np._pdbx_struct_oper_list_id.length;wp++){const Vp=parseFloat(Np["_pdbx_struct_oper_list_matrix[1][1]"][wp]),Kp=parseFloat(Np["_pdbx_struct_oper_list_matrix[1][2]"][wp]),r0=parseFloat(Np["_pdbx_struct_oper_list_matrix[1][3]"][wp]),D0=parseFloat(Np["_pdbx_struct_oper_list_vector[1]"][wp]),E0=parseFloat(Np["_pdbx_struct_oper_list_matrix[2][1]"][wp]),H0=parseFloat(Np["_pdbx_struct_oper_list_matrix[2][2]"][wp]),Q0=parseFloat(Np["_pdbx_struct_oper_list_matrix[2][3]"][wp]),lm=parseFloat(Np["_pdbx_struct_oper_list_vector[2]"][wp]),hm=parseFloat(Np["_pdbx_struct_oper_list_matrix[3][1]"][wp]),q0=parseFloat(Np["_pdbx_struct_oper_list_matrix[3][2]"][wp]),Bm=parseFloat(Np["_pdbx_struct_oper_list_matrix[3][3]"][wp]),Im=parseFloat(Np["_pdbx_struct_oper_list_vector[3]"][wp]),h1=new l.Matrix4(Vp,Kp,r0,D0,E0,H0,Q0,lm,hm,q0,Bm,Im);ne[ne.length-1].symmetries.push(h1)}const Dp=function(wp){const Vp=wp.match("-"),Kp=(wp=wp.replace(/[-xyz]/g,"")).split("/");let r0,D0;return D0=Kp[1]===void 0?1:parseInt(Kp[1]),r0=Kp[0]===""?1:parseInt(Kp[0]),r0/D0*(Vp?-1:1)};if(Np._symmetry_equiv_pos_as_xyz!==void 0&&!K)for(let wp=0;wp<Np._symmetry_equiv_pos_as_xyz.length;wp++){const Vp=Np._symmetry_equiv_pos_as_xyz[wp].replace(/["' ]/g,"").split(",").map(function(E0){return E0.replace(/-/g,"+-")});let Kp=new l.Matrix4(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1);for(let E0=0;E0<3;E0++){const H0=Vp[E0].split("+");for(let Q0=0;Q0<H0.length;Q0++){const lm=H0[Q0];if(lm==="")continue;const hm=Dp(lm);lm.match("x")?Kp.elements[E0+0]=hm:lm.match("y")?Kp.elements[E0+4]=hm:lm.match("z")?Kp.elements[E0+8]=hm:Kp.elements[E0+12]=hm}}const r0=la.getMatrix4(),D0=new l.Matrix4().getInverse(r0,!0);Kp=new l.Matrix4().multiplyMatrices(Kp,D0),Kp=new l.Matrix4().multiplyMatrices(r0,Kp),ne[ne.length-1].symmetries.push(Kp)}}for(let Np=0;Np<N.length;Np++)!Rt||y.duplicateAssemblyAtoms&&!y.dontConnectDuplicatedAtoms||y0(N[Np],y),Kt(N[Np],y.hbondCutoff),i0(ne[Np].symmetries,N[Np],y,ne[Np].cryst),y.duplicateAssemblyAtoms&&!y.dontConnectDuplicatedAtoms&&Rt&&y0(N[Np],y);return N}let f0={"C.1":"C",C1:"C","C.2":"C",C2:"C","C.3":"C",C3:"C","C.ar":"C",Car:"C","C.cat":"C",Ccat:"C","H.spc":"H",Hspc:"H","H.t3p":"H",Ht3p:"H","N.1":"N",N1:"N","N.2":"N",N2:"N","N.3":"N",N3:"N","N.4":"N",N4:"N","N.am":"N",Nam:"N","N.ar":"N",Nar:"N","N.p13":"N",Np13:"N","O.2":"O",O2:"O","O.3":"O",O3:"O","O.co2":"O",Oco2:"O","O.spc":"O",Ospc:"O","O.t3p":"O",Ot3p:"O","P.3":"P",P3:"P","S.2":"S",S2:"S","S.3":"S",S3:"S","S.o":"S",So:"S","S.o2":"S",So2:"S"};function v0(d0,y){var N=[[]],K=!1;y.keepH!==void 0&&(K=!y.keepH);var ne=d0.search(/@<TRIPOS>MOLECULE/),Rt=d0.search(/@<TRIPOS>ATOM/);if(ne==-1||Rt==-1)return N;for(var lt=d0.substring(ne).split(/\r?\n|\r/);lt.length>0;){var Pt=[],Ht=lt[2].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),Dt=parseInt(Ht[0]),Zt=0;Ht.length>1&&(Zt=parseInt(Ht[1]));var Er,Np=4;for(Er=3;Er<lt.length;Er++)if(lt[Er]=="@<TRIPOS>ATOM"){Np=Er+1;break}var Zo=N[N.length-1].length,la=Zo+Dt;for(Er=Zo;Er<la;Er++){var Dp={},wp=(Ht=lt[Np++].replace(/^\s+/,"").replace(/\s+/g," ").split(" "))[5];if(wp=f0[wp]!==void 0?f0[wp]:(wp=wp.split(".")[0])[0].toUpperCase()+wp.substring(1).toLowerCase(),Dp.atom=Ht[1],Dp.elem=wp,!(Dp.elem=="H"&&K)){var Vp=N[N.length-1].length,Kp=parseInt(Ht[0]);Dp.serial=Kp,Dp.x=parseFloat(Ht[2]),Dp.y=parseFloat(Ht[3]),Dp.z=parseFloat(Ht[4]),Dp.atom=Ht[5];var r0=parseFloat(Ht[8]);Dp.index=Vp,Dp.bonds=[],Dp.bondOrder=[],Dp.properties={charge:r0,partialCharge:r0},Pt[Kp]=Vp,N[N.length-1].push(Dp)}}for(var D0=!1;Np<lt.length;)if(lt[Np++]=="@<TRIPOS>BOND"){D0=!0;break}if(D0&&Zt)for(Er=0;Er<Zt;Er++){Ht=lt[Np++].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");var E0=parseInt(Ht[1]),H0=N[N.length-1][Pt[E0]],Q0=parseInt(Ht[2]),lm=N[N.length-1][Pt[Q0]],hm=parseInt(Ht[3]);isNaN(hm)&&(hm=1),H0!==void 0&&lm!==void 0&&(H0.bonds.push(Pt[Q0]),H0.bondOrder.push(hm),lm.bonds.push(Pt[E0]),lm.bondOrder.push(hm))}if(!y.multimodel)break;y.onemol||N.push([]),lt.splice(0,Np),d0=lt.join(`
`)}return N}var p0=r(40);function rm(d0,y){let N=d0.replace(/ /g,"");return N.length>0&&N[0]==="H"&&N!=="Hg"&&N!=="He"&&N!=="Hf"&&N!=="Hs"&&N!=="Ho"&&(N="H"),N.length>1&&(N=N[0].toUpperCase()+N.substring(1).toLowerCase(),p0.bondTable[N]===void 0?N=N[0]:y&&(N==="Ca"||N==="Cd")&&(N="C")),N}function am(d0){for(const y in d0)return!1;return!0}function ym(d0,y,N){const K=[],ne=y.assignBonds===void 0||y.assignBonds,Rt=!y.keepH,lt=!!y.noSecondaryStructure,Pt=!y.noComputeSecondaryStructure,Ht=!y.doAssembly,Dt=y.altLoc?y.altLoc:"A",Zt={symmetries:[],cryst:void 0};let Er,Np=[];const Zo=[];let la;const Dp={};for(let wp=0;wp<d0.length;wp++){la=d0[wp].replace(/^\s*/,"");const Vp=la.substring(0,6);let Kp,r0,D0;if(Vp.indexOf("END")===0){if(Np=d0.slice(wp+1),Vp==="END")for(const E0 in N)N.hasOwnProperty(E0)&&delete N[E0];break}if(Vp==="ATOM  "||Vp==="HETATM"){let E0,H0,Q0,lm,hm,q0,Bm,Im,h1,i1,M1,L1;if(M1=la.substring(16,17),M1!==" "&&M1!==Dt&&Dt!=="*"||(i1=parseInt(la.substring(6,11)),Er=la.substring(12,16).replace(/ /g,""),E0=la.substring(17,20).replace(/ /g,""),H0=la.substring(21,22),Q0=parseInt(la.substring(22,26)),lm=la.substring(26,27),hm=parseFloat(la.substring(30,38)),q0=parseFloat(la.substring(38,46)),Bm=parseFloat(la.substring(46,54)),L1=parseFloat(la.substring(60,68)),h1=la.substring(76,78).replace(/ /g,""),h1=h1===""||p0.bondTable[h1]===void 0?rm(la.substring(12,14),la[0]=="A"):h1[0].toUpperCase()+h1.substring(1).toLowerCase(),h1==="H"&&Rt))continue;Im=Vp[0]=="H",Zo[i1]=K.length,K.push({resn:E0,x:hm,y:q0,z:Bm,elem:h1,hetflag:Im,altLoc:M1,chain:H0,resi:Q0,icode:lm,rescode:Q0+(lm!==" "?"^"+lm:""),serial:i1,atom:Er,bonds:[],ss:"c",bondOrder:[],properties:{},b:L1,pdbline:la})}else if(Vp==="SHEET "){Kp=la.substring(21,22),r0=parseInt(la.substring(22,26)),D0=parseInt(la.substring(33,37)),Kp in N||(N[Kp]={}),N[Kp][r0]="s1";for(let E0=r0+1;E0<D0;E0++)N[Kp][E0]="s";N[Kp][D0]="s2"}else if(Vp==="CONECT"){const E0=Zo[parseInt(la.substring(6,11))],H0=K[E0],Q0=[11,16,21,26];for(let lm=0;lm<4;lm++){const hm=Zo[parseInt(la.substring(Q0[lm],Q0[lm]+5))];let q0=E0+":"+hm;const Bm=K[hm];if(H0!==void 0&&Bm!==void 0)if(Dp[q0]){Dp[q0]+=1;for(let Im=0;Im<H0.bonds.length;Im++)if(H0.bonds[Im]==hm){const h1=Dp[q0];H0.bondOrder[Im]=h1>=4?1:h1}}else Dp[q0]=1,H0.bonds.length!=0&&H0.bonds[H0.bonds.length-1]===hm||(H0.bonds.push(hm),H0.bondOrder.push(1))}}else if(Vp==="HELIX "){Kp=la.substring(19,20),r0=parseInt(la.substring(21,25)),D0=parseInt(la.substring(33,37)),Kp in N||(N[Kp]={}),N[Kp][r0]="h1";for(let E0=r0+1;E0<D0;E0++)N[Kp][E0]="h";N[Kp][D0]="h2"}else if(Ht||Vp!=="REMARK"||la.substring(13,18)!=="BIOMT"){if(Vp==="CRYST1"){let E0,H0,Q0,lm,hm,q0;E0=parseFloat(la.substring(7,15)),H0=parseFloat(la.substring(16,24)),Q0=parseFloat(la.substring(25,33)),lm=parseFloat(la.substring(34,40)),hm=parseFloat(la.substring(41,47)),q0=parseFloat(la.substring(48,54)),Zt.cryst={a:E0,b:H0,c:Q0,alpha:lm,beta:hm,gamma:q0}}else if(Vp==="ANISOU"){const E0=K[Zo[parseInt(la.substring(6,11))]];if(E0){const H0=la.substring(30).trim().split(/\s+/),Q0={u11:parseInt(H0[0]),u22:parseInt(H0[1]),u33:parseInt(H0[2]),u12:parseInt(H0[3]),u13:parseInt(H0[4]),u23:parseInt(H0[5])};E0.uMat=Q0}}}else{let E0,H0=new l.Matrix4;for(E0=1;E0<=3;E0++)if(la=d0[wp].replace(/^\s*/,""),parseInt(la.substring(18,19))==E0)H0.elements[E0-1]=parseFloat(la.substring(23,33)),H0.elements[E0-1+4]=parseFloat(la.substring(33,43)),H0.elements[E0-1+8]=parseFloat(la.substring(43,53)),H0.elements[E0-1+12]=parseFloat(la.substring(53)),wp++;else for(;la.substring(13,18)==="BIOMT";)wp++,la=d0[wp].replace(/^\s*/,"");H0.elements[3]=0,H0.elements[7]=0,H0.elements[11]=0,H0.elements[15]=1,Zt.symmetries.push(H0),wp--}}if((function(wp,Vp){for(let Kp=0,r0=wp.length;Kp<r0;Kp++){const D0=wp[Kp];for(let E0=0;E0<D0.bonds.length;E0++){const H0=wp[D0.bonds[E0]],Q0=Vp[D0.serial];H0&&Q0&&H0.bonds.indexOf(Q0)<0&&(H0.bonds.push(Q0),H0.bondOrder.push(D0.bondOrder[E0]))}}})(K,Zo),ne&&y0(K,y),Ht||i0(Zt.symmetries,K,y,Zt.cryst),Pt&&!lt&&Kt(K,y.hbondCutoff),!am(N))for(let wp=0;wp<K.length;wp++){const Vp=K[wp];if(Vp!==void 0&&Vp.chain in N&&Vp.resi in N[Vp.chain]){const Kp=N[Vp.chain][Vp.resi];Vp.ss=Kp[0],Kp.length>1&&(Kp[1]=="1"?Vp.ssbegin=!0:Kp[1]=="2"&&(Vp.ssend=!0))}}return[K,Zt,Np]}function Wm(d0,y){y=y||{};var N=[],K={};N.modelData=[];for(var ne=d0.split(/\r?\n|\r/);ne.length>0;){var Rt=ym(ne,y,K),lt=Rt[0],Pt=Rt[1];if(ne=Rt[2],lt.length!=0){if(y.multimodel&&y.onemol&&N.length>0)for(var Ht=N[0].length,Dt=0;Dt<lt.length;Dt++){var Zt=lt[Dt];Zt.index=Dt;for(var Er=0;Er<Zt.bonds.length;Er++)Zt.bonds[Er]+=Ht;N[0].push(Zt)}else N.modelData.push(Pt),N.push(lt);if(!y.multimodel)break}}return N}function h0(d0,y){var N=[[]],K=!y.noSecondaryStructure;N.modelData=[{symmetries:[]}];var ne,Rt=[],lt=d0.split(/\r?\n|\r/);for(let D0=0;D0<lt.length;D0++){var Pt=(ne=lt[D0].replace(/^\s*/,"")).substring(0,6);if(Pt.indexOf("END")==0){if(y.multimodel){y.onemol||N.push([]);continue}break}if(Pt=="ATOM  "||Pt=="HETATM"){var Ht;let E0=parseInt(ne.substring(6,11)),H0=ne.substring(12,16).replace(/ /g,""),Q0=ne.substring(17,20).trim(),lm=ne.substring(21,22),hm=parseInt(ne.substring(22,26));var Dt=ne.substring(30).trim().split(/\s+/),Zt=parseFloat(Dt[0]),Er=parseFloat(Dt[1]),Np=parseFloat(Dt[2]),Zo=parseFloat(Dt[3]),la=parseFloat(Dt[4]),Dp=H0[0];H0.length>1&&H0[1].toUpperCase()!=H0[1]&&(Dp=H0.substring(0,2)),Ht=ne[0]=="H",Rt[E0]=N[N.length-1].length,N[N.length-1].push({resn:Q0,x:Zt,y:Er,z:Np,elem:Dp,hetflag:Ht,chain:lm,resi:hm,serial:E0,atom:H0,bonds:[],ss:"c",bondOrder:[],properties:{charge:Zo,partialCharge:Zo,radius:la},pdbline:ne})}else if(Pt=="CONECT"){var wp=parseInt(ne.substring(6,11)),Vp=N[N.length-1][Rt[wp]];for(let E0=0;E0<4;E0++){var Kp=parseInt(ne.substring([11,16,21,26][E0],[11,16,21,26][E0]+5)),r0=N[N.length-1][Rt[Kp]];Vp!==void 0&&r0!==void 0&&(Vp.bonds.push(Rt[Kp]),Vp.bondOrder.push(1))}}}for(let D0=0;D0<N.length;D0++)y0(N[D0],y),K&&Kt(N[D0],y.hbondCutoff);return N}var f1=r(471),T1=function(d0){return String.fromCharCode.apply(null,d0).replace(/\0/g,"")},I1=function(d0){return d0==0||d0==2||d0==4?"h":d0==3?"s":"c"};let p1=new Set(["D-SACCHARIDE","D-SACCHARIDE 1,4 AND 1,4 LINKING","D-SACCHARIDE 1,4 AND 1,6 LINKING","L-SACCHARIDE","L-SACCHARIDE 1,4 AND 1,4 LINKING","L-SACCHARIDE 1,4 AND 1,6 LINKING","NON-POLYMER","OTHER","PEPTIDE-LIKE","SACCHARIDE"]);function Qm(d0,y){var N=!y.keepH,K=y.altLoc?y.altLoc:"A",ne=!!y.noSecondaryStructure,Rt=!y.noComputeSecondaryStructure,lt=!y.doAssembly,Pt=y.assemblyIndex?y.assemblyIndex:0;d0=typeof d0=="string"?(0,g.base64ToArray)(d0):new Uint8Array(d0);var Ht,Dt,Zt,Er,Np,Zo,la=f1.decode(d0),Dp=[[]],wp=Dp.modelData=[],Vp=0,Kp=0,r0=0,D0=la.secStructList,E0=la.bFactorList,H0=la.altLocList,Q0=la.occupancyList,lm=la.bondAtomList,hm=la.bondOrderList,q0=la.numModels;if(q0==0)return Dp;y.multimodel||(q0=1);var Bm=[];if(!lt&&la.bioAssemblyList&&la.bioAssemblyList.length>0){var Im=la.bioAssemblyList[Pt].transformList;for(Ht=0,Zo=Im.length;Ht<Zo;Ht++){var h1=new l.Matrix4(Im[Ht].matrix);h1.transpose(),Bm.push(h1)}}var i1=null;if(la.unitCell){var M1=la.unitCell;i1={a:M1[0],b:M1[1],c:M1[2],alpha:M1[3],beta:M1[4],gamma:M1[5]}}let L1=[];la.entityList.forEach(jp=>{jp.chainIndexList.forEach(bt=>{L1[bt]=jp.type=="polymer"})});var c1=0;for(Np=0;Np<q0;Np++){var j1=la.chainsPerModel[Np],Hm=Dp[Dp.length-1],t1=[];for(wp.push({symmetries:Bm,cryst:i1}),Ht=0;Ht<j1;++Ht){var Y1=la.groupsPerChain[Vp],d1=T1(la.chainIdList.subarray(4*Vp,4*Vp+4));la.chainNameList&&(d1=T1(la.chainNameList.subarray(4*Vp,4*Vp+4)));var q1=Kp,Z1="";for(Dt=0;Dt<Y1;++Dt){var x1=la.groupList[la.groupTypeList[Kp]],ag=x1.atomNameList.length,Og=0,eg=!1,C1=!1;if(D0){Og=D0[Kp];var Bg=I1(Og);Kp!=0&&Bg==Z1||(eg=!0),Z1=Bg;var xg=Kp+1;(xg>=D0.length||I1(D0[xg]!=Bg))&&(C1=!0)}var Ig=la.groupIdList[Kp],_g=x1.groupName;let jp=x1.chemCompType;var Hg=r0;let bt=p1.has(jp)||!L1[Vp];for(Zt=0;Zt<ag;++Zt){var vv=x1.elementList[Zt];if(N&&vv=="H")r0+=1;else{var jv="";E0&&(jv=E0[r0]);var Uv="";H0&&H0[r0]&&(Uv=String.fromCharCode(H0[r0]));var vy="";if(Q0&&(vy=Q0[r0]),Uv==""||Uv==K||K=="*"){var ay=la.atomIdList[r0],Tv=x1.atomNameList[Zt],yy=0;x1.atomChargeList&&(yy=x1.atomChargeList[Zt]);var ey=la.xCoordList[r0],iy=la.yCoordList[r0],xy=la.zCoordList[r0];t1[r0]=Hm.length,Hm.push({resn:_g,x:ey,y:iy,z:xy,elem:vv,hetflag:bt,chain:d1,resi:Ig,icode:Uv,rescode:Ig+(Uv!=" "?"^"+Uv:""),serial:ay,altLoc:Uv,index:r0,atom:Tv,bonds:[],ss:I1(Og),ssbegin:eg,ssend:C1,bondOrder:[],properties:{charge:yy,occupancy:vy},b:jv}),r0+=1}else r0+=1}}var Ly=x1.bondAtomList;for(Zt=0,Er=x1.bondOrderList.length;Zt<Er;++Zt){var _y=Hg+Ly[2*Zt],Iy=Hg+Ly[2*Zt+1],Dv=x1.bondOrderList[Zt],Wv=t1[_y],Zv=t1[Iy],ty=Hm[Wv],Ue=Hm[Zv];ty&&Ue&&(ty.bonds.push(Zv),ty.bondOrder.push(Dv),Ue.bonds.push(Wv),Ue.bondOrder.push(Dv))}Kp+=1}for(Kp=q1,Dt=0;Dt<Y1;++Dt)Kp+=1;Vp+=1}if(lm)for(let jp=c1,bt=lm.length;jp<bt;jp+=2){let X0=lm[jp],G0=lm[jp+1],j0=hm?hm[jp/2]:1;if(X0>=r0){c1=jp;break}let Ym=t1[X0],xm=t1[G0],V1=Hm[Ym],Em=Hm[xm];V1&&Em&&(V1.bonds.push(xm),V1.bondOrder.push(j0),Em.bonds.push(Ym),Em.bondOrder.push(j0))}y.multimodel&&(y.onemol||Dp.push([]))}if(!lt)for(let jp=0;jp<Dp.length;jp++)i0(wp[jp].symmetries,Dp[jp],y,wp[jp].cryst);return Rt&&!ne&&Kt(Dp,y.hbondCutoff),Dp}function m1(d0){var y,N=[],K=0,ne=d0.split(/\r?\n|\r/);if(!(ne.length>0&&ne[0].includes("VERSION")))return[];{var Rt=ne.filter(function(la){return la.includes("POINTERS")||la.includes("ATOM_NAME")||la.includes("CHARGE")||la.includes("RADII")||la.includes("BONDS_INC_HYDROGEN")||la.includes("BONDS_WITHOUT_HYDROGEN")||la.includes("RESIDUE_LABEL")||la.includes("RESIDUE_POINTER")}),lt=Er("POINTERS");if(lt==-1)return[];var Pt=Np(lt),Ht=parseInt(ne[lt+1].slice(0,Pt[1]));let Zo=parseInt(ne[lt+2].slice(Pt[1],Pt[0]+Pt[1]));if(isNaN(Ht)||Ht<=0)return[];if((lt=Er("ATOM_NAME"))==-1)return[];var Dt=(Pt=Np(lt))[0];for(let la=0;la<Ht/Pt[0];la++){la==parseInt(Ht/Pt[0])&&(Dt=Ht%Pt[0]);for(let Dp=0;Dp<Dt;Dp++){let wp={},Vp={charge:"",radii:""};wp.serial=K,wp.x=0,wp.y=0,wp.z=0,wp.atom=ne[lt+1].slice(Pt[1]*Dp,Pt[1]*(Dp+1)).trim(),wp.elem=ne[lt+1].slice(Pt[1]*Dp,Pt[1]*Dp+1).trim(),wp.properties=Vp,wp.bonds=[],wp.bondOrder=[],wp.index=N.length,N.push(wp),K++}lt++}if((lt=Er("CHARGE"))!=-1){K=0,Dt=(Pt=Np(lt))[0];for(let la=0;la<Ht/Pt[0];la++){la==parseInt(Ht/Pt[0])&&(Dt=Ht%Pt[0]);for(let Dp=0;Dp<Dt;Dp++)N[K].properties.charge=parseFloat(ne[lt+1].slice(Pt[1]*Dp,Pt[1]*(Dp+1))),K++;lt++}}var Zt=[];if((lt=Er("RESIDUE_POINTER"))!=-1){Dt=(Pt=Np(lt))[0],lt+=1;for(let la=0;la<Zo/Pt[0];la++){la==parseInt(Zo/Pt[0])&&(Dt=Zo%Pt[0]);for(let Dp=0;Dp<Dt;Dp++)Zt.push(parseInt(ne[lt].slice(Pt[1]*Dp,Pt[1]*(Dp+1))));lt++}if((lt=Er("RESIDUE_LABEL"))!=-1){let la=[];Dt=(Pt=Np(lt))[0],lt+=1;for(let Kp=0;Kp<Zo/Pt[0];Kp++){Kp==parseInt(Zo/Pt[0])&&(Dt=Zo%Pt[0]);for(let r0=0;r0<Dt;r0++)la.push(ne[lt].slice(Pt[1]*r0,Pt[1]*(r0+1)).trim());lt++}let Dp=0,wp=0,Vp="";Zt.push(N.length+1);for(let Kp=0;Kp<N.length;Kp++)Kp+1>=Zt[Dp]&&(Vp=la[Dp],Dp+=1,wp+=1),N[Kp].resi=wp,N[Kp].resn=Vp}}if((lt=Er("RADII"))!=-1){K=0,Dt=(Pt=Np(lt))[0];for(let la=0;la<Ht/Pt[0];la++){la==parseInt(Ht/Pt[0])&&(Dt=Ht%Pt[0]);for(let Dp=0;Dp<Dt;Dp++)N[K].properties.radii=parseFloat(ne[lt+1].slice(Pt[1]*Dp,Pt[1]*(Dp+1))),K++;lt++}}if((lt=Er("BONDS_WITHOUT_HYDROGEN"))!=-1)for(K=0,Dt=(Pt=Np(lt))[0],lt+=1;!ne[lt].match(/^%FLAG/);){ne[lt+1].match(/^%FLAG/)&&(Dt=Ht%Pt[0]);for(let la=0;la<Dt;la++)K%3==0?y=parseInt(ne[lt].slice(Pt[1]*la,Pt[1]*(la+1))/3):K%3==1&&(N[y].bonds.push(parseInt(ne[lt].slice(Pt[1]*la,Pt[1]*(la+1))/3)),N[y].bondOrder.push(1)),K++;lt++}if((lt=Er("BONDS_INC_HYDROGEN"))!=-1)for(K=0,Dt=(Pt=Np(lt))[0],lt+=1;!ne[lt].match(/^%FLAG/);){ne[lt+1].match(/^%FLAG/)&&(Dt=Ht%Pt[0]);for(let la=0;la<Dt;la++)K%3==0?y=parseInt(ne[lt].slice(Pt[1]*la,Pt[1]*(la+1))/3):K%3==1&&(N[y].bonds.push(parseInt(ne[lt].slice(Pt[1]*la,Pt[1]*(la+1))/3)),N[y].bonds.push(1)),K++;lt++}}function Er(Zo){var la=ne.indexOf(Rt.filter(function(Dp){return Dp.includes(Zo)})[0]);if(Number.isInteger(la)&&la>0){for(;!ne[la].includes("FORMAT");)la++;return la}return-1}function Np(Zo){var la=ne[Zo].match(/\((\d*)\S*/),Dp=ne[Zo].match(/[a-zA-Z](\d*)\)\s*/);return Dp==null&&(Dp=ne[Zo].match(/[a-zA-Z](\d*)\.\d*\)\s*/)),[parseInt(la[1]),parseInt(Dp[1])]}return[N]}function W1(d0,y){const N=[],K=d0.split(/\r?\n|\r/);for(;K.length>0;){const ne=parseInt(K[1]);if(K.length<3||isNaN(ne)||ne<=0||K.length<ne+3)break;const Rt=[];N.push(Rt);let lt=2;const Pt=Rt.length,Ht=Pt+ne;for(let Dt=Pt;Dt<Ht;Dt++){const Zt=K[lt++],Er={};Er.serial=Dt,Er.atom=Zt.slice(10,15).trim(),Er.elem=rm(Er.atom,!0),Er.x=10*parseFloat(Zt.slice(20,28)),Er.y=10*parseFloat(Zt.slice(28,36)),Er.z=10*parseFloat(Zt.slice(36,44)),Er.resi=parseInt(Zt.slice(0,5)),Er.resn=Zt.slice(5,10).trim(),Er.bonds=[],Er.bondOrder=[],Er.properties={},Zt.length>44&&(Er.dx=10*parseFloat(Zt.slice(44,52)),Er.dy=10*parseFloat(Zt.slice(52,60)),Er.dz=10*parseFloat(Zt.slice(60,68))),Rt[Dt]=Er}if(K.length<=lt+3){const Dt=K[lt++].trim().split(/\s+/);if(Dt.length===3){for(let Zt=0;Zt<3;Zt++)Dt[Zt]=(10*parseFloat(Dt[Zt])).toString();N.box=Dt}}K.splice(0,++lt)}for(let ne=0;ne<N.length;ne++)y0(N[ne],y);return N}const ug={id:"serial",type:"atom",element:"elem",q:"charge",radius:"radius",x:"x",xu:"x",xs:"x",xsu:"x",y:"y",yu:"y",ys:"y",ysu:"y",z:"z",zu:"z",zs:"z",zsu:"z"};function ng(d0,y){const N=[],K=d0.split(/\r?\n|\r/);let ne=0,Rt=0,lt=0;for(;lt<K.length-9;){for(var Pt=lt;Pt<K.length;Pt++)if(K[Pt].match(/ITEM: NUMBER OF ATOMS/)&&(Rt=parseInt(K[Pt+1])),K[Pt].match(/ITEM: ATOMS/)){ne=Pt+1;break}const Ht=K[ne-1].replace("ITEM: ATOMS ","").split(" ");N.push([]);for(let Dt=ne;Dt<ne+Rt;Dt++){const Zt={},Er={},Np=K[Dt].split(" ");for(let Zo=0;Zo<Np.length;Zo++){const la=ug[Ht[Zo]];la!==void 0&&(la==="serial"?Zt[la]=parseInt(Np[Zo]):la==="x"||la==="y"||la==="z"?Zt[la]=parseFloat(Np[Zo]):la==="charge"||la==="radius"?Er[la]=parseFloat(Np[Zo]):Zt[la]=Np[Zo]),Zt.properties=Er,Zt.bonds=[],Zt.bondOrder=[]}N[N.length-1][Dt-ne]=Zt}lt=ne+Rt-1}if(y.assignBonds)for(let Ht=0;Ht<N.length;Ht++)(0,sa.assignBonds)(N[Ht],y);return N}var Ko;(function(d0){(function(y){y[y.Int8=1]="Int8",y[y.Int16=2]="Int16",y[y.Int32=3]="Int32",y[y.Uint8=4]="Uint8",y[y.Uint16=5]="Uint16",y[y.Uint32=6]="Uint32"})(d0.IntDataType||(d0.IntDataType={})),(function(y){y[y.Float32=32]="Float32",y[y.Float64=33]="Float64"})(d0.FloatDataType||(d0.FloatDataType={})),d0.getDataType=function(y){let N;return N=y instanceof Int8Array?d0.IntDataType.Int8:y instanceof Int16Array?d0.IntDataType.Int16:y instanceof Int32Array?d0.IntDataType.Int32:y instanceof Uint8Array?d0.IntDataType.Uint8:y instanceof Uint16Array?d0.IntDataType.Uint16:y instanceof Uint32Array?d0.IntDataType.Uint32:y instanceof Float32Array?d0.FloatDataType.Float32:y instanceof Float64Array?d0.FloatDataType.Float64:d0.IntDataType.Int32,N},d0.isSignedIntegerDataType=function(y){if(y instanceof Int8Array||y instanceof Int16Array||y instanceof Int32Array)return!0;for(let N=0,K=y.length;N<K;N++)if(N<0)return!1;return!0}})(Ko||(Ko={}));const wi=new Uint16Array(new Uint8Array([18,52]).buffer)[0]===13330;function S0(d0){let y=d0.data;for(let N=d0.encoding.length-1;N>=0;N--)y=Z0(y,d0.encoding[N]);return y}function Z0(d0,y){switch(y.kind){case"ByteArray":switch(y.type){case Ko.IntDataType.Uint8:return d0;case Ko.IntDataType.Int8:return(function(N){return new Int8Array(N.buffer,N.byteOffset)})(d0);case Ko.IntDataType.Int16:return(function(N){return x0(N,2,Int16Array)})(d0);case Ko.IntDataType.Uint16:return(function(N){return x0(N,2,Uint16Array)})(d0);case Ko.IntDataType.Int32:return(function(N){return x0(N,4,Int32Array)})(d0);case Ko.IntDataType.Uint32:return(function(N){return x0(N,4,Uint32Array)})(d0);case Ko.FloatDataType.Float32:return(function(N){return x0(N,4,Float32Array)})(d0);case Ko.FloatDataType.Float64:return(function(N){return x0(N,8,Float64Array)})(d0);default:throw new Error("unreachable")}case"FixedPoint":return(function(N,K){const ne=N.length,Rt=Ip(K.srcType,ne),lt=1/K.factor;for(let Pt=0;Pt<ne;Pt++)Rt[Pt]=lt*N[Pt];return Rt})(d0,y);case"IntervalQuantization":return(function(N,K){const ne=N.length,Rt=Ip(K.srcType,ne),lt=(K.max-K.min)/(K.numSteps-1),Pt=K.min;for(let Ht=0;Ht<ne;Ht++)Rt[Ht]=Pt+lt*N[Ht];return Rt})(d0,y);case"RunLength":return(function(N,K){const ne=Pp(K.srcType,K.srcSize);let Rt=0;for(let lt=0,Pt=N.length;lt<Pt;lt+=2){const Ht=N[lt],Dt=N[lt+1];for(let Zt=0;Zt<Dt;++Zt)ne[Rt++]=Ht}return ne})(d0,y);case"Delta":return(function(N,K){const ne=N.length,Rt=Pp(K.srcType,ne);if(!ne)return N;Rt[0]=N[0]+(0|K.origin);for(let lt=1;lt<ne;++lt)Rt[lt]=N[lt]+Rt[lt-1];return Rt})(d0,y);case"IntegerPacking":return(function(N,K){return N.length===K.srcSize?N:K.isUnsigned?(function(ne,Rt){const lt=Rt.byteCount===1?255:65535,Pt=ne.length,Ht=new Int32Array(Rt.srcSize);let Dt=0,Zt=0;for(;Dt<Pt;){let Er=0,Np=ne[Dt];for(;Np===lt;)Er+=Np,Dt++,Np=ne[Dt];Er+=Np,Ht[Zt]=Er,Dt++,Zt++}return Ht})(N,K):(function(ne,Rt){const lt=Rt.byteCount===1?127:32767,Pt=-lt-1,Ht=ne.length,Dt=new Int32Array(Rt.srcSize);let Zt=0,Er=0;for(;Zt<Ht;){let Np=0,Zo=ne[Zt];for(;Zo===lt||Zo===Pt;)Np+=Zo,Zt++,Zo=ne[Zt];Np+=Zo,Dt[Er]=Np,Zt++,Er++}return Dt})(N,K)})(d0,y);case"StringArray":return(function(N,K){const ne=S0({encoding:K.offsetEncoding,data:K.offsets}),Rt=S0({encoding:K.dataEncoding,data:N}),lt=K.stringData,Pt=new Array(ne.length);Pt[0]="";for(let Zt=1,Er=ne.length;Zt<Er;Zt++)Pt[Zt]=lt.substring(ne[Zt-1],ne[Zt]);let Ht=0;const Dt=new Array(Rt.length);for(let Zt=0,Er=Rt.length;Zt<Er;Zt++)Dt[Ht++]=Pt[Rt[Zt]+1];return Dt})(d0,y)}}function Pp(d0,y){switch(d0){case Ko.IntDataType.Int8:return new Int8Array(y);case Ko.IntDataType.Int16:return new Int16Array(y);case Ko.IntDataType.Int32:return new Int32Array(y);case Ko.IntDataType.Uint8:return new Uint8Array(y);case Ko.IntDataType.Uint16:return new Uint16Array(y);case Ko.IntDataType.Uint32:return new Uint32Array(y);default:return new Int32Array(y)}}function Ip(d0,y){switch(d0){case Ko.FloatDataType.Float32:return new Float32Array(y);case Ko.FloatDataType.Float64:default:return new Float64Array(y)}}function x0(d0,y,N){return d0.byteOffset==0&&d0.byteLength==d0.buffer.byteLength||(d0=new Uint8Array(d0)),new N(wi?d0.buffer:(function(K,ne){const Rt=new ArrayBuffer(K.length),lt=new Uint8Array(Rt);for(let Pt=0,Ht=K.length;Pt<Ht;Pt+=ne)for(let Dt=0;Dt<ne;Dt++)lt[Pt+ne-Dt-1]=K[Pt+Dt];return Rt})(d0,y))}function B0(d0){const y=Object.create(null),N=Object.create(null);for(const K of d0.columns)y[K.name]=K;return{rowCount:d0.rowCount,name:d0.name.substring(1),fieldNames:d0.columns.map(K=>K.name),getField(K){const ne=y[K];if(ne)return N[K]||(N[K]=S0(ne.data)),N[K]}}}var Y0=r(471);class im{constructor(y){if(this.C={},y){let N=y.getField("comp_id"),K=y.getField("atom_id_1"),ne=y.getField("atom_id_2"),Rt=y.getField("value_order");for(let lt=0;lt<N.length;lt++){let Pt=N[lt],Ht=K[lt],Dt=ne[lt],Zt=Rt[lt],Er=1;Zt=="doub"?Er=2:Zt=="trip"&&(Er=3),this.C[Pt]==null&&(this.C[Pt]={}),this.C[Pt][Ht]==null&&(this.C[Pt][Ht]={}),this.C[Pt][Dt]==null&&(this.C[Pt][Dt]={}),this.C[Pt][Ht][Dt]=Er,this.C[Pt][Dt][Ht]=Er}}}order(y,N,K){return this.C[y]!==void 0&&this.C[y][N]!==void 0&&this.C[y][N][K]!==void 0?this.C[y][N][K]:0}}class om{constructor(y){if(this.C=[],y){let N=y.getField("conn_type_id"),K=y.getField("ptnr1_label_asym_id"),ne=y.getField("ptnr1_label_seq_id"),Rt=y.getField("ptnr1_label_comp_id"),lt=y.getField("ptnr1_label_atom_id"),Pt=y.getField("ptnr2_label_asym_id"),Ht=y.getField("ptnr2_label_seq_id"),Dt=y.getField("ptnr2_label_comp_id"),Zt=y.getField("ptnr2_label_atom_id"),Er=y.getField("pdbx_value_order");for(let Np=0;Np<N.length;Np++)if(N[Np]=="disulf"||N[Np]=="covale"){let Zo=Er?Er[Np]==""?1:parseInt(Er[Np]):1;this.C.push([[K[Np],ne[Np],Rt[Np],lt[Np]],[Pt[Np],Ht[Np],Dt[Np],Zt[Np]],Zo])}}}}class Cm{constructor(){this.R={}}add(y){this.R[y.lchain]==null&&(this.R[y.lchain]={}),this.R[y.lchain][y.lresi]==null&&(this.R[y.lchain][y.lresi]={}),this.R[y.lchain][y.lresi][y.lresn]==null&&(this.R[y.lchain][y.lresi][y.lresn]=[]),this.R[y.lchain][y.lresi][y.lresn].push(y),this.R[y.lchain][y.lresi][y.lresn][y.atom]=y}geta([y,N,K,ne]){if(this.R[y]!==void 0&&this.R[y][N]!==void 0&&this.R[y][N][K]!==void 0)return this.R[y][N][K][ne]}setBonds(y,N){for(let K in this.R)for(let ne in this.R[K])for(let Rt in this.R[K][ne]){let lt=this.R[K][ne][Rt];for(let Pt=0;Pt<lt.length;Pt++)for(let Ht=Pt+1;Ht<lt.length;Ht++){let Dt=lt[Pt],Zt=lt[Ht],Er=y.order(Rt,Dt.atom,Zt.atom);Dt.altLoc!=Zt.altLoc&&Dt.altLoc!=""&&Zt.altLoc!=""&&(Er=0),Er>0&&(Dt.bonds.push(Zt.index),Zt.bonds.push(Dt.index),Dt.bondOrder.push(Er),Zt.bondOrder.push(Er))}}for(let K of N.C){let ne=K[0],Rt=K[1],lt=K[2],Pt=this.geta(ne),Ht=this.geta(Rt);Pt!=null&&Ht!=null&&(Pt.bonds.push(Ht.index),Ht.bonds.push(Pt.index),Pt.bondOrder.push(lt),Ht.bondOrder.push(lt))}}}function r1(d0,y){var N=!y.keepH,K=y.altLoc?y.altLoc:"A",ne=!y.noComputeSecondaryStructure;const Rt=!y.doAssembly,lt=y.assignBonds===void 0||y.assignBonds;if(typeof d0=="string")try{d0=(0,g.base64ToArray)(d0)}catch{d0=new TextEncoder().encode(d0)}else d0=new Uint8Array(d0);var Pt=Y0.decodeMsgpack(d0);Pt==31&&(d0=(0,g.inflateString)(d0,!1),Pt=Y0.decodeMsgpack(d0));var Ht=[],Dt=Ht.modelData=[],Zt=Pt.dataBlocks.length;if(Zt==0)return Ht;y.multimodel||(Zt=1);for(let Er=0;Er<Zt;Er++){let Np=Ht.length;const Zo=[];Dt.push({symmetries:[]}),Ht.push([]);const la=Pt.dataBlocks[Er],Dp=Object.create(null);for(const eg of la.categories)Dp[eg.name.substr(1)]=B0(eg);let wp={},Vp=Dp.struct_conf;if(Vp){let eg=Vp.getField("conf_type_id"),C1=Vp.getField("beg_label_asym_id"),Bg=Vp.getField("beg_label_seq_id"),xg=Vp.getField("end_label_seq_id");for(let Ig=0;Ig<eg.length;Ig++)if(eg[Ig].startsWith("H")){let _g=C1[Ig],Hg=Bg[Ig],vv=xg[Ig];_g in wp||(wp[_g]={}),wp[_g][Hg]="h1";for(let jv=Hg+1;jv<vv;jv++)wp[_g][jv]="h";wp[_g][vv]="h2"}}let Kp=Dp.struct_sheet_range;if(Kp){let eg=Kp.getField("id"),C1=Kp.getField("beg_label_asym_id"),Bg=Kp.getField("beg_label_seq_id"),xg=Kp.getField("end_label_seq_id");for(let Ig=0;Ig<eg.length;Ig++){let _g=C1[Ig],Hg=Bg[Ig],vv=xg[Ig];_g in wp||(wp[_g]={}),wp[_g][Hg]="s1";for(let jv=Hg+1;jv<vv;jv++)wp[_g][jv]="s";wp[_g][vv]="s2"}}let r0=Dp.pdbx_struct_oper_list,D0=r0.getField("id");if(D0&&!Rt){let eg=r0.getField("matrix[1][1]"),C1=r0.getField("matrix[1][2]"),Bg=r0.getField("matrix[1][3]"),xg=r0.getField("matrix[2][1]"),Ig=r0.getField("matrix[2][2]"),_g=r0.getField("matrix[2][3]"),Hg=r0.getField("matrix[3][1]"),vv=r0.getField("matrix[3][2]"),jv=r0.getField("matrix[3][3]"),Uv=r0.getField("vector[1]"),vy=r0.getField("vector[2]"),ay=r0.getField("vector[3]");for(let Tv=0;Tv<D0.length;Tv++){const yy=new l.Matrix4(eg[Tv],C1[Tv],Bg[Tv],Uv[Tv],xg[Tv],Ig[Tv],_g[Tv],vy[Tv],Hg[Tv],vv[Tv],jv[Tv],ay[Tv]);Dt[Dt.length-1].symmetries.push(yy)}}let E0=new im(Dp.chem_comp_bond),H0=new Cm,Q0=new om(Dp.struct_conn),lm=Dp.atom_site,hm=lm.rowCount,q0=lm.getField("group_PDB"),Bm=lm.getField("Cartn_x"),Im=lm.getField("Cartn_y"),h1=lm.getField("Cartn_z"),i1=lm.getField("auth_asym_id"),M1=lm.getField("label_asym_id"),L1=lm.getField("auth_seq_id"),c1=lm.getField("label_seq_id"),j1=lm.getField("auth_comp_id"),Hm=lm.getField("label_comp_id"),t1=lm.getField("auth_atom_id"),Y1=lm.getField("label_atom_id"),d1=lm.getField("type_symbol"),q1=lm.getField("B_iso_or_equiv"),Z1=lm.getField("id"),x1=lm.getField("label_alt_id"),ag=lm.getField("pdbx_PDB_model_num"),Og=ag?ag[0]:0;for(let eg=0;eg<hm;eg++){if(q0!==void 0&&q0[eg]==="TER")continue;if(ag&&ag[eg]!=Og){if(Og=ag[eg],!y.multimodel)break;y.onemol||(Ht.push([]),Dt.push(Dt[Dt.length-1]),Og=ag[eg],H0.setBonds(E0,Q0),H0=new Cm)}const C1={};C1.x=Bm[eg],C1.y=Im[eg],C1.z=h1[eg],C1.chain=i1?i1[eg]:M1?M1[eg]:void 0,C1.lchain=M1?M1[eg]:void 0,C1.resi=L1?L1[eg]:c1?c1[eg]:void 0,C1.lresi=c1?c1[eg]:void 0,C1.resn=j1?j1[eg].trim():Hm?Hm[eg].trim():void 0,C1.lresn=Hm?Hm[eg].trim():void 0,C1.atom=t1?t1[eg].replace(/"/gm,""):Y1?Y1[eg].replace(/"/gm,""):void 0,C1.icode=x1?x1[eg]:void 0,C1.altLoc=C1.icode,C1.hetflag=!q0||q0[eg]==="HETA"||q0[eg]==="HETATM";let Bg="X";d1&&(Bg=d1[eg].replace(/\(?\+?\d+.*/,"")),C1.elem=Bg[0].toUpperCase()+Bg.substring(1,2).toLowerCase(),q1&&(C1.b=q1[eg]),N&&C1.elem=="H"||C1.altLoc!=""&&C1.altLoc!=K&&K!="*"||(C1.bonds=[],C1.ss="c",C1.serial=Z1[eg],C1.model=Og,C1.bondOrder=[],C1.properties={},C1.index=Ht[Ht.length-1].length,Zo[C1.serial]=[Ht.length,C1.index],Ht[Ht.length-1].push(C1),H0.add(C1))}if(H0.setBonds(E0,Q0),!am(wp))for(let eg=Np;eg<Ht.length;eg++){let C1=Ht[eg];for(let Bg=0;Bg<C1.length;Bg++){const xg=C1[Bg];if(xg!==void 0&&xg.lchain in wp&&xg.lresi in wp[xg.lchain]){const Ig=wp[xg.lchain][xg.lresi];xg.ss=Ig[0],Ig.length>1&&(Ig[1]=="1"?xg.ssbegin=!0:Ig[1]=="2"&&(xg.ssend=!0))}}}y.multimodel&&Er<Zt-1&&(y.onemol||(Ht.push([]),Dt.push({symmetries:[]})))}for(let Er=0;Er<Ht.length;Er++)!lt||y.duplicateAssemblyAtoms&&!y.dontConnectDuplicatedAtoms||y0(Ht[Er],y),ne&&Kt(Ht[Er],y.hbondCutoff),i0(Dt[Er].symmetries,Ht[Er],y,Dt[Er].cryst),y.duplicateAssemblyAtoms&&!y.dontConnectDuplicatedAtoms&&lt&&y0(Ht[Er],y);return Ht}const Om={vasp:Lp.VASP,VASP:Lp.VASP,cube:Mn.CUBE,CUBE:Mn.CUBE,xyz:re,XYZ:re,sdf:$o,SDF:$o,json:qo,cdjson:qo,CDJSON:qo,mcif:u0,cif:u0,CIF:u0,mol2:v0,MOL2:v0,pdb:Wm,PDB:Wm,pdbqt:Wm,PDBQT:Wm,pqr:h0,PQR:h0,mmtf:Qm,MMTF:Qm,prmtop:m1,PRMTOP:m1,gro:W1,GRO:W1,lammpstrj:ng,LAMMPSTRJ:ng,bcif:r1,BCIF:r1};function a1(d0,y="utf8"){return new TextDecoder(y).decode(d0)}const hg=new TextEncoder,pm=(()=>{const d0=new Uint8Array(4);return!((new Uint32Array(d0.buffer)[0]=1)&d0[0])})(),S1={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class U1{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(y=8192,N={}){let K=!1;typeof y=="number"?y=new ArrayBuffer(y):(K=!0,this.lastWrittenByte=y.byteLength);const ne=N.offset?N.offset>>>0:0,Rt=y.byteLength-ne;let lt=ne;(ArrayBuffer.isView(y)||y instanceof U1)&&(y.byteLength!==y.buffer.byteLength&&(lt=y.byteOffset+ne),y=y.buffer),this.lastWrittenByte=K?Rt:0,this.buffer=y,this.length=Rt,this.byteLength=Rt,this.byteOffset=lt,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,lt,Rt),this._mark=0,this._marks=[]}available(y=1){return this.offset+y<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(y=1){return this.offset+=y,this}back(y=1){return this.offset-=y,this}seek(y){return this.offset=y,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const y=this._marks.pop();if(y===void 0)throw new Error("Mark stack empty");return this.seek(y),this}rewind(){return this.offset=0,this}ensureAvailable(y=1){if(!this.available(y)){const N=2*(this.offset+y),K=new Uint8Array(N);K.set(new Uint8Array(this.buffer)),this.buffer=K.buffer,this.length=N,this.byteLength=N,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(y=1){return this.readArray(y,"uint8")}readArray(y,N){const K=S1[N].BYTES_PER_ELEMENT*y,ne=this.byteOffset+this.offset,Rt=this.buffer.slice(ne,ne+K);if(this.littleEndian===pm&&N!=="uint8"&&N!=="int8"){const Pt=new Uint8Array(this.buffer.slice(ne,ne+K));Pt.reverse();const Ht=new S1[N](Pt.buffer);return this.offset+=K,Ht.reverse(),Ht}const lt=new S1[N](Rt);return this.offset+=K,lt}readInt16(){const y=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,y}readUint16(){const y=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,y}readInt32(){const y=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,y}readUint32(){const y=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,y}readFloat32(){const y=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,y}readFloat64(){const y=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,y}readBigInt64(){const y=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,y}readBigUint64(){const y=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,y}readChar(){return String.fromCharCode(this.readInt8())}readChars(y=1){let N="";for(let K=0;K<y;K++)N+=this.readChar();return N}readUtf8(y=1){return a1(this.readBytes(y))}decodeText(y=1,N="utf8"){return a1(this.readBytes(y),N)}writeBoolean(y){return this.writeUint8(y?255:0),this}writeInt8(y){return this.ensureAvailable(1),this._data.setInt8(this.offset++,y),this._updateLastWrittenByte(),this}writeUint8(y){return this.ensureAvailable(1),this._data.setUint8(this.offset++,y),this._updateLastWrittenByte(),this}writeByte(y){return this.writeUint8(y)}writeBytes(y){this.ensureAvailable(y.length);for(let N=0;N<y.length;N++)this._data.setUint8(this.offset++,y[N]);return this._updateLastWrittenByte(),this}writeInt16(y){return this.ensureAvailable(2),this._data.setInt16(this.offset,y,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(y){return this.ensureAvailable(2),this._data.setUint16(this.offset,y,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(y){return this.ensureAvailable(4),this._data.setInt32(this.offset,y,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(y){return this.ensureAvailable(4),this._data.setUint32(this.offset,y,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(y){return this.ensureAvailable(4),this._data.setFloat32(this.offset,y,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(y){return this.ensureAvailable(8),this._data.setFloat64(this.offset,y,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(y){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,y,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(y){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,y,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(y){return this.writeUint8(y.charCodeAt(0))}writeChars(y){for(let N=0;N<y.length;N++)this.writeUint8(y.charCodeAt(N));return this}writeUtf8(y){return this.writeBytes((function(N){return hg.encode(N)})(y))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}const J1=1,l1=2,Km=3,A1=4,y1=5,uv=6;function $g(d0){switch(Number(d0)){case J1:return"byte";case l1:return"char";case Km:return"short";case A1:return"int";case y1:return"float";case uv:return"double";default:return"undefined"}}function Sv(d0){switch(Number(d0)){case J1:case l1:return 1;case Km:return 2;case A1:case y1:return 4;case uv:return 8;default:return-1}}function Yv(d0){switch(String(d0)){case"byte":return J1;case"char":return l1;case"short":return Km;case"int":return A1;case"float":return y1;case"double":return uv;default:return-1}}function my(d0,y){if(d0!==1){const N=new Array(d0);for(let K=0;K<d0;K++)N[K]=y();return N}return y()}function Vv(d0,y,N){switch(y){case J1:return Array.from(d0.readBytes(N));case l1:return(K=d0.readChars(N)).charCodeAt(K.length-1)===0?K.substring(0,K.length-1):K;case Km:return my(N,d0.readInt16.bind(d0));case A1:return my(N,d0.readInt32.bind(d0));case y1:return my(N,d0.readFloat32.bind(d0));case uv:return my(N,d0.readFloat64.bind(d0));default:throw new Error(`non valid type ${y}`)}var K}function yv(d0,y){if(d0)throw new TypeError(`Not a valid NetCDF v3.x file: ${y}`)}function Hv(d0){d0.offset%4!=0&&d0.skip(4-d0.offset%4)}function gy(d0){const y=d0.readUint32(),N=d0.readChars(y);return Hv(d0),N}function Qv(d0,y){const N={version:y},K={length:d0.readUint32()},ne=(function(lt){const Pt={};let Ht,Dt;const Zt=lt.readUint32();let Er;if(Zt===0)return yv(lt.readUint32()!==0,"wrong empty tag for list of dimensions"),[];{yv(Zt!==10,"wrong tag for list of dimensions");const Np=lt.readUint32();Er=new Array(Np);for(let Zo=0;Zo<Np;Zo++){const la=gy(lt),Dp=lt.readUint32();Dp===0&&(Ht=Zo,Dt=la),Er[Zo]={name:la,size:Dp}}}return Ht!==void 0&&(Pt.recordId=Ht),Dt!==void 0&&(Pt.recordName=Dt),Pt.dimensions=Er,Pt})(d0);Array.isArray(ne)||(K.id=ne.recordId,K.name=ne.recordName,N.dimensions=ne.dimensions),N.globalAttributes=Ty(d0);const Rt=(function(lt,Pt,Ht){const Dt=lt.readUint32();let Zt,Er=0;if(Dt===0)return yv(lt.readUint32()!==0,"wrong empty tag for list of variables"),[];{yv(Dt!==11,"wrong tag for list of variables");const Np=lt.readUint32();Zt=new Array(Np);for(let Zo=0;Zo<Np;Zo++){const la=gy(lt),Dp=lt.readUint32(),wp=new Array(Dp);for(let H0=0;H0<Dp;H0++)wp[H0]=lt.readUint32();const Vp=Ty(lt),Kp=lt.readUint32();yv(Kp<1&&Kp>6,`non valid type ${Kp}`);const r0=lt.readUint32();let D0=lt.readUint32();Ht===2&&(yv(D0>0,"offsets larger than 4GB not supported"),D0=lt.readUint32());let E0=!1;Pt!==void 0&&wp[0]===Pt&&(Er+=r0,E0=!0),Zt[Zo]={name:la,dimensions:wp,attributes:Vp,type:$g(Kp),size:r0,offset:D0,record:E0}}}return{variables:Zt,recordStep:Er}})(d0,K?.id,y);return Array.isArray(Rt)||(N.variables=Rt.variables,K.recordStep=Rt.recordStep),N.recordDimension=K,N}function Ty(d0){const y=d0.readUint32();let N;if(y===0)return yv(d0.readUint32()!==0,"wrong empty tag for list of attributes"),[];{yv(y!==12,"wrong tag for list of attributes");const K=d0.readUint32();N=new Array(K);for(let ne=0;ne<K;ne++){const Rt=gy(d0),lt=d0.readUint32();yv(lt<1||lt>6,`non valid type ${lt}`);const Pt=d0.readUint32(),Ht=Vv(d0,lt,Pt);Hv(d0),N[ne]={name:Rt,type:$g(lt),value:Ht}}}return N}function $v(){const d0=[];d0.push("DIMENSIONS");for(const N of this.dimensions)d0.push(`  ${N.name.padEnd(30)} = size: ${N.size}`);d0.push(""),d0.push("GLOBAL ATTRIBUTES");for(const N of this.globalAttributes)d0.push(`  ${N.name.padEnd(30)} = ${N.value}`);const y=JSON.parse(JSON.stringify(this.variables));d0.push(""),d0.push("VARIABLES:");for(const N of y){N.value=this.getDataVariable(N);let K=JSON.stringify(N.value);K.length>50&&(K=K.substring(0,50)),isNaN(N.value.length)||(K+=` (length: ${N.value.length})`),d0.push(`  ${N.name.padEnd(30)} = ${K}`)}return d0.join(`
`)}class Cv{constructor(y){this.toString=$v;const N=new U1(y);N.setBigEndian(),yv(N.readChars(3)!=="CDF","should start with CDF");const K=N.readByte();yv(K>2,"unknown version"),this.header=Qv(N,K),this.buffer=N}get version(){return this.header.version===1?"classic format":"64-bit offset format"}get recordDimension(){return this.header.recordDimension}get dimensions(){return this.header.dimensions}get globalAttributes(){return this.header.globalAttributes}getAttribute(y){const N=this.globalAttributes.find(K=>K.name===y);return N?N.value:null}getDataVariableAsString(y){const N=this.getDataVariable(y);return N?N.join(""):null}get variables(){return this.header.variables}getDataVariable(y){let N;if(N=typeof y=="string"?this.header.variables.find(K=>K.name===y):y,N===void 0)throw new Error("Not a valid NetCDF v3.x file: variable not found");return this.buffer.seek(N.offset),N.record?(function(K,ne,Rt){const lt=Yv(ne.type),Pt=ne.size?ne.size/Sv(lt):1,Ht=Rt.length,Dt=new Array(Ht),Zt=Rt.recordStep;if(!Zt)throw new Error("recordDimension.recordStep is undefined");for(let Er=0;Er<Ht;Er++){const Np=K.offset;Dt[Er]=Vv(K,lt,Pt),K.seek(Np+Zt)}return Dt})(this.buffer,N,this.header.recordDimension):(function(K,ne){const Rt=Yv(ne.type),lt=ne.size/Sv(Rt),Pt=new Array(lt);for(let Ht=0;Ht<lt;Ht++)Pt[Ht]=Vv(K,Rt,1);return Pt})(this.buffer,N)}dataVariableExists(y){return this.header.variables.find(N=>N.name===y)!==void 0}attributeExists(y){return this.globalAttributes.find(N=>N.name===y)!==void 0}}class wg{static sameObj(y,N){return y&&N?JSON.stringify(y)==JSON.stringify(N):y==N}constructor(y,N,K){this.atoms=[],this.frames=[],this.box=null,this.atomdfs=null,this.id=0,this.hidden=!1,this.molObj=null,this.renderedMolObj=null,this.lastColors=null,this.modelData={},this.modelDatas=null,this.idMatrix=new c.Matrix4,this.dontDuplicateAtoms=!0,this.defaultColor=h.elementColors.defaultColor,this.defaultStickRadius=.25,this.options=N||{},this.viewer=K,this.ElementColors=this.options.defaultcolors?this.options.defaultcolors:h.elementColors.defaultColors,this.defaultSphereRadius=this.options.defaultSphereRadius?this.options.defaultSphereRadius:1.5,this.defaultCartoonQuality=this.options.cartoonQuality?this.options.cartoonQuality:10,this.id=y}getRadiusFromStyle(y,N){var K=this.defaultSphereRadius;if(N.radius!==void 0)K=N.radius;else if(wg.vdwRadii[y.elem])K=wg.vdwRadii[y.elem];else if(y.elem.length>1){let ne=y.elem;ne=ne[0].toUpperCase()+ne[1].toLowerCase(),wg.vdwRadii[ne]&&(K=wg.vdwRadii[ne])}return N.scale!==void 0&&(K*=N.scale),K}drawAtomCross(y,N){if(y.style.cross){var K=y.style.cross;if(!K.hidden){var ne=K.linewidth||wg.defaultlineWidth;N[ne]||(N[ne]=new l.Geometry);var Rt=N[ne].updateGeoGroup(6),lt=this.getRadiusFromStyle(y,K),Pt=[[lt,0,0],[-lt,0,0],[0,lt,0],[0,-lt,0],[0,0,lt],[0,0,-lt]],Ht=y.clickable||y.hoverable;Ht&&y.intersectionShape===void 0&&(y.intersectionShape={sphere:[],cylinder:[],line:[]});for(var Dt=(0,g.getColorFromStyle)(y,K),Zt=Rt.vertexArray,Er=Rt.colorArray,Np=0;Np<6;Np++){var Zo=3*Rt.vertices;if(Rt.vertices++,Zt[Zo]=y.x+Pt[Np][0],Zt[Zo+1]=y.y+Pt[Np][1],Zt[Zo+2]=y.z+Pt[Np][2],Er[Zo]=Dt.r,Er[Zo+1]=Dt.g,Er[Zo+2]=Dt.b,Ht){var la=new c.Vector3(Pt[Np][0],Pt[Np][1],Pt[Np][2]);la.multiplyScalar(.1),la.set(la.x+y.x,la.y+y.y,la.z+y.z),y.intersectionShape.line.push(la)}}}}}getGoodCross(y,N,K,ne){for(var Rt=null,lt=-1,Pt=0,Ht=y.bonds.length;Pt<Ht;Pt++)if(y.bonds[Pt]!=N.index){let Zt=y.bonds[Pt],Er=this.atoms[Zt],Np=new c.Vector3(Er.x,Er.y,Er.z).clone();Np.sub(K);let Zo=Np.clone();Zo.cross(ne);var Dt=Zo.lengthSq();if(Dt>lt&&(Rt=Zo,(lt=Dt)>.1))return Rt}return Rt}getSideBondV(y,N,K){var ne,Rt,lt,Pt,Ht=new c.Vector3(y.x,y.y,y.z),Dt=new c.Vector3(N.x,N.y,N.z).clone(),Zt=null;if(Dt.sub(Ht),y.bonds.length===1)N.bonds.length===1?(Zt=Dt.clone(),Math.abs(Zt.x)>1e-4?Zt.y+=1:Zt.x+=1):(ne=(K+1)%N.bonds.length,Rt=N.bonds[ne],(lt=this.atoms[Rt]).index==y.index&&(ne=(ne+1)%N.bonds.length,Rt=N.bonds[ne],lt=this.atoms[Rt]),(Pt=new c.Vector3(lt.x,lt.y,lt.z).clone()).sub(Ht),(Zt=Pt.clone()).cross(Dt));else if((Zt=this.getGoodCross(y,N,Ht,Dt)).lengthSq()<.01){var Er=this.getGoodCross(N,y,Ht,Dt);Er!=null&&(Zt=Er)}return Zt.lengthSq()<.01&&(Zt=Dt.clone(),Math.abs(Zt.x)>1e-4?Zt.y+=1:Zt.x+=1),Zt.cross(Dt),Zt.normalize(),Zt}addLine(y,N,K,ne,Rt,lt){y[K]=ne.x,y[K+1]=ne.y,y[K+2]=ne.z,N[K]=lt.r,N[K+1]=lt.g,N[K+2]=lt.b,y[K+3]=Rt.x,y[K+4]=Rt.y,y[K+5]=Rt.z,N[K+3]=lt.r,N[K+4]=lt.g,N[K+5]=lt.b}drawBondLines(y,N,K){if(y.style.line){var ne=y.style.line;if(!ne.hidden){var Rt,lt,Pt,Ht,Dt=ne.linewidth||wg.defaultlineWidth;K[Dt]||(K[Dt]=new l.Geometry);for(var Zt=K[Dt].updateGeoGroup(6*y.bonds.length),Er=Zt.vertexArray,Np=Zt.colorArray,Zo=0;Zo<y.bonds.length;Zo++){var la=N[y.bonds[Zo]];if(la.style.line&&!(y.index>=la.index)){var Dp=new c.Vector3(y.x,y.y,y.z),wp=new c.Vector3(la.x,la.y,la.z),Vp=Dp.clone().add(wp).multiplyScalar(.5),Kp=!1,r0=y.clickable||y.hoverable,D0=la.clickable||la.hoverable;(r0||D0)&&(r0&&(y.intersectionShape===void 0&&(y.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),y.intersectionShape.line.push(Dp),y.intersectionShape.line.push(Vp)),D0&&(la.intersectionShape===void 0&&(la.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),la.intersectionShape.line.push(Vp),la.intersectionShape.line.push(wp)));var E0=(0,g.getColorFromStyle)(y,y.style.line),H0=(0,g.getColorFromStyle)(la,la.style.line);if(y.bondStyles&&y.bondStyles[Zo]){var Q0=y.bondStyles[Zo];if(!Q0.iswire)continue;Q0.singleBond&&(Kp=!0),Q0.color1!==void 0&&(E0=h.CC.color(Q0.color1)),Q0.color2!==void 0&&(H0=h.CC.color(Q0.color2))}var lm,hm,q0=3*Zt.vertices;if(y.bondOrder[Zo]>1&&y.bondOrder[Zo]<4&&!Kp){var Bm=this.getSideBondV(y,la,Zo),Im=wp.clone();Im.sub(Dp),y.bondOrder[Zo]==2?(Bm.multiplyScalar(.1),(Rt=Dp.clone()).add(Bm),(lt=Dp.clone()).sub(Bm),(Pt=Rt.clone()).add(Im),(Ht=lt.clone()).add(Im),E0==H0?(Zt.vertices+=4,this.addLine(Er,Np,q0,Rt,Pt,E0),this.addLine(Er,Np,q0+6,lt,Ht,E0)):(Zt.vertices+=8,Im.multiplyScalar(.5),(lm=Rt.clone()).add(Im),(hm=lt.clone()).add(Im),this.addLine(Er,Np,q0,Rt,lm,E0),this.addLine(Er,Np,q0+6,lm,Pt,H0),this.addLine(Er,Np,q0+12,lt,hm,E0),this.addLine(Er,Np,q0+18,hm,Ht,H0))):y.bondOrder[Zo]==3&&(Bm.multiplyScalar(.1),(Rt=Dp.clone()).add(Bm),(lt=Dp.clone()).sub(Bm),(Pt=Rt.clone()).add(Im),(Ht=lt.clone()).add(Im),E0==H0?(Zt.vertices+=6,this.addLine(Er,Np,q0,Dp,wp,E0),this.addLine(Er,Np,q0+6,Rt,Pt,E0),this.addLine(Er,Np,q0+12,lt,Ht,E0)):(Zt.vertices+=12,Im.multiplyScalar(.5),(lm=Rt.clone()).add(Im),(hm=lt.clone()).add(Im),this.addLine(Er,Np,q0,Dp,Vp,E0),this.addLine(Er,Np,q0+6,Vp,wp,H0),this.addLine(Er,Np,q0+12,Rt,lm,E0),this.addLine(Er,Np,q0+18,lm,Pt,H0),this.addLine(Er,Np,q0+24,lt,hm,E0),this.addLine(Er,Np,q0+30,hm,Ht,H0)))}else E0==H0?(Zt.vertices+=2,this.addLine(Er,Np,q0,Dp,wp,E0)):(Zt.vertices+=4,this.addLine(Er,Np,q0,Dp,Vp,E0),this.addLine(Er,Np,q0+6,Vp,wp,H0))}}}}}drawAtomSphere(y,N){if(y.style.sphere){var K=y.style.sphere;if(!K.hidden){var ne=(0,g.getColorFromStyle)(y,K),Rt=this.getRadiusFromStyle(y,K);if((y.clickable===!0||y.hoverable)&&y.intersectionShape!==void 0){var lt=new c.Vector3(y.x,y.y,y.z);y.intersectionShape.sphere.push(new u.Sphere(lt,Rt))}a.drawSphere(N,y,Rt,ne)}}}drawAtomClickSphere(y){if(y.style.clicksphere){var N=y.style.clicksphere;if(!N.hidden){var K=this.getRadiusFromStyle(y,N);if((y.clickable===!0||y.hoverable)&&y.intersectionShape!==void 0){var ne=new c.Vector3(y.x,y.y,y.z);y.intersectionShape.sphere.push(new u.Sphere(ne,K))}}}}drawAtomInstanced(y,N){if(y.style.sphere){var K=y.style.sphere;if(!K.hidden){var ne=this.getRadiusFromStyle(y,K),Rt=(0,g.getColorFromStyle)(y,K),lt=N.updateGeoGroup(1),Pt=lt.vertices,Ht=3*Pt,Dt=lt.vertexArray,Zt=lt.colorArray,Er=lt.radiusArray;if(Dt[Ht]=y.x,Dt[Ht+1]=y.y,Dt[Ht+2]=y.z,Zt[Ht]=Rt.r,Zt[Ht+1]=Rt.g,Zt[Ht+2]=Rt.b,Er[Pt]=ne,(y.clickable===!0||y.hoverable)&&y.intersectionShape!==void 0){var Np=new c.Vector3(y.x,y.y,y.z);y.intersectionShape.sphere.push(new u.Sphere(Np,ne))}lt.vertices+=1}}}drawSphereImposter(y,N,K,ne){var Rt,lt=y.updateGeoGroup(4),Pt=lt.vertices,Ht=3*Pt,Dt=lt.vertexArray,Zt=lt.colorArray;for(Rt=0;Rt<4;Rt++)Dt[Ht+3*Rt]=N.x,Dt[Ht+3*Rt+1]=N.y,Dt[Ht+3*Rt+2]=N.z;var Er=lt.normalArray;for(Rt=0;Rt<4;Rt++)Zt[Ht+3*Rt]=ne.r,Zt[Ht+3*Rt+1]=ne.g,Zt[Ht+3*Rt+2]=ne.b;Er[Ht+0]=-K,Er[Ht+1]=K,Er[Ht+2]=0,Er[Ht+3]=-K,Er[Ht+4]=-K,Er[Ht+5]=0,Er[Ht+6]=K,Er[Ht+7]=-K,Er[Ht+8]=0,Er[Ht+9]=K,Er[Ht+10]=K,Er[Ht+11]=0,lt.vertices+=4;var Np=lt.faceArray,Zo=lt.faceidx;Np[Zo+0]=Pt,Np[Zo+1]=Pt+1,Np[Zo+2]=Pt+2,Np[Zo+3]=Pt+2,Np[Zo+4]=Pt+3,Np[Zo+5]=Pt,lt.faceidx+=6}drawAtomImposter(y,N){if(y.style.sphere){var K=y.style.sphere;if(!K.hidden){var ne=this.getRadiusFromStyle(y,K),Rt=(0,g.getColorFromStyle)(y,K);if((y.clickable===!0||y.hoverable)&&y.intersectionShape!==void 0){var lt=new c.Vector3(y.x,y.y,y.z);y.intersectionShape.sphere.push(new u.Sphere(lt,ne))}this.drawSphereImposter(N,y,ne,Rt)}}}calculateDashes(y,N,K,ne,Rt){var lt=Math.sqrt(Math.pow(y.x-N.x,2)+Math.pow(y.y-N.y,2)+Math.pow(y.z-N.z,2));K=Math.max(K,0),Rt=Math.max(Rt,0)+2*K,(ne=Math.max(ne,.001))+Rt>lt&&(ne=lt,Rt=0);var Pt,Ht=Math.floor((lt-ne)/(ne+Rt))+1;Rt=(lt-Ht*ne)/Ht;for(var Dt=new c.Vector3(y.x,y.y,y.z),Zt=new c.Vector3((N.x-y.x)/(lt/Rt),(N.y-y.y)/(lt/Rt),(N.z-y.z)/(lt/Rt)),Er=new c.Vector3((N.x-y.x)/(lt/ne),(N.y-y.y)/(lt/ne),(N.z-y.z)/(lt/ne)),Np=[],Zo=0;Zo<Ht;Zo++)Pt=new c.Vector3(Dt.x+Er.x,Dt.y+Er.y,Dt.z+Er.z),Np.push({from:Dt,to:Pt}),Dt=new c.Vector3(Pt.x+Zt.x,Pt.y+Zt.y,Pt.z+Zt.z);return Np}static drawStickImposter(y,N,K,ne,Rt,lt=0,Pt=0){for(var Ht=y.updateGeoGroup(4),Dt=Ht.vertices,Zt=3*Dt,Er=Ht.vertexArray,Np=Ht.colorArray,Zo=Ht.radiusArray,la=Ht.normalArray,Dp=Rt.r,wp=Rt.g,Vp=Rt.b,Kp=function(Q0){var lm=-Q0;return lm==0&&(lm=-1e-4),lm},r0=Zt,D0=0;D0<4;D0++)Er[r0]=N.x,la[r0]=K.x,Np[r0]=Dp,Er[++r0]=N.y,la[r0]=K.y,Np[r0]=wp,Er[++r0]=N.z,la[r0]=K.z,Np[r0]=D0<2?Vp:Kp(Vp),r0++;Ht.vertices+=4,Zo[Dt]=-ne,Zo[Dt+1]=ne,Zo[Dt+2]=-ne,Zo[Dt+3]=ne;var E0=Ht.faceArray,H0=Ht.faceidx;E0[H0+0]=Dt,E0[H0+1]=Dt+1,E0[H0+2]=Dt+2,E0[H0+3]=Dt+2,E0[H0+4]=Dt+3,E0[H0+5]=Dt,Ht.faceidx+=6}drawBondSticks(y,N,K){var ne,Rt;if(y.style.stick){var lt=y.style.stick;if(!lt.hidden){var Pt,Ht,Dt,Zt,Er,Np,Zo,la,Dp,wp,Vp,Kp,r0,D0,E0=lt.radius||this.defaultStickRadius,H0=lt.doubleBondScaling||.4,Q0=lt.tripleBondScaling||.25,lm=((ne=lt.dashedBondConfig)===null||ne===void 0?void 0:ne.dashLength)||.1,hm=((Rt=lt.dashedBondConfig)===null||Rt===void 0?void 0:Rt.gapLength)||.25,q0=E0,Bm=lt.singleBonds||!1,Im=lt.dashedBonds||!1,h1=0,i1=0,M1=(0,g.getColorFromStyle)(y,lt);!y.capDrawn&&y.bonds.length<4&&(h1=2);var L1=ay=>{var Tv=K.imposter?wg.drawStickImposter:a.drawCylinder;return!Im&&ay>=1?Tv:(yy,ey,iy,xy,Ly,_y=0,Iy=0,Dv=.1,Wv=.25)=>{this.calculateDashes(ey,iy,xy,Dv,Wv).forEach(Zv=>{Tv(yy,Zv.from,Zv.to,xy,Ly,_y,Iy)})}};for(Dt=0;Dt<y.bonds.length;Dt++){var c1=L1(y.bondOrder[Dt]),j1=N[y.bonds[Dt]];if(Kp=r0=D0=null,y.index<j1.index){var Hm=j1.style;if(!Hm.stick||Hm.stick.hidden)continue;var t1=(0,g.getColorFromStyle)(j1,Hm.stick);if(q0=E0,Zt=Bm,y.bondStyles&&y.bondStyles[Dt]){if((Er=y.bondStyles[Dt]).iswire)continue;Er.radius&&(q0=Er.radius),Er.singleBond&&(Zt=!0),Er.color1!==void 0&&(M1=h.CC.color(Er.color1)),Er.color2!==void 0&&(t1=h.CC.color(Er.color2))}var Y1=new c.Vector3(y.x,y.y,y.z),d1=new c.Vector3(j1.x,j1.y,j1.z);if(y.bondOrder[Dt]<=1||Zt||y.bondOrder[Dt]>3){if(y.bondOrder[Dt]<1&&(q0*=y.bondOrder[Dt]),!j1.capDrawn&&j1.bonds.length<4&&(i1=2),M1!=t1?(Kp=new c.Vector3().addVectors(Y1,d1).multiplyScalar(.5),c1(K,Y1,Kp,q0,M1,h1,0,lm,hm),c1(K,Kp,d1,q0,t1,0,i1,lm,hm)):c1(K,Y1,d1,q0,M1,h1,i1,lm,hm),Pt=y.clickable||y.hoverable,Ht=j1.clickable||j1.hoverable,Pt||Ht){if(Kp||(Kp=new c.Vector3().addVectors(Y1,d1).multiplyScalar(.5)),Pt){var q1=new u.Cylinder(Y1,Kp,q0),Z1=new u.Sphere(Y1,q0);y.intersectionShape.cylinder.push(q1),y.intersectionShape.sphere.push(Z1)}if(Ht){var x1=new u.Cylinder(d1,Kp,q0),ag=new u.Sphere(d1,q0);j1.intersectionShape.cylinder.push(x1),j1.intersectionShape.sphere.push(ag)}}}else if(y.bondOrder[Dt]>1){var Og=0,eg=0;q0!=E0&&(Og=2,eg=2);var C1,Bg,xg,Ig,_g,Hg=d1.clone(),vv=null;Hg.sub(Y1),vv=this.getSideBondV(y,j1,Dt),y.bondOrder[Dt]==2?(C1=q0*H0,vv.multiplyScalar(1.5*C1),(Bg=Y1.clone()).add(vv),(xg=Y1.clone()).sub(vv),(Ig=Bg.clone()).add(Hg),(_g=xg.clone()).add(Hg),M1!=t1?(Kp=new c.Vector3().addVectors(Bg,Ig).multiplyScalar(.5),r0=new c.Vector3().addVectors(xg,_g).multiplyScalar(.5),c1(K,Bg,Kp,C1,M1,Og,0),c1(K,Kp,Ig,C1,t1,0,eg),c1(K,xg,r0,C1,M1,Og,0),c1(K,r0,_g,C1,t1,0,eg)):(c1(K,Bg,Ig,C1,M1,Og,eg),c1(K,xg,_g,C1,M1,Og,eg)),Pt=y.clickable||y.hoverable,Ht=j1.clickable||j1.hoverable,(Pt||Ht)&&(Kp||(Kp=new c.Vector3().addVectors(Bg,Ig).multiplyScalar(.5)),r0||(r0=new c.Vector3().addVectors(xg,_g).multiplyScalar(.5)),Pt&&(Np=new u.Cylinder(Bg,Kp,C1),Zo=new u.Cylinder(xg,r0,C1),y.intersectionShape.cylinder.push(Np),y.intersectionShape.cylinder.push(Zo)),Ht&&(Dp=new u.Cylinder(Ig,Kp,C1),wp=new u.Cylinder(_g,r0,C1),j1.intersectionShape.cylinder.push(Dp),j1.intersectionShape.cylinder.push(wp)))):y.bondOrder[Dt]==3&&(C1=q0*Q0,vv.cross(Hg),vv.normalize(),vv.multiplyScalar(3*C1),(Bg=Y1.clone()).add(vv),(xg=Y1.clone()).sub(vv),(Ig=Bg.clone()).add(Hg),(_g=xg.clone()).add(Hg),M1!=t1?(Kp=new c.Vector3().addVectors(Bg,Ig).multiplyScalar(.5),r0=new c.Vector3().addVectors(xg,_g).multiplyScalar(.5),D0=new c.Vector3().addVectors(Y1,d1).multiplyScalar(.5),c1(K,Bg,Kp,C1,M1,Og,0),c1(K,Kp,Ig,C1,t1,0,eg),c1(K,Y1,D0,C1,M1,h1,0),c1(K,D0,d1,C1,t1,0,i1),c1(K,xg,r0,C1,M1,Og,0),c1(K,r0,_g,C1,t1,0,eg)):(c1(K,Bg,Ig,C1,M1,Og,eg),c1(K,Y1,d1,C1,M1,h1,i1),c1(K,xg,_g,C1,M1,Og,eg)),Pt=y.clickable||y.hoverable,Ht=j1.clickable||j1.hoverable,(Pt||Ht)&&(Kp||(Kp=new c.Vector3().addVectors(Bg,Ig).multiplyScalar(.5)),r0||(r0=new c.Vector3().addVectors(xg,_g).multiplyScalar(.5)),D0||(D0=new c.Vector3().addVectors(Y1,d1).multiplyScalar(.5)),Pt&&(Np=new u.Cylinder(Bg.clone(),Kp.clone(),C1),Zo=new u.Cylinder(xg.clone(),r0.clone(),C1),la=new u.Cylinder(Y1.clone(),D0.clone(),C1),y.intersectionShape.cylinder.push(Np),y.intersectionShape.cylinder.push(Zo),y.intersectionShape.cylinder.push(la)),Ht&&(Dp=new u.Cylinder(Ig.clone(),Kp.clone(),C1),wp=new u.Cylinder(_g.clone(),r0.clone(),C1),Vp=new u.Cylinder(d1.clone(),D0.clone(),C1),j1.intersectionShape.cylinder.push(Dp),j1.intersectionShape.cylinder.push(wp),j1.intersectionShape.cylinder.push(Vp))))}}}var jv=!1,Uv=0,vy=!1;for(Dt=0;Dt<y.bonds.length;Dt++)Zt=Bm,y.bondStyles&&y.bondStyles[Dt]&&((Er=y.bondStyles[Dt]).singleBond&&(Zt=!0),Er.radius&&Er.radius!=E0&&(vy=!0)),(Zt||y.bondOrder[Dt]==1)&&Uv++;vy?Uv>0&&(jv=!0):Uv==0&&(y.bonds.length>0||lt.showNonBonded)&&(jv=!0),jv&&(q0=E0,K.imposter?this.drawSphereImposter(K.sphereGeometry,y,q0,M1):a.drawSphere(K,y,q0,M1))}}}createMolObj(y,N){N=N||{};var K,ne,Rt,lt,Pt=new l.Object3D,Ht=[],Dt={},Zt={},Er=this.drawAtomSphere,Np=null,Zo=null;N.supportsImposters?(Er=this.drawAtomImposter,(Np=new l.Geometry(!0)).imposter=!0,(Zo=new l.Geometry(!0,!0)).imposter=!0,Zo.sphereGeometry=new l.Geometry(!0),Zo.sphereGeometry.imposter=!0,Zo.drawnCaps={}):N.supportsAIA?(Er=this.drawAtomInstanced,(Np=new l.Geometry(!1,!0,!0)).instanced=!0,Zo=new l.Geometry(!0)):(Np=new l.Geometry(!0),Zo=new l.Geometry(!0));var la,Dp={},wp=[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];for(K=0,Rt=y.length;K<Rt;K++){var Vp=y[K];if(Vp&&Vp.style){for(ne in(Vp.clickable||Vp.hoverable)&&Vp.intersectionShape===void 0&&(Vp.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),lt={line:void 0,cross:void 0,stick:void 0,sphere:void 0})Vp.style[ne]?Vp.style[ne].opacity?lt[ne]=parseFloat(Vp.style[ne].opacity):lt[ne]=1:lt[ne]=void 0,Dp[ne]?lt[ne]!=null&&Dp[ne]!=lt[ne]&&(console.log("Warning: "+ne+" opacity is ambiguous"),Dp[ne]=1):Dp[ne]=lt[ne];Er.call(this,Vp,Np),this.drawAtomClickSphere(Vp),this.drawAtomCross(Vp,Zt),this.drawBondLines(Vp,y,Dt),this.drawBondSticks(Vp,y,Zo),Vp.style.cartoon===void 0||Vp.style.cartoon.hidden||(Vp.style.cartoon.color!=="spectrum"||typeof Vp.resi!="number"||Vp.hetflag||(Vp.resi<wp[0]&&(wp[0]=Vp.resi),Vp.resi>wp[1]&&(wp[1]=Vp.resi)),Ht.push(Vp))}}if(Ht.length>0&&jo(Pt,Ht,wp,this.defaultCartoonQuality),Np&&Np.vertices>0){Np.initTypedArrays();var Kp=null,r0=null;Np.imposter?Kp=new l.SphereImposterMaterial({ambient:0,vertexColors:!0,reflectivity:0}):Np.instanced?(r0=new l.Geometry(!0),a.drawSphere(r0,{x:0,y:0,z:0},1,new h.Color(.5,.5,.5)),r0.initTypedArrays(),Kp=new l.InstancedMaterial({sphereMaterial:new l.MeshLambertMaterial({ambient:0,vertexColors:!0,reflectivity:0}),sphere:r0})):Kp=new l.MeshLambertMaterial({ambient:0,vertexColors:!0,reflectivity:0}),Dp.sphere<1&&Dp.sphere>=0&&(Kp.transparent=!0,Kp.opacity=Dp.sphere),r0=new l.Mesh(Np,Kp),Pt.add(r0)}if(Zo.vertices>0){var D0=null,E0=null,H0=Zo.sphereGeometry;H0&&H0.vertices!==void 0&&H0.vertices!=0||(H0=null),Zo.initTypedArrays(),H0&&H0.initTypedArrays();var Q0={ambient:0,vertexColors:!0,reflectivity:0};Zo.imposter?(D0=new l.StickImposterMaterial(Q0),E0=new l.SphereImposterMaterial(Q0)):(D0=new l.MeshLambertMaterial(Q0),E0=new l.MeshLambertMaterial(Q0),D0.wireframe&&(Zo.setUpWireframe(),H0&&H0.setUpWireframe())),Dp.stick<1&&Dp.stick>=0&&(D0.transparent=!0,D0.opacity=Dp.stick,E0.transparent=!0,E0.opacity=Dp.stick);var lm=new l.Mesh(Zo,D0);if(Pt.add(lm),H0){var hm=new l.Mesh(H0,E0);Pt.add(hm)}}for(K in Dt)if(Dt.hasOwnProperty(K)){la=K;var q0=new l.LineBasicMaterial({linewidth:la,vertexColors:!0});Dp.line<1&&Dp.line>=0&&(q0.transparent=!0,q0.opacity=Dp.line),Dt[K].initTypedArrays();var Bm=new l.Line(Dt[K],q0,l.LineStyle.LinePieces);Pt.add(Bm)}for(K in Zt)if(Zt.hasOwnProperty(K)){la=K;var Im=new l.LineBasicMaterial({linewidth:la,vertexColors:!0});Dp.cross<1&&Dp.cross>=0&&(Im.transparent=!0,Im.opacity=Dp.cross),Zt[K].initTypedArrays();var h1=new l.Line(Zt[K],Im,l.LineStyle.LinePieces);Pt.add(h1)}if(this.dontDuplicateAtoms&&this.modelData.symmetries&&this.modelData.symmetries.length>0){var i1,M1=new l.Object3D;for(i1=0;i1<this.modelData.symmetries.length;i1++){var L1=new l.Object3D;(L1=Pt.clone()).matrix.copy(this.modelData.symmetries[i1]),L1.matrixAutoUpdate=!1,M1.add(L1)}return M1}return Pt}getViewer(){return this.viewer}getInternalState(){return{atoms:this.atoms,frames:this.frames}}setInternalState(y){this.atoms=y.atoms,this.frames=y.frames,this.molObj=null}getCrystData(){if(this.modelData.cryst){if(!this.modelData.cryst.matrix){const y=this.modelData.cryst;this.modelData.cryst.matrix=(0,c.conversionMatrix3)(y.a,y.b,y.c,y.alpha,y.beta,y.gamma)}return this.modelData.cryst}return null}setCrystData(y,N,K,ne,Rt,lt){y=y||1,N=N||1,K=K||1,ne=ne||90,Rt=Rt||90,lt=lt||90;const Pt=(0,c.conversionMatrix3)(y,N,K,ne,Rt,lt);this.modelData.cryst={a:y,b:N,c:K,alpha:ne,beta:Rt,gamma:lt,matrix:Pt}}setCrystMatrix(y){y=y||new c.Matrix3(1,0,0,0,1,0,0,0,1),this.modelData.cryst={matrix:y}}getSymmetries(){return this.modelData.symmetries===void 0&&(this.modelData.symmetries=[this.idMatrix]),this.modelData.symmetries}setSymmetries(y){y===void 0?this.modelData.symmetries=[this.idMatrix]:(this.modelData.symmetries=y,this.molObj=null)}getID(){return this.id}getNumFrames(){return this.frames.numFrames!=null?this.frames.numFrames:this.frames.length}adjustCoord(y,N,K,ne){var Rt=N-y;return Rt<-K?N+ne:Rt>K?N-ne:N}adjustCoordinatesToBox(){if(this.box&&this.atomdfs)for(var y=this.box[0],N=this.box[1],K=this.box[2],ne=.9*y,Rt=.9*N,lt=.9*K,Pt=0;Pt<this.atomdfs.length;Pt++)for(var Ht=this.atomdfs[Pt],Dt=1;Dt<Ht.length;Dt++){var Zt=this.atoms[Ht[Dt][0]],Er=this.atoms[Ht[Dt][1]];Zt.x=this.adjustCoord(Er.x,Zt.x,ne,y),Zt.y=this.adjustCoord(Er.y,Zt.y,Rt,N),Zt.z=this.adjustCoord(Er.z,Zt.z,lt,K)}}setFrame(y){var N=this.getNumFrames();let K=this,ne=this.viewer;return new Promise(function(Rt,lt){if(N==0&&Rt(),(y<0||y>=N)&&(y=N-1),K.frames.url!=null){var Pt=K.frames.url;(0,g.getbin)(Pt+"/traj/frame/"+y+"/"+K.frames.path,void 0,"POST",void 0).then(function(Ht){for(var Dt=new Float32Array(Ht,44),Zt=0,Er=0;Er<K.atoms.length;Er++)K.atoms[Er].x=Dt[Zt++],K.atoms[Er].y=Dt[Zt++],K.atoms[Er].z=Dt[Zt++];K.box&&K.atomdfs&&K.adjustCoordinatesToBox(),Rt()}).catch(lt)}else K.atoms=K.frames[y],Rt();K.molObj=null,K.modelDatas&&y<K.modelDatas.length&&(K.modelData=K.modelDatas[y],K.unitCellObjects&&ne&&(ne.removeUnitCell(K),ne.addUnitCell(K)))})}addFrame(y){this.frames.push(y)}vibrate(y=10,N=1,K=!1,ne){var Rt=0,lt=y;let Pt=this.viewer;K&&(Rt=-y,lt=y),this.frames!==void 0&&this.frames.origIndex!==void 0?this.setFrame(this.frames.origIndex):this.setFrame(0),Rt<lt&&(this.frames=[]),K&&(this.frames.origIndex=y);for(var Ht=Rt;Ht<lt;Ht++){var Dt=[],Zt=this.frames.length;if(Ht!=0||ne){for(var Er=0;Er<this.atoms.length;Er++){var Np=(0,g.getAtomProperty)(this.atoms[Er],"dx"),Zo=(0,g.getAtomProperty)(this.atoms[Er],"dy"),la=(0,g.getAtomProperty)(this.atoms[Er],"dz"),Dp=new c.Vector3(Np,Zo,la),wp=new c.Vector3(this.atoms[Er].x,this.atoms[Er].y,this.atoms[Er].z),Vp=Ht*N/y;Dp.multiplyScalar(Vp),wp.add(Dp);var Kp={};for(var r0 in this.atoms[Er])Kp[r0]=this.atoms[Er][r0];if(Kp.x=wp.x,Kp.y=wp.y,Kp.z=wp.z,Dt.push(Kp),Pt&&ne){var D0=(0,g.extend)({},ne),E0=new c.Vector3(Np,Zo,la);if(E0.multiplyScalar(N),E0.add(wp),D0.start=wp,D0.end=E0,D0.frame=Zt,!D0.color){var H0=Kp.style.sphere;H0||(H0=Kp.style.stick),H0||(H0=Kp.style.line),D0.color=(0,g.getColorFromStyle)(Kp,H0)}Pt.addArrow(D0)}}this.frames.push(Dt)}else this.frames.push(this.atoms)}}setAtomDefaults(y){for(let N=0;N<y.length;N++){let K=y[N];K&&(K.style=K.style||(0,g.deepCopy)(wg.defaultAtomStyle),K.color=K.color||this.ElementColors[K.elem]||this.defaultColor,K.model=this.id,(K.clickable||K.hoverable)&&(K.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}))}}addMolData(y,N,K={}){var ne=wg.parseMolData(y,N,K);this.dontDuplicateAtoms=!K.duplicateAssemblyAtoms;var Rt=ne.modelData;if(Rt&&(Array.isArray(Rt)?(this.modelData=Rt[0],K.frames&&(this.modelDatas=Rt)):this.modelData=Rt),ne.box?this.box=ne.box:this.box=null,this.frames.length==0){for(let Pt=0;Pt<ne.length;Pt++)ne[Pt].length!=0&&this.frames.push(ne[Pt]);this.frames[0]&&(this.atoms=this.frames[0])}else if(K.frames)for(let Pt=0;Pt<ne.length;Pt++)this.frames.push(ne[Pt]);else for(var lt=0;lt<ne.length;lt++)this.addAtoms(ne[lt]);for(let Pt=0;Pt<this.frames.length;Pt++)this.setAtomDefaults(this.frames[Pt]);K.vibrate&&K.vibrate.frames&&K.vibrate.amplitude&&this.vibrate(K.vibrate.frames,K.vibrate.amplitude),K.style&&this.setStyle({},K.style)}setDontDuplicateAtoms(y){this.dontDuplicateAtoms=y}setModelData(y){this.modelData=y}propertyMatches(y,N){if(y==N)return!0;if(typeof N=="string"&&typeof y=="number"){var K=N.match(/(-?\d+)\s*-\s*(-?\d+)/);if(K){var ne=parseInt(K[1]),Rt=parseInt(K[2]);if(K&&y>=ne&&y<=Rt)return!0}}return!1}static deepCopyAndCache(y,N){if(typeof y!="object"||y==null||y instanceof wg||y.__cache_created)return y;const K={};for(const ne in y){const Rt=y[ne];if(Array.isArray(Rt)){K[ne]=[];for(let lt=0;lt<Rt.length;lt++)K[ne].push(wg.deepCopyAndCache(Rt[lt],N))}else K[ne]=typeof Rt=="object"&&ne!="properties"&&ne!="model"?wg.deepCopyAndCache(Rt,N):Rt;if(ne=="and"||ne=="or"){const lt=[];for(const Pt of K[ne]){const Ht=new Set;for(const Dt of N.selectedAtoms(Pt))Ht.add(Dt.index);lt.push(Ht)}if(ne=="and"){const Pt=function(Dt,Zt){const Er=new Set;for(const Np of Zt)Dt.has(Np)&&Er.add(Np);return Er};let Ht=new Set(lt[0]);for(const Dt of lt.splice(1))Ht=Pt(Ht,Dt);K[ne].__cached_results=Ht}else if(ne=="or"){const Pt=new Set;for(const Ht of lt)for(const Dt of Ht)Pt.add(Dt);K[ne].__cached_results=Pt}}}return K.__cache_created=!0,K}atomIsSelected(y,N){if(N===void 0)return!0;var K=!!N.invert,ne=!0;for(var Rt in N)if(Rt=="and"||Rt=="or"||Rt=="not"){if(Rt=="not"){if(this.atomIsSelected(y,N[Rt])){ne=!1;break}}else if(N[Rt].__cached_results===void 0&&(N=wg.deepCopyAndCache(N,this)),!(ne=N[Rt].__cached_results.has(y.index)))break}else if(Rt==="predicate"){if(!N.predicate(y)){ne=!1;break}}else if(Rt=="properties"&&y[Rt]){for(var lt in N.properties)if(!lt.startsWith("__cache")){if(y.properties[lt]===void 0){ne=!1;break}if(y.properties[lt]!=N.properties[lt]){ne=!1;break}}}else if(Rt=="model"){let Dt=N.model;if(typeof Dt=="number"&&Dt<0&&(Dt=this.viewer.getNextModelId()+Dt),Array.isArray(Dt)){let Zt=!1;for(let Er=0;Er<Dt.length;Er++)if(Dt[Er]==this||Dt[Er]==this.id){Zt=!0;break}if(!Zt){ne=!1;break}}else if(Dt!=this&&Dt!=this.id){ne=!1;break}}else if(N.hasOwnProperty(Rt)&&!wg.ignoredKeys.has(Rt)&&!Rt.startsWith("__cache")){if(y[Rt]===void 0){ne=!1;break}let Dt=!1;if(Rt==="bonds"){if(N[Rt]!=y.bonds.length){ne=!1;break}}else if(Array.isArray(N[Rt])){var Pt=N[Rt],Ht=y[Rt];for(let Zt=0;Zt<Pt.length;Zt++)if(this.propertyMatches(Ht,Pt[Zt])){Dt=!0;break}if(!Dt){ne=!1;break}}else{let Zt=N[Rt];if(!this.propertyMatches(y[Rt],Zt)){ne=!1;break}}}return K?!ne:ne}static squaredDistance(y,N){var K=N.x-y.x,ne=N.y-y.y,Rt=N.z-y.z;return K*K+ne*ne+Rt*Rt}expandAtomList(y,N){if(N<=0)return y;for(var K=(0,g.getExtent)(y,void 0),ne=[[],[],[]],Rt=0;Rt<3;Rt++)ne[0][Rt]=K[0][Rt]-N,ne[1][Rt]=K[1][Rt]+N,ne[2][Rt]=K[2][Rt];var lt=[];for(let Zt=0;Zt<this.atoms.length;Zt++){var Pt=this.atoms[Zt].x,Ht=this.atoms[Zt].y,Dt=this.atoms[Zt].z;Pt>=ne[0][0]&&Pt<=ne[1][0]&&Ht>=ne[0][1]&&Ht<=ne[1][1]&&Dt>=ne[0][2]&&Dt<=ne[1][2]&&(Pt>=K[0][0]&&Pt<=K[1][0]&&Ht>=K[0][1]&&Ht<=K[1][1]&&Dt>=K[0][2]&&Dt<=K[1][2]||lt.push(this.atoms[Zt]))}return lt}static getFloat(y){return typeof y=="number"?y:parseFloat(y)}selectedAtoms(y,N){var K=[];y=wg.deepCopyAndCache(y||{},this),N||(N=this.atoms);for(var ne=N.length,Rt=0;Rt<ne;Rt++){var lt=N[Rt];lt&&this.atomIsSelected(lt,y)&&K.push(lt)}if(y.hasOwnProperty("expand")){const Kp=wg.getFloat(y.expand);let r0=this.expandAtomList(K,Kp),D0=K.length;const E0=Kp*Kp;for(let H0=0;H0<r0.length;H0++)for(let Q0=0;Q0<D0;Q0++){var Pt=wg.squaredDistance(r0[H0],K[Q0]);Pt<E0&&Pt>0&&K.push(r0[H0])}}if(y.hasOwnProperty("within")&&y.within.hasOwnProperty("sel")&&y.within.hasOwnProperty("distance")){var Ht=this.selectedAtoms(y.within.sel,this.atoms),Dt={};const Kp=wg.getFloat(y.within.distance),r0=Kp*Kp;for(let D0=0;D0<Ht.length;D0++)for(let E0=0;E0<K.length;E0++){let H0=wg.squaredDistance(Ht[D0],K[E0]);H0<r0&&H0>0&&(Dt[E0]=1)}var Zt=[];if(y.within.invert)for(let D0=0;D0<K.length;D0++)Dt[D0]||Zt.push(K[D0]);else for(let D0 in Dt)Zt.push(K[D0]);K=Zt}if(y.hasOwnProperty("byres")){var Er={},Np=[],Zo=[];for(let Kp=0;Kp<K.length;Kp++){let r0=K[Kp];var la=r0.chain,Dp=r0.resi;if(Er[la]===void 0&&(Er[la]={}),r0.hasOwnProperty("resi")&&Er[la][Dp]===void 0){for(Er[la][Dp]=!0,Zo.push(r0);Zo.length>0;)if(r0=Zo.pop(),la=r0.chain,Dp=r0.resi,Np[r0.index]===void 0){Np[r0.index]=!0;for(var wp=0;wp<r0.bonds.length;wp++){var Vp=this.atoms[r0.bonds[wp]];Np[Vp.index]===void 0&&Vp.hasOwnProperty("resi")&&Vp.chain==la&&Vp.resi==Dp&&(Zo.push(Vp),K.push(Vp))}}}}}return K}addAtoms(y){this.molObj=null;var N,K=this.atoms.length,ne=[];for(N=0;N<y.length;N++)y[N].index===void 0&&(y[N].index=N),y[N].serial===void 0&&(y[N].serial=N),ne[y[N].index]=K+N;for(N=0;N<y.length;N++){var Rt=y[N],lt=ne[Rt.index],Pt=(0,g.extend)({},Rt);Pt.index=lt,Pt.bonds=[],Pt.bondOrder=[],Pt.model=this.id,Pt.style=Pt.style||(0,g.deepCopy)(wg.defaultAtomStyle),Pt.color===void 0&&(Pt.color=this.ElementColors[Pt.elem]||this.defaultColor);for(var Ht=Rt.bonds?Rt.bonds.length:0,Dt=0;Dt<Ht;Dt++){var Zt=ne[Rt.bonds[Dt]];Zt!==void 0&&(Pt.bonds.push(Zt),Pt.bondOrder.push(Rt.bondOrder?Rt.bondOrder[Dt]:1))}this.atoms.push(Pt)}}assignBonds(){(0,sa.assignBonds)(this.atoms,{assignBonds:!0})}removeAtoms(y){this.molObj=null;var N,K=[];for(N=0;N<y.length;N++)K[y[N].index]=!0;var ne=[];for(N=0;N<this.atoms.length;N++){var Rt=this.atoms[N];K[Rt.index]||ne.push(Rt)}this.atoms=[],this.addAtoms(ne)}setStyle(y,N,K){N===void 0&&K===void 0&&(N=y,y={}),typeof N=="string"&&(N=(0,g.specStringToObject)(N));var ne=!1,Rt=this,lt=function(Ht){var Dt=Rt.selectedAtoms(y,Ht);for(let Zt=0;Zt<Ht.length;Zt++)Ht[Zt]&&(Ht[Zt].capDrawn=!1);for(let Zt=0;Zt<Dt.length;Zt++){ne=!0,(Dt[Zt].clickable||Dt[Zt].hoverable)&&(Dt[Zt].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),K||(Dt[Zt].style={});for(let Er in N)N.hasOwnProperty(Er)&&(Dt[Zt].style[Er]=Dt[Zt].style[Er]||{},Object.assign(Dt[Zt].style[Er],N[Er]))}};if(y.frame!==void 0&&y.frame<this.frames.length){let Ht=y.frame;Ht<0&&(Ht=this.frames.length+Ht),lt(this.frames[Ht])}else{lt(this.atoms);for(var Pt=0;Pt<this.frames.length;Pt++)this.frames[Pt]!==this.atoms&&lt(this.frames[Pt])}ne&&(this.molObj=null)}setClickable(y,N,K){if(N=!!N,(K=(0,g.makeFunction)(K))!==null){var ne=this.selectedAtoms(y,this.atoms),Rt=ne.length;for(let lt=0;lt<Rt;lt++)ne[lt].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},ne[lt].clickable=N,K&&(ne[lt].callback=K);Rt>0&&(this.molObj=null)}else console.log("Callback is not a function")}setHoverable(y,N,K,ne){if(N=!!N,K=(0,g.makeFunction)(K),ne=(0,g.makeFunction)(ne),K!==null)if(ne!==null){var Rt=this.selectedAtoms(y,this.atoms),lt=Rt.length;for(let Pt=0;Pt<lt;Pt++)Rt[Pt].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},Rt[Pt].hoverable=N,K&&(Rt[Pt].hover_callback=K),ne&&(Rt[Pt].unhover_callback=ne);lt>0&&(this.molObj=null)}else console.log("Unhover_callback is not a function");else console.log("Hover_callback is not a function")}enableContextMenu(y,N){var K;N=!!N;var ne=this.selectedAtoms(y,this.atoms),Rt=ne.length;for(K=0;K<Rt;K++)ne[K].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},ne[K].contextMenuEnabled=N;Rt>0&&(this.molObj=null)}setColorByElement(y,N){if(this.molObj===null||!wg.sameObj(N,this.lastColors)){this.lastColors=N;var K=this.selectedAtoms(y,K);K.length>0&&(this.molObj=null);for(var ne=0;ne<K.length;ne++){var Rt=K[ne];N[Rt.elem]!==void 0&&(Rt.color=N[Rt.elem])}}}setColorByProperty(y,N,K,ne){var Rt,lt,Pt=this.selectedAtoms(y,Pt);for(this.lastColors=null,Pt.length>0&&(this.molObj=null),typeof K=="string"&&v.Gradient.builtinGradients[K]!==void 0&&(K=new v.Gradient.builtinGradients[K]),ne||(ne=K.range()),ne||(ne=(0,g.getPropertyRange)(Pt,N)),Rt=0;Rt<Pt.length;Rt++)lt=Pt[Rt],(0,g.getAtomProperty)(lt,N)!=null&&(lt.color=K.valueToHex(parseFloat(lt.properties[N]),ne))}setColorByFunction(y,N){var K=this.selectedAtoms(y,K);if(typeof N=="function"){this.lastColors=null,K.length>0&&(this.molObj=null);for(let ne=0;ne<K.length;ne++){let Rt=K[ne];Rt.color=N(Rt)}}}toCDObject(y=!1){var N={a:[],b:[]};y&&(N.s=[]);for(let ne=0;ne<this.atoms.length;ne++){let Rt={},lt=this.atoms[ne];if(Rt.x=lt.x,Rt.y=lt.y,Rt.z=lt.z,lt.elem!="C"&&(Rt.l=lt.elem),y){for(var K=0;K<N.s.length&&JSON.stringify(lt.style)!==JSON.stringify(N.s[K]);)K++;K===N.s.length&&N.s.push(lt.style),K!==0&&(Rt.s=K)}N.a.push(Rt);for(let Pt=0;Pt<lt.bonds.length;Pt++){let Ht=ne,Dt=lt.bonds[Pt];if(Ht>=Dt)continue;let Zt={b:Ht,e:Dt},Er=lt.bondOrder[Pt];Er!=1&&(Zt.o=Er),N.b.push(Zt)}}return N}globj(y,N){(this.molObj===null||N.regen)&&(this.molObj=this.createMolObj(this.atoms,N),this.renderedMolObj&&(y.remove(this.renderedMolObj),this.renderedMolObj=null),this.renderedMolObj=this.molObj.clone(),this.hidden&&(this.renderedMolObj.setVisible(!1),this.molObj.setVisible(!1)),y.add(this.renderedMolObj))}exportVRML(){return this.createMolObj(this.atoms,{supportsImposters:!1,supportsAIA:!1}).vrml()}removegl(y){this.renderedMolObj&&(this.renderedMolObj.geometry!==void 0&&this.renderedMolObj.geometry.dispose(),this.renderedMolObj.material!==void 0&&this.renderedMolObj.material.dispose(),y.remove(this.renderedMolObj),this.renderedMolObj=null),this.molObj=null}hide(){this.hidden=!0,this.renderedMolObj&&this.renderedMolObj.setVisible(!1),this.molObj&&this.molObj.setVisible(!1)}show(){this.hidden=!1,this.renderedMolObj&&this.renderedMolObj.setVisible(!0),this.molObj&&this.molObj.setVisible(!0)}addPropertyLabels(y,N,K){let ne=this.selectedAtoms(N),Rt=this.viewer,lt=(0,g.deepCopy)(K);for(let Ht=0;Ht<ne.length;Ht++){let Dt=ne[Ht];var Pt=null;Dt[y]!==void 0?Pt=String(Dt[y]):Dt.properties[y]!==void 0&&(Pt=String(Dt.properties[y])),Pt!=null&&(lt.position=Dt,Rt.addLabel(Pt,lt))}}addResLabels(y,N,K=!1){let ne=this.viewer;var Rt=[],lt=function(Ht,Dt){for(var Zt=Ht.selectedAtoms(y,Zt),Er={},Np=0;Np<Zt.length;Np++){var Zo=Zt[Np],la=Zo.chain,Dp=Zo.resn+""+Zo.resi;Er[la]||(Er[la]={}),Er[la][Dp]||(Er[la][Dp]=[]),Er[la][Dp].push(Zo)}var wp=(0,g.deepCopy)(N);for(let Kp in Er)if(Er.hasOwnProperty(Kp)){var Vp=Er[Kp];for(let r0 in Vp)if(Vp.hasOwnProperty(r0)){let D0=Vp[r0],E0=new c.Vector3(0,0,0);for(let Q0=0;Q0<D0.length;Q0++){let lm=D0[Q0];E0.x+=lm.x,E0.y+=lm.y,E0.z+=lm.z}E0.divideScalar(D0.length),wp.position=E0,wp.frame=Dt;let H0=ne.addLabel(r0,wp,void 0,!0);Rt.push(H0)}}};if(K){var Pt=this.getNumFrames();let Ht=this.atoms;for(let Dt=0;Dt<Pt;Dt++)this.frames[Dt]&&(this.atoms=this.frames[Dt],lt(this,Dt));this.atoms=Ht}else lt(this);return Rt}setupDFS(){this.atomdfs=[];var y=this,N=new Int8Array(this.atoms.length);N.fill(0);for(var K=function(lt,Pt,Ht){Ht.push([lt,Pt]);var Dt=y.atoms[lt];N[lt]=1;for(var Zt=0;Zt<Dt.bonds.length;Zt++){var Er=Dt.bonds[Zt];y.atoms[Er]&&!N[Er]&&K(Er,lt,Ht)}},ne=0;ne<this.atoms.length;ne++)if(this.atoms[ne]&&!N[ne]){var Rt=[];K(ne,-1,Rt),this.atomdfs.push(Rt)}}setCoordinatesFromURL(y,N){this.frames=[];var K=this;return this.box&&this.setupDFS(),y.startsWith("http")||(y="http://"+y),(0,g.get)(y+"/traj/numframes/"+N,function(ne){if(!isNaN(parseInt(ne)))return K.frames.push(K.atoms),K.frames.numFrames=ne,K.frames.url=y,K.frames.path=N,K.setFrame(0)})}setCoordinates(y,N){if(!y)return[];if(/\.gz$/.test(N=N||"")){N=N.replace(/\.gz$/,"");try{y=(0,g.inflateString)(y)}catch(Zt){console.log(Zt)}}if({mdcrd:"",inpcrd:"",pdb:"",netcdf:"",array:""}.hasOwnProperty(N)){this.frames=[];for(var K=this.atoms.length,ne=wg.parseCrd(y,N),Rt=0;Rt<ne.length;){for(var lt=[],Pt=0;Pt<K;Pt++){var Ht={};for(var Dt in this.atoms[Pt])Ht[Dt]=this.atoms[Pt][Dt];lt[Pt]=Ht,lt[Pt].x=ne[Rt++],lt[Pt].y=ne[Rt++],lt[Pt].z=ne[Rt++]}this.frames.push(lt)}return this.atoms=this.frames[0],this.frames}return[]}addAtomSpecs(y){}static parseCrd(y,N){var K=[],ne=0;if(N=="pdb")for(var Rt=y.indexOf(`
ATOM`);Rt!=-1;){for(;y.slice(Rt,Rt+5)==`
ATOM`||y.slice(Rt,Rt+7)==`
HETATM`;)K[ne++]=parseFloat(y.slice(Rt+31,Rt+39)),K[ne++]=parseFloat(y.slice(Rt+39,Rt+47)),K[ne++]=parseFloat(y.slice(Rt+47,Rt+55)),Rt=y.indexOf(`
`,Rt+54),y.slice(Rt,Rt+4)==`
TER`&&(Rt=y.indexOf(`
`,Rt+5));Rt=y.indexOf(`
ATOM`,Rt)}else if(N=="netcdf"){var lt=new Cv(y);K=[].concat.apply([],lt.getDataVariable("coordinates"))}else{if(N=="array"||Array.isArray(y))return y.flat(2);{let Pt=y.indexOf(`
`);N=="inpcrd"&&(Pt=y.indexOf(`
`,Pt+1)),K=(y=y.slice(Pt+1)).match(/\S+/g).map(parseFloat)}}return K}static parseMolData(y,N="",K){if(!y)return[];if(/\.gz$/.test(N)){N=N.replace(/\.gz$/,"");try{y=N.match(/bcif/i)?(0,g.inflateString)(y,!1):(0,g.inflateString)(y)}catch(ne){console.log(ne)}}return Om[N]===void 0&&(N=N.split(".").pop(),Om[N]===void 0&&(console.log("Unknown format: "+N),N=y instanceof Uint8Array?"bcif":y.match(/^@<TRIPOS>MOLECULE/gm)?"mol2":y.match(/^data_/gm)&&y.match(/^loop_/gm)?"cif":y.match(/^HETATM/gm)||y.match(/^ATOM/gm)?"pdb":y.match(/ITEM: TIMESTEP/gm)?"lammpstrj":y.match(/^.*\n.*\n.\s*(\d+)\s+(\d+)/gm)?"sdf":y.match(/^%VERSION\s+VERSION_STAMP/gm)?"prmtop":"xyz",console.log("Best guess: "+N))),(0,Om[N])(y,K)}}var Lv;wg.defaultAtomStyle={line:{}},wg.defaultlineWidth=1,wg.vdwRadii={H:1.2,He:1.4,Li:1.82,Be:1.53,B:1.92,C:1.7,N:1.55,O:1.52,F:1.47,Ne:1.54,Na:2.27,Mg:1.73,Al:1.84,Si:2.1,P:1.8,S:1.8,Cl:1.75,Ar:1.88,K:2.75,Ca:2.31,Ni:1.63,Cu:1.4,Zn:1.39,Ga:1.87,Ge:2.11,As:1.85,Se:1.9,Br:1.85,Kr:2.02,Rb:3.03,Sr:2.49,Pd:1.63,Ag:1.72,Cd:1.58,In:1.93,Sn:2.17,Sb:2.06,Te:2.06,I:1.98,Xe:2.16,Cs:3.43,Ba:2.68,Pt:1.75,Au:1.66,Hg:1.55,Tl:1.96,Pb:2.02,Bi:2.07,Po:1.97,At:2.02,Rn:2.2,Fr:3.48,Ra:2.83,U:1.86},wg.ignoredKeys=new Set(["props","invert","model","frame","byres","expand","within","and","or","not"]),(function(d0){d0[d0.VDW=1]="VDW",d0[d0.MS=2]="MS",d0[d0.SAS=3]="SAS",d0[d0.SES=4]="SES"})(Lv||(Lv={}));var Pv=!1;function Ny(d0){Pv=d0}(window.navigator.userAgent.indexOf("MSIE ")>=0||window.navigator.userAgent.indexOf("Trident/")>=0)&&(Pv=!0);class pg{constructor(){this.ISDONE=2,this.edgeTable=new Uint32Array([0,0,0,0,0,0,0,2816,0,0,0,1792,0,3328,3584,3840,0,0,0,138,0,21,0,134,0,0,0,652,0,2067,3865,3600,0,0,0,42,0,0,0,294,0,0,21,28,0,3875,1049,3360,0,168,162,170,0,645,2475,2210,0,687,293,172,4010,3747,3497,3232,0,0,0,0,0,69,0,900,0,0,0,1792,138,131,1608,1920,0,81,0,2074,84,85,84,86,0,81,0,3676,330,1105,1881,1616,0,0,0,42,0,69,0,502,0,0,21,3580,138,2035,1273,1520,2816,104,2337,106,840,581,367,102,2816,3695,3429,3180,1898,1635,1385,1120,0,0,0,0,0,0,0,3910,0,0,69,588,42,2083,41,2880,0,0,0,1722,0,2293,4095,3830,0,255,757,764,2538,2291,3065,2800,0,0,81,338,0,3925,1119,3414,84,855,85,340,2130,2899,89,2384,1792,712,194,1162,4036,3781,3535,3270,708,719,197,204,3018,2755,2505,2240,0,0,0,0,168,420,168,1958,162,162,676,2988,170,163,680,928,3328,3096,3328,3642,52,53,1855,1590,2340,2111,2869,2620,298,51,825,560,3584,3584,3090,3482,1668,1941,1183,1430,146,2975,2069,2460,154,915,153,400,3840,3592,3329,3082,1796,1541,1295,1030,2818,2575,2309,2060,778,515,265,0]),this.triTable=[[],[],[],[],[],[],[],[11,9,8],[],[],[],[8,10,9],[],[10,8,11],[9,11,10],[8,10,9,8,11,10],[],[],[],[1,7,3],[],[4,2,0],[],[2,1,7],[],[],[],[2,7,3,2,9,7],[],[1,4,11,1,0,4],[3,8,0,11,9,4,11,10,9],[4,11,9,11,10,9],[],[],[],[5,3,1],[],[],[],[2,5,8,2,1,5],[],[],[2,4,0],[3,2,4],[],[0,9,1,8,10,5,8,11,10],[3,4,0,3,10,4],[5,8,10,8,11,10],[],[3,5,7],[7,1,5],[1,7,3,1,5,7],[],[9,2,0,9,7,2],[0,3,8,1,7,11,1,5,7],[11,1,7,1,5,7],[],[9,1,0,5,3,2,5,7,3],[8,2,5,8,0,2],[2,5,3,5,7,3],[3,9,1,3,8,9,7,11,10,7,10,5],[9,1,0,10,7,11,10,5,7],[3,8,0,7,10,5,7,11,10],[11,5,7,11,10,5],[],[],[],[],[],[0,6,2],[],[7,2,9,7,9,8],[],[],[],[8,10,9],[7,1,3],[7,1,0],[6,9,3,6,10,9],[7,10,8,10,9,8],[],[6,0,4],[],[11,1,4,11,3,1],[2,4,6],[2,0,4,2,4,6],[2,4,6],[1,4,2,4,6,2],[],[6,0,4],[],[2,11,3,6,9,4,6,10,9],[8,6,1,8,1,3],[10,0,6,0,4,6],[8,0,3,9,6,10,9,4,6],[10,4,6,10,9,4],[],[],[],[5,3,1],[],[0,6,2],[],[7,4,8,5,2,1,5,6,2],[],[],[2,4,0],[7,4,8,2,11,3,10,5,6],[7,1,3],[5,6,10,0,9,1,8,7,4],[5,6,10,7,0,3,7,4,0],[10,5,6,4,8,7],[9,11,8],[3,5,6],[0,5,11,0,11,8],[6,3,5,3,1,5],[3,9,6,3,8,9],[9,6,0,6,2,0],[0,3,8,2,5,6,2,1,5],[1,6,2,1,5,6],[9,11,8],[1,0,9,6,10,5,11,3,2],[6,10,5,2,8,0,2,11,8],[3,2,11,10,5,6],[10,5,6,9,3,8,9,1,3],[0,9,1,5,6,10],[8,0,3,10,5,6],[10,5,6],[],[],[],[],[],[],[],[1,10,2,9,11,6,9,8,11],[],[],[6,0,2],[3,6,9,3,2,6],[3,5,1],[0,5,1,0,11,5],[0,3,5],[6,9,11,9,8,11],[],[],[],[4,5,9,7,1,10,7,3,1],[],[11,6,7,2,4,5,2,0,4],[11,6,7,8,0,3,1,10,2,9,4,5],[6,7,11,1,10,2,9,4,5],[],[4,1,0,4,5,1,6,7,3,6,3,2],[9,4,5,0,6,7,0,2,6],[4,5,9,6,3,2,6,7,3],[6,7,11,5,3,8,5,1,3],[6,7,11,4,1,0,4,5,1],[4,5,9,3,8,0,11,6,7],[9,4,5,7,11,6],[],[],[0,6,4],[8,6,4,8,1,6],[],[0,10,2,0,9,10,4,8,11,4,11,6],[10,2,1,6,0,3,6,4,0],[10,2,1,11,4,8,11,6,4],[4,2,6],[1,0,9,2,4,8,2,6,4],[2,4,0,2,6,4],[8,2,4,2,6,4],[11,4,1,11,6,4],[0,9,1,4,11,6,4,8,11],[3,6,0,6,4,0],[8,6,4,8,11,6],[10,8,9],[6,3,9,6,7,3],[6,7,1],[10,7,1,7,3,1],[7,11,6,8,10,2,8,9,10],[11,6,7,10,0,9,10,2,0],[2,1,10,7,11,6,8,0,3],[1,10,2,6,7,11],[7,2,6,7,9,2],[1,0,9,3,6,7,3,2,6],[7,0,6,0,2,6],[2,7,3,2,6,7],[7,11,6,3,9,1,3,8,9],[9,1,0,11,6,7],[0,3,8,11,6,7],[11,6,7],[],[],[],[],[5,3,7],[8,5,2,8,7,5],[5,3,7],[1,10,2,5,8,7,5,9,8],[1,7,5],[1,7,5],[9,2,7,9,7,5],[11,3,2,8,5,9,8,7,5],[1,3,7,1,7,5],[0,7,1,7,5,1],[9,3,5,3,7,5],[9,7,5,9,8,7],[8,10,11],[3,4,10,3,10,11],[8,10,11],[5,9,4,1,11,3,1,10,11],[2,4,5],[5,2,4,2,0,4],[0,3,8,5,9,4,10,2,1],[2,1,10,9,4,5],[2,8,5,2,11,8],[3,2,11,1,4,5,1,0,4],[9,4,5,8,2,11,8,0,2],[11,3,2,9,4,5],[8,5,3,5,1,3],[5,0,4,5,1,0],[3,8,0,4,5,9],[9,4,5],[11,9,10],[11,9,10],[1,11,4,1,10,11],[8,7,4,11,1,10,11,3,1],[2,7,9,2,9,10],[4,8,7,0,10,2,0,9,10],[2,1,10,0,7,4,0,3,7],[10,2,1,8,7,4],[1,7,4],[3,2,11,4,8,7,9,1,0],[11,4,2,4,0,2],[2,11,3,7,4,8],[4,1,7,1,3,7],[1,0,9,8,7,4],[3,4,0,3,7,4],[8,7,4],[8,9,10,8,10,11],[3,9,11,9,10,11],[0,10,8,10,11,8],[10,3,1,10,11,3],[2,8,10,8,9,10],[9,2,0,9,10,2],[8,0,3,1,10,2],[10,2,1],[1,11,9,11,8,9],[11,3,2,0,9,1],[11,0,2,11,8,0],[11,3,2],[8,1,3,8,9,1],[9,1,0],[8,0,3],[]],this.edgeTable2=[0,265,515,778,2060,2309,2575,2822,1030,1295,1541,1804,3082,3331,3593,3840,400,153,915,666,2460,2197,2975,2710,1430,1183,1941,1692,3482,3219,3993,3728,560,825,51,314,2620,2869,2111,2358,1590,1855,1077,1340,3642,3891,3129,3376,928,681,419,170,2988,2725,2479,2214,1958,1711,1445,1196,4010,3747,3497,3232,2240,2505,2755,3018,204,453,719,966,3270,3535,3781,4044,1226,1475,1737,1984,2384,2137,2899,2650,348,85,863,598,3414,3167,3925,3676,1370,1107,1881,1616,2800,3065,2291,2554,764,1013,255,502,3830,4095,3317,3580,1786,2035,1273,1520,2912,2665,2403,2154,876,613,367,102,3942,3695,3429,3180,1898,1635,1385,1120,1120,1385,1635,1898,3180,3429,3695,3942,102,367,613,876,2154,2403,2665,2912,1520,1273,2035,1786,3580,3317,4095,3830,502,255,1013,764,2554,2291,3065,2800,1616,1881,1107,1370,3676,3925,3167,3414,598,863,85,348,2650,2899,2137,2384,1984,1737,1475,1226,4044,3781,3535,3270,966,719,453,204,3018,2755,2505,2240,3232,3497,3747,4010,1196,1445,1711,1958,2214,2479,2725,2988,170,419,681,928,3376,3129,3891,3642,1340,1077,1855,1590,2358,2111,2869,2620,314,51,825,560,3728,3993,3219,3482,1692,1941,1183,1430,2710,2975,2197,2460,666,915,153,400,3840,3593,3331,3082,1804,1541,1295,1030,2822,2575,2309,2060,778,515,265,0],this.triTable2=[[],[8,3,0],[9,0,1],[8,3,1,8,1,9],[11,2,3],[11,2,0,11,0,8],[11,2,3,0,1,9],[2,1,11,1,9,11,11,9,8],[10,1,2],[8,3,0,1,2,10],[9,0,2,9,2,10],[3,2,8,2,10,8,8,10,9],[10,1,3,10,3,11],[1,0,10,0,8,10,10,8,11],[0,3,9,3,11,9,9,11,10],[8,10,9,8,11,10],[8,4,7],[3,0,4,3,4,7],[1,9,0,8,4,7],[9,4,1,4,7,1,1,7,3],[2,3,11,7,8,4],[7,11,4,11,2,4,4,2,0],[3,11,2,4,7,8,9,0,1],[2,7,11,2,1,7,1,4,7,1,9,4],[10,1,2,8,4,7],[2,10,1,0,4,7,0,7,3],[4,7,8,0,2,10,0,10,9],[2,7,3,2,9,7,7,9,4,2,10,9],[8,4,7,11,10,1,11,1,3],[11,4,7,1,4,11,1,11,10,1,0,4],[3,8,0,7,11,4,11,9,4,11,10,9],[7,11,4,4,11,9,11,10,9],[9,5,4],[3,0,8,4,9,5],[5,4,0,5,0,1],[4,8,5,8,3,5,5,3,1],[11,2,3,9,5,4],[9,5,4,8,11,2,8,2,0],[3,11,2,1,5,4,1,4,0],[8,5,4,2,5,8,2,8,11,2,1,5],[2,10,1,9,5,4],[0,8,3,5,4,9,10,1,2],[10,5,2,5,4,2,2,4,0],[3,4,8,3,2,4,2,5,4,2,10,5],[5,4,9,1,3,11,1,11,10],[0,9,1,4,8,5,8,10,5,8,11,10],[3,4,0,3,10,4,4,10,5,3,11,10],[4,8,5,5,8,10,8,11,10],[9,5,7,9,7,8],[0,9,3,9,5,3,3,5,7],[8,0,7,0,1,7,7,1,5],[1,7,3,1,5,7],[11,2,3,8,9,5,8,5,7],[9,2,0,9,7,2,2,7,11,9,5,7],[0,3,8,2,1,11,1,7,11,1,5,7],[2,1,11,11,1,7,1,5,7],[1,2,10,5,7,8,5,8,9],[9,1,0,10,5,2,5,3,2,5,7,3],[5,2,10,8,2,5,8,5,7,8,0,2],[10,5,2,2,5,3,5,7,3],[3,9,1,3,8,9,7,11,10,7,10,5],[9,1,0,10,7,11,10,5,7],[3,8,0,7,10,5,7,11,10],[11,5,7,11,10,5],[11,7,6],[0,8,3,11,7,6],[9,0,1,11,7,6],[7,6,11,3,1,9,3,9,8],[2,3,7,2,7,6],[8,7,0,7,6,0,0,6,2],[1,9,0,3,7,6,3,6,2],[7,6,2,7,2,9,2,1,9,7,9,8],[1,2,10,6,11,7],[2,10,1,7,6,11,8,3,0],[11,7,6,10,9,0,10,0,2],[7,6,11,3,2,8,8,2,10,8,10,9],[6,10,7,10,1,7,7,1,3],[6,10,1,6,1,7,7,1,0,7,0,8],[9,0,3,6,9,3,6,10,9,6,3,7],[6,10,7,7,10,8,10,9,8],[8,4,6,8,6,11],[11,3,6,3,0,6,6,0,4],[0,1,9,4,6,11,4,11,8],[1,9,4,11,1,4,11,3,1,11,4,6],[3,8,2,8,4,2,2,4,6],[2,0,4,2,4,6],[1,9,0,3,8,2,2,8,4,2,4,6],[9,4,1,1,4,2,4,6,2],[10,1,2,11,8,4,11,4,6],[10,1,2,11,3,6,6,3,0,6,0,4],[0,2,10,0,10,9,4,11,8,4,6,11],[2,11,3,6,9,4,6,10,9],[8,4,6,8,6,1,6,10,1,8,1,3],[1,0,10,10,0,6,0,4,6],[8,0,3,9,6,10,9,4,6],[10,4,6,10,9,4],[9,5,4,7,6,11],[4,9,5,3,0,8,11,7,6],[6,11,7,4,0,1,4,1,5],[6,11,7,4,8,5,5,8,3,5,3,1],[4,9,5,6,2,3,6,3,7],[9,5,4,8,7,0,0,7,6,0,6,2],[4,0,1,4,1,5,6,3,7,6,2,3],[7,4,8,5,2,1,5,6,2],[6,11,7,1,2,10,9,5,4],[11,7,6,8,3,0,1,2,10,9,5,4],[11,7,6,10,5,2,2,5,4,2,4,0],[7,4,8,2,11,3,10,5,6],[4,9,5,6,10,7,7,10,1,7,1,3],[5,6,10,0,9,1,8,7,4],[5,6,10,7,0,3,7,4,0],[10,5,6,4,8,7],[5,6,9,6,11,9,9,11,8],[0,9,5,0,5,3,3,5,6,3,6,11],[0,1,5,0,5,11,5,6,11,0,11,8],[11,3,6,6,3,5,3,1,5],[9,5,6,3,9,6,3,8,9,3,6,2],[5,6,9,9,6,0,6,2,0],[0,3,8,2,5,6,2,1,5],[1,6,2,1,5,6],[1,2,10,5,6,9,9,6,11,9,11,8],[1,0,9,6,10,5,11,3,2],[6,10,5,2,8,0,2,11,8],[3,2,11,10,5,6],[10,5,6,9,3,8,9,1,3],[0,9,1,5,6,10],[8,0,3,10,5,6],[10,5,6],[10,6,5],[8,3,0,10,6,5],[0,1,9,5,10,6],[10,6,5,9,8,3,9,3,1],[3,11,2,10,6,5],[6,5,10,2,0,8,2,8,11],[1,9,0,6,5,10,11,2,3],[1,10,2,5,9,6,9,11,6,9,8,11],[1,2,6,1,6,5],[0,8,3,2,6,5,2,5,1],[5,9,6,9,0,6,6,0,2],[9,6,5,3,6,9,3,9,8,3,2,6],[11,6,3,6,5,3,3,5,1],[0,5,1,0,11,5,5,11,6,0,8,11],[0,5,9,0,3,5,3,6,5,3,11,6],[5,9,6,6,9,11,9,8,11],[10,6,5,4,7,8],[5,10,6,7,3,0,7,0,4],[5,10,6,0,1,9,8,4,7],[4,5,9,6,7,10,7,1,10,7,3,1],[7,8,4,2,3,11,10,6,5],[11,6,7,10,2,5,2,4,5,2,0,4],[11,6,7,8,0,3,1,10,2,9,4,5],[6,7,11,1,10,2,9,4,5],[7,8,4,5,1,2,5,2,6],[4,1,0,4,5,1,6,7,3,6,3,2],[9,4,5,8,0,7,0,6,7,0,2,6],[4,5,9,6,3,2,6,7,3],[6,7,11,4,5,8,5,3,8,5,1,3],[6,7,11,4,1,0,4,5,1],[4,5,9,3,8,0,11,6,7],[9,4,5,7,11,6],[10,6,4,10,4,9],[8,3,0,9,10,6,9,6,4],[1,10,0,10,6,0,0,6,4],[8,6,4,8,1,6,6,1,10,8,3,1],[2,3,11,6,4,9,6,9,10],[0,10,2,0,9,10,4,8,11,4,11,6],[10,2,1,11,6,3,6,0,3,6,4,0],[10,2,1,11,4,8,11,6,4],[9,1,4,1,2,4,4,2,6],[1,0,9,3,2,8,2,4,8,2,6,4],[2,4,0,2,6,4],[3,2,8,8,2,4,2,6,4],[1,4,9,11,4,1,11,1,3,11,6,4],[0,9,1,4,11,6,4,8,11],[11,6,3,3,6,0,6,4,0],[8,6,4,8,11,6],[6,7,10,7,8,10,10,8,9],[9,3,0,6,3,9,6,9,10,6,7,3],[6,1,10,6,7,1,7,0,1,7,8,0],[6,7,10,10,7,1,7,3,1],[7,11,6,3,8,2,8,10,2,8,9,10],[11,6,7,10,0,9,10,2,0],[2,1,10,7,11,6,8,0,3],[1,10,2,6,7,11],[7,2,6,7,9,2,2,9,1,7,8,9],[1,0,9,3,6,7,3,2,6],[8,0,7,7,0,6,0,2,6],[2,7,3,2,6,7],[7,11,6,3,9,1,3,8,9],[9,1,0,11,6,7],[0,3,8,11,6,7],[11,6,7],[11,7,5,11,5,10],[3,0,8,7,5,10,7,10,11],[9,0,1,10,11,7,10,7,5],[3,1,9,3,9,8,7,10,11,7,5,10],[10,2,5,2,3,5,5,3,7],[5,10,2,8,5,2,8,7,5,8,2,0],[9,0,1,10,2,5,5,2,3,5,3,7],[1,10,2,5,8,7,5,9,8],[2,11,1,11,7,1,1,7,5],[0,8,3,2,11,1,1,11,7,1,7,5],[9,0,2,9,2,7,2,11,7,9,7,5],[11,3,2,8,5,9,8,7,5],[1,3,7,1,7,5],[8,7,0,0,7,1,7,5,1],[0,3,9,9,3,5,3,7,5],[9,7,5,9,8,7],[4,5,8,5,10,8,8,10,11],[3,0,4,3,4,10,4,5,10,3,10,11],[0,1,9,4,5,8,8,5,10,8,10,11],[5,9,4,1,11,3,1,10,11],[3,8,4,3,4,2,2,4,5,2,5,10],[10,2,5,5,2,4,2,0,4],[0,3,8,5,9,4,10,2,1],[2,1,10,9,4,5],[8,4,5,2,8,5,2,11,8,2,5,1],[3,2,11,1,4,5,1,0,4],[9,4,5,8,2,11,8,0,2],[11,3,2,9,4,5],[4,5,8,8,5,3,5,1,3],[5,0,4,5,1,0],[3,8,0,4,5,9],[9,4,5],[7,4,11,4,9,11,11,9,10],[3,0,8,7,4,11,11,4,9,11,9,10],[11,7,4,1,11,4,1,10,11,1,4,0],[8,7,4,11,1,10,11,3,1],[2,3,7,2,7,9,7,4,9,2,9,10],[4,8,7,0,10,2,0,9,10],[2,1,10,0,7,4,0,3,7],[10,2,1,8,7,4],[2,11,7,2,7,1,1,7,4,1,4,9],[3,2,11,4,8,7,9,1,0],[7,4,11,11,4,2,4,0,2],[2,11,3,7,4,8],[9,1,4,4,1,7,1,3,7],[1,0,9,8,7,4],[3,4,0,3,7,4],[8,7,4],[8,9,10,8,10,11],[0,9,3,3,9,11,9,10,11],[1,10,0,0,10,8,10,11,8],[10,3,1,10,11,3],[3,8,2,2,8,10,8,9,10],[9,2,0,9,10,2],[8,0,3,1,10,2],[10,2,1],[2,11,1,1,11,9,11,8,9],[11,3,2,0,9,1],[11,0,2,11,8,0],[11,3,2],[8,1,3,8,9,1],[9,1,0],[8,0,3],[]]}march(y,N,K,ne){let Rt=!!ne.fulltable,lt=ne.hasOwnProperty("origin")&&ne.origin.hasOwnProperty("x")?ne.origin:{x:0,y:0,z:0},Pt=!!ne.voxel,Ht=ne.matrix,Dt=ne.nX||0,Zt=ne.nY||0,Er=ne.nZ||0,Np=ne.scale||1,Zo=null;Zo=ne.unitCube?ne.unitCube:{x:Np,y:Np,z:Np};let la,Dp,wp=new Int32Array(Dt*Zt*Er);for(la=0,Dp=wp.length;la<Dp;++la)wp[la]=-1;let Vp=function(E0,H0,Q0,lm,hm,q0){let Bm={x:0,y:0,z:0},Im=hm;if(!(lm&1<<hm)&&lm&1<<q0&&(Im=q0),1&Im&&Q0++,2&Im&&H0++,4&Im&&E0++,Ht){let i1=new c.Vector3(E0,H0,Q0);i1=i1.applyMatrix4(Ht),Bm={x:i1.x,y:i1.y,z:i1.z}}else Bm.x=lt.x+Zo.x*E0,Bm.y=lt.y+Zo.y*H0,Bm.z=lt.z+Zo.z*Q0;let h1=(Zt*E0+H0)*Er+Q0;return Pt?(N.push(Bm),N.length-1):(wp[h1]<0&&(wp[h1]=N.length,N.push(Bm)),wp[h1])},Kp=new Int32Array(12),r0=Rt?this.edgeTable2:this.edgeTable,D0=Rt?this.triTable2:this.triTable;for(la=0;la<Dt-1;++la)for(let E0=0;E0<Zt-1;++E0)for(let H0=0;H0<Er-1;++H0){let Q0=0;for(let q0=0;q0<8;++q0)Q0|=!!(y[(Zt*(la+((4&q0)>>2))+E0+((2&q0)>>1))*Er+H0+(1&q0)]&this.ISDONE)<<q0;if(Q0===0||Q0===255)continue;let lm=r0[Q0];if(lm===0)continue;let hm=D0[Q0];1&lm&&(Kp[0]=Vp(la,E0,H0,Q0,0,1)),2&lm&&(Kp[1]=Vp(la,E0,H0,Q0,1,3)),4&lm&&(Kp[2]=Vp(la,E0,H0,Q0,3,2)),8&lm&&(Kp[3]=Vp(la,E0,H0,Q0,2,0)),16&lm&&(Kp[4]=Vp(la,E0,H0,Q0,4,5)),32&lm&&(Kp[5]=Vp(la,E0,H0,Q0,5,7)),64&lm&&(Kp[6]=Vp(la,E0,H0,Q0,7,6)),128&lm&&(Kp[7]=Vp(la,E0,H0,Q0,6,4)),256&lm&&(Kp[8]=Vp(la,E0,H0,Q0,0,4)),512&lm&&(Kp[9]=Vp(la,E0,H0,Q0,1,5)),1024&lm&&(Kp[10]=Vp(la,E0,H0,Q0,3,7)),2048&lm&&(Kp[11]=Vp(la,E0,H0,Q0,2,6));for(let q0=0;q0<hm.length;q0+=3){let Bm=Kp[hm[q0]],Im=Kp[hm[q0+1]],h1=Kp[hm[q0+2]];Pt&&q0>=3&&(N.push(N[Bm]),Bm=N.length-1,N.push(N[Im]),Im=N.length-1,N.push(N[h1]),h1=N.length-1),K.push(Bm),K.push(Im),K.push(h1)}}}laplacianSmooth(y,N,K){let ne,Rt,lt,Pt,Ht,Dt=new Array(N.length);for(ne=0,Rt=N.length;ne<Rt;ne++)Dt[ne]={x:0,y:0,z:0};let Zt,Er=new Array(20);for(ne=0;ne<20;ne++)Er[ne]=new Array(N.length);for(ne=0,Rt=N.length;ne<Rt;ne++)Er[0][ne]=0;for(ne=0,Rt=K.length/3;ne<Rt;ne++){let Zo=3*ne,la=3*ne+1,Dp=3*ne+2;for(Zt=!0,lt=0,Pt=Er[0][K[Zo]];lt<Pt;lt++)if(K[la]==Er[lt+1][K[Zo]]){Zt=!1;break}for(Zt&&(Er[0][K[Zo]]++,Er[Er[0][K[Zo]]][K[Zo]]=K[la]),Zt=!0,lt=0,Pt=Er[0][K[Zo]];lt<Pt;lt++)if(K[Dp]==Er[lt+1][K[Zo]]){Zt=!1;break}for(Zt&&(Er[0][K[Zo]]++,Er[Er[0][K[Zo]]][K[Zo]]=K[Dp]),Zt=!0,lt=0,Pt=Er[0][K[la]];lt<Pt;lt++)if(K[Zo]==Er[lt+1][K[la]]){Zt=!1;break}for(Zt&&(Er[0][K[la]]++,Er[Er[0][K[la]]][K[la]]=K[Zo]),Zt=!0,lt=0,Pt=Er[0][K[la]];lt<Pt;lt++)if(K[Dp]==Er[lt+1][K[la]]){Zt=!1;break}for(Zt&&(Er[0][K[la]]++,Er[Er[0][K[la]]][K[la]]=K[Dp]),Zt=!0,lt=0;lt<Er[0][K[Dp]];lt++)if(K[Zo]==Er[lt+1][K[Dp]]){Zt=!1;break}for(Zt&&(Er[0][K[Dp]]++,Er[Er[0][K[Dp]]][K[Dp]]=K[Zo]),Zt=!0,lt=0,Pt=Er[0][K[Dp]];lt<Pt;lt++)if(K[la]==Er[lt+1][K[Dp]]){Zt=!1;break}Zt&&(Er[0][K[Dp]]++,Er[Er[0][K[Dp]]][K[Dp]]=K[la])}let Np=.5;for(Ht=0;Ht<y;Ht++){for(ne=0,Rt=N.length;ne<Rt;ne++)if(Er[0][ne]<3)Dt[ne].x=N[ne].x,Dt[ne].y=N[ne].y,Dt[ne].z=N[ne].z;else if(Er[0][ne]==3||Er[0][ne]==4){for(Dt[ne].x=0,Dt[ne].y=0,Dt[ne].z=0,lt=0,Pt=Er[0][ne];lt<Pt;lt++)Dt[ne].x+=N[Er[lt+1][ne]].x,Dt[ne].y+=N[Er[lt+1][ne]].y,Dt[ne].z+=N[Er[lt+1][ne]].z;Dt[ne].x+=Np*N[ne].x,Dt[ne].y+=Np*N[ne].y,Dt[ne].z+=Np*N[ne].z,Dt[ne].x/=Np+Er[0][ne],Dt[ne].y/=Np+Er[0][ne],Dt[ne].z/=Np+Er[0][ne]}else{for(Dt[ne].x=0,Dt[ne].y=0,Dt[ne].z=0,lt=0,Pt=Er[0][ne];lt<Pt;lt++)Dt[ne].x+=N[Er[lt+1][ne]].x,Dt[ne].y+=N[Er[lt+1][ne]].y,Dt[ne].z+=N[Er[lt+1][ne]].z;Dt[ne].x+=1*N[ne].x,Dt[ne].y+=1*N[ne].y,Dt[ne].z+=1*N[ne].z,Dt[ne].x/=1+Er[0][ne],Dt[ne].y/=1+Er[0][ne],Dt[ne].z/=1+Er[0][ne]}for(ne=0,Rt=N.length;ne<Rt;ne++)N[ne].x=Dt[ne].x,N[ne].y=Dt[ne].y,N[ne].z=Dt[ne].z}}}let et=new pg;class t0{constructor(y,N,K){this.data=new Int32Array(y*N*K*3),this.width=N,this.height=K}set(y,N,K,ne){let Rt=3*((y*this.width+N)*this.height+K);this.data[Rt]=ne.ix,this.data[Rt+1]=ne.iy,this.data[Rt+2]=ne.iz}get(y,N,K){let ne=3*((y*this.width+N)*this.height+K);return{ix:this.data[ne],iy:this.data[ne+1],iz:this.data[ne+2]}}}class oa{constructor(){this.INOUT=1,this.ISDONE=2,this.ISBOUND=4,this.ptranx=0,this.ptrany=0,this.ptranz=0,this.probeRadius=1.4,this.defaultScaleFactor=2,this.scaleFactor=this.defaultScaleFactor,this.pHeight=0,this.pWidth=0,this.pLength=0,this.cutRadius=0,this.vpBits=null,this.vpDistance=null,this.vpAtomID=null,this.pminx=0,this.pminy=0,this.pminz=0,this.pmaxx=0,this.pmaxy=0,this.pmaxz=0,this.depty={},this.widxz={},this.faces=[],this.verts=[],this.vdwRadii={H:1.2,Li:1.82,Na:2.27,K:2.75,C:1.7,N:1.55,O:1.52,F:1.47,P:1.8,S:1.8,CL:1.75,BR:1.85,SE:1.9,ZN:1.39,CU:1.4,NI:1.63,X:2},this.nb=[new Int32Array([1,0,0]),new Int32Array([-1,0,0]),new Int32Array([0,1,0]),new Int32Array([0,-1,0]),new Int32Array([0,0,1]),new Int32Array([0,0,-1]),new Int32Array([1,1,0]),new Int32Array([1,-1,0]),new Int32Array([-1,1,0]),new Int32Array([-1,-1,0]),new Int32Array([1,0,1]),new Int32Array([1,0,-1]),new Int32Array([-1,0,1]),new Int32Array([-1,0,-1]),new Int32Array([0,1,1]),new Int32Array([0,1,-1]),new Int32Array([0,-1,1]),new Int32Array([0,-1,-1]),new Int32Array([1,1,1]),new Int32Array([1,1,-1]),new Int32Array([1,-1,1]),new Int32Array([-1,1,1]),new Int32Array([1,-1,-1]),new Int32Array([-1,-1,1]),new Int32Array([-1,1,-1]),new Int32Array([-1,-1,-1])],oa.MarchingCube||(oa.MarchingCube=new pg)}getVDWIndex(y){return y.elem&&this.vdwRadii[y.elem]!==void 0?y.elem:"X"}getFacesAndVertices(y){let N={};for(let Rt=0,lt=y.length;Rt<lt;Rt++)N[y[Rt]]=!0;let K=this.verts;for(let Rt=0,lt=K.length;Rt<lt;Rt++)K[Rt].x=K[Rt].x/this.scaleFactor-this.ptranx,K[Rt].y=K[Rt].y/this.scaleFactor-this.ptrany,K[Rt].z=K[Rt].z/this.scaleFactor-this.ptranz;let ne=[];for(let Rt=0,lt=this.faces.length;Rt<lt;Rt+=3){let Pt=this.faces[Rt],Ht=this.faces[Rt+1],Dt=this.faces[Rt+2],Zt=K[Pt].atomid,Er=K[Ht].atomid,Np=K[Dt].atomid,Zo=Zt;Er<Zo&&(Zo=Er),Np<Zo&&(Zo=Np),N[Zo]&&Pt!==Ht&&Ht!==Dt&&Pt!==Dt&&(ne.push(Pt),ne.push(Ht),ne.push(Dt))}return this.vpBits=null,this.vpDistance=null,this.vpAtomID=null,{vertices:K,faces:ne}}initparm(y,N,K){K>1e6&&(this.scaleFactor=this.defaultScaleFactor/2);let ne=1/this.scaleFactor*5.5;this.pminx=y[0][0],this.pmaxx=y[1][0],this.pminy=y[0][1],this.pmaxy=y[1][1],this.pminz=y[0][2],this.pmaxz=y[1][2],N?(this.pminx-=this.probeRadius+ne,this.pminy-=this.probeRadius+ne,this.pminz-=this.probeRadius+ne,this.pmaxx+=this.probeRadius+ne,this.pmaxy+=this.probeRadius+ne,this.pmaxz+=this.probeRadius+ne):(this.pminx-=ne,this.pminy-=ne,this.pminz-=ne,this.pmaxx+=ne,this.pmaxy+=ne,this.pmaxz+=ne),this.pminx=Math.floor(this.pminx*this.scaleFactor)/this.scaleFactor,this.pminy=Math.floor(this.pminy*this.scaleFactor)/this.scaleFactor,this.pminz=Math.floor(this.pminz*this.scaleFactor)/this.scaleFactor,this.pmaxx=Math.ceil(this.pmaxx*this.scaleFactor)/this.scaleFactor,this.pmaxy=Math.ceil(this.pmaxy*this.scaleFactor)/this.scaleFactor,this.pmaxz=Math.ceil(this.pmaxz*this.scaleFactor)/this.scaleFactor,this.ptranx=-this.pminx,this.ptrany=-this.pminy,this.ptranz=-this.pminz,this.pLength=Math.ceil(this.scaleFactor*(this.pmaxx-this.pminx))+1,this.pWidth=Math.ceil(this.scaleFactor*(this.pmaxy-this.pminy))+1,this.pHeight=Math.ceil(this.scaleFactor*(this.pmaxz-this.pminz))+1,this.boundingatom(N),this.cutRadius=this.probeRadius*this.scaleFactor,this.vpBits=new Uint8Array(this.pLength*this.pWidth*this.pHeight),this.vpDistance=new Float64Array(this.pLength*this.pWidth*this.pHeight),this.vpAtomID=new Int32Array(this.pLength*this.pWidth*this.pHeight)}boundingatom(y){let N={};for(const K in this.vdwRadii){let ne=this.vdwRadii[K];N[K]=y?(ne+this.probeRadius)*this.scaleFactor+.5:ne*this.scaleFactor+.5;let Rt=N[K]*N[K];this.widxz[K]=Math.floor(N[K])+1,this.depty[K]=new Int32Array(this.widxz[K]*this.widxz[K]);let lt=0;for(let Pt=0;Pt<this.widxz[K];Pt++)for(let Ht=0;Ht<this.widxz[K];Ht++){let Dt=Pt*Pt+Ht*Ht;if(Dt>Rt)this.depty[K][lt]=-1;else{let Zt=Math.sqrt(Rt-Dt);this.depty[K][lt]=Math.floor(Zt)}lt++}}}fillvoxels(y,N){for(let K=0,ne=this.vpBits.length;K<ne;K++)this.vpBits[K]=0,this.vpDistance[K]=-1,this.vpAtomID[K]=-1;for(let K in N){let ne=y[N[K]];ne!==void 0&&this.fillAtom(ne,y)}for(let K=0,ne=this.vpBits.length;K<ne;K++)this.vpBits[K]&this.INOUT&&(this.vpBits[K]|=this.ISDONE)}fillAtom(y,N){let K=Math.floor(.5+this.scaleFactor*(y.x+this.ptranx)),ne=Math.floor(.5+this.scaleFactor*(y.y+this.ptrany)),Rt=Math.floor(.5+this.scaleFactor*(y.z+this.ptranz)),lt=this.getVDWIndex(y),Pt=0,Ht=this.pWidth*this.pHeight;for(let Dt=0,Zt=this.widxz[lt];Dt<Zt;Dt++)for(let Er=0;Er<Zt;Er++){if(this.depty[lt][Pt]!=-1){for(let Np=-1;Np<2;Np++)for(let Zo=-1;Zo<2;Zo++)for(let la=-1;la<2;la++)if(Np!==0&&Zo!==0&&la!==0){let Dp=Np*Dt,wp=la*Er;for(let Vp=0;Vp<=this.depty[lt][Pt];Vp++){let Kp=Vp*Zo,r0=K+Dp,D0=ne+Kp,E0=Rt+wp;if(r0<0||D0<0||E0<0||r0>=this.pLength||D0>=this.pWidth||E0>=this.pHeight)continue;let H0=r0*Ht+D0*this.pHeight+E0;if(this.vpBits[H0]&this.INOUT){let Q0=N[this.vpAtomID[H0]];if(Q0.serial!=y.serial){let lm=K+Dp-Math.floor(.5+this.scaleFactor*(Q0.x+this.ptranx)),hm=ne+Kp-Math.floor(.5+this.scaleFactor*(Q0.y+this.ptrany)),q0=Rt+wp-Math.floor(.5+this.scaleFactor*(Q0.z+this.ptranz));Dp*Dp+Kp*Kp+wp*wp<lm*lm+hm*hm+q0*q0&&(this.vpAtomID[H0]=y.serial)}}else this.vpBits[H0]|=this.INOUT,this.vpAtomID[H0]=y.serial}}}Pt++}}fillvoxelswaals(y,N){for(let K=0,ne=this.vpBits.length;K<ne;K++)this.vpBits[K]&=~this.ISDONE;for(let K in N){let ne=y[N[K]];ne!==void 0&&this.fillAtomWaals(ne,y)}}fillAtomWaals(y,N){let K=0,ne=Math.floor(.5+this.scaleFactor*(y.x+this.ptranx)),Rt=Math.floor(.5+this.scaleFactor*(y.y+this.ptrany)),lt=Math.floor(.5+this.scaleFactor*(y.z+this.ptranz)),Pt=this.getVDWIndex(y),Ht=this.pWidth*this.pHeight;for(let Dt=0,Zt=this.widxz[Pt];Dt<Zt;Dt++)for(let Er=0;Er<Zt;Er++){if(this.depty[Pt][K]!=-1){for(let Np=-1;Np<2;Np++)for(let Zo=-1;Zo<2;Zo++)for(let la=-1;la<2;la++)if(Np!==0&&Zo!==0&&la!==0){let Dp=Np*Dt,wp=la*Er;for(let Vp=0;Vp<=this.depty[Pt][K];Vp++){let Kp=Vp*Zo,r0=ne+Dp,D0=Rt+Kp,E0=lt+wp;if(r0<0||D0<0||E0<0||r0>=this.pLength||D0>=this.pWidth||E0>=this.pHeight)continue;let H0=r0*Ht+D0*this.pHeight+E0;if(this.vpBits[H0]&this.ISDONE){let Q0=N[this.vpAtomID[H0]];if(Q0.serial!=y.serial){let lm=ne+Dp-Math.floor(.5+this.scaleFactor*(Q0.x+this.ptranx)),hm=Rt+Kp-Math.floor(.5+this.scaleFactor*(Q0.y+this.ptrany)),q0=lt+wp-Math.floor(.5+this.scaleFactor*(Q0.z+this.ptranz));Dp*Dp+Kp*Kp+wp*wp<lm*lm+hm*hm+q0*q0&&(this.vpAtomID[H0]=y.serial)}}else this.vpBits[H0]|=this.ISDONE,this.vpAtomID[H0]=y.serial}}}K++}}buildboundary(){let y=this.pWidth*this.pHeight;for(let N=0;N<this.pLength;N++)for(let K=0;K<this.pHeight;K++)for(let ne=0;ne<this.pWidth;ne++){let Rt=N*y+ne*this.pHeight+K;if(this.vpBits[Rt]&this.INOUT){let lt=0;for(;lt<26;){let Pt=N+this.nb[lt][0],Ht=K+this.nb[lt][2],Dt=ne+this.nb[lt][1];if(Pt>-1&&Pt<this.pLength&&Dt>-1&&Dt<this.pWidth&&Ht>-1&&Ht<this.pHeight&&!(this.vpBits[Pt*y+Dt*this.pHeight+Ht]&this.INOUT)){this.vpBits[Rt]|=this.ISBOUND;break}lt++}}}}fastdistancemap(){let y,N=new t0(this.pLength,this.pWidth,this.pHeight),K=this.pWidth*this.pHeight,ne=this.cutRadius*this.cutRadius,Rt=[],lt=[];for(let Dt=0;Dt<this.pLength;Dt++)for(let Zt=0;Zt<this.pWidth;Zt++)for(let Er=0;Er<this.pHeight;Er++)if(y=Dt*K+Zt*this.pHeight+Er,this.vpBits[y]&=~this.ISDONE,this.vpBits[y]&this.INOUT&&this.vpBits[y]&this.ISBOUND){let Np={ix:Dt,iy:Zt,iz:Er};N.set(Dt,Zt,Er,Np),Rt.push(Np),this.vpDistance[y]=0,this.vpBits[y]|=this.ISDONE,this.vpBits[y]&=~this.ISBOUND}do{lt=this.fastoneshell(Rt,N),Rt=[];for(let Dt=0,Zt=lt.length;Dt<Zt;Dt++)y=K*lt[Dt].ix+this.pHeight*lt[Dt].iy+lt[Dt].iz,this.vpBits[y]&=~this.ISBOUND,this.vpDistance[y]<=1.0404*ne&&Rt.push({ix:lt[Dt].ix,iy:lt[Dt].iy,iz:lt[Dt].iz})}while(Rt.length!==0);Rt=[],lt=[],N=null;let Pt=this.scaleFactor-.5;Pt<0&&(Pt=0);let Ht=ne-.5/(.1+Pt);for(let Dt=0;Dt<this.pLength;Dt++)for(let Zt=0;Zt<this.pWidth;Zt++)for(let Er=0;Er<this.pHeight;Er++)y=Dt*K+Zt*this.pHeight+Er,this.vpBits[y]&=~this.ISBOUND,this.vpBits[y]&this.INOUT&&(this.vpBits[y]&this.ISDONE&&!(this.vpBits[y]&this.ISDONE&&this.vpDistance[y]>=Ht)||(this.vpBits[y]|=this.ISBOUND))}fastoneshell(y,N){let K,ne,Rt,lt,Pt,Ht,Dt,Zt,Er,Np=[];if(y.length===0)return Np;let Zo={ix:-1,iy:-1,iz:-1},la=this.pWidth*this.pHeight;for(let Dp=0,wp=y.length;Dp<wp;Dp++){K=y[Dp].ix,ne=y[Dp].iy,Rt=y[Dp].iz,Zt=N.get(K,ne,Rt);for(let Vp=0;Vp<6;Vp++)Zo.ix=K+this.nb[Vp][0],Zo.iy=ne+this.nb[Vp][1],Zo.iz=Rt+this.nb[Vp][2],Zo.ix<this.pLength&&Zo.ix>-1&&Zo.iy<this.pWidth&&Zo.iy>-1&&Zo.iz<this.pHeight&&Zo.iz>-1&&(Er=Zo.ix*la+this.pHeight*Zo.iy+Zo.iz,this.vpBits[Er]&this.INOUT&&!(this.vpBits[Er]&this.ISDONE)?(N.set(Zo.ix,Zo.iy,Rt+this.nb[Vp][2],Zt),lt=Zo.ix-Zt.ix,Pt=Zo.iy-Zt.iy,Ht=Zo.iz-Zt.iz,Dt=lt*lt+Pt*Pt+Ht*Ht,this.vpDistance[Er]=Dt,this.vpBits[Er]|=this.ISDONE,this.vpBits[Er]|=this.ISBOUND,Np.push({ix:Zo.ix,iy:Zo.iy,iz:Zo.iz})):this.vpBits[Er]&this.INOUT&&this.vpBits[Er]&this.ISDONE&&(lt=Zo.ix-Zt.ix,Pt=Zo.iy-Zt.iy,Ht=Zo.iz-Zt.iz,Dt=lt*lt+Pt*Pt+Ht*Ht,Dt<this.vpDistance[Er]&&(N.set(Zo.ix,Zo.iy,Zo.iz,Zt),this.vpDistance[Er]=Dt,this.vpBits[Er]&this.ISBOUND||(this.vpBits[Er]|=this.ISBOUND,Np.push({ix:Zo.ix,iy:Zo.iy,iz:Zo.iz})))))}for(let Dp=0,wp=y.length;Dp<wp;Dp++){K=y[Dp].ix,ne=y[Dp].iy,Rt=y[Dp].iz,Zt=N.get(K,ne,Rt);for(let Vp=6;Vp<18;Vp++)Zo.ix=K+this.nb[Vp][0],Zo.iy=ne+this.nb[Vp][1],Zo.iz=Rt+this.nb[Vp][2],Zo.ix<this.pLength&&Zo.ix>-1&&Zo.iy<this.pWidth&&Zo.iy>-1&&Zo.iz<this.pHeight&&Zo.iz>-1&&(Er=Zo.ix*la+this.pHeight*Zo.iy+Zo.iz,this.vpBits[Er]&this.INOUT&&!(this.vpBits[Er]&this.ISDONE)?(N.set(Zo.ix,Zo.iy,Rt+this.nb[Vp][2],Zt),lt=Zo.ix-Zt.ix,Pt=Zo.iy-Zt.iy,Ht=Zo.iz-Zt.iz,Dt=lt*lt+Pt*Pt+Ht*Ht,this.vpDistance[Er]=Dt,this.vpBits[Er]|=this.ISDONE,this.vpBits[Er]|=this.ISBOUND,Np.push({ix:Zo.ix,iy:Zo.iy,iz:Zo.iz})):this.vpBits[Er]&this.INOUT&&this.vpBits[Er]&this.ISDONE&&(lt=Zo.ix-Zt.ix,Pt=Zo.iy-Zt.iy,Ht=Zo.iz-Zt.iz,Dt=lt*lt+Pt*Pt+Ht*Ht,Dt<this.vpDistance[Er]&&(N.set(Zo.ix,Zo.iy,Zo.iz,Zt),this.vpDistance[Er]=Dt,this.vpBits[Er]&this.ISBOUND||(this.vpBits[Er]|=this.ISBOUND,Np.push({ix:Zo.ix,iy:Zo.iy,iz:Zo.iz})))))}for(let Dp=0,wp=y.length;Dp<wp;Dp++){K=y[Dp].ix,ne=y[Dp].iy,Rt=y[Dp].iz,Zt=N.get(K,ne,Rt);for(let Vp=18;Vp<26;Vp++)Zo.ix=K+this.nb[Vp][0],Zo.iy=ne+this.nb[Vp][1],Zo.iz=Rt+this.nb[Vp][2],Zo.ix<this.pLength&&Zo.ix>-1&&Zo.iy<this.pWidth&&Zo.iy>-1&&Zo.iz<this.pHeight&&Zo.iz>-1&&(Er=Zo.ix*la+this.pHeight*Zo.iy+Zo.iz,this.vpBits[Er]&this.INOUT&&!(this.vpBits[Er]&this.ISDONE)?(N.set(Zo.ix,Zo.iy,Rt+this.nb[Vp][2],Zt),lt=Zo.ix-Zt.ix,Pt=Zo.iy-Zt.iy,Ht=Zo.iz-Zt.iz,Dt=lt*lt+Pt*Pt+Ht*Ht,this.vpDistance[Er]=Dt,this.vpBits[Er]|=this.ISDONE,this.vpBits[Er]|=this.ISBOUND,Np.push({ix:Zo.ix,iy:Zo.iy,iz:Zo.iz})):this.vpBits[Er]&this.INOUT&&this.vpBits[Er]&this.ISDONE&&(lt=Zo.ix-Zt.ix,Pt=Zo.iy-Zt.iy,Ht=Zo.iz-Zt.iz,Dt=lt*lt+Pt*Pt+Ht*Ht,Dt<this.vpDistance[Er]&&(N.set(Zo.ix,Zo.iy,Zo.iz,Zt),this.vpDistance[Er]=Dt,this.vpBits[Er]&this.ISBOUND||(this.vpBits[Er]|=this.ISBOUND,Np.push({ix:Zo.ix,iy:Zo.iy,iz:Zo.iz})))))}return Np}marchingcubeinit(y){for(let N=0,K=this.vpBits.length;N<K;N++)y==1?this.vpBits[N]&=~this.ISBOUND:y==4?(this.vpBits[N]&=~this.ISDONE,this.vpBits[N]&this.ISBOUND&&(this.vpBits[N]|=this.ISDONE),this.vpBits[N]&=~this.ISBOUND):y==2?this.vpBits[N]&this.ISBOUND&&this.vpBits[N]&this.ISDONE?this.vpBits[N]&=~this.ISBOUND:this.vpBits[N]&this.ISBOUND&&!(this.vpBits[N]&this.ISDONE)&&(this.vpBits[N]|=this.ISDONE):y==3&&(this.vpBits[N]&=~this.ISBOUND)}marchingcube(y){this.marchingcubeinit(y),this.verts=[],this.faces=[],oa.MarchingCube.march(this.vpBits,this.verts,this.faces,{smooth:1,nX:this.pLength,nY:this.pWidth,nZ:this.pHeight});let N=this.pWidth*this.pHeight;for(let K=0,ne=this.verts.length;K<ne;K++)this.verts[K].atomid=this.vpAtomID[this.verts[K].x*N+this.pHeight*this.verts[K].y+this.verts[K].z];oa.MarchingCube.laplacianSmooth(1,this.verts,this.faces)}}oa.MarchingCube=new pg;var a0=r(848);class m0{static finalizeGeo(y){var N=y.updateGeoGroup(0);N.vertices>0&&N.truncateArrayBuffers(!0,!0)}static updateColor(y,N){var K,ne,Rt;N=N||h.CC.color(N),y.colorsNeedUpdate=!0,N.constructor!==Array&&(K=N.r,ne=N.g,Rt=N.b);for(let lt in y.geometryGroups){let Pt=y.geometryGroups[lt],Ht=Pt.colorArray;for(let Dt=0,Zt=Pt.vertices;Dt<Zt;++Dt){if(N.constructor===Array){let Er=N[Dt];K=Er.r,ne=Er.g,Rt=Er.b}Ht[3*Dt]=K,Ht[3*Dt+1]=ne,Ht[3*Dt+2]=Rt}}}static drawArrow(y,N,K){var ne=K.start,Rt=K.end,lt=K.radius,Pt=K.radiusRatio,Ht=K.mid,Dt=K.midpos;if(!ne||!Rt)return;var Zt=N.updateGeoGroup(51),Er=new c.Vector3(Rt.x,Rt.y,Rt.z).sub(ne);if(Dt){let xy=Er.length();Ht=Dt>0?Dt/xy:(xy+Dt)/xy}Er.multiplyScalar(Ht);var Np=new c.Vector3(ne.x,ne.y,ne.z).add(Er),Zo=Er.clone().negate();let la=new c.Vector3(ne.x,ne.y,ne.z);y.intersectionShape.cylinder.push(new u.Cylinder(la,Np.clone(),lt)),y.intersectionShape.sphere.push(new u.Sphere(la,lt));var Dp=[];Dp[0]=Er.clone(),Math.abs(Dp[0].x)>1e-4?Dp[0].y+=1:Dp[0].x+=1,Dp[0].cross(Er),Dp[0].normalize(),Dp[4]=Dp[0].clone(),Dp[4].crossVectors(Dp[0],Er),Dp[4].normalize(),Dp[8]=Dp[0].clone().negate(),Dp[12]=Dp[4].clone().negate(),Dp[2]=Dp[0].clone().add(Dp[4]).normalize(),Dp[6]=Dp[4].clone().add(Dp[8]).normalize(),Dp[10]=Dp[8].clone().add(Dp[12]).normalize(),Dp[14]=Dp[12].clone().add(Dp[0]).normalize(),Dp[1]=Dp[0].clone().add(Dp[2]).normalize(),Dp[3]=Dp[2].clone().add(Dp[4]).normalize(),Dp[5]=Dp[4].clone().add(Dp[6]).normalize(),Dp[7]=Dp[6].clone().add(Dp[8]).normalize(),Dp[9]=Dp[8].clone().add(Dp[10]).normalize(),Dp[11]=Dp[10].clone().add(Dp[12]).normalize(),Dp[13]=Dp[12].clone().add(Dp[14]).normalize(),Dp[15]=Dp[14].clone().add(Dp[0]).normalize();var wp,Vp,Kp,r0,D0,E0,H0,Q0,lm,hm,q0,Bm,Im,h1,i1,M1,L1,c1,j1,Hm,t1,Y1,d1=Zt.vertices,q1=Zt.vertexArray,Z1=Zt.faceArray,x1=Zt.normalArray,ag=Zt.lineArray;for(Vp=0,Kp=Dp.length;Vp<Kp;++Vp){wp=3*(d1+3*Vp);var Og=Dp[Vp].clone().multiplyScalar(lt).add(ne),eg=Dp[Vp].clone().multiplyScalar(lt).add(Np),C1=Dp[Vp].clone().multiplyScalar(lt*Pt).add(Np);if(q1[wp]=Og.x,q1[wp+1]=Og.y,q1[wp+2]=Og.z,q1[wp+3]=eg.x,q1[wp+4]=eg.y,q1[wp+5]=eg.z,q1[wp+6]=C1.x,q1[wp+7]=C1.y,q1[wp+8]=C1.z,Vp>0){var Bg=q1[wp-3],xg=q1[wp-2],Ig=q1[wp-1],_g=new c.Vector3(Bg,xg,Ig),Hg=new c.Vector3(Rt.x,Rt.y,Rt.z),vv=Np.clone(),jv=new c.Vector3(C1.x,C1.y,C1.z);y.intersectionShape.triangle.push(new u.Triangle(jv,Hg,_g)),y.intersectionShape.triangle.push(new u.Triangle(_g.clone(),vv,jv.clone()))}}Zt.vertices+=48,q1[wp=3*Zt.vertices]=ne.x,q1[wp+1]=ne.y,q1[wp+2]=ne.z,q1[wp+3]=Np.x,q1[wp+4]=Np.y,q1[wp+5]=Np.z,q1[wp+6]=Rt.x,q1[wp+7]=Rt.y,q1[wp+8]=Rt.z,Zt.vertices+=3;var Uv=Zt.vertices-3,vy=Zt.vertices-2,ay=Zt.vertices-1,Tv=3*Uv,yy=3*vy,ey=3*ay;for(Vp=0,Kp=Dp.length-1;Vp<Kp;++Vp){var iy=d1+3*Vp;wp=3*iy,D0=Zt.faceidx,E0=Zt.lineidx,Im=3*(H0=iy),h1=3*(Q0=iy+1),i1=3*(lm=iy+2),M1=3*(hm=iy+4),L1=3*(q0=iy+5),c1=3*(Bm=iy+3),j1=Hm=Dp[Vp],t1=Y1=Dp[Vp+1],x1[Im]=j1.x,x1[h1]=Hm.x,x1[c1]=Y1.x,x1[Im+1]=j1.y,x1[h1+1]=Hm.y,x1[c1+1]=Y1.y,x1[Im+2]=j1.z,x1[h1+2]=Hm.z,x1[c1+2]=Y1.z,x1[h1]=Hm.x,x1[M1]=t1.x,x1[c1]=Y1.x,x1[h1+1]=Hm.y,x1[M1+1]=t1.y,x1[c1+1]=Y1.y,x1[h1+2]=Hm.z,x1[M1+2]=t1.z,x1[c1+2]=Y1.z,x1[i1]=Hm.x,x1[L1]=t1.x,x1[i1+1]=Hm.y,x1[L1+1]=t1.y,x1[i1+2]=Hm.z,x1[L1+2]=t1.z,Z1[D0]=H0,Z1[D0+1]=Q0,Z1[D0+2]=Bm,Z1[D0+3]=Q0,Z1[D0+4]=hm,Z1[D0+5]=Bm,Z1[D0+6]=H0,Z1[D0+7]=Bm,Z1[D0+8]=Uv,Z1[D0+9]=lm,Z1[D0+10]=vy,Z1[D0+11]=q0,Z1[D0+12]=lm,Z1[D0+13]=ay,Z1[D0+14]=q0,ag[E0]=H0,ag[E0+1]=Q0,ag[E0+2]=H0,ag[E0+3]=Bm,ag[E0+4]=hm,ag[E0+5]=Bm,ag[E0+6]=H0,ag[E0+7]=Bm,ag[E0+8]=lm,ag[E0+9]=Q0,ag[E0+10]=lm,ag[E0+11]=q0,ag[E0+12]=hm,ag[E0+13]=q0,ag[E0+14]=lm,ag[E0+15]=ay,ag[E0+16]=lm,ag[E0+17]=q0,ag[E0+18]=ay,ag[E0+19]=q0,Zt.faceidx+=15,Zt.lineidx+=20}r0=[d1+45,d1+46,d1+1,d1,d1+47,d1+2],D0=Zt.faceidx,E0=Zt.lineidx,Im=3*(H0=r0[0]),h1=3*(Q0=r0[1]),i1=3*(lm=r0[4]),M1=3*(hm=r0[2]),L1=3*(q0=r0[5]),c1=3*(Bm=r0[3]),j1=Hm=Dp[15],t1=Y1=Dp[0],x1[Im]=j1.x,x1[h1]=Hm.x,x1[c1]=Y1.x,x1[Im+1]=j1.y,x1[h1+1]=Hm.y,x1[c1+1]=Y1.y,x1[Im+2]=j1.z,x1[h1+2]=Hm.z,x1[c1+2]=Y1.z,x1[h1]=Hm.x,x1[M1]=t1.x,x1[c1]=Y1.x,x1[h1+1]=Hm.y,x1[M1+1]=t1.y,x1[c1+1]=Y1.y,x1[h1+2]=Hm.z,x1[M1+2]=t1.z,x1[c1+2]=Y1.z,x1[i1]=Hm.x,x1[L1]=t1.x,x1[i1+1]=Hm.y,x1[L1+1]=t1.y,x1[i1+2]=Hm.z,x1[L1+2]=t1.z,Er.normalize(),Zo.normalize(),x1[Tv]=Zo.x,x1[yy]=x1[ey]=Er.x,x1[Tv+1]=Zo.y,x1[yy+1]=x1[ey+1]=Er.y,x1[Tv+2]=Zo.z,x1[yy+2]=x1[ey+2]=Er.z,Z1[D0]=H0,Z1[D0+1]=Q0,Z1[D0+2]=Bm,Z1[D0+3]=Q0,Z1[D0+4]=hm,Z1[D0+5]=Bm,Z1[D0+6]=H0,Z1[D0+7]=Bm,Z1[D0+8]=Uv,Z1[D0+9]=lm,Z1[D0+10]=vy,Z1[D0+11]=q0,Z1[D0+12]=lm,Z1[D0+13]=ay,Z1[D0+14]=q0,ag[E0]=H0,ag[E0+1]=Q0,ag[E0+2]=H0,ag[E0+3]=Bm,ag[E0+4]=hm,ag[E0+5]=Bm,ag[E0+6]=H0,ag[E0+7]=Bm,ag[E0+8]=lm,ag[E0+9]=Q0,ag[E0+10]=lm,ag[E0+11]=q0,ag[E0+12]=hm,ag[E0+13]=q0,ag[E0+14]=lm,ag[E0+15]=ay,ag[E0+16]=lm,ag[E0+17]=q0,ag[E0+18]=ay,ag[E0+19]=q0,Zt.faceidx+=15,Zt.lineidx+=20}static updateBoundingFromPoints(y,N,K,ne){y.center.set(0,0,0);let Rt=1/0,lt=1/0,Pt=1/0,Ht=-1/0,Dt=-1/0,Zt=-1/0;y.box&&(Rt=y.box.min.x,Ht=y.box.max.x,lt=y.box.min.y,Dt=y.box.max.y,Pt=y.box.min.z,Zt=y.box.max.z);for(let la=0,Dp=ne;la<Dp;la++){var Er=K[3*la],Np=K[3*la+1],Zo=K[3*la+2];Er<Rt&&(Rt=Er),Np<lt&&(lt=Np),Zo<Pt&&(Pt=Zo),Er>Ht&&(Ht=Er),Np>Dt&&(Dt=Np),Zo>Zt&&(Zt=Zo)}y.center.set((Ht+Rt)/2,(Dt+lt)/2,(Zt+Pt)/2),y.radius=y.center.distanceTo({x:Ht,y:Dt,z:Zt}),y.box={min:{x:Rt,y:lt,z:Pt},max:{x:Ht,y:Dt,z:Zt}}}static addCustomGeo(y,N,K,ne,Rt){var lt,Pt,Ht,Dt,Zt,Er,Np,Zo,la,Dp=N.addGeoGroup(),wp=K.vertexArr,Vp=K.normalArr,Kp=K.faceArr;Dp.vertices=wp.length,Dp.faceidx=Kp.length;var r0=Dp.vertexArray,D0=Dp.colorArray;for(ne.constructor!==Array&&(Zo=ne.r,la=ne.g,Dt=ne.b),Er=0,Np=Dp.vertices;Er<Np;++Er)lt=3*Er,Pt=wp[Er],r0[lt]=Pt.x,r0[lt+1]=Pt.y,r0[lt+2]=Pt.z,ne.constructor===Array&&(Zo=(Zt=ne[Er]).r,la=Zt.g,Dt=Zt.b),D0[lt]=Zo,D0[lt+1]=la,D0[lt+2]=Dt;if(Rt)for(Er=0,Np=Dp.faceidx/3;Er<Np;++Er){Ht=Kp[lt=3*Er],Dt=Kp[lt+1],Zt=Kp[lt+2];var E0=new c.Vector3,H0=new c.Vector3,Q0=new c.Vector3;y.intersectionShape.triangle.push(new u.Triangle(E0.copy(wp[Ht]),H0.copy(wp[Dt]),Q0.copy(wp[Zt])))}if(Rt){var lm=new c.Vector3(0,0,0),hm=0;for(let Im=0;Im<N.geometryGroups.length;Im++)lm.add(N.geometryGroups[Im].getCentroid()),hm++;lm.divideScalar(hm),m0.updateBoundingFromPoints(y.boundingSphere,{centroid:lm},r0,Dp.vertices)}if(Dp.faceArray=new Uint16Array(Kp),Dp.truncateArrayBuffers(!0,!0),Vp.length<Dp.vertices)Dp.setNormals();else{var q0,Bm=Dp.normalArray=new Float32Array(3*Dp.vertices);for(Er=0,Np=Dp.vertices;Er<Np;++Er)lt=3*Er,q0=Vp[Er],Bm[lt]=q0.x,Bm[lt+1]=q0.y,Bm[lt+2]=q0.z}Dp.setLineIndices(),Dp.lineidx=Dp.lineArray.length}static updateFromStyle(y,N){N.color!==void 0?(y.color=N.color||new h.Color,N.color instanceof h.Color||(y.color=h.CC.color(N.color))):y.color=h.CC.color(0),y.wireframe=!!N.wireframe,y.opacity=N.alpha?(0,c.clamp)(N.alpha,0,1):1,N.opacity!==void 0&&(y.opacity=(0,c.clamp)(N.opacity,0,1)),y.side=N.side!==void 0?N.side:l.DoubleSide,y.linewidth=N.linewidth===void 0?1:N.linewidth,y.clickable=!!N.clickable,y.callback=(0,g.makeFunction)(N.callback),y.hoverable=!!N.hoverable,y.hover_callback=(0,g.makeFunction)(N.hover_callback),y.unhover_callback=(0,g.makeFunction)(N.unhover_callback),y.contextMenuEnabled=!!N.contextMenuEnabled,y.hidden=N.hidden,y.frame=N.frame}constructor(y){this.color=16777215,this.hidden=!1,this.wireframe=!1,this.opacity=1,this.linewidth=1,this.clickable=!1,this.hoverable=!1,this.contextMenuEnabled=!1,this.side=l.DoubleSide,this.stylespec=y||{},this.boundingSphere=new u.Sphere,this.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},m0.updateFromStyle(this,this.stylespec),this.components=[],this.shapeObj=null,this.renderedShapeObj=null,this.geo=new l.Geometry(!0),this.linegeo=new l.Geometry(!0)}updateStyle(y){for(var N in y)this.stylespec[N]=y[N];if(m0.updateFromStyle(this,this.stylespec),y.voldata&&y.volscheme){(0,g.adjustVolumeStyle)(y);const K=y.volscheme,ne=y.voldata,Rt=h.CC,lt=K.range()||[-1,1];this.geo.setColors(function(Pt,Ht,Dt){let Zt=ne.getVal(Pt,Ht,Dt);return Rt.color(K.valueToHex(Zt,lt))}),delete this.color}}addCustom(y){y.vertexArr=y.vertexArr||[],y.faceArr=y.faceArr||[],y.normalArr=y.normalArr||[],m0.drawCustom(this,this.geo,y)}addSphere(y){y.center||(y.center=new c.Vector3(0,0,0)),y.radius=y.radius?(0,c.clamp)(y.radius,0,1/0):1.5,y.color=h.CC.color(y.color),this.intersectionShape.sphere.push(new u.Sphere(y.center,y.radius)),a.drawSphere(this.geo,y.center,y.radius,y.color,y.quality),this.components.push({centroid:new c.Vector3(y.center.x,y.center.y,y.center.z)});var N=this.geo.updateGeoGroup(0);m0.updateBoundingFromPoints(this.boundingSphere,this.components,N.vertexArray,N.vertices)}addBox(y){var N,K,ne,Rt=y.dimensions||{w:1,h:1,d:1};N=typeof Rt.w=="number"?{x:Rt.w,y:0,z:0}:Rt.w,K=typeof Rt.h=="number"?{x:0,y:Rt.h,z:0}:Rt.h,ne=typeof Rt.d=="number"?{x:0,y:0,z:Rt.d}:Rt.d;var lt=y.corner;lt==null&&(lt=y.center!==void 0?{x:y.center.x-.5*(N.x+K.x+ne.x),y:y.center.y-.5*(N.y+K.y+ne.y),z:y.center.z-.5*(N.z+K.z+ne.z)}:{x:0,y:0,z:0});var Pt=[{x:lt.x,y:lt.y,z:lt.z},{x:lt.x+N.x,y:lt.y+N.y,z:lt.z+N.z},{x:lt.x+K.x,y:lt.y+K.y,z:lt.z+K.z},{x:lt.x+N.x+K.x,y:lt.y+N.y+K.y,z:lt.z+N.z+K.z},{x:lt.x+ne.x,y:lt.y+ne.y,z:lt.z+ne.z},{x:lt.x+N.x+ne.x,y:lt.y+N.y+ne.y,z:lt.z+N.z+ne.z},{x:lt.x+K.x+ne.x,y:lt.y+K.y+ne.y,z:lt.z+K.z+ne.z},{x:lt.x+N.x+K.x+ne.x,y:lt.y+N.y+K.y+ne.y,z:lt.z+N.z+K.z+ne.z}],Ht=[],Dt=[];Ht.splice(Ht.length,0,Pt[0],Pt[1],Pt[2],Pt[3]),Dt.splice(Dt.length,0,0,2,1,1,2,3);var Zt=4;Ht.splice(Ht.length,0,Pt[2],Pt[3],Pt[6],Pt[7]),Dt.splice(Dt.length,0,Zt+0,Zt+2,Zt+1,Zt+1,Zt+2,Zt+3),Zt+=4,Ht.splice(Ht.length,0,Pt[4],Pt[5],Pt[0],Pt[1]),Dt.splice(Dt.length,0,Zt+0,Zt+2,Zt+1,Zt+1,Zt+2,Zt+3),Zt+=4,Ht.splice(Ht.length,0,Pt[6],Pt[7],Pt[4],Pt[5]),Dt.splice(Dt.length,0,Zt+0,Zt+2,Zt+1,Zt+1,Zt+2,Zt+3),Zt+=4,Ht.splice(Ht.length,0,Pt[3],Pt[1],Pt[7],Pt[5]),Dt.splice(Dt.length,0,Zt+0,Zt+2,Zt+1,Zt+1,Zt+2,Zt+3),Zt+=4,Ht.splice(Ht.length,0,Pt[2],Pt[6],Pt[0],Pt[4]),Dt.splice(Dt.length,0,Zt+0,Zt+2,Zt+1,Zt+1,Zt+2,Zt+3),Zt+=4;var Er=(0,g.extend)({},y);Er.vertexArr=Ht,Er.faceArr=Dt,Er.normalArr=[],m0.drawCustom(this,this.geo,Er);var Np=new c.Vector3;this.components.push({centroid:Np.addVectors(Pt[0],Pt[7]).multiplyScalar(.5)});var Zo=this.geo.updateGeoGroup(0);m0.updateBoundingFromPoints(this.boundingSphere,this.components,Zo.vertexArray,Zo.vertices)}addCylinder(y){var N,K;N=y.start?new c.Vector3(y.start.x||0,y.start.y||0,y.start.z||0):new c.Vector3(0,0,0),y.end?(K=new c.Vector3(y.end.x,y.end.y||0,y.end.z||0)).x===void 0&&(K.x=3):K=new c.Vector3(0,0,0);var ne=y.radius||.1,Rt=h.CC.color(y.color);this.intersectionShape.cylinder.push(new u.Cylinder(N,K,ne)),a.drawCylinder(this.geo,N,K,ne,Rt,y.fromCap,y.toCap);var lt=new c.Vector3;this.components.push({centroid:lt.addVectors(N,K).multiplyScalar(.5)});var Pt=this.geo.updateGeoGroup(0);m0.updateBoundingFromPoints(this.boundingSphere,this.components,Pt.vertexArray,Pt.vertices)}addDashedCylinder(y){var N,K;y.dashLength=y.dashLength||.25,y.gapLength=y.gapLength||.25,N=y.start?new c.Vector3(y.start.x||0,y.start.y||0,y.start.z||0):new c.Vector3(0,0,0),y.end?(K=new c.Vector3(y.end.x,y.end.y||0,y.end.z||0)).x===void 0&&(K.x=3):K=new c.Vector3(3,0,0);for(var ne=y.radius||.1,Rt=h.CC.color(y.color),lt=Math.sqrt(Math.pow(N.x-K.x,2)+Math.pow(N.y-K.y,2)+Math.pow(N.z-K.z,2)),Pt=lt/(y.gapLength+y.dashLength),Ht=new c.Vector3(y.start.x||0,y.start.y||0,y.start.z||0),Dt=new c.Vector3(y.end.x,y.end.y||0,y.end.z||0),Zt=new c.Vector3((K.x-N.x)/(lt/y.gapLength),(K.y-N.y)/(lt/y.gapLength),(K.z-N.z)/(lt/y.gapLength)),Er=new c.Vector3((K.x-N.x)/(lt/y.dashLength),(K.y-N.y)/(lt/y.dashLength),(K.z-N.z)/(lt/y.dashLength)),Np=0;Np<Pt;Np++)Dt=new c.Vector3(Ht.x+Er.x,Ht.y+Er.y,Ht.z+Er.z),this.intersectionShape.cylinder.push(new u.Cylinder(Ht,Dt,ne)),a.drawCylinder(this.geo,Ht,Dt,ne,Rt,y.fromCap,y.toCap),Ht=new c.Vector3(Dt.x+Zt.x,Dt.y+Zt.y,Dt.z+Zt.z);var Zo=new c.Vector3;this.components.push({centroid:Zo.addVectors(N,K).multiplyScalar(.5)});var la=this.geo.updateGeoGroup(0);m0.updateBoundingFromPoints(this.boundingSphere,this.components,la.vertexArray,la.vertices)}addCurve(y){y.points=y.points||[],y.smooth=y.smooth||10,y.fromCap===void 0&&(y.fromCap=2),y.toCap===void 0&&(y.toCap=2);var N=T(y.points,y.smooth);if(N.length<3)console.log("Too few points in addCurve");else{var K=y.radius||.1,ne=h.CC.color(y.color),Rt=0,lt=N.length-1,Pt=N[0].distanceTo(N[1]),Ht=Math.ceil(2*K/Pt);if(y.toArrow){let Np={start:N[lt-=Ht],end:N[N.length-1],radius:K,color:ne,mid:1e-4};this.addArrow(Np)}if(y.fromArrow){let Np={start:N[Rt+=Ht],end:N[0],radius:K,color:ne,mid:1e-4};this.addArrow(Np)}for(var Dt=Math.ceil(N.length/2),Zt={radius:K,color:ne,fromCap:2,toCap:2},Er=Rt;Er<lt;Er++)Zt.start=N[Er],Zt.end=N[Er+1],Zt.fromCap=2,Zt.toCap=2,Er<Dt?(Zt.fromCap=2,Zt.toCap=0):Er>Dt?(Zt.fromCap=0,Zt.toCap=2):(Zt.fromCap=2,Zt.toCap=2),this.addCylinder(Zt)}}addLine(y){var N,K;N=y.start?new c.Vector3(y.start.x||0,y.start.y||0,y.start.z||0):new c.Vector3(0,0,0),y.end?(K=new c.Vector3(y.end.x,y.end.y||0,y.end.z||0)).x===void 0&&(K.x=3):K=new c.Vector3(3,0,0);var ne=this.geo.updateGeoGroup(2),Rt=ne.vertices,lt=3*Rt,Pt=ne.vertexArray;Pt[lt]=N.x,Pt[lt+1]=N.y,Pt[lt+2]=N.z,Pt[lt+3]=K.x,Pt[lt+4]=K.y,Pt[lt+5]=K.z,ne.vertices+=2;var Ht=ne.lineArray,Dt=ne.lineidx;Ht[Dt]=Rt,Ht[Dt+1]=Rt+1,ne.lineidx+=2;var Zt=new c.Vector3;this.components.push({centroid:Zt.addVectors(N,K).multiplyScalar(.5)}),ne=this.geo.updateGeoGroup(0),m0.updateBoundingFromPoints(this.boundingSphere,this.components,ne.vertexArray,ne.vertices)}addArrow(y){if(y.start?y.start=new c.Vector3(y.start.x||0,y.start.y||0,y.start.z||0):y.start=new c.Vector3(0,0,0),y.dir instanceof c.Vector3&&typeof y.length=="number"){var N=y.dir.clone().multiplyScalar(y.length).add(y.start);y.end=N}else y.end?(y.end=new c.Vector3(y.end.x,y.end.y||0,y.end.z||0),y.end.x===void 0&&(y.end.x=3)):y.end=new c.Vector3(3,0,0);y.radius=y.radius||.1,y.radiusRatio=y.radiusRatio||1.618034,y.mid=0<y.mid&&y.mid<1?y.mid:.618034,m0.drawArrow(this,this.geo,y);var K=new c.Vector3;this.components.push({centroid:K.addVectors(y.start,y.end).multiplyScalar(.5)});var ne=this.geo.updateGeoGroup(0);m0.updateBoundingFromPoints(this.boundingSphere,this.components,ne.vertexArray,ne.vertices)}static distance_from(y,N){return Math.sqrt(Math.pow(y.x-N.x,2)+Math.pow(y.y-N.y,2)+Math.pow(y.z-N.z,2))}static inSelectedRegion(y,N,K){for(var ne=0;ne<N.length;ne++)if(m0.distance_from(N[ne],y)<=K)return!0;return!1}addIsosurface(y,N,K,ne){var Rt,lt,Pt=N.isoval!==void 0&&typeof N.isoval=="number"?N.isoval:0,Ht=!!N.voxel,Dt=N.smoothness===void 0?1:N.smoothness,Zt=y.size.x,Er=y.size.y,Np=y.size.z,Zo=new Int16Array(Zt*Er*Np),la=y.data;for(Rt=0,lt=Zo.length;Rt<lt;++Rt)Zo[Rt]=-1;var Dp=new Uint8Array(Zt*Er*Np);for(Rt=0,lt=la.length;Rt<lt;++Rt)(Pt>=0?la[Rt]-Pt:Pt-la[Rt])>0&&(Dp[Rt]|=m0.ISDONE);var wp=[],Vp=[];et.march(Dp,wp,Vp,{fulltable:!0,voxel:Ht,unitCube:y.unit,origin:y.origin,matrix:y.matrix,nX:Zt,nY:Er,nZ:Np}),!Ht&&Dt>0&&et.laplacianSmooth(Dt,wp,Vp);var Kp=[],r0=[],D0=[];if(N.selectedRegion&&N.coords===void 0&&(N.coords=N.selectedRegion),N.coords===void 0&&N.selection!==void 0&&(ne?N.coords=ne.selectedAtoms(N.selection):console.log("addIsosurface needs viewer is selection provided.")),N.coords!==void 0){var E0=N.coords[0].x,H0=N.coords[0].y,Q0=N.coords[0].z,lm=N.coords[0].x,hm=N.coords[0].y,q0=N.coords[0].z;for(let Hm=0;Hm<N.coords.length;Hm++)N.coords[Hm].x>E0?E0=N.coords[Hm].x:N.coords[Hm].x<lm&&(lm=N.coords[Hm].x),N.coords[Hm].y>H0?H0=N.coords[Hm].y:N.coords[Hm].y<hm&&(hm=N.coords[Hm].y),N.coords[Hm].z>Q0?Q0=N.coords[Hm].z:N.coords[Hm].z<q0&&(q0=N.coords[Hm].z);var Bm=2;N.radius!==void 0&&(Bm=N.radius),N.selectedOffset!==void 0&&(Bm=N.selectedOffset),N.seldist!==void 0&&(Bm=N.seldist),lm-=Bm,E0+=Bm,hm-=Bm,H0+=Bm,q0-=Bm,Q0+=Bm;for(let Hm=0;Hm<wp.length;Hm++)wp[Hm].x>lm&&wp[Hm].x<E0&&wp[Hm].y>hm&&wp[Hm].y<H0&&wp[Hm].z>q0&&wp[Hm].z<Q0&&m0.inSelectedRegion(wp[Hm],N.coords,Bm)?(Kp.push(r0.length),r0.push(wp[Hm])):Kp.push(-1);for(let Hm=0;Hm+2<Vp.length;Hm+=3)Kp[Vp[Hm]]!==-1&&Kp[Vp[Hm+1]]!==-1&&Kp[Vp[Hm+2]]!==-1&&(D0.push(Vp[Hm]-(Vp[Hm]-Kp[Vp[Hm]])),D0.push(Vp[Hm+1]-(Vp[Hm+1]-Kp[Vp[Hm+1]])),D0.push(Vp[Hm+2]-(Vp[Hm+2]-Kp[Vp[Hm+2]])));wp=r0,Vp=D0}m0.drawCustom(this,this.geo,{vertexArr:wp,faceArr:Vp,normalArr:[],clickable:N.clickable,hoverable:N.hoverable}),this.updateStyle(N);var Im=new c.Vector3(y.origin.x,y.origin.y,y.origin.z),h1=new c.Vector3(y.size.x*y.unit.x,y.size.y*y.unit.y,y.size.z*y.unit.z),i1=new c.Vector3(0,0,0),M1=Im.clone(),L1=Im.clone().add(h1);for(let Hm=0;Hm<wp.length;Hm++)i1.add(wp[Hm]),M1.max(wp[Hm]),L1.min(wp[Hm]);i1.divideScalar(wp.length);var c1=i1.distanceTo(L1),j1=i1.distanceTo(M1);this.boundingSphere.center=i1,this.boundingSphere.radius=Math.max(c1,j1),typeof K=="function"&&K()}addVolumetricData(y,N,K){y=new a0.VolumeData(y,N),this.addIsosurface(y,K)}finalize(){return m0.finalizeGeo(this.geo),this.geo.initTypedArrays(),this.geo}globj(y){if(this.renderedShapeObj&&(y.remove(this.renderedShapeObj),this.renderedShapeObj=null),!this.hidden){m0.finalizeGeo(this.geo),this.geo.initTypedArrays(),this.wireframe&&this.geo.setUpWireframe(),this.color!==void 0&&m0.updateColor(this.geo,this.color),this.shapeObj=new l.Object3D;var N=null;N=this.side==l.DoubleSide?new l.MeshDoubleLambertMaterial({wireframe:this.wireframe,side:this.side,transparent:this.opacity<1,opacity:this.opacity,wireframeLinewidth:this.linewidth,vertexColors:l.Coloring.VertexColors}):new l.MeshLambertMaterial({wireframe:this.wireframe,side:this.side,transparent:this.opacity<1,opacity:this.opacity,wireframeLinewidth:this.linewidth,vertexColors:l.Coloring.VertexColors});var K=new l.Mesh(this.geo,N);if(this.shapeObj.add(K),this.linegeo&&this.linegeo.vertices>0){var ne=new l.LineBasicMaterial({linewidth:this.linewidth,color:this.color}),Rt=new l.Line(this.linegeo,ne,l.LineStyle.LinePieces);this.shapeObj.add(Rt)}this.renderedShapeObj=this.shapeObj.clone(),y.add(this.renderedShapeObj)}}removegl(y){this.renderedShapeObj&&(this.renderedShapeObj.geometry!==void 0&&this.renderedShapeObj.geometry.dispose(),this.renderedShapeObj.material!==void 0&&this.renderedShapeObj.material.dispose(),y.remove(this.renderedShapeObj),this.renderedShapeObj=null),this.shapeObj=null}get position(){return this.boundingSphere.center}get x(){return this.boundingSphere.center.x}get y(){return this.boundingSphere.center.y}get z(){return this.boundingSphere.center.z}}function nm(d0){if(d0.vertexArr.length<64e3)return[d0];var y=[{vertexArr:[],normalArr:[],faceArr:[]}];d0.colorArr&&(y.colorArr=[]);var N=[],K=[],ne=0,Rt=d0.faceArr;for(let Pt=0,Ht=Rt.length;Pt<Ht;Pt+=3){let Dt=y[ne];for(let Zt=0;Zt<3;Zt++){var lt=Rt[Pt+Zt];N[lt]!==ne&&(N[lt]=ne,K[lt]=Dt.vertexArr.length,Dt.vertexArr.push(d0.vertexArr[lt]),d0.normalArr&&d0.normalArr[lt]&&Dt.normalArr.push(d0.normalArr[lt]),d0.colorArr&&d0.colorArr[lt]&&Dt.colorArr.push(d0.colorArr[lt])),Dt.faceArr.push(K[lt])}Dt.vertexArr.length>=64e3&&(y.push({vertexArr:[],normalArr:[],faceArr:[]}),d0.colorArr&&(y.colorArr=[]),ne++)}return y}m0.ISDONE=2,m0.drawCustom=function(d0,y,N){var K=N,ne=K.vertexArr,Rt=K.faceArr;ne.length!==0&&Rt.length!==0||console.warn("Error adding custom shape component: No vertices and/or face indices supplied!");var lt=N.color;lt===void 0&&(lt=d0.color),lt=h.CC.color(lt);for(var Pt=nm(K),Ht=0,Dt=Pt.length;Ht<Dt;Ht++)m0.addCustomGeo(d0,y,Pt[Ht],Pt[Ht].colorArr?Pt[Ht].colorArr:lt,N.clickable)};let L0=0;function cm(d0,y,N){var K=N;return d0!==void 0&&(d0 instanceof h.Color?K=d0.scaled():(K=h.CC.color(d0)).scaled!==void 0&&(K=K.scaled())),y!==void 0&&(K.a=parseFloat(y)),K}class Gm{constructor(y,N){this.id=L0++,this.stylespec=N||{},this.canvas=document.createElement("canvas"),this.canvas.width=134,this.canvas.height=35,this.context=this.canvas.getContext("2d"),this.sprite=new l.Sprite,this.text=y,this.frame=this.stylespec.frame}getStyle(){return this.stylespec}hide(){this.sprite&&(this.sprite.visible=!1)}show(){this.sprite&&(this.sprite.visible=!0)}setContext(){var y=this.stylespec,N=y.useScreen!==void 0&&y.useScreen,K=y.showBackground;K!=="0"&&K!=="false"||(K=!1),K===void 0&&(K=!0);var ne=y.font?y.font:"sans-serif",Rt=parseInt(y.fontSize)?parseInt(y.fontSize):18,lt=cm(y.fontColor,y.fontOpacity,{r:255,g:255,b:255,a:1}),Pt=y.padding?y.padding:4,Ht=y.borderThickness?y.borderThickness:0,Dt=cm(y.backgroundColor,y.backgroundOpacity,{r:0,g:0,b:0,a:1}),Zt=cm(y.borderColor,y.borderOpacity,Dt),Er=y.position?y.position:{x:-10,y:1,z:1},Np=y.inFront===void 0||y.inFront;Np!=="false"&&Np!=="0"||(Np=!1);var Zo=y.alignment||l.SpriteAlignment.topLeft;typeof Zo=="string"&&Zo in l.SpriteAlignment&&(Zo=l.SpriteAlignment[Zo]);var la="";y.bold&&(la="bold "),this.context.font=la+Rt+"px  "+ne;var Dp=this.context.measureText(this.text).width;K||(Ht=0);var wp=Dp+2.5*Ht+2*Pt,Vp=1.25*Rt+2*Ht+2*Pt;if(y.backgroundImage){var Kp=y.backgroundImage,r0=y.backgroundWidth?y.backgroundWidth:Kp.width,D0=y.backgroundHeight?y.backgroundHeight:Kp.height;r0>wp&&(wp=r0),D0>Vp&&(Vp=D0)}if(this.canvas.width=wp,this.canvas.height=Vp,this.context.clearRect(0,0,this.canvas.width,this.canvas.height),la="",y.bold&&(la="bold "),this.context.font=la+Rt+"px  "+ne,this.context.fillStyle="rgba("+Dt.r+","+Dt.g+","+Dt.b+","+Dt.a+")",this.context.strokeStyle="rgba("+Zt.r+","+Zt.g+","+Zt.b+","+Zt.a+")",y.backgroundGradient){let H0=this.context.createLinearGradient(0,Vp/2,wp,Vp/2),Q0=v.Gradient.getGradient(y.backgroundGradient),lm=Q0.range(),hm=-1,q0=1;lm&&(hm=lm[0],q0=lm[1]);let Bm=q0-hm;for(let Im=0;Im<1.01;Im+=.1){let h1=cm(Q0.valueToHex(hm+Bm*Im)),i1="rgba("+h1.r+","+h1.g+","+h1.b+","+h1.a+")";H0.addColorStop(Im,i1)}this.context.fillStyle=H0}this.context.lineWidth=Ht,K&&(function(H0,Q0,lm,hm,q0,Bm,Im){H0.beginPath(),H0.moveTo(Q0+Bm,lm),H0.lineTo(Q0+hm-Bm,lm),H0.quadraticCurveTo(Q0+hm,lm,Q0+hm,lm+Bm),H0.lineTo(Q0+hm,lm+q0-Bm),H0.quadraticCurveTo(Q0+hm,lm+q0,Q0+hm-Bm,lm+q0),H0.lineTo(Q0+Bm,lm+q0),H0.quadraticCurveTo(Q0,lm+q0,Q0,lm+q0-Bm),H0.lineTo(Q0,lm+Bm),H0.quadraticCurveTo(Q0,lm,Q0+Bm,lm),H0.closePath(),H0.fill(),Im&&H0.stroke()})(this.context,Ht,Ht,wp-2*Ht,Vp-2*Ht,6,Ht>0),y.backgroundImage&&this.context.drawImage(Kp,0,0,wp,Vp),this.context.fillStyle="rgba("+lt.r+","+lt.g+","+lt.b+","+lt.a+")",this.context.fillText(this.text,Ht+Pt,Rt+Ht+Pt,Dp);var E0=new l.Texture(this.canvas);E0.needsUpdate=!0,this.sprite.material=new l.SpriteMaterial({map:E0,useScreenCoordinates:N,alignment:Zo,depthTest:!Np,screenOffset:y.screenOffset||null}),this.sprite.scale.set(1,1,1),this.sprite.position.set(Er.x,Er.y,Er.z)}dispose(){this.sprite.material.map!==void 0&&this.sprite.material.map.dispose(),this.sprite.material!==void 0&&this.sprite.material.dispose()}}class Fm{static interpolateArray(y,N){function K(Er,Np,Zo){return Er+(Np-Er)*Zo}var ne=[],Rt=(y.length-1)/(N-1);ne[0]=y[0];for(var lt=1;lt<N-1;lt++){var Pt=lt*Rt,Ht=Math.floor(Pt),Dt=Math.ceil(Pt),Zt=Pt-Ht;ne[lt]=K(y[Ht],y[Dt],Zt)}return ne[N-1]=y[y.length-1],ne}constructor(y,N,K){this.hidden=!1,this.boundingSphere=new u.Sphere,this.renderedShapeObj=null,this.shapeObj=null,this.subsamples=5,this.data=null,this.transferfunctionbuffer=[],this.min=0,this.max=0,N=N||{};var ne,Rt,lt,Pt,Ht,Dt,Zt,Er,Np,Zo,la=Object.assign([],N.transferfn);this.subsamples=N.subsamples||5,la.forEach(function(wp){wp.value=parseFloat(wp.value)}),la.sort(function(wp,Vp){return wp.value-Vp.value}),this.min=la[0].value,la.length==0&&la.push(la[0]),this.max=la[la.length-1].value;for(let wp=0;wp<la.length-1;wp++)if(lt=h.CC.color(la[wp].color),Pt=h.CC.color(la[wp+1].color),Np=la[wp].opacity,Zo=la[wp+1].opacity,(ne=Math.floor(256*(la[wp].value-this.min)/(this.max-this.min)))!=(Rt=Math.floor(256*(la[wp+1].value-this.min)/(this.max-this.min)))){Ht=Fm.interpolateArray([255*lt.r,255*Pt.r],Rt-ne),Dt=Fm.interpolateArray([255*lt.g,255*Pt.g],Rt-ne),Zt=Fm.interpolateArray([255*lt.b,255*Pt.b],Rt-ne),Er=Fm.interpolateArray([255*Np,255*Zo],Rt-ne);for(let Vp=0;Vp<Ht.length;Vp++)this.transferfunctionbuffer.push(Ht[Vp]),this.transferfunctionbuffer.push(Dt[Vp]),this.transferfunctionbuffer.push(Zt[Vp]),this.transferfunctionbuffer.push(Er[Vp])}if(this.transferfunctionbuffer=new Uint8ClampedArray(this.transferfunctionbuffer),y.matrix){let wp=new c.Vector3(0,0,0),Vp=new c.Vector3(y.size.x,y.size.y,y.size.z),Kp=new c.Vector3(1,1,1);wp.applyMatrix4(y.matrix),Vp.applyMatrix4(y.matrix),Kp.applyMatrix4(y.matrix).sub(wp),this.extent=[[wp.x,wp.y,wp.z],[Vp.x,Vp.y,Vp.z]];for(let H0=1;H0<7;H0++)Vp.x=1&H0?y.size.x:0,Vp.y=2&H0?y.size.y:0,Vp.z=4&H0?y.size.z:0,Vp.applyMatrix4(y.matrix),this.extent[0][0]=Math.min(this.extent[0][0],Vp.x),this.extent[0][1]=Math.min(this.extent[0][1],Vp.y),this.extent[0][2]=Math.min(this.extent[0][2],Vp.z),this.extent[1][0]=Math.max(this.extent[1][0],Vp.x),this.extent[1][1]=Math.max(this.extent[1][1],Vp.y),this.extent[1][2]=Math.max(this.extent[1][2],Vp.z);let r0=Vp.x-wp.x,D0=Vp.y-wp.y,E0=Vp.z-wp.z;this.maxdepth=Math.sqrt(r0*r0+D0*D0+E0*E0),this.minunit=Math.min(Math.min(Kp.x,Kp.y),Kp.z),this.texmatrix=new c.Matrix4().identity().scale({x:y.size.x,y:y.size.y,z:y.size.z}),this.texmatrix=this.texmatrix.multiplyMatrices(y.matrix,this.texmatrix),this.texmatrix=this.texmatrix.getInverse(this.texmatrix)}else{this.texmatrix=new c.Matrix4().identity();let wp=y.unit.x*y.size.x,Vp=y.unit.y*y.size.y,Kp=y.unit.z*y.size.z;this.texmatrix.makeTranslation(-y.origin.x/wp,-y.origin.y/Vp,-y.origin.z/Kp),this.texmatrix.scale({x:1/wp,y:1/Vp,z:1/Kp}),this.minunit=Math.min(Math.min(y.unit.x,y.unit.y),y.unit.z),this.extent=[[y.origin.x,y.origin.y,y.origin.z],[y.origin.x+wp,y.origin.y+Vp,y.origin.z+Kp]],this.maxdepth=Math.sqrt(wp*wp+Vp*Vp+Kp*Kp)}var Dp=new m0({});if(Dp.addBox({corner:{x:this.extent[0][0],y:this.extent[0][1],z:this.extent[0][2]},dimensions:{w:this.extent[1][0]-this.extent[0][0],h:this.extent[1][1]-this.extent[0][1],d:this.extent[1][2]-this.extent[0][2]}}),this.geo=Dp.finalize(),this.boundingSphere.center=new c.Vector3((this.extent[0][0]+this.extent[1][0])/2,(this.extent[0][1]+this.extent[1][1])/2,(this.extent[0][2]+this.extent[1][2])/2),this.boundingSphere.radius=this.maxdepth/2,N.coords===void 0&&N.selection!==void 0&&(K?N.coords=K.selectedAtoms(N.selection):console.log("Need to provide viewer to volumetric renderer if selection specified.")),N.coords!==void 0&&N.seldist!==void 0){let wp=new Uint8Array(y.data.length),Vp=N.seldist,Kp=Vp*Vp;for(let r0=0,D0=N.coords.length;r0<D0;r0++){let E0=N.coords[r0],H0=E0.x-Vp,Q0=E0.y-Vp,lm=E0.z-Vp,hm=E0.x+Vp,q0=E0.y+Vp,Bm=E0.z+Vp;if(y.getIndex(H0,Q0,lm)>=0||y.getIndex(hm,q0,Bm)>=0)for(let Im=H0;Im<hm;Im+=this.minunit)for(let h1=Q0;h1<q0;h1+=this.minunit)for(let i1=lm;i1<Bm;i1+=this.minunit){let M1=y.getIndex(Im,h1,i1);M1>=0&&!wp[M1]&&(Im-E0.x)*(Im-E0.x)+(h1-E0.y)*(h1-E0.y)+(i1-E0.z)*(i1-E0.z)<Kp&&(wp[M1]=1)}}for(let r0=0,D0=y.data.length;r0<D0;r0++)wp[r0]==0&&(y.data[r0]=1/0)}this.data=y}globj(y){if(this.renderedShapeObj&&(y.remove(this.renderedShapeObj),this.renderedShapeObj=null),!this.hidden){this.shapeObj=new l.Object3D;var N,K=new l.Texture(this.data,!0),ne=new l.Texture(this.transferfunctionbuffer,!1);K.needsUpdate=!0,ne.needsUpdate=!0,ne.flipY=!1,N=new l.VolumetricMaterial({transferfn:ne,transfermin:this.min,transfermax:this.max,map:K,extent:this.extent,maxdepth:this.maxdepth,texmatrix:this.texmatrix,unit:this.minunit,subsamples:this.subsamples});var Rt=new l.Mesh(this.geo,N);this.shapeObj.add(Rt),this.renderedShapeObj=this.shapeObj.clone(),y.add(this.renderedShapeObj)}}removegl(y){this.renderedShapeObj&&(this.renderedShapeObj.geometry!==void 0&&this.renderedShapeObj.geometry.dispose(),this.renderedShapeObj.material!==void 0&&this.renderedShapeObj.material.dispose(),y.remove(this.renderedShapeObj),this.renderedShapeObj=null),this.shapeObj=null}get position(){return this.boundingSphere.center}get x(){return this.boundingSphere.center.x}get y(){return this.boundingSphere.center.y}get z(){return this.boundingSphere.center.z}}const Vm=16;class D1 extends Array{constructor(y){super(...y)}getSymmetries(){if(this.length==0)return[];let y=this[0];return y.symmetries===void 0&&this.setSymmetries([new c.Matrix4]),y.symmetries}setSymmetries(y){y===void 0&&(y=[new c.Matrix4]);for(let N of this)N.symmetries=y,N.finished=!1}}class O1{getWidth(){let y=this.container,N=y.offsetWidth;if(N==0&&y.style.display==="none"){let K=y.style.position,ne=y.style.visibility;y.style.display="block",y.style.visibility="hidden",y.style.position="absolute",N=y.offsetWidth,y.style.display="none",y.style.visibility=ne,y.style.position=K}return N}getHeight(){let y=this.container,N=y.offsetHeight;if(N==0&&y.style.display==="none"){let K=y.style.position,ne=y.style.visibility;y.style.display="block",y.style.visibility="hidden",y.style.position="absolute",N=y.offsetHeight,y.style.display="none",y.style.visibility=ne,y.style.position=K}return N}setupRenderer(){let y=Object.assign(Object.assign({},this.config),{preserveDrawingBuffer:!0,premultipliedAlpha:!1,containerWidth:this.WIDTH,containerHeight:this.HEIGHT});this.renderer=new l.Renderer(y),this.renderer.domElement.style.width="100%",this.renderer.domElement.style.height="100%",this.renderer.domElement.style.padding="0",this.renderer.domElement.style.position="absolute",this.renderer.domElement.style.top="0px",this.renderer.domElement.style.left="0px",this.renderer.domElement.style.zIndex="0"}initializeScene(){this.scene=new l.Scene,this.scene.fog=new l.Fog(this.bgColor,100,200),this.modelGroup=new l.Object3D,this.rotationGroup=new l.Object3D,this.rotationGroup.useQuaternion=!0,this.rotationGroup.quaternion=new c.Quaternion(0,0,0,1),this.rotationGroup.add(this.modelGroup),this.scene.add(this.rotationGroup);var y=new l.Light(16777215);y.position=new c.Vector3(.2,.2,1).normalize(),y.intensity=1,this.scene.add(y)}_handleLostContext(y){const N=function(K){const ne=K.getBoundingClientRect();return!(ne.right<0||ne.bottom<0||ne.top>(window.innerHeight||document.documentElement.clientHeight)||ne.left>(window.innerWidth||document.documentElement.clientWidth))};if(N(this.container)){let K=0;for(let ne of document.getElementsByTagName("canvas"))if(N(ne)&&ne._3dmol_viewer!=null&&(ne._3dmol_viewer.resize(),K+=1,K>=Vm))break}}initContainer(y){this.container=y,this.WIDTH=this.getWidth(),this.HEIGHT=this.getHeight(),this.ASPECT=this.renderer.getAspect(this.WIDTH,this.HEIGHT),this.renderer.setSize(this.WIDTH,this.HEIGHT),this.container.append(this.renderer.domElement),this.glDOM=this.renderer.domElement,this.glDOM._3dmol_viewer=this,this.glDOM.addEventListener("webglcontextlost",this._handleLostContext.bind(this)),this.nomouse||(this.glDOM.addEventListener("mousedown",this._handleMouseDown.bind(this),{passive:!1}),this.glDOM.addEventListener("touchstart",this._handleMouseDown.bind(this),{passive:!1}),this.glDOM.addEventListener("wheel",this._handleMouseScroll.bind(this),{passive:!1}),this.glDOM.addEventListener("mousemove",this._handleMouseMove.bind(this),{passive:!1}),this.glDOM.addEventListener("touchmove",this._handleMouseMove.bind(this),{passive:!1}),this.glDOM.addEventListener("contextmenu",this._handleContextMenu.bind(this),{passive:!1}))}decAnim(){this.animated--,this.animated<0&&(this.animated=0)}incAnim(){this.animated++}nextSurfID(){var y=0;for(let K in this.surfaces)if(this.surfaces.hasOwnProperty(K)){var N=parseInt(K);isNaN(N)||N>y&&(y=N)}return y+1}setSlabAndFog(){let y=this.camera.position.z-this.rotationGroup.position.z;y<1&&(y=1),this.camera.near=y+this.slabNear,!this.camera.ortho&&this.camera.near<1&&(this.camera.near=1),this.camera.far=y+this.slabFar,this.camera.near+1>this.camera.far&&(this.camera.far=this.camera.near+1),this.camera.fov=this.fov,this.camera.right=y*Math.tan(Math.PI/180*this.fov),this.camera.left=-this.camera.right,this.camera.top=this.camera.right/this.ASPECT,this.camera.bottom=-this.camera.top,this.camera.updateProjectionMatrix(),this.scene.fog.near=this.camera.near+this.fogStart*(this.camera.far-this.camera.near),this.scene.fog.far=this.camera.near+this.fogEnd*(this.camera.far-this.camera.near),this.config.disableFog&&(this.scene.fog.near=this.scene.fog.far)}show(y){if(this.renderer.setViewport(),this.scene&&(this.setSlabAndFog(),this.renderer.render(this.scene,this.camera),this.viewChangeCallback&&this.viewChangeCallback(this._viewer.getView()),!y&&this.linkedViewers.length>0))for(var N=this._viewer.getView(),K=0;K<this.linkedViewers.length;K++)this.linkedViewers[K].setView(N,!0)}updateClickables(){this.clickables.splice(0,this.clickables.length),this.hoverables.splice(0,this.hoverables.length),this.contextMenuEnabledObjects.splice(0,this.contextMenuEnabledObjects.length);for(let y=0,N=this.models.length;y<N;y++){let K=this.models[y];if(K){let ne=K.selectedAtoms({clickable:!0}),Rt=K.selectedAtoms({hoverable:!0}),lt=K.selectedAtoms({contextMenuEnabled:!0});for(let Pt=0;Pt<Rt.length;Pt++)this.hoverables.push(Rt[Pt]);for(let Pt=0;Pt<ne.length;Pt++)this.clickables.push(ne[Pt]);for(let Pt=0;Pt<lt.length;Pt++)this.contextMenuEnabledObjects.push(lt[Pt])}}for(let y=0,N=this.shapes.length;y<N;y++){let K=this.shapes[y];K&&K.clickable&&this.clickables.push(K),K&&K.hoverable&&this.hoverables.push(K),K&&K.contextMenuEnabled&&this.contextMenuEnabledObjects.push(K)}}handleClickSelection(y,N,K){let ne=this.targetedObjects(y,N,this.clickables);if(ne.length){var Rt=ne[0].clickable;Rt.callback!==void 0&&(typeof Rt.callback!="function"&&(Rt.callback=(0,g.makeFunction)(Rt.callback)),typeof Rt.callback=="function")&&(this.mouseButton===3&&this.contextMenuEnabledObjects.includes(Rt)&&this.userContextMenuHandler||Rt.callback(Rt,this._viewer,K,this.container,ne))}}canvasOffset(){let y=this.glDOM,N=y.getBoundingClientRect(),K=y.ownerDocument,ne=K.documentElement,Rt=K.defaultView;return{top:N.top+Rt.pageYOffset-ne.clientTop,left:N.left+Rt.pageXOffset-ne.clientLeft}}setHover(y,N,K){this.current_hover!=y&&(this.current_hover&&(typeof this.current_hover.unhover_callback!="function"&&(this.current_hover.unhover_callback=(0,g.makeFunction)(this.current_hover.unhover_callback)),this.current_hover.unhover_callback(this.current_hover,this._viewer,N,this.container,K)),this.current_hover=y,y&&y.hover_callback!==void 0&&(typeof y.hover_callback!="function"&&(y.hover_callback=(0,g.makeFunction)(y.hover_callback)),typeof y.hover_callback=="function"&&y.hover_callback(y,this._viewer,N,this.container,K)))}handleHoverSelection(y,N,K){if(this.hoverables.length==0)return;let ne=this.targetedObjects(y,N,this.hoverables);if(ne.length){var Rt=ne[0].clickable;this.setHover(Rt,K,ne),this.current_hover=Rt}else this.setHover(null)}handleHoverContinue(y,N){let K=this.targetedObjects(y,N,this.hoverables);K.length!=0&&K[0]!==void 0||this.setHover(null),K[0]!==void 0&&K[0].clickable!==this.current_hover&&this.setHover(null)}closeEnoughForClick(y,{allowTolerance:N=y.targetTouches,tolerance:K=5}={}){const ne=this.getX(y),Rt=this.getY(y);if(N){const lt=Math.abs(ne-this.mouseStartX),Pt=Math.abs(Rt-this.mouseStartY);return lt<=K&&Pt<=K}return ne===this.mouseStartX&&Rt===this.mouseStartY}calcTouchDistance(y){var N=y.targetTouches[0].pageX-y.targetTouches[1].pageX,K=y.targetTouches[0].pageY-y.targetTouches[1].pageY;return Math.hypot(N,K)}getX(y){var N=y.pageX;return N==null&&(N=y.pageX),y.targetTouches&&y.targetTouches[0]?N=y.targetTouches[0].pageX:y.changedTouches&&y.changedTouches[0]&&(N=y.changedTouches[0].pageX),N}getY(y){var N=y.pageY;return N==null&&(N=y.pageY),y.targetTouches&&y.targetTouches[0]?N=y.targetTouches[0].pageY:y.changedTouches&&y.changedTouches[0]&&(N=y.changedTouches[0].pageY),N}isInViewer(y,N){if(this.viewers!=null){var K=this.WIDTH/this.cols,ne=this.HEIGHT/this.rows,Rt=this.canvasOffset(),lt=y-Rt.left,Pt=N-Rt.top,Ht=this.rows-Math.floor(Pt/ne)-1,Dt=Math.floor(lt/K);if(Ht!=this.row||Dt!=this.col)return!1}return!0}adjustZoomToLimits(y){if(this.config.lowerZoomLimit&&this.config.lowerZoomLimit>0){let N=this.CAMERA_Z-this.config.lowerZoomLimit;y>N&&(y=N)}if(this.config.upperZoomLimit&&this.config.upperZoomLimit>0){let N=this.CAMERA_Z-this.config.upperZoomLimit;y<N&&(y=N)}return y>this.CAMERA_Z-1&&(y=this.CAMERA_Z-1),y}static slerp(y,N,K){if(K==1)return N.clone();if(K==0)return y.clone();let ne=y.x*N.x+y.y*N.y+y.z*N.z+y.w*N.w;if(ne>.9995){let Zt=new c.Quaternion(y.x+K*(N.x-y.x),y.y+K*(N.y-y.y),y.z+K*(N.z-y.z),y.w+K*(N.w-y.w));return Zt.normalize(),Zt}ne<0&&(N=N.clone().multiplyScalar(-1),ne=-ne),ne>1?ne=1:ne<-1&&(ne=-1);var Rt=Math.acos(ne)*K,lt=N.clone();lt.sub(y.clone().multiplyScalar(ne)),lt.normalize();var Pt=Math.cos(Rt),Ht=Math.sin(Rt),Dt=new c.Quaternion(y.x*Pt+lt.x*Ht,y.y*Pt+lt.y*Ht,y.z*Pt+lt.z*Ht,y.w*Pt+lt.w*Ht);return Dt.normalize(),Dt}constructor(y,N={}){if(this.nomouse=!1,this.glDOM=null,this.models=[],this.surfaces={},this.shapes=[],this.labels=[],this.clickables=[],this.hoverables=[],this.contextMenuEnabledObjects=[],this.current_hover=null,this.hoverDuration=500,this.longTouchDuration=1e3,this.viewer_frame=0,this.viewChangeCallback=null,this.stateChangeCallback=null,this.NEAR=1,this.FAR=800,this.CAMERA_Z=150,this.fov=20,this.linkedViewers=[],this.renderer=null,this.control_all=!1,this.scene=null,this.rotationGroup=null,this.modelGroup=null,this.fogStart=.4,this.fogEnd=1,this.slabNear=-50,this.slabFar=50,this.cq=new c.Quaternion(0,0,0,1),this.dq=new c.Quaternion(0,0,0,1),this.animated=0,this.animationTimers=new Set,this.isDragging=!1,this.mouseStartX=0,this.mouseStartY=0,this.touchDistanceStart=0,this.touchHold=!1,this.currentModelPos=0,this.cz=0,this.cslabNear=0,this.cslabFar=0,this.userContextMenuHandler=null,this.config=N,this.callback=this.config.callback,this.defaultcolors=this.config.defaultcolors,this.defaultcolors||(this.defaultcolors=h.elementColors.defaultColors),this.nomouse=!!this.config.nomouse,this.bgColor=0,this.config.backgroundColor=this.config.backgroundColor||"#ffffff",this.config.backgroundColor!==void 0&&(this.bgColor=h.CC.color(this.config.backgroundColor).getHex()),this.config.backgroundAlpha=this.config.backgroundAlpha==null?1:this.config.backgroundAlpha,this.camerax=0,this.config.camerax!==void 0&&(this.camerax=typeof this.config.camerax=="string"?parseFloat(this.config.camerax):this.config.camerax),this._viewer=this,this.container=y,this.config.hoverDuration!=null&&(this.hoverDuration=this.config.hoverDuration),this.config.antialias===void 0&&(this.config.antialias=!0),this.config.cartoonQuality===void 0&&(this.config.cartoonQuality=10),this.WIDTH=this.getWidth(),this.HEIGHT=this.getHeight(),this.setupRenderer(),this.row=this.config.row==null?0:this.config.row,this.col=this.config.col==null?0:this.config.col,this.cols=this.config.cols,this.rows=this.config.rows,this.viewers=this.config.viewers,this.control_all=this.config.control_all,this.ASPECT=this.renderer.getAspect(this.WIDTH,this.HEIGHT),this.camera=new l.Camera(this.fov,this.ASPECT,this.NEAR,this.FAR,this.config.orthographic),this.camera.position=new c.Vector3(this.camerax,0,this.CAMERA_Z),this.lookingAt=new c.Vector3,this.camera.lookAt(this.lookingAt),this.raycaster=new l.Raycaster(new c.Vector3(0,0,0),new c.Vector3(0,0,0)),this.projector=new l.Projector,this.initializeScene(),this.renderer.setClearColorHex(this.bgColor,this.config.backgroundAlpha),this.scene.fog.color=h.CC.color(this.bgColor),document.body.addEventListener("mouseup",this._handleMouseUp.bind(this)),document.body.addEventListener("touchend",this._handleMouseUp.bind(this)),this.initContainer(this.container),this.config.style&&this.setViewStyle(this.config),window.addEventListener("resize",this.resize.bind(this)),window.ResizeObserver!==void 0&&(this.divwatcher=new window.ResizeObserver(this.resize.bind(this)),this.divwatcher.observe(this.container)),window.IntersectionObserver!==void 0){let K=(ne,Rt)=>{ne.forEach(lt=>{lt.isIntersecting&&this.resize()})};this.intwatcher=new window.IntersectionObserver(K),this.intwatcher.observe(this.container)}try{typeof this.callback=="function"&&this.callback(this)}catch(K){console.log("error with glviewer callback: "+K)}}targetedObjects(y,N,K){var ne={x:y,y:N,z:-1};return Array.isArray(K)||(K=this.selectedAtoms(K)),K.length==0?[]:(this.raycaster.setFromCamera(ne,this.camera),this.raycaster.intersectObjects(this.modelGroup,K))}modelToScreen(y){let N=!1;Array.isArray(y)||(y=[y],N=!0);let K=this.renderer.getXRatio(),ne=this.renderer.getYRatio(),Rt=this.col,lt=this.row,Pt=Rt*(this.WIDTH/K),Ht=(ne-lt-1)*(this.HEIGHT/ne),Dt=[],Zt=this.canvasOffset();return y.forEach(Er=>{let Np=new c.Vector3(Er.x,Er.y,Er.z);Np.applyMatrix4(this.modelGroup.matrixWorld),this.projector.projectVector(Np,this.camera);let Zo=this.WIDTH/K*(Np.x+1)/2+Zt.left+Pt,la=-this.HEIGHT/ne*(Np.y-1)/2+Zt.top+Ht;Dt.push({x:Zo,y:la})}),N&&(Dt=Dt[0]),Dt}screenOffsetToModel(y,N,K){var ne=y/this.WIDTH,Rt=N/this.HEIGHT,lt=K===void 0?this.rotationGroup.position.z:K,Pt=this.rotationGroup.quaternion,Ht=new c.Vector3(0,0,lt);return this.projector.projectVector(Ht,this.camera),Ht.x+=2*ne,Ht.y-=2*Rt,this.projector.unprojectVector(Ht,this.camera),Ht.z=0,Ht.applyQuaternion(Pt),Ht}screenToModelDistance(y,N){let K=this.canvasOffset(),ne=new c.Vector3(N.x,N.y,N.z);ne.applyMatrix4(this.modelGroup.matrixWorld);let Rt=ne.clone();this.projector.projectVector(ne,this.camera);let lt=new c.Vector3(2*(y.x-K.left)/this.WIDTH-1,2*(y.y-K.top)/-this.HEIGHT+1,ne.z);return this.projector.unprojectVector(lt,this.camera),lt.distanceTo(Rt)}setViewChangeCallback(y){typeof y!="function"&&y!=null||(this.viewChangeCallback=y)}setStateChangeCallback(y){typeof y!="function"&&y!=null||(this.stateChangeCallback=y)}getConfig(){return this.config}setConfig(y){this.config=y,y.ambientOcclusion&&this.renderer.enableAmbientOcclusion(y.ambientOcclusion)}getInternalState(){var y={models:[],surfaces:[],shapes:[],labels:[]};for(let N=0;N<this.models.length;N++)this.models[N]&&(y.models[N]=this.models[N].getInternalState());return y}setInternalState(y){this.clear();var N=y.models;for(let K=0;K<N.length;K++)N[K]&&(this.models[K]=new wg(K,void 0,this),this.models[K].setInternalState(N[K]));this.render()}setZoomLimits(y,N){y!==void 0&&(this.config.lowerZoomLimit=y),N&&(this.config.upperZoomLimit=N),this.rotationGroup.position.z=this.adjustZoomToLimits(this.rotationGroup.position.z),this.show()}setCameraParameters(y){y.fov!==void 0&&(this.fov=y.fov,this.camera.fov=this.fov),y.z!==void 0&&(this.CAMERA_Z=y.z,this.camera.z=this.CAMERA_Z),y.orthographic!==void 0&&(this.camera.ortho=y.orthographic),this.setSlabAndFog()}_handleMouseDown(y){if(y.preventDefault(),!this.scene)return;var N=this.getX(y),K=this.getY(y);if(N===void 0)return;this.isDragging=!0,this.mouseButton=y.which,this.mouseStartX=N,this.mouseStartY=K,this.touchHold=!0,this.touchDistanceStart=0,y.targetTouches&&y.targetTouches.length==2&&(this.touchDistanceStart=this.calcTouchDistance(y)),this.cq=this.rotationGroup.quaternion.clone(),this.cz=this.rotationGroup.position.z,this.currentModelPos=this.modelGroup.position.clone(),this.cslabNear=this.slabNear,this.cslabFar=this.slabFar;let ne=this;y.targetTouches&&y.targetTouches.length===1&&(this.longTouchTimeout=setTimeout(function(){if(ne.touchHold==1){ne.glDOM=ne.renderer.domElement;const Rt=y.targetTouches[0],lt=new PointerEvent("contextmenu",Object.assign(Object.assign({},y),{pageX:Rt.pageX,pageY:Rt.pageY,screenX:Rt.screenX,screenY:Rt.screenY,clientX:Rt.clientX,clientY:Rt.clientY}));ne.glDOM.dispatchEvent(lt)}},this.longTouchDuration))}_handleMouseUp(y){if(this.touchHold=!1,this.isDragging&&this.scene){var N=this.getX(y),K=this.getY(y);if(this.closeEnoughForClick(y)&&this.isInViewer(N,K)){let ne=this.mouseXY(N,K);this.handleClickSelection(ne.x,ne.y,y)}}this.isDragging=!1}_handleMouseScroll(y){if(y.preventDefault(),this.scene){var N=this.getX(y),K=this.getY(y);if(N!==void 0&&(this.control_all||this.isInViewer(N,K))){var ne=.85*(this.CAMERA_Z-this.rotationGroup.position.z),Rt=1;if(y.ctrlKey&&(Rt=-1),y.detail)this.rotationGroup.position.z+=Rt*ne*y.detail/10;else if(y.wheelDelta){let lt=600*y.wheelDelta/(y.wheelDelta+600);this.rotationGroup.position.z-=Rt*ne*lt/400}this.rotationGroup.position.z=this.adjustZoomToLimits(this.rotationGroup.position.z),this.show()}}}pngURI(){return this.getCanvas().toDataURL("image/png")}apngURI(y){let N=this;return y=y||1,new Promise(function(K){let ne=0,Rt=N.viewChangeCallback,lt=[],Pt=[],Ht=Date.now();N.viewChangeCallback=function(){Pt.push(Date.now()-Ht),Ht=Date.now(),lt.push(new Promise(Dt=>{N.getCanvas().toBlob(function(Zt){Zt.arrayBuffer().then(Dt)},"image/png")})),ne+=1,ne==y&&(N.viewChangeCallback=Rt,Promise.all(lt).then(Dt=>{let Zt=[];for(let wp=0;wp<Dt.length;wp++){let Vp=(0,o.decode)(Dt[wp]);Zt.push((0,o.toRGBA8)(Vp)[0])}let Er=N.getCanvas().width,Np=N.getCanvas().height,Zo=(0,o.encode)(Zt,Er,Np,0,Pt),la=new Blob([Zo],{type:"image/png"}),Dp=new FileReader;Dp.onload=function(wp){K(wp.target.result)},Dp.readAsDataURL(la)}))}})}getCanvas(){return this.glDOM}getRenderer(){return this.renderer}setHoverDuration(y){this.hoverDuration=y}mouseXY(y,N){let K=this.canvasOffset(),ne=this.renderer.getXRatio(),Rt=this.renderer.getYRatio(),lt=this.col,Pt=this.row,Ht=lt*(this.WIDTH/ne),Dt=(Rt-Pt-1)*(this.HEIGHT/Rt);return{x:(y-K.left-Ht)/(this.WIDTH/ne)*2-1,y:-(N-K.top-Dt)/(this.HEIGHT/Rt)*2+1}}_handleMouseMove(y){clearTimeout(this.hoverTimeout),y.preventDefault();let N=this.getX(y),K=this.getY(y);if(N===void 0)return;let ne=this.renderer.getXRatio(),Rt=this.renderer.getYRatio(),lt=this.mouseXY(N,K),Pt=this;this.current_hover!==null&&this.handleHoverContinue(lt.x,lt.y);var Ht=0;if((this.control_all||this.isInViewer(N,K))&&this.scene&&(this.hoverables.length>0&&(this.hoverTimeout=setTimeout(function(){Pt.handleHoverSelection(lt.x,lt.y,y)},this.hoverDuration)),this.isDragging)){y.targetTouches&&(y.targetTouches.length>1||y.targetTouches.length===1&&!this.closeEnoughForClick(y))&&clearTimeout(this.longTouchTimeout);var Dt=(N-this.mouseStartX)/this.WIDTH,Zt=(K-this.mouseStartY)/this.HEIGHT;this.touchDistanceStart!=0&&y.targetTouches&&y.targetTouches.length==2?(Ht=2,Zt=2*(this.calcTouchDistance(y)-this.touchDistanceStart)/(this.WIDTH+this.HEIGHT)):y.targetTouches&&y.targetTouches.length==3&&(Ht=1),Dt*=ne,Zt*=Rt;var Er,Np=Math.hypot(Dt,Zt);if(Ht==3||this.mouseButton==3&&y.ctrlKey)this.slabNear=this.cslabNear+100*Dt,this.slabFar=this.cslabFar-100*Zt;else if(Ht==2||this.mouseButton==3||y.shiftKey)(Er=.85*(this.CAMERA_Z-this.rotationGroup.position.z))<80&&(Er=80),this.rotationGroup.position.z=this.cz+Zt*Er,this.rotationGroup.position.z=this.adjustZoomToLimits(this.rotationGroup.position.z);else if(Ht==1||this.mouseButton==2||y.ctrlKey){var Zo=this.screenOffsetToModel(ne*(N-this.mouseStartX),Rt*(K-this.mouseStartY));this.modelGroup.position.addVectors(this.currentModelPos,Zo)}else if((Ht===0||this.mouseButton==1)&&Np!==0){var la=Math.sin(Np*Math.PI)/Np;this.dq.x=Math.cos(Np*Math.PI),this.dq.y=0,this.dq.z=la*Dt,this.dq.w=-la*Zt,this.rotationGroup.quaternion.set(1,0,0,0),this.rotationGroup.quaternion.multiply(this.dq),this.rotationGroup.quaternion.multiply(this.cq)}this.show()}}_handleContextMenu(y){if(y.preventDefault(),this.closeEnoughForClick(y)){var N=this.mouseStartX,K=this.mouseStartY,ne=this.canvasOffset();let lt=this.mouseXY(N,K),Pt=lt.x,Ht=lt.y,Dt=this.targetedObjects(Pt,Ht,this.contextMenuEnabledObjects);var Rt=null;Dt.length&&(Rt=Dt[0].clickable),ne=this.canvasOffset(),N=this.mouseStartX-ne.left,K=this.mouseStartY-ne.top,this.userContextMenuHandler&&(this.userContextMenuHandler(Rt,N,K,Dt,y),this.isDragging=!1)}}setContainer(y){let N=(0,g.getElement)(y)||this.container;return this.initContainer(N),this}setBackgroundColor(y,N){(N===void 0||N<0||N>1)&&(N=1);var K=h.CC.color(y);return this.scene.fog.color=K,this.bgColor=K.getHex(),this.renderer.setClearColorHex(K.getHex(),N),this.show(),this}setProjection(y){this.camera.ortho=y==="orthographic",this.setSlabAndFog()}setViewStyle(y){if((y=y||{}).style=y.style||"",y.style.includes("outline")?this.renderer.enableOutline(y):this.renderer.disableOutline(),y.style.includes("ambientOcclusion")){var N={};y.strength&&(N.strength=y.strength),y.radius&&(N.radius=y.radius),this.renderer.enableAmbientOcclusion(N)}else this.renderer.disableAmbientOcclusion();return this}updateSize(){this.renderer.setSize(this.WIDTH,this.HEIGHT),this.ASPECT=this.renderer.getAspect(this.WIDTH,this.HEIGHT),this.renderer.setSize(this.WIDTH,this.HEIGHT),this.camera.aspect=this.ASPECT,this.camera.updateProjectionMatrix()}setWidth(y){return this.WIDTH=y||this.WIDTH,this.updateSize(),this}setHeight(y){return this.HEIGHT=y||this.HEIGHT,this.updateSize(),this}resize(){this.WIDTH=this.getWidth(),this.HEIGHT=this.getHeight();let y=!1;if(this.renderer.isLost()&&this.WIDTH>0&&this.HEIGHT>0){let N=!1,K=this.container.querySelector("canvas");K&&K!=this.renderer.getCanvas()?this.config.canvas=K:(K.remove(),this.config&&this.config.canvas!=null&&(delete this.config.canvas,N=!0)),this.setupRenderer(),this.initContainer(this.container),this.renderer.setClearColorHex(this.bgColor,this.config.backgroundAlpha),y=!0,N&&(this.config.canvas=this.renderer.getCanvas())}if(this.WIDTH==0||this.HEIGHT==0?this.animated&&this._viewer.pauseAnimate():this.animated&&this._viewer.resumeAnimate(),this.updateSize(),y){let N=this.renderer.supportedExtensions();if(N.regen=!0,this.viewers)for(let K=0,ne=this.viewers.length;K<ne;K++)for(let Rt=0,lt=this.viewers[K].length;Rt<lt;Rt++)this.viewers[K][Rt].render(null,N);this._viewer.render(null,N)}else this.WIDTH>0&&this.HEIGHT>0&&this.show();return this}getModel(y){return y===void 0?this.models.length==0?null:this.models[this.models.length-1]:y instanceof wg?y:y in this.models?this.models[y]:this.models.length==0?null:this.models[this.models.length-1]}spin(y,N=1,K=!1){if(clearInterval(this.spinInterval),y===void 0&&(y="y"),typeof y=="boolean"){if(!y)return;y="y"}Array.isArray(y)&&(y={x:y[0],y:y[1],z:y[2]});var ne=this;this.spinInterval=setInterval(function(){!ne.getCanvas().isConnected&&ne.renderer.isLost()&&clearInterval(ne.spinInterval),(!K||ne.container.checkVisibility&&ne.container.checkVisibility())&&ne.rotate(1*N,y)},25)}animateMotion(y,N,K,ne,Rt,lt){var Pt=Math.ceil(y/20);Pt<1&&(Pt=1),this.incAnim();var Ht={mpos:this.modelGroup.position.clone(),rz:this.rotationGroup.position.z,rot:this.rotationGroup.quaternion.clone(),cam:this.lookingAt.clone()};if(N){let Er=new Array(Pt);for(let Dp=0;Dp<Pt;Dp++){let wp=(Dp+1)/Pt,Vp={mpos:Ht.mpos,rz:Ht.rz,rot:Ht.rot};Vp.mpos=K.clone().sub(Ht.mpos).multiplyScalar(wp).add(Ht.mpos),Vp.rz=Ht.rz+wp*(ne-Ht.rz),Vp.rot=O1.slerp(Ht.rot,Rt,wp),Vp.cam=lt.clone().sub(Ht.cam).multiplyScalar(wp).add(Ht.cam),Er[Dp]=Vp}let Np=0,Zo=this,la=function(){var Dp=Er[Np];Np+=1,Zo.modelGroup.position=Dp.mpos,Zo.rotationGroup.position.z=Dp.rz,Zo.rotationGroup.quaternion=Dp.rot,Zo.camera.lookAt(Dp.cam),Np<Er.length?setTimeout(la,20):Zo.decAnim(),Zo.show()};setTimeout(la,20)}else{var Dt={};let Er=1/Pt;if(K&&(Dt.mpos=K.clone().sub(Ht.mpos).multiplyScalar(Er)),ne!==void 0&&ne!=null&&(Dt.rz=Er*(ne-Ht.rz)),Rt){var Zt=O1.slerp(Ht.rot,Rt,Er);Dt.rot=Ht.rot.clone().inverse().multiply(Zt)}lt&&(Dt.cam=lt.clone().sub(Ht.cam).multiplyScalar(Er));let Np=0,Zo=this,la=function(){Np+=1,Dt.mpos&&Zo.modelGroup.position.add(Dt.mpos),Dt.rz&&(Zo.rotationGroup.position.z+=Dt.rz),Dt.rot&&Zo.rotationGroup.quaternion.multiply(Dt.rot),Dt.cam&&(Zo.lookingAt.add(Dt.cam),Zo.camera.lookAt(Zo.lookingAt)),Np<Pt?setTimeout(la,20):Zo.decAnim(),Zo.show()};setTimeout(la,20)}}rotate(y,N="y",K=0,ne=!1){if(N=="x"?N={x:1,y:0,z:0}:N=="y"?N={x:0,y:1,z:0}:N=="z"&&(N={x:0,y:0,z:1}),N=="vx"?N={vx:1,vy:0,vz:0}:N=="vy"?N={vx:0,vy:1,vz:0}:N=="vz"&&(N={vx:0,vy:0,vz:1}),N.vx!==void 0){var Rt=new c.Vector3(N.vx,N.vy,N.vz);Rt.applyQuaternion(this.rotationGroup.quaternion),N={x:Rt.x,y:Rt.y,z:Rt.z}}var lt=(function(Ht){var Dt,Zt,Er,Np=Math.sin(Ht/2),Zo=Math.cos(Ht/2);return Dt=N.x*Np,Zt=N.y*Np,Er=N.z*Np,new c.Quaternion(Dt,Zt,Er,Zo).normalize()})(Math.PI*y/180);if(K){var Pt=new c.Quaternion().copy(this.rotationGroup.quaternion).multiply(lt);this.animateMotion(K,ne,this.modelGroup.position,this.rotationGroup.position.z,Pt,this.lookingAt)}else this.rotationGroup.quaternion.multiply(lt),this.show();return this}surfacesFinished(){for(var y in this.surfaces)if(!this.surfaces[y][0].done)return!1;return!0}getView(){if(!this.modelGroup)return[0,0,0,0,0,0,0,1];var y=this.modelGroup.position,N=this.rotationGroup.quaternion;return[y.x,y.y,y.z,this.rotationGroup.position.z,N.x,N.y,N.z,N.w]}setView(y,N){return y!==void 0&&(y instanceof Array||y.length!==8)&&this.modelGroup&&this.rotationGroup?(this.modelGroup.position.x=y[0],this.modelGroup.position.y=y[1],this.modelGroup.position.z=y[2],this.rotationGroup.position.z=y[3],this.rotationGroup.quaternion.x=y[4],this.rotationGroup.quaternion.y=y[5],this.rotationGroup.quaternion.z=y[6],this.rotationGroup.quaternion.w=y[7],y[8]!==void 0&&(this.rotationGroup.position.x=y[8],this.rotationGroup.position.y=y[9]),this.show(N),this):this}render(y,N){this.renderer.setViewport(),this.updateClickables();var K,ne,Rt=this.getView();for(this.stateChangeCallback&&this.stateChangeCallback(this.getInternalState()),N||(N=this.renderer.supportedExtensions()),K=0;K<this.models.length;K++)this.models[K]&&this.models[K].globj(this.modelGroup,N);for(K=0;K<this.shapes.length;K++)this.shapes[K]&&(this.shapes[K].frame===void 0||this.viewer_frame<0||this.shapes[K].frame<0||this.shapes[K].frame==this.viewer_frame?this.shapes[K].globj(this.modelGroup,N):this.shapes[K].removegl(this.modelGroup));for(K=0;K<this.labels.length;K++)N.regen&&(this.labels[K].dispose(),this.modelGroup.remove(this.labels[K].sprite),this.labels[K].setContext(),this.modelGroup.add(this.labels[K].sprite)),this.labels[K]&&this.labels[K].frame!==void 0&&this.labels[K].frame>=0&&(this.modelGroup.remove(this.labels[K].sprite),(this.viewer_frame<0||this.labels[K].frame==this.viewer_frame)&&this.modelGroup.add(this.labels[K].sprite));for(K in this.surfaces)if(this.surfaces.hasOwnProperty(K)){var lt=this.surfaces[K];for(ne=0;ne<lt.length;ne++)if(lt.hasOwnProperty(ne)){var Pt=lt[ne].geo;if(!lt[ne].finished||N.regen){Pt.verticesNeedUpdate=!0,Pt.elementsNeedUpdate=!0,Pt.normalsNeedUpdate=!0,Pt.colorsNeedUpdate=!0,Pt.buffersNeedUpdate=!0,lt[ne].mat.needsUpdate=!0,lt[ne].done&&(lt[ne].finished=!0),lt[ne].lastGL&&this.modelGroup.remove(lt[ne].lastGL);var Ht=null;if(lt[ne].mat instanceof l.LineBasicMaterial?Ht=new l.Line(Pt,lt[ne].mat):("wireframe"in lt.style&&lt.style.wireframe&&Pt.setUpWireframe(),Ht=new l.Mesh(Pt,lt[ne].mat)),lt[ne].mat.transparent&&lt[ne].mat.opacity==0?Ht.visible=!1:Ht.visible=!0,lt[ne].symmetries.length>1||lt[ne].symmetries.length==1&&!lt[ne].symmetries[0].isIdentity()){var Dt,Zt=new l.Object3D;for(Dt=0;Dt<lt[ne].symmetries.length;Dt++){var Er=Ht.clone();Er.matrix=lt[ne].symmetries[Dt],Er.matrixAutoUpdate=!1,Zt.add(Er)}lt[ne].lastGL=Zt,this.modelGroup.add(Zt)}else lt[ne].lastGL=Ht,this.modelGroup.add(Ht)}}}return this.setView(Rt),typeof y=="function"&&y(this),this}getModelList(y){let N=[];if(y===void 0||y.model===void 0)for(let ne=0;ne<this.models.length;ne++)this.models[ne]&&N.push(this.models[ne]);else{let ne=y.model;Array.isArray(ne)||(ne=[ne]);for(let Rt=0;Rt<ne.length;Rt++)if(typeof ne[Rt]=="number"){var K=ne[Rt];K<0&&(K+=this.models.length),N.push(this.models[K])}else N.push(ne[Rt])}return N}getAtomsFromSel(y){var N=[];y===void 0&&(y={});var K=this.getModelList(y);for(let ne=0;ne<K.length;ne++)N=N.concat(K[ne].selectedAtoms(y));return N}atomIsSelected(y,N){N===void 0&&(N={});for(var K=this.getModelList(N),ne=0;ne<K.length;ne++)if(K[ne].atomIsSelected(y,N))return!0;return!1}selectedAtoms(y){return this.getAtomsFromSel(y)}getUniqueValues(y,N){N===void 0&&(N={});var K=this.getAtomsFromSel(N),ne={};for(var Rt in K)K[Rt].hasOwnProperty(y)&&(ne[K[Rt][y]]=!0);return Object.keys(ne)}pdbData(y){for(var N=this.getAtomsFromSel(y),K="",ne=0,Rt=N.length;ne<Rt;++ne)K+=N[ne].pdbline+`
`;return K}zoom(y=2,N=0,K=!1){var ne=(this.CAMERA_Z-this.rotationGroup.position.z)/y,Rt=this.CAMERA_Z-ne;return N>0?this.animateMotion(N,K,this.modelGroup.position,this.adjustZoomToLimits(Rt),this.rotationGroup.quaternion,this.lookingAt):(this.rotationGroup.position.z=this.adjustZoomToLimits(Rt),this.show()),this}translate(y,N,K=0,ne=!1){var Rt=y/this.WIDTH,lt=N/this.HEIGHT,Pt=new c.Vector3(0,0,-this.CAMERA_Z);this.projector.projectVector(Pt,this.camera),Pt.x-=Rt,Pt.y-=lt,this.projector.unprojectVector(Pt,this.camera),Pt.z=0;var Ht=this.lookingAt.clone().add(Pt);return K>0?this.animateMotion(K,ne,this.modelGroup.position,this.rotationGroup.position.z,this.rotationGroup.quaternion,Ht):(this.lookingAt=Ht,this.camera.lookAt(this.lookingAt),this.show()),this}translateScene(y,N,K=0,ne=!1){var Rt=this.screenOffsetToModel(y,N),lt=this.modelGroup.position.clone().add(Rt);return K>0?this.animateMotion(K,ne,this.modelGroup.position,this.rotationGroup.position.z,this.rotationGroup.quaternion,this.lookingAt):(this.modelGroup.position=lt,this.show()),this}fitSlab(y){y=y||{};var N=this.getAtomsFromSel(y),K=(0,g.getExtent)(N),ne=K[1][0]-K[0][0],Rt=K[1][1]-K[0][1],lt=K[1][2]-K[0][2],Pt=Math.hypot(ne,Rt,lt);return Pt<5&&(Pt=5),this.slabNear=-Pt/1.9,this.slabFar=Pt/2,this}center(y={},N=0,K=!1){var ne,Rt,lt=this.getAtomsFromSel(y),Pt=(0,g.getExtent)(lt);(0,g.isEmptyObject)(y)?(this.shapes.forEach(Vp=>{if(Vp&&Vp.boundingSphere&&Vp.boundingSphere.center){var Kp=Vp.boundingSphere.center,r0=Vp.boundingSphere.radius;r0>0?(lt.push(new c.Vector3(Kp.x+r0,Kp.y,Kp.z)),lt.push(new c.Vector3(Kp.x-r0,Kp.y,Kp.z)),lt.push(new c.Vector3(Kp.x,Kp.y+r0,Kp.z)),lt.push(new c.Vector3(Kp.x,Kp.y-r0,Kp.z)),lt.push(new c.Vector3(Kp.x,Kp.y,Kp.z+r0)),lt.push(new c.Vector3(Kp.x,Kp.y,Kp.z-r0))):lt.push(Kp)}}),Pt=(0,g.getExtent)(lt),ne=lt,Rt=Pt):(ne=this.getAtomsFromSel({}),Rt=(0,g.getExtent)(ne));var Ht=new c.Vector3(Pt[2][0],Pt[2][1],Pt[2][2]),Dt=Rt[1][0]-Rt[0][0],Zt=Rt[1][1]-Rt[0][1],Er=Rt[1][2]-Rt[0][2],Np=Math.hypot(Dt,Zt,Er);Np<5&&(Np=5),this.slabNear=-Np/1.9,this.slabFar=Np/2,Dt=Pt[1][0]-Pt[0][0],Zt=Pt[1][1]-Pt[0][1],Er=Pt[1][2]-Pt[0][2],(Np=Math.hypot(Dt,Zt,Er))<5&&(Np=5);for(var Zo=25,la=0;la<lt.length;la++)if(lt[la]){var Dp=Ht.distanceToSquared(lt[la]);Dp>Zo&&(Zo=Dp)}Np=2*Math.sqrt(Zo);var wp=Ht.clone().multiplyScalar(-1);return N>0?this.animateMotion(N,K,wp,this.rotationGroup.position.z,this.rotationGroup.quaternion,this.lookingAt):(this.modelGroup.position=wp,this.show()),this}zoomTo(y={},N=0,K=!1){let ne=this.getAtomsFromSel(y),Rt=(0,g.getExtent)(ne),lt=Rt;if((0,g.isEmptyObject)(y)){let Kp=ne&&ne.length;if(this.shapes.forEach(r0=>{if(r0&&r0.boundingSphere){if(r0.boundingSphere.box){let H0=r0.boundingSphere.box;ne.push(new c.Vector3(H0.min.x,H0.min.y,H0.min.z)),ne.push(new c.Vector3(H0.max.x,H0.max.y,H0.max.z))}else if(r0.boundingSphere.center){var D0=r0.boundingSphere.center,E0=r0.boundingSphere.radius;E0>0?(ne.push(new c.Vector3(D0.x+E0,D0.y,D0.z)),ne.push(new c.Vector3(D0.x-E0,D0.y,D0.z)),ne.push(new c.Vector3(D0.x,D0.y+E0,D0.z)),ne.push(new c.Vector3(D0.x,D0.y-E0,D0.z)),ne.push(new c.Vector3(D0.x,D0.y,D0.z+E0)),ne.push(new c.Vector3(D0.x,D0.y,D0.z-E0))):ne.push(D0)}}}),lt=(0,g.getExtent)(ne),!Kp)for(let r0=0;r0<3;r0++)Rt[2][r0]=(lt[0][r0]+lt[1][r0])/2}else{let Kp=this.getAtomsFromSel({});lt=(0,g.getExtent)(Kp)}var Pt=new c.Vector3(Rt[2][0],Rt[2][1],Rt[2][2]),Ht=lt[1][0]-lt[0][0],Dt=lt[1][1]-lt[0][1],Zt=lt[1][2]-lt[0][2],Er=Math.hypot(Ht,Dt,Zt);Er<5&&(Er=5),this.slabNear=-Er/1.9,this.slabFar=Er/2,Object.keys(y).length===0&&(this.slabNear=Math.min(2*-Er,-50),this.slabFar=Math.max(2*Er,50));var Np=this.config.minimumZoomToDistance||5;Ht=Rt[1][0]-Rt[0][0],Dt=Rt[1][1]-Rt[0][1],Zt=Rt[1][2]-Rt[0][2],(Er=Math.hypot(Ht,Dt,Zt))<Np&&(Er=Np);for(var Zo=Np*Np,la=0;la<ne.length;la++)if(ne[la]){var Dp=Pt.distanceToSquared(ne[la]);Dp>Zo&&(Zo=Dp)}Er=2*Math.sqrt(Zo);var wp=Pt.clone().multiplyScalar(-1),Vp=-(.5*Er/Math.tan(Math.PI/180*this.camera.fov/2)-this.CAMERA_Z);return Vp=this.adjustZoomToLimits(Vp),N>0?this.animateMotion(N,K,wp,Vp,this.rotationGroup.quaternion,this.lookingAt):(this.modelGroup.position=wp,this.rotationGroup.position.z=Vp,this.show()),this}setSlab(y,N){this.slabNear=y,this.slabFar=N}getSlab(){return{near:this.slabNear,far:this.slabFar}}addLabel(y,N={},K,ne=!1){if(K){var Rt=(0,g.getExtent)(this.getAtomsFromSel(K));N.position={x:Rt[2][0],y:Rt[2][1],z:Rt[2][2]}}var lt=new Gm(y,N);return lt.setContext(),this.modelGroup.add(lt.sprite),this.labels.push(lt),ne||this.show(),lt}addResLabels(y,N,K=!1){let ne=this.labels.length;return this.applyToModels("addResLabels",y,N,K),this.show(),this.labels.slice(ne)}addPropertyLabels(y,N,K){return this.applyToModels("addPropertyLabels",y,N,K),this.show(),this}removeLabel(y){for(var N=0;N<this.labels.length;N++)if(this.labels[N]==y){this.labels.splice(N,1),y.dispose(),this.modelGroup.remove(y.sprite);break}return this.show(),this}removeAllLabels(){for(var y=0;y<this.labels.length;y++)this.labels[y]&&this.labels[y].sprite&&this.modelGroup.remove(this.labels[y].sprite);return this.labels.splice(0,this.labels.length),this.show(),this}hideAllLabels(){for(var y=0;y<this.labels.length;y++)this.labels[y]&&this.labels[y].hide();return this.show(),this}showAllLabels(){for(var y=0;y<this.labels.length;y++)this.labels[y]&&this.labels[y].show();return this.show(),this}setLabelStyle(y,N){return this.modelGroup.remove(y.sprite),y.dispose(),y.stylespec=N,y.setContext(),this.modelGroup.add(y.sprite),this.show(),y}setLabelText(y,N){return this.modelGroup.remove(y.sprite),y.dispose(),y.text=N,y.setContext(),this.modelGroup.add(y.sprite),this.show(),y}addShape(y){var N=new m0(y=y||{});return N.shapePosition=this.shapes.length,this.shapes.push(N),N}removeShape(y){if(!y)return this;for(y.removegl(this.modelGroup),delete this.shapes[y.shapePosition];this.shapes.length>0&&this.shapes[this.shapes.length-1]===void 0;)this.shapes.pop();return this}removeAllShapes(){for(var y=0;y<this.shapes.length;y++){var N=this.shapes[y];N&&N.removegl(this.modelGroup)}return this.shapes.splice(0,this.shapes.length),this}getSelectionCenter(y){if(y.hasOwnProperty("x")&&y.hasOwnProperty("y")&&y.hasOwnProperty("z"))return y;var N=this.getAtomsFromSel(y);if(N.length==0)return{x:0,y:0,z:0};var K=(0,g.getExtent)(N);return{x:K[0][0]+(K[1][0]-K[0][0])/2,y:K[0][1]+(K[1][1]-K[0][1])/2,z:K[0][2]+(K[1][2]-K[0][2])/2}}addSphere(y){(y=y||{}).center=this.getSelectionCenter(y.center);var N=new m0(y);return N.shapePosition=this.shapes.length,N.addSphere(y),this.shapes.push(N),N.finalize(),N}addBox(y={}){y.corner!=null&&(y.corner=this.getSelectionCenter(y.corner)),y.center!=null&&(y.center=this.getSelectionCenter(y.center));var N=new m0(y);return N.shapePosition=this.shapes.length,N.addBox(y),this.shapes.push(N),N.finalize(),N}addArrow(y={}){y.start=this.getSelectionCenter(y.start),y.end=this.getSelectionCenter(y.end);var N=new m0(y);return N.shapePosition=this.shapes.length,N.addArrow(y),this.shapes.push(N),N.finalize(),N}addCylinder(y={}){y.start=this.getSelectionCenter(y.start),y.end=this.getSelectionCenter(y.end);var N=new m0(y);return N.shapePosition=this.shapes.length,y.dashed?N.addDashedCylinder(y):N.addCylinder(y),this.shapes.push(N),N.finalize(),N}addCurve(y={}){var N=new m0(y);return N.shapePosition=this.shapes.length,N.addCurve(y),this.shapes.push(N),N.finalize(),N}addLine(y={}){y.start=this.getSelectionCenter(y.start),y.end=this.getSelectionCenter(y.end),y.wireframe=!0;var N=new m0(y);return N.shapePosition=this.shapes.length,y.dashed?N=this.addLineDashed(y,N):N.addLine(y),this.shapes.push(N),N.finalize(),N}addUnitCell(y,N){y=this.getModel(y),(N=N||{alabel:"a",blabel:"b",clabel:"c"}).box=N.box||{},N.astyle=N.astyle||{color:"red",radius:.1,midpos:-1},N.bstyle=N.bstyle||{color:"green",radius:.1,midpos:-1},N.cstyle=N.cstyle||{color:"blue",radius:.1,midpos:-1},N.alabelstyle=N.alabelstyle||{fontColor:"red",showBackground:!1,alignment:"center",inFront:!1},N.blabelstyle=N.blabelstyle||{fontColor:"green",showBackground:!1,alignment:"center",inFront:!1},N.clabelstyle=N.clabelstyle||{fontColor:"blue",showBackground:!1,alignment:"center",inFront:!1},y.unitCellObjects&&this.removeUnitCell(y),y.unitCellObjects={shapes:[],labels:[]};var K=y.getCrystData(),ne=null;if(K){if(K.matrix)ne=K.matrix;else{var Rt,lt,Pt,Ht=K.a,Dt=K.b,Zt=K.c,Er=K.alpha,Np=K.beta,Zo=K.gamma;Er=Er*Math.PI/180,Np=Np*Math.PI/180,Zo=Zo*Math.PI/180,Rt=Math.cos(Np),lt=(Math.cos(Er)-Math.cos(Np)*Math.cos(Zo))/Math.sin(Zo),Pt=Math.sqrt(Math.max(0,1-Rt*Rt-lt*lt)),ne=new c.Matrix3(Ht,Dt*Math.cos(Zo),Zt*Rt,0,Dt*Math.sin(Zo),Zt*lt,0,0,Zt*Pt)}var la=[new c.Vector3(0,0,0),new c.Vector3(1,0,0),new c.Vector3(0,1,0),new c.Vector3(0,0,1),new c.Vector3(1,1,0),new c.Vector3(0,1,1),new c.Vector3(1,0,1),new c.Vector3(1,1,1)];if(K.matrix4)for(let wp=0;wp<la.length;wp++)K.size&&la[wp].multiplyVectors(la[wp],K.size),la[wp]=la[wp].applyMatrix4(K.matrix4);else for(let wp=0;wp<la.length;wp++)la[wp]=la[wp].applyMatrix3(ne);if(N.box&&!N.box.hidden){N.box.wireframe=!0;var Dp=new m0(N.box);Dp.shapePosition=this.shapes.length,Dp.addLine({start:la[0],end:la[1]}),Dp.addLine({start:la[0],end:la[2]}),Dp.addLine({start:la[1],end:la[4]}),Dp.addLine({start:la[2],end:la[4]}),Dp.addLine({start:la[0],end:la[3]}),Dp.addLine({start:la[3],end:la[5]}),Dp.addLine({start:la[2],end:la[5]}),Dp.addLine({start:la[1],end:la[6]}),Dp.addLine({start:la[4],end:la[7]}),Dp.addLine({start:la[6],end:la[7]}),Dp.addLine({start:la[3],end:la[6]}),Dp.addLine({start:la[5],end:la[7]}),this.shapes.push(Dp),y.unitCellObjects.shapes.push(Dp),Dp.finalize()}if(!N.astyle.hidden){N.astyle.start=la[0],N.astyle.end=la[1];let wp=this.addArrow(N.astyle);y.unitCellObjects.shapes.push(wp)}if(!N.bstyle.hidden){N.bstyle.start=la[0],N.bstyle.end=la[2];let wp=this.addArrow(N.bstyle);y.unitCellObjects.shapes.push(wp)}if(!N.cstyle.hidden){N.cstyle.start=la[0],N.cstyle.end=la[3];let wp=this.addArrow(N.cstyle);y.unitCellObjects.shapes.push(wp)}if(N.alabel){N.alabelstyle.position=la[1];let wp=this.addLabel(N.alabel,N.alabelstyle);y.unitCellObjects.labels.push(wp)}if(N.blabel){N.blabelstyle.position=la[2];let wp=this.addLabel(N.blabel,N.blabelstyle);y.unitCellObjects.labels.push(wp)}if(N.clabel){N.clabelstyle.position=la[3];let wp=this.addLabel(N.clabel,N.clabelstyle);y.unitCellObjects.labels.push(wp)}}}removeUnitCell(y){if((y=this.getModel(y)).unitCellObjects){let N=this;y.unitCellObjects.shapes.forEach(function(K){N.removeShape(K)}),y.unitCellObjects.labels.forEach(function(K){N.removeLabel(K)})}delete y.unitCellObjects}replicateUnitCell(y=3,N=y,K=N,ne,Rt,lt){let Pt=(ne=this.getModel(ne)).getCrystData();if(Pt){const Ht=ne.selectedAtoms({}),Dt=Pt.matrix;let Zt=function(Np){return Np%2==0?-Np/2:Math.ceil(Np/2)};y<=1&&N<=1&&K<=1&&(lt=!0,y=N=K=3);let Er=function(Np,Zo,la){return!1};if(lt){const Np=new c.Matrix3().getInverse3(Dt);Er=function(Zo,la,Dp){let wp=new c.Vector3(Zo,la,Dp).applyMatrix3(Np);return!(wp.x>-1e-4&&wp.x<1.0001&&wp.y>-1e-4&&wp.y<1.0001&&wp.z>-1e-4&&wp.z<1.0001)}}for(let Np=0;Np<y;Np++)for(let Zo=0;Zo<N;Zo++)for(let la=0;la<K;la++){if(Np==0&&Zo==0&&la==0)continue;let Dp=new c.Vector3(Zt(Np),Zt(Zo),Zt(la));Dp.applyMatrix3(Dt);let wp=[];for(let Vp=0;Vp<Ht.length;Vp++){let Kp=Ht[Vp].x+Dp.x,r0=Ht[Vp].y+Dp.y,D0=Ht[Vp].z+Dp.z;if(Er(Kp,r0,D0))continue;let E0={};for(let H0 in Ht[Vp])E0[H0]=Ht[Vp][H0];E0.x=Kp,E0.y=r0,E0.z=D0,wp.push(E0)}ne.addAtoms(wp)}Rt&&ne.assignBonds()}}addLineDashed(y,N){var K,ne;y.dashLength=y.dashLength||.5,y.gapLength=y.gapLength||.5,K=y.start?new c.Vector3(y.start.x||0,y.start.y||0,y.start.z||0):new c.Vector3(0,0,0),ne=y.end?new c.Vector3(y.end.x,y.end.y||0,y.end.z||0):new c.Vector3(0,0,0);var Rt,lt,Pt,Ht=new c.Vector3,Dt=new c.Vector3,Zt=new c.Vector3,Er=K.clone(),Np=0;for(Ht.subVectors(ne,K),Rt=Ht.length(),Ht.normalize(),Dt=Ht.clone(),Zt=Ht.clone(),Dt.multiplyScalar(y.dashLength),Zt.multiplyScalar(y.gapLength),lt=Dt.length(),Pt=Zt.length();Np<Rt;){if(Np+lt>Rt){y.start=K,y.end=ne,N.addLine(y);break}Er.addVectors(K,Dt),y.start=K,y.end=Er,N.addLine(y),K=Er.clone(),Np+=lt,Er.addVectors(K,Zt),K=Er.clone(),Np+=Pt}return N.finalize(),N}addCustom(y){var N=new m0(y=y||{});return N.shapePosition=this.shapes.length,N.addCustom(y),this.shapes.push(N),N.finalize(),N}addVolumetricData(y,N,K={}){var ne=new a0.VolumeData(y,N);return K.hasOwnProperty("transferfn")?this.addVolumetricRender(ne,K):this.addIsosurface(ne,K)}addIsosurface(y,N={},K){var ne=new m0(N);return ne.shapePosition=this.shapes.length,ne.addIsosurface(y,N,K,this),this.shapes.push(ne),ne}addVolumetricRender(y,N){var K=new Fm(y,N=N||{},this);return K.shapePosition=this.shapes.length,this.shapes.push(K),K}hasVolumetricRender(){return this.renderer.supportsVolumetric()}enableFog(y){if(y){this.scene.fog=new l.Fog(this.bgColor,100,200),this.config.disableFog=!1;const N=y;N.fogStart==null?this.fogStart=.4:this.fogStart=N.fogStart,N.fogEnd==null?this.fogEnd=1:this.fogEnd=N.fogEnd}else this.config.disableFog=!0,this.show()}setFrame(y){this.viewer_frame=y;let N=this;return new Promise(function(K){var ne=N.models.map(function(Rt){return Rt.setFrame(y)});Promise.all(ne).then(function(){K()})})}getFrame(){return this.viewer_frame}getNumFrames(){var y=0;for(let N=0;N<this.models.length;N++)this.models[N].getNumFrames()>y&&(y=this.models[N].getNumFrames());for(let N=0;N<this.shapes.length;N++)this.shapes[N].frame&&this.shapes[N].frame>=y&&(y=this.shapes[N].frame+1);for(let N=0;N<this.labels.length;N++)this.labels[N].frame&&this.labels[N].frame>=y&&(y=this.labels[N].frame+1);return y}getNextModelId(){return this.models.length}animate(y){this.incAnim();var N=100,K="forward",ne=1/0;(y=y||{}).interval&&(N=y.interval),y.loop&&(K=y.loop),y.reps&&(ne=y.reps);var Rt=this.getNumFrames(),lt=this,Pt=0;y.startFrame&&(Pt=y.startFrame%Rt);var Ht=1;y.step&&(ne/=Ht=y.step);var Dt,Zt,Er=0,Np=Rt*ne,Zo=new Date,la=function(Dp){Zo=new Date,Dp=="forward"?lt.setFrame(Pt).then(function(){Pt=(Pt+Ht)%Rt,Dt()}):Dp=="backward"?lt.setFrame(Rt-1-Pt).then(function(){Pt=(Pt+Ht)%Rt,Dt()}):lt.setFrame(Pt).then(function(){Ht*=(Pt+=Ht)%(Rt-1)==0?-1:1,Dt()})};return Dt=function(){if(lt.render(),lt.getCanvas().isConnected)if(++Er>=Np||!lt.isAnimated())Zt.cancel(),lt.animationTimers.delete(Zt),lt.decAnim();else{var Dp=N-(new Date().getTime()-Zo.getTime());Dp=Dp>0?Dp:0,Zt.cancel(),lt.animationTimers.delete(Zt),Zt=new g.PausableTimer(la,Dp,K),lt.animationTimers.add(Zt)}else lt.stopAnimate()},Zt=new g.PausableTimer(la,0,K),this.animationTimers.add(Zt),this}stopAnimate(){return this.animated=0,this.animationTimers.forEach(function(y){y.cancel()}),this.animationTimers=new Set,this}pauseAnimate(){return this.animationTimers.forEach(function(y){y.pause()}),this}resumeAnimate(){return this.animationTimers.forEach(function(y){y.resume()}),this}isAnimated(){return this.animated>0}getModelOpt(y){return y&&!y.defaultcolors?(y.defaultcolors=this.defaultcolors,y.cartoonQuality=y.cartoonQuality||this.config.cartoonQuality):y===void 0&&(y={defaultcolors:this.defaultcolors,cartoonQuality:this.config.cartoonQuality}),y}addModel(y,N="",K){K=this.getModelOpt(K);var ne=new wg(this.models.length,K,this);return ne.addMolData(y,N,K),this.models.push(ne),ne}addModels(y,N,K){(K=this.getModelOpt(K)).multimodel=!0,K.frames=!0;for(var ne=wg.parseMolData(y,N,K),Rt=0;Rt<ne.length;Rt++){var lt=new wg(this.models.length,K,this);lt.setAtomDefaults(ne[Rt]),lt.addFrame(ne[Rt]),lt.setFrame(0),ne.modelData&&lt.setModelData(ne.modelData[Rt]),lt.setDontDuplicateAtoms(!K.duplicateAssemblyAtoms),this.models.push(lt)}return this.models}addModelsAsFrames(y,N,K){(K=this.getModelOpt(K)).multimodel=!0,K.frames=!0;var ne=new wg(this.models.length,K,this);return ne.addMolData(y,N,K),this.models.push(ne),ne}addAsOneMolecule(y,N,K){(K=this.getModelOpt(K)).multimodel=!0,K.onemol=!0;var ne=new wg(this.models.length,K,this);return ne.addMolData(y,N,K),this.models.push(ne),ne}removeModel(y){if(y=this.getModel(y)){for(y.removegl(this.modelGroup),delete this.models[y.getID()];this.models.length>0&&this.models[this.models.length-1]===void 0;)this.models.pop();return this}}removeAllModels(){for(var y=0;y<this.models.length;y++){var N=this.models[y];N&&N.removegl(this.modelGroup)}return this.models.splice(0,this.models.length),this}exportJSON(y,N){var K={};return K.m=N===void 0?this.models.map(function(ne){return ne.toCDObject(y)}):[this.models[N].toCDObject()],JSON.stringify(K)}exportVRML(){var y=this.modelGroup;this.applyToModels("removegl",this.modelGroup),this.modelGroup=new l.Object3D,this.render(null,{supportsImposters:!1,supportsAIA:!1,regen:!0});var N=`#VRML V2.0 utf8
`+this.modelGroup.vrml()+`
`;return this.applyToModels("removegl",this.modelGroup),this.modelGroup=y,N}createModelFrom(y,N=!1){for(var K=new wg(this.models.length,this.defaultcolors,this),ne=0;ne<this.models.length;ne++)if(this.models[ne]){var Rt=this.models[ne].selectedAtoms(y);K.addAtoms(Rt),N&&this.models[ne].removeAtoms(Rt)}return this.models.push(K),K}applyToModels(y,N,K,ne,Rt,lt,Pt){for(var Ht=this.getModelList(N),Dt=0;Dt<Ht.length;Dt++)Ht[Dt][y](N,K,ne,Rt,lt,Pt)}setStyle(y,N){return N===void 0&&(N=y,y={}),this.applyToModels("setStyle",y,N,!1),this}addStyle(y,N){return N===void 0&&(N=y,y={}),this.applyToModels("setStyle",y,N,!0),this}setClickable(y,N,K){return this.applyToModels("setClickable",y,N,K),this}setHoverable(y,N,K,ne){return this.applyToModels("setHoverable",y,N,K,ne),this}enableContextMenu(y,N){return this.applyToModels("enableContextMenu",y,N),this}vibrate(y,N,K,ne){return this.applyToModels("vibrate",y,N,K,ne),this}setColorByProperty(y,N,K,ne){return this.applyToModels("setColorByProperty",y,N,K,ne),this}setColorByElement(y,N){return this.applyToModels("setColorByElement",y,N),this}static getAtomsWithin(y,N){var K=[];for(let Rt=0;Rt<y.length;Rt++){var ne=y[Rt];ne!==void 0&&(ne.x<N[0][0]||ne.x>N[1][0]||ne.y<N[0][1]||ne.y>N[1][1]||ne.z<N[0][2]||ne.z>N[1][2]||K.push(ne))}return K}static volume(y){return(y[1][0]-y[0][0])*(y[1][1]-y[0][1])*(y[1][2]-y[0][2])}carveUpExtent(y,N,K){let ne=[],Rt={};for(let Zt=0,Er=N.length;Zt<Er;Zt++)Rt[N[Zt].index]=Zt;let lt=function(Zt){let Er=[];for(let Np=0,Zo=Zt.length;Np<Zo;Np++)Zt[Np].index in Rt&&Er.push(Rt[Zt[Np].index]);return Er},Pt=function(Zt){let Er=[];return Er[0]=[Zt[0][0],Zt[0][1],Zt[0][2]],Er[1]=[Zt[1][0],Zt[1][1],Zt[1][2]],Er},Ht=function(Zt){if(O1.volume(Zt)<O1.maxVolume)return[Zt];var Er,Np=Zt[1][0]-Zt[0][0],Zo=Zt[1][1]-Zt[0][1],la=Zt[1][2]-Zt[0][2];Er=Np>Zo&&Np>la?0:Zo>Np&&Zo>la?1:2;var Dp=Pt(Zt),wp=Pt(Zt),Vp=(Zt[1][Er]-Zt[0][Er])/2+Zt[0][Er];Dp[1][Er]=Vp,wp[0][Er]=Vp;var Kp=Ht(Dp),r0=Ht(wp);return Kp.concat(r0)},Dt=Ht(y);for(let Zt=0,Er=Dt.length;Zt<Er;Zt++){let Np=Pt(Dt[Zt]);Np[0][0]-=6,Np[0][1]-=6,Np[0][2]-=6,Np[1][0]+=6,Np[1][1]+=6,Np[1][2]+=6;let Zo=O1.getAtomsWithin(N,Np),la=O1.getAtomsWithin(K,Dt[Zt]);ne.push({extent:Dt[Zt],atoms:lt(Zo),toshow:lt(la)})}return ne}static generateSurfaceMesh(y,N,K){var ne=new l.Geometry(!0),Rt=ne.updateGeoGroup(0),lt=[];for(let hm=0,q0=y.length;hm<q0;hm++){var Pt=y[hm];Pt&&(Pt.surfaceColor!==void 0?lt[hm]=Pt.surfaceColor:Pt.color&&(lt[hm]=h.CC.color(Pt.color)))}var Ht=Rt.vertexArray,Dt=N.vertices;for(let hm=0,q0=Dt.length;hm<q0;hm++){let Bm=3*Rt.vertices;Ht[Bm]=Dt[hm].x,Ht[Bm+1]=Dt[hm].y,Ht[Bm+2]=Dt[hm].z,Rt.vertices++}var Zt=Rt.colorArray;let Er=Rt.atomArray;if(K.voldata&&K.volscheme){var Np=K.volscheme,Zo=K.voldata,la=Np.range()||[-1,1];for(let hm=0,q0=Dt.length;hm<q0;hm++){let Bm=Dt[hm].atomid,Im=Zo.getVal(Dt[hm].x,Dt[hm].y,Dt[hm].z),h1=h.CC.color(Np.valueToHex(Im,la)),i1=3*hm;Zt[i1]=h1.r,Zt[i1+1]=h1.g,Zt[i1+2]=h1.b,Er[hm]=y[Bm]}}else if(lt.length>0)for(let hm=0,q0=Dt.length;hm<q0;hm++){let Bm=Dt[hm].atomid,Im=3*hm;Zt[Im]=lt[Bm].r,Zt[Im+1]=lt[Bm].g,Zt[Im+2]=lt[Bm].b,Er[hm]=y[Bm]}var Dp=N.faces;Rt.faceidx=Dp.length,ne.initTypedArrays();var wp,Vp,Kp,r0,D0=Rt.vertexArray,E0=Rt.normalArray;for(let hm=0,q0=Dp.length;hm<q0;hm+=3){var H0=3*Dp[hm],Q0=3*Dp[hm+1],lm=3*Dp[hm+2];wp=new c.Vector3(D0[H0],D0[H0+1],D0[H0+2]),Vp=new c.Vector3(D0[Q0],D0[Q0+1],D0[Q0+2]),(Kp=new c.Vector3(D0[lm],D0[lm+1],D0[lm+2])).subVectors(Kp,Vp),wp.subVectors(wp,Vp),Kp.cross(wp),(r0=Kp).normalize(),E0[H0]+=r0.x,E0[Q0]+=r0.x,E0[lm]+=r0.x,E0[H0+1]+=r0.y,E0[Q0+1]+=r0.y,E0[lm+1]+=r0.y,E0[H0+2]+=r0.z,E0[Q0+2]+=r0.z,E0[lm+2]+=r0.z}return Rt.faceArray=new Uint16Array(Dp),new l.Mesh(ne,K)}static generateMeshSyncHelper(y,N,K,ne,Rt,lt){var Pt=new oa;return Pt.initparm(N,y!==1,lt),Pt.fillvoxels(Rt,K),Pt.buildboundary(),y!=Lv.SES&&y!=Lv.MS||(Pt.fastdistancemap(),Pt.boundingatom(!1),Pt.fillvoxelswaals(Rt,K)),Pt.marchingcube(y),Pt.getFacesAndVertices(ne)}static getMatWithStyle(y){let N=null;for(var K in N=y.onesided?new l.MeshLambertMaterial:new l.MeshDoubleLambertMaterial,N.vertexColors=l.Coloring.VertexColors,y)K==="color"||K==="map"||y.hasOwnProperty(K)&&(N[K]=y[K]);return y.opacity!==void 0&&(y.opacity===1?N.transparent=!1:N.transparent=!0),y.wireframe!==void 0&&(N.wireframe=y.wireframe),N}addMesh(y){let N={geo:y.geometry,mat:y.material,done:!0,finished:!1};var K=this.nextSurfID();return this.surfaces[K]=new D1([N]),K}static shallowCopy(y){var N=[];let K=y.length;for(let ne=0;ne<K;ne++)N[ne]=(0,g.extend)({},y[ne]);return N}addSurface(y,N={},K={},ne,Rt,lt){let Pt=this.nextSurfID(),Ht=null,Dt=this,Zt=Lv.VDW;typeof y=="string"?O1.surfaceTypeMap[y.toUpperCase()]!==void 0?Zt=O1.surfaceTypeMap[y]:console.log("Surface type : "+y+" is not recognized"):typeof y=="number"&&(Zt=y);var Er=null,Np=null,Zo=O1.shallowCopy(this.getAtomsFromSel(K));Er=ne?O1.shallowCopy(this.getAtomsFromSel(ne)):Zo,(0,g.adjustVolumeStyle)(N);var la,Dp=!1;for(la=0;la<this.models.length;la++)if(this.models[la]){var wp=this.models[la].getSymmetries();if(wp.length>1||wp.length==1&&!wp[0].isIdentity()){Dp=!0;break}}var Vp=function(Q0,lm,hm){var q0;Np=Rt?O1.shallowCopy(Dt.getAtomsFromSel(Rt)):hm;var Bm=(0,g.getExtent)(hm,!0);if(N.map&&N.map.prop){var Im=N.map.prop;let d1=(0,v.getGradient)(N.map.scheme||N.map.gradient||new v.Gradient.RWB),q1=d1.range();q1||(q1=(0,g.getPropertyRange)(hm,Im)),N.colorscheme={prop:Im,gradient:d1}}for(let d1=0,q1=lm.length;d1<q1;d1++)(q0=lm[d1]).surfaceColor=(0,g.getColorFromStyle)(q0,N);var h1=O1.volume(Bm),i1=Dt.carveUpExtent(Bm,lm,hm);if(Np&&Np.length&&Np.length>0){var M1=(0,g.getExtent)(Np,!0);i1.sort(function(d1,q1){var Z1=function(x1,ag){var Og=x1.extent,eg=Og[1][0]-Og[0][0],C1=Og[1][1]-Og[0][1],Bg=Og[1][2]-Og[0][2],xg=eg-ag[2][0];xg*=xg;var Ig=C1-ag[2][1];Ig*=Ig;var _g=Bg-ag[2][2];return xg+Ig+(_g*=_g)};return Z1(d1,M1)-Z1(q1,M1)})}var L1=[];for(let d1=0,q1=lm.length;d1<q1;d1++)q0=lm[d1],L1[d1]={x:q0.x,y:q0.y,z:q0.z,serial:d1,elem:q0.elem};var c1=!!Pv;if(typeof $3Dmol<"u"&&$3Dmol.SurfaceWorker!==void 0||(console.log("$3Dmol.SurfaceWorker is not defined, using synchronous surface generation."),c1=!0),c1){var j1=function(d1){return new Promise(function(q1){for(var Z1=O1.generateMeshSyncHelper(Zt,i1[d1].extent,i1[d1].atoms,i1[d1].toshow,L1,h1),x1=nm({vertexArr:Z1.vertices,faceArr:Z1.faces}),ag=0,Og=x1.length;ag<Og;ag++){Z1={vertices:x1[ag].vertexArr,faces:x1[ag].faceArr};var eg=O1.generateSurfaceMesh(lm,Z1,Ht);(0,g.mergeGeos)(Q0.geo,eg)}Dt.render(),q1()})},Hm=[];for(let d1=0;d1<i1.length;d1++)Hm.push(j1(d1));return Promise.all(Hm).then(function(){return Q0.done=!0,Dt.render(),Promise.resolve(Pt)})}var t1=[];Zt<0&&(Zt=0);for(let d1=0,q1=O1.numWorkers;d1<q1;d1++){var Y1=new Worker($3Dmol.SurfaceWorker);t1.push(Y1),Y1.postMessage({type:-1,atoms:L1,volume:h1})}return new Promise(function(d1,q1){var Z1=0,x1=function(){t1&&t1.length&&t1.forEach(function(C1){C1&&C1.terminate&&C1.terminate()})},ag=function(C1){for(var Bg=nm({vertexArr:C1.data.vertices,faceArr:C1.data.faces}),xg=0,Ig=Bg.length;xg<Ig;xg++){var _g={vertices:Bg[xg].vertexArr,faces:Bg[xg].faceArr},Hg=O1.generateSurfaceMesh(lm,_g,Ht);(0,g.mergeGeos)(Q0.geo,Hg)}Dt.render(),++Z1==i1.length&&(Q0.done=!0,x1(),d1(Pt))},Og=function(C1){x1(),console.log(C1.message+" ("+C1.filename+":"+C1.lineno+")"),q1(C1)};for(let C1=0;C1<i1.length;C1++){var eg=t1[C1%t1.length];eg.onmessage=ag,eg.onerror=Og,eg.postMessage({type:Zt,expandedExtent:i1[C1].extent,extendedAtoms:i1[C1].atoms,atomsToShow:i1[C1].toshow})}})};N=N||{},Ht=O1.getMatWithStyle(N);let Kp=new D1([]);Kp.style=N,Kp.atomsel=K,Kp.allsel=ne,Kp.focus=Rt;var r0=null;if(Dp){var D0={},E0={};for(la=0;la<this.models.length;la++)D0[la]=[],E0[la]=[];for(la=0;la<Er.length;la++)D0[Er[la].model].push(Er[la]);for(la=0;la<Zo.length;la++)E0[Zo[la].model].push(Zo[la]);var H0=[];for(la=0;la<this.models.length;la++)E0[la].length>0&&(Kp.push({geo:new l.Geometry(!0),mat:Ht,done:!1,finished:!1,symmetries:this.models[la].getSymmetries()}),H0.push(Vp(Kp[Kp.length-1],D0[la],E0[la])));r0=Promise.all(H0)}else Kp.push({geo:new l.Geometry(!0),mat:Ht,done:!1,finished:!1,symmetries:[new c.Matrix4]}),r0=Vp(Kp[Kp.length-1],Er,Zo);return this.surfaces[Pt]=Kp,r0.surfid=Pt,lt&&typeof lt=="function"?(r0.then(function(Q0){lt(Q0)}),Pt):r0}setSurfaceMaterialStyle(y,N){if((0,g.adjustVolumeStyle)(N),this.surfaces[y]){var K=this.surfaces[y];for(let Rt=0;Rt<K.length;Rt++){var ne=K[Rt].mat=O1.getMatWithStyle(N);if(K[Rt].mat.side=l.FrontSide,N.wireframe&&K[Rt].geo.setUpWireframe(),N.color){K[Rt].mat.color=h.CC.color(N.color),K[Rt].geo.colorsNeedUpdate=!0;const lt=h.CC.color(N.color);K[Rt].geo.setColor(lt)}else if(ne.voldata&&ne.volscheme){const lt=ne.volscheme,Pt=ne.voldata,Ht=h.CC,Dt=lt.range()||[-1,1];K[Rt].geo.setColors(function(Zt,Er,Np){let Zo=Pt.getVal(Zt,Er,Np);return Ht.color(lt.valueToHex(Zo,Dt))})}else{K[Rt].geo.colorsNeedUpdate=!0;for(let lt of K[Rt].geo.geometryGroups)for(let Pt=0;Pt<lt.vertices;Pt++){let Ht=(0,g.getColorFromStyle)(lt.atomArray[Pt],N),Dt=3*Pt;lt.colorArray[Dt]=Ht.r,lt.colorArray[Dt+1]=Ht.g,lt.colorArray[Dt+2]=Ht.b}}K[Rt].finished=!1}}return this}getSurface(y){return this.surfaces[y]}removeSurface(y){for(var N=this.surfaces[y],K=0;K<N.length;K++)N[K]&&N[K].lastGL&&(N[K].geo!==void 0&&N[K].geo.dispose(),N[K].mat!==void 0&&N[K].mat.dispose(),this.modelGroup.remove(N[K].lastGL));return delete this.surfaces[y],this.show(),this}removeAllSurfaces(){for(var y in this.surfaces)if(this.surfaces.hasOwnProperty(y)){for(var N=this.surfaces[y],K=0;K<N.length;K++)N[K]&&N[K].lastGL&&(N[K].geo!==void 0&&N[K].geo.dispose(),N[K].mat!==void 0&&N[K].mat.dispose(),this.modelGroup.remove(N[K].lastGL));delete this.surfaces[y]}return this.show(),this}jmolMoveTo(){var y=this.modelGroup.position,N="center { "+-y.x+" "+-y.y+" "+-y.z+" }; ",K=this.rotationGroup.quaternion;return N+="moveto .5 quaternion { "+K.x+" "+K.y+" "+K.z+" "+K.w+" };"}clear(){return this.removeAllSurfaces(),this.removeAllModels(),this.removeAllLabels(),this.removeAllShapes(),this.show(),this}mapAtomProperties(y,N){N=N||{};var K=this.getAtomsFromSel(N);if(typeof y=="function")for(let lt=0,Pt=K.length;lt<Pt;lt++)y(K[lt]);else for(let lt=0,Pt=K.length;lt<Pt;lt++){var ne=K[lt];for(let Ht=0,Dt=y.length;Ht<Dt;Ht++){let Zt=y[Ht];if(Zt.props)for(var Rt in Zt.props)Zt.props.hasOwnProperty(Rt)&&this.atomIsSelected(ne,Zt)&&(ne.properties||(ne.properties={}),ne.properties[Rt]=Zt.props[Rt])}}return this}linkViewer(y){return this.linkedViewers.push(y),this}getPerceivedDistance(){return this.CAMERA_Z-this.rotationGroup.position.z}setPerceivedDistance(y){this.rotationGroup.position.z=this.CAMERA_Z-y}setAutoEyeSeparation(y,N){var K=this.getPerceivedDistance();return N||(N=5),y||this.camera.position.x>0?this.camera.position.x=K*Math.tan(Math.PI/180*N):this.camera.position.x=-K*Math.tan(Math.PI/180*N),this.camera.lookAt(new c.Vector3(0,0,this.rotationGroup.position.z)),this.camera.position.x}setDefaultCartoonQuality(y){this.config.cartoonQuality=y}}function tg(d0,y){if(d0=(0,g.getElement)(d0)){y=y||{};try{return new O1(d0,y)}catch(N){throw"error creating viewer: "+N}}}function Mg(d0,y={},N={}){if(d0=(0,g.getElement)(d0)){var K=[],ne=document.createElement("canvas");N.rows=y.rows,N.cols=y.cols,N.control_all=y.control_all!=null&&y.control_all,d0.appendChild(ne);try{for(var Rt=0;Rt<y.rows;Rt++){for(var lt=[],Pt=0;Pt<y.cols;Pt++){N.row=Rt,N.col=Pt,N.canvas=ne,N.viewers=K,N.control_all=y.control_all;var Ht=tg(d0,(0,g.extend)({},N));lt.push(Ht)}K.unshift(lt)}}catch(Dt){throw"error creating viewer grid: "+Dt}return K}}function kg(d0){var y=this;if(d0=(0,g.getElement)(d0)){var N=Mg(d0,{rows:1,cols:2,control_all:!0});this.glviewer1=N[0][0],this.glviewer2=N[0][1],this.glviewer1.setAutoEyeSeparation(!1),this.glviewer2.setAutoEyeSeparation(!0),this.glviewer1.linkViewer(this.glviewer2),this.glviewer2.linkViewer(this.glviewer1);for(var K=Object.getOwnPropertyNames(this.glviewer1.__proto__).filter(function(Rt){return typeof y.glviewer1[Rt]=="function"}),ne=0;ne<K.length;ne++)this[K[ne]]=(function(Rt){return function(){return[this.glviewer1[Rt].apply(this.glviewer1,arguments),this.glviewer2[Rt].apply(this.glviewer2,arguments)]}})(K[ne]);this.setCoordinates=function(Rt,lt,Pt){for(var Ht=0;Ht<Rt.length;Ht++)Rt[Ht].setCoordinates(lt,Pt)},this.surfacesFinished=function(){return this.glviewer1.surfacesFinished()&&this.glviewer2.surfacesFinished()},this.isAnimated=function(){return this.glviewer1.isAnimated()||this.glviewer2.isAnimated()},this.render=function(Rt){this.glviewer1.render(),this.glviewer2.render(),Rt&&Rt(this)},this.getCanvas=function(){return this.glviewer1.getCanvas()}}}O1.numWorkers=4,O1.maxVolume=64e3,O1.surfaceTypeMap={VDW:Lv.VDW,MS:Lv.MS,SAS:Lv.SAS,SES:Lv.SES};var cg=!1,Ag=!1,K1={};function G1(d0,y){var N,K,ne;if(document.querySelector(".viewer_3Dmoljs")!=null&&(cg=!0),cg){Ag=!0,d0=d0??null;var Rt=0;document.querySelectorAll(".viewer_3Dmoljs").forEach(lt=>{var Pt=[],Ht=[],Dt="";lt.style.position=="static"&&(lt.style.position="relative");var Zt=null;if(ne=null,lt.dataset.pdb)Pt.push("https://files.rcsb.org/view/"+lt.dataset.pdb+".pdb"),Ht.push("pdb");else if(lt.dataset.cid)Ht.push("sdf"),Pt.push("https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/"+lt.dataset.cid+"/SDF?record_type=3d");else if(lt.dataset.href||lt.dataset.url){if(Dt=lt.dataset.href?lt.dataset.href:lt.dataset.url,Pt.push(Dt),(ne=Dt.substring(Dt.lastIndexOf(".")+1))=="gz"){let d1=Dt.substring(0,Dt.lastIndexOf(".")).lastIndexOf(".");ne=Dt.substring(d1+1)}Ht.push(ne);var Er=Dt.substring(Dt.lastIndexOf("/")+1,Dt.lastIndexOf("."));Er=="/"&&(Er=Dt.substring(Dt.lastIndexOf("/")+1)),lt.dataset[Ht[Ht.length-1]]=Er}let Np=lt.dataset;for(N in Np)N.substring(0,3)==="pdb"&&N!=="pdb"?(Pt.push("https://files.rcsb.org/view/"+Np[N]+".pdb"),Ht.push("pdb")):N.substring(0,4)==="href"&&N!=="href"?(Dt=Np[N],Pt.push(Dt),Ht.push(Dt.substring(Dt.lastIndexOf(".")+1))):N.substring(0,3)==="cid"&&N!=="cid"&&(Pt.push("https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/"+Np[N]+"/SDF?record_type=3d"),Ht.push("sdf"));var Zo={};lt.dataset.options&&(Zo=(0,g.specStringToObject)(lt.dataset.options));var la=h.CC.color(lt.dataset.backgroundcolor),Dp=lt.dataset.backgroundalpha;Dp=Dp==null?1:parseFloat(Dp);var wp={line:{}};lt.dataset.style&&(wp=(0,g.specStringToObject)(lt.dataset.style));var Vp={};lt.dataset.select&&(Vp=(0,g.specStringToObject)(lt.dataset.select));var Kp=[],r0=[],D0=[],E0={},H0=null,Q0=lt.dataset,lm=/style(.+)/,hm=/surface(.*)/,q0=/labelres(.*)/,Bm=[];for(K in Q0)Object.prototype.hasOwnProperty.call(Q0,K)&&Bm.push(K);for(Bm.sort(),N=0;N<Bm.length;N++){K=Bm[N];var Im,h1,i1,M1=lm.exec(K);M1&&(Im="select"+M1[1],h1=(0,g.specStringToObject)(Q0[Im]),i1=(0,g.specStringToObject)(Q0[K]),Kp.push([h1,i1])),(M1=hm.exec(K))&&(Im="select"+M1[1],h1=(0,g.specStringToObject)(Q0[Im]),i1=(0,g.specStringToObject)(Q0[K]),r0.push([h1,i1])),(M1=q0.exec(K))&&(Im="select"+M1[1],h1=(0,g.specStringToObject)(Q0[Im]),i1=(0,g.specStringToObject)(Q0[K]),D0.push([h1,i1])),K=="zoomto"&&(E0=(0,g.specStringToObject)(Q0[K])),K=="spin"&&(H0=(0,g.specStringToObject)(Q0[K]))}var L1=function(d1){for(d1.setStyle(Vp,wp),Zt&&Zt.createSelectionAndStyle(Vp,wp),N=0;N<Kp.length;N++){let q1=Kp[N][0]||{},Z1=Kp[N][1]||{line:{}};d1.setStyle(q1,Z1),Zt&&Zt.createSelectionAndStyle(Vp,wp)}for(N=0;N<r0.length;N++){let q1=r0[N][0]||{},Z1=r0[N][1]||{};Zt?d1.addSurface(Lv.VDW,Z1,q1,q1).then(x1=>{Zt.loadSurface("VDW",q1,Z1,x1)}):d1.addSurface(Lv.VDW,Z1,q1,q1)}for(N=0;N<D0.length;N++){let q1=D0[N][0]||{},Z1=D0[N][1]||{};d1.addResLabels(q1,Z1)}d1.render(),d1.zoomTo(E0),H0&&d1.spin(H0.axis,H0.speed)};let c1=d0;try{var j1=(0,g.specStringToObject)(lt.dataset.config)||{};j1.backgroundColor===void 0&&(j1.backgroundColor=la),j1.backgroundAlpha===void 0&&(j1.backgroundAlpha=Dp),c1==null?c1=K1[lt.id||Rt++]=tg(lt,j1):(c1.setBackgroundColor(la,Dp),c1.setConfig(j1),Zt&&Zt.initiateUI()),lt.dataset.ui&&$3Dmol.StateManager&&(Zt=new $3Dmol.StateManager(c1))}catch(d1){console.log(d1),lt.textContent="WebGL appears to be disabled."}if(Pt.length!=0){let d1=0,q1=((Z1,x1)=>function(ag){Dt=Pt[d1];var Og=Z1.dataset.type||Z1.dataset.datatype||Ht[d1];if(x1.addModel(ag,Og,Zo),Zt){var eg=Z1.dataset[Ht[d1]];Zt.setModelTitle(eg)}d1+=1,d1<Pt.length?(0,g.get)(Pt[d1]).then(q1):(L1(x1),Z1.dataset.callback&&(0,g.makeFunction)(Z1.dataset.callback)(x1),Ag=!1,y&&y(x1))})(lt,c1);ne&&ne.endsWith("gz")?(0,g.getbin)(Pt[0]).then(q1):(0,g.get)(Pt[0]).then(q1)}else{if(lt.dataset.element){var Hm="#"+lt.dataset.element,t1=document.querySelector(Hm),Y1=t1?t1.textContent:"";ne=lt.dataset.type||lt.dataset.datatype,c1.addModel(Y1,ne,Zo)}L1(c1),lt.dataset.callback&&(0,g.makeFunction)(lt.dataset.callback)(c1),Ag=!1,y&&y(c1)}})}}document.onreadystatechange=()=>{document.readyState==="complete"&&G1()};const sg={"ALA:N":-.15,"ALA:CA":.1,"ALA:CB":0,"ALA:C":.6,"ALA:O":-.55,"ARG:N":-.15,"ARG:CA":.1,"ARG:CB":0,"ARG:CG":0,"ARG:CD":.1,"ARG:NE":-.1,"ARG:CZ":.5,"ARG:NH1":.25,"ARG:NH2":.25,"ARG:C":.6,"ARG:O":-.55,"ASN:N":-.15,"ASN:CA":.1,"ASN:CB":0,"ASN:CG":.55,"ASN:OD1":-.55,"ASN:ND2":0,"ASN:C":.6,"ASN:O":-.55,"ASP:N":-.15,"ASP:CA":.1,"ASP:CB":0,"ASP:CG":.14,"ASP:OD1":-.57,"ASP:OD2":-.57,"ASP:C":.6,"ASP:O":-.55,"CYS:N":-.15,"CYS:CA":.1,"CYS:CB":.19,"CYS:SG":-.19,"CYS:C":.6,"CYS:O":-.55,"GLN:N":-.15,"GLN:CA":.1,"GLN:CB":0,"GLN:CG":0,"GLN:CD":.55,"GLN:OE1":-.55,"GLN:NE2":0,"GLN:C":.6,"GLN:O":-.55,"GLU:N":-.15,"GLU:CA":.1,"GLU:CB":0,"GLU:CG":0,"GLU:CD":.14,"GLU:OE1":-.57,"GLU:OE2":-.57,"GLU:C":.6,"GLU:O":-.55,"GLY:N":-.15,"GLY:CA":.1,"GLY:C":.6,"GLY:O":-.55,"HIS:N":-.15,"HIS:CA":.1,"HIS:CB":0,"HIS:CG":.1,"HIS:ND1":-.1,"HIS:CD2":.1,"HIS:NE2":-.4,"HIS:CE1":.3,"HIS:C":.6,"HIS:O":-.55,"ILE:N":-.15,"ILE:CA":.1,"ILE:CB":0,"ILE:CG2":0,"ILE:CG1":0,"ILE:CD":0,"ILE:C":.6,"ILE:O":-.55,"LEU:N":-.15,"LEU:CA":.1,"LEU:CB":0,"LEU:CG":0,"LEU:CD1":0,"LEU:CD2":0,"LEU:C":.6,"LEU:O":-.55,"LYS:N":-.15,"LYS:CA":.1,"LYS:CB":0,"LYS:CG":0,"LYS:CD":0,"LYS:CE":.25,"LYS:NZ":.75,"LYS:C":.6,"LYS:O":-.55,"MET:N":-.15,"MET:CA":.1,"MET:CB":0,"MET:CG":.06,"MET:SD":-.12,"MET:CE":.06,"MET:C":.6,"MET:O":-.55,"PHE:N":-.15,"PHE:CA":.1,"PHE:CB":0,"PHE:CG":0,"PHE:CD1":0,"PHE:CD2":0,"PHE:CE1":0,"PHE:CE2":0,"PHE:CZ":0,"PHE:C":.6,"PHE:O":-.55,"PRO:N":-.25,"PRO:CD":.1,"PRO:CA":.1,"PRO:CB":0,"PRO:CG":0,"PRO:C":.6,"PRO:O":-.55,"SER:N":-.15,"SER:CA":.1,"SER:CB":.25,"SER:OG":-.25,"SER:C":.6,"SER:O":-.55,"THR:N":-.15,"THR:CA":.1,"THR:CB":.25,"THR:OG1":-.25,"THR:CG2":0,"THR:C":.6,"THR:O":-.55,"TRP:N":-.15,"TRP:CA":.1,"TRP:CB":0,"TRP:CG":-.03,"TRP:CD2":.1,"TRP:CE2":-.04,"TRP:CE3":-.03,"TRP:CD1":.06,"TRP:NE1":-.06,"TRP:CZ2":0,"TRP:CZ3":0,"TRP:CH2":0,"TRP:C":.6,"TRP:O":-.55,"TYR:N":-.15,"TYR:CA":.1,"TYR:CB":0,"TYR:CG":0,"TYR:CD1":0,"TYR:CE1":0,"TYR:CD2":0,"TYR:CE2":0,"TYR:CZ":.25,"TYR:OH":-.25,"TYR:C":.6,"TYR:O":-.55,"VAL:N":-.15,"VAL:CA":.1,"VAL:CB":0,"VAL:CG1":0,"VAL:CG2":0,"VAL:C":.6,"VAL:O":-.55};function Iv(d0,y){if((!y||d0.partialCharge===void 0)&&d0.resn&&d0.atom){var N=d0.resn+":"+d0.atom;d0.properties.partialCharge=sg[N]}}window&&(window.$3Dmol=e)},40:(t,e,r)=>{r.r(e),r.d(e,{bondLength:()=>a,bondTable:()=>n,setBondLength:()=>o});let n={H:.37,He:.32,Li:1.34,Be:.9,B:.82,C:.77,N:.75,O:.73,F:.71,Ne:.69,Na:1.54,Mg:1.3,Al:1.18,Si:1.11,P:1.06,S:1.02,Cl:.99,Ar:.97,K:1.96,Ca:1.74,Sc:1.44,Ti:1.56,V:1.25,Mn:1.39,Fe:1.25,Co:1.26,Ni:1.21,Cu:1.38,Zn:1.31,Ga:1.26,Ge:1.22,Se:1.16,Br:1.14,Kr:1.1,Rb:2.11,Sr:1.92,Y:1.62,Zr:1.48,Nb:1.37,Mo:1.45,Tc:1.56,Ru:1.26,Rh:1.35,Pd:1.31,Ag:1.53,Cd:1.48,In:1.44,Sn:1.41,Sb:1.38,Te:1.35,I:1.33,Xe:1.3,Cs:2.25,Ba:1.98,Lu:1.6,Hf:1.5,Ta:1.38,W:1.46,Re:1.59,Os:1.44,Ir:1.37,Pt:1.28,Au:1.44,Hg:1.49,Tl:1.48,Pb:1.47,Bi:1.46,Rn:1.45};function a(l){return n[l]||1.6}function o(l,u){u<0&&(u=0),n[l]=u}},71:(t,e,r)=>{var n=r(107),a=r(981),o=r(972),l=r(834),u=r(746),c=Object.prototype.toString;function h(g){if(!(this instanceof h))return new h(g);this.options=a.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},g||{});var T=this.options;T.raw&&T.windowBits>0?T.windowBits=-T.windowBits:T.gzip&&T.windowBits>0&&T.windowBits<16&&(T.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var R=n.deflateInit2(this.strm,T.level,T.method,T.windowBits,T.memLevel,T.strategy);if(R!==0)throw new Error(l[R]);if(T.header&&n.deflateSetHeader(this.strm,T.header),T.dictionary){var W;if(W=typeof T.dictionary=="string"?o.string2buf(T.dictionary):c.call(T.dictionary)==="[object ArrayBuffer]"?new Uint8Array(T.dictionary):T.dictionary,(R=n.deflateSetDictionary(this.strm,W))!==0)throw new Error(l[R]);this._dict_set=!0}}function v(g,T){var R=new h(T);if(R.push(g,!0),R.err)throw R.msg||l[R.err];return R.result}h.prototype.push=function(g,T){var R,W,k=this.strm,J=this.options.chunkSize;if(this.ended)return!1;W=T===~~T?T:T===!0?4:0,typeof g=="string"?k.input=o.string2buf(g):c.call(g)==="[object ArrayBuffer]"?k.input=new Uint8Array(g):k.input=g,k.next_in=0,k.avail_in=k.input.length;do{if(k.avail_out===0&&(k.output=new a.Buf8(J),k.next_out=0,k.avail_out=J),(R=n.deflate(k,W))!==1&&R!==0)return this.onEnd(R),this.ended=!0,!1;k.avail_out!==0&&(k.avail_in!==0||W!==4&&W!==2)||(this.options.to==="string"?this.onData(o.buf2binstring(a.shrinkBuf(k.output,k.next_out))):this.onData(a.shrinkBuf(k.output,k.next_out)))}while((k.avail_in>0||k.avail_out===0)&&R!==1);return W===4?(R=n.deflateEnd(this.strm),this.onEnd(R),this.ended=!0,R===0):W!==2||(this.onEnd(0),k.avail_out=0,!0)},h.prototype.onData=function(g){this.chunks.push(g)},h.prototype.onEnd=function(g){g===0&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=g,this.msg=this.strm.msg},e.Deflate=h,e.deflate=v,e.deflateRaw=function(g,T){return(T=T||{}).raw=!0,v(g,T)},e.gzip=function(g,T){return(T=T||{}).gzip=!0,v(g,T)}},75:(t,e,r)=>{function n(Ue){let jp=Ue.length;for(;--jp>=0;)Ue[jp]=0}r.r(e),r.d(e,{Deflate:()=>ey,Inflate:()=>_y,constants:()=>Zv,default:()=>ty,deflate:()=>iy,deflateRaw:()=>xy,gzip:()=>Ly,inflate:()=>Iy,inflateRaw:()=>Dv,ungzip:()=>Wv});const a=256,o=286,l=30,u=15,c=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),h=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),v=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),g=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),T=new Array(576);n(T);const R=new Array(60);n(R);const W=new Array(512);n(W);const k=new Array(256);n(k);const J=new Array(29);n(J);const q=new Array(l);function Se(Ue,jp,bt,X0,G0){this.static_tree=Ue,this.extra_bits=jp,this.extra_base=bt,this.elems=X0,this.max_length=G0,this.has_stree=Ue&&Ue.length}let V,Y,ie;function se(Ue,jp){this.dyn_tree=Ue,this.max_code=0,this.stat_desc=jp}n(q);const ct=Ue=>Ue<256?W[Ue]:W[256+(Ue>>>7)],ae=(Ue,jp)=>{Ue.pending_buf[Ue.pending++]=255&jp,Ue.pending_buf[Ue.pending++]=jp>>>8&255},st=(Ue,jp,bt)=>{Ue.bi_valid>16-bt?(Ue.bi_buf|=jp<<Ue.bi_valid&65535,ae(Ue,Ue.bi_buf),Ue.bi_buf=jp>>16-Ue.bi_valid,Ue.bi_valid+=bt-16):(Ue.bi_buf|=jp<<Ue.bi_valid&65535,Ue.bi_valid+=bt)},Ct=(Ue,jp,bt)=>{st(Ue,bt[2*jp],bt[2*jp+1])},$t=(Ue,jp)=>{let bt=0;do bt|=1&Ue,Ue>>>=1,bt<<=1;while(--jp>0);return bt>>>1},jo=(Ue,jp,bt)=>{const X0=new Array(16);let G0,j0,Ym=0;for(G0=1;G0<=u;G0++)Ym=Ym+bt[G0-1]<<1,X0[G0]=Ym;for(j0=0;j0<=jp;j0++){let xm=Ue[2*j0+1];xm!==0&&(Ue[2*j0]=$t(X0[xm]++,xm))}},Lp=Ue=>{let jp;for(jp=0;jp<o;jp++)Ue.dyn_ltree[2*jp]=0;for(jp=0;jp<l;jp++)Ue.dyn_dtree[2*jp]=0;for(jp=0;jp<19;jp++)Ue.bl_tree[2*jp]=0;Ue.dyn_ltree[512]=1,Ue.opt_len=Ue.static_len=0,Ue.sym_next=Ue.matches=0},Mn=Ue=>{Ue.bi_valid>8?ae(Ue,Ue.bi_buf):Ue.bi_valid>0&&(Ue.pending_buf[Ue.pending++]=Ue.bi_buf),Ue.bi_buf=0,Ue.bi_valid=0},sa=(Ue,jp,bt,X0)=>{const G0=2*jp,j0=2*bt;return Ue[G0]<Ue[j0]||Ue[G0]===Ue[j0]&&X0[jp]<=X0[bt]},re=(Ue,jp,bt)=>{const X0=Ue.heap[bt];let G0=bt<<1;for(;G0<=Ue.heap_len&&(G0<Ue.heap_len&&sa(jp,Ue.heap[G0+1],Ue.heap[G0],Ue.depth)&&G0++,!sa(jp,X0,Ue.heap[G0],Ue.depth));)Ue.heap[bt]=Ue.heap[G0],bt=G0,G0<<=1;Ue.heap[bt]=X0},$o=(Ue,jp,bt)=>{let X0,G0,j0,Ym,xm=0;if(Ue.sym_next!==0)do X0=255&Ue.pending_buf[Ue.sym_buf+xm++],X0+=(255&Ue.pending_buf[Ue.sym_buf+xm++])<<8,G0=Ue.pending_buf[Ue.sym_buf+xm++],X0===0?Ct(Ue,G0,jp):(j0=k[G0],Ct(Ue,j0+a+1,jp),Ym=c[j0],Ym!==0&&(G0-=J[j0],st(Ue,G0,Ym)),X0--,j0=ct(X0),Ct(Ue,j0,bt),Ym=h[j0],Ym!==0&&(X0-=q[j0],st(Ue,X0,Ym)));while(xm<Ue.sym_next);Ct(Ue,256,jp)},qo=(Ue,jp)=>{const bt=jp.dyn_tree,X0=jp.stat_desc.static_tree,G0=jp.stat_desc.has_stree,j0=jp.stat_desc.elems;let Ym,xm,V1,Em=-1;for(Ue.heap_len=0,Ue.heap_max=573,Ym=0;Ym<j0;Ym++)bt[2*Ym]!==0?(Ue.heap[++Ue.heap_len]=Em=Ym,Ue.depth[Ym]=0):bt[2*Ym+1]=0;for(;Ue.heap_len<2;)V1=Ue.heap[++Ue.heap_len]=Em<2?++Em:0,bt[2*V1]=1,Ue.depth[V1]=0,Ue.opt_len--,G0&&(Ue.static_len-=X0[2*V1+1]);for(jp.max_code=Em,Ym=Ue.heap_len>>1;Ym>=1;Ym--)re(Ue,bt,Ym);V1=j0;do Ym=Ue.heap[1],Ue.heap[1]=Ue.heap[Ue.heap_len--],re(Ue,bt,1),xm=Ue.heap[1],Ue.heap[--Ue.heap_max]=Ym,Ue.heap[--Ue.heap_max]=xm,bt[2*V1]=bt[2*Ym]+bt[2*xm],Ue.depth[V1]=(Ue.depth[Ym]>=Ue.depth[xm]?Ue.depth[Ym]:Ue.depth[xm])+1,bt[2*Ym+1]=bt[2*xm+1]=V1,Ue.heap[1]=V1++,re(Ue,bt,1);while(Ue.heap_len>=2);Ue.heap[--Ue.heap_max]=Ue.heap[1],((Zm,qg)=>{const Sg=qg.dyn_tree,$1=qg.max_code,ly=qg.stat_desc.static_tree,bv=qg.stat_desc.has_stree,Fg=qg.stat_desc.extra_bits,kv=qg.stat_desc.extra_base,Jg=qg.stat_desc.max_length;let ig,Gg,Rv,lg,mv,Kg,jg=0;for(lg=0;lg<=u;lg++)Zm.bl_count[lg]=0;for(Sg[2*Zm.heap[Zm.heap_max]+1]=0,ig=Zm.heap_max+1;ig<573;ig++)Gg=Zm.heap[ig],lg=Sg[2*Sg[2*Gg+1]+1]+1,lg>Jg&&(lg=Jg,jg++),Sg[2*Gg+1]=lg,Gg>$1||(Zm.bl_count[lg]++,mv=0,Gg>=kv&&(mv=Fg[Gg-kv]),Kg=Sg[2*Gg],Zm.opt_len+=Kg*(lg+mv),bv&&(Zm.static_len+=Kg*(ly[2*Gg+1]+mv)));if(jg!==0){do{for(lg=Jg-1;Zm.bl_count[lg]===0;)lg--;Zm.bl_count[lg]--,Zm.bl_count[lg+1]+=2,Zm.bl_count[Jg]--,jg-=2}while(jg>0);for(lg=Jg;lg!==0;lg--)for(Gg=Zm.bl_count[lg];Gg!==0;)Rv=Zm.heap[--ig],Rv>$1||(Sg[2*Rv+1]!==lg&&(Zm.opt_len+=(lg-Sg[2*Rv+1])*Sg[2*Rv],Sg[2*Rv+1]=lg),Gg--)}})(Ue,jp),jo(bt,Em,Ue.bl_count)},Kt=(Ue,jp,bt)=>{let X0,G0,j0=-1,Ym=jp[1],xm=0,V1=7,Em=4;for(Ym===0&&(V1=138,Em=3),jp[2*(bt+1)+1]=65535,X0=0;X0<=bt;X0++)G0=Ym,Ym=jp[2*(X0+1)+1],++xm<V1&&G0===Ym||(xm<Em?Ue.bl_tree[2*G0]+=xm:G0!==0?(G0!==j0&&Ue.bl_tree[2*G0]++,Ue.bl_tree[32]++):xm<=10?Ue.bl_tree[34]++:Ue.bl_tree[36]++,xm=0,j0=G0,Ym===0?(V1=138,Em=3):G0===Ym?(V1=6,Em=3):(V1=7,Em=4))},i0=(Ue,jp,bt)=>{let X0,G0,j0=-1,Ym=jp[1],xm=0,V1=7,Em=4;for(Ym===0&&(V1=138,Em=3),X0=0;X0<=bt;X0++)if(G0=Ym,Ym=jp[2*(X0+1)+1],!(++xm<V1&&G0===Ym)){if(xm<Em)do Ct(Ue,G0,Ue.bl_tree);while(--xm!==0);else G0!==0?(G0!==j0&&(Ct(Ue,G0,Ue.bl_tree),xm--),Ct(Ue,16,Ue.bl_tree),st(Ue,xm-3,2)):xm<=10?(Ct(Ue,17,Ue.bl_tree),st(Ue,xm-3,3)):(Ct(Ue,18,Ue.bl_tree),st(Ue,xm-11,7));xm=0,j0=G0,Ym===0?(V1=138,Em=3):G0===Ym?(V1=6,Em=3):(V1=7,Em=4)}};let Up=!1;const l0=(Ue,jp,bt,X0)=>{st(Ue,0+(X0?1:0),3),Mn(Ue),ae(Ue,bt),ae(Ue,~bt),bt&&Ue.pending_buf.set(Ue.window.subarray(jp,jp+bt),Ue.pending),Ue.pending+=bt};var y0=(Ue,jp,bt,X0)=>{let G0,j0,Ym=0;Ue.level>0?(Ue.strm.data_type===2&&(Ue.strm.data_type=(xm=>{let V1,Em=4093624447;for(V1=0;V1<=31;V1++,Em>>>=1)if(1&Em&&xm.dyn_ltree[2*V1]!==0)return 0;if(xm.dyn_ltree[18]!==0||xm.dyn_ltree[20]!==0||xm.dyn_ltree[26]!==0)return 1;for(V1=32;V1<a;V1++)if(xm.dyn_ltree[2*V1]!==0)return 1;return 0})(Ue)),qo(Ue,Ue.l_desc),qo(Ue,Ue.d_desc),Ym=(xm=>{let V1;for(Kt(xm,xm.dyn_ltree,xm.l_desc.max_code),Kt(xm,xm.dyn_dtree,xm.d_desc.max_code),qo(xm,xm.bl_desc),V1=18;V1>=3&&xm.bl_tree[2*g[V1]+1]===0;V1--);return xm.opt_len+=3*(V1+1)+5+5+4,V1})(Ue),G0=Ue.opt_len+3+7>>>3,j0=Ue.static_len+3+7>>>3,j0<=G0&&(G0=j0)):G0=j0=bt+5,bt+4<=G0&&jp!==-1?l0(Ue,jp,bt,X0):Ue.strategy===4||j0===G0?(st(Ue,2+(X0?1:0),3),$o(Ue,T,R)):(st(Ue,4+(X0?1:0),3),((xm,V1,Em,Zm)=>{let qg;for(st(xm,V1-257,5),st(xm,Em-1,5),st(xm,Zm-4,4),qg=0;qg<Zm;qg++)st(xm,xm.bl_tree[2*g[qg]+1],3);i0(xm,xm.dyn_ltree,V1-1),i0(xm,xm.dyn_dtree,Em-1)})(Ue,Ue.l_desc.max_code+1,Ue.d_desc.max_code+1,Ym+1),$o(Ue,Ue.dyn_ltree,Ue.dyn_dtree)),Lp(Ue),X0&&Mn(Ue)},kp={_tr_init:Ue=>{Up||((()=>{let jp,bt,X0,G0,j0;const Ym=new Array(16);for(X0=0,G0=0;G0<28;G0++)for(J[G0]=X0,jp=0;jp<1<<c[G0];jp++)k[X0++]=G0;for(k[X0-1]=G0,j0=0,G0=0;G0<16;G0++)for(q[G0]=j0,jp=0;jp<1<<h[G0];jp++)W[j0++]=G0;for(j0>>=7;G0<l;G0++)for(q[G0]=j0<<7,jp=0;jp<1<<h[G0]-7;jp++)W[256+j0++]=G0;for(bt=0;bt<=u;bt++)Ym[bt]=0;for(jp=0;jp<=143;)T[2*jp+1]=8,jp++,Ym[8]++;for(;jp<=255;)T[2*jp+1]=9,jp++,Ym[9]++;for(;jp<=279;)T[2*jp+1]=7,jp++,Ym[7]++;for(;jp<=287;)T[2*jp+1]=8,jp++,Ym[8]++;for(jo(T,287,Ym),jp=0;jp<l;jp++)R[2*jp+1]=5,R[2*jp]=$t(jp,5);V=new Se(T,c,257,o,u),Y=new Se(R,h,0,l,u),ie=new Se(new Array(0),v,0,19,7)})(),Up=!0),Ue.l_desc=new se(Ue.dyn_ltree,V),Ue.d_desc=new se(Ue.dyn_dtree,Y),Ue.bl_desc=new se(Ue.bl_tree,ie),Ue.bi_buf=0,Ue.bi_valid=0,Lp(Ue)},_tr_stored_block:l0,_tr_flush_block:y0,_tr_tally:(Ue,jp,bt)=>(Ue.pending_buf[Ue.sym_buf+Ue.sym_next++]=jp,Ue.pending_buf[Ue.sym_buf+Ue.sym_next++]=jp>>8,Ue.pending_buf[Ue.sym_buf+Ue.sym_next++]=bt,jp===0?Ue.dyn_ltree[2*bt]++:(Ue.matches++,jp--,Ue.dyn_ltree[2*(k[bt]+a+1)]++,Ue.dyn_dtree[2*ct(jp)]++),Ue.sym_next===Ue.sym_end),_tr_align:Ue=>{st(Ue,2,3),Ct(Ue,256,T),(jp=>{jp.bi_valid===16?(ae(jp,jp.bi_buf),jp.bi_buf=0,jp.bi_valid=0):jp.bi_valid>=8&&(jp.pending_buf[jp.pending++]=255&jp.bi_buf,jp.bi_buf>>=8,jp.bi_valid-=8)})(Ue)}},u0=(Ue,jp,bt,X0)=>{let G0=65535&Ue,j0=Ue>>>16&65535,Ym=0;for(;bt!==0;){Ym=bt>2e3?2e3:bt,bt-=Ym;do G0=G0+jp[X0++]|0,j0=j0+G0|0;while(--Ym);G0%=65521,j0%=65521}return G0|j0<<16};const f0=new Uint32Array((()=>{let Ue,jp=[];for(var bt=0;bt<256;bt++){Ue=bt;for(var X0=0;X0<8;X0++)Ue=1&Ue?3988292384^Ue>>>1:Ue>>>1;jp[bt]=Ue}return jp})());var v0=(Ue,jp,bt,X0)=>{const G0=f0,j0=X0+bt;Ue^=-1;for(let Ym=X0;Ym<j0;Ym++)Ue=Ue>>>8^G0[255&(Ue^jp[Ym])];return-1^Ue},p0={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},rm={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:am,_tr_stored_block:ym,_tr_flush_block:Wm,_tr_tally:h0,_tr_align:f1}=kp,{Z_NO_FLUSH:T1,Z_PARTIAL_FLUSH:I1,Z_FULL_FLUSH:p1,Z_FINISH:Qm,Z_BLOCK:m1,Z_OK:W1,Z_STREAM_END:ug,Z_STREAM_ERROR:ng,Z_DATA_ERROR:Ko,Z_BUF_ERROR:wi,Z_DEFAULT_COMPRESSION:S0,Z_FILTERED:Z0,Z_HUFFMAN_ONLY:Pp,Z_RLE:Ip,Z_FIXED:x0,Z_DEFAULT_STRATEGY:B0,Z_UNKNOWN:Y0,Z_DEFLATED:im}=rm,om=258,Cm=262,r1=42,Om=113,a1=666,hg=(Ue,jp)=>(Ue.msg=p0[jp],jp),pm=Ue=>2*Ue-(Ue>4?9:0),S1=Ue=>{let jp=Ue.length;for(;--jp>=0;)Ue[jp]=0},U1=Ue=>{let jp,bt,X0,G0=Ue.w_size;jp=Ue.hash_size,X0=jp;do bt=Ue.head[--X0],Ue.head[X0]=bt>=G0?bt-G0:0;while(--jp);jp=G0,X0=jp;do bt=Ue.prev[--X0],Ue.prev[X0]=bt>=G0?bt-G0:0;while(--jp)};let J1=(Ue,jp,bt)=>(jp<<Ue.hash_shift^bt)&Ue.hash_mask;const l1=Ue=>{const jp=Ue.state;let bt=jp.pending;bt>Ue.avail_out&&(bt=Ue.avail_out),bt!==0&&(Ue.output.set(jp.pending_buf.subarray(jp.pending_out,jp.pending_out+bt),Ue.next_out),Ue.next_out+=bt,jp.pending_out+=bt,Ue.total_out+=bt,Ue.avail_out-=bt,jp.pending-=bt,jp.pending===0&&(jp.pending_out=0))},Km=(Ue,jp)=>{Wm(Ue,Ue.block_start>=0?Ue.block_start:-1,Ue.strstart-Ue.block_start,jp),Ue.block_start=Ue.strstart,l1(Ue.strm)},A1=(Ue,jp)=>{Ue.pending_buf[Ue.pending++]=jp},y1=(Ue,jp)=>{Ue.pending_buf[Ue.pending++]=jp>>>8&255,Ue.pending_buf[Ue.pending++]=255&jp},uv=(Ue,jp,bt,X0)=>{let G0=Ue.avail_in;return G0>X0&&(G0=X0),G0===0?0:(Ue.avail_in-=G0,jp.set(Ue.input.subarray(Ue.next_in,Ue.next_in+G0),bt),Ue.state.wrap===1?Ue.adler=u0(Ue.adler,jp,G0,bt):Ue.state.wrap===2&&(Ue.adler=v0(Ue.adler,jp,G0,bt)),Ue.next_in+=G0,Ue.total_in+=G0,G0)},$g=(Ue,jp)=>{let bt,X0,G0=Ue.max_chain_length,j0=Ue.strstart,Ym=Ue.prev_length,xm=Ue.nice_match;const V1=Ue.strstart>Ue.w_size-Cm?Ue.strstart-(Ue.w_size-Cm):0,Em=Ue.window,Zm=Ue.w_mask,qg=Ue.prev,Sg=Ue.strstart+om;let $1=Em[j0+Ym-1],ly=Em[j0+Ym];Ue.prev_length>=Ue.good_match&&(G0>>=2),xm>Ue.lookahead&&(xm=Ue.lookahead);do if(bt=jp,Em[bt+Ym]===ly&&Em[bt+Ym-1]===$1&&Em[bt]===Em[j0]&&Em[++bt]===Em[j0+1]){j0+=2,bt++;do;while(Em[++j0]===Em[++bt]&&Em[++j0]===Em[++bt]&&Em[++j0]===Em[++bt]&&Em[++j0]===Em[++bt]&&Em[++j0]===Em[++bt]&&Em[++j0]===Em[++bt]&&Em[++j0]===Em[++bt]&&Em[++j0]===Em[++bt]&&j0<Sg);if(X0=om-(Sg-j0),j0=Sg-om,X0>Ym){if(Ue.match_start=jp,Ym=X0,X0>=xm)break;$1=Em[j0+Ym-1],ly=Em[j0+Ym]}}while((jp=qg[jp&Zm])>V1&&--G0!==0);return Ym<=Ue.lookahead?Ym:Ue.lookahead},Sv=Ue=>{const jp=Ue.w_size;let bt,X0,G0;do{if(X0=Ue.window_size-Ue.lookahead-Ue.strstart,Ue.strstart>=jp+(jp-Cm)&&(Ue.window.set(Ue.window.subarray(jp,jp+jp-X0),0),Ue.match_start-=jp,Ue.strstart-=jp,Ue.block_start-=jp,Ue.insert>Ue.strstart&&(Ue.insert=Ue.strstart),U1(Ue),X0+=jp),Ue.strm.avail_in===0)break;if(bt=uv(Ue.strm,Ue.window,Ue.strstart+Ue.lookahead,X0),Ue.lookahead+=bt,Ue.lookahead+Ue.insert>=3)for(G0=Ue.strstart-Ue.insert,Ue.ins_h=Ue.window[G0],Ue.ins_h=J1(Ue,Ue.ins_h,Ue.window[G0+1]);Ue.insert&&(Ue.ins_h=J1(Ue,Ue.ins_h,Ue.window[G0+3-1]),Ue.prev[G0&Ue.w_mask]=Ue.head[Ue.ins_h],Ue.head[Ue.ins_h]=G0,G0++,Ue.insert--,!(Ue.lookahead+Ue.insert<3)););}while(Ue.lookahead<Cm&&Ue.strm.avail_in!==0)},Yv=(Ue,jp)=>{let bt,X0,G0,j0=Ue.pending_buf_size-5>Ue.w_size?Ue.w_size:Ue.pending_buf_size-5,Ym=0,xm=Ue.strm.avail_in;do{if(bt=65535,G0=Ue.bi_valid+42>>3,Ue.strm.avail_out<G0||(G0=Ue.strm.avail_out-G0,X0=Ue.strstart-Ue.block_start,bt>X0+Ue.strm.avail_in&&(bt=X0+Ue.strm.avail_in),bt>G0&&(bt=G0),bt<j0&&(bt===0&&jp!==Qm||jp===T1||bt!==X0+Ue.strm.avail_in)))break;Ym=jp===Qm&&bt===X0+Ue.strm.avail_in?1:0,ym(Ue,0,0,Ym),Ue.pending_buf[Ue.pending-4]=bt,Ue.pending_buf[Ue.pending-3]=bt>>8,Ue.pending_buf[Ue.pending-2]=~bt,Ue.pending_buf[Ue.pending-1]=~bt>>8,l1(Ue.strm),X0&&(X0>bt&&(X0=bt),Ue.strm.output.set(Ue.window.subarray(Ue.block_start,Ue.block_start+X0),Ue.strm.next_out),Ue.strm.next_out+=X0,Ue.strm.avail_out-=X0,Ue.strm.total_out+=X0,Ue.block_start+=X0,bt-=X0),bt&&(uv(Ue.strm,Ue.strm.output,Ue.strm.next_out,bt),Ue.strm.next_out+=bt,Ue.strm.avail_out-=bt,Ue.strm.total_out+=bt)}while(Ym===0);return xm-=Ue.strm.avail_in,xm&&(xm>=Ue.w_size?(Ue.matches=2,Ue.window.set(Ue.strm.input.subarray(Ue.strm.next_in-Ue.w_size,Ue.strm.next_in),0),Ue.strstart=Ue.w_size,Ue.insert=Ue.strstart):(Ue.window_size-Ue.strstart<=xm&&(Ue.strstart-=Ue.w_size,Ue.window.set(Ue.window.subarray(Ue.w_size,Ue.w_size+Ue.strstart),0),Ue.matches<2&&Ue.matches++,Ue.insert>Ue.strstart&&(Ue.insert=Ue.strstart)),Ue.window.set(Ue.strm.input.subarray(Ue.strm.next_in-xm,Ue.strm.next_in),Ue.strstart),Ue.strstart+=xm,Ue.insert+=xm>Ue.w_size-Ue.insert?Ue.w_size-Ue.insert:xm),Ue.block_start=Ue.strstart),Ue.high_water<Ue.strstart&&(Ue.high_water=Ue.strstart),Ym?4:jp!==T1&&jp!==Qm&&Ue.strm.avail_in===0&&Ue.strstart===Ue.block_start?2:(G0=Ue.window_size-Ue.strstart,Ue.strm.avail_in>G0&&Ue.block_start>=Ue.w_size&&(Ue.block_start-=Ue.w_size,Ue.strstart-=Ue.w_size,Ue.window.set(Ue.window.subarray(Ue.w_size,Ue.w_size+Ue.strstart),0),Ue.matches<2&&Ue.matches++,G0+=Ue.w_size,Ue.insert>Ue.strstart&&(Ue.insert=Ue.strstart)),G0>Ue.strm.avail_in&&(G0=Ue.strm.avail_in),G0&&(uv(Ue.strm,Ue.window,Ue.strstart,G0),Ue.strstart+=G0,Ue.insert+=G0>Ue.w_size-Ue.insert?Ue.w_size-Ue.insert:G0),Ue.high_water<Ue.strstart&&(Ue.high_water=Ue.strstart),G0=Ue.bi_valid+42>>3,G0=Ue.pending_buf_size-G0>65535?65535:Ue.pending_buf_size-G0,j0=G0>Ue.w_size?Ue.w_size:G0,X0=Ue.strstart-Ue.block_start,(X0>=j0||(X0||jp===Qm)&&jp!==T1&&Ue.strm.avail_in===0&&X0<=G0)&&(bt=X0>G0?G0:X0,Ym=jp===Qm&&Ue.strm.avail_in===0&&bt===X0?1:0,ym(Ue,Ue.block_start,bt,Ym),Ue.block_start+=bt,l1(Ue.strm)),Ym?3:1)},my=(Ue,jp)=>{let bt,X0;for(;;){if(Ue.lookahead<Cm){if(Sv(Ue),Ue.lookahead<Cm&&jp===T1)return 1;if(Ue.lookahead===0)break}if(bt=0,Ue.lookahead>=3&&(Ue.ins_h=J1(Ue,Ue.ins_h,Ue.window[Ue.strstart+3-1]),bt=Ue.prev[Ue.strstart&Ue.w_mask]=Ue.head[Ue.ins_h],Ue.head[Ue.ins_h]=Ue.strstart),bt!==0&&Ue.strstart-bt<=Ue.w_size-Cm&&(Ue.match_length=$g(Ue,bt)),Ue.match_length>=3)if(X0=h0(Ue,Ue.strstart-Ue.match_start,Ue.match_length-3),Ue.lookahead-=Ue.match_length,Ue.match_length<=Ue.max_lazy_match&&Ue.lookahead>=3){Ue.match_length--;do Ue.strstart++,Ue.ins_h=J1(Ue,Ue.ins_h,Ue.window[Ue.strstart+3-1]),bt=Ue.prev[Ue.strstart&Ue.w_mask]=Ue.head[Ue.ins_h],Ue.head[Ue.ins_h]=Ue.strstart;while(--Ue.match_length!==0);Ue.strstart++}else Ue.strstart+=Ue.match_length,Ue.match_length=0,Ue.ins_h=Ue.window[Ue.strstart],Ue.ins_h=J1(Ue,Ue.ins_h,Ue.window[Ue.strstart+1]);else X0=h0(Ue,0,Ue.window[Ue.strstart]),Ue.lookahead--,Ue.strstart++;if(X0&&(Km(Ue,!1),Ue.strm.avail_out===0))return 1}return Ue.insert=Ue.strstart<2?Ue.strstart:2,jp===Qm?(Km(Ue,!0),Ue.strm.avail_out===0?3:4):Ue.sym_next&&(Km(Ue,!1),Ue.strm.avail_out===0)?1:2},Vv=(Ue,jp)=>{let bt,X0,G0;for(;;){if(Ue.lookahead<Cm){if(Sv(Ue),Ue.lookahead<Cm&&jp===T1)return 1;if(Ue.lookahead===0)break}if(bt=0,Ue.lookahead>=3&&(Ue.ins_h=J1(Ue,Ue.ins_h,Ue.window[Ue.strstart+3-1]),bt=Ue.prev[Ue.strstart&Ue.w_mask]=Ue.head[Ue.ins_h],Ue.head[Ue.ins_h]=Ue.strstart),Ue.prev_length=Ue.match_length,Ue.prev_match=Ue.match_start,Ue.match_length=2,bt!==0&&Ue.prev_length<Ue.max_lazy_match&&Ue.strstart-bt<=Ue.w_size-Cm&&(Ue.match_length=$g(Ue,bt),Ue.match_length<=5&&(Ue.strategy===Z0||Ue.match_length===3&&Ue.strstart-Ue.match_start>4096)&&(Ue.match_length=2)),Ue.prev_length>=3&&Ue.match_length<=Ue.prev_length){G0=Ue.strstart+Ue.lookahead-3,X0=h0(Ue,Ue.strstart-1-Ue.prev_match,Ue.prev_length-3),Ue.lookahead-=Ue.prev_length-1,Ue.prev_length-=2;do++Ue.strstart<=G0&&(Ue.ins_h=J1(Ue,Ue.ins_h,Ue.window[Ue.strstart+3-1]),bt=Ue.prev[Ue.strstart&Ue.w_mask]=Ue.head[Ue.ins_h],Ue.head[Ue.ins_h]=Ue.strstart);while(--Ue.prev_length!==0);if(Ue.match_available=0,Ue.match_length=2,Ue.strstart++,X0&&(Km(Ue,!1),Ue.strm.avail_out===0))return 1}else if(Ue.match_available){if(X0=h0(Ue,0,Ue.window[Ue.strstart-1]),X0&&Km(Ue,!1),Ue.strstart++,Ue.lookahead--,Ue.strm.avail_out===0)return 1}else Ue.match_available=1,Ue.strstart++,Ue.lookahead--}return Ue.match_available&&(X0=h0(Ue,0,Ue.window[Ue.strstart-1]),Ue.match_available=0),Ue.insert=Ue.strstart<2?Ue.strstart:2,jp===Qm?(Km(Ue,!0),Ue.strm.avail_out===0?3:4):Ue.sym_next&&(Km(Ue,!1),Ue.strm.avail_out===0)?1:2};function yv(Ue,jp,bt,X0,G0){this.good_length=Ue,this.max_lazy=jp,this.nice_length=bt,this.max_chain=X0,this.func=G0}const Hv=[new yv(0,0,0,0,Yv),new yv(4,4,8,4,my),new yv(4,5,16,8,my),new yv(4,6,32,32,my),new yv(4,4,16,16,Vv),new yv(8,16,32,32,Vv),new yv(8,16,128,128,Vv),new yv(8,32,128,256,Vv),new yv(32,128,258,1024,Vv),new yv(32,258,258,4096,Vv)];function gy(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=im,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),S1(this.dyn_ltree),S1(this.dyn_dtree),S1(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),S1(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),S1(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Qv=Ue=>{if(!Ue)return 1;const jp=Ue.state;return!jp||jp.strm!==Ue||jp.status!==r1&&jp.status!==57&&jp.status!==69&&jp.status!==73&&jp.status!==91&&jp.status!==103&&jp.status!==Om&&jp.status!==a1?1:0},Ty=Ue=>{if(Qv(Ue))return hg(Ue,ng);Ue.total_in=Ue.total_out=0,Ue.data_type=Y0;const jp=Ue.state;return jp.pending=0,jp.pending_out=0,jp.wrap<0&&(jp.wrap=-jp.wrap),jp.status=jp.wrap===2?57:jp.wrap?r1:Om,Ue.adler=jp.wrap===2?0:1,jp.last_flush=-2,am(jp),W1},$v=Ue=>{const jp=Ty(Ue);var bt;return jp===W1&&((bt=Ue.state).window_size=2*bt.w_size,S1(bt.head),bt.max_lazy_match=Hv[bt.level].max_lazy,bt.good_match=Hv[bt.level].good_length,bt.nice_match=Hv[bt.level].nice_length,bt.max_chain_length=Hv[bt.level].max_chain,bt.strstart=0,bt.block_start=0,bt.lookahead=0,bt.insert=0,bt.match_length=bt.prev_length=2,bt.match_available=0,bt.ins_h=0),jp},Cv=(Ue,jp,bt,X0,G0,j0)=>{if(!Ue)return ng;let Ym=1;if(jp===S0&&(jp=6),X0<0?(Ym=0,X0=-X0):X0>15&&(Ym=2,X0-=16),G0<1||G0>9||bt!==im||X0<8||X0>15||jp<0||jp>9||j0<0||j0>x0||X0===8&&Ym!==1)return hg(Ue,ng);X0===8&&(X0=9);const xm=new gy;return Ue.state=xm,xm.strm=Ue,xm.status=r1,xm.wrap=Ym,xm.gzhead=null,xm.w_bits=X0,xm.w_size=1<<xm.w_bits,xm.w_mask=xm.w_size-1,xm.hash_bits=G0+7,xm.hash_size=1<<xm.hash_bits,xm.hash_mask=xm.hash_size-1,xm.hash_shift=~~((xm.hash_bits+3-1)/3),xm.window=new Uint8Array(2*xm.w_size),xm.head=new Uint16Array(xm.hash_size),xm.prev=new Uint16Array(xm.w_size),xm.lit_bufsize=1<<G0+6,xm.pending_buf_size=4*xm.lit_bufsize,xm.pending_buf=new Uint8Array(xm.pending_buf_size),xm.sym_buf=xm.lit_bufsize,xm.sym_end=3*(xm.lit_bufsize-1),xm.level=jp,xm.strategy=j0,xm.method=bt,$v(Ue)};var wg={deflateInit:(Ue,jp)=>Cv(Ue,jp,im,15,8,B0),deflateInit2:Cv,deflateReset:$v,deflateResetKeep:Ty,deflateSetHeader:(Ue,jp)=>Qv(Ue)||Ue.state.wrap!==2?ng:(Ue.state.gzhead=jp,W1),deflate:(Ue,jp)=>{if(Qv(Ue)||jp>m1||jp<0)return Ue?hg(Ue,ng):ng;const bt=Ue.state;if(!Ue.output||Ue.avail_in!==0&&!Ue.input||bt.status===a1&&jp!==Qm)return hg(Ue,Ue.avail_out===0?wi:ng);const X0=bt.last_flush;if(bt.last_flush=jp,bt.pending!==0){if(l1(Ue),Ue.avail_out===0)return bt.last_flush=-1,W1}else if(Ue.avail_in===0&&pm(jp)<=pm(X0)&&jp!==Qm)return hg(Ue,wi);if(bt.status===a1&&Ue.avail_in!==0)return hg(Ue,wi);if(bt.status===r1&&bt.wrap===0&&(bt.status=Om),bt.status===r1){let G0=im+(bt.w_bits-8<<4)<<8,j0=-1;if(j0=bt.strategy>=Pp||bt.level<2?0:bt.level<6?1:bt.level===6?2:3,G0|=j0<<6,bt.strstart!==0&&(G0|=32),G0+=31-G0%31,y1(bt,G0),bt.strstart!==0&&(y1(bt,Ue.adler>>>16),y1(bt,65535&Ue.adler)),Ue.adler=1,bt.status=Om,l1(Ue),bt.pending!==0)return bt.last_flush=-1,W1}if(bt.status===57){if(Ue.adler=0,A1(bt,31),A1(bt,139),A1(bt,8),bt.gzhead)A1(bt,(bt.gzhead.text?1:0)+(bt.gzhead.hcrc?2:0)+(bt.gzhead.extra?4:0)+(bt.gzhead.name?8:0)+(bt.gzhead.comment?16:0)),A1(bt,255&bt.gzhead.time),A1(bt,bt.gzhead.time>>8&255),A1(bt,bt.gzhead.time>>16&255),A1(bt,bt.gzhead.time>>24&255),A1(bt,bt.level===9?2:bt.strategy>=Pp||bt.level<2?4:0),A1(bt,255&bt.gzhead.os),bt.gzhead.extra&&bt.gzhead.extra.length&&(A1(bt,255&bt.gzhead.extra.length),A1(bt,bt.gzhead.extra.length>>8&255)),bt.gzhead.hcrc&&(Ue.adler=v0(Ue.adler,bt.pending_buf,bt.pending,0)),bt.gzindex=0,bt.status=69;else if(A1(bt,0),A1(bt,0),A1(bt,0),A1(bt,0),A1(bt,0),A1(bt,bt.level===9?2:bt.strategy>=Pp||bt.level<2?4:0),A1(bt,3),bt.status=Om,l1(Ue),bt.pending!==0)return bt.last_flush=-1,W1}if(bt.status===69){if(bt.gzhead.extra){let G0=bt.pending,j0=(65535&bt.gzhead.extra.length)-bt.gzindex;for(;bt.pending+j0>bt.pending_buf_size;){let xm=bt.pending_buf_size-bt.pending;if(bt.pending_buf.set(bt.gzhead.extra.subarray(bt.gzindex,bt.gzindex+xm),bt.pending),bt.pending=bt.pending_buf_size,bt.gzhead.hcrc&&bt.pending>G0&&(Ue.adler=v0(Ue.adler,bt.pending_buf,bt.pending-G0,G0)),bt.gzindex+=xm,l1(Ue),bt.pending!==0)return bt.last_flush=-1,W1;G0=0,j0-=xm}let Ym=new Uint8Array(bt.gzhead.extra);bt.pending_buf.set(Ym.subarray(bt.gzindex,bt.gzindex+j0),bt.pending),bt.pending+=j0,bt.gzhead.hcrc&&bt.pending>G0&&(Ue.adler=v0(Ue.adler,bt.pending_buf,bt.pending-G0,G0)),bt.gzindex=0}bt.status=73}if(bt.status===73){if(bt.gzhead.name){let G0,j0=bt.pending;do{if(bt.pending===bt.pending_buf_size){if(bt.gzhead.hcrc&&bt.pending>j0&&(Ue.adler=v0(Ue.adler,bt.pending_buf,bt.pending-j0,j0)),l1(Ue),bt.pending!==0)return bt.last_flush=-1,W1;j0=0}G0=bt.gzindex<bt.gzhead.name.length?255&bt.gzhead.name.charCodeAt(bt.gzindex++):0,A1(bt,G0)}while(G0!==0);bt.gzhead.hcrc&&bt.pending>j0&&(Ue.adler=v0(Ue.adler,bt.pending_buf,bt.pending-j0,j0)),bt.gzindex=0}bt.status=91}if(bt.status===91){if(bt.gzhead.comment){let G0,j0=bt.pending;do{if(bt.pending===bt.pending_buf_size){if(bt.gzhead.hcrc&&bt.pending>j0&&(Ue.adler=v0(Ue.adler,bt.pending_buf,bt.pending-j0,j0)),l1(Ue),bt.pending!==0)return bt.last_flush=-1,W1;j0=0}G0=bt.gzindex<bt.gzhead.comment.length?255&bt.gzhead.comment.charCodeAt(bt.gzindex++):0,A1(bt,G0)}while(G0!==0);bt.gzhead.hcrc&&bt.pending>j0&&(Ue.adler=v0(Ue.adler,bt.pending_buf,bt.pending-j0,j0))}bt.status=103}if(bt.status===103){if(bt.gzhead.hcrc){if(bt.pending+2>bt.pending_buf_size&&(l1(Ue),bt.pending!==0))return bt.last_flush=-1,W1;A1(bt,255&Ue.adler),A1(bt,Ue.adler>>8&255),Ue.adler=0}if(bt.status=Om,l1(Ue),bt.pending!==0)return bt.last_flush=-1,W1}if(Ue.avail_in!==0||bt.lookahead!==0||jp!==T1&&bt.status!==a1){let G0=bt.level===0?Yv(bt,jp):bt.strategy===Pp?((j0,Ym)=>{let xm;for(;;){if(j0.lookahead===0&&(Sv(j0),j0.lookahead===0)){if(Ym===T1)return 1;break}if(j0.match_length=0,xm=h0(j0,0,j0.window[j0.strstart]),j0.lookahead--,j0.strstart++,xm&&(Km(j0,!1),j0.strm.avail_out===0))return 1}return j0.insert=0,Ym===Qm?(Km(j0,!0),j0.strm.avail_out===0?3:4):j0.sym_next&&(Km(j0,!1),j0.strm.avail_out===0)?1:2})(bt,jp):bt.strategy===Ip?((j0,Ym)=>{let xm,V1,Em,Zm;const qg=j0.window;for(;;){if(j0.lookahead<=om){if(Sv(j0),j0.lookahead<=om&&Ym===T1)return 1;if(j0.lookahead===0)break}if(j0.match_length=0,j0.lookahead>=3&&j0.strstart>0&&(Em=j0.strstart-1,V1=qg[Em],V1===qg[++Em]&&V1===qg[++Em]&&V1===qg[++Em])){Zm=j0.strstart+om;do;while(V1===qg[++Em]&&V1===qg[++Em]&&V1===qg[++Em]&&V1===qg[++Em]&&V1===qg[++Em]&&V1===qg[++Em]&&V1===qg[++Em]&&V1===qg[++Em]&&Em<Zm);j0.match_length=om-(Zm-Em),j0.match_length>j0.lookahead&&(j0.match_length=j0.lookahead)}if(j0.match_length>=3?(xm=h0(j0,1,j0.match_length-3),j0.lookahead-=j0.match_length,j0.strstart+=j0.match_length,j0.match_length=0):(xm=h0(j0,0,j0.window[j0.strstart]),j0.lookahead--,j0.strstart++),xm&&(Km(j0,!1),j0.strm.avail_out===0))return 1}return j0.insert=0,Ym===Qm?(Km(j0,!0),j0.strm.avail_out===0?3:4):j0.sym_next&&(Km(j0,!1),j0.strm.avail_out===0)?1:2})(bt,jp):Hv[bt.level].func(bt,jp);if(G0!==3&&G0!==4||(bt.status=a1),G0===1||G0===3)return Ue.avail_out===0&&(bt.last_flush=-1),W1;if(G0===2&&(jp===I1?f1(bt):jp!==m1&&(ym(bt,0,0,!1),jp===p1&&(S1(bt.head),bt.lookahead===0&&(bt.strstart=0,bt.block_start=0,bt.insert=0))),l1(Ue),Ue.avail_out===0))return bt.last_flush=-1,W1}return jp!==Qm?W1:bt.wrap<=0?ug:(bt.wrap===2?(A1(bt,255&Ue.adler),A1(bt,Ue.adler>>8&255),A1(bt,Ue.adler>>16&255),A1(bt,Ue.adler>>24&255),A1(bt,255&Ue.total_in),A1(bt,Ue.total_in>>8&255),A1(bt,Ue.total_in>>16&255),A1(bt,Ue.total_in>>24&255)):(y1(bt,Ue.adler>>>16),y1(bt,65535&Ue.adler)),l1(Ue),bt.wrap>0&&(bt.wrap=-bt.wrap),bt.pending!==0?W1:ug)},deflateEnd:Ue=>{if(Qv(Ue))return ng;const jp=Ue.state.status;return Ue.state=null,jp===Om?hg(Ue,Ko):W1},deflateSetDictionary:(Ue,jp)=>{let bt=jp.length;if(Qv(Ue))return ng;const X0=Ue.state,G0=X0.wrap;if(G0===2||G0===1&&X0.status!==r1||X0.lookahead)return ng;if(G0===1&&(Ue.adler=u0(Ue.adler,jp,bt,0)),X0.wrap=0,bt>=X0.w_size){G0===0&&(S1(X0.head),X0.strstart=0,X0.block_start=0,X0.insert=0);let V1=new Uint8Array(X0.w_size);V1.set(jp.subarray(bt-X0.w_size,bt),0),jp=V1,bt=X0.w_size}const j0=Ue.avail_in,Ym=Ue.next_in,xm=Ue.input;for(Ue.avail_in=bt,Ue.next_in=0,Ue.input=jp,Sv(X0);X0.lookahead>=3;){let V1=X0.strstart,Em=X0.lookahead-2;do X0.ins_h=J1(X0,X0.ins_h,X0.window[V1+3-1]),X0.prev[V1&X0.w_mask]=X0.head[X0.ins_h],X0.head[X0.ins_h]=V1,V1++;while(--Em);X0.strstart=V1,X0.lookahead=2,Sv(X0)}return X0.strstart+=X0.lookahead,X0.block_start=X0.strstart,X0.insert=X0.lookahead,X0.lookahead=0,X0.match_length=X0.prev_length=2,X0.match_available=0,Ue.next_in=Ym,Ue.input=xm,Ue.avail_in=j0,X0.wrap=G0,W1},deflateInfo:"pako deflate (from Nodeca project)"};const Lv=(Ue,jp)=>Object.prototype.hasOwnProperty.call(Ue,jp);var Pv=function(Ue){const jp=Array.prototype.slice.call(arguments,1);for(;jp.length;){const bt=jp.shift();if(bt){if(typeof bt!="object")throw new TypeError(bt+"must be non-object");for(const X0 in bt)Lv(bt,X0)&&(Ue[X0]=bt[X0])}}return Ue},Ny=Ue=>{let jp=0;for(let X0=0,G0=Ue.length;X0<G0;X0++)jp+=Ue[X0].length;const bt=new Uint8Array(jp);for(let X0=0,G0=0,j0=Ue.length;X0<j0;X0++){let Ym=Ue[X0];bt.set(Ym,G0),G0+=Ym.length}return bt};let pg=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{pg=!1}const et=new Uint8Array(256);for(let Ue=0;Ue<256;Ue++)et[Ue]=Ue>=252?6:Ue>=248?5:Ue>=240?4:Ue>=224?3:Ue>=192?2:1;et[254]=et[254]=1;var t0=Ue=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(Ue);let jp,bt,X0,G0,j0,Ym=Ue.length,xm=0;for(G0=0;G0<Ym;G0++)bt=Ue.charCodeAt(G0),(64512&bt)==55296&&G0+1<Ym&&(X0=Ue.charCodeAt(G0+1),(64512&X0)==56320&&(bt=65536+(bt-55296<<10)+(X0-56320),G0++)),xm+=bt<128?1:bt<2048?2:bt<65536?3:4;for(jp=new Uint8Array(xm),j0=0,G0=0;j0<xm;G0++)bt=Ue.charCodeAt(G0),(64512&bt)==55296&&G0+1<Ym&&(X0=Ue.charCodeAt(G0+1),(64512&X0)==56320&&(bt=65536+(bt-55296<<10)+(X0-56320),G0++)),bt<128?jp[j0++]=bt:bt<2048?(jp[j0++]=192|bt>>>6,jp[j0++]=128|63&bt):bt<65536?(jp[j0++]=224|bt>>>12,jp[j0++]=128|bt>>>6&63,jp[j0++]=128|63&bt):(jp[j0++]=240|bt>>>18,jp[j0++]=128|bt>>>12&63,jp[j0++]=128|bt>>>6&63,jp[j0++]=128|63&bt);return jp},oa=(Ue,jp)=>{const bt=jp||Ue.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(Ue.subarray(0,jp));let X0,G0;const j0=new Array(2*bt);for(G0=0,X0=0;X0<bt;){let Ym=Ue[X0++];if(Ym<128){j0[G0++]=Ym;continue}let xm=et[Ym];if(xm>4)j0[G0++]=65533,X0+=xm-1;else{for(Ym&=xm===2?31:xm===3?15:7;xm>1&&X0<bt;)Ym=Ym<<6|63&Ue[X0++],xm--;xm>1?j0[G0++]=65533:Ym<65536?j0[G0++]=Ym:(Ym-=65536,j0[G0++]=55296|Ym>>10&1023,j0[G0++]=56320|1023&Ym)}}return((Ym,xm)=>{if(xm<65534&&Ym.subarray&&pg)return String.fromCharCode.apply(null,Ym.length===xm?Ym:Ym.subarray(0,xm));let V1="";for(let Em=0;Em<xm;Em++)V1+=String.fromCharCode(Ym[Em]);return V1})(j0,G0)},a0=(Ue,jp)=>{(jp=jp||Ue.length)>Ue.length&&(jp=Ue.length);let bt=jp-1;for(;bt>=0&&(192&Ue[bt])==128;)bt--;return bt<0||bt===0?jp:bt+et[Ue[bt]]>jp?bt:jp},m0=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const nm=Object.prototype.toString,{Z_NO_FLUSH:L0,Z_SYNC_FLUSH:cm,Z_FULL_FLUSH:Gm,Z_FINISH:Fm,Z_OK:Vm,Z_STREAM_END:D1,Z_DEFAULT_COMPRESSION:O1,Z_DEFAULT_STRATEGY:tg,Z_DEFLATED:Mg}=rm;function kg(Ue){this.options=Pv({level:O1,method:Mg,chunkSize:16384,windowBits:15,memLevel:8,strategy:tg},Ue||{});let jp=this.options;jp.raw&&jp.windowBits>0?jp.windowBits=-jp.windowBits:jp.gzip&&jp.windowBits>0&&jp.windowBits<16&&(jp.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new m0,this.strm.avail_out=0;let bt=wg.deflateInit2(this.strm,jp.level,jp.method,jp.windowBits,jp.memLevel,jp.strategy);if(bt!==Vm)throw new Error(p0[bt]);if(jp.header&&wg.deflateSetHeader(this.strm,jp.header),jp.dictionary){let X0;if(X0=typeof jp.dictionary=="string"?t0(jp.dictionary):nm.call(jp.dictionary)==="[object ArrayBuffer]"?new Uint8Array(jp.dictionary):jp.dictionary,bt=wg.deflateSetDictionary(this.strm,X0),bt!==Vm)throw new Error(p0[bt]);this._dict_set=!0}}function cg(Ue,jp){const bt=new kg(jp);if(bt.push(Ue,!0),bt.err)throw bt.msg||p0[bt.err];return bt.result}kg.prototype.push=function(Ue,jp){const bt=this.strm,X0=this.options.chunkSize;let G0,j0;if(this.ended)return!1;for(j0=jp===~~jp?jp:jp===!0?Fm:L0,typeof Ue=="string"?bt.input=t0(Ue):nm.call(Ue)==="[object ArrayBuffer]"?bt.input=new Uint8Array(Ue):bt.input=Ue,bt.next_in=0,bt.avail_in=bt.input.length;;)if(bt.avail_out===0&&(bt.output=new Uint8Array(X0),bt.next_out=0,bt.avail_out=X0),(j0===cm||j0===Gm)&&bt.avail_out<=6)this.onData(bt.output.subarray(0,bt.next_out)),bt.avail_out=0;else{if(G0=wg.deflate(bt,j0),G0===D1)return bt.next_out>0&&this.onData(bt.output.subarray(0,bt.next_out)),G0=wg.deflateEnd(this.strm),this.onEnd(G0),this.ended=!0,G0===Vm;if(bt.avail_out!==0){if(j0>0&&bt.next_out>0)this.onData(bt.output.subarray(0,bt.next_out)),bt.avail_out=0;else if(bt.avail_in===0)break}else this.onData(bt.output)}return!0},kg.prototype.onData=function(Ue){this.chunks.push(Ue)},kg.prototype.onEnd=function(Ue){Ue===Vm&&(this.result=Ny(this.chunks)),this.chunks=[],this.err=Ue,this.msg=this.strm.msg};var Ag={Deflate:kg,deflate:cg,deflateRaw:function(Ue,jp){return(jp=jp||{}).raw=!0,cg(Ue,jp)},gzip:function(Ue,jp){return(jp=jp||{}).gzip=!0,cg(Ue,jp)}};const K1=16209;var G1=function(Ue,jp){let bt,X0,G0,j0,Ym,xm,V1,Em,Zm,qg,Sg,$1,ly,bv,Fg,kv,Jg,ig,Gg,Rv,lg,mv,Kg,jg;const gv=Ue.state;bt=Ue.next_in,Kg=Ue.input,X0=bt+(Ue.avail_in-5),G0=Ue.next_out,jg=Ue.output,j0=G0-(jp-Ue.avail_out),Ym=G0+(Ue.avail_out-257),xm=gv.dmax,V1=gv.wsize,Em=gv.whave,Zm=gv.wnext,qg=gv.window,Sg=gv.hold,$1=gv.bits,ly=gv.lencode,bv=gv.distcode,Fg=(1<<gv.lenbits)-1,kv=(1<<gv.distbits)-1;e:do{$1<15&&(Sg+=Kg[bt++]<<$1,$1+=8,Sg+=Kg[bt++]<<$1,$1+=8),Jg=ly[Sg&Fg];t:for(;;){if(ig=Jg>>>24,Sg>>>=ig,$1-=ig,ig=Jg>>>16&255,ig===0)jg[G0++]=65535&Jg;else{if(!(16&ig)){if(64&ig){if(32&ig){gv.mode=16191;break e}Ue.msg="invalid literal/length code",gv.mode=K1;break e}Jg=ly[(65535&Jg)+(Sg&(1<<ig)-1)];continue t}for(Gg=65535&Jg,ig&=15,ig&&($1<ig&&(Sg+=Kg[bt++]<<$1,$1+=8),Gg+=Sg&(1<<ig)-1,Sg>>>=ig,$1-=ig),$1<15&&(Sg+=Kg[bt++]<<$1,$1+=8,Sg+=Kg[bt++]<<$1,$1+=8),Jg=bv[Sg&kv];;){if(ig=Jg>>>24,Sg>>>=ig,$1-=ig,ig=Jg>>>16&255,16&ig){if(Rv=65535&Jg,ig&=15,$1<ig&&(Sg+=Kg[bt++]<<$1,$1+=8,$1<ig&&(Sg+=Kg[bt++]<<$1,$1+=8)),Rv+=Sg&(1<<ig)-1,Rv>xm){Ue.msg="invalid distance too far back",gv.mode=K1;break e}if(Sg>>>=ig,$1-=ig,ig=G0-j0,Rv>ig){if(ig=Rv-ig,ig>Em&&gv.sane){Ue.msg="invalid distance too far back",gv.mode=K1;break e}if(lg=0,mv=qg,Zm===0){if(lg+=V1-ig,ig<Gg){Gg-=ig;do jg[G0++]=qg[lg++];while(--ig);lg=G0-Rv,mv=jg}}else if(Zm<ig){if(lg+=V1+Zm-ig,ig-=Zm,ig<Gg){Gg-=ig;do jg[G0++]=qg[lg++];while(--ig);if(lg=0,Zm<Gg){ig=Zm,Gg-=ig;do jg[G0++]=qg[lg++];while(--ig);lg=G0-Rv,mv=jg}}}else if(lg+=Zm-ig,ig<Gg){Gg-=ig;do jg[G0++]=qg[lg++];while(--ig);lg=G0-Rv,mv=jg}for(;Gg>2;)jg[G0++]=mv[lg++],jg[G0++]=mv[lg++],jg[G0++]=mv[lg++],Gg-=3;Gg&&(jg[G0++]=mv[lg++],Gg>1&&(jg[G0++]=mv[lg++]))}else{lg=G0-Rv;do jg[G0++]=jg[lg++],jg[G0++]=jg[lg++],jg[G0++]=jg[lg++],Gg-=3;while(Gg>2);Gg&&(jg[G0++]=jg[lg++],Gg>1&&(jg[G0++]=jg[lg++]))}break}if(64&ig){Ue.msg="invalid distance code",gv.mode=K1;break e}Jg=bv[(65535&Jg)+(Sg&(1<<ig)-1)]}}break}}while(bt<X0&&G0<Ym);Gg=$1>>3,bt-=Gg,$1-=Gg<<3,Sg&=(1<<$1)-1,Ue.next_in=bt,Ue.next_out=G0,Ue.avail_in=bt<X0?X0-bt+5:5-(bt-X0),Ue.avail_out=G0<Ym?Ym-G0+257:257-(G0-Ym),gv.hold=Sg,gv.bits=$1};const sg=15,Iv=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),d0=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),y=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),N=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var K=(Ue,jp,bt,X0,G0,j0,Ym,xm)=>{const V1=xm.bits;let Em,Zm,qg,Sg,$1,ly,bv=0,Fg=0,kv=0,Jg=0,ig=0,Gg=0,Rv=0,lg=0,mv=0,Kg=0,jg=null;const gv=new Uint16Array(16),ky=new Uint16Array(16);let ax,ix,Mx,t2=null;for(bv=0;bv<=sg;bv++)gv[bv]=0;for(Fg=0;Fg<X0;Fg++)gv[jp[bt+Fg]]++;for(ig=V1,Jg=sg;Jg>=1&&gv[Jg]===0;Jg--);if(ig>Jg&&(ig=Jg),Jg===0)return G0[j0++]=20971520,G0[j0++]=20971520,xm.bits=1,0;for(kv=1;kv<Jg&&gv[kv]===0;kv++);for(ig<kv&&(ig=kv),lg=1,bv=1;bv<=sg;bv++)if(lg<<=1,lg-=gv[bv],lg<0)return-1;if(lg>0&&(Ue===0||Jg!==1))return-1;for(ky[1]=0,bv=1;bv<sg;bv++)ky[bv+1]=ky[bv]+gv[bv];for(Fg=0;Fg<X0;Fg++)jp[bt+Fg]!==0&&(Ym[ky[jp[bt+Fg]]++]=Fg);if(Ue===0?(jg=t2=Ym,ly=20):Ue===1?(jg=Iv,t2=d0,ly=257):(jg=y,t2=N,ly=0),Kg=0,Fg=0,bv=kv,$1=j0,Gg=ig,Rv=0,qg=-1,mv=1<<ig,Sg=mv-1,Ue===1&&mv>852||Ue===2&&mv>592)return 1;for(;;){ax=bv-Rv,Ym[Fg]+1<ly?(ix=0,Mx=Ym[Fg]):Ym[Fg]>=ly?(ix=t2[Ym[Fg]-ly],Mx=jg[Ym[Fg]-ly]):(ix=96,Mx=0),Em=1<<bv-Rv,Zm=1<<Gg,kv=Zm;do Zm-=Em,G0[$1+(Kg>>Rv)+Zm]=ax<<24|ix<<16|Mx;while(Zm!==0);for(Em=1<<bv-1;Kg&Em;)Em>>=1;if(Em!==0?(Kg&=Em-1,Kg+=Em):Kg=0,Fg++,--gv[bv]===0){if(bv===Jg)break;bv=jp[bt+Ym[Fg]]}if(bv>ig&&(Kg&Sg)!==qg){for(Rv===0&&(Rv=ig),$1+=kv,Gg=bv-Rv,lg=1<<Gg;Gg+Rv<Jg&&(lg-=gv[Gg+Rv],!(lg<=0));)Gg++,lg<<=1;if(mv+=1<<Gg,Ue===1&&mv>852||Ue===2&&mv>592)return 1;qg=Kg&Sg,G0[qg]=ig<<24|Gg<<16|$1-j0}}return Kg!==0&&(G0[$1+Kg]=bv-Rv<<24|64<<16),xm.bits=ig,0};const{Z_FINISH:ne,Z_BLOCK:Rt,Z_TREES:lt,Z_OK:Pt,Z_STREAM_END:Ht,Z_NEED_DICT:Dt,Z_STREAM_ERROR:Zt,Z_DATA_ERROR:Er,Z_MEM_ERROR:Np,Z_BUF_ERROR:Zo,Z_DEFLATED:la}=rm,Dp=16180,wp=16190,Vp=16191,Kp=16192,r0=16194,D0=16199,E0=16200,H0=16206,Q0=16209,lm=Ue=>(Ue>>>24&255)+(Ue>>>8&65280)+((65280&Ue)<<8)+((255&Ue)<<24);function hm(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const q0=Ue=>{if(!Ue)return 1;const jp=Ue.state;return!jp||jp.strm!==Ue||jp.mode<Dp||jp.mode>16211?1:0},Bm=Ue=>{if(q0(Ue))return Zt;const jp=Ue.state;return Ue.total_in=Ue.total_out=jp.total=0,Ue.msg="",jp.wrap&&(Ue.adler=1&jp.wrap),jp.mode=Dp,jp.last=0,jp.havedict=0,jp.flags=-1,jp.dmax=32768,jp.head=null,jp.hold=0,jp.bits=0,jp.lencode=jp.lendyn=new Int32Array(852),jp.distcode=jp.distdyn=new Int32Array(592),jp.sane=1,jp.back=-1,Pt},Im=Ue=>{if(q0(Ue))return Zt;const jp=Ue.state;return jp.wsize=0,jp.whave=0,jp.wnext=0,Bm(Ue)},h1=(Ue,jp)=>{let bt;if(q0(Ue))return Zt;const X0=Ue.state;return jp<0?(bt=0,jp=-jp):(bt=5+(jp>>4),jp<48&&(jp&=15)),jp&&(jp<8||jp>15)?Zt:(X0.window!==null&&X0.wbits!==jp&&(X0.window=null),X0.wrap=bt,X0.wbits=jp,Im(Ue))},i1=(Ue,jp)=>{if(!Ue)return Zt;const bt=new hm;Ue.state=bt,bt.strm=Ue,bt.window=null,bt.mode=Dp;const X0=h1(Ue,jp);return X0!==Pt&&(Ue.state=null),X0};let M1,L1,c1=!0;const j1=Ue=>{if(c1){M1=new Int32Array(512),L1=new Int32Array(32);let jp=0;for(;jp<144;)Ue.lens[jp++]=8;for(;jp<256;)Ue.lens[jp++]=9;for(;jp<280;)Ue.lens[jp++]=7;for(;jp<288;)Ue.lens[jp++]=8;for(K(1,Ue.lens,0,288,M1,0,Ue.work,{bits:9}),jp=0;jp<32;)Ue.lens[jp++]=5;K(2,Ue.lens,0,32,L1,0,Ue.work,{bits:5}),c1=!1}Ue.lencode=M1,Ue.lenbits=9,Ue.distcode=L1,Ue.distbits=5},Hm=(Ue,jp,bt,X0)=>{let G0;const j0=Ue.state;return j0.window===null&&(j0.wsize=1<<j0.wbits,j0.wnext=0,j0.whave=0,j0.window=new Uint8Array(j0.wsize)),X0>=j0.wsize?(j0.window.set(jp.subarray(bt-j0.wsize,bt),0),j0.wnext=0,j0.whave=j0.wsize):(G0=j0.wsize-j0.wnext,G0>X0&&(G0=X0),j0.window.set(jp.subarray(bt-X0,bt-X0+G0),j0.wnext),(X0-=G0)?(j0.window.set(jp.subarray(bt-X0,bt),0),j0.wnext=X0,j0.whave=j0.wsize):(j0.wnext+=G0,j0.wnext===j0.wsize&&(j0.wnext=0),j0.whave<j0.wsize&&(j0.whave+=G0))),0};var t1={inflateReset:Im,inflateReset2:h1,inflateResetKeep:Bm,inflateInit:Ue=>i1(Ue,15),inflateInit2:i1,inflate:(Ue,jp)=>{let bt,X0,G0,j0,Ym,xm,V1,Em,Zm,qg,Sg,$1,ly,bv,Fg,kv,Jg,ig,Gg,Rv,lg,mv,Kg=0;const jg=new Uint8Array(4);let gv,ky;const ax=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(q0(Ue)||!Ue.output||!Ue.input&&Ue.avail_in!==0)return Zt;bt=Ue.state,bt.mode===Vp&&(bt.mode=Kp),Ym=Ue.next_out,G0=Ue.output,V1=Ue.avail_out,j0=Ue.next_in,X0=Ue.input,xm=Ue.avail_in,Em=bt.hold,Zm=bt.bits,qg=xm,Sg=V1,mv=Pt;e:for(;;)switch(bt.mode){case Dp:if(bt.wrap===0){bt.mode=Kp;break}for(;Zm<16;){if(xm===0)break e;xm--,Em+=X0[j0++]<<Zm,Zm+=8}if(2&bt.wrap&&Em===35615){bt.wbits===0&&(bt.wbits=15),bt.check=0,jg[0]=255&Em,jg[1]=Em>>>8&255,bt.check=v0(bt.check,jg,2,0),Em=0,Zm=0,bt.mode=16181;break}if(bt.head&&(bt.head.done=!1),!(1&bt.wrap)||(((255&Em)<<8)+(Em>>8))%31){Ue.msg="incorrect header check",bt.mode=Q0;break}if((15&Em)!==la){Ue.msg="unknown compression method",bt.mode=Q0;break}if(Em>>>=4,Zm-=4,lg=8+(15&Em),bt.wbits===0&&(bt.wbits=lg),lg>15||lg>bt.wbits){Ue.msg="invalid window size",bt.mode=Q0;break}bt.dmax=1<<bt.wbits,bt.flags=0,Ue.adler=bt.check=1,bt.mode=512&Em?16189:Vp,Em=0,Zm=0;break;case 16181:for(;Zm<16;){if(xm===0)break e;xm--,Em+=X0[j0++]<<Zm,Zm+=8}if(bt.flags=Em,(255&bt.flags)!==la){Ue.msg="unknown compression method",bt.mode=Q0;break}if(57344&bt.flags){Ue.msg="unknown header flags set",bt.mode=Q0;break}bt.head&&(bt.head.text=Em>>8&1),512&bt.flags&&4&bt.wrap&&(jg[0]=255&Em,jg[1]=Em>>>8&255,bt.check=v0(bt.check,jg,2,0)),Em=0,Zm=0,bt.mode=16182;case 16182:for(;Zm<32;){if(xm===0)break e;xm--,Em+=X0[j0++]<<Zm,Zm+=8}bt.head&&(bt.head.time=Em),512&bt.flags&&4&bt.wrap&&(jg[0]=255&Em,jg[1]=Em>>>8&255,jg[2]=Em>>>16&255,jg[3]=Em>>>24&255,bt.check=v0(bt.check,jg,4,0)),Em=0,Zm=0,bt.mode=16183;case 16183:for(;Zm<16;){if(xm===0)break e;xm--,Em+=X0[j0++]<<Zm,Zm+=8}bt.head&&(bt.head.xflags=255&Em,bt.head.os=Em>>8),512&bt.flags&&4&bt.wrap&&(jg[0]=255&Em,jg[1]=Em>>>8&255,bt.check=v0(bt.check,jg,2,0)),Em=0,Zm=0,bt.mode=16184;case 16184:if(1024&bt.flags){for(;Zm<16;){if(xm===0)break e;xm--,Em+=X0[j0++]<<Zm,Zm+=8}bt.length=Em,bt.head&&(bt.head.extra_len=Em),512&bt.flags&&4&bt.wrap&&(jg[0]=255&Em,jg[1]=Em>>>8&255,bt.check=v0(bt.check,jg,2,0)),Em=0,Zm=0}else bt.head&&(bt.head.extra=null);bt.mode=16185;case 16185:if(1024&bt.flags&&($1=bt.length,$1>xm&&($1=xm),$1&&(bt.head&&(lg=bt.head.extra_len-bt.length,bt.head.extra||(bt.head.extra=new Uint8Array(bt.head.extra_len)),bt.head.extra.set(X0.subarray(j0,j0+$1),lg)),512&bt.flags&&4&bt.wrap&&(bt.check=v0(bt.check,X0,$1,j0)),xm-=$1,j0+=$1,bt.length-=$1),bt.length))break e;bt.length=0,bt.mode=16186;case 16186:if(2048&bt.flags){if(xm===0)break e;$1=0;do lg=X0[j0+$1++],bt.head&&lg&&bt.length<65536&&(bt.head.name+=String.fromCharCode(lg));while(lg&&$1<xm);if(512&bt.flags&&4&bt.wrap&&(bt.check=v0(bt.check,X0,$1,j0)),xm-=$1,j0+=$1,lg)break e}else bt.head&&(bt.head.name=null);bt.length=0,bt.mode=16187;case 16187:if(4096&bt.flags){if(xm===0)break e;$1=0;do lg=X0[j0+$1++],bt.head&&lg&&bt.length<65536&&(bt.head.comment+=String.fromCharCode(lg));while(lg&&$1<xm);if(512&bt.flags&&4&bt.wrap&&(bt.check=v0(bt.check,X0,$1,j0)),xm-=$1,j0+=$1,lg)break e}else bt.head&&(bt.head.comment=null);bt.mode=16188;case 16188:if(512&bt.flags){for(;Zm<16;){if(xm===0)break e;xm--,Em+=X0[j0++]<<Zm,Zm+=8}if(4&bt.wrap&&Em!==(65535&bt.check)){Ue.msg="header crc mismatch",bt.mode=Q0;break}Em=0,Zm=0}bt.head&&(bt.head.hcrc=bt.flags>>9&1,bt.head.done=!0),Ue.adler=bt.check=0,bt.mode=Vp;break;case 16189:for(;Zm<32;){if(xm===0)break e;xm--,Em+=X0[j0++]<<Zm,Zm+=8}Ue.adler=bt.check=lm(Em),Em=0,Zm=0,bt.mode=wp;case wp:if(bt.havedict===0)return Ue.next_out=Ym,Ue.avail_out=V1,Ue.next_in=j0,Ue.avail_in=xm,bt.hold=Em,bt.bits=Zm,Dt;Ue.adler=bt.check=1,bt.mode=Vp;case Vp:if(jp===Rt||jp===lt)break e;case Kp:if(bt.last){Em>>>=7&Zm,Zm-=7&Zm,bt.mode=H0;break}for(;Zm<3;){if(xm===0)break e;xm--,Em+=X0[j0++]<<Zm,Zm+=8}switch(bt.last=1&Em,Em>>>=1,Zm-=1,3&Em){case 0:bt.mode=16193;break;case 1:if(j1(bt),bt.mode=D0,jp===lt){Em>>>=2,Zm-=2;break e}break;case 2:bt.mode=16196;break;case 3:Ue.msg="invalid block type",bt.mode=Q0}Em>>>=2,Zm-=2;break;case 16193:for(Em>>>=7&Zm,Zm-=7&Zm;Zm<32;){if(xm===0)break e;xm--,Em+=X0[j0++]<<Zm,Zm+=8}if((65535&Em)!=(Em>>>16^65535)){Ue.msg="invalid stored block lengths",bt.mode=Q0;break}if(bt.length=65535&Em,Em=0,Zm=0,bt.mode=r0,jp===lt)break e;case r0:bt.mode=16195;case 16195:if($1=bt.length,$1){if($1>xm&&($1=xm),$1>V1&&($1=V1),$1===0)break e;G0.set(X0.subarray(j0,j0+$1),Ym),xm-=$1,j0+=$1,V1-=$1,Ym+=$1,bt.length-=$1;break}bt.mode=Vp;break;case 16196:for(;Zm<14;){if(xm===0)break e;xm--,Em+=X0[j0++]<<Zm,Zm+=8}if(bt.nlen=257+(31&Em),Em>>>=5,Zm-=5,bt.ndist=1+(31&Em),Em>>>=5,Zm-=5,bt.ncode=4+(15&Em),Em>>>=4,Zm-=4,bt.nlen>286||bt.ndist>30){Ue.msg="too many length or distance symbols",bt.mode=Q0;break}bt.have=0,bt.mode=16197;case 16197:for(;bt.have<bt.ncode;){for(;Zm<3;){if(xm===0)break e;xm--,Em+=X0[j0++]<<Zm,Zm+=8}bt.lens[ax[bt.have++]]=7&Em,Em>>>=3,Zm-=3}for(;bt.have<19;)bt.lens[ax[bt.have++]]=0;if(bt.lencode=bt.lendyn,bt.lenbits=7,gv={bits:bt.lenbits},mv=K(0,bt.lens,0,19,bt.lencode,0,bt.work,gv),bt.lenbits=gv.bits,mv){Ue.msg="invalid code lengths set",bt.mode=Q0;break}bt.have=0,bt.mode=16198;case 16198:for(;bt.have<bt.nlen+bt.ndist;){for(;Kg=bt.lencode[Em&(1<<bt.lenbits)-1],Fg=Kg>>>24,kv=Kg>>>16&255,Jg=65535&Kg,!(Fg<=Zm);){if(xm===0)break e;xm--,Em+=X0[j0++]<<Zm,Zm+=8}if(Jg<16)Em>>>=Fg,Zm-=Fg,bt.lens[bt.have++]=Jg;else{if(Jg===16){for(ky=Fg+2;Zm<ky;){if(xm===0)break e;xm--,Em+=X0[j0++]<<Zm,Zm+=8}if(Em>>>=Fg,Zm-=Fg,bt.have===0){Ue.msg="invalid bit length repeat",bt.mode=Q0;break}lg=bt.lens[bt.have-1],$1=3+(3&Em),Em>>>=2,Zm-=2}else if(Jg===17){for(ky=Fg+3;Zm<ky;){if(xm===0)break e;xm--,Em+=X0[j0++]<<Zm,Zm+=8}Em>>>=Fg,Zm-=Fg,lg=0,$1=3+(7&Em),Em>>>=3,Zm-=3}else{for(ky=Fg+7;Zm<ky;){if(xm===0)break e;xm--,Em+=X0[j0++]<<Zm,Zm+=8}Em>>>=Fg,Zm-=Fg,lg=0,$1=11+(127&Em),Em>>>=7,Zm-=7}if(bt.have+$1>bt.nlen+bt.ndist){Ue.msg="invalid bit length repeat",bt.mode=Q0;break}for(;$1--;)bt.lens[bt.have++]=lg}}if(bt.mode===Q0)break;if(bt.lens[256]===0){Ue.msg="invalid code -- missing end-of-block",bt.mode=Q0;break}if(bt.lenbits=9,gv={bits:bt.lenbits},mv=K(1,bt.lens,0,bt.nlen,bt.lencode,0,bt.work,gv),bt.lenbits=gv.bits,mv){Ue.msg="invalid literal/lengths set",bt.mode=Q0;break}if(bt.distbits=6,bt.distcode=bt.distdyn,gv={bits:bt.distbits},mv=K(2,bt.lens,bt.nlen,bt.ndist,bt.distcode,0,bt.work,gv),bt.distbits=gv.bits,mv){Ue.msg="invalid distances set",bt.mode=Q0;break}if(bt.mode=D0,jp===lt)break e;case D0:bt.mode=E0;case E0:if(xm>=6&&V1>=258){Ue.next_out=Ym,Ue.avail_out=V1,Ue.next_in=j0,Ue.avail_in=xm,bt.hold=Em,bt.bits=Zm,G1(Ue,Sg),Ym=Ue.next_out,G0=Ue.output,V1=Ue.avail_out,j0=Ue.next_in,X0=Ue.input,xm=Ue.avail_in,Em=bt.hold,Zm=bt.bits,bt.mode===Vp&&(bt.back=-1);break}for(bt.back=0;Kg=bt.lencode[Em&(1<<bt.lenbits)-1],Fg=Kg>>>24,kv=Kg>>>16&255,Jg=65535&Kg,!(Fg<=Zm);){if(xm===0)break e;xm--,Em+=X0[j0++]<<Zm,Zm+=8}if(kv&&!(240&kv)){for(ig=Fg,Gg=kv,Rv=Jg;Kg=bt.lencode[Rv+((Em&(1<<ig+Gg)-1)>>ig)],Fg=Kg>>>24,kv=Kg>>>16&255,Jg=65535&Kg,!(ig+Fg<=Zm);){if(xm===0)break e;xm--,Em+=X0[j0++]<<Zm,Zm+=8}Em>>>=ig,Zm-=ig,bt.back+=ig}if(Em>>>=Fg,Zm-=Fg,bt.back+=Fg,bt.length=Jg,kv===0){bt.mode=16205;break}if(32&kv){bt.back=-1,bt.mode=Vp;break}if(64&kv){Ue.msg="invalid literal/length code",bt.mode=Q0;break}bt.extra=15&kv,bt.mode=16201;case 16201:if(bt.extra){for(ky=bt.extra;Zm<ky;){if(xm===0)break e;xm--,Em+=X0[j0++]<<Zm,Zm+=8}bt.length+=Em&(1<<bt.extra)-1,Em>>>=bt.extra,Zm-=bt.extra,bt.back+=bt.extra}bt.was=bt.length,bt.mode=16202;case 16202:for(;Kg=bt.distcode[Em&(1<<bt.distbits)-1],Fg=Kg>>>24,kv=Kg>>>16&255,Jg=65535&Kg,!(Fg<=Zm);){if(xm===0)break e;xm--,Em+=X0[j0++]<<Zm,Zm+=8}if(!(240&kv)){for(ig=Fg,Gg=kv,Rv=Jg;Kg=bt.distcode[Rv+((Em&(1<<ig+Gg)-1)>>ig)],Fg=Kg>>>24,kv=Kg>>>16&255,Jg=65535&Kg,!(ig+Fg<=Zm);){if(xm===0)break e;xm--,Em+=X0[j0++]<<Zm,Zm+=8}Em>>>=ig,Zm-=ig,bt.back+=ig}if(Em>>>=Fg,Zm-=Fg,bt.back+=Fg,64&kv){Ue.msg="invalid distance code",bt.mode=Q0;break}bt.offset=Jg,bt.extra=15&kv,bt.mode=16203;case 16203:if(bt.extra){for(ky=bt.extra;Zm<ky;){if(xm===0)break e;xm--,Em+=X0[j0++]<<Zm,Zm+=8}bt.offset+=Em&(1<<bt.extra)-1,Em>>>=bt.extra,Zm-=bt.extra,bt.back+=bt.extra}if(bt.offset>bt.dmax){Ue.msg="invalid distance too far back",bt.mode=Q0;break}bt.mode=16204;case 16204:if(V1===0)break e;if($1=Sg-V1,bt.offset>$1){if($1=bt.offset-$1,$1>bt.whave&&bt.sane){Ue.msg="invalid distance too far back",bt.mode=Q0;break}$1>bt.wnext?($1-=bt.wnext,ly=bt.wsize-$1):ly=bt.wnext-$1,$1>bt.length&&($1=bt.length),bv=bt.window}else bv=G0,ly=Ym-bt.offset,$1=bt.length;$1>V1&&($1=V1),V1-=$1,bt.length-=$1;do G0[Ym++]=bv[ly++];while(--$1);bt.length===0&&(bt.mode=E0);break;case 16205:if(V1===0)break e;G0[Ym++]=bt.length,V1--,bt.mode=E0;break;case H0:if(bt.wrap){for(;Zm<32;){if(xm===0)break e;xm--,Em|=X0[j0++]<<Zm,Zm+=8}if(Sg-=V1,Ue.total_out+=Sg,bt.total+=Sg,4&bt.wrap&&Sg&&(Ue.adler=bt.check=bt.flags?v0(bt.check,G0,Sg,Ym-Sg):u0(bt.check,G0,Sg,Ym-Sg)),Sg=V1,4&bt.wrap&&(bt.flags?Em:lm(Em))!==bt.check){Ue.msg="incorrect data check",bt.mode=Q0;break}Em=0,Zm=0}bt.mode=16207;case 16207:if(bt.wrap&&bt.flags){for(;Zm<32;){if(xm===0)break e;xm--,Em+=X0[j0++]<<Zm,Zm+=8}if(4&bt.wrap&&Em!==(4294967295&bt.total)){Ue.msg="incorrect length check",bt.mode=Q0;break}Em=0,Zm=0}bt.mode=16208;case 16208:mv=Ht;break e;case Q0:mv=Er;break e;case 16210:return Np;default:return Zt}return Ue.next_out=Ym,Ue.avail_out=V1,Ue.next_in=j0,Ue.avail_in=xm,bt.hold=Em,bt.bits=Zm,(bt.wsize||Sg!==Ue.avail_out&&bt.mode<Q0&&(bt.mode<H0||jp!==ne))&&Hm(Ue,Ue.output,Ue.next_out,Sg-Ue.avail_out),qg-=Ue.avail_in,Sg-=Ue.avail_out,Ue.total_in+=qg,Ue.total_out+=Sg,bt.total+=Sg,4&bt.wrap&&Sg&&(Ue.adler=bt.check=bt.flags?v0(bt.check,G0,Sg,Ue.next_out-Sg):u0(bt.check,G0,Sg,Ue.next_out-Sg)),Ue.data_type=bt.bits+(bt.last?64:0)+(bt.mode===Vp?128:0)+(bt.mode===D0||bt.mode===r0?256:0),(qg===0&&Sg===0||jp===ne)&&mv===Pt&&(mv=Zo),mv},inflateEnd:Ue=>{if(q0(Ue))return Zt;let jp=Ue.state;return jp.window&&(jp.window=null),Ue.state=null,Pt},inflateGetHeader:(Ue,jp)=>{if(q0(Ue))return Zt;const bt=Ue.state;return 2&bt.wrap?(bt.head=jp,jp.done=!1,Pt):Zt},inflateSetDictionary:(Ue,jp)=>{const bt=jp.length;let X0,G0,j0;return q0(Ue)?Zt:(X0=Ue.state,X0.wrap!==0&&X0.mode!==wp?Zt:X0.mode===wp&&(G0=1,G0=u0(G0,jp,bt,0),G0!==X0.check)?Er:(j0=Hm(Ue,jp,bt,bt),j0?(X0.mode=16210,Np):(X0.havedict=1,Pt)))},inflateInfo:"pako inflate (from Nodeca project)"},Y1=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const d1=Object.prototype.toString,{Z_NO_FLUSH:q1,Z_FINISH:Z1,Z_OK:x1,Z_STREAM_END:ag,Z_NEED_DICT:Og,Z_STREAM_ERROR:eg,Z_DATA_ERROR:C1,Z_MEM_ERROR:Bg}=rm;function xg(Ue){this.options=Pv({chunkSize:65536,windowBits:15,to:""},Ue||{});const jp=this.options;jp.raw&&jp.windowBits>=0&&jp.windowBits<16&&(jp.windowBits=-jp.windowBits,jp.windowBits===0&&(jp.windowBits=-15)),!(jp.windowBits>=0&&jp.windowBits<16)||Ue&&Ue.windowBits||(jp.windowBits+=32),jp.windowBits>15&&jp.windowBits<48&&(15&jp.windowBits||(jp.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new m0,this.strm.avail_out=0;let bt=t1.inflateInit2(this.strm,jp.windowBits);if(bt!==x1)throw new Error(p0[bt]);if(this.header=new Y1,t1.inflateGetHeader(this.strm,this.header),jp.dictionary&&(typeof jp.dictionary=="string"?jp.dictionary=t0(jp.dictionary):d1.call(jp.dictionary)==="[object ArrayBuffer]"&&(jp.dictionary=new Uint8Array(jp.dictionary)),jp.raw&&(bt=t1.inflateSetDictionary(this.strm,jp.dictionary),bt!==x1)))throw new Error(p0[bt])}function Ig(Ue,jp){const bt=new xg(jp);if(bt.push(Ue),bt.err)throw bt.msg||p0[bt.err];return bt.result}xg.prototype.push=function(Ue,jp){const bt=this.strm,X0=this.options.chunkSize,G0=this.options.dictionary;let j0,Ym,xm;if(this.ended)return!1;for(Ym=jp===~~jp?jp:jp===!0?Z1:q1,d1.call(Ue)==="[object ArrayBuffer]"?bt.input=new Uint8Array(Ue):bt.input=Ue,bt.next_in=0,bt.avail_in=bt.input.length;;){for(bt.avail_out===0&&(bt.output=new Uint8Array(X0),bt.next_out=0,bt.avail_out=X0),j0=t1.inflate(bt,Ym),j0===Og&&G0&&(j0=t1.inflateSetDictionary(bt,G0),j0===x1?j0=t1.inflate(bt,Ym):j0===C1&&(j0=Og));bt.avail_in>0&&j0===ag&&bt.state.wrap>0&&Ue[bt.next_in]!==0;)t1.inflateReset(bt),j0=t1.inflate(bt,Ym);switch(j0){case eg:case C1:case Og:case Bg:return this.onEnd(j0),this.ended=!0,!1}if(xm=bt.avail_out,bt.next_out&&(bt.avail_out===0||j0===ag))if(this.options.to==="string"){let V1=a0(bt.output,bt.next_out),Em=bt.next_out-V1,Zm=oa(bt.output,V1);bt.next_out=Em,bt.avail_out=X0-Em,Em&&bt.output.set(bt.output.subarray(V1,V1+Em),0),this.onData(Zm)}else this.onData(bt.output.length===bt.next_out?bt.output:bt.output.subarray(0,bt.next_out));if(j0!==x1||xm!==0){if(j0===ag)return j0=t1.inflateEnd(this.strm),this.onEnd(j0),this.ended=!0,!0;if(bt.avail_in===0)break}}return!0},xg.prototype.onData=function(Ue){this.chunks.push(Ue)},xg.prototype.onEnd=function(Ue){Ue===x1&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Ny(this.chunks)),this.chunks=[],this.err=Ue,this.msg=this.strm.msg};var _g={Inflate:xg,inflate:Ig,inflateRaw:function(Ue,jp){return(jp=jp||{}).raw=!0,Ig(Ue,jp)},ungzip:Ig};const{Deflate:Hg,deflate:vv,deflateRaw:jv,gzip:Uv}=Ag,{Inflate:vy,inflate:ay,inflateRaw:Tv,ungzip:yy}=_g;var ey=Hg,iy=vv,xy=jv,Ly=Uv,_y=vy,Iy=ay,Dv=Tv,Wv=yy,Zv=rm,ty={Deflate:Hg,deflate:vv,deflateRaw:jv,gzip:Uv,Inflate:vy,inflate:ay,inflateRaw:Tv,ungzip:yy,constants:rm}},99:(t,e,r)=>{r.r(e),r.d(e,{Cylinder:()=>l,Sphere:()=>a,Triangle:()=>c});var n=r(529);class a{constructor(v={x:0,y:0,z:0},g=0){this.center=new n.Vector3(v.x,v.y,v.z),this.radius=g}set(v,g){return this.center.copy(v),this.radius=g,this}copy(v){return this.center.copy(v.center),this.radius=v.radius,this}applyMatrix4(v){return this.center.applyMatrix4(v),this.radius=this.radius*v.getMaxScaleOnAxis(),this}translate(v){return this.center.add(v),this}equals(v){return v.center.equals(this.center)&&v.radius===this.radius}clone(){return new a().copy(this)}}let o=new n.Vector3;class l{constructor(v=new n.Vector3,g=new n.Vector3,T=0){this.c1=v,this.c2=g,this.radius=T,this.direction=new n.Vector3().subVectors(this.c2,this.c1).normalize()}copy(v){return this.c1.copy(v.c1),this.c2.copy(v.c2),this.direction.copy(v.direction),this.radius=v.radius,this}lengthSq(){return o.subVectors(this.c2,this.c1).lengthSq()}applyMatrix4(v){return this.direction.add(this.c1).applyMatrix4(v),this.c1.applyMatrix4(v),this.c2.applyMatrix4(v),this.direction.sub(this.c1).normalize(),this.radius=this.radius*v.getMaxScaleOnAxis(),this}}const u=new n.Vector3;class c{constructor(v=new n.Vector3,g=new n.Vector3,T=new n.Vector3){this.a=v,this.b=g,this.c=T}copy(v){return this.a.copy(v.a),this.b.copy(v.b),this.c.copy(v.c),this}applyMatrix4(v){return this.a.applyMatrix4(v),this.b.applyMatrix4(v),this.c.applyMatrix4(v),this}getNormal(){var v=this.a.clone();return v.sub(this.b),u.subVectors(this.c,this.b),v.cross(u),v.normalize(),v}}},107:(t,e,r)=>{var n,a=r(981),o=r(697),l=r(701),u=r(407),c=r(834),h=-2,v=258,g=262,T=103,R=113,W=666;function k(re,$o){return re.msg=c[$o],$o}function J(re){return(re<<1)-(re>4?9:0)}function q(re){for(var $o=re.length;--$o>=0;)re[$o]=0}function Se(re){var $o=re.state,qo=$o.pending;qo>re.avail_out&&(qo=re.avail_out),qo!==0&&(a.arraySet(re.output,$o.pending_buf,$o.pending_out,qo,re.next_out),re.next_out+=qo,$o.pending_out+=qo,re.total_out+=qo,re.avail_out-=qo,$o.pending-=qo,$o.pending===0&&($o.pending_out=0))}function V(re,$o){o._tr_flush_block(re,re.block_start>=0?re.block_start:-1,re.strstart-re.block_start,$o),re.block_start=re.strstart,Se(re.strm)}function Y(re,$o){re.pending_buf[re.pending++]=$o}function ie(re,$o){re.pending_buf[re.pending++]=$o>>>8&255,re.pending_buf[re.pending++]=255&$o}function se(re,$o,qo,Kt){var i0=re.avail_in;return i0>Kt&&(i0=Kt),i0===0?0:(re.avail_in-=i0,a.arraySet($o,re.input,re.next_in,i0,qo),re.state.wrap===1?re.adler=l(re.adler,$o,i0,qo):re.state.wrap===2&&(re.adler=u(re.adler,$o,i0,qo)),re.next_in+=i0,re.total_in+=i0,i0)}function ct(re,$o){var qo,Kt,i0=re.max_chain_length,Up=re.strstart,l0=re.prev_length,y0=re.nice_match,kp=re.strstart>re.w_size-g?re.strstart-(re.w_size-g):0,u0=re.window,f0=re.w_mask,v0=re.prev,p0=re.strstart+v,rm=u0[Up+l0-1],am=u0[Up+l0];re.prev_length>=re.good_match&&(i0>>=2),y0>re.lookahead&&(y0=re.lookahead);do if(u0[(qo=$o)+l0]===am&&u0[qo+l0-1]===rm&&u0[qo]===u0[Up]&&u0[++qo]===u0[Up+1]){Up+=2,qo++;do;while(u0[++Up]===u0[++qo]&&u0[++Up]===u0[++qo]&&u0[++Up]===u0[++qo]&&u0[++Up]===u0[++qo]&&u0[++Up]===u0[++qo]&&u0[++Up]===u0[++qo]&&u0[++Up]===u0[++qo]&&u0[++Up]===u0[++qo]&&Up<p0);if(Kt=v-(p0-Up),Up=p0-v,Kt>l0){if(re.match_start=$o,l0=Kt,Kt>=y0)break;rm=u0[Up+l0-1],am=u0[Up+l0]}}while(($o=v0[$o&f0])>kp&&--i0!==0);return l0<=re.lookahead?l0:re.lookahead}function ae(re){var $o,qo,Kt,i0,Up,l0=re.w_size;do{if(i0=re.window_size-re.lookahead-re.strstart,re.strstart>=l0+(l0-g)){a.arraySet(re.window,re.window,l0,l0,0),re.match_start-=l0,re.strstart-=l0,re.block_start-=l0,$o=qo=re.hash_size;do Kt=re.head[--$o],re.head[$o]=Kt>=l0?Kt-l0:0;while(--qo);$o=qo=l0;do Kt=re.prev[--$o],re.prev[$o]=Kt>=l0?Kt-l0:0;while(--qo);i0+=l0}if(re.strm.avail_in===0)break;if(qo=se(re.strm,re.window,re.strstart+re.lookahead,i0),re.lookahead+=qo,re.lookahead+re.insert>=3)for(Up=re.strstart-re.insert,re.ins_h=re.window[Up],re.ins_h=(re.ins_h<<re.hash_shift^re.window[Up+1])&re.hash_mask;re.insert&&(re.ins_h=(re.ins_h<<re.hash_shift^re.window[Up+3-1])&re.hash_mask,re.prev[Up&re.w_mask]=re.head[re.ins_h],re.head[re.ins_h]=Up,Up++,re.insert--,!(re.lookahead+re.insert<3)););}while(re.lookahead<g&&re.strm.avail_in!==0)}function st(re,$o){for(var qo,Kt;;){if(re.lookahead<g){if(ae(re),re.lookahead<g&&$o===0)return 1;if(re.lookahead===0)break}if(qo=0,re.lookahead>=3&&(re.ins_h=(re.ins_h<<re.hash_shift^re.window[re.strstart+3-1])&re.hash_mask,qo=re.prev[re.strstart&re.w_mask]=re.head[re.ins_h],re.head[re.ins_h]=re.strstart),qo!==0&&re.strstart-qo<=re.w_size-g&&(re.match_length=ct(re,qo)),re.match_length>=3)if(Kt=o._tr_tally(re,re.strstart-re.match_start,re.match_length-3),re.lookahead-=re.match_length,re.match_length<=re.max_lazy_match&&re.lookahead>=3){re.match_length--;do re.strstart++,re.ins_h=(re.ins_h<<re.hash_shift^re.window[re.strstart+3-1])&re.hash_mask,qo=re.prev[re.strstart&re.w_mask]=re.head[re.ins_h],re.head[re.ins_h]=re.strstart;while(--re.match_length!==0);re.strstart++}else re.strstart+=re.match_length,re.match_length=0,re.ins_h=re.window[re.strstart],re.ins_h=(re.ins_h<<re.hash_shift^re.window[re.strstart+1])&re.hash_mask;else Kt=o._tr_tally(re,0,re.window[re.strstart]),re.lookahead--,re.strstart++;if(Kt&&(V(re,!1),re.strm.avail_out===0))return 1}return re.insert=re.strstart<2?re.strstart:2,$o===4?(V(re,!0),re.strm.avail_out===0?3:4):re.last_lit&&(V(re,!1),re.strm.avail_out===0)?1:2}function Ct(re,$o){for(var qo,Kt,i0;;){if(re.lookahead<g){if(ae(re),re.lookahead<g&&$o===0)return 1;if(re.lookahead===0)break}if(qo=0,re.lookahead>=3&&(re.ins_h=(re.ins_h<<re.hash_shift^re.window[re.strstart+3-1])&re.hash_mask,qo=re.prev[re.strstart&re.w_mask]=re.head[re.ins_h],re.head[re.ins_h]=re.strstart),re.prev_length=re.match_length,re.prev_match=re.match_start,re.match_length=2,qo!==0&&re.prev_length<re.max_lazy_match&&re.strstart-qo<=re.w_size-g&&(re.match_length=ct(re,qo),re.match_length<=5&&(re.strategy===1||re.match_length===3&&re.strstart-re.match_start>4096)&&(re.match_length=2)),re.prev_length>=3&&re.match_length<=re.prev_length){i0=re.strstart+re.lookahead-3,Kt=o._tr_tally(re,re.strstart-1-re.prev_match,re.prev_length-3),re.lookahead-=re.prev_length-1,re.prev_length-=2;do++re.strstart<=i0&&(re.ins_h=(re.ins_h<<re.hash_shift^re.window[re.strstart+3-1])&re.hash_mask,qo=re.prev[re.strstart&re.w_mask]=re.head[re.ins_h],re.head[re.ins_h]=re.strstart);while(--re.prev_length!==0);if(re.match_available=0,re.match_length=2,re.strstart++,Kt&&(V(re,!1),re.strm.avail_out===0))return 1}else if(re.match_available){if((Kt=o._tr_tally(re,0,re.window[re.strstart-1]))&&V(re,!1),re.strstart++,re.lookahead--,re.strm.avail_out===0)return 1}else re.match_available=1,re.strstart++,re.lookahead--}return re.match_available&&(Kt=o._tr_tally(re,0,re.window[re.strstart-1]),re.match_available=0),re.insert=re.strstart<2?re.strstart:2,$o===4?(V(re,!0),re.strm.avail_out===0?3:4):re.last_lit&&(V(re,!1),re.strm.avail_out===0)?1:2}function $t(re,$o,qo,Kt,i0){this.good_length=re,this.max_lazy=$o,this.nice_length=qo,this.max_chain=Kt,this.func=i0}function jo(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new a.Buf16(1146),this.dyn_dtree=new a.Buf16(122),this.bl_tree=new a.Buf16(78),q(this.dyn_ltree),q(this.dyn_dtree),q(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new a.Buf16(16),this.heap=new a.Buf16(573),q(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new a.Buf16(573),q(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Lp(re){var $o;return re&&re.state?(re.total_in=re.total_out=0,re.data_type=2,($o=re.state).pending=0,$o.pending_out=0,$o.wrap<0&&($o.wrap=-$o.wrap),$o.status=$o.wrap?42:R,re.adler=$o.wrap===2?0:1,$o.last_flush=0,o._tr_init($o),0):k(re,h)}function Mn(re){var $o,qo=Lp(re);return qo===0&&(($o=re.state).window_size=2*$o.w_size,q($o.head),$o.max_lazy_match=n[$o.level].max_lazy,$o.good_match=n[$o.level].good_length,$o.nice_match=n[$o.level].nice_length,$o.max_chain_length=n[$o.level].max_chain,$o.strstart=0,$o.block_start=0,$o.lookahead=0,$o.insert=0,$o.match_length=$o.prev_length=2,$o.match_available=0,$o.ins_h=0),qo}function sa(re,$o,qo,Kt,i0,Up){if(!re)return h;var l0=1;if($o===-1&&($o=6),Kt<0?(l0=0,Kt=-Kt):Kt>15&&(l0=2,Kt-=16),i0<1||i0>9||qo!==8||Kt<8||Kt>15||$o<0||$o>9||Up<0||Up>4)return k(re,h);Kt===8&&(Kt=9);var y0=new jo;return re.state=y0,y0.strm=re,y0.wrap=l0,y0.gzhead=null,y0.w_bits=Kt,y0.w_size=1<<y0.w_bits,y0.w_mask=y0.w_size-1,y0.hash_bits=i0+7,y0.hash_size=1<<y0.hash_bits,y0.hash_mask=y0.hash_size-1,y0.hash_shift=~~((y0.hash_bits+3-1)/3),y0.window=new a.Buf8(2*y0.w_size),y0.head=new a.Buf16(y0.hash_size),y0.prev=new a.Buf16(y0.w_size),y0.lit_bufsize=1<<i0+6,y0.pending_buf_size=4*y0.lit_bufsize,y0.pending_buf=new a.Buf8(y0.pending_buf_size),y0.d_buf=1*y0.lit_bufsize,y0.l_buf=3*y0.lit_bufsize,y0.level=$o,y0.strategy=Up,y0.method=qo,Mn(re)}n=[new $t(0,0,0,0,function(re,$o){var qo=65535;for(qo>re.pending_buf_size-5&&(qo=re.pending_buf_size-5);;){if(re.lookahead<=1){if(ae(re),re.lookahead===0&&$o===0)return 1;if(re.lookahead===0)break}re.strstart+=re.lookahead,re.lookahead=0;var Kt=re.block_start+qo;if((re.strstart===0||re.strstart>=Kt)&&(re.lookahead=re.strstart-Kt,re.strstart=Kt,V(re,!1),re.strm.avail_out===0)||re.strstart-re.block_start>=re.w_size-g&&(V(re,!1),re.strm.avail_out===0))return 1}return re.insert=0,$o===4?(V(re,!0),re.strm.avail_out===0?3:4):(re.strstart>re.block_start&&(V(re,!1),re.strm.avail_out),1)}),new $t(4,4,8,4,st),new $t(4,5,16,8,st),new $t(4,6,32,32,st),new $t(4,4,16,16,Ct),new $t(8,16,32,32,Ct),new $t(8,16,128,128,Ct),new $t(8,32,128,256,Ct),new $t(32,128,258,1024,Ct),new $t(32,258,258,4096,Ct)],e.deflateInit=function(re,$o){return sa(re,$o,8,15,8,0)},e.deflateInit2=sa,e.deflateReset=Mn,e.deflateResetKeep=Lp,e.deflateSetHeader=function(re,$o){return re&&re.state?re.state.wrap!==2?h:(re.state.gzhead=$o,0):h},e.deflate=function(re,$o){var qo,Kt,i0,Up;if(!re||!re.state||$o>5||$o<0)return re?k(re,h):h;if(Kt=re.state,!re.output||!re.input&&re.avail_in!==0||Kt.status===W&&$o!==4)return k(re,re.avail_out===0?-5:h);if(Kt.strm=re,qo=Kt.last_flush,Kt.last_flush=$o,Kt.status===42)if(Kt.wrap===2)re.adler=0,Y(Kt,31),Y(Kt,139),Y(Kt,8),Kt.gzhead?(Y(Kt,(Kt.gzhead.text?1:0)+(Kt.gzhead.hcrc?2:0)+(Kt.gzhead.extra?4:0)+(Kt.gzhead.name?8:0)+(Kt.gzhead.comment?16:0)),Y(Kt,255&Kt.gzhead.time),Y(Kt,Kt.gzhead.time>>8&255),Y(Kt,Kt.gzhead.time>>16&255),Y(Kt,Kt.gzhead.time>>24&255),Y(Kt,Kt.level===9?2:Kt.strategy>=2||Kt.level<2?4:0),Y(Kt,255&Kt.gzhead.os),Kt.gzhead.extra&&Kt.gzhead.extra.length&&(Y(Kt,255&Kt.gzhead.extra.length),Y(Kt,Kt.gzhead.extra.length>>8&255)),Kt.gzhead.hcrc&&(re.adler=u(re.adler,Kt.pending_buf,Kt.pending,0)),Kt.gzindex=0,Kt.status=69):(Y(Kt,0),Y(Kt,0),Y(Kt,0),Y(Kt,0),Y(Kt,0),Y(Kt,Kt.level===9?2:Kt.strategy>=2||Kt.level<2?4:0),Y(Kt,3),Kt.status=R);else{var l0=8+(Kt.w_bits-8<<4)<<8;l0|=(Kt.strategy>=2||Kt.level<2?0:Kt.level<6?1:Kt.level===6?2:3)<<6,Kt.strstart!==0&&(l0|=32),l0+=31-l0%31,Kt.status=R,ie(Kt,l0),Kt.strstart!==0&&(ie(Kt,re.adler>>>16),ie(Kt,65535&re.adler)),re.adler=1}if(Kt.status===69)if(Kt.gzhead.extra){for(i0=Kt.pending;Kt.gzindex<(65535&Kt.gzhead.extra.length)&&(Kt.pending!==Kt.pending_buf_size||(Kt.gzhead.hcrc&&Kt.pending>i0&&(re.adler=u(re.adler,Kt.pending_buf,Kt.pending-i0,i0)),Se(re),i0=Kt.pending,Kt.pending!==Kt.pending_buf_size));)Y(Kt,255&Kt.gzhead.extra[Kt.gzindex]),Kt.gzindex++;Kt.gzhead.hcrc&&Kt.pending>i0&&(re.adler=u(re.adler,Kt.pending_buf,Kt.pending-i0,i0)),Kt.gzindex===Kt.gzhead.extra.length&&(Kt.gzindex=0,Kt.status=73)}else Kt.status=73;if(Kt.status===73)if(Kt.gzhead.name){i0=Kt.pending;do{if(Kt.pending===Kt.pending_buf_size&&(Kt.gzhead.hcrc&&Kt.pending>i0&&(re.adler=u(re.adler,Kt.pending_buf,Kt.pending-i0,i0)),Se(re),i0=Kt.pending,Kt.pending===Kt.pending_buf_size)){Up=1;break}Up=Kt.gzindex<Kt.gzhead.name.length?255&Kt.gzhead.name.charCodeAt(Kt.gzindex++):0,Y(Kt,Up)}while(Up!==0);Kt.gzhead.hcrc&&Kt.pending>i0&&(re.adler=u(re.adler,Kt.pending_buf,Kt.pending-i0,i0)),Up===0&&(Kt.gzindex=0,Kt.status=91)}else Kt.status=91;if(Kt.status===91)if(Kt.gzhead.comment){i0=Kt.pending;do{if(Kt.pending===Kt.pending_buf_size&&(Kt.gzhead.hcrc&&Kt.pending>i0&&(re.adler=u(re.adler,Kt.pending_buf,Kt.pending-i0,i0)),Se(re),i0=Kt.pending,Kt.pending===Kt.pending_buf_size)){Up=1;break}Up=Kt.gzindex<Kt.gzhead.comment.length?255&Kt.gzhead.comment.charCodeAt(Kt.gzindex++):0,Y(Kt,Up)}while(Up!==0);Kt.gzhead.hcrc&&Kt.pending>i0&&(re.adler=u(re.adler,Kt.pending_buf,Kt.pending-i0,i0)),Up===0&&(Kt.status=T)}else Kt.status=T;if(Kt.status===T&&(Kt.gzhead.hcrc?(Kt.pending+2>Kt.pending_buf_size&&Se(re),Kt.pending+2<=Kt.pending_buf_size&&(Y(Kt,255&re.adler),Y(Kt,re.adler>>8&255),re.adler=0,Kt.status=R)):Kt.status=R),Kt.pending!==0){if(Se(re),re.avail_out===0)return Kt.last_flush=-1,0}else if(re.avail_in===0&&J($o)<=J(qo)&&$o!==4)return k(re,-5);if(Kt.status===W&&re.avail_in!==0)return k(re,-5);if(re.avail_in!==0||Kt.lookahead!==0||$o!==0&&Kt.status!==W){var y0=Kt.strategy===2?(function(kp,u0){for(var f0;;){if(kp.lookahead===0&&(ae(kp),kp.lookahead===0)){if(u0===0)return 1;break}if(kp.match_length=0,f0=o._tr_tally(kp,0,kp.window[kp.strstart]),kp.lookahead--,kp.strstart++,f0&&(V(kp,!1),kp.strm.avail_out===0))return 1}return kp.insert=0,u0===4?(V(kp,!0),kp.strm.avail_out===0?3:4):kp.last_lit&&(V(kp,!1),kp.strm.avail_out===0)?1:2})(Kt,$o):Kt.strategy===3?(function(kp,u0){for(var f0,v0,p0,rm,am=kp.window;;){if(kp.lookahead<=v){if(ae(kp),kp.lookahead<=v&&u0===0)return 1;if(kp.lookahead===0)break}if(kp.match_length=0,kp.lookahead>=3&&kp.strstart>0&&(v0=am[p0=kp.strstart-1])===am[++p0]&&v0===am[++p0]&&v0===am[++p0]){rm=kp.strstart+v;do;while(v0===am[++p0]&&v0===am[++p0]&&v0===am[++p0]&&v0===am[++p0]&&v0===am[++p0]&&v0===am[++p0]&&v0===am[++p0]&&v0===am[++p0]&&p0<rm);kp.match_length=v-(rm-p0),kp.match_length>kp.lookahead&&(kp.match_length=kp.lookahead)}if(kp.match_length>=3?(f0=o._tr_tally(kp,1,kp.match_length-3),kp.lookahead-=kp.match_length,kp.strstart+=kp.match_length,kp.match_length=0):(f0=o._tr_tally(kp,0,kp.window[kp.strstart]),kp.lookahead--,kp.strstart++),f0&&(V(kp,!1),kp.strm.avail_out===0))return 1}return kp.insert=0,u0===4?(V(kp,!0),kp.strm.avail_out===0?3:4):kp.last_lit&&(V(kp,!1),kp.strm.avail_out===0)?1:2})(Kt,$o):n[Kt.level].func(Kt,$o);if(y0!==3&&y0!==4||(Kt.status=W),y0===1||y0===3)return re.avail_out===0&&(Kt.last_flush=-1),0;if(y0===2&&($o===1?o._tr_align(Kt):$o!==5&&(o._tr_stored_block(Kt,0,0,!1),$o===3&&(q(Kt.head),Kt.lookahead===0&&(Kt.strstart=0,Kt.block_start=0,Kt.insert=0))),Se(re),re.avail_out===0))return Kt.last_flush=-1,0}return $o!==4?0:Kt.wrap<=0?1:(Kt.wrap===2?(Y(Kt,255&re.adler),Y(Kt,re.adler>>8&255),Y(Kt,re.adler>>16&255),Y(Kt,re.adler>>24&255),Y(Kt,255&re.total_in),Y(Kt,re.total_in>>8&255),Y(Kt,re.total_in>>16&255),Y(Kt,re.total_in>>24&255)):(ie(Kt,re.adler>>>16),ie(Kt,65535&re.adler)),Se(re),Kt.wrap>0&&(Kt.wrap=-Kt.wrap),Kt.pending!==0?0:1)},e.deflateEnd=function(re){var $o;return re&&re.state?($o=re.state.status)!==42&&$o!==69&&$o!==73&&$o!==91&&$o!==T&&$o!==R&&$o!==W?k(re,h):(re.state=null,$o===R?k(re,-3):0):h},e.deflateSetDictionary=function(re,$o){var qo,Kt,i0,Up,l0,y0,kp,u0,f0=$o.length;if(!re||!re.state||(Up=(qo=re.state).wrap)===2||Up===1&&qo.status!==42||qo.lookahead)return h;for(Up===1&&(re.adler=l(re.adler,$o,f0,0)),qo.wrap=0,f0>=qo.w_size&&(Up===0&&(q(qo.head),qo.strstart=0,qo.block_start=0,qo.insert=0),u0=new a.Buf8(qo.w_size),a.arraySet(u0,$o,f0-qo.w_size,qo.w_size,0),$o=u0,f0=qo.w_size),l0=re.avail_in,y0=re.next_in,kp=re.input,re.avail_in=f0,re.next_in=0,re.input=$o,ae(qo);qo.lookahead>=3;){Kt=qo.strstart,i0=qo.lookahead-2;do qo.ins_h=(qo.ins_h<<qo.hash_shift^qo.window[Kt+3-1])&qo.hash_mask,qo.prev[Kt&qo.w_mask]=qo.head[qo.ins_h],qo.head[qo.ins_h]=Kt,Kt++;while(--i0);qo.strstart=Kt,qo.lookahead=2,ae(qo)}return qo.strstart+=qo.lookahead,qo.block_start=qo.strstart,qo.insert=qo.lookahead,qo.lookahead=0,qo.match_length=qo.prev_length=2,qo.match_available=0,re.next_in=y0,re.input=kp,re.avail_in=l0,qo.wrap=Up,0},e.deflateInfo="pako deflate (from Nodeca project)"},111:(t,e,r)=>{var n;n={},t.exports=n,(function(a,o){a.toRGBA8=function(l){var u=l.width,c=l.height;if(l.tabs.acTL==null)return[a.toRGBA8.decodeImage(l.data,u,c,l).buffer];var h=[];l.frames[0].data==null&&(l.frames[0].data=l.data);for(var v,g=new Uint8Array(u*c*4),T=0;T<l.frames.length;T++){var R=l.frames[T],W=R.rect.x,k=R.rect.y,J=R.rect.width,q=R.rect.height,Se=a.toRGBA8.decodeImage(R.data,J,q,l);if(T==0?v=Se:R.blend==0?a._copyTile(Se,J,q,v,u,c,W,k,0):R.blend==1&&a._copyTile(Se,J,q,v,u,c,W,k,1),h.push(v.buffer),v=v.slice(0),R.dispose!=0){if(R.dispose==1)a._copyTile(g,J,q,v,u,c,W,k,0);else if(R.dispose==2){for(var V=T-1;l.frames[V].dispose==2;)V--;v=new Uint8Array(h[V]).slice(0)}}}return h},a.toRGBA8.decodeImage=function(l,u,c,h){var v=u*c,g=a.decode._getBPP(h),T=Math.ceil(u*g/8),R=new Uint8Array(4*v),W=new Uint32Array(R.buffer),k=h.ctype,J=h.depth,q=a._bin.readUshort;if(k==6){var Se=v<<2;if(J==8)for(var V=0;V<Se;V++)R[V]=l[V];if(J==16)for(V=0;V<Se;V++)R[V]=l[V<<1]}else if(k==2){var Y=h.tabs.tRNS,ie=-1,se=-1,ct=-1;if(Y&&(ie=Y[0],se=Y[1],ct=Y[2]),J==8)for(V=0;V<v;V++){var ae=3*V;R[sa=V<<2]=l[ae],R[sa+1]=l[ae+1],R[sa+2]=l[ae+2],R[sa+3]=255,ie!=-1&&l[ae]==ie&&l[ae+1]==se&&l[ae+2]==ct&&(R[sa+3]=0)}if(J==16)for(V=0;V<v;V++)ae=6*V,R[sa=V<<2]=l[ae],R[sa+1]=l[ae+2],R[sa+2]=l[ae+4],R[sa+3]=255,ie!=-1&&q(l,ae)==ie&&q(l,ae+2)==se&&q(l,ae+4)==ct&&(R[sa+3]=0)}else if(k==3){var st=h.tabs.PLTE,Ct=h.tabs.tRNS,$t=Ct?Ct.length:0;if(J==1)for(var jo=0;jo<c;jo++){var Lp=jo*T,Mn=jo*u;for(V=0;V<u;V++){var sa=Mn+V<<2,re=3*($o=l[Lp+(V>>3)]>>7-(7&V)&1);R[sa]=st[re],R[sa+1]=st[re+1],R[sa+2]=st[re+2],R[sa+3]=$o<$t?Ct[$o]:255}}if(J==2)for(jo=0;jo<c;jo++)for(Lp=jo*T,Mn=jo*u,V=0;V<u;V++)sa=Mn+V<<2,re=3*($o=l[Lp+(V>>2)]>>6-((3&V)<<1)&3),R[sa]=st[re],R[sa+1]=st[re+1],R[sa+2]=st[re+2],R[sa+3]=$o<$t?Ct[$o]:255;if(J==4)for(jo=0;jo<c;jo++)for(Lp=jo*T,Mn=jo*u,V=0;V<u;V++)sa=Mn+V<<2,re=3*($o=l[Lp+(V>>1)]>>4-((1&V)<<2)&15),R[sa]=st[re],R[sa+1]=st[re+1],R[sa+2]=st[re+2],R[sa+3]=$o<$t?Ct[$o]:255;if(J==8)for(V=0;V<v;V++){var $o;sa=V<<2,re=3*($o=l[V]),R[sa]=st[re],R[sa+1]=st[re+1],R[sa+2]=st[re+2],R[sa+3]=$o<$t?Ct[$o]:255}}else if(k==4){if(J==8)for(V=0;V<v;V++){sa=V<<2;var qo=l[Kt=V<<1];R[sa]=qo,R[sa+1]=qo,R[sa+2]=qo,R[sa+3]=l[Kt+1]}if(J==16)for(V=0;V<v;V++){var Kt;sa=V<<2,qo=l[Kt=V<<2],R[sa]=qo,R[sa+1]=qo,R[sa+2]=qo,R[sa+3]=l[Kt+2]}}else if(k==0){if(ie=h.tabs.tRNS?h.tabs.tRNS:-1,J==1)for(V=0;V<v;V++){var i0=(qo=255*(l[V>>3]>>7-(7&V)&1))==255*ie?0:255;W[V]=i0<<24|qo<<16|qo<<8|qo}if(J==2)for(V=0;V<v;V++)i0=(qo=85*(l[V>>2]>>6-((3&V)<<1)&3))==85*ie?0:255,W[V]=i0<<24|qo<<16|qo<<8|qo;if(J==4)for(V=0;V<v;V++)i0=(qo=17*(l[V>>1]>>4-((1&V)<<2)&15))==17*ie?0:255,W[V]=i0<<24|qo<<16|qo<<8|qo;if(J==8)for(V=0;V<v;V++)i0=(qo=l[V])==ie?0:255,W[V]=i0<<24|qo<<16|qo<<8|qo;if(J==16)for(V=0;V<v;V++)qo=l[V<<1],i0=q(l,V<<1)==ie?0:255,W[V]=i0<<24|qo<<16|qo<<8|qo}return R},a.decode=function(l){for(var u,c=new Uint8Array(l),h=8,v=a._bin,g=v.readUshort,T=v.readUint,R={tabs:{},frames:[]},W=new Uint8Array(c.length),k=0,J=0,q=[137,80,78,71,13,10,26,10],Se=0;Se<8;Se++)if(c[Se]!=q[Se])throw"The input is not a PNG file!";for(;h<c.length;){var V=v.readUint(c,h);h+=4;var Y=v.readASCII(c,h,4);if(h+=4,Y=="IHDR")a.decode._IHDR(c,h,R);else if(Y=="IDAT"){for(Se=0;Se<V;Se++)W[k+Se]=c[h+Se];k+=V}else if(Y=="acTL")R.tabs[Y]={num_frames:T(c,h),num_plays:T(c,h+4)},u=new Uint8Array(c.length);else if(Y=="fcTL"){J!=0&&((Lp=R.frames[R.frames.length-1]).data=a.decode._decompress(R,u.slice(0,J),Lp.rect.width,Lp.rect.height),J=0);var ie={x:T(c,h+12),y:T(c,h+16),width:T(c,h+4),height:T(c,h+8)},se=g(c,h+22);se=g(c,h+20)/(se==0?100:se);var ct={rect:ie,delay:Math.round(1e3*se),dispose:c[h+24],blend:c[h+25]};R.frames.push(ct)}else if(Y=="fdAT"){for(Se=0;Se<V-4;Se++)u[J+Se]=c[h+Se+4];J+=V-4}else if(Y=="pHYs")R.tabs[Y]=[v.readUint(c,h),v.readUint(c,h+4),c[h+8]];else if(Y=="cHRM")for(R.tabs[Y]=[],Se=0;Se<8;Se++)R.tabs[Y].push(v.readUint(c,h+4*Se));else if(Y=="tEXt"){R.tabs[Y]==null&&(R.tabs[Y]={});var ae=v.nextZero(c,h),st=v.readASCII(c,h,ae-h),Ct=v.readASCII(c,ae+1,h+V-ae-1);R.tabs[Y][st]=Ct}else if(Y=="iTXt"){R.tabs[Y]==null&&(R.tabs[Y]={}),ae=0;var $t=h;ae=v.nextZero(c,$t),st=v.readASCII(c,$t,ae-$t),c[$t=ae+1],c[$t+1],$t+=2,ae=v.nextZero(c,$t),v.readASCII(c,$t,ae-$t),$t=ae+1,ae=v.nextZero(c,$t),v.readUTF8(c,$t,ae-$t),$t=ae+1,Ct=v.readUTF8(c,$t,V-($t-h)),R.tabs[Y][st]=Ct}else if(Y=="PLTE")R.tabs[Y]=v.readBytes(c,h,V);else if(Y=="hIST"){var jo=R.tabs.PLTE.length/3;for(R.tabs[Y]=[],Se=0;Se<jo;Se++)R.tabs[Y].push(g(c,h+2*Se))}else if(Y=="tRNS")R.ctype==3?R.tabs[Y]=v.readBytes(c,h,V):R.ctype==0?R.tabs[Y]=g(c,h):R.ctype==2&&(R.tabs[Y]=[g(c,h),g(c,h+2),g(c,h+4)]);else if(Y=="gAMA")R.tabs[Y]=v.readUint(c,h)/1e5;else if(Y=="sRGB")R.tabs[Y]=c[h];else if(Y=="bKGD")R.ctype==0||R.ctype==4?R.tabs[Y]=[g(c,h)]:R.ctype==2||R.ctype==6?R.tabs[Y]=[g(c,h),g(c,h+2),g(c,h+4)]:R.ctype==3&&(R.tabs[Y]=c[h]);else if(Y=="IEND"){var Lp;J!=0&&((Lp=R.frames[R.frames.length-1]).data=a.decode._decompress(R,u.slice(0,J),Lp.rect.width,Lp.rect.height),J=0),R.data=a.decode._decompress(R,W,R.width,R.height);break}h+=V,v.readUint(c,h),h+=4}return delete R.compress,delete R.interlace,delete R.filter,R},a.decode._decompress=function(l,u,c,h){return l.compress==0&&(u=a.decode._inflate(u)),l.interlace==0?u=a.decode._filterZero(u,l,0,c,h):l.interlace==1&&(u=a.decode._readInterlace(u,l)),u},a.decode._inflate=function(l){return o.inflate(l)},a.decode._readInterlace=function(l,u){for(var c=u.width,h=u.height,v=a.decode._getBPP(u),g=v>>3,T=Math.ceil(c*v/8),R=new Uint8Array(h*T),W=0,k=[0,0,4,0,2,0,1],J=[0,4,0,2,0,1,0],q=[8,8,8,4,4,2,2],Se=[8,8,4,4,2,2,1],V=0;V<7;){for(var Y=q[V],ie=Se[V],se=0,ct=0,ae=k[V];ae<h;)ae+=Y,ct++;for(var st=J[V];st<c;)st+=ie,se++;var Ct=Math.ceil(se*v/8);a.decode._filterZero(l,u,W,se,ct);for(var $t=0,jo=k[V];jo<h;){for(var Lp=J[V],Mn=W+$t*Ct<<3;Lp<c;){var sa;if(v==1&&(sa=(sa=l[Mn>>3])>>7-(7&Mn)&1,R[jo*T+(Lp>>3)]|=sa<<7-(3&Lp)),v==2&&(sa=(sa=l[Mn>>3])>>6-(7&Mn)&3,R[jo*T+(Lp>>2)]|=sa<<6-((3&Lp)<<1)),v==4&&(sa=(sa=l[Mn>>3])>>4-(7&Mn)&15,R[jo*T+(Lp>>1)]|=sa<<4-((1&Lp)<<2)),v>=8)for(var re=jo*T+Lp*g,$o=0;$o<g;$o++)R[re+$o]=l[(Mn>>3)+$o];Mn+=v,Lp+=ie}$t++,jo+=Y}se*ct!=0&&(W+=ct*(1+Ct)),V+=1}return R},a.decode._getBPP=function(l){return[1,null,3,1,2,null,4][l.ctype]*l.depth},a.decode._filterZero=function(l,u,c,h,v){var g=a.decode._getBPP(u),T=Math.ceil(h*g/8),R=a.decode._paeth;g=Math.ceil(g/8);for(var W=0;W<v;W++){var k=c+W*T,J=k+W+1,q=l[J-1];if(q==0)for(var Se=0;Se<T;Se++)l[k+Se]=l[J+Se];else if(q==1){for(Se=0;Se<g;Se++)l[k+Se]=l[J+Se];for(Se=g;Se<T;Se++)l[k+Se]=l[J+Se]+l[k+Se-g]&255}else if(W==0){for(Se=0;Se<g;Se++)l[k+Se]=l[J+Se];if(q==2)for(Se=g;Se<T;Se++)l[k+Se]=255&l[J+Se];if(q==3)for(Se=g;Se<T;Se++)l[k+Se]=l[J+Se]+(l[k+Se-g]>>1)&255;if(q==4)for(Se=g;Se<T;Se++)l[k+Se]=l[J+Se]+R(l[k+Se-g],0,0)&255}else{if(q==2)for(Se=0;Se<T;Se++)l[k+Se]=l[J+Se]+l[k+Se-T]&255;if(q==3){for(Se=0;Se<g;Se++)l[k+Se]=l[J+Se]+(l[k+Se-T]>>1)&255;for(Se=g;Se<T;Se++)l[k+Se]=l[J+Se]+(l[k+Se-T]+l[k+Se-g]>>1)&255}if(q==4){for(Se=0;Se<g;Se++)l[k+Se]=l[J+Se]+R(0,l[k+Se-T],0)&255;for(Se=g;Se<T;Se++)l[k+Se]=l[J+Se]+R(l[k+Se-g],l[k+Se-T],l[k+Se-g-T])&255}}}return l},a.decode._paeth=function(l,u,c){var h=l+u-c,v=Math.abs(h-l),g=Math.abs(h-u),T=Math.abs(h-c);return v<=g&&v<=T?l:g<=T?u:c},a.decode._IHDR=function(l,u,c){var h=a._bin;c.width=h.readUint(l,u),u+=4,c.height=h.readUint(l,u),u+=4,c.depth=l[u],u++,c.ctype=l[u],u++,c.compress=l[u],u++,c.filter=l[u],u++,c.interlace=l[u],u++},a._bin={nextZero:function(l,u){for(;l[u]!=0;)u++;return u},readUshort:function(l,u){return l[u]<<8|l[u+1]},writeUshort:function(l,u,c){l[u]=c>>8&255,l[u+1]=255&c},readUint:function(l,u){return 16777216*l[u]+(l[u+1]<<16|l[u+2]<<8|l[u+3])},writeUint:function(l,u,c){l[u]=c>>24&255,l[u+1]=c>>16&255,l[u+2]=c>>8&255,l[u+3]=255&c},readASCII:function(l,u,c){for(var h="",v=0;v<c;v++)h+=String.fromCharCode(l[u+v]);return h},writeASCII:function(l,u,c){for(var h=0;h<c.length;h++)l[u+h]=c.charCodeAt(h)},readBytes:function(l,u,c){for(var h=[],v=0;v<c;v++)h.push(l[u+v]);return h},pad:function(l){return l.length<2?"0"+l:l},readUTF8:function(l,u,c){for(var h,v="",g=0;g<c;g++)v+="%"+a._bin.pad(l[u+g].toString(16));try{h=decodeURIComponent(v)}catch{return a._bin.readASCII(l,u,c)}return h}},a._copyTile=function(l,u,c,h,v,g,T,R,W){for(var k=Math.min(u,v),J=Math.min(c,g),q=0,Se=0,V=0;V<J;V++)for(var Y=0;Y<k;Y++)if(T>=0&&R>=0?(q=V*u+Y<<2,Se=(R+V)*v+T+Y<<2):(q=(-R+V)*u-T+Y<<2,Se=V*v+Y<<2),W==0)h[Se]=l[q],h[Se+1]=l[q+1],h[Se+2]=l[q+2],h[Se+3]=l[q+3];else if(W==1){var ie=l[q+3]*.00392156862745098,se=l[q]*ie,ct=l[q+1]*ie,ae=l[q+2]*ie,st=h[Se+3]*(1/255),Ct=h[Se]*st,$t=h[Se+1]*st,jo=h[Se+2]*st,Lp=1-ie,Mn=ie+st*Lp,sa=Mn==0?0:1/Mn;h[Se+3]=255*Mn,h[Se+0]=(se+Ct*Lp)*sa,h[Se+1]=(ct+$t*Lp)*sa,h[Se+2]=(ae+jo*Lp)*sa}else if(W==2)ie=l[q+3],se=l[q],ct=l[q+1],ae=l[q+2],st=h[Se+3],Ct=h[Se],$t=h[Se+1],jo=h[Se+2],ie==st&&se==Ct&&ct==$t&&ae==jo?(h[Se]=0,h[Se+1]=0,h[Se+2]=0,h[Se+3]=0):(h[Se]=se,h[Se+1]=ct,h[Se+2]=ae,h[Se+3]=ie);else if(W==3){if(ie=l[q+3],se=l[q],ct=l[q+1],ae=l[q+2],st=h[Se+3],Ct=h[Se],$t=h[Se+1],jo=h[Se+2],ie==st&&se==Ct&&ct==$t&&ae==jo)continue;if(ie<220&&st>20)return!1}return!0},a.encode=function(l,u,c,h,v,g){h==null&&(h=0),g==null&&(g=!1);for(var T=new Uint8Array(l[0].byteLength*l.length+100),R=[137,80,78,71,13,10,26,10],W=0;W<8;W++)T[W]=R[W];var k=8,J=a._bin,q=a.crc.crc,Se=J.writeUint,V=J.writeUshort,Y=J.writeASCII,ie=a.encode.compressPNG(l,u,c,h,g);Se(T,k,13),Y(T,k+=4,"IHDR"),Se(T,k+=4,u),Se(T,k+=4,c),T[k+=4]=ie.depth,T[++k]=ie.ctype,T[++k]=0,T[++k]=0,T[++k]=0,Se(T,++k,q(T,k-17,17)),Se(T,k+=4,1),Y(T,k+=4,"sRGB"),T[k+=4]=1,Se(T,++k,q(T,k-5,5)),k+=4;var se=l.length>1;if(se&&(Se(T,k,8),Y(T,k+=4,"acTL"),Se(T,k+=4,l.length),Se(T,k+=4,0),Se(T,k+=4,q(T,k-12,12)),k+=4),ie.ctype==3){for(Se(T,k,3*(sa=ie.plte.length)),Y(T,k+=4,"PLTE"),k+=4,W=0;W<sa;W++){var ct=3*W,ae=ie.plte[W],st=255&ae,Ct=ae>>8&255,$t=ae>>16&255;T[k+ct+0]=st,T[k+ct+1]=Ct,T[k+ct+2]=$t}if(Se(T,k+=3*sa,q(T,k-3*sa-4,3*sa+4)),k+=4,ie.gotAlpha){for(Se(T,k,sa),Y(T,k+=4,"tRNS"),k+=4,W=0;W<sa;W++)T[k+W]=ie.plte[W]>>24&255;Se(T,k+=sa,q(T,k-sa-4,sa+4)),k+=4}}for(var jo=0,Lp=0;Lp<ie.frames.length;Lp++){var Mn=ie.frames[Lp];se&&(Se(T,k,26),Y(T,k+=4,"fcTL"),Se(T,k+=4,jo++),Se(T,k+=4,Mn.rect.width),Se(T,k+=4,Mn.rect.height),Se(T,k+=4,Mn.rect.x),Se(T,k+=4,Mn.rect.y),V(T,k+=4,v[Lp]),V(T,k+=2,1e3),T[k+=2]=Mn.dispose,T[++k]=Mn.blend,Se(T,++k,q(T,k-30,30)),k+=4);var sa,re=Mn.cimg;Se(T,k,(sa=re.length)+(Lp==0?0:4));var $o=k+=4;for(Y(T,k,Lp==0?"IDAT":"fdAT"),k+=4,Lp!=0&&(Se(T,k,jo++),k+=4),W=0;W<sa;W++)T[k+W]=re[W];Se(T,k+=sa,q(T,$o,k-$o)),k+=4}return Se(T,k,0),Y(T,k+=4,"IEND"),Se(T,k+=4,q(T,k-4,4)),k+=4,T.buffer.slice(0,k)},a.encode.compressPNG=function(l,u,c,h,v){for(var g=a.encode.compress(l,u,c,h,!1,v),T=0;T<l.length;T++){var R=g.frames[T],W=(R.rect.width,R.rect.height),k=R.bpl,J=R.bpp,q=new Uint8Array(W*k+W);R.cimg=a.encode._filterZero(R.img,W,J,k,q)}return g},a.encode.compress=function(l,u,c,h,v,g){g==null&&(g=!1);for(var T=6,R=8,W=4,k=255,J=0;J<l.length;J++)for(var q=new Uint8Array(l[J]),Se=q.length,V=0;V<Se;V+=4)k&=q[V+3];var Y=k!=255,ie={},se=[];if(l.length!=0&&(ie[0]=0,se.push(0),h!=0&&h--),h!=0){var ct=a.quantize(l,h,v);for(l=ct.bufs,V=0;V<ct.plte.length;V++)ie[st=ct.plte[V].est.rgba]==null&&(ie[st]=se.length,se.push(st))}else for(J=0;J<l.length;J++){var ae=new Uint32Array(l[J]);for(Se=ae.length,V=0;V<Se;V++){var st=ae[V];if((V<u||st!=ae[V-1]&&st!=ae[V-u])&&ie[st]==null&&(ie[st]=se.length,se.push(st),se.length>=300))break}}var Ct=!!Y&&v,$t=se.length;$t<=256&&g==0&&(R=$t<=2?1:$t<=4?2:$t<=16?4:8,v&&(R=8),Y=!0);var jo=[];for(J=0;J<l.length;J++){var Lp=new Uint8Array(l[J]),Mn=new Uint32Array(Lp.buffer),sa=0,re=0,$o=u,qo=c,Kt=0;if(J!=0&&!Ct){for(var i0=v||J==1||jo[jo.length-2].dispose==2?1:2,Up=0,l0=1e9,y0=0;y0<i0;y0++){for(var kp=new Uint8Array(l[J-1-y0]),u0=new Uint32Array(l[J-1-y0]),f0=u,v0=c,p0=-1,rm=-1,am=0;am<c;am++)for(var ym=0;ym<u;ym++)Mn[V=am*u+ym]!=u0[V]&&(ym<f0&&(f0=ym),ym>p0&&(p0=ym),am<v0&&(v0=am),am>rm&&(rm=am));var Wm=p0==-1?1:(p0-f0+1)*(rm-v0+1);Wm<l0&&(l0=Wm,Up=y0,p0==-1?(sa=re=0,$o=qo=1):(sa=f0,re=v0,$o=p0-f0+1,qo=rm-v0+1))}kp=new Uint8Array(l[J-1-Up]),Up==1&&(jo[jo.length-1].dispose=2);var h0=new Uint8Array($o*qo*4);new Uint32Array(h0.buffer),a._copyTile(kp,u,c,h0,$o,qo,-sa,-re,0),a._copyTile(Lp,u,c,h0,$o,qo,-sa,-re,3)?(a._copyTile(Lp,u,c,h0,$o,qo,-sa,-re,2),Kt=1):(a._copyTile(Lp,u,c,h0,$o,qo,-sa,-re,0),Kt=0),Lp=h0,Mn=new Uint32Array(Lp.buffer)}var f1=4*$o;if($t<=256&&g==0){for(f1=Math.ceil(R*$o/8),h0=new Uint8Array(f1*qo),am=0;am<qo;am++){V=am*f1;var T1=am*$o;if(R==8)for(ym=0;ym<$o;ym++)h0[V+ym]=ie[Mn[T1+ym]];else if(R==4)for(ym=0;ym<$o;ym++)h0[V+(ym>>1)]|=ie[Mn[T1+ym]]<<4-4*(1&ym);else if(R==2)for(ym=0;ym<$o;ym++)h0[V+(ym>>2)]|=ie[Mn[T1+ym]]<<6-2*(3&ym);else if(R==1)for(ym=0;ym<$o;ym++)h0[V+(ym>>3)]|=ie[Mn[T1+ym]]<<7-1*(7&ym)}Lp=h0,T=3,W=1}else if(Y==0&&l.length==1){h0=new Uint8Array($o*qo*3);var I1=$o*qo;for(V=0;V<I1;V++){var p1=3*V,Qm=4*V;h0[p1]=Lp[Qm],h0[p1+1]=Lp[Qm+1],h0[p1+2]=Lp[Qm+2]}Lp=h0,T=2,W=3,f1=3*$o}jo.push({rect:{x:sa,y:re,width:$o,height:qo},img:Lp,bpl:f1,bpp:W,blend:Kt,dispose:Ct?1:0})}return{ctype:T,depth:R,plte:se,gotAlpha:Y,frames:jo}},a.encode._filterZero=function(l,u,c,h,v){for(var g=[],T=0;T<5;T++)if(!(u*h>5e5)||T!=2&&T!=3&&T!=4){for(var R=0;R<u;R++)a.encode._filterLine(v,l,R,h,c,T);if(g.push(o.deflate(v)),c==1)break}for(var W,k=1e9,J=0;J<g.length;J++)g[J].length<k&&(W=J,k=g[J].length);return g[W]},a.encode._filterLine=function(l,u,c,h,v,g){var T=c*h,R=T+c,W=a.decode._paeth;if(l[R]=g,R++,g==0)for(var k=0;k<h;k++)l[R+k]=u[T+k];else if(g==1){for(k=0;k<v;k++)l[R+k]=u[T+k];for(k=v;k<h;k++)l[R+k]=u[T+k]-u[T+k-v]+256&255}else if(c==0){for(k=0;k<v;k++)l[R+k]=u[T+k];if(g==2)for(k=v;k<h;k++)l[R+k]=u[T+k];if(g==3)for(k=v;k<h;k++)l[R+k]=u[T+k]-(u[T+k-v]>>1)+256&255;if(g==4)for(k=v;k<h;k++)l[R+k]=u[T+k]-W(u[T+k-v],0,0)+256&255}else{if(g==2)for(k=0;k<h;k++)l[R+k]=u[T+k]+256-u[T+k-h]&255;if(g==3){for(k=0;k<v;k++)l[R+k]=u[T+k]+256-(u[T+k-h]>>1)&255;for(k=v;k<h;k++)l[R+k]=u[T+k]+256-(u[T+k-h]+u[T+k-v]>>1)&255}if(g==4){for(k=0;k<v;k++)l[R+k]=u[T+k]+256-W(0,u[T+k-h],0)&255;for(k=v;k<h;k++)l[R+k]=u[T+k]+256-W(u[T+k-v],u[T+k-h],u[T+k-v-h])&255}}},a.crc={table:(function(){for(var l=new Uint32Array(256),u=0;u<256;u++){for(var c=u,h=0;h<8;h++)1&c?c=3988292384^c>>>1:c>>>=1;l[u]=c}return l})(),update:function(l,u,c,h){for(var v=0;v<h;v++)l=a.crc.table[255&(l^u[c+v])]^l>>>8;return l},crc:function(l,u,c){return 4294967295^a.crc.update(4294967295,l,u,c)}},a.quantize=function(l,u,c){for(var h=[],v=0,g=0;g<l.length;g++)h.push(a.encode.alphaMul(new Uint8Array(l[g]),c)),v+=l[g].byteLength;var T=new Uint8Array(v),R=new Uint32Array(T.buffer),W=0;for(g=0;g<h.length;g++){for(var k=h[g],J=k.length,q=0;q<J;q++)T[W+q]=k[q];W+=J}var Se={i0:0,i1:T.length,bst:null,est:null,tdst:0,left:null,right:null};Se.bst=a.quantize.stats(T,Se.i0,Se.i1),Se.est=a.quantize.estats(Se.bst);for(var V=[Se];V.length<u;){var Y=0,ie=0;for(g=0;g<V.length;g++)V[g].est.L>Y&&(Y=V[g].est.L,ie=g);if(Y<.001)break;var se=V[ie],ct=a.quantize.splitPixels(T,R,se.i0,se.i1,se.est.e,se.est.eMq255),ae={i0:se.i0,i1:ct,bst:null,est:null,tdst:0,left:null,right:null};ae.bst=a.quantize.stats(T,ae.i0,ae.i1),ae.est=a.quantize.estats(ae.bst);var st={i0:ct,i1:se.i1,bst:null,est:null,tdst:0,left:null,right:null};for(st.bst={R:[],m:[],N:se.bst.N-ae.bst.N},g=0;g<16;g++)st.bst.R[g]=se.bst.R[g]-ae.bst.R[g];for(g=0;g<4;g++)st.bst.m[g]=se.bst.m[g]-ae.bst.m[g];st.est=a.quantize.estats(st.bst),se.left=ae,se.right=st,V[ie]=ae,V.push(st)}V.sort(function(i0,Up){return Up.bst.N-i0.bst.N});for(var Ct=0;Ct<h.length;Ct++){var $t=a.quantize.planeDst,jo=new Uint8Array(h[Ct].buffer),Lp=new Uint32Array(h[Ct].buffer),Mn=jo.length;for(g=0;g<Mn;g+=4){for(var sa=jo[g]*.00392156862745098,re=jo[g+1]*.00392156862745098,$o=jo[g+2]*.00392156862745098,qo=jo[g+3]*.00392156862745098,Kt=Se;Kt.left;)Kt=$t(Kt.est,sa,re,$o,qo)<=0?Kt.left:Kt.right;Lp[g>>2]=Kt.est.rgba}h[Ct]=Lp.buffer}return{bufs:h,plte:V}},a.quantize.getNearest=function(l,u,c,h,v){if(l.left==null)return l.tdst=a.quantize.dist(l.est.q,u,c,h,v),l;var g=a.quantize.planeDst(l.est,u,c,h,v),T=l.left,R=l.right;g>0&&(T=l.right,R=l.left);var W=a.quantize.getNearest(T,u,c,h,v);if(W.tdst<=g*g)return W;var k=a.quantize.getNearest(R,u,c,h,v);return k.tdst<W.tdst?k:W},a.quantize.planeDst=function(l,u,c,h,v){var g=l.e;return g[0]*u+g[1]*c+g[2]*h+g[3]*v-l.eMq},a.quantize.dist=function(l,u,c,h,v){var g=u-l[0],T=c-l[1],R=h-l[2],W=v-l[3];return g*g+T*T+R*R+W*W},a.quantize.splitPixels=function(l,u,c,h,v,g){var T=a.quantize.vecDot;for(h-=4;c<h;){for(;T(l,c,v)<=g;)c+=4;for(;T(l,h,v)>g;)h-=4;if(c>=h)break;var R=u[c>>2];u[c>>2]=u[h>>2],u[h>>2]=R,c+=4,h-=4}for(;T(l,c,v)>g;)c-=4;return c+4},a.quantize.vecDot=function(l,u,c){return l[u]*c[0]+l[u+1]*c[1]+l[u+2]*c[2]+l[u+3]*c[3]},a.quantize.stats=function(l,u,c){for(var h=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],v=[0,0,0,0],g=c-u>>2,T=u;T<c;T+=4){var R=l[T]*.00392156862745098,W=l[T+1]*(1/255),k=l[T+2]*(1/255),J=l[T+3]*(1/255);v[0]+=R,v[1]+=W,v[2]+=k,v[3]+=J,h[0]+=R*R,h[1]+=R*W,h[2]+=R*k,h[3]+=R*J,h[5]+=W*W,h[6]+=W*k,h[7]+=W*J,h[10]+=k*k,h[11]+=k*J,h[15]+=J*J}return h[4]=h[1],h[8]=h[2],h[12]=h[3],h[9]=h[6],h[13]=h[7],h[14]=h[11],{R:h,m:v,N:g}},a.quantize.estats=function(l){var u=l.R,c=l.m,h=l.N,v=c[0],g=c[1],T=c[2],R=c[3],W=h==0?0:1/h,k=[u[0]-v*v*W,u[1]-v*g*W,u[2]-v*T*W,u[3]-v*R*W,u[4]-g*v*W,u[5]-g*g*W,u[6]-g*T*W,u[7]-g*R*W,u[8]-T*v*W,u[9]-T*g*W,u[10]-T*T*W,u[11]-T*R*W,u[12]-R*v*W,u[13]-R*g*W,u[14]-R*T*W,u[15]-R*R*W],J=k,q=a.M4,Se=[.5,.5,.5,.5],V=0,Y=0;if(h!=0)for(var ie=0;ie<10&&(Se=q.multVec(J,Se),Y=Math.sqrt(q.dot(Se,Se)),Se=q.sml(1/Y,Se),!(Math.abs(Y-V)<1e-9));ie++)V=Y;var se=[v*W,g*W,T*W,R*W],ct=q.dot(q.sml(255,se),Se),ae=se[3]<.001?0:1/se[3];return{Cov:k,q:se,e:Se,L:V,eMq255:ct,eMq:q.dot(Se,se),rgba:(Math.round(255*se[3])<<24|Math.round(255*se[2]*ae)<<16|Math.round(255*se[1]*ae)<<8|Math.round(255*se[0]*ae))>>>0}},a.M4={multVec:function(l,u){return[l[0]*u[0]+l[1]*u[1]+l[2]*u[2]+l[3]*u[3],l[4]*u[0]+l[5]*u[1]+l[6]*u[2]+l[7]*u[3],l[8]*u[0]+l[9]*u[1]+l[10]*u[2]+l[11]*u[3],l[12]*u[0]+l[13]*u[1]+l[14]*u[2]+l[15]*u[3]]},dot:function(l,u){return l[0]*u[0]+l[1]*u[1]+l[2]*u[2]+l[3]*u[3]},sml:function(l,u){return[l*u[0],l*u[1],l*u[2],l*u[3]]}},a.encode.alphaMul=function(l,u){for(var c=new Uint8Array(l.length),h=l.length>>2,v=0;v<h;v++){var g=v<<2,T=l[g+3];u&&(T=T<128?0:255);var R=T*(1/255);c[g+0]=l[g+0]*R,c[g+1]=l[g+1]*R,c[g+2]=l[g+2]*R,c[g+3]=T}return c}})(n,r(788))},165:t=>{t.exports=function(e,r){var n,a,o,l,u,c,h,v,g,T,R,W,k,J,q,Se,V,Y,ie,se,ct,ae,st,Ct,$t;n=e.state,a=e.next_in,Ct=e.input,o=a+(e.avail_in-5),l=e.next_out,$t=e.output,u=l-(r-e.avail_out),c=l+(e.avail_out-257),h=n.dmax,v=n.wsize,g=n.whave,T=n.wnext,R=n.window,W=n.hold,k=n.bits,J=n.lencode,q=n.distcode,Se=(1<<n.lenbits)-1,V=(1<<n.distbits)-1;e:do{k<15&&(W+=Ct[a++]<<k,k+=8,W+=Ct[a++]<<k,k+=8),Y=J[W&Se];t:for(;;){if(W>>>=ie=Y>>>24,k-=ie,(ie=Y>>>16&255)==0)$t[l++]=65535&Y;else{if(!(16&ie)){if(64&ie){if(32&ie){n.mode=12;break e}e.msg="invalid literal/length code",n.mode=30;break e}Y=J[(65535&Y)+(W&(1<<ie)-1)];continue t}for(se=65535&Y,(ie&=15)&&(k<ie&&(W+=Ct[a++]<<k,k+=8),se+=W&(1<<ie)-1,W>>>=ie,k-=ie),k<15&&(W+=Ct[a++]<<k,k+=8,W+=Ct[a++]<<k,k+=8),Y=q[W&V];;){if(W>>>=ie=Y>>>24,k-=ie,16&(ie=Y>>>16&255)){if(ct=65535&Y,k<(ie&=15)&&(W+=Ct[a++]<<k,(k+=8)<ie&&(W+=Ct[a++]<<k,k+=8)),(ct+=W&(1<<ie)-1)>h){e.msg="invalid distance too far back",n.mode=30;break e}if(W>>>=ie,k-=ie,ct>(ie=l-u)){if((ie=ct-ie)>g&&n.sane){e.msg="invalid distance too far back",n.mode=30;break e}if(ae=0,st=R,T===0){if(ae+=v-ie,ie<se){se-=ie;do $t[l++]=R[ae++];while(--ie);ae=l-ct,st=$t}}else if(T<ie){if(ae+=v+T-ie,(ie-=T)<se){se-=ie;do $t[l++]=R[ae++];while(--ie);if(ae=0,T<se){se-=ie=T;do $t[l++]=R[ae++];while(--ie);ae=l-ct,st=$t}}}else if(ae+=T-ie,ie<se){se-=ie;do $t[l++]=R[ae++];while(--ie);ae=l-ct,st=$t}for(;se>2;)$t[l++]=st[ae++],$t[l++]=st[ae++],$t[l++]=st[ae++],se-=3;se&&($t[l++]=st[ae++],se>1&&($t[l++]=st[ae++]))}else{ae=l-ct;do $t[l++]=$t[ae++],$t[l++]=$t[ae++],$t[l++]=$t[ae++],se-=3;while(se>2);se&&($t[l++]=$t[ae++],se>1&&($t[l++]=$t[ae++]))}break}if(64&ie){e.msg="invalid distance code",n.mode=30;break e}Y=q[(65535&Y)+(W&(1<<ie)-1)]}}break}}while(a<o&&l<c);a-=se=k>>3,W&=(1<<(k-=se<<3))-1,e.next_in=a,e.next_out=l,e.avail_in=a<o?o-a+5:5-(a-o),e.avail_out=l<c?c-l+257:257-(l-c),n.hold=W,n.bits=k}},185:()=>{$3Dmol.workerString=(function(){self.onmessage=function(t){var e=t.data,r=e.type;if(r<0)self.atomData=e.atoms,self.volume=e.volume,self.ps=new ProteinSurface;else{var n=self.ps;n.initparm(e.expandedExtent,r!=1,self.volume),n.fillvoxels(self.atomData,e.extendedAtoms),n.buildboundary(),r!==4&&r!==2||(n.fastdistancemap(),n.boundingatom(!1),n.fillvoxelswaals(self.atomData,e.extendedAtoms)),n.marchingcube(r);var a=n.getFacesAndVertices(e.atomsToShow);self.postMessage(a)}}}).toString().replace(/(^.*?\{|\}$)/g,""),$3Dmol.workerString+=`;
function _classCallCheck() {};`,$3Dmol.workerString+=`;
`+$3Dmol.Vector3.toString(),$3Dmol.workerString+=`;
`+$3Dmol.MarchingCubeInitializer.toString()+`;

`,$3Dmol.workerString+=`;
`+$3Dmol.PointGrid.toString()+`;
`,$3Dmol.workerString+=`;
var ProteinSurface = `+$3Dmol.ProteinSurface.toString()+`;
`,$3Dmol.SurfaceWorker=window.URL?window.URL.createObjectURL(new Blob([$3Dmol.workerString],{type:"text/javascript"})):void 0},222:(t,e,r)=>{r.r(e),r.d(e,{CC:()=>a,Color:()=>n,builtinColorSchemes:()=>g,chains:()=>v,elementColors:()=>c,htmlColors:()=>o,residues:()=>h,ssColors:()=>l});class n{constructor(R,W,k){return this.r=0,this.g=0,this.b=0,arguments.length>1&&typeof R=="number"?(this.r=R||0,this.g=W||0,this.b=k||0,this):this.set(R||0)}set(R){return R instanceof n?R.clone():(typeof R=="number"?this.setHex(R):typeof R=="object"&&(this.r=R?.r||0,this.g=R?.g||0,this.b=R?.b||0),this)}setHex(R){return R=Math.floor(R),this.r=(R>>16&255)/255,this.g=(R>>8&255)/255,this.b=(255&R)/255,this}getHex(){return Math.round(255*this.r)<<16|Math.round(255*this.g)<<8|Math.round(255*this.b)}clone(){return new n(this.r,this.g,this.b)}copy(R){return this.r=R.r,this.g=R.g,this.b=R.b,this}scaled(){var R={};return R.r=Math.round(255*this.r),R.g=Math.round(255*this.g),R.b=Math.round(255*this.b),R.a=1,R}}class a{static color(R){if(!R)return a.cache[0];if(R instanceof n)return R;if(typeof R=="number"&&a.cache[R]!==void 0)return a.cache[R];if(R&&Array.isArray(R))return R.map(a.color);let W=a.getHex(R),k=new n(W);return a.cache[W]=k,k}static getHex(R){if(Array.isArray(R))return R.map(a.getHex);if(typeof R=="string"){let W=R;if(!isNaN(parseInt(W)))return parseInt(W);if(W=W.trim(),W.length==4&&W[0]=="#"&&(W="#"+W[1]+W[1]+W[2]+W[2]+W[3]+W[3]),W.length==7&&W[0]=="#")return parseInt(W.substring(1),16);let k=a.rgbRegEx.exec(W);if(k){k[1]!=""&&console.log("WARNING: Opacity value in rgba ignored.  Specify separately as opacity attribute.");let q=0;for(let Se=2;Se<5;Se++){q*=256;let V=k[Se].endsWith("%")?255*parseFloat(k[Se])/100:parseFloat(k[Se]);q+=Math.round(V)}return q}let J=o[W.toLowerCase()];return J!==void 0?J:(console.error("color not found",R.toLowerCase(),o),0)}return R}}a.rgbRegEx=/rgb(a?)\(\s*([^ ,\)\t]+)\s*,\s*([^ ,\)\t]+)\s*,\s*([^ ,\)\t]+)/i,a.cache={0:new n(0)};const o={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgrey:11119017,darkgreen:25600,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,grey:8421504,green:32768,greenyellow:11403055,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgrey:13882323,lightgreen:9498256,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074,b:255,g:32768,r:16711680,c:49087,m:12517567,y:12566272,k:0,w:16777215},l={pyMol:{h:16711680,s:16776960,c:65280},Jmol:{h:16711808,s:16762880,c:16777215}},u={H:16777215,He:16761035,HE:16761035,Li:11674146,LI:11674146,B:65280,C:13158600,N:9408511,O:15728640,F:14329120,Na:255,NA:255,Mg:2263842,MG:2263842,Al:8421520,AL:8421520,Si:14329120,SI:14329120,P:16753920,S:16762930,Cl:65280,CL:65280,Ca:8421520,CA:8421520,Ti:8421520,TI:8421520,Cr:8421520,CR:8421520,Mn:8421520,MN:8421520,Fe:16753920,FE:16753920,Ni:10824234,NI:10824234,Cu:10824234,CU:10824234,Zn:10824234,ZN:10824234,Br:10824234,BR:10824234,Ag:8421520,AG:8421520,I:10494192,Ba:16753920,BA:16753920,Au:14329120,AU:14329120},c={defaultColor:16716947,Jmol:{H:16777215,He:14286847,HE:14286847,Li:13402367,LI:13402367,Be:12779264,BE:12779264,B:16758197,C:9474192,N:3166456,O:16715021,F:9494608,Ne:11789301,NE:11789301,Na:11230450,NA:11230450,Mg:9109248,MG:9109248,Al:12560038,AL:12560038,Si:1578e4,SI:1578e4,P:16744448,S:16777008,Cl:2093087,CL:2093087,Ar:8442339,AR:8442339,K:9388244,Ca:4062976,CA:4062976,Sc:15132390,SC:15132390,Ti:12567239,TI:12567239,V:10921643,Cr:9083335,CR:9083335,Mn:10255047,MN:10255047,Fe:14706227,FE:14706227,Co:15765664,CO:15765664,Ni:5296208,NI:5296208,Cu:13140019,CU:13140019,Zn:8224944,ZN:8224944,Ga:12750735,GA:12750735,Ge:6721423,GE:6721423,As:12419299,AS:12419299,Se:16752896,SE:16752896,Br:10889513,BR:10889513,Kr:6076625,KR:6076625,Rb:7351984,RB:7351984,Sr:65280,SR:65280,Y:9764863,Zr:9756896,ZR:9756896,Nb:7586505,NB:7586505,Mo:5551541,MO:5551541,Tc:3907230,TC:3907230,Ru:2396047,RU:2396047,Rh:687500,RH:687500,Pd:27013,PD:27013,Ag:12632256,AG:12632256,Cd:16767375,CD:16767375,In:10909043,IN:10909043,Sn:6717568,SN:6717568,Sb:10380213,SB:10380213,Te:13924864,TE:13924864,I:9699476,Xe:4366e3,XE:4366e3,Cs:5707663,CS:5707663,Ba:51456,BA:51456,La:7394559,LA:7394559,Ce:16777159,CE:16777159,Pr:14286791,PR:14286791,Nd:13107143,ND:13107143,Pm:10747847,PM:10747847,Sm:9437127,SM:9437127,Eu:6422471,EU:6422471,Gd:4587463,GD:4587463,Tb:3211207,TB:3211207,Dy:2097095,DY:2097095,Ho:65436,HO:65436,Er:58997,ER:58997,Tm:54354,TM:54354,Yb:48952,YB:48952,Lu:43812,LU:43812,Hf:5096191,HF:5096191,Ta:5089023,TA:5089023,W:2200790,Re:2522539,RE:2522539,Os:2516630,OS:2516630,Ir:1528967,IR:1528967,Pt:13684960,PT:13684960,Au:16765219,AU:16765219,Hg:12105936,HG:12105936,Tl:10900557,TL:10900557,Pb:5724513,PB:5724513,Bi:10375093,BI:10375093,Po:11230208,PO:11230208,At:7688005,AT:7688005,Rn:4358806,RN:4358806,Fr:4325478,FR:4325478,Ra:32e3,RA:32e3,Ac:7384058,AC:7384058,Th:47871,TH:47871,Pa:41471,PA:41471,U:36863,Np:33023,NP:33023,Pu:27647,PU:27647,Am:5528818,AM:5528818,Cm:7888099,CM:7888099,Bk:9064419,BK:9064419,Cf:10565332,CF:10565332,Es:11739092,ES:11739092,Fm:11739066,FM:11739066,Md:11734438,MD:11734438,No:12389767,NO:12389767,Lr:13041766,LR:13041766,Rf:13369433,RF:13369433,Db:13697103,DB:13697103,Sg:14221381,SG:14221381,Bh:14680120,BH:14680120,Hs:15073326,HS:15073326,Mt:15400998,MT:15400998},rasmol:u,defaultColors:Object.assign({},u),greenCarbon:Object.assign(Object.assign({},u),{C:65280}),cyanCarbon:Object.assign(Object.assign({},u),{C:65535}),magentaCarbon:Object.assign(Object.assign({},u),{C:16711935}),yellowCarbon:Object.assign(Object.assign({},u),{C:16776960}),whiteCarbon:Object.assign(Object.assign({},u),{C:16777215}),orangeCarbon:Object.assign(Object.assign({},u),{C:16753920}),purpleCarbon:Object.assign(Object.assign({},u),{C:8388736}),blueCarbon:Object.assign(Object.assign({},u),{C:255})},h={amino:{ALA:13158600,ARG:1334015,ASN:56540,ASP:15075850,CYS:15132160,GLN:56540,GLU:15075850,GLY:15461355,HIS:8553170,ILE:1016335,LEU:1016335,LYS:1334015,MET:15132160,PHE:3289770,PRO:14456450,SER:16422400,THR:16422400,TRP:11819700,TYR:3289770,VAL:1016335,ASX:16738740,GLX:16738740},shapely:{ALA:9240460,ARG:124,ASN:16743536,ASP:10485826,CYS:16777072,GLN:16731212,GLU:6684672,GLY:16777215,HIS:7368959,ILE:19456,LEU:4546117,LYS:4671416,MET:12099650,PHE:5459026,PRO:5395026,SER:16740418,THR:12078080,TRP:5195264,TYR:9203788,VAL:16747775,ASX:16711935,GLX:16711935},nucleic:{A:10526975,G:16740464,I:8454143,C:16747595,T:10551200,U:16744576}},v={atom:{A:12636415,B:11599792,C:16761032,D:16777088,E:16761087,F:11596016,G:16765040,H:15761536,I:16113331,J:49151,K:13458524,L:6737322,M:10145074,N:15631086,O:52945,P:65407,Q:3978097,R:139,S:12433259,T:25600,U:8388608,V:8421376,W:8388736,X:32896,Y:12092939,Z:11674146},hetatm:{A:9478351,B:8441752,C:13602992,D:13619056,E:13603023,F:8437952,G:13607008,H:12603504,I:12955267,J:42959,K:11881548,L:5682578,M:9090346,N:12481214,O:46753,P:53103,Q:3447649,R:187,S:10854235,T:37888,U:11534336,V:11579392,W:11534512,X:45232,Y:15250963,Z:12726834}},g={ssPyMol:{prop:"ss",map:l.pyMol},ssJmol:{prop:"ss",map:l.Jmol},Jmol:{prop:"elem",map:c.Jmol},amino:{prop:"resn",map:h.amino},shapely:{prop:"resn",map:h.shapely},nucleic:{prop:"resn",map:h.nucleic},chain:{prop:"chain",map:v.atom},rasmol:{prop:"elem",map:c.rasmol},default:{prop:"elem",map:c.defaultColors},greenCarbon:{prop:"elem",map:c.greenCarbon},chainHetatm:{prop:"chain",map:v.hetatm},cyanCarbon:{prop:"elem",map:c.cyanCarbon},magentaCarbon:{prop:"elem",map:c.magentaCarbon},purpleCarbon:{prop:"elem",map:c.purpleCarbon},whiteCarbon:{prop:"elem",map:c.whiteCarbon},orangeCarbon:{prop:"elem",map:c.orangeCarbon},yellowCarbon:{prop:"elem",map:c.yellowCarbon},blueCarbon:{prop:"elem",map:c.blueCarbon}}},307:t=>{typeof t.exports=="object"&&(t.exports=window.$3Dmol)},358:(t,e,r)=>{var n=r(981),a=15,o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],l=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],u=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],c=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(h,v,g,T,R,W,k,J){var q,Se,V,Y,ie,se,ct,ae,st,Ct=J.bits,$t=0,jo=0,Lp=0,Mn=0,sa=0,re=0,$o=0,qo=0,Kt=0,i0=0,Up=null,l0=0,y0=new n.Buf16(16),kp=new n.Buf16(16),u0=null,f0=0;for($t=0;$t<=a;$t++)y0[$t]=0;for(jo=0;jo<T;jo++)y0[v[g+jo]]++;for(sa=Ct,Mn=a;Mn>=1&&y0[Mn]===0;Mn--);if(sa>Mn&&(sa=Mn),Mn===0)return R[W++]=20971520,R[W++]=20971520,J.bits=1,0;for(Lp=1;Lp<Mn&&y0[Lp]===0;Lp++);for(sa<Lp&&(sa=Lp),qo=1,$t=1;$t<=a;$t++)if(qo<<=1,(qo-=y0[$t])<0)return-1;if(qo>0&&(h===0||Mn!==1))return-1;for(kp[1]=0,$t=1;$t<a;$t++)kp[$t+1]=kp[$t]+y0[$t];for(jo=0;jo<T;jo++)v[g+jo]!==0&&(k[kp[v[g+jo]]++]=jo);if(h===0?(Up=u0=k,se=19):h===1?(Up=o,l0-=257,u0=l,f0-=257,se=256):(Up=u,u0=c,se=-1),i0=0,jo=0,$t=Lp,ie=W,re=sa,$o=0,V=-1,Y=(Kt=1<<sa)-1,h===1&&Kt>852||h===2&&Kt>592)return 1;for(;;){ct=$t-$o,k[jo]<se?(ae=0,st=k[jo]):k[jo]>se?(ae=u0[f0+k[jo]],st=Up[l0+k[jo]]):(ae=96,st=0),q=1<<$t-$o,Lp=Se=1<<re;do R[ie+(i0>>$o)+(Se-=q)]=ct<<24|ae<<16|st;while(Se!==0);for(q=1<<$t-1;i0&q;)q>>=1;if(q!==0?(i0&=q-1,i0+=q):i0=0,jo++,--y0[$t]===0){if($t===Mn)break;$t=v[g+k[jo]]}if($t>sa&&(i0&Y)!==V){for($o===0&&($o=sa),ie+=Lp,qo=1<<(re=$t-$o);re+$o<Mn&&!((qo-=y0[re+$o])<=0);)re++,qo<<=1;if(Kt+=1<<re,h===1&&Kt>852||h===2&&Kt>592)return 1;R[V=i0&Y]=sa<<24|re<<16|ie-W}}return i0!==0&&(R[ie+i0]=$t-$o<<24|4194304),J.bits=sa,0}},378:(t,e,r)=>{var n;r.r(e),r.d(e,{BackSide:()=>o,Camera:()=>Ty,ClampToEdgeWrapping:()=>v,Coloring:()=>n,Cylinder:()=>Kt.Cylinder,DoubleSide:()=>l,EventDispatcher:()=>Y,FloatType:()=>k,Fog:()=>$v,FrontSide:()=>a,Geometry:()=>$t,GeometryGroup:()=>Ct,GeometryIDCount:()=>jo,ImposterMaterial:()=>I1,InstancedMaterial:()=>p1,Light:()=>re,Line:()=>Ip,LineBasicMaterial:()=>ae,LineStyle:()=>Pp,LinearFilter:()=>g,LinearMipMapLinearFilter:()=>R,Material:()=>se,MaterialIdCount:()=>ct,Matrix3:()=>c.Matrix3,Matrix4:()=>c.Matrix4,Mesh:()=>x0,MeshDoubleLambertMaterial:()=>m1,MeshLambertMaterial:()=>Qm,MeshOutlineMaterial:()=>W1,NearestFilter:()=>T,Object3D:()=>Mn,Object3DIDCount:()=>Lp,Projector:()=>qo,Quaternion:()=>c.Quaternion,R32Format:()=>Se,RFormat:()=>q,RGBAFormat:()=>J,Ray:()=>c.Ray,Raycaster:()=>l0,Renderer:()=>Ny,Scene:()=>sa,ShaderLib:()=>Hv,ShaderUtils:()=>Qv,Shading:()=>u,Sphere:()=>Kt.Sphere,SphereImposterMaterial:()=>ug,SphereImposterOutlineMaterial:()=>ng,Sprite:()=>B0,SpriteAlignment:()=>h,SpriteMaterial:()=>Ko,SpritePlugin:()=>Cv,StickImposterMaterial:()=>wi,StickImposterOutlineMaterial:()=>S0,Texture:()=>f1,TextureIdCount:()=>T1,TextureOperations:()=>V,Triangle:()=>Kt.Triangle,UVMapping:()=>h0,UnsignedByteType:()=>W,Vector2:()=>c.Vector2,Vector3:()=>c.Vector3,VolumetricMaterial:()=>Z0,basic:()=>im,clamp:()=>c.clamp,clone:()=>gy,conversionMatrix3:()=>c.conversionMatrix3,degToRad:()=>c.degToRad,instanced:()=>Cm,intersectObject:()=>Wm,lambert:()=>Om,lambertdouble:()=>hg,outline:()=>S1,screen:()=>U1,screenaa:()=>J1,sphereimposter:()=>Km,sphereimposteroutline:()=>y1,sprite:()=>uv,stickimposter:()=>Yv,stickimposteroutline:()=>my,volumetric:()=>yv}),(function(pg){pg[pg.NoColors=0]="NoColors",pg[pg.FaceColors=1]="FaceColors",pg[pg.VertexColors=2]="VertexColors"})(n||(n={}));const a=0,o=1,l=2;var u;(function(pg){pg[pg.NoShading=0]="NoShading",pg[pg.FlatShading=1]="FlatShading",pg[pg.SmoothShading=2]="SmoothShading"})(u||(u={}));var c=r(529);const h={topLeft:new c.Vector2(1,-1),topCenter:new c.Vector2(0,-1),topRight:new c.Vector2(-1,-1),centerLeft:new c.Vector2(1,0),center:new c.Vector2(0,0),centerRight:new c.Vector2(-1,0),bottomLeft:new c.Vector2(1,1),bottomCenter:new c.Vector2(0,1),bottomRight:new c.Vector2(-1,1)},v=1001,g=1006,T=1007,R=1008,W=1009,k=1010,J=1021,q=1022,Se=1023;var V;(function(pg){pg[pg.MultiplyOperation=0]="MultiplyOperation",pg[pg.MixOperation=1]="MixOperation",pg[pg.AddOperation=2]="AddOperation"})(V||(V={}));class Y{constructor(){this.listeners={}}dispatchEvent(et){var t0=this.listeners[et.type];if(t0!==void 0){et.target=this;for(var oa=0,a0=t0.length;oa<a0;oa++)t0[oa].call(this,et)}}removeEventListener(et,t0){if(t0){var oa=this.listeners[et].indexOf(t0);oa!==-1&&this.listeners[et].splice(oa,1)}else this.listeners[et]=[]}addEventListener(et,t0){this.listeners[et]===void 0&&(this.listeners[et]=[]),this.listeners[et].indexOf(t0)===-1&&this.listeners[et].push(t0)}}var ie=r(222);class se extends Y{constructor(){super(...arguments),this.id=ct++,this.name="",this.side=a,this.opacity=1,this.transparent=!1,this.depthTest=!0,this.depthWrite=!0,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.alphaTest=0,this.visible=!0,this.needsUpdate=!0,this.outline=!1,this.wireframe=!1,this.shaded=!1}setValues(et={}){if(et!==void 0)for(var t0 in et){var oa=et[t0];if(oa!==void 0){if(t0 in this){var a0=this[t0];a0 instanceof ie.Color&&oa instanceof ie.Color?a0.copy(oa):a0 instanceof ie.Color?a0.set(oa):a0 instanceof c.Vector3&&oa instanceof c.Vector3?a0.copy(oa):this[t0]=oa}}else console.warn("$3Dmol.Material: '"+t0+"' parameter is undefined.")}}clone(et=new se){return et.name=this.name,et.side=this.side,et.opacity=this.opacity,et.transparent=this.transparent,et.depthTest=this.depthTest,et.depthWrite=this.depthWrite,et.polygonOffset=this.polygonOffset,et.polygonOffsetFactor=this.polygonOffsetFactor,et.polygonOffsetUnits=this.polygonOffsetUnits,et.alphaTest=this.alphaTest,et.overdraw=this.overdraw,et.visible=this.visible,et}makeShaded(et){this.shaded=!0,this.uniforms&&(this.uniforms.shading={type:"i",value:et},this.uniforms.vWidth={type:"f",value:1},this.uniforms.vHeight={type:"f",value:1})}dispose(){this.dispatchEvent({type:"dispose"})}}let ct=0;class ae extends se{constructor(et){super(),this.color=new ie.Color(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.vertexColors=!1,this.fog=!0,this.shaderID="basic",this.setValues(et)}clone(et=new ae){return super.clone.call(this,et),et.color.copy(this.color),et}}const st=65535;class Ct{constructor(et=0){this.vertexArray=null,this.colorArray=null,this.normalArray=null,this.radiusArray=null,this.faceArray=null,this.lineArray=null,this.atomArray=Array(),this.vertices=0,this.faceidx=0,this.lineidx=0,this.__inittedArrays=!1,this.id=et}setColor(et){var t0=this.vertexArray,oa=this.colorArray;if(!t0)throw new Error("vertex array not initialized");if(!oa)throw new Error("color array not initialized");let a0=ie.CC.color(et);for(var m0=0;m0<t0.length;m0+=3)oa[m0]=a0.r,oa[m0+1]=a0.g,oa[m0+2]=a0.b}setColors(et){var t0=this.vertexArray,oa=this.colorArray;if(!t0)throw new Error("vertex array not initialized");if(!oa)throw new Error("color array not initialized");if(t0.length==oa.length)for(var a0=0;a0<t0.length;a0+=3){var m0=et(t0[a0],t0[a0+1],t0[a0+2]);m0 instanceof ie.Color||(m0=ie.CC.color(m0)),oa[a0]=m0.r,oa[a0+1]=m0.g,oa[a0+2]=m0.b}else console.log("Cannot re-color geometry group due to mismatched lengths.")}getNumVertices(){return this.vertices}getVertices(){return this.vertexArray}getCentroid(){if(!this.vertexArray)throw new Error("vertex array not initialized");for(var et,t0,oa,a0,m0=new c.Vector3,nm=0;nm<this.vertices;++nm)et=3*nm,t0=this.vertexArray[et],oa=this.vertexArray[et+1],a0=this.vertexArray[et+2],m0.x+=t0,m0.y+=oa,m0.z+=a0;return m0.divideScalar(this.vertices),m0}setNormals(){var et=this.faceArray,t0=this.vertexArray,oa=this.normalArray;if(this.vertices&&this.faceidx){if(!et)throw new Error("face array not initialized");if(!t0)throw new Error("vertex array not initialized");if(!oa)throw new Error("normal array not initialized");for(var a0,m0,nm,L0,cm,Gm,Fm,Vm=0;Vm<et.length/3;++Vm)a0=3*et[3*Vm],m0=3*et[3*Vm+1],nm=3*et[3*Vm+2],L0=new c.Vector3(t0[a0],t0[a0+1],t0[a0+2]),cm=new c.Vector3(t0[m0],t0[m0+1],t0[m0+2]),Gm=new c.Vector3(t0[nm],t0[nm+1],t0[nm+2]),L0.subVectors(L0,cm),Gm.subVectors(Gm,cm),Gm.cross(L0),(Fm=Gm).normalize(),oa[a0]+=Fm.x,oa[m0]+=Fm.x,oa[nm]+=Fm.x,oa[a0+1]+=Fm.y,oa[m0+1]+=Fm.y,oa[nm+1]+=Fm.y,oa[a0+2]+=Fm.z,oa[m0+2]+=Fm.z,oa[nm+2]+=Fm.z}}setLineIndices(){if(this.faceidx&&(!this.lineArray||this.lineArray.length!=2*this.faceidx||this.lineidx!=2*this.faceidx)){var et=this.faceArray,t0=this.lineArray=new Uint16Array(2*this.faceidx);if(this.lineidx=2*this.faceidx,!et)throw new Error("face array not initialized");for(var oa=0;oa<this.faceidx/3;++oa){var a0=3*oa,m0=2*a0,nm=et[a0],L0=et[a0+1],cm=et[a0+2];t0[m0]=nm,t0[m0+1]=L0,t0[m0+2]=nm,t0[m0+3]=cm,t0[m0+4]=L0,t0[m0+5]=cm}}}vrml(et,t0){var oa,a0,m0,nm,L0,cm,Gm,Fm,Vm,D1,O1,tg,Mg,kg,cg,Ag,K1,G1,sg="";if(sg+=et+`Shape {
`+et+` appearance Appearance {
`+et+`  material Material {
`+et+"   diffuseColor "+((oa=t0?.color)===null||oa===void 0?void 0:oa.r)+" "+((a0=t0?.color)===null||a0===void 0?void 0:a0.g)+" "+((m0=t0?.color)===null||m0===void 0?void 0:m0.b)+`
`,t0.wireframe&&this.colorArray){let d0=this.colorArray;sg+=et+"    emissiveColor "+d0[0]+" "+d0[1]+" "+d0[2]+`
`}t0?.transparent&&(sg+=et+"   transparency "+(1-t0.opacity)+`
`),sg+=et+`  }
`,sg+=et+` }
`;var Iv=et;if(et+=" ",t0 instanceof ae||t0.wireframe){let d0,y,N;sg+=et+`geometry IndexedLineSet {
`+et+` colorPerVertex TRUE
`+et+` coord Coordinate {
`+et+`  point [
`;for(let K=0;K<this.vertices;++K){let ne=3*K;d0=(nm=this.vertexArray)===null||nm===void 0?void 0:nm[ne],y=(L0=this.vertexArray)===null||L0===void 0?void 0:L0[ne+1],N=(cm=this.vertexArray)===null||cm===void 0?void 0:cm[ne+2],sg+=et+"   "+d0+" "+y+" "+N+`,
`}if(sg+=et+`  ]
`,sg+=et+` }
`,this.colorArray&&!t0.wireframe){sg+=et+` color Color {
`+et+`  color [
`;for(let K=0;K<this.vertices;++K){let ne=3*K;d0=this.colorArray[ne],y=this.colorArray[ne+1],N=this.colorArray[ne+2],sg+=et+"   "+d0+" "+y+" "+N+`,
`}sg+=et+`  ]
`,sg+=et+` }
`}if(sg+=et+` coordIndex [
`,t0.wireframe&&this.faceArray)for(let K=0;K<this.faceidx;K+=3)d0=(Gm=this.faceArray)===null||Gm===void 0?void 0:Gm[K],y=(Fm=this.faceArray)===null||Fm===void 0?void 0:Fm[K+1],N=(Vm=this.faceArray)===null||Vm===void 0?void 0:Vm[K+2],sg+=et+"  "+d0+", "+y+", "+N+`, -1,
`;else for(let K=0;K<this.vertices-1;K+=2)sg+=et+"  "+K+", "+(K+1)+`, -1,
`;sg+=et+` ]
`,sg+=et+`}
`}else{let d0,y,N;sg+=et+`geometry IndexedFaceSet {
`+et+` colorPerVertex TRUE
`+et+` normalPerVertex TRUE
`+et+` solid FALSE
`,sg+=et+` coord Coordinate {
`+et+`  point [
`;for(let K=0;K<this.vertices;++K){let ne=3*K;d0=(D1=this.vertexArray)===null||D1===void 0?void 0:D1[ne],y=(O1=this.vertexArray)===null||O1===void 0?void 0:O1[ne+1],N=(tg=this.vertexArray)===null||tg===void 0?void 0:tg[ne+2],sg+=et+"   "+d0+" "+y+" "+N+`,
`}sg+=et+`  ]
`,sg+=et+` }
`,sg+=et+` normal Normal {
`+et+`  vector [
`;for(let K=0;K<this.vertices;++K){let ne=3*K;d0=(Mg=this.normalArray)===null||Mg===void 0?void 0:Mg[ne],y=(kg=this.normalArray)===null||kg===void 0?void 0:kg[ne+1],N=(cg=this.normalArray)===null||cg===void 0?void 0:cg[ne+2],sg+=et+"   "+d0+" "+y+" "+N+`,
`}if(sg+=et+`  ]
`,sg+=et+` }
`,this.colorArray){sg+=et+` color Color {
`+et+`  color [
`;for(let K=0;K<this.vertices;++K){let ne=3*K;d0=this.colorArray[ne],y=this.colorArray[ne+1],N=this.colorArray[ne+2],sg+=et+"   "+d0+" "+y+" "+N+`,
`}sg+=et+`  ]
`,sg+=et+` }
`}sg+=et+` coordIndex [
`;for(let K=0;K<this.faceidx;K+=3)d0=(Ag=this.faceArray)===null||Ag===void 0?void 0:Ag[K],y=(K1=this.faceArray)===null||K1===void 0?void 0:K1[K+1],N=(G1=this.faceArray)===null||G1===void 0?void 0:G1[K+2],sg+=et+"  "+d0+", "+y+", "+N+`, -1,
`;sg+=et+` ]
`,sg+=et+`}
`}return sg+=Iv+"}"}truncateArrayBuffers(et=!0,t0=!1){var oa=this.vertexArray,a0=this.colorArray,m0=this.normalArray,nm=this.faceArray,L0=this.lineArray,cm=this.radiusArray;this.vertexArray=oa?.subarray(0,3*this.vertices)||null,this.colorArray=a0?.subarray(0,3*this.vertices)||null,et?(this.normalArray=m0?.subarray(0,3*this.vertices)||null,this.faceArray=nm?.subarray(0,this.faceidx)||null,this.lineidx>0?this.lineArray=L0?.subarray(0,this.lineidx)||null:this.lineArray=new Uint16Array(0)):(this.normalArray=new Float32Array(0),this.faceArray=new Uint16Array(0),this.lineArray=new Uint16Array(0)),cm&&(this.radiusArray=cm.subarray(0,this.vertices)),t0&&(this.normalArray&&(this.normalArray=new Float32Array(this.normalArray)),this.faceArray&&(this.faceArray=new Uint16Array(this.faceArray)),this.lineArray&&(this.lineArray=new Uint16Array(this.lineArray)),this.vertexArray&&(this.vertexArray=new Float32Array(this.vertexArray)),this.colorArray&&(this.colorArray=new Float32Array(this.colorArray)),this.radiusArray&&(this.radiusArray=new Float32Array(this.radiusArray))),this.__inittedArrays=!0}}class $t extends Y{constructor(et=!1,t0=!1,oa=!1){super(),this.name="",this.hasTangents=!1,this.dynamic=!0,this.verticesNeedUpdate=!1,this.elementsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.buffersNeedUpdate=!1,this.imposter=!1,this.instanced=!1,this.geometryGroups=[],this.groups=0,this.id=jo++,this.mesh=et,this.radii=t0,this.offset=oa}updateGeoGroup(et=0){var t0,oa=this.groups>0?this.geometryGroups[this.groups-1]:null;return(!oa||oa.vertices+et>(((t0=oa?.vertexArray)===null||t0===void 0?void 0:t0.length)||0)/3)&&(oa=this.addGeoGroup()),oa}vrml(et,t0){for(var oa="",a0=this.geometryGroups.length,m0=0;m0<a0;m0++)oa+=this.geometryGroups[m0].vrml(et,t0)+`,
`;return oa}addGeoGroup(){var et=new Ct(this.geometryGroups.length);return this.geometryGroups.push(et),this.groups=this.geometryGroups.length,et.vertexArray=new Float32Array(196605),et.colorArray=new Float32Array(196605),this.mesh&&(et.normalArray=new Float32Array(196605),et.faceArray=new Uint16Array(393210),et.lineArray=new Uint16Array(393210)),this.radii&&(et.radiusArray=new Float32Array(st)),et.useOffset=this.offset,et}setUpNormals(...et){for(var t0=0;t0<this.groups;t0++)this.geometryGroups[t0].setNormals(...et)}setColors(...et){for(var t0=this.geometryGroups.length,oa=0;oa<t0;oa++)this.geometryGroups[oa].setColors(...et)}setColor(...et){let t0=this.geometryGroups.length;for(var oa=0;oa<t0;oa++)this.geometryGroups[oa].setColor(...et)}setUpWireframe(...et){let t0=this.geometryGroups.length;for(var oa=0;oa<t0;oa++)this.geometryGroups[oa].setLineIndices(...et)}initTypedArrays(){for(var et=0;et<this.groups;et++){var t0=this.geometryGroups[et];t0.__inittedArrays!==!0&&t0.truncateArrayBuffers(this.mesh,!1)}}dispose(){this.dispatchEvent({type:"dispose"})}get vertices(){for(var et=0,t0=0;t0<this.groups;t0++)et+=this.geometryGroups[t0].vertices;return et}}let jo=0,Lp=0;class Mn{constructor(){this.id=Lp++,this.name="",this.children=[],this.position=new c.Vector3,this.rotation=new c.Vector3,this.matrix=new c.Matrix4,this.matrixWorld=new c.Matrix4,this.quaternion=new c.Quaternion,this.eulerOrder="XYZ",this.up=new c.Vector3(0,1,0),this.scale=new c.Vector3(1,1,1),this.matrixAutoUpdate=!0,this.matrixWorldNeedsUpdate=!0,this.rotationAutoUpdate=!0,this.useQuaternion=!1,this.visible=!0}lookAt(et){this.matrix.lookAt(et,this.position,this.up),this.rotationAutoUpdate&&(this.useQuaternion===!0?console.error("Unimplemented math operation."):this.rotation instanceof c.Vector3&&this.rotation.setEulerFromRotationMatrix(this.matrix,this.eulerOrder))}add(et){if(et!==this){et.parent=this,this.children.push(et);for(var t0=this;t0.parent!==void 0;)t0=t0.parent;t0!==void 0&&t0 instanceof sa&&t0.__addObject(et)}else console.error("Can't add $3Dmol.Object3D to itself")}remove(et){var t0=this.children.indexOf(et);if(t0!==-1){et.parent=void 0,this.children.splice(t0,1);for(var oa=this;oa.parent!==void 0;)oa=oa.parent;oa!==void 0&&oa instanceof sa&&oa.__removeObject(et)}}vrml(et){et||(et=" ");var t0=2*Math.atan2(this.quaternion.lengthxyz(),this.quaternion.w),oa=0,a0=0,m0=0;if(t0!=0){let cm=Math.sin(t0/2);oa=this.quaternion.x/cm,a0=this.quaternion.y/cm,m0=this.quaternion.z/cm}var nm=et+`Transform {
`+et+" center "+this.position.x+" "+this.position.y+" "+this.position.z+`
`+et+" rotation "+oa+" "+a0+" "+m0+" "+t0+`
`+et+` children [
`;this.geometry&&(nm+=this.geometry.vrml(et,this.material));for(var L0=0;L0<this.children.length;L0++)nm+=this.children[L0].vrml(et+" ")+`,
`;return nm+=` ]
`,nm+="}"}updateMatrix(){this.matrix.setPosition(this.position),this.useQuaternion===!1&&this.rotation instanceof c.Vector3?this.matrix.setRotationFromEuler(this.rotation,this.eulerOrder):this.matrix.setRotationFromQuaternion(this.quaternion),this.scale.x===1&&this.scale.y===1&&this.scale.z===1||this.matrix.scale(this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(et){this.matrixAutoUpdate===!0&&this.updateMatrix(),this.matrixWorldNeedsUpdate!==!0&&et!==!0||(this.parent===void 0?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1;for(var t0=0;t0<this.children.length;t0++)this.children[t0].updateMatrixWorld(!0)}clone(et){et===void 0&&(et=new Mn),et.name=this.name,et.up.copy(this.up),et.position.copy(this.position),et.rotation instanceof c.Vector3&&this.rotation instanceof c.Vector3?et.rotation.copy(this.rotation):et.rotation=this.rotation,et.eulerOrder=this.eulerOrder,et.scale.copy(this.scale),et.rotationAutoUpdate=this.rotationAutoUpdate,et.matrix.copy(this.matrix),et.matrixWorld.copy(this.matrixWorld),et.quaternion.copy(this.quaternion),et.matrixAutoUpdate=this.matrixAutoUpdate,et.matrixWorldNeedsUpdate=this.matrixWorldNeedsUpdate,et.useQuaternion=this.useQuaternion,et.visible=this.visible;for(var t0=0;t0<this.children.length;t0++){var oa=this.children[t0];et.add(oa.clone())}return et}setVisible(et){this.visible=et;for(var t0=0;t0<this.children.length;t0++)this.children[t0].setVisible(et)}}class sa extends Mn{constructor(){super(...arguments),this.fog=null,this.overrideMaterial=null,this.matrixAutoUpdate=!1,this.__objects=[],this.__lights=[],this.__objectsAdded=[],this.__objectsRemoved=[]}__addObject(et){if(et instanceof re)this.__lights.indexOf(et)===-1&&this.__lights.push(et),et.target&&et.target.parent===void 0&&this.add(et.target);else if(this.__objects.indexOf(et)===-1){this.__objects.push(et),this.__objectsAdded.push(et);var t0=this.__objectsRemoved.indexOf(et);t0!==-1&&this.__objectsRemoved.splice(t0,1)}for(var oa=0;oa<et.children.length;oa++)this.__addObject(et.children[oa])}__removeObject(et){var t0;et instanceof re?(t0=this.__lights.indexOf(et))!==-1&&this.__lights.splice(t0,1):(t0=this.__objects.indexOf(et))!==-1&&(this.__objects.splice(t0,1),this.__objectsRemoved.push(et),this.__objectsAdded.indexOf(et)!==-1&&this.__objectsAdded.splice(t0,1));for(var oa=0;oa<et.children.length;oa++)this.__removeObject(et.children[oa])}}class re extends Mn{constructor(et,t0=1){super(),this.position=new c.Vector3(0,1,0),this.target=new Mn,this.castShadow=!1,this.onlyShadow=!1,this.color=new ie.Color(et),this.intensity=t0}}const $o=new c.Matrix4;class qo{static unprojectVector(et,t0){return t0.projectionMatrixInverse.getInverse(t0.projectionMatrix),$o.multiplyMatrices(t0.matrixWorld,t0.projectionMatrixInverse),et.applyProjection($o)}static projectVector(et,t0){return t0.matrixWorldInverse.getInverse(t0.matrixWorld),$o.multiplyMatrices(t0.projectionMatrix,t0.matrixWorldInverse),et.applyProjection($o)}projectVector(et,t0){return qo.projectVector(et,t0)}unprojectVector(et,t0){return qo.unprojectVector(et,t0)}}var Kt=r(99);const i0=(pg,et)=>pg.distance-et.distance,Up=new c.Matrix4;class l0{constructor(et,t0,oa,a0){this.precision=1e-4,this.linePrecision=.2,this.ray=new c.Ray(et,t0),this.ray.direction.lengthSq()>0&&this.ray.direction.normalize(),this.near=a0||0,this.far=oa||1/0}set(et,t0){this.ray.set(et,t0)}setFromCamera(et,t0){t0.ortho?(this.ray.origin.set(et.x,et.y,(t0.near+t0.far)/(t0.near-t0.far)).unproject(t0),this.ray.direction.set(0,0,-1).transformDirection(t0.matrixWorld)):(this.ray.origin.setFromMatrixPosition(t0.matrixWorld),this.ray.direction.set(et.x,et.y,et.z),t0.projectionMatrixInverse.getInverse(t0.projectionMatrix),Up.multiplyMatrices(t0.matrixWorld,t0.projectionMatrixInverse),this.ray.direction.applyProjection(Up),this.ray.direction.sub(this.ray.origin).normalize())}intersectObjects(et,t0){for(var oa=[],a0=0,m0=t0.length;a0<m0;a0++)Wm(et,t0[a0],this,oa);return oa.sort(i0),oa}}const y0=pg=>Math.min(Math.max(pg,-1),1);var kp=new Kt.Sphere,u0=new Kt.Cylinder,f0=new Kt.Triangle,v0=new c.Vector3,p0=new c.Vector3,rm=new c.Vector3,am=new c.Vector3,ym=new c.Vector3;function Wm(pg,et,t0,oa){if(ym.getPositionFromMatrix(pg.matrixWorld),et.intersectionShape===void 0||et.hidden)return oa;var a0,m0,nm,L0,cm,Gm,Fm,Vm,D1,O1,tg,Mg,kg,cg,Ag=et.intersectionShape,K1=t0.linePrecision,G1=(K1*=pg.matrixWorld.getMaxScaleOnAxis())*K1;if(et.boundingSphere!==void 0&&et.boundingSphere instanceof Kt.Sphere&&(kp.copy(et.boundingSphere),kp.applyMatrix4(pg.matrixWorld),!t0.ray.isIntersectionSphere(kp)))return oa;for(a0=0,m0=Ag.triangle.length;a0<m0;a0++)if(Ag.triangle[a0]instanceof Kt.Triangle){if(f0.copy(Ag.triangle[a0]),f0.applyMatrix4(pg.matrixWorld),nm=f0.getNormal(),(L0=t0.ray.direction.dot(nm))>=0||(v0.subVectors(f0.a,t0.ray.origin),(Fm=nm.dot(v0)/L0)<0))continue;p0.copy(t0.ray.direction).multiplyScalar(Fm).add(t0.ray.origin),p0.sub(f0.a),rm.copy(f0.b).sub(f0.a),am.copy(f0.c).sub(f0.a);var sg=rm.dot(am),Iv=rm.lengthSq(),d0=am.lengthSq();if((Mg=(Iv*p0.dot(am)-sg*p0.dot(rm))/(Iv*d0-sg*sg))<0||Mg>1||(tg=(p0.dot(rm)-Mg*sg)/Iv)<0||tg>1||tg+Mg>1)continue;oa.push({clickable:et,distance:Fm})}for(a0=0,m0=Ag.cylinder.length;a0<m0;a0++)if(Ag.cylinder[a0]instanceof Kt.Cylinder){if(u0.copy(Ag.cylinder[a0]),u0.applyMatrix4(pg.matrixWorld),v0.subVectors(u0.c1,t0.ray.origin),cm=v0.dot(u0.direction),Gm=v0.dot(t0.ray.direction),(D1=1-(L0=y0(t0.ray.direction.dot(u0.direction)))*L0)==0)continue;kg=(L0*Gm-cm)/D1,cg=(Gm-L0*cm)/D1,p0.copy(u0.direction).multiplyScalar(kg).add(u0.c1),rm.copy(t0.ray.direction).multiplyScalar(cg).add(t0.ray.origin),Vm=am.subVectors(p0,rm).lengthSq();var y=u0.radius*u0.radius;if(Vm<=y){if((tg=L0*(Mg=Fm=(O1=(L0*cm-Gm)*(L0*cm-Gm)-D1*(v0.lengthSq()-cm*cm-y))<=0?Math.sqrt(Vm):(Gm-L0*cm-Math.sqrt(O1))/D1)-cm)<0||tg*tg>u0.lengthSq()||Mg<0)continue;oa.push({clickable:et,distance:Fm})}}for(a0=0,m0=Ag.line.length;a0<m0;a0+=2){p0.copy(Ag.line[a0]),p0.applyMatrix4(pg.matrixWorld),rm.copy(Ag.line[a0+1]),rm.applyMatrix4(pg.matrixWorld),am.subVectors(rm,p0);var N=am.lengthSq();am.normalize(),v0.subVectors(p0,t0.ray.origin);var K=v0.dot(am);Gm=v0.dot(t0.ray.direction),(D1=1-(L0=y0(t0.ray.direction.dot(am)))*L0)!=0&&(kg=(L0*Gm-K)/D1,cg=(Gm-L0*K)/D1,p0.add(am.multiplyScalar(kg)),rm.copy(t0.ray.direction).multiplyScalar(cg).add(t0.ray.origin),(Vm=am.subVectors(rm,p0).lengthSq())<G1&&kg*kg<N&&oa.push({clickable:et,distance:cg}))}for(a0=0,m0=Ag.sphere.length;a0<m0;a0++)if(Ag.sphere[a0]instanceof Kt.Sphere&&(kp.copy(Ag.sphere[a0]),kp.applyMatrix4(pg.matrixWorld),t0.ray.isIntersectionSphere(kp))){p0.subVectors(kp.center,t0.ray.origin);var ne=p0.dot(t0.ray.direction);if(O1=ne*ne-(p0.lengthSq()-kp.radius*kp.radius),ne<0)return oa;Fm=O1<=0?ne:ne-Math.sqrt(O1),oa.push({clickable:et,distance:Fm})}return oa}class h0{}class f1 extends Y{constructor(et,t0){super(),this.id=T1++,this.name="",this.image=et,this.mapping=new h0,this.wrapS=v,this.wrapT=v,this.anisotropy=1,t0?(this.format=q,this.type=k,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.magFilter=T,this.minFilter=T):(this.format=J,this.type=W,this.offset=new c.Vector2(0,0),this.repeat=new c.Vector2(1,1),this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.magFilter=g,this.minFilter=R),this.needsUpdate=!1,this.onUpdate=null}clone(et=new f1){return et.image=this.image,et.mapping=this.mapping,et.wrapS=this.wrapS,et.wrapT=this.wrapT,et.magFilter=this.magFilter,et.minFilter=this.minFilter,et.anisotropy=this.anisotropy,et.format=this.format,et.type=this.type,et.offset.copy(this.offset),et.repeat.copy(this.repeat),et.premultiplyAlpha=this.premultiplyAlpha,et.flipY=this.flipY,et.unpackAlignment=this.unpackAlignment,et}dispose(){this.dispatchEvent({type:"dispose"})}}let T1=0;class I1 extends se{constructor(et){super(),this.color=new ie.Color(16777215),this.ambient=new ie.Color(1048575),this.emissive=new ie.Color(0),this.imposter=!0,this.wrapAround=!1,this.wrapRGB=new c.Vector3(1,1,1),this.map=void 0,this.lightMap=null,this.specularMap=null,this.envMap=null,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.shading=u.SmoothShading,this.shaderID=null,this.vertexColors=n.NoColors,this.skinning=!1,this.setValues(et)}clone(et=new I1){return super.clone.call(this,et),et.color.copy(this.color),et.ambient.copy(this.ambient),et.emissive.copy(this.emissive),et.wrapAround=this.wrapAround,et.wrapRGB.copy(this.wrapRGB),et.map=this.map,et.lightMap=this.lightMap,et.specularMap=this.specularMap,et.envMap=this.envMap,et.combine=this.combine,et.reflectivity=this.reflectivity,et.refractionRatio=this.refractionRatio,et.fog=this.fog,et.shading=this.shading,et.shaderID=this.shaderID,et.vertexColors=this.vertexColors,et.skinning=this.skinning,et.morphTargets=this.morphTargets,et.morphNormals=this.morphNormals,et}}class p1 extends se{constructor(et){super(),this.color=new ie.Color(16777215),this.ambient=new ie.Color(1048575),this.emissive=new ie.Color(0),this.wrapAround=!1,this.wrapRGB=new c.Vector3(1,1,1),this.map=void 0,this.lightMap=null,this.specularMap=null,this.envMap=null,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.shading=u.SmoothShading,this.shaderID="instanced",this.vertexColors=n.NoColors,this.skinning=!1,this.sphere=null,this.setValues(et)}clone(et=new p1){return super.clone.call(this,et),et.color.copy(this.color),et.ambient.copy(this.ambient),et.emissive.copy(this.emissive),et.wrapAround=this.wrapAround,et.wrapRGB.copy(this.wrapRGB),et.map=this.map,et.lightMap=this.lightMap,et.specularMap=this.specularMap,et.envMap=this.envMap,et.combine=this.combine,et.reflectivity=this.reflectivity,et.refractionRatio=this.refractionRatio,et.fog=this.fog,et.shading=this.shading,et.shaderID=this.shaderID,et.vertexColors=this.vertexColors,et.skinning=this.skinning,et.morphTargets=this.morphTargets,et.morphNormals=this.morphNormals,et.sphere=this.sphere,et}}class Qm extends se{constructor(et){super(),this.color=new ie.Color(16777215),this.ambient=new ie.Color(1048575),this.emissive=new ie.Color(0),this.wrapAround=!1,this.wrapRGB=new c.Vector3(1,1,1),this.map=void 0,this.lightMap=null,this.specularMap=null,this.envMap=null,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.shading=u.SmoothShading,this.shaderID="lambert",this.vertexColors=n.NoColors,this.skinning=!1,this.setValues(et)}clone(et=new Qm){return super.clone.call(this,et),et.color.copy(this.color),et.ambient.copy(this.ambient),et.emissive.copy(this.emissive),et.wrapAround=this.wrapAround,et.wrapRGB.copy(this.wrapRGB),et.map=this.map,et.lightMap=this.lightMap,et.specularMap=this.specularMap,et.envMap=this.envMap,et.combine=this.combine,et.reflectivity=this.reflectivity,et.refractionRatio=this.refractionRatio,et.fog=this.fog,et.shading=this.shading,et.shaderID=this.shaderID,et.vertexColors=this.vertexColors,et.skinning=this.skinning,et.morphTargets=this.morphTargets,et.morphNormals=this.morphNormals,et}}class m1 extends Qm{constructor(et){super(et),this.shaderID="lambertdouble",this.side=l,this.outline=!1}clone(et=new m1){return super.clone.call(this,et),et}}class W1 extends se{constructor(et){super(),et=et||{},this.fog=!0,this.shaderID="outline",this.wireframe=!1,this.outlineColor=ie.CC.color(et.color||new ie.Color(0,0,0)),this.outlineWidth=et.width||.1,this.outlinePushback=et.pushback||1,this.outlineMaxPixels=et.maxpixels||0}clone(et=new W1){return super.clone.call(this,et),et.fog=this.fog,et.shaderID=this.shaderID,et.wireframe=this.wireframe,et.outlineColor=this.outlineColor,et.outlineWidth=this.outlineWidth,et.outlinePushback=this.outlinePushback,et.outlineMaxPixels=this.outlineMaxPixels,et}}class ug extends I1{constructor(et){super(et),this.shaderID="sphereimposter",this.setValues(et)}clone(et=new ug){return super.clone.call(this,et),et}}class ng extends I1{constructor(et){super(et),et=et||{},this.shaderID="sphereimposteroutline",this.outlineColor=ie.CC.color(et.color||new ie.Color(0,0,0)),this.outlineWidth=et.width||.1,this.outlinePushback=et.pushback||1,this.outlineMaxPixels=et.maxpixels||0,this.setValues(et)}clone(et=new ng){return super.clone.call(this,et),et.outlineColor=this.outlineColor,et.outlineWidth=this.outlineWidth,et.outlinePushback=this.outlinePushback,et.outlineMaxPixels=this.outlineMaxPixels,et}}class Ko extends se{constructor(et){super(),this.color=new ie.Color(16777215),this.map=new f1,this.useScreenCoordinates=!0,this.fog=!1,this.uvOffset=new c.Vector2(0,0),this.uvScale=new c.Vector2(1,1),this.depthTest=!this.useScreenCoordinates,this.sizeAttenuation=!this.useScreenCoordinates,this.screenOffset=this.screenOffset,this.scaleByViewPort=!this.sizeAttenuation,this.alignment=h.center.clone(),this.setValues(et),(et=et||{}).depthTest===void 0&&(this.depthTest=!this.useScreenCoordinates),et.sizeAttenuation===void 0&&(this.sizeAttenuation=!this.useScreenCoordinates),et.scaleByViewPort===void 0&&(this.scaleByViewPort=!this.sizeAttenuation)}clone(et=new Ko){return super.clone.call(this,et),et.color.copy(this.color),et.map=this.map,et.useScreenCoordinates=this.useScreenCoordinates,et.screenOffset=this.screenOffset,et.sizeAttenuation=this.sizeAttenuation,et.scaleByViewport=this.scaleByViewPort,et.alignment.copy(this.alignment),et.uvOffset.copy(this.uvOffset),et}}class wi extends I1{constructor(et){super(et),this.shaderID="stickimposter",this.setValues(et)}clone(et=new wi){return super.clone.call(this,et),et}}class S0 extends I1{constructor(et={}){super(et),this.shaderID="stickimposteroutline",this.outlineColor=new ie.Color(0,0,0),this.outlineWidth=.1,this.outlinePushback=1,this.outlineMaxPixels=0,et.color&&(this.outlineColor=ie.CC.color(et.color)),et.width&&(this.outlineWidth=et.width),et.pushback&&(this.outlinePushback=et.pushback),et.maxpixels&&(this.outlineMaxPixels=et.maxpixels),this.setValues(et)}clone(et=new S0){return super.clone.call(this,et),et.outlineColor=this.outlineColor,et.outlineWidth=this.outlineWidth,et.outlinePushback=this.outlinePushback,et.outlineMaxPixels=this.outlineMaxPixels,et}}class Z0 extends se{constructor(et){super(),this.transparent=!1,this.volumetric=!0,this.color=new ie.Color(16777215),this.transferfn=null,this.map=void 0,this.extent=[],this.maxdepth=100,this.unit=0,this.texmatrix=null,this.transfermin=-1,this.transfermax=1,this.subsamples=5,this.shaderID="volumetric",this.side=a,this.setValues(et)}clone(et=new Z0){return super.clone.call(this,et),et.transparent=this.transparent,et.volumetric=this.volumetric,et.color=this.color,et.transferfn=this.transferfn,et.map=this.map,et.extent=this.extent,et.maxdepth=this.maxdepth,et.unit=this.unit,et.texmatrix=this.texmatrix,et.transfermin=this.transfermin,et.transfermax=this.transfermax,et.subsamples=this.subsamples,et.shaderID=this.shaderID,et.side=this.side,et}}var Pp;(function(pg){pg[pg.LineStrip=0]="LineStrip",pg[pg.LinePieces=1]="LinePieces"})(Pp||(Pp={}));class Ip extends Mn{constructor(et,t0=new ae({color:16777215*Math.random()}),oa=Pp.LineStrip){super(),this.geometry=et,this.material=t0,this.type=oa}clone(et=new Ip(this.geometry,this.material,this.type)){return super.clone.call(this,et),et}}class x0 extends Mn{constructor(et,t0){super(),this.geometry=et,this.material=t0}clone(et){return et===void 0&&(et=new x0(this.geometry,this.material)),super.clone.call(this,et),et}}class B0 extends Mn{constructor(et=new Ko){super(),this.material=et,this.rotation3d=this.rotation,this.rotation=0}updateMatrix(){this.matrix.setPosition(this.position),this.rotation3d.set(0,0,this.rotation),this.matrix.setRotationFromEuler(this.rotation3d),this.scale.x===1&&this.scale.y===1||this.matrix.scale(this.scale),this.matrixWorldNeedsUpdate=!0}clone(et=new B0(this.material)){return Mn.prototype.clone.call(this,et),et}}const Y0={opacity:{type:"f",value:1},fogColor:{type:"c",value:new ie.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3}},im={vertexShader:`uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;

attribute vec3 position;
attribute vec3 color;

varying vec3 vColor;
varying vec4 mvPosition;

void main() {

    vColor = color;
    mvPosition = modelViewMatrix * vec4( position, 1.0 );
    gl_Position = projectionMatrix * mvPosition;

}`.replace("#define GLSLIFY 1",""),fragmentShader:`uniform mat4 viewMatrix;
uniform float opacity;
uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
varying vec3 vColor;
varying vec4 mvPosition;

//DEFINEFRAGCOLOR
void main() {
    gl_FragColor = vec4( vColor, opacity );
    if(fogNear != fogFar) {
        float depth = -mvPosition.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }
}`.replace("#define GLSLIFY 1",""),uniforms:Y0},om={opacity:{type:"f",value:1},fogColor:{type:"c",value:new ie.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}},Cm={fragmentShader:`uniform mat4 viewMatrix;
uniform float opacity;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
#ifdef SHADED
uniform highp sampler2D shading;
#endif
varying vec3 vLightFront;
varying vec3 vColor;
//DEFINEFRAGCOLOR

void main() {

    gl_FragColor = vec4( vec3 ( 1.0 ), opacity );

    #ifndef WIREFRAME
    gl_FragColor.xyz *= vLightFront;
    #endif

#ifdef SHADED
    ivec2 dim = textureSize(shading,0);
    float shadowFactor = texture2D(shading,vec2(gl_FragCoord.x/float(dim.x),gl_FragCoord.y/float(dim.y))).r;
    vColor *= shadowFactor;
#endif
    gl_FragColor = gl_FragColor * vec4( vColor, opacity );
    float depth = gl_FragCoord.z / gl_FragCoord.w;

    float fogFactor = smoothstep( fogNear, fogFar, depth );

    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );

}


`.replace("#define GLSLIFY 1",""),vertexShader:`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];

attribute vec3 offset;
attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;
attribute float radius;

varying vec3 vColor;
varying vec3 vLightFront;

void main() {

    vColor = color;

    vec3 objectNormal = normal;
    vec3 transformedNormal = normalMatrix * objectNormal;
    vec4 mvPosition = modelViewMatrix * vec4( position * radius + offset, 1.0 );

    vLightFront = vec3( 0.0 );

    transformedNormal = normalize( transformedNormal );

    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );
    vec3 dirVector = normalize( lDirection.xyz );
    float dotProduct = dot( transformedNormal, dirVector );
    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );

    vLightFront += directionalLightColor[ 0 ] * directionalLightWeighting;

    gl_Position = projectionMatrix * mvPosition;
}

`.replace("#define GLSLIFY 1",""),uniforms:om},r1={opacity:{type:"f",value:1},fogColor:{type:"c",value:new ie.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}},Om={fragmentShader:`uniform mat4 viewMatrix;
uniform float opacity;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
#ifdef SHADED
uniform highp sampler2D shading;
#endif
varying vec3 vLightFront;
varying vec3 vColor;
varying vec4 mvPosition;


//DEFINEFRAGCOLOR

void main() {

    gl_FragColor = vec4( vec3 ( 1.0 ), opacity );

    #ifndef WIREFRAME
    gl_FragColor.xyz *= vLightFront;
    #endif
#ifdef SHADED
    ivec2 dim = textureSize(shading,0);
    float shadowFactor = texture2D(shading,vec2(gl_FragCoord.x/float(dim.x),gl_FragCoord.y/float(dim.y))).r;
    vColor *= shadowFactor;
#endif
    gl_FragColor = gl_FragColor * vec4( vColor, opacity );

    if(fogNear != fogFar) {
        float depth = -mvPosition.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }

}`.replace("#define GLSLIFY 1",""),vertexShader:`
uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;

varying vec3 vColor;
varying vec3 vLightFront;
varying vec4 mvPosition;

void main() {

    vColor = color;

    vec3 objectNormal = normal;
    vec3 transformedNormal = normalMatrix * objectNormal;
    mvPosition = modelViewMatrix * vec4( position, 1.0 );

    vLightFront = vec3( 0.0 );

    transformedNormal = normalize( transformedNormal );

    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );
    vec3 dirVector = normalize( lDirection.xyz );
    float dotProduct = dot( transformedNormal, dirVector );
    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );

    vLightFront += directionalLightColor[ 0 ] * directionalLightWeighting;

    gl_Position = projectionMatrix * mvPosition;
}`.replace("#define GLSLIFY 1",""),uniforms:r1},a1={opacity:{type:"f",value:1},fogColor:{type:"c",value:new ie.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}},hg={fragmentShader:`
#ifdef SHADED
uniform highp sampler2D shading;
#endif

uniform mat4 viewMatrix;
uniform float opacity;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;

varying vec3 vLightFront;
varying vec3 vLightBack;

varying vec3 vColor;
varying vec4 mvPosition;

//DEFINEFRAGCOLOR

void main() {

    gl_FragColor = vec4( vec3 ( 1.0 ), opacity );

    #ifndef WIREFRAME
    if ( gl_FrontFacing )
       gl_FragColor.xyz *= vLightFront;
    else
       gl_FragColor.xyz *= vLightBack;
    #endif

    vec3 color = vColor;
#ifdef SHADED
    ivec2 dim = textureSize(shading,0);
    float shadowFactor = texture2D(shading,vec2(gl_FragCoord.x/float(dim.x),gl_FragCoord.y/float(dim.y))).r;
    color *= shadowFactor;
#endif
    gl_FragColor = gl_FragColor * vec4( color, opacity );

    if(fogNear != fogFar) {
        float depth = -mvPosition.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }

}


`.replace("#define GLSLIFY 1",""),vertexShader:`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;

varying vec3 vColor;
varying vec3 vLightFront;
varying vec3 vLightBack;
varying vec4 mvPosition;

void main() {

    vColor = color;

    vec3 objectNormal = normal;
    vec3 transformedNormal = normalMatrix * objectNormal;
    mvPosition = modelViewMatrix * vec4( position, 1.0 );

    vLightFront = vec3( 0.0 );
    vLightBack = vec3( 0.0 );

    transformedNormal = normalize( transformedNormal );

    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );
    vec3 dirVector = normalize( lDirection.xyz );
    float dotProduct = dot( transformedNormal, dirVector );
    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );
    vec3 directionalLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );

    vLightFront += directionalLightColor[ 0 ] * directionalLightWeighting;
    vLightBack += directionalLightColor[ 0 ] * directionalLightWeightingBack;

    gl_Position = projectionMatrix * mvPosition;
}

`.replace("#define GLSLIFY 1",""),uniforms:a1},pm={opacity:{type:"f",value:1},outlineColor:{type:"c",value:new ie.Color(0,0,0)},fogColor:{type:"c",value:new ie.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},outlineWidth:{type:"f",value:.1},outlinePushback:{type:"f",value:1},outlineMaxPixels:{type:"f",value:0}},S1={fragmentShader:`

uniform float opacity;
uniform vec3 outlineColor;
uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;

varying vec4 mvPosition;
//DEFINEFRAGCOLOR

void main() {
    gl_FragColor = vec4( outlineColor, 1 );

    if(fogNear != fogFar) {
        float depth = -mvPosition.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }
}


`.replace("#define GLSLIFY 1",""),vertexShader:`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform float outlineWidth;
uniform float outlinePushback;
uniform float vWidth;
uniform float vHeight;
uniform float outlineMaxPixels;

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;

varying vec4 mvPosition;

void main() {

    vec4 norm = modelViewMatrix*vec4(normalize(normal),0.0);
    mvPosition = modelViewMatrix * vec4( position, 1.0 );
    mvPosition.xy += norm.xy*outlineWidth;
    vec4 outpos = projectionMatrix * mvPosition;

    if(outlineMaxPixels > 0.0) {
        vec4 unadjusted = projectionMatrix*modelViewMatrix * vec4( position, 1.0 );
        float w = outpos.w;
        //normalize homogeneous coords
        unadjusted /= unadjusted.w;
        outpos /= outpos.w;
        vec2 diff = outpos.xy-unadjusted.xy;
        //put into pixels
        diff.x *= vWidth;
        diff.y *= vHeight;
        if ( length(diff) > outlineMaxPixels) {
            vec2 ndiff = normalize(diff)*outlineMaxPixels;
            ndiff.x /= vWidth;
            ndiff.y /= vHeight;
            outpos.xy = unadjusted.xy;
            outpos.xy += ndiff;
        }
        outpos *= w; //if I don't do this things blow up
    }
    gl_Position = outpos;
    mvPosition.z -= outlinePushback; //go backwards in model space
    vec4 pushpos = projectionMatrix*mvPosition; //project to get z in projection space, I'm probably missing some simple math to do the same thing..
    gl_Position.z = gl_Position.w*pushpos.z/pushpos.w;
}

`.replace("#define GLSLIFY 1",""),uniforms:pm},U1={fragmentShader:`uniform sampler2D colormap;
varying highp vec2 vTexCoords;
uniform vec2 dimensions;
//DEFINEFRAGCOLOR
void main (void) {
   gl_FragColor = texture2D(colormap, vTexCoords);

   //gl_FragColor.g = gl_FragColor.b =  gl_FragColor.r; //debug shading 
}
        `.replace("#define GLSLIFY 1",""),vertexShader:`attribute vec2 vertexPosition;
varying highp vec2 vTexCoords;
const vec2 scale = vec2(0.5, 0.5);

void main() {
   vTexCoords  = vertexPosition * scale + scale; // scale vertex attribute to [0,1] range
   gl_Position = vec4(vertexPosition, 0.0, 1.0);
}
        `.replace("#define GLSLIFY 1",""),uniforms:{}},J1={fragmentShader:`
        
precision highp float;
precision highp int;
precision highp sampler2D;

uniform sampler2D tColor;
varying highp vec2 vTexCoords;

// adapted from https://github.com/kosua20/Rendu
// MIT License Copyright (c) 2017 Simon Rodriguez
// by way of molstar (https://github.com/molstar/molstar/blob/master/src/mol-gl/shader/fxaa.frag.ts)

#define QUALITY(q) ((q) < 5 ? 1.0 : ((q) > 5 ? ((q) < 10 ? 2.0 : ((q) < 11 ? 4.0 : 8.0)) : 1.5))

float rgb2luma(vec3 rgb){
    return sqrt(dot(rgb, vec3(0.299, 0.587, 0.114)));
}

float sampleLuma(vec2 uv) {
    return rgb2luma(texture2D(tColor, uv).rgb);
}

float sampleLuma(vec2 uv, float uOffset, float vOffset) {
    uv += vec2(uOffset, vOffset);
    return sampleLuma(uv);
}

//DEFINEFRAGCOLOR
void main(void) {
    ivec2 dim = textureSize(tColor,0);
    vec2 dimensions = vec2(float(dim.x),float(dim.y));
    vec2 inverseScreenSize = vec2(1.0 / dimensions.x, 1.0 / dimensions.y);
    vec2 coords = vTexCoords;

    vec4 colorCenter = texture2D(tColor, coords);
    float dEdgeThresholdMin = 0.0312;
    float dEdgeThresholdMax = 0.125;
    int dIterations = 12;
    float dSubpixelQuality = 0.3;

    // Luma at the current fragment
    float lumaCenter = rgb2luma(colorCenter.rgb);

    // Luma at the four direct neighbours of the current fragment.
    float lumaDown = sampleLuma(coords, 0.0, -inverseScreenSize.y);
    float lumaUp = sampleLuma(coords, 0.0, inverseScreenSize.y);
    float lumaLeft = sampleLuma(coords, -inverseScreenSize.x, 0.0);
    float lumaRight = sampleLuma(coords, inverseScreenSize.x, 0.0);

    // Find the maximum and minimum luma around the current fragment.
    float lumaMin = min(lumaCenter, min(min(lumaDown, lumaUp), min(lumaLeft, lumaRight)));
    float lumaMax = max(lumaCenter, max(max(lumaDown, lumaUp), max(lumaLeft, lumaRight)));

    // Compute the delta.
    float lumaRange = lumaMax - lumaMin;

    // If the luma variation is lower that a threshold (or if we are in a really dark area),
    // we are not on an edge, don't perform any AA.
    if (lumaRange < max(dEdgeThresholdMin, lumaMax * dEdgeThresholdMax)) {
        gl_FragColor = colorCenter;
        return;
    }

    // Query the 4 remaining corners lumas.
    float lumaDownLeft = sampleLuma(coords, -inverseScreenSize.x, -inverseScreenSize.y);
    float lumaUpRight = sampleLuma(coords, inverseScreenSize.x, inverseScreenSize.y);
    float lumaUpLeft = sampleLuma(coords, -inverseScreenSize.x, inverseScreenSize.y);
    float lumaDownRight = sampleLuma(coords, inverseScreenSize.x, -inverseScreenSize.y);

    // Combine the four edges lumas (using intermediary variables for future computations
    // with the same values).
    float lumaDownUp = lumaDown + lumaUp;
    float lumaLeftRight = lumaLeft + lumaRight;

    // Same for corners
    float lumaLeftCorners = lumaDownLeft + lumaUpLeft;
    float lumaDownCorners = lumaDownLeft + lumaDownRight;
    float lumaRightCorners = lumaDownRight + lumaUpRight;
    float lumaUpCorners = lumaUpRight + lumaUpLeft;

    // Compute an estimation of the gradient along the horizontal and vertical axis.
    float edgeHorizontal = abs(-2.0 * lumaLeft + lumaLeftCorners) + abs(-2.0 * lumaCenter + lumaDownUp) * 2.0 + abs(-2.0 * lumaRight + lumaRightCorners);
    float edgeVertical = abs(-2.0 * lumaUp + lumaUpCorners) + abs(-2.0 * lumaCenter + lumaLeftRight) * 2.0 + abs(-2.0 * lumaDown + lumaDownCorners);

    // Is the local edge horizontal or vertical ?
    bool isHorizontal = (edgeHorizontal >= edgeVertical);

    // Choose the step size (one pixel) accordingly.
    float stepLength = isHorizontal ? inverseScreenSize.y : inverseScreenSize.x;

    // Select the two neighboring texels lumas in the opposite direction to the local edge.
    float luma1 = isHorizontal ? lumaDown : lumaLeft;
    float luma2 = isHorizontal ? lumaUp : lumaRight;
    // Compute gradients in this direction.
    float gradient1 = luma1 - lumaCenter;
    float gradient2 = luma2 - lumaCenter;

    // Which direction is the steepest ?
    bool is1Steepest = abs(gradient1) >= abs(gradient2);

    // Gradient in the corresponding direction, normalized.
    float gradientScaled = 0.25 * max(abs(gradient1), abs(gradient2));

    // Average luma in the correct direction.
    float lumaLocalAverage = 0.0;
    if(is1Steepest){
        // Switch the direction
        stepLength = -stepLength;
        lumaLocalAverage = 0.5 * (luma1 + lumaCenter);
    } else {
        lumaLocalAverage = 0.5 * (luma2 + lumaCenter);
    }

    // Shift UV in the correct direction by half a pixel.
    vec2 currentUv = coords;
    if(isHorizontal){
        currentUv.y += stepLength * 0.5;
    } else {
        currentUv.x += stepLength * 0.5;
    }

    // Compute offset (for each iteration step) in the right direction.
    vec2 offset = isHorizontal ? vec2(inverseScreenSize.x, 0.0) : vec2(0.0, inverseScreenSize.y);
    // Compute UVs to explore on each side of the edge, orthogonally.
    // The QUALITY allows us to step faster.
    vec2 uv1 = currentUv - offset * QUALITY(0);
    vec2 uv2 = currentUv + offset * QUALITY(0);

    // Read the lumas at both current extremities of the exploration segment,
    // and compute the delta wrt to the local average luma.
    float lumaEnd1 = sampleLuma(uv1);
    float lumaEnd2 = sampleLuma(uv2);
    lumaEnd1 -= lumaLocalAverage;
    lumaEnd2 -= lumaLocalAverage;

    // If the luma deltas at the current extremities is larger than the local gradient,
    // we have reached the side of the edge.
    bool reached1 = abs(lumaEnd1) >= gradientScaled;
    bool reached2 = abs(lumaEnd2) >= gradientScaled;
    bool reachedBoth = reached1 && reached2;

    // If the side is not reached, we continue to explore in this direction.
    if(!reached1){
        uv1 -= offset * QUALITY(1);
    }
    if(!reached2){
        uv2 += offset * QUALITY(1);
    }

    // If both sides have not been reached, continue to explore.
    if(!reachedBoth){
        for(int i = 2; i < dIterations; i++){
            // If needed, read luma in 1st direction, compute delta.
            if(!reached1){
                lumaEnd1 = sampleLuma(uv1);
                lumaEnd1 = lumaEnd1 - lumaLocalAverage;
            }
            // If needed, read luma in opposite direction, compute delta.
            if(!reached2){
                lumaEnd2 = sampleLuma(uv2);
                lumaEnd2 = lumaEnd2 - lumaLocalAverage;
            }
            // If the luma deltas at the current extremities is larger than the local gradient,
            // we have reached the side of the edge.
            reached1 = abs(lumaEnd1) >= gradientScaled;
            reached2 = abs(lumaEnd2) >= gradientScaled;
            reachedBoth = reached1 && reached2;

            // If the side is not reached, we continue to explore in this direction,
            // with a variable quality.
            if(!reached1){
                uv1 -= offset * QUALITY(i);
            }
            if(!reached2){
                uv2 += offset * QUALITY(i);
            }

            // If both sides have been reached, stop the exploration.
            if(reachedBoth){
                break;
            }
        }
    }

    // Compute the distances to each side edge of the edge (!).
    float distance1 = isHorizontal ? (coords.x - uv1.x) : (coords.y - uv1.y);
    float distance2 = isHorizontal ? (uv2.x - coords.x) : (uv2.y - coords.y);

    // In which direction is the side of the edge closer ?
    bool isDirection1 = distance1 < distance2;
    float distanceFinal = min(distance1, distance2);

    // Thickness of the edge.
    float edgeThickness = (distance1 + distance2);

    // Is the luma at center smaller than the local average ?
    bool isLumaCenterSmaller = lumaCenter < lumaLocalAverage;

    // If the luma at center is smaller than at its neighbour,
    // the delta luma at each end should be positive (same variation).
    bool correctVariation1 = (lumaEnd1 < 0.0) != isLumaCenterSmaller;
    bool correctVariation2 = (lumaEnd2 < 0.0) != isLumaCenterSmaller;

    // Only keep the result in the direction of the closer side of the edge.
    bool correctVariation = isDirection1 ? correctVariation1 : correctVariation2;

    // UV offset: read in the direction of the closest side of the edge.
    float pixelOffset = - distanceFinal / edgeThickness + 0.5;

    // If the luma variation is incorrect, do not offset.
    float finalOffset = correctVariation ? pixelOffset : 0.0;

    // Sub-pixel shifting
    // Full weighted average of the luma over the 3x3 neighborhood.
    float lumaAverage = (1.0 / 12.0) * (2.0 * (lumaDownUp + lumaLeftRight) + lumaLeftCorners + lumaRightCorners);
    // Ratio of the delta between the global average and the center luma,
    // over the luma range in the 3x3 neighborhood.
    float subPixelOffset1 = clamp(abs(lumaAverage - lumaCenter) / lumaRange, 0.0, 1.0);
    float subPixelOffset2 = (-2.0 * subPixelOffset1 + 3.0) * subPixelOffset1 * subPixelOffset1;
    // Compute a sub-pixel offset based on this delta.
    float subPixelOffsetFinal = subPixelOffset2 * subPixelOffset2 * float(dSubpixelQuality);

    // Pick the biggest of the two offsets.
    finalOffset = max(finalOffset, subPixelOffsetFinal);

    // Compute the final UV coordinates.
    vec2 finalUv = coords;
    if(isHorizontal){
        finalUv.y += finalOffset * stepLength;
    } else {
        finalUv.x += finalOffset * stepLength;
    }

    // Read the color at the new UV coordinates, and use it.
    gl_FragColor = texture2D(tColor, finalUv);
}        

/* old fxaa implementation
uniform highp sampler2D colormap;
varying highp vec2 vTexCoords;


// Basic FXAA implementation based on the code on geeks3d.com 
#define FXAA_REDUCE_MIN (1.0/ 128.0)
#define FXAA_REDUCE_MUL (1.0 / 8.0)
#define FXAA_SPAN_MAX 8.0


vec4 applyFXAA(vec2 fragCoord, highp sampler2D tex)
{
    vec4 color;
    ivec2 dim = textureSize(tex,0);
    vec2 dimensions = vec2(float(dim.x),float(dim.y));
    vec2 inverseVP = vec2(1.0 / dimensions.x, 1.0 / dimensions.y);
    vec4 rgbNW = texture2D(tex, fragCoord + vec2(-1.0, -1.0) * inverseVP);
    vec4 rgbNE = texture2D(tex, fragCoord + vec2(1.0, -1.0) * inverseVP);
    vec4 rgbSW = texture2D(tex, fragCoord + vec2(-1.0, 1.0) * inverseVP);
    vec4 rgbSE = texture2D(tex, fragCoord + vec2(1.0, 1.0) * inverseVP);
    vec4 rgbM  = texture2D(tex, fragCoord );
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW.xyz, luma);
    float lumaNE = dot(rgbNE.xyz, luma);
    float lumaSW = dot(rgbSW.xyz, luma);
    float lumaSE = dot(rgbSE.xyz, luma);
    float lumaM  = dot(rgbM.xyz,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                        (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
            max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
            dir * rcpDirMin)) * inverseVP;

    vec4 rgbA = 0.5 * (
        texture2D(tex, fragCoord + dir * (1.0 / 3.0 - 0.5)) +
        texture2D(tex, fragCoord  + dir * (2.0 / 3.0 - 0.5)));
    vec4 rgbB = rgbA * 0.5 + 0.25 * (
        texture2D(tex, fragCoord  + dir * -0.5) +
        texture2D(tex, fragCoord  + dir * 0.5));

    float lumaB = dot(rgbB.xyz, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = rgbA;
    else
        color = rgbB;

    return color;
}


//DEFINEFRAGCOLOR
void main (void) {
    ivec2 dim = textureSize(colormap,0);

  gl_FragColor = applyFXAA(vTexCoords, colormap);
}
        
*/`.replace("#define GLSLIFY 1",""),vertexShader:`attribute vec2 vertexPosition;
varying highp vec2 vTexCoords;
const vec2 scale = vec2(0.5, 0.5);

void main() {
   vTexCoords  = vertexPosition * scale + scale; // scale vertex attribute to [0,1] range
   gl_Position = vec4(vertexPosition, 0.0, 1.0);
}
        `.replace("#define GLSLIFY 1",""),uniforms:{}},l1={opacity:{type:"f",value:1},fogColor:{type:"c",value:new ie.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}},Km={vertexShader:`uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;

varying vec2 mapping;
varying vec3 vColor;
varying float rval;
varying vec3 vLight;
varying vec3 center;

void main() {

    vColor = color;
    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
    center = mvPosition.xyz;
    vec4 projPosition = projectionMatrix * mvPosition;
    vec4 adjust = projectionMatrix* vec4(normal,0.0); adjust.z = 0.0; adjust.w = 0.0;
    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );
    vLight = normalize( lDirection.xyz );
    mapping = normal.xy;
    rval = abs(normal.x);
    gl_Position = projPosition+adjust;

}
`.replace("#define GLSLIFY 1",""),fragmentShader:`
uniform mat4 viewMatrix;
uniform float opacity;
uniform mat4 projectionMatrix;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
uniform float uDepth;
uniform vec3 directionalLightColor[ 1 ];

varying vec3 vColor;
varying vec2 mapping;
varying float rval;
varying vec3 vLight;
varying vec3 center;

#ifdef SHADED
uniform highp sampler2D shading;
#endif

//DEFINEFRAGCOLOR

void main() {
    float lensqr = dot(mapping,mapping);
    float rsqr = rval*rval;
    if(lensqr > rsqr)
       discard;
    float z = sqrt(rsqr-lensqr);
    vec3 cameraPos = center+ vec3(mapping.x,mapping.y,z);
    vec4 clipPos = projectionMatrix * vec4(cameraPos, 1.0);
    float ndcDepth = clipPos.z / clipPos.w;
    gl_FragDepthEXT = ((gl_DepthRange.diff * ndcDepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;
    vec3 norm = normalize(vec3(mapping.x,mapping.y,z));
    float dotProduct = dot( norm, vLight );
    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );
    vec3 vLight = directionalLightColor[ 0 ] * directionalLightWeighting;
    vec3 color = vLight*vColor;
#ifdef SHADED
    ivec2 dim = textureSize(shading,0);
    float shadowFactor = texture2D(shading,vec2(gl_FragCoord.x/float(dim.x),gl_FragCoord.y/float(dim.y))).r;
    color *= shadowFactor;
#endif    
    gl_FragColor = vec4(color, opacity*opacity );

    if(fogNear != fogFar) {
        float depth = -cameraPos.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }
     
}

`.replace("#define GLSLIFY 1",""),uniforms:l1},A1={opacity:{type:"f",value:1},outlineColor:{type:"c",value:new ie.Color(0,0,0)},fogColor:{type:"c",value:new ie.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},outlineWidth:{type:"f",value:.1},outlinePushback:{type:"f",value:1},outlineMaxPixels:{type:"f",value:0}},y1={fragmentShader:`

uniform float opacity;
uniform vec3 outlineColor;
uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
uniform mat4 projectionMatrix;
varying vec2 mapping;
varying float rval;
varying vec3 center;

uniform float outlinePushback;

//DEFINEFRAGCOLOR

void main() {
    float lensqr = dot(mapping,mapping);
    float rsqr = rval*rval;
    if(lensqr > rsqr)
       discard;
    float z = sqrt(rsqr-lensqr);
    vec3 cameraPos = center+ vec3(mapping.x,mapping.y,z-outlinePushback);
    vec4 clipPos = projectionMatrix * vec4(cameraPos, 1.0);
    float ndcDepth = clipPos.z / clipPos.w;
    gl_FragDepthEXT = ((gl_DepthRange.diff * ndcDepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;
    gl_FragColor = vec4(outlineColor, 1 );

    if(fogNear != fogFar) {
        float depth = -cameraPos.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }
}


`.replace("#define GLSLIFY 1",""),vertexShader:`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform float outlineWidth;
uniform float outlinePushback;
uniform float outlineMaxPixels;
uniform float vWidth;
uniform float vHeight;

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;

varying vec2 mapping;
varying float rval;
varying vec3 center;

void main() {

    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
    center = mvPosition.xyz;
    vec4 projPosition = projectionMatrix * mvPosition;
    vec2 norm = normal.xy + vec2(sign(normal.x)*outlineWidth,sign(normal.y)*outlineWidth);

    vec4 adjust = projectionMatrix* vec4(norm,normal.z,1.0); 
    mapping = norm.xy;
    rval = abs(norm.x);
    gl_Position = projPosition+vec4(adjust.xy,0.0,0.0);

    if(outlineMaxPixels > 0.0) {
        vec4 unadjusted = projectionMatrix*vec4(center.x+normal.x, center.y,center.z,1.0); 
        vec4 ccoord = projectionMatrix*vec4(center.xyz,1.0);
        adjust = projectionMatrix* vec4(center.x+norm.x,center.y,center.z,1.0); 
        //subtract center 
        unadjusted.xyz -= ccoord.xyz;
        adjust.xyz -= ccoord.xyz;
        unadjusted /= unadjusted.w;
        adjust /= adjust.w;
        float diff = abs(adjust.x-unadjusted.x);
        diff *= vWidth;
        if(diff > outlineMaxPixels) {
            
            float fixlen = abs(unadjusted.x) + outlineMaxPixels/vWidth;
            //adjsut reval by ratio of lengths
            rval *= fixlen/abs(adjust.x);
        }

    }
}

`.replace("#define GLSLIFY 1",""),uniforms:A1},uv={fragmentShader:`

uniform vec3 color;
uniform sampler2D map;
uniform float opacity;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
uniform float alphaTest;

varying vec2 vUV;
//DEFINEFRAGCOLOR

void main() {

    vec4 texture = texture2D(map, vUV);

    if (texture.a <= alphaTest) discard;

    gl_FragColor = vec4(color * texture.xyz, texture.a * opacity);

    if (fogNear != fogFar) {

        float depth = gl_FragCoord.z / gl_FragCoord.w; //probably wrong
        float fogFactor = smoothstep(fogNear, fogFar, depth);        
        gl_FragColor = mix(gl_FragColor, vec4(fogColor, gl_FragColor.w), fogFactor);
    }
}

`.replace("#define GLSLIFY 1",""),vertexShader:`

uniform int useScreenCoordinates;
uniform vec3 screenPosition;
uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform float rotation;
uniform vec2 scale;
uniform vec2 alignment;
uniform vec2 uvOffset;
uniform vec2 uvScale;

attribute vec2 position;
attribute vec2 uv;

varying vec2 vUV;

void main() {

    vUV = uvOffset + uv * uvScale;

    vec2 alignedPosition = position + alignment;

    vec2 rotatedPosition;
    rotatedPosition.x = ( cos(rotation) * alignedPosition.x - sin(rotation) * alignedPosition.y ) * scale.x;
    rotatedPosition.y = ( sin(rotation) * alignedPosition.x + cos(rotation) * alignedPosition.y ) * scale.y;

    vec4 finalPosition;

    if(useScreenCoordinates != 0) {
        finalPosition = vec4(screenPosition.xy + rotatedPosition, screenPosition.z, 1.0);
    }

    else {
        finalPosition = projectionMatrix * modelViewMatrix * vec4(0.0, 0.0, 0.0, 1.0); finalPosition /= finalPosition.w;
        finalPosition.xy += rotatedPosition; 
    }

    gl_Position = finalPosition;

}

`.replace("#define GLSLIFY 1",""),uniforms:{}},$g={opacity:{type:"f",value:1},fogColor:{type:"c",value:new ie.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}},Sv=`uniform float opacity;
uniform mat4 projectionMatrix;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;

varying vec3 vLight;
varying vec3 vColor;
varying vec3 cposition;
varying vec3 p1;
varying vec3 p2;
varying float r;

#ifdef SHADED
uniform highp sampler2D shading;
#endif

//DEFINEFRAGCOLOR

//cylinder-ray intersection testing taken from http://mrl.nyu.edu/~dzorin/cg05/lecture12.pdf
//also useful: http://stackoverflow.com/questions/9595300/cylinder-impostor-in-glsl
//with a bit more care (caps) this could be a general cylinder imposter (see also outline)
void main() {
    vec3 color = abs(vColor);
    vec3 pos = cposition;
    vec3 p = pos; //ray point
    vec3 v = vec3(0.0,0.0,-1.0); //ray normal - orthographic
    if(projectionMatrix[3][3] == 0.0) v = normalize(pos); //ray normal - perspective
    vec3 pa = p1; //cyl start
    vec3 va = normalize(p2-p1); //cyl norm
    vec3 tmp1 = v-(dot(v,va)*va);
    vec3 deltap = p-pa;
    float A = dot(tmp1,tmp1);
    if(A == 0.0) discard;
    vec3 tmp2 = deltap-(dot(deltap,va)*va);
    float B = 2.0*dot(tmp1, tmp2);
    float C = dot(tmp2,tmp2)-r*r;
//quadratic equation!
    float det = (B*B) - (4.0*A*C);
    if(det < 0.0) discard;
    float sqrtDet = sqrt(det);
    float posT = (-B+sqrtDet)/(2.0*A);
    float negT = (-B-sqrtDet)/(2.0*A);
    float intersectionT = min(posT,negT);
    vec3 qi = p+v*intersectionT;
    float dotp1 = dot(va,qi-p1);
    float dotp2 = dot(va,qi-p2);
    vec3 norm;
    if( dotp1 < 0.0 || dotp2 > 0.0) { //(p-c)^2 + 2(p-c)vt +v^2+t^2 - r^2 = 0
       vec3 cp;
       if( dotp1 < 0.0) {  
//        if(vColor.x < 0.0 ) discard; //color sign bit indicates if we should cap or not
        cp = p1;
       } else {
//          if(vColor.y < 0.0 ) discard;
          cp = p2;
       }
       vec3 diff = p-cp;
       A = dot(v,v);
       B = dot(diff,v)*2.0;
       C = dot(diff,diff)-r*r;
       det = (B*B) - (4.0*C);
       if(det < 0.0) discard;
       sqrtDet = sqrt(det);
       posT = (-B+sqrtDet)/(2.0);
       negT = (-B-sqrtDet)/(2.0);
       float t = min(posT,negT);
       qi = p+v*t; 
       norm = normalize(qi-cp); 
    } else {
       norm = normalize(qi-(dotp1*va + p1));
    }
    vec4 clipPos = projectionMatrix * vec4(qi, 1.0);
    float ndcDepth = clipPos.z / clipPos.w;
    float depth = ((gl_DepthRange.diff * ndcDepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;
    gl_FragDepthEXT = depth;`,Yv={fragmentShader:[Sv,`    float dotProduct = dot( norm, vLight );
    vec3 light = vec3( max( dotProduct, 0.0 ) );
    color *= light;
#ifdef SHADED
    ivec2 dim = textureSize(shading,0);
    float shadowFactor = texture2D(shading,vec2(gl_FragCoord.x/float(dim.x),gl_FragCoord.y/float(dim.y))).r;
    color *= shadowFactor;
#endif    
    gl_FragColor = vec4(color, opacity*opacity );
    if(fogNear != fogFar) {
        float depth = -qi.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }
}`].join(`
`),vertexShader:`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;
attribute float radius;

varying vec3 vColor;
varying vec3 vLight;
varying vec3 cposition;
varying vec3 p1;
varying vec3 p2;
varying float r;

void main() {

    vColor = color; vColor.z = abs(vColor.z); //z indicates which vertex and so would vary
    r = abs(radius);
    vec4 to = modelViewMatrix*vec4(normal, 1.0); //normal is other point of cylinder
    vec4 pt = modelViewMatrix*vec4(position, 1.0);
    vec4 mvPosition = pt;
    p1 = pt.xyz; p2 = to.xyz;
    vec3 norm = to.xyz-pt.xyz;
    float mult = 1.1; //slop to account for perspective of sphere
    if(length(p1) > length(p2)) { //billboard at level of closest point
       mvPosition = to;
    }
    vec3 n = normalize(mvPosition.xyz);
    bool isperspective = (projectionMatrix[3][3] == 0.0);
//intersect with the plane defined by the camera looking at the billboard point
    if(color.z >= 0.0) { //p1
       if(isperspective) { //perspective
         vec3 pnorm = normalize(p1);
         float t = dot(mvPosition.xyz-p1,n)/dot(pnorm,n);
         mvPosition.xyz = p1+t*pnorm; 
       } else { //orthographic
         mvPosition.xyz = p1;
       }
    } else {
      if(isperspective) { //perspective
         vec3 pnorm = normalize(p2);
         float t = dot(mvPosition.xyz-p2,n)/dot(pnorm,n);
         mvPosition.xyz = p2+t*pnorm;
       } else { //orthographic
         mvPosition.xyz = p2;
       } 
       mult *= -1.0;
    }

    if(isperspective) { //perspective
      vec3 cr = normalize(cross(mvPosition.xyz,norm))*radius;
      vec3 doublecr = normalize(cross(mvPosition.xyz,cr))*radius;
      mvPosition.xyz +=  mult*(cr + doublecr).xyz;
    } else {
      vec3 cr = normalize(cross(vec3(0.0,0.0,-1.0),norm))*radius;
      vec3 doublecr = normalize(cross(vec3(0.0,0.0,-1.0),cr))*radius;
      mvPosition.xyz +=  mult*(cr + doublecr).xyz;     
    }

    cposition = mvPosition.xyz;
    gl_Position = projectionMatrix * mvPosition;
    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );
    vLight = normalize( lDirection.xyz )*directionalLightColor[0]; //not really sure this is right, but color is always white so..
}

`,uniforms:$g},my={fragmentShader:Sv+`
    gl_FragColor = vec4(color, opacity*opacity );
    if(fogNear != fogFar) {
        float depth = -qi.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }
}`,vertexShader:`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];
uniform vec3 outlineColor;
uniform float outlineWidth;
uniform float outlinePushback;
uniform float outlineMaxPixels;
uniform float vWidth;
uniform mat4 projinv;


attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;
attribute float radius;

varying vec3 vColor;
varying vec3 vLight;
varying vec3 cposition;
varying vec3 p1;
varying vec3 p2;
varying float r;

void main() {

    vColor = outlineColor;
    float rad = radius+sign(radius)*outlineWidth;
    r = abs(rad);

    vec4 to = modelViewMatrix*vec4(normal, 1.0); //normal is other point of cylinder
    vec4 pt = modelViewMatrix*vec4(position, 1.0);
//pushback
    float scale = 1.0;
    if(projectionMatrix[3][3] != 0.0) { //orthographic
        to.z -= outlinePushback;
        pt.z -= outlinePushback;
    } else { //perspective
        vec4 midbefore = pt;
        if(length(to.xyz) < length(pt)) {
            midbefore = to;
        }
        vec4 midafter = midbefore;
        midafter.xyz += normalize(midbefore.xyz)*outlinePushback;

        to.xyz += normalize(to.xyz)*outlinePushback;
        pt.xyz += normalize(pt.xyz)*outlinePushback;

        //figure out a scaling factor for radius to account for perspective setback
        vec4 midbeforer = vec4(midbefore.x+rad,midbefore.y, midbefore.z, midbefore.w);
        vec4 midafterr = vec4(midafter.x+rad,midafter.y, midafter.z, midafter.w);

        vec4 mb = projectionMatrix*midbefore;
        vec4 mbr = projectionMatrix*midbeforer;
        vec4 ma = projectionMatrix*midafter;
        vec4 mar = projectionMatrix*midafterr;
        mb /= mb.w;
        mbr /= mbr.w;
        ma /= ma.w;
        mar /= mar.w;
        scale = abs((mbr.x-mb.x)/(mar.x-ma.x));
        rad *= scale;
        r = abs(rad);
    }
    vec4 mvPosition = pt;
    p1 = pt.xyz; p2 = to.xyz;
    vec3 norm = to.xyz-pt.xyz;
    float mult = 1.1; //slop to account for perspective of sphere
    if(length(p1) > length(p2)) { //billboard at level of closest point
       mvPosition = to;
    }

    vec3 n = normalize(mvPosition.xyz);
//intersect with the plane defined by the camera looking at the billboard point
    if(color.z >= 0.0) { //p1
       vec3 pnorm = normalize(p1);
       float t = dot(mvPosition.xyz-p1,n)/dot(pnorm,n);
       mvPosition.xyz = p1+t*pnorm;
    } else {
       vec3 pnorm = normalize(p2);
       float t = dot(mvPosition.xyz-p2,n)/dot(pnorm,n);
       mvPosition.xyz = p2+t*pnorm;
       mult *= -1.0;
    }

    if(outlineMaxPixels > 0.0) {
        vec4 cpos = mvPosition;
        vec4 unadjusted = projectionMatrix*vec4(cpos.x+abs(scale*radius), cpos.y,cpos.z,cpos.w); 
        vec4 ccoord = projectionMatrix*cpos;
        vec4 adjust = projectionMatrix*vec4(cpos.x+r,cpos.y,cpos.z,cpos.w); 
        unadjusted /= unadjusted.w;
        adjust /= adjust.w;
        unadjusted.xyz -= ccoord.xyz/ccoord.w;
        adjust.xyz -= ccoord.xyz/ccoord.w;
        float diff = abs(adjust.x-unadjusted.x);
        diff *= vWidth; //this should now be in pixels
        if(diff > outlineMaxPixels) {
            float fixlen = abs(unadjusted.x) + outlineMaxPixels/vWidth; 
            vec4 pcoord = ccoord;
            pcoord.x += fixlen*pcoord.w;
            vec4 altc = projinv*pcoord;
            r= abs(altc.x-cpos.x);
        }
    }

    vec3 cr = normalize(cross(mvPosition.xyz,norm))*rad;
    vec3 doublecr = normalize(cross(mvPosition.xyz,cr))*rad;
    mvPosition.xy +=  mult*(cr + doublecr).xy;
    cposition = mvPosition.xyz;
    gl_Position = projectionMatrix * mvPosition;
    vLight = vec3(1.0,1.0,1.0);
}

`,uniforms:{opacity:{type:"f",value:1},fogColor:{type:"c",value:new ie.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},outlineColor:{type:"c",value:new ie.Color(0,0,0)},outlineWidth:{type:"f",value:.1},outlinePushback:{type:"f",value:1},outlineMaxPixels:{type:"f",value:0},projinv:{type:"mat4",value:[]}}},Vv={opacity:{type:"f",value:1},fogColor:{type:"c",value:new ie.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},data:{type:"i",value:3},colormap:{type:"i",value:4},depthmap:{type:"i",value:5},step:{type:"f",value:1},maxdepth:{type:"f",value:100},subsamples:{type:"f",value:5},textmat:{type:"mat4",value:[]},projinv:{type:"mat4",value:[]},transfermin:{type:"f",value:-.2},transfermax:{type:"f",value:.2}},yv={fragmentShader:`
uniform highp sampler3D data;
uniform highp sampler2D colormap;
uniform highp sampler2D depthmap;


uniform mat4 textmat;
uniform mat4 projinv;
uniform mat4 projectionMatrix;

uniform float step;
uniform float subsamples;
uniform float maxdepth;
uniform float transfermin;
uniform float transfermax;
in  vec4 mvPosition;
out vec4 color;
void main(void) {

   vec4 pos = mvPosition;
   bool seengood = false;
   float i = 0.0;
   color = vec4(1,1,1,0);
   float increment = 1.0/subsamples;
   float maxsteps = (maxdepth*subsamples/step);
//there's probably a better way to do this..
//calculate farthest possible point in model coordinates
   vec4 maxpos = vec4(pos.x,pos.y,pos.z-maxdepth,1.0);
// convert to projection
   maxpos = projectionMatrix*maxpos;
   vec4 startp = projectionMatrix*pos;
// homogonize
   maxpos /= maxpos.w;
   startp /= startp.w;
//take x,y from start and z from max
   maxpos = vec4(startp.x,startp.y,maxpos.z,1.0);
//convert back to model space
   maxpos = projinv*maxpos;
   maxpos /= maxpos.w;
   float incr = step/subsamples;
//get depth from depthmap
//startp is apparently [-1,1]
   vec2 tpos = startp.xy/2.0+0.5;
   float depth = texture(depthmap, tpos).r;
//compute vector between start and end
   vec4 direction = maxpos-pos;
   for( i = 0.0; i <= maxsteps; i++) {
      vec4 pt = (pos+(i/maxsteps)*direction);
      vec4 ppt = projectionMatrix*pt;
      float ptdepth = ppt.z/ppt.w;
      ptdepth = ((gl_DepthRange.diff * ptdepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;
      if(ptdepth > depth) break;
      pt = textmat*pt;
//       pt /= pt.w;
      if(pt.x >= -0.01 && pt.y >= -0.01 && pt.z >= -0.01 && pt.x <= 1.01 && pt.y <= 1.01 && pt.z <= 1.01) {
         seengood = true;
      } else if(seengood) {
         break;
      }
      if( pt.x < -0.01 || pt.x > 1.01 || pt.y < -0.01 || pt.y > 1.01 || pt.z < -0.01 || pt.z > 1.01  ){
          color.a = 0.0;
          continue;
      }
      else {
         float val = texture(data, pt.zyx).r;
         if(isinf(val)) continue; //masked out
         float cval = (val-transfermin)/(transfermax-transfermin); //scale to texture 0-1 range
         vec4 val_color = texture(colormap, vec2(cval,0.5));
         color.rgb = color.rgb*color.a + (1.0-color.a)*val_color.a*val_color.rgb;
         color.a += (1.0 - color.a) * val_color.a; 
         if(color.a > 0.0) color.rgb /= color.a;
//          color = vec4(pt.x, pt.y, pt.z, 1.0);
      }
//       color = vec4(pt.x, pt.y, pt.z, 0.0)
    }
}

        `.replace("#define GLSLIFY 1",""),vertexShader:`uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;

in vec3 position;
out vec4 mvPosition;
void main() {

    mvPosition = modelViewMatrix * vec4( position, 1.0 );
    gl_Position = projectionMatrix*mvPosition;
}
`.replace("#define GLSLIFY 1",""),uniforms:Vv},Hv={basic:im,blur:{fragmentShader:`const float INV_TOTAL_SAMPLES_FACTOR = 1.0 / 9.0;
uniform highp sampler2D inTex;
varying highp vec2 vTexCoords;
    
void main() {
 
 vec2 texelSize = 1.0 / vec2(textureSize(inTex,0));
 float blurred_visibility_factor = 0.0f;
 for (int t = -1; t <= 1; ++t) {
  for (int s = -1; s <= 1; ++s) {
   vec2 offset = vec2(float(s), float(t)) * texelSize;
   blurred_visibility_factor += texture2D(inTex, vTexCoords + offset).r;
  }
 }
    
 gl_FragDepthEXT = blurred_visibility_factor * INV_TOTAL_SAMPLES_FACTOR;
 
}`,vertexShader:`attribute vec2 vertexPosition;
varying highp vec2 vTexCoords;
const vec2 scale = vec2(0.5, 0.5);

void main() {
   vTexCoords  = vertexPosition * scale + scale; // scale vertex attribute to [0,1] range
   gl_Position = vec4(vertexPosition, 0.0, 1.0);
}
        `,uniforms:{}},instanced:Cm,lambert:Om,lambertdouble:hg,outline:S1,screen:U1,screenaa:J1,ssao:{fragmentShader:`uniform sampler2D depthmap;
varying highp vec2 vTexCoords;
uniform float vWidth;
uniform float vHeight;
uniform float total_strength;
uniform float radius;
uniform mat4 projinv;
uniform mat4 projectionMatrix;

//code for pseudorandom vector from chatgpt
float hash(vec3 p) {
    p = fract(p * vec3(0.1031, 0.1030, 0.0973));
    p += dot(p, p.yzx + 33.33);
    return fract((p.x + p.y) * p.z);
}

// Generate a pseudorandom vec3 from a seed vec3
vec3 pseudorandomVec3(vec3 seed) {
    vec3 randomVec;
    randomVec.x = hash(seed);
    randomVec.y = hash(seed + vec3(1.0, 0.0, 17.1));
    randomVec.z = hash(seed + vec3(0.0, 13.23, 0.0));
    return randomVec;
}

void main(void)
{   
   const float base = 0.2;
   const float area = 0.75;
   const int cycles = 1;

   const int samples = 64;
   vec3 sample_sphere[64] = vec3[](
      vec3(0.091258,-0.510164,0.000000),
      vec3(-0.204347,-0.872967,0.187199),
      vec3(0.009690,-0.263696,-0.110414),
      vec3(0.175208,-0.563987,0.228527),
      vec3(-0.001824,-0.003113,-0.000323),
      vec3(0.411134,-0.719869,-0.261530),
      vec3(-0.074272,-0.377368,0.276290),
      vec3(-0.147773,-0.381587,-0.284529),
      vec3(0.173317,-0.199635,0.063295),
      vec3(-0.186452,-0.199460,0.076965),
      vec3(0.143985,-0.308160,-0.307687),
      vec3(0.053194,-0.148286,0.169589),
      vec3(-0.547656,-0.486476,-0.317378),
      vec3(0.020804,-0.015092,-0.004574),
      vec3(-0.038006,-0.043165,0.054059),
      vec3(-0.094795,-0.443908,-0.731525),
      vec3(0.547552,-0.396466,0.461477),
      vec3(-0.176886,-0.089989,0.007315),
      vec3(0.074401,-0.048840,-0.074039),
      vec3(-0.008240,-0.075697,0.178197),
      vec3(-0.307880,-0.185053,-0.368943),
      vec3(0.309520,-0.108483,0.041646),
      vec3(-0.773478,-0.292946,0.538166),
      vec3(0.184487,-0.231594,-0.820065),
      vec3(0.207318,-0.100531,0.361797),
      vec3(-0.173306,-0.037737,-0.055289),
      vec3(0.548102,-0.105342,-0.253237),
      vec3(-0.119342,-0.043907,0.285162),
      vec3(-0.270247,-0.087861,-0.751357),
      vec3(0.449312,-0.039777,0.236146),
      vec3(-0.743773,-0.036095,0.196056),
      vec3(0.148819,-0.004300,-0.231448),
      vec3(0.008773,0.000809,0.051047),
      vec3(-0.461467,0.027390,-0.357386),
      vec3(0.169626,0.013338,-0.014053),
      vec3(-0.043786,0.007095,0.047331),
      vec3(0.004821,0.140371,-0.988260),
      vec3(0.092402,0.023994,0.101860),
      vec3(-0.295335,0.061530,-0.027372),
      vec3(0.024903,0.007537,-0.018901),
      vec3(-0.081463,0.125402,0.447794),
      vec3(-0.397119,0.231805,-0.631062),
      vec3(0.163853,0.059014,0.044905),
      vec3(-0.495220,0.214357,0.254139),
      vec3(0.306123,0.373687,-0.825715),
      vec3(0.021665,0.026737,0.053220),
      vec3(-0.208231,0.117129,-0.098685),
      vec3(0.139749,0.080968,-0.043086),
      vec3(-0.153599,0.182814,0.262090),
      vec3(-0.159673,0.496777,-0.743568),
      vec3(0.134797,0.117152,0.095753),
      vec3(-0.155626,0.120533,0.019395),
      vec3(0.042311,0.054462,-0.049709),
      vec3(0.001257,0.031288,0.034468),
      vec3(-0.002271,0.003199,-0.002304),
      vec3(0.662104,0.717307,0.033854),
      vec3(-0.373100,0.576021,0.308274),
      vec3(0.024233,0.231316,-0.173688),
      vec3(0.161311,0.420217,0.234273),
      vec3(-0.045248,0.078031,-0.010411),
      vec3(0.167453,0.376942,-0.094872),
      vec3(-0.056194,0.433247,0.173218),
      vec3(-0.016224,0.123149,-0.035569),
      vec3(0.067127,0.407641,0.028479)
   );

   float depth = texture2D(depthmap, vTexCoords).r;
   if(depth == 1.0) {
      discard;
   }

   vec4 screen_position = vec4(vTexCoords, depth,1.0);
   vec4 pos = projinv*screen_position;
   pos /= pos.w;
   vec3 position = pos.xyz;

   //approximate the normal from the depth map; I find this simpler
   //than trying to recompute the exact normal within every possible object shader

   //pixel offset positions in screen space
   ivec2 dim = textureSize(depthmap,0);
   vec2 offset1 = vec2(0.0,1.0/float(dim.y));
   vec2 offset2 = vec2(1.0/float(dim.x),0.0);
   float depth1 = texture2D(depthmap, vTexCoords + offset1).r;
   float depth2 = texture2D(depthmap, vTexCoords + offset2).r;
   
   vec3 p1 = vec3(screen_position.xy+offset1, depth1 - depth);
   vec3 p2 = vec3(screen_position.xy+offset2, depth2 - depth);

   //convert to model space
   vec4 pos1 = projinv*vec4(p1,1);
   pos1 /= pos1.w;
   vec4 pos2 = projinv*vec4(p2,1);
   pos2 /= pos2.w;

   vec3 normal = normalize(cross(pos1.xyz-position, pos2.xyz-position)); //model normal, important we normalize in model space

   //pseudo random number

   float occlusion = 0.0;
   for(int c = 0; c < cycles; c++) {
   vec3 random = normalize(pseudorandomVec3(position+float(c)));
   for(int i=0; i < samples; i++) {

      vec3 ray = radius * reflect(sample_sphere[i],random);
      vec3 hemi_ray = position + sign(dot(ray,normal)) * ray; //model space
      vec4 hemi_screen = projectionMatrix*vec4(hemi_ray,1.0);
      hemi_screen /= hemi_screen.w;
      
      float occ_depth = texture2D(depthmap, clamp(hemi_screen.xy,0.0,1.0)).r;
      float difference = hemi_screen.z - occ_depth;
      
      occlusion += step(0.0, difference) * (1.0-smoothstep(0.0, area, difference));
   }
   }
   float ao = 1.0 - total_strength * occlusion * (1.0 / float(cycles*samples));
   gl_FragDepthEXT = clamp(ao+base,0.0,1.0);

}`,vertexShader:`attribute vec2 vertexPosition;
varying highp vec2 vTexCoords;
const vec2 scale = vec2(0.5, 0.5);

void main() {
   vTexCoords  = vertexPosition * scale + scale; // scale vertex attribute to [0,1] range
   gl_Position = vec4(vertexPosition, 0.0, 1.0);
}
        `,uniforms:{total_strength:{type:"f",value:1},radius:{type:"f",value:5},projinv:{type:"mat4",value:[]}}},sphereimposter:Km,sphereimposteroutline:y1,sprite:uv,stickimposter:Yv,stickimposteroutline:my,volumetric:yv};function gy(pg){let et={};for(const oa in pg){et[oa]={},et[oa].type=pg[oa].type;var t0=pg[oa].value;t0 instanceof ie.Color?et[oa].value=t0.clone():typeof t0=="number"?et[oa].value=t0:t0 instanceof Array?et[oa].value=[]:console.error("Error copying shader uniforms from ShaderLib: unknown type for uniform")}return et}const Qv={clone:gy};class Ty extends Mn{constructor(et=50,t0=1,oa=.1,a0=2e3,m0=!1){super(),this.projectionMatrix=new c.Matrix4,this.projectionMatrixInverse=new c.Matrix4,this.matrixWorldInverse=new c.Matrix4,this.fov=et,this.aspect=t0,this.near=oa,this.far=a0;var nm=this.position.z;this.right=nm*Math.tan(Math.PI/180*et),this.left=-this.right,this.top=this.right/this.aspect,this.bottom=-this.top,this.ortho=!!m0,this.updateProjectionMatrix()}lookAt(et){this.matrix.lookAt(this.position,et,this.up),this.rotationAutoUpdate&&(this.useQuaternion===!1&&this.rotation instanceof c.Vector3?this.rotation.setEulerFromRotationMatrix(this.matrix,this.eulerOrder):console.error("Unimplemented math operation."))}updateProjectionMatrix(){this.ortho?this.projectionMatrix.makeOrthographic(this.left,this.right,this.top,this.bottom,this.near,this.far):this.projectionMatrix.makePerspective(this.fov,this.aspect,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)}}class $v{constructor(et,t0=1,oa=1e3){this.name="",this.color=new ie.Color(et),this.near=t0,this.far=oa}clone(){return new $v(this.color.getHex(),this.near,this.far)}}class Cv{constructor(){this.sprite={vertices:null,faces:null,vertexBuffer:null,elementBuffer:null,program:null,attributes:{},uniforms:null}}init(et){this.gl=et.context,this.renderer=et,this.precision=et.getPrecision(),this.sprite.vertices=new Float32Array(16),this.sprite.faces=new Uint16Array(6);var t0=0;this.sprite.vertices[t0++]=-1,this.sprite.vertices[t0++]=-1,this.sprite.vertices[t0++]=0,this.sprite.vertices[t0++]=0,this.sprite.vertices[t0++]=1,this.sprite.vertices[t0++]=-1,this.sprite.vertices[t0++]=1,this.sprite.vertices[t0++]=0,this.sprite.vertices[t0++]=1,this.sprite.vertices[t0++]=1,this.sprite.vertices[t0++]=1,this.sprite.vertices[t0++]=1,this.sprite.vertices[t0++]=-1,this.sprite.vertices[t0++]=1,this.sprite.vertices[t0++]=0,this.sprite.vertices[t0++]=1,t0=0,this.sprite.faces[t0++]=0,this.sprite.faces[t0++]=1,this.sprite.faces[t0++]=2,this.sprite.faces[t0++]=0,this.sprite.faces[t0++]=2,this.sprite.faces[t0++]=3,this.sprite.vertexBuffer=this.gl.createBuffer(),this.sprite.elementBuffer=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.sprite.vertexBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.sprite.vertices,this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.sprite.elementBuffer),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,this.sprite.faces,this.gl.STATIC_DRAW),this.sprite.program=this.createProgram(Hv.sprite,this.precision||1),this.sprite.attributes={};const oa={};this.sprite.attributes.position=this.gl.getAttribLocation(this.sprite.program,"position"),this.sprite.attributes.uv=this.gl.getAttribLocation(this.sprite.program,"uv"),oa.uvOffset=this.gl.getUniformLocation(this.sprite.program,"uvOffset"),oa.uvScale=this.gl.getUniformLocation(this.sprite.program,"uvScale"),oa.rotation=this.gl.getUniformLocation(this.sprite.program,"rotation"),oa.scale=this.gl.getUniformLocation(this.sprite.program,"scale"),oa.alignment=this.gl.getUniformLocation(this.sprite.program,"alignment"),oa.color=this.gl.getUniformLocation(this.sprite.program,"color"),oa.map=this.gl.getUniformLocation(this.sprite.program,"map"),oa.opacity=this.gl.getUniformLocation(this.sprite.program,"opacity"),oa.useScreenCoordinates=this.gl.getUniformLocation(this.sprite.program,"useScreenCoordinates"),oa.screenPosition=this.gl.getUniformLocation(this.sprite.program,"screenPosition"),oa.modelViewMatrix=this.gl.getUniformLocation(this.sprite.program,"modelViewMatrix"),oa.projectionMatrix=this.gl.getUniformLocation(this.sprite.program,"projectionMatrix"),oa.fogNear=this.gl.getUniformLocation(this.sprite.program,"fogNear"),oa.fogFar=this.gl.getUniformLocation(this.sprite.program,"fogFar"),oa.fogColor=this.gl.getUniformLocation(this.sprite.program,"fogColor"),oa.alphaTest=this.gl.getUniformLocation(this.sprite.program,"alphaTest"),this.sprite.uniforms=oa}render(et,t0,oa,a0,m0){var nm,L0,cm,Gm,Fm,Vm,D1,O1,tg,Mg;if(!this.gl)throw new Error("WebGLRenderer not initialized");let kg=[];(nm=et?.__webglSprites)===null||nm===void 0||nm.forEach(Pt=>{(m0&&Pt.material.depthTest==0||!m0&&Pt.material.depthTest)&&kg.push(Pt)});let cg=kg.length;if(!cg)return;const Ag=this.sprite.attributes,K1=this.sprite.uniforms;if(!K1)throw new Error("Uniforms not defined");var G1=.5*oa,sg=.5*a0;this.gl.useProgram(this.sprite.program),this.gl.enableVertexAttribArray(Ag.position),this.gl.enableVertexAttribArray(Ag.uv),this.gl.disable(this.gl.CULL_FACE),this.gl.enable(this.gl.BLEND),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.sprite.vertexBuffer),this.gl.vertexAttribPointer(Ag.position,2,this.gl.FLOAT,!1,16,0),this.gl.vertexAttribPointer(Ag.uv,2,this.gl.FLOAT,!1,16,8),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.sprite.elementBuffer),this.gl.uniformMatrix4fv(K1.projectionMatrix,!1,t0.projectionMatrix.elements),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.uniform1i(K1.map,0);var Iv,d0=et.fog;let y,N,K;d0?(this.gl.uniform3f(K1.fogColor,d0.color.r,d0.color.g,d0.color.b),this.gl.uniform1f(K1.fogNear,d0.near),this.gl.uniform1f(K1.fogFar,d0.far)):(this.gl.uniform1f(K1.fogNear,0),this.gl.uniform1f(K1.fogFar,0));let ne=[];for(Iv=0;Iv<cg;Iv++)y=kg[Iv],N=y.material,N&&(N.depthTest!=0||m0)&&y.visible&&N.opacity!==0&&(N.useScreenCoordinates?y.z=-y.position.z:(y._modelViewMatrix.multiplyMatrices(t0.matrixWorldInverse,y.matrixWorld),y.z=-y._modelViewMatrix.elements[14]));for(kg.sort(wg),Iv=0;Iv<cg;Iv++)if(y=kg[Iv],N=y.material,N&&y.visible&&N.opacity!==0&&N.map&&N.map.image&&N.map.image.width){this.gl.uniform1f(K1?.alphaTest||null,N.alphaTest);var Rt=N.map.image.width,lt=N.map.image.height;ne[0]=Rt*this.renderer.devicePixelRatio/oa,ne[1]=lt*this.renderer.devicePixelRatio/a0,N.useScreenCoordinates===!0?(this.gl.uniform1i(K1.useScreenCoordinates,1),this.gl.uniform3f(K1.screenPosition,(y.position.x*this.renderer.devicePixelRatio-G1)/G1,(sg-y.position.y*this.renderer.devicePixelRatio)/sg,Math.max(0,Math.min(1,y.position.z)))):(this.gl.uniform1i(K1.useScreenCoordinates,0),this.gl.uniformMatrix4fv(K1.modelViewMatrix,!1,y._modelViewMatrix.elements)),K=1/(N.scaleByViewport?a0:1),ne[0]*=K*y.scale.x,ne[1]*=K*y.scale.y;let Pt=(L0=N?.alignment)===null||L0===void 0?void 0:L0.x,Ht=(cm=N?.alignment)===null||cm===void 0?void 0:cm.y;N.screenOffset&&(Pt=(Pt||0)+2*N.screenOffset.x/Rt,Ht=(Ht||0)+2*N.screenOffset.y/lt),this.gl.uniform2f(K1.uvScale,((Gm=N?.uvScale)===null||Gm===void 0?void 0:Gm.x)||1,((Fm=N?.uvScale)===null||Fm===void 0?void 0:Fm.y)||1),this.gl.uniform2f(K1.uvOffset,((Vm=N?.uvOffset)===null||Vm===void 0?void 0:Vm.x)||0,((D1=N?.uvOffset)===null||D1===void 0?void 0:D1.y)||0),this.gl.uniform2f(K1.alignment,Pt||0,Ht||0),this.gl.uniform1f(K1.opacity,N.opacity),this.gl.uniform3f(K1.color,((O1=N?.color)===null||O1===void 0?void 0:O1.r)||0,((tg=N?.color)===null||tg===void 0?void 0:tg.g)||0,((Mg=N?.color)===null||Mg===void 0?void 0:Mg.b)||0),this.gl.uniform1f(K1.rotation,y.rotation),this.gl.uniform2fv(K1.scale,ne),this.renderer.setDepthTest(N.depthTest),this.renderer.setDepthWrite(N.depthWrite),this.renderer.setTexture(N.map,0),this.gl.drawElements(this.gl.TRIANGLES,6,this.gl.UNSIGNED_SHORT,0)}this.gl.enable(this.gl.CULL_FACE)}createProgram(et,t0){if(!this.gl)throw new Error("WebGL Rendering context not found");var oa=this.gl.createProgram();if(!oa)throw new Error("Error creating webgl program");var a0=this.gl.createShader(this.gl.FRAGMENT_SHADER),m0=this.gl.createShader(this.gl.VERTEX_SHADER);if(!a0)throw new Error("Unable to create fragment shader SpritePlugin.createProgram");if(!m0)throw new Error("Unable to create vertex shader SpritePlugin.createProgram");var nm="precision "+t0+` float;
`;if(this.gl.shaderSource(a0,nm+et.fragmentShader),this.gl.shaderSource(m0,nm+et.vertexShader),this.gl.compileShader(a0),this.gl.compileShader(m0),!this.gl.getShaderParameter(a0,this.gl.COMPILE_STATUS)||!this.gl.getShaderParameter(m0,this.gl.COMPILE_STATUS))throw new Error(`Error compiling shader: 
      ${this.gl.getShaderInfoLog(a0)} 
      ${this.gl.getShaderInfoLog(m0)}`);return this.gl.attachShader(oa,a0),this.gl.attachShader(oa,m0),this.gl.linkProgram(oa),this.gl.getProgramParameter(oa,this.gl.LINK_STATUS)||console.error("Could not initialize shader"),oa}}function wg(pg,et){return pg.z!==et.z?et.z-pg.z:et.id-pg.id}var Lv=null,Pv=null;class Ny{constructor(et){this.context=null,this.devicePixelRatio=1,this.sortObjects=!0,this.autoUpdateObjects=!0,this.autoUpdateScene=!0,this.info={memory:{programs:0,geometries:0,textures:0},render:{calls:0,vertices:0,faces:0,points:0}},this._offscreen=null,this._bitmap=null,this._programs=[],this._programs_counter=0,this._webglversion=1,this._currentProgram=null,this._currentMaterialId=-1,this._currentGeometryGroupHash=null,this._currentCamera=null,this._geometryGroupCounter=0,this._oldDoubleSided=-1,this._oldFlipSided=-1,this._oldDepthTest=-1,this._oldDepthWrite=-1,this._oldPolygonOffset=null,this._oldLineWidth=null,this._viewportWidth=0,this._viewportHeight=0,this._currentWidth=0,this._currentHeight=0,this._enabledAttributes={},this._vector3=new c.Vector3,this._worldInverse=new c.Matrix4,this._projInverse=new c.Matrix4,this._textureMatrix=new c.Matrix4,this._fullProjModelMatrix=new c.Matrix4,this._fullProjModelMatrixInv=new c.Matrix4,this._direction=new c.Vector3,this._lightsNeedUpdate=!0,this._lights={ambient:[0,0,0],directional:{length:0,colors:[],positions:[]},point:{length:0,colors:[],positions:[],distances:[]},spot:{length:0,colors:[],positions:[],distances:[],directions:[],anglesCos:[],exponents:[]},hemi:{length:0,skyColors:[],groundColors:[],positions:[]}},this.sprites=new Cv,this._screenshader=null,this._AOshader=null,this._blurshader=null,this._vertexattribpos=null,this._aovertexattribpos=null,this._blurvertexattribpos=null,this._screenQuadVBO=null,this._fb=null,this._targetTexture=null,this._depthTexture=null,this._shadingTexture=null,this._scratchTexture=null,this._upscale=null,this._AOstrength=1,this._AOradius=5,this.SHADE_TEXTURE=3,et=et||{},this.row=et.row,this.col=et.col,this.rows=et.rows,this.cols=et.cols,this._canvas=et.canvas!==void 0?et.canvas:document.createElement("canvas"),this._precision=et.precision!==void 0?et.precision:"highp",this._alpha=et.alpha===void 0||et.alpha,this._premultipliedAlpha=et.premultipliedAlpha===void 0||et.premultipliedAlpha,this._antialias=et.antialias!==void 0&&et.antialias,this._upscale=et.upscale!==void 0?et.upscale:this._antialias,this._preserveDrawingBuffer=et.preserveDrawingBuffer!==void 0&&et.preserveDrawingBuffer,this._clearColor=et.clearColor!==void 0?new ie.Color(et.clearColor):new ie.Color(0),this._clearAlpha=et.clearAlpha!==void 0?et.clearAlpha:0,this._outlineMaterial=new W1(et.outline),this._outlineSphereImposterMaterial=new ng(et.outline),this._outlineStickImposterMaterial=new S0(et.outline),this._outlineEnabled=!!et.outline,this._AOEnabled=!!et.ambientOcclusion,et.ambientOcclusion&&et.ambientOcclusion.strength!==void 0&&(this._AOstrength=parseFloat(et.ambientOcclusion.strength)),this._AOstrength==0&&(this._AOEnabled=!1),et.ambientOcclusion&&et.ambientOcclusion.radius!==void 0&&(this._AOradius=parseFloat(et.ambientOcclusion.radius)),this.domElement=this._canvas,this._canvas.id=et.id,et.containerWidth!=0&&et.containerHeight!=0&&(this.initGL(),this.setDefaultGLState(),this.context=this._gl,this.isWebGL1()?this._extInstanced=this._gl.getExtension("ANGLE_instanced_arrays"):this._extInstanced={vertexAttribDivisorANGLE:this._gl.vertexAttribDivisor.bind(this._gl),drawElementsInstancedANGLE:this._gl.drawElementsInstanced.bind(this._gl)},this._extFragDepth=this._gl.getExtension("EXT_frag_depth"),this._extFloatLinear=this._gl.getExtension("OES_texture_float_linear"),this._extColorBufferFloat=this._gl.getExtension("EXT_color_buffer_float"),this.sprites.init(this))}supportedExtensions(){return{supportsAIA:!!this._extInstanced,supportsImposters:!!this._extFragDepth||!this.isWebGL1(),regen:!1}}getContext(){return this._gl}getCanvas(){return this._canvas}isLost(){return this._gl==null||this._gl.isContextLost()}getPrecision(){return this._precision}setClearColorHex(et,t0){this._clearColor.setHex(et),this._clearAlpha=t0,this.isLost()||this._gl.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearAlpha)}enableOutline(et){this._outlineMaterial=new W1(et),this._outlineSphereImposterMaterial=new ng(et),this._outlineStickImposterMaterial=new S0(et),this._outlineEnabled=!0}disableOutline(){this._outlineEnabled=!1}enableAmbientOcclusion(et){et&&(et.strength&&(this._AOstrength=et.strength),et.scale&&(this._AOradius=et.scale)),this._AOEnabled=this._AOstrength>0}disableAmbientOcclusion(){this._AOEnabled=!1}setViewport(){if(this._offscreen&&(this._offscreen.width=this._canvas.width,this._offscreen.height=this._canvas.height),this.rows!=null&&this.cols!=null&&this.row!=null&&this.col!=null&&!this.isLost()){var et=this._gl.drawingBufferWidth/this.cols,t0=this._gl.drawingBufferHeight/this.rows;this._viewportWidth=et,this._viewportHeight=t0,this._gl.enable(this._gl.SCISSOR_TEST),this._gl.scissor(et*this.col,t0*this.row,et,t0),this._gl.viewport(et*this.col,t0*this.row,et,t0)}}setSize(et,t0){this.devicePixelRatio=window.devicePixelRatio!==void 0?window.devicePixelRatio:1,this._upscale&&this.devicePixelRatio<2&&(this.devicePixelRatio=2),this._canvas.width=et*this.devicePixelRatio,this._canvas.height=t0*this.devicePixelRatio,this._canvas.style.width=et+"px",this._canvas.style.height=t0+"px",this.rows!=null&&this.cols!=null&&this.row!=null&&this.col!=null?(this.isLost()||(this._viewportWidth=this._gl.drawingBufferWidth/this.cols,this._viewportHeight=this._gl.drawingBufferHeight/this.rows),this.setViewport()):(this._viewportWidth=this._canvas.width,this._viewportHeight=this._canvas.height,this.isLost()||this._gl.viewport(0,0,this._gl.drawingBufferWidth,this._gl.drawingBufferHeight)),this.initFrameBuffer()}clear(et,t0,oa){var a0=0;(et===void 0||et)&&(a0|=this._gl.COLOR_BUFFER_BIT),(t0===void 0||t0)&&(a0|=this._gl.DEPTH_BUFFER_BIT),(oa===void 0||oa)&&(a0|=this._gl.STENCIL_BUFFER_BIT),this._gl.clear(a0)}setMaterialFaces(et,t0){var oa=et.side===l,a0=et.side===o;et.imposter||(a0=t0?!a0:a0),this._oldDoubleSided!==oa&&(oa?this._gl.disable(this._gl.CULL_FACE):this._gl.enable(this._gl.CULL_FACE),this._oldDoubleSided=oa),this._oldFlipSided!==a0&&(a0?this._gl.frontFace(this._gl.CW):this._gl.frontFace(this._gl.CCW),this._oldFlipSided=a0),this._gl.cullFace(this._gl.BACK)}setDepthTest(et){this._oldDepthTest!==et&&(et?this._gl.enable(this._gl.DEPTH_TEST):this._gl.disable(this._gl.DEPTH_TEST),this._oldDepthTest=et)}setDepthWrite(et){this._oldDepthWrite!==et&&(this._gl.depthMask(et),this._oldDepthWrite=et)}setBlending(et){et?(this._gl.enable(this._gl.BLEND),this._gl.blendEquationSeparate(this._gl.FUNC_ADD,this._gl.FUNC_ADD),this._gl.blendFuncSeparate(this._gl.SRC_ALPHA,this._gl.ONE_MINUS_SRC_ALPHA,this._gl.ONE,this._gl.ONE_MINUS_SRC_ALPHA)):this._gl.disable(this._gl.BLEND)}initMaterial(et,t0,oa,a0){var m0,nm;if(et.addEventListener("dispose",this.onMaterialDispose.bind(this)),nm=et.shaderID){var L0=Hv[nm];et.vertexShader=L0.vertexShader,et.fragmentShader=L0.fragmentShader,et.uniforms=Qv.clone(L0.uniforms),et.shaded&&et.makeShaded(this.SHADE_TEXTURE)}m0={wireframe:et.wireframe,fragdepth:et.imposter,volumetric:et.volumetric,shaded:et.shaded},et.program=this.buildProgram(et.fragmentShader,et.vertexShader,et.uniforms,m0)}renderBuffer(et,t0,oa,a0,m0,nm){var L0,cm;if(a0.visible&&(L0=this.setProgram(et,t0,oa,a0,nm,this))){cm=L0.attributes;var Gm,Fm,Vm=!1,D1=a0.wireframe?1:0,O1=16777215*m0.id+2*L0.id+D1;if(O1!==this._currentGeometryGroupHash&&(this._currentGeometryGroupHash=O1,Vm=!0),Vm&&(this.disableAttributes(),cm.position>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,m0.__webglVertexBuffer),this.enableAttribute(cm.position),this._gl.vertexAttribPointer(cm.position,3,this._gl.FLOAT,!1,0,0)),cm.color>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,m0.__webglColorBuffer),this.enableAttribute(cm.color),this._gl.vertexAttribPointer(cm.color,3,this._gl.FLOAT,!1,0,0)),cm.normal>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,m0.__webglNormalBuffer),this.enableAttribute(cm.normal),this._gl.vertexAttribPointer(cm.normal,3,this._gl.FLOAT,!1,0,0)),cm.offset>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,m0.__webglOffsetBuffer),this.enableAttribute(cm.offset),this._gl.vertexAttribPointer(cm.offset,3,this._gl.FLOAT,!1,0,0)),cm.radius>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,m0.__webglRadiusBuffer),this.enableAttribute(cm.radius),this._gl.vertexAttribPointer(cm.radius,1,this._gl.FLOAT,!1,0,0))),nm instanceof x0){if(a0.shaderID==="instanced"){var tg=a0.sphere.geometryGroups[0];Vm&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,m0.__webglVertexBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,tg.vertexArray,this._gl.STATIC_DRAW),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,m0.__webglNormalBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,tg.normalArray,this._gl.STATIC_DRAW),this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,m0.__webglFaceBuffer),this._gl.bufferData(this._gl.ELEMENT_ARRAY_BUFFER,tg.faceArray,this._gl.STATIC_DRAW)),Gm=tg.faceidx,this._extInstanced.vertexAttribDivisorANGLE(cm.offset,1),this._extInstanced.vertexAttribDivisorANGLE(cm.radius,1),this._extInstanced.vertexAttribDivisorANGLE(cm.color,1),this._extInstanced.drawElementsInstancedANGLE(this._gl.TRIANGLES,Gm,this._gl.UNSIGNED_SHORT,0,m0.radiusArray.length),this._extInstanced.vertexAttribDivisorANGLE(cm.offset,0),this._extInstanced.vertexAttribDivisorANGLE(cm.radius,0),this._extInstanced.vertexAttribDivisorANGLE(cm.color,0)}else a0.wireframe?(Fm=m0.lineidx,this.setLineWidth(a0.wireframeLinewidth),Vm&&this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,m0.__webglLineBuffer),this._gl.drawElements(this._gl.LINES,Fm,this._gl.UNSIGNED_SHORT,0)):(Gm=m0.faceidx,Vm&&this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,m0.__webglFaceBuffer),this._gl.drawElements(this._gl.TRIANGLES,Gm,this._gl.UNSIGNED_SHORT,0));this.info.render.calls++,this.info.render.vertices+=Gm,this.info.render.faces+=Gm/3}else nm instanceof Ip&&(Fm=m0.vertices,this.setLineWidth(a0.linewidth),this._gl.drawArrays(this._gl.LINES,0,Fm),this.info.render.calls++)}}clearShading(){this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._shadingTexture,0),this.clear(!1,!0,!1),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._depthTexture,0)}setShading(et,t0,oa){let a0=et.__lights,m0=et.fog,nm=[];for(let Gm=0,Fm=et.__webglObjects.length;Gm<Fm;Gm++){let Vm=et.__webglObjects[Gm];Vm.render&&Vm[oa]&&nm.push(Vm)}if(nm.length==0)return;this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._shadingTexture,0),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.COLOR_ATTACHMENT0,this._gl.TEXTURE_2D,null,0),this.renderObjects(et.__webglObjects,!0,oa+"Depth",t0,a0,m0,!1),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._scratchTexture,0),this.clear(!1,!0,!1),this._gl.useProgram(this._AOshader),this._currentProgram=this._AOshader,this.setDepthTest(-1),this.setDepthWrite(-1);let L0=this._AOshader.uniforms;this._gl.uniform1f(L0.total_strength,this._AOstrength),this._gl.uniform1f(L0.radius,this._AOradius),this._fullProjModelMatrix=new c.Matrix4,this._fullProjModelMatrixInv=new c.Matrix4;let cm=nm[0].object;this._fullProjModelMatrix.multiplyMatrices(t0.projectionMatrix,cm._modelViewMatrix),this._fullProjModelMatrixInv.getInverse(this._fullProjModelMatrix),this._gl.uniformMatrix4fv(L0.projectionMatrix,!1,this._fullProjModelMatrix.elements),this._gl.uniformMatrix4fv(L0.projinv,!1,this._fullProjModelMatrixInv.elements),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._screenQuadVBO),this._gl.enableVertexAttribArray(this._aovertexattribpos),this._gl.vertexAttribPointer(this._aovertexattribpos,2,this._gl.FLOAT,!1,0,0),this._gl.activeTexture(this._gl.TEXTURE0),this._gl.bindTexture(this._gl.TEXTURE_2D,this._shadingTexture),this._gl.drawArrays(this._gl.TRIANGLES,0,6),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._shadingTexture,0),this.clear(!1,!0,!1),this._gl.useProgram(this._blurshader),this._currentProgram=this._blurshader,this.setDepthTest(-1),this.setDepthWrite(-1),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._screenQuadVBO),this._gl.enableVertexAttribArray(this._blurvertexattribpos),this._gl.vertexAttribPointer(this._blurvertexattribpos,2,this._gl.FLOAT,!1,0,0),this._gl.activeTexture(this._gl.TEXTURE0),this._gl.bindTexture(this._gl.TEXTURE_2D,this._scratchTexture),this._gl.drawArrays(this._gl.TRIANGLES,0,6),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.COLOR_ATTACHMENT0,this._gl.TEXTURE_2D,this._targetTexture,0),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._depthTexture,0)}render(et,t0){if(t0 instanceof Ty==0)return void console.error("Renderer.render: camera is not an instance of Camera.");var oa,a0,m0,nm,L0,cm=et.__lights,Gm=et.fog;if(this._currentMaterialId=-1,this._lightsNeedUpdate=!0,this.autoUpdateScene&&et.updateMatrixWorld(),t0.parent===void 0&&t0.updateMatrixWorld(),t0.matrixWorldInverse.getInverse(t0.matrixWorld),this.isLost())return;this.autoUpdateObjects&&this.initWebGLObjects(et),this.info.render.calls=0,this.info.render.vertices=0,this.info.render.faces=0,this.info.render.points=0,this._currentWidth=this._viewportWidth,this._currentHeight=this._viewportHeight,this.setViewport(),this.setFrameBuffer(),this._gl.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearAlpha),this.clear(!0,!0,!0),L0=et.__webglObjects;let Fm=!1,Vm=this._AOEnabled;for(oa=0,a0=L0.length;oa<a0;oa++)nm=(m0=L0[oa]).object,m0.render=!1,nm.visible&&(this.setupMatrices(nm,t0),this.unrollBufferMaterial(m0),m0.render=!0,m0.volumetric&&(Fm=!0),m0.hasAO&&(Vm=!0));if(this.setBlending(!1),Vm&&this.setShading(et,t0,"opaque"),this.renderObjects(et.__webglObjects,!0,"opaque",t0,cm,Gm,!1),Vm&&this.clearShading(),this.renderSprites(et,t0,!1),this.renderObjects(et.__webglObjects,!0,"transparentDepth",t0,cm,Gm,!0),this.renderObjects(et.__webglObjects,!1,"transparent",t0,cm,Gm,!0),Fm&&this._fb&&(this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,null,0),this.renderObjects(et.__webglObjects,!1,"volumetric",t0,cm,Gm,!0)),this.renderFrameBuffertoScreen(),this.setDepthTest(!0),this.setDepthWrite(!0),this.renderSprites(et,t0,!0),this._bitmap){const D1=this._offscreen.transferToImageBitmap();this._bitmap.transferFromImageBitmap(D1),D1.close()}}setFrameBuffer(){if(this.isWebGL1()||!this._fb)return;let et=this._viewportWidth,t0=this._viewportHeight;this._gl.enable(this._gl.SCISSOR_TEST),this._gl.scissor(0,0,et,t0),this._gl.viewport(0,0,et,t0),this._gl.bindTexture(this._gl.TEXTURE_2D,this._targetTexture),this._gl.texImage2D(this._gl.TEXTURE_2D,0,this._gl.RGBA,et,t0,0,this._gl.RGBA,this._gl.UNSIGNED_BYTE,null),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MIN_FILTER,this._gl.LINEAR),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MAG_FILTER,this._gl.LINEAR),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._gl.bindTexture(this._gl.TEXTURE_2D,this._depthTexture),this._gl.texImage2D(this._gl.TEXTURE_2D,0,this._gl.DEPTH_COMPONENT32F,et,t0,0,this._gl.DEPTH_COMPONENT,this._gl.FLOAT,null),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MIN_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MAG_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._shadingTexture&&(this._gl.deleteTexture(this._shadingTexture),this._shadingTexture=this._gl.createTexture(),this._gl.bindTexture(this._gl.TEXTURE_2D,this._shadingTexture),this._gl.texImage2D(this._gl.TEXTURE_2D,0,this._gl.DEPTH_COMPONENT32F,et,t0,0,this._gl.DEPTH_COMPONENT,this._gl.FLOAT,null),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MIN_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MAG_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._gl.deleteTexture(this._scratchTexture),this._scratchTexture=this._gl.createTexture(),this._gl.bindTexture(this._gl.TEXTURE_2D,this._scratchTexture),this._gl.texImage2D(this._gl.TEXTURE_2D,0,this._gl.DEPTH_COMPONENT32F,et,t0,0,this._gl.DEPTH_COMPONENT,this._gl.FLOAT,null),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MIN_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MAG_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE)),this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,this._fb),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.COLOR_ATTACHMENT0,this._gl.TEXTURE_2D,this._targetTexture,0),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._shadingTexture,0),this._gl.clearDepth(1),this._gl.clear(this._gl.DEPTH_BUFFER_BIT),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._depthTexture,0)}initFrameBuffer(){if(this.isWebGL1())return;let et=this._viewportWidth,t0=this._viewportHeight;this._gl.enable(this._gl.SCISSOR_TEST),this._gl.scissor(0,0,et,t0),this._gl.viewport(0,0,et,t0),this._targetTexture=this._gl.createTexture(),this._depthTexture=this._gl.createTexture(),this._shadingTexture=this._gl.createTexture(),this._scratchTexture=this._gl.createTexture(),this._fb=this._gl.createFramebuffer();var oa=this._antialias?Hv.screenaa:Hv.screen;this._screenshader=this.buildProgram(oa.fragmentShader,oa.vertexShader,oa.uniforms,{}),this._vertexattribpos=this._gl.getAttribLocation(this._screenshader,"vertexPosition"),this._screenQuadVBO=this._gl.createBuffer(),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._screenQuadVBO),this._gl.bufferData(this._gl.ARRAY_BUFFER,new Float32Array([1,1,-1,1,-1,-1,-1,-1,1,-1,1,1]),this._gl.STATIC_DRAW);let a0=Hv.ssao;this._AOshader=this.buildProgram(a0.fragmentShader,a0.vertexShader,a0.uniforms,{}),this._aovertexattribpos=this._gl.getAttribLocation(this._AOshader,"vertexPosition");let m0=Hv.blur;this._blurshader=this.buildProgram(m0.fragmentShader,m0.vertexShader,m0.uniforms,{}),this._blurvertexattribpos=this._gl.getAttribLocation(this._blurshader,"vertexPosition")}renderFrameBuffertoScreen(){this.isWebGL1()||this._fb===null||(this.setViewport(),this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,null),this._gl.clear(this._gl.COLOR_BUFFER_BIT|this._gl.DEPTH_BUFFER_BIT),this._gl.frontFace(this._gl.CCW),this._gl.cullFace(this._gl.BACK),this._gl.useProgram(this._screenshader),this._currentProgram=this._screenshader,this.setDepthTest(-1),this.setDepthWrite(-1),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._screenQuadVBO),this._gl.enableVertexAttribArray(this._vertexattribpos),this._gl.vertexAttribPointer(this._vertexattribpos,2,this._gl.FLOAT,!1,0,0),this._gl.activeTexture(this._gl.TEXTURE0),this._gl.bindTexture(this._gl.TEXTURE_2D,this._targetTexture),this._gl.drawArrays(this._gl.TRIANGLES,0,6))}initWebGLObjects(et){if(et.__webglObjects||(et.__webglObjects=[],et.__webglObjectsImmediate=[],et.__webglSprites=[],et.__webglFlares=[]),et.__objectsAdded.length){for(;et.__objectsAdded.length;)this.addObject(et.__objectsAdded[0],et),et.__objectsAdded.splice(0,1);this._currentGeometryGroupHash=-1}for(;et.__objectsRemoved.length;)this.removeObject(et.__objectsRemoved[0],et),et.__objectsRemoved.splice(0,1);for(var t0=0,oa=et.__webglObjects.length;t0<oa;t0++)this.updateObject(et.__webglObjects[t0].object)}getYRatio(){return this.rows!==void 0&&this.row!==void 0?this.rows:1}getXRatio(){return this.cols!==void 0&&this.col!==void 0?this.cols:1}getAspect(et,t0){et!=null&&t0!=null||(et=this._canvas.width,t0=this._canvas.height);var oa=et/t0;return this.rows!=null&&this.cols!=null&&this.row!=null&&this.col!=null&&(oa=et/this.cols/(t0/this.rows)),oa}setTexture(et,t0,oa){if(et.needsUpdate){et.__webglInit||(et.__webglInit=!0,et.addEventListener("dispose",this.onTextureDispose.bind(this)),et.__webglTexture=this._gl.createTexture(),this.info.memory.textures++),this._gl.activeTexture(this._gl.TEXTURE0+t0);var a0=oa?this._gl.TEXTURE_3D:this._gl.TEXTURE_2D;this._gl.bindTexture(a0,et.__webglTexture),this._gl.pixelStorei(this._gl.UNPACK_FLIP_Y_WEBGL,et.flipY),this._gl.pixelStorei(this._gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,et.premultiplyAlpha),this._gl.pixelStorei(this._gl.UNPACK_ALIGNMENT,et.unpackAlignment),this._gl.pixelStorei(this._gl.PACK_ALIGNMENT,et.unpackAlignment);var m0=this.paramToGL(et.format),nm=this.paramToGL(et.type);if(oa)this.setTextureParameters(this._gl.TEXTURE_3D,et),this._gl.texImage3D(this._gl.TEXTURE_3D,0,this._gl.R32F,et.image.size.z,et.image.size.y,et.image.size.x,0,this._gl.RED,this._gl.FLOAT,et.image.data);else{var L0=et.image,cm=L0.width,Gm=L0.height;cm===void 0&&(cm=L0.length,m0==this._gl.RGBA&&(cm/=4),Gm=1),this.setTextureParameters(this._gl.TEXTURE_2D,et),this.isWebGL1()?this._gl.texImage2D(this._gl.TEXTURE_2D,0,m0,m0,nm,et.image):this._gl.texImage2D(this._gl.TEXTURE_2D,0,m0,cm,Gm,0,m0,nm,et.image)}et.needsUpdate=!1,et.onUpdate&&et.onUpdate()}else this._gl.activeTexture(this._gl.TEXTURE0+t0),oa?this._gl.bindTexture(this._gl.TEXTURE_3D,et.__webglTexture):this._gl.bindTexture(this._gl.TEXTURE_2D,et.__webglTexture)}supportsVolumetric(){return!this.isWebGL1()}enableAttribute(et){this._enabledAttributes[et]||(this._gl.enableVertexAttribArray(et),this._enabledAttributes[et]=!0)}disableAttributes(){for(let et in this._enabledAttributes)this._enabledAttributes[et]&&(this._gl.disableVertexAttribArray(et),this._enabledAttributes[et]=!1)}setPolygonOffset(et,t0,oa){this._oldPolygonOffset!==et&&(et?this._gl.enable(this._gl.POLYGON_OFFSET_FILL):this._gl.disable(this._gl.POLYGON_OFFSET_FILL))}setLineWidth(et){et!==this._oldLineWidth&&(this._gl.lineWidth(et),this._oldLineWidth=et)}deallocateGeometry(et){if(et.__webglInit=void 0,et.__webglVertexBuffer!==void 0&&this._gl.deleteBuffer(et.__webglVertexBuffer),et.__webglColorBuffer!==void 0&&this._gl.deleteBuffer(et.__webglColorBuffer),et.geometryGroups!==void 0)for(var t0=0,oa=et.groups;t0<oa;t0++){var a0=et.geometryGroups[t0];a0.__webglVertexBuffer!==void 0&&this._gl.deleteBuffer(a0.__webglVertexBuffer),a0.__webglColorBuffer!==void 0&&this._gl.deleteBuffer(a0.__webglColorBuffer),a0.__webglNormalBuffer!==void 0&&this._gl.deleteBuffer(a0.__webglNormalBuffer),a0.__webglFaceBuffer!==void 0&&this._gl.deleteBuffer(a0.__webglFaceBuffer),a0.__webglLineBuffer!==void 0&&this._gl.deleteBuffer(a0.__webglLineBuffer)}}deallocateMaterial(et){var t0=et.program;if(t0!==void 0){var oa,a0,m0;et.program=void 0;var nm=!1;for(oa=0,a0=this._programs.length;oa<a0;oa++)if((m0=this._programs[oa]).program===t0){m0.usedTimes--,m0.usedTimes===0&&(nm=!0);break}if(nm===!0){var L0=[];for(oa=0,a0=this._programs.length;oa<a0;oa++)(m0=this._programs[oa]).program!==t0&&L0.push(m0);this._programs=L0,this._gl.deleteProgram(t0),this.info.memory.programs--}}}deallocateTexture(et){if(et.image&&et.image.__webglTextureCube)this._gl.deleteTexture(et.image.__webglTextureCube);else{if(!et.__webglInit)return;et.__webglInit=!1,this._gl.deleteTexture(et.__webglTexture)}}onGeometryDispose(et){var t0=et.target;t0.removeEventListener("dispose",this.onGeometryDispose),this.deallocateGeometry(t0),this.info.memory.geometries--}onTextureDispose(et){var t0=et.target;t0.removeEventListener("dispose",this.onTextureDispose),this.deallocateTexture(t0),this.info.memory.textures--}onMaterialDispose(et){var t0=et.target;t0.removeEventListener("dispose",this.onMaterialDispose),this.deallocateMaterial(t0)}getShader(et,t0){var oa;return this.isWebGL1()||t0.startsWith("#version")||(t0=t0.replace(/gl_FragDepthEXT/g,"gl_FragDepth"),t0=`#version 300 es
`+(t0=(t0=(t0=(t0=(t0=et=="fragment"?t0.replace(/varying/g,"in"):t0.replace(/varying/g,"out")).replace(/attribute/g,"in")).replace(/texture2D/g,"texture")).replace(/\/\/DEFINEFRAGCOLOR/g,"out vec4 glFragColor;")).replace(/gl_FragColor/g,"glFragColor"))),et==="fragment"?oa=this._gl.createShader(this._gl.FRAGMENT_SHADER):et==="vertex"&&(oa=this._gl.createShader(this._gl.VERTEX_SHADER)),oa==null?null:(this._gl.shaderSource(oa,t0),this._gl.compileShader(oa),this._gl.getShaderParameter(oa,this._gl.COMPILE_STATUS)?oa:(console.error(this._gl.getShaderInfoLog(oa)),console.error("could not initialize shader"),null))}buildProgram(et,t0,oa,a0){var m0,nm,L0,cm,Gm=[];for(m0 in Gm.push(et),Gm.push(t0),a0)Gm.push(m0),Gm.push(a0[m0]);for(cm=Gm.join(),m0=0,nm=this._programs.length;m0<nm;m0++){var Fm=this._programs[m0];if(Fm.code===cm)return Fm.usedTimes++,Fm.program}if(this.isWebGL1()&&a0.volumetric)throw new Error("Volumetric rendering requires webgl2 which is not supported by your hardware.");if((L0=this._gl.createProgram())==null)return null;var Vm,D1,O1,tg="precision "+this._precision+" float;",Mg=[a0.volumetric?"#version 300 es":"",tg].join(`
`),kg=[a0.volumetric?"#version 300 es":"",a0.fragdepth&&this.isWebGL1()?"#extension GL_EXT_frag_depth: enable":"",a0.shaded?"#define SHADED 1":"",a0.wireframe?"#define WIREFRAME 1":"",tg].join(`
`),cg=this.getShader("fragment",kg+et),Ag=this.getShader("vertex",Mg+t0);for(D1 in Ag!=null&&this._gl.attachShader(L0,Ag),cg!=null&&this._gl.attachShader(L0,cg),this._gl.linkProgram(L0),this._gl.getProgramParameter(L0,this._gl.LINK_STATUS)||console.error("Could not initialize shader"),L0.uniforms={},L0.attributes={},Vm=["viewMatrix","modelViewMatrix","projectionMatrix","normalMatrix","vWidth","vHeight"],oa)Vm.push(D1);for(O1=0;O1<Vm.length;O1++){var K1=Vm[O1];L0.uniforms[K1]=this._gl.getUniformLocation(L0,K1)}for(Vm=["position","normal","color","lineDistance","offset","radius"],O1=0;O1<Vm.length;O1++){var G1=Vm[O1];L0.attributes[G1]=this._gl.getAttribLocation(L0,G1)}return L0.id=this._programs_counter++,this._programs.push({program:L0,code:cm,usedTimes:1}),this.info.memory.programs=this._programs.length,L0}setProgram(et,t0,oa,a0,m0,nm){if(a0.needsUpdate&&(a0.program&&this.deallocateMaterial(a0),this.initMaterial(a0,t0,oa,m0),a0.needsUpdate=!1),a0.program==null)return null;var L0=!1,cm=a0.program,Gm=cm.uniforms,Fm=a0.uniforms;if(cm!=this._currentProgram&&(this._gl.useProgram(cm),this._currentProgram=cm,L0=!0),a0.id!=this._currentMaterialId&&(this._currentMaterialId=a0.id,L0=!0),et!=this._currentCamera&&(this._currentCamera=et,L0=!0),Gm.projectionMatrix&&this._gl.uniformMatrix4fv(Gm.projectionMatrix,!1,et.projectionMatrix.elements),Gm.modelViewMatrix&&this._gl.uniformMatrix4fv(Gm.modelViewMatrix,!1,m0._modelViewMatrix.elements),Gm.normalMatrix&&this._gl.uniformMatrix3fv(Gm.normalMatrix,!1,m0._normalMatrix.elements),Gm.projinv&&(this._projInverse.getInverse(et.projectionMatrix),this._gl.uniformMatrix4fv(Gm.projinv,!1,this._projInverse.elements)),Gm.viewMatrix&&this._gl.uniformMatrix4fv(Gm.viewMatrix,!1,et.matrixWorldInverse.elements),Gm.vWidth&&this._gl.uniform1f(Gm.vWidth,this._viewportWidth),Gm.vHeight&&this._gl.uniform1f(Gm.vHeight,this._viewportHeight),L0){if(Fm.fogColor.value=oa.color,Fm.fogNear.value=oa.near,Fm.fogFar.value=oa.far,a0.shaderID.startsWith("lambert")||a0.shaderID==="instanced"||a0.shaderID.endsWith("imposter"))this._lightsNeedUpdate&&(this.setupLights(cm,t0),this._lightsNeedUpdate=!1),Fm.directionalLightColor.value=this._lights.directional.colors,Fm.directionalLightDirection.value=this._lights.directional.positions;else if(a0.shaderID.endsWith("outline"))Fm.outlineColor.value=a0.outlineColor,Fm.outlineWidth.value=a0.outlineWidth,Fm.outlinePushback.value=a0.outlinePushback,Fm.outlineMaxPixels.value=a0.outlineMaxPixels*this.devicePixelRatio;else if(a0.shaderID==="volumetric"){m0._modelViewMatrix.getScale(this._direction),this._worldInverse.getInverse(m0._modelViewMatrix),this._projInverse.getInverse(et.projectionMatrix),this._textureMatrix.multiplyMatrices(m0.material.texmatrix,this._worldInverse),this._gl.uniformMatrix4fv(Gm.textmat,!1,this._textureMatrix.elements),this._gl.uniformMatrix4fv(Gm.projinv,!1,this._projInverse.elements);let Vm=Math.min(Math.min(this._direction.x,this._direction.y),this._direction.z);Fm.step.value=m0.material.unit*Vm,Fm.maxdepth.value=m0.material.maxdepth*Vm,Fm.transfermax.value=m0.material.transfermax,Fm.transfermin.value=m0.material.transfermin,Fm.subsamples.value=m0.material.subsamples,nm.setTexture(m0.material.transferfn,4,!1),nm.setTexture(m0.material.map,3,!0),this._gl.activeTexture(this._gl.TEXTURE5),this._gl.bindTexture(this._gl.TEXTURE_2D,this._depthTexture)}Fm.opacity.value=a0.opacity,this.loadMaterialUniforms(Gm,Fm)}return Fm.shading&&(Fm.shading.value==3?(this._gl.activeTexture(this._gl.TEXTURE0+this.SHADE_TEXTURE),this._gl.bindTexture(this._gl.TEXTURE_2D,this._shadingTexture)):console.error("Invalid shading textures.")),cm}loadMaterialUniforms(et,t0){var oa,a0,m0,nm;for(oa in t0)et[oa]&&(a0=t0[oa].type,m0=t0[oa].value,nm=et[oa],a0==="f"?this._gl.uniform1f(nm,m0):a0==="i"?this._gl.uniform1i(nm,m0):a0==="fv"?this._gl.uniform3fv(nm,m0):a0==="c"?this._gl.uniform3f(nm,m0.r,m0.g,m0.b):a0==="f4"&&this._gl.uniform4f(nm,m0[0],m0[1],m0[2],m0[3]))}addObject(et,t0){var oa,a0,m0,nm;if(!et.__webglInit&&(et.__webglInit=!0,et._modelViewMatrix=new c.Matrix4,et._normalMatrix=new c.Matrix3,et.geometry!==void 0&&et.geometry.__webglInit===void 0&&(et.geometry.__webglInit=!0,et.geometry.addEventListener("dispose",this.onGeometryDispose.bind(this))),et instanceof x0||et instanceof Ip))for(oa=0,a0=(m0=et.geometry).geometryGroups.length;oa<a0;oa++)(nm=m0.geometryGroups[oa]).id=this._geometryGroupCounter++,nm.__webglVertexBuffer||(et instanceof x0?(this.createMeshBuffers(nm),m0.elementsNeedUpdate=!0,m0.normalsNeedUpdate=!0):et instanceof Ip&&this.createLineBuffers(nm),m0.verticesNeedUpdate=!0,m0.colorsNeedUpdate=!0);if(!et.__webglActive){if(et instanceof x0||et instanceof Ip)for(oa=0,a0=(m0=et.geometry).geometryGroups.length;oa<a0;oa++)nm=m0.geometryGroups[oa],this.addBuffer(t0.__webglObjects,nm,et);else et instanceof B0&&t0.__webglSprites.push(et);et.__webglActive=!0}}updateObject(et){var t0,oa=et.geometry;if(et instanceof x0||et instanceof Ip){for(var a0=0,m0=oa.geometryGroups.length;a0<m0;a0++)t0=oa.geometryGroups[a0],(oa.verticesNeedUpdate||oa.elementsNeedUpdate||oa.colorsNeedUpdate||oa.normalsNeedUpdate)&&this.setBuffers(t0,this._gl.STATIC_DRAW);oa.verticesNeedUpdate=!1,oa.elementsNeedUpdate=!1,oa.normalsNeedUpdate=!1,oa.colorsNeedUpdate=!1,oa.buffersNeedUpdate=!1}}removeObject(et,t0){et instanceof x0||et instanceof Ip?this.removeInstances(t0.__webglObjects,et):et instanceof B0&&this.removeInstancesDirect(t0.__webglSprites,et),et.__webglActive=!1}removeInstances(et,t0){for(var oa=et.length-1;oa>=0;--oa)et[oa].object===t0&&et.splice(oa,1)}removeInstancesDirect(et,t0){for(var oa=et.length-1;oa>=0;--oa)et[oa]===t0&&et.splice(oa,1)}unrollBufferMaterial(et){var t0=et.object.material;if(t0.volumetric)et.opaque=null,et.transparent=null,et.volumetric=t0;else if(t0.transparent){if(et.opaque=null,et.volumetric=null,et.transparent=t0,!t0.wireframe){let oa=t0.clone();oa.opacity=0,et.transparentDepth=oa}}else{if(et.opaque=t0,et.transparent=null,et.volumetric=null,!t0.wireframe){let oa=t0.clone();oa.opacity=0,et.opaqueDepth=oa}t0.hasAO&&(et.hasAO=!0),(this._AOEnabled||et.hasAO)&&(et.opaqueShaded=t0.clone(),et.opaqueShaded.shaded=!0)}}setBuffers(et,t0){var oa=et.vertexArray,a0=et.colorArray;if(et.__webglOffsetBuffer!==void 0?(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,et.__webglOffsetBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,oa,t0)):(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,et.__webglVertexBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,oa,t0)),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,et.__webglColorBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,a0,t0),et.normalArray&&et.__webglNormalBuffer!==void 0){var m0=et.normalArray;this._gl.bindBuffer(this._gl.ARRAY_BUFFER,et.__webglNormalBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,m0,t0)}if(et.radiusArray&&et.__webglRadiusBuffer!==void 0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,et.__webglRadiusBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,et.radiusArray,t0)),et.faceArray&&et.__webglFaceBuffer!==void 0){var nm=et.faceArray;this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,et.__webglFaceBuffer),this._gl.bufferData(this._gl.ELEMENT_ARRAY_BUFFER,nm,t0)}if(et.lineArray&&et.__webglLineBuffer!==void 0){var L0=et.lineArray;this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,et.__webglLineBuffer),this._gl.bufferData(this._gl.ELEMENT_ARRAY_BUFFER,L0,t0)}}createMeshBuffers(et){et.radiusArray&&(et.__webglRadiusBuffer=this._gl.createBuffer()),et.useOffset&&(et.__webglOffsetBuffer=this._gl.createBuffer()),et.__webglVertexBuffer=this._gl.createBuffer(),et.__webglNormalBuffer=this._gl.createBuffer(),et.__webglColorBuffer=this._gl.createBuffer(),et.__webglFaceBuffer=this._gl.createBuffer(),et.__webglLineBuffer=this._gl.createBuffer(),this.info.memory.geometries++}createLineBuffers(et){et.__webglVertexBuffer=this._gl.createBuffer(),et.__webglColorBuffer=this._gl.createBuffer(),this.info.memory.geometries++}addBuffer(et,t0,oa){et.push({buffer:t0,object:oa,opaque:null,transparent:null})}setupMatrices(et,t0){et._modelViewMatrix.multiplyMatrices(t0.matrixWorldInverse,et.matrixWorld),et._normalMatrix.getInverse(et._modelViewMatrix),et._normalMatrix.transpose()}filterFallback(et){return this._gl.LINEAR}setTextureParameters(et,t0){et==this._gl.TEXTURE_2D?(this._gl.texParameteri(et,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(et,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(et,this._gl.TEXTURE_MAG_FILTER,this.filterFallback(t0.magFilter)),this._gl.texParameteri(et,this._gl.TEXTURE_MIN_FILTER,this.filterFallback(t0.minFilter))):(this._gl.texParameteri(et,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(et,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(et,this._gl.TEXTURE_WRAP_R,this._gl.CLAMP_TO_EDGE),this._extColorBufferFloat&&this._extFloatLinear?(this._gl.texParameteri(et,this._gl.TEXTURE_MAG_FILTER,this._gl.LINEAR),this._gl.texParameteri(et,this._gl.TEXTURE_MIN_FILTER,this._gl.LINEAR)):(this._gl.texParameteri(et,this._gl.TEXTURE_MAG_FILTER,this._gl.NEAREST),this._gl.texParameteri(et,this._gl.TEXTURE_MIN_FILTER,this._gl.NEAREST)))}paramToGL(et){return et===W?this._gl.UNSIGNED_BYTE:et===J?this._gl.RGBA:et===T?this._gl.NEAREST:0}setupLights(et,t0){var oa,a0,m0,nm,L0,cm=this._lights,Gm=cm.directional.colors,Fm=cm.directional.positions,Vm=0,D1=0;for(oa=0,a0=t0.length;oa<a0;oa++)if(nm=(m0=t0[oa]).color,L0=m0.intensity,m0 instanceof re){if(this._direction.getPositionFromMatrix(m0.matrixWorld),this._vector3.getPositionFromMatrix(m0.target.matrixWorld),this._direction.sub(this._vector3),this._direction.normalize(),this._direction.x===0&&this._direction.y===0&&this._direction.z===0)continue;Fm[D1]=this._direction.x,Fm[D1+1]=this._direction.y,Fm[D1+2]=this._direction.z,Gm[D1]=nm.r*L0,Gm[D1+1]=nm.g*L0,Gm[D1+2]=nm.b*L0,D1+=3,Vm++}cm.ambient[0]=0,cm.ambient[1]=0,cm.ambient[2]=0,cm.directional.length=Vm}initGL(){try{if(!OffscreenCanvas||this.rows!=null&&this.cols!=null&&this.row!=null&&this.col!=null){if(!(this._gl=this._canvas.getContext("webgl2",{alpha:this._alpha,premultipliedAlpha:this._premultipliedAlpha,antialias:this._antialias,preserveDrawingBuffer:this._preserveDrawingBuffer}))&&!(this._gl=this._canvas.getContext("experimental-webgl",{alpha:this._alpha,premultipliedAlpha:this._premultipliedAlpha,antialias:this._antialias,preserveDrawingBuffer:this._preserveDrawingBuffer}))&&!(this._gl=this._canvas.getContext("webgl",{alpha:this._alpha,premultipliedAlpha:this._premultipliedAlpha,antialias:this._antialias,preserveDrawingBuffer:this._preserveDrawingBuffer})))throw"Error creating WebGL context."}else(Pv==null||Pv.isContextLost())&&(Lv=new OffscreenCanvas(this._canvas.width,this._canvas.height),Pv=Lv.getContext("webgl2",{alpha:!0,premultipliedAlpha:this._premultipliedAlpha,antialias:this._antialias,preserveDrawingBuffer:this._preserveDrawingBuffer})),this._offscreen=Lv,this._gl=Pv,this._bitmap=this._canvas.getContext("bitmaprenderer",{alpha:!0});var et=this._gl.getParameter(this._gl.VERSION);this._webglversion=parseInt(et[6])}catch(t0){console.error(t0)}}isWebGL1(){return this._webglversion==1}setDefaultGLState(){this._gl.clearDepth(1),this._gl.clearStencil(0),this._gl.enable(this._gl.DEPTH_TEST),this._gl.depthFunc(this._gl.LEQUAL),this._gl.frontFace(this._gl.CCW),this._gl.cullFace(this._gl.BACK),this._gl.enable(this._gl.CULL_FACE),this._gl.enable(this._gl.BLEND),this._gl.blendEquation(this._gl.FUNC_ADD),this._gl.blendFunc(this._gl.SRC_ALPHA,this._gl.ONE_MINUS_SRC_ALPHA),this._gl.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearAlpha)}renderObjects(et,t0,oa,a0,m0,nm,L0){var cm,Gm,Fm,Vm,D1,O1,tg;t0?(D1=et.length-1,O1=-1,tg=-1):(D1=0,O1=et.length,tg=1);for(var Mg=D1;Mg!==O1;Mg+=tg)if((cm=et[Mg]).render){if(Gm=cm.object,Fm=cm.buffer,Vm=cm[oa],(cm.hasAO||this._AOEnabled)&&cm[oa+"Shaded"]&&(Vm=cm[oa+"Shaded"]),!Vm)continue;this.setBlending(L0),this.setDepthTest(Vm.depthTest),this.setDepthWrite(Vm.depthWrite),this.setPolygonOffset(Vm.polygonOffset,Vm.polygonOffsetFactor,Vm.polygonOffsetUnits);var kg=Gm._modelViewMatrix.isReflected();if(this.setMaterialFaces(Vm,kg),this.renderBuffer(a0,m0,nm,Vm,Fm,Gm),(this._outlineEnabled||Vm.outline)&&!Vm.wireframe&&Vm.shaderID!=="basic"&&Vm.opacity!==0){let cg=this._outlineMaterial;Vm.shaderID=="sphereimposter"?cg=this._outlineSphereImposterMaterial:Vm.shaderID=="stickimposter"&&(cg=this._outlineStickImposterMaterial),this.renderBuffer(a0,m0,nm,cg,Fm,Gm)}}}renderSprites(et,t0,oa){this._currentGeometryGroupHash=-1,this._currentProgram=null,this._currentCamera=null,this._oldDepthWrite=-1,this._oldDepthTest=-1,this._oldDoubleSided=-1,this._currentMaterialId=-1,this._oldFlipSided=-1,this._lightsNeedUpdate=!0,this.sprites.render(et,t0,this._currentWidth,this._currentHeight,oa),this._currentGeometryGroupHash=-1,this._currentProgram=null,this._currentCamera=null,this._oldDepthWrite=-1,this._oldDepthTest=-1,this._oldDoubleSided=-1,this._currentMaterialId=-1,this._oldFlipSided=-1}}},392:(t,e,r)=>{r.r(e),r.d(e,{assignBonds:()=>l});var n=r(408);const a=[{x:0,y:0,z:1},{x:0,y:1,z:-1},{x:0,y:1,z:0},{x:0,y:1,z:1},{x:1,y:-1,z:-1},{x:1,y:-1,z:0},{x:1,y:-1,z:1},{x:1,y:0,z:-1},{x:1,y:0,z:0},{x:1,y:0,z:1},{x:1,y:1,z:-1},{x:1,y:1,z:0},{x:1,y:1,z:1}],o=4.95;function l(u,c){for(let g=0,T=u.length;g<T;g++)u[g].index||(u[g].index=g);const h={x:{y:{z:[]}}};for(let g=0;g<u.length;g++){const T=u[g],R=Math.floor(T.x/o),W=Math.floor(T.y/o),k=Math.floor(T.z/o);h[R]||(h[R]={}),h[R][W]||(h[R][W]={}),h[R][W][k]||(h[R][W][k]=[]),h[R][W][k].push(T)}function v(g,T){for(let R=0;R<g.length;R++){const W=g[R];for(let k=0;k<T.length;k++){const J=T[k];if((0,n.areConnected)(W,J,c)){const q=W.bonds.indexOf(J.index),Se=J.bonds.indexOf(W.index);q===-1&&Se===-1?(W.bonds.push(J.index),W.bondOrder.push(1),J.bonds.push(W.index),J.bondOrder.push(1)):q===-1?(W.bonds.push(J.index),W.bondOrder.push(J.bondOrder[Se])):Se===-1&&(J.bonds.push(W.index),J.bondOrder.push(W.bondOrder[q]))}}}}for(let g in h){const T=parseInt(g);for(let R in h[T]){const W=parseInt(R);for(let k in h[T][W]){const J=parseInt(k),q=h[T][W][J];for(let Se=0;Se<q.length;Se++){const V=q[Se];for(let Y=Se+1;Y<q.length;Y++){const ie=q[Y];(0,n.areConnected)(V,ie,c)&&V.bonds.indexOf(ie.index)==-1&&(V.bonds.push(ie.index),V.bondOrder.push(1),ie.bonds.push(V.index),ie.bondOrder.push(1))}}for(let Se=0;Se<a.length;Se++){const V=a[Se];h[T+V.x]&&h[T+V.x][W+V.y]&&h[T+V.x][W+V.y][J+V.z]&&v(q,h[T+V.x][W+V.y][J+V.z])}}}}}},407:t=>{var e=(function(){for(var r,n=[],a=0;a<256;a++){r=a;for(var o=0;o<8;o++)r=1&r?3988292384^r>>>1:r>>>1;n[a]=r}return n})();t.exports=function(r,n,a,o){var l=e,u=o+a;r^=-1;for(var c=o;c<u;c++)r=r>>>8^l[255&(r^n[c])];return-1^r}},408:(t,e,r)=>{r.r(e),r.d(e,{areConnected:()=>o});var n=r(40);const a=new Set(["Na","K","Ca","Mg","Mn","Sr"]);function o(l,u,c){if(c&&c.unboundCations&&(a.has(l.elem)||a.has(u.elem)))return!1;let h=(0,n.bondLength)(l.elem)+(0,n.bondLength)(u.elem);h+=.25,h*=h;let v=l.x-u.x;if(v*=v,v>h)return!1;let g=l.y-u.y;if(g*=g,g>h)return!1;let T=l.z-u.z;if(T*=T,T>h)return!1;const R=v+g+T;return!(isNaN(R)||R<.5||R>h||l.altLoc!==u.altLoc&&l.altLoc.trim()!==""&&u.altLoc.trim()!=="")}},471:function(t,e){(function(r){function n(Pp,Ip,x0){for(var B0=(Pp.byteLength,0),Y0=x0.length;Y0>B0;B0++){var im=x0.charCodeAt(B0);if(128>im)Pp.setUint8(Ip++,im>>>0&127);else if(2048>im)Pp.setUint8(Ip++,im>>>6&31|192),Pp.setUint8(Ip++,im>>>0&63|128);else if(65536>im)Pp.setUint8(Ip++,im>>>12&15|224),Pp.setUint8(Ip++,im>>>6&63|128),Pp.setUint8(Ip++,im>>>0&63|128);else{if(!(1114112>im))throw new Error("bad codepoint "+im);Pp.setUint8(Ip++,im>>>18&7|240),Pp.setUint8(Ip++,im>>>12&63|128),Pp.setUint8(Ip++,im>>>6&63|128),Pp.setUint8(Ip++,im>>>0&63|128)}}}function a(Pp){for(var Ip=0,x0=0,B0=Pp.length;B0>x0;x0++){var Y0=Pp.charCodeAt(x0);if(128>Y0)Ip+=1;else if(2048>Y0)Ip+=2;else if(65536>Y0)Ip+=3;else{if(!(1114112>Y0))throw new Error("bad codepoint "+Y0);Ip+=4}}return Ip}function o(Pp,Ip,x0){var B0=typeof Pp;if(B0==="string"){if(32>(Y0=a(Pp)))return Ip.setUint8(x0,160|Y0),n(Ip,x0+1,Pp),1+Y0;if(256>Y0)return Ip.setUint8(x0,217),Ip.setUint8(x0+1,Y0),n(Ip,x0+2,Pp),2+Y0;if(65536>Y0)return Ip.setUint8(x0,218),Ip.setUint16(x0+1,Y0),n(Ip,x0+3,Pp),3+Y0;if(4294967296>Y0)return Ip.setUint8(x0,219),Ip.setUint32(x0+1,Y0),n(Ip,x0+5,Pp),5+Y0}if(Pp instanceof Uint8Array){var Y0=Pp.byteLength,im=new Uint8Array(Ip.buffer);if(256>Y0)return Ip.setUint8(x0,196),Ip.setUint8(x0+1,Y0),im.set(Pp,x0+2),2+Y0;if(65536>Y0)return Ip.setUint8(x0,197),Ip.setUint16(x0+1,Y0),im.set(Pp,x0+3),3+Y0;if(4294967296>Y0)return Ip.setUint8(x0,198),Ip.setUint32(x0+1,Y0),im.set(Pp,x0+5),5+Y0}if(B0==="number"){if(!isFinite(Pp))throw new Error("Number not finite: "+Pp);if(Math.floor(Pp)!==Pp)return Ip.setUint8(x0,203),Ip.setFloat64(x0+1,Pp),9;if(Pp>=0){if(128>Pp)return Ip.setUint8(x0,Pp),1;if(256>Pp)return Ip.setUint8(x0,204),Ip.setUint8(x0+1,Pp),2;if(65536>Pp)return Ip.setUint8(x0,205),Ip.setUint16(x0+1,Pp),3;if(4294967296>Pp)return Ip.setUint8(x0,206),Ip.setUint32(x0+1,Pp),5;throw new Error("Number too big 0x"+Pp.toString(16))}if(Pp>=-32)return Ip.setInt8(x0,Pp),1;if(Pp>=-128)return Ip.setUint8(x0,208),Ip.setInt8(x0+1,Pp),2;if(Pp>=-32768)return Ip.setUint8(x0,209),Ip.setInt16(x0+1,Pp),3;if(Pp>=-2147483648)return Ip.setUint8(x0,210),Ip.setInt32(x0+1,Pp),5;throw new Error("Number too small -0x"+(-Pp).toString(16).substr(1))}if(Pp===null)return Ip.setUint8(x0,192),1;if(B0==="boolean")return Ip.setUint8(x0,Pp?195:194),1;if(B0==="object"){var om=0,Cm=Array.isArray(Pp);if(Cm)Y0=Pp.length;else{var r1=Object.keys(Pp);Y0=r1.length}if(16>Y0?(Ip.setUint8(x0,Y0|(Cm?144:128)),om=1):65536>Y0?(Ip.setUint8(x0,Cm?220:222),Ip.setUint16(x0+1,Y0),om=3):4294967296>Y0&&(Ip.setUint8(x0,Cm?221:223),Ip.setUint32(x0+1,Y0),om=5),Cm)for(var Om=0;Y0>Om;Om++)om+=o(Pp[Om],Ip,x0+om);else for(Om=0;Y0>Om;Om++){var a1=r1[Om];om+=o(a1,Ip,x0+om),om+=o(Pp[a1],Ip,x0+om)}return om}throw new Error("Unknown type "+B0)}function l(Pp){var Ip=typeof Pp;if(Ip==="string"){if(32>(x0=a(Pp)))return 1+x0;if(256>x0)return 2+x0;if(65536>x0)return 3+x0;if(4294967296>x0)return 5+x0}if(Pp instanceof Uint8Array){if(256>(x0=Pp.byteLength))return 2+x0;if(65536>x0)return 3+x0;if(4294967296>x0)return 5+x0}if(Ip==="number"){if(Math.floor(Pp)!==Pp)return 9;if(Pp>=0){if(128>Pp)return 1;if(256>Pp)return 2;if(65536>Pp)return 3;if(4294967296>Pp)return 5;throw new Error("Number too big 0x"+Pp.toString(16))}if(Pp>=-32)return 1;if(Pp>=-128)return 2;if(Pp>=-32768)return 3;if(Pp>=-2147483648)return 5;throw new Error("Number too small -0x"+Pp.toString(16).substr(1))}if(Ip==="boolean"||Pp===null)return 1;if(Ip==="object"){var x0,B0=0;if(Array.isArray(Pp)){x0=Pp.length;for(var Y0=0;x0>Y0;Y0++)B0+=l(Pp[Y0])}else{var im=Object.keys(Pp);for(x0=im.length,Y0=0;x0>Y0;Y0++){var om=im[Y0];B0+=l(om)+l(Pp[om])}}if(16>x0)return 1+B0;if(65536>x0)return 3+B0;if(4294967296>x0)return 5+B0;throw new Error("Array or object too long 0x"+x0.toString(16))}throw new Error("Unknown type "+Ip)}function u(Pp){var Ip=new ArrayBuffer(l(Pp));return o(Pp,new DataView(Ip),0),new Uint8Array(Ip)}function c(Pp,Ip,x0){return Ip?new Pp(Ip.buffer,Ip.byteOffset,Ip.byteLength/(x0||1)):void 0}function h(Pp){return c(DataView,Pp)}function v(Pp){return c(Uint8Array,Pp)}function g(Pp){return c(Int8Array,Pp)}function T(Pp){return c(Int32Array,Pp,4)}function R(Pp){return c(Float32Array,Pp,4)}function W(Pp,Ip){var x0=Pp.length/2;Ip||(Ip=new Int16Array(x0));for(var B0=0,Y0=0;x0>B0;++B0,Y0+=2)Ip[B0]=Pp[Y0]<<8^Pp[Y0+1];return Ip}function k(Pp,Ip){var x0=Pp.length;Ip||(Ip=new Uint8Array(2*x0));for(var B0=h(Ip),Y0=0;x0>Y0;++Y0)B0.setInt16(2*Y0,Pp[Y0]);return v(Ip)}function J(Pp,Ip){var x0=Pp.length/4;Ip||(Ip=new Int32Array(x0));for(var B0=0,Y0=0;x0>B0;++B0,Y0+=4)Ip[B0]=Pp[Y0]<<24^Pp[Y0+1]<<16^Pp[Y0+2]<<8^Pp[Y0+3];return Ip}function q(Pp,Ip){var x0=Pp.length;Ip||(Ip=new Uint8Array(4*x0));for(var B0=h(Ip),Y0=0;x0>Y0;++Y0)B0.setInt32(4*Y0,Pp[Y0]);return v(Ip)}function Se(Pp,Ip){var x0=Pp.length;Ip||(Ip=new Float32Array(x0/4));for(var B0=h(Ip),Y0=h(Pp),im=0,om=0,Cm=x0/4;Cm>im;++im,om+=4)B0.setFloat32(om,Y0.getFloat32(om),!0);return Ip}function V(Pp,Ip,x0){var B0=Pp.length,Y0=1/Ip;x0||(x0=new Float32Array(B0));for(var im=0;B0>im;++im)x0[im]=Pp[im]*Y0;return x0}function Y(Pp,Ip,x0){var B0=Pp.length;x0||(x0=new Int32Array(B0));for(var Y0=0;B0>Y0;++Y0)x0[Y0]=Math.round(Pp[Y0]*Ip);return x0}function ie(Pp,Ip){var x0,B0;if(!Ip){var Y0=0;for(x0=0,B0=Pp.length;B0>x0;x0+=2)Y0+=Pp[x0+1];Ip=new Pp.constructor(Y0)}var im=0;for(x0=0,B0=Pp.length;B0>x0;x0+=2)for(var om=Pp[x0],Cm=Pp[x0+1],r1=0;Cm>r1;++r1)Ip[im]=om,++im;return Ip}function se(Pp){if(Pp.length===0)return new Int32Array;var Ip,x0,B0=2;for(Ip=1,x0=Pp.length;x0>Ip;++Ip)Pp[Ip-1]!==Pp[Ip]&&(B0+=2);var Y0=new Int32Array(B0),im=0,om=1;for(Ip=1,x0=Pp.length;x0>Ip;++Ip)Pp[Ip-1]!==Pp[Ip]?(Y0[im]=Pp[Ip-1],Y0[im+1]=om,om=1,im+=2):++om;return Y0[im]=Pp[Pp.length-1],Y0[im+1]=om,Y0}function ct(Pp,Ip){var x0=Pp.length;Ip||(Ip=new Pp.constructor(x0)),x0&&(Ip[0]=Pp[0]);for(var B0=1;x0>B0;++B0)Ip[B0]=Pp[B0]+Ip[B0-1];return Ip}function ae(Pp,Ip){var x0=Pp.length;Ip||(Ip=new Pp.constructor(x0)),Ip[0]=Pp[0];for(var B0=1;x0>B0;++B0)Ip[B0]=Pp[B0]-Pp[B0-1];return Ip}function st(Pp,Ip){var x0,B0,Y0=Pp instanceof Int8Array?127:32767,im=-Y0-1,om=Pp.length;if(!Ip){var Cm=0;for(x0=0;om>x0;++x0)Pp[x0]<Y0&&Pp[x0]>im&&++Cm;Ip=new Int32Array(Cm)}for(x0=0,B0=0;om>x0;){for(var r1=0;Pp[x0]===Y0||Pp[x0]===im;)r1+=Pp[x0],++x0;r1+=Pp[x0],++x0,Ip[B0]=r1,++B0}return Ip}function Ct(Pp,Ip){var x0,B0=32767,Y0=-B0-1,im=Pp.length,om=0;for(x0=0;im>x0;++x0)(Om=Pp[x0])===0?++om:Om>0?(om+=Math.ceil(Om/B0),Om%B0===0&&(om+=1)):(om+=Math.ceil(Om/Y0),Om%Y0===0&&(om+=1));var Cm=new Int16Array(om),r1=0;for(x0=0;im>x0;++x0){var Om;if((Om=Pp[x0])>=0)for(;Om>=B0;)Cm[r1]=B0,++r1,Om-=B0;else for(;Y0>=Om;)Cm[r1]=Y0,++r1,Om-=Y0;Cm[r1]=Om,++r1}return Cm}function $t(Pp,Ip){return ct(ie(Pp),Ip)}function jo(Pp){return se(ae(Pp))}function Lp(Pp,Ip,x0){return V(ie(Pp,T(x0)),Ip,x0)}function Mn(Pp,Ip){return se(Y(Pp,Ip))}function sa(Pp,Ip,x0){return V(ct(Pp,T(x0)),Ip,x0)}function re(Pp,Ip,x0){return ae(Y(Pp,Ip),x0)}function $o(Pp,Ip,x0){return V(st(Pp,T(x0)),Ip,x0)}function qo(Pp,Ip,x0){var B0=st(Pp,T(x0));return sa(B0,Ip,R(B0))}function Kt(Pp,Ip,x0){return Ct(re(Pp,Ip))}function i0(Pp){var Ip=h(Pp),x0=Ip.getInt32(0),B0=Ip.getInt32(4),Y0=Pp.subarray(8,12);return[x0,Pp=Pp.subarray(12),B0,Y0]}function Up(Pp,Ip,x0,B0){var Y0=new ArrayBuffer(12+B0.byteLength),im=new Uint8Array(Y0),om=new DataView(Y0);return om.setInt32(0,Pp),om.setInt32(4,Ip),x0&&im.set(x0,8),im.set(B0,12),im}function l0(Pp){return Up(2,Pp.length,void 0,v(Pp))}function y0(Pp){return Up(4,Pp.length,void 0,q(Pp))}function kp(Pp,Ip){return Up(5,Pp.length/Ip,q([Ip]),v(Pp))}function u0(Pp){return Up(6,Pp.length,void 0,q(se(Pp)))}function f0(Pp){return Up(8,Pp.length,void 0,q(jo(Pp)))}function v0(Pp,Ip){return Up(9,Pp.length,q([Ip]),q(Mn(Pp,Ip)))}function p0(Pp,Ip){return Up(10,Pp.length,q([Ip]),k(Kt(Pp,Ip)))}function rm(Pp){var Ip={};return W1.forEach(function(x0){Pp[x0]!==void 0&&(Ip[x0]=Pp[x0])}),Pp.bondAtomList&&(Ip.bondAtomList=y0(Pp.bondAtomList)),Pp.bondOrderList&&(Ip.bondOrderList=l0(Pp.bondOrderList)),Ip.xCoordList=p0(Pp.xCoordList,1e3),Ip.yCoordList=p0(Pp.yCoordList,1e3),Ip.zCoordList=p0(Pp.zCoordList,1e3),Pp.bFactorList&&(Ip.bFactorList=p0(Pp.bFactorList,100)),Pp.atomIdList&&(Ip.atomIdList=f0(Pp.atomIdList)),Pp.altLocList&&(Ip.altLocList=u0(Pp.altLocList)),Pp.occupancyList&&(Ip.occupancyList=v0(Pp.occupancyList,100)),Ip.groupIdList=f0(Pp.groupIdList),Ip.groupTypeList=y0(Pp.groupTypeList),Pp.secStructList&&(Ip.secStructList=l0(Pp.secStructList)),Pp.insCodeList&&(Ip.insCodeList=u0(Pp.insCodeList)),Pp.sequenceIndexList&&(Ip.sequenceIndexList=f0(Pp.sequenceIndexList)),Ip.chainIdList=kp(Pp.chainIdList,4),Pp.chainNameList&&(Ip.chainNameList=kp(Pp.chainNameList,4)),Ip}function am(Pp){function Ip(r1){for(var Om={},a1=0;r1>a1;a1++)Om[im()]=im();return Om}function x0(r1){var Om=Pp.subarray(om,om+r1);return om+=r1,Om}function B0(r1){var Om=Pp.subarray(om,om+r1);om+=r1;var a1=65535;if(r1>a1){for(var hg=[],pm=0;pm<Om.length;pm+=a1)hg.push(String.fromCharCode.apply(null,Om.subarray(pm,pm+a1)));return hg.join("")}return String.fromCharCode.apply(null,Om)}function Y0(r1){for(var Om=new Array(r1),a1=0;r1>a1;a1++)Om[a1]=im();return Om}function im(){var r1,Om,a1=Pp[om];if(!(128&a1))return om++,a1;if((240&a1)==128)return om++,Ip(Om=15&a1);if((240&a1)==144)return om++,Y0(Om=15&a1);if((224&a1)==160)return om++,B0(Om=31&a1);if(!(224&~a1))return r1=Cm.getInt8(om),om++,r1;switch(a1){case 192:return om++,null;case 194:return om++,!1;case 195:return om++,!0;case 196:return Om=Cm.getUint8(om+1),om+=2,x0(Om);case 197:return Om=Cm.getUint16(om+1),om+=3,x0(Om);case 198:return Om=Cm.getUint32(om+1),om+=5,x0(Om);case 202:return r1=Cm.getFloat32(om+1),om+=5,r1;case 203:return r1=Cm.getFloat64(om+1),om+=9,r1;case 204:return r1=Pp[om+1],om+=2,r1;case 205:return r1=Cm.getUint16(om+1),om+=3,r1;case 206:return r1=Cm.getUint32(om+1),om+=5,r1;case 208:return r1=Cm.getInt8(om+1),om+=2,r1;case 209:return r1=Cm.getInt16(om+1),om+=3,r1;case 210:return r1=Cm.getInt32(om+1),om+=5,r1;case 217:return Om=Cm.getUint8(om+1),om+=2,B0(Om);case 218:return Om=Cm.getUint16(om+1),om+=3,B0(Om);case 219:return Om=Cm.getUint32(om+1),om+=5,B0(Om);case 220:return Om=Cm.getUint16(om+1),om+=3,Y0(Om);case 221:return Om=Cm.getUint32(om+1),om+=5,Y0(Om);case 222:return Om=Cm.getUint16(om+1),om+=3,Ip(Om);case 223:return Om=Cm.getUint32(om+1),om+=5,Ip(Om)}throw new Error("Unknown type 0x"+a1.toString(16))}var om=0,Cm=new DataView(Pp.buffer);return im()}function ym(Pp,Ip,x0,B0){switch(Pp){case 1:return Se(Ip);case 2:return g(Ip);case 3:return W(Ip);case 4:return J(Ip);case 5:return v(Ip);case 6:return ie(J(Ip),new Uint8Array(x0));case 7:return ie(J(Ip));case 8:return $t(J(Ip));case 9:return Lp(J(Ip),J(B0)[0]);case 10:return qo(W(Ip),J(B0)[0]);case 11:return V(W(Ip),J(B0)[0]);case 12:return $o(W(Ip),J(B0)[0]);case 13:return $o(g(Ip),J(B0)[0]);case 14:return st(W(Ip));case 15:return st(g(Ip))}}function Wm(Pp,Ip){var x0=(Ip=Ip||{}).ignoreFields,B0={};return ng.forEach(function(Y0){var im=!!x0&&x0.indexOf(Y0)!==-1,om=Pp[Y0];im||om===void 0||(om instanceof Uint8Array?B0[Y0]=ym.apply(null,i0(om)):B0[Y0]=om)}),B0}function h0(Pp){return String.fromCharCode.apply(null,Pp).replace(/\0/g,"")}function f1(Pp,Ip,x0){var B0,Y0,im,om,Cm,r1,Om=(x0=x0||{}).firstModelOnly,a1=Ip.onModel,hg=Ip.onChain,pm=Ip.onGroup,S1=Ip.onAtom,U1=Ip.onBond,J1=0,l1=0,Km=0,A1=0,y1=0,uv=-1,$g=Pp.chainNameList,Sv=Pp.secStructList,Yv=Pp.insCodeList,my=Pp.sequenceIndexList,Vv=Pp.atomIdList,yv=Pp.bFactorList,Hv=Pp.altLocList,gy=Pp.occupancyList,Qv=Pp.bondAtomList,Ty=Pp.bondOrderList;for(B0=0,Y0=Pp.chainsPerModel.length;Y0>B0&&!(Om&&J1>0);++B0){var $v=Pp.chainsPerModel[J1];for(a1&&a1({chainCount:$v,modelIndex:J1}),im=0;$v>im;++im){var Cv=Pp.groupsPerChain[l1];if(hg){var wg=h0(Pp.chainIdList.subarray(4*l1,4*l1+4)),Lv=null;$g&&(Lv=h0($g.subarray(4*l1,4*l1+4))),hg({groupCount:Cv,chainIndex:l1,modelIndex:J1,chainId:wg,chainName:Lv})}for(om=0;Cv>om;++om){var Pv=Pp.groupList[Pp.groupTypeList[Km]],Ny=Pv.atomNameList.length;if(pm){var pg=null;Sv&&(pg=Sv[Km]);var et=null;Pp.insCodeList&&(et=String.fromCharCode(Yv[Km]));var t0=null;my&&(t0=my[Km]),pm({atomCount:Ny,groupIndex:Km,chainIndex:l1,modelIndex:J1,groupId:Pp.groupIdList[Km],groupType:Pp.groupTypeList[Km],groupName:Pv.groupName,singleLetterCode:Pv.singleLetterCode,chemCompType:Pv.chemCompType,secStruct:pg,insCode:et,sequenceIndex:t0})}for(Cm=0;Ny>Cm;++Cm){if(S1){var oa=null;Vv&&(oa=Vv[A1]);var a0=null;yv&&(a0=yv[A1]);var m0=null;Hv&&(m0=String.fromCharCode(Hv[A1]));var nm=null;gy&&(nm=gy[A1]),S1({atomIndex:A1,groupIndex:Km,chainIndex:l1,modelIndex:J1,atomId:oa,element:Pv.elementList[Cm],atomName:Pv.atomNameList[Cm],formalCharge:Pv.formalChargeList[Cm],xCoord:Pp.xCoordList[A1],yCoord:Pp.yCoordList[A1],zCoord:Pp.zCoordList[A1],bFactor:a0,altLoc:m0,occupancy:nm})}A1+=1}if(U1){var L0=Pv.bondAtomList;for(Cm=0,r1=Pv.bondOrderList.length;r1>Cm;++Cm)U1({atomIndex1:A1-Ny+L0[2*Cm],atomIndex2:A1-Ny+L0[2*Cm+1],bondOrder:Pv.bondOrderList[Cm]})}Km+=1}l1+=1}if(y1=uv+1,uv=A1-1,U1&&Qv)for(Cm=0,r1=Qv.length;r1>Cm;Cm+=2){var cm=Qv[Cm],Gm=Qv[Cm+1];(cm>=y1&&uv>=cm||Gm>=y1&&uv>=Gm)&&U1({atomIndex1:cm,atomIndex2:Gm,bondOrder:Ty?Ty[Cm/2]:null})}J1+=1}}function T1(Pp){return u(rm(Pp))}function I1(Pp,Ip){return Pp instanceof ArrayBuffer&&(Pp=new Uint8Array(Pp)),Wm(Pp instanceof Uint8Array?am(Pp):Pp,Ip)}function p1(Pp,Ip,x0,B0){function Y0(){try{var om=I1(im.response);x0(om)}catch(Cm){B0(Cm)}}var im=new XMLHttpRequest;im.addEventListener("load",Y0,!0),im.addEventListener("error",B0,!0),im.responseType="arraybuffer",im.open("GET",Ip+Pp.toUpperCase()),im.send()}function Qm(Pp,Ip,x0){p1(Pp,S0,Ip,x0)}function m1(Pp,Ip,x0){p1(Pp,Z0,Ip,x0)}var W1=["mmtfVersion","mmtfProducer","unitCell","spaceGroup","structureId","title","depositionDate","releaseDate","experimentalMethods","resolution","rFree","rWork","bioAssemblyList","ncsOperatorList","entityList","groupList","numBonds","numAtoms","numGroups","numChains","numModels","groupsPerChain","chainsPerModel"],ug=["xCoordList","yCoordList","zCoordList","groupIdList","groupTypeList","chainIdList","bFactorList","atomIdList","altLocList","occupancyList","secStructList","insCodeList","sequenceIndexList","chainNameList","bondAtomList","bondOrderList"],ng=W1.concat(ug),Ko="v1.0.1",wi="//mmtf.rcsb.org/v1.0/",S0=wi+"full/",Z0=wi+"reduced/";r.encode=T1,r.decode=I1,r.traverse=f1,r.fetch=Qm,r.fetchReduced=m1,r.version=Ko,r.fetchUrl=S0,r.fetchReducedUrl=Z0,r.encodeMsgpack=u,r.encodeMmtf=rm,r.decodeMsgpack=am,r.decodeMmtf=Wm})(e)},529:(t,e,r)=>{r.r(e),r.d(e,{Matrix3:()=>k,Matrix4:()=>R,Quaternion:()=>n,Ray:()=>J,Vector2:()=>a,Vector3:()=>W,clamp:()=>o,conversionMatrix3:()=>q,degToRad:()=>u});class n{constructor(V,Y,ie,se){this.x=V||0,this.y=Y||0,this.z=ie||0,this.w=se!==void 0?se:1}set(V,Y,ie,se){return this.x=V,this.y=Y,this.z=ie,this.w=se,this}copy(V){return this.x=V.x,this.y=V.y,this.z=V.z,this.w=V.w,this}conjugate(){return this.x*=-1,this.y*=-1,this.z*=-1,this}inverse(){return this.conjugate().normalize()}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}lengthxyz(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}normalize(){let V=this.length();return V===0?(this.x=0,this.y=0,this.z=0,this.w=1):(V=1/V,this.x*=V,this.y*=V,this.z*=V,this.w*=V),this}multiply(V){return this.multiplyQuaternions(this,V)}multiplyScalar(V){return this.x*=V,this.y*=V,this.z*=V,this.w*=V,this}multiplyQuaternions(V,Y){const ie=V.x,se=V.y,ct=V.z,ae=V.w,st=Y.x,Ct=Y.y,$t=Y.z,jo=Y.w;return this.x=ie*jo+ae*st+se*$t-ct*Ct,this.y=se*jo+ae*Ct+ct*st-ie*$t,this.z=ct*jo+ae*$t+ie*Ct-se*st,this.w=ae*jo-ie*st-se*Ct-ct*$t,this}sub(V){return this.x-=V.x,this.y-=V.y,this.z-=V.z,this.w-=V.w,this}clone(){return new n(this.x,this.y,this.z,this.w)}setFromEuler(V){const Y=Math.cos(V.x/2),ie=Math.cos(V.y/2),se=Math.cos(V.z/2),ct=Math.sin(V.x/2),ae=Math.sin(V.y/2),st=Math.sin(V.z/2);return this.x=ct*ie*se+Y*ae*st,this.y=Y*ae*se-ct*ie*st,this.z=Y*ie*st+ct*ae*se,this.w=Y*ie*se-ct*ae*st,this}}class a{constructor(V,Y){this.x=V||0,this.y=Y||0}set(V,Y){return this.x=V,this.y=Y,this}subVectors(V,Y){return this.x=V.x-Y.x,this.y=V.y-Y.y,this}copy(V){return this.x=V.x,this.y=V.y,this}clone(){return new a(this.x,this.y)}}function o(Se,V,Y){return Math.min(Math.max(Se,V),Y)}const l=Math.PI/180;function u(Se){return Se*l}var c,h,v,g,T;class R{constructor(V=1,Y=0,ie=0,se=0,ct=0,ae=1,st=0,Ct=0,$t=0,jo=0,Lp=1,Mn=0,sa=0,re=0,$o=0,qo=1){V!==void 0&&typeof V!="number"?this.elements=new Float32Array(V):(this.elements=new Float32Array(16),this.elements[0]=V,this.elements[4]=Y,this.elements[8]=ie,this.elements[12]=se,this.elements[1]=ct,this.elements[5]=ae,this.elements[9]=st,this.elements[13]=Ct,this.elements[2]=$t,this.elements[6]=jo,this.elements[10]=Lp,this.elements[14]=Mn,this.elements[3]=sa,this.elements[7]=re,this.elements[11]=$o,this.elements[15]=qo)}makeScale(V,Y,ie){throw new Error("Method not implemented.")}set(V,Y,ie,se,ct,ae,st,Ct,$t,jo,Lp,Mn,sa,re,$o,qo){const Kt=this.elements;return Kt[0]=V,Kt[4]=Y,Kt[8]=ie,Kt[12]=se,Kt[1]=ct,Kt[5]=ae,Kt[9]=st,Kt[13]=Ct,Kt[2]=$t,Kt[6]=jo,Kt[10]=Lp,Kt[14]=Mn,Kt[3]=sa,Kt[7]=re,Kt[11]=$o,Kt[15]=qo,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}copy(V){const Y=V.elements;return this.set(Y[0],Y[4],Y[8],Y[12],Y[1],Y[5],Y[9],Y[13],Y[2],Y[6],Y[10],Y[14],Y[3],Y[7],Y[11],Y[15]),this}matrix3FromTopLeft(){const V=this.elements;return new k(V[0],V[4],V[8],V[1],V[5],V[9],V[2],V[6],V[10])}setRotationFromEuler(V,Y){const ie=this.elements,{x:se,y:ct,z:ae}=V,st=Math.cos(se),Ct=Math.sin(se),$t=Math.cos(ct),jo=Math.sin(ct),Lp=Math.cos(ae),Mn=Math.sin(ae);if(Y===void 0||Y==="XYZ"){const sa=st*Lp,re=st*Mn,$o=Ct*Lp,qo=Ct*Mn;ie[0]=$t*Lp,ie[4]=-$t*Mn,ie[8]=jo,ie[1]=re+$o*jo,ie[5]=sa-qo*jo,ie[9]=-Ct*$t,ie[2]=qo-sa*jo,ie[6]=$o+re*jo,ie[10]=st*$t}else console.error(`Error with matrix4 setRotationFromEuler. Order: ${Y}`);return this}setRotationFromQuaternion(V){const Y=this.elements,{x:ie,y:se,z:ct,w:ae}=V,st=ie+ie,Ct=se+se,$t=ct+ct,jo=ie*st,Lp=ie*Ct,Mn=ie*$t,sa=se*Ct,re=se*$t,$o=ct*$t,qo=ae*st,Kt=ae*Ct,i0=ae*$t;return Y[0]=1-(sa+$o),Y[4]=Lp-i0,Y[8]=Mn+Kt,Y[1]=Lp+i0,Y[5]=1-(jo+$o),Y[9]=re-qo,Y[2]=Mn-Kt,Y[6]=re+qo,Y[10]=1-(jo+sa),this}multiplyMatrices(V,Y){const ie=V.elements,se=Y.elements,ct=this.elements,ae=ie[0],st=ie[4],Ct=ie[8],$t=ie[12],jo=ie[1],Lp=ie[5],Mn=ie[9],sa=ie[13],re=ie[2],$o=ie[6],qo=ie[10],Kt=ie[14],i0=ie[3],Up=ie[7],l0=ie[11],y0=ie[15],kp=se[0],u0=se[4],f0=se[8],v0=se[12],p0=se[1],rm=se[5],am=se[9],ym=se[13],Wm=se[2],h0=se[6],f1=se[10],T1=se[14],I1=se[3],p1=se[7],Qm=se[11],m1=se[15];return ct[0]=ae*kp+st*p0+Ct*Wm+$t*I1,ct[4]=ae*u0+st*rm+Ct*h0+$t*p1,ct[8]=ae*f0+st*am+Ct*f1+$t*Qm,ct[12]=ae*v0+st*ym+Ct*T1+$t*m1,ct[1]=jo*kp+Lp*p0+Mn*Wm+sa*I1,ct[5]=jo*u0+Lp*rm+Mn*h0+sa*p1,ct[9]=jo*f0+Lp*am+Mn*f1+sa*Qm,ct[13]=jo*v0+Lp*ym+Mn*T1+sa*m1,ct[2]=re*kp+$o*p0+qo*Wm+Kt*I1,ct[6]=re*u0+$o*rm+qo*h0+Kt*p1,ct[10]=re*f0+$o*am+qo*f1+Kt*Qm,ct[14]=re*v0+$o*ym+qo*T1+Kt*m1,ct[3]=i0*kp+Up*p0+l0*Wm+y0*I1,ct[7]=i0*u0+Up*rm+l0*h0+y0*p1,ct[11]=i0*f0+Up*am+l0*f1+y0*Qm,ct[15]=i0*v0+Up*ym+l0*T1+y0*m1,this}multiplyScalar(V){const Y=this.elements;return Y[0]*=V,Y[4]*=V,Y[8]*=V,Y[12]*=V,Y[1]*=V,Y[5]*=V,Y[9]*=V,Y[13]*=V,Y[2]*=V,Y[6]*=V,Y[10]*=V,Y[14]*=V,Y[3]*=V,Y[7]*=V,Y[11]*=V,Y[15]*=V,this}makeTranslation(V,Y,ie){return this.set(1,0,0,V,0,1,0,Y,0,0,1,ie,0,0,0,1),this}snap(V){const Y=Math.pow(10,4),ie=this.elements;for(let se=0;se<16;se++){const ct=Math.round(ie[se]);ct===Math.round(ie[se]*Y)/Y&&(ie[se]=ct)}return this}transpose(){const V=this.elements;let Y;return Y=V[1],V[1]=V[4],V[4]=Y,Y=V[2],V[2]=V[8],V[8]=Y,Y=V[6],V[6]=V[9],V[9]=Y,Y=V[3],V[3]=V[12],V[12]=Y,Y=V[7],V[7]=V[13],V[13]=Y,Y=V[11],V[11]=V[14],V[14]=Y,this}setPosition(V){const Y=this.elements;return Y[12]=V.x,Y[13]=V.y,Y[14]=V.z,this}translate(V){const Y=this.elements;return Y[12]+=V.x,Y[13]+=V.y,Y[14]+=V.z,this}getInverse(V,Y){const ie=this.elements,se=V.elements,ct=se[0],ae=se[4],st=se[8],Ct=se[12],$t=se[1],jo=se[5],Lp=se[9],Mn=se[13],sa=se[2],re=se[6],$o=se[10],qo=se[14],Kt=se[3],i0=se[7],Up=se[11],l0=se[15];ie[0]=Lp*qo*i0-Mn*$o*i0+Mn*re*Up-jo*qo*Up-Lp*re*l0+jo*$o*l0,ie[4]=Ct*$o*i0-st*qo*i0-Ct*re*Up+ae*qo*Up+st*re*l0-ae*$o*l0,ie[8]=st*Mn*i0-Ct*Lp*i0+Ct*jo*Up-ae*Mn*Up-st*jo*l0+ae*Lp*l0,ie[12]=Ct*Lp*re-st*Mn*re-Ct*jo*$o+ae*Mn*$o+st*jo*qo-ae*Lp*qo,ie[1]=Mn*$o*Kt-Lp*qo*Kt-Mn*sa*Up+$t*qo*Up+Lp*sa*l0-$t*$o*l0,ie[5]=st*qo*Kt-Ct*$o*Kt+Ct*sa*Up-ct*qo*Up-st*sa*l0+ct*$o*l0,ie[9]=Ct*Lp*Kt-st*Mn*Kt-Ct*$t*Up+ct*Mn*Up+st*$t*l0-ct*Lp*l0,ie[13]=st*Mn*sa-Ct*Lp*sa+Ct*$t*$o-ct*Mn*$o-st*$t*qo+ct*Lp*qo,ie[2]=jo*qo*Kt-Mn*re*Kt+Mn*sa*i0-$t*qo*i0-jo*sa*l0+$t*re*l0,ie[6]=Ct*re*Kt-ae*qo*Kt-Ct*sa*i0+ct*qo*i0+ae*sa*l0-ct*re*l0,ie[10]=ae*Mn*Kt-Ct*jo*Kt+Ct*$t*i0-ct*Mn*i0-ae*$t*l0+ct*jo*l0,ie[14]=Ct*jo*sa-ae*Mn*sa-Ct*$t*re+ct*Mn*re+ae*$t*qo-ct*jo*qo,ie[3]=Lp*re*Kt-jo*$o*Kt-Lp*sa*i0+$t*$o*i0+jo*sa*Up-$t*re*Up,ie[7]=ae*$o*Kt-st*re*Kt+st*sa*i0-ct*$o*i0-ae*sa*Up+ct*re*Up,ie[11]=st*jo*Kt-ae*Lp*Kt-st*$t*i0+ct*Lp*i0+ae*$t*Up-ct*jo*Up,ie[15]=ae*Lp*sa-st*jo*sa+st*$t*re-ct*Lp*re-ae*$t*$o+ct*jo*$o;const y0=ct*ie[0]+$t*ie[4]+sa*ie[8]+Kt*ie[12];if(y0===0){const kp="Matrix4.getInverse(): can't invert matrix, determinant is 0";if(Y)throw new Error(kp);return console.warn(kp),this.identity(),this}return this.multiplyScalar(1/y0),this}isReflected(){const V=this.elements,Y=V[0],ie=V[4],se=V[8],ct=V[1],ae=V[5],st=V[9],Ct=V[2],$t=V[6],jo=V[10];return Y*ae*jo+ct*$t*se+Ct*ie*st-Ct*ae*se-ct*ie*jo-Y*$t*st<0}scale(V){const Y=this.elements,{x:ie}=V,{y:se}=V,{z:ct}=V;return Y[0]*=ie,Y[4]*=se,Y[8]*=ct,Y[1]*=ie,Y[5]*=se,Y[9]*=ct,Y[2]*=ie,Y[6]*=se,Y[10]*=ct,Y[3]*=ie,Y[7]*=se,Y[11]*=ct,this}getMaxScaleOnAxis(){const V=this.elements,Y=V[0]*V[0]+V[1]*V[1]+V[2]*V[2],ie=V[4]*V[4]+V[5]*V[5]+V[6]*V[6],se=V[8]*V[8]+V[9]*V[9]+V[10]*V[10];return Math.sqrt(Math.max(Y,Math.max(ie,se)))}makeFrustum(V,Y,ie,se,ct,ae){const st=this.elements,Ct=2*ct/(Y-V),$t=2*ct/(se-ie),jo=(Y+V)/(Y-V),Lp=(se+ie)/(se-ie),Mn=-(ae+ct)/(ae-ct),sa=-2*ae*ct/(ae-ct);return st[0]=Ct,st[4]=0,st[8]=jo,st[12]=0,st[1]=0,st[5]=$t,st[9]=Lp,st[13]=0,st[2]=0,st[6]=0,st[10]=Mn,st[14]=sa,st[3]=0,st[7]=0,st[11]=-1,st[15]=0,this}makePerspective(V,Y,ie,se){const ct=ie*Math.tan(u(.5*V)),ae=-ct,st=ae*Y,Ct=ct*Y;return this.makeFrustum(st,Ct,ae,ct,ie,se)}makeOrthographic(V,Y,ie,se,ct,ae){const st=this.elements,Ct=1/(Y-V),$t=1/(ie-se),jo=1/(ae-ct),Lp=(Y+V)*Ct,Mn=(ie+se)*$t,sa=(ae+ct)*jo;return st[0]=2*Ct,st[4]=0,st[8]=0,st[12]=-Lp,st[1]=0,st[5]=2*$t,st[9]=0,st[13]=-Mn,st[2]=0,st[6]=0,st[10]=-2*jo,st[14]=-sa,st[3]=0,st[7]=0,st[11]=0,st[15]=1,this}isEqual(V){const Y=V.elements,ie=this.elements;return ie[0]===Y[0]&&ie[4]===Y[4]&&ie[8]===Y[8]&&ie[12]===Y[12]&&ie[1]===Y[1]&&ie[5]===Y[5]&&ie[9]===Y[9]&&ie[13]===Y[13]&&ie[2]===Y[2]&&ie[6]===Y[6]&&ie[10]===Y[10]&&ie[14]===Y[14]&&ie[3]===Y[3]&&ie[7]===Y[7]&&ie[11]===Y[11]&&ie[15]===Y[15]}clone(){const V=this.elements;return new R(V[0],V[4],V[8],V[12],V[1],V[5],V[9],V[13],V[2],V[6],V[10],V[14],V[3],V[7],V[11],V[15])}isIdentity(){const V=this.elements;return V[0]===1&&V[4]===0&&V[8]===0&&V[12]===0&&V[1]===0&&V[5]===1&&V[9]===0&&V[13]===0&&V[2]===0&&V[6]===0&&V[10]===1&&V[14]===0&&V[3]===0&&V[7]===0&&V[11]===0&&V[15]===1}isNearlyIdentity(V){return this.clone().snap(V).isIdentity()}getScale(V){const Y=this.elements;return V=V||new W,v.set(Y[0],Y[1],Y[2]),g.set(Y[4],Y[5],Y[6]),T.set(Y[8],Y[9],Y[10]),V.x=v.length(),V.y=g.length(),V.z=T.length(),V}lookAt(V,Y,ie){const se=this.elements;return T.subVectors(V,Y).normalize(),T.length()===0&&(T.z=1),v.crossVectors(ie,T).normalize(),v.length()===0&&(T.x+=1e-4,v.crossVectors(ie,T).normalize()),g.crossVectors(T,v),se[0]=v.x,se[4]=g.x,se[8]=T.x,se[1]=v.y,se[5]=g.y,se[9]=T.y,se[2]=v.z,se[6]=g.z,se[10]=T.z,this}compose(V,Y,ie){const se=this.elements;return c.identity(),c.setRotationFromQuaternion(Y),h.makeScale(ie.x,ie.y,ie.z),this.multiplyMatrices(c,h),se[12]=V.x,se[13]=V.y,se[14]=V.z,this}}c=new R,h=new R;class W{constructor(V,Y,ie){this.x=V||0,this.y=Y||0,this.z=ie||0,this.atomid=void 0}set(V,Y,ie){return this.x=V,this.y=Y,this.z=ie,this}copy(V){return this.x=V.x,this.y=V.y,this.z=V.z,this}add(V){return this.x+=V.x,this.y+=V.y,this.z+=V.z,this}addVectors(V,Y){return this.x=V.x+Y.x,this.y=V.y+Y.y,this.z=V.z+Y.z,this}multiplyVectors(V,Y){return this.x=V.x*Y.x,this.y=V.y*Y.y,this.z=V.z*Y.z,this}sub(V){return this.x-=V.x,this.y-=V.y,this.z-=V.z,this}subVectors(V,Y){return this.x=V.x-Y.x,this.y=V.y-Y.y,this.z=V.z-Y.z,this}multiplyScalar(V){return this.x*=V,this.y*=V,this.z*=V,this}divideScalar(V){return V!==0?(this.x/=V,this.y/=V,this.z/=V):(this.x=0,this.y=0,this.z=0),this}max(V){return this.x=Math.max(this.x,V.x),this.y=Math.max(this.y,V.y),this.z=Math.max(this.z,V.z),this}min(V){return this.x=Math.min(this.x,V.x),this.y=Math.min(this.y,V.y),this.z=Math.min(this.z,V.z),this}distanceTo(V){return Math.sqrt(this.distanceToSquared(V))}distanceToSquared(V){const Y=this.x-V.x,ie=this.y-V.y,se=this.z-V.z;return Y*Y+ie*ie+se*se}applyMatrix3(V){const{x:Y}=this,{y:ie}=this,{z:se}=this,ct=V.elements;return this.x=ct[0]*Y+ct[3]*ie+ct[6]*se,this.y=ct[1]*Y+ct[4]*ie+ct[7]*se,this.z=ct[2]*Y+ct[5]*ie+ct[8]*se,this}applyMatrix4(V){const{x:Y}=this,{y:ie}=this,{z:se}=this,ct=V.elements;return this.x=ct[0]*Y+ct[4]*ie+ct[8]*se+ct[12],this.y=ct[1]*Y+ct[5]*ie+ct[9]*se+ct[13],this.z=ct[2]*Y+ct[6]*ie+ct[10]*se+ct[14],this}applyProjection(V){const{x:Y}=this,{y:ie}=this,{z:se}=this,ct=V.elements,ae=ct[3]*Y+ct[7]*ie+ct[11]*se+ct[15];return this.x=(ct[0]*Y+ct[4]*ie+ct[8]*se+ct[12])/ae,this.y=(ct[1]*Y+ct[5]*ie+ct[9]*se+ct[13])/ae,this.z=(ct[2]*Y+ct[6]*ie+ct[10]*se+ct[14])/ae,this}applyQuaternion(V){const{x:Y}=this,{y:ie}=this,{z:se}=this,ct=V.x,ae=V.y,st=V.z,Ct=V.w,$t={};$t.x=2*(ie*st-se*ae),$t.y=2*(se*ct-Y*st),$t.z=2*(Y*ae-ie*ct);const jo={};return jo.x=$t.y*st-$t.z*ae,jo.y=$t.z*ct-$t.x*st,jo.z=$t.x*ae-$t.y*ct,this.x=Y+Ct*$t.x+jo.x,this.y=ie+Ct*$t.y+jo.y,this.z=se+Ct*$t.z+jo.z,this}negate(){return this.multiplyScalar(-1)}dot(V){return this.x*V.x+this.y*V.y+this.z*V.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}normalize(){return this.divideScalar(this.length())}cross(V){const{x:Y}=this,{y:ie}=this,{z:se}=this;return this.x=ie*V.z-se*V.y,this.y=se*V.x-Y*V.z,this.z=Y*V.y-ie*V.x,this}crossVectors(V,Y){return this.x=V.y*Y.z-V.z*Y.y,this.y=V.z*Y.x-V.x*Y.z,this.z=V.x*Y.y-V.y*Y.x,this}equals(V){return this.x==V.x&&this.y==V.y&&this.z==V.z}getPositionFromMatrix(V){return this.x=V.elements[12],this.y=V.elements[13],this.z=V.elements[14],this}setEulerFromRotationMatrix(V,Y){const ie=V.elements,se=ie[0],ct=ie[4],ae=ie[8],st=ie[5],Ct=ie[9],$t=ie[6],jo=ie[10];return Y===void 0||Y==="XYZ"?(this.y=Math.asin(o(ae,-1,1)),Math.abs(ae)<.99999?(this.x=Math.atan2(-Ct,jo),this.z=Math.atan2(-ct,se)):(this.x=Math.atan2($t,st),this.z=0)):console.error(`Error with vector's setEulerFromRotationMatrix: Unknown order: ${Y}`),this}rotateAboutVector(V,Y){V.normalize();const ie=Math.cos(Y),se=Math.sin(Y),ct=this.clone().multiplyScalar(ie),ae=V.clone().cross(this).multiplyScalar(se),st=V.clone().multiplyScalar(V.clone().dot(this)).multiplyScalar(1-ie),Ct=ct.add(ae).add(st);return this.x=Ct.x,this.y=Ct.y,this.z=Ct.z,this}setFromMatrixPosition(V){const Y=V.elements;return this.x=Y[12],this.y=Y[13],this.z=Y[14],this}transformDirection(V){const{x:Y}=this,{y:ie}=this,{z:se}=this,ct=V.elements;return this.x=ct[0]*Y+ct[4]*ie+ct[8]*se,this.y=ct[1]*Y+ct[5]*ie+ct[9]*se,this.z=ct[2]*Y+ct[6]*ie+ct[10]*se,this.normalize()}clone(){return new W(this.x,this.y,this.z)}unproject(V){const Y=c;return Y.multiplyMatrices(V.matrixWorld,Y.getInverse(V.projectionMatrix)),this.applyMatrix4(Y)}}v=new W,g=new W,T=new W;class k{constructor(V=1,Y=0,ie=0,se=0,ct=1,ae=0,st=0,Ct=0,$t=1){this.elements=new Float32Array(9),this.set(V,Y,ie,se,ct,ae,st,Ct,$t)}set(V,Y,ie,se,ct,ae,st,Ct,$t){const jo=this.elements;return jo[0]=V,jo[3]=Y,jo[6]=ie,jo[1]=se,jo[4]=ct,jo[7]=ae,jo[2]=st,jo[5]=Ct,jo[8]=$t,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(V){const Y=V.elements;this.set(Y[0],Y[3],Y[6],Y[1],Y[4],Y[7],Y[2],Y[5],Y[8])}multiplyScalar(V){const Y=this.elements;return Y[0]*=V,Y[3]*=V,Y[6]*=V,Y[1]*=V,Y[4]*=V,Y[7]*=V,Y[2]*=V,Y[5]*=V,Y[8]*=V,this}getInverse3(V){const Y=V.elements,ie=this.elements;ie[0]=Y[4]*Y[8]-Y[5]*Y[7],ie[3]=Y[6]*Y[5]-Y[3]*Y[8],ie[6]=Y[3]*Y[7]-Y[6]*Y[4],ie[1]=Y[7]*Y[2]-Y[1]*Y[8],ie[4]=Y[0]*Y[8]-Y[6]*Y[2],ie[7]=Y[1]*Y[6]-Y[0]*Y[7],ie[2]=Y[1]*Y[5]-Y[2]*Y[4],ie[5]=Y[2]*Y[3]-Y[0]*Y[5],ie[8]=Y[0]*Y[4]-Y[1]*Y[3];const se=Y[0]*ie[0]+Y[3]*ie[1]+Y[6]*ie[2];return this.multiplyScalar(1/se),this}getInverse(V,Y){const ie=V.elements,se=this.elements;se[0]=ie[10]*ie[5]-ie[6]*ie[9],se[1]=-ie[10]*ie[1]+ie[2]*ie[9],se[2]=ie[6]*ie[1]-ie[2]*ie[5],se[3]=-ie[10]*ie[4]+ie[6]*ie[8],se[4]=ie[10]*ie[0]-ie[2]*ie[8],se[5]=-ie[6]*ie[0]+ie[2]*ie[4],se[6]=ie[9]*ie[4]-ie[5]*ie[8],se[7]=-ie[9]*ie[0]+ie[1]*ie[8],se[8]=ie[5]*ie[0]-ie[1]*ie[4];const ct=ie[0]*se[0]+ie[1]*se[3]+ie[2]*se[6];if(ct===0){const ae="Matrix3.getInverse(): can't invert matrix, determinant is 0";if(Y)throw new Error(ae);return console.warn(ae),this.identity(),this}return this.multiplyScalar(1/ct),this}getDeterminant(){const V=this.elements;return V[0]*V[4]*V[8]+V[1]*V[5]*V[6]+V[2]*V[3]*V[7]-V[2]*V[4]*V[6]-V[1]*V[3]*V[8]-V[0]*V[5]*V[7]}transpose(){let V;const Y=this.elements;return V=Y[1],Y[1]=Y[3],Y[3]=V,V=Y[2],Y[2]=Y[6],Y[6]=V,V=Y[5],Y[5]=Y[7],Y[7]=V,this}clone(){const V=this.elements;return new k(V[0],V[3],V[6],V[1],V[4],V[7],V[2],V[5],V[8])}getMatrix4(){const V=this.elements;return new R(V[0],V[3],V[6],0,V[1],V[4],V[7],0,V[2],V[5],V[8],0)}}class J{constructor(V,Y){this.origin=V!==void 0?V:new W,this.direction=Y!==void 0?Y:new W}set(V,Y){return this.origin.copy(V),this.direction.copy(Y),this}copy(V){return this.origin.copy(V.origin),this.direction.copy(V.direction),this}at(V,Y){return(Y||new W).copy(this.direction).multiplyScalar(V).add(this.origin)}recast(V){const Y=v;return this.origin.copy(this.at(V,Y)),this}closestPointToPoint(V,Y){const ie=Y||new W;ie.subVectors(V,this.origin);const se=ie.dot(this.direction);return ie.copy(this.direction).multiplyScalar(se).add(this.origin)}distanceToPoint(V){const Y=v,ie=Y.subVectors(V,this.origin).dot(this.direction);return Y.copy(this.direction).multiplyScalar(ie).add(this.origin),Y.distanceTo(V)}isIntersectionCylinder(){}isIntersectionSphere(V){return this.distanceToPoint(V.center)<=V.radius}isIntersectionPlane(V){return V.normal.dot(this.direction)!==0||V.distanceToPoint(this.origin)===0}distanceToPlane(V){const Y=V.normal.dot(this.direction);return Y===0?V.distanceToPoint(this.origin)===0?0:void 0:-(this.origin.dot(V.normal)+V.constant)/Y}intersectPlane(V,Y){const ie=this.distanceToPlane(V);if(ie!==void 0)return this.at(ie,Y)}applyMatrix4(V){return this.direction.add(this.origin).applyMatrix4(V),this.origin.applyMatrix4(V),this.direction.sub(this.origin),this}clone(){return new J().copy(this)}}function q(Se,V,Y,ie,se,ct){ie=ie*Math.PI/180,se=se*Math.PI/180,ct=ct*Math.PI/180;const ae=Lp=>Lp*Lp,st=Math.cos(ie),Ct=Math.cos(se),$t=Math.cos(ct),jo=Math.sin(ct);return new k(Se,V*$t,Y*Ct,0,V*jo,Y*(st-Ct*$t)/jo,0,0,Y*Math.sqrt(1-ae(st)-ae(Ct)-ae($t)+2*st*Ct*$t)/jo)}},546:(t,e,r)=>{r.r(e),r.d(e,{CustomLinear:()=>v,Gradient:()=>T,GradientType:()=>a,ROYGB:()=>c,RWB:()=>u,Sinebow:()=>h,builtinGradients:()=>g,getGradient:()=>l,normalizeValue:()=>o});var n=r(222);class a{}function o(R,W,k){return W>=R?(k<R&&(k=R),k>W&&(k=W),{lo:R,hi:W,val:k}):(k>R&&(k=R),k<W&&(k=W),{lo:W,hi:R,val:k=R-k+W})}function l(R){if(R instanceof a)return R;if(R.gradient!==void 0&&g[R.gradient]){let W=R.min===void 0?-1:R.min,k=R.max===void 0?1:R.max;return R.mid===void 0?R.colors===void 0?new g[R.gradient](W,k):new g[R.gradient](W,k,R.colors):new g[R.gradient](W,k,R.mid)}if(typeof R.gradient=="string"&&R.gradient.startsWith("linear_")){let W=R.gradient.split("_");W.shift();let k=R.min===void 0?-1:R.min,J=R.max===void 0?1:R.max;return new v(k,J,W)}return R}class u extends a{constructor(W,k,J){super(),this.gradient="RWB",this.mult=1,this.mid=J,this.min=W,this.max=k,k===void 0&&Array.isArray(W)&&W.length>=2?(this.max=W[1],this.min=W[0]):W&&k&&!Array.isArray(W)&&(this.min=W,this.max=k)}range(){return this.min!==void 0&&this.max!==void 0?[this.min,this.max]:null}valueToHex(W,k){var J,q;if(W=this.mult*W,k?(J=k[0],q=k[1]):(J=this.min,q=this.max),W===void 0)return 16777215;var Se=o(J,q,W);J=Se.lo;var V,Y=((q=Se.hi)+J)/2;return(W=Se.val)<(Y=k&&k[2]!==void 0?k[2]:this.mid!==void 0?this.mid:(J+q)/2)?16711680+256*(V=Math.floor(255*Math.sqrt((W-J)/(Y-J))))+V:W>Y?65536*(V=Math.floor(255*Math.sqrt(1-(W-Y)/(q-Y))))+256*V+255:16777215}}class c extends a{constructor(W,k){super(),this.gradient="ROYGB",this.mult=1,this.min=W,this.max=k,k===void 0&&Array.isArray(W)&&W.length>=2?(this.max=W[1],this.min=W[0]):W&&k&&!Array.isArray(W)&&(this.min=W,this.max=k)}valueToHex(W,k){var J,q;if(W=this.mult*W,k?(J=k[0],q=k[1]):(J=this.min,q=this.max),W===void 0)return 16777215;var Se=o(J,q,W),V=((J=Se.lo)+(q=Se.hi))/2,Y=(J+V)/2,ie=(V+q)/2;return(W=Se.val)<Y?16711680+256*Math.floor(255*Math.sqrt((W-J)/(Y-J)))+0:W<V?65536*Math.floor(255*Math.sqrt(1-(W-Y)/(V-Y)))+65280+0:W<ie?65280+1*Math.floor(255*Math.sqrt((W-V)/(ie-V))):0+256*Math.floor(255*Math.sqrt(1-(W-ie)/(q-ie)))+255}range(){return this.min!==void 0&&this.max!==void 0?[this.min,this.max]:null}}class h extends a{constructor(W,k){super(),this.gradient="Sinebow",this.mult=1,this.min=W,this.max=k,k===void 0&&Array.isArray(W)&&W.length>=2&&(this.max=W[1],this.min=W[0]),k<W&&(this.mult=-1,this.min*=-1,this.max*=-1)}valueToHex(W,k){var J,q;if(W=this.mult*W,k?(J=k[0],q=k[1]):(J=this.min,q=this.max),W===void 0)return 16777215;var Se=T.normalizeValue(J,q,W);J=Se.lo,q=Se.hi;var V=((W=Se.val)-J)/(q-J)*5/6+.5,Y=Math.sin(Math.PI*V);Y*=255*Y;var ie=Math.sin(Math.PI*(V+1/3));ie*=255*ie;var se=Math.sin(Math.PI*(V+2/3));return se*=255*se,65536*Math.floor(Y)+256*Math.floor(se)+1*Math.floor(ie)}range(){return this.min!==void 0&&this.max!==void 0?[this.min,this.max]:null}}class v extends a{constructor(W,k,J){var q;if(super(),this.gradient="linear",this.colors=new Array,Array.isArray(W)&&W.length>=2?(this.max=W[1],this.min=W[0],q=k):(this.min=W,this.max=k,q=J),q)for(let Se of q)this.colors.push(n.CC.color(Se));else this.colors.push(n.CC.color(0))}range(){return this.min!==void 0&&this.max!==void 0?[this.min,this.max]:null}valueToHex(W,k){var J,q;if(k?(J=k[0],q=k[1]):(J=this.min,q=this.max),W===void 0)return 16777215;var Se=o(J,q,W);J=Se.lo,q=Se.hi,W=Se.val;let V=this.colors.length,Y=(q-J)/V,ie=Math.min(Math.floor((W-J)/Y),V-1),se=Math.min(ie+1,V-1),ct=(W-J-ie*Y)/Y,ae=this.colors[ie],st=this.colors[se];return new n.Color(ae.r+ct*(st.r-ae.r),ae.g+ct*(st.g-ae.g),ae.b+ct*(st.b-ae.b)).getHex()}}const g={rwb:u,RWB:u,roygb:c,ROYGB:c,sinebow:h,linear:v};class T extends a{valueToHex(W,k){return 0}range(){return null}}T.RWB=u,T.ROYGB=c,T.Sinebow=h,T.CustomLinear=v,T.builtinGradients=g,T.normalizeValue=o,T.getGradient=l},663:(t,e,r)=>{var n=r(981),a=r(701),o=r(407),l=r(165),u=r(358),c=-2,h=12,v=30;function g(se){return(se>>>24&255)+(se>>>8&65280)+((65280&se)<<8)+((255&se)<<24)}function T(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function R(se){var ct;return se&&se.state?(ct=se.state,se.total_in=se.total_out=ct.total=0,se.msg="",ct.wrap&&(se.adler=1&ct.wrap),ct.mode=1,ct.last=0,ct.havedict=0,ct.dmax=32768,ct.head=null,ct.hold=0,ct.bits=0,ct.lencode=ct.lendyn=new n.Buf32(852),ct.distcode=ct.distdyn=new n.Buf32(592),ct.sane=1,ct.back=-1,0):c}function W(se){var ct;return se&&se.state?((ct=se.state).wsize=0,ct.whave=0,ct.wnext=0,R(se)):c}function k(se,ct){var ae,st;return se&&se.state?(st=se.state,ct<0?(ae=0,ct=-ct):(ae=1+(ct>>4),ct<48&&(ct&=15)),ct&&(ct<8||ct>15)?c:(st.window!==null&&st.wbits!==ct&&(st.window=null),st.wrap=ae,st.wbits=ct,W(se))):c}function J(se,ct){var ae,st;return se?(st=new T,se.state=st,st.window=null,(ae=k(se,ct))!==0&&(se.state=null),ae):c}var q,Se,V=!0;function Y(se){if(V){var ct;for(q=new n.Buf32(512),Se=new n.Buf32(32),ct=0;ct<144;)se.lens[ct++]=8;for(;ct<256;)se.lens[ct++]=9;for(;ct<280;)se.lens[ct++]=7;for(;ct<288;)se.lens[ct++]=8;for(u(1,se.lens,0,288,q,0,se.work,{bits:9}),ct=0;ct<32;)se.lens[ct++]=5;u(2,se.lens,0,32,Se,0,se.work,{bits:5}),V=!1}se.lencode=q,se.lenbits=9,se.distcode=Se,se.distbits=5}function ie(se,ct,ae,st){var Ct,$t=se.state;return $t.window===null&&($t.wsize=1<<$t.wbits,$t.wnext=0,$t.whave=0,$t.window=new n.Buf8($t.wsize)),st>=$t.wsize?(n.arraySet($t.window,ct,ae-$t.wsize,$t.wsize,0),$t.wnext=0,$t.whave=$t.wsize):((Ct=$t.wsize-$t.wnext)>st&&(Ct=st),n.arraySet($t.window,ct,ae-st,Ct,$t.wnext),(st-=Ct)?(n.arraySet($t.window,ct,ae-st,st,0),$t.wnext=st,$t.whave=$t.wsize):($t.wnext+=Ct,$t.wnext===$t.wsize&&($t.wnext=0),$t.whave<$t.wsize&&($t.whave+=Ct))),0}e.inflateReset=W,e.inflateReset2=k,e.inflateResetKeep=R,e.inflateInit=function(se){return J(se,15)},e.inflateInit2=J,e.inflate=function(se,ct){var ae,st,Ct,$t,jo,Lp,Mn,sa,re,$o,qo,Kt,i0,Up,l0,y0,kp,u0,f0,v0,p0,rm,am,ym,Wm=0,h0=new n.Buf8(4),f1=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!se||!se.state||!se.output||!se.input&&se.avail_in!==0)return c;(ae=se.state).mode===h&&(ae.mode=13),jo=se.next_out,Ct=se.output,Mn=se.avail_out,$t=se.next_in,st=se.input,Lp=se.avail_in,sa=ae.hold,re=ae.bits,$o=Lp,qo=Mn,rm=0;e:for(;;)switch(ae.mode){case 1:if(ae.wrap===0){ae.mode=13;break}for(;re<16;){if(Lp===0)break e;Lp--,sa+=st[$t++]<<re,re+=8}if(2&ae.wrap&&sa===35615){ae.check=0,h0[0]=255&sa,h0[1]=sa>>>8&255,ae.check=o(ae.check,h0,2,0),sa=0,re=0,ae.mode=2;break}if(ae.flags=0,ae.head&&(ae.head.done=!1),!(1&ae.wrap)||(((255&sa)<<8)+(sa>>8))%31){se.msg="incorrect header check",ae.mode=v;break}if((15&sa)!=8){se.msg="unknown compression method",ae.mode=v;break}if(re-=4,p0=8+(15&(sa>>>=4)),ae.wbits===0)ae.wbits=p0;else if(p0>ae.wbits){se.msg="invalid window size",ae.mode=v;break}ae.dmax=1<<p0,se.adler=ae.check=1,ae.mode=512&sa?10:h,sa=0,re=0;break;case 2:for(;re<16;){if(Lp===0)break e;Lp--,sa+=st[$t++]<<re,re+=8}if(ae.flags=sa,(255&ae.flags)!=8){se.msg="unknown compression method",ae.mode=v;break}if(57344&ae.flags){se.msg="unknown header flags set",ae.mode=v;break}ae.head&&(ae.head.text=sa>>8&1),512&ae.flags&&(h0[0]=255&sa,h0[1]=sa>>>8&255,ae.check=o(ae.check,h0,2,0)),sa=0,re=0,ae.mode=3;case 3:for(;re<32;){if(Lp===0)break e;Lp--,sa+=st[$t++]<<re,re+=8}ae.head&&(ae.head.time=sa),512&ae.flags&&(h0[0]=255&sa,h0[1]=sa>>>8&255,h0[2]=sa>>>16&255,h0[3]=sa>>>24&255,ae.check=o(ae.check,h0,4,0)),sa=0,re=0,ae.mode=4;case 4:for(;re<16;){if(Lp===0)break e;Lp--,sa+=st[$t++]<<re,re+=8}ae.head&&(ae.head.xflags=255&sa,ae.head.os=sa>>8),512&ae.flags&&(h0[0]=255&sa,h0[1]=sa>>>8&255,ae.check=o(ae.check,h0,2,0)),sa=0,re=0,ae.mode=5;case 5:if(1024&ae.flags){for(;re<16;){if(Lp===0)break e;Lp--,sa+=st[$t++]<<re,re+=8}ae.length=sa,ae.head&&(ae.head.extra_len=sa),512&ae.flags&&(h0[0]=255&sa,h0[1]=sa>>>8&255,ae.check=o(ae.check,h0,2,0)),sa=0,re=0}else ae.head&&(ae.head.extra=null);ae.mode=6;case 6:if(1024&ae.flags&&((Kt=ae.length)>Lp&&(Kt=Lp),Kt&&(ae.head&&(p0=ae.head.extra_len-ae.length,ae.head.extra||(ae.head.extra=new Array(ae.head.extra_len)),n.arraySet(ae.head.extra,st,$t,Kt,p0)),512&ae.flags&&(ae.check=o(ae.check,st,Kt,$t)),Lp-=Kt,$t+=Kt,ae.length-=Kt),ae.length))break e;ae.length=0,ae.mode=7;case 7:if(2048&ae.flags){if(Lp===0)break e;Kt=0;do p0=st[$t+Kt++],ae.head&&p0&&ae.length<65536&&(ae.head.name+=String.fromCharCode(p0));while(p0&&Kt<Lp);if(512&ae.flags&&(ae.check=o(ae.check,st,Kt,$t)),Lp-=Kt,$t+=Kt,p0)break e}else ae.head&&(ae.head.name=null);ae.length=0,ae.mode=8;case 8:if(4096&ae.flags){if(Lp===0)break e;Kt=0;do p0=st[$t+Kt++],ae.head&&p0&&ae.length<65536&&(ae.head.comment+=String.fromCharCode(p0));while(p0&&Kt<Lp);if(512&ae.flags&&(ae.check=o(ae.check,st,Kt,$t)),Lp-=Kt,$t+=Kt,p0)break e}else ae.head&&(ae.head.comment=null);ae.mode=9;case 9:if(512&ae.flags){for(;re<16;){if(Lp===0)break e;Lp--,sa+=st[$t++]<<re,re+=8}if(sa!==(65535&ae.check)){se.msg="header crc mismatch",ae.mode=v;break}sa=0,re=0}ae.head&&(ae.head.hcrc=ae.flags>>9&1,ae.head.done=!0),se.adler=ae.check=0,ae.mode=h;break;case 10:for(;re<32;){if(Lp===0)break e;Lp--,sa+=st[$t++]<<re,re+=8}se.adler=ae.check=g(sa),sa=0,re=0,ae.mode=11;case 11:if(ae.havedict===0)return se.next_out=jo,se.avail_out=Mn,se.next_in=$t,se.avail_in=Lp,ae.hold=sa,ae.bits=re,2;se.adler=ae.check=1,ae.mode=h;case h:if(ct===5||ct===6)break e;case 13:if(ae.last){sa>>>=7&re,re-=7&re,ae.mode=27;break}for(;re<3;){if(Lp===0)break e;Lp--,sa+=st[$t++]<<re,re+=8}switch(ae.last=1&sa,re-=1,3&(sa>>>=1)){case 0:ae.mode=14;break;case 1:if(Y(ae),ae.mode=20,ct===6){sa>>>=2,re-=2;break e}break;case 2:ae.mode=17;break;case 3:se.msg="invalid block type",ae.mode=v}sa>>>=2,re-=2;break;case 14:for(sa>>>=7&re,re-=7&re;re<32;){if(Lp===0)break e;Lp--,sa+=st[$t++]<<re,re+=8}if((65535&sa)!=(sa>>>16^65535)){se.msg="invalid stored block lengths",ae.mode=v;break}if(ae.length=65535&sa,sa=0,re=0,ae.mode=15,ct===6)break e;case 15:ae.mode=16;case 16:if(Kt=ae.length){if(Kt>Lp&&(Kt=Lp),Kt>Mn&&(Kt=Mn),Kt===0)break e;n.arraySet(Ct,st,$t,Kt,jo),Lp-=Kt,$t+=Kt,Mn-=Kt,jo+=Kt,ae.length-=Kt;break}ae.mode=h;break;case 17:for(;re<14;){if(Lp===0)break e;Lp--,sa+=st[$t++]<<re,re+=8}if(ae.nlen=257+(31&sa),sa>>>=5,re-=5,ae.ndist=1+(31&sa),sa>>>=5,re-=5,ae.ncode=4+(15&sa),sa>>>=4,re-=4,ae.nlen>286||ae.ndist>30){se.msg="too many length or distance symbols",ae.mode=v;break}ae.have=0,ae.mode=18;case 18:for(;ae.have<ae.ncode;){for(;re<3;){if(Lp===0)break e;Lp--,sa+=st[$t++]<<re,re+=8}ae.lens[f1[ae.have++]]=7&sa,sa>>>=3,re-=3}for(;ae.have<19;)ae.lens[f1[ae.have++]]=0;if(ae.lencode=ae.lendyn,ae.lenbits=7,am={bits:ae.lenbits},rm=u(0,ae.lens,0,19,ae.lencode,0,ae.work,am),ae.lenbits=am.bits,rm){se.msg="invalid code lengths set",ae.mode=v;break}ae.have=0,ae.mode=19;case 19:for(;ae.have<ae.nlen+ae.ndist;){for(;y0=(Wm=ae.lencode[sa&(1<<ae.lenbits)-1])>>>16&255,kp=65535&Wm,!((l0=Wm>>>24)<=re);){if(Lp===0)break e;Lp--,sa+=st[$t++]<<re,re+=8}if(kp<16)sa>>>=l0,re-=l0,ae.lens[ae.have++]=kp;else{if(kp===16){for(ym=l0+2;re<ym;){if(Lp===0)break e;Lp--,sa+=st[$t++]<<re,re+=8}if(sa>>>=l0,re-=l0,ae.have===0){se.msg="invalid bit length repeat",ae.mode=v;break}p0=ae.lens[ae.have-1],Kt=3+(3&sa),sa>>>=2,re-=2}else if(kp===17){for(ym=l0+3;re<ym;){if(Lp===0)break e;Lp--,sa+=st[$t++]<<re,re+=8}re-=l0,p0=0,Kt=3+(7&(sa>>>=l0)),sa>>>=3,re-=3}else{for(ym=l0+7;re<ym;){if(Lp===0)break e;Lp--,sa+=st[$t++]<<re,re+=8}re-=l0,p0=0,Kt=11+(127&(sa>>>=l0)),sa>>>=7,re-=7}if(ae.have+Kt>ae.nlen+ae.ndist){se.msg="invalid bit length repeat",ae.mode=v;break}for(;Kt--;)ae.lens[ae.have++]=p0}}if(ae.mode===v)break;if(ae.lens[256]===0){se.msg="invalid code -- missing end-of-block",ae.mode=v;break}if(ae.lenbits=9,am={bits:ae.lenbits},rm=u(1,ae.lens,0,ae.nlen,ae.lencode,0,ae.work,am),ae.lenbits=am.bits,rm){se.msg="invalid literal/lengths set",ae.mode=v;break}if(ae.distbits=6,ae.distcode=ae.distdyn,am={bits:ae.distbits},rm=u(2,ae.lens,ae.nlen,ae.ndist,ae.distcode,0,ae.work,am),ae.distbits=am.bits,rm){se.msg="invalid distances set",ae.mode=v;break}if(ae.mode=20,ct===6)break e;case 20:ae.mode=21;case 21:if(Lp>=6&&Mn>=258){se.next_out=jo,se.avail_out=Mn,se.next_in=$t,se.avail_in=Lp,ae.hold=sa,ae.bits=re,l(se,qo),jo=se.next_out,Ct=se.output,Mn=se.avail_out,$t=se.next_in,st=se.input,Lp=se.avail_in,sa=ae.hold,re=ae.bits,ae.mode===h&&(ae.back=-1);break}for(ae.back=0;y0=(Wm=ae.lencode[sa&(1<<ae.lenbits)-1])>>>16&255,kp=65535&Wm,!((l0=Wm>>>24)<=re);){if(Lp===0)break e;Lp--,sa+=st[$t++]<<re,re+=8}if(y0&&!(240&y0)){for(u0=l0,f0=y0,v0=kp;y0=(Wm=ae.lencode[v0+((sa&(1<<u0+f0)-1)>>u0)])>>>16&255,kp=65535&Wm,!(u0+(l0=Wm>>>24)<=re);){if(Lp===0)break e;Lp--,sa+=st[$t++]<<re,re+=8}sa>>>=u0,re-=u0,ae.back+=u0}if(sa>>>=l0,re-=l0,ae.back+=l0,ae.length=kp,y0===0){ae.mode=26;break}if(32&y0){ae.back=-1,ae.mode=h;break}if(64&y0){se.msg="invalid literal/length code",ae.mode=v;break}ae.extra=15&y0,ae.mode=22;case 22:if(ae.extra){for(ym=ae.extra;re<ym;){if(Lp===0)break e;Lp--,sa+=st[$t++]<<re,re+=8}ae.length+=sa&(1<<ae.extra)-1,sa>>>=ae.extra,re-=ae.extra,ae.back+=ae.extra}ae.was=ae.length,ae.mode=23;case 23:for(;y0=(Wm=ae.distcode[sa&(1<<ae.distbits)-1])>>>16&255,kp=65535&Wm,!((l0=Wm>>>24)<=re);){if(Lp===0)break e;Lp--,sa+=st[$t++]<<re,re+=8}if(!(240&y0)){for(u0=l0,f0=y0,v0=kp;y0=(Wm=ae.distcode[v0+((sa&(1<<u0+f0)-1)>>u0)])>>>16&255,kp=65535&Wm,!(u0+(l0=Wm>>>24)<=re);){if(Lp===0)break e;Lp--,sa+=st[$t++]<<re,re+=8}sa>>>=u0,re-=u0,ae.back+=u0}if(sa>>>=l0,re-=l0,ae.back+=l0,64&y0){se.msg="invalid distance code",ae.mode=v;break}ae.offset=kp,ae.extra=15&y0,ae.mode=24;case 24:if(ae.extra){for(ym=ae.extra;re<ym;){if(Lp===0)break e;Lp--,sa+=st[$t++]<<re,re+=8}ae.offset+=sa&(1<<ae.extra)-1,sa>>>=ae.extra,re-=ae.extra,ae.back+=ae.extra}if(ae.offset>ae.dmax){se.msg="invalid distance too far back",ae.mode=v;break}ae.mode=25;case 25:if(Mn===0)break e;if(Kt=qo-Mn,ae.offset>Kt){if((Kt=ae.offset-Kt)>ae.whave&&ae.sane){se.msg="invalid distance too far back",ae.mode=v;break}Kt>ae.wnext?(Kt-=ae.wnext,i0=ae.wsize-Kt):i0=ae.wnext-Kt,Kt>ae.length&&(Kt=ae.length),Up=ae.window}else Up=Ct,i0=jo-ae.offset,Kt=ae.length;Kt>Mn&&(Kt=Mn),Mn-=Kt,ae.length-=Kt;do Ct[jo++]=Up[i0++];while(--Kt);ae.length===0&&(ae.mode=21);break;case 26:if(Mn===0)break e;Ct[jo++]=ae.length,Mn--,ae.mode=21;break;case 27:if(ae.wrap){for(;re<32;){if(Lp===0)break e;Lp--,sa|=st[$t++]<<re,re+=8}if(qo-=Mn,se.total_out+=qo,ae.total+=qo,qo&&(se.adler=ae.check=ae.flags?o(ae.check,Ct,qo,jo-qo):a(ae.check,Ct,qo,jo-qo)),qo=Mn,(ae.flags?sa:g(sa))!==ae.check){se.msg="incorrect data check",ae.mode=v;break}sa=0,re=0}ae.mode=28;case 28:if(ae.wrap&&ae.flags){for(;re<32;){if(Lp===0)break e;Lp--,sa+=st[$t++]<<re,re+=8}if(sa!==(4294967295&ae.total)){se.msg="incorrect length check",ae.mode=v;break}sa=0,re=0}ae.mode=29;case 29:rm=1;break e;case v:rm=-3;break e;case 31:return-4;default:return c}return se.next_out=jo,se.avail_out=Mn,se.next_in=$t,se.avail_in=Lp,ae.hold=sa,ae.bits=re,(ae.wsize||qo!==se.avail_out&&ae.mode<v&&(ae.mode<27||ct!==4))&&ie(se,se.output,se.next_out,qo-se.avail_out)?(ae.mode=31,-4):($o-=se.avail_in,qo-=se.avail_out,se.total_in+=$o,se.total_out+=qo,ae.total+=qo,ae.wrap&&qo&&(se.adler=ae.check=ae.flags?o(ae.check,Ct,qo,se.next_out-qo):a(ae.check,Ct,qo,se.next_out-qo)),se.data_type=ae.bits+(ae.last?64:0)+(ae.mode===h?128:0)+(ae.mode===20||ae.mode===15?256:0),($o===0&&qo===0||ct===4)&&rm===0&&(rm=-5),rm)},e.inflateEnd=function(se){if(!se||!se.state)return c;var ct=se.state;return ct.window&&(ct.window=null),se.state=null,0},e.inflateGetHeader=function(se,ct){var ae;return se&&se.state&&2&(ae=se.state).wrap?(ae.head=ct,ct.done=!1,0):c},e.inflateSetDictionary=function(se,ct){var ae,st=ct.length;return se&&se.state?(ae=se.state).wrap!==0&&ae.mode!==11?c:ae.mode===11&&a(1,ct,st,0)!==ae.check?-3:ie(se,ct,st,st)?(ae.mode=31,-4):(ae.havedict=1,0):c},e.inflateInfo="pako inflate (from Nodeca project)"},670:t=>{t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},681:t=>{t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},697:(t,e,r)=>{var n=r(981);function a(kp){for(var u0=kp.length;--u0>=0;)kp[u0]=0}var o=256,l=286,u=30,c=15,h=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],v=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],g=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],T=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],R=new Array(576);a(R);var W=new Array(60);a(W);var k=new Array(512);a(k);var J=new Array(256);a(J);var q=new Array(29);a(q);var Se,V,Y,ie=new Array(u);function se(kp,u0,f0,v0,p0){this.static_tree=kp,this.extra_bits=u0,this.extra_base=f0,this.elems=v0,this.max_length=p0,this.has_stree=kp&&kp.length}function ct(kp,u0){this.dyn_tree=kp,this.max_code=0,this.stat_desc=u0}function ae(kp){return kp<256?k[kp]:k[256+(kp>>>7)]}function st(kp,u0){kp.pending_buf[kp.pending++]=255&u0,kp.pending_buf[kp.pending++]=u0>>>8&255}function Ct(kp,u0,f0){kp.bi_valid>16-f0?(kp.bi_buf|=u0<<kp.bi_valid&65535,st(kp,kp.bi_buf),kp.bi_buf=u0>>16-kp.bi_valid,kp.bi_valid+=f0-16):(kp.bi_buf|=u0<<kp.bi_valid&65535,kp.bi_valid+=f0)}function $t(kp,u0,f0){Ct(kp,f0[2*u0],f0[2*u0+1])}function jo(kp,u0){var f0=0;do f0|=1&kp,kp>>>=1,f0<<=1;while(--u0>0);return f0>>>1}function Lp(kp,u0,f0){var v0,p0,rm=new Array(16),am=0;for(v0=1;v0<=c;v0++)rm[v0]=am=am+f0[v0-1]<<1;for(p0=0;p0<=u0;p0++){var ym=kp[2*p0+1];ym!==0&&(kp[2*p0]=jo(rm[ym]++,ym))}}function Mn(kp){var u0;for(u0=0;u0<l;u0++)kp.dyn_ltree[2*u0]=0;for(u0=0;u0<u;u0++)kp.dyn_dtree[2*u0]=0;for(u0=0;u0<19;u0++)kp.bl_tree[2*u0]=0;kp.dyn_ltree[512]=1,kp.opt_len=kp.static_len=0,kp.last_lit=kp.matches=0}function sa(kp){kp.bi_valid>8?st(kp,kp.bi_buf):kp.bi_valid>0&&(kp.pending_buf[kp.pending++]=kp.bi_buf),kp.bi_buf=0,kp.bi_valid=0}function re(kp,u0,f0,v0){var p0=2*u0,rm=2*f0;return kp[p0]<kp[rm]||kp[p0]===kp[rm]&&v0[u0]<=v0[f0]}function $o(kp,u0,f0){for(var v0=kp.heap[f0],p0=f0<<1;p0<=kp.heap_len&&(p0<kp.heap_len&&re(u0,kp.heap[p0+1],kp.heap[p0],kp.depth)&&p0++,!re(u0,v0,kp.heap[p0],kp.depth));)kp.heap[f0]=kp.heap[p0],f0=p0,p0<<=1;kp.heap[f0]=v0}function qo(kp,u0,f0){var v0,p0,rm,am,ym=0;if(kp.last_lit!==0)do v0=kp.pending_buf[kp.d_buf+2*ym]<<8|kp.pending_buf[kp.d_buf+2*ym+1],p0=kp.pending_buf[kp.l_buf+ym],ym++,v0===0?$t(kp,p0,u0):($t(kp,(rm=J[p0])+o+1,u0),(am=h[rm])!==0&&Ct(kp,p0-=q[rm],am),$t(kp,rm=ae(--v0),f0),(am=v[rm])!==0&&Ct(kp,v0-=ie[rm],am));while(ym<kp.last_lit);$t(kp,256,u0)}function Kt(kp,u0){var f0,v0,p0,rm=u0.dyn_tree,am=u0.stat_desc.static_tree,ym=u0.stat_desc.has_stree,Wm=u0.stat_desc.elems,h0=-1;for(kp.heap_len=0,kp.heap_max=573,f0=0;f0<Wm;f0++)rm[2*f0]!==0?(kp.heap[++kp.heap_len]=h0=f0,kp.depth[f0]=0):rm[2*f0+1]=0;for(;kp.heap_len<2;)rm[2*(p0=kp.heap[++kp.heap_len]=h0<2?++h0:0)]=1,kp.depth[p0]=0,kp.opt_len--,ym&&(kp.static_len-=am[2*p0+1]);for(u0.max_code=h0,f0=kp.heap_len>>1;f0>=1;f0--)$o(kp,rm,f0);p0=Wm;do f0=kp.heap[1],kp.heap[1]=kp.heap[kp.heap_len--],$o(kp,rm,1),v0=kp.heap[1],kp.heap[--kp.heap_max]=f0,kp.heap[--kp.heap_max]=v0,rm[2*p0]=rm[2*f0]+rm[2*v0],kp.depth[p0]=(kp.depth[f0]>=kp.depth[v0]?kp.depth[f0]:kp.depth[v0])+1,rm[2*f0+1]=rm[2*v0+1]=p0,kp.heap[1]=p0++,$o(kp,rm,1);while(kp.heap_len>=2);kp.heap[--kp.heap_max]=kp.heap[1],(function(f1,T1){var I1,p1,Qm,m1,W1,ug,ng=T1.dyn_tree,Ko=T1.max_code,wi=T1.stat_desc.static_tree,S0=T1.stat_desc.has_stree,Z0=T1.stat_desc.extra_bits,Pp=T1.stat_desc.extra_base,Ip=T1.stat_desc.max_length,x0=0;for(m1=0;m1<=c;m1++)f1.bl_count[m1]=0;for(ng[2*f1.heap[f1.heap_max]+1]=0,I1=f1.heap_max+1;I1<573;I1++)(m1=ng[2*ng[2*(p1=f1.heap[I1])+1]+1]+1)>Ip&&(m1=Ip,x0++),ng[2*p1+1]=m1,p1>Ko||(f1.bl_count[m1]++,W1=0,p1>=Pp&&(W1=Z0[p1-Pp]),ug=ng[2*p1],f1.opt_len+=ug*(m1+W1),S0&&(f1.static_len+=ug*(wi[2*p1+1]+W1)));if(x0!==0){do{for(m1=Ip-1;f1.bl_count[m1]===0;)m1--;f1.bl_count[m1]--,f1.bl_count[m1+1]+=2,f1.bl_count[Ip]--,x0-=2}while(x0>0);for(m1=Ip;m1!==0;m1--)for(p1=f1.bl_count[m1];p1!==0;)(Qm=f1.heap[--I1])>Ko||(ng[2*Qm+1]!==m1&&(f1.opt_len+=(m1-ng[2*Qm+1])*ng[2*Qm],ng[2*Qm+1]=m1),p1--)}})(kp,u0),Lp(rm,h0,kp.bl_count)}function i0(kp,u0,f0){var v0,p0,rm=-1,am=u0[1],ym=0,Wm=7,h0=4;for(am===0&&(Wm=138,h0=3),u0[2*(f0+1)+1]=65535,v0=0;v0<=f0;v0++)p0=am,am=u0[2*(v0+1)+1],++ym<Wm&&p0===am||(ym<h0?kp.bl_tree[2*p0]+=ym:p0!==0?(p0!==rm&&kp.bl_tree[2*p0]++,kp.bl_tree[32]++):ym<=10?kp.bl_tree[34]++:kp.bl_tree[36]++,ym=0,rm=p0,am===0?(Wm=138,h0=3):p0===am?(Wm=6,h0=3):(Wm=7,h0=4))}function Up(kp,u0,f0){var v0,p0,rm=-1,am=u0[1],ym=0,Wm=7,h0=4;for(am===0&&(Wm=138,h0=3),v0=0;v0<=f0;v0++)if(p0=am,am=u0[2*(v0+1)+1],!(++ym<Wm&&p0===am)){if(ym<h0)do $t(kp,p0,kp.bl_tree);while(--ym!==0);else p0!==0?(p0!==rm&&($t(kp,p0,kp.bl_tree),ym--),$t(kp,16,kp.bl_tree),Ct(kp,ym-3,2)):ym<=10?($t(kp,17,kp.bl_tree),Ct(kp,ym-3,3)):($t(kp,18,kp.bl_tree),Ct(kp,ym-11,7));ym=0,rm=p0,am===0?(Wm=138,h0=3):p0===am?(Wm=6,h0=3):(Wm=7,h0=4)}}a(ie);var l0=!1;function y0(kp,u0,f0,v0){Ct(kp,0+(v0?1:0),3),(function(p0,rm,am,ym){sa(p0),st(p0,am),st(p0,~am),n.arraySet(p0.pending_buf,p0.window,rm,am,p0.pending),p0.pending+=am})(kp,u0,f0)}e._tr_init=function(kp){l0||((function(){var u0,f0,v0,p0,rm,am=new Array(16);for(v0=0,p0=0;p0<28;p0++)for(q[p0]=v0,u0=0;u0<1<<h[p0];u0++)J[v0++]=p0;for(J[v0-1]=p0,rm=0,p0=0;p0<16;p0++)for(ie[p0]=rm,u0=0;u0<1<<v[p0];u0++)k[rm++]=p0;for(rm>>=7;p0<u;p0++)for(ie[p0]=rm<<7,u0=0;u0<1<<v[p0]-7;u0++)k[256+rm++]=p0;for(f0=0;f0<=c;f0++)am[f0]=0;for(u0=0;u0<=143;)R[2*u0+1]=8,u0++,am[8]++;for(;u0<=255;)R[2*u0+1]=9,u0++,am[9]++;for(;u0<=279;)R[2*u0+1]=7,u0++,am[7]++;for(;u0<=287;)R[2*u0+1]=8,u0++,am[8]++;for(Lp(R,287,am),u0=0;u0<u;u0++)W[2*u0+1]=5,W[2*u0]=jo(u0,5);Se=new se(R,h,257,l,c),V=new se(W,v,0,u,c),Y=new se(new Array(0),g,0,19,7)})(),l0=!0),kp.l_desc=new ct(kp.dyn_ltree,Se),kp.d_desc=new ct(kp.dyn_dtree,V),kp.bl_desc=new ct(kp.bl_tree,Y),kp.bi_buf=0,kp.bi_valid=0,Mn(kp)},e._tr_stored_block=y0,e._tr_flush_block=function(kp,u0,f0,v0){var p0,rm,am=0;kp.level>0?(kp.strm.data_type===2&&(kp.strm.data_type=(function(ym){var Wm,h0=4093624447;for(Wm=0;Wm<=31;Wm++,h0>>>=1)if(1&h0&&ym.dyn_ltree[2*Wm]!==0)return 0;if(ym.dyn_ltree[18]!==0||ym.dyn_ltree[20]!==0||ym.dyn_ltree[26]!==0)return 1;for(Wm=32;Wm<o;Wm++)if(ym.dyn_ltree[2*Wm]!==0)return 1;return 0})(kp)),Kt(kp,kp.l_desc),Kt(kp,kp.d_desc),am=(function(ym){var Wm;for(i0(ym,ym.dyn_ltree,ym.l_desc.max_code),i0(ym,ym.dyn_dtree,ym.d_desc.max_code),Kt(ym,ym.bl_desc),Wm=18;Wm>=3&&ym.bl_tree[2*T[Wm]+1]===0;Wm--);return ym.opt_len+=3*(Wm+1)+5+5+4,Wm})(kp),p0=kp.opt_len+3+7>>>3,(rm=kp.static_len+3+7>>>3)<=p0&&(p0=rm)):p0=rm=f0+5,f0+4<=p0&&u0!==-1?y0(kp,u0,f0,v0):kp.strategy===4||rm===p0?(Ct(kp,2+(v0?1:0),3),qo(kp,R,W)):(Ct(kp,4+(v0?1:0),3),(function(ym,Wm,h0,f1){var T1;for(Ct(ym,Wm-257,5),Ct(ym,h0-1,5),Ct(ym,f1-4,4),T1=0;T1<f1;T1++)Ct(ym,ym.bl_tree[2*T[T1]+1],3);Up(ym,ym.dyn_ltree,Wm-1),Up(ym,ym.dyn_dtree,h0-1)})(kp,kp.l_desc.max_code+1,kp.d_desc.max_code+1,am+1),qo(kp,kp.dyn_ltree,kp.dyn_dtree)),Mn(kp),v0&&sa(kp)},e._tr_tally=function(kp,u0,f0){return kp.pending_buf[kp.d_buf+2*kp.last_lit]=u0>>>8&255,kp.pending_buf[kp.d_buf+2*kp.last_lit+1]=255&u0,kp.pending_buf[kp.l_buf+kp.last_lit]=255&f0,kp.last_lit++,u0===0?kp.dyn_ltree[2*f0]++:(kp.matches++,u0--,kp.dyn_ltree[2*(J[f0]+o+1)]++,kp.dyn_dtree[2*ae(u0)]++),kp.last_lit===kp.lit_bufsize-1},e._tr_align=function(kp){Ct(kp,2,3),$t(kp,256,R),(function(u0){u0.bi_valid===16?(st(u0,u0.bi_buf),u0.bi_buf=0,u0.bi_valid=0):u0.bi_valid>=8&&(u0.pending_buf[u0.pending++]=255&u0.bi_buf,u0.bi_buf>>=8,u0.bi_valid-=8)})(kp)}},701:t=>{t.exports=function(e,r,n,a){for(var o=65535&e,l=e>>>16&65535,u=0;n!==0;){n-=u=n>2e3?2e3:n;do l=l+(o=o+r[a++]|0)|0;while(--u);o%=65521,l%=65521}return o|l<<16}},746:t=>{t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},788:(t,e,r)=>{var n={};(0,r(981).assign)(n,r(71),r(3),r(681)),t.exports=n},797:(t,e,r)=>{r.r(e),r.d(e,{VASP:()=>o});var n=r(378),a=r(392);function o(l,u={}){var c=[[]],h={};const v=u.assignBonds===void 0||u.assignBonds;var g=l.replace(/^\s+/,"").split(/\r?\n/);if(g.length<3)return c;if(!g[1].match(/\d+/))return console.log("Warning: second line of the vasp structure file must be a number"),c;if(h.length=parseFloat(g[1]),h.length<0)return console.log("Warning: Vasp implementation for negative lattice lengths is not yet available"),c;h.xVec=new Float32Array(g[2].replace(/^\s+/,"").split(/\s+/)),h.yVec=new Float32Array(g[3].replace(/^\s+/,"").split(/\s+/)),h.zVec=new Float32Array(g[4].replace(/^\s+/,"").split(/\s+/));var T=new n.Matrix3(h.xVec[0],h.xVec[1],h.xVec[2],h.yVec[0],h.yVec[1],h.yVec[2],h.zVec[0],h.zVec[1],h.zVec[2]);T.multiplyScalar(h.length),c.modelData=[{symmetries:[],cryst:{matrix:T}}];var R=g[5].trim().split(/\s+/),W=new Int16Array(g[6].trim().split(/\s+/)),k=g[7].trim(),J=!1;if(k.match(/S/)&&(J=!0,k=g[8].trim()),k.toLowerCase()[0]=="c")k="cartesian";else{if(k.toLowerCase()[0]!="d")return console.log("Warning: Unknown vasp mode in POSCAR file: mode must be either C(artesian) or D(irect)"),c;k="direct"}if(R.length!=W.length)return console.log("Warning: declaration of atomary species wrong:"),console.log(R),console.log(W),c;J?g.splice(0,9):g.splice(0,8);for(var q=0,Se=0,V=R.length;Se<V;Se++){for(var Y=R[Se],ie=0,se=W[Se];ie<se;ie++){var ct=new Float32Array(g[q+ie].trim().split(/\s+/)),ae={};ae.elem=Y,k=="cartesian"?(ae.x=h.length*ct[0],ae.y=h.length*ct[1],ae.z=h.length*ct[2]):(ae.x=h.length*(ct[0]*h.xVec[0]+ct[1]*h.yVec[0]+ct[2]*h.zVec[0]),ae.y=h.length*(ct[0]*h.xVec[1]+ct[1]*h.yVec[1]+ct[2]*h.zVec[1]),ae.z=h.length*(ct[0]*h.xVec[2]+ct[1]*h.yVec[2]+ct[2]*h.zVec[2])),ae.bonds=[],ae.bondOrder=[],c[0].push(ae)}q+=W[Se]}if(v)for(let st=0;st<c.length;st++)(0,a.assignBonds)(c[st],u);return c}},834:t=>{t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},848:(t,e,r)=>{r.r(e),r.d(e,{VolumeData:()=>c});var n=r(864),a=r(529),o=r(797),l=r(865),u=r(75);class c{constructor(v,g,T){if(this.unit={x:1,y:1,z:1},this.origin={x:0,y:0,z:0},this.size={x:0,y:0,z:0},this.data=new Float32Array([]),this.matrix=null,this.inversematrix=null,this.isbinary=new Set(["ccp4","CCP4"]),this.getCoordinates=function(q){var Se=q/(this.size.y*this.size.z),V=q%(this.size.y*this.size.z),Y=q%this.size.z;return Se*=this.unit.x,V*=this.unit.y,Y*=this.unit.z,{x:Se+=this.origin.x,y:V+=this.origin.y,z:Y+=this.origin.z}},this.vasp=function(q){var Se=q.replace(/^\s+/,"").split(/[\n\r]/),V=(0,o.VASP)(q)[0].length;if(V==0)return console.warn("No good formating of CHG or CHGCAR file, not atomic information provided in the file."),void(this.data=[]);var Y,ie=1.889725992,se=parseFloat(Se[1]);Y=Se[2].replace(/^\s+/,"").split(/\s+/);var ct=new a.Vector3(parseFloat(Y[0]),parseFloat(Y[1]),parseFloat(Y[2])).multiplyScalar(se*ie);Y=Se[3].replace(/^\s+/,"").split(/\s+/);var ae=new a.Vector3(parseFloat(Y[0]),parseFloat(Y[1]),parseFloat(Y[2])).multiplyScalar(se*ie);Y=Se[4].replace(/^\s+/,"").split(/\s+/);var st=new a.Vector3(parseFloat(Y[0]),parseFloat(Y[1]),parseFloat(Y[2])).multiplyScalar(se*ie),Ct=ct.x*(ae.y*st.z-st.y*ae.z)-ae.x*(ct.y*st.z-st.y*ct.z)+st.x*(ct.y*ae.z-ae.y*ct.z),$t=1/(Ct=Math.abs(Ct)/Math.pow(ie,3));Se.splice(0,8+V+1);var jo=Se[0].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),Lp=Math.abs(parseFloat(jo[0])),Mn=Math.abs(parseFloat(jo[1])),sa=Math.abs(parseFloat(jo[2])),re=this.origin=new a.Vector3(0,0,0);this.size={x:Lp,y:Mn,z:sa},this.unit=new a.Vector3(ct.x,ae.y,st.z),ct=ct.multiplyScalar(1/(ie*Lp)),ae=ae.multiplyScalar(1/(ie*Mn)),st=st.multiplyScalar(1/(ie*sa)),ct.y==0&&ct.z==0&&ae.x==0&&ae.z==0&&st.x==0&&st.y==0||(this.matrix=new a.Matrix4(ct.x,ae.x,st.x,0,ct.y,ae.y,st.y,0,ct.z,ae.z,st.z,0,0,0,0,1),this.matrix=this.matrix.multiplyMatrices(this.matrix,new a.Matrix4().makeTranslation(re.x,re.y,re.z)),this.origin=new a.Vector3(0,0,0),this.unit=new a.Vector3(1,1,1)),Se.splice(0,1);var $o=Se.join(" "),qo=($o=$o.replace(/^\s+/,"")).split(/[\s\r]+/);qo.splice(Lp*Mn*sa+1);for(var Kt=Float32Array.from(qo,parseFloat),i0=0;i0<Kt.length;i0++)Kt[i0]=Kt[i0]*$t*.036749309;this.data=Kt},this.dx=function(q){var Se,V=q.split(/[\n\r]+/),Y=/gridpositions\s+counts\s+(\d+)\s+(\d+)\s+(\d+)/,ie=/^origin\s+(\S+)\s+(\S+)\s+(\S+)/,se=/^delta\s+(\S+)\s+(\S+)\s+(\S+)/,ct=/data follows/,ae=0;for(ae=0;ae<V.length;ae++){var st=V[ae];if(Se=Y.exec(st)){var Ct=parseInt(Se[1]),$t=parseInt(Se[2]),jo=parseInt(Se[3]);this.size={x:Ct,y:$t,z:jo}}else if(Se=se.exec(st)){var Lp=parseFloat(Se[1]);if(parseFloat(Se[2])==0&&parseFloat(Se[3])==0||console.warn("Non-orthogonal delta matrix not currently supported in dx format"),st=V[ae+=1],(Se=se.exec(st))==null)return void console.error("Parse error in dx delta matrix");var Mn=parseFloat(Se[2]);if(parseFloat(Se[1])==0&&parseFloat(Se[3])==0||console.warn("Non-orthogonal delta matrix not currently supported in dx format"),st=V[ae+=1],(Se=se.exec(st))==null)return void console.error("Parse error in dx delta matrix");var sa=parseFloat(Se[3]);parseFloat(Se[1])==0&&parseFloat(Se[2])==0||console.warn("Non-orthogonal delta matrix not currently supported in dx format"),this.unit=new a.Vector3(Lp,Mn,sa)}else if(Se=ie.exec(st)){var re=parseFloat(Se[1]),$o=parseFloat(Se[2]),qo=parseFloat(Se[3]);this.origin=new a.Vector3(re,$o,qo)}else if(Se=ct.exec(st))break}if(ae+=1,this.size&&this.origin&&this.unit&&this.size){var Kt=V.splice(ae).join(" ").split(/[\s\r]+/);this.data=Float32Array.from(Kt,parseFloat)}else console.error("Error parsing dx format")},g=g.toLowerCase(),/\.gz$/.test(g)){g=g.replace(/\.gz$/,"");try{this[g]&&this.isbinary.has(g)?(typeof v=="string"&&(v=(0,n.base64ToArray)(v)),v=(0,u.inflate)(v)):v=new TextDecoder("utf-8").decode((0,u.inflate)(v))}catch(q){console.error(q)}}if(this[g]&&(this.isbinary.has(g)&&typeof v=="string"&&(v=(0,n.base64ToArray)(v)),this[g](v)),T){if(T.negate)for(let q=0,Se=this.data.length;q<Se;q++)this.data[q]=-this.data[q];if(T.normalize){var R=0;for(let q=0,Se=this.data.length;q<Se;q++)R+=this.data[q];var W=R/this.data.length;R=0;for(let q=0,Se=this.data.length;q<Se;q++){var k=this.data[q]-W;R+=k*k}var J=R/this.data.length;for(let q=0,Se=this.data.length;q<Se;q++)this.data[q]=(this.data[q]-W)/J}}}getIndex(v,g,T){if(this.matrix){this.inversematrix==null&&(this.inversematrix=new a.Matrix4().getInverse(this.matrix));var R=new a.Vector3(v,g,T);v=(R=R.applyMatrix4(this.inversematrix)).x,g=R.y,T=R.z}else v-=this.origin.x,g-=this.origin.y,T-=this.origin.z,v/=this.unit.x,g/=this.unit.y,T/=this.unit.z;return v=Math.round(v),g=Math.round(g),T=Math.round(T),v<0||v>=this.size.x||g<0||g>=this.size.y||T<0||T>=this.size.z?-1:v*this.size.y*this.size.z+g*this.size.z+T}getVal(v,g,T){let R=this.getIndex(v,g,T);return R<0?0:this.data[R]}cube(v){var g=v.split(/\r?\n/);if(!(g.length<6)){var T=(0,l.CUBE)(v,{}).modelData[0].cryst,R=g[2].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),W=parseFloat(R[0]),k=Math.abs(W);this.origin=T.origin,this.size=T.size,this.unit=T.unit,this.matrix=T.matrix4;var J=6;W<0&&J++;var q=g.splice(k+J).join(" "),Se=(q=q.replace(/^\s+/,"")).split(/[\s\r]+/);this.data=Float32Array.from(Se,parseFloat)}}ccp4(v){var g={};v=new Int8Array(v);var T=new Int32Array(v.buffer,0,56),R=new Float32Array(v.buffer,0,56),W=new DataView(v.buffer);if(g.MAP=String.fromCharCode(W.getUint8(208),W.getUint8(209),W.getUint8(210),W.getUint8(211)),g.MACHST=[W.getUint8(212),W.getUint8(213)],g.MACHST[0]===17&&g.MACHST[1]===17)for(var k=v.byteLength,J=0;J<k;J+=4)W.setFloat32(J,W.getFloat32(J),!0);g.NX=T[0],g.NY=T[1],g.NZ=T[2],g.MODE=T[3],g.NXSTART=T[4],g.NYSTART=T[5],g.NZSTART=T[6],g.MX=T[7],g.MY=T[8],g.MZ=T[9],g.xlen=R[10],g.ylen=R[11],g.zlen=R[12],g.alpha=R[13],g.beta=R[14],g.gamma=R[15],g.MAPC=T[16],g.MAPR=T[17],g.MAPS=T[18],g.DMIN=R[19],g.DMAX=R[20],g.DMEAN=R[21],g.ISPG=T[22],g.NSYMBT=T[23],g.LSKFLG=T[24],g.originX=R[49],g.originY=R[50],g.originZ=R[51],g.ARMS=R[54];var q=g,Se=[q.xlen,0,0],V=[q.ylen*Math.cos(Math.PI/180*q.gamma),q.ylen*Math.sin(Math.PI/180*q.gamma),0],Y=[q.zlen*Math.cos(Math.PI/180*q.beta),q.zlen*(Math.cos(Math.PI/180*q.alpha)-Math.cos(Math.PI/180*q.gamma)*Math.cos(Math.PI/180*q.beta))/Math.sin(Math.PI/180*q.gamma),0];Y[2]=Math.sqrt(q.zlen*q.zlen*Math.sin(Math.PI/180*q.beta)*Math.sin(Math.PI/180*q.beta)-Y[1]*Y[1]);var ie=[0,Se,V,Y],se=[0,q.MX,q.MY,q.MZ],ct=[0,q.MAPC,q.MAPR,q.MAPS];this.matrix=new a.Matrix4,this.matrix.set(ie[ct[1]][0]/se[ct[1]],ie[ct[2]][0]/se[ct[2]],ie[ct[3]][0]/se[ct[3]],0,ie[ct[1]][1]/se[ct[1]],ie[ct[2]][1]/se[ct[2]],ie[ct[3]][1]/se[ct[3]],0,ie[ct[1]][2]/se[ct[1]],ie[ct[2]][2]/se[ct[2]],ie[ct[3]][2]/se[ct[3]],0,0,0,0,1),this.matrix=this.matrix.multiplyMatrices(this.matrix,new a.Matrix4().makeTranslation(q.NXSTART+q.originX,q.NYSTART+q.originY,q.NZSTART+q.originZ)),this.origin=new a.Vector3(0,0,0),this.unit=new a.Vector3(1,1,1),this.size={x:g.NX,y:g.NY,z:g.NZ},this.dimensionorder=[g.MAPC,g.MAPR,g.MAPS];var ae=new Float32Array(v.buffer,1024+g.NSYMBT),st=g.NX,Ct=g.NY,$t=g.NZ;this.data=new Float32Array(st*Ct*$t);for(let jo=0;jo<st;jo++)for(let Lp=0;Lp<Ct;Lp++)for(let Mn=0;Mn<$t;Mn++)this.data[(jo*Ct+Lp)*$t+Mn]=ae[(Mn*Ct+Lp)*st+jo]}}},864:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{PausableTimer:()=>PausableTimer,adjustVolumeStyle:()=>adjustVolumeStyle,base64ToArray:()=>base64ToArray,deepCopy:()=>deepCopy,download:()=>download,extend:()=>extend,get:()=>get,getAtomProperty:()=>getAtomProperty,getColorFromStyle:()=>getColorFromStyle,getElement:()=>getElement,getExtent:()=>getExtent,getPropertyRange:()=>getPropertyRange,getbin:()=>getbin,inflateString:()=>inflateString,isEmptyObject:()=>isEmptyObject,isNumeric:()=>isNumeric,makeFunction:()=>makeFunction,mergeGeos:()=>mergeGeos,specStringToObject:()=>specStringToObject});var _Gradient__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(546),_VolumeData__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(848),_colors__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(222),pako__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(75);function extend(t,e){for(var r in e)e.hasOwnProperty(r)&&e[r]!==void 0&&(t[r]=e[r]);return t}function deepCopy(t){let e,r,n;if(t==null)return{};if(typeof t!="object"||t===null)return t;for(n in e=Array.isArray(t)?[]:{},t)r=t[n],e[n]=deepCopy(r);return e}function isNumeric(t){var e=typeof t;return(e==="number"||e==="string")&&!isNaN(t-parseFloat(t))}function isEmptyObject(t){return Object.keys(t).length===0}function makeFunction(callback){return callback&&typeof callback=="string"&&(callback=eval("("+callback+")")),callback&&typeof callback!="function"?(console.warn("Invalid callback provided."),()=>{}):callback}function adjustVolumeStyle(t){t&&(!t.volformat||t.voldata instanceof _VolumeData__WEBPACK_IMPORTED_MODULE_1__.VolumeData||(t.voldata=new _VolumeData__WEBPACK_IMPORTED_MODULE_1__.VolumeData(t.voldata,t.volformat)),t.volscheme&&(t.volscheme=_Gradient__WEBPACK_IMPORTED_MODULE_0__.Gradient.getGradient(t.volscheme)))}function getExtent(t,e){var r,n,a,o,l,u,c,h,v,g,T=!e;if(r=n=a=9999,o=l=u=-9999,c=h=v=g=0,t.length===0)return[[0,0,0],[0,0,0],[0,0,0]];for(var R=0;R<t.length;R++){var W=t[R];if(W!==void 0&&isFinite(W.x)&&isFinite(W.y)&&isFinite(W.z)&&(g++,c+=W.x,h+=W.y,v+=W.z,r=r<W.x?r:W.x,n=n<W.y?n:W.y,a=a<W.z?a:W.z,o=o>W.x?o:W.x,l=l>W.y?l:W.y,u=u>W.z?u:W.z,W.symmetries&&T))for(var k=0;k<W.symmetries.length;k++)g++,c+=W.symmetries[k].x,h+=W.symmetries[k].y,v+=W.symmetries[k].z,r=r<W.symmetries[k].x?r:W.symmetries[k].x,n=n<W.symmetries[k].y?n:W.symmetries[k].y,a=a<W.symmetries[k].z?a:W.symmetries[k].z,o=o>W.symmetries[k].x?o:W.symmetries[k].x,l=l>W.symmetries[k].y?l:W.symmetries[k].y,u=u>W.symmetries[k].z?u:W.symmetries[k].z}return[[r,n,a],[o,l,u],[c/g,h/g,v/g]]}function getPropertyRange(t,e){for(var r=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY,a=0,o=t.length;a<o;a++){var l=getAtomProperty(t[a],e);l!=null&&(l<r&&(r=l),l>n&&(n=l))}return isFinite(r)||isFinite(n)?isFinite(r)?isFinite(n)||(n=r):r=n:r=n=0,[r,n]}class PausableTimer{constructor(e,r,n){this.total_time_run=0,this.fn=e,this.arg=n,this.countdown=r,this.start_time=new Date().getTime(),this.ident=setTimeout(e,r,n)}cancel(){clearTimeout(this.ident)}pause(){clearTimeout(this.ident),this.total_time_run=new Date().getTime()-this.start_time}resume(){this.ident=setTimeout(this.fn,Math.max(0,this.countdown-this.total_time_run),this.arg)}}function base64ToArray(t){for(var e=window.atob(t),r=e.length,n=new Uint8Array(r),a=0;a<r;a++)n[a]=e.charCodeAt(a);return n}function getAtomProperty(t,e){var r=null;return t.properties&&t.properties[e]!==void 0?r=t.properties[e]:t[e]!==void 0&&(r=t[e]),r}function mergeGeos(t,e){var r=e.geometry;r!==void 0&&t.geometryGroups.push(r.geometryGroups[0])}function specStringToObject(t){if(typeof t=="object"||t===void 0||t==null)return t;try{return JSON.parse(t)}catch{}var e=function(T){return isNumeric(T)?Math.floor(parseFloat(T))==parseInt(T)||T.indexOf(".")>=0?parseFloat(T):parseInt(T):T==="true"||T!=="false"&&T},r={};if((t=t.replace(/%7E/g,"~"))==="all")return r;for(var n=t.split(";"),a=0;a<n.length;a++){var o=n[a].split(":"),l=o[0],u={},c=o[1];if(c)if((c=c.replace(/~/g,"=")).indexOf("=")!==-1)for(var h=c.split(","),v=0;v<h.length;v++){var g=h[v].split("=",2);u[g[0]]=e(g[1])}else u=c.indexOf(",")!==-1?c.split(","):e(c);r[l]=u}return r}function checkStatus(t){if(!t.ok)throw new Error(`HTTP ${t.status} - ${t.statusText}`);return t}function get(t,e){var r=fetch(t).then(checkStatus).then(n=>n.text());return e?r.then(e):r}function getbin(t,e,r,n){var a;return a=r=="POST"?fetch(t,{method:"POST",body:n}).then(o=>checkStatus(o)).then(o=>o.arrayBuffer()):fetch(t).then(o=>checkStatus(o)).then(o=>o.arrayBuffer()),e?a.then(e):a}function download(t,e,r,n){var a="",o="",l="",u=null,c=e.addModel();if(t.indexOf(":")<0&&(t=t.length==4?"pdb:"+t:isNaN(t)?"url:"+t:"cid:"+t),t.substring(0,5)=="mmtf:"&&(console.warn("WARNING: MMTF now deprecated.  Reverting to bcif."),t="bcif:"+t.slice(5)),t.substring(0,5)==="bcif:")t=t.substring(5).toUpperCase(),l="https://models.rcsb.org/"+t+".bcif.gz",r&&r.noComputeSecondaryStructure===void 0&&(r.noComputeSecondaryStructure=!0),u=new Promise(function(v){getbin(l).then(function(g){c.addMolData(g,"bcif.gz",r),e.zoomTo(),e.render(),v(c)},function(){console.error("fetch of "+l+" failed.")})});else{if(t.substring(0,4)==="pdb:"){if(a="bcif",r&&r.format&&(a=r.format),r&&r.noComputeSecondaryStructure===void 0&&(r.noComputeSecondaryStructure=!0),!(t=t.substring(4).toUpperCase()).match(/^[1-9][A-Za-z0-9]{3}$/))return void alert("Wrong PDB ID");a=="bcif"?l="https://models.rcsb.org/"+t.toUpperCase()+".bcif.gz":(o=r&&r.pdbUri?r.pdbUri:"https://files.rcsb.org/view/",l=o+t+"."+a)}else if(t.substring(0,4)=="cid:"){if(a="sdf",!(t=t.substring(4)).match(/^[0-9]+$/))return void alert("Wrong Compound ID");l="https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/"+t+"/SDF?record_type=3d"}else t.substring(0,4)=="url:"&&(l=t.substring(4),a=l);var h=function(v){c.addMolData(v,a,r),e.zoomTo(),e.render()};u=new Promise(function(v){a=="bcif"?getbin(l).then(function(g){h(g),v(c)}).catch(function(){o=r&&r.pdbUri?r.pdbUri:"https://files.rcsb.org/view/",l=o+t+".pdb",a="pdb",console.warn("falling back to pdb format"),get(l).then(function(g){h(g),v(c)}).catch(function(g){h(""),v(c),console.error("fetch of "+l+" failed: "+g.statusText)})}):get(l).then(function(g){h(g),v(c)}).catch(function(g){h(""),v(c),console.error("fetch of "+l+" failed: "+g.statusText)})})}return n?(u.then(function(v){n(v)}),c):u}function getColorFromStyle(t,e){let r=e.colorscheme;if(_colors__WEBPACK_IMPORTED_MODULE_2__.builtinColorSchemes[r]!==void 0)r=_colors__WEBPACK_IMPORTED_MODULE_2__.builtinColorSchemes[r];else if(typeof r=="string"&&r.endsWith("Carbon")){let o=r.substring(0,r.lastIndexOf("Carbon")).toLowerCase();if(_colors__WEBPACK_IMPORTED_MODULE_2__.htmlColors[o]!==void 0){let l=Object.assign({},_colors__WEBPACK_IMPORTED_MODULE_2__.elementColors.defaultColors);l.C=_colors__WEBPACK_IMPORTED_MODULE_2__.htmlColors[o],_colors__WEBPACK_IMPORTED_MODULE_2__.builtinColorSchemes[r]={prop:"elem",map:l},r=_colors__WEBPACK_IMPORTED_MODULE_2__.builtinColorSchemes[r]}}let n=t.color;if(e.color!==void 0&&e.color!="spectrum"&&(n=e.color),r!==void 0){let o,l;if(_colors__WEBPACK_IMPORTED_MODULE_2__.elementColors[r]!==void 0)r=_colors__WEBPACK_IMPORTED_MODULE_2__.elementColors[r],r[t[r.prop]]!==void 0&&(n=r.map[t[r.prop]]);else if(r[t[r.prop]]!==void 0)n=r.map[t[r.prop]];else if(r.prop!==void 0&&r.gradient!==void 0){o=r.prop;var a=r.gradient;a instanceof _Gradient__WEBPACK_IMPORTED_MODULE_0__.GradientType||(a=(0,_Gradient__WEBPACK_IMPORTED_MODULE_0__.getGradient)(r));let u=a.range()||[-1,1];l=getAtomProperty(t,o),l!=null&&(n=a.valueToHex(l,u))}else r.prop!==void 0&&r.map!==void 0?(o=r.prop,l=getAtomProperty(t,o),r.map[l]!==void 0&&(n=r.map[l])):e.colorscheme[t.elem]!==void 0?n=e.colorscheme[t.elem]:console.warn("Could not interpret colorscheme "+r)}else e.colorfunc!==void 0&&(n=e.colorfunc(t));return _colors__WEBPACK_IMPORTED_MODULE_2__.CC.color(n)}function getElement(t){let e=t;return typeof t=="string"?e=document.querySelector("#"+t):typeof t=="object"&&t.get&&(e=t.get(0)),e}function inflateString(t,e=!0){let r;return r=typeof t=="string"?new TextEncoder().encode(t):new Uint8Array(t),(0,pako__WEBPACK_IMPORTED_MODULE_3__.inflate)(r,{to:e?"string":null})}},865:(t,e,r)=>{r.r(e),r.d(e,{CUBE:()=>l});var n=r(378),a=r(392);const o={1:"H",2:"He",3:"Li",4:"Be",5:"B",6:"C",7:"N",8:"O",9:"F",10:"Ne",11:"Na",12:"Mg",13:"Al",14:"Si",15:"P",16:"S",17:"Cl",18:"Ar",19:"K",20:"Ca",21:"Sc",22:"Ti",23:"V",24:"Cr",25:"Mn",26:"Fe",27:"Co",28:"Ni",29:"Cu",30:"Zn",31:"Ga",32:"Ge",33:"As",34:"Se",35:"Br",36:"Kr",37:"Rb",38:"Sr",39:"Y",40:"Zr",41:"Nb",42:"Mo",43:"Tc",44:"Ru",45:"Rh",46:"Pd",47:"Ag",48:"Cd",49:"In",50:"Sn",51:"Sb",52:"Te",53:"I",54:"Xe",55:"Cs",56:"Ba",71:"Lu",72:"Hf",73:"Ta",74:"W",75:"Re",76:"Os",77:"Ir",78:"Pt",79:"Au",80:"Hg",81:"Tl",82:"Pb",83:"Bi",84:"Po",85:"At",86:"Rn",87:"Fr",88:"Ra",104:"Rf",105:"Db",106:"Sg",107:"Bh",108:"Hs",109:"Mt",110:"Ds",111:"Rg",112:"Cn",113:"Nh",114:"Fl",115:"Mc",116:"Lv",117:"Ts",118:"Og",57:"La",58:"Ce",59:"Pr",60:"Nd",61:"Pm",62:"Sm",63:"Eu",64:"Gd",65:"Tb",66:"Dy",67:"Ho",68:"Er",69:"Tm",70:"Yb",89:"Ac",90:"Th",91:"Pa",92:"U",93:"Np",94:"Pu",95:"Am",96:"Cm",97:"Bk",98:"Cf",99:"Es",100:"Fm",101:"Md",102:"No"};function l(u,c){c=c||{};const h=[[]];let v=u.split(/\r?\n/);const g=c.assignBonds===void 0||c.assignBonds;if(v.length<6)return h;let T=v[2].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");const R=Math.abs(parseFloat(T[0]));let W={origin:void 0,size:void 0,unit:void 0,matrix4:void 0,matrix:void 0};const k=W.origin=new n.Vector3(parseFloat(T[1]),parseFloat(T[2]),parseFloat(T[3]));T=v[3].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),T=v[3].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");const J=T[0]>0?.529177:1;k.multiplyScalar(J);const q=Math.abs(T[0]),Se=new n.Vector3(parseFloat(T[1]),parseFloat(T[2]),parseFloat(T[3])).multiplyScalar(J);T=v[4].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");const V=Math.abs(T[0]),Y=new n.Vector3(parseFloat(T[1]),parseFloat(T[2]),parseFloat(T[3])).multiplyScalar(J);T=v[5].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");const ie=Math.abs(T[0]),se=new n.Vector3(parseFloat(T[1]),parseFloat(T[2]),parseFloat(T[3])).multiplyScalar(J);if(W.size={x:q,y:V,z:ie},W.unit=new n.Vector3(Se.x,Y.y,se.z),Se.y!=0||Se.z!=0||Y.x!=0||Y.z!=0||se.x!=0||se.y!=0){W.matrix4=new n.Matrix4(Se.x,Y.x,se.x,0,Se.y,Y.y,se.y,0,Se.z,Y.z,se.z,0,0,0,0,1);let jo=new n.Matrix4().makeTranslation(k.x,k.y,k.z);W.matrix4=W.matrix4.multiplyMatrices(jo,W.matrix4),W.matrix=W.matrix4.matrix3FromTopLeft(),W.origin=new n.Vector3(0,0,0),W.unit=new n.Vector3(1,1,1)}h.modelData=[{cryst:W}],v=v.splice(6,R);for(var ct=h[h.length-1].length,ae=ct+v.length,st=ct;st<ae;++st){var Ct={};Ct.serial=st;var $t=v[st-ct].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");Ct.elem=o[$t[0]],Ct.x=parseFloat($t[2])*J,Ct.y=parseFloat($t[3])*J,Ct.z=parseFloat($t[4])*J,Ct.hetflag=!0,Ct.bonds=[],Ct.bondOrder=[],Ct.properties={},h[h.length-1].push(Ct)}if(g)for(let jo=0;jo<h.length;jo++)(0,a.assignBonds)(h[jo],c);return h}},972:(t,e,r)=>{var n=r(981),a=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch{a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{o=!1}for(var l=new n.Buf8(256),u=0;u<256;u++)l[u]=u>=252?6:u>=248?5:u>=240?4:u>=224?3:u>=192?2:1;function c(h,v){if(v<65534&&(h.subarray&&o||!h.subarray&&a))return String.fromCharCode.apply(null,n.shrinkBuf(h,v));for(var g="",T=0;T<v;T++)g+=String.fromCharCode(h[T]);return g}l[254]=l[254]=1,e.string2buf=function(h){var v,g,T,R,W,k=h.length,J=0;for(R=0;R<k;R++)(64512&(g=h.charCodeAt(R)))==55296&&R+1<k&&(64512&(T=h.charCodeAt(R+1)))==56320&&(g=65536+(g-55296<<10)+(T-56320),R++),J+=g<128?1:g<2048?2:g<65536?3:4;for(v=new n.Buf8(J),W=0,R=0;W<J;R++)(64512&(g=h.charCodeAt(R)))==55296&&R+1<k&&(64512&(T=h.charCodeAt(R+1)))==56320&&(g=65536+(g-55296<<10)+(T-56320),R++),g<128?v[W++]=g:g<2048?(v[W++]=192|g>>>6,v[W++]=128|63&g):g<65536?(v[W++]=224|g>>>12,v[W++]=128|g>>>6&63,v[W++]=128|63&g):(v[W++]=240|g>>>18,v[W++]=128|g>>>12&63,v[W++]=128|g>>>6&63,v[W++]=128|63&g);return v},e.buf2binstring=function(h){return c(h,h.length)},e.binstring2buf=function(h){for(var v=new n.Buf8(h.length),g=0,T=v.length;g<T;g++)v[g]=h.charCodeAt(g);return v},e.buf2string=function(h,v){var g,T,R,W,k=v||h.length,J=new Array(2*k);for(T=0,g=0;g<k;)if((R=h[g++])<128)J[T++]=R;else if((W=l[R])>4)J[T++]=65533,g+=W-1;else{for(R&=W===2?31:W===3?15:7;W>1&&g<k;)R=R<<6|63&h[g++],W--;W>1?J[T++]=65533:R<65536?J[T++]=R:(R-=65536,J[T++]=55296|R>>10&1023,J[T++]=56320|1023&R)}return c(J,T)},e.utf8border=function(h,v){var g;for((v=v||h.length)>h.length&&(v=h.length),g=v-1;g>=0&&(192&h[g])==128;)g--;return g<0||g===0?v:g+l[h[g]]>v?g:v}},981:(t,e)=>{var r=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function n(l,u){return Object.prototype.hasOwnProperty.call(l,u)}e.assign=function(l){for(var u=Array.prototype.slice.call(arguments,1);u.length;){var c=u.shift();if(c){if(typeof c!="object")throw new TypeError(c+"must be non-object");for(var h in c)n(c,h)&&(l[h]=c[h])}}return l},e.shrinkBuf=function(l,u){return l.length===u?l:l.subarray?l.subarray(0,u):(l.length=u,l)};var a={arraySet:function(l,u,c,h,v){if(u.subarray&&l.subarray)l.set(u.subarray(c,c+h),v);else for(var g=0;g<h;g++)l[v+g]=u[c+g]},flattenChunks:function(l){var u,c,h,v,g,T;for(h=0,u=0,c=l.length;u<c;u++)h+=l[u].length;for(T=new Uint8Array(h),v=0,u=0,c=l.length;u<c;u++)g=l[u],T.set(g,v),v+=g.length;return T}},o={arraySet:function(l,u,c,h,v){for(var g=0;g<h;g++)l[v+g]=u[c+g]},flattenChunks:function(l){return[].concat.apply([],l)}};e.setTyped=function(l){l?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,a)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,o))},e.setTyped(r)}},__webpack_module_cache__={};function __webpack_require__(t){var e=__webpack_module_cache__[t];if(e!==void 0)return e.exports;var r=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t].call(r.exports,r,r.exports,__webpack_require__),r.exports}__webpack_require__.d=(t,e)=>{for(var r in e)__webpack_require__.o(e,r)&&!__webpack_require__.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},__webpack_require__.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),__webpack_require__.r=t=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},__webpack_require__(16),__webpack_require__(185);var __webpack_exports__=__webpack_require__(307);return __webpack_exports__})(),module.exports=factory()})(_3DmolMin)),_3DmolMin.exports}require_3DmolMin();const covalentRadii={H:.31,He:.28,Li:1.28,Be:.96,B:.84,C:.76,N:.71,O:.66,F:.57,Ne:.58,Na:1.66,Mg:1.41,Al:1.21,Si:1.11,P:1.07,S:1.05,Cl:1.02,Ar:1.06,K:2.03,Ca:1.76,Sc:1.7,Ti:1.6,V:1.53,Cr:1.39,Mn:1.61,Fe:1.52,Co:1.5,Ni:1.24,Cu:1.32,Zn:1.22,Ga:1.22,Ge:1.2,As:1.19,Se:1.2,Br:1.2,Kr:1.16,Rb:2.2,Sr:1.95,Y:1.9,Zr:1.75,Nb:1.64,Mo:1.54,Tc:1.47,Ru:1.46,Rh:1.42,Pd:1.39,Ag:1.45,Cd:1.44,In:1.42,Sn:1.39,Sb:1.39,Te:1.38,I:1.39,Xe:1.4,Cs:2.44,Ba:2.15,La:2.07,Ce:2.04,Pr:2.03,Nd:2.01,Pm:1.99,Sm:1.98,Eu:1.98,Gd:1.96,Tb:1.94,Dy:1.92,Ho:1.92,Er:1.89,Tm:1.9,Yb:1.87,Lu:1.75,Hf:1.87,Ta:1.7,W:1.62,Re:1.51,Os:1.44,Ir:1.41,Pt:1.36,Au:1.36,Hg:1.32,Tl:1.45,Pb:1.46,Bi:1.48,Po:1.4,At:1.5,Rn:1.5,Fr:2.6,Ra:2.21,Ac:2.15,Th:2.06,Pa:2,U:1.96,Np:1.9,Pu:1.87,Am:1.8,Cm:1.69},$3Dmol$1=window.$3Dmol;function mod(t,e){return(t%e+e)%e}function setCustomBondLengths(){function t(e,r){$3Dmol$1.setBondLength(e,r)}Object.keys(covalentRadii).forEach(e=>{t(e,1.05*covalentRadii[e])})}const Visualizer3dmol=reactExports.forwardRef(({viewerParams:t,cifText:e},r)=>{const n=reactExports.useRef(null),a=reactExports.useRef(null),o=reactExports.useRef("gldiv-"+(Math.random()+1).toString(36).substring(7));reactExports.useEffect(()=>{setCustomBondLengths()},[]);const l=()=>{if(a.current=n.current.addModel(),e){let h=$3Dmol$1.Parsers.CIF(e),v=h[0],g=h.modelData[0].cryst;a.current.setCrystData(g.a,g.b,g.c,g.alpha,g.beta,g.gamma);let T=a.current.modelData.cryst.matrix,R=new $3Dmol$1.Matrix3().getInverse3(T),W=[],k=[];v.forEach(Se=>{let V=new $3Dmol$1.Vector3(Se.x,Se.y,Se.z);if(t.packedCell){let Y=V.clone().applyMatrix3(R);V=new $3Dmol$1.Vector3(mod(Y.x,1),mod(Y.y,1),mod(Y.z,1)).applyMatrix3(T)}k.push({elem:Se.elem,x:V.x,y:V.y,z:V.z})});let J=.03,q=t.supercell;for(let Se=-1;Se<q[0]+1;Se++)for(let V=-1;V<q[1]+1;V++)for(let Y=-1;Y<q[2]+1;Y++){let ie=new $3Dmol$1.Vector3(Se,V,Y);if(ie.applyMatrix3(T),Se==-1||Se==q[0]||V==-1||V==q[1]||Y==-1||Y==q[2])if(t.packedCell)k.forEach(se=>{let ct=new $3Dmol$1.Vector3(se.x,se.y,se.z);ct.add(ie);let ae=ct.clone().applyMatrix3(R);ae.x>-J&&ae.x<q[0]+J&&ae.y>-J&&ae.y<q[1]+J&&ae.z>-J&&ae.z<q[2]+J&&W.push({elem:se.elem,x:ct.x,y:ct.y,z:ct.z})});else continue;else k.forEach(se=>{W.push({elem:se.elem,x:se.x+ie.x,y:se.y+ie.y,z:se.z+ie.z})})}a.current.addAtoms(W)}},u=()=>{n.current.removeAllModels(),l();let h={sphere:{scale:.3,colorscheme:"Jmol"}};t.vdwRadius&&(h.sphere.scale=1),t.bonds&&(h.stick={radius:.15,colorscheme:"Jmol"}),n.current.setStyle(h),n.current.addUnitCell(a.current),a.current.assignBonds(),n.current.removeAllLabels(),t.atomLabels&&a.current.atoms.forEach(v=>{n.current.addLabel(v.elem,{position:{x:v.x,y:v.y,z:v.z},fontColor:"black",bold:!0,fontSize:18,showBackground:!1,backgroundOpacity:1,inFront:!0},null,!0)}),n.current.zoomTo(),n.current.zoom(1.4),n.current.render()},c=(h,v)=>{h=="camera"&&(v=="x"&&n.current.setView([0,0,0,0,-.5,-.5,-.5,.5]),v=="y"&&n.current.setView([0,0,0,0,.5,.5,.5,.5]),v=="z"&&n.current.setView([0,0,0,0,0,0,0,1]),n.current.zoomTo(),n.current.zoom(1.4))};return reactExports.useImperativeHandle(r,()=>({handleEvent:c})),reactExports.useEffect(()=>{let h={backgroundColor:"white",orthographic:!0};n.current=$3Dmol$1.createViewer(o.current,h),u()},[]),reactExports.useEffect(()=>{n.current&&u()},[t,e]),jsxRuntimeExports.jsx("div",{id:o.current,className:"gldiv",children:"No data!"})});Visualizer3dmol.displayName="Visualizer3dmol";const StructureWindow=({mouseEnabled:t,setMouseEnabledState:e,visualizerRef:r,viewerParams:n,cifText:a})=>{let o="structure-window";t||(o+=" disable-mouse");let l="Click to interact",u="mouse-disabled-note";return t&&(u="mouse-disabled-note on"),jsxRuntimeExports.jsxs("div",{className:"structure-window-outer",children:[jsxRuntimeExports.jsx("div",{className:"structure-window-click-handler",onClick:()=>e(!0),children:jsxRuntimeExports.jsx("div",{className:o,children:jsxRuntimeExports.jsx(Visualizer3dmol,{ref:r,viewerParams:n,cifText:a})})}),jsxRuntimeExports.jsx("div",{className:u,onClick:()=>e(!t),children:l})]})},StructureVisualizer=t=>{const[e,r]=reactExports.useState({supercell:t.initSupercell||[2,2,2],bonds:!0,packedCell:!0,atomLabels:!1,vdwRadius:!1}),[n,a]=reactExports.useState(!1),o=reactExports.useRef(null),l=reactExports.useRef(null);reactExports.useEffect(()=>{const v=g=>{l&&!l.current.contains(g.target)&&a(!1)};return document.addEventListener("mousedown",v),()=>{document.removeEventListener("mousedown",v)}},[]);const u=v=>{a(v)},c=(v,g)=>{r(T=>({...T,[v]:g}))},h=(v,g)=>{o.current.handleEvent(v,g)};return jsxRuntimeExports.jsxs("div",{ref:l,className:"structure-visualizer",children:[jsxRuntimeExports.jsx(StructureWindow,{visualizerRef:o,viewerParams:e,cifText:t.cifText,mouseEnabled:n,setMouseEnabledState:u}),jsxRuntimeExports.jsx(ControlBox,{viewerParams:e,onViewerParamChange:c,onViewerEvent:h})]})},defaultFormats=[{format:"cif",label:"CIF"},{format:"xsf",label:"XSF"},{format:"xyz",label:"XYZ"}];function StructDownloadButton(t){const e=`${t.aiida_rest_url}/nodes/${t.uuid}/download`,r=t.download_formats||defaultFormats,[n,a]=reactExports.useState(!1),o=reactExports.useRef(null);return reactExports.useEffect(()=>{function l(u){o.current&&!o.current.contains(u.target)&&a(!1)}return document.addEventListener("mousedown",l),()=>document.removeEventListener("mousedown",l)},[]),jsxRuntimeExports.jsxs("div",{ref:o,className:"ae:relative ae:inline-block",children:[jsxRuntimeExports.jsx("button",{type:"button",title:"Download",onClick:()=>a(!n),className:`ae:bg-blue-600 ae:text-white ae:text-xs ae:px-1 ae:py-1 ae:rounded-md ae:cursor-pointer 
                   ae:hover:bg-blue-800 ae:focus:bg-blue-700 ae:focus:ring-3 ae:focus:ring-[#2563eb4d]`,children:jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",children:[jsxRuntimeExports.jsx("path",{d:"M12 15V3"}),jsxRuntimeExports.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),jsxRuntimeExports.jsx("path",{d:"m7 10 5 5 5-5"})]})}),n&&jsxRuntimeExports.jsx("ul",{className:`
            ae:absolute
            ae:top-full
            ae:left-1/2
            ae:-translate-x-1/2
            ae:mt-1
            ae:w-max
            ae:list-none
            ae:m-0
            ae:p-0
            ae:border
            ae:border-gray-200
            ae:rounded-md
            ae:shadow-md
            ae:bg-white
            ae:text-sm
            ae:z-50
          `,children:r.map(({format:l,label:u})=>jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx("a",{href:`${e}?download_format=${l}`,className:"ae:block ae:px-3 ae:py-1 ae:text-gray-900 ae:hover:bg-gray-100 ae:whitespace-nowrap",children:u})},l))})]})}function getVol(t,e=4){const r=(o,l)=>[o[1]*l[2]-o[2]*l[1],o[2]*l[0]-o[0]*l[2],o[0]*l[1]-o[1]*l[0]],n=t.attributes.cell,a=Math.abs(n[0].reduce((o,l,u)=>o+l*r(n[1],n[2])[u],0));return parseFloat(a.toFixed(e))}function formatLattice(t){const e=t.attributes.cell,r=Math.hypot(...e[0]),n=Math.hypot(...e[1]),a=Math.hypot(...e[2]);return{a:r,b:n,c:a}}function formatChemicalFormula(t){return t.split(/(\d+)/).map((r,n)=>r.match(/\d+/)?jsxRuntimeExports.jsx("sub",{children:r},n):r)}function calculateDensity(t,e,r){const n={};r.forEach(o=>{n[o.name]=o.mass});let a=0;return t.forEach(o=>{const l=o.kind_name,u=n[l];if(u===void 0)throw new Error(`Unknown kind: ${l}`);a+=u}),Math.round(a*1e4/(e*6.0223))}let wasm,cachedUint8ArrayMemory0=null;function getUint8ArrayMemory0(){return(cachedUint8ArrayMemory0===null||cachedUint8ArrayMemory0.byteLength===0)&&(cachedUint8ArrayMemory0=new Uint8Array(wasm.memory.buffer)),cachedUint8ArrayMemory0}let cachedTextDecoder=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});cachedTextDecoder.decode();const MAX_SAFARI_DECODE_BYTES=2146435072;let numBytesDecoded=0;function decodeText(t,e){return numBytesDecoded+=e,numBytesDecoded>=MAX_SAFARI_DECODE_BYTES&&(cachedTextDecoder=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}),cachedTextDecoder.decode(),numBytesDecoded=e),cachedTextDecoder.decode(getUint8ArrayMemory0().subarray(t,t+e))}function getStringFromWasm0(t,e){return t=t>>>0,decodeText(t,e)}let WASM_VECTOR_LEN=0;const cachedTextEncoder=new TextEncoder;"encodeInto"in cachedTextEncoder||(cachedTextEncoder.encodeInto=function(t,e){const r=cachedTextEncoder.encode(t);return e.set(r),{read:t.length,written:r.length}});function passStringToWasm0(t,e,r){if(r===void 0){const u=cachedTextEncoder.encode(t),c=e(u.length,1)>>>0;return getUint8ArrayMemory0().subarray(c,c+u.length).set(u),WASM_VECTOR_LEN=u.length,c}let n=t.length,a=e(n,1)>>>0;const o=getUint8ArrayMemory0();let l=0;for(;l<n;l++){const u=t.charCodeAt(l);if(u>127)break;o[a+l]=u}if(l!==n){l!==0&&(t=t.slice(l)),a=r(a,n,n=l+t.length*3,1)>>>0;const u=getUint8ArrayMemory0().subarray(a+l,a+n),c=cachedTextEncoder.encodeInto(t,u);l+=c.written,a=r(a,n,l,1)>>>0}return WASM_VECTOR_LEN=l,a}let cachedDataViewMemory0=null;function getDataViewMemory0(){return(cachedDataViewMemory0===null||cachedDataViewMemory0.buffer.detached===!0||cachedDataViewMemory0.buffer.detached===void 0&&cachedDataViewMemory0.buffer!==wasm.memory.buffer)&&(cachedDataViewMemory0=new DataView(wasm.memory.buffer)),cachedDataViewMemory0}function takeFromExternrefTable0(t){const e=wasm.__wbindgen_export_2.get(t);return wasm.__externref_table_dealloc(t),e}function analyze_cell(t,e,r){const n=passStringToWasm0(t,wasm.__wbindgen_malloc,wasm.__wbindgen_realloc),a=WASM_VECTOR_LEN,o=passStringToWasm0(r,wasm.__wbindgen_malloc,wasm.__wbindgen_realloc),l=WASM_VECTOR_LEN,u=wasm.analyze_cell(n,a,e,o,l);if(u[2])throw takeFromExternrefTable0(u[1]);return takeFromExternrefTable0(u[0])}const EXPECTED_RESPONSE_TYPES=new Set(["basic","cors","default"]);async function __wbg_load(t,e){if(typeof Response=="function"&&t instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(t,e)}catch(n){if(t.ok&&EXPECTED_RESPONSE_TYPES.has(t.type)&&t.headers.get("Content-Type")!=="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve Wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",n);else throw n}const r=await t.arrayBuffer();return await WebAssembly.instantiate(r,e)}else{const r=await WebAssembly.instantiate(t,e);return r instanceof WebAssembly.Instance?{instance:r,module:t}:r}}function __wbg_get_imports(){const t={};return t.wbg={},t.wbg.__wbg_Error_e17e777aac105295=function(e,r){return Error(getStringFromWasm0(e,r))},t.wbg.__wbg_String_8f0eb39a4a4c2f66=function(e,r){const n=String(r),a=passStringToWasm0(n,wasm.__wbindgen_malloc,wasm.__wbindgen_realloc),o=WASM_VECTOR_LEN;getDataViewMemory0().setInt32(e+4,o,!0),getDataViewMemory0().setInt32(e+0,a,!0)},t.wbg.__wbg_new_19c25a3f2fa63a02=function(){return new Object},t.wbg.__wbg_new_1f3a344cf3123716=function(){return new Array},t.wbg.__wbg_set_3f1d0b984ed272ed=function(e,r,n){e[r]=n},t.wbg.__wbg_set_90f6c0f7bd8c0415=function(e,r,n){e[r>>>0]=n},t.wbg.__wbg_wbindgenthrow_451ec1a8469d7eb6=function(e,r){throw new Error(getStringFromWasm0(e,r))},t.wbg.__wbindgen_cast_2241b6af4c4b2941=function(e,r){return getStringFromWasm0(e,r)},t.wbg.__wbindgen_cast_4625c577ab2ec9ee=function(e){return BigInt.asUintN(64,e)},t.wbg.__wbindgen_cast_d6cd19b81560fd6e=function(e){return e},t.wbg.__wbindgen_init_externref_table=function(){const e=wasm.__wbindgen_export_2,r=e.grow(4);e.set(0,void 0),e.set(r+0,void 0),e.set(r+1,null),e.set(r+2,!0),e.set(r+3,!1)},t}function __wbg_finalize_init(t,e){return wasm=t.exports,__wbg_init.__wbindgen_wasm_module=e,cachedDataViewMemory0=null,cachedUint8ArrayMemory0=null,wasm.__wbindgen_start(),wasm}async function __wbg_init(t){if(wasm!==void 0)return wasm;typeof t<"u"&&(Object.getPrototypeOf(t)===Object.prototype?{module_or_path:t}=t:console.warn("using deprecated parameters for the initialization function; pass a single object instead")),typeof t>"u"&&(t=new URL("/aiida-explorer/pr-preview/pr-24/assets/moyo_wasm_bg-B2bb44YI.wasm",import.meta.url));const e=__wbg_get_imports();(typeof t=="string"||typeof Request=="function"&&t instanceof Request||typeof URL=="function"&&t instanceof URL)&&(t=fetch(t));const{instance:r,module:n}=await __wbg_load(await t,e);return __wbg_finalize_init(r,n)}const wasmUrl="/aiida-explorer/pr-preview/pr-24/assets/moyo_wasm_bg-B2bb44YI.wasm";async function analyzeCrystal(t,e,r){await __wbg_init(wasmUrl);const a={lattice:{basis:t.flat()},positions:e,numbers:r};return analyze_cell(JSON.stringify(a),.005,"Standard")}function StructureDataVisualiser({nodeData:t,restApiUrl:e}){const r=t.downloadByFormat?.cif,[n,a]=reactExports.useState(null),[o,l]=reactExports.useState(!0),[u,c]=reactExports.useState(null),[h,v]=reactExports.useState(null),g=reactExports.useCallback(async()=>{if(!r){c("No CIF file available"),l(!1);return}l(!0),c(null);try{const Ct=await fetch(r);if(!Ct.ok)throw new Error(`HTTP error: ${Ct.status}`);const $t=await Ct.text();a($t)}catch(Ct){c(Ct.message)}finally{l(!1)}},[r]);reactExports.useEffect(()=>{g()},[g]);const T=t.derived_properties&&Object.keys(t.derived_properties).length>0,R=t.attributes?.cell||null,W=R?formatLattice(t):null,k=T?t.derived_properties.dimensionality?.value:W?getVol(t):null,J=t.attributes?.sites||[],q=t.attributes?.kinds||[],Se=J.length,V=t.derived_properties?.dimensionality?.dim||null,Y=reactExports.useMemo(()=>{const Ct={};let $t=1;return J.forEach(jo=>{const Lp=jo.kind_name?.trim();Lp&&!(Lp in Ct)&&(Ct[Lp]=$t++)}),Ct},[J]),ie=reactExports.useMemo(()=>Object.fromEntries(Object.entries(Y).map(([Ct,$t])=>[$t,Ct])),[Y]),se=reactExports.useMemo(()=>J.map(Ct=>{const[$t,jo,Lp]=Ct.position;return{"Kind label":Ct.kind_name,"x []":$t.toFixed(4),"y []":jo.toFixed(4),"z []":Lp.toFixed(4)}}),[J]),ct=reactExports.useMemo(()=>V!==3?null:calculateDensity(J,k,q),[V,J,k,q]);reactExports.useEffect(()=>{if(!R||J.length===0||q.length===0)return;const Ct=inv(R),$t=J.map(Lp=>multiply(Lp.position,Ct)),jo=J.map(Lp=>Y[Lp.kind_name.trim()]);analyzeCrystal(R,$t,jo).then(v).catch(console.error)},[R,J,q,Y]);const ae=reactExports.useMemo(()=>h?.std_cell?h.std_cell.positions.map((Ct,$t)=>({"#":$t+1,"Kind Name":ie[h.std_cell.numbers[$t]]||"Unknown","x [frac]":Ct[0].toFixed(4),"y [frac]":Ct[1].toFixed(4),"z [frac]":Ct[2].toFixed(4)})):[],[h,ie]),st=reactExports.useMemo(()=>h?.prim_std_cell?h.prim_std_cell.positions.map((Ct,$t)=>({"#":$t+1,"Kind Name":ie[h.prim_std_cell.numbers[$t]]||"Unknown","x [frac]":Ct[0].toFixed(4),"y [frac]":Ct[1].toFixed(4),"z [frac]":Ct[2].toFixed(4)})):[],[h,ie]);return o?jsxRuntimeExports.jsx("div",{className:"ae:w-full ae:min-h-[450px] ae:flex ae:items-center ae:justify-center",children:jsxRuntimeExports.jsx(Spinner,{})}):u?jsxRuntimeExports.jsx("div",{className:"ae:w-full ae:min-h-[450px] ae:flex ae:items-center ae:justify-center",children:jsxRuntimeExports.jsx(ErrorDisplay,{message:u,onRetry:g})}):jsxRuntimeExports.jsx("div",{className:"ae:w-full ae:mx-auto ae:p-4 ae:space-y-6",children:jsxRuntimeExports.jsxs("div",{className:"ae:@container",children:[jsxRuntimeExports.jsxs("div",{className:"ae:grid ae:grid-cols-1 ae:gap-4 ae:@xl:grid-cols-[1fr_auto]",children:[jsxRuntimeExports.jsxs("div",{className:"ae:w-full ae:h-[400px] ae:relative ae:bg-slate-100 ae:shadow-sm ae:overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"ae:absolute ae:top-4 ae:right-4 ae:z-50",children:jsxRuntimeExports.jsx(StructDownloadButton,{aiida_rest_url:e,uuid:t.aiida.uuid,download_formats:t.label==="CifData"?[{format:"cif",label:"CIF"}]:[{format:"cif",label:"CIF"},{format:"xsf",label:"XSF"},{format:"xyz",label:"XYZ"}]})}),jsxRuntimeExports.jsx("div",{className:"ae:w-full ae:h-full",children:jsxRuntimeExports.jsx(StructureVisualizer,{cifText:n,initSupercell:[2,2,2]})})]}),jsxRuntimeExports.jsx("div",{className:"ae:flex ae:flex-col ae:space-y-4 ae:max-w-xs",children:T&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs(CardContainer,{children:[jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("span",{className:"ae:font-medium",children:"Formula:"})," ",formatChemicalFormula(t.derived_properties.formula)]}),jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("span",{className:"ae:font-medium",children:"Cell Volume:"})," ",k?.toFixed(4)," "]}),jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("span",{className:"ae:font-medium",children:"Dimensionality:"})," ",V||"N/A"]}),jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("span",{className:"ae:font-medium",children:"Density:"})," ",ct||"N/A"," kg/m",jsxRuntimeExports.jsx("sup",{children:"3"})]})]}),W&&jsxRuntimeExports.jsxs(CardContainer,{children:[jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("span",{className:"ae:font-medium",children:"Lattice a:"})," ",W.a.toFixed(4)," "]}),jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("span",{className:"ae:font-medium",children:"Lattice b:"})," ",W.b.toFixed(4)," "]}),jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("span",{className:"ae:font-medium",children:"Lattice c:"})," ",W.c.toFixed(4)," "]}),jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("span",{className:"ae:font-medium",children:"Number of Sites:"})," ",Se]})]})]})})]}),jsxRuntimeExports.jsx("div",{className:"pt-1",children:jsxRuntimeExports.jsx(DataTable,{title:"Atomic Positions (from AiiDA)",columns:["Kind label","x []","y []","z []"],data:se,sortableCols:!1})}),h&&jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs("div",{className:"explorerHeading ae:flex ae:items-center ae:pt-4 ae:font-lg",children:[jsxRuntimeExports.jsxs("span",{children:["Symmetry information calculated on-the-fly using"," ",jsxRuntimeExports.jsx("a",{href:"https://github.com/spglib/moyo",target:"_blank",children:"spglib/moyo"})," ","(symprec: 510)"]}),jsxRuntimeExports.jsx(DownloadIcon,{data:h,filename:"spglib.json",size:20,className:"ae:text-blue-600 ae:hover:text-blue-800 ae:hover:cursor-pointer"})]}),jsxRuntimeExports.jsxs(CardContainer,{children:[jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("span",{className:"ae:font-medium",children:"Space group:"})," ",h.hm_symbol.replace(/\s+/g,"")," (#",h.number,")"]}),jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("span",{className:"ae:font-medium",children:"Hall number:"})," ",h.hall_number]}),jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("span",{className:"ae:font-medium",children:"Pearson symbol:"})," ",h.pearson_symbol]}),jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("span",{className:"ae:font-medium",children:"Number of symmetry operations:"})," ",h.operations.length]})]}),h.wyckoffs&&h.site_symmetry_symbols&&jsxRuntimeExports.jsx(DataTable,{title:"Wyckoff Positions & Site Symmetry",columns:["Site #","Wyckoff","Site Symmetry"],data:h.wyckoffs.map((Ct,$t)=>({"Site #":$t+1,Wyckoff:Ct,"Site Symmetry":h.site_symmetry_symbols[$t]})),sortableCols:!1}),st.length>0&&jsxRuntimeExports.jsx(DataTable,{title:"Primitive cell Atomic Positions",columns:["#","Kind Name","x [frac]","y [frac]","z [frac]"],data:st,sortableCols:!1}),ae.length>0&&jsxRuntimeExports.jsx(DataTable,{title:"Standard Cell Atomic Positions",columns:["#","Kind Name","x [frac]","y [frac]","z [frac]"],data:ae,sortableCols:!1})]})]})})}function SimplePlot({data:t,layout:e,config:r={},style:n={width:"100%",height:"400"}}){const a=reactExports.useRef(null),o=reactExports.useMemo(()=>t,[t]),l=reactExports.useMemo(()=>e,[e]),u=reactExports.useMemo(()=>r,[r]);return reactExports.useEffect(()=>{const c=a.current;if(!c)return;const h=o.length;let v=0;o.forEach(T=>{v+=(T.x?.length||0)+(T.y?.length||0)+(T.z?.length||0)}),console.debug(`Rendering ${h} traces with ~${v} data points`);const g=performance.now();Plotly.newPlot(c,o,l,{responsive:!0,...u}).then(()=>{const T=performance.now();console.log(`Plotly rendering took ${(T-g).toFixed(2)} ms for ${h} traces (~${v} points)`)})},[o,l,u]),reactExports.useEffect(()=>{if(!a.current)return;const c=new ResizeObserver(()=>{Plotly.Plots.resize(a.current)});return c.observe(a.current),()=>c.disconnect()},[]),jsxRuntimeExports.jsx("div",{ref:a,style:n})}function getRadialFunctionsTraces(t){return!t||!t.atomic_wave_functions||!t.radial_grid?[]:t.atomic_wave_functions.map(r=>{const n=r.label??"",a=r.angular_momentum!=null?`(=${r.angular_momentum}`:"",o=r.occupation!=null?`, occ=${r.occupation})`:r.angular_momentum!=null?")":"";return{x:t.radial_grid,y:r.radial_function,type:"scatter",mode:"lines",name:`${n} ${a}${o}`}})}function getBetaProjectorsTraces(t){return!t||!t.beta_projectors||!t.radial_grid?[]:t.beta_projectors.map(r=>{const n=r.label??"",a=r.angular_momentum!=null?`(=${r.angular_momentum}`:"",o=r.ultrasoft_cutoff_radius!=null?`, cutoff=${r.ultrasoft_cutoff_radius})`:r.angular_momentum!=null?")":"";return{x:t.radial_grid,y:r.radial_function,type:"scatter",mode:"lines",name:`${n} ${a}${o}`}})}function getChargeDensitiesTraces(t){if(!t||!t.radial_grid)return[];const e={x:t.radial_grid,y:t.total_charge_density,type:"scatter",mode:"lines",name:"Valence Pseudocharge density"};return[{x:t.radial_grid,y:t.core_charge_density,type:"scatter",mode:"lines",name:"Core Pseudocharge density"},e].filter(n=>Array.isArray(n.y)&&n.y.length>0)}function UpfDataVisualiser({nodeData:t}){const[e,r]=reactExports.useState(!0),[n,a]=reactExports.useState(null),[o,l]=reactExports.useState(null),u=t.downloadByFormat?.json,c=reactExports.useMemo(()=>getRadialFunctionsTraces(o),[o]),h=reactExports.useMemo(()=>getBetaProjectorsTraces(o),[o]),v=reactExports.useMemo(()=>getChargeDensitiesTraces(o),[o]),g=reactExports.useCallback(async()=>{if(!u){a("No JSON path available"),r(!1);return}r(!0),a(null);try{const k=await fetch(u);if(!k.ok)throw new Error(`HTTP ${k.status}`);const J=await k.json();l(J.pseudo_potential)}catch(k){console.error("Failed to fetch UPF JSON:",k),a(k.message||"Failed to load UPF data")}finally{r(!1)}},[u]);if(reactExports.useEffect(()=>{g()},[g]),e)return jsxRuntimeExports.jsx("div",{className:"ae:w-full ae:min-h-[450px] ae:flex ae:items-center ae:justify-center",children:jsxRuntimeExports.jsx(Spinner,{})});if(n)return jsxRuntimeExports.jsx("div",{className:"ae:w-full ae:min-h-[450px] ae:flex ae:items-center ae:justify-center",children:jsxRuntimeExports.jsx(ErrorDisplay,{message:n,onRetry:g})});if(!o)return null;const{header:T}=o,R={x:.97,y:.95,xanchor:"right",yanchor:"top",bordercolor:"#ccc",borderwidth:1},W={t:20,b:40,l:50,r:20};return jsxRuntimeExports.jsxs("div",{className:"ae:w-full ae:mx-auto ae:p-4 ae:space-y-6",children:[jsxRuntimeExports.jsxs(CardContainer,{header:"Metadata",children:[jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("span",{className:"ae:font-medium",children:"Element:"})," ",T?.element||"N/A"]}),jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("span",{className:"ae:font-medium",children:"Valence Electrons:"})," ",T?.z_valence??"N/A"]}),jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("span",{className:"ae:font-medium",children:"Pseudopotential Type:"})," ",T?.pseudo_type||"N/A"]}),jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("span",{className:"ae:font-medium",children:"Functional:"})," ",T?.functional||"N/A"]})]}),jsxRuntimeExports.jsx(CardContainer,{header:"Orbital radial functions",className:"ae:px-1.5! ae:py-2!",childrenClassName:"ae:!p-0",children:jsxRuntimeExports.jsx(SimplePlot,{data:c,layout:{autosize:!0,height:400,margin:W,xaxis:{title:{text:"Radius (Bohr)"},range:[0,20]},yaxis:{title:{text:"(r)"}},legend:R},config:{responsive:!0},useResizeHandler:!0,style:{width:"100%",height:400}})}),jsxRuntimeExports.jsx(CardContainer,{header:"Beta projectors",className:"ae:px-1.5! ae:py-2!",childrenClassName:"ae:!p-0",children:jsxRuntimeExports.jsx(SimplePlot,{data:h,layout:{autosize:!0,height:400,margin:W,xaxis:{title:{text:"Radius (Bohr)"}},yaxis:{title:{text:"(r)"}},legend:R},config:{responsive:!0}})}),jsxRuntimeExports.jsx(CardContainer,{header:"Charge densities",className:"ae:px-1.5! ae:py-2!",childrenClassName:"ae:!p-0",children:jsxRuntimeExports.jsx(SimplePlot,{data:v,layout:{autosize:!0,height:400,margin:W,xaxis:{title:{text:"Radius (Bohr)"},range:[0,5]},yaxis:{title:{text:"(r)"}},legend:R},config:{responsive:!0},useResizeHandler:!0,style:{width:"100%",height:"100%"}})})]})}const RICH_TYPES={StructureData:StructureDataVisualiser,CifData:StructureDataVisualiser,BandsData:BandsDataVisualiser,UpfData:UpfDataVisualiser,KpointsData:KpointsDataVisualiser,CalcJobNode:CalcJobVisualiser};function geRichVisualiser(t,e){if(!e||!e.data)return null;const{label:r,aiida:n}=e.data,a=RICH_TYPES[r];return a?jsxRuntimeExports.jsx(a,{nodeData:e.data,restApiUrl:t},n?.uuid):null}function VisualiserPane({restApiUrl:t,selectedNode:e,userData:r,downloadFormats:n}){const a=reactExports.useMemo(()=>geRichVisualiser(t,e),[t,e?.data?.label,e?.data?.aiida?.uuid]),[o,l]=reactExports.useState(a?"rich":"raw");if(reactExports.useEffect(()=>{l(a?"rich":"raw")},[e]),!e)return jsxRuntimeExports.jsx("div",{className:"ae:w-full ae:h-full ae:p-4",children:jsxRuntimeExports.jsx("p",{children:"Click a node to see top level details. Double click to traverse the graph."})});const u=!a;return jsxRuntimeExports.jsxs("div",{className:"ae:w-full ae:h-full ae:flex ae:flex-col ae:overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"ae:px-4 ae:py-3 ae:md:py-2 ae:bg-slate-50",children:jsxRuntimeExports.jsx(FormattedMetaData,{nodeData:e.data,userData:r})}),jsxRuntimeExports.jsxs("div",{className:"ae:flex ae:border-y ae:bg-slate-100",children:[jsxRuntimeExports.jsx("button",{disabled:u,className:`ae:px-4 ae:py-2 ${o==="rich"?"ae:border-b-2 ae:border-slate-500 ae:transition ae:font-medium":u?"ae:text-gray-400 ae:cursor-not-allowed":""}`,onClick:()=>!u&&l("rich"),children:"Rich View"}),jsxRuntimeExports.jsx("button",{className:`ae:px-4 ae:py-2 ${o==="raw"?"ae:border-b-2 ae:border-slate-500 ae:transition ae:font-medium":""}`,onClick:()=>l("raw"),children:"Raw View"})]}),jsxRuntimeExports.jsxs("div",{className:"ae:flex-1 ae:overflow-auto ae:bg-slate-50",children:[o==="rich"&&a,o==="raw"&&jsxRuntimeExports.jsx(RawDataVisualiser,{nodeData:e.data,downloadFormats:n})]})]})}function toggleFullScreen(t){document.fullscreenElement?document.exitFullscreen():t.requestFullscreen().catch(e=>console.error(e))}function AiidaExplorer(t){const e=new QueryClient;return jsxRuntimeExports.jsx(QueryClientProvider,{client:e,children:jsxRuntimeExports.jsx(AiidaExplorerInner,{...t},t.restApiUrl)},t.restApiUrl)}function AiidaExplorerInner({restApiUrl:t,rootNode:e,defaultRootNode:r="",onRootNodeChange:n=()=>{},debugMode:a=!1,fullscreenToggle:o=!1}){const[l,u]=useRootNode(e,r,n),c=reactExports.useRef(null),h=reactExports.useRef(null),v=reactExports.useRef(null),g=useMediaQuery("(min-width: 1000px)"),T=useContainerMediaQuery(c,[{name:"tiny",predicate:p0=>p0<400},{name:"small",predicate:p0=>p0>=400&&p0<700},{name:"medium",predicate:p0=>p0>=700&&p0<1200},{name:"large",predicate:p0=>p0>=1200}]),[R,W]=reactExports.useState({lastNodeFetchTime:null,lastGraphFetchTime:null,cacheHits:0,cacheMisses:0,nodesCount:0,edgesCount:0,breadcrumbsCount:0}),[k,J]=reactExports.useState(!1),[q,Se]=reactExports.useState(null),[V,Y]=reactExports.useState([]),[ie,se]=reactExports.useState([]),[ct,ae]=reactExports.useState([]),[st,Ct]=reactExports.useState(null),[$t,jo]=reactExports.useState({}),[Lp,Mn]=reactExports.useState("groupsview"),sa=10,re=reactExports.useRef(!0);reactExports.useEffect(()=>{re.current&&!l?(re.current=!1,Mn("groupsview")):Mn(l?null:"groupsview")},[l]);const{data:$o,isLoading:qo,isError:Kt}=useQuery({queryKey:["users",t],queryFn:()=>fetchUsers(t)}),{data:i0,isLoading:Up,isError:l0}=useQuery({queryKey:["downloadFormats",t],queryFn:()=>fetchDownloadFormats(t)});reactExports.useEffect(()=>{if(!l)return;let p0=!0;async function rm(){const am=performance.now();J(!0),Se(null);try{const{nodes:ym,edges:Wm}=await fetchGraphByNodeId(t,l,ct.at(-1));if(!p0)return;const h0=performance.now()-am;W(I1=>({...I1,lastGraphFetchTime:h0.toFixed(2)+"ms",nodesCount:ym.length,edgesCount:Wm.length,breadcrumbsCount:ct.length}));const f1=ym.map(I1=>({...I1,data:{...I1.data,...$t[I1.id]||{}}}));Y(f1),se(Wm),requestAnimationFrame(()=>{const I1=v.current;if(!I1)return;I1.fitView({padding:2});const p1=f1.find(Qm=>stripSyntheticId(Qm.id)===stripSyntheticId(l));if(p1?.position){let Qm=1.22;T==="small"?Qm=.5:T==="medium"?Qm=.8:T==="large"&&(Qm=1.22),I1.setCenter(p1.position.x+70,p1.position.y,{zoom:Qm,duration:500}),setTimeout(()=>{I1.setCenter(p1.position.x+70,p1.position.y+0,{zoom:Qm,duration:500})},400)}});const T1=f1.find(I1=>stripSyntheticId(I1.id)===stripSyntheticId(l));if(T1){const I1=await y0(T1);Ct(I1)}stripSyntheticId(ct[ct.length-1]?.id)!==stripSyntheticId(T1?.id)&&ae(I1=>[...I1,T1].slice(-sa))}catch(ym){console.error("Failed to load graph:",ym),p0&&Se(ym.message||"Failed to load node data")}finally{p0&&J(!1)}}return rm(),()=>{p0=!1}},[l,t,i0,$o]);const y0=async p0=>{const rm=stripSyntheticId(p0.id),am=!!$t[rm];W(Wm=>({...Wm,cacheHits:Wm.cacheHits+(am?1:0),cacheMisses:Wm.cacheMisses+(am?0:1)}));const ym=await smartFetchData(t,p0,$t,i0);return jo(Wm=>({...Wm,[stripSyntheticId(p0.id)]:{...Wm[stripSyntheticId(p0.id)]||{},...ym.data}})),ym},kp=async p0=>{const rm=performance.now(),am=await y0(p0),ym=performance.now()-rm;W(Wm=>({...Wm,lastNodeFetchTime:ym.toFixed(2)+"ms"})),Ct(am),Y(Wm=>Wm.map(h0=>stripSyntheticId(h0.id)===stripSyntheticId(p0.id)?{...h0,data:{...h0.data,...am.data}}:h0))},u0=async p0=>{if(!k){J(!0);try{u(stripSyntheticId(p0.id))}finally{J(!1)}}},f0=async(p0,rm)=>{ae(am=>am.slice(0,rm+1)),u(stripSyntheticId(p0.id))},v0=reactExports.useCallback(p0=>{Mn(null),u(p0)},[u]);return jsxRuntimeExports.jsx("div",{ref:c,className:"ae:flex ae:flex-col ae:h-full",children:jsxRuntimeExports.jsxs(OverlayProvider,{ref:h,className:"ae:flex ae:flex-col ae:relative ae:h-full ae:min-h-[300px] ae:border ae:bg-slate-100",children:[jsxRuntimeExports.jsxs(Overlay,{active:Lp,onClose:()=>Mn(null),title:Lp==="groupsview"?"Find node":Lp==="typesview"?"Node Types":Lp==="helpview"?"Help":"",container:h.current,children:[Lp==="groupsview"&&jsxRuntimeExports.jsx(GroupsViewer,{restApiUrl:t,setRootNodeId:v0}),Lp==="helpview"&&jsxRuntimeExports.jsx(HelpViewer,{}),Lp==="debugview"&&jsxRuntimeExports.jsx(DebugViewer,{debugInfo:R})]}),jsxRuntimeExports.jsxs(PanelGroup,{direction:g?"horizontal":"vertical",className:"ae:flex-1 ae:min-h-0 ae:overflow-hidden",children:[jsxRuntimeExports.jsxs(Panel$1,{className:"ae:flex ae:flex-col ae:min-h-0 ae:relative",defaultSize:50,minSize:10,children:[k&&jsxRuntimeExports.jsx("div",{className:"ae:absolute ae:bottom-2 ae:right-2 ae:z-50",children:jsxRuntimeExports.jsx(Spinner,{})}),q&&jsxRuntimeExports.jsx("div",{className:"ae:absolute ae:bottom-2 ae:right-2 ae:z-50",children:jsxRuntimeExports.jsx(ErrorDisplay,{message:`Failed to find node UUID: ${l}`})}),jsxRuntimeExports.jsx(TopControls,{onFindNode:()=>Mn("groupsview"),onGetLinkCounts:async()=>{if(!(k||V.length===0)){J(!0);try{const p0=await fetchLinkCounts(t,V);Y(p0)}finally{J(!1)}}},onHelp:()=>Mn("helpview"),onDebug:()=>Mn("debugview"),onFullscreen:()=>toggleFullScreen(c.current),isLoading:k,disableGetCounts:V.length===0,debugMode:a,fullscreenToggle:o}),jsxRuntimeExports.jsx("div",{className:"ae:flex-1 ae:min-h-0",children:jsxRuntimeExports.jsx(FlowChart,{className:"ae:flex-1 ae:min-h-0",nodes:V,edges:ie,setNodes:Y,setEdges:se,selectedNode:st,onNodeSelect:kp,onNodeDoubleSelect:u0,onInit:p0=>{v.current=p0}})})]}),jsxRuntimeExports.jsx(PanelResizeHandle,{className:`ae:group ae:flex ae:items-center ae:justify-center ae:bg-slate-200 ${g?"ae:w-1.5 ae:cursor-col-resize ae:border-x":"ae:h-1.5 ae:cursor-row-resize ae:border-y"}`,children:jsxRuntimeExports.jsx("div",{className:`ae:bg-slate-700 ae:rounded ae:group-hover:scale-125 ${g?"ae:w-0.5 ae:h-6":"ae:w-6 ae:h-0.5"}`})}),jsxRuntimeExports.jsx(Panel$1,{className:"ae:flex-1 ae:flex ae:flex-col ae:min-h-0",children:jsxRuntimeExports.jsx(VisualiserPane,{restApiUrl:t,selectedNode:st,userData:$o,downloadFormats:i0})})]}),jsxRuntimeExports.jsx("div",{className:"ae:flex-none ae:overflow-x-auto",children:jsxRuntimeExports.jsx(Breadcrumbs,{trail:ct,onClick:f0,maxItems:sa})})]})})}const DEFAULT_REST_URL="https://aiida.materialscloud.org/2dtopo/api/v4";function App(){const[t,e]=useSearchParams(),r=t.get("api_url")??DEFAULT_REST_URL,n=t.get("uuid")??"",[a,o]=reactExports.useState(r);reactExports.useEffect(()=>{o(r)},[r]);const l=reactExports.useCallback(c=>{const h=new URLSearchParams(t);c?h.set("uuid",c):h.delete("uuid"),e(h,{replace:!0})},[t,e]),u=()=>{const c=new URLSearchParams(t);c.set("api_url",a.trim()||DEFAULT_REST_URL),c.delete("uuid"),e(c,{replace:!0})};return jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center h-screen space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2 w-[95vw]",children:[jsxRuntimeExports.jsx("label",{htmlFor:"aiida-rest-url",className:"text-gray-800 font-medium whitespace-nowrap",children:"AiiDA REST endpoint:"}),jsxRuntimeExports.jsx("input",{id:"aiida-rest-url",type:"text",value:a,onChange:c=>o(c.target.value),placeholder:"Enter AiiDA REST API URL",className:"flex-grow p-2 border border-gray-400",onKeyDown:c=>c.key==="Enter"&&u()}),jsxRuntimeExports.jsx("button",{onClick:u,className:"px-4 py-2 bg-blue-600 text-white hover:bg-blue-700 hover:cursor-pointer",children:"Load"})]}),jsxRuntimeExports.jsx("div",{className:"w-[95vw] h-[85vh] bg-amber-600",children:jsxRuntimeExports.jsx(AiidaExplorer,{restApiUrl:r,rootNode:n,onRootNodeChange:l})})]})}ReactDOM.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(React.StrictMode,{children:jsxRuntimeExports.jsx(BrowserRouter,{children:jsxRuntimeExports.jsx(App,{})})}));
