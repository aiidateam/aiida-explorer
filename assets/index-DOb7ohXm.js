function _mergeNamespaces(r,e){for(var t=0;t<e.length;t++){const a=e[t];if(typeof a!="string"&&!Array.isArray(a)){for(const s in a)if(s!=="default"&&!(s in r)){const o=Object.getOwnPropertyDescriptor(a,s);o&&Object.defineProperty(r,s,o.get?o:{enumerable:!0,get:()=>a[s]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const f of o.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&a(f)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();function getDefaultExportFromCjs(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var jsxRuntime$1={exports:{}},reactJsxRuntime_production$1={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactJsxRuntime_production$1;function requireReactJsxRuntime_production$1(){if(hasRequiredReactJsxRuntime_production$1)return reactJsxRuntime_production$1;hasRequiredReactJsxRuntime_production$1=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(a,s,o){var f=null;if(o!==void 0&&(f=""+o),s.key!==void 0&&(f=""+s.key),"key"in s){o={};for(var u in s)u!=="key"&&(o[u]=s[u])}else o=s;return s=o.ref,{$$typeof:r,type:a,key:f,ref:s!==void 0?s:null,props:o}}return reactJsxRuntime_production$1.Fragment=e,reactJsxRuntime_production$1.jsx=t,reactJsxRuntime_production$1.jsxs=t,reactJsxRuntime_production$1}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime$1.exports=requireReactJsxRuntime_production$1()),jsxRuntime$1.exports}var jsxRuntimeExports$1=requireJsxRuntime(),react={exports:{}},react_production={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReact_production;function requireReact_production(){if(hasRequiredReact_production)return react_production;hasRequiredReact_production=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),f=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),A=Symbol.iterator;function D(_e){return _e===null||typeof _e!="object"?null:(_e=A&&_e[A]||_e["@@iterator"],typeof _e=="function"?_e:null)}var I={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,l={};function c(_e,pr,_s){this.props=_e,this.context=pr,this.refs=l,this.updater=_s||I}c.prototype.isReactComponent={},c.prototype.setState=function(_e,pr){if(typeof _e!="object"&&typeof _e!="function"&&_e!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,_e,pr,"setState")},c.prototype.forceUpdate=function(_e){this.updater.enqueueForceUpdate(this,_e,"forceUpdate")};function L(){}L.prototype=c.prototype;function R(_e,pr,_s){this.props=_e,this.context=pr,this.refs=l,this.updater=_s||I}var F=R.prototype=new L;F.constructor=R,y(F,c.prototype),F.isPureReactComponent=!0;var $=Array.isArray;function b(){}var k={H:null,A:null,T:null,S:null},B=Object.prototype.hasOwnProperty;function J(_e,pr,_s){var Ei=_s.ref;return{$$typeof:r,type:_e,key:pr,ref:Ei!==void 0?Ei:null,props:_s}}function X(_e,pr){return J(_e.type,pr,_e.props)}function ae(_e){return typeof _e=="object"&&_e!==null&&_e.$$typeof===r}function He(_e){var pr={"=":"=0",":":"=2"};return"$"+_e.replace(/[=:]/g,function(_s){return pr[_s]})}var Pe=/\/+/g;function ue(_e,pr){return typeof _e=="object"&&_e!==null&&_e.key!=null?He(""+_e.key):pr.toString(36)}function Oe(_e){switch(_e.status){case"fulfilled":return _e.value;case"rejected":throw _e.reason;default:switch(typeof _e.status=="string"?_e.then(b,b):(_e.status="pending",_e.then(function(pr){_e.status==="pending"&&(_e.status="fulfilled",_e.value=pr)},function(pr){_e.status==="pending"&&(_e.status="rejected",_e.reason=pr)})),_e.status){case"fulfilled":return _e.value;case"rejected":throw _e.reason}}throw _e}function we(_e,pr,_s,Ei,Bl){var Wl=typeof _e;(Wl==="undefined"||Wl==="boolean")&&(_e=null);var Ep=!1;if(_e===null)Ep=!0;else switch(Wl){case"bigint":case"string":case"number":Ep=!0;break;case"object":switch(_e.$$typeof){case r:case e:Ep=!0;break;case m:return Ep=_e._init,we(Ep(_e._payload),pr,_s,Ei,Bl)}}if(Ep)return Bl=Bl(_e),Ep=Ei===""?"."+ue(_e,0):Ei,$(Bl)?(_s="",Ep!=null&&(_s=Ep.replace(Pe,"$&/")+"/"),we(Bl,pr,_s,"",function(R0){return R0})):Bl!=null&&(ae(Bl)&&(Bl=X(Bl,_s+(Bl.key==null||_e&&_e.key===Bl.key?"":(""+Bl.key).replace(Pe,"$&/")+"/")+Ep)),pr.push(Bl)),1;Ep=0;var Lp=Ei===""?".":Ei+":";if($(_e))for(var Op=0;Op<_e.length;Op++)Ei=_e[Op],Wl=Lp+ue(Ei,Op),Ep+=we(Ei,pr,_s,Wl,Bl);else if(Op=D(_e),typeof Op=="function")for(_e=Op.call(_e),Op=0;!(Ei=_e.next()).done;)Ei=Ei.value,Wl=Lp+ue(Ei,Op++),Ep+=we(Ei,pr,_s,Wl,Bl);else if(Wl==="object"){if(typeof _e.then=="function")return we(Oe(_e),pr,_s,Ei,Bl);throw pr=String(_e),Error("Objects are not valid as a React child (found: "+(pr==="[object Object]"?"object with keys {"+Object.keys(_e).join(", ")+"}":pr)+"). If you meant to render a collection of children, use an array instead.")}return Ep}function Ze(_e,pr,_s){if(_e==null)return _e;var Ei=[],Bl=0;return we(_e,Ei,"","",function(Wl){return pr.call(_s,Wl,Bl++)}),Ei}function it(_e){if(_e._status===-1){var pr=_e._result;pr=pr(),pr.then(function(_s){(_e._status===0||_e._status===-1)&&(_e._status=1,_e._result=_s)},function(_s){(_e._status===0||_e._status===-1)&&(_e._status=2,_e._result=_s)}),_e._status===-1&&(_e._status=0,_e._result=pr)}if(_e._status===1)return _e._result.default;throw _e._result}var lt=typeof reportError=="function"?reportError:function(_e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var pr=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof _e=="object"&&_e!==null&&typeof _e.message=="string"?String(_e.message):String(_e),error:_e});if(!window.dispatchEvent(pr))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",_e);return}console.error(_e)},Vt={map:Ze,forEach:function(_e,pr,_s){Ze(_e,function(){pr.apply(this,arguments)},_s)},count:function(_e){var pr=0;return Ze(_e,function(){pr++}),pr},toArray:function(_e){return Ze(_e,function(pr){return pr})||[]},only:function(_e){if(!ae(_e))throw Error("React.Children.only expected to receive a single React element child.");return _e}};return react_production.Activity=w,react_production.Children=Vt,react_production.Component=c,react_production.Fragment=t,react_production.Profiler=s,react_production.PureComponent=R,react_production.StrictMode=a,react_production.Suspense=h,react_production.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,react_production.__COMPILER_RUNTIME={__proto__:null,c:function(_e){return k.H.useMemoCache(_e)}},react_production.cache=function(_e){return function(){return _e.apply(null,arguments)}},react_production.cacheSignal=function(){return null},react_production.cloneElement=function(_e,pr,_s){if(_e==null)throw Error("The argument must be a React element, but you passed "+_e+".");var Ei=y({},_e.props),Bl=_e.key;if(pr!=null)for(Wl in pr.key!==void 0&&(Bl=""+pr.key),pr)!B.call(pr,Wl)||Wl==="key"||Wl==="__self"||Wl==="__source"||Wl==="ref"&&pr.ref===void 0||(Ei[Wl]=pr[Wl]);var Wl=arguments.length-2;if(Wl===1)Ei.children=_s;else if(1<Wl){for(var Ep=Array(Wl),Lp=0;Lp<Wl;Lp++)Ep[Lp]=arguments[Lp+2];Ei.children=Ep}return J(_e.type,Bl,Ei)},react_production.createContext=function(_e){return _e={$$typeof:f,_currentValue:_e,_currentValue2:_e,_threadCount:0,Provider:null,Consumer:null},_e.Provider=_e,_e.Consumer={$$typeof:o,_context:_e},_e},react_production.createElement=function(_e,pr,_s){var Ei,Bl={},Wl=null;if(pr!=null)for(Ei in pr.key!==void 0&&(Wl=""+pr.key),pr)B.call(pr,Ei)&&Ei!=="key"&&Ei!=="__self"&&Ei!=="__source"&&(Bl[Ei]=pr[Ei]);var Ep=arguments.length-2;if(Ep===1)Bl.children=_s;else if(1<Ep){for(var Lp=Array(Ep),Op=0;Op<Ep;Op++)Lp[Op]=arguments[Op+2];Bl.children=Lp}if(_e&&_e.defaultProps)for(Ei in Ep=_e.defaultProps,Ep)Bl[Ei]===void 0&&(Bl[Ei]=Ep[Ei]);return J(_e,Wl,Bl)},react_production.createRef=function(){return{current:null}},react_production.forwardRef=function(_e){return{$$typeof:u,render:_e}},react_production.isValidElement=ae,react_production.lazy=function(_e){return{$$typeof:m,_payload:{_status:-1,_result:_e},_init:it}},react_production.memo=function(_e,pr){return{$$typeof:x,type:_e,compare:pr===void 0?null:pr}},react_production.startTransition=function(_e){var pr=k.T,_s={};k.T=_s;try{var Ei=_e(),Bl=k.S;Bl!==null&&Bl(_s,Ei),typeof Ei=="object"&&Ei!==null&&typeof Ei.then=="function"&&Ei.then(b,lt)}catch(Wl){lt(Wl)}finally{pr!==null&&_s.types!==null&&(pr.types=_s.types),k.T=pr}},react_production.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},react_production.use=function(_e){return k.H.use(_e)},react_production.useActionState=function(_e,pr,_s){return k.H.useActionState(_e,pr,_s)},react_production.useCallback=function(_e,pr){return k.H.useCallback(_e,pr)},react_production.useContext=function(_e){return k.H.useContext(_e)},react_production.useDebugValue=function(){},react_production.useDeferredValue=function(_e,pr){return k.H.useDeferredValue(_e,pr)},react_production.useEffect=function(_e,pr){return k.H.useEffect(_e,pr)},react_production.useEffectEvent=function(_e){return k.H.useEffectEvent(_e)},react_production.useId=function(){return k.H.useId()},react_production.useImperativeHandle=function(_e,pr,_s){return k.H.useImperativeHandle(_e,pr,_s)},react_production.useInsertionEffect=function(_e,pr){return k.H.useInsertionEffect(_e,pr)},react_production.useLayoutEffect=function(_e,pr){return k.H.useLayoutEffect(_e,pr)},react_production.useMemo=function(_e,pr){return k.H.useMemo(_e,pr)},react_production.useOptimistic=function(_e,pr){return k.H.useOptimistic(_e,pr)},react_production.useReducer=function(_e,pr,_s){return k.H.useReducer(_e,pr,_s)},react_production.useRef=function(_e){return k.H.useRef(_e)},react_production.useState=function(_e){return k.H.useState(_e)},react_production.useSyncExternalStore=function(_e,pr,_s){return k.H.useSyncExternalStore(_e,pr,_s)},react_production.useTransition=function(){return k.H.useTransition()},react_production.version="19.2.0",react_production}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production()),react.exports}var reactExports=requireReact();const React=getDefaultExportFromCjs(reactExports),React$1=_mergeNamespaces({__proto__:null,default:React},[reactExports]);var client={exports:{}},reactDomClient_production={},scheduler={exports:{}},scheduler_production={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production;function requireScheduler_production(){return hasRequiredScheduler_production||(hasRequiredScheduler_production=1,(function(r){function e(we,Ze){var it=we.length;we.push(Ze);e:for(;0<it;){var lt=it-1>>>1,Vt=we[lt];if(0<s(Vt,Ze))we[lt]=Ze,we[it]=Vt,it=lt;else break e}}function t(we){return we.length===0?null:we[0]}function a(we){if(we.length===0)return null;var Ze=we[0],it=we.pop();if(it!==Ze){we[0]=it;e:for(var lt=0,Vt=we.length,_e=Vt>>>1;lt<_e;){var pr=2*(lt+1)-1,_s=we[pr],Ei=pr+1,Bl=we[Ei];if(0>s(_s,it))Ei<Vt&&0>s(Bl,_s)?(we[lt]=Bl,we[Ei]=it,lt=Ei):(we[lt]=_s,we[pr]=it,lt=pr);else if(Ei<Vt&&0>s(Bl,it))we[lt]=Bl,we[Ei]=it,lt=Ei;else break e}}return Ze}function s(we,Ze){var it=we.sortIndex-Ze.sortIndex;return it!==0?it:we.id-Ze.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;r.unstable_now=function(){return o.now()}}else{var f=Date,u=f.now();r.unstable_now=function(){return f.now()-u}}var h=[],x=[],m=1,w=null,A=3,D=!1,I=!1,y=!1,l=!1,c=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function F(we){for(var Ze=t(x);Ze!==null;){if(Ze.callback===null)a(x);else if(Ze.startTime<=we)a(x),Ze.sortIndex=Ze.expirationTime,e(h,Ze);else break;Ze=t(x)}}function $(we){if(y=!1,F(we),!I)if(t(h)!==null)I=!0,b||(b=!0,He());else{var Ze=t(x);Ze!==null&&Oe($,Ze.startTime-we)}}var b=!1,k=-1,B=5,J=-1;function X(){return l?!0:!(r.unstable_now()-J<B)}function ae(){if(l=!1,b){var we=r.unstable_now();J=we;var Ze=!0;try{e:{I=!1,y&&(y=!1,L(k),k=-1),D=!0;var it=A;try{t:{for(F(we),w=t(h);w!==null&&!(w.expirationTime>we&&X());){var lt=w.callback;if(typeof lt=="function"){w.callback=null,A=w.priorityLevel;var Vt=lt(w.expirationTime<=we);if(we=r.unstable_now(),typeof Vt=="function"){w.callback=Vt,F(we),Ze=!0;break t}w===t(h)&&a(h),F(we)}else a(h);w=t(h)}if(w!==null)Ze=!0;else{var _e=t(x);_e!==null&&Oe($,_e.startTime-we),Ze=!1}}break e}finally{w=null,A=it,D=!1}Ze=void 0}}finally{Ze?He():b=!1}}}var He;if(typeof R=="function")He=function(){R(ae)};else if(typeof MessageChannel<"u"){var Pe=new MessageChannel,ue=Pe.port2;Pe.port1.onmessage=ae,He=function(){ue.postMessage(null)}}else He=function(){c(ae,0)};function Oe(we,Ze){k=c(function(){we(r.unstable_now())},Ze)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(we){we.callback=null},r.unstable_forceFrameRate=function(we){0>we||125<we?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<we?Math.floor(1e3/we):5},r.unstable_getCurrentPriorityLevel=function(){return A},r.unstable_next=function(we){switch(A){case 1:case 2:case 3:var Ze=3;break;default:Ze=A}var it=A;A=Ze;try{return we()}finally{A=it}},r.unstable_requestPaint=function(){l=!0},r.unstable_runWithPriority=function(we,Ze){switch(we){case 1:case 2:case 3:case 4:case 5:break;default:we=3}var it=A;A=we;try{return Ze()}finally{A=it}},r.unstable_scheduleCallback=function(we,Ze,it){var lt=r.unstable_now();switch(typeof it=="object"&&it!==null?(it=it.delay,it=typeof it=="number"&&0<it?lt+it:lt):it=lt,we){case 1:var Vt=-1;break;case 2:Vt=250;break;case 5:Vt=1073741823;break;case 4:Vt=1e4;break;default:Vt=5e3}return Vt=it+Vt,we={id:m++,callback:Ze,priorityLevel:we,startTime:it,expirationTime:Vt,sortIndex:-1},it>lt?(we.sortIndex=it,e(x,we),t(h)===null&&we===t(x)&&(y?(L(k),k=-1):y=!0,Oe($,it-lt))):(we.sortIndex=Vt,e(h,we),I||D||(I=!0,b||(b=!0,He()))),we},r.unstable_shouldYield=X,r.unstable_wrapCallback=function(we){var Ze=A;return function(){var it=A;A=Ze;try{return we.apply(this,arguments)}finally{A=it}}}})(scheduler_production)),scheduler_production}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production()),scheduler.exports}var reactDom={exports:{}},reactDom_production={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDom_production;function requireReactDom_production(){if(hasRequiredReactDom_production)return reactDom_production;hasRequiredReactDom_production=1;var r=requireReact();function e(h){var x="https://react.dev/errors/"+h;if(1<arguments.length){x+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)x+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+h+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var a={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function o(h,x,m){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:w==null?null:""+w,children:h,containerInfo:x,implementation:m}}var f=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(h,x){if(h==="font")return"";if(typeof x=="string")return x==="use-credentials"?x:""}return reactDom_production.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,reactDom_production.createPortal=function(h,x){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!x||x.nodeType!==1&&x.nodeType!==9&&x.nodeType!==11)throw Error(e(299));return o(h,x,null,m)},reactDom_production.flushSync=function(h){var x=f.T,m=a.p;try{if(f.T=null,a.p=2,h)return h()}finally{f.T=x,a.p=m,a.d.f()}},reactDom_production.preconnect=function(h,x){typeof h=="string"&&(x?(x=x.crossOrigin,x=typeof x=="string"?x==="use-credentials"?x:"":void 0):x=null,a.d.C(h,x))},reactDom_production.prefetchDNS=function(h){typeof h=="string"&&a.d.D(h)},reactDom_production.preinit=function(h,x){if(typeof h=="string"&&x&&typeof x.as=="string"){var m=x.as,w=u(m,x.crossOrigin),A=typeof x.integrity=="string"?x.integrity:void 0,D=typeof x.fetchPriority=="string"?x.fetchPriority:void 0;m==="style"?a.d.S(h,typeof x.precedence=="string"?x.precedence:void 0,{crossOrigin:w,integrity:A,fetchPriority:D}):m==="script"&&a.d.X(h,{crossOrigin:w,integrity:A,fetchPriority:D,nonce:typeof x.nonce=="string"?x.nonce:void 0})}},reactDom_production.preinitModule=function(h,x){if(typeof h=="string")if(typeof x=="object"&&x!==null){if(x.as==null||x.as==="script"){var m=u(x.as,x.crossOrigin);a.d.M(h,{crossOrigin:m,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0})}}else x==null&&a.d.M(h)},reactDom_production.preload=function(h,x){if(typeof h=="string"&&typeof x=="object"&&x!==null&&typeof x.as=="string"){var m=x.as,w=u(m,x.crossOrigin);a.d.L(h,m,{crossOrigin:w,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0,type:typeof x.type=="string"?x.type:void 0,fetchPriority:typeof x.fetchPriority=="string"?x.fetchPriority:void 0,referrerPolicy:typeof x.referrerPolicy=="string"?x.referrerPolicy:void 0,imageSrcSet:typeof x.imageSrcSet=="string"?x.imageSrcSet:void 0,imageSizes:typeof x.imageSizes=="string"?x.imageSizes:void 0,media:typeof x.media=="string"?x.media:void 0})}},reactDom_production.preloadModule=function(h,x){if(typeof h=="string")if(x){var m=u(x.as,x.crossOrigin);a.d.m(h,{as:typeof x.as=="string"&&x.as!=="script"?x.as:void 0,crossOrigin:m,integrity:typeof x.integrity=="string"?x.integrity:void 0})}else a.d.m(h)},reactDom_production.requestFormReset=function(h){a.d.r(h)},reactDom_production.unstable_batchedUpdates=function(h,x){return h(x)},reactDom_production.useFormState=function(h,x,m){return f.H.useFormState(h,x,m)},reactDom_production.useFormStatus=function(){return f.H.useHostTransitionStatus()},reactDom_production.version="19.2.0",reactDom_production}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),reactDom.exports=requireReactDom_production(),reactDom.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDomClient_production;function requireReactDomClient_production(){if(hasRequiredReactDomClient_production)return reactDomClient_production;hasRequiredReactDomClient_production=1;var r=requireScheduler(),e=requireReact(),t=requireReactDom();function a(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)i+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function o(n){var i=n,d=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(d=i.return),n=i.return;while(n)}return i.tag===3?d:null}function f(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function u(n){if(n.tag===31){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function h(n){if(o(n)!==n)throw Error(a(188))}function x(n){var i=n.alternate;if(!i){if(i=o(n),i===null)throw Error(a(188));return i!==n?null:n}for(var d=n,O=i;;){var le=d.return;if(le===null)break;var Ee=le.alternate;if(Ee===null){if(O=le.return,O!==null){d=O;continue}break}if(le.child===Ee.child){for(Ee=le.child;Ee;){if(Ee===d)return h(le),n;if(Ee===O)return h(le),i;Ee=Ee.sibling}throw Error(a(188))}if(d.return!==O.return)d=le,O=Ee;else{for(var ms=!1,Hl=le.child;Hl;){if(Hl===d){ms=!0,d=le,O=Ee;break}if(Hl===O){ms=!0,O=le,d=Ee;break}Hl=Hl.sibling}if(!ms){for(Hl=Ee.child;Hl;){if(Hl===d){ms=!0,d=Ee,O=le;break}if(Hl===O){ms=!0,O=Ee,d=le;break}Hl=Hl.sibling}if(!ms)throw Error(a(189))}}if(d.alternate!==O)throw Error(a(190))}if(d.tag!==3)throw Error(a(188));return d.stateNode.current===d?n:i}function m(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=m(n),i!==null)return i;n=n.sibling}return null}var w=Object.assign,A=Symbol.for("react.element"),D=Symbol.for("react.transitional.element"),I=Symbol.for("react.portal"),y=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),L=Symbol.for("react.consumer"),R=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),$=Symbol.for("react.suspense"),b=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),B=Symbol.for("react.lazy"),J=Symbol.for("react.activity"),X=Symbol.for("react.memo_cache_sentinel"),ae=Symbol.iterator;function He(n){return n===null||typeof n!="object"?null:(n=ae&&n[ae]||n["@@iterator"],typeof n=="function"?n:null)}var Pe=Symbol.for("react.client.reference");function ue(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===Pe?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case y:return"Fragment";case c:return"Profiler";case l:return"StrictMode";case $:return"Suspense";case b:return"SuspenseList";case J:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case I:return"Portal";case R:return n.displayName||"Context";case L:return(n._context.displayName||"Context")+".Consumer";case F:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case k:return i=n.displayName||null,i!==null?i:ue(n.type)||"Memo";case B:i=n._payload,n=n._init;try{return ue(n(i))}catch{}}return null}var Oe=Array.isArray,we=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ze=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,it={pending:!1,data:null,method:null,action:null},lt=[],Vt=-1;function _e(n){return{current:n}}function pr(n){0>Vt||(n.current=lt[Vt],lt[Vt]=null,Vt--)}function _s(n,i){Vt++,lt[Vt]=n.current,n.current=i}var Ei=_e(null),Bl=_e(null),Wl=_e(null),Ep=_e(null);function Lp(n,i){switch(_s(Wl,i),_s(Bl,n),_s(Ei,null),i.nodeType){case 9:case 11:n=(n=i.documentElement)&&(n=n.namespaceURI)?D3(n):0;break;default:if(n=i.tagName,i=i.namespaceURI)i=D3(i),n=k3(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}pr(Ei),_s(Ei,n)}function Op(){pr(Ei),pr(Bl),pr(Wl)}function R0(n){n.memoizedState!==null&&_s(Ep,n);var i=Ei.current,d=k3(i,n.type);i!==d&&(_s(Bl,n),_s(Ei,d))}function N0(n){Bl.current===n&&(pr(Ei),pr(Bl)),Ep.current===n&&(pr(Ep),F_._currentValue=it)}var Qp,O0;function zp(n){if(Qp===void 0)try{throw Error()}catch(d){var i=d.stack.trim().match(/\n( *(at )?)/);Qp=i&&i[1]||"",O0=-1<d.stack.indexOf(`
    at`)?" (<anonymous>)":-1<d.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Qp+n+O0}var M0=!1;function W0(n,i){if(!n||M0)return"";M0=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var O={DetermineComponentFrameRoot:function(){try{if(i){var _m=function(){throw Error()};if(Object.defineProperty(_m.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(_m,[])}catch(Q0){var T0=Q0}Reflect.construct(n,[],_m)}else{try{_m.call()}catch(Q0){T0=Q0}n.call(_m.prototype)}}else{try{throw Error()}catch(Q0){T0=Q0}(_m=n())&&typeof _m.catch=="function"&&_m.catch(function(){})}}catch(Q0){if(Q0&&T0&&typeof Q0.stack=="string")return[Q0.stack,T0.stack]}return[null,null]}};O.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var le=Object.getOwnPropertyDescriptor(O.DetermineComponentFrameRoot,"name");le&&le.configurable&&Object.defineProperty(O.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var Ee=O.DetermineComponentFrameRoot(),ms=Ee[0],Hl=Ee[1];if(ms&&Hl){var f0=ms.split(`
`),Z0=Hl.split(`
`);for(le=O=0;O<f0.length&&!f0[O].includes("DetermineComponentFrameRoot");)O++;for(;le<Z0.length&&!Z0[le].includes("DetermineComponentFrameRoot");)le++;if(O===f0.length||le===Z0.length)for(O=f0.length-1,le=Z0.length-1;1<=O&&0<=le&&f0[O]!==Z0[le];)le--;for(;1<=O&&0<=le;O--,le--)if(f0[O]!==Z0[le]){if(O!==1||le!==1)do if(O--,le--,0>le||f0[O]!==Z0[le]){var ym=`
`+f0[O].replace(" at new "," at ");return n.displayName&&ym.includes("<anonymous>")&&(ym=ym.replace("<anonymous>",n.displayName)),ym}while(1<=O&&0<=le);break}}}finally{M0=!1,Error.prepareStackTrace=d}return(d=n?n.displayName||n.name:"")?zp(d):""}function im(n,i){switch(n.tag){case 26:case 27:case 5:return zp(n.type);case 16:return zp("Lazy");case 13:return n.child!==i&&i!==null?zp("Suspense Fallback"):zp("Suspense");case 19:return zp("SuspenseList");case 0:case 15:return W0(n.type,!1);case 11:return W0(n.type.render,!1);case 1:return W0(n.type,!0);case 31:return zp("Activity");default:return""}}function F0(n){try{var i="",d=null;do i+=im(n,d),d=n,n=n.return;while(n);return i}catch(O){return`
Error generating stack: `+O.message+`
`+O.stack}}var fm=Object.prototype.hasOwnProperty,cm=r.unstable_scheduleCallback,Ap=r.unstable_cancelCallback,Io=r.unstable_shouldYield,p0=r.unstable_requestPaint,a0=r.unstable_now,rm=r.unstable_getCurrentPriorityLevel,X0=r.unstable_ImmediatePriority,Nl=r.unstable_UserBlockingPriority,Gl=r.unstable_NormalPriority,Mp=r.unstable_LowPriority,_0=r.unstable_IdlePriority,v0=r.log,z0=r.unstable_setDisableYieldValue,sm=null,Uo=null;function u0(n){if(typeof v0=="function"&&z0(n),Uo&&typeof Uo.setStrictMode=="function")try{Uo.setStrictMode(sm,n)}catch{}}var x0=Math.clz32?Math.clz32:L0,Xl=Math.log,Bp=Math.LN2;function L0(n){return n>>>=0,n===0?32:31-(Xl(n)/Bp|0)|0}var kl=256,Np=262144,V0=4194304;function Ke(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function g0(n,i,d){var O=n.pendingLanes;if(O===0)return 0;var le=0,Ee=n.suspendedLanes,ms=n.pingedLanes;n=n.warmLanes;var Hl=O&134217727;return Hl!==0?(O=Hl&~Ee,O!==0?le=Ke(O):(ms&=Hl,ms!==0?le=Ke(ms):d||(d=Hl&~n,d!==0&&(le=Ke(d))))):(Hl=O&~Ee,Hl!==0?le=Ke(Hl):ms!==0?le=Ke(ms):d||(d=O&~n,d!==0&&(le=Ke(d)))),le===0?0:i!==0&&i!==le&&(i&Ee)===0&&(Ee=le&-le,d=i&-i,Ee>=d||Ee===32&&(d&4194048)!==0)?i:le}function d0(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function Vl(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jp(){var n=V0;return V0<<=1,(V0&62914560)===0&&(V0=4194304),n}function K0(n){for(var i=[],d=0;31>d;d++)i.push(n);return i}function Pm(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Cm(n,i,d,O,le,Ee){var ms=n.pendingLanes;n.pendingLanes=d,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=d,n.entangledLanes&=d,n.errorRecoveryDisabledLanes&=d,n.shellSuspendCounter=0;var Hl=n.entanglements,f0=n.expirationTimes,Z0=n.hiddenUpdates;for(d=ms&~d;0<d;){var ym=31-x0(d),_m=1<<ym;Hl[ym]=0,f0[ym]=-1;var T0=Z0[ym];if(T0!==null)for(Z0[ym]=null,ym=0;ym<T0.length;ym++){var Q0=T0[ym];Q0!==null&&(Q0.lane&=-536870913)}d&=~_m}O!==0&&Fm(n,O,0),Ee!==0&&le===0&&n.tag!==0&&(n.suspendedLanes|=Ee&~(ms&~i))}function Fm(n,i,d){n.pendingLanes|=i,n.suspendedLanes&=~i;var O=31-x0(i);n.entangledLanes|=i,n.entanglements[O]=n.entanglements[O]|1073741824|d&261930}function ev(n,i){var d=n.entangledLanes|=i;for(n=n.entanglements;d;){var O=31-x0(d),le=1<<O;le&i|n[O]&i&&(n[O]|=i),d&=~le}}function h1(n,i){var d=i&-i;return d=(d&42)!==0?1:xv(d),(d&(n.suspendedLanes|i))!==0?0:d}function xv(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function gv(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function zv(){var n=Ze.p;return n!==0?n:(n=window.event,n===void 0?32:G5(n.type))}function a1(n,i){var d=Ze.p;try{return Ze.p=n,i()}finally{Ze.p=d}}var Jv=Math.random().toString(36).slice(2),d1="__reactFiber$"+Jv,A1="__reactProps$"+Jv,Zv="__reactContainer$"+Jv,u1="__reactEvents$"+Jv,Yp="__reactListeners$"+Jv,nm="__reactHandles$"+Jv,dm="__reactResources$"+Jv,o0="__reactMarker$"+Jv;function pm(n){delete n[d1],delete n[A1],delete n[u1],delete n[Yp],delete n[nm]}function jm(n){var i=n[d1];if(i)return i;for(var d=n.parentNode;d;){if(i=d[Zv]||d[d1]){if(d=i.alternate,i.child!==null||d!==null&&d.child!==null)for(n=H3(n);n!==null;){if(d=n[d1])return d;n=H3(n)}return i}n=d,d=n.parentNode}return null}function iv(n){if(n=n[d1]||n[Zv]){var i=n.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return n}return null}function ov(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(a(33))}function dv(n){var i=n[dm];return i||(i=n[dm]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function cv(n){n[o0]=!0}var Cv=new Set,Lv={};function Vm(n,i){wv(n,i),wv(n+"Capture",i)}function wv(n,i){for(Lv[n]=i,n=0;n<i.length;n++)Cv.add(i[n])}var Ov=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),X1={},n1={};function Rv(n){return fm.call(n1,n)?!0:fm.call(X1,n)?!1:Ov.test(n)?n1[n]=!0:(X1[n]=!0,!1)}function Kg(n,i,d){if(Rv(i))if(d===null)n.removeAttribute(i);else{switch(typeof d){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var O=i.toLowerCase().slice(0,5);if(O!=="data-"&&O!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+d)}}function p1(n,i,d){if(d===null)n.removeAttribute(i);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+d)}}function P1(n,i,d,O){if(O===null)n.removeAttribute(d);else{switch(typeof O){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(d);return}n.setAttributeNS(i,d,""+O)}}function f1(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function v1(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Q1(n,i,d){var O=Object.getOwnPropertyDescriptor(n.constructor.prototype,i);if(!n.hasOwnProperty(i)&&typeof O<"u"&&typeof O.get=="function"&&typeof O.set=="function"){var le=O.get,Ee=O.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return le.call(this)},set:function(ms){d=""+ms,Ee.call(this,ms)}}),Object.defineProperty(n,i,{enumerable:O.enumerable}),{getValue:function(){return d},setValue:function(ms){d=""+ms},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function Kv(n){if(!n._valueTracker){var i=v1(n)?"checked":"value";n._valueTracker=Q1(n,i,""+n[i])}}function O1(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var d=i.getValue(),O="";return n&&(O=v1(n)?n.checked?"true":"false":n.value),n=O,n!==d?(i.setValue(n),!0):!1}function hg(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var j1=/[\n"\\]/g;function og(n){return n.replace(j1,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Ng(n,i,d,O,le,Ee,ms,Hl){n.name="",ms!=null&&typeof ms!="function"&&typeof ms!="symbol"&&typeof ms!="boolean"?n.type=ms:n.removeAttribute("type"),i!=null?ms==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+f1(i)):n.value!==""+f1(i)&&(n.value=""+f1(i)):ms!=="submit"&&ms!=="reset"||n.removeAttribute("value"),i!=null?Hg(n,ms,f1(i)):d!=null?Hg(n,ms,f1(d)):O!=null&&n.removeAttribute("value"),le==null&&Ee!=null&&(n.defaultChecked=!!Ee),le!=null&&(n.checked=le&&typeof le!="function"&&typeof le!="symbol"),Hl!=null&&typeof Hl!="function"&&typeof Hl!="symbol"&&typeof Hl!="boolean"?n.name=""+f1(Hl):n.removeAttribute("name")}function Gy(n,i,d,O,le,Ee,ms,Hl){if(Ee!=null&&typeof Ee!="function"&&typeof Ee!="symbol"&&typeof Ee!="boolean"&&(n.type=Ee),i!=null||d!=null){if(!(Ee!=="submit"&&Ee!=="reset"||i!=null)){Kv(n);return}d=d!=null?""+f1(d):"",i=i!=null?""+f1(i):d,Hl||i===n.value||(n.value=i),n.defaultValue=i}O=O??le,O=typeof O!="function"&&typeof O!="symbol"&&!!O,n.checked=Hl?n.checked:!!O,n.defaultChecked=!!O,ms!=null&&typeof ms!="function"&&typeof ms!="symbol"&&typeof ms!="boolean"&&(n.name=ms),Kv(n)}function Hg(n,i,d){i==="number"&&hg(n.ownerDocument)===n||n.defaultValue===""+d||(n.defaultValue=""+d)}function Vy(n,i,d,O){if(n=n.options,i){i={};for(var le=0;le<d.length;le++)i["$"+d[le]]=!0;for(d=0;d<n.length;d++)le=i.hasOwnProperty("$"+n[d].value),n[d].selected!==le&&(n[d].selected=le),le&&O&&(n[d].defaultSelected=!0)}else{for(d=""+f1(d),i=null,le=0;le<n.length;le++){if(n[le].value===d){n[le].selected=!0,O&&(n[le].defaultSelected=!0);return}i!==null||n[le].disabled||(i=n[le])}i!==null&&(i.selected=!0)}}function Jg(n,i,d){if(i!=null&&(i=""+f1(i),i!==n.value&&(n.value=i),d==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=d!=null?""+f1(d):""}function U1(n,i,d,O){if(i==null){if(O!=null){if(d!=null)throw Error(a(92));if(Oe(O)){if(1<O.length)throw Error(a(93));O=O[0]}d=O}d==null&&(d=""),i=d}d=f1(i),n.defaultValue=d,O=n.textContent,O===d&&O!==""&&O!==null&&(n.value=O),Kv(n)}function eg(n,i){if(i){var d=n.firstChild;if(d&&d===n.lastChild&&d.nodeType===3){d.nodeValue=i;return}}n.textContent=i}var o1=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function qy(n,i,d){var O=i.indexOf("--")===0;d==null||typeof d=="boolean"||d===""?O?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":O?n.setProperty(i,d):typeof d!="number"||d===0||o1.has(i)?i==="float"?n.cssFloat=d:n[i]=(""+d).trim():n[i]=d+"px"}function Ey(n,i,d){if(i!=null&&typeof i!="object")throw Error(a(62));if(n=n.style,d!=null){for(var O in d)!d.hasOwnProperty(O)||i!=null&&i.hasOwnProperty(O)||(O.indexOf("--")===0?n.setProperty(O,""):O==="float"?n.cssFloat="":n[O]="");for(var le in i)O=i[le],i.hasOwnProperty(le)&&d[le]!==O&&qy(n,le,O)}else for(var Ee in i)i.hasOwnProperty(Ee)&&qy(n,Ee,i[Ee])}function v2(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var u_=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),g2=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Wy(n){return g2.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function D1(){}var Q2=null;function jg(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var dg=null,Qg=null;function t1(n){var i=iv(n);if(i&&(n=i.stateNode)){var d=n[A1]||null;e:switch(n=i.stateNode,i.type){case"input":if(Ng(n,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name),i=d.name,d.type==="radio"&&i!=null){for(d=n;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll('input[name="'+og(""+i)+'"][type="radio"]'),i=0;i<d.length;i++){var O=d[i];if(O!==n&&O.form===n.form){var le=O[A1]||null;if(!le)throw Error(a(90));Ng(O,le.value,le.defaultValue,le.defaultValue,le.checked,le.defaultChecked,le.type,le.name)}}for(i=0;i<d.length;i++)O=d[i],O.form===n.form&&O1(O)}break e;case"textarea":Jg(n,d.value,d.defaultValue);break e;case"select":i=d.value,i!=null&&Vy(n,!!d.multiple,i,!1)}}}var f_=!1;function Ay(n,i,d){if(f_)return n(i,d);f_=!0;try{var O=n(i);return O}finally{if(f_=!1,(dg!==null||Qg!==null)&&(xb(),dg&&(i=dg,n=Qg,Qg=dg=null,t1(i),n)))for(i=0;i<n.length;i++)t1(n[i])}}function Yy(n,i){var d=n.stateNode;if(d===null)return null;var O=d[A1]||null;if(O===null)return null;d=O[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(O=!O.disabled)||(n=n.type,O=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!O;break e;default:n=!1}if(n)return null;if(d&&typeof d!="function")throw Error(a(231,i,typeof d));return d}var Cg=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g1=!1;if(Cg)try{var h_={};Object.defineProperty(h_,"passive",{get:function(){g1=!0}}),window.addEventListener("test",h_,h_),window.removeEventListener("test",h_,h_)}catch{g1=!1}var cy=null,ex=null,V_=null;function Xx(){if(V_)return V_;var n,i=ex,d=i.length,O,le="value"in cy?cy.value:cy.textContent,Ee=le.length;for(n=0;n<d&&i[n]===le[n];n++);var ms=d-n;for(O=1;O<=ms&&i[d-O]===le[Ee-O];O++);return V_=le.slice(n,1<O?1-O:void 0)}function y2(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function _2(){return!0}function Gg(){return!1}function $1(n){function i(d,O,le,Ee,ms){this._reactName=d,this._targetInst=le,this.type=O,this.nativeEvent=Ee,this.target=ms,this.currentTarget=null;for(var Hl in n)n.hasOwnProperty(Hl)&&(d=n[Hl],this[Hl]=d?d(Ee):Ee[Hl]);return this.isDefaultPrevented=(Ee.defaultPrevented!=null?Ee.defaultPrevented:Ee.returnValue===!1)?_2:Gg,this.isPropagationStopped=Gg,this}return w(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=_2)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=_2)},persist:function(){},isPersistent:_2}),i}var Xy={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},q_=$1(Xy),$y=w({},Xy,{view:0,detail:0}),$x=$1($y),tx,Cy,W_,d_=w({},$y,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:X_,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==W_&&(W_&&n.type==="mousemove"?(tx=n.screenX-W_.screenX,Cy=n.screenY-W_.screenY):Cy=tx=0,W_=n),tx)},movementY:function(n){return"movementY"in n?n.movementY:Cy}}),Zx=$1(d_),p_=w({},d_,{dataTransfer:0}),rx=$1(p_),m_=w({},$y,{relatedTarget:0}),x2=$1(m_),ax=w({},Xy,{animationName:0,elapsedTime:0,pseudoElement:0}),Xb=$1(ax),$b=w({},Xy,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),v_=$1($b),Zb=w({},Xy,{data:0}),nx=$1(Zb),Kx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},uy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Y_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ix(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=Y_[n])?!!i[n]:!1}function X_(){return ix}var g_=w({},$y,{key:function(n){if(n.key){var i=Kx[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=y2(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?uy[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:X_,charCode:function(n){return n.type==="keypress"?y2(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?y2(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),sx=$1(g_),Zy=w({},d_,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),b2=$1(Zy),Jx=w({},$y,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:X_}),Ry=$1(Jx),fy=w({},Xy,{propertyName:0,elapsedTime:0,pseudoElement:0}),Qx=$1(fy),ox=w({},d_,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),lx=$1(ox),eb=w({},Xy,{newState:0,oldState:0}),tb=$1(eb),rb=[9,13,27,32],cx=Cg&&"CompositionEvent"in window,Ly=null;Cg&&"documentMode"in document&&(Ly=document.documentMode);var Kb=Cg&&"TextEvent"in window&&!Ly,ux=Cg&&(!cx||Ly&&8<Ly&&11>=Ly),Dy=" ",y_=!1;function $_(n,i){switch(n){case"keyup":return rb.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function w2(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var ky=!1;function ab(n,i){switch(n){case"compositionend":return w2(i);case"keypress":return i.which!==32?null:(y_=!0,Dy);case"textInput":return n=i.data,n===Dy&&y_?null:n;default:return null}}function Jb(n,i){if(ky)return n==="compositionend"||!cx&&$_(n,i)?(n=Xx(),V_=ex=cy=null,ky=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return ux&&i.locale!=="ko"?null:i.data;default:return null}}var Qb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function nb(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!Qb[n.type]:i==="textarea"}function ib(n,i,d,O){dg?Qg?Qg.push(O):Qg=[O]:dg=O,i=Cb(i,"onChange"),0<i.length&&(d=new q_("onChange","change",null,d,O),n.push({event:d,listeners:i}))}var hy=null,Z_=null;function sb(n){S3(n,0)}function __(n){var i=ov(n);if(O1(i))return n}function fx(n,i){if(n==="change")return i}var ob=!1;if(Cg){var Ky;if(Cg){var zg="oninput"in document;if(!zg){var x_=document.createElement("div");x_.setAttribute("oninput","return;"),zg=typeof x_.oninput=="function"}Ky=zg}else Ky=!1;ob=Ky&&(!document.documentMode||9<document.documentMode)}function M2(){hy&&(hy.detachEvent("onpropertychange",Pg),Z_=hy=null)}function Pg(n){if(n.propertyName==="value"&&__(Z_)){var i=[];ib(i,Z_,n,jg(n)),Ay(sb,i)}}function Jy(n,i,d){n==="focusin"?(M2(),hy=i,Z_=d,hy.attachEvent("onpropertychange",Pg)):n==="focusout"&&M2()}function hx(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return __(Z_)}function e3(n,i){if(n==="click")return __(i)}function lb(n,i){if(n==="input"||n==="change")return __(i)}function Qy(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var ng=typeof Object.is=="function"?Object.is:Qy;function b_(n,i){if(ng(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var d=Object.keys(n),O=Object.keys(i);if(d.length!==O.length)return!1;for(O=0;O<d.length;O++){var le=d[O];if(!fm.call(i,le)||!ng(n[le],i[le]))return!1}return!0}function S2(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function dx(n,i){var d=S2(n);n=0;for(var O;d;){if(d.nodeType===3){if(O=n+d.textContent.length,n<=i&&O>=i)return{node:d,offset:i-n};n=O}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=S2(d)}}function px(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?px(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function mx(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=hg(n.document);i instanceof n.HTMLIFrameElement;){try{var d=typeof i.contentWindow.location.href=="string"}catch{d=!1}if(d)n=i.contentWindow;else break;i=hg(n.document)}return i}function K_(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}var e_=Cg&&"documentMode"in document&&11>=document.documentMode,dy=null,Ny=null,wg=null,J_=!1;function vx(n,i,d){var O=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;J_||dy==null||dy!==hg(O)||(O=dy,"selectionStart"in O&&K_(O)?O={start:O.selectionStart,end:O.selectionEnd}:(O=(O.ownerDocument&&O.ownerDocument.defaultView||window).getSelection(),O={anchorNode:O.anchorNode,anchorOffset:O.anchorOffset,focusNode:O.focusNode,focusOffset:O.focusOffset}),wg&&b_(wg,O)||(wg=O,O=Cb(Ny,"onSelect"),0<O.length&&(i=new q_("onSelect","select",null,i,d),n.push({event:i,listeners:O}),i.target=dy)))}function ey(n,i){var d={};return d[n.toLowerCase()]=i.toLowerCase(),d["Webkit"+n]="webkit"+i,d["Moz"+n]="moz"+i,d}var t_={animationend:ey("Animation","AnimationEnd"),animationiteration:ey("Animation","AnimationIteration"),animationstart:ey("Animation","AnimationStart"),transitionrun:ey("Transition","TransitionRun"),transitionstart:ey("Transition","TransitionStart"),transitioncancel:ey("Transition","TransitionCancel"),transitionend:ey("Transition","TransitionEnd")},T2={},E2={};Cg&&(E2=document.createElement("div").style,"AnimationEvent"in window||(delete t_.animationend.animation,delete t_.animationiteration.animation,delete t_.animationstart.animation),"TransitionEvent"in window||delete t_.transitionend.transition);function py(n){if(T2[n])return T2[n];if(!t_[n])return n;var i=t_[n],d;for(d in i)if(i.hasOwnProperty(d)&&d in E2)return T2[n]=i[d];return n}var Q_=py("animationend"),e2=py("animationiteration"),gx=py("animationstart"),cb=py("transitionrun"),ub=py("transitionstart"),fb=py("transitioncancel"),yx=py("transitionend"),t2=new Map,A2="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");A2.push("scrollEnd");function Og(n,i){t2.set(n,i),Vm(i,[n])}var x1=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},Rg=[],zy=0,C2=0;function r2(){for(var n=zy,i=C2=zy=0;i<n;){var d=Rg[i];Rg[i++]=null;var O=Rg[i];Rg[i++]=null;var le=Rg[i];Rg[i++]=null;var Ee=Rg[i];if(Rg[i++]=null,O!==null&&le!==null){var ms=O.pending;ms===null?le.next=le:(le.next=ms.next,ms.next=le),O.pending=le}Ee!==0&&Py(d,le,Ee)}}function R2(n,i,d,O){Rg[zy++]=n,Rg[zy++]=i,Rg[zy++]=d,Rg[zy++]=O,C2|=O,n.lanes|=O,n=n.alternate,n!==null&&(n.lanes|=O)}function a2(n,i,d,O){return R2(n,i,d,O),n2(n)}function r_(n,i){return R2(n,null,null,i),n2(n)}function Py(n,i,d){n.lanes|=d;var O=n.alternate;O!==null&&(O.lanes|=d);for(var le=!1,Ee=n.return;Ee!==null;)Ee.childLanes|=d,O=Ee.alternate,O!==null&&(O.childLanes|=d),Ee.tag===22&&(n=Ee.stateNode,n===null||n._visibility&1||(le=!0)),n=Ee,Ee=Ee.return;return n.tag===3?(Ee=n.stateNode,le&&i!==null&&(le=31-x0(d),n=Ee.hiddenUpdates,O=n[le],O===null?n[le]=[i]:O.push(i),i.lane=d|536870912),Ee):null}function n2(n){if(50<j2)throw j2=0,_b=null,Error(a(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var a_={};function _x(n,i,d,O){this.tag=n,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=O,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mg(n,i,d,O){return new _x(n,i,d,O)}function L2(n){return n=n.prototype,!(!n||!n.isReactComponent)}function ty(n,i){var d=n.alternate;return d===null?(d=Mg(n.tag,i,n.key,n.mode),d.elementType=n.elementType,d.type=n.type,d.stateNode=n.stateNode,d.alternate=n,n.alternate=d):(d.pendingProps=i,d.type=n.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=n.flags&65011712,d.childLanes=n.childLanes,d.lanes=n.lanes,d.child=n.child,d.memoizedProps=n.memoizedProps,d.memoizedState=n.memoizedState,d.updateQueue=n.updateQueue,i=n.dependencies,d.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},d.sibling=n.sibling,d.index=n.index,d.ref=n.ref,d.refCleanup=n.refCleanup,d}function D2(n,i){n.flags&=65011714;var d=n.alternate;return d===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=d.childLanes,n.lanes=d.lanes,n.child=d.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=d.memoizedProps,n.memoizedState=d.memoizedState,n.updateQueue=d.updateQueue,n.type=d.type,i=d.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function w_(n,i,d,O,le,Ee){var ms=0;if(O=n,typeof n=="function")L2(n)&&(ms=1);else if(typeof n=="string")ms=B5(n,d,Ei.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case J:return n=Mg(31,d,i,le),n.elementType=J,n.lanes=Ee,n;case y:return n_(d.children,le,Ee,i);case l:ms=8,le|=24;break;case c:return n=Mg(12,d,i,le|2),n.elementType=c,n.lanes=Ee,n;case $:return n=Mg(13,d,i,le),n.elementType=$,n.lanes=Ee,n;case b:return n=Mg(19,d,i,le),n.elementType=b,n.lanes=Ee,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case R:ms=10;break e;case L:ms=9;break e;case F:ms=11;break e;case k:ms=14;break e;case B:ms=16,O=null;break e}ms=29,d=Error(a(130,n===null?"null":typeof n,"")),O=null}return i=Mg(ms,d,i,le),i.elementType=n,i.type=O,i.lanes=Ee,i}function n_(n,i,d,O){return n=Mg(7,n,O,i),n.lanes=d,n}function k2(n,i,d){return n=Mg(6,n,null,i),n.lanes=d,n}function hb(n){var i=Mg(18,null,null,0);return i.stateNode=n,i}function xx(n,i,d){return i=Mg(4,n.children!==null?n.children:[],n.key,i),i.lanes=d,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}var bx=new WeakMap;function Lg(n,i){if(typeof n=="object"&&n!==null){var d=bx.get(n);return d!==void 0?d:(i={value:n,source:i,stack:F0(i)},bx.set(n,i),i)}return{value:n,source:i,stack:F0(i)}}var M_=[],S_=0,T_=null,i2=0,Ig=[],Sg=0,Oy=null,Vg=1,ry="";function my(n,i){M_[S_++]=i2,M_[S_++]=T_,T_=n,i2=i}function ay(n,i,d){Ig[Sg++]=Vg,Ig[Sg++]=ry,Ig[Sg++]=Oy,Oy=n;var O=Vg;n=ry;var le=32-x0(O)-1;O&=~(1<<le),d+=1;var Ee=32-x0(i)+le;if(30<Ee){var ms=le-le%5;Ee=(O&(1<<ms)-1).toString(32),O>>=ms,le-=ms,Vg=1<<32-x0(i)+le|d<<le|O,ry=Ee+n}else Vg=1<<Ee|d<<le|O,ry=n}function wx(n){n.return!==null&&(my(n,1),ay(n,1,0))}function s2(n){for(;n===T_;)T_=M_[--S_],M_[S_]=null,i2=M_[--S_],M_[S_]=null;for(;n===Oy;)Oy=Ig[--Sg],Ig[Sg]=null,ry=Ig[--Sg],Ig[Sg]=null,Vg=Ig[--Sg],Ig[Sg]=null}function Mx(n,i){Ig[Sg++]=Vg,Ig[Sg++]=ry,Ig[Sg++]=Oy,Vg=i.id,ry=i.overflow,Oy=n}var lg=null,k1=null,Wv=!1,ny=null,yg=!1,Sx=Error(a(519));function vy(n){var i=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw o2(Lg(i,n)),Sx}function db(n){var i=n.stateNode,d=n.type,O=n.memoizedProps;switch(i[d1]=n,i[A1]=O,d){case"dialog":e1("cancel",i),e1("close",i);break;case"iframe":case"object":case"embed":e1("load",i);break;case"video":case"audio":for(d=0;d<q2.length;d++)e1(q2[d],i);break;case"source":e1("error",i);break;case"img":case"image":case"link":e1("error",i),e1("load",i);break;case"details":e1("toggle",i);break;case"input":e1("invalid",i),Gy(i,O.value,O.defaultValue,O.checked,O.defaultChecked,O.type,O.name,!0);break;case"select":e1("invalid",i);break;case"textarea":e1("invalid",i),U1(i,O.value,O.defaultValue,O.children)}d=O.children,typeof d!="string"&&typeof d!="number"&&typeof d!="bigint"||i.textContent===""+d||O.suppressHydrationWarning===!0||C3(i.textContent,d)?(O.popover!=null&&(e1("beforetoggle",i),e1("toggle",i)),O.onScroll!=null&&e1("scroll",i),O.onScrollEnd!=null&&e1("scrollend",i),O.onClick!=null&&(i.onclick=D1),i=!0):i=!1,i||vy(n,!0)}function E_(n){for(lg=n.return;lg;)switch(lg.tag){case 5:case 31:case 13:yg=!1;return;case 27:case 3:yg=!0;return;default:lg=lg.return}}function gy(n){if(n!==lg)return!1;if(!Wv)return E_(n),Wv=!0,!1;var i=n.tag,d;if((d=i!==3&&i!==27)&&((d=i===5)&&(d=n.type,d=!(d!=="form"&&d!=="button")||Nb(n.type,n.memoizedProps)),d=!d),d&&k1&&vy(n),E_(n),i===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(a(317));k1=B3(n)}else if(i===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(a(317));k1=B3(n)}else i===27?(i=k1,I_(n.type)?(n=F3,F3=null,k1=n):k1=i):k1=lg?oy(n.stateNode.nextSibling):null;return!0}function i_(){k1=lg=null,Wv=!1}function Tx(){var n=ny;return n!==null&&(mg===null?mg=n:mg.push.apply(mg,n),ny=null),n}function o2(n){ny===null?ny=[n]:ny.push(n)}var Ex=_e(null),yy=null,iy=null;function Iy(n,i,d){_s(Ex,i._currentValue),i._currentValue=d}function _y(n){n._currentValue=Ex.current,pr(Ex)}function Ax(n,i,d){for(;n!==null;){var O=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,O!==null&&(O.childLanes|=i)):O!==null&&(O.childLanes&i)!==i&&(O.childLanes|=i),n===d)break;n=n.return}}function Cx(n,i,d,O){var le=n.child;for(le!==null&&(le.return=n);le!==null;){var Ee=le.dependencies;if(Ee!==null){var ms=le.child;Ee=Ee.firstContext;e:for(;Ee!==null;){var Hl=Ee;Ee=le;for(var f0=0;f0<i.length;f0++)if(Hl.context===i[f0]){Ee.lanes|=d,Hl=Ee.alternate,Hl!==null&&(Hl.lanes|=d),Ax(Ee.return,d,n),O||(ms=null);break e}Ee=Hl.next}}else if(le.tag===18){if(ms=le.return,ms===null)throw Error(a(341));ms.lanes|=d,Ee=ms.alternate,Ee!==null&&(Ee.lanes|=d),Ax(ms,d,n),ms=null}else ms=le.child;if(ms!==null)ms.return=le;else for(ms=le;ms!==null;){if(ms===n){ms=null;break}if(le=ms.sibling,le!==null){le.return=ms.return,ms=le;break}ms=ms.return}le=ms}}function xy(n,i,d,O){n=null;for(var le=i,Ee=!1;le!==null;){if(!Ee){if((le.flags&524288)!==0)Ee=!0;else if((le.flags&262144)!==0)break}if(le.tag===10){var ms=le.alternate;if(ms===null)throw Error(a(387));if(ms=ms.memoizedProps,ms!==null){var Hl=le.type;ng(le.pendingProps.value,ms.value)||(n!==null?n.push(Hl):n=[Hl])}}else if(le===Ep.current){if(ms=le.alternate,ms===null)throw Error(a(387));ms.memoizedState.memoizedState!==le.memoizedState.memoizedState&&(n!==null?n.push(F_):n=[F_])}le=le.return}n!==null&&Cx(i,n,d,O),i.flags|=262144}function l2(n){for(n=n.firstContext;n!==null;){if(!ng(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function s_(n){yy=n,iy=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function cg(n){return u2(yy,n)}function c2(n,i){return yy===null&&s_(n),u2(n,i)}function u2(n,i){var d=i._currentValue;if(i={context:i,memoizedValue:d,next:null},iy===null){if(n===null)throw Error(a(308));iy=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else iy=iy.next=i;return d}var Rx=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(d,O){n.push(O)}};this.abort=function(){i.aborted=!0,n.forEach(function(d){return d()})}},N2=r.unstable_scheduleCallback,pb=r.unstable_NormalPriority,W1={$$typeof:R,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function z2(){return{controller:new Rx,data:new Map,refCount:0}}function A_(n){n.refCount--,n.refCount===0&&N2(pb,function(){n.controller.abort()})}var C_=null,f2=0,ie=0,Ol=null;function Xe(n,i){if(C_===null){var d=C_=[];f2=0,ie=b3(),Ol={status:"pending",value:void 0,then:function(O){d.push(O)}}}return f2++,i.then(Wp,Wp),i}function Wp(){if(--f2===0&&C_!==null){Ol!==null&&(Ol.status="fulfilled");var n=C_;C_=null,ie=0,Ol=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function l0(n,i){var d=[],O={status:"pending",value:null,reason:null,then:function(le){d.push(le)}};return n.then(function(){O.status="fulfilled",O.value=i;for(var le=0;le<d.length;le++)(0,d[le])(i)},function(le){for(O.status="rejected",O.reason=le,le=0;le<d.length;le++)(0,d[le])(void 0)}),O}var S0=we.S;we.S=function(n,i){u3=a0(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&Xe(n,i),S0!==null&&S0(n,i)};var hm=_e(null);function am(){var n=hm.current;return n!==null?n:Tv.pooledCache}function av(n,i){i===null?_s(hm,hm.current):_s(hm,i.pool)}function q0(){var n=am();return n===null?null:{parent:W1._currentValue,pool:n}}var um=Error(a(460)),l1=Error(a(474)),qm=Error(a(542)),Im={then:function(){}};function C1(n){return n=n.status,n==="fulfilled"||n==="rejected"}function I1(n,i,d){switch(d=n[d],d===void 0?n.push(i):d!==i&&(i.then(D1,D1),i=d),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,Qm(n),n;default:if(typeof i.status=="string")i.then(D1,D1);else{if(n=Tv,n!==null&&100<n.shellSuspendCounter)throw Error(a(482));n=i,n.status="pending",n.then(function(O){if(i.status==="pending"){var le=i;le.status="fulfilled",le.value=O}},function(O){if(i.status==="pending"){var le=i;le.status="rejected",le.reason=O}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,Qm(n),n}throw Pv=i,um}}function Yv(n){try{var i=n._init;return i(n._payload)}catch(d){throw d!==null&&typeof d=="object"&&typeof d.then=="function"?(Pv=d,um):d}}var Pv=null;function Bv(){if(Pv===null)throw Error(a(459));var n=Pv;return Pv=null,n}function Qm(n){if(n===um||n===qm)throw Error(a(483))}var Dv=null,F1=0;function Qv(n){var i=F1;return F1+=1,Dv===null&&(Dv=[]),I1(Dv,n,i)}function jv(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function y1(n,i){throw i.$$typeof===A?Error(a(525)):(n=Object.prototype.toString.call(i),Error(a(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function bv(n){function i($0,U0){if(n){var om=$0.deletions;om===null?($0.deletions=[U0],$0.flags|=16):om.push(U0)}}function d($0,U0){if(!n)return null;for(;U0!==null;)i($0,U0),U0=U0.sibling;return null}function O($0){for(var U0=new Map;$0!==null;)$0.key!==null?U0.set($0.key,$0):U0.set($0.index,$0),$0=$0.sibling;return U0}function le($0,U0){return $0=ty($0,U0),$0.index=0,$0.sibling=null,$0}function Ee($0,U0,om){return $0.index=om,n?(om=$0.alternate,om!==null?(om=om.index,om<U0?($0.flags|=67108866,U0):om):($0.flags|=67108866,U0)):($0.flags|=1048576,U0)}function ms($0){return n&&$0.alternate===null&&($0.flags|=67108866),$0}function Hl($0,U0,om,Mm){return U0===null||U0.tag!==6?(U0=k2(om,$0.mode,Mm),U0.return=$0,U0):(U0=le(U0,om),U0.return=$0,U0)}function f0($0,U0,om,Mm){var nv=om.type;return nv===y?ym($0,U0,om.props.children,Mm,om.key):U0!==null&&(U0.elementType===nv||typeof nv=="object"&&nv!==null&&nv.$$typeof===B&&Yv(nv)===U0.type)?(U0=le(U0,om.props),jv(U0,om),U0.return=$0,U0):(U0=w_(om.type,om.key,om.props,null,$0.mode,Mm),jv(U0,om),U0.return=$0,U0)}function Z0($0,U0,om,Mm){return U0===null||U0.tag!==4||U0.stateNode.containerInfo!==om.containerInfo||U0.stateNode.implementation!==om.implementation?(U0=xx(om,$0.mode,Mm),U0.return=$0,U0):(U0=le(U0,om.children||[]),U0.return=$0,U0)}function ym($0,U0,om,Mm,nv){return U0===null||U0.tag!==7?(U0=n_(om,$0.mode,Mm,nv),U0.return=$0,U0):(U0=le(U0,om),U0.return=$0,U0)}function _m($0,U0,om){if(typeof U0=="string"&&U0!==""||typeof U0=="number"||typeof U0=="bigint")return U0=k2(""+U0,$0.mode,om),U0.return=$0,U0;if(typeof U0=="object"&&U0!==null){switch(U0.$$typeof){case D:return om=w_(U0.type,U0.key,U0.props,null,$0.mode,om),jv(om,U0),om.return=$0,om;case I:return U0=xx(U0,$0.mode,om),U0.return=$0,U0;case B:return U0=Yv(U0),_m($0,U0,om)}if(Oe(U0)||He(U0))return U0=n_(U0,$0.mode,om,null),U0.return=$0,U0;if(typeof U0.then=="function")return _m($0,Qv(U0),om);if(U0.$$typeof===R)return _m($0,c2($0,U0),om);y1($0,U0)}return null}function T0($0,U0,om,Mm){var nv=U0!==null?U0.key:null;if(typeof om=="string"&&om!==""||typeof om=="number"||typeof om=="bigint")return nv!==null?null:Hl($0,U0,""+om,Mm);if(typeof om=="object"&&om!==null){switch(om.$$typeof){case D:return om.key===nv?f0($0,U0,om,Mm):null;case I:return om.key===nv?Z0($0,U0,om,Mm):null;case B:return om=Yv(om),T0($0,U0,om,Mm)}if(Oe(om)||He(om))return nv!==null?null:ym($0,U0,om,Mm,null);if(typeof om.then=="function")return T0($0,U0,Qv(om),Mm);if(om.$$typeof===R)return T0($0,U0,c2($0,om),Mm);y1($0,om)}return null}function Q0($0,U0,om,Mm,nv){if(typeof Mm=="string"&&Mm!==""||typeof Mm=="number"||typeof Mm=="bigint")return $0=$0.get(om)||null,Hl(U0,$0,""+Mm,nv);if(typeof Mm=="object"&&Mm!==null){switch(Mm.$$typeof){case D:return $0=$0.get(Mm.key===null?om:Mm.key)||null,f0(U0,$0,Mm,nv);case I:return $0=$0.get(Mm.key===null?om:Mm.key)||null,Z0(U0,$0,Mm,nv);case B:return Mm=Yv(Mm),Q0($0,U0,om,Mm,nv)}if(Oe(Mm)||He(Mm))return $0=$0.get(om)||null,ym(U0,$0,Mm,nv,null);if(typeof Mm.then=="function")return Q0($0,U0,om,Qv(Mm),nv);if(Mm.$$typeof===R)return Q0($0,U0,om,c2(U0,Mm),nv);y1(U0,Mm)}return null}function km($0,U0,om,Mm){for(var nv=null,Fv=null,Jm=U0,Sv=U0=0,qv=null;Jm!==null&&Sv<om.length;Sv++){Jm.index>Sv?(qv=Jm,Jm=null):qv=Jm.sibling;var m1=T0($0,Jm,om[Sv],Mm);if(m1===null){Jm===null&&(Jm=qv);break}n&&Jm&&m1.alternate===null&&i($0,Jm),U0=Ee(m1,U0,Sv),Fv===null?nv=m1:Fv.sibling=m1,Fv=m1,Jm=qv}if(Sv===om.length)return d($0,Jm),Wv&&my($0,Sv),nv;if(Jm===null){for(;Sv<om.length;Sv++)Jm=_m($0,om[Sv],Mm),Jm!==null&&(U0=Ee(Jm,U0,Sv),Fv===null?nv=Jm:Fv.sibling=Jm,Fv=Jm);return Wv&&my($0,Sv),nv}for(Jm=O(Jm);Sv<om.length;Sv++)qv=Q0(Jm,$0,Sv,om[Sv],Mm),qv!==null&&(n&&qv.alternate!==null&&Jm.delete(qv.key===null?Sv:qv.key),U0=Ee(qv,U0,Sv),Fv===null?nv=qv:Fv.sibling=qv,Fv=qv);return n&&Jm.forEach(function(vg){return i($0,vg)}),Wv&&my($0,Sv),nv}function Wm($0,U0,om,Mm){if(om==null)throw Error(a(151));for(var nv=null,Fv=null,Jm=U0,Sv=U0=0,qv=null,m1=om.next();Jm!==null&&!m1.done;Sv++,m1=om.next()){Jm.index>Sv?(qv=Jm,Jm=null):qv=Jm.sibling;var vg=T0($0,Jm,m1.value,Mm);if(vg===null){Jm===null&&(Jm=qv);break}n&&Jm&&vg.alternate===null&&i($0,Jm),U0=Ee(vg,U0,Sv),Fv===null?nv=vg:Fv.sibling=vg,Fv=vg,Jm=qv}if(m1.done)return d($0,Jm),Wv&&my($0,Sv),nv;if(Jm===null){for(;!m1.done;Sv++,m1=om.next())m1=_m($0,m1.value,Mm),m1!==null&&(U0=Ee(m1,U0,Sv),Fv===null?nv=m1:Fv.sibling=m1,Fv=m1);return Wv&&my($0,Sv),nv}for(Jm=O(Jm);!m1.done;Sv++,m1=om.next())m1=Q0(Jm,$0,Sv,m1.value,Mm),m1!==null&&(n&&m1.alternate!==null&&Jm.delete(m1.key===null?Sv:m1.key),U0=Ee(m1,U0,Sv),Fv===null?nv=m1:Fv.sibling=m1,Fv=m1);return n&&Jm.forEach(function(gg){return i($0,gg)}),Wv&&my($0,Sv),nv}function Av($0,U0,om,Mm){if(typeof om=="object"&&om!==null&&om.type===y&&om.key===null&&(om=om.props.children),typeof om=="object"&&om!==null){switch(om.$$typeof){case D:e:{for(var nv=om.key;U0!==null;){if(U0.key===nv){if(nv=om.type,nv===y){if(U0.tag===7){d($0,U0.sibling),Mm=le(U0,om.props.children),Mm.return=$0,$0=Mm;break e}}else if(U0.elementType===nv||typeof nv=="object"&&nv!==null&&nv.$$typeof===B&&Yv(nv)===U0.type){d($0,U0.sibling),Mm=le(U0,om.props),jv(Mm,om),Mm.return=$0,$0=Mm;break e}d($0,U0);break}else i($0,U0);U0=U0.sibling}om.type===y?(Mm=n_(om.props.children,$0.mode,Mm,om.key),Mm.return=$0,$0=Mm):(Mm=w_(om.type,om.key,om.props,null,$0.mode,Mm),jv(Mm,om),Mm.return=$0,$0=Mm)}return ms($0);case I:e:{for(nv=om.key;U0!==null;){if(U0.key===nv)if(U0.tag===4&&U0.stateNode.containerInfo===om.containerInfo&&U0.stateNode.implementation===om.implementation){d($0,U0.sibling),Mm=le(U0,om.children||[]),Mm.return=$0,$0=Mm;break e}else{d($0,U0);break}else i($0,U0);U0=U0.sibling}Mm=xx(om,$0.mode,Mm),Mm.return=$0,$0=Mm}return ms($0);case B:return om=Yv(om),Av($0,U0,om,Mm)}if(Oe(om))return km($0,U0,om,Mm);if(He(om)){if(nv=He(om),typeof nv!="function")throw Error(a(150));return om=nv.call(om),Wm($0,U0,om,Mm)}if(typeof om.then=="function")return Av($0,U0,Qv(om),Mm);if(om.$$typeof===R)return Av($0,U0,c2($0,om),Mm);y1($0,om)}return typeof om=="string"&&om!==""||typeof om=="number"||typeof om=="bigint"?(om=""+om,U0!==null&&U0.tag===6?(d($0,U0.sibling),Mm=le(U0,om),Mm.return=$0,$0=Mm):(d($0,U0),Mm=k2(om,$0.mode,Mm),Mm.return=$0,$0=Mm),ms($0)):d($0,U0)}return function($0,U0,om,Mm){try{F1=0;var nv=Av($0,U0,om,Mm);return Dv=null,nv}catch(Jm){if(Jm===um||Jm===qm)throw Jm;var Fv=Mg(29,Jm,null,$0.mode);return Fv.lanes=Mm,Fv.return=$0,Fv}finally{}}}var Nv=bv(!0),ug=bv(!1),Tg=!1;function o_(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function R_(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Ug(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function L_(n,i,d){var O=n.updateQueue;if(O===null)return null;if(O=O.shared,(mv&2)!==0){var le=O.pending;return le===null?i.next=i:(i.next=le.next,le.next=i),O.pending=i,i=n2(n),Py(n,null,d),i}return R2(n,O,i,d),n2(n)}function D_(n,i,d){if(i=i.updateQueue,i!==null&&(i=i.shared,(d&4194048)!==0)){var O=i.lanes;O&=n.pendingLanes,d|=O,i.lanes=d,ev(n,d)}}function Lx(n,i){var d=n.updateQueue,O=n.alternate;if(O!==null&&(O=O.updateQueue,d===O)){var le=null,Ee=null;if(d=d.firstBaseUpdate,d!==null){do{var ms={lane:d.lane,tag:d.tag,payload:d.payload,callback:null,next:null};Ee===null?le=Ee=ms:Ee=Ee.next=ms,d=d.next}while(d!==null);Ee===null?le=Ee=i:Ee=Ee.next=i}else le=Ee=i;d={baseState:O.baseState,firstBaseUpdate:le,lastBaseUpdate:Ee,shared:O.shared,callbacks:O.callbacks},n.updateQueue=d;return}n=d.lastBaseUpdate,n===null?d.firstBaseUpdate=i:n.next=i,d.lastBaseUpdate=i}var Dx=!1;function kx(){if(Dx){var n=Ol;if(n!==null)throw n}}function Nx(n,i,d,O){Dx=!1;var le=n.updateQueue;Tg=!1;var Ee=le.firstBaseUpdate,ms=le.lastBaseUpdate,Hl=le.shared.pending;if(Hl!==null){le.shared.pending=null;var f0=Hl,Z0=f0.next;f0.next=null,ms===null?Ee=Z0:ms.next=Z0,ms=f0;var ym=n.alternate;ym!==null&&(ym=ym.updateQueue,Hl=ym.lastBaseUpdate,Hl!==ms&&(Hl===null?ym.firstBaseUpdate=Z0:Hl.next=Z0,ym.lastBaseUpdate=f0))}if(Ee!==null){var _m=le.baseState;ms=0,ym=Z0=f0=null,Hl=Ee;do{var T0=Hl.lane&-536870913,Q0=T0!==Hl.lane;if(Q0?(sv&T0)===T0:(O&T0)===T0){T0!==0&&T0===ie&&(Dx=!0),ym!==null&&(ym=ym.next={lane:0,tag:Hl.tag,payload:Hl.payload,callback:null,next:null});e:{var km=n,Wm=Hl;T0=i;var Av=d;switch(Wm.tag){case 1:if(km=Wm.payload,typeof km=="function"){_m=km.call(Av,_m,T0);break e}_m=km;break e;case 3:km.flags=km.flags&-65537|128;case 0:if(km=Wm.payload,T0=typeof km=="function"?km.call(Av,_m,T0):km,T0==null)break e;_m=w({},_m,T0);break e;case 2:Tg=!0}}T0=Hl.callback,T0!==null&&(n.flags|=64,Q0&&(n.flags|=8192),Q0=le.callbacks,Q0===null?le.callbacks=[T0]:Q0.push(T0))}else Q0={lane:T0,tag:Hl.tag,payload:Hl.payload,callback:Hl.callback,next:null},ym===null?(Z0=ym=Q0,f0=_m):ym=ym.next=Q0,ms|=T0;if(Hl=Hl.next,Hl===null){if(Hl=le.shared.pending,Hl===null)break;Q0=Hl,Hl=Q0.next,Q0.next=null,le.lastBaseUpdate=Q0,le.shared.pending=null}}while(!0);ym===null&&(f0=_m),le.baseState=f0,le.firstBaseUpdate=Z0,le.lastBaseUpdate=ym,Ee===null&&(le.shared.lanes=0),wy|=ms,n.lanes=ms,n.memoizedState=_m}}function e5(n,i){if(typeof n!="function")throw Error(a(191,n));n.call(i)}function t5(n,i){var d=n.callbacks;if(d!==null)for(n.callbacks=null,n=0;n<d.length;n++)e5(d[n],i)}var P2=_e(null),mb=_e(0);function t3(n,i){n=Eg,_s(mb,n),_s(P2,i),Eg=n|i.baseLanes}function r3(){_s(mb,Eg),_s(P2,P2.current)}function vb(){Eg=mb.current,pr(P2),pr(mb)}var qg=_e(null),Wg=null;function k_(n){var i=n.alternate;_s(tg,tg.current&1),_s(qg,n),Wg===null&&(i===null||P2.current!==null||i.memoizedState!==null)&&(Wg=n)}function a3(n){_s(tg,tg.current),_s(qg,n),Wg===null&&(Wg=n)}function r5(n){n.tag===22?(_s(tg,tg.current),_s(qg,n),Wg===null&&(Wg=n)):N_()}function N_(){_s(tg,tg.current),_s(qg,qg.current)}function Yg(n){pr(qg),Wg===n&&(Wg=null),pr(tg)}var tg=_e(0);function fg(n){for(var i=n;i!==null;){if(i.tag===13){var d=i.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||Pb(d)||U3(d)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var G1=0,Gv=null,R1=null,ig=null,gb=!1,O2=!1,h2=!1,yb=0,zx=0,I2=null,q5=0;function Z1(){throw Error(a(321))}function n3(n,i){if(i===null)return!1;for(var d=0;d<i.length&&d<n.length;d++)if(!ng(n[d],i[d]))return!1;return!0}function i3(n,i,d,O,le,Ee){return G1=Ee,Gv=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,we.H=n===null||n.memoizedState===null?gs:dr,h2=!1,Ee=d(O,le),h2=!1,O2&&(Ee=n5(i,d,O,le)),a5(n),Ee}function a5(n){we.H=_r;var i=R1!==null&&R1.next!==null;if(G1=0,ig=R1=Gv=null,gb=!1,zx=0,I2=null,i)throw Error(a(300));n===null||zl||(n=n.dependencies,n!==null&&l2(n)&&(zl=!0))}function n5(n,i,d,O){Gv=n;var le=0;do{if(O2&&(I2=null),zx=0,O2=!1,25<=le)throw Error(a(301));if(le+=1,ig=R1=null,n.updateQueue!=null){var Ee=n.updateQueue;Ee.lastEffect=null,Ee.events=null,Ee.stores=null,Ee.memoCache!=null&&(Ee.memoCache.index=0)}we.H=Lo,Ee=i(d,O)}while(O2);return Ee}function W5(){var n=we.H,i=n.useState()[0];return i=typeof i.then=="function"?v(i):i,n=n.useState()[0],(R1!==null?R1.memoizedState:null)!==n&&(Gv.flags|=1024),i}function s3(){var n=yb!==0;return yb=0,n}function o3(n,i,d){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~d}function l3(n){if(gb){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}gb=!1}G1=0,ig=R1=Gv=null,O2=!1,zx=yb=0,I2=null}function pe(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ig===null?Gv.memoizedState=ig=n:ig=ig.next=n,ig}function me(){if(R1===null){var n=Gv.alternate;n=n!==null?n.memoizedState:null}else n=R1.next;var i=ig===null?Gv.memoizedState:ig.next;if(i!==null)ig=i,R1=n;else{if(n===null)throw Gv.alternate===null?Error(a(467)):Error(a(310));R1=n,n={memoizedState:R1.memoizedState,baseState:R1.baseState,baseQueue:R1.baseQueue,queue:R1.queue,next:null},ig===null?Gv.memoizedState=ig=n:ig=ig.next=n}return ig}function M(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function v(n){var i=zx;return zx+=1,I2===null&&(I2=[]),n=I1(I2,n,i),i=Gv,(ig===null?i.memoizedState:ig.next)===null&&(i=i.alternate,we.H=i===null||i.memoizedState===null?gs:dr),n}function g(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return v(n);if(n.$$typeof===R)return cg(n)}throw Error(a(438,String(n)))}function E(n){var i=null,d=Gv.updateQueue;if(d!==null&&(i=d.memoCache),i==null){var O=Gv.alternate;O!==null&&(O=O.updateQueue,O!==null&&(O=O.memoCache,O!=null&&(i={data:O.data.map(function(le){return le.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),d===null&&(d=M(),Gv.updateQueue=d),d.memoCache=i,d=i.data[i.index],d===void 0)for(d=i.data[i.index]=Array(n),O=0;O<n;O++)d[O]=X;return i.index++,d}function S(n,i){return typeof i=="function"?i(n):i}function T(n){var i=me();return C(i,R1,n)}function C(n,i,d){var O=n.queue;if(O===null)throw Error(a(311));O.lastRenderedReducer=d;var le=n.baseQueue,Ee=O.pending;if(Ee!==null){if(le!==null){var ms=le.next;le.next=Ee.next,Ee.next=ms}i.baseQueue=le=Ee,O.pending=null}if(Ee=n.baseState,le===null)n.memoizedState=Ee;else{i=le.next;var Hl=ms=null,f0=null,Z0=i,ym=!1;do{var _m=Z0.lane&-536870913;if(_m!==Z0.lane?(sv&_m)===_m:(G1&_m)===_m){var T0=Z0.revertLane;if(T0===0)f0!==null&&(f0=f0.next={lane:0,revertLane:0,gesture:null,action:Z0.action,hasEagerState:Z0.hasEagerState,eagerState:Z0.eagerState,next:null}),_m===ie&&(ym=!0);else if((G1&T0)===T0){Z0=Z0.next,T0===ie&&(ym=!0);continue}else _m={lane:0,revertLane:Z0.revertLane,gesture:null,action:Z0.action,hasEagerState:Z0.hasEagerState,eagerState:Z0.eagerState,next:null},f0===null?(Hl=f0=_m,ms=Ee):f0=f0.next=_m,Gv.lanes|=T0,wy|=T0;_m=Z0.action,h2&&d(Ee,_m),Ee=Z0.hasEagerState?Z0.eagerState:d(Ee,_m)}else T0={lane:_m,revertLane:Z0.revertLane,gesture:Z0.gesture,action:Z0.action,hasEagerState:Z0.hasEagerState,eagerState:Z0.eagerState,next:null},f0===null?(Hl=f0=T0,ms=Ee):f0=f0.next=T0,Gv.lanes|=_m,wy|=_m;Z0=Z0.next}while(Z0!==null&&Z0!==i);if(f0===null?ms=Ee:f0.next=Hl,!ng(Ee,n.memoizedState)&&(zl=!0,ym&&(d=Ol,d!==null)))throw d;n.memoizedState=Ee,n.baseState=ms,n.baseQueue=f0,O.lastRenderedState=Ee}return le===null&&(O.lanes=0),[n.memoizedState,O.dispatch]}function P(n){var i=me(),d=i.queue;if(d===null)throw Error(a(311));d.lastRenderedReducer=n;var O=d.dispatch,le=d.pending,Ee=i.memoizedState;if(le!==null){d.pending=null;var ms=le=le.next;do Ee=n(Ee,ms.action),ms=ms.next;while(ms!==le);ng(Ee,i.memoizedState)||(zl=!0),i.memoizedState=Ee,i.baseQueue===null&&(i.baseState=Ee),d.lastRenderedState=Ee}return[Ee,O]}function p(n,i,d){var O=Gv,le=me(),Ee=Wv;if(Ee){if(d===void 0)throw Error(a(407));d=d()}else d=i();var ms=!ng((R1||le).memoizedState,d);if(ms&&(le.memoizedState=d,zl=!0),le=le.queue,he(j.bind(null,O,le,n),[n]),le.getSnapshot!==i||ms||ig!==null&&ig.memoizedState.tag&1){if(O.flags|=2048,be(9,{destroy:void 0},N.bind(null,O,le,d,i),null),Tv===null)throw Error(a(349));Ee||(G1&127)!==0||Y(O,i,d)}return d}function Y(n,i,d){n.flags|=16384,n={getSnapshot:i,value:d},i=Gv.updateQueue,i===null?(i=M(),Gv.updateQueue=i,i.stores=[n]):(d=i.stores,d===null?i.stores=[n]:d.push(n))}function N(n,i,d,O){i.value=d,i.getSnapshot=O,ee(i)&&G(n)}function j(n,i,d){return d(function(){ee(i)&&G(n)})}function ee(n){var i=n.getSnapshot;n=n.value;try{var d=i();return!ng(n,d)}catch{return!0}}function G(n){var i=r_(n,2);i!==null&&Bg(i,n,2)}function V(n){var i=pe();if(typeof n=="function"){var d=n;if(n=d(),h2){u0(!0);try{d()}finally{u0(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:S,lastRenderedState:n},i}function W(n,i,d,O){return n.baseState=d,C(n,R1,typeof O=="function"?O:S)}function q(n,i,d,O,le){if(qp(n))throw Error(a(485));if(n=i.action,n!==null){var Ee={payload:le,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(ms){Ee.listeners.push(ms)}};we.T!==null?d(!0):Ee.isTransition=!1,O(Ee),d=i.pending,d===null?(Ee.next=i.pending=Ee,z(i,Ee)):(Ee.next=d.next,i.pending=d.next=Ee)}}function z(n,i){var d=i.action,O=i.payload,le=n.state;if(i.isTransition){var Ee=we.T,ms={};we.T=ms;try{var Hl=d(le,O),f0=we.S;f0!==null&&f0(ms,Hl),H(n,i,Hl)}catch(Z0){ne(n,i,Z0)}finally{Ee!==null&&ms.types!==null&&(Ee.types=ms.types),we.T=Ee}}else try{Ee=d(le,O),H(n,i,Ee)}catch(Z0){ne(n,i,Z0)}}function H(n,i,d){d!==null&&typeof d=="object"&&typeof d.then=="function"?d.then(function(O){Z(n,i,O)},function(O){return ne(n,i,O)}):Z(n,i,d)}function Z(n,i,d){i.status="fulfilled",i.value=d,te(i),n.state=d,i=n.pending,i!==null&&(d=i.next,d===i?n.pending=null:(d=d.next,i.next=d,z(n,d)))}function ne(n,i,d){var O=n.pending;if(n.pending=null,O!==null){O=O.next;do i.status="rejected",i.reason=d,te(i),i=i.next;while(i!==O)}n.action=null}function te(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function Se(n,i){return i}function fe(n,i){if(Wv){var d=Tv.formState;if(d!==null){e:{var O=Gv;if(Wv){if(k1){t:{for(var le=k1,Ee=yg;le.nodeType!==8;){if(!Ee){le=null;break t}if(le=oy(le.nextSibling),le===null){le=null;break t}}Ee=le.data,le=Ee==="F!"||Ee==="F"?le:null}if(le){k1=oy(le.nextSibling),O=le.data==="F!";break e}}vy(O)}O=!1}O&&(i=d[0])}}return d=pe(),d.memoizedState=d.baseState=i,O={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Se,lastRenderedState:i},d.queue=O,d=yi.bind(null,Gv,O),O.dispatch=d,O=V(!1),Ee=Yl.bind(null,Gv,!1,O.queue),O=pe(),le={state:i,dispatch:null,action:n,pending:null},O.queue=le,d=q.bind(null,Gv,le,Ee,d),le.dispatch=d,O.memoizedState=n,[i,d,!1]}function ve(n){var i=me();return xe(i,R1,n)}function xe(n,i,d){if(i=C(n,i,Se)[0],n=T(S)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var O=v(i)}catch(ms){throw ms===um?qm:ms}else O=i;i=me();var le=i.queue,Ee=le.dispatch;return d!==i.memoizedState&&(Gv.flags|=2048,be(9,{destroy:void 0},re.bind(null,le,d),null)),[O,Ee,n]}function re(n,i){n.action=i}function de(n){var i=me(),d=R1;if(d!==null)return xe(i,d,n);me(),i=i.memoizedState,d=me();var O=d.queue.dispatch;return d.memoizedState=n,[i,O,!1]}function be(n,i,d,O){return n={tag:n,create:d,deps:O,inst:i,next:null},i=Gv.updateQueue,i===null&&(i=M(),Gv.updateQueue=i),d=i.lastEffect,d===null?i.lastEffect=n.next=n:(O=d.next,d.next=n,n.next=O,i.lastEffect=n),n}function Te(){return me().memoizedState}function ye(n,i,d,O){var le=pe();Gv.flags|=n,le.memoizedState=be(1|i,{destroy:void 0},d,O===void 0?null:O)}function De(n,i,d,O){var le=me();O=O===void 0?null:O;var Ee=le.memoizedState.inst;R1!==null&&O!==null&&n3(O,R1.memoizedState.deps)?le.memoizedState=be(i,Ee,d,O):(Gv.flags|=n,le.memoizedState=be(1|i,Ee,d,O))}function Ue(n,i){ye(8390656,8,n,i)}function he(n,i){De(2048,8,n,i)}function Be(n){Gv.flags|=4;var i=Gv.updateQueue;if(i===null)i=M(),Gv.updateQueue=i,i.events=[n];else{var d=i.events;d===null?i.events=[n]:d.push(n)}}function Ye(n){var i=me().memoizedState;return Be({ref:i,nextImpl:n}),function(){if((mv&2)!==0)throw Error(a(440));return i.impl.apply(void 0,arguments)}}function et(n,i){return De(4,2,n,i)}function Qe(n,i){return De(4,4,n,i)}function ft(n,i){if(typeof i=="function"){n=n();var d=i(n);return function(){typeof d=="function"?d():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function mn(n,i,d){d=d!=null?d.concat([n]):null,De(4,4,ft.bind(null,i,n),d)}function ta(){}function Do(n,i){var d=me();i=i===void 0?null:i;var O=d.memoizedState;return i!==null&&n3(i,O[1])?O[0]:(d.memoizedState=[n,i],n)}function Ae(n,i){var d=me();i=i===void 0?null:i;var O=d.memoizedState;if(i!==null&&n3(i,O[1]))return O[0];if(O=n(),h2){u0(!0);try{n()}finally{u0(!1)}}return d.memoizedState=[O,i],O}function ke(n,i,d){return d===void 0||(G1&1073741824)!==0&&(sv&261930)===0?n.memoizedState=i:(n.memoizedState=d,n=s5(),Gv.lanes|=n,wy|=n,d)}function ge(n,i,d,O){return ng(d,i)?d:P2.current!==null?(n=ke(n,d,O),ng(n,i)||(zl=!0),n):(G1&42)===0||(G1&1073741824)!==0&&(sv&261930)===0?(zl=!0,n.memoizedState=d):(n=s5(),Gv.lanes|=n,wy|=n,i)}function Ce(n,i,d,O,le){var Ee=Ze.p;Ze.p=Ee!==0&&8>Ee?Ee:8;var ms=we.T,Hl={};we.T=Hl,Yl(n,!1,i,d);try{var f0=le(),Z0=we.S;if(Z0!==null&&Z0(Hl,f0),f0!==null&&typeof f0=="object"&&typeof f0.then=="function"){var ym=l0(f0,O);Fl(n,i,ym,$g(n))}else Fl(n,i,O,$g(n))}catch(_m){Fl(n,i,{then:function(){},status:"rejected",reason:_m},$g())}finally{Ze.p=Ee,ms!==null&&Hl.types!==null&&(ms.types=Hl.types),we.T=ms}}function Je(){}function Re(n,i,d,O){if(n.tag!==5)throw Error(a(476));var le=Q(n).queue;Ce(n,le,i,it,d===null?Je:function(){return ce(n),d(O)})}function Q(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:it,baseState:it,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:S,lastRenderedState:it},next:null};var d={};return i.next={memoizedState:d,baseState:d,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:S,lastRenderedState:d},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function ce(n){var i=Q(n);i.next===null&&(i=n.alternate.memoizedState),Fl(n,i.next.queue,{},$g())}function Me(){return cg(F_)}function Le(){return me().memoizedState}function tt(){return me().memoizedState}function bt(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var d=$g();n=Ug(d);var O=L_(i,n,d);O!==null&&(Bg(O,i,d),D_(O,i,d)),i={cache:z2()},n.payload=i;return}i=i.return}}function Ct(n,i,d){var O=$g();d={lane:O,revertLane:0,gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},qp(n)?Fp(i,d):(d=a2(n,i,d,O),d!==null&&(Bg(d,n,O),Up(d,i,O)))}function yi(n,i,d){var O=$g();Fl(n,i,d,O)}function Fl(n,i,d,O){var le={lane:O,revertLane:0,gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null};if(qp(n))Fp(i,le);else{var Ee=n.alternate;if(n.lanes===0&&(Ee===null||Ee.lanes===0)&&(Ee=i.lastRenderedReducer,Ee!==null))try{var ms=i.lastRenderedState,Hl=Ee(ms,d);if(le.hasEagerState=!0,le.eagerState=Hl,ng(Hl,ms))return R2(n,i,le,0),Tv===null&&r2(),!1}catch{}finally{}if(d=a2(n,i,le,O),d!==null)return Bg(d,n,O),Up(d,i,O),!0}return!1}function Yl(n,i,d,O){if(O={lane:2,revertLane:b3(),gesture:null,action:O,hasEagerState:!1,eagerState:null,next:null},qp(n)){if(i)throw Error(a(479))}else i=a2(n,d,O,2),i!==null&&Bg(i,n,2)}function qp(n){var i=n.alternate;return n===Gv||i!==null&&i===Gv}function Fp(n,i){O2=gb=!0;var d=n.pending;d===null?i.next=i:(i.next=d.next,d.next=i),n.pending=i}function Up(n,i,d){if((d&4194048)!==0){var O=i.lanes;O&=n.pendingLanes,d|=O,i.lanes=d,ev(n,d)}}var _r={readContext:cg,use:g,useCallback:Z1,useContext:Z1,useEffect:Z1,useImperativeHandle:Z1,useLayoutEffect:Z1,useInsertionEffect:Z1,useMemo:Z1,useReducer:Z1,useRef:Z1,useState:Z1,useDebugValue:Z1,useDeferredValue:Z1,useTransition:Z1,useSyncExternalStore:Z1,useId:Z1,useHostTransitionStatus:Z1,useFormState:Z1,useActionState:Z1,useOptimistic:Z1,useMemoCache:Z1,useCacheRefresh:Z1};_r.useEffectEvent=Z1;var gs={readContext:cg,use:g,useCallback:function(n,i){return pe().memoizedState=[n,i===void 0?null:i],n},useContext:cg,useEffect:Ue,useImperativeHandle:function(n,i,d){d=d!=null?d.concat([n]):null,ye(4194308,4,ft.bind(null,i,n),d)},useLayoutEffect:function(n,i){return ye(4194308,4,n,i)},useInsertionEffect:function(n,i){ye(4,2,n,i)},useMemo:function(n,i){var d=pe();i=i===void 0?null:i;var O=n();if(h2){u0(!0);try{n()}finally{u0(!1)}}return d.memoizedState=[O,i],O},useReducer:function(n,i,d){var O=pe();if(d!==void 0){var le=d(i);if(h2){u0(!0);try{d(i)}finally{u0(!1)}}}else le=i;return O.memoizedState=O.baseState=le,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:le},O.queue=n,n=n.dispatch=Ct.bind(null,Gv,n),[O.memoizedState,n]},useRef:function(n){var i=pe();return n={current:n},i.memoizedState=n},useState:function(n){n=V(n);var i=n.queue,d=yi.bind(null,Gv,i);return i.dispatch=d,[n.memoizedState,d]},useDebugValue:ta,useDeferredValue:function(n,i){var d=pe();return ke(d,n,i)},useTransition:function(){var n=V(!1);return n=Ce.bind(null,Gv,n.queue,!0,!1),pe().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,d){var O=Gv,le=pe();if(Wv){if(d===void 0)throw Error(a(407));d=d()}else{if(d=i(),Tv===null)throw Error(a(349));(sv&127)!==0||Y(O,i,d)}le.memoizedState=d;var Ee={value:d,getSnapshot:i};return le.queue=Ee,Ue(j.bind(null,O,Ee,n),[n]),O.flags|=2048,be(9,{destroy:void 0},N.bind(null,O,Ee,d,i),null),d},useId:function(){var n=pe(),i=Tv.identifierPrefix;if(Wv){var d=ry,O=Vg;d=(O&~(1<<32-x0(O)-1)).toString(32)+d,i="_"+i+"R_"+d,d=yb++,0<d&&(i+="H"+d.toString(32)),i+="_"}else d=q5++,i="_"+i+"r_"+d.toString(32)+"_";return n.memoizedState=i},useHostTransitionStatus:Me,useFormState:fe,useActionState:fe,useOptimistic:function(n){var i=pe();i.memoizedState=i.baseState=n;var d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=d,i=Yl.bind(null,Gv,!0,d),d.dispatch=i,[n,i]},useMemoCache:E,useCacheRefresh:function(){return pe().memoizedState=bt.bind(null,Gv)},useEffectEvent:function(n){var i=pe(),d={impl:n};return i.memoizedState=d,function(){if((mv&2)!==0)throw Error(a(440));return d.impl.apply(void 0,arguments)}}},dr={readContext:cg,use:g,useCallback:Do,useContext:cg,useEffect:he,useImperativeHandle:mn,useInsertionEffect:et,useLayoutEffect:Qe,useMemo:Ae,useReducer:T,useRef:Te,useState:function(){return T(S)},useDebugValue:ta,useDeferredValue:function(n,i){var d=me();return ge(d,R1.memoizedState,n,i)},useTransition:function(){var n=T(S)[0],i=me().memoizedState;return[typeof n=="boolean"?n:v(n),i]},useSyncExternalStore:p,useId:Le,useHostTransitionStatus:Me,useFormState:ve,useActionState:ve,useOptimistic:function(n,i){var d=me();return W(d,R1,n,i)},useMemoCache:E,useCacheRefresh:tt};dr.useEffectEvent=Ye;var Lo={readContext:cg,use:g,useCallback:Do,useContext:cg,useEffect:he,useImperativeHandle:mn,useInsertionEffect:et,useLayoutEffect:Qe,useMemo:Ae,useReducer:P,useRef:Te,useState:function(){return P(S)},useDebugValue:ta,useDeferredValue:function(n,i){var d=me();return R1===null?ke(d,n,i):ge(d,R1.memoizedState,n,i)},useTransition:function(){var n=P(S)[0],i=me().memoizedState;return[typeof n=="boolean"?n:v(n),i]},useSyncExternalStore:p,useId:Le,useHostTransitionStatus:Me,useFormState:de,useActionState:de,useOptimistic:function(n,i){var d=me();return R1!==null?W(d,R1,n,i):(d.baseState=n,[n,d.queue.dispatch])},useMemoCache:E,useCacheRefresh:tt};Lo.useEffectEvent=Ye;function Cp(n,i,d,O){i=n.memoizedState,d=d(O,i),d=d==null?i:w({},i,d),n.memoizedState=d,n.lanes===0&&(n.updateQueue.baseState=d)}var Hp={enqueueSetState:function(n,i,d){n=n._reactInternals;var O=$g(),le=Ug(O);le.payload=i,d!=null&&(le.callback=d),i=L_(n,le,O),i!==null&&(Bg(i,n,O),D_(i,n,O))},enqueueReplaceState:function(n,i,d){n=n._reactInternals;var O=$g(),le=Ug(O);le.tag=1,le.payload=i,d!=null&&(le.callback=d),i=L_(n,le,O),i!==null&&(Bg(i,n,O),D_(i,n,O))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var d=$g(),O=Ug(d);O.tag=2,i!=null&&(O.callback=i),i=L_(n,O,d),i!==null&&(Bg(i,n,d),D_(i,n,d))}};function e0(n,i,d,O,le,Ee,ms){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(O,Ee,ms):i.prototype&&i.prototype.isPureReactComponent?!b_(d,O)||!b_(le,Ee):!0}function t0(n,i,d,O){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(d,O),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(d,O),i.state!==n&&Hp.enqueueReplaceState(i,i.state,null)}function n0(n,i){var d=i;if("ref"in i){d={};for(var O in i)O!=="ref"&&(d[O]=i[O])}if(n=n.defaultProps){d===i&&(d=w({},d));for(var le in n)d[le]===void 0&&(d[le]=n[le])}return d}function y0(n){x1(n)}function h0(n){console.error(n)}function I0(n){x1(n)}function Kp(n,i){try{var d=n.onUncaughtError;d(i.value,{componentStack:i.stack})}catch(O){setTimeout(function(){throw O})}}function B0(n,i,d){try{var O=n.onCaughtError;O(d.value,{componentStack:d.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(le){setTimeout(function(){throw le})}}function em(n,i,d){return d=Ug(d),d.tag=3,d.payload={element:null},d.callback=function(){Kp(n,i)},d}function k0(n){return n=Ug(n),n.tag=3,n}function J0(n,i,d,O){var le=d.type.getDerivedStateFromError;if(typeof le=="function"){var Ee=O.value;n.payload=function(){return le(Ee)},n.callback=function(){B0(i,d,O)}}var ms=d.stateNode;ms!==null&&typeof ms.componentDidCatch=="function"&&(n.callback=function(){B0(i,d,O),typeof le!="function"&&(Uy===null?Uy=new Set([this]):Uy.add(this));var Hl=O.stack;this.componentDidCatch(O.value,{componentStack:Hl!==null?Hl:""})})}function vs(n,i,d,O,le){if(d.flags|=32768,O!==null&&typeof O=="object"&&typeof O.then=="function"){if(i=d.alternate,i!==null&&xy(i,d,le,!0),d=qg.current,d!==null){switch(d.tag){case 31:case 13:return Wg===null?Ox():d.alternate===null&&z1===0&&(z1=3),d.flags&=-257,d.flags|=65536,d.lanes=le,O===Im?d.flags|=16384:(i=d.updateQueue,i===null?d.updateQueue=new Set([O]):i.add(O),g3(n,O,le)),!1;case 22:return d.flags|=65536,O===Im?d.flags|=16384:(i=d.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([O])},d.updateQueue=i):(d=i.retryQueue,d===null?i.retryQueue=new Set([O]):d.add(O)),g3(n,O,le)),!1}throw Error(a(435,d.tag))}return g3(n,O,le),Ox(),!1}if(Wv)return i=qg.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=le,O!==Sx&&(n=Error(a(422),{cause:O}),o2(Lg(n,d)))):(O!==Sx&&(i=Error(a(423),{cause:O}),o2(Lg(i,d))),n=n.current.alternate,n.flags|=65536,le&=-le,n.lanes|=le,O=Lg(O,d),le=em(n.stateNode,O,le),Lx(n,le),z1!==4&&(z1=2)),!1;var Ee=Error(a(520),{cause:O});if(Ee=Lg(Ee,d),B2===null?B2=[Ee]:B2.push(Ee),z1!==4&&(z1=2),i===null)return!0;O=Lg(O,d),d=i;do{switch(d.tag){case 3:return d.flags|=65536,n=le&-le,d.lanes|=n,n=em(d.stateNode,O,n),Lx(d,n),!1;case 1:if(i=d.type,Ee=d.stateNode,(d.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||Ee!==null&&typeof Ee.componentDidCatch=="function"&&(Uy===null||!Uy.has(Ee))))return d.flags|=65536,le&=-le,d.lanes|=le,le=k0(le),J0(le,n,d,O),Lx(d,le),!1}d=d.return}while(d!==null);return!1}var jl=Error(a(461)),zl=!1;function Ve(n,i,d,O){i.child=n===null?ug(i,null,d,O):Nv(i,n.child,d,O)}function pn(n,i,d,O,le){d=d.render;var Ee=i.ref;if("ref"in O){var ms={};for(var Hl in O)Hl!=="ref"&&(ms[Hl]=O[Hl])}else ms=O;return s_(i),O=i3(n,i,d,ms,Ee,le),Hl=s3(),n!==null&&!zl?(o3(n,i,le),Dm(n,i,le)):(Wv&&Hl&&wx(i),i.flags|=1,Ve(n,i,O,le),i.child)}function ci(n,i,d,O,le){if(n===null){var Ee=d.type;return typeof Ee=="function"&&!L2(Ee)&&Ee.defaultProps===void 0&&d.compare===null?(i.tag=15,i.type=Ee,_n(n,i,Ee,O,le)):(n=w_(d.type,null,O,i,i.mode,le),n.ref=i.ref,n.return=i,i.child=n)}if(Ee=n.child,!Zm(n,le)){var ms=Ee.memoizedProps;if(d=d.compare,d=d!==null?d:b_,d(ms,O)&&n.ref===i.ref)return Dm(n,i,le)}return i.flags|=1,n=ty(Ee,O),n.ref=i.ref,n.return=i,i.child=n}function _n(n,i,d,O,le){if(n!==null){var Ee=n.memoizedProps;if(b_(Ee,O)&&n.ref===i.ref)if(zl=!1,i.pendingProps=O=Ee,Zm(n,le))(n.flags&131072)!==0&&(zl=!0);else return i.lanes=n.lanes,Dm(n,i,le)}return b0(n,i,d,O,le)}function Tp(n,i,d,O){var le=O.children,Ee=n!==null?n.memoizedState:null;if(n===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),O.mode==="hidden"){if((i.flags&128)!==0){if(Ee=Ee!==null?Ee.baseLanes|d:d,n!==null){for(O=i.child=n.child,le=0;O!==null;)le=le|O.lanes|O.childLanes,O=O.sibling;O=le&~Ee}else O=0,i.child=null;return Ip(n,i,Ee,d,O)}if((d&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&av(i,Ee!==null?Ee.cachePool:null),Ee!==null?t3(i,Ee):r3(),r5(i);else return O=i.lanes=536870912,Ip(n,i,Ee!==null?Ee.baseLanes|d:d,d,O)}else Ee!==null?(av(i,Ee.cachePool),t3(i,Ee),N_(),i.memoizedState=null):(n!==null&&av(i,null),r3(),N_());return Ve(n,i,le,d),i.child}function Sp(n,i){return n!==null&&n.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function Ip(n,i,d,O,le){var Ee=am();return Ee=Ee===null?null:{parent:W1._currentValue,pool:Ee},i.memoizedState={baseLanes:d,cachePool:Ee},n!==null&&av(i,null),r3(),r5(i),n!==null&&xy(n,i,O,!0),i.childLanes=le,null}function Jp(n,i){return i=Om({mode:i.mode,children:i.children},n.mode),i.ref=n.ref,n.child=i,i.return=n,i}function m0(n,i,d){return Nv(i,n.child,null,d),n=Jp(i,i.pendingProps),n.flags|=2,Yg(i),i.memoizedState=null,n}function Dp(n,i,d){var O=i.pendingProps,le=(i.flags&128)!==0;if(i.flags&=-129,n===null){if(Wv){if(O.mode==="hidden")return n=Jp(i,O),i.lanes=536870912,Sp(null,n);if(a3(i),(n=k1)?(n=I3(n,yg),n=n!==null&&n.data==="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:Oy!==null?{id:Vg,overflow:ry}:null,retryLane:536870912,hydrationErrors:null},d=hb(n),d.return=i,i.child=d,lg=i,k1=null)):n=null,n===null)throw vy(i);return i.lanes=536870912,null}return Jp(i,O)}var Ee=n.memoizedState;if(Ee!==null){var ms=Ee.dehydrated;if(a3(i),le)if(i.flags&256)i.flags&=-257,i=m0(n,i,d);else if(i.memoizedState!==null)i.child=n.child,i.flags|=128,i=null;else throw Error(a(558));else if(zl||xy(n,i,d,!1),le=(d&n.childLanes)!==0,zl||le){if(O=Tv,O!==null&&(ms=h1(O,d),ms!==0&&ms!==Ee.retryLane))throw Ee.retryLane=ms,r_(n,ms),Bg(O,n,ms),jl;Ox(),i=m0(n,i,d)}else n=Ee.treeContext,k1=oy(ms.nextSibling),lg=i,Wv=!0,ny=null,yg=!1,n!==null&&Mx(i,n),i=Jp(i,O),i.flags|=4096;return i}return n=ty(n.child,{mode:O.mode,children:O.children}),n.ref=i.ref,i.child=n,n.return=i,n}function c0(n,i){var d=i.ref;if(d===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof d!="function"&&typeof d!="object")throw Error(a(284));(n===null||n.ref!==d)&&(i.flags|=4194816)}}function b0(n,i,d,O,le){return s_(i),d=i3(n,i,d,O,void 0,le),O=s3(),n!==null&&!zl?(o3(n,i,le),Dm(n,i,le)):(Wv&&O&&wx(i),i.flags|=1,Ve(n,i,d,le),i.child)}function E0(n,i,d,O,le,Ee){return s_(i),i.updateQueue=null,d=n5(i,O,d,le),a5(n),O=s3(),n!==null&&!zl?(o3(n,i,Ee),Dm(n,i,Ee)):(Wv&&O&&wx(i),i.flags|=1,Ve(n,i,d,Ee),i.child)}function gm(n,i,d,O,le){if(s_(i),i.stateNode===null){var Ee=a_,ms=d.contextType;typeof ms=="object"&&ms!==null&&(Ee=cg(ms)),Ee=new d(O,Ee),i.memoizedState=Ee.state!==null&&Ee.state!==void 0?Ee.state:null,Ee.updater=Hp,i.stateNode=Ee,Ee._reactInternals=i,Ee=i.stateNode,Ee.props=O,Ee.state=i.memoizedState,Ee.refs={},o_(i),ms=d.contextType,Ee.context=typeof ms=="object"&&ms!==null?cg(ms):a_,Ee.state=i.memoizedState,ms=d.getDerivedStateFromProps,typeof ms=="function"&&(Cp(i,d,ms,O),Ee.state=i.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof Ee.getSnapshotBeforeUpdate=="function"||typeof Ee.UNSAFE_componentWillMount!="function"&&typeof Ee.componentWillMount!="function"||(ms=Ee.state,typeof Ee.componentWillMount=="function"&&Ee.componentWillMount(),typeof Ee.UNSAFE_componentWillMount=="function"&&Ee.UNSAFE_componentWillMount(),ms!==Ee.state&&Hp.enqueueReplaceState(Ee,Ee.state,null),Nx(i,O,Ee,le),kx(),Ee.state=i.memoizedState),typeof Ee.componentDidMount=="function"&&(i.flags|=4194308),O=!0}else if(n===null){Ee=i.stateNode;var Hl=i.memoizedProps,f0=n0(d,Hl);Ee.props=f0;var Z0=Ee.context,ym=d.contextType;ms=a_,typeof ym=="object"&&ym!==null&&(ms=cg(ym));var _m=d.getDerivedStateFromProps;ym=typeof _m=="function"||typeof Ee.getSnapshotBeforeUpdate=="function",Hl=i.pendingProps!==Hl,ym||typeof Ee.UNSAFE_componentWillReceiveProps!="function"&&typeof Ee.componentWillReceiveProps!="function"||(Hl||Z0!==ms)&&t0(i,Ee,O,ms),Tg=!1;var T0=i.memoizedState;Ee.state=T0,Nx(i,O,Ee,le),kx(),Z0=i.memoizedState,Hl||T0!==Z0||Tg?(typeof _m=="function"&&(Cp(i,d,_m,O),Z0=i.memoizedState),(f0=Tg||e0(i,d,f0,O,T0,Z0,ms))?(ym||typeof Ee.UNSAFE_componentWillMount!="function"&&typeof Ee.componentWillMount!="function"||(typeof Ee.componentWillMount=="function"&&Ee.componentWillMount(),typeof Ee.UNSAFE_componentWillMount=="function"&&Ee.UNSAFE_componentWillMount()),typeof Ee.componentDidMount=="function"&&(i.flags|=4194308)):(typeof Ee.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=O,i.memoizedState=Z0),Ee.props=O,Ee.state=Z0,Ee.context=ms,O=f0):(typeof Ee.componentDidMount=="function"&&(i.flags|=4194308),O=!1)}else{Ee=i.stateNode,R_(n,i),ms=i.memoizedProps,ym=n0(d,ms),Ee.props=ym,_m=i.pendingProps,T0=Ee.context,Z0=d.contextType,f0=a_,typeof Z0=="object"&&Z0!==null&&(f0=cg(Z0)),Hl=d.getDerivedStateFromProps,(Z0=typeof Hl=="function"||typeof Ee.getSnapshotBeforeUpdate=="function")||typeof Ee.UNSAFE_componentWillReceiveProps!="function"&&typeof Ee.componentWillReceiveProps!="function"||(ms!==_m||T0!==f0)&&t0(i,Ee,O,f0),Tg=!1,T0=i.memoizedState,Ee.state=T0,Nx(i,O,Ee,le),kx();var Q0=i.memoizedState;ms!==_m||T0!==Q0||Tg||n!==null&&n.dependencies!==null&&l2(n.dependencies)?(typeof Hl=="function"&&(Cp(i,d,Hl,O),Q0=i.memoizedState),(ym=Tg||e0(i,d,ym,O,T0,Q0,f0)||n!==null&&n.dependencies!==null&&l2(n.dependencies))?(Z0||typeof Ee.UNSAFE_componentWillUpdate!="function"&&typeof Ee.componentWillUpdate!="function"||(typeof Ee.componentWillUpdate=="function"&&Ee.componentWillUpdate(O,Q0,f0),typeof Ee.UNSAFE_componentWillUpdate=="function"&&Ee.UNSAFE_componentWillUpdate(O,Q0,f0)),typeof Ee.componentDidUpdate=="function"&&(i.flags|=4),typeof Ee.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof Ee.componentDidUpdate!="function"||ms===n.memoizedProps&&T0===n.memoizedState||(i.flags|=4),typeof Ee.getSnapshotBeforeUpdate!="function"||ms===n.memoizedProps&&T0===n.memoizedState||(i.flags|=1024),i.memoizedProps=O,i.memoizedState=Q0),Ee.props=O,Ee.state=Q0,Ee.context=f0,O=ym):(typeof Ee.componentDidUpdate!="function"||ms===n.memoizedProps&&T0===n.memoizedState||(i.flags|=4),typeof Ee.getSnapshotBeforeUpdate!="function"||ms===n.memoizedProps&&T0===n.memoizedState||(i.flags|=1024),O=!1)}return Ee=O,c0(n,i),O=(i.flags&128)!==0,Ee||O?(Ee=i.stateNode,d=O&&typeof d.getDerivedStateFromError!="function"?null:Ee.render(),i.flags|=1,n!==null&&O?(i.child=Nv(i,n.child,null,le),i.child=Nv(i,null,d,le)):Ve(n,i,d,le),i.memoizedState=Ee.state,n=i.child):n=Dm(n,i,le),n}function Nm(n,i,d,O){return i_(),i.flags|=256,Ve(n,i,d,O),i.child}var Bm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function xm(n){return{baseLanes:n,cachePool:q0()}}function Am(n,i,d){return n=n!==null?n.childLanes&~d:0,i&&(n|=Ag),n}function mm(n,i,d){var O=i.pendingProps,le=!1,Ee=(i.flags&128)!==0,ms;if((ms=Ee)||(ms=n!==null&&n.memoizedState===null?!1:(tg.current&2)!==0),ms&&(le=!0,i.flags&=-129),ms=(i.flags&32)!==0,i.flags&=-33,n===null){if(Wv){if(le?k_(i):N_(),(n=k1)?(n=I3(n,yg),n=n!==null&&n.data!=="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:Oy!==null?{id:Vg,overflow:ry}:null,retryLane:536870912,hydrationErrors:null},d=hb(n),d.return=i,i.child=d,lg=i,k1=null)):n=null,n===null)throw vy(i);return U3(n)?i.lanes=32:i.lanes=536870912,null}var Hl=O.children;return O=O.fallback,le?(N_(),le=i.mode,Hl=Om({mode:"hidden",children:Hl},le),O=n_(O,le,d,null),Hl.return=i,O.return=i,Hl.sibling=O,i.child=Hl,O=i.child,O.memoizedState=xm(d),O.childLanes=Am(n,ms,d),i.memoizedState=Bm,Sp(null,O)):(k_(i),vm(i,Hl))}var f0=n.memoizedState;if(f0!==null&&(Hl=f0.dehydrated,Hl!==null)){if(Ee)i.flags&256?(k_(i),i.flags&=-257,i=Lm(n,i,d)):i.memoizedState!==null?(N_(),i.child=n.child,i.flags|=128,i=null):(N_(),Hl=O.fallback,le=i.mode,O=Om({mode:"visible",children:O.children},le),Hl=n_(Hl,le,d,null),Hl.flags|=2,O.return=i,Hl.return=i,O.sibling=Hl,i.child=O,Nv(i,n.child,null,d),O=i.child,O.memoizedState=xm(d),O.childLanes=Am(n,ms,d),i.memoizedState=Bm,i=Sp(null,O));else if(k_(i),U3(Hl)){if(ms=Hl.nextSibling&&Hl.nextSibling.dataset,ms)var Z0=ms.dgst;ms=Z0,O=Error(a(419)),O.stack="",O.digest=ms,o2({value:O,source:null,stack:null}),i=Lm(n,i,d)}else if(zl||xy(n,i,d,!1),ms=(d&n.childLanes)!==0,zl||ms){if(ms=Tv,ms!==null&&(O=h1(ms,d),O!==0&&O!==f0.retryLane))throw f0.retryLane=O,r_(n,O),Bg(ms,n,O),jl;Pb(Hl)||Ox(),i=Lm(n,i,d)}else Pb(Hl)?(i.flags|=192,i.child=n.child,i=null):(n=f0.treeContext,k1=oy(Hl.nextSibling),lg=i,Wv=!0,ny=null,yg=!1,n!==null&&Mx(i,n),i=vm(i,O.children),i.flags|=4096);return i}return le?(N_(),Hl=O.fallback,le=i.mode,f0=n.child,Z0=f0.sibling,O=ty(f0,{mode:"hidden",children:O.children}),O.subtreeFlags=f0.subtreeFlags&65011712,Z0!==null?Hl=ty(Z0,Hl):(Hl=n_(Hl,le,d,null),Hl.flags|=2),Hl.return=i,O.return=i,O.sibling=Hl,i.child=O,Sp(null,O),O=i.child,Hl=n.child.memoizedState,Hl===null?Hl=xm(d):(le=Hl.cachePool,le!==null?(f0=W1._currentValue,le=le.parent!==f0?{parent:f0,pool:f0}:le):le=q0(),Hl={baseLanes:Hl.baseLanes|d,cachePool:le}),O.memoizedState=Hl,O.childLanes=Am(n,ms,d),i.memoizedState=Bm,Sp(n.child,O)):(k_(i),d=n.child,n=d.sibling,d=ty(d,{mode:"visible",children:O.children}),d.return=i,d.sibling=null,n!==null&&(ms=i.deletions,ms===null?(i.deletions=[n],i.flags|=16):ms.push(n)),i.child=d,i.memoizedState=null,d)}function vm(n,i){return i=Om({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function Om(n,i){return n=Mg(22,n,null,i),n.lanes=0,n}function Lm(n,i,d){return Nv(i,n.child,null,d),n=vm(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function Um(n,i,d){n.lanes|=i;var O=n.alternate;O!==null&&(O.lanes|=i),Ax(n.return,i,d)}function Em(n,i,d,O,le,Ee){var ms=n.memoizedState;ms===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:O,tail:d,tailMode:le,treeForkCount:Ee}:(ms.isBackwards=i,ms.rendering=null,ms.renderingStartTime=0,ms.last=O,ms.tail=d,ms.tailMode=le,ms.treeForkCount=Ee)}function lm(n,i,d){var O=i.pendingProps,le=O.revealOrder,Ee=O.tail;O=O.children;var ms=tg.current,Hl=(ms&2)!==0;if(Hl?(ms=ms&1|2,i.flags|=128):ms&=1,_s(tg,ms),Ve(n,i,O,d),O=Wv?i2:0,!Hl&&n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Um(n,d,i);else if(n.tag===19)Um(n,d,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(le){case"forwards":for(d=i.child,le=null;d!==null;)n=d.alternate,n!==null&&fg(n)===null&&(le=d),d=d.sibling;d=le,d===null?(le=i.child,i.child=null):(le=d.sibling,d.sibling=null),Em(i,!1,le,d,Ee,O);break;case"backwards":case"unstable_legacy-backwards":for(d=null,le=i.child,i.child=null;le!==null;){if(n=le.alternate,n!==null&&fg(n)===null){i.child=le;break}n=le.sibling,le.sibling=d,d=le,le=n}Em(i,!0,d,null,Ee,O);break;case"together":Em(i,!1,null,null,void 0,O);break;default:i.memoizedState=null}return i.child}function Dm(n,i,d){if(n!==null&&(i.dependencies=n.dependencies),wy|=i.lanes,(d&i.childLanes)===0)if(n!==null){if(xy(n,i,d,!1),(d&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(a(153));if(i.child!==null){for(n=i.child,d=ty(n,n.pendingProps),i.child=d,d.return=i;n.sibling!==null;)n=n.sibling,d=d.sibling=ty(n,n.pendingProps),d.return=i;d.sibling=null}return i.child}function Zm(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&l2(n)))}function rv(n,i,d){switch(i.tag){case 3:Lp(i,i.stateNode.containerInfo),Iy(i,W1,n.memoizedState.cache),i_();break;case 27:case 5:R0(i);break;case 4:Lp(i,i.stateNode.containerInfo);break;case 10:Iy(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,a3(i),null;break;case 13:var O=i.memoizedState;if(O!==null)return O.dehydrated!==null?(k_(i),i.flags|=128,null):(d&i.child.childLanes)!==0?mm(n,i,d):(k_(i),n=Dm(n,i,d),n!==null?n.sibling:null);k_(i);break;case 19:var le=(n.flags&128)!==0;if(O=(d&i.childLanes)!==0,O||(xy(n,i,d,!1),O=(d&i.childLanes)!==0),le){if(O)return lm(n,i,d);i.flags|=128}if(le=i.memoizedState,le!==null&&(le.rendering=null,le.tail=null,le.lastEffect=null),_s(tg,tg.current),O)break;return null;case 22:return i.lanes=0,Tp(n,i,d,i.pendingProps);case 24:Iy(i,W1,n.memoizedState.cache)}return Dm(n,i,d)}function zm(n,i,d){if(n!==null)if(n.memoizedProps!==i.pendingProps)zl=!0;else{if(!Zm(n,d)&&(i.flags&128)===0)return zl=!1,rv(n,i,d);zl=(n.flags&131072)!==0}else zl=!1,Wv&&(i.flags&1048576)!==0&&ay(i,i2,i.index);switch(i.lanes=0,i.tag){case 16:e:{var O=i.pendingProps;if(n=Yv(i.elementType),i.type=n,typeof n=="function")L2(n)?(O=n0(n,O),i.tag=1,i=gm(null,i,n,O,d)):(i.tag=0,i=b0(null,i,n,O,d));else{if(n!=null){var le=n.$$typeof;if(le===F){i.tag=11,i=pn(null,i,n,O,d);break e}else if(le===k){i.tag=14,i=ci(null,i,n,O,d);break e}}throw i=ue(n)||n,Error(a(306,i,""))}}return i;case 0:return b0(n,i,i.type,i.pendingProps,d);case 1:return O=i.type,le=n0(O,i.pendingProps),gm(n,i,O,le,d);case 3:e:{if(Lp(i,i.stateNode.containerInfo),n===null)throw Error(a(387));O=i.pendingProps;var Ee=i.memoizedState;le=Ee.element,R_(n,i),Nx(i,O,null,d);var ms=i.memoizedState;if(O=ms.cache,Iy(i,W1,O),O!==Ee.cache&&Cx(i,[W1],d,!0),kx(),O=ms.element,Ee.isDehydrated)if(Ee={element:O,isDehydrated:!1,cache:ms.cache},i.updateQueue.baseState=Ee,i.memoizedState=Ee,i.flags&256){i=Nm(n,i,O,d);break e}else if(O!==le){le=Lg(Error(a(424)),i),o2(le),i=Nm(n,i,O,d);break e}else{switch(n=i.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(k1=oy(n.firstChild),lg=i,Wv=!0,ny=null,yg=!0,d=ug(i,null,O,d),i.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling}else{if(i_(),O===le){i=Dm(n,i,d);break e}Ve(n,i,O,d)}i=i.child}return i;case 26:return c0(n,i),n===null?(d=U5(i.type,null,i.pendingProps,null))?i.memoizedState=d:Wv||(d=i.type,n=i.pendingProps,O=kb(Wl.current).createElement(d),O[d1]=i,O[A1]=n,sg(O,d,n),cv(O),i.stateNode=O):i.memoizedState=U5(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return R0(i),n===null&&Wv&&(O=i.stateNode=P5(i.type,i.pendingProps,Wl.current),lg=i,yg=!0,le=k1,I_(i.type)?(F3=le,k1=oy(O.firstChild)):k1=le),Ve(n,i,i.pendingProps.children,d),c0(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&Wv&&((le=O=k1)&&(O=N5(O,i.type,i.pendingProps,yg),O!==null?(i.stateNode=O,lg=i,k1=oy(O.firstChild),yg=!1,le=!0):le=!1),le||vy(i)),R0(i),le=i.type,Ee=i.pendingProps,ms=n!==null?n.memoizedProps:null,O=Ee.children,Nb(le,Ee)?O=null:ms!==null&&Nb(le,ms)&&(i.flags|=32),i.memoizedState!==null&&(le=i3(n,i,W5,null,null,d),F_._currentValue=le),c0(n,i),Ve(n,i,O,d),i.child;case 6:return n===null&&Wv&&((n=d=k1)&&(d=z5(d,i.pendingProps,yg),d!==null?(i.stateNode=d,lg=i,k1=null,n=!0):n=!1),n||vy(i)),null;case 13:return mm(n,i,d);case 4:return Lp(i,i.stateNode.containerInfo),O=i.pendingProps,n===null?i.child=Nv(i,null,O,d):Ve(n,i,O,d),i.child;case 11:return pn(n,i,i.type,i.pendingProps,d);case 7:return Ve(n,i,i.pendingProps,d),i.child;case 8:return Ve(n,i,i.pendingProps.children,d),i.child;case 12:return Ve(n,i,i.pendingProps.children,d),i.child;case 10:return O=i.pendingProps,Iy(i,i.type,O.value),Ve(n,i,O.children,d),i.child;case 9:return le=i.type._context,O=i.pendingProps.children,s_(i),le=cg(le),O=O(le),i.flags|=1,Ve(n,i,O,d),i.child;case 14:return ci(n,i,i.type,i.pendingProps,d);case 15:return _n(n,i,i.type,i.pendingProps,d);case 19:return lm(n,i,d);case 31:return Dp(n,i,d);case 22:return Tp(n,i,d,i.pendingProps);case 24:return s_(i),O=cg(W1),n===null?(le=am(),le===null&&(le=Tv,Ee=z2(),le.pooledCache=Ee,Ee.refCount++,Ee!==null&&(le.pooledCacheLanes|=d),le=Ee),i.memoizedState={parent:O,cache:le},o_(i),Iy(i,W1,le)):((n.lanes&d)!==0&&(R_(n,i),Nx(i,null,null,d),kx()),le=n.memoizedState,Ee=i.memoizedState,le.parent!==O?(le={parent:O,cache:O},i.memoizedState=le,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=le),Iy(i,W1,O)):(O=Ee.cache,Iy(i,W1,O),O!==le.cache&&Cx(i,[W1],d,!0))),Ve(n,i,i.pendingProps.children,d),i.child;case 29:throw i.pendingProps}throw Error(a(156,i.tag))}function Ym(n){n.flags|=4}function Km(n,i,d,O,le){if((i=(n.mode&32)!==0)&&(i=!1),i){if(n.flags|=16777216,(le&335544128)===le)if(n.stateNode.complete)n.flags|=8192;else if(u5())n.flags|=8192;else throw Pv=Im,l1}else n.flags&=-16777217}function _v(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!$3(i))if(u5())n.flags|=8192;else throw Pv=Im,l1}function Hm(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?jp():536870912,n.lanes|=i,F2|=i)}function uv(n,i){if(!Wv)switch(n.tailMode){case"hidden":i=n.tail;for(var d=null;i!==null;)i.alternate!==null&&(d=i),i=i.sibling;d===null?n.tail=null:d.sibling=null;break;case"collapsed":d=n.tail;for(var O=null;d!==null;)d.alternate!==null&&(O=d),d=d.sibling;O===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:O.sibling=null}}function dt(n){var i=n.alternate!==null&&n.alternate.child===n.child,d=0,O=0;if(i)for(var le=n.child;le!==null;)d|=le.lanes|le.childLanes,O|=le.subtreeFlags&65011712,O|=le.flags&65011712,le.return=n,le=le.sibling;else for(le=n.child;le!==null;)d|=le.lanes|le.childLanes,O|=le.subtreeFlags,O|=le.flags,le.return=n,le=le.sibling;return n.subtreeFlags|=O,n.childLanes=d,i}function Fe(n,i,d){var O=i.pendingProps;switch(s2(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dt(i),null;case 1:return dt(i),null;case 3:return d=i.stateNode,O=null,n!==null&&(O=n.memoizedState.cache),i.memoizedState.cache!==O&&(i.flags|=2048),_y(W1),Op(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(n===null||n.child===null)&&(gy(i)?Ym(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Tx())),dt(i),null;case 26:var le=i.type,Ee=i.memoizedState;return n===null?(Ym(i),Ee!==null?(dt(i),_v(i,Ee)):(dt(i),Km(i,le,null,O,d))):Ee?Ee!==n.memoizedState?(Ym(i),dt(i),_v(i,Ee)):(dt(i),i.flags&=-16777217):(n=n.memoizedProps,n!==O&&Ym(i),dt(i),Km(i,le,n,O,d)),null;case 27:if(N0(i),d=Wl.current,le=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==O&&Ym(i);else{if(!O){if(i.stateNode===null)throw Error(a(166));return dt(i),null}n=Ei.current,gy(i)?db(i):(n=P5(le,O,d),i.stateNode=n,Ym(i))}return dt(i),null;case 5:if(N0(i),le=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==O&&Ym(i);else{if(!O){if(i.stateNode===null)throw Error(a(166));return dt(i),null}if(Ee=Ei.current,gy(i))db(i);else{var ms=kb(Wl.current);switch(Ee){case 1:Ee=ms.createElementNS("http://www.w3.org/2000/svg",le);break;case 2:Ee=ms.createElementNS("http://www.w3.org/1998/Math/MathML",le);break;default:switch(le){case"svg":Ee=ms.createElementNS("http://www.w3.org/2000/svg",le);break;case"math":Ee=ms.createElementNS("http://www.w3.org/1998/Math/MathML",le);break;case"script":Ee=ms.createElement("div"),Ee.innerHTML="<script><\/script>",Ee=Ee.removeChild(Ee.firstChild);break;case"select":Ee=typeof O.is=="string"?ms.createElement("select",{is:O.is}):ms.createElement("select"),O.multiple?Ee.multiple=!0:O.size&&(Ee.size=O.size);break;default:Ee=typeof O.is=="string"?ms.createElement(le,{is:O.is}):ms.createElement(le)}}Ee[d1]=i,Ee[A1]=O;e:for(ms=i.child;ms!==null;){if(ms.tag===5||ms.tag===6)Ee.appendChild(ms.stateNode);else if(ms.tag!==4&&ms.tag!==27&&ms.child!==null){ms.child.return=ms,ms=ms.child;continue}if(ms===i)break e;for(;ms.sibling===null;){if(ms.return===null||ms.return===i)break e;ms=ms.return}ms.sibling.return=ms.return,ms=ms.sibling}i.stateNode=Ee;e:switch(sg(Ee,le,O),le){case"button":case"input":case"select":case"textarea":O=!!O.autoFocus;break e;case"img":O=!0;break e;default:O=!1}O&&Ym(i)}}return dt(i),Km(i,i.type,n===null?null:n.memoizedProps,i.pendingProps,d),null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==O&&Ym(i);else{if(typeof O!="string"&&i.stateNode===null)throw Error(a(166));if(n=Wl.current,gy(i)){if(n=i.stateNode,d=i.memoizedProps,O=null,le=lg,le!==null)switch(le.tag){case 27:case 5:O=le.memoizedProps}n[d1]=i,n=!!(n.nodeValue===d||O!==null&&O.suppressHydrationWarning===!0||C3(n.nodeValue,d)),n||vy(i,!0)}else n=kb(n).createTextNode(O),n[d1]=i,i.stateNode=n}return dt(i),null;case 31:if(d=i.memoizedState,n===null||n.memoizedState!==null){if(O=gy(i),d!==null){if(n===null){if(!O)throw Error(a(318));if(n=i.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(a(557));n[d1]=i}else i_(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;dt(i),n=!1}else d=Tx(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=d),n=!0;if(!n)return i.flags&256?(Yg(i),i):(Yg(i),null);if((i.flags&128)!==0)throw Error(a(558))}return dt(i),null;case 13:if(O=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(le=gy(i),O!==null&&O.dehydrated!==null){if(n===null){if(!le)throw Error(a(318));if(le=i.memoizedState,le=le!==null?le.dehydrated:null,!le)throw Error(a(317));le[d1]=i}else i_(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;dt(i),le=!1}else le=Tx(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=le),le=!0;if(!le)return i.flags&256?(Yg(i),i):(Yg(i),null)}return Yg(i),(i.flags&128)!==0?(i.lanes=d,i):(d=O!==null,n=n!==null&&n.memoizedState!==null,d&&(O=i.child,le=null,O.alternate!==null&&O.alternate.memoizedState!==null&&O.alternate.memoizedState.cachePool!==null&&(le=O.alternate.memoizedState.cachePool.pool),Ee=null,O.memoizedState!==null&&O.memoizedState.cachePool!==null&&(Ee=O.memoizedState.cachePool.pool),Ee!==le&&(O.flags|=2048)),d!==n&&d&&(i.child.flags|=8192),Hm(i,i.updateQueue),dt(i),null);case 4:return Op(),n===null&&Ab(i.stateNode.containerInfo),dt(i),null;case 10:return _y(i.type),dt(i),null;case 19:if(pr(tg),O=i.memoizedState,O===null)return dt(i),null;if(le=(i.flags&128)!==0,Ee=O.rendering,Ee===null)if(le)uv(O,!1);else{if(z1!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(Ee=fg(n),Ee!==null){for(i.flags|=128,uv(O,!1),n=Ee.updateQueue,i.updateQueue=n,Hm(i,n),i.subtreeFlags=0,n=d,d=i.child;d!==null;)D2(d,n),d=d.sibling;return _s(tg,tg.current&1|2),Wv&&my(i,O.treeForkCount),i.child}n=n.sibling}O.tail!==null&&a0()>sy&&(i.flags|=128,le=!0,uv(O,!1),i.lanes=4194304)}else{if(!le)if(n=fg(Ee),n!==null){if(i.flags|=128,le=!0,n=n.updateQueue,i.updateQueue=n,Hm(i,n),uv(O,!0),O.tail===null&&O.tailMode==="hidden"&&!Ee.alternate&&!Wv)return dt(i),null}else 2*a0()-O.renderingStartTime>sy&&d!==536870912&&(i.flags|=128,le=!0,uv(O,!1),i.lanes=4194304);O.isBackwards?(Ee.sibling=i.child,i.child=Ee):(n=O.last,n!==null?n.sibling=Ee:i.child=Ee,O.last=Ee)}return O.tail!==null?(n=O.tail,O.rendering=n,O.tail=n.sibling,O.renderingStartTime=a0(),n.sibling=null,d=tg.current,_s(tg,le?d&1|2:d&1),Wv&&my(i,O.treeForkCount),n):(dt(i),null);case 22:case 23:return Yg(i),vb(),O=i.memoizedState!==null,n!==null?n.memoizedState!==null!==O&&(i.flags|=8192):O&&(i.flags|=8192),O?(d&536870912)!==0&&(i.flags&128)===0&&(dt(i),i.subtreeFlags&6&&(i.flags|=8192)):dt(i),d=i.updateQueue,d!==null&&Hm(i,d.retryQueue),d=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(d=n.memoizedState.cachePool.pool),O=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(O=i.memoizedState.cachePool.pool),O!==d&&(i.flags|=2048),n!==null&&pr(hm),null;case 24:return d=null,n!==null&&(d=n.memoizedState.cache),i.memoizedState.cache!==d&&(i.flags|=2048),_y(W1),dt(i),null;case 25:return null;case 30:return null}throw Error(a(156,i.tag))}function Gp(n,i){switch(s2(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return _y(W1),Op(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return N0(i),null;case 31:if(i.memoizedState!==null){if(Yg(i),i.alternate===null)throw Error(a(340));i_()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 13:if(Yg(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(a(340));i_()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return pr(tg),null;case 4:return Op(),null;case 10:return _y(i.type),null;case 22:case 23:return Yg(i),vb(),n!==null&&pr(hm),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return _y(W1),null;case 25:return null;default:return null}}function kp(n,i){switch(s2(i),i.tag){case 3:_y(W1),Op();break;case 26:case 27:case 5:N0(i);break;case 4:Op();break;case 31:i.memoizedState!==null&&Yg(i);break;case 13:Yg(i);break;case 19:pr(tg);break;case 10:_y(i.type);break;case 22:case 23:Yg(i),vb(),n!==null&&pr(hm);break;case 24:_y(W1)}}function yp(n,i){try{var d=i.updateQueue,O=d!==null?d.lastEffect:null;if(O!==null){var le=O.next;d=le;do{if((d.tag&n)===n){O=void 0;var Ee=d.create,ms=d.inst;O=Ee(),ms.destroy=O}d=d.next}while(d!==le)}}catch(Hl){E1(i,i.return,Hl)}}function bp(n,i,d){try{var O=i.updateQueue,le=O!==null?O.lastEffect:null;if(le!==null){var Ee=le.next;O=Ee;do{if((O.tag&n)===n){var ms=O.inst,Hl=ms.destroy;if(Hl!==void 0){ms.destroy=void 0,le=i;var f0=d,Z0=Hl;try{Z0()}catch(ym){E1(le,f0,ym)}}}O=O.next}while(O!==Ee)}}catch(ym){E1(i,i.return,ym)}}function Pp(n){var i=n.updateQueue;if(i!==null){var d=n.stateNode;try{t5(i,d)}catch(O){E1(n,n.return,O)}}}function s0(n,i,d){d.props=n0(n.type,n.memoizedProps),d.state=n.memoizedState;try{d.componentWillUnmount()}catch(O){E1(n,i,O)}}function Rp(n,i){try{var d=n.ref;if(d!==null){switch(n.tag){case 26:case 27:case 5:var O=n.stateNode;break;case 30:O=n.stateNode;break;default:O=n.stateNode}typeof d=="function"?n.refCleanup=d(O):d.current=O}}catch(le){E1(n,i,le)}}function Vp(n,i){var d=n.ref,O=n.refCleanup;if(d!==null)if(typeof O=="function")try{O()}catch(le){E1(n,i,le)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof d=="function")try{d(null)}catch(le){E1(n,i,le)}else d.current=null}function r0(n){var i=n.type,d=n.memoizedProps,O=n.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":d.autoFocus&&O.focus();break e;case"img":d.src?O.src=d.src:d.srcSet&&(O.srcset=d.srcSet)}}catch(le){E1(n,n.return,le)}}function $p(n,i,d){try{var O=n.stateNode;Lb(O,n.type,d,i),O[A1]=i}catch(le){E1(n,n.return,le)}}function P0(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&I_(n.type)||n.tag===4}function j0(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||P0(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&I_(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function tm(n,i,d){var O=n.tag;if(O===5||O===6)n=n.stateNode,i?(d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d).insertBefore(n,i):(i=d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d,i.appendChild(n),d=d._reactRootContainer,d!=null||i.onclick!==null||(i.onclick=D1));else if(O!==4&&(O===27&&I_(n.type)&&(d=n.stateNode,i=null),n=n.child,n!==null))for(tm(n,i,d),n=n.sibling;n!==null;)tm(n,i,d),n=n.sibling}function wm(n,i,d){var O=n.tag;if(O===5||O===6)n=n.stateNode,i?d.insertBefore(n,i):d.appendChild(n);else if(O!==4&&(O===27&&I_(n.type)&&(d=n.stateNode),n=n.child,n!==null))for(wm(n,i,d),n=n.sibling;n!==null;)wm(n,i,d),n=n.sibling}function bm(n){var i=n.stateNode,d=n.memoizedProps;try{for(var O=n.type,le=i.attributes;le.length;)i.removeAttributeNode(le[0]);sg(i,O,d),i[d1]=n,i[A1]=d}catch(Ee){E1(n,n.return,Ee)}}var Tm=!1,Rm=!1,Sm=!1,Gm=typeof WeakSet=="function"?WeakSet:Set,Xm=null;function pv(n,i){if(n=n.containerInfo,Db=Z2,n=mx(n),K_(n)){if("selectionStart"in n)var d={start:n.selectionStart,end:n.selectionEnd};else e:{d=(d=n.ownerDocument)&&d.defaultView||window;var O=d.getSelection&&d.getSelection();if(O&&O.rangeCount!==0){d=O.anchorNode;var le=O.anchorOffset,Ee=O.focusNode;O=O.focusOffset;try{d.nodeType,Ee.nodeType}catch{d=null;break e}var ms=0,Hl=-1,f0=-1,Z0=0,ym=0,_m=n,T0=null;t:for(;;){for(var Q0;_m!==d||le!==0&&_m.nodeType!==3||(Hl=ms+le),_m!==Ee||O!==0&&_m.nodeType!==3||(f0=ms+O),_m.nodeType===3&&(ms+=_m.nodeValue.length),(Q0=_m.firstChild)!==null;)T0=_m,_m=Q0;for(;;){if(_m===n)break t;if(T0===d&&++Z0===le&&(Hl=ms),T0===Ee&&++ym===O&&(f0=ms),(Q0=_m.nextSibling)!==null)break;_m=T0,T0=_m.parentNode}_m=Q0}d=Hl===-1||f0===-1?null:{start:Hl,end:f0}}else d=null}d=d||{start:0,end:0}}else d=null;for(L3={focusedElem:n,selectionRange:d},Z2=!1,Xm=i;Xm!==null;)if(i=Xm,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,Xm=n;else for(;Xm!==null;){switch(i=Xm,Ee=i.alternate,n=i.flags,i.tag){case 0:if((n&4)!==0&&(n=i.updateQueue,n=n!==null?n.events:null,n!==null))for(d=0;d<n.length;d++)le=n[d],le.ref.impl=le.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&Ee!==null){n=void 0,d=i,le=Ee.memoizedProps,Ee=Ee.memoizedState,O=d.stateNode;try{var km=n0(d.type,le);n=O.getSnapshotBeforeUpdate(km,Ee),O.__reactInternalSnapshotBeforeUpdate=n}catch(Wm){E1(d,d.return,Wm)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,d=n.nodeType,d===9)O3(n);else if(d===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":O3(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(a(163))}if(n=i.sibling,n!==null){n.return=i.return,Xm=n;break}Xm=i.return}}function Ev(n,i,d){var O=d.flags;switch(d.tag){case 0:case 11:case 15:Uv(n,d),O&4&&yp(5,d);break;case 1:if(Uv(n,d),O&4)if(n=d.stateNode,i===null)try{n.componentDidMount()}catch(ms){E1(d,d.return,ms)}else{var le=n0(d.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(le,i,n.__reactInternalSnapshotBeforeUpdate)}catch(ms){E1(d,d.return,ms)}}O&64&&Pp(d),O&512&&Rp(d,d.return);break;case 3:if(Uv(n,d),O&64&&(n=d.updateQueue,n!==null)){if(i=null,d.child!==null)switch(d.child.tag){case 27:case 5:i=d.child.stateNode;break;case 1:i=d.child.stateNode}try{t5(n,i)}catch(ms){E1(d,d.return,ms)}}break;case 27:i===null&&O&4&&bm(d);case 26:case 5:Uv(n,d),i===null&&O&4&&r0(d),O&512&&Rp(d,d.return);break;case 12:Uv(n,d);break;case 31:Uv(n,d),O&4&&$m(n,d);break;case 13:Uv(n,d),O&4&&vv(n,d),O&64&&(n=d.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(d=Z5.bind(null,d),Ob(n,d))));break;case 22:if(O=d.memoizedState!==null||Tm,!O){i=i!==null&&i.memoizedState!==null||Rm,le=Tm;var Ee=Rm;Tm=O,(Rm=i)&&!Ee?r1(n,d,(d.subtreeFlags&8772)!==0):Uv(n,d),Tm=le,Rm=Ee}break;case 30:break;default:Uv(n,d)}}function kv(n){var i=n.alternate;i!==null&&(n.alternate=null,kv(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&pm(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var tv=null,Mv=!1;function i1(n,i,d){for(d=d.child;d!==null;)V1(n,i,d),d=d.sibling}function V1(n,i,d){if(Uo&&typeof Uo.onCommitFiberUnmount=="function")try{Uo.onCommitFiberUnmount(sm,d)}catch{}switch(d.tag){case 26:Rm||Vp(d,i),i1(n,i,d),d.memoizedState?d.memoizedState.count--:d.stateNode&&(d=d.stateNode,d.parentNode.removeChild(d));break;case 27:Rm||Vp(d,i);var O=tv,le=Mv;I_(d.type)&&(tv=d.stateNode,Mv=!1),i1(n,i,d),U_(d.stateNode),tv=O,Mv=le;break;case 5:Rm||Vp(d,i);case 6:if(O=tv,le=Mv,tv=null,i1(n,i,d),tv=O,Mv=le,tv!==null)if(Mv)try{(tv.nodeType===9?tv.body:tv.nodeName==="HTML"?tv.ownerDocument.body:tv).removeChild(d.stateNode)}catch(Ee){E1(d,i,Ee)}else try{tv.removeChild(d.stateNode)}catch(Ee){E1(d,i,Ee)}break;case 18:tv!==null&&(Mv?(n=tv,D5(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,d.stateNode),H0(n)):D5(tv,d.stateNode));break;case 4:O=tv,le=Mv,tv=d.stateNode.containerInfo,Mv=!0,i1(n,i,d),tv=O,Mv=le;break;case 0:case 11:case 14:case 15:bp(2,d,i),Rm||bp(4,d,i),i1(n,i,d);break;case 1:Rm||(Vp(d,i),O=d.stateNode,typeof O.componentWillUnmount=="function"&&s0(d,i,O)),i1(n,i,d);break;case 21:i1(n,i,d);break;case 22:Rm=(O=Rm)||d.memoizedState!==null,i1(n,i,d),Rm=O;break;default:i1(n,i,d)}}function $m(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{H0(n)}catch(d){E1(i,i.return,d)}}}function vv(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{H0(n)}catch(d){E1(i,i.return,d)}}function Vv(n){switch(n.tag){case 31:case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new Gm),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new Gm),i;default:throw Error(a(435,n.tag))}}function b1(n,i){var d=Vv(n);i.forEach(function(O){if(!d.has(O)){d.add(O);var le=K5.bind(null,n,O);O.then(le,le)}})}function c1(n,i){var d=i.deletions;if(d!==null)for(var O=0;O<d.length;O++){var le=d[O],Ee=n,ms=i,Hl=ms;e:for(;Hl!==null;){switch(Hl.tag){case 27:if(I_(Hl.type)){tv=Hl.stateNode,Mv=!1;break e}break;case 5:tv=Hl.stateNode,Mv=!1;break e;case 3:case 4:tv=Hl.stateNode.containerInfo,Mv=!0;break e}Hl=Hl.return}if(tv===null)throw Error(a(160));V1(Ee,ms,le),tv=null,Mv=!1,Ee=le.alternate,Ee!==null&&(Ee.return=null),le.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)lv(i,n),i=i.sibling}var Iv=null;function lv(n,i){var d=n.alternate,O=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:c1(i,n),fv(n),O&4&&(bp(3,n,n.return),yp(3,n),bp(5,n,n.return));break;case 1:c1(i,n),fv(n),O&512&&(Rm||d===null||Vp(d,d.return)),O&64&&Tm&&(n=n.updateQueue,n!==null&&(O=n.callbacks,O!==null&&(d=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=d===null?O:d.concat(O))));break;case 26:var le=Iv;if(c1(i,n),fv(n),O&512&&(Rm||d===null||Vp(d,d.return)),O&4){var Ee=d!==null?d.memoizedState:null;if(O=n.memoizedState,d===null)if(O===null)if(n.stateNode===null){e:{O=n.type,d=n.memoizedProps,le=le.ownerDocument||le;t:switch(O){case"title":Ee=le.getElementsByTagName("title")[0],(!Ee||Ee[o0]||Ee[d1]||Ee.namespaceURI==="http://www.w3.org/2000/svg"||Ee.hasAttribute("itemprop"))&&(Ee=le.createElement(O),le.head.insertBefore(Ee,le.querySelector("head > title"))),sg(Ee,O,d),Ee[d1]=n,cv(Ee),O=Ee;break e;case"link":var ms=Y3("link","href",le).get(O+(d.href||""));if(ms){for(var Hl=0;Hl<ms.length;Hl++)if(Ee=ms[Hl],Ee.getAttribute("href")===(d.href==null||d.href===""?null:d.href)&&Ee.getAttribute("rel")===(d.rel==null?null:d.rel)&&Ee.getAttribute("title")===(d.title==null?null:d.title)&&Ee.getAttribute("crossorigin")===(d.crossOrigin==null?null:d.crossOrigin)){ms.splice(Hl,1);break t}}Ee=le.createElement(O),sg(Ee,O,d),le.head.appendChild(Ee);break;case"meta":if(ms=Y3("meta","content",le).get(O+(d.content||""))){for(Hl=0;Hl<ms.length;Hl++)if(Ee=ms[Hl],Ee.getAttribute("content")===(d.content==null?null:""+d.content)&&Ee.getAttribute("name")===(d.name==null?null:d.name)&&Ee.getAttribute("property")===(d.property==null?null:d.property)&&Ee.getAttribute("http-equiv")===(d.httpEquiv==null?null:d.httpEquiv)&&Ee.getAttribute("charset")===(d.charSet==null?null:d.charSet)){ms.splice(Hl,1);break t}}Ee=le.createElement(O),sg(Ee,O,d),le.head.appendChild(Ee);break;default:throw Error(a(468,O))}Ee[d1]=n,cv(Ee),O=Ee}n.stateNode=O}else X3(le,n.type,n.stateNode);else n.stateNode=Fb(le,O,n.memoizedProps);else Ee!==O?(Ee===null?d.stateNode!==null&&(d=d.stateNode,d.parentNode.removeChild(d)):Ee.count--,O===null?X3(le,n.type,n.stateNode):Fb(le,O,n.memoizedProps)):O===null&&n.stateNode!==null&&$p(n,n.memoizedProps,d.memoizedProps)}break;case 27:c1(i,n),fv(n),O&512&&(Rm||d===null||Vp(d,d.return)),d!==null&&O&4&&$p(n,n.memoizedProps,d.memoizedProps);break;case 5:if(c1(i,n),fv(n),O&512&&(Rm||d===null||Vp(d,d.return)),n.flags&32){le=n.stateNode;try{eg(le,"")}catch(km){E1(n,n.return,km)}}O&4&&n.stateNode!=null&&(le=n.memoizedProps,$p(n,le,d!==null?d.memoizedProps:le)),O&1024&&(Sm=!0);break;case 6:if(c1(i,n),fv(n),O&4){if(n.stateNode===null)throw Error(a(162));O=n.memoizedProps,d=n.stateNode;try{d.nodeValue=O}catch(km){E1(n,n.return,km)}}break;case 3:if(Bb=null,le=Iv,Iv=jx(i.containerInfo),c1(i,n),Iv=le,fv(n),O&4&&d!==null&&d.memoizedState.isDehydrated)try{H0(i.containerInfo)}catch(km){E1(n,n.return,km)}Sm&&(Sm=!1,Hv(n));break;case 4:O=Iv,Iv=jx(n.stateNode.containerInfo),c1(i,n),fv(n),Iv=O;break;case 12:c1(i,n),fv(n);break;case 31:c1(i,n),fv(n),O&4&&(O=n.updateQueue,O!==null&&(n.updateQueue=null,b1(n,O)));break;case 13:c1(i,n),fv(n),n.child.flags&8192&&n.memoizedState!==null!=(d!==null&&d.memoizedState!==null)&&(H2=a0()),O&4&&(O=n.updateQueue,O!==null&&(n.updateQueue=null,b1(n,O)));break;case 22:le=n.memoizedState!==null;var f0=d!==null&&d.memoizedState!==null,Z0=Tm,ym=Rm;if(Tm=Z0||le,Rm=ym||f0,c1(i,n),Rm=ym,Tm=Z0,fv(n),O&8192)e:for(i=n.stateNode,i._visibility=le?i._visibility&-2:i._visibility|1,le&&(d===null||f0||Tm||Rm||Xv(n)),d=null,i=n;;){if(i.tag===5||i.tag===26){if(d===null){f0=d=i;try{if(Ee=f0.stateNode,le)ms=Ee.style,typeof ms.setProperty=="function"?ms.setProperty("display","none","important"):ms.display="none";else{Hl=f0.stateNode;var _m=f0.memoizedProps.style,T0=_m!=null&&_m.hasOwnProperty("display")?_m.display:null;Hl.style.display=T0==null||typeof T0=="boolean"?"":(""+T0).trim()}}catch(km){E1(f0,f0.return,km)}}}else if(i.tag===6){if(d===null){f0=i;try{f0.stateNode.nodeValue=le?"":f0.memoizedProps}catch(km){E1(f0,f0.return,km)}}}else if(i.tag===18){if(d===null){f0=i;try{var Q0=f0.stateNode;le?k5(Q0,!0):k5(f0.stateNode,!1)}catch(km){E1(f0,f0.return,km)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break e;for(;i.sibling===null;){if(i.return===null||i.return===n)break e;d===i&&(d=null),i=i.return}d===i&&(d=null),i.sibling.return=i.return,i=i.sibling}O&4&&(O=n.updateQueue,O!==null&&(d=O.retryQueue,d!==null&&(O.retryQueue=null,b1(n,d))));break;case 19:c1(i,n),fv(n),O&4&&(O=n.updateQueue,O!==null&&(n.updateQueue=null,b1(n,O)));break;case 30:break;case 21:break;default:c1(i,n),fv(n)}}function fv(n){var i=n.flags;if(i&2){try{for(var d,O=n.return;O!==null;){if(P0(O)){d=O;break}O=O.return}if(d==null)throw Error(a(160));switch(d.tag){case 27:var le=d.stateNode,Ee=j0(n);wm(n,Ee,le);break;case 5:var ms=d.stateNode;d.flags&32&&(eg(ms,""),d.flags&=-33);var Hl=j0(n);wm(n,Hl,ms);break;case 3:case 4:var f0=d.stateNode.containerInfo,Z0=j0(n);tm(n,Z0,f0);break;default:throw Error(a(161))}}catch(ym){E1(n,n.return,ym)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function Hv(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;Hv(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function Uv(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Ev(n,i.alternate,i),i=i.sibling}function Xv(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:bp(4,i,i.return),Xv(i);break;case 1:Vp(i,i.return);var d=i.stateNode;typeof d.componentWillUnmount=="function"&&s0(i,i.return,d),Xv(i);break;case 27:U_(i.stateNode);case 26:case 5:Vp(i,i.return),Xv(i);break;case 22:i.memoizedState===null&&Xv(i);break;case 30:Xv(i);break;default:Xv(i)}n=n.sibling}}function r1(n,i,d){for(d=d&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var O=i.alternate,le=n,Ee=i,ms=Ee.flags;switch(Ee.tag){case 0:case 11:case 15:r1(le,Ee,d),yp(4,Ee);break;case 1:if(r1(le,Ee,d),O=Ee,le=O.stateNode,typeof le.componentDidMount=="function")try{le.componentDidMount()}catch(Z0){E1(O,O.return,Z0)}if(O=Ee,le=O.updateQueue,le!==null){var Hl=O.stateNode;try{var f0=le.shared.hiddenCallbacks;if(f0!==null)for(le.shared.hiddenCallbacks=null,le=0;le<f0.length;le++)e5(f0[le],Hl)}catch(Z0){E1(O,O.return,Z0)}}d&&ms&64&&Pp(Ee),Rp(Ee,Ee.return);break;case 27:bm(Ee);case 26:case 5:r1(le,Ee,d),d&&O===null&&ms&4&&r0(Ee),Rp(Ee,Ee.return);break;case 12:r1(le,Ee,d);break;case 31:r1(le,Ee,d),d&&ms&4&&$m(le,Ee);break;case 13:r1(le,Ee,d),d&&ms&4&&vv(le,Ee);break;case 22:Ee.memoizedState===null&&r1(le,Ee,d),Rp(Ee,Ee.return);break;case 30:break;default:r1(le,Ee,d)}i=i.sibling}}function s1(n,i){var d=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(d=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==d&&(n!=null&&n.refCount++,d!=null&&A_(d))}function S1(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&A_(n))}function _1(n,i,d,O){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)N1(n,i,d,O),i=i.sibling}function N1(n,i,d,O){var le=i.flags;switch(i.tag){case 0:case 11:case 15:_1(n,i,d,O),le&2048&&yp(9,i);break;case 1:_1(n,i,d,O);break;case 3:_1(n,i,d,O),le&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&A_(n)));break;case 12:if(le&2048){_1(n,i,d,O),n=i.stateNode;try{var Ee=i.memoizedProps,ms=Ee.id,Hl=Ee.onPostCommit;typeof Hl=="function"&&Hl(ms,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(f0){E1(i,i.return,f0)}}else _1(n,i,d,O);break;case 31:_1(n,i,d,O);break;case 13:_1(n,i,d,O);break;case 23:break;case 22:Ee=i.stateNode,ms=i.alternate,i.memoizedState!==null?Ee._visibility&2?_1(n,i,d,O):$v(n,i):Ee._visibility&2?_1(n,i,d,O):(Ee._visibility|=2,w1(n,i,d,O,(i.subtreeFlags&10256)!==0||!1)),le&2048&&s1(ms,i);break;case 24:_1(n,i,d,O),le&2048&&S1(i.alternate,i);break;default:_1(n,i,d,O)}}function w1(n,i,d,O,le){for(le=le&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var Ee=n,ms=i,Hl=d,f0=O,Z0=ms.flags;switch(ms.tag){case 0:case 11:case 15:w1(Ee,ms,Hl,f0,le),yp(8,ms);break;case 23:break;case 22:var ym=ms.stateNode;ms.memoizedState!==null?ym._visibility&2?w1(Ee,ms,Hl,f0,le):$v(Ee,ms):(ym._visibility|=2,w1(Ee,ms,Hl,f0,le)),le&&Z0&2048&&s1(ms.alternate,ms);break;case 24:w1(Ee,ms,Hl,f0,le),le&&Z0&2048&&S1(ms.alternate,ms);break;default:w1(Ee,ms,Hl,f0,le)}i=i.sibling}}function $v(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var d=n,O=i,le=O.flags;switch(O.tag){case 22:$v(d,O),le&2048&&s1(O.alternate,O);break;case 24:$v(d,O),le&2048&&S1(O.alternate,O);break;default:$v(d,O)}i=i.sibling}}var B1=8192;function H1(n,i,d){if(n.subtreeFlags&B1)for(n=n.child;n!==null;)_g(n,i,d),n=n.sibling}function _g(n,i,d){switch(n.tag){case 26:H1(n,i,d),n.flags&B1&&n.memoizedState!==null&&lw(d,Iv,n.memoizedState,n.memoizedProps);break;case 5:H1(n,i,d);break;case 3:case 4:var O=Iv;Iv=jx(n.stateNode.containerInfo),H1(n,i,d),Iv=O;break;case 22:n.memoizedState===null&&(O=n.alternate,O!==null&&O.memoizedState!==null?(O=B1,B1=16777216,H1(n,i,d),B1=O):H1(n,i,d));break;default:H1(n,i,d)}}function K1(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function pg(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var d=0;d<i.length;d++){var O=i[d];Xm=O,rg(O,n)}K1(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Y1(n),n=n.sibling}function Y1(n){switch(n.tag){case 0:case 11:case 15:pg(n),n.flags&2048&&bp(9,n,n.return);break;case 3:pg(n);break;case 12:pg(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,L1(n)):pg(n);break;default:pg(n)}}function L1(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var d=0;d<i.length;d++){var O=i[d];Xm=O,rg(O,n)}K1(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:bp(8,i,i.return),L1(i);break;case 22:d=i.stateNode,d._visibility&2&&(d._visibility&=-3,L1(i));break;default:L1(i)}n=n.sibling}}function rg(n,i){for(;Xm!==null;){var d=Xm;switch(d.tag){case 0:case 11:case 15:bp(8,d,i);break;case 23:case 22:if(d.memoizedState!==null&&d.memoizedState.cachePool!==null){var O=d.memoizedState.cachePool.pool;O!=null&&O.refCount++}break;case 24:A_(d.memoizedState.cache)}if(O=d.child,O!==null)O.return=d,Xm=O;else e:for(d=n;Xm!==null;){O=Xm;var le=O.sibling,Ee=O.return;if(kv(O),O===d){Xm=null;break e}if(le!==null){le.return=Ee,Xm=le;break e}Xm=Ee}}}var l_={getCacheForType:function(n){var i=cg(W1),d=i.data.get(n);return d===void 0&&(d=n(),i.data.set(n,d)),d},cacheSignal:function(){return cg(W1).controller.signal}},q1=typeof WeakMap=="function"?WeakMap:Map,mv=0,Tv=null,yv=null,sv=0,hv=0,T1=null,xg=!1,bg=!1,by=!1,Eg=0,z1=0,wy=0,Xg=0,U2=0,Ag=0,F2=0,B2=null,mg=null,c3=!1,H2=0,u3=0,sy=1/0,Px=null,Uy=null,ag=0,Fg=null,c_=null,Fy=0,f3=0,h3=null,i5=null,j2=0,_b=null;function $g(){return(mv&2)!==0&&sv!==0?sv&-sv:we.T!==null?b3():zv()}function s5(){if(Ag===0)if((sv&536870912)===0||Wv){var n=Np;Np<<=1,(Np&3932160)===0&&(Np=262144),Ag=n}else Ag=536870912;return n=qg.current,n!==null&&(n.flags|=32),Ag}function Bg(n,i,d){(n===Tv&&(hv===2||hv===9)||n.cancelPendingCommit!==null)&&(G2(n,0),z_(n,sv,Ag,!1)),Pm(n,d),((mv&2)===0||n!==Tv)&&(n===Tv&&((mv&2)===0&&(Xg|=d),z1===4&&z_(n,sv,Ag,!1)),My(n))}function o5(n,i,d){if((mv&6)!==0)throw Error(a(327));var O=!d&&(i&127)===0&&(i&n.expiredLanes)===0||d0(n,i),le=O?X5(n,i):bb(n,i,!0),Ee=O;do{if(le===0){bg&&!O&&z_(n,i,0,!1);break}else{if(d=n.current.alternate,Ee&&!Y5(d)){le=bb(n,i,!1),Ee=!1;continue}if(le===2){if(Ee=i,n.errorRecoveryDisabledLanes&Ee)var ms=0;else ms=n.pendingLanes&-536870913,ms=ms!==0?ms:ms&536870912?536870912:0;if(ms!==0){i=ms;e:{var Hl=n;le=B2;var f0=Hl.current.memoizedState.isDehydrated;if(f0&&(G2(Hl,ms).flags|=256),ms=bb(Hl,ms,!1),ms!==2){if(by&&!f0){Hl.errorRecoveryDisabledLanes|=Ee,Xg|=Ee,le=4;break e}Ee=mg,mg=le,Ee!==null&&(mg===null?mg=Ee:mg.push.apply(mg,Ee))}le=ms}if(Ee=!1,le!==2)continue}}if(le===1){G2(n,0),z_(n,i,0,!0);break}e:{switch(O=n,Ee=le,Ee){case 0:case 1:throw Error(a(345));case 4:if((i&4194048)!==i)break;case 6:z_(O,i,Ag,!xg);break e;case 2:mg=null;break;case 3:case 5:break;default:throw Error(a(329))}if((i&62914560)===i&&(le=H2+300-a0(),10<le)){if(z_(O,i,Ag,!xg),g0(O,0,!0)!==0)break e;Fy=i,O.timeoutHandle=z3(l5.bind(null,O,d,mg,Px,c3,i,Ag,Xg,F2,xg,Ee,"Throttled",-0,0),le);break e}l5(O,d,mg,Px,c3,i,Ag,Xg,F2,xg,Ee,null,-0,0)}}break}while(!0);My(n)}function l5(n,i,d,O,le,Ee,ms,Hl,f0,Z0,ym,_m,T0,Q0){if(n.timeoutHandle=-1,_m=i.subtreeFlags,_m&8192||(_m&16785408)===16785408){_m={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:D1},_g(i,Ee,_m);var km=(Ee&62914560)===Ee?H2-a0():(Ee&4194048)===Ee?u3-a0():0;if(km=cw(_m,km),km!==null){Fy=Ee,n.cancelPendingCommit=km(m3.bind(null,n,i,Ee,d,O,le,ms,Hl,f0,ym,_m,null,T0,Q0)),z_(n,Ee,ms,!Z0);return}}m3(n,i,Ee,d,O,le,ms,Hl,f0)}function Y5(n){for(var i=n;;){var d=i.tag;if((d===0||d===11||d===15)&&i.flags&16384&&(d=i.updateQueue,d!==null&&(d=d.stores,d!==null)))for(var O=0;O<d.length;O++){var le=d[O],Ee=le.getSnapshot;le=le.value;try{if(!ng(Ee(),le))return!1}catch{return!1}}if(d=i.child,i.subtreeFlags&16384&&d!==null)d.return=i,i=d;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function z_(n,i,d,O){i&=~U2,i&=~Xg,n.suspendedLanes|=i,n.pingedLanes&=~i,O&&(n.warmLanes|=i),O=n.expirationTimes;for(var le=i;0<le;){var Ee=31-x0(le),ms=1<<Ee;O[Ee]=-1,le&=~ms}d!==0&&Fm(n,d,i)}function xb(){return(mv&6)===0?(Ux(0),!1):!0}function d3(){if(yv!==null){if(hv===0)var n=yv.return;else n=yv,iy=yy=null,l3(n),Dv=null,F1=0,n=yv;for(;n!==null;)kp(n.alternate,n),n=n.return;yv=null}}function G2(n,i){var d=n.timeoutHandle;d!==-1&&(n.timeoutHandle=-1,nw(d)),d=n.cancelPendingCommit,d!==null&&(n.cancelPendingCommit=null,d()),Fy=0,d3(),Tv=n,yv=d=ty(n.current,null),sv=i,hv=0,T1=null,xg=!1,bg=d0(n,i),by=!1,F2=Ag=U2=Xg=wy=z1=0,mg=B2=null,c3=!1,(i&8)!==0&&(i|=i&32);var O=n.entangledLanes;if(O!==0)for(n=n.entanglements,O&=i;0<O;){var le=31-x0(O),Ee=1<<le;i|=n[le],O&=~Ee}return Eg=i,r2(),d}function c5(n,i){Gv=null,we.H=_r,i===um||i===qm?(i=Bv(),hv=3):i===l1?(i=Bv(),hv=4):hv=i===jl?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,T1=i,yv===null&&(z1=1,Kp(n,Lg(i,n.current)))}function u5(){var n=qg.current;return n===null?!0:(sv&4194048)===sv?Wg===null:(sv&62914560)===sv||(sv&536870912)!==0?n===Wg:!1}function f5(){var n=we.H;return we.H=_r,n===null?_r:n}function p3(){var n=we.A;return we.A=l_,n}function Ox(){z1=4,xg||(sv&4194048)!==sv&&qg.current!==null||(bg=!0),(wy&134217727)===0&&(Xg&134217727)===0||Tv===null||z_(Tv,sv,Ag,!1)}function bb(n,i,d){var O=mv;mv|=2;var le=f5(),Ee=p3();(Tv!==n||sv!==i)&&(Px=null,G2(n,i)),i=!1;var ms=z1;e:do try{if(hv!==0&&yv!==null){var Hl=yv,f0=T1;switch(hv){case 8:d3(),ms=6;break e;case 3:case 2:case 9:case 6:qg.current===null&&(i=!0);var Z0=hv;if(hv=0,T1=null,V2(n,Hl,f0,Z0),d&&bg){ms=0;break e}break;default:Z0=hv,hv=0,T1=null,V2(n,Hl,f0,Z0)}}h5(),ms=z1;break}catch(ym){c5(n,ym)}while(!0);return i&&n.shellSuspendCounter++,iy=yy=null,mv=O,we.H=le,we.A=Ee,yv===null&&(Tv=null,sv=0,r2()),ms}function h5(){for(;yv!==null;)d2(yv)}function X5(n,i){var d=mv;mv|=2;var O=f5(),le=p3();Tv!==n||sv!==i?(Px=null,sy=a0()+500,G2(n,i)):bg=d0(n,i);e:do try{if(hv!==0&&yv!==null){i=yv;var Ee=T1;t:switch(hv){case 1:hv=0,T1=null,V2(n,i,Ee,1);break;case 2:case 9:if(C1(Ee)){hv=0,T1=null,d5(i);break}i=function(){hv!==2&&hv!==9||Tv!==n||(hv=7),My(n)},Ee.then(i,i);break e;case 3:hv=7;break e;case 4:hv=5;break e;case 7:C1(Ee)?(hv=0,T1=null,d5(i)):(hv=0,T1=null,V2(n,i,Ee,7));break;case 5:var ms=null;switch(yv.tag){case 26:ms=yv.memoizedState;case 5:case 27:var Hl=yv;if(ms?$3(ms):Hl.stateNode.complete){hv=0,T1=null;var f0=Hl.sibling;if(f0!==null)yv=f0;else{var Z0=Hl.return;Z0!==null?(yv=Z0,wb(Z0)):yv=null}break t}}hv=0,T1=null,V2(n,i,Ee,5);break;case 6:hv=0,T1=null,V2(n,i,Ee,6);break;case 8:d3(),z1=6;break e;default:throw Error(a(462))}}$5();break}catch(ym){c5(n,ym)}while(!0);return iy=yy=null,we.H=O,we.A=le,mv=d,yv!==null?0:(Tv=null,sv=0,r2(),z1)}function $5(){for(;yv!==null&&!Io();)d2(yv)}function d2(n){var i=zm(n.alternate,n,Eg);n.memoizedProps=n.pendingProps,i===null?wb(n):yv=i}function d5(n){var i=n,d=i.alternate;switch(i.tag){case 15:case 0:i=E0(d,i,i.pendingProps,i.type,void 0,sv);break;case 11:i=E0(d,i,i.pendingProps,i.type.render,i.ref,sv);break;case 5:l3(i);default:kp(d,i),i=yv=D2(i,Eg),i=zm(d,i,Eg)}n.memoizedProps=n.pendingProps,i===null?wb(n):yv=i}function V2(n,i,d,O){iy=yy=null,l3(i),Dv=null,F1=0;var le=i.return;try{if(vs(n,le,i,d,sv)){z1=1,Kp(n,Lg(d,n.current)),yv=null;return}}catch(Ee){if(le!==null)throw yv=le,Ee;z1=1,Kp(n,Lg(d,n.current)),yv=null;return}i.flags&32768?(Wv||O===1?n=!0:bg||(sv&536870912)!==0?n=!1:(xg=n=!0,(O===2||O===9||O===3||O===6)&&(O=qg.current,O!==null&&O.tag===13&&(O.flags|=16384))),p5(i,n)):wb(i)}function wb(n){var i=n;do{if((i.flags&32768)!==0){p5(i,xg);return}n=i.return;var d=Fe(i.alternate,i,Eg);if(d!==null){yv=d;return}if(i=i.sibling,i!==null){yv=i;return}yv=i=n}while(i!==null);z1===0&&(z1=5)}function p5(n,i){do{var d=Gp(n.alternate,n);if(d!==null){d.flags&=32767,yv=d;return}if(d=n.return,d!==null&&(d.flags|=32768,d.subtreeFlags=0,d.deletions=null),!i&&(n=n.sibling,n!==null)){yv=n;return}yv=n=d}while(n!==null);z1=6,yv=null}function m3(n,i,d,O,le,Ee,ms,Hl,f0){n.cancelPendingCommit=null;do Mb();while(ag!==0);if((mv&6)!==0)throw Error(a(327));if(i!==null){if(i===n.current)throw Error(a(177));if(Ee=i.lanes|i.childLanes,Ee|=C2,Cm(n,d,Ee,ms,Hl,f0),n===Tv&&(yv=Tv=null,sv=0),c_=i,Fg=n,Fy=d,f3=Ee,h3=le,i5=O,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,Ix(Gl,function(){return y5(),null})):(n.callbackNode=null,n.callbackPriority=0),O=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||O){O=we.T,we.T=null,le=Ze.p,Ze.p=2,ms=mv,mv|=4;try{pv(n,i,d)}finally{mv=ms,Ze.p=le,we.T=O}}ag=1,m5(),v5(),g5()}}function m5(){if(ag===1){ag=0;var n=Fg,i=c_,d=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||d){d=we.T,we.T=null;var O=Ze.p;Ze.p=2;var le=mv;mv|=4;try{lv(i,n);var Ee=L3,ms=mx(n.containerInfo),Hl=Ee.focusedElem,f0=Ee.selectionRange;if(ms!==Hl&&Hl&&Hl.ownerDocument&&px(Hl.ownerDocument.documentElement,Hl)){if(f0!==null&&K_(Hl)){var Z0=f0.start,ym=f0.end;if(ym===void 0&&(ym=Z0),"selectionStart"in Hl)Hl.selectionStart=Z0,Hl.selectionEnd=Math.min(ym,Hl.value.length);else{var _m=Hl.ownerDocument||document,T0=_m&&_m.defaultView||window;if(T0.getSelection){var Q0=T0.getSelection(),km=Hl.textContent.length,Wm=Math.min(f0.start,km),Av=f0.end===void 0?Wm:Math.min(f0.end,km);!Q0.extend&&Wm>Av&&(ms=Av,Av=Wm,Wm=ms);var $0=dx(Hl,Wm),U0=dx(Hl,Av);if($0&&U0&&(Q0.rangeCount!==1||Q0.anchorNode!==$0.node||Q0.anchorOffset!==$0.offset||Q0.focusNode!==U0.node||Q0.focusOffset!==U0.offset)){var om=_m.createRange();om.setStart($0.node,$0.offset),Q0.removeAllRanges(),Wm>Av?(Q0.addRange(om),Q0.extend(U0.node,U0.offset)):(om.setEnd(U0.node,U0.offset),Q0.addRange(om))}}}}for(_m=[],Q0=Hl;Q0=Q0.parentNode;)Q0.nodeType===1&&_m.push({element:Q0,left:Q0.scrollLeft,top:Q0.scrollTop});for(typeof Hl.focus=="function"&&Hl.focus(),Hl=0;Hl<_m.length;Hl++){var Mm=_m[Hl];Mm.element.scrollLeft=Mm.left,Mm.element.scrollTop=Mm.top}}Z2=!!Db,L3=Db=null}finally{mv=le,Ze.p=O,we.T=d}}n.current=i,ag=2}}function v5(){if(ag===2){ag=0;var n=Fg,i=c_,d=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||d){d=we.T,we.T=null;var O=Ze.p;Ze.p=2;var le=mv;mv|=4;try{Ev(n,i.alternate,i)}finally{mv=le,Ze.p=O,we.T=d}}ag=3}}function g5(){if(ag===4||ag===3){ag=0,p0();var n=Fg,i=c_,d=Fy,O=i5;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?ag=5:(ag=0,c_=Fg=null,v3(n,n.pendingLanes));var le=n.pendingLanes;if(le===0&&(Uy=null),gv(d),i=i.stateNode,Uo&&typeof Uo.onCommitFiberRoot=="function")try{Uo.onCommitFiberRoot(sm,i,void 0,(i.current.flags&128)===128)}catch{}if(O!==null){i=we.T,le=Ze.p,Ze.p=2,we.T=null;try{for(var Ee=n.onRecoverableError,ms=0;ms<O.length;ms++){var Hl=O[ms];Ee(Hl.value,{componentStack:Hl.stack})}}finally{we.T=i,Ze.p=le}}(Fy&3)!==0&&Mb(),My(n),le=n.pendingLanes,(d&261930)!==0&&(le&42)!==0?n===_b?j2++:(j2=0,_b=n):j2=0,Ux(0)}}function v3(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,A_(i)))}function Mb(){return m5(),v5(),g5(),y5()}function y5(){if(ag!==5)return!1;var n=Fg,i=f3;f3=0;var d=gv(Fy),O=we.T,le=Ze.p;try{Ze.p=32>d?32:d,we.T=null,d=h3,h3=null;var Ee=Fg,ms=Fy;if(ag=0,c_=Fg=null,Fy=0,(mv&6)!==0)throw Error(a(331));var Hl=mv;if(mv|=4,Y1(Ee.current),N1(Ee,Ee.current,ms,d),mv=Hl,Ux(0,!1),Uo&&typeof Uo.onPostCommitFiberRoot=="function")try{Uo.onPostCommitFiberRoot(sm,Ee)}catch{}return!0}finally{Ze.p=le,we.T=O,v3(n,i)}}function _5(n,i,d){i=Lg(d,i),i=em(n.stateNode,i,2),n=L_(n,i,2),n!==null&&(Pm(n,2),My(n))}function E1(n,i,d){if(n.tag===3)_5(n,n,d);else for(;i!==null;){if(i.tag===3){_5(i,n,d);break}else if(i.tag===1){var O=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof O.componentDidCatch=="function"&&(Uy===null||!Uy.has(O))){n=Lg(d,n),d=k0(2),O=L_(i,d,2),O!==null&&(J0(d,O,i,n),Pm(O,2),My(O));break}}i=i.return}}function g3(n,i,d){var O=n.pingCache;if(O===null){O=n.pingCache=new q1;var le=new Set;O.set(i,le)}else le=O.get(i),le===void 0&&(le=new Set,O.set(i,le));le.has(d)||(by=!0,le.add(d),n=x5.bind(null,n,i,d),i.then(n,n))}function x5(n,i,d){var O=n.pingCache;O!==null&&O.delete(i),n.pingedLanes|=n.suspendedLanes&d,n.warmLanes&=~d,Tv===n&&(sv&d)===d&&(z1===4||z1===3&&(sv&62914560)===sv&&300>a0()-H2?(mv&2)===0&&G2(n,0):U2|=d,F2===sv&&(F2=0)),My(n)}function b5(n,i){i===0&&(i=jp()),n=r_(n,i),n!==null&&(Pm(n,i),My(n))}function Z5(n){var i=n.memoizedState,d=0;i!==null&&(d=i.retryLane),b5(n,d)}function K5(n,i){var d=0;switch(n.tag){case 31:case 13:var O=n.stateNode,le=n.memoizedState;le!==null&&(d=le.retryLane);break;case 19:O=n.stateNode;break;case 22:O=n.stateNode._retryCache;break;default:throw Error(a(314))}O!==null&&O.delete(i),b5(n,d)}function Ix(n,i){return cm(n,i)}var P_=null,Dg=null,y3=!1,Sb=!1,_3=!1,O_=0;function My(n){n!==Dg&&n.next===null&&(Dg===null?P_=Dg=n:Dg=Dg.next=n),Sb=!0,y3||(y3=!0,x3())}function Ux(n,i){if(!_3&&Sb){_3=!0;do for(var d=!1,O=P_;O!==null;){if(n!==0){var le=O.pendingLanes;if(le===0)var Ee=0;else{var ms=O.suspendedLanes,Hl=O.pingedLanes;Ee=(1<<31-x0(42|n)+1)-1,Ee&=le&~(ms&~Hl),Ee=Ee&201326741?Ee&201326741|1:Ee?Ee|2:0}Ee!==0&&(d=!0,Tb(O,Ee))}else Ee=sv,Ee=g0(O,O===Tv?Ee:0,O.cancelPendingCommit!==null||O.timeoutHandle!==-1),(Ee&3)===0||d0(O,Ee)||(d=!0,Tb(O,Ee));O=O.next}while(d);_3=!1}}function J5(){w5()}function w5(){Sb=y3=!1;var n=0;O_!==0&&N3()&&(n=O_);for(var i=a0(),d=null,O=P_;O!==null;){var le=O.next,Ee=M5(O,i);Ee===0?(O.next=null,d===null?P_=le:d.next=le,le===null&&(Dg=d)):(d=O,(n!==0||(Ee&3)!==0)&&(Sb=!0)),O=le}ag!==0&&ag!==5||Ux(n),O_!==0&&(O_=0)}function M5(n,i){for(var d=n.suspendedLanes,O=n.pingedLanes,le=n.expirationTimes,Ee=n.pendingLanes&-62914561;0<Ee;){var ms=31-x0(Ee),Hl=1<<ms,f0=le[ms];f0===-1?((Hl&d)===0||(Hl&O)!==0)&&(le[ms]=Vl(Hl,i)):f0<=i&&(n.expiredLanes|=Hl),Ee&=~Hl}if(i=Tv,d=sv,d=g0(n,n===i?d:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),O=n.callbackNode,d===0||n===i&&(hv===2||hv===9)||n.cancelPendingCommit!==null)return O!==null&&O!==null&&Ap(O),n.callbackNode=null,n.callbackPriority=0;if((d&3)===0||d0(n,d)){if(i=d&-d,i===n.callbackPriority)return i;switch(O!==null&&Ap(O),gv(d)){case 2:case 8:d=Nl;break;case 32:d=Gl;break;case 268435456:d=_0;break;default:d=Gl}return O=S5.bind(null,n),d=cm(d,O),n.callbackPriority=i,n.callbackNode=d,i}return O!==null&&O!==null&&Ap(O),n.callbackPriority=2,n.callbackNode=null,2}function S5(n,i){if(ag!==0&&ag!==5)return n.callbackNode=null,n.callbackPriority=0,null;var d=n.callbackNode;if(Mb()&&n.callbackNode!==d)return null;var O=sv;return O=g0(n,n===Tv?O:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),O===0?null:(o5(n,O,i),M5(n,a0()),n.callbackNode!=null&&n.callbackNode===d?S5.bind(null,n):null)}function Tb(n,i){if(Mb())return null;o5(n,i,!0)}function x3(){zb(function(){(mv&6)!==0?cm(X0,J5):w5()})}function b3(){if(O_===0){var n=ie;n===0&&(n=kl,kl<<=1,(kl&261888)===0&&(kl=256)),O_=n}return O_}function T5(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Wy(""+n)}function E5(n,i){var d=i.ownerDocument.createElement("input");return d.name=i.name,d.value=i.value,n.id&&d.setAttribute("form",n.id),i.parentNode.insertBefore(d,i),n=new FormData(n),d.parentNode.removeChild(d),n}function Q5(n,i,d,O,le){if(i==="submit"&&d&&d.stateNode===le){var Ee=T5((le[A1]||null).action),ms=O.submitter;ms&&(i=(i=ms[A1]||null)?T5(i.formAction):ms.getAttribute("formAction"),i!==null&&(Ee=i,ms=null));var Hl=new q_("action","action",null,O,le);n.push({event:Hl,listeners:[{instance:null,listener:function(){if(O.defaultPrevented){if(O_!==0){var f0=ms?E5(le,ms):new FormData(le);Re(d,{pending:!0,data:f0,method:le.method,action:Ee},null,f0)}}else typeof Ee=="function"&&(Hl.preventDefault(),f0=ms?E5(le,ms):new FormData(le),Re(d,{pending:!0,data:f0,method:le.method,action:Ee},Ee,f0))},currentTarget:le}]})}}for(var Eb=0;Eb<A2.length;Eb++){var w3=A2[Eb],ew=w3.toLowerCase(),M3=w3[0].toUpperCase()+w3.slice(1);Og(ew,"on"+M3)}Og(Q_,"onAnimationEnd"),Og(e2,"onAnimationIteration"),Og(gx,"onAnimationStart"),Og("dblclick","onDoubleClick"),Og("focusin","onFocus"),Og("focusout","onBlur"),Og(cb,"onTransitionRun"),Og(ub,"onTransitionStart"),Og(fb,"onTransitionCancel"),Og(yx,"onTransitionEnd"),wv("onMouseEnter",["mouseout","mouseover"]),wv("onMouseLeave",["mouseout","mouseover"]),wv("onPointerEnter",["pointerout","pointerover"]),wv("onPointerLeave",["pointerout","pointerover"]),Vm("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Vm("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Vm("onBeforeInput",["compositionend","keypress","textInput","paste"]),Vm("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Vm("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Vm("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var q2="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),A5=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(q2));function S3(n,i){i=(i&4)!==0;for(var d=0;d<n.length;d++){var O=n[d],le=O.event;O=O.listeners;e:{var Ee=void 0;if(i)for(var ms=O.length-1;0<=ms;ms--){var Hl=O[ms],f0=Hl.instance,Z0=Hl.currentTarget;if(Hl=Hl.listener,f0!==Ee&&le.isPropagationStopped())break e;Ee=Hl,le.currentTarget=Z0;try{Ee(le)}catch(ym){x1(ym)}le.currentTarget=null,Ee=f0}else for(ms=0;ms<O.length;ms++){if(Hl=O[ms],f0=Hl.instance,Z0=Hl.currentTarget,Hl=Hl.listener,f0!==Ee&&le.isPropagationStopped())break e;Ee=Hl,le.currentTarget=Z0;try{Ee(le)}catch(ym){x1(ym)}le.currentTarget=null,Ee=f0}}}}function e1(n,i){var d=i[u1];d===void 0&&(d=i[u1]=new Set);var O=n+"__bubble";d.has(O)||(E3(i,n,2,!1),d.add(O))}function T3(n,i,d){var O=0;i&&(O|=4),E3(d,n,O,i)}var Fx="_reactListening"+Math.random().toString(36).slice(2);function Ab(n){if(!n[Fx]){n[Fx]=!0,Cv.forEach(function(d){d!=="selectionchange"&&(A5.has(d)||T3(d,!1,n),T3(d,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[Fx]||(i[Fx]=!0,T3("selectionchange",!1,i))}}function E3(n,i,d,O){switch(G5(i)){case 2:var le=uw;break;case 8:le=K3;break;default:le=K2}d=le.bind(null,i,d,n),le=void 0,!g1||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(le=!0),O?le!==void 0?n.addEventListener(i,d,{capture:!0,passive:le}):n.addEventListener(i,d,!0):le!==void 0?n.addEventListener(i,d,{passive:le}):n.addEventListener(i,d,!1)}function Bx(n,i,d,O,le){var Ee=O;if((i&1)===0&&(i&2)===0&&O!==null)e:for(;;){if(O===null)return;var ms=O.tag;if(ms===3||ms===4){var Hl=O.stateNode.containerInfo;if(Hl===le)break;if(ms===4)for(ms=O.return;ms!==null;){var f0=ms.tag;if((f0===3||f0===4)&&ms.stateNode.containerInfo===le)return;ms=ms.return}for(;Hl!==null;){if(ms=jm(Hl),ms===null)return;if(f0=ms.tag,f0===5||f0===6||f0===26||f0===27){O=Ee=ms;continue e}Hl=Hl.parentNode}}O=O.return}Ay(function(){var Z0=Ee,ym=jg(d),_m=[];e:{var T0=t2.get(n);if(T0!==void 0){var Q0=q_,km=n;switch(n){case"keypress":if(y2(d)===0)break e;case"keydown":case"keyup":Q0=sx;break;case"focusin":km="focus",Q0=x2;break;case"focusout":km="blur",Q0=x2;break;case"beforeblur":case"afterblur":Q0=x2;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Q0=Zx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Q0=rx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Q0=Ry;break;case Q_:case e2:case gx:Q0=Xb;break;case yx:Q0=Qx;break;case"scroll":case"scrollend":Q0=$x;break;case"wheel":Q0=lx;break;case"copy":case"cut":case"paste":Q0=v_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Q0=b2;break;case"toggle":case"beforetoggle":Q0=tb}var Wm=(i&4)!==0,Av=!Wm&&(n==="scroll"||n==="scrollend"),$0=Wm?T0!==null?T0+"Capture":null:T0;Wm=[];for(var U0=Z0,om;U0!==null;){var Mm=U0;if(om=Mm.stateNode,Mm=Mm.tag,Mm!==5&&Mm!==26&&Mm!==27||om===null||$0===null||(Mm=Yy(U0,$0),Mm!=null&&Wm.push(p2(U0,Mm,om))),Av)break;U0=U0.return}0<Wm.length&&(T0=new Q0(T0,km,null,d,ym),_m.push({event:T0,listeners:Wm}))}}if((i&7)===0){e:{if(T0=n==="mouseover"||n==="pointerover",Q0=n==="mouseout"||n==="pointerout",T0&&d!==Q2&&(km=d.relatedTarget||d.fromElement)&&(jm(km)||km[Zv]))break e;if((Q0||T0)&&(T0=ym.window===ym?ym:(T0=ym.ownerDocument)?T0.defaultView||T0.parentWindow:window,Q0?(km=d.relatedTarget||d.toElement,Q0=Z0,km=km?jm(km):null,km!==null&&(Av=o(km),Wm=km.tag,km!==Av||Wm!==5&&Wm!==27&&Wm!==6)&&(km=null)):(Q0=null,km=Z0),Q0!==km)){if(Wm=Zx,Mm="onMouseLeave",$0="onMouseEnter",U0="mouse",(n==="pointerout"||n==="pointerover")&&(Wm=b2,Mm="onPointerLeave",$0="onPointerEnter",U0="pointer"),Av=Q0==null?T0:ov(Q0),om=km==null?T0:ov(km),T0=new Wm(Mm,U0+"leave",Q0,d,ym),T0.target=Av,T0.relatedTarget=om,Mm=null,jm(ym)===Z0&&(Wm=new Wm($0,U0+"enter",km,d,ym),Wm.target=om,Wm.relatedTarget=Av,Mm=Wm),Av=Mm,Q0&&km)t:{for(Wm=tw,$0=Q0,U0=km,om=0,Mm=$0;Mm;Mm=Wm(Mm))om++;Mm=0;for(var nv=U0;nv;nv=Wm(nv))Mm++;for(;0<om-Mm;)$0=Wm($0),om--;for(;0<Mm-om;)U0=Wm(U0),Mm--;for(;om--;){if($0===U0||U0!==null&&$0===U0.alternate){Wm=$0;break t}$0=Wm($0),U0=Wm(U0)}Wm=null}else Wm=null;Q0!==null&&C5(_m,T0,Q0,Wm,!1),km!==null&&Av!==null&&C5(_m,Av,km,Wm,!0)}}e:{if(T0=Z0?ov(Z0):window,Q0=T0.nodeName&&T0.nodeName.toLowerCase(),Q0==="select"||Q0==="input"&&T0.type==="file")var Fv=fx;else if(nb(T0))if(ob)Fv=lb;else{Fv=hx;var Jm=Jy}else Q0=T0.nodeName,!Q0||Q0.toLowerCase()!=="input"||T0.type!=="checkbox"&&T0.type!=="radio"?Z0&&v2(Z0.elementType)&&(Fv=fx):Fv=e3;if(Fv&&(Fv=Fv(n,Z0))){ib(_m,Fv,d,ym);break e}Jm&&Jm(n,T0,Z0),n==="focusout"&&Z0&&T0.type==="number"&&Z0.memoizedProps.value!=null&&Hg(T0,"number",T0.value)}switch(Jm=Z0?ov(Z0):window,n){case"focusin":(nb(Jm)||Jm.contentEditable==="true")&&(dy=Jm,Ny=Z0,wg=null);break;case"focusout":wg=Ny=dy=null;break;case"mousedown":J_=!0;break;case"contextmenu":case"mouseup":case"dragend":J_=!1,vx(_m,d,ym);break;case"selectionchange":if(e_)break;case"keydown":case"keyup":vx(_m,d,ym)}var Sv;if(cx)e:{switch(n){case"compositionstart":var qv="onCompositionStart";break e;case"compositionend":qv="onCompositionEnd";break e;case"compositionupdate":qv="onCompositionUpdate";break e}qv=void 0}else ky?$_(n,d)&&(qv="onCompositionEnd"):n==="keydown"&&d.keyCode===229&&(qv="onCompositionStart");qv&&(ux&&d.locale!=="ko"&&(ky||qv!=="onCompositionStart"?qv==="onCompositionEnd"&&ky&&(Sv=Xx()):(cy=ym,ex="value"in cy?cy.value:cy.textContent,ky=!0)),Jm=Cb(Z0,qv),0<Jm.length&&(qv=new nx(qv,n,null,d,ym),_m.push({event:qv,listeners:Jm}),Sv?qv.data=Sv:(Sv=w2(d),Sv!==null&&(qv.data=Sv)))),(Sv=Kb?ab(n,d):Jb(n,d))&&(qv=Cb(Z0,"onBeforeInput"),0<qv.length&&(Jm=new nx("onBeforeInput","beforeinput",null,d,ym),_m.push({event:Jm,listeners:qv}),Jm.data=Sv)),Q5(_m,n,Z0,d,ym)}S3(_m,i)})}function p2(n,i,d){return{instance:n,listener:i,currentTarget:d}}function Cb(n,i){for(var d=i+"Capture",O=[];n!==null;){var le=n,Ee=le.stateNode;if(le=le.tag,le!==5&&le!==26&&le!==27||Ee===null||(le=Yy(n,d),le!=null&&O.unshift(p2(n,le,Ee)),le=Yy(n,i),le!=null&&O.push(p2(n,le,Ee))),n.tag===3)return O;n=n.return}return[]}function tw(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function C5(n,i,d,O,le){for(var Ee=i._reactName,ms=[];d!==null&&d!==O;){var Hl=d,f0=Hl.alternate,Z0=Hl.stateNode;if(Hl=Hl.tag,f0!==null&&f0===O)break;Hl!==5&&Hl!==26&&Hl!==27||Z0===null||(f0=Z0,le?(Z0=Yy(d,Ee),Z0!=null&&ms.unshift(p2(d,Z0,f0))):le||(Z0=Yy(d,Ee),Z0!=null&&ms.push(p2(d,Z0,f0)))),d=d.return}ms.length!==0&&n.push({event:i,listeners:ms})}var rw=/\r\n?/g,aw=/\u0000|\uFFFD/g;function A3(n){return(typeof n=="string"?n:""+n).replace(rw,`
`).replace(aw,"")}function C3(n,i){return i=A3(i),A3(n)===i}function M1(n,i,d,O,le,Ee){switch(d){case"children":typeof O=="string"?i==="body"||i==="textarea"&&O===""||eg(n,O):(typeof O=="number"||typeof O=="bigint")&&i!=="body"&&eg(n,""+O);break;case"className":p1(n,"class",O);break;case"tabIndex":p1(n,"tabindex",O);break;case"dir":case"role":case"viewBox":case"width":case"height":p1(n,d,O);break;case"style":Ey(n,O,Ee);break;case"data":if(i!=="object"){p1(n,"data",O);break}case"src":case"href":if(O===""&&(i!=="a"||d!=="href")){n.removeAttribute(d);break}if(O==null||typeof O=="function"||typeof O=="symbol"||typeof O=="boolean"){n.removeAttribute(d);break}O=Wy(""+O),n.setAttribute(d,O);break;case"action":case"formAction":if(typeof O=="function"){n.setAttribute(d,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof Ee=="function"&&(d==="formAction"?(i!=="input"&&M1(n,i,"name",le.name,le,null),M1(n,i,"formEncType",le.formEncType,le,null),M1(n,i,"formMethod",le.formMethod,le,null),M1(n,i,"formTarget",le.formTarget,le,null)):(M1(n,i,"encType",le.encType,le,null),M1(n,i,"method",le.method,le,null),M1(n,i,"target",le.target,le,null)));if(O==null||typeof O=="symbol"||typeof O=="boolean"){n.removeAttribute(d);break}O=Wy(""+O),n.setAttribute(d,O);break;case"onClick":O!=null&&(n.onclick=D1);break;case"onScroll":O!=null&&e1("scroll",n);break;case"onScrollEnd":O!=null&&e1("scrollend",n);break;case"dangerouslySetInnerHTML":if(O!=null){if(typeof O!="object"||!("__html"in O))throw Error(a(61));if(d=O.__html,d!=null){if(le.children!=null)throw Error(a(60));n.innerHTML=d}}break;case"multiple":n.multiple=O&&typeof O!="function"&&typeof O!="symbol";break;case"muted":n.muted=O&&typeof O!="function"&&typeof O!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(O==null||typeof O=="function"||typeof O=="boolean"||typeof O=="symbol"){n.removeAttribute("xlink:href");break}d=Wy(""+O),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",d);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":O!=null&&typeof O!="function"&&typeof O!="symbol"?n.setAttribute(d,""+O):n.removeAttribute(d);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":O&&typeof O!="function"&&typeof O!="symbol"?n.setAttribute(d,""):n.removeAttribute(d);break;case"capture":case"download":O===!0?n.setAttribute(d,""):O!==!1&&O!=null&&typeof O!="function"&&typeof O!="symbol"?n.setAttribute(d,O):n.removeAttribute(d);break;case"cols":case"rows":case"size":case"span":O!=null&&typeof O!="function"&&typeof O!="symbol"&&!isNaN(O)&&1<=O?n.setAttribute(d,O):n.removeAttribute(d);break;case"rowSpan":case"start":O==null||typeof O=="function"||typeof O=="symbol"||isNaN(O)?n.removeAttribute(d):n.setAttribute(d,O);break;case"popover":e1("beforetoggle",n),e1("toggle",n),Kg(n,"popover",O);break;case"xlinkActuate":P1(n,"http://www.w3.org/1999/xlink","xlink:actuate",O);break;case"xlinkArcrole":P1(n,"http://www.w3.org/1999/xlink","xlink:arcrole",O);break;case"xlinkRole":P1(n,"http://www.w3.org/1999/xlink","xlink:role",O);break;case"xlinkShow":P1(n,"http://www.w3.org/1999/xlink","xlink:show",O);break;case"xlinkTitle":P1(n,"http://www.w3.org/1999/xlink","xlink:title",O);break;case"xlinkType":P1(n,"http://www.w3.org/1999/xlink","xlink:type",O);break;case"xmlBase":P1(n,"http://www.w3.org/XML/1998/namespace","xml:base",O);break;case"xmlLang":P1(n,"http://www.w3.org/XML/1998/namespace","xml:lang",O);break;case"xmlSpace":P1(n,"http://www.w3.org/XML/1998/namespace","xml:space",O);break;case"is":Kg(n,"is",O);break;case"innerText":case"textContent":break;default:(!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(d=u_.get(d)||d,Kg(n,d,O))}}function Rb(n,i,d,O,le,Ee){switch(d){case"style":Ey(n,O,Ee);break;case"dangerouslySetInnerHTML":if(O!=null){if(typeof O!="object"||!("__html"in O))throw Error(a(61));if(d=O.__html,d!=null){if(le.children!=null)throw Error(a(60));n.innerHTML=d}}break;case"children":typeof O=="string"?eg(n,O):(typeof O=="number"||typeof O=="bigint")&&eg(n,""+O);break;case"onScroll":O!=null&&e1("scroll",n);break;case"onScrollEnd":O!=null&&e1("scrollend",n);break;case"onClick":O!=null&&(n.onclick=D1);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Lv.hasOwnProperty(d))e:{if(d[0]==="o"&&d[1]==="n"&&(le=d.endsWith("Capture"),i=d.slice(2,le?d.length-7:void 0),Ee=n[A1]||null,Ee=Ee!=null?Ee[d]:null,typeof Ee=="function"&&n.removeEventListener(i,Ee,le),typeof O=="function")){typeof Ee!="function"&&Ee!==null&&(d in n?n[d]=null:n.hasAttribute(d)&&n.removeAttribute(d)),n.addEventListener(i,O,le);break e}d in n?n[d]=O:O===!0?n.setAttribute(d,""):Kg(n,d,O)}}}function sg(n,i,d){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":e1("error",n),e1("load",n);var O=!1,le=!1,Ee;for(Ee in d)if(d.hasOwnProperty(Ee)){var ms=d[Ee];if(ms!=null)switch(Ee){case"src":O=!0;break;case"srcSet":le=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:M1(n,i,Ee,ms,d,null)}}le&&M1(n,i,"srcSet",d.srcSet,d,null),O&&M1(n,i,"src",d.src,d,null);return;case"input":e1("invalid",n);var Hl=Ee=ms=le=null,f0=null,Z0=null;for(O in d)if(d.hasOwnProperty(O)){var ym=d[O];if(ym!=null)switch(O){case"name":le=ym;break;case"type":ms=ym;break;case"checked":f0=ym;break;case"defaultChecked":Z0=ym;break;case"value":Ee=ym;break;case"defaultValue":Hl=ym;break;case"children":case"dangerouslySetInnerHTML":if(ym!=null)throw Error(a(137,i));break;default:M1(n,i,O,ym,d,null)}}Gy(n,Ee,Hl,f0,Z0,ms,le,!1);return;case"select":e1("invalid",n),O=ms=Ee=null;for(le in d)if(d.hasOwnProperty(le)&&(Hl=d[le],Hl!=null))switch(le){case"value":Ee=Hl;break;case"defaultValue":ms=Hl;break;case"multiple":O=Hl;default:M1(n,i,le,Hl,d,null)}i=Ee,d=ms,n.multiple=!!O,i!=null?Vy(n,!!O,i,!1):d!=null&&Vy(n,!!O,d,!0);return;case"textarea":e1("invalid",n),Ee=le=O=null;for(ms in d)if(d.hasOwnProperty(ms)&&(Hl=d[ms],Hl!=null))switch(ms){case"value":O=Hl;break;case"defaultValue":le=Hl;break;case"children":Ee=Hl;break;case"dangerouslySetInnerHTML":if(Hl!=null)throw Error(a(91));break;default:M1(n,i,ms,Hl,d,null)}U1(n,O,le,Ee);return;case"option":for(f0 in d)if(d.hasOwnProperty(f0)&&(O=d[f0],O!=null))switch(f0){case"selected":n.selected=O&&typeof O!="function"&&typeof O!="symbol";break;default:M1(n,i,f0,O,d,null)}return;case"dialog":e1("beforetoggle",n),e1("toggle",n),e1("cancel",n),e1("close",n);break;case"iframe":case"object":e1("load",n);break;case"video":case"audio":for(O=0;O<q2.length;O++)e1(q2[O],n);break;case"image":e1("error",n),e1("load",n);break;case"details":e1("toggle",n);break;case"embed":case"source":case"link":e1("error",n),e1("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Z0 in d)if(d.hasOwnProperty(Z0)&&(O=d[Z0],O!=null))switch(Z0){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:M1(n,i,Z0,O,d,null)}return;default:if(v2(i)){for(ym in d)d.hasOwnProperty(ym)&&(O=d[ym],O!==void 0&&Rb(n,i,ym,O,d,void 0));return}}for(Hl in d)d.hasOwnProperty(Hl)&&(O=d[Hl],O!=null&&M1(n,i,Hl,O,d,null))}function Lb(n,i,d,O){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var le=null,Ee=null,ms=null,Hl=null,f0=null,Z0=null,ym=null;for(Q0 in d){var _m=d[Q0];if(d.hasOwnProperty(Q0)&&_m!=null)switch(Q0){case"checked":break;case"value":break;case"defaultValue":f0=_m;default:O.hasOwnProperty(Q0)||M1(n,i,Q0,null,O,_m)}}for(var T0 in O){var Q0=O[T0];if(_m=d[T0],O.hasOwnProperty(T0)&&(Q0!=null||_m!=null))switch(T0){case"type":Ee=Q0;break;case"name":le=Q0;break;case"checked":Z0=Q0;break;case"defaultChecked":ym=Q0;break;case"value":ms=Q0;break;case"defaultValue":Hl=Q0;break;case"children":case"dangerouslySetInnerHTML":if(Q0!=null)throw Error(a(137,i));break;default:Q0!==_m&&M1(n,i,T0,Q0,O,_m)}}Ng(n,ms,Hl,f0,Z0,ym,Ee,le);return;case"select":Q0=ms=Hl=T0=null;for(Ee in d)if(f0=d[Ee],d.hasOwnProperty(Ee)&&f0!=null)switch(Ee){case"value":break;case"multiple":Q0=f0;default:O.hasOwnProperty(Ee)||M1(n,i,Ee,null,O,f0)}for(le in O)if(Ee=O[le],f0=d[le],O.hasOwnProperty(le)&&(Ee!=null||f0!=null))switch(le){case"value":T0=Ee;break;case"defaultValue":Hl=Ee;break;case"multiple":ms=Ee;default:Ee!==f0&&M1(n,i,le,Ee,O,f0)}i=Hl,d=ms,O=Q0,T0!=null?Vy(n,!!d,T0,!1):!!O!=!!d&&(i!=null?Vy(n,!!d,i,!0):Vy(n,!!d,d?[]:"",!1));return;case"textarea":Q0=T0=null;for(Hl in d)if(le=d[Hl],d.hasOwnProperty(Hl)&&le!=null&&!O.hasOwnProperty(Hl))switch(Hl){case"value":break;case"children":break;default:M1(n,i,Hl,null,O,le)}for(ms in O)if(le=O[ms],Ee=d[ms],O.hasOwnProperty(ms)&&(le!=null||Ee!=null))switch(ms){case"value":T0=le;break;case"defaultValue":Q0=le;break;case"children":break;case"dangerouslySetInnerHTML":if(le!=null)throw Error(a(91));break;default:le!==Ee&&M1(n,i,ms,le,O,Ee)}Jg(n,T0,Q0);return;case"option":for(var km in d)if(T0=d[km],d.hasOwnProperty(km)&&T0!=null&&!O.hasOwnProperty(km))switch(km){case"selected":n.selected=!1;break;default:M1(n,i,km,null,O,T0)}for(f0 in O)if(T0=O[f0],Q0=d[f0],O.hasOwnProperty(f0)&&T0!==Q0&&(T0!=null||Q0!=null))switch(f0){case"selected":n.selected=T0&&typeof T0!="function"&&typeof T0!="symbol";break;default:M1(n,i,f0,T0,O,Q0)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Wm in d)T0=d[Wm],d.hasOwnProperty(Wm)&&T0!=null&&!O.hasOwnProperty(Wm)&&M1(n,i,Wm,null,O,T0);for(Z0 in O)if(T0=O[Z0],Q0=d[Z0],O.hasOwnProperty(Z0)&&T0!==Q0&&(T0!=null||Q0!=null))switch(Z0){case"children":case"dangerouslySetInnerHTML":if(T0!=null)throw Error(a(137,i));break;default:M1(n,i,Z0,T0,O,Q0)}return;default:if(v2(i)){for(var Av in d)T0=d[Av],d.hasOwnProperty(Av)&&T0!==void 0&&!O.hasOwnProperty(Av)&&Rb(n,i,Av,void 0,O,T0);for(ym in O)T0=O[ym],Q0=d[ym],!O.hasOwnProperty(ym)||T0===Q0||T0===void 0&&Q0===void 0||Rb(n,i,ym,T0,O,Q0);return}}for(var $0 in d)T0=d[$0],d.hasOwnProperty($0)&&T0!=null&&!O.hasOwnProperty($0)&&M1(n,i,$0,null,O,T0);for(_m in O)T0=O[_m],Q0=d[_m],!O.hasOwnProperty(_m)||T0===Q0||T0==null&&Q0==null||M1(n,i,_m,T0,O,Q0)}function R5(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function R3(){if(typeof performance.getEntriesByType=="function"){for(var n=0,i=0,d=performance.getEntriesByType("resource"),O=0;O<d.length;O++){var le=d[O],Ee=le.transferSize,ms=le.initiatorType,Hl=le.duration;if(Ee&&Hl&&R5(ms)){for(ms=0,Hl=le.responseEnd,O+=1;O<d.length;O++){var f0=d[O],Z0=f0.startTime;if(Z0>Hl)break;var ym=f0.transferSize,_m=f0.initiatorType;ym&&R5(_m)&&(f0=f0.responseEnd,ms+=ym*(f0<Hl?1:(Hl-Z0)/(f0-Z0)))}if(--O,i+=8*(Ee+ms)/(le.duration/1e3),n++,10<n)break}}if(0<n)return i/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var Db=null,L3=null;function kb(n){return n.nodeType===9?n:n.ownerDocument}function D3(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function k3(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function Nb(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Hx=null;function N3(){var n=window.event;return n&&n.type==="popstate"?n===Hx?!1:(Hx=n,!0):(Hx=null,!1)}var z3=typeof setTimeout=="function"?setTimeout:void 0,nw=typeof clearTimeout=="function"?clearTimeout:void 0,P3=typeof Promise=="function"?Promise:void 0,zb=typeof queueMicrotask=="function"?queueMicrotask:typeof P3<"u"?function(n){return P3.resolve(null).then(n).catch(L5)}:z3;function L5(n){setTimeout(function(){throw n})}function I_(n){return n==="head"}function D5(n,i){var d=i,O=0;do{var le=d.nextSibling;if(n.removeChild(d),le&&le.nodeType===8)if(d=le.data,d==="/$"||d==="/&"){if(O===0){n.removeChild(le),H0(i);return}O--}else if(d==="$"||d==="$?"||d==="$~"||d==="$!"||d==="&")O++;else if(d==="html")U_(n.ownerDocument.documentElement);else if(d==="head"){d=n.ownerDocument.head,U_(d);for(var Ee=d.firstChild;Ee;){var ms=Ee.nextSibling,Hl=Ee.nodeName;Ee[o0]||Hl==="SCRIPT"||Hl==="STYLE"||Hl==="LINK"&&Ee.rel.toLowerCase()==="stylesheet"||d.removeChild(Ee),Ee=ms}}else d==="body"&&U_(n.ownerDocument.body);d=le}while(d);H0(i)}function k5(n,i){var d=n;n=0;do{var O=d.nextSibling;if(d.nodeType===1?i?(d._stashedDisplay=d.style.display,d.style.display="none"):(d.style.display=d._stashedDisplay||"",d.getAttribute("style")===""&&d.removeAttribute("style")):d.nodeType===3&&(i?(d._stashedText=d.nodeValue,d.nodeValue=""):d.nodeValue=d._stashedText||""),O&&O.nodeType===8)if(d=O.data,d==="/$"){if(n===0)break;n--}else d!=="$"&&d!=="$?"&&d!=="$~"&&d!=="$!"||n++;d=O}while(d)}function O3(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var d=i;switch(i=i.nextSibling,d.nodeName){case"HTML":case"HEAD":case"BODY":O3(d),pm(d);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(d.rel.toLowerCase()==="stylesheet")continue}n.removeChild(d)}}function N5(n,i,d,O){for(;n.nodeType===1;){var le=d;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!O&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(O){if(!n[o0])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(Ee=n.getAttribute("rel"),Ee==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(Ee!==le.rel||n.getAttribute("href")!==(le.href==null||le.href===""?null:le.href)||n.getAttribute("crossorigin")!==(le.crossOrigin==null?null:le.crossOrigin)||n.getAttribute("title")!==(le.title==null?null:le.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(Ee=n.getAttribute("src"),(Ee!==(le.src==null?null:le.src)||n.getAttribute("type")!==(le.type==null?null:le.type)||n.getAttribute("crossorigin")!==(le.crossOrigin==null?null:le.crossOrigin))&&Ee&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var Ee=le.name==null?null:""+le.name;if(le.type==="hidden"&&n.getAttribute("name")===Ee)return n}else return n;if(n=oy(n.nextSibling),n===null)break}return null}function z5(n,i,d){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!d||(n=oy(n.nextSibling),n===null))return null;return n}function I3(n,i){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!i||(n=oy(n.nextSibling),n===null))return null;return n}function Pb(n){return n.data==="$?"||n.data==="$~"}function U3(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function Ob(n,i){var d=n.ownerDocument;if(n.data==="$~")n._reactRetry=i;else if(n.data!=="$?"||d.readyState!=="loading")i();else{var O=function(){i(),d.removeEventListener("DOMContentLoaded",O)};d.addEventListener("DOMContentLoaded",O),n._reactRetry=O}}function oy(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return n}var F3=null;function B3(n){n=n.nextSibling;for(var i=0;n;){if(n.nodeType===8){var d=n.data;if(d==="/$"||d==="/&"){if(i===0)return oy(n.nextSibling);i--}else d!=="$"&&d!=="$!"&&d!=="$?"&&d!=="$~"&&d!=="&"||i++}n=n.nextSibling}return null}function H3(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var d=n.data;if(d==="$"||d==="$!"||d==="$?"||d==="$~"||d==="&"){if(i===0)return n;i--}else d!=="/$"&&d!=="/&"||i++}n=n.previousSibling}return null}function P5(n,i,d){switch(i=kb(d),n){case"html":if(n=i.documentElement,!n)throw Error(a(452));return n;case"head":if(n=i.head,!n)throw Error(a(453));return n;case"body":if(n=i.body,!n)throw Error(a(454));return n;default:throw Error(a(451))}}function U_(n){for(var i=n.attributes;i.length;)n.removeAttributeNode(i[0]);pm(n)}var kg=new Map,j3=new Set;function jx(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Sy=Ze.d;Ze.d={f:Ty,r:O5,D:G3,C:iw,L:sw,m:ow,X:V3,S:Ub,M:I5};function Ty(){var n=Sy.f(),i=xb();return n||i}function O5(n){var i=iv(n);i!==null&&i.tag===5&&i.type==="form"?ce(i):Sy.r(n)}var W2=typeof document>"u"?null:document;function Ib(n,i,d){var O=W2;if(O&&typeof i=="string"&&i){var le=og(i);le='link[rel="'+n+'"][href="'+le+'"]',typeof d=="string"&&(le+='[crossorigin="'+d+'"]'),j3.has(le)||(j3.add(le),n={rel:n,crossOrigin:d,href:i},O.querySelector(le)===null&&(i=O.createElement("link"),sg(i,"link",n),cv(i),O.head.appendChild(i)))}}function G3(n){Sy.D(n),Ib("dns-prefetch",n,null)}function iw(n,i){Sy.C(n,i),Ib("preconnect",n,i)}function sw(n,i,d){Sy.L(n,i,d);var O=W2;if(O&&n&&i){var le='link[rel="preload"][as="'+og(i)+'"]';i==="image"&&d&&d.imageSrcSet?(le+='[imagesrcset="'+og(d.imageSrcSet)+'"]',typeof d.imageSizes=="string"&&(le+='[imagesizes="'+og(d.imageSizes)+'"]')):le+='[href="'+og(n)+'"]';var Ee=le;switch(i){case"style":Ee=Y2(n);break;case"script":Ee=m2(n)}kg.has(Ee)||(n=w({rel:"preload",href:i==="image"&&d&&d.imageSrcSet?void 0:n,as:i},d),kg.set(Ee,n),O.querySelector(le)!==null||i==="style"&&O.querySelector(Gx(Ee))||i==="script"&&O.querySelector(ly(Ee))||(i=O.createElement("link"),sg(i,"link",n),cv(i),O.head.appendChild(i)))}}function ow(n,i){Sy.m(n,i);var d=W2;if(d&&n){var O=i&&typeof i.as=="string"?i.as:"script",le='link[rel="modulepreload"][as="'+og(O)+'"][href="'+og(n)+'"]',Ee=le;switch(O){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":Ee=m2(n)}if(!kg.has(Ee)&&(n=w({rel:"modulepreload",href:n},i),kg.set(Ee,n),d.querySelector(le)===null)){switch(O){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(d.querySelector(ly(Ee)))return}O=d.createElement("link"),sg(O,"link",n),cv(O),d.head.appendChild(O)}}}function Ub(n,i,d){Sy.S(n,i,d);var O=W2;if(O&&n){var le=dv(O).hoistableStyles,Ee=Y2(n);i=i||"default";var ms=le.get(Ee);if(!ms){var Hl={loading:0,preload:null};if(ms=O.querySelector(Gx(Ee)))Hl.loading=5;else{n=w({rel:"stylesheet",href:n,"data-precedence":i},d),(d=kg.get(Ee))&&q3(n,d);var f0=ms=O.createElement("link");cv(f0),sg(f0,"link",n),f0._p=new Promise(function(Z0,ym){f0.onload=Z0,f0.onerror=ym}),f0.addEventListener("load",function(){Hl.loading|=1}),f0.addEventListener("error",function(){Hl.loading|=2}),Hl.loading|=4,X2(ms,i,O)}ms={type:"stylesheet",instance:ms,count:1,state:Hl},le.set(Ee,ms)}}}function V3(n,i){Sy.X(n,i);var d=W2;if(d&&n){var O=dv(d).hoistableScripts,le=m2(n),Ee=O.get(le);Ee||(Ee=d.querySelector(ly(le)),Ee||(n=w({src:n,async:!0},i),(i=kg.get(le))&&W3(n,i),Ee=d.createElement("script"),cv(Ee),sg(Ee,"link",n),d.head.appendChild(Ee)),Ee={type:"script",instance:Ee,count:1,state:null},O.set(le,Ee))}}function I5(n,i){Sy.M(n,i);var d=W2;if(d&&n){var O=dv(d).hoistableScripts,le=m2(n),Ee=O.get(le);Ee||(Ee=d.querySelector(ly(le)),Ee||(n=w({src:n,async:!0,type:"module"},i),(i=kg.get(le))&&W3(n,i),Ee=d.createElement("script"),cv(Ee),sg(Ee,"link",n),d.head.appendChild(Ee)),Ee={type:"script",instance:Ee,count:1,state:null},O.set(le,Ee))}}function U5(n,i,d,O){var le=(le=Wl.current)?jx(le):null;if(!le)throw Error(a(446));switch(n){case"meta":case"title":return null;case"style":return typeof d.precedence=="string"&&typeof d.href=="string"?(i=Y2(d.href),d=dv(le).hoistableStyles,O=d.get(i),O||(O={type:"style",instance:null,count:0,state:null},d.set(i,O)),O):{type:"void",instance:null,count:0,state:null};case"link":if(d.rel==="stylesheet"&&typeof d.href=="string"&&typeof d.precedence=="string"){n=Y2(d.href);var Ee=dv(le).hoistableStyles,ms=Ee.get(n);if(ms||(le=le.ownerDocument||le,ms={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},Ee.set(n,ms),(Ee=le.querySelector(Gx(n)))&&!Ee._p&&(ms.instance=Ee,ms.state.loading=5),kg.has(n)||(d={rel:"preload",as:"style",href:d.href,crossOrigin:d.crossOrigin,integrity:d.integrity,media:d.media,hrefLang:d.hrefLang,referrerPolicy:d.referrerPolicy},kg.set(n,d),Ee||F5(le,n,d,ms.state))),i&&O===null)throw Error(a(528,""));return ms}if(i&&O!==null)throw Error(a(529,""));return null;case"script":return i=d.async,d=d.src,typeof d=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=m2(d),d=dv(le).hoistableScripts,O=d.get(i),O||(O={type:"script",instance:null,count:0,state:null},d.set(i,O)),O):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,n))}}function Y2(n){return'href="'+og(n)+'"'}function Gx(n){return'link[rel="stylesheet"]['+n+"]"}function Zg(n){return w({},n,{"data-precedence":n.precedence,precedence:null})}function F5(n,i,d,O){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?O.loading=1:(i=n.createElement("link"),O.preload=i,i.addEventListener("load",function(){return O.loading|=1}),i.addEventListener("error",function(){return O.loading|=2}),sg(i,"link",d),cv(i),n.head.appendChild(i))}function m2(n){return'[src="'+og(n)+'"]'}function ly(n){return"script[async]"+n}function Fb(n,i,d){if(i.count++,i.instance===null)switch(i.type){case"style":var O=n.querySelector('style[data-href~="'+og(d.href)+'"]');if(O)return i.instance=O,cv(O),O;var le=w({},d,{"data-href":d.href,"data-precedence":d.precedence,href:null,precedence:null});return O=(n.ownerDocument||n).createElement("style"),cv(O),sg(O,"style",le),X2(O,d.precedence,n),i.instance=O;case"stylesheet":le=Y2(d.href);var Ee=n.querySelector(Gx(le));if(Ee)return i.state.loading|=4,i.instance=Ee,cv(Ee),Ee;O=Zg(d),(le=kg.get(le))&&q3(O,le),Ee=(n.ownerDocument||n).createElement("link"),cv(Ee);var ms=Ee;return ms._p=new Promise(function(Hl,f0){ms.onload=Hl,ms.onerror=f0}),sg(Ee,"link",O),i.state.loading|=4,X2(Ee,d.precedence,n),i.instance=Ee;case"script":return Ee=m2(d.src),(le=n.querySelector(ly(Ee)))?(i.instance=le,cv(le),le):(O=d,(le=kg.get(Ee))&&(O=w({},d),W3(O,le)),n=n.ownerDocument||n,le=n.createElement("script"),cv(le),sg(le,"link",O),n.head.appendChild(le),i.instance=le);case"void":return null;default:throw Error(a(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(O=i.instance,i.state.loading|=4,X2(O,d.precedence,n));return i.instance}function X2(n,i,d){for(var O=d.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),le=O.length?O[O.length-1]:null,Ee=le,ms=0;ms<O.length;ms++){var Hl=O[ms];if(Hl.dataset.precedence===i)Ee=Hl;else if(Ee!==le)break}Ee?Ee.parentNode.insertBefore(n,Ee.nextSibling):(i=d.nodeType===9?d.head:d,i.insertBefore(n,i.firstChild))}function q3(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function W3(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var Bb=null;function Y3(n,i,d){if(Bb===null){var O=new Map,le=Bb=new Map;le.set(d,O)}else le=Bb,O=le.get(d),O||(O=new Map,le.set(d,O));if(O.has(n))return O;for(O.set(n,null),d=d.getElementsByTagName(n),le=0;le<d.length;le++){var Ee=d[le];if(!(Ee[o0]||Ee[d1]||n==="link"&&Ee.getAttribute("rel")==="stylesheet")&&Ee.namespaceURI!=="http://www.w3.org/2000/svg"){var ms=Ee.getAttribute(i)||"";ms=n+ms;var Hl=O.get(ms);Hl?Hl.push(Ee):O.set(ms,[Ee])}}return O}function X3(n,i,d){n=n.ownerDocument||n,n.head.insertBefore(d,i==="title"?n.querySelector("head > title"):null)}function B5(n,i,d){if(d===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return n=i.disabled,typeof i.precedence=="string"&&n==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function $3(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function lw(n,i,d,O){if(d.type==="stylesheet"&&(typeof O.media!="string"||matchMedia(O.media).matches!==!1)&&(d.state.loading&4)===0){if(d.instance===null){var le=Y2(O.href),Ee=i.querySelector(Gx(le));if(Ee){i=Ee._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(n.count++,n=jb.bind(n),i.then(n,n)),d.state.loading|=4,d.instance=Ee,cv(Ee);return}Ee=i.ownerDocument||i,O=Zg(O),(le=kg.get(le))&&q3(O,le),Ee=Ee.createElement("link"),cv(Ee);var ms=Ee;ms._p=new Promise(function(Hl,f0){ms.onload=Hl,ms.onerror=f0}),sg(Ee,"link",O),d.instance=Ee}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(d,i),(i=d.state.preload)&&(d.state.loading&3)===0&&(n.count++,d=jb.bind(n),i.addEventListener("load",d),i.addEventListener("error",d))}}var Hb=0;function cw(n,i){return n.stylesheets&&n.count===0&&Vx(n,n.stylesheets),0<n.count||0<n.imgCount?function(d){var O=setTimeout(function(){if(n.stylesheets&&Vx(n,n.stylesheets),n.unsuspend){var Ee=n.unsuspend;n.unsuspend=null,Ee()}},6e4+i);0<n.imgBytes&&Hb===0&&(Hb=62500*R3());var le=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&Vx(n,n.stylesheets),n.unsuspend)){var Ee=n.unsuspend;n.unsuspend=null,Ee()}},(n.imgBytes>Hb?50:800)+i);return n.unsuspend=d,function(){n.unsuspend=null,clearTimeout(O),clearTimeout(le)}}:null}function jb(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Vx(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Gb=null;function Vx(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Gb=new Map,i.forEach(H5,n),Gb=null,jb.call(n))}function H5(n,i){if(!(i.state.loading&4)){var d=Gb.get(n);if(d)var O=d.get(null);else{d=new Map,Gb.set(n,d);for(var le=n.querySelectorAll("link[data-precedence],style[data-precedence]"),Ee=0;Ee<le.length;Ee++){var ms=le[Ee];(ms.nodeName==="LINK"||ms.getAttribute("media")!=="not all")&&(d.set(ms.dataset.precedence,ms),O=ms)}O&&d.set(null,O)}le=i.instance,ms=le.getAttribute("data-precedence"),Ee=d.get(ms)||O,Ee===O&&d.set(null,le),d.set(ms,le),this.count++,O=jb.bind(this),le.addEventListener("load",O),le.addEventListener("error",O),Ee?Ee.parentNode.insertBefore(le,Ee.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(le,n.firstChild)),i.state.loading|=4}}var F_={$$typeof:R,Provider:null,Consumer:null,_currentValue:it,_currentValue2:it,_threadCount:0};function j5(n,i,d,O,le,Ee,ms,Hl,f0){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=K0(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=K0(0),this.hiddenUpdates=K0(null),this.identifierPrefix=O,this.onUncaughtError=le,this.onCaughtError=Ee,this.onRecoverableError=ms,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=f0,this.incompleteTransitions=new Map}function qx(n,i,d,O,le,Ee,ms,Hl,f0,Z0,ym,_m){return n=new j5(n,i,d,ms,f0,Z0,ym,_m,Hl),i=1,Ee===!0&&(i|=24),Ee=Mg(3,null,null,i),n.current=Ee,Ee.stateNode=n,i=z2(),i.refCount++,n.pooledCache=i,i.refCount++,Ee.memoizedState={element:O,isDehydrated:d,cache:i},o_(Ee),n}function Z3(n){return n?(n=a_,n):a_}function $2(n,i,d,O,le,Ee){le=Z3(le),O.context===null?O.context=le:O.pendingContext=le,O=Ug(i),O.payload={element:d},Ee=Ee===void 0?null:Ee,Ee!==null&&(O.callback=Ee),d=L_(n,O,i),d!==null&&(Bg(d,n,i),D_(d,n,i))}function J1(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var d=n.retryLane;n.retryLane=d!==0&&d<i?d:i}}function Vb(n,i){J1(n,i),(n=n.alternate)&&J1(n,i)}function B_(n){if(n.tag===13||n.tag===31){var i=r_(n,67108864);i!==null&&Bg(i,n,67108864),Vb(n,67108864)}}function Wx(n){if(n.tag===13||n.tag===31){var i=$g();i=xv(i);var d=r_(n,i);d!==null&&Bg(d,n,i),Vb(n,i)}}var Z2=!0;function uw(n,i,d,O){var le=we.T;we.T=null;var Ee=Ze.p;try{Ze.p=2,K2(n,i,d,O)}finally{Ze.p=Ee,we.T=le}}function K3(n,i,d,O){var le=we.T;we.T=null;var Ee=Ze.p;try{Ze.p=8,K2(n,i,d,O)}finally{Ze.p=Ee,we.T=le}}function K2(n,i,d,O){if(Z2){var le=qb(O);if(le===null)Bx(n,i,O,Wb,d),We(n,O);else if(Si(le,n,i,d,O))O.stopPropagation();else if(We(n,O),i&4&&-1<Ne.indexOf(n)){for(;le!==null;){var Ee=iv(le);if(Ee!==null)switch(Ee.tag){case 3:if(Ee=Ee.stateNode,Ee.current.memoizedState.isDehydrated){var ms=Ke(Ee.pendingLanes);if(ms!==0){var Hl=Ee;for(Hl.pendingLanes|=2,Hl.entangledLanes|=2;ms;){var f0=1<<31-x0(ms);Hl.entanglements[1]|=f0,ms&=~f0}My(Ee),(mv&6)===0&&(sy=a0()+500,Ux(0))}}break;case 31:case 13:Hl=r_(Ee,2),Hl!==null&&Bg(Hl,Ee,2),xb(),Vb(Ee,2)}if(Ee=qb(O),Ee===null&&Bx(n,i,O,Wb,d),Ee===le)break;le=Ee}le!==null&&O.stopPropagation()}else Bx(n,i,O,null,d)}}function qb(n){return n=jg(n),J3(n)}var Wb=null;function J3(n){if(Wb=null,n=jm(n),n!==null){var i=o(n);if(i===null)n=null;else{var d=i.tag;if(d===13){if(n=f(i),n!==null)return n;n=null}else if(d===31){if(n=u(i),n!==null)return n;n=null}else if(d===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return Wb=n,null}function G5(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(rm()){case X0:return 2;case Nl:return 8;case Gl:case Mp:return 32;case _0:return 268435456;default:return 32}default:return 32}}var Q3=!1,By=null,H_=null,j_=null,_=new Map,K=new Map,se=[],Ne="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function We(n,i){switch(n){case"focusin":case"focusout":By=null;break;case"dragenter":case"dragleave":H_=null;break;case"mouseover":case"mouseout":j_=null;break;case"pointerover":case"pointerout":_.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":K.delete(i.pointerId)}}function nt(n,i,d,O,le,Ee){return n===null||n.nativeEvent!==Ee?(n={blockedOn:i,domEventName:d,eventSystemFlags:O,nativeEvent:Ee,targetContainers:[le]},i!==null&&(i=iv(i),i!==null&&B_(i)),n):(n.eventSystemFlags|=O,i=n.targetContainers,le!==null&&i.indexOf(le)===-1&&i.push(le),n)}function Si(n,i,d,O,le){switch(i){case"focusin":return By=nt(By,n,i,d,O,le),!0;case"dragenter":return H_=nt(H_,n,i,d,O,le),!0;case"mouseover":return j_=nt(j_,n,i,d,O,le),!0;case"pointerover":var Ee=le.pointerId;return _.set(Ee,nt(_.get(Ee)||null,n,i,d,O,le)),!0;case"gotpointercapture":return Ee=le.pointerId,K.set(Ee,nt(K.get(Ee)||null,n,i,d,O,le)),!0}return!1}function mr(n){var i=jm(n.target);if(i!==null){var d=o(i);if(d!==null){if(i=d.tag,i===13){if(i=f(d),i!==null){n.blockedOn=i,a1(n.priority,function(){Wx(d)});return}}else if(i===31){if(i=u(d),i!==null){n.blockedOn=i,a1(n.priority,function(){Wx(d)});return}}else if(i===3&&d.stateNode.current.memoizedState.isDehydrated){n.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}n.blockedOn=null}function xs(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var d=qb(n.nativeEvent);if(d===null){d=n.nativeEvent;var O=new d.constructor(d.type,d);Q2=O,d.target.dispatchEvent(O),Q2=null}else return i=iv(d),i!==null&&B_(i),n.blockedOn=d,!1;i.shift()}return!0}function ql(n,i,d){xs(n)&&d.delete(i)}function wp(){Q3=!1,By!==null&&xs(By)&&(By=null),H_!==null&&xs(H_)&&(H_=null),j_!==null&&xs(j_)&&(j_=null),_.forEach(ql),K.forEach(ql)}function Xp(n,i){n.blockedOn===i&&(n.blockedOn=null,Q3||(Q3=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,wp)))}var Zp=null;function D0(n){Zp!==n&&(Zp=n,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Zp===n&&(Zp=null);for(var i=0;i<n.length;i+=3){var d=n[i],O=n[i+1],le=n[i+2];if(typeof O!="function"){if(J3(O||d)===null)continue;break}var Ee=iv(d);Ee!==null&&(n.splice(i,3),i-=3,Re(Ee,{pending:!0,data:le,method:d.method,action:O},O,le))}}))}function H0(n){function i(f0){return Xp(f0,n)}By!==null&&Xp(By,n),H_!==null&&Xp(H_,n),j_!==null&&Xp(j_,n),_.forEach(i),K.forEach(i);for(var d=0;d<se.length;d++){var O=se[d];O.blockedOn===n&&(O.blockedOn=null)}for(;0<se.length&&(d=se[0],d.blockedOn===null);)mr(d),d.blockedOn===null&&se.shift();if(d=(n.ownerDocument||n).$$reactFormReplay,d!=null)for(O=0;O<d.length;O+=3){var le=d[O],Ee=d[O+1],ms=le[A1]||null;if(typeof Ee=="function")ms||D0(d);else if(ms){var Hl=null;if(Ee&&Ee.hasAttribute("formAction")){if(le=Ee,ms=Ee[A1]||null)Hl=ms.formAction;else if(J3(le)!==null)continue}else Hl=ms.action;typeof Hl=="function"?d[O+1]=Hl:(d.splice(O,3),O-=3),D0(d)}}}function i0(){function n(Ee){Ee.canIntercept&&Ee.info==="react-transition"&&Ee.intercept({handler:function(){return new Promise(function(ms){return le=ms})},focusReset:"manual",scroll:"manual"})}function i(){le!==null&&(le(),le=null),O||setTimeout(d,20)}function d(){if(!O&&!navigation.transition){var Ee=navigation.currentEntry;Ee&&Ee.url!=null&&navigation.navigate(Ee.url,{state:Ee.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var O=!1,le=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(d,100),function(){O=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),le!==null&&(le(),le=null)}}}function w0(n){this._internalRoot=n}A0.prototype.render=w0.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(a(409));var d=i.current,O=$g();$2(d,O,n,i,null,null)},A0.prototype.unmount=w0.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;$2(n.current,2,null,n,null,null),xb(),i[Zv]=null}};function A0(n){this._internalRoot=n}A0.prototype.unstable_scheduleHydration=function(n){if(n){var i=zv();n={blockedOn:null,target:n,priority:i};for(var d=0;d<se.length&&i!==0&&i<se[d].priority;d++);se.splice(d,0,n),d===0&&mr(n)}};var G0=e.version;if(G0!=="19.2.0")throw Error(a(527,G0,"19.2.0"));Ze.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(a(188)):(n=Object.keys(n).join(","),Error(a(268,n)));return n=x(i),n=n!==null?m(n):null,n=n===null?null:n.stateNode,n};var Y0={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:we,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var C0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!C0.isDisabled&&C0.supportsFiber)try{sm=C0.inject(Y0),Uo=C0}catch{}}return reactDomClient_production.createRoot=function(n,i){if(!s(n))throw Error(a(299));var d=!1,O="",le=y0,Ee=h0,ms=I0;return i!=null&&(i.unstable_strictMode===!0&&(d=!0),i.identifierPrefix!==void 0&&(O=i.identifierPrefix),i.onUncaughtError!==void 0&&(le=i.onUncaughtError),i.onCaughtError!==void 0&&(Ee=i.onCaughtError),i.onRecoverableError!==void 0&&(ms=i.onRecoverableError)),i=qx(n,1,!1,null,null,d,O,null,le,Ee,ms,i0),n[Zv]=i.current,Ab(n),new w0(i)},reactDomClient_production.hydrateRoot=function(n,i,d){if(!s(n))throw Error(a(299));var O=!1,le="",Ee=y0,ms=h0,Hl=I0,f0=null;return d!=null&&(d.unstable_strictMode===!0&&(O=!0),d.identifierPrefix!==void 0&&(le=d.identifierPrefix),d.onUncaughtError!==void 0&&(Ee=d.onUncaughtError),d.onCaughtError!==void 0&&(ms=d.onCaughtError),d.onRecoverableError!==void 0&&(Hl=d.onRecoverableError),d.formState!==void 0&&(f0=d.formState)),i=qx(n,1,!0,i,d??null,O,le,f0,Ee,ms,Hl,i0),i.context=Z3(null),d=i.current,O=$g(),O=xv(O),le=Ug(O),le.callback=null,L_(d,le,O),d=O,i.current.lanes=d,Pm(i,d),My(i),n[Zv]=i.current,Ab(n),new A0(i)},reactDomClient_production.version="19.2.0",reactDomClient_production}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client.exports;hasRequiredClient=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),client.exports=requireReactDomClient_production(),client.exports}var clientExports=requireClient();const ReactDOM=getDefaultExportFromCjs(clientExports);/**
 * react-router v7.9.4
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var PopStateEventType="popstate";function createHashHistory(r={}){function e(s,o){let{pathname:f="/",search:u="",hash:h=""}=parsePath(s.location.hash.substring(1));return!f.startsWith("/")&&!f.startsWith(".")&&(f="/"+f),createLocation("",{pathname:f,search:u,hash:h},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(s,o){let f=s.document.querySelector("base"),u="";if(f&&f.getAttribute("href")){let h=s.location.href,x=h.indexOf("#");u=x===-1?h:h.slice(0,x)}return u+"#"+(typeof o=="string"?o:createPath(o))}function a(s,o){warning(s.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(o)})`)}return getUrlBasedHistory(e,t,a,r)}function invariant(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function warning(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function createKey(){return Math.random().toString(36).substring(2,10)}function getHistoryState(r,e){return{usr:r.state,key:r.key,idx:e}}function createLocation(r,e,t=null,a){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?parsePath(e):e,state:t,key:e&&e.key||a||createKey()}}function createPath({pathname:r="/",search:e="",hash:t=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(r+=t.charAt(0)==="#"?t:"#"+t),r}function parsePath(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substring(t),r=r.substring(0,t));let a=r.indexOf("?");a>=0&&(e.search=r.substring(a),r=r.substring(0,a)),r&&(e.pathname=r)}return e}function getUrlBasedHistory(r,e,t,a={}){let{window:s=document.defaultView,v5Compat:o=!1}=a,f=s.history,u="POP",h=null,x=m();x==null&&(x=0,f.replaceState({...f.state,idx:x},""));function m(){return(f.state||{idx:null}).idx}function w(){u="POP";let l=m(),c=l==null?null:l-x;x=l,h&&h({action:u,location:y.location,delta:c})}function A(l,c){u="PUSH";let L=createLocation(y.location,l,c);t&&t(L,l),x=m()+1;let R=getHistoryState(L,x),F=y.createHref(L);try{f.pushState(R,"",F)}catch($){if($ instanceof DOMException&&$.name==="DataCloneError")throw $;s.location.assign(F)}o&&h&&h({action:u,location:y.location,delta:1})}function D(l,c){u="REPLACE";let L=createLocation(y.location,l,c);t&&t(L,l),x=m();let R=getHistoryState(L,x),F=y.createHref(L);f.replaceState(R,"",F),o&&h&&h({action:u,location:y.location,delta:0})}function I(l){return createBrowserURLImpl(l)}let y={get action(){return u},get location(){return r(s,f)},listen(l){if(h)throw new Error("A history only accepts one active listener");return s.addEventListener(PopStateEventType,w),h=l,()=>{s.removeEventListener(PopStateEventType,w),h=null}},createHref(l){return e(s,l)},createURL:I,encodeLocation(l){let c=I(l);return{pathname:c.pathname,search:c.search,hash:c.hash}},push:A,replace:D,go(l){return f.go(l)}};return y}function createBrowserURLImpl(r,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),invariant(t,"No window.location.(origin|href) available to create URL");let a=typeof r=="string"?r:createPath(r);return a=a.replace(/ $/,"%20"),!e&&a.startsWith("//")&&(a=t+a),new URL(a,t)}function matchRoutes(r,e,t="/"){return matchRoutesImpl(r,e,t,!1)}function matchRoutesImpl(r,e,t,a){let s=typeof e=="string"?parsePath(e):e,o=stripBasename(s.pathname||"/",t);if(o==null)return null;let f=flattenRoutes(r);rankRouteBranches(f);let u=null;for(let h=0;u==null&&h<f.length;++h){let x=decodePath(o);u=matchRouteBranch(f[h],x,a)}return u}function flattenRoutes(r,e=[],t=[],a="",s=!1){let o=(f,u,h=s,x)=>{let m={relativePath:x===void 0?f.path||"":x,caseSensitive:f.caseSensitive===!0,childrenIndex:u,route:f};if(m.relativePath.startsWith("/")){if(!m.relativePath.startsWith(a)&&h)return;invariant(m.relativePath.startsWith(a),`Absolute route path "${m.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(a.length)}let w=joinPaths([a,m.relativePath]),A=t.concat(m);f.children&&f.children.length>0&&(invariant(f.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${w}".`),flattenRoutes(f.children,e,A,w,h)),!(f.path==null&&!f.index)&&e.push({path:w,score:computeScore(w,f.index),routesMeta:A})};return r.forEach((f,u)=>{if(f.path===""||!f.path?.includes("?"))o(f,u);else for(let h of explodeOptionalSegments(f.path))o(f,u,!0,h)}),e}function explodeOptionalSegments(r){let e=r.split("/");if(e.length===0)return[];let[t,...a]=e,s=t.endsWith("?"),o=t.replace(/\?$/,"");if(a.length===0)return s?[o,""]:[o];let f=explodeOptionalSegments(a.join("/")),u=[];return u.push(...f.map(h=>h===""?o:[o,h].join("/"))),s&&u.push(...f),u.map(h=>r.startsWith("/")&&h===""?"/":h)}function rankRouteBranches(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:compareIndexes(e.routesMeta.map(a=>a.childrenIndex),t.routesMeta.map(a=>a.childrenIndex)))}var paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=r=>r==="*";function computeScore(r,e){let t=r.split("/"),a=t.length;return t.some(isSplat)&&(a+=splatPenalty),e&&(a+=indexRouteValue),t.filter(s=>!isSplat(s)).reduce((s,o)=>s+(paramRe.test(o)?dynamicSegmentValue:o===""?emptySegmentValue:staticSegmentValue),a)}function compareIndexes(r,e){return r.length===e.length&&r.slice(0,-1).every((a,s)=>a===e[s])?r[r.length-1]-e[e.length-1]:0}function matchRouteBranch(r,e,t=!1){let{routesMeta:a}=r,s={},o="/",f=[];for(let u=0;u<a.length;++u){let h=a[u],x=u===a.length-1,m=o==="/"?e:e.slice(o.length)||"/",w=matchPath({path:h.relativePath,caseSensitive:h.caseSensitive,end:x},m),A=h.route;if(!w&&x&&t&&!a[a.length-1].route.index&&(w=matchPath({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},m)),!w)return null;Object.assign(s,w.params),f.push({params:s,pathname:joinPaths([o,w.pathname]),pathnameBase:normalizePathname(joinPaths([o,w.pathnameBase])),route:A}),w.pathnameBase!=="/"&&(o=joinPaths([o,w.pathnameBase]))}return f}function matchPath(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,a]=compilePath(r.path,r.caseSensitive,r.end),s=e.match(t);if(!s)return null;let o=s[0],f=o.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:a.reduce((x,{paramName:m,isOptional:w},A)=>{if(m==="*"){let I=u[A]||"";f=o.slice(0,o.length-I.length).replace(/(.)\/+$/,"$1")}const D=u[A];return w&&!D?x[m]=void 0:x[m]=(D||"").replace(/%2F/g,"/"),x},{}),pathname:o,pathnameBase:f,pattern:r}}function compilePath(r,e=!1,t=!0){warning(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let a=[],s="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,u,h)=>(a.push({paramName:u,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(a.push({paramName:"*"}),s+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":r!==""&&r!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),a]}function decodePath(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return warning(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function stripBasename(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,a=r.charAt(t);return a&&a!=="/"?null:r.slice(t)||"/"}function resolvePath(r,e="/"){let{pathname:t,search:a="",hash:s=""}=typeof r=="string"?parsePath(r):r;return{pathname:t?t.startsWith("/")?t:resolvePathname(t,e):e,search:normalizeSearch(a),hash:normalizeHash(s)}}function resolvePathname(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function getInvalidPathError(r,e,t,a){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function getPathContributingMatches(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function getResolveToMatches(r){let e=getPathContributingMatches(r);return e.map((t,a)=>a===e.length-1?t.pathname:t.pathnameBase)}function resolveTo(r,e,t,a=!1){let s;typeof r=="string"?s=parsePath(r):(s={...r},invariant(!s.pathname||!s.pathname.includes("?"),getInvalidPathError("?","pathname","search",s)),invariant(!s.pathname||!s.pathname.includes("#"),getInvalidPathError("#","pathname","hash",s)),invariant(!s.search||!s.search.includes("#"),getInvalidPathError("#","search","hash",s)));let o=r===""||s.pathname==="",f=o?"/":s.pathname,u;if(f==null)u=t;else{let w=e.length-1;if(!a&&f.startsWith("..")){let A=f.split("/");for(;A[0]==="..";)A.shift(),w-=1;s.pathname=A.join("/")}u=w>=0?e[w]:"/"}let h=resolvePath(s,u),x=f&&f!=="/"&&f.endsWith("/"),m=(o||f===".")&&t.endsWith("/");return!h.pathname.endsWith("/")&&(x||m)&&(h.pathname+="/"),h}var joinPaths=r=>r.join("/").replace(/\/\/+/g,"/"),normalizePathname=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,normalizeHash=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function isRouteErrorResponse(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}var validMutationMethodsArr=["POST","PUT","PATCH","DELETE"];new Set(validMutationMethodsArr);var validRequestMethodsArr=["GET",...validMutationMethodsArr];new Set(validRequestMethodsArr);var DataRouterContext=reactExports.createContext(null);DataRouterContext.displayName="DataRouter";var DataRouterStateContext=reactExports.createContext(null);DataRouterStateContext.displayName="DataRouterState";reactExports.createContext(!1);var ViewTransitionContext=reactExports.createContext({isTransitioning:!1});ViewTransitionContext.displayName="ViewTransition";var FetchersContext=reactExports.createContext(new Map);FetchersContext.displayName="Fetchers";var AwaitContext=reactExports.createContext(null);AwaitContext.displayName="Await";var NavigationContext=reactExports.createContext(null);NavigationContext.displayName="Navigation";var LocationContext=reactExports.createContext(null);LocationContext.displayName="Location";var RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1});RouteContext.displayName="Route";var RouteErrorContext=reactExports.createContext(null);RouteErrorContext.displayName="RouteError";function useHref(r,{relative:e}={}){invariant(useInRouterContext(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:a}=reactExports.useContext(NavigationContext),{hash:s,pathname:o,search:f}=useResolvedPath(r,{relative:e}),u=o;return t!=="/"&&(u=o==="/"?t:joinPaths([t,o])),a.createHref({pathname:u,search:f,hash:s})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return invariant(useInRouterContext(),"useLocation() may be used only in the context of a <Router> component."),reactExports.useContext(LocationContext).location}var navigateEffectWarning="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function useIsomorphicLayoutEffect$1(r){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(r)}function useNavigate(){let{isDataRoute:r}=reactExports.useContext(RouteContext);return r?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){invariant(useInRouterContext(),"useNavigate() may be used only in the context of a <Router> component.");let r=reactExports.useContext(DataRouterContext),{basename:e,navigator:t}=reactExports.useContext(NavigationContext),{matches:a}=reactExports.useContext(RouteContext),{pathname:s}=useLocation(),o=JSON.stringify(getResolveToMatches(a)),f=reactExports.useRef(!1);return useIsomorphicLayoutEffect$1(()=>{f.current=!0}),reactExports.useCallback((h,x={})=>{if(warning(f.current,navigateEffectWarning),!f.current)return;if(typeof h=="number"){t.go(h);return}let m=resolveTo(h,JSON.parse(o),s,x.relative==="path");r==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:joinPaths([e,m.pathname])),(x.replace?t.replace:t.push)(m,x.state,x)},[e,t,o,s,r])}reactExports.createContext(null);function useResolvedPath(r,{relative:e}={}){let{matches:t}=reactExports.useContext(RouteContext),{pathname:a}=useLocation(),s=JSON.stringify(getResolveToMatches(t));return reactExports.useMemo(()=>resolveTo(r,JSON.parse(s),a,e==="path"),[r,s,a,e])}function useRoutesImpl(r,e,t,a,s){invariant(useInRouterContext(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=reactExports.useContext(NavigationContext),{matches:f}=reactExports.useContext(RouteContext),u=f[f.length-1],h=u?u.params:{},x=u?u.pathname:"/",m=u?u.pathnameBase:"/",w=u&&u.route;{let L=w&&w.path||"";warningOnce(x,!w||L.endsWith("*")||L.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${x}" (under <Route path="${L}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${L}"> to <Route path="${L==="/"?"*":`${L}/*`}">.`)}let A=useLocation(),D;D=A;let I=D.pathname||"/",y=I;if(m!=="/"){let L=m.replace(/^\//,"").split("/");y="/"+I.replace(/^\//,"").split("/").slice(L.length).join("/")}let l=matchRoutes(r,{pathname:y});return warning(w||l!=null,`No routes matched location "${D.pathname}${D.search}${D.hash}" `),warning(l==null||l[l.length-1].route.element!==void 0||l[l.length-1].route.Component!==void 0||l[l.length-1].route.lazy!==void 0,`Matched leaf route at location "${D.pathname}${D.search}${D.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),_renderMatches(l&&l.map(L=>Object.assign({},L,{params:Object.assign({},h,L.params),pathname:joinPaths([m,o.encodeLocation?o.encodeLocation(L.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:L.pathname]),pathnameBase:L.pathnameBase==="/"?m:joinPaths([m,o.encodeLocation?o.encodeLocation(L.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:L.pathnameBase])})),f,t,a,s)}function DefaultErrorComponent(){let r=useRouteError(),e=isRouteErrorResponse(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,a="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:a},o={padding:"2px 4px",backgroundColor:a},f=null;return console.error("Error handled by React Router default ErrorBoundary:",r),f=reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("p",null,"💿 Hey developer 👋"),reactExports.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",reactExports.createElement("code",{style:o},"ErrorBoundary")," or"," ",reactExports.createElement("code",{style:o},"errorElement")," prop on your route.")),reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},e),t?reactExports.createElement("pre",{style:s},t):null,f)}var defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null),RenderErrorBoundary=class extends reactExports.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){this.props.unstable_onError?this.props.unstable_onError(r,e):console.error("React Router caught the following error during render",r)}render(){return this.state.error!==void 0?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function RenderedRoute({routeContext:r,match:e,children:t}){let a=reactExports.useContext(DataRouterContext);return a&&a.static&&a.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=e.route.id),reactExports.createElement(RouteContext.Provider,{value:r},t)}function _renderMatches(r,e=[],t=null,a=null,s=null){if(r==null){if(!t)return null;if(t.errors)r=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let o=r,f=t?.errors;if(f!=null){let x=o.findIndex(m=>m.route.id&&f?.[m.route.id]!==void 0);invariant(x>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(f).join(",")}`),o=o.slice(0,Math.min(o.length,x+1))}let u=!1,h=-1;if(t)for(let x=0;x<o.length;x++){let m=o[x];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(h=x),m.route.id){let{loaderData:w,errors:A}=t,D=m.route.loader&&!w.hasOwnProperty(m.route.id)&&(!A||A[m.route.id]===void 0);if(m.route.lazy||D){u=!0,h>=0?o=o.slice(0,h+1):o=[o[0]];break}}}return o.reduceRight((x,m,w)=>{let A,D=!1,I=null,y=null;t&&(A=f&&m.route.id?f[m.route.id]:void 0,I=m.route.errorElement||defaultErrorElement,u&&(h<0&&w===0?(warningOnce("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),D=!0,y=null):h===w&&(D=!0,y=m.route.hydrateFallbackElement||null)));let l=e.concat(o.slice(0,w+1)),c=()=>{let L;return A?L=I:D?L=y:m.route.Component?L=reactExports.createElement(m.route.Component,null):m.route.element?L=m.route.element:L=x,reactExports.createElement(RenderedRoute,{match:m,routeContext:{outlet:x,matches:l,isDataRoute:t!=null},children:L})};return t&&(m.route.ErrorBoundary||m.route.errorElement||w===0)?reactExports.createElement(RenderErrorBoundary,{location:t.location,revalidation:t.revalidation,component:I,error:A,children:c(),routeContext:{outlet:null,matches:l,isDataRoute:!0},unstable_onError:a}):c()},null)}function getDataRouterConsoleError(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext(r){let e=reactExports.useContext(DataRouterContext);return invariant(e,getDataRouterConsoleError(r)),e}function useDataRouterState(r){let e=reactExports.useContext(DataRouterStateContext);return invariant(e,getDataRouterConsoleError(r)),e}function useRouteContext(r){let e=reactExports.useContext(RouteContext);return invariant(e,getDataRouterConsoleError(r)),e}function useCurrentRouteId(r){let e=useRouteContext(r),t=e.matches[e.matches.length-1];return invariant(t.route.id,`${r} can only be used on routes that contain a unique "id"`),t.route.id}function useRouteId(){return useCurrentRouteId("useRouteId")}function useRouteError(){let r=reactExports.useContext(RouteErrorContext),e=useDataRouterState("useRouteError"),t=useCurrentRouteId("useRouteError");return r!==void 0?r:e.errors?.[t]}function useNavigateStable(){let{router:r}=useDataRouterContext("useNavigate"),e=useCurrentRouteId("useNavigate"),t=reactExports.useRef(!1);return useIsomorphicLayoutEffect$1(()=>{t.current=!0}),reactExports.useCallback(async(s,o={})=>{warning(t.current,navigateEffectWarning),t.current&&(typeof s=="number"?r.navigate(s):await r.navigate(s,{fromRouteId:e,...o}))},[r,e])}var alreadyWarned={};function warningOnce(r,e,t){!e&&!alreadyWarned[r]&&(alreadyWarned[r]=!0,warning(!1,t))}reactExports.memo(DataRoutes);function DataRoutes({routes:r,future:e,state:t,unstable_onError:a}){return useRoutesImpl(r,void 0,t,a,e)}function Router({basename:r="/",children:e=null,location:t,navigationType:a="POP",navigator:s,static:o=!1}){invariant(!useInRouterContext(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=r.replace(/^\/*/,"/"),u=reactExports.useMemo(()=>({basename:f,navigator:s,static:o,future:{}}),[f,s,o]);typeof t=="string"&&(t=parsePath(t));let{pathname:h="/",search:x="",hash:m="",state:w=null,key:A="default"}=t,D=reactExports.useMemo(()=>{let I=stripBasename(h,f);return I==null?null:{location:{pathname:I,search:x,hash:m,state:w,key:A},navigationType:a}},[f,h,x,m,w,A,a]);return warning(D!=null,`<Router basename="${f}"> is not able to match the URL "${h}${x}${m}" because it does not start with the basename, so the <Router> won't render anything.`),D==null?null:reactExports.createElement(NavigationContext.Provider,{value:u},reactExports.createElement(LocationContext.Provider,{children:e,value:D}))}var defaultMethod="get",defaultEncType="application/x-www-form-urlencoded";function isHtmlElement(r){return r!=null&&typeof r.tagName=="string"}function isButtonElement(r){return isHtmlElement(r)&&r.tagName.toLowerCase()==="button"}function isFormElement(r){return isHtmlElement(r)&&r.tagName.toLowerCase()==="form"}function isInputElement(r){return isHtmlElement(r)&&r.tagName.toLowerCase()==="input"}function isModifiedEvent(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function shouldProcessLinkClick(r,e){return r.button===0&&(!e||e==="_self")&&!isModifiedEvent(r)}function createSearchParams(r=""){return new URLSearchParams(typeof r=="string"||Array.isArray(r)||r instanceof URLSearchParams?r:Object.keys(r).reduce((e,t)=>{let a=r[t];return e.concat(Array.isArray(a)?a.map(s=>[t,s]):[[t,a]])},[]))}function getSearchParamsForLocation(r,e){let t=createSearchParams(r);return e&&e.forEach((a,s)=>{t.has(s)||e.getAll(s).forEach(o=>{t.append(s,o)})}),t}var _formDataSupportsSubmitter=null;function isFormDataSubmitterSupported(){if(_formDataSupportsSubmitter===null)try{new FormData(document.createElement("form"),0),_formDataSupportsSubmitter=!1}catch{_formDataSupportsSubmitter=!0}return _formDataSupportsSubmitter}var supportedFormEncTypes=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function getFormEncType(r){return r!=null&&!supportedFormEncTypes.has(r)?(warning(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${defaultEncType}"`),null):r}function getFormSubmissionInfo(r,e){let t,a,s,o,f;if(isFormElement(r)){let u=r.getAttribute("action");a=u?stripBasename(u,e):null,t=r.getAttribute("method")||defaultMethod,s=getFormEncType(r.getAttribute("enctype"))||defaultEncType,o=new FormData(r)}else if(isButtonElement(r)||isInputElement(r)&&(r.type==="submit"||r.type==="image")){let u=r.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=r.getAttribute("formaction")||u.getAttribute("action");if(a=h?stripBasename(h,e):null,t=r.getAttribute("formmethod")||u.getAttribute("method")||defaultMethod,s=getFormEncType(r.getAttribute("formenctype"))||getFormEncType(u.getAttribute("enctype"))||defaultEncType,o=new FormData(u,r),!isFormDataSubmitterSupported()){let{name:x,type:m,value:w}=r;if(m==="image"){let A=x?`${x}.`:"";o.append(`${A}x`,"0"),o.append(`${A}y`,"0")}else x&&o.append(x,w)}}else{if(isHtmlElement(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=defaultMethod,a=null,s=defaultEncType,f=r}return o&&s==="text/plain"&&(f=o,o=void 0),{action:a,method:t.toLowerCase(),encType:s,formData:o,body:f}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function invariant2(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function singleFetchUrl(r,e,t){let a=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return a.pathname==="/"?a.pathname=`_root.${t}`:e&&stripBasename(a.pathname,e)==="/"?a.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:a.pathname=`${a.pathname.replace(/\/$/,"")}.${t}`,a}async function loadRouteModule(r,e){if(r.id in e)return e[r.id];try{let t=await import(r.module);return e[r.id]=t,t}catch(t){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function isHtmlLinkDescriptor(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function getKeyedPrefetchLinks(r,e,t){let a=await Promise.all(r.map(async s=>{let o=e.routes[s.route.id];if(o){let f=await loadRouteModule(o,t);return f.links?f.links():[]}return[]}));return dedupeLinkDescriptors(a.flat(1).filter(isHtmlLinkDescriptor).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function getNewMatchesForLinks(r,e,t,a,s,o){let f=(h,x)=>t[x]?h.route.id!==t[x].route.id:!0,u=(h,x)=>t[x].pathname!==h.pathname||t[x].route.path?.endsWith("*")&&t[x].params["*"]!==h.params["*"];return o==="assets"?e.filter((h,x)=>f(h,x)||u(h,x)):o==="data"?e.filter((h,x)=>{let m=a.routes[h.route.id];if(!m||!m.hasLoader)return!1;if(f(h,x)||u(h,x))return!0;if(h.route.shouldRevalidate){let w=h.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(r,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof w=="boolean")return w}return!0}):[]}function getModuleLinkHrefs(r,e,{includeHydrateFallback:t}={}){return dedupeHrefs(r.map(a=>{let s=e.routes[a.route.id];if(!s)return[];let o=[s.module];return s.clientActionModule&&(o=o.concat(s.clientActionModule)),s.clientLoaderModule&&(o=o.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(o=o.concat(s.hydrateFallbackModule)),s.imports&&(o=o.concat(s.imports)),o}).flat(1))}function dedupeHrefs(r){return[...new Set(r)]}function sortKeys(r){let e={},t=Object.keys(r).sort();for(let a of t)e[a]=r[a];return e}function dedupeLinkDescriptors(r,e){let t=new Set;return new Set(e),r.reduce((a,s)=>{let o=JSON.stringify(sortKeys(s));return t.has(o)||(t.add(o),a.push({key:o,link:s})),a},[])}function useDataRouterContext2(){let r=reactExports.useContext(DataRouterContext);return invariant2(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function useDataRouterStateContext(){let r=reactExports.useContext(DataRouterStateContext);return invariant2(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var FrameworkContext=reactExports.createContext(void 0);FrameworkContext.displayName="FrameworkContext";function useFrameworkContext(){let r=reactExports.useContext(FrameworkContext);return invariant2(r,"You must render this element inside a <HydratedRouter> element"),r}function usePrefetchBehavior(r,e){let t=reactExports.useContext(FrameworkContext),[a,s]=reactExports.useState(!1),[o,f]=reactExports.useState(!1),{onFocus:u,onBlur:h,onMouseEnter:x,onMouseLeave:m,onTouchStart:w}=e,A=reactExports.useRef(null);reactExports.useEffect(()=>{if(r==="render"&&f(!0),r==="viewport"){let y=c=>{c.forEach(L=>{f(L.isIntersecting)})},l=new IntersectionObserver(y,{threshold:.5});return A.current&&l.observe(A.current),()=>{l.disconnect()}}},[r]),reactExports.useEffect(()=>{if(a){let y=setTimeout(()=>{f(!0)},100);return()=>{clearTimeout(y)}}},[a]);let D=()=>{s(!0)},I=()=>{s(!1),f(!1)};return t?r!=="intent"?[o,A,{}]:[o,A,{onFocus:composeEventHandlers(u,D),onBlur:composeEventHandlers(h,I),onMouseEnter:composeEventHandlers(x,D),onMouseLeave:composeEventHandlers(m,I),onTouchStart:composeEventHandlers(w,D)}]:[!1,A,{}]}function composeEventHandlers(r,e){return t=>{r&&r(t),t.defaultPrevented||e(t)}}function PrefetchPageLinks({page:r,...e}){let{router:t}=useDataRouterContext2(),a=reactExports.useMemo(()=>matchRoutes(t.routes,r,t.basename),[t.routes,r,t.basename]);return a?reactExports.createElement(PrefetchPageLinksImpl,{page:r,matches:a,...e}):null}function useKeyedPrefetchLinks(r){let{manifest:e,routeModules:t}=useFrameworkContext(),[a,s]=reactExports.useState([]);return reactExports.useEffect(()=>{let o=!1;return getKeyedPrefetchLinks(r,e,t).then(f=>{o||s(f)}),()=>{o=!0}},[r,e,t]),a}function PrefetchPageLinksImpl({page:r,matches:e,...t}){let a=useLocation(),{manifest:s,routeModules:o}=useFrameworkContext(),{basename:f}=useDataRouterContext2(),{loaderData:u,matches:h}=useDataRouterStateContext(),x=reactExports.useMemo(()=>getNewMatchesForLinks(r,e,h,s,a,"data"),[r,e,h,s,a]),m=reactExports.useMemo(()=>getNewMatchesForLinks(r,e,h,s,a,"assets"),[r,e,h,s,a]),w=reactExports.useMemo(()=>{if(r===a.pathname+a.search+a.hash)return[];let I=new Set,y=!1;if(e.forEach(c=>{let L=s.routes[c.route.id];!L||!L.hasLoader||(!x.some(R=>R.route.id===c.route.id)&&c.route.id in u&&o[c.route.id]?.shouldRevalidate||L.hasClientLoader?y=!0:I.add(c.route.id))}),I.size===0)return[];let l=singleFetchUrl(r,f,"data");return y&&I.size>0&&l.searchParams.set("_routes",e.filter(c=>I.has(c.route.id)).map(c=>c.route.id).join(",")),[l.pathname+l.search]},[f,u,a,s,x,e,r,o]),A=reactExports.useMemo(()=>getModuleLinkHrefs(m,s),[m,s]),D=useKeyedPrefetchLinks(m);return reactExports.createElement(reactExports.Fragment,null,w.map(I=>reactExports.createElement("link",{key:I,rel:"prefetch",as:"fetch",href:I,...t})),A.map(I=>reactExports.createElement("link",{key:I,rel:"modulepreload",href:I,...t})),D.map(({key:I,link:y})=>reactExports.createElement("link",{key:I,nonce:t.nonce,...y})))}function mergeRefs(...r){return e=>{r.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var isBrowser=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{isBrowser&&(window.__reactRouterVersion="7.9.4")}catch{}function HashRouter({basename:r,children:e,window:t}){let a=reactExports.useRef();a.current==null&&(a.current=createHashHistory({window:t,v5Compat:!0}));let s=a.current,[o,f]=reactExports.useState({action:s.action,location:s.location}),u=reactExports.useCallback(h=>{reactExports.startTransition(()=>f(h))},[f]);return reactExports.useLayoutEffect(()=>s.listen(u),[s,u]),reactExports.createElement(Router,{basename:r,children:e,location:o.location,navigationType:o.action,navigator:s})}var ABSOLUTE_URL_REGEX2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link=reactExports.forwardRef(function({onClick:e,discover:t="render",prefetch:a="none",relative:s,reloadDocument:o,replace:f,state:u,target:h,to:x,preventScrollReset:m,viewTransition:w,...A},D){let{basename:I}=reactExports.useContext(NavigationContext),y=typeof x=="string"&&ABSOLUTE_URL_REGEX2.test(x),l,c=!1;if(typeof x=="string"&&y&&(l=x,isBrowser))try{let J=new URL(window.location.href),X=x.startsWith("//")?new URL(J.protocol+x):new URL(x),ae=stripBasename(X.pathname,I);X.origin===J.origin&&ae!=null?x=ae+X.search+X.hash:c=!0}catch{warning(!1,`<Link to="${x}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let L=useHref(x,{relative:s}),[R,F,$]=usePrefetchBehavior(a,A),b=useLinkClickHandler(x,{replace:f,state:u,target:h,preventScrollReset:m,relative:s,viewTransition:w});function k(J){e&&e(J),J.defaultPrevented||b(J)}let B=reactExports.createElement("a",{...A,...$,href:l||L,onClick:c||o?e:k,ref:mergeRefs(D,F),target:h,"data-discover":!y&&t==="render"?"true":void 0});return R&&!y?reactExports.createElement(reactExports.Fragment,null,B,reactExports.createElement(PrefetchPageLinks,{page:L})):B});Link.displayName="Link";var NavLink=reactExports.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:a="",end:s=!1,style:o,to:f,viewTransition:u,children:h,...x},m){let w=useResolvedPath(f,{relative:x.relative}),A=useLocation(),D=reactExports.useContext(DataRouterStateContext),{navigator:I,basename:y}=reactExports.useContext(NavigationContext),l=D!=null&&useViewTransitionState(w)&&u===!0,c=I.encodeLocation?I.encodeLocation(w).pathname:w.pathname,L=A.pathname,R=D&&D.navigation&&D.navigation.location?D.navigation.location.pathname:null;t||(L=L.toLowerCase(),R=R?R.toLowerCase():null,c=c.toLowerCase()),R&&y&&(R=stripBasename(R,y)||R);const F=c!=="/"&&c.endsWith("/")?c.length-1:c.length;let $=L===c||!s&&L.startsWith(c)&&L.charAt(F)==="/",b=R!=null&&(R===c||!s&&R.startsWith(c)&&R.charAt(c.length)==="/"),k={isActive:$,isPending:b,isTransitioning:l},B=$?e:void 0,J;typeof a=="function"?J=a(k):J=[a,$?"active":null,b?"pending":null,l?"transitioning":null].filter(Boolean).join(" ");let X=typeof o=="function"?o(k):o;return reactExports.createElement(Link,{...x,"aria-current":B,className:J,ref:m,style:X,to:f,viewTransition:u},typeof h=="function"?h(k):h)});NavLink.displayName="NavLink";var Form=reactExports.forwardRef(({discover:r="render",fetcherKey:e,navigate:t,reloadDocument:a,replace:s,state:o,method:f=defaultMethod,action:u,onSubmit:h,relative:x,preventScrollReset:m,viewTransition:w,...A},D)=>{let I=useSubmit(),y=useFormAction(u,{relative:x}),l=f.toLowerCase()==="get"?"get":"post",c=typeof u=="string"&&ABSOLUTE_URL_REGEX2.test(u),L=R=>{if(h&&h(R),R.defaultPrevented)return;R.preventDefault();let F=R.nativeEvent.submitter,$=F?.getAttribute("formmethod")||f;I(F||R.currentTarget,{fetcherKey:e,method:$,navigate:t,replace:s,state:o,relative:x,preventScrollReset:m,viewTransition:w})};return reactExports.createElement("form",{ref:D,method:l,action:y,onSubmit:a?h:L,...A,"data-discover":!c&&r==="render"?"true":void 0})});Form.displayName="Form";function getDataRouterConsoleError2(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext3(r){let e=reactExports.useContext(DataRouterContext);return invariant(e,getDataRouterConsoleError2(r)),e}function useLinkClickHandler(r,{target:e,replace:t,state:a,preventScrollReset:s,relative:o,viewTransition:f}={}){let u=useNavigate(),h=useLocation(),x=useResolvedPath(r,{relative:o});return reactExports.useCallback(m=>{if(shouldProcessLinkClick(m,e)){m.preventDefault();let w=t!==void 0?t:createPath(h)===createPath(x);u(r,{replace:w,state:a,preventScrollReset:s,relative:o,viewTransition:f})}},[h,u,x,t,a,e,r,s,o,f])}function useSearchParams(r){warning(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=reactExports.useRef(createSearchParams(r)),t=reactExports.useRef(!1),a=useLocation(),s=reactExports.useMemo(()=>getSearchParamsForLocation(a.search,t.current?null:e.current),[a.search]),o=useNavigate(),f=reactExports.useCallback((u,h)=>{const x=createSearchParams(typeof u=="function"?u(new URLSearchParams(s)):u);t.current=!0,o("?"+x,h)},[o,s]);return[s,f]}var fetcherId=0,getUniqueFetcherId=()=>`__${String(++fetcherId)}__`;function useSubmit(){let{router:r}=useDataRouterContext3("useSubmit"),{basename:e}=reactExports.useContext(NavigationContext),t=useRouteId();return reactExports.useCallback(async(a,s={})=>{let{action:o,method:f,encType:u,formData:h,body:x}=getFormSubmissionInfo(a,e);if(s.navigate===!1){let m=s.fetcherKey||getUniqueFetcherId();await r.fetch(m,t,s.action||o,{preventScrollReset:s.preventScrollReset,formData:h,body:x,formMethod:s.method||f,formEncType:s.encType||u,flushSync:s.flushSync})}else await r.navigate(s.action||o,{preventScrollReset:s.preventScrollReset,formData:h,body:x,formMethod:s.method||f,formEncType:s.encType||u,replace:s.replace,state:s.state,fromRouteId:t,flushSync:s.flushSync,viewTransition:s.viewTransition})},[r,e,t])}function useFormAction(r,{relative:e}={}){let{basename:t}=reactExports.useContext(NavigationContext),a=reactExports.useContext(RouteContext);invariant(a,"useFormAction must be used inside a RouteContext");let[s]=a.matches.slice(-1),o={...useResolvedPath(r||".",{relative:e})},f=useLocation();if(r==null){o.search=f.search;let u=new URLSearchParams(o.search),h=u.getAll("index");if(h.some(m=>m==="")){u.delete("index"),h.filter(w=>w).forEach(w=>u.append("index",w));let m=u.toString();o.search=m?`?${m}`:""}}return(!r||r===".")&&s.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(o.pathname=o.pathname==="/"?t:joinPaths([t,o.pathname])),createPath(o)}function useViewTransitionState(r,{relative:e}={}){let t=reactExports.useContext(ViewTransitionContext);invariant(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=useDataRouterContext3("useViewTransitionState"),s=useResolvedPath(r,{relative:e});if(!t.isTransitioning)return!1;let o=stripBasename(t.currentLocation.pathname,a)||t.currentLocation.pathname,f=stripBasename(t.nextLocation.pathname,a)||t.nextLocation.pathname;return matchPath(s.pathname,f)!=null||matchPath(s.pathname,o)!=null}var reactDomExports=requireReactDom();const PanelGroupContext=reactExports.createContext(null);PanelGroupContext.displayName="PanelGroupContext";const DATA_ATTRIBUTES={group:"data-panel-group",groupDirection:"data-panel-group-direction",groupId:"data-panel-group-id",panel:"data-panel",panelCollapsible:"data-panel-collapsible",panelId:"data-panel-id",panelSize:"data-panel-size",resizeHandle:"data-resize-handle",resizeHandleActive:"data-resize-handle-active",resizeHandleEnabled:"data-panel-resize-handle-enabled",resizeHandleId:"data-panel-resize-handle-id",resizeHandleState:"data-resize-handle-state"},PRECISION=10,useIsomorphicLayoutEffect=reactExports.useLayoutEffect,useId=React$1.useId,wrappedUseId=typeof useId=="function"?useId:()=>null;let counter=0;function useUniqueId(r=null){const e=wrappedUseId(),t=reactExports.useRef(r||e||null);return t.current===null&&(t.current=""+counter++),r??t.current}function PanelWithForwardedRef({children:r,className:e="",collapsedSize:t,collapsible:a,defaultSize:s,forwardedRef:o,id:f,maxSize:u,minSize:h,onCollapse:x,onExpand:m,onResize:w,order:A,style:D,tagName:I="div",...y}){const l=reactExports.useContext(PanelGroupContext);if(l===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:c,expandPanel:L,getPanelSize:R,getPanelStyle:F,groupId:$,isPanelCollapsed:b,reevaluatePanelConstraints:k,registerPanel:B,resizePanel:J,unregisterPanel:X}=l,ae=useUniqueId(f),He=reactExports.useRef({callbacks:{onCollapse:x,onExpand:m,onResize:w},constraints:{collapsedSize:t,collapsible:a,defaultSize:s,maxSize:u,minSize:h},id:ae,idIsFromProps:f!==void 0,order:A});reactExports.useRef({didLogMissingDefaultSizeWarning:!1}),useIsomorphicLayoutEffect(()=>{const{callbacks:ue,constraints:Oe}=He.current,we={...Oe};He.current.id=ae,He.current.idIsFromProps=f!==void 0,He.current.order=A,ue.onCollapse=x,ue.onExpand=m,ue.onResize=w,Oe.collapsedSize=t,Oe.collapsible=a,Oe.defaultSize=s,Oe.maxSize=u,Oe.minSize=h,(we.collapsedSize!==Oe.collapsedSize||we.collapsible!==Oe.collapsible||we.maxSize!==Oe.maxSize||we.minSize!==Oe.minSize)&&k(He.current,we)}),useIsomorphicLayoutEffect(()=>{const ue=He.current;return B(ue),()=>{X(ue)}},[A,ae,B,X]),reactExports.useImperativeHandle(o,()=>({collapse:()=>{c(He.current)},expand:ue=>{L(He.current,ue)},getId(){return ae},getSize(){return R(He.current)},isCollapsed(){return b(He.current)},isExpanded(){return!b(He.current)},resize:ue=>{J(He.current,ue)}}),[c,L,R,b,ae,J]);const Pe=F(He.current,s);return reactExports.createElement(I,{...y,children:r,className:e,id:ae,style:{...Pe,...D},[DATA_ATTRIBUTES.groupId]:$,[DATA_ATTRIBUTES.panel]:"",[DATA_ATTRIBUTES.panelCollapsible]:a||void 0,[DATA_ATTRIBUTES.panelId]:ae,[DATA_ATTRIBUTES.panelSize]:parseFloat(""+Pe.flexGrow).toFixed(1)})}const Panel$1=reactExports.forwardRef((r,e)=>reactExports.createElement(PanelWithForwardedRef,{...r,forwardedRef:e}));PanelWithForwardedRef.displayName="Panel";Panel$1.displayName="forwardRef(Panel)";let currentCursorStyle=null,prevRuleIndex=-1,styleElement=null;function getCursorStyle(r,e,t){const a=(e&EXCEEDED_HORIZONTAL_MIN)!==0,s=(e&EXCEEDED_HORIZONTAL_MAX)!==0,o=(e&EXCEEDED_VERTICAL_MIN)!==0,f=(e&EXCEEDED_VERTICAL_MAX)!==0;if(e){if(a)return o?"se-resize":f?"ne-resize":"e-resize";if(s)return o?"sw-resize":f?"nw-resize":"w-resize";if(o)return"s-resize";if(f)return"n-resize"}switch(r){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}function resetGlobalCursorStyle(){styleElement!==null&&(document.head.removeChild(styleElement),currentCursorStyle=null,styleElement=null,prevRuleIndex=-1)}function setGlobalCursorStyle(r,e,t){var a,s;const o=getCursorStyle(r,e);if(currentCursorStyle!==o){if(currentCursorStyle=o,styleElement===null&&(styleElement=document.createElement("style"),document.head.appendChild(styleElement)),prevRuleIndex>=0){var f;(f=styleElement.sheet)===null||f===void 0||f.removeRule(prevRuleIndex)}prevRuleIndex=(a=(s=styleElement.sheet)===null||s===void 0?void 0:s.insertRule(`*{cursor: ${o} !important;}`))!==null&&a!==void 0?a:-1}}function isKeyDown(r){return r.type==="keydown"}function isPointerEvent(r){return r.type.startsWith("pointer")}function isMouseEvent$1(r){return r.type.startsWith("mouse")}function getResizeEventCoordinates(r){if(isPointerEvent(r)){if(r.isPrimary)return{x:r.clientX,y:r.clientY}}else if(isMouseEvent$1(r))return{x:r.clientX,y:r.clientY};return{x:1/0,y:1/0}}function getInputType(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}function intersects(r,e,t){return r.x<e.x+e.width&&r.x+r.width>e.x&&r.y<e.y+e.height&&r.y+r.height>e.y}function compare(r,e){if(r===e)throw new Error("Cannot compare node with itself");const t={a:get_ancestors(r),b:get_ancestors(e)};let a;for(;t.a.at(-1)===t.b.at(-1);)r=t.a.pop(),e=t.b.pop(),a=r;assert(a,"Stacking order can only be calculated for elements with a common ancestor");const s={a:get_z_index(find_stacking_context(t.a)),b:get_z_index(find_stacking_context(t.b))};if(s.a===s.b){const o=a.childNodes,f={a:t.a.at(-1),b:t.b.at(-1)};let u=o.length;for(;u--;){const h=o[u];if(h===f.a)return 1;if(h===f.b)return-1}}return Math.sign(s.a-s.b)}const props=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function is_flex_item(r){var e;const t=getComputedStyle((e=get_parent(r))!==null&&e!==void 0?e:r).display;return t==="flex"||t==="inline-flex"}function creates_stacking_context(r){const e=getComputedStyle(r);return!!(e.position==="fixed"||e.zIndex!=="auto"&&(e.position!=="static"||is_flex_item(r))||+e.opacity<1||"transform"in e&&e.transform!=="none"||"webkitTransform"in e&&e.webkitTransform!=="none"||"mixBlendMode"in e&&e.mixBlendMode!=="normal"||"filter"in e&&e.filter!=="none"||"webkitFilter"in e&&e.webkitFilter!=="none"||"isolation"in e&&e.isolation==="isolate"||props.test(e.willChange)||e.webkitOverflowScrolling==="touch")}function find_stacking_context(r){let e=r.length;for(;e--;){const t=r[e];if(assert(t,"Missing node"),creates_stacking_context(t))return t}return null}function get_z_index(r){return r&&Number(getComputedStyle(r).zIndex)||0}function get_ancestors(r){const e=[];for(;r;)e.push(r),r=get_parent(r);return e}function get_parent(r){const{parentNode:e}=r;return e&&e instanceof ShadowRoot?e.host:e}const EXCEEDED_HORIZONTAL_MIN=1,EXCEEDED_HORIZONTAL_MAX=2,EXCEEDED_VERTICAL_MIN=4,EXCEEDED_VERTICAL_MAX=8,isCoarsePointer=getInputType()==="coarse";let intersectingHandles=[],isPointerDown=!1,ownerDocumentCounts=new Map,panelConstraintFlags=new Map;const registeredResizeHandlers=new Set;function registerResizeHandle(r,e,t,a,s){var o;const{ownerDocument:f}=e,u={direction:t,element:e,hitAreaMargins:a,setResizeHandlerState:s},h=(o=ownerDocumentCounts.get(f))!==null&&o!==void 0?o:0;return ownerDocumentCounts.set(f,h+1),registeredResizeHandlers.add(u),updateListeners(),function(){var m;panelConstraintFlags.delete(r),registeredResizeHandlers.delete(u);const w=(m=ownerDocumentCounts.get(f))!==null&&m!==void 0?m:1;if(ownerDocumentCounts.set(f,w-1),updateListeners(),w===1&&ownerDocumentCounts.delete(f),intersectingHandles.includes(u)){const A=intersectingHandles.indexOf(u);A>=0&&intersectingHandles.splice(A,1),updateCursor(),s("up",!0,null)}}}function handlePointerDown$1(r){const{target:e}=r,{x:t,y:a}=getResizeEventCoordinates(r);isPointerDown=!0,recalculateIntersectingHandles({target:e,x:t,y:a}),updateListeners(),intersectingHandles.length>0&&(updateResizeHandlerStates("down",r),updateCursor(),r.preventDefault(),isWithinResizeHandle(e)||r.stopImmediatePropagation())}function handlePointerMove(r){const{x:e,y:t}=getResizeEventCoordinates(r);if(isPointerDown&&r.type!=="pointerleave"&&r.buttons===0&&(isPointerDown=!1,updateResizeHandlerStates("up",r)),!isPointerDown){const{target:a}=r;recalculateIntersectingHandles({target:a,x:e,y:t})}updateResizeHandlerStates("move",r),updateCursor(),intersectingHandles.length>0&&r.preventDefault()}function handlePointerUp(r){const{target:e}=r,{x:t,y:a}=getResizeEventCoordinates(r);panelConstraintFlags.clear(),isPointerDown=!1,intersectingHandles.length>0&&(r.preventDefault(),isWithinResizeHandle(e)||r.stopImmediatePropagation()),updateResizeHandlerStates("up",r),recalculateIntersectingHandles({target:e,x:t,y:a}),updateCursor(),updateListeners()}function isWithinResizeHandle(r){let e=r;for(;e;){if(e.hasAttribute(DATA_ATTRIBUTES.resizeHandle))return!0;e=e.parentElement}return!1}function recalculateIntersectingHandles({target:r,x:e,y:t}){intersectingHandles.splice(0);let a=null;(r instanceof HTMLElement||r instanceof SVGElement)&&(a=r),registeredResizeHandlers.forEach(s=>{const{element:o,hitAreaMargins:f}=s,u=o.getBoundingClientRect(),{bottom:h,left:x,right:m,top:w}=u,A=isCoarsePointer?f.coarse:f.fine;if(e>=x-A&&e<=m+A&&t>=w-A&&t<=h+A){if(a!==null&&document.contains(a)&&o!==a&&!o.contains(a)&&!a.contains(o)&&compare(a,o)>0){let I=a,y=!1;for(;I&&!I.contains(o);){if(intersects(I.getBoundingClientRect(),u)){y=!0;break}I=I.parentElement}if(y)return}intersectingHandles.push(s)}})}function reportConstraintsViolation(r,e){panelConstraintFlags.set(r,e)}function updateCursor(){let r=!1,e=!1;intersectingHandles.forEach(a=>{const{direction:s}=a;s==="horizontal"?r=!0:e=!0});let t=0;panelConstraintFlags.forEach(a=>{t|=a}),r&&e?setGlobalCursorStyle("intersection",t):r?setGlobalCursorStyle("horizontal",t):e?setGlobalCursorStyle("vertical",t):resetGlobalCursorStyle()}let listenersAbortController;function updateListeners(){var r;(r=listenersAbortController)===null||r===void 0||r.abort(),listenersAbortController=new AbortController;const e={capture:!0,signal:listenersAbortController.signal};registeredResizeHandlers.size&&(isPointerDown?(intersectingHandles.length>0&&ownerDocumentCounts.forEach((t,a)=>{const{body:s}=a;t>0&&(s.addEventListener("contextmenu",handlePointerUp,e),s.addEventListener("pointerleave",handlePointerMove,e),s.addEventListener("pointermove",handlePointerMove,e))}),ownerDocumentCounts.forEach((t,a)=>{const{body:s}=a;s.addEventListener("pointerup",handlePointerUp,e),s.addEventListener("pointercancel",handlePointerUp,e)})):ownerDocumentCounts.forEach((t,a)=>{const{body:s}=a;t>0&&(s.addEventListener("pointerdown",handlePointerDown$1,e),s.addEventListener("pointermove",handlePointerMove,e))}))}function updateResizeHandlerStates(r,e){registeredResizeHandlers.forEach(t=>{const{setResizeHandlerState:a}=t,s=intersectingHandles.includes(t);a(r,s,e)})}function useForceUpdate(){const[r,e]=reactExports.useState(0);return reactExports.useCallback(()=>e(t=>t+1),[])}function assert(r,e){if(!r)throw console.error(e),Error(e)}function fuzzyCompareNumbers(r,e,t=PRECISION){return r.toFixed(t)===e.toFixed(t)?0:r>e?1:-1}function fuzzyNumbersEqual$1(r,e,t=PRECISION){return fuzzyCompareNumbers(r,e,t)===0}function fuzzyNumbersEqual(r,e,t){return fuzzyCompareNumbers(r,e,t)===0}function fuzzyLayoutsEqual(r,e,t){if(r.length!==e.length)return!1;for(let a=0;a<r.length;a++){const s=r[a],o=e[a];if(!fuzzyNumbersEqual(s,o,t))return!1}return!0}function resizePanel({panelConstraints:r,panelIndex:e,size:t}){const a=r[e];assert(a!=null,`Panel constraints not found for index ${e}`);let{collapsedSize:s=0,collapsible:o,maxSize:f=100,minSize:u=0}=a;if(fuzzyCompareNumbers(t,u)<0)if(o){const h=(s+u)/2;fuzzyCompareNumbers(t,h)<0?t=s:t=u}else t=u;return t=Math.min(f,t),t=parseFloat(t.toFixed(PRECISION)),t}function adjustLayoutByDelta({delta:r,initialLayout:e,panelConstraints:t,pivotIndices:a,prevLayout:s,trigger:o}){if(fuzzyNumbersEqual(r,0))return e;const f=[...e],[u,h]=a;assert(u!=null,"Invalid first pivot index"),assert(h!=null,"Invalid second pivot index");let x=0;if(o==="keyboard"){{const w=r<0?h:u,A=t[w];assert(A,`Panel constraints not found for index ${w}`);const{collapsedSize:D=0,collapsible:I,minSize:y=0}=A;if(I){const l=e[w];if(assert(l!=null,`Previous layout not found for panel index ${w}`),fuzzyNumbersEqual(l,D)){const c=y-l;fuzzyCompareNumbers(c,Math.abs(r))>0&&(r=r<0?0-c:c)}}}{const w=r<0?u:h,A=t[w];assert(A,`No panel constraints found for index ${w}`);const{collapsedSize:D=0,collapsible:I,minSize:y=0}=A;if(I){const l=e[w];if(assert(l!=null,`Previous layout not found for panel index ${w}`),fuzzyNumbersEqual(l,y)){const c=l-D;fuzzyCompareNumbers(c,Math.abs(r))>0&&(r=r<0?0-c:c)}}}}{const w=r<0?1:-1;let A=r<0?h:u,D=0;for(;;){const y=e[A];assert(y!=null,`Previous layout not found for panel index ${A}`);const c=resizePanel({panelConstraints:t,panelIndex:A,size:100})-y;if(D+=c,A+=w,A<0||A>=t.length)break}const I=Math.min(Math.abs(r),Math.abs(D));r=r<0?0-I:I}{let A=r<0?u:h;for(;A>=0&&A<t.length;){const D=Math.abs(r)-Math.abs(x),I=e[A];assert(I!=null,`Previous layout not found for panel index ${A}`);const y=I-D,l=resizePanel({panelConstraints:t,panelIndex:A,size:y});if(!fuzzyNumbersEqual(I,l)&&(x+=I-l,f[A]=l,x.toFixed(3).localeCompare(Math.abs(r).toFixed(3),void 0,{numeric:!0})>=0))break;r<0?A--:A++}}if(fuzzyLayoutsEqual(s,f))return s;{const w=r<0?h:u,A=e[w];assert(A!=null,`Previous layout not found for panel index ${w}`);const D=A+x,I=resizePanel({panelConstraints:t,panelIndex:w,size:D});if(f[w]=I,!fuzzyNumbersEqual(I,D)){let y=D-I,c=r<0?h:u;for(;c>=0&&c<t.length;){const L=f[c];assert(L!=null,`Previous layout not found for panel index ${c}`);const R=L+y,F=resizePanel({panelConstraints:t,panelIndex:c,size:R});if(fuzzyNumbersEqual(L,F)||(y-=F-L,f[c]=F),fuzzyNumbersEqual(y,0))break;r>0?c--:c++}}}const m=f.reduce((w,A)=>A+w,0);return fuzzyNumbersEqual(m,100)?f:s}function calculateAriaValues({layout:r,panelsArray:e,pivotIndices:t}){let a=0,s=100,o=0,f=0;const u=t[0];assert(u!=null,"No pivot index found"),e.forEach((w,A)=>{const{constraints:D}=w,{maxSize:I=100,minSize:y=0}=D;A===u?(a=y,s=I):(o+=y,f+=I)});const h=Math.min(s,100-o),x=Math.max(a,100-f),m=r[u];return{valueMax:h,valueMin:x,valueNow:m}}function getResizeHandleElementsForGroup(r,e=document){return Array.from(e.querySelectorAll(`[${DATA_ATTRIBUTES.resizeHandleId}][data-panel-group-id="${r}"]`))}function getResizeHandleElementIndex(r,e,t=document){const s=getResizeHandleElementsForGroup(r,t).findIndex(o=>o.getAttribute(DATA_ATTRIBUTES.resizeHandleId)===e);return s??null}function determinePivotIndices(r,e,t){const a=getResizeHandleElementIndex(r,e,t);return a!=null?[a,a+1]:[-1,-1]}function isHTMLElement(r){return r instanceof HTMLElement?!0:typeof r=="object"&&r!==null&&"tagName"in r&&"getAttribute"in r}function getPanelGroupElement(r,e=document){if(isHTMLElement(e)&&e.dataset.panelGroupId==r)return e;const t=e.querySelector(`[data-panel-group][data-panel-group-id="${r}"]`);return t||null}function getResizeHandleElement(r,e=document){const t=e.querySelector(`[${DATA_ATTRIBUTES.resizeHandleId}="${r}"]`);return t||null}function getResizeHandlePanelIds(r,e,t,a=document){var s,o,f,u;const h=getResizeHandleElement(e,a),x=getResizeHandleElementsForGroup(r,a),m=h?x.indexOf(h):-1,w=(s=(o=t[m])===null||o===void 0?void 0:o.id)!==null&&s!==void 0?s:null,A=(f=(u=t[m+1])===null||u===void 0?void 0:u.id)!==null&&f!==void 0?f:null;return[w,A]}function useWindowSplitterPanelGroupBehavior({committedValuesRef:r,eagerValuesRef:e,groupId:t,layout:a,panelDataArray:s,panelGroupElement:o,setLayout:f}){reactExports.useRef({didWarnAboutMissingResizeHandle:!1}),useIsomorphicLayoutEffect(()=>{if(!o)return;const u=getResizeHandleElementsForGroup(t,o);for(let h=0;h<s.length-1;h++){const{valueMax:x,valueMin:m,valueNow:w}=calculateAriaValues({layout:a,panelsArray:s,pivotIndices:[h,h+1]}),A=u[h];if(A!=null){const D=s[h];assert(D,`No panel data found for index "${h}"`),A.setAttribute("aria-controls",D.id),A.setAttribute("aria-valuemax",""+Math.round(x)),A.setAttribute("aria-valuemin",""+Math.round(m)),A.setAttribute("aria-valuenow",w!=null?""+Math.round(w):"")}}return()=>{u.forEach((h,x)=>{h.removeAttribute("aria-controls"),h.removeAttribute("aria-valuemax"),h.removeAttribute("aria-valuemin"),h.removeAttribute("aria-valuenow")})}},[t,a,s,o]),reactExports.useEffect(()=>{if(!o)return;const u=e.current;assert(u,"Eager values not found");const{panelDataArray:h}=u,x=getPanelGroupElement(t,o);assert(x!=null,`No group found for id "${t}"`);const m=getResizeHandleElementsForGroup(t,o);assert(m,`No resize handles found for group id "${t}"`);const w=m.map(A=>{const D=A.getAttribute(DATA_ATTRIBUTES.resizeHandleId);assert(D,"Resize handle element has no handle id attribute");const[I,y]=getResizeHandlePanelIds(t,D,h,o);if(I==null||y==null)return()=>{};const l=c=>{if(!c.defaultPrevented)switch(c.key){case"Enter":{c.preventDefault();const L=h.findIndex(R=>R.id===I);if(L>=0){const R=h[L];assert(R,`No panel data found for index ${L}`);const F=a[L],{collapsedSize:$=0,collapsible:b,minSize:k=0}=R.constraints;if(F!=null&&b){const B=adjustLayoutByDelta({delta:fuzzyNumbersEqual(F,$)?k-$:$-F,initialLayout:a,panelConstraints:h.map(J=>J.constraints),pivotIndices:determinePivotIndices(t,D,o),prevLayout:a,trigger:"keyboard"});a!==B&&f(B)}}break}}};return A.addEventListener("keydown",l),()=>{A.removeEventListener("keydown",l)}});return()=>{w.forEach(A=>A())}},[o,r,e,t,a,s,f])}function areEqual$1(r,e){if(r.length!==e.length)return!1;for(let t=0;t<r.length;t++)if(r[t]!==e[t])return!1;return!0}function getResizeEventCursorPosition(r,e){const t=r==="horizontal",{x:a,y:s}=getResizeEventCoordinates(e);return t?a:s}function calculateDragOffsetPercentage(r,e,t,a,s){const o=t==="horizontal",f=getResizeHandleElement(e,s);assert(f,`No resize handle element found for id "${e}"`);const u=f.getAttribute(DATA_ATTRIBUTES.groupId);assert(u,"Resize handle element has no group id attribute");let{initialCursorPosition:h}=a;const x=getResizeEventCursorPosition(t,r),m=getPanelGroupElement(u,s);assert(m,`No group element found for id "${u}"`);const w=m.getBoundingClientRect(),A=o?w.width:w.height;return(x-h)/A*100}function calculateDeltaPercentage(r,e,t,a,s,o){if(isKeyDown(r)){const f=t==="horizontal";let u=0;r.shiftKey?u=100:s!=null?u=s:u=10;let h=0;switch(r.key){case"ArrowDown":h=f?0:u;break;case"ArrowLeft":h=f?-u:0;break;case"ArrowRight":h=f?u:0;break;case"ArrowUp":h=f?0:-u;break;case"End":h=100;break;case"Home":h=-100;break}return h}else return a==null?0:calculateDragOffsetPercentage(r,e,t,a,o)}function calculateUnsafeDefaultLayout({panelDataArray:r}){const e=Array(r.length),t=r.map(o=>o.constraints);let a=0,s=100;for(let o=0;o<r.length;o++){const f=t[o];assert(f,`Panel constraints not found for index ${o}`);const{defaultSize:u}=f;u!=null&&(a++,e[o]=u,s-=u)}for(let o=0;o<r.length;o++){const f=t[o];assert(f,`Panel constraints not found for index ${o}`);const{defaultSize:u}=f;if(u!=null)continue;const h=r.length-a,x=s/h;a++,e[o]=x,s-=x}return e}function callPanelCallbacks(r,e,t){e.forEach((a,s)=>{const o=r[s];assert(o,`Panel data not found for index ${s}`);const{callbacks:f,constraints:u,id:h}=o,{collapsedSize:x=0,collapsible:m}=u,w=t[h];if(w==null||a!==w){t[h]=a;const{onCollapse:A,onExpand:D,onResize:I}=f;I&&I(a,w),m&&(A||D)&&(D&&(w==null||fuzzyNumbersEqual$1(w,x))&&!fuzzyNumbersEqual$1(a,x)&&D(),A&&(w==null||!fuzzyNumbersEqual$1(w,x))&&fuzzyNumbersEqual$1(a,x)&&A())}})}function compareLayouts(r,e){if(r.length!==e.length)return!1;for(let t=0;t<r.length;t++)if(r[t]!=e[t])return!1;return!0}function computePanelFlexBoxStyle({defaultSize:r,dragState:e,layout:t,panelData:a,panelIndex:s,precision:o=3}){const f=t[s];let u;return f==null?u=r!=null?r.toFixed(o):"1":a.length===1?u="1":u=f.toFixed(o),{flexBasis:0,flexGrow:u,flexShrink:1,overflow:"hidden",pointerEvents:e!==null?"none":void 0}}function debounce(r,e=10){let t=null;return(...s)=>{t!==null&&clearTimeout(t),t=setTimeout(()=>{r(...s)},e)}}function initializeDefaultStorage(r){try{if(typeof localStorage<"u")r.getItem=e=>localStorage.getItem(e),r.setItem=(e,t)=>{localStorage.setItem(e,t)};else throw new Error("localStorage not supported in this environment")}catch(e){console.error(e),r.getItem=()=>null,r.setItem=()=>{}}}function getPanelGroupKey(r){return`react-resizable-panels:${r}`}function getPanelKey(r){return r.map(e=>{const{constraints:t,id:a,idIsFromProps:s,order:o}=e;return s?a:o?`${o}:${JSON.stringify(t)}`:JSON.stringify(t)}).sort((e,t)=>e.localeCompare(t)).join(",")}function loadSerializedPanelGroupState(r,e){try{const t=getPanelGroupKey(r),a=e.getItem(t);if(a){const s=JSON.parse(a);if(typeof s=="object"&&s!=null)return s}}catch{}return null}function loadPanelGroupState(r,e,t){var a,s;const o=(a=loadSerializedPanelGroupState(r,t))!==null&&a!==void 0?a:{},f=getPanelKey(e);return(s=o[f])!==null&&s!==void 0?s:null}function savePanelGroupState(r,e,t,a,s){var o;const f=getPanelGroupKey(r),u=getPanelKey(e),h=(o=loadSerializedPanelGroupState(r,s))!==null&&o!==void 0?o:{};h[u]={expandToSizes:Object.fromEntries(t.entries()),layout:a};try{s.setItem(f,JSON.stringify(h))}catch(x){console.error(x)}}function validatePanelGroupLayout({layout:r,panelConstraints:e}){const t=[...r],a=t.reduce((o,f)=>o+f,0);if(t.length!==e.length)throw Error(`Invalid ${e.length} panel layout: ${t.map(o=>`${o}%`).join(", ")}`);if(!fuzzyNumbersEqual(a,100)&&t.length>0)for(let o=0;o<e.length;o++){const f=t[o];assert(f!=null,`No layout data found for index ${o}`);const u=100/a*f;t[o]=u}let s=0;for(let o=0;o<e.length;o++){const f=t[o];assert(f!=null,`No layout data found for index ${o}`);const u=resizePanel({panelConstraints:e,panelIndex:o,size:f});f!=u&&(s+=f-u,t[o]=u)}if(!fuzzyNumbersEqual(s,0))for(let o=0;o<e.length;o++){const f=t[o];assert(f!=null,`No layout data found for index ${o}`);const u=f+s,h=resizePanel({panelConstraints:e,panelIndex:o,size:u});if(f!==h&&(s-=h-f,t[o]=h,fuzzyNumbersEqual(s,0)))break}return t}const LOCAL_STORAGE_DEBOUNCE_INTERVAL=100,defaultStorage={getItem:r=>(initializeDefaultStorage(defaultStorage),defaultStorage.getItem(r)),setItem:(r,e)=>{initializeDefaultStorage(defaultStorage),defaultStorage.setItem(r,e)}},debounceMap={};function PanelGroupWithForwardedRef({autoSaveId:r=null,children:e,className:t="",direction:a,forwardedRef:s,id:o=null,onLayout:f=null,keyboardResizeBy:u=null,storage:h=defaultStorage,style:x,tagName:m="div",...w}){const A=useUniqueId(o),D=reactExports.useRef(null),[I,y]=reactExports.useState(null),[l,c]=reactExports.useState([]),L=useForceUpdate(),R=reactExports.useRef({}),F=reactExports.useRef(new Map),$=reactExports.useRef(0),b=reactExports.useRef({autoSaveId:r,direction:a,dragState:I,id:A,keyboardResizeBy:u,onLayout:f,storage:h}),k=reactExports.useRef({layout:l,panelDataArray:[],panelDataArrayChanged:!1});reactExports.useRef({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),reactExports.useImperativeHandle(s,()=>({getId:()=>b.current.id,getLayout:()=>{const{layout:_s}=k.current;return _s},setLayout:_s=>{const{onLayout:Ei}=b.current,{layout:Bl,panelDataArray:Wl}=k.current,Ep=validatePanelGroupLayout({layout:_s,panelConstraints:Wl.map(Lp=>Lp.constraints)});areEqual$1(Bl,Ep)||(c(Ep),k.current.layout=Ep,Ei&&Ei(Ep),callPanelCallbacks(Wl,Ep,R.current))}}),[]),useIsomorphicLayoutEffect(()=>{b.current.autoSaveId=r,b.current.direction=a,b.current.dragState=I,b.current.id=A,b.current.onLayout=f,b.current.storage=h}),useWindowSplitterPanelGroupBehavior({committedValuesRef:b,eagerValuesRef:k,groupId:A,layout:l,panelDataArray:k.current.panelDataArray,setLayout:c,panelGroupElement:D.current}),reactExports.useEffect(()=>{const{panelDataArray:_s}=k.current;if(r){if(l.length===0||l.length!==_s.length)return;let Ei=debounceMap[r];Ei==null&&(Ei=debounce(savePanelGroupState,LOCAL_STORAGE_DEBOUNCE_INTERVAL),debounceMap[r]=Ei);const Bl=[..._s],Wl=new Map(F.current);Ei(r,Bl,Wl,l,h)}},[r,l,h]),reactExports.useEffect(()=>{});const B=reactExports.useCallback(_s=>{const{onLayout:Ei}=b.current,{layout:Bl,panelDataArray:Wl}=k.current;if(_s.constraints.collapsible){const Ep=Wl.map(N0=>N0.constraints),{collapsedSize:Lp=0,panelSize:Op,pivotIndices:R0}=panelDataHelper(Wl,_s,Bl);if(assert(Op!=null,`Panel size not found for panel "${_s.id}"`),!fuzzyNumbersEqual$1(Op,Lp)){F.current.set(_s.id,Op);const Qp=findPanelDataIndex(Wl,_s)===Wl.length-1?Op-Lp:Lp-Op,O0=adjustLayoutByDelta({delta:Qp,initialLayout:Bl,panelConstraints:Ep,pivotIndices:R0,prevLayout:Bl,trigger:"imperative-api"});compareLayouts(Bl,O0)||(c(O0),k.current.layout=O0,Ei&&Ei(O0),callPanelCallbacks(Wl,O0,R.current))}}},[]),J=reactExports.useCallback((_s,Ei)=>{const{onLayout:Bl}=b.current,{layout:Wl,panelDataArray:Ep}=k.current;if(_s.constraints.collapsible){const Lp=Ep.map(zp=>zp.constraints),{collapsedSize:Op=0,panelSize:R0=0,minSize:N0=0,pivotIndices:Qp}=panelDataHelper(Ep,_s,Wl),O0=Ei??N0;if(fuzzyNumbersEqual$1(R0,Op)){const zp=F.current.get(_s.id),M0=zp!=null&&zp>=O0?zp:O0,im=findPanelDataIndex(Ep,_s)===Ep.length-1?R0-M0:M0-R0,F0=adjustLayoutByDelta({delta:im,initialLayout:Wl,panelConstraints:Lp,pivotIndices:Qp,prevLayout:Wl,trigger:"imperative-api"});compareLayouts(Wl,F0)||(c(F0),k.current.layout=F0,Bl&&Bl(F0),callPanelCallbacks(Ep,F0,R.current))}}},[]),X=reactExports.useCallback(_s=>{const{layout:Ei,panelDataArray:Bl}=k.current,{panelSize:Wl}=panelDataHelper(Bl,_s,Ei);return assert(Wl!=null,`Panel size not found for panel "${_s.id}"`),Wl},[]),ae=reactExports.useCallback((_s,Ei)=>{const{panelDataArray:Bl}=k.current,Wl=findPanelDataIndex(Bl,_s);return computePanelFlexBoxStyle({defaultSize:Ei,dragState:I,layout:l,panelData:Bl,panelIndex:Wl})},[I,l]),He=reactExports.useCallback(_s=>{const{layout:Ei,panelDataArray:Bl}=k.current,{collapsedSize:Wl=0,collapsible:Ep,panelSize:Lp}=panelDataHelper(Bl,_s,Ei);return assert(Lp!=null,`Panel size not found for panel "${_s.id}"`),Ep===!0&&fuzzyNumbersEqual$1(Lp,Wl)},[]),Pe=reactExports.useCallback(_s=>{const{layout:Ei,panelDataArray:Bl}=k.current,{collapsedSize:Wl=0,collapsible:Ep,panelSize:Lp}=panelDataHelper(Bl,_s,Ei);return assert(Lp!=null,`Panel size not found for panel "${_s.id}"`),!Ep||fuzzyCompareNumbers(Lp,Wl)>0},[]),ue=reactExports.useCallback(_s=>{const{panelDataArray:Ei}=k.current;Ei.push(_s),Ei.sort((Bl,Wl)=>{const Ep=Bl.order,Lp=Wl.order;return Ep==null&&Lp==null?0:Ep==null?-1:Lp==null?1:Ep-Lp}),k.current.panelDataArrayChanged=!0,L()},[L]);useIsomorphicLayoutEffect(()=>{if(k.current.panelDataArrayChanged){k.current.panelDataArrayChanged=!1;const{autoSaveId:_s,onLayout:Ei,storage:Bl}=b.current,{layout:Wl,panelDataArray:Ep}=k.current;let Lp=null;if(_s){const R0=loadPanelGroupState(_s,Ep,Bl);R0&&(F.current=new Map(Object.entries(R0.expandToSizes)),Lp=R0.layout)}Lp==null&&(Lp=calculateUnsafeDefaultLayout({panelDataArray:Ep}));const Op=validatePanelGroupLayout({layout:Lp,panelConstraints:Ep.map(R0=>R0.constraints)});areEqual$1(Wl,Op)||(c(Op),k.current.layout=Op,Ei&&Ei(Op),callPanelCallbacks(Ep,Op,R.current))}}),useIsomorphicLayoutEffect(()=>{const _s=k.current;return()=>{_s.layout=[]}},[]);const Oe=reactExports.useCallback(_s=>{let Ei=!1;const Bl=D.current;return Bl&&window.getComputedStyle(Bl,null).getPropertyValue("direction")==="rtl"&&(Ei=!0),function(Ep){Ep.preventDefault();const Lp=D.current;if(!Lp)return()=>null;const{direction:Op,dragState:R0,id:N0,keyboardResizeBy:Qp,onLayout:O0}=b.current,{layout:zp,panelDataArray:M0}=k.current,{initialLayout:W0}=R0??{},im=determinePivotIndices(N0,_s,Lp);let F0=calculateDeltaPercentage(Ep,_s,Op,R0,Qp,Lp);const fm=Op==="horizontal";fm&&Ei&&(F0=-F0);const cm=M0.map(p0=>p0.constraints),Ap=adjustLayoutByDelta({delta:F0,initialLayout:W0??zp,panelConstraints:cm,pivotIndices:im,prevLayout:zp,trigger:isKeyDown(Ep)?"keyboard":"mouse-or-touch"}),Io=!compareLayouts(zp,Ap);(isPointerEvent(Ep)||isMouseEvent$1(Ep))&&$.current!=F0&&($.current=F0,!Io&&F0!==0?fm?reportConstraintsViolation(_s,F0<0?EXCEEDED_HORIZONTAL_MIN:EXCEEDED_HORIZONTAL_MAX):reportConstraintsViolation(_s,F0<0?EXCEEDED_VERTICAL_MIN:EXCEEDED_VERTICAL_MAX):reportConstraintsViolation(_s,0)),Io&&(c(Ap),k.current.layout=Ap,O0&&O0(Ap),callPanelCallbacks(M0,Ap,R.current))}},[]),we=reactExports.useCallback((_s,Ei)=>{const{onLayout:Bl}=b.current,{layout:Wl,panelDataArray:Ep}=k.current,Lp=Ep.map(zp=>zp.constraints),{panelSize:Op,pivotIndices:R0}=panelDataHelper(Ep,_s,Wl);assert(Op!=null,`Panel size not found for panel "${_s.id}"`);const Qp=findPanelDataIndex(Ep,_s)===Ep.length-1?Op-Ei:Ei-Op,O0=adjustLayoutByDelta({delta:Qp,initialLayout:Wl,panelConstraints:Lp,pivotIndices:R0,prevLayout:Wl,trigger:"imperative-api"});compareLayouts(Wl,O0)||(c(O0),k.current.layout=O0,Bl&&Bl(O0),callPanelCallbacks(Ep,O0,R.current))},[]),Ze=reactExports.useCallback((_s,Ei)=>{const{layout:Bl,panelDataArray:Wl}=k.current,{collapsedSize:Ep=0,collapsible:Lp}=Ei,{collapsedSize:Op=0,collapsible:R0,maxSize:N0=100,minSize:Qp=0}=_s.constraints,{panelSize:O0}=panelDataHelper(Wl,_s,Bl);O0!=null&&(Lp&&R0&&fuzzyNumbersEqual$1(O0,Ep)?fuzzyNumbersEqual$1(Ep,Op)||we(_s,Op):O0<Qp?we(_s,Qp):O0>N0&&we(_s,N0))},[we]),it=reactExports.useCallback((_s,Ei)=>{const{direction:Bl}=b.current,{layout:Wl}=k.current;if(!D.current)return;const Ep=getResizeHandleElement(_s,D.current);assert(Ep,`Drag handle element not found for id "${_s}"`);const Lp=getResizeEventCursorPosition(Bl,Ei);y({dragHandleId:_s,dragHandleRect:Ep.getBoundingClientRect(),initialCursorPosition:Lp,initialLayout:Wl})},[]),lt=reactExports.useCallback(()=>{y(null)},[]),Vt=reactExports.useCallback(_s=>{const{panelDataArray:Ei}=k.current,Bl=findPanelDataIndex(Ei,_s);Bl>=0&&(Ei.splice(Bl,1),delete R.current[_s.id],k.current.panelDataArrayChanged=!0,L())},[L]),_e=reactExports.useMemo(()=>({collapsePanel:B,direction:a,dragState:I,expandPanel:J,getPanelSize:X,getPanelStyle:ae,groupId:A,isPanelCollapsed:He,isPanelExpanded:Pe,reevaluatePanelConstraints:Ze,registerPanel:ue,registerResizeHandle:Oe,resizePanel:we,startDragging:it,stopDragging:lt,unregisterPanel:Vt,panelGroupElement:D.current}),[B,I,a,J,X,ae,A,He,Pe,Ze,ue,Oe,we,it,lt,Vt]),pr={display:"flex",flexDirection:a==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return reactExports.createElement(PanelGroupContext.Provider,{value:_e},reactExports.createElement(m,{...w,children:e,className:t,id:o,ref:D,style:{...pr,...x},[DATA_ATTRIBUTES.group]:"",[DATA_ATTRIBUTES.groupDirection]:a,[DATA_ATTRIBUTES.groupId]:A}))}const PanelGroup=reactExports.forwardRef((r,e)=>reactExports.createElement(PanelGroupWithForwardedRef,{...r,forwardedRef:e}));PanelGroupWithForwardedRef.displayName="PanelGroup";PanelGroup.displayName="forwardRef(PanelGroup)";function findPanelDataIndex(r,e){return r.findIndex(t=>t===e||t.id===e.id)}function panelDataHelper(r,e,t){const a=findPanelDataIndex(r,e),o=a===r.length-1?[a-1,a]:[a,a+1],f=t[a];return{...e.constraints,panelSize:f,pivotIndices:o}}function useWindowSplitterResizeHandlerBehavior({disabled:r,handleId:e,resizeHandler:t,panelGroupElement:a}){reactExports.useEffect(()=>{if(r||t==null||a==null)return;const s=getResizeHandleElement(e,a);if(s==null)return;const o=f=>{if(!f.defaultPrevented)switch(f.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{f.preventDefault(),t(f);break}case"F6":{f.preventDefault();const u=s.getAttribute(DATA_ATTRIBUTES.groupId);assert(u,`No group element found for id "${u}"`);const h=getResizeHandleElementsForGroup(u,a),x=getResizeHandleElementIndex(u,e,a);assert(x!==null,`No resize element found for id "${e}"`);const m=f.shiftKey?x>0?x-1:h.length-1:x+1<h.length?x+1:0;h[m].focus();break}}};return s.addEventListener("keydown",o),()=>{s.removeEventListener("keydown",o)}},[a,r,e,t])}function PanelResizeHandle({children:r=null,className:e="",disabled:t=!1,hitAreaMargins:a,id:s,onBlur:o,onClick:f,onDragging:u,onFocus:h,onPointerDown:x,onPointerUp:m,style:w={},tabIndex:A=0,tagName:D="div",...I}){var y,l;const c=reactExports.useRef(null),L=reactExports.useRef({onClick:f,onDragging:u,onPointerDown:x,onPointerUp:m});reactExports.useEffect(()=>{L.current.onClick=f,L.current.onDragging=u,L.current.onPointerDown=x,L.current.onPointerUp=m});const R=reactExports.useContext(PanelGroupContext);if(R===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:F,groupId:$,registerResizeHandle:b,startDragging:k,stopDragging:B,panelGroupElement:J}=R,X=useUniqueId(s),[ae,He]=reactExports.useState("inactive"),[Pe,ue]=reactExports.useState(!1),[Oe,we]=reactExports.useState(null),Ze=reactExports.useRef({state:ae});useIsomorphicLayoutEffect(()=>{Ze.current.state=ae}),reactExports.useEffect(()=>{if(t)we(null);else{const _e=b(X);we(()=>_e)}},[t,X,b]);const it=(y=a?.coarse)!==null&&y!==void 0?y:15,lt=(l=a?.fine)!==null&&l!==void 0?l:5;reactExports.useEffect(()=>{if(t||Oe==null)return;const _e=c.current;assert(_e,"Element ref not attached");let pr=!1;return registerResizeHandle(X,_e,F,{coarse:it,fine:lt},(Ei,Bl,Wl)=>{if(!Bl){He("inactive");return}switch(Ei){case"down":{He("drag"),pr=!1,assert(Wl,'Expected event to be defined for "down" action'),k(X,Wl);const{onDragging:Ep,onPointerDown:Lp}=L.current;Ep?.(!0),Lp?.();break}case"move":{const{state:Ep}=Ze.current;pr=!0,Ep!=="drag"&&He("hover"),assert(Wl,'Expected event to be defined for "move" action'),Oe(Wl);break}case"up":{He("hover"),B();const{onClick:Ep,onDragging:Lp,onPointerUp:Op}=L.current;Lp?.(!1),Op?.(),pr||Ep?.();break}}})},[it,F,t,lt,b,X,Oe,k,B]),useWindowSplitterResizeHandlerBehavior({disabled:t,handleId:X,resizeHandler:Oe,panelGroupElement:J});const Vt={touchAction:"none",userSelect:"none"};return reactExports.createElement(D,{...I,children:r,className:e,id:s,onBlur:()=>{ue(!1),o?.()},onFocus:()=>{ue(!0),h?.()},ref:c,role:"separator",style:{...Vt,...w},tabIndex:A,[DATA_ATTRIBUTES.groupDirection]:F,[DATA_ATTRIBUTES.groupId]:$,[DATA_ATTRIBUTES.resizeHandle]:"",[DATA_ATTRIBUTES.resizeHandleActive]:ae==="drag"?"pointer":Pe?"keyboard":void 0,[DATA_ATTRIBUTES.resizeHandleEnabled]:!t,[DATA_ATTRIBUTES.resizeHandleId]:X,[DATA_ATTRIBUTES.resizeHandleState]:ae})}PanelResizeHandle.displayName="PanelResizeHandle";function cc$1(r){if(typeof r=="string"||typeof r=="number")return""+r;let e="";if(Array.isArray(r))for(let t=0,a;t<r.length;t++)(a=cc$1(r[t]))!==""&&(e+=(e&&" ")+a);else for(let t in r)r[t]&&(e+=(e&&" ")+t);return e}var withSelector={exports:{}},withSelector_production={},shim={exports:{}},useSyncExternalStoreShim_production={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredUseSyncExternalStoreShim_production;function requireUseSyncExternalStoreShim_production(){if(hasRequiredUseSyncExternalStoreShim_production)return useSyncExternalStoreShim_production;hasRequiredUseSyncExternalStoreShim_production=1;var r=requireReact();function e(w,A){return w===A&&(w!==0||1/w===1/A)||w!==w&&A!==A}var t=typeof Object.is=="function"?Object.is:e,a=r.useState,s=r.useEffect,o=r.useLayoutEffect,f=r.useDebugValue;function u(w,A){var D=A(),I=a({inst:{value:D,getSnapshot:A}}),y=I[0].inst,l=I[1];return o(function(){y.value=D,y.getSnapshot=A,h(y)&&l({inst:y})},[w,D,A]),s(function(){return h(y)&&l({inst:y}),w(function(){h(y)&&l({inst:y})})},[w]),f(D),D}function h(w){var A=w.getSnapshot;w=w.value;try{var D=A();return!t(w,D)}catch{return!0}}function x(w,A){return A()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?x:u;return useSyncExternalStoreShim_production.useSyncExternalStore=r.useSyncExternalStore!==void 0?r.useSyncExternalStore:m,useSyncExternalStoreShim_production}var hasRequiredShim;function requireShim(){return hasRequiredShim||(hasRequiredShim=1,shim.exports=requireUseSyncExternalStoreShim_production()),shim.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredWithSelector_production;function requireWithSelector_production(){if(hasRequiredWithSelector_production)return withSelector_production;hasRequiredWithSelector_production=1;var r=requireReact(),e=requireShim();function t(x,m){return x===m&&(x!==0||1/x===1/m)||x!==x&&m!==m}var a=typeof Object.is=="function"?Object.is:t,s=e.useSyncExternalStore,o=r.useRef,f=r.useEffect,u=r.useMemo,h=r.useDebugValue;return withSelector_production.useSyncExternalStoreWithSelector=function(x,m,w,A,D){var I=o(null);if(I.current===null){var y={hasValue:!1,value:null};I.current=y}else y=I.current;I=u(function(){function c(b){if(!L){if(L=!0,R=b,b=A(b),D!==void 0&&y.hasValue){var k=y.value;if(D(k,b))return F=k}return F=b}if(k=F,a(R,b))return k;var B=A(b);return D!==void 0&&D(k,B)?(R=b,k):(R=b,F=B)}var L=!1,R,F,$=w===void 0?null:w;return[function(){return c(m())},$===null?void 0:function(){return c($())}]},[m,w,A,D]);var l=s(x,I[0],I[1]);return f(function(){y.hasValue=!0,y.value=l},[l]),h(l),l},withSelector_production}var hasRequiredWithSelector;function requireWithSelector(){return hasRequiredWithSelector||(hasRequiredWithSelector=1,withSelector.exports=requireWithSelector_production()),withSelector.exports}var withSelectorExports=requireWithSelector();const useSyncExternalStoreExports=getDefaultExportFromCjs(withSelectorExports),__vite_import_meta_env__={},createStoreImpl=r=>{let e;const t=new Set,a=(m,w)=>{const A=typeof m=="function"?m(e):m;if(!Object.is(A,e)){const D=e;e=w??(typeof A!="object"||A===null)?A:Object.assign({},e,A),t.forEach(I=>I(e,D))}},s=()=>e,h={setState:a,getState:s,getInitialState:()=>x,subscribe:m=>(t.add(m),()=>t.delete(m)),destroy:()=>{(__vite_import_meta_env__?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),t.clear()}},x=e=r(a,s,h);return h},createStore=r=>r?createStoreImpl(r):createStoreImpl,{useDebugValue}=React,{useSyncExternalStoreWithSelector}=useSyncExternalStoreExports,identity$2=r=>r;function useStoreWithEqualityFn(r,e=identity$2,t){const a=useSyncExternalStoreWithSelector(r.subscribe,r.getState,r.getServerState||r.getInitialState,e,t);return useDebugValue(a),a}const createWithEqualityFnImpl=(r,e)=>{const t=createStore(r),a=(s,o=e)=>useStoreWithEqualityFn(t,s,o);return Object.assign(a,t),a},createWithEqualityFn=(r,e)=>r?createWithEqualityFnImpl(r,e):createWithEqualityFnImpl;function shallow$1(r,e){if(Object.is(r,e))return!0;if(typeof r!="object"||r===null||typeof e!="object"||e===null)return!1;if(r instanceof Map&&e instanceof Map){if(r.size!==e.size)return!1;for(const[a,s]of r)if(!Object.is(s,e.get(a)))return!1;return!0}if(r instanceof Set&&e instanceof Set){if(r.size!==e.size)return!1;for(const a of r)if(!e.has(a))return!1;return!0}const t=Object.keys(r);if(t.length!==Object.keys(e).length)return!1;for(const a of t)if(!Object.prototype.hasOwnProperty.call(e,a)||!Object.is(r[a],e[a]))return!1;return!0}var noop$1={value:()=>{}};function dispatch(){for(var r=0,e=arguments.length,t={},a;r<e;++r){if(!(a=arguments[r]+"")||a in t||/[\s.]/.test(a))throw new Error("illegal type: "+a);t[a]=[]}return new Dispatch(t)}function Dispatch(r){this._=r}function parseTypenames$1(r,e){return r.trim().split(/^|\s+/).map(function(t){var a="",s=t.indexOf(".");if(s>=0&&(a=t.slice(s+1),t=t.slice(0,s)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:a}})}Dispatch.prototype=dispatch.prototype={constructor:Dispatch,on:function(r,e){var t=this._,a=parseTypenames$1(r+"",t),s,o=-1,f=a.length;if(arguments.length<2){for(;++o<f;)if((s=(r=a[o]).type)&&(s=get$1(t[s],r.name)))return s;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<f;)if(s=(r=a[o]).type)t[s]=set$1(t[s],r.name,e);else if(e==null)for(s in t)t[s]=set$1(t[s],r.name,null);return this},copy:function(){var r={},e=this._;for(var t in e)r[t]=e[t].slice();return new Dispatch(r)},call:function(r,e){if((s=arguments.length-2)>0)for(var t=new Array(s),a=0,s,o;a<s;++a)t[a]=arguments[a+2];if(!this._.hasOwnProperty(r))throw new Error("unknown type: "+r);for(o=this._[r],a=0,s=o.length;a<s;++a)o[a].value.apply(e,t)},apply:function(r,e,t){if(!this._.hasOwnProperty(r))throw new Error("unknown type: "+r);for(var a=this._[r],s=0,o=a.length;s<o;++s)a[s].value.apply(e,t)}};function get$1(r,e){for(var t=0,a=r.length,s;t<a;++t)if((s=r[t]).name===e)return s.value}function set$1(r,e,t){for(var a=0,s=r.length;a<s;++a)if(r[a].name===e){r[a]=noop$1,r=r.slice(0,a).concat(r.slice(a+1));break}return t!=null&&r.push({name:e,value:t}),r}var xhtml="http://www.w3.org/1999/xhtml";const namespaces={svg:"http://www.w3.org/2000/svg",xhtml,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function namespace(r){var e=r+="",t=e.indexOf(":");return t>=0&&(e=r.slice(0,t))!=="xmlns"&&(r=r.slice(t+1)),namespaces.hasOwnProperty(e)?{space:namespaces[e],local:r}:r}function creatorInherit(r){return function(){var e=this.ownerDocument,t=this.namespaceURI;return t===xhtml&&e.documentElement.namespaceURI===xhtml?e.createElement(r):e.createElementNS(t,r)}}function creatorFixed(r){return function(){return this.ownerDocument.createElementNS(r.space,r.local)}}function creator(r){var e=namespace(r);return(e.local?creatorFixed:creatorInherit)(e)}function none(){}function selector$h(r){return r==null?none:function(){return this.querySelector(r)}}function selection_select(r){typeof r!="function"&&(r=selector$h(r));for(var e=this._groups,t=e.length,a=new Array(t),s=0;s<t;++s)for(var o=e[s],f=o.length,u=a[s]=new Array(f),h,x,m=0;m<f;++m)(h=o[m])&&(x=r.call(h,h.__data__,m,o))&&("__data__"in h&&(x.__data__=h.__data__),u[m]=x);return new Selection$1(a,this._parents)}function array(r){return r==null?[]:Array.isArray(r)?r:Array.from(r)}function empty(){return[]}function selectorAll(r){return r==null?empty:function(){return this.querySelectorAll(r)}}function arrayAll(r){return function(){return array(r.apply(this,arguments))}}function selection_selectAll(r){typeof r=="function"?r=arrayAll(r):r=selectorAll(r);for(var e=this._groups,t=e.length,a=[],s=[],o=0;o<t;++o)for(var f=e[o],u=f.length,h,x=0;x<u;++x)(h=f[x])&&(a.push(r.call(h,h.__data__,x,f)),s.push(h));return new Selection$1(a,s)}function matcher(r){return function(){return this.matches(r)}}function childMatcher(r){return function(e){return e.matches(r)}}var find=Array.prototype.find;function childFind(r){return function(){return find.call(this.children,r)}}function childFirst(){return this.firstElementChild}function selection_selectChild(r){return this.select(r==null?childFirst:childFind(typeof r=="function"?r:childMatcher(r)))}var filter=Array.prototype.filter;function children(){return Array.from(this.children)}function childrenFilter(r){return function(){return filter.call(this.children,r)}}function selection_selectChildren(r){return this.selectAll(r==null?children:childrenFilter(typeof r=="function"?r:childMatcher(r)))}function selection_filter(r){typeof r!="function"&&(r=matcher(r));for(var e=this._groups,t=e.length,a=new Array(t),s=0;s<t;++s)for(var o=e[s],f=o.length,u=a[s]=[],h,x=0;x<f;++x)(h=o[x])&&r.call(h,h.__data__,x,o)&&u.push(h);return new Selection$1(a,this._parents)}function sparse(r){return new Array(r.length)}function selection_enter(){return new Selection$1(this._enter||this._groups.map(sparse),this._parents)}function EnterNode(r,e){this.ownerDocument=r.ownerDocument,this.namespaceURI=r.namespaceURI,this._next=null,this._parent=r,this.__data__=e}EnterNode.prototype={constructor:EnterNode,appendChild:function(r){return this._parent.insertBefore(r,this._next)},insertBefore:function(r,e){return this._parent.insertBefore(r,e)},querySelector:function(r){return this._parent.querySelector(r)},querySelectorAll:function(r){return this._parent.querySelectorAll(r)}};function constant$3(r){return function(){return r}}function bindIndex(r,e,t,a,s,o){for(var f=0,u,h=e.length,x=o.length;f<x;++f)(u=e[f])?(u.__data__=o[f],a[f]=u):t[f]=new EnterNode(r,o[f]);for(;f<h;++f)(u=e[f])&&(s[f]=u)}function bindKey(r,e,t,a,s,o,f){var u,h,x=new Map,m=e.length,w=o.length,A=new Array(m),D;for(u=0;u<m;++u)(h=e[u])&&(A[u]=D=f.call(h,h.__data__,u,e)+"",x.has(D)?s[u]=h:x.set(D,h));for(u=0;u<w;++u)D=f.call(r,o[u],u,o)+"",(h=x.get(D))?(a[u]=h,h.__data__=o[u],x.delete(D)):t[u]=new EnterNode(r,o[u]);for(u=0;u<m;++u)(h=e[u])&&x.get(A[u])===h&&(s[u]=h)}function datum(r){return r.__data__}function selection_data(r,e){if(!arguments.length)return Array.from(this,datum);var t=e?bindKey:bindIndex,a=this._parents,s=this._groups;typeof r!="function"&&(r=constant$3(r));for(var o=s.length,f=new Array(o),u=new Array(o),h=new Array(o),x=0;x<o;++x){var m=a[x],w=s[x],A=w.length,D=arraylike(r.call(m,m&&m.__data__,x,a)),I=D.length,y=u[x]=new Array(I),l=f[x]=new Array(I),c=h[x]=new Array(A);t(m,w,y,l,c,D,e);for(var L=0,R=0,F,$;L<I;++L)if(F=y[L]){for(L>=R&&(R=L+1);!($=l[R])&&++R<I;);F._next=$||null}}return f=new Selection$1(f,a),f._enter=u,f._exit=h,f}function arraylike(r){return typeof r=="object"&&"length"in r?r:Array.from(r)}function selection_exit(){return new Selection$1(this._exit||this._groups.map(sparse),this._parents)}function selection_join(r,e,t){var a=this.enter(),s=this,o=this.exit();return typeof r=="function"?(a=r(a),a&&(a=a.selection())):a=a.append(r+""),e!=null&&(s=e(s),s&&(s=s.selection())),t==null?o.remove():t(o),a&&s?a.merge(s).order():s}function selection_merge(r){for(var e=r.selection?r.selection():r,t=this._groups,a=e._groups,s=t.length,o=a.length,f=Math.min(s,o),u=new Array(s),h=0;h<f;++h)for(var x=t[h],m=a[h],w=x.length,A=u[h]=new Array(w),D,I=0;I<w;++I)(D=x[I]||m[I])&&(A[I]=D);for(;h<s;++h)u[h]=t[h];return new Selection$1(u,this._parents)}function selection_order(){for(var r=this._groups,e=-1,t=r.length;++e<t;)for(var a=r[e],s=a.length-1,o=a[s],f;--s>=0;)(f=a[s])&&(o&&f.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(f,o),o=f);return this}function selection_sort(r){r||(r=ascending);function e(w,A){return w&&A?r(w.__data__,A.__data__):!w-!A}for(var t=this._groups,a=t.length,s=new Array(a),o=0;o<a;++o){for(var f=t[o],u=f.length,h=s[o]=new Array(u),x,m=0;m<u;++m)(x=f[m])&&(h[m]=x);h.sort(e)}return new Selection$1(s,this._parents).order()}function ascending(r,e){return r<e?-1:r>e?1:r>=e?0:NaN}function selection_call(){var r=arguments[0];return arguments[0]=this,r.apply(null,arguments),this}function selection_nodes(){return Array.from(this)}function selection_node(){for(var r=this._groups,e=0,t=r.length;e<t;++e)for(var a=r[e],s=0,o=a.length;s<o;++s){var f=a[s];if(f)return f}return null}function selection_size(){let r=0;for(const e of this)++r;return r}function selection_empty(){return!this.node()}function selection_each(r){for(var e=this._groups,t=0,a=e.length;t<a;++t)for(var s=e[t],o=0,f=s.length,u;o<f;++o)(u=s[o])&&r.call(u,u.__data__,o,s);return this}function attrRemove$1(r){return function(){this.removeAttribute(r)}}function attrRemoveNS$1(r){return function(){this.removeAttributeNS(r.space,r.local)}}function attrConstant$1(r,e){return function(){this.setAttribute(r,e)}}function attrConstantNS$1(r,e){return function(){this.setAttributeNS(r.space,r.local,e)}}function attrFunction$1(r,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttribute(r):this.setAttribute(r,t)}}function attrFunctionNS$1(r,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttributeNS(r.space,r.local):this.setAttributeNS(r.space,r.local,t)}}function selection_attr(r,e){var t=namespace(r);if(arguments.length<2){var a=this.node();return t.local?a.getAttributeNS(t.space,t.local):a.getAttribute(t)}return this.each((e==null?t.local?attrRemoveNS$1:attrRemove$1:typeof e=="function"?t.local?attrFunctionNS$1:attrFunction$1:t.local?attrConstantNS$1:attrConstant$1)(t,e))}function defaultView(r){return r.ownerDocument&&r.ownerDocument.defaultView||r.document&&r||r.defaultView}function styleRemove$1(r){return function(){this.style.removeProperty(r)}}function styleConstant$1(r,e,t){return function(){this.style.setProperty(r,e,t)}}function styleFunction$1(r,e,t){return function(){var a=e.apply(this,arguments);a==null?this.style.removeProperty(r):this.style.setProperty(r,a,t)}}function selection_style(r,e,t){return arguments.length>1?this.each((e==null?styleRemove$1:typeof e=="function"?styleFunction$1:styleConstant$1)(r,e,t??"")):styleValue(this.node(),r)}function styleValue(r,e){return r.style.getPropertyValue(e)||defaultView(r).getComputedStyle(r,null).getPropertyValue(e)}function propertyRemove(r){return function(){delete this[r]}}function propertyConstant(r,e){return function(){this[r]=e}}function propertyFunction(r,e){return function(){var t=e.apply(this,arguments);t==null?delete this[r]:this[r]=t}}function selection_property(r,e){return arguments.length>1?this.each((e==null?propertyRemove:typeof e=="function"?propertyFunction:propertyConstant)(r,e)):this.node()[r]}function classArray(r){return r.trim().split(/^|\s+/)}function classList(r){return r.classList||new ClassList(r)}function ClassList(r){this._node=r,this._names=classArray(r.getAttribute("class")||"")}ClassList.prototype={add:function(r){var e=this._names.indexOf(r);e<0&&(this._names.push(r),this._node.setAttribute("class",this._names.join(" ")))},remove:function(r){var e=this._names.indexOf(r);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(r){return this._names.indexOf(r)>=0}};function classedAdd(r,e){for(var t=classList(r),a=-1,s=e.length;++a<s;)t.add(e[a])}function classedRemove(r,e){for(var t=classList(r),a=-1,s=e.length;++a<s;)t.remove(e[a])}function classedTrue(r){return function(){classedAdd(this,r)}}function classedFalse(r){return function(){classedRemove(this,r)}}function classedFunction(r,e){return function(){(e.apply(this,arguments)?classedAdd:classedRemove)(this,r)}}function selection_classed(r,e){var t=classArray(r+"");if(arguments.length<2){for(var a=classList(this.node()),s=-1,o=t.length;++s<o;)if(!a.contains(t[s]))return!1;return!0}return this.each((typeof e=="function"?classedFunction:e?classedTrue:classedFalse)(t,e))}function textRemove(){this.textContent=""}function textConstant$1(r){return function(){this.textContent=r}}function textFunction$1(r){return function(){var e=r.apply(this,arguments);this.textContent=e??""}}function selection_text(r){return arguments.length?this.each(r==null?textRemove:(typeof r=="function"?textFunction$1:textConstant$1)(r)):this.node().textContent}function htmlRemove(){this.innerHTML=""}function htmlConstant(r){return function(){this.innerHTML=r}}function htmlFunction(r){return function(){var e=r.apply(this,arguments);this.innerHTML=e??""}}function selection_html(r){return arguments.length?this.each(r==null?htmlRemove:(typeof r=="function"?htmlFunction:htmlConstant)(r)):this.node().innerHTML}function raise(){this.nextSibling&&this.parentNode.appendChild(this)}function selection_raise(){return this.each(raise)}function lower(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function selection_lower(){return this.each(lower)}function selection_append(r){var e=typeof r=="function"?r:creator(r);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function constantNull(){return null}function selection_insert(r,e){var t=typeof r=="function"?r:creator(r),a=e==null?constantNull:typeof e=="function"?e:selector$h(e);return this.select(function(){return this.insertBefore(t.apply(this,arguments),a.apply(this,arguments)||null)})}function remove(){var r=this.parentNode;r&&r.removeChild(this)}function selection_remove(){return this.each(remove)}function selection_cloneShallow(){var r=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(r,this.nextSibling):r}function selection_cloneDeep(){var r=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(r,this.nextSibling):r}function selection_clone(r){return this.select(r?selection_cloneDeep:selection_cloneShallow)}function selection_datum(r){return arguments.length?this.property("__data__",r):this.node().__data__}function contextListener(r){return function(e){r.call(this,e,this.__data__)}}function parseTypenames(r){return r.trim().split(/^|\s+/).map(function(e){var t="",a=e.indexOf(".");return a>=0&&(t=e.slice(a+1),e=e.slice(0,a)),{type:e,name:t}})}function onRemove(r){return function(){var e=this.__on;if(e){for(var t=0,a=-1,s=e.length,o;t<s;++t)o=e[t],(!r.type||o.type===r.type)&&o.name===r.name?this.removeEventListener(o.type,o.listener,o.options):e[++a]=o;++a?e.length=a:delete this.__on}}}function onAdd(r,e,t){return function(){var a=this.__on,s,o=contextListener(e);if(a){for(var f=0,u=a.length;f<u;++f)if((s=a[f]).type===r.type&&s.name===r.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=o,s.options=t),s.value=e;return}}this.addEventListener(r.type,o,t),s={type:r.type,name:r.name,value:e,listener:o,options:t},a?a.push(s):this.__on=[s]}}function selection_on(r,e,t){var a=parseTypenames(r+""),s,o=a.length,f;if(arguments.length<2){var u=this.node().__on;if(u){for(var h=0,x=u.length,m;h<x;++h)for(s=0,m=u[h];s<o;++s)if((f=a[s]).type===m.type&&f.name===m.name)return m.value}return}for(u=e?onAdd:onRemove,s=0;s<o;++s)this.each(u(a[s],e,t));return this}function dispatchEvent(r,e,t){var a=defaultView(r),s=a.CustomEvent;typeof s=="function"?s=new s(e,t):(s=a.document.createEvent("Event"),t?(s.initEvent(e,t.bubbles,t.cancelable),s.detail=t.detail):s.initEvent(e,!1,!1)),r.dispatchEvent(s)}function dispatchConstant(r,e){return function(){return dispatchEvent(this,r,e)}}function dispatchFunction(r,e){return function(){return dispatchEvent(this,r,e.apply(this,arguments))}}function selection_dispatch(r,e){return this.each((typeof e=="function"?dispatchFunction:dispatchConstant)(r,e))}function*selection_iterator(){for(var r=this._groups,e=0,t=r.length;e<t;++e)for(var a=r[e],s=0,o=a.length,f;s<o;++s)(f=a[s])&&(yield f)}var root=[null];function Selection$1(r,e){this._groups=r,this._parents=e}function selection(){return new Selection$1([[document.documentElement]],root)}function selection_selection(){return this}Selection$1.prototype=selection.prototype={constructor:Selection$1,select:selection_select,selectAll:selection_selectAll,selectChild:selection_selectChild,selectChildren:selection_selectChildren,filter:selection_filter,data:selection_data,enter:selection_enter,exit:selection_exit,join:selection_join,merge:selection_merge,selection:selection_selection,order:selection_order,sort:selection_sort,call:selection_call,nodes:selection_nodes,node:selection_node,size:selection_size,empty:selection_empty,each:selection_each,attr:selection_attr,style:selection_style,property:selection_property,classed:selection_classed,text:selection_text,html:selection_html,raise:selection_raise,lower:selection_lower,append:selection_append,insert:selection_insert,remove:selection_remove,clone:selection_clone,datum:selection_datum,on:selection_on,dispatch:selection_dispatch,[Symbol.iterator]:selection_iterator};function select(r){return typeof r=="string"?new Selection$1([[document.querySelector(r)]],[document.documentElement]):new Selection$1([[r]],root)}function sourceEvent(r){let e;for(;e=r.sourceEvent;)r=e;return r}function pointer(r,e){if(r=sourceEvent(r),e===void 0&&(e=r.currentTarget),e){var t=e.ownerSVGElement||e;if(t.createSVGPoint){var a=t.createSVGPoint();return a.x=r.clientX,a.y=r.clientY,a=a.matrixTransform(e.getScreenCTM().inverse()),[a.x,a.y]}if(e.getBoundingClientRect){var s=e.getBoundingClientRect();return[r.clientX-s.left-e.clientLeft,r.clientY-s.top-e.clientTop]}}return[r.pageX,r.pageY]}const nonpassive={passive:!1},nonpassivecapture={capture:!0,passive:!1};function nopropagation$1(r){r.stopImmediatePropagation()}function noevent$1(r){r.preventDefault(),r.stopImmediatePropagation()}function dragDisable(r){var e=r.document.documentElement,t=select(r).on("dragstart.drag",noevent$1,nonpassivecapture);"onselectstart"in e?t.on("selectstart.drag",noevent$1,nonpassivecapture):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function yesdrag(r,e){var t=r.document.documentElement,a=select(r).on("dragstart.drag",null);e&&(a.on("click.drag",noevent$1,nonpassivecapture),setTimeout(function(){a.on("click.drag",null)},0)),"onselectstart"in t?a.on("selectstart.drag",null):(t.style.MozUserSelect=t.__noselect,delete t.__noselect)}const constant$2=r=>()=>r;function DragEvent(r,{sourceEvent:e,subject:t,target:a,identifier:s,active:o,x:f,y:u,dx:h,dy:x,dispatch:m}){Object.defineProperties(this,{type:{value:r,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:t,enumerable:!0,configurable:!0},target:{value:a,enumerable:!0,configurable:!0},identifier:{value:s,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:f,enumerable:!0,configurable:!0},y:{value:u,enumerable:!0,configurable:!0},dx:{value:h,enumerable:!0,configurable:!0},dy:{value:x,enumerable:!0,configurable:!0},_:{value:m}})}DragEvent.prototype.on=function(){var r=this._.on.apply(this._,arguments);return r===this._?this:r};function defaultFilter$1(r){return!r.ctrlKey&&!r.button}function defaultContainer(){return this.parentNode}function defaultSubject(r,e){return e??{x:r.x,y:r.y}}function defaultTouchable$1(){return navigator.maxTouchPoints||"ontouchstart"in this}function drag(){var r=defaultFilter$1,e=defaultContainer,t=defaultSubject,a=defaultTouchable$1,s={},o=dispatch("start","drag","end"),f=0,u,h,x,m,w=0;function A(F){F.on("mousedown.drag",D).filter(a).on("touchstart.drag",l).on("touchmove.drag",c,nonpassive).on("touchend.drag touchcancel.drag",L).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function D(F,$){if(!(m||!r.call(this,F,$))){var b=R(this,e.call(this,F,$),F,$,"mouse");b&&(select(F.view).on("mousemove.drag",I,nonpassivecapture).on("mouseup.drag",y,nonpassivecapture),dragDisable(F.view),nopropagation$1(F),x=!1,u=F.clientX,h=F.clientY,b("start",F))}}function I(F){if(noevent$1(F),!x){var $=F.clientX-u,b=F.clientY-h;x=$*$+b*b>w}s.mouse("drag",F)}function y(F){select(F.view).on("mousemove.drag mouseup.drag",null),yesdrag(F.view,x),noevent$1(F),s.mouse("end",F)}function l(F,$){if(r.call(this,F,$)){var b=F.changedTouches,k=e.call(this,F,$),B=b.length,J,X;for(J=0;J<B;++J)(X=R(this,k,F,$,b[J].identifier,b[J]))&&(nopropagation$1(F),X("start",F,b[J]))}}function c(F){var $=F.changedTouches,b=$.length,k,B;for(k=0;k<b;++k)(B=s[$[k].identifier])&&(noevent$1(F),B("drag",F,$[k]))}function L(F){var $=F.changedTouches,b=$.length,k,B;for(m&&clearTimeout(m),m=setTimeout(function(){m=null},500),k=0;k<b;++k)(B=s[$[k].identifier])&&(nopropagation$1(F),B("end",F,$[k]))}function R(F,$,b,k,B,J){var X=o.copy(),ae=pointer(J||b,$),He,Pe,ue;if((ue=t.call(F,new DragEvent("beforestart",{sourceEvent:b,target:A,identifier:B,active:f,x:ae[0],y:ae[1],dx:0,dy:0,dispatch:X}),k))!=null)return He=ue.x-ae[0]||0,Pe=ue.y-ae[1]||0,function Oe(we,Ze,it){var lt=ae,Vt;switch(we){case"start":s[B]=Oe,Vt=f++;break;case"end":delete s[B],--f;case"drag":ae=pointer(it||Ze,$),Vt=f;break}X.call(we,F,new DragEvent(we,{sourceEvent:Ze,subject:ue,target:A,identifier:B,active:Vt,x:ae[0]+He,y:ae[1]+Pe,dx:ae[0]-lt[0],dy:ae[1]-lt[1],dispatch:X}),k)}}return A.filter=function(F){return arguments.length?(r=typeof F=="function"?F:constant$2(!!F),A):r},A.container=function(F){return arguments.length?(e=typeof F=="function"?F:constant$2(F),A):e},A.subject=function(F){return arguments.length?(t=typeof F=="function"?F:constant$2(F),A):t},A.touchable=function(F){return arguments.length?(a=typeof F=="function"?F:constant$2(!!F),A):a},A.on=function(){var F=o.on.apply(o,arguments);return F===o?A:F},A.clickDistance=function(F){return arguments.length?(w=(F=+F)*F,A):Math.sqrt(w)},A}function define(r,e,t){r.prototype=e.prototype=t,t.constructor=r}function extend(r,e){var t=Object.create(r.prototype);for(var a in e)t[a]=e[a];return t}function Color(){}var darker=.7,brighter=1/darker,reI="\\s*([+-]?\\d+)\\s*",reN="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",reP="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",reHex=/^#([0-9a-f]{3,8})$/,reRgbInteger=new RegExp(`^rgb\\(${reI},${reI},${reI}\\)$`),reRgbPercent=new RegExp(`^rgb\\(${reP},${reP},${reP}\\)$`),reRgbaInteger=new RegExp(`^rgba\\(${reI},${reI},${reI},${reN}\\)$`),reRgbaPercent=new RegExp(`^rgba\\(${reP},${reP},${reP},${reN}\\)$`),reHslPercent=new RegExp(`^hsl\\(${reN},${reP},${reP}\\)$`),reHslaPercent=new RegExp(`^hsla\\(${reN},${reP},${reP},${reN}\\)$`),named={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};define(Color,color,{copy(r){return Object.assign(new this.constructor,this,r)},displayable(){return this.rgb().displayable()},hex:color_formatHex,formatHex:color_formatHex,formatHex8:color_formatHex8,formatHsl:color_formatHsl,formatRgb:color_formatRgb,toString:color_formatRgb});function color_formatHex(){return this.rgb().formatHex()}function color_formatHex8(){return this.rgb().formatHex8()}function color_formatHsl(){return hslConvert(this).formatHsl()}function color_formatRgb(){return this.rgb().formatRgb()}function color(r){var e,t;return r=(r+"").trim().toLowerCase(),(e=reHex.exec(r))?(t=e[1].length,e=parseInt(e[1],16),t===6?rgbn(e):t===3?new Rgb(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?rgba(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?rgba(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=reRgbInteger.exec(r))?new Rgb(e[1],e[2],e[3],1):(e=reRgbPercent.exec(r))?new Rgb(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=reRgbaInteger.exec(r))?rgba(e[1],e[2],e[3],e[4]):(e=reRgbaPercent.exec(r))?rgba(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=reHslPercent.exec(r))?hsla(e[1],e[2]/100,e[3]/100,1):(e=reHslaPercent.exec(r))?hsla(e[1],e[2]/100,e[3]/100,e[4]):named.hasOwnProperty(r)?rgbn(named[r]):r==="transparent"?new Rgb(NaN,NaN,NaN,0):null}function rgbn(r){return new Rgb(r>>16&255,r>>8&255,r&255,1)}function rgba(r,e,t,a){return a<=0&&(r=e=t=NaN),new Rgb(r,e,t,a)}function rgbConvert(r){return r instanceof Color||(r=color(r)),r?(r=r.rgb(),new Rgb(r.r,r.g,r.b,r.opacity)):new Rgb}function rgb(r,e,t,a){return arguments.length===1?rgbConvert(r):new Rgb(r,e,t,a??1)}function Rgb(r,e,t,a){this.r=+r,this.g=+e,this.b=+t,this.opacity=+a}define(Rgb,rgb,extend(Color,{brighter(r){return r=r==null?brighter:Math.pow(brighter,r),new Rgb(this.r*r,this.g*r,this.b*r,this.opacity)},darker(r){return r=r==null?darker:Math.pow(darker,r),new Rgb(this.r*r,this.g*r,this.b*r,this.opacity)},rgb(){return this},clamp(){return new Rgb(clampi(this.r),clampi(this.g),clampi(this.b),clampa(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rgb_formatHex,formatHex:rgb_formatHex,formatHex8:rgb_formatHex8,formatRgb:rgb_formatRgb,toString:rgb_formatRgb}));function rgb_formatHex(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}`}function rgb_formatHex8(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex((isNaN(this.opacity)?1:this.opacity)*255)}`}function rgb_formatRgb(){const r=clampa(this.opacity);return`${r===1?"rgb(":"rgba("}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${r===1?")":`, ${r})`}`}function clampa(r){return isNaN(r)?1:Math.max(0,Math.min(1,r))}function clampi(r){return Math.max(0,Math.min(255,Math.round(r)||0))}function hex(r){return r=clampi(r),(r<16?"0":"")+r.toString(16)}function hsla(r,e,t,a){return a<=0?r=e=t=NaN:t<=0||t>=1?r=e=NaN:e<=0&&(r=NaN),new Hsl(r,e,t,a)}function hslConvert(r){if(r instanceof Hsl)return new Hsl(r.h,r.s,r.l,r.opacity);if(r instanceof Color||(r=color(r)),!r)return new Hsl;if(r instanceof Hsl)return r;r=r.rgb();var e=r.r/255,t=r.g/255,a=r.b/255,s=Math.min(e,t,a),o=Math.max(e,t,a),f=NaN,u=o-s,h=(o+s)/2;return u?(e===o?f=(t-a)/u+(t<a)*6:t===o?f=(a-e)/u+2:f=(e-t)/u+4,u/=h<.5?o+s:2-o-s,f*=60):u=h>0&&h<1?0:f,new Hsl(f,u,h,r.opacity)}function hsl(r,e,t,a){return arguments.length===1?hslConvert(r):new Hsl(r,e,t,a??1)}function Hsl(r,e,t,a){this.h=+r,this.s=+e,this.l=+t,this.opacity=+a}define(Hsl,hsl,extend(Color,{brighter(r){return r=r==null?brighter:Math.pow(brighter,r),new Hsl(this.h,this.s,this.l*r,this.opacity)},darker(r){return r=r==null?darker:Math.pow(darker,r),new Hsl(this.h,this.s,this.l*r,this.opacity)},rgb(){var r=this.h%360+(this.h<0)*360,e=isNaN(r)||isNaN(this.s)?0:this.s,t=this.l,a=t+(t<.5?t:1-t)*e,s=2*t-a;return new Rgb(hsl2rgb(r>=240?r-240:r+120,s,a),hsl2rgb(r,s,a),hsl2rgb(r<120?r+240:r-120,s,a),this.opacity)},clamp(){return new Hsl(clamph(this.h),clampt(this.s),clampt(this.l),clampa(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const r=clampa(this.opacity);return`${r===1?"hsl(":"hsla("}${clamph(this.h)}, ${clampt(this.s)*100}%, ${clampt(this.l)*100}%${r===1?")":`, ${r})`}`}}));function clamph(r){return r=(r||0)%360,r<0?r+360:r}function clampt(r){return Math.max(0,Math.min(1,r||0))}function hsl2rgb(r,e,t){return(r<60?e+(t-e)*r/60:r<180?t:r<240?e+(t-e)*(240-r)/60:e)*255}const constant$1=r=>()=>r;function linear(r,e){return function(t){return r+t*e}}function exponential(r,e,t){return r=Math.pow(r,t),e=Math.pow(e,t)-r,t=1/t,function(a){return Math.pow(r+a*e,t)}}function gamma(r){return(r=+r)==1?nogamma:function(e,t){return t-e?exponential(e,t,r):constant$1(isNaN(e)?t:e)}}function nogamma(r,e){var t=e-r;return t?linear(r,t):constant$1(isNaN(r)?e:r)}const interpolateRgb=(function r(e){var t=gamma(e);function a(s,o){var f=t((s=rgb(s)).r,(o=rgb(o)).r),u=t(s.g,o.g),h=t(s.b,o.b),x=nogamma(s.opacity,o.opacity);return function(m){return s.r=f(m),s.g=u(m),s.b=h(m),s.opacity=x(m),s+""}}return a.gamma=r,a})(1);function interpolateNumber(r,e){return r=+r,e=+e,function(t){return r*(1-t)+e*t}}var reA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB=new RegExp(reA.source,"g");function zero(r){return function(){return r}}function one(r){return function(e){return r(e)+""}}function interpolateString(r,e){var t=reA.lastIndex=reB.lastIndex=0,a,s,o,f=-1,u=[],h=[];for(r=r+"",e=e+"";(a=reA.exec(r))&&(s=reB.exec(e));)(o=s.index)>t&&(o=e.slice(t,o),u[f]?u[f]+=o:u[++f]=o),(a=a[0])===(s=s[0])?u[f]?u[f]+=s:u[++f]=s:(u[++f]=null,h.push({i:f,x:interpolateNumber(a,s)})),t=reB.lastIndex;return t<e.length&&(o=e.slice(t),u[f]?u[f]+=o:u[++f]=o),u.length<2?h[0]?one(h[0].x):zero(e):(e=h.length,function(x){for(var m=0,w;m<e;++m)u[(w=h[m]).i]=w.x(x);return u.join("")})}var degrees=180/Math.PI,identity$1={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function decompose(r,e,t,a,s,o){var f,u,h;return(f=Math.sqrt(r*r+e*e))&&(r/=f,e/=f),(h=r*t+e*a)&&(t-=r*h,a-=e*h),(u=Math.sqrt(t*t+a*a))&&(t/=u,a/=u,h/=u),r*a<e*t&&(r=-r,e=-e,h=-h,f=-f),{translateX:s,translateY:o,rotate:Math.atan2(e,r)*degrees,skewX:Math.atan(h)*degrees,scaleX:f,scaleY:u}}var svgNode;function parseCss(r){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(r+"");return e.isIdentity?identity$1:decompose(e.a,e.b,e.c,e.d,e.e,e.f)}function parseSvg(r){return r==null||(svgNode||(svgNode=document.createElementNS("http://www.w3.org/2000/svg","g")),svgNode.setAttribute("transform",r),!(r=svgNode.transform.baseVal.consolidate()))?identity$1:(r=r.matrix,decompose(r.a,r.b,r.c,r.d,r.e,r.f))}function interpolateTransform(r,e,t,a){function s(x){return x.length?x.pop()+" ":""}function o(x,m,w,A,D,I){if(x!==w||m!==A){var y=D.push("translate(",null,e,null,t);I.push({i:y-4,x:interpolateNumber(x,w)},{i:y-2,x:interpolateNumber(m,A)})}else(w||A)&&D.push("translate("+w+e+A+t)}function f(x,m,w,A){x!==m?(x-m>180?m+=360:m-x>180&&(x+=360),A.push({i:w.push(s(w)+"rotate(",null,a)-2,x:interpolateNumber(x,m)})):m&&w.push(s(w)+"rotate("+m+a)}function u(x,m,w,A){x!==m?A.push({i:w.push(s(w)+"skewX(",null,a)-2,x:interpolateNumber(x,m)}):m&&w.push(s(w)+"skewX("+m+a)}function h(x,m,w,A,D,I){if(x!==w||m!==A){var y=D.push(s(D)+"scale(",null,",",null,")");I.push({i:y-4,x:interpolateNumber(x,w)},{i:y-2,x:interpolateNumber(m,A)})}else(w!==1||A!==1)&&D.push(s(D)+"scale("+w+","+A+")")}return function(x,m){var w=[],A=[];return x=r(x),m=r(m),o(x.translateX,x.translateY,m.translateX,m.translateY,w,A),f(x.rotate,m.rotate,w,A),u(x.skewX,m.skewX,w,A),h(x.scaleX,x.scaleY,m.scaleX,m.scaleY,w,A),x=m=null,function(D){for(var I=-1,y=A.length,l;++I<y;)w[(l=A[I]).i]=l.x(D);return w.join("")}}}var interpolateTransformCss=interpolateTransform(parseCss,"px, ","px)","deg)"),interpolateTransformSvg=interpolateTransform(parseSvg,", ",")",")"),epsilon2=1e-12;function cosh(r){return((r=Math.exp(r))+1/r)/2}function sinh(r){return((r=Math.exp(r))-1/r)/2}function tanh(r){return((r=Math.exp(2*r))-1)/(r+1)}const interpolateZoom=(function r(e,t,a){function s(o,f){var u=o[0],h=o[1],x=o[2],m=f[0],w=f[1],A=f[2],D=m-u,I=w-h,y=D*D+I*I,l,c;if(y<epsilon2)c=Math.log(A/x)/e,l=function(k){return[u+k*D,h+k*I,x*Math.exp(e*k*c)]};else{var L=Math.sqrt(y),R=(A*A-x*x+a*y)/(2*x*t*L),F=(A*A-x*x-a*y)/(2*A*t*L),$=Math.log(Math.sqrt(R*R+1)-R),b=Math.log(Math.sqrt(F*F+1)-F);c=(b-$)/e,l=function(k){var B=k*c,J=cosh($),X=x/(t*L)*(J*tanh(e*B+$)-sinh($));return[u+X*D,h+X*I,x*J/cosh(e*B+$)]}}return l.duration=c*1e3*e/Math.SQRT2,l}return s.rho=function(o){var f=Math.max(.001,+o),u=f*f,h=u*u;return r(f,u,h)},s})(Math.SQRT2,2,4);var frame=0,timeout$1=0,interval=0,pokeDelay=1e3,taskHead,taskTail,clockLast=0,clockNow=0,clockSkew=0,clock=typeof performance=="object"&&performance.now?performance:Date,setFrame=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(r){setTimeout(r,17)};function now(){return clockNow||(setFrame(clearNow),clockNow=clock.now()+clockSkew)}function clearNow(){clockNow=0}function Timer(){this._call=this._time=this._next=null}Timer.prototype=timer.prototype={constructor:Timer,restart:function(r,e,t){if(typeof r!="function")throw new TypeError("callback is not a function");t=(t==null?now():+t)+(e==null?0:+e),!this._next&&taskTail!==this&&(taskTail?taskTail._next=this:taskHead=this,taskTail=this),this._call=r,this._time=t,sleep()},stop:function(){this._call&&(this._call=null,this._time=1/0,sleep())}};function timer(r,e,t){var a=new Timer;return a.restart(r,e,t),a}function timerFlush(){now(),++frame;for(var r=taskHead,e;r;)(e=clockNow-r._time)>=0&&r._call.call(void 0,e),r=r._next;--frame}function wake(){clockNow=(clockLast=clock.now())+clockSkew,frame=timeout$1=0;try{timerFlush()}finally{frame=0,nap(),clockNow=0}}function poke(){var r=clock.now(),e=r-clockLast;e>pokeDelay&&(clockSkew-=e,clockLast=r)}function nap(){for(var r,e=taskHead,t,a=1/0;e;)e._call?(a>e._time&&(a=e._time),r=e,e=e._next):(t=e._next,e._next=null,e=r?r._next=t:taskHead=t);taskTail=r,sleep(a)}function sleep(r){if(!frame){timeout$1&&(timeout$1=clearTimeout(timeout$1));var e=r-clockNow;e>24?(r<1/0&&(timeout$1=setTimeout(wake,r-clock.now()-clockSkew)),interval&&(interval=clearInterval(interval))):(interval||(clockLast=clock.now(),interval=setInterval(poke,pokeDelay)),frame=1,setFrame(wake))}}function timeout(r,e,t){var a=new Timer;return e=e==null?0:+e,a.restart(s=>{a.stop(),r(s+e)},e,t),a}var emptyOn=dispatch("start","end","cancel","interrupt"),emptyTween=[],CREATED=0,SCHEDULED=1,STARTING=2,STARTED=3,RUNNING=4,ENDING=5,ENDED=6;function schedule(r,e,t,a,s,o){var f=r.__transition;if(!f)r.__transition={};else if(t in f)return;create(r,t,{name:e,index:a,group:s,on:emptyOn,tween:emptyTween,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:CREATED})}function init(r,e){var t=get(r,e);if(t.state>CREATED)throw new Error("too late; already scheduled");return t}function set(r,e){var t=get(r,e);if(t.state>STARTED)throw new Error("too late; already running");return t}function get(r,e){var t=r.__transition;if(!t||!(t=t[e]))throw new Error("transition not found");return t}function create(r,e,t){var a=r.__transition,s;a[e]=t,t.timer=timer(o,0,t.time);function o(x){t.state=SCHEDULED,t.timer.restart(f,t.delay,t.time),t.delay<=x&&f(x-t.delay)}function f(x){var m,w,A,D;if(t.state!==SCHEDULED)return h();for(m in a)if(D=a[m],D.name===t.name){if(D.state===STARTED)return timeout(f);D.state===RUNNING?(D.state=ENDED,D.timer.stop(),D.on.call("interrupt",r,r.__data__,D.index,D.group),delete a[m]):+m<e&&(D.state=ENDED,D.timer.stop(),D.on.call("cancel",r,r.__data__,D.index,D.group),delete a[m])}if(timeout(function(){t.state===STARTED&&(t.state=RUNNING,t.timer.restart(u,t.delay,t.time),u(x))}),t.state=STARTING,t.on.call("start",r,r.__data__,t.index,t.group),t.state===STARTING){for(t.state=STARTED,s=new Array(A=t.tween.length),m=0,w=-1;m<A;++m)(D=t.tween[m].value.call(r,r.__data__,t.index,t.group))&&(s[++w]=D);s.length=w+1}}function u(x){for(var m=x<t.duration?t.ease.call(null,x/t.duration):(t.timer.restart(h),t.state=ENDING,1),w=-1,A=s.length;++w<A;)s[w].call(r,m);t.state===ENDING&&(t.on.call("end",r,r.__data__,t.index,t.group),h())}function h(){t.state=ENDED,t.timer.stop(),delete a[e];for(var x in a)return;delete r.__transition}}function interrupt(r,e){var t=r.__transition,a,s,o=!0,f;if(t){e=e==null?null:e+"";for(f in t){if((a=t[f]).name!==e){o=!1;continue}s=a.state>STARTING&&a.state<ENDING,a.state=ENDED,a.timer.stop(),a.on.call(s?"interrupt":"cancel",r,r.__data__,a.index,a.group),delete t[f]}o&&delete r.__transition}}function selection_interrupt(r){return this.each(function(){interrupt(this,r)})}function tweenRemove(r,e){var t,a;return function(){var s=set(this,r),o=s.tween;if(o!==t){a=t=o;for(var f=0,u=a.length;f<u;++f)if(a[f].name===e){a=a.slice(),a.splice(f,1);break}}s.tween=a}}function tweenFunction(r,e,t){var a,s;if(typeof t!="function")throw new Error;return function(){var o=set(this,r),f=o.tween;if(f!==a){s=(a=f).slice();for(var u={name:e,value:t},h=0,x=s.length;h<x;++h)if(s[h].name===e){s[h]=u;break}h===x&&s.push(u)}o.tween=s}}function transition_tween(r,e){var t=this._id;if(r+="",arguments.length<2){for(var a=get(this.node(),t).tween,s=0,o=a.length,f;s<o;++s)if((f=a[s]).name===r)return f.value;return null}return this.each((e==null?tweenRemove:tweenFunction)(t,r,e))}function tweenValue(r,e,t){var a=r._id;return r.each(function(){var s=set(this,a);(s.value||(s.value={}))[e]=t.apply(this,arguments)}),function(s){return get(s,a).value[e]}}function interpolate(r,e){var t;return(typeof e=="number"?interpolateNumber:e instanceof color?interpolateRgb:(t=color(e))?(e=t,interpolateRgb):interpolateString)(r,e)}function attrRemove(r){return function(){this.removeAttribute(r)}}function attrRemoveNS(r){return function(){this.removeAttributeNS(r.space,r.local)}}function attrConstant(r,e,t){var a,s=t+"",o;return function(){var f=this.getAttribute(r);return f===s?null:f===a?o:o=e(a=f,t)}}function attrConstantNS(r,e,t){var a,s=t+"",o;return function(){var f=this.getAttributeNS(r.space,r.local);return f===s?null:f===a?o:o=e(a=f,t)}}function attrFunction(r,e,t){var a,s,o;return function(){var f,u=t(this),h;return u==null?void this.removeAttribute(r):(f=this.getAttribute(r),h=u+"",f===h?null:f===a&&h===s?o:(s=h,o=e(a=f,u)))}}function attrFunctionNS(r,e,t){var a,s,o;return function(){var f,u=t(this),h;return u==null?void this.removeAttributeNS(r.space,r.local):(f=this.getAttributeNS(r.space,r.local),h=u+"",f===h?null:f===a&&h===s?o:(s=h,o=e(a=f,u)))}}function transition_attr(r,e){var t=namespace(r),a=t==="transform"?interpolateTransformSvg:interpolate;return this.attrTween(r,typeof e=="function"?(t.local?attrFunctionNS:attrFunction)(t,a,tweenValue(this,"attr."+r,e)):e==null?(t.local?attrRemoveNS:attrRemove)(t):(t.local?attrConstantNS:attrConstant)(t,a,e))}function attrInterpolate(r,e){return function(t){this.setAttribute(r,e.call(this,t))}}function attrInterpolateNS(r,e){return function(t){this.setAttributeNS(r.space,r.local,e.call(this,t))}}function attrTweenNS(r,e){var t,a;function s(){var o=e.apply(this,arguments);return o!==a&&(t=(a=o)&&attrInterpolateNS(r,o)),t}return s._value=e,s}function attrTween(r,e){var t,a;function s(){var o=e.apply(this,arguments);return o!==a&&(t=(a=o)&&attrInterpolate(r,o)),t}return s._value=e,s}function transition_attrTween(r,e){var t="attr."+r;if(arguments.length<2)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;var a=namespace(r);return this.tween(t,(a.local?attrTweenNS:attrTween)(a,e))}function delayFunction(r,e){return function(){init(this,r).delay=+e.apply(this,arguments)}}function delayConstant(r,e){return e=+e,function(){init(this,r).delay=e}}function transition_delay(r){var e=this._id;return arguments.length?this.each((typeof r=="function"?delayFunction:delayConstant)(e,r)):get(this.node(),e).delay}function durationFunction(r,e){return function(){set(this,r).duration=+e.apply(this,arguments)}}function durationConstant(r,e){return e=+e,function(){set(this,r).duration=e}}function transition_duration(r){var e=this._id;return arguments.length?this.each((typeof r=="function"?durationFunction:durationConstant)(e,r)):get(this.node(),e).duration}function easeConstant(r,e){if(typeof e!="function")throw new Error;return function(){set(this,r).ease=e}}function transition_ease(r){var e=this._id;return arguments.length?this.each(easeConstant(e,r)):get(this.node(),e).ease}function easeVarying(r,e){return function(){var t=e.apply(this,arguments);if(typeof t!="function")throw new Error;set(this,r).ease=t}}function transition_easeVarying(r){if(typeof r!="function")throw new Error;return this.each(easeVarying(this._id,r))}function transition_filter(r){typeof r!="function"&&(r=matcher(r));for(var e=this._groups,t=e.length,a=new Array(t),s=0;s<t;++s)for(var o=e[s],f=o.length,u=a[s]=[],h,x=0;x<f;++x)(h=o[x])&&r.call(h,h.__data__,x,o)&&u.push(h);return new Transition(a,this._parents,this._name,this._id)}function transition_merge(r){if(r._id!==this._id)throw new Error;for(var e=this._groups,t=r._groups,a=e.length,s=t.length,o=Math.min(a,s),f=new Array(a),u=0;u<o;++u)for(var h=e[u],x=t[u],m=h.length,w=f[u]=new Array(m),A,D=0;D<m;++D)(A=h[D]||x[D])&&(w[D]=A);for(;u<a;++u)f[u]=e[u];return new Transition(f,this._parents,this._name,this._id)}function start(r){return(r+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||e==="start"})}function onFunction(r,e,t){var a,s,o=start(e)?init:set;return function(){var f=o(this,r),u=f.on;u!==a&&(s=(a=u).copy()).on(e,t),f.on=s}}function transition_on(r,e){var t=this._id;return arguments.length<2?get(this.node(),t).on.on(r):this.each(onFunction(t,r,e))}function removeFunction(r){return function(){var e=this.parentNode;for(var t in this.__transition)if(+t!==r)return;e&&e.removeChild(this)}}function transition_remove(){return this.on("end.remove",removeFunction(this._id))}function transition_select(r){var e=this._name,t=this._id;typeof r!="function"&&(r=selector$h(r));for(var a=this._groups,s=a.length,o=new Array(s),f=0;f<s;++f)for(var u=a[f],h=u.length,x=o[f]=new Array(h),m,w,A=0;A<h;++A)(m=u[A])&&(w=r.call(m,m.__data__,A,u))&&("__data__"in m&&(w.__data__=m.__data__),x[A]=w,schedule(x[A],e,t,A,x,get(m,t)));return new Transition(o,this._parents,e,t)}function transition_selectAll(r){var e=this._name,t=this._id;typeof r!="function"&&(r=selectorAll(r));for(var a=this._groups,s=a.length,o=[],f=[],u=0;u<s;++u)for(var h=a[u],x=h.length,m,w=0;w<x;++w)if(m=h[w]){for(var A=r.call(m,m.__data__,w,h),D,I=get(m,t),y=0,l=A.length;y<l;++y)(D=A[y])&&schedule(D,e,t,y,A,I);o.push(A),f.push(m)}return new Transition(o,f,e,t)}var Selection=selection.prototype.constructor;function transition_selection(){return new Selection(this._groups,this._parents)}function styleNull(r,e){var t,a,s;return function(){var o=styleValue(this,r),f=(this.style.removeProperty(r),styleValue(this,r));return o===f?null:o===t&&f===a?s:s=e(t=o,a=f)}}function styleRemove(r){return function(){this.style.removeProperty(r)}}function styleConstant(r,e,t){var a,s=t+"",o;return function(){var f=styleValue(this,r);return f===s?null:f===a?o:o=e(a=f,t)}}function styleFunction(r,e,t){var a,s,o;return function(){var f=styleValue(this,r),u=t(this),h=u+"";return u==null&&(h=u=(this.style.removeProperty(r),styleValue(this,r))),f===h?null:f===a&&h===s?o:(s=h,o=e(a=f,u))}}function styleMaybeRemove(r,e){var t,a,s,o="style."+e,f="end."+o,u;return function(){var h=set(this,r),x=h.on,m=h.value[o]==null?u||(u=styleRemove(e)):void 0;(x!==t||s!==m)&&(a=(t=x).copy()).on(f,s=m),h.on=a}}function transition_style(r,e,t){var a=(r+="")=="transform"?interpolateTransformCss:interpolate;return e==null?this.styleTween(r,styleNull(r,a)).on("end.style."+r,styleRemove(r)):typeof e=="function"?this.styleTween(r,styleFunction(r,a,tweenValue(this,"style."+r,e))).each(styleMaybeRemove(this._id,r)):this.styleTween(r,styleConstant(r,a,e),t).on("end.style."+r,null)}function styleInterpolate(r,e,t){return function(a){this.style.setProperty(r,e.call(this,a),t)}}function styleTween(r,e,t){var a,s;function o(){var f=e.apply(this,arguments);return f!==s&&(a=(s=f)&&styleInterpolate(r,f,t)),a}return o._value=e,o}function transition_styleTween(r,e,t){var a="style."+(r+="");if(arguments.length<2)return(a=this.tween(a))&&a._value;if(e==null)return this.tween(a,null);if(typeof e!="function")throw new Error;return this.tween(a,styleTween(r,e,t??""))}function textConstant(r){return function(){this.textContent=r}}function textFunction(r){return function(){var e=r(this);this.textContent=e??""}}function transition_text(r){return this.tween("text",typeof r=="function"?textFunction(tweenValue(this,"text",r)):textConstant(r==null?"":r+""))}function textInterpolate(r){return function(e){this.textContent=r.call(this,e)}}function textTween(r){var e,t;function a(){var s=r.apply(this,arguments);return s!==t&&(e=(t=s)&&textInterpolate(s)),e}return a._value=r,a}function transition_textTween(r){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(r==null)return this.tween(e,null);if(typeof r!="function")throw new Error;return this.tween(e,textTween(r))}function transition_transition(){for(var r=this._name,e=this._id,t=newId(),a=this._groups,s=a.length,o=0;o<s;++o)for(var f=a[o],u=f.length,h,x=0;x<u;++x)if(h=f[x]){var m=get(h,e);schedule(h,r,t,x,f,{time:m.time+m.delay+m.duration,delay:0,duration:m.duration,ease:m.ease})}return new Transition(a,this._parents,r,t)}function transition_end(){var r,e,t=this,a=t._id,s=t.size();return new Promise(function(o,f){var u={value:f},h={value:function(){--s===0&&o()}};t.each(function(){var x=set(this,a),m=x.on;m!==r&&(e=(r=m).copy(),e._.cancel.push(u),e._.interrupt.push(u),e._.end.push(h)),x.on=e}),s===0&&o()})}var id$1=0;function Transition(r,e,t,a){this._groups=r,this._parents=e,this._name=t,this._id=a}function newId(){return++id$1}var selection_prototype=selection.prototype;Transition.prototype={constructor:Transition,select:transition_select,selectAll:transition_selectAll,selectChild:selection_prototype.selectChild,selectChildren:selection_prototype.selectChildren,filter:transition_filter,merge:transition_merge,selection:transition_selection,transition:transition_transition,call:selection_prototype.call,nodes:selection_prototype.nodes,node:selection_prototype.node,size:selection_prototype.size,empty:selection_prototype.empty,each:selection_prototype.each,on:transition_on,attr:transition_attr,attrTween:transition_attrTween,style:transition_style,styleTween:transition_styleTween,text:transition_text,textTween:transition_textTween,remove:transition_remove,tween:transition_tween,delay:transition_delay,duration:transition_duration,ease:transition_ease,easeVarying:transition_easeVarying,end:transition_end,[Symbol.iterator]:selection_prototype[Symbol.iterator]};function cubicInOut(r){return((r*=2)<=1?r*r*r:(r-=2)*r*r+2)/2}var defaultTiming={time:null,delay:0,duration:250,ease:cubicInOut};function inherit(r,e){for(var t;!(t=r.__transition)||!(t=t[e]);)if(!(r=r.parentNode))throw new Error(`transition ${e} not found`);return t}function selection_transition(r){var e,t;r instanceof Transition?(e=r._id,r=r._name):(e=newId(),(t=defaultTiming).time=now(),r=r==null?null:r+"");for(var a=this._groups,s=a.length,o=0;o<s;++o)for(var f=a[o],u=f.length,h,x=0;x<u;++x)(h=f[x])&&schedule(h,r,e,x,f,t||inherit(h,e));return new Transition(a,this._parents,r,e)}selection.prototype.interrupt=selection_interrupt;selection.prototype.transition=selection_transition;const constant=r=>()=>r;function ZoomEvent(r,{sourceEvent:e,target:t,transform:a,dispatch:s}){Object.defineProperties(this,{type:{value:r,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:t,enumerable:!0,configurable:!0},transform:{value:a,enumerable:!0,configurable:!0},_:{value:s}})}function Transform(r,e,t){this.k=r,this.x=e,this.y=t}Transform.prototype={constructor:Transform,scale:function(r){return r===1?this:new Transform(this.k*r,this.x,this.y)},translate:function(r,e){return r===0&e===0?this:new Transform(this.k,this.x+this.k*r,this.y+this.k*e)},apply:function(r){return[r[0]*this.k+this.x,r[1]*this.k+this.y]},applyX:function(r){return r*this.k+this.x},applyY:function(r){return r*this.k+this.y},invert:function(r){return[(r[0]-this.x)/this.k,(r[1]-this.y)/this.k]},invertX:function(r){return(r-this.x)/this.k},invertY:function(r){return(r-this.y)/this.k},rescaleX:function(r){return r.copy().domain(r.range().map(this.invertX,this).map(r.invert,r))},rescaleY:function(r){return r.copy().domain(r.range().map(this.invertY,this).map(r.invert,r))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var identity=new Transform(1,0,0);Transform.prototype;function nopropagation(r){r.stopImmediatePropagation()}function noevent(r){r.preventDefault(),r.stopImmediatePropagation()}function defaultFilter(r){return(!r.ctrlKey||r.type==="wheel")&&!r.button}function defaultExtent(){var r=this;return r instanceof SVGElement?(r=r.ownerSVGElement||r,r.hasAttribute("viewBox")?(r=r.viewBox.baseVal,[[r.x,r.y],[r.x+r.width,r.y+r.height]]):[[0,0],[r.width.baseVal.value,r.height.baseVal.value]]):[[0,0],[r.clientWidth,r.clientHeight]]}function defaultTransform(){return this.__zoom||identity}function defaultWheelDelta(r){return-r.deltaY*(r.deltaMode===1?.05:r.deltaMode?1:.002)*(r.ctrlKey?10:1)}function defaultTouchable(){return navigator.maxTouchPoints||"ontouchstart"in this}function defaultConstrain(r,e,t){var a=r.invertX(e[0][0])-t[0][0],s=r.invertX(e[1][0])-t[1][0],o=r.invertY(e[0][1])-t[0][1],f=r.invertY(e[1][1])-t[1][1];return r.translate(s>a?(a+s)/2:Math.min(0,a)||Math.max(0,s),f>o?(o+f)/2:Math.min(0,o)||Math.max(0,f))}function zoom(){var r=defaultFilter,e=defaultExtent,t=defaultConstrain,a=defaultWheelDelta,s=defaultTouchable,o=[0,1/0],f=[[-1/0,-1/0],[1/0,1/0]],u=250,h=interpolateZoom,x=dispatch("start","zoom","end"),m,w,A,D=500,I=150,y=0,l=10;function c(ue){ue.property("__zoom",defaultTransform).on("wheel.zoom",B,{passive:!1}).on("mousedown.zoom",J).on("dblclick.zoom",X).filter(s).on("touchstart.zoom",ae).on("touchmove.zoom",He).on("touchend.zoom touchcancel.zoom",Pe).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}c.transform=function(ue,Oe,we,Ze){var it=ue.selection?ue.selection():ue;it.property("__zoom",defaultTransform),ue!==it?$(ue,Oe,we,Ze):it.interrupt().each(function(){b(this,arguments).event(Ze).start().zoom(null,typeof Oe=="function"?Oe.apply(this,arguments):Oe).end()})},c.scaleBy=function(ue,Oe,we,Ze){c.scaleTo(ue,function(){var it=this.__zoom.k,lt=typeof Oe=="function"?Oe.apply(this,arguments):Oe;return it*lt},we,Ze)},c.scaleTo=function(ue,Oe,we,Ze){c.transform(ue,function(){var it=e.apply(this,arguments),lt=this.__zoom,Vt=we==null?F(it):typeof we=="function"?we.apply(this,arguments):we,_e=lt.invert(Vt),pr=typeof Oe=="function"?Oe.apply(this,arguments):Oe;return t(R(L(lt,pr),Vt,_e),it,f)},we,Ze)},c.translateBy=function(ue,Oe,we,Ze){c.transform(ue,function(){return t(this.__zoom.translate(typeof Oe=="function"?Oe.apply(this,arguments):Oe,typeof we=="function"?we.apply(this,arguments):we),e.apply(this,arguments),f)},null,Ze)},c.translateTo=function(ue,Oe,we,Ze,it){c.transform(ue,function(){var lt=e.apply(this,arguments),Vt=this.__zoom,_e=Ze==null?F(lt):typeof Ze=="function"?Ze.apply(this,arguments):Ze;return t(identity.translate(_e[0],_e[1]).scale(Vt.k).translate(typeof Oe=="function"?-Oe.apply(this,arguments):-Oe,typeof we=="function"?-we.apply(this,arguments):-we),lt,f)},Ze,it)};function L(ue,Oe){return Oe=Math.max(o[0],Math.min(o[1],Oe)),Oe===ue.k?ue:new Transform(Oe,ue.x,ue.y)}function R(ue,Oe,we){var Ze=Oe[0]-we[0]*ue.k,it=Oe[1]-we[1]*ue.k;return Ze===ue.x&&it===ue.y?ue:new Transform(ue.k,Ze,it)}function F(ue){return[(+ue[0][0]+ +ue[1][0])/2,(+ue[0][1]+ +ue[1][1])/2]}function $(ue,Oe,we,Ze){ue.on("start.zoom",function(){b(this,arguments).event(Ze).start()}).on("interrupt.zoom end.zoom",function(){b(this,arguments).event(Ze).end()}).tween("zoom",function(){var it=this,lt=arguments,Vt=b(it,lt).event(Ze),_e=e.apply(it,lt),pr=we==null?F(_e):typeof we=="function"?we.apply(it,lt):we,_s=Math.max(_e[1][0]-_e[0][0],_e[1][1]-_e[0][1]),Ei=it.__zoom,Bl=typeof Oe=="function"?Oe.apply(it,lt):Oe,Wl=h(Ei.invert(pr).concat(_s/Ei.k),Bl.invert(pr).concat(_s/Bl.k));return function(Ep){if(Ep===1)Ep=Bl;else{var Lp=Wl(Ep),Op=_s/Lp[2];Ep=new Transform(Op,pr[0]-Lp[0]*Op,pr[1]-Lp[1]*Op)}Vt.zoom(null,Ep)}})}function b(ue,Oe,we){return!we&&ue.__zooming||new k(ue,Oe)}function k(ue,Oe){this.that=ue,this.args=Oe,this.active=0,this.sourceEvent=null,this.extent=e.apply(ue,Oe),this.taps=0}k.prototype={event:function(ue){return ue&&(this.sourceEvent=ue),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(ue,Oe){return this.mouse&&ue!=="mouse"&&(this.mouse[1]=Oe.invert(this.mouse[0])),this.touch0&&ue!=="touch"&&(this.touch0[1]=Oe.invert(this.touch0[0])),this.touch1&&ue!=="touch"&&(this.touch1[1]=Oe.invert(this.touch1[0])),this.that.__zoom=Oe,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(ue){var Oe=select(this.that).datum();x.call(ue,this.that,new ZoomEvent(ue,{sourceEvent:this.sourceEvent,target:c,transform:this.that.__zoom,dispatch:x}),Oe)}};function B(ue,...Oe){if(!r.apply(this,arguments))return;var we=b(this,Oe).event(ue),Ze=this.__zoom,it=Math.max(o[0],Math.min(o[1],Ze.k*Math.pow(2,a.apply(this,arguments)))),lt=pointer(ue);if(we.wheel)(we.mouse[0][0]!==lt[0]||we.mouse[0][1]!==lt[1])&&(we.mouse[1]=Ze.invert(we.mouse[0]=lt)),clearTimeout(we.wheel);else{if(Ze.k===it)return;we.mouse=[lt,Ze.invert(lt)],interrupt(this),we.start()}noevent(ue),we.wheel=setTimeout(Vt,I),we.zoom("mouse",t(R(L(Ze,it),we.mouse[0],we.mouse[1]),we.extent,f));function Vt(){we.wheel=null,we.end()}}function J(ue,...Oe){if(A||!r.apply(this,arguments))return;var we=ue.currentTarget,Ze=b(this,Oe,!0).event(ue),it=select(ue.view).on("mousemove.zoom",pr,!0).on("mouseup.zoom",_s,!0),lt=pointer(ue,we),Vt=ue.clientX,_e=ue.clientY;dragDisable(ue.view),nopropagation(ue),Ze.mouse=[lt,this.__zoom.invert(lt)],interrupt(this),Ze.start();function pr(Ei){if(noevent(Ei),!Ze.moved){var Bl=Ei.clientX-Vt,Wl=Ei.clientY-_e;Ze.moved=Bl*Bl+Wl*Wl>y}Ze.event(Ei).zoom("mouse",t(R(Ze.that.__zoom,Ze.mouse[0]=pointer(Ei,we),Ze.mouse[1]),Ze.extent,f))}function _s(Ei){it.on("mousemove.zoom mouseup.zoom",null),yesdrag(Ei.view,Ze.moved),noevent(Ei),Ze.event(Ei).end()}}function X(ue,...Oe){if(r.apply(this,arguments)){var we=this.__zoom,Ze=pointer(ue.changedTouches?ue.changedTouches[0]:ue,this),it=we.invert(Ze),lt=we.k*(ue.shiftKey?.5:2),Vt=t(R(L(we,lt),Ze,it),e.apply(this,Oe),f);noevent(ue),u>0?select(this).transition().duration(u).call($,Vt,Ze,ue):select(this).call(c.transform,Vt,Ze,ue)}}function ae(ue,...Oe){if(r.apply(this,arguments)){var we=ue.touches,Ze=we.length,it=b(this,Oe,ue.changedTouches.length===Ze).event(ue),lt,Vt,_e,pr;for(nopropagation(ue),Vt=0;Vt<Ze;++Vt)_e=we[Vt],pr=pointer(_e,this),pr=[pr,this.__zoom.invert(pr),_e.identifier],it.touch0?!it.touch1&&it.touch0[2]!==pr[2]&&(it.touch1=pr,it.taps=0):(it.touch0=pr,lt=!0,it.taps=1+!!m);m&&(m=clearTimeout(m)),lt&&(it.taps<2&&(w=pr[0],m=setTimeout(function(){m=null},D)),interrupt(this),it.start())}}function He(ue,...Oe){if(this.__zooming){var we=b(this,Oe).event(ue),Ze=ue.changedTouches,it=Ze.length,lt,Vt,_e,pr;for(noevent(ue),lt=0;lt<it;++lt)Vt=Ze[lt],_e=pointer(Vt,this),we.touch0&&we.touch0[2]===Vt.identifier?we.touch0[0]=_e:we.touch1&&we.touch1[2]===Vt.identifier&&(we.touch1[0]=_e);if(Vt=we.that.__zoom,we.touch1){var _s=we.touch0[0],Ei=we.touch0[1],Bl=we.touch1[0],Wl=we.touch1[1],Ep=(Ep=Bl[0]-_s[0])*Ep+(Ep=Bl[1]-_s[1])*Ep,Lp=(Lp=Wl[0]-Ei[0])*Lp+(Lp=Wl[1]-Ei[1])*Lp;Vt=L(Vt,Math.sqrt(Ep/Lp)),_e=[(_s[0]+Bl[0])/2,(_s[1]+Bl[1])/2],pr=[(Ei[0]+Wl[0])/2,(Ei[1]+Wl[1])/2]}else if(we.touch0)_e=we.touch0[0],pr=we.touch0[1];else return;we.zoom("touch",t(R(Vt,_e,pr),we.extent,f))}}function Pe(ue,...Oe){if(this.__zooming){var we=b(this,Oe).event(ue),Ze=ue.changedTouches,it=Ze.length,lt,Vt;for(nopropagation(ue),A&&clearTimeout(A),A=setTimeout(function(){A=null},D),lt=0;lt<it;++lt)Vt=Ze[lt],we.touch0&&we.touch0[2]===Vt.identifier?delete we.touch0:we.touch1&&we.touch1[2]===Vt.identifier&&delete we.touch1;if(we.touch1&&!we.touch0&&(we.touch0=we.touch1,delete we.touch1),we.touch0)we.touch0[1]=this.__zoom.invert(we.touch0[0]);else if(we.end(),we.taps===2&&(Vt=pointer(Vt,this),Math.hypot(w[0]-Vt[0],w[1]-Vt[1])<l)){var _e=select(this).on("dblclick.zoom");_e&&_e.apply(this,arguments)}}}return c.wheelDelta=function(ue){return arguments.length?(a=typeof ue=="function"?ue:constant(+ue),c):a},c.filter=function(ue){return arguments.length?(r=typeof ue=="function"?ue:constant(!!ue),c):r},c.touchable=function(ue){return arguments.length?(s=typeof ue=="function"?ue:constant(!!ue),c):s},c.extent=function(ue){return arguments.length?(e=typeof ue=="function"?ue:constant([[+ue[0][0],+ue[0][1]],[+ue[1][0],+ue[1][1]]]),c):e},c.scaleExtent=function(ue){return arguments.length?(o[0]=+ue[0],o[1]=+ue[1],c):[o[0],o[1]]},c.translateExtent=function(ue){return arguments.length?(f[0][0]=+ue[0][0],f[1][0]=+ue[1][0],f[0][1]=+ue[0][1],f[1][1]=+ue[1][1],c):[[f[0][0],f[0][1]],[f[1][0],f[1][1]]]},c.constrain=function(ue){return arguments.length?(t=ue,c):t},c.duration=function(ue){return arguments.length?(u=+ue,c):u},c.interpolate=function(ue){return arguments.length?(h=ue,c):h},c.on=function(){var ue=x.on.apply(x,arguments);return ue===x?c:ue},c.clickDistance=function(ue){return arguments.length?(y=(ue=+ue)*ue,c):Math.sqrt(y)},c.tapDistance=function(ue){return arguments.length?(l=+ue,c):l},c}const StoreContext=reactExports.createContext(null),Provider$1=StoreContext.Provider,errorMessages={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:r=>`Node type "${r}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:r=>`The old edge with id=${r} does not exist.`,error009:r=>`Marker type "${r}" doesn't exist.`,error008:(r,e)=>`Couldn't create edge for ${r?"target":"source"} handle id: "${r?e.targetHandle:e.sourceHandle}", edge id: ${e.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:r=>`Edge type "${r}" not found. Using fallback type "default".`,error012:r=>`Node with id "${r}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},zustandErrorMessage=errorMessages.error001();function useStore(r,e){const t=reactExports.useContext(StoreContext);if(t===null)throw new Error(zustandErrorMessage);return useStoreWithEqualityFn(t,r,e)}const useStoreApi=()=>{const r=reactExports.useContext(StoreContext);if(r===null)throw new Error(zustandErrorMessage);return reactExports.useMemo(()=>({getState:r.getState,setState:r.setState,subscribe:r.subscribe,destroy:r.destroy}),[r])},selector$g=r=>r.userSelectionActive?"none":"all";function Panel({position:r,children:e,className:t,style:a,...s}){const o=useStore(selector$g),f=`${r}`.split("-");return React.createElement("div",{className:cc$1(["react-flow__panel",t,...f]),style:{...a,pointerEvents:o},...s},e)}function Attribution({proOptions:r,position:e="bottom-right"}){return r?.hideAttribution?null:React.createElement(Panel,{position:e,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},React.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const EdgeText=({x:r,y:e,label:t,labelStyle:a={},labelShowBg:s=!0,labelBgStyle:o={},labelBgPadding:f=[2,4],labelBgBorderRadius:u=2,children:h,className:x,...m})=>{const w=reactExports.useRef(null),[A,D]=reactExports.useState({x:0,y:0,width:0,height:0}),I=cc$1(["react-flow__edge-textwrapper",x]);return reactExports.useEffect(()=>{if(w.current){const y=w.current.getBBox();D({x:y.x,y:y.y,width:y.width,height:y.height})}},[t]),typeof t>"u"||!t?null:React.createElement("g",{transform:`translate(${r-A.width/2} ${e-A.height/2})`,className:I,visibility:A.width?"visible":"hidden",...m},s&&React.createElement("rect",{width:A.width+2*f[0],x:-f[0],y:-f[1],height:A.height+2*f[1],className:"react-flow__edge-textbg",style:o,rx:u,ry:u}),React.createElement("text",{className:"react-flow__edge-text",y:A.height/2,dy:"0.3em",ref:w,style:a},t),h)};var EdgeText$1=reactExports.memo(EdgeText);const getDimensions=r=>({width:r.offsetWidth,height:r.offsetHeight}),clamp=(r,e=0,t=1)=>Math.min(Math.max(r,e),t),clampPosition=(r={x:0,y:0},e)=>({x:clamp(r.x,e[0][0],e[1][0]),y:clamp(r.y,e[0][1],e[1][1])}),calcAutoPanVelocity=(r,e,t)=>r<e?clamp(Math.abs(r-e),1,50)/50:r>t?-clamp(Math.abs(r-t),1,50)/50:0,calcAutoPan=(r,e)=>{const t=calcAutoPanVelocity(r.x,35,e.width-35)*20,a=calcAutoPanVelocity(r.y,35,e.height-35)*20;return[t,a]},getHostForElement=r=>r.getRootNode?.()||window?.document,getBoundsOfBoxes=(r,e)=>({x:Math.min(r.x,e.x),y:Math.min(r.y,e.y),x2:Math.max(r.x2,e.x2),y2:Math.max(r.y2,e.y2)}),rectToBox=({x:r,y:e,width:t,height:a})=>({x:r,y:e,x2:r+t,y2:e+a}),boxToRect=({x:r,y:e,x2:t,y2:a})=>({x:r,y:e,width:t-r,height:a-e}),nodeToRect=r=>({...r.positionAbsolute||{x:0,y:0},width:r.width||0,height:r.height||0}),getOverlappingArea=(r,e)=>{const t=Math.max(0,Math.min(r.x+r.width,e.x+e.width)-Math.max(r.x,e.x)),a=Math.max(0,Math.min(r.y+r.height,e.y+e.height)-Math.max(r.y,e.y));return Math.ceil(t*a)},isRectObject=r=>isNumeric(r.width)&&isNumeric(r.height)&&isNumeric(r.x)&&isNumeric(r.y),isNumeric=r=>!isNaN(r)&&isFinite(r),internalsSymbol=Symbol.for("internals"),elementSelectionKeys=["Enter"," ","Escape"],devWarn=(r,e)=>{},isReactKeyboardEvent=r=>"nativeEvent"in r;function isInputDOMNode(r){const t=(isReactKeyboardEvent(r)?r.nativeEvent:r).composedPath?.()?.[0]||r.target;return["INPUT","SELECT","TEXTAREA"].includes(t?.nodeName)||t?.hasAttribute("contenteditable")||!!t?.closest(".nokey")}const isMouseEvent=r=>"clientX"in r,getEventPosition=(r,e)=>{const t=isMouseEvent(r),a=t?r.clientX:r.touches?.[0].clientX,s=t?r.clientY:r.touches?.[0].clientY;return{x:a-(e?.left??0),y:s-(e?.top??0)}},isMacOs=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0,BaseEdge=({id:r,path:e,labelX:t,labelY:a,label:s,labelStyle:o,labelShowBg:f,labelBgStyle:u,labelBgPadding:h,labelBgBorderRadius:x,style:m,markerEnd:w,markerStart:A,interactionWidth:D=20})=>React.createElement(React.Fragment,null,React.createElement("path",{id:r,style:m,d:e,fill:"none",className:"react-flow__edge-path",markerEnd:w,markerStart:A}),D&&React.createElement("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:D,className:"react-flow__edge-interaction"}),s&&isNumeric(t)&&isNumeric(a)?React.createElement(EdgeText$1,{x:t,y:a,label:s,labelStyle:o,labelShowBg:f,labelBgStyle:u,labelBgPadding:h,labelBgBorderRadius:x}):null);BaseEdge.displayName="BaseEdge";function getMouseHandler$1(r,e,t){return t===void 0?t:a=>{const s=e().edges.find(o=>o.id===r);s&&t(a,{...s})}}function getEdgeCenter({sourceX:r,sourceY:e,targetX:t,targetY:a}){const s=Math.abs(t-r)/2,o=t<r?t+s:t-s,f=Math.abs(a-e)/2,u=a<e?a+f:a-f;return[o,u,s,f]}function getBezierEdgeCenter({sourceX:r,sourceY:e,targetX:t,targetY:a,sourceControlX:s,sourceControlY:o,targetControlX:f,targetControlY:u}){const h=r*.125+s*.375+f*.375+t*.125,x=e*.125+o*.375+u*.375+a*.125,m=Math.abs(h-r),w=Math.abs(x-e);return[h,x,m,w]}var ConnectionMode;(function(r){r.Strict="strict",r.Loose="loose"})(ConnectionMode||(ConnectionMode={}));var PanOnScrollMode;(function(r){r.Free="free",r.Vertical="vertical",r.Horizontal="horizontal"})(PanOnScrollMode||(PanOnScrollMode={}));var SelectionMode;(function(r){r.Partial="partial",r.Full="full"})(SelectionMode||(SelectionMode={}));var ConnectionLineType;(function(r){r.Bezier="default",r.Straight="straight",r.Step="step",r.SmoothStep="smoothstep",r.SimpleBezier="simplebezier"})(ConnectionLineType||(ConnectionLineType={}));var MarkerType;(function(r){r.Arrow="arrow",r.ArrowClosed="arrowclosed"})(MarkerType||(MarkerType={}));var Position;(function(r){r.Left="left",r.Top="top",r.Right="right",r.Bottom="bottom"})(Position||(Position={}));function getControl({pos:r,x1:e,y1:t,x2:a,y2:s}){return r===Position.Left||r===Position.Right?[.5*(e+a),t]:[e,.5*(t+s)]}function getSimpleBezierPath({sourceX:r,sourceY:e,sourcePosition:t=Position.Bottom,targetX:a,targetY:s,targetPosition:o=Position.Top}){const[f,u]=getControl({pos:t,x1:r,y1:e,x2:a,y2:s}),[h,x]=getControl({pos:o,x1:a,y1:s,x2:r,y2:e}),[m,w,A,D]=getBezierEdgeCenter({sourceX:r,sourceY:e,targetX:a,targetY:s,sourceControlX:f,sourceControlY:u,targetControlX:h,targetControlY:x});return[`M${r},${e} C${f},${u} ${h},${x} ${a},${s}`,m,w,A,D]}const SimpleBezierEdge=reactExports.memo(({sourceX:r,sourceY:e,targetX:t,targetY:a,sourcePosition:s=Position.Bottom,targetPosition:o=Position.Top,label:f,labelStyle:u,labelShowBg:h,labelBgStyle:x,labelBgPadding:m,labelBgBorderRadius:w,style:A,markerEnd:D,markerStart:I,interactionWidth:y})=>{const[l,c,L]=getSimpleBezierPath({sourceX:r,sourceY:e,sourcePosition:s,targetX:t,targetY:a,targetPosition:o});return React.createElement(BaseEdge,{path:l,labelX:c,labelY:L,label:f,labelStyle:u,labelShowBg:h,labelBgStyle:x,labelBgPadding:m,labelBgBorderRadius:w,style:A,markerEnd:D,markerStart:I,interactionWidth:y})});SimpleBezierEdge.displayName="SimpleBezierEdge";const handleDirections={[Position.Left]:{x:-1,y:0},[Position.Right]:{x:1,y:0},[Position.Top]:{x:0,y:-1},[Position.Bottom]:{x:0,y:1}},getDirection=({source:r,sourcePosition:e=Position.Bottom,target:t})=>e===Position.Left||e===Position.Right?r.x<t.x?{x:1,y:0}:{x:-1,y:0}:r.y<t.y?{x:0,y:1}:{x:0,y:-1},distance=(r,e)=>Math.sqrt(Math.pow(e.x-r.x,2)+Math.pow(e.y-r.y,2));function getPoints({source:r,sourcePosition:e=Position.Bottom,target:t,targetPosition:a=Position.Top,center:s,offset:o}){const f=handleDirections[e],u=handleDirections[a],h={x:r.x+f.x*o,y:r.y+f.y*o},x={x:t.x+u.x*o,y:t.y+u.y*o},m=getDirection({source:h,sourcePosition:e,target:x}),w=m.x!==0?"x":"y",A=m[w];let D=[],I,y;const l={x:0,y:0},c={x:0,y:0},[L,R,F,$]=getEdgeCenter({sourceX:r.x,sourceY:r.y,targetX:t.x,targetY:t.y});if(f[w]*u[w]===-1){I=s.x??L,y=s.y??R;const k=[{x:I,y:h.y},{x:I,y:x.y}],B=[{x:h.x,y},{x:x.x,y}];f[w]===A?D=w==="x"?k:B:D=w==="x"?B:k}else{const k=[{x:h.x,y:x.y}],B=[{x:x.x,y:h.y}];if(w==="x"?D=f.x===A?B:k:D=f.y===A?k:B,e===a){const Pe=Math.abs(r[w]-t[w]);if(Pe<=o){const ue=Math.min(o-1,o-Pe);f[w]===A?l[w]=(h[w]>r[w]?-1:1)*ue:c[w]=(x[w]>t[w]?-1:1)*ue}}if(e!==a){const Pe=w==="x"?"y":"x",ue=f[w]===u[Pe],Oe=h[Pe]>x[Pe],we=h[Pe]<x[Pe];(f[w]===1&&(!ue&&Oe||ue&&we)||f[w]!==1&&(!ue&&we||ue&&Oe))&&(D=w==="x"?k:B)}const J={x:h.x+l.x,y:h.y+l.y},X={x:x.x+c.x,y:x.y+c.y},ae=Math.max(Math.abs(J.x-D[0].x),Math.abs(X.x-D[0].x)),He=Math.max(Math.abs(J.y-D[0].y),Math.abs(X.y-D[0].y));ae>=He?(I=(J.x+X.x)/2,y=D[0].y):(I=D[0].x,y=(J.y+X.y)/2)}return[[r,{x:h.x+l.x,y:h.y+l.y},...D,{x:x.x+c.x,y:x.y+c.y},t],I,y,F,$]}function getBend(r,e,t,a){const s=Math.min(distance(r,e)/2,distance(e,t)/2,a),{x:o,y:f}=e;if(r.x===o&&o===t.x||r.y===f&&f===t.y)return`L${o} ${f}`;if(r.y===f){const x=r.x<t.x?-1:1,m=r.y<t.y?1:-1;return`L ${o+s*x},${f}Q ${o},${f} ${o},${f+s*m}`}const u=r.x<t.x?1:-1,h=r.y<t.y?-1:1;return`L ${o},${f+s*h}Q ${o},${f} ${o+s*u},${f}`}function getSmoothStepPath({sourceX:r,sourceY:e,sourcePosition:t=Position.Bottom,targetX:a,targetY:s,targetPosition:o=Position.Top,borderRadius:f=5,centerX:u,centerY:h,offset:x=20}){const[m,w,A,D,I]=getPoints({source:{x:r,y:e},sourcePosition:t,target:{x:a,y:s},targetPosition:o,center:{x:u,y:h},offset:x});return[m.reduce((l,c,L)=>{let R="";return L>0&&L<m.length-1?R=getBend(m[L-1],c,m[L+1],f):R=`${L===0?"M":"L"}${c.x} ${c.y}`,l+=R,l},""),w,A,D,I]}const SmoothStepEdge=reactExports.memo(({sourceX:r,sourceY:e,targetX:t,targetY:a,label:s,labelStyle:o,labelShowBg:f,labelBgStyle:u,labelBgPadding:h,labelBgBorderRadius:x,style:m,sourcePosition:w=Position.Bottom,targetPosition:A=Position.Top,markerEnd:D,markerStart:I,pathOptions:y,interactionWidth:l})=>{const[c,L,R]=getSmoothStepPath({sourceX:r,sourceY:e,sourcePosition:w,targetX:t,targetY:a,targetPosition:A,borderRadius:y?.borderRadius,offset:y?.offset});return React.createElement(BaseEdge,{path:c,labelX:L,labelY:R,label:s,labelStyle:o,labelShowBg:f,labelBgStyle:u,labelBgPadding:h,labelBgBorderRadius:x,style:m,markerEnd:D,markerStart:I,interactionWidth:l})});SmoothStepEdge.displayName="SmoothStepEdge";const StepEdge=reactExports.memo(r=>React.createElement(SmoothStepEdge,{...r,pathOptions:reactExports.useMemo(()=>({borderRadius:0,offset:r.pathOptions?.offset}),[r.pathOptions?.offset])}));StepEdge.displayName="StepEdge";function getStraightPath({sourceX:r,sourceY:e,targetX:t,targetY:a}){const[s,o,f,u]=getEdgeCenter({sourceX:r,sourceY:e,targetX:t,targetY:a});return[`M ${r},${e}L ${t},${a}`,s,o,f,u]}const StraightEdge=reactExports.memo(({sourceX:r,sourceY:e,targetX:t,targetY:a,label:s,labelStyle:o,labelShowBg:f,labelBgStyle:u,labelBgPadding:h,labelBgBorderRadius:x,style:m,markerEnd:w,markerStart:A,interactionWidth:D})=>{const[I,y,l]=getStraightPath({sourceX:r,sourceY:e,targetX:t,targetY:a});return React.createElement(BaseEdge,{path:I,labelX:y,labelY:l,label:s,labelStyle:o,labelShowBg:f,labelBgStyle:u,labelBgPadding:h,labelBgBorderRadius:x,style:m,markerEnd:w,markerStart:A,interactionWidth:D})});StraightEdge.displayName="StraightEdge";function calculateControlOffset(r,e){return r>=0?.5*r:e*25*Math.sqrt(-r)}function getControlWithCurvature({pos:r,x1:e,y1:t,x2:a,y2:s,c:o}){switch(r){case Position.Left:return[e-calculateControlOffset(e-a,o),t];case Position.Right:return[e+calculateControlOffset(a-e,o),t];case Position.Top:return[e,t-calculateControlOffset(t-s,o)];case Position.Bottom:return[e,t+calculateControlOffset(s-t,o)]}}function getBezierPath({sourceX:r,sourceY:e,sourcePosition:t=Position.Bottom,targetX:a,targetY:s,targetPosition:o=Position.Top,curvature:f=.25}){const[u,h]=getControlWithCurvature({pos:t,x1:r,y1:e,x2:a,y2:s,c:f}),[x,m]=getControlWithCurvature({pos:o,x1:a,y1:s,x2:r,y2:e,c:f}),[w,A,D,I]=getBezierEdgeCenter({sourceX:r,sourceY:e,targetX:a,targetY:s,sourceControlX:u,sourceControlY:h,targetControlX:x,targetControlY:m});return[`M${r},${e} C${u},${h} ${x},${m} ${a},${s}`,w,A,D,I]}const BezierEdge=reactExports.memo(({sourceX:r,sourceY:e,targetX:t,targetY:a,sourcePosition:s=Position.Bottom,targetPosition:o=Position.Top,label:f,labelStyle:u,labelShowBg:h,labelBgStyle:x,labelBgPadding:m,labelBgBorderRadius:w,style:A,markerEnd:D,markerStart:I,pathOptions:y,interactionWidth:l})=>{const[c,L,R]=getBezierPath({sourceX:r,sourceY:e,sourcePosition:s,targetX:t,targetY:a,targetPosition:o,curvature:y?.curvature});return React.createElement(BaseEdge,{path:c,labelX:L,labelY:R,label:f,labelStyle:u,labelShowBg:h,labelBgStyle:x,labelBgPadding:m,labelBgBorderRadius:w,style:A,markerEnd:D,markerStart:I,interactionWidth:l})});BezierEdge.displayName="BezierEdge";const NodeIdContext=reactExports.createContext(null),Provider=NodeIdContext.Provider;NodeIdContext.Consumer;const useNodeId=()=>reactExports.useContext(NodeIdContext),isEdge=r=>"id"in r&&"source"in r&&"target"in r,getEdgeId=({source:r,sourceHandle:e,target:t,targetHandle:a})=>`reactflow__edge-${r}${e||""}-${t}${a||""}`,getMarkerId=(r,e)=>typeof r>"u"?"":typeof r=="string"?r:`${e?`${e}__`:""}${Object.keys(r).sort().map(a=>`${a}=${r[a]}`).join("&")}`,connectionExists=(r,e)=>e.some(t=>t.source===r.source&&t.target===r.target&&(t.sourceHandle===r.sourceHandle||!t.sourceHandle&&!r.sourceHandle)&&(t.targetHandle===r.targetHandle||!t.targetHandle&&!r.targetHandle)),addEdge=(r,e)=>{if(!r.source||!r.target)return e;let t;return isEdge(r)?t={...r}:t={...r,id:getEdgeId(r)},connectionExists(t,e)?e:e.concat(t)},pointToRendererPoint=({x:r,y:e},[t,a,s],o,[f,u])=>{const h={x:(r-t)/s,y:(e-a)/s};return o?{x:f*Math.round(h.x/f),y:u*Math.round(h.y/u)}:h},rendererPointToPoint=({x:r,y:e},[t,a,s])=>({x:r*s+t,y:e*s+a}),getNodePositionWithOrigin=(r,e=[0,0])=>{if(!r)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const t=(r.width??0)*e[0],a=(r.height??0)*e[1],s={x:r.position.x-t,y:r.position.y-a};return{...s,positionAbsolute:r.positionAbsolute?{x:r.positionAbsolute.x-t,y:r.positionAbsolute.y-a}:s}},getNodesBounds=(r,e=[0,0])=>{if(r.length===0)return{x:0,y:0,width:0,height:0};const t=r.reduce((a,s)=>{const{x:o,y:f}=getNodePositionWithOrigin(s,e).positionAbsolute;return getBoundsOfBoxes(a,rectToBox({x:o,y:f,width:s.width||0,height:s.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return boxToRect(t)},getNodesInside=(r,e,[t,a,s]=[0,0,1],o=!1,f=!1,u=[0,0])=>{const h={x:(e.x-t)/s,y:(e.y-a)/s,width:e.width/s,height:e.height/s},x=[];return r.forEach(m=>{const{width:w,height:A,selectable:D=!0,hidden:I=!1}=m;if(f&&!D||I)return!1;const{positionAbsolute:y}=getNodePositionWithOrigin(m,u),l={x:y.x,y:y.y,width:w||0,height:A||0},c=getOverlappingArea(h,l),L=typeof w>"u"||typeof A>"u"||w===null||A===null,R=o&&c>0,F=(w||0)*(A||0);(L||R||c>=F||m.dragging)&&x.push(m)}),x},getConnectedEdges=(r,e)=>{const t=r.map(a=>a.id);return e.filter(a=>t.includes(a.source)||t.includes(a.target))},getViewportForBounds=(r,e,t,a,s,o=.1)=>{const f=e/(r.width*(1+o)),u=t/(r.height*(1+o)),h=Math.min(f,u),x=clamp(h,a,s),m=r.x+r.width/2,w=r.y+r.height/2,A=e/2-m*x,D=t/2-w*x;return{x:A,y:D,zoom:x}},getD3Transition=(r,e=0)=>r.transition().duration(e);function getHandles(r,e,t,a){return(e[t]||[]).reduce((s,o)=>(`${r.id}-${o.id}-${t}`!==a&&s.push({id:o.id||null,type:t,nodeId:r.id,x:(r.positionAbsolute?.x??0)+o.x+o.width/2,y:(r.positionAbsolute?.y??0)+o.y+o.height/2}),s),[])}function getClosestHandle(r,e,t,a,s,o){const{x:f,y:u}=getEventPosition(r),x=e.elementsFromPoint(f,u).find(I=>I.classList.contains("react-flow__handle"));if(x){const I=x.getAttribute("data-nodeid");if(I){const y=getHandleType(void 0,x),l=x.getAttribute("data-handleid"),c=o({nodeId:I,id:l,type:y});if(c){const L=s.find(R=>R.nodeId===I&&R.type===y&&R.id===l);return{handle:{id:l,type:y,nodeId:I,x:L?.x||t.x,y:L?.y||t.y},validHandleResult:c}}}}let m=[],w=1/0;if(s.forEach(I=>{const y=Math.sqrt((I.x-t.x)**2+(I.y-t.y)**2);if(y<=a){const l=o(I);y<=w&&(y<w?m=[{handle:I,validHandleResult:l}]:y===w&&m.push({handle:I,validHandleResult:l}),w=y)}}),!m.length)return{handle:null,validHandleResult:defaultResult()};if(m.length===1)return m[0];const A=m.some(({validHandleResult:I})=>I.isValid),D=m.some(({handle:I})=>I.type==="target");return m.find(({handle:I,validHandleResult:y})=>D?I.type==="target":A?y.isValid:!0)||m[0]}const nullConnection={source:null,target:null,sourceHandle:null,targetHandle:null},defaultResult=()=>({handleDomNode:null,isValid:!1,connection:nullConnection,endHandle:null});function isValidHandle(r,e,t,a,s,o,f){const u=s==="target",h=f.querySelector(`.react-flow__handle[data-id="${r?.nodeId}-${r?.id}-${r?.type}"]`),x={...defaultResult(),handleDomNode:h};if(h){const m=getHandleType(void 0,h),w=h.getAttribute("data-nodeid"),A=h.getAttribute("data-handleid"),D=h.classList.contains("connectable"),I=h.classList.contains("connectableend"),y={source:u?w:t,sourceHandle:u?A:a,target:u?t:w,targetHandle:u?a:A};x.connection=y,D&&I&&(e===ConnectionMode.Strict?u&&m==="source"||!u&&m==="target":w!==t||A!==a)&&(x.endHandle={nodeId:w,handleId:A,type:m},x.isValid=o(y))}return x}function getHandleLookup({nodes:r,nodeId:e,handleId:t,handleType:a}){return r.reduce((s,o)=>{if(o[internalsSymbol]){const{handleBounds:f}=o[internalsSymbol];let u=[],h=[];f&&(u=getHandles(o,f,"source",`${e}-${t}-${a}`),h=getHandles(o,f,"target",`${e}-${t}-${a}`)),s.push(...u,...h)}return s},[])}function getHandleType(r,e){return r||(e?.classList.contains("target")?"target":e?.classList.contains("source")?"source":null)}function resetRecentHandle(r){r?.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function getConnectionStatus(r,e){let t=null;return e?t="valid":r&&!e&&(t="invalid"),t}function handlePointerDown({event:r,handleId:e,nodeId:t,onConnect:a,isTarget:s,getState:o,setState:f,isValidConnection:u,edgeUpdaterType:h,onReconnectEnd:x}){const m=getHostForElement(r.target),{connectionMode:w,domNode:A,autoPanOnConnect:D,connectionRadius:I,onConnectStart:y,panBy:l,getNodes:c,cancelConnection:L}=o();let R=0,F;const{x:$,y:b}=getEventPosition(r),k=m?.elementFromPoint($,b),B=getHandleType(h,k),J=A?.getBoundingClientRect();if(!J||!B)return;let X,ae=getEventPosition(r,J),He=!1,Pe=null,ue=!1,Oe=null;const we=getHandleLookup({nodes:c(),nodeId:t,handleId:e,handleType:B}),Ze=()=>{if(!D)return;const[Vt,_e]=calcAutoPan(ae,J);l({x:Vt,y:_e}),R=requestAnimationFrame(Ze)};f({connectionPosition:ae,connectionStatus:null,connectionNodeId:t,connectionHandleId:e,connectionHandleType:B,connectionStartHandle:{nodeId:t,handleId:e,type:B},connectionEndHandle:null}),y?.(r,{nodeId:t,handleId:e,handleType:B});function it(Vt){const{transform:_e}=o();ae=getEventPosition(Vt,J);const{handle:pr,validHandleResult:_s}=getClosestHandle(Vt,m,pointToRendererPoint(ae,_e,!1,[1,1]),I,we,Ei=>isValidHandle(Ei,w,t,e,s?"target":"source",u,m));if(F=pr,He||(Ze(),He=!0),Oe=_s.handleDomNode,Pe=_s.connection,ue=_s.isValid,f({connectionPosition:F&&ue?rendererPointToPoint({x:F.x,y:F.y},_e):ae,connectionStatus:getConnectionStatus(!!F,ue),connectionEndHandle:_s.endHandle}),!F&&!ue&&!Oe)return resetRecentHandle(X);Pe.source!==Pe.target&&Oe&&(resetRecentHandle(X),X=Oe,Oe.classList.add("connecting","react-flow__handle-connecting"),Oe.classList.toggle("valid",ue),Oe.classList.toggle("react-flow__handle-valid",ue))}function lt(Vt){(F||Oe)&&Pe&&ue&&a?.(Pe),o().onConnectEnd?.(Vt),h&&x?.(Vt),resetRecentHandle(X),L(),cancelAnimationFrame(R),He=!1,ue=!1,Pe=null,Oe=null,m.removeEventListener("mousemove",it),m.removeEventListener("mouseup",lt),m.removeEventListener("touchmove",it),m.removeEventListener("touchend",lt)}m.addEventListener("mousemove",it),m.addEventListener("mouseup",lt),m.addEventListener("touchmove",it),m.addEventListener("touchend",lt)}const alwaysValid=()=>!0,selector$f=r=>({connectionStartHandle:r.connectionStartHandle,connectOnClick:r.connectOnClick,noPanClassName:r.noPanClassName}),connectingSelector=(r,e,t)=>a=>{const{connectionStartHandle:s,connectionEndHandle:o,connectionClickStartHandle:f}=a;return{connecting:s?.nodeId===r&&s?.handleId===e&&s?.type===t||o?.nodeId===r&&o?.handleId===e&&o?.type===t,clickConnecting:f?.nodeId===r&&f?.handleId===e&&f?.type===t}},Handle=reactExports.forwardRef(({type:r="source",position:e=Position.Top,isValidConnection:t,isConnectable:a=!0,isConnectableStart:s=!0,isConnectableEnd:o=!0,id:f,onConnect:u,children:h,className:x,onMouseDown:m,onTouchStart:w,...A},D)=>{const I=f||null,y=r==="target",l=useStoreApi(),c=useNodeId(),{connectOnClick:L,noPanClassName:R}=useStore(selector$f,shallow$1),{connecting:F,clickConnecting:$}=useStore(connectingSelector(c,I,r),shallow$1);c||l.getState().onError?.("010",errorMessages.error010());const b=J=>{const{defaultEdgeOptions:X,onConnect:ae,hasDefaultEdges:He}=l.getState(),Pe={...X,...J};if(He){const{edges:ue,setEdges:Oe}=l.getState();Oe(addEdge(Pe,ue))}ae?.(Pe),u?.(Pe)},k=J=>{if(!c)return;const X=isMouseEvent(J);s&&(X&&J.button===0||!X)&&handlePointerDown({event:J,handleId:I,nodeId:c,onConnect:b,isTarget:y,getState:l.getState,setState:l.setState,isValidConnection:t||l.getState().isValidConnection||alwaysValid}),X?m?.(J):w?.(J)},B=J=>{const{onClickConnectStart:X,onClickConnectEnd:ae,connectionClickStartHandle:He,connectionMode:Pe,isValidConnection:ue}=l.getState();if(!c||!He&&!s)return;if(!He){X?.(J,{nodeId:c,handleId:I,handleType:r}),l.setState({connectionClickStartHandle:{nodeId:c,type:r,handleId:I}});return}const Oe=getHostForElement(J.target),we=t||ue||alwaysValid,{connection:Ze,isValid:it}=isValidHandle({nodeId:c,id:I,type:r},Pe,He.nodeId,He.handleId||null,He.type,we,Oe);it&&b(Ze),ae?.(J),l.setState({connectionClickStartHandle:null})};return React.createElement("div",{"data-handleid":I,"data-nodeid":c,"data-handlepos":e,"data-id":`${c}-${I}-${r}`,className:cc$1(["react-flow__handle",`react-flow__handle-${e}`,"nodrag",R,x,{source:!y,target:y,connectable:a,connectablestart:s,connectableend:o,connecting:$,connectionindicator:a&&(s&&!F||o&&F)}]),onMouseDown:k,onTouchStart:k,onClick:L?B:void 0,ref:D,...A},h)});Handle.displayName="Handle";var Handle$1=reactExports.memo(Handle);const DefaultNode=({data:r,isConnectable:e,targetPosition:t=Position.Top,sourcePosition:a=Position.Bottom})=>React.createElement(React.Fragment,null,React.createElement(Handle$1,{type:"target",position:t,isConnectable:e}),r?.label,React.createElement(Handle$1,{type:"source",position:a,isConnectable:e}));DefaultNode.displayName="DefaultNode";var DefaultNode$1=reactExports.memo(DefaultNode);const InputNode=({data:r,isConnectable:e,sourcePosition:t=Position.Bottom})=>React.createElement(React.Fragment,null,r?.label,React.createElement(Handle$1,{type:"source",position:t,isConnectable:e}));InputNode.displayName="InputNode";var InputNode$1=reactExports.memo(InputNode);const OutputNode=({data:r,isConnectable:e,targetPosition:t=Position.Top})=>React.createElement(React.Fragment,null,React.createElement(Handle$1,{type:"target",position:t,isConnectable:e}),r?.label);OutputNode.displayName="OutputNode";var OutputNode$1=reactExports.memo(OutputNode);const GroupNode=()=>null;GroupNode.displayName="GroupNode";const selector$e=r=>({selectedNodes:r.getNodes().filter(e=>e.selected),selectedEdges:r.edges.filter(e=>e.selected).map(e=>({...e}))}),selectId=r=>r.id;function areEqual(r,e){return shallow$1(r.selectedNodes.map(selectId),e.selectedNodes.map(selectId))&&shallow$1(r.selectedEdges.map(selectId),e.selectedEdges.map(selectId))}const SelectionListener=reactExports.memo(({onSelectionChange:r})=>{const e=useStoreApi(),{selectedNodes:t,selectedEdges:a}=useStore(selector$e,areEqual);return reactExports.useEffect(()=>{const s={nodes:t,edges:a};r?.(s),e.getState().onSelectionChange.forEach(o=>o(s))},[t,a,r]),null});SelectionListener.displayName="SelectionListener";const changeSelector=r=>!!r.onSelectionChange;function Wrapper$1({onSelectionChange:r}){const e=useStore(changeSelector);return r||e?React.createElement(SelectionListener,{onSelectionChange:r}):null}const selector$d=r=>({setNodes:r.setNodes,setEdges:r.setEdges,setDefaultNodesAndEdges:r.setDefaultNodesAndEdges,setMinZoom:r.setMinZoom,setMaxZoom:r.setMaxZoom,setTranslateExtent:r.setTranslateExtent,setNodeExtent:r.setNodeExtent,reset:r.reset});function useStoreUpdater(r,e){reactExports.useEffect(()=>{typeof r<"u"&&e(r)},[r])}function useDirectStoreUpdater(r,e,t){reactExports.useEffect(()=>{typeof e<"u"&&t({[r]:e})},[e])}const StoreUpdater=({nodes:r,edges:e,defaultNodes:t,defaultEdges:a,onConnect:s,onConnectStart:o,onConnectEnd:f,onClickConnectStart:u,onClickConnectEnd:h,nodesDraggable:x,nodesConnectable:m,nodesFocusable:w,edgesFocusable:A,edgesUpdatable:D,elevateNodesOnSelect:I,minZoom:y,maxZoom:l,nodeExtent:c,onNodesChange:L,onEdgesChange:R,elementsSelectable:F,connectionMode:$,snapGrid:b,snapToGrid:k,translateExtent:B,connectOnClick:J,defaultEdgeOptions:X,fitView:ae,fitViewOptions:He,onNodesDelete:Pe,onEdgesDelete:ue,onNodeDrag:Oe,onNodeDragStart:we,onNodeDragStop:Ze,onSelectionDrag:it,onSelectionDragStart:lt,onSelectionDragStop:Vt,noPanClassName:_e,nodeOrigin:pr,rfId:_s,autoPanOnConnect:Ei,autoPanOnNodeDrag:Bl,onError:Wl,connectionRadius:Ep,isValidConnection:Lp,nodeDragThreshold:Op})=>{const{setNodes:R0,setEdges:N0,setDefaultNodesAndEdges:Qp,setMinZoom:O0,setMaxZoom:zp,setTranslateExtent:M0,setNodeExtent:W0,reset:im}=useStore(selector$d,shallow$1),F0=useStoreApi();return reactExports.useEffect(()=>{const fm=a?.map(cm=>({...cm,...X}));return Qp(t,fm),()=>{im()}},[]),useDirectStoreUpdater("defaultEdgeOptions",X,F0.setState),useDirectStoreUpdater("connectionMode",$,F0.setState),useDirectStoreUpdater("onConnect",s,F0.setState),useDirectStoreUpdater("onConnectStart",o,F0.setState),useDirectStoreUpdater("onConnectEnd",f,F0.setState),useDirectStoreUpdater("onClickConnectStart",u,F0.setState),useDirectStoreUpdater("onClickConnectEnd",h,F0.setState),useDirectStoreUpdater("nodesDraggable",x,F0.setState),useDirectStoreUpdater("nodesConnectable",m,F0.setState),useDirectStoreUpdater("nodesFocusable",w,F0.setState),useDirectStoreUpdater("edgesFocusable",A,F0.setState),useDirectStoreUpdater("edgesUpdatable",D,F0.setState),useDirectStoreUpdater("elementsSelectable",F,F0.setState),useDirectStoreUpdater("elevateNodesOnSelect",I,F0.setState),useDirectStoreUpdater("snapToGrid",k,F0.setState),useDirectStoreUpdater("snapGrid",b,F0.setState),useDirectStoreUpdater("onNodesChange",L,F0.setState),useDirectStoreUpdater("onEdgesChange",R,F0.setState),useDirectStoreUpdater("connectOnClick",J,F0.setState),useDirectStoreUpdater("fitViewOnInit",ae,F0.setState),useDirectStoreUpdater("fitViewOnInitOptions",He,F0.setState),useDirectStoreUpdater("onNodesDelete",Pe,F0.setState),useDirectStoreUpdater("onEdgesDelete",ue,F0.setState),useDirectStoreUpdater("onNodeDrag",Oe,F0.setState),useDirectStoreUpdater("onNodeDragStart",we,F0.setState),useDirectStoreUpdater("onNodeDragStop",Ze,F0.setState),useDirectStoreUpdater("onSelectionDrag",it,F0.setState),useDirectStoreUpdater("onSelectionDragStart",lt,F0.setState),useDirectStoreUpdater("onSelectionDragStop",Vt,F0.setState),useDirectStoreUpdater("noPanClassName",_e,F0.setState),useDirectStoreUpdater("nodeOrigin",pr,F0.setState),useDirectStoreUpdater("rfId",_s,F0.setState),useDirectStoreUpdater("autoPanOnConnect",Ei,F0.setState),useDirectStoreUpdater("autoPanOnNodeDrag",Bl,F0.setState),useDirectStoreUpdater("onError",Wl,F0.setState),useDirectStoreUpdater("connectionRadius",Ep,F0.setState),useDirectStoreUpdater("isValidConnection",Lp,F0.setState),useDirectStoreUpdater("nodeDragThreshold",Op,F0.setState),useStoreUpdater(r,R0),useStoreUpdater(e,N0),useStoreUpdater(y,O0),useStoreUpdater(l,zp),useStoreUpdater(B,M0),useStoreUpdater(c,W0),null},style={display:"none"},ariaLiveStyle={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},ARIA_NODE_DESC_KEY="react-flow__node-desc",ARIA_EDGE_DESC_KEY="react-flow__edge-desc",ARIA_LIVE_MESSAGE="react-flow__aria-live",selector$c=r=>r.ariaLiveMessage;function AriaLiveMessage({rfId:r}){const e=useStore(selector$c);return React.createElement("div",{id:`${ARIA_LIVE_MESSAGE}-${r}`,"aria-live":"assertive","aria-atomic":"true",style:ariaLiveStyle},e)}function A11yDescriptions({rfId:r,disableKeyboardA11y:e}){return React.createElement(React.Fragment,null,React.createElement("div",{id:`${ARIA_NODE_DESC_KEY}-${r}`,style},"Press enter or space to select a node.",!e&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),React.createElement("div",{id:`${ARIA_EDGE_DESC_KEY}-${r}`,style},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!e&&React.createElement(AriaLiveMessage,{rfId:r}))}var useKeyPress=(r=null,e={actInsideInputWithModifier:!0})=>{const[t,a]=reactExports.useState(!1),s=reactExports.useRef(!1),o=reactExports.useRef(new Set([])),[f,u]=reactExports.useMemo(()=>{if(r!==null){const x=(Array.isArray(r)?r:[r]).filter(w=>typeof w=="string").map(w=>w.split("+")),m=x.reduce((w,A)=>w.concat(...A),[]);return[x,m]}return[[],[]]},[r]);return reactExports.useEffect(()=>{const h=typeof document<"u"?document:null,x=e?.target||h;if(r!==null){const m=D=>{if(s.current=D.ctrlKey||D.metaKey||D.shiftKey,(!s.current||s.current&&!e.actInsideInputWithModifier)&&isInputDOMNode(D))return!1;const y=useKeyOrCode(D.code,u);o.current.add(D[y]),isMatchingKey(f,o.current,!1)&&(D.preventDefault(),a(!0))},w=D=>{if((!s.current||s.current&&!e.actInsideInputWithModifier)&&isInputDOMNode(D))return!1;const y=useKeyOrCode(D.code,u);isMatchingKey(f,o.current,!0)?(a(!1),o.current.clear()):o.current.delete(D[y]),D.key==="Meta"&&o.current.clear(),s.current=!1},A=()=>{o.current.clear(),a(!1)};return x?.addEventListener("keydown",m),x?.addEventListener("keyup",w),window.addEventListener("blur",A),()=>{x?.removeEventListener("keydown",m),x?.removeEventListener("keyup",w),window.removeEventListener("blur",A)}}},[r,a]),t};function isMatchingKey(r,e,t){return r.filter(a=>t||a.length===e.size).some(a=>a.every(s=>e.has(s)))}function useKeyOrCode(r,e){return e.includes(r)?"code":"key"}function calculateXYZPosition(r,e,t,a){const s=r.parentNode||r.parentId;if(!s)return t;const o=e.get(s),f=getNodePositionWithOrigin(o,a);return calculateXYZPosition(o,e,{x:(t.x??0)+f.x,y:(t.y??0)+f.y,z:(o[internalsSymbol]?.z??0)>(t.z??0)?o[internalsSymbol]?.z??0:t.z??0},a)}function updateAbsoluteNodePositions(r,e,t){r.forEach(a=>{const s=a.parentNode||a.parentId;if(s&&!r.has(s))throw new Error(`Parent node ${s} not found`);if(s||t?.[a.id]){const{x:o,y:f,z:u}=calculateXYZPosition(a,r,{...a.position,z:a[internalsSymbol]?.z??0},e);a.positionAbsolute={x:o,y:f},a[internalsSymbol].z=u,t?.[a.id]&&(a[internalsSymbol].isParent=!0)}})}function createNodeInternals(r,e,t,a){const s=new Map,o={},f=a?1e3:0;return r.forEach(u=>{const h=(isNumeric(u.zIndex)?u.zIndex:0)+(u.selected?f:0),x=e.get(u.id),m={...u,positionAbsolute:{x:u.position.x,y:u.position.y}},w=u.parentNode||u.parentId;w&&(o[w]=!0);const A=x?.type&&x?.type!==u.type;Object.defineProperty(m,internalsSymbol,{enumerable:!1,value:{handleBounds:A?void 0:x?.[internalsSymbol]?.handleBounds,z:h}}),s.set(u.id,m)}),updateAbsoluteNodePositions(s,t,o),s}function fitView(r,e={}){const{getNodes:t,width:a,height:s,minZoom:o,maxZoom:f,d3Zoom:u,d3Selection:h,fitViewOnInitDone:x,fitViewOnInit:m,nodeOrigin:w}=r(),A=e.initial&&!x&&m;if(u&&h&&(A||!e.initial)){const I=t().filter(l=>{const c=e.includeHiddenNodes?l.width&&l.height:!l.hidden;return e.nodes?.length?c&&e.nodes.some(L=>L.id===l.id):c}),y=I.every(l=>l.width&&l.height);if(I.length>0&&y){const l=getNodesBounds(I,w),{x:c,y:L,zoom:R}=getViewportForBounds(l,a,s,e.minZoom??o,e.maxZoom??f,e.padding??.1),F=identity.translate(c,L).scale(R);return typeof e.duration=="number"&&e.duration>0?u.transform(getD3Transition(h,e.duration),F):u.transform(h,F),!0}}return!1}function handleControlledNodeSelectionChange(r,e){return r.forEach(t=>{const a=e.get(t.id);a&&e.set(a.id,{...a,[internalsSymbol]:a[internalsSymbol],selected:t.selected})}),new Map(e)}function handleControlledEdgeSelectionChange(r,e){return e.map(t=>{const a=r.find(s=>s.id===t.id);return a&&(t.selected=a.selected),t})}function updateNodesAndEdgesSelections({changedNodes:r,changedEdges:e,get:t,set:a}){const{nodeInternals:s,edges:o,onNodesChange:f,onEdgesChange:u,hasDefaultNodes:h,hasDefaultEdges:x}=t();r?.length&&(h&&a({nodeInternals:handleControlledNodeSelectionChange(r,s)}),f?.(r)),e?.length&&(x&&a({edges:handleControlledEdgeSelectionChange(e,o)}),u?.(e))}const noop=()=>{},initialViewportHelper={zoomIn:noop,zoomOut:noop,zoomTo:noop,getZoom:()=>1,setViewport:noop,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:noop,fitBounds:noop,project:r=>r,screenToFlowPosition:r=>r,flowToScreenPosition:r=>r,viewportInitialized:!1},selector$b=r=>({d3Zoom:r.d3Zoom,d3Selection:r.d3Selection}),useViewportHelper=()=>{const r=useStoreApi(),{d3Zoom:e,d3Selection:t}=useStore(selector$b,shallow$1);return reactExports.useMemo(()=>t&&e?{zoomIn:s=>e.scaleBy(getD3Transition(t,s?.duration),1.2),zoomOut:s=>e.scaleBy(getD3Transition(t,s?.duration),1/1.2),zoomTo:(s,o)=>e.scaleTo(getD3Transition(t,o?.duration),s),getZoom:()=>r.getState().transform[2],setViewport:(s,o)=>{const[f,u,h]=r.getState().transform,x=identity.translate(s.x??f,s.y??u).scale(s.zoom??h);e.transform(getD3Transition(t,o?.duration),x)},getViewport:()=>{const[s,o,f]=r.getState().transform;return{x:s,y:o,zoom:f}},fitView:s=>fitView(r.getState,s),setCenter:(s,o,f)=>{const{width:u,height:h,maxZoom:x}=r.getState(),m=typeof f?.zoom<"u"?f.zoom:x,w=u/2-s*m,A=h/2-o*m,D=identity.translate(w,A).scale(m);e.transform(getD3Transition(t,f?.duration),D)},fitBounds:(s,o)=>{const{width:f,height:u,minZoom:h,maxZoom:x}=r.getState(),{x:m,y:w,zoom:A}=getViewportForBounds(s,f,u,h,x,o?.padding??.1),D=identity.translate(m,w).scale(A);e.transform(getD3Transition(t,o?.duration),D)},project:s=>{const{transform:o,snapToGrid:f,snapGrid:u}=r.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),pointToRendererPoint(s,o,f,u)},screenToFlowPosition:s=>{const{transform:o,snapToGrid:f,snapGrid:u,domNode:h}=r.getState();if(!h)return s;const{x,y:m}=h.getBoundingClientRect(),w={x:s.x-x,y:s.y-m};return pointToRendererPoint(w,o,f,u)},flowToScreenPosition:s=>{const{transform:o,domNode:f}=r.getState();if(!f)return s;const{x:u,y:h}=f.getBoundingClientRect(),x=rendererPointToPoint(s,o);return{x:x.x+u,y:x.y+h}},viewportInitialized:!0}:initialViewportHelper,[e,t])};function useReactFlow(){const r=useViewportHelper(),e=useStoreApi(),t=reactExports.useCallback(()=>e.getState().getNodes().map(y=>({...y})),[]),a=reactExports.useCallback(y=>e.getState().nodeInternals.get(y),[]),s=reactExports.useCallback(()=>{const{edges:y=[]}=e.getState();return y.map(l=>({...l}))},[]),o=reactExports.useCallback(y=>{const{edges:l=[]}=e.getState();return l.find(c=>c.id===y)},[]),f=reactExports.useCallback(y=>{const{getNodes:l,setNodes:c,hasDefaultNodes:L,onNodesChange:R}=e.getState(),F=l(),$=typeof y=="function"?y(F):y;if(L)c($);else if(R){const b=$.length===0?F.map(k=>({type:"remove",id:k.id})):$.map(k=>({item:k,type:"reset"}));R(b)}},[]),u=reactExports.useCallback(y=>{const{edges:l=[],setEdges:c,hasDefaultEdges:L,onEdgesChange:R}=e.getState(),F=typeof y=="function"?y(l):y;if(L)c(F);else if(R){const $=F.length===0?l.map(b=>({type:"remove",id:b.id})):F.map(b=>({item:b,type:"reset"}));R($)}},[]),h=reactExports.useCallback(y=>{const l=Array.isArray(y)?y:[y],{getNodes:c,setNodes:L,hasDefaultNodes:R,onNodesChange:F}=e.getState();if(R){const b=[...c(),...l];L(b)}else if(F){const $=l.map(b=>({item:b,type:"add"}));F($)}},[]),x=reactExports.useCallback(y=>{const l=Array.isArray(y)?y:[y],{edges:c=[],setEdges:L,hasDefaultEdges:R,onEdgesChange:F}=e.getState();if(R)L([...c,...l]);else if(F){const $=l.map(b=>({item:b,type:"add"}));F($)}},[]),m=reactExports.useCallback(()=>{const{getNodes:y,edges:l=[],transform:c}=e.getState(),[L,R,F]=c;return{nodes:y().map($=>({...$})),edges:l.map($=>({...$})),viewport:{x:L,y:R,zoom:F}}},[]),w=reactExports.useCallback(({nodes:y,edges:l})=>{const{nodeInternals:c,getNodes:L,edges:R,hasDefaultNodes:F,hasDefaultEdges:$,onNodesDelete:b,onEdgesDelete:k,onNodesChange:B,onEdgesChange:J}=e.getState(),X=(y||[]).map(Oe=>Oe.id),ae=(l||[]).map(Oe=>Oe.id),He=L().reduce((Oe,we)=>{const Ze=we.parentNode||we.parentId,it=!X.includes(we.id)&&Ze&&Oe.find(Vt=>Vt.id===Ze);return(typeof we.deletable=="boolean"?we.deletable:!0)&&(X.includes(we.id)||it)&&Oe.push(we),Oe},[]),Pe=R.filter(Oe=>typeof Oe.deletable=="boolean"?Oe.deletable:!0),ue=Pe.filter(Oe=>ae.includes(Oe.id));if(He||ue){const Oe=getConnectedEdges(He,Pe),we=[...ue,...Oe],Ze=we.reduce((it,lt)=>(it.includes(lt.id)||it.push(lt.id),it),[]);if(($||F)&&($&&e.setState({edges:R.filter(it=>!Ze.includes(it.id))}),F&&(He.forEach(it=>{c.delete(it.id)}),e.setState({nodeInternals:new Map(c)}))),Ze.length>0&&(k?.(we),J&&J(Ze.map(it=>({id:it,type:"remove"})))),He.length>0&&(b?.(He),B)){const it=He.map(lt=>({id:lt.id,type:"remove"}));B(it)}}},[]),A=reactExports.useCallback(y=>{const l=isRectObject(y),c=l?null:e.getState().nodeInternals.get(y.id);return!l&&!c?[null,null,l]:[l?y:nodeToRect(c),c,l]},[]),D=reactExports.useCallback((y,l=!0,c)=>{const[L,R,F]=A(y);return L?(c||e.getState().getNodes()).filter($=>{if(!F&&($.id===R.id||!$.positionAbsolute))return!1;const b=nodeToRect($),k=getOverlappingArea(b,L);return l&&k>0||k>=L.width*L.height}):[]},[]),I=reactExports.useCallback((y,l,c=!0)=>{const[L]=A(y);if(!L)return!1;const R=getOverlappingArea(L,l);return c&&R>0||R>=L.width*L.height},[]);return reactExports.useMemo(()=>({...r,getNodes:t,getNode:a,getEdges:s,getEdge:o,setNodes:f,setEdges:u,addNodes:h,addEdges:x,toObject:m,deleteElements:w,getIntersectingNodes:D,isNodeIntersecting:I}),[r,t,a,s,o,f,u,h,x,m,w,D,I])}const deleteKeyOptions={actInsideInputWithModifier:!1};var useGlobalKeyHandler=({deleteKeyCode:r,multiSelectionKeyCode:e})=>{const t=useStoreApi(),{deleteElements:a}=useReactFlow(),s=useKeyPress(r,deleteKeyOptions),o=useKeyPress(e);reactExports.useEffect(()=>{if(s){const{edges:f,getNodes:u}=t.getState(),h=u().filter(m=>m.selected),x=f.filter(m=>m.selected);a({nodes:h,edges:x}),t.setState({nodesSelectionActive:!1})}},[s]),reactExports.useEffect(()=>{t.setState({multiSelectionActive:o})},[o])};function useResizeHandler(r){const e=useStoreApi();reactExports.useEffect(()=>{let t;const a=()=>{if(!r.current)return;const s=getDimensions(r.current);(s.height===0||s.width===0)&&e.getState().onError?.("004",errorMessages.error004()),e.setState({width:s.width||500,height:s.height||500})};return a(),window.addEventListener("resize",a),r.current&&(t=new ResizeObserver(()=>a()),t.observe(r.current)),()=>{window.removeEventListener("resize",a),t&&r.current&&t.unobserve(r.current)}},[])}const containerStyle={position:"absolute",width:"100%",height:"100%",top:0,left:0},viewChanged=(r,e)=>r.x!==e.x||r.y!==e.y||r.zoom!==e.k,eventToFlowTransform=r=>({x:r.x,y:r.y,zoom:r.k}),isWrappedWithClass=(r,e)=>r.target.closest(`.${e}`),isRightClickPan=(r,e)=>e===2&&Array.isArray(r)&&r.includes(2),wheelDelta=r=>{const e=r.ctrlKey&&isMacOs()?10:1;return-r.deltaY*(r.deltaMode===1?.05:r.deltaMode?1:.002)*e},selector$a=r=>({d3Zoom:r.d3Zoom,d3Selection:r.d3Selection,d3ZoomHandler:r.d3ZoomHandler,userSelectionActive:r.userSelectionActive}),ZoomPane=({onMove:r,onMoveStart:e,onMoveEnd:t,onPaneContextMenu:a,zoomOnScroll:s=!0,zoomOnPinch:o=!0,panOnScroll:f=!1,panOnScrollSpeed:u=.5,panOnScrollMode:h=PanOnScrollMode.Free,zoomOnDoubleClick:x=!0,elementsSelectable:m,panOnDrag:w=!0,defaultViewport:A,translateExtent:D,minZoom:I,maxZoom:y,zoomActivationKeyCode:l,preventScrolling:c=!0,children:L,noWheelClassName:R,noPanClassName:F})=>{const $=reactExports.useRef(),b=useStoreApi(),k=reactExports.useRef(!1),B=reactExports.useRef(!1),J=reactExports.useRef(null),X=reactExports.useRef({x:0,y:0,zoom:0}),{d3Zoom:ae,d3Selection:He,d3ZoomHandler:Pe,userSelectionActive:ue}=useStore(selector$a,shallow$1),Oe=useKeyPress(l),we=reactExports.useRef(0),Ze=reactExports.useRef(!1),it=reactExports.useRef();return useResizeHandler(J),reactExports.useEffect(()=>{if(J.current){const lt=J.current.getBoundingClientRect(),Vt=zoom().scaleExtent([I,y]).translateExtent(D),_e=select(J.current).call(Vt),pr=identity.translate(A.x,A.y).scale(clamp(A.zoom,I,y)),_s=[[0,0],[lt.width,lt.height]],Ei=Vt.constrain()(pr,_s,D);Vt.transform(_e,Ei),Vt.wheelDelta(wheelDelta),b.setState({d3Zoom:Vt,d3Selection:_e,d3ZoomHandler:_e.on("wheel.zoom"),transform:[Ei.x,Ei.y,Ei.k],domNode:J.current.closest(".react-flow")})}},[]),reactExports.useEffect(()=>{He&&ae&&(f&&!Oe&&!ue?He.on("wheel.zoom",lt=>{if(isWrappedWithClass(lt,R))return!1;lt.preventDefault(),lt.stopImmediatePropagation();const Vt=He.property("__zoom").k||1;if(lt.ctrlKey&&o){const Lp=pointer(lt),Op=wheelDelta(lt),R0=Vt*Math.pow(2,Op);ae.scaleTo(He,R0,Lp,lt);return}const _e=lt.deltaMode===1?20:1;let pr=h===PanOnScrollMode.Vertical?0:lt.deltaX*_e,_s=h===PanOnScrollMode.Horizontal?0:lt.deltaY*_e;!isMacOs()&&lt.shiftKey&&h!==PanOnScrollMode.Vertical&&(pr=lt.deltaY*_e,_s=0),ae.translateBy(He,-(pr/Vt)*u,-(_s/Vt)*u,{internal:!0});const Ei=eventToFlowTransform(He.property("__zoom")),{onViewportChangeStart:Bl,onViewportChange:Wl,onViewportChangeEnd:Ep}=b.getState();clearTimeout(it.current),Ze.current||(Ze.current=!0,e?.(lt,Ei),Bl?.(Ei)),Ze.current&&(r?.(lt,Ei),Wl?.(Ei),it.current=setTimeout(()=>{t?.(lt,Ei),Ep?.(Ei),Ze.current=!1},150))},{passive:!1}):typeof Pe<"u"&&He.on("wheel.zoom",function(lt,Vt){if(!c&&lt.type==="wheel"&&!lt.ctrlKey||isWrappedWithClass(lt,R))return null;lt.preventDefault(),Pe.call(this,lt,Vt)},{passive:!1}))},[ue,f,h,He,ae,Pe,Oe,o,c,R,e,r,t]),reactExports.useEffect(()=>{ae&&ae.on("start",lt=>{if(!lt.sourceEvent||lt.sourceEvent.internal)return null;we.current=lt.sourceEvent?.button;const{onViewportChangeStart:Vt}=b.getState(),_e=eventToFlowTransform(lt.transform);k.current=!0,X.current=_e,lt.sourceEvent?.type==="mousedown"&&b.setState({paneDragging:!0}),Vt?.(_e),e?.(lt.sourceEvent,_e)})},[ae,e]),reactExports.useEffect(()=>{ae&&(ue&&!k.current?ae.on("zoom",null):ue||ae.on("zoom",lt=>{const{onViewportChange:Vt}=b.getState();if(b.setState({transform:[lt.transform.x,lt.transform.y,lt.transform.k]}),B.current=!!(a&&isRightClickPan(w,we.current??0)),(r||Vt)&&!lt.sourceEvent?.internal){const _e=eventToFlowTransform(lt.transform);Vt?.(_e),r?.(lt.sourceEvent,_e)}}))},[ue,ae,r,w,a]),reactExports.useEffect(()=>{ae&&ae.on("end",lt=>{if(!lt.sourceEvent||lt.sourceEvent.internal)return null;const{onViewportChangeEnd:Vt}=b.getState();if(k.current=!1,b.setState({paneDragging:!1}),a&&isRightClickPan(w,we.current??0)&&!B.current&&a(lt.sourceEvent),B.current=!1,(t||Vt)&&viewChanged(X.current,lt.transform)){const _e=eventToFlowTransform(lt.transform);X.current=_e,clearTimeout($.current),$.current=setTimeout(()=>{Vt?.(_e),t?.(lt.sourceEvent,_e)},f?150:0)}})},[ae,f,w,t,a]),reactExports.useEffect(()=>{ae&&ae.filter(lt=>{const Vt=Oe||s,_e=o&&lt.ctrlKey;if((w===!0||Array.isArray(w)&&w.includes(1))&&lt.button===1&&lt.type==="mousedown"&&(isWrappedWithClass(lt,"react-flow__node")||isWrappedWithClass(lt,"react-flow__edge")))return!0;if(!w&&!Vt&&!f&&!x&&!o||ue||!x&&lt.type==="dblclick"||isWrappedWithClass(lt,R)&&lt.type==="wheel"||isWrappedWithClass(lt,F)&&(lt.type!=="wheel"||f&&lt.type==="wheel"&&!Oe)||!o&&lt.ctrlKey&&lt.type==="wheel"||!Vt&&!f&&!_e&&lt.type==="wheel"||!w&&(lt.type==="mousedown"||lt.type==="touchstart")||Array.isArray(w)&&!w.includes(lt.button)&&lt.type==="mousedown")return!1;const pr=Array.isArray(w)&&w.includes(lt.button)||!lt.button||lt.button<=1;return(!lt.ctrlKey||lt.type==="wheel")&&pr})},[ue,ae,s,o,f,x,w,m,Oe]),React.createElement("div",{className:"react-flow__renderer",ref:J,style:containerStyle},L)},selector$9=r=>({userSelectionActive:r.userSelectionActive,userSelectionRect:r.userSelectionRect});function UserSelection(){const{userSelectionActive:r,userSelectionRect:e}=useStore(selector$9,shallow$1);return r&&e?React.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:e.width,height:e.height,transform:`translate(${e.x}px, ${e.y}px)`}}):null}function handleParentExpand(r,e){const t=e.parentNode||e.parentId,a=r.find(s=>s.id===t);if(a){const s=e.position.x+e.width-a.width,o=e.position.y+e.height-a.height;if(s>0||o>0||e.position.x<0||e.position.y<0){if(a.style={...a.style},a.style.width=a.style.width??a.width,a.style.height=a.style.height??a.height,s>0&&(a.style.width+=s),o>0&&(a.style.height+=o),e.position.x<0){const f=Math.abs(e.position.x);a.position.x=a.position.x-f,a.style.width+=f,e.position.x=0}if(e.position.y<0){const f=Math.abs(e.position.y);a.position.y=a.position.y-f,a.style.height+=f,e.position.y=0}a.width=a.style.width,a.height=a.style.height}}}function applyChanges(r,e){if(r.some(a=>a.type==="reset"))return r.filter(a=>a.type==="reset").map(a=>a.item);const t=r.filter(a=>a.type==="add").map(a=>a.item);return e.reduce((a,s)=>{const o=r.filter(u=>u.id===s.id);if(o.length===0)return a.push(s),a;const f={...s};for(const u of o)if(u)switch(u.type){case"select":{f.selected=u.selected;break}case"position":{typeof u.position<"u"&&(f.position=u.position),typeof u.positionAbsolute<"u"&&(f.positionAbsolute=u.positionAbsolute),typeof u.dragging<"u"&&(f.dragging=u.dragging),f.expandParent&&handleParentExpand(a,f);break}case"dimensions":{typeof u.dimensions<"u"&&(f.width=u.dimensions.width,f.height=u.dimensions.height),typeof u.updateStyle<"u"&&(f.style={...f.style||{},...u.dimensions}),typeof u.resizing=="boolean"&&(f.resizing=u.resizing),f.expandParent&&handleParentExpand(a,f);break}case"remove":return a}return a.push(f),a},t)}function applyNodeChanges(r,e){return applyChanges(r,e)}function applyEdgeChanges(r,e){return applyChanges(r,e)}const createSelectionChange=(r,e)=>({id:r,type:"select",selected:e});function getSelectionChanges(r,e){return r.reduce((t,a)=>{const s=e.includes(a.id);return!a.selected&&s?(a.selected=!0,t.push(createSelectionChange(a.id,!0))):a.selected&&!s&&(a.selected=!1,t.push(createSelectionChange(a.id,!1))),t},[])}const wrapHandler=(r,e)=>t=>{t.target===e.current&&r?.(t)},selector$8=r=>({userSelectionActive:r.userSelectionActive,elementsSelectable:r.elementsSelectable,dragging:r.paneDragging}),Pane=reactExports.memo(({isSelecting:r,selectionMode:e=SelectionMode.Full,panOnDrag:t,onSelectionStart:a,onSelectionEnd:s,onPaneClick:o,onPaneContextMenu:f,onPaneScroll:u,onPaneMouseEnter:h,onPaneMouseMove:x,onPaneMouseLeave:m,children:w})=>{const A=reactExports.useRef(null),D=useStoreApi(),I=reactExports.useRef(0),y=reactExports.useRef(0),l=reactExports.useRef(),{userSelectionActive:c,elementsSelectable:L,dragging:R}=useStore(selector$8,shallow$1),F=()=>{D.setState({userSelectionActive:!1,userSelectionRect:null}),I.current=0,y.current=0},$=Pe=>{o?.(Pe),D.getState().resetSelectedElements(),D.setState({nodesSelectionActive:!1})},b=Pe=>{if(Array.isArray(t)&&t?.includes(2)){Pe.preventDefault();return}f?.(Pe)},k=u?Pe=>u(Pe):void 0,B=Pe=>{const{resetSelectedElements:ue,domNode:Oe}=D.getState();if(l.current=Oe?.getBoundingClientRect(),!L||!r||Pe.button!==0||Pe.target!==A.current||!l.current)return;const{x:we,y:Ze}=getEventPosition(Pe,l.current);ue(),D.setState({userSelectionRect:{width:0,height:0,startX:we,startY:Ze,x:we,y:Ze}}),a?.(Pe)},J=Pe=>{const{userSelectionRect:ue,nodeInternals:Oe,edges:we,transform:Ze,onNodesChange:it,onEdgesChange:lt,nodeOrigin:Vt,getNodes:_e}=D.getState();if(!r||!l.current||!ue)return;D.setState({userSelectionActive:!0,nodesSelectionActive:!1});const pr=getEventPosition(Pe,l.current),_s=ue.startX??0,Ei=ue.startY??0,Bl={...ue,x:pr.x<_s?pr.x:_s,y:pr.y<Ei?pr.y:Ei,width:Math.abs(pr.x-_s),height:Math.abs(pr.y-Ei)},Wl=_e(),Ep=getNodesInside(Oe,Bl,Ze,e===SelectionMode.Partial,!0,Vt),Lp=getConnectedEdges(Ep,we).map(R0=>R0.id),Op=Ep.map(R0=>R0.id);if(I.current!==Op.length){I.current=Op.length;const R0=getSelectionChanges(Wl,Op);R0.length&&it?.(R0)}if(y.current!==Lp.length){y.current=Lp.length;const R0=getSelectionChanges(we,Lp);R0.length&&lt?.(R0)}D.setState({userSelectionRect:Bl})},X=Pe=>{if(Pe.button!==0)return;const{userSelectionRect:ue}=D.getState();!c&&ue&&Pe.target===A.current&&$?.(Pe),D.setState({nodesSelectionActive:I.current>0}),F(),s?.(Pe)},ae=Pe=>{c&&(D.setState({nodesSelectionActive:I.current>0}),s?.(Pe)),F()},He=L&&(r||c);return React.createElement("div",{className:cc$1(["react-flow__pane",{dragging:R,selection:r}]),onClick:He?void 0:wrapHandler($,A),onContextMenu:wrapHandler(b,A),onWheel:wrapHandler(k,A),onMouseEnter:He?void 0:h,onMouseDown:He?B:void 0,onMouseMove:He?J:x,onMouseUp:He?X:void 0,onMouseLeave:He?ae:m,ref:A,style:containerStyle},w,React.createElement(UserSelection,null))});Pane.displayName="Pane";function isParentSelected(r,e){const t=r.parentNode||r.parentId;if(!t)return!1;const a=e.get(t);return a?a.selected?!0:isParentSelected(a,e):!1}function hasSelector(r,e,t){let a=r;do{if(a?.matches(e))return!0;if(a===t.current)return!1;a=a.parentElement}while(a);return!1}function getDragItems(r,e,t,a){return Array.from(r.values()).filter(s=>(s.selected||s.id===a)&&(!s.parentNode||s.parentId||!isParentSelected(s,r))&&(s.draggable||e&&typeof s.draggable>"u")).map(s=>({id:s.id,position:s.position||{x:0,y:0},positionAbsolute:s.positionAbsolute||{x:0,y:0},distance:{x:t.x-(s.positionAbsolute?.x??0),y:t.y-(s.positionAbsolute?.y??0)},delta:{x:0,y:0},extent:s.extent,parentNode:s.parentNode||s.parentId,parentId:s.parentNode||s.parentId,width:s.width,height:s.height,expandParent:s.expandParent}))}function clampNodeExtent(r,e){return!e||e==="parent"?e:[e[0],[e[1][0]-(r.width||0),e[1][1]-(r.height||0)]]}function calcNextPosition(r,e,t,a,s=[0,0],o){const f=clampNodeExtent(r,r.extent||a);let u=f;const h=r.parentNode||r.parentId;if(r.extent==="parent"&&!r.expandParent)if(h&&r.width&&r.height){const w=t.get(h),{x:A,y:D}=getNodePositionWithOrigin(w,s).positionAbsolute;u=w&&isNumeric(A)&&isNumeric(D)&&isNumeric(w.width)&&isNumeric(w.height)?[[A+r.width*s[0],D+r.height*s[1]],[A+w.width-r.width+r.width*s[0],D+w.height-r.height+r.height*s[1]]]:u}else o?.("005",errorMessages.error005()),u=f;else if(r.extent&&h&&r.extent!=="parent"){const w=t.get(h),{x:A,y:D}=getNodePositionWithOrigin(w,s).positionAbsolute;u=[[r.extent[0][0]+A,r.extent[0][1]+D],[r.extent[1][0]+A,r.extent[1][1]+D]]}let x={x:0,y:0};if(h){const w=t.get(h);x=getNodePositionWithOrigin(w,s).positionAbsolute}const m=u&&u!=="parent"?clampPosition(e,u):e;return{position:{x:m.x-x.x,y:m.y-x.y},positionAbsolute:m}}function getEventHandlerParams({nodeId:r,dragItems:e,nodeInternals:t}){const a=e.map(s=>({...t.get(s.id),position:s.position,positionAbsolute:s.positionAbsolute}));return[r?a.find(s=>s.id===r):a[0],a]}const getHandleBounds=(r,e,t,a)=>{const s=e.querySelectorAll(r);if(!s||!s.length)return null;const o=Array.from(s),f=e.getBoundingClientRect(),u={x:f.width*a[0],y:f.height*a[1]};return o.map(h=>{const x=h.getBoundingClientRect();return{id:h.getAttribute("data-handleid"),position:h.getAttribute("data-handlepos"),x:(x.left-f.left-u.x)/t,y:(x.top-f.top-u.y)/t,...getDimensions(h)}})};function getMouseHandler(r,e,t){return t===void 0?t:a=>{const s=e().nodeInternals.get(r);s&&t(a,{...s})}}function handleNodeClick({id:r,store:e,unselect:t=!1,nodeRef:a}){const{addSelectedNodes:s,unselectNodesAndEdges:o,multiSelectionActive:f,nodeInternals:u,onError:h}=e.getState(),x=u.get(r);if(!x){h?.("012",errorMessages.error012(r));return}e.setState({nodesSelectionActive:!1}),x.selected?(t||x.selected&&f)&&(o({nodes:[x],edges:[]}),requestAnimationFrame(()=>a?.current?.blur())):s([r])}function useGetPointerPosition(){const r=useStoreApi();return reactExports.useCallback(({sourceEvent:t})=>{const{transform:a,snapGrid:s,snapToGrid:o}=r.getState(),f=t.touches?t.touches[0].clientX:t.clientX,u=t.touches?t.touches[0].clientY:t.clientY,h={x:(f-a[0])/a[2],y:(u-a[1])/a[2]};return{xSnapped:o?s[0]*Math.round(h.x/s[0]):h.x,ySnapped:o?s[1]*Math.round(h.y/s[1]):h.y,...h}},[])}function wrapSelectionDragFunc(r){return(e,t,a)=>r?.(e,a)}function useDrag({nodeRef:r,disabled:e=!1,noDragClassName:t,handleSelector:a,nodeId:s,isSelectable:o,selectNodesOnDrag:f}){const u=useStoreApi(),[h,x]=reactExports.useState(!1),m=reactExports.useRef([]),w=reactExports.useRef({x:null,y:null}),A=reactExports.useRef(0),D=reactExports.useRef(null),I=reactExports.useRef({x:0,y:0}),y=reactExports.useRef(null),l=reactExports.useRef(!1),c=reactExports.useRef(!1),L=reactExports.useRef(!1),R=useGetPointerPosition();return reactExports.useEffect(()=>{if(r?.current){const F=select(r.current),$=({x:B,y:J})=>{const{nodeInternals:X,onNodeDrag:ae,onSelectionDrag:He,updateNodePositions:Pe,nodeExtent:ue,snapGrid:Oe,snapToGrid:we,nodeOrigin:Ze,onError:it}=u.getState();w.current={x:B,y:J};let lt=!1,Vt={x:0,y:0,x2:0,y2:0};if(m.current.length>1&&ue){const pr=getNodesBounds(m.current,Ze);Vt=rectToBox(pr)}if(m.current=m.current.map(pr=>{const _s={x:B-pr.distance.x,y:J-pr.distance.y};we&&(_s.x=Oe[0]*Math.round(_s.x/Oe[0]),_s.y=Oe[1]*Math.round(_s.y/Oe[1]));const Ei=[[ue[0][0],ue[0][1]],[ue[1][0],ue[1][1]]];m.current.length>1&&ue&&!pr.extent&&(Ei[0][0]=pr.positionAbsolute.x-Vt.x+ue[0][0],Ei[1][0]=pr.positionAbsolute.x+(pr.width??0)-Vt.x2+ue[1][0],Ei[0][1]=pr.positionAbsolute.y-Vt.y+ue[0][1],Ei[1][1]=pr.positionAbsolute.y+(pr.height??0)-Vt.y2+ue[1][1]);const Bl=calcNextPosition(pr,_s,X,Ei,Ze,it);return lt=lt||pr.position.x!==Bl.position.x||pr.position.y!==Bl.position.y,pr.position=Bl.position,pr.positionAbsolute=Bl.positionAbsolute,pr}),!lt)return;Pe(m.current,!0,!0),x(!0);const _e=s?ae:wrapSelectionDragFunc(He);if(_e&&y.current){const[pr,_s]=getEventHandlerParams({nodeId:s,dragItems:m.current,nodeInternals:X});_e(y.current,pr,_s)}},b=()=>{if(!D.current)return;const[B,J]=calcAutoPan(I.current,D.current);if(B!==0||J!==0){const{transform:X,panBy:ae}=u.getState();w.current.x=(w.current.x??0)-B/X[2],w.current.y=(w.current.y??0)-J/X[2],ae({x:B,y:J})&&$(w.current)}A.current=requestAnimationFrame(b)},k=B=>{const{nodeInternals:J,multiSelectionActive:X,nodesDraggable:ae,unselectNodesAndEdges:He,onNodeDragStart:Pe,onSelectionDragStart:ue}=u.getState();c.current=!0;const Oe=s?Pe:wrapSelectionDragFunc(ue);(!f||!o)&&!X&&s&&(J.get(s)?.selected||He()),s&&o&&f&&handleNodeClick({id:s,store:u,nodeRef:r});const we=R(B);if(w.current=we,m.current=getDragItems(J,ae,we,s),Oe&&m.current){const[Ze,it]=getEventHandlerParams({nodeId:s,dragItems:m.current,nodeInternals:J});Oe(B.sourceEvent,Ze,it)}};if(e)F.on(".drag",null);else{const B=drag().on("start",J=>{const{domNode:X,nodeDragThreshold:ae}=u.getState();ae===0&&k(J),L.current=!1;const He=R(J);w.current=He,D.current=X?.getBoundingClientRect()||null,I.current=getEventPosition(J.sourceEvent,D.current)}).on("drag",J=>{const X=R(J),{autoPanOnNodeDrag:ae,nodeDragThreshold:He}=u.getState();if(J.sourceEvent.type==="touchmove"&&J.sourceEvent.touches.length>1&&(L.current=!0),!L.current){if(!l.current&&c.current&&ae&&(l.current=!0,b()),!c.current){const Pe=X.xSnapped-(w?.current?.x??0),ue=X.ySnapped-(w?.current?.y??0);Math.sqrt(Pe*Pe+ue*ue)>He&&k(J)}(w.current.x!==X.xSnapped||w.current.y!==X.ySnapped)&&m.current&&c.current&&(y.current=J.sourceEvent,I.current=getEventPosition(J.sourceEvent,D.current),$(X))}}).on("end",J=>{if(!(!c.current||L.current)&&(x(!1),l.current=!1,c.current=!1,cancelAnimationFrame(A.current),m.current)){const{updateNodePositions:X,nodeInternals:ae,onNodeDragStop:He,onSelectionDragStop:Pe}=u.getState(),ue=s?He:wrapSelectionDragFunc(Pe);if(X(m.current,!1,!1),ue){const[Oe,we]=getEventHandlerParams({nodeId:s,dragItems:m.current,nodeInternals:ae});ue(J.sourceEvent,Oe,we)}}}).filter(J=>{const X=J.target;return!J.button&&(!t||!hasSelector(X,`.${t}`,r))&&(!a||hasSelector(X,a,r))});return F.call(B),()=>{F.on(".drag",null)}}}},[r,e,t,a,o,u,s,f,R]),h}function useUpdateNodePositions(){const r=useStoreApi();return reactExports.useCallback(t=>{const{nodeInternals:a,nodeExtent:s,updateNodePositions:o,getNodes:f,snapToGrid:u,snapGrid:h,onError:x,nodesDraggable:m}=r.getState(),w=f().filter(L=>L.selected&&(L.draggable||m&&typeof L.draggable>"u")),A=u?h[0]:5,D=u?h[1]:5,I=t.isShiftPressed?4:1,y=t.x*A*I,l=t.y*D*I,c=w.map(L=>{if(L.positionAbsolute){const R={x:L.positionAbsolute.x+y,y:L.positionAbsolute.y+l};u&&(R.x=h[0]*Math.round(R.x/h[0]),R.y=h[1]*Math.round(R.y/h[1]));const{positionAbsolute:F,position:$}=calcNextPosition(L,R,a,s,void 0,x);L.position=$,L.positionAbsolute=F}return L});o(c,!0,!1)},[])}const arrowKeyDiffs={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var wrapNode=r=>{const e=({id:t,type:a,data:s,xPos:o,yPos:f,xPosOrigin:u,yPosOrigin:h,selected:x,onClick:m,onMouseEnter:w,onMouseMove:A,onMouseLeave:D,onContextMenu:I,onDoubleClick:y,style:l,className:c,isDraggable:L,isSelectable:R,isConnectable:F,isFocusable:$,selectNodesOnDrag:b,sourcePosition:k,targetPosition:B,hidden:J,resizeObserver:X,dragHandle:ae,zIndex:He,isParent:Pe,noDragClassName:ue,noPanClassName:Oe,initialized:we,disableKeyboardA11y:Ze,ariaLabel:it,rfId:lt,hasHandleBounds:Vt})=>{const _e=useStoreApi(),pr=reactExports.useRef(null),_s=reactExports.useRef(null),Ei=reactExports.useRef(k),Bl=reactExports.useRef(B),Wl=reactExports.useRef(a),Ep=R||L||m||w||A||D,Lp=useUpdateNodePositions(),Op=getMouseHandler(t,_e.getState,w),R0=getMouseHandler(t,_e.getState,A),N0=getMouseHandler(t,_e.getState,D),Qp=getMouseHandler(t,_e.getState,I),O0=getMouseHandler(t,_e.getState,y),zp=im=>{const{nodeDragThreshold:F0}=_e.getState();if(R&&(!b||!L||F0>0)&&handleNodeClick({id:t,store:_e,nodeRef:pr}),m){const fm=_e.getState().nodeInternals.get(t);fm&&m(im,{...fm})}},M0=im=>{if(!isInputDOMNode(im)&&!Ze)if(elementSelectionKeys.includes(im.key)&&R){const F0=im.key==="Escape";handleNodeClick({id:t,store:_e,unselect:F0,nodeRef:pr})}else L&&x&&Object.prototype.hasOwnProperty.call(arrowKeyDiffs,im.key)&&(_e.setState({ariaLiveMessage:`Moved selected node ${im.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~o}, y: ${~~f}`}),Lp({x:arrowKeyDiffs[im.key].x,y:arrowKeyDiffs[im.key].y,isShiftPressed:im.shiftKey}))};reactExports.useEffect(()=>()=>{_s.current&&(X?.unobserve(_s.current),_s.current=null)},[]),reactExports.useEffect(()=>{if(pr.current&&!J){const im=pr.current;(!we||!Vt||_s.current!==im)&&(_s.current&&X?.unobserve(_s.current),X?.observe(im),_s.current=im)}},[J,we,Vt]),reactExports.useEffect(()=>{const im=Wl.current!==a,F0=Ei.current!==k,fm=Bl.current!==B;pr.current&&(im||F0||fm)&&(im&&(Wl.current=a),F0&&(Ei.current=k),fm&&(Bl.current=B),_e.getState().updateNodeDimensions([{id:t,nodeElement:pr.current,forceUpdate:!0}]))},[t,a,k,B]);const W0=useDrag({nodeRef:pr,disabled:J||!L,noDragClassName:ue,handleSelector:ae,nodeId:t,isSelectable:R,selectNodesOnDrag:b});return J?null:React.createElement("div",{className:cc$1(["react-flow__node",`react-flow__node-${a}`,{[Oe]:L},c,{selected:x,selectable:R,parent:Pe,dragging:W0}]),ref:pr,style:{zIndex:He,transform:`translate(${u}px,${h}px)`,pointerEvents:Ep?"all":"none",visibility:we?"visible":"hidden",...l},"data-id":t,"data-testid":`rf__node-${t}`,onMouseEnter:Op,onMouseMove:R0,onMouseLeave:N0,onContextMenu:Qp,onClick:zp,onDoubleClick:O0,onKeyDown:$?M0:void 0,tabIndex:$?0:void 0,role:$?"button":void 0,"aria-describedby":Ze?void 0:`${ARIA_NODE_DESC_KEY}-${lt}`,"aria-label":it},React.createElement(Provider,{value:t},React.createElement(r,{id:t,data:s,type:a,xPos:o,yPos:f,selected:x,isConnectable:F,sourcePosition:k,targetPosition:B,dragging:W0,dragHandle:ae,zIndex:He})))};return e.displayName="NodeWrapper",reactExports.memo(e)};const selector$7=r=>{const e=r.getNodes().filter(t=>t.selected);return{...getNodesBounds(e,r.nodeOrigin),transformString:`translate(${r.transform[0]}px,${r.transform[1]}px) scale(${r.transform[2]})`,userSelectionActive:r.userSelectionActive}};function NodesSelection({onSelectionContextMenu:r,noPanClassName:e,disableKeyboardA11y:t}){const a=useStoreApi(),{width:s,height:o,x:f,y:u,transformString:h,userSelectionActive:x}=useStore(selector$7,shallow$1),m=useUpdateNodePositions(),w=reactExports.useRef(null);if(reactExports.useEffect(()=>{t||w.current?.focus({preventScroll:!0})},[t]),useDrag({nodeRef:w}),x||!s||!o)return null;const A=r?I=>{const y=a.getState().getNodes().filter(l=>l.selected);r(I,y)}:void 0,D=I=>{Object.prototype.hasOwnProperty.call(arrowKeyDiffs,I.key)&&m({x:arrowKeyDiffs[I.key].x,y:arrowKeyDiffs[I.key].y,isShiftPressed:I.shiftKey})};return React.createElement("div",{className:cc$1(["react-flow__nodesselection","react-flow__container",e]),style:{transform:h}},React.createElement("div",{ref:w,className:"react-flow__nodesselection-rect",onContextMenu:A,tabIndex:t?void 0:-1,onKeyDown:t?void 0:D,style:{width:s,height:o,top:u,left:f}}))}var NodesSelection$1=reactExports.memo(NodesSelection);const selector$6=r=>r.nodesSelectionActive,FlowRenderer=({children:r,onPaneClick:e,onPaneMouseEnter:t,onPaneMouseMove:a,onPaneMouseLeave:s,onPaneContextMenu:o,onPaneScroll:f,deleteKeyCode:u,onMove:h,onMoveStart:x,onMoveEnd:m,selectionKeyCode:w,selectionOnDrag:A,selectionMode:D,onSelectionStart:I,onSelectionEnd:y,multiSelectionKeyCode:l,panActivationKeyCode:c,zoomActivationKeyCode:L,elementsSelectable:R,zoomOnScroll:F,zoomOnPinch:$,panOnScroll:b,panOnScrollSpeed:k,panOnScrollMode:B,zoomOnDoubleClick:J,panOnDrag:X,defaultViewport:ae,translateExtent:He,minZoom:Pe,maxZoom:ue,preventScrolling:Oe,onSelectionContextMenu:we,noWheelClassName:Ze,noPanClassName:it,disableKeyboardA11y:lt})=>{const Vt=useStore(selector$6),_e=useKeyPress(w),pr=useKeyPress(c),_s=pr||X,Ei=pr||b,Bl=_e||A&&_s!==!0;return useGlobalKeyHandler({deleteKeyCode:u,multiSelectionKeyCode:l}),React.createElement(ZoomPane,{onMove:h,onMoveStart:x,onMoveEnd:m,onPaneContextMenu:o,elementsSelectable:R,zoomOnScroll:F,zoomOnPinch:$,panOnScroll:Ei,panOnScrollSpeed:k,panOnScrollMode:B,zoomOnDoubleClick:J,panOnDrag:!_e&&_s,defaultViewport:ae,translateExtent:He,minZoom:Pe,maxZoom:ue,zoomActivationKeyCode:L,preventScrolling:Oe,noWheelClassName:Ze,noPanClassName:it},React.createElement(Pane,{onSelectionStart:I,onSelectionEnd:y,onPaneClick:e,onPaneMouseEnter:t,onPaneMouseMove:a,onPaneMouseLeave:s,onPaneContextMenu:o,onPaneScroll:f,panOnDrag:_s,isSelecting:!!Bl,selectionMode:D},r,Vt&&React.createElement(NodesSelection$1,{onSelectionContextMenu:we,noPanClassName:it,disableKeyboardA11y:lt})))};FlowRenderer.displayName="FlowRenderer";var FlowRenderer$1=reactExports.memo(FlowRenderer);function useVisibleNodes(r){return useStore(reactExports.useCallback(t=>r?getNodesInside(t.nodeInternals,{x:0,y:0,width:t.width,height:t.height},t.transform,!0):t.getNodes(),[r]))}function createNodeTypes(r){const e={input:wrapNode(r.input||InputNode$1),default:wrapNode(r.default||DefaultNode$1),output:wrapNode(r.output||OutputNode$1),group:wrapNode(r.group||GroupNode)},t={},a=Object.keys(r).filter(s=>!["input","default","output","group"].includes(s)).reduce((s,o)=>(s[o]=wrapNode(r[o]||DefaultNode$1),s),t);return{...e,...a}}const getPositionWithOrigin=({x:r,y:e,width:t,height:a,origin:s})=>!t||!a?{x:r,y:e}:s[0]<0||s[1]<0||s[0]>1||s[1]>1?{x:r,y:e}:{x:r-t*s[0],y:e-a*s[1]},selector$5=r=>({nodesDraggable:r.nodesDraggable,nodesConnectable:r.nodesConnectable,nodesFocusable:r.nodesFocusable,elementsSelectable:r.elementsSelectable,updateNodeDimensions:r.updateNodeDimensions,onError:r.onError}),NodeRenderer=r=>{const{nodesDraggable:e,nodesConnectable:t,nodesFocusable:a,elementsSelectable:s,updateNodeDimensions:o,onError:f}=useStore(selector$5,shallow$1),u=useVisibleNodes(r.onlyRenderVisibleElements),h=reactExports.useRef(),x=reactExports.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const m=new ResizeObserver(w=>{const A=w.map(D=>({id:D.target.getAttribute("data-id"),nodeElement:D.target,forceUpdate:!0}));o(A)});return h.current=m,m},[]);return reactExports.useEffect(()=>()=>{h?.current?.disconnect()},[]),React.createElement("div",{className:"react-flow__nodes",style:containerStyle},u.map(m=>{let w=m.type||"default";r.nodeTypes[w]||(f?.("003",errorMessages.error003(w)),w="default");const A=r.nodeTypes[w]||r.nodeTypes.default,D=!!(m.draggable||e&&typeof m.draggable>"u"),I=!!(m.selectable||s&&typeof m.selectable>"u"),y=!!(m.connectable||t&&typeof m.connectable>"u"),l=!!(m.focusable||a&&typeof m.focusable>"u"),c=r.nodeExtent?clampPosition(m.positionAbsolute,r.nodeExtent):m.positionAbsolute,L=c?.x??0,R=c?.y??0,F=getPositionWithOrigin({x:L,y:R,width:m.width??0,height:m.height??0,origin:r.nodeOrigin});return React.createElement(A,{key:m.id,id:m.id,className:m.className,style:m.style,type:w,data:m.data,sourcePosition:m.sourcePosition||Position.Bottom,targetPosition:m.targetPosition||Position.Top,hidden:m.hidden,xPos:L,yPos:R,xPosOrigin:F.x,yPosOrigin:F.y,selectNodesOnDrag:r.selectNodesOnDrag,onClick:r.onNodeClick,onMouseEnter:r.onNodeMouseEnter,onMouseMove:r.onNodeMouseMove,onMouseLeave:r.onNodeMouseLeave,onContextMenu:r.onNodeContextMenu,onDoubleClick:r.onNodeDoubleClick,selected:!!m.selected,isDraggable:D,isSelectable:I,isConnectable:y,isFocusable:l,resizeObserver:x,dragHandle:m.dragHandle,zIndex:m[internalsSymbol]?.z??0,isParent:!!m[internalsSymbol]?.isParent,noDragClassName:r.noDragClassName,noPanClassName:r.noPanClassName,initialized:!!m.width&&!!m.height,rfId:r.rfId,disableKeyboardA11y:r.disableKeyboardA11y,ariaLabel:m.ariaLabel,hasHandleBounds:!!m[internalsSymbol]?.handleBounds})}))};NodeRenderer.displayName="NodeRenderer";var NodeRenderer$1=reactExports.memo(NodeRenderer);const shiftX=(r,e,t)=>t===Position.Left?r-e:t===Position.Right?r+e:r,shiftY=(r,e,t)=>t===Position.Top?r-e:t===Position.Bottom?r+e:r,EdgeUpdaterClassName="react-flow__edgeupdater",EdgeAnchor=({position:r,centerX:e,centerY:t,radius:a=10,onMouseDown:s,onMouseEnter:o,onMouseOut:f,type:u})=>React.createElement("circle",{onMouseDown:s,onMouseEnter:o,onMouseOut:f,className:cc$1([EdgeUpdaterClassName,`${EdgeUpdaterClassName}-${u}`]),cx:shiftX(e,a,r),cy:shiftY(t,a,r),r:a,stroke:"transparent",fill:"transparent"}),alwaysValidConnection=()=>!0;var wrapEdge=r=>{const e=({id:t,className:a,type:s,data:o,onClick:f,onEdgeDoubleClick:u,selected:h,animated:x,label:m,labelStyle:w,labelShowBg:A,labelBgStyle:D,labelBgPadding:I,labelBgBorderRadius:y,style:l,source:c,target:L,sourceX:R,sourceY:F,targetX:$,targetY:b,sourcePosition:k,targetPosition:B,elementsSelectable:J,hidden:X,sourceHandleId:ae,targetHandleId:He,onContextMenu:Pe,onMouseEnter:ue,onMouseMove:Oe,onMouseLeave:we,reconnectRadius:Ze,onReconnect:it,onReconnectStart:lt,onReconnectEnd:Vt,markerEnd:_e,markerStart:pr,rfId:_s,ariaLabel:Ei,isFocusable:Bl,isReconnectable:Wl,pathOptions:Ep,interactionWidth:Lp,disableKeyboardA11y:Op})=>{const R0=reactExports.useRef(null),[N0,Qp]=reactExports.useState(!1),[O0,zp]=reactExports.useState(!1),M0=useStoreApi(),W0=reactExports.useMemo(()=>`url('#${getMarkerId(pr,_s)}')`,[pr,_s]),im=reactExports.useMemo(()=>`url('#${getMarkerId(_e,_s)}')`,[_e,_s]);if(X)return null;const F0=v0=>{const{edges:z0,addSelectedEdges:sm,unselectNodesAndEdges:Uo,multiSelectionActive:u0}=M0.getState(),x0=z0.find(Xl=>Xl.id===t);x0&&(J&&(M0.setState({nodesSelectionActive:!1}),x0.selected&&u0?(Uo({nodes:[],edges:[x0]}),R0.current?.blur()):sm([t])),f&&f(v0,x0))},fm=getMouseHandler$1(t,M0.getState,u),cm=getMouseHandler$1(t,M0.getState,Pe),Ap=getMouseHandler$1(t,M0.getState,ue),Io=getMouseHandler$1(t,M0.getState,Oe),p0=getMouseHandler$1(t,M0.getState,we),a0=(v0,z0)=>{if(v0.button!==0)return;const{edges:sm,isValidConnection:Uo}=M0.getState(),u0=z0?L:c,x0=(z0?He:ae)||null,Xl=z0?"target":"source",Bp=Uo||alwaysValidConnection,L0=z0,kl=sm.find(Ke=>Ke.id===t);zp(!0),lt?.(v0,kl,Xl);const Np=Ke=>{zp(!1),Vt?.(Ke,kl,Xl)};handlePointerDown({event:v0,handleId:x0,nodeId:u0,onConnect:Ke=>it?.(kl,Ke),isTarget:L0,getState:M0.getState,setState:M0.setState,isValidConnection:Bp,edgeUpdaterType:Xl,onReconnectEnd:Np})},rm=v0=>a0(v0,!0),X0=v0=>a0(v0,!1),Nl=()=>Qp(!0),Gl=()=>Qp(!1),Mp=!J&&!f,_0=v0=>{if(!Op&&elementSelectionKeys.includes(v0.key)&&J){const{unselectNodesAndEdges:z0,addSelectedEdges:sm,edges:Uo}=M0.getState();v0.key==="Escape"?(R0.current?.blur(),z0({edges:[Uo.find(x0=>x0.id===t)]})):sm([t])}};return React.createElement("g",{className:cc$1(["react-flow__edge",`react-flow__edge-${s}`,a,{selected:h,animated:x,inactive:Mp,updating:N0}]),onClick:F0,onDoubleClick:fm,onContextMenu:cm,onMouseEnter:Ap,onMouseMove:Io,onMouseLeave:p0,onKeyDown:Bl?_0:void 0,tabIndex:Bl?0:void 0,role:Bl?"button":"img","data-testid":`rf__edge-${t}`,"aria-label":Ei===null?void 0:Ei||`Edge from ${c} to ${L}`,"aria-describedby":Bl?`${ARIA_EDGE_DESC_KEY}-${_s}`:void 0,ref:R0},!O0&&React.createElement(r,{id:t,source:c,target:L,selected:h,animated:x,label:m,labelStyle:w,labelShowBg:A,labelBgStyle:D,labelBgPadding:I,labelBgBorderRadius:y,data:o,style:l,sourceX:R,sourceY:F,targetX:$,targetY:b,sourcePosition:k,targetPosition:B,sourceHandleId:ae,targetHandleId:He,markerStart:W0,markerEnd:im,pathOptions:Ep,interactionWidth:Lp}),Wl&&React.createElement(React.Fragment,null,(Wl==="source"||Wl===!0)&&React.createElement(EdgeAnchor,{position:k,centerX:R,centerY:F,radius:Ze,onMouseDown:rm,onMouseEnter:Nl,onMouseOut:Gl,type:"source"}),(Wl==="target"||Wl===!0)&&React.createElement(EdgeAnchor,{position:B,centerX:$,centerY:b,radius:Ze,onMouseDown:X0,onMouseEnter:Nl,onMouseOut:Gl,type:"target"})))};return e.displayName="EdgeWrapper",reactExports.memo(e)};function createEdgeTypes(r){const e={default:wrapEdge(r.default||BezierEdge),straight:wrapEdge(r.bezier||StraightEdge),step:wrapEdge(r.step||StepEdge),smoothstep:wrapEdge(r.step||SmoothStepEdge),simplebezier:wrapEdge(r.simplebezier||SimpleBezierEdge)},t={},a=Object.keys(r).filter(s=>!["default","bezier"].includes(s)).reduce((s,o)=>(s[o]=wrapEdge(r[o]||BezierEdge),s),t);return{...e,...a}}function getHandlePosition(r,e,t=null){const a=(t?.x||0)+e.x,s=(t?.y||0)+e.y,o=t?.width||e.width,f=t?.height||e.height;switch(r){case Position.Top:return{x:a+o/2,y:s};case Position.Right:return{x:a+o,y:s+f/2};case Position.Bottom:return{x:a+o/2,y:s+f};case Position.Left:return{x:a,y:s+f/2}}}function getHandle(r,e){return r?r.length===1||!e?r[0]:e&&r.find(t=>t.id===e)||null:null}const getEdgePositions=(r,e,t,a,s,o)=>{const f=getHandlePosition(t,r,e),u=getHandlePosition(o,a,s);return{sourceX:f.x,sourceY:f.y,targetX:u.x,targetY:u.y}};function isEdgeVisible({sourcePos:r,targetPos:e,sourceWidth:t,sourceHeight:a,targetWidth:s,targetHeight:o,width:f,height:u,transform:h}){const x={x:Math.min(r.x,e.x),y:Math.min(r.y,e.y),x2:Math.max(r.x+t,e.x+s),y2:Math.max(r.y+a,e.y+o)};x.x===x.x2&&(x.x2+=1),x.y===x.y2&&(x.y2+=1);const m=rectToBox({x:(0-h[0])/h[2],y:(0-h[1])/h[2],width:f/h[2],height:u/h[2]}),w=Math.max(0,Math.min(m.x2,x.x2)-Math.max(m.x,x.x)),A=Math.max(0,Math.min(m.y2,x.y2)-Math.max(m.y,x.y));return Math.ceil(w*A)>0}function getNodeData(r){const e=r?.[internalsSymbol]?.handleBounds||null,t=e&&r?.width&&r?.height&&typeof r?.positionAbsolute?.x<"u"&&typeof r?.positionAbsolute?.y<"u";return[{x:r?.positionAbsolute?.x||0,y:r?.positionAbsolute?.y||0,width:r?.width||0,height:r?.height||0},e,!!t]}const defaultEdgeTree=[{level:0,isMaxLevel:!0,edges:[]}];function groupEdgesByZLevel(r,e,t=!1){let a=-1;const s=r.reduce((f,u)=>{const h=isNumeric(u.zIndex);let x=h?u.zIndex:0;if(t){const m=e.get(u.target),w=e.get(u.source),A=u.selected||m?.selected||w?.selected,D=Math.max(w?.[internalsSymbol]?.z||0,m?.[internalsSymbol]?.z||0,1e3);x=(h?u.zIndex:0)+(A?D:0)}return f[x]?f[x].push(u):f[x]=[u],a=x>a?x:a,f},{}),o=Object.entries(s).map(([f,u])=>{const h=+f;return{edges:u,level:h,isMaxLevel:h===a}});return o.length===0?defaultEdgeTree:o}function useVisibleEdges(r,e,t){const a=useStore(reactExports.useCallback(s=>r?s.edges.filter(o=>{const f=e.get(o.source),u=e.get(o.target);return f?.width&&f?.height&&u?.width&&u?.height&&isEdgeVisible({sourcePos:f.positionAbsolute||{x:0,y:0},targetPos:u.positionAbsolute||{x:0,y:0},sourceWidth:f.width,sourceHeight:f.height,targetWidth:u.width,targetHeight:u.height,width:s.width,height:s.height,transform:s.transform})}):s.edges,[r,e]));return groupEdgesByZLevel(a,e,t)}const ArrowSymbol=({color:r="none",strokeWidth:e=1})=>React.createElement("polyline",{style:{stroke:r,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),ArrowClosedSymbol=({color:r="none",strokeWidth:e=1})=>React.createElement("polyline",{style:{stroke:r,fill:r,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),MarkerSymbols={[MarkerType.Arrow]:ArrowSymbol,[MarkerType.ArrowClosed]:ArrowClosedSymbol};function useMarkerSymbol(r){const e=useStoreApi();return reactExports.useMemo(()=>Object.prototype.hasOwnProperty.call(MarkerSymbols,r)?MarkerSymbols[r]:(e.getState().onError?.("009",errorMessages.error009(r)),null),[r])}const Marker=({id:r,type:e,color:t,width:a=12.5,height:s=12.5,markerUnits:o="strokeWidth",strokeWidth:f,orient:u="auto-start-reverse"})=>{const h=useMarkerSymbol(e);return h?React.createElement("marker",{className:"react-flow__arrowhead",id:r,markerWidth:`${a}`,markerHeight:`${s}`,viewBox:"-10 -10 20 20",markerUnits:o,orient:u,refX:"0",refY:"0"},React.createElement(h,{color:t,strokeWidth:f})):null},markerSelector=({defaultColor:r,rfId:e})=>t=>{const a=[];return t.edges.reduce((s,o)=>([o.markerStart,o.markerEnd].forEach(f=>{if(f&&typeof f=="object"){const u=getMarkerId(f,e);a.includes(u)||(s.push({id:u,color:f.color||r,...f}),a.push(u))}}),s),[]).sort((s,o)=>s.id.localeCompare(o.id))},MarkerDefinitions=({defaultColor:r,rfId:e})=>{const t=useStore(reactExports.useCallback(markerSelector({defaultColor:r,rfId:e}),[r,e]),(a,s)=>!(a.length!==s.length||a.some((o,f)=>o.id!==s[f].id)));return React.createElement("defs",null,t.map(a=>React.createElement(Marker,{id:a.id,key:a.id,type:a.type,color:a.color,width:a.width,height:a.height,markerUnits:a.markerUnits,strokeWidth:a.strokeWidth,orient:a.orient})))};MarkerDefinitions.displayName="MarkerDefinitions";var MarkerDefinitions$1=reactExports.memo(MarkerDefinitions);const selector$4=r=>({nodesConnectable:r.nodesConnectable,edgesFocusable:r.edgesFocusable,edgesUpdatable:r.edgesUpdatable,elementsSelectable:r.elementsSelectable,width:r.width,height:r.height,connectionMode:r.connectionMode,nodeInternals:r.nodeInternals,onError:r.onError}),EdgeRenderer=({defaultMarkerColor:r,onlyRenderVisibleElements:e,elevateEdgesOnSelect:t,rfId:a,edgeTypes:s,noPanClassName:o,onEdgeContextMenu:f,onEdgeMouseEnter:u,onEdgeMouseMove:h,onEdgeMouseLeave:x,onEdgeClick:m,onEdgeDoubleClick:w,onReconnect:A,onReconnectStart:D,onReconnectEnd:I,reconnectRadius:y,children:l,disableKeyboardA11y:c})=>{const{edgesFocusable:L,edgesUpdatable:R,elementsSelectable:F,width:$,height:b,connectionMode:k,nodeInternals:B,onError:J}=useStore(selector$4,shallow$1),X=useVisibleEdges(e,B,t);return $?React.createElement(React.Fragment,null,X.map(({level:ae,edges:He,isMaxLevel:Pe})=>React.createElement("svg",{key:ae,style:{zIndex:ae},width:$,height:b,className:"react-flow__edges react-flow__container"},Pe&&React.createElement(MarkerDefinitions$1,{defaultColor:r,rfId:a}),React.createElement("g",null,He.map(ue=>{const[Oe,we,Ze]=getNodeData(B.get(ue.source)),[it,lt,Vt]=getNodeData(B.get(ue.target));if(!Ze||!Vt)return null;let _e=ue.type||"default";s[_e]||(J?.("011",errorMessages.error011(_e)),_e="default");const pr=s[_e]||s.default,_s=k===ConnectionMode.Strict?lt.target:(lt.target??[]).concat(lt.source??[]),Ei=getHandle(we.source,ue.sourceHandle),Bl=getHandle(_s,ue.targetHandle),Wl=Ei?.position||Position.Bottom,Ep=Bl?.position||Position.Top,Lp=!!(ue.focusable||L&&typeof ue.focusable>"u"),Op=ue.reconnectable||ue.updatable,R0=typeof A<"u"&&(Op||R&&typeof Op>"u");if(!Ei||!Bl)return J?.("008",errorMessages.error008(Ei,ue)),null;const{sourceX:N0,sourceY:Qp,targetX:O0,targetY:zp}=getEdgePositions(Oe,Ei,Wl,it,Bl,Ep);return React.createElement(pr,{key:ue.id,id:ue.id,className:cc$1([ue.className,o]),type:_e,data:ue.data,selected:!!ue.selected,animated:!!ue.animated,hidden:!!ue.hidden,label:ue.label,labelStyle:ue.labelStyle,labelShowBg:ue.labelShowBg,labelBgStyle:ue.labelBgStyle,labelBgPadding:ue.labelBgPadding,labelBgBorderRadius:ue.labelBgBorderRadius,style:ue.style,source:ue.source,target:ue.target,sourceHandleId:ue.sourceHandle,targetHandleId:ue.targetHandle,markerEnd:ue.markerEnd,markerStart:ue.markerStart,sourceX:N0,sourceY:Qp,targetX:O0,targetY:zp,sourcePosition:Wl,targetPosition:Ep,elementsSelectable:F,onContextMenu:f,onMouseEnter:u,onMouseMove:h,onMouseLeave:x,onClick:m,onEdgeDoubleClick:w,onReconnect:A,onReconnectStart:D,onReconnectEnd:I,reconnectRadius:y,rfId:a,ariaLabel:ue.ariaLabel,isFocusable:Lp,isReconnectable:R0,pathOptions:"pathOptions"in ue?ue.pathOptions:void 0,interactionWidth:ue.interactionWidth,disableKeyboardA11y:c})})))),l):null};EdgeRenderer.displayName="EdgeRenderer";var EdgeRenderer$1=reactExports.memo(EdgeRenderer);const selector$3=r=>`translate(${r.transform[0]}px,${r.transform[1]}px) scale(${r.transform[2]})`;function Viewport({children:r}){const e=useStore(selector$3);return React.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:e}},r)}function useOnInitHandler(r){const e=useReactFlow(),t=reactExports.useRef(!1);reactExports.useEffect(()=>{!t.current&&e.viewportInitialized&&r&&(setTimeout(()=>r(e),1),t.current=!0)},[r,e.viewportInitialized])}const oppositePosition={[Position.Left]:Position.Right,[Position.Right]:Position.Left,[Position.Top]:Position.Bottom,[Position.Bottom]:Position.Top},ConnectionLine=({nodeId:r,handleType:e,style:t,type:a=ConnectionLineType.Bezier,CustomComponent:s,connectionStatus:o})=>{const{fromNode:f,handleId:u,toX:h,toY:x,connectionMode:m}=useStore(reactExports.useCallback(b=>({fromNode:b.nodeInternals.get(r),handleId:b.connectionHandleId,toX:(b.connectionPosition.x-b.transform[0])/b.transform[2],toY:(b.connectionPosition.y-b.transform[1])/b.transform[2],connectionMode:b.connectionMode}),[r]),shallow$1),w=f?.[internalsSymbol]?.handleBounds;let A=w?.[e];if(m===ConnectionMode.Loose&&(A=A||w?.[e==="source"?"target":"source"]),!f||!A)return null;const D=u?A.find(b=>b.id===u):A[0],I=D?D.x+D.width/2:(f.width??0)/2,y=D?D.y+D.height/2:f.height??0,l=(f.positionAbsolute?.x??0)+I,c=(f.positionAbsolute?.y??0)+y,L=D?.position,R=L?oppositePosition[L]:null;if(!L||!R)return null;if(s)return React.createElement(s,{connectionLineType:a,connectionLineStyle:t,fromNode:f,fromHandle:D,fromX:l,fromY:c,toX:h,toY:x,fromPosition:L,toPosition:R,connectionStatus:o});let F="";const $={sourceX:l,sourceY:c,sourcePosition:L,targetX:h,targetY:x,targetPosition:R};return a===ConnectionLineType.Bezier?[F]=getBezierPath($):a===ConnectionLineType.Step?[F]=getSmoothStepPath({...$,borderRadius:0}):a===ConnectionLineType.SmoothStep?[F]=getSmoothStepPath($):a===ConnectionLineType.SimpleBezier?[F]=getSimpleBezierPath($):F=`M${l},${c} ${h},${x}`,React.createElement("path",{d:F,fill:"none",className:"react-flow__connection-path",style:t})};ConnectionLine.displayName="ConnectionLine";const selector$2=r=>({nodeId:r.connectionNodeId,handleType:r.connectionHandleType,nodesConnectable:r.nodesConnectable,connectionStatus:r.connectionStatus,width:r.width,height:r.height});function ConnectionLineWrapper({containerStyle:r,style:e,type:t,component:a}){const{nodeId:s,handleType:o,nodesConnectable:f,width:u,height:h,connectionStatus:x}=useStore(selector$2,shallow$1);return!(s&&o&&u&&f)?null:React.createElement("svg",{style:r,width:u,height:h,className:"react-flow__edges react-flow__connectionline react-flow__container"},React.createElement("g",{className:cc$1(["react-flow__connection",x])},React.createElement(ConnectionLine,{nodeId:s,handleType:o,style:e,type:t,CustomComponent:a,connectionStatus:x})))}function useNodeOrEdgeTypes(r,e){return reactExports.useRef(null),useStoreApi(),reactExports.useMemo(()=>e(r),[r])}const GraphView=({nodeTypes:r,edgeTypes:e,onMove:t,onMoveStart:a,onMoveEnd:s,onInit:o,onNodeClick:f,onEdgeClick:u,onNodeDoubleClick:h,onEdgeDoubleClick:x,onNodeMouseEnter:m,onNodeMouseMove:w,onNodeMouseLeave:A,onNodeContextMenu:D,onSelectionContextMenu:I,onSelectionStart:y,onSelectionEnd:l,connectionLineType:c,connectionLineStyle:L,connectionLineComponent:R,connectionLineContainerStyle:F,selectionKeyCode:$,selectionOnDrag:b,selectionMode:k,multiSelectionKeyCode:B,panActivationKeyCode:J,zoomActivationKeyCode:X,deleteKeyCode:ae,onlyRenderVisibleElements:He,elementsSelectable:Pe,selectNodesOnDrag:ue,defaultViewport:Oe,translateExtent:we,minZoom:Ze,maxZoom:it,preventScrolling:lt,defaultMarkerColor:Vt,zoomOnScroll:_e,zoomOnPinch:pr,panOnScroll:_s,panOnScrollSpeed:Ei,panOnScrollMode:Bl,zoomOnDoubleClick:Wl,panOnDrag:Ep,onPaneClick:Lp,onPaneMouseEnter:Op,onPaneMouseMove:R0,onPaneMouseLeave:N0,onPaneScroll:Qp,onPaneContextMenu:O0,onEdgeContextMenu:zp,onEdgeMouseEnter:M0,onEdgeMouseMove:W0,onEdgeMouseLeave:im,onReconnect:F0,onReconnectStart:fm,onReconnectEnd:cm,reconnectRadius:Ap,noDragClassName:Io,noWheelClassName:p0,noPanClassName:a0,elevateEdgesOnSelect:rm,disableKeyboardA11y:X0,nodeOrigin:Nl,nodeExtent:Gl,rfId:Mp})=>{const _0=useNodeOrEdgeTypes(r,createNodeTypes),v0=useNodeOrEdgeTypes(e,createEdgeTypes);return useOnInitHandler(o),React.createElement(FlowRenderer$1,{onPaneClick:Lp,onPaneMouseEnter:Op,onPaneMouseMove:R0,onPaneMouseLeave:N0,onPaneContextMenu:O0,onPaneScroll:Qp,deleteKeyCode:ae,selectionKeyCode:$,selectionOnDrag:b,selectionMode:k,onSelectionStart:y,onSelectionEnd:l,multiSelectionKeyCode:B,panActivationKeyCode:J,zoomActivationKeyCode:X,elementsSelectable:Pe,onMove:t,onMoveStart:a,onMoveEnd:s,zoomOnScroll:_e,zoomOnPinch:pr,zoomOnDoubleClick:Wl,panOnScroll:_s,panOnScrollSpeed:Ei,panOnScrollMode:Bl,panOnDrag:Ep,defaultViewport:Oe,translateExtent:we,minZoom:Ze,maxZoom:it,onSelectionContextMenu:I,preventScrolling:lt,noDragClassName:Io,noWheelClassName:p0,noPanClassName:a0,disableKeyboardA11y:X0},React.createElement(Viewport,null,React.createElement(EdgeRenderer$1,{edgeTypes:v0,onEdgeClick:u,onEdgeDoubleClick:x,onlyRenderVisibleElements:He,onEdgeContextMenu:zp,onEdgeMouseEnter:M0,onEdgeMouseMove:W0,onEdgeMouseLeave:im,onReconnect:F0,onReconnectStart:fm,onReconnectEnd:cm,reconnectRadius:Ap,defaultMarkerColor:Vt,noPanClassName:a0,elevateEdgesOnSelect:!!rm,disableKeyboardA11y:X0,rfId:Mp},React.createElement(ConnectionLineWrapper,{style:L,type:c,component:R,containerStyle:F})),React.createElement("div",{className:"react-flow__edgelabel-renderer"}),React.createElement(NodeRenderer$1,{nodeTypes:_0,onNodeClick:f,onNodeDoubleClick:h,onNodeMouseEnter:m,onNodeMouseMove:w,onNodeMouseLeave:A,onNodeContextMenu:D,selectNodesOnDrag:ue,onlyRenderVisibleElements:He,noPanClassName:a0,noDragClassName:Io,disableKeyboardA11y:X0,nodeOrigin:Nl,nodeExtent:Gl,rfId:Mp})))};GraphView.displayName="GraphView";var GraphView$1=reactExports.memo(GraphView);const infiniteExtent=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],initialState={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:infiniteExtent,nodeExtent:infiniteExtent,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:ConnectionMode.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:devWarn,isValidConnection:void 0},createRFStore=()=>createWithEqualityFn((r,e)=>({...initialState,setNodes:t=>{const{nodeInternals:a,nodeOrigin:s,elevateNodesOnSelect:o}=e();r({nodeInternals:createNodeInternals(t,a,s,o)})},getNodes:()=>Array.from(e().nodeInternals.values()),setEdges:t=>{const{defaultEdgeOptions:a={}}=e();r({edges:t.map(s=>({...a,...s}))})},setDefaultNodesAndEdges:(t,a)=>{const s=typeof t<"u",o=typeof a<"u",f=s?createNodeInternals(t,new Map,e().nodeOrigin,e().elevateNodesOnSelect):new Map;r({nodeInternals:f,edges:o?a:[],hasDefaultNodes:s,hasDefaultEdges:o})},updateNodeDimensions:t=>{const{onNodesChange:a,nodeInternals:s,fitViewOnInit:o,fitViewOnInitDone:f,fitViewOnInitOptions:u,domNode:h,nodeOrigin:x}=e(),m=h?.querySelector(".react-flow__viewport");if(!m)return;const w=window.getComputedStyle(m),{m22:A}=new window.DOMMatrixReadOnly(w.transform),D=t.reduce((y,l)=>{const c=s.get(l.id);if(c?.hidden)s.set(c.id,{...c,[internalsSymbol]:{...c[internalsSymbol],handleBounds:void 0}});else if(c){const L=getDimensions(l.nodeElement);!!(L.width&&L.height&&(c.width!==L.width||c.height!==L.height||l.forceUpdate))&&(s.set(c.id,{...c,[internalsSymbol]:{...c[internalsSymbol],handleBounds:{source:getHandleBounds(".source",l.nodeElement,A,x),target:getHandleBounds(".target",l.nodeElement,A,x)}},...L}),y.push({id:c.id,type:"dimensions",dimensions:L}))}return y},[]);updateAbsoluteNodePositions(s,x);const I=f||o&&!f&&fitView(e,{initial:!0,...u});r({nodeInternals:new Map(s),fitViewOnInitDone:I}),D?.length>0&&a?.(D)},updateNodePositions:(t,a=!0,s=!1)=>{const{triggerNodeChanges:o}=e(),f=t.map(u=>{const h={id:u.id,type:"position",dragging:s};return a&&(h.positionAbsolute=u.positionAbsolute,h.position=u.position),h});o(f)},triggerNodeChanges:t=>{const{onNodesChange:a,nodeInternals:s,hasDefaultNodes:o,nodeOrigin:f,getNodes:u,elevateNodesOnSelect:h}=e();if(t?.length){if(o){const x=applyNodeChanges(t,u()),m=createNodeInternals(x,s,f,h);r({nodeInternals:m})}a?.(t)}},addSelectedNodes:t=>{const{multiSelectionActive:a,edges:s,getNodes:o}=e();let f,u=null;a?f=t.map(h=>createSelectionChange(h,!0)):(f=getSelectionChanges(o(),t),u=getSelectionChanges(s,[])),updateNodesAndEdgesSelections({changedNodes:f,changedEdges:u,get:e,set:r})},addSelectedEdges:t=>{const{multiSelectionActive:a,edges:s,getNodes:o}=e();let f,u=null;a?f=t.map(h=>createSelectionChange(h,!0)):(f=getSelectionChanges(s,t),u=getSelectionChanges(o(),[])),updateNodesAndEdgesSelections({changedNodes:u,changedEdges:f,get:e,set:r})},unselectNodesAndEdges:({nodes:t,edges:a}={})=>{const{edges:s,getNodes:o}=e(),f=t||o(),u=a||s,h=f.map(m=>(m.selected=!1,createSelectionChange(m.id,!1))),x=u.map(m=>createSelectionChange(m.id,!1));updateNodesAndEdgesSelections({changedNodes:h,changedEdges:x,get:e,set:r})},setMinZoom:t=>{const{d3Zoom:a,maxZoom:s}=e();a?.scaleExtent([t,s]),r({minZoom:t})},setMaxZoom:t=>{const{d3Zoom:a,minZoom:s}=e();a?.scaleExtent([s,t]),r({maxZoom:t})},setTranslateExtent:t=>{e().d3Zoom?.translateExtent(t),r({translateExtent:t})},resetSelectedElements:()=>{const{edges:t,getNodes:a}=e(),o=a().filter(u=>u.selected).map(u=>createSelectionChange(u.id,!1)),f=t.filter(u=>u.selected).map(u=>createSelectionChange(u.id,!1));updateNodesAndEdgesSelections({changedNodes:o,changedEdges:f,get:e,set:r})},setNodeExtent:t=>{const{nodeInternals:a}=e();a.forEach(s=>{s.positionAbsolute=clampPosition(s.position,t)}),r({nodeExtent:t,nodeInternals:new Map(a)})},panBy:t=>{const{transform:a,width:s,height:o,d3Zoom:f,d3Selection:u,translateExtent:h}=e();if(!f||!u||!t.x&&!t.y)return!1;const x=identity.translate(a[0]+t.x,a[1]+t.y).scale(a[2]),m=[[0,0],[s,o]],w=f?.constrain()(x,m,h);return f.transform(u,w),a[0]!==w.x||a[1]!==w.y||a[2]!==w.k},cancelConnection:()=>r({connectionNodeId:initialState.connectionNodeId,connectionHandleId:initialState.connectionHandleId,connectionHandleType:initialState.connectionHandleType,connectionStatus:initialState.connectionStatus,connectionStartHandle:initialState.connectionStartHandle,connectionEndHandle:initialState.connectionEndHandle}),reset:()=>r({...initialState})}),Object.is),ReactFlowProvider=({children:r})=>{const e=reactExports.useRef(null);return e.current||(e.current=createRFStore()),React.createElement(Provider$1,{value:e.current},r)};ReactFlowProvider.displayName="ReactFlowProvider";const Wrapper=({children:r})=>reactExports.useContext(StoreContext)?React.createElement(React.Fragment,null,r):React.createElement(ReactFlowProvider,null,r);Wrapper.displayName="ReactFlowWrapper";const defaultNodeTypes={input:InputNode$1,default:DefaultNode$1,output:OutputNode$1,group:GroupNode},defaultEdgeTypes={default:BezierEdge,straight:StraightEdge,step:StepEdge,smoothstep:SmoothStepEdge,simplebezier:SimpleBezierEdge},initNodeOrigin=[0,0],initSnapGrid=[15,15],initDefaultViewport={x:0,y:0,zoom:1},wrapperStyle={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},ReactFlow=reactExports.forwardRef(({nodes:r,edges:e,defaultNodes:t,defaultEdges:a,className:s,nodeTypes:o=defaultNodeTypes,edgeTypes:f=defaultEdgeTypes,onNodeClick:u,onEdgeClick:h,onInit:x,onMove:m,onMoveStart:w,onMoveEnd:A,onConnect:D,onConnectStart:I,onConnectEnd:y,onClickConnectStart:l,onClickConnectEnd:c,onNodeMouseEnter:L,onNodeMouseMove:R,onNodeMouseLeave:F,onNodeContextMenu:$,onNodeDoubleClick:b,onNodeDragStart:k,onNodeDrag:B,onNodeDragStop:J,onNodesDelete:X,onEdgesDelete:ae,onSelectionChange:He,onSelectionDragStart:Pe,onSelectionDrag:ue,onSelectionDragStop:Oe,onSelectionContextMenu:we,onSelectionStart:Ze,onSelectionEnd:it,connectionMode:lt=ConnectionMode.Strict,connectionLineType:Vt=ConnectionLineType.Bezier,connectionLineStyle:_e,connectionLineComponent:pr,connectionLineContainerStyle:_s,deleteKeyCode:Ei="Backspace",selectionKeyCode:Bl="Shift",selectionOnDrag:Wl=!1,selectionMode:Ep=SelectionMode.Full,panActivationKeyCode:Lp="Space",multiSelectionKeyCode:Op=isMacOs()?"Meta":"Control",zoomActivationKeyCode:R0=isMacOs()?"Meta":"Control",snapToGrid:N0=!1,snapGrid:Qp=initSnapGrid,onlyRenderVisibleElements:O0=!1,selectNodesOnDrag:zp=!0,nodesDraggable:M0,nodesConnectable:W0,nodesFocusable:im,nodeOrigin:F0=initNodeOrigin,edgesFocusable:fm,edgesUpdatable:cm,elementsSelectable:Ap,defaultViewport:Io=initDefaultViewport,minZoom:p0=.5,maxZoom:a0=2,translateExtent:rm=infiniteExtent,preventScrolling:X0=!0,nodeExtent:Nl,defaultMarkerColor:Gl="#b1b1b7",zoomOnScroll:Mp=!0,zoomOnPinch:_0=!0,panOnScroll:v0=!1,panOnScrollSpeed:z0=.5,panOnScrollMode:sm=PanOnScrollMode.Free,zoomOnDoubleClick:Uo=!0,panOnDrag:u0=!0,onPaneClick:x0,onPaneMouseEnter:Xl,onPaneMouseMove:Bp,onPaneMouseLeave:L0,onPaneScroll:kl,onPaneContextMenu:Np,children:V0,onEdgeContextMenu:Ke,onEdgeDoubleClick:g0,onEdgeMouseEnter:d0,onEdgeMouseMove:Vl,onEdgeMouseLeave:jp,onEdgeUpdate:K0,onEdgeUpdateStart:Pm,onEdgeUpdateEnd:Cm,onReconnect:Fm,onReconnectStart:ev,onReconnectEnd:h1,reconnectRadius:xv=10,edgeUpdaterRadius:gv=10,onNodesChange:zv,onEdgesChange:a1,noDragClassName:Jv="nodrag",noWheelClassName:d1="nowheel",noPanClassName:A1="nopan",fitView:Zv=!1,fitViewOptions:u1,connectOnClick:Yp=!0,attributionPosition:nm,proOptions:dm,defaultEdgeOptions:o0,elevateNodesOnSelect:pm=!0,elevateEdgesOnSelect:jm=!1,disableKeyboardA11y:iv=!1,autoPanOnConnect:ov=!0,autoPanOnNodeDrag:dv=!0,connectionRadius:cv=20,isValidConnection:Cv,onError:Lv,style:Vm,id:wv,nodeDragThreshold:Ov,...X1},n1)=>{const Rv=wv||"1";return React.createElement("div",{...X1,style:{...Vm,...wrapperStyle},ref:n1,className:cc$1(["react-flow",s]),"data-testid":"rf__wrapper",id:wv},React.createElement(Wrapper,null,React.createElement(GraphView$1,{onInit:x,onMove:m,onMoveStart:w,onMoveEnd:A,onNodeClick:u,onEdgeClick:h,onNodeMouseEnter:L,onNodeMouseMove:R,onNodeMouseLeave:F,onNodeContextMenu:$,onNodeDoubleClick:b,nodeTypes:o,edgeTypes:f,connectionLineType:Vt,connectionLineStyle:_e,connectionLineComponent:pr,connectionLineContainerStyle:_s,selectionKeyCode:Bl,selectionOnDrag:Wl,selectionMode:Ep,deleteKeyCode:Ei,multiSelectionKeyCode:Op,panActivationKeyCode:Lp,zoomActivationKeyCode:R0,onlyRenderVisibleElements:O0,selectNodesOnDrag:zp,defaultViewport:Io,translateExtent:rm,minZoom:p0,maxZoom:a0,preventScrolling:X0,zoomOnScroll:Mp,zoomOnPinch:_0,zoomOnDoubleClick:Uo,panOnScroll:v0,panOnScrollSpeed:z0,panOnScrollMode:sm,panOnDrag:u0,onPaneClick:x0,onPaneMouseEnter:Xl,onPaneMouseMove:Bp,onPaneMouseLeave:L0,onPaneScroll:kl,onPaneContextMenu:Np,onSelectionContextMenu:we,onSelectionStart:Ze,onSelectionEnd:it,onEdgeContextMenu:Ke,onEdgeDoubleClick:g0,onEdgeMouseEnter:d0,onEdgeMouseMove:Vl,onEdgeMouseLeave:jp,onReconnect:Fm??K0,onReconnectStart:ev??Pm,onReconnectEnd:h1??Cm,reconnectRadius:xv??gv,defaultMarkerColor:Gl,noDragClassName:Jv,noWheelClassName:d1,noPanClassName:A1,elevateEdgesOnSelect:jm,rfId:Rv,disableKeyboardA11y:iv,nodeOrigin:F0,nodeExtent:Nl}),React.createElement(StoreUpdater,{nodes:r,edges:e,defaultNodes:t,defaultEdges:a,onConnect:D,onConnectStart:I,onConnectEnd:y,onClickConnectStart:l,onClickConnectEnd:c,nodesDraggable:M0,nodesConnectable:W0,nodesFocusable:im,edgesFocusable:fm,edgesUpdatable:cm,elementsSelectable:Ap,elevateNodesOnSelect:pm,minZoom:p0,maxZoom:a0,nodeExtent:Nl,onNodesChange:zv,onEdgesChange:a1,snapToGrid:N0,snapGrid:Qp,connectionMode:lt,translateExtent:rm,connectOnClick:Yp,defaultEdgeOptions:o0,fitView:Zv,fitViewOptions:u1,onNodesDelete:X,onEdgesDelete:ae,onNodeDragStart:k,onNodeDrag:B,onNodeDragStop:J,onSelectionDrag:ue,onSelectionDragStart:Pe,onSelectionDragStop:Oe,noPanClassName:A1,nodeOrigin:F0,rfId:Rv,autoPanOnConnect:ov,autoPanOnNodeDrag:dv,onError:Lv,connectionRadius:cv,isValidConnection:Cv,nodeDragThreshold:Ov}),React.createElement(Wrapper$1,{onSelectionChange:He}),V0,React.createElement(Attribution,{proOptions:dm,position:nm}),React.createElement(A11yDescriptions,{rfId:Rv,disableKeyboardA11y:iv})))});ReactFlow.displayName="ReactFlow";const selector$1$1=r=>r.domNode?.querySelector(".react-flow__edgelabel-renderer");function EdgeLabelRenderer({children:r}){const e=useStore(selector$1$1);return e?reactDomExports.createPortal(r,e):null}const viewportSelector=r=>({x:r.transform[0],y:r.transform[1],zoom:r.transform[2]});function useViewport(){return useStore(viewportSelector,shallow$1)}function PlusIcon(){return React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},React.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function MinusIcon(){return React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},React.createElement("path",{d:"M0 0h32v4.2H0z"}))}function FitViewIcon(){return React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},React.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function LockIcon(){return React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},React.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function UnlockIcon(){return React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},React.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const ControlButton=({children:r,className:e,...t})=>React.createElement("button",{type:"button",className:cc$1(["react-flow__controls-button",e]),...t},r);ControlButton.displayName="ControlButton";const selector$1=r=>({isInteractive:r.nodesDraggable||r.nodesConnectable||r.elementsSelectable,minZoomReached:r.transform[2]<=r.minZoom,maxZoomReached:r.transform[2]>=r.maxZoom}),Controls=({style:r,showZoom:e=!0,showFitView:t=!0,showInteractive:a=!0,fitViewOptions:s,onZoomIn:o,onZoomOut:f,onFitView:u,onInteractiveChange:h,className:x,children:m,position:w="bottom-left"})=>{const A=useStoreApi(),[D,I]=reactExports.useState(!1),{isInteractive:y,minZoomReached:l,maxZoomReached:c}=useStore(selector$1,shallow$1),{zoomIn:L,zoomOut:R,fitView:F}=useReactFlow();if(reactExports.useEffect(()=>{I(!0)},[]),!D)return null;const $=()=>{L(),o?.()},b=()=>{R(),f?.()},k=()=>{F(s),u?.()},B=()=>{A.setState({nodesDraggable:!y,nodesConnectable:!y,elementsSelectable:!y}),h?.(!y)};return React.createElement(Panel,{className:cc$1(["react-flow__controls",x]),position:w,style:r,"data-testid":"rf__controls"},e&&React.createElement(React.Fragment,null,React.createElement(ControlButton,{onClick:$,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:c},React.createElement(PlusIcon,null)),React.createElement(ControlButton,{onClick:b,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:l},React.createElement(MinusIcon,null))),t&&React.createElement(ControlButton,{className:"react-flow__controls-fitview",onClick:k,title:"fit view","aria-label":"fit view"},React.createElement(FitViewIcon,null)),a&&React.createElement(ControlButton,{className:"react-flow__controls-interactive",onClick:B,title:"toggle interactivity","aria-label":"toggle interactivity"},y?React.createElement(UnlockIcon,null):React.createElement(LockIcon,null)),m)};Controls.displayName="Controls";var Controls$1=reactExports.memo(Controls),BackgroundVariant;(function(r){r.Lines="lines",r.Dots="dots",r.Cross="cross"})(BackgroundVariant||(BackgroundVariant={}));function LinePattern({color:r,dimensions:e,lineWidth:t}){return React.createElement("path",{stroke:r,strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`})}function DotPattern({color:r,radius:e}){return React.createElement("circle",{cx:e,cy:e,r:e,fill:r})}const defaultColor={[BackgroundVariant.Dots]:"#91919a",[BackgroundVariant.Lines]:"#eee",[BackgroundVariant.Cross]:"#e2e2e2"},defaultSize={[BackgroundVariant.Dots]:1,[BackgroundVariant.Lines]:1,[BackgroundVariant.Cross]:6},selector=r=>({transform:r.transform,patternId:`pattern-${r.rfId}`});function Background({id:r,variant:e=BackgroundVariant.Dots,gap:t=20,size:a,lineWidth:s=1,offset:o=2,color:f,style:u,className:h}){const x=reactExports.useRef(null),{transform:m,patternId:w}=useStore(selector,shallow$1),A=f||defaultColor[e],D=a||defaultSize[e],I=e===BackgroundVariant.Dots,y=e===BackgroundVariant.Cross,l=Array.isArray(t)?t:[t,t],c=[l[0]*m[2]||1,l[1]*m[2]||1],L=D*m[2],R=y?[L,L]:c,F=I?[L/o,L/o]:[R[0]/o,R[1]/o];return React.createElement("svg",{className:cc$1(["react-flow__background",h]),style:{...u,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:x,"data-testid":"rf__background"},React.createElement("pattern",{id:w+r,x:m[0]%c[0],y:m[1]%c[1],width:c[0],height:c[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${F[0]},-${F[1]})`},I?React.createElement(DotPattern,{color:A,radius:L/o}):React.createElement(LinePattern,{dimensions:R,color:A,lineWidth:s})),React.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${w+r})`}))}Background.displayName="Background";var Background$1=reactExports.memo(Background);function sortByCtimeDescending(r,e){const t=new Date(r?.data?.aiida?.ctime||0);return new Date(e?.data?.aiida?.ctime||0)-t}function sortByLabel(r,e){return(r?.data?.label||"").localeCompare(e?.data?.label||"")}function categorizeNodes(r){const e=r.filter(s=>s.data?.node_type.includes("calculation")).sort(sortByCtimeDescending),t=r.filter(s=>s.data?.node_type.includes("workflow")).sort(sortByCtimeDescending),a=r.filter(s=>s.data?.node_type.includes("data")).sort(sortByLabel);return{calculation:e,workflow:t,data:a}}function layoutGraphDefault(r,e,t,a={}){const{spacingX:s=280,spacingY:o=70,groupGapY:f=90,centerX:u=window.innerWidth/2,centerY:h=window.innerHeight/2,smallThreshold:x=20}=a,m=[],w=[],A=categorizeNodes(e),D=categorizeNodes(t),I={data:["calculation","workflows","data"],calculation:["data","calculation","workflow"],workflow:["data","calculation","workflow"]},y=r.data?.node_type.split(".")[1],l=I[y]||I.data;m.push({...r,position:{x:u,y:h}});const L=l.flatMap(F=>[...A[F]||[],...D[F]||[]]).length<=x,R=(F,$,b,k=!0)=>{(F||[]).forEach((B,J)=>{const X=k?$+J*o:$-J*o,ae=u+s*b;B.position={x:ae,y:X},m.push(B);let He="";if(B?.data?.aiida?.link_label){const Oe=B.data.aiida.link_label;He=Oe.length>21?`${Oe.slice(0,18)}...`:Oe}const Pe={},ue=B.data?.node_type||"";(ue.includes("workflow")||ue.includes("process"))&&(Pe.strokeDasharray="5,5"),w.push({id:`e-${b<0?B.id+"->":r.id+"->"}${b<0?r.id:B.id}`,source:b<0?B.id:r.id,target:b<0?r.id:B.id,sourcePosition:b<0?"right":"left",targetPosition:b<0?"left":"right",type:"custom",style:Pe,data:{label:He,labelPosition:b<0?"start":"end"}})})};if(L){const F=l.flatMap(B=>A[B]||[]).reverse(),$=l.flatMap(B=>D[B]||[]).reverse(),b=h-(F.length-1)/2*o,k=h-($.length-1)/2*o;F.forEach((B,J)=>R([B],b+J*o,-1,!0)),$.forEach((B,J)=>R([B],k+J*o,1,!0))}else{const F=A[l[0]]||[],$=D[l[0]]||[],b=l.slice(1,3),k=b.flatMap(ae=>A[ae]||[]),B=b.flatMap(ae=>D[ae]||[]),J=h-175;R(F,J,-1,!0),R($,J,1,!0);const X=J-f;R(k,X,-1,!1),R(B,X,1,!1)}return{nodes:m,edges:w}}async function fetchUsers(r){try{const e=await fetch(`${r}/users/`);if(!e.ok)return null;const a=(await e.json()).data;return console.log("users",a),a}catch(e){return console.error("Error fetching node:",e),null}}async function fetchDownloadFormats(r){try{const e=await fetch(`${r}/nodes/download_formats/`);return e.ok?(await e.json()).data:null}catch(e){return console.error("Error fetching node:",e),null}}async function fetchNodeById(r,e){if(!e)return null;try{const t=await fetch(`${r}/nodes/${encodeURIComponent(e)}`);return t.ok?t.json():null}catch(t){return console.error("Error fetching node:",t),null}}async function fetchNodeContents(r,e){if(!e)return null;const t=["attributes","comments","extras","derived_properties"],a={};for(const s of t)try{const o=await fetch(`${r}/nodes/${encodeURIComponent(e)}/contents/${s}`);if(!o.ok){o.status!==404&&console.warn(`Endpoint ${s} failed for node ${e}:`,o.status);continue}const f=await o.json();a[s]=f?.data?.[s]??f??{}}catch(o){console.error(`Error fetching ${s} for node ${e}:`,o)}return a}async function fetchNodeRepoList(r,e){if(!e)return[];try{const t=await fetch(`${r}/nodes/${encodeURIComponent(e)}/repo/list`);return t.ok?(await t.json()).data.repo_list.filter(o=>o.type==="FILE").map(o=>({name:o.name,downloadUrl:`${r}/nodes/${encodeURIComponent(e)}/repo/contents?filename="${encodeURIComponent(o.name)}"`})):[]}catch(t){return console.error("Error fetching node repo list:",t),[]}}async function fetchRetrievedUUID(r,e){if(!e)return null;try{const t=await fetch(`${r}/nodes/${encodeURIComponent(e)}/links/outgoing/`);return t.ok&&((await t.json())?.data?.outgoing||[]).find(f=>f.link_label==="retrieved")?.uuid||null}catch(t){return console.error("Error fetching node:",t),null}}async function fetchFiles(r,e,t){if(!e)return null;const a=["input_files","output_files"],s={};for(const o of a)try{const f=`${r}/calcjobs/${encodeURIComponent(e)}/${o}`,u=await fetch(f);if(!u.ok){u.status!==404&&console.warn(`Endpoint ${o} failed for node ${e}:`,u.status);continue}const h=await u.json(),x=Array.isArray(h.data?.[o])?h.data[o]:Array.isArray(h.data)?h.data:[];console.log(e);const m=o==="input_files"?e:t,w=x.filter(A=>A.type==="FILE").map(A=>({...A,downloadUrl:`${r}/nodes/${encodeURIComponent(m)}/repo/contents?filename="${encodeURIComponent(A.name)}"`}));s[o]=w}catch(f){console.error(`Error fetching ${o} for node ${e}:`,f)}return s}async function fetchJson(r,e){if(!e)return{incoming:[],outgoing:[]};try{const t=await fetch(`${r}/nodes/${encodeURIComponent(e)}/download?download_format=json`);return t.ok?t.json():null}catch(t){return console.error("Error fetching node:",t),null}}async function fetchCif(r,e){if(!e)return{cifText:null};try{const t=await fetch(`${r}/nodes/${encodeURIComponent(e)}/download?download_format=cif&download=false`);return t.ok?{cifText:(await t.json()).data.download.data||null}:{cifText:null}}catch(t){return console.error("Error fetching node:",t),{cifText:null}}}async function fetchSourceFile(r,e){if(!e)return{sourceFile:null};try{const t=await fetch(`${r}/nodes/${encodeURIComponent(e)}/repo/contents?filename=source_file`);return t.ok?{sourceFile:await t.text()}:{sourceFile:null}}catch(t){return console.error("Error fetching node:",t),{sourceFile:null}}}async function fetchGroups(r){try{const e=await fetch(`${r}/groups`);return e.ok?(await e.json())?.data?.groups||[]:null}catch(e){return console.error("Error fetching groups:",e),[]}}async function fetchFromQueryBuilder(r,e){try{const t=await fetch(`${r}/querybuilder/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return t.ok?(await t.json())?.data||[]:(console.error("QueryBuilder request failed:",t.status,t.statusText),[])}catch(t){return console.error("Error fetching from QueryBuilder:",t),[]}}async function fetchLinks(r,e){if(!e)return{incoming:[],outgoing:[]};try{const[t,a]=await Promise.all([fetch(`${r}/nodes/${encodeURIComponent(e)}/links/incoming`),fetch(`${r}/nodes/${encodeURIComponent(e)}/links/outgoing`)]),s=t.ok?await t.json():[],o=a.ok?await a.json():[];return{incoming:s,outgoing:o}}catch(t){return console.error("Error fetching links:",t),{incoming:[],outgoing:[]}}}async function fetchLinkCounts(r,e=[]){if(!e.length)return e;try{return await Promise.all(e.map(async a=>{if(typeof a?.data?.parentCount=="number"&&typeof a?.data?.childCount=="number")return a;const{incoming:s,outgoing:o}=await fetchLinks(r,a.id),f=(s?.data?.incoming||[]).length,u=(o?.data?.outgoing||[]).length;return{...a,data:{...a.data,parentCount:f,childCount:u}}}))}catch(t){return console.error("Error fetching next level nodes:",t),e}}async function smartFetchData(r,e,t={},a=null){const s=t[e.id];if(s)return console.debug(`${e.id} data is already cached`),{...e,data:{...e.data,...s}};let o={...e.data};const f={StructureData:fetchCif,CifData:fetchCif,ArrayData:fetchJson,CalcFunctionNode:fetchSourceFile},u=async()=>fetchNodeRepoList(r,e.id),h=await fetchNodeContents(r,e.id);o={...o,...h};const x=f[e.data.label]?f[e.data.label](r,e.id):null,m=u();let w=null;e.data.label==="CalcJobNode"&&(w=(async()=>{let y=o.retrievedUUID;y||(y=await fetchRetrievedUUID(r,e.id));const l=await fetchFiles(r,e.id,y);return{retrievedUUID:y,files:l}})());const[A,D,I]=await Promise.all([x,m,w]);if(A&&(o.download=A),D&&(o.repo_list=D),I&&(o={...o,...I}),a&&e.data.node_type){const y=e.data.node_type.endsWith("|")?e.data.node_type:`${e.data.node_type}|`,l=a[y]||[];o.downloadByFormat=l.reduce((c,L)=>(c[L]=`${r}/nodes/${encodeURIComponent(e.id)}/download?download_format=${encodeURIComponent(L)}`,c),{})}return{...e,data:o}}async function fetchGraphByNodeId(r,e){const a=(await fetchNodeById(r,e)).data.nodes[0];if(!a)return{nodes:[],edges:[]};const{incoming:s,outgoing:o}=await fetchLinks(r,e),f=s?.data?.incoming||[],u=o?.data?.outgoing||[],h=[{id:a.uuid,data:{label:a.node_type.split(".").filter(Boolean).pop(),node_type:a.node_type,pos:0,aiida:a,parentCount:f.length,childCount:u.length}},...f.map(D=>({id:D.uuid,data:{label:D.node_type.split(".").filter(Boolean).pop(),node_type:D.node_type,pos:1,link_label:D.link_label,aiida:D}})),...u.map(D=>({id:D.uuid,data:{label:D.node_type.split(".").filter(Boolean).pop(),node_type:D.node_type,pos:-1,link_label:D.link_label,aiida:D}}))],x=new Map;for(const D of h)x.has(D.id)||x.set(D.id,D);const m=Array.from(x.values()),{nodes:w,edges:A}=layoutGraphDefault(m.find(D=>D.data.pos===0),m.filter(D=>D.data.pos===1),m.filter(D=>D.data.pos===-1));return{nodes:w,edges:A}}function Breadcrumbs({trail:r,onClick:e,maxItems:t=10}){const a=r.slice(-t);return jsxRuntimeExports$1.jsxs("div",{className:"w-full flex gap-2 flex-wrap overflow-x-auto items-center bg-theme-100 border-theme-800 border-t p-2 ",children:[jsxRuntimeExports$1.jsx("span",{className:"",children:"History:"}),a.map((s,o)=>jsxRuntimeExports$1.jsxs(React.Fragment,{children:[jsxRuntimeExports$1.jsxs("button",{className:"bg-theme-200 hover:bg-theme-300 text-sm px-2 py-1",onClick:()=>e(s,o),children:[s.data.label," (",s.data.aiida.uuid.split("-")[0],")"]}),o<a.length-1&&jsxRuntimeExports$1.jsx("span",{className:"mx-1",children:"→"})]},`${s.id}-${o}`))]})}function GroupIcon({size:r=14,className:e=""}){return jsxRuntimeExports$1.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:r,height:r,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[jsxRuntimeExports$1.jsx("path",{d:"M15.536 11.293a1 1 0 0 0 0 1.414l2.376 2.377a1 1 0 0 0 1.414 0l2.377-2.377a1 1 0 0 0 0-1.414l-2.377-2.377a1 1 0 0 0-1.414 0z"}),jsxRuntimeExports$1.jsx("path",{d:"M2.297 11.293a1 1 0 0 0 0 1.414l2.377 2.377a1 1 0 0 0 1.414 0l2.377-2.377a1 1 0 0 0 0-1.414L6.088 8.916a1 1 0 0 0-1.414 0z"}),jsxRuntimeExports$1.jsx("path",{d:"M8.916 17.912a1 1 0 0 0 0 1.415l2.377 2.376a1 1 0 0 0 1.414 0l2.377-2.376a1 1 0 0 0 0-1.415l-2.377-2.376a1 1 0 0 0-1.414 0z"}),jsxRuntimeExports$1.jsx("path",{d:"M8.916 4.674a1 1 0 0 0 0 1.414l2.377 2.376a1 1 0 0 0 1.414 0l2.377-2.376a1 1 0 0 0 0-1.414l-2.377-2.377a1 1 0 0 0-1.414 0z"})]})}function DownloadIcon({data:r=null,downloadUrl:e=null,filename:t="data.json",size:a=14,className:s=""}){const o=()=>{if(e){const f=document.createElement("a");f.href=e,f.download=t,f.target="_blank",f.rel="noopener noreferrer",f.click();return}if(r){const f=JSON.stringify(r,null,2),u=new Blob([f],{type:"application/json"}),h=URL.createObjectURL(u),x=document.createElement("a");x.href=h,x.download=t,x.click(),URL.revokeObjectURL(h)}};return jsxRuntimeExports$1.jsx("button",{type:"button",onClick:o,title:"Download",className:"p-1",children:jsxRuntimeExports$1.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:a,height:a,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:s,children:[jsxRuntimeExports$1.jsx("path",{d:"M12 15V3"}),jsxRuntimeExports$1.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),jsxRuntimeExports$1.jsx("path",{d:"m7 10 5 5 5-5"})]})})}function ClipBoardIcon({size:r=14,className:e=""}){return jsxRuntimeExports$1.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:r,height:r,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[jsxRuntimeExports$1.jsx("rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2"}),jsxRuntimeExports$1.jsx("path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"})]})}function ClipboardCopyIcon({size:r=18,className:e=""}){return jsxRuntimeExports$1.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:r,height:r,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[jsxRuntimeExports$1.jsx("path",{d:"m12 15 2 2 4-4"}),jsxRuntimeExports$1.jsx("rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2"}),jsxRuntimeExports$1.jsx("path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"})]})}function RightDropDownIcon({size:r=14,className:e=""}){return jsxRuntimeExports$1.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:r,height:r,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:jsxRuntimeExports$1.jsx("path",{d:"m9 18 6-6-6-6"})})}function DownDropDownIcon({size:r=14,className:e=""}){return jsxRuntimeExports$1.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:r,height:r,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:jsxRuntimeExports$1.jsx("path",{d:"m6 9 6 6 6-6"})})}function ViewIcon({size:r=14,className:e=""}){return jsxRuntimeExports$1.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:r,height:r,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[jsxRuntimeExports$1.jsx("path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0"}),jsxRuntimeExports$1.jsx("circle",{cx:"12",cy:"12",r:"3"})]})}function LinksIcon({size:r=14,className:e=""}){return jsxRuntimeExports$1.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:r,height:r,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[jsxRuntimeExports$1.jsx("path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"}),jsxRuntimeExports$1.jsx("path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"})]})}function QuestionIcon({size:r=14,className:e=""}){return jsxRuntimeExports$1.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:r,height:r,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[jsxRuntimeExports$1.jsx("circle",{cx:"12",cy:"12",r:"10"}),jsxRuntimeExports$1.jsx("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),jsxRuntimeExports$1.jsx("path",{d:"M12 17h.01"})]})}function ClickIcon({size:r=14,className:e=""}){return jsxRuntimeExports$1.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:r,height:r,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[jsxRuntimeExports$1.jsx("path",{d:"M12.034 12.681a.498.498 0 0 1 .647-.647l9 3.5a.5.5 0 0 1-.033.943l-3.444 1.068a1 1 0 0 0-.66.66l-1.067 3.443a.5.5 0 0 1-.943.033z"}),jsxRuntimeExports$1.jsx("path",{d:"M5 3a2 2 0 0 0-2 2"}),jsxRuntimeExports$1.jsx("path",{d:"M19 3a2 2 0 0 1 2 2"}),jsxRuntimeExports$1.jsx("path",{d:"M5 21a2 2 0 0 1-2-2"}),jsxRuntimeExports$1.jsx("path",{d:"M9 3h1"}),jsxRuntimeExports$1.jsx("path",{d:"M9 21h2"}),jsxRuntimeExports$1.jsx("path",{d:"M14 3h1"}),jsxRuntimeExports$1.jsx("path",{d:"M3 9v1"}),jsxRuntimeExports$1.jsx("path",{d:"M21 9v2"}),jsxRuntimeExports$1.jsx("path",{d:"M3 14v1"})]})}function ClickIcon2({size:r=14,className:e=""}){return jsxRuntimeExports$1.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:r,height:r,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:jsxRuntimeExports$1.jsx("path",{d:"M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z"})})}function DoubleClickIcon({size:r=24,className:e}){return jsxRuntimeExports$1.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:r,height:r,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[jsxRuntimeExports$1.jsx("path",{d:"M14 4.1 12 6"}),jsxRuntimeExports$1.jsx("path",{d:"m5.1 8-2.9-.8"}),jsxRuntimeExports$1.jsx("path",{d:"m6 12-1.9 2"}),jsxRuntimeExports$1.jsx("path",{d:"M7.2 2.2 8 5.1"}),jsxRuntimeExports$1.jsx("path",{d:"M9.037 9.69a.498.498 0 0 1 .653-.653l11 4.5a.5.5 0 0 1-.074.949l-4.349 1.041a1 1 0 0 0-.74.739l-1.04 4.35a.5.5 0 0 1-.95.074z"})]})}function BreadcrumbsIcon({size:r=14,className:e=""}){return jsxRuntimeExports$1.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:r,height:r,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[jsxRuntimeExports$1.jsx("path",{d:"M16 14v2.2l1.6 1"}),jsxRuntimeExports$1.jsx("path",{d:"M7 20H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H20a2 2 0 0 1 2 2"}),jsxRuntimeExports$1.jsx("circle",{cx:"16",cy:"16",r:"6"})]})}function GraphIcon({size:r=14,className:e=""}){return jsxRuntimeExports$1.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:r,height:r,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[jsxRuntimeExports$1.jsx("rect",{x:"16",y:"16",width:"6",height:"6",rx:"1"}),jsxRuntimeExports$1.jsx("rect",{x:"2",y:"16",width:"6",height:"6",rx:"1"}),jsxRuntimeExports$1.jsx("rect",{x:"9",y:"2",width:"6",height:"6",rx:"1"}),jsxRuntimeExports$1.jsx("path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3"}),jsxRuntimeExports$1.jsx("path",{d:"M12 12V8"})]})}function GithubIcon({size:r=14,className:e=""}){return jsxRuntimeExports$1.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:r,height:r,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[jsxRuntimeExports$1.jsx("path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"}),jsxRuntimeExports$1.jsx("path",{d:"M9 18c-4.51 2-5-2-7-2"})]})}const OverlayContext=reactExports.createContext(null);function useOverlayContainer(){const r=reactExports.useContext(OverlayContext);if(!r)throw new Error("useOverlayContainer must be used inside <OverlayProvider>");return r}function OverlayProvider({children:r,className:e=""}){const t=reactExports.useRef(null);return jsxRuntimeExports$1.jsx(OverlayContext.Provider,{value:t,children:jsxRuntimeExports$1.jsx("div",{ref:t,className:e,children:r})})}function Overlay({children:r,active:e,onClose:t,title:a,maxWidth:s=""}){const o=useOverlayContainer();return reactExports.useEffect(()=>{if(!e)return;const f=u=>{u.key==="Escape"&&(u.stopPropagation(),t?.())};return document.addEventListener("keydown",f),()=>document.removeEventListener("keydown",f)},[e,t]),!e||!o.current?null:reactDomExports.createPortal(jsxRuntimeExports$1.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-black/30",onClick:t,children:jsxRuntimeExports$1.jsxs("div",{className:"bg-white w-full mx-4 h-5/6 rounded-md overflow-auto transform transition-all duration-800 ease-in-out",style:{maxWidth:s,width:"100%"},onClick:f=>f.stopPropagation(),children:[jsxRuntimeExports$1.jsxs("div",{className:"flex justify-between items-center border-b px-3 py-1",children:[a&&jsxRuntimeExports$1.jsx("h2",{className:"text-lg font-semibold",children:a}),jsxRuntimeExports$1.jsx("button",{onClick:t,className:"text-gray-600 hover:text-black p-1",children:"✕"})]}),jsxRuntimeExports$1.jsx("div",{className:"px-4 py-4",children:r})]})}),o.current)}function Spinner({size:r=100,message:e="Loading..."}){return jsxRuntimeExports$1.jsxs("div",{className:"flex flex-col items-center justify-center",children:[jsxRuntimeExports$1.jsx("svg",{className:"animate-spin origin-center",xmlns:"http://www.w3.org/2000/svg",width:r,height:r,viewBox:"0 0 390 390",children:jsxRuntimeExports$1.jsxs("g",{className:"origin-center",children:[jsxRuntimeExports$1.jsx("path",{fill:"#0096DE",d:"M232 222c-8 11-11 18-14 32h56v-23l63 39-63 36v-23h-56c3 14 5 20 14 31s14 15 24 22c10 6 16 8 27 10 16 1 25 0 40-5 13-6 20-10 29-21 10-9 11-14 17-27 3-9 4-14 3-23 1-10-1-15-3-25-5-12-9-19-17-29-9-9-16-14-29-20-15-5-23-6-40-4-14 3-20 5-27 9-10 6-15 11-24 21Z"}),jsxRuntimeExports$1.jsx("path",{fill:"#30B808",d:"M178 238c-6-12-11-19-21-28l-28 48 20 11-65 36v-73l20 11 27-48c-13-4-20-5-34-3-13 2-19 4-30 10-10 6-15 9-22 18-9 14-13 22-16 37-1 15-1 22 3 36 4 13 7 17 16 28 6 7 10 10 18 15s14 6 23 9c13 2 21 2 34 0 13-3 20-7 32-15 11-11 16-18 23-33 5-14 6-20 6-28 0-12-2-18-6-31Z"}),jsxRuntimeExports$1.jsx("path",{fill:"#FF7D17",d:"M191 183c14 2 21 1 35-3l-28-48-20 11 2-74 63 37-20 11 28 48c10-9 15-15 20-28 5-12 6-19 7-31 0-12-1-18-5-28-7-15-12-23-24-33-12-8-19-12-33-15-12-3-18-2-31 0-10 1-15 3-23 8s-12 9-19 15v1c-9 10-12 16-17 28-3 13-4 21-3 36 4 15 7 23 17 37 10 10 14 14 21 18 10 6 17 8 30 10Z"})]})}),jsxRuntimeExports$1.jsx("span",{className:"text-md md:text-xl text-gray-500 animate-pulse",children:e})]})}function ErrorDisplay({message:r,onRetry:e}){return jsxRuntimeExports$1.jsxs("div",{className:"flex flex-col items-center text-red-500 p-4",children:[jsxRuntimeExports$1.jsx("div",{className:"text-5xl mb-2",children:"⚠️"}),jsxRuntimeExports$1.jsx("span",{className:"text-sm font-semibold",children:"Failed to load data"}),r&&jsxRuntimeExports$1.jsx("span",{className:"text-xs text-gray-400 mt-1",children:r}),e&&jsxRuntimeExports$1.jsx("button",{onClick:e,className:"mt-3 px-3 py-1 bg-red-500 text-white hover:bg-red-600",children:"Retry"})]})}function DebugPane({selectedNode:r}){return jsxRuntimeExports$1.jsxs("div",{className:"w-full h-full p-4",children:[jsxRuntimeExports$1.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Node Info"}),r?jsxRuntimeExports$1.jsxs("pre",{className:"bg-gray-100 p-2 rounded overflow-x-auto",children:[" ",JSON.stringify(r.data,null,2)]}):jsxRuntimeExports$1.jsx("p",{children:"Click a node to see top level details. Double click fetch the node and get all the details."})]})}function getNodeDisplay(r){switch(r.label){case"AbstractCode":return"";case"ArrayData":return"";case"BandsData":{const a=r.attributes?.["array|bands"];return a?.[1]!==void 0?`Num. bands: ${a[1]}`:""}case"Bool":return r.attributes?.value!==void 0?`Value: ${r.attributes.value}`:"";case"CalcFunctionNode":{const a=r?.aiida?.process_type?.split(".").at(-1);return a||""}case"CalcJobNode":{const a=r?.aiida?.process_type?.split(":")[1];return a||""}case"Code":{const a=r?.attributes?.input_plugin;return a||""}case"Dict":return r?.attributes?`Num. keys: ${Object.keys(r.attributes).length}`:"";case"EnumData":return"";case"Float":case"Int":return r.attributes?.value!==void 0?`Value: ${r.attributes.value}`:"";case"JsonableData":return"";case"List":return r.attributes?.value!==void 0?`Length: ${r.attributes.list.length}`:"";case"Str":return"";case"KpointsData":if(r.attributes?.mesh){const[a,s,o]=r.attributes.mesh;return`Grid: ${a} × ${s} × ${o}`}if(r.attributes?.labels&&r.attributes?.label_numbers){let a=r.attributes.labels.join(" → ");return a.length>20&&(a=a.slice(0,17)+"..."),`Path: ${a}`}return"";case"StructureData":{let a=function(s,o=22){const f={0:"₀",1:"₁",2:"₂",3:"₃",4:"₄",5:"₅",6:"₆",7:"₇",8:"₈",9:"₉"},u=s.replace(/\d/g,h=>f[h]||h);return u.length>o?u.slice(0,o-3)+"...":u};var t=a;return r.extras?.formula_hill?`${a(r.extras.formula_hill)}`:r.derived_properties?.formula?`${a(r.derived_properties?.formula)}`:""}case"UpfData":{const a=r.attributes?.filename;return a?`${a}`:""}case"XyData":return"";case"SinglefileData":return"";case"FolderData":{const a=r?.repo_list?.length||0;return a?`Num. Files: ${a}`:""}case"RemoteData":return"";case"InstalledCode":return"";case"PortableCode":return"";case"ContainerizedCode":return"";case"WorkChainNode":{const a=r?.aiida?.process_type?.split(":")[1];return a||""}default:return""}}function getNodeColorClasses(r,e=!1){let t="bg-gray-200",a="text-black",s="transition-all";return r?.startsWith("process.workflow")?(t="bg-orange-300",s="border-orange-400 shadow-md"):r?.startsWith("process")?(t="bg-red-300",s="border-red-400 shadow-md"):r?.startsWith("data")&&(t="bg-green-300",s="border-green-400 shadow-md"),e&&(s="border-blue-600 shadow-md rounded transition duration-700",t="bg-blue-100 glow-4",a="text-black font-semibold"),{bgClass:t,textClass:a,borderStyle:s}}function HorizontalNode({data:r,selected:e}){const{zoom:t}=useViewport(),a="min-w-[150px] text-center py-1.5 rounded border-3",s=t>1.2,f=`
  absolute
  top-1/3
  bottom-1/3
  flex
  items-center
  ${s?"text-[8px]":"text-[10px]"}
  text-slate-600
  font-light
  ${s?"":"hidden"}
`,u=`${f} left-0 ml-0.5 pr-1 pl-0.5 bg-gray-400/50 rounded-r-sm`,h=`${f} right-0 mr-0.5 pl-1 pr-0.5 bg-gray-400/50 rounded-l-sm`,{bgClass:x,textClass:m,borderStyle:w}=getNodeColorClasses(r.node_type,e,r.pos),A=r.aiida.uuid.split("-")[0],D=getNodeDisplay(r),I=t>1.2?"text-[12px]":"text-[14px]",y=jsxRuntimeExports$1.jsxs("div",{className:`${I}`,children:[r.label,t>1.2&&jsxRuntimeExports$1.jsx("br",{}),t>1.2&&jsxRuntimeExports$1.jsxs("div",{children:[jsxRuntimeExports$1.jsx("div",{className:"text-[8px] opacity-80",children:`uuid: ${A}`}),jsxRuntimeExports$1.jsx("div",{className:"text-[8px] opacity-80 ",children:`${D}`})]})]});return jsxRuntimeExports$1.jsxs("div",{className:`${a} ${x} ${m} ${w}`,children:[jsxRuntimeExports$1.jsx("div",{className:u,children:r.parentCount>99?"99+":r.parentCount??""}),jsxRuntimeExports$1.jsx("div",{className:h,children:r.childCount>99?"99+":r.childCount??""}),y,jsxRuntimeExports$1.jsx(Handle$1,{type:"target",position:Position.Left,style:{pointerEvents:"none",opacity:0,marginLeft:"4px"}}),jsxRuntimeExports$1.jsx(Handle$1,{type:"source",position:Position.Right,style:{pointerEvents:"none",opacity:0,marginRight:"4px"}})]})}const HorizontalNode$1=reactExports.memo(HorizontalNode);function CustomEdge({id:r,sourceX:e,sourceY:t,targetX:a,targetY:s,sourcePosition:o,targetPosition:f,data:u={},style:h={}}){const[x]=getSmoothStepPath({sourceX:e,sourceY:t,sourcePosition:o,targetX:a,targetY:s,targetPosition:f}),{zoom:m}=useViewport(),A={...{stroke:"grey",strokeWidth:1},...h||{}};if(!u.label)return jsxRuntimeExports$1.jsx(BaseEdge,{id:r,path:x});let D=.5,I="translate(-50%, -50%)";u.labelPosition==="start"?(D=.02,I="translate(0%, -50%)"):u.labelPosition==="end"&&(D=.98,I="translate(-100%, -50%)");const y=e+(a-e)*D,l=t+(s-t)*D,c=m>1.1?"text-xs":"text-sm";return jsxRuntimeExports$1.jsxs(jsxRuntimeExports$1.Fragment,{children:[jsxRuntimeExports$1.jsx(BaseEdge,{id:r,path:x,interactionWidth:0,style:A}),jsxRuntimeExports$1.jsx(EdgeLabelRenderer,{children:jsxRuntimeExports$1.jsx("div",{className:`absolute bg-theme-200 border border-theme-300 rounded-sm px-1 py-0.5 text-theme-700 font-light ${c} pointer-events-drag z-50`,style:{left:`${y}px`,top:`${l}px`,transform:I},children:u.label.length>21?`${u.label.slice(0,18)}...`:u.label})})]})}const nodeTypes={custom:HorizontalNode$1},edgeTypes={custom:CustomEdge};function FlowChart({nodes:r,edges:e,setNodes:t,setEdges:a,selectedNode:s,onNodeSelect:o,onNodeDoubleSelect:f,onInit:u}){const h=reactExports.useCallback((w,A)=>{o&&o(A)},[o]),x=reactExports.useCallback((w,A)=>{f&&f(A)},[f]),m=r.map(w=>({...w,type:"custom",selected:s?.id===w.id}));return jsxRuntimeExports$1.jsx("div",{className:"w-full h-full",children:jsxRuntimeExports$1.jsxs(ReactFlow,{className:"bg-theme-50",nodes:m,edges:e,nodeTypes,onNodesChange:w=>t(A=>applyNodeChanges(w,A)),onEdgesChange:w=>a(A=>applyEdgeChanges(w,A)),edgeTypes,edgesFocusable:!1,onNodeClick:h,onNodeDoubleClick:x,fitView:!0,nodesDraggable:!0,nodesConnectable:!1,onInit:u,children:[jsxRuntimeExports$1.jsx(Controls$1,{}),jsxRuntimeExports$1.jsx(Background$1,{variant:"dots",gap:12,size:1})]})})}function buildQuery({groups:r=[],nodeTypes:e=[],limit:t=50,offset:a=0}={}){const s=[{entity_type:"",orm_base:"node",tag:"node",joining_keyword:null,joining_value:null,edge_tag:null,outerjoin:!1}],o={node:{}},f={node:["id","uuid","node_type","label","ctime","mtime"]};if(e.length===1?o.node.node_type={like:e[0]}:e.length>1&&(o.node={or:e.map(u=>({node_type:{like:u}}))}),r.length>0){const u="core_1",h="node--core_1";s.push({entity_type:"group.core",orm_base:"group",tag:u,joining_keyword:"with_node",joining_value:"node",edge_tag:h,outerjoin:!1}),o[u]={type_string:{like:"%"},or:r.map(x=>({label:x}))},o[h]={},f[u]=[],f[h]=[]}return{path:s,filters:o,project:f,project_map:{},order_by:[],limit:t,offset:a,distinct:!0}}const aiidaTypes=[{label:"Data",type:"data",children:[{label:"Int",type:"data.core.int.%"},{label:"Float",type:"data.core.float.%"},{label:"ArrayData",type:"data.core.array.%",children:[{label:"BandsData",type:"data.core.array.bands.%"},{label:"XyData",type:"data.core.array.xy.%"},{label:"TrajectoryData",type:"data.core.array.trajectory.%"},{label:"KpointsData",type:"data.core.array.kpoints.%"}]},{label:"Str",type:"data.core.str.%"},{label:"Bool",type:"data.core.bool.%"},{label:"List",type:"data.core.list.%"},{label:"Dict",type:"data.core.dict.%"},{label:"StructureData",type:"data.core.structure.%"},{label:"RemoteData",type:"data.core.remote.%"},{label:"FolderData",type:"data.core.folder.%"},{label:"SinglefileData",type:"data.core.singlefile.%"},{label:"UpfData",type:"data.core.upf.%"},{label:"Code",type:"data.core.code.%"}]},{label:"Process",type:"process.%",children:[{label:"CalcJob",type:"process.calculation.calcjob.%"},{label:"CalcFunction",type:"process.calculation.calcfunction.%"},{label:"WorkFunction",type:"process.workflow.workfunction.%"},{label:"Workgraph",type:"process.workflow.workgraph.%"},{label:"Workchain",type:"process.workflow.workchain.%"}]}];function getFlattenedNodeTypes(r,e){const t=[],a=s=>{s.forEach(o=>{r.includes(o.label)&&t.push(o.type),o.children&&a(o.children)})};return a(e),t}function TypeCheckboxTree({types:r,selectedTypes:e,setSelectedTypes:t,level:a=0}){const[s,o]=reactExports.useState({}),f=x=>x.every(m=>e.includes(m.label)),u=x=>x.some(m=>e.includes(m.label))&&!f(x),h=(x,m)=>{if(!m||m.length===0){t(A=>A.includes(x)?A.filter(D=>D!==x):[...A,x]);return}t(A=>{const D=new Set(A),I=(l,c)=>{l.forEach(L=>{c?D.add(L.label):D.delete(L.label),L.children&&I(L.children,c)})};return D.has(x)&&f(m)?(D.delete(x),I(m,!1)):(D.add(x),I(m,!0)),[...D]});const w=A=>{const D={};return A.forEach(I=>{I.children&&(D[I.label]=!0,Object.assign(D,w(I.children)))}),D};o(A=>({...A,[x]:!0,...w(m)}))};return jsxRuntimeExports$1.jsx("div",{className:"flex flex-col",children:r.map(({label:x,children:m})=>{const w=e.includes(x),A=m&&u(m);return jsxRuntimeExports$1.jsxs("div",{style:{marginLeft:`${a*8}px`},children:[jsxRuntimeExports$1.jsxs("div",{className:"flex items-center gap-1 cursor-pointer",onClick:()=>h(x,m),children:[jsxRuntimeExports$1.jsx("input",{type:"checkbox",checked:w,ref:D=>{D&&(D.indeterminate=A)},onChange:D=>D.stopPropagation()}),m&&m.length>0&&jsxRuntimeExports$1.jsx("button",{type:"button",onClick:D=>{D.stopPropagation(),o(I=>({...I,[x]:!I[x]}))},className:"p-0.5 focus:outline-none",children:s[x]?jsxRuntimeExports$1.jsx(DownDropDownIcon,{size:14}):jsxRuntimeExports$1.jsx(RightDropDownIcon,{size:14})}),jsxRuntimeExports$1.jsx("span",{children:x})]}),m&&m.length>0&&s[x]&&jsxRuntimeExports$1.jsx(TypeCheckboxTree,{types:m,selectedTypes:e,setSelectedTypes:t,level:a+1})]},x)})})}function SortIcon({direction:r="asc",size:e=14,className:t=""}){return jsxRuntimeExports$1.jsx("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",className:`${t} transform ${r==="asc"?"rotate-180":""}`,children:jsxRuntimeExports$1.jsx("path",{d:"M6 9l6 6 6-6",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"})})}function DataTable({title:r,columns:e,data:t=[],maxWidth:a="2000px",sortableCols:s=!0,breakableCols:o=!1,renderIfMissing:f=!1}){const[u,h]=reactExports.useState({key:null,direction:"asc"}),x=reactExports.useMemo(()=>{if(!t)return[];if(!u.key)return t;const m=[...t].sort((w,A)=>{const D=w[u.key],I=A[u.key];return!isNaN(D)&&!isNaN(I)?D-I:String(D).localeCompare(String(I))});return u.direction==="asc"?m:m.reverse()},[t,u]);return!f&&(!t||t.length===0)?null:jsxRuntimeExports$1.jsxs("div",{className:"p-2",style:{maxWidth:a},children:[jsxRuntimeExports$1.jsx("h2",{className:"text-md md:text-md font-semibold mb-2",children:r}),jsxRuntimeExports$1.jsx("div",{className:"overflow-x-auto shadow-md md:shadow bg-white",children:jsxRuntimeExports$1.jsxs("table",{className:"min-w-full text-xs md:text-sm text-left",children:[jsxRuntimeExports$1.jsx("thead",{className:"bg-theme-100 text-theme-700",children:jsxRuntimeExports$1.jsx("tr",{children:e.map(m=>{const w=Array.isArray(s)?s.includes(m):s;return jsxRuntimeExports$1.jsx("th",{className:`px-3 md:px-4 py-0.5 md:py-1 font-medium ${w?"cursor-pointer select-none":""}`,onClick:()=>w&&h(A=>({key:m,direction:A.key===m&&A.direction==="asc"?"desc":"asc"})),children:jsxRuntimeExports$1.jsxs("div",{className:"flex items-center gap-1",children:[m,w&&u.key===m&&jsxRuntimeExports$1.jsx(SortIcon,{direction:u.direction,size:14,className:"ml-1 text-theme-500"})]})},m)})})}),jsxRuntimeExports$1.jsx("tbody",{children:x.map((m,w)=>jsxRuntimeExports$1.jsx("tr",{className:w%2===0?"bg-theme-50":"bg-theme-100",children:e.map(A=>{const I=["px-3 md:px-4 py-0.5 md:py-2 text-theme-900",(Array.isArray(o)?o.includes(A):o)?"whitespace-normal break-all":"whitespace-nowrap"].join(" ");return jsxRuntimeExports$1.jsx("td",{className:I,children:m[A]},A)})},m.id||w))})]})})]})}function useMediaQuery(r){const[e,t]=reactExports.useState(()=>typeof window<"u"?window.matchMedia(r).matches:!1);return reactExports.useEffect(()=>{if(typeof window>"u")return;const a=window.matchMedia(r),s=o=>{t(o.matches),console.log("media query fired")};return a.addEventListener("change",s),t(a.matches),()=>a.removeEventListener("change",s)},[r]),e}const columnLabels={uuid:"Unique ID",label:"Label",full_type:"Type",ctime:"Created",mtime:"Modified",id:"ID"},columnOrder=["Unique ID","Label","Type","Created","Modified",""];function formatValue(r,e,t=!1){if(e==null)return"";switch(r){case"Type":return typeof e!="string"?e:t&&e.replace(/\|$/,"").split(".").at(-2)||e;case"Created":case"Modified":const a=new Date(e);return t?a.toISOString().split("T")[0]:a.toLocaleString();case"Unique ID":return t&&typeof e=="string"?e.split("-")[0]:e;default:return e}}function formatTableData(r,e,t=!1){return r.map(a=>{const s={};return columnOrder.forEach(o=>{const f=Object.keys(columnLabels).find(u=>columnLabels[u]===o);f&&a[f]!==void 0&&(s[o]=formatValue(o,a[f],t))}),s[""]=jsxRuntimeExports$1.jsx("button",{onClick:()=>e(a.uuid),className:"px-2 py-1 bg-theme-500 text-white hover:bg-theme-700",children:"View"}),s})}function sortGroups(r){return[...r].sort((e,t)=>{const a=/^\d/.test(e.label),s=/^\d/.test(t.label);return a&&!s?1:!a&&s?-1:e.label.localeCompare(t.label,void 0,{numeric:!0})})}function GroupsViewer({restApiUrl:r,setRootNodeId:e}){const[t,a]=reactExports.useState([]),[s,o]=reactExports.useState([]),[f,u]=reactExports.useState([]),[h,x]=reactExports.useState([]),[m,w]=reactExports.useState(0),[A,D]=reactExports.useState(!1),[I,y]=reactExports.useState(null),[l,c]=reactExports.useState(""),L=200,R=useMediaQuery("(max-width: 790px)"),F=R?columnOrder.filter(B=>B!=="Created"):columnOrder;reactExports.useEffect(()=>{fetchGroups(r).then(a).catch(console.error)},[r]);const $=reactExports.useCallback(async(B=0,J=L)=>{D(!0),y(null);try{const X=getFlattenedNodeTypes(f,aiidaTypes),ae=buildQuery({groups:s,nodeTypes:X,limit:J,offset:B}),Pe=(await fetchFromQueryBuilder(r,ae)).node||[];x(ue=>B===0?Pe:[...ue,...Pe]),w(B+Pe.length)}catch(X){console.error(X),y(X.message||"Failed to fetch nodes")}finally{D(!1)}},[r,s,f]);reactExports.useEffect(()=>{t.length>0&&h.length===0&&$(0,1e3)},[t,h.length,$]);const b=reactExports.useMemo(()=>formatTableData(h,e,R),[h,R,e]),k=()=>{l.trim()!==""&&(e(l.trim()),c(""))};return jsxRuntimeExports$1.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 overflow-auto w-full items-start",children:[jsxRuntimeExports$1.jsxs("div",{className:"min-w-[250px] max-w-[400px] flex-shrink-0 bg-theme-50 p-2 px-3 rounded",children:[jsxRuntimeExports$1.jsxs("div",{className:"flex gap-4 items-center mb-2",children:[jsxRuntimeExports$1.jsx("h4",{className:"font-medium",children:"Filter by Node Types"}),jsxRuntimeExports$1.jsx("button",{onClick:()=>$(0),className:"px-3 py-1 bg-theme-500 text-white hover:bg-theme-700",children:"Apply"})]}),jsxRuntimeExports$1.jsx(TypeCheckboxTree,{types:aiidaTypes,selectedTypes:f,setSelectedTypes:u}),jsxRuntimeExports$1.jsx("h4",{className:"font-medium my-2 mt-4",children:"Filter by Defined Groups"}),sortGroups(t).map(B=>jsxRuntimeExports$1.jsxs("label",{className:"flex items-start gap-2 mb-1",children:[jsxRuntimeExports$1.jsx("input",{type:"checkbox",className:"mt-1",checked:s.includes(B.label),onChange:J=>o(X=>J.target.checked?[...X,B.label]:X.filter(ae=>ae!==B.label))}),jsxRuntimeExports$1.jsx("span",{className:"truncate block",title:B.label,children:B.label})]},B.label))]}),jsxRuntimeExports$1.jsxs("div",{className:"flex-1 bg-white rounded gap-2",children:[jsxRuntimeExports$1.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center gap-2",children:[jsxRuntimeExports$1.jsxs("div",{className:"flex-1 flex items-center gap-2 py-2",children:[jsxRuntimeExports$1.jsxs("h4",{className:"text-xl font-semibold",children:[b.length," nodes loaded"]}),b.length>0&&jsxRuntimeExports$1.jsx("button",{onClick:()=>$(m),className:"px-3 py-1 bg-theme-500 text-white hover:bg-theme-700",children:"Load next 200"})]}),jsxRuntimeExports$1.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-2 py-1 w-full lg:w-auto",children:[jsxRuntimeExports$1.jsx("span",{className:"font-semibold",children:"Navigate via UUID:"}),jsxRuntimeExports$1.jsx("input",{type:"text",value:l,onChange:B=>c(B.target.value),placeholder:"Enter a UUID",className:"flex-1 min-w-80 border-2 border-gray-300 focus:outline-none focus:border-theme-500 px-2 py-1"}),jsxRuntimeExports$1.jsx("button",{onClick:k,className:"px-2 py-1 bg-theme-500 text-white hover:bg-theme-700 font-medium",children:"Go"})]})]}),A&&jsxRuntimeExports$1.jsx("div",{className:"w-full h-[400px] flex items-center justify-center",children:jsxRuntimeExports$1.jsx(Spinner,{})}),I&&!A&&jsxRuntimeExports$1.jsx("div",{className:"w-full h-[400px] flex flex-col items-center justify-center",children:jsxRuntimeExports$1.jsx(ErrorDisplay,{message:I,onRetry:()=>$(m)})}),!A&&!I&&jsxRuntimeExports$1.jsx(DataTable,{columns:F,data:b,sortableCols:["Unique ID","Label","Type","Created","Modified"],renderIfMissing:!0,breakableCols:["Unique ID","Label","Type","Created","Modified"]})]})]})}function HelpViewer(){return jsxRuntimeExports$1.jsxs("div",{className:"p-2 w-full h-full overflow-y-auto bg-white",children:[jsxRuntimeExports$1.jsxs("section",{className:"mb-4",children:[jsxRuntimeExports$1.jsx("h3",{className:"text-lg  mb-3 flex items-center gap-2",children:"Overview"}),jsxRuntimeExports$1.jsxs("p",{className:"text-gray-700 leading-relaxed",children:["Aiida Explorer is an interactive tool for visualizing AiiDA workflows and calculations. You can navigate nodes, inspect their details, and explore relationships between workflows, calculations, and data nodes. This tool leverages the"," ",jsxRuntimeExports$1.jsx("a",{href:"https://aiida.readthedocs.io/projects/aiida-core/en/stable/internals/rest_api.html",className:"text-blue-400 hover:underline hover:text-blue-700",target:"_blank",children:"AiiDA REST API"})," ","and presents data retrieved from it in a curated manner."]})]}),jsxRuntimeExports$1.jsxs("section",{className:"mb-4",children:[jsxRuntimeExports$1.jsxs("h3",{className:"text-lg  mb-3 flex items-center gap-2",children:[jsxRuntimeExports$1.jsx(GraphIcon,{size:24})," Provenance"]}),jsxRuntimeExports$1.jsxs("p",{className:"text-gray-700 leading-relaxed",children:["Using AiiDA for high-throughput workflows comes with the benefit of AiiDA provenence. This provenence stores how calculations were performed and the results from them. Every node is part of a directed acyclic graph (DAG) that records the inputs, outputs, and intermediate steps. Understanding provenance helps reproducability and facilitates sharing. Learn more in the"," ",jsxRuntimeExports$1.jsx("a",{href:"https://aiida.readthedocs.io/projects/aiida-core/en/latest/",className:"text-blue-400 hover:underline hover:text-blue-700",target:"_blank",children:"official docs."})," ","This tool uses the the 'API endpoint /links' to build up a local view of each node."]})]}),jsxRuntimeExports$1.jsxs("section",{className:"mb-4",children:[jsxRuntimeExports$1.jsxs("h3",{className:"text-lg  mb-3 flex items-center gap-2",children:[jsxRuntimeExports$1.jsx(ClickIcon,{size:24})," Inspecting Nodes"]}),jsxRuntimeExports$1.jsxs("ul",{className:"pl-4 list-inside text-gray-700 space-y-1",children:[jsxRuntimeExports$1.jsxs("li",{className:"flex items-center gap-2",children:[jsxRuntimeExports$1.jsxs("strong",{className:"flex items-center gap-1",children:[jsxRuntimeExports$1.jsx(ClickIcon2,{size:22})," Click a node:"]}),jsxRuntimeExports$1.jsx("span",{className:"text-gray-700",children:"Highlights the node and displays detailed information in the side panel."})]}),jsxRuntimeExports$1.jsxs("li",{className:"flex items-center gap-2",children:[jsxRuntimeExports$1.jsxs("strong",{className:"flex items-center gap-1",children:[jsxRuntimeExports$1.jsx(DoubleClickIcon,{size:22})," Double-click a node:"]}),jsxRuntimeExports$1.jsx("span",{className:"text-gray-700",children:jsxRuntimeExports$1.jsx("li",{children:"Sets the node as the central focus, building the links and centering the graph."})})]}),jsxRuntimeExports$1.jsxs("li",{className:"flex items-center gap-2",children:[jsxRuntimeExports$1.jsxs("strong",{className:"flex items-center gap-1",children:[jsxRuntimeExports$1.jsx(BreadcrumbsIcon,{size:22})," Breadcrumbs:"]}),jsxRuntimeExports$1.jsx("span",{className:"text-gray-700",children:jsxRuntimeExports$1.jsx("li",{children:"Quickly navigate back to previously explored nodes. A history of the last 10 visited nodes is retained."})})]})]})]}),jsxRuntimeExports$1.jsxs("section",{className:"mb-4",children:[jsxRuntimeExports$1.jsxs("h3",{className:"text-lg  mb-3 flex items-center gap-2",children:[jsxRuntimeExports$1.jsx(GraphIcon,{size:26})," Buttons & Controls"]}),jsxRuntimeExports$1.jsxs("ul",{className:"pl-4 list-inside text-gray-700 space-y-1 ",children:[jsxRuntimeExports$1.jsxs("li",{className:"flex items-center gap-2",children:[jsxRuntimeExports$1.jsxs("strong",{className:"flex items-center gap-1",children:[jsxRuntimeExports$1.jsx(GroupIcon,{size:22})," Find node:"]}),jsxRuntimeExports$1.jsx("span",{className:"text-gray-700",children:"Provides a graphical interface for simple AiiDA queries using the querybuilder endpoint."})]}),jsxRuntimeExports$1.jsxs("li",{className:"flex items-center gap-2",children:[jsxRuntimeExports$1.jsxs("strong",{className:"flex items-center gap-1",children:[jsxRuntimeExports$1.jsx(LinksIcon,{size:20})," Get Counts:"]}),jsxRuntimeExports$1.jsx("span",{className:"text-gray-700",children:"Fetches the parent/child counts for all nodes currently visible in the graph."})]}),jsxRuntimeExports$1.jsxs("li",{className:"flex items-center gap-2",children:[jsxRuntimeExports$1.jsxs("strong",{className:"flex items-center gap-1",children:[jsxRuntimeExports$1.jsx(QuestionIcon,{size:20})," Help:"]}),jsxRuntimeExports$1.jsx("span",{className:"text-gray-700",children:"Opens this help overlay."})]}),jsxRuntimeExports$1.jsx("li",{})]})]}),jsxRuntimeExports$1.jsxs("p",{className:"text-gray-500 text-sm mt-6",children:["This tool is currently in beta testing stage. Report unexpected behaviour, bugs or general suggestions on"," ",jsxRuntimeExports$1.jsxs("a",{href:"https://github.com/aiidateam/aiida-explorer/issues/new",className:"group inline-flex items-center gap-0.5 text-blue-400",target:"_blank",children:[jsxRuntimeExports$1.jsx("span",{className:"transition-colors group-hover:text-blue-700",children:"GitHub."}),jsxRuntimeExports$1.jsx("span",{className:"inline-flex items-center justify-center w-5 h-5 rounded-full bg-blue-400 group-hover:bg-blue-700 transition-colors",children:jsxRuntimeExports$1.jsx(GithubIcon,{className:"w-[18-px] h-[18px] text-white"})})]})]})]})}function FormattedMetaData({nodeData:r,userData:e}){const t=e?.users||[],a=r?.aiida,[s,o]=reactExports.useState(!1);if(!a)return jsxRuntimeExports$1.jsx("div",{className:"p-4 text-theme-500 italic",children:"No metadata available"});const f=Array.isArray(t)?t.find(u=>u.id===a.user_id):null;return jsxRuntimeExports$1.jsxs("div",{className:"",children:[jsxRuntimeExports$1.jsxs("div",{className:"flex gap-2 items-center cursor-pointer md:cursor-default",onClick:()=>o(!s),children:[jsxRuntimeExports$1.jsx("h2",{className:"text-md lg:text-lg font-semibold",children:r.label||""}),jsxRuntimeExports$1.jsx("span",{className:"lg:hidden transition-transform duration-200",children:s?"▲":"▼"})]}),jsxRuntimeExports$1.jsx("div",{className:`${s?"block":"hidden"} mt-1 lg:block lg:mt-2`,children:jsxRuntimeExports$1.jsxs("div",{className:"space-y-1 px-1 text-xs lg:text-sm",children:[a.uuid&&jsxRuntimeExports$1.jsxs("div",{children:[jsxRuntimeExports$1.jsx("span",{className:"font-medium",children:"UUID:"})," ",a.uuid]}),a.ctime&&jsxRuntimeExports$1.jsxs("div",{children:[jsxRuntimeExports$1.jsx("span",{className:"font-medium",children:"Created:"})," ",a.ctime]}),a.mtime&&jsxRuntimeExports$1.jsxs("div",{children:[jsxRuntimeExports$1.jsx("span",{className:"font-medium",children:"Modified:"})," ",a.mtime]}),a.node_type&&jsxRuntimeExports$1.jsxs("div",{children:[jsxRuntimeExports$1.jsx("span",{className:"font-medium",children:"Node Type:"})," ",a.node_type]}),f&&jsxRuntimeExports$1.jsxs("div",{children:[jsxRuntimeExports$1.jsx("span",{className:"font-medium",children:"Owner:"})," ",f.first_name," ",f.last_name||"",f.institution&&jsxRuntimeExports$1.jsxs("span",{className:"text-gray-500",children:[" (",f.institution,")"]})]})]})})]})}const isBoolean=r=>typeof r=="boolean"||r instanceof Boolean,isNumber=r=>typeof r=="number"||r instanceof Number,isBigInt=r=>typeof r=="bigint"||r instanceof BigInt,isDate=r=>!!r&&r instanceof Date,isString=r=>typeof r=="string"||r instanceof String,isArray=r=>Array.isArray(r),isObject=r=>typeof r=="object"&&r!==null,isFunction=r=>!!r&&r instanceof Object&&typeof r=="function";function quoteString(r,e){return e===void 0&&(e=!1),!r||e?`"${r}"`:r}function quoteStringValue(r,e,t){return t?JSON.stringify(r):e?`"${r}"`:r}function ExpandableObject(r){let{field:e,value:t,data:a,lastElement:s,openBracket:o,closeBracket:f,level:u,style:h,shouldExpandNode:x,clickToExpandNode:m,outerRef:w,beforeExpandChange:A}=r;const D=reactExports.useRef(!1),[I,y]=reactExports.useState(()=>x(u,t,e)),l=reactExports.useRef(null);reactExports.useEffect(()=>{D.current?y(x(u,t,e)):D.current=!0},[x]);const c=reactExports.useId();if(a.length===0)return EmptyObject({field:e,openBracket:o,closeBracket:f,lastElement:s,style:h});const L=I?h.collapseIcon:h.expandIcon,R=I?h.ariaLables.collapseJson:h.ariaLables.expandJson,F=u+1,$=a.length-1,b=J=>{I!==J&&(!A||A({level:u,value:t,field:e,newExpandValue:J}))&&y(J)},k=J=>{if(J.key==="ArrowRight"||J.key==="ArrowLeft")J.preventDefault(),b(J.key==="ArrowRight");else if(J.key==="ArrowUp"||J.key==="ArrowDown"){J.preventDefault();const X=J.key==="ArrowUp"?-1:1;if(!w.current)return;const ae=w.current.querySelectorAll("[role=button]");let He=-1;for(let ue=0;ue<ae.length;ue++)if(ae[ue].tabIndex===0){He=ue;break}if(He<0)return;const Pe=(He+X+ae.length)%ae.length;ae[He].tabIndex=-1,ae[Pe].tabIndex=0,ae[Pe].focus()}},B=()=>{var J;b(!I);const X=l.current;if(!X)return;const ae=(J=w.current)===null||J===void 0?void 0:J.querySelector('[role=button][tabindex="0"]');ae&&(ae.tabIndex=-1),X.tabIndex=0,X.focus()};return reactExports.createElement("div",{className:h.basicChildStyle,role:"treeitem","aria-expanded":I,"aria-selected":void 0},reactExports.createElement("span",{className:L,onClick:B,onKeyDown:k,role:"button","aria-label":R,"aria-expanded":I,"aria-controls":I?c:void 0,ref:l,tabIndex:u===0?0:-1}),(e||e==="")&&(m?reactExports.createElement("span",{className:h.clickableLabel,onClick:B,onKeyDown:k},quoteString(e,h.quotesForFieldNames),":"):reactExports.createElement("span",{className:h.label},quoteString(e,h.quotesForFieldNames),":")),reactExports.createElement("span",{className:h.punctuation},o),I?reactExports.createElement("ul",{id:c,role:"group",className:h.childFieldsContainer},a.map((J,X)=>reactExports.createElement(DataRender,{key:J[0]||X,field:J[0],value:J[1],style:h,lastElement:X===$,level:F,shouldExpandNode:x,clickToExpandNode:m,beforeExpandChange:A,outerRef:w}))):reactExports.createElement("span",{className:h.collapsedContent,onClick:B,onKeyDown:k}),reactExports.createElement("span",{className:h.punctuation},f),!s&&reactExports.createElement("span",{className:h.punctuation},","))}function EmptyObject(r){let{field:e,openBracket:t,closeBracket:a,lastElement:s,style:o}=r;return reactExports.createElement("div",{className:o.basicChildStyle,role:"treeitem","aria-selected":void 0},(e||e==="")&&reactExports.createElement("span",{className:o.label},quoteString(e,o.quotesForFieldNames),":"),reactExports.createElement("span",{className:o.punctuation},t),reactExports.createElement("span",{className:o.punctuation},a),!s&&reactExports.createElement("span",{className:o.punctuation},","))}function JsonObject(r){let{field:e,value:t,style:a,lastElement:s,shouldExpandNode:o,clickToExpandNode:f,level:u,outerRef:h,beforeExpandChange:x}=r;return ExpandableObject({field:e,value:t,lastElement:s||!1,level:u,openBracket:"{",closeBracket:"}",style:a,shouldExpandNode:o,clickToExpandNode:f,data:Object.keys(t).map(m=>[m,t[m]]),outerRef:h,beforeExpandChange:x})}function JsonArray(r){let{field:e,value:t,style:a,lastElement:s,level:o,shouldExpandNode:f,clickToExpandNode:u,outerRef:h,beforeExpandChange:x}=r;return ExpandableObject({field:e,value:t,lastElement:s||!1,level:o,openBracket:"[",closeBracket:"]",style:a,shouldExpandNode:f,clickToExpandNode:u,data:t.map(m=>[void 0,m]),outerRef:h,beforeExpandChange:x})}function JsonPrimitiveValue(r){let{field:e,value:t,style:a,lastElement:s}=r,o,f=a.otherValue;return t===null?(o="null",f=a.nullValue):t===void 0?(o="undefined",f=a.undefinedValue):isString(t)?(o=quoteStringValue(t,!a.noQuotesForStringValues,a.stringifyStringValues),f=a.stringValue):isBoolean(t)?(o=t?"true":"false",f=a.booleanValue):isNumber(t)?(o=t.toString(),f=a.numberValue):isBigInt(t)?(o=`${t.toString()}n`,f=a.numberValue):isDate(t)?o=t.toISOString():isFunction(t)?o="function() { }":o=t.toString(),reactExports.createElement("div",{className:a.basicChildStyle,role:"treeitem","aria-selected":void 0},(e||e==="")&&reactExports.createElement("span",{className:a.label},quoteString(e,a.quotesForFieldNames),":"),reactExports.createElement("span",{className:f},o),!s&&reactExports.createElement("span",{className:a.punctuation},","))}function DataRender(r){const e=r.value;return isArray(e)?reactExports.createElement(JsonArray,Object.assign({},r)):isObject(e)&&!isDate(e)&&!isFunction(e)?reactExports.createElement(JsonObject,Object.assign({},r)):reactExports.createElement(JsonPrimitiveValue,Object.assign({},r))}var styles={"container-light":"_2IvMF _GzYRV","basic-element-style":"_2bkNM","child-fields-container":"_1BXBN","label-light":"_1MGIk","clickable-label-light":"_2YKJg _1MGIk _1MFti","punctuation-light":"_3uHL6 _3eOF8","value-null-light":"_2T6PJ","value-undefined-light":"_1Gho6","value-string-light":"_vGjyY","value-number-light":"_1bQdo","value-boolean-light":"_3zQKs","value-other-light":"_1xvuR","collapse-icon-light":"_oLqym _f10Tu _1MFti _1LId0","expand-icon-light":"_2AXVT _f10Tu _1MFti _1UmXx","collapsed-content-light":"_2KJWg _1pNG9 _1MFti"};const defaultAriaLables={collapseJson:"collapse JSON",expandJson:"expand JSON"},defaultStyles={container:styles["container-light"],basicChildStyle:styles["basic-element-style"],childFieldsContainer:styles["child-fields-container"],label:styles["label-light"],clickableLabel:styles["clickable-label-light"],nullValue:styles["value-null-light"],undefinedValue:styles["value-undefined-light"],stringValue:styles["value-string-light"],booleanValue:styles["value-boolean-light"],numberValue:styles["value-number-light"],otherValue:styles["value-other-light"],punctuation:styles["punctuation-light"],collapseIcon:styles["collapse-icon-light"],expandIcon:styles["expand-icon-light"],collapsedContent:styles["collapsed-content-light"],noQuotesForStringValues:!1,quotesForFieldNames:!1,ariaLables:defaultAriaLables,stringifyStringValues:!1},allExpanded=()=>!0,JsonView=r=>{let{data:e,style:t=defaultStyles,shouldExpandNode:a=allExpanded,clickToExpandNode:s=!1,beforeExpandChange:o,compactTopLevel:f,...u}=r;const h=reactExports.useRef(null);return reactExports.createElement("div",Object.assign({"aria-label":"JSON view"},u,{className:t.container,ref:h,role:"tree"}),f&&isObject(e)?Object.entries(e).map(x=>{let[m,w]=x;return reactExports.createElement(DataRender,{key:m,field:m,value:w,style:{...defaultStyles,...t},lastElement:!0,level:1,shouldExpandNode:a,clickToExpandNode:s,beforeExpandChange:o,outerRef:h})}):reactExports.createElement(DataRender,{value:e,style:{...defaultStyles,...t},lastElement:!0,level:0,shouldExpandNode:a,clickToExpandNode:s,outerRef:h,beforeExpandChange:o}))};function FileTable({title:r,dataArray:e=[],onView:t}){if(!Array.isArray(e)||e.length===0)return null;const a=["File","Download","View"],s=e.map(o=>({File:o.name,Download:jsxRuntimeExports$1.jsx("a",{href:o.downloadUrl||"#",download:o.name||void 0,rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 transition-colors duration-75",children:jsxRuntimeExports$1.jsx(DownloadIcon,{size:18,className:"hover:scale-105 transition-all duration-75"})}),View:jsxRuntimeExports$1.jsx("button",{type:"button",onClick:()=>t?.(o.name,o.downloadUrl),className:"text-green-600 hover:text-green-800 transition-colors duration-75",children:jsxRuntimeExports$1.jsx(ViewIcon,{size:18,className:"hover:scale-105 transition-all duration-75"})})}));return jsxRuntimeExports$1.jsx("div",{children:jsxRuntimeExports$1.jsx(DataTable,{title:r,columns:a,data:s,sortableCols:["File"]})})}function RawDataVisualiser({nodeData:r={}}){const[e,t]=reactExports.useState(null),[a,s]=reactExports.useState(null),[o,f]=reactExports.useState(null),[u,h]=reactExports.useState(!1),x=(D,I)=>{navigator.clipboard.writeText(JSON.stringify(D,null,2)),t(I),setTimeout(()=>t(null),700)},m=async(D,I)=>{try{const l=await(await fetch(I)).text();s(l),f(D),h(!0)}catch(y){console.error("Error loading preview:",y),s("Failed to load preview."),f(D),h(!0)}},w=[{title:"Attributes",data:r.attributes},{title:"Derived Properties",data:r.derived_properties},{title:"Extras",data:r.extras},{title:"Full AIIDA Metadata",data:r.aiida,collapseLevel:0}],A=jsxRuntimeExports$1.jsxs(jsxRuntimeExports$1.Fragment,{children:[jsxRuntimeExports$1.jsx(FileTable,{title:"Download By format",dataArray:r.downloadByFormat?Object.entries(r.downloadByFormat).map(([D,I])=>({name:D,downloadUrl:I})):[],onView:m}),jsxRuntimeExports$1.jsx(FileTable,{title:"Input Files (in this node)",dataArray:r.files?.input_files||[],onView:m}),jsxRuntimeExports$1.jsx(FileTable,{title:"Output Files (retrieved)",dataArray:r.files?.output_files||[],onView:m}),jsxRuntimeExports$1.jsx(FileTable,{title:"Raw Files",dataArray:r.repo_list||[],onView:m})]});return jsxRuntimeExports$1.jsxs("div",{className:"flex flex-col px-3 py-2 gap-2 lg:gap-4",children:[A,w.map((D,I)=>{const y=D.data||{};return Object.keys(y).length===0?null:jsxRuntimeExports$1.jsxs("div",{className:"py-1",children:[jsxRuntimeExports$1.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[jsxRuntimeExports$1.jsx("h3",{className:"text-md lg:text-lg ml-2 font-semibold",children:D.title}),jsxRuntimeExports$1.jsxs("button",{className:"relative flex items-center gap-1 hover:text-blue-500",onClick:()=>x(y,I),children:[jsxRuntimeExports$1.jsx(ClipBoardIcon,{size:22}),jsxRuntimeExports$1.jsxs("div",{className:`absolute left-full ml-2 top-1/2 -translate-y-1/2 flex items-center gap-1 text-green-400 text-sm transition-all duration-400 transform ${e===I?"opacity-100 translate-x-0":"opacity-0 -translate-x-2"}`,children:[jsxRuntimeExports$1.jsx(ClipboardCopyIcon,{size:16}),jsxRuntimeExports$1.jsx("span",{children:"Copied"})]})]})]}),jsxRuntimeExports$1.jsx("div",{className:"max-h-32 md:max-h-96 overflow-auto border border-gray-200 rounded p-2 bg-gray-50",children:jsxRuntimeExports$1.jsx(JsonView,{data:y,shouldExpandNode:l=>l<(D.collapseLevel??1)})})]},I)}),jsxRuntimeExports$1.jsx(Overlay,{active:u,onClose:()=>h(!1),title:`Preview: ${o}`,children:jsxRuntimeExports$1.jsx("pre",{className:"overflow-y-auto whitespace-pre-wrap text-sm flex-1",children:a})})]})}function transpose(r){const e=r.length,t=r[0].length,a=new Array(t);for(let s=0;s<t;s++){a[s]=new Array(e);for(let o=0;o<e;o++)a[s][o]=r[o][s]}return a}const baseColors=["#636EFA","#EF553B","#00CC96","#AB63FA","#FFA15A","#19D3F3","#FF6692","#B6E880","#FF97FF","#FECB52"];function getColor(r){return r<baseColors.length?baseColors[r]:`hsl(${r*47%360}, 70%, 50%)`}function mergeLegendTracesByName(r){const e=new Set;return r.map(a=>{const s=a.name||"",o=!e.has(s);return o&&e.add(s),{...a,legendgroup:s,showlegend:o}})}function getXYData(r){const e=[],t=[];let a=null;return r.paths.forEach((s,o)=>{const f=s.x,u=s.values;o>0&&(e.push(null),t.forEach(h=>h.push(null))),f.forEach((h,x)=>{h===a&&(e.push(null),t.forEach(m=>m.push(null))),e.push(h),a=h,u.forEach((m,w)=>{t[w]||(t[w]=[]),t[w].push(m[x])})})}),{xs:e,ys:t}}function prettifyLabels(r){const e={GAMMA:"Γ",DELTA:"Δ",SIGMA:"Σ",LAMBDA:"Λ"};Object.keys(e).forEach(a=>{const s=new RegExp(a,"gi");r=r.replace(s,e[a])}),r=r.replace(/\bG\b/g,"Γ"),r=r.replace(/-/g,"—");const t={0:"₀",1:"₁",2:"₂",3:"₃",4:"₄",5:"₅",6:"₆",7:"₇",8:"₈",9:"₉"};return r=r.replace(/_(.)/g,(a,s)=>t[s]||a),r}function getXLabelPos(r=td.paths){const e=[0];for(const t of r)t.x.length<3||e.push(t.x[t.x.length-1]);return e}function getXLabelsfromkpath(r){const e=r.flat(),t=[];t.push(e[0]);for(let a=1;a<e.length-1;a++)e[a]===e[a+1]?(t.push(e[a]),a++):(t.push(e[a]+"|"+e[a+1]),a++);return t.push(e[e.length-1]),t}function getXYRangeForAxis(r,e="x",t="y"){let a=1/0,s=-1/0,o=1/0,f=-1/0;for(const u of r){const h=u.xaxis===e||!u.xaxis&&e==="x",x=u.yaxis===t||!u.yaxis&&t==="y";if(!(!h||!x)){for(const m of u.x??[])typeof m=="number"&&(a=Math.min(a,m),s=Math.max(s,m));for(const m of u.y??[])typeof m=="number"&&(o=Math.min(o,m),f=Math.max(f,m))}}return{x:a===1/0?null:[a,s],y:o===1/0?null:[o,f]}}function createFermiLine(r,e,t,a={}){return{x:r,y:e,mode:"lines",type:"scatter",name:`Fermi [${t}eV]`,legendgroup:`fermi-${t}`,showlegend:a.showlegend??!0,line:{color:"green",width:1.25,dash:"dash"},...a}}function addfermiLines(r,e,t,a){const s=[...e];if(t&&!a){const{y:o}=getXYRangeForAxis(e);for(const f of r)s.push(createFermiLine([f,f],[o[0],o[1]],f))}else if(a&&!t){const{x:o}=getXYRangeForAxis(e);for(const f of r)s.push(createFermiLine([o[0],o[1]],[f,f],f))}else if(a&&t){const{x:o}=getXYRangeForAxis(e,"x2","y"),{x:f}=getXYRangeForAxis(e,"x","y");for(const u of r)s.push(createFermiLine([f[0],f[1]],[u,u],u)),s.push(createFermiLine([o[0],o[1]],[u,u],u,{showlegend:!1,xaxis:"x2",yaxis:"y"}))}return s}var cjs,hasRequiredCjs;function requireCjs(){if(hasRequiredCjs)return cjs;hasRequiredCjs=1;var r=function(L){return e(L)&&!t(L)};function e(c){return!!c&&typeof c=="object"}function t(c){var L=Object.prototype.toString.call(c);return L==="[object RegExp]"||L==="[object Date]"||o(c)}var a=typeof Symbol=="function"&&Symbol.for,s=a?Symbol.for("react.element"):60103;function o(c){return c.$$typeof===s}function f(c){return Array.isArray(c)?[]:{}}function u(c,L){return L.clone!==!1&&L.isMergeableObject(c)?y(f(c),c,L):c}function h(c,L,R){return c.concat(L).map(function(F){return u(F,R)})}function x(c,L){if(!L.customMerge)return y;var R=L.customMerge(c);return typeof R=="function"?R:y}function m(c){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(c).filter(function(L){return Object.propertyIsEnumerable.call(c,L)}):[]}function w(c){return Object.keys(c).concat(m(c))}function A(c,L){try{return L in c}catch{return!1}}function D(c,L){return A(c,L)&&!(Object.hasOwnProperty.call(c,L)&&Object.propertyIsEnumerable.call(c,L))}function I(c,L,R){var F={};return R.isMergeableObject(c)&&w(c).forEach(function($){F[$]=u(c[$],R)}),w(L).forEach(function($){D(c,$)||(A(c,$)&&R.isMergeableObject(L[$])?F[$]=x($,R)(c[$],L[$],R):F[$]=u(L[$],R))}),F}function y(c,L,R){R=R||{},R.arrayMerge=R.arrayMerge||h,R.isMergeableObject=R.isMergeableObject||r,R.cloneUnlessOtherwiseSpecified=u;var F=Array.isArray(L),$=Array.isArray(c),b=F===$;return b?F?R.arrayMerge(c,L,R):I(c,L,R):u(L,R)}y.all=function(L,R){if(!Array.isArray(L))throw new Error("first argument should be an array");return L.reduce(function(F,$){return y(F,$,R)},{})};var l=y;return cjs=l,cjs}var cjsExports=requireCjs();const deepmerge=getDefaultExportFromCjs(cjsExports),plotLayoutDefault={title:"Multi Trace Plot with border",hovermode:"closest",uirevision:!0,shapes:[{type:"rect",xref:"paper",yref:"paper",x0:0,y0:0,x1:1,y1:1,line:{color:"black",width:2},layer:"above"}],margin:{l:55,r:10,t:10,b:45},dragmode:"zoom",xaxis:{title:{text:"x-axis",font:{size:18,color:"#212529"}},showgrid:!0,showline:!1,zeroline:!1,ticks:"inside",tickfont:{size:16,color:"#212529"}},yaxis:{title:{text:"y-axis",font:{size:19,color:"#212529"}},showgrid:!0,zeroline:!1,showline:!1,ticks:"inside",color:"#212529",tickfont:{color:"#212529",size:19}},legend:{x:1.01,y:1,xanchor:"left",yanchor:"top",orientation:"v"}},plotBandLayout=deepmerge(plotLayoutDefault,{title:"BSPlot",xaxis:{title:{text:"K-path",font:{size:18,color:"#212529"}},showgrid:!0,showline:!1,zeroline:!1,ticks:"inside",tickfont:{size:16,color:"#212529"}},yaxis:{title:{text:"Energy [eV]",font:{size:19,color:"#212529"}},showgrid:!0,zeroline:!1,showline:!1,ticks:"inside",color:"#212529",tickfont:{color:"#212529",size:19}}}),plotDOSLayout=deepmerge(plotLayoutDefault,{title:"DOSPlot",xaxis:{title:{text:"Energy [eV]",font:{size:18,color:"#212529"}},showgrid:!0,zeroline:!1,ticks:"inside",tickfont:{size:16,color:"#212529"}},yaxis:{title:{text:"Density of States",font:{size:18,color:"#212529"}},showgrid:!0,zeroline:!1,ticks:"inside",tickfont:{size:16,color:"#212529"}}}),plotDOSLayoutF=deepmerge(plotLayoutDefault,{title:"DOSPlot",xaxis:{title:{text:"Density of States",font:{size:18,color:"#212529"}},showgrid:!0,zeroline:!1,ticks:"inside",tickfont:{size:16,color:"#212529"}},yaxis:{title:{text:"Energy [eV]",font:{size:18,color:"#212529"}},showgrid:!0,zeroline:!1,ticks:"inside",tickfont:{size:16,color:"#212529"}}}),plotCombinedLayout={shapes:[{type:"rect",xref:"paper",yref:"paper",x0:0,y0:0,x1:.7,y1:1,line:{color:"black",width:2},layer:"above"},{type:"rect",xref:"paper",yref:"paper",x0:.73,y0:0,x1:1,y1:1,line:{color:"black",width:2},layer:"above"}],grid:{rows:1,columns:2,pattern:"independent"},xaxis:{domain:[0,.7],autorange:!0},xaxis2:{title:{text:"Energy [eV]",font:{size:18}},showgrid:!0,zeroline:!1,ticks:"inside",tickfont:{size:16,color:"#212529"},domain:[.73,1],autorange:!0,showgrid:!0},yaxis:{autorange:!0},margin:{l:60,r:30,b:40,t:40},showlegend:!0,legend:{}},traceDefaultBands={mode:"lines",dash:"solid",line:{color:"rgba(90, 60, 255, 0.85)",width:1},name:"Band Structure"},traceDefaultDos={name:"DOS",legendgroup:"DOS",showlegend:!0,type:"scatter",mode:"lines",dash:"dash",line:{color:"rgba(90, 60, 255, 0.85)",width:2},fill:"toself"};var plotlyBasic$1={exports:{}},plotlyBasic=plotlyBasic$1.exports,hasRequiredPlotlyBasic;function requirePlotlyBasic(){return hasRequiredPlotlyBasic||(hasRequiredPlotlyBasic=1,(function(r){(function(e,t){r.exports?r.exports=t():e.moduleName=t()})(typeof self<"u"?self:plotlyBasic,()=>{var e=(()=>{var t=Object.getOwnPropertyNames,a=(pe,me)=>function(){return me||(0,pe[t(pe)[0]])((me={exports:{}}).exports,me),me.exports},s=a({"src/version.js"(pe){pe.version="3.1.1"}}),o=a({"node_modules/native-promise-only/lib/npo.src.js"(pe,me){(function(v,g,E){g[v]=g[v]||E(),typeof me<"u"&&me.exports&&(me.exports=g[v])})("Promise",typeof window<"u"?window:pe,function(){var v,g,E,S=Object.prototype.toString,T=typeof setImmediate<"u"?function(H){return setImmediate(H)}:setTimeout;try{Object.defineProperty({},"x",{}),v=function(H,Z,ne,te){return Object.defineProperty(H,Z,{value:ne,writable:!0,configurable:te!==!1})}}catch{v=function(Z,ne,te){return Z[ne]=te,Z}}E=(function(){var H,Z,ne;function te(Se,fe){this.fn=Se,this.self=fe,this.next=void 0}return{add:function(fe,ve){ne=new te(fe,ve),Z?Z.next=ne:H=ne,Z=ne,ne=void 0},drain:function(){var fe=H;for(H=Z=g=void 0;fe;)fe.fn.call(fe.self),fe=fe.next}}})();function C(z,H){E.add(z,H),g||(g=T(E.drain))}function P(z){var H,Z=typeof z;return z!=null&&(Z=="object"||Z=="function")&&(H=z.then),typeof H=="function"?H:!1}function p(){for(var z=0;z<this.chain.length;z++)Y(this,this.state===1?this.chain[z].success:this.chain[z].failure,this.chain[z]);this.chain.length=0}function Y(z,H,Z){var ne,te;try{H===!1?Z.reject(z.msg):(H===!0?ne=z.msg:ne=H.call(void 0,z.msg),ne===Z.promise?Z.reject(TypeError("Promise-chain cycle")):(te=P(ne))?te.call(ne,Z.resolve,Z.reject):Z.resolve(ne))}catch(Se){Z.reject(Se)}}function N(z){var H,Z=this;if(!Z.triggered){Z.triggered=!0,Z.def&&(Z=Z.def);try{(H=P(z))?C(function(){var ne=new G(Z);try{H.call(z,function(){N.apply(ne,arguments)},function(){j.apply(ne,arguments)})}catch(te){j.call(ne,te)}}):(Z.msg=z,Z.state=1,Z.chain.length>0&&C(p,Z))}catch(ne){j.call(new G(Z),ne)}}}function j(z){var H=this;H.triggered||(H.triggered=!0,H.def&&(H=H.def),H.msg=z,H.state=2,H.chain.length>0&&C(p,H))}function ee(z,H,Z,ne){for(var te=0;te<H.length;te++)(function(fe){z.resolve(H[fe]).then(function(xe){Z(fe,xe)},ne)})(te)}function G(z){this.def=z,this.triggered=!1}function V(z){this.promise=z,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function W(z){if(typeof z!="function")throw TypeError("Not a function");if(this.__NPO__!==0)throw TypeError("Not a promise");this.__NPO__=1;var H=new V(this);this.then=function(ne,te){var Se={success:typeof ne=="function"?ne:!0,failure:typeof te=="function"?te:!1};return Se.promise=new this.constructor(function(ve,xe){if(typeof ve!="function"||typeof xe!="function")throw TypeError("Not a function");Se.resolve=ve,Se.reject=xe}),H.chain.push(Se),H.state!==0&&C(p,H),Se.promise},this.catch=function(ne){return this.then(void 0,ne)};try{z.call(void 0,function(ne){N.call(H,ne)},function(ne){j.call(H,ne)})}catch(Z){j.call(H,Z)}}var q=v({},"constructor",W,!1);return W.prototype=q,v(q,"__NPO__",0,!1),v(W,"resolve",function(H){var Z=this;return H&&typeof H=="object"&&H.__NPO__===1?H:new Z(function(te,Se){if(typeof te!="function"||typeof Se!="function")throw TypeError("Not a function");te(H)})}),v(W,"reject",function(H){return new this(function(ne,te){if(typeof ne!="function"||typeof te!="function")throw TypeError("Not a function");te(H)})}),v(W,"all",function(H){var Z=this;return S.call(H)!="[object Array]"?Z.reject(TypeError("Not an array")):H.length===0?Z.resolve([]):new Z(function(te,Se){if(typeof te!="function"||typeof Se!="function")throw TypeError("Not a function");var fe=H.length,ve=Array(fe),xe=0;ee(Z,H,function(de,be){ve[de]=be,++xe===fe&&te(ve)},Se)})}),v(W,"race",function(H){var Z=this;return S.call(H)!="[object Array]"?Z.reject(TypeError("Not an array")):new Z(function(te,Se){if(typeof te!="function"||typeof Se!="function")throw TypeError("Not a function");ee(Z,H,function(ve,xe){te(xe)},Se)})}),W})}}),f=a({"node_modules/@plotly/d3/d3.js"(pe,me){(function(){var M={version:"3.8.2"},v=[].slice,g=function(_){return v.call(_)},E=self.document;function S(_){return _&&(_.ownerDocument||_.document||_).documentElement}function T(_){return _&&(_.ownerDocument&&_.ownerDocument.defaultView||_.document&&_||_.defaultView)}if(E)try{g(E.documentElement.childNodes)[0].nodeType}catch{g=function(K){for(var se=K.length,Ne=new Array(se);se--;)Ne[se]=K[se];return Ne}}if(Date.now||(Date.now=function(){return+new Date}),E)try{E.createElement("DIV").style.setProperty("opacity",0,"")}catch{var C=this.Element.prototype,P=C.setAttribute,p=C.setAttributeNS,Y=this.CSSStyleDeclaration.prototype,N=Y.setProperty;C.setAttribute=function(K,se){P.call(this,K,se+"")},C.setAttributeNS=function(K,se,Ne){p.call(this,K,se,Ne+"")},Y.setProperty=function(K,se,Ne){N.call(this,K,se+"",Ne)}}M.ascending=j;function j(_,K){return _<K?-1:_>K?1:_>=K?0:NaN}M.descending=function(_,K){return K<_?-1:K>_?1:K>=_?0:NaN},M.min=function(_,K){var se=-1,Ne=_.length,We,nt;if(arguments.length===1){for(;++se<Ne;)if((nt=_[se])!=null&&nt>=nt){We=nt;break}for(;++se<Ne;)(nt=_[se])!=null&&We>nt&&(We=nt)}else{for(;++se<Ne;)if((nt=K.call(_,_[se],se))!=null&&nt>=nt){We=nt;break}for(;++se<Ne;)(nt=K.call(_,_[se],se))!=null&&We>nt&&(We=nt)}return We},M.max=function(_,K){var se=-1,Ne=_.length,We,nt;if(arguments.length===1){for(;++se<Ne;)if((nt=_[se])!=null&&nt>=nt){We=nt;break}for(;++se<Ne;)(nt=_[se])!=null&&nt>We&&(We=nt)}else{for(;++se<Ne;)if((nt=K.call(_,_[se],se))!=null&&nt>=nt){We=nt;break}for(;++se<Ne;)(nt=K.call(_,_[se],se))!=null&&nt>We&&(We=nt)}return We},M.extent=function(_,K){var se=-1,Ne=_.length,We,nt,Si;if(arguments.length===1){for(;++se<Ne;)if((nt=_[se])!=null&&nt>=nt){We=Si=nt;break}for(;++se<Ne;)(nt=_[se])!=null&&(We>nt&&(We=nt),Si<nt&&(Si=nt))}else{for(;++se<Ne;)if((nt=K.call(_,_[se],se))!=null&&nt>=nt){We=Si=nt;break}for(;++se<Ne;)(nt=K.call(_,_[se],se))!=null&&(We>nt&&(We=nt),Si<nt&&(Si=nt))}return[We,Si]};function ee(_){return _===null?NaN:+_}function G(_){return!isNaN(_)}M.sum=function(_,K){var se=0,Ne=_.length,We,nt=-1;if(arguments.length===1)for(;++nt<Ne;)G(We=+_[nt])&&(se+=We);else for(;++nt<Ne;)G(We=+K.call(_,_[nt],nt))&&(se+=We);return se},M.mean=function(_,K){var se=0,Ne=_.length,We,nt=-1,Si=Ne;if(arguments.length===1)for(;++nt<Ne;)G(We=ee(_[nt]))?se+=We:--Si;else for(;++nt<Ne;)G(We=ee(K.call(_,_[nt],nt)))?se+=We:--Si;if(Si)return se/Si},M.quantile=function(_,K){var se=(_.length-1)*K+1,Ne=Math.floor(se),We=+_[Ne-1],nt=se-Ne;return nt?We+nt*(_[Ne]-We):We},M.median=function(_,K){var se=[],Ne=_.length,We,nt=-1;if(arguments.length===1)for(;++nt<Ne;)G(We=ee(_[nt]))&&se.push(We);else for(;++nt<Ne;)G(We=ee(K.call(_,_[nt],nt)))&&se.push(We);if(se.length)return M.quantile(se.sort(j),.5)},M.variance=function(_,K){var se=_.length,Ne=0,We,nt,Si=0,mr=-1,xs=0;if(arguments.length===1)for(;++mr<se;)G(We=ee(_[mr]))&&(nt=We-Ne,Ne+=nt/++xs,Si+=nt*(We-Ne));else for(;++mr<se;)G(We=ee(K.call(_,_[mr],mr)))&&(nt=We-Ne,Ne+=nt/++xs,Si+=nt*(We-Ne));if(xs>1)return Si/(xs-1)},M.deviation=function(){var _=M.variance.apply(this,arguments);return _&&Math.sqrt(_)};function V(_){return{left:function(K,se,Ne,We){for(arguments.length<3&&(Ne=0),arguments.length<4&&(We=K.length);Ne<We;){var nt=Ne+We>>>1;_(K[nt],se)<0?Ne=nt+1:We=nt}return Ne},right:function(K,se,Ne,We){for(arguments.length<3&&(Ne=0),arguments.length<4&&(We=K.length);Ne<We;){var nt=Ne+We>>>1;_(K[nt],se)>0?We=nt:Ne=nt+1}return Ne}}}var W=V(j);M.bisectLeft=W.left,M.bisect=M.bisectRight=W.right,M.bisector=function(_){return V(_.length===1?function(K,se){return j(_(K),se)}:_)},M.shuffle=function(_,K,se){(Ne=arguments.length)<3&&(se=_.length,Ne<2&&(K=0));for(var Ne=se-K,We,nt;Ne;)nt=Math.random()*Ne--|0,We=_[Ne+K],_[Ne+K]=_[nt+K],_[nt+K]=We;return _},M.permute=function(_,K){for(var se=K.length,Ne=new Array(se);se--;)Ne[se]=_[K[se]];return Ne},M.pairs=function(_){for(var K=0,se=_.length-1,Ne=_[0],We=new Array(se<0?0:se);K<se;)We[K]=[Ne,Ne=_[++K]];return We},M.transpose=function(_){if(!(nt=_.length))return[];for(var K=-1,se=M.min(_,q),Ne=new Array(se);++K<se;)for(var We=-1,nt,Si=Ne[K]=new Array(nt);++We<nt;)Si[We]=_[We][K];return Ne};function q(_){return _.length}M.zip=function(){return M.transpose(arguments)},M.keys=function(_){var K=[];for(var se in _)K.push(se);return K},M.values=function(_){var K=[];for(var se in _)K.push(_[se]);return K},M.entries=function(_){var K=[];for(var se in _)K.push({key:se,value:_[se]});return K},M.merge=function(_){for(var K=_.length,se,Ne=-1,We=0,nt,Si;++Ne<K;)We+=_[Ne].length;for(nt=new Array(We);--K>=0;)for(Si=_[K],se=Si.length;--se>=0;)nt[--We]=Si[se];return nt};var z=Math.abs;M.range=function(_,K,se){if(arguments.length<3&&(se=1,arguments.length<2&&(K=_,_=0)),(K-_)/se===1/0)throw new Error("infinite range");var Ne=[],We=H(z(se)),nt=-1,Si;if(_*=We,K*=We,se*=We,se<0)for(;(Si=_+se*++nt)>K;)Ne.push(Si/We);else for(;(Si=_+se*++nt)<K;)Ne.push(Si/We);return Ne};function H(_){for(var K=1;_*K%1;)K*=10;return K}function Z(_,K){for(var se in K)Object.defineProperty(_.prototype,se,{value:K[se],enumerable:!1})}M.map=function(_,K){var se=new ne;if(_ instanceof ne)_.forEach(function(mr,xs){se.set(mr,xs)});else if(Array.isArray(_)){var Ne=-1,We=_.length,nt;if(arguments.length===1)for(;++Ne<We;)se.set(Ne,_[Ne]);else for(;++Ne<We;)se.set(K.call(_,nt=_[Ne],Ne),nt)}else for(var Si in _)se.set(Si,_[Si]);return se};function ne(){this._=Object.create(null)}var te="__proto__",Se="\0";Z(ne,{has:xe,get:function(_){return this._[fe(_)]},set:function(_,K){return this._[fe(_)]=K},remove:re,keys:de,values:function(){var _=[];for(var K in this._)_.push(this._[K]);return _},entries:function(){var _=[];for(var K in this._)_.push({key:ve(K),value:this._[K]});return _},size:be,empty:Te,forEach:function(_){for(var K in this._)_.call(this,ve(K),this._[K])}});function fe(_){return(_+="")===te||_[0]===Se?Se+_:_}function ve(_){return(_+="")[0]===Se?_.slice(1):_}function xe(_){return fe(_)in this._}function re(_){return(_=fe(_))in this._&&delete this._[_]}function de(){var _=[];for(var K in this._)_.push(ve(K));return _}function be(){var _=0;for(var K in this._)++_;return _}function Te(){for(var _ in this._)return!1;return!0}M.nest=function(){var _={},K=[],se=[],Ne,We;function nt(mr,xs,ql){if(ql>=K.length)return We?We.call(_,xs):Ne?xs.sort(Ne):xs;for(var wp=-1,Xp=xs.length,Zp=K[ql++],D0,H0,i0,w0=new ne,A0;++wp<Xp;)(A0=w0.get(D0=Zp(H0=xs[wp])))?A0.push(H0):w0.set(D0,[H0]);return mr?(H0=mr(),i0=function(G0,Y0){H0.set(G0,nt(mr,Y0,ql))}):(H0={},i0=function(G0,Y0){H0[G0]=nt(mr,Y0,ql)}),w0.forEach(i0),H0}function Si(mr,xs){if(xs>=K.length)return mr;var ql=[],wp=se[xs++];return mr.forEach(function(Xp,Zp){ql.push({key:Xp,values:Si(Zp,xs)})}),wp?ql.sort(function(Xp,Zp){return wp(Xp.key,Zp.key)}):ql}return _.map=function(mr,xs){return nt(xs,mr,0)},_.entries=function(mr){return Si(nt(M.map,mr,0),0)},_.key=function(mr){return K.push(mr),_},_.sortKeys=function(mr){return se[K.length-1]=mr,_},_.sortValues=function(mr){return Ne=mr,_},_.rollup=function(mr){return We=mr,_},_},M.set=function(_){var K=new ye;if(_)for(var se=0,Ne=_.length;se<Ne;++se)K.add(_[se]);return K};function ye(){this._=Object.create(null)}Z(ye,{has:xe,add:function(_){return this._[fe(_+="")]=!0,_},remove:re,values:de,size:be,empty:Te,forEach:function(_){for(var K in this._)_.call(this,ve(K))}}),M.behavior={};function De(_){return _}M.rebind=function(_,K){for(var se=1,Ne=arguments.length,We;++se<Ne;)_[We=arguments[se]]=Ue(_,K,K[We]);return _};function Ue(_,K,se){return function(){var Ne=se.apply(K,arguments);return Ne===K?_:Ne}}function he(_,K){if(K in _)return K;K=K.charAt(0).toUpperCase()+K.slice(1);for(var se=0,Ne=Be.length;se<Ne;++se){var We=Be[se]+K;if(We in _)return We}}var Be=["webkit","ms","moz","Moz","o","O"];function Ye(){}M.dispatch=function(){for(var _=new et,K=-1,se=arguments.length;++K<se;)_[arguments[K]]=Qe(_);return _};function et(){}et.prototype.on=function(_,K){var se=_.indexOf("."),Ne="";if(se>=0&&(Ne=_.slice(se+1),_=_.slice(0,se)),_)return arguments.length<2?this[_].on(Ne):this[_].on(Ne,K);if(arguments.length===2){if(K==null)for(_ in this)this.hasOwnProperty(_)&&this[_].on(Ne,null);return this}};function Qe(_){var K=[],se=new ne;function Ne(){for(var We=K,nt=-1,Si=We.length,mr;++nt<Si;)(mr=We[nt].on)&&mr.apply(this,arguments);return _}return Ne.on=function(We,nt){var Si=se.get(We),mr;return arguments.length<2?Si&&Si.on:(Si&&(Si.on=null,K=K.slice(0,mr=K.indexOf(Si)).concat(K.slice(mr+1)),se.remove(We)),nt&&K.push(se.set(We,{on:nt})),_)},Ne}M.event=null;function ft(){M.event.preventDefault()}function mn(){for(var _=M.event,K;K=_.sourceEvent;)_=K;return _}function ta(_){for(var K=new et,se=0,Ne=arguments.length;++se<Ne;)K[arguments[se]]=Qe(K);return K.of=function(We,nt){return function(Si){try{var mr=Si.sourceEvent=M.event;Si.target=_,M.event=Si,K[Si.type].apply(We,nt)}finally{M.event=mr}}},K}M.requote=function(_){return _.replace(Do,"\\$&")};var Do=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Ae={}.__proto__?function(_,K){_.__proto__=K}:function(_,K){for(var se in K)_[se]=K[se]};function ke(_){return Ae(_,Re),_}var ge=function(_,K){return K.querySelector(_)},Ce=function(_,K){return K.querySelectorAll(_)},Je=function(_,K){var se=_.matches||_[he(_,"matchesSelector")];return Je=function(Ne,We){return se.call(Ne,We)},Je(_,K)};typeof Sizzle=="function"&&(ge=function(_,K){return Sizzle(_,K)[0]||null},Ce=Sizzle,Je=Sizzle.matchesSelector),M.selection=function(){return M.select(E.documentElement)};var Re=M.selection.prototype=[];Re.select=function(_){var K=[],se,Ne,We,nt;_=Q(_);for(var Si=-1,mr=this.length;++Si<mr;){K.push(se=[]),se.parentNode=(We=this[Si]).parentNode;for(var xs=-1,ql=We.length;++xs<ql;)(nt=We[xs])?(se.push(Ne=_.call(nt,nt.__data__,xs,Si)),Ne&&"__data__"in nt&&(Ne.__data__=nt.__data__)):se.push(null)}return ke(K)};function Q(_){return typeof _=="function"?_:function(){return ge(_,this)}}Re.selectAll=function(_){var K=[],se,Ne;_=ce(_);for(var We=-1,nt=this.length;++We<nt;)for(var Si=this[We],mr=-1,xs=Si.length;++mr<xs;)(Ne=Si[mr])&&(K.push(se=g(_.call(Ne,Ne.__data__,mr,We))),se.parentNode=Ne);return ke(K)};function ce(_){return typeof _=="function"?_:function(){return Ce(_,this)}}var Me="http://www.w3.org/1999/xhtml",Le={svg:"http://www.w3.org/2000/svg",xhtml:Me,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};M.ns={prefix:Le,qualify:function(_){var K=_.indexOf(":"),se=_;return K>=0&&(se=_.slice(0,K))!=="xmlns"&&(_=_.slice(K+1)),Le.hasOwnProperty(se)?{space:Le[se],local:_}:_}},Re.attr=function(_,K){if(arguments.length<2){if(typeof _=="string"){var se=this.node();return _=M.ns.qualify(_),_.local?se.getAttributeNS(_.space,_.local):se.getAttribute(_)}for(K in _)this.each(tt(K,_[K]));return this}return this.each(tt(_,K))};function tt(_,K){_=M.ns.qualify(_);function se(){this.removeAttribute(_)}function Ne(){this.removeAttributeNS(_.space,_.local)}function We(){this.setAttribute(_,K)}function nt(){this.setAttributeNS(_.space,_.local,K)}function Si(){var xs=K.apply(this,arguments);xs==null?this.removeAttribute(_):this.setAttribute(_,xs)}function mr(){var xs=K.apply(this,arguments);xs==null?this.removeAttributeNS(_.space,_.local):this.setAttributeNS(_.space,_.local,xs)}return K==null?_.local?Ne:se:typeof K=="function"?_.local?mr:Si:_.local?nt:We}function bt(_){return _.trim().replace(/\s+/g," ")}Re.classed=function(_,K){if(arguments.length<2){if(typeof _=="string"){var se=this.node(),Ne=(_=yi(_)).length,We=-1;if(K=se.classList){for(;++We<Ne;)if(!K.contains(_[We]))return!1}else for(K=se.getAttribute("class");++We<Ne;)if(!Ct(_[We]).test(K))return!1;return!0}for(K in _)this.each(Fl(K,_[K]));return this}return this.each(Fl(_,K))};function Ct(_){return new RegExp("(?:^|\\s+)"+M.requote(_)+"(?:\\s+|$)","g")}function yi(_){return(_+"").trim().split(/^|\s+/)}function Fl(_,K){_=yi(_).map(Yl);var se=_.length;function Ne(){for(var nt=-1;++nt<se;)_[nt](this,K)}function We(){for(var nt=-1,Si=K.apply(this,arguments);++nt<se;)_[nt](this,Si)}return typeof K=="function"?We:Ne}function Yl(_){var K=Ct(_);return function(se,Ne){if(We=se.classList)return Ne?We.add(_):We.remove(_);var We=se.getAttribute("class")||"";Ne?(K.lastIndex=0,K.test(We)||se.setAttribute("class",bt(We+" "+_))):se.setAttribute("class",bt(We.replace(K," ")))}}Re.style=function(_,K,se){var Ne=arguments.length;if(Ne<3){if(typeof _!="string"){Ne<2&&(K="");for(se in _)this.each(qp(se,_[se],K));return this}if(Ne<2){var We=this.node();return T(We).getComputedStyle(We,null).getPropertyValue(_)}se=""}return this.each(qp(_,K,se))};function qp(_,K,se){function Ne(){this.style.removeProperty(_)}function We(){this.style.setProperty(_,K,se)}function nt(){var Si=K.apply(this,arguments);Si==null?this.style.removeProperty(_):this.style.setProperty(_,Si,se)}return K==null?Ne:typeof K=="function"?nt:We}Re.property=function(_,K){if(arguments.length<2){if(typeof _=="string")return this.node()[_];for(K in _)this.each(Fp(K,_[K]));return this}return this.each(Fp(_,K))};function Fp(_,K){function se(){delete this[_]}function Ne(){this[_]=K}function We(){var nt=K.apply(this,arguments);nt==null?delete this[_]:this[_]=nt}return K==null?se:typeof K=="function"?We:Ne}Re.text=function(_){return arguments.length?this.each(typeof _=="function"?function(){var K=_.apply(this,arguments);this.textContent=K??""}:_==null?function(){this.textContent=""}:function(){this.textContent=_}):this.node().textContent},Re.html=function(_){return arguments.length?this.each(typeof _=="function"?function(){var K=_.apply(this,arguments);this.innerHTML=K??""}:_==null?function(){this.innerHTML=""}:function(){this.innerHTML=_}):this.node().innerHTML},Re.append=function(_){return _=Up(_),this.select(function(){return this.appendChild(_.apply(this,arguments))})};function Up(_){function K(){var Ne=this.ownerDocument,We=this.namespaceURI;return We===Me&&Ne.documentElement.namespaceURI===Me?Ne.createElement(_):Ne.createElementNS(We,_)}function se(){return this.ownerDocument.createElementNS(_.space,_.local)}return typeof _=="function"?_:(_=M.ns.qualify(_)).local?se:K}Re.insert=function(_,K){return _=Up(_),K=Q(K),this.select(function(){return this.insertBefore(_.apply(this,arguments),K.apply(this,arguments)||null)})},Re.remove=function(){return this.each(_r)};function _r(){var _=this.parentNode;_&&_.removeChild(this)}Re.data=function(_,K){var se=-1,Ne=this.length,We,nt;if(!arguments.length){for(_=new Array(Ne=(We=this[0]).length);++se<Ne;)(nt=We[se])&&(_[se]=nt.__data__);return _}function Si(wp,Xp){var Zp,D0=wp.length,H0=Xp.length,i0=Math.min(D0,H0),w0=new Array(H0),A0=new Array(H0),G0=new Array(D0),Y0,C0;if(K){var n=new ne,i=new Array(D0),d;for(Zp=-1;++Zp<D0;)(Y0=wp[Zp])&&(n.has(d=K.call(Y0,Y0.__data__,Zp))?G0[Zp]=Y0:n.set(d,Y0),i[Zp]=d);for(Zp=-1;++Zp<H0;)(Y0=n.get(d=K.call(Xp,C0=Xp[Zp],Zp)))?Y0!==!0&&(w0[Zp]=Y0,Y0.__data__=C0):A0[Zp]=gs(C0),n.set(d,!0);for(Zp=-1;++Zp<D0;)Zp in i&&n.get(i[Zp])!==!0&&(G0[Zp]=wp[Zp])}else{for(Zp=-1;++Zp<i0;)Y0=wp[Zp],C0=Xp[Zp],Y0?(Y0.__data__=C0,w0[Zp]=Y0):A0[Zp]=gs(C0);for(;Zp<H0;++Zp)A0[Zp]=gs(Xp[Zp]);for(;Zp<D0;++Zp)G0[Zp]=wp[Zp]}A0.update=w0,A0.parentNode=w0.parentNode=G0.parentNode=wp.parentNode,mr.push(A0),xs.push(w0),ql.push(G0)}var mr=Hp([]),xs=ke([]),ql=ke([]);if(typeof _=="function")for(;++se<Ne;)Si(We=this[se],_.call(We,We.parentNode.__data__,se));else for(;++se<Ne;)Si(We=this[se],_);return xs.enter=function(){return mr},xs.exit=function(){return ql},xs};function gs(_){return{__data__:_}}Re.datum=function(_){return arguments.length?this.property("__data__",_):this.property("__data__")},Re.filter=function(_){var K=[],se,Ne,We;typeof _!="function"&&(_=dr(_));for(var nt=0,Si=this.length;nt<Si;nt++){K.push(se=[]),se.parentNode=(Ne=this[nt]).parentNode;for(var mr=0,xs=Ne.length;mr<xs;mr++)(We=Ne[mr])&&_.call(We,We.__data__,mr,nt)&&se.push(We)}return ke(K)};function dr(_){return function(){return Je(this,_)}}Re.order=function(){for(var _=-1,K=this.length;++_<K;)for(var se=this[_],Ne=se.length-1,We=se[Ne],nt;--Ne>=0;)(nt=se[Ne])&&(We&&We!==nt.nextSibling&&We.parentNode.insertBefore(nt,We),We=nt);return this},Re.sort=function(_){_=Lo.apply(this,arguments);for(var K=-1,se=this.length;++K<se;)this[K].sort(_);return this.order()};function Lo(_){return arguments.length||(_=j),function(K,se){return K&&se?_(K.__data__,se.__data__):!K-!se}}Re.each=function(_){return Cp(this,function(K,se,Ne){_.call(K,K.__data__,se,Ne)})};function Cp(_,K){for(var se=0,Ne=_.length;se<Ne;se++)for(var We=_[se],nt=0,Si=We.length,mr;nt<Si;nt++)(mr=We[nt])&&K(mr,nt,se);return _}Re.call=function(_){var K=g(arguments);return _.apply(K[0]=this,K),this},Re.empty=function(){return!this.node()},Re.node=function(){for(var _=0,K=this.length;_<K;_++)for(var se=this[_],Ne=0,We=se.length;Ne<We;Ne++){var nt=se[Ne];if(nt)return nt}return null},Re.size=function(){var _=0;return Cp(this,function(){++_}),_};function Hp(_){return Ae(_,e0),_}var e0=[];M.selection.enter=Hp,M.selection.enter.prototype=e0,e0.append=Re.append,e0.empty=Re.empty,e0.node=Re.node,e0.call=Re.call,e0.size=Re.size,e0.select=function(_){for(var K=[],se,Ne,We,nt,Si,mr=-1,xs=this.length;++mr<xs;){We=(nt=this[mr]).update,K.push(se=[]),se.parentNode=nt.parentNode;for(var ql=-1,wp=nt.length;++ql<wp;)(Si=nt[ql])?(se.push(We[ql]=Ne=_.call(nt.parentNode,Si.__data__,ql,mr)),Ne.__data__=Si.__data__):se.push(null)}return ke(K)},e0.insert=function(_,K){return arguments.length<2&&(K=t0(this)),Re.insert.call(this,_,K)};function t0(_){var K,se;return function(Ne,We,nt){var Si=_[nt].update,mr=Si.length,xs;for(nt!=se&&(se=nt,K=0),We>=K&&(K=We+1);!(xs=Si[K])&&++K<mr;);return xs}}M.select=function(_){var K;return typeof _=="string"?(K=[ge(_,E)],K.parentNode=E.documentElement):(K=[_],K.parentNode=S(_)),ke([K])},M.selectAll=function(_){var K;return typeof _=="string"?(K=g(Ce(_,E)),K.parentNode=E.documentElement):(K=g(_),K.parentNode=null),ke([K])},Re.on=function(_,K,se){var Ne=arguments.length;if(Ne<3){if(typeof _!="string"){Ne<2&&(K=!1);for(se in _)this.each(n0(se,_[se],K));return this}if(Ne<2)return(Ne=this.node()["__on"+_])&&Ne._;se=!1}return this.each(n0(_,K,se))};function n0(_,K,se){var Ne="__on"+_,We=_.indexOf("."),nt=h0;We>0&&(_=_.slice(0,We));var Si=y0.get(_);Si&&(_=Si,nt=I0);function mr(){var wp=this[Ne];wp&&(this.removeEventListener(_,wp,wp.$),delete this[Ne])}function xs(){var wp=nt(K,g(arguments));mr.call(this),this.addEventListener(_,this[Ne]=wp,wp.$=se),wp._=K}function ql(){var wp=new RegExp("^__on([^.]+)"+M.requote(_)+"$"),Xp;for(var Zp in this)if(Xp=Zp.match(wp)){var D0=this[Zp];this.removeEventListener(Xp[1],D0,D0.$),delete this[Zp]}}return We?K?xs:mr:K?Ye:ql}var y0=M.map({mouseenter:"mouseover",mouseleave:"mouseout"});E&&y0.forEach(function(_){"on"+_ in E&&y0.remove(_)});function h0(_,K){return function(se){var Ne=M.event;M.event=se,K[0]=this.__data__;try{_.apply(this,K)}finally{M.event=Ne}}}function I0(_,K){var se=h0(_,K);return function(Ne){var We=this,nt=Ne.relatedTarget;(!nt||nt!==We&&!(nt.compareDocumentPosition(We)&8))&&se.call(We,Ne)}}var Kp,B0=0;function em(_){var K=".dragsuppress-"+ ++B0,se="click"+K,Ne=M.select(T(_)).on("touchmove"+K,ft).on("dragstart"+K,ft).on("selectstart"+K,ft);if(Kp==null&&(Kp="onselectstart"in _?!1:he(_.style,"userSelect")),Kp){var We=S(_).style,nt=We[Kp];We[Kp]="none"}return function(Si){if(Ne.on(K,null),Kp&&(We[Kp]=nt),Si){var mr=function(){Ne.on(se,null)};Ne.on(se,function(){ft(),mr()},!0),setTimeout(mr,0)}}}M.mouse=function(_){return J0(_,mn())};var k0=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function J0(_,K){K.changedTouches&&(K=K.changedTouches[0]);var se=_.ownerSVGElement||_;if(se.createSVGPoint){var Ne=se.createSVGPoint();if(k0<0){var We=T(_);if(We.scrollX||We.scrollY){se=M.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var nt=se[0][0].getScreenCTM();k0=!(nt.f||nt.e),se.remove()}}return k0?(Ne.x=K.pageX,Ne.y=K.pageY):(Ne.x=K.clientX,Ne.y=K.clientY),Ne=Ne.matrixTransform(_.getScreenCTM().inverse()),[Ne.x,Ne.y]}var Si=_.getBoundingClientRect();return[K.clientX-Si.left-_.clientLeft,K.clientY-Si.top-_.clientTop]}M.touch=function(_,K,se){if(arguments.length<3&&(se=K,K=mn().changedTouches),K){for(var Ne=0,We=K.length,nt;Ne<We;++Ne)if((nt=K[Ne]).identifier===se)return J0(_,nt)}},M.behavior.drag=function(){var _=ta(We,"drag","dragstart","dragend"),K=null,se=nt(Ye,M.mouse,T,"mousemove","mouseup"),Ne=nt(vs,M.touch,De,"touchmove","touchend");function We(){this.on("mousedown.drag",se).on("touchstart.drag",Ne)}function nt(Si,mr,xs,ql,wp){return function(){var Xp=this,Zp=M.event.target.correspondingElement||M.event.target,D0=Xp.parentNode,H0=_.of(Xp,arguments),i0=0,w0=Si(),A0=".drag"+(w0==null?"":"-"+w0),G0,Y0=M.select(xs(Zp)).on(ql+A0,i).on(wp+A0,d),C0=em(Zp),n=mr(D0,w0);K?(G0=K.apply(Xp,arguments),G0=[G0.x-n[0],G0.y-n[1]]):G0=[0,0],H0({type:"dragstart"});function i(){var O=mr(D0,w0),le,Ee;O&&(le=O[0]-n[0],Ee=O[1]-n[1],i0|=le|Ee,n=O,H0({type:"drag",x:O[0]+G0[0],y:O[1]+G0[1],dx:le,dy:Ee}))}function d(){mr(D0,w0)&&(Y0.on(ql+A0,null).on(wp+A0,null),C0(i0),H0({type:"dragend"}))}}}return We.origin=function(Si){return arguments.length?(K=Si,We):K},M.rebind(We,_,"on")};function vs(){return M.event.changedTouches[0].identifier}M.touches=function(_,K){return arguments.length<2&&(K=mn().touches),K?g(K).map(function(se){var Ne=J0(_,se);return Ne.identifier=se.identifier,Ne}):[]};var jl=1e-6,zl=jl*jl,Ve=Math.PI,pn=2*Ve,ci=pn-jl,_n=Ve/2,Tp=Ve/180,Sp=180/Ve;function Ip(_,K,se){return(K[0]-_[0])*(se[1]-_[1])-(K[1]-_[1])*(se[0]-_[0])}function Jp(_){return _>1?_n:_<-1?-_n:Math.asin(_)}function m0(_){return((_=Math.exp(_))-1/_)/2}function Dp(_){return((_=Math.exp(_))+1/_)/2}function c0(_){return((_=Math.exp(2*_))-1)/(_+1)}var b0=Math.SQRT2,E0=2,gm=4;M.interpolateZoom=function(_,K){var se=_[0],Ne=_[1],We=_[2],nt=K[0],Si=K[1],mr=K[2],xs=nt-se,ql=Si-Ne,wp=xs*xs+ql*ql,Xp,Zp;if(wp<zl)Zp=Math.log(mr/We)/b0,Xp=function(G0){return[se+G0*xs,Ne+G0*ql,We*Math.exp(b0*G0*Zp)]};else{var D0=Math.sqrt(wp),H0=(mr*mr-We*We+gm*wp)/(2*We*E0*D0),i0=(mr*mr-We*We-gm*wp)/(2*mr*E0*D0),w0=Math.log(Math.sqrt(H0*H0+1)-H0),A0=Math.log(Math.sqrt(i0*i0+1)-i0);Zp=(A0-w0)/b0,Xp=function(G0){var Y0=G0*Zp,C0=Dp(w0),n=We/(E0*D0)*(C0*c0(b0*Y0+w0)-m0(w0));return[se+n*xs,Ne+n*ql,We*C0/Dp(b0*Y0+w0)]}}return Xp.duration=Zp*1e3,Xp},M.behavior.zoom=function(){var _={x:0,y:0,k:1},K,se,Ne,We=[960,500],nt=Nm,Si=250,mr=0,xs="mousedown.zoom",ql="mousemove.zoom",wp="mouseup.zoom",Xp,Zp="touchstart.zoom",D0,H0=ta(Y0,"zoomstart","zoom","zoomend"),i0,w0,A0,G0;xm||(xm="onwheel"in E?(Bm=function(){return-M.event.deltaY*(M.event.deltaMode?120:1)},"wheel"):"onmousewheel"in E?(Bm=function(){return M.event.wheelDelta},"mousewheel"):(Bm=function(){return-M.event.detail},"MozMousePixelScroll"));function Y0(T0){T0.on(xs,f0).on(xm+".zoom",ym).on("dblclick.zoom",_m).on(Zp,Z0)}Y0.event=function(T0){T0.each(function(){var Q0=H0.of(this,arguments),km=_;B_?M.select(this).transition().each("start.zoom",function(){_=this.__chart__||{x:0,y:0,k:1},Ee(Q0)}).tween("zoom:zoom",function(){var Wm=We[0],Av=We[1],$0=se?se[0]:Wm/2,U0=se?se[1]:Av/2,om=M.interpolateZoom([($0-_.x)/_.k,(U0-_.y)/_.k,Wm/_.k],[($0-km.x)/km.k,(U0-km.y)/km.k,Wm/km.k]);return function(Mm){var nv=om(Mm),Fv=Wm/nv[2];this.__chart__=_={x:$0-nv[0]*Fv,y:U0-nv[1]*Fv,k:Fv},ms(Q0)}}).each("interrupt.zoom",function(){Hl(Q0)}).each("end.zoom",function(){Hl(Q0)}):(this.__chart__=_,Ee(Q0),ms(Q0),Hl(Q0))})},Y0.translate=function(T0){return arguments.length?(_={x:+T0[0],y:+T0[1],k:_.k},le(),Y0):[_.x,_.y]},Y0.scale=function(T0){return arguments.length?(_={x:_.x,y:_.y,k:null},i(+T0),le(),Y0):_.k},Y0.scaleExtent=function(T0){return arguments.length?(nt=T0==null?Nm:[+T0[0],+T0[1]],Y0):nt},Y0.center=function(T0){return arguments.length?(Ne=T0&&[+T0[0],+T0[1]],Y0):Ne},Y0.size=function(T0){return arguments.length?(We=T0&&[+T0[0],+T0[1]],Y0):We},Y0.duration=function(T0){return arguments.length?(Si=+T0,Y0):Si},Y0.x=function(T0){return arguments.length?(w0=T0,i0=T0.copy(),_={x:0,y:0,k:1},Y0):w0},Y0.y=function(T0){return arguments.length?(G0=T0,A0=T0.copy(),_={x:0,y:0,k:1},Y0):G0};function C0(T0){return[(T0[0]-_.x)/_.k,(T0[1]-_.y)/_.k]}function n(T0){return[T0[0]*_.k+_.x,T0[1]*_.k+_.y]}function i(T0){_.k=Math.max(nt[0],Math.min(nt[1],T0))}function d(T0,Q0){Q0=n(Q0),_.x+=T0[0]-Q0[0],_.y+=T0[1]-Q0[1]}function O(T0,Q0,km,Wm){T0.__chart__={x:_.x,y:_.y,k:_.k},i(Math.pow(2,Wm)),d(se=Q0,km),T0=M.select(T0),Si>0&&(T0=T0.transition().duration(Si)),T0.call(Y0.event)}function le(){w0&&w0.domain(i0.range().map(function(T0){return(T0-_.x)/_.k}).map(i0.invert)),G0&&G0.domain(A0.range().map(function(T0){return(T0-_.y)/_.k}).map(A0.invert))}function Ee(T0){mr++||T0({type:"zoomstart"})}function ms(T0){le(),T0({type:"zoom",scale:_.k,translate:[_.x,_.y]})}function Hl(T0){--mr||(T0({type:"zoomend"}),se=null)}function f0(){var T0=this,Q0=H0.of(T0,arguments),km=0,Wm=M.select(T(T0)).on(ql,U0).on(wp,om),Av=C0(M.mouse(T0)),$0=em(T0);qx.call(T0),Ee(Q0);function U0(){km=1,d(M.mouse(T0),Av),ms(Q0)}function om(){Wm.on(ql,null).on(wp,null),$0(km),Hl(Q0)}}function Z0(){var T0=this,Q0=H0.of(T0,arguments),km={},Wm=0,Av,$0=".zoom-"+M.event.changedTouches[0].identifier,U0="touchmove"+$0,om="touchend"+$0,Mm=[],nv=M.select(T0),Fv=em(T0);Sv(),Ee(Q0),nv.on(xs,null).on(Zp,Sv);function Jm(){var vg=M.touches(T0);return Av=_.k,vg.forEach(function(gg){gg.identifier in km&&(km[gg.identifier]=C0(gg))}),vg}function Sv(){var vg=M.event.target;M.select(vg).on(U0,qv).on(om,m1),Mm.push(vg);for(var gg=M.event.changedTouches,Hy=0,G_=gg.length;Hy<G_;++Hy)km[gg[Hy].identifier]=null;var jy=Jm(),Yb=Date.now();if(jy.length===1){if(Yb-D0<500){var Yx=jy[0];O(T0,Yx,km[Yx.identifier],Math.floor(Math.log(_.k)/Math.LN2)+1),ft()}D0=Yb}else if(jy.length>1){var Yx=jy[0],J2=jy[1],V5=Yx[0]-J2[0],fw=Yx[1]-J2[1];Wm=V5*V5+fw*fw}}function qv(){var vg=M.touches(T0),gg,Hy,G_,jy;qx.call(T0);for(var Yb=0,Yx=vg.length;Yb<Yx;++Yb,jy=null)if(G_=vg[Yb],jy=km[G_.identifier]){if(Hy)break;gg=G_,Hy=jy}if(jy){var J2=(J2=G_[0]-gg[0])*J2+(J2=G_[1]-gg[1])*J2,V5=Wm&&Math.sqrt(J2/Wm);gg=[(gg[0]+G_[0])/2,(gg[1]+G_[1])/2],Hy=[(Hy[0]+jy[0])/2,(Hy[1]+jy[1])/2],i(V5*Av)}D0=null,d(gg,Hy),ms(Q0)}function m1(){if(M.event.touches.length){for(var vg=M.event.changedTouches,gg=0,Hy=vg.length;gg<Hy;++gg)delete km[vg[gg].identifier];for(var G_ in km)return void Jm()}M.selectAll(Mm).on($0,null),nv.on(xs,f0).on(Zp,Z0),Fv(),Hl(Q0)}}function ym(){var T0=H0.of(this,arguments);Xp?clearTimeout(Xp):(qx.call(this),K=C0(se=Ne||M.mouse(this)),Ee(T0)),Xp=setTimeout(function(){Xp=null,Hl(T0)},50),ft(),i(Math.pow(2,Bm()*.002)*_.k),d(se,K),ms(T0)}function _m(){var T0=M.mouse(this),Q0=Math.log(_.k)/Math.LN2;O(this,T0,C0(T0),M.event.shiftKey?Math.ceil(Q0)-1:Math.floor(Q0)+1)}return M.rebind(Y0,H0,"on")};var Nm=[0,1/0],Bm,xm;M.color=Am;function Am(){}Am.prototype.toString=function(){return this.rgb()+""},M.hsl=mm;function mm(_,K,se){return this instanceof mm?(this.h=+_,this.s=+K,void(this.l=+se)):arguments.length<2?_ instanceof mm?new mm(_.h,_.s,_.l):Pp(""+_,s0,mm):new mm(_,K,se)}var vm=mm.prototype=new Am;vm.brighter=function(_){return _=Math.pow(.7,arguments.length?_:1),new mm(this.h,this.s,this.l/_)},vm.darker=function(_){return _=Math.pow(.7,arguments.length?_:1),new mm(this.h,this.s,_*this.l)},vm.rgb=function(){return Om(this.h,this.s,this.l)};function Om(_,K,se){var Ne,We;_=isNaN(_)?0:(_%=360)<0?_+360:_,K=isNaN(K)||K<0?0:K>1?1:K,se=se<0?0:se>1?1:se,We=se<=.5?se*(1+K):se+K-se*K,Ne=2*se-We;function nt(mr){return mr>360?mr-=360:mr<0&&(mr+=360),mr<60?Ne+(We-Ne)*mr/60:mr<180?We:mr<240?Ne+(We-Ne)*(240-mr)/60:Ne}function Si(mr){return Math.round(nt(mr)*255)}return new Fe(Si(_+120),Si(_),Si(_-120))}M.hcl=Lm;function Lm(_,K,se){return this instanceof Lm?(this.h=+_,this.c=+K,void(this.l=+se)):arguments.length<2?_ instanceof Lm?new Lm(_.h,_.c,_.l):_ instanceof lm?_v(_.l,_.a,_.b):_v((_=Rp((_=M.rgb(_)).r,_.g,_.b)).l,_.a,_.b):new Lm(_,K,se)}var Um=Lm.prototype=new Am;Um.brighter=function(_){return new Lm(this.h,this.c,Math.min(100,this.l+Dm*(arguments.length?_:1)))},Um.darker=function(_){return new Lm(this.h,this.c,Math.max(0,this.l-Dm*(arguments.length?_:1)))},Um.rgb=function(){return Em(this.h,this.c,this.l).rgb()};function Em(_,K,se){return isNaN(_)&&(_=0),isNaN(K)&&(K=0),new lm(se,Math.cos(_*=Tp)*K,Math.sin(_)*K)}M.lab=lm;function lm(_,K,se){return this instanceof lm?(this.l=+_,this.a=+K,void(this.b=+se)):arguments.length<2?_ instanceof lm?new lm(_.l,_.a,_.b):_ instanceof Lm?Em(_.h,_.c,_.l):Rp((_=Fe(_)).r,_.g,_.b):new lm(_,K,se)}var Dm=18,Zm=.95047,rv=1,zm=1.08883,Ym=lm.prototype=new Am;Ym.brighter=function(_){return new lm(Math.min(100,this.l+Dm*(arguments.length?_:1)),this.a,this.b)},Ym.darker=function(_){return new lm(Math.max(0,this.l-Dm*(arguments.length?_:1)),this.a,this.b)},Ym.rgb=function(){return Km(this.l,this.a,this.b)};function Km(_,K,se){var Ne=(_+16)/116,We=Ne+K/500,nt=Ne-se/200;return We=Hm(We)*Zm,Ne=Hm(Ne)*rv,nt=Hm(nt)*zm,new Fe(dt(3.2404542*We-1.5371385*Ne-.4985314*nt),dt(-.969266*We+1.8760108*Ne+.041556*nt),dt(.0556434*We-.2040259*Ne+1.0572252*nt))}function _v(_,K,se){return _>0?new Lm(Math.atan2(se,K)*Sp,Math.sqrt(K*K+se*se),_):new Lm(NaN,NaN,_)}function Hm(_){return _>.206893034?_*_*_:(_-4/29)/7.787037}function uv(_){return _>.008856?Math.pow(_,1/3):7.787037*_+4/29}function dt(_){return Math.round(255*(_<=.00304?12.92*_:1.055*Math.pow(_,1/2.4)-.055))}M.rgb=Fe;function Fe(_,K,se){return this instanceof Fe?(this.r=~~_,this.g=~~K,void(this.b=~~se)):arguments.length<2?_ instanceof Fe?new Fe(_.r,_.g,_.b):Pp(""+_,Fe,Om):new Fe(_,K,se)}function Gp(_){return new Fe(_>>16,_>>8&255,_&255)}function kp(_){return Gp(_)+""}var yp=Fe.prototype=new Am;yp.brighter=function(_){_=Math.pow(.7,arguments.length?_:1);var K=this.r,se=this.g,Ne=this.b,We=30;return!K&&!se&&!Ne?new Fe(We,We,We):(K&&K<We&&(K=We),se&&se<We&&(se=We),Ne&&Ne<We&&(Ne=We),new Fe(Math.min(255,K/_),Math.min(255,se/_),Math.min(255,Ne/_)))},yp.darker=function(_){return _=Math.pow(.7,arguments.length?_:1),new Fe(_*this.r,_*this.g,_*this.b)},yp.hsl=function(){return s0(this.r,this.g,this.b)},yp.toString=function(){return"#"+bp(this.r)+bp(this.g)+bp(this.b)};function bp(_){return _<16?"0"+Math.max(0,_).toString(16):Math.min(255,_).toString(16)}function Pp(_,K,se){var Ne=0,We=0,nt=0,Si,mr,xs;if(Si=/([a-z]+)\((.*)\)/.exec(_=_.toLowerCase()),Si)switch(mr=Si[2].split(","),Si[1]){case"hsl":return se(parseFloat(mr[0]),parseFloat(mr[1])/100,parseFloat(mr[2])/100);case"rgb":return K(r0(mr[0]),r0(mr[1]),r0(mr[2]))}return(xs=$p.get(_))?K(xs.r,xs.g,xs.b):(_!=null&&_.charAt(0)==="#"&&!isNaN(xs=parseInt(_.slice(1),16))&&(_.length===4?(Ne=(xs&3840)>>4,Ne=Ne>>4|Ne,We=xs&240,We=We>>4|We,nt=xs&15,nt=nt<<4|nt):_.length===7&&(Ne=(xs&16711680)>>16,We=(xs&65280)>>8,nt=xs&255)),K(Ne,We,nt))}function s0(_,K,se){var Ne=Math.min(_/=255,K/=255,se/=255),We=Math.max(_,K,se),nt=We-Ne,Si,mr,xs=(We+Ne)/2;return nt?(mr=xs<.5?nt/(We+Ne):nt/(2-We-Ne),_==We?Si=(K-se)/nt+(K<se?6:0):K==We?Si=(se-_)/nt+2:Si=(_-K)/nt+4,Si*=60):(Si=NaN,mr=xs>0&&xs<1?0:Si),new mm(Si,mr,xs)}function Rp(_,K,se){_=Vp(_),K=Vp(K),se=Vp(se);var Ne=uv((.4124564*_+.3575761*K+.1804375*se)/Zm),We=uv((.2126729*_+.7151522*K+.072175*se)/rv),nt=uv((.0193339*_+.119192*K+.9503041*se)/zm);return lm(116*We-16,500*(Ne-We),200*(We-nt))}function Vp(_){return(_/=255)<=.04045?_/12.92:Math.pow((_+.055)/1.055,2.4)}function r0(_){var K=parseFloat(_);return _.charAt(_.length-1)==="%"?Math.round(K*2.55):K}var $p=M.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});$p.forEach(function(_,K){$p.set(_,Gp(K))});function P0(_){return typeof _=="function"?_:function(){return _}}M.functor=P0,M.xhr=j0(De);function j0(_){return function(K,se,Ne){return arguments.length===2&&typeof se=="function"&&(Ne=se,se=null),tm(K,se,_,Ne)}}function tm(_,K,se,Ne){var We={},nt=M.dispatch("beforesend","progress","load","error"),Si={},mr=new XMLHttpRequest,xs=null;self.XDomainRequest&&!("withCredentials"in mr)&&/^(http(s)?:)?\/\//.test(_)&&(mr=new XDomainRequest),"onload"in mr?mr.onload=mr.onerror=ql:mr.onreadystatechange=function(){mr.readyState>3&&ql()};function ql(){var wp=mr.status,Xp;if(!wp&&bm(mr)||wp>=200&&wp<300||wp===304){try{Xp=se.call(We,mr)}catch(Zp){nt.error.call(We,Zp);return}nt.load.call(We,Xp)}else nt.error.call(We,mr)}return mr.onprogress=function(wp){var Xp=M.event;M.event=wp;try{nt.progress.call(We,mr)}finally{M.event=Xp}},We.header=function(wp,Xp){return wp=(wp+"").toLowerCase(),arguments.length<2?Si[wp]:(Xp==null?delete Si[wp]:Si[wp]=Xp+"",We)},We.mimeType=function(wp){return arguments.length?(K=wp==null?null:wp+"",We):K},We.responseType=function(wp){return arguments.length?(xs=wp,We):xs},We.response=function(wp){return se=wp,We},["get","post"].forEach(function(wp){We[wp]=function(){return We.send.apply(We,[wp].concat(g(arguments)))}}),We.send=function(wp,Xp,Zp){if(arguments.length===2&&typeof Xp=="function"&&(Zp=Xp,Xp=null),mr.open(wp,_,!0),K!=null&&!("accept"in Si)&&(Si.accept=K+",*/*"),mr.setRequestHeader)for(var D0 in Si)mr.setRequestHeader(D0,Si[D0]);return K!=null&&mr.overrideMimeType&&mr.overrideMimeType(K),xs!=null&&(mr.responseType=xs),Zp!=null&&We.on("error",Zp).on("load",function(H0){Zp(null,H0)}),nt.beforesend.call(We,mr),mr.send(Xp??null),We},We.abort=function(){return mr.abort(),We},M.rebind(We,nt,"on"),Ne==null?We:We.get(wm(Ne))}function wm(_){return _.length===1?function(K,se){_(K==null?se:null)}:_}function bm(_){var K=_.responseType;return K&&K!=="text"?_.response:_.responseText}M.dsv=function(_,K){var se=new RegExp('["'+_+`
]`),Ne=_.charCodeAt(0);function We(ql,wp,Xp){arguments.length<3&&(Xp=wp,wp=null);var Zp=tm(ql,K,wp==null?nt:Si(wp),Xp);return Zp.row=function(D0){return arguments.length?Zp.response((wp=D0)==null?nt:Si(D0)):wp},Zp}function nt(ql){return We.parse(ql.responseText)}function Si(ql){return function(wp){return We.parse(wp.responseText,ql)}}We.parse=function(ql,wp){var Xp;return We.parseRows(ql,function(Zp,D0){if(Xp)return Xp(Zp,D0-1);var H0=function(i0){for(var w0={},A0=Zp.length,G0=0;G0<A0;++G0)w0[Zp[G0]]=i0[G0];return w0};Xp=wp?function(i0,w0){return wp(H0(i0),w0)}:H0})},We.parseRows=function(ql,wp){var Xp={},Zp={},D0=[],H0=ql.length,i0=0,w0=0,A0,G0;function Y0(){if(i0>=H0)return Zp;if(G0)return G0=!1,Xp;var n=i0;if(ql.charCodeAt(n)===34){for(var i=n;i++<H0;)if(ql.charCodeAt(i)===34){if(ql.charCodeAt(i+1)!==34)break;++i}i0=i+2;var d=ql.charCodeAt(i+1);return d===13?(G0=!0,ql.charCodeAt(i+2)===10&&++i0):d===10&&(G0=!0),ql.slice(n+1,i).replace(/""/g,'"')}for(;i0<H0;){var d=ql.charCodeAt(i0++),O=1;if(d===10)G0=!0;else if(d===13)G0=!0,ql.charCodeAt(i0)===10&&(++i0,++O);else if(d!==Ne)continue;return ql.slice(n,i0-O)}return ql.slice(n)}for(;(A0=Y0())!==Zp;){for(var C0=[];A0!==Xp&&A0!==Zp;)C0.push(A0),A0=Y0();wp&&(C0=wp(C0,w0++))==null||D0.push(C0)}return D0},We.format=function(ql){if(Array.isArray(ql[0]))return We.formatRows(ql);var wp=new ye,Xp=[];return ql.forEach(function(Zp){for(var D0 in Zp)wp.has(D0)||Xp.push(wp.add(D0))}),[Xp.map(xs).join(_)].concat(ql.map(function(Zp){return Xp.map(function(D0){return xs(Zp[D0])}).join(_)})).join(`
`)},We.formatRows=function(ql){return ql.map(mr).join(`
`)};function mr(ql){return ql.map(xs).join(_)}function xs(ql){return se.test(ql)?'"'+ql.replace(/\"/g,'""')+'"':ql}return We},M.csv=M.dsv(",","text/csv"),M.tsv=M.dsv("	","text/tab-separated-values");var Tm,Rm,Sm,Gm,Xm=this[he(this,"requestAnimationFrame")]||function(_){setTimeout(_,17)};M.timer=function(){pv.apply(this,arguments)};function pv(_,K,se){var Ne=arguments.length;Ne<2&&(K=0),Ne<3&&(se=Date.now());var We=se+K,nt={c:_,t:We,n:null};return Rm?Rm.n=nt:Tm=nt,Rm=nt,Sm||(Gm=clearTimeout(Gm),Sm=1,Xm(Ev)),nt}function Ev(){var _=kv(),K=tv()-_;K>24?(isFinite(K)&&(clearTimeout(Gm),Gm=setTimeout(Ev,K)),Sm=0):(Sm=1,Xm(Ev))}M.timer.flush=function(){kv(),tv()};function kv(){for(var _=Date.now(),K=Tm;K;)_>=K.t&&K.c(_-K.t)&&(K.c=null),K=K.n;return _}function tv(){for(var _,K=Tm,se=1/0;K;)K.c?(K.t<se&&(se=K.t),K=(_=K).n):K=_?_.n=K.n:Tm=K.n;return Rm=_,se}M.round=function(_,K){return K?Math.round(_*(K=Math.pow(10,K)))/K:Math.round(_)},M.geom={};function Mv(_){return _[0]}function i1(_){return _[1]}M.geom.hull=function(_){var K=Mv,se=i1;if(arguments.length)return Ne(_);function Ne(We){if(We.length<3)return[];var nt=P0(K),Si=P0(se),mr,xs=We.length,ql=[],wp=[];for(mr=0;mr<xs;mr++)ql.push([+nt.call(this,We[mr],mr),+Si.call(this,We[mr],mr),mr]);for(ql.sort($m),mr=0;mr<xs;mr++)wp.push([ql[mr][0],-ql[mr][1]]);var Xp=V1(ql),Zp=V1(wp),D0=Zp[0]===Xp[0],H0=Zp[Zp.length-1]===Xp[Xp.length-1],i0=[];for(mr=Xp.length-1;mr>=0;--mr)i0.push(We[ql[Xp[mr]][2]]);for(mr=+D0;mr<Zp.length-H0;++mr)i0.push(We[ql[Zp[mr]][2]]);return i0}return Ne.x=function(We){return arguments.length?(K=We,Ne):K},Ne.y=function(We){return arguments.length?(se=We,Ne):se},Ne};function V1(_){for(var K=_.length,se=[0,1],Ne=2,We=2;We<K;We++){for(;Ne>1&&Ip(_[se[Ne-2]],_[se[Ne-1]],_[We])<=0;)--Ne;se[Ne++]=We}return se.slice(0,Ne)}function $m(_,K){return _[0]-K[0]||_[1]-K[1]}M.geom.polygon=function(_){return Ae(_,vv),_};var vv=M.geom.polygon.prototype=[];vv.area=function(){for(var _=-1,K=this.length,se,Ne=this[K-1],We=0;++_<K;)se=Ne,Ne=this[_],We+=se[1]*Ne[0]-se[0]*Ne[1];return We*.5},vv.centroid=function(_){var K=-1,se=this.length,Ne=0,We=0,nt,Si=this[se-1],mr;for(arguments.length||(_=-1/(6*this.area()));++K<se;)nt=Si,Si=this[K],mr=nt[0]*Si[1]-Si[0]*nt[1],Ne+=(nt[0]+Si[0])*mr,We+=(nt[1]+Si[1])*mr;return[Ne*_,We*_]},vv.clip=function(_){for(var K,se=c1(_),Ne=-1,We=this.length-c1(this),nt,Si,mr=this[We-1],xs,ql,wp;++Ne<We;){for(K=_.slice(),_.length=0,xs=this[Ne],ql=K[(Si=K.length-se)-1],nt=-1;++nt<Si;)wp=K[nt],Vv(wp,mr,xs)?(Vv(ql,mr,xs)||_.push(b1(ql,wp,mr,xs)),_.push(wp)):Vv(ql,mr,xs)&&_.push(b1(ql,wp,mr,xs)),ql=wp;se&&_.push(_[0]),mr=xs}return _};function Vv(_,K,se){return(se[0]-K[0])*(_[1]-K[1])<(se[1]-K[1])*(_[0]-K[0])}function b1(_,K,se,Ne){var We=_[0],nt=se[0],Si=K[0]-We,mr=Ne[0]-nt,xs=_[1],ql=se[1],wp=K[1]-xs,Xp=Ne[1]-ql,Zp=(mr*(xs-ql)-Xp*(We-nt))/(Xp*Si-mr*wp);return[We+Zp*Si,xs+Zp*wp]}function c1(_){var K=_[0],se=_[_.length-1];return!(K[0]-se[0]||K[1]-se[1])}var Iv,lv,fv,Hv=[],Uv,Xv,r1=[];function s1(){xg(this),this.edge=this.site=this.circle=null}function S1(_){var K=Hv.pop()||new s1;return K.site=_,K}function _1(_){L1(_),fv.remove(_),Hv.push(_),xg(_)}function N1(_){var K=_.circle,se=K.x,Ne=K.cy,We={x:se,y:Ne},nt=_.P,Si=_.N,mr=[_];_1(_);for(var xs=nt;xs.circle&&z(se-xs.circle.x)<jl&&z(Ne-xs.circle.cy)<jl;)nt=xs.P,mr.unshift(xs),_1(xs),xs=nt;mr.unshift(xs),L1(xs);for(var ql=Si;ql.circle&&z(se-ql.circle.x)<jl&&z(Ne-ql.circle.cy)<jl;)Si=ql.N,mr.push(ql),_1(ql),ql=Si;mr.push(ql),L1(ql);var wp=mr.length,Xp;for(Xp=1;Xp<wp;++Xp)ql=mr[Xp],xs=mr[Xp-1],sv(ql.edge,xs.site,ql.site,We);xs=mr[0],ql=mr[wp-1],ql.edge=Tv(xs.site,ql.site,null,We),Y1(xs),Y1(ql)}function w1(_){for(var K=_.x,se=_.y,Ne,We,nt,Si,mr=fv._;mr;)if(nt=$v(mr,se)-K,nt>jl)mr=mr.L;else if(Si=K-B1(mr,se),Si>jl){if(!mr.R){Ne=mr;break}mr=mr.R}else{nt>-jl?(Ne=mr.P,We=mr):Si>-jl?(Ne=mr,We=mr.N):Ne=We=mr;break}var xs=S1(_);if(fv.insert(Ne,xs),!(!Ne&&!We)){if(Ne===We){L1(Ne),We=S1(Ne.site),fv.insert(xs,We),xs.edge=We.edge=Tv(Ne.site,xs.site),Y1(Ne),Y1(We);return}if(!We){xs.edge=Tv(Ne.site,xs.site);return}L1(Ne),L1(We);var ql=Ne.site,wp=ql.x,Xp=ql.y,Zp=_.x-wp,D0=_.y-Xp,H0=We.site,i0=H0.x-wp,w0=H0.y-Xp,A0=2*(Zp*w0-D0*i0),G0=Zp*Zp+D0*D0,Y0=i0*i0+w0*w0,C0={x:(w0*G0-D0*Y0)/A0+wp,y:(Zp*Y0-i0*G0)/A0+Xp};sv(We.edge,ql,H0,C0),xs.edge=Tv(ql,_,null,C0),We.edge=Tv(_,H0,null,C0),Y1(Ne),Y1(We)}}function $v(_,K){var se=_.site,Ne=se.x,We=se.y,nt=We-K;if(!nt)return Ne;var Si=_.P;if(!Si)return-1/0;se=Si.site;var mr=se.x,xs=se.y,ql=xs-K;if(!ql)return mr;var wp=mr-Ne,Xp=1/nt-1/ql,Zp=wp/ql;return Xp?(-Zp+Math.sqrt(Zp*Zp-2*Xp*(wp*wp/(-2*ql)-xs+ql/2+We-nt/2)))/Xp+Ne:(Ne+mr)/2}function B1(_,K){var se=_.N;if(se)return $v(se,K);var Ne=_.site;return Ne.y===K?Ne.x:1/0}function H1(_){this.site=_,this.edges=[]}H1.prototype.prepare=function(){for(var _=this.edges,K=_.length,se;K--;)se=_[K].edge,(!se.b||!se.a)&&_.splice(K,1);return _.sort(K1),_.length};function _g(_){for(var K=_[0][0],se=_[1][0],Ne=_[0][1],We=_[1][1],nt,Si,mr,xs,ql=lv,wp=ql.length,Xp,Zp,D0,H0,i0,w0;wp--;)if(Xp=ql[wp],!(!Xp||!Xp.prepare()))for(D0=Xp.edges,H0=D0.length,Zp=0;Zp<H0;)w0=D0[Zp].end(),mr=w0.x,xs=w0.y,i0=D0[++Zp%H0].start(),nt=i0.x,Si=i0.y,(z(mr-nt)>jl||z(xs-Si)>jl)&&(D0.splice(Zp,0,new hv(yv(Xp.site,w0,z(mr-K)<jl&&We-xs>jl?{x:K,y:z(nt-K)<jl?Si:We}:z(xs-We)<jl&&se-mr>jl?{x:z(Si-We)<jl?nt:se,y:We}:z(mr-se)<jl&&xs-Ne>jl?{x:se,y:z(nt-se)<jl?Si:Ne}:z(xs-Ne)<jl&&mr-K>jl?{x:z(Si-Ne)<jl?nt:K,y:Ne}:null),Xp.site,null)),++H0)}function K1(_,K){return K.angle-_.angle}function pg(){xg(this),this.x=this.y=this.arc=this.site=this.cy=null}function Y1(_){var K=_.P,se=_.N;if(!(!K||!se)){var Ne=K.site,We=_.site,nt=se.site;if(Ne!==nt){var Si=We.x,mr=We.y,xs=Ne.x-Si,ql=Ne.y-mr,wp=nt.x-Si,w0=nt.y-mr,Xp=2*(xs*w0-ql*wp);if(!(Xp>=-zl)){var Zp=xs*xs+ql*ql,D0=wp*wp+w0*w0,H0=(w0*Zp-ql*D0)/Xp,i0=(xs*D0-wp*Zp)/Xp,w0=i0+mr,A0=r1.pop()||new pg;A0.arc=_,A0.site=We,A0.x=H0+Si,A0.y=w0+Math.sqrt(H0*H0+i0*i0),A0.cy=w0,_.circle=A0;for(var G0=null,Y0=Xv._;Y0;)if(A0.y<Y0.y||A0.y===Y0.y&&A0.x<=Y0.x)if(Y0.L)Y0=Y0.L;else{G0=Y0.P;break}else if(Y0.R)Y0=Y0.R;else{G0=Y0;break}Xv.insert(G0,A0),G0||(Uv=A0)}}}}function L1(_){var K=_.circle;K&&(K.P||(Uv=K.N),Xv.remove(K),r1.push(K),xg(K),_.circle=null)}function rg(_,K,se,Ne){return function(We){var nt=We.a,Si=We.b,mr=nt.x,xs=nt.y,ql=Si.x,wp=Si.y,Xp=0,Zp=1,D0=ql-mr,H0=wp-xs,i0;if(i0=_-mr,!(!D0&&i0>0)){if(i0/=D0,D0<0){if(i0<Xp)return;i0<Zp&&(Zp=i0)}else if(D0>0){if(i0>Zp)return;i0>Xp&&(Xp=i0)}if(i0=se-mr,!(!D0&&i0<0)){if(i0/=D0,D0<0){if(i0>Zp)return;i0>Xp&&(Xp=i0)}else if(D0>0){if(i0<Xp)return;i0<Zp&&(Zp=i0)}if(i0=K-xs,!(!H0&&i0>0)){if(i0/=H0,H0<0){if(i0<Xp)return;i0<Zp&&(Zp=i0)}else if(H0>0){if(i0>Zp)return;i0>Xp&&(Xp=i0)}if(i0=Ne-xs,!(!H0&&i0<0)){if(i0/=H0,H0<0){if(i0>Zp)return;i0>Xp&&(Xp=i0)}else if(H0>0){if(i0<Xp)return;i0<Zp&&(Zp=i0)}return Xp>0&&(We.a={x:mr+Xp*D0,y:xs+Xp*H0}),Zp<1&&(We.b={x:mr+Zp*D0,y:xs+Zp*H0}),We}}}}}}function l_(_){for(var K=Iv,se=rg(_[0][0],_[0][1],_[1][0],_[1][1]),Ne=K.length,We;Ne--;)We=K[Ne],(!q1(We,_)||!se(We)||z(We.a.x-We.b.x)<jl&&z(We.a.y-We.b.y)<jl)&&(We.a=We.b=null,K.splice(Ne,1))}function q1(_,K){var se=_.b;if(se)return!0;var Ne=_.a,We=K[0][0],nt=K[1][0],Si=K[0][1],mr=K[1][1],xs=_.l,ql=_.r,wp=xs.x,Xp=xs.y,Zp=ql.x,D0=ql.y,H0=(wp+Zp)/2,i0=(Xp+D0)/2,w0,A0;if(D0===Xp){if(H0<We||H0>=nt)return;if(wp>Zp){if(!Ne)Ne={x:H0,y:Si};else if(Ne.y>=mr)return;se={x:H0,y:mr}}else{if(!Ne)Ne={x:H0,y:mr};else if(Ne.y<Si)return;se={x:H0,y:Si}}}else if(w0=(wp-Zp)/(D0-Xp),A0=i0-w0*H0,w0<-1||w0>1)if(wp>Zp){if(!Ne)Ne={x:(Si-A0)/w0,y:Si};else if(Ne.y>=mr)return;se={x:(mr-A0)/w0,y:mr}}else{if(!Ne)Ne={x:(mr-A0)/w0,y:mr};else if(Ne.y<Si)return;se={x:(Si-A0)/w0,y:Si}}else if(Xp<D0){if(!Ne)Ne={x:We,y:w0*We+A0};else if(Ne.x>=nt)return;se={x:nt,y:w0*nt+A0}}else{if(!Ne)Ne={x:nt,y:w0*nt+A0};else if(Ne.x<We)return;se={x:We,y:w0*We+A0}}return _.a=Ne,_.b=se,!0}function mv(_,K){this.l=_,this.r=K,this.a=this.b=null}function Tv(_,K,se,Ne){var We=new mv(_,K);return Iv.push(We),se&&sv(We,_,K,se),Ne&&sv(We,K,_,Ne),lv[_.i].edges.push(new hv(We,_,K)),lv[K.i].edges.push(new hv(We,K,_)),We}function yv(_,K,se){var Ne=new mv(_,null);return Ne.a=K,Ne.b=se,Iv.push(Ne),Ne}function sv(_,K,se,Ne){!_.a&&!_.b?(_.a=Ne,_.l=K,_.r=se):_.l===se?_.b=Ne:_.a=Ne}function hv(_,K,se){var Ne=_.a,We=_.b;this.edge=_,this.site=K,this.angle=se?Math.atan2(se.y-K.y,se.x-K.x):_.l===K?Math.atan2(We.x-Ne.x,Ne.y-We.y):Math.atan2(Ne.x-We.x,We.y-Ne.y)}hv.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};function T1(){this._=null}function xg(_){_.U=_.C=_.L=_.R=_.P=_.N=null}T1.prototype={insert:function(_,K){var se,Ne,We;if(_){if(K.P=_,K.N=_.N,_.N&&(_.N.P=K),_.N=K,_.R){for(_=_.R;_.L;)_=_.L;_.L=K}else _.R=K;se=_}else this._?(_=Eg(this._),K.P=null,K.N=_,_.P=_.L=K,se=_):(K.P=K.N=null,this._=K,se=null);for(K.L=K.R=null,K.U=se,K.C=!0,_=K;se&&se.C;)Ne=se.U,se===Ne.L?(We=Ne.R,We&&We.C?(se.C=We.C=!1,Ne.C=!0,_=Ne):(_===se.R&&(bg(this,se),_=se,se=_.U),se.C=!1,Ne.C=!0,by(this,Ne))):(We=Ne.L,We&&We.C?(se.C=We.C=!1,Ne.C=!0,_=Ne):(_===se.L&&(by(this,se),_=se,se=_.U),se.C=!1,Ne.C=!0,bg(this,Ne))),se=_.U;this._.C=!1},remove:function(_){_.N&&(_.N.P=_.P),_.P&&(_.P.N=_.N),_.N=_.P=null;var K=_.U,se,Ne=_.L,We=_.R,nt,Si;if(Ne?We?nt=Eg(We):nt=Ne:nt=We,K?K.L===_?K.L=nt:K.R=nt:this._=nt,Ne&&We?(Si=nt.C,nt.C=_.C,nt.L=Ne,Ne.U=nt,nt!==We?(K=nt.U,nt.U=_.U,_=nt.R,K.L=_,nt.R=We,We.U=nt):(nt.U=K,K=nt,_=nt.R)):(Si=_.C,_=nt),_&&(_.U=K),!Si){if(_&&_.C){_.C=!1;return}do{if(_===this._)break;if(_===K.L){if(se=K.R,se.C&&(se.C=!1,K.C=!0,bg(this,K),se=K.R),se.L&&se.L.C||se.R&&se.R.C){(!se.R||!se.R.C)&&(se.L.C=!1,se.C=!0,by(this,se),se=K.R),se.C=K.C,K.C=se.R.C=!1,bg(this,K),_=this._;break}}else if(se=K.L,se.C&&(se.C=!1,K.C=!0,by(this,K),se=K.L),se.L&&se.L.C||se.R&&se.R.C){(!se.L||!se.L.C)&&(se.R.C=!1,se.C=!0,bg(this,se),se=K.L),se.C=K.C,K.C=se.L.C=!1,by(this,K),_=this._;break}se.C=!0,_=K,K=K.U}while(!_.C);_&&(_.C=!1)}}};function bg(_,K){var se=K,Ne=K.R,We=se.U;We?We.L===se?We.L=Ne:We.R=Ne:_._=Ne,Ne.U=We,se.U=Ne,se.R=Ne.L,se.R&&(se.R.U=se),Ne.L=se}function by(_,K){var se=K,Ne=K.L,We=se.U;We?We.L===se?We.L=Ne:We.R=Ne:_._=Ne,Ne.U=We,se.U=Ne,se.L=Ne.R,se.L&&(se.L.U=se),Ne.R=se}function Eg(_){for(;_.L;)_=_.L;return _}function z1(_,K){var se=_.sort(wy).pop(),Ne,We,nt;for(Iv=[],lv=new Array(_.length),fv=new T1,Xv=new T1;;)if(nt=Uv,se&&(!nt||se.y<nt.y||se.y===nt.y&&se.x<nt.x))(se.x!==Ne||se.y!==We)&&(lv[se.i]=new H1(se),w1(se),Ne=se.x,We=se.y),se=_.pop();else if(nt)N1(nt.arc);else break;K&&(l_(K),_g(K));var Si={cells:lv,edges:Iv};return fv=Xv=Iv=lv=null,Si}function wy(_,K){return K.y-_.y||K.x-_.x}M.geom.voronoi=function(_){var K=Mv,se=i1,Ne=K,We=se,nt=Xg;if(_)return Si(_);function Si(xs){var ql=new Array(xs.length),wp=nt[0][0],Xp=nt[0][1],Zp=nt[1][0],D0=nt[1][1];return z1(mr(xs),nt).cells.forEach(function(H0,i0){var w0=H0.edges,A0=H0.site,G0=ql[i0]=w0.length?w0.map(function(Y0){var C0=Y0.start();return[C0.x,C0.y]}):A0.x>=wp&&A0.x<=Zp&&A0.y>=Xp&&A0.y<=D0?[[wp,D0],[Zp,D0],[Zp,Xp],[wp,Xp]]:[];G0.point=xs[i0]}),ql}function mr(xs){return xs.map(function(ql,wp){return{x:Math.round(Ne(ql,wp)/jl)*jl,y:Math.round(We(ql,wp)/jl)*jl,i:wp}})}return Si.links=function(xs){return z1(mr(xs)).edges.filter(function(ql){return ql.l&&ql.r}).map(function(ql){return{source:xs[ql.l.i],target:xs[ql.r.i]}})},Si.triangles=function(xs){var ql=[];return z1(mr(xs)).cells.forEach(function(wp,Xp){for(var Zp=wp.site,D0=wp.edges.sort(K1),H0=-1,i0=D0.length,w0,A0=D0[i0-1].edge,G0=A0.l===Zp?A0.r:A0.l;++H0<i0;)w0=G0,A0=D0[H0].edge,G0=A0.l===Zp?A0.r:A0.l,Xp<w0.i&&Xp<G0.i&&U2(Zp,w0,G0)<0&&ql.push([xs[Xp],xs[w0.i],xs[G0.i]])}),ql},Si.x=function(xs){return arguments.length?(Ne=P0(K=xs),Si):K},Si.y=function(xs){return arguments.length?(We=P0(se=xs),Si):se},Si.clipExtent=function(xs){return arguments.length?(nt=xs??Xg,Si):nt===Xg?null:nt},Si.size=function(xs){return arguments.length?Si.clipExtent(xs&&[[0,0],xs]):nt===Xg?null:nt&&nt[1]},Si};var Xg=[[-1e6,-1e6],[1e6,1e6]];function U2(_,K,se){return(_.x-se.x)*(K.y-_.y)-(_.x-K.x)*(se.y-_.y)}M.geom.delaunay=function(_){return M.geom.voronoi().triangles(_)},M.geom.quadtree=function(_,K,se,Ne,We){var nt=Mv,Si=i1,mr;if(mr=arguments.length)return nt=Ag,Si=F2,mr===3&&(We=se,Ne=K,se=K=0),xs(_);function xs(ql){var wp,Xp=P0(nt),Zp=P0(Si),D0,H0,i0,w0,A0,G0,Y0,C0;if(K!=null)A0=K,G0=se,Y0=Ne,C0=We;else if(Y0=C0=-(A0=G0=1/0),D0=[],H0=[],w0=ql.length,mr)for(i0=0;i0<w0;++i0)wp=ql[i0],wp.x<A0&&(A0=wp.x),wp.y<G0&&(G0=wp.y),wp.x>Y0&&(Y0=wp.x),wp.y>C0&&(C0=wp.y),D0.push(wp.x),H0.push(wp.y);else for(i0=0;i0<w0;++i0){var n=+Xp(wp=ql[i0],i0),i=+Zp(wp,i0);n<A0&&(A0=n),i<G0&&(G0=i),n>Y0&&(Y0=n),i>C0&&(C0=i),D0.push(n),H0.push(i)}var d=Y0-A0,O=C0-G0;d>O?C0=G0+d:Y0=A0+O;function le(Hl,f0,Z0,ym,_m,T0,Q0,km){if(!(isNaN(Z0)||isNaN(ym)))if(Hl.leaf){var Wm=Hl.x,Av=Hl.y;if(Wm!=null)if(z(Wm-Z0)+z(Av-ym)<.01)Ee(Hl,f0,Z0,ym,_m,T0,Q0,km);else{var $0=Hl.point;Hl.x=Hl.y=Hl.point=null,Ee(Hl,$0,Wm,Av,_m,T0,Q0,km),Ee(Hl,f0,Z0,ym,_m,T0,Q0,km)}else Hl.x=Z0,Hl.y=ym,Hl.point=f0}else Ee(Hl,f0,Z0,ym,_m,T0,Q0,km)}function Ee(Hl,f0,Z0,ym,_m,T0,Q0,km){var Wm=(_m+Q0)*.5,Av=(T0+km)*.5,$0=Z0>=Wm,U0=ym>=Av,om=U0<<1|$0;Hl.leaf=!1,Hl=Hl.nodes[om]||(Hl.nodes[om]=B2()),$0?_m=Wm:Q0=Wm,U0?T0=Av:km=Av,le(Hl,f0,Z0,ym,_m,T0,Q0,km)}var ms=B2();if(ms.add=function(Hl){le(ms,Hl,+Xp(Hl,++i0),+Zp(Hl,i0),A0,G0,Y0,C0)},ms.visit=function(Hl){mg(Hl,ms,A0,G0,Y0,C0)},ms.find=function(Hl){return c3(ms,Hl[0],Hl[1],A0,G0,Y0,C0)},i0=-1,K==null){for(;++i0<w0;)le(ms,ql[i0],D0[i0],H0[i0],A0,G0,Y0,C0);--i0}else ql.forEach(ms.add);return D0=H0=ql=wp=null,ms}return xs.x=function(ql){return arguments.length?(nt=ql,xs):nt},xs.y=function(ql){return arguments.length?(Si=ql,xs):Si},xs.extent=function(ql){return arguments.length?(ql==null?K=se=Ne=We=null:(K=+ql[0][0],se=+ql[0][1],Ne=+ql[1][0],We=+ql[1][1]),xs):K==null?null:[[K,se],[Ne,We]]},xs.size=function(ql){return arguments.length?(ql==null?K=se=Ne=We=null:(K=se=0,Ne=+ql[0],We=+ql[1]),xs):K==null?null:[Ne-K,We-se]},xs};function Ag(_){return _.x}function F2(_){return _.y}function B2(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function mg(_,K,se,Ne,We,nt){if(!_(K,se,Ne,We,nt)){var Si=(se+We)*.5,mr=(Ne+nt)*.5,xs=K.nodes;xs[0]&&mg(_,xs[0],se,Ne,Si,mr),xs[1]&&mg(_,xs[1],Si,Ne,We,mr),xs[2]&&mg(_,xs[2],se,mr,Si,nt),xs[3]&&mg(_,xs[3],Si,mr,We,nt)}}function c3(_,K,se,Ne,We,nt,Si){var mr=1/0,xs;return(function ql(wp,Xp,Zp,D0,H0){if(!(Xp>nt||Zp>Si||D0<Ne||H0<We)){if(i0=wp.point){var i0,w0=K-wp.x,A0=se-wp.y,G0=w0*w0+A0*A0;if(G0<mr){var Y0=Math.sqrt(mr=G0);Ne=K-Y0,We=se-Y0,nt=K+Y0,Si=se+Y0,xs=i0}}for(var C0=wp.nodes,n=(Xp+D0)*.5,i=(Zp+H0)*.5,d=K>=n,O=se>=i,le=O<<1|d,Ee=le+4;le<Ee;++le)if(wp=C0[le&3])switch(le&3){case 0:ql(wp,Xp,Zp,n,i);break;case 1:ql(wp,n,Zp,D0,i);break;case 2:ql(wp,Xp,i,n,H0);break;case 3:ql(wp,n,i,D0,H0);break}}})(_,Ne,We,nt,Si),xs}M.interpolateRgb=H2;function H2(_,K){_=M.rgb(_),K=M.rgb(K);var se=_.r,Ne=_.g,We=_.b,nt=K.r-se,Si=K.g-Ne,mr=K.b-We;return function(xs){return"#"+bp(Math.round(se+nt*xs))+bp(Math.round(Ne+Si*xs))+bp(Math.round(We+mr*xs))}}M.interpolateObject=u3;function u3(_,K){var se={},Ne={},We;for(We in _)We in K?se[We]=Fg(_[We],K[We]):Ne[We]=_[We];for(We in K)We in _||(Ne[We]=K[We]);return function(nt){for(We in se)Ne[We]=se[We](nt);return Ne}}M.interpolateNumber=sy;function sy(_,K){return _=+_,K=+K,function(se){return _*(1-se)+K*se}}M.interpolateString=Px;function Px(_,K){var se=Uy.lastIndex=ag.lastIndex=0,Ne,We,nt,Si=-1,mr=[],xs=[];for(_=_+"",K=K+"";(Ne=Uy.exec(_))&&(We=ag.exec(K));)(nt=We.index)>se&&(nt=K.slice(se,nt),mr[Si]?mr[Si]+=nt:mr[++Si]=nt),(Ne=Ne[0])===(We=We[0])?mr[Si]?mr[Si]+=We:mr[++Si]=We:(mr[++Si]=null,xs.push({i:Si,x:sy(Ne,We)})),se=ag.lastIndex;return se<K.length&&(nt=K.slice(se),mr[Si]?mr[Si]+=nt:mr[++Si]=nt),mr.length<2?xs[0]?(K=xs[0].x,function(ql){return K(ql)+""}):function(){return K}:(K=xs.length,function(ql){for(var wp=0,Xp;wp<K;++wp)mr[(Xp=xs[wp]).i]=Xp.x(ql);return mr.join("")})}var Uy=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ag=new RegExp(Uy.source,"g");M.interpolate=Fg;function Fg(_,K){for(var se=M.interpolators.length,Ne;--se>=0&&!(Ne=M.interpolators[se](_,K)););return Ne}M.interpolators=[function(_,K){var se=typeof K;return(se==="string"?$p.has(K.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(K)?H2:Px:K instanceof Am?H2:Array.isArray(K)?c_:se==="object"&&isNaN(K)?u3:sy)(_,K)}],M.interpolateArray=c_;function c_(_,K){var se=[],Ne=[],We=_.length,nt=K.length,Si=Math.min(_.length,K.length),mr;for(mr=0;mr<Si;++mr)se.push(Fg(_[mr],K[mr]));for(;mr<We;++mr)Ne[mr]=_[mr];for(;mr<nt;++mr)Ne[mr]=K[mr];return function(xs){for(mr=0;mr<Si;++mr)Ne[mr]=se[mr](xs);return Ne}}var Fy=function(){return De},f3=M.map({linear:Fy,poly:o5,quad:function(){return $g},cubic:function(){return s5},sin:function(){return l5},exp:function(){return Y5},circle:function(){return z_},elastic:xb,back:d3,bounce:function(){return G2}}),h3=M.map({in:De,out:j2,"in-out":_b,"out-in":function(_){return _b(j2(_))}});M.ease=function(_){var K=_.indexOf("-"),se=K>=0?_.slice(0,K):_,Ne=K>=0?_.slice(K+1):"in";return se=f3.get(se)||Fy,Ne=h3.get(Ne)||De,i5(Ne(se.apply(null,v.call(arguments,1))))};function i5(_){return function(K){return K<=0?0:K>=1?1:_(K)}}function j2(_){return function(K){return 1-_(1-K)}}function _b(_){return function(K){return .5*(K<.5?_(2*K):2-_(2-2*K))}}function $g(_){return _*_}function s5(_){return _*_*_}function Bg(_){if(_<=0)return 0;if(_>=1)return 1;var K=_*_,se=K*_;return 4*(_<.5?se:3*(_-K)+se-.75)}function o5(_){return function(K){return Math.pow(K,_)}}function l5(_){return 1-Math.cos(_*_n)}function Y5(_){return Math.pow(2,10*(_-1))}function z_(_){return 1-Math.sqrt(1-_*_)}function xb(_,K){var se;return arguments.length<2&&(K=.45),arguments.length?se=K/pn*Math.asin(1/_):(_=1,se=K/4),function(Ne){return 1+_*Math.pow(2,-10*Ne)*Math.sin((Ne-se)*pn/K)}}function d3(_){return _||(_=1.70158),function(K){return K*K*((_+1)*K-_)}}function G2(_){return _<1/2.75?7.5625*_*_:_<2/2.75?7.5625*(_-=1.5/2.75)*_+.75:_<2.5/2.75?7.5625*(_-=2.25/2.75)*_+.9375:7.5625*(_-=2.625/2.75)*_+.984375}M.interpolateHcl=c5;function c5(_,K){_=M.hcl(_),K=M.hcl(K);var se=_.h,Ne=_.c,We=_.l,nt=K.h-se,Si=K.c-Ne,mr=K.l-We;return isNaN(Si)&&(Si=0,Ne=isNaN(Ne)?K.c:Ne),isNaN(nt)?(nt=0,se=isNaN(se)?K.h:se):nt>180?nt-=360:nt<-180&&(nt+=360),function(xs){return Em(se+nt*xs,Ne+Si*xs,We+mr*xs)+""}}M.interpolateHsl=u5;function u5(_,K){_=M.hsl(_),K=M.hsl(K);var se=_.h,Ne=_.s,We=_.l,nt=K.h-se,Si=K.s-Ne,mr=K.l-We;return isNaN(Si)&&(Si=0,Ne=isNaN(Ne)?K.s:Ne),isNaN(nt)?(nt=0,se=isNaN(se)?K.h:se):nt>180?nt-=360:nt<-180&&(nt+=360),function(xs){return Om(se+nt*xs,Ne+Si*xs,We+mr*xs)+""}}M.interpolateLab=f5;function f5(_,K){_=M.lab(_),K=M.lab(K);var se=_.l,Ne=_.a,We=_.b,nt=K.l-se,Si=K.a-Ne,mr=K.b-We;return function(xs){return Km(se+nt*xs,Ne+Si*xs,We+mr*xs)+""}}M.interpolateRound=p3;function p3(_,K){return K-=_,function(se){return Math.round(_+K*se)}}M.transform=function(_){var K=E.createElementNS(M.ns.prefix.svg,"g");return(M.transform=function(se){if(se!=null){K.setAttribute("transform",se);var Ne=K.transform.baseVal.consolidate()}return new Ox(Ne?Ne.matrix:$5)})(_)};function Ox(_){var K=[_.a,_.b],se=[_.c,_.d],Ne=h5(K),We=bb(K,se),nt=h5(X5(se,K,-We))||0;K[0]*se[1]<se[0]*K[1]&&(K[0]*=-1,K[1]*=-1,Ne*=-1,We*=-1),this.rotate=(Ne?Math.atan2(K[1],K[0]):Math.atan2(-se[0],se[1]))*Sp,this.translate=[_.e,_.f],this.scale=[Ne,nt],this.skew=nt?Math.atan2(We,nt)*Sp:0}Ox.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};function bb(_,K){return _[0]*K[0]+_[1]*K[1]}function h5(_){var K=Math.sqrt(bb(_,_));return K&&(_[0]/=K,_[1]/=K),K}function X5(_,K,se){return _[0]+=se*K[0],_[1]+=se*K[1],_}var $5={a:1,b:0,c:0,d:1,e:0,f:0};M.interpolateTransform=m3;function d2(_){return _.length?_.pop()+",":""}function d5(_,K,se,Ne){if(_[0]!==K[0]||_[1]!==K[1]){var We=se.push("translate(",null,",",null,")");Ne.push({i:We-4,x:sy(_[0],K[0])},{i:We-2,x:sy(_[1],K[1])})}else(K[0]||K[1])&&se.push("translate("+K+")")}function V2(_,K,se,Ne){_!==K?(_-K>180?K+=360:K-_>180&&(_+=360),Ne.push({i:se.push(d2(se)+"rotate(",null,")")-2,x:sy(_,K)})):K&&se.push(d2(se)+"rotate("+K+")")}function wb(_,K,se,Ne){_!==K?Ne.push({i:se.push(d2(se)+"skewX(",null,")")-2,x:sy(_,K)}):K&&se.push(d2(se)+"skewX("+K+")")}function p5(_,K,se,Ne){if(_[0]!==K[0]||_[1]!==K[1]){var We=se.push(d2(se)+"scale(",null,",",null,")");Ne.push({i:We-4,x:sy(_[0],K[0])},{i:We-2,x:sy(_[1],K[1])})}else(K[0]!==1||K[1]!==1)&&se.push(d2(se)+"scale("+K+")")}function m3(_,K){var se=[],Ne=[];return _=M.transform(_),K=M.transform(K),d5(_.translate,K.translate,se,Ne),V2(_.rotate,K.rotate,se,Ne),wb(_.skew,K.skew,se,Ne),p5(_.scale,K.scale,se,Ne),_=K=null,function(We){for(var nt=-1,Si=Ne.length,mr;++nt<Si;)se[(mr=Ne[nt]).i]=mr.x(We);return se.join("")}}function m5(_,K){return K=(K-=_=+_)||1/K,function(se){return(se-_)/K}}function v5(_,K){return K=(K-=_=+_)||1/K,function(se){return Math.max(0,Math.min(1,(se-_)/K))}}M.layout={},M.layout.bundle=function(){return function(_){for(var K=[],se=-1,Ne=_.length;++se<Ne;)K.push(g5(_[se]));return K}};function g5(_){for(var K=_.source,se=_.target,Ne=Mb(K,se),We=[K];K!==Ne;)K=K.parent,We.push(K);for(var nt=We.length;se!==Ne;)We.splice(nt,0,se),se=se.parent;return We}function v3(_){for(var K=[],se=_.parent;se!=null;)K.push(_),_=se,se=se.parent;return K.push(_),K}function Mb(_,K){if(_===K)return _;for(var se=v3(_),Ne=v3(K),We=se.pop(),nt=Ne.pop(),Si=null;We===nt;)Si=We,We=se.pop(),nt=Ne.pop();return Si}M.layout.chord=function(){var _={},K,se,Ne,We,nt=0,Si,mr,xs;function ql(){var Xp={},Zp=[],D0=M.range(We),H0=[],i0,w0,A0,G0,Y0;for(K=[],se=[],i0=0,G0=-1;++G0<We;){for(w0=0,Y0=-1;++Y0<We;)w0+=Ne[G0][Y0];Zp.push(w0),H0.push(M.range(We)),i0+=w0}for(Si&&D0.sort(function(ms,Hl){return Si(Zp[ms],Zp[Hl])}),mr&&H0.forEach(function(ms,Hl){ms.sort(function(f0,Z0){return mr(Ne[Hl][f0],Ne[Hl][Z0])})}),i0=(pn-nt*We)/i0,w0=0,G0=-1;++G0<We;){for(A0=w0,Y0=-1;++Y0<We;){var C0=D0[G0],n=H0[C0][Y0],i=Ne[C0][n],d=w0,O=w0+=i*i0;Xp[C0+"-"+n]={index:C0,subindex:n,startAngle:d,endAngle:O,value:i}}se[C0]={index:C0,startAngle:A0,endAngle:w0,value:Zp[C0]},w0+=nt}for(G0=-1;++G0<We;)for(Y0=G0-1;++Y0<We;){var le=Xp[G0+"-"+Y0],Ee=Xp[Y0+"-"+G0];(le.value||Ee.value)&&K.push(le.value<Ee.value?{source:Ee,target:le}:{source:le,target:Ee})}xs&&wp()}function wp(){K.sort(function(Xp,Zp){return xs((Xp.source.value+Xp.target.value)/2,(Zp.source.value+Zp.target.value)/2)})}return _.matrix=function(Xp){return arguments.length?(We=(Ne=Xp)&&Ne.length,K=se=null,_):Ne},_.padding=function(Xp){return arguments.length?(nt=Xp,K=se=null,_):nt},_.sortGroups=function(Xp){return arguments.length?(Si=Xp,K=se=null,_):Si},_.sortSubgroups=function(Xp){return arguments.length?(mr=Xp,K=null,_):mr},_.sortChords=function(Xp){return arguments.length?(xs=Xp,K&&wp(),_):xs},_.chords=function(){return K||ql(),K},_.groups=function(){return se||ql(),se},_},M.layout.force=function(){var _={},K=M.dispatch("start","tick","end"),se,Ne=[1,1],We,nt,Si=.9,mr=b5,xs=Z5,ql=-30,wp=K5,Xp=.1,Zp=.64,D0=[],H0=[],i0,w0,A0;function G0(C0){return function(n,i,d,O){if(n.point!==C0){var le=n.cx-C0.x,Ee=n.cy-C0.y,ms=O-i,Hl=le*le+Ee*Ee;if(ms*ms/Zp<Hl){if(Hl<wp){var f0=n.charge/Hl;C0.px-=le*f0,C0.py-=Ee*f0}return!0}if(n.point&&Hl&&Hl<wp){var f0=n.pointCharge/Hl;C0.px-=le*f0,C0.py-=Ee*f0}}return!n.charge}}_.tick=function(){if((nt*=.99)<.005)return se=null,K.end({type:"end",alpha:nt=0}),!0;var C0=D0.length,n=H0.length,i,d,O,le,Ee,ms,Hl,f0,Z0;for(d=0;d<n;++d)O=H0[d],le=O.source,Ee=O.target,f0=Ee.x-le.x,Z0=Ee.y-le.y,(ms=f0*f0+Z0*Z0)&&(ms=nt*w0[d]*((ms=Math.sqrt(ms))-i0[d])/ms,f0*=ms,Z0*=ms,Ee.x-=f0*(Hl=le.weight+Ee.weight?le.weight/(le.weight+Ee.weight):.5),Ee.y-=Z0*Hl,le.x+=f0*(Hl=1-Hl),le.y+=Z0*Hl);if((Hl=nt*Xp)&&(f0=Ne[0]/2,Z0=Ne[1]/2,d=-1,Hl))for(;++d<C0;)O=D0[d],O.x+=(f0-O.x)*Hl,O.y+=(Z0-O.y)*Hl;if(ql)for(x5(i=M.geom.quadtree(D0),nt,A0),d=-1;++d<C0;)(O=D0[d]).fixed||i.visit(G0(O));for(d=-1;++d<C0;)O=D0[d],O.fixed?(O.x=O.px,O.y=O.py):(O.x-=(O.px-(O.px=O.x))*Si,O.y-=(O.py-(O.py=O.y))*Si);K.tick({type:"tick",alpha:nt})},_.nodes=function(C0){return arguments.length?(D0=C0,_):D0},_.links=function(C0){return arguments.length?(H0=C0,_):H0},_.size=function(C0){return arguments.length?(Ne=C0,_):Ne},_.linkDistance=function(C0){return arguments.length?(mr=typeof C0=="function"?C0:+C0,_):mr},_.distance=_.linkDistance,_.linkStrength=function(C0){return arguments.length?(xs=typeof C0=="function"?C0:+C0,_):xs},_.friction=function(C0){return arguments.length?(Si=+C0,_):Si},_.charge=function(C0){return arguments.length?(ql=typeof C0=="function"?C0:+C0,_):ql},_.chargeDistance=function(C0){return arguments.length?(wp=C0*C0,_):Math.sqrt(wp)},_.gravity=function(C0){return arguments.length?(Xp=+C0,_):Xp},_.theta=function(C0){return arguments.length?(Zp=C0*C0,_):Math.sqrt(Zp)},_.alpha=function(C0){return arguments.length?(C0=+C0,nt?C0>0?nt=C0:(se.c=null,se.t=NaN,se=null,K.end({type:"end",alpha:nt=0})):C0>0&&(K.start({type:"start",alpha:nt=C0}),se=pv(_.tick)),_):nt},_.start=function(){var C0,n=D0.length,i=H0.length,d=Ne[0],O=Ne[1],le,Ee;for(C0=0;C0<n;++C0)(Ee=D0[C0]).index=C0,Ee.weight=0;for(C0=0;C0<i;++C0)Ee=H0[C0],typeof Ee.source=="number"&&(Ee.source=D0[Ee.source]),typeof Ee.target=="number"&&(Ee.target=D0[Ee.target]),++Ee.source.weight,++Ee.target.weight;for(C0=0;C0<n;++C0)Ee=D0[C0],isNaN(Ee.x)&&(Ee.x=ms("x",d)),isNaN(Ee.y)&&(Ee.y=ms("y",O)),isNaN(Ee.px)&&(Ee.px=Ee.x),isNaN(Ee.py)&&(Ee.py=Ee.y);if(i0=[],typeof mr=="function")for(C0=0;C0<i;++C0)i0[C0]=+mr.call(this,H0[C0],C0);else for(C0=0;C0<i;++C0)i0[C0]=mr;if(w0=[],typeof xs=="function")for(C0=0;C0<i;++C0)w0[C0]=+xs.call(this,H0[C0],C0);else for(C0=0;C0<i;++C0)w0[C0]=xs;if(A0=[],typeof ql=="function")for(C0=0;C0<n;++C0)A0[C0]=+ql.call(this,D0[C0],C0);else for(C0=0;C0<n;++C0)A0[C0]=ql;function ms(Hl,f0){if(!le){for(le=new Array(n),_m=0;_m<n;++_m)le[_m]=[];for(_m=0;_m<i;++_m){var Z0=H0[_m];le[Z0.source.index].push(Z0.target),le[Z0.target.index].push(Z0.source)}}for(var ym=le[C0],_m=-1,T0=ym.length,Q0;++_m<T0;)if(!isNaN(Q0=ym[_m][Hl]))return Q0;return Math.random()*f0}return _.resume()},_.resume=function(){return _.alpha(.1)},_.stop=function(){return _.alpha(0)},_.drag=function(){if(We||(We=M.behavior.drag().origin(De).on("dragstart.force",y5).on("drag.force",Y0).on("dragend.force",_5)),!arguments.length)return We;this.on("mouseover.force",E1).on("mouseout.force",g3).call(We)};function Y0(C0){C0.px=M.event.x,C0.py=M.event.y,_.resume()}return M.rebind(_,K,"on")};function y5(_){_.fixed|=2}function _5(_){_.fixed&=-7}function E1(_){_.fixed|=4,_.px=_.x,_.py=_.y}function g3(_){_.fixed&=-5}function x5(_,K,se){var Ne=0,We=0;if(_.charge=0,!_.leaf)for(var nt=_.nodes,Si=nt.length,mr=-1,xs;++mr<Si;)xs=nt[mr],xs!=null&&(x5(xs,K,se),_.charge+=xs.charge,Ne+=xs.charge*xs.cx,We+=xs.charge*xs.cy);if(_.point){_.leaf||(_.point.x+=Math.random()-.5,_.point.y+=Math.random()-.5);var ql=K*se[_.point.index];_.charge+=_.pointCharge=ql,Ne+=ql*_.point.x,We+=ql*_.point.y}_.cx=Ne/_.charge,_.cy=We/_.charge}var b5=20,Z5=1,K5=1/0;M.layout.hierarchy=function(){var _=_3,K=y3,se=Sb;function Ne(We){var nt=[We],Si=[],mr;for(We.depth=0;(mr=nt.pop())!=null;)if(Si.push(mr),(ql=K.call(Ne,mr,mr.depth))&&(xs=ql.length)){for(var xs,ql,wp;--xs>=0;)nt.push(wp=ql[xs]),wp.parent=mr,wp.depth=mr.depth+1;se&&(mr.value=0),mr.children=ql}else se&&(mr.value=+se.call(Ne,mr,mr.depth)||0),delete mr.children;return Dg(We,function(Xp){var Zp,D0;_&&(Zp=Xp.children)&&Zp.sort(_),se&&(D0=Xp.parent)&&(D0.value+=Xp.value)}),Si}return Ne.sort=function(We){return arguments.length?(_=We,Ne):_},Ne.children=function(We){return arguments.length?(K=We,Ne):K},Ne.value=function(We){return arguments.length?(se=We,Ne):se},Ne.revalue=function(We){return se&&(P_(We,function(nt){nt.children&&(nt.value=0)}),Dg(We,function(nt){var Si;nt.children||(nt.value=+se.call(Ne,nt,nt.depth)||0),(Si=nt.parent)&&(Si.value+=nt.value)})),We},Ne};function Ix(_,K){return M.rebind(_,K,"sort","children","value"),_.nodes=_,_.links=O_,_}function P_(_,K){for(var se=[_];(_=se.pop())!=null;)if(K(_),(We=_.children)&&(Ne=We.length))for(var Ne,We;--Ne>=0;)se.push(We[Ne])}function Dg(_,K){for(var se=[_],Ne=[];(_=se.pop())!=null;)if(Ne.push(_),(Si=_.children)&&(nt=Si.length))for(var We=-1,nt,Si;++We<nt;)se.push(Si[We]);for(;(_=Ne.pop())!=null;)K(_)}function y3(_){return _.children}function Sb(_){return _.value}function _3(_,K){return K.value-_.value}function O_(_){return M.merge(_.map(function(K){return(K.children||[]).map(function(se){return{source:K,target:se}})}))}M.layout.partition=function(){var _=M.layout.hierarchy(),K=[1,1];function se(nt,Si,mr,xs){var ql=nt.children;if(nt.x=Si,nt.y=nt.depth*xs,nt.dx=mr,nt.dy=xs,ql&&(Xp=ql.length)){var wp=-1,Xp,Zp,D0;for(mr=nt.value?mr/nt.value:0;++wp<Xp;)se(Zp=ql[wp],Si,D0=Zp.value*mr,xs),Si+=D0}}function Ne(nt){var Si=nt.children,mr=0;if(Si&&(ql=Si.length))for(var xs=-1,ql;++xs<ql;)mr=Math.max(mr,Ne(Si[xs]));return 1+mr}function We(nt,Si){var mr=_.call(this,nt,Si);return se(mr[0],0,K[0],K[1]/Ne(mr[0])),mr}return We.size=function(nt){return arguments.length?(K=nt,We):K},Ix(We,_)},M.layout.pie=function(){var _=Number,K=My,se=0,Ne=pn,We=0;function nt(Si){var mr=Si.length,xs=Si.map(function(G0,Y0){return+_.call(nt,G0,Y0)}),ql=+(typeof se=="function"?se.apply(this,arguments):se),wp=(typeof Ne=="function"?Ne.apply(this,arguments):Ne)-ql,Xp=Math.min(Math.abs(wp)/mr,+(typeof We=="function"?We.apply(this,arguments):We)),Zp=Xp*(wp<0?-1:1),D0=M.sum(xs),H0=D0?(wp-mr*Zp)/D0:0,i0=M.range(mr),w0=[],A0;return K!=null&&i0.sort(K===My?function(G0,Y0){return xs[Y0]-xs[G0]}:function(G0,Y0){return K(Si[G0],Si[Y0])}),i0.forEach(function(G0){w0[G0]={data:Si[G0],value:A0=xs[G0],startAngle:ql,endAngle:ql+=A0*H0+Zp,padAngle:Xp}}),w0}return nt.value=function(Si){return arguments.length?(_=Si,nt):_},nt.sort=function(Si){return arguments.length?(K=Si,nt):K},nt.startAngle=function(Si){return arguments.length?(se=Si,nt):se},nt.endAngle=function(Si){return arguments.length?(Ne=Si,nt):Ne},nt.padAngle=function(Si){return arguments.length?(We=Si,nt):We},nt};var My={};M.layout.stack=function(){var _=De,K=Tb,se=x3,Ne=w5,We=Ux,nt=J5;function Si(mr,xs){if(!(H0=mr.length))return mr;var ql=mr.map(function(G0,Y0){return _.call(Si,G0,Y0)}),wp=ql.map(function(G0){return G0.map(function(Y0,C0){return[We.call(Si,Y0,C0),nt.call(Si,Y0,C0)]})}),Xp=K.call(Si,wp,xs);ql=M.permute(ql,Xp),wp=M.permute(wp,Xp);var Zp=se.call(Si,wp,xs),D0=ql[0].length,H0,i0,w0,A0;for(w0=0;w0<D0;++w0)for(Ne.call(Si,ql[0][w0],A0=Zp[w0],wp[0][w0][1]),i0=1;i0<H0;++i0)Ne.call(Si,ql[i0][w0],A0+=wp[i0-1][w0][1],wp[i0][w0][1]);return mr}return Si.values=function(mr){return arguments.length?(_=mr,Si):_},Si.order=function(mr){return arguments.length?(K=typeof mr=="function"?mr:M5.get(mr)||Tb,Si):K},Si.offset=function(mr){return arguments.length?(se=typeof mr=="function"?mr:S5.get(mr)||x3,Si):se},Si.x=function(mr){return arguments.length?(We=mr,Si):We},Si.y=function(mr){return arguments.length?(nt=mr,Si):nt},Si.out=function(mr){return arguments.length?(Ne=mr,Si):Ne},Si};function Ux(_){return _.x}function J5(_){return _.y}function w5(_,K,se){_.y0=K,_.y=se}var M5=M.map({"inside-out":function(_){var K=_.length,se,Ne,We=_.map(b3),nt=_.map(T5),Si=M.range(K).sort(function(Xp,Zp){return We[Xp]-We[Zp]}),mr=0,xs=0,ql=[],wp=[];for(se=0;se<K;++se)Ne=Si[se],mr<xs?(mr+=nt[Ne],ql.push(Ne)):(xs+=nt[Ne],wp.push(Ne));return wp.reverse().concat(ql)},reverse:function(_){return M.range(_.length).reverse()},default:Tb}),S5=M.map({silhouette:function(_){var K=_.length,se=_[0].length,Ne=[],We=0,nt,Si,mr,xs=[];for(Si=0;Si<se;++Si){for(nt=0,mr=0;nt<K;nt++)mr+=_[nt][Si][1];mr>We&&(We=mr),Ne.push(mr)}for(Si=0;Si<se;++Si)xs[Si]=(We-Ne[Si])/2;return xs},wiggle:function(_){var K=_.length,se=_[0],Ne=se.length,We,nt,Si,mr,xs,ql,wp,Xp,Zp,D0=[];for(D0[0]=Xp=Zp=0,nt=1;nt<Ne;++nt){for(We=0,mr=0;We<K;++We)mr+=_[We][nt][1];for(We=0,xs=0,wp=se[nt][0]-se[nt-1][0];We<K;++We){for(Si=0,ql=(_[We][nt][1]-_[We][nt-1][1])/(2*wp);Si<We;++Si)ql+=(_[Si][nt][1]-_[Si][nt-1][1])/wp;xs+=ql*_[We][nt][1]}D0[nt]=Xp-=mr?xs/mr*wp:0,Xp<Zp&&(Zp=Xp)}for(nt=0;nt<Ne;++nt)D0[nt]-=Zp;return D0},expand:function(_){var K=_.length,se=_[0].length,Ne=1/K,We,nt,Si,mr=[];for(nt=0;nt<se;++nt){for(We=0,Si=0;We<K;We++)Si+=_[We][nt][1];if(Si)for(We=0;We<K;We++)_[We][nt][1]/=Si;else for(We=0;We<K;We++)_[We][nt][1]=Ne}for(nt=0;nt<se;++nt)mr[nt]=0;return mr},zero:x3});function Tb(_){return M.range(_.length)}function x3(_){for(var K=-1,se=_[0].length,Ne=[];++K<se;)Ne[K]=0;return Ne}function b3(_){for(var K=1,se=0,Ne=_[0][1],We,nt=_.length;K<nt;++K)(We=_[K][1])>Ne&&(se=K,Ne=We);return se}function T5(_){return _.reduce(E5,0)}function E5(_,K){return _+K[1]}M.layout.histogram=function(){var _=!0,K=Number,se=w3,Ne=Q5;function We(nt,Zp){for(var mr=[],xs=nt.map(K,this),ql=se.call(this,xs,Zp),wp=Ne.call(this,ql,xs,Zp),Xp,Zp=-1,D0=xs.length,H0=wp.length-1,i0=_?1:1/D0,w0;++Zp<H0;)Xp=mr[Zp]=[],Xp.dx=wp[Zp+1]-(Xp.x=wp[Zp]),Xp.y=0;if(H0>0)for(Zp=-1;++Zp<D0;)w0=xs[Zp],w0>=ql[0]&&w0<=ql[1]&&(Xp=mr[M.bisect(wp,w0,1,H0)-1],Xp.y+=i0,Xp.push(nt[Zp]));return mr}return We.value=function(nt){return arguments.length?(K=nt,We):K},We.range=function(nt){return arguments.length?(se=P0(nt),We):se},We.bins=function(nt){return arguments.length?(Ne=typeof nt=="number"?function(Si){return Eb(Si,nt)}:P0(nt),We):Ne},We.frequency=function(nt){return arguments.length?(_=!!nt,We):_},We};function Q5(_,K){return Eb(_,Math.ceil(Math.log(K.length)/Math.LN2+1))}function Eb(_,K){for(var se=-1,Ne=+_[0],We=(_[1]-Ne)/K,nt=[];++se<=K;)nt[se]=We*se+Ne;return nt}function w3(_){return[M.min(_),M.max(_)]}M.layout.pack=function(){var _=M.layout.hierarchy().sort(ew),K=0,se=[1,1],Ne;function We(nt,Si){var mr=_.call(this,nt,Si),xs=mr[0],ql=se[0],wp=se[1],Xp=Ne==null?Math.sqrt:typeof Ne=="function"?Ne:function(){return Ne};if(xs.x=xs.y=0,Dg(xs,function(D0){D0.r=+Xp(D0.value)}),Dg(xs,S3),K){var Zp=K*(Ne?1:Math.max(2*xs.r/ql,2*xs.r/wp))/2;Dg(xs,function(D0){D0.r+=Zp}),Dg(xs,S3),Dg(xs,function(D0){D0.r-=Zp})}return Fx(xs,ql/2,wp/2,Ne?1:1/Math.max(2*xs.r/ql,2*xs.r/wp)),mr}return We.size=function(nt){return arguments.length?(se=nt,We):se},We.radius=function(nt){return arguments.length?(Ne=nt==null||typeof nt=="function"?nt:+nt,We):Ne},We.padding=function(nt){return arguments.length?(K=+nt,We):K},Ix(We,_)};function ew(_,K){return _.value-K.value}function M3(_,K){var se=_._pack_next;_._pack_next=K,K._pack_prev=_,K._pack_next=se,se._pack_prev=K}function q2(_,K){_._pack_next=K,K._pack_prev=_}function A5(_,K){var se=K.x-_.x,Ne=K.y-_.y,We=_.r+K.r;return .999*We*We>se*se+Ne*Ne}function S3(_){if(!(K=_.children)||!(Zp=K.length))return;var K,se=1/0,Ne=-1/0,We=1/0,nt=-1/0,Si,mr,xs,ql,wp,Xp,Zp;function D0(C0){se=Math.min(C0.x-C0.r,se),Ne=Math.max(C0.x+C0.r,Ne),We=Math.min(C0.y-C0.r,We),nt=Math.max(C0.y+C0.r,nt)}if(K.forEach(e1),Si=K[0],Si.x=-Si.r,Si.y=0,D0(Si),Zp>1&&(mr=K[1],mr.x=mr.r,mr.y=0,D0(mr),Zp>2))for(xs=K[2],Ab(Si,mr,xs),D0(xs),M3(Si,xs),Si._pack_prev=xs,M3(xs,mr),mr=Si._pack_next,ql=3;ql<Zp;ql++){Ab(Si,mr,xs=K[ql]);var H0=0,i0=1,w0=1;for(wp=mr._pack_next;wp!==mr;wp=wp._pack_next,i0++)if(A5(wp,xs)){H0=1;break}if(H0==1)for(Xp=Si._pack_prev;Xp!==wp._pack_prev&&!A5(Xp,xs);Xp=Xp._pack_prev,w0++);H0?(i0<w0||i0==w0&&mr.r<Si.r?q2(Si,mr=wp):q2(Si=Xp,mr),ql--):(M3(Si,xs),mr=xs,D0(xs))}var A0=(se+Ne)/2,G0=(We+nt)/2,Y0=0;for(ql=0;ql<Zp;ql++)xs=K[ql],xs.x-=A0,xs.y-=G0,Y0=Math.max(Y0,xs.r+Math.sqrt(xs.x*xs.x+xs.y*xs.y));_.r=Y0,K.forEach(T3)}function e1(_){_._pack_next=_._pack_prev=_}function T3(_){delete _._pack_next,delete _._pack_prev}function Fx(_,K,se,Ne){var We=_.children;if(_.x=K+=Ne*_.x,_.y=se+=Ne*_.y,_.r*=Ne,We)for(var nt=-1,Si=We.length;++nt<Si;)Fx(We[nt],K,se,Ne)}function Ab(_,K,se){var Ne=_.r+se.r,We=K.x-_.x,nt=K.y-_.y;if(Ne&&(We||nt)){var Si=K.r+se.r,mr=We*We+nt*nt;Si*=Si,Ne*=Ne;var xs=.5+(Ne-Si)/(2*mr),ql=Math.sqrt(Math.max(0,2*Si*(Ne+mr)-(Ne-=mr)*Ne-Si*Si))/(2*mr);se.x=_.x+xs*We+ql*nt,se.y=_.y+xs*nt-ql*We}else se.x=_.x+Ne,se.y=_.y}M.layout.tree=function(){var _=M.layout.hierarchy().sort(null).value(null),K=E3,se=[1,1],Ne=null;function We(wp,Xp){var Zp=_.call(this,wp,Xp),D0=Zp[0],H0=nt(D0);if(Dg(H0,Si),H0.parent.m=-H0.z,P_(H0,mr),Ne)P_(D0,ql);else{var i0=D0,w0=D0,A0=D0;P_(D0,function(n){n.x<i0.x&&(i0=n),n.x>w0.x&&(w0=n),n.depth>A0.depth&&(A0=n)});var G0=K(i0,w0)/2-i0.x,Y0=se[0]/(w0.x+K(w0,i0)/2+G0),C0=se[1]/(A0.depth||1);P_(D0,function(n){n.x=(n.x+G0)*Y0,n.y=n.depth*C0})}return Zp}function nt(wp){for(var Xp={A:null,children:[wp]},Zp=[Xp],D0;(D0=Zp.pop())!=null;)for(var H0=D0.children,i0,w0=0,A0=H0.length;w0<A0;++w0)Zp.push((H0[w0]=i0={_:H0[w0],parent:D0,children:(i0=H0[w0].children)&&i0.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:w0}).a=i0);return Xp.children[0]}function Si(wp){var Xp=wp.children,Zp=wp.parent.children,D0=wp.i?Zp[wp.i-1]:null;if(Xp.length){tw(wp);var H0=(Xp[0].z+Xp[Xp.length-1].z)/2;D0?(wp.z=D0.z+K(wp._,D0._),wp.m=wp.z-H0):wp.z=H0}else D0&&(wp.z=D0.z+K(wp._,D0._));wp.parent.A=xs(wp,D0,wp.parent.A||Zp[0])}function mr(wp){wp._.x=wp.z+wp.parent.m,wp.m+=wp.parent.m}function xs(wp,Xp,Zp){if(Xp){for(var D0=wp,H0=wp,i0=Xp,w0=D0.parent.children[0],A0=D0.m,G0=H0.m,Y0=i0.m,C0=w0.m,n;i0=p2(i0),D0=Bx(D0),i0&&D0;)w0=Bx(w0),H0=p2(H0),H0.a=wp,n=i0.z+Y0-D0.z-A0+K(i0._,D0._),n>0&&(Cb(C5(i0,wp,Zp),wp,n),A0+=n,G0+=n),Y0+=i0.m,A0+=D0.m,C0+=w0.m,G0+=H0.m;i0&&!p2(H0)&&(H0.t=i0,H0.m+=Y0-G0),D0&&!Bx(w0)&&(w0.t=D0,w0.m+=A0-C0,Zp=wp)}return Zp}function ql(wp){wp.x*=se[0],wp.y=wp.depth*se[1]}return We.separation=function(wp){return arguments.length?(K=wp,We):K},We.size=function(wp){return arguments.length?(Ne=(se=wp)==null?ql:null,We):Ne?null:se},We.nodeSize=function(wp){return arguments.length?(Ne=(se=wp)==null?null:ql,We):Ne?se:null},Ix(We,_)};function E3(_,K){return _.parent==K.parent?1:2}function Bx(_){var K=_.children;return K.length?K[0]:_.t}function p2(_){var K=_.children,se;return(se=K.length)?K[se-1]:_.t}function Cb(_,K,se){var Ne=se/(K.i-_.i);K.c-=Ne,K.s+=se,_.c+=Ne,K.z+=se,K.m+=se}function tw(_){for(var K=0,se=0,Ne=_.children,We=Ne.length,nt;--We>=0;)nt=Ne[We],nt.z+=K,nt.m+=K,K+=nt.s+(se+=nt.c)}function C5(_,K,se){return _.a.parent===K.parent?_.a:se}M.layout.cluster=function(){var _=M.layout.hierarchy().sort(null).value(null),K=E3,se=[1,1],Ne=!1;function We(nt,Si){var mr=_.call(this,nt,Si),xs=mr[0],ql,wp=0;Dg(xs,function(i0){var w0=i0.children;w0&&w0.length?(i0.x=aw(w0),i0.y=rw(w0)):(i0.x=ql?wp+=K(i0,ql):0,i0.y=0,ql=i0)});var Xp=A3(xs),Zp=C3(xs),D0=Xp.x-K(Xp,Zp)/2,H0=Zp.x+K(Zp,Xp)/2;return Dg(xs,Ne?function(i0){i0.x=(i0.x-xs.x)*se[0],i0.y=(xs.y-i0.y)*se[1]}:function(i0){i0.x=(i0.x-D0)/(H0-D0)*se[0],i0.y=(1-(xs.y?i0.y/xs.y:1))*se[1]}),mr}return We.separation=function(nt){return arguments.length?(K=nt,We):K},We.size=function(nt){return arguments.length?(Ne=(se=nt)==null,We):Ne?null:se},We.nodeSize=function(nt){return arguments.length?(Ne=(se=nt)!=null,We):Ne?se:null},Ix(We,_)};function rw(_){return 1+M.max(_,function(K){return K.y})}function aw(_){return _.reduce(function(K,se){return K+se.x},0)/_.length}function A3(_){var K=_.children;return K&&K.length?A3(K[0]):_}function C3(_){var K=_.children,se;return K&&(se=K.length)?C3(K[se-1]):_}M.layout.treemap=function(){var _=M.layout.hierarchy(),K=Math.round,se=[1,1],Ne=null,We=M1,nt=!1,Si,mr="squarify",xs=.5*(1+Math.sqrt(5));function ql(i0,w0){for(var A0=-1,G0=i0.length,Y0,C0;++A0<G0;)C0=(Y0=i0[A0]).value*(w0<0?0:w0),Y0.area=isNaN(C0)||C0<=0?0:C0}function wp(i0){var w0=i0.children;if(w0&&w0.length){var A0=We(i0),G0=[],Y0=w0.slice(),C0,n=1/0,i,d=mr==="slice"?A0.dx:mr==="dice"?A0.dy:mr==="slice-dice"?i0.depth&1?A0.dy:A0.dx:Math.min(A0.dx,A0.dy),O;for(ql(Y0,A0.dx*A0.dy/i0.value),G0.area=0;(O=Y0.length)>0;)G0.push(C0=Y0[O-1]),G0.area+=C0.area,mr!=="squarify"||(i=Zp(G0,d))<=n?(Y0.pop(),n=i):(G0.area-=G0.pop().area,D0(G0,d,A0,!1),d=Math.min(A0.dx,A0.dy),G0.length=G0.area=0,n=1/0);G0.length&&(D0(G0,d,A0,!0),G0.length=G0.area=0),w0.forEach(wp)}}function Xp(i0){var w0=i0.children;if(w0&&w0.length){var A0=We(i0),G0=w0.slice(),Y0,C0=[];for(ql(G0,A0.dx*A0.dy/i0.value),C0.area=0;Y0=G0.pop();)C0.push(Y0),C0.area+=Y0.area,Y0.z!=null&&(D0(C0,Y0.z?A0.dx:A0.dy,A0,!G0.length),C0.length=C0.area=0);w0.forEach(Xp)}}function Zp(i0,w0){for(var A0=i0.area,G0,Y0=0,C0=1/0,n=-1,i=i0.length;++n<i;)(G0=i0[n].area)&&(G0<C0&&(C0=G0),G0>Y0&&(Y0=G0));return A0*=A0,w0*=w0,A0?Math.max(w0*Y0*xs/A0,A0/(w0*C0*xs)):1/0}function D0(i0,w0,A0,G0){var Y0=-1,C0=i0.length,n=A0.x,i=A0.y,d=w0?K(i0.area/w0):0,O;if(w0==A0.dx){for((G0||d>A0.dy)&&(d=A0.dy);++Y0<C0;)O=i0[Y0],O.x=n,O.y=i,O.dy=d,n+=O.dx=Math.min(A0.x+A0.dx-n,d?K(O.area/d):0);O.z=!0,O.dx+=A0.x+A0.dx-n,A0.y+=d,A0.dy-=d}else{for((G0||d>A0.dx)&&(d=A0.dx);++Y0<C0;)O=i0[Y0],O.x=n,O.y=i,O.dx=d,i+=O.dy=Math.min(A0.y+A0.dy-i,d?K(O.area/d):0);O.z=!1,O.dy+=A0.y+A0.dy-i,A0.x+=d,A0.dx-=d}}function H0(i0){var w0=Si||_(i0),A0=w0[0];return A0.x=A0.y=0,A0.value?(A0.dx=se[0],A0.dy=se[1]):A0.dx=A0.dy=0,Si&&_.revalue(A0),ql([A0],A0.dx*A0.dy/A0.value),(Si?Xp:wp)(A0),nt&&(Si=w0),w0}return H0.size=function(i0){return arguments.length?(se=i0,H0):se},H0.padding=function(i0){if(!arguments.length)return Ne;function w0(Y0){var C0=i0.call(H0,Y0,Y0.depth);return C0==null?M1(Y0):Rb(Y0,typeof C0=="number"?[C0,C0,C0,C0]:C0)}function A0(Y0){return Rb(Y0,i0)}var G0;return We=(Ne=i0)==null?M1:(G0=typeof i0)=="function"?w0:(G0==="number"&&(i0=[i0,i0,i0,i0]),A0),H0},H0.round=function(i0){return arguments.length?(K=i0?Math.round:Number,H0):K!=Number},H0.sticky=function(i0){return arguments.length?(nt=i0,Si=null,H0):nt},H0.ratio=function(i0){return arguments.length?(xs=i0,H0):xs},H0.mode=function(i0){return arguments.length?(mr=i0+"",H0):mr},Ix(H0,_)};function M1(_){return{x:_.x,y:_.y,dx:_.dx,dy:_.dy}}function Rb(_,K){var se=_.x+K[3],Ne=_.y+K[0],We=_.dx-K[1]-K[3],nt=_.dy-K[0]-K[2];return We<0&&(se+=We/2,We=0),nt<0&&(Ne+=nt/2,nt=0),{x:se,y:Ne,dx:We,dy:nt}}M.random={normal:function(_,K){var se=arguments.length;return se<2&&(K=1),se<1&&(_=0),function(){var Ne,We,nt;do Ne=Math.random()*2-1,We=Math.random()*2-1,nt=Ne*Ne+We*We;while(!nt||nt>1);return _+K*Ne*Math.sqrt(-2*Math.log(nt)/nt)}},logNormal:function(){var _=M.random.normal.apply(M,arguments);return function(){return Math.exp(_())}},bates:function(_){var K=M.random.irwinHall(_);return function(){return K()/_}},irwinHall:function(_){return function(){for(var K=0,se=0;se<_;se++)K+=Math.random();return K}}},M.scale={};function sg(_){var K=_[0],se=_[_.length-1];return K<se?[K,se]:[se,K]}function Lb(_){return _.rangeExtent?_.rangeExtent():sg(_.range())}function R5(_,K,se,Ne){var We=se(_[0],_[1]),nt=Ne(K[0],K[1]);return function(Si){return nt(We(Si))}}function R3(_,K){var se=0,Ne=_.length-1,We=_[se],nt=_[Ne],Si;return nt<We&&(Si=se,se=Ne,Ne=Si,Si=We,We=nt,nt=Si),_[se]=K.floor(We),_[Ne]=K.ceil(nt),_}function Db(_){return _?{floor:function(K){return Math.floor(K/_)*_},ceil:function(K){return Math.ceil(K/_)*_}}:L3}var L3={floor:De,ceil:De};function kb(_,K,se,Ne){var We=[],nt=[],Si=0,mr=Math.min(_.length,K.length)-1;for(_[mr]<_[0]&&(_=_.slice().reverse(),K=K.slice().reverse());++Si<=mr;)We.push(se(_[Si-1],_[Si])),nt.push(Ne(K[Si-1],K[Si]));return function(xs){var ql=M.bisect(_,xs,1,mr)-1;return nt[ql](We[ql](xs))}}M.scale.linear=function(){return D3([0,1],[0,1],Fg,!1)};function D3(_,K,se,Ne){var We,nt;function Si(){var xs=Math.min(_.length,K.length)>2?kb:R5,ql=Ne?v5:m5;return We=xs(_,K,ql,se),nt=xs(K,_,ql,Fg),mr}function mr(xs){return We(xs)}return mr.invert=function(xs){return nt(xs)},mr.domain=function(xs){return arguments.length?(_=xs.map(Number),Si()):_},mr.range=function(xs){return arguments.length?(K=xs,Si()):K},mr.rangeRound=function(xs){return mr.range(xs).interpolate(p3)},mr.clamp=function(xs){return arguments.length?(Ne=xs,Si()):Ne},mr.interpolate=function(xs){return arguments.length?(se=xs,Si()):se},mr.ticks=function(xs){return N3(_,xs)},mr.tickFormat=function(xs,ql){return d3_scale_linearTickFormat(_,xs,ql)},mr.nice=function(xs){return Nb(_,xs),Si()},mr.copy=function(){return D3(_,K,se,Ne)},Si()}function k3(_,K){return M.rebind(_,K,"range","rangeRound","interpolate","clamp")}function Nb(_,K){return R3(_,Db(Hx(_,K)[2])),R3(_,Db(Hx(_,K)[2])),_}function Hx(_,K){K==null&&(K=10);var se=sg(_),Ne=se[1]-se[0],We=Math.pow(10,Math.floor(Math.log(Ne/K)/Math.LN10)),nt=K/Ne*We;return nt<=.15?We*=10:nt<=.35?We*=5:nt<=.75&&(We*=2),se[0]=Math.ceil(se[0]/We)*We,se[1]=Math.floor(se[1]/We)*We+We*.5,se[2]=We,se}function N3(_,K){return M.range.apply(M,Hx(_,K))}M.scale.log=function(){return z3(M.scale.linear().domain([0,1]),10,!0,[1,10])};function z3(_,K,se,Ne){function We(mr){return(se?Math.log(mr<0?0:mr):-Math.log(mr>0?0:-mr))/Math.log(K)}function nt(mr){return se?Math.pow(K,mr):-Math.pow(K,-mr)}function Si(mr){return _(We(mr))}return Si.invert=function(mr){return nt(_.invert(mr))},Si.domain=function(mr){return arguments.length?(se=mr[0]>=0,_.domain((Ne=mr.map(Number)).map(We)),Si):Ne},Si.base=function(mr){return arguments.length?(K=+mr,_.domain(Ne.map(We)),Si):K},Si.nice=function(){var mr=R3(Ne.map(We),se?Math:nw);return _.domain(mr),Ne=mr.map(nt),Si},Si.ticks=function(){var mr=sg(Ne),xs=[],ql=mr[0],wp=mr[1],Xp=Math.floor(We(ql)),Zp=Math.ceil(We(wp)),D0=K%1?2:K;if(isFinite(Zp-Xp)){if(se){for(;Xp<Zp;Xp++)for(var H0=1;H0<D0;H0++)xs.push(nt(Xp)*H0);xs.push(nt(Xp))}else for(xs.push(nt(Xp));Xp++<Zp;)for(var H0=D0-1;H0>0;H0--)xs.push(nt(Xp)*H0);for(Xp=0;xs[Xp]<ql;Xp++);for(Zp=xs.length;xs[Zp-1]>wp;Zp--);xs=xs.slice(Xp,Zp)}return xs},Si.copy=function(){return z3(_.copy(),K,se,Ne)},k3(Si,_)}var nw={floor:function(_){return-Math.ceil(-_)},ceil:function(_){return-Math.floor(-_)}};M.scale.pow=function(){return P3(M.scale.linear(),1,[0,1])};function P3(_,K,se){var Ne=zb(K),We=zb(1/K);function nt(Si){return _(Ne(Si))}return nt.invert=function(Si){return We(_.invert(Si))},nt.domain=function(Si){return arguments.length?(_.domain((se=Si.map(Number)).map(Ne)),nt):se},nt.ticks=function(Si){return N3(se,Si)},nt.tickFormat=function(Si,mr){return d3_scale_linearTickFormat(se,Si,mr)},nt.nice=function(Si){return nt.domain(Nb(se,Si))},nt.exponent=function(Si){return arguments.length?(Ne=zb(K=Si),We=zb(1/K),_.domain(se.map(Ne)),nt):K},nt.copy=function(){return P3(_.copy(),K,se)},k3(nt,_)}function zb(_){return function(K){return K<0?-Math.pow(-K,_):Math.pow(K,_)}}M.scale.sqrt=function(){return M.scale.pow().exponent(.5)},M.scale.ordinal=function(){return L5([],{t:"range",a:[[]]})};function L5(_,K){var se,Ne,We;function nt(mr){return Ne[((se.get(mr)||(K.t==="range"?se.set(mr,_.push(mr)):NaN))-1)%Ne.length]}function Si(mr,xs){return M.range(_.length).map(function(ql){return mr+xs*ql})}return nt.domain=function(mr){if(!arguments.length)return _;_=[],se=new ne;for(var xs=-1,ql=mr.length,wp;++xs<ql;)se.has(wp=mr[xs])||se.set(wp,_.push(wp));return nt[K.t].apply(nt,K.a)},nt.range=function(mr){return arguments.length?(Ne=mr,We=0,K={t:"range",a:arguments},nt):Ne},nt.rangePoints=function(mr,xs){arguments.length<2&&(xs=0);var ql=mr[0],wp=mr[1],Xp=_.length<2?(ql=(ql+wp)/2,0):(wp-ql)/(_.length-1+xs);return Ne=Si(ql+Xp*xs/2,Xp),We=0,K={t:"rangePoints",a:arguments},nt},nt.rangeRoundPoints=function(mr,xs){arguments.length<2&&(xs=0);var ql=mr[0],wp=mr[1],Xp=_.length<2?(ql=wp=Math.round((ql+wp)/2),0):(wp-ql)/(_.length-1+xs)|0;return Ne=Si(ql+Math.round(Xp*xs/2+(wp-ql-(_.length-1+xs)*Xp)/2),Xp),We=0,K={t:"rangeRoundPoints",a:arguments},nt},nt.rangeBands=function(mr,xs,ql){arguments.length<2&&(xs=0),arguments.length<3&&(ql=xs);var wp=mr[1]<mr[0],Xp=mr[wp-0],Zp=mr[1-wp],D0=(Zp-Xp)/(_.length-xs+2*ql);return Ne=Si(Xp+D0*ql,D0),wp&&Ne.reverse(),We=D0*(1-xs),K={t:"rangeBands",a:arguments},nt},nt.rangeRoundBands=function(mr,xs,ql){arguments.length<2&&(xs=0),arguments.length<3&&(ql=xs);var wp=mr[1]<mr[0],Xp=mr[wp-0],Zp=mr[1-wp],D0=Math.floor((Zp-Xp)/(_.length-xs+2*ql));return Ne=Si(Xp+Math.round((Zp-Xp-(_.length-xs)*D0)/2),D0),wp&&Ne.reverse(),We=Math.round(D0*(1-xs)),K={t:"rangeRoundBands",a:arguments},nt},nt.rangeBand=function(){return We},nt.rangeExtent=function(){return sg(K.a[0])},nt.copy=function(){return L5(_,K)},nt.domain(_)}M.scale.category10=function(){return M.scale.ordinal().range(I_)},M.scale.category20=function(){return M.scale.ordinal().range(D5)},M.scale.category20b=function(){return M.scale.ordinal().range(k5)},M.scale.category20c=function(){return M.scale.ordinal().range(O3)};var I_=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(kp),D5=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(kp),k5=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(kp),O3=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(kp);M.scale.quantile=function(){return N5([],[])};function N5(_,K){var se;function Ne(){var nt=0,Si=K.length;for(se=[];++nt<Si;)se[nt-1]=M.quantile(_,nt/Si);return We}function We(nt){if(!isNaN(nt=+nt))return K[M.bisect(se,nt)]}return We.domain=function(nt){return arguments.length?(_=nt.map(ee).filter(G).sort(j),Ne()):_},We.range=function(nt){return arguments.length?(K=nt,Ne()):K},We.quantiles=function(){return se},We.invertExtent=function(nt){return nt=K.indexOf(nt),nt<0?[NaN,NaN]:[nt>0?se[nt-1]:_[0],nt<se.length?se[nt]:_[_.length-1]]},We.copy=function(){return N5(_,K)},Ne()}M.scale.quantize=function(){return z5(0,1,[0,1])};function z5(_,K,se){var Ne,We;function nt(mr){return se[Math.max(0,Math.min(We,Math.floor(Ne*(mr-_))))]}function Si(){return Ne=se.length/(K-_),We=se.length-1,nt}return nt.domain=function(mr){return arguments.length?(_=+mr[0],K=+mr[mr.length-1],Si()):[_,K]},nt.range=function(mr){return arguments.length?(se=mr,Si()):se},nt.invertExtent=function(mr){return mr=se.indexOf(mr),mr=mr<0?NaN:mr/Ne+_,[mr,mr+1/Ne]},nt.copy=function(){return z5(_,K,se)},Si()}M.scale.threshold=function(){return I3([.5],[0,1])};function I3(_,K){function se(Ne){if(Ne<=Ne)return K[M.bisect(_,Ne)]}return se.domain=function(Ne){return arguments.length?(_=Ne,se):_},se.range=function(Ne){return arguments.length?(K=Ne,se):K},se.invertExtent=function(Ne){return Ne=K.indexOf(Ne),[_[Ne-1],_[Ne]]},se.copy=function(){return I3(_,K)},se}M.scale.identity=function(){return Pb([0,1])};function Pb(_){function K(se){return+se}return K.invert=K,K.domain=K.range=function(se){return arguments.length?(_=se.map(K),K):_},K.ticks=function(se){return N3(_,se)},K.tickFormat=function(se,Ne){return d3_scale_linearTickFormat(_,se,Ne)},K.copy=function(){return Pb(_)},K}M.svg={};function U3(){return 0}M.svg.arc=function(){var _=oy,K=F3,se=U3,Ne=Ob,We=B3,nt=H3,Si=P5;function mr(){var ql=Math.max(0,+_.apply(this,arguments)),wp=Math.max(0,+K.apply(this,arguments)),Xp=We.apply(this,arguments)-_n,Zp=nt.apply(this,arguments)-_n,D0=Math.abs(Zp-Xp),H0=Xp>Zp?0:1;if(wp<ql&&(i0=wp,wp=ql,ql=i0),D0>=ci)return xs(wp,H0)+(ql?xs(ql,1-H0):"")+"Z";var i0,w0,A0,G0,Y0=0,C0=0,n,i,d,O,le,Ee,ms,Hl,f0=[];if((G0=(+Si.apply(this,arguments)||0)/2)&&(A0=Ne===Ob?Math.sqrt(ql*ql+wp*wp):+Ne.apply(this,arguments),H0||(C0*=-1),wp&&(C0=Jp(A0/wp*Math.sin(G0))),ql&&(Y0=Jp(A0/ql*Math.sin(G0)))),wp){n=wp*Math.cos(Xp+C0),i=wp*Math.sin(Xp+C0),d=wp*Math.cos(Zp-C0),O=wp*Math.sin(Zp-C0);var Z0=Math.abs(Zp-Xp-2*C0)<=Ve?0:1;if(C0&&U_(n,i,d,O)===H0^Z0){var ym=(Xp+Zp)/2;n=wp*Math.cos(ym),i=wp*Math.sin(ym),d=O=null}}else n=i=0;if(ql){le=ql*Math.cos(Zp-Y0),Ee=ql*Math.sin(Zp-Y0),ms=ql*Math.cos(Xp+Y0),Hl=ql*Math.sin(Xp+Y0);var _m=Math.abs(Xp-Zp+2*Y0)<=Ve?0:1;if(Y0&&U_(le,Ee,ms,Hl)===1-H0^_m){var T0=(Xp+Zp)/2;le=ql*Math.cos(T0),Ee=ql*Math.sin(T0),ms=Hl=null}}else le=Ee=0;if(D0>jl&&(i0=Math.min(Math.abs(wp-ql)/2,+se.apply(this,arguments)))>.001){w0=ql<wp^H0?0:1;var Q0=i0,km=i0;if(D0<Ve){var Wm=ms==null?[le,Ee]:d==null?[n,i]:b1([n,i],[ms,Hl],[d,O],[le,Ee]),Av=n-Wm[0],$0=i-Wm[1],U0=d-Wm[0],om=O-Wm[1],Mm=1/Math.sin(Math.acos((Av*U0+$0*om)/(Math.sqrt(Av*Av+$0*$0)*Math.sqrt(U0*U0+om*om)))/2),nv=Math.sqrt(Wm[0]*Wm[0]+Wm[1]*Wm[1]);km=Math.min(i0,(ql-nv)/(Mm-1)),Q0=Math.min(i0,(wp-nv)/(Mm+1))}if(d!=null){var Fv=kg(ms==null?[le,Ee]:[ms,Hl],[n,i],wp,Q0,H0),Jm=kg([d,O],[le,Ee],wp,Q0,H0);i0===Q0?f0.push("M",Fv[0],"A",Q0,",",Q0," 0 0,",w0," ",Fv[1],"A",wp,",",wp," 0 ",1-H0^U_(Fv[1][0],Fv[1][1],Jm[1][0],Jm[1][1]),",",H0," ",Jm[1],"A",Q0,",",Q0," 0 0,",w0," ",Jm[0]):f0.push("M",Fv[0],"A",Q0,",",Q0," 0 1,",w0," ",Jm[0])}else f0.push("M",n,",",i);if(ms!=null){var Sv=kg([n,i],[ms,Hl],ql,-km,H0),qv=kg([le,Ee],d==null?[n,i]:[d,O],ql,-km,H0);i0===km?f0.push("L",qv[0],"A",km,",",km," 0 0,",w0," ",qv[1],"A",ql,",",ql," 0 ",H0^U_(qv[1][0],qv[1][1],Sv[1][0],Sv[1][1]),",",1-H0," ",Sv[1],"A",km,",",km," 0 0,",w0," ",Sv[0]):f0.push("L",qv[0],"A",km,",",km," 0 0,",w0," ",Sv[0])}else f0.push("L",le,",",Ee)}else f0.push("M",n,",",i),d!=null&&f0.push("A",wp,",",wp," 0 ",Z0,",",H0," ",d,",",O),f0.push("L",le,",",Ee),ms!=null&&f0.push("A",ql,",",ql," 0 ",_m,",",1-H0," ",ms,",",Hl);return f0.push("Z"),f0.join("")}function xs(ql,wp){return"M0,"+ql+"A"+ql+","+ql+" 0 1,"+wp+" 0,"+-ql+"A"+ql+","+ql+" 0 1,"+wp+" 0,"+ql}return mr.innerRadius=function(ql){return arguments.length?(_=P0(ql),mr):_},mr.outerRadius=function(ql){return arguments.length?(K=P0(ql),mr):K},mr.cornerRadius=function(ql){return arguments.length?(se=P0(ql),mr):se},mr.padRadius=function(ql){return arguments.length?(Ne=ql==Ob?Ob:P0(ql),mr):Ne},mr.startAngle=function(ql){return arguments.length?(We=P0(ql),mr):We},mr.endAngle=function(ql){return arguments.length?(nt=P0(ql),mr):nt},mr.padAngle=function(ql){return arguments.length?(Si=P0(ql),mr):Si},mr.centroid=function(){var ql=(+_.apply(this,arguments)+ +K.apply(this,arguments))/2,wp=(+We.apply(this,arguments)+ +nt.apply(this,arguments))/2-_n;return[Math.cos(wp)*ql,Math.sin(wp)*ql]},mr};var Ob="auto";function oy(_){return _.innerRadius}function F3(_){return _.outerRadius}function B3(_){return _.startAngle}function H3(_){return _.endAngle}function P5(_){return _&&_.padAngle}function U_(_,K,se,Ne){return(_-se)*K-(K-Ne)*_>0?0:1}function kg(_,K,se,Ne,We){var nt=_[0]-K[0],Si=_[1]-K[1],mr=(We?Ne:-Ne)/Math.sqrt(nt*nt+Si*Si),xs=mr*Si,ql=-mr*nt,wp=_[0]+xs,Xp=_[1]+ql,Zp=K[0]+xs,D0=K[1]+ql,H0=(wp+Zp)/2,i0=(Xp+D0)/2,w0=Zp-wp,A0=D0-Xp,G0=w0*w0+A0*A0,Y0=se-Ne,C0=wp*D0-Zp*Xp,n=(A0<0?-1:1)*Math.sqrt(Math.max(0,Y0*Y0*G0-C0*C0)),i=(C0*A0-w0*n)/G0,d=(-C0*w0-A0*n)/G0,O=(C0*A0+w0*n)/G0,le=(-C0*w0+A0*n)/G0,Ee=i-H0,ms=d-i0,Hl=O-H0,f0=le-i0;return Ee*Ee+ms*ms>Hl*Hl+f0*f0&&(i=O,d=le),[[i-xs,d-ql],[i*se/Y0,d*se/Y0]]}function j3(){return!0}function jx(_){var K=Mv,se=i1,Ne=j3,We=Ty,nt=We.key,Si=.7;function mr(xs){var ql=[],wp=[],Xp=-1,Zp=xs.length,D0,H0=P0(K),i0=P0(se);function w0(){ql.push("M",We(_(wp),Si))}for(;++Xp<Zp;)Ne.call(this,D0=xs[Xp],Xp)?wp.push([+H0.call(this,D0,Xp),+i0.call(this,D0,Xp)]):wp.length&&(w0(),wp=[]);return wp.length&&w0(),ql.length?ql.join(""):null}return mr.x=function(xs){return arguments.length?(K=xs,mr):K},mr.y=function(xs){return arguments.length?(se=xs,mr):se},mr.defined=function(xs){return arguments.length?(Ne=xs,mr):Ne},mr.interpolate=function(xs){return arguments.length?(typeof xs=="function"?nt=We=xs:nt=(We=Sy.get(xs)||Ty).key,mr):nt},mr.tension=function(xs){return arguments.length?(Si=xs,mr):Si},mr}M.svg.line=function(){return jx(De)};var Sy=M.map({linear:Ty,"linear-closed":O5,step:W2,"step-before":Ib,"step-after":G3,basis:I5,"basis-open":U5,"basis-closed":Y2,bundle:Gx,cardinal:ow,"cardinal-open":iw,"cardinal-closed":sw,monotone:Bb});Sy.forEach(function(_,K){K.key=_,K.closed=/-closed$/.test(_)});function Ty(_){return _.length>1?_.join("L"):_+"Z"}function O5(_){return _.join("L")+"Z"}function W2(_){for(var K=0,se=_.length,Ne=_[0],We=[Ne[0],",",Ne[1]];++K<se;)We.push("H",(Ne[0]+(Ne=_[K])[0])/2,"V",Ne[1]);return se>1&&We.push("H",Ne[0]),We.join("")}function Ib(_){for(var K=0,se=_.length,Ne=_[0],We=[Ne[0],",",Ne[1]];++K<se;)We.push("V",(Ne=_[K])[1],"H",Ne[0]);return We.join("")}function G3(_){for(var K=0,se=_.length,Ne=_[0],We=[Ne[0],",",Ne[1]];++K<se;)We.push("H",(Ne=_[K])[0],"V",Ne[1]);return We.join("")}function iw(_,K){return _.length<4?Ty(_):_[1]+Ub(_.slice(1,-1),V3(_,K))}function sw(_,K){return _.length<3?O5(_):_[0]+Ub((_.push(_[0]),_),V3([_[_.length-2]].concat(_,[_[1]]),K))}function ow(_,K){return _.length<3?Ty(_):_[0]+Ub(_,V3(_,K))}function Ub(_,K){if(K.length<1||_.length!=K.length&&_.length!=K.length+2)return Ty(_);var se=_.length!=K.length,Ne="",We=_[0],nt=_[1],Si=K[0],mr=Si,xs=1;if(se&&(Ne+="Q"+(nt[0]-Si[0]*2/3)+","+(nt[1]-Si[1]*2/3)+","+nt[0]+","+nt[1],We=_[1],xs=2),K.length>1){mr=K[1],nt=_[xs],xs++,Ne+="C"+(We[0]+Si[0])+","+(We[1]+Si[1])+","+(nt[0]-mr[0])+","+(nt[1]-mr[1])+","+nt[0]+","+nt[1];for(var ql=2;ql<K.length;ql++,xs++)nt=_[xs],mr=K[ql],Ne+="S"+(nt[0]-mr[0])+","+(nt[1]-mr[1])+","+nt[0]+","+nt[1]}if(se){var wp=_[xs];Ne+="Q"+(nt[0]+mr[0]*2/3)+","+(nt[1]+mr[1]*2/3)+","+wp[0]+","+wp[1]}return Ne}function V3(_,K){for(var se=[],Ne=(1-K)/2,We,nt=_[0],Si=_[1],mr=1,xs=_.length;++mr<xs;)We=nt,nt=Si,Si=_[mr],se.push([Ne*(Si[0]-We[0]),Ne*(Si[1]-We[1])]);return se}function I5(_){if(_.length<3)return Ty(_);var K=1,se=_.length,Ne=_[0],We=Ne[0],nt=Ne[1],Si=[We,We,We,(Ne=_[1])[0]],mr=[nt,nt,nt,Ne[1]],xs=[We,",",nt,"L",Zg(ly,Si),",",Zg(ly,mr)];for(_.push(_[se-1]);++K<=se;)Ne=_[K],Si.shift(),Si.push(Ne[0]),mr.shift(),mr.push(Ne[1]),Fb(xs,Si,mr);return _.pop(),xs.push("L",Ne),xs.join("")}function U5(_){if(_.length<4)return Ty(_);for(var K=[],se=-1,Ne=_.length,We,nt=[0],Si=[0];++se<3;)We=_[se],nt.push(We[0]),Si.push(We[1]);for(K.push(Zg(ly,nt)+","+Zg(ly,Si)),--se;++se<Ne;)We=_[se],nt.shift(),nt.push(We[0]),Si.shift(),Si.push(We[1]),Fb(K,nt,Si);return K.join("")}function Y2(_){for(var K,se=-1,Ne=_.length,We=Ne+4,nt,Si=[],mr=[];++se<4;)nt=_[se%Ne],Si.push(nt[0]),mr.push(nt[1]);for(K=[Zg(ly,Si),",",Zg(ly,mr)],--se;++se<We;)nt=_[se%Ne],Si.shift(),Si.push(nt[0]),mr.shift(),mr.push(nt[1]),Fb(K,Si,mr);return K.join("")}function Gx(_,K){var se=_.length-1;if(se)for(var Ne=_[0][0],We=_[0][1],nt=_[se][0]-Ne,Si=_[se][1]-We,mr=-1,xs,ql;++mr<=se;)xs=_[mr],ql=mr/se,xs[0]=K*xs[0]+(1-K)*(Ne+ql*nt),xs[1]=K*xs[1]+(1-K)*(We+ql*Si);return I5(_)}function Zg(_,K){return _[0]*K[0]+_[1]*K[1]+_[2]*K[2]+_[3]*K[3]}var F5=[0,2/3,1/3,0],m2=[0,1/3,2/3,0],ly=[0,1/6,2/3,1/6];function Fb(_,K,se){_.push("C",Zg(F5,K),",",Zg(F5,se),",",Zg(m2,K),",",Zg(m2,se),",",Zg(ly,K),",",Zg(ly,se))}function X2(_,K){return(K[1]-_[1])/(K[0]-_[0])}function q3(_){for(var K=0,se=_.length-1,Ne=[],We=_[0],nt=_[1],Si=Ne[0]=X2(We,nt);++K<se;)Ne[K]=(Si+(Si=X2(We=nt,nt=_[K+1])))/2;return Ne[K]=Si,Ne}function W3(_){for(var K=[],se,Ne,We,nt,Si=q3(_),mr=-1,xs=_.length-1;++mr<xs;)se=X2(_[mr],_[mr+1]),z(se)<jl?Si[mr]=Si[mr+1]=0:(Ne=Si[mr]/se,We=Si[mr+1]/se,nt=Ne*Ne+We*We,nt>9&&(nt=se*3/Math.sqrt(nt),Si[mr]=nt*Ne,Si[mr+1]=nt*We));for(mr=-1;++mr<=xs;)nt=(_[Math.min(xs,mr+1)][0]-_[Math.max(0,mr-1)][0])/(6*(1+Si[mr]*Si[mr])),K.push([nt||0,Si[mr]*nt||0]);return K}function Bb(_){return _.length<3?Ty(_):_[0]+Ub(_,W3(_))}M.svg.line.radial=function(){var _=jx(Y3);return _.radius=_.x,delete _.x,_.angle=_.y,delete _.y,_};function Y3(_){for(var K,se=-1,Ne=_.length,We,nt;++se<Ne;)K=_[se],We=K[0],nt=K[1]-_n,K[0]=We*Math.cos(nt),K[1]=We*Math.sin(nt);return _}function X3(_){var K=Mv,se=Mv,Ne=0,We=i1,nt=j3,Si=Ty,mr=Si.key,xs=Si,ql="L",wp=.7;function Xp(Zp){var D0=[],H0=[],i0=[],w0=-1,A0=Zp.length,G0,Y0=P0(K),C0=P0(Ne),n=K===se?function(){return d}:P0(se),i=Ne===We?function(){return O}:P0(We),d,O;function le(){D0.push("M",Si(_(i0),wp),ql,xs(_(H0.reverse()),wp),"Z")}for(;++w0<A0;)nt.call(this,G0=Zp[w0],w0)?(H0.push([d=+Y0.call(this,G0,w0),O=+C0.call(this,G0,w0)]),i0.push([+n.call(this,G0,w0),+i.call(this,G0,w0)])):H0.length&&(le(),H0=[],i0=[]);return H0.length&&le(),D0.length?D0.join(""):null}return Xp.x=function(Zp){return arguments.length?(K=se=Zp,Xp):se},Xp.x0=function(Zp){return arguments.length?(K=Zp,Xp):K},Xp.x1=function(Zp){return arguments.length?(se=Zp,Xp):se},Xp.y=function(Zp){return arguments.length?(Ne=We=Zp,Xp):We},Xp.y0=function(Zp){return arguments.length?(Ne=Zp,Xp):Ne},Xp.y1=function(Zp){return arguments.length?(We=Zp,Xp):We},Xp.defined=function(Zp){return arguments.length?(nt=Zp,Xp):nt},Xp.interpolate=function(Zp){return arguments.length?(typeof Zp=="function"?mr=Si=Zp:mr=(Si=Sy.get(Zp)||Ty).key,xs=Si.reverse||Si,ql=Si.closed?"M":"L",Xp):mr},Xp.tension=function(Zp){return arguments.length?(wp=Zp,Xp):wp},Xp}Ib.reverse=G3,G3.reverse=Ib,M.svg.area=function(){return X3(De)},M.svg.area.radial=function(){var _=X3(Y3);return _.radius=_.x,delete _.x,_.innerRadius=_.x0,delete _.x0,_.outerRadius=_.x1,delete _.x1,_.angle=_.y,delete _.y,_.startAngle=_.y0,delete _.y0,_.endAngle=_.y1,delete _.y1,_};function B5(_){return _.source}function $3(_){return _.target}M.svg.chord=function(){var _=B5,K=$3,se=lw,Ne=B3,We=H3;function nt(wp,Xp){var Zp=Si(this,_,wp,Xp),D0=Si(this,K,wp,Xp);return"M"+Zp.p0+xs(Zp.r,Zp.p1,Zp.a1-Zp.a0)+(mr(Zp,D0)?ql(Zp.r,Zp.p1,Zp.r,Zp.p0):ql(Zp.r,Zp.p1,D0.r,D0.p0)+xs(D0.r,D0.p1,D0.a1-D0.a0)+ql(D0.r,D0.p1,Zp.r,Zp.p0))+"Z"}function Si(wp,Xp,Zp,D0){var H0=Xp.call(wp,Zp,D0),i0=se.call(wp,H0,D0),w0=Ne.call(wp,H0,D0)-_n,A0=We.call(wp,H0,D0)-_n;return{r:i0,a0:w0,a1:A0,p0:[i0*Math.cos(w0),i0*Math.sin(w0)],p1:[i0*Math.cos(A0),i0*Math.sin(A0)]}}function mr(wp,Xp){return wp.a0==Xp.a0&&wp.a1==Xp.a1}function xs(wp,Xp,Zp){return"A"+wp+","+wp+" 0 "+ +(Zp>Ve)+",1 "+Xp}function ql(wp,Xp,Zp,D0){return"Q 0,0 "+D0}return nt.radius=function(wp){return arguments.length?(se=P0(wp),nt):se},nt.source=function(wp){return arguments.length?(_=P0(wp),nt):_},nt.target=function(wp){return arguments.length?(K=P0(wp),nt):K},nt.startAngle=function(wp){return arguments.length?(Ne=P0(wp),nt):Ne},nt.endAngle=function(wp){return arguments.length?(We=P0(wp),nt):We},nt};function lw(_){return _.radius}M.svg.diagonal=function(){var _=B5,K=$3,se=Hb;function Ne(We,nt){var Si=_.call(this,We,nt),mr=K.call(this,We,nt),xs=(Si.y+mr.y)/2,ql=[Si,{x:Si.x,y:xs},{x:mr.x,y:xs},mr];return ql=ql.map(se),"M"+ql[0]+"C"+ql[1]+" "+ql[2]+" "+ql[3]}return Ne.source=function(We){return arguments.length?(_=P0(We),Ne):_},Ne.target=function(We){return arguments.length?(K=P0(We),Ne):K},Ne.projection=function(We){return arguments.length?(se=We,Ne):se},Ne};function Hb(_){return[_.x,_.y]}M.svg.diagonal.radial=function(){var _=M.svg.diagonal(),K=Hb,se=_.projection;return _.projection=function(Ne){return arguments.length?se(cw(K=Ne)):K},_};function cw(_){return function(){var K=_.apply(this,arguments),se=K[0],Ne=K[1]-_n;return[se*Math.cos(Ne),se*Math.sin(Ne)]}}M.svg.symbol=function(){var _=Gb,K=jb;function se(Ne,We){return(H5.get(_.call(this,Ne,We))||Vx)(K.call(this,Ne,We))}return se.type=function(Ne){return arguments.length?(_=P0(Ne),se):_},se.size=function(Ne){return arguments.length?(K=P0(Ne),se):K},se};function jb(){return 64}function Gb(){return"circle"}function Vx(_){var K=Math.sqrt(_/Ve);return"M0,"+K+"A"+K+","+K+" 0 1,1 0,"+-K+"A"+K+","+K+" 0 1,1 0,"+K+"Z"}var H5=M.map({circle:Vx,cross:function(_){var K=Math.sqrt(_/5)/2;return"M"+-3*K+","+-K+"H"+-K+"V"+-3*K+"H"+K+"V"+-K+"H"+3*K+"V"+K+"H"+K+"V"+3*K+"H"+-K+"V"+K+"H"+-3*K+"Z"},diamond:function(_){var K=Math.sqrt(_/(2*j5)),se=K*j5;return"M0,"+-K+"L"+se+",0 0,"+K+" "+-se+",0Z"},square:function(_){var K=Math.sqrt(_)/2;return"M"+-K+","+-K+"L"+K+","+-K+" "+K+","+K+" "+-K+","+K+"Z"},"triangle-down":function(_){var K=Math.sqrt(_/F_),se=K*F_/2;return"M0,"+se+"L"+K+","+-se+" "+-K+","+-se+"Z"},"triangle-up":function(_){var K=Math.sqrt(_/F_),se=K*F_/2;return"M0,"+-se+"L"+K+","+se+" "+-K+","+se+"Z"}});M.svg.symbolTypes=H5.keys();var F_=Math.sqrt(3),j5=Math.tan(30*Tp);Re.transition=function(_){for(var K=B_||++Vb,se=K3(_),Ne=[],We,nt,Si=Wx||{time:Date.now(),ease:Bg,delay:0,duration:250},mr=-1,xs=this.length;++mr<xs;){Ne.push(We=[]);for(var ql=this[mr],wp=-1,Xp=ql.length;++wp<Xp;)(nt=ql[wp])&&K2(nt,wp,se,K,Si),We.push(nt)}return $2(Ne,se,K)},Re.interrupt=function(_){return this.each(_==null?qx:Z3(K3(_)))};var qx=Z3(K3());function Z3(_){return function(){var K,se,Ne;(K=this[_])&&(Ne=K[se=K.active])&&(Ne.timer.c=null,Ne.timer.t=NaN,--K.count?delete K[se]:delete this[_],K.active+=.5,Ne.event&&Ne.event.interrupt.call(this,this.__data__,Ne.index))}}function $2(_,K,se){return Ae(_,J1),_.namespace=K,_.id=se,_}var J1=[],Vb=0,B_,Wx;J1.call=Re.call,J1.empty=Re.empty,J1.node=Re.node,J1.size=Re.size,M.transition=function(_,K){return _&&_.transition?B_?_.transition(K):_:M.selection().transition(_)},M.transition.prototype=J1,J1.select=function(_){var K=this.id,se=this.namespace,Ne=[],We,nt,Si;_=Q(_);for(var mr=-1,xs=this.length;++mr<xs;){Ne.push(We=[]);for(var ql=this[mr],wp=-1,Xp=ql.length;++wp<Xp;)(Si=ql[wp])&&(nt=_.call(Si,Si.__data__,wp,mr))?("__data__"in Si&&(nt.__data__=Si.__data__),K2(nt,wp,se,K,Si[se][K]),We.push(nt)):We.push(null)}return $2(Ne,se,K)},J1.selectAll=function(_){var K=this.id,se=this.namespace,Ne=[],We,nt,Si,mr,xs;_=ce(_);for(var ql=-1,wp=this.length;++ql<wp;)for(var Xp=this[ql],Zp=-1,D0=Xp.length;++Zp<D0;)if(Si=Xp[Zp]){xs=Si[se][K],nt=_.call(Si,Si.__data__,Zp,ql),Ne.push(We=[]);for(var H0=-1,i0=nt.length;++H0<i0;)(mr=nt[H0])&&K2(mr,H0,se,K,xs),We.push(mr)}return $2(Ne,se,K)},J1.filter=function(_){var K=[],se,Ne,We;typeof _!="function"&&(_=dr(_));for(var nt=0,Si=this.length;nt<Si;nt++){K.push(se=[]);for(var Ne=this[nt],mr=0,xs=Ne.length;mr<xs;mr++)(We=Ne[mr])&&_.call(We,We.__data__,mr,nt)&&se.push(We)}return $2(K,this.namespace,this.id)},J1.tween=function(_,K){var se=this.id,Ne=this.namespace;return arguments.length<2?this.node()[Ne][se].tween.get(_):Cp(this,K==null?function(We){We[Ne][se].tween.remove(_)}:function(We){We[Ne][se].tween.set(_,K)})};function Z2(_,K,se,Ne){var We=_.id,nt=_.namespace;return Cp(_,typeof se=="function"?function(Si,mr,xs){Si[nt][We].tween.set(K,Ne(se.call(Si,Si.__data__,mr,xs)))}:(se=Ne(se),function(Si){Si[nt][We].tween.set(K,se)}))}J1.attr=function(_,K){if(arguments.length<2){for(K in _)this.attr(K,_[K]);return this}var se=_=="transform"?m3:Fg,Ne=M.ns.qualify(_);function We(){this.removeAttribute(Ne)}function nt(){this.removeAttributeNS(Ne.space,Ne.local)}function Si(xs){return xs==null?We:(xs+="",function(){var ql=this.getAttribute(Ne),wp;return ql!==xs&&(wp=se(ql,xs),function(Xp){this.setAttribute(Ne,wp(Xp))})})}function mr(xs){return xs==null?nt:(xs+="",function(){var ql=this.getAttributeNS(Ne.space,Ne.local),wp;return ql!==xs&&(wp=se(ql,xs),function(Xp){this.setAttributeNS(Ne.space,Ne.local,wp(Xp))})})}return Z2(this,"attr."+_,K,Ne.local?mr:Si)},J1.attrTween=function(_,K){var se=M.ns.qualify(_);function Ne(nt,Si){var mr=K.call(this,nt,Si,this.getAttribute(se));return mr&&function(xs){this.setAttribute(se,mr(xs))}}function We(nt,Si){var mr=K.call(this,nt,Si,this.getAttributeNS(se.space,se.local));return mr&&function(xs){this.setAttributeNS(se.space,se.local,mr(xs))}}return this.tween("attr."+_,se.local?We:Ne)},J1.style=function(_,K,se){var Ne=arguments.length;if(Ne<3){if(typeof _!="string"){Ne<2&&(K="");for(se in _)this.style(se,_[se],K);return this}se=""}function We(){this.style.removeProperty(_)}function nt(Si){return Si==null?We:(Si+="",function(){var mr=T(this).getComputedStyle(this,null).getPropertyValue(_),xs;return mr!==Si&&(xs=Fg(mr,Si),function(ql){this.style.setProperty(_,xs(ql),se)})})}return Z2(this,"style."+_,K,nt)},J1.styleTween=function(_,K,se){arguments.length<3&&(se="");function Ne(We,nt){var Si=K.call(this,We,nt,T(this).getComputedStyle(this,null).getPropertyValue(_));return Si&&function(mr){this.style.setProperty(_,Si(mr),se)}}return this.tween("style."+_,Ne)},J1.text=function(_){return Z2(this,"text",_,uw)};function uw(_){return _==null&&(_=""),function(){this.textContent=_}}J1.remove=function(){var _=this.namespace;return this.each("end.transition",function(){var K;this[_].count<2&&(K=this.parentNode)&&K.removeChild(this)})},J1.ease=function(_){var K=this.id,se=this.namespace;return arguments.length<1?this.node()[se][K].ease:(typeof _!="function"&&(_=M.ease.apply(M,arguments)),Cp(this,function(Ne){Ne[se][K].ease=_}))},J1.delay=function(_){var K=this.id,se=this.namespace;return arguments.length<1?this.node()[se][K].delay:Cp(this,typeof _=="function"?function(Ne,We,nt){Ne[se][K].delay=+_.call(Ne,Ne.__data__,We,nt)}:(_=+_,function(Ne){Ne[se][K].delay=_}))},J1.duration=function(_){var K=this.id,se=this.namespace;return arguments.length<1?this.node()[se][K].duration:Cp(this,typeof _=="function"?function(Ne,We,nt){Ne[se][K].duration=Math.max(1,_.call(Ne,Ne.__data__,We,nt))}:(_=Math.max(1,_),function(Ne){Ne[se][K].duration=_}))},J1.each=function(_,K){var se=this.id,Ne=this.namespace;if(arguments.length<2){var We=Wx,nt=B_;try{B_=se,Cp(this,function(Si,mr,xs){Wx=Si[Ne][se],_.call(Si,Si.__data__,mr,xs)})}finally{Wx=We,B_=nt}}else Cp(this,function(Si){var mr=Si[Ne][se];(mr.event||(mr.event=M.dispatch("start","end","interrupt"))).on(_,K)});return this},J1.transition=function(){for(var _=this.id,K=++Vb,se=this.namespace,Ne=[],We,nt,Si,mr,xs=0,ql=this.length;xs<ql;xs++){Ne.push(We=[]);for(var nt=this[xs],wp=0,Xp=nt.length;wp<Xp;wp++)(Si=nt[wp])&&(mr=Si[se][_],K2(Si,wp,se,K,{time:mr.time,ease:mr.ease,delay:mr.delay+mr.duration,duration:mr.duration})),We.push(Si)}return $2(Ne,se,K)};function K3(_){return _==null?"__transition__":"__transition_"+_+"__"}function K2(_,K,se,Ne,We){var nt=_[se]||(_[se]={active:0,count:0}),Si=nt[Ne],mr,xs,ql,wp,Xp;function Zp(i0){var w0=Si.delay;if(xs.t=w0+mr,w0<=i0)return D0(i0-w0);xs.c=D0}function D0(i0){var w0=nt.active,A0=nt[w0];A0&&(A0.timer.c=null,A0.timer.t=NaN,--nt.count,delete nt[w0],A0.event&&A0.event.interrupt.call(_,_.__data__,A0.index));for(var G0 in nt)if(+G0<Ne){var Y0=nt[G0];Y0.timer.c=null,Y0.timer.t=NaN,--nt.count,delete nt[G0]}xs.c=H0,pv(function(){return xs.c&&H0(i0||1)&&(xs.c=null,xs.t=NaN),1},0,mr),nt.active=Ne,Si.event&&Si.event.start.call(_,_.__data__,K),Xp=[],Si.tween.forEach(function(C0,n){(n=n.call(_,_.__data__,K))&&Xp.push(n)}),wp=Si.ease,ql=Si.duration}function H0(i0){for(var w0=i0/ql,A0=wp(w0),G0=Xp.length;G0>0;)Xp[--G0].call(_,A0);if(w0>=1)return Si.event&&Si.event.end.call(_,_.__data__,K),--nt.count?delete nt[Ne]:delete _[se],1}Si||(mr=We.time,xs=pv(Zp,0,mr),Si=nt[Ne]={tween:new ne,time:mr,timer:xs,delay:We.delay,duration:We.duration,ease:We.ease,index:K},We=null,++nt.count)}M.svg.axis=function(){var _=M.scale.linear(),K=qb,se=6,Ne=6,We=3,nt=[10],Si=null,mr;function xs(ql){ql.each(function(){var wp=M.select(this),Xp=this.__chart__||_,Zp=this.__chart__=_.copy(),D0=Si??(Zp.ticks?Zp.ticks.apply(Zp,nt):Zp.domain()),H0=mr??(Zp.tickFormat?Zp.tickFormat.apply(Zp,nt):De),i0=wp.selectAll(".tick").data(D0,Zp),w0=i0.enter().insert("g",".domain").attr("class","tick").style("opacity",jl),A0=M.transition(i0.exit()).style("opacity",jl).remove(),G0=M.transition(i0.order()).style("opacity",1),Y0=Math.max(se,0)+We,C0,n=Lb(Zp),i=wp.selectAll(".domain").data([0]),d=(i.enter().append("path").attr("class","domain"),M.transition(i));w0.append("line"),w0.append("text");var O=w0.select("line"),le=G0.select("line"),Ee=i0.select("text").text(H0),ms=w0.select("text"),Hl=G0.select("text"),f0=K==="top"||K==="left"?-1:1,Z0,ym,_m,T0;if(K==="bottom"||K==="top"?(C0=J3,Z0="x",_m="y",ym="x2",T0="y2",Ee.attr("dy",f0<0?"0em":".71em").style("text-anchor","middle"),d.attr("d","M"+n[0]+","+f0*Ne+"V0H"+n[1]+"V"+f0*Ne)):(C0=G5,Z0="y",_m="x",ym="y2",T0="x2",Ee.attr("dy",".32em").style("text-anchor",f0<0?"end":"start"),d.attr("d","M"+f0*Ne+","+n[0]+"H0V"+n[1]+"H"+f0*Ne)),O.attr(T0,f0*se),ms.attr(_m,f0*Y0),le.attr(ym,0).attr(T0,f0*se),Hl.attr(Z0,0).attr(_m,f0*Y0),Zp.rangeBand){var Q0=Zp,km=Q0.rangeBand()/2;Xp=Zp=function(Wm){return Q0(Wm)+km}}else Xp.rangeBand?Xp=Zp:A0.call(C0,Zp,Xp);w0.call(C0,Xp,Zp),G0.call(C0,Zp,Zp)})}return xs.scale=function(ql){return arguments.length?(_=ql,xs):_},xs.orient=function(ql){return arguments.length?(K=ql in Wb?ql+"":qb,xs):K},xs.ticks=function(){return arguments.length?(nt=g(arguments),xs):nt},xs.tickValues=function(ql){return arguments.length?(Si=ql,xs):Si},xs.tickFormat=function(ql){return arguments.length?(mr=ql,xs):mr},xs.tickSize=function(ql){var wp=arguments.length;return wp?(se=+ql,Ne=+arguments[wp-1],xs):se},xs.innerTickSize=function(ql){return arguments.length?(se=+ql,xs):se},xs.outerTickSize=function(ql){return arguments.length?(Ne=+ql,xs):Ne},xs.tickPadding=function(ql){return arguments.length?(We=+ql,xs):We},xs.tickSubdivide=function(){return arguments.length&&xs},xs};var qb="bottom",Wb={top:1,right:1,bottom:1,left:1};function J3(_,K,se){_.attr("transform",function(Ne){var We=K(Ne);return"translate("+(isFinite(We)?We:se(Ne))+",0)"})}function G5(_,K,se){_.attr("transform",function(Ne){var We=K(Ne);return"translate(0,"+(isFinite(We)?We:se(Ne))+")"})}M.svg.brush=function(){var _=ta(wp,"brushstart","brush","brushend"),K=null,se=null,Ne=[0,0],We=[0,0],nt,Si,mr=!0,xs=!0,ql=By[0];function wp(i0){i0.each(function(){var w0=M.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",H0).on("touchstart.brush",H0),A0=w0.selectAll(".background").data([0]);A0.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),w0.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var G0=w0.selectAll(".resize").data(ql,De);G0.exit().remove(),G0.enter().append("g").attr("class",function(i){return"resize "+i}).style("cursor",function(i){return Q3[i]}).append("rect").attr("x",function(i){return/[ew]$/.test(i)?-3:null}).attr("y",function(i){return/^[ns]/.test(i)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),G0.style("display",wp.empty()?"none":null);var Y0=M.transition(w0),C0=M.transition(A0),n;K&&(n=Lb(K),C0.attr("x",n[0]).attr("width",n[1]-n[0]),Zp(Y0)),se&&(n=Lb(se),C0.attr("y",n[0]).attr("height",n[1]-n[0]),D0(Y0)),Xp(Y0)})}wp.event=function(i0){i0.each(function(){var w0=_.of(this,arguments),A0={x:Ne,y:We,i:nt,j:Si},G0=this.__chart__||A0;this.__chart__=A0,B_?M.select(this).transition().each("start.brush",function(){nt=G0.i,Si=G0.j,Ne=G0.x,We=G0.y,w0({type:"brushstart"})}).tween("brush:brush",function(){var Y0=c_(Ne,A0.x),C0=c_(We,A0.y);return nt=Si=null,function(n){Ne=A0.x=Y0(n),We=A0.y=C0(n),w0({type:"brush",mode:"resize"})}}).each("end.brush",function(){nt=A0.i,Si=A0.j,w0({type:"brush",mode:"resize"}),w0({type:"brushend"})}):(w0({type:"brushstart"}),w0({type:"brush",mode:"resize"}),w0({type:"brushend"}))})};function Xp(i0){i0.selectAll(".resize").attr("transform",function(w0){return"translate("+Ne[+/e$/.test(w0)]+","+We[+/^s/.test(w0)]+")"})}function Zp(i0){i0.select(".extent").attr("x",Ne[0]),i0.selectAll(".extent,.n>rect,.s>rect").attr("width",Ne[1]-Ne[0])}function D0(i0){i0.select(".extent").attr("y",We[0]),i0.selectAll(".extent,.e>rect,.w>rect").attr("height",We[1]-We[0])}function H0(){var i0=this,w0=M.select(M.event.target),A0=_.of(i0,arguments),G0=M.select(i0),Y0=w0.datum(),C0=!/^(n|s)$/.test(Y0)&&K,n=!/^(e|w)$/.test(Y0)&&se,i=w0.classed("extent"),d=em(i0),O,le=M.mouse(i0),Ee,ms=M.select(T(i0)).on("keydown.brush",Z0).on("keyup.brush",ym);if(M.event.changedTouches?ms.on("touchmove.brush",_m).on("touchend.brush",Q0):ms.on("mousemove.brush",_m).on("mouseup.brush",Q0),G0.interrupt().selectAll("*").interrupt(),i)le[0]=Ne[0]-le[0],le[1]=We[0]-le[1];else if(Y0){var Hl=+/w$/.test(Y0),f0=+/^n/.test(Y0);Ee=[Ne[1-Hl]-le[0],We[1-f0]-le[1]],le[0]=Ne[Hl],le[1]=We[f0]}else M.event.altKey&&(O=le.slice());G0.style("pointer-events","none").selectAll(".resize").style("display",null),M.select("body").style("cursor",w0.style("cursor")),A0({type:"brushstart"}),_m();function Z0(){M.event.keyCode==32&&(i||(O=null,le[0]-=Ne[1],le[1]-=We[1],i=2),ft())}function ym(){M.event.keyCode==32&&i==2&&(le[0]+=Ne[1],le[1]+=We[1],i=0,ft())}function _m(){var km=M.mouse(i0),Wm=!1;Ee&&(km[0]+=Ee[0],km[1]+=Ee[1]),i||(M.event.altKey?(O||(O=[(Ne[0]+Ne[1])/2,(We[0]+We[1])/2]),le[0]=Ne[+(km[0]<O[0])],le[1]=We[+(km[1]<O[1])]):O=null),C0&&T0(km,K,0)&&(Zp(G0),Wm=!0),n&&T0(km,se,1)&&(D0(G0),Wm=!0),Wm&&(Xp(G0),A0({type:"brush",mode:i?"move":"resize"}))}function T0(km,Wm,Av){var $0=Lb(Wm),U0=$0[0],om=$0[1],Mm=le[Av],nv=Av?We:Ne,Fv=nv[1]-nv[0],Jm,Sv;if(i&&(U0-=Mm,om-=Fv+Mm),Jm=(Av?xs:mr)?Math.max(U0,Math.min(om,km[Av])):km[Av],i?Sv=(Jm+=Mm)+Fv:(O&&(Mm=Math.max(U0,Math.min(om,2*O[Av]-Jm))),Mm<Jm?(Sv=Jm,Jm=Mm):Sv=Mm),nv[0]!=Jm||nv[1]!=Sv)return Av?Si=null:nt=null,nv[0]=Jm,nv[1]=Sv,!0}function Q0(){_m(),G0.style("pointer-events","all").selectAll(".resize").style("display",wp.empty()?"none":null),M.select("body").style("cursor",null),ms.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),d(),A0({type:"brushend"})}}return wp.x=function(i0){return arguments.length?(K=i0,ql=By[!K<<1|!se],wp):K},wp.y=function(i0){return arguments.length?(se=i0,ql=By[!K<<1|!se],wp):se},wp.clamp=function(i0){return arguments.length?(K&&se?(mr=!!i0[0],xs=!!i0[1]):K?mr=!!i0:se&&(xs=!!i0),wp):K&&se?[mr,xs]:K?mr:se?xs:null},wp.extent=function(i0){var w0,A0,G0,Y0,C0;return arguments.length?(K&&(w0=i0[0],A0=i0[1],se&&(w0=w0[0],A0=A0[0]),nt=[w0,A0],K.invert&&(w0=K(w0),A0=K(A0)),A0<w0&&(C0=w0,w0=A0,A0=C0),(w0!=Ne[0]||A0!=Ne[1])&&(Ne=[w0,A0])),se&&(G0=i0[0],Y0=i0[1],K&&(G0=G0[1],Y0=Y0[1]),Si=[G0,Y0],se.invert&&(G0=se(G0),Y0=se(Y0)),Y0<G0&&(C0=G0,G0=Y0,Y0=C0),(G0!=We[0]||Y0!=We[1])&&(We=[G0,Y0])),wp):(K&&(nt?(w0=nt[0],A0=nt[1]):(w0=Ne[0],A0=Ne[1],K.invert&&(w0=K.invert(w0),A0=K.invert(A0)),A0<w0&&(C0=w0,w0=A0,A0=C0))),se&&(Si?(G0=Si[0],Y0=Si[1]):(G0=We[0],Y0=We[1],se.invert&&(G0=se.invert(G0),Y0=se.invert(Y0)),Y0<G0&&(C0=G0,G0=Y0,Y0=C0))),K&&se?[[w0,G0],[A0,Y0]]:K?[w0,A0]:se&&[G0,Y0])},wp.clear=function(){return wp.empty()||(Ne=[0,0],We=[0,0],nt=Si=null),wp},wp.empty=function(){return!!K&&Ne[0]==Ne[1]||!!se&&We[0]==We[1]},M.rebind(wp,_,"on")};var Q3={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},By=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];M.text=j0(function(_){return _.responseText}),M.json=function(_,K){return tm(_,"application/json",H_,K)};function H_(_){return JSON.parse(_.responseText)}M.html=function(_,K){return tm(_,"text/html",j_,K)};function j_(_){var K=E.createRange();return K.selectNode(E.body),K.createContextualFragment(_.responseText)}M.xml=j0(function(_){return _.responseXML}),typeof me=="object"&&me.exports?me.exports=M:this.d3=M}).apply(self)}}),u=a({"node_modules/d3-time/dist/d3-time.js"(pe,me){(function(M,v){typeof pe=="object"&&typeof me<"u"?v(pe):(M=M||self,v(M.d3=M.d3||{}))})(pe,function(M){var v=new Date,g=new Date;function E(dr,Lo,Cp,Hp){function e0(t0){return dr(t0=arguments.length===0?new Date:new Date(+t0)),t0}return e0.floor=function(t0){return dr(t0=new Date(+t0)),t0},e0.ceil=function(t0){return dr(t0=new Date(t0-1)),Lo(t0,1),dr(t0),t0},e0.round=function(t0){var n0=e0(t0),y0=e0.ceil(t0);return t0-n0<y0-t0?n0:y0},e0.offset=function(t0,n0){return Lo(t0=new Date(+t0),n0==null?1:Math.floor(n0)),t0},e0.range=function(t0,n0,y0){var h0=[],I0;if(t0=e0.ceil(t0),y0=y0==null?1:Math.floor(y0),!(t0<n0)||!(y0>0))return h0;do h0.push(I0=new Date(+t0)),Lo(t0,y0),dr(t0);while(I0<t0&&t0<n0);return h0},e0.filter=function(t0){return E(function(n0){if(n0>=n0)for(;dr(n0),!t0(n0);)n0.setTime(n0-1)},function(n0,y0){if(n0>=n0)if(y0<0)for(;++y0<=0;)for(;Lo(n0,-1),!t0(n0););else for(;--y0>=0;)for(;Lo(n0,1),!t0(n0););})},Cp&&(e0.count=function(t0,n0){return v.setTime(+t0),g.setTime(+n0),dr(v),dr(g),Math.floor(Cp(v,g))},e0.every=function(t0){return t0=Math.floor(t0),!isFinite(t0)||!(t0>0)?null:t0>1?e0.filter(Hp?function(n0){return Hp(n0)%t0===0}:function(n0){return e0.count(0,n0)%t0===0}):e0}),e0}var S=E(function(){},function(dr,Lo){dr.setTime(+dr+Lo)},function(dr,Lo){return Lo-dr});S.every=function(dr){return dr=Math.floor(dr),!isFinite(dr)||!(dr>0)?null:dr>1?E(function(Lo){Lo.setTime(Math.floor(Lo/dr)*dr)},function(Lo,Cp){Lo.setTime(+Lo+Cp*dr)},function(Lo,Cp){return(Cp-Lo)/dr}):S};var T=S.range,C=1e3,P=6e4,p=36e5,Y=864e5,N=6048e5,j=E(function(dr){dr.setTime(dr-dr.getMilliseconds())},function(dr,Lo){dr.setTime(+dr+Lo*C)},function(dr,Lo){return(Lo-dr)/C},function(dr){return dr.getUTCSeconds()}),ee=j.range,G=E(function(dr){dr.setTime(dr-dr.getMilliseconds()-dr.getSeconds()*C)},function(dr,Lo){dr.setTime(+dr+Lo*P)},function(dr,Lo){return(Lo-dr)/P},function(dr){return dr.getMinutes()}),V=G.range,W=E(function(dr){dr.setTime(dr-dr.getMilliseconds()-dr.getSeconds()*C-dr.getMinutes()*P)},function(dr,Lo){dr.setTime(+dr+Lo*p)},function(dr,Lo){return(Lo-dr)/p},function(dr){return dr.getHours()}),q=W.range,z=E(function(dr){dr.setHours(0,0,0,0)},function(dr,Lo){dr.setDate(dr.getDate()+Lo)},function(dr,Lo){return(Lo-dr-(Lo.getTimezoneOffset()-dr.getTimezoneOffset())*P)/Y},function(dr){return dr.getDate()-1}),H=z.range;function Z(dr){return E(function(Lo){Lo.setDate(Lo.getDate()-(Lo.getDay()+7-dr)%7),Lo.setHours(0,0,0,0)},function(Lo,Cp){Lo.setDate(Lo.getDate()+Cp*7)},function(Lo,Cp){return(Cp-Lo-(Cp.getTimezoneOffset()-Lo.getTimezoneOffset())*P)/N})}var ne=Z(0),te=Z(1),Se=Z(2),fe=Z(3),ve=Z(4),xe=Z(5),re=Z(6),de=ne.range,be=te.range,Te=Se.range,ye=fe.range,De=ve.range,Ue=xe.range,he=re.range,Be=E(function(dr){dr.setDate(1),dr.setHours(0,0,0,0)},function(dr,Lo){dr.setMonth(dr.getMonth()+Lo)},function(dr,Lo){return Lo.getMonth()-dr.getMonth()+(Lo.getFullYear()-dr.getFullYear())*12},function(dr){return dr.getMonth()}),Ye=Be.range,et=E(function(dr){dr.setMonth(0,1),dr.setHours(0,0,0,0)},function(dr,Lo){dr.setFullYear(dr.getFullYear()+Lo)},function(dr,Lo){return Lo.getFullYear()-dr.getFullYear()},function(dr){return dr.getFullYear()});et.every=function(dr){return!isFinite(dr=Math.floor(dr))||!(dr>0)?null:E(function(Lo){Lo.setFullYear(Math.floor(Lo.getFullYear()/dr)*dr),Lo.setMonth(0,1),Lo.setHours(0,0,0,0)},function(Lo,Cp){Lo.setFullYear(Lo.getFullYear()+Cp*dr)})};var Qe=et.range,ft=E(function(dr){dr.setUTCSeconds(0,0)},function(dr,Lo){dr.setTime(+dr+Lo*P)},function(dr,Lo){return(Lo-dr)/P},function(dr){return dr.getUTCMinutes()}),mn=ft.range,ta=E(function(dr){dr.setUTCMinutes(0,0,0)},function(dr,Lo){dr.setTime(+dr+Lo*p)},function(dr,Lo){return(Lo-dr)/p},function(dr){return dr.getUTCHours()}),Do=ta.range,Ae=E(function(dr){dr.setUTCHours(0,0,0,0)},function(dr,Lo){dr.setUTCDate(dr.getUTCDate()+Lo)},function(dr,Lo){return(Lo-dr)/Y},function(dr){return dr.getUTCDate()-1}),ke=Ae.range;function ge(dr){return E(function(Lo){Lo.setUTCDate(Lo.getUTCDate()-(Lo.getUTCDay()+7-dr)%7),Lo.setUTCHours(0,0,0,0)},function(Lo,Cp){Lo.setUTCDate(Lo.getUTCDate()+Cp*7)},function(Lo,Cp){return(Cp-Lo)/N})}var Ce=ge(0),Je=ge(1),Re=ge(2),Q=ge(3),ce=ge(4),Me=ge(5),Le=ge(6),tt=Ce.range,bt=Je.range,Ct=Re.range,yi=Q.range,Fl=ce.range,Yl=Me.range,qp=Le.range,Fp=E(function(dr){dr.setUTCDate(1),dr.setUTCHours(0,0,0,0)},function(dr,Lo){dr.setUTCMonth(dr.getUTCMonth()+Lo)},function(dr,Lo){return Lo.getUTCMonth()-dr.getUTCMonth()+(Lo.getUTCFullYear()-dr.getUTCFullYear())*12},function(dr){return dr.getUTCMonth()}),Up=Fp.range,_r=E(function(dr){dr.setUTCMonth(0,1),dr.setUTCHours(0,0,0,0)},function(dr,Lo){dr.setUTCFullYear(dr.getUTCFullYear()+Lo)},function(dr,Lo){return Lo.getUTCFullYear()-dr.getUTCFullYear()},function(dr){return dr.getUTCFullYear()});_r.every=function(dr){return!isFinite(dr=Math.floor(dr))||!(dr>0)?null:E(function(Lo){Lo.setUTCFullYear(Math.floor(Lo.getUTCFullYear()/dr)*dr),Lo.setUTCMonth(0,1),Lo.setUTCHours(0,0,0,0)},function(Lo,Cp){Lo.setUTCFullYear(Lo.getUTCFullYear()+Cp*dr)})};var gs=_r.range;M.timeDay=z,M.timeDays=H,M.timeFriday=xe,M.timeFridays=Ue,M.timeHour=W,M.timeHours=q,M.timeInterval=E,M.timeMillisecond=S,M.timeMilliseconds=T,M.timeMinute=G,M.timeMinutes=V,M.timeMonday=te,M.timeMondays=be,M.timeMonth=Be,M.timeMonths=Ye,M.timeSaturday=re,M.timeSaturdays=he,M.timeSecond=j,M.timeSeconds=ee,M.timeSunday=ne,M.timeSundays=de,M.timeThursday=ve,M.timeThursdays=De,M.timeTuesday=Se,M.timeTuesdays=Te,M.timeWednesday=fe,M.timeWednesdays=ye,M.timeWeek=ne,M.timeWeeks=de,M.timeYear=et,M.timeYears=Qe,M.utcDay=Ae,M.utcDays=ke,M.utcFriday=Me,M.utcFridays=Yl,M.utcHour=ta,M.utcHours=Do,M.utcMillisecond=S,M.utcMilliseconds=T,M.utcMinute=ft,M.utcMinutes=mn,M.utcMonday=Je,M.utcMondays=bt,M.utcMonth=Fp,M.utcMonths=Up,M.utcSaturday=Le,M.utcSaturdays=qp,M.utcSecond=j,M.utcSeconds=ee,M.utcSunday=Ce,M.utcSundays=tt,M.utcThursday=ce,M.utcThursdays=Fl,M.utcTuesday=Re,M.utcTuesdays=Ct,M.utcWednesday=Q,M.utcWednesdays=yi,M.utcWeek=Ce,M.utcWeeks=tt,M.utcYear=_r,M.utcYears=gs,Object.defineProperty(M,"__esModule",{value:!0})})}}),h=a({"node_modules/d3-time-format/dist/d3-time-format.js"(pe,me){(function(M,v){typeof pe=="object"&&typeof me<"u"?v(pe,u()):(M=M||self,v(M.d3=M.d3||{},M.d3))})(pe,function(M,v){function g(vs){if(0<=vs.y&&vs.y<100){var jl=new Date(-1,vs.m,vs.d,vs.H,vs.M,vs.S,vs.L);return jl.setFullYear(vs.y),jl}return new Date(vs.y,vs.m,vs.d,vs.H,vs.M,vs.S,vs.L)}function E(vs){if(0<=vs.y&&vs.y<100){var jl=new Date(Date.UTC(-1,vs.m,vs.d,vs.H,vs.M,vs.S,vs.L));return jl.setUTCFullYear(vs.y),jl}return new Date(Date.UTC(vs.y,vs.m,vs.d,vs.H,vs.M,vs.S,vs.L))}function S(vs,jl,zl){return{y:vs,m:jl,d:zl,H:0,M:0,S:0,L:0}}function T(vs){var jl=vs.dateTime,zl=vs.date,Ve=vs.time,pn=vs.periods,ci=vs.days,_n=vs.shortDays,Tp=vs.months,Sp=vs.shortMonths,Ip=ee(pn),Jp=G(pn),m0=ee(ci),Dp=G(ci),c0=ee(_n),b0=G(_n),E0=ee(Tp),gm=G(Tp),Nm=ee(Sp),Bm=G(Sp),xm={a:Km,A:_v,b:Hm,B:uv,c:null,d:Be,e:Be,f:mn,H:Ye,I:et,j:Qe,L:ft,m:ta,M:Do,p:dt,q:Fe,Q:n0,s:y0,S:Ae,u:ke,U:ge,V:Ce,w:Je,W:Re,x:null,X:null,y:Q,Y:ce,Z:Me,"%":t0},Am={a:Gp,A:kp,b:yp,B:bp,c:null,d:Le,e:Le,f:Fl,H:tt,I:bt,j:Ct,L:yi,m:Yl,M:qp,p:Pp,q:s0,Q:n0,s:y0,S:Fp,u:Up,U:_r,V:gs,w:dr,W:Lo,x:null,X:null,y:Cp,Y:Hp,Z:e0,"%":t0},mm={a:Em,A:lm,b:Dm,B:Zm,c:rv,d:ve,e:ve,f:ye,H:re,I:re,j:xe,L:Te,m:fe,M:de,p:Um,q:Se,Q:Ue,s:he,S:be,u:W,U:q,V:z,w:V,W:H,x:zm,X:Ym,y:ne,Y:Z,Z:te,"%":De};xm.x=vm(zl,xm),xm.X=vm(Ve,xm),xm.c=vm(jl,xm),Am.x=vm(zl,Am),Am.X=vm(Ve,Am),Am.c=vm(jl,Am);function vm(Rp,Vp){return function(r0){var $p=[],P0=-1,j0=0,tm=Rp.length,wm,bm,Tm;for(r0 instanceof Date||(r0=new Date(+r0));++P0<tm;)Rp.charCodeAt(P0)===37&&($p.push(Rp.slice(j0,P0)),(bm=C[wm=Rp.charAt(++P0)])!=null?wm=Rp.charAt(++P0):bm=wm==="e"?" ":"0",(Tm=Vp[wm])&&(wm=Tm(r0,bm)),$p.push(wm),j0=P0+1);return $p.push(Rp.slice(j0,P0)),$p.join("")}}function Om(Rp,Vp){return function(r0){var $p=S(1900,void 0,1),P0=Lm($p,Rp,r0+="",0),j0,tm;if(P0!=r0.length)return null;if("Q"in $p)return new Date($p.Q);if("s"in $p)return new Date($p.s*1e3+("L"in $p?$p.L:0));if(Vp&&!("Z"in $p)&&($p.Z=0),"p"in $p&&($p.H=$p.H%12+$p.p*12),$p.m===void 0&&($p.m="q"in $p?$p.q:0),"V"in $p){if($p.V<1||$p.V>53)return null;"w"in $p||($p.w=1),"Z"in $p?(j0=E(S($p.y,0,1)),tm=j0.getUTCDay(),j0=tm>4||tm===0?v.utcMonday.ceil(j0):v.utcMonday(j0),j0=v.utcDay.offset(j0,($p.V-1)*7),$p.y=j0.getUTCFullYear(),$p.m=j0.getUTCMonth(),$p.d=j0.getUTCDate()+($p.w+6)%7):(j0=g(S($p.y,0,1)),tm=j0.getDay(),j0=tm>4||tm===0?v.timeMonday.ceil(j0):v.timeMonday(j0),j0=v.timeDay.offset(j0,($p.V-1)*7),$p.y=j0.getFullYear(),$p.m=j0.getMonth(),$p.d=j0.getDate()+($p.w+6)%7)}else("W"in $p||"U"in $p)&&("w"in $p||($p.w="u"in $p?$p.u%7:"W"in $p?1:0),tm="Z"in $p?E(S($p.y,0,1)).getUTCDay():g(S($p.y,0,1)).getDay(),$p.m=0,$p.d="W"in $p?($p.w+6)%7+$p.W*7-(tm+5)%7:$p.w+$p.U*7-(tm+6)%7);return"Z"in $p?($p.H+=$p.Z/100|0,$p.M+=$p.Z%100,E($p)):g($p)}}function Lm(Rp,Vp,r0,$p){for(var P0=0,j0=Vp.length,tm=r0.length,wm,bm;P0<j0;){if($p>=tm)return-1;if(wm=Vp.charCodeAt(P0++),wm===37){if(wm=Vp.charAt(P0++),bm=mm[wm in C?Vp.charAt(P0++):wm],!bm||($p=bm(Rp,r0,$p))<0)return-1}else if(wm!=r0.charCodeAt($p++))return-1}return $p}function Um(Rp,Vp,r0){var $p=Ip.exec(Vp.slice(r0));return $p?(Rp.p=Jp[$p[0].toLowerCase()],r0+$p[0].length):-1}function Em(Rp,Vp,r0){var $p=c0.exec(Vp.slice(r0));return $p?(Rp.w=b0[$p[0].toLowerCase()],r0+$p[0].length):-1}function lm(Rp,Vp,r0){var $p=m0.exec(Vp.slice(r0));return $p?(Rp.w=Dp[$p[0].toLowerCase()],r0+$p[0].length):-1}function Dm(Rp,Vp,r0){var $p=Nm.exec(Vp.slice(r0));return $p?(Rp.m=Bm[$p[0].toLowerCase()],r0+$p[0].length):-1}function Zm(Rp,Vp,r0){var $p=E0.exec(Vp.slice(r0));return $p?(Rp.m=gm[$p[0].toLowerCase()],r0+$p[0].length):-1}function rv(Rp,Vp,r0){return Lm(Rp,jl,Vp,r0)}function zm(Rp,Vp,r0){return Lm(Rp,zl,Vp,r0)}function Ym(Rp,Vp,r0){return Lm(Rp,Ve,Vp,r0)}function Km(Rp){return _n[Rp.getDay()]}function _v(Rp){return ci[Rp.getDay()]}function Hm(Rp){return Sp[Rp.getMonth()]}function uv(Rp){return Tp[Rp.getMonth()]}function dt(Rp){return pn[+(Rp.getHours()>=12)]}function Fe(Rp){return 1+~~(Rp.getMonth()/3)}function Gp(Rp){return _n[Rp.getUTCDay()]}function kp(Rp){return ci[Rp.getUTCDay()]}function yp(Rp){return Sp[Rp.getUTCMonth()]}function bp(Rp){return Tp[Rp.getUTCMonth()]}function Pp(Rp){return pn[+(Rp.getUTCHours()>=12)]}function s0(Rp){return 1+~~(Rp.getUTCMonth()/3)}return{format:function(Rp){var Vp=vm(Rp+="",xm);return Vp.toString=function(){return Rp},Vp},parse:function(Rp){var Vp=Om(Rp+="",!1);return Vp.toString=function(){return Rp},Vp},utcFormat:function(Rp){var Vp=vm(Rp+="",Am);return Vp.toString=function(){return Rp},Vp},utcParse:function(Rp){var Vp=Om(Rp+="",!0);return Vp.toString=function(){return Rp},Vp}}}var C={"-":"",_:" ",0:"0"},P=/^\s*\d+/,p=/^%/,Y=/[\\^$*+?|[\]().{}]/g;function N(vs,jl,zl){var Ve=vs<0?"-":"",pn=(Ve?-vs:vs)+"",ci=pn.length;return Ve+(ci<zl?new Array(zl-ci+1).join(jl)+pn:pn)}function j(vs){return vs.replace(Y,"\\$&")}function ee(vs){return new RegExp("^(?:"+vs.map(j).join("|")+")","i")}function G(vs){for(var jl={},zl=-1,Ve=vs.length;++zl<Ve;)jl[vs[zl].toLowerCase()]=zl;return jl}function V(vs,jl,zl){var Ve=P.exec(jl.slice(zl,zl+1));return Ve?(vs.w=+Ve[0],zl+Ve[0].length):-1}function W(vs,jl,zl){var Ve=P.exec(jl.slice(zl,zl+1));return Ve?(vs.u=+Ve[0],zl+Ve[0].length):-1}function q(vs,jl,zl){var Ve=P.exec(jl.slice(zl,zl+2));return Ve?(vs.U=+Ve[0],zl+Ve[0].length):-1}function z(vs,jl,zl){var Ve=P.exec(jl.slice(zl,zl+2));return Ve?(vs.V=+Ve[0],zl+Ve[0].length):-1}function H(vs,jl,zl){var Ve=P.exec(jl.slice(zl,zl+2));return Ve?(vs.W=+Ve[0],zl+Ve[0].length):-1}function Z(vs,jl,zl){var Ve=P.exec(jl.slice(zl,zl+4));return Ve?(vs.y=+Ve[0],zl+Ve[0].length):-1}function ne(vs,jl,zl){var Ve=P.exec(jl.slice(zl,zl+2));return Ve?(vs.y=+Ve[0]+(+Ve[0]>68?1900:2e3),zl+Ve[0].length):-1}function te(vs,jl,zl){var Ve=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(jl.slice(zl,zl+6));return Ve?(vs.Z=Ve[1]?0:-(Ve[2]+(Ve[3]||"00")),zl+Ve[0].length):-1}function Se(vs,jl,zl){var Ve=P.exec(jl.slice(zl,zl+1));return Ve?(vs.q=Ve[0]*3-3,zl+Ve[0].length):-1}function fe(vs,jl,zl){var Ve=P.exec(jl.slice(zl,zl+2));return Ve?(vs.m=Ve[0]-1,zl+Ve[0].length):-1}function ve(vs,jl,zl){var Ve=P.exec(jl.slice(zl,zl+2));return Ve?(vs.d=+Ve[0],zl+Ve[0].length):-1}function xe(vs,jl,zl){var Ve=P.exec(jl.slice(zl,zl+3));return Ve?(vs.m=0,vs.d=+Ve[0],zl+Ve[0].length):-1}function re(vs,jl,zl){var Ve=P.exec(jl.slice(zl,zl+2));return Ve?(vs.H=+Ve[0],zl+Ve[0].length):-1}function de(vs,jl,zl){var Ve=P.exec(jl.slice(zl,zl+2));return Ve?(vs.M=+Ve[0],zl+Ve[0].length):-1}function be(vs,jl,zl){var Ve=P.exec(jl.slice(zl,zl+2));return Ve?(vs.S=+Ve[0],zl+Ve[0].length):-1}function Te(vs,jl,zl){var Ve=P.exec(jl.slice(zl,zl+3));return Ve?(vs.L=+Ve[0],zl+Ve[0].length):-1}function ye(vs,jl,zl){var Ve=P.exec(jl.slice(zl,zl+6));return Ve?(vs.L=Math.floor(Ve[0]/1e3),zl+Ve[0].length):-1}function De(vs,jl,zl){var Ve=p.exec(jl.slice(zl,zl+1));return Ve?zl+Ve[0].length:-1}function Ue(vs,jl,zl){var Ve=P.exec(jl.slice(zl));return Ve?(vs.Q=+Ve[0],zl+Ve[0].length):-1}function he(vs,jl,zl){var Ve=P.exec(jl.slice(zl));return Ve?(vs.s=+Ve[0],zl+Ve[0].length):-1}function Be(vs,jl){return N(vs.getDate(),jl,2)}function Ye(vs,jl){return N(vs.getHours(),jl,2)}function et(vs,jl){return N(vs.getHours()%12||12,jl,2)}function Qe(vs,jl){return N(1+v.timeDay.count(v.timeYear(vs),vs),jl,3)}function ft(vs,jl){return N(vs.getMilliseconds(),jl,3)}function mn(vs,jl){return ft(vs,jl)+"000"}function ta(vs,jl){return N(vs.getMonth()+1,jl,2)}function Do(vs,jl){return N(vs.getMinutes(),jl,2)}function Ae(vs,jl){return N(vs.getSeconds(),jl,2)}function ke(vs){var jl=vs.getDay();return jl===0?7:jl}function ge(vs,jl){return N(v.timeSunday.count(v.timeYear(vs)-1,vs),jl,2)}function Ce(vs,jl){var zl=vs.getDay();return vs=zl>=4||zl===0?v.timeThursday(vs):v.timeThursday.ceil(vs),N(v.timeThursday.count(v.timeYear(vs),vs)+(v.timeYear(vs).getDay()===4),jl,2)}function Je(vs){return vs.getDay()}function Re(vs,jl){return N(v.timeMonday.count(v.timeYear(vs)-1,vs),jl,2)}function Q(vs,jl){return N(vs.getFullYear()%100,jl,2)}function ce(vs,jl){return N(vs.getFullYear()%1e4,jl,4)}function Me(vs){var jl=vs.getTimezoneOffset();return(jl>0?"-":(jl*=-1,"+"))+N(jl/60|0,"0",2)+N(jl%60,"0",2)}function Le(vs,jl){return N(vs.getUTCDate(),jl,2)}function tt(vs,jl){return N(vs.getUTCHours(),jl,2)}function bt(vs,jl){return N(vs.getUTCHours()%12||12,jl,2)}function Ct(vs,jl){return N(1+v.utcDay.count(v.utcYear(vs),vs),jl,3)}function yi(vs,jl){return N(vs.getUTCMilliseconds(),jl,3)}function Fl(vs,jl){return yi(vs,jl)+"000"}function Yl(vs,jl){return N(vs.getUTCMonth()+1,jl,2)}function qp(vs,jl){return N(vs.getUTCMinutes(),jl,2)}function Fp(vs,jl){return N(vs.getUTCSeconds(),jl,2)}function Up(vs){var jl=vs.getUTCDay();return jl===0?7:jl}function _r(vs,jl){return N(v.utcSunday.count(v.utcYear(vs)-1,vs),jl,2)}function gs(vs,jl){var zl=vs.getUTCDay();return vs=zl>=4||zl===0?v.utcThursday(vs):v.utcThursday.ceil(vs),N(v.utcThursday.count(v.utcYear(vs),vs)+(v.utcYear(vs).getUTCDay()===4),jl,2)}function dr(vs){return vs.getUTCDay()}function Lo(vs,jl){return N(v.utcMonday.count(v.utcYear(vs)-1,vs),jl,2)}function Cp(vs,jl){return N(vs.getUTCFullYear()%100,jl,2)}function Hp(vs,jl){return N(vs.getUTCFullYear()%1e4,jl,4)}function e0(){return"+0000"}function t0(){return"%"}function n0(vs){return+vs}function y0(vs){return Math.floor(+vs/1e3)}var h0;I0({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function I0(vs){return h0=T(vs),M.timeFormat=h0.format,M.timeParse=h0.parse,M.utcFormat=h0.utcFormat,M.utcParse=h0.utcParse,h0}var Kp="%Y-%m-%dT%H:%M:%S.%LZ";function B0(vs){return vs.toISOString()}var em=Date.prototype.toISOString?B0:M.utcFormat(Kp);function k0(vs){var jl=new Date(vs);return isNaN(jl)?null:jl}var J0=+new Date("2000-01-01T00:00:00.000Z")?k0:M.utcParse(Kp);M.isoFormat=em,M.isoParse=J0,M.timeFormatDefaultLocale=I0,M.timeFormatLocale=T,Object.defineProperty(M,"__esModule",{value:!0})})}}),x=a({"node_modules/d3-format/dist/d3-format.js"(pe,me){(function(M,v){typeof pe=="object"&&typeof me<"u"?v(pe):(M=typeof globalThis<"u"?globalThis:M||self,v(M.d3=M.d3||{}))})(pe,function(M){function v(fe){return Math.abs(fe=Math.round(fe))>=1e21?fe.toLocaleString("en").replace(/,/g,""):fe.toString(10)}function g(fe,ve){if((xe=(fe=ve?fe.toExponential(ve-1):fe.toExponential()).indexOf("e"))<0)return null;var xe,re=fe.slice(0,xe);return[re.length>1?re[0]+re.slice(2):re,+fe.slice(xe+1)]}function E(fe){return fe=g(Math.abs(fe)),fe?fe[1]:NaN}function S(fe,ve){return function(xe,re){for(var de=xe.length,be=[],Te=0,ye=fe[0],De=0;de>0&&ye>0&&(De+ye+1>re&&(ye=Math.max(1,re-De)),be.push(xe.substring(de-=ye,de+ye)),!((De+=ye+1)>re));)ye=fe[Te=(Te+1)%fe.length];return be.reverse().join(ve)}}function T(fe){return function(ve){return ve.replace(/[0-9]/g,function(xe){return fe[+xe]})}}var C=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function P(fe){if(!(ve=C.exec(fe)))throw new Error("invalid format: "+fe);var ve;return new p({fill:ve[1],align:ve[2],sign:ve[3],symbol:ve[4],zero:ve[5],width:ve[6],comma:ve[7],precision:ve[8]&&ve[8].slice(1),trim:ve[9],type:ve[10]})}P.prototype=p.prototype;function p(fe){this.fill=fe.fill===void 0?" ":fe.fill+"",this.align=fe.align===void 0?">":fe.align+"",this.sign=fe.sign===void 0?"-":fe.sign+"",this.symbol=fe.symbol===void 0?"":fe.symbol+"",this.zero=!!fe.zero,this.width=fe.width===void 0?void 0:+fe.width,this.comma=!!fe.comma,this.precision=fe.precision===void 0?void 0:+fe.precision,this.trim=!!fe.trim,this.type=fe.type===void 0?"":fe.type+""}p.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Y(fe){e:for(var ve=fe.length,xe=1,re=-1,de;xe<ve;++xe)switch(fe[xe]){case".":re=de=xe;break;case"0":re===0&&(re=xe),de=xe;break;default:if(!+fe[xe])break e;re>0&&(re=0);break}return re>0?fe.slice(0,re)+fe.slice(de+1):fe}var N;function j(fe,ve){var xe=g(fe,ve);if(!xe)return fe+"";var re=xe[0],de=xe[1],be=de-(N=Math.max(-8,Math.min(8,Math.floor(de/3)))*3)+1,Te=re.length;return be===Te?re:be>Te?re+new Array(be-Te+1).join("0"):be>0?re.slice(0,be)+"."+re.slice(be):"0."+new Array(1-be).join("0")+g(fe,Math.max(0,ve+be-1))[0]}function ee(fe,ve){var xe=g(fe,ve);if(!xe)return fe+"";var re=xe[0],de=xe[1];return de<0?"0."+new Array(-de).join("0")+re:re.length>de+1?re.slice(0,de+1)+"."+re.slice(de+1):re+new Array(de-re.length+2).join("0")}var G={"%":function(fe,ve){return(fe*100).toFixed(ve)},b:function(fe){return Math.round(fe).toString(2)},c:function(fe){return fe+""},d:v,e:function(fe,ve){return fe.toExponential(ve)},f:function(fe,ve){return fe.toFixed(ve)},g:function(fe,ve){return fe.toPrecision(ve)},o:function(fe){return Math.round(fe).toString(8)},p:function(fe,ve){return ee(fe*100,ve)},r:ee,s:j,X:function(fe){return Math.round(fe).toString(16).toUpperCase()},x:function(fe){return Math.round(fe).toString(16)}};function V(fe){return fe}var W=Array.prototype.map,q=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function z(fe){var ve=fe.grouping===void 0||fe.thousands===void 0?V:S(W.call(fe.grouping,Number),fe.thousands+""),xe=fe.currency===void 0?"":fe.currency[0]+"",re=fe.currency===void 0?"":fe.currency[1]+"",de=fe.decimal===void 0?".":fe.decimal+"",be=fe.numerals===void 0?V:T(W.call(fe.numerals,String)),Te=fe.percent===void 0?"%":fe.percent+"",ye=fe.minus===void 0?"-":fe.minus+"",De=fe.nan===void 0?"NaN":fe.nan+"";function Ue(Be){Be=P(Be);var Ye=Be.fill,et=Be.align,Qe=Be.sign,ft=Be.symbol,mn=Be.zero,ta=Be.width,Do=Be.comma,Ae=Be.precision,ke=Be.trim,ge=Be.type;ge==="n"?(Do=!0,ge="g"):G[ge]||(Ae===void 0&&(Ae=12),ke=!0,ge="g"),(mn||Ye==="0"&&et==="=")&&(mn=!0,Ye="0",et="=");var Ce=ft==="$"?xe:ft==="#"&&/[boxX]/.test(ge)?"0"+ge.toLowerCase():"",Je=ft==="$"?re:/[%p]/.test(ge)?Te:"",Re=G[ge],Q=/[defgprs%]/.test(ge);Ae=Ae===void 0?6:/[gprs]/.test(ge)?Math.max(1,Math.min(21,Ae)):Math.max(0,Math.min(20,Ae));function ce(Me){var Le=Ce,tt=Je,bt,Ct,yi;if(ge==="c")tt=Re(Me)+tt,Me="";else{Me=+Me;var Fl=Me<0||1/Me<0;if(Me=isNaN(Me)?De:Re(Math.abs(Me),Ae),ke&&(Me=Y(Me)),Fl&&+Me==0&&Qe!=="+"&&(Fl=!1),Le=(Fl?Qe==="("?Qe:ye:Qe==="-"||Qe==="("?"":Qe)+Le,tt=(ge==="s"?q[8+N/3]:"")+tt+(Fl&&Qe==="("?")":""),Q){for(bt=-1,Ct=Me.length;++bt<Ct;)if(yi=Me.charCodeAt(bt),48>yi||yi>57){tt=(yi===46?de+Me.slice(bt+1):Me.slice(bt))+tt,Me=Me.slice(0,bt);break}}}Do&&!mn&&(Me=ve(Me,1/0));var Yl=Le.length+Me.length+tt.length,qp=Yl<ta?new Array(ta-Yl+1).join(Ye):"";switch(Do&&mn&&(Me=ve(qp+Me,qp.length?ta-tt.length:1/0),qp=""),et){case"<":Me=Le+Me+tt+qp;break;case"=":Me=Le+qp+Me+tt;break;case"^":Me=qp.slice(0,Yl=qp.length>>1)+Le+Me+tt+qp.slice(Yl);break;default:Me=qp+Le+Me+tt;break}return be(Me)}return ce.toString=function(){return Be+""},ce}function he(Be,Ye){var et=Ue((Be=P(Be),Be.type="f",Be)),Qe=Math.max(-8,Math.min(8,Math.floor(E(Ye)/3)))*3,ft=Math.pow(10,-Qe),mn=q[8+Qe/3];return function(ta){return et(ft*ta)+mn}}return{format:Ue,formatPrefix:he}}var H;Z({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function Z(fe){return H=z(fe),M.format=H.format,M.formatPrefix=H.formatPrefix,H}function ne(fe){return Math.max(0,-E(Math.abs(fe)))}function te(fe,ve){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(E(ve)/3)))*3-E(Math.abs(fe)))}function Se(fe,ve){return fe=Math.abs(fe),ve=Math.abs(ve)-fe,Math.max(0,E(ve)-E(fe))+1}M.FormatSpecifier=p,M.formatDefaultLocale=Z,M.formatLocale=z,M.formatSpecifier=P,M.precisionFixed=ne,M.precisionPrefix=te,M.precisionRound=Se,Object.defineProperty(M,"__esModule",{value:!0})})}}),m=a({"node_modules/is-string-blank/index.js"(pe,me){me.exports=function(M){for(var v=M.length,g,E=0;E<v;E++)if(g=M.charCodeAt(E),(g<9||g>13)&&g!==32&&g!==133&&g!==160&&g!==5760&&g!==6158&&(g<8192||g>8205)&&g!==8232&&g!==8233&&g!==8239&&g!==8287&&g!==8288&&g!==12288&&g!==65279)return!1;return!0}}}),w=a({"node_modules/fast-isnumeric/index.js"(pe,me){var M=m();me.exports=function(v){var g=typeof v;if(g==="string"){var E=v;if(v=+v,v===0&&M(E))return!1}else if(g!=="number")return!1;return v-v<1}}}),A=a({"src/constants/numerical.js"(pe,me){me.exports={BADNUM:void 0,FP_SAFE:Number.MAX_VALUE*1e-4,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,ONEMILLI:1,ONEMICROSEC:.001,EPOCHJD:24405875e-1,ALMOST_EQUAL:1-1e-6,LOG_CLIP:10,MINUS_SIGN:"−"}}}),D=a({"node_modules/base64-arraybuffer/dist/base64-arraybuffer.umd.js"(pe,me){(function(M,v){typeof pe=="object"&&typeof me<"u"?v(pe):(M=typeof globalThis<"u"?globalThis:M||self,v(M["base64-arraybuffer"]={}))})(pe,function(M){for(var v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",g=typeof Uint8Array>"u"?[]:new Uint8Array(256),E=0;E<v.length;E++)g[v.charCodeAt(E)]=E;var S=function(C){var P=new Uint8Array(C),p,Y=P.length,N="";for(p=0;p<Y;p+=3)N+=v[P[p]>>2],N+=v[(P[p]&3)<<4|P[p+1]>>4],N+=v[(P[p+1]&15)<<2|P[p+2]>>6],N+=v[P[p+2]&63];return Y%3===2?N=N.substring(0,N.length-1)+"=":Y%3===1&&(N=N.substring(0,N.length-2)+"=="),N},T=function(C){var P=C.length*.75,p=C.length,Y,N=0,j,ee,G,V;C[C.length-1]==="="&&(P--,C[C.length-2]==="="&&P--);var W=new ArrayBuffer(P),q=new Uint8Array(W);for(Y=0;Y<p;Y+=4)j=g[C.charCodeAt(Y)],ee=g[C.charCodeAt(Y+1)],G=g[C.charCodeAt(Y+2)],V=g[C.charCodeAt(Y+3)],q[N++]=j<<2|ee>>4,q[N++]=(ee&15)<<4|G>>2,q[N++]=(G&3)<<6|V&63;return W};M.decode=T,M.encode=S,Object.defineProperty(M,"__esModule",{value:!0})})}}),I=a({"src/lib/is_plain_object.js"(pe,me){me.exports=function(v){return window&&window.process&&window.process.versions?Object.prototype.toString.call(v)==="[object Object]":Object.prototype.toString.call(v)==="[object Object]"&&Object.getPrototypeOf(v).hasOwnProperty("hasOwnProperty")}}}),y=a({"src/lib/array.js"(pe){var me=D().decode,M=I(),v=Array.isArray,g=ArrayBuffer,E=DataView;function S(j){return g.isView(j)&&!(j instanceof E)}pe.isTypedArray=S;function T(j){return v(j)||S(j)}pe.isArrayOrTypedArray=T;function C(j){return!T(j[0])}pe.isArray1D=C,pe.ensureArray=function(j,ee){return v(j)||(j=[]),j.length=ee,j};var P={u1c:typeof Uint8ClampedArray>"u"?void 0:Uint8ClampedArray,i1:typeof Int8Array>"u"?void 0:Int8Array,u1:typeof Uint8Array>"u"?void 0:Uint8Array,i2:typeof Int16Array>"u"?void 0:Int16Array,u2:typeof Uint16Array>"u"?void 0:Uint16Array,i4:typeof Int32Array>"u"?void 0:Int32Array,u4:typeof Uint32Array>"u"?void 0:Uint32Array,f4:typeof Float32Array>"u"?void 0:Float32Array,f8:typeof Float64Array>"u"?void 0:Float64Array};P.uint8c=P.u1c,P.uint8=P.u1,P.int8=P.i1,P.uint16=P.u2,P.int16=P.i2,P.uint32=P.u4,P.int32=P.i4,P.float32=P.f4,P.float64=P.f8;function p(j){return j.constructor===ArrayBuffer}pe.isArrayBuffer=p,pe.decodeTypedArraySpec=function(j){var ee=[],G=Y(j),V=G.dtype,W=P[V];if(!W)throw new Error('Error in dtype: "'+V+'"');var q=W.BYTES_PER_ELEMENT,z=G.bdata;p(z)||(z=me(z));var H=G.shape===void 0?[z.byteLength/q]:(""+G.shape).split(",");H.reverse();var Z=H.length,ne,te,Se=+H[0],fe=q*Se,ve=0;if(Z===1)ee=new W(z);else if(Z===2)for(ne=+H[1],te=0;te<ne;te++)ee[te]=new W(z,ve,Se),ve+=fe;else if(Z===3){ne=+H[1];for(var xe=+H[2],re=0;re<xe;re++)for(ee[re]=[],te=0;te<ne;te++)ee[re][te]=new W(z,ve,Se),ve+=fe}else throw new Error("ndim: "+Z+'is not supported with the shape:"'+G.shape+'"');return ee.bdata=G.bdata,ee.dtype=G.dtype,ee.shape=H.reverse().join(","),j._inputArray=ee,ee},pe.isTypedArraySpec=function(j){return M(j)&&j.hasOwnProperty("dtype")&&typeof j.dtype=="string"&&j.hasOwnProperty("bdata")&&(typeof j.bdata=="string"||p(j.bdata))&&(j.shape===void 0||j.hasOwnProperty("shape")&&(typeof j.shape=="string"||typeof j.shape=="number"))};function Y(j){return{bdata:j.bdata,dtype:j.dtype,shape:j.shape}}pe.concat=function(){var j=[],ee=!0,G=0,V,W,q,z,H,Z,ne,te;for(q=0;q<arguments.length;q++)z=arguments[q],Z=z.length,Z&&(W?j.push(z):(W=z,H=Z),v(z)?V=!1:(ee=!1,G?V!==z.constructor&&(V=!1):V=z.constructor),G+=Z);if(!G)return[];if(!j.length)return W;if(ee)return W.concat.apply(W,j);if(V){for(ne=new V(G),ne.set(W),q=0;q<j.length;q++)z=j[q],ne.set(z,H),H+=z.length;return ne}for(ne=new Array(G),te=0;te<W.length;te++)ne[te]=W[te];for(q=0;q<j.length;q++){for(z=j[q],te=0;te<z.length;te++)ne[H+te]=z[te];H+=te}return ne},pe.maxRowLength=function(j){return N(j,Math.max,0)},pe.minRowLength=function(j){return N(j,Math.min,1/0)};function N(j,ee,G){if(T(j))if(T(j[0])){for(var V=G,W=0;W<j.length;W++)V=ee(V,j[W].length);return V}else return j.length;return 0}}}),l=a({"src/lib/nested_property.js"(pe,me){var M=w(),v=y().isArrayOrTypedArray;me.exports=function(j,ee){if(M(ee))ee=String(ee);else if(typeof ee!="string"||ee.substr(ee.length-4)==="[-1]")throw"bad property string";var G=ee.split("."),V,W,q,z;for(z=0;z<G.length;z++)if(String(G[z]).slice(0,2)==="__")throw"bad property string";for(z=0;z<G.length;){if(V=String(G[z]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/),V){if(V[1])G[z]=V[1];else if(z===0)G.splice(0,1);else throw"bad property string";for(W=V[2].substr(1,V[2].length-2).split("]["),q=0;q<W.length;q++)z++,G.splice(z,0,Number(W[q]))}z++}return typeof j!="object"?Y(j,ee,G):{set:T(j,G,ee),get:g(j,G),astr:ee,parts:G,obj:j}};function g(N,j){return function(ee){var G=N,V,W,q,z,H;for(z=0;z<j.length-1;z++){if(V=j[z],V===-1){for(W=!0,q=[],H=0;H<G.length;H++)q[H]=g(G[H],j.slice(z+1))(ee),q[H]!==q[0]&&(W=!1);return W?q[0]:q}if(typeof V=="number"&&!v(G)||(G=G[V],typeof G!="object"||G===null))return}if(!(typeof G!="object"||G===null)&&(q=G[j[z]],!(!ee&&q===null)))return q}}var E=/(^|\.)args\[/;function S(N,j){return N===void 0||N===null&&!j.match(E)}function T(N,j,ee){return function(G){var V=N,W="",q=S(G,ee),z,H;for(H=0;H<j.length-1;H++){if(z=j[H],typeof z=="number"&&!v(V))throw"array index but container is not an array";if(z===-1){if(q=!P(V,j.slice(H+1),G,ee),q)break;return}if(!p(V,z,j[H+1],q))break;if(V=V[z],typeof V!="object"||V===null)throw"container is not an object";W=C(W,z)}if(q){if(H===j.length-1&&(delete V[j[H]],Array.isArray(V)&&+j[H]===V.length-1))for(;V.length&&V[V.length-1]===void 0;)V.pop()}else V[j[H]]=G}}function C(N,j){var ee=j;return M(j)?ee="["+j+"]":N&&(ee="."+j),N+ee}function P(N,j,ee,G){var V=v(ee),W=!0,q=ee,z=G.replace("-1",0),H=V?!1:S(ee,z),Z=j[0],ne;for(ne=0;ne<N.length;ne++)z=G.replace("-1",ne),V&&(q=ee[ne%ee.length],H=S(q,z)),H&&(W=!1),p(N,ne,Z,H)&&T(N[ne],j,G.replace("-1",ne))(q);return W}function p(N,j,ee,G){if(N[j]===void 0){if(G)return!1;typeof ee=="number"?N[j]=[]:N[j]={}}return!0}function Y(N,j,ee){return{set:function(){throw"bad container"},get:function(){},astr:j,parts:ee,obj:N}}}}),c=a({"src/lib/keyed_container.js"(pe,me){var M=l(),v=/^\w*$/,g=0,E=1,S=2,T=3,C=4;me.exports=function(p,Y,N,j){N=N||"name",j=j||"value";var ee,G,V,W={};Y&&Y.length?(V=M(p,Y),G=V.get()):G=p,Y=Y||"";var q={};if(G)for(ee=0;ee<G.length;ee++)q[G[ee][N]]=ee;var z=v.test(j),H={set:function(Z,ne){var te=ne===null?C:g;if(!G){if(!V||te===C)return;G=[],V.set(G)}var Se=q[Z];if(Se===void 0){if(te===C)return;te=te|T,Se=G.length,q[Z]=Se}else ne!==(z?G[Se][j]:M(G[Se],j).get())&&(te=te|S);var fe=G[Se]=G[Se]||{};return fe[N]=Z,z?fe[j]=ne:M(fe,j).set(ne),ne!==null&&(te=te&~C),W[Se]=W[Se]|te,H},get:function(Z){if(G){var ne=q[Z];if(ne!==void 0)return z?G[ne][j]:M(G[ne],j).get()}},rename:function(Z,ne){var te=q[Z];return te===void 0||(W[te]=W[te]|E,q[ne]=te,delete q[Z],G[te][N]=ne),H},remove:function(Z){var ne=q[Z];if(ne===void 0)return H;var te=G[ne];if(Object.keys(te).length>2)return W[ne]=W[ne]|S,H.set(Z,null);if(z){for(ee=ne;ee<G.length;ee++)W[ee]=W[ee]|T;for(ee=ne;ee<G.length;ee++)q[G[ee][N]]--;G.splice(ne,1),delete q[Z]}else M(te,j).set(null),W[ne]=W[ne]|S|C;return H},constructUpdate:function(){for(var Z,ne,te={},Se=Object.keys(W),fe=0;fe<Se.length;fe++)ne=Se[fe],Z=Y+"["+ne+"]",G[ne]?(W[ne]&E&&(te[Z+"."+N]=G[ne][N]),W[ne]&S&&(z?te[Z+"."+j]=W[ne]&C?null:G[ne][j]:te[Z+"."+j]=W[ne]&C?null:M(G[ne],j).get())):te[Z]=null;return te}};return H}}}),L=a({"src/lib/relative_attr.js"(pe,me){var M=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,v=/^[^\.\[\]]+$/;me.exports=function(g,E){for(;E;){var S=g.match(M);if(S)g=S[1];else if(g.match(v))g="";else throw new Error("bad relativeAttr call:"+[g,E]);if(E.charAt(0)==="^")E=E.slice(1);else break}return g&&E.charAt(0)!=="["?g+"."+E:g+E}}}),R=a({"src/lib/to_log_range.js"(pe,me){var M=w();me.exports=function(g,E){if(g>0)return Math.log(g)/Math.LN10;var S=Math.log(Math.min(E[0],E[1]))/Math.LN10;return M(S)||(S=Math.log(Math.max(E[0],E[1]))/Math.LN10-6),S}}}),F=a({"src/lib/relink_private.js"(pe,me){var M=y().isArrayOrTypedArray,v=I();me.exports=function g(E,S){for(var T in S){var C=S[T],P=E[T];if(P!==C)if(T.charAt(0)==="_"||typeof C=="function"){if(T in E)continue;E[T]=C}else if(M(C)&&M(P)&&v(C[0])){if(T==="customdata"||T==="ids")continue;for(var p=Math.min(C.length,P.length),Y=0;Y<p;Y++)P[Y]!==C[Y]&&v(C[Y])&&v(P[Y])&&g(P[Y],C[Y])}else v(C)&&v(P)&&(g(P,C),Object.keys(P).length||delete E[T])}}}}),$=a({"src/lib/mod.js"(pe,me){function M(g,E){var S=g%E;return S<0?S+E:S}function v(g,E){return Math.abs(g)>E/2?g-Math.round(g/E)*E:g}me.exports={mod:M,modHalf:v}}}),b=a({"node_modules/tinycolor2/tinycolor.js"(pe,me){(function(M){var v=/^\s+/,g=/\s+$/,E=0,S=M.round,T=M.min,C=M.max,P=M.random;function p(Q,ce){if(Q=Q||"",ce=ce||{},Q instanceof p)return Q;if(!(this instanceof p))return new p(Q,ce);var Me=Y(Q);this._originalInput=Q,this._r=Me.r,this._g=Me.g,this._b=Me.b,this._a=Me.a,this._roundA=S(100*this._a)/100,this._format=ce.format||Me.format,this._gradientType=ce.gradientType,this._r<1&&(this._r=S(this._r)),this._g<1&&(this._g=S(this._g)),this._b<1&&(this._b=S(this._b)),this._ok=Me.ok,this._tc_id=E++}p.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var Q=this.toRgb();return(Q.r*299+Q.g*587+Q.b*114)/1e3},getLuminance:function(){var Q=this.toRgb(),ce,Me,Le,tt,bt,Ct;return ce=Q.r/255,Me=Q.g/255,Le=Q.b/255,ce<=.03928?tt=ce/12.92:tt=M.pow((ce+.055)/1.055,2.4),Me<=.03928?bt=Me/12.92:bt=M.pow((Me+.055)/1.055,2.4),Le<=.03928?Ct=Le/12.92:Ct=M.pow((Le+.055)/1.055,2.4),.2126*tt+.7152*bt+.0722*Ct},setAlpha:function(Q){return this._a=Be(Q),this._roundA=S(100*this._a)/100,this},toHsv:function(){var Q=G(this._r,this._g,this._b);return{h:Q.h*360,s:Q.s,v:Q.v,a:this._a}},toHsvString:function(){var Q=G(this._r,this._g,this._b),ce=S(Q.h*360),Me=S(Q.s*100),Le=S(Q.v*100);return this._a==1?"hsv("+ce+", "+Me+"%, "+Le+"%)":"hsva("+ce+", "+Me+"%, "+Le+"%, "+this._roundA+")"},toHsl:function(){var Q=j(this._r,this._g,this._b);return{h:Q.h*360,s:Q.s,l:Q.l,a:this._a}},toHslString:function(){var Q=j(this._r,this._g,this._b),ce=S(Q.h*360),Me=S(Q.s*100),Le=S(Q.l*100);return this._a==1?"hsl("+ce+", "+Me+"%, "+Le+"%)":"hsla("+ce+", "+Me+"%, "+Le+"%, "+this._roundA+")"},toHex:function(Q){return W(this._r,this._g,this._b,Q)},toHexString:function(Q){return"#"+this.toHex(Q)},toHex8:function(Q){return q(this._r,this._g,this._b,this._a,Q)},toHex8String:function(Q){return"#"+this.toHex8(Q)},toRgb:function(){return{r:S(this._r),g:S(this._g),b:S(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+S(this._r)+", "+S(this._g)+", "+S(this._b)+")":"rgba("+S(this._r)+", "+S(this._g)+", "+S(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:S(Ye(this._r,255)*100)+"%",g:S(Ye(this._g,255)*100)+"%",b:S(Ye(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+S(Ye(this._r,255)*100)+"%, "+S(Ye(this._g,255)*100)+"%, "+S(Ye(this._b,255)*100)+"%)":"rgba("+S(Ye(this._r,255)*100)+"%, "+S(Ye(this._g,255)*100)+"%, "+S(Ye(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:Ue[W(this._r,this._g,this._b,!0)]||!1},toFilter:function(Q){var ce="#"+z(this._r,this._g,this._b,this._a),Me=ce,Le=this._gradientType?"GradientType = 1, ":"";if(Q){var tt=p(Q);Me="#"+z(tt._r,tt._g,tt._b,tt._a)}return"progid:DXImageTransform.Microsoft.gradient("+Le+"startColorstr="+ce+",endColorstr="+Me+")"},toString:function(Q){var ce=!!Q;Q=Q||this._format;var Me=!1,Le=this._a<1&&this._a>=0,tt=!ce&&Le&&(Q==="hex"||Q==="hex6"||Q==="hex3"||Q==="hex4"||Q==="hex8"||Q==="name");return tt?Q==="name"&&this._a===0?this.toName():this.toRgbString():(Q==="rgb"&&(Me=this.toRgbString()),Q==="prgb"&&(Me=this.toPercentageRgbString()),(Q==="hex"||Q==="hex6")&&(Me=this.toHexString()),Q==="hex3"&&(Me=this.toHexString(!0)),Q==="hex4"&&(Me=this.toHex8String(!0)),Q==="hex8"&&(Me=this.toHex8String()),Q==="name"&&(Me=this.toName()),Q==="hsl"&&(Me=this.toHslString()),Q==="hsv"&&(Me=this.toHsvString()),Me||this.toHexString())},clone:function(){return p(this.toString())},_applyModification:function(Q,ce){var Me=Q.apply(null,[this].concat([].slice.call(ce)));return this._r=Me._r,this._g=Me._g,this._b=Me._b,this.setAlpha(Me._a),this},lighten:function(){return this._applyModification(te,arguments)},brighten:function(){return this._applyModification(Se,arguments)},darken:function(){return this._applyModification(fe,arguments)},desaturate:function(){return this._applyModification(H,arguments)},saturate:function(){return this._applyModification(Z,arguments)},greyscale:function(){return this._applyModification(ne,arguments)},spin:function(){return this._applyModification(ve,arguments)},_applyCombination:function(Q,ce){return Q.apply(null,[this].concat([].slice.call(ce)))},analogous:function(){return this._applyCombination(Te,arguments)},complement:function(){return this._applyCombination(xe,arguments)},monochromatic:function(){return this._applyCombination(ye,arguments)},splitcomplement:function(){return this._applyCombination(be,arguments)},triad:function(){return this._applyCombination(re,arguments)},tetrad:function(){return this._applyCombination(de,arguments)}},p.fromRatio=function(Q,ce){if(typeof Q=="object"){var Me={};for(var Le in Q)Q.hasOwnProperty(Le)&&(Le==="a"?Me[Le]=Q[Le]:Me[Le]=Do(Q[Le]));Q=Me}return p(Q,ce)};function Y(Q){var ce={r:0,g:0,b:0},Me=1,Le=null,tt=null,bt=null,Ct=!1,yi=!1;return typeof Q=="string"&&(Q=Je(Q)),typeof Q=="object"&&(Ce(Q.r)&&Ce(Q.g)&&Ce(Q.b)?(ce=N(Q.r,Q.g,Q.b),Ct=!0,yi=String(Q.r).substr(-1)==="%"?"prgb":"rgb"):Ce(Q.h)&&Ce(Q.s)&&Ce(Q.v)?(Le=Do(Q.s),tt=Do(Q.v),ce=V(Q.h,Le,tt),Ct=!0,yi="hsv"):Ce(Q.h)&&Ce(Q.s)&&Ce(Q.l)&&(Le=Do(Q.s),bt=Do(Q.l),ce=ee(Q.h,Le,bt),Ct=!0,yi="hsl"),Q.hasOwnProperty("a")&&(Me=Q.a)),Me=Be(Me),{ok:Ct,format:Q.format||yi,r:T(255,C(ce.r,0)),g:T(255,C(ce.g,0)),b:T(255,C(ce.b,0)),a:Me}}function N(Q,ce,Me){return{r:Ye(Q,255)*255,g:Ye(ce,255)*255,b:Ye(Me,255)*255}}function j(Q,ce,Me){Q=Ye(Q,255),ce=Ye(ce,255),Me=Ye(Me,255);var Le=C(Q,ce,Me),tt=T(Q,ce,Me),bt,Ct,yi=(Le+tt)/2;if(Le==tt)bt=Ct=0;else{var Fl=Le-tt;switch(Ct=yi>.5?Fl/(2-Le-tt):Fl/(Le+tt),Le){case Q:bt=(ce-Me)/Fl+(ce<Me?6:0);break;case ce:bt=(Me-Q)/Fl+2;break;case Me:bt=(Q-ce)/Fl+4;break}bt/=6}return{h:bt,s:Ct,l:yi}}function ee(Q,ce,Me){var Le,tt,bt;Q=Ye(Q,360),ce=Ye(ce,100),Me=Ye(Me,100);function Ct(Yl,qp,Fp){return Fp<0&&(Fp+=1),Fp>1&&(Fp-=1),Fp<1/6?Yl+(qp-Yl)*6*Fp:Fp<1/2?qp:Fp<2/3?Yl+(qp-Yl)*(2/3-Fp)*6:Yl}if(ce===0)Le=tt=bt=Me;else{var yi=Me<.5?Me*(1+ce):Me+ce-Me*ce,Fl=2*Me-yi;Le=Ct(Fl,yi,Q+1/3),tt=Ct(Fl,yi,Q),bt=Ct(Fl,yi,Q-1/3)}return{r:Le*255,g:tt*255,b:bt*255}}function G(Q,ce,Me){Q=Ye(Q,255),ce=Ye(ce,255),Me=Ye(Me,255);var Le=C(Q,ce,Me),tt=T(Q,ce,Me),bt,Ct,yi=Le,Fl=Le-tt;if(Ct=Le===0?0:Fl/Le,Le==tt)bt=0;else{switch(Le){case Q:bt=(ce-Me)/Fl+(ce<Me?6:0);break;case ce:bt=(Me-Q)/Fl+2;break;case Me:bt=(Q-ce)/Fl+4;break}bt/=6}return{h:bt,s:Ct,v:yi}}function V(Q,ce,Me){Q=Ye(Q,360)*6,ce=Ye(ce,100),Me=Ye(Me,100);var Le=M.floor(Q),tt=Q-Le,bt=Me*(1-ce),Ct=Me*(1-tt*ce),yi=Me*(1-(1-tt)*ce),Fl=Le%6,Yl=[Me,Ct,bt,bt,yi,Me][Fl],qp=[yi,Me,Me,Ct,bt,bt][Fl],Fp=[bt,bt,yi,Me,Me,Ct][Fl];return{r:Yl*255,g:qp*255,b:Fp*255}}function W(Q,ce,Me,Le){var tt=[ta(S(Q).toString(16)),ta(S(ce).toString(16)),ta(S(Me).toString(16))];return Le&&tt[0].charAt(0)==tt[0].charAt(1)&&tt[1].charAt(0)==tt[1].charAt(1)&&tt[2].charAt(0)==tt[2].charAt(1)?tt[0].charAt(0)+tt[1].charAt(0)+tt[2].charAt(0):tt.join("")}function q(Q,ce,Me,Le,tt){var bt=[ta(S(Q).toString(16)),ta(S(ce).toString(16)),ta(S(Me).toString(16)),ta(Ae(Le))];return tt&&bt[0].charAt(0)==bt[0].charAt(1)&&bt[1].charAt(0)==bt[1].charAt(1)&&bt[2].charAt(0)==bt[2].charAt(1)&&bt[3].charAt(0)==bt[3].charAt(1)?bt[0].charAt(0)+bt[1].charAt(0)+bt[2].charAt(0)+bt[3].charAt(0):bt.join("")}function z(Q,ce,Me,Le){var tt=[ta(Ae(Le)),ta(S(Q).toString(16)),ta(S(ce).toString(16)),ta(S(Me).toString(16))];return tt.join("")}p.equals=function(Q,ce){return!Q||!ce?!1:p(Q).toRgbString()==p(ce).toRgbString()},p.random=function(){return p.fromRatio({r:P(),g:P(),b:P()})};function H(Q,ce){ce=ce===0?0:ce||10;var Me=p(Q).toHsl();return Me.s-=ce/100,Me.s=et(Me.s),p(Me)}function Z(Q,ce){ce=ce===0?0:ce||10;var Me=p(Q).toHsl();return Me.s+=ce/100,Me.s=et(Me.s),p(Me)}function ne(Q){return p(Q).desaturate(100)}function te(Q,ce){ce=ce===0?0:ce||10;var Me=p(Q).toHsl();return Me.l+=ce/100,Me.l=et(Me.l),p(Me)}function Se(Q,ce){ce=ce===0?0:ce||10;var Me=p(Q).toRgb();return Me.r=C(0,T(255,Me.r-S(255*-(ce/100)))),Me.g=C(0,T(255,Me.g-S(255*-(ce/100)))),Me.b=C(0,T(255,Me.b-S(255*-(ce/100)))),p(Me)}function fe(Q,ce){ce=ce===0?0:ce||10;var Me=p(Q).toHsl();return Me.l-=ce/100,Me.l=et(Me.l),p(Me)}function ve(Q,ce){var Me=p(Q).toHsl(),Le=(Me.h+ce)%360;return Me.h=Le<0?360+Le:Le,p(Me)}function xe(Q){var ce=p(Q).toHsl();return ce.h=(ce.h+180)%360,p(ce)}function re(Q){var ce=p(Q).toHsl(),Me=ce.h;return[p(Q),p({h:(Me+120)%360,s:ce.s,l:ce.l}),p({h:(Me+240)%360,s:ce.s,l:ce.l})]}function de(Q){var ce=p(Q).toHsl(),Me=ce.h;return[p(Q),p({h:(Me+90)%360,s:ce.s,l:ce.l}),p({h:(Me+180)%360,s:ce.s,l:ce.l}),p({h:(Me+270)%360,s:ce.s,l:ce.l})]}function be(Q){var ce=p(Q).toHsl(),Me=ce.h;return[p(Q),p({h:(Me+72)%360,s:ce.s,l:ce.l}),p({h:(Me+216)%360,s:ce.s,l:ce.l})]}function Te(Q,ce,Me){ce=ce||6,Me=Me||30;var Le=p(Q).toHsl(),tt=360/Me,bt=[p(Q)];for(Le.h=(Le.h-(tt*ce>>1)+720)%360;--ce;)Le.h=(Le.h+tt)%360,bt.push(p(Le));return bt}function ye(Q,ce){ce=ce||6;for(var Me=p(Q).toHsv(),Le=Me.h,tt=Me.s,bt=Me.v,Ct=[],yi=1/ce;ce--;)Ct.push(p({h:Le,s:tt,v:bt})),bt=(bt+yi)%1;return Ct}p.mix=function(Q,ce,Me){Me=Me===0?0:Me||50;var Le=p(Q).toRgb(),tt=p(ce).toRgb(),bt=Me/100,Ct={r:(tt.r-Le.r)*bt+Le.r,g:(tt.g-Le.g)*bt+Le.g,b:(tt.b-Le.b)*bt+Le.b,a:(tt.a-Le.a)*bt+Le.a};return p(Ct)},p.readability=function(Q,ce){var Me=p(Q),Le=p(ce);return(M.max(Me.getLuminance(),Le.getLuminance())+.05)/(M.min(Me.getLuminance(),Le.getLuminance())+.05)},p.isReadable=function(Q,ce,Me){var Le=p.readability(Q,ce),tt,bt;switch(bt=!1,tt=Re(Me),tt.level+tt.size){case"AAsmall":case"AAAlarge":bt=Le>=4.5;break;case"AAlarge":bt=Le>=3;break;case"AAAsmall":bt=Le>=7;break}return bt},p.mostReadable=function(Q,ce,Me){var Le=null,tt=0,bt,Ct,yi,Fl;Me=Me||{},Ct=Me.includeFallbackColors,yi=Me.level,Fl=Me.size;for(var Yl=0;Yl<ce.length;Yl++)bt=p.readability(Q,ce[Yl]),bt>tt&&(tt=bt,Le=p(ce[Yl]));return p.isReadable(Q,Le,{level:yi,size:Fl})||!Ct?Le:(Me.includeFallbackColors=!1,p.mostReadable(Q,["#fff","#000"],Me))};var De=p.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Ue=p.hexNames=he(De);function he(Q){var ce={};for(var Me in Q)Q.hasOwnProperty(Me)&&(ce[Q[Me]]=Me);return ce}function Be(Q){return Q=parseFloat(Q),(isNaN(Q)||Q<0||Q>1)&&(Q=1),Q}function Ye(Q,ce){ft(Q)&&(Q="100%");var Me=mn(Q);return Q=T(ce,C(0,parseFloat(Q))),Me&&(Q=parseInt(Q*ce,10)/100),M.abs(Q-ce)<1e-6?1:Q%ce/parseFloat(ce)}function et(Q){return T(1,C(0,Q))}function Qe(Q){return parseInt(Q,16)}function ft(Q){return typeof Q=="string"&&Q.indexOf(".")!=-1&&parseFloat(Q)===1}function mn(Q){return typeof Q=="string"&&Q.indexOf("%")!=-1}function ta(Q){return Q.length==1?"0"+Q:""+Q}function Do(Q){return Q<=1&&(Q=Q*100+"%"),Q}function Ae(Q){return M.round(parseFloat(Q)*255).toString(16)}function ke(Q){return Qe(Q)/255}var ge=(function(){var Q="[-\\+]?\\d+%?",ce="[-\\+]?\\d*\\.\\d+%?",Me="(?:"+ce+")|(?:"+Q+")",Le="[\\s|\\(]+("+Me+")[,|\\s]+("+Me+")[,|\\s]+("+Me+")\\s*\\)?",tt="[\\s|\\(]+("+Me+")[,|\\s]+("+Me+")[,|\\s]+("+Me+")[,|\\s]+("+Me+")\\s*\\)?";return{CSS_UNIT:new RegExp(Me),rgb:new RegExp("rgb"+Le),rgba:new RegExp("rgba"+tt),hsl:new RegExp("hsl"+Le),hsla:new RegExp("hsla"+tt),hsv:new RegExp("hsv"+Le),hsva:new RegExp("hsva"+tt),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}})();function Ce(Q){return!!ge.CSS_UNIT.exec(Q)}function Je(Q){Q=Q.replace(v,"").replace(g,"").toLowerCase();var ce=!1;if(De[Q])Q=De[Q],ce=!0;else if(Q=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var Me;return(Me=ge.rgb.exec(Q))?{r:Me[1],g:Me[2],b:Me[3]}:(Me=ge.rgba.exec(Q))?{r:Me[1],g:Me[2],b:Me[3],a:Me[4]}:(Me=ge.hsl.exec(Q))?{h:Me[1],s:Me[2],l:Me[3]}:(Me=ge.hsla.exec(Q))?{h:Me[1],s:Me[2],l:Me[3],a:Me[4]}:(Me=ge.hsv.exec(Q))?{h:Me[1],s:Me[2],v:Me[3]}:(Me=ge.hsva.exec(Q))?{h:Me[1],s:Me[2],v:Me[3],a:Me[4]}:(Me=ge.hex8.exec(Q))?{r:Qe(Me[1]),g:Qe(Me[2]),b:Qe(Me[3]),a:ke(Me[4]),format:ce?"name":"hex8"}:(Me=ge.hex6.exec(Q))?{r:Qe(Me[1]),g:Qe(Me[2]),b:Qe(Me[3]),format:ce?"name":"hex"}:(Me=ge.hex4.exec(Q))?{r:Qe(Me[1]+""+Me[1]),g:Qe(Me[2]+""+Me[2]),b:Qe(Me[3]+""+Me[3]),a:ke(Me[4]+""+Me[4]),format:ce?"name":"hex8"}:(Me=ge.hex3.exec(Q))?{r:Qe(Me[1]+""+Me[1]),g:Qe(Me[2]+""+Me[2]),b:Qe(Me[3]+""+Me[3]),format:ce?"name":"hex"}:!1}function Re(Q){var ce,Me;return Q=Q||{level:"AA",size:"small"},ce=(Q.level||"AA").toUpperCase(),Me=(Q.size||"small").toLowerCase(),ce!=="AA"&&ce!=="AAA"&&(ce="AA"),Me!=="small"&&Me!=="large"&&(Me="small"),{level:ce,size:Me}}typeof me<"u"&&me.exports?me.exports=p:window.tinycolor=p})(Math)}}),k=a({"src/lib/extend.js"(pe){var me=I(),M=Array.isArray;function v(E,S){var T,C;for(T=0;T<E.length;T++){if(C=E[T],C!==null&&typeof C=="object")return!1;C!==void 0&&(S[T]=C)}return!0}pe.extendFlat=function(){return g(arguments,!1,!1,!1)},pe.extendDeep=function(){return g(arguments,!0,!1,!1)},pe.extendDeepAll=function(){return g(arguments,!0,!0,!1)},pe.extendDeepNoArrays=function(){return g(arguments,!0,!1,!0)};function g(E,S,T,C){var P=E[0],p=E.length,Y,N,j,ee,G,V,W;if(p===2&&M(P)&&M(E[1])&&P.length===0){if(W=v(E[1],P),W)return P;P.splice(0,P.length)}for(var q=1;q<p;q++){Y=E[q];for(N in Y)j=P[N],ee=Y[N],C&&M(ee)?P[N]=ee:S&&ee&&(me(ee)||(G=M(ee)))?(G?(G=!1,V=j&&M(j)?j:[]):V=j&&me(j)?j:{},P[N]=g([V,ee],S,T,C)):(typeof ee<"u"||T)&&(P[N]=ee)}return P}}}),B=a({"src/plots/font_attributes.js"(pe,me){me.exports=function(M){var v=M.variantValues,g=M.editType,E=M.colorEditType;E===void 0&&(E=g);var S={editType:g,valType:"integer",min:1,max:1e3,extras:["normal","bold"],dflt:"normal"};M.noNumericWeightValues&&(S.valType="enumerated",S.values=S.extras,S.extras=void 0,S.min=void 0,S.max=void 0);var T={family:{valType:"string",noBlank:!0,strict:!0,editType:g},size:{valType:"number",min:1,editType:g},color:{valType:"color",editType:E},weight:S,style:{editType:g,valType:"enumerated",values:["normal","italic"],dflt:"normal"},variant:M.noFontVariant?void 0:{editType:g,valType:"enumerated",values:v||["normal","small-caps","all-small-caps","all-petite-caps","petite-caps","unicase"],dflt:"normal"},textcase:M.noFontTextcase?void 0:{editType:g,valType:"enumerated",values:["normal","word caps","upper","lower"],dflt:"normal"},lineposition:M.noFontLineposition?void 0:{editType:g,valType:"flaglist",flags:["under","over","through"],extras:["none"],dflt:"none"},shadow:M.noFontShadow?void 0:{editType:g,valType:"string",dflt:M.autoShadowDflt?"auto":"none"},editType:g};return M.autoSize&&(T.size.dflt="auto"),M.autoColor&&(T.color.dflt="auto"),M.arrayOk&&(T.family.arrayOk=!0,T.weight.arrayOk=!0,T.style.arrayOk=!0,M.noFontVariant||(T.variant.arrayOk=!0),M.noFontTextcase||(T.textcase.arrayOk=!0),M.noFontLineposition||(T.lineposition.arrayOk=!0),M.noFontShadow||(T.shadow.arrayOk=!0),T.size.arrayOk=!0,T.color.arrayOk=!0),T}}}),J=a({"src/components/fx/constants.js"(pe,me){me.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}}}),X=a({"src/components/fx/layout_attributes.js"(pe,me){var M=J(),v=B(),g=v({editType:"none"});g.family.dflt=M.HOVERFONT,g.size.dflt=M.HOVERFONTSIZE,me.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoversubplots:{valType:"enumerated",values:["single","overlaying","axis"],dflt:"overlaying",editType:"none"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:g,grouptitlefont:v({editType:"none"}),align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},showarrow:{valType:"boolean",dflt:!0,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}}}),ae=a({"src/components/fx/attributes.js"(pe,me){var M=B(),v=X().hoverlabel,g=k().extendFlat;me.exports={hoverlabel:{bgcolor:g({},v.bgcolor,{arrayOk:!0}),bordercolor:g({},v.bordercolor,{arrayOk:!0}),font:M({arrayOk:!0,editType:"none"}),align:g({},v.align,{arrayOk:!0}),namelength:g({},v.namelength,{arrayOk:!0}),showarrow:g({},v.showarrow),editType:"none"}}}}),He=a({"src/plots/attributes.js"(pe,me){var M=B(),v=ae();me.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legend:{valType:"subplotid",dflt:"legend",editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:M({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},legendwidth:{valType:"number",min:0,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:v.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},uirevision:{valType:"any",editType:"none"}}}}),Pe=a({"src/components/colorscale/scales.js"(pe,me){var M=b(),v={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},g=v.RdBu;function E(C,P){if(P||(P=g),!C)return P;function p(){try{C=v[C]||JSON.parse(C)}catch{C=P}}return typeof C=="string"&&(p(),typeof C=="string"&&p()),S(C)?C:P}function S(C){var P=0;if(!Array.isArray(C)||C.length<2||!C[0]||!C[C.length-1]||+C[0][0]!=0||+C[C.length-1][0]!=1)return!1;for(var p=0;p<C.length;p++){var Y=C[p];if(Y.length!==2||+Y[0]<P||!M(Y[1]).isValid())return!1;P=+Y[0]}return!0}function T(C){return v[C]!==void 0?!0:S(C)}me.exports={scales:v,defaultScale:g,get:E,isValid:T}}}),ue=a({"src/components/color/attributes.js"(pe){pe.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],pe.defaultLine="#444",pe.lightLine="#eee",pe.background="#fff",pe.borderLine="#BEC8D9",pe.lightFraction=1e3/11}}),Oe=a({"src/components/color/index.js"(pe,me){var M=b(),v=w(),g=y().isTypedArray,E=me.exports={},S=ue();E.defaults=S.defaults;var T=E.defaultLine=S.defaultLine;E.lightLine=S.lightLine;var C=E.background=S.background;E.tinyRGB=function(p){var Y=p.toRgb();return"rgb("+Math.round(Y.r)+", "+Math.round(Y.g)+", "+Math.round(Y.b)+")"},E.rgb=function(p){return E.tinyRGB(M(p))},E.opacity=function(p){return p?M(p).getAlpha():0},E.addOpacity=function(p,Y){var N=M(p).toRgb();return"rgba("+Math.round(N.r)+", "+Math.round(N.g)+", "+Math.round(N.b)+", "+Y+")"},E.combine=function(p,Y){var N=M(p).toRgb();if(N.a===1)return M(p).toRgbString();var j=M(Y||C).toRgb(),ee=j.a===1?j:{r:255*(1-j.a)+j.r*j.a,g:255*(1-j.a)+j.g*j.a,b:255*(1-j.a)+j.b*j.a},G={r:ee.r*(1-N.a)+N.r*N.a,g:ee.g*(1-N.a)+N.g*N.a,b:ee.b*(1-N.a)+N.b*N.a};return M(G).toRgbString()},E.interpolate=function(p,Y,N){var j=M(p).toRgb(),ee=M(Y).toRgb(),G={r:N*j.r+(1-N)*ee.r,g:N*j.g+(1-N)*ee.g,b:N*j.b+(1-N)*ee.b};return M(G).toRgbString()},E.contrast=function(p,Y,N){var j=M(p);j.getAlpha()!==1&&(j=M(E.combine(p,C)));var ee=j.isDark()?Y?j.lighten(Y):C:N?j.darken(N):T;return ee.toString()},E.stroke=function(p,Y){var N=M(Y);p.style({stroke:E.tinyRGB(N),"stroke-opacity":N.getAlpha()})},E.fill=function(p,Y){var N=M(Y);p.style({fill:E.tinyRGB(N),"fill-opacity":N.getAlpha()})},E.clean=function(p){if(!(!p||typeof p!="object")){var Y=Object.keys(p),N,j,ee,G;for(N=0;N<Y.length;N++)if(ee=Y[N],G=p[ee],ee.substr(ee.length-5)==="color")if(Array.isArray(G))for(j=0;j<G.length;j++)G[j]=P(G[j]);else p[ee]=P(G);else if(ee.substr(ee.length-10)==="colorscale"&&Array.isArray(G))for(j=0;j<G.length;j++)Array.isArray(G[j])&&(G[j][1]=P(G[j][1]));else if(Array.isArray(G)){var V=G[0];if(!Array.isArray(V)&&V&&typeof V=="object")for(j=0;j<G.length;j++)E.clean(G[j])}else G&&typeof G=="object"&&!g(G)&&E.clean(G)}};function P(p){if(v(p)||typeof p!="string")return p;var Y=p.trim();if(Y.substr(0,3)!=="rgb")return p;var N=Y.match(/^rgba?\s*\(([^()]*)\)$/);if(!N)return p;var j=N[1].trim().split(/\s*[\s,]\s*/),ee=Y.charAt(3)==="a"&&j.length===4;if(!ee&&j.length!==3)return p;for(var G=0;G<j.length;G++){if(!j[G].length||(j[G]=Number(j[G]),!(j[G]>=0)))return p;if(G===3)j[G]>1&&(j[G]=1);else if(j[G]>=1)return p}var V=Math.round(j[0]*255)+", "+Math.round(j[1]*255)+", "+Math.round(j[2]*255);return ee?"rgba("+V+", "+j[3]+")":"rgb("+V+")"}}}),we=a({"src/constants/interactions.js"(pe,me){me.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}}}),Ze=a({"src/lib/regex.js"(pe){pe.counter=function(me,M,v,g){var E=(M||"")+(v?"":"$"),S=g===!1?"":"^";return me==="xy"?new RegExp(S+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+E):new RegExp(S+me+"([2-9]|[1-9][0-9]+)?"+E)}}}),it=a({"src/lib/coerce.js"(pe){var me=w(),M=b(),v=k().extendFlat,g=He(),E=Pe(),S=Oe(),T=we().DESELECTDIM,C=l(),P=Ze().counter,p=$().modHalf,Y=y().isArrayOrTypedArray,N=y().isTypedArraySpec,j=y().decodeTypedArraySpec;pe.valObjectMeta={data_array:{coerceFunction:function(G,V,W){V.set(Y(G)?G:N(G)?j(G):W)}},enumerated:{coerceFunction:function(G,V,W,q){q.coerceNumber&&(G=+G),q.values.indexOf(G)===-1?V.set(W):V.set(G)},validateFunction:function(G,V){V.coerceNumber&&(G=+G);for(var W=V.values,q=0;q<W.length;q++){var z=String(W[q]);if(z.charAt(0)==="/"&&z.charAt(z.length-1)==="/"){var H=new RegExp(z.substr(1,z.length-2));if(H.test(G))return!0}else if(G===W[q])return!0}return!1}},boolean:{coerceFunction:function(G,V,W){G===!0||G===!1?V.set(G):V.set(W)}},number:{coerceFunction:function(G,V,W,q){N(G)&&(G=j(G)),!me(G)||q.min!==void 0&&G<q.min||q.max!==void 0&&G>q.max?V.set(W):V.set(+G)}},integer:{coerceFunction:function(G,V,W,q){if((q.extras||[]).indexOf(G)!==-1){V.set(G);return}N(G)&&(G=j(G)),G%1||!me(G)||q.min!==void 0&&G<q.min||q.max!==void 0&&G>q.max?V.set(W):V.set(+G)}},string:{coerceFunction:function(G,V,W,q){if(typeof G!="string"){var z=typeof G=="number";q.strict===!0||!z?V.set(W):V.set(String(G))}else q.noBlank&&!G?V.set(W):V.set(G)}},color:{coerceFunction:function(G,V,W){N(G)&&(G=j(G)),M(G).isValid()?V.set(G):V.set(W)}},colorlist:{coerceFunction:function(G,V,W){function q(z){return M(z).isValid()}!Array.isArray(G)||!G.length?V.set(W):G.every(q)?V.set(G):V.set(W)}},colorscale:{coerceFunction:function(G,V,W){V.set(E.get(G,W))}},angle:{coerceFunction:function(G,V,W){N(G)&&(G=j(G)),G==="auto"?V.set("auto"):me(G)?V.set(p(+G,360)):V.set(W)}},subplotid:{coerceFunction:function(G,V,W,q){var z=q.regex||P(W);if(typeof G=="string"&&z.test(G)){V.set(G);return}V.set(W)},validateFunction:function(G,V){var W=V.dflt;return G===W?!0:typeof G!="string"?!1:!!P(W).test(G)}},flaglist:{coerceFunction:function(G,V,W,q){if((q.extras||[]).indexOf(G)!==-1){V.set(G);return}if(typeof G!="string"){V.set(W);return}for(var z=G.split("+"),H=0;H<z.length;){var Z=z[H];q.flags.indexOf(Z)===-1||z.indexOf(Z)<H?z.splice(H,1):H++}z.length?V.set(z.join("+")):V.set(W)}},any:{coerceFunction:function(G,V,W){G===void 0?V.set(W):V.set(N(G)?j(G):G)}},info_array:{coerceFunction:function(G,V,W,q){function z(De,Ue,he){var Be,Ye={set:function(et){Be=et}};return he===void 0&&(he=Ue.dflt),pe.valObjectMeta[Ue.valType].coerceFunction(De,Ye,he,Ue),Be}if(N(G)&&(G=j(G)),!Y(G)){V.set(W);return}var H=q.dimensions===2||q.dimensions==="1-2"&&Array.isArray(G)&&Y(G[0]),Z=q.items,ne=[],te=Array.isArray(Z),Se=te&&H&&Y(Z[0]),fe=H&&te&&!Se,ve=te&&!fe?Z.length:G.length,xe,re,de,be,Te,ye;if(W=Array.isArray(W)?W:[],H)for(xe=0;xe<ve;xe++)for(ne[xe]=[],de=Y(G[xe])?G[xe]:[],fe?Te=Z.length:te?Te=Z[xe].length:Te=de.length,re=0;re<Te;re++)fe?be=Z[re]:te?be=Z[xe][re]:be=Z,ye=z(de[re],be,(W[xe]||[])[re]),ye!==void 0&&(ne[xe][re]=ye);else for(xe=0;xe<ve;xe++)ye=z(G[xe],te?Z[xe]:Z,W[xe]),ye!==void 0&&(ne[xe]=ye);V.set(ne)},validateFunction:function(G,V){if(!Y(G))return!1;var W=V.items,q=Array.isArray(W),z=V.dimensions===2;if(!V.freeLength&&G.length!==W.length)return!1;for(var H=0;H<G.length;H++)if(z){if(!Y(G[H])||!V.freeLength&&G[H].length!==W[H].length)return!1;for(var Z=0;Z<G[H].length;Z++)if(!ee(G[H][Z],q?W[H][Z]:W))return!1}else if(!ee(G[H],q?W[H]:W))return!1;return!0}}},pe.coerce=function(G,V,W,q,z){var H=C(W,q).get(),Z=C(G,q),ne=C(V,q),te=Z.get(),Se=V._template;if(te===void 0&&Se&&(te=C(Se,q).get(),Se=0),z===void 0&&(z=H.dflt),H.arrayOk){if(Y(te))return ne.set(te),te;if(N(te))return te=j(te),ne.set(te),te}var fe=pe.valObjectMeta[H.valType].coerceFunction;fe(te,ne,z,H);var ve=ne.get();return Se&&ve===z&&!ee(te,H)&&(te=C(Se,q).get(),fe(te,ne,z,H),ve=ne.get()),ve},pe.coerce2=function(G,V,W,q,z){var H=C(G,q),Z=pe.coerce(G,V,W,q,z),ne=H.get();return ne!=null?Z:!1},pe.coerceFont=function(G,V,W,q){q||(q={}),W=v({},W),W=v(W,q.overrideDflt||{});var z={family:G(V+".family",W.family),size:G(V+".size",W.size),color:G(V+".color",W.color),weight:G(V+".weight",W.weight),style:G(V+".style",W.style)};if(q.noFontVariant||(z.variant=G(V+".variant",W.variant)),q.noFontLineposition||(z.lineposition=G(V+".lineposition",W.lineposition)),q.noFontTextcase||(z.textcase=G(V+".textcase",W.textcase)),!q.noFontShadow){var H=W.shadow;H==="none"&&q.autoShadowDflt&&(H="auto"),z.shadow=G(V+".shadow",H)}return z},pe.coercePattern=function(G,V,W,q){var z=G(V+".shape"),H;if(z||(H=G(V+".path")),z||H){z&&G(V+".solidity"),G(V+".size");var Z=G(V+".fillmode"),ne=Z==="overlay";if(!q){var te=G(V+".bgcolor",ne?W:void 0);G(V+".fgcolor",ne?S.contrast(te):W)}G(V+".fgopacity",ne?.5:1)}},pe.coerceHoverinfo=function(G,V,W){var q=V._module.attributes,z=q.hoverinfo?q:g,H=z.hoverinfo,Z;if(W._dataLength===1){var ne=H.dflt==="all"?H.flags.slice():H.dflt.split("+");ne.splice(ne.indexOf("name"),1),Z=ne.join("+")}return pe.coerce(G,V,z,"hoverinfo",Z)},pe.coerceSelectionMarkerOpacity=function(G,V){if(G.marker){var W=G.marker.opacity;if(W!==void 0){var q,z;!Y(W)&&!G.selected&&!G.unselected&&(q=W,z=T*W),V("selected.marker.opacity",q),V("unselected.marker.opacity",z)}}};function ee(G,V){var W=pe.valObjectMeta[V.valType];if(V.arrayOk&&Y(G))return!0;if(W.validateFunction)return W.validateFunction(G,V);var q={},z=q,H={set:function(Z){z=Z}};return W.coerceFunction(G,H,q,V),z!==q}pe.validate=ee}}),lt=a({"src/plot_api/plot_config.js"(pe,me){var M={staticPlot:{valType:"boolean",dflt:!1},typesetMath:{valType:"boolean",dflt:!0},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},editSelection:{valType:"boolean",dflt:!0},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox","map"],extras:[!0,!1],dflt:"gl3d+geo+map"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/un/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},v={};function g(E,S){for(var T in E){var C=E[T];C.valType?S[T]=C.dflt:(S[T]||(S[T]={}),g(C,S[T]))}}g(M,v),me.exports={configAttributes:M,dfltConfig:v}}}),Vt=a({"src/lib/notifier.js"(pe,me){var M=f(),v=w(),g=[];me.exports=function(E,S){if(g.indexOf(E)!==-1)return;g.push(E);var T=1e3;v(S)?T=S:S==="long"&&(T=3e3);var C=M.select("body").selectAll(".plotly-notifier").data([0]);C.enter().append("div").classed("plotly-notifier",!0);var P=C.selectAll(".notifier-note").data(g);function p(Y){Y.duration(700).style("opacity",0).each("end",function(N){var j=g.indexOf(N);j!==-1&&g.splice(j,1),M.select(this).remove()})}P.enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(Y){var N=M.select(this);N.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){N.transition().call(p)});for(var j=N.append("p"),ee=Y.split(/<br\s*\/?>/g),G=0;G<ee.length;G++)G&&j.append("br"),j.append("span").text(ee[G]);S==="stick"?N.transition().duration(350).style("opacity",1):N.transition().duration(700).style("opacity",1).transition().delay(T).call(p)})}}}),_e=a({"src/lib/loggers.js"(pe,me){var M=lt().dfltConfig,v=Vt(),g=me.exports={};g.log=function(){var E;if(M.logging>1){var S=["LOG:"];for(E=0;E<arguments.length;E++)S.push(arguments[E]);console.trace.apply(console,S)}if(M.notifyOnLogging>1){var T=[];for(E=0;E<arguments.length;E++)T.push(arguments[E]);v(T.join("<br>"),"long")}},g.warn=function(){var E;if(M.logging>0){var S=["WARN:"];for(E=0;E<arguments.length;E++)S.push(arguments[E]);console.trace.apply(console,S)}if(M.notifyOnLogging>0){var T=[];for(E=0;E<arguments.length;E++)T.push(arguments[E]);v(T.join("<br>"),"stick")}},g.error=function(){var E;if(M.logging>0){var S=["ERROR:"];for(E=0;E<arguments.length;E++)S.push(arguments[E]);console.error.apply(console,S)}if(M.notifyOnLogging>0){var T=[];for(E=0;E<arguments.length;E++)T.push(arguments[E]);v(T.join("<br>"),"stick")}}}}),pr=a({"src/lib/noop.js"(pe,me){me.exports=function(){}}}),_s=a({"src/lib/push_unique.js"(pe,me){me.exports=function(v,g){if(g instanceof RegExp){for(var E=g.toString(),S=0;S<v.length;S++)if(v[S]instanceof RegExp&&v[S].toString()===E)return v;v.push(g)}else(g||g===0)&&v.indexOf(g)===-1&&v.push(g);return v}}}),Ei=a({"node_modules/gl-mat4/create.js"(pe,me){me.exports=M;function M(){var v=new Float32Array(16);return v[0]=1,v[1]=0,v[2]=0,v[3]=0,v[4]=0,v[5]=1,v[6]=0,v[7]=0,v[8]=0,v[9]=0,v[10]=1,v[11]=0,v[12]=0,v[13]=0,v[14]=0,v[15]=1,v}}}),Bl=a({"node_modules/gl-mat4/clone.js"(pe,me){me.exports=M;function M(v){var g=new Float32Array(16);return g[0]=v[0],g[1]=v[1],g[2]=v[2],g[3]=v[3],g[4]=v[4],g[5]=v[5],g[6]=v[6],g[7]=v[7],g[8]=v[8],g[9]=v[9],g[10]=v[10],g[11]=v[11],g[12]=v[12],g[13]=v[13],g[14]=v[14],g[15]=v[15],g}}}),Wl=a({"node_modules/gl-mat4/copy.js"(pe,me){me.exports=M;function M(v,g){return v[0]=g[0],v[1]=g[1],v[2]=g[2],v[3]=g[3],v[4]=g[4],v[5]=g[5],v[6]=g[6],v[7]=g[7],v[8]=g[8],v[9]=g[9],v[10]=g[10],v[11]=g[11],v[12]=g[12],v[13]=g[13],v[14]=g[14],v[15]=g[15],v}}}),Ep=a({"node_modules/gl-mat4/identity.js"(pe,me){me.exports=M;function M(v){return v[0]=1,v[1]=0,v[2]=0,v[3]=0,v[4]=0,v[5]=1,v[6]=0,v[7]=0,v[8]=0,v[9]=0,v[10]=1,v[11]=0,v[12]=0,v[13]=0,v[14]=0,v[15]=1,v}}}),Lp=a({"node_modules/gl-mat4/transpose.js"(pe,me){me.exports=M;function M(v,g){if(v===g){var E=g[1],S=g[2],T=g[3],C=g[6],P=g[7],p=g[11];v[1]=g[4],v[2]=g[8],v[3]=g[12],v[4]=E,v[6]=g[9],v[7]=g[13],v[8]=S,v[9]=C,v[11]=g[14],v[12]=T,v[13]=P,v[14]=p}else v[0]=g[0],v[1]=g[4],v[2]=g[8],v[3]=g[12],v[4]=g[1],v[5]=g[5],v[6]=g[9],v[7]=g[13],v[8]=g[2],v[9]=g[6],v[10]=g[10],v[11]=g[14],v[12]=g[3],v[13]=g[7],v[14]=g[11],v[15]=g[15];return v}}}),Op=a({"node_modules/gl-mat4/invert.js"(pe,me){me.exports=M;function M(v,g){var E=g[0],S=g[1],T=g[2],C=g[3],P=g[4],p=g[5],Y=g[6],N=g[7],j=g[8],ee=g[9],G=g[10],V=g[11],W=g[12],q=g[13],z=g[14],H=g[15],Z=E*p-S*P,ne=E*Y-T*P,te=E*N-C*P,Se=S*Y-T*p,fe=S*N-C*p,ve=T*N-C*Y,xe=j*q-ee*W,re=j*z-G*W,de=j*H-V*W,be=ee*z-G*q,Te=ee*H-V*q,ye=G*H-V*z,De=Z*ye-ne*Te+te*be+Se*de-fe*re+ve*xe;return De?(De=1/De,v[0]=(p*ye-Y*Te+N*be)*De,v[1]=(T*Te-S*ye-C*be)*De,v[2]=(q*ve-z*fe+H*Se)*De,v[3]=(G*fe-ee*ve-V*Se)*De,v[4]=(Y*de-P*ye-N*re)*De,v[5]=(E*ye-T*de+C*re)*De,v[6]=(z*te-W*ve-H*ne)*De,v[7]=(j*ve-G*te+V*ne)*De,v[8]=(P*Te-p*de+N*xe)*De,v[9]=(S*de-E*Te-C*xe)*De,v[10]=(W*fe-q*te+H*Z)*De,v[11]=(ee*te-j*fe-V*Z)*De,v[12]=(p*re-P*be-Y*xe)*De,v[13]=(E*be-S*re+T*xe)*De,v[14]=(q*ne-W*Se-z*Z)*De,v[15]=(j*Se-ee*ne+G*Z)*De,v):null}}}),R0=a({"node_modules/gl-mat4/adjoint.js"(pe,me){me.exports=M;function M(v,g){var E=g[0],S=g[1],T=g[2],C=g[3],P=g[4],p=g[5],Y=g[6],N=g[7],j=g[8],ee=g[9],G=g[10],V=g[11],W=g[12],q=g[13],z=g[14],H=g[15];return v[0]=p*(G*H-V*z)-ee*(Y*H-N*z)+q*(Y*V-N*G),v[1]=-(S*(G*H-V*z)-ee*(T*H-C*z)+q*(T*V-C*G)),v[2]=S*(Y*H-N*z)-p*(T*H-C*z)+q*(T*N-C*Y),v[3]=-(S*(Y*V-N*G)-p*(T*V-C*G)+ee*(T*N-C*Y)),v[4]=-(P*(G*H-V*z)-j*(Y*H-N*z)+W*(Y*V-N*G)),v[5]=E*(G*H-V*z)-j*(T*H-C*z)+W*(T*V-C*G),v[6]=-(E*(Y*H-N*z)-P*(T*H-C*z)+W*(T*N-C*Y)),v[7]=E*(Y*V-N*G)-P*(T*V-C*G)+j*(T*N-C*Y),v[8]=P*(ee*H-V*q)-j*(p*H-N*q)+W*(p*V-N*ee),v[9]=-(E*(ee*H-V*q)-j*(S*H-C*q)+W*(S*V-C*ee)),v[10]=E*(p*H-N*q)-P*(S*H-C*q)+W*(S*N-C*p),v[11]=-(E*(p*V-N*ee)-P*(S*V-C*ee)+j*(S*N-C*p)),v[12]=-(P*(ee*z-G*q)-j*(p*z-Y*q)+W*(p*G-Y*ee)),v[13]=E*(ee*z-G*q)-j*(S*z-T*q)+W*(S*G-T*ee),v[14]=-(E*(p*z-Y*q)-P*(S*z-T*q)+W*(S*Y-T*p)),v[15]=E*(p*G-Y*ee)-P*(S*G-T*ee)+j*(S*Y-T*p),v}}}),N0=a({"node_modules/gl-mat4/determinant.js"(pe,me){me.exports=M;function M(v){var g=v[0],E=v[1],S=v[2],T=v[3],C=v[4],P=v[5],p=v[6],Y=v[7],N=v[8],j=v[9],ee=v[10],G=v[11],V=v[12],W=v[13],q=v[14],z=v[15],H=g*P-E*C,Z=g*p-S*C,ne=g*Y-T*C,te=E*p-S*P,Se=E*Y-T*P,fe=S*Y-T*p,ve=N*W-j*V,xe=N*q-ee*V,re=N*z-G*V,de=j*q-ee*W,be=j*z-G*W,Te=ee*z-G*q;return H*Te-Z*be+ne*de+te*re-Se*xe+fe*ve}}}),Qp=a({"node_modules/gl-mat4/multiply.js"(pe,me){me.exports=M;function M(v,g,E){var S=g[0],T=g[1],C=g[2],P=g[3],p=g[4],Y=g[5],N=g[6],j=g[7],ee=g[8],G=g[9],V=g[10],W=g[11],q=g[12],z=g[13],H=g[14],Z=g[15],ne=E[0],te=E[1],Se=E[2],fe=E[3];return v[0]=ne*S+te*p+Se*ee+fe*q,v[1]=ne*T+te*Y+Se*G+fe*z,v[2]=ne*C+te*N+Se*V+fe*H,v[3]=ne*P+te*j+Se*W+fe*Z,ne=E[4],te=E[5],Se=E[6],fe=E[7],v[4]=ne*S+te*p+Se*ee+fe*q,v[5]=ne*T+te*Y+Se*G+fe*z,v[6]=ne*C+te*N+Se*V+fe*H,v[7]=ne*P+te*j+Se*W+fe*Z,ne=E[8],te=E[9],Se=E[10],fe=E[11],v[8]=ne*S+te*p+Se*ee+fe*q,v[9]=ne*T+te*Y+Se*G+fe*z,v[10]=ne*C+te*N+Se*V+fe*H,v[11]=ne*P+te*j+Se*W+fe*Z,ne=E[12],te=E[13],Se=E[14],fe=E[15],v[12]=ne*S+te*p+Se*ee+fe*q,v[13]=ne*T+te*Y+Se*G+fe*z,v[14]=ne*C+te*N+Se*V+fe*H,v[15]=ne*P+te*j+Se*W+fe*Z,v}}}),O0=a({"node_modules/gl-mat4/translate.js"(pe,me){me.exports=M;function M(v,g,E){var S=E[0],T=E[1],C=E[2],P,p,Y,N,j,ee,G,V,W,q,z,H;return g===v?(v[12]=g[0]*S+g[4]*T+g[8]*C+g[12],v[13]=g[1]*S+g[5]*T+g[9]*C+g[13],v[14]=g[2]*S+g[6]*T+g[10]*C+g[14],v[15]=g[3]*S+g[7]*T+g[11]*C+g[15]):(P=g[0],p=g[1],Y=g[2],N=g[3],j=g[4],ee=g[5],G=g[6],V=g[7],W=g[8],q=g[9],z=g[10],H=g[11],v[0]=P,v[1]=p,v[2]=Y,v[3]=N,v[4]=j,v[5]=ee,v[6]=G,v[7]=V,v[8]=W,v[9]=q,v[10]=z,v[11]=H,v[12]=P*S+j*T+W*C+g[12],v[13]=p*S+ee*T+q*C+g[13],v[14]=Y*S+G*T+z*C+g[14],v[15]=N*S+V*T+H*C+g[15]),v}}}),zp=a({"node_modules/gl-mat4/scale.js"(pe,me){me.exports=M;function M(v,g,E){var S=E[0],T=E[1],C=E[2];return v[0]=g[0]*S,v[1]=g[1]*S,v[2]=g[2]*S,v[3]=g[3]*S,v[4]=g[4]*T,v[5]=g[5]*T,v[6]=g[6]*T,v[7]=g[7]*T,v[8]=g[8]*C,v[9]=g[9]*C,v[10]=g[10]*C,v[11]=g[11]*C,v[12]=g[12],v[13]=g[13],v[14]=g[14],v[15]=g[15],v}}}),M0=a({"node_modules/gl-mat4/rotate.js"(pe,me){me.exports=M;function M(v,g,E,S){var T=S[0],C=S[1],P=S[2],p=Math.sqrt(T*T+C*C+P*P),Y,N,j,ee,G,V,W,q,z,H,Z,ne,te,Se,fe,ve,xe,re,de,be,Te,ye,De,Ue;return Math.abs(p)<1e-6?null:(p=1/p,T*=p,C*=p,P*=p,Y=Math.sin(E),N=Math.cos(E),j=1-N,ee=g[0],G=g[1],V=g[2],W=g[3],q=g[4],z=g[5],H=g[6],Z=g[7],ne=g[8],te=g[9],Se=g[10],fe=g[11],ve=T*T*j+N,xe=C*T*j+P*Y,re=P*T*j-C*Y,de=T*C*j-P*Y,be=C*C*j+N,Te=P*C*j+T*Y,ye=T*P*j+C*Y,De=C*P*j-T*Y,Ue=P*P*j+N,v[0]=ee*ve+q*xe+ne*re,v[1]=G*ve+z*xe+te*re,v[2]=V*ve+H*xe+Se*re,v[3]=W*ve+Z*xe+fe*re,v[4]=ee*de+q*be+ne*Te,v[5]=G*de+z*be+te*Te,v[6]=V*de+H*be+Se*Te,v[7]=W*de+Z*be+fe*Te,v[8]=ee*ye+q*De+ne*Ue,v[9]=G*ye+z*De+te*Ue,v[10]=V*ye+H*De+Se*Ue,v[11]=W*ye+Z*De+fe*Ue,g!==v&&(v[12]=g[12],v[13]=g[13],v[14]=g[14],v[15]=g[15]),v)}}}),W0=a({"node_modules/gl-mat4/rotateX.js"(pe,me){me.exports=M;function M(v,g,E){var S=Math.sin(E),T=Math.cos(E),C=g[4],P=g[5],p=g[6],Y=g[7],N=g[8],j=g[9],ee=g[10],G=g[11];return g!==v&&(v[0]=g[0],v[1]=g[1],v[2]=g[2],v[3]=g[3],v[12]=g[12],v[13]=g[13],v[14]=g[14],v[15]=g[15]),v[4]=C*T+N*S,v[5]=P*T+j*S,v[6]=p*T+ee*S,v[7]=Y*T+G*S,v[8]=N*T-C*S,v[9]=j*T-P*S,v[10]=ee*T-p*S,v[11]=G*T-Y*S,v}}}),im=a({"node_modules/gl-mat4/rotateY.js"(pe,me){me.exports=M;function M(v,g,E){var S=Math.sin(E),T=Math.cos(E),C=g[0],P=g[1],p=g[2],Y=g[3],N=g[8],j=g[9],ee=g[10],G=g[11];return g!==v&&(v[4]=g[4],v[5]=g[5],v[6]=g[6],v[7]=g[7],v[12]=g[12],v[13]=g[13],v[14]=g[14],v[15]=g[15]),v[0]=C*T-N*S,v[1]=P*T-j*S,v[2]=p*T-ee*S,v[3]=Y*T-G*S,v[8]=C*S+N*T,v[9]=P*S+j*T,v[10]=p*S+ee*T,v[11]=Y*S+G*T,v}}}),F0=a({"node_modules/gl-mat4/rotateZ.js"(pe,me){me.exports=M;function M(v,g,E){var S=Math.sin(E),T=Math.cos(E),C=g[0],P=g[1],p=g[2],Y=g[3],N=g[4],j=g[5],ee=g[6],G=g[7];return g!==v&&(v[8]=g[8],v[9]=g[9],v[10]=g[10],v[11]=g[11],v[12]=g[12],v[13]=g[13],v[14]=g[14],v[15]=g[15]),v[0]=C*T+N*S,v[1]=P*T+j*S,v[2]=p*T+ee*S,v[3]=Y*T+G*S,v[4]=N*T-C*S,v[5]=j*T-P*S,v[6]=ee*T-p*S,v[7]=G*T-Y*S,v}}}),fm=a({"node_modules/gl-mat4/fromRotation.js"(pe,me){me.exports=M;function M(v,g,E){var S,T,C,P=E[0],p=E[1],Y=E[2],N=Math.sqrt(P*P+p*p+Y*Y);return Math.abs(N)<1e-6?null:(N=1/N,P*=N,p*=N,Y*=N,S=Math.sin(g),T=Math.cos(g),C=1-T,v[0]=P*P*C+T,v[1]=p*P*C+Y*S,v[2]=Y*P*C-p*S,v[3]=0,v[4]=P*p*C-Y*S,v[5]=p*p*C+T,v[6]=Y*p*C+P*S,v[7]=0,v[8]=P*Y*C+p*S,v[9]=p*Y*C-P*S,v[10]=Y*Y*C+T,v[11]=0,v[12]=0,v[13]=0,v[14]=0,v[15]=1,v)}}}),cm=a({"node_modules/gl-mat4/fromRotationTranslation.js"(pe,me){me.exports=M;function M(v,g,E){var S=g[0],T=g[1],C=g[2],P=g[3],p=S+S,Y=T+T,N=C+C,j=S*p,ee=S*Y,G=S*N,V=T*Y,W=T*N,q=C*N,z=P*p,H=P*Y,Z=P*N;return v[0]=1-(V+q),v[1]=ee+Z,v[2]=G-H,v[3]=0,v[4]=ee-Z,v[5]=1-(j+q),v[6]=W+z,v[7]=0,v[8]=G+H,v[9]=W-z,v[10]=1-(j+V),v[11]=0,v[12]=E[0],v[13]=E[1],v[14]=E[2],v[15]=1,v}}}),Ap=a({"node_modules/gl-mat4/fromScaling.js"(pe,me){me.exports=M;function M(v,g){return v[0]=g[0],v[1]=0,v[2]=0,v[3]=0,v[4]=0,v[5]=g[1],v[6]=0,v[7]=0,v[8]=0,v[9]=0,v[10]=g[2],v[11]=0,v[12]=0,v[13]=0,v[14]=0,v[15]=1,v}}}),Io=a({"node_modules/gl-mat4/fromTranslation.js"(pe,me){me.exports=M;function M(v,g){return v[0]=1,v[1]=0,v[2]=0,v[3]=0,v[4]=0,v[5]=1,v[6]=0,v[7]=0,v[8]=0,v[9]=0,v[10]=1,v[11]=0,v[12]=g[0],v[13]=g[1],v[14]=g[2],v[15]=1,v}}}),p0=a({"node_modules/gl-mat4/fromXRotation.js"(pe,me){me.exports=M;function M(v,g){var E=Math.sin(g),S=Math.cos(g);return v[0]=1,v[1]=0,v[2]=0,v[3]=0,v[4]=0,v[5]=S,v[6]=E,v[7]=0,v[8]=0,v[9]=-E,v[10]=S,v[11]=0,v[12]=0,v[13]=0,v[14]=0,v[15]=1,v}}}),a0=a({"node_modules/gl-mat4/fromYRotation.js"(pe,me){me.exports=M;function M(v,g){var E=Math.sin(g),S=Math.cos(g);return v[0]=S,v[1]=0,v[2]=-E,v[3]=0,v[4]=0,v[5]=1,v[6]=0,v[7]=0,v[8]=E,v[9]=0,v[10]=S,v[11]=0,v[12]=0,v[13]=0,v[14]=0,v[15]=1,v}}}),rm=a({"node_modules/gl-mat4/fromZRotation.js"(pe,me){me.exports=M;function M(v,g){var E=Math.sin(g),S=Math.cos(g);return v[0]=S,v[1]=E,v[2]=0,v[3]=0,v[4]=-E,v[5]=S,v[6]=0,v[7]=0,v[8]=0,v[9]=0,v[10]=1,v[11]=0,v[12]=0,v[13]=0,v[14]=0,v[15]=1,v}}}),X0=a({"node_modules/gl-mat4/fromQuat.js"(pe,me){me.exports=M;function M(v,g){var E=g[0],S=g[1],T=g[2],C=g[3],P=E+E,p=S+S,Y=T+T,N=E*P,j=S*P,ee=S*p,G=T*P,V=T*p,W=T*Y,q=C*P,z=C*p,H=C*Y;return v[0]=1-ee-W,v[1]=j+H,v[2]=G-z,v[3]=0,v[4]=j-H,v[5]=1-N-W,v[6]=V+q,v[7]=0,v[8]=G+z,v[9]=V-q,v[10]=1-N-ee,v[11]=0,v[12]=0,v[13]=0,v[14]=0,v[15]=1,v}}}),Nl=a({"node_modules/gl-mat4/frustum.js"(pe,me){me.exports=M;function M(v,g,E,S,T,C,P){var p=1/(E-g),Y=1/(T-S),N=1/(C-P);return v[0]=C*2*p,v[1]=0,v[2]=0,v[3]=0,v[4]=0,v[5]=C*2*Y,v[6]=0,v[7]=0,v[8]=(E+g)*p,v[9]=(T+S)*Y,v[10]=(P+C)*N,v[11]=-1,v[12]=0,v[13]=0,v[14]=P*C*2*N,v[15]=0,v}}}),Gl=a({"node_modules/gl-mat4/perspective.js"(pe,me){me.exports=M;function M(v,g,E,S,T){var C=1/Math.tan(g/2),P=1/(S-T);return v[0]=C/E,v[1]=0,v[2]=0,v[3]=0,v[4]=0,v[5]=C,v[6]=0,v[7]=0,v[8]=0,v[9]=0,v[10]=(T+S)*P,v[11]=-1,v[12]=0,v[13]=0,v[14]=2*T*S*P,v[15]=0,v}}}),Mp=a({"node_modules/gl-mat4/perspectiveFromFieldOfView.js"(pe,me){me.exports=M;function M(v,g,E,S){var T=Math.tan(g.upDegrees*Math.PI/180),C=Math.tan(g.downDegrees*Math.PI/180),P=Math.tan(g.leftDegrees*Math.PI/180),p=Math.tan(g.rightDegrees*Math.PI/180),Y=2/(P+p),N=2/(T+C);return v[0]=Y,v[1]=0,v[2]=0,v[3]=0,v[4]=0,v[5]=N,v[6]=0,v[7]=0,v[8]=-((P-p)*Y*.5),v[9]=(T-C)*N*.5,v[10]=S/(E-S),v[11]=-1,v[12]=0,v[13]=0,v[14]=S*E/(E-S),v[15]=0,v}}}),_0=a({"node_modules/gl-mat4/ortho.js"(pe,me){me.exports=M;function M(v,g,E,S,T,C,P){var p=1/(g-E),Y=1/(S-T),N=1/(C-P);return v[0]=-2*p,v[1]=0,v[2]=0,v[3]=0,v[4]=0,v[5]=-2*Y,v[6]=0,v[7]=0,v[8]=0,v[9]=0,v[10]=2*N,v[11]=0,v[12]=(g+E)*p,v[13]=(T+S)*Y,v[14]=(P+C)*N,v[15]=1,v}}}),v0=a({"node_modules/gl-mat4/lookAt.js"(pe,me){var M=Ep();me.exports=v;function v(g,E,S,T){var C,P,p,Y,N,j,ee,G,V,W,q=E[0],z=E[1],H=E[2],Z=T[0],ne=T[1],te=T[2],Se=S[0],fe=S[1],ve=S[2];return Math.abs(q-Se)<1e-6&&Math.abs(z-fe)<1e-6&&Math.abs(H-ve)<1e-6?M(g):(ee=q-Se,G=z-fe,V=H-ve,W=1/Math.sqrt(ee*ee+G*G+V*V),ee*=W,G*=W,V*=W,C=ne*V-te*G,P=te*ee-Z*V,p=Z*G-ne*ee,W=Math.sqrt(C*C+P*P+p*p),W?(W=1/W,C*=W,P*=W,p*=W):(C=0,P=0,p=0),Y=G*p-V*P,N=V*C-ee*p,j=ee*P-G*C,W=Math.sqrt(Y*Y+N*N+j*j),W?(W=1/W,Y*=W,N*=W,j*=W):(Y=0,N=0,j=0),g[0]=C,g[1]=Y,g[2]=ee,g[3]=0,g[4]=P,g[5]=N,g[6]=G,g[7]=0,g[8]=p,g[9]=j,g[10]=V,g[11]=0,g[12]=-(C*q+P*z+p*H),g[13]=-(Y*q+N*z+j*H),g[14]=-(ee*q+G*z+V*H),g[15]=1,g)}}}),z0=a({"node_modules/gl-mat4/str.js"(pe,me){me.exports=M;function M(v){return"mat4("+v[0]+", "+v[1]+", "+v[2]+", "+v[3]+", "+v[4]+", "+v[5]+", "+v[6]+", "+v[7]+", "+v[8]+", "+v[9]+", "+v[10]+", "+v[11]+", "+v[12]+", "+v[13]+", "+v[14]+", "+v[15]+")"}}}),sm=a({"node_modules/gl-mat4/index.js"(pe,me){me.exports={create:Ei(),clone:Bl(),copy:Wl(),identity:Ep(),transpose:Lp(),invert:Op(),adjoint:R0(),determinant:N0(),multiply:Qp(),translate:O0(),scale:zp(),rotate:M0(),rotateX:W0(),rotateY:im(),rotateZ:F0(),fromRotation:fm(),fromRotationTranslation:cm(),fromScaling:Ap(),fromTranslation:Io(),fromXRotation:p0(),fromYRotation:a0(),fromZRotation:rm(),fromQuat:X0(),frustum:Nl(),perspective:Gl(),perspectiveFromFieldOfView:Mp(),ortho:_0(),lookAt:v0(),str:z0()}}}),Uo=a({"src/lib/matrix.js"(pe){var me=sm();pe.init2dArray=function(M,v){for(var g=new Array(M),E=0;E<M;E++)g[E]=new Array(v);return g},pe.transposeRagged=function(M){var v=0,g=M.length,E,S;for(E=0;E<g;E++)v=Math.max(v,M[E].length);var T=new Array(v);for(E=0;E<v;E++)for(T[E]=new Array(g),S=0;S<g;S++)T[E][S]=M[S][E];return T},pe.dot=function(M,v){if(!(M.length&&v.length)||M.length!==v.length)return null;var g=M.length,E,S;if(M[0].length)for(E=new Array(g),S=0;S<g;S++)E[S]=pe.dot(M[S],v);else if(v[0].length){var T=pe.transposeRagged(v);for(E=new Array(T.length),S=0;S<T.length;S++)E[S]=pe.dot(M,T[S])}else for(E=0,S=0;S<g;S++)E+=M[S]*v[S];return E},pe.translationMatrix=function(M,v){return[[1,0,M],[0,1,v],[0,0,1]]},pe.rotationMatrix=function(M){var v=M*Math.PI/180;return[[Math.cos(v),-Math.sin(v),0],[Math.sin(v),Math.cos(v),0],[0,0,1]]},pe.rotationXYMatrix=function(M,v,g){return pe.dot(pe.dot(pe.translationMatrix(v,g),pe.rotationMatrix(M)),pe.translationMatrix(-v,-g))},pe.apply3DTransform=function(M){return function(){var v=arguments,g=arguments.length===1?v[0]:[v[0],v[1],v[2]||0];return pe.dot(M,[g[0],g[1],g[2],1]).slice(0,3)}},pe.apply2DTransform=function(M){return function(){var v=arguments;v.length===3&&(v=v[0]);var g=arguments.length===1?v[0]:[v[0],v[1]];return pe.dot(M,[g[0],g[1],1]).slice(0,2)}},pe.apply2DTransform2=function(M){var v=pe.apply2DTransform(M);return function(g){return v(g.slice(0,2)).concat(v(g.slice(2,4)))}},pe.convertCssMatrix=function(M){if(M){var v=M.length;if(v===16)return M;if(v===6)return[M[0],M[1],0,0,M[2],M[3],0,0,0,0,1,0,M[4],M[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},pe.inverseTransformMatrix=function(M){var v=[];return me.invert(v,M),[[v[0],v[1],v[2],v[3]],[v[4],v[5],v[6],v[7]],[v[8],v[9],v[10],v[11]],[v[12],v[13],v[14],v[15]]]}}}),u0=a({"src/lib/dom.js"(pe,me){var M=f(),v=_e(),g=Uo(),E=sm();function S(q){var z;if(typeof q=="string"){if(z=document.getElementById(q),z===null)throw new Error("No DOM element with id '"+q+"' exists on the page.");return z}else if(q==null)throw new Error("DOM element provided is null or undefined");return q}function T(q){var z=M.select(q);return z.node()instanceof HTMLElement&&z.size()&&z.classed("js-plotly-plot")}function C(q){var z=q&&q.parentNode;z&&z.removeChild(q)}function P(q,z){p("global",q,z)}function p(q,z,H){var Z="plotly.js-style-"+q,ne=document.getElementById(Z);if(!(ne&&ne.matches(".no-inline-styles"))){ne||(ne=document.createElement("style"),ne.setAttribute("id",Z),ne.appendChild(document.createTextNode("")),document.head.appendChild(ne));var te=ne.sheet;te?te.insertRule?te.insertRule(z+"{"+H+"}",0):te.addRule?te.addRule(z,H,0):v.warn("addStyleRule failed"):v.warn("Cannot addRelatedStyleRule, probably due to strict CSP...")}}function Y(q){var z="plotly.js-style-"+q,H=document.getElementById(z);H&&C(H)}function N(q,z,H,Z,ne,te){var Se=Z.split(":"),fe=ne.split(":"),ve="data-btn-style-event-added";te||(te=document),te.querySelectorAll(q).forEach(function(xe){xe.getAttribute(ve)||(xe.addEventListener("mouseenter",function(){var re=this.querySelector(H);re&&(re.style[Se[0]]=Se[1])}),xe.addEventListener("mouseleave",function(){var re=this.querySelector(H);re&&(z&&this.matches(z)?re.style[Se[0]]=Se[1]:re.style[fe[0]]=fe[1])}),xe.setAttribute(ve,!0))})}function j(q){var z=G(q),H=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return z.forEach(function(Z){var ne=ee(Z);if(ne){var te=g.convertCssMatrix(ne);H=E.multiply(H,H,te)}}),H}function ee(q){var z=window.getComputedStyle(q,null),H=z.getPropertyValue("-webkit-transform")||z.getPropertyValue("-moz-transform")||z.getPropertyValue("-ms-transform")||z.getPropertyValue("-o-transform")||z.getPropertyValue("transform");return H==="none"?null:H.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(Z){return+Z})}function G(q){for(var z=[];V(q);)z.push(q),q=q.parentNode,typeof ShadowRoot=="function"&&q instanceof ShadowRoot&&(q=q.host);return z}function V(q){return q&&(q instanceof Element||q instanceof HTMLElement)}function W(q,z){return q&&z&&q.top===z.top&&q.left===z.left&&q.right===z.right&&q.bottom===z.bottom}me.exports={getGraphDiv:S,isPlotDiv:T,removeElement:C,addStyleRule:P,addRelatedStyleRule:p,deleteRelatedStyleRule:Y,setStyleOnHover:N,getFullTransformMatrix:j,getElementTransformMatrix:ee,getElementAndAncestors:G,equalDomRects:W}}}),x0=a({"src/plots/animation_attributes.js"(pe,me){me.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}}}),Xl=a({"src/plot_api/edit_types.js"(pe,me){var M=k().extendFlat,v=I(),g={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},E={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},S=g.flags.slice().concat(["fullReplot"]),T=E.flags.slice().concat("layoutReplot");me.exports={traces:g,layout:E,traceFlags:function(){return C(S)},layoutFlags:function(){return C(T)},update:function(Y,N){var j=N.editType;if(j&&j!=="none")for(var ee=j.split("+"),G=0;G<ee.length;G++)Y[ee[G]]=!0},overrideAll:P};function C(Y){for(var N={},j=0;j<Y.length;j++)N[Y[j]]=!1;return N}function P(Y,N,j){var ee=M({},Y);for(var G in ee){var V=ee[G];v(V)&&(ee[G]=p(V,N,j,G))}return j==="from-root"&&(ee.editType=N),ee}function p(Y,N,j,ee){if(Y.valType){var G=M({},Y);if(G.editType=N,Array.isArray(Y.items)){G.items=new Array(Y.items.length);for(var V=0;V<Y.items.length;V++)G.items[V]=p(Y.items[V],N)}return G}else return P(Y,N,ee.charAt(0)==="_"?"nested":"from-root")}}}),Bp=a({"src/components/drawing/attributes.js"(pe){pe.dash={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"},pe.pattern={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style"},path:{valType:"string",arrayOk:!0,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style"},editType:"style"}}}),L0=a({"src/constants/docs.js"(pe,me){me.exports={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"}}}),kl=a({"src/plots/template_attributes.js"(pe){var me=L0(),M=me.FORMAT_LINK,v=me.DATE_FORMAT_LINK;function g(S){var T=S&&S.supportOther;return["Variables are inserted using %{variable},",'for example "y: %{y}"'+(T?" as well as %{xother}, {%_xother}, {%_xother_}, {%xother_}. When showing info for several points, *xother* will be added to those with different x positions from the first point. An underscore before or after *(x|y)other* will add a space on that side, only when this field is shown.":"."),`Numbers are formatted using d3-format's syntax %{variable:d3-format}, for example "Price: %{y:$.2f}".`,M,"for details on the formatting syntax.",`Dates are formatted using d3-time-format's syntax %{variable|d3-time-format}, for example "Day: %{2019-01-01|%A}".`,v,"for details on the date formatting syntax."].join(" ")}pe.templateFormatStringDescription=g;function E(S){var T=S.description?" "+S.description:"",C=S.keys||[];if(C.length>0){for(var P=[],p=0;p<C.length;p++)P[p]="`"+C[p]+"`";T=T+"Finally, the template string has access to ",C.length===1?T=T+"variable "+P[0]:T=T+"variables "+P.slice(0,-1).join(", ")+" and "+P.slice(-1)+"."}return T}pe.hovertemplateAttrs=function(S,T){S=S||{},T=T||{},E(T);var C={valType:"string",dflt:"",editType:S.editType||"none"};return S.arrayOk!==!1&&(C.arrayOk=!0),C},pe.texttemplateAttrs=function(S,T){S=S||{},T=T||{},E(T);var C={valType:"string",dflt:"",editType:S.editType||"calc"};return S.arrayOk!==!1&&(C.arrayOk=!0),C},pe.shapeTexttemplateAttrs=function(S,T){S=S||{},T=T||{},S.newshape,E(T);var C={valType:"string",dflt:"",editType:S.editType||"arraydraw"};return C}}}),Np=a({"src/components/shapes/label_texttemplate.js"(pe,me){function M(H,Z){return Z?Z.d2l(H):H}function v(H,Z){return Z?Z.l2d(H):H}function g(H){return H.x0}function E(H){return H.x1}function S(H){return H.y0}function T(H){return H.y1}function C(H){return H.x0shift||0}function P(H){return H.x1shift||0}function p(H){return H.y0shift||0}function Y(H){return H.y1shift||0}function N(H,Z){return M(H.x1,Z)+P(H)-M(H.x0,Z)-C(H)}function j(H,Z,ne){return M(H.y1,ne)+Y(H)-M(H.y0,ne)-p(H)}function ee(H,Z){return Math.abs(N(H,Z))}function G(H,Z,ne){return Math.abs(j(H,Z,ne))}function V(H,Z,ne){return H.type!=="line"?void 0:Math.sqrt(Math.pow(N(H,Z),2)+Math.pow(j(H,Z,ne),2))}function W(H,Z){return v((M(H.x1,Z)+P(H)+M(H.x0,Z)+C(H))/2,Z)}function q(H,Z,ne){return v((M(H.y1,ne)+Y(H)+M(H.y0,ne)+p(H))/2,ne)}function z(H,Z,ne){return H.type!=="line"?void 0:j(H,Z,ne)/N(H,Z)}me.exports={x0:g,x1:E,y0:S,y1:T,slope:z,dx:N,dy:j,width:ee,height:G,length:V,xcenter:W,ycenter:q}}}),V0=a({"src/components/shapes/draw_newshape/attributes.js"(pe,me){var M=Xl().overrideAll,v=He(),g=B(),E=Bp().dash,S=k().extendFlat,T=kl().shapeTexttemplateAttrs,C=Np();me.exports=M({newshape:{visible:S({},v.visible,{}),showlegend:{valType:"boolean",dflt:!1},legend:S({},v.legend,{}),legendgroup:S({},v.legendgroup,{}),legendgrouptitle:{text:S({},v.legendgrouptitle.text,{}),font:g({})},legendrank:S({},v.legendrank,{}),legendwidth:S({},v.legendwidth,{}),line:{color:{valType:"color"},width:{valType:"number",min:0,dflt:4},dash:S({},E,{dflt:"solid"})},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd"},opacity:{valType:"number",min:0,max:1,dflt:1},layer:{valType:"enumerated",values:["below","above","between"],dflt:"above"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal"},name:S({},v.name,{}),label:{text:{valType:"string",dflt:""},texttemplate:T({newshape:!0},{keys:Object.keys(C)}),font:g({}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"]},textangle:{valType:"angle",dflt:"auto"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto"},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},padding:{valType:"number",dflt:3,min:0}}},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)"},opacity:{valType:"number",min:0,max:1,dflt:.5}}},"none","from-root")}}),Ke=a({"src/components/selections/draw_newselection/attributes.js"(pe,me){var M=Bp().dash,v=k().extendFlat;me.exports={newselection:{mode:{valType:"enumerated",values:["immediate","gradual"],dflt:"immediate",editType:"none"},line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:1,dflt:1,editType:"none"},dash:v({},M,{dflt:"dot",editType:"none"}),editType:"none"},editType:"none"},activeselection:{fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}}}),g0=a({"src/plots/pad_attributes.js"(pe,me){me.exports=function(M){var v=M.editType;return{t:{valType:"number",dflt:0,editType:v},r:{valType:"number",dflt:0,editType:v},b:{valType:"number",dflt:0,editType:v},l:{valType:"number",dflt:0,editType:v},editType:v}}}}),d0=a({"src/plots/layout_attributes.js"(pe,me){var M=B(),v=x0(),g=ue(),E=V0(),S=Ke(),T=g0(),C=k().extendFlat,P=M({editType:"calc"});P.family.dflt='"Open Sans", verdana, arial, sans-serif',P.size.dflt=12,P.color.dflt=g.defaultLine,me.exports={font:P,title:{text:{valType:"string",editType:"layoutstyle"},font:M({editType:"layoutstyle"}),subtitle:{text:{valType:"string",editType:"layoutstyle"},font:M({editType:"layoutstyle"}),editType:"layoutstyle"},xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:C(T({editType:"layoutstyle"}),{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},minreducedwidth:{valType:"number",min:2,dflt:64,editType:"plot"},minreducedheight:{valType:"number",min:2,dflt:64,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:g.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:g.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:g.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:E.newshape,activeshape:E.activeshape,newselection:S.newselection,activeselection:S.activeselection,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:C({},v.transition,{editType:"none"})}}}),Vl=a({"node_modules/maplibre-gl/dist/maplibre-gl.css"(){(function(){if(!document.getElementById("8431bff7cc77ea8693f8122c6e0981316b936a0a4930625e08b1512d134062bc")){var pe=document.createElement("style");pe.id="8431bff7cc77ea8693f8122c6e0981316b936a0a4930625e08b1512d134062bc",pe.textContent=`.maplibregl-map{font:12px/20px Helvetica Neue,Arial,Helvetica,sans-serif;overflow:hidden;position:relative;-webkit-tap-highlight-color:rgb(0 0 0/0)}.maplibregl-canvas{left:0;position:absolute;top:0}.maplibregl-map:fullscreen{height:100%;width:100%}.maplibregl-ctrl-group button.maplibregl-ctrl-compass{touch-action:none}.maplibregl-canvas-container.maplibregl-interactive,.maplibregl-ctrl-group button.maplibregl-ctrl-compass{cursor:grab;-webkit-user-select:none;-moz-user-select:none;user-select:none}.maplibregl-canvas-container.maplibregl-interactive.maplibregl-track-pointer{cursor:pointer}.maplibregl-canvas-container.maplibregl-interactive:active,.maplibregl-ctrl-group button.maplibregl-ctrl-compass:active{cursor:grabbing}.maplibregl-canvas-container.maplibregl-touch-zoom-rotate,.maplibregl-canvas-container.maplibregl-touch-zoom-rotate .maplibregl-canvas{touch-action:pan-x pan-y}.maplibregl-canvas-container.maplibregl-touch-drag-pan,.maplibregl-canvas-container.maplibregl-touch-drag-pan .maplibregl-canvas{touch-action:pinch-zoom}.maplibregl-canvas-container.maplibregl-touch-zoom-rotate.maplibregl-touch-drag-pan,.maplibregl-canvas-container.maplibregl-touch-zoom-rotate.maplibregl-touch-drag-pan .maplibregl-canvas{touch-action:none}.maplibregl-canvas-container.maplibregl-touch-drag-pan.maplibregl-cooperative-gestures,.maplibregl-canvas-container.maplibregl-touch-drag-pan.maplibregl-cooperative-gestures .maplibregl-canvas{touch-action:pan-x pan-y}.maplibregl-ctrl-bottom-left,.maplibregl-ctrl-bottom-right,.maplibregl-ctrl-top-left,.maplibregl-ctrl-top-right{pointer-events:none;position:absolute;z-index:2}.maplibregl-ctrl-top-left{left:0;top:0}.maplibregl-ctrl-top-right{right:0;top:0}.maplibregl-ctrl-bottom-left{bottom:0;left:0}.maplibregl-ctrl-bottom-right{bottom:0;right:0}.maplibregl-ctrl{clear:both;pointer-events:auto;transform:translate(0)}.maplibregl-ctrl-top-left .maplibregl-ctrl{float:left;margin:10px 0 0 10px}.maplibregl-ctrl-top-right .maplibregl-ctrl{float:right;margin:10px 10px 0 0}.maplibregl-ctrl-bottom-left .maplibregl-ctrl{float:left;margin:0 0 10px 10px}.maplibregl-ctrl-bottom-right .maplibregl-ctrl{float:right;margin:0 10px 10px 0}.maplibregl-ctrl-group{background:#fff;border-radius:4px}.maplibregl-ctrl-group:not(:empty){box-shadow:0 0 0 2px rgba(0,0,0,.1)}@media (forced-colors:active){.maplibregl-ctrl-group:not(:empty){box-shadow:0 0 0 2px ButtonText}}.maplibregl-ctrl-group button{background-color:transparent;border:0;box-sizing:border-box;cursor:pointer;display:block;height:29px;outline:none;padding:0;width:29px}.maplibregl-ctrl-group button+button{border-top:1px solid #ddd}.maplibregl-ctrl button .maplibregl-ctrl-icon{background-position:50%;background-repeat:no-repeat;display:block;height:100%;width:100%}@media (forced-colors:active){.maplibregl-ctrl-icon{background-color:transparent}.maplibregl-ctrl-group button+button{border-top:1px solid ButtonText}}.maplibregl-ctrl button::-moz-focus-inner{border:0;padding:0}.maplibregl-ctrl-attrib-button:focus,.maplibregl-ctrl-group button:focus{box-shadow:0 0 2px 2px #0096ff}.maplibregl-ctrl button:disabled{cursor:not-allowed}.maplibregl-ctrl button:disabled .maplibregl-ctrl-icon{opacity:.25}.maplibregl-ctrl button:not(:disabled):hover{background-color:rgb(0 0 0/5%)}.maplibregl-ctrl-group button:focus:focus-visible{box-shadow:0 0 2px 2px #0096ff}.maplibregl-ctrl-group button:focus:not(:focus-visible){box-shadow:none}.maplibregl-ctrl-group button:focus:first-child{border-radius:4px 4px 0 0}.maplibregl-ctrl-group button:focus:last-child{border-radius:0 0 4px 4px}.maplibregl-ctrl-group button:focus:only-child{border-radius:inherit}.maplibregl-ctrl button.maplibregl-ctrl-zoom-out .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23333' viewBox='0 0 29 29'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-zoom-in .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23333' viewBox='0 0 29 29'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5'/%3E%3C/svg%3E")}@media (forced-colors:active){.maplibregl-ctrl button.maplibregl-ctrl-zoom-out .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff' viewBox='0 0 29 29'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-zoom-in .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff' viewBox='0 0 29 29'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5'/%3E%3C/svg%3E")}}@media (forced-colors:active) and (prefers-color-scheme:light){.maplibregl-ctrl button.maplibregl-ctrl-zoom-out .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 29 29'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-zoom-in .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 29 29'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5'/%3E%3C/svg%3E")}}.maplibregl-ctrl button.maplibregl-ctrl-fullscreen .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23333' viewBox='0 0 29 29'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-shrink .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 29 29'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1z'/%3E%3C/svg%3E")}@media (forced-colors:active){.maplibregl-ctrl button.maplibregl-ctrl-fullscreen .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff' viewBox='0 0 29 29'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-shrink .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff' viewBox='0 0 29 29'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1z'/%3E%3C/svg%3E")}}@media (forced-colors:active) and (prefers-color-scheme:light){.maplibregl-ctrl button.maplibregl-ctrl-fullscreen .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 29 29'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-shrink .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 29 29'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1z'/%3E%3C/svg%3E")}}.maplibregl-ctrl button.maplibregl-ctrl-compass .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23333' viewBox='0 0 29 29'%3E%3Cpath d='m10.5 14 4-8 4 8z'/%3E%3Cpath fill='%23ccc' d='m10.5 16 4 8 4-8z'/%3E%3C/svg%3E")}@media (forced-colors:active){.maplibregl-ctrl button.maplibregl-ctrl-compass .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff' viewBox='0 0 29 29'%3E%3Cpath d='m10.5 14 4-8 4 8z'/%3E%3Cpath fill='%23ccc' d='m10.5 16 4 8 4-8z'/%3E%3C/svg%3E")}}@media (forced-colors:active) and (prefers-color-scheme:light){.maplibregl-ctrl button.maplibregl-ctrl-compass .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 29 29'%3E%3Cpath d='m10.5 14 4-8 4 8z'/%3E%3Cpath fill='%23ccc' d='m10.5 16 4 8 4-8z'/%3E%3C/svg%3E")}}.maplibregl-ctrl button.maplibregl-ctrl-terrain .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='22' height='22' fill='%23333' viewBox='0 0 22 22'%3E%3Cpath d='m1.754 13.406 4.453-4.851 3.09 3.09 3.281 3.277.969-.969-3.309-3.312 3.844-4.121 6.148 6.886h1.082v-.855l-7.207-8.07-4.84 5.187L6.169 6.57l-5.48 5.965v.871ZM.688 16.844h20.625v1.375H.688Zm0 0'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-terrain-enabled .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='22' height='22' fill='%2333b5e5' viewBox='0 0 22 22'%3E%3Cpath d='m1.754 13.406 4.453-4.851 3.09 3.09 3.281 3.277.969-.969-3.309-3.312 3.844-4.121 6.148 6.886h1.082v-.855l-7.207-8.07-4.84 5.187L6.169 6.57l-5.48 5.965v.871ZM.688 16.844h20.625v1.375H.688Zm0 0'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23333' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate:disabled .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23aaa' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath fill='red' d='m14 5 1 1-9 9-1-1z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-active .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%2333b5e5' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-active-error .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23e58978' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-background .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%2333b5e5' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-background-error .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23e54e33' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-waiting .maplibregl-ctrl-icon{animation:maplibregl-spin 2s linear infinite}@media (forced-colors:active){.maplibregl-ctrl button.maplibregl-ctrl-geolocate .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate:disabled .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23999' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath fill='red' d='m14 5 1 1-9 9-1-1z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-active .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%2333b5e5' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-active-error .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23e58978' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-background .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%2333b5e5' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-background-error .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23e54e33' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3C/svg%3E")}}@media (forced-colors:active) and (prefers-color-scheme:light){.maplibregl-ctrl button.maplibregl-ctrl-geolocate .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate:disabled .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23666' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath fill='red' d='m14 5 1 1-9 9-1-1z'/%3E%3C/svg%3E")}}@keyframes maplibregl-spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}a.maplibregl-ctrl-logo{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='88' height='23' fill='none'%3E%3Cpath fill='%23000' fill-opacity='.4' fill-rule='evenodd' d='M17.408 16.796h-1.827l2.501-12.095h.198l3.324 6.533.988 2.19.988-2.19 3.258-6.533h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.929 5.644h-.098l-2.914-5.644-.757-1.71-.345 1.71zm1.958-3.42-.726 3.663a1.255 1.255 0 0 1-1.232 1.011h-1.827a1.255 1.255 0 0 1-1.229-1.509l2.501-12.095a1.255 1.255 0 0 1 1.23-1.001h.197a1.25 1.25 0 0 1 1.12.685l3.19 6.273 3.125-6.263a1.25 1.25 0 0 1 1.123-.695h.181a1.255 1.255 0 0 1 1.227.991l1.443 6.71a5 5 0 0 1 .314-.787l.009-.016a4.6 4.6 0 0 1 1.777-1.887c.782-.46 1.668-.667 2.611-.667a4.6 4.6 0 0 1 1.7.32l.306.134c.21-.16.474-.256.759-.256h1.694a1.255 1.255 0 0 1 1.212.925 1.255 1.255 0 0 1 1.212-.925h1.711c.284 0 .545.094.755.252.613-.3 1.312-.45 2.075-.45 1.356 0 2.557.445 3.482 1.4q.47.48.763 1.064V4.701a1.255 1.255 0 0 1 1.255-1.255h1.86A1.255 1.255 0 0 1 54.44 4.7v9.194h2.217c.19 0 .37.043.532.118v-4.77c0-.356.147-.678.385-.906a2.42 2.42 0 0 1-.682-1.71c0-.665.267-1.253.735-1.7a2.45 2.45 0 0 1 1.722-.674 2.43 2.43 0 0 1 1.705.675q.318.302.504.683V4.7a1.255 1.255 0 0 1 1.255-1.255h1.744A1.255 1.255 0 0 1 65.812 4.7v3.335a4.8 4.8 0 0 1 1.526-.246c.938 0 1.817.214 2.59.69a4.47 4.47 0 0 1 1.67 1.743v-.98a1.255 1.255 0 0 1 1.256-1.256h1.777c.233 0 .451.064.639.174a3.4 3.4 0 0 1 1.567-.372c.346 0 .861.02 1.285.232a1.25 1.25 0 0 1 .689 1.004 4.7 4.7 0 0 1 .853-.588c.795-.44 1.675-.647 2.61-.647 1.385 0 2.65.39 3.525 1.396.836.938 1.168 2.173 1.168 3.528q-.001.515-.056 1.051a1.255 1.255 0 0 1-.947 1.09l.408.952a1.255 1.255 0 0 1-.477 1.552c-.418.268-.92.463-1.458.612-.613.171-1.304.244-2.049.244-1.06 0-2.043-.207-2.886-.698l-.015-.008c-.798-.48-1.419-1.135-1.818-1.963l-.004-.008a5.8 5.8 0 0 1-.548-2.512q0-.429.053-.843a1.3 1.3 0 0 1-.333-.086l-.166-.004c-.223 0-.426.062-.643.228-.03.024-.142.139-.142.59v3.883a1.255 1.255 0 0 1-1.256 1.256h-1.777a1.255 1.255 0 0 1-1.256-1.256V15.69l-.032.057a4.8 4.8 0 0 1-1.86 1.833 5.04 5.04 0 0 1-2.484.634 4.5 4.5 0 0 1-1.935-.424 1.25 1.25 0 0 1-.764.258h-1.71a1.255 1.255 0 0 1-1.256-1.255V7.687a2.4 2.4 0 0 1-.428.625c.253.23.412.561.412.93v7.553a1.255 1.255 0 0 1-1.256 1.255h-1.843a1.25 1.25 0 0 1-.894-.373c-.228.23-.544.373-.894.373H51.32a1.255 1.255 0 0 1-1.256-1.255v-1.251l-.061.117a4.7 4.7 0 0 1-1.782 1.884 4.77 4.77 0 0 1-2.485.67 5.6 5.6 0 0 1-1.485-.188l.009 2.764a1.255 1.255 0 0 1-1.255 1.259h-1.729a1.255 1.255 0 0 1-1.255-1.255v-3.537a1.255 1.255 0 0 1-1.167.793h-1.679a1.25 1.25 0 0 1-.77-.263 4.5 4.5 0 0 1-1.945.429c-.885 0-1.724-.21-2.495-.632l-.017-.01a5 5 0 0 1-1.081-.836 1.255 1.255 0 0 1-1.254 1.312h-1.81a1.255 1.255 0 0 1-1.228-.99l-.782-3.625-2.044 3.939a1.25 1.25 0 0 1-1.115.676h-.098a1.25 1.25 0 0 1-1.116-.68l-2.061-3.994zM35.92 16.63l.207-.114.223-.15q.493-.356.735-.785l.061-.118.033 1.332h1.678V9.242h-1.694l-.033 1.267q-.133-.329-.526-.658l-.032-.028a3.2 3.2 0 0 0-.668-.428l-.27-.12a3.3 3.3 0 0 0-1.235-.23q-1.136-.001-1.974.493a3.36 3.36 0 0 0-1.3 1.382q-.445.89-.444 2.074 0 1.2.51 2.107a3.8 3.8 0 0 0 1.382 1.381 3.9 3.9 0 0 0 1.893.477q.795 0 1.455-.33zm-2.789-5.38q-.576.675-.575 1.762 0 1.102.559 1.794.576.675 1.645.675a2.25 2.25 0 0 0 .934-.19 2.2 2.2 0 0 0 .468-.29l.178-.161a2.2 2.2 0 0 0 .397-.561q.244-.5.244-1.15v-.115q0-.708-.296-1.267l-.043-.077a2.2 2.2 0 0 0-.633-.709l-.13-.086-.047-.028a2.1 2.1 0 0 0-1.073-.285q-1.052 0-1.629.692zm2.316 2.706c.163-.17.28-.407.28-.83v-.114c0-.292-.06-.508-.15-.68a.96.96 0 0 0-.353-.389.85.85 0 0 0-.464-.127c-.4 0-.56.114-.664.239l-.01.012c-.148.174-.275.45-.275.945 0 .506.122.801.27.99.097.11.266.224.68.224.303 0 .504-.09.687-.269zm7.545 1.705a2.6 2.6 0 0 0 .331.423q.319.33.755.548l.173.074q.65.255 1.49.255 1.02 0 1.844-.493a3.45 3.45 0 0 0 1.316-1.4q.493-.904.493-2.089 0-1.909-.988-2.913-.988-1.02-2.584-1.02-.898 0-1.575.347a3 3 0 0 0-.415.262l-.199.166a3.4 3.4 0 0 0-.64.82V9.242h-1.712v11.553h1.729l-.017-5.134zm.53-1.138q.206.29.48.5l.155.11.053.034q.51.296 1.119.297 1.07 0 1.645-.675.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.435 0-.835.16a2 2 0 0 0-.284.136 2 2 0 0 0-.363.254 2.2 2.2 0 0 0-.46.569l-.082.162a2.6 2.6 0 0 0-.213 1.072v.115q0 .707.296 1.267l.135.211zm.964-.818a1.1 1.1 0 0 0 .367.385.94.94 0 0 0 .476.118c.423 0 .59-.117.687-.23.159-.194.28-.478.28-.95 0-.53-.133-.8-.266-.952l-.021-.025c-.078-.094-.231-.221-.68-.221a1 1 0 0 0-.503.135l-.012.007a.86.86 0 0 0-.335.343c-.073.133-.132.324-.132.614v.115a1.4 1.4 0 0 0 .14.66zm15.7-6.222q.347-.346.346-.856a1.05 1.05 0 0 0-.345-.79 1.18 1.18 0 0 0-.84-.329q-.51 0-.855.33a1.05 1.05 0 0 0-.346.79q0 .51.346.855.345.346.856.346.51 0 .839-.346zm4.337 9.314.033-1.332q.191.403.59.747l.098.081a4 4 0 0 0 .316.224l.223.122a3.2 3.2 0 0 0 1.44.322 3.8 3.8 0 0 0 1.875-.477 3.5 3.5 0 0 0 1.382-1.366q.527-.89.526-2.09 0-1.184-.444-2.073a3.24 3.24 0 0 0-1.283-1.399q-.823-.51-1.942-.51a3.5 3.5 0 0 0-1.527.344l-.086.043-.165.09a3 3 0 0 0-.33.214q-.432.315-.656.707a2 2 0 0 0-.099.198l.082-1.283V4.701h-1.744v12.095zm.473-2.509a2.5 2.5 0 0 0 .566.7q.117.098.245.18l.144.08a2.1 2.1 0 0 0 .975.232q1.07 0 1.645-.675.576-.69.576-1.778 0-1.102-.576-1.777-.56-.691-1.645-.692a2.2 2.2 0 0 0-1.015.235q-.22.113-.415.282l-.15.142a2.1 2.1 0 0 0-.42.594q-.223.479-.223 1.1v.115q0 .705.293 1.26zm2.616-.293c.157-.191.28-.479.28-.967 0-.51-.13-.79-.276-.961l-.021-.026c-.082-.1-.232-.225-.67-.225a.87.87 0 0 0-.681.279l-.012.011c-.154.155-.274.38-.274.807v.115c0 .285.057.499.144.669a1.1 1.1 0 0 0 .367.405c.137.082.28.123.455.123.423 0 .59-.118.686-.23zm8.266-3.013q.345-.13.724-.14l.069-.002q.493 0 .642.099l.247-1.794q-.196-.099-.717-.099a2.3 2.3 0 0 0-.545.063 2 2 0 0 0-.411.148 2.2 2.2 0 0 0-.4.249 2.5 2.5 0 0 0-.485.499 2.7 2.7 0 0 0-.32.581l-.05.137v-1.48h-1.778v7.553h1.777v-3.884q0-.546.159-.943a1.5 1.5 0 0 1 .466-.636 2.5 2.5 0 0 1 .399-.253 2 2 0 0 1 .224-.099zm9.784 2.656.05-.922q0-1.743-.856-2.698-.838-.97-2.584-.97-1.119-.001-2.007.493a3.46 3.46 0 0 0-1.4 1.382q-.493.906-.493 2.106 0 1.07.428 1.975.428.89 1.332 1.432.906.526 2.255.526.973 0 1.668-.185l.044-.012.135-.04q.613-.184.984-.421l-.542-1.267q-.3.162-.642.274l-.297.087q-.51.131-1.3.131-.954 0-1.497-.444a1.6 1.6 0 0 1-.192-.193q-.366-.44-.512-1.234l-.004-.021zm-5.427-1.256-.003.022h3.752v-.138q-.011-.727-.288-1.118a1 1 0 0 0-.156-.176q-.46-.428-1.316-.428-.986 0-1.494.604-.379.45-.494 1.234zm-27.053 2.77V4.7h-1.86v12.095h5.333V15.15zm7.103-5.908v7.553h-1.843V9.242h1.843z'/%3E%3Cpath fill='%23fff' d='m19.63 11.151-.757-1.71-.345 1.71-1.12 5.644h-1.827L18.083 4.7h.197l3.325 6.533.988 2.19.988-2.19L26.839 4.7h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.93 5.644h-.098l-2.913-5.644zm14.836 5.81q-1.02 0-1.893-.478a3.8 3.8 0 0 1-1.381-1.382q-.51-.906-.51-2.106 0-1.185.444-2.074a3.36 3.36 0 0 1 1.3-1.382q.839-.494 1.974-.494a3.3 3.3 0 0 1 1.234.231 3.3 3.3 0 0 1 .97.575q.396.33.527.659l.033-1.267h1.694v7.553H37.18l-.033-1.332q-.279.593-1.02 1.053a3.17 3.17 0 0 1-1.662.444zm.296-1.482q.938 0 1.58-.642.642-.66.642-1.711v-.115q0-.708-.296-1.267a2.2 2.2 0 0 0-.807-.872 2.1 2.1 0 0 0-1.119-.313q-1.053 0-1.629.692-.575.675-.575 1.76 0 1.103.559 1.795.577.675 1.645.675zm6.521-6.237h1.711v1.4q.906-1.597 2.83-1.597 1.596 0 2.584 1.02.988 1.005.988 2.914 0 1.185-.493 2.09a3.46 3.46 0 0 1-1.316 1.399 3.5 3.5 0 0 1-1.844.493q-.954 0-1.662-.329a2.67 2.67 0 0 1-1.086-.97l.017 5.134h-1.728zm4.048 6.22q1.07 0 1.645-.674.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.592 0-1.12.296-.51.28-.822.823-.296.527-.296 1.234v.115q0 .708.296 1.267.313.543.823.855.51.296 1.119.297z'/%3E%3Cpath fill='%23e1e3e9' d='M51.325 4.7h1.86v10.45h3.473v1.646h-5.333zm7.12 4.542h1.843v7.553h-1.843zm.905-1.415a1.16 1.16 0 0 1-.856-.346 1.17 1.17 0 0 1-.346-.856 1.05 1.05 0 0 1 .346-.79q.346-.329.856-.329.494 0 .839.33a1.05 1.05 0 0 1 .345.79 1.16 1.16 0 0 1-.345.855q-.33.346-.84.346zm7.875 9.133a3.17 3.17 0 0 1-1.662-.444q-.723-.46-1.004-1.053l-.033 1.332h-1.71V4.701h1.743v4.657l-.082 1.283q.279-.658 1.086-1.119a3.5 3.5 0 0 1 1.778-.477q1.119 0 1.942.51a3.24 3.24 0 0 1 1.283 1.4q.445.888.444 2.072 0 1.201-.526 2.09a3.5 3.5 0 0 1-1.382 1.366 3.8 3.8 0 0 1-1.876.477zm-.296-1.481q1.069 0 1.645-.675.577-.69.577-1.778 0-1.102-.577-1.776-.56-.691-1.645-.692a2.12 2.12 0 0 0-1.58.659q-.642.641-.642 1.694v.115q0 .71.296 1.267a2.4 2.4 0 0 0 .807.872 2.1 2.1 0 0 0 1.119.313zm5.927-6.237h1.777v1.481q.263-.757.856-1.217a2.14 2.14 0 0 1 1.349-.46q.527 0 .724.098l-.247 1.794q-.149-.099-.642-.099-.774 0-1.416.494-.626.493-.626 1.58v3.883h-1.777V9.242zm9.534 7.718q-1.35 0-2.255-.526-.904-.543-1.332-1.432a4.6 4.6 0 0 1-.428-1.975q0-1.2.493-2.106a3.46 3.46 0 0 1 1.4-1.382q.889-.495 2.007-.494 1.744 0 2.584.97.855.956.856 2.7 0 .444-.05.92h-5.43q.18 1.005.708 1.45.542.443 1.497.443.79 0 1.3-.131a4 4 0 0 0 .938-.362l.542 1.267q-.411.263-1.119.46-.708.198-1.711.197zm1.596-4.558q.016-1.02-.444-1.432-.46-.428-1.316-.428-1.728 0-1.991 1.86z'/%3E%3Cpath d='M5.074 15.948a.484.657 0 0 0-.486.659v1.84a.484.657 0 0 0 .486.659h4.101a.484.657 0 0 0 .486-.659v-1.84a.484.657 0 0 0-.486-.659zm3.56 1.16H5.617v.838h3.017z' style='fill:%23fff;fill-rule:evenodd;stroke-width:1.03600001'/%3E%3Cg style='stroke-width:1.12603545'%3E%3Cpath d='M-9.408-1.416c-3.833-.025-7.056 2.912-7.08 6.615-.02 3.08 1.653 4.832 3.107 6.268.903.892 1.721 1.74 2.32 2.902l-.525-.004c-.543-.003-.992.304-1.24.639a1.87 1.87 0 0 0-.362 1.121l-.011 1.877c-.003.402.104.787.347 1.125.244.338.688.653 1.23.656l4.142.028c.542.003.99-.306 1.238-.641a1.87 1.87 0 0 0 .363-1.121l.012-1.875a1.87 1.87 0 0 0-.348-1.127c-.243-.338-.688-.653-1.23-.656l-.518-.004c.597-1.145 1.425-1.983 2.348-2.87 1.473-1.414 3.18-3.149 3.2-6.226-.016-3.59-2.923-6.684-6.993-6.707m-.006 1.1v.002c3.274.02 5.92 2.532 5.9 5.6-.017 2.706-1.39 4.026-2.863 5.44-1.034.994-2.118 2.033-2.814 3.633-.018.041-.052.055-.075.065q-.013.004-.02.01a.34.34 0 0 1-.226.084.34.34 0 0 1-.224-.086l-.092-.077c-.699-1.615-1.768-2.669-2.781-3.67-1.454-1.435-2.797-2.762-2.78-5.478.02-3.067 2.7-5.545 5.975-5.523m-.02 2.826c-1.62-.01-2.944 1.315-2.955 2.96-.01 1.646 1.295 2.988 2.916 2.999h.002c1.621.01 2.943-1.316 2.953-2.961.011-1.646-1.294-2.988-2.916-2.998m-.005 1.1c1.017.006 1.829.83 1.822 1.89s-.83 1.874-1.848 1.867c-1.018-.006-1.829-.83-1.822-1.89s.83-1.874 1.848-1.868m-2.155 11.857 4.14.025c.271.002.49.305.487.676l-.013 1.875c-.003.37-.224.67-.495.668l-4.14-.025c-.27-.002-.487-.306-.485-.676l.012-1.875c.003-.37.224-.67.494-.668' style='color:%23000;font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:medium;line-height:normal;font-family:sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-feature-settings:normal;text-indent:0;text-align:start;text-decoration:none;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:%23000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;text-anchor:start;white-space:normal;shape-padding:0;clip-rule:evenodd;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:%23000;solid-opacity:1;vector-effect:none;fill:%23000;fill-opacity:.4;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto' transform='translate(15.553 2.85)scale(.88807)'/%3E%3Cpath d='M-9.415-.316C-12.69-.338-15.37 2.14-15.39 5.207c-.017 2.716 1.326 4.041 2.78 5.477 1.013 1 2.081 2.055 2.78 3.67l.092.076a.34.34 0 0 0 .225.086.34.34 0 0 0 .227-.083l.019-.01c.022-.009.057-.024.074-.064.697-1.6 1.78-2.64 2.814-3.634 1.473-1.414 2.847-2.733 2.864-5.44.02-3.067-2.627-5.58-5.901-5.601m-.057 8.784c1.621.011 2.944-1.315 2.955-2.96.01-1.646-1.295-2.988-2.916-2.999-1.622-.01-2.945 1.315-2.955 2.96s1.295 2.989 2.916 3' style='clip-rule:evenodd;fill:%23e1e3e9;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4' transform='translate(15.553 2.85)scale(.88807)'/%3E%3Cpath d='M-11.594 15.465c-.27-.002-.492.297-.494.668l-.012 1.876c-.003.371.214.673.485.675l4.14.027c.271.002.492-.298.495-.668l.012-1.877c.003-.37-.215-.672-.485-.674z' style='clip-rule:evenodd;fill:%23fff;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4' transform='translate(15.553 2.85)scale(.88807)'/%3E%3C/g%3E%3C/svg%3E");background-repeat:no-repeat;cursor:pointer;display:block;height:23px;margin:0 0 -4px -4px;overflow:hidden;width:88px}a.maplibregl-ctrl-logo.maplibregl-compact{width:14px}@media (forced-colors:active){a.maplibregl-ctrl-logo{background-color:transparent;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='88' height='23' fill='none'%3E%3Cpath fill='%23000' fill-opacity='.4' fill-rule='evenodd' d='M17.408 16.796h-1.827l2.501-12.095h.198l3.324 6.533.988 2.19.988-2.19 3.258-6.533h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.929 5.644h-.098l-2.914-5.644-.757-1.71-.345 1.71zm1.958-3.42-.726 3.663a1.255 1.255 0 0 1-1.232 1.011h-1.827a1.255 1.255 0 0 1-1.229-1.509l2.501-12.095a1.255 1.255 0 0 1 1.23-1.001h.197a1.25 1.25 0 0 1 1.12.685l3.19 6.273 3.125-6.263a1.25 1.25 0 0 1 1.123-.695h.181a1.255 1.255 0 0 1 1.227.991l1.443 6.71a5 5 0 0 1 .314-.787l.009-.016a4.6 4.6 0 0 1 1.777-1.887c.782-.46 1.668-.667 2.611-.667a4.6 4.6 0 0 1 1.7.32l.306.134c.21-.16.474-.256.759-.256h1.694a1.255 1.255 0 0 1 1.212.925 1.255 1.255 0 0 1 1.212-.925h1.711c.284 0 .545.094.755.252.613-.3 1.312-.45 2.075-.45 1.356 0 2.557.445 3.482 1.4q.47.48.763 1.064V4.701a1.255 1.255 0 0 1 1.255-1.255h1.86A1.255 1.255 0 0 1 54.44 4.7v9.194h2.217c.19 0 .37.043.532.118v-4.77c0-.356.147-.678.385-.906a2.42 2.42 0 0 1-.682-1.71c0-.665.267-1.253.735-1.7a2.45 2.45 0 0 1 1.722-.674 2.43 2.43 0 0 1 1.705.675q.318.302.504.683V4.7a1.255 1.255 0 0 1 1.255-1.255h1.744A1.255 1.255 0 0 1 65.812 4.7v3.335a4.8 4.8 0 0 1 1.526-.246c.938 0 1.817.214 2.59.69a4.47 4.47 0 0 1 1.67 1.743v-.98a1.255 1.255 0 0 1 1.256-1.256h1.777c.233 0 .451.064.639.174a3.4 3.4 0 0 1 1.567-.372c.346 0 .861.02 1.285.232a1.25 1.25 0 0 1 .689 1.004 4.7 4.7 0 0 1 .853-.588c.795-.44 1.675-.647 2.61-.647 1.385 0 2.65.39 3.525 1.396.836.938 1.168 2.173 1.168 3.528q-.001.515-.056 1.051a1.255 1.255 0 0 1-.947 1.09l.408.952a1.255 1.255 0 0 1-.477 1.552c-.418.268-.92.463-1.458.612-.613.171-1.304.244-2.049.244-1.06 0-2.043-.207-2.886-.698l-.015-.008c-.798-.48-1.419-1.135-1.818-1.963l-.004-.008a5.8 5.8 0 0 1-.548-2.512q0-.429.053-.843a1.3 1.3 0 0 1-.333-.086l-.166-.004c-.223 0-.426.062-.643.228-.03.024-.142.139-.142.59v3.883a1.255 1.255 0 0 1-1.256 1.256h-1.777a1.255 1.255 0 0 1-1.256-1.256V15.69l-.032.057a4.8 4.8 0 0 1-1.86 1.833 5.04 5.04 0 0 1-2.484.634 4.5 4.5 0 0 1-1.935-.424 1.25 1.25 0 0 1-.764.258h-1.71a1.255 1.255 0 0 1-1.256-1.255V7.687a2.4 2.4 0 0 1-.428.625c.253.23.412.561.412.93v7.553a1.255 1.255 0 0 1-1.256 1.255h-1.843a1.25 1.25 0 0 1-.894-.373c-.228.23-.544.373-.894.373H51.32a1.255 1.255 0 0 1-1.256-1.255v-1.251l-.061.117a4.7 4.7 0 0 1-1.782 1.884 4.77 4.77 0 0 1-2.485.67 5.6 5.6 0 0 1-1.485-.188l.009 2.764a1.255 1.255 0 0 1-1.255 1.259h-1.729a1.255 1.255 0 0 1-1.255-1.255v-3.537a1.255 1.255 0 0 1-1.167.793h-1.679a1.25 1.25 0 0 1-.77-.263 4.5 4.5 0 0 1-1.945.429c-.885 0-1.724-.21-2.495-.632l-.017-.01a5 5 0 0 1-1.081-.836 1.255 1.255 0 0 1-1.254 1.312h-1.81a1.255 1.255 0 0 1-1.228-.99l-.782-3.625-2.044 3.939a1.25 1.25 0 0 1-1.115.676h-.098a1.25 1.25 0 0 1-1.116-.68l-2.061-3.994zM35.92 16.63l.207-.114.223-.15q.493-.356.735-.785l.061-.118.033 1.332h1.678V9.242h-1.694l-.033 1.267q-.133-.329-.526-.658l-.032-.028a3.2 3.2 0 0 0-.668-.428l-.27-.12a3.3 3.3 0 0 0-1.235-.23q-1.136-.001-1.974.493a3.36 3.36 0 0 0-1.3 1.382q-.445.89-.444 2.074 0 1.2.51 2.107a3.8 3.8 0 0 0 1.382 1.381 3.9 3.9 0 0 0 1.893.477q.795 0 1.455-.33zm-2.789-5.38q-.576.675-.575 1.762 0 1.102.559 1.794.576.675 1.645.675a2.25 2.25 0 0 0 .934-.19 2.2 2.2 0 0 0 .468-.29l.178-.161a2.2 2.2 0 0 0 .397-.561q.244-.5.244-1.15v-.115q0-.708-.296-1.267l-.043-.077a2.2 2.2 0 0 0-.633-.709l-.13-.086-.047-.028a2.1 2.1 0 0 0-1.073-.285q-1.052 0-1.629.692zm2.316 2.706c.163-.17.28-.407.28-.83v-.114c0-.292-.06-.508-.15-.68a.96.96 0 0 0-.353-.389.85.85 0 0 0-.464-.127c-.4 0-.56.114-.664.239l-.01.012c-.148.174-.275.45-.275.945 0 .506.122.801.27.99.097.11.266.224.68.224.303 0 .504-.09.687-.269zm7.545 1.705a2.6 2.6 0 0 0 .331.423q.319.33.755.548l.173.074q.65.255 1.49.255 1.02 0 1.844-.493a3.45 3.45 0 0 0 1.316-1.4q.493-.904.493-2.089 0-1.909-.988-2.913-.988-1.02-2.584-1.02-.898 0-1.575.347a3 3 0 0 0-.415.262l-.199.166a3.4 3.4 0 0 0-.64.82V9.242h-1.712v11.553h1.729l-.017-5.134zm.53-1.138q.206.29.48.5l.155.11.053.034q.51.296 1.119.297 1.07 0 1.645-.675.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.435 0-.835.16a2 2 0 0 0-.284.136 2 2 0 0 0-.363.254 2.2 2.2 0 0 0-.46.569l-.082.162a2.6 2.6 0 0 0-.213 1.072v.115q0 .707.296 1.267l.135.211zm.964-.818a1.1 1.1 0 0 0 .367.385.94.94 0 0 0 .476.118c.423 0 .59-.117.687-.23.159-.194.28-.478.28-.95 0-.53-.133-.8-.266-.952l-.021-.025c-.078-.094-.231-.221-.68-.221a1 1 0 0 0-.503.135l-.012.007a.86.86 0 0 0-.335.343c-.073.133-.132.324-.132.614v.115a1.4 1.4 0 0 0 .14.66zm15.7-6.222q.347-.346.346-.856a1.05 1.05 0 0 0-.345-.79 1.18 1.18 0 0 0-.84-.329q-.51 0-.855.33a1.05 1.05 0 0 0-.346.79q0 .51.346.855.345.346.856.346.51 0 .839-.346zm4.337 9.314.033-1.332q.191.403.59.747l.098.081a4 4 0 0 0 .316.224l.223.122a3.2 3.2 0 0 0 1.44.322 3.8 3.8 0 0 0 1.875-.477 3.5 3.5 0 0 0 1.382-1.366q.527-.89.526-2.09 0-1.184-.444-2.073a3.24 3.24 0 0 0-1.283-1.399q-.823-.51-1.942-.51a3.5 3.5 0 0 0-1.527.344l-.086.043-.165.09a3 3 0 0 0-.33.214q-.432.315-.656.707a2 2 0 0 0-.099.198l.082-1.283V4.701h-1.744v12.095zm.473-2.509a2.5 2.5 0 0 0 .566.7q.117.098.245.18l.144.08a2.1 2.1 0 0 0 .975.232q1.07 0 1.645-.675.576-.69.576-1.778 0-1.102-.576-1.777-.56-.691-1.645-.692a2.2 2.2 0 0 0-1.015.235q-.22.113-.415.282l-.15.142a2.1 2.1 0 0 0-.42.594q-.223.479-.223 1.1v.115q0 .705.293 1.26zm2.616-.293c.157-.191.28-.479.28-.967 0-.51-.13-.79-.276-.961l-.021-.026c-.082-.1-.232-.225-.67-.225a.87.87 0 0 0-.681.279l-.012.011c-.154.155-.274.38-.274.807v.115c0 .285.057.499.144.669a1.1 1.1 0 0 0 .367.405c.137.082.28.123.455.123.423 0 .59-.118.686-.23zm8.266-3.013q.345-.13.724-.14l.069-.002q.493 0 .642.099l.247-1.794q-.196-.099-.717-.099a2.3 2.3 0 0 0-.545.063 2 2 0 0 0-.411.148 2.2 2.2 0 0 0-.4.249 2.5 2.5 0 0 0-.485.499 2.7 2.7 0 0 0-.32.581l-.05.137v-1.48h-1.778v7.553h1.777v-3.884q0-.546.159-.943a1.5 1.5 0 0 1 .466-.636 2.5 2.5 0 0 1 .399-.253 2 2 0 0 1 .224-.099zm9.784 2.656.05-.922q0-1.743-.856-2.698-.838-.97-2.584-.97-1.119-.001-2.007.493a3.46 3.46 0 0 0-1.4 1.382q-.493.906-.493 2.106 0 1.07.428 1.975.428.89 1.332 1.432.906.526 2.255.526.973 0 1.668-.185l.044-.012.135-.04q.613-.184.984-.421l-.542-1.267q-.3.162-.642.274l-.297.087q-.51.131-1.3.131-.954 0-1.497-.444a1.6 1.6 0 0 1-.192-.193q-.366-.44-.512-1.234l-.004-.021zm-5.427-1.256-.003.022h3.752v-.138q-.011-.727-.288-1.118a1 1 0 0 0-.156-.176q-.46-.428-1.316-.428-.986 0-1.494.604-.379.45-.494 1.234zm-27.053 2.77V4.7h-1.86v12.095h5.333V15.15zm7.103-5.908v7.553h-1.843V9.242h1.843z'/%3E%3Cpath fill='%23fff' d='m19.63 11.151-.757-1.71-.345 1.71-1.12 5.644h-1.827L18.083 4.7h.197l3.325 6.533.988 2.19.988-2.19L26.839 4.7h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.93 5.644h-.098l-2.913-5.644zm14.836 5.81q-1.02 0-1.893-.478a3.8 3.8 0 0 1-1.381-1.382q-.51-.906-.51-2.106 0-1.185.444-2.074a3.36 3.36 0 0 1 1.3-1.382q.839-.494 1.974-.494a3.3 3.3 0 0 1 1.234.231 3.3 3.3 0 0 1 .97.575q.396.33.527.659l.033-1.267h1.694v7.553H37.18l-.033-1.332q-.279.593-1.02 1.053a3.17 3.17 0 0 1-1.662.444zm.296-1.482q.938 0 1.58-.642.642-.66.642-1.711v-.115q0-.708-.296-1.267a2.2 2.2 0 0 0-.807-.872 2.1 2.1 0 0 0-1.119-.313q-1.053 0-1.629.692-.575.675-.575 1.76 0 1.103.559 1.795.577.675 1.645.675zm6.521-6.237h1.711v1.4q.906-1.597 2.83-1.597 1.596 0 2.584 1.02.988 1.005.988 2.914 0 1.185-.493 2.09a3.46 3.46 0 0 1-1.316 1.399 3.5 3.5 0 0 1-1.844.493q-.954 0-1.662-.329a2.67 2.67 0 0 1-1.086-.97l.017 5.134h-1.728zm4.048 6.22q1.07 0 1.645-.674.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.592 0-1.12.296-.51.28-.822.823-.296.527-.296 1.234v.115q0 .708.296 1.267.313.543.823.855.51.296 1.119.297z'/%3E%3Cpath fill='%23e1e3e9' d='M51.325 4.7h1.86v10.45h3.473v1.646h-5.333zm7.12 4.542h1.843v7.553h-1.843zm.905-1.415a1.16 1.16 0 0 1-.856-.346 1.17 1.17 0 0 1-.346-.856 1.05 1.05 0 0 1 .346-.79q.346-.329.856-.329.494 0 .839.33a1.05 1.05 0 0 1 .345.79 1.16 1.16 0 0 1-.345.855q-.33.346-.84.346zm7.875 9.133a3.17 3.17 0 0 1-1.662-.444q-.723-.46-1.004-1.053l-.033 1.332h-1.71V4.701h1.743v4.657l-.082 1.283q.279-.658 1.086-1.119a3.5 3.5 0 0 1 1.778-.477q1.119 0 1.942.51a3.24 3.24 0 0 1 1.283 1.4q.445.888.444 2.072 0 1.201-.526 2.09a3.5 3.5 0 0 1-1.382 1.366 3.8 3.8 0 0 1-1.876.477zm-.296-1.481q1.069 0 1.645-.675.577-.69.577-1.778 0-1.102-.577-1.776-.56-.691-1.645-.692a2.12 2.12 0 0 0-1.58.659q-.642.641-.642 1.694v.115q0 .71.296 1.267a2.4 2.4 0 0 0 .807.872 2.1 2.1 0 0 0 1.119.313zm5.927-6.237h1.777v1.481q.263-.757.856-1.217a2.14 2.14 0 0 1 1.349-.46q.527 0 .724.098l-.247 1.794q-.149-.099-.642-.099-.774 0-1.416.494-.626.493-.626 1.58v3.883h-1.777V9.242zm9.534 7.718q-1.35 0-2.255-.526-.904-.543-1.332-1.432a4.6 4.6 0 0 1-.428-1.975q0-1.2.493-2.106a3.46 3.46 0 0 1 1.4-1.382q.889-.495 2.007-.494 1.744 0 2.584.97.855.956.856 2.7 0 .444-.05.92h-5.43q.18 1.005.708 1.45.542.443 1.497.443.79 0 1.3-.131a4 4 0 0 0 .938-.362l.542 1.267q-.411.263-1.119.46-.708.198-1.711.197zm1.596-4.558q.016-1.02-.444-1.432-.46-.428-1.316-.428-1.728 0-1.991 1.86z'/%3E%3Cpath d='M5.074 15.948a.484.657 0 0 0-.486.659v1.84a.484.657 0 0 0 .486.659h4.101a.484.657 0 0 0 .486-.659v-1.84a.484.657 0 0 0-.486-.659zm3.56 1.16H5.617v.838h3.017z' style='fill:%23fff;fill-rule:evenodd;stroke-width:1.03600001'/%3E%3Cg style='stroke-width:1.12603545'%3E%3Cpath d='M-9.408-1.416c-3.833-.025-7.056 2.912-7.08 6.615-.02 3.08 1.653 4.832 3.107 6.268.903.892 1.721 1.74 2.32 2.902l-.525-.004c-.543-.003-.992.304-1.24.639a1.87 1.87 0 0 0-.362 1.121l-.011 1.877c-.003.402.104.787.347 1.125.244.338.688.653 1.23.656l4.142.028c.542.003.99-.306 1.238-.641a1.87 1.87 0 0 0 .363-1.121l.012-1.875a1.87 1.87 0 0 0-.348-1.127c-.243-.338-.688-.653-1.23-.656l-.518-.004c.597-1.145 1.425-1.983 2.348-2.87 1.473-1.414 3.18-3.149 3.2-6.226-.016-3.59-2.923-6.684-6.993-6.707m-.006 1.1v.002c3.274.02 5.92 2.532 5.9 5.6-.017 2.706-1.39 4.026-2.863 5.44-1.034.994-2.118 2.033-2.814 3.633-.018.041-.052.055-.075.065q-.013.004-.02.01a.34.34 0 0 1-.226.084.34.34 0 0 1-.224-.086l-.092-.077c-.699-1.615-1.768-2.669-2.781-3.67-1.454-1.435-2.797-2.762-2.78-5.478.02-3.067 2.7-5.545 5.975-5.523m-.02 2.826c-1.62-.01-2.944 1.315-2.955 2.96-.01 1.646 1.295 2.988 2.916 2.999h.002c1.621.01 2.943-1.316 2.953-2.961.011-1.646-1.294-2.988-2.916-2.998m-.005 1.1c1.017.006 1.829.83 1.822 1.89s-.83 1.874-1.848 1.867c-1.018-.006-1.829-.83-1.822-1.89s.83-1.874 1.848-1.868m-2.155 11.857 4.14.025c.271.002.49.305.487.676l-.013 1.875c-.003.37-.224.67-.495.668l-4.14-.025c-.27-.002-.487-.306-.485-.676l.012-1.875c.003-.37.224-.67.494-.668' style='color:%23000;font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:medium;line-height:normal;font-family:sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-feature-settings:normal;text-indent:0;text-align:start;text-decoration:none;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:%23000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;text-anchor:start;white-space:normal;shape-padding:0;clip-rule:evenodd;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:%23000;solid-opacity:1;vector-effect:none;fill:%23000;fill-opacity:.4;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto' transform='translate(15.553 2.85)scale(.88807)'/%3E%3Cpath d='M-9.415-.316C-12.69-.338-15.37 2.14-15.39 5.207c-.017 2.716 1.326 4.041 2.78 5.477 1.013 1 2.081 2.055 2.78 3.67l.092.076a.34.34 0 0 0 .225.086.34.34 0 0 0 .227-.083l.019-.01c.022-.009.057-.024.074-.064.697-1.6 1.78-2.64 2.814-3.634 1.473-1.414 2.847-2.733 2.864-5.44.02-3.067-2.627-5.58-5.901-5.601m-.057 8.784c1.621.011 2.944-1.315 2.955-2.96.01-1.646-1.295-2.988-2.916-2.999-1.622-.01-2.945 1.315-2.955 2.96s1.295 2.989 2.916 3' style='clip-rule:evenodd;fill:%23e1e3e9;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4' transform='translate(15.553 2.85)scale(.88807)'/%3E%3Cpath d='M-11.594 15.465c-.27-.002-.492.297-.494.668l-.012 1.876c-.003.371.214.673.485.675l4.14.027c.271.002.492-.298.495-.668l.012-1.877c.003-.37-.215-.672-.485-.674z' style='clip-rule:evenodd;fill:%23fff;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4' transform='translate(15.553 2.85)scale(.88807)'/%3E%3C/g%3E%3C/svg%3E")}}@media (forced-colors:active) and (prefers-color-scheme:light){a.maplibregl-ctrl-logo{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='88' height='23' fill='none'%3E%3Cpath fill='%23000' fill-opacity='.4' fill-rule='evenodd' d='M17.408 16.796h-1.827l2.501-12.095h.198l3.324 6.533.988 2.19.988-2.19 3.258-6.533h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.929 5.644h-.098l-2.914-5.644-.757-1.71-.345 1.71zm1.958-3.42-.726 3.663a1.255 1.255 0 0 1-1.232 1.011h-1.827a1.255 1.255 0 0 1-1.229-1.509l2.501-12.095a1.255 1.255 0 0 1 1.23-1.001h.197a1.25 1.25 0 0 1 1.12.685l3.19 6.273 3.125-6.263a1.25 1.25 0 0 1 1.123-.695h.181a1.255 1.255 0 0 1 1.227.991l1.443 6.71a5 5 0 0 1 .314-.787l.009-.016a4.6 4.6 0 0 1 1.777-1.887c.782-.46 1.668-.667 2.611-.667a4.6 4.6 0 0 1 1.7.32l.306.134c.21-.16.474-.256.759-.256h1.694a1.255 1.255 0 0 1 1.212.925 1.255 1.255 0 0 1 1.212-.925h1.711c.284 0 .545.094.755.252.613-.3 1.312-.45 2.075-.45 1.356 0 2.557.445 3.482 1.4q.47.48.763 1.064V4.701a1.255 1.255 0 0 1 1.255-1.255h1.86A1.255 1.255 0 0 1 54.44 4.7v9.194h2.217c.19 0 .37.043.532.118v-4.77c0-.356.147-.678.385-.906a2.42 2.42 0 0 1-.682-1.71c0-.665.267-1.253.735-1.7a2.45 2.45 0 0 1 1.722-.674 2.43 2.43 0 0 1 1.705.675q.318.302.504.683V4.7a1.255 1.255 0 0 1 1.255-1.255h1.744A1.255 1.255 0 0 1 65.812 4.7v3.335a4.8 4.8 0 0 1 1.526-.246c.938 0 1.817.214 2.59.69a4.47 4.47 0 0 1 1.67 1.743v-.98a1.255 1.255 0 0 1 1.256-1.256h1.777c.233 0 .451.064.639.174a3.4 3.4 0 0 1 1.567-.372c.346 0 .861.02 1.285.232a1.25 1.25 0 0 1 .689 1.004 4.7 4.7 0 0 1 .853-.588c.795-.44 1.675-.647 2.61-.647 1.385 0 2.65.39 3.525 1.396.836.938 1.168 2.173 1.168 3.528q-.001.515-.056 1.051a1.255 1.255 0 0 1-.947 1.09l.408.952a1.255 1.255 0 0 1-.477 1.552c-.418.268-.92.463-1.458.612-.613.171-1.304.244-2.049.244-1.06 0-2.043-.207-2.886-.698l-.015-.008c-.798-.48-1.419-1.135-1.818-1.963l-.004-.008a5.8 5.8 0 0 1-.548-2.512q0-.429.053-.843a1.3 1.3 0 0 1-.333-.086l-.166-.004c-.223 0-.426.062-.643.228-.03.024-.142.139-.142.59v3.883a1.255 1.255 0 0 1-1.256 1.256h-1.777a1.255 1.255 0 0 1-1.256-1.256V15.69l-.032.057a4.8 4.8 0 0 1-1.86 1.833 5.04 5.04 0 0 1-2.484.634 4.5 4.5 0 0 1-1.935-.424 1.25 1.25 0 0 1-.764.258h-1.71a1.255 1.255 0 0 1-1.256-1.255V7.687a2.4 2.4 0 0 1-.428.625c.253.23.412.561.412.93v7.553a1.255 1.255 0 0 1-1.256 1.255h-1.843a1.25 1.25 0 0 1-.894-.373c-.228.23-.544.373-.894.373H51.32a1.255 1.255 0 0 1-1.256-1.255v-1.251l-.061.117a4.7 4.7 0 0 1-1.782 1.884 4.77 4.77 0 0 1-2.485.67 5.6 5.6 0 0 1-1.485-.188l.009 2.764a1.255 1.255 0 0 1-1.255 1.259h-1.729a1.255 1.255 0 0 1-1.255-1.255v-3.537a1.255 1.255 0 0 1-1.167.793h-1.679a1.25 1.25 0 0 1-.77-.263 4.5 4.5 0 0 1-1.945.429c-.885 0-1.724-.21-2.495-.632l-.017-.01a5 5 0 0 1-1.081-.836 1.255 1.255 0 0 1-1.254 1.312h-1.81a1.255 1.255 0 0 1-1.228-.99l-.782-3.625-2.044 3.939a1.25 1.25 0 0 1-1.115.676h-.098a1.25 1.25 0 0 1-1.116-.68l-2.061-3.994zM35.92 16.63l.207-.114.223-.15q.493-.356.735-.785l.061-.118.033 1.332h1.678V9.242h-1.694l-.033 1.267q-.133-.329-.526-.658l-.032-.028a3.2 3.2 0 0 0-.668-.428l-.27-.12a3.3 3.3 0 0 0-1.235-.23q-1.136-.001-1.974.493a3.36 3.36 0 0 0-1.3 1.382q-.445.89-.444 2.074 0 1.2.51 2.107a3.8 3.8 0 0 0 1.382 1.381 3.9 3.9 0 0 0 1.893.477q.795 0 1.455-.33zm-2.789-5.38q-.576.675-.575 1.762 0 1.102.559 1.794.576.675 1.645.675a2.25 2.25 0 0 0 .934-.19 2.2 2.2 0 0 0 .468-.29l.178-.161a2.2 2.2 0 0 0 .397-.561q.244-.5.244-1.15v-.115q0-.708-.296-1.267l-.043-.077a2.2 2.2 0 0 0-.633-.709l-.13-.086-.047-.028a2.1 2.1 0 0 0-1.073-.285q-1.052 0-1.629.692zm2.316 2.706c.163-.17.28-.407.28-.83v-.114c0-.292-.06-.508-.15-.68a.96.96 0 0 0-.353-.389.85.85 0 0 0-.464-.127c-.4 0-.56.114-.664.239l-.01.012c-.148.174-.275.45-.275.945 0 .506.122.801.27.99.097.11.266.224.68.224.303 0 .504-.09.687-.269zm7.545 1.705a2.6 2.6 0 0 0 .331.423q.319.33.755.548l.173.074q.65.255 1.49.255 1.02 0 1.844-.493a3.45 3.45 0 0 0 1.316-1.4q.493-.904.493-2.089 0-1.909-.988-2.913-.988-1.02-2.584-1.02-.898 0-1.575.347a3 3 0 0 0-.415.262l-.199.166a3.4 3.4 0 0 0-.64.82V9.242h-1.712v11.553h1.729l-.017-5.134zm.53-1.138q.206.29.48.5l.155.11.053.034q.51.296 1.119.297 1.07 0 1.645-.675.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.435 0-.835.16a2 2 0 0 0-.284.136 2 2 0 0 0-.363.254 2.2 2.2 0 0 0-.46.569l-.082.162a2.6 2.6 0 0 0-.213 1.072v.115q0 .707.296 1.267l.135.211zm.964-.818a1.1 1.1 0 0 0 .367.385.94.94 0 0 0 .476.118c.423 0 .59-.117.687-.23.159-.194.28-.478.28-.95 0-.53-.133-.8-.266-.952l-.021-.025c-.078-.094-.231-.221-.68-.221a1 1 0 0 0-.503.135l-.012.007a.86.86 0 0 0-.335.343c-.073.133-.132.324-.132.614v.115a1.4 1.4 0 0 0 .14.66zm15.7-6.222q.347-.346.346-.856a1.05 1.05 0 0 0-.345-.79 1.18 1.18 0 0 0-.84-.329q-.51 0-.855.33a1.05 1.05 0 0 0-.346.79q0 .51.346.855.345.346.856.346.51 0 .839-.346zm4.337 9.314.033-1.332q.191.403.59.747l.098.081a4 4 0 0 0 .316.224l.223.122a3.2 3.2 0 0 0 1.44.322 3.8 3.8 0 0 0 1.875-.477 3.5 3.5 0 0 0 1.382-1.366q.527-.89.526-2.09 0-1.184-.444-2.073a3.24 3.24 0 0 0-1.283-1.399q-.823-.51-1.942-.51a3.5 3.5 0 0 0-1.527.344l-.086.043-.165.09a3 3 0 0 0-.33.214q-.432.315-.656.707a2 2 0 0 0-.099.198l.082-1.283V4.701h-1.744v12.095zm.473-2.509a2.5 2.5 0 0 0 .566.7q.117.098.245.18l.144.08a2.1 2.1 0 0 0 .975.232q1.07 0 1.645-.675.576-.69.576-1.778 0-1.102-.576-1.777-.56-.691-1.645-.692a2.2 2.2 0 0 0-1.015.235q-.22.113-.415.282l-.15.142a2.1 2.1 0 0 0-.42.594q-.223.479-.223 1.1v.115q0 .705.293 1.26zm2.616-.293c.157-.191.28-.479.28-.967 0-.51-.13-.79-.276-.961l-.021-.026c-.082-.1-.232-.225-.67-.225a.87.87 0 0 0-.681.279l-.012.011c-.154.155-.274.38-.274.807v.115c0 .285.057.499.144.669a1.1 1.1 0 0 0 .367.405c.137.082.28.123.455.123.423 0 .59-.118.686-.23zm8.266-3.013q.345-.13.724-.14l.069-.002q.493 0 .642.099l.247-1.794q-.196-.099-.717-.099a2.3 2.3 0 0 0-.545.063 2 2 0 0 0-.411.148 2.2 2.2 0 0 0-.4.249 2.5 2.5 0 0 0-.485.499 2.7 2.7 0 0 0-.32.581l-.05.137v-1.48h-1.778v7.553h1.777v-3.884q0-.546.159-.943a1.5 1.5 0 0 1 .466-.636 2.5 2.5 0 0 1 .399-.253 2 2 0 0 1 .224-.099zm9.784 2.656.05-.922q0-1.743-.856-2.698-.838-.97-2.584-.97-1.119-.001-2.007.493a3.46 3.46 0 0 0-1.4 1.382q-.493.906-.493 2.106 0 1.07.428 1.975.428.89 1.332 1.432.906.526 2.255.526.973 0 1.668-.185l.044-.012.135-.04q.613-.184.984-.421l-.542-1.267q-.3.162-.642.274l-.297.087q-.51.131-1.3.131-.954 0-1.497-.444a1.6 1.6 0 0 1-.192-.193q-.366-.44-.512-1.234l-.004-.021zm-5.427-1.256-.003.022h3.752v-.138q-.011-.727-.288-1.118a1 1 0 0 0-.156-.176q-.46-.428-1.316-.428-.986 0-1.494.604-.379.45-.494 1.234zm-27.053 2.77V4.7h-1.86v12.095h5.333V15.15zm7.103-5.908v7.553h-1.843V9.242h1.843z'/%3E%3Cpath fill='%23fff' d='m19.63 11.151-.757-1.71-.345 1.71-1.12 5.644h-1.827L18.083 4.7h.197l3.325 6.533.988 2.19.988-2.19L26.839 4.7h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.93 5.644h-.098l-2.913-5.644zm14.836 5.81q-1.02 0-1.893-.478a3.8 3.8 0 0 1-1.381-1.382q-.51-.906-.51-2.106 0-1.185.444-2.074a3.36 3.36 0 0 1 1.3-1.382q.839-.494 1.974-.494a3.3 3.3 0 0 1 1.234.231 3.3 3.3 0 0 1 .97.575q.396.33.527.659l.033-1.267h1.694v7.553H37.18l-.033-1.332q-.279.593-1.02 1.053a3.17 3.17 0 0 1-1.662.444zm.296-1.482q.938 0 1.58-.642.642-.66.642-1.711v-.115q0-.708-.296-1.267a2.2 2.2 0 0 0-.807-.872 2.1 2.1 0 0 0-1.119-.313q-1.053 0-1.629.692-.575.675-.575 1.76 0 1.103.559 1.795.577.675 1.645.675zm6.521-6.237h1.711v1.4q.906-1.597 2.83-1.597 1.596 0 2.584 1.02.988 1.005.988 2.914 0 1.185-.493 2.09a3.46 3.46 0 0 1-1.316 1.399 3.5 3.5 0 0 1-1.844.493q-.954 0-1.662-.329a2.67 2.67 0 0 1-1.086-.97l.017 5.134h-1.728zm4.048 6.22q1.07 0 1.645-.674.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.592 0-1.12.296-.51.28-.822.823-.296.527-.296 1.234v.115q0 .708.296 1.267.313.543.823.855.51.296 1.119.297z'/%3E%3Cpath fill='%23e1e3e9' d='M51.325 4.7h1.86v10.45h3.473v1.646h-5.333zm7.12 4.542h1.843v7.553h-1.843zm.905-1.415a1.16 1.16 0 0 1-.856-.346 1.17 1.17 0 0 1-.346-.856 1.05 1.05 0 0 1 .346-.79q.346-.329.856-.329.494 0 .839.33a1.05 1.05 0 0 1 .345.79 1.16 1.16 0 0 1-.345.855q-.33.346-.84.346zm7.875 9.133a3.17 3.17 0 0 1-1.662-.444q-.723-.46-1.004-1.053l-.033 1.332h-1.71V4.701h1.743v4.657l-.082 1.283q.279-.658 1.086-1.119a3.5 3.5 0 0 1 1.778-.477q1.119 0 1.942.51a3.24 3.24 0 0 1 1.283 1.4q.445.888.444 2.072 0 1.201-.526 2.09a3.5 3.5 0 0 1-1.382 1.366 3.8 3.8 0 0 1-1.876.477zm-.296-1.481q1.069 0 1.645-.675.577-.69.577-1.778 0-1.102-.577-1.776-.56-.691-1.645-.692a2.12 2.12 0 0 0-1.58.659q-.642.641-.642 1.694v.115q0 .71.296 1.267a2.4 2.4 0 0 0 .807.872 2.1 2.1 0 0 0 1.119.313zm5.927-6.237h1.777v1.481q.263-.757.856-1.217a2.14 2.14 0 0 1 1.349-.46q.527 0 .724.098l-.247 1.794q-.149-.099-.642-.099-.774 0-1.416.494-.626.493-.626 1.58v3.883h-1.777V9.242zm9.534 7.718q-1.35 0-2.255-.526-.904-.543-1.332-1.432a4.6 4.6 0 0 1-.428-1.975q0-1.2.493-2.106a3.46 3.46 0 0 1 1.4-1.382q.889-.495 2.007-.494 1.744 0 2.584.97.855.956.856 2.7 0 .444-.05.92h-5.43q.18 1.005.708 1.45.542.443 1.497.443.79 0 1.3-.131a4 4 0 0 0 .938-.362l.542 1.267q-.411.263-1.119.46-.708.198-1.711.197zm1.596-4.558q.016-1.02-.444-1.432-.46-.428-1.316-.428-1.728 0-1.991 1.86z'/%3E%3Cpath d='M5.074 15.948a.484.657 0 0 0-.486.659v1.84a.484.657 0 0 0 .486.659h4.101a.484.657 0 0 0 .486-.659v-1.84a.484.657 0 0 0-.486-.659zm3.56 1.16H5.617v.838h3.017z' style='fill:%23fff;fill-rule:evenodd;stroke-width:1.03600001'/%3E%3Cg style='stroke-width:1.12603545'%3E%3Cpath d='M-9.408-1.416c-3.833-.025-7.056 2.912-7.08 6.615-.02 3.08 1.653 4.832 3.107 6.268.903.892 1.721 1.74 2.32 2.902l-.525-.004c-.543-.003-.992.304-1.24.639a1.87 1.87 0 0 0-.362 1.121l-.011 1.877c-.003.402.104.787.347 1.125.244.338.688.653 1.23.656l4.142.028c.542.003.99-.306 1.238-.641a1.87 1.87 0 0 0 .363-1.121l.012-1.875a1.87 1.87 0 0 0-.348-1.127c-.243-.338-.688-.653-1.23-.656l-.518-.004c.597-1.145 1.425-1.983 2.348-2.87 1.473-1.414 3.18-3.149 3.2-6.226-.016-3.59-2.923-6.684-6.993-6.707m-.006 1.1v.002c3.274.02 5.92 2.532 5.9 5.6-.017 2.706-1.39 4.026-2.863 5.44-1.034.994-2.118 2.033-2.814 3.633-.018.041-.052.055-.075.065q-.013.004-.02.01a.34.34 0 0 1-.226.084.34.34 0 0 1-.224-.086l-.092-.077c-.699-1.615-1.768-2.669-2.781-3.67-1.454-1.435-2.797-2.762-2.78-5.478.02-3.067 2.7-5.545 5.975-5.523m-.02 2.826c-1.62-.01-2.944 1.315-2.955 2.96-.01 1.646 1.295 2.988 2.916 2.999h.002c1.621.01 2.943-1.316 2.953-2.961.011-1.646-1.294-2.988-2.916-2.998m-.005 1.1c1.017.006 1.829.83 1.822 1.89s-.83 1.874-1.848 1.867c-1.018-.006-1.829-.83-1.822-1.89s.83-1.874 1.848-1.868m-2.155 11.857 4.14.025c.271.002.49.305.487.676l-.013 1.875c-.003.37-.224.67-.495.668l-4.14-.025c-.27-.002-.487-.306-.485-.676l.012-1.875c.003-.37.224-.67.494-.668' style='color:%23000;font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:medium;line-height:normal;font-family:sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-feature-settings:normal;text-indent:0;text-align:start;text-decoration:none;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:%23000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;text-anchor:start;white-space:normal;shape-padding:0;clip-rule:evenodd;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:%23000;solid-opacity:1;vector-effect:none;fill:%23000;fill-opacity:.4;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto' transform='translate(15.553 2.85)scale(.88807)'/%3E%3Cpath d='M-9.415-.316C-12.69-.338-15.37 2.14-15.39 5.207c-.017 2.716 1.326 4.041 2.78 5.477 1.013 1 2.081 2.055 2.78 3.67l.092.076a.34.34 0 0 0 .225.086.34.34 0 0 0 .227-.083l.019-.01c.022-.009.057-.024.074-.064.697-1.6 1.78-2.64 2.814-3.634 1.473-1.414 2.847-2.733 2.864-5.44.02-3.067-2.627-5.58-5.901-5.601m-.057 8.784c1.621.011 2.944-1.315 2.955-2.96.01-1.646-1.295-2.988-2.916-2.999-1.622-.01-2.945 1.315-2.955 2.96s1.295 2.989 2.916 3' style='clip-rule:evenodd;fill:%23e1e3e9;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4' transform='translate(15.553 2.85)scale(.88807)'/%3E%3Cpath d='M-11.594 15.465c-.27-.002-.492.297-.494.668l-.012 1.876c-.003.371.214.673.485.675l4.14.027c.271.002.492-.298.495-.668l.012-1.877c.003-.37-.215-.672-.485-.674z' style='clip-rule:evenodd;fill:%23fff;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4' transform='translate(15.553 2.85)scale(.88807)'/%3E%3C/g%3E%3C/svg%3E")}}.maplibregl-ctrl.maplibregl-ctrl-attrib{background-color:hsla(0,0%,100%,.5);margin:0;padding:0 5px}@media screen{.maplibregl-ctrl-attrib.maplibregl-compact{background-color:#fff;border-radius:12px;box-sizing:content-box;color:#000;margin:10px;min-height:20px;padding:2px 24px 2px 0;position:relative}.maplibregl-ctrl-attrib.maplibregl-compact-show{padding:2px 28px 2px 8px;visibility:visible}.maplibregl-ctrl-bottom-left>.maplibregl-ctrl-attrib.maplibregl-compact-show,.maplibregl-ctrl-top-left>.maplibregl-ctrl-attrib.maplibregl-compact-show{border-radius:12px;padding:2px 8px 2px 28px}.maplibregl-ctrl-attrib.maplibregl-compact .maplibregl-ctrl-attrib-inner{display:none}.maplibregl-ctrl-attrib-button{background-color:hsla(0,0%,100%,.5);background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' fill-rule='evenodd' viewBox='0 0 20 20'%3E%3Cpath d='M4 10a6 6 0 1 0 12 0 6 6 0 1 0-12 0m5-3a1 1 0 1 0 2 0 1 1 0 1 0-2 0m0 3a1 1 0 1 1 2 0v3a1 1 0 1 1-2 0'/%3E%3C/svg%3E");border:0;border-radius:12px;box-sizing:border-box;cursor:pointer;display:none;height:24px;outline:none;position:absolute;right:0;top:0;width:24px}.maplibregl-ctrl-attrib summary.maplibregl-ctrl-attrib-button{-webkit-appearance:none;-moz-appearance:none;appearance:none;list-style:none}.maplibregl-ctrl-attrib summary.maplibregl-ctrl-attrib-button::-webkit-details-marker{display:none}.maplibregl-ctrl-bottom-left .maplibregl-ctrl-attrib-button,.maplibregl-ctrl-top-left .maplibregl-ctrl-attrib-button{left:0}.maplibregl-ctrl-attrib.maplibregl-compact .maplibregl-ctrl-attrib-button,.maplibregl-ctrl-attrib.maplibregl-compact-show .maplibregl-ctrl-attrib-inner{display:block}.maplibregl-ctrl-attrib.maplibregl-compact-show .maplibregl-ctrl-attrib-button{background-color:rgb(0 0 0/5%)}.maplibregl-ctrl-bottom-right>.maplibregl-ctrl-attrib.maplibregl-compact:after{bottom:0;right:0}.maplibregl-ctrl-top-right>.maplibregl-ctrl-attrib.maplibregl-compact:after{right:0;top:0}.maplibregl-ctrl-top-left>.maplibregl-ctrl-attrib.maplibregl-compact:after{left:0;top:0}.maplibregl-ctrl-bottom-left>.maplibregl-ctrl-attrib.maplibregl-compact:after{bottom:0;left:0}}@media screen and (forced-colors:active){.maplibregl-ctrl-attrib.maplibregl-compact:after{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' fill='%23fff' fill-rule='evenodd' viewBox='0 0 20 20'%3E%3Cpath d='M4 10a6 6 0 1 0 12 0 6 6 0 1 0-12 0m5-3a1 1 0 1 0 2 0 1 1 0 1 0-2 0m0 3a1 1 0 1 1 2 0v3a1 1 0 1 1-2 0'/%3E%3C/svg%3E")}}@media screen and (forced-colors:active) and (prefers-color-scheme:light){.maplibregl-ctrl-attrib.maplibregl-compact:after{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' fill-rule='evenodd' viewBox='0 0 20 20'%3E%3Cpath d='M4 10a6 6 0 1 0 12 0 6 6 0 1 0-12 0m5-3a1 1 0 1 0 2 0 1 1 0 1 0-2 0m0 3a1 1 0 1 1 2 0v3a1 1 0 1 1-2 0'/%3E%3C/svg%3E")}}.maplibregl-ctrl-attrib a{color:rgba(0,0,0,.75);text-decoration:none}.maplibregl-ctrl-attrib a:hover{color:inherit;text-decoration:underline}.maplibregl-attrib-empty{display:none}.maplibregl-ctrl-scale{background-color:hsla(0,0%,100%,.75);border:2px solid #333;border-top:#333;box-sizing:border-box;color:#333;font-size:10px;padding:0 5px}.maplibregl-popup{display:flex;left:0;pointer-events:none;position:absolute;top:0;will-change:transform}.maplibregl-popup-anchor-top,.maplibregl-popup-anchor-top-left,.maplibregl-popup-anchor-top-right{flex-direction:column}.maplibregl-popup-anchor-bottom,.maplibregl-popup-anchor-bottom-left,.maplibregl-popup-anchor-bottom-right{flex-direction:column-reverse}.maplibregl-popup-anchor-left{flex-direction:row}.maplibregl-popup-anchor-right{flex-direction:row-reverse}.maplibregl-popup-tip{border:10px solid transparent;height:0;width:0;z-index:1}.maplibregl-popup-anchor-top .maplibregl-popup-tip{align-self:center;border-bottom-color:#fff;border-top:none}.maplibregl-popup-anchor-top-left .maplibregl-popup-tip{align-self:flex-start;border-bottom-color:#fff;border-left:none;border-top:none}.maplibregl-popup-anchor-top-right .maplibregl-popup-tip{align-self:flex-end;border-bottom-color:#fff;border-right:none;border-top:none}.maplibregl-popup-anchor-bottom .maplibregl-popup-tip{align-self:center;border-bottom:none;border-top-color:#fff}.maplibregl-popup-anchor-bottom-left .maplibregl-popup-tip{align-self:flex-start;border-bottom:none;border-left:none;border-top-color:#fff}.maplibregl-popup-anchor-bottom-right .maplibregl-popup-tip{align-self:flex-end;border-bottom:none;border-right:none;border-top-color:#fff}.maplibregl-popup-anchor-left .maplibregl-popup-tip{align-self:center;border-left:none;border-right-color:#fff}.maplibregl-popup-anchor-right .maplibregl-popup-tip{align-self:center;border-left-color:#fff;border-right:none}.maplibregl-popup-close-button{background-color:transparent;border:0;border-radius:0 3px 0 0;cursor:pointer;position:absolute;right:0;top:0}.maplibregl-popup-close-button:hover{background-color:rgb(0 0 0/5%)}.maplibregl-popup-content{background:#fff;border-radius:3px;box-shadow:0 1px 2px rgba(0,0,0,.1);padding:15px 10px;pointer-events:auto;position:relative}.maplibregl-popup-anchor-top-left .maplibregl-popup-content{border-top-left-radius:0}.maplibregl-popup-anchor-top-right .maplibregl-popup-content{border-top-right-radius:0}.maplibregl-popup-anchor-bottom-left .maplibregl-popup-content{border-bottom-left-radius:0}.maplibregl-popup-anchor-bottom-right .maplibregl-popup-content{border-bottom-right-radius:0}.maplibregl-popup-track-pointer{display:none}.maplibregl-popup-track-pointer *{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.maplibregl-map:hover .maplibregl-popup-track-pointer{display:flex}.maplibregl-map:active .maplibregl-popup-track-pointer{display:none}.maplibregl-marker{left:0;position:absolute;top:0;transition:opacity .2s;will-change:transform}.maplibregl-user-location-dot,.maplibregl-user-location-dot:before{background-color:#1da1f2;border-radius:50%;height:15px;width:15px}.maplibregl-user-location-dot:before{animation:maplibregl-user-location-dot-pulse 2s infinite;content:"";position:absolute}.maplibregl-user-location-dot:after{border:2px solid #fff;border-radius:50%;box-shadow:0 0 3px rgba(0,0,0,.35);box-sizing:border-box;content:"";height:19px;left:-2px;position:absolute;top:-2px;width:19px}@keyframes maplibregl-user-location-dot-pulse{0%{opacity:1;transform:scale(1)}70%{opacity:0;transform:scale(3)}to{opacity:0;transform:scale(1)}}.maplibregl-user-location-dot-stale{background-color:#aaa}.maplibregl-user-location-dot-stale:after{display:none}.maplibregl-user-location-accuracy-circle{background-color:#1da1f233;border-radius:100%;height:1px;width:1px}.maplibregl-crosshair,.maplibregl-crosshair .maplibregl-interactive,.maplibregl-crosshair .maplibregl-interactive:active{cursor:crosshair}.maplibregl-boxzoom{background:#fff;border:2px dotted #202020;height:0;left:0;opacity:.5;position:absolute;top:0;width:0}.maplibregl-cooperative-gesture-screen{align-items:center;background:rgba(0,0,0,.4);color:#fff;display:flex;font-size:1.4em;inset:0;justify-content:center;line-height:1.2;opacity:0;padding:1rem;pointer-events:none;position:absolute;transition:opacity 1s ease 1s;z-index:99999}.maplibregl-cooperative-gesture-screen.maplibregl-show{opacity:1;transition:opacity .05s}.maplibregl-cooperative-gesture-screen .maplibregl-mobile-message{display:none}@media (hover:none),(width <= 480px){.maplibregl-cooperative-gesture-screen .maplibregl-desktop-message{display:none}.maplibregl-cooperative-gesture-screen .maplibregl-mobile-message{display:block}}.maplibregl-pseudo-fullscreen{height:100%!important;left:0!important;position:fixed!important;top:0!important;width:100%!important;z-index:99999}`,document.head.appendChild(pe)}})()}}),jp=a({"src/registry.js"(pe){var me=_e(),M=pr(),v=_s(),g=I(),E=u0().addStyleRule,S=k(),T=He(),C=d0(),P=S.extendFlat,p=S.extendDeepAll;pe.modules={},pe.allCategories={},pe.allTypes=[],pe.subplotsRegistry={},pe.componentsRegistry={},pe.layoutArrayContainers=[],pe.layoutArrayRegexes=[],pe.traceLayoutAttributes={},pe.localeRegistry={},pe.apiMethodRegistry={},pe.collectableSubplotTypes=null,pe.register=function(Z){if(pe.collectableSubplotTypes=null,Z)Z&&!Array.isArray(Z)&&(Z=[Z]);else throw new Error("No argument passed to Plotly.register.");for(var ne=0;ne<Z.length;ne++){var te=Z[ne];if(!te)throw new Error("Invalid module was attempted to be registered!");switch(te.moduleType){case"trace":Y(te);break;case"transform":ee(te);break;case"component":j(te);break;case"locale":G(te);break;case"apiMethod":var Se=te.name;pe.apiMethodRegistry[Se]=te.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},pe.getModule=function(H){var Z=pe.modules[z(H)];return Z?Z._module:!1},pe.traceIs=function(H,Z){if(H=z(H),H==="various")return!1;var ne=pe.modules[H];return ne||(H&&me.log("Unrecognized trace type "+H+"."),ne=pe.modules[T.type.dflt]),!!ne.categories[Z]},pe.getComponentMethod=function(H,Z){var ne=pe.componentsRegistry[H];return ne&&ne[Z]||M},pe.call=function(){var H=arguments[0],Z=[].slice.call(arguments,1);return pe.apiMethodRegistry[H].apply(null,Z)};function Y(H){var Z=H.name,ne=H.categories,te=H.meta;if(pe.modules[Z]){me.log("Type "+Z+" already registered");return}pe.subplotsRegistry[H.basePlotModule.name]||N(H.basePlotModule);for(var Se={},fe=0;fe<ne.length;fe++)Se[ne[fe]]=!0,pe.allCategories[ne[fe]]=!0;pe.modules[Z]={_module:H,categories:Se},te&&Object.keys(te).length&&(pe.modules[Z].meta=te),pe.allTypes.push(Z);for(var ve in pe.componentsRegistry)W(ve,Z);H.layoutAttributes&&P(pe.traceLayoutAttributes,H.layoutAttributes);var xe=H.basePlotModule,re=xe.name;if(re==="mapbox"){var de=xe.constants.styleRules;for(var be in de)E(".js-plotly-plot .plotly .mapboxgl-"+be,de[be])}re==="map"&&Vl(),(re==="geo"||re==="mapbox"||re==="map")&&window.PlotlyGeoAssets===void 0&&(window.PlotlyGeoAssets={topojson:{}})}function N(H){var Z=H.name;if(pe.subplotsRegistry[Z]){me.log("Plot type "+Z+" already registered.");return}V(H),pe.subplotsRegistry[Z]=H;for(var ne in pe.componentsRegistry)q(ne,H.name)}function j(H){if(typeof H.name!="string")throw new Error("Component module *name* must be a string.");var Z=H.name;pe.componentsRegistry[Z]=H,H.layoutAttributes&&(H.layoutAttributes._isLinkedToArray&&v(pe.layoutArrayContainers,Z),V(H));for(var ne in pe.modules)W(Z,ne);for(var te in pe.subplotsRegistry)q(Z,te);H.schema&&H.schema.layout&&p(C,H.schema.layout)}function ee(H){if(typeof H.name!="string")throw new Error("Transform module *name* must be a string.");var Z="Transform module "+H.name,ne=typeof H.transform=="function",te=typeof H.calcTransform=="function";if(!ne&&!te)throw new Error(Z+" is missing a *transform* or *calcTransform* method.");ne&&te&&me.log([Z+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),g(H.attributes)||me.log(Z+" registered without an *attributes* object."),typeof H.supplyDefaults!="function"&&me.log(Z+" registered without a *supplyDefaults* method.")}function G(H){var Z=H.name,ne=Z.split("-")[0],te=H.dictionary,Se=H.format,fe=te&&Object.keys(te).length,ve=Se&&Object.keys(Se).length,xe=pe.localeRegistry,re=xe[Z];if(re||(xe[Z]=re={}),ne!==Z){var de=xe[ne];de||(xe[ne]=de={}),fe&&de.dictionary===re.dictionary&&(de.dictionary=te),ve&&de.format===re.format&&(de.format=Se)}fe&&(re.dictionary=te),ve&&(re.format=Se)}function V(H){if(H.layoutAttributes){var Z=H.layoutAttributes._arrayAttrRegexps;if(Z)for(var ne=0;ne<Z.length;ne++)v(pe.layoutArrayRegexes,Z[ne])}}function W(H,Z){var ne=pe.componentsRegistry[H].schema;if(!(!ne||!ne.traces)){var te=ne.traces[Z];te&&p(pe.modules[Z]._module.attributes,te)}}function q(H,Z){var ne=pe.componentsRegistry[H].schema;if(!(!ne||!ne.subplots)){var te=pe.subplotsRegistry[Z],Se=te.layoutAttributes,fe=te.attr==="subplot"?te.name:te.attr;Array.isArray(fe)&&(fe=fe[0]);var ve=ne.subplots[fe];Se&&ve&&p(Se,ve)}}function z(H){return typeof H=="object"&&(H=H.type),H}}}),K0=a({"src/lib/dates.js"(pe){var me=h().timeFormat,M=w(),v=_e(),g=$().mod,E=A(),S=E.BADNUM,T=E.ONEDAY,C=E.ONEHOUR,P=E.ONEMIN,p=E.ONESEC,Y=E.EPOCHJD,N=jp(),j=h().utcFormat,ee=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,G=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,V=new Date().getFullYear()-70;function W(De){return De&&N.componentsRegistry.calendars&&typeof De=="string"&&De!=="gregorian"}pe.dateTick0=function(De,Ue){var he=q(De,!!Ue);if(Ue<2)return he;var Be=pe.dateTime2ms(he,De);return Be+=T*(Ue-1),pe.ms2DateTime(Be,0,De)};function q(De,Ue){return W(De)?Ue?N.getComponentMethod("calendars","CANONICAL_SUNDAY")[De]:N.getComponentMethod("calendars","CANONICAL_TICK")[De]:Ue?"2000-01-02":"2000-01-01"}pe.dfltRange=function(De){return W(De)?N.getComponentMethod("calendars","DFLTRANGE")[De]:["2000-01-01","2001-01-01"]},pe.isJSDate=function(De){return typeof De=="object"&&De!==null&&typeof De.getTime=="function"};var z,H;pe.dateTime2ms=function(De,Ue){if(pe.isJSDate(De)){var he=De.getTimezoneOffset()*P,Be=(De.getUTCMinutes()-De.getMinutes())*P+(De.getUTCSeconds()-De.getSeconds())*p+(De.getUTCMilliseconds()-De.getMilliseconds());if(Be){var Ye=3*P;he=he-Ye/2+g(Be-he+Ye/2,Ye)}return De=Number(De)-he,De>=z&&De<=H?De:S}if(typeof De!="string"&&typeof De!="number")return S;De=String(De);var et=W(Ue),Qe=De.charAt(0);et&&(Qe==="G"||Qe==="g")&&(De=De.substr(1),Ue="");var ft=et&&Ue.substr(0,7)==="chinese",mn=De.match(ft?G:ee);if(!mn)return S;var ta=mn[1],Do=mn[3]||"1",Ae=Number(mn[5]||1),ke=Number(mn[7]||0),ge=Number(mn[9]||0),Ce=Number(mn[11]||0);if(et){if(ta.length===2)return S;ta=Number(ta);var Je;try{var Re=N.getComponentMethod("calendars","getCal")(Ue);if(ft){var Q=Do.charAt(Do.length-1)==="i";Do=parseInt(Do,10),Je=Re.newDate(ta,Re.toMonthIndex(ta,Do,Q),Ae)}else Je=Re.newDate(ta,Number(Do),Ae)}catch{return S}return Je?(Je.toJD()-Y)*T+ke*C+ge*P+Ce*p:S}ta.length===2?ta=(Number(ta)+2e3-V)%100+V:ta=Number(ta),Do-=1;var ce=new Date(Date.UTC(2e3,Do,Ae,ke,ge));return ce.setUTCFullYear(ta),ce.getUTCMonth()!==Do||ce.getUTCDate()!==Ae?S:ce.getTime()+Ce*p},z=pe.MIN_MS=pe.dateTime2ms("-9999"),H=pe.MAX_MS=pe.dateTime2ms("9999-12-31 23:59:59.9999"),pe.isDateTime=function(De,Ue){return pe.dateTime2ms(De,Ue)!==S};function Z(De,Ue){return String(De+Math.pow(10,Ue)).substr(1)}var ne=90*T,te=3*C,Se=5*P;pe.ms2DateTime=function(De,Ue,he){if(typeof De!="number"||!(De>=z&&De<=H))return S;Ue||(Ue=0);var Be=Math.floor(g(De+.05,1)*10),Ye=Math.round(De-Be/10),et,Qe,ft,mn,ta,Do;if(W(he)){var Ae=Math.floor(Ye/T)+Y,ke=Math.floor(g(De,T));try{et=N.getComponentMethod("calendars","getCal")(he).fromJD(Ae).formatDate("yyyy-mm-dd")}catch{et=j("G%Y-%m-%d")(new Date(Ye))}if(et.charAt(0)==="-")for(;et.length<11;)et="-0"+et.substr(1);else for(;et.length<10;)et="0"+et;Qe=Ue<ne?Math.floor(ke/C):0,ft=Ue<ne?Math.floor(ke%C/P):0,mn=Ue<te?Math.floor(ke%P/p):0,ta=Ue<Se?ke%p*10+Be:0}else Do=new Date(Ye),et=j("%Y-%m-%d")(Do),Qe=Ue<ne?Do.getUTCHours():0,ft=Ue<ne?Do.getUTCMinutes():0,mn=Ue<te?Do.getUTCSeconds():0,ta=Ue<Se?Do.getUTCMilliseconds()*10+Be:0;return fe(et,Qe,ft,mn,ta)},pe.ms2DateTimeLocal=function(De){if(!(De>=z+T&&De<=H-T))return S;var Ue=Math.floor(g(De+.05,1)*10),he=new Date(Math.round(De-Ue/10)),Be=me("%Y-%m-%d")(he),Ye=he.getHours(),et=he.getMinutes(),Qe=he.getSeconds(),ft=he.getUTCMilliseconds()*10+Ue;return fe(Be,Ye,et,Qe,ft)};function fe(De,Ue,he,Be,Ye){if((Ue||he||Be||Ye)&&(De+=" "+Z(Ue,2)+":"+Z(he,2),(Be||Ye)&&(De+=":"+Z(Be,2),Ye))){for(var et=4;Ye%10===0;)et-=1,Ye/=10;De+="."+Z(Ye,et)}return De}pe.cleanDate=function(De,Ue,he){if(De===S)return Ue;if(pe.isJSDate(De)||typeof De=="number"&&isFinite(De)){if(W(he))return v.error("JS Dates and milliseconds are incompatible with world calendars",De),Ue;if(De=pe.ms2DateTimeLocal(+De),!De&&Ue!==void 0)return Ue}else if(!pe.isDateTime(De,he))return v.error("unrecognized date",De),Ue;return De};var ve=/%\d?f/g,xe=/%h/g,re={1:"1",2:"1",3:"2",4:"2"};function de(De,Ue,he,Be){De=De.replace(ve,function(et){var Qe=Math.min(+et.charAt(1)||6,6),ft=(Ue/1e3%1+2).toFixed(Qe).substr(2).replace(/0+$/,"")||"0";return ft});var Ye=new Date(Math.floor(Ue+.05));if(De=De.replace(xe,function(){return re[he("%q")(Ye)]}),W(Be))try{De=N.getComponentMethod("calendars","worldCalFmt")(De,Ue,Be)}catch{return"Invalid"}return he(De)(Ye)}var be=[59,59.9,59.99,59.999,59.9999];function Te(De,Ue){var he=g(De+.05,T),Be=Z(Math.floor(he/C),2)+":"+Z(g(Math.floor(he/P),60),2);if(Ue!=="M"){M(Ue)||(Ue=0);var Ye=Math.min(g(De/p,60),be[Ue]),et=(100+Ye).toFixed(Ue).substr(1);Ue>0&&(et=et.replace(/0+$/,"").replace(/[\.]$/,"")),Be+=":"+et}return Be}pe.formatDate=function(De,Ue,he,Be,Ye,et){if(Ye=W(Ye)&&Ye,!Ue)if(he==="y")Ue=et.year;else if(he==="m")Ue=et.month;else if(he==="d")Ue=et.dayMonth+`
`+et.year;else return Te(De,he)+`
`+de(et.dayMonthYear,De,Be,Ye);return de(Ue,De,Be,Ye)};var ye=3*T;pe.incrementMonth=function(De,Ue,he){he=W(he)&&he;var Be=g(De,T);if(De=Math.round(De-Be),he)try{var Ye=Math.round(De/T)+Y,et=N.getComponentMethod("calendars","getCal")(he),Qe=et.fromJD(Ye);return Ue%12?et.add(Qe,Ue,"m"):et.add(Qe,Ue/12,"y"),(Qe.toJD()-Y)*T+Be}catch{v.error("invalid ms "+De+" in calendar "+he)}var ft=new Date(De+ye);return ft.setUTCMonth(ft.getUTCMonth()+Ue)+Be-ye},pe.findExactDates=function(De,Ue){for(var he=0,Be=0,Ye=0,et=0,Qe,ft,mn=W(Ue)&&N.getComponentMethod("calendars","getCal")(Ue),ta=0;ta<De.length;ta++){if(ft=De[ta],!M(ft)){et++;continue}if(!(ft%T))if(mn)try{Qe=mn.fromJD(ft/T+Y),Qe.day()===1?Qe.month()===1?he++:Be++:Ye++}catch{}else Qe=new Date(ft),Qe.getUTCDate()===1?Qe.getUTCMonth()===0?he++:Be++:Ye++}Be+=he,Ye+=Be;var Do=De.length-et;return{exactYears:he/Do,exactMonths:Be/Do,exactDays:Ye/Do}}}}),Pm=a({"src/lib/identity.js"(pe,me){me.exports=function(v){return v}}}),Cm=a({"src/lib/search.js"(pe){var me=w(),M=_e(),v=Pm(),g=A().BADNUM,E=1e-9;pe.findBin=function(p,Y,N){if(me(Y.start))return N?Math.ceil((p-Y.start)/Y.size-E)-1:Math.floor((p-Y.start)/Y.size+E);var j=0,ee=Y.length,G=0,V=ee>1?(Y[ee-1]-Y[0])/(ee-1):1,W,q;for(V>=0?q=N?S:T:q=N?P:C,p+=V*E*(N?-1:1)*(V>=0?1:-1);j<ee&&G++<100;)W=Math.floor((j+ee)/2),q(Y[W],p)?j=W+1:ee=W;return G>90&&M.log("Long binary search..."),j-1};function S(p,Y){return p<Y}function T(p,Y){return p<=Y}function C(p,Y){return p>Y}function P(p,Y){return p>=Y}pe.sorterAsc=function(p,Y){return p-Y},pe.sorterDes=function(p,Y){return Y-p},pe.distinctVals=function(p){var Y=p.slice();Y.sort(pe.sorterAsc);var N;for(N=Y.length-1;N>-1&&Y[N]===g;N--);for(var j=Y[N]-Y[0]||1,ee=j/(N||1)/1e4,G=[],V,W=0;W<=N;W++){var q=Y[W],z=q-V;V===void 0?(G.push(q),V=q):z>ee&&(j=Math.min(j,z),G.push(q),V=q)}return{vals:G,minDiff:j}},pe.roundUp=function(p,Y,N){for(var j=0,ee=Y.length-1,G,V=0,W=N?0:1,q=N?1:0,z=N?Math.ceil:Math.floor;j<ee&&V++<100;)G=z((j+ee)/2),Y[G]<=p?j=G+W:ee=G-q;return Y[j]},pe.sort=function(p,Y){for(var N=0,j=0,ee=1;ee<p.length;ee++){var G=Y(p[ee],p[ee-1]);if(G<0?N=1:G>0&&(j=1),N&&j)return p.sort(Y)}return j?p:p.reverse()},pe.findIndexOfMin=function(p,Y){Y=Y||v;for(var N=1/0,j,ee=0;ee<p.length;ee++){var G=Y(p[ee]);G<N&&(N=G,j=ee)}return j}}}),Fm=a({"src/lib/sort_object_keys.js"(pe,me){me.exports=function(v){return Object.keys(v).sort()}}}),ev=a({"src/lib/stats.js"(pe){var me=w(),M=y().isArrayOrTypedArray;pe.aggNums=function(v,g,E,S){var T,C;if((!S||S>E.length)&&(S=E.length),me(g)||(g=!1),M(E[0])){for(C=new Array(S),T=0;T<S;T++)C[T]=pe.aggNums(v,g,E[T]);E=C}for(T=0;T<S;T++)me(g)?me(E[T])&&(g=v(+g,+E[T])):g=E[T];return g},pe.len=function(v){return pe.aggNums(function(g){return g+1},0,v)},pe.mean=function(v,g){return g||(g=pe.len(v)),pe.aggNums(function(E,S){return E+S},0,v)/g},pe.geometricMean=function(v,g){return g||(g=pe.len(v)),Math.pow(pe.aggNums(function(E,S){return E*S},1,v),1/g)},pe.midRange=function(v){if(!(v===void 0||v.length===0))return(pe.aggNums(Math.max,null,v)+pe.aggNums(Math.min,null,v))/2},pe.variance=function(v,g,E){return g||(g=pe.len(v)),me(E)||(E=pe.mean(v,g)),pe.aggNums(function(S,T){return S+Math.pow(T-E,2)},0,v)/g},pe.stdev=function(v,g,E){return Math.sqrt(pe.variance(v,g,E))},pe.median=function(v){var g=v.slice().sort();return pe.interp(g,.5)},pe.interp=function(v,g){if(!me(g))throw"n should be a finite number";if(g=g*v.length-.5,g<0)return v[0];if(g>v.length-1)return v[v.length-1];var E=g%1;return E*v[Math.ceil(g)]+(1-E)*v[Math.floor(g)]}}}),h1=a({"src/lib/angles.js"(pe,me){var M=$(),v=M.mod,g=M.modHalf,E=Math.PI,S=2*E;function T(q){return q/180*E}function C(q){return q/E*180}function P(q){return Math.abs(q[1]-q[0])>S-1e-14}function p(q,z){return g(z-q,S)}function Y(q,z){return Math.abs(p(q,z))}function N(q,z){if(P(z))return!0;var H,Z;z[0]<z[1]?(H=z[0],Z=z[1]):(H=z[1],Z=z[0]),H=v(H,S),Z=v(Z,S),H>Z&&(Z+=S);var ne=v(q,S),te=ne+S;return ne>=H&&ne<=Z||te>=H&&te<=Z}function j(q,z,H,Z){if(!N(z,Z))return!1;var ne,te;return H[0]<H[1]?(ne=H[0],te=H[1]):(ne=H[1],te=H[0]),q>=ne&&q<=te}function ee(q,z,H,Z,ne,te,Se){ne=ne||0,te=te||0;var fe=P([H,Z]),ve,xe,re,de,be;fe?(ve=0,xe=E,re=S):H<Z?(ve=H,re=Z):(ve=Z,re=H),q<z?(de=q,be=z):(de=z,be=q);function Te(he,Be){return[he*Math.cos(Be)+ne,te-he*Math.sin(Be)]}var ye=Math.abs(re-ve)<=E?0:1;function De(he,Be,Ye){return"A"+[he,he]+" "+[0,ye,Ye]+" "+Te(he,Be)}var Ue;return fe?de===null?Ue="M"+Te(be,ve)+De(be,xe,0)+De(be,re,0)+"Z":Ue="M"+Te(de,ve)+De(de,xe,0)+De(de,re,0)+"ZM"+Te(be,ve)+De(be,xe,1)+De(be,re,1)+"Z":de===null?(Ue="M"+Te(be,ve)+De(be,re,0),Se&&(Ue+="L0,0Z")):Ue="M"+Te(de,ve)+"L"+Te(be,ve)+De(be,re,0)+"L"+Te(de,re)+De(de,ve,1)+"Z",Ue}function G(q,z,H,Z,ne){return ee(null,q,z,H,Z,ne,0)}function V(q,z,H,Z,ne){return ee(null,q,z,H,Z,ne,1)}function W(q,z,H,Z,ne,te){return ee(q,z,H,Z,ne,te,1)}me.exports={deg2rad:T,rad2deg:C,angleDelta:p,angleDist:Y,isFullCircle:P,isAngleInsideSector:N,isPtInsideSector:j,pathArc:G,pathSector:V,pathAnnulus:W}}}),xv=a({"src/lib/anchor_utils.js"(pe){pe.isLeftAnchor=function(M){return M.xanchor==="left"||M.xanchor==="auto"&&M.x<=1/3},pe.isCenterAnchor=function(M){return M.xanchor==="center"||M.xanchor==="auto"&&M.x>1/3&&M.x<2/3},pe.isRightAnchor=function(M){return M.xanchor==="right"||M.xanchor==="auto"&&M.x>=2/3},pe.isTopAnchor=function(M){return M.yanchor==="top"||M.yanchor==="auto"&&M.y>=2/3},pe.isMiddleAnchor=function(M){return M.yanchor==="middle"||M.yanchor==="auto"&&M.y>1/3&&M.y<2/3},pe.isBottomAnchor=function(M){return M.yanchor==="bottom"||M.yanchor==="auto"&&M.y<=1/3}}}),gv=a({"src/lib/geometry2d.js"(pe){var me=$().mod;pe.segmentsIntersect=M;function M(T,C,P,p,Y,N,j,ee){var G=P-T,V=Y-T,W=j-Y,q=p-C,z=N-C,H=ee-N,Z=G*H-W*q;if(Z===0)return null;var ne=(V*H-W*z)/Z,te=(V*q-G*z)/Z;return te<0||te>1||ne<0||ne>1?null:{x:T+G*ne,y:C+q*ne}}pe.segmentDistance=function(C,P,p,Y,N,j,ee,G){if(M(C,P,p,Y,N,j,ee,G))return 0;var V=p-C,W=Y-P,q=ee-N,z=G-j,H=V*V+W*W,Z=q*q+z*z,ne=Math.min(v(V,W,H,N-C,j-P),v(V,W,H,ee-C,G-P),v(q,z,Z,C-N,P-j),v(q,z,Z,p-N,Y-j));return Math.sqrt(ne)};function v(T,C,P,p,Y){var N=p*T+Y*C;if(N<0)return p*p+Y*Y;if(N>P){var j=p-T,ee=Y-C;return j*j+ee*ee}else{var G=p*C-Y*T;return G*G/P}}var g,E,S;pe.getTextLocation=function(C,P,p,Y){if((C!==E||Y!==S)&&(g={},E=C,S=Y),g[p])return g[p];var N=C.getPointAtLength(me(p-Y/2,P)),j=C.getPointAtLength(me(p+Y/2,P)),ee=Math.atan((j.y-N.y)/(j.x-N.x)),G=C.getPointAtLength(me(p,P)),V=(G.x*4+N.x+j.x)/6,W=(G.y*4+N.y+j.y)/6,q={x:V,y:W,theta:ee};return g[p]=q,q},pe.clearLocationCache=function(){E=null},pe.getVisibleSegment=function(C,P,p){var Y=P.left,N=P.right,j=P.top,ee=P.bottom,G=0,V=C.getTotalLength(),W=V,q,z;function H(ne){var te=C.getPointAtLength(ne);ne===0?q=te:ne===V&&(z=te);var Se=te.x<Y?Y-te.x:te.x>N?te.x-N:0,fe=te.y<j?j-te.y:te.y>ee?te.y-ee:0;return Math.sqrt(Se*Se+fe*fe)}for(var Z=H(G);Z;){if(G+=Z+p,G>W)return;Z=H(G)}for(Z=H(W);Z;){if(W-=Z+p,G>W)return;Z=H(W)}return{min:G,max:W,len:W-G,total:V,isClosed:G===0&&W===V&&Math.abs(q.x-z.x)<.1&&Math.abs(q.y-z.y)<.1}},pe.findPointOnPath=function(C,P,p,Y){Y=Y||{};for(var N=Y.pathLength||C.getTotalLength(),j=Y.tolerance||.001,ee=Y.iterationLimit||30,G=C.getPointAtLength(0)[p]>C.getPointAtLength(N)[p]?-1:1,V=0,W=0,q=N,z,H,Z;V<ee;){if(z=(W+q)/2,H=C.getPointAtLength(z),Z=H[p]-P,Math.abs(Z)<j)return H;G*Z>0?q=z:W=z,V++}return H}}}),zv=a({"src/lib/throttle.js"(pe){var me={};pe.throttle=function(g,E,S){var T=me[g],C=Date.now();if(!T){for(var P in me)me[P].ts<C-6e4&&delete me[P];T=me[g]={ts:0,timer:null}}M(T);function p(){S(),T.ts=Date.now(),T.onDone&&(T.onDone(),T.onDone=null)}if(C>T.ts+E){p();return}T.timer=setTimeout(function(){p(),T.timer=null},E)},pe.done=function(v){var g=me[v];return!g||!g.timer?Promise.resolve():new Promise(function(E){var S=g.onDone;g.onDone=function(){S&&S(),E(),g.onDone=null}})},pe.clear=function(v){if(v)M(me[v]),delete me[v];else for(var g in me)pe.clear(g)};function M(v){v&&v.timer!==null&&(clearTimeout(v.timer),v.timer=null)}}}),a1=a({"src/lib/clear_responsive.js"(pe,me){me.exports=function(v){v._responsiveChartHandler&&(window.removeEventListener("resize",v._responsiveChartHandler),delete v._responsiveChartHandler)}}}),Jv=a({"node_modules/is-mobile/index.js"(pe,me){me.exports=E,me.exports.isMobile=E,me.exports.default=E;var M=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,v=/CrOS/,g=/android|ipad|playbook|silk/i;function E(S){S||(S={});let T=S.ua;if(!T&&typeof navigator<"u"&&(T=navigator.userAgent),T&&T.headers&&typeof T.headers["user-agent"]=="string"&&(T=T.headers["user-agent"]),typeof T!="string")return!1;let C=M.test(T)&&!v.test(T)||!!S.tablet&&g.test(T);return!C&&S.tablet&&S.featureDetect&&navigator&&navigator.maxTouchPoints>1&&T.indexOf("Macintosh")!==-1&&T.indexOf("Safari")!==-1&&(C=!0),C}}}),d1=a({"src/lib/preserve_drawing_buffer.js"(pe,me){var M=w(),v=Jv();me.exports=function(S){var T;if(S&&S.hasOwnProperty("userAgent")?T=S.userAgent:T=g(),typeof T!="string")return!0;var C=v({ua:{headers:{"user-agent":T}},tablet:!0,featureDetect:!1});if(!C)for(var P=T.split(" "),p=1;p<P.length;p++){var Y=P[p];if(Y.indexOf("Safari")!==-1)for(var N=p-1;N>-1;N--){var j=P[N];if(j.substr(0,8)==="Version/"){var ee=j.substr(8).split(".")[0];if(M(ee)&&(ee=+ee),ee>=13)return!0}}}return C};function g(){var E;return typeof navigator<"u"&&(E=navigator.userAgent),E&&E.headers&&typeof E.headers["user-agent"]=="string"&&(E=E.headers["user-agent"]),E}}}),A1=a({"src/lib/make_trace_groups.js"(pe,me){var M=f();me.exports=function(g,E,S){var T=g.selectAll("g."+S.replace(/\s/g,".")).data(E,function(P){return P[0].trace.uid});T.exit().remove(),T.enter().append("g").attr("class",S),T.order();var C=g.classed("rangeplot")?"nodeRangePlot3":"node3";return T.each(function(P){P[0][C]=M.select(this)}),T}}}),Zv=a({"src/lib/localize.js"(pe,me){var M=jp();me.exports=function(g,E){for(var S=g._context.locale,T=0;T<2;T++){for(var C=g._context.locales,P=0;P<2;P++){var p=(C[S]||{}).dictionary;if(p){var Y=p[E];if(Y)return Y}C=M.localeRegistry}var N=S.split("-")[0];if(N===S)break;S=N}return E}}}),u1=a({"src/lib/filter_unique.js"(pe,me){me.exports=function(v){for(var g={},E=[],S=0,T=0;T<v.length;T++){var C=v[T];g[C]!==1&&(g[C]=1,E[S++]=C)}return E}}}),Yp=a({"src/lib/filter_visible.js"(pe,me){me.exports=function(S){for(var T=g(S)?v:M,C=[],P=0;P<S.length;P++){var p=S[P];T(p)&&C.push(p)}return C};function M(E){return E.visible===!0}function v(E){var S=E[0].trace;return S.visible===!0&&S._length!==0}function g(E){return Array.isArray(E)&&Array.isArray(E[0])&&E[0][0]&&E[0][0].trace}}}),nm=a({"src/lib/increment.js"(pe,me){me.exports=function(v,g){if(!g)return v;var E=1/Math.abs(g),S=E>1?(E*v+E*g)/E:v+g,T=String(S).length;if(T>16){var C=String(g).length,P=String(v).length;if(T>=P+C){var p=parseFloat(S).toPrecision(12);p.indexOf("e+")===-1&&(S=+p)}}return S}}}),dm=a({"src/lib/clean_number.js"(pe,me){var M=w(),v=A().BADNUM,g=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;me.exports=function(S){return typeof S=="string"&&(S=S.replace(g,"")),M(S)?Number(S):v}}}),o0=a({"src/lib/index.js"(pe,me){var M=f(),v=h().utcFormat,g=x().format,E=w(),S=A(),T=S.FP_SAFE,C=-T,P=S.BADNUM,p=me.exports={};p.adjustFormat=function(Q){return!Q||/^\d[.]\df/.test(Q)||/[.]\d%/.test(Q)?Q:Q==="0.f"?"~f":/^\d%/.test(Q)?"~%":/^\ds/.test(Q)?"~s":!/^[~,.0$]/.test(Q)&&/[&fps]/.test(Q)?"~"+Q:Q};var Y={};p.warnBadFormat=function(Re){var Q=String(Re);Y[Q]||(Y[Q]=1,p.warn('encountered bad format: "'+Q+'"'))},p.noFormat=function(Re){return String(Re)},p.numberFormat=function(Re){var Q;try{Q=g(p.adjustFormat(Re))}catch{return p.warnBadFormat(Re),p.noFormat}return Q},p.nestedProperty=l(),p.keyedContainer=c(),p.relativeAttr=L(),p.isPlainObject=I(),p.toLogRange=R(),p.relinkPrivateKeys=F();var N=y();p.isArrayBuffer=N.isArrayBuffer,p.isTypedArray=N.isTypedArray,p.isArrayOrTypedArray=N.isArrayOrTypedArray,p.isArray1D=N.isArray1D,p.ensureArray=N.ensureArray,p.concat=N.concat,p.maxRowLength=N.maxRowLength,p.minRowLength=N.minRowLength;var j=$();p.mod=j.mod,p.modHalf=j.modHalf;var ee=it();p.valObjectMeta=ee.valObjectMeta,p.coerce=ee.coerce,p.coerce2=ee.coerce2,p.coerceFont=ee.coerceFont,p.coercePattern=ee.coercePattern,p.coerceHoverinfo=ee.coerceHoverinfo,p.coerceSelectionMarkerOpacity=ee.coerceSelectionMarkerOpacity,p.validate=ee.validate;var G=K0();p.dateTime2ms=G.dateTime2ms,p.isDateTime=G.isDateTime,p.ms2DateTime=G.ms2DateTime,p.ms2DateTimeLocal=G.ms2DateTimeLocal,p.cleanDate=G.cleanDate,p.isJSDate=G.isJSDate,p.formatDate=G.formatDate,p.incrementMonth=G.incrementMonth,p.dateTick0=G.dateTick0,p.dfltRange=G.dfltRange,p.findExactDates=G.findExactDates,p.MIN_MS=G.MIN_MS,p.MAX_MS=G.MAX_MS;var V=Cm();p.findBin=V.findBin,p.sorterAsc=V.sorterAsc,p.sorterDes=V.sorterDes,p.distinctVals=V.distinctVals,p.roundUp=V.roundUp,p.sort=V.sort,p.findIndexOfMin=V.findIndexOfMin,p.sortObjectKeys=Fm();var W=ev();p.aggNums=W.aggNums,p.len=W.len,p.mean=W.mean,p.geometricMean=W.geometricMean,p.median=W.median,p.midRange=W.midRange,p.variance=W.variance,p.stdev=W.stdev,p.interp=W.interp;var q=Uo();p.init2dArray=q.init2dArray,p.transposeRagged=q.transposeRagged,p.dot=q.dot,p.translationMatrix=q.translationMatrix,p.rotationMatrix=q.rotationMatrix,p.rotationXYMatrix=q.rotationXYMatrix,p.apply3DTransform=q.apply3DTransform,p.apply2DTransform=q.apply2DTransform,p.apply2DTransform2=q.apply2DTransform2,p.convertCssMatrix=q.convertCssMatrix,p.inverseTransformMatrix=q.inverseTransformMatrix;var z=h1();p.deg2rad=z.deg2rad,p.rad2deg=z.rad2deg,p.angleDelta=z.angleDelta,p.angleDist=z.angleDist,p.isFullCircle=z.isFullCircle,p.isAngleInsideSector=z.isAngleInsideSector,p.isPtInsideSector=z.isPtInsideSector,p.pathArc=z.pathArc,p.pathSector=z.pathSector,p.pathAnnulus=z.pathAnnulus;var H=xv();p.isLeftAnchor=H.isLeftAnchor,p.isCenterAnchor=H.isCenterAnchor,p.isRightAnchor=H.isRightAnchor,p.isTopAnchor=H.isTopAnchor,p.isMiddleAnchor=H.isMiddleAnchor,p.isBottomAnchor=H.isBottomAnchor;var Z=gv();p.segmentsIntersect=Z.segmentsIntersect,p.segmentDistance=Z.segmentDistance,p.getTextLocation=Z.getTextLocation,p.clearLocationCache=Z.clearLocationCache,p.getVisibleSegment=Z.getVisibleSegment,p.findPointOnPath=Z.findPointOnPath;var ne=k();p.extendFlat=ne.extendFlat,p.extendDeep=ne.extendDeep,p.extendDeepAll=ne.extendDeepAll,p.extendDeepNoArrays=ne.extendDeepNoArrays;var te=_e();p.log=te.log,p.warn=te.warn,p.error=te.error;var Se=Ze();p.counterRegex=Se.counter;var fe=zv();p.throttle=fe.throttle,p.throttleDone=fe.done,p.clearThrottle=fe.clear;var ve=u0();p.getGraphDiv=ve.getGraphDiv,p.isPlotDiv=ve.isPlotDiv,p.removeElement=ve.removeElement,p.addStyleRule=ve.addStyleRule,p.addRelatedStyleRule=ve.addRelatedStyleRule,p.deleteRelatedStyleRule=ve.deleteRelatedStyleRule,p.setStyleOnHover=ve.setStyleOnHover,p.getFullTransformMatrix=ve.getFullTransformMatrix,p.getElementTransformMatrix=ve.getElementTransformMatrix,p.getElementAndAncestors=ve.getElementAndAncestors,p.equalDomRects=ve.equalDomRects,p.clearResponsive=a1(),p.preserveDrawingBuffer=d1(),p.makeTraceGroups=A1(),p._=Zv(),p.notifier=Vt(),p.filterUnique=u1(),p.filterVisible=Yp(),p.pushUnique=_s(),p.increment=nm(),p.cleanNumber=dm(),p.ensureNumber=function(Q){return E(Q)?(Q=Number(Q),Q>T||Q<C?P:Q):P},p.isIndex=function(Re,Q){return Q!==void 0&&Re>=Q?!1:E(Re)&&Re>=0&&Re%1===0},p.noop=pr(),p.identity=Pm(),p.repeat=function(Re,Q){for(var ce=new Array(Q),Me=0;Me<Q;Me++)ce[Me]=Re;return ce},p.swapAttrs=function(Re,Q,ce,Me){ce||(ce="x"),Me||(Me="y");for(var Le=0;Le<Q.length;Le++){var tt=Q[Le],bt=p.nestedProperty(Re,tt.replace("?",ce)),Ct=p.nestedProperty(Re,tt.replace("?",Me)),yi=bt.get();bt.set(Ct.get()),Ct.set(yi)}},p.raiseToTop=function(Q){Q.parentNode.appendChild(Q)},p.cancelTransition=function(Re){return Re.transition().duration(0)},p.constrain=function(Re,Q,ce){return Q>ce?Math.max(ce,Math.min(Q,Re)):Math.max(Q,Math.min(ce,Re))},p.bBoxIntersect=function(Re,Q,ce){return ce=ce||0,Re.left<=Q.right+ce&&Q.left<=Re.right+ce&&Re.top<=Q.bottom+ce&&Q.top<=Re.bottom+ce},p.simpleMap=function(Re,Q,ce,Me,Le){for(var tt=Re.length,bt=new Array(tt),Ct=0;Ct<tt;Ct++)bt[Ct]=Q(Re[Ct],ce,Me,Le);return bt},p.randstr=function Re(Q,ce,Me,Le){if(Me||(Me=16),ce===void 0&&(ce=24),ce<=0)return"0";var tt=Math.log(Math.pow(2,ce))/Math.log(Me),bt="",Ct,yi,Fl;for(Ct=2;tt===1/0;Ct*=2)tt=Math.log(Math.pow(2,ce/Ct))/Math.log(Me)*Ct;var Yl=tt-Math.floor(tt);for(Ct=0;Ct<Math.floor(tt);Ct++)Fl=Math.floor(Math.random()*Me).toString(Me),bt=Fl+bt;Yl&&(yi=Math.pow(Me,Yl),Fl=Math.floor(Math.random()*yi).toString(Me),bt=Fl+bt);var qp=parseInt(bt,Me);return Q&&Q[bt]||qp!==1/0&&qp>=Math.pow(2,ce)?Le>10?(p.warn("randstr failed uniqueness"),bt):Re(Q,ce,Me,(Le||0)+1):bt},p.OptionControl=function(Re,Q){Re||(Re={}),Q||(Q="opt");var ce={};return ce.optionList=[],ce._newoption=function(Me){Me[Q]=Re,ce[Me.name]=Me,ce.optionList.push(Me)},ce["_"+Q]=Re,ce},p.smooth=function(Re,Q){if(Q=Math.round(Q)||0,Q<2)return Re;var ce=Re.length,Me=2*ce,Le=2*Q-1,tt=new Array(Le),bt=new Array(ce),Ct,yi,Fl,Yl;for(Ct=0;Ct<Le;Ct++)tt[Ct]=(1-Math.cos(Math.PI*(Ct+1)/Q))/(2*Q);for(Ct=0;Ct<ce;Ct++){for(Yl=0,yi=0;yi<Le;yi++)Fl=Ct+yi+1-Q,Fl<-ce?Fl-=Me*Math.round(Fl/Me):Fl>=Me&&(Fl-=Me*Math.floor(Fl/Me)),Fl<0?Fl=-1-Fl:Fl>=ce&&(Fl=Me-1-Fl),Yl+=Re[Fl]*tt[yi];bt[Ct]=Yl}return bt},p.syncOrAsync=function(Re,Q,ce){var Me,Le;function tt(){return p.syncOrAsync(Re,Q,ce)}for(;Re.length;)if(Le=Re.splice(0,1)[0],Me=Le(Q),Me&&Me.then)return Me.then(tt);return ce&&ce(Q)},p.stripTrailingSlash=function(Re){return Re.substr(-1)==="/"?Re.substr(0,Re.length-1):Re},p.noneOrAll=function(Re,Q,ce){if(Re){var Me=!1,Le=!0,tt,bt;for(tt=0;tt<ce.length;tt++)bt=Re[ce[tt]],bt!=null?Me=!0:Le=!1;if(Me&&!Le)for(tt=0;tt<ce.length;tt++)Re[ce[tt]]=Q[ce[tt]]}},p.mergeArray=function(Re,Q,ce,Me){var Le=typeof Me=="function";if(p.isArrayOrTypedArray(Re))for(var tt=Math.min(Re.length,Q.length),bt=0;bt<tt;bt++){var Ct=Re[bt];Q[bt][ce]=Le?Me(Ct):Ct}},p.mergeArrayCastPositive=function(Re,Q,ce){return p.mergeArray(Re,Q,ce,function(Me){var Le=+Me;return isFinite(Le)&&Le>0?Le:0})},p.fillArray=function(Re,Q,ce,Me){if(Me=Me||p.identity,p.isArrayOrTypedArray(Re))for(var Le=0;Le<Q.length;Le++)Q[Le][ce]=Me(Re[Le])},p.castOption=function(Re,Q,ce,Me){Me=Me||p.identity;var Le=p.nestedProperty(Re,ce).get();return p.isArrayOrTypedArray(Le)?Array.isArray(Q)&&p.isArrayOrTypedArray(Le[Q[0]])?Me(Le[Q[0]][Q[1]]):Me(Le[Q]):Le},p.extractOption=function(Re,Q,ce,Me){if(ce in Re)return Re[ce];var Le=p.nestedProperty(Q,Me).get();if(!Array.isArray(Le))return Le};function xe(Re){var Q={};for(var ce in Re)for(var Me=Re[ce],Le=0;Le<Me.length;Le++)Q[Me[Le]]=+ce;return Q}p.tagSelected=function(Re,Q,ce){var Me=Q.selectedpoints,Le=Q._indexToPoints,tt;Le&&(tt=xe(Le));function bt(qp){return qp!==void 0&&qp<Re.length}for(var Ct=0;Ct<Me.length;Ct++){var yi=Me[Ct];if(p.isIndex(yi)||p.isArrayOrTypedArray(yi)&&p.isIndex(yi[0])&&p.isIndex(yi[1])){var Fl=tt?tt[yi]:yi,Yl=ce?ce[Fl]:Fl;bt(Yl)&&(Re[Yl].selected=1)}}},p.selIndices2selPoints=function(Re){var Q=Re.selectedpoints,ce=Re._indexToPoints;if(ce){for(var Me=xe(ce),Le=[],tt=0;tt<Q.length;tt++){var bt=Q[tt];if(p.isIndex(bt)){var Ct=Me[bt];p.isIndex(Ct)&&Le.push(Ct)}}return Le}else return Q},p.getTargetArray=function(Re,Q){var ce=Q.target;if(typeof ce=="string"&&ce){var Me=p.nestedProperty(Re,ce).get();return p.isArrayOrTypedArray(Me)?Me:!1}else if(p.isArrayOrTypedArray(ce))return ce;return!1};function re(Re,Q,ce){var Me={};typeof Q!="object"&&(Q={});var Le=ce==="pieLike"?-1:3,tt=Object.keys(Re),bt,Ct,yi;for(bt=0;bt<tt.length;bt++)Ct=tt[bt],yi=Re[Ct],!(Ct.charAt(0)==="_"||typeof yi=="function")&&(Ct==="module"?Me[Ct]=yi:Array.isArray(yi)?Ct==="colorscale"||Le===-1?Me[Ct]=yi.slice():Me[Ct]=yi.slice(0,Le):p.isTypedArray(yi)?Le===-1?Me[Ct]=yi.subarray():Me[Ct]=yi.subarray(0,Le):yi&&typeof yi=="object"?Me[Ct]=re(Re[Ct],Q[Ct],ce):Me[Ct]=yi);for(tt=Object.keys(Q),bt=0;bt<tt.length;bt++)Ct=tt[bt],yi=Q[Ct],(typeof yi!="object"||!(Ct in Me)||typeof Me[Ct]!="object")&&(Me[Ct]=yi);return Me}p.minExtend=re,p.titleCase=function(Re){return Re.charAt(0).toUpperCase()+Re.substr(1)},p.containsAny=function(Re,Q){for(var ce=0;ce<Q.length;ce++)if(Re.indexOf(Q[ce])!==-1)return!0;return!1};var de=/Version\/[\d\.]+.*Safari/;p.isSafari=function(){return de.test(window.navigator.userAgent)};var be=/iPad|iPhone|iPod/;p.isIOS=function(){return be.test(window.navigator.userAgent)};var Te=/Macintosh.+AppleWebKit.+Gecko\)$/;p.isMacWKWebView=()=>Te.test(window.navigator.userAgent);var ye=/Firefox\/(\d+)\.\d+/;p.getFirefoxVersion=function(){var Re=ye.exec(window.navigator.userAgent);if(Re&&Re.length===2){var Q=parseInt(Re[1]);if(!isNaN(Q))return Q}return null},p.isD3Selection=function(Re){return Re instanceof M.selection},p.ensureSingle=function(Re,Q,ce,Me){var Le=Re.select(Q+(ce?"."+ce:""));if(Le.size())return Le;var tt=Re.append(Q);return ce&&tt.classed(ce,!0),Me&&tt.call(Me),tt},p.ensureSingleById=function(Re,Q,ce,Me){var Le=Re.select(Q+"#"+ce);if(Le.size())return Le;var tt=Re.append(Q).attr("id",ce);return Me&&tt.call(Me),tt},p.objectFromPath=function(Re,Q){for(var ce=Re.split("."),Me,Le=Me={},tt=0;tt<ce.length;tt++){var bt=ce[tt],Ct=null,yi=ce[tt].match(/(.*)\[([0-9]+)\]/);yi?(bt=yi[1],Ct=yi[2],Me=Me[bt]=[],tt===ce.length-1?Me[Ct]=Q:Me[Ct]={},Me=Me[Ct]):(tt===ce.length-1?Me[bt]=Q:Me[bt]={},Me=Me[bt])}return Le};var De=/^([^\[\.]+)\.(.+)?/,Ue=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;function he(Re){return Re.slice(0,2)==="__"}p.expandObjectPaths=function(Re){var Q,ce,Me,Le,tt,bt,Ct;if(typeof Re=="object"&&!Array.isArray(Re)){for(ce in Re)if(Re.hasOwnProperty(ce))if(Q=ce.match(De)){if(Le=Re[ce],Me=Q[1],he(Me))continue;delete Re[ce],Re[Me]=p.extendDeepNoArrays(Re[Me]||{},p.objectFromPath(ce,p.expandObjectPaths(Le))[Me])}else if(Q=ce.match(Ue)){if(Le=Re[ce],Me=Q[1],he(Me))continue;if(tt=parseInt(Q[2]),delete Re[ce],Re[Me]=Re[Me]||[],Q[3]===".")Ct=Q[4],bt=Re[Me][tt]=Re[Me][tt]||{},p.extendDeepNoArrays(bt,p.objectFromPath(Ct,p.expandObjectPaths(Le)));else{if(he(Me))continue;Re[Me][tt]=p.expandObjectPaths(Le)}}else{if(he(ce))continue;Re[ce]=p.expandObjectPaths(Re[ce])}}return Re},p.numSeparate=function(Re,Q,ce){if(ce||(ce=!1),typeof Q!="string"||Q.length===0)throw new Error("Separator string required for formatting!");typeof Re=="number"&&(Re=String(Re));var Me=/(\d+)(\d{3})/,Le=Q.charAt(0),tt=Q.charAt(1),bt=Re.split("."),Ct=bt[0],yi=bt.length>1?Le+bt[1]:"";if(tt&&(bt.length>1||Ct.length>4||ce))for(;Me.test(Ct);)Ct=Ct.replace(Me,"$1"+tt+"$2");return Ct+yi},p.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var Be=/^\w*$/;p.templateString=function(Re,Q){var ce={};return Re.replace(p.TEMPLATE_STRING_REGEX,function(Me,Le){var tt;return Be.test(Le)?tt=Q[Le]:(ce[Le]=ce[Le]||p.nestedProperty(Q,Le).get,tt=ce[Le](!0)),tt!==void 0?tt:""})};var Ye={max:10,count:0,name:"hovertemplate"};p.hovertemplateString=function(){return Do.apply(Ye,arguments)};var et={max:10,count:0,name:"texttemplate"};p.texttemplateString=function(){return Do.apply(et,arguments)};var Qe=/^(\S+)([\*\/])(-?\d+(\.\d+)?)$/;function ft(Re){var Q=Re.match(Qe);return Q?{key:Q[1],op:Q[2],number:Number(Q[3])}:{key:Re,op:null,number:null}}var mn={max:10,count:0,name:"texttemplate",parseMultDiv:!0};p.texttemplateStringForShapes=function(){return Do.apply(mn,arguments)};var ta=/^[:|\|]/;function Do(Re,Q,ce){var Me=this,Le=arguments;return Q||(Q={}),Re.replace(p.TEMPLATE_STRING_REGEX,function(tt,bt,Ct){var yi=bt==="xother"||bt==="yother",Fl=bt==="_xother"||bt==="_yother",Yl=bt==="_xother_"||bt==="_yother_",qp=bt==="xother_"||bt==="yother_",Fp=yi||Fl||qp||Yl,Up=bt;(Fl||Yl)&&(Up=Up.substring(1)),(qp||Yl)&&(Up=Up.substring(0,Up.length-1));var _r=null,gs=null;if(Me.parseMultDiv){var dr=ft(Up);Up=dr.key,_r=dr.op,gs=dr.number}var Lo;if(Fp){if(Lo=Q[Up],Lo===void 0)return""}else{var Cp,Hp;for(Hp=3;Hp<Le.length;Hp++)if(Cp=Le[Hp],!!Cp){if(Cp.hasOwnProperty(Up)){Lo=Cp[Up];break}if(Be.test(Up)||(Lo=p.nestedProperty(Cp,Up).get(!0)),Lo!==void 0)break}}if(Lo!==void 0&&(_r==="*"&&(Lo*=gs),_r==="/"&&(Lo/=gs)),Lo===void 0&&Me)return Me.count<Me.max&&(p.warn("Variable '"+Up+"' in "+Me.name+" could not be found!"),Lo=tt),Me.count===Me.max&&p.warn("Too many "+Me.name+" warnings - additional warnings will be suppressed"),Me.count++,tt;if(Ct){var e0;if(Ct[0]===":"&&(e0=ce?ce.numberFormat:p.numberFormat,Lo!==""&&(Lo=e0(Ct.replace(ta,""))(Lo))),Ct[0]==="|"){e0=ce?ce.timeFormat:v;var t0=p.dateTime2ms(Lo);Lo=p.formatDate(t0,Ct.replace(ta,""),!1,e0)}}else{var n0=Up+"Label";Q.hasOwnProperty(n0)&&(Lo=Q[n0])}return Fp&&(Lo="("+Lo+")",(Fl||Yl)&&(Lo=" "+Lo),(qp||Yl)&&(Lo=Lo+" ")),Lo})}var Ae=48,ke=57;p.subplotSort=function(Re,Q){for(var ce=Math.min(Re.length,Q.length)+1,Me=0,Le=0,tt=0;tt<ce;tt++){var bt=Re.charCodeAt(tt)||0,Ct=Q.charCodeAt(tt)||0,yi=bt>=Ae&&bt<=ke,Fl=Ct>=Ae&&Ct<=ke;if(yi&&(Me=10*Me+bt-Ae),Fl&&(Le=10*Le+Ct-Ae),!yi||!Fl){if(Me!==Le)return Me-Le;if(bt!==Ct)return bt-Ct}}return Le-Me};var ge=2e9;p.seedPseudoRandom=function(){ge=2e9},p.pseudoRandom=function(){var Re=ge;return ge=(69069*ge+1)%4294967296,Math.abs(ge-Re)<429496729?p.pseudoRandom():ge/4294967296},p.fillText=function(Re,Q,ce){var Me=Array.isArray(ce)?function(bt){ce.push(bt)}:function(bt){ce.text=bt},Le=p.extractOption(Re,Q,"htx","hovertext");if(p.isValidTextValue(Le))return Me(Le);var tt=p.extractOption(Re,Q,"tx","text");if(p.isValidTextValue(tt))return Me(tt)},p.isValidTextValue=function(Re){return Re||Re===0},p.formatPercent=function(Re,Q){Q=Q||0;for(var ce=(Math.round(100*Re*Math.pow(10,Q))*Math.pow(.1,Q)).toFixed(Q)+"%",Me=0;Me<Q;Me++)ce.indexOf(".")!==-1&&(ce=ce.replace("0%","%"),ce=ce.replace(".%","%"));return ce},p.isHidden=function(Re){var Q=window.getComputedStyle(Re).display;return!Q||Q==="none"},p.strTranslate=function(Re,Q){return Re||Q?"translate("+Re+","+Q+")":""},p.strRotate=function(Re){return Re?"rotate("+Re+")":""},p.strScale=function(Re){return Re!==1?"scale("+Re+")":""},p.getTextTransform=function(Re){var Q=Re.noCenter,ce=Re.textX,Me=Re.textY,Le=Re.targetX,tt=Re.targetY,bt=Re.anchorX||0,Ct=Re.anchorY||0,yi=Re.rotate,Fl=Re.scale;return Fl?Fl>1&&(Fl=1):Fl=0,p.strTranslate(Le-Fl*(ce+bt),tt-Fl*(Me+Ct))+p.strScale(Fl)+(yi?"rotate("+yi+(Q?"":" "+ce+" "+Me)+")":"")},p.setTransormAndDisplay=function(Re,Q){Re.attr("transform",p.getTextTransform(Q)),Re.style("display",Q.scale?null:"none")},p.ensureUniformFontSize=function(Re,Q){var ce=p.extendFlat({},Q);return ce.size=Math.max(Q.size,Re._fullLayout.uniformtext.minsize||0),ce},p.join2=function(Re,Q,ce){var Me=Re.length;return Me>1?Re.slice(0,-1).join(Q)+ce+Re[Me-1]:Re.join(Q)},p.bigFont=function(Re){return Math.round(1.2*Re)};var Ce=p.getFirefoxVersion(),Je=Ce!==null&&Ce<86;p.getPositionFromD3Event=function(){return Je?[M.event.layerX,M.event.layerY]:[M.event.offsetX,M.event.offsetY]}}}),pm=a({"build/plotcss.js"(){var pe=o0(),me={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X:focus-within .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-group a":"display:grid;place-content:center;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;border:none;background:rgba(0,0,0,0);","X .modebar-btn svg":"position:relative;","X .modebar-btn:focus-visible":"outline:1px solid #000;outline-offset:1px;border-radius:3px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:rgba(0,0,0,0);border:6px solid rgba(0,0,0,0);z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid rgba(0,0,0,0);border-left-color:#69738a;margin-top:8px;margin-right:-30px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(v in me)M=v.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier"),pe.addStyleRule(M,me[v]);var M,v}}),jm=a({"node_modules/is-browser/client.js"(pe,me){me.exports=!0}}),iv=a({"node_modules/has-hover/index.js"(pe,me){var M=jm(),v;typeof window.matchMedia=="function"?v=!window.matchMedia("(hover: none)").matches:v=M,me.exports=v}}),ov=a({"node_modules/events/events.js"(pe,me){var M=typeof Reflect=="object"?Reflect:null,v=M&&typeof M.apply=="function"?M.apply:function(te,Se,fe){return Function.prototype.apply.call(te,Se,fe)},g;M&&typeof M.ownKeys=="function"?g=M.ownKeys:Object.getOwnPropertySymbols?g=function(te){return Object.getOwnPropertyNames(te).concat(Object.getOwnPropertySymbols(te))}:g=function(te){return Object.getOwnPropertyNames(te)};function E(ne){console&&console.warn&&console.warn(ne)}var S=Number.isNaN||function(te){return te!==te};function T(){T.init.call(this)}me.exports=T,me.exports.once=z,T.EventEmitter=T,T.prototype._events=void 0,T.prototype._eventsCount=0,T.prototype._maxListeners=void 0;var C=10;function P(ne){if(typeof ne!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof ne)}Object.defineProperty(T,"defaultMaxListeners",{enumerable:!0,get:function(){return C},set:function(ne){if(typeof ne!="number"||ne<0||S(ne))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+ne+".");C=ne}}),T.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},T.prototype.setMaxListeners=function(te){if(typeof te!="number"||te<0||S(te))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+te+".");return this._maxListeners=te,this};function p(ne){return ne._maxListeners===void 0?T.defaultMaxListeners:ne._maxListeners}T.prototype.getMaxListeners=function(){return p(this)},T.prototype.emit=function(te){for(var Se=[],fe=1;fe<arguments.length;fe++)Se.push(arguments[fe]);var ve=te==="error",xe=this._events;if(xe!==void 0)ve=ve&&xe.error===void 0;else if(!ve)return!1;if(ve){var re;if(Se.length>0&&(re=Se[0]),re instanceof Error)throw re;var de=new Error("Unhandled error."+(re?" ("+re.message+")":""));throw de.context=re,de}var be=xe[te];if(be===void 0)return!1;if(typeof be=="function")v(be,this,Se);else for(var Te=be.length,ye=V(be,Te),fe=0;fe<Te;++fe)v(ye[fe],this,Se);return!0};function Y(ne,te,Se,fe){var ve,xe,re;if(P(Se),xe=ne._events,xe===void 0?(xe=ne._events=Object.create(null),ne._eventsCount=0):(xe.newListener!==void 0&&(ne.emit("newListener",te,Se.listener?Se.listener:Se),xe=ne._events),re=xe[te]),re===void 0)re=xe[te]=Se,++ne._eventsCount;else if(typeof re=="function"?re=xe[te]=fe?[Se,re]:[re,Se]:fe?re.unshift(Se):re.push(Se),ve=p(ne),ve>0&&re.length>ve&&!re.warned){re.warned=!0;var de=new Error("Possible EventEmitter memory leak detected. "+re.length+" "+String(te)+" listeners added. Use emitter.setMaxListeners() to increase limit");de.name="MaxListenersExceededWarning",de.emitter=ne,de.type=te,de.count=re.length,E(de)}return ne}T.prototype.addListener=function(te,Se){return Y(this,te,Se,!1)},T.prototype.on=T.prototype.addListener,T.prototype.prependListener=function(te,Se){return Y(this,te,Se,!0)};function N(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function j(ne,te,Se){var fe={fired:!1,wrapFn:void 0,target:ne,type:te,listener:Se},ve=N.bind(fe);return ve.listener=Se,fe.wrapFn=ve,ve}T.prototype.once=function(te,Se){return P(Se),this.on(te,j(this,te,Se)),this},T.prototype.prependOnceListener=function(te,Se){return P(Se),this.prependListener(te,j(this,te,Se)),this},T.prototype.removeListener=function(te,Se){var fe,ve,xe,re,de;if(P(Se),ve=this._events,ve===void 0)return this;if(fe=ve[te],fe===void 0)return this;if(fe===Se||fe.listener===Se)--this._eventsCount===0?this._events=Object.create(null):(delete ve[te],ve.removeListener&&this.emit("removeListener",te,fe.listener||Se));else if(typeof fe!="function"){for(xe=-1,re=fe.length-1;re>=0;re--)if(fe[re]===Se||fe[re].listener===Se){de=fe[re].listener,xe=re;break}if(xe<0)return this;xe===0?fe.shift():W(fe,xe),fe.length===1&&(ve[te]=fe[0]),ve.removeListener!==void 0&&this.emit("removeListener",te,de||Se)}return this},T.prototype.off=T.prototype.removeListener,T.prototype.removeAllListeners=function(te){var Se,fe,ve;if(fe=this._events,fe===void 0)return this;if(fe.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):fe[te]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete fe[te]),this;if(arguments.length===0){var xe=Object.keys(fe),re;for(ve=0;ve<xe.length;++ve)re=xe[ve],re!=="removeListener"&&this.removeAllListeners(re);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(Se=fe[te],typeof Se=="function")this.removeListener(te,Se);else if(Se!==void 0)for(ve=Se.length-1;ve>=0;ve--)this.removeListener(te,Se[ve]);return this};function ee(ne,te,Se){var fe=ne._events;if(fe===void 0)return[];var ve=fe[te];return ve===void 0?[]:typeof ve=="function"?Se?[ve.listener||ve]:[ve]:Se?q(ve):V(ve,ve.length)}T.prototype.listeners=function(te){return ee(this,te,!0)},T.prototype.rawListeners=function(te){return ee(this,te,!1)},T.listenerCount=function(ne,te){return typeof ne.listenerCount=="function"?ne.listenerCount(te):G.call(ne,te)},T.prototype.listenerCount=G;function G(ne){var te=this._events;if(te!==void 0){var Se=te[ne];if(typeof Se=="function")return 1;if(Se!==void 0)return Se.length}return 0}T.prototype.eventNames=function(){return this._eventsCount>0?g(this._events):[]};function V(ne,te){for(var Se=new Array(te),fe=0;fe<te;++fe)Se[fe]=ne[fe];return Se}function W(ne,te){for(;te+1<ne.length;te++)ne[te]=ne[te+1];ne.pop()}function q(ne){for(var te=new Array(ne.length),Se=0;Se<te.length;++Se)te[Se]=ne[Se].listener||ne[Se];return te}function z(ne,te){return new Promise(function(Se,fe){function ve(re){ne.removeListener(te,xe),fe(re)}function xe(){typeof ne.removeListener=="function"&&ne.removeListener("error",ve),Se([].slice.call(arguments))}Z(ne,te,xe,{once:!0}),te!=="error"&&H(ne,ve,{once:!0})})}function H(ne,te,Se){typeof ne.on=="function"&&Z(ne,"error",te,Se)}function Z(ne,te,Se,fe){if(typeof ne.on=="function")fe.once?ne.once(te,Se):ne.on(te,Se);else if(typeof ne.addEventListener=="function")ne.addEventListener(te,function ve(xe){fe.once&&ne.removeEventListener(te,ve),Se(xe)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof ne)}}}),dv=a({"src/lib/events.js"(pe,me){var M=ov().EventEmitter,v={init:function(g){if(g._ev instanceof M)return g;var E=new M,S=new M;return g._ev=E,g._internalEv=S,g.on=E.on.bind(E),g.once=E.once.bind(E),g.removeListener=E.removeListener.bind(E),g.removeAllListeners=E.removeAllListeners.bind(E),g._internalOn=S.on.bind(S),g._internalOnce=S.once.bind(S),g._removeInternalListener=S.removeListener.bind(S),g._removeAllInternalListeners=S.removeAllListeners.bind(S),g.emit=function(T,C){E.emit(T,C),S.emit(T,C)},typeof g.addEventListener=="function"&&g.addEventListener("wheel",()=>{},{passive:!0}),g},triggerHandler:function(g,E,S){var T,C=g._ev;if(!C)return;var P=C._events[E];if(!P)return;function p(N){if(N.listener){if(C.removeListener(E,N.listener),!N.fired)return N.fired=!0,N.listener.apply(C,[S])}else return N.apply(C,[S])}P=Array.isArray(P)?P:[P];var Y;for(Y=0;Y<P.length-1;Y++)p(P[Y]);return T=p(P[Y]),T},purge:function(g){return delete g._ev,delete g.on,delete g.once,delete g.removeListener,delete g.removeAllListeners,delete g.emit,delete g._ev,delete g._internalEv,delete g._internalOn,delete g._internalOnce,delete g._removeInternalListener,delete g._removeAllInternalListeners,g}};me.exports=v}}),cv=a({"src/lib/queue.js"(pe,me){var M=o0(),v=lt().dfltConfig;function g(S,T){for(var C=[],P,p=0;p<T.length;p++)P=T[p],P===S?C[p]=P:typeof P=="object"?C[p]=Array.isArray(P)?M.extendDeep([],P):M.extendDeepAll({},P):C[p]=P;return C}var E={};E.add=function(S,T,C,P,p){var Y,N;if(S.undoQueue=S.undoQueue||{index:0,queue:[],sequence:!1},N=S.undoQueue.index,S.autoplay){S.undoQueue.inSequence||(S.autoplay=!1);return}!S.undoQueue.sequence||S.undoQueue.beginSequence?(Y={undo:{calls:[],args:[]},redo:{calls:[],args:[]}},S.undoQueue.queue.splice(N,S.undoQueue.queue.length-N,Y),S.undoQueue.index+=1):Y=S.undoQueue.queue[N-1],S.undoQueue.beginSequence=!1,Y&&(Y.undo.calls.unshift(T),Y.undo.args.unshift(C),Y.redo.calls.push(P),Y.redo.args.push(p)),S.undoQueue.queue.length>v.queueLength&&(S.undoQueue.queue.shift(),S.undoQueue.index--)},E.startSequence=function(S){S.undoQueue=S.undoQueue||{index:0,queue:[],sequence:!1},S.undoQueue.sequence=!0,S.undoQueue.beginSequence=!0},E.stopSequence=function(S){S.undoQueue=S.undoQueue||{index:0,queue:[],sequence:!1},S.undoQueue.sequence=!1,S.undoQueue.beginSequence=!1},E.undo=function(T){var C,P;if(!(T.undoQueue===void 0||isNaN(T.undoQueue.index)||T.undoQueue.index<=0)){for(T.undoQueue.index--,C=T.undoQueue.queue[T.undoQueue.index],T.undoQueue.inSequence=!0,P=0;P<C.undo.calls.length;P++)E.plotDo(T,C.undo.calls[P],C.undo.args[P]);T.undoQueue.inSequence=!1,T.autoplay=!1}},E.redo=function(T){var C,P;if(!(T.undoQueue===void 0||isNaN(T.undoQueue.index)||T.undoQueue.index>=T.undoQueue.queue.length)){for(C=T.undoQueue.queue[T.undoQueue.index],T.undoQueue.inSequence=!0,P=0;P<C.redo.calls.length;P++)E.plotDo(T,C.redo.calls[P],C.redo.args[P]);T.undoQueue.inSequence=!1,T.autoplay=!1,T.undoQueue.index++}},E.plotDo=function(S,T,C){S.autoplay=!0,C=g(S,C),T.apply(null,C)},me.exports=E}}),Cv=a({"src/plots/frame_attributes.js"(pe,me){me.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}}}),Lv=a({"src/plot_api/plot_schema.js"(pe){var me=jp(),M=o0(),v=He(),g=d0(),E=Cv(),S=x0(),T=lt().configAttributes,C=Xl(),P=M.extendDeepAll,p=M.isPlainObject,Y=M.isArrayOrTypedArray,N=M.nestedProperty,j=M.valObjectMeta,ee="_isSubplotObj",G="_isLinkedToArray",V="_arrayAttrRegexps",W="_deprecated",q=[ee,G,V,W];pe.IS_SUBPLOT_OBJ=ee,pe.IS_LINKED_TO_ARRAY=G,pe.DEPRECATED=W,pe.UNDERSCORE_ATTRS=q,pe.get=function(){var Te={};return me.allTypes.forEach(function(ye){Te[ye]=ne(ye)}),{defs:{valObjects:j,metaKeys:q.concat(["description","role","editType","impliedEdits"]),editType:{traces:C.traces,layout:C.layout},impliedEdits:{}},traces:Te,layout:te(),frames:Se(),animation:fe(S),config:fe(T)}},pe.crawl=function(Te,ye,De,Ue){var he=De||0;Ue=Ue||"",Object.keys(Te).forEach(function(Be){var Ye=Te[Be];if(q.indexOf(Be)===-1){var et=(Ue?Ue+".":"")+Be;ye(Ye,Be,Te,he,et),!pe.isValObject(Ye)&&p(Ye)&&Be!=="impliedEdits"&&pe.crawl(Ye,ye,he+1,et)}})},pe.isValObject=function(Te){return Te&&Te.valType!==void 0},pe.findArrayAttributes=function(Te){var ye=[],De=[],Ue=[],he,Be;function Ye(Qe,ft,mn,ta){De=De.slice(0,ta).concat([ft]),Ue=Ue.slice(0,ta).concat([Qe&&Qe._isLinkedToArray]);var Do=Qe&&(Qe.valType==="data_array"||Qe.arrayOk===!0)&&!(De[ta-1]==="colorbar"&&(ft==="ticktext"||ft==="tickvals"));Do&&et(he,0,"")}function et(Qe,ft,mn){var ta=Qe[De[ft]],Do=mn+De[ft];if(ft===De.length-1)Y(ta)&&ye.push(Be+Do);else if(Ue[ft]){if(Array.isArray(ta))for(var Ae=0;Ae<ta.length;Ae++)p(ta[Ae])&&et(ta[Ae],ft+1,Do+"["+Ae+"].")}else p(ta)&&et(ta,ft+1,Do+".")}return he=Te,Be="",pe.crawl(v,Ye),Te._module&&Te._module.attributes&&pe.crawl(Te._module.attributes,Ye),ye},pe.getTraceValObject=function(Te,ye){var De=ye[0],Ue=1,he,Be,Ye=Te._module;if(Ye||(Ye=(me.modules[Te.type||v.type.dflt]||{})._module),!Ye)return!1;if(he=Ye.attributes,Be=he&&he[De],!Be){var et=Ye.basePlotModule;et&&et.attributes&&(Be=et.attributes[De])}return Be||(Be=v[De]),H(Be,ye,Ue)},pe.getLayoutValObject=function(Te,ye){var De=z(Te,ye[0]);return H(De,ye,1)};function z(Te,ye){var De,Ue,he,Be,Ye=Te._basePlotModules;if(Ye){var et;for(De=0;De<Ye.length;De++){if(he=Ye[De],he.attrRegex&&he.attrRegex.test(ye)){if(he.layoutAttrOverrides)return he.layoutAttrOverrides;!et&&he.layoutAttributes&&(et=he.layoutAttributes)}var Qe=he.baseLayoutAttrOverrides;if(Qe&&ye in Qe)return Qe[ye]}if(et)return et}var ft=Te._modules;if(ft){for(De=0;De<ft.length;De++)if(Be=ft[De].layoutAttributes,Be&&ye in Be)return Be[ye]}for(Ue in me.componentsRegistry){if(he=me.componentsRegistry[Ue],he.name==="colorscale"&&ye.indexOf("coloraxis")===0)return he.layoutAttributes[ye];if(!he.schema&&ye===he.name)return he.layoutAttributes}return ye in g?g[ye]:!1}function H(Te,ye,De){if(!Te)return!1;if(Te._isLinkedToArray){if(Z(ye[De]))De++;else if(De<ye.length)return!1}for(;De<ye.length;De++){var Ue=Te[ye[De]];if(p(Ue))Te=Ue;else break;if(De===ye.length-1)break;if(Te._isLinkedToArray){if(De++,!Z(ye[De]))return!1}else if(Te.valType==="info_array"){De++;var he=ye[De];if(!Z(he))return!1;var Be=Te.items;if(Array.isArray(Be)){if(he>=Be.length)return!1;if(Te.dimensions===2){if(De++,ye.length===De)return Te;var Ye=ye[De];if(!Z(Ye))return!1;Te=Be[he][Ye]}else Te=Be[he]}else Te=Be}}return Te}function Z(Te){return Te===Math.round(Te)&&Te>=0}function ne(Te){var ye,De;ye=me.modules[Te]._module,De=ye.basePlotModule;var Ue={};Ue.type=null;var he=P({},v),Be=P({},ye.attributes);pe.crawl(Be,function(Qe,ft,mn,ta,Do){N(he,Do).set(void 0),Qe===void 0&&N(Be,Do).set(void 0)}),P(Ue,he),me.traceIs(Te,"noOpacity")&&delete Ue.opacity,me.traceIs(Te,"showLegend")||(delete Ue.showlegend,delete Ue.legendgroup),me.traceIs(Te,"noHover")&&(delete Ue.hoverinfo,delete Ue.hoverlabel),ye.selectPoints||delete Ue.selectedpoints,P(Ue,Be),De.attributes&&P(Ue,De.attributes),Ue.type=Te;var Ye={meta:ye.meta||{},categories:ye.categories||{},animatable:!!ye.animatable,type:Te,attributes:fe(Ue)};if(ye.layoutAttributes){var et={};P(et,ye.layoutAttributes),Ye.layoutAttributes=fe(et)}return ye.animatable||pe.crawl(Ye,function(Qe){pe.isValObject(Qe)&&"anim"in Qe&&delete Qe.anim}),Ye}function te(){var Te={},ye,De;P(Te,g);for(ye in me.subplotsRegistry)if(De=me.subplotsRegistry[ye],!!De.layoutAttributes)if(Array.isArray(De.attr))for(var Ue=0;Ue<De.attr.length;Ue++)de(Te,De,De.attr[Ue]);else{var he=De.attr==="subplot"?De.name:De.attr;de(Te,De,he)}for(ye in me.componentsRegistry){De=me.componentsRegistry[ye];var Be=De.schema;if(Be&&(Be.subplots||Be.layout)){var Ye=Be.subplots;if(Ye&&Ye.xaxis&&!Ye.yaxis)for(var et in Ye.xaxis)delete Te.yaxis[et];delete Te.xaxis.shift,delete Te.xaxis.autoshift}else De.name==="colorscale"?P(Te,De.layoutAttributes):De.layoutAttributes&&be(Te,De.layoutAttributes,De.name)}return{layoutAttributes:fe(Te)}}function Se(){var Te={frames:P({},E)};return fe(Te),Te.frames}function fe(Te){return ve(Te),xe(Te),re(Te),Te}function ve(Te){function ye(Ue){return{valType:"string",editType:"none"}}function De(Ue,he,Be){pe.isValObject(Ue)?(Ue.arrayOk===!0||Ue.valType==="data_array")&&(Be[he+"src"]=ye()):p(Ue)&&(Ue.role="object")}pe.crawl(Te,De)}function xe(Te){function ye(De,Ue,he){if(De){var Be=De[G];Be&&(delete De[G],he[Ue]={items:{}},he[Ue].items[Be]=De,he[Ue].role="object")}}pe.crawl(Te,ye)}function re(Te){function ye(De){for(var Ue in De)if(p(De[Ue]))ye(De[Ue]);else if(Array.isArray(De[Ue]))for(var he=0;he<De[Ue].length;he++)ye(De[Ue][he]);else De[Ue]instanceof RegExp&&(De[Ue]=De[Ue].toString())}ye(Te)}function de(Te,ye,De){var Ue=N(Te,De),he=P({},ye.layoutAttributes);he[ee]=!0,Ue.set(he)}function be(Te,ye,De){var Ue=N(Te,De);Ue.set(P(Ue.get()||{},ye))}}}),Vm=a({"src/plot_api/plot_template.js"(pe){var me=o0(),M=He(),v="templateitemname",g={name:{valType:"string",editType:"none"}};g[v]={valType:"string",editType:"calc"},pe.templatedArray=function(T,C){return C._isLinkedToArray=T,C.name=g.name,C[v]=g[v],C},pe.traceTemplater=function(T){var C={},P,p;for(P in T)p=T[P],Array.isArray(p)&&p.length&&(C[P]=0);function Y(N){P=me.coerce(N,{},M,"type");var j={type:P,_template:null};if(P in C){p=T[P];var ee=C[P]%p.length;C[P]++,j._template=p[ee]}return j}return{newTrace:Y}},pe.newContainer=function(T,C,P){var p=T._template,Y=p&&(p[C]||P&&p[P]);me.isPlainObject(Y)||(Y=null);var N=T[C]={_template:Y};return N},pe.arrayTemplater=function(T,C,P){var p=T._template,Y=p&&p[S(C)],N=p&&p[C];(!Array.isArray(N)||!N.length)&&(N=[]);var j={};function ee(V){var W={name:V.name,_input:V},q=W[v]=V[v];if(!E(q))return W._template=Y,W;for(var z=0;z<N.length;z++){var H=N[z];if(H.name===q)return j[q]=1,W._template=H,W}return W[P]=V[P]||!1,W._template=!1,W}function G(){for(var V=[],W=0;W<N.length;W++){var q=N[W],z=q.name;if(E(z)&&!j[z]){var H={_template:q,name:z,_input:{_templateitemname:z}};H[v]=q[v],V.push(H),j[z]=1}}return V}return{newItem:ee,defaultItems:G}};function E(T){return T&&typeof T=="string"}function S(T){var C=T.length-1;return T.charAt(C)!=="s"&&me.warn("bad argument to arrayDefaultKey: "+T),T.substr(0,T.length-1)+"defaults"}pe.arrayDefaultKey=S,pe.arrayEditor=function(T,C,P){var p=(me.nestedProperty(T,C).get()||[]).length,Y=P._index,N=Y>=p&&(P._input||{})._templateitemname;N&&(Y=p);var j=C+"["+Y+"]",ee;function G(){ee={},N&&(ee[j]={},ee[j][v]=N)}G();function V(H,Z){ee[H]=Z}function W(H,Z){N?me.nestedProperty(ee[j],H).set(Z):ee[j+"."+H]=Z}function q(){var H=ee;return G(),H}function z(H,Z){H&&W(H,Z);var ne=q();for(var te in ne)me.nestedProperty(T,te).set(ne[te])}return{modifyBase:V,modifyItem:W,getUpdateObj:q,applyUpdate:z}}}}),wv=a({"src/plots/cartesian/constants.js"(pe,me){var M=Ze().counter;me.exports={idRegex:{x:M("x","( domain)?"),y:M("y","( domain)?")},attrRegex:M("[xy]axis"),xAxisMatch:M("xaxis"),yAxisMatch:M("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINZOOM:20,DRAGGERSIZE:20,REDRAWDELAY:50,DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"},zindexSeparator:"z"}}}),Ov=a({"src/plots/cartesian/axis_ids.js"(pe){var me=jp(),M=wv();pe.id2name=function(E){if(!(typeof E!="string"||!E.match(M.AX_ID_PATTERN))){var S=E.split(" ")[0].substr(1);return S==="1"&&(S=""),E.charAt(0)+"axis"+S}},pe.name2id=function(E){if(E.match(M.AX_NAME_PATTERN)){var S=E.substr(5);return S==="1"&&(S=""),E.charAt(0)+S}},pe.cleanId=function(E,S,T){var C=/( domain)$/.test(E);if(!(typeof E!="string"||!E.match(M.AX_ID_PATTERN))&&!(S&&E.charAt(0)!==S)&&!(C&&!T)){var P=E.split(" ")[0].substr(1).replace(/^0+/,"");return P==="1"&&(P=""),E.charAt(0)+P+(C&&T?" domain":"")}},pe.list=function(g,E,S){var T=g._fullLayout;if(!T)return[];var C=pe.listIds(g,E),P=new Array(C.length),p;for(p=0;p<C.length;p++){var Y=C[p];P[p]=T[Y.charAt(0)+"axis"+Y.substr(1)]}if(!S){var N=T._subplots.gl3d||[];for(p=0;p<N.length;p++){var j=T[N[p]];E?P.push(j[E+"axis"]):P.push(j.xaxis,j.yaxis,j.zaxis)}}return P},pe.listIds=function(g,E){var S=g._fullLayout;if(!S)return[];var T=S._subplots;return E?T[E+"axis"]:T.xaxis.concat(T.yaxis)},pe.getFromId=function(g,E,S){var T=g._fullLayout;return E=E===void 0||typeof E!="string"?E:E.replace(" domain",""),S==="x"?E=E.replace(/y[0-9]*/,""):S==="y"&&(E=E.replace(/x[0-9]*/,"")),T[pe.id2name(E)]},pe.getFromTrace=function(g,E,S){var T=g._fullLayout,C=null;if(me.traceIs(E,"gl3d")){var P=E.scene;P.substr(0,5)==="scene"&&(C=T[P][S+"axis"])}else C=pe.getFromId(g,E[S+"axis"]||S);return C},pe.idSort=function(g,E){var S=g.charAt(0),T=E.charAt(0);return S!==T?S>T?1:-1:+(g.substr(1)||1)-+(E.substr(1)||1)},pe.ref2id=function(g){return/^[xyz]/.test(g)?g.split(" ")[0]:!1};function v(g,E){if(E&&E.length){for(var S=0;S<E.length;S++)if(E[S][g])return!0}return!1}pe.isLinked=function(g,E){return v(E,g._axisMatchGroups)||v(E,g._axisConstraintGroups)}}}),X1=a({"src/components/shapes/handle_outline.js"(pe,me){function M(g){var E=g._fullLayout._zoomlayer;E&&E.selectAll(".outline-controllers").remove()}function v(g){var E=g._fullLayout._zoomlayer;E&&E.selectAll(".select-outline").remove(),g._fullLayout._outlining=!1}me.exports={clearOutlineControllers:M,clearOutline:v}}}),n1=a({"src/traces/scatter/layout_attributes.js"(pe,me){me.exports={scattermode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},scattergap:{valType:"number",min:0,max:1,editType:"calc"}}}}),Rv=a({"src/plots/get_data.js"(pe){var me=jp();wv().SUBPLOT_PATTERN,pe.getSubplotCalcData=function(M,v,g){var E=me.subplotsRegistry[v];if(!E)return[];for(var S=E.attr,T=[],C=0;C<M.length;C++){var P=M[C],p=P[0].trace;p[S]===g&&T.push(P)}return T},pe.getModuleCalcData=function(M,v,g){var E=[],S=[],T;if(typeof v=="string"?T=me.getModule(v).plot:typeof v=="function"?T=v:T=v.plot,!T)return[E,M];for(var C=g,P=0;P<M.length;P++){var p=M[P],Y=p[0].trace,N=Y.zorder!==void 0;Y.visible!==!0||Y._length===0||(Y._module&&Y._module.plot===T&&(!N||Y.zorder===C)?E.push(p):S.push(p))}return[E,S]},pe.getSubplotData=function(v,g,E){if(!me.subplotsRegistry[g])return[];for(var S=me.subplotsRegistry[g].attr,T=[],C,P=0;P<v.length;P++)C=v[P],C[S]===E&&T.push(C);return T}}}),Kg=a({"src/plots/command.js"(pe){var me=jp(),M=o0();pe.manageCommandObserver=function(C,P,p,Y){var N={},j=!0;P&&P._commandObserver&&(N=P._commandObserver),N.cache||(N.cache={}),N.lookupTable={};var ee=pe.hasSimpleAPICommandBindings(C,p,N.lookupTable);if(P&&P._commandObserver){if(ee)return N;if(P._commandObserver.remove)return P._commandObserver.remove(),P._commandObserver=null,N}if(ee){v(C,ee,N.cache),N.check=function(){if(j){var q=v(C,ee,N.cache);return q.changed&&Y&&N.lookupTable[q.value]!==void 0&&(N.disable(),Promise.resolve(Y({value:q.value,type:ee.type,prop:ee.prop,traces:ee.traces,index:N.lookupTable[q.value]})).then(N.enable,N.enable)),q.changed}};for(var G=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],V=0;V<G.length;V++)C._internalOn(G[V],N.check);N.remove=function(){for(var W=0;W<G.length;W++)C._removeInternalListener(G[W],N.check)}}else M.log("Unable to automatically bind plot updates to API command"),N.lookupTable={},N.remove=function(){};return N.disable=function(){j=!1},N.enable=function(){j=!0},P&&(P._commandObserver=N),N},pe.hasSimpleAPICommandBindings=function(C,P,p){var Y,N=P.length,j;for(Y=0;Y<N;Y++){var ee,G=P[Y],V=G.method,W=G.args;if(Array.isArray(W)||(W=[]),!V)return!1;var q=pe.computeAPICommandBindings(C,V,W);if(q.length!==1)return!1;if(!j)j=q[0],Array.isArray(j.traces)&&j.traces.sort();else{if(ee=q[0],ee.type!==j.type||ee.prop!==j.prop)return!1;if(Array.isArray(j.traces))if(Array.isArray(ee.traces)){ee.traces.sort();for(var z=0;z<j.traces.length;z++)if(j.traces[z]!==ee.traces[z])return!1}else return!1;else if(ee.prop!==j.prop)return!1}ee=q[0];var H=ee.value;if(Array.isArray(H))if(H.length===1)H=H[0];else return!1;p&&(p[H]=Y)}return j};function v(C,P,p){var Y,N,j,ee=!1;if(P.type==="data")Y=C._fullData[P.traces!==null?P.traces[0]:0];else if(P.type==="layout")Y=C._fullLayout;else return!1;return N=M.nestedProperty(Y,P.prop).get(),j=p[P.type]=p[P.type]||{},j.hasOwnProperty(P.prop)&&j[P.prop]!==N&&(ee=!0),j[P.prop]=N,{changed:ee,value:N}}pe.executeAPICommand=function(C,P,p){if(P==="skip")return Promise.resolve();var Y=me.apiMethodRegistry[P],N=[C];Array.isArray(p)||(p=[]);for(var j=0;j<p.length;j++)N.push(p[j]);return Y.apply(null,N).catch(function(ee){return M.warn("API call to Plotly."+P+" rejected.",ee),Promise.reject(ee)})},pe.computeAPICommandBindings=function(C,P,p){var Y;switch(Array.isArray(p)||(p=[]),P){case"restyle":Y=S(C,p);break;case"relayout":Y=E(C,p);break;case"update":Y=S(C,[p[0],p[2]]).concat(E(C,[p[1]]));break;case"animate":Y=g(C,p);break;default:Y=[]}return Y};function g(C,P){return Array.isArray(P[0])&&P[0].length===1&&["string","number"].indexOf(typeof P[0][0])!==-1?[{type:"layout",prop:"_currentFrame",value:P[0][0].toString()}]:[]}function E(C,P){var p=[],Y=P[0],N={};if(typeof Y=="string")N[Y]=P[1];else if(M.isPlainObject(Y))N=Y;else return p;return T(N,function(j,ee,G){p.push({type:"layout",prop:j,value:G})},"",0),p}function S(C,P){var p,Y,N,j,ee=[];if(Y=P[0],N=P[1],p=P[2],j={},typeof Y=="string")j[Y]=N;else if(M.isPlainObject(Y))j=Y,p===void 0&&(p=N);else return ee;return p===void 0&&(p=null),T(j,function(G,V,W){var q,z;if(Array.isArray(W)){z=W.slice();var H=Math.min(z.length,C.data.length);p&&(H=Math.min(H,p.length)),q=[];for(var Z=0;Z<H;Z++)q[Z]=p?p[Z]:Z}else z=W,q=p?p.slice():null;if(q===null)Array.isArray(z)&&(z=z[0]);else if(Array.isArray(q)){if(!Array.isArray(z)){var ne=z;z=[];for(var te=0;te<q.length;te++)z[te]=ne}z.length=Math.min(q.length,z.length)}ee.push({type:"data",prop:G,traces:q,value:z})},"",0),ee}function T(C,P,p,Y){Object.keys(C).forEach(function(N){var j=C[N];if(N[0]!=="_"){var ee=p+(Y>0?".":"")+N;M.isPlainObject(j)?T(j,P,ee,Y+1):P(ee,N,j)}})}}}),p1=a({"src/plots/plots.js"(pe,me){var M=f(),v=h().timeFormatLocale,g=x().formatLocale,E=w(),S=D(),T=jp(),C=Lv(),P=Vm(),p=o0(),Y=Oe(),N=A().BADNUM,j=Ov(),ee=X1().clearOutline,G=n1(),V=x0(),W=Cv(),q=Rv().getModuleCalcData,z=p.relinkPrivateKeys,H=p._,Z=me.exports={};p.extendFlat(Z,T),Z.attributes=He(),Z.attributes.type.values=Z.allTypes,Z.fontAttrs=B(),Z.layoutAttributes=d0();var ne=Kg();Z.executeAPICommand=ne.executeAPICommand,Z.computeAPICommandBindings=ne.computeAPICommandBindings,Z.manageCommandObserver=ne.manageCommandObserver,Z.hasSimpleAPICommandBindings=ne.hasSimpleAPICommandBindings,Z.redrawText=function(Ae){return Ae=p.getGraphDiv(Ae),new Promise(function(ke){setTimeout(function(){Ae._fullLayout&&(T.getComponentMethod("annotations","draw")(Ae),T.getComponentMethod("legend","draw")(Ae),T.getComponentMethod("colorbar","draw")(Ae),ke(Z.previousPromises(Ae)))},300)})},Z.resize=function(Ae){Ae=p.getGraphDiv(Ae);var ke,ge=new Promise(function(Ce,Je){(!Ae||p.isHidden(Ae))&&Je(new Error("Resize must be passed a displayed plot div element.")),Ae._redrawTimer&&clearTimeout(Ae._redrawTimer),Ae._resolveResize&&(ke=Ae._resolveResize),Ae._resolveResize=Ce,Ae._redrawTimer=setTimeout(function(){if(!Ae.layout||Ae.layout.width&&Ae.layout.height||p.isHidden(Ae)){Ce(Ae);return}delete Ae.layout.width,delete Ae.layout.height;var Re=Ae.changed;Ae.autoplay=!0,T.call("relayout",Ae,{autosize:!0}).then(function(){Ae.changed=Re,Ae._resolveResize===Ce&&(delete Ae._resolveResize,Ce(Ae))})},100)});return ke&&ke(ge),ge},Z.previousPromises=function(Ae){if((Ae._promises||[]).length)return Promise.all(Ae._promises).then(function(){Ae._promises=[]})},Z.addLinks=function(Ae){if(!(!Ae._context.showLink&&!Ae._context.showSources)){var ke=Ae._fullLayout,ge=p.ensureSingle(ke._paper,"text","js-plot-link-container",function(Me){Me.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:Y.defaultLine,"pointer-events":"all"}).each(function(){var Le=M.select(this);Le.append("tspan").classed("js-link-to-tool",!0),Le.append("tspan").classed("js-link-spacer",!0),Le.append("tspan").classed("js-sourcelinks",!0)})}),Ce=ge.node(),Je={y:ke._paper.attr("height")-9};document.body.contains(Ce)&&Ce.getComputedTextLength()>=ke.width-20?(Je["text-anchor"]="start",Je.x=5):(Je["text-anchor"]="end",Je.x=ke._paper.attr("width")-7),ge.attr(Je);var Re=ge.select(".js-link-to-tool"),Q=ge.select(".js-link-spacer"),ce=ge.select(".js-sourcelinks");Ae._context.showSources&&Ae._context.showSources(Ae),Ae._context.showLink&&te(Ae,Re),Q.text(Re.text()&&ce.text()?" - ":"")}};function te(Ae,ke){ke.text("");var ge=ke.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(Ae._context.linkText+" »");if(Ae._context.sendData)ge.on("click",function(){Z.sendDataToCloud(Ae)});else{var Ce=window.location.pathname.split("/"),Je=window.location.search;ge.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+Ce[2].split(".")[0]+"/"+Ce[1]+Je})}}Z.sendDataToCloud=function(Ae){var ke=(window.PLOTLYENV||{}).BASE_URL||Ae._context.plotlyServerURL;if(ke){Ae.emit("plotly_beforeexport");var ge=M.select(Ae).append("div").attr("id","hiddenform").style("display","none"),Ce=ge.append("form").attr({action:ke+"/external",method:"post",target:"_blank"}),Je=Ce.append("input").attr({type:"text",name:"data"});return Je.node().value=Z.graphJson(Ae,!1,"keepdata"),Ce.node().submit(),ge.remove(),Ae.emit("plotly_afterexport"),!1}};var Se=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],fe=["year","month","dayMonth","dayMonthYear"];Z.supplyDefaults=function(Ae,ke){var ge=ke&&ke.skipUpdateCalc,Ce=Ae._fullLayout||{};if(Ce._skipDefaults){delete Ce._skipDefaults;return}var Je=Ae._fullLayout={},Re=Ae.layout||{},Q=Ae._fullData||[],ce=Ae._fullData=[],Me=Ae.data||[],Le=Ae.calcdata||[],tt=Ae._context||{},bt;Ae._transitionData||Z.createTransitionData(Ae),Je._dfltTitle={plot:H(Ae,"Click to enter Plot title"),subtitle:H(Ae,"Click to enter Plot subtitle"),x:H(Ae,"Click to enter X axis title"),y:H(Ae,"Click to enter Y axis title"),colorbar:H(Ae,"Click to enter Colorscale title"),annotation:H(Ae,"new text")},Je._traceWord=H(Ae,"trace");var Ct=re(Ae,Se);if(Je._mapboxAccessToken=tt.mapboxAccessToken,Ce._initialAutoSizeIsDone){var yi=Ce.width,Fl=Ce.height;Z.supplyLayoutGlobalDefaults(Re,Je,Ct),Re.width||(Je.width=yi),Re.height||(Je.height=Fl),Z.sanitizeMargins(Je)}else{Z.supplyLayoutGlobalDefaults(Re,Je,Ct);var Yl=!Re.width||!Re.height,qp=Je.autosize,Fp=tt.autosizable,Up=Yl&&(qp||Fp);Up?Z.plotAutoSize(Ae,Re,Je):Yl&&Z.sanitizeMargins(Je),!qp&&Yl&&(Re.width=Je.width,Re.height=Je.height)}Je._d3locale=de(Ct,Je.separators),Je._extraFormat=re(Ae,fe),Je._initialAutoSizeIsDone=!0,Je._dataLength=Me.length,Je._modules=[],Je._visibleModules=[],Je._basePlotModules=[];var _r=Je._subplots=xe(),gs=Je._splomAxes={x:{},y:{}},dr=Je._splomSubplots={};Je._splomGridDflt={},Je._scatterStackOpts={},Je._firstScatter={},Je._alignmentOpts={},Je._colorAxes={},Je._requestRangeslider={},Je._traceUids=ve(Q,Me),Z.supplyDataDefaults(Me,ce,Re,Je);var Lo=Object.keys(gs.x),Cp=Object.keys(gs.y);if(Lo.length>1&&Cp.length>1){for(T.getComponentMethod("grid","sizeDefaults")(Re,Je),bt=0;bt<Lo.length;bt++)p.pushUnique(_r.xaxis,Lo[bt]);for(bt=0;bt<Cp.length;bt++)p.pushUnique(_r.yaxis,Cp[bt]);for(var Hp in dr)p.pushUnique(_r.cartesian,Hp)}if(Je._has=Z._hasPlotType.bind(Je),Q.length===ce.length)for(bt=0;bt<ce.length;bt++)z(ce[bt],Q[bt]);Z.supplyLayoutModuleDefaults(Re,Je,ce,Ae._transitionData);var e0=Je._visibleModules,t0=[];for(bt=0;bt<e0.length;bt++){var n0=e0[bt].crossTraceDefaults;n0&&p.pushUnique(t0,n0)}for(bt=0;bt<t0.length;bt++)t0[bt](ce,Je);Je._hasOnlyLargeSploms=Je._basePlotModules.length===1&&Je._basePlotModules[0].name==="splom"&&Lo.length>15&&Cp.length>15&&Je.shapes.length===0&&Je.images.length===0,Z.linkSubplots(ce,Je,Q,Ce),Z.cleanPlot(ce,Je,Q,Ce);var y0=!!(Ce._has&&Ce._has("cartesian")),h0=!!(Je._has&&Je._has("cartesian")),I0=y0,Kp=h0;I0&&!Kp?Ce._bgLayer.remove():Kp&&!I0&&(Je._shouldCreateBgLayer=!0),Ce._zoomlayer&&!Ae._dragging&&ee({_fullLayout:Ce}),be(ce,Je),z(Je,Ce),T.getComponentMethod("colorscale","crossTraceDefaults")(ce,Je),Je._preGUI||(Je._preGUI={}),Je._tracePreGUI||(Je._tracePreGUI={});var B0=Je._tracePreGUI,em={},k0;for(k0 in B0)em[k0]="old";for(bt=0;bt<ce.length;bt++)k0=ce[bt]._fullInput.uid,em[k0]||(B0[k0]={}),em[k0]="new";for(k0 in em)em[k0]==="old"&&delete B0[k0];De(Je),T.getComponentMethod("rangeslider","makeData")(Je),!ge&&Le.length===ce.length&&Z.supplyDefaultsUpdateCalc(Le,ce)},Z.supplyDefaultsUpdateCalc=function(Ae,ke){for(var ge=0;ge<ke.length;ge++){var Ce=ke[ge],Je=(Ae[ge]||[])[0];if(Je&&Je.trace){var Re=Je.trace;if(Re._hasCalcTransform){var Q=Re._arrayAttrs,ce,Me,Le;for(ce=0;ce<Q.length;ce++)Me=Q[ce],Le=p.nestedProperty(Re,Me).get().slice(),p.nestedProperty(Ce,Me).set(Le)}Je.trace=Ce}}};function ve(Ae,ke){var ge=ke.length,Ce=[],Je,Re;for(Je=0;Je<Ae.length;Je++){var Q=Ae[Je]._fullInput;Q!==Re&&Ce.push(Q),Re=Q}var ce=Ce.length,Me=new Array(ge),Le={};function tt(yi,Fl){Me[Fl]=yi,Le[yi]=1}function bt(yi,Fl){if(yi&&typeof yi=="string"&&!Le[yi])return tt(yi,Fl),!0}for(Je=0;Je<ge;Je++){var Ct=ke[Je].uid;typeof Ct=="number"&&(Ct=String(Ct)),!bt(Ct,Je)&&(Je<ce&&bt(Ce[Je].uid,Je)||tt(p.randstr(Le),Je))}return Me}function xe(){var Ae=T.collectableSubplotTypes,ke={},ge,Ce;if(!Ae){Ae=[];var Je=T.subplotsRegistry;for(var Re in Je){var Q=Je[Re],ce=Q.attr;if(ce&&(Ae.push(Re),Array.isArray(ce)))for(Ce=0;Ce<ce.length;Ce++)p.pushUnique(Ae,ce[Ce])}}for(ge=0;ge<Ae.length;ge++)ke[Ae[ge]]=[];return ke}function re(Ae,ke){var ge=Ae._context.locale;ge||(ge="en-US");var Ce=!1,Je={};function Re(bt){for(var Ct=!0,yi=0;yi<ke.length;yi++){var Fl=ke[yi];Je[Fl]||(bt[Fl]?Je[Fl]=bt[Fl]:Ct=!1)}Ct&&(Ce=!0)}for(var Q=0;Q<2;Q++){for(var ce=Ae._context.locales,Me=0;Me<2;Me++){var Le=(ce[ge]||{}).format;if(Le&&(Re(Le),Ce))break;ce=T.localeRegistry}var tt=ge.split("-")[0];if(Ce||tt===ge)break;ge=tt}return Ce||Re(T.localeRegistry.en.format),Je}function de(Ae,ke){return Ae.decimal=ke.charAt(0),Ae.thousands=ke.charAt(1),{numberFormat:function(ge){try{ge=g(Ae).format(p.adjustFormat(ge))}catch{return p.warnBadFormat(ge),p.noFormat}return ge},timeFormat:v(Ae).utcFormat}}function be(Ae,ke){var ge,Ce=[];ke.meta&&(ge=ke._meta={meta:ke.meta,layout:{meta:ke.meta}});for(var Je=0;Je<Ae.length;Je++){var Re=Ae[Je];Re.meta?Ce[Re.index]=Re._meta={meta:Re.meta}:ke.meta&&(Re._meta={meta:ke.meta}),ke.meta&&(Re._meta.layout={meta:ke.meta})}Ce.length&&(ge||(ge=ke._meta={}),ge.data=Ce)}Z.createTransitionData=function(Ae){Ae._transitionData||(Ae._transitionData={}),Ae._transitionData._frames||(Ae._transitionData._frames=[]),Ae._transitionData._frameHash||(Ae._transitionData._frameHash={}),Ae._transitionData._counter||(Ae._transitionData._counter=0),Ae._transitionData._interruptCallbacks||(Ae._transitionData._interruptCallbacks=[])},Z._hasPlotType=function(Ae){var ke,ge=this._basePlotModules||[];for(ke=0;ke<ge.length;ke++)if(ge[ke].name===Ae)return!0;var Ce=this._modules||[];for(ke=0;ke<Ce.length;ke++){var Je=Ce[ke].name;if(Je===Ae)return!0;var Re=T.modules[Je];if(Re&&Re.categories[Ae])return!0}return!1},Z.cleanPlot=function(Ae,ke,ge,Ce){var Je,Re,Q=Ce._basePlotModules||[];for(Je=0;Je<Q.length;Je++){var ce=Q[Je];ce.clean&&ce.clean(Ae,ke,ge,Ce)}var Me=Ce._has&&Ce._has("gl"),Le=ke._has&&ke._has("gl");Me&&!Le&&Ce._glcontainer!==void 0&&(Ce._glcontainer.selectAll(".gl-canvas").remove(),Ce._glcontainer.selectAll(".no-webgl").remove(),Ce._glcanvas=null);var tt=!!Ce._infolayer;e:for(Je=0;Je<ge.length;Je++){var bt=ge[Je],Ct=bt.uid;for(Re=0;Re<Ae.length;Re++){var yi=Ae[Re];if(Ct===yi.uid)continue e}tt&&Ce._infolayer.select(".cb"+Ct).remove()}},Z.linkSubplots=function(Ae,ke,ge,Ce){var Je,Re,Q=Ce._plots||{},ce=ke._plots={},Me=ke._subplots,Le={_fullData:Ae,_fullLayout:ke},tt=Me.cartesian||[];for(Je=0;Je<tt.length;Je++){var bt=tt[Je],Ct=Q[bt],yi=j.getFromId(Le,bt,"x"),Fl=j.getFromId(Le,bt,"y"),Yl;for(Ct?Yl=ce[bt]=Ct:(Yl=ce[bt]={},Yl.id=bt),yi._counterAxes.push(Fl._id),Fl._counterAxes.push(yi._id),yi._subplotsWith.push(bt),Fl._subplotsWith.push(bt),Yl.xaxis=yi,Yl.yaxis=Fl,Yl._hasClipOnAxisFalse=!1,Re=0;Re<Ae.length;Re++){var qp=Ae[Re];if(qp.xaxis===Yl.xaxis._id&&qp.yaxis===Yl.yaxis._id&&qp.cliponaxis===!1){Yl._hasClipOnAxisFalse=!0;break}}}var Fp=j.list(Le,null,!0),Up;for(Je=0;Je<Fp.length;Je++){Up=Fp[Je];var _r=null;Up.overlaying&&(_r=j.getFromId(Le,Up.overlaying),_r&&_r.overlaying&&(Up.overlaying=!1,_r=null)),Up._mainAxis=_r||Up,_r&&(Up.domain=_r.domain.slice()),Up._anchorAxis=Up.anchor==="free"?null:j.getFromId(Le,Up.anchor)}for(Je=0;Je<Fp.length;Je++)if(Up=Fp[Je],Up._counterAxes.sort(j.idSort),Up._subplotsWith.sort(p.subplotSort),Up._mainSubplot=Te(Up,ke),Up._counterAxes.length&&(Up.spikemode&&Up.spikemode.indexOf("across")!==-1||Up.automargin&&Up.mirror&&Up.anchor!=="free"||T.getComponentMethod("rangeslider","isVisible")(Up))){var gs=1,dr=0;for(Re=0;Re<Up._counterAxes.length;Re++){var Lo=j.getFromId(Le,Up._counterAxes[Re]);gs=Math.min(gs,Lo.domain[0]),dr=Math.max(dr,Lo.domain[1])}gs<dr&&(Up._counterDomainMin=gs,Up._counterDomainMax=dr)}};function Te(Ae,ke){var ge={_fullLayout:ke},Ce=Ae._id.charAt(0)==="x",Je=Ae._mainAxis._anchorAxis,Re="",Q="",ce="";if(Je&&(ce=Je._mainAxis._id,Re=Ce?Ae._id+ce:ce+Ae._id),!Re||!ke._plots[Re]){Re="";for(var Me=Ae._counterAxes,Le=0;Le<Me.length;Le++){var tt=Me[Le],bt=Ce?Ae._id+tt:tt+Ae._id;Q||(Q=bt);var Ct=j.getFromId(ge,tt);if(ce&&Ct.overlaying===ce){Re=bt;break}}}return Re||Q}Z.clearExpandedTraceDefaultColors=function(Ae){var ke,ge,Ce;function Je(Q,ce,Me,Le){ge[Le]=ce,ge.length=Le+1,Q.valType==="color"&&Q.dflt===void 0&&ke.push(ge.join("."))}for(ge=[],ke=Ae._module._colorAttrs,ke||(Ae._module._colorAttrs=ke=[],C.crawl(Ae._module.attributes,Je)),Ce=0;Ce<ke.length;Ce++){var Re=p.nestedProperty(Ae,"_input."+ke[Ce]);Re.get()||p.nestedProperty(Ae,ke[Ce]).set(null)}},Z.supplyDataDefaults=function(Ae,ke,ge,Ce){var Je=Ce._modules,Re=Ce._visibleModules,Q=Ce._basePlotModules,ce=0,Me,Le,tt;Ce._transformModules=[];function bt(Fp){ke.push(Fp);var Up=Fp._module;Up&&(p.pushUnique(Je,Up),Fp.visible===!0&&p.pushUnique(Re,Up),p.pushUnique(Q,Fp._module.basePlotModule),Fp._input.visible!==!1&&ce++)}var Ct={},yi=[],Fl=(ge.template||{}).data||{},Yl=P.traceTemplater(Fl);for(Me=0;Me<Ae.length;Me++)tt=Ae[Me],Le=Yl.newTrace(tt),Le.uid=Ce._traceUids[Me],Z.supplyTraceDefaults(tt,Le,ce,Ce,Me),Le.index=Me,Le._input=tt,Le._fullInput=Le,bt(Le),T.traceIs(Le,"carpetAxis")&&(Ct[Le.carpet]=Le),T.traceIs(Le,"carpetDependent")&&yi.push(Me);for(Me=0;Me<yi.length;Me++)if(Le=ke[yi[Me]],!!Le.visible){var qp=Ct[Le.carpet];if(Le._carpet=qp,!qp||!qp.visible){Le.visible=!1;continue}Le.xaxis=qp.xaxis,Le.yaxis=qp.yaxis}},Z.supplyAnimationDefaults=function(Ae){Ae=Ae||{};var ke,ge={};function Ce(Je,Re){return p.coerce(Ae||{},ge,V,Je,Re)}if(Ce("mode"),Ce("direction"),Ce("fromcurrent"),Array.isArray(Ae.frame))for(ge.frame=[],ke=0;ke<Ae.frame.length;ke++)ge.frame[ke]=Z.supplyAnimationFrameDefaults(Ae.frame[ke]||{});else ge.frame=Z.supplyAnimationFrameDefaults(Ae.frame||{});if(Array.isArray(Ae.transition))for(ge.transition=[],ke=0;ke<Ae.transition.length;ke++)ge.transition[ke]=Z.supplyAnimationTransitionDefaults(Ae.transition[ke]||{});else ge.transition=Z.supplyAnimationTransitionDefaults(Ae.transition||{});return ge},Z.supplyAnimationFrameDefaults=function(Ae){var ke={};function ge(Ce,Je){return p.coerce(Ae||{},ke,V.frame,Ce,Je)}return ge("duration"),ge("redraw"),ke},Z.supplyAnimationTransitionDefaults=function(Ae){var ke={};function ge(Ce,Je){return p.coerce(Ae||{},ke,V.transition,Ce,Je)}return ge("duration"),ge("easing"),ke},Z.supplyFrameDefaults=function(Ae){var ke={};function ge(Ce,Je){return p.coerce(Ae,ke,W,Ce,Je)}return ge("group"),ge("name"),ge("traces"),ge("baseframe"),ge("data"),ge("layout"),ke},Z.supplyTraceDefaults=function(Ae,ke,ge,Ce,Je){var Re=Ce.colorway||Y.defaults,Q=Re[ge%Re.length],ce;function Me(_r,gs){return p.coerce(Ae,ke,Z.attributes,_r,gs)}var Le=Me("visible");Me("type"),Me("name",Ce._traceWord+" "+Je),Me("uirevision",Ce.uirevision);var tt=Z.getModule(ke);if(ke._module=tt,tt){var bt=tt.basePlotModule,Ct=bt.attr,yi=bt.attributes;if(Ct&&yi){var Fl=Ce._subplots,Yl="";if(Array.isArray(Ct))for(ce=0;ce<Ct.length;ce++){var qp=Ct[ce],Fp=p.coerce(Ae,ke,yi,qp);Fl[qp]&&p.pushUnique(Fl[qp],Fp),Yl+=Fp}else Yl=p.coerce(Ae,ke,yi,Ct);Fl[bt.name]&&p.pushUnique(Fl[bt.name],Yl)}}if(Le&&(Me("customdata"),Me("ids"),Me("meta"),T.traceIs(ke,"showLegend")?(p.coerce(Ae,ke,tt.attributes.showlegend?tt.attributes:Z.attributes,"showlegend"),Me("legend"),Me("legendwidth"),Me("legendgroup"),Me("legendgrouptitle.text"),Me("legendrank"),ke._dfltShowLegend=!0):ke._dfltShowLegend=!1,tt&&tt.supplyDefaults(Ae,ke,Q,Ce),T.traceIs(ke,"noOpacity")||Me("opacity"),T.traceIs(ke,"notLegendIsolatable")&&(ke.visible=!!ke.visible),T.traceIs(ke,"noHover")||(ke.hovertemplate||p.coerceHoverinfo(Ae,ke,Ce),ke.type!=="parcats"&&T.getComponentMethod("fx","supplyDefaults")(Ae,ke,Q,Ce)),tt&&tt.selectPoints)){var Up=Me("selectedpoints");p.isTypedArray(Up)&&(ke.selectedpoints=Array.from(Up))}return ke},Z.supplyLayoutGlobalDefaults=function(Ae,ke,ge){function Ce(bt,Ct){return p.coerce(Ae,ke,Z.layoutAttributes,bt,Ct)}var Je=Ae.template;p.isPlainObject(Je)&&(ke.template=Je,ke._template=Je.layout,ke._dataTemplate=Je.data),Ce("autotypenumbers");var Re=p.coerceFont(Ce,"font"),Q=Re.size;p.coerceFont(Ce,"title.font",Re,{overrideDflt:{size:Math.round(Q*1.4)}}),Ce("title.text",ke._dfltTitle.plot),Ce("title.xref");var ce=Ce("title.yref");Ce("title.pad.t"),Ce("title.pad.r"),Ce("title.pad.b"),Ce("title.pad.l");var Me=Ce("title.automargin");Ce("title.x"),Ce("title.xanchor"),Ce("title.y"),Ce("title.yanchor"),Ce("title.subtitle.text",ke._dfltTitle.subtitle),p.coerceFont(Ce,"title.subtitle.font",Re,{overrideDflt:{size:Math.round(ke.title.font.size*.7)}}),Me&&(ce==="paper"&&(ke.title.y!==0&&(ke.title.y=1),ke.title.yanchor==="auto"&&(ke.title.yanchor=ke.title.y===0?"top":"bottom")),ce==="container"&&(ke.title.y==="auto"&&(ke.title.y=1),ke.title.yanchor==="auto"&&(ke.title.yanchor=ke.title.y<.5?"bottom":"top")));var Le=Ce("uniformtext.mode");Le&&Ce("uniformtext.minsize"),Ce("autosize",!(Ae.width&&Ae.height)),Ce("width"),Ce("height"),Ce("minreducedwidth"),Ce("minreducedheight"),Ce("margin.l"),Ce("margin.r"),Ce("margin.t"),Ce("margin.b"),Ce("margin.pad"),Ce("margin.autoexpand"),Ae.width&&Ae.height&&Z.sanitizeMargins(ke),T.getComponentMethod("grid","sizeDefaults")(Ae,ke),Ce("paper_bgcolor"),Ce("separators",ge.decimal+ge.thousands),Ce("hidesources"),Ce("colorway"),Ce("datarevision");var tt=Ce("uirevision");Ce("editrevision",tt),Ce("selectionrevision",tt),T.getComponentMethod("modebar","supplyLayoutDefaults")(Ae,ke),T.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(Ae,ke,Ce),T.getComponentMethod("selections","supplyDrawNewSelectionDefaults")(Ae,ke,Ce),Ce("meta"),p.isPlainObject(Ae.transition)&&(Ce("transition.duration"),Ce("transition.easing"),Ce("transition.ordering")),T.getComponentMethod("calendars","handleDefaults")(Ae,ke,"calendar"),T.getComponentMethod("fx","supplyLayoutGlobalDefaults")(Ae,ke,Ce),p.coerce(Ae,ke,G,"scattermode")};function ye(Ae){return typeof Ae=="string"&&Ae.substr(Ae.length-2)==="px"&&parseFloat(Ae)}Z.plotAutoSize=function(ke,ge,Ce){var Je=ke._context||{},Re=Je.frameMargins,Q,ce,Me=p.isPlotDiv(ke);if(Me&&ke.emit("plotly_autosize"),Je.fillFrame)Q=window.innerWidth,ce=window.innerHeight,document.body.style.overflow="hidden";else{var Le=Me?window.getComputedStyle(ke):{};if(Q=ye(Le.width)||ye(Le.maxWidth)||Ce.width,ce=ye(Le.height)||ye(Le.maxHeight)||Ce.height,E(Re)&&Re>0){var tt=1-2*Re;Q=Math.round(tt*Q),ce=Math.round(tt*ce)}}var bt=Z.layoutAttributes.width.min,Ct=Z.layoutAttributes.height.min;Q<bt&&(Q=bt),ce<Ct&&(ce=Ct);var yi=!ge.width&&Math.abs(Ce.width-Q)>1,Fl=!ge.height&&Math.abs(Ce.height-ce)>1;(Fl||yi)&&(yi&&(Ce.width=Q),Fl&&(Ce.height=ce)),ke._initialAutoSize||(ke._initialAutoSize={width:Q,height:ce}),Z.sanitizeMargins(Ce)},Z.supplyLayoutModuleDefaults=function(Ae,ke,ge,Ce){var Je=T.componentsRegistry,Re=ke._basePlotModules,Q,ce,Me,Le=T.subplotsRegistry.cartesian;for(Q in Je)Me=Je[Q],Me.includeBasePlot&&Me.includeBasePlot(Ae,ke);Re.length||Re.push(Le),ke._has("cartesian")&&(T.getComponentMethod("grid","contentDefaults")(Ae,ke),Le.finalizeSubplots(Ae,ke));for(var tt in ke._subplots)ke._subplots[tt].sort(p.subplotSort);for(ce=0;ce<Re.length;ce++)Me=Re[ce],Me.supplyLayoutDefaults&&Me.supplyLayoutDefaults(Ae,ke,ge);var bt=ke._modules;for(ce=0;ce<bt.length;ce++)Me=bt[ce],Me.supplyLayoutDefaults&&Me.supplyLayoutDefaults(Ae,ke,ge);var Ct=ke._transformModules;for(ce=0;ce<Ct.length;ce++)Me=Ct[ce],Me.supplyLayoutDefaults&&Me.supplyLayoutDefaults(Ae,ke,ge,Ce);for(Q in Je)Me=Je[Q],Me.supplyLayoutDefaults&&Me.supplyLayoutDefaults(Ae,ke,ge)},Z.purge=function(Ae){var ke=Ae._fullLayout||{};ke._glcontainer!==void 0&&(ke._glcontainer.selectAll(".gl-canvas").remove(),ke._glcontainer.remove(),ke._glcanvas=null),ke._modeBar&&ke._modeBar.destroy(),Ae._transitionData&&(Ae._transitionData._interruptCallbacks&&(Ae._transitionData._interruptCallbacks.length=0),Ae._transitionData._animationRaf&&window.cancelAnimationFrame(Ae._transitionData._animationRaf)),p.clearThrottle(),p.clearResponsive(Ae),delete Ae.data,delete Ae.layout,delete Ae._fullData,delete Ae._fullLayout,delete Ae.calcdata,delete Ae.empty,delete Ae.fid,delete Ae.undoqueue,delete Ae.undonum,delete Ae.autoplay,delete Ae.changed,delete Ae._promises,delete Ae._redrawTimer,delete Ae._hmlumcount,delete Ae._hmpixcount,delete Ae._transitionData,delete Ae._transitioning,delete Ae._initialAutoSize,delete Ae._transitioningWithDuration,delete Ae._dragging,delete Ae._dragged,delete Ae._dragdata,delete Ae._hoverdata,delete Ae._snapshotInProgress,delete Ae._editing,delete Ae._mouseDownTime,delete Ae._legendMouseDownTime,Ae.removeAllListeners&&Ae.removeAllListeners()},Z.style=function(Ae){var ke=Ae._fullLayout._visibleModules,ge=[],Ce;for(Ce=0;Ce<ke.length;Ce++){var Je=ke[Ce];Je.style&&p.pushUnique(ge,Je.style)}for(Ce=0;Ce<ge.length;Ce++)ge[Ce](Ae)},Z.sanitizeMargins=function(Ae){if(!(!Ae||!Ae.margin)){var ke=Ae.width,ge=Ae.height,Ce=Ae.margin,Je=ke-(Ce.l+Ce.r),Re=ge-(Ce.t+Ce.b),Q;Je<0&&(Q=(ke-1)/(Ce.l+Ce.r),Ce.l=Math.floor(Q*Ce.l),Ce.r=Math.floor(Q*Ce.r)),Re<0&&(Q=(ge-1)/(Ce.t+Ce.b),Ce.t=Math.floor(Q*Ce.t),Ce.b=Math.floor(Q*Ce.b))}},Z.clearAutoMarginIds=function(Ae){Ae._fullLayout._pushmarginIds={}},Z.allowAutoMargin=function(Ae,ke){Ae._fullLayout._pushmarginIds[ke]=1};function De(Ae){var ke=Ae.margin;if(!Ae._size){var ge=Ae._size={l:Math.round(ke.l),r:Math.round(ke.r),t:Math.round(ke.t),b:Math.round(ke.b),p:Math.round(ke.pad)};ge.w=Math.round(Ae.width)-ge.l-ge.r,ge.h=Math.round(Ae.height)-ge.t-ge.b}Ae._pushmargin||(Ae._pushmargin={}),Ae._pushmarginIds||(Ae._pushmarginIds={}),Ae._reservedMargin||(Ae._reservedMargin={})}var Ue=2,he=2;Z.autoMargin=function(Ae,ke,ge){var Ce=Ae._fullLayout,Je=Ce.width,Re=Ce.height,Q=Ce.margin,ce=Ce.minreducedwidth,Me=Ce.minreducedheight,Le=p.constrain(Je-Q.l-Q.r,Ue,ce),tt=p.constrain(Re-Q.t-Q.b,he,Me),bt=Math.max(0,Je-Le),Ct=Math.max(0,Re-tt),yi=Ce._pushmargin,Fl=Ce._pushmarginIds;if(Q.autoexpand!==!1){if(!ge)delete yi[ke],delete Fl[ke];else{var Yl=ge.pad;if(Yl===void 0&&(Yl=Math.min(12,Q.l,Q.r,Q.t,Q.b)),bt){var qp=(ge.l+ge.r)/bt;qp>1&&(ge.l/=qp,ge.r/=qp)}if(Ct){var Fp=(ge.t+ge.b)/Ct;Fp>1&&(ge.t/=Fp,ge.b/=Fp)}var Up=ge.xl!==void 0?ge.xl:ge.x,_r=ge.xr!==void 0?ge.xr:ge.x,gs=ge.yt!==void 0?ge.yt:ge.y,dr=ge.yb!==void 0?ge.yb:ge.y;yi[ke]={l:{val:Up,size:ge.l+Yl},r:{val:_r,size:ge.r+Yl},b:{val:dr,size:ge.b+Yl},t:{val:gs,size:ge.t+Yl}},Fl[ke]=1}if(!Ce._replotting)return Z.doAutoMargin(Ae)}};function Be(Ae){if("_redrawFromAutoMarginCount"in Ae._fullLayout)return!1;var ke=j.list(Ae,"",!0);for(var ge in ke)if(ke[ge].autoshift||ke[ge].shift)return!0;return!1}Z.doAutoMargin=function(Ae){var ke=Ae._fullLayout,ge=ke.width,Ce=ke.height;ke._size||(ke._size={}),De(ke);var Je=ke._size,Re=ke.margin,Q={t:0,b:0,l:0,r:0},ce=p.extendFlat({},Je),Me=Re.l,Le=Re.r,tt=Re.t,bt=Re.b,Ct=ke._pushmargin,yi=ke._pushmarginIds,Fl=ke.minreducedwidth,Yl=ke.minreducedheight;if(Re.autoexpand!==!1){for(var qp in Ct)yi[qp]||delete Ct[qp];var Fp=Ae._fullLayout._reservedMargin;for(var Up in Fp)for(var _r in Fp[Up]){var gs=Fp[Up][_r];Q[_r]=Math.max(Q[_r],gs)}Ct.base={l:{val:0,size:Me},r:{val:1,size:Le},t:{val:1,size:tt},b:{val:0,size:bt}};for(var dr in Q){var Lo=0;for(var Cp in Ct)Cp!=="base"&&E(Ct[Cp][dr].size)&&(Lo=Ct[Cp][dr].size>Lo?Ct[Cp][dr].size:Lo);var Hp=Math.max(0,Re[dr]-Lo);Q[dr]=Math.max(0,Q[dr]-Hp)}for(var e0 in Ct){var t0=Ct[e0].l||{},n0=Ct[e0].b||{},y0=t0.val,h0=t0.size,I0=n0.val,Kp=n0.size,B0=ge-Q.r-Q.l,em=Ce-Q.t-Q.b;for(var k0 in Ct){if(E(h0)&&Ct[k0].r){var J0=Ct[k0].r.val,vs=Ct[k0].r.size;if(J0>y0){var jl=(h0*J0+(vs-B0)*y0)/(J0-y0),zl=(vs*(1-y0)+(h0-B0)*(1-J0))/(J0-y0);jl+zl>Me+Le&&(Me=jl,Le=zl)}}if(E(Kp)&&Ct[k0].t){var Ve=Ct[k0].t.val,pn=Ct[k0].t.size;if(Ve>I0){var ci=(Kp*Ve+(pn-em)*I0)/(Ve-I0),_n=(pn*(1-I0)+(Kp-em)*(1-Ve))/(Ve-I0);ci+_n>bt+tt&&(bt=ci,tt=_n)}}}}}var Tp=p.constrain(ge-Re.l-Re.r,Ue,Fl),Sp=p.constrain(Ce-Re.t-Re.b,he,Yl),Ip=Math.max(0,ge-Tp),Jp=Math.max(0,Ce-Sp);if(Ip){var m0=(Me+Le)/Ip;m0>1&&(Me/=m0,Le/=m0)}if(Jp){var Dp=(bt+tt)/Jp;Dp>1&&(bt/=Dp,tt/=Dp)}if(Je.l=Math.round(Me)+Q.l,Je.r=Math.round(Le)+Q.r,Je.t=Math.round(tt)+Q.t,Je.b=Math.round(bt)+Q.b,Je.p=Math.round(Re.pad),Je.w=Math.round(ge)-Je.l-Je.r,Je.h=Math.round(Ce)-Je.t-Je.b,!ke._replotting&&(Z.didMarginChange(ce,Je)||Be(Ae))){"_redrawFromAutoMarginCount"in ke?ke._redrawFromAutoMarginCount++:ke._redrawFromAutoMarginCount=1;var c0=3*(1+Object.keys(yi).length);if(ke._redrawFromAutoMarginCount<c0)return T.call("_doPlot",Ae);ke._size=ce,p.warn("Too many auto-margin redraws.")}Ye(Ae)};function Ye(Ae){var ke=j.list(Ae,"",!0);["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(ge){for(var Ce=0;Ce<ke.length;Ce++){var Je=ke[Ce][ge];Je&&Je()}})}var et=["l","r","t","b","p","w","h"];Z.didMarginChange=function(Ae,ke){for(var ge=0;ge<et.length;ge++){var Ce=et[ge],Je=Ae[Ce],Re=ke[Ce];if(!E(Je)||Math.abs(Re-Je)>1)return!0}return!1},Z.graphJson=function(Ae,ke,ge,Ce,Je,Re){(Je&&ke&&!Ae._fullData||Je&&!ke&&!Ae._fullLayout)&&Z.supplyDefaults(Ae);var Q=Je?Ae._fullData:Ae.data,ce=Je?Ae._fullLayout:Ae.layout,Me=(Ae._transitionData||{})._frames;function Le(Ct,yi){if(typeof Ct=="function")return yi?"_function_":null;if(p.isPlainObject(Ct)){var Fl={},Yl;return Object.keys(Ct).sort().forEach(function(_r){if(["_","["].indexOf(_r.charAt(0))===-1){if(typeof Ct[_r]=="function"){yi&&(Fl[_r]="_function");return}if(ge==="keepdata"){if(_r.substr(_r.length-3)==="src")return}else if(ge==="keepstream"){if(Yl=Ct[_r+"src"],typeof Yl=="string"&&Yl.indexOf(":")>0&&!p.isPlainObject(Ct.stream))return}else if(ge!=="keepall"&&(Yl=Ct[_r+"src"],typeof Yl=="string"&&Yl.indexOf(":")>0))return;Fl[_r]=Le(Ct[_r],yi)}}),Fl}var qp=Array.isArray(Ct),Fp=p.isTypedArray(Ct);if((qp||Fp)&&Ct.dtype&&Ct.shape){var Up=Ct.bdata;return Le({dtype:Ct.dtype,shape:Ct.shape,bdata:p.isArrayBuffer(Up)?S.encode(Up):Up},yi)}return qp?Ct.map(function(_r){return Le(_r,yi)}):Fp?p.simpleMap(Ct,p.identity):p.isJSDate(Ct)?p.ms2DateTimeLocal(+Ct):Ct}var tt={data:(Q||[]).map(function(Ct){var yi=Le(Ct);return ke&&delete yi.fit,yi})};if(!ke&&(tt.layout=Le(ce),Je)){var bt=ce._size;tt.layout.computed={margin:{b:bt.b,l:bt.l,r:bt.r,t:bt.t}}}return Me&&(tt.frames=Le(Me)),Re&&(tt.config=Le(Ae._context,!0)),Ce==="object"?tt:JSON.stringify(tt)},Z.modifyFrames=function(Ae,ke){var ge,Ce,Je,Re=Ae._transitionData._frames,Q=Ae._transitionData._frameHash;for(ge=0;ge<ke.length;ge++)switch(Ce=ke[ge],Ce.type){case"replace":Je=Ce.value;var ce=(Re[Ce.index]||{}).name,Me=Je.name;Re[Ce.index]=Q[Me]=Je,Me!==ce&&(delete Q[ce],Q[Me]=Je);break;case"insert":Je=Ce.value,Q[Je.name]=Je,Re.splice(Ce.index,0,Je);break;case"delete":Je=Re[Ce.index],delete Q[Je.name],Re.splice(Ce.index,1);break}return Promise.resolve()},Z.computeFrame=function(Ae,ke){var ge=Ae._transitionData._frameHash,Ce,Je,Re,Q;if(!ke)throw new Error("computeFrame must be given a string frame name");var ce=ge[ke.toString()];if(!ce)return!1;for(var Me=[ce],Le=[ce.name];ce.baseframe&&(ce=ge[ce.baseframe.toString()])&&Le.indexOf(ce.name)===-1;)Me.push(ce),Le.push(ce.name);for(var tt={};ce=Me.pop();)if(ce.layout&&(tt.layout=Z.extendLayout(tt.layout,ce.layout)),ce.data){if(tt.data||(tt.data=[]),Je=ce.traces,!Je)for(Je=[],Ce=0;Ce<ce.data.length;Ce++)Je[Ce]=Ce;for(tt.traces||(tt.traces=[]),Ce=0;Ce<ce.data.length;Ce++)Re=Je[Ce],Re!=null&&(Q=tt.traces.indexOf(Re),Q===-1&&(Q=tt.data.length,tt.traces[Q]=Re),tt.data[Q]=Z.extendTrace(tt.data[Q],ce.data[Ce]))}return tt},Z.recomputeFrameHash=function(Ae){for(var ke=Ae._transitionData._frameHash={},ge=Ae._transitionData._frames,Ce=0;Ce<ge.length;Ce++){var Je=ge[Ce];Je&&Je.name&&(ke[Je.name]=Je)}},Z.extendObjectWithContainers=function(Ae,ke,ge){var Ce,Je,Re,Q,ce,Me,Le,tt,bt=p.extendDeepNoArrays({},ke||{}),Ct=p.expandObjectPaths(bt),yi={};if(ge&&ge.length)for(Re=0;Re<ge.length;Re++)Ce=p.nestedProperty(Ct,ge[Re]),Je=Ce.get(),Je===void 0?p.nestedProperty(yi,ge[Re]).set(null):(Ce.set(null),p.nestedProperty(yi,ge[Re]).set(Je));if(Ae=p.extendDeepNoArrays(Ae||{},Ct),ge&&ge.length){for(Re=0;Re<ge.length;Re++)if(ce=p.nestedProperty(yi,ge[Re]),Le=ce.get(),!!Le){for(Me=p.nestedProperty(Ae,ge[Re]),tt=Me.get(),Array.isArray(tt)||(tt=[],Me.set(tt)),Q=0;Q<Le.length;Q++){var Fl=Le[Q];Fl===null?tt[Q]=null:tt[Q]=Z.extendObjectWithContainers(tt[Q],Fl)}Me.set(tt)}}return Ae},Z.dataArrayContainers=["transforms","dimensions"],Z.layoutArrayContainers=T.layoutArrayContainers,Z.extendTrace=function(Ae,ke){return Z.extendObjectWithContainers(Ae,ke,Z.dataArrayContainers)},Z.extendLayout=function(Ae,ke){return Z.extendObjectWithContainers(Ae,ke,Z.layoutArrayContainers)},Z.transition=function(Ae,ke,ge,Ce,Je,Re){var Q={redraw:Je.redraw},ce={},Me=[];return Q.prepareFn=function(){for(var Le=Array.isArray(ke)?ke.length:0,tt=Ce.slice(0,Le),bt=0;bt<tt.length;bt++){var Ct=tt[bt],yi=Ae._fullData[Ct],Fl=yi._module;if(Fl){if(Fl.animatable){var Yl=Fl.basePlotModule.name;ce[Yl]||(ce[Yl]=[]),ce[Yl].push(Ct)}Ae.data[tt[bt]]=Z.extendTrace(Ae.data[tt[bt]],ke[bt])}}var qp=p.expandObjectPaths(p.extendDeepNoArrays({},ge)),Fp=/^[xy]axis[0-9]*$/;for(var Up in qp)Fp.test(Up)&&delete qp[Up].range;Z.extendLayout(Ae.layout,qp),delete Ae.calcdata,Z.supplyDefaults(Ae),Z.doCalcdata(Ae);var _r=p.expandObjectPaths(ge);if(_r){var gs=Ae._fullLayout._plots;for(var dr in gs){var Lo=gs[dr],Cp=Lo.xaxis,Hp=Lo.yaxis,e0=Cp.range.slice(),t0=Hp.range.slice(),n0=null,y0=null,h0=null,I0=null;Array.isArray(_r[Cp._name+".range"])?n0=_r[Cp._name+".range"].slice():Array.isArray((_r[Cp._name]||{}).range)&&(n0=_r[Cp._name].range.slice()),Array.isArray(_r[Hp._name+".range"])?y0=_r[Hp._name+".range"].slice():Array.isArray((_r[Hp._name]||{}).range)&&(y0=_r[Hp._name].range.slice()),e0&&n0&&(Cp.r2l(e0[0])!==Cp.r2l(n0[0])||Cp.r2l(e0[1])!==Cp.r2l(n0[1]))&&(h0={xr0:e0,xr1:n0}),t0&&y0&&(Hp.r2l(t0[0])!==Hp.r2l(y0[0])||Hp.r2l(t0[1])!==Hp.r2l(y0[1]))&&(I0={yr0:t0,yr1:y0}),(h0||I0)&&Me.push(p.extendFlat({plotinfo:Lo},h0,I0))}}return Promise.resolve()},Q.runFn=function(Le){var tt,bt=Ae._fullLayout._basePlotModules,Ct=Me.length,yi;if(ge)for(yi=0;yi<bt.length;yi++)bt[yi].transitionAxes&&bt[yi].transitionAxes(Ae,Me,Re,Le);Ct?(tt=p.extendFlat({},Re),tt.duration=0,delete ce.cartesian):tt=Re;for(var Fl in ce){var Yl=ce[Fl],qp=Ae._fullData[Yl[0]]._module;qp.basePlotModule.plot(Ae,Yl,tt,Le)}},Qe(Ae,Re,Q)},Z.transitionFromReact=function(Ae,ke,ge,Ce){var Je=Ae._fullLayout,Re=Je.transition,Q={},ce=[];return Q.prepareFn=function(){var Me=Je._plots;Q.redraw=!1,ke.anim==="some"&&(Q.redraw=!0),ge.anim==="some"&&(Q.redraw=!0);for(var Le in Me){var tt=Me[Le],bt=tt.xaxis,Ct=tt.yaxis,yi=Ce[bt._name].range.slice(),Fl=Ce[Ct._name].range.slice(),Yl=bt.range.slice(),qp=Ct.range.slice();bt.setScale(),Ct.setScale();var Fp=null,Up=null;(bt.r2l(yi[0])!==bt.r2l(Yl[0])||bt.r2l(yi[1])!==bt.r2l(Yl[1]))&&(Fp={xr0:yi,xr1:Yl}),(Ct.r2l(Fl[0])!==Ct.r2l(qp[0])||Ct.r2l(Fl[1])!==Ct.r2l(qp[1]))&&(Up={yr0:Fl,yr1:qp}),(Fp||Up)&&ce.push(p.extendFlat({plotinfo:tt},Fp,Up))}return Promise.resolve()},Q.runFn=function(Me){for(var Le=Ae._fullData,tt=Ae._fullLayout,bt=tt._basePlotModules,Ct,yi,Fl,Yl=[],qp=0;qp<Le.length;qp++)Yl.push(qp);function Fp(){if(Ae._fullLayout)for(var _r=0;_r<bt.length;_r++)bt[_r].transitionAxes&&bt[_r].transitionAxes(Ae,ce,Ct,Me)}function Up(){if(Ae._fullLayout)for(var _r=0;_r<bt.length;_r++)bt[_r].plot(Ae,Fl,yi,Me)}ce.length&&ke.anim?Re.ordering==="traces first"?(Ct=p.extendFlat({},Re,{duration:0}),Fl=Yl,yi=Re,setTimeout(Fp,Re.duration),Up()):(Ct=Re,Fl=null,yi=p.extendFlat({},Re,{duration:0}),setTimeout(Up,Ct.duration),Fp()):ce.length?(Ct=Re,Fp()):ke.anim&&(Fl=Yl,yi=Re,Up())},Qe(Ae,Re,Q)};function Qe(Ae,ke,ge){var Ce=!1;function Je(bt){var Ct=Promise.resolve();if(!bt)return Ct;for(;bt.length;)Ct=Ct.then(bt.shift());return Ct}function Re(bt){if(bt)for(;bt.length;)bt.shift()}function Q(){return Ae.emit("plotly_transitioning",[]),new Promise(function(bt){Ae._transitioning=!0,ke.duration>0&&(Ae._transitioningWithDuration=!0),Ae._transitionData._interruptCallbacks.push(function(){Ce=!0}),ge.redraw&&Ae._transitionData._interruptCallbacks.push(function(){return T.call("redraw",Ae)}),Ae._transitionData._interruptCallbacks.push(function(){Ae.emit("plotly_transitioninterrupted",[])});var Ct=0,yi=0;function Fl(){return Ct++,function(){yi++,!Ce&&yi===Ct&&ce(bt)}}ge.runFn(Fl),setTimeout(Fl())})}function ce(bt){if(Ae._transitionData)return Re(Ae._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(ge.redraw)return T.call("redraw",Ae)}).then(function(){Ae._transitioning=!1,Ae._transitioningWithDuration=!1,Ae.emit("plotly_transitioned",[])}).then(bt)}function Me(){if(Ae._transitionData)return Ae._transitioning=!1,Je(Ae._transitionData._interruptCallbacks)}var Le=[Z.previousPromises,Me,ge.prepareFn,Z.rehover,Z.reselect,Q],tt=p.syncOrAsync(Le,Ae);return(!tt||!tt.then)&&(tt=Promise.resolve()),tt.then(function(){return Ae})}Z.doCalcdata=function(Ae,ke){var ge=j.list(Ae),Ce=Ae._fullData,Je=Ae._fullLayout,Re,Q,ce,Me,Le=new Array(Ce.length),tt=(Ae.calcdata||[]).slice();for(Ae.calcdata=Le,Je._numBoxes=0,Je._numViolins=0,Je._violinScaleGroupStats={},Ae._hmpixcount=0,Ae._hmlumcount=0,Je._piecolormap={},Je._sunburstcolormap={},Je._treemapcolormap={},Je._iciclecolormap={},Je._funnelareacolormap={},ce=0;ce<Ce.length;ce++)if(Array.isArray(ke)&&ke.indexOf(ce)===-1){Le[ce]=tt[ce];continue}for(ce=0;ce<Ce.length;ce++)Re=Ce[ce],Re._arrayAttrs=C.findArrayAttributes(Re),Re._extremes={};var bt=Je._subplots.polar||[];for(ce=0;ce<bt.length;ce++)ge.push(Je[bt[ce]].radialaxis,Je[bt[ce]].angularaxis);for(var Ct in Je._colorAxes){var yi=Je[Ct];yi.cauto!==!1&&(delete yi.cmin,delete yi.cmax)}var Fl=!1;function Yl(Up){if(Re=Ce[Up],Q=Re._module,Re.visible===!0&&Re.transforms){if(Q&&Q.calc){var _r=Q.calc(Ae,Re);_r[0]&&_r[0].t&&_r[0].t._scene&&delete _r[0].t._scene.dirty}for(Me=0;Me<Re.transforms.length;Me++){var gs=Re.transforms[Me];Q=transformsRegistry[gs.type],Q&&Q.calcTransform&&(Re._hasCalcTransform=!0,Fl=!0,Q.calcTransform(Ae,Re,gs))}}}function qp(Up,_r){if(Re=Ce[Up],Q=Re._module,!!Q.isContainer===_r){var gs=[];if(Re.visible===!0&&Re._length!==0){delete Re._indexToPoints;var dr=Re.transforms||[];for(Me=dr.length-1;Me>=0;Me--)if(dr[Me].enabled){Re._indexToPoints=dr[Me]._indexToPoints;break}Q&&Q.calc&&(gs=Q.calc(Ae,Re))}(!Array.isArray(gs)||!gs[0])&&(gs=[{x:N,y:N}]),gs[0].t||(gs[0].t={}),gs[0].trace=Re,Le[Up]=gs}}for(ta(ge,Ce,Je),ce=0;ce<Ce.length;ce++)qp(ce,!0);for(ce=0;ce<Ce.length;ce++)Yl(ce);for(Fl&&ta(ge,Ce,Je),ce=0;ce<Ce.length;ce++)qp(ce,!0);for(ce=0;ce<Ce.length;ce++)qp(ce,!1);Do(Ae);var Fp=mn(ge,Ae);if(Fp.length){for(Je._numBoxes=0,Je._numViolins=0,ce=0;ce<Fp.length;ce++)qp(Fp[ce],!0);for(ce=0;ce<Fp.length;ce++)qp(Fp[ce],!1);Do(Ae)}T.getComponentMethod("fx","calc")(Ae),T.getComponentMethod("errorbars","calc")(Ae)};var ft=/(total|sum|min|max|mean|geometric mean|median) (ascending|descending)/;function mn(Ae,ke){var ge=[],Ce,Je,Re,Q,ce;function Me(k0,J0,vs){var jl=J0._id.charAt(0);if(k0==="histogram2dcontour"){var zl=J0._counterAxes[0],Ve=j.getFromId(ke,zl),pn=jl==="x"||zl==="x"&&Ve.type==="category",ci=jl==="y"||zl==="y"&&Ve.type==="category";return function(_n,Tp){return _n===0||Tp===0||pn&&_n===vs[Tp].length-1||ci&&Tp===vs.length-1?-1:(jl==="y"?Tp:_n)-1}}else return function(_n,Tp){return jl==="y"?Tp:_n}}var Le={min:function(k0){return p.aggNums(Math.min,null,k0)},max:function(k0){return p.aggNums(Math.max,null,k0)},sum:function(k0){return p.aggNums(function(J0,vs){return J0+vs},null,k0)},total:function(k0){return p.aggNums(function(J0,vs){return J0+vs},null,k0)},mean:function(k0){return p.mean(k0)},"geometric mean":function(k0){return p.geometricMean(k0)},median:function(k0){return p.median(k0)}};function tt(k0,J0){return k0[1]-J0[1]}function bt(k0,J0){return J0[1]-k0[1]}for(Ce=0;Ce<Ae.length;Ce++){var Ct=Ae[Ce];if(Ct.type==="category"){var yi=Ct.categoryorder.match(ft);if(yi){var Fl=yi[1],Yl=yi[2],qp=Ct._id.charAt(0),Fp=qp==="x",Up=[];for(Je=0;Je<Ct._categories.length;Je++)Up.push([Ct._categories[Je],[]]);for(Je=0;Je<Ct._traceIndices.length;Je++){var _r=Ct._traceIndices[Je],gs=ke._fullData[_r];if(gs.visible===!0){var dr=gs.type;T.traceIs(gs,"histogram")&&(delete gs._xautoBinFinished,delete gs._yautoBinFinished);var Lo=dr==="splom",Cp=dr==="scattergl",Hp=ke.calcdata[_r];for(Re=0;Re<Hp.length;Re++){var e0=Hp[Re],t0,n0;if(Lo){var y0=gs._axesDim[Ct._id];if(!Fp){var h0=gs._diag[y0][0];h0&&(Ct=ke._fullLayout[j.id2name(h0)])}var I0=e0.trace.dimensions[y0].values;for(Q=0;Q<I0.length;Q++)for(t0=Ct._categoriesMap[I0[Q]],ce=0;ce<e0.trace.dimensions.length;ce++)if(ce!==y0){var Kp=e0.trace.dimensions[ce];Up[t0][1].push(Kp.values[Q])}}else if(Cp){for(Q=0;Q<e0.t.x.length;Q++)Fp?(t0=e0.t.x[Q],n0=e0.t.y[Q]):(t0=e0.t.y[Q],n0=e0.t.x[Q]),Up[t0][1].push(n0);e0.t&&e0.t._scene&&delete e0.t._scene.dirty}else if(e0.hasOwnProperty("z")){n0=e0.z;var B0=Me(gs.type,Ct,n0);for(Q=0;Q<n0.length;Q++)for(ce=0;ce<n0[Q].length;ce++)t0=B0(ce,Q),t0+1&&Up[t0][1].push(n0[Q][ce])}else for(t0=e0.p,t0===void 0&&(t0=e0[qp]),n0=e0.s,n0===void 0&&(n0=e0.v),n0===void 0&&(n0=Fp?e0.y:e0.x),Array.isArray(n0)||(n0===void 0?n0=[]:n0=[n0]),Q=0;Q<n0.length;Q++)Up[t0][1].push(n0[Q])}}}Ct._categoriesValue=Up;var em=[];for(Je=0;Je<Up.length;Je++)em.push([Up[Je][0],Le[Fl](Up[Je][1])]);em.sort(Yl==="descending"?bt:tt),Ct._categoriesAggregatedValue=em,Ct._initialCategories=em.map(function(k0){return k0[0]}),ge=ge.concat(Ct.sortByInitialCategories())}}}return ge}function ta(Ae,ke,ge){var Ce={};function Je(Me){Me.clearCalc(),Me.type==="multicategory"&&Me.setupMultiCategory(ke),Ce[Me._id]=1}p.simpleMap(Ae,Je);for(var Re=ge._axisMatchGroups||[],Q=0;Q<Re.length;Q++)for(var ce in Re[Q])Ce[ce]||Je(ge[j.id2name(ce)])}function Do(Ae){var ke=Ae._fullLayout,ge=ke._visibleModules,Ce={},Je,Re,Q;for(Re=0;Re<ge.length;Re++){var ce=ge[Re],Me=ce.crossTraceCalc;if(Me){var Le=ce.basePlotModule.name;Ce[Le]?p.pushUnique(Ce[Le],Me):Ce[Le]=[Me]}}for(Q in Ce){var tt=Ce[Q],bt=ke._subplots[Q];if(Array.isArray(bt))for(Je=0;Je<bt.length;Je++){var Ct=bt[Je],yi=Q==="cartesian"?ke._plots[Ct]:ke[Ct];for(Re=0;Re<tt.length;Re++)tt[Re](Ae,yi,Ct)}else for(Re=0;Re<tt.length;Re++)tt[Re](Ae)}}Z.rehover=function(Ae){Ae._fullLayout._rehover&&Ae._fullLayout._rehover()},Z.redrag=function(Ae){Ae._fullLayout._redrag&&Ae._fullLayout._redrag()},Z.reselect=function(Ae){var ke=Ae._fullLayout,ge=(Ae.layout||{}).selections,Ce=ke._previousSelections;ke._previousSelections=ge;var Je=ke._reselect||JSON.stringify(ge)!==JSON.stringify(Ce);T.getComponentMethod("selections","reselect")(Ae,Je)},Z.generalUpdatePerTraceModule=function(Ae,ke,ge,Ce){var Je=ke.traceHash,Re={},Q;for(Q=0;Q<ge.length;Q++){var ce=ge[Q],Me=ce[0].trace;Me.visible&&(Re[Me.type]=Re[Me.type]||[],Re[Me.type].push(ce))}for(var Le in Je)if(!Re[Le]){var tt=Je[Le][0],bt=tt[0].trace;bt.visible=!1,Re[Le]=[tt]}for(var Ct in Re){var yi=Re[Ct],Fl=yi[0][0].trace._module;Fl.plot(Ae,ke,p.filterVisible(yi),Ce)}ke.traceHash=Re},Z.plotBasePlot=function(Ae,ke,ge,Ce,Je){var Re=T.getModule(Ae),Q=q(ke.calcdata,Re)[0];Re.plot(ke,Q,Ce,Je)},Z.cleanBasePlot=function(Ae,ke,ge,Ce,Je){var Re=Je._has&&Je._has(Ae),Q=ge._has&&ge._has(Ae);Re&&!Q&&Je["_"+Ae+"layer"].selectAll("g.trace").remove()}}}),P1=a({"src/constants/xmlns_namespaces.js"(pe){pe.xmlns="http://www.w3.org/2000/xmlns/",pe.svg="http://www.w3.org/2000/svg",pe.xlink="http://www.w3.org/1999/xlink",pe.svgAttrs={xmlns:pe.svg,"xmlns:xlink":pe.xlink}}}),f1=a({"src/constants/alignment.js"(pe,me){me.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}}}),v1=a({"src/lib/svg_text_utils.js"(pe){var me=f(),M=o0(),v=M.strTranslate,g=P1(),E=f1().LINE_SPACING,S=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;pe.convertToTspans=function(he,Be,Ye){var et=he.text(),Qe=!he.attr("data-notex")&&Be&&Be._context.typesetMath&&typeof MathJax<"u"&&et.match(S),ft=me.select(he.node().parentNode);if(ft.empty())return;var mn=he.attr("class")?he.attr("class").split(" ")[0]:"text";mn+="-math",ft.selectAll("svg."+mn).remove(),ft.selectAll("g."+mn+"-group").remove(),he.style("display",null).attr({"data-unformatted":et,"data-math":"N"});function ta(){ft.empty()||(mn=he.attr("class")+"-math",ft.select("svg."+mn).remove()),he.text("").style("white-space","pre");var Do=Te(he.node(),et);Do&&he.style("pointer-events","all"),pe.positionText(he),Ye&&Ye.call(he)}return Qe?(Be&&Be._promises||[]).push(new Promise(function(Do){he.style("display","none");var Ae=parseInt(he.node().style.fontSize,10),ke={fontSize:Ae};Y(Qe[2],ke,function(ge,Ce,Je){ft.selectAll("svg."+mn).remove(),ft.selectAll("g."+mn+"-group").remove();var Re=ge&&ge.select("svg");if(!Re||!Re.node()){ta(),Do();return}var Q=ft.append("g").classed(mn+"-group",!0).attr({"pointer-events":"none","data-unformatted":et,"data-math":"Y"});Q.node().appendChild(Re.node()),Ce&&Ce.node()&&Re.node().insertBefore(Ce.node().cloneNode(!0),Re.node().firstChild);var ce=Je.width,Me=Je.height;Re.attr({class:mn,height:Me,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var Le=he.node().style.fill||"black",tt=Re.select("g");tt.attr({fill:Le,stroke:Le});var bt=tt.node().getBoundingClientRect(),Ct=bt.width,yi=bt.height;(Ct>ce||yi>Me)&&(Re.style("overflow","hidden"),bt=Re.node().getBoundingClientRect(),Ct=bt.width,yi=bt.height);var Fl=+he.attr("x"),Yl=+he.attr("y"),qp=Ae||he.node().getBoundingClientRect().height,Fp=-qp/4;if(mn[0]==="y")Q.attr({transform:"rotate("+[-90,Fl,Yl]+")"+v(-Ct/2,Fp-yi/2)});else if(mn[0]==="l")Yl=Fp-yi/2;else if(mn[0]==="a"&&mn.indexOf("atitle")!==0)Fl=0,Yl=Fp;else{var Up=he.attr("text-anchor");Fl=Fl-Ct*(Up==="middle"?.5:Up==="end"?1:0),Yl=Yl+Fp-yi/2}Re.attr({x:Fl,y:Yl}),Ye&&Ye.call(he,Q),Do(Q)})})):ta(),he};var T=/(<|&lt;|&#60;)/g,C=/(>|&gt;|&#62;)/g;function P(he){return he.replace(T,"\\lt ").replace(C,"\\gt ")}var p=[["$","$"],["\\(","\\)"]];function Y(he,Be,Ye){var et=parseInt((MathJax.version||"").split(".")[0]);if(et!==2&&et!==3){M.warn("No MathJax version:",MathJax.version);return}var Qe,ft,mn,ta,Do=function(){return ft=M.extendDeepAll({},MathJax.Hub.config),mn=MathJax.Hub.processSectionDelay,MathJax.Hub.processSectionDelay!==void 0&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:p},displayAlign:"left"})},Ae=function(){ft=M.extendDeepAll({},MathJax.config),MathJax.config.tex||(MathJax.config.tex={}),MathJax.config.tex.inlineMath=p},ke=function(){if(Qe=MathJax.Hub.config.menuSettings.renderer,Qe!=="SVG")return MathJax.Hub.setRenderer("SVG")},ge=function(){Qe=MathJax.config.startup.output,Qe!=="svg"&&(MathJax.config.startup.output="svg")},Ce=function(){var Le="math-output-"+M.randstr({},64);ta=me.select("body").append("div").attr({id:Le}).style({visibility:"hidden",position:"absolute","font-size":Be.fontSize+"px"}).text(P(he));var tt=ta.node();return et===2?MathJax.Hub.Typeset(tt):MathJax.typeset([tt])},Je=function(){var Le=ta.select(et===2?".MathJax_SVG":".MathJax"),tt=!Le.empty()&&ta.select("svg").node();if(!tt)M.log("There was an error in the tex syntax.",he),Ye();else{var bt=tt.getBoundingClientRect(),Ct;et===2?Ct=me.select("body").select("#MathJax_SVG_glyphs"):Ct=Le.select("defs"),Ye(Le,Ct,bt)}ta.remove()},Re=function(){if(Qe!=="SVG")return MathJax.Hub.setRenderer(Qe)},Q=function(){Qe!=="svg"&&(MathJax.config.startup.output=Qe)},ce=function(){return mn!==void 0&&(MathJax.Hub.processSectionDelay=mn),MathJax.Hub.Config(ft)},Me=function(){MathJax.config=ft};et===2?MathJax.Hub.Queue(Do,ke,Ce,Je,Re,ce):et===3&&(Ae(),ge(),MathJax.startup.defaultReady(),MathJax.startup.promise.then(function(){Ce(),Je(),Q(),Me()}))}var N={sup:"font-size:70%",sub:"font-size:70%",s:"text-decoration:line-through",u:"text-decoration:underline",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},j={sub:"0.3em",sup:"-0.6em"},ee={sub:"-0.21em",sup:"0.42em"},G="​",V=["http:","https:","mailto:","",void 0,":"],W=pe.NEWLINES=/(\r\n?|\n)/g,q=/(<[^<>]*>)/,z=/<(\/?)([^ >]*)(\s+(.*))?>/i,H=/<br(\s+.*)?>/i;pe.BR_TAG_ALL=/<br(\s+.*)?>/gi;var Z=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,ne=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,te=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,Se=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function fe(he,Be){if(!he)return null;var Ye=he.match(Be),et=Ye&&(Ye[3]||Ye[4]);return et&&de(et)}var ve=/(^|;)\s*color:/;pe.plainText=function(he,Be){Be=Be||{};for(var Ye=Be.len!==void 0&&Be.len!==-1?Be.len:1/0,et=Be.allowedTags!==void 0?Be.allowedTags:["br"],Qe="...",ft=Qe.length,mn=he.split(q),ta=[],Do="",Ae=0,ke=0;ke<mn.length;ke++){var ge=mn[ke],Ce=ge.match(z),Je=Ce&&Ce[2].toLowerCase();if(Je)et.indexOf(Je)!==-1&&(ta.push(ge),Do=Je);else{var Re=ge.length;if(Ae+Re<Ye)ta.push(ge),Ae+=Re;else if(Ae<Ye){var Q=Ye-Ae;Do&&(Do!=="br"||Q<=ft||Re<=ft)&&ta.pop(),Ye>ft?ta.push(ge.substr(0,Q-ft)+Qe):ta.push(ge.substr(0,Q));break}Do=""}}return ta.join("")};var xe={mu:"μ",amp:"&",lt:"<",gt:">",nbsp:" ",times:"×",plusmn:"±",deg:"°"},re=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function de(he){return he.replace(re,function(Be,Ye){var et;return Ye.charAt(0)==="#"?et=be(Ye.charAt(1)==="x"?parseInt(Ye.substr(2),16):parseInt(Ye.substr(1),10)):et=xe[Ye],et||Be})}pe.convertEntities=de;function be(he){if(!(he>1114111)){var Be=String.fromCodePoint;if(Be)return Be(he);var Ye=String.fromCharCode;return he<=65535?Ye(he):Ye((he>>10)+55232,he%1024+56320)}}function Te(he,Be){Be=Be.replace(W," ");var Ye=!1,et=[],Qe,ft=-1;function mn(){ft++;var yi=document.createElementNS(g.svg,"tspan");me.select(yi).attr({class:"line",dy:ft*E+"em"}),he.appendChild(yi),Qe=yi;var Fl=et;if(et=[{node:yi}],Fl.length>1)for(var Yl=1;Yl<Fl.length;Yl++)ta(Fl[Yl])}function ta(yi){var Fl=yi.type,Yl={},qp;if(Fl==="a"){qp="a";var Fp=yi.target,Up=yi.href,_r=yi.popup;Up&&(Yl={"xlink:xlink:show":Fp==="_blank"||Fp.charAt(0)!=="_"?"new":"replace",target:Fp,"xlink:xlink:href":Up},_r&&(Yl.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+_r+'");return false;'))}else qp="tspan";yi.style&&(Yl.style=yi.style);var gs=document.createElementNS(g.svg,qp);if(Fl==="sup"||Fl==="sub"){Do(Qe,G),Qe.appendChild(gs);var dr=document.createElementNS(g.svg,"tspan");Do(dr,G),me.select(dr).attr("dy",ee[Fl]),Yl.dy=j[Fl],Qe.appendChild(gs),Qe.appendChild(dr)}else Qe.appendChild(gs);me.select(gs).attr(Yl),Qe=yi.node=gs,et.push(yi)}function Do(yi,Fl){yi.appendChild(document.createTextNode(Fl))}function Ae(yi){if(et.length===1){M.log("Ignoring unexpected end tag </"+yi+">.",Be);return}var Fl=et.pop();yi!==Fl.type&&M.log("Start tag <"+Fl.type+"> doesnt match end tag <"+yi+">. Pretending it did match.",Be),Qe=et[et.length-1].node}var ke=H.test(Be);ke?mn():(Qe=he,et=[{node:he}]);for(var ge=Be.split(q),Ce=0;Ce<ge.length;Ce++){var Je=ge[Ce],Re=Je.match(z),Q=Re&&Re[2].toLowerCase(),ce=N[Q];if(Q==="br")mn();else if(ce===void 0)Do(Qe,de(Je));else if(Re[1])Ae(Q);else{var Me=Re[4],Le={type:Q},tt=fe(Me,Z);if(tt?(tt=tt.replace(ve,"$1 fill:"),ce&&(tt+=";"+ce)):ce&&(tt=ce),tt&&(Le.style=tt),Q==="a"){Ye=!0;var bt=fe(Me,ne);if(bt){var Ct=ye(bt);Ct&&(Le.href=Ct,Le.target=fe(Me,te)||"_blank",Le.popup=fe(Me,Se))}}ta(Le)}}return Ye}function ye(he){var Be=encodeURI(decodeURI(he)),Ye=document.createElement("a"),et=document.createElement("a");Ye.href=he,et.href=Be;var Qe=Ye.protocol,ft=et.protocol;return V.indexOf(Qe)!==-1&&V.indexOf(ft)!==-1?Be:""}pe.sanitizeHTML=function(Be){Be=Be.replace(W," ");for(var Ye=document.createElement("p"),et=Ye,Qe=[],ft=Be.split(q),mn=0;mn<ft.length;mn++){var ta=ft[mn],Do=ta.match(z),Ae=Do&&Do[2].toLowerCase();if(Ae in N)if(Do[1])Qe.length&&(et=Qe.pop());else{var ke=Do[4],ge=fe(ke,Z),Ce=ge?{style:ge}:{};if(Ae==="a"){var Je=fe(ke,ne);if(Je){var Re=ye(Je);if(Re){Ce.href=Re;var Q=fe(ke,te);Q&&(Ce.target=Q)}}}var ce=document.createElement(Ae);et.appendChild(ce),me.select(ce).attr(Ce),et=ce,Qe.push(ce)}else et.appendChild(document.createTextNode(de(ta)))}var Me="innerHTML";return Ye[Me]},pe.lineCount=function(Be){return Be.selectAll("tspan.line").size()||1},pe.positionText=function(Be,Ye,et){return Be.each(function(){var Qe=me.select(this);function ft(Do,Ae){return Ae===void 0?(Ae=Qe.attr(Do),Ae===null&&(Qe.attr(Do,0),Ae=0)):Qe.attr(Do,Ae),Ae}var mn=ft("x",Ye),ta=ft("y",et);this.nodeName==="text"&&Qe.selectAll("tspan.line").attr({x:mn,y:ta})})};function De(he,Be,Ye){var et=Ye.horizontalAlign,Qe=Ye.verticalAlign||"top",ft=he.node().getBoundingClientRect(),mn=Be.node().getBoundingClientRect(),ta,Do,Ae;return Qe==="bottom"?Do=function(){return ft.bottom-ta.height}:Qe==="middle"?Do=function(){return ft.top+(ft.height-ta.height)/2}:Do=function(){return ft.top},et==="right"?Ae=function(){return ft.right-ta.width}:et==="center"?Ae=function(){return ft.left+(ft.width-ta.width)/2}:Ae=function(){return ft.left},function(){ta=this.node().getBoundingClientRect();var ke=Ae()-mn.left,ge=Do()-mn.top,Ce=Ye.gd||{};if(Ye.gd){Ce._fullLayout._calcInverseTransform(Ce);var Je=M.apply3DTransform(Ce._fullLayout._invTransform)(ke,ge);ke=Je[0],ge=Je[1]}return this.style({top:ge+"px",left:ke+"px","z-index":1e3}),this}}var Ue="1px ";pe.makeTextShadow=function(he){var Be=Ue,Ye=Ue,et=Ue;return Be+Ye+et+he+", -"+Be+"-"+Ye+et+he+", "+Be+"-"+Ye+et+he+", -"+Be+Ye+et+he},pe.makeEditable=function(he,Be){var Ye=Be.gd,et=Be.delegate,Qe=me.dispatch("edit","input","cancel"),ft=et||he;if(he.style({"pointer-events":et?"none":"all"}),he.size()!==1)throw new Error("boo");function mn(){Do(),he.style({opacity:0});var Ae=ft.attr("class"),ke;Ae?ke="."+Ae.split(" ")[0]+"-math-group":ke="[class*=-math-group]",ke&&me.select(he.node().parentNode).select(ke).style({opacity:0})}function ta(Ae){var ke=Ae.node(),ge=document.createRange();ge.selectNodeContents(ke);var Ce=window.getSelection();Ce.removeAllRanges(),Ce.addRange(ge),ke.focus()}function Do(){var Ae=me.select(Ye),ke=Ae.select(".svg-container"),ge=ke.append("div"),Ce=he.node().style,Je=parseFloat(Ce.fontSize||12),Re=Be.text;Re===void 0&&(Re=he.attr("data-unformatted")),ge.classed("plugin-editable editable",!0).style({position:"absolute","font-family":Ce.fontFamily||"Arial","font-size":Je,color:Be.fill||Ce.fill||"black",opacity:1,"background-color":Be.background||"transparent",outline:"#ffffff33 1px solid",margin:[-Je/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(Re).call(De(he,ke,Be)).on("blur",function(){Ye._editing=!1,he.text(this.textContent).style({opacity:1});var Q=me.select(this).attr("class"),ce;Q?ce="."+Q.split(" ")[0]+"-math-group":ce="[class*=-math-group]",ce&&me.select(he.node().parentNode).select(ce).style({opacity:0});var Me=this.textContent;me.select(this).transition().duration(0).remove(),me.select(document).on("mouseup",null),Qe.edit.call(he,Me)}).on("focus",function(){var Q=this;Ye._editing=!0,me.select(document).on("mouseup",function(){if(me.event.target===Q)return!1;document.activeElement===ge.node()&&ge.node().blur()})}).on("keyup",function(){me.event.which===27?(Ye._editing=!1,he.style({opacity:1}),me.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),Qe.cancel.call(he,this.textContent)):(Qe.input.call(he,this.textContent),me.select(this).call(De(he,ke,Be)))}).on("keydown",function(){me.event.which===13&&this.blur()}).call(ta)}return Be.immediate?mn():ft.on("click",mn),me.rebind(he,Qe,"on")}}}),Q1=a({"src/components/colorscale/helpers.js"(pe,me){var M=f(),v=b(),g=w(),E=o0(),S=Oe(),T=Pe().isValid;function C(W,q,z){var H=q?E.nestedProperty(W,q).get()||{}:W,Z=H[z||"color"];Z&&Z._inputArray&&(Z=Z._inputArray);var ne=!1;if(E.isArrayOrTypedArray(Z)){for(var te=0;te<Z.length;te++)if(g(Z[te])){ne=!0;break}}return E.isPlainObject(H)&&(ne||H.showscale===!0||g(H.cmin)&&g(H.cmax)||T(H.colorscale)||E.isPlainObject(H.colorbar))}var P=["showscale","autocolorscale","colorscale","reversescale","colorbar"],p=["min","max","mid","auto"];function Y(W){var q=W._colorAx,z=q||W,H={},Z,ne,te;for(ne=0;ne<P.length;ne++)te=P[ne],H[te]=z[te];if(q)for(Z="c",ne=0;ne<p.length;ne++)te=p[ne],H[te]=z["c"+te];else{var Se;for(ne=0;ne<p.length;ne++){if(te=p[ne],Se="c"+te,Se in z){H[te]=z[Se];continue}Se="z"+te,Se in z&&(H[te]=z[Se])}Z=Se.charAt(0)}return H._sync=function(fe,ve){var xe=p.indexOf(fe)!==-1?Z+fe:fe;z[xe]=z["_"+xe]=ve},H}function N(W){for(var q=Y(W),z=q.min,H=q.max,Z=q.reversescale?j(q.colorscale):q.colorscale,ne=Z.length,te=new Array(ne),Se=new Array(ne),fe=0;fe<ne;fe++){var ve=Z[fe];te[fe]=z+ve[0]*(H-z),Se[fe]=ve[1]}return{domain:te,range:Se}}function j(W){for(var q=W.length,z=new Array(q),H=q-1,Z=0;H>=0;H--,Z++){var ne=W[H];z[Z]=[1-ne[0],ne[1]]}return z}function ee(W,q){q=q||{};for(var z=W.domain,H=W.range,Z=H.length,ne=new Array(Z),te=0;te<Z;te++){var Se=v(H[te]).toRgb();ne[te]=[Se.r,Se.g,Se.b,Se.a]}var fe=M.scale.linear().domain(z).range(ne).clamp(!0),ve=q.noNumericCheck,xe=q.returnArray,re;return ve&&xe?re=fe:ve?re=function(de){return V(fe(de))}:xe?re=function(de){return g(de)?fe(de):v(de).isValid()?de:S.defaultLine}:re=function(de){return g(de)?V(fe(de)):v(de).isValid()?de:S.defaultLine},re.domain=fe.domain,re.range=function(){return H},re}function G(W,q){return ee(N(W),q)}function V(W){var q={r:W[0],g:W[1],b:W[2],a:W[3]};return v(q).toRgbString()}me.exports={hasColorscale:C,extractOpts:Y,extractScale:N,flipScale:j,makeColorScaleFunc:ee,makeColorScaleFuncFromTrace:G}}}),Kv=a({"src/plots/cartesian/axis_format_attributes.js"(pe,me){var M=L0(),v=M.FORMAT_LINK,g=M.DATE_FORMAT_LINK;function E(C,P){return{valType:"string",dflt:"",editType:"none",description:(P?S:T)("hover text",C)+["By default the values are formatted using "+(P?"generic number format":"`"+C+"axis.hoverformat`")+"."].join(" ")}}function S(C,P){return["Sets the "+C+" formatting rule"+(P?"for `"+P+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+v+"."].join(" ")}function T(C,P){return S(C,P)+[" And for dates see: "+g+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}me.exports={axisHoverFormat:E,descriptionOnlyNumbers:S,descriptionWithDates:T}}}),O1=a({"src/plots/cartesian/layout_attributes.js"(pe,me){var M=B(),v=ue(),g=Bp().dash,E=k().extendFlat,S=Vm().templatedArray;kl().templateFormatStringDescription;var T=Kv().descriptionWithDates,C=A().ONEDAY,P=wv(),p=P.HOUR_PATTERN,Y=P.WEEKDAY_PATTERN,N={valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}},j=E({},N,{values:N.values.slice().concat(["sync"])});function ee(ve){return{valType:"integer",min:0,dflt:ve?5:0,editType:"ticks"}}var G={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},V={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},W={valType:"data_array",editType:"ticks"},q={valType:"enumerated",values:["outside","inside",""],editType:"ticks"};function z(ve){var xe={valType:"number",min:0,editType:"ticks"};return ve||(xe.dflt=5),xe}function H(ve){var xe={valType:"number",min:0,editType:"ticks"};return ve||(xe.dflt=1),xe}var Z={valType:"color",dflt:v.defaultLine,editType:"ticks"},ne={valType:"color",dflt:v.lightLine,editType:"ticks"};function te(ve){var xe={valType:"number",min:0,editType:"ticks"};return ve||(xe.dflt=1),xe}var Se=E({},g,{editType:"ticks"}),fe={valType:"boolean",editType:"ticks"};me.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:v.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:M({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed","min reversed","max reversed","min","max"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},autorangeoptions:{minallowed:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},maxallowed:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},clipmin:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},clipmax:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},include:{valType:"any",arrayOk:!0,editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},editType:"plot"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},minallowed:{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},maxallowed:{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},modebardisable:{valType:"flaglist",flags:["autoscale","zoominout"],extras:["none"],dflt:"none",editType:"modebar"},insiderange:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},scaleanchor:{valType:"enumerated",values:[P.idRegex.x.toString(),P.idRegex.y.toString(),!1],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[P.idRegex.x.toString(),P.idRegex.y.toString()],editType:"calc"},rangebreaks:S("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[Y,p,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:C},editType:"calc"}),tickmode:j,nticks:ee(),tick0:G,dtick:V,ticklabelstep:{valType:"integer",min:1,dflt:1,editType:"ticks"},tickvals:W,ticktext:{valType:"data_array",editType:"ticks"},ticks:q,tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},ticklabelshift:{valType:"integer",dflt:0,editType:"ticks"},ticklabelstandoff:{valType:"integer",dflt:0,editType:"ticks"},ticklabelindex:{valType:"integer",arrayOk:!0,editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:z(),tickwidth:H(),tickcolor:Z,showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},labelalias:{valType:"any",dflt:!1,editType:"ticks"},automargin:{valType:"flaglist",flags:["height","width","left","right","top","bottom"],extras:[!0,!1],dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:E({},g,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:M({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},autotickangles:{valType:"info_array",freeLength:!0,items:{valType:"angle"},dflt:[0,30,90],editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:T("tick label")},tickformatstops:S("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:T("hover text")},unifiedhovertitle:{text:{valType:"string",dflt:"",editType:"none"},editType:"none"},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:v.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:fe,gridcolor:ne,gridwidth:te(),griddash:Se,zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:v.defaultLine,editType:"ticks"},zerolinelayer:{valType:"enumerated",values:["above traces","below traces"],dflt:"below traces",editType:"plot"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:v.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",P.idRegex.x.toString(),P.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",P.idRegex.x.toString(),P.idRegex.y.toString()],editType:"plot"},minor:{tickmode:N,nticks:ee("minor"),tick0:G,dtick:V,tickvals:W,ticks:q,ticklen:z("minor"),tickwidth:H("minor"),tickcolor:Z,gridcolor:ne,gridwidth:te("minor"),griddash:Se,showgrid:fe,editType:"ticks"},minorloglabels:{valType:"enumerated",values:["small digits","complete","none"],dflt:"small digits",editType:"calc"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},autoshift:{valType:"boolean",dflt:!1,editType:"plot"},shift:{valType:"number",editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","geometric mean ascending","geometric mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc"}}}),hg=a({"src/components/colorbar/attributes.js"(pe,me){var M=O1(),v=B(),g=k().extendFlat,E=Xl().overrideAll;me.exports=E({orientation:{valType:"enumerated",values:["h","v"],dflt:"v"},thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number"},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},xanchor:{valType:"enumerated",values:["left","center","right"]},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number"},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},ypad:{valType:"number",min:0,dflt:10},outlinecolor:M.linecolor,outlinewidth:M.linewidth,bordercolor:M.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:M.minor.tickmode,nticks:M.nticks,tick0:M.tick0,dtick:M.dtick,tickvals:M.tickvals,ticktext:M.ticktext,ticks:g({},M.ticks,{dflt:""}),ticklabeloverflow:g({},M.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside"},ticklen:M.ticklen,tickwidth:M.tickwidth,tickcolor:M.tickcolor,ticklabelstep:M.ticklabelstep,showticklabels:M.showticklabels,labelalias:M.labelalias,tickfont:v({}),tickangle:M.tickangle,tickformat:M.tickformat,tickformatstops:M.tickformatstops,tickprefix:M.tickprefix,showtickprefix:M.showtickprefix,ticksuffix:M.ticksuffix,showticksuffix:M.showticksuffix,separatethousands:M.separatethousands,exponentformat:M.exponentformat,minexponent:M.minexponent,showexponent:M.showexponent,title:{text:{valType:"string"},font:v({}),side:{valType:"enumerated",values:["right","top","bottom"]}}},"colorbars","from-root")}}),j1=a({"src/components/colorscale/attributes.js"(pe,me){var M=hg(),v=Ze().counter,g=Fm(),E=Pe().scales;g(E),me.exports=function(T,C){T=T||"",C=C||{};var P=C.cLetter||"c";"onlyIfNumerical"in C&&C.onlyIfNumerical;var p="noScale"in C?C.noScale:T==="marker.line",Y="showScaleDflt"in C?C.showScaleDflt:P==="z",N=typeof C.colorscaleDflt=="string"?E[C.colorscaleDflt]:null,j=C.editTypeOverride||"",ee;"colorAttr"in C?(ee=C.colorAttr,C.colorAttr):ee={z:"z",c:"color"}[P];var G=P+"auto",V=P+"min",W=P+"max",q=P+"mid",z={};z[V]=z[W]=void 0;var H={};H[G]=!1;var Z={};return ee==="color"&&(Z.color={valType:"color",arrayOk:!0,editType:j||"style"},C.anim&&(Z.color.anim=!0)),Z[G]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:z},Z[V]={valType:"number",dflt:null,editType:j||"plot",impliedEdits:H},Z[W]={valType:"number",dflt:null,editType:j||"plot",impliedEdits:H},Z[q]={valType:"number",dflt:null,editType:"calc",impliedEdits:z},Z.colorscale={valType:"colorscale",editType:"calc",dflt:N,impliedEdits:{autocolorscale:!1}},Z.autocolorscale={valType:"boolean",dflt:C.autoColorDflt!==!1,editType:"calc",impliedEdits:{colorscale:void 0}},Z.reversescale={valType:"boolean",dflt:!1,editType:"plot"},p||(Z.showscale={valType:"boolean",dflt:Y,editType:"calc"},Z.colorbar=M),C.noColorAxis||(Z.coloraxis={valType:"subplotid",regex:v("coloraxis"),dflt:null,editType:"calc"}),Z}}}),og=a({"src/components/colorscale/layout_attributes.js"(pe,me){var M=k().extendFlat,v=j1(),g=Pe().scales;me.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:g.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:g.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:g.RdBu,editType:"calc"}},coloraxis:M({_isSubplotObj:!0,editType:"calc"},v("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}}}),Ng=a({"src/components/colorbar/has_colorbar.js"(pe,me){var M=o0();me.exports=function(g){return M.isPlainObject(g.colorbar)}}}),Gy=a({"src/plots/cartesian/clean_ticks.js"(pe){var me=w(),M=o0(),v=A(),g=v.ONEDAY,E=v.ONEWEEK;pe.dtick=function(S,T){var C=T==="log",P=T==="date",p=T==="category",Y=P?g:1;if(!S)return Y;if(me(S))return S=Number(S),S<=0?Y:p?Math.max(1,Math.round(S)):P?Math.max(.1,S):S;if(typeof S!="string"||!(P||C))return Y;var N=S.charAt(0),j=S.substr(1);return j=me(j)?Number(j):0,j<=0||!(P&&N==="M"&&j===Math.round(j)||C&&N==="L"||C&&N==="D"&&(j===1||j===2))?Y:S},pe.tick0=function(S,T,C,P){if(T==="date")return M.cleanDate(S,M.dateTick0(C,P%E===0?1:0));if(!(P==="D1"||P==="D2"))return me(S)?Number(S):0}}}),Hg=a({"src/plots/cartesian/tick_value_defaults.js"(pe,me){var M=Gy(),v=o0().isArrayOrTypedArray,g=y().isTypedArraySpec,E=y().decodeTypedArraySpec;me.exports=function(T,C,P,p,Y){Y||(Y={});var N=Y.isMinor,j=N?T.minor||{}:T,ee=N?C.minor:C,G=N?"minor.":"";function V(Se){var fe=j[Se];return g(fe)&&(fe=E(fe)),fe!==void 0?fe:(ee._template||{})[Se]}var W=V("tick0"),q=V("dtick"),z=V("tickvals"),H=v(z)?"array":q?"linear":"auto",Z=P(G+"tickmode",H);if(Z==="auto"||Z==="sync")P(G+"nticks");else if(Z==="linear"){var ne=ee.dtick=M.dtick(q,p);ee.tick0=M.tick0(W,p,C.calendar,ne)}else if(p!=="multicategory"){var te=P(G+"tickvals");te===void 0?ee.tickmode="auto":N||P("ticktext")}}}}),Vy=a({"src/plots/cartesian/tick_mark_defaults.js"(pe,me){var M=o0(),v=O1();me.exports=function(E,S,T,C){var P=C.isMinor,p=P?E.minor||{}:E,Y=P?S.minor:S,N=P?v.minor:v,j=P?"minor.":"",ee=M.coerce2(p,Y,N,"ticklen",P?(S.ticklen||5)*.6:void 0),G=M.coerce2(p,Y,N,"tickwidth",P?S.tickwidth||1:void 0),V=M.coerce2(p,Y,N,"tickcolor",(P?S.tickcolor:void 0)||Y.color),W=T(j+"ticks",!P&&C.outerTicks||ee||G||V?"outside":"");W||(delete Y.ticklen,delete Y.tickwidth,delete Y.tickcolor)}}}),Jg=a({"src/plots/cartesian/show_dflt.js"(pe,me){me.exports=function(v){var g=["showexponent","showtickprefix","showticksuffix"],E=g.filter(function(T){return v[T]!==void 0}),S=function(T){return v[T]===v[E[0]]};if(E.every(S)||E.length===1)return v[E[0]]}}}),U1=a({"src/plots/array_container_defaults.js"(pe,me){var M=o0(),v=Vm();me.exports=function(E,S,T){var C=T.name,P=T.inclusionAttr||"visible",p=S[C],Y=M.isArrayOrTypedArray(E[C])?E[C]:[],N=S[C]=[],j=v.arrayTemplater(S,C,P),ee,G;for(ee=0;ee<Y.length;ee++){var V=Y[ee];M.isPlainObject(V)?G=j.newItem(V):(G=j.newItem({}),G[P]=!1),G._index=ee,G[P]!==!1&&T.handleItemDefaults(V,G,S,T),N.push(G)}var W=j.defaultItems();for(ee=0;ee<W.length;ee++)G=W[ee],G._index=N.length,T.handleItemDefaults({},G,S,T,{}),N.push(G);if(M.isArrayOrTypedArray(p)){var q=Math.min(p.length,N.length);for(ee=0;ee<q;ee++)M.relinkPrivateKeys(N[ee],p[ee])}return N}}}),eg=a({"src/plots/cartesian/tick_label_defaults.js"(pe,me){var M=o0(),v=Oe().contrast,g=O1(),E=Jg(),S=U1();me.exports=function(P,p,Y,N,j){j||(j={});var ee=Y("labelalias");M.isPlainObject(ee)||delete p.labelalias;var G=E(P),V=Y("showticklabels");if(V){j.noTicklabelshift||Y("ticklabelshift"),j.noTicklabelstandoff||Y("ticklabelstandoff");var W=j.font||{},q=p.color,z=p.ticklabelposition||"",H=z.indexOf("inside")!==-1?v(j.bgColor):q&&q!==g.color.dflt?q:W.color;if(M.coerceFont(Y,"tickfont",W,{overrideDflt:{color:H}}),!j.noTicklabelstep&&N!=="multicategory"&&N!=="log"&&Y("ticklabelstep"),!j.noAng){var Z=Y("tickangle");!j.noAutotickangles&&Z==="auto"&&Y("autotickangles")}if(N!=="category"){var ne=Y("tickformat");S(P,p,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:T}),p.tickformatstops.length||delete p.tickformatstops,!j.noExp&&!ne&&N!=="date"&&(Y("showexponent",G),Y("exponentformat"),Y("minexponent"),Y("separatethousands"))}!j.noMinorloglabels&&N==="log"&&Y("minorloglabels")}};function T(C,P){function p(N,j){return M.coerce(C,P,g.tickformatstops,N,j)}var Y=p("enabled");Y&&(p("dtickrange"),p("value"))}}}),o1=a({"src/plots/cartesian/prefix_suffix_defaults.js"(pe,me){var M=Jg();me.exports=function(g,E,S,T,C){C||(C={});var P=C.tickSuffixDflt,p=M(g),Y=S("tickprefix");Y&&S("showtickprefix",p);var N=S("ticksuffix",P);N&&S("showticksuffix",p)}}}),qy=a({"src/components/colorbar/defaults.js"(pe,me){var M=o0(),v=Vm(),g=Hg(),E=Vy(),S=eg(),T=o1(),C=hg();me.exports=function(p,Y,N){var j=v.newContainer(Y,"colorbar"),ee=p.colorbar||{};function G(Be,Ye){return M.coerce(ee,j,C,Be,Ye)}var V=N.margin||{t:0,b:0,l:0,r:0},W=N.width-V.l-V.r,q=N.height-V.t-V.b,z=G("orientation"),H=z==="v",Z=G("thicknessmode");G("thickness",Z==="fraction"?30/(H?W:q):30);var ne=G("lenmode");G("len",ne==="fraction"?1:H?q:W);var te=G("yref"),Se=G("xref"),fe=te==="paper",ve=Se==="paper",xe,re,de,be="left";H?(de="middle",be=ve?"left":"right",xe=ve?1.02:1,re=.5):(de=fe?"bottom":"top",be="center",xe=.5,re=fe?1.02:1),M.coerce(ee,j,{x:{valType:"number",min:ve?-2:0,max:ve?3:1,dflt:xe}},"x"),M.coerce(ee,j,{y:{valType:"number",min:fe?-2:0,max:fe?3:1,dflt:re}},"y"),G("xanchor",be),G("xpad"),G("yanchor",de),G("ypad"),M.noneOrAll(ee,j,["x","y"]),G("outlinecolor"),G("outlinewidth"),G("bordercolor"),G("borderwidth"),G("bgcolor");var Te=M.coerce(ee,j,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:H?["outside","inside","outside top","inside top","outside bottom","inside bottom"]:["outside","inside","outside left","inside left","outside right","inside right"]}},"ticklabelposition");G("ticklabeloverflow",Te.indexOf("inside")!==-1?"hide past domain":"hide past div"),g(ee,j,G,"linear");var ye=N.font,De={noAutotickangles:!0,noTicklabelshift:!0,noTicklabelstandoff:!0,outerTicks:!1,font:ye};Te.indexOf("inside")!==-1&&(De.bgColor="black"),T(ee,j,G,"linear",De),S(ee,j,G,"linear",De),E(ee,j,G,"linear",De),G("title.text",N._dfltTitle.colorbar);var Ue=j.showticklabels?j.tickfont:ye,he=M.extendFlat({},ye,{family:Ue.family,size:M.bigFont(Ue.size)});M.coerceFont(G,"title.font",he),G("title.side",H?"top":"right")}}}),Ey=a({"src/components/colorscale/defaults.js"(pe,me){var M=w(),v=o0(),g=Ng(),E=qy(),S=Pe().isValid,T=jp().traceIs;function C(P,p){var Y=p.slice(0,p.length-1);return p?v.nestedProperty(P,Y).get()||{}:P}me.exports=function P(p,Y,N,j,ee){var G=ee.prefix,V=ee.cLetter,W="_module"in Y,q=C(p,G),z=C(Y,G),H=C(Y._template||{},G)||{},Z=function(){return delete p.coloraxis,delete Y.coloraxis,P(p,Y,N,j,ee)};if(W){var ne=N._colorAxes||{},te=j(G+"coloraxis");if(te){var Se=T(Y,"contour")&&v.nestedProperty(Y,"contours.coloring").get()||"heatmap",fe=ne[te];fe?(fe[2].push(Z),fe[0]!==Se&&(fe[0]=!1,v.warn(["Ignoring coloraxis:",te,"setting","as it is linked to incompatible colorscales."].join(" ")))):ne[te]=[Se,Y,[Z]];return}}var ve=q[V+"min"],xe=q[V+"max"],re=M(ve)&&M(xe)&&ve<xe,de=j(G+V+"auto",!re);de?j(G+V+"mid"):(j(G+V+"min"),j(G+V+"max"));var be=q.colorscale,Te=H.colorscale,ye;if(be!==void 0&&(ye=!S(be)),Te!==void 0&&(ye=!S(Te)),j(G+"autocolorscale",ye),j(G+"colorscale"),j(G+"reversescale"),G!=="marker.line."){var De;G&&W&&(De=g(q));var Ue=j(G+"showscale",De);Ue&&(G&&H&&(z._template=H),E(q,z,N))}}}}),v2=a({"src/components/colorscale/layout_defaults.js"(pe,me){var M=o0(),v=Vm(),g=og(),E=Ey();me.exports=function(T,C){function P(W,q){return M.coerce(T,C,g,W,q)}P("colorscale.sequential"),P("colorscale.sequentialminus"),P("colorscale.diverging");var p=C._colorAxes,Y,N;function j(W,q){return M.coerce(Y,N,g.coloraxis,W,q)}for(var ee in p){var G=p[ee];if(G[0])Y=T[ee]||{},N=v.newContainer(C,ee,"coloraxis"),N._name=ee,E(Y,N,C,j,{prefix:"",cLetter:"c"});else{for(var V=0;V<G[2].length;V++)G[2][V]();delete C._colorAxes[ee]}}}}}),u_=a({"src/components/colorscale/cross_trace_defaults.js"(pe,me){var M=o0(),v=Q1().hasColorscale,g=Q1().extractOpts;me.exports=function(S,T){function C(G,V){var W=G["_"+V];W!==void 0&&(G[V]=W)}function P(G,V){var W=V.container?M.nestedProperty(G,V.container).get():G;if(W)if(W.coloraxis)W._colorAx=T[W.coloraxis];else{var q=g(W),z=q.auto;(z||q.min===void 0)&&C(W,V.min),(z||q.max===void 0)&&C(W,V.max),q.autocolorscale&&C(W,"colorscale")}}for(var p=0;p<S.length;p++){var Y=S[p],N=Y._module.colorbar;if(N)if(Array.isArray(N))for(var j=0;j<N.length;j++)P(Y,N[j]);else P(Y,N);v(Y,"marker.line")&&P(Y,{container:"marker.line",min:"cmin",max:"cmax"})}for(var ee in T._colorAxes)P(T[ee],{min:"cmin",max:"cmax"})}}}),g2=a({"src/components/colorscale/calc.js"(pe,me){var M=w(),v=o0(),g=Q1().extractOpts;me.exports=function(S,T,C){var P=S._fullLayout,p=C.vals,Y=C.containerStr,N=Y?v.nestedProperty(T,Y).get():T,j=g(N),ee=j.auto!==!1,G=j.min,V=j.max,W=j.mid,q=function(){return v.aggNums(Math.min,null,p)},z=function(){return v.aggNums(Math.max,null,p)};if(G===void 0?G=q():ee&&(N._colorAx&&M(G)?G=Math.min(G,q()):G=q()),V===void 0?V=z():ee&&(N._colorAx&&M(V)?V=Math.max(V,z()):V=z()),ee&&W!==void 0&&(V-W>W-G?G=W-(V-W):V-W<W-G&&(V=W+(W-G))),G===V&&(G-=.5,V+=.5),j._sync("min",G),j._sync("max",V),j.autocolorscale){var H;G*V<0?H=P.colorscale.diverging:G>=0?H=P.colorscale.sequential:H=P.colorscale.sequentialminus,j._sync("colorscale",H)}}}}),Wy=a({"src/components/colorscale/index.js"(pe,me){var M=Pe(),v=Q1();me.exports={moduleType:"component",name:"colorscale",attributes:j1(),layoutAttributes:og(),supplyLayoutDefaults:v2(),handleDefaults:Ey(),crossTraceDefaults:u_(),calc:g2(),scales:M.scales,defaultScale:M.defaultScale,getScale:M.get,isValidScale:M.isValid,hasColorscale:v.hasColorscale,extractOpts:v.extractOpts,extractScale:v.extractScale,flipScale:v.flipScale,makeColorScaleFunc:v.makeColorScaleFunc,makeColorScaleFuncFromTrace:v.makeColorScaleFuncFromTrace}}}),D1=a({"src/traces/scatter/subtypes.js"(pe,me){var M=o0(),v=y().isTypedArraySpec;me.exports={hasLines:function(g){return g.visible&&g.mode&&g.mode.indexOf("lines")!==-1},hasMarkers:function(g){return g.visible&&(g.mode&&g.mode.indexOf("markers")!==-1||g.type==="splom")},hasText:function(g){return g.visible&&g.mode&&g.mode.indexOf("text")!==-1},isBubble:function(g){var E=g.marker;return M.isPlainObject(E)&&(M.isArrayOrTypedArray(E.size)||v(E.size))}}}}),Q2=a({"src/traces/scatter/make_bubble_size_func.js"(pe,me){var M=w();me.exports=function(g,E){E||(E=2);var S=g.marker,T=S.sizeref||1,C=S.sizemin||0,P=S.sizemode==="area"?function(p){return Math.sqrt(p/T)}:function(p){return p/T};return function(p){var Y=P(p/E);return M(Y)&&Y>0?Math.max(Y,C):0}}}}),jg=a({"src/components/fx/helpers.js"(pe){var me=o0();pe.getSubplot=function(T){return T.subplot||T.xaxis+T.yaxis||T.geo},pe.isTraceInSubplots=function(T,C){if(T.type==="splom"){for(var P=T.xaxes||[],p=T.yaxes||[],Y=0;Y<P.length;Y++)for(var N=0;N<p.length;N++)if(C.indexOf(P[Y]+p[N])!==-1)return!0;return!1}return C.indexOf(pe.getSubplot(T))!==-1},pe.flat=function(T,C){for(var P=new Array(T.length),p=0;p<T.length;p++)P[p]=C;return P},pe.p2c=function(T,C){for(var P=new Array(T.length),p=0;p<T.length;p++)P[p]=T[p].p2c(C);return P},pe.getDistanceFunction=function(T,C,P,p){return T==="closest"?p||pe.quadrature(C,P):T.charAt(0)==="x"?C:P},pe.getClosest=function(T,C,P){if(P.index!==!1)P.index>=0&&P.index<T.length?P.distance=0:P.index=!1;else for(var p=1/0,Y=T.length,N=0;N<Y;N++)p=C(T[N]),p<=P.distance&&(P.index=N,P.distance=p);return P},pe.inbox=function(T,C,P){return T*C<0||T===0?P:1/0},pe.quadrature=function(T,C){return function(P){var p=T(P),Y=C(P);return Math.sqrt(p*p+Y*Y)}},pe.makeEventData=function(T,C,P){var p="index"in T?T.index:T.pointNumber,Y={data:C._input,fullData:C,curveNumber:C.index,pointNumber:p};if(C._indexToPoints){var N=C._indexToPoints[p];N.length===1?Y.pointIndex=N[0]:Y.pointIndices=N}else Y.pointIndex=p;return C._module.eventData?Y=C._module.eventData(Y,T,C,P,p):("xVal"in T?Y.x=T.xVal:"x"in T&&(Y.x=T.x),"yVal"in T?Y.y=T.yVal:"y"in T&&(Y.y=T.y),T.xa&&(Y.xaxis=T.xa),T.ya&&(Y.yaxis=T.ya),T.zLabelVal!==void 0&&(Y.z=T.zLabelVal)),pe.appendArrayPointValue(Y,C,p),Y},pe.appendArrayPointValue=function(T,C,P){var p=C._arrayAttrs;if(p)for(var Y=0;Y<p.length;Y++){var N=p[Y],j=v(N);if(T[j]===void 0){var ee=me.nestedProperty(C,N).get(),G=g(ee,P);G!==void 0&&(T[j]=G)}}},pe.appendArrayMultiPointValues=function(T,C,P){var p=C._arrayAttrs;if(p)for(var Y=0;Y<p.length;Y++){var N=p[Y],j=v(N);if(T[j]===void 0){for(var ee=me.nestedProperty(C,N).get(),G=new Array(P.length),V=0;V<P.length;V++)G[V]=g(ee,P[V]);T[j]=G}}};var M={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function v(T){return M[T]||T}function g(T,C){if(Array.isArray(C)){if(Array.isArray(T)&&Array.isArray(T[C[0]]))return T[C[0]][C[1]]}else return T[C]}var E={x:!0,y:!0},S={"x unified":!0,"y unified":!0};pe.isUnifiedHover=function(T){return typeof T!="string"?!1:!!S[T]},pe.isXYhover=function(T){return typeof T!="string"?!1:!!E[T]}}}),dg=a({"node_modules/parse-svg-path/index.js"(pe,me){me.exports=g;var M={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},v=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function g(T){var C=[];return T.replace(v,function(P,p,Y){var N=p.toLowerCase();for(Y=S(Y),N=="m"&&Y.length>2&&(C.push([p].concat(Y.splice(0,2))),N="l",p=p=="m"?"l":"L");;){if(Y.length==M[N])return Y.unshift(p),C.push(Y);if(Y.length<M[N])throw new Error("malformed path data");C.push([p].concat(Y.splice(0,M[N])))}}),C}var E=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function S(T){var C=T.match(E);return C?C.map(Number):[]}}}),Qg=a({"src/components/drawing/symbol_defs.js"(pe,me){var M=dg(),v=(function(V,W){return W?Math.round(V*(W=Math.pow(10,W)))/W:Math.round(V)}),g="M0,0Z",E=Math.sqrt(2),S=Math.sqrt(3),T=Math.PI,C=Math.cos,P=Math.sin;me.exports={circle:{n:0,f:function(V,W,q){if(p(W))return g;var z=v(V,2),H="M"+z+",0A"+z+","+z+" 0 1,1 0,-"+z+"A"+z+","+z+" 0 0,1 "+z+",0Z";return q?G(W,q,H):H}},square:{n:1,f:function(V,W,q){if(p(W))return g;var z=v(V,2);return G(W,q,"M"+z+","+z+"H-"+z+"V-"+z+"H"+z+"Z")}},diamond:{n:2,f:function(V,W,q){if(p(W))return g;var z=v(V*1.3,2);return G(W,q,"M"+z+",0L0,"+z+"L-"+z+",0L0,-"+z+"Z")}},cross:{n:3,f:function(V,W,q){if(p(W))return g;var z=v(V*.4,2),H=v(V*1.2,2);return G(W,q,"M"+H+","+z+"H"+z+"V"+H+"H-"+z+"V"+z+"H-"+H+"V-"+z+"H-"+z+"V-"+H+"H"+z+"V-"+z+"H"+H+"Z")}},x:{n:4,f:function(V,W,q){if(p(W))return g;var z=v(V*.8/E,2),H="l"+z+","+z,Z="l"+z+",-"+z,ne="l-"+z+",-"+z,te="l-"+z+","+z;return G(W,q,"M0,"+z+H+Z+ne+Z+ne+te+ne+te+H+te+H+"Z")}},"triangle-up":{n:5,f:function(V,W,q){if(p(W))return g;var z=v(V*2/S,2),H=v(V/2,2),Z=v(V,2);return G(W,q,"M-"+z+","+H+"H"+z+"L0,-"+Z+"Z")}},"triangle-down":{n:6,f:function(V,W,q){if(p(W))return g;var z=v(V*2/S,2),H=v(V/2,2),Z=v(V,2);return G(W,q,"M-"+z+",-"+H+"H"+z+"L0,"+Z+"Z")}},"triangle-left":{n:7,f:function(V,W,q){if(p(W))return g;var z=v(V*2/S,2),H=v(V/2,2),Z=v(V,2);return G(W,q,"M"+H+",-"+z+"V"+z+"L-"+Z+",0Z")}},"triangle-right":{n:8,f:function(V,W,q){if(p(W))return g;var z=v(V*2/S,2),H=v(V/2,2),Z=v(V,2);return G(W,q,"M-"+H+",-"+z+"V"+z+"L"+Z+",0Z")}},"triangle-ne":{n:9,f:function(V,W,q){if(p(W))return g;var z=v(V*.6,2),H=v(V*1.2,2);return G(W,q,"M-"+H+",-"+z+"H"+z+"V"+H+"Z")}},"triangle-se":{n:10,f:function(V,W,q){if(p(W))return g;var z=v(V*.6,2),H=v(V*1.2,2);return G(W,q,"M"+z+",-"+H+"V"+z+"H-"+H+"Z")}},"triangle-sw":{n:11,f:function(V,W,q){if(p(W))return g;var z=v(V*.6,2),H=v(V*1.2,2);return G(W,q,"M"+H+","+z+"H-"+z+"V-"+H+"Z")}},"triangle-nw":{n:12,f:function(V,W,q){if(p(W))return g;var z=v(V*.6,2),H=v(V*1.2,2);return G(W,q,"M-"+z+","+H+"V-"+z+"H"+H+"Z")}},pentagon:{n:13,f:function(V,W,q){if(p(W))return g;var z=v(V*.951,2),H=v(V*.588,2),Z=v(-V,2),ne=v(V*-.309,2),te=v(V*.809,2);return G(W,q,"M"+z+","+ne+"L"+H+","+te+"H-"+H+"L-"+z+","+ne+"L0,"+Z+"Z")}},hexagon:{n:14,f:function(V,W,q){if(p(W))return g;var z=v(V,2),H=v(V/2,2),Z=v(V*S/2,2);return G(W,q,"M"+Z+",-"+H+"V"+H+"L0,"+z+"L-"+Z+","+H+"V-"+H+"L0,-"+z+"Z")}},hexagon2:{n:15,f:function(V,W,q){if(p(W))return g;var z=v(V,2),H=v(V/2,2),Z=v(V*S/2,2);return G(W,q,"M-"+H+","+Z+"H"+H+"L"+z+",0L"+H+",-"+Z+"H-"+H+"L-"+z+",0Z")}},octagon:{n:16,f:function(V,W,q){if(p(W))return g;var z=v(V*.924,2),H=v(V*.383,2);return G(W,q,"M-"+H+",-"+z+"H"+H+"L"+z+",-"+H+"V"+H+"L"+H+","+z+"H-"+H+"L-"+z+","+H+"V-"+H+"Z")}},star:{n:17,f:function(V,W,q){if(p(W))return g;var z=V*1.4,H=v(z*.225,2),Z=v(z*.951,2),ne=v(z*.363,2),te=v(z*.588,2),Se=v(-z,2),fe=v(z*-.309,2),ve=v(z*.118,2),xe=v(z*.809,2),re=v(z*.382,2);return G(W,q,"M"+H+","+fe+"H"+Z+"L"+ne+","+ve+"L"+te+","+xe+"L0,"+re+"L-"+te+","+xe+"L-"+ne+","+ve+"L-"+Z+","+fe+"H-"+H+"L0,"+Se+"Z")}},hexagram:{n:18,f:function(V,W,q){if(p(W))return g;var z=v(V*.66,2),H=v(V*.38,2),Z=v(V*.76,2);return G(W,q,"M-"+Z+",0l-"+H+",-"+z+"h"+Z+"l"+H+",-"+z+"l"+H+","+z+"h"+Z+"l-"+H+","+z+"l"+H+","+z+"h-"+Z+"l-"+H+","+z+"l-"+H+",-"+z+"h-"+Z+"Z")}},"star-triangle-up":{n:19,f:function(V,W,q){if(p(W))return g;var z=v(V*S*.8,2),H=v(V*.8,2),Z=v(V*1.6,2),ne=v(V*4,2),te="A "+ne+","+ne+" 0 0 1 ";return G(W,q,"M-"+z+","+H+te+z+","+H+te+"0,-"+Z+te+"-"+z+","+H+"Z")}},"star-triangle-down":{n:20,f:function(V,W,q){if(p(W))return g;var z=v(V*S*.8,2),H=v(V*.8,2),Z=v(V*1.6,2),ne=v(V*4,2),te="A "+ne+","+ne+" 0 0 1 ";return G(W,q,"M"+z+",-"+H+te+"-"+z+",-"+H+te+"0,"+Z+te+z+",-"+H+"Z")}},"star-square":{n:21,f:function(V,W,q){if(p(W))return g;var z=v(V*1.1,2),H=v(V*2,2),Z="A "+H+","+H+" 0 0 1 ";return G(W,q,"M-"+z+",-"+z+Z+"-"+z+","+z+Z+z+","+z+Z+z+",-"+z+Z+"-"+z+",-"+z+"Z")}},"star-diamond":{n:22,f:function(V,W,q){if(p(W))return g;var z=v(V*1.4,2),H=v(V*1.9,2),Z="A "+H+","+H+" 0 0 1 ";return G(W,q,"M-"+z+",0"+Z+"0,"+z+Z+z+",0"+Z+"0,-"+z+Z+"-"+z+",0Z")}},"diamond-tall":{n:23,f:function(V,W,q){if(p(W))return g;var z=v(V*.7,2),H=v(V*1.4,2);return G(W,q,"M0,"+H+"L"+z+",0L0,-"+H+"L-"+z+",0Z")}},"diamond-wide":{n:24,f:function(V,W,q){if(p(W))return g;var z=v(V*1.4,2),H=v(V*.7,2);return G(W,q,"M0,"+H+"L"+z+",0L0,-"+H+"L-"+z+",0Z")}},hourglass:{n:25,f:function(V,W,q){if(p(W))return g;var z=v(V,2);return G(W,q,"M"+z+","+z+"H-"+z+"L"+z+",-"+z+"H-"+z+"Z")},noDot:!0},bowtie:{n:26,f:function(V,W,q){if(p(W))return g;var z=v(V,2);return G(W,q,"M"+z+","+z+"V-"+z+"L-"+z+","+z+"V-"+z+"Z")},noDot:!0},"circle-cross":{n:27,f:function(V,W,q){if(p(W))return g;var z=v(V,2);return G(W,q,"M0,"+z+"V-"+z+"M"+z+",0H-"+z+"M"+z+",0A"+z+","+z+" 0 1,1 0,-"+z+"A"+z+","+z+" 0 0,1 "+z+",0Z")},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(V,W,q){if(p(W))return g;var z=v(V,2),H=v(V/E,2);return G(W,q,"M"+H+","+H+"L-"+H+",-"+H+"M"+H+",-"+H+"L-"+H+","+H+"M"+z+",0A"+z+","+z+" 0 1,1 0,-"+z+"A"+z+","+z+" 0 0,1 "+z+",0Z")},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(V,W,q){if(p(W))return g;var z=v(V,2);return G(W,q,"M0,"+z+"V-"+z+"M"+z+",0H-"+z+"M"+z+","+z+"H-"+z+"V-"+z+"H"+z+"Z")},needLine:!0,noDot:!0},"square-x":{n:30,f:function(V,W,q){if(p(W))return g;var z=v(V,2);return G(W,q,"M"+z+","+z+"L-"+z+",-"+z+"M"+z+",-"+z+"L-"+z+","+z+"M"+z+","+z+"H-"+z+"V-"+z+"H"+z+"Z")},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(V,W,q){if(p(W))return g;var z=v(V*1.3,2);return G(W,q,"M"+z+",0L0,"+z+"L-"+z+",0L0,-"+z+"ZM0,-"+z+"V"+z+"M-"+z+",0H"+z)},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(V,W,q){if(p(W))return g;var z=v(V*1.3,2),H=v(V*.65,2);return G(W,q,"M"+z+",0L0,"+z+"L-"+z+",0L0,-"+z+"ZM-"+H+",-"+H+"L"+H+","+H+"M-"+H+","+H+"L"+H+",-"+H)},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(V,W,q){if(p(W))return g;var z=v(V*1.4,2);return G(W,q,"M0,"+z+"V-"+z+"M"+z+",0H-"+z)},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(V,W,q){if(p(W))return g;var z=v(V,2);return G(W,q,"M"+z+","+z+"L-"+z+",-"+z+"M"+z+",-"+z+"L-"+z+","+z)},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(V,W,q){if(p(W))return g;var z=v(V*1.2,2),H=v(V*.85,2);return G(W,q,"M0,"+z+"V-"+z+"M"+z+",0H-"+z+"M"+H+","+H+"L-"+H+",-"+H+"M"+H+",-"+H+"L-"+H+","+H)},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(V,W,q){if(p(W))return g;var z=v(V/2,2),H=v(V,2);return G(W,q,"M"+z+","+H+"V-"+H+"M"+(z-H)+",-"+H+"V"+H+"M"+H+","+z+"H-"+H+"M-"+H+","+(z-H)+"H"+H)},needLine:!0,noFill:!0},"y-up":{n:37,f:function(V,W,q){if(p(W))return g;var z=v(V*1.2,2),H=v(V*1.6,2),Z=v(V*.8,2);return G(W,q,"M-"+z+","+Z+"L0,0M"+z+","+Z+"L0,0M0,-"+H+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(V,W,q){if(p(W))return g;var z=v(V*1.2,2),H=v(V*1.6,2),Z=v(V*.8,2);return G(W,q,"M-"+z+",-"+Z+"L0,0M"+z+",-"+Z+"L0,0M0,"+H+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(V,W,q){if(p(W))return g;var z=v(V*1.2,2),H=v(V*1.6,2),Z=v(V*.8,2);return G(W,q,"M"+Z+","+z+"L0,0M"+Z+",-"+z+"L0,0M-"+H+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(V,W,q){if(p(W))return g;var z=v(V*1.2,2),H=v(V*1.6,2),Z=v(V*.8,2);return G(W,q,"M-"+Z+","+z+"L0,0M-"+Z+",-"+z+"L0,0M"+H+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(V,W,q){if(p(W))return g;var z=v(V*1.4,2);return G(W,q,"M"+z+",0H-"+z)},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(V,W,q){if(p(W))return g;var z=v(V*1.4,2);return G(W,q,"M0,"+z+"V-"+z)},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(V,W,q){if(p(W))return g;var z=v(V,2);return G(W,q,"M"+z+",-"+z+"L-"+z+","+z)},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(V,W,q){if(p(W))return g;var z=v(V,2);return G(W,q,"M"+z+","+z+"L-"+z+",-"+z)},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(V,W,q){if(p(W))return g;var z=v(V,2),H=v(V*2,2);return G(W,q,"M0,0L-"+z+","+H+"H"+z+"Z")},backoff:1,noDot:!0},"arrow-down":{n:46,f:function(V,W,q){if(p(W))return g;var z=v(V,2),H=v(V*2,2);return G(W,q,"M0,0L-"+z+",-"+H+"H"+z+"Z")},noDot:!0},"arrow-left":{n:47,f:function(V,W,q){if(p(W))return g;var z=v(V*2,2),H=v(V,2);return G(W,q,"M0,0L"+z+",-"+H+"V"+H+"Z")},noDot:!0},"arrow-right":{n:48,f:function(V,W,q){if(p(W))return g;var z=v(V*2,2),H=v(V,2);return G(W,q,"M0,0L-"+z+",-"+H+"V"+H+"Z")},noDot:!0},"arrow-bar-up":{n:49,f:function(V,W,q){if(p(W))return g;var z=v(V,2),H=v(V*2,2);return G(W,q,"M-"+z+",0H"+z+"M0,0L-"+z+","+H+"H"+z+"Z")},backoff:1,needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(V,W,q){if(p(W))return g;var z=v(V,2),H=v(V*2,2);return G(W,q,"M-"+z+",0H"+z+"M0,0L-"+z+",-"+H+"H"+z+"Z")},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(V,W,q){if(p(W))return g;var z=v(V*2,2),H=v(V,2);return G(W,q,"M0,-"+H+"V"+H+"M0,0L"+z+",-"+H+"V"+H+"Z")},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(V,W,q){if(p(W))return g;var z=v(V*2,2),H=v(V,2);return G(W,q,"M0,-"+H+"V"+H+"M0,0L-"+z+",-"+H+"V"+H+"Z")},needLine:!0,noDot:!0},arrow:{n:53,f:function(V,W,q){if(p(W))return g;var z=T/2.5,H=2*V*C(z),Z=2*V*P(z);return G(W,q,"M0,0L"+-H+","+Z+"L"+H+","+Z+"Z")},backoff:.9,noDot:!0},"arrow-wide":{n:54,f:function(V,W,q){if(p(W))return g;var z=T/4,H=2*V*C(z),Z=2*V*P(z);return G(W,q,"M0,0L"+-H+","+Z+"A "+2*V+","+2*V+" 0 0 1 "+H+","+Z+"Z")},backoff:.4,noDot:!0}};function p(V){return V===null}var Y,N,j,ee;function G(V,W,q){if((!V||V%360===0)&&!W)return q;if(j===V&&ee===W&&Y===q)return N;j=V,ee=W,Y=q;function z(ye,De){var Ue=C(ye),he=P(ye),Be=De[0],Ye=De[1]+(W||0);return[Be*Ue-Ye*he,Be*he+Ye*Ue]}for(var H=V/180*T,Z=0,ne=0,te=M(q),Se="",fe=0;fe<te.length;fe++){var ve=te[fe],xe=ve[0],re=Z,de=ne;if(xe==="M"||xe==="L")Z=+ve[1],ne=+ve[2];else if(xe==="m"||xe==="l")Z+=+ve[1],ne+=+ve[2];else if(xe==="H")Z=+ve[1];else if(xe==="h")Z+=+ve[1];else if(xe==="V")ne=+ve[1];else if(xe==="v")ne+=+ve[1];else if(xe==="A"){Z=+ve[1],ne=+ve[2];var be=z(H,[+ve[6],+ve[7]]);ve[6]=be[0],ve[7]=be[1],ve[3]=+ve[3]+V}(xe==="H"||xe==="V")&&(xe="L"),(xe==="h"||xe==="v")&&(xe="l"),(xe==="m"||xe==="l")&&(Z-=re,ne-=de);var Te=z(H,[Z,ne]);(xe==="H"||xe==="V")&&(xe="L"),(xe==="M"||xe==="L"||xe==="m"||xe==="l")&&(ve[1]=Te[0],ve[2]=Te[1]),ve[0]=xe,Se+=ve[0]+ve.slice(1).join(",")}return N=Se,Se}}}),t1=a({"src/components/drawing/index.js"(pe,me){var M=f(),v=o0(),g=v.numberFormat,E=w(),S=b(),T=jp(),C=Oe(),P=Wy(),p=v.strTranslate,Y=v1(),N=P1(),j=f1(),ee=j.LINE_SPACING,G=we().DESELECTDIM,V=D1(),W=Q2(),q=jg().appendArrayPointValue,z=me.exports={};z.font=function(_r,gs){var dr=gs.variant,Lo=gs.style,Cp=gs.weight,Hp=gs.color,e0=gs.size,t0=gs.family,n0=gs.shadow,y0=gs.lineposition,h0=gs.textcase;t0&&_r.style("font-family",t0),e0+1&&_r.style("font-size",e0+"px"),Hp&&_r.call(C.fill,Hp),Cp&&_r.style("font-weight",Cp),Lo&&_r.style("font-style",Lo),dr&&_r.style("font-variant",dr),h0&&_r.style("text-transform",H(ne(h0))),n0&&_r.style("text-shadow",n0==="auto"?Y.makeTextShadow(C.contrast(Hp)):H(n0)),y0&&_r.style("text-decoration-line",H(te(y0)))};function H(_r){return _r==="none"?void 0:_r}var Z={normal:"none",lower:"lowercase",upper:"uppercase","word caps":"capitalize"};function ne(_r){return Z[_r]}function te(_r){return _r.replace("under","underline").replace("over","overline").replace("through","line-through").split("+").join(" ")}z.setPosition=function(_r,gs,dr){_r.attr("x",gs).attr("y",dr)},z.setSize=function(_r,gs,dr){_r.attr("width",gs).attr("height",dr)},z.setRect=function(_r,gs,dr,Lo,Cp){_r.call(z.setPosition,gs,dr).call(z.setSize,Lo,Cp)},z.translatePoint=function(_r,gs,dr,Lo){var Cp=dr.c2p(_r.x),Hp=Lo.c2p(_r.y);if(E(Cp)&&E(Hp)&&gs.node())gs.node().nodeName==="text"?gs.attr("x",Cp).attr("y",Hp):gs.attr("transform",p(Cp,Hp));else return!1;return!0},z.translatePoints=function(_r,gs,dr){_r.each(function(Lo){var Cp=M.select(this);z.translatePoint(Lo,Cp,gs,dr)})},z.hideOutsideRangePoint=function(_r,gs,dr,Lo,Cp,Hp){gs.attr("display",dr.isPtWithinRange(_r,Cp)&&Lo.isPtWithinRange(_r,Hp)?null:"none")},z.hideOutsideRangePoints=function(_r,gs){if(gs._hasClipOnAxisFalse){var dr=gs.xaxis,Lo=gs.yaxis;_r.each(function(Cp){var Hp=Cp[0].trace,e0=Hp.xcalendar,t0=Hp.ycalendar,n0=T.traceIs(Hp,"bar-like")?".bartext":".point,.textpoint";_r.selectAll(n0).each(function(y0){z.hideOutsideRangePoint(y0,M.select(this),dr,Lo,e0,t0)})})}},z.crispRound=function(_r,gs,dr){return!gs||!E(gs)?dr||0:_r._context.staticPlot?gs:gs<1?1:Math.round(gs)},z.singleLineStyle=function(_r,gs,dr,Lo,Cp){gs.style("fill","none");var Hp=(((_r||[])[0]||{}).trace||{}).line||{},e0=dr||Hp.width||0,t0=Cp||Hp.dash||"";C.stroke(gs,Lo||Hp.color),z.dashLine(gs,t0,e0)},z.lineGroupStyle=function(_r,gs,dr,Lo){_r.style("fill","none").each(function(Cp){var Hp=(((Cp||[])[0]||{}).trace||{}).line||{},e0=gs||Hp.width||0,t0=Lo||Hp.dash||"";M.select(this).call(C.stroke,dr||Hp.color).call(z.dashLine,t0,e0)})},z.dashLine=function(_r,gs,dr){dr=+dr||0,gs=z.dashStyle(gs,dr),_r.style({"stroke-dasharray":gs,"stroke-width":dr+"px"})},z.dashStyle=function(_r,gs){gs=+gs||1;var dr=Math.max(gs,3);return _r==="solid"?_r="":_r==="dot"?_r=dr+"px,"+dr+"px":_r==="dash"?_r=3*dr+"px,"+3*dr+"px":_r==="longdash"?_r=5*dr+"px,"+5*dr+"px":_r==="dashdot"?_r=3*dr+"px,"+dr+"px,"+dr+"px,"+dr+"px":_r==="longdashdot"&&(_r=5*dr+"px,"+2*dr+"px,"+dr+"px,"+2*dr+"px"),_r};function Se(_r,gs,dr,Lo){var Cp=gs.fillpattern,Hp=gs.fillgradient,e0=z.getPatternAttr,t0=Cp&&(e0(Cp.shape,0,"")||e0(Cp.path,0,""));if(t0){var n0=e0(Cp.bgcolor,0,null),y0=e0(Cp.fgcolor,0,null),h0=Cp.fgopacity,I0=e0(Cp.size,0,8),Kp=e0(Cp.solidity,0,.3),B0=gs.uid;z.pattern(_r,"point",dr,B0,t0,I0,Kp,void 0,Cp.fillmode,n0,y0,h0)}else if(Hp&&Hp.type!=="none"){var em=Hp.type,k0="scatterfill-"+gs.uid;if(Lo&&(k0="legendfill-"+gs.uid),!Lo&&(Hp.start!==void 0||Hp.stop!==void 0)){var J0,vs;em==="horizontal"?(J0={x:Hp.start,y:0},vs={x:Hp.stop,y:0}):em==="vertical"&&(J0={x:0,y:Hp.start},vs={x:0,y:Hp.stop}),J0.x=gs._xA.c2p(J0.x===void 0?gs._extremes.x.min[0].val:J0.x,!0),J0.y=gs._yA.c2p(J0.y===void 0?gs._extremes.y.min[0].val:J0.y,!0),vs.x=gs._xA.c2p(vs.x===void 0?gs._extremes.x.max[0].val:vs.x,!0),vs.y=gs._yA.c2p(vs.y===void 0?gs._extremes.y.max[0].val:vs.y,!0),_r.call(Te,dr,k0,"linear",Hp.colorscale,"fill",J0,vs,!0,!1)}else em==="horizontal"&&(em=em+"reversed"),_r.call(z.gradient,dr,k0,em,Hp.colorscale,"fill")}else gs.fillcolor&&_r.call(C.fill,gs.fillcolor)}z.singleFillStyle=function(_r,gs){var dr=M.select(_r.node()),Lo=dr.data(),Cp=((Lo[0]||[])[0]||{}).trace||{};Se(_r,Cp,gs,!1)},z.fillGroupStyle=function(_r,gs,dr){_r.style("stroke-width",0).each(function(Lo){var Cp=M.select(this);Lo[0].trace&&Se(Cp,Lo[0].trace,gs,dr)})};var fe=Qg();z.symbolNames=[],z.symbolFuncs=[],z.symbolBackOffs=[],z.symbolNeedLines={},z.symbolNoDot={},z.symbolNoFill={},z.symbolList=[],Object.keys(fe).forEach(function(_r){var gs=fe[_r],dr=gs.n;z.symbolList.push(dr,String(dr),_r,dr+100,String(dr+100),_r+"-open"),z.symbolNames[dr]=_r,z.symbolFuncs[dr]=gs.f,z.symbolBackOffs[dr]=gs.backoff||0,gs.needLine&&(z.symbolNeedLines[dr]=!0),gs.noDot?z.symbolNoDot[dr]=!0:z.symbolList.push(dr+200,String(dr+200),_r+"-dot",dr+300,String(dr+300),_r+"-open-dot"),gs.noFill&&(z.symbolNoFill[dr]=!0)});var ve=z.symbolNames.length,xe="M0,0.5L0.5,0L0,-0.5L-0.5,0Z";z.symbolNumber=function(_r){if(E(_r))_r=+_r;else if(typeof _r=="string"){var gs=0;_r.indexOf("-open")>0&&(gs=100,_r=_r.replace("-open","")),_r.indexOf("-dot")>0&&(gs+=200,_r=_r.replace("-dot","")),_r=z.symbolNames.indexOf(_r),_r>=0&&(_r+=gs)}return _r%100>=ve||_r>=400?0:Math.floor(Math.max(_r,0))};function re(_r,gs,dr,Lo){var Cp=_r%100;return z.symbolFuncs[Cp](gs,dr,Lo)+(_r>=200?xe:"")}var de=g("~f"),be={radial:{type:"radial"},radialreversed:{type:"radial",reversed:!0},horizontal:{type:"linear",start:{x:1,y:0},stop:{x:0,y:0}},horizontalreversed:{type:"linear",start:{x:1,y:0},stop:{x:0,y:0},reversed:!0},vertical:{type:"linear",start:{x:0,y:1},stop:{x:0,y:0}},verticalreversed:{type:"linear",start:{x:0,y:1},stop:{x:0,y:0},reversed:!0}};z.gradient=function(_r,gs,dr,Lo,Cp,Hp){var e0=be[Lo];return Te(_r,gs,dr,e0.type,Cp,Hp,e0.start,e0.stop,!1,e0.reversed)};function Te(_r,gs,dr,Lo,Cp,Hp,e0,t0,n0,y0){var h0=Cp.length,I0;Lo==="linear"?I0={node:"linearGradient",attrs:{x1:e0.x,y1:e0.y,x2:t0.x,y2:t0.y,gradientUnits:n0?"userSpaceOnUse":"objectBoundingBox"},reversed:y0}:Lo==="radial"&&(I0={node:"radialGradient",reversed:y0});for(var Kp=new Array(h0),B0=0;B0<h0;B0++)I0.reversed?Kp[h0-1-B0]=[de((1-Cp[B0][0])*100),Cp[B0][1]]:Kp[B0]=[de(Cp[B0][0]*100),Cp[B0][1]];var em=gs._fullLayout,k0="g"+em._uid+"-"+dr,J0=em._defs.select(".gradients").selectAll("#"+k0).data([Lo+Kp.join(";")],v.identity);J0.exit().remove(),J0.enter().append(I0.node).each(function(){var vs=M.select(this);I0.attrs&&vs.attr(I0.attrs),vs.attr("id",k0);var jl=vs.selectAll("stop").data(Kp);jl.exit().remove(),jl.enter().append("stop"),jl.each(function(zl){var Ve=S(zl[1]);M.select(this).attr({offset:zl[0]+"%","stop-color":C.tinyRGB(Ve),"stop-opacity":Ve.getAlpha()})})}),_r.style(Hp,Je(k0,gs)).style(Hp+"-opacity",null),_r.classed("gradient_filled",!0)}z.pattern=function(_r,gs,dr,Lo,Cp,Hp,e0,t0,n0,y0,h0,I0){var Kp=gs==="legend";t0&&(n0==="overlay"?(y0=t0,h0=C.contrast(y0)):(y0=void 0,h0=t0));var B0=dr._fullLayout,em="p"+B0._uid+"-"+Lo,k0,J0,vs=function(Dp,c0,b0,E0,gm){return E0+(gm-E0)*(Dp-c0)/(b0-c0)},jl,zl,Ve,pn,ci={},_n=S(h0),Tp=C.tinyRGB(_n),Sp=_n.getAlpha(),Ip=I0*Sp;switch(Cp){case"/":k0=Hp*Math.sqrt(2),J0=Hp*Math.sqrt(2),jl="M-"+k0/4+","+J0/4+"l"+k0/2+",-"+J0/2+"M0,"+J0+"L"+k0+",0M"+k0/4*3+","+J0/4*5+"l"+k0/2+",-"+J0/2,zl=e0*Hp,pn="path",ci={d:jl,opacity:Ip,stroke:Tp,"stroke-width":zl+"px"};break;case"\\":k0=Hp*Math.sqrt(2),J0=Hp*Math.sqrt(2),jl="M"+k0/4*3+",-"+J0/4+"l"+k0/2+","+J0/2+"M0,0L"+k0+","+J0+"M-"+k0/4+","+J0/4*3+"l"+k0/2+","+J0/2,zl=e0*Hp,pn="path",ci={d:jl,opacity:Ip,stroke:Tp,"stroke-width":zl+"px"};break;case"x":k0=Hp*Math.sqrt(2),J0=Hp*Math.sqrt(2),jl="M-"+k0/4+","+J0/4+"l"+k0/2+",-"+J0/2+"M0,"+J0+"L"+k0+",0M"+k0/4*3+","+J0/4*5+"l"+k0/2+",-"+J0/2+"M"+k0/4*3+",-"+J0/4+"l"+k0/2+","+J0/2+"M0,0L"+k0+","+J0+"M-"+k0/4+","+J0/4*3+"l"+k0/2+","+J0/2,zl=Hp-Hp*Math.sqrt(1-e0),pn="path",ci={d:jl,opacity:Ip,stroke:Tp,"stroke-width":zl+"px"};break;case"|":k0=Hp,J0=Hp,pn="path",jl="M"+k0/2+",0L"+k0/2+","+J0,zl=e0*Hp,pn="path",ci={d:jl,opacity:Ip,stroke:Tp,"stroke-width":zl+"px"};break;case"-":k0=Hp,J0=Hp,pn="path",jl="M0,"+J0/2+"L"+k0+","+J0/2,zl=e0*Hp,pn="path",ci={d:jl,opacity:Ip,stroke:Tp,"stroke-width":zl+"px"};break;case"+":k0=Hp,J0=Hp,pn="path",jl="M"+k0/2+",0L"+k0/2+","+J0+"M0,"+J0/2+"L"+k0+","+J0/2,zl=Hp-Hp*Math.sqrt(1-e0),pn="path",ci={d:jl,opacity:Ip,stroke:Tp,"stroke-width":zl+"px"};break;case".":k0=Hp,J0=Hp,e0<Math.PI/4?Ve=Math.sqrt(e0*Hp*Hp/Math.PI):Ve=vs(e0,Math.PI/4,1,Hp/2,Hp/Math.sqrt(2)),pn="circle",ci={cx:k0/2,cy:J0/2,r:Ve,opacity:Ip,fill:Tp};break;default:k0=Hp,J0=Hp,pn="path",ci={d:Cp,opacity:Ip,fill:Tp};break}var Jp=[Cp||"noSh",y0||"noBg",h0||"noFg",Hp,e0].join(";"),m0=B0._defs.select(".patterns").selectAll("#"+em).data([Jp],v.identity);m0.exit().remove(),m0.enter().append("pattern").each(function(){var Dp=M.select(this);if(Dp.attr({id:em,width:k0+"px",height:J0+"px",patternUnits:"userSpaceOnUse",patternTransform:Kp?"scale(0.8)":""}),y0){var c0=S(y0),b0=C.tinyRGB(c0),E0=c0.getAlpha(),gm=Dp.selectAll("rect").data([0]);gm.exit().remove(),gm.enter().append("rect").attr({width:k0+"px",height:J0+"px",fill:b0,"fill-opacity":E0})}var Nm=Dp.selectAll(pn).data([0]);Nm.exit().remove(),Nm.enter().append(pn).attr(ci)}),_r.style("fill",Je(em,dr)).style("fill-opacity",null),_r.classed("pattern_filled",!0)},z.initGradients=function(_r){var gs=_r._fullLayout,dr=v.ensureSingle(gs._defs,"g","gradients");dr.selectAll("linearGradient,radialGradient").remove(),M.select(_r).selectAll(".gradient_filled").classed("gradient_filled",!1)},z.initPatterns=function(_r){var gs=_r._fullLayout,dr=v.ensureSingle(gs._defs,"g","patterns");dr.selectAll("pattern").remove(),M.select(_r).selectAll(".pattern_filled").classed("pattern_filled",!1)},z.getPatternAttr=function(_r,gs,dr){return _r&&v.isArrayOrTypedArray(_r)?gs<_r.length?_r[gs]:dr:_r},z.pointStyle=function(_r,gs,dr,Lo){if(_r.size()){var Cp=z.makePointStyleFns(gs);_r.each(function(Hp){z.singlePointStyle(Hp,M.select(this),gs,Cp,dr,Lo)})}},z.singlePointStyle=function(_r,gs,dr,Lo,Cp,Hp){var e0=dr.marker,t0=e0.line;if(Hp&&Hp.i>=0&&_r.i===void 0&&(_r.i=Hp.i),gs.style("opacity",Lo.selectedOpacityFn?Lo.selectedOpacityFn(_r):_r.mo===void 0?e0.opacity:_r.mo),Lo.ms2mrc){var n0;_r.ms==="various"||e0.size==="various"?n0=3:n0=Lo.ms2mrc(_r.ms),_r.mrc=n0,Lo.selectedSizeFn&&(n0=_r.mrc=Lo.selectedSizeFn(_r));var y0=z.symbolNumber(_r.mx||e0.symbol)||0;_r.om=y0%200>=100;var h0=Up(_r,dr),I0=ce(_r,dr);gs.attr("d",re(y0,n0,h0,I0))}var Kp=!1,B0,em,k0;if(_r.so)k0=t0.outlierwidth,em=t0.outliercolor,B0=e0.outliercolor;else{var J0=(t0||{}).width;k0=(_r.mlw+1||J0+1||(_r.trace?(_r.trace.marker.line||{}).width:0)+1)-1||0,"mlc"in _r?em=_r.mlcc=Lo.lineScale(_r.mlc):v.isArrayOrTypedArray(t0.color)?em=C.defaultLine:em=t0.color,v.isArrayOrTypedArray(e0.color)&&(B0=C.defaultLine,Kp=!0),"mc"in _r?B0=_r.mcc=Lo.markerScale(_r.mc):B0=e0.color||e0.colors||"rgba(0,0,0,0)",Lo.selectedColorFn&&(B0=Lo.selectedColorFn(_r))}if(_r.om)gs.call(C.stroke,B0).style({"stroke-width":(k0||1)+"px",fill:"none"});else{gs.style("stroke-width",(_r.isBlank?0:k0)+"px");var vs=e0.gradient,jl=_r.mgt;jl?Kp=!0:jl=vs&&vs.type,v.isArrayOrTypedArray(jl)&&(jl=jl[0],be[jl]||(jl=0));var zl=e0.pattern,Ve=z.getPatternAttr,pn=zl&&(Ve(zl.shape,_r.i,"")||Ve(zl.path,_r.i,""));if(jl&&jl!=="none"){var ci=_r.mgc;ci?Kp=!0:ci=vs.color;var _n=dr.uid;Kp&&(_n+="-"+_r.i),z.gradient(gs,Cp,_n,jl,[[0,ci],[1,B0]],"fill")}else if(pn){var Tp=!1,Sp=zl.fgcolor;!Sp&&Hp&&Hp.color&&(Sp=Hp.color,Tp=!0);var Ip=Ve(Sp,_r.i,Hp&&Hp.color||null),Jp=Ve(zl.bgcolor,_r.i,null),m0=zl.fgopacity,Dp=Ve(zl.size,_r.i,8),c0=Ve(zl.solidity,_r.i,.3);Tp=Tp||_r.mcc||v.isArrayOrTypedArray(zl.shape)||v.isArrayOrTypedArray(zl.path)||v.isArrayOrTypedArray(zl.bgcolor)||v.isArrayOrTypedArray(zl.fgcolor)||v.isArrayOrTypedArray(zl.size)||v.isArrayOrTypedArray(zl.solidity);var b0=dr.uid;Tp&&(b0+="-"+_r.i),z.pattern(gs,"point",Cp,b0,pn,Dp,c0,_r.mcc,zl.fillmode,Jp,Ip,m0)}else v.isArrayOrTypedArray(B0)?C.fill(gs,B0[_r.i]):C.fill(gs,B0);k0&&C.stroke(gs,em)}},z.makePointStyleFns=function(_r){var gs={},dr=_r.marker;return gs.markerScale=z.tryColorscale(dr,""),gs.lineScale=z.tryColorscale(dr,"line"),T.traceIs(_r,"symbols")&&(gs.ms2mrc=V.isBubble(_r)?W(_r):function(){return(dr.size||6)/2}),_r.selectedpoints&&v.extendFlat(gs,z.makeSelectedPointStyleFns(_r)),gs},z.makeSelectedPointStyleFns=function(_r){var gs={},dr=_r.selected||{},Lo=_r.unselected||{},Cp=_r.marker||{},Hp=dr.marker||{},e0=Lo.marker||{},t0=Cp.opacity,n0=Hp.opacity,y0=e0.opacity,h0=n0!==void 0,I0=y0!==void 0;(v.isArrayOrTypedArray(t0)||h0||I0)&&(gs.selectedOpacityFn=function(Ve){var pn=Ve.mo===void 0?Cp.opacity:Ve.mo;return Ve.selected?h0?n0:pn:I0?y0:G*pn});var Kp=Cp.color,B0=Hp.color,em=e0.color;(B0||em)&&(gs.selectedColorFn=function(Ve){var pn=Ve.mcc||Kp;return Ve.selected?B0||pn:em||pn});var k0=Cp.size,J0=Hp.size,vs=e0.size,jl=J0!==void 0,zl=vs!==void 0;return T.traceIs(_r,"symbols")&&(jl||zl)&&(gs.selectedSizeFn=function(Ve){var pn=Ve.mrc||k0/2;return Ve.selected?jl?J0/2:pn:zl?vs/2:pn}),gs},z.makeSelectedTextStyleFns=function(_r){var gs={},dr=_r.selected||{},Lo=_r.unselected||{},Cp=_r.textfont||{},Hp=dr.textfont||{},e0=Lo.textfont||{},t0=Cp.color,n0=Hp.color,y0=e0.color;return gs.selectedTextColorFn=function(h0){var I0=h0.tc||t0;return h0.selected?n0||I0:y0||(n0?I0:C.addOpacity(I0,G))},gs},z.selectedPointStyle=function(_r,gs){if(!(!_r.size()||!gs.selectedpoints)){var dr=z.makeSelectedPointStyleFns(gs),Lo=gs.marker||{},Cp=[];dr.selectedOpacityFn&&Cp.push(function(Hp,e0){Hp.style("opacity",dr.selectedOpacityFn(e0))}),dr.selectedColorFn&&Cp.push(function(Hp,e0){C.fill(Hp,dr.selectedColorFn(e0))}),dr.selectedSizeFn&&Cp.push(function(Hp,e0){var t0=e0.mx||Lo.symbol||0,n0=dr.selectedSizeFn(e0);Hp.attr("d",re(z.symbolNumber(t0),n0,Up(e0,gs),ce(e0,gs))),e0.mrc2=n0}),Cp.length&&_r.each(function(Hp){for(var e0=M.select(this),t0=0;t0<Cp.length;t0++)Cp[t0](e0,Hp)})}},z.tryColorscale=function(_r,gs){var dr=gs?v.nestedProperty(_r,gs).get():_r;if(dr){var Lo=dr.color;if((dr.colorscale||dr._colorAx)&&v.isArrayOrTypedArray(Lo))return P.makeColorScaleFuncFromTrace(dr)}return v.identity};var ye={start:1,end:-1,middle:0,bottom:1,top:-1};function De(_r,gs,dr,Lo,Cp){var Hp=M.select(_r.node().parentNode),e0=gs.indexOf("top")!==-1?"top":gs.indexOf("bottom")!==-1?"bottom":"middle",t0=gs.indexOf("left")!==-1?"end":gs.indexOf("right")!==-1?"start":"middle",n0=Lo?Lo/.8+1:0,y0=(Y.lineCount(_r)-1)*ee+1,h0=ye[t0]*n0,I0=dr*.75+ye[e0]*n0+(ye[e0]-1)*y0*dr/2;_r.attr("text-anchor",t0),Cp||Hp.attr("transform",p(h0,I0))}function Ue(_r,gs){var dr=_r.ts||gs.textfont.size;return E(dr)&&dr>0?dr:0}z.textPointStyle=function(_r,gs,dr){if(_r.size()){var Lo;if(gs.selectedpoints){var Cp=z.makeSelectedTextStyleFns(gs);Lo=Cp.selectedTextColorFn}var Hp=gs.texttemplate,e0=dr._fullLayout;_r.each(function(t0){var n0=M.select(this),y0=Hp?v.extractOption(t0,gs,"txt","texttemplate"):v.extractOption(t0,gs,"tx","text");if(!y0&&y0!==0){n0.remove();return}if(Hp){var h0=gs._module.formatLabels,I0=h0?h0(t0,gs,e0):{},Kp={};q(Kp,gs,t0.i);var B0=gs._meta||{};y0=v.texttemplateString(y0,I0,e0._d3locale,Kp,t0,B0)}var em=t0.tp||gs.textposition,k0=Ue(t0,gs),J0=Lo?Lo(t0):t0.tc||gs.textfont.color;n0.call(z.font,{family:t0.tf||gs.textfont.family,weight:t0.tw||gs.textfont.weight,style:t0.ty||gs.textfont.style,variant:t0.tv||gs.textfont.variant,textcase:t0.tC||gs.textfont.textcase,lineposition:t0.tE||gs.textfont.lineposition,shadow:t0.tS||gs.textfont.shadow,size:k0,color:J0}).text(y0).call(Y.convertToTspans,dr).call(De,em,k0,t0.mrc)})}},z.selectedTextStyle=function(_r,gs){if(!(!_r.size()||!gs.selectedpoints)){var dr=z.makeSelectedTextStyleFns(gs);_r.each(function(Lo){var Cp=M.select(this),Hp=dr.selectedTextColorFn(Lo),e0=Lo.tp||gs.textposition,t0=Ue(Lo,gs);C.fill(Cp,Hp);var n0=T.traceIs(gs,"bar-like");De(Cp,e0,t0,Lo.mrc2||Lo.mrc,n0)})}};var he=.5;z.smoothopen=function(_r,gs){if(_r.length<3)return"M"+_r.join("L");var dr="M"+_r[0],Lo=[],Cp;for(Cp=1;Cp<_r.length-1;Cp++)Lo.push(mn(_r[Cp-1],_r[Cp],_r[Cp+1],gs));for(dr+="Q"+Lo[0][0]+" "+_r[1],Cp=2;Cp<_r.length-1;Cp++)dr+="C"+Lo[Cp-2][1]+" "+Lo[Cp-1][0]+" "+_r[Cp];return dr+="Q"+Lo[_r.length-3][1]+" "+_r[_r.length-1],dr},z.smoothclosed=function(_r,gs){if(_r.length<3)return"M"+_r.join("L")+"Z";var dr="M"+_r[0],Lo=_r.length-1,Cp=[mn(_r[Lo],_r[0],_r[1],gs)],Hp;for(Hp=1;Hp<Lo;Hp++)Cp.push(mn(_r[Hp-1],_r[Hp],_r[Hp+1],gs));for(Cp.push(mn(_r[Lo-1],_r[Lo],_r[0],gs)),Hp=1;Hp<=Lo;Hp++)dr+="C"+Cp[Hp-1][1]+" "+Cp[Hp][0]+" "+_r[Hp];return dr+="C"+Cp[Lo][1]+" "+Cp[0][0]+" "+_r[0]+"Z",dr};var Be,Ye;function et(_r,gs,dr){return dr&&(_r=Ae(_r)),gs?ft(_r[1]):Qe(_r[0])}function Qe(_r){var gs=M.round(_r,2);return Be=gs,gs}function ft(_r){var gs=M.round(_r,2);return Ye=gs,gs}function mn(_r,gs,dr,Lo){var Cp=_r[0]-gs[0],Hp=_r[1]-gs[1],e0=dr[0]-gs[0],t0=dr[1]-gs[1],n0=Math.pow(Cp*Cp+Hp*Hp,he/2),y0=Math.pow(e0*e0+t0*t0,he/2),h0=(y0*y0*Cp-n0*n0*e0)*Lo,I0=(y0*y0*Hp-n0*n0*t0)*Lo,Kp=3*y0*(n0+y0),B0=3*n0*(n0+y0);return[[Qe(gs[0]+(Kp&&h0/Kp)),ft(gs[1]+(Kp&&I0/Kp))],[Qe(gs[0]-(B0&&h0/B0)),ft(gs[1]-(B0&&I0/B0))]]}var ta={hv:function(_r,gs,dr){return"H"+Qe(gs[0])+"V"+et(gs,1,dr)},vh:function(_r,gs,dr){return"V"+ft(gs[1])+"H"+et(gs,0,dr)},hvh:function(_r,gs,dr){return"H"+Qe((_r[0]+gs[0])/2)+"V"+ft(gs[1])+"H"+et(gs,0,dr)},vhv:function(_r,gs,dr){return"V"+ft((_r[1]+gs[1])/2)+"H"+Qe(gs[0])+"V"+et(gs,1,dr)}},Do=function(_r,gs,dr){return"L"+et(gs,0,dr)+","+et(gs,1,dr)};z.steps=function(_r){var gs=ta[_r]||Do;return function(dr){for(var Lo="M"+Qe(dr[0][0])+","+ft(dr[0][1]),Cp=dr.length,Hp=1;Hp<Cp;Hp++)Lo+=gs(dr[Hp-1],dr[Hp],Hp===Cp-1);return Lo}};function Ae(_r,gs){var dr=_r.backoff,Lo=_r.trace,Cp=_r.d,Hp=_r.i;if(dr&&Lo&&Lo.marker&&Lo.marker.angle%360===0&&Lo.line&&Lo.line.shape!=="spline"){var e0=v.isArrayOrTypedArray(dr),t0=_r,n0=gs?gs[0]:Be||0,y0=gs?gs[1]:Ye||0,h0=t0[0],I0=t0[1],Kp=h0-n0,B0=I0-y0,em=Math.atan2(B0,Kp),k0=e0?dr[Hp]:dr;if(k0==="auto"){var J0=t0.i;Lo.type==="scatter"&&J0--;var vs=t0.marker,jl=vs.symbol;v.isArrayOrTypedArray(jl)&&(jl=jl[J0]);var zl=vs.size;v.isArrayOrTypedArray(zl)&&(zl=zl[J0]),k0=vs?z.symbolBackOffs[z.symbolNumber(jl)]*zl:0,k0+=z.getMarkerStandoff(Cp[J0],Lo)||0}var Ve=h0-k0*Math.cos(em),pn=I0-k0*Math.sin(em);(Ve<=h0&&Ve>=n0||Ve>=h0&&Ve<=n0)&&(pn<=I0&&pn>=y0||pn>=I0&&pn<=y0)&&(_r=[Ve,pn])}return _r}z.applyBackoff=Ae,z.makeTester=function(){var _r=v.ensureSingleById(M.select("body"),"svg","js-plotly-tester",function(dr){dr.attr(N.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),gs=v.ensureSingle(_r,"path","js-reference-point",function(dr){dr.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});z.tester=_r,z.testref=gs},z.savedBBoxes={};var ke=0,ge=1e4;z.bBox=function(_r,gs,dr){dr||(dr=Ce(_r));var Lo;if(dr){if(Lo=z.savedBBoxes[dr],Lo)return v.extendFlat({},Lo)}else if(_r.childNodes.length===1){var Cp=_r.childNodes[0];if(dr=Ce(Cp),dr){var Hp=+Cp.getAttribute("x")||0,e0=+Cp.getAttribute("y")||0,t0=Cp.getAttribute("transform");if(!t0){var n0=z.bBox(Cp,!1,dr);return Hp&&(n0.left+=Hp,n0.right+=Hp),e0&&(n0.top+=e0,n0.bottom+=e0),n0}if(dr+="~"+Hp+"~"+e0+"~"+t0,Lo=z.savedBBoxes[dr],Lo)return v.extendFlat({},Lo)}}var y0,h0;gs?y0=_r:(h0=z.tester.node(),y0=_r.cloneNode(!0),h0.appendChild(y0)),M.select(y0).attr("transform",null).call(Y.positionText,0,0);var I0=y0.getBoundingClientRect(),Kp=z.testref.node().getBoundingClientRect();gs||h0.removeChild(y0);var B0={height:I0.height,width:I0.width,left:I0.left-Kp.left,top:I0.top-Kp.top,right:I0.right-Kp.left,bottom:I0.bottom-Kp.top};return ke>=ge&&(z.savedBBoxes={},ke=0),dr&&(z.savedBBoxes[dr]=B0),ke++,v.extendFlat({},B0)};function Ce(_r){var gs=_r.getAttribute("data-unformatted");if(gs!==null)return gs+_r.getAttribute("data-math")+_r.getAttribute("text-anchor")+_r.getAttribute("style")}z.setClipUrl=function(_r,gs,dr){_r.attr("clip-path",Je(gs,dr))};function Je(_r,gs){if(!_r)return null;var dr=gs._context,Lo=dr._exportedPlot?"":dr._baseUrl||"";return Lo?"url('"+Lo+"#"+_r+"')":"url(#"+_r+")"}z.getTranslate=function(_r){var gs=/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,dr=_r.attr?"attr":"getAttribute",Lo=_r[dr]("transform")||"",Cp=Lo.replace(gs,function(Hp,e0,t0){return[e0,t0].join(" ")}).split(" ");return{x:+Cp[0]||0,y:+Cp[1]||0}},z.setTranslate=function(_r,gs,dr){var Lo=/(\btranslate\(.*?\);?)/,Cp=_r.attr?"attr":"getAttribute",Hp=_r.attr?"attr":"setAttribute",e0=_r[Cp]("transform")||"";return gs=gs||0,dr=dr||0,e0=e0.replace(Lo,"").trim(),e0+=p(gs,dr),e0=e0.trim(),_r[Hp]("transform",e0),e0},z.getScale=function(_r){var gs=/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,dr=_r.attr?"attr":"getAttribute",Lo=_r[dr]("transform")||"",Cp=Lo.replace(gs,function(Hp,e0,t0){return[e0,t0].join(" ")}).split(" ");return{x:+Cp[0]||1,y:+Cp[1]||1}},z.setScale=function(_r,gs,dr){var Lo=/(\bscale\(.*?\);?)/,Cp=_r.attr?"attr":"getAttribute",Hp=_r.attr?"attr":"setAttribute",e0=_r[Cp]("transform")||"";return gs=gs||1,dr=dr||1,e0=e0.replace(Lo,"").trim(),e0+="scale("+gs+","+dr+")",e0=e0.trim(),_r[Hp]("transform",e0),e0};var Re=/\s*sc.*/;z.setPointGroupScale=function(_r,gs,dr){if(gs=gs||1,dr=dr||1,!!_r){var Lo=gs===1&&dr===1?"":"scale("+gs+","+dr+")";_r.each(function(){var Cp=(this.getAttribute("transform")||"").replace(Re,"");Cp+=Lo,Cp=Cp.trim(),this.setAttribute("transform",Cp)})}};var Q=/translate\([^)]*\)\s*$/;z.setTextPointsScale=function(_r,gs,dr){_r&&_r.each(function(){var Lo,Cp=M.select(this),Hp=Cp.select("text");if(Hp.node()){var e0=parseFloat(Hp.attr("x")||0),t0=parseFloat(Hp.attr("y")||0),n0=(Cp.attr("transform")||"").match(Q);gs===1&&dr===1?Lo=[]:Lo=[p(e0,t0),"scale("+gs+","+dr+")",p(-e0,-t0)],n0&&Lo.push(n0),Cp.attr("transform",Lo.join(""))}})};function ce(_r,gs){var dr;return _r&&(dr=_r.mf),dr===void 0&&(dr=gs.marker&&gs.marker.standoff||0),!gs._geo&&!gs._xA?-dr:dr}z.getMarkerStandoff=ce;var Me=Math.atan2,Le=Math.cos,tt=Math.sin;function bt(_r,gs){var dr=gs[0],Lo=gs[1];return[dr*Le(_r)-Lo*tt(_r),dr*tt(_r)+Lo*Le(_r)]}var Ct,yi,Fl,Yl,qp,Fp;function Up(_r,gs){var dr=_r.ma;dr===void 0&&(dr=gs.marker.angle,(!dr||v.isArrayOrTypedArray(dr))&&(dr=0));var Lo,Cp,Hp=gs.marker.angleref;if(Hp==="previous"||Hp==="north"){if(gs._geo){var e0=gs._geo.project(_r.lonlat);Lo=e0[0],Cp=e0[1]}else{var t0=gs._xA,n0=gs._yA;if(t0&&n0)Lo=t0.c2p(_r.x),Cp=n0.c2p(_r.y);else return 90}if(gs._geo){var y0=_r.lonlat[0],h0=_r.lonlat[1],I0=gs._geo.project([y0,h0+1e-5]),Kp=gs._geo.project([y0+1e-5,h0]),B0=Me(Kp[1]-Cp,Kp[0]-Lo),em=Me(I0[1]-Cp,I0[0]-Lo),k0;if(Hp==="north")k0=dr/180*Math.PI;else if(Hp==="previous"){var J0=y0/180*Math.PI,vs=h0/180*Math.PI,jl=Ct/180*Math.PI,zl=yi/180*Math.PI,Ve=jl-J0,pn=Le(zl)*tt(Ve),ci=tt(zl)*Le(vs)-Le(zl)*tt(vs)*Le(Ve);k0=-Me(pn,ci)-Math.PI,Ct=y0,yi=h0}var _n=bt(B0,[Le(k0),0]),Tp=bt(em,[tt(k0),0]);dr=Me(_n[1]+Tp[1],_n[0]+Tp[0])/Math.PI*180,Hp==="previous"&&!(Fp===gs.uid&&_r.i===qp+1)&&(dr=null)}if(Hp==="previous"&&!gs._geo)if(Fp===gs.uid&&_r.i===qp+1&&E(Lo)&&E(Cp)){var Sp=Lo-Fl,Ip=Cp-Yl,Jp=gs.line&&gs.line.shape||"",m0=Jp.slice(Jp.length-1);m0==="h"&&(Ip=0),m0==="v"&&(Sp=0),dr+=Me(Ip,Sp)/Math.PI*180+90}else dr=null}return Fl=Lo,Yl=Cp,qp=_r.i,Fp=gs.uid,dr}z.getMarkerAngle=Up}}),f_=a({"src/components/titles/index.js"(pe,me){var M=f(),v=w(),g=p1(),E=jp(),S=o0(),T=S.strTranslate,C=t1(),P=Oe(),p=v1(),Y=we(),N=f1().OPPOSITE_SIDE,j=/ [XY][0-9]* /,ee=1.6,G=1.6;function V(W,q,z){var H=W._fullLayout,Z=z.propContainer,ne=z.propName,te=z.placeholder,Se=z.traceIndex,fe=z.avoid||{},ve=z.attributes,xe=z.transform,re=z.containerGroup,de=1,be=Z.title,Te=(be&&be.text?be.text:"").trim(),ye=!1,De=be&&be.font?be.font:{},Ue=De.family,he=De.size,Be=De.color,Ye=De.weight,et=De.style,Qe=De.variant,ft=De.textcase,mn=De.lineposition,ta=De.shadow,Do=z.subtitlePropName,Ae=!!Do,ke=z.subtitlePlaceholder,ge=(Z.title||{}).subtitle||{text:"",font:{}},Ce=ge.text.trim(),Je=!1,Re=1,Q=ge.font,ce=Q.family,Me=Q.size,Le=Q.color,tt=Q.weight,bt=Q.style,Ct=Q.variant,yi=Q.textcase,Fl=Q.lineposition,Yl=Q.shadow,qp;ne==="title.text"?qp="titleText":ne.indexOf("axis")!==-1?qp="axisTitleText":ne.indexOf("colorbar")!==-1&&(qp="colorbarTitleText");var Fp=W._context.edits[qp];function Up(Kp,B0){return Kp===void 0||B0===void 0?!1:Kp.replace(j," % ")===B0.replace(j," % ")}Te===""?de=0:Up(Te,te)&&(Fp||(Te=""),de=.2,ye=!0),Ae&&(Ce===""?Re=0:Up(Ce,ke)&&(Fp||(Ce=""),Re=.2,Je=!0)),z._meta?Te=S.templateString(Te,z._meta):H._meta&&(Te=S.templateString(Te,H._meta));var _r=Te||Ce||Fp,gs;re||(re=S.ensureSingle(H._infolayer,"g","g-"+q),gs=H._hColorbarMoveTitle);var dr=re.selectAll("text."+q).data(_r?[0]:[]);dr.enter().append("text"),dr.text(Te).attr("class",q),dr.exit().remove();var Lo=null,Cp=q+"-subtitle",Hp=Ce||Fp;if(Ae&&Hp&&(Lo=re.selectAll("text."+Cp).data(Hp?[0]:[]),Lo.enter().append("text"),Lo.text(Ce).attr("class",Cp),Lo.exit().remove()),!_r)return re;function e0(Kp,B0){S.syncOrAsync([t0,n0],{title:Kp,subtitle:B0})}function t0(Kp){var B0=Kp.title,em=Kp.subtitle,k0;!xe&&gs&&(xe={}),xe?(k0="",xe.rotate&&(k0+="rotate("+[xe.rotate,ve.x,ve.y]+")"),(xe.offset||gs)&&(k0+=T(0,(xe.offset||0)-(gs||0)))):k0=null,B0.attr("transform",k0);function J0(ci){if(ci){var _n=M.select(ci.node().parentNode).select("."+Cp);if(!_n.empty()){var Tp=ci.node().getBBox();if(Tp.height){var Sp=Tp.y+Tp.height+ee*Me;_n.attr("y",Sp)}}}}if(B0.style("opacity",de*P.opacity(Be)).call(C.font,{color:P.rgb(Be),size:M.round(he,2),family:Ue,weight:Ye,style:et,variant:Qe,textcase:ft,shadow:ta,lineposition:mn}).attr(ve).call(p.convertToTspans,W,J0),em){var vs=re.select("."+q+"-math-group"),jl=B0.node().getBBox(),zl=vs.node()?vs.node().getBBox():void 0,Ve=zl?zl.y+zl.height+ee*Me:jl.y+jl.height+G*Me,pn=S.extendFlat({},ve,{y:Ve});em.attr("transform",k0),em.style("opacity",Re*P.opacity(Le)).call(C.font,{color:P.rgb(Le),size:M.round(Me,2),family:ce,weight:tt,style:bt,variant:Ct,textcase:yi,shadow:Yl,lineposition:Fl}).attr(pn).call(p.convertToTspans,W)}return g.previousPromises(W)}function n0(Kp){var B0=Kp.title,em=M.select(B0.node().parentNode);if(fe&&fe.selection&&fe.side&&Te){em.attr("transform",null);var k0=N[fe.side],J0=fe.side==="left"||fe.side==="top"?-1:1,vs=v(fe.pad)?fe.pad:2,jl=C.bBox(em.node()),zl={t:0,b:0,l:0,r:0},Ve=W._fullLayout._reservedMargin;for(var pn in Ve)for(var ci in Ve[pn]){var _n=Ve[pn][ci];zl[ci]=Math.max(zl[ci],_n)}var Tp={left:zl.l,top:zl.t,right:H.width-zl.r,bottom:H.height-zl.b},Sp=fe.maxShift||J0*(Tp[fe.side]-jl[fe.side]),Ip=0;if(Sp<0)Ip=Sp;else{var Jp=fe.offsetLeft||0,m0=fe.offsetTop||0;jl.left-=Jp,jl.right-=Jp,jl.top-=m0,jl.bottom-=m0,fe.selection.each(function(){var c0=C.bBox(this);S.bBoxIntersect(jl,c0,vs)&&(Ip=Math.max(Ip,J0*(c0[fe.side]-jl[k0])+vs))}),Ip=Math.min(Sp,Ip),Z._titleScoot=Math.abs(Ip)}if(Ip>0||Sp<0){var Dp={left:[-Ip,0],right:[Ip,0],top:[0,-Ip],bottom:[0,Ip]}[fe.side];em.attr("transform",T(Dp[0],Dp[1]))}}}dr.call(e0,Lo);function y0(Kp,B0){Kp.text(B0).on("mouseover.opacity",function(){M.select(this).transition().duration(Y.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){M.select(this).transition().duration(Y.HIDE_PLACEHOLDER).style("opacity",0)})}if(Fp&&(Te?dr.on(".opacity",null):(y0(dr,te),ye=!0),dr.call(p.makeEditable,{gd:W}).on("edit",function(Kp){Se!==void 0?E.call("_guiRestyle",W,ne,Kp,Se):E.call("_guiRelayout",W,ne,Kp)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(e0)}).on("input",function(Kp){this.text(Kp||" ").call(p.positionText,ve.x,ve.y)}),Ae)){if(Ae&&!Te){var h0=dr.node().getBBox(),I0=h0.y+h0.height+G*Me;Lo.attr("y",I0)}Ce?Lo.on(".opacity",null):(y0(Lo,ke),Je=!0),Lo.call(p.makeEditable,{gd:W}).on("edit",function(Kp){E.call("_guiRelayout",W,"title.subtitle.text",Kp)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(e0)}).on("input",function(Kp){this.text(Kp||" ").call(p.positionText,Lo.attr("x"),Lo.attr("y"))})}return dr.classed("js-placeholder",ye),Lo&&Lo.classed("js-placeholder",Je),re}me.exports={draw:V,SUBTITLE_PADDING_EM:G,SUBTITLE_PADDING_MATHJAX_EM:ee}}}),Ay=a({"src/plots/cartesian/set_convert.js"(pe,me){var M=f(),v=h().utcFormat,g=o0(),E=g.numberFormat,S=w(),T=g.cleanNumber,C=g.ms2DateTime,P=g.dateTime2ms,p=g.ensureNumber,Y=g.isArrayOrTypedArray,N=A(),j=N.FP_SAFE,ee=N.BADNUM,G=N.LOG_CLIP,V=N.ONEWEEK,W=N.ONEDAY,q=N.ONEHOUR,z=N.ONEMIN,H=N.ONESEC,Z=Ov(),ne=wv(),te=ne.HOUR_PATTERN,Se=ne.WEEKDAY_PATTERN;function fe(xe){return Math.pow(10,xe)}function ve(xe){return xe!=null}me.exports=function(re,de){de=de||{};var be=re._id||"x",Te=be.charAt(0);function ye(Ce,Je){if(Ce>0)return Math.log(Ce)/Math.LN10;if(Ce<=0&&Je&&re.range&&re.range.length===2){var Re=re.range[0],Q=re.range[1];return .5*(Re+Q-2*G*Math.abs(Re-Q))}else return ee}function De(Ce,Je,Re,Q){if((Q||{}).msUTC&&S(Ce))return+Ce;var ce=P(Ce,Re||re.calendar);if(ce===ee)if(S(Ce)){Ce=+Ce;var Me=Math.floor(g.mod(Ce+.05,1)*10),Le=Math.round(Ce-Me/10);ce=P(new Date(Le))+Me/10}else return ee;return ce}function Ue(Ce,Je,Re){return C(Ce,Je,Re||re.calendar)}function he(Ce){return re._categories[Math.round(Ce)]}function Be(Ce){if(ve(Ce)){if(re._categoriesMap===void 0&&(re._categoriesMap={}),re._categoriesMap[Ce]!==void 0)return re._categoriesMap[Ce];re._categories.push(typeof Ce=="number"?String(Ce):Ce);var Je=re._categories.length-1;return re._categoriesMap[Ce]=Je,Je}return ee}function Ye(Ce,Je){for(var Re=new Array(Je),Q=0;Q<Je;Q++){var ce=(Ce[0]||[])[Q],Me=(Ce[1]||[])[Q];Re[Q]=et([ce,Me])}return Re}function et(Ce){if(re._categoriesMap)return re._categoriesMap[Ce]}function Qe(Ce){var Je=et(Ce);if(Je!==void 0)return Je;if(S(Ce))return+Ce}function ft(Ce){return S(Ce)?+Ce:et(Ce)}function mn(Ce,Je,Re){return M.round(Re+Je*Ce,2)}function ta(Ce,Je,Re){return(Ce-Re)/Je}var Do=function(Je){return S(Je)?mn(Je,re._m,re._b):ee},Ae=function(Ce){return ta(Ce,re._m,re._b)};if(re.rangebreaks){var ke=Te==="y";Do=function(Ce){if(!S(Ce))return ee;var Je=re._rangebreaks.length;if(!Je)return mn(Ce,re._m,re._b);var Re=ke;re.range[0]>re.range[1]&&(Re=!Re);for(var Q=Re?-1:1,ce=Q*Ce,Me=0,Le=0;Le<Je;Le++){var tt=Q*re._rangebreaks[Le].min,bt=Q*re._rangebreaks[Le].max;if(ce<tt)break;if(ce>bt)Me=Le+1;else{Me=ce<(tt+bt)/2?Le:Le+1;break}}var Ct=re._B[Me]||0;return isFinite(Ct)?mn(Ce,re._m2,Ct):0},Ae=function(Ce){var Je=re._rangebreaks.length;if(!Je)return ta(Ce,re._m,re._b);for(var Re=0,Q=0;Q<Je&&!(Ce<re._rangebreaks[Q].pmin);Q++)Ce>re._rangebreaks[Q].pmax&&(Re=Q+1);return ta(Ce,re._m2,re._B[Re])}}re.c2l=re.type==="log"?ye:p,re.l2c=re.type==="log"?fe:p,re.l2p=Do,re.p2l=Ae,re.c2p=re.type==="log"?function(Ce,Je){return Do(ye(Ce,Je))}:Do,re.p2c=re.type==="log"?function(Ce){return fe(Ae(Ce))}:Ae,["linear","-"].indexOf(re.type)!==-1?(re.d2r=re.r2d=re.d2c=re.r2c=re.d2l=re.r2l=T,re.c2d=re.c2r=re.l2d=re.l2r=p,re.d2p=re.r2p=function(Ce){return re.l2p(T(Ce))},re.p2d=re.p2r=Ae,re.cleanPos=p):re.type==="log"?(re.d2r=re.d2l=function(Ce,Je){return ye(T(Ce),Je)},re.r2d=re.r2c=function(Ce){return fe(T(Ce))},re.d2c=re.r2l=T,re.c2d=re.l2r=p,re.c2r=ye,re.l2d=fe,re.d2p=function(Ce,Je){return re.l2p(re.d2r(Ce,Je))},re.p2d=function(Ce){return fe(Ae(Ce))},re.r2p=function(Ce){return re.l2p(T(Ce))},re.p2r=Ae,re.cleanPos=p):re.type==="date"?(re.d2r=re.r2d=g.identity,re.d2c=re.r2c=re.d2l=re.r2l=De,re.c2d=re.c2r=re.l2d=re.l2r=Ue,re.d2p=re.r2p=function(Ce,Je,Re){return re.l2p(De(Ce,0,Re))},re.p2d=re.p2r=function(Ce,Je,Re){return Ue(Ae(Ce),Je,Re)},re.cleanPos=function(Ce){return g.cleanDate(Ce,ee,re.calendar)}):re.type==="category"?(re.d2c=re.d2l=Be,re.r2d=re.c2d=re.l2d=he,re.d2r=re.d2l_noadd=Qe,re.r2c=function(Ce){var Je=ft(Ce);return Je!==void 0?Je:re.fraction2r(.5)},re.l2r=re.c2r=p,re.r2l=ft,re.d2p=function(Ce){return re.l2p(re.r2c(Ce))},re.p2d=function(Ce){return he(Ae(Ce))},re.r2p=re.d2p,re.p2r=Ae,re.cleanPos=function(Ce){return typeof Ce=="string"&&Ce!==""?Ce:p(Ce)}):re.type==="multicategory"&&(re.r2d=re.c2d=re.l2d=he,re.d2r=re.d2l_noadd=Qe,re.r2c=function(Ce){var Je=Qe(Ce);return Je!==void 0?Je:re.fraction2r(.5)},re.r2c_just_indices=et,re.l2r=re.c2r=p,re.r2l=Qe,re.d2p=function(Ce){return re.l2p(re.r2c(Ce))},re.p2d=function(Ce){return he(Ae(Ce))},re.r2p=re.d2p,re.p2r=Ae,re.cleanPos=function(Ce){return Array.isArray(Ce)||typeof Ce=="string"&&Ce!==""?Ce:p(Ce)},re.setupMultiCategory=function(Ce){var Je=re._traceIndices,Re,Q,ce=re._matchGroup;if(ce&&re._categories.length===0){for(var Me in ce)if(Me!==be){var Le=de[Z.id2name(Me)];Je=Je.concat(Le._traceIndices)}}var tt=[[0,{}],[0,{}]],bt=[];for(Re=0;Re<Je.length;Re++){var Ct=Ce[Je[Re]];if(Te in Ct){var yi=Ct[Te],Fl=Ct._length||g.minRowLength(yi);if(Y(yi[0])&&Y(yi[1]))for(Q=0;Q<Fl;Q++){var Yl=yi[0][Q],qp=yi[1][Q];ve(Yl)&&ve(qp)&&(bt.push([Yl,qp]),Yl in tt[0][1]||(tt[0][1][Yl]=tt[0][0]++),qp in tt[1][1]||(tt[1][1][qp]=tt[1][0]++))}}}for(bt.sort(function(Fp,Up){var _r=tt[0][1],gs=_r[Fp[0]]-_r[Up[0]];if(gs)return gs;var dr=tt[1][1];return dr[Fp[1]]-dr[Up[1]]}),Re=0;Re<bt.length;Re++)Be(bt[Re])}),re.fraction2r=function(Ce){var Je=re.r2l(re.range[0]),Re=re.r2l(re.range[1]);return re.l2r(Je+Ce*(Re-Je))},re.r2fraction=function(Ce){var Je=re.r2l(re.range[0]),Re=re.r2l(re.range[1]);return(re.r2l(Ce)-Je)/(Re-Je)},re.limitRange=function(Ce){var Je=re.minallowed,Re=re.maxallowed;if(!(Je===void 0&&Re===void 0)){Ce||(Ce="range");var Q=g.nestedProperty(re,Ce).get(),ce=g.simpleMap(Q,re.r2l),Me=ce[1]<ce[0];Me&&ce.reverse();var Le=g.simpleMap([Je,Re],re.r2l);if(Je!==void 0&&ce[0]<Le[0]&&(Q[Me?1:0]=Je),Re!==void 0&&ce[1]>Le[1]&&(Q[Me?0:1]=Re),Q[0]===Q[1]){var tt=re.l2r(Je),bt=re.l2r(Re);if(Je!==void 0){var Ct=tt+1;Re!==void 0&&(Ct=Math.min(Ct,bt)),Q[Me?1:0]=Ct}if(Re!==void 0){var yi=bt+1;Je!==void 0&&(yi=Math.max(yi,tt)),Q[Me?0:1]=yi}}}},re.cleanRange=function(Ce,Je){re._cleanRange(Ce,Je),re.limitRange(Ce)},re._cleanRange=function(Ce,Je){Je||(Je={}),Ce||(Ce="range");var Re=g.nestedProperty(re,Ce).get(),Q,ce;if(re.type==="date"?ce=g.dfltRange(re.calendar):Te==="y"?ce=ne.DFLTRANGEY:re._name==="realaxis"?ce=[0,1]:ce=Je.dfltRange||ne.DFLTRANGEX,ce=ce.slice(),(re.rangemode==="tozero"||re.rangemode==="nonnegative")&&(ce[0]=0),!Re||Re.length!==2){g.nestedProperty(re,Ce).set(ce);return}var Me=Re[0]===null,Le=Re[1]===null;for(re.type==="date"&&!re.autorange&&(Re[0]=g.cleanDate(Re[0],ee,re.calendar),Re[1]=g.cleanDate(Re[1],ee,re.calendar)),Q=0;Q<2;Q++)if(re.type==="date"){if(!g.isDateTime(Re[Q],re.calendar)){re[Ce]=ce;break}if(re.r2l(Re[0])===re.r2l(Re[1])){var tt=g.constrain(re.r2l(Re[0]),g.MIN_MS+1e3,g.MAX_MS-1e3);Re[0]=re.l2r(tt-1e3),Re[1]=re.l2r(tt+1e3);break}}else{if(!S(Re[Q]))if(!(Me||Le)&&S(Re[1-Q]))Re[Q]=Re[1-Q]*(Q?10:.1);else{re[Ce]=ce;break}if(Re[Q]<-j?Re[Q]=-j:Re[Q]>j&&(Re[Q]=j),Re[0]===Re[1]){var bt=Math.max(1,Math.abs(Re[0]*1e-6));Re[0]-=bt,Re[1]+=bt}}},re.setScale=function(Ce){var Je=de._size;if(re.overlaying){var Re=Z.getFromId({_fullLayout:de},re.overlaying);re.domain=Re.domain}var Q=Ce&&re._r?"_r":"range",ce=re.calendar;re.cleanRange(Q);var Me=re.r2l(re[Q][0],ce),Le=re.r2l(re[Q][1],ce),tt=Te==="y";if(tt?(re._offset=Je.t+(1-re.domain[1])*Je.h,re._length=Je.h*(re.domain[1]-re.domain[0]),re._m=re._length/(Me-Le),re._b=-re._m*Le):(re._offset=Je.l+re.domain[0]*Je.w,re._length=Je.w*(re.domain[1]-re.domain[0]),re._m=re._length/(Le-Me),re._b=-re._m*Me),re._rangebreaks=[],re._lBreaks=0,re._m2=0,re._B=[],re.rangebreaks){var bt,Ct;if(re._rangebreaks=re.locateBreaks(Math.min(Me,Le),Math.max(Me,Le)),re._rangebreaks.length){for(bt=0;bt<re._rangebreaks.length;bt++)Ct=re._rangebreaks[bt],re._lBreaks+=Math.abs(Ct.max-Ct.min);var yi=tt;Me>Le&&(yi=!yi),yi&&re._rangebreaks.reverse();var Fl=yi?-1:1;for(re._m2=Fl*re._length/(Math.abs(Le-Me)-re._lBreaks),re._B.push(-re._m2*(tt?Le:Me)),bt=0;bt<re._rangebreaks.length;bt++)Ct=re._rangebreaks[bt],re._B.push(re._B[re._B.length-1]-Fl*re._m2*(Ct.max-Ct.min));for(bt=0;bt<re._rangebreaks.length;bt++)Ct=re._rangebreaks[bt],Ct.pmin=Do(Ct.min),Ct.pmax=Do(Ct.max)}}if(!isFinite(re._m)||!isFinite(re._b)||re._length<0)throw de._replotting=!1,new Error("Something went wrong with axis scaling")},re.maskBreaks=function(Ce){var Je=re.rangebreaks||[],Re,Q,ce,Me,Le;Je._cachedPatterns||(Je._cachedPatterns=Je.map(function(_r){return _r.enabled&&_r.bounds?g.simpleMap(_r.bounds,_r.pattern?T:re.d2c):null})),Je._cachedValues||(Je._cachedValues=Je.map(function(_r){return _r.enabled&&_r.values?g.simpleMap(_r.values,re.d2c).sort(g.sorterAsc):null}));for(var tt=0;tt<Je.length;tt++){var bt=Je[tt];if(bt.enabled){if(bt.bounds){var Ct=bt.pattern;switch(Re=Je._cachedPatterns[tt],Q=Re[0],ce=Re[1],Ct){case Se:Le=new Date(Ce),Me=Le.getUTCDay(),Q>ce&&(ce+=7,Me<Q&&(Me+=7));break;case te:Le=new Date(Ce);var yi=Le.getUTCHours(),Fl=Le.getUTCMinutes(),Yl=Le.getUTCSeconds(),qp=Le.getUTCMilliseconds();Me=yi+(Fl/60+Yl/3600+qp/36e5),Q>ce&&(ce+=24,Me<Q&&(Me+=24));break;case"":Me=Ce;break}if(Me>=Q&&Me<ce)return ee}else for(var Fp=Je._cachedValues[tt],Up=0;Up<Fp.length;Up++)if(Q=Fp[Up],ce=Q+bt.dvalue,Ce>=Q&&Ce<ce)return ee}}return Ce},re.locateBreaks=function(Ce,Je){var Re,Q,ce,Me,Le=[];if(!re.rangebreaks)return Le;var tt=re.rangebreaks.slice().sort(function(dr,Lo){return dr.pattern===Se&&Lo.pattern===te?-1:Lo.pattern===Se&&dr.pattern===te?1:0}),bt=function(dr,Lo){if(dr=g.constrain(dr,Ce,Je),Lo=g.constrain(Lo,Ce,Je),dr!==Lo){for(var Cp=!0,Hp=0;Hp<Le.length;Hp++){var e0=Le[Hp];dr<e0.max&&Lo>=e0.min&&(dr<e0.min&&(e0.min=dr),Lo>e0.max&&(e0.max=Lo),Cp=!1)}Cp&&Le.push({min:dr,max:Lo})}};for(Re=0;Re<tt.length;Re++){var Ct=tt[Re];if(Ct.enabled)if(Ct.bounds){var yi=Ce,Fl=Je;Ct.pattern&&(yi=Math.floor(yi)),Q=g.simpleMap(Ct.bounds,Ct.pattern?T:re.r2l),ce=Q[0],Me=Q[1];var Yl=new Date(yi),qp,Fp;switch(Ct.pattern){case Se:Fp=V,qp=((Me<ce?7:0)+(Me-ce))*W,yi+=ce*W-(Yl.getUTCDay()*W+Yl.getUTCHours()*q+Yl.getUTCMinutes()*z+Yl.getUTCSeconds()*H+Yl.getUTCMilliseconds());break;case te:Fp=W,qp=((Me<ce?24:0)+(Me-ce))*q,yi+=ce*q-(Yl.getUTCHours()*q+Yl.getUTCMinutes()*z+Yl.getUTCSeconds()*H+Yl.getUTCMilliseconds());break;default:yi=Math.min(Q[0],Q[1]),Fl=Math.max(Q[0],Q[1]),Fp=Fl-yi,qp=Fp}for(var Up=yi;Up<Fl;Up+=Fp)bt(Up,Up+qp)}else for(var _r=g.simpleMap(Ct.values,re.d2c),gs=0;gs<_r.length;gs++)ce=_r[gs],Me=ce+Ct.dvalue,bt(ce,Me)}return Le.sort(function(dr,Lo){return dr.min-Lo.min}),Le},re.makeCalcdata=function(Ce,Je,Re){var Q,ce,Me,Le,tt=re.type,bt=tt==="date"&&Ce[Je+"calendar"];if(Je in Ce){if(Q=Ce[Je],Le=Ce._length||g.minRowLength(Q),g.isTypedArray(Q)&&(tt==="linear"||tt==="log")){if(Le===Q.length)return Q;if(Q.subarray)return Q.subarray(0,Le)}if(tt==="multicategory")return Ye(Q,Le);for(ce=new Array(Le),Me=0;Me<Le;Me++)ce[Me]=re.d2c(Q[Me],0,bt,Re)}else{var Ct=Je+"0"in Ce?re.d2c(Ce[Je+"0"],0,bt):0,yi=Ce["d"+Je]?Number(Ce["d"+Je]):1;for(Q=Ce[{x:"y",y:"x"}[Je]],Le=Ce._length||Q.length,ce=new Array(Le),Me=0;Me<Le;Me++)ce[Me]=Ct+Me*yi}if(re.rangebreaks)for(Me=0;Me<Le;Me++)ce[Me]=re.maskBreaks(ce[Me]);return ce},re.isValidRange=function(Ce,Je){return Array.isArray(Ce)&&Ce.length===2&&(Je&&Ce[0]===null||S(re.r2l(Ce[0])))&&(Je&&Ce[1]===null||S(re.r2l(Ce[1])))},re.getAutorangeDflt=function(Ce,Je){var Re=!re.isValidRange(Ce,"nullOk");return Re&&Je&&Je.reverseDflt?Re="reversed":Ce&&(Ce[0]===null&&Ce[1]===null?Re=!0:Ce[0]===null&&Ce[1]!==null?Re="min":Ce[0]!==null&&Ce[1]===null&&(Re="max")),Re},re.isReversed=function(){var Ce=re.autorange;return Ce==="reversed"||Ce==="min reversed"||Ce==="max reversed"},re.isPtWithinRange=function(Ce,Je){var Re=re.c2l(Ce[Te],null,Je),Q=re.r2l(re.range[0]),ce=re.r2l(re.range[1]);return Q<ce?Q<=Re&&Re<=ce:ce<=Re&&Re<=Q},re._emptyCategories=function(){re._categories=[],re._categoriesMap={}},re.clearCalc=function(){var Ce=re._matchGroup;if(Ce){var Je=null,Re=null;for(var Q in Ce){var ce=de[Z.id2name(Q)];if(ce._categories){Je=ce._categories,Re=ce._categoriesMap;break}}Je&&Re?(re._categories=Je,re._categoriesMap=Re):re._emptyCategories()}else re._emptyCategories();if(re._initialCategories)for(var Me=0;Me<re._initialCategories.length;Me++)Be(re._initialCategories[Me])},re.sortByInitialCategories=function(){var Ce=[];if(re._emptyCategories(),re._initialCategories)for(var Je=0;Je<re._initialCategories.length;Je++)Be(re._initialCategories[Je]);Ce=Ce.concat(re._traceIndices);var Re=re._matchGroup;for(var Q in Re)if(be!==Q){var ce=de[Z.id2name(Q)];ce._categories=re._categories,ce._categoriesMap=re._categoriesMap,Ce=Ce.concat(ce._traceIndices)}return Ce};var ge=de._d3locale;re.type==="date"&&(re._dateFormat=ge?ge.timeFormat:v,re._extraFormat=de._extraFormat),re._separators=de.separators,re._numFormat=ge?ge.numberFormat:E,delete re._minDtick,delete re._forceTick0}}}),Yy=a({"src/plots/cartesian/axis_autotype.js"(pe,me){var M=w(),v=o0(),g=A().BADNUM,E=v.isArrayOrTypedArray,S=v.isDateTime,T=v.cleanNumber,C=Math.round;me.exports=function(V,W,q){var z=V,H=q.noMultiCategory;if(E(z)&&!z.length)return"-";if(!H&&ee(z))return"multicategory";if(H&&Array.isArray(z[0])){for(var Z=[],ne=0;ne<z.length;ne++)if(E(z[ne]))for(var te=0;te<z[ne].length;te++)Z.push(z[ne][te]);z=Z}if(Y(z,W))return"date";var Se=q.autotypenumbers!=="strict";return j(z,Se)?"category":p(z,Se)?"linear":"-"};function P(G,V){return V?M(G):typeof G=="number"}function p(G,V){for(var W=G.length,q=0;q<W;q++)if(P(G[q],V))return!0;return!1}function Y(G,V){for(var W=G.length,q=N(W),z=0,H=0,Z={},ne=0;ne<W;ne+=q){var te=C(ne),Se=G[te],fe=String(Se);Z[fe]||(Z[fe]=1,S(Se,V)&&z++,M(Se)&&H++)}return z>H*2}function N(G){return Math.max(1,(G-1)/1e3)}function j(G,V){for(var W=G.length,q=N(W),z=0,H=0,Z={},ne=0;ne<W;ne+=q){var te=C(ne),Se=G[te],fe=String(Se);if(!Z[fe]){Z[fe]=1;var ve=typeof Se;ve==="boolean"?H++:(V?T(Se)!==g:ve==="number")?z++:ve==="string"&&H++}}return H>z*2}function ee(G){return E(G[0])&&E(G[1])}}}),Cg=a({"src/plots/cartesian/autorange.js"(pe,me){var M=f(),v=w(),g=o0(),E=A().FP_SAFE,S=jp(),T=t1(),C=Ov(),P=C.getFromId,p=C.isLinked;me.exports={applyAutorangeOptions:re,getAutoRange:Y,makePadFn:j,doAutoRange:W,findExtremes:q,concatExtremes:V};function Y(de,be){var Te,ye,De=[],Ue=de._fullLayout,he=j(Ue,be,0),Be=j(Ue,be,1),Ye=V(de,be),et=Ye.min,Qe=Ye.max;if(et.length===0||Qe.length===0)return g.simpleMap(be.range,be.r2l);var ft=et[0].val,mn=Qe[0].val;for(Te=1;Te<et.length&&ft===mn;Te++)ft=Math.min(ft,et[Te].val);for(Te=1;Te<Qe.length&&ft===mn;Te++)mn=Math.max(mn,Qe[Te].val);var ta=be.autorange,Do=ta==="reversed"||ta==="min reversed"||ta==="max reversed";if(!Do&&be.range){var Ae=g.simpleMap(be.range,be.r2l);Do=Ae[1]<Ae[0]}be.autorange==="reversed"&&(be.autorange=!0);var ke=be.rangemode,ge=ke==="tozero",Ce=ke==="nonnegative",Je=be._length,Re=Je/10,Q=0,ce,Me,Le,tt,bt,Ct;for(Te=0;Te<et.length;Te++)for(ce=et[Te],ye=0;ye<Qe.length;ye++)Me=Qe[ye],Ct=Me.val-ce.val-N(be,ce.val,Me.val),Ct>0&&(bt=Je-he(ce)-Be(Me),bt>Re?Ct/bt>Q&&(Le=ce,tt=Me,Q=Ct/bt):Ct/Je>Q&&(Le={val:ce.val,nopad:1},tt={val:Me.val,nopad:1},Q=Ct/Je));function yi(Up,_r){return Math.max(Up,Be(_r))}if(ft===mn){var Fl=ft-1,Yl=ft+1;if(ge)if(ft===0)De=[0,1];else{var qp=(ft>0?Qe:et).reduce(yi,0),Fp=ft/(1-Math.min(.5,qp/Je));De=ft>0?[0,Fp]:[Fp,0]}else Ce?De=[Math.max(0,Fl),Math.max(1,Yl)]:De=[Fl,Yl]}else ge?(Le.val>=0&&(Le={val:0,nopad:1}),tt.val<=0&&(tt={val:0,nopad:1})):Ce&&(Le.val-Q*he(Le)<0&&(Le={val:0,nopad:1}),tt.val<=0&&(tt={val:1,nopad:1})),Q=(tt.val-Le.val-N(be,ce.val,Me.val))/(Je-he(Le)-Be(tt)),De=[Le.val-Q*he(Le),tt.val+Q*Be(tt)];return De=re(De,be),be.limitRange&&be.limitRange(),Do&&De.reverse(),g.simpleMap(De,be.l2r||Number)}function N(de,be,Te){var ye=0;if(de.rangebreaks)for(var De=de.locateBreaks(be,Te),Ue=0;Ue<De.length;Ue++){var he=De[Ue];ye+=he.max-he.min}return ye}function j(de,be,Te){var ye=.05*be._length,De=be._anchorAxis||{};if((be.ticklabelposition||"").indexOf("inside")!==-1||(De.ticklabelposition||"").indexOf("inside")!==-1){var Ue=be.isReversed();if(!Ue){var he=g.simpleMap(be.range,be.r2l);Ue=he[1]<he[0]}Ue&&(Te=!Te)}var Be=0;return p(de,be._id)||(Be=G(de,be,Te)),ye=Math.max(Be,ye),be.constrain==="domain"&&be._inputDomain&&(ye*=(be._inputDomain[1]-be._inputDomain[0])/(be.domain[1]-be.domain[0])),function(et){return et.nopad?0:et.pad+(et.extrapad?ye:Be)}}var ee=3;function G(de,be,Te){var ye=0,De=be._id.charAt(0)==="x";for(var Ue in de._plots){var he=de._plots[Ue];if(!(be._id!==he.xaxis._id&&be._id!==he.yaxis._id)){var Be=(De?he.yaxis:he.xaxis)||{};if((Be.ticklabelposition||"").indexOf("inside")!==-1&&(!Te&&(Be.side==="left"||Be.side==="bottom")||Te&&(Be.side==="top"||Be.side==="right"))){if(Be._vals){var Ye=g.deg2rad(Be._tickAngles[Be._id+"tick"]||0),et=Math.abs(Math.cos(Ye)),Qe=Math.abs(Math.sin(Ye));if(!Be._vals[0].bb){var ft=Be._id+"tick",mn=Be._selections[ft];mn.each(function(Ce){var Je=M.select(this),Re=Je.select(".text-math-group");Re.empty()&&(Ce.bb=T.bBox(Je.node()))})}for(var ta=0;ta<Be._vals.length;ta++){var Do=Be._vals[ta],Ae=Do.bb;if(Ae){var ke=2*ee+Ae.width,ge=2*ee+Ae.height;ye=Math.max(ye,De?Math.max(ke*et,ge*Qe):Math.max(ge*et,ke*Qe))}}}Be.ticks==="inside"&&Be.ticklabelposition==="inside"&&(ye+=Be.ticklen||0)}}}return ye}function V(de,be,Te){var ye=be._id,De=de._fullData,Ue=de._fullLayout,he=[],Be=[],Ye,et,Qe;function ft(ke,ge){for(Ye=0;Ye<ge.length;Ye++){var Ce=ke[ge[Ye]],Je=(Ce._extremes||{})[ye];if(Ce.visible===!0&&Je){for(et=0;et<Je.min.length;et++)Qe=Je.min[et],z(he,Qe.val,Qe.pad,{extrapad:Qe.extrapad});for(et=0;et<Je.max.length;et++)Qe=Je.max[et],H(Be,Qe.val,Qe.pad,{extrapad:Qe.extrapad})}}}if(ft(De,be._traceIndices),ft(Ue.annotations||[],be._annIndices||[]),ft(Ue.shapes||[],be._shapeIndices||[]),be._matchGroup&&!Te){for(var mn in be._matchGroup)if(mn!==be._id){var ta=P(de,mn),Do=V(de,ta,!0),Ae=be._length/ta._length;for(et=0;et<Do.min.length;et++)Qe=Do.min[et],z(he,Qe.val,Qe.pad*Ae,{extrapad:Qe.extrapad});for(et=0;et<Do.max.length;et++)Qe=Do.max[et],H(Be,Qe.val,Qe.pad*Ae,{extrapad:Qe.extrapad})}}return{min:he,max:Be}}function W(de,be,Te){if(be.setScale(),be.autorange){be.range=Te?Te.slice():Y(de,be),be._r=be.range.slice(),be._rl=g.simpleMap(be._r,be.r2l);var ye=be._input,De={};De[be._attr+".range"]=be.range,De[be._attr+".autorange"]=be.autorange,S.call("_storeDirectGUIEdit",de.layout,de._fullLayout._preGUI,De),ye.range=be.range.slice(),ye.autorange=be.autorange}var Ue=be._anchorAxis;if(Ue&&Ue.rangeslider){var he=Ue.rangeslider[be._name];he&&he.rangemode==="auto"&&(he.range=Y(de,be)),Ue._input.rangeslider[be._name]=g.extendFlat({},he)}}function q(de,be,Te){Te||(Te={}),de._m||de.setScale();var ye=[],De=[],Ue=be.length,he=Te.padded||!1,Be=Te.tozero&&(de.type==="linear"||de.type==="-"),Ye=de.type==="log",et=!1,Qe=Te.vpadLinearized||!1,ft,mn,ta,Do,Ae,ke,ge,Ce,Je;function Re(yi){if(Array.isArray(yi))return et=!0,function(Yl){return Math.max(Number(yi[Yl]||0),0)};var Fl=Math.max(Number(yi||0),0);return function(){return Fl}}var Q=Re((de._m>0?Te.ppadplus:Te.ppadminus)||Te.ppad||0),ce=Re((de._m>0?Te.ppadminus:Te.ppadplus)||Te.ppad||0),Me=Re(Te.vpadplus||Te.vpad),Le=Re(Te.vpadminus||Te.vpad);if(!et){if(Ce=1/0,Je=-1/0,Ye)for(ft=0;ft<Ue;ft++)mn=be[ft],mn<Ce&&mn>0&&(Ce=mn),mn>Je&&mn<E&&(Je=mn);else for(ft=0;ft<Ue;ft++)mn=be[ft],mn<Ce&&mn>-E&&(Ce=mn),mn>Je&&mn<E&&(Je=mn);be=[Ce,Je],Ue=2}var tt={tozero:Be,extrapad:he};function bt(yi){ta=be[yi],v(ta)&&(ke=Q(yi),ge=ce(yi),Qe?(Do=de.c2l(ta)-Le(yi),Ae=de.c2l(ta)+Me(yi)):(Ce=ta-Le(yi),Je=ta+Me(yi),Ye&&Ce<Je/10&&(Ce=Je/10),Do=de.c2l(Ce),Ae=de.c2l(Je)),Be&&(Do=Math.min(0,Do),Ae=Math.max(0,Ae)),ne(Do)&&z(ye,Do,ge,tt),ne(Ae)&&H(De,Ae,ke,tt))}var Ct=Math.min(6,Ue);for(ft=0;ft<Ct;ft++)bt(ft);for(ft=Ue-1;ft>=Ct;ft--)bt(ft);return{min:ye,max:De,opts:Te}}function z(de,be,Te,ye){Z(de,be,Te,ye,te)}function H(de,be,Te,ye){Z(de,be,Te,ye,Se)}function Z(de,be,Te,ye,De){for(var Ue=ye.tozero,he=ye.extrapad,Be=!0,Ye=0;Ye<de.length&&Be;Ye++){var et=de[Ye];if(De(et.val,be)&&et.pad>=Te&&(et.extrapad||!he)){Be=!1;break}else De(be,et.val)&&et.pad<=Te&&(he||!et.extrapad)&&(de.splice(Ye,1),Ye--)}if(Be){var Qe=Ue&&be===0;de.push({val:be,pad:Qe?0:Te,extrapad:Qe?!1:he})}}function ne(de){return v(de)&&Math.abs(de)<E}function te(de,be){return de<=be}function Se(de,be){return de>=be}function fe(de,be){var Te=be.autorangeoptions;return Te&&Te.minallowed!==void 0&&xe(be,Te.minallowed,Te.maxallowed)?Te.minallowed:Te&&Te.clipmin!==void 0&&xe(be,Te.clipmin,Te.clipmax)?Math.max(de,be.d2l(Te.clipmin)):de}function ve(de,be){var Te=be.autorangeoptions;return Te&&Te.maxallowed!==void 0&&xe(be,Te.minallowed,Te.maxallowed)?Te.maxallowed:Te&&Te.clipmax!==void 0&&xe(be,Te.clipmin,Te.clipmax)?Math.min(de,be.d2l(Te.clipmax)):de}function xe(de,be,Te){return be!==void 0&&Te!==void 0?(be=de.d2l(be),Te=de.d2l(Te),be<Te):!0}function re(de,be){if(!be||!be.autorangeoptions)return de;var Te=de[0],ye=de[1],De=be.autorangeoptions.include;if(De!==void 0){var Ue=be.d2l(Te),he=be.d2l(ye);g.isArrayOrTypedArray(De)||(De=[De]);for(var Be=0;Be<De.length;Be++){var Ye=be.d2l(De[Be]);Ue>=Ye&&(Ue=Ye,Te=Ye),he<=Ye&&(he=Ye,ye=Ye)}}return Te=fe(Te,be),ye=ve(ye,be),[Te,ye]}}}),g1=a({"src/plots/cartesian/axes.js"(pe,me){var M=f(),v=w(),g=p1(),E=jp(),S=o0(),T=S.strTranslate,C=v1(),P=f_(),p=Oe(),Y=t1(),N=O1(),j=Gy(),ee=A(),G=ee.ONEMAXYEAR,V=ee.ONEAVGYEAR,W=ee.ONEMINYEAR,q=ee.ONEMAXQUARTER,z=ee.ONEAVGQUARTER,H=ee.ONEMINQUARTER,Z=ee.ONEMAXMONTH,ne=ee.ONEAVGMONTH,te=ee.ONEMINMONTH,Se=ee.ONEWEEK,fe=ee.ONEDAY,ve=fe/2,xe=ee.ONEHOUR,re=ee.ONEMIN,de=ee.ONESEC,be=ee.ONEMILLI,Te=ee.ONEMICROSEC,ye=ee.MINUS_SIGN,De=ee.BADNUM,Ue={K:"zeroline"},he={K:"gridline",L:"path"},Be={K:"minor-gridline",L:"path"},Ye={K:"tick",L:"path"},et={K:"tick",L:"text"},Qe={width:["x","r","l","xl","xr"],height:["y","t","b","yt","yb"],right:["r","xr"],left:["l","xl"],top:["t","yt"],bottom:["b","yb"]},ft=f1(),mn=ft.MID_SHIFT,ta=ft.CAP_SHIFT,Do=ft.LINE_SPACING,Ae=ft.OPPOSITE_SIDE,ke=3,ge=me.exports={};ge.setConvert=Ay();var Ce=Yy(),Je=Ov(),Re=Je.idSort,Q=Je.isLinked;ge.id2name=Je.id2name,ge.name2id=Je.name2id,ge.cleanId=Je.cleanId,ge.list=Je.list,ge.listIds=Je.listIds,ge.getFromId=Je.getFromId,ge.getFromTrace=Je.getFromTrace;var ce=Cg();ge.getAutoRange=ce.getAutoRange,ge.findExtremes=ce.findExtremes;var Me=1e-4;function Le(dt){var Fe=(dt[1]-dt[0])*Me;return[dt[0]-Fe,dt[1]+Fe]}ge.coerceRef=function(dt,Fe,Gp,kp,yp,bp){var Pp=kp.charAt(kp.length-1),s0=Gp._fullLayout._subplots[Pp+"axis"],Rp=kp+"ref",Vp={};return yp||(yp=s0[0]||(typeof bp=="string"?bp:bp[0])),bp||(bp=yp),s0=s0.concat(s0.map(function(r0){return r0+" domain"})),Vp[Rp]={valType:"enumerated",values:s0.concat(bp?typeof bp=="string"?[bp]:bp:[]),dflt:yp},S.coerce(dt,Fe,Vp,Rp)},ge.getRefType=function(dt){return dt===void 0?dt:dt==="paper"?"paper":dt==="pixel"?"pixel":/( domain)$/.test(dt)?"domain":"range"},ge.coercePosition=function(dt,Fe,Gp,kp,yp,bp){var Pp,s0,Rp=ge.getRefType(kp);if(Rp!=="range")Pp=S.ensureNumber,s0=Gp(yp,bp);else{var Vp=ge.getFromId(Fe,kp);bp=Vp.fraction2r(bp),s0=Gp(yp,bp),Pp=Vp.cleanPos}dt[yp]=Pp(s0)},ge.cleanPosition=function(dt,Fe,Gp){var kp=Gp==="paper"||Gp==="pixel"?S.ensureNumber:ge.getFromId(Fe,Gp).cleanPos;return kp(dt)},ge.redrawComponents=function(dt,Fe){Fe=Fe||ge.listIds(dt);var Gp=dt._fullLayout;function kp(yp,bp,Pp,s0){for(var Rp=E.getComponentMethod(yp,bp),Vp={},r0=0;r0<Fe.length;r0++)for(var $p=Gp[ge.id2name(Fe[r0])],P0=$p[Pp],j0=0;j0<P0.length;j0++){var tm=P0[j0];if(!Vp[tm]&&(Rp(dt,tm),Vp[tm]=1,s0))return}}kp("annotations","drawOne","_annIndices"),kp("shapes","drawOne","_shapeIndices"),kp("images","draw","_imgIndices",!0),kp("selections","drawOne","_selectionIndices")};var tt=ge.getDataConversions=function(dt,Fe,Gp,kp){var yp,bp=Gp==="x"||Gp==="y"||Gp==="z"?Gp:kp;if(S.isArrayOrTypedArray(bp)){if(yp={type:Ce(kp,void 0,{autotypenumbers:dt._fullLayout.autotypenumbers}),_categories:[]},ge.setConvert(yp),yp.type==="category")for(var Pp=0;Pp<kp.length;Pp++)yp.d2c(kp[Pp])}else yp=ge.getFromTrace(dt,Fe,bp);return yp?{d2c:yp.d2c,c2d:yp.c2d}:bp==="ids"?{d2c:Ct,c2d:Ct}:{d2c:bt,c2d:bt}};function bt(dt){return+dt}function Ct(dt){return String(dt)}ge.getDataToCoordFunc=function(dt,Fe,Gp,kp){return tt(dt,Fe,Gp,kp).d2c},ge.counterLetter=function(dt){var Fe=dt.charAt(0);if(Fe==="x")return"y";if(Fe==="y")return"x"},ge.minDtick=function(dt,Fe,Gp,kp){["log","category","multicategory"].indexOf(dt.type)!==-1||!kp?dt._minDtick=0:dt._minDtick===void 0?(dt._minDtick=Fe,dt._forceTick0=Gp):dt._minDtick&&((dt._minDtick/Fe+1e-6)%1<2e-6&&((Gp-dt._forceTick0)/Fe%1+1.000001)%1<2e-6?(dt._minDtick=Fe,dt._forceTick0=Gp):((Fe/dt._minDtick+1e-6)%1>2e-6||((Gp-dt._forceTick0)/dt._minDtick%1+1.000001)%1>2e-6)&&(dt._minDtick=0))},ge.saveRangeInitial=function(dt,Fe){for(var Gp=ge.list(dt,"",!0),kp=!1,yp=0;yp<Gp.length;yp++){var bp=Gp[yp],Pp=bp._rangeInitial0===void 0&&bp._rangeInitial1===void 0,s0=Pp||bp.range[0]!==bp._rangeInitial0||bp.range[1]!==bp._rangeInitial1,Rp=bp.autorange;(Pp&&Rp!==!0||Fe&&s0)&&(bp._rangeInitial0=Rp==="min"||Rp==="max reversed"?void 0:bp.range[0],bp._rangeInitial1=Rp==="max"||Rp==="min reversed"?void 0:bp.range[1],bp._autorangeInitial=Rp,kp=!0)}return kp},ge.saveShowSpikeInitial=function(dt,Fe){for(var Gp=ge.list(dt,"",!0),kp=!1,yp="on",bp=0;bp<Gp.length;bp++){var Pp=Gp[bp],s0=Pp._showSpikeInitial===void 0,Rp=s0||Pp.showspikes!==Pp._showspikes;(s0||Fe&&Rp)&&(Pp._showSpikeInitial=Pp.showspikes,kp=!0),yp==="on"&&!Pp.showspikes&&(yp="off")}return dt._fullLayout._cartesianSpikesEnabled=yp,kp},ge.autoBin=function(dt,Fe,Gp,kp,yp,bp){var Pp=S.aggNums(Math.min,null,dt),s0=S.aggNums(Math.max,null,dt);if(Fe.type==="category"||Fe.type==="multicategory")return{start:Pp-.5,end:s0+.5,size:Math.max(1,Math.round(bp)||1),_dataSpan:s0-Pp};yp||(yp=Fe.calendar);var Rp;if(Fe.type==="log"?Rp={type:"linear",range:[Pp,s0]}:Rp={type:Fe.type,range:S.simpleMap([Pp,s0],Fe.c2r,0,yp),calendar:yp},ge.setConvert(Rp),bp=bp&&j.dtick(bp,Rp.type),bp)Rp.dtick=bp,Rp.tick0=j.tick0(void 0,Rp.type,yp);else{var Vp;if(Gp)Vp=(s0-Pp)/Gp;else{var r0=S.distinctVals(dt),$p=Math.pow(10,Math.floor(Math.log(r0.minDiff)/Math.LN10)),P0=$p*S.roundUp(r0.minDiff/$p,[.9,1.9,4.9,9.9],!0);Vp=Math.max(P0,2*S.stdev(dt)/Math.pow(dt.length,kp?.25:.4)),v(Vp)||(Vp=1)}ge.autoTicks(Rp,Vp)}var j0=Rp.dtick,tm=ge.tickIncrement(ge.tickFirst(Rp),j0,"reverse",yp),wm,bm;if(typeof j0=="number")tm=yi(tm,dt,Rp,Pp,s0),bm=1+Math.floor((s0-tm)/j0),wm=tm+bm*j0;else for(Rp.dtick.charAt(0)==="M"&&(tm=Fl(tm,dt,j0,Pp,yp)),wm=tm,bm=0;wm<=s0;)wm=ge.tickIncrement(wm,j0,!1,yp),bm++;return{start:Fe.c2r(tm,0,yp),end:Fe.c2r(wm,0,yp),size:j0,_dataSpan:s0-Pp}};function yi(dt,Fe,Gp,kp,yp){var bp=0,Pp=0,s0=0,Rp=0;function Vp(j0){return(1+(j0-dt)*100/Gp.dtick)%100<2}for(var r0=0;r0<Fe.length;r0++)Fe[r0]%1===0?s0++:v(Fe[r0])||Rp++,Vp(Fe[r0])&&bp++,Vp(Fe[r0]+Gp.dtick/2)&&Pp++;var $p=Fe.length-Rp;if(s0===$p&&Gp.type!=="date")Gp.dtick<1?dt=kp-.5*Gp.dtick:(dt-=.5,dt+Gp.dtick<kp&&(dt+=Gp.dtick));else if(Pp<$p*.1&&(bp>$p*.3||Vp(kp)||Vp(yp))){var P0=Gp.dtick/2;dt+=dt+P0<kp?P0:-P0}return dt}function Fl(dt,Fe,Gp,kp,yp){var bp=S.findExactDates(Fe,yp),Pp=.8;if(bp.exactDays>Pp){var s0=Number(Gp.substr(1));bp.exactYears>Pp&&s0%12===0?dt=ge.tickIncrement(dt,"M6","reverse")+fe*1.5:bp.exactMonths>Pp?dt=ge.tickIncrement(dt,"M1","reverse")+fe*15.5:dt-=ve;var Rp=ge.tickIncrement(dt,Gp);if(Rp<=kp)return Rp}return dt}ge.prepMinorTicks=function(dt,Fe,Gp){if(!Fe.minor.dtick){delete dt.dtick;var kp=Fe.dtick&&v(Fe._tmin),yp;if(kp){var bp=ge.tickIncrement(Fe._tmin,Fe.dtick,!0);yp=[Fe._tmin,bp*.99+Fe._tmin*.01]}else{var Pp=S.simpleMap(Fe.range,Fe.r2l);yp=[Pp[0],.8*Pp[0]+.2*Pp[1]]}if(dt.range=S.simpleMap(yp,Fe.l2r),dt._isMinor=!0,ge.prepTicks(dt,Gp),kp){var s0=v(Fe.dtick),Rp=v(dt.dtick),Vp=s0?Fe.dtick:+Fe.dtick.substring(1),r0=Rp?dt.dtick:+dt.dtick.substring(1);s0&&Rp?Yl(Vp,r0)?Vp===2*Se&&r0===2*fe&&(dt.dtick=Se):Vp===2*Se&&r0===3*fe?dt.dtick=Se:Vp===Se&&!(Fe._input.minor||{}).nticks?dt.dtick=fe:qp(Vp/r0,2.5)?dt.dtick=Vp/2:dt.dtick=Vp:String(Fe.dtick).charAt(0)==="M"?Rp?dt.dtick="M1":Yl(Vp,r0)?Vp>=12&&r0===2&&(dt.dtick="M3"):dt.dtick=Fe.dtick:String(dt.dtick).charAt(0)==="L"?String(Fe.dtick).charAt(0)==="L"?Yl(Vp,r0)||(dt.dtick=qp(Vp/r0,2.5)?Fe.dtick/2:Fe.dtick):dt.dtick="D1":dt.dtick==="D2"&&+Fe.dtick>1&&(dt.dtick=1)}dt.range=Fe.range}Fe.minor._tick0Init===void 0&&(dt.tick0=Fe.tick0)};function Yl(dt,Fe){return Math.abs((dt/Fe+.5)%1-.5)<.001}function qp(dt,Fe){return Math.abs(dt/Fe-1)<.001}ge.prepTicks=function(dt,Fe){var Gp=S.simpleMap(dt.range,dt.r2l,void 0,void 0,Fe);if(dt.tickmode==="auto"||!dt.dtick){var kp=dt.nticks,yp;kp||(dt.type==="category"||dt.type==="multicategory"?(yp=dt.tickfont?S.bigFont(dt.tickfont.size||12):15,kp=dt._length/yp):(yp=dt._id.charAt(0)==="y"?40:80,kp=S.constrain(dt._length/yp,4,9)+1),dt._name==="radialaxis"&&(kp*=2)),dt.minor&&dt.minor.tickmode!=="array"||dt.tickmode==="array"&&(kp*=100),dt._roughDTick=Math.abs(Gp[1]-Gp[0])/kp,ge.autoTicks(dt,dt._roughDTick),dt._minDtick>0&&dt.dtick<dt._minDtick*2&&(dt.dtick=dt._minDtick,dt.tick0=dt.l2r(dt._forceTick0))}dt.ticklabelmode==="period"&&Up(dt),dt.tick0||(dt.tick0=dt.type==="date"?"2000-01-01":0),dt.type==="date"&&dt.dtick<.1&&(dt.dtick=.1),Kp(dt)};function Fp(dt){return+dt.substring(1)}function Up(dt){var Fe;function Gp(){return!(v(dt.dtick)||dt.dtick.charAt(0)!=="M")}var kp=Gp(),yp=ge.getTickFormat(dt);if(yp){var bp=dt._dtickInit!==dt.dtick;/%[fLQsSMX]/.test(yp)||(/%[HI]/.test(yp)?(Fe=xe,bp&&!kp&&dt.dtick<xe&&(dt.dtick=xe)):/%p/.test(yp)?(Fe=ve,bp&&!kp&&dt.dtick<ve&&(dt.dtick=ve)):/%[Aadejuwx]/.test(yp)?(Fe=fe,bp&&!kp&&dt.dtick<fe&&(dt.dtick=fe)):/%[UVW]/.test(yp)?(Fe=Se,bp&&!kp&&dt.dtick<Se&&(dt.dtick=Se)):/%[Bbm]/.test(yp)?(Fe=ne,bp&&(kp?Fp(dt.dtick)<1:dt.dtick<te)&&(dt.dtick="M1")):/%[q]/.test(yp)?(Fe=z,bp&&(kp?Fp(dt.dtick)<3:dt.dtick<H)&&(dt.dtick="M3")):/%[Yy]/.test(yp)&&(Fe=V,bp&&(kp?Fp(dt.dtick)<12:dt.dtick<W)&&(dt.dtick="M12")))}kp=Gp(),kp&&dt.tick0===dt._dowTick0&&(dt.tick0=dt._rawTick0),dt._definedDelta=Fe}function _r(dt,Fe,Gp){for(var kp=0;kp<dt.length;kp++){var yp=dt[kp].value,bp=kp,Pp=kp+1;kp<dt.length-1?(bp=kp,Pp=kp+1):kp>0?(bp=kp-1,Pp=kp):(bp=kp,Pp=kp);var s0=dt[bp].value,Rp=dt[Pp].value,Vp=Math.abs(Rp-s0),r0=Gp||Vp,$p=0;r0>=W?Vp>=W&&Vp<=G?$p=Vp:$p=V:Gp===z&&r0>=H?Vp>=H&&Vp<=q?$p=Vp:$p=z:r0>=te?Vp>=te&&Vp<=Z?$p=Vp:$p=ne:Gp===Se&&r0>=Se?$p=Se:r0>=fe?$p=fe:Gp===ve&&r0>=ve?$p=ve:Gp===xe&&r0>=xe&&($p=xe);var P0;$p>=Vp&&($p=Vp,P0=!0);var j0=yp+$p;if(Fe.rangebreaks&&$p>0){for(var tm=84,wm=0,bm=0;bm<tm;bm++){var Tm=(bm+.5)/tm;Fe.maskBreaks(yp*(1-Tm)+Tm*j0)!==De&&wm++}$p*=wm/tm,$p||(dt[kp].drop=!0),P0&&Vp>Se&&($p=Vp)}($p>0||kp===0)&&(dt[kp].periodX=yp+$p/2)}}ge.calcTicks=function(Fe,Gp){for(var kp=Fe.type,yp=Fe.calendar,bp=Fe.ticklabelstep,Pp=Fe.ticklabelmode==="period",s0=Fe.range[0]>Fe.range[1],Rp=!Fe.ticklabelindex||S.isArrayOrTypedArray(Fe.ticklabelindex)?Fe.ticklabelindex:[Fe.ticklabelindex],Vp=S.simpleMap(Fe.range,Fe.r2l,void 0,void 0,Gp),r0=Vp[1]<Vp[0],$p=Math.min(Vp[0],Vp[1]),P0=Math.max(Vp[0],Vp[1]),j0=Math.max(1e3,Fe._length||0),tm=[],wm=[],bm=[],Tm=[],Rm=[],Sm=Fe.minor&&(Fe.minor.ticks||Fe.minor.showgrid),Gm=1;Gm>=(Sm?0:1);Gm--){var Xm=!Gm;Gm?(Fe._dtickInit=Fe.dtick,Fe._tick0Init=Fe.tick0):(Fe.minor._dtickInit=Fe.minor.dtick,Fe.minor._tick0Init=Fe.minor.tick0);var pv=Gm?Fe:S.extendFlat({},Fe,Fe.minor);if(Xm?ge.prepMinorTicks(pv,Fe,Gp):ge.prepTicks(pv,Gp),pv.tickmode==="array"){Gm?(bm=[],tm=Lo(Fe,!Xm)):(Tm=[],wm=Lo(Fe,!Xm));continue}if(pv.tickmode==="sync"){bm=[],tm=dr(Fe);continue}var Ev=Le(Vp),kv=Ev[0],tv=Ev[1],Mv=v(pv.dtick),i1=kp==="log"&&!(Mv||pv.dtick.charAt(0)==="L"),V1=ge.tickFirst(pv,Gp);if(Gm){if(Fe._tmin=V1,V1<kv!==r0)break;(kp==="category"||kp==="multicategory")&&(tv=r0?Math.max(-.5,tv):Math.min(Fe._categories.length-.5,tv))}var $m=null,vv=V1,Vv;if(Gm){var b1;Mv?b1=Fe.dtick:kp==="date"?typeof Fe.dtick=="string"&&Fe.dtick.charAt(0)==="M"&&(b1=ne*Fe.dtick.substring(1)):b1=Fe._roughDTick,Vv=Math.round((Fe.r2l(vv)-Fe.r2l(Fe.tick0))/b1)-1}var c1=pv.dtick;for(pv.rangebreaks&&pv._tick0Init!==pv.tick0&&(vv=zm(vv,Fe),r0||(vv=ge.tickIncrement(vv,c1,!r0,yp))),Gm&&Pp&&(vv=ge.tickIncrement(vv,c1,!r0,yp),Vv--);r0?vv>=tv:vv<=tv;vv=ge.tickIncrement(vv,c1,r0,yp)){if(Gm&&Vv++,pv.rangebreaks&&!r0){if(vv<kv)continue;if(pv.maskBreaks(vv)===De&&zm(vv,pv)>=P0)break}if(bm.length>j0||vv===$m)break;$m=vv;var Iv={value:vv};Gm?(i1&&vv!==(vv|0)&&(Iv.simpleLabel=!0),bp>1&&Vv%bp&&(Iv.skipLabel=!0),bm.push(Iv)):(Iv.minor=!0,Tm.push(Iv))}}if(!Tm||Tm.length<2)Rp=!1;else{var lv=(Tm[1].value-Tm[0].value)*(s0?-1:1);uv(lv,Fe.tickformat)||(Rp=!1)}if(!Rp)Rm=bm;else{var fv=bm.concat(Tm);Pp&&bm.length&&(fv=fv.slice(1)),fv=fv.sort(function(mv,Tv){return mv.value-Tv.value}).filter(function(mv,Tv,yv){return Tv===0||mv.value!==yv[Tv-1].value});var Hv=fv.map(function(mv,Tv){return mv.minor===void 0&&!mv.skipLabel?Tv:null}).filter(function(mv){return mv!==null});Hv.forEach(function(mv){Rp.map(function(Tv){var yv=mv+Tv;yv>=0&&yv<fv.length&&S.pushUnique(Rm,fv[yv])})})}if(Sm){var Uv=Fe.minor.ticks==="inside"&&Fe.ticks==="outside"||Fe.minor.ticks==="outside"&&Fe.ticks==="inside";if(!Uv){for(var Xv=bm.map(function(mv){return mv.value}),r1=[],s1=0;s1<Tm.length;s1++){var S1=Tm[s1],_1=S1.value;if(Xv.indexOf(_1)===-1){for(var N1=!1,w1=0;!N1&&w1<bm.length;w1++)1e7+bm[w1].value===1e7+_1&&(N1=!0);N1||r1.push(S1)}}Tm=r1}}Pp&&_r(Rm,Fe,Fe._definedDelta);var $v;if(Fe.rangebreaks){var B1=Fe._id.charAt(0)==="y",H1=1;Fe.tickmode==="auto"&&(H1=Fe.tickfont?Fe.tickfont.size:12);var _g=NaN;for($v=bm.length-1;$v>-1;$v--){if(bm[$v].drop){bm.splice($v,1);continue}bm[$v].value=zm(bm[$v].value,Fe);var K1=Fe.c2p(bm[$v].value);(B1?_g>K1-H1:_g<K1+H1)?bm.splice(r0?$v+1:$v,1):_g=K1}}rv(Fe)&&Math.abs(Vp[1]-Vp[0])===360&&bm.pop(),Fe._tmax=(bm[bm.length-1]||{}).value,Fe._prevDateHead="",Fe._inCalcTicks=!0;var pg,Y1=function(mv){mv.text="",Fe._prevDateHead=pg};bm=bm.concat(Tm);function L1(mv,Tv){var yv=ge.tickText(mv,Tv.value,!1,Tv.simpleLabel),sv=Tv.periodX;return sv!==void 0&&(yv.periodX=sv,(sv>P0||sv<$p)&&(sv>P0&&(yv.periodX=P0),sv<$p&&(yv.periodX=$p),Y1(yv))),yv}var rg;for($v=0;$v<bm.length;$v++){var l_=bm[$v].minor,q1=bm[$v].value;l_?(Rp&&Rm.indexOf(bm[$v])!==-1?rg=L1(Fe,bm[$v]):rg={x:q1},rg.minor=!0,wm.push(rg)):(pg=Fe._prevDateHead,rg=L1(Fe,bm[$v]),(bm[$v].skipLabel||Rp&&Rm.indexOf(bm[$v])===-1)&&Y1(rg),tm.push(rg))}return tm=tm.concat(wm),Fe._inCalcTicks=!1,Pp&&tm.length&&(tm[0].noTick=!0),tm};function gs(dt,Fe){return dt.rangebreaks&&(Fe=Fe.filter(function(Gp){return dt.maskBreaks(Gp.x)!==De})),Fe}function dr(dt){var Fe=dt._mainAxis,Gp=[];if(Fe._vals){for(var kp=0;kp<Fe._vals.length;kp++)if(!Fe._vals[kp].noTick){var yp=Fe.l2p(Fe._vals[kp].x),bp=dt.p2l(yp),Pp=ge.tickText(dt,bp);Fe._vals[kp].minor&&(Pp.minor=!0,Pp.text=""),Gp.push(Pp)}}return Gp=gs(dt,Gp),Gp}function Lo(dt,Fe){var Gp=S.simpleMap(dt.range,dt.r2l),kp=Le(Gp),yp=Math.min(kp[0],kp[1]),bp=Math.max(kp[0],kp[1]),Pp=dt.type==="category"?dt.d2l_noadd:dt.d2l;dt.type==="log"&&String(dt.dtick).charAt(0)!=="L"&&(dt.dtick="L"+Math.pow(10,Math.floor(Math.min(dt.range[0],dt.range[1]))-1));for(var s0=[],Rp=0;Rp<=1;Rp++)if(!(Fe!==void 0&&(Fe&&Rp||Fe===!1&&!Rp))&&!(Rp&&!dt.minor)){var Vp=Rp?dt.minor.tickvals:dt.tickvals,r0=Rp?[]:dt.ticktext;if(Vp){S.isArrayOrTypedArray(r0)||(r0=[]);for(var $p=0;$p<Vp.length;$p++){var P0=Pp(Vp[$p]);if(P0>yp&&P0<bp){var j0=ge.tickText(dt,P0,!1,String(r0[$p]));Rp&&(j0.minor=!0,j0.text=""),s0.push(j0)}}}}return s0=gs(dt,s0),s0}var Cp=[2,5,10],Hp=[1,2,3,6,12],e0=[1,2,5,10,15,30],t0=[1,2,3,7,14],n0=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],y0=[-.301,0,.301,.699,1],h0=[15,30,45,90,180];function I0(dt,Fe,Gp){return Fe*S.roundUp(dt/Fe,Gp)}ge.autoTicks=function(dt,Fe,Gp){var kp;function yp($p){return Math.pow($p,Math.floor(Math.log(Fe)/Math.LN10))}if(dt.type==="date"){dt.tick0=S.dateTick0(dt.calendar,0);var bp=2*Fe;if(bp>V)Fe/=V,kp=yp(10),dt.dtick="M"+12*I0(Fe,kp,Cp);else if(bp>ne)Fe/=ne,dt.dtick="M"+I0(Fe,1,Hp);else if(bp>fe){if(dt.dtick=I0(Fe,fe,dt._hasDayOfWeekBreaks?[1,2,7,14]:t0),!Gp){var Pp=ge.getTickFormat(dt),s0=dt.ticklabelmode==="period";s0&&(dt._rawTick0=dt.tick0),/%[uVW]/.test(Pp)?dt.tick0=S.dateTick0(dt.calendar,2):dt.tick0=S.dateTick0(dt.calendar,1),s0&&(dt._dowTick0=dt.tick0)}}else bp>xe?dt.dtick=I0(Fe,xe,Hp):bp>re?dt.dtick=I0(Fe,re,e0):bp>de?dt.dtick=I0(Fe,de,e0):(kp=yp(10),dt.dtick=I0(Fe,kp,Cp))}else if(dt.type==="log"){dt.tick0=0;var Rp=S.simpleMap(dt.range,dt.r2l);if(dt._isMinor&&(Fe*=1.5),Fe>.7)dt.dtick=Math.ceil(Fe);else if(Math.abs(Rp[1]-Rp[0])<1){var Vp=1.5*Math.abs((Rp[1]-Rp[0])/Fe);Fe=Math.abs(Math.pow(10,Rp[1])-Math.pow(10,Rp[0]))/Vp,kp=yp(10),dt.dtick="L"+I0(Fe,kp,Cp)}else dt.dtick=Fe>.3?"D2":"D1"}else dt.type==="category"||dt.type==="multicategory"?(dt.tick0=0,dt.dtick=Math.ceil(Math.max(Fe,1))):rv(dt)?(dt.tick0=0,kp=1,dt.dtick=I0(Fe,kp,h0)):(dt.tick0=0,kp=yp(10),dt.dtick=I0(Fe,kp,Cp));if(dt.dtick===0&&(dt.dtick=1),!v(dt.dtick)&&typeof dt.dtick!="string"){var r0=dt.dtick;throw dt.dtick=1,"ax.dtick error: "+String(r0)}};function Kp(dt){var Fe=dt.dtick;if(dt._tickexponent=0,!v(Fe)&&typeof Fe!="string"&&(Fe=1),(dt.type==="category"||dt.type==="multicategory")&&(dt._tickround=null),dt.type==="date"){var Gp=dt.r2l(dt.tick0),kp=dt.l2r(Gp).replace(/(^-|i)/g,""),yp=kp.length;if(String(Fe).charAt(0)==="M")yp>10||kp.substr(5)!=="01-01"?dt._tickround="d":dt._tickround=+Fe.substr(1)%12===0?"y":"m";else if(Fe>=fe&&yp<=10||Fe>=fe*15)dt._tickround="d";else if(Fe>=re&&yp<=16||Fe>=xe)dt._tickround="M";else if(Fe>=de&&yp<=19||Fe>=re)dt._tickround="S";else{var bp=dt.l2r(Gp+Fe).replace(/^-/,"").length;dt._tickround=Math.max(yp,bp)-20,dt._tickround<0&&(dt._tickround=4)}}else if(v(Fe)||Fe.charAt(0)==="L"){var Pp=dt.range.map(dt.r2d||Number);v(Fe)||(Fe=Number(Fe.substr(1))),dt._tickround=2-Math.floor(Math.log(Fe)/Math.LN10+.01);var s0=Math.max(Math.abs(Pp[0]),Math.abs(Pp[1])),Rp=Math.floor(Math.log(s0)/Math.LN10+.01),Vp=dt.minexponent===void 0?3:dt.minexponent;Math.abs(Rp)>Vp&&(ci(dt.exponentformat)&&!_n(Rp)?dt._tickexponent=3*Math.round((Rp-1)/3):dt._tickexponent=Rp)}else dt._tickround=null}ge.tickIncrement=function(dt,Fe,Gp,kp){var yp=Gp?-1:1;if(v(Fe))return S.increment(dt,yp*Fe);var bp=Fe.charAt(0),Pp=yp*Number(Fe.substr(1));if(bp==="M")return S.incrementMonth(dt,Pp,kp);if(bp==="L")return Math.log(Math.pow(10,dt)+Pp)/Math.LN10;if(bp==="D"){var s0=Fe==="D2"?y0:n0,Rp=dt+yp*.01,Vp=S.roundUp(S.mod(Rp,1),s0,Gp);return Math.floor(Rp)+Math.log(M.round(Math.pow(10,Vp),1))/Math.LN10}throw"unrecognized dtick "+String(Fe)},ge.tickFirst=function(dt,Fe){var Gp=dt.r2l||Number,kp=S.simpleMap(dt.range,Gp,void 0,void 0,Fe),yp=kp[1]<kp[0],bp=yp?Math.floor:Math.ceil,Pp=Le(kp)[0],s0=dt.dtick,Rp=Gp(dt.tick0);if(v(s0)){var Vp=bp((Pp-Rp)/s0)*s0+Rp;return(dt.type==="category"||dt.type==="multicategory")&&(Vp=S.constrain(Vp,0,dt._categories.length-1)),Vp}var r0=s0.charAt(0),$p=Number(s0.substr(1));if(r0==="M"){for(var P0=0,j0=Rp,tm,wm,bm;P0<10;){if(tm=ge.tickIncrement(j0,s0,yp,dt.calendar),(tm-Pp)*(j0-Pp)<=0)return yp?Math.min(j0,tm):Math.max(j0,tm);wm=(Pp-(j0+tm)/2)/(tm-j0),bm=r0+(Math.abs(Math.round(wm))||1)*$p,j0=ge.tickIncrement(j0,bm,wm<0?!yp:yp,dt.calendar),P0++}return S.error("tickFirst did not converge",dt),j0}else{if(r0==="L")return Math.log(bp((Math.pow(10,Pp)-Rp)/$p)*$p+Rp)/Math.LN10;if(r0==="D"){var Tm=s0==="D2"?y0:n0,Rm=S.roundUp(S.mod(Pp,1),Tm,yp);return Math.floor(Pp)+Math.log(M.round(Math.pow(10,Rm),1))/Math.LN10}else throw"unrecognized dtick "+String(s0)}},ge.tickText=function(dt,Fe,Gp,kp){var yp=B0(dt,Fe),bp=dt.tickmode==="array",Pp=Gp||bp,s0=dt.type,Rp=s0==="category"?dt.d2l_noadd:dt.d2l,Vp,r0=function(bm){var Tm=dt.l2p(bm);return Tm>=0&&Tm<=dt._length?bm:null};if(bp&&S.isArrayOrTypedArray(dt.ticktext)){var $p=S.simpleMap(dt.range,dt.r2l),P0=(Math.abs($p[1]-$p[0])-(dt._lBreaks||0))/1e4;for(Vp=0;Vp<dt.ticktext.length&&!(Math.abs(Fe-Rp(dt.tickvals[Vp]))<P0);Vp++);if(Vp<dt.ticktext.length)return yp.text=String(dt.ticktext[Vp]),yp.xbnd=[r0(yp.x-.5),r0(yp.x+dt.dtick-.5)],yp}function j0(bm){if(bm===void 0)return!0;if(Gp)return bm==="none";var Tm={first:dt._tmin,last:dt._tmax}[bm];return bm!=="all"&&Fe!==Tm}var tm=Gp?"never":dt.exponentformat!=="none"&&j0(dt.showexponent)?"hide":"";if(s0==="date"?em(dt,yp,Gp,Pp):s0==="log"?k0(dt,yp,Gp,Pp,tm):s0==="category"?J0(dt,yp):s0==="multicategory"?vs(dt,yp,Gp):rv(dt)?zl(dt,yp,Gp,Pp,tm):jl(dt,yp,Gp,Pp,tm),kp||(dt.tickprefix&&!j0(dt.showtickprefix)&&(yp.text=dt.tickprefix+yp.text),dt.ticksuffix&&!j0(dt.showticksuffix)&&(yp.text+=dt.ticksuffix)),dt.labelalias&&dt.labelalias.hasOwnProperty(yp.text)){var wm=dt.labelalias[yp.text];typeof wm=="string"&&(yp.text=wm)}return(dt.tickson==="boundaries"||dt.showdividers)&&(yp.xbnd=[r0(yp.x-.5),r0(yp.x+dt.dtick-.5)]),yp},ge.hoverLabelText=function(dt,Fe,Gp){Gp&&(dt=S.extendFlat({},dt,{hoverformat:Gp}));var kp=S.isArrayOrTypedArray(Fe)?Fe[0]:Fe,yp=S.isArrayOrTypedArray(Fe)?Fe[1]:void 0;if(yp!==void 0&&yp!==kp)return ge.hoverLabelText(dt,kp,Gp)+" - "+ge.hoverLabelText(dt,yp,Gp);var bp=dt.type==="log"&&kp<=0,Pp=ge.tickText(dt,dt.c2l(bp?-kp:kp),"hover").text;return bp?kp===0?"0":ye+Pp:Pp};function B0(dt,Fe,Gp){var kp=dt.tickfont||{};return{x:Fe,dx:0,dy:0,text:Gp||"",fontSize:kp.size,font:kp.family,fontWeight:kp.weight,fontStyle:kp.style,fontVariant:kp.variant,fontTextcase:kp.textcase,fontLineposition:kp.lineposition,fontShadow:kp.shadow,fontColor:kp.color}}function em(dt,Fe,Gp,kp){var yp=dt._tickround,bp=Gp&&dt.hoverformat||ge.getTickFormat(dt);kp=!bp&&kp,kp&&(v(yp)?yp=4:yp={y:"m",m:"d",d:"M",M:"S",S:4}[yp]);var Pp=S.formatDate(Fe.x,bp,yp,dt._dateFormat,dt.calendar,dt._extraFormat),s0,Rp=Pp.indexOf(`
`);if(Rp!==-1&&(s0=Pp.substr(Rp+1),Pp=Pp.substr(0,Rp)),kp&&(s0!==void 0&&(Pp==="00:00:00"||Pp==="00:00")?(Pp=s0,s0=""):Pp.length===8&&(Pp=Pp.replace(/:00$/,""))),s0)if(Gp)yp==="d"?Pp+=", "+s0:Pp=s0+(Pp?", "+Pp:"");else if(!dt._inCalcTicks||dt._prevDateHead!==s0)dt._prevDateHead=s0,Pp+="<br>"+s0;else{var Vp=Ym(dt),r0=dt._trueSide||dt.side;(!Vp&&r0==="top"||Vp&&r0==="bottom")&&(Pp+="<br> ")}Fe.text=Pp}function k0(dt,Fe,Gp,kp,yp){var bp=dt.dtick,Pp=Fe.x,s0=dt.tickformat,Rp=typeof bp=="string"&&bp.charAt(0);if(yp==="never"&&(yp=""),kp&&Rp!=="L"&&(bp="L3",Rp="L"),s0||Rp==="L")Fe.text=Tp(Math.pow(10,Pp),dt,yp,kp);else if(v(bp)||Rp==="D"&&(dt.minorloglabels==="complete"||S.mod(Pp+.01,1)<.1)){dt.minorloglabels==="complete"&&!(S.mod(Pp+.01,1)<.1)&&(Fe.fontSize*=.75);var Vp=Math.pow(10,Pp).toExponential(0),r0=Vp.split("e"),$p=+r0[1],P0=Math.abs($p),j0=dt.exponentformat;j0==="power"||ci(j0)&&_n($p)?(Fe.text=r0[0],P0>0&&(Fe.text+="x10"),Fe.text==="1x10"&&(Fe.text="10"),$p!==0&&$p!==1&&(Fe.text+="<sup>"+($p>0?"":ye)+P0+"</sup>"),Fe.fontSize*=1.25):(j0==="e"||j0==="E")&&P0>2?Fe.text=r0[0]+j0+($p>0?"+":ye)+P0:(Fe.text=Tp(Math.pow(10,Pp),dt,"","fakehover"),bp==="D1"&&dt._id.charAt(0)==="y"&&(Fe.dy-=Fe.fontSize/6))}else if(Rp==="D")Fe.text=dt.minorloglabels==="none"?"":String(Math.round(Math.pow(10,S.mod(Pp,1)))),Fe.fontSize*=.75;else throw"unrecognized dtick "+String(bp);if(dt.dtick==="D1"){var tm=String(Fe.text).charAt(0);(tm==="0"||tm==="1")&&(dt._id.charAt(0)==="y"?Fe.dx-=Fe.fontSize/4:(Fe.dy+=Fe.fontSize/2,Fe.dx+=(dt.range[1]>dt.range[0]?1:-1)*Fe.fontSize*(Pp<0?.5:.25)))}}function J0(dt,Fe){var Gp=dt._categories[Math.round(Fe.x)];Gp===void 0&&(Gp=""),Fe.text=String(Gp)}function vs(dt,Fe,Gp){var kp=Math.round(Fe.x),yp=dt._categories[kp]||[],bp=yp[1]===void 0?"":String(yp[1]),Pp=yp[0]===void 0?"":String(yp[0]);Gp?Fe.text=Pp+" - "+bp:(Fe.text=bp,Fe.text2=Pp)}function jl(dt,Fe,Gp,kp,yp){yp==="never"?yp="":dt.showexponent==="all"&&Math.abs(Fe.x/dt.dtick)<1e-6&&(yp="hide"),Fe.text=Tp(Fe.x,dt,yp,kp)}function zl(dt,Fe,Gp,kp,yp){if(dt.thetaunit==="radians"&&!Gp){var bp=Fe.x/180;if(bp===0)Fe.text="0";else{var Pp=Ve(bp);if(Pp[1]>=100)Fe.text=Tp(S.deg2rad(Fe.x),dt,yp,kp);else{var s0=Fe.x<0;Pp[1]===1?Pp[0]===1?Fe.text="π":Fe.text=Pp[0]+"π":Fe.text=["<sup>",Pp[0],"</sup>","⁄","<sub>",Pp[1],"</sub>","π"].join(""),s0&&(Fe.text=ye+Fe.text)}}}else Fe.text=Tp(Fe.x,dt,yp,kp)}function Ve(dt){function Fe(s0,Rp){return Math.abs(s0-Rp)<=1e-6}function Gp(s0,Rp){return Fe(Rp,0)?s0:Gp(Rp,s0%Rp)}function kp(s0){for(var Rp=1;!Fe(Math.round(s0*Rp)/Rp,s0);)Rp*=10;return Rp}var yp=kp(dt),bp=dt*yp,Pp=Math.abs(Gp(bp,yp));return[Math.round(bp/Pp),Math.round(yp/Pp)]}var pn=["f","p","n","μ","m","","k","M","G","T"];function ci(dt){return dt==="SI"||dt==="B"}function _n(dt){return dt>14||dt<-15}function Tp(dt,Fe,Gp,kp){var yp=dt<0,bp=Fe._tickround,Pp=Gp||Fe.exponentformat||"B",s0=Fe._tickexponent,Rp=ge.getTickFormat(Fe),Vp=Fe.separatethousands;if(kp){var r0={exponentformat:Pp,minexponent:Fe.minexponent,dtick:Fe.showexponent==="none"?Fe.dtick:v(dt)&&Math.abs(dt)||1,range:Fe.showexponent==="none"?Fe.range.map(Fe.r2d):[0,dt||1]};Kp(r0),bp=(Number(r0._tickround)||0)+4,s0=r0._tickexponent,Fe.hoverformat&&(Rp=Fe.hoverformat)}if(Rp)return Fe._numFormat(Rp)(dt).replace(/-/g,ye);var $p=Math.pow(10,-bp)/2;if(Pp==="none"&&(s0=0),dt=Math.abs(dt),dt<$p)dt="0",yp=!1;else{if(dt+=$p,s0&&(dt*=Math.pow(10,-s0),bp+=s0),bp===0)dt=String(Math.floor(dt));else if(bp<0){dt=String(Math.round(dt)),dt=dt.substr(0,dt.length+bp);for(var P0=bp;P0<0;P0++)dt+="0"}else{dt=String(dt);var j0=dt.indexOf(".")+1;j0&&(dt=dt.substr(0,j0+bp).replace(/\.?0+$/,""))}dt=S.numSeparate(dt,Fe._separators,Vp)}if(s0&&Pp!=="hide"){ci(Pp)&&_n(s0)&&(Pp="power");var tm;s0<0?tm=ye+-s0:Pp!=="power"?tm="+"+s0:tm=String(s0),Pp==="e"||Pp==="E"?dt+=Pp+tm:Pp==="power"?dt+="×10<sup>"+tm+"</sup>":Pp==="B"&&s0===9?dt+="B":ci(Pp)&&(dt+=pn[s0/3+5])}return yp?ye+dt:dt}ge.getTickFormat=function(dt){var Fe;function Gp(Rp){return typeof Rp!="string"?Rp:Number(Rp.replace("M",""))*ne}function kp(Rp,Vp){var r0=["L","D"];if(typeof Rp==typeof Vp){if(typeof Rp=="number")return Rp-Vp;var $p=r0.indexOf(Rp.charAt(0)),P0=r0.indexOf(Vp.charAt(0));return $p===P0?Number(Rp.replace(/(L|D)/g,""))-Number(Vp.replace(/(L|D)/g,"")):$p-P0}else return typeof Rp=="number"?1:-1}function yp(Rp,Vp,r0){var $p=r0||function(tm){return tm},P0=Vp[0],j0=Vp[1];return(!P0&&typeof P0!="number"||$p(P0)<=$p(Rp))&&(!j0&&typeof j0!="number"||$p(j0)>=$p(Rp))}function bp(Rp,Vp){var r0=Vp[0]===null,$p=Vp[1]===null,P0=kp(Rp,Vp[0])>=0,j0=kp(Rp,Vp[1])<=0;return(r0||P0)&&($p||j0)}var Pp,s0;if(dt.tickformatstops&&dt.tickformatstops.length>0)switch(dt.type){case"date":case"linear":{for(Fe=0;Fe<dt.tickformatstops.length;Fe++)if(s0=dt.tickformatstops[Fe],s0.enabled&&yp(dt.dtick,s0.dtickrange,Gp)){Pp=s0;break}break}case"log":{for(Fe=0;Fe<dt.tickformatstops.length;Fe++)if(s0=dt.tickformatstops[Fe],s0.enabled&&bp(dt.dtick,s0.dtickrange)){Pp=s0;break}break}}return Pp?Pp.value:dt.tickformat},ge.getSubplots=function(dt,Fe){var Gp=dt._fullLayout._subplots,kp=Gp.cartesian.concat(Gp.gl2d||[]),yp=Fe?ge.findSubplotsWithAxis(kp,Fe):kp;return yp.sort(function(bp,Pp){var s0=bp.substr(1).split("y"),Rp=Pp.substr(1).split("y");return s0[0]===Rp[0]?+s0[1]-+Rp[1]:+s0[0]-+Rp[0]}),yp},ge.findSubplotsWithAxis=function(dt,Fe){for(var Gp=new RegExp(Fe._id.charAt(0)==="x"?"^"+Fe._id+"y":Fe._id+"$"),kp=[],yp=0;yp<dt.length;yp++){var bp=dt[yp];Gp.test(bp)&&kp.push(bp)}return kp},ge.makeClipPaths=function(dt){var Fe=dt._fullLayout;if(!Fe._hasOnlyLargeSploms){var Gp={_offset:0,_length:Fe.width,_id:""},kp={_offset:0,_length:Fe.height,_id:""},yp=ge.list(dt,"x",!0),bp=ge.list(dt,"y",!0),Pp=[],s0,Rp;for(s0=0;s0<yp.length;s0++)for(Pp.push({x:yp[s0],y:kp}),Rp=0;Rp<bp.length;Rp++)s0===0&&Pp.push({x:Gp,y:bp[Rp]}),Pp.push({x:yp[s0],y:bp[Rp]});var Vp=Fe._clips.selectAll(".axesclip").data(Pp,function(r0){return r0.x._id+r0.y._id});Vp.enter().append("clipPath").classed("axesclip",!0).attr("id",function(r0){return"clip"+Fe._uid+r0.x._id+r0.y._id}).append("rect"),Vp.exit().remove(),Vp.each(function(r0){M.select(this).select("rect").attr({x:r0.x._offset||0,y:r0.y._offset||0,width:r0.x._length||1,height:r0.y._length||1})})}},ge.draw=function(dt,Fe,Gp){var kp=dt._fullLayout;Fe==="redraw"&&kp._paper.selectAll("g.subplot").each(function(Rp){var Vp=Rp[0],r0=kp._plots[Vp];if(r0){var $p=r0.xaxis,P0=r0.yaxis;r0.xaxislayer.selectAll("."+$p._id+"tick").remove(),r0.yaxislayer.selectAll("."+P0._id+"tick").remove(),r0.xaxislayer.selectAll("."+$p._id+"tick2").remove(),r0.yaxislayer.selectAll("."+P0._id+"tick2").remove(),r0.xaxislayer.selectAll("."+$p._id+"divider").remove(),r0.yaxislayer.selectAll("."+P0._id+"divider").remove(),r0.minorGridlayer&&r0.minorGridlayer.selectAll("path").remove(),r0.gridlayer&&r0.gridlayer.selectAll("path").remove(),r0.zerolinelayer&&r0.zerolinelayer.selectAll("path").remove(),r0.zerolinelayerAbove&&r0.zerolinelayerAbove.selectAll("path").remove(),kp._infolayer.select(".g-"+$p._id+"title").remove(),kp._infolayer.select(".g-"+P0._id+"title").remove()}});var yp=!Fe||Fe==="redraw"?ge.listIds(dt):Fe,bp=ge.list(dt),Pp=bp.filter(function(Rp){return Rp.autoshift}).map(function(Rp){return Rp.overlaying});yp.map(function(Rp){var Vp=ge.getFromId(dt,Rp);if(Vp.tickmode==="sync"&&Vp.overlaying){var r0=yp.findIndex(function($p){return $p===Vp.overlaying});r0>=0&&yp.unshift(yp.splice(r0,1).shift())}});var s0={false:{left:0,right:0}};return S.syncOrAsync(yp.map(function(Rp){return function(){if(Rp){var Vp=ge.getFromId(dt,Rp);Gp||(Gp={}),Gp.axShifts=s0,Gp.overlayingShiftedAx=Pp;var r0=ge.drawOne(dt,Vp,Gp);return Vp._shiftPusher&&_v(Vp,Vp._fullDepth||0,s0,!0),Vp._r=Vp.range.slice(),Vp._rl=S.simpleMap(Vp._r,Vp.r2l),r0}}}))},ge.drawOne=function(dt,Fe,Gp){Gp=Gp||{};var kp=Gp.axShifts||{},yp=Gp.overlayingShiftedAx||[],bp,Pp,s0;Fe.setScale();var Rp=dt._fullLayout,Vp=Fe._id,r0=Vp.charAt(0),$p=ge.counterLetter(Vp),P0=Rp._plots[Fe._mainSubplot],j0=Fe.zerolinelayer==="above traces";if(!P0)return;if(Fe._shiftPusher=Fe.autoshift||yp.indexOf(Fe._id)!==-1||yp.indexOf(Fe.overlaying)!==-1,Fe._shiftPusher&Fe.anchor==="free"){var tm=Fe.linewidth/2||0;Fe.ticks==="inside"&&(tm+=Fe.ticklen),_v(Fe,tm,kp,!0),_v(Fe,Fe.shift||0,kp,!1)}(Gp.skipTitle!==!0||Fe._shift===void 0)&&(Fe._shift=Hm(Fe,kp));var wm=P0[r0+"axislayer"],bm=Fe._mainLinePosition,Tm=bm+=Fe._shift,Rm=Fe._mainMirrorPosition,Sm=Fe._vals=ge.calcTicks(Fe),Gm=[Fe.mirror,Tm,Rm].join("_");for(bp=0;bp<Sm.length;bp++)Sm[bp].axInfo=Gm;Fe._selections={},Fe._tickAngles&&(Fe._prevTickAngles=Fe._tickAngles),Fe._tickAngles={},Fe._depth=null;var Xm={};function pv(q1){var mv=Vp+(q1||"tick");return Xm[mv]||(Xm[mv]=Dp(Fe,mv,Tm)),Xm[mv]}if(Fe.visible){var Ev=ge.makeTransTickFn(Fe),kv=ge.makeTransTickLabelFn(Fe),tv,Mv,i1=Fe.ticks==="inside",V1=Fe.ticks==="outside";if(Fe.tickson==="boundaries"){var $m=Ip(Fe,Sm);Mv=ge.clipEnds(Fe,$m),tv=i1?Mv:$m}else Mv=ge.clipEnds(Fe,Sm),tv=i1&&Fe.ticklabelmode!=="period"?Mv:Sm;var vv=Fe._gridVals=Mv,Vv=m0(Fe,Sm);if(!Rp._hasOnlyLargeSploms){var b1=Fe._subplotsWith,c1={};for(bp=0;bp<b1.length;bp++){Pp=b1[bp],s0=Rp._plots[Pp];var Iv=s0[$p+"axis"],lv=Iv._mainAxis._id;if(!c1[lv]){c1[lv]=1;var fv=r0==="x"?"M0,"+Iv._offset+"v"+Iv._length:"M"+Iv._offset+",0h"+Iv._length;ge.drawGrid(dt,Fe,{vals:vv,counterAxis:Iv,layer:s0.gridlayer.select("."+Vp),minorLayer:s0.minorGridlayer.select("."+Vp),path:fv,transFn:Ev}),ge.drawZeroLine(dt,Fe,{counterAxis:Iv,layer:j0?s0.zerolinelayerAbove:s0.zerolinelayer,path:fv,transFn:Ev})}}}var Hv,Uv=ge.getTickSigns(Fe),Xv=ge.getTickSigns(Fe,"minor");if(Fe.ticks||Fe.minor&&Fe.minor.ticks){var r1=ge.makeTickPath(Fe,Tm,Uv[2]),s1=ge.makeTickPath(Fe,Tm,Xv[2],{minor:!0}),S1,_1,N1,w1;if(Fe._anchorAxis&&Fe.mirror&&Fe.mirror!==!0?(S1=ge.makeTickPath(Fe,Rm,Uv[3]),_1=ge.makeTickPath(Fe,Rm,Xv[3],{minor:!0}),N1=r1+S1,w1=s1+_1):(S1="",_1="",N1=r1,w1=s1),Fe.showdividers&&V1&&Fe.tickson==="boundaries"){var $v={};for(bp=0;bp<Vv.length;bp++)$v[Vv[bp].x]=1;Hv=function(q1){return $v[q1.x]?S1:N1}}else Hv=function(q1){return q1.minor?w1:N1}}if(ge.drawTicks(dt,Fe,{vals:tv,layer:wm,path:Hv,transFn:Ev}),Fe.mirror==="allticks"){var B1=Object.keys(Fe._linepositions||{});for(bp=0;bp<B1.length;bp++){Pp=B1[bp],s0=Rp._plots[Pp];var H1=Fe._linepositions[Pp]||[],_g=H1[0],K1=H1[1],pg=H1[2],Y1=ge.makeTickPath(Fe,_g,pg?Uv[0]:Xv[0],{minor:pg})+ge.makeTickPath(Fe,K1,pg?Uv[1]:Xv[1],{minor:pg});ge.drawTicks(dt,Fe,{vals:tv,layer:s0[r0+"axislayer"],path:Y1,transFn:Ev})}}var L1=[];if(L1.push(function(){return ge.drawLabels(dt,Fe,{vals:Sm,layer:wm,plotinfo:s0,transFn:kv,labelFns:ge.makeLabelFns(Fe,Tm)})}),Fe.type==="multicategory"){var rg={x:2,y:10}[r0];L1.push(function(){var q1={x:"height",y:"width"}[r0],mv=pv()[q1]+rg+(Fe._tickAngles[Vp+"tick"]?Fe.tickfont.size*Do:0);return ge.drawLabels(dt,Fe,{vals:Jp(Fe,Sm),layer:wm,cls:Vp+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:Ev,labelFns:ge.makeLabelFns(Fe,Tm+mv*Uv[4])})}),L1.push(function(){return Fe._depth=Uv[4]*(pv("tick2")[Fe.side]-Tm),gm(dt,Fe,{vals:Vv,layer:wm,path:ge.makeTickPath(Fe,Tm,Uv[4],{len:Fe._depth}),transFn:Ev})})}else Fe.title.hasOwnProperty("standoff")&&L1.push(function(){Fe._depth=Uv[4]*(pv()[Fe.side]-Tm)});var l_=E.getComponentMethod("rangeslider","isVisible")(Fe);return!Gp.skipTitle&&!(l_&&Fe.side==="bottom")&&L1.push(function(){return Bm(dt,Fe)}),L1.push(function(){var q1=Fe.side.charAt(0),mv=Ae[Fe.side].charAt(0),Tv=ge.getPxPosition(dt,Fe),yv=V1?Fe.ticklen:0,sv,hv,T1,xg;(Fe.automargin||l_||Fe._shiftPusher)&&(Fe.type==="multicategory"?sv=pv("tick2"):(sv=pv(),r0==="x"&&q1==="b"&&(Fe._depth=Math.max(sv.width>0?sv.bottom-Tv:0,yv))));var bg=0,by=0;if(Fe._shiftPusher&&(bg=Math.max(yv,sv.height>0?q1==="l"?Tv-sv.left:sv.right-Tv:0),Fe.title.text!==Rp._dfltTitle[r0]&&(by=(Fe._titleStandoff||0)+(Fe._titleScoot||0),q1==="l"&&(by+=Nm(Fe))),Fe._fullDepth=Math.max(bg,by)),Fe.automargin){hv={x:0,y:0,r:0,l:0,t:0,b:0};var Eg=[0,1],z1=typeof Fe._shift=="number"?Fe._shift:0;if(r0==="x"){if(q1==="b"?hv[q1]=Fe._depth:(hv[q1]=Fe._depth=Math.max(sv.width>0?Tv-sv.top:0,yv),Eg.reverse()),sv.width>0){var wy=sv.right-(Fe._offset+Fe._length);wy>0&&(hv.xr=1,hv.r=wy);var Xg=Fe._offset-sv.left;Xg>0&&(hv.xl=0,hv.l=Xg)}}else if(q1==="l"?(Fe._depth=Math.max(sv.height>0?Tv-sv.left:0,yv),hv[q1]=Fe._depth-z1):(Fe._depth=Math.max(sv.height>0?sv.right-Tv:0,yv),hv[q1]=Fe._depth+z1,Eg.reverse()),sv.height>0){var U2=sv.bottom-(Fe._offset+Fe._length);U2>0&&(hv.yb=0,hv.b=U2);var Ag=Fe._offset-sv.top;Ag>0&&(hv.yt=1,hv.t=Ag)}hv[$p]=Fe.anchor==="free"?Fe.position:Fe._anchorAxis.domain[Eg[0]],Fe.title.text!==Rp._dfltTitle[r0]&&(hv[q1]+=Nm(Fe)+(Fe.title.standoff||0)),Fe.mirror&&Fe.anchor!=="free"&&(T1={x:0,y:0,r:0,l:0,t:0,b:0},T1[mv]=Fe.linewidth,Fe.mirror&&Fe.mirror!==!0&&(T1[mv]+=yv),Fe.mirror===!0||Fe.mirror==="ticks"?T1[$p]=Fe._anchorAxis.domain[Eg[1]]:(Fe.mirror==="all"||Fe.mirror==="allticks")&&(T1[$p]=[Fe._counterDomainMin,Fe._counterDomainMax][Eg[1]]))}l_&&(xg=E.getComponentMethod("rangeslider","autoMarginOpts")(dt,Fe)),typeof Fe.automargin=="string"&&(Sp(hv,Fe.automargin),Sp(T1,Fe.automargin)),g.autoMargin(dt,Om(Fe),hv),g.autoMargin(dt,Lm(Fe),T1),g.autoMargin(dt,Um(Fe),xg)}),S.syncOrAsync(L1)}};function Sp(dt,Fe){if(dt){var Gp=Object.keys(Qe).reduce(function(kp,yp){return Fe.indexOf(yp)!==-1&&Qe[yp].forEach(function(bp){kp[bp]=1}),kp},{});Object.keys(dt).forEach(function(kp){Gp[kp]||(kp.length===1?dt[kp]=0:delete dt[kp])})}}function Ip(dt,Fe){var Gp=[],kp,yp=function(bp,Pp){var s0=bp.xbnd[Pp];s0!==null&&Gp.push(S.extendFlat({},bp,{x:s0}))};if(Fe.length){for(kp=0;kp<Fe.length;kp++)yp(Fe[kp],0);yp(Fe[kp-1],1)}return Gp}function Jp(dt,Fe){for(var Gp=[],kp={},yp=0;yp<Fe.length;yp++){var bp=Fe[yp];kp[bp.text2]?kp[bp.text2].push(bp.x):kp[bp.text2]=[bp.x]}for(var Pp in kp)Gp.push(B0(dt,S.interp(kp[Pp],.5),Pp));return Gp}function m0(dt,Fe){var Gp=[],kp,yp,bp=Fe.length&&Fe[Fe.length-1].x<Fe[0].x,Pp=function(Rp,Vp){var r0=Rp.xbnd[Vp];r0!==null&&Gp.push(S.extendFlat({},Rp,{x:r0}))};if(dt.showdividers&&Fe.length){for(kp=0;kp<Fe.length;kp++){var s0=Fe[kp];s0.text2!==yp&&Pp(s0,bp?1:0),yp=s0.text2}Pp(Fe[kp-1],bp?0:1)}return Gp}function Dp(dt,Fe,Gp){var kp,yp,bp,Pp;if(dt._selections[Fe].size())kp=1/0,yp=-1/0,bp=1/0,Pp=-1/0,dt._selections[Fe].each(function(){var Rp=vm(this);if(Rp.node().style.display!=="none"){var Vp=Y.bBox(Rp.node().parentNode);kp=Math.min(kp,Vp.top),yp=Math.max(yp,Vp.bottom),bp=Math.min(bp,Vp.left),Pp=Math.max(Pp,Vp.right)}});else{var s0=ge.makeLabelFns(dt,Gp);kp=yp=s0.yFn({dx:0,dy:0,fontSize:0}),bp=Pp=s0.xFn({dx:0,dy:0,fontSize:0})}return{top:kp,bottom:yp,left:bp,right:Pp,height:yp-kp,width:Pp-bp}}ge.getTickSigns=function(dt,Fe){var Gp=dt._id.charAt(0),kp={x:"top",y:"right"}[Gp],yp=dt.side===kp?1:-1,bp=[-1,1,yp,-yp],Pp=Fe?(dt.minor||{}).ticks:dt.ticks;return Pp!=="inside"==(Gp==="x")&&(bp=bp.map(function(s0){return-s0})),dt.side&&bp.push({l:-1,t:-1,r:1,b:1}[dt.side.charAt(0)]),bp},ge.makeTransTickFn=function(dt){return dt._id.charAt(0)==="x"?function(Fe){return T(dt._offset+dt.l2p(Fe.x),0)}:function(Fe){return T(0,dt._offset+dt.l2p(Fe.x))}},ge.makeTransTickLabelFn=function(dt){var Fe=b0(dt),Gp=dt.ticklabelshift||0,kp=dt.ticklabelstandoff||0,yp=Fe[0],bp=Fe[1],Pp=dt.range[0]>dt.range[1],s0=dt.ticklabelposition&&dt.ticklabelposition.indexOf("inside")!==-1,Rp=!s0;if(Gp){var Vp=Pp?-1:1;Gp=Gp*Vp}if(kp){var r0=dt.side,$p=s0&&(r0==="top"||r0==="left")||Rp&&(r0==="bottom"||r0==="right")?1:-1;kp=kp*$p}return dt._id.charAt(0)==="x"?function(P0){return T(yp+dt._offset+dt.l2p(c0(P0))+Gp,bp+kp)}:function(P0){return T(bp+kp,yp+dt._offset+dt.l2p(c0(P0))+Gp)}};function c0(dt){return dt.periodX!==void 0?dt.periodX:dt.x}function b0(dt){var Fe=dt.ticklabelposition||"",Gp=dt.tickson||"",kp=function(tm){return Fe.indexOf(tm)!==-1},yp=kp("top"),bp=kp("left"),Pp=kp("right"),s0=kp("bottom"),Rp=kp("inside"),Vp=Gp!=="boundaries"&&(s0||bp||yp||Pp);if(!Vp&&!Rp)return[0,0];var r0=dt.side,$p=Vp?(dt.tickwidth||0)/2:0,P0=ke,j0=dt.tickfont?dt.tickfont.size:12;return(s0||yp)&&($p+=j0*ta,P0+=(dt.linewidth||0)/2),(bp||Pp)&&($p+=(dt.linewidth||0)/2,P0+=ke),Rp&&r0==="top"&&(P0-=j0*(1-ta)),(bp||yp)&&($p=-$p),(r0==="bottom"||r0==="right")&&(P0=-P0),[Vp?$p:0,Rp?P0:0]}ge.makeTickPath=function(dt,Fe,Gp,kp){kp||(kp={});var yp=kp.minor;if(yp&&!dt.minor)return"";var bp=kp.len!==void 0?kp.len:yp?dt.minor.ticklen:dt.ticklen,Pp=dt._id.charAt(0),s0=(dt.linewidth||1)/2;return Pp==="x"?"M0,"+(Fe+s0*Gp)+"v"+bp*Gp:"M"+(Fe+s0*Gp)+",0h"+bp*Gp},ge.makeLabelFns=function(dt,Fe,Gp){var kp=dt.ticklabelposition||"",yp=dt.tickson||"",bp=function($m){return kp.indexOf($m)!==-1},Pp=bp("top"),s0=bp("left"),Rp=bp("right"),Vp=bp("bottom"),r0=yp!=="boundaries"&&(Vp||s0||Pp||Rp),$p=bp("inside"),P0=kp==="inside"&&dt.ticks==="inside"||!$p&&dt.ticks==="outside"&&yp!=="boundaries",j0=0,tm=0,wm=P0?dt.ticklen:0;if($p?wm*=-1:r0&&(wm=0),P0&&(j0+=wm,Gp)){var bm=S.deg2rad(Gp);j0=wm*Math.cos(bm)+1,tm=wm*Math.sin(bm)}dt.showticklabels&&(P0||dt.showline)&&(j0+=.2*dt.tickfont.size),j0+=(dt.linewidth||1)/2*($p?-1:1);var Tm={labelStandoff:j0,labelShift:tm},Rm,Sm,Gm,Xm,pv=0,Ev=dt.side,kv=dt._id.charAt(0),tv=dt.tickangle,Mv;if(kv==="x")Mv=!$p&&Ev==="bottom"||$p&&Ev==="top",Xm=Mv?1:-1,$p&&(Xm*=-1),Rm=tm*Xm,Sm=Fe+j0*Xm,Gm=Mv?1:-.2,Math.abs(tv)===90&&($p?Gm+=mn:tv===-90&&Ev==="bottom"?Gm=ta:tv===90&&Ev==="top"?Gm=mn:Gm=.5,pv=mn/2*(tv/90)),Tm.xFn=function($m){return $m.dx+Rm+pv*$m.fontSize},Tm.yFn=function($m){return $m.dy+Sm+$m.fontSize*Gm},Tm.anchorFn=function($m,vv){if(r0){if(s0)return"end";if(Rp)return"start"}return!v(vv)||vv===0||vv===180?"middle":vv*Xm<0!==$p?"end":"start"},Tm.heightFn=function($m,vv,Vv){return vv<-60||vv>60?-.5*Vv:dt.side==="top"!==$p?-Vv:0};else if(kv==="y"){if(Mv=!$p&&Ev==="left"||$p&&Ev==="right",Xm=Mv?1:-1,$p&&(Xm*=-1),Rm=j0,Sm=tm*Xm,Gm=0,!$p&&Math.abs(tv)===90&&(tv===-90&&Ev==="left"||tv===90&&Ev==="right"?Gm=ta:Gm=.5),$p){var i1=v(tv)?+tv:0;if(i1!==0){var V1=S.deg2rad(i1);pv=Math.abs(Math.sin(V1))*ta*Xm,Gm=0}}Tm.xFn=function($m){return $m.dx+Fe-(Rm+$m.fontSize*Gm)*Xm+pv*$m.fontSize},Tm.yFn=function($m){return $m.dy+Sm+$m.fontSize*mn},Tm.anchorFn=function($m,vv){return v(vv)&&Math.abs(vv)===90?"middle":Mv?"end":"start"},Tm.heightFn=function($m,vv,Vv){return dt.side==="right"&&(vv*=-1),vv<-30?-Vv:vv<30?-.5*Vv:0}}return Tm};function E0(dt){return[dt.text,dt.x,dt.axInfo,dt.font,dt.fontSize,dt.fontColor].join("_")}ge.drawTicks=function(dt,Fe,Gp){Gp=Gp||{};var kp=Fe._id+"tick",yp=[].concat(Fe.minor&&Fe.minor.ticks?Gp.vals.filter(function(Pp){return Pp.minor&&!Pp.noTick}):[]).concat(Fe.ticks?Gp.vals.filter(function(Pp){return!Pp.minor&&!Pp.noTick}):[]),bp=Gp.layer.selectAll("path."+kp).data(yp,E0);bp.exit().remove(),bp.enter().append("path").classed(kp,1).classed("ticks",1).classed("crisp",Gp.crisp!==!1).each(function(Pp){return p.stroke(M.select(this),Pp.minor?Fe.minor.tickcolor:Fe.tickcolor)}).style("stroke-width",function(Pp){return Y.crispRound(dt,Pp.minor?Fe.minor.tickwidth:Fe.tickwidth,1)+"px"}).attr("d",Gp.path).style("display",null),Km(Fe,[Ye]),bp.attr("transform",Gp.transFn)},ge.drawGrid=function(dt,Fe,Gp){if(Gp=Gp||{},Fe.tickmode!=="sync"){var kp=Fe._id+"grid",yp=Fe.minor&&Fe.minor.showgrid,bp=yp?Gp.vals.filter(function(Tm){return Tm.minor}):[],Pp=Fe.showgrid?Gp.vals.filter(function(Tm){return!Tm.minor}):[],s0=Gp.counterAxis;if(s0&&ge.shouldShowZeroLine(dt,Fe,s0))for(var Rp=Fe.tickmode==="array",Vp=0;Vp<Pp.length;Vp++){var r0=Pp[Vp].x;if(Rp?!r0:Math.abs(r0)<Fe.dtick/100)if(Pp=Pp.slice(0,Vp).concat(Pp.slice(Vp+1)),Rp)Vp--;else break}Fe._gw=Y.crispRound(dt,Fe.gridwidth,1);for(var $p=yp?Y.crispRound(dt,Fe.minor.gridwidth,1):0,P0=Gp.layer,j0=Gp.minorLayer,tm=1;tm>=0;tm--){var wm=tm?P0:j0;if(wm){var bm=wm.selectAll("path."+kp).data(tm?Pp:bp,E0);bm.exit().remove(),bm.enter().append("path").classed(kp,1).classed("crisp",Gp.crisp!==!1),bm.attr("transform",Gp.transFn).attr("d",Gp.path).each(function(Tm){return p.stroke(M.select(this),Tm.minor?Fe.minor.gridcolor:Fe.gridcolor||"#ddd")}).style("stroke-dasharray",function(Tm){return Y.dashStyle(Tm.minor?Fe.minor.griddash:Fe.griddash,Tm.minor?Fe.minor.gridwidth:Fe.gridwidth)}).style("stroke-width",function(Tm){return(Tm.minor?$p:Fe._gw)+"px"}).style("display",null),typeof Gp.path=="function"&&bm.attr("d",Gp.path)}}Km(Fe,[he,Be])}},ge.drawZeroLine=function(dt,Fe,Gp){Gp=Gp||Gp;var kp=Fe._id+"zl",yp=ge.shouldShowZeroLine(dt,Fe,Gp.counterAxis),bp=Gp.layer.selectAll("path."+kp).data(yp?[{x:0,id:Fe._id}]:[]);bp.exit().remove(),bp.enter().append("path").classed(kp,1).classed("zl",1).classed("crisp",Gp.crisp!==!1).each(function(){Gp.layer.selectAll("path").sort(function(Pp,s0){return Re(Pp.id,s0.id)})}),bp.attr("transform",Gp.transFn).attr("d",Gp.path).call(p.stroke,Fe.zerolinecolor||p.defaultLine).style("stroke-width",Y.crispRound(dt,Fe.zerolinewidth,Fe._gw||1)+"px").style("display",null),Km(Fe,[Ue])},ge.drawLabels=function(dt,Fe,Gp){Gp=Gp||{};var kp=dt._fullLayout,yp=Fe._id,bp=Fe.zerolinelayer==="above traces",Pp=Gp.cls||yp+"tick",s0=Gp.vals.filter(function(lv){return lv.text}),Rp=Gp.labelFns,Vp=Gp.secondary?0:Fe.tickangle,r0=(Fe._prevTickAngles||{})[Pp],$p=Gp.layer.selectAll("g."+Pp).data(Fe.showticklabels?s0:[],E0),P0=[];$p.enter().append("g").classed(Pp,1).append("text").attr("text-anchor","middle").each(function(lv){var fv=M.select(this),Hv=dt._promises.length;fv.call(C.positionText,Rp.xFn(lv),Rp.yFn(lv)).call(Y.font,{family:lv.font,size:lv.fontSize,color:lv.fontColor,weight:lv.fontWeight,style:lv.fontStyle,variant:lv.fontVariant,textcase:lv.fontTextcase,lineposition:lv.fontLineposition,shadow:lv.fontShadow}).text(lv.text).call(C.convertToTspans,dt),dt._promises[Hv]?P0.push(dt._promises.pop().then(function(){j0(fv,Vp)})):j0(fv,Vp)}),Km(Fe,[et]),$p.exit().remove(),Gp.repositionOnUpdate&&$p.each(function(lv){M.select(this).select("text").call(C.positionText,Rp.xFn(lv),Rp.yFn(lv))});function j0(lv,fv){lv.each(function(Hv){var Uv=M.select(this),Xv=Uv.select(".text-math-group"),r1=Rp.anchorFn(Hv,fv),s1=Gp.transFn.call(Uv.node(),Hv)+(v(fv)&&+fv!=0?" rotate("+fv+","+Rp.xFn(Hv)+","+(Rp.yFn(Hv)-Hv.fontSize/2)+")":""),S1=C.lineCount(Uv),_1=Do*Hv.fontSize,N1=Rp.heightFn(Hv,v(fv)?+fv:0,(S1-1)*_1);if(N1&&(s1+=T(0,N1)),Xv.empty()){var w1=Uv.select("text");w1.attr({transform:s1,"text-anchor":r1}),w1.style("display",null),Fe._adjustTickLabelsOverflow&&Fe._adjustTickLabelsOverflow()}else{var $v=Y.bBox(Xv.node()).width,B1=$v*{end:-.5,start:.5}[r1];Xv.attr("transform",s1+T(B1,0))}})}Fe._adjustTickLabelsOverflow=function(){var lv=Fe.ticklabeloverflow;if(!(!lv||lv==="allow")){var fv=lv.indexOf("hide")!==-1,Hv=Fe._id.charAt(0)==="x",Uv=0,Xv=Hv?dt._fullLayout.width:dt._fullLayout.height;if(lv.indexOf("domain")!==-1){var r1=S.simpleMap(Fe.range,Fe.r2l);Uv=Fe.l2p(r1[0])+Fe._offset,Xv=Fe.l2p(r1[1])+Fe._offset}var s1=Math.min(Uv,Xv),S1=Math.max(Uv,Xv),_1=Fe.side,N1=1/0,w1=-1/0;$p.each(function(_g){var K1=M.select(this),pg=K1.select(".text-math-group");if(pg.empty()){var Y1=Y.bBox(K1.node()),L1=0;Hv?(Y1.right>S1||Y1.left<s1)&&(L1=1):(Y1.bottom>S1||Y1.top+(Fe.tickangle?0:_g.fontSize/4)<s1)&&(L1=1);var rg=K1.select("text");L1?fv&&rg.style("display","none"):rg.node().style.display!=="none"&&(rg.style("display",null),_1==="bottom"||_1==="right"?N1=Math.min(N1,Hv?Y1.top:Y1.left):N1=-1/0,_1==="top"||_1==="left"?w1=Math.max(w1,Hv?Y1.bottom:Y1.right):w1=1/0)}});for(var $v in kp._plots){var B1=kp._plots[$v];if(!(Fe._id!==B1.xaxis._id&&Fe._id!==B1.yaxis._id)){var H1=Hv?B1.yaxis:B1.xaxis;H1&&(H1["_visibleLabelMin_"+Fe._id]=N1,H1["_visibleLabelMax_"+Fe._id]=w1)}}}},Fe._hideCounterAxisInsideTickLabels=function(lv){var fv=Fe._id.charAt(0)==="x",Hv=[];for(var Uv in kp._plots){var Xv=kp._plots[Uv];Fe._id!==Xv.xaxis._id&&Fe._id!==Xv.yaxis._id||Hv.push(fv?Xv.yaxis:Xv.xaxis)}Hv.forEach(function(r1,s1){r1&&Ym(r1)&&(lv||[Ue,Be,he,Ye,et]).forEach(function(S1){var _1=S1.K==="tick"&&S1.L==="text"&&Fe.ticklabelmode==="period",N1=kp._plots[Fe._mainSubplot],w1;if(S1.K===Ue.K){var $v=bp?N1.zerolinelayerAbove:N1.zerolinelayer;w1=$v.selectAll("."+Fe._id+"zl")}else S1.K===Be.K?w1=N1.minorGridlayer.selectAll("."+Fe._id):S1.K===he.K?w1=N1.gridlayer.selectAll("."+Fe._id):w1=N1[Fe._id.charAt(0)+"axislayer"];w1.each(function(){var B1=M.select(this);S1.L&&(B1=B1.selectAll(S1.L)),B1.each(function(H1){var _g=Fe.l2p(_1?c0(H1):H1.x)+Fe._offset,K1=M.select(this);_g<Fe["_visibleLabelMax_"+r1._id]&&_g>Fe["_visibleLabelMin_"+r1._id]?K1.style("display","none"):S1.K==="tick"&&!s1&&K1.node().style.display!=="none"&&K1.style("display",null)})})})})},j0($p,r0+1?r0:Vp);function tm(){return P0.length&&Promise.all(P0)}var wm=null;function bm(){if(j0($p,Vp),s0.length&&Fe.autotickangles&&(Fe.type!=="log"||String(Fe.dtick).charAt(0)!=="D")){wm=Fe.autotickangles[0];var lv=0,fv=[],Hv,Uv=1;$p.each(function(hv){lv=Math.max(lv,hv.fontSize);var T1=Fe.l2p(hv.x),xg=vm(this),bg=Y.bBox(xg.node());Uv=Math.max(Uv,C.lineCount(xg)),fv.push({top:0,bottom:10,height:10,left:T1-bg.width/2,right:T1+bg.width/2+2,width:bg.width+2})});var Xv=(Fe.tickson==="boundaries"||Fe.showdividers)&&!Gp.secondary,r1=s0.length,s1=Math.abs((s0[r1-1].x-s0[0].x)*Fe._m)/(r1-1),S1=Xv?s1/2:s1,_1=Xv?Fe.ticklen:lv*1.25*Uv,N1=Math.sqrt(Math.pow(S1,2)+Math.pow(_1,2)),w1=S1/N1,$v=Fe.autotickangles.map(function(hv){return hv*Math.PI/180}),B1=$v.find(function(hv){return Math.abs(Math.cos(hv))<=w1});B1===void 0&&(B1=$v.reduce(function(hv,T1){return Math.abs(Math.cos(hv))<Math.abs(Math.cos(T1))?hv:T1},$v[0]));var H1=B1*(180/Math.PI);if(Xv){var _g=2;for(Fe.ticks&&(_g+=Fe.tickwidth/2),Hv=0;Hv<fv.length;Hv++){var K1=s0[Hv].xbnd,pg=fv[Hv];if(K1[0]!==null&&pg.left-Fe.l2p(K1[0])<_g||K1[1]!==null&&Fe.l2p(K1[1])-pg.right<_g){wm=H1;break}}}else{var Y1=Fe.ticklabelposition||"",L1=Fe.tickson||"",rg=function(hv){return Y1.indexOf(hv)!==-1},l_=rg("top"),q1=rg("left"),mv=rg("right"),Tv=rg("bottom"),yv=L1!=="boundaries"&&(Tv||q1||l_||mv),sv=yv?(Fe.tickwidth||0)+2*ke:0;for(Hv=0;Hv<fv.length-1;Hv++)if(S.bBoxIntersect(fv[Hv],fv[Hv+1],sv)){wm=H1;break}}wm&&j0($p,wm)}}Fe._selections&&(Fe._selections[Pp]=$p);var Tm=[tm];Fe.automargin&&kp._redrawFromAutoMarginCount&&r0===90?(wm=r0,Tm.push(function(){j0($p,r0)})):Tm.push(bm),Fe._tickAngles&&Tm.push(function(){Fe._tickAngles[Pp]=wm===null?v(Vp)?Vp:0:wm});var Rm=function(){var lv=0,fv=0;return $p.each(function(Hv,Uv){var Xv=vm(this),r1=Xv.select(".text-math-group");if(r1.empty()){var s1;Fe._vals[Uv]&&(s1=Fe._vals[Uv].bb||Y.bBox(Xv.node()),Fe._vals[Uv].bb=s1),lv=Math.max(lv,s1.width),fv=Math.max(fv,s1.height)}}),{labelsMaxW:lv,labelsMaxH:fv}},Sm=Fe._anchorAxis;if(Sm&&(Sm.autorange||Sm.insiderange)&&Ym(Fe)&&!Q(kp,Fe._id)&&(kp._insideTickLabelsUpdaterange||(kp._insideTickLabelsUpdaterange={}),Sm.autorange&&(kp._insideTickLabelsUpdaterange[Sm._name+".autorange"]=Sm.autorange,Tm.push(Rm)),Sm.insiderange)){var Gm=Rm(),Xm=Fe._id.charAt(0)==="y"?Gm.labelsMaxW:Gm.labelsMaxH;Xm+=2*ke,Fe.ticklabelposition==="inside"&&(Xm+=Fe.ticklen||0);var pv=Fe.side==="right"||Fe.side==="top"?1:-1,Ev=pv===1?1:0,kv=pv===1?0:1,tv=[];tv[kv]=Sm.range[kv];var Mv=Sm.range,i1=Sm.r2p(Mv[Ev]),V1=Sm.r2p(Mv[kv]),$m=kp._insideTickLabelsUpdaterange[Sm._name+".range"];if($m){var vv=Sm.r2p($m[Ev]),Vv=Sm.r2p($m[kv]),b1=pv*(Fe._id.charAt(0)==="y"?1:-1);b1*i1<b1*vv&&(i1=vv,tv[Ev]=Mv[Ev]=$m[Ev]),b1*V1>b1*Vv&&(V1=Vv,tv[kv]=Mv[kv]=$m[kv])}var c1=Math.abs(V1-i1);c1-Xm>0?(c1-=Xm,Xm*=1+Xm/c1):Xm=0,Fe._id.charAt(0)!=="y"&&(Xm=-Xm),tv[Ev]=Sm.p2r(Sm.r2p(Mv[Ev])+pv*Xm),Sm.autorange==="min"||Sm.autorange==="max reversed"?(tv[0]=null,Sm._rangeInitial0=void 0,Sm._rangeInitial1=void 0):(Sm.autorange==="max"||Sm.autorange==="min reversed")&&(tv[1]=null,Sm._rangeInitial0=void 0,Sm._rangeInitial1=void 0),kp._insideTickLabelsUpdaterange[Sm._name+".range"]=tv}var Iv=S.syncOrAsync(Tm);return Iv&&Iv.then&&dt._promises.push(Iv),Iv};function gm(dt,Fe,Gp){var kp=Fe._id+"divider",yp=Gp.vals,bp=Gp.layer.selectAll("path."+kp).data(yp,E0);bp.exit().remove(),bp.enter().insert("path",":first-child").classed(kp,1).classed("crisp",1).call(p.stroke,Fe.dividercolor).style("stroke-width",Y.crispRound(dt,Fe.dividerwidth,1)+"px"),bp.attr("transform",Gp.transFn).attr("d",Gp.path)}ge.getPxPosition=function(dt,Fe){var Gp=dt._fullLayout._size,kp=Fe._id.charAt(0),yp=Fe.side,bp;if(Fe.anchor!=="free"?bp=Fe._anchorAxis:kp==="x"?bp={_offset:Gp.t+(1-(Fe.position||0))*Gp.h,_length:0}:kp==="y"&&(bp={_offset:Gp.l+(Fe.position||0)*Gp.w+Fe._shift,_length:0}),yp==="top"||yp==="left")return bp._offset;if(yp==="bottom"||yp==="right")return bp._offset+bp._length};function Nm(dt){var Fe=dt.title.font.size,Gp=(dt.title.text.match(C.BR_TAG_ALL)||[]).length;return dt.title.hasOwnProperty("standoff")?Fe*(ta+Gp*Do):Gp?Fe*(Gp+1)*Do:Fe}function Bm(dt,Fe){var Gp=dt._fullLayout,kp=Fe._id,yp=kp.charAt(0),bp=Fe.title.font.size,Pp,s0=(Fe.title.text.match(C.BR_TAG_ALL)||[]).length;if(Fe.title.hasOwnProperty("standoff"))Fe.side==="bottom"||Fe.side==="right"?Pp=Fe._depth+Fe.title.standoff+bp*ta:(Fe.side==="top"||Fe.side==="left")&&(Pp=Fe._depth+Fe.title.standoff+bp*(mn+s0*Do));else{var Rp=Ym(Fe);if(Fe.type==="multicategory")Pp=Fe._depth;else{var Vp=1.5*bp;Rp&&(Vp=.5*bp,Fe.ticks==="outside"&&(Vp+=Fe.ticklen)),Pp=10+Vp+(Fe.linewidth?Fe.linewidth-1:0)}Rp||(yp==="x"?Pp+=Fe.side==="top"?bp*(Fe.showticklabels?1:0):bp*(Fe.showticklabels?1.5:.5):Pp+=Fe.side==="right"?bp*(Fe.showticklabels?1:.5):bp*(Fe.showticklabels?.5:0))}var r0=ge.getPxPosition(dt,Fe),$p,P0,j0;yp==="x"?(P0=Fe._offset+Fe._length/2,j0=Fe.side==="top"?r0-Pp:r0+Pp):(j0=Fe._offset+Fe._length/2,P0=Fe.side==="right"?r0+Pp:r0-Pp,$p={rotate:"-90",offset:0});var tm;if(Fe.type!=="multicategory"){var wm=Fe._selections[Fe._id+"tick"];if(tm={selection:wm,side:Fe.side},wm&&wm.node()&&wm.node().parentNode){var bm=Y.getTranslate(wm.node().parentNode);tm.offsetLeft=bm.x,tm.offsetTop=bm.y}Fe.title.hasOwnProperty("standoff")&&(tm.pad=0)}return Fe._titleStandoff=Pp,P.draw(dt,kp+"title",{propContainer:Fe,propName:Fe._name+".title.text",placeholder:Gp._dfltTitle[yp],avoid:tm,transform:$p,attributes:{x:P0,y:j0,"text-anchor":"middle"}})}ge.shouldShowZeroLine=function(dt,Fe,Gp){var kp=S.simpleMap(Fe.range,Fe.r2l);return kp[0]*kp[1]<=0&&Fe.zeroline&&(Fe.type==="linear"||Fe.type==="-")&&!(Fe.rangebreaks&&Fe.maskBreaks(0)===De)&&(xm(Fe,0)||!Am(dt,Fe,Gp,kp)||mm(dt,Fe))},ge.clipEnds=function(dt,Fe){return Fe.filter(function(Gp){return xm(dt,Gp.x)})};function xm(dt,Fe){var Gp=dt.l2p(Fe);return Gp>1&&Gp<dt._length-1}function Am(dt,Fe,Gp,kp){var yp=Gp._mainAxis;if(!yp)return;var bp=dt._fullLayout,Pp=Fe._id.charAt(0),s0=ge.counterLetter(Fe._id),Rp=Fe._offset+(Math.abs(kp[0])<Math.abs(kp[1])==(Pp==="x")?0:Fe._length);function Vp(tm){if(!tm.showline||!tm.linewidth)return!1;var wm=Math.max((tm.linewidth+Fe.zerolinewidth)/2,1);function bm(Sm){return typeof Sm=="number"&&Math.abs(Sm-Rp)<wm}if(bm(tm._mainLinePosition)||bm(tm._mainMirrorPosition))return!0;var Tm=tm._linepositions||{};for(var Rm in Tm)if(bm(Tm[Rm][0])||bm(Tm[Rm][1]))return!0}var r0=bp._plots[Gp._mainSubplot];if(!(r0.mainplotinfo||r0).overlays.length)return Vp(Gp);for(var $p=ge.list(dt,s0),P0=0;P0<$p.length;P0++){var j0=$p[P0];if(j0._mainAxis===yp&&Vp(j0))return!0}}function mm(dt,Fe){for(var Gp=dt._fullData,kp=Fe._mainSubplot,yp=Fe._id.charAt(0),bp=0;bp<Gp.length;bp++){var Pp=Gp[bp];if(Pp.visible===!0&&Pp.xaxis+Pp.yaxis===kp&&(E.traceIs(Pp,"bar-like")&&Pp.orientation==={x:"h",y:"v"}[yp]||Pp.fill&&Pp.fill.charAt(Pp.fill.length-1)===yp))return!0}return!1}function vm(dt){var Fe=M.select(dt),Gp=Fe.select(".text-math-group");return Gp.empty()?Fe.select("text"):Gp}ge.allowAutoMargin=function(dt){for(var Fe=ge.list(dt,"",!0),Gp=0;Gp<Fe.length;Gp++){var kp=Fe[Gp];kp.automargin&&(g.allowAutoMargin(dt,Om(kp)),kp.mirror&&g.allowAutoMargin(dt,Lm(kp))),E.getComponentMethod("rangeslider","isVisible")(kp)&&g.allowAutoMargin(dt,Um(kp))}};function Om(dt){return dt._id+".automargin"}function Lm(dt){return Om(dt)+".mirror"}function Um(dt){return dt._id+".rangeslider"}ge.swap=function(dt,Fe){for(var Gp=Em(dt,Fe),kp=0;kp<Gp.length;kp++)Dm(dt,Gp[kp].x,Gp[kp].y)};function Em(dt,Fe){var Gp=[],kp,yp;for(kp=0;kp<Fe.length;kp++){var bp=[],Pp=dt._fullData[Fe[kp]].xaxis,s0=dt._fullData[Fe[kp]].yaxis;if(!(!Pp||!s0)){for(yp=0;yp<Gp.length;yp++)(Gp[yp].x.indexOf(Pp)!==-1||Gp[yp].y.indexOf(s0)!==-1)&&bp.push(yp);if(!bp.length){Gp.push({x:[Pp],y:[s0]});continue}var Rp=Gp[bp[0]],Vp;if(bp.length>1)for(yp=1;yp<bp.length;yp++)Vp=Gp[bp[yp]],lm(Rp.x,Vp.x),lm(Rp.y,Vp.y);lm(Rp.x,[Pp]),lm(Rp.y,[s0])}}return Gp}function lm(dt,Fe){for(var Gp=0;Gp<Fe.length;Gp++)dt.indexOf(Fe[Gp])===-1&&dt.push(Fe[Gp])}function Dm(dt,Fe,Gp){var kp=[],yp=[],bp=dt.layout,Pp,s0;for(Pp=0;Pp<Fe.length;Pp++)kp.push(ge.getFromId(dt,Fe[Pp]));for(Pp=0;Pp<Gp.length;Pp++)yp.push(ge.getFromId(dt,Gp[Pp]));var Rp=Object.keys(N),Vp=["anchor","domain","overlaying","position","side","tickangle","editType"],r0=["linear","log"];for(Pp=0;Pp<Rp.length;Pp++){var $p=Rp[Pp],P0=kp[0][$p],j0=yp[0][$p],tm=!0,wm=!1,bm=!1;if(!($p.charAt(0)==="_"||typeof P0=="function"||Vp.indexOf($p)!==-1)){for(s0=1;s0<kp.length&&tm;s0++){var Tm=kp[s0][$p];$p==="type"&&r0.indexOf(P0)!==-1&&r0.indexOf(Tm)!==-1&&P0!==Tm?wm=!0:Tm!==P0&&(tm=!1)}for(s0=1;s0<yp.length&&tm;s0++){var Rm=yp[s0][$p];$p==="type"&&r0.indexOf(j0)!==-1&&r0.indexOf(Rm)!==-1&&j0!==Rm?bm=!0:yp[s0][$p]!==j0&&(tm=!1)}tm&&(wm&&(bp[kp[0]._name].type="linear"),bm&&(bp[yp[0]._name].type="linear"),Zm(bp,$p,kp,yp,dt._fullLayout._dfltTitle))}}for(Pp=0;Pp<dt._fullLayout.annotations.length;Pp++){var Sm=dt._fullLayout.annotations[Pp];Fe.indexOf(Sm.xref)!==-1&&Gp.indexOf(Sm.yref)!==-1&&S.swapAttrs(bp.annotations[Pp],["?"])}}function Zm(dt,Fe,Gp,kp,yp){var bp=S.nestedProperty,Pp=bp(dt[Gp[0]._name],Fe).get(),s0=bp(dt[kp[0]._name],Fe).get(),Rp;for(Fe==="title"&&(Pp&&Pp.text===yp.x&&(Pp.text=yp.y),s0&&s0.text===yp.y&&(s0.text=yp.x)),Rp=0;Rp<Gp.length;Rp++)bp(dt,Gp[Rp]._name+"."+Fe).set(s0);for(Rp=0;Rp<kp.length;Rp++)bp(dt,kp[Rp]._name+"."+Fe).set(Pp)}function rv(dt){return dt._id==="angularaxis"}function zm(dt,Fe){for(var Gp=Fe._rangebreaks.length,kp=0;kp<Gp;kp++){var yp=Fe._rangebreaks[kp];if(dt>=yp.min&&dt<yp.max)return yp.max}return dt}function Ym(dt){return(dt.ticklabelposition||"").indexOf("inside")!==-1}function Km(dt,Fe){Ym(dt._anchorAxis||{})&&dt._hideCounterAxisInsideTickLabels&&dt._hideCounterAxisInsideTickLabels(Fe)}function _v(dt,Fe,Gp,kp){var yp=dt.anchor!=="free"&&(dt.overlaying===void 0||dt.overlaying===!1)?dt._id:dt.overlaying,bp;kp?bp=dt.side==="right"?Fe:-Fe:bp=Fe,yp in Gp||(Gp[yp]={}),dt.side in Gp[yp]||(Gp[yp][dt.side]=0),Gp[yp][dt.side]+=bp}function Hm(dt,Fe){return dt.autoshift?Fe[dt.overlaying][dt.side]:dt.shift||0}function uv(dt,Fe){return/%f/.test(Fe)?dt>=Te:/%L/.test(Fe)?dt>=be:/%[SX]/.test(Fe)?dt>=de:/%M/.test(Fe)?dt>=re:/%[HI]/.test(Fe)?dt>=xe:/%p/.test(Fe)?dt>=ve:/%[Aadejuwx]/.test(Fe)?dt>=fe:/%[UVW]/.test(Fe)?dt>=Se:/%[Bbm]/.test(Fe)?dt>=te:/%[q]/.test(Fe)?dt>=H:/%[Yy]/.test(Fe)?dt>=W:!0}}}),h_=a({"src/plots/cartesian/autorange_options_defaults.js"(pe,me){me.exports=function(v,g,E){var S,T;if(E){var C=g==="reversed"||g==="min reversed"||g==="max reversed";S=E[C?1:0],T=E[C?0:1]}var P=v("autorangeoptions.minallowed",T===null?S:void 0),p=v("autorangeoptions.maxallowed",S===null?T:void 0);P===void 0&&v("autorangeoptions.clipmin"),p===void 0&&v("autorangeoptions.clipmax"),v("autorangeoptions.include")}}}),cy=a({"src/plots/cartesian/range_defaults.js"(pe,me){var M=h_();me.exports=function(g,E,S,T){var C=E._template||{},P=E.type||C.type||"-";S("minallowed"),S("maxallowed");var p=S("range");if(!p){var Y;!T.noInsiderange&&P!=="log"&&(Y=S("insiderange"),Y&&(Y[0]===null||Y[1]===null)&&(E.insiderange=!1,Y=void 0),Y&&(p=S("range",Y)))}var N=E.getAutorangeDflt(p,T),j=S("autorange",N),ee;p&&(p[0]===null&&p[1]===null||(p[0]===null||p[1]===null)&&(j==="reversed"||j===!0)||p[0]!==null&&(j==="min"||j==="max reversed")||p[1]!==null&&(j==="max"||j==="min reversed"))&&(p=void 0,delete E.range,E.autorange=!0,ee=!0),ee||(N=E.getAutorangeDflt(p,T),j=S("autorange",N)),j&&(M(S,j,p),(P==="linear"||P==="-")&&S("rangemode")),E.cleanRange()}}}),ex=a({"node_modules/mouse-event-offset/index.js"(pe,me){var M={left:0,top:0};me.exports=v;function v(E,S,T){S=S||E.currentTarget||E.srcElement,Array.isArray(T)||(T=[0,0]);var C=E.clientX||0,P=E.clientY||0,p=g(S);return T[0]=C-p.left,T[1]=P-p.top,T}function g(E){return E===window||E===document||E===document.body?M:E.getBoundingClientRect()}}}),V_=a({"node_modules/has-passive-events/index.js"(pe,me){var M=jm();function v(){var g=!1;try{var E=Object.defineProperty({},"passive",{get:function(){g=!0}});window.addEventListener("test",null,E),window.removeEventListener("test",null,E)}catch{g=!1}return g}me.exports=M&&v()}}),Xx=a({"src/components/dragelement/align.js"(pe,me){me.exports=function(v,g,E,S,T){var C=(v-E)/(S-E),P=C+g/(S-E),p=(C+P)/2;return T==="left"||T==="bottom"?C:T==="center"||T==="middle"?p:T==="right"||T==="top"?P:C<2/3-p?C:P>4/3-p?P:p}}}),y2=a({"src/components/dragelement/cursor.js"(pe,me){var M=o0(),v=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];me.exports=function(E,S,T,C){return T==="left"?E=0:T==="center"?E=1:T==="right"?E=2:E=M.constrain(Math.floor(E*3),0,2),C==="bottom"?S=0:C==="middle"?S=1:C==="top"?S=2:S=M.constrain(Math.floor(S*3),0,2),v[S][E]}}}),_2=a({"src/components/dragelement/unhover.js"(pe,me){var M=dv(),v=zv(),g=u0().getGraphDiv,E=J(),S=me.exports={};S.wrapped=function(T,C,P){T=g(T),T._fullLayout&&v.clear(T._fullLayout._uid+E.HOVERID),S.raw(T,C,P)},S.raw=function(C,P){var p=C._fullLayout,Y=C._hoverdata;P||(P={}),!(P.target&&!C._dragged&&M.triggerHandler(C,"plotly_beforehover",P)===!1)&&(p._hoverlayer.selectAll("g").remove(),p._hoverlayer.selectAll("line").remove(),p._hoverlayer.selectAll("circle").remove(),C._hoverdata=void 0,P.target&&Y&&C.emit("plotly_unhover",{event:P,points:Y}))}}}),Gg=a({"src/components/dragelement/index.js"(pe,me){var M=ex(),v=iv(),g=V_(),E=o0().removeElement,S=wv(),T=me.exports={};T.align=Xx(),T.getCursor=y2();var C=_2();T.unhover=C.wrapped,T.unhoverRaw=C.raw,T.init=function(N){var j=N.gd,ee=1,G=j._context.doubleClickDelay,V=N.element,W,q,z,H,Z,ne,te,Se;j._mouseDownTime||(j._mouseDownTime=0),V.style.pointerEvents="all",V.onmousedown=xe,g?(V._ontouchstart&&V.removeEventListener("touchstart",V._ontouchstart),V._ontouchstart=xe,V.addEventListener("touchstart",xe,{passive:!1})):V.ontouchstart=xe;function fe(be,Te,ye){return Math.abs(be)<ye&&(be=0),Math.abs(Te)<ye&&(Te=0),[be,Te]}var ve=N.clampFn||fe;function xe(be){j._dragged=!1,j._dragging=!0;var Te=p(be);W=Te[0],q=Te[1],te=be.target,ne=be,Se=be.buttons===2||be.ctrlKey,typeof be.clientX>"u"&&typeof be.clientY>"u"&&(be.clientX=W,be.clientY=q),z=new Date().getTime(),z-j._mouseDownTime<G?ee+=1:(ee=1,j._mouseDownTime=z),N.prepFn&&N.prepFn(be,W,q),v&&!Se?(Z=P(),Z.style.cursor=window.getComputedStyle(V).cursor):v||(Z=document,H=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(V).cursor),document.addEventListener("mouseup",de),document.addEventListener("touchend",de),N.dragmode!==!1&&(be.preventDefault(),document.addEventListener("mousemove",re),document.addEventListener("touchmove",re,{passive:!1}))}function re(be){be.preventDefault();var Te=p(be),ye=N.minDrag||S.MINDRAG,De=ve(Te[0]-W,Te[1]-q,ye),Ue=De[0],he=De[1];(Ue||he)&&(j._dragged=!0,T.unhover(j,be)),j._dragged&&N.moveFn&&!Se&&(j._dragdata={element:V,dx:Ue,dy:he},N.moveFn(Ue,he))}function de(be){if(delete j._dragdata,N.dragmode!==!1&&(be.preventDefault(),document.removeEventListener("mousemove",re),document.removeEventListener("touchmove",re)),document.removeEventListener("mouseup",de),document.removeEventListener("touchend",de),v?E(Z):H&&(Z.documentElement.style.cursor=H,H=null),!j._dragging){j._dragged=!1;return}if(j._dragging=!1,new Date().getTime()-j._mouseDownTime>G&&(ee=Math.max(ee-1,1)),j._dragged)N.doneFn&&N.doneFn();else{var Te;ne.target===te?Te=ne:(Te={target:te,srcElement:te,toElement:te},Object.keys(ne).concat(Object.keys(ne.__proto__)).forEach(ye=>{var De=ne[ye];!Te[ye]&&typeof De!="function"&&(Te[ye]=De)})),N.clickFn&&N.clickFn(ee,Te),Se||te.dispatchEvent(new MouseEvent("click",be))}j._dragging=!1,j._dragged=!1}};function P(){var Y=document.createElement("div");Y.className="dragcover";var N=Y.style;return N.position="fixed",N.left=0,N.right=0,N.top=0,N.bottom=0,N.zIndex=999999999,N.background="none",document.body.appendChild(Y),Y}T.coverSlip=P;function p(Y){return M(Y.changedTouches?Y.changedTouches[0]:Y,document.body)}}}),$1=a({"src/lib/setcursor.js"(pe,me){me.exports=function(v,g){(v.attr("class")||"").split(" ").forEach(function(E){E.indexOf("cursor-")===0&&v.classed(E,!1)}),g&&v.classed("cursor-"+g,!0)}}}),Xy=a({"src/lib/override_cursor.js"(pe,me){var M=$1(),v="data-savedcursor",g="!!";me.exports=function(S,T){var C=S.attr(v);if(T){if(!C){for(var P=(S.attr("class")||"").split(" "),p=0;p<P.length;p++){var Y=P[p];Y.indexOf("cursor-")===0&&S.attr(v,Y.substr(7)).classed(Y,!1)}S.attr(v)||S.attr(v,g)}M(S,T)}else C&&(S.attr(v,null),C===g?M(S):M(S,C))}}}),q_=a({"src/components/legend/attributes.js"(pe,me){var M=B(),v=ue();me.exports={_isSubplotObj:!0,visible:{valType:"boolean",dflt:!0,editType:"legend"},bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:v.defaultLine,editType:"legend"},maxheight:{valType:"number",min:0,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:M({editType:"legend"}),grouptitlefont:M({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},entrywidth:{valType:"number",min:0,editType:"legend"},entrywidthmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels",editType:"legend"},indentation:{valType:"number",min:-15,dflt:0,editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend"},x:{valType:"number",editType:"legend"},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",editType:"legend"},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:M({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left","top center","top right"],editType:"legend"},editType:"legend"},editType:"legend"}}}),$y=a({"src/components/legend/helpers.js"(pe){pe.isGrouped=function(M){return(M.traceorder||"").indexOf("grouped")!==-1},pe.isVertical=function(M){return M.orientation!=="h"},pe.isReversed=function(M){return(M.traceorder||"").indexOf("reversed")!==-1}}}),$x=a({"src/components/legend/defaults.js"(pe,me){var M=jp(),v=o0(),g=Vm(),E=He(),S=q_(),T=d0(),C=$y();function P(p,Y,N,j){var ee=Y[p]||{},G=g.newContainer(N,p);function V(Do,Ae){return v.coerce(ee,G,S,Do,Ae)}var W=v.coerceFont(V,"font",N.font);V("bgcolor",N.paper_bgcolor),V("bordercolor");var q=V("visible");if(q){for(var z,H=function(Do,Ae){var ke=z._input,ge=z;return v.coerce(ke,ge,E,Do,Ae)},Z=N.font||{},ne=v.coerceFont(V,"grouptitlefont",Z,{overrideDflt:{size:Math.round(Z.size*1.1)}}),te=0,Se=!1,fe="normal",ve=(N.shapes||[]).filter(function(Do){return Do.showlegend}),xe=j.concat(ve).filter(function(Do){return p===(Do.legend||"legend")}),re=0;re<xe.length;re++)if(z=xe[re],!!z.visible){var de=z._isShape;(z.showlegend||z._dfltShowLegend&&!(z._module&&z._module.attributes&&z._module.attributes.showlegend&&z._module.attributes.showlegend.dflt===!1))&&(te++,z.showlegend&&(Se=!0,(!de&&M.traceIs(z,"pie-like")||z._input.showlegend===!0)&&te++),v.coerceFont(H,"legendgrouptitle.font",ne)),(!de&&M.traceIs(z,"bar")&&N.barmode==="stack"||["tonextx","tonexty"].indexOf(z.fill)!==-1)&&(fe=C.isGrouped({traceorder:fe})?"grouped+reversed":"reversed"),z.legendgroup!==void 0&&z.legendgroup!==""&&(fe=C.isReversed({traceorder:fe})?"reversed+grouped":"grouped")}var be=v.coerce(Y,N,T,"showlegend",Se&&te>(p==="legend"?1:0));if(be===!1&&(N[p]=void 0),!(be===!1&&!ee.uirevision)&&(V("uirevision",N.uirevision),be!==!1)){V("borderwidth");var Te=V("orientation"),ye=V("yref"),De=V("xref"),Ue=Te==="h",he=ye==="paper",Be=De==="paper",Ye,et,Qe,ft="left";Ue?(Ye=0,M.getComponentMethod("rangeslider","isVisible")(Y.xaxis)?he?(et=1.1,Qe="bottom"):(et=1,Qe="top"):he?(et=-.1,Qe="top"):(et=0,Qe="bottom")):(et=1,Qe="auto",Be?Ye=1.02:(Ye=1,ft="right")),v.coerce(ee,G,{x:{valType:"number",editType:"legend",min:Be?-2:0,max:Be?3:1,dflt:Ye}},"x"),v.coerce(ee,G,{y:{valType:"number",editType:"legend",min:he?-2:0,max:he?3:1,dflt:et}},"y"),V("traceorder",fe),C.isGrouped(N[p])&&V("tracegroupgap"),V("entrywidth"),V("entrywidthmode"),V("indentation"),V("itemsizing"),V("itemwidth"),V("itemclick"),V("itemdoubleclick"),V("groupclick"),V("xanchor",ft),V("yanchor",Qe),V("maxheight"),V("valign"),v.noneOrAll(ee,G,["x","y"]);var mn=V("title.text");if(mn){V("title.side",Ue?"left":"top");var ta=v.extendFlat({},W,{size:v.bigFont(W.size)});v.coerceFont(V,"title.font",ta)}}}}me.exports=function(Y,N,j){var ee,G=j.slice(),V=N.shapes;if(V)for(ee=0;ee<V.length;ee++){var W=V[ee];if(W.showlegend){var q={_input:W._input,visible:W.visible,showlegend:W.showlegend,legend:W.legend};G.push(q)}}var z=["legend"];for(ee=0;ee<G.length;ee++)v.pushUnique(z,G[ee].legend);for(N._legends=[],ee=0;ee<z.length;ee++){var H=z[ee];P(H,Y,N,G),N[H]&&N[H].visible&&(N[H]._id=H),N._legends.push(H)}}}}),tx=a({"src/components/legend/handle_click.js"(pe,me){var M=jp(),v=o0(),g=v.pushUnique,E=!0;me.exports=function(T,C,P){var p=C._fullLayout;if(C._dragged||C._editing)return;var Y=p.legend.itemclick,N=p.legend.itemdoubleclick,j=p.legend.groupclick;P===1&&Y==="toggle"&&N==="toggleothers"&&E&&C.data&&C._context.showTips&&v.notifier(v._(C,"Double-click on legend to isolate one trace"),"long"),E=!1;var ee;if(P===1?ee=Y:P===2&&(ee=N),!ee)return;var G=j==="togglegroup",V=p.hiddenlabels?p.hiddenlabels.slice():[],W=T.data()[0][0];if(W.groupTitle&&W.noClick)return;var q=C._fullData,z=(p.shapes||[]).filter(function(_r){return _r.showlegend}),H=q.concat(z),Z=W.trace;Z._isShape&&(Z=Z._fullInput);var ne=Z.legendgroup,te,Se,fe,ve,xe,re,de={},be=[],Te=[],ye=[];function De(_r,gs){var dr=be.indexOf(_r),Lo=de.visible;return Lo||(Lo=de.visible=[]),be.indexOf(_r)===-1&&(be.push(_r),dr=be.length-1),Lo[dr]=gs,dr}var Ue=(p.shapes||[]).map(function(_r){return _r._input}),he=!1;function Be(_r,gs){Ue[_r].visible=gs,he=!0}function Ye(_r,gs){if(!(W.groupTitle&&!G)){var dr=_r._fullInput||_r,Lo=dr._isShape,Cp=dr.index;Cp===void 0&&(Cp=dr._index);var Hp=dr.visible===!1?!1:gs;Lo?Be(Cp,Hp):De(Cp,Hp)}}var et=Z.legend,Qe=Z._fullInput,ft=Qe&&Qe._isShape;if(!ft&&M.traceIs(Z,"pie-like")){var mn=W.label,ta=V.indexOf(mn);if(ee==="toggle")ta===-1?V.push(mn):V.splice(ta,1);else if(ee==="toggleothers"){var Do=ta!==-1,Ae=[];for(te=0;te<C.calcdata.length;te++){var ke=C.calcdata[te];for(Se=0;Se<ke.length;Se++){var ge=ke[Se],Ce=ge.label;et===ke[0].trace.legend&&mn!==Ce&&(V.indexOf(Ce)===-1&&(Do=!0),g(V,Ce),Ae.push(Ce))}}if(!Do)for(var Je=0;Je<Ae.length;Je++){var Re=V.indexOf(Ae[Je]);Re!==-1&&V.splice(Re,1)}}M.call("_guiRelayout",C,"hiddenlabels",V)}else{var Q=ne&&ne.length,ce=[],Me;if(Q)for(te=0;te<H.length;te++)Me=H[te],Me.visible&&Me.legendgroup===ne&&ce.push(te);if(ee==="toggle"){var Le;switch(Z.visible){case!0:Le="legendonly";break;case!1:Le=!1;break;case"legendonly":Le=!0;break}if(Q)if(G)for(te=0;te<H.length;te++){var tt=H[te];tt.visible!==!1&&tt.legendgroup===ne&&Ye(tt,Le)}else Ye(Z,Le);else Ye(Z,Le)}else if(ee==="toggleothers"){var bt,Ct,yi,Fl,Yl,qp=!0;for(te=0;te<H.length;te++)if(Yl=H[te],bt=Yl===Z,yi=Yl.showlegend!==!0,!(bt||yi)&&(Ct=Q&&Yl.legendgroup===ne,!Ct&&Yl.legend===et&&Yl.visible===!0&&!M.traceIs(Yl,"notLegendIsolatable"))){qp=!1;break}for(te=0;te<H.length;te++)if(Yl=H[te],!(Yl.visible===!1||Yl.legend!==et)&&!M.traceIs(Yl,"notLegendIsolatable"))switch(Z.visible){case"legendonly":Ye(Yl,!0);break;case!0:Fl=qp?!0:"legendonly",bt=Yl===Z,yi=Yl.showlegend!==!0&&!Yl.legendgroup,Ct=bt||Q&&Yl.legendgroup===ne,Ye(Yl,Ct||yi?!0:Fl);break}}for(te=0;te<Te.length;te++)if(fe=Te[te],!!fe){var Fp=fe.constructUpdate(),Up=Object.keys(Fp);for(Se=0;Se<Up.length;Se++)ve=Up[Se],re=de[ve]=de[ve]||[],re[ye[te]]=Fp[ve]}for(xe=Object.keys(de),te=0;te<xe.length;te++)for(ve=xe[te],Se=0;Se<be.length;Se++)de[ve].hasOwnProperty(Se)||(de[ve][Se]=void 0);he?M.call("_guiUpdate",C,de,{shapes:Ue},be):M.call("_guiRestyle",C,de,be)}}}}),Cy=a({"src/components/legend/constants.js"(pe,me){me.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}}}),W_=a({"src/components/legend/get_legend_data.js"(pe,me){var M=jp(),v=$y();me.exports=function(E,S,T){var C=S._inHover,P=v.isGrouped(S),p=v.isReversed(S),Y={},N=[],j=!1,ee={},G=0,V=0,W,q;function z(Ye,et,Qe){if(S.visible!==!1&&!(T&&Ye!==S._id))if(et===""||!v.isGrouped(S)){var ft="~~i"+G;N.push(ft),Y[ft]=[Qe],G++}else N.indexOf(et)===-1?(N.push(et),j=!0,Y[et]=[Qe]):Y[et].push(Qe)}for(W=0;W<E.length;W++){var H=E[W],Z=H[0],ne=Z.trace,te=ne.legend,Se=ne.legendgroup;if(!(!C&&(!ne.visible||!ne.showlegend)))if(M.traceIs(ne,"pie-like"))for(ee[Se]||(ee[Se]={}),q=0;q<H.length;q++){var fe=H[q].label;ee[Se][fe]||(z(te,Se,{label:fe,color:H[q].color,i:H[q].i,trace:ne,pts:H[q].pts}),ee[Se][fe]=!0,V=Math.max(V,(fe||"").length))}else z(te,Se,Z),V=Math.max(V,(ne.name||"").length)}if(!N.length)return[];var ve=!j||!P,xe=[];for(W=0;W<N.length;W++){var re=Y[N[W]];ve?xe.push(re[0]):xe.push(re)}for(ve&&(xe=[xe]),W=0;W<xe.length;W++){var de=1/0;for(q=0;q<xe[W].length;q++){var be=xe[W][q].trace.legendrank;de>be&&(de=be)}xe[W][0]._groupMinRank=de,xe[W][0]._preGroupSort=W}var Te=function(Ye,et){return Ye[0]._groupMinRank-et[0]._groupMinRank||Ye[0]._preGroupSort-et[0]._preGroupSort},ye=function(Ye,et){return Ye.trace.legendrank-et.trace.legendrank||Ye._preSort-et._preSort};for(xe.forEach(function(Ye,et){Ye[0]._preGroupSort=et}),xe.sort(Te),W=0;W<xe.length;W++){xe[W].forEach(function(Ye,et){Ye._preSort=et}),xe[W].sort(ye);var De=xe[W][0].trace,Ue=null;for(q=0;q<xe[W].length;q++){var he=xe[W][q].trace.legendgrouptitle;if(he&&he.text){Ue=he,C&&(he.font=S._groupTitleFont);break}}if(p&&xe[W].reverse(),Ue){var Be=!1;for(q=0;q<xe[W].length;q++)if(M.traceIs(xe[W][q].trace,"pie-like")){Be=!0;break}xe[W].unshift({i:-1,groupTitle:Ue,noClick:Be,trace:{showlegend:De.showlegend,legendgroup:De.legendgroup,visible:S.groupclick==="toggleitem"?!0:De.visible}})}for(q=0;q<xe[W].length;q++)xe[W][q]=[xe[W][q]]}return S._lgroupsLength=xe.length,S._maxNameLength=V,xe}}}),d_=a({"src/traces/pie/helpers.js"(pe){var me=o0();function M(v){return v.indexOf("e")!==-1?v.replace(/[.]?0+e/,"e"):v.indexOf(".")!==-1?v.replace(/[.]?0+$/,""):v}pe.formatPiePercent=function(g,E){var S=M((g*100).toPrecision(3));return me.numSeparate(S,E)+"%"},pe.formatPieValue=function(g,E){var S=M(g.toPrecision(10));return me.numSeparate(S,E)},pe.getFirstFilled=function(g,E){if(me.isArrayOrTypedArray(g))for(var S=0;S<E.length;S++){var T=g[E[S]];if(T||T===0||T==="")return T}},pe.castOption=function(g,E){if(me.isArrayOrTypedArray(g))return pe.getFirstFilled(g,E);if(g)return g},pe.getRotationAngle=function(v){return(v==="auto"?0:v)*Math.PI/180}}}),Zx=a({"src/traces/pie/fill_one.js"(pe,me){var M=t1(),v=Oe();me.exports=function(E,S,T,C){var P=T.marker.pattern;P&&P.shape?M.pointStyle(E,T,C,S):v.fill(E,S.color)}}}),p_=a({"src/traces/pie/style_one.js"(pe,me){var M=Oe(),v=d_().castOption,g=Zx();me.exports=function(S,T,C,P){var p=C.marker.line,Y=v(p.color,T.pts)||M.defaultLine,N=v(p.width,T.pts)||0;S.call(g,T,C,P).style("stroke-width",N).call(M.stroke,Y)}}}),rx=a({"src/components/legend/style.js"(pe,me){var M=f(),v=jp(),g=o0(),E=g.strTranslate,S=t1(),T=Oe(),C=Q1().extractOpts,P=D1(),p=p_(),Y=d_().castOption,N=Cy(),j=12,ee=5,G=2,V=10,W=5;me.exports=function(ne,te,Se){var fe=te._fullLayout;Se||(Se=fe.legend);var ve=Se.itemsizing==="constant",xe=Se.itemwidth,re=(xe+N.itemGap*2)/2,de=E(re,0),be=function(Ae,ke,ge,Ce){var Je;if(Ae+1)Je=Ae;else if(ke&&ke.width>0)Je=ke.width;else return 0;return ve?Ce:Math.min(Je,ge)};ne.each(function(Ae){var ke=M.select(this),ge=g.ensureSingle(ke,"g","layers");ge.style("opacity",Ae[0].trace.opacity);var Ce=Se.indentation,Je=Se.valign,Re=Ae[0].lineHeight,Q=Ae[0].height;if(Je==="middle"&&Ce===0||!Re||!Q)ge.attr("transform",null);else{var ce={top:1,bottom:-1}[Je],Me=ce*(.5*(Re-Q+3))||0,Le=Se.indentation;ge.attr("transform",E(Le,Me))}var tt=ge.selectAll("g.legendfill").data([Ae]);tt.enter().append("g").classed("legendfill",!0);var bt=ge.selectAll("g.legendlines").data([Ae]);bt.enter().append("g").classed("legendlines",!0);var Ct=ge.selectAll("g.legendsymbols").data([Ae]);Ct.enter().append("g").classed("legendsymbols",!0),Ct.selectAll("g.legendpoints").data([Ae]).enter().append("g").classed("legendpoints",!0)}).each(Do).each(De).each(he).each(Ue).each(Ye).each(mn).each(ft).each(Te).each(ye).each(et).each(Qe);function Te(Ae){var ke=z(Ae),ge=ke.showFill,Ce=ke.showLine,Je=ke.showGradientLine,Re=ke.showGradientFill,Q=ke.anyFill,ce=ke.anyLine,Me=Ae[0],Le=Me.trace,tt,bt,Ct=C(Le),yi=Ct.colorscale,Fl=Ct.reversescale,Yl=function(Lo){if(Lo.size())if(ge)S.fillGroupStyle(Lo,te,!0);else{var Cp="legendfill-"+Le.uid;S.gradient(Lo,te,Cp,q(Fl),yi,"fill")}},qp=function(Lo){if(Lo.size()){var Cp="legendline-"+Le.uid;S.lineGroupStyle(Lo),S.gradient(Lo,te,Cp,q(Fl),yi,"stroke")}},Fp=P.hasMarkers(Le)||!Q?"M5,0":ce?"M5,-2":"M5,-3",Up=M.select(this),_r=Up.select(".legendfill").selectAll("path").data(ge||Re?[Ae]:[]);if(_r.enter().append("path").classed("js-fill",!0),_r.exit().remove(),_r.attr("d",Fp+"h"+xe+"v6h-"+xe+"z").call(Yl),Ce||Je){var gs=be(void 0,Le.line,V,ee);bt=g.minExtend(Le,{line:{width:gs}}),tt=[g.minExtend(Me,{trace:bt})]}var dr=Up.select(".legendlines").selectAll("path").data(Ce||Je?[tt]:[]);dr.enter().append("path").classed("js-line",!0),dr.exit().remove(),dr.attr("d",Fp+(Je?"l"+xe+",0.0001":"h"+xe)).call(Ce?S.lineGroupStyle:qp)}function ye(Ae){var ke=z(Ae),ge=ke.anyFill,Ce=ke.anyLine,Je=ke.showLine,Re=ke.showMarker,Q=Ae[0],ce=Q.trace,Me=!Re&&!Ce&&!ge&&P.hasText(ce),Le,tt;function bt(_r,gs,dr,Lo){var Cp=g.nestedProperty(ce,_r).get(),Hp=g.isArrayOrTypedArray(Cp)&&gs?gs(Cp):Cp;if(ve&&Hp&&Lo!==void 0&&(Hp=Lo),dr){if(Hp<dr[0])return dr[0];if(Hp>dr[1])return dr[1]}return Hp}function Ct(_r){return Q._distinct&&Q.index&&_r[Q.index]?_r[Q.index]:_r[0]}if(Re||Me||Je){var yi={},Fl={};if(Re){yi.mc=bt("marker.color",Ct),yi.mx=bt("marker.symbol",Ct),yi.mo=bt("marker.opacity",g.mean,[.2,1]),yi.mlc=bt("marker.line.color",Ct),yi.mlw=bt("marker.line.width",g.mean,[0,5],G),Fl.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var Yl=bt("marker.size",g.mean,[2,16],j);yi.ms=Yl,Fl.marker.size=Yl}Je&&(Fl.line={width:bt("line.width",Ct,[0,10],ee)}),Me&&(yi.tx="Aa",yi.tp=bt("textposition",Ct),yi.ts=10,yi.tc=bt("textfont.color",Ct),yi.tf=bt("textfont.family",Ct),yi.tw=bt("textfont.weight",Ct),yi.ty=bt("textfont.style",Ct),yi.tv=bt("textfont.variant",Ct),yi.tC=bt("textfont.textcase",Ct),yi.tE=bt("textfont.lineposition",Ct),yi.tS=bt("textfont.shadow",Ct)),Le=[g.minExtend(Q,yi)],tt=g.minExtend(ce,Fl),tt.selectedpoints=null,tt.texttemplate=null}var qp=M.select(this).select("g.legendpoints"),Fp=qp.selectAll("path.scatterpts").data(Re?Le:[]);Fp.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",de),Fp.exit().remove(),Fp.call(S.pointStyle,tt,te),Re&&(Le[0].mrc=3);var Up=qp.selectAll("g.pointtext").data(Me?Le:[]);Up.enter().append("g").classed("pointtext",!0).append("text").attr("transform",de),Up.exit().remove(),Up.selectAll("text").call(S.textPointStyle,tt,te)}function De(Ae){var ke=Ae[0].trace,ge=ke.type==="waterfall";if(Ae[0]._distinct&&ge){var Ce=Ae[0].trace[Ae[0].dir].marker;return Ae[0].mc=Ce.color,Ae[0].mlw=Ce.line.width,Ae[0].mlc=Ce.line.color,Be(Ae,this,"waterfall")}var Je=[];ke.visible&&ge&&(Je=Ae[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var Re=M.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(Je);Re.enter().append("path").classed("legendwaterfall",!0).attr("transform",de).style("stroke-miterlimit",1),Re.exit().remove(),Re.each(function(Q){var ce=M.select(this),Me=ke[Q[0]].marker,Le=be(void 0,Me.line,W,G);ce.attr("d",Q[1]).style("stroke-width",Le+"px").call(T.fill,Me.color),Le&&ce.call(T.stroke,Me.line.color)})}function Ue(Ae){Be(Ae,this)}function he(Ae){Be(Ae,this,"funnel")}function Be(Ae,ke,ge){var Ce=Ae[0].trace,Je=Ce.marker||{},Re=Je.line||{},Q=Je.cornerradius?"M6,3a3,3,0,0,1-3,3H-3a3,3,0,0,1-3-3V-3a3,3,0,0,1,3-3H3a3,3,0,0,1,3,3Z":"M6,6H-6V-6H6Z",ce=ge?Ce.visible&&Ce.type===ge:v.traceIs(Ce,"bar"),Me=M.select(ke).select("g.legendpoints").selectAll("path.legend"+ge).data(ce?[Ae]:[]);Me.enter().append("path").classed("legend"+ge,!0).attr("d",Q).attr("transform",de),Me.exit().remove(),Me.each(function(Le){var tt=M.select(this),bt=Le[0],Ct=be(bt.mlw,Je.line,W,G);tt.style("stroke-width",Ct+"px");var yi=bt.mcc;if(!Se._inHover&&"mc"in bt){var Fl=C(Je),Yl=Fl.mid;Yl===void 0&&(Yl=(Fl.max+Fl.min)/2),yi=S.tryColorscale(Je,"")(Yl)}var qp=yi||bt.mc||Je.color,Fp=Je.pattern,Up=S.getPatternAttr,_r=Fp&&(Up(Fp.shape,0,"")||Up(Fp.path,0,""));if(_r){var gs=Up(Fp.bgcolor,0,null),dr=Up(Fp.fgcolor,0,null),Lo=Fp.fgopacity,Cp=H(Fp.size,8,10),Hp=H(Fp.solidity,.5,1),e0="legend-"+Ce.uid;tt.call(S.pattern,"legend",te,e0,_r,Cp,Hp,yi,Fp.fillmode,gs,dr,Lo)}else tt.call(T.fill,qp);Ct&&T.stroke(tt,bt.mlc||Re.color)})}function Ye(Ae){var ke=Ae[0].trace,ge=M.select(this).select("g.legendpoints").selectAll("path.legendbox").data(ke.visible&&v.traceIs(ke,"box-violin")?[Ae]:[]);ge.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",de),ge.exit().remove(),ge.each(function(){var Ce=M.select(this);if((ke.boxpoints==="all"||ke.points==="all")&&T.opacity(ke.fillcolor)===0&&T.opacity((ke.line||{}).color)===0){var Je=g.minExtend(ke,{marker:{size:ve?j:g.constrain(ke.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});ge.call(S.pointStyle,Je,te)}else{var Re=be(void 0,ke.line,W,G);Ce.style("stroke-width",Re+"px").call(T.fill,ke.fillcolor),Re&&T.stroke(Ce,ke.line.color)}})}function et(Ae){var ke=Ae[0].trace,ge=M.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(ke.visible&&ke.type==="candlestick"?[Ae,Ae]:[]);ge.enter().append("path").classed("legendcandle",!0).attr("d",function(Ce,Je){return Je?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",de).style("stroke-miterlimit",1),ge.exit().remove(),ge.each(function(Ce,Je){var Re=M.select(this),Q=ke[Je?"increasing":"decreasing"],ce=be(void 0,Q.line,W,G);Re.style("stroke-width",ce+"px").call(T.fill,Q.fillcolor),ce&&T.stroke(Re,Q.line.color)})}function Qe(Ae){var ke=Ae[0].trace,ge=M.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(ke.visible&&ke.type==="ohlc"?[Ae,Ae]:[]);ge.enter().append("path").classed("legendohlc",!0).attr("d",function(Ce,Je){return Je?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",de).style("stroke-miterlimit",1),ge.exit().remove(),ge.each(function(Ce,Je){var Re=M.select(this),Q=ke[Je?"increasing":"decreasing"],ce=be(void 0,Q.line,W,G);Re.style("fill","none").call(S.dashLine,Q.line.dash,ce),ce&&T.stroke(Re,Q.line.color)})}function ft(Ae){ta(Ae,this,"pie")}function mn(Ae){ta(Ae,this,"funnelarea")}function ta(Ae,ke,ge){var Ce=Ae[0],Je=Ce.trace,Re=ge?Je.visible&&Je.type===ge:v.traceIs(Je,ge),Q=M.select(ke).select("g.legendpoints").selectAll("path.legend"+ge).data(Re?[Ae]:[]);if(Q.enter().append("path").classed("legend"+ge,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",de),Q.exit().remove(),Q.size()){var ce=Je.marker||{},Me=be(Y(ce.line.width,Ce.pts),ce.line,W,G),Le="pieLike",tt=g.minExtend(Je,{marker:{line:{width:Me}}},Le),bt=g.minExtend(Ce,{trace:tt},Le);p(Q,bt,tt,te)}}function Do(Ae){var ke=Ae[0].trace,ge,Ce=[];if(ke.visible)switch(ke.type){case"histogram2d":case"heatmap":Ce=[["M-15,-2V4H15V-2Z"]],ge=!0;break;case"choropleth":case"choroplethmapbox":case"choroplethmap":Ce=[["M-6,-6V6H6V-6Z"]],ge=!0;break;case"densitymapbox":case"densitymap":Ce=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],ge="radial";break;case"cone":Ce=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],ge=!1;break;case"streamtube":Ce=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],ge=!1;break;case"surface":Ce=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],ge=!0;break;case"mesh3d":Ce=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],ge=!1;break;case"volume":Ce=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],ge=!0;break;case"isosurface":Ce=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],ge=!1;break}var Je=M.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(Ce);Je.enter().append("path").classed("legend3dandfriends",!0).attr("transform",de).style("stroke-miterlimit",1),Je.exit().remove(),Je.each(function(Re,Q){var ce=M.select(this),Me=C(ke),Le=Me.colorscale,tt=Me.reversescale,bt=function(Yl){if(Yl.size()){var qp="legendfill-"+ke.uid;S.gradient(Yl,te,qp,q(tt,ge==="radial"),Le,"fill")}},Ct;if(Le){if(!ge){var Fl=Le.length;Ct=Q===0?Le[tt?Fl-1:0][1]:Q===1?Le[tt?0:Fl-1][1]:Le[Math.floor((Fl-1)/2)][1]}}else{var yi=ke.vertexcolor||ke.facecolor||ke.color;Ct=g.isArrayOrTypedArray(yi)?yi[Q]||yi[0]:yi}ce.attr("d",Re[0]),Ct?ce.call(T.fill,Ct):ce.call(bt)})}};function q(Z,ne){var te=ne?"radial":"horizontal";return te+(Z?"":"reversed")}function z(Z){var ne=Z[0].trace,te=ne.contours,Se=P.hasLines(ne),fe=P.hasMarkers(ne),ve=ne.visible&&ne.fill&&ne.fill!=="none",xe=!1,re=!1;if(te){var de=te.coloring;de==="lines"?xe=!0:Se=de==="none"||de==="heatmap"||te.showlines,te.type==="constraint"?ve=te._operation!=="=":(de==="fill"||de==="heatmap")&&(re=!0)}return{showMarker:fe,showLine:Se,showFill:ve,showGradientLine:xe,showGradientFill:re,anyLine:Se||xe,anyFill:ve||re}}function H(Z,ne,te){return Z&&g.isArrayOrTypedArray(Z)?ne:Z>te?te:Z}}}),m_=a({"src/components/legend/draw.js"(pe,me){var M=f(),v=o0(),g=p1(),E=jp(),S=dv(),T=Gg(),C=t1(),P=Oe(),p=v1(),Y=tx(),N=Cy(),j=f1(),ee=j.LINE_SPACING,G=j.FROM_TL,V=j.FROM_BR,W=W_(),q=rx(),z=$y(),H=1,Z=/^legend[0-9]*$/;me.exports=function(et,Qe){if(Qe)te(et,Qe);else{var ft=et._fullLayout,mn=ft._legends,ta=ft._infolayer.selectAll('[class^="legend"]');ta.each(function(){var ge=M.select(this),Ce=ge.attr("class"),Je=Ce.split(" ")[0];Je.match(Z)&&mn.indexOf(Je)===-1&&ge.remove()});for(var Do=0;Do<mn.length;Do++){var Ae=mn[Do],ke=et._fullLayout[Ae];te(et,ke)}}};function ne(Ye,et,Qe){if(!(et.title.side!=="top center"&&et.title.side!=="top right")){var ft=et.title.font,mn=ft.size*ee,ta=0,Do=Ye.node(),Ae=C.bBox(Do).width;et.title.side==="top center"?ta=.5*(et._width-2*Qe-2*N.titlePad-Ae):et.title.side==="top right"&&(ta=et._width-2*Qe-2*N.titlePad-Ae),p.positionText(Ye,Qe+N.titlePad+ta,Qe+mn)}}function te(Ye,et){var Qe=et||{},ft=Ye._fullLayout,mn=Be(Qe),ta,Do,Ae=Qe._inHover;if(Ae?(Do=Qe.layer,ta="hover"):(Do=ft._infolayer,ta=mn),!!Do){ta+=ft._uid,Ye._legendMouseDownTime||(Ye._legendMouseDownTime=0);var ke;if(Ae){if(!Qe.entries)return;ke=W(Qe.entries,Qe)}else{for(var ge=(Ye.calcdata||[]).slice(),Ce=ft.shapes,Je=0;Je<Ce.length;Je++){var Re=Ce[Je];if(Re.showlegend){var Q={_isShape:!0,_fullInput:Re,index:Re._index,name:Re.name||Re.label.text||"shape "+Re._index,legend:Re.legend,legendgroup:Re.legendgroup,legendgrouptitle:Re.legendgrouptitle,legendrank:Re.legendrank,legendwidth:Re.legendwidth,showlegend:Re.showlegend,visible:Re.visible,opacity:Re.opacity,mode:Re.type==="line"?"lines":"markers",line:Re.line,marker:{line:Re.line,color:Re.fillcolor,size:12,symbol:Re.type==="rect"?"square":Re.type==="circle"?"circle":"hexagon2"}};ge.push([{trace:Q}])}}ke=ft.showlegend&&W(ge,Qe,ft._legends.length>1)}var ce=ft.hiddenlabels||[];if(!Ae&&(!ft.showlegend||!ke.length))return Do.selectAll("."+mn).remove(),ft._topdefs.select("#"+ta).remove(),g.autoMargin(Ye,mn);var Me=v.ensureSingle(Do,"g",mn,function(Fp){Ae||Fp.attr("pointer-events","all")}),Le=v.ensureSingleById(ft._topdefs,"clipPath",ta,function(Fp){Fp.append("rect")}),tt=v.ensureSingle(Me,"rect","bg",function(Fp){Fp.attr("shape-rendering","crispEdges")});tt.call(P.stroke,Qe.bordercolor).call(P.fill,Qe.bgcolor).style("stroke-width",Qe.borderwidth+"px");var bt=v.ensureSingle(Me,"g","scrollbox"),Ct=Qe.title;Qe._titleWidth=0,Qe._titleHeight=0;var yi;Ct.text?(yi=v.ensureSingle(bt,"text",mn+"titletext"),yi.attr("text-anchor","start").call(C.font,Ct.font).text(Ct.text),de(yi,bt,Ye,Qe,H)):bt.selectAll("."+mn+"titletext").remove();var Fl=v.ensureSingle(Me,"rect","scrollbar",function(Fp){Fp.attr(N.scrollBarEnterAttrs).call(P.fill,N.scrollBarColor)}),Yl=bt.selectAll("g.groups").data(ke);Yl.enter().append("g").attr("class","groups"),Yl.exit().remove();var qp=Yl.selectAll("g.traces").data(v.identity);qp.enter().append("g").attr("class","traces"),qp.exit().remove(),qp.style("opacity",function(Fp){var Up=Fp[0].trace;return E.traceIs(Up,"pie-like")?ce.indexOf(Fp[0].label)!==-1?.5:1:Up.visible==="legendonly"?.5:1}).each(function(){M.select(this).call(ve,Ye,Qe)}).call(q,Ye,Qe).each(function(){Ae||M.select(this).call(re,Ye,mn)}),v.syncOrAsync([g.previousPromises,function(){return ye(Ye,Yl,qp,Qe)},function(){var Fp=ft._size,Up=Qe.borderwidth,_r=Qe.xref==="paper",gs=Qe.yref==="paper";if(Ct.text&&ne(yi,Qe,Up),!Ae){var dr,Lo;_r?dr=Fp.l+Fp.w*Qe.x-G[Ue(Qe)]*Qe._width:dr=ft.width*Qe.x-G[Ue(Qe)]*Qe._width,gs?Lo=Fp.t+Fp.h*(1-Qe.y)-G[he(Qe)]*Qe._effHeight:Lo=ft.height*(1-Qe.y)-G[he(Qe)]*Qe._effHeight;var Cp=De(Ye,mn,dr,Lo);if(Cp)return;if(ft.margin.autoexpand){var Hp=dr,e0=Lo;dr=_r?v.constrain(dr,0,ft.width-Qe._width):Hp,Lo=gs?v.constrain(Lo,0,ft.height-Qe._effHeight):e0,dr!==Hp&&v.log("Constrain "+mn+".x to make legend fit inside graph"),Lo!==e0&&v.log("Constrain "+mn+".y to make legend fit inside graph")}C.setTranslate(Me,dr,Lo)}if(Fl.on(".drag",null),Me.on("wheel",null),Ae||Qe._height<=Qe._maxHeight||Ye._context.staticPlot){var t0=Qe._effHeight;Ae&&(t0=Qe._height),tt.attr({width:Qe._width-Up,height:t0-Up,x:Up/2,y:Up/2}),C.setTranslate(bt,0,0),Le.select("rect").attr({width:Qe._width-2*Up,height:t0-2*Up,x:Up,y:Up}),C.setClipUrl(bt,ta,Ye),C.setRect(Fl,0,0,0,0),delete Qe._scrollY}else{var n0=Math.max(N.scrollBarMinHeight,Qe._effHeight*Qe._effHeight/Qe._height),y0=Qe._effHeight-n0-2*N.scrollBarMargin,h0=Qe._height-Qe._effHeight,I0=y0/h0,Kp=Math.min(Qe._scrollY||0,h0);tt.attr({width:Qe._width-2*Up+N.scrollBarWidth+N.scrollBarMargin,height:Qe._effHeight-Up,x:Up/2,y:Up/2}),Le.select("rect").attr({width:Qe._width-2*Up+N.scrollBarWidth+N.scrollBarMargin,height:Qe._effHeight-2*Up,x:Up,y:Up+Kp}),C.setClipUrl(bt,ta,Ye),Ve(Kp,n0,I0),Me.on("wheel",function(){Kp=v.constrain(Qe._scrollY+M.event.deltaY/y0*h0,0,h0),Ve(Kp,n0,I0),Kp!==0&&Kp!==h0&&M.event.preventDefault()});var B0,em,k0,J0=function(Sp,Ip,Jp){var m0=(Jp-Ip)/I0+Sp;return v.constrain(m0,0,h0)},vs=function(Sp,Ip,Jp){var m0=(Ip-Jp)/I0+Sp;return v.constrain(m0,0,h0)},jl=M.behavior.drag().on("dragstart",function(){var Sp=M.event.sourceEvent;Sp.type==="touchstart"?B0=Sp.changedTouches[0].clientY:B0=Sp.clientY,k0=Kp}).on("drag",function(){var Sp=M.event.sourceEvent;Sp.buttons===2||Sp.ctrlKey||(Sp.type==="touchmove"?em=Sp.changedTouches[0].clientY:em=Sp.clientY,Kp=J0(k0,B0,em),Ve(Kp,n0,I0))});Fl.call(jl);var zl=M.behavior.drag().on("dragstart",function(){var Sp=M.event.sourceEvent;Sp.type==="touchstart"&&(B0=Sp.changedTouches[0].clientY,k0=Kp)}).on("drag",function(){var Sp=M.event.sourceEvent;Sp.type==="touchmove"&&(em=Sp.changedTouches[0].clientY,Kp=vs(k0,B0,em),Ve(Kp,n0,I0))});bt.call(zl)}function Ve(Sp,Ip,Jp){Qe._scrollY=Ye._fullLayout[mn]._scrollY=Sp,C.setTranslate(bt,0,-Sp),C.setRect(Fl,Qe._width,N.scrollBarMargin+Sp*Jp,N.scrollBarWidth,Ip),Le.select("rect").attr("y",Up+Sp)}if(Ye._context.edits.legendPosition){var pn,ci,_n,Tp;Me.classed("cursor-move",!0),T.init({element:Me.node(),gd:Ye,prepFn:function(Sp){if(Sp.target!==Fl.node()){var Ip=C.getTranslate(Me);_n=Ip.x,Tp=Ip.y}},moveFn:function(Sp,Ip){if(_n!==void 0&&Tp!==void 0){var Jp=_n+Sp,m0=Tp+Ip;C.setTranslate(Me,Jp,m0),pn=T.align(Jp,Qe._width,Fp.l,Fp.l+Fp.w,Qe.xanchor),ci=T.align(m0+Qe._height,-Qe._height,Fp.t+Fp.h,Fp.t,Qe.yanchor)}},doneFn:function(){if(pn!==void 0&&ci!==void 0){var Sp={};Sp[mn+".x"]=pn,Sp[mn+".y"]=ci,E.call("_guiRelayout",Ye,Sp)}},clickFn:function(Sp,Ip){var Jp=Do.selectAll("g.traces").filter(function(){var m0=this.getBoundingClientRect();return Ip.clientX>=m0.left&&Ip.clientX<=m0.right&&Ip.clientY>=m0.top&&Ip.clientY<=m0.bottom});Jp.size()>0&&fe(Ye,Me,Jp,Sp,Ip)}})}}],Ye)}}function Se(Ye,et,Qe){var ft=Ye[0],mn=ft.width,ta=et.entrywidthmode,Do=ft.trace.legendwidth||et.entrywidth;return ta==="fraction"?et._maxWidth*Do:Qe+(Do||mn)}function fe(Ye,et,Qe,ft,mn){var ta=Qe.data()[0][0].trace,Do={event:mn,node:Qe.node(),curveNumber:ta.index,expandedIndex:ta.index,data:Ye.data,layout:Ye.layout,frames:Ye._transitionData._frames,config:Ye._context,fullData:Ye._fullData,fullLayout:Ye._fullLayout};ta._group&&(Do.group=ta._group),E.traceIs(ta,"pie-like")&&(Do.label=Qe.datum()[0].label);var Ae=S.triggerHandler(Ye,"plotly_legendclick",Do);if(ft===1){if(Ae===!1)return;et._clickTimeout=setTimeout(function(){Ye._fullLayout&&Y(Qe,Ye,ft)},Ye._context.doubleClickDelay)}else if(ft===2){et._clickTimeout&&clearTimeout(et._clickTimeout),Ye._legendMouseDownTime=0;var ke=S.triggerHandler(Ye,"plotly_legenddoubleclick",Do);ke!==!1&&Ae!==!1&&Y(Qe,Ye,ft)}}function ve(Ye,et,Qe){var ft=Be(Qe),mn=Ye.data()[0][0],ta=mn.trace,Do=E.traceIs(ta,"pie-like"),Ae=!Qe._inHover&&et._context.edits.legendText&&!Do,ke=Qe._maxNameLength,ge,Ce;mn.groupTitle?(ge=mn.groupTitle.text,Ce=mn.groupTitle.font):(Ce=Qe.font,Qe.entries?ge=mn.text:(ge=Do?mn.label:ta.name,ta._meta&&(ge=v.templateString(ge,ta._meta))));var Je=v.ensureSingle(Ye,"text",ft+"text");Je.attr("text-anchor","start").call(C.font,Ce).text(Ae?xe(ge,ke):ge);var Re=Qe.indentation+Qe.itemwidth+N.itemGap*2;p.positionText(Je,Re,0),Ae?Je.call(p.makeEditable,{gd:et,text:ge}).call(de,Ye,et,Qe).on("edit",function(Q){this.text(xe(Q,ke)).call(de,Ye,et,Qe);var ce=mn.trace._fullInput||{},Me={};return Me.name=Q,ce._isShape?E.call("_guiRelayout",et,"shapes["+ta.index+"].name",Me.name):E.call("_guiRestyle",et,Me,ta.index)}):de(Je,Ye,et,Qe)}function xe(Ye,et){var Qe=Math.max(4,et);if(Ye&&Ye.trim().length>=Qe/2)return Ye;Ye=Ye||"";for(var ft=Qe-Ye.length;ft>0;ft--)Ye+=" ";return Ye}function re(Ye,et,Qe){var ft=et._context.doubleClickDelay,mn,ta=1,Do=v.ensureSingle(Ye,"rect",Qe+"toggle",function(Ae){et._context.staticPlot||Ae.style("cursor","pointer").attr("pointer-events","all"),Ae.call(P.fill,"rgba(0,0,0,0)")});et._context.staticPlot||(Do.on("mousedown",function(){mn=new Date().getTime(),mn-et._legendMouseDownTime<ft?ta+=1:(ta=1,et._legendMouseDownTime=mn)}),Do.on("mouseup",function(){if(!(et._dragged||et._editing)){var Ae=et._fullLayout[Qe];new Date().getTime()-et._legendMouseDownTime>ft&&(ta=Math.max(ta-1,1)),fe(et,Ae,Ye,ta,M.event)}}))}function de(Ye,et,Qe,ft,mn){ft._inHover&&Ye.attr("data-notex",!0),p.convertToTspans(Ye,Qe,function(){be(et,Qe,ft,mn)})}function be(Ye,et,Qe,ft){var mn=Ye.data()[0][0];if(!Qe._inHover&&mn&&!mn.trace.showlegend){Ye.remove();return}var ta=Ye.select("g[class*=math-group]"),Do=ta.node(),Ae=Be(Qe);Qe||(Qe=et._fullLayout[Ae]);var ke=Qe.borderwidth,ge;ft===H?ge=Qe.title.font:mn.groupTitle?ge=mn.groupTitle.font:ge=Qe.font;var Ce=ge.size*ee,Je,Re;if(Do){var Q=C.bBox(Do);Je=Q.height,Re=Q.width,ft===H?C.setTranslate(ta,ke,ke+Je*.75):C.setTranslate(ta,0,Je*.25)}else{var ce="."+Ae+(ft===H?"title":"")+"text",Me=Ye.select(ce),Le=p.lineCount(Me),tt=Me.node();if(Je=Ce*Le,Re=tt?C.bBox(tt).width:0,ft===H)Qe.title.side==="left"&&(Re+=N.itemGap*2),p.positionText(Me,ke+N.titlePad,ke+Ce);else{var bt=N.itemGap*2+Qe.indentation+Qe.itemwidth;mn.groupTitle&&(bt=N.itemGap,Re-=Qe.indentation+Qe.itemwidth),p.positionText(Me,bt,-Ce*((Le-1)/2-.3))}}ft===H?(Qe._titleWidth=Re,Qe._titleHeight=Je):(mn.lineHeight=Ce,mn.height=Math.max(Je,16)+3,mn.width=Re)}function Te(Ye){var et=0,Qe=0,ft=Ye.title.side;return ft&&(ft.indexOf("left")!==-1&&(et=Ye._titleWidth),ft.indexOf("top")!==-1&&(Qe=Ye._titleHeight)),[et,Qe]}function ye(Ye,et,Qe,ft){var mn=Ye._fullLayout,ta=Be(ft);ft||(ft=mn[ta]);var Do=mn._size,Ae=z.isVertical(ft),ke=z.isGrouped(ft),ge=ft.entrywidthmode==="fraction",Ce=ft.borderwidth,Je=2*Ce,Re=N.itemGap,Q=ft.indentation+ft.itemwidth+Re*2,ce=2*(Ce+Re),Me=he(ft),Le=ft.y<0||ft.y===0&&Me==="top",tt=ft.y>1||ft.y===1&&Me==="bottom",bt=ft.tracegroupgap,Ct={};const{orientation:yi,yref:Fl}=ft;let{maxheight:Yl}=ft;const qp=Le||tt||yi!=="v"||Fl!=="paper";Yl||(Yl=qp?.5:1);const Fp=qp?mn.height:Do.h;ft._maxHeight=Math.max(Yl>1?Yl:Yl*Fp,30);var Up=0;ft._width=0,ft._height=0;var _r=Te(ft);if(Ae)Qe.each(function(Ve){var pn=Ve[0].height;C.setTranslate(this,Ce+_r[0],Ce+_r[1]+ft._height+pn/2+Re),ft._height+=pn,ft._width=Math.max(ft._width,Ve[0].width)}),Up=Q+ft._width,ft._width+=Re+Q+Je,ft._height+=ce,ke&&(et.each(function(Ve,pn){C.setTranslate(this,0,pn*ft.tracegroupgap)}),ft._height+=(ft._lgroupsLength-1)*ft.tracegroupgap);else{var gs=Ue(ft),dr=ft.x<0||ft.x===0&&gs==="right",Lo=ft.x>1||ft.x===1&&gs==="left",Cp=tt||Le,Hp=mn.width/2;ft._maxWidth=Math.max(dr?Cp&&gs==="left"?Do.l+Do.w:Hp:Lo?Cp&&gs==="right"?Do.r+Do.w:Hp:Do.w,2*Q);var e0=0,t0=0;Qe.each(function(Ve){var pn=Se(Ve,ft,Q);e0=Math.max(e0,pn),t0+=pn}),Up=null;var n0=0;if(ke){var y0=0,h0=0,I0=0;et.each(function(){var Ve=0,pn=0;M.select(this).selectAll("g.traces").each(function(_n){var Tp=Se(_n,ft,Q),Sp=_n[0].height;C.setTranslate(this,_r[0],_r[1]+Ce+Re+Sp/2+pn),pn+=Sp,Ve=Math.max(Ve,Tp),Ct[_n[0].trace.legendgroup]=Ve});var ci=Ve+Re;h0>0&&ci+Ce+h0>ft._maxWidth?(n0=Math.max(n0,h0),h0=0,I0+=y0+bt,y0=pn):y0=Math.max(y0,pn),C.setTranslate(this,h0,I0),h0+=ci}),ft._width=Math.max(n0,h0)+Ce,ft._height=I0+y0+ce}else{var Kp=Qe.size(),B0=t0+Je+(Kp-1)*Re<ft._maxWidth,em=0,k0=0,J0=0,vs=0;Qe.each(function(Ve){var pn=Ve[0].height,ci=Se(Ve,ft,Q),_n=B0?ci:e0;ge||(_n+=Re),_n+Ce+k0-Re>=ft._maxWidth&&(n0=Math.max(n0,vs),k0=0,J0+=em,ft._height+=em,em=0),C.setTranslate(this,_r[0]+Ce+k0,_r[1]+Ce+J0+pn/2+Re),vs=k0+ci+Re,k0+=_n,em=Math.max(em,pn)}),B0?(ft._width=k0+Je,ft._height=em+ce):(ft._width=Math.max(n0,vs)+Je,ft._height+=em+ce)}}ft._width=Math.ceil(Math.max(ft._width+_r[0],ft._titleWidth+2*(Ce+N.titlePad))),ft._height=Math.ceil(Math.max(ft._height+_r[1],ft._titleHeight+2*(Ce+N.itemGap))),ft._effHeight=Math.min(ft._height,ft._maxHeight);var jl=Ye._context.edits,zl=jl.legendText||jl.legendPosition;Qe.each(function(Ve){var pn=M.select(this).select("."+ta+"toggle"),ci=Ve[0].height,_n=Ve[0].trace.legendgroup,Tp=Se(Ve,ft,Q);ke&&_n!==""&&(Tp=Ct[_n]);var Sp=zl?Q:Up||Tp;!Ae&&!ge&&(Sp+=Re/2),C.setRect(pn,0,-ci/2,Sp,ci)})}function De(Ye,et,Qe,ft){var mn=Ye._fullLayout,ta=mn[et],Do=Ue(ta),Ae=he(ta),ke=ta.xref==="paper",ge=ta.yref==="paper";Ye._fullLayout._reservedMargin[et]={};var Ce=ta.y<.5?"b":"t",Je=ta.x<.5?"l":"r",Re={r:mn.width-Qe,l:Qe+ta._width,b:mn.height-ft,t:ft+ta._effHeight};if(ke&&ge)return g.autoMargin(Ye,et,{x:ta.x,y:ta.y,l:ta._width*G[Do],r:ta._width*V[Do],b:ta._effHeight*V[Ae],t:ta._effHeight*G[Ae]});ke?Ye._fullLayout._reservedMargin[et][Ce]=Re[Ce]:ge||ta.orientation==="v"?Ye._fullLayout._reservedMargin[et][Je]=Re[Je]:Ye._fullLayout._reservedMargin[et][Ce]=Re[Ce]}function Ue(Ye){return v.isRightAnchor(Ye)?"right":v.isCenterAnchor(Ye)?"center":"left"}function he(Ye){return v.isBottomAnchor(Ye)?"bottom":v.isMiddleAnchor(Ye)?"middle":"top"}function Be(Ye){return Ye._id||"legend"}}}),x2=a({"src/components/fx/hover.js"(pe){var me=f(),M=w(),v=b(),g=o0(),E=g.pushUnique,S=g.strTranslate,T=g.strRotate,C=dv(),P=v1(),p=Xy(),Y=t1(),N=Oe(),j=Gg(),ee=g1(),G=wv().zindexSeparator,V=jp(),W=jg(),q=J(),z=$x(),H=m_(),Z=q.YANGLE,ne=Math.PI*Z/180,te=1/Math.sin(ne),Se=Math.cos(ne),fe=Math.sin(ne),ve=q.HOVERARROWSIZE,xe=q.HOVERTEXTPAD,re={box:!0,ohlc:!0,violin:!0,candlestick:!0},de={scatter:!0,scattergl:!0,splom:!0};function be(Q,ce){return Q.distance-ce.distance}pe.hover=function(ce,Me,Le,tt){ce=g.getGraphDiv(ce);var bt=Me.target;g.throttle(ce._fullLayout._uid+q.HOVERID,q.HOVERMINTIME,function(){Te(ce,Me,Le,tt,bt)})},pe.loneHover=function(ce,Me){var Le=!0;Array.isArray(ce)||(Le=!1,ce=[ce]);var tt=Me.gd,bt=Ce(tt),Ct=Je(tt),yi=ce.map(function(Lo){var Cp=Lo._x0||Lo.x0||Lo.x||0,Hp=Lo._x1||Lo.x1||Lo.x||0,e0=Lo._y0||Lo.y0||Lo.y||0,t0=Lo._y1||Lo.y1||Lo.y||0,n0=Lo.eventData;if(n0){var y0=Math.min(Cp,Hp),h0=Math.max(Cp,Hp),I0=Math.min(e0,t0),Kp=Math.max(e0,t0),B0=Lo.trace;if(V.traceIs(B0,"gl3d")){var em=tt._fullLayout[B0.scene]._scene.container,k0=em.offsetLeft,J0=em.offsetTop;y0+=k0,h0+=k0,I0+=J0,Kp+=J0}n0.bbox={x0:y0+Ct,x1:h0+Ct,y0:I0+bt,y1:Kp+bt},Me.inOut_bbox&&Me.inOut_bbox.push(n0.bbox)}else n0=!1;return{color:Lo.color||N.defaultLine,x0:Lo.x0||Lo.x||0,x1:Lo.x1||Lo.x||0,y0:Lo.y0||Lo.y||0,y1:Lo.y1||Lo.y||0,xLabel:Lo.xLabel,yLabel:Lo.yLabel,zLabel:Lo.zLabel,text:Lo.text,name:Lo.name,idealAlign:Lo.idealAlign,borderColor:Lo.borderColor,fontFamily:Lo.fontFamily,fontSize:Lo.fontSize,fontColor:Lo.fontColor,fontWeight:Lo.fontWeight,fontStyle:Lo.fontStyle,fontVariant:Lo.fontVariant,nameLength:Lo.nameLength,textAlign:Lo.textAlign,trace:Lo.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:Lo.hovertemplate||!1,hovertemplateLabels:Lo.hovertemplateLabels||!1,eventData:n0}}),Fl=!1,Yl=Ue(yi,{gd:tt,hovermode:"closest",rotateLabels:Fl,bgColor:Me.bgColor||N.background,container:me.select(Me.container),outerContainer:Me.outerContainer||Me.container}),qp=Yl.hoverLabels,Fp=5,Up=0,_r=0;qp.sort(function(Lo,Cp){return Lo.y0-Cp.y0}).each(function(Lo,Cp){var Hp=Lo.y0-Lo.by/2;Hp-Fp<Up?Lo.offset=Up-Hp+Fp:Lo.offset=0,Up=Hp+Lo.by+Lo.offset,Cp===Me.anchorIndex&&(_r=Lo.offset)}).each(function(Lo){Lo.offset-=_r});var gs=tt._fullLayout._invScaleX,dr=tt._fullLayout._invScaleY;return Qe(qp,Fl,gs,dr),Le?qp:qp.node()};function Te(Q,ce,Me,Le,tt){Me||(Me="xy"),typeof Me=="string"&&(Me=Me.split(G)[0]);var bt=Array.isArray(Me)?Me:[Me],Ct,yi=Q._fullLayout,Fl=yi.hoversubplots,Yl=yi._plots||[],qp=Yl[Me],Fp=yi._has("cartesian"),Up=ce.hovermode||yi.hovermode,_r=(Up||"").charAt(0)==="x",gs=(Up||"").charAt(0)==="y",dr,Lo;if(Fp&&(_r||gs)&&Fl==="axis"){for(var Cp=bt.length,Hp=0;Hp<Cp;Hp++)if(Ct=bt[Hp],Yl[Ct]){dr=ee.getFromId(Q,Ct,"x"),Lo=ee.getFromId(Q,Ct,"y");var e0=(_r?dr:Lo)._subplotsWith;if(e0&&e0.length)for(var t0=0;t0<e0.length;t0++)E(bt,e0[t0])}}if(qp&&Fl!=="single"){var n0=qp.overlays.map(function($m){return $m.id});bt=bt.concat(n0)}for(var y0=bt.length,h0=new Array(y0),I0=new Array(y0),Kp=!1,B0=0;B0<y0;B0++)if(Ct=bt[B0],Yl[Ct])Kp=!0,h0[B0]=Yl[Ct].xaxis,I0[B0]=Yl[Ct].yaxis;else if(yi[Ct]&&yi[Ct]._subplot){var em=yi[Ct]._subplot;h0[B0]=em.xaxis,I0[B0]=em.yaxis}else{g.warn("Unrecognized subplot: "+Ct);return}if(Up&&!Kp&&(Up="closest"),["x","y","closest","x unified","y unified"].indexOf(Up)===-1||!Q.calcdata||Q.querySelector(".zoombox")||Q._dragging)return j.unhoverRaw(Q,ce);var k0=yi.hoverdistance;k0===-1&&(k0=1/0);var J0=yi.spikedistance;J0===-1&&(J0=1/0);var vs=[],jl=[],zl,Ve,pn,ci,_n,Tp,Sp,Ip,Jp,m0,Dp,c0,b0,E0={hLinePoint:null,vLinePoint:null},gm=!1;if(Array.isArray(ce))for(Up="array",pn=0;pn<ce.length;pn++)_n=Q.calcdata[ce[pn].curveNumber||0],_n&&(Tp=_n[0].trace,_n[0].trace.hoverinfo!=="skip"&&(jl.push(_n),Tp.orientation==="h"&&(gm=!0)));else{var Nm=Q.calcdata.slice();for(Nm.sort(function($m,vv){var Vv=$m[0].trace.zorder||0,b1=vv[0].trace.zorder||0;return Vv-b1}),ci=0;ci<Nm.length;ci++)_n=Nm[ci],Tp=_n[0].trace,Tp.hoverinfo!=="skip"&&W.isTraceInSubplots(Tp,bt)&&(jl.push(_n),Tp.orientation==="h"&&(gm=!0));var Bm=!tt,xm,Am;if(Bm)"xpx"in ce?xm=ce.xpx:xm=h0[0]._length/2,"ypx"in ce?Am=ce.ypx:Am=I0[0]._length/2;else{if(C.triggerHandler(Q,"plotly_beforehover",ce)===!1)return;var mm=tt.getBoundingClientRect();xm=ce.clientX-mm.left,Am=ce.clientY-mm.top,yi._calcInverseTransform(Q);var vm=g.apply3DTransform(yi._invTransform)(xm,Am);if(xm=vm[0],Am=vm[1],xm<0||xm>h0[0]._length||Am<0||Am>I0[0]._length)return j.unhoverRaw(Q,ce)}if(ce.pointerX=xm+h0[0]._offset,ce.pointerY=Am+I0[0]._offset,"xval"in ce?zl=W.flat(bt,ce.xval):zl=W.p2c(h0,xm),"yval"in ce?Ve=W.flat(bt,ce.yval):Ve=W.p2c(I0,Am),!M(zl[0])||!M(Ve[0]))return g.warn("Fx.hover failed",ce,Q),j.unhoverRaw(Q,ce)}var Om=1/0;function Lm($m,vv){for(ci=0;ci<jl.length;ci++)if(_n=jl[ci],!(!_n||!_n[0]||!_n[0].trace)&&(Tp=_n[0].trace,!(Tp.visible!==!0||Tp._length===0)&&["carpet","contourcarpet"].indexOf(Tp._module.name)===-1)){if(Jp=Up,W.isUnifiedHover(Jp)&&(Jp=Jp.charAt(0)),Tp.type==="splom"?(Ip=0,Sp=bt[Ip]):(Sp=W.getSubplot(Tp),Ip=bt.indexOf(Sp)),c0={cd:_n,trace:Tp,xa:h0[Ip],ya:I0[Ip],maxHoverDistance:k0,maxSpikeDistance:J0,index:!1,distance:Math.min(Om,k0),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:N.defaultLine,name:Tp.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},yi[Sp]&&(c0.subplot=yi[Sp]._subplot),yi._splomScenes&&yi._splomScenes[Tp.uid]&&(c0.scene=yi._splomScenes[Tp.uid]),Jp==="array"){var Vv=ce[ci];"pointNumber"in Vv?(c0.index=Vv.pointNumber,Jp="closest"):(Jp="","xval"in Vv&&(m0=Vv.xval,Jp="x"),"yval"in Vv&&(Dp=Vv.yval,Jp=Jp?"closest":"y"))}else $m!==void 0&&vv!==void 0?(m0=$m,Dp=vv):(m0=zl[Ip],Dp=Ve[Ip]);if(b0=vs.length,k0!==0)if(Tp._module&&Tp._module.hoverPoints){var b1=Tp._module.hoverPoints(c0,m0,Dp,Jp,{finiteRange:!0,hoverLayer:yi._hoverlayer,hoversubplots:Fl,gd:Q});if(b1)for(var c1,Iv=0;Iv<b1.length;Iv++)c1=b1[Iv],M(c1.x0)&&M(c1.y0)&&vs.push(ft(c1,Up))}else g.log("Unrecognized trace type in hover:",Tp);if(Up==="closest"&&vs.length>b0&&(vs.splice(0,b0),Om=vs[0].distance),Fp&&J0!==0&&vs.length===0){c0.distance=J0,c0.index=!1;var lv=Tp._module.hoverPoints(c0,m0,Dp,"closest",{hoverLayer:yi._hoverlayer});if(lv&&(lv=lv.filter(function(s1){return s1.spikeDistance<=J0})),lv&&lv.length){var fv,Hv=lv.filter(function(s1){return s1.xa.showspikes&&s1.xa.spikesnap!=="hovered data"});if(Hv.length){var Uv=Hv[0];M(Uv.x0)&&M(Uv.y0)&&(fv=Em(Uv),(!E0.vLinePoint||E0.vLinePoint.spikeDistance>fv.spikeDistance)&&(E0.vLinePoint=fv))}var Xv=lv.filter(function(s1){return s1.ya.showspikes&&s1.ya.spikesnap!=="hovered data"});if(Xv.length){var r1=Xv[0];M(r1.x0)&&M(r1.y0)&&(fv=Em(r1),(!E0.hLinePoint||E0.hLinePoint.spikeDistance>fv.spikeDistance)&&(E0.hLinePoint=fv))}}}}}Lm();function Um($m,vv,Vv){for(var b1=null,c1=1/0,Iv,lv=0;lv<$m.length;lv++)dr&&dr._id!==$m[lv].xa._id||Lo&&Lo._id!==$m[lv].ya._id||(Iv=$m[lv].spikeDistance,Vv&&lv===0&&(Iv=-1/0),Iv<=c1&&Iv<=vv&&(b1=$m[lv],c1=Iv));return b1}function Em($m){return $m?{xa:$m.xa,ya:$m.ya,x:$m.xSpike!==void 0?$m.xSpike:($m.x0+$m.x1)/2,y:$m.ySpike!==void 0?$m.ySpike:($m.y0+$m.y1)/2,distance:$m.distance,spikeDistance:$m.spikeDistance,curveNumber:$m.trace.index,color:$m.color,pointNumber:$m.index}:null}var lm={fullLayout:yi,container:yi._hoverlayer,event:ce};Q._spikepoints;var Dm={vLinePoint:E0.vLinePoint,hLinePoint:E0.hLinePoint};Q._spikepoints=Dm;var Zm=function(){var $m=vs.filter(function(Vv){return dr&&dr._id===Vv.xa._id&&Lo&&Lo._id===Vv.ya._id}),vv=vs.filter(function(Vv){return!(dr&&dr._id===Vv.xa._id&&Lo&&Lo._id===Vv.ya._id)});$m.sort(be),vv.sort(be),vs=$m.concat(vv),vs=ke(vs,Up)};Zm();var rv=Up.charAt(0),zm=(rv==="x"||rv==="y")&&vs[0]&&de[vs[0].trace.type];if(Fp&&J0!==0&&vs.length!==0){var Ym=vs.filter(function($m){return $m.ya.showspikes}),Km=Um(Ym,J0,zm);E0.hLinePoint=Em(Km);var _v=vs.filter(function($m){return $m.xa.showspikes}),Hm=Um(_v,J0,zm);E0.vLinePoint=Em(Hm)}if(vs.length===0){var uv=j.unhoverRaw(Q,ce);return Fp&&(E0.hLinePoint!==null||E0.vLinePoint!==null)&&Do()&&mn(Q,E0,lm),uv}if(Fp&&Do()&&mn(Q,E0,lm),W.isXYhover(Jp)&&vs[0].length!==0&&vs[0].trace.type!=="splom"){var dt=vs[0];re[dt.trace.type]?vs=vs.filter(function($m){return $m.trace.index===dt.trace.index}):vs=[dt];var Fe=vs.length,Gp=ge("x",dt,yi),kp=ge("y",dt,yi);Lm(Gp,kp);var yp=[],bp={},Pp=0,s0=function($m){var vv=re[$m.trace.type]?ye($m):$m.trace.index;if(!bp[vv])Pp++,bp[vv]=Pp,yp.push($m);else{var Vv=bp[vv]-1,b1=yp[Vv];Vv>0&&Math.abs($m.distance)<Math.abs(b1.distance)&&(yp[Vv]=$m)}},Rp;for(Rp=0;Rp<Fe;Rp++)s0(vs[Rp]);for(Rp=vs.length-1;Rp>Fe-1;Rp--)s0(vs[Rp]);vs=yp,Zm()}var Vp=Q._hoverdata,r0=[],$p=Ce(Q),P0=Je(Q);for(pn=0;pn<vs.length;pn++){var j0=vs[pn],tm=W.makeEventData(j0,j0.trace,j0.cd);if(j0.hovertemplate!==!1){var wm=!1;j0.cd[j0.index]&&j0.cd[j0.index].ht&&(wm=j0.cd[j0.index].ht),j0.hovertemplate=wm||j0.trace.hovertemplate||!1}if(j0.xa&&j0.ya){var bm=j0.x0+j0.xa._offset,Tm=j0.x1+j0.xa._offset,Rm=j0.y0+j0.ya._offset,Sm=j0.y1+j0.ya._offset,Gm=Math.min(bm,Tm),Xm=Math.max(bm,Tm),pv=Math.min(Rm,Sm),Ev=Math.max(Rm,Sm);tm.bbox={x0:Gm+P0,x1:Xm+P0,y0:pv+$p,y1:Ev+$p}}j0.eventData=[tm],r0.push(tm)}Q._hoverdata=r0;var kv=Up==="y"&&(jl.length>1||vs.length>1)||Up==="closest"&&gm&&vs.length>1,tv=N.combine(yi.plot_bgcolor||N.background,yi.paper_bgcolor),Mv=Ue(vs,{gd:Q,hovermode:Up,rotateLabels:kv,bgColor:tv,container:yi._hoverlayer,outerContainer:yi._paper.node(),commonLabelOpts:yi.hoverlabel,hoverdistance:yi.hoverdistance}),i1=Mv.hoverLabels;if(W.isUnifiedHover(Up)||(Be(i1,kv,yi,Mv.commonLabelBoundingBox),Qe(i1,kv,yi._invScaleX,yi._invScaleY)),tt&&tt.tagName){var V1=V.getComponentMethod("annotations","hasClickToShow")(Q,r0);p(me.select(tt),V1?"pointer":"")}!tt||Le||!ta(Q,ce,Vp)||(Vp&&Q.emit("plotly_unhover",{event:ce,points:Vp}),Q.emit("plotly_hover",{event:ce,points:Q._hoverdata,xaxes:h0,yaxes:I0,xvals:zl,yvals:Ve}))}function ye(Q){return[Q.trace.index,Q.index,Q.x0,Q.y0,Q.name,Q.attr,Q.xa?Q.xa._id:"",Q.ya?Q.ya._id:""].join(",")}var De=/<extra>([\s\S]*)<\/extra>/;function Ue(Q,ce){var Me=ce.gd,Le=Me._fullLayout,tt=ce.hovermode,bt=ce.rotateLabels,Ct=ce.bgColor,yi=ce.container,Fl=ce.outerContainer,Yl=ce.commonLabelOpts||{};if(Q.length===0)return[[]];var qp=ce.fontFamily||q.HOVERFONT,Fp=ce.fontSize||q.HOVERFONTSIZE,Up=ce.fontWeight||Le.font.weight,_r=ce.fontStyle||Le.font.style,gs=ce.fontVariant||Le.font.variant,dr=ce.fontTextcase||Le.font.textcase,Lo=ce.fontLineposition||Le.font.lineposition,Cp=ce.fontShadow||Le.font.shadow,Hp=Q[0],e0=Hp.xa,t0=Hp.ya,n0=tt.charAt(0),y0=n0+"Label",h0=Hp[y0];if(h0===void 0&&e0.type==="multicategory")for(var I0=0;I0<Q.length&&(h0=Q[I0][y0],h0===void 0);I0++);var Kp=Re(Me,Fl),B0=Kp.top,em=Kp.width,k0=Kp.height,J0=h0!==void 0&&Hp.distance<=ce.hoverdistance&&(tt==="x"||tt==="y");if(J0){var vs=!0,jl,zl;for(jl=0;jl<Q.length;jl++)if(vs&&Q[jl].zLabel===void 0&&(vs=!1),zl=Q[jl].hoverinfo||Q[jl].trace.hoverinfo,zl){var Ve=Array.isArray(zl)?zl:zl.split("+");if(Ve.indexOf("all")===-1&&Ve.indexOf(tt)===-1){J0=!1;break}}vs&&(J0=!1)}var pn=yi.selectAll("g.axistext").data(J0?[0]:[]);pn.enter().append("g").classed("axistext",!0),pn.exit().remove();var ci={minX:0,maxX:0,minY:0,maxY:0};if(pn.each(function(){var Fe=me.select(this),Gp=g.ensureSingle(Fe,"path","",function(kv){kv.style({"stroke-width":"1px"})}),kp=g.ensureSingle(Fe,"text","",function(kv){kv.attr("data-notex",1)}),yp=Yl.bgcolor||N.defaultLine,bp=Yl.bordercolor||N.contrast(yp),Pp=N.contrast(yp),s0=Yl.font,Rp={weight:s0.weight||Up,style:s0.style||_r,variant:s0.variant||gs,textcase:s0.textcase||dr,lineposition:s0.lineposition||Lo,shadow:s0.shadow||Cp,family:s0.family||qp,size:s0.size||Fp,color:s0.color||Pp};Gp.style({fill:yp,stroke:bp}),kp.text(h0).call(Y.font,Rp).call(P.positionText,0,0).call(P.convertToTspans,Me),Fe.attr("transform","");var Vp=Re(Me,kp.node()),r0,$p;if(tt==="x"){var P0=e0.side==="top"?"-":"";kp.attr("text-anchor","middle").call(P.positionText,0,e0.side==="top"?B0-Vp.bottom-ve-xe:B0-Vp.top+ve+xe),r0=e0._offset+(Hp.x0+Hp.x1)/2,$p=t0._offset+(e0.side==="top"?0:t0._length);var j0=Vp.width/2+xe,tm=r0;r0<j0?tm=j0:r0>Le.width-j0&&(tm=Le.width-j0),Gp.attr("d","M"+(r0-tm)+",0L"+(r0-tm+ve)+","+P0+ve+"H"+j0+"v"+P0+(xe*2+Vp.height)+"H"+-j0+"V"+P0+ve+"H"+(r0-tm-ve)+"Z"),r0=tm,ci.minX=r0-j0,ci.maxX=r0+j0,e0.side==="top"?(ci.minY=$p-(xe*2+Vp.height),ci.maxY=$p-xe):(ci.minY=$p+xe,ci.maxY=$p+(xe*2+Vp.height))}else{var wm,bm,Tm;t0.side==="right"?(wm="start",bm=1,Tm="",r0=e0._offset+e0._length):(wm="end",bm=-1,Tm="-",r0=e0._offset),$p=t0._offset+(Hp.y0+Hp.y1)/2,kp.attr("text-anchor",wm),Gp.attr("d","M0,0L"+Tm+ve+","+ve+"V"+(xe+Vp.height/2)+"h"+Tm+(xe*2+Vp.width)+"V-"+(xe+Vp.height/2)+"H"+Tm+ve+"V-"+ve+"Z"),ci.minY=$p-(xe+Vp.height/2),ci.maxY=$p+(xe+Vp.height/2),t0.side==="right"?(ci.minX=r0+ve,ci.maxX=r0+ve+(xe*2+Vp.width)):(ci.minX=r0-ve-(xe*2+Vp.width),ci.maxX=r0-ve);var Rm=Vp.height/2,Sm=B0-Vp.top-Rm,Gm="clip"+Le._uid+"commonlabel"+t0._id,Xm;if(r0<Vp.width+2*xe+ve){Xm="M-"+(ve+xe)+"-"+Rm+"h-"+(Vp.width-xe)+"V"+Rm+"h"+(Vp.width-xe)+"Z";var pv=Vp.width-r0+xe;P.positionText(kp,pv,Sm),wm==="end"&&kp.selectAll("tspan").each(function(){var kv=me.select(this),tv=Y.tester.append("text").text(kv.text()).call(Y.font,Rp),Mv=Re(Me,tv.node());Math.round(Mv.width)<Math.round(Vp.width)&&kv.attr("x",pv-Mv.width),tv.remove()})}else P.positionText(kp,bm*(xe+ve),Sm),Xm=null;var Ev=Le._topclips.selectAll("#"+Gm).data(Xm?[0]:[]);Ev.enter().append("clipPath").attr("id",Gm).append("path"),Ev.exit().remove(),Ev.select("path").attr("d",Xm),Y.setClipUrl(kp,Xm?Gm:null,Me)}Fe.attr("transform",S(r0,$p))}),W.isUnifiedHover(tt)){yi.selectAll("g.hovertext").remove();var _n=Q.filter(function(Fe){return Fe.hoverinfo!=="none"});if(_n.length===0)return[];var Tp=Le.hoverlabel,Sp=Tp.font,Ip=_n[0],Jp=((tt==="x unified"?Ip.xa:Ip.ya).unifiedhovertitle||{}).text,m0=Jp?g.hovertemplateString(Jp,{},Le._d3locale,tt==="x unified"?{xa:Ip.xa,x:Ip.xVal}:{ya:Ip.ya,y:Ip.yVal}):h0,Dp={showlegend:!0,legend:{title:{text:m0,font:Sp},font:Sp,bgcolor:Tp.bgcolor,bordercolor:Tp.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:Le.legend?Le.legend.traceorder:void 0,orientation:"v"}},c0={font:Sp};z(Dp,c0,Me._fullData);var b0=c0.legend;b0.entries=[];for(var E0=0;E0<_n.length;E0++){var gm=_n[E0];if(gm.hoverinfo!=="none"){var Nm=he(gm,!0,tt,Le,h0),Bm=Nm[0],xm=Nm[1];gm.name=xm,xm!==""?gm.text=xm+" : "+Bm:gm.text=Bm;var Am=gm.cd[gm.index];Am&&(Am.mc&&(gm.mc=Am.mc),Am.mcc&&(gm.mc=Am.mcc),Am.mlc&&(gm.mlc=Am.mlc),Am.mlcc&&(gm.mlc=Am.mlcc),Am.mlw&&(gm.mlw=Am.mlw),Am.mrc&&(gm.mrc=Am.mrc),Am.dir&&(gm.dir=Am.dir)),gm._distinct=!0,b0.entries.push([gm])}}b0.entries.sort(function(Fe,Gp){return Fe[0].trace.index-Gp[0].trace.index}),b0.layer=yi,b0._inHover=!0,b0._groupTitleFont=Tp.grouptitlefont,H(Me,b0);var mm=yi.select("g.legend"),vm=Re(Me,mm.node()),Om=vm.width+2*xe,Lm=vm.height+2*xe,Um=_n[0],Em=(Um.x0+Um.x1)/2,lm=(Um.y0+Um.y1)/2,Dm=!(V.traceIs(Um.trace,"bar-like")||V.traceIs(Um.trace,"box-violin")),Zm,rv;n0==="y"?Dm?(rv=lm-xe,Zm=lm+xe):(rv=Math.min.apply(null,_n.map(function(Fe){return Math.min(Fe.y0,Fe.y1)})),Zm=Math.max.apply(null,_n.map(function(Fe){return Math.max(Fe.y0,Fe.y1)}))):rv=Zm=g.mean(_n.map(function(Fe){return(Fe.y0+Fe.y1)/2}))-Lm/2;var zm,Ym;n0==="x"?Dm?(zm=Em+xe,Ym=Em-xe):(zm=Math.max.apply(null,_n.map(function(Fe){return Math.max(Fe.x0,Fe.x1)})),Ym=Math.min.apply(null,_n.map(function(Fe){return Math.min(Fe.x0,Fe.x1)}))):zm=Ym=g.mean(_n.map(function(Fe){return(Fe.x0+Fe.x1)/2}))-Om/2;var Km=e0._offset,_v=t0._offset;Zm+=_v,zm+=Km,Ym+=Km-Om,rv+=_v-Lm;var Hm,uv;return zm+Om<em&&zm>=0?Hm=zm:Ym+Om<em&&Ym>=0?Hm=Ym:Km+Om<em?Hm=Km:zm-Em<Em-Ym+Om?Hm=em-Om:Hm=0,Hm+=xe,Zm+Lm<k0&&Zm>=0?uv=Zm:rv+Lm<k0&&rv>=0?uv=rv:_v+Lm<k0?uv=_v:Zm-lm<lm-rv+Lm?uv=k0-Lm:uv=0,uv+=xe,mm.attr("transform",S(Hm-1,uv-1)),mm}var dt=yi.selectAll("g.hovertext").data(Q,function(Fe){return ye(Fe)});return dt.enter().append("g").classed("hovertext",!0).each(function(){var Fe=me.select(this);Fe.append("rect").call(N.fill,N.addOpacity(Ct,.8)),Fe.append("text").classed("name",!0),Fe.append("path").style("stroke-width","1px"),Fe.append("text").classed("nums",!0).call(Y.font,{weight:Up,style:_r,variant:gs,textcase:dr,lineposition:Lo,shadow:Cp,family:qp,size:Fp})}),dt.exit().remove(),dt.each(function(Fe){var Gp=me.select(this).attr("transform",""),kp=Fe.color;Array.isArray(kp)&&(kp=kp[Fe.eventData[0].pointNumber]);var yp=Fe.bgcolor||kp,bp=N.combine(N.opacity(yp)?yp:N.defaultLine,Ct),Pp=N.combine(N.opacity(kp)?kp:N.defaultLine,Ct),s0=Fe.borderColor||N.contrast(bp),Rp=he(Fe,J0,tt,Le,h0,Gp),Vp=Rp[0],r0=Rp[1],$p=Gp.select("text.nums").call(Y.font,{family:Fe.fontFamily||qp,size:Fe.fontSize||Fp,color:Fe.fontColor||s0,weight:Fe.fontWeight||Up,style:Fe.fontStyle||_r,variant:Fe.fontVariant||gs,textcase:Fe.fontTextcase||dr,lineposition:Fe.fontLineposition||Lo,shadow:Fe.fontShadow||Cp}).text(Vp).attr("data-notex",1).call(P.positionText,0,0).call(P.convertToTspans,Me),P0=Gp.select("text.name"),j0=0,tm=0;if(r0&&r0!==Vp){P0.call(Y.font,{family:Fe.fontFamily||qp,size:Fe.fontSize||Fp,color:Pp,weight:Fe.fontWeight||Up,style:Fe.fontStyle||_r,variant:Fe.fontVariant||gs,textcase:Fe.fontTextcase||dr,lineposition:Fe.fontLineposition||Lo,shadow:Fe.fontShadow||Cp}).text(r0).attr("data-notex",1).call(P.positionText,0,0).call(P.convertToTspans,Me);var wm=Re(Me,P0.node());j0=wm.width+2*xe,tm=wm.height+2*xe}else P0.remove(),Gp.select("rect").remove();Gp.select("path").style({fill:bp,stroke:s0});var bm=Fe.xa._offset+(Fe.x0+Fe.x1)/2,Tm=Fe.ya._offset+(Fe.y0+Fe.y1)/2,Rm=Math.abs(Fe.x1-Fe.x0),Sm=Math.abs(Fe.y1-Fe.y0),Gm=Re(Me,$p.node()),Xm=Gm.width/Le._invScaleX,pv=Gm.height/Le._invScaleY;Fe.ty0=(B0-Gm.top)/Le._invScaleY,Fe.bx=Xm+2*xe,Fe.by=Math.max(pv+2*xe,tm),Fe.anchor="start",Fe.txwidth=Xm,Fe.tx2width=j0,Fe.offset=0;var Ev=(Xm+ve+xe+j0)*Le._invScaleX,kv,tv;if(bt)Fe.pos=bm,kv=Tm+Sm/2+Ev<=k0,tv=Tm-Sm/2-Ev>=0,(Fe.idealAlign==="top"||!kv)&&tv?(Tm-=Sm/2,Fe.anchor="end"):kv?(Tm+=Sm/2,Fe.anchor="start"):Fe.anchor="middle",Fe.crossPos=Tm;else{if(Fe.pos=Tm,kv=bm+Rm/2+Ev<=em,tv=bm-Rm/2-Ev>=0,(Fe.idealAlign==="left"||!kv)&&tv)bm-=Rm/2,Fe.anchor="end";else if(kv)bm+=Rm/2,Fe.anchor="start";else{Fe.anchor="middle";var Mv=Ev/2,i1=bm+Mv-em,V1=bm-Mv;i1>0&&(bm-=i1),V1<0&&(bm+=-V1)}Fe.crossPos=bm}$p.attr("text-anchor",Fe.anchor),j0&&P0.attr("text-anchor",Fe.anchor),Gp.attr("transform",S(bm,Tm)+(bt?T(Z):""))}),{hoverLabels:dt,commonLabelBoundingBox:ci}}function he(Q,ce,Me,Le,tt,bt){var Ct="",yi="";Q.nameOverride!==void 0&&(Q.name=Q.nameOverride),Q.name&&(Q.trace._meta&&(Q.name=g.templateString(Q.name,Q.trace._meta)),Ct=Ae(Q.name,Q.nameLength));var Fl=Me.charAt(0),Yl=Fl==="x"?"y":"x";Q.zLabel!==void 0?(Q.xLabel!==void 0&&(yi+="x: "+Q.xLabel+"<br>"),Q.yLabel!==void 0&&(yi+="y: "+Q.yLabel+"<br>"),Q.trace.type!=="choropleth"&&Q.trace.type!=="choroplethmapbox"&&Q.trace.type!=="choroplethmap"&&(yi+=(yi?"z: ":"")+Q.zLabel)):ce&&Q[Fl+"Label"]===tt?yi=Q[Yl+"Label"]||"":Q.xLabel===void 0?Q.yLabel!==void 0&&Q.trace.type!=="scattercarpet"&&(yi=Q.yLabel):Q.yLabel===void 0?yi=Q.xLabel:yi="("+Q.xLabel+", "+Q.yLabel+")",(Q.text||Q.text===0)&&!Array.isArray(Q.text)&&(yi+=(yi?"<br>":"")+Q.text),Q.extraText!==void 0&&(yi+=(yi?"<br>":"")+Q.extraText),bt&&yi===""&&!Q.hovertemplate&&(Ct===""&&bt.remove(),yi=Ct);var qp=Q.hovertemplate||!1;if(qp){var Fp=Q.hovertemplateLabels||Q;Q[Fl+"Label"]!==tt&&(Fp[Fl+"other"]=Fp[Fl+"Val"],Fp[Fl+"otherLabel"]=Fp[Fl+"Label"]),yi=g.hovertemplateString(qp,Fp,Le._d3locale,Q.eventData[0]||{},Q.trace._meta),yi=yi.replace(De,function(Up,_r){return Ct=Ae(_r,Q.nameLength),""})}return[yi,Ct]}function Be(Q,ce,Me,Le){var tt=ce?"xa":"ya",bt=ce?"ya":"xa",Ct=0,yi=1,Fl=Q.size(),Yl=new Array(Fl),qp=0,Fp=Le.minX,Up=Le.maxX,_r=Le.minY,gs=Le.maxY,dr=function(zl){return zl*Me._invScaleX},Lo=function(zl){return zl*Me._invScaleY};Q.each(function(zl){var Ve=zl[tt],pn=zl[bt],ci=Ve._id.charAt(0)==="x",_n=Ve.range;qp===0&&_n&&_n[0]>_n[1]!==ci&&(yi=-1);var Tp=0,Sp=ci?Me.width:Me.height;if(Me.hovermode==="x"||Me.hovermode==="y"){var Ip=Ye(zl,ce),Jp=zl.anchor,m0=Jp==="end"?-1:1,Dp,c0;if(Jp==="middle")Dp=zl.crossPos+(ci?Lo(Ip.y-zl.by/2):dr(zl.bx/2+zl.tx2width/2)),c0=Dp+(ci?Lo(zl.by):dr(zl.bx));else if(ci)Dp=zl.crossPos+Lo(ve+Ip.y)-Lo(zl.by/2-ve),c0=Dp+Lo(zl.by);else{var b0=dr(m0*ve+Ip.x),E0=b0+dr(m0*zl.bx);Dp=zl.crossPos+Math.min(b0,E0),c0=zl.crossPos+Math.max(b0,E0)}ci?_r!==void 0&&gs!==void 0&&Math.min(c0,gs)-Math.max(Dp,_r)>1&&(pn.side==="left"?(Tp=pn._mainLinePosition,Sp=Me.width):Sp=pn._mainLinePosition):Fp!==void 0&&Up!==void 0&&Math.min(c0,Up)-Math.max(Dp,Fp)>1&&(pn.side==="top"?(Tp=pn._mainLinePosition,Sp=Me.height):Sp=pn._mainLinePosition)}Yl[qp++]=[{datum:zl,traceIndex:zl.trace.index,dp:0,pos:zl.pos,posref:zl.posref,size:zl.by*(ci?te:1)/2,pmin:Tp,pmax:Sp}]}),Yl.sort(function(zl,Ve){return zl[0].posref-Ve[0].posref||yi*(Ve[0].traceIndex-zl[0].traceIndex)});var Cp,Hp,e0,t0,n0,y0,h0;function I0(zl){var Ve=zl[0],pn=zl[zl.length-1];if(Hp=Ve.pmin-Ve.pos-Ve.dp+Ve.size,e0=pn.pos+pn.dp+pn.size-Ve.pmax,Hp>.01){for(n0=zl.length-1;n0>=0;n0--)zl[n0].dp+=Hp;Cp=!1}if(!(e0<.01)){if(Hp<-.01){for(n0=zl.length-1;n0>=0;n0--)zl[n0].dp-=e0;Cp=!1}if(Cp){var ci=0;for(t0=0;t0<zl.length;t0++)y0=zl[t0],y0.pos+y0.dp+y0.size>Ve.pmax&&ci++;for(t0=zl.length-1;t0>=0&&!(ci<=0);t0--)y0=zl[t0],y0.pos>Ve.pmax-1&&(y0.del=!0,ci--);for(t0=0;t0<zl.length&&!(ci<=0);t0++)if(y0=zl[t0],y0.pos<Ve.pmin+1)for(y0.del=!0,ci--,e0=y0.size*2,n0=zl.length-1;n0>=0;n0--)zl[n0].dp-=e0;for(t0=zl.length-1;t0>=0&&!(ci<=0);t0--)y0=zl[t0],y0.pos+y0.dp+y0.size>Ve.pmax&&(y0.del=!0,ci--)}}}for(;!Cp&&Ct<=Fl;){for(Ct++,Cp=!0,t0=0;t0<Yl.length-1;){var Kp=Yl[t0],B0=Yl[t0+1],em=Kp[Kp.length-1],k0=B0[0];if(Hp=em.pos+em.dp+em.size-k0.pos-k0.dp+k0.size,Hp>.01){for(n0=B0.length-1;n0>=0;n0--)B0[n0].dp+=Hp;for(Kp.push.apply(Kp,B0),Yl.splice(t0+1,1),h0=0,n0=Kp.length-1;n0>=0;n0--)h0+=Kp[n0].dp;for(e0=h0/Kp.length,n0=Kp.length-1;n0>=0;n0--)Kp[n0].dp-=e0;Cp=!1}else t0++}Yl.forEach(I0)}for(t0=Yl.length-1;t0>=0;t0--){var J0=Yl[t0];for(n0=J0.length-1;n0>=0;n0--){var vs=J0[n0],jl=vs.datum;jl.offset=vs.dp,jl.del=vs.del}}}function Ye(Q,ce){var Me=0,Le=Q.offset;return ce&&(Le*=-fe,Me=Q.offset*Se),{x:Me,y:Le}}function et(Q){var ce={start:1,end:-1,middle:0}[Q.anchor],Me=ce*(ve+xe),Le=Me+ce*(Q.txwidth+xe),tt=Q.anchor==="middle";return tt&&(Me-=Q.tx2width/2,Le+=Q.txwidth/2+xe),{alignShift:ce,textShiftX:Me,text2ShiftX:Le}}function Qe(Q,ce,Me,Le){var tt=function(Ct){return Ct*Me},bt=function(Ct){return Ct*Le};Q.each(function(Ct){var yi=me.select(this);if(Ct.del)return yi.remove();var Fl=yi.select("text.nums"),Yl=Ct.anchor,qp=Yl==="end"?-1:1,Fp=et(Ct),Up=Ye(Ct,ce),_r=Up.x,gs=Up.y,dr=Yl==="middle",Lo="hoverlabel"in Ct.trace?Ct.trace.hoverlabel.showarrow:!0,Cp;dr?Cp="M-"+tt(Ct.bx/2+Ct.tx2width/2)+","+bt(gs-Ct.by/2)+"h"+tt(Ct.bx)+"v"+bt(Ct.by)+"h-"+tt(Ct.bx)+"Z":Lo?Cp="M0,0L"+tt(qp*ve+_r)+","+bt(ve+gs)+"v"+bt(Ct.by/2-ve)+"h"+tt(qp*Ct.bx)+"v-"+bt(Ct.by)+"H"+tt(qp*ve+_r)+"V"+bt(gs-ve)+"Z":Cp="M"+tt(qp*ve+_r)+","+bt(gs-Ct.by/2)+"h"+tt(qp*Ct.bx)+"v"+bt(Ct.by)+"h"+tt(-qp*Ct.bx)+"Z",yi.select("path").attr("d",Cp);var Hp=_r+Fp.textShiftX,e0=gs+Ct.ty0-Ct.by/2+xe,t0=Ct.textAlign||"auto";t0!=="auto"&&(t0==="left"&&Yl!=="start"?(Fl.attr("text-anchor","start"),Hp=dr?-Ct.bx/2-Ct.tx2width/2+xe:-Ct.bx-xe):t0==="right"&&Yl!=="end"&&(Fl.attr("text-anchor","end"),Hp=dr?Ct.bx/2-Ct.tx2width/2-xe:Ct.bx+xe)),Fl.call(P.positionText,tt(Hp),bt(e0)),Ct.tx2width&&(yi.select("text.name").call(P.positionText,tt(Fp.text2ShiftX+Fp.alignShift*xe+_r),bt(gs+Ct.ty0-Ct.by/2+xe)),yi.select("rect").call(Y.setRect,tt(Fp.text2ShiftX+(Fp.alignShift-1)*Ct.tx2width/2+_r),bt(gs-Ct.by/2-1),tt(Ct.tx2width),bt(Ct.by+2)))})}function ft(Q,ce){var Me=Q.index,Le=Q.trace||{},tt=Q.cd[0],bt=Q.cd[Me]||{};function Ct(Up){return Up||M(Up)&&Up===0}var yi=Array.isArray(Me)?function(Up,_r){var gs=g.castOption(tt,Me,Up);return Ct(gs)?gs:g.extractOption({},Le,"",_r)}:function(Up,_r){return g.extractOption(bt,Le,Up,_r)};function Fl(Up,_r,gs){var dr=yi(_r,gs);Ct(dr)&&(Q[Up]=dr)}if(Fl("hoverinfo","hi","hoverinfo"),Fl("bgcolor","hbg","hoverlabel.bgcolor"),Fl("borderColor","hbc","hoverlabel.bordercolor"),Fl("fontFamily","htf","hoverlabel.font.family"),Fl("fontSize","hts","hoverlabel.font.size"),Fl("fontColor","htc","hoverlabel.font.color"),Fl("fontWeight","htw","hoverlabel.font.weight"),Fl("fontStyle","hty","hoverlabel.font.style"),Fl("fontVariant","htv","hoverlabel.font.variant"),Fl("nameLength","hnl","hoverlabel.namelength"),Fl("textAlign","hta","hoverlabel.align"),Q.posref=ce==="y"||ce==="closest"&&Le.orientation==="h"?Q.xa._offset+(Q.x0+Q.x1)/2:Q.ya._offset+(Q.y0+Q.y1)/2,Q.x0=g.constrain(Q.x0,0,Q.xa._length),Q.x1=g.constrain(Q.x1,0,Q.xa._length),Q.y0=g.constrain(Q.y0,0,Q.ya._length),Q.y1=g.constrain(Q.y1,0,Q.ya._length),Q.xLabelVal!==void 0&&(Q.xLabel="xLabel"in Q?Q.xLabel:ee.hoverLabelText(Q.xa,Q.xLabelVal,Le.xhoverformat),Q.xVal=Q.xa.c2d(Q.xLabelVal)),Q.yLabelVal!==void 0&&(Q.yLabel="yLabel"in Q?Q.yLabel:ee.hoverLabelText(Q.ya,Q.yLabelVal,Le.yhoverformat),Q.yVal=Q.ya.c2d(Q.yLabelVal)),Q.zLabelVal!==void 0&&Q.zLabel===void 0&&(Q.zLabel=String(Q.zLabelVal)),!isNaN(Q.xerr)&&!(Q.xa.type==="log"&&Q.xerr<=0)){var Yl=ee.tickText(Q.xa,Q.xa.c2l(Q.xerr),"hover").text;Q.xerrneg!==void 0?Q.xLabel+=" +"+Yl+" / -"+ee.tickText(Q.xa,Q.xa.c2l(Q.xerrneg),"hover").text:Q.xLabel+=" ± "+Yl,ce==="x"&&(Q.distance+=1)}if(!isNaN(Q.yerr)&&!(Q.ya.type==="log"&&Q.yerr<=0)){var qp=ee.tickText(Q.ya,Q.ya.c2l(Q.yerr),"hover").text;Q.yerrneg!==void 0?Q.yLabel+=" +"+qp+" / -"+ee.tickText(Q.ya,Q.ya.c2l(Q.yerrneg),"hover").text:Q.yLabel+=" ± "+qp,ce==="y"&&(Q.distance+=1)}var Fp=Q.hoverinfo||Q.trace.hoverinfo;return Fp&&Fp!=="all"&&(Fp=Array.isArray(Fp)?Fp:Fp.split("+"),Fp.indexOf("x")===-1&&(Q.xLabel=void 0),Fp.indexOf("y")===-1&&(Q.yLabel=void 0),Fp.indexOf("z")===-1&&(Q.zLabel=void 0),Fp.indexOf("text")===-1&&(Q.text=void 0),Fp.indexOf("name")===-1&&(Q.name=void 0)),Q}function mn(Q,ce,Me){var Le=Me.container,tt=Me.fullLayout,bt=tt._size,Ct=Me.event,yi=!!ce.hLinePoint,Fl=!!ce.vLinePoint,Yl,qp;if(Le.selectAll(".spikeline").remove(),!!(Fl||yi)){var Fp=N.combine(tt.plot_bgcolor,tt.paper_bgcolor);if(yi){var Up=ce.hLinePoint,_r,gs;Yl=Up&&Up.xa,qp=Up&&Up.ya;var dr=qp.spikesnap;dr==="cursor"?(_r=Ct.pointerX,gs=Ct.pointerY):(_r=Yl._offset+Up.x,gs=qp._offset+Up.y);var Lo=v.readability(Up.color,Fp)<1.5?N.contrast(Fp):Up.color,Cp=qp.spikemode,Hp=qp.spikethickness,e0=qp.spikecolor||Lo,t0=ee.getPxPosition(Q,qp),n0,y0;if(Cp.indexOf("toaxis")!==-1||Cp.indexOf("across")!==-1){if(Cp.indexOf("toaxis")!==-1&&(n0=t0,y0=_r),Cp.indexOf("across")!==-1){var h0=qp._counterDomainMin,I0=qp._counterDomainMax;qp.anchor==="free"&&(h0=Math.min(h0,qp.position),I0=Math.max(I0,qp.position)),n0=bt.l+h0*bt.w,y0=bt.l+I0*bt.w}Le.insert("line",":first-child").attr({x1:n0,x2:y0,y1:gs,y2:gs,"stroke-width":Hp,stroke:e0,"stroke-dasharray":Y.dashStyle(qp.spikedash,Hp)}).classed("spikeline",!0).classed("crisp",!0),Le.insert("line",":first-child").attr({x1:n0,x2:y0,y1:gs,y2:gs,"stroke-width":Hp+2,stroke:Fp}).classed("spikeline",!0).classed("crisp",!0)}Cp.indexOf("marker")!==-1&&Le.insert("circle",":first-child").attr({cx:t0+(qp.side!=="right"?Hp:-Hp),cy:gs,r:Hp,fill:e0}).classed("spikeline",!0)}if(Fl){var Kp=ce.vLinePoint,B0,em;Yl=Kp&&Kp.xa,qp=Kp&&Kp.ya;var k0=Yl.spikesnap;k0==="cursor"?(B0=Ct.pointerX,em=Ct.pointerY):(B0=Yl._offset+Kp.x,em=qp._offset+Kp.y);var J0=v.readability(Kp.color,Fp)<1.5?N.contrast(Fp):Kp.color,vs=Yl.spikemode,jl=Yl.spikethickness,zl=Yl.spikecolor||J0,Ve=ee.getPxPosition(Q,Yl),pn,ci;if(vs.indexOf("toaxis")!==-1||vs.indexOf("across")!==-1){if(vs.indexOf("toaxis")!==-1&&(pn=Ve,ci=em),vs.indexOf("across")!==-1){var _n=Yl._counterDomainMin,Tp=Yl._counterDomainMax;Yl.anchor==="free"&&(_n=Math.min(_n,Yl.position),Tp=Math.max(Tp,Yl.position)),pn=bt.t+(1-Tp)*bt.h,ci=bt.t+(1-_n)*bt.h}Le.insert("line",":first-child").attr({x1:B0,x2:B0,y1:pn,y2:ci,"stroke-width":jl,stroke:zl,"stroke-dasharray":Y.dashStyle(Yl.spikedash,jl)}).classed("spikeline",!0).classed("crisp",!0),Le.insert("line",":first-child").attr({x1:B0,x2:B0,y1:pn,y2:ci,"stroke-width":jl+2,stroke:Fp}).classed("spikeline",!0).classed("crisp",!0)}vs.indexOf("marker")!==-1&&Le.insert("circle",":first-child").attr({cx:B0,cy:Ve-(Yl.side!=="top"?jl:-jl),r:jl,fill:zl}).classed("spikeline",!0)}}}function ta(Q,ce,Me){if(!Me||Me.length!==Q._hoverdata.length)return!0;for(var Le=Me.length-1;Le>=0;Le--){var tt=Me[Le],bt=Q._hoverdata[Le];if(tt.curveNumber!==bt.curveNumber||String(tt.pointNumber)!==String(bt.pointNumber)||String(tt.pointNumbers)!==String(bt.pointNumbers)||tt.binNumber!==bt.binNumber)return!0}return!1}function Do(Q,ce){return!0}function Ae(Q,ce){return P.plainText(Q||"",{len:ce,allowedTags:["br","sub","sup","b","i","em","s","u"]})}function ke(Q,ce){for(var Me=ce.charAt(0),Le=[],tt=[],bt=[],Ct=0;Ct<Q.length;Ct++){var yi=Q[Ct];V.traceIs(yi.trace,"bar-like")||V.traceIs(yi.trace,"box-violin")?bt.push(yi):yi.trace[Me+"period"]?tt.push(yi):Le.push(yi)}return Le.concat(tt).concat(bt)}function ge(Q,ce,Me){var Le=ce[Q+"a"],tt=ce[Q+"Val"],bt=ce.cd[0];if(Le.type==="category"||Le.type==="multicategory")tt=Le._categoriesMap[tt];else if(Le.type==="date"){var Ct=ce.trace[Q+"periodalignment"];if(Ct){var yi=ce.cd[ce.index],Fl=yi[Q+"Start"];Fl===void 0&&(Fl=yi[Q]);var Yl=yi[Q+"End"];Yl===void 0&&(Yl=yi[Q]);var qp=Yl-Fl;Ct==="end"?tt+=qp:Ct==="middle"&&(tt+=qp/2)}tt=Le.d2c(tt)}return bt&&bt.t&&bt.t.posLetter===Le._id&&(Me.boxmode==="group"||Me.violinmode==="group")&&(tt+=bt.t.dPos),tt}function Ce(Q){return Q.offsetTop+Q.clientTop}function Je(Q){return Q.offsetLeft+Q.clientLeft}function Re(Q,ce){var Me=Q._fullLayout,Le=ce.getBoundingClientRect(),tt=Le.left,bt=Le.top,Ct=tt+Le.width,yi=bt+Le.height,Fl=g.apply3DTransform(Me._invTransform)(tt,bt),Yl=g.apply3DTransform(Me._invTransform)(Ct,yi),qp=Fl[0],Fp=Fl[1],Up=Yl[0],_r=Yl[1];return{x:qp,y:Fp,width:Up-qp,height:_r-Fp,top:Math.min(Fp,_r),left:Math.min(qp,Up),right:Math.max(qp,Up),bottom:Math.max(Fp,_r)}}}}),ax=a({"src/components/fx/hoverlabel_defaults.js"(pe,me){var M=o0(),v=Oe(),g=jg().isUnifiedHover;me.exports=function(S,T,C,P){P=P||{};var p=T.legend;function Y(N){P.font[N]||(P.font[N]=p?T.legend.font[N]:T.font[N])}T&&g(T.hovermode)&&(P.font||(P.font={}),Y("size"),Y("family"),Y("color"),Y("weight"),Y("style"),Y("variant"),p?(P.bgcolor||(P.bgcolor=v.combine(T.legend.bgcolor,T.paper_bgcolor)),P.bordercolor||(P.bordercolor=T.legend.bordercolor)):P.bgcolor||(P.bgcolor=T.paper_bgcolor)),C("hoverlabel.bgcolor",P.bgcolor),C("hoverlabel.bordercolor",P.bordercolor),C("hoverlabel.namelength",P.namelength),C("hoverlabel.showarrow",P.showarrow),M.coerceFont(C,"hoverlabel.font",P.font),C("hoverlabel.align",P.align)}}}),Xb=a({"src/components/fx/layout_global_defaults.js"(pe,me){var M=o0(),v=ax(),g=X();me.exports=function(S,T){function C(P,p){return M.coerce(S,T,g,P,p)}v(S,T,C)}}}),$b=a({"src/components/fx/defaults.js"(pe,me){var M=o0(),v=ae(),g=ax();me.exports=function(S,T,C,P){function p(N,j){return M.coerce(S,T,v,N,j)}var Y=M.extendFlat({},P.hoverlabel);T.hovertemplate&&(Y.namelength=-1),g(S,T,p,Y)}}}),v_=a({"src/components/fx/hovermode_defaults.js"(pe,me){var M=o0(),v=X();me.exports=function(E,S){function T(C,P){return S[C]!==void 0?S[C]:M.coerce(E,S,v,C,P)}return T("clickmode"),T("hoversubplots"),T("hovermode")}}}),Zb=a({"src/components/fx/layout_defaults.js"(pe,me){var M=o0(),v=X(),g=v_(),E=ax();me.exports=function(T,C){function P(V,W){return M.coerce(T,C,v,V,W)}var p=g(T,C);p&&(P("hoverdistance"),P("spikedistance"));var Y=P("dragmode");Y==="select"&&P("selectdirection");var N=C._has("mapbox"),j=C._has("map"),ee=C._has("geo"),G=C._basePlotModules.length;C.dragmode==="zoom"&&((N||j||ee)&&G===1||(N||j)&&ee&&G===2)&&(C.dragmode="pan"),E(T,C,P),M.coerceFont(P,"hoverlabel.grouptitlefont",C.hoverlabel.font)}}}),nx=a({"src/components/fx/calc.js"(pe,me){var M=o0(),v=jp();me.exports=function(S){var T=S.calcdata,C=S._fullLayout;function P(ee){return function(G){return M.coerceHoverinfo({hoverinfo:G},{_module:ee._module},C)}}for(var p=0;p<T.length;p++){var Y=T[p],N=Y[0].trace;if(!v.traceIs(N,"pie-like")){var j=v.traceIs(N,"2dMap")?g:M.fillArray;j(N.hoverinfo,Y,"hi",P(N)),N.hovertemplate&&j(N.hovertemplate,Y,"ht"),N.hoverlabel&&(j(N.hoverlabel.bgcolor,Y,"hbg"),j(N.hoverlabel.bordercolor,Y,"hbc"),j(N.hoverlabel.font.size,Y,"hts"),j(N.hoverlabel.font.color,Y,"htc"),j(N.hoverlabel.font.family,Y,"htf"),j(N.hoverlabel.font.weight,Y,"htw"),j(N.hoverlabel.font.style,Y,"hty"),j(N.hoverlabel.font.variant,Y,"htv"),j(N.hoverlabel.namelength,Y,"hnl"),j(N.hoverlabel.align,Y,"hta"),j(N.hoverlabel.showarrow,Y,"htsa"))}}};function g(E,S,T,C){C=C||M.identity,Array.isArray(E)&&(S[0][T]=C(E))}}}),Kx=a({"src/components/fx/click.js"(pe,me){var M=jp(),v=x2().hover;me.exports=function(E,S,T){var C=M.getComponentMethod("annotations","onClick")(E,E._hoverdata);T!==void 0&&v(E,S,T,!0);function P(){E.emit("plotly_click",{points:E._hoverdata,event:S})}E._hoverdata&&S&&S.target&&(C&&C.then?C.then(P):P(),S.stopImmediatePropagation&&S.stopImmediatePropagation())}}}),uy=a({"src/components/fx/index.js"(pe,me){var M=f(),v=o0(),g=Gg(),E=jg(),S=X(),T=x2();me.exports={moduleType:"component",name:"fx",constants:J(),schema:{layout:S},attributes:ae(),layoutAttributes:S,supplyLayoutGlobalDefaults:Xb(),supplyDefaults:$b(),supplyLayoutDefaults:Zb(),calc:nx(),getDistanceFunction:E.getDistanceFunction,getClosest:E.getClosest,inbox:E.inbox,quadrature:E.quadrature,appendArrayPointValue:E.appendArrayPointValue,castHoverOption:P,castHoverinfo:p,hover:T.hover,unhover:g.unhover,loneHover:T.loneHover,loneUnhover:C,click:Kx()};function C(Y){var N=v.isD3Selection(Y)?Y:M.select(Y);N.selectAll("g.hovertext").remove(),N.selectAll(".spikeline").remove()}function P(Y,N,j){return v.castOption(Y,N,"hoverlabel."+j)}function p(Y,N,j){function ee(G){return v.coerceHoverinfo({hoverinfo:G},{_module:Y._module},N)}return v.castOption(Y,j,"hoverinfo",ee)}}}),Y_=a({"src/components/dragelement/helpers.js"(pe){pe.selectMode=function(me){return me==="lasso"||me==="select"},pe.drawMode=function(me){return me==="drawclosedpath"||me==="drawopenpath"||me==="drawline"||me==="drawrect"||me==="drawcircle"},pe.openMode=function(me){return me==="drawline"||me==="drawopenpath"},pe.rectMode=function(me){return me==="select"||me==="drawline"||me==="drawrect"||me==="drawcircle"},pe.freeMode=function(me){return me==="lasso"||me==="drawclosedpath"||me==="drawopenpath"},pe.selectingOrDrawing=function(me){return pe.freeMode(me)||pe.rectMode(me)}}}),ix=a({"src/lib/clear_gl_canvases.js"(pe,me){me.exports=function(v){var g=v._fullLayout;g._glcanvas&&g._glcanvas.size()&&g._glcanvas.each(function(E){E.regl&&E.regl.clear({color:!0,depth:!0})})}}}),X_=a({"src/fonts/ploticon.js"(pe,me){me.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:["<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'>"," <title>plotly-logomark</title>"," <g id='symbol'>","  <rect fill='#000' x='0' y='0' width='132' height='132' rx='18' ry='18'/>","  <circle fill='#9EF' cx='102' cy='30' r='6'/>","  <circle fill='#BAC' cx='78' cy='30' r='6'/>","  <circle fill='#BAC' cx='78' cy='54' r='6'/>","  <circle fill='#D69' cx='54' cy='30' r='6'/>","  <circle fill='#F26' cx='30' cy='30' r='6'/>","  <circle fill='#F26' cx='30' cy='54' r='6'/>","  <path fill='#FFF' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/>","  <path fill='#FFF' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/>","  <path fill='#FFF' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/>","  <path fill='#FFF' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/>"," </g>","</svg>"].join("")}}}}),g_=a({"src/components/shapes/draw_newshape/constants.js"(pe,me){var M=32;me.exports={CIRCLE_SIDES:M,i000:0,i090:M/4,i180:M/2,i270:M/4*3,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}}}),sx=a({"src/components/selections/helpers.js"(pe,me){var M=o0().strTranslate;function v(T,C){switch(T.type){case"log":return T.p2d(C);case"date":return T.p2r(C,0,T.calendar);default:return T.p2r(C)}}function g(T,C){switch(T.type){case"log":return T.d2p(C);case"date":return T.r2p(C,0,T.calendar);default:return T.r2p(C)}}function E(T){var C=T._id.charAt(0)==="y"?1:0;return function(P){return v(T,P[C])}}function S(T){return M(T.xaxis._offset,T.yaxis._offset)}me.exports={p2r:v,r2p:g,axValue:E,getTransform:S}}}),Zy=a({"src/components/shapes/draw_newshape/helpers.js"(pe){var me=dg(),M=g_(),v=M.CIRCLE_SIDES,g=M.SQRT2,E=sx(),S=E.p2r,T=E.r2p,C=[0,3,4,5,6,1,2],P=[0,3,4,1,2];pe.writePaths=function(N){var j=N.length;if(!j)return"M0,0Z";for(var ee="",G=0;G<j;G++)for(var V=N[G].length,W=0;W<V;W++){var q=N[G][W][0];if(q==="Z")ee+="Z";else for(var z=N[G][W].length,H=0;H<z;H++){var Z=H;q==="Q"||q==="S"?Z=P[H]:q==="C"&&(Z=C[H]),ee+=N[G][W][Z],H>0&&H<z-1&&(ee+=",")}}return ee},pe.readPaths=function(N,j,ee,G){var V=me(N),W=[],q=-1,z=function(){q++,W[q]=[]},H,Z=0,ne=0,te,Se,fe=function(){te=Z,Se=ne};fe();for(var ve=0;ve<V.length;ve++){var xe=[],re,de,be,Te,ye=V[ve][0],De=ye;switch(ye){case"M":z(),Z=+V[ve][1],ne=+V[ve][2],xe.push([De,Z,ne]),fe();break;case"Q":case"S":re=+V[ve][1],be=+V[ve][2],Z=+V[ve][3],ne=+V[ve][4],xe.push([De,Z,ne,re,be]);break;case"C":re=+V[ve][1],be=+V[ve][2],de=+V[ve][3],Te=+V[ve][4],Z=+V[ve][5],ne=+V[ve][6],xe.push([De,Z,ne,re,be,de,Te]);break;case"T":case"L":Z=+V[ve][1],ne=+V[ve][2],xe.push([De,Z,ne]);break;case"H":De="L",Z=+V[ve][1],xe.push([De,Z,ne]);break;case"V":De="L",ne=+V[ve][1],xe.push([De,Z,ne]);break;case"A":De="L";var Ue=+V[ve][1],he=+V[ve][2];+V[ve][4]||(Ue=-Ue,he=-he);var Be=Z-Ue,Ye=ne;for(H=1;H<=v/2;H++){var et=2*Math.PI*H/v;xe.push([De,Be+Ue*Math.cos(et),Ye+he*Math.sin(et)])}break;case"Z":(Z!==te||ne!==Se)&&(Z=te,ne=Se,xe.push([De,Z,ne]));break}for(var Qe=(ee||{}).domain,ft=j._fullLayout._size,mn=ee&&ee.xsizemode==="pixel",ta=ee&&ee.ysizemode==="pixel",Do=G===!1,Ae=0;Ae<xe.length;Ae++){for(H=0;H+2<7;H+=2){var ke=xe[Ae][H+1],ge=xe[Ae][H+2];ke===void 0||ge===void 0||(Z=ke,ne=ge,ee&&(ee.xaxis&&ee.xaxis.p2r?(Do&&(ke-=ee.xaxis._offset),mn?ke=T(ee.xaxis,ee.xanchor)+ke:ke=S(ee.xaxis,ke)):(Do&&(ke-=ft.l),Qe?ke=Qe.x[0]+ke/ft.w:ke=ke/ft.w),ee.yaxis&&ee.yaxis.p2r?(Do&&(ge-=ee.yaxis._offset),ta?ge=T(ee.yaxis,ee.yanchor)-ge:ge=S(ee.yaxis,ge)):(Do&&(ge-=ft.t),Qe?ge=Qe.y[1]-ge/ft.h:ge=1-ge/ft.h)),xe[Ae][H+1]=ke,xe[Ae][H+2]=ge)}W[q].push(xe[Ae].slice())}}return W};function p(N,j){return Math.abs(N-j)<=1e-6}function Y(N,j){var ee=j[1]-N[1],G=j[2]-N[2];return Math.sqrt(ee*ee+G*G)}pe.pointsOnRectangle=function(N){var j=N.length;if(j!==5)return!1;for(var ee=1;ee<3;ee++){var G=N[0][ee]-N[1][ee],V=N[3][ee]-N[2][ee];if(!p(G,V))return!1;var W=N[0][ee]-N[3][ee],q=N[1][ee]-N[2][ee];if(!p(W,q))return!1}return!p(N[0][1],N[1][1])&&!p(N[0][1],N[3][1])?!1:!!(Y(N[0],N[1])*Y(N[0],N[3]))},pe.pointsOnEllipse=function(N){var j=N.length;if(j!==v+1)return!1;j=v;for(var ee=0;ee<j;ee++){var G=(j*2-ee)%j,V=(j/2+G)%j,W=(j/2+ee)%j;if(!p(Y(N[ee],N[W]),Y(N[G],N[V])))return!1}return!0},pe.handleEllipse=function(N,j,ee){if(!N)return[j,ee];var G=pe.ellipseOver({x0:j[0],y0:j[1],x1:ee[0],y1:ee[1]}),V=(G.x1+G.x0)/2,W=(G.y1+G.y0)/2,q=(G.x1-G.x0)/2,z=(G.y1-G.y0)/2;q||(q=z=z/g),z||(z=q=q/g);for(var H=[],Z=0;Z<v;Z++){var ne=Z*2*Math.PI/v;H.push([V+q*Math.cos(ne),W+z*Math.sin(ne)])}return H},pe.ellipseOver=function(N){var j=N.x0,ee=N.y0,G=N.x1,V=N.y1,W=G-j,q=V-ee;j-=W,ee-=q;var z=(j+G)/2,H=(ee+V)/2,Z=g;return W*=Z,q*=Z,{x0:z-W,y0:H-q,x1:z+W,y1:H+q}},pe.fixDatesForPaths=function(N,j,ee){var G=j.type==="date",V=ee.type==="date";if(!G&&!V)return N;for(var W=0;W<N.length;W++)for(var q=0;q<N[W].length;q++)for(var z=0;z+2<N[W][q].length;z+=2)G&&(N[W][q][z+1]=N[W][q][z+1].replace(" ","_")),V&&(N[W][q][z+2]=N[W][q][z+2].replace(" ","_"));return N}}}),b2=a({"src/components/shapes/draw_newshape/newshapes.js"(pe,me){var M=Ov(),v=Y_(),g=v.drawMode,E=v.openMode,S=g_(),T=S.i000,C=S.i090,P=S.i180,p=S.i270,Y=S.cos45,N=S.sin45,j=sx(),ee=j.p2r,G=j.r2p,V=X1(),W=V.clearOutline,q=Zy(),z=q.readPaths,H=q.writePaths,Z=q.ellipseOver,ne=q.fixDatesForPaths;function te(fe,ve){if(fe.length){var xe=fe[0][0];if(xe){var re=ve.gd,de=ve.isActiveShape,be=ve.dragmode,Te=(re.layout||{}).shapes||[];if(!g(be)&&de!==void 0){var ye=re._fullLayout._activeShapeIndex;if(ye<Te.length)switch(re._fullLayout.shapes[ye].type){case"rect":be="drawrect";break;case"circle":be="drawcircle";break;case"line":be="drawline";break;case"path":var De=Te[ye].path||"";De[De.length-1]==="Z"?be="drawclosedpath":be="drawopenpath";break}}var Ue=Se(fe,ve,be);W(re);for(var he=ve.editHelpers,Be=(he||{}).modifyItem,Ye=[],et=0;et<Te.length;et++){var Qe=re._fullLayout.shapes[et];if(Ye[et]=Qe._input,de!==void 0&&et===re._fullLayout._activeShapeIndex){var ft=Ue;switch(Qe.type){case"line":case"rect":case"circle":var mn=M.getFromId(re,Qe.xref);Qe.xref.charAt(0)==="x"&&mn.type.includes("category")?(Be("x0",ft.x0-(Qe.x0shift||0)),Be("x1",ft.x1-(Qe.x1shift||0))):(Be("x0",ft.x0),Be("x1",ft.x1));var ta=M.getFromId(re,Qe.yref);Qe.yref.charAt(0)==="y"&&ta.type.includes("category")?(Be("y0",ft.y0-(Qe.y0shift||0)),Be("y1",ft.y1-(Qe.y1shift||0))):(Be("y0",ft.y0),Be("y1",ft.y1));break;case"path":Be("path",ft.path);break}}}return de===void 0?(Ye.push(Ue),Ye):he?he.getUpdateObj():{}}}}function Se(fe,ve,xe){var re=fe[0][0],de=ve.gd,be=re.getAttribute("d"),Te=de._fullLayout.newshape,ye=ve.plotinfo,De=ve.isActiveShape,Ue=ye.xaxis,he=ye.yaxis,Be=!!ye.domain||!ye.xaxis,Ye=!!ye.domain||!ye.yaxis,et=E(xe),Qe=z(be,de,ye,De),ft={editable:!0,visible:Te.visible,name:Te.name,showlegend:Te.showlegend,legend:Te.legend,legendwidth:Te.legendwidth,legendgroup:Te.legendgroup,legendgrouptitle:{text:Te.legendgrouptitle.text,font:Te.legendgrouptitle.font},legendrank:Te.legendrank,label:Te.label,xref:Be?"paper":Ue._id,yref:Ye?"paper":he._id,layer:Te.layer,opacity:Te.opacity,line:{color:Te.line.color,width:Te.line.width,dash:Te.line.dash}};et||(ft.fillcolor=Te.fillcolor,ft.fillrule=Te.fillrule);var mn;if(Qe.length===1&&(mn=Qe[0]),mn&&mn.length===5&&xe==="drawrect")ft.type="rect",ft.x0=mn[0][1],ft.y0=mn[0][2],ft.x1=mn[2][1],ft.y1=mn[2][2];else if(mn&&xe==="drawline")ft.type="line",ft.x0=mn[0][1],ft.y0=mn[0][2],ft.x1=mn[1][1],ft.y1=mn[1][2];else if(mn&&xe==="drawcircle"){ft.type="circle";var ta=mn[T][1],Do=mn[C][1],Ae=mn[P][1],ke=mn[p][1],ge=mn[T][2],Ce=mn[C][2],Je=mn[P][2],Re=mn[p][2],Q=ye.xaxis&&(ye.xaxis.type==="date"||ye.xaxis.type==="log"),ce=ye.yaxis&&(ye.yaxis.type==="date"||ye.yaxis.type==="log");Q&&(ta=G(ye.xaxis,ta),Do=G(ye.xaxis,Do),Ae=G(ye.xaxis,Ae),ke=G(ye.xaxis,ke)),ce&&(ge=G(ye.yaxis,ge),Ce=G(ye.yaxis,Ce),Je=G(ye.yaxis,Je),Re=G(ye.yaxis,Re));var Me=(Do+ke)/2,Le=(ge+Je)/2,tt=(ke-Do+Ae-ta)/2,bt=(Re-Ce+Je-ge)/2,Ct=Z({x0:Me,y0:Le,x1:Me+tt*Y,y1:Le+bt*N});Q&&(Ct.x0=ee(ye.xaxis,Ct.x0),Ct.x1=ee(ye.xaxis,Ct.x1)),ce&&(Ct.y0=ee(ye.yaxis,Ct.y0),Ct.y1=ee(ye.yaxis,Ct.y1)),ft.x0=Ct.x0,ft.y0=Ct.y0,ft.x1=Ct.x1,ft.y1=Ct.y1}else ft.type="path",Ue&&he&&ne(Qe,Ue,he),ft.path=H(Qe),mn=null;return ft}me.exports={newShapes:te,createShapeObj:Se}}}),Jx=a({"src/components/selections/draw_newselection/newselections.js"(pe,me){var M=Y_(),v=M.selectMode,g=X1(),E=g.clearOutline,S=Zy(),T=S.readPaths,C=S.writePaths,P=S.fixDatesForPaths;me.exports=function(Y,N){if(Y.length){var j=Y[0][0];if(j){var ee=j.getAttribute("d"),G=N.gd,V=G._fullLayout.newselection,W=N.plotinfo,q=W.xaxis,z=W.yaxis,H=N.isActiveSelection,Z=N.dragmode,ne=(G.layout||{}).selections||[];if(!v(Z)&&H!==void 0){var te=G._fullLayout._activeSelectionIndex;if(te<ne.length)switch(G._fullLayout.selections[te].type){case"rect":Z="select";break;case"path":Z="lasso";break}}var Se=T(ee,G,W,H),fe={xref:q._id,yref:z._id,opacity:V.opacity,line:{color:V.line.color,width:V.line.width,dash:V.line.dash}},ve;Se.length===1&&(ve=Se[0]),ve&&ve.length===5&&Z==="select"?(fe.type="rect",fe.x0=ve[0][1],fe.y0=ve[0][2],fe.x1=ve[2][1],fe.y1=ve[2][2]):(fe.type="path",q&&z&&P(Se,q,z),fe.path=C(Se),ve=null),E(G);for(var xe=N.editHelpers,re=(xe||{}).modifyItem,de=[],be=0;be<ne.length;be++){var Te=G._fullLayout.selections[be];if(!Te){de[be]=Te;continue}if(de[be]=Te._input,H!==void 0&&be===G._fullLayout._activeSelectionIndex){var ye=fe;switch(Te.type){case"rect":re("x0",ye.x0),re("x1",ye.x1),re("y0",ye.y0),re("y1",ye.y1);break;case"path":re("path",ye.path);break}}}return H===void 0?(de.push(fe),de):xe?xe.getUpdateObj():{}}}}}}),Ry=a({"src/components/shapes/constants.js"(pe,me){me.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}}}),fy=a({"src/components/shapes/helpers.js"(pe){var me=Ry(),M=o0(),v=g1();pe.rangeToShapePosition=function(S){return S.type==="log"?S.r2d:function(T){return T}},pe.shapePositionToRange=function(S){return S.type==="log"?S.d2r:function(T){return T}},pe.decodeDate=function(S){return function(T){return T.replace&&(T=T.replace("_"," ")),S(T)}},pe.encodeDate=function(S){return function(T){return S(T).replace(" ","_")}},pe.extractPathCoords=function(S,T,C){var P=[],p=S.match(me.segmentRE);return p.forEach(function(Y){var N=T[Y.charAt(0)].drawn;if(N!==void 0){var j=Y.substr(1).match(me.paramRE);if(!(!j||j.length<N)){var ee=j[N],G=C?ee:M.cleanNumber(ee);P.push(G)}}}),P},pe.getDataToPixel=function(S,T,C,P,p){var Y=S._fullLayout._size,N;if(T)if(p==="domain")N=function(ee){return T._length*(P?1-ee:ee)+T._offset};else{var j=pe.shapePositionToRange(T);N=function(ee){var G=E(T,C);return T._offset+T.r2p(j(ee,!0))+G},T.type==="date"&&(N=pe.decodeDate(N))}else P?N=function(ee){return Y.t+Y.h*(1-ee)}:N=function(ee){return Y.l+Y.w*ee};return N},pe.getPixelToData=function(S,T,C,P){var p=S._fullLayout._size,Y;if(T)if(P==="domain")Y=function(j){var ee=(j-T._offset)/T._length;return C?1-ee:ee};else{var N=pe.rangeToShapePosition(T);Y=function(j){return N(T.p2r(j-T._offset))}}else C?Y=function(j){return 1-(j-p.t)/p.h}:Y=function(j){return(j-p.l)/p.w};return Y},pe.roundPositionForSharpStrokeRendering=function(S,T){var C=Math.round(T%2)===1,P=Math.round(S);return C?P+.5:P},pe.makeShapesOptionsAndPlotinfo=function(S,T){var C=S._fullLayout.shapes[T]||{},P=S._fullLayout._plots[C.xref+C.yref],p=!!P;return p?P._hadPlotinfo=!0:(P={},C.xref&&C.xref!=="paper"&&(P.xaxis=S._fullLayout[C.xref+"axis"]),C.yref&&C.yref!=="paper"&&(P.yaxis=S._fullLayout[C.yref+"axis"])),P.xsizemode=C.xsizemode,P.ysizemode=C.ysizemode,P.xanchor=C.xanchor,P.yanchor=C.yanchor,{options:C,plotinfo:P}},pe.makeSelectionsOptionsAndPlotinfo=function(S,T){var C=S._fullLayout.selections[T]||{},P=S._fullLayout._plots[C.xref+C.yref],p=!!P;return p?P._hadPlotinfo=!0:(P={},C.xref&&(P.xaxis=S._fullLayout[C.xref+"axis"]),C.yref&&(P.yaxis=S._fullLayout[C.yref+"axis"])),{options:C,plotinfo:P}},pe.getPathString=function(S,T){var C=T.type,P=v.getRefType(T.xref),p=v.getRefType(T.yref),Y=v.getFromId(S,T.xref),N=v.getFromId(S,T.yref),j=S._fullLayout._size,ee,G,V,W,q=E(Y,T.x0shift),z=E(Y,T.x1shift),H=E(N,T.y0shift),Z=E(N,T.y1shift),ne,te,Se,fe;if(Y?P==="domain"?G=function(he){return Y._offset+Y._length*he}:(ee=pe.shapePositionToRange(Y),G=function(he){return Y._offset+Y.r2p(ee(he,!0))}):G=function(he){return j.l+j.w*he},N?p==="domain"?W=function(he){return N._offset+N._length*(1-he)}:(V=pe.shapePositionToRange(N),W=function(he){return N._offset+N.r2p(V(he,!0))}):W=function(he){return j.t+j.h*(1-he)},C==="path")return Y&&Y.type==="date"&&(G=pe.decodeDate(G)),N&&N.type==="date"&&(W=pe.decodeDate(W)),g(T,G,W);if(T.xsizemode==="pixel"){var ve=G(T.xanchor);ne=ve+T.x0+q,te=ve+T.x1+z}else ne=G(T.x0)+q,te=G(T.x1)+z;if(T.ysizemode==="pixel"){var xe=W(T.yanchor);Se=xe-T.y0+H,fe=xe-T.y1+Z}else Se=W(T.y0)+H,fe=W(T.y1)+Z;if(C==="line")return"M"+ne+","+Se+"L"+te+","+fe;if(C==="rect")return"M"+ne+","+Se+"H"+te+"V"+fe+"H"+ne+"Z";var re=(ne+te)/2,de=(Se+fe)/2,be=Math.abs(re-ne),Te=Math.abs(de-Se),ye="A"+be+","+Te,De=re+be+","+de,Ue=re+","+(de-Te);return"M"+De+ye+" 0 1,1 "+Ue+ye+" 0 0,1 "+De+"Z"};function g(S,T,C){var P=S.path,p=S.xsizemode,Y=S.ysizemode,N=S.xanchor,j=S.yanchor;return P.replace(me.segmentRE,function(ee){var G=0,V=ee.charAt(0),W=me.paramIsX[V],q=me.paramIsY[V],z=me.numParams[V],H=ee.substr(1).replace(me.paramRE,function(Z){return W[G]?p==="pixel"?Z=T(N)+Number(Z):Z=T(Z):q[G]&&(Y==="pixel"?Z=C(j)-Number(Z):Z=C(Z)),G++,G>z&&(Z="X"),Z});return G>z&&(H=H.replace(/[\s,]*X.*/,""),M.log("Ignoring extra params in segment "+ee)),V+H})}function E(S,T){T=T||0;var C=0;return T&&S&&(S.type==="category"||S.type==="multicategory")&&(C=(S.r2p(1)-S.r2p(0))*T),C}}}),Qx=a({"src/components/shapes/display_labels.js"(pe,me){var M=o0(),v=g1(),g=v1(),E=t1(),S=Zy().readPaths,T=fy(),C=T.getPathString,P=Np(),p=f1().FROM_TL;me.exports=function(ee,G,V,W){if(W.selectAll(".shape-label").remove(),!!(V.label.text||V.label.texttemplate)){var q;if(V.label.texttemplate){var z={};if(V.type!=="path"){var H=v.getFromId(ee,V.xref),Z=v.getFromId(ee,V.yref);for(var ne in P){var te=P[ne](V,H,Z);te!==void 0&&(z[ne]=te)}}q=M.texttemplateStringForShapes(V.label.texttemplate,{},ee._fullLayout._d3locale,z)}else q=V.label.text;var Se={"data-index":G},fe=V.label.font,ve={"data-notex":1},xe=W.append("g").attr(Se).classed("shape-label",!0),re=xe.append("text").attr(ve).classed("shape-label-text",!0).text(q),de,be,Te,ye;if(V.path){var De=C(ee,V),Ue=S(De,ee);de=1/0,Te=1/0,be=-1/0,ye=-1/0;for(var he=0;he<Ue.length;he++)for(var Be=0;Be<Ue[he].length;Be++)for(var Ye=Ue[he][Be],et=1;et<Ye.length;et+=2){var Qe=Ye[et],ft=Ye[et+1];de=Math.min(de,Qe),be=Math.max(be,Qe),Te=Math.min(Te,ft),ye=Math.max(ye,ft)}}else{var mn=v.getFromId(ee,V.xref),ta=V.x0shift,Do=V.x1shift,Ae=v.getRefType(V.xref),ke=v.getFromId(ee,V.yref),ge=V.y0shift,Ce=V.y1shift,Je=v.getRefType(V.yref),Re=function(yi,Fl){var Yl=T.getDataToPixel(ee,mn,Fl,!1,Ae);return Yl(yi)},Q=function(yi,Fl){var Yl=T.getDataToPixel(ee,ke,Fl,!0,Je);return Yl(yi)};de=Re(V.x0,ta),be=Re(V.x1,Do),Te=Q(V.y0,ge),ye=Q(V.y1,Ce)}var ce=V.label.textangle;ce==="auto"&&(V.type==="line"?ce=Y(de,Te,be,ye):ce=0),re.call(function(yi){return yi.call(E.font,fe).attr({}),g.convertToTspans(yi,ee),yi});var Me=E.bBox(re.node()),Le=N(de,Te,be,ye,V,ce,Me),tt=Le.textx,bt=Le.texty,Ct=Le.xanchor;re.attr({"text-anchor":{left:"start",center:"middle",right:"end"}[Ct],y:bt,x:tt,transform:"rotate("+ce+","+tt+","+bt+")"}).call(g.positionText,tt,bt)}};function Y(j,ee,G,V){var W,q;return q=Math.abs(G-j),G>=j?W=ee-V:W=V-ee,-180/Math.PI*Math.atan2(W,q)}function N(j,ee,G,V,W,q,z){var H=W.label.textposition,Z=W.label.textangle,ne=W.label.padding,te=W.type,Se=Math.PI/180*q,fe=Math.sin(Se),ve=Math.cos(Se),xe=W.label.xanchor,re=W.label.yanchor,de,be,Te,ye;if(te==="line"){H==="start"?(de=j,be=ee):H==="end"?(de=G,be=V):(de=(j+G)/2,be=(ee+V)/2),xe==="auto"&&(H==="start"?Z==="auto"?G>j?xe="left":G<j?xe="right":xe="center":G>j?xe="right":G<j?xe="left":xe="center":H==="end"?Z==="auto"?G>j?xe="right":G<j?xe="left":xe="center":G>j?xe="left":G<j?xe="right":xe="center":xe="center");var De={left:1,center:0,right:-1},Ue={bottom:-1,middle:0,top:1};if(Z==="auto"){var he=Ue[re];Te=-ne*fe*he,ye=ne*ve*he}else{var Be=De[xe],Ye=Ue[re];Te=ne*Be,ye=ne*Ye}de=de+Te,be=be+ye}else Te=ne+3,H.indexOf("right")!==-1?(de=Math.max(j,G)-Te,xe==="auto"&&(xe="right")):H.indexOf("left")!==-1?(de=Math.min(j,G)+Te,xe==="auto"&&(xe="left")):(de=(j+G)/2,xe==="auto"&&(xe="center")),H.indexOf("top")!==-1?be=Math.min(ee,V):H.indexOf("bottom")!==-1?be=Math.max(ee,V):be=(ee+V)/2,ye=ne,re==="bottom"?be=be-ye:re==="top"&&(be=be+ye);var et=p[re],Qe=W.label.font.size,ft=z.height,mn=(ft*et-Qe)*fe,ta=-(ft*et-Qe)*ve;return{textx:de+mn,texty:be+ta,xanchor:xe}}}}),ox=a({"src/components/shapes/display_outlines.js"(pe,me){var M=o0(),v=M.strTranslate,g=Gg(),E=Y_(),S=E.drawMode,T=E.selectMode,C=jp(),P=Oe(),p=g_(),Y=p.i000,N=p.i090,j=p.i180,ee=p.i270,G=X1(),V=G.clearOutlineControllers,W=Zy(),q=W.pointsOnRectangle,z=W.pointsOnEllipse,H=W.writePaths,Z=b2().newShapes,ne=b2().createShapeObj,te=Jx(),Se=Qx();me.exports=function re(de,be,Te,ye){ye||(ye=0);var De=Te.gd;function Ue(){re(de,be,Te,ye++),(z(de[0])||Te.hasText)&&he({redrawing:!0})}function he(Fp){var Up={};Te.isActiveShape!==void 0&&(Te.isActiveShape=!1,Up=Z(be,Te)),Te.isActiveSelection!==void 0&&(Te.isActiveSelection=!1,Up=te(be,Te),De._fullLayout._reselect=!0),Object.keys(Up).length&&C.call((Fp||{}).redrawing?"relayout":"_guiRelayout",De,Up)}var Be=De._fullLayout,Ye=Be._zoomlayer,et=Te.dragmode,Qe=S(et),ft=T(et);(Qe||ft)&&(De._fullLayout._outlining=!0),V(De),be.attr("d",H(de));var mn,ta,Do,Ae,ke;if(!ye&&(Te.isActiveShape||Te.isActiveSelection)){ke=fe([],de);var ge=Ye.append("g").attr("class","outline-controllers");tt(ge),qp()}if(Qe&&Te.hasText){var Ce=Ye.select(".label-temp"),Je=ne(be,Te,Te.dragmode);Se(De,"label-temp",Je,Ce)}function Re(Fp){Do=+Fp.srcElement.getAttribute("data-i"),Ae=+Fp.srcElement.getAttribute("data-j"),mn[Do][Ae].moveFn=Q}function Q(Fp,Up){if(de.length){var _r=ke[Do][Ae][1],gs=ke[Do][Ae][2],dr=de[Do],Lo=dr.length;if(q(dr)){var Cp=Fp,Hp=Up;if(Te.isActiveSelection){var e0=ve(dr,Ae);e0[1]===dr[Ae][1]?Hp=0:Cp=0}for(var t0=0;t0<Lo;t0++)if(t0!==Ae){var n0=dr[t0];n0[1]===dr[Ae][1]&&(n0[1]=_r+Cp),n0[2]===dr[Ae][2]&&(n0[2]=gs+Hp)}if(dr[Ae][1]=_r+Cp,dr[Ae][2]=gs+Hp,!q(dr))for(var y0=0;y0<Lo;y0++)for(var h0=0;h0<dr[y0].length;h0++)dr[y0][h0]=ke[Do][y0][h0]}else dr[Ae][1]=_r+Fp,dr[Ae][2]=gs+Up;Ue()}}function ce(){he()}function Me(){if(de.length&&de[Do]&&de[Do].length){for(var Fp=[],Up=0;Up<de[Do].length;Up++)Up!==Ae&&Fp.push(de[Do][Up]);Fp.length>1&&!(Fp.length===2&&Fp[1][0]==="Z")&&(Ae===0&&(Fp[0][0]="M"),de[Do]=Fp,Ue(),he())}}function Le(Fp,Up){if(Fp===2){Do=+Up.srcElement.getAttribute("data-i"),Ae=+Up.srcElement.getAttribute("data-j");var _r=de[Do];!q(_r)&&!z(_r)&&Me()}}function tt(Fp){mn=[];for(var Up=0;Up<de.length;Up++){var _r=de[Up],gs=q(_r),dr=!gs&&z(_r);mn[Up]=[];for(var Lo=_r.length,Cp=0;Cp<Lo;Cp++)if(_r[Cp][0]!=="Z"&&!(dr&&Cp!==Y&&Cp!==N&&Cp!==j&&Cp!==ee)){var Hp=gs&&Te.isActiveSelection,e0;Hp&&(e0=ve(_r,Cp));var t0=_r[Cp][1],n0=_r[Cp][2],y0=Fp.append(Hp?"rect":"circle").attr("data-i",Up).attr("data-j",Cp).style({fill:P.background,stroke:P.defaultLine,"stroke-width":1,"shape-rendering":"crispEdges"});if(Hp){var h0=e0[1]-t0,I0=e0[2]-n0,Kp=I0?5:Math.max(Math.min(25,Math.abs(h0)-5),5),B0=h0?5:Math.max(Math.min(25,Math.abs(I0)-5),5);y0.classed(I0?"cursor-ew-resize":"cursor-ns-resize",!0).attr("width",Kp).attr("height",B0).attr("x",t0-Kp/2).attr("y",n0-B0/2).attr("transform",v(h0/2,I0/2))}else y0.classed("cursor-grab",!0).attr("r",5).attr("cx",t0).attr("cy",n0);mn[Up][Cp]={element:y0.node(),gd:De,prepFn:Re,doneFn:ce,clickFn:Le},g.init(mn[Up][Cp])}}}function bt(Fp,Up){if(de.length)for(var _r=0;_r<de.length;_r++)for(var gs=0;gs<de[_r].length;gs++)for(var dr=0;dr+2<de[_r][gs].length;dr+=2)de[_r][gs][dr+1]=ke[_r][gs][dr+1]+Fp,de[_r][gs][dr+2]=ke[_r][gs][dr+2]+Up}function Ct(Fp,Up){bt(Fp,Up),Ue()}function yi(Fp){Do=+Fp.srcElement.getAttribute("data-i"),Do||(Do=0),ta[Do].moveFn=Ct}function Fl(){he()}function Yl(Fp){Fp===2&&xe(De)}function qp(){if(ta=[],!!de.length){var Fp=0;ta[Fp]={element:be[0][0],gd:De,prepFn:yi,doneFn:Fl,clickFn:Yl},g.init(ta[Fp])}}};function fe(re,de){for(var be=0;be<de.length;be++){var Te=de[be];re[be]=[];for(var ye=0;ye<Te.length;ye++){re[be][ye]=[];for(var De=0;De<Te[ye].length;De++)re[be][ye][De]=Te[ye][De]}}return re}function ve(re,de){var be=re[de][1],Te=re[de][2],ye=re.length,De,Ue,he;return De=(de+1)%ye,Ue=re[De][1],he=re[De][2],Ue===be&&he===Te&&(De=(de+2)%ye,Ue=re[De][1],he=re[De][2]),[De,Ue,he]}function xe(re){if(T(re._fullLayout.dragmode)){V(re);var de=re._fullLayout._activeSelectionIndex,be=(re.layout||{}).selections||[];if(de<be.length){for(var Te=[],ye=0;ye<be.length;ye++)ye!==de&&Te.push(be[ye]);delete re._fullLayout._activeSelectionIndex;var De=re._fullLayout.selections[de];re._fullLayout._deselect={xref:De.xref,yref:De.yref},C.call("_guiRelayout",re,{selections:Te})}}}}}),lx=a({"src/components/shapes/draw.js"(pe,me){var M=f(),v=jp(),g=o0(),E=g1(),S=Zy().readPaths,T=ox(),C=Qx(),P=X1().clearOutlineControllers,p=Oe(),Y=t1(),N=Vm().arrayEditor,j=Gg(),ee=$1(),G=Ry(),V=fy(),W=V.getPathString;me.exports={draw:q,drawOne:Z,eraseActiveShape:xe,drawLabel:C};function q(re){var de=re._fullLayout;de._shapeUpperLayer.selectAll("path").remove(),de._shapeLowerLayer.selectAll("path").remove(),de._shapeUpperLayer.selectAll("text").remove(),de._shapeLowerLayer.selectAll("text").remove();for(var be in de._plots){var Te=de._plots[be].shapelayer;Te&&(Te.selectAll("path").remove(),Te.selectAll("text").remove())}for(var ye=0;ye<de.shapes.length;ye++)de.shapes[ye].visible===!0&&Z(re,ye)}function z(re){return!!re._fullLayout._outlining}function H(re){return!re._context.edits.shapePosition}function Z(re,de){re._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+de+'"]').remove();var be=V.makeShapesOptionsAndPlotinfo(re,de),Te=be.options,ye=be.plotinfo;if(!Te._input||Te.visible!==!0)return;if(Te.layer==="above")Ue(re._fullLayout._shapeUpperLayer);else if(Te.xref==="paper"||Te.yref==="paper")Ue(re._fullLayout._shapeLowerLayer);else if(Te.layer==="between")Ue(ye.shapelayerBetween);else if(ye._hadPlotinfo){var De=ye.mainplotinfo||ye;Ue(De.shapelayer)}else Ue(re._fullLayout._shapeLowerLayer);function Ue(he){var Be=W(re,Te),Ye={"data-index":de,"fill-rule":Te.fillrule,d:Be},et=Te.opacity,Qe=Te.fillcolor,ft=Te.line.width?Te.line.color:"rgba(0,0,0,0)",mn=Te.line.width,ta=Te.line.dash;!mn&&Te.editable===!0&&(mn=5,ta="solid");var Do=Be[Be.length-1]!=="Z",Ae=H(re)&&Te.editable&&re._fullLayout._activeShapeIndex===de;Ae&&(Qe=Do?"rgba(0,0,0,0)":re._fullLayout.activeshape.fillcolor,et=re._fullLayout.activeshape.opacity);var ke=he.append("g").classed("shape-group",!0).attr({"data-index":de}),ge=ke.append("path").attr(Ye).style("opacity",et).call(p.stroke,ft).call(p.fill,Qe).call(Y.dashLine,ta,mn);ne(ke,re,Te),C(re,de,Te,ke);var Ce;if((Ae||re._context.edits.shapePosition)&&(Ce=N(re.layout,"shapes",Te)),Ae){ge.style({cursor:"move"});var Je={element:ge.node(),plotinfo:ye,gd:re,editHelpers:Ce,hasText:Te.label.text||Te.label.texttemplate,isActiveShape:!0},Re=S(Be,re);T(Re,ge,Je)}else re._context.edits.shapePosition?te(re,ge,Te,de,he,Ce):Te.editable===!0&&ge.style("pointer-events",Do||p.opacity(Qe)*et<=.5?"stroke":"all");ge.node().addEventListener("click",function(){return fe(re,ge)})}}function ne(re,de,be){var Te=(be.xref+be.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");Y.setClipUrl(re,Te?"clip"+de._fullLayout._uid+Te:null,de)}function te(re,de,be,Te,ye,De){var Ue=10,he=10,Be=be.xsizemode==="pixel",Ye=be.ysizemode==="pixel",et=be.type==="line",Qe=be.type==="path",ft=De.modifyItem,mn,ta,Do,Ae,ke,ge,Ce,Je,Re,Q,ce,Me,Le,tt,bt,Ct=M.select(de.node().parentNode),yi=E.getFromId(re,be.xref),Fl=E.getRefType(be.xref),Yl=E.getFromId(re,be.yref),qp=E.getRefType(be.yref),Fp=be.x0shift,Up=be.x1shift,_r=be.y0shift,gs=be.y1shift,dr=function(Ve,pn){var ci=V.getDataToPixel(re,yi,pn,!1,Fl);return ci(Ve)},Lo=function(Ve,pn){var ci=V.getDataToPixel(re,Yl,pn,!0,qp);return ci(Ve)},Cp=V.getPixelToData(re,yi,!1,Fl),Hp=V.getPixelToData(re,Yl,!0,qp),e0=y0(),t0={element:e0.node(),gd:re,prepFn:Kp,doneFn:B0,clickFn:em},n0;j.init(t0),e0.node().onmousemove=I0;function y0(){return et?h0():de}function h0(){var Ve=10,pn=Math.max(be.line.width,Ve),ci=ye.append("g").attr("data-index",Te).attr("drag-helper",!0);ci.append("path").attr("d",de.attr("d")).style({cursor:"move","stroke-width":pn,"stroke-opacity":"0"});var _n={"fill-opacity":"0"},Tp=Math.max(pn/2,Ve);return ci.append("circle").attr({"data-line-point":"start-point",cx:Be?dr(be.xanchor)+be.x0:dr(be.x0,Fp),cy:Ye?Lo(be.yanchor)-be.y0:Lo(be.y0,_r),r:Tp}).style(_n).classed("cursor-grab",!0),ci.append("circle").attr({"data-line-point":"end-point",cx:Be?dr(be.xanchor)+be.x1:dr(be.x1,Up),cy:Ye?Lo(be.yanchor)-be.y1:Lo(be.y1,gs),r:Tp}).style(_n).classed("cursor-grab",!0),ci}function I0(Ve){if(z(re)){n0=null;return}if(et)Ve.target.tagName==="path"?n0="move":n0=Ve.target.attributes["data-line-point"].value==="start-point"?"resize-over-start-point":"resize-over-end-point";else{var pn=t0.element.getBoundingClientRect(),ci=pn.right-pn.left,_n=pn.bottom-pn.top,Tp=Ve.clientX-pn.left,Sp=Ve.clientY-pn.top,Ip=!Qe&&ci>Ue&&_n>he&&!Ve.shiftKey?j.getCursor(Tp/ci,1-Sp/_n):"move";ee(de,Ip),n0=Ip.split("-")[0]}}function Kp(Ve){z(re)||(Be&&(ke=dr(be.xanchor)),Ye&&(ge=Lo(be.yanchor)),be.type==="path"?bt=be.path:(mn=Be?be.x0:dr(be.x0),ta=Ye?be.y0:Lo(be.y0),Do=Be?be.x1:dr(be.x1),Ae=Ye?be.y1:Lo(be.y1)),mn<Do?(Re=mn,Le="x0",Q=Do,tt="x1"):(Re=Do,Le="x1",Q=mn,tt="x0"),!Ye&&ta<Ae||Ye&&ta>Ae?(Ce=ta,ce="y0",Je=Ae,Me="y1"):(Ce=Ae,ce="y1",Je=ta,Me="y0"),I0(Ve),vs(ye,be),zl(de,be,re),t0.moveFn=n0==="move"?k0:J0,t0.altKey=Ve.altKey)}function B0(){z(re)||(ee(de),jl(ye),ne(de,re,be),v.call("_guiRelayout",re,De.getUpdateObj()))}function em(){z(re)||jl(ye)}function k0(Ve,pn){if(be.type==="path"){var ci=function(Sp){return Sp},_n=ci,Tp=ci;Be?ft("xanchor",be.xanchor=Cp(ke+Ve)):(_n=function(Ip){return Cp(dr(Ip)+Ve)},yi&&yi.type==="date"&&(_n=V.encodeDate(_n))),Ye?ft("yanchor",be.yanchor=Hp(ge+pn)):(Tp=function(Ip){return Hp(Lo(Ip)+pn)},Yl&&Yl.type==="date"&&(Tp=V.encodeDate(Tp))),ft("path",be.path=Se(bt,_n,Tp))}else Be?ft("xanchor",be.xanchor=Cp(ke+Ve)):(ft("x0",be.x0=Cp(mn+Ve)),ft("x1",be.x1=Cp(Do+Ve))),Ye?ft("yanchor",be.yanchor=Hp(ge+pn)):(ft("y0",be.y0=Hp(ta+pn)),ft("y1",be.y1=Hp(Ae+pn)));de.attr("d",W(re,be)),vs(ye,be),C(re,Te,be,Ct)}function J0(Ve,pn){if(Qe){var ci=function(mm){return mm},_n=ci,Tp=ci;Be?ft("xanchor",be.xanchor=Cp(ke+Ve)):(_n=function(vm){return Cp(dr(vm)+Ve)},yi&&yi.type==="date"&&(_n=V.encodeDate(_n))),Ye?ft("yanchor",be.yanchor=Hp(ge+pn)):(Tp=function(vm){return Hp(Lo(vm)+pn)},Yl&&Yl.type==="date"&&(Tp=V.encodeDate(Tp))),ft("path",be.path=Se(bt,_n,Tp))}else if(et){if(n0==="resize-over-start-point"){var Sp=mn+Ve,Ip=Ye?ta-pn:ta+pn;ft("x0",be.x0=Be?Sp:Cp(Sp)),ft("y0",be.y0=Ye?Ip:Hp(Ip))}else if(n0==="resize-over-end-point"){var Jp=Do+Ve,m0=Ye?Ae-pn:Ae+pn;ft("x1",be.x1=Be?Jp:Cp(Jp)),ft("y1",be.y1=Ye?m0:Hp(m0))}}else{var Dp=function(mm){return n0.indexOf(mm)!==-1},c0=Dp("n"),b0=Dp("s"),E0=Dp("w"),gm=Dp("e"),Nm=c0?Ce+pn:Ce,Bm=b0?Je+pn:Je,xm=E0?Re+Ve:Re,Am=gm?Q+Ve:Q;Ye&&(c0&&(Nm=Ce-pn),b0&&(Bm=Je-pn)),(!Ye&&Bm-Nm>he||Ye&&Nm-Bm>he)&&(ft(ce,be[ce]=Ye?Nm:Hp(Nm)),ft(Me,be[Me]=Ye?Bm:Hp(Bm))),Am-xm>Ue&&(ft(Le,be[Le]=Be?xm:Cp(xm)),ft(tt,be[tt]=Be?Am:Cp(Am)))}de.attr("d",W(re,be)),vs(ye,be),C(re,Te,be,Ct)}function vs(Ve,pn){(Be||Ye)&&ci();function ci(){var _n=pn.type!=="path",Tp=Ve.selectAll(".visual-cue").data([0]),Sp=1;Tp.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":Sp}).classed("visual-cue",!0);var Ip=dr(Be?pn.xanchor:g.midRange(_n?[pn.x0,pn.x1]:V.extractPathCoords(pn.path,G.paramIsX))),Jp=Lo(Ye?pn.yanchor:g.midRange(_n?[pn.y0,pn.y1]:V.extractPathCoords(pn.path,G.paramIsY)));if(Ip=V.roundPositionForSharpStrokeRendering(Ip,Sp),Jp=V.roundPositionForSharpStrokeRendering(Jp,Sp),Be&&Ye){var m0="M"+(Ip-1-Sp)+","+(Jp-1-Sp)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z";Tp.attr("d",m0)}else if(Be){var Dp="M"+(Ip-1-Sp)+","+(Jp-9-Sp)+"v18 h2 v-18 Z";Tp.attr("d",Dp)}else{var c0="M"+(Ip-9-Sp)+","+(Jp-1-Sp)+"h18 v2 h-18 Z";Tp.attr("d",c0)}}}function jl(Ve){Ve.selectAll(".visual-cue").remove()}function zl(Ve,pn,ci){var _n=pn.xref,Tp=pn.yref,Sp=E.getFromId(ci,_n),Ip=E.getFromId(ci,Tp),Jp="";_n!=="paper"&&!Sp.autorange&&(Jp+=_n),Tp!=="paper"&&!Ip.autorange&&(Jp+=Tp),Y.setClipUrl(Ve,Jp?"clip"+ci._fullLayout._uid+Jp:null,ci)}}function Se(re,de,be){return re.replace(G.segmentRE,function(Te){var ye=0,De=Te.charAt(0),Ue=G.paramIsX[De],he=G.paramIsY[De],Be=G.numParams[De],Ye=Te.substr(1).replace(G.paramRE,function(et){return ye>=Be||(Ue[ye]?et=de(et):he[ye]&&(et=be(et)),ye++),et});return De+Ye})}function fe(re,de){if(H(re)){var be=de.node(),Te=+be.getAttribute("data-index");if(Te>=0){if(Te===re._fullLayout._activeShapeIndex){ve(re);return}re._fullLayout._activeShapeIndex=Te,re._fullLayout._deactivateShape=ve,q(re)}}}function ve(re){if(H(re)){var de=re._fullLayout._activeShapeIndex;de>=0&&(P(re),delete re._fullLayout._activeShapeIndex,q(re))}}function xe(re){if(H(re)){P(re);var de=re._fullLayout._activeShapeIndex,be=(re.layout||{}).shapes||[];if(de<be.length){for(var Te=[],ye=0;ye<be.length;ye++)ye!==de&&Te.push(be[ye]);return delete re._fullLayout._activeShapeIndex,v.call("_guiRelayout",re,{shapes:Te})}}}}}),eb=a({"src/components/modebar/buttons.js"(pe,me){var M=jp(),v=p1(),g=Ov(),E=X_(),S=lx().eraseActiveShape,T=o0(),C=T._,P=me.exports={};P.toImage={name:"toImage",title:function(te){var Se=te._context.toImageButtonOptions||{},fe=Se.format||"png";return fe==="png"?C(te,"Download plot as a PNG"):C(te,"Download plot")},icon:E.camera,click:function(te){var Se=te._context.toImageButtonOptions,fe={format:Se.format||"png"};T.notifier(C(te,"Taking snapshot - this may take a few seconds"),"long"),["filename","width","height","scale"].forEach(function(ve){ve in Se&&(fe[ve]=Se[ve])}),M.call("downloadImage",te,fe).then(function(ve){T.notifier(C(te,"Snapshot succeeded")+" - "+ve,"long")}).catch(function(){T.notifier(C(te,"Sorry, there was a problem downloading your snapshot!"),"long")})}},P.sendDataToCloud={name:"sendDataToCloud",title:function(te){return C(te,"Edit in Chart Studio")},icon:E.disk,click:function(te){v.sendDataToCloud(te)}},P.editInChartStudio={name:"editInChartStudio",title:function(te){return C(te,"Edit in Chart Studio")},icon:E.pencil,click:function(te){v.sendDataToCloud(te)}},P.zoom2d={name:"zoom2d",_cat:"zoom",title:function(te){return C(te,"Zoom")},attr:"dragmode",val:"zoom",icon:E.zoombox,click:p},P.pan2d={name:"pan2d",_cat:"pan",title:function(te){return C(te,"Pan")},attr:"dragmode",val:"pan",icon:E.pan,click:p},P.select2d={name:"select2d",_cat:"select",title:function(te){return C(te,"Box Select")},attr:"dragmode",val:"select",icon:E.selectbox,click:p},P.lasso2d={name:"lasso2d",_cat:"lasso",title:function(te){return C(te,"Lasso Select")},attr:"dragmode",val:"lasso",icon:E.lasso,click:p},P.drawclosedpath={name:"drawclosedpath",title:function(te){return C(te,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:E.drawclosedpath,click:p},P.drawopenpath={name:"drawopenpath",title:function(te){return C(te,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:E.drawopenpath,click:p},P.drawline={name:"drawline",title:function(te){return C(te,"Draw line")},attr:"dragmode",val:"drawline",icon:E.drawline,click:p},P.drawrect={name:"drawrect",title:function(te){return C(te,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:E.drawrect,click:p},P.drawcircle={name:"drawcircle",title:function(te){return C(te,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:E.drawcircle,click:p},P.eraseshape={name:"eraseshape",title:function(te){return C(te,"Erase active shape")},icon:E.eraseshape,click:S},P.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(te){return C(te,"Zoom in")},attr:"zoom",val:"in",icon:E.zoom_plus,click:p},P.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(te){return C(te,"Zoom out")},attr:"zoom",val:"out",icon:E.zoom_minus,click:p},P.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(te){return C(te,"Autoscale")},attr:"zoom",val:"auto",icon:E.autoscale,click:p},P.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(te){return C(te,"Reset axes")},attr:"zoom",val:"reset",icon:E.home,click:p},P.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(te){return C(te,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:E.tooltip_basic,gravity:"ne",click:p},P.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(te){return C(te,"Compare data on hover")},attr:"hovermode",val:function(te){return te._fullLayout._isHoriz?"y":"x"},icon:E.tooltip_compare,gravity:"ne",click:p};function p(te,Se){var fe=Se.currentTarget,ve=fe.getAttribute("data-attr"),xe=fe.getAttribute("data-val")||!0,re=te._fullLayout,de={},be=g.list(te,null,!0),Te=re._cartesianSpikesEnabled,ye,De;if(ve==="zoom"){var Ue=xe==="in"?.5:2,he=(1+Ue)/2,Be=(1-Ue)/2,Ye,et;for(De=0;De<be.length;De++)if(ye=be[De],et=ye.modebardisable==="none"||ye.modebardisable.indexOf(xe==="auto"||xe==="reset"?"autoscale":"zoominout")===-1,et&&!ye.fixedrange)if(Ye=ye._name,xe==="auto")de[Ye+".autorange"]=!0;else if(xe==="reset")ye._rangeInitial0===void 0&&ye._rangeInitial1===void 0?de[Ye+".autorange"]=!0:ye._rangeInitial0===void 0?(de[Ye+".autorange"]=ye._autorangeInitial,de[Ye+".range"]=[null,ye._rangeInitial1]):ye._rangeInitial1===void 0?(de[Ye+".range"]=[ye._rangeInitial0,null],de[Ye+".autorange"]=ye._autorangeInitial):de[Ye+".range"]=[ye._rangeInitial0,ye._rangeInitial1],ye._showSpikeInitial!==void 0&&(de[Ye+".showspikes"]=ye._showSpikeInitial,Te==="on"&&!ye._showSpikeInitial&&(Te="off"));else{var Qe=[ye.r2l(ye.range[0]),ye.r2l(ye.range[1])],ft=[he*Qe[0]+Be*Qe[1],he*Qe[1]+Be*Qe[0]];de[Ye+".range[0]"]=ye.l2r(ft[0]),de[Ye+".range[1]"]=ye.l2r(ft[1])}}else ve==="hovermode"&&(xe==="x"||xe==="y")&&(xe=re._isHoriz?"y":"x",fe.setAttribute("data-val",xe)),de[ve]=xe;re._cartesianSpikesEnabled=Te,M.call("_guiRelayout",te,de)}P.zoom3d={name:"zoom3d",_cat:"zoom",title:function(te){return C(te,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:E.zoombox,click:Y},P.pan3d={name:"pan3d",_cat:"pan",title:function(te){return C(te,"Pan")},attr:"scene.dragmode",val:"pan",icon:E.pan,click:Y},P.orbitRotation={name:"orbitRotation",title:function(te){return C(te,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:E["3d_rotate"],click:Y},P.tableRotation={name:"tableRotation",title:function(te){return C(te,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:E["z-axis"],click:Y};function Y(te,Se){for(var fe=Se.currentTarget,ve=fe.getAttribute("data-attr"),xe=fe.getAttribute("data-val")||!0,re=te._fullLayout._subplots.gl3d||[],de={},be=ve.split("."),Te=0;Te<re.length;Te++)de[re[Te]+"."+be[1]]=xe;var ye=xe==="pan"?xe:"zoom";de.dragmode=ye,M.call("_guiRelayout",te,de)}P.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(te){return C(te,"Reset camera to default")},attr:"resetDefault",icon:E.home,click:N},P.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(te){return C(te,"Reset camera to last save")},attr:"resetLastSave",icon:E.movie,click:N};function N(te,Se){for(var fe=Se.currentTarget,ve=fe.getAttribute("data-attr"),xe=ve==="resetLastSave",re=ve==="resetDefault",de=te._fullLayout,be=de._subplots.gl3d||[],Te={},ye=0;ye<be.length;ye++){var De=be[ye],Ue=De+".camera",he=De+".aspectratio",Be=De+".aspectmode",Ye=de[De]._scene,et;xe?(Te[Ue+".up"]=Ye.viewInitial.up,Te[Ue+".eye"]=Ye.viewInitial.eye,Te[Ue+".center"]=Ye.viewInitial.center,et=!0):re&&(Te[Ue+".up"]=null,Te[Ue+".eye"]=null,Te[Ue+".center"]=null,et=!0),et&&(Te[he+".x"]=Ye.viewInitial.aspectratio.x,Te[he+".y"]=Ye.viewInitial.aspectratio.y,Te[he+".z"]=Ye.viewInitial.aspectratio.z,Te[Be]=Ye.viewInitial.aspectmode)}M.call("_guiRelayout",te,Te)}P.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(te){return C(te,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:E.tooltip_basic,gravity:"ne",click:ee};function j(te,Se){var fe=Se.currentTarget,ve=fe._previousVal,xe=te._fullLayout,re=xe._subplots.gl3d||[],de=["xaxis","yaxis","zaxis"],be={},Te={};if(ve)Te=ve,fe._previousVal=null;else{for(var ye=0;ye<re.length;ye++){var De=re[ye],Ue=xe[De],he=De+".hovermode";be[he]=Ue.hovermode,Te[he]=!1;for(var Be=0;Be<3;Be++){var Ye=de[Be],et=De+"."+Ye+".showspikes";Te[et]=!1,be[et]=Ue[Ye].showspikes}}fe._previousVal=be}return Te}function ee(te,Se){var fe=j(te,Se);M.call("_guiRelayout",te,fe)}P.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(te){return C(te,"Zoom in")},attr:"zoom",val:"in",icon:E.zoom_plus,click:G},P.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(te){return C(te,"Zoom out")},attr:"zoom",val:"out",icon:E.zoom_minus,click:G},P.resetGeo={name:"resetGeo",_cat:"reset",title:function(te){return C(te,"Reset")},attr:"reset",val:null,icon:E.autoscale,click:G},P.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(te){return C(te,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:E.tooltip_basic,gravity:"ne",click:W};function G(te,Se){for(var fe=Se.currentTarget,ve=fe.getAttribute("data-attr"),xe=fe.getAttribute("data-val")||!0,re=te._fullLayout,de=re._subplots.geo||[],be=0;be<de.length;be++){var Te=de[be],ye=re[Te];if(ve==="zoom"){var De=ye.projection.scale,Ue=xe==="in"?2*De:.5*De;M.call("_guiRelayout",te,Te+".projection.scale",Ue)}}ve==="reset"&&ne(te,"geo")}P.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(te){return C(te,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:E.tooltip_basic,gravity:"ne",click:W};function V(te){var Se=te._fullLayout;return Se.hovermode?!1:Se._has("cartesian")?Se._isHoriz?"y":"x":"closest"}function W(te){var Se=V(te);M.call("_guiRelayout",te,"hovermode",Se)}P.resetViewSankey={name:"resetSankeyGroup",title:function(te){return C(te,"Reset view")},icon:E.home,click:function(te){for(var Se={"node.groups":[],"node.x":[],"node.y":[]},fe=0;fe<te._fullData.length;fe++){var ve=te._fullData[fe]._viewInitial;Se["node.groups"].push(ve.node.groups.slice()),Se["node.x"].push(ve.node.x.slice()),Se["node.y"].push(ve.node.y.slice())}M.call("restyle",te,Se)}},P.toggleHover={name:"toggleHover",title:function(te){return C(te,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:E.tooltip_basic,gravity:"ne",click:function(te,Se){var fe=j(te,Se);fe.hovermode=V(te),M.call("_guiRelayout",te,fe)}},P.resetViews={name:"resetViews",title:function(te){return C(te,"Reset views")},icon:E.home,click:function(te,Se){var fe=Se.currentTarget;fe.setAttribute("data-attr","zoom"),fe.setAttribute("data-val","reset"),p(te,Se),fe.setAttribute("data-attr","resetLastSave"),N(te,Se),ne(te,"geo"),ne(te,"mapbox"),ne(te,"map")}},P.toggleSpikelines={name:"toggleSpikelines",title:function(te){return C(te,"Toggle Spike Lines")},icon:E.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(te){var Se=te._fullLayout,fe=Se._cartesianSpikesEnabled;Se._cartesianSpikesEnabled=fe==="on"?"off":"on",M.call("_guiRelayout",te,q(te))}};function q(te){for(var Se=te._fullLayout,fe=Se._cartesianSpikesEnabled==="on",ve=g.list(te,null,!0),xe={},re=0;re<ve.length;re++){var de=ve[re];xe[de._name+".showspikes"]=fe?!0:de._showSpikeInitial}return xe}P.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(te){return C(te,"Reset view")},attr:"reset",icon:E.home,click:function(te){ne(te,"mapbox")}},P.resetViewMap={name:"resetViewMap",_cat:"resetView",title:function(te){return C(te,"Reset view")},attr:"reset",icon:E.home,click:function(te){ne(te,"map")}},P.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(te){return C(te,"Zoom in")},attr:"zoom",val:"in",icon:E.zoom_plus,click:z},P.zoomInMap={name:"zoomInMap",_cat:"zoomin",title:function(te){return C(te,"Zoom in")},attr:"zoom",val:"in",icon:E.zoom_plus,click:H},P.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(te){return C(te,"Zoom out")},attr:"zoom",val:"out",icon:E.zoom_minus,click:z},P.zoomOutMap={name:"zoomOutMap",_cat:"zoomout",title:function(te){return C(te,"Zoom out")},attr:"zoom",val:"out",icon:E.zoom_minus,click:H};function z(te,Se){Z(te,Se,"mapbox")}function H(te,Se){Z(te,Se,"map")}function Z(te,Se,fe){for(var ve=Se.currentTarget,xe=ve.getAttribute("data-val"),re=te._fullLayout,de=re._subplots[fe]||[],be=1.05,Te={},ye=0;ye<de.length;ye++){var De=de[ye],Ue=re[De].zoom,he=xe==="in"?be*Ue:Ue/be;Te[De+".zoom"]=he}M.call("_guiRelayout",te,Te)}function ne(te,Se){for(var fe=te._fullLayout,ve=fe._subplots[Se]||[],xe={},re=0;re<ve.length;re++)for(var de=ve[re],be=fe[de]._subplot,Te=be.viewInitial,ye=Object.keys(Te),De=0;De<ye.length;De++){var Ue=ye[De];xe[de+"."+Ue]=Te[Ue]}M.call("_guiRelayout",te,xe)}}}),tb=a({"src/components/modebar/constants.js"(pe,me){var M=eb(),v=Object.keys(M),g=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],E=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(g),S=[],T=function(C){if(E.indexOf(C._cat||C.name)===-1){var P=C.name,p=(C._cat||C.name).toLowerCase();S.indexOf(P)===-1&&S.push(P),S.indexOf(p)===-1&&S.push(p)}};v.forEach(function(C){T(M[C])}),S.sort(),me.exports={DRAW_MODES:g,backButtons:E,foreButtons:S}}}),rb=a({"src/components/modebar/attributes.js"(pe,me){tb(),me.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"}}}}),cx=a({"src/components/modebar/defaults.js"(pe,me){var M=o0(),v=Oe(),g=Vm(),E=rb();me.exports=function(T,C){var P=T.modebar||{},p=g.newContainer(C,"modebar");function Y(j,ee){return M.coerce(P,p,E,j,ee)}Y("orientation"),Y("bgcolor",v.addOpacity(C.paper_bgcolor,.5));var N=v.contrast(v.rgb(C.modebar.bgcolor));Y("color",v.addOpacity(N,.3)),Y("activecolor",v.addOpacity(N,.7)),Y("uirevision",C.uirevision),Y("add"),Y("remove")}}}),Ly=a({"src/components/modebar/modebar.js"(pe,me){var M=f(),v=w(),g=o0(),E=X_(),S=s().version,T=new DOMParser;function C(N){this.container=N.container,this.element=document.createElement("div"),this.update(N.graphInfo,N.buttons),this.container.appendChild(this.element)}var P=C.prototype;P.update=function(N,j){this.graphInfo=N;var ee=this.graphInfo._context,G=this.graphInfo._fullLayout,V="modebar-"+G._uid;this.element.setAttribute("id",V),this.element.setAttribute("role","toolbar"),this._uid=V,this.element.className="modebar modebar--custom",ee.displayModeBar==="hover"&&(this.element.className+=" modebar--hover ease-bg"),G.modebar.orientation==="v"&&(this.element.className+=" vertical",j=j.reverse());var W=G.modebar,q="#"+V+" .modebar-group";document.querySelectorAll(q).forEach(function(te){te.style.backgroundColor=W.bgcolor});var z=!this.hasButtons(j),H=this.hasLogo!==ee.displaylogo,Z=this.locale!==ee.locale;if(this.locale=ee.locale,(z||H||Z)&&(this.removeAllButtons(),this.updateButtons(j),ee.watermark||ee.displaylogo)){var ne=this.getLogo();ee.watermark&&(ne.className=ne.className+" watermark"),G.modebar.orientation==="v"?this.element.insertBefore(ne,this.element.childNodes[0]):this.element.appendChild(ne),this.hasLogo=!0}this.updateActiveButton(),g.setStyleOnHover("#"+V+" .modebar-btn",".active",".icon path","fill: "+W.activecolor,"fill: "+W.color,this.element)},P.updateButtons=function(N){var j=this;this.buttons=N,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(ee){var G=j.createGroup();ee.forEach(function(V){var W=V.name;if(!W)throw new Error("must provide button 'name' in button config");if(j.buttonsNames.indexOf(W)!==-1)throw new Error("button name '"+W+"' is taken");j.buttonsNames.push(W);var q=j.createButton(V);j.buttonElements.push(q),G.appendChild(q)}),j.element.appendChild(G)})},P.createGroup=function(){var N=document.createElement("div");N.className="modebar-group";var j=this.graphInfo._fullLayout.modebar;return N.style.backgroundColor=j.bgcolor,N},P.createButton=function(N){var j=this,ee=document.createElement("button");ee.setAttribute("type","button"),ee.setAttribute("rel","tooltip"),ee.className="modebar-btn";var G=N.title;G===void 0?G=N.name:typeof G=="function"&&(G=G(this.graphInfo)),(G||G===0)&&(ee.setAttribute("data-title",G),ee.setAttribute("aria-label",G)),N.attr!==void 0&&ee.setAttribute("data-attr",N.attr);var V=N.val;V!==void 0&&(typeof V=="function"&&(V=V(this.graphInfo)),ee.setAttribute("data-val",V));var W=N.click;if(typeof W!="function")throw new Error("must provide button 'click' function in button config");ee.addEventListener("click",function(z){N.click(j.graphInfo,z),j.updateActiveButton(z.currentTarget)}),ee.setAttribute("data-toggle",N.toggle||!1),N.toggle&&M.select(ee).classed("active",!0);var q=N.icon;return typeof q=="function"?ee.appendChild(q()):ee.appendChild(this.createIcon(q||E.question)),ee.setAttribute("data-gravity",N.gravity||"n"),ee},P.createIcon=function(N){var j=v(N.height)?Number(N.height):N.ascent-N.descent,ee="http://www.w3.org/2000/svg",G;if(N.path){G=document.createElementNS(ee,"svg"),G.setAttribute("viewBox",[0,0,N.width,j].join(" ")),G.setAttribute("class","icon");var V=document.createElementNS(ee,"path");V.setAttribute("d",N.path),N.transform?V.setAttribute("transform",N.transform):N.ascent!==void 0&&V.setAttribute("transform","matrix(1 0 0 -1 0 "+N.ascent+")"),G.appendChild(V)}if(N.svg){var W=T.parseFromString(N.svg,"application/xml");G=W.childNodes[0]}return G.setAttribute("height","1em"),G.setAttribute("width","1em"),G},P.updateActiveButton=function(N){var j=this.graphInfo._fullLayout,ee=N!==void 0?N.getAttribute("data-attr"):null;this.buttonElements.forEach(function(G){var V=G.getAttribute("data-val")||!0,W=G.getAttribute("data-attr"),q=G.getAttribute("data-toggle")==="true",z=M.select(G),H=function(te,Se){var fe=j.modebar,ve=te.querySelector(".icon path");ve&&(Se||te.matches(":hover")?ve.style.fill=fe.activecolor:ve.style.fill=fe.color)};if(q){if(W===ee){var Z=!z.classed("active");z.classed("active",Z),H(G,Z)}}else{var ne=W===null?W:g.nestedProperty(j,W).get();z.classed("active",ne===V),H(G,ne===V)}})},P.hasButtons=function(N){var j=this.buttons;if(!j||N.length!==j.length)return!1;for(var ee=0;ee<N.length;++ee){if(N[ee].length!==j[ee].length)return!1;for(var G=0;G<N[ee].length;G++)if(N[ee][G].name!==j[ee][G].name)return!1}return!0};function p(N){return N+" (v"+S+")"}P.getLogo=function(){var N=this.createGroup(),j=document.createElement("a");return j.href="https://plotly.com/",j.target="_blank",j.setAttribute("data-title",p(g._(this.graphInfo,"Produced with Plotly.js"))),j.className="modebar-btn plotlyjsicon modebar-btn--logo",j.appendChild(this.createIcon(E.newplotlylogo)),N.appendChild(j),N},P.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},P.destroy=function(){g.removeElement(this.container.querySelector(".modebar"))};function Y(N,j){var ee=N._fullLayout,G=new C({graphInfo:N,container:ee._modebardiv.node(),buttons:j});return ee._privateplot&&M.select(G.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),G}me.exports=Y}}),Kb=a({"src/components/modebar/manage.js"(pe,me){var M=Ov(),v=D1(),g=jp(),E=jg().isUnifiedHover,S=Ly(),T=eb(),C=tb().DRAW_MODES,P=o0().extendDeep;me.exports=function(W){var q=W._fullLayout,z=W._context,H=q._modeBar;if(!z.displayModeBar&&!z.watermark){H&&(H.destroy(),delete q._modeBar);return}if(!Array.isArray(z.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(z.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var Z=z.modeBarButtons,ne;Array.isArray(Z)&&Z.length?ne=G(Z):!z.displayModeBar&&z.watermark?ne=[]:ne=p(W),H?H.update(W,ne):q._modeBar=S(W,ne)};function p(V){var W=V._fullLayout,q=V._fullData,z=V._context;function H(Q,ce){if(typeof ce=="string"){if(ce.toLowerCase()===Q.toLowerCase())return!0}else{var Me=ce.name,Le=ce._cat||ce.name;if(Me===Q||Le===Q.toLowerCase())return!0}return!1}var Z=W.modebar.add;typeof Z=="string"&&(Z=[Z]);var ne=W.modebar.remove;typeof ne=="string"&&(ne=[ne]);var te=z.modeBarButtonsToAdd.concat(Z.filter(function(Q){for(var ce=0;ce<z.modeBarButtonsToRemove.length;ce++)if(H(Q,z.modeBarButtonsToRemove[ce]))return!1;return!0})),Se=z.modeBarButtonsToRemove.concat(ne.filter(function(Q){for(var ce=0;ce<z.modeBarButtonsToAdd.length;ce++)if(H(Q,z.modeBarButtonsToAdd[ce]))return!1;return!0})),fe=W._has("cartesian"),ve=W._has("gl3d"),xe=W._has("geo"),re=W._has("pie"),de=W._has("funnelarea"),be=W._has("ternary"),Te=W._has("mapbox"),ye=W._has("map"),De=W._has("polar"),Ue=W._has("smith"),he=W._has("sankey"),Be=Y(W),Ye=E(W.hovermode),et=[];function Qe(Q){if(Q.length){for(var ce=[],Me=0;Me<Q.length;Me++){for(var Le=Q[Me],tt=T[Le],bt=tt.name.toLowerCase(),Ct=(tt._cat||tt.name).toLowerCase(),yi=!1,Fl=0;Fl<Se.length;Fl++){var Yl=Se[Fl].toLowerCase();if(Yl===bt||Yl===Ct){yi=!0;break}}yi||ce.push(T[Le])}et.push(ce)}}var ft=["toImage"];z.showEditInChartStudio?ft.push("editInChartStudio"):z.showSendToCloud&&ft.push("sendDataToCloud"),Qe(ft);var mn=[],ta=[],Do=[],Ae=[];(fe||re||de||be)+xe+ve+Te+ye+De+Ue>1?(ta=["toggleHover"],Do=["resetViews"]):xe?(mn=["zoomInGeo","zoomOutGeo"],ta=["hoverClosestGeo"],Do=["resetGeo"]):ve?(ta=["hoverClosest3d"],Do=["resetCameraDefault3d","resetCameraLastSave3d"]):Te?(mn=["zoomInMapbox","zoomOutMapbox"],ta=["toggleHover"],Do=["resetViewMapbox"]):ye?(mn=["zoomInMap","zoomOutMap"],ta=["toggleHover"],Do=["resetViewMap"]):re?ta=["hoverClosestPie"]:he?(ta=["hoverClosestCartesian","hoverCompareCartesian"],Do=["resetViewSankey"]):ta=["toggleHover"],fe&&ta.push("toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"),(j(q)||Ye)&&(ta=[]),fe&&!Be&&(mn=["zoomIn2d","zoomOut2d","autoScale2d"],Do[0]!=="resetViews"&&(Do=["resetScale2d"])),ve?Ae=["zoom3d","pan3d","orbitRotation","tableRotation"]:fe&&!Be||be?Ae=["zoom2d","pan2d"]:Te||ye||xe?Ae=["pan2d"]:De&&(Ae=["zoom2d"]),N(q)&&Ae.push("select2d","lasso2d");var ke=[],ge=function(Q){ke.indexOf(Q)===-1&&ta.indexOf(Q)!==-1&&ke.push(Q)};if(Array.isArray(te)){for(var Ce=[],Je=0;Je<te.length;Je++){var Re=te[Je];typeof Re=="string"?(Re=Re.toLowerCase(),C.indexOf(Re)!==-1?(W._has("mapbox")||W._has("map")||W._has("cartesian"))&&Ae.push(Re):Re==="togglespikelines"?ge("toggleSpikelines"):Re==="togglehover"?ge("toggleHover"):Re==="hovercompare"?ge("hoverCompareCartesian"):Re==="hoverclosest"?(ge("hoverClosestCartesian"),ge("hoverClosestGeo"),ge("hoverClosest3d"),ge("hoverClosestPie")):Re==="v1hovermode"&&(ge("hoverClosestCartesian"),ge("hoverCompareCartesian"),ge("hoverClosestGeo"),ge("hoverClosest3d"),ge("hoverClosestPie"))):Ce.push(Re)}te=Ce}return Qe(Ae),Qe(mn.concat(Do)),Qe(ke),ee(et,te)}function Y(V){for(var W=M.list({_fullLayout:V},null,!0),q=0;q<W.length;q++){var z=W[q].modebardisable;if(!W[q].fixedrange&&z!=="autoscale+zoominout"&&z!=="zoominout+autoscale")return!1}return!0}function N(V){for(var W=!1,q=0;q<V.length&&!W;q++){var z=V[q];!z._module||!z._module.selectPoints||(g.traceIs(z,"scatter-like")?(v.hasMarkers(z)||v.hasText(z))&&(W=!0):g.traceIs(z,"box-violin")?(z.boxpoints==="all"||z.points==="all")&&(W=!0):W=!0)}return W}function j(V){for(var W=0;W<V.length;W++)if(!g.traceIs(V[W],"noHover"))return!1;return!0}function ee(V,W){if(W.length)if(Array.isArray(W[0]))for(var q=0;q<W.length;q++)V.push(W[q]);else V.push(W);return V}function G(V){for(var W=P([],V),q=0;q<W.length;q++)for(var z=W[q],H=0;H<z.length;H++){var Z=z[H];if(typeof Z=="string")if(T[Z]!==void 0)W[q][H]=T[Z];else throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "))}return W}}}),ux=a({"src/components/modebar/index.js"(pe,me){me.exports={moduleType:"component",name:"modebar",layoutAttributes:rb(),supplyLayoutDefaults:cx(),manage:Kb()}}}),Dy=a({"src/plots/cartesian/scale_zoom.js"(pe,me){var M=f1().FROM_BL;me.exports=function(g,E,S){S===void 0&&(S=M[g.constraintoward||"center"]);var T=[g.r2l(g.range[0]),g.r2l(g.range[1])],C=T[0]+(T[1]-T[0])*S;g.range=g._input.range=[g.l2r(C+(T[0]-C)*E),g.l2r(C+(T[1]-C)*E)],g.setScale()}}}),y_=a({"src/plots/cartesian/constraints.js"(pe){var me=o0(),M=Cg(),v=Ov().id2name,g=O1(),E=Dy(),S=Ay(),T=A().ALMOST_EQUAL,C=f1().FROM_BL;pe.handleDefaults=function(V,W,q){var z=q.axIds,H=q.axHasImage,Z=W._axisConstraintGroups=[],ne=W._axisMatchGroups=[],te,Se,fe,ve,xe,re,de,be;for(te=0;te<z.length;te++)ve=v(z[te]),xe=V[ve],re=W[ve],P(xe,re,{axIds:z,layoutOut:W,hasImage:H[ve]});function Te(ft,mn){for(te=0;te<ft.length;te++){Se=ft[te];for(fe in Se)W[v(fe)][mn]=Se}}for(Te(ne,"_matchGroup"),te=0;te<Z.length;te++){Se=Z[te];for(fe in Se)if(re=W[v(fe)],re.fixedrange){for(var ye in Se){var De=v(ye);(V[De]||{}).fixedrange===!1&&me.warn("fixedrange was specified as false for axis "+De+" but was overridden because another axis in its constraint group has fixedrange true"),W[De].fixedrange=!0}break}}for(te=0;te<Z.length;){Se=Z[te];for(fe in Se){re=W[v(fe)],re._matchGroup&&Object.keys(re._matchGroup).length===Object.keys(Se).length&&(Z.splice(te,1),te--);break}te++}Te(Z,"_constraintGroup");var Ue=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],he=!1,Be=!1;function Ye(){be=re[de],de==="rangebreaks"&&(Be=re._hasDayOfWeekBreaks)}for(te=0;te<ne.length;te++){Se=ne[te];for(var et=0;et<Ue.length;et++){de=Ue[et],be=null;var Qe;for(fe in Se)if(ve=v(fe),xe=V[ve],re=W[ve],de in re){if(!re.matches&&(Qe=re,de in xe)){Ye();break}be===null&&de in xe&&Ye()}if(de==="range"&&be&&xe.range&&xe.range.length===2&&xe.range[0]!==null&&xe.range[1]!==null&&(he=!0),de==="autorange"&&be===null&&he&&(be=!1),be===null&&de in Qe&&(be=Qe[de]),be!==null)for(fe in Se)re=W[v(fe)],re[de]=de==="range"?be.slice():be,de==="rangebreaks"&&(re._hasDayOfWeekBreaks=Be,S(re,W))}}};function P(V,W,q){var z=q.axIds,H=q.layoutOut,Z=q.hasImage,ne=H._axisConstraintGroups,te=H._axisMatchGroups,Se=W._id,fe=Se.charAt(0),ve=((H._splomAxes||{})[fe]||{})[Se]||{},xe=W._id,re=xe.charAt(0)==="x";W._matchGroup=null,W._constraintGroup=null;function de(Ae,ke){return me.coerce(V,W,g,Ae,ke)}de("constrain",Z?"domain":"range"),me.coerce(V,W,{constraintoward:{valType:"enumerated",values:re?["left","center","right"]:["bottom","middle","top"],dflt:re?"center":"middle"}},"constraintoward");var be=W.type,Te,ye,De=[];for(Te=0;Te<z.length;Te++)if(ye=z[Te],ye!==xe){var Ue=H[v(ye)];Ue.type===be&&De.push(ye)}var he=Y(ne,xe);if(he){var Be=[];for(Te=0;Te<De.length;Te++)ye=De[Te],he[ye]||Be.push(ye);De=Be}var Ye=De.length,et,Qe;Ye&&(V.matches||ve.matches)&&(et=me.coerce(V,W,{matches:{valType:"enumerated",values:De,dflt:De.indexOf(ve.matches)!==-1?ve.matches:void 0}},"matches"));var ft=Z&&!re?W.anchor:void 0;if(Ye&&!et&&(V.scaleanchor||ft)&&(Qe=me.coerce(V,W,{scaleanchor:{valType:"enumerated",values:De.concat([!1])}},"scaleanchor",ft)),et){W._matchGroup=N(te,xe,et,1);var mn=H[v(et)],ta=p(H,W)/p(H,mn);re!==(et.charAt(0)==="x")&&(ta=(re?"x":"y")+ta),N(ne,xe,et,ta)}else V.matches&&z.indexOf(V.matches)!==-1&&me.warn("ignored "+W._name+'.matches: "'+V.matches+'" to avoid an infinite loop');if(Qe){var Do=de("scaleratio");Do||(Do=W.scaleratio=1),N(ne,xe,Qe,Do)}else V.scaleanchor&&z.indexOf(V.scaleanchor)!==-1&&me.warn("ignored "+W._name+'.scaleanchor: "'+V.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function p(V,W){var q=W.domain;return q||(q=V[v(W.overlaying)].domain),q[1]-q[0]}function Y(V,W){for(var q=0;q<V.length;q++)if(V[q][W])return V[q];return null}function N(V,W,q,z){var H,Z,ne,te,Se,fe=Y(V,W);fe===null?(fe={},fe[W]=1,Se=V.length,V.push(fe)):Se=V.indexOf(fe);var ve=Object.keys(fe);for(H=0;H<V.length;H++)if(ne=V[H],H!==Se&&ne[q]){var xe=ne[q];for(Z=0;Z<ve.length;Z++)te=ve[Z],ne[te]=j(xe,j(z,fe[te]));V.splice(Se,1);return}if(z!==1)for(Z=0;Z<ve.length;Z++){var re=ve[Z];fe[re]=j(z,fe[re])}fe[q]=1}function j(V,W){var q="",z="",H,Z;typeof V=="string"&&(q=V.match(/^[xy]*/)[0],H=q.length,V=+V.substr(H)),typeof W=="string"&&(z=W.match(/^[xy]*/)[0],Z=z.length,W=+W.substr(Z));var ne=V*W;return!H&&!Z?ne:!H||!Z||q.charAt(0)===z.charAt(0)?q+z+V*W:H===Z?ne:(H>Z?q.substr(Z):z.substr(H))+ne}function ee(V,W){for(var q=W._size,z=q.h/q.w,H={},Z=Object.keys(V),ne=0;ne<Z.length;ne++){var te=Z[ne],Se=V[te];if(typeof Se=="string"){var fe=Se.match(/^[xy]*/)[0],ve=fe.length;Se=+Se.substr(ve);for(var xe=fe.charAt(0)==="y"?z:1/z,re=0;re<ve;re++)Se*=xe}H[te]=Se}return H}pe.enforce=function(W){var q=W._fullLayout,z=q._axisConstraintGroups||[],H,Z,ne,te,Se,fe,ve,xe;for(H=0;H<z.length;H++){ne=ee(z[H],q);var re=Object.keys(ne),de=1/0,be=0,Te=1/0,ye={},De={},Ue=!1;for(Z=0;Z<re.length;Z++)te=re[Z],De[te]=Se=q[v(te)],Se._inputDomain?Se.domain=Se._inputDomain.slice():Se._inputDomain=Se.domain.slice(),Se._inputRange||(Se._inputRange=Se.range.slice()),Se.setScale(),ye[te]=fe=Math.abs(Se._m)/ne[te],de=Math.min(de,fe),(Se.constrain==="domain"||!Se._constraintShrinkable)&&(Te=Math.min(Te,fe)),delete Se._constraintShrinkable,be=Math.max(be,fe),Se.constrain==="domain"&&(Ue=!0);if(!(de>T*be&&!Ue)){for(Z=0;Z<re.length;Z++)if(te=re[Z],fe=ye[te],Se=De[te],ve=Se.constrain,fe!==Te||ve==="domain")if(xe=fe/Te,ve==="range")E(Se,xe);else{var he=Se._inputDomain,Be=(Se.domain[1]-Se.domain[0])/(he[1]-he[0]),Ye=(Se.r2l(Se.range[1])-Se.r2l(Se.range[0]))/(Se.r2l(Se._inputRange[1])-Se.r2l(Se._inputRange[0]));if(xe/=Be,xe*Ye<1){Se.domain=Se._input.domain=he.slice(),E(Se,xe);continue}if(Ye<1&&(Se.range=Se._input.range=Se._inputRange.slice(),xe*=Ye),Se.autorange){var et=Se.r2l(Se.range[0]),Qe=Se.r2l(Se.range[1]),ft=(et+Qe)/2,mn=ft,ta=ft,Do=Math.abs(Qe-ft),Ae=ft-Do*xe*1.0001,ke=ft+Do*xe*1.0001,ge=M.makePadFn(q,Se,0),Ce=M.makePadFn(q,Se,1);G(Se,xe);var Je=Math.abs(Se._m),Re=M.concatExtremes(W,Se),Q=Re.min,ce=Re.max,Me,Le;for(Le=0;Le<Q.length;Le++)Me=Q[Le].val-ge(Q[Le])/Je,Me>Ae&&Me<mn&&(mn=Me);for(Le=0;Le<ce.length;Le++)Me=ce[Le].val+Ce(ce[Le])/Je,Me<ke&&Me>ta&&(ta=Me);var tt=(ta-mn)/(2*Do);xe/=tt,mn=Se.l2r(mn),ta=Se.l2r(ta),Se.range=Se._input.range=et<Qe?[mn,ta]:[ta,mn]}G(Se,xe)}}}},pe.getAxisGroup=function(W,q){for(var z=W._axisMatchGroups,H=0;H<z.length;H++){var Z=z[H];if(Z[q])return"g"+H}return q},pe.clean=function(W,q){if(q._inputDomain){for(var z=!1,H=q._id,Z=W._fullLayout._axisConstraintGroups,ne=0;ne<Z.length;ne++)if(Z[ne][H]){z=!0;break}(!z||q.constrain!=="domain")&&(q._input.domain=q.domain=q._inputDomain,delete q._inputDomain)}};function G(V,W){var q=V._inputDomain,z=C[V.constraintoward],H=q[0]+(q[1]-q[0])*z;V.domain=V._input.domain=[H+(q[0]-H)/W,H+(q[1]-H)/W],V.setScale()}}}),$_=a({"src/plot_api/subroutines.js"(pe){var me=f(),M=jp(),v=p1(),g=o0(),E=v1(),S=ix(),T=Oe(),C=t1(),P=f_(),p=ux(),Y=g1(),N=f1(),j=y_(),ee=j.enforce,G=j.clean,V=Cg().doAutoRange,W="start",q="middle",z="end",H=wv().zindexSeparator;pe.layoutStyles=function(he){return g.syncOrAsync([v.doAutoMargin,ne],he)};function Z(he,Be,Ye){for(var et=0;et<Ye.length;et++){var Qe=Ye[et][0],ft=Ye[et][1];if(!(Qe[0]>=he[1]||Qe[1]<=he[0])&&ft[0]<Be[1]&&ft[1]>Be[0])return!0}return!1}function ne(he){var Be=he._fullLayout,Ye=Be._size,et=Ye.p,Qe=Y.list(he,"",!0),ft,mn,ta,Do,Ae,ke;if(Be._paperdiv.style({width:he._context.responsive&&Be.autosize&&!he._context._hasZeroWidth&&!he.layout.width?"100%":Be.width+"px",height:he._context.responsive&&Be.autosize&&!he._context._hasZeroHeight&&!he.layout.height?"100%":Be.height+"px"}).selectAll(".main-svg").call(C.setSize,Be.width,Be.height),he._context.setBackground(he,Be.paper_bgcolor),pe.drawMainTitle(he),p.manage(he),!Be._has("cartesian"))return v.previousPromises(he);function ge(zl,Ve,pn){var ci=zl._lw/2;if(zl._id.charAt(0)==="x"){if(Ve){if(pn==="top")return Ve._offset-et-ci}else return Ye.t+Ye.h*(1-(zl.position||0))+ci%1;return Ve._offset+Ve._length+et+ci}if(Ve){if(pn==="right")return Ve._offset+Ve._length+et+ci}else return Ye.l+Ye.w*(zl.position||0)+ci%1;return Ve._offset-et-ci}for(ft=0;ft<Qe.length;ft++){Do=Qe[ft];var Ce=Do._anchorAxis;Do._linepositions={},Do._lw=C.crispRound(he,Do.linewidth,1),Do._mainLinePosition=ge(Do,Ce,Do.side),Do._mainMirrorPosition=Do.mirror&&Ce?ge(Do,Ce,N.OPPOSITE_SIDE[Do.side]):null}var Je=[],Re=[],Q=[],ce=T.opacity(Be.paper_bgcolor)===1&&T.opacity(Be.plot_bgcolor)===1&&Be.paper_bgcolor===Be.plot_bgcolor;for(mn in Be._plots)if(ta=Be._plots[mn],ta.mainplot)ta.bg&&ta.bg.remove(),ta.bg=void 0;else{var Me=ta.xaxis.domain,Le=ta.yaxis.domain,tt=ta.plotgroup;if(Z(Me,Le,Q)&&mn.indexOf(H)===-1){var bt=tt.node(),Ct=ta.bg=g.ensureSingle(tt,"rect","bg");bt.insertBefore(Ct.node(),bt.childNodes[0]),Re.push(mn)}else tt.select("rect.bg").remove(),Q.push([Me,Le]),ce||(Je.push(mn),Re.push(mn))}var yi=Be._bgLayer.selectAll(".bg").data(Je);for(yi.enter().append("rect").classed("bg",!0),yi.exit().remove(),yi.each(function(zl){Be._plots[zl].bg=me.select(this)}),ft=0;ft<Re.length;ft++)ta=Be._plots[Re[ft]],Ae=ta.xaxis,ke=ta.yaxis,ta.bg&&Ae._offset!==void 0&&ke._offset!==void 0&&ta.bg.call(C.setRect,Ae._offset-et,ke._offset-et,Ae._length+2*et,ke._length+2*et).call(T.fill,Be.plot_bgcolor).style("stroke-width",0);if(!Be._hasOnlyLargeSploms)for(mn in Be._plots){ta=Be._plots[mn],Ae=ta.xaxis,ke=ta.yaxis;var Fl=ta.clipId="clip"+Be._uid+mn+"plot",Yl=g.ensureSingleById(Be._clips,"clipPath",Fl,function(zl){zl.classed("plotclip",!0).append("rect")});ta.clipRect=Yl.select("rect").attr({width:Ae._length,height:ke._length}),C.setTranslate(ta.plot,Ae._offset,ke._offset);var qp,Fp;ta._hasClipOnAxisFalse?(qp=null,Fp=Fl):(qp=Fl,Fp=null),C.setClipUrl(ta.plot,qp,he),ta.layerClipId=Fp}var Up,_r,gs,dr,Lo,Cp,Hp,e0,t0,n0,y0,h0,I0;function Kp(zl){return"M"+Up+","+zl+"H"+_r}function B0(zl){return"M"+Ae._offset+","+zl+"h"+Ae._length}function em(zl){return"M"+zl+","+e0+"V"+Hp}function k0(zl){return ke._shift!==void 0&&(zl+=ke._shift),"M"+zl+","+ke._offset+"v"+ke._length}function J0(zl,Ve,pn){if(!zl.showline||mn!==zl._mainSubplot)return"";if(!zl._anchorAxis)return pn(zl._mainLinePosition);var ci=Ve(zl._mainLinePosition);return zl.mirror&&(ci+=Ve(zl._mainMirrorPosition)),ci}for(mn in Be._plots){ta=Be._plots[mn],Ae=ta.xaxis,ke=ta.yaxis;var vs="M0,0";te(Ae,mn)&&(Lo=fe(Ae,"left",ke,Qe),Up=Ae._offset-(Lo?et+Lo:0),Cp=fe(Ae,"right",ke,Qe),_r=Ae._offset+Ae._length+(Cp?et+Cp:0),gs=ge(Ae,ke,"bottom"),dr=ge(Ae,ke,"top"),I0=!Ae._anchorAxis||mn!==Ae._mainSubplot,I0&&(Ae.mirror==="allticks"||Ae.mirror==="all")&&(Ae._linepositions[mn]=[gs,dr]),vs=J0(Ae,Kp,B0),I0&&Ae.showline&&(Ae.mirror==="all"||Ae.mirror==="allticks")&&(vs+=Kp(gs)+Kp(dr)),ta.xlines.style("stroke-width",Ae._lw+"px").call(T.stroke,Ae.showline?Ae.linecolor:"rgba(0,0,0,0)")),ta.xlines.attr("d",vs);var jl="M0,0";te(ke,mn)&&(y0=fe(ke,"bottom",Ae,Qe),Hp=ke._offset+ke._length+(y0?et:0),h0=fe(ke,"top",Ae,Qe),e0=ke._offset-(h0?et:0),t0=ge(ke,Ae,"left"),n0=ge(ke,Ae,"right"),I0=!ke._anchorAxis||mn!==ke._mainSubplot,I0&&(ke.mirror==="allticks"||ke.mirror==="all")&&(ke._linepositions[mn]=[t0,n0]),jl=J0(ke,em,k0),I0&&ke.showline&&(ke.mirror==="all"||ke.mirror==="allticks")&&(jl+=em(t0)+em(n0)),ta.ylines.style("stroke-width",ke._lw+"px").call(T.stroke,ke.showline?ke.linecolor:"rgba(0,0,0,0)")),ta.ylines.attr("d",jl)}return Y.makeClipPaths(he),v.previousPromises(he)}function te(he,Be){return(he.ticks||he.showline)&&(Be===he._mainSubplot||he.mirror==="all"||he.mirror==="allticks")}function Se(he,Be,Ye){if(!Ye.showline||!Ye._lw)return!1;if(Ye.mirror==="all"||Ye.mirror==="allticks")return!0;var et=Ye._anchorAxis;if(!et)return!1;var Qe=N.FROM_BL[Be];return Ye.side===Be?et.domain[Qe]===he.domain[Qe]:Ye.mirror&&et.domain[1-Qe]===he.domain[1-Qe]}function fe(he,Be,Ye,et){if(Se(he,Be,Ye))return Ye._lw;for(var Qe=0;Qe<et.length;Qe++){var ft=et[Qe];if(ft._mainAxis===Ye._mainAxis&&Se(he,Be,ft))return ft._lw}return 0}pe.drawMainTitle=function(he){var Be=he._fullLayout.title,Ye=he._fullLayout,et=De(Ye),Qe=Ue(Ye),ft=Te(Ye,Qe),mn=be(Ye,et);if(P.draw(he,"gtitle",{propContainer:Ye,propName:"title.text",subtitlePropName:"title.subtitle.text",placeholder:Ye._dfltTitle.plot,subtitlePlaceholder:Ye._dfltTitle.subtitle,attributes:{x:mn,y:ft,"text-anchor":et,dy:Qe}}),Be.text&&Be.automargin){var ta=me.select(he).selectAll(".gtitle"),Do=C.bBox(me.select(he).selectAll(".g-gtitle").node()).height,Ae=re(he,Be,Do);if(Ae>0){de(he,ft,Ae,Do),ta.attr({x:mn,y:ft,"text-anchor":et,dy:ye(Be.yanchor)}).call(E.positionText,mn,ft);var ke=(Be.text.match(E.BR_TAG_ALL)||[]).length;if(ke){var ge=N.LINE_SPACING*ke+N.MID_SHIFT;Be.y===0&&(ge=-ge),ta.selectAll(".line").each(function(){var ce=+this.getAttribute("dy").slice(0,-2)-ge+"em";this.setAttribute("dy",ce)})}var Ce=me.select(he).selectAll(".gtitle-subtitle");if(Ce.node()){var Je=ta.node().getBBox(),Re=Je.y+Je.height,Q=Re+P.SUBTITLE_PADDING_EM*Be.subtitle.font.size;Ce.attr({x:mn,y:Q,"text-anchor":et,dy:ye(Be.yanchor)}).call(E.positionText,mn,Q)}}}};function ve(he,Be,Ye,et,Qe){var ft=Be.yref==="paper"?he._fullLayout._size.h:he._fullLayout.height,mn=g.isTopAnchor(Be)?et:et-Qe,ta=Ye==="b"?ft-mn:mn;return g.isTopAnchor(Be)&&Ye==="t"||g.isBottomAnchor(Be)&&Ye==="b"?!1:ta<Qe}function xe(he,Be,Ye,et,Qe){var ft=0;return Ye==="middle"&&(ft+=Qe/2),he==="t"?(Ye==="top"&&(ft+=Qe),ft+=et-Be*et):(Ye==="bottom"&&(ft+=Qe),ft+=Be*et),ft}function re(he,Be,Ye){var et=Be.y,Qe=Be.yanchor,ft=et>.5?"t":"b",mn=he._fullLayout.margin[ft],ta=0;return Be.yref==="paper"?ta=Ye+Be.pad.t+Be.pad.b:Be.yref==="container"&&(ta=xe(ft,et,Qe,he._fullLayout.height,Ye)+Be.pad.t+Be.pad.b),ta>mn?ta:0}function de(he,Be,Ye,et){var Qe="title.automargin",ft=he._fullLayout.title,mn=ft.y>.5?"t":"b",ta={x:ft.x,y:ft.y,t:0,b:0},Do={};ft.yref==="paper"&&ve(he,ft,mn,Be,et)?ta[mn]=Ye:ft.yref==="container"&&(Do[mn]=Ye,he._fullLayout._reservedMargin[Qe]=Do),v.allowAutoMargin(he,Qe),v.autoMargin(he,Qe,ta)}function be(he,Be){var Ye=he.title,et=he._size,Qe=0;switch(Be===W?Qe=Ye.pad.l:Be===z&&(Qe=-Ye.pad.r),Ye.xref){case"paper":return et.l+et.w*Ye.x+Qe;case"container":default:return he.width*Ye.x+Qe}}function Te(he,Be){var Ye=he.title,et=he._size,Qe=0;if(Be==="0em"||!Be?Qe=-Ye.pad.b:Be===N.CAP_SHIFT+"em"&&(Qe=Ye.pad.t),Ye.y==="auto")return et.t/2;switch(Ye.yref){case"paper":return et.t+et.h-et.h*Ye.y+Qe;case"container":default:return he.height-he.height*Ye.y+Qe}}function ye(he){return he==="top"?N.CAP_SHIFT+.3+"em":he==="bottom"?"-0.3em":N.MID_SHIFT+"em"}function De(he){var Be=he.title,Ye=q;return g.isRightAnchor(Be)?Ye=z:g.isLeftAnchor(Be)&&(Ye=W),Ye}function Ue(he){var Be=he.title,Ye="0em";return g.isTopAnchor(Be)?Ye=N.CAP_SHIFT+"em":g.isMiddleAnchor(Be)&&(Ye=N.MID_SHIFT+"em"),Ye}pe.doTraceStyle=function(he){var Be=he.calcdata,Ye=[],et;for(et=0;et<Be.length;et++){var Qe=Be[et],ft=Qe[0]||{},mn=ft.trace||{},ta=mn._module||{},Do=ta.arraysToCalcdata;Do&&Do(Qe,mn);var Ae=ta.editStyle;Ae&&Ye.push({fn:Ae,cd0:ft})}if(Ye.length){for(et=0;et<Ye.length;et++){var ke=Ye[et];ke.fn(he,ke.cd0)}S(he),pe.redrawReglTraces(he)}return v.style(he),M.getComponentMethod("legend","draw")(he),v.previousPromises(he)},pe.doColorBars=function(he){return M.getComponentMethod("colorbar","draw")(he),v.previousPromises(he)},pe.layoutReplot=function(he){var Be=he.layout;return he.layout=void 0,M.call("_doPlot",he,"",Be)},pe.doLegend=function(he){return M.getComponentMethod("legend","draw")(he),v.previousPromises(he)},pe.doTicksRelayout=function(he){return Y.draw(he,"redraw"),he._fullLayout._hasOnlyLargeSploms&&(M.subplotsRegistry.splom.updateGrid(he),S(he),pe.redrawReglTraces(he)),pe.drawMainTitle(he),v.previousPromises(he)},pe.doModeBar=function(he){var Be=he._fullLayout;p.manage(he);for(var Ye=0;Ye<Be._basePlotModules.length;Ye++){var et=Be._basePlotModules[Ye].updateFx;et&&et(he)}return v.previousPromises(he)},pe.doCamera=function(he){for(var Be=he._fullLayout,Ye=Be._subplots.gl3d,et=0;et<Ye.length;et++){var Qe=Be[Ye[et]],ft=Qe._scene;ft.setViewport(Qe)}},pe.drawData=function(he){var Be=he._fullLayout;S(he);for(var Ye=Be._basePlotModules,et=0;et<Ye.length;et++)Ye[et].plot(he);return pe.redrawReglTraces(he),v.style(he),M.getComponentMethod("selections","draw")(he),M.getComponentMethod("shapes","draw")(he),M.getComponentMethod("annotations","draw")(he),M.getComponentMethod("images","draw")(he),Be._replotting=!1,v.previousPromises(he)},pe.redrawReglTraces=function(he){var Be=he._fullLayout;if(Be._has("regl")){var Ye=he._fullData,et=[],Qe=[],ft,mn;for(Be._hasOnlyLargeSploms&&Be._splomGrid.draw(),ft=0;ft<Ye.length;ft++){var ta=Ye[ft];ta.visible===!0&&ta._length!==0&&(ta.type==="splom"?Be._splomScenes[ta.uid].draw():ta.type==="scattergl"?g.pushUnique(et,ta.xaxis+ta.yaxis):ta.type==="scatterpolargl"&&g.pushUnique(Qe,ta.subplot))}for(ft=0;ft<et.length;ft++)mn=Be._plots[et[ft]],mn._scene&&mn._scene.draw();for(ft=0;ft<Qe.length;ft++)mn=Be[Qe[ft]]._subplot,mn._scene&&mn._scene.draw()}},pe.doAutoRangeAndConstraints=function(he){for(var Be=Y.list(he,"",!0),Ye,et={},Qe=0;Qe<Be.length;Qe++)if(Ye=Be[Qe],!et[Ye._id]){et[Ye._id]=1,G(he,Ye),V(he,Ye);var ft=Ye._matchGroup;if(ft)for(var mn in ft){var ta=Y.getFromId(he,mn);V(he,ta,Ye.range),et[mn]=1}}ee(he)},pe.finalDraw=function(he){M.getComponentMethod("rangeslider","draw")(he),M.getComponentMethod("rangeselector","draw")(he)},pe.drawMarginPushers=function(he){M.getComponentMethod("legend","draw")(he),M.getComponentMethod("rangeselector","draw")(he),M.getComponentMethod("sliders","draw")(he),M.getComponentMethod("updatemenus","draw")(he),M.getComponentMethod("colorbar","draw")(he)}}}),w2=a({"src/components/selections/draw.js"(pe,me){var M=Zy().readPaths,v=ox(),g=X1().clearOutlineControllers,E=Oe(),S=t1(),T=Vm().arrayEditor,C=fy(),P=C.getPathString;me.exports={draw:p,drawOne:N,activateLastSelection:G};function p(W){var q=W._fullLayout;g(W),q._selectionLayer.selectAll("path").remove();for(var z in q._plots){var H=q._plots[z].selectionLayer;H&&H.selectAll("path").remove()}for(var Z=0;Z<q.selections.length;Z++)N(W,Z)}function Y(W){return W._context.editSelection}function N(W,q){W._fullLayout._paperdiv.selectAll('.selectionlayer [data-index="'+q+'"]').remove();var z=C.makeSelectionsOptionsAndPlotinfo(W,q),H=z.options,Z=z.plotinfo;if(!H._input)return;ne(W._fullLayout._selectionLayer);function ne(te){var Se=P(W,H),fe={"data-index":q,"fill-rule":"evenodd",d:Se},ve=H.opacity,xe="rgba(0,0,0,0)",re=H.line.color||E.contrast(W._fullLayout.plot_bgcolor),de=H.line.width,be=H.line.dash;de||(de=5,be="solid");var Te=Y(W)&&W._fullLayout._activeSelectionIndex===q;Te&&(xe=W._fullLayout.activeselection.fillcolor,ve=W._fullLayout.activeselection.opacity);for(var ye=[],De=1;De>=0;De--){var Ue=te.append("path").attr(fe).style("opacity",De?.1:ve).call(E.stroke,re).call(E.fill,xe).call(S.dashLine,De?"solid":be,De?4+de:de);if(j(Ue,W,H),Te){var he=T(W.layout,"selections",H);Ue.style({cursor:"move"});var Be={element:Ue.node(),plotinfo:Z,gd:W,editHelpers:he,isActiveSelection:!0},Ye=M(Se,W);v(Ye,Ue,Be)}else Ue.style("pointer-events",De?"all":"none");ye[De]=Ue}var et=ye[0],Qe=ye[1];Qe.node().addEventListener("click",function(){return ee(W,et)})}}function j(W,q,z){var H=z.xref+z.yref;S.setClipUrl(W,"clip"+q._fullLayout._uid+H,q)}function ee(W,q){if(Y(W)){var z=q.node(),H=+z.getAttribute("data-index");if(H>=0){if(H===W._fullLayout._activeSelectionIndex){V(W);return}W._fullLayout._activeSelectionIndex=H,W._fullLayout._deactivateSelection=V,p(W)}}}function G(W){if(Y(W)){var q=W._fullLayout.selections.length-1;W._fullLayout._activeSelectionIndex=q,W._fullLayout._deactivateSelection=V,p(W)}}function V(W){if(Y(W)){var q=W._fullLayout._activeSelectionIndex;q>=0&&(g(W),delete W._fullLayout._activeSelectionIndex,p(W))}}}}),ky=a({"node_modules/polybooljs/lib/build-log.js"(pe,me){function M(){var v,g=0,E=!1;function S(T,C){return v.list.push({type:T,data:C?JSON.parse(JSON.stringify(C)):void 0}),v}return v={list:[],segmentId:function(){return g++},checkIntersection:function(T,C){return S("check",{seg1:T,seg2:C})},segmentChop:function(T,C){return S("div_seg",{seg:T,pt:C}),S("chop",{seg:T,pt:C})},statusRemove:function(T){return S("pop_seg",{seg:T})},segmentUpdate:function(T){return S("seg_update",{seg:T})},segmentNew:function(T,C){return S("new_seg",{seg:T,primary:C})},segmentRemove:function(T){return S("rem_seg",{seg:T})},tempStatus:function(T,C,P){return S("temp_status",{seg:T,above:C,below:P})},rewind:function(T){return S("rewind",{seg:T})},status:function(T,C,P){return S("status",{seg:T,above:C,below:P})},vert:function(T){return T===E?v:(E=T,S("vert",{x:T}))},log:function(T){return typeof T!="string"&&(T=JSON.stringify(T,!1,"  ")),S("log",{txt:T})},reset:function(){return S("reset")},selected:function(T){return S("selected",{segs:T})},chainStart:function(T){return S("chain_start",{seg:T})},chainRemoveHead:function(T,C){return S("chain_rem_head",{index:T,pt:C})},chainRemoveTail:function(T,C){return S("chain_rem_tail",{index:T,pt:C})},chainNew:function(T,C){return S("chain_new",{pt1:T,pt2:C})},chainMatch:function(T){return S("chain_match",{index:T})},chainClose:function(T){return S("chain_close",{index:T})},chainAddHead:function(T,C){return S("chain_add_head",{index:T,pt:C})},chainAddTail:function(T,C){return S("chain_add_tail",{index:T,pt:C})},chainConnect:function(T,C){return S("chain_con",{index1:T,index2:C})},chainReverse:function(T){return S("chain_rev",{index:T})},chainJoin:function(T,C){return S("chain_join",{index1:T,index2:C})},done:function(){return S("done")}},v}me.exports=M}}),ab=a({"node_modules/polybooljs/lib/epsilon.js"(pe,me){function M(v){typeof v!="number"&&(v=1e-10);var g={epsilon:function(E){return typeof E=="number"&&(v=E),v},pointAboveOrOnLine:function(E,S,T){var C=S[0],P=S[1],p=T[0],Y=T[1],N=E[0],j=E[1];return(p-C)*(j-P)-(Y-P)*(N-C)>=-v},pointBetween:function(E,S,T){var C=E[1]-S[1],P=T[0]-S[0],p=E[0]-S[0],Y=T[1]-S[1],N=p*P+C*Y;if(N<v)return!1;var j=P*P+Y*Y;return!(N-j>-v)},pointsSameX:function(E,S){return Math.abs(E[0]-S[0])<v},pointsSameY:function(E,S){return Math.abs(E[1]-S[1])<v},pointsSame:function(E,S){return g.pointsSameX(E,S)&&g.pointsSameY(E,S)},pointsCompare:function(E,S){return g.pointsSameX(E,S)?g.pointsSameY(E,S)?0:E[1]<S[1]?-1:1:E[0]<S[0]?-1:1},pointsCollinear:function(E,S,T){var C=E[0]-S[0],P=E[1]-S[1],p=S[0]-T[0],Y=S[1]-T[1];return Math.abs(C*Y-p*P)<v},linesIntersect:function(E,S,T,C){var P=S[0]-E[0],p=S[1]-E[1],Y=C[0]-T[0],N=C[1]-T[1],j=P*N-p*Y;if(Math.abs(j)<v)return!1;var ee=E[0]-T[0],G=E[1]-T[1],V=(Y*G-N*ee)/j,W=(P*G-p*ee)/j,q={alongA:0,alongB:0,pt:[E[0]+V*P,E[1]+V*p]};return V<=-v?q.alongA=-2:V<v?q.alongA=-1:V-1<=-v?q.alongA=0:V-1<v?q.alongA=1:q.alongA=2,W<=-v?q.alongB=-2:W<v?q.alongB=-1:W-1<=-v?q.alongB=0:W-1<v?q.alongB=1:q.alongB=2,q},pointInsideRegion:function(E,S){for(var T=E[0],C=E[1],P=S[S.length-1][0],p=S[S.length-1][1],Y=!1,N=0;N<S.length;N++){var j=S[N][0],ee=S[N][1];ee-C>v!=p-C>v&&(P-j)*(C-ee)/(p-ee)+j-T>v&&(Y=!Y),P=j,p=ee}return Y}};return g}me.exports=M}}),Jb=a({"node_modules/polybooljs/lib/linked-list.js"(pe,me){var M={create:function(){var v={root:{root:!0,next:null},exists:function(g){return!(g===null||g===v.root)},isEmpty:function(){return v.root.next===null},getHead:function(){return v.root.next},insertBefore:function(g,E){for(var S=v.root,T=v.root.next;T!==null;){if(E(T)){g.prev=T.prev,g.next=T,T.prev.next=g,T.prev=g;return}S=T,T=T.next}S.next=g,g.prev=S,g.next=null},findTransition:function(g){for(var E=v.root,S=v.root.next;S!==null&&!g(S);)E=S,S=S.next;return{before:E===v.root?null:E,after:S,insert:function(T){return T.prev=E,T.next=S,E.next=T,S!==null&&(S.prev=T),T}}}};return v},node:function(v){return v.prev=null,v.next=null,v.remove=function(){v.prev.next=v.next,v.next&&(v.next.prev=v.prev),v.prev=null,v.next=null},v}};me.exports=M}}),Qb=a({"node_modules/polybooljs/lib/intersecter.js"(pe,me){var M=Jb();function v(g,E,S){function T(q,z){return{id:S?S.segmentId():-1,start:q,end:z,myFill:{above:null,below:null},otherFill:null}}function C(q,z,H){return{id:S?S.segmentId():-1,start:q,end:z,myFill:{above:H.myFill.above,below:H.myFill.below},otherFill:null}}var P=M.create();function p(q,z,H,Z,ne,te){var Se=E.pointsCompare(z,ne);return Se!==0?Se:E.pointsSame(H,te)?0:q!==Z?q?1:-1:E.pointAboveOrOnLine(H,Z?ne:te,Z?te:ne)?1:-1}function Y(q,z){P.insertBefore(q,function(H){var Z=p(q.isStart,q.pt,z,H.isStart,H.pt,H.other.pt);return Z<0})}function N(q,z){var H=M.node({isStart:!0,pt:q.start,seg:q,primary:z,other:null,status:null});return Y(H,q.end),H}function j(q,z,H){var Z=M.node({isStart:!1,pt:z.end,seg:z,primary:H,other:q,status:null});q.other=Z,Y(Z,q.pt)}function ee(q,z){var H=N(q,z);return j(H,q,z),H}function G(q,z){S&&S.segmentChop(q.seg,z),q.other.remove(),q.seg.end=z,q.other.pt=z,Y(q.other,q.pt)}function V(q,z){var H=C(z,q.seg.end,q.seg);return G(q,z),ee(H,q.primary)}function W(q,z){var H=M.create();function Z(Ue,he){var Be=Ue.seg.start,Ye=Ue.seg.end,et=he.seg.start,Qe=he.seg.end;return E.pointsCollinear(Be,et,Qe)?E.pointsCollinear(Ye,et,Qe)||E.pointAboveOrOnLine(Ye,et,Qe)?1:-1:E.pointAboveOrOnLine(Be,et,Qe)?1:-1}function ne(Ue){return H.findTransition(function(he){var Be=Z(Ue,he.ev);return Be>0})}function te(Ue,he){var Be=Ue.seg,Ye=he.seg,et=Be.start,Qe=Be.end,ft=Ye.start,mn=Ye.end;S&&S.checkIntersection(Be,Ye);var ta=E.linesIntersect(et,Qe,ft,mn);if(ta===!1){if(!E.pointsCollinear(et,Qe,ft)||E.pointsSame(et,mn)||E.pointsSame(Qe,ft))return!1;var Do=E.pointsSame(et,ft),Ae=E.pointsSame(Qe,mn);if(Do&&Ae)return he;var ke=!Do&&E.pointBetween(et,ft,mn),ge=!Ae&&E.pointBetween(Qe,ft,mn);if(Do)return ge?V(he,Qe):V(Ue,mn),he;ke&&(Ae||(ge?V(he,Qe):V(Ue,mn)),V(he,et))}else ta.alongA===0&&(ta.alongB===-1?V(Ue,ft):ta.alongB===0?V(Ue,ta.pt):ta.alongB===1&&V(Ue,mn)),ta.alongB===0&&(ta.alongA===-1?V(he,et):ta.alongA===0?V(he,ta.pt):ta.alongA===1&&V(he,Qe));return!1}for(var Se=[];!P.isEmpty();){var fe=P.getHead();if(S&&S.vert(fe.pt[0]),fe.isStart){let Ue=function(){if(xe){var he=te(fe,xe);if(he)return he}return re?te(fe,re):!1};S&&S.segmentNew(fe.seg,fe.primary);var ve=ne(fe),xe=ve.before?ve.before.ev:null,re=ve.after?ve.after.ev:null;S&&S.tempStatus(fe.seg,xe?xe.seg:!1,re?re.seg:!1);var de=Ue();if(de){if(g){var be;fe.seg.myFill.below===null?be=!0:be=fe.seg.myFill.above!==fe.seg.myFill.below,be&&(de.seg.myFill.above=!de.seg.myFill.above)}else de.seg.otherFill=fe.seg.myFill;S&&S.segmentUpdate(de.seg),fe.other.remove(),fe.remove()}if(P.getHead()!==fe){S&&S.rewind(fe.seg);continue}if(g){var be;fe.seg.myFill.below===null?be=!0:be=fe.seg.myFill.above!==fe.seg.myFill.below,re?fe.seg.myFill.below=re.seg.myFill.above:fe.seg.myFill.below=q,be?fe.seg.myFill.above=!fe.seg.myFill.below:fe.seg.myFill.above=fe.seg.myFill.below}else if(fe.seg.otherFill===null){var Te;re?fe.primary===re.primary?Te=re.seg.otherFill.above:Te=re.seg.myFill.above:Te=fe.primary?z:q,fe.seg.otherFill={above:Te,below:Te}}S&&S.status(fe.seg,xe?xe.seg:!1,re?re.seg:!1),fe.other.status=ve.insert(M.node({ev:fe}))}else{var ye=fe.status;if(ye===null)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(H.exists(ye.prev)&&H.exists(ye.next)&&te(ye.prev.ev,ye.next.ev),S&&S.statusRemove(ye.ev.seg),ye.remove(),!fe.primary){var De=fe.seg.myFill;fe.seg.myFill=fe.seg.otherFill,fe.seg.otherFill=De}Se.push(fe.seg)}P.getHead().remove()}return S&&S.done(),Se}return g?{addRegion:function(q){for(var z,H=q[q.length-1],Z=0;Z<q.length;Z++){z=H,H=q[Z];var ne=E.pointsCompare(z,H);ne!==0&&ee(T(ne<0?z:H,ne<0?H:z),!0)}},calculate:function(q){return W(q,!1)}}:{calculate:function(q,z,H,Z){return q.forEach(function(ne){ee(C(ne.start,ne.end,ne),!0)}),H.forEach(function(ne){ee(C(ne.start,ne.end,ne),!1)}),W(z,Z)}}}me.exports=v}}),nb=a({"node_modules/polybooljs/lib/segment-chainer.js"(pe,me){function M(v,g,E){var S=[],T=[];return v.forEach(function(C){var P=C.start,p=C.end;if(g.pointsSame(P,p)){console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");return}E&&E.chainStart(C);var Y={index:0,matches_head:!1,matches_pt1:!1},N={index:0,matches_head:!1,matches_pt1:!1},j=Y;function ee(Te,ye,De){return j.index=Te,j.matches_head=ye,j.matches_pt1=De,j===Y?(j=N,!1):(j=null,!0)}for(var G=0;G<S.length;G++){var V=S[G],W=V[0];V[1];var q=V[V.length-1];if(V[V.length-2],g.pointsSame(W,P)){if(ee(G,!0,!0))break}else if(g.pointsSame(W,p)){if(ee(G,!0,!1))break}else if(g.pointsSame(q,P)){if(ee(G,!1,!0))break}else if(g.pointsSame(q,p)&&ee(G,!1,!1))break}if(j===Y){S.push([P,p]),E&&E.chainNew(P,p);return}if(j===N){E&&E.chainMatch(Y.index);var z=Y.index,H=Y.matches_pt1?p:P,Z=Y.matches_head,V=S[z],ne=Z?V[0]:V[V.length-1],te=Z?V[1]:V[V.length-2],Se=Z?V[V.length-1]:V[0],fe=Z?V[V.length-2]:V[1];if(g.pointsCollinear(te,ne,H)&&(Z?(E&&E.chainRemoveHead(Y.index,H),V.shift()):(E&&E.chainRemoveTail(Y.index,H),V.pop()),ne=te),g.pointsSame(Se,H)){S.splice(z,1),g.pointsCollinear(fe,Se,ne)&&(Z?(E&&E.chainRemoveTail(Y.index,ne),V.pop()):(E&&E.chainRemoveHead(Y.index,ne),V.shift())),E&&E.chainClose(Y.index),T.push(V);return}Z?(E&&E.chainAddHead(Y.index,H),V.unshift(H)):(E&&E.chainAddTail(Y.index,H),V.push(H));return}function ve(Te){E&&E.chainReverse(Te),S[Te].reverse()}function xe(Te,ye){var De=S[Te],Ue=S[ye],he=De[De.length-1],Be=De[De.length-2],Ye=Ue[0],et=Ue[1];g.pointsCollinear(Be,he,Ye)&&(E&&E.chainRemoveTail(Te,he),De.pop(),he=Be),g.pointsCollinear(he,Ye,et)&&(E&&E.chainRemoveHead(ye,Ye),Ue.shift()),E&&E.chainJoin(Te,ye),S[Te]=De.concat(Ue),S.splice(ye,1)}var re=Y.index,de=N.index;E&&E.chainConnect(re,de);var be=S[re].length<S[de].length;Y.matches_head?N.matches_head?be?(ve(re),xe(re,de)):(ve(de),xe(de,re)):xe(de,re):N.matches_head?xe(re,de):be?(ve(re),xe(de,re)):(ve(de),xe(re,de))}),T}me.exports=M}}),ib=a({"node_modules/polybooljs/lib/segment-selector.js"(pe,me){function M(g,E,S){var T=[];return g.forEach(function(C){var P=(C.myFill.above?8:0)+(C.myFill.below?4:0)+(C.otherFill&&C.otherFill.above?2:0)+(C.otherFill&&C.otherFill.below?1:0);E[P]!==0&&T.push({id:S?S.segmentId():-1,start:C.start,end:C.end,myFill:{above:E[P]===1,below:E[P]===2},otherFill:null})}),S&&S.selected(T),T}var v={union:function(g,E){return M(g,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],E)},intersect:function(g,E){return M(g,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],E)},difference:function(g,E){return M(g,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],E)},differenceRev:function(g,E){return M(g,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],E)},xor:function(g,E){return M(g,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],E)}};me.exports=v}}),hy=a({"node_modules/polybooljs/lib/geojson.js"(pe,me){var M={toPolygon:function(v,g){function E(C){if(C.length<=0)return v.segments({inverted:!1,regions:[]});function P(N){var j=N.slice(0,N.length-1);return v.segments({inverted:!1,regions:[j]})}for(var p=P(C[0]),Y=1;Y<C.length;Y++)p=v.selectDifference(v.combine(p,P(C[Y])));return p}if(g.type==="Polygon")return v.polygon(E(g.coordinates));if(g.type==="MultiPolygon"){for(var S=v.segments({inverted:!1,regions:[]}),T=0;T<g.coordinates.length;T++)S=v.selectUnion(v.combine(S,E(g.coordinates[T])));return v.polygon(S)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(v,g,E){E=v.polygon(v.segments(E));function S(V,W){return g.pointInsideRegion([(V[0][0]+V[1][0])*.5,(V[0][1]+V[1][1])*.5],W)}function T(V){return{region:V,children:[]}}var C=T(null);function P(V,W){for(var q=0;q<V.children.length;q++){var z=V.children[q];if(S(W,z.region)){P(z,W);return}}for(var H=T(W),q=0;q<V.children.length;q++){var z=V.children[q];S(z.region,W)&&(H.children.push(z),V.children.splice(q,1),q--)}V.children.push(H)}for(var p=0;p<E.regions.length;p++){var Y=E.regions[p];Y.length<3||P(C,Y)}function N(V,W){for(var q=0,z=V[V.length-1][0],H=V[V.length-1][1],Z=[],ne=0;ne<V.length;ne++){var te=V[ne][0],Se=V[ne][1];Z.push([te,Se]),q+=Se*z-te*H,z=te,H=Se}var fe=q<0;return fe!==W&&Z.reverse(),Z.push([Z[0][0],Z[0][1]]),Z}var j=[];function ee(V){var W=[N(V.region,!1)];j.push(W);for(var q=0;q<V.children.length;q++)W.push(G(V.children[q]))}function G(V){for(var W=0;W<V.children.length;W++)ee(V.children[W]);return N(V.region,!0)}for(var p=0;p<C.children.length;p++)ee(C.children[p]);return j.length<=0?{type:"Polygon",coordinates:[]}:j.length==1?{type:"Polygon",coordinates:j[0]}:{type:"MultiPolygon",coordinates:j}}};me.exports=M}}),Z_=a({"node_modules/polybooljs/index.js"(pe,me){var M=ky(),v=ab(),g=Qb(),E=nb(),S=ib(),T=hy(),C=!1,P=v(),p;p={buildLog:function(N){return N===!0?C=M():N===!1&&(C=!1),C===!1?!1:C.list},epsilon:function(N){return P.epsilon(N)},segments:function(N){var j=g(!0,P,C);return N.regions.forEach(j.addRegion),{segments:j.calculate(N.inverted),inverted:N.inverted}},combine:function(N,j){var ee=g(!1,P,C);return{combined:ee.calculate(N.segments,N.inverted,j.segments,j.inverted),inverted1:N.inverted,inverted2:j.inverted}},selectUnion:function(N){return{segments:S.union(N.combined,C),inverted:N.inverted1||N.inverted2}},selectIntersect:function(N){return{segments:S.intersect(N.combined,C),inverted:N.inverted1&&N.inverted2}},selectDifference:function(N){return{segments:S.difference(N.combined,C),inverted:N.inverted1&&!N.inverted2}},selectDifferenceRev:function(N){return{segments:S.differenceRev(N.combined,C),inverted:!N.inverted1&&N.inverted2}},selectXor:function(N){return{segments:S.xor(N.combined,C),inverted:N.inverted1!==N.inverted2}},polygon:function(N){return{regions:E(N.segments,P,C),inverted:N.inverted}},polygonFromGeoJSON:function(N){return T.toPolygon(p,N)},polygonToGeoJSON:function(N){return T.fromPolygon(p,P,N)},union:function(N,j){return Y(N,j,p.selectUnion)},intersect:function(N,j){return Y(N,j,p.selectIntersect)},difference:function(N,j){return Y(N,j,p.selectDifference)},differenceRev:function(N,j){return Y(N,j,p.selectDifferenceRev)},xor:function(N,j){return Y(N,j,p.selectXor)}};function Y(N,j,ee){var G=p.segments(N),V=p.segments(j),W=p.combine(G,V),q=ee(W);return p.polygon(q)}typeof window=="object"&&(window.PolyBool=p),me.exports=p}}),sb=a({"node_modules/point-in-polygon/nested.js"(pe,me){me.exports=function(v,g,E,S){var T=v[0],C=v[1],P=!1;E===void 0&&(E=0),S===void 0&&(S=g.length);for(var p=S-E,Y=0,N=p-1;Y<p;N=Y++){var j=g[Y+E][0],ee=g[Y+E][1],G=g[N+E][0],V=g[N+E][1],W=ee>C!=V>C&&T<(G-j)*(C-ee)/(V-ee)+j;W&&(P=!P)}return P}}}),__=a({"src/lib/polygon.js"(pe,me){var M=Uo().dot,v=A().BADNUM,g=me.exports={};g.tester=function(S){var T=S.slice(),C=T[0][0],P=C,p=T[0][1],Y=p,N;for((T[T.length-1][0]!==T[0][0]||T[T.length-1][1]!==T[0][1])&&T.push(T[0]),N=1;N<T.length;N++)C=Math.min(C,T[N][0]),P=Math.max(P,T[N][0]),p=Math.min(p,T[N][1]),Y=Math.max(Y,T[N][1]);var j=!1,ee;T.length===5&&(T[0][0]===T[1][0]?T[2][0]===T[3][0]&&T[0][1]===T[3][1]&&T[1][1]===T[2][1]&&(j=!0,ee=function(z){return z[0]===T[0][0]}):T[0][1]===T[1][1]&&T[2][1]===T[3][1]&&T[0][0]===T[3][0]&&T[1][0]===T[2][0]&&(j=!0,ee=function(z){return z[1]===T[0][1]}));function G(z,H){var Z=z[0],ne=z[1];return!(Z===v||Z<C||Z>P||ne===v||ne<p||ne>Y||H&&ee(z))}function V(z,H){var Z=z[0],ne=z[1];if(Z===v||Z<C||Z>P||ne===v||ne<p||ne>Y)return!1;var te=T.length,Se=T[0][0],fe=T[0][1],ve=0,xe,re,de,be,Te;for(xe=1;xe<te;xe++)if(re=Se,de=fe,Se=T[xe][0],fe=T[xe][1],be=Math.min(re,Se),!(Z<be||Z>Math.max(re,Se)||ne>Math.max(de,fe)))if(ne<Math.min(de,fe))Z!==be&&ve++;else{if(Se===re?Te=ne:Te=de+(Z-re)*(fe-de)/(Se-re),ne===Te)return!(xe===1&&H);ne<=Te&&Z!==be&&ve++}return ve%2===1}var W=!0,q=T[0];for(N=1;N<T.length;N++)if(q[0]!==T[N][0]||q[1]!==T[N][1]){W=!1;break}return{xmin:C,xmax:P,ymin:p,ymax:Y,pts:T,contains:j?G:V,isRect:j,degenerate:W}},g.isSegmentBent=function(S,T,C,P){var p=S[T],Y=[S[C][0]-p[0],S[C][1]-p[1]],N=M(Y,Y),j=Math.sqrt(N),ee=[-Y[1]/j,Y[0]/j],G,V,W;for(G=T+1;G<C;G++)if(V=[S[G][0]-p[0],S[G][1]-p[1]],W=M(V,Y),W<0||W>N||Math.abs(M(V,ee))>P)return!0;return!1},g.filter=function(S,T){var C=[S[0]],P=0,p=0;function Y(j){S.push(j);var ee=C.length,G=P;C.splice(p+1);for(var V=G+1;V<S.length;V++)(V===S.length-1||g.isSegmentBent(S,G,V+1,T))&&(C.push(S[V]),C.length<ee-2&&(P=V,p=C.length-1),G=V)}if(S.length>1){var N=S.pop();Y(N)}return{addPt:Y,raw:S,filtered:C}}}}),fx=a({"src/components/selections/constants.js"(pe,me){me.exports={BENDPX:1.5,MINSELECT:12,SELECTDELAY:100,SELECTID:"-select"}}}),ob=a({"src/components/selections/select.js"(pe,me){var M=Z_(),v=sb(),g=jp(),E=t1().dashStyle,S=Oe(),T=uy(),C=jg().makeEventData,P=Y_(),p=P.freeMode,Y=P.rectMode,N=P.drawMode,j=P.openMode,ee=P.selectMode,G=fy(),V=Ry(),W=ox(),q=X1().clearOutline,z=Zy(),H=z.handleEllipse,Z=z.readPaths,ne=b2().newShapes,te=Jx(),Se=w2().activateLastSelection,fe=o0(),ve=fe.sorterAsc,xe=__(),re=zv(),de=Ov().getFromId,be=ix(),Te=$_().redrawReglTraces,ye=fx(),De=ye.MINSELECT,Ue=xe.filter,he=xe.tester,Be=sx(),Ye=Be.p2r,et=Be.axValue,Qe=Be.getTransform;function ft(vs){return vs.subplot!==void 0}function mn(vs,jl,zl,Ve,pn){var ci=!ft(Ve),_n=p(pn),Tp=Y(pn),Sp=j(pn),Ip=N(pn),Jp=ee(pn),m0=pn==="drawline",Dp=pn==="drawcircle",c0=m0||Dp,b0=Ve.gd,E0=b0._fullLayout,gm=Jp&&E0.newselection.mode==="immediate"&&ci,Nm=E0._zoomlayer,Bm=Ve.element.getBoundingClientRect(),xm=Ve.plotinfo,Am=Qe(xm),mm=jl-Bm.left,vm=zl-Bm.top;E0._calcInverseTransform(b0);var Om=fe.apply3DTransform(E0._invTransform)(mm,vm);mm=Om[0],vm=Om[1];var Lm=E0._invScaleX,Um=E0._invScaleY,Em=mm,lm=vm,Dm="M"+mm+","+vm,Zm=Ve.xaxes[0],rv=Ve.yaxes[0],zm=Zm._length,Ym=rv._length,Km=vs.altKey&&!(N(pn)&&Sp),_v,Hm,uv,dt,Fe,Gp,kp;Ce(vs,b0,Ve),_n&&(_v=Ue([[mm,vm]],ye.BENDPX));var yp=Nm.selectAll("path.select-outline-"+xm.id).data([1]),bp=Ip?E0.newshape:E0.newselection;Ip&&(Ve.hasText=bp.label.text||bp.label.texttemplate);var Pp=Ip&&!Sp?bp.fillcolor:"rgba(0,0,0,0)",s0=bp.line.color||(ci?S.contrast(b0._fullLayout.plot_bgcolor):"#7f7f7f");yp.enter().append("path").attr("class","select-outline select-outline-"+xm.id).style({opacity:Ip?bp.opacity/2:1,"stroke-dasharray":E(bp.line.dash,bp.line.width),"stroke-width":bp.line.width+"px","shape-rendering":"crispEdges"}).call(S.stroke,s0).call(S.fill,Pp).attr("fill-rule","evenodd").classed("cursor-move",!!Ip).attr("transform",Am).attr("d",Dm+"Z");var Rp=Nm.append("path").attr("class","zoombox-corners").style({fill:S.background,stroke:S.defaultLine,"stroke-width":1}).attr("transform",Am).attr("d","M0,0Z");if(Ip&&Ve.hasText){var Vp=Nm.select(".label-temp");Vp.empty()&&(Vp=Nm.append("g").classed("label-temp",!0).classed("select-outline",!0).style({opacity:.8}))}var r0=E0._uid+ye.SELECTID,$p=[],P0=Me(b0,Ve.xaxes,Ve.yaxes,Ve.subplot);gm&&!vs.shiftKey&&(Ve._clearSubplotSelections=function(){if(ci){var tm=Zm._id,wm=rv._id;Hp(b0,tm,wm,P0);for(var bm=(b0.layout||{}).selections||[],Tm=[],Rm=!1,Sm=0;Sm<bm.length;Sm++){var Gm=E0.selections[Sm];!Gm||Gm.xref!==tm||Gm.yref!==wm?Tm.push(bm[Sm]):Rm=!0}Rm&&(b0._fullLayout._noEmitSelectedAtStart=!0,g.call("_guiRelayout",b0,{selections:Tm}))}});var j0=B0(Ve);Ve.moveFn=function(tm,wm){Ve._clearSubplotSelections&&(Ve._clearSubplotSelections(),Ve._clearSubplotSelections=void 0),Em=Math.max(0,Math.min(zm,Lm*tm+mm)),lm=Math.max(0,Math.min(Ym,Um*wm+vm));var bm=Math.abs(Em-mm),Tm=Math.abs(lm-vm);if(Tp){var Rm,Sm,Gm;if(Jp){var Xm=E0.selectdirection;switch(Xm==="any"?Tm<Math.min(bm*.6,De)?Rm="h":bm<Math.min(Tm*.6,De)?Rm="v":Rm="d":Rm=Xm,Rm){case"h":Sm=Dp?Ym/2:0,Gm=Ym;break;case"v":Sm=Dp?zm/2:0,Gm=zm;break}}if(Ip)switch(E0.newshape.drawdirection){case"vertical":Rm="h",Sm=Dp?Ym/2:0,Gm=Ym;break;case"horizontal":Rm="v",Sm=Dp?zm/2:0,Gm=zm;break;case"ortho":bm<Tm?(Rm="h",Sm=vm,Gm=lm):(Rm="v",Sm=mm,Gm=Em);break;default:Rm="d"}Rm==="h"?(dt=c0?H(Dp,[Em,Sm],[Em,Gm]):[[mm,Sm],[mm,Gm],[Em,Gm],[Em,Sm]],dt.xmin=c0?Em:Math.min(mm,Em),dt.xmax=c0?Em:Math.max(mm,Em),dt.ymin=Math.min(Sm,Gm),dt.ymax=Math.max(Sm,Gm),Rp.attr("d","M"+dt.xmin+","+(vm-De)+"h-4v"+2*De+"h4ZM"+(dt.xmax-1)+","+(vm-De)+"h4v"+2*De+"h-4Z")):Rm==="v"?(dt=c0?H(Dp,[Sm,lm],[Gm,lm]):[[Sm,vm],[Sm,lm],[Gm,lm],[Gm,vm]],dt.xmin=Math.min(Sm,Gm),dt.xmax=Math.max(Sm,Gm),dt.ymin=c0?lm:Math.min(vm,lm),dt.ymax=c0?lm:Math.max(vm,lm),Rp.attr("d","M"+(mm-De)+","+dt.ymin+"v-4h"+2*De+"v4ZM"+(mm-De)+","+(dt.ymax-1)+"v4h"+2*De+"v-4Z")):Rm==="d"&&(dt=c0?H(Dp,[mm,vm],[Em,lm]):[[mm,vm],[mm,lm],[Em,lm],[Em,vm]],dt.xmin=Math.min(mm,Em),dt.xmax=Math.max(mm,Em),dt.ymin=Math.min(vm,lm),dt.ymax=Math.max(vm,lm),Rp.attr("d","M0,0Z"))}else _n&&(_v.addPt([Em,lm]),dt=_v.filtered);if(Ve.selectionDefs&&Ve.selectionDefs.length?(uv=Fp(Ve.mergedPolygons,dt,Km),dt.subtract=Km,Hm=ge(Ve.selectionDefs.concat([dt]))):(uv=[dt],Hm=he(dt)),W(_r(uv,Sp),yp,Ve),Jp){var pv=dr(b0,!1),Ev=pv.eventData?pv.eventData.points.slice():[];pv=dr(b0,!1,Hm,P0,Ve),Hm=pv.selectionTesters,kp=pv.eventData;var kv;_v?kv=_v.filtered:kv=h0(uv),re.throttle(r0,ye.SELECTDELAY,function(){$p=gs(Hm,P0);for(var tv=$p.slice(),Mv=0;Mv<Ev.length;Mv++){for(var i1=Ev[Mv],V1=!1,$m=0;$m<tv.length;$m++)if(tv[$m].curveNumber===i1.curveNumber&&tv[$m].pointNumber===i1.pointNumber){V1=!0;break}V1||tv.push(i1)}tv.length&&(kp||(kp={}),kp.points=tv),j0(kp,kv),em(b0,kp)})}},Ve.clickFn=function(tm,wm){if(Rp.remove(),b0._fullLayout._activeShapeIndex>=0){b0._fullLayout._deactivateShape(b0);return}if(!Ip){var bm=E0.clickmode;re.done(r0).then(function(){if(re.clear(r0),tm===2){for(yp.remove(),Fe=0;Fe<P0.length;Fe++)Gp=P0[Fe],Gp._module.selectPoints(Gp,!1);if(Yl(b0,P0),Q(Ve),J0(b0),P0.length){var Tm=P0[0].xaxis,Rm=P0[0].yaxis;if(Tm&&Rm){for(var Sm=[],Gm=b0._fullLayout.selections,Xm=0;Xm<Gm.length;Xm++){var pv=Gm[Xm];pv&&(pv.xref!==Tm._id||pv.yref!==Rm._id)&&Sm.push(pv)}Sm.length<Gm.length&&(b0._fullLayout._noEmitSelectedAtStart=!0,g.call("_guiRelayout",b0,{selections:Sm}))}}}else bm.indexOf("select")>-1&&ta(wm,b0,Ve.xaxes,Ve.yaxes,Ve.subplot,Ve,yp),bm==="event"&&k0(b0,void 0);T.click(b0,wm,xm.id)}).catch(fe.error)}},Ve.doneFn=function(){Rp.remove(),re.done(r0).then(function(){re.clear(r0),!gm&&dt&&Ve.selectionDefs&&(dt.subtract=Km,Ve.selectionDefs.push(dt),Ve.mergedPolygons.length=0,[].push.apply(Ve.mergedPolygons,uv)),(gm||Ip)&&Q(Ve,gm),Ve.doneFnCompleted&&Ve.doneFnCompleted($p),Jp&&k0(b0,kp)}).catch(fe.error)}}function ta(vs,jl,zl,Ve,pn,ci,_n){var Tp=jl._hoverdata,Sp=jl._fullLayout,Ip=Sp.clickmode,Jp=Ip.indexOf("event")>-1,m0=[],Dp,c0,b0,E0,gm,Nm,Bm,xm,Am,mm;if(tt(Tp)){Ce(vs,jl,ci),Dp=Me(jl,zl,Ve,pn);var vm=bt(Tp,Dp),Om=vm.pointNumbers.length>0;if(Om?yi(Dp,vm):Fl(Dp)&&(Bm=Ct(vm))){for(_n&&_n.remove(),mm=0;mm<Dp.length;mm++)c0=Dp[mm],c0._module.selectPoints(c0,!1);Yl(jl,Dp),Q(ci),Jp&&J0(jl)}else{xm=vs.shiftKey&&(Bm!==void 0?Bm:Ct(vm)),b0=Do(vm.pointNumber,vm.searchInfo,xm);var Lm=ci.selectionDefs.concat([b0]);for(E0=ge(Lm),mm=0;mm<Dp.length;mm++)if(gm=Dp[mm]._module.selectPoints(Dp[mm],E0),Nm=Up(gm,Dp[mm]),m0.length)for(var Um=0;Um<Nm.length;Um++)m0.push(Nm[Um]);else m0=Nm;if(Am={points:m0},Yl(jl,Dp,Am),b0&&ci&&ci.selectionDefs.push(b0),_n){var Em=ci.mergedPolygons,lm=j(ci.dragmode);W(_r(Em,lm),_n,ci)}Jp&&k0(jl,Am)}}}function Do(vs,jl,zl){return{pointNumber:vs,searchInfo:jl,subtract:!!zl}}function Ae(vs){return"pointNumber"in vs&&"searchInfo"in vs}function ke(vs){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(jl,zl,Ve,pn){var ci=vs.searchInfo.cd[0].trace.index,_n=pn.cd[0].trace.index;return _n===ci&&Ve===vs.pointNumber},isRect:!1,degenerate:!1,subtract:!!vs.subtract}}function ge(vs){if(!vs.length)return;for(var jl=[],zl=Ae(vs[0])?0:vs[0][0][0],Ve=zl,pn=Ae(vs[0])?0:vs[0][0][1],ci=pn,_n=0;_n<vs.length;_n++)if(Ae(vs[_n]))jl.push(ke(vs[_n]));else{var Tp=he(vs[_n]);Tp.subtract=!!vs[_n].subtract,jl.push(Tp),zl=Math.min(zl,Tp.xmin),Ve=Math.max(Ve,Tp.xmax),pn=Math.min(pn,Tp.ymin),ci=Math.max(ci,Tp.ymax)}function Sp(Ip,Jp,m0,Dp){for(var c0=!1,b0=0;b0<jl.length;b0++)jl[b0].contains(Ip,Jp,m0,Dp)&&(c0=!jl[b0].subtract);return c0}return{xmin:zl,xmax:Ve,ymin:pn,ymax:ci,pts:[],contains:Sp,isRect:!1,degenerate:!1}}function Ce(vs,jl,zl){var Ve=jl._fullLayout,pn=zl.plotinfo,ci=zl.dragmode,_n=Ve._lastSelectedSubplot&&Ve._lastSelectedSubplot===pn.id,Tp=(vs.shiftKey||vs.altKey)&&!(N(ci)&&j(ci));_n&&Tp&&pn.selection&&pn.selection.selectionDefs&&!zl.selectionDefs?(zl.selectionDefs=pn.selection.selectionDefs,zl.mergedPolygons=pn.selection.mergedPolygons):(!Tp||!pn.selection)&&Q(zl),_n||(q(jl),Ve._lastSelectedSubplot=pn.id)}function Je(vs){return vs._fullLayout._activeShapeIndex>=0}function Re(vs){return vs._fullLayout._activeSelectionIndex>=0}function Q(vs,jl){var zl=vs.dragmode,Ve=vs.plotinfo,pn=vs.gd;Je(pn)&&pn._fullLayout._deactivateShape(pn),Re(pn)&&pn._fullLayout._deactivateSelection(pn);var ci=pn._fullLayout,_n=ci._zoomlayer,Tp=N(zl),Sp=ee(zl);if(Tp||Sp){var Ip=_n.selectAll(".select-outline-"+Ve.id);if(Ip&&pn._fullLayout._outlining){var Jp;Tp&&(Jp=ne(Ip,vs)),Jp&&g.call("_guiRelayout",pn,{shapes:Jp});var m0;Sp&&!ft(vs)&&(m0=te(Ip,vs)),m0&&(pn._fullLayout._noEmitSelectedAtStart=!0,g.call("_guiRelayout",pn,{selections:m0}).then(function(){jl&&Se(pn)})),pn._fullLayout._outlining=!1}}Ve.selection={},Ve.selection.selectionDefs=vs.selectionDefs=[],Ve.selection.mergedPolygons=vs.mergedPolygons=[]}function ce(vs){return vs._id}function Me(vs,jl,zl,Ve){if(!vs.calcdata)return[];var pn=[],ci=jl.map(ce),_n=zl.map(ce),Tp,Sp,Ip;for(Ip=0;Ip<vs.calcdata.length;Ip++)if(Tp=vs.calcdata[Ip],Sp=Tp[0].trace,!(Sp.visible!==!0||!Sp._module||!Sp._module.selectPoints))if(ft({subplot:Ve})&&(Sp.subplot===Ve||Sp.geo===Ve))pn.push(Le(Sp._module,Tp,jl[0],zl[0]));else if(Sp.type==="splom"){if(Sp._xaxes[ci[0]]&&Sp._yaxes[_n[0]]){var Jp=Le(Sp._module,Tp,jl[0],zl[0]);Jp.scene=vs._fullLayout._splomScenes[Sp.uid],pn.push(Jp)}}else if(Sp.type==="sankey"){var m0=Le(Sp._module,Tp,jl[0],zl[0]);pn.push(m0)}else{if(ci.indexOf(Sp.xaxis)===-1&&(!Sp._xA||!Sp._xA.overlaying)||_n.indexOf(Sp.yaxis)===-1&&(!Sp._yA||!Sp._yA.overlaying))continue;pn.push(Le(Sp._module,Tp,de(vs,Sp.xaxis),de(vs,Sp.yaxis)))}return pn}function Le(vs,jl,zl,Ve){return{_module:vs,cd:jl,xaxis:zl,yaxis:Ve}}function tt(vs){return vs&&Array.isArray(vs)&&vs[0].hoverOnBox!==!0}function bt(vs,jl){var zl=vs[0],Ve=-1,pn=[],ci,_n;for(_n=0;_n<jl.length;_n++)if(ci=jl[_n],zl.fullData.index===ci.cd[0].trace.index){if(zl.hoverOnBox===!0)break;zl.pointNumber!==void 0?Ve=zl.pointNumber:zl.binNumber!==void 0&&(Ve=zl.binNumber,pn=zl.pointNumbers);break}return{pointNumber:Ve,pointNumbers:pn,searchInfo:ci}}function Ct(vs){var jl=vs.searchInfo.cd[0].trace,zl=vs.pointNumber,Ve=vs.pointNumbers,pn=Ve.length>0,ci=pn?Ve[0]:zl;return jl.selectedpoints?jl.selectedpoints.indexOf(ci)>-1:!1}function yi(vs,jl){var zl=[],Ve,pn,ci,_n;for(_n=0;_n<vs.length;_n++)Ve=vs[_n],Ve.cd[0].trace.selectedpoints&&Ve.cd[0].trace.selectedpoints.length>0&&zl.push(Ve);if(zl.length===1&&(ci=zl[0]===jl.searchInfo,ci&&(pn=jl.searchInfo.cd[0].trace,pn.selectedpoints.length===jl.pointNumbers.length))){for(_n=0;_n<jl.pointNumbers.length;_n++)if(pn.selectedpoints.indexOf(jl.pointNumbers[_n])<0)return!1;return!0}return!1}function Fl(vs){var jl=0,zl,Ve,pn;for(pn=0;pn<vs.length;pn++)if(zl=vs[pn],Ve=zl.cd[0].trace,Ve.selectedpoints&&(Ve.selectedpoints.length>1||(jl+=Ve.selectedpoints.length,jl>1)))return!1;return jl===1}function Yl(vs,jl,zl){var Ve;for(Ve=0;Ve<jl.length;Ve++){var pn=jl[Ve].cd[0].trace._fullInput,ci=vs._fullLayout._tracePreGUI[pn.uid]||{};ci.selectedpoints===void 0&&(ci.selectedpoints=pn._input.selectedpoints||null)}var _n;if(zl){var Tp=zl.points||[];for(Ve=0;Ve<jl.length;Ve++)_n=jl[Ve].cd[0].trace,_n._input.selectedpoints=_n._fullInput.selectedpoints=[],_n._fullInput!==_n&&(_n.selectedpoints=[]);for(var Sp=0;Sp<Tp.length;Sp++){var Ip=Tp[Sp],Jp=Ip.data,m0=Ip.fullData,Dp=Ip.pointIndex,c0=Ip.pointIndices;c0?([].push.apply(Jp.selectedpoints,c0),_n._fullInput!==_n&&[].push.apply(m0.selectedpoints,c0)):(Jp.selectedpoints.push(Dp),_n._fullInput!==_n&&m0.selectedpoints.push(Dp))}}else for(Ve=0;Ve<jl.length;Ve++)_n=jl[Ve].cd[0].trace,delete _n.selectedpoints,delete _n._input.selectedpoints,_n._fullInput!==_n&&delete _n._fullInput.selectedpoints;qp(vs,jl)}function qp(vs,jl){for(var zl=!1,Ve=0;Ve<jl.length;Ve++){var pn=jl[Ve],ci=pn.cd;g.traceIs(ci[0].trace,"regl")&&(zl=!0);var _n=pn._module,Tp=_n.styleOnSelect||_n.style;Tp&&(Tp(vs,ci,ci[0].node3),ci[0].nodeRangePlot3&&Tp(vs,ci,ci[0].nodeRangePlot3))}zl&&(be(vs),Te(vs))}function Fp(vs,jl,zl){for(var Ve=zl?M.difference:M.union,pn=Ve({regions:vs},{regions:[jl]}),ci=pn.regions.reverse(),_n=0;_n<ci.length;_n++){var Tp=ci[_n];Tp.subtract=n0(Tp,ci.slice(0,_n))}return ci}function Up(vs,jl){if(Array.isArray(vs))for(var zl=jl.cd,Ve=jl.cd[0].trace,pn=0;pn<vs.length;pn++)vs[pn]=C(vs[pn],Ve,zl);return vs}function _r(vs,jl){for(var zl=[],Ve=0;Ve<vs.length;Ve++){zl[Ve]=[];for(var pn=0;pn<vs[Ve].length;pn++){zl[Ve][pn]=[],zl[Ve][pn][0]=pn?"L":"M";for(var ci=0;ci<vs[Ve][pn].length;ci++)zl[Ve][pn].push(vs[Ve][pn][ci])}jl||zl[Ve].push(["Z",zl[Ve][0][1],zl[Ve][0][2]])}return zl}function gs(vs,jl){for(var zl=[],Ve,pn,ci=0;ci<jl.length;ci++){var _n=jl[ci];pn=_n._module.selectPoints(_n,vs),Ve=Up(pn,_n),zl=zl.concat(Ve)}return zl}function dr(vs,jl,zl,Ve,pn){var ci=!!Ve,_n,Tp,Sp;pn&&(_n=pn.plotinfo,Tp=pn.xaxes[0]._id,Sp=pn.yaxes[0]._id);var Ip=[],Jp=[],m0=t0(vs),Dp=vs._fullLayout;if(_n){var c0=Dp._zoomlayer,b0=Dp.dragmode,E0=N(b0),gm=ee(b0);if(E0||gm){var Nm=de(vs,Tp,"x"),Bm=de(vs,Sp,"y");if(Nm&&Bm){var xm=c0.selectAll(".select-outline-"+_n.id);if(xm&&vs._fullLayout._outlining&&xm.length){for(var Am=xm[0][0],mm=Am.getAttribute("d"),vm=Z(mm,vs,_n),Om=[],Lm=0;Lm<vm.length;Lm++){for(var Um=vm[Lm],Em=[],lm=0;lm<Um.length;lm++)Em.push([y0(Nm,Um[lm][1]),y0(Bm,Um[lm][2])]);Em.xref=Tp,Em.yref=Sp,Em.subtract=n0(Em,Om),Om.push(Em)}m0=m0.concat(Om)}}}}var Dm=Tp&&Sp?[Tp+Sp]:Dp._subplots.cartesian;Lo(vs);for(var Zm={},rv=0;rv<Dm.length;rv++){var zm=Dm[rv],Ym=zm.indexOf("y"),Km=zm.slice(0,Ym),_v=zm.slice(Ym),Hm=Tp&&Sp?zl:void 0;if(Hm=e0(m0,Km,_v,Hm),Hm){var uv=Ve;if(!ci){var dt=de(vs,Km,"x"),Fe=de(vs,_v,"y");uv=Me(vs,[dt],[Fe],zm);for(var Gp=0;Gp<uv.length;Gp++){var kp=uv[Gp],yp=kp.cd[0],bp=yp.trace;if(kp._module.name==="scattergl"&&!yp.t.xpx){var Pp=bp.x,s0=bp.y,Rp=bp._length;yp.t.xpx=[],yp.t.ypx=[];for(var Vp=0;Vp<Rp;Vp++)yp.t.xpx[Vp]=dt.c2p(Pp[Vp]),yp.t.ypx[Vp]=Fe.c2p(s0[Vp])}kp._module.name==="splom"&&(Zm[bp.uid]||(Zm[bp.uid]=!0))}}var r0=gs(Hm,uv);Ip=Ip.concat(r0),Jp=Jp.concat(uv)}}var $p={points:Ip};Yl(vs,Jp,$p);var P0=Dp.clickmode,j0=P0.indexOf("event")>-1&&jl;if(!_n&&jl){var tm=t0(vs,!0);if(tm.length){var wm=tm[0].xref,bm=tm[0].yref;if(wm&&bm){var Tm=h0(tm),Rm=Kp([de(vs,wm,"x"),de(vs,bm,"y")]);Rm($p,Tm)}}vs._fullLayout._noEmitSelectedAtStart?vs._fullLayout._noEmitSelectedAtStart=!1:j0&&k0(vs,$p),Dp._reselect=!1}if(!_n&&Dp._deselect){var Sm=Dp._deselect;Tp=Sm.xref,Sp=Sm.yref,Cp(Tp,Sp,Jp)||Hp(vs,Tp,Sp,Ve),j0&&($p.points.length?k0(vs,$p):J0(vs)),Dp._deselect=!1}return{eventData:$p,selectionTesters:zl}}function Lo(vs){var jl=vs.calcdata;if(jl)for(var zl=0;zl<jl.length;zl++){var Ve=jl[zl][0],pn=Ve.trace,ci=vs._fullLayout._splomScenes;if(ci){var _n=ci[pn.uid];_n&&(_n.selectBatch=[])}}}function Cp(vs,jl,zl){for(var Ve=0;Ve<zl.length;Ve++){var pn=zl[Ve];if(pn.xaxis&&pn.xaxis._id===vs&&pn.yaxis&&pn.yaxis._id===jl)return!0}return!1}function Hp(vs,jl,zl,Ve){Ve=Me(vs,[de(vs,jl,"x")],[de(vs,zl,"y")],jl+zl);for(var pn=0;pn<Ve.length;pn++){var ci=Ve[pn];ci._module.selectPoints(ci,!1)}Yl(vs,Ve)}function e0(vs,jl,zl,Ve){for(var pn,ci=0;ci<vs.length;ci++){var _n=vs[ci];if(!(jl!==_n.xref||zl!==_n.yref))if(pn){var Tp=!!_n.subtract;pn=Fp(pn,_n,Tp),Ve=ge(pn)}else pn=[_n],Ve=he(_n)}return Ve}function t0(vs,jl){for(var zl=[],Ve=vs._fullLayout,pn=Ve.selections,ci=pn.length,_n=0;_n<ci;_n++)if(!(jl&&_n!==Ve._activeSelectionIndex)){var Tp=pn[_n];if(Tp){var Sp=Tp.xref,Ip=Tp.yref,Jp=de(vs,Sp,"x"),m0=de(vs,Ip,"y"),Dp,c0,b0,E0,gm;if(Tp.type==="rect"){gm=[];var Nm=y0(Jp,Tp.x0),Bm=y0(Jp,Tp.x1),xm=y0(m0,Tp.y0),Am=y0(m0,Tp.y1);gm=[[Nm,xm],[Nm,Am],[Bm,Am],[Bm,xm]],Dp=Math.min(Nm,Bm),c0=Math.max(Nm,Bm),b0=Math.min(xm,Am),E0=Math.max(xm,Am),gm.xmin=Dp,gm.xmax=c0,gm.ymin=b0,gm.ymax=E0,gm.xref=Sp,gm.yref=Ip,gm.subtract=!1,gm.isRect=!0,zl.push(gm)}else if(Tp.type==="path")for(var mm=Tp.path.split("Z"),vm=[],Om=0;Om<mm.length;Om++){var Lm=mm[Om];if(Lm){Lm+="Z";var Um=G.extractPathCoords(Lm,V.paramIsX,"raw"),Em=G.extractPathCoords(Lm,V.paramIsY,"raw");Dp=1/0,c0=-1/0,b0=1/0,E0=-1/0,gm=[];for(var lm=0;lm<Um.length;lm++){var Dm=y0(Jp,Um[lm]),Zm=y0(m0,Em[lm]);gm.push([Dm,Zm]),Dp=Math.min(Dm,Dp),c0=Math.max(Dm,c0),b0=Math.min(Zm,b0),E0=Math.max(Zm,E0)}gm.xmin=Dp,gm.xmax=c0,gm.ymin=b0,gm.ymax=E0,gm.xref=Sp,gm.yref=Ip,gm.subtract=n0(gm,vm),vm.push(gm),zl.push(gm)}}}}return zl}function n0(vs,jl){for(var zl=!1,Ve=0;Ve<jl.length;Ve++)for(var pn=jl[Ve],ci=0;ci<vs.length;ci++)if(v(vs[ci],pn)){zl=!zl;break}return zl}function y0(vs,jl){return vs.type==="date"&&(jl=jl.replace("_"," ")),vs.type==="log"?vs.c2p(jl):vs.r2p(jl,null,vs.calendar)}function h0(vs){for(var jl=vs.length,zl=[],Ve=0;Ve<jl;Ve++){var pn=vs[Ve];zl=zl.concat(pn),zl=zl.concat([pn[0]])}return I0(zl)}function I0(vs){return vs.isRect=vs.length===5&&vs[0][0]===vs[4][0]&&vs[0][1]===vs[4][1]&&vs[0][0]===vs[1][0]&&vs[2][0]===vs[3][0]&&vs[0][1]===vs[3][1]&&vs[1][1]===vs[2][1]||vs[0][1]===vs[1][1]&&vs[2][1]===vs[3][1]&&vs[0][0]===vs[3][0]&&vs[1][0]===vs[2][0],vs.isRect&&(vs.xmin=Math.min(vs[0][0],vs[2][0]),vs.xmax=Math.max(vs[0][0],vs[2][0]),vs.ymin=Math.min(vs[0][1],vs[2][1]),vs.ymax=Math.max(vs[0][1],vs[2][1])),vs}function Kp(vs){return function(jl,zl){for(var Ve,pn,ci=0;ci<vs.length;ci++){var _n=vs[ci],Tp=_n._id,Sp=Tp.charAt(0);if(zl.isRect){Ve||(Ve={});var Ip=zl[Sp+"min"],Jp=zl[Sp+"max"];Ip!==void 0&&Jp!==void 0&&(Ve[Tp]=[Ye(_n,Ip),Ye(_n,Jp)].sort(ve))}else pn||(pn={}),pn[Tp]=zl.map(et(_n))}Ve&&(jl.range=Ve),pn&&(jl.lassoPoints=pn)}}function B0(vs){var jl=vs.plotinfo;return jl.fillRangeItems||Kp(vs.xaxes.concat(vs.yaxes))}function em(vs,jl){vs.emit("plotly_selecting",jl)}function k0(vs,jl){jl&&(jl.selections=(vs.layout||{}).selections||[]),vs.emit("plotly_selected",jl)}function J0(vs){vs.emit("plotly_deselect",null)}me.exports={reselect:dr,prepSelect:mn,clearOutline:q,clearSelectionsCache:Q,selectOnClick:ta}}}),Ky=a({"src/components/annotations/arrow_paths.js"(pe,me){me.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]}}),zg=a({"src/constants/axis_placeable_objects.js"(pe,me){me.exports={axisRefDescription:function(M,v,g){return["If set to a",M,"axis id (e.g. *"+M+"* or","*"+M+"2*), the `"+M+"` position refers to a",M,"coordinate. If set to *paper*, the `"+M+"`","position refers to the distance from the",v,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",v,"("+g+"). If set to a",M,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",v,"of the domain of that axis: e.g.,","*"+M+"2 domain* refers to the domain of the second",M," axis and a",M,"position of 0.5 refers to the","point between the",v,"and the",g,"of the domain of the","second",M,"axis."].join(" ")}}}}),x_=a({"src/components/annotations/attributes.js"(pe,me){var M=Ky(),v=B(),g=wv(),E=Vm().templatedArray;zg(),me.exports=E("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:v({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:M.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:M.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",g.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",g.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",g.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",g.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:v({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc"})}}),M2=a({"src/traces/scatter/constants.js"(pe,me){me.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}}}),Pg=a({"src/traces/scatter/fillcolor_attribute.js"(pe,me){me.exports=function(v){return{valType:"color",editType:"style",anim:!0}}}}),Jy=a({"src/traces/scatter/attributes.js"(pe,me){var M=Kv().axisHoverFormat,v=kl().texttemplateAttrs,g=kl().hovertemplateAttrs,E=j1(),S=B(),T=Bp().dash,C=Bp().pattern,P=t1(),p=M2(),Y=k().extendFlat,N=Pg();function j(V){return{valType:"any",dflt:0,editType:"calc"}}function ee(V){return{valType:"any",editType:"calc"}}function G(V){return{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"}}me.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:j(),yperiod:j(),xperiod0:ee(),yperiod0:ee(),xperiodalignment:G(),yperiodalignment:G(),xhoverformat:M("x"),yhoverformat:M("y"),offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:v({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:g({},{keys:p.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:Y({},T,{editType:"style"}),backoff:{valType:"number",min:0,dflt:"auto",arrayOk:!0,editType:"plot"},simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:N(!0),fillgradient:Y({type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],dflt:"none",editType:"calc"},start:{valType:"number",editType:"calc"},stop:{valType:"number",editType:"calc"},colorscale:{valType:"colorscale",editType:"style"},editType:"calc"}),fillpattern:C,marker:Y({symbol:{valType:"enumerated",values:P.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},angle:{valType:"angle",dflt:0,arrayOk:!0,editType:"plot",anim:!1},angleref:{valType:"enumerated",values:["previous","up"],dflt:"up",editType:"plot",anim:!1},standoff:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"plot",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:Y({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},E("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},E("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:S({editType:"calc",colorEditType:"style",arrayOk:!0}),zorder:{valType:"integer",dflt:0,editType:"plot"}}}}),hx=a({"src/components/selections/attributes.js"(pe,me){var M=x_(),v=Jy().line,g=Bp().dash,E=k().extendFlat,S=Xl().overrideAll,T=Vm().templatedArray;zg(),me.exports=S(T("selection",{type:{valType:"enumerated",values:["rect","path"]},xref:E({},M.xref,{}),yref:E({},M.yref,{}),x0:{valType:"any"},x1:{valType:"any"},y0:{valType:"any"},y1:{valType:"any"},path:{valType:"string",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:.7,editType:"arraydraw"},line:{color:v.color,width:E({},v.width,{min:1,dflt:1}),dash:E({},g,{dflt:"dot"})}}),"arraydraw","from-root")}}),e3=a({"src/components/selections/defaults.js"(pe,me){var M=o0(),v=g1(),g=U1(),E=hx(),S=fy();me.exports=function(P,p){g(P,p,{name:"selections",handleItemDefaults:T});for(var Y=p.selections,N=0;N<Y.length;N++){var j=Y[N];j&&j.path===void 0&&(j.x0===void 0||j.x1===void 0||j.y0===void 0||j.y1===void 0)&&(p.selections[N]=null)}};function T(C,P,p){function Y(be,Te){return M.coerce(C,P,E,be,Te)}var N=Y("path"),j=N?"path":"rect",ee=Y("type",j),G=ee!=="path";G&&delete P.path,Y("opacity"),Y("line.color"),Y("line.width"),Y("line.dash");for(var V=["x","y"],W=0;W<2;W++){var q=V[W],z={_fullLayout:p},H,Z,ne,te=v.coerceRef(C,P,z,q);if(H=v.getFromId(z,te),H._selectionIndices.push(P._index),ne=S.rangeToShapePosition(H),Z=S.shapePositionToRange(H),G){var Se=q+"0",fe=q+"1",ve=C[Se],xe=C[fe];C[Se]=Z(C[Se],!0),C[fe]=Z(C[fe],!0),v.coercePosition(P,z,Y,te,Se),v.coercePosition(P,z,Y,te,fe);var re=P[Se],de=P[fe];re!==void 0&&de!==void 0&&(P[Se]=ne(re),P[fe]=ne(de),C[Se]=ve,C[fe]=xe)}}G&&M.noneOrAll(C,P,["x0","x1","y0","y1"])}}}),lb=a({"src/components/selections/draw_newselection/defaults.js"(pe,me){me.exports=function(v,g,E){E("newselection.mode");var S=E("newselection.line.width");S&&(E("newselection.line.color"),E("newselection.line.dash")),E("activeselection.fillcolor"),E("activeselection.opacity")}}}),Qy=a({"src/plots/cartesian/include_components.js"(pe,me){var M=jp(),v=o0(),g=Ov();me.exports=function(S){return function(C,P){var p=C[S];if(Array.isArray(p))for(var Y=M.subplotsRegistry.cartesian,N=Y.idRegex,j=P._subplots,ee=j.xaxis,G=j.yaxis,V=j.cartesian,W=P._has("cartesian"),q=0;q<p.length;q++){var z=p[q];if(v.isPlainObject(z)){var H=g.cleanId(z.xref,"x",!1),Z=g.cleanId(z.yref,"y",!1),ne=N.x.test(H),te=N.y.test(Z);if(ne||te){W||v.pushUnique(P._basePlotModules,Y);var Se=!1;ne&&ee.indexOf(H)===-1&&(ee.push(H),Se=!0),te&&G.indexOf(Z)===-1&&(G.push(Z),Se=!0),Se&&ne&&te&&V.push(H+Z)}}}}}}}),ng=a({"src/components/selections/index.js"(pe,me){var M=w2(),v=ob();me.exports={moduleType:"component",name:"selections",layoutAttributes:hx(),supplyLayoutDefaults:e3(),supplyDrawNewSelectionDefaults:lb(),includeBasePlot:Qy()("selections"),draw:M.draw,drawOne:M.drawOne,reselect:v.reselect,prepSelect:v.prepSelect,clearOutline:v.clearOutline,clearSelectionsCache:v.clearSelectionsCache,selectOnClick:v.selectOnClick}}}),b_=a({"src/plots/cartesian/dragbox.js"(pe,me){var M=f(),v=o0(),g=v.numberFormat,E=b(),S=V_(),T=jp(),C=v.strTranslate,P=v1(),p=Oe(),Y=t1(),N=uy(),j=g1(),ee=$1(),G=Gg(),V=Y_(),W=V.selectingOrDrawing,q=V.freeMode,z=f1().FROM_TL,H=ix(),Z=$_().redrawReglTraces,ne=p1(),te=Ov().getFromId,Se=ng().prepSelect,fe=ng().clearOutline,ve=ng().selectOnClick,xe=Dy(),re=wv(),de=re.MINDRAG,be=re.MINZOOM,Te=!0;function ye(Le,tt,bt,Ct,yi,Fl,Yl,qp){var Fp=Le._fullLayout._zoomlayer,Up=Yl+qp==="nsew",_r=(Yl+qp).length===1,gs,dr,Lo,Cp,Hp,e0,t0,n0,y0,h0,I0,Kp,B0,em,k0,J0,vs,jl,zl,Ve,pn,ci,_n;bt+=tt.yaxis._shift;function Tp(){if(gs=tt.xaxis,dr=tt.yaxis,y0=gs._length,h0=dr._length,t0=gs._offset,n0=dr._offset,Lo={},Lo[gs._id]=gs,Cp={},Cp[dr._id]=dr,Yl&&qp)for(var yp=tt.overlays,bp=0;bp<yp.length;bp++){var Pp=yp[bp].xaxis;Lo[Pp._id]=Pp;var s0=yp[bp].yaxis;Cp[s0._id]=s0}Hp=Me(Lo),e0=Me(Cp),B0=he(Hp,qp),em=he(e0,Yl),k0=!em&&!B0,Kp=Q(Le,Le._fullLayout._axisMatchGroups,Lo,Cp),I0=Q(Le,Le._fullLayout._axisConstraintGroups,Lo,Cp,Kp);var Rp=I0.isSubplotConstrained||Kp.isSubplotConstrained;J0=qp||Rp,vs=Yl||Rp;var Vp=Le._fullLayout;jl=Vp._has("scattergl"),zl=Vp._has("splom"),Ve=Vp._has("svg")}Tp();var Sp=ft(em+B0,Le._fullLayout.dragmode,Up),Ip=Ue(tt,Yl+qp+"drag",Sp,bt,Ct,yi,Fl);if(k0&&!Up)return Ip.onmousedown=null,Ip.style.pointerEvents="none",Ip;var Jp={element:Ip,gd:Le,plotinfo:tt};Jp.prepFn=function(yp,bp,Pp){var s0=Jp.dragmode,Rp=Le._fullLayout.dragmode;Rp!==s0&&(Jp.dragmode=Rp),Tp(),ci=Le._fullLayout._invScaleX,_n=Le._fullLayout._invScaleY,k0||(Up?yp.shiftKey?Rp==="pan"?Rp="zoom":W(Rp)||(Rp="pan"):yp.ctrlKey&&(Rp="pan"):Rp="pan"),q(Rp)?Jp.minDrag=1:Jp.minDrag=void 0,W(Rp)?(Jp.xaxes=Hp,Jp.yaxes=e0,Se(yp,bp,Pp,Jp,Rp)):(Jp.clickFn=Dp,W(s0)&&m0(),k0||(Rp==="zoom"?(Jp.moveFn=Lm,Jp.doneFn=Em,Jp.minDrag=1,Om(yp,bp,Pp)):Rp==="pan"&&(Jp.moveFn=Ym,Jp.doneFn=uv))),Le._fullLayout._redrag=function(){var Vp=Le._dragdata;if(Vp&&Vp.element===Ip){var r0=Le._fullLayout.dragmode;W(r0)||(Tp(),dt([0,0,y0,h0]),Jp.moveFn(Vp.dx,Vp.dy))}}};function m0(){Jp.plotinfo.selection=!1,fe(Le)}function Dp(yp,bp){var Pp=Jp.gd;if(Pp._fullLayout._activeShapeIndex>=0){Pp._fullLayout._deactivateShape(Pp);return}var s0=Pp._fullLayout.clickmode;if(ke(Pp),yp===2&&!_r&&Hm(),Up)s0.indexOf("select")>-1&&ve(bp,Pp,Hp,e0,tt.id,Jp),s0.indexOf("event")>-1&&N.click(Pp,bp,tt.id);else if(yp===1&&_r){var Rp=Yl?dr:gs,Vp=Yl==="s"||qp==="w"?0:1,r0=Rp._name+".range["+Vp+"]",$p=Be(Rp,Vp),P0="left",j0="middle";if(Rp.fixedrange)return;Yl?(j0=Yl==="n"?"top":"bottom",Rp.side==="right"&&(P0="right")):qp==="e"&&(P0="right"),Pp._context.showAxisRangeEntryBoxes&&M.select(Ip).call(P.makeEditable,{gd:Pp,immediate:!0,background:Pp._fullLayout.paper_bgcolor,text:String($p),fill:Rp.tickfont?Rp.tickfont.color:"#444",horizontalAlign:P0,verticalAlign:j0}).on("edit",function(tm){var wm=Rp.d2r(tm);wm!==void 0&&T.call("_guiRelayout",Pp,r0,wm)})}}G.init(Jp);var c0,b0,E0,gm,Nm,Bm,xm,Am,mm,vm;function Om(yp,bp,Pp){var s0=Ip.getBoundingClientRect();c0=bp-s0.left,b0=Pp-s0.top,Le._fullLayout._calcInverseTransform(Le);var Rp=v.apply3DTransform(Le._fullLayout._invTransform)(c0,b0);c0=Rp[0],b0=Rp[1],E0={l:c0,r:c0,w:0,t:b0,b:b0,h:0},gm=Le._hmpixcount?Le._hmlumcount/Le._hmpixcount:E(Le._fullLayout.plot_bgcolor).getLuminance(),Nm="M0,0H"+y0+"V"+h0+"H0V0",Bm=!1,xm="xy",vm=!1,Am=mn(Fp,gm,t0,n0,Nm),mm=ta(Fp,t0,n0)}function Lm(yp,bp){if(Le._transitioningWithDuration)return!1;var Pp=Math.max(0,Math.min(y0,ci*yp+c0)),s0=Math.max(0,Math.min(h0,_n*bp+b0)),Rp=Math.abs(Pp-c0),Vp=Math.abs(s0-b0);E0.l=Math.min(c0,Pp),E0.r=Math.max(c0,Pp),E0.t=Math.min(b0,s0),E0.b=Math.max(b0,s0);function r0(){xm="",E0.r=E0.l,E0.t=E0.b,mm.attr("d","M0,0Z")}if(I0.isSubplotConstrained)Rp>be||Vp>be?(xm="xy",Rp/y0>Vp/h0?(Vp=Rp*h0/y0,b0>s0?E0.t=b0-Vp:E0.b=b0+Vp):(Rp=Vp*y0/h0,c0>Pp?E0.l=c0-Rp:E0.r=c0+Rp),mm.attr("d",Re(E0))):r0();else if(Kp.isSubplotConstrained)if(Rp>be||Vp>be){xm="xy";var $p=Math.min(E0.l/y0,(h0-E0.b)/h0),P0=Math.max(E0.r/y0,(h0-E0.t)/h0);E0.l=$p*y0,E0.r=P0*y0,E0.b=(1-$p)*h0,E0.t=(1-P0)*h0,mm.attr("d",Re(E0))}else r0();else!em||Vp<Math.min(Math.max(Rp*.6,de),be)?Rp<de||!B0?r0():(E0.t=0,E0.b=h0,xm="x",mm.attr("d",Ce(E0,b0))):!B0||Rp<Math.min(Vp*.6,be)?(E0.l=0,E0.r=y0,xm="y",mm.attr("d",Je(E0,c0))):(xm="xy",mm.attr("d",Re(E0)));E0.w=E0.r-E0.l,E0.h=E0.b-E0.t,xm&&(vm=!0),Le._dragged=vm,Do(Am,mm,E0,Nm,Bm,gm),Um(),Le.emit("plotly_relayouting",pn),Bm=!0}function Um(){pn={},(xm==="xy"||xm==="x")&&(Ye(Hp,E0.l/y0,E0.r/y0,pn,I0.xaxes),Km("x",pn)),(xm==="xy"||xm==="y")&&(Ye(e0,(h0-E0.b)/h0,(h0-E0.t)/h0,pn,I0.yaxes),Km("y",pn))}function Em(){Um(),ke(Le),uv(),ge(Le)}var lm=[0,0,y0,h0],Dm=null,Zm=re.REDRAWDELAY,rv=tt.mainplot?Le._fullLayout._plots[tt.mainplot]:tt;function zm(yp){if(!Le._context._scrollZoom.cartesian&&!Le._fullLayout._enablescrollzoom)return;if(m0(),Le._transitioningWithDuration){yp.preventDefault(),yp.stopPropagation();return}Tp(),clearTimeout(Dm);var bp=-yp.deltaY;if(isFinite(bp)||(bp=yp.wheelDelta/10),!isFinite(bp)){v.log("Did not find wheel motion attributes: ",yp);return}var Pp=Math.exp(-Math.min(Math.max(bp,-20),20)/200),s0=rv.draglayer.select(".nsewdrag").node().getBoundingClientRect(),Rp=(yp.clientX-s0.left)/s0.width,Vp=(s0.bottom-yp.clientY)/s0.height,r0;function $p(P0,j0,tm){if(P0.fixedrange)return;var wm=v.simpleMap(P0.range,P0.r2l),bm=wm[0]+(wm[1]-wm[0])*j0;function Tm(Rm){return P0.l2r(bm+(Rm-bm)*tm)}P0.range=wm.map(Tm)}if(J0){for(qp||(Rp=.5),r0=0;r0<Hp.length;r0++)$p(Hp[r0],Rp,Pp);Km("x"),lm[2]*=Pp,lm[0]+=lm[2]*Rp*(1/Pp-1)}if(vs){for(Yl||(Vp=.5),r0=0;r0<e0.length;r0++)$p(e0[r0],Vp,Pp);Km("y"),lm[3]*=Pp,lm[1]+=lm[3]*(1-Vp)*(1/Pp-1)}dt(lm),_v(),Le.emit("plotly_relayouting",pn),Dm=setTimeout(function(){Le._fullLayout&&(lm=[0,0,y0,h0],uv())},Zm),yp.preventDefault()}Yl.length*qp.length!==1&&ce(Ip,zm);function Ym(yp,bp){if(yp=yp*ci,bp=bp*_n,Le._transitioningWithDuration)return;if(Le._fullLayout._replotting=!0,B0==="ew"||em==="ns"){var Pp=B0?-yp:0,s0=em?-bp:0;if(Kp.isSubplotConstrained){if(B0&&em){var Rp=(yp/y0-bp/h0)/2;yp=Rp*y0,bp=-Rp*h0,Pp=-yp,s0=-bp}em?Pp=-s0*y0/h0:s0=-Pp*h0/y0}B0&&(et(Hp,yp),Km("x")),em&&(et(e0,bp),Km("y")),dt([Pp,s0,y0,h0]),_v(),Le.emit("plotly_relayouting",pn);return}function Vp(Tm,Rm,Sm){for(var Gm=1-Rm,Xm,pv,Ev=0;Ev<Tm.length;Ev++){var kv=Tm[Ev];if(!kv.fixedrange){Xm=kv,pv=kv._rl[Gm]+(kv._rl[Rm]-kv._rl[Gm])/Qe(Sm/kv._length);var tv=kv.l2r(pv);tv!==!1&&tv!==void 0&&(kv.range[Rm]=tv)}}return Xm._length*(Xm._rl[Rm]-pv)/(Xm._rl[Rm]-Xm._rl[Gm])}var r0=B0==="w"==(em==="n")?1:-1;if(B0&&em&&(I0.isSubplotConstrained||Kp.isSubplotConstrained)){var $p=(yp/y0+r0*bp/h0)/2;yp=$p*y0,bp=r0*$p*h0}var P0,j0;if(B0==="w"?yp=Vp(Hp,0,yp):B0==="e"?yp=Vp(Hp,1,-yp):B0||(yp=0),em==="n"?bp=Vp(e0,1,bp):em==="s"?bp=Vp(e0,0,-bp):em||(bp=0),P0=B0==="w"?yp:0,j0=em==="n"?bp:0,I0.isSubplotConstrained&&!Kp.isSubplotConstrained||Kp.isSubplotConstrained&&B0&&em&&r0>0){var tm;if(Kp.isSubplotConstrained||!B0&&em.length===1){for(tm=0;tm<Hp.length;tm++)Hp[tm].range=Hp[tm]._r.slice(),xe(Hp[tm],1-bp/h0);yp=bp*y0/h0,P0=yp/2}if(Kp.isSubplotConstrained||!em&&B0.length===1){for(tm=0;tm<e0.length;tm++)e0[tm].range=e0[tm]._r.slice(),xe(e0[tm],1-yp/y0);bp=yp*h0/y0,j0=bp/2}}(!Kp.isSubplotConstrained||!em)&&Km("x"),(!Kp.isSubplotConstrained||!B0)&&Km("y");var wm=y0-yp,bm=h0-bp;Kp.isSubplotConstrained&&!(B0&&em)&&(B0?(j0=P0?0:yp*h0/y0,bm=wm*h0/y0):(P0=j0?0:bp*y0/h0,wm=bm*y0/h0)),dt([P0,j0,wm,bm]),_v(),Le.emit("plotly_relayouting",pn)}function Km(yp,bp){for(var Pp=Kp.isSubplotConstrained?{x:e0,y:Hp}[yp]:Kp[yp+"axes"],s0=Kp.isSubplotConstrained?{x:Hp,y:e0}[yp]:[],Rp=0;Rp<Pp.length;Rp++){var Vp=Pp[Rp],r0=Vp._id,$p=Kp.xLinks[r0]||Kp.yLinks[r0],P0=s0[0]||Lo[$p]||Cp[$p];P0&&(bp?(bp[Vp._name+".range[0]"]=bp[P0._name+".range[0]"],bp[Vp._name+".range[1]"]=bp[P0._name+".range[1]"]):Vp.range=P0.range.slice())}}function _v(){var yp=[],bp;function Pp(r0){for(bp=0;bp<r0.length;bp++)r0[bp].fixedrange||yp.push(r0[bp]._id)}function s0(r0,$p){for(bp=0;bp<r0.length;bp++){var P0=r0[bp],j0=P0[$p];!P0.fixedrange&&j0.tickmode==="sync"&&yp.push(j0._id)}}for(J0&&(Pp(Hp),Pp(I0.xaxes),Pp(Kp.xaxes),s0(tt.overlays,"xaxis")),vs&&(Pp(e0),Pp(I0.yaxes),Pp(Kp.yaxes),s0(tt.overlays,"yaxis")),pn={},bp=0;bp<yp.length;bp++){var Rp=yp[bp],Vp=te(Le,Rp);j.drawOne(Le,Vp,{skipTitle:!0}),pn[Vp._name+".range[0]"]=Vp.range[0],pn[Vp._name+".range[1]"]=Vp.range[1]}j.redrawComponents(Le,yp)}function Hm(){if(!Le._transitioningWithDuration){var yp=Le._context.doubleClick,bp=[];B0&&(bp=bp.concat(Hp)),em&&(bp=bp.concat(e0)),Kp.xaxes&&(bp=bp.concat(Kp.xaxes)),Kp.yaxes&&(bp=bp.concat(Kp.yaxes));var Pp={},s0,Rp;if(yp==="reset+autosize")for(yp="autosize",Rp=0;Rp<bp.length;Rp++){s0=bp[Rp];var Vp=s0._rangeInitial0,r0=s0._rangeInitial1,$p=Vp!==void 0||r0!==void 0;if($p&&(Vp!==void 0&&Vp!==s0.range[0]||r0!==void 0&&r0!==s0.range[1])||!$p&&s0.autorange!==!0){yp="reset";break}}if(yp==="autosize")for(Rp=0;Rp<bp.length;Rp++)s0=bp[Rp],s0.fixedrange||(Pp[s0._name+".autorange"]=!0);else if(yp==="reset"){for((B0||I0.isSubplotConstrained)&&(bp=bp.concat(I0.xaxes)),em&&!I0.isSubplotConstrained&&(bp=bp.concat(I0.yaxes)),I0.isSubplotConstrained&&(B0?em||(bp=bp.concat(e0)):bp=bp.concat(Hp)),Rp=0;Rp<bp.length;Rp++)if(s0=bp[Rp],!s0.fixedrange){var P0=s0._name,j0=s0._autorangeInitial;s0._rangeInitial0===void 0&&s0._rangeInitial1===void 0?Pp[P0+".autorange"]=!0:s0._rangeInitial0===void 0?(Pp[P0+".autorange"]=j0,Pp[P0+".range"]=[null,s0._rangeInitial1]):s0._rangeInitial1===void 0?(Pp[P0+".range"]=[s0._rangeInitial0,null],Pp[P0+".autorange"]=j0):Pp[P0+".range"]=[s0._rangeInitial0,s0._rangeInitial1]}}Le.emit("plotly_doubleclick",null),T.call("_guiRelayout",Le,Pp)}}function uv(){dt([0,0,y0,h0]),v.syncOrAsync([ne.previousPromises,function(){Le._fullLayout._replotting=!1,T.call("_guiRelayout",Le,pn)}],Le)}function dt(yp){var bp=Le._fullLayout,Pp=bp._plots,s0=bp._subplots.cartesian,Rp,Vp,r0,$p;if(zl&&T.subplotsRegistry.splom.drag(Le),jl){for(Rp=0;Rp<s0.length;Rp++)if(Vp=Pp[s0[Rp]],r0=Vp.xaxis,$p=Vp.yaxis,Vp._scene){r0.limitRange&&r0.limitRange(),$p.limitRange&&$p.limitRange();var P0=v.simpleMap(r0.range,r0.r2l),j0=v.simpleMap($p.range,$p.r2l);Vp._scene.update({range:[P0[0],j0[0],P0[1],j0[1]]})}}if((zl||jl)&&(H(Le),Z(Le)),Ve){var tm=yp[2]/gs._length,wm=yp[3]/dr._length;for(Rp=0;Rp<s0.length;Rp++){Vp=Pp[s0[Rp]],r0=Vp.xaxis,$p=Vp.yaxis;var bm=(J0||Kp.isSubplotConstrained)&&!r0.fixedrange&&Lo[r0._id],Tm=(vs||Kp.isSubplotConstrained)&&!$p.fixedrange&&Cp[$p._id],Rm,Sm,Gm,Xm;if(bm?(Rm=tm,Gm=qp||Kp.isSubplotConstrained?yp[0]:kp(r0,Rm)):Kp.xaHash[r0._id]?(Rm=tm,Gm=yp[0]*r0._length/gs._length):Kp.yaHash[r0._id]?(Rm=wm,Gm=em==="ns"?-yp[1]*r0._length/dr._length:kp(r0,Rm,{n:"top",s:"bottom"}[em])):(Rm=Fe(r0,tm,wm),Gm=Gp(r0,Rm)),Rm>1&&(r0.maxallowed!==void 0&&J0===(r0.range[0]<r0.range[1]?"e":"w")||r0.minallowed!==void 0&&J0===(r0.range[0]<r0.range[1]?"w":"e"))&&(Rm=1,Gm=0),Tm?(Sm=wm,Xm=Yl||Kp.isSubplotConstrained?yp[1]:kp($p,Sm)):Kp.yaHash[$p._id]?(Sm=wm,Xm=yp[1]*$p._length/dr._length):Kp.xaHash[$p._id]?(Sm=tm,Xm=B0==="ew"?-yp[0]*$p._length/gs._length:kp($p,Sm,{e:"right",w:"left"}[B0])):(Sm=Fe($p,tm,wm),Xm=Gp($p,Sm)),Sm>1&&($p.maxallowed!==void 0&&vs===($p.range[0]<$p.range[1]?"n":"s")||$p.minallowed!==void 0&&vs===($p.range[0]<$p.range[1]?"s":"n"))&&(Sm=1,Xm=0),!(!Rm&&!Sm)){Rm||(Rm=1),Sm||(Sm=1);var pv=r0._offset-Gm/Rm,Ev=$p._offset-Xm/Sm;Vp.clipRect.call(Y.setTranslate,Gm,Xm).call(Y.setScale,Rm,Sm),Vp.plot.call(Y.setTranslate,pv,Ev).call(Y.setScale,1/Rm,1/Sm),(Rm!==Vp.xScaleFactor||Sm!==Vp.yScaleFactor)&&(Y.setPointGroupScale(Vp.zoomScalePts,Rm,Sm),Y.setTextPointsScale(Vp.zoomScaleTxt,Rm,Sm)),Y.hideOutsideRangePoints(Vp.clipOnAxisFalseTraces,Vp),Vp.xScaleFactor=Rm,Vp.yScaleFactor=Sm}}}}function Fe(yp,bp,Pp){return yp.fixedrange?0:J0&&I0.xaHash[yp._id]?bp:vs&&(I0.isSubplotConstrained?I0.xaHash:I0.yaHash)[yp._id]?Pp:0}function Gp(yp,bp){return bp?(yp.range=yp._r.slice(),xe(yp,bp),kp(yp,bp)):0}function kp(yp,bp,Pp){return yp._length*(1-bp)*z[Pp||yp.constraintoward||"middle"]}return Ip}function De(Le,tt,bt,Ct){var yi=v.ensureSingle(Le.draglayer,tt,bt,function(Fl){Fl.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",Le.id)});return yi.call(ee,Ct),yi.node()}function Ue(Le,tt,bt,Ct,yi,Fl,Yl){var qp=De(Le,"rect",tt,bt);return M.select(qp).call(Y.setRect,Ct,yi,Fl,Yl),qp}function he(Le,tt){for(var bt=0;bt<Le.length;bt++)if(!Le[bt].fixedrange)return tt;return""}function Be(Le,tt){var bt=Le.range[tt],Ct=Math.abs(bt-Le.range[1-tt]),yi;return Le.type==="date"?bt:Le.type==="log"?(yi=Math.ceil(Math.max(0,-Math.log(Ct)/Math.LN10))+3,g("."+yi+"g")(Math.pow(10,bt))):(yi=Math.floor(Math.log(Math.abs(bt))/Math.LN10)-Math.floor(Math.log(Ct)/Math.LN10)+4,g("."+String(yi)+"g")(bt))}function Ye(Le,tt,bt,Ct,yi){for(var Fl=0;Fl<Le.length;Fl++){var Yl=Le[Fl];if(!Yl.fixedrange)if(Yl.rangebreaks){var qp=Yl._id.charAt(0)==="y",Fp=qp?1-tt:tt,Up=qp?1-bt:bt;Ct[Yl._name+".range[0]"]=Yl.l2r(Yl.p2l(Fp*Yl._length)),Ct[Yl._name+".range[1]"]=Yl.l2r(Yl.p2l(Up*Yl._length))}else{var _r=Yl._rl[0],gs=Yl._rl[1]-_r;Ct[Yl._name+".range[0]"]=Yl.l2r(_r+gs*tt),Ct[Yl._name+".range[1]"]=Yl.l2r(_r+gs*bt)}}if(yi&&yi.length){var dr=(tt+(1-bt))/2;Ye(yi,dr,1-dr,Ct,[])}}function et(Le,tt){for(var bt=0;bt<Le.length;bt++){var Ct=Le[bt];if(!Ct.fixedrange){if(Ct.rangebreaks){var yi=0,Fl=Ct._length,Yl=Ct.p2l(yi+tt)-Ct.p2l(yi),qp=Ct.p2l(Fl+tt)-Ct.p2l(Fl),Fp=(Yl+qp)/2;Ct.range=[Ct.l2r(Ct._rl[0]-Fp),Ct.l2r(Ct._rl[1]-Fp)]}else Ct.range=[Ct.l2r(Ct._rl[0]-tt/Ct._m),Ct.l2r(Ct._rl[1]-tt/Ct._m)];Ct.limitRange&&Ct.limitRange()}}}function Qe(Le){return 1-(Le>=0?Math.min(Le,.9):1/(1/Math.max(Le,-.3)+3.222))}function ft(Le,tt,bt){return Le?Le==="nsew"?bt?"":tt==="pan"?"move":"crosshair":Le.toLowerCase()+"-resize":"pointer"}function mn(Le,tt,bt,Ct,yi){return Le.append("path").attr("class","zoombox").style({fill:tt>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",C(bt,Ct)).attr("d",yi+"Z")}function ta(Le,tt,bt){return Le.append("path").attr("class","zoombox-corners").style({fill:p.background,stroke:p.defaultLine,"stroke-width":1,opacity:0}).attr("transform",C(tt,bt)).attr("d","M0,0Z")}function Do(Le,tt,bt,Ct,yi,Fl){Le.attr("d",Ct+"M"+bt.l+","+bt.t+"v"+bt.h+"h"+bt.w+"v-"+bt.h+"h-"+bt.w+"Z"),Ae(Le,tt,yi,Fl)}function Ae(Le,tt,bt,Ct){bt||(Le.transition().style("fill",Ct>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),tt.transition().style("opacity",1).duration(200))}function ke(Le){M.select(Le).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function ge(Le){Te&&Le.data&&Le._context.showTips&&(v.notifier(v._(Le,"Double-click to zoom back out"),"long"),Te=!1)}function Ce(Le,tt){return"M"+(Le.l-.5)+","+(tt-be-.5)+"h-3v"+(2*be+1)+"h3ZM"+(Le.r+.5)+","+(tt-be-.5)+"h3v"+(2*be+1)+"h-3Z"}function Je(Le,tt){return"M"+(tt-be-.5)+","+(Le.t-.5)+"v-3h"+(2*be+1)+"v3ZM"+(tt-be-.5)+","+(Le.b+.5)+"v3h"+(2*be+1)+"v-3Z"}function Re(Le){var tt=Math.floor(Math.min(Le.b-Le.t,Le.r-Le.l,be)/2);return"M"+(Le.l-3.5)+","+(Le.t-.5+tt)+"h3v"+-tt+"h"+tt+"v-3h-"+(tt+3)+"ZM"+(Le.r+3.5)+","+(Le.t-.5+tt)+"h-3v"+-tt+"h"+-tt+"v-3h"+(tt+3)+"ZM"+(Le.r+3.5)+","+(Le.b+.5-tt)+"h-3v"+tt+"h"+-tt+"v3h"+(tt+3)+"ZM"+(Le.l-3.5)+","+(Le.b+.5-tt)+"h3v"+tt+"h"+tt+"v3h-"+(tt+3)+"Z"}function Q(Le,tt,bt,Ct,yi){for(var Fl=!1,Yl={},qp={},Fp,Up,_r,gs,dr=(yi||{}).xaHash,Lo=(yi||{}).yaHash,Cp=0;Cp<tt.length;Cp++){var Hp=tt[Cp];for(Fp in bt)if(Hp[Fp]){for(_r in Hp)!(yi&&(dr[_r]||Lo[_r]))&&!(_r.charAt(0)==="x"?bt:Ct)[_r]&&(Yl[_r]=Fp);for(Up in Ct)!(yi&&(dr[Up]||Lo[Up]))&&Hp[Up]&&(Fl=!0)}for(Up in Ct)if(Hp[Up])for(gs in Hp)!(yi&&(dr[gs]||Lo[gs]))&&!(gs.charAt(0)==="x"?bt:Ct)[gs]&&(qp[gs]=Up)}Fl&&(v.extendFlat(Yl,qp),qp={});var e0={},t0=[];for(_r in Yl){var n0=te(Le,_r);t0.push(n0),e0[n0._id]=n0}var y0={},h0=[];for(gs in qp){var I0=te(Le,gs);h0.push(I0),y0[I0._id]=I0}return{xaHash:e0,yaHash:y0,xaxes:t0,yaxes:h0,xLinks:Yl,yLinks:qp,isSubplotConstrained:Fl}}function ce(Le,tt){if(!S)Le.onwheel!==void 0?Le.onwheel=tt:Le.onmousewheel!==void 0?Le.onmousewheel=tt:Le.isAddedWheelEvent||(Le.isAddedWheelEvent=!0,Le.addEventListener("wheel",tt,{passive:!1}));else{var bt=Le.onwheel!==void 0?"wheel":"mousewheel";Le._onwheel&&Le.removeEventListener(bt,Le._onwheel),Le._onwheel=tt,Le.addEventListener(bt,tt,{passive:!1})}}function Me(Le){var tt=[];for(var bt in Le)tt.push(Le[bt]);return tt}me.exports={makeDragBox:ye,makeDragger:De,makeRectDragger:Ue,makeZoombox:mn,makeCorners:ta,updateZoombox:Do,xyCorners:Re,transitionZoombox:Ae,removeZoombox:ke,showDoubleClickNotifier:ge,attachWheelEventHandler:ce}}}),S2=a({"src/plots/cartesian/graph_interact.js"(pe){var me=f(),M=uy(),v=Gg(),g=$1(),E=b_().makeDragBox,S=wv().DRAGGERSIZE;pe.initInteractions=function(C){var P=C._fullLayout;if(C._context.staticPlot){me.select(C).selectAll(".drag").remove();return}if(!(!P._has("cartesian")&&!P._has("splom"))){var p=Object.keys(P._plots||{}).sort(function(N,j){if((P._plots[N].mainplot&&!0)===(P._plots[j].mainplot&&!0)){var ee=N.split("y"),G=j.split("y");return ee[0]===G[0]?Number(ee[1]||1)-Number(G[1]||1):Number(ee[0]||1)-Number(G[0]||1)}return P._plots[N].mainplot?1:-1});p.forEach(function(N){var j=P._plots[N],ee=j.xaxis,G=j.yaxis;if(!j.mainplot){var V=E(C,j,ee._offset,G._offset,ee._length,G._length,"ns","ew");V.onmousemove=function(z){C._fullLayout._rehover=function(){C._fullLayout._hoversubplot===N&&C._fullLayout._plots[N]&&M.hover(C,z,N)},M.hover(C,z,N),C._fullLayout._lasthover=V,C._fullLayout._hoversubplot=N},V.onmouseout=function(z){C._dragging||(C._fullLayout._hoversubplot=null,v.unhover(C,z))},C._context.showAxisDragHandles&&(E(C,j,ee._offset-S,G._offset-S,S,S,"n","w"),E(C,j,ee._offset+ee._length,G._offset-S,S,S,"n","e"),E(C,j,ee._offset-S,G._offset+G._length,S,S,"s","w"),E(C,j,ee._offset+ee._length,G._offset+G._length,S,S,"s","e"))}if(C._context.showAxisDragHandles){if(N===ee._mainSubplot){var W=ee._mainLinePosition;ee.side==="top"&&(W-=S),E(C,j,ee._offset+ee._length*.1,W,ee._length*.8,S,"","ew"),E(C,j,ee._offset,W,ee._length*.1,S,"","w"),E(C,j,ee._offset+ee._length*.9,W,ee._length*.1,S,"","e")}if(N===G._mainSubplot){var q=G._mainLinePosition;G.side!=="right"&&(q-=S),E(C,j,q,G._offset+G._length*.1,S,G._length*.8,"ns",""),E(C,j,q,G._offset+G._length*.9,S,G._length*.1,"s",""),E(C,j,q,G._offset,S,G._length*.1,"n","")}}});var Y=P._hoverlayer.node();Y.onmousemove=function(N){N.target=C._fullLayout._lasthover,M.hover(C,N,P._hoversubplot)},Y.onclick=function(N){N.target=C._fullLayout._lasthover,M.click(C,N)},Y.onmousedown=function(N){C._fullLayout._lasthover.onmousedown(N)},pe.updateFx(C)}},pe.updateFx=function(T){var C=T._fullLayout,P=C.dragmode==="pan"?"move":"crosshair";g(C._draggers,P)}}}),dx=a({"src/plot_api/container_array_match.js"(pe,me){var M=jp();me.exports=function(g){for(var E=M.layoutArrayContainers,S=M.layoutArrayRegexes,T=g.split("[")[0],C,P,p=0;p<S.length;p++)if(P=g.match(S[p]),P&&P.index===0){C=P[0];break}if(C||(C=E[E.indexOf(T)]),!C)return!1;var Y=g.substr(C.length);return Y?(P=Y.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/),P?{array:C,index:Number(P[1]),property:P[3]||""}:!1):{array:C,index:"",property:""}}}}),px=a({"src/plot_api/manage_arrays.js"(pe){var me=I(),M=pr(),v=_e(),g=Cm().sorterAsc,E=jp();pe.containerArrayMatch=dx();var S=pe.isAddVal=function(P){return P==="add"||me(P)},T=pe.isRemoveVal=function(P){return P===null||P==="remove"};pe.applyContainerArrayChanges=function(P,p,Y,N,j){var ee=p.astr,G=E.getComponentMethod(ee,"supplyLayoutDefaults"),V=E.getComponentMethod(ee,"draw"),W=E.getComponentMethod(ee,"drawOne"),q=N.replot||N.recalc||G===M||V===M,z=P.layout,H=P._fullLayout;if(Y[""]){Object.keys(Y).length>1&&v.warn("Full array edits are incompatible with other edits",ee);var Z=Y[""][""];if(T(Z))p.set(null);else if(Array.isArray(Z))p.set(Z);else return v.warn("Unrecognized full array edit value",ee,Z),!0;return q?!1:(G(z,H),V(P),!0)}var ne=Object.keys(Y).map(Number).sort(g),te=p.get(),Se=te||[],fe=j(H,ee).get(),ve=[],xe=-1,re=Se.length,de,be,Te,ye,De,Ue,he,Be;for(de=0;de<ne.length;de++){if(Te=ne[de],ye=Y[Te],De=Object.keys(ye),Ue=ye[""],he=S(Ue),Te<0||Te>Se.length-(he?0:1)){v.warn("index out of range",ee,Te);continue}if(Ue!==void 0)De.length>1&&v.warn("Insertion & removal are incompatible with edits to the same index.",ee,Te),T(Ue)?ve.push(Te):he?(Ue==="add"&&(Ue={}),Se.splice(Te,0,Ue),fe&&fe.splice(Te,0,{})):v.warn("Unrecognized full object edit value",ee,Te,Ue),xe===-1&&(xe=Te);else for(be=0;be<De.length;be++)Be=ee+"["+Te+"].",j(Se[Te],De[be],Be).set(ye[De[be]])}for(de=ve.length-1;de>=0;de--)Se.splice(ve[de],1),fe&&fe.splice(ve[de],1);if(Se.length?te||p.set(Se):p.set(null),q)return!1;if(G(z,H),W!==M){var Ye;if(xe===-1)Ye=ne;else{for(re=Math.max(Se.length,re),Ye=[],de=0;de<ne.length&&(Te=ne[de],!(Te>=xe));de++)Ye.push(Te);for(de=xe;de<re;de++)Ye.push(de)}for(de=0;de<Ye.length;de++)W(P,Ye[de])}else V(P);return!0}}}),mx=a({"src/plot_api/helpers.js"(pe){var me=w();X0();var M=jp(),v=o0(),g=p1(),E=Ov(),S=Oe(),T=E.cleanId,C=E.getFromTrace,P=M.traceIs;pe.clearPromiseQueue=function(q){Array.isArray(q._promises)&&q._promises.length>0&&v.log("Clearing previous rejected promises from queue."),q._promises=[]},pe.cleanLayout=function(q){var z;q||(q={}),q.xaxis1&&(q.xaxis||(q.xaxis=q.xaxis1),delete q.xaxis1),q.yaxis1&&(q.yaxis||(q.yaxis=q.yaxis1),delete q.yaxis1),q.scene1&&(q.scene||(q.scene=q.scene1),delete q.scene1);var H=(g.subplotsRegistry.cartesian||{}).attrRegex;(g.subplotsRegistry.polar||{}).attrRegex,(g.subplotsRegistry.ternary||{}).attrRegex,(g.subplotsRegistry.gl3d||{}).attrRegex;var Z=Object.keys(q);for(z=0;z<Z.length;z++){var ne=Z[z];if(H&&H.test(ne)){var te=q[ne];te.anchor&&te.anchor!=="free"&&(te.anchor=T(te.anchor)),te.overlaying&&(te.overlaying=T(te.overlaying)),te.type||(te.isdate?te.type="date":te.islog?te.type="log":te.isdate===!1&&te.islog===!1&&(te.type="linear")),(te.autorange==="withzero"||te.autorange==="tozero")&&(te.autorange=!0,te.rangemode="tozero"),te.insiderange&&delete te.range,delete te.islog,delete te.isdate,delete te.categories,ee(te,"domain")&&delete te.domain}}var Se=Array.isArray(q.annotations)?q.annotations.length:0;for(z=0;z<Se;z++){var fe=q.annotations[z];v.isPlainObject(fe)&&(p(fe,"xref"),p(fe,"yref"))}var ve=Array.isArray(q.shapes)?q.shapes.length:0;for(z=0;z<ve;z++){var xe=q.shapes[z];v.isPlainObject(xe)&&(p(xe,"xref"),p(xe,"yref"))}var re=Array.isArray(q.images)?q.images.length:0;for(z=0;z<re;z++){var de=q.images[z];v.isPlainObject(de)&&(p(de,"xref"),p(de,"yref"))}var be=q.legend;return be&&(be.x>3?(be.x=1.02,be.xanchor="left"):be.x<-2&&(be.x=-.02,be.xanchor="right"),be.y>3?(be.y=1.02,be.yanchor="bottom"):be.y<-2&&(be.y=-.02,be.yanchor="top")),q.dragmode==="rotate"&&(q.dragmode="orbit"),S.clean(q),q.template&&q.template.layout&&pe.cleanLayout(q.template.layout),q};function p(q,z){var H=q[z],Z=z.charAt(0);H&&H!=="paper"&&(q[z]=T(H,Z,!0))}pe.cleanData=function(q){for(var z=0;z<q.length;z++){var H=q[z],Z;if(H.type==="histogramy"&&"xbins"in H&&!("ybins"in H)&&(H.ybins=H.xbins,delete H.xbins),H.type==="histogramy"&&pe.swapXYData(H),(H.type==="histogramx"||H.type==="histogramy")&&(H.type="histogram"),"scl"in H&&!("colorscale"in H)&&(H.colorscale=H.scl,delete H.scl),"reversescl"in H&&!("reversescale"in H)&&(H.reversescale=H.reversescl,delete H.reversescl),H.xaxis&&(H.xaxis=T(H.xaxis,"x")),H.yaxis&&(H.yaxis=T(H.yaxis,"y")),P(H,"gl3d")&&H.scene&&(H.scene=g.subplotsRegistry.gl3d.cleanId(H.scene)),!P(H,"pie-like")&&!P(H,"bar-like"))if(Array.isArray(H.textposition))for(Z=0;Z<H.textposition.length;Z++)H.textposition[Z]=j(H.textposition[Z]);else H.textposition&&(H.textposition=j(H.textposition));var ne=M.getModule(H);if(ne&&ne.colorbar){var te=ne.colorbar.container,Se=te?H[te]:H;Se&&Se.colorscale&&(Se.colorscale==="YIGnBu"&&(Se.colorscale="YlGnBu"),Se.colorscale==="YIOrRd"&&(Se.colorscale="YlOrRd"))}if(H.type==="surface"&&v.isPlainObject(H.contours)){var fe=["x","y","z"];for(Z=0;Z<fe.length;Z++){var ve=H.contours[fe[Z]];v.isPlainObject(ve)&&(ve.highlightColor&&(ve.highlightcolor=ve.highlightColor,delete ve.highlightColor),ve.highlightWidth&&(ve.highlightwidth=ve.highlightWidth,delete ve.highlightWidth))}}if(H.type==="candlestick"||H.type==="ohlc"){var xe=(H.increasing||{}).showlegend!==!1,re=(H.decreasing||{}).showlegend!==!1,de=Y(H.increasing),be=Y(H.decreasing);if(de!==!1&&be!==!1){var Te=N(de,be,xe,re);Te&&(H.name=Te)}else(de||be)&&!H.name&&(H.name=de||be)}ee(H,"line")&&delete H.line,"marker"in H&&(ee(H.marker,"line")&&delete H.marker.line,ee(H,"marker")&&delete H.marker),S.clean(H),H.autobinx&&(delete H.autobinx,delete H.xbins),H.autobiny&&(delete H.autobiny,delete H.ybins)}};function Y(q){if(!v.isPlainObject(q))return!1;var z=q.name;return delete q.name,delete q.showlegend,(typeof z=="string"||typeof z=="number")&&String(z)}function N(q,z,H,Z){if(H&&!Z)return q;if(Z&&!H||!q.trim())return z;if(!z.trim())return q;var ne=Math.min(q.length,z.length),te;for(te=0;te<ne&&q.charAt(te)===z.charAt(te);te++);var Se=q.substr(0,te);return Se.trim()}function j(q){var z="middle",H="center";return typeof q=="string"&&(q.indexOf("top")!==-1?z="top":q.indexOf("bottom")!==-1&&(z="bottom"),q.indexOf("left")!==-1?H="left":q.indexOf("right")!==-1&&(H="right")),z+" "+H}function ee(q,z){return z in q&&typeof q[z]=="object"&&Object.keys(q[z]).length===0}pe.swapXYData=function(q){var z;if(v.swapAttrs(q,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(q.z)&&Array.isArray(q.z[0])&&(q.transpose?delete q.transpose:q.transpose=!0),q.error_x&&q.error_y){var H=q.error_y,Z="copy_ystyle"in H?H.copy_ystyle:!(H.color||H.thickness||H.width);v.swapAttrs(q,["error_?.copy_ystyle"]),Z&&v.swapAttrs(q,["error_?.color","error_?.thickness","error_?.width"])}if(typeof q.hoverinfo=="string"){var ne=q.hoverinfo.split("+");for(z=0;z<ne.length;z++)ne[z]==="x"?ne[z]="y":ne[z]==="y"&&(ne[z]="x");q.hoverinfo=ne.join("+")}},pe.coerceTraceIndices=function(q,z){if(me(z))return[z];if(!Array.isArray(z)||!z.length)return q.data.map(function(ne,te){return te});if(Array.isArray(z)){for(var H=[],Z=0;Z<z.length;Z++)v.isIndex(z[Z],q.data.length)?H.push(z[Z]):v.warn("trace index (",z[Z],") is not a number or is out of bounds");return H}return z},pe.manageArrayContainers=function(q,z,H){var Z=q.obj,ne=q.parts,te=ne.length,Se=ne[te-1],fe=me(Se);if(fe&&z===null){var ve=ne.slice(0,te-1).join("."),xe=v.nestedProperty(Z,ve).get();xe.splice(Se,1)}else fe&&q.get()===void 0&&q.get()===void 0&&(H[q.astr]=null),q.set(z)};var G=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function V(q){var z=q.search(G);if(z>0)return q.substr(0,z)}pe.hasParent=function(q,z){for(var H=V(z);H;){if(H in q)return!0;H=V(H)}return!1};var W=["x","y","z"];pe.clearAxisTypes=function(q,z,H){for(var Z=0;Z<z.length;Z++)for(var ne=q._fullData[Z],te=0;te<3;te++){var Se=C(q,ne,W[te]);if(Se&&Se.type!=="log"){var fe=Se._name,ve=Se._id.substr(1);if(ve.substr(0,5)==="scene"){if(H[ve]!==void 0)continue;fe=ve+"."+fe}var xe=fe+".type";H[fe]===void 0&&H[xe]===void 0&&v.nestedProperty(q.layout,xe).set(null)}}}}}),K_=a({"src/plot_api/plot_api.js"(pe){var me=f(),M=w(),v=iv(),g=o0(),E=g.nestedProperty,S=dv(),T=cv(),C=jp(),P=Lv(),p=p1(),Y=g1(),N=cy(),j=O1(),ee=t1(),G=Oe(),V=S2().initInteractions,W=P1(),q=ng().clearOutline,z=lt().dfltConfig,H=px(),Z=mx(),ne=$_(),te=Xl(),Se=wv().AX_NAME_PATTERN,fe=0,ve=5;function xe(Ve,pn,ci,_n){var Tp;if(Ve=g.getGraphDiv(Ve),S.init(Ve),g.isPlainObject(pn)){var Sp=pn;pn=Sp.data,ci=Sp.layout,_n=Sp.config,Tp=Sp.frames}var Ip=S.triggerHandler(Ve,"plotly_beforeplot",[pn,ci,_n]);if(Ip===!1)return Promise.reject();!pn&&!ci&&!g.isPlotDiv(Ve)&&g.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",Ve);function Jp(){if(Tp)return pe.addFrames(Ve,Tp)}ye(Ve,_n),ci||(ci={}),me.select(Ve).classed("js-plotly-plot",!0),ee.makeTester(),Array.isArray(Ve._promises)||(Ve._promises=[]);var m0=(Ve.data||[]).length===0&&Array.isArray(pn);Array.isArray(pn)&&(Z.cleanData(pn),m0?Ve.data=pn:Ve.data.push.apply(Ve.data,pn),Ve.empty=!1),(!Ve.layout||m0)&&(Ve.layout=Z.cleanLayout(ci)),p.supplyDefaults(Ve);var Dp=Ve._fullLayout,c0=Dp._has("cartesian");Dp._replotting=!0,(m0||Dp._shouldCreateBgLayer)&&(zl(Ve),Dp._shouldCreateBgLayer&&delete Dp._shouldCreateBgLayer),ee.initGradients(Ve),ee.initPatterns(Ve),m0&&Y.saveShowSpikeInitial(Ve);var b0=!Ve.calcdata||Ve.calcdata.length!==(Ve._fullData||[]).length;b0&&p.doCalcdata(Ve);for(var E0=0;E0<Ve.calcdata.length;E0++)Ve.calcdata[E0][0].trace=Ve._fullData[E0];Ve._context.responsive?Ve._responsiveChartHandler||(Ve._responsiveChartHandler=function(){g.isHidden(Ve)||p.resize(Ve)},window.addEventListener("resize",Ve._responsiveChartHandler)):g.clearResponsive(Ve);var gm=g.extendFlat({},Dp._size),Nm=0;function Bm(){for(var Em=Dp._basePlotModules,lm=0;lm<Em.length;lm++)Em[lm].drawFramework&&Em[lm].drawFramework(Ve);!Dp._glcanvas&&Dp._has("gl")&&(Dp._glcanvas=Dp._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(zm){return zm.key}),Dp._glcanvas.enter().append("canvas").attr("class",function(zm){return"gl-canvas gl-canvas-"+zm.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));var Dm=Ve._context.plotGlPixelRatio;if(Dp._glcanvas){Dp._glcanvas.attr("width",Dp.width*Dm).attr("height",Dp.height*Dm).style("width",Dp.width+"px").style("height",Dp.height+"px");var Zm=Dp._glcanvas.data()[0].regl;if(Zm&&(Math.floor(Dp.width*Dm)!==Zm._gl.drawingBufferWidth||Math.floor(Dp.height*Dm)!==Zm._gl.drawingBufferHeight)){var rv="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(Nm)g.error(rv);else return g.log(rv+" Clearing graph and plotting again."),p.cleanPlot([],{},Ve._fullData,Dp),p.supplyDefaults(Ve),Dp=Ve._fullLayout,p.doCalcdata(Ve),Nm++,Bm()}}return Dp.modebar.orientation==="h"?Dp._modebardiv.style("height",null).style("width","100%"):Dp._modebardiv.style("width",null).style("height",Dp.height+"px"),p.previousPromises(Ve)}function xm(){if(p.clearAutoMarginIds(Ve),ne.drawMarginPushers(Ve),Y.allowAutoMargin(Ve),Ve._fullLayout.title.text&&Ve._fullLayout.title.automargin&&p.allowAutoMargin(Ve,"title.automargin"),Dp._has("pie"))for(var Em=Ve._fullData,lm=0;lm<Em.length;lm++){var Dm=Em[lm];Dm.type==="pie"&&Dm.automargin&&p.allowAutoMargin(Ve,"pie."+Dm.uid+".automargin")}return p.doAutoMargin(Ve),p.previousPromises(Ve)}function Am(){if(p.didMarginChange(gm,Dp._size))return g.syncOrAsync([xm,ne.layoutStyles],Ve)}function mm(){if(!b0){vm();return}return g.syncOrAsync([C.getComponentMethod("shapes","calcAutorange"),C.getComponentMethod("annotations","calcAutorange"),vm],Ve)}function vm(){Ve._transitioning||(ne.doAutoRangeAndConstraints(Ve),m0&&Y.saveRangeInitial(Ve),C.getComponentMethod("rangeslider","calcAutorange")(Ve))}function Om(){return Y.draw(Ve,m0?"":"redraw")}var Lm=[p.previousPromises,Jp,Bm,xm,Am];c0&&Lm.push(mm),Lm.push(ne.layoutStyles),c0&&Lm.push(Om,function(lm){var Dm=lm._fullLayout._insideTickLabelsUpdaterange;if(Dm)return lm._fullLayout._insideTickLabelsUpdaterange=void 0,tt(lm,Dm).then(function(){Y.saveRangeInitial(lm,!0)})}),Lm.push(ne.drawData,ne.finalDraw,V,p.addLinks,p.rehover,p.redrag,p.reselect,p.doAutoMargin,p.previousPromises);var Um=g.syncOrAsync(Lm,Ve);return(!Um||!Um.then)&&(Um=Promise.resolve()),Um.then(function(){return re(Ve),Ve})}function re(Ve){var pn=Ve._fullLayout;pn._redrawFromAutoMarginCount?pn._redrawFromAutoMarginCount--:Ve.emit("plotly_afterplot")}function de(Ve){return g.extendFlat(z,Ve)}function be(Ve,pn){try{Ve._fullLayout._paper.style("background",pn)}catch(ci){g.error(ci)}}function Te(Ve,pn){var ci=G.combine(pn,"white");be(Ve,ci)}function ye(Ve,pn){if(!Ve._context){Ve._context=g.extendDeep({},z);var ci=me.select("base");Ve._context._baseUrl=ci.size()&&ci.attr("href")?window.location.href.split("#")[0]:""}var _n=Ve._context,Tp,Sp,Ip;if(pn){for(Sp=Object.keys(pn),Tp=0;Tp<Sp.length;Tp++)Ip=Sp[Tp],!(Ip==="editable"||Ip==="edits")&&Ip in _n&&(Ip==="setBackground"&&pn[Ip]==="opaque"?_n[Ip]=Te:_n[Ip]=pn[Ip]);var Jp=pn.editable;if(Jp!==void 0)for(_n.editable=Jp,Sp=Object.keys(_n.edits),Tp=0;Tp<Sp.length;Tp++)_n.edits[Sp[Tp]]=Jp;if(pn.edits)for(Sp=Object.keys(pn.edits),Tp=0;Tp<Sp.length;Tp++)Ip=Sp[Tp],Ip in _n.edits&&(_n.edits[Ip]=pn.edits[Ip]);_n._exportedPlot=pn._exportedPlot}_n.staticPlot&&(_n.editable=!1,_n.edits={},_n.autosizable=!1,_n.scrollZoom=!1,_n.doubleClick=!1,_n.showTips=!1,_n.showLink=!1,_n.displayModeBar=!1),_n.displayModeBar==="hover"&&!v&&(_n.displayModeBar=!0),(_n.setBackground==="transparent"||typeof _n.setBackground!="function")&&(_n.setBackground=be),_n._hasZeroHeight=_n._hasZeroHeight||Ve.clientHeight===0,_n._hasZeroWidth=_n._hasZeroWidth||Ve.clientWidth===0;var m0=_n.scrollZoom,Dp=_n._scrollZoom={};if(m0===!0)Dp.cartesian=1,Dp.gl3d=1,Dp.geo=1,Dp.mapbox=1,Dp.map=1;else if(typeof m0=="string"){var c0=m0.split("+");for(Tp=0;Tp<c0.length;Tp++)Dp[c0[Tp]]=1}else m0!==!1&&(Dp.gl3d=1,Dp.geo=1,Dp.mapbox=1,Dp.map=1)}function De(Ve){if(Ve=g.getGraphDiv(Ve),!g.isPlotDiv(Ve))throw new Error("This element is not a Plotly plot: "+Ve);return Z.cleanData(Ve.data),Z.cleanLayout(Ve.layout),Ve.calcdata=void 0,pe._doPlot(Ve).then(function(){return Ve.emit("plotly_redraw"),Ve})}function Ue(Ve,pn,ci,_n){return Ve=g.getGraphDiv(Ve),p.cleanPlot([],{},Ve._fullData||[],Ve._fullLayout||{}),p.purge(Ve),pe._doPlot(Ve,pn,ci,_n)}function he(Ve,pn){var ci=pn+1,_n=[],Tp,Sp;for(Tp=0;Tp<Ve.length;Tp++)Sp=Ve[Tp],Sp<0?_n.push(ci+Sp):_n.push(Sp);return _n}function Be(Ve,pn,ci){var _n,Tp;for(_n=0;_n<pn.length;_n++){if(Tp=pn[_n],Tp!==parseInt(Tp,10))throw new Error("all values in "+ci+" must be integers");if(Tp>=Ve.data.length||Tp<-Ve.data.length)throw new Error(ci+" must be valid indices for gd.data.");if(pn.indexOf(Tp,_n+1)>-1||Tp>=0&&pn.indexOf(-Ve.data.length+Tp)>-1||Tp<0&&pn.indexOf(Ve.data.length+Tp)>-1)throw new Error("each index in "+ci+" must be unique.")}}function Ye(Ve,pn,ci){if(!Array.isArray(Ve.data))throw new Error("gd.data must be an array.");if(typeof pn>"u")throw new Error("currentIndices is a required argument.");if(Array.isArray(pn)||(pn=[pn]),Be(Ve,pn,"currentIndices"),typeof ci<"u"&&!Array.isArray(ci)&&(ci=[ci]),typeof ci<"u"&&Be(Ve,ci,"newIndices"),typeof ci<"u"&&pn.length!==ci.length)throw new Error("current and new indices must be of equal length.")}function et(Ve,pn,ci){var _n,Tp;if(!Array.isArray(Ve.data))throw new Error("gd.data must be an array.");if(typeof pn>"u")throw new Error("traces must be defined.");for(Array.isArray(pn)||(pn=[pn]),_n=0;_n<pn.length;_n++)if(Tp=pn[_n],typeof Tp!="object"||Array.isArray(Tp)||Tp===null)throw new Error("all values in traces array must be non-array objects");if(typeof ci<"u"&&!Array.isArray(ci)&&(ci=[ci]),typeof ci<"u"&&ci.length!==pn.length)throw new Error("if indices is specified, traces.length must equal indices.length")}function Qe(Ve,pn,ci,_n){var Tp=g.isPlainObject(_n);if(!Array.isArray(Ve.data))throw new Error("gd.data must be an array");if(!g.isPlainObject(pn))throw new Error("update must be a key:value object");if(typeof ci>"u")throw new Error("indices must be an integer or array of integers");Be(Ve,ci,"indices");for(var Sp in pn){if(!Array.isArray(pn[Sp])||pn[Sp].length!==ci.length)throw new Error("attribute "+Sp+" must be an array of length equal to indices array length");if(Tp&&(!(Sp in _n)||!Array.isArray(_n[Sp])||_n[Sp].length!==pn[Sp].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 correspondence with the keys and number of traces in the update object")}}function ft(Ve,pn,ci,_n){var Tp=g.isPlainObject(_n),Sp=[],Ip,Jp,m0,Dp,c0;Array.isArray(ci)||(ci=[ci]),ci=he(ci,Ve.data.length-1);for(var b0 in pn)for(var E0=0;E0<ci.length;E0++){if(Ip=Ve.data[ci[E0]],m0=E(Ip,b0),Jp=m0.get(),Dp=pn[b0][E0],!g.isArrayOrTypedArray(Dp))throw new Error("attribute: "+b0+" index: "+E0+" must be an array");if(!g.isArrayOrTypedArray(Jp))throw new Error("cannot extend missing or non-array attribute: "+b0);if(Jp.constructor!==Dp.constructor)throw new Error("cannot extend array with an array of a different type: "+b0);c0=Tp?_n[b0][E0]:_n,M(c0)||(c0=-1),Sp.push({prop:m0,target:Jp,insert:Dp,maxp:Math.floor(c0)})}return Sp}function mn(Ve,pn,ci,_n,Tp){Qe(Ve,pn,ci,_n);for(var Sp=ft(Ve,pn,ci,_n),Ip={},Jp={},m0=0;m0<Sp.length;m0++){var Dp=Sp[m0].prop,c0=Sp[m0].maxp,b0=Tp(Sp[m0].target,Sp[m0].insert,c0);Dp.set(b0[0]),Array.isArray(Ip[Dp.astr])||(Ip[Dp.astr]=[]),Ip[Dp.astr].push(b0[1]),Array.isArray(Jp[Dp.astr])||(Jp[Dp.astr]=[]),Jp[Dp.astr].push(Sp[m0].target.length)}return{update:Ip,maxPoints:Jp}}function ta(Ve,pn){var ci=new Ve.constructor(Ve.length+pn.length);return ci.set(Ve),ci.set(pn,Ve.length),ci}function Do(Ve,pn,ci,_n){Ve=g.getGraphDiv(Ve);function Tp(m0,Dp,c0){var b0,E0;if(g.isTypedArray(m0))if(c0<0){var gm=new m0.constructor(0),Nm=ta(m0,Dp);c0<0?(b0=Nm,E0=gm):(b0=gm,E0=Nm)}else if(b0=new m0.constructor(c0),E0=new m0.constructor(m0.length+Dp.length-c0),c0===Dp.length)b0.set(Dp),E0.set(m0);else if(c0<Dp.length){var Bm=Dp.length-c0;b0.set(Dp.subarray(Bm)),E0.set(m0),E0.set(Dp.subarray(0,Bm),m0.length)}else{var xm=c0-Dp.length,Am=m0.length-xm;b0.set(m0.subarray(Am)),b0.set(Dp,xm),E0.set(m0.subarray(0,Am))}else b0=m0.concat(Dp),E0=c0>=0&&c0<b0.length?b0.splice(0,b0.length-c0):[];return[b0,E0]}var Sp=mn(Ve,pn,ci,_n,Tp),Ip=pe.redraw(Ve),Jp=[Ve,Sp.update,ci,Sp.maxPoints];return T.add(Ve,pe.prependTraces,Jp,Do,arguments),Ip}function Ae(Ve,pn,ci,_n){Ve=g.getGraphDiv(Ve);function Tp(m0,Dp,c0){var b0,E0;if(g.isTypedArray(m0))if(c0<=0){var gm=new m0.constructor(0),Nm=ta(Dp,m0);c0<0?(b0=Nm,E0=gm):(b0=gm,E0=Nm)}else if(b0=new m0.constructor(c0),E0=new m0.constructor(m0.length+Dp.length-c0),c0===Dp.length)b0.set(Dp),E0.set(m0);else if(c0<Dp.length){var Bm=Dp.length-c0;b0.set(Dp.subarray(0,Bm)),E0.set(Dp.subarray(Bm)),E0.set(m0,Bm)}else{var xm=c0-Dp.length;b0.set(Dp),b0.set(m0.subarray(0,xm),Dp.length),E0.set(m0.subarray(xm))}else b0=Dp.concat(m0),E0=c0>=0&&c0<b0.length?b0.splice(c0,b0.length):[];return[b0,E0]}var Sp=mn(Ve,pn,ci,_n,Tp),Ip=pe.redraw(Ve),Jp=[Ve,Sp.update,ci,Sp.maxPoints];return T.add(Ve,pe.extendTraces,Jp,Ae,arguments),Ip}function ke(Ve,pn,ci){Ve=g.getGraphDiv(Ve);var _n=[],Tp=pe.deleteTraces,Sp=ke,Ip=[Ve,_n],Jp=[Ve,pn],m0,Dp;for(et(Ve,pn,ci),Array.isArray(pn)||(pn=[pn]),pn=pn.map(function(c0){return g.extendFlat({},c0)}),Z.cleanData(pn),m0=0;m0<pn.length;m0++)Ve.data.push(pn[m0]);for(m0=0;m0<pn.length;m0++)_n.push(-pn.length+m0);if(typeof ci>"u")return Dp=pe.redraw(Ve),T.add(Ve,Tp,Ip,Sp,Jp),Dp;Array.isArray(ci)||(ci=[ci]);try{Ye(Ve,_n,ci)}catch(c0){throw Ve.data.splice(Ve.data.length-pn.length,pn.length),c0}return T.startSequence(Ve),T.add(Ve,Tp,Ip,Sp,Jp),Dp=pe.moveTraces(Ve,_n,ci),T.stopSequence(Ve),Dp}function ge(Ve,pn){Ve=g.getGraphDiv(Ve);var ci=[],_n=pe.addTraces,Tp=ge,Sp=[Ve,ci,pn],Ip=[Ve,pn],Jp,m0;if(typeof pn>"u")throw new Error("indices must be an integer or array of integers.");for(Array.isArray(pn)||(pn=[pn]),Be(Ve,pn,"indices"),pn=he(pn,Ve.data.length-1),pn.sort(g.sorterDes),Jp=0;Jp<pn.length;Jp+=1)m0=Ve.data.splice(pn[Jp],1)[0],ci.push(m0);var Dp=pe.redraw(Ve);return T.add(Ve,_n,Sp,Tp,Ip),Dp}function Ce(Ve,pn,ci){Ve=g.getGraphDiv(Ve);var _n=[],Tp=[],Sp=Ce,Ip=Ce,Jp=[Ve,ci,pn],m0=[Ve,pn,ci],Dp;if(Ye(Ve,pn,ci),pn=Array.isArray(pn)?pn:[pn],typeof ci>"u")for(ci=[],Dp=0;Dp<pn.length;Dp++)ci.push(-pn.length+Dp);for(ci=Array.isArray(ci)?ci:[ci],pn=he(pn,Ve.data.length-1),ci=he(ci,Ve.data.length-1),Dp=0;Dp<Ve.data.length;Dp++)pn.indexOf(Dp)===-1&&_n.push(Ve.data[Dp]);for(Dp=0;Dp<pn.length;Dp++)Tp.push({newIndex:ci[Dp],trace:Ve.data[pn[Dp]]});for(Tp.sort(function(b0,E0){return b0.newIndex-E0.newIndex}),Dp=0;Dp<Tp.length;Dp+=1)_n.splice(Tp[Dp].newIndex,0,Tp[Dp].trace);Ve.data=_n;var c0=pe.redraw(Ve);return T.add(Ve,Sp,Jp,Ip,m0),c0}function Je(Ve,pn,ci,_n){Ve=g.getGraphDiv(Ve),Z.clearPromiseQueue(Ve);var Tp={};if(typeof pn=="string")Tp[pn]=ci;else if(g.isPlainObject(pn))Tp=g.extendFlat({},pn),_n===void 0&&(_n=ci);else return g.warn("Restyle fail.",pn,ci,_n),Promise.reject();Object.keys(Tp).length&&(Ve.changed=!0);var Sp=Z.coerceTraceIndices(Ve,_n),Ip=Le(Ve,Tp,Sp),Jp=Ip.flags;Jp.calc&&(Ve.calcdata=void 0),Jp.clearAxisTypes&&Z.clearAxisTypes(Ve,Sp,{});var m0=[];Jp.fullReplot?m0.push(pe._doPlot):(m0.push(p.previousPromises),p.supplyDefaults(Ve),Jp.markerSize&&(p.doCalcdata(Ve),Ct(m0)),Jp.style&&m0.push(ne.doTraceStyle),Jp.colorbars&&m0.push(ne.doColorBars),m0.push(re)),m0.push(p.rehover,p.redrag,p.reselect),T.add(Ve,Je,[Ve,Ip.undoit,Ip.traces],Je,[Ve,Ip.redoit,Ip.traces]);var Dp=g.syncOrAsync(m0,Ve);return(!Dp||!Dp.then)&&(Dp=Promise.resolve()),Dp.then(function(){return Ve.emit("plotly_restyle",Ip.eventData),Ve})}function Re(Ve){return Ve===void 0?null:Ve}function Q(Ve,pn){return pn?function(ci,_n,Tp){var Sp=E(ci,_n),Ip=Sp.set;return Sp.set=function(Jp){var m0=(Tp||"")+_n;ce(m0,Sp.get(),Jp,Ve),Ip(Jp)},Sp}:E}function ce(Ve,pn,ci,_n){if(Array.isArray(pn)||Array.isArray(ci))for(var Tp=Array.isArray(pn)?pn:[],Sp=Array.isArray(ci)?ci:[],Ip=Math.max(Tp.length,Sp.length),Jp=0;Jp<Ip;Jp++)ce(Ve+"["+Jp+"]",Tp[Jp],Sp[Jp],_n);else if(g.isPlainObject(pn)||g.isPlainObject(ci)){var m0=g.isPlainObject(pn)?pn:{},Dp=g.isPlainObject(ci)?ci:{},c0=g.extendFlat({},m0,Dp);for(var b0 in c0)ce(Ve+"."+b0,m0[b0],Dp[b0],_n)}else _n[Ve]===void 0&&(_n[Ve]=Re(pn))}function Me(Ve,pn,ci){for(var _n in ci){var Tp=E(Ve,_n);ce(_n,Tp.get(),ci[_n],pn)}}function Le(Ve,pn,ci){var _n=Ve._fullLayout,Tp=Ve._fullData,Sp=Ve.data,Ip=_n._guiEditing,Jp=Q(_n._preGUI,Ip),m0=g.extendDeepAll({},pn),Dp,c0=te.traceFlags(),b0={},E0={},gm;function Nm(){return ci.map(function(){})}function Bm(tm){var wm=Y.id2name(tm);gm.indexOf(wm)===-1&&gm.push(wm)}function xm(tm){return"LAYOUT"+tm+".autorange"}function Am(tm){return"LAYOUT"+tm+".range"}function mm(tm){for(var wm=tm;wm<Tp.length;wm++)if(Tp[wm]._input===Sp[tm])return Tp[wm]}function vm(tm,wm,bm){if(Array.isArray(tm)){tm.forEach(function(Gm){vm(Gm,wm,bm)});return}if(!(tm in pn||Z.hasParent(pn,tm))){var Tm;if(tm.substr(0,6)==="LAYOUT")Tm=Jp(Ve.layout,tm.replace("LAYOUT",""));else{var Rm=ci[bm],Sm=_n._tracePreGUI[mm(Rm)._fullInput.uid];Tm=Q(Sm,Ip)(Sp[Rm],tm)}tm in E0||(E0[tm]=Nm()),E0[tm][bm]===void 0&&(E0[tm][bm]=Re(Tm.get())),wm!==void 0&&Tm.set(wm)}}function Om(tm){return function(wm){return Tp[wm][tm]}}function Lm(tm){return function(wm,bm){return wm===!1?Tp[ci[bm]][tm]:null}}for(var Um in pn){if(Z.hasParent(pn,Um))throw new Error("cannot set "+Um+" and a parent attribute simultaneously");var Em=pn[Um],lm,Dm,Zm,rv,zm,Ym;if((Um==="autobinx"||Um==="autobiny")&&(Um=Um.charAt(Um.length-1)+"bins",Array.isArray(Em)?Em=Em.map(Lm(Um)):Em===!1?Em=ci.map(Om(Um)):Em=null),b0[Um]=Em,Um.substr(0,6)==="LAYOUT"){Zm=Jp(Ve.layout,Um.replace("LAYOUT","")),E0[Um]=[Re(Zm.get())],Zm.set(Array.isArray(Em)?Em[0]:Em),c0.calc=!0;continue}for(E0[Um]=Nm(),Dp=0;Dp<ci.length;Dp++){lm=Sp[ci[Dp]],Dm=mm(ci[Dp]);var Km=_n._tracePreGUI[Dm._fullInput.uid];if(Zm=Q(Km,Ip)(lm,Um),rv=Zm.get(),zm=Array.isArray(Em)?Em[Dp%Em.length]:Em,zm!==void 0){var _v=Zm.parts[Zm.parts.length-1],Hm=Um.substr(0,Um.length-_v.length-1),uv=Hm?Hm+".":"",dt=Hm?E(Dm,Hm).get():Dm;if(Ym=P.getTraceValObject(Dm,Zm.parts),Ym&&Ym.impliedEdits&&zm!==null)for(var Fe in Ym.impliedEdits)vm(g.relativeAttr(Um,Fe),Ym.impliedEdits[Fe],Dp);else if((_v==="thicknessmode"||_v==="lenmode")&&rv!==zm&&(zm==="fraction"||zm==="pixels")&&dt){var Gp=_n._size,kp=dt.orient,yp=kp==="top"||kp==="bottom";if(_v==="thicknessmode"){var bp=yp?Gp.h:Gp.w;vm(uv+"thickness",dt.thickness*(zm==="fraction"?1/bp:bp),Dp)}else{var Pp=yp?Gp.w:Gp.h;vm(uv+"len",dt.len*(zm==="fraction"?1/Pp:Pp),Dp)}}else if(Um==="type"&&(zm==="pie"!=(rv==="pie")||zm==="funnelarea"!=(rv==="funnelarea"))){var s0="x",Rp="y";(zm==="bar"||rv==="bar")&&lm.orientation==="h"&&(s0="y",Rp="x"),g.swapAttrs(lm,["?","?src"],"labels",s0),g.swapAttrs(lm,["d?","?0"],"label",s0),g.swapAttrs(lm,["?","?src"],"values",Rp),rv==="pie"||rv==="funnelarea"?(E(lm,"marker.color").set(E(lm,"marker.colors").get()),_n._pielayer.selectAll("g.trace").remove()):C.traceIs(lm,"cartesian")&&E(lm,"marker.colors").set(E(lm,"marker.color").get())}E0[Um][Dp]=Re(rv);var Vp=["swapxy","swapxyaxes","orientation","orientationaxes"];if(Vp.indexOf(Um)!==-1){if(Um==="orientation"){Zm.set(zm);var r0=lm.x&&!lm.y?"h":"v";if((Zm.get()||r0)===Dm.orientation)continue}else Um==="orientationaxes"&&(lm.orientation={v:"h",h:"v"}[Dm.orientation]);Z.swapXYData(lm),c0.calc=c0.clearAxisTypes=!0}else p.dataArrayContainers.indexOf(Zm.parts[0])!==-1?(Z.manageArrayContainers(Zm,zm,E0),c0.calc=!0):(Ym?Ym.arrayOk&&!C.traceIs(Dm,"regl")&&(g.isArrayOrTypedArray(zm)||g.isArrayOrTypedArray(rv))?c0.calc=!0:te.update(c0,Ym):c0.calc=!0,Zm.set(zm))}}if(["swapxyaxes","orientationaxes"].indexOf(Um)!==-1&&Y.swap(Ve,ci),Um==="orientationaxes"){var $p=E(Ve.layout,"hovermode"),P0=$p.get();P0==="x"?$p.set("y"):P0==="y"?$p.set("x"):P0==="x unified"?$p.set("y unified"):P0==="y unified"&&$p.set("x unified")}if(["orientation","type"].indexOf(Um)!==-1){for(gm=[],Dp=0;Dp<ci.length;Dp++){var j0=Sp[ci[Dp]];C.traceIs(j0,"cartesian")&&(Bm(j0.xaxis||"x"),Bm(j0.yaxis||"y"))}vm(gm.map(xm),!0,0),vm(gm.map(Am),[0,1],0)}}return(c0.calc||c0.plot)&&(c0.fullReplot=!0),{flags:c0,undoit:E0,redoit:b0,traces:ci,eventData:g.extendDeepNoArrays([],[m0,ci])}}function tt(Ve,pn,ci){Ve=g.getGraphDiv(Ve),Z.clearPromiseQueue(Ve);var _n={};if(typeof pn=="string")_n[pn]=ci;else if(g.isPlainObject(pn))_n=g.extendFlat({},pn);else return g.warn("Relayout fail.",pn,ci),Promise.reject();Object.keys(_n).length&&(Ve.changed=!0);var Tp=qp(Ve,_n),Sp=Tp.flags;Sp.calc&&(Ve.calcdata=void 0);var Ip=[p.previousPromises];Sp.layoutReplot?Ip.push(ne.layoutReplot):Object.keys(_n).length&&(bt(Ve,Sp,Tp)||p.supplyDefaults(Ve),Sp.legend&&Ip.push(ne.doLegend),Sp.layoutstyle&&Ip.push(ne.layoutStyles),Sp.axrange&&Ct(Ip,Tp.rangesAltered),Sp.ticks&&Ip.push(ne.doTicksRelayout),Sp.modebar&&Ip.push(ne.doModeBar),Sp.camera&&Ip.push(ne.doCamera),Sp.colorbars&&Ip.push(ne.doColorBars),Ip.push(re)),Ip.push(p.rehover,p.redrag,p.reselect),T.add(Ve,tt,[Ve,Tp.undoit],tt,[Ve,Tp.redoit]);var Jp=g.syncOrAsync(Ip,Ve);return(!Jp||!Jp.then)&&(Jp=Promise.resolve(Ve)),Jp.then(function(){return Ve.emit("plotly_relayout",Tp.eventData),Ve})}function bt(Ve,pn,ci){var _n=Ve._fullLayout;if(!pn.axrange)return!1;for(var Tp in pn)if(Tp!=="axrange"&&pn[Tp])return!1;var Sp,Ip,Jp=function(gm,Nm){return g.coerce(Sp,Ip,j,gm,Nm)},m0={};for(var Dp in ci.rangesAltered){var c0=Y.id2name(Dp);if(Sp=Ve.layout[c0],Ip=_n[c0],N(Sp,Ip,Jp,m0),Ip._matchGroup){for(var b0 in Ip._matchGroup)if(b0!==Dp){var E0=_n[Y.id2name(b0)];E0.autorange=Ip.autorange,E0.range=Ip.range.slice(),E0._input.range=Ip.range.slice()}}}return!0}function Ct(Ve,pn){var ci=pn?function(_n){var Tp=[],Sp=!0;for(var Ip in pn){var Jp=Y.getFromId(_n,Ip);if(Tp.push(Ip),(Jp.ticklabelposition||"").indexOf("inside")!==-1&&Jp._anchorAxis&&Tp.push(Jp._anchorAxis._id),Jp._matchGroup)for(var m0 in Jp._matchGroup)pn[m0]||Tp.push(m0)}return Y.draw(_n,Tp,{skipTitle:Sp})}:function(_n){return Y.draw(_n,"redraw")};Ve.push(q,ne.doAutoRangeAndConstraints,ci,ne.drawData,ne.finalDraw)}var yi=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,Fl=/^[xyz]axis[0-9]*\.autorange$/,Yl=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function qp(Ve,pn){var ci=Ve.layout,_n=Ve._fullLayout,Tp=_n._guiEditing,Sp=Q(_n._preGUI,Tp),Ip=Object.keys(pn),Jp=Y.list(Ve),m0=g.extendDeepAll({},pn),Dp={},c0,b0,E0;for(Ip=Object.keys(pn),b0=0;b0<Ip.length;b0++)if(Ip[b0].indexOf("allaxes")===0){for(E0=0;E0<Jp.length;E0++){var gm=Jp[E0]._id.substr(1),Nm=gm.indexOf("scene")!==-1?gm+".":"",Bm=Ip[b0].replace("allaxes",Nm+Jp[E0]._name);pn[Bm]||(pn[Bm]=pn[Ip[b0]])}delete pn[Ip[b0]]}var xm=te.layoutFlags(),Am={},mm={};function vm(Sm,Gm){if(Array.isArray(Sm)){Sm.forEach(function(pv){vm(pv,Gm)});return}if(!(Sm in pn||Z.hasParent(pn,Sm))){var Xm=Sp(ci,Sm);Sm in mm||(mm[Sm]=Re(Xm.get())),Gm!==void 0&&Xm.set(Gm)}}var Om={},Lm;function Um(Sm){var Gm=Y.name2id(Sm.split(".")[0]);return Om[Gm]=1,Gm}for(var Em in pn){if(Z.hasParent(pn,Em))throw new Error("cannot set "+Em+" and a parent attribute simultaneously");for(var lm=Sp(ci,Em),Dm=pn[Em],Zm=lm.parts.length,rv=Zm-1;rv>0&&typeof lm.parts[rv]!="string";)rv--;var zm=lm.parts[rv],Ym=lm.parts[rv-1]+"."+zm,Km=lm.parts.slice(0,rv).join("."),_v=E(Ve.layout,Km).get(),Hm=E(_n,Km).get(),uv=lm.get();if(Dm!==void 0){Am[Em]=Dm,mm[Em]=zm==="reverse"?Dm:Re(uv);var dt=P.getLayoutValObject(_n,lm.parts);if(dt&&dt.impliedEdits&&Dm!==null)for(var Fe in dt.impliedEdits)vm(g.relativeAttr(Em,Fe),dt.impliedEdits[Fe]);if(["width","height"].indexOf(Em)!==-1)if(Dm){vm("autosize",null);var Gp=Em==="height"?"width":"height";vm(Gp,_n[Gp])}else _n[Em]=Ve._initialAutoSize[Em];else if(Em==="autosize")vm("width",Dm?null:_n.width),vm("height",Dm?null:_n.height);else if(Ym.match(yi))Um(Ym),E(_n,Km+"._inputRange").set(null);else if(Ym.match(Fl)){Um(Ym),E(_n,Km+"._inputRange").set(null);var kp=E(_n,Km).get();kp._inputDomain&&(kp._input.domain=kp._inputDomain.slice())}else Ym.match(Yl)&&E(_n,Km+"._inputDomain").set(null);if(zm==="type"){Lm=_v;var yp=Hm.type==="linear"&&Dm==="log",bp=Hm.type==="log"&&Dm==="linear";if(yp||bp){if(!Lm||!Lm.range)vm(Km+".autorange",!0);else if(Hm.autorange)yp&&(Lm.range=Lm.range[1]>Lm.range[0]?[1,2]:[2,1]);else{var Pp=Lm.range[0],s0=Lm.range[1];yp?(Pp<=0&&s0<=0&&vm(Km+".autorange",!0),Pp<=0?Pp=s0/1e6:s0<=0&&(s0=Pp/1e6),vm(Km+".range[0]",Math.log(Pp)/Math.LN10),vm(Km+".range[1]",Math.log(s0)/Math.LN10)):(vm(Km+".range[0]",Math.pow(10,Pp)),vm(Km+".range[1]",Math.pow(10,s0)))}Array.isArray(_n._subplots.polar)&&_n._subplots.polar.length&&_n[lm.parts[0]]&&lm.parts[1]==="radialaxis"&&delete _n[lm.parts[0]]._subplot.viewInitial["radialaxis.range"],C.getComponentMethod("annotations","convertCoords")(Ve,Hm,Dm,vm),C.getComponentMethod("images","convertCoords")(Ve,Hm,Dm,vm)}else vm(Km+".autorange",!0),vm(Km+".range",null);E(_n,Km+"._inputRange").set(null)}else if(zm.match(Se)){var Rp=E(_n,Em).get(),Vp=(Dm||{}).type;(!Vp||Vp==="-")&&(Vp="linear"),C.getComponentMethod("annotations","convertCoords")(Ve,Rp,Vp,vm),C.getComponentMethod("images","convertCoords")(Ve,Rp,Vp,vm)}var r0=H.containerArrayMatch(Em);if(r0){c0=r0.array,b0=r0.index;var $p=r0.property,P0=dt||{editType:"calc"};b0!==""&&$p===""&&(H.isAddVal(Dm)?mm[Em]=null:H.isRemoveVal(Dm)?mm[Em]=(E(ci,c0).get()||[])[b0]:g.warn("unrecognized full object value",pn)),te.update(xm,P0),Dp[c0]||(Dp[c0]={});var j0=Dp[c0][b0];j0||(j0=Dp[c0][b0]={}),j0[$p]=Dm,delete pn[Em]}else zm==="reverse"?(_v.range?_v.range.reverse():(vm(Km+".autorange",!0),_v.range=[1,0]),Hm.autorange?xm.calc=!0:xm.plot=!0):(Em==="dragmode"&&(Dm===!1&&uv!==!1||Dm!==!1&&uv===!1)||_n._has("scatter-like")&&_n._has("regl")&&Em==="dragmode"&&(Dm==="lasso"||Dm==="select")&&!(uv==="lasso"||uv==="select")?xm.plot=!0:dt?te.update(xm,dt):xm.calc=!0,lm.set(Dm))}}for(c0 in Dp){var tm=H.applyContainerArrayChanges(Ve,Sp(ci,c0),Dp[c0],xm,Sp);tm||(xm.plot=!0)}for(var wm in Om){Lm=Y.getFromId(Ve,wm);var bm=Lm&&Lm._constraintGroup;if(bm){xm.calc=!0;for(var Tm in bm)Om[Tm]||(Y.getFromId(Ve,Tm)._constraintShrinkable=!0)}}(Fp(Ve)||pn.height||pn.width)&&(xm.plot=!0);var Rm=_n.shapes;for(b0=0;b0<Rm.length;b0++)if(Rm[b0].showlegend){xm.calc=!0;break}return(xm.plot||xm.calc)&&(xm.layoutReplot=!0),{flags:xm,rangesAltered:Om,undoit:mm,redoit:Am,eventData:m0}}function Fp(Ve){var pn=Ve._fullLayout,ci=pn.width,_n=pn.height;return Ve.layout.autosize&&p.plotAutoSize(Ve,Ve.layout,pn),pn.width!==ci||pn.height!==_n}function Up(Ve,pn,ci,_n){Ve=g.getGraphDiv(Ve),Z.clearPromiseQueue(Ve),g.isPlainObject(pn)||(pn={}),g.isPlainObject(ci)||(ci={}),Object.keys(pn).length&&(Ve.changed=!0),Object.keys(ci).length&&(Ve.changed=!0);var Tp=Z.coerceTraceIndices(Ve,_n),Sp=Le(Ve,g.extendFlat({},pn),Tp),Ip=Sp.flags,Jp=qp(Ve,g.extendFlat({},ci)),m0=Jp.flags;(Ip.calc||m0.calc)&&(Ve.calcdata=void 0),Ip.clearAxisTypes&&Z.clearAxisTypes(Ve,Tp,ci);var Dp=[];m0.layoutReplot?Dp.push(ne.layoutReplot):Ip.fullReplot?Dp.push(pe._doPlot):(Dp.push(p.previousPromises),bt(Ve,m0,Jp)||p.supplyDefaults(Ve),Ip.style&&Dp.push(ne.doTraceStyle),(Ip.colorbars||m0.colorbars)&&Dp.push(ne.doColorBars),m0.legend&&Dp.push(ne.doLegend),m0.layoutstyle&&Dp.push(ne.layoutStyles),m0.axrange&&Ct(Dp,Jp.rangesAltered),m0.ticks&&Dp.push(ne.doTicksRelayout),m0.modebar&&Dp.push(ne.doModeBar),m0.camera&&Dp.push(ne.doCamera),Dp.push(re)),Dp.push(p.rehover,p.redrag,p.reselect),T.add(Ve,Up,[Ve,Sp.undoit,Jp.undoit,Sp.traces],Up,[Ve,Sp.redoit,Jp.redoit,Sp.traces]);var c0=g.syncOrAsync(Dp,Ve);return(!c0||!c0.then)&&(c0=Promise.resolve(Ve)),c0.then(function(){return Ve.emit("plotly_update",{data:Sp.eventData,layout:Jp.eventData}),Ve})}function _r(Ve){return function(ci){ci._fullLayout._guiEditing=!0;var _n=Ve.apply(null,arguments);return ci._fullLayout._guiEditing=!1,_n}}var gs=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^(map\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],dr=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function Lo(Ve,pn){for(var ci=0;ci<pn.length;ci++){var _n=pn[ci],Tp=Ve.match(_n.pattern);if(Tp){var Sp=Tp[1]||"";return{head:Sp,tail:Ve.substr(Sp.length+1),attr:_n.attr}}}}function Cp(Ve,pn){var ci=E(pn,Ve).get();if(ci!==void 0)return ci;var _n=Ve.split(".");for(_n.pop();_n.length>1;)if(_n.pop(),ci=E(pn,_n.join(".")+".uirevision").get(),ci!==void 0)return ci;return pn.uirevision}function Hp(Ve,pn){for(var ci=0;ci<pn.length;ci++)if(pn[ci]._fullInput.uid===Ve)return ci;return-1}function e0(Ve,pn,ci){for(var _n=0;_n<pn.length;_n++)if(pn[_n].uid===Ve)return _n;return!pn[ci]||pn[ci].uid?-1:ci}function t0(Ve,pn){var ci=g.isPlainObject(Ve),_n=Array.isArray(Ve);return ci||_n?(ci&&g.isPlainObject(pn)||_n&&Array.isArray(pn))&&JSON.stringify(Ve)===JSON.stringify(pn):Ve===pn}function n0(Ve,pn,ci,_n){var Tp=_n._preGUI,Sp,Ip,Jp,m0,Dp,c0,b0,E0,gm,Nm,Bm=[],xm={},Am={};for(Sp in Tp){if(Dp=Lo(Sp,gs),Dp){if(gm=Dp.head,Nm=Dp.tail,Ip=Dp.attr||gm+".uirevision",Jp=E(_n,Ip).get(),m0=Jp&&Cp(Ip,pn),m0&&m0===Jp){if(c0=Tp[Sp],c0===null&&(c0=void 0),b0=E(pn,Sp),E0=b0.get(),t0(E0,c0)){E0===void 0&&Nm==="autorange"&&Bm.push(gm),b0.set(Re(E(_n,Sp).get()));continue}else if(Nm==="autorange"||Nm.substr(0,6)==="range["){var mm=Tp[gm+".range[0]"],vm=Tp[gm+".range[1]"],Om=Tp[gm+".autorange"];if(Om||Om===null&&mm===null&&vm===null){if(!(gm in xm)){var Lm=E(pn,gm).get();xm[gm]=Lm&&(Lm.autorange||Lm.autorange!==!1&&(!Lm.range||Lm.range.length!==2))}if(xm[gm]){b0.set(Re(E(_n,Sp).get()));continue}}}}}else g.warn("unrecognized GUI edit: "+Sp);delete Tp[Sp],Dp&&Dp.tail.substr(0,6)==="range["&&(Am[Dp.head]=1)}for(var Um=0;Um<Bm.length;Um++){var Em=Bm[Um];if(Am[Em]){var lm=E(pn,Em).get();lm&&delete lm.autorange}}var Dm=_n._tracePreGUI;for(var Zm in Dm){var rv=Dm[Zm],zm=null,Ym;for(Sp in rv){if(!zm){var Km=Hp(Zm,ci);if(Km<0){delete Dm[Zm];break}var _v=ci[Km];Ym=_v._fullInput;var Hm=e0(Zm,Ve,Ym.index);if(Hm<0){delete Dm[Zm];break}zm=Ve[Hm]}if(Dp=Lo(Sp,dr),Dp){if(Dp.attr?(Jp=E(_n,Dp.attr).get(),m0=Jp&&Cp(Dp.attr,pn)):(Jp=Ym.uirevision,m0=zm.uirevision,m0===void 0&&(m0=pn.uirevision)),m0&&m0===Jp&&(c0=rv[Sp],c0===null&&(c0=void 0),b0=E(zm,Sp),E0=b0.get(),t0(E0,c0))){b0.set(Re(E(Ym,Sp).get()));continue}}else g.warn("unrecognized GUI edit: "+Sp+" in trace uid "+Zm);delete rv[Sp]}}}function y0(Ve,pn,ci,_n){var Tp,Sp;function Ip(){return pe.addFrames(Ve,Tp)}Ve=g.getGraphDiv(Ve),Z.clearPromiseQueue(Ve);var Jp=Ve._fullData,m0=Ve._fullLayout;if(!g.isPlotDiv(Ve)||!Jp||!m0)Sp=pe.newPlot(Ve,pn,ci,_n);else{if(g.isPlainObject(pn)){var Dp=pn;pn=Dp.data,ci=Dp.layout,_n=Dp.config,Tp=Dp.frames}var c0=!1;if(_n){var b0=g.extendDeep({},Ve._context);Ve._context=void 0,ye(Ve,_n),c0=B0(b0,Ve._context)}if(c0){const Km=Ve._ev.eventNames().map(_v=>[_v,Ve._ev.listeners(_v)]);Sp=pe.newPlot(Ve,pn,ci,_n).then(()=>{for(const[_v,Hm]of Km)Hm.forEach(uv=>Ve.on(_v,uv));return pe.react(Ve,pn,ci,_n)})}else{Ve.data=pn||[],Z.cleanData(Ve.data),Ve.layout=ci||{},Z.cleanLayout(Ve.layout),n0(Ve.data,Ve.layout,Jp,m0),p.supplyDefaults(Ve,{skipUpdateCalc:!0});var E0=Ve._fullData,gm=Ve._fullLayout,Nm=gm.datarevision===void 0,Bm=gm.transition,xm=I0(Ve,m0,gm,Nm,Bm),Am=xm.newDataRevision,mm=h0(Ve,Jp,E0,Nm,Bm,Am);if(Fp(Ve)&&(xm.layoutReplot=!0),mm.calc||xm.calc){Ve.calcdata=void 0;for(var vm=Object.getOwnPropertyNames(gm),Om=0;Om<vm.length;Om++){var Lm=vm[Om],Um=Lm.substring(0,5);if(Um==="xaxis"||Um==="yaxis"){var Em=gm[Lm]._emptyCategories;Em&&Em()}}}else p.supplyDefaultsUpdateCalc(Ve.calcdata,E0);var lm=[];if(Tp&&(Ve._transitionData={},p.createTransitionData(Ve),lm.push(Ip)),gm.transition&&(mm.anim||xm.anim))xm.ticks&&lm.push(ne.doTicksRelayout),p.doCalcdata(Ve),ne.doAutoRangeAndConstraints(Ve),lm.push(function(){return p.transitionFromReact(Ve,mm,xm,m0)});else if(mm.fullReplot||xm.layoutReplot)Ve._fullLayout._skipDefaults=!0,lm.push(pe._doPlot);else{for(var Dm in xm.arrays){var Zm=xm.arrays[Dm];if(Zm.length){var rv=C.getComponentMethod(Dm,"drawOne");if(rv!==g.noop)for(var zm=0;zm<Zm.length;zm++)rv(Ve,Zm[zm]);else{var Ym=C.getComponentMethod(Dm,"draw");if(Ym===g.noop)throw new Error("cannot draw components: "+Dm);Ym(Ve)}}}lm.push(p.previousPromises),mm.style&&lm.push(ne.doTraceStyle),(mm.colorbars||xm.colorbars)&&lm.push(ne.doColorBars),xm.legend&&lm.push(ne.doLegend),xm.layoutstyle&&lm.push(ne.layoutStyles),xm.axrange&&Ct(lm),xm.ticks&&lm.push(ne.doTicksRelayout),xm.modebar&&lm.push(ne.doModeBar),xm.camera&&lm.push(ne.doCamera),lm.push(re)}lm.push(p.rehover,p.redrag,p.reselect),Sp=g.syncOrAsync(lm,Ve),(!Sp||!Sp.then)&&(Sp=Promise.resolve(Ve))}}return Sp.then(()=>(c0||Ve.emit("plotly_react",{config:_n,data:pn,layout:ci}),Ve))}function h0(Ve,pn,ci,_n,Tp,Sp){var Ip=pn.length===ci.length;if(!Tp&&!Ip)return{fullReplot:!0,calc:!0};var Jp=te.traceFlags();Jp.arrays={},Jp.nChanges=0,Jp.nChangesAnim=0;var m0,Dp;function c0(gm){var Nm=P.getTraceValObject(Dp,gm);return!Dp._module.animatable&&Nm.anim&&(Nm.anim=!1),Nm}var b0={getValObject:c0,flags:Jp,immutable:_n,transition:Tp,newDataRevision:Sp,gd:Ve},E0={};for(m0=0;m0<pn.length;m0++)if(ci[m0]){if(Dp=ci[m0]._fullInput,E0[Dp.uid])continue;E0[Dp.uid]=1,Kp(pn[m0]._fullInput,Dp,[],b0)}return(Jp.calc||Jp.plot)&&(Jp.fullReplot=!0),Tp&&Jp.nChanges&&Jp.nChangesAnim&&(Jp.anim=Jp.nChanges===Jp.nChangesAnim&&Ip?"all":"some"),Jp}function I0(Ve,pn,ci,_n,Tp){var Sp=te.layoutFlags();Sp.arrays={},Sp.rangesAltered={},Sp.nChanges=0,Sp.nChangesAnim=0;function Ip(E0){return P.getLayoutValObject(ci,E0)}for(var Jp in ci)if(!(!Jp.startsWith("xaxis")&&!Jp.startsWith("yaxis"))&&pn[Jp]){var m0=ci[Jp].domain,Dp=pn[Jp].domain,c0=pn[Jp]._inputDomain;pn[Jp]._inputDomain&&(m0[0]===c0[0]&&m0[1]===c0[1]?ci[Jp].domain=pn[Jp].domain:(m0[0]!==Dp[0]||m0[1]!==Dp[1])&&(ci[Jp]._inputDomain=null))}var b0={getValObject:Ip,flags:Sp,immutable:_n,transition:Tp,gd:Ve};return Kp(pn,ci,[],b0),(Sp.plot||Sp.calc)&&(Sp.layoutReplot=!0),Tp&&Sp.nChanges&&Sp.nChangesAnim&&(Sp.anim=Sp.nChanges===Sp.nChangesAnim?"all":"some"),Sp}function Kp(Ve,pn,ci,_n){var Tp,Sp,Ip,Jp=_n.getValObject,m0=_n.flags,Dp=_n.immutable,c0=_n.inArray,b0=_n.arrayIndex;function E0(){var Km=Tp.editType;if(c0&&Km.indexOf("arraydraw")!==-1){g.pushUnique(m0.arrays[c0],b0);return}te.update(m0,Tp),Km!=="none"&&m0.nChanges++,_n.transition&&Tp.anim&&m0.nChangesAnim++,(yi.test(Ip)||Fl.test(Ip))&&(m0.rangesAltered[ci[0]]=1),Sp==="datarevision"&&(m0.newDataRevision=1)}function gm(Km){return Km.valType==="data_array"||Km.arrayOk}for(Sp in Ve){if(m0.calc&&!_n.transition)return;var Nm=Ve[Sp],Bm=pn[Sp],xm=ci.concat(Sp);if(Ip=xm.join("."),!(Sp.charAt(0)==="_"||typeof Nm=="function"||Nm===Bm)){if((Sp==="tick0"||Sp==="dtick")&&ci[0]!=="geo"){var Am=pn.tickmode;if(Am==="auto"||Am==="array"||!Am)continue}if(!(Sp==="range"&&pn.autorange)&&!((Sp==="zmin"||Sp==="zmax")&&pn.type==="contourcarpet")&&(Tp=Jp(xm),!!Tp&&!(Tp._compareAsJSON&&JSON.stringify(Nm)===JSON.stringify(Bm)))){var mm=Tp.valType,vm,Om=gm(Tp),Lm=Array.isArray(Nm),Um=Array.isArray(Bm);if(Lm&&Um){var Em="_input_"+Sp,lm=Ve[Em],Dm=pn[Em];if(Array.isArray(lm)&&lm===Dm)continue}if(Bm===void 0)Om&&Lm?m0.calc=!0:E0();else if(Tp._isLinkedToArray){var Zm=[],rv=!1;c0||(m0.arrays[Sp]=Zm);var zm=Math.min(Nm.length,Bm.length),Ym=Math.max(Nm.length,Bm.length);if(zm!==Ym)if(Tp.editType==="arraydraw")rv=!0;else{E0();continue}for(vm=0;vm<zm;vm++)Kp(Nm[vm],Bm[vm],xm.concat(vm),g.extendFlat({inArray:Sp,arrayIndex:vm},_n));if(rv)for(vm=zm;vm<Ym;vm++)Zm.push(vm)}else!mm&&g.isPlainObject(Nm)?Kp(Nm,Bm,xm,_n):Om?Lm&&Um?(Dp&&(m0.calc=!0),(Dp||_n.newDataRevision)&&E0()):Lm!==Um?m0.calc=!0:E0():Lm&&Um?(Nm.length!==Bm.length||String(Nm)!==String(Bm))&&E0():E0()}}}for(Sp in pn)if(!(Sp in Ve||Sp.charAt(0)==="_"||typeof pn[Sp]=="function"))if(Tp=Jp(ci.concat(Sp)),gm(Tp)&&Array.isArray(pn[Sp])){m0.calc=!0;return}else E0()}function B0(Ve,pn){var ci;for(ci in Ve)if(ci.charAt(0)!=="_"){var _n=Ve[ci],Tp=pn[ci];if(_n!==Tp)if(g.isPlainObject(_n)&&g.isPlainObject(Tp)){if(B0(_n,Tp))return!0}else if(Array.isArray(_n)&&Array.isArray(Tp)){if(_n.length!==Tp.length)return!0;for(var Sp=0;Sp<_n.length;Sp++)if(_n[Sp]!==Tp[Sp])if(g.isPlainObject(_n[Sp])&&g.isPlainObject(Tp[Sp])){if(B0(_n[Sp],Tp[Sp]))return!0}else return!0}else return!0}}function em(Ve,pn,ci){if(Ve=g.getGraphDiv(Ve),!g.isPlotDiv(Ve))throw new Error("This element is not a Plotly plot: "+Ve+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var _n=Ve._transitionData;_n._frameQueue||(_n._frameQueue=[]),ci=p.supplyAnimationDefaults(ci);var Tp=ci.transition,Sp=ci.frame;_n._frameWaitingCnt===void 0&&(_n._frameWaitingCnt=0);function Ip(Dp){return Array.isArray(Tp)?Dp>=Tp.length?Tp[0]:Tp[Dp]:Tp}function Jp(Dp){return Array.isArray(Sp)?Dp>=Sp.length?Sp[0]:Sp[Dp]:Sp}function m0(Dp,c0){var b0=0;return function(){if(Dp&&++b0===c0)return Dp()}}return new Promise(function(Dp,c0){function b0(){if(_n._frameQueue.length!==0){for(;_n._frameQueue.length;){var zm=_n._frameQueue.pop();zm.onInterrupt&&zm.onInterrupt()}Ve.emit("plotly_animationinterrupted",[])}}function E0(zm){if(zm.length!==0){for(var Ym=0;Ym<zm.length;Ym++){var Km;zm[Ym].type==="byname"?Km=p.computeFrame(Ve,zm[Ym].name):Km=zm[Ym].data;var _v=Jp(Ym),Hm=Ip(Ym);Hm.duration=Math.min(Hm.duration,_v.duration);var uv={frame:Km,name:zm[Ym].name,frameOpts:_v,transitionOpts:Hm};Ym===zm.length-1&&(uv.onComplete=m0(Dp,2),uv.onInterrupt=c0),_n._frameQueue.push(uv)}ci.mode==="immediate"&&(_n._lastFrameAt=-1/0),_n._animationRaf||Bm()}}function gm(){Ve.emit("plotly_animated"),window.cancelAnimationFrame(_n._animationRaf),_n._animationRaf=null}function Nm(){_n._currentFrame&&_n._currentFrame.onComplete&&_n._currentFrame.onComplete();var zm=_n._currentFrame=_n._frameQueue.shift();if(zm){var Ym=zm.name?zm.name.toString():null;Ve._fullLayout._currentFrame=Ym,_n._lastFrameAt=Date.now(),_n._timeToNext=zm.frameOpts.duration,p.transition(Ve,zm.frame.data,zm.frame.layout,Z.coerceTraceIndices(Ve,zm.frame.traces),zm.frameOpts,zm.transitionOpts).then(function(){zm.onComplete&&zm.onComplete()}),Ve.emit("plotly_animatingframe",{name:Ym,frame:zm.frame,animation:{frame:zm.frameOpts,transition:zm.transitionOpts}})}else gm()}function Bm(){Ve.emit("plotly_animating"),_n._lastFrameAt=-1/0,_n._timeToNext=0,_n._runningTransitions=0,_n._currentFrame=null;var zm=function(){_n._animationRaf=window.requestAnimationFrame(zm),Date.now()-_n._lastFrameAt>_n._timeToNext&&Nm()};zm()}var xm=0;function Am(zm){return Array.isArray(Tp)?xm>=Tp.length?zm.transitionOpts=Tp[xm]:zm.transitionOpts=Tp[0]:zm.transitionOpts=Tp,xm++,zm}var mm,vm,Om=[],Lm=pn==null,Um=Array.isArray(pn),Em=!Lm&&!Um&&g.isPlainObject(pn);if(Em)Om.push({type:"object",data:Am(g.extendFlat({},pn))});else if(Lm||["string","number"].indexOf(typeof pn)!==-1)for(mm=0;mm<_n._frames.length;mm++)vm=_n._frames[mm],vm&&(Lm||String(vm.group)===String(pn))&&Om.push({type:"byname",name:String(vm.name),data:Am({name:vm.name})});else if(Um)for(mm=0;mm<pn.length;mm++){var lm=pn[mm];["number","string"].indexOf(typeof lm)!==-1?(lm=String(lm),Om.push({type:"byname",name:lm,data:Am({name:lm})})):g.isPlainObject(lm)&&Om.push({type:"object",data:Am(g.extendFlat({},lm))})}for(mm=0;mm<Om.length;mm++)if(vm=Om[mm],vm.type==="byname"&&!_n._frameHash[vm.data.name]){g.warn('animate failure: frame not found: "'+vm.data.name+'"'),c0();return}["next","immediate"].indexOf(ci.mode)!==-1&&b0(),ci.direction==="reverse"&&Om.reverse();var Dm=Ve._fullLayout._currentFrame;if(Dm&&ci.fromcurrent){var Zm=-1;for(mm=0;mm<Om.length;mm++)if(vm=Om[mm],vm.type==="byname"&&vm.name===Dm){Zm=mm;break}if(Zm>0&&Zm<Om.length-1){var rv=[];for(mm=0;mm<Om.length;mm++)vm=Om[mm],(Om[mm].type!=="byname"||mm>Zm)&&rv.push(vm);Om=rv}}Om.length>0?E0(Om):(Ve.emit("plotly_animated"),Dp())})}function k0(Ve,pn,ci){if(Ve=g.getGraphDiv(Ve),pn==null)return Promise.resolve();if(!g.isPlotDiv(Ve))throw new Error("This element is not a Plotly plot: "+Ve+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var _n,Tp,Sp,Ip,Jp=Ve._transitionData._frames,m0=Ve._transitionData._frameHash;if(!Array.isArray(pn))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+pn);var Dp=Jp.length+pn.length*2,c0=[],b0={};for(_n=pn.length-1;_n>=0;_n--)if(g.isPlainObject(pn[_n])){var E0=pn[_n].name,gm=(m0[E0]||b0[E0]||{}).name,Nm=pn[_n].name,Bm=m0[gm]||b0[gm];gm&&Nm&&typeof Nm=="number"&&Bm&&fe<ve&&(fe++,g.warn('addFrames: overwriting frame "'+(m0[gm]||b0[gm]).name+'" with a frame whose name of type "number" also equates to "'+gm+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),fe===ve&&g.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),b0[E0]={name:E0},c0.push({frame:p.supplyFrameDefaults(pn[_n]),index:ci&&ci[_n]!==void 0&&ci[_n]!==null?ci[_n]:Dp+_n})}c0.sort(function(Em,lm){return Em.index>lm.index?-1:Em.index<lm.index?1:0});var xm=[],Am=[],mm=Jp.length;for(_n=c0.length-1;_n>=0;_n--){if(Tp=c0[_n].frame,typeof Tp.name=="number"&&g.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!Tp.name)for(;m0[Tp.name="frame "+Ve._transitionData._counter++];);if(m0[Tp.name]){for(Sp=0;Sp<Jp.length&&(Jp[Sp]||{}).name!==Tp.name;Sp++);xm.push({type:"replace",index:Sp,value:Tp}),Am.unshift({type:"replace",index:Sp,value:Jp[Sp]})}else Ip=Math.max(0,Math.min(c0[_n].index,mm)),xm.push({type:"insert",index:Ip,value:Tp}),Am.unshift({type:"delete",index:Ip}),mm++}var vm=p.modifyFrames,Om=p.modifyFrames,Lm=[Ve,Am],Um=[Ve,xm];return T&&T.add(Ve,vm,Lm,Om,Um),p.modifyFrames(Ve,xm)}function J0(Ve,pn){if(Ve=g.getGraphDiv(Ve),!g.isPlotDiv(Ve))throw new Error("This element is not a Plotly plot: "+Ve);var ci,_n,Tp=Ve._transitionData._frames,Sp=[],Ip=[];if(!pn)for(pn=[],ci=0;ci<Tp.length;ci++)pn.push(ci);for(pn=pn.slice(),pn.sort(),ci=pn.length-1;ci>=0;ci--)_n=pn[ci],Sp.push({type:"delete",index:_n}),Ip.unshift({type:"insert",index:_n,value:Tp[_n]});var Jp=p.modifyFrames,m0=p.modifyFrames,Dp=[Ve,Ip],c0=[Ve,Sp];return T&&T.add(Ve,Jp,Dp,m0,c0),p.modifyFrames(Ve,Sp)}function vs(Ve){Ve=g.getGraphDiv(Ve);var pn=Ve._fullLayout||{},ci=Ve._fullData||[];return p.cleanPlot([],{},ci,pn),p.purge(Ve),S.purge(Ve),pn._container&&pn._container.remove(),delete Ve._context,Ve}function jl(Ve){var pn=Ve._fullLayout,ci=Ve.getBoundingClientRect();if(!g.equalDomRects(ci,pn._lastBBox)){var _n=pn._invTransform=g.inverseTransformMatrix(g.getFullTransformMatrix(Ve));pn._invScaleX=Math.sqrt(_n[0][0]*_n[0][0]+_n[0][1]*_n[0][1]+_n[0][2]*_n[0][2]),pn._invScaleY=Math.sqrt(_n[1][0]*_n[1][0]+_n[1][1]*_n[1][1]+_n[1][2]*_n[1][2]),pn._lastBBox=ci}}function zl(Ve){var pn=me.select(Ve),ci=Ve._fullLayout;if(ci._calcInverseTransform=jl,ci._calcInverseTransform(Ve),ci._container=pn.selectAll(".plot-container").data([0]),ci._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0).style({width:"100%",height:"100%"}),ci._paperdiv=ci._container.selectAll(".svg-container").data([0]),ci._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),ci._glcontainer=ci._paperdiv.selectAll(".gl-container").data([{}]),ci._glcontainer.enter().append("div").classed("gl-container",!0),ci._paperdiv.selectAll(".main-svg").remove(),ci._paperdiv.select(".modebar-container").remove(),ci._paper=ci._paperdiv.insert("svg",":first-child").classed("main-svg",!0),ci._toppaper=ci._paperdiv.append("svg").classed("main-svg",!0),ci._modebardiv=ci._paperdiv.append("div"),delete ci._modeBar,ci._hoverpaper=ci._paperdiv.append("svg").classed("main-svg",!0),!ci._uid){var _n={};me.selectAll("defs").each(function(){this.id&&(_n[this.id.split("-")[1]]=1)}),ci._uid=g.randstr(_n)}ci._paperdiv.selectAll(".main-svg").attr(W.svgAttrs),ci._defs=ci._paper.append("defs").attr("id","defs-"+ci._uid),ci._clips=ci._defs.append("g").classed("clips",!0),ci._topdefs=ci._toppaper.append("defs").attr("id","topdefs-"+ci._uid),ci._topclips=ci._topdefs.append("g").classed("clips",!0),ci._bgLayer=ci._paper.append("g").classed("bglayer",!0),ci._draggers=ci._paper.append("g").classed("draglayer",!0);var Tp=ci._paper.append("g").classed("layer-below",!0);ci._imageLowerLayer=Tp.append("g").classed("imagelayer",!0),ci._shapeLowerLayer=Tp.append("g").classed("shapelayer",!0),ci._cartesianlayer=ci._paper.append("g").classed("cartesianlayer",!0),ci._polarlayer=ci._paper.append("g").classed("polarlayer",!0),ci._smithlayer=ci._paper.append("g").classed("smithlayer",!0),ci._ternarylayer=ci._paper.append("g").classed("ternarylayer",!0),ci._geolayer=ci._paper.append("g").classed("geolayer",!0),ci._funnelarealayer=ci._paper.append("g").classed("funnelarealayer",!0),ci._pielayer=ci._paper.append("g").classed("pielayer",!0),ci._iciclelayer=ci._paper.append("g").classed("iciclelayer",!0),ci._treemaplayer=ci._paper.append("g").classed("treemaplayer",!0),ci._sunburstlayer=ci._paper.append("g").classed("sunburstlayer",!0),ci._indicatorlayer=ci._toppaper.append("g").classed("indicatorlayer",!0),ci._glimages=ci._paper.append("g").classed("glimages",!0);var Sp=ci._toppaper.append("g").classed("layer-above",!0);ci._imageUpperLayer=Sp.append("g").classed("imagelayer",!0),ci._shapeUpperLayer=Sp.append("g").classed("shapelayer",!0),ci._selectionLayer=ci._toppaper.append("g").classed("selectionlayer",!0),ci._infolayer=ci._toppaper.append("g").classed("infolayer",!0),ci._menulayer=ci._toppaper.append("g").classed("menulayer",!0),ci._zoomlayer=ci._toppaper.append("g").classed("zoomlayer",!0),ci._hoverlayer=ci._hoverpaper.append("g").classed("hoverlayer",!0),ci._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),Ve.emit("plotly_framework")}pe.animate=em,pe.addFrames=k0,pe.deleteFrames=J0,pe.addTraces=ke,pe.deleteTraces=ge,pe.extendTraces=Do,pe.moveTraces=Ce,pe.prependTraces=Ae,pe.newPlot=Ue,pe._doPlot=xe,pe.purge=vs,pe.react=y0,pe.redraw=De,pe.relayout=tt,pe.restyle=Je,pe.setPlotConfig=de,pe.update=Up,pe._guiRelayout=_r(tt),pe._guiRestyle=_r(Je),pe._guiUpdate=_r(Up),pe._storeDirectGUIEdit=Me}}),e_=a({"src/snapshot/helpers.js"(pe){var me=jp();pe.getDelay=function(g){return g._has&&(g._has("gl3d")||g._has("mapbox")||g._has("map"))?500:0},pe.getRedrawFunc=function(g){return function(){me.getComponentMethod("colorbar","draw")(g)}},pe.encodeSVG=function(g){return"data:image/svg+xml,"+encodeURIComponent(g)},pe.encodeJSON=function(g){return"data:application/json,"+encodeURIComponent(g)};var M=window.URL||window.webkitURL;pe.createObjectURL=function(g){return M.createObjectURL(g)},pe.revokeObjectURL=function(g){return M.revokeObjectURL(g)},pe.createBlob=function(g,E){if(E==="svg")return new window.Blob([g],{type:"image/svg+xml;charset=utf-8"});if(E==="full-json")return new window.Blob([g],{type:"application/json;charset=utf-8"});var S=v(window.atob(g));return new window.Blob([S],{type:"image/"+E})},pe.octetStream=function(g){document.location.href="data:application/octet-stream"+g};function v(g){for(var E=g.length,S=new ArrayBuffer(E),T=new Uint8Array(S),C=0;C<E;C++)T[C]=g.charCodeAt(C);return S}pe.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/}}),dy=a({"src/snapshot/tosvg.js"(pe,me){var M=f();o0();var v=t1(),g=Oe();P1();var E=/"/g,S="TOBESTRIPPED",T=new RegExp('("'+S+")|("+S+'")',"g");function C(p){var Y=M.select("body").append("div").style({display:"none"}).html(""),N=p.replace(/(&[^;]*;)/gi,function(j){return j==="&lt;"?"&#60;":j==="&rt;"?"&#62;":j.indexOf("<")!==-1||j.indexOf(">")!==-1?"":Y.html(j).text()});return Y.remove(),N}function P(p){return p.replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")}me.exports=function(Y,N,j){var ee=Y._fullLayout,G=ee._paper,V=ee._toppaper,W=ee.width,q=ee.height,z;G.insert("rect",":first-child").call(v.setRect,0,0,W,q).call(g.fill,ee.paper_bgcolor);var H=ee._basePlotModules||[];for(z=0;z<H.length;z++){var Z=H[z];Z.toSVG&&Z.toSVG(Y)}if(V){var ne=V.node().childNodes,te=Array.prototype.slice.call(ne);for(z=0;z<te.length;z++){var Se=te[z];Se.childNodes.length&&G.node().appendChild(Se)}}ee._draggers&&ee._draggers.remove(),G.node().style.background="",G.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var ve=M.select(this);if(this.style.visibility==="hidden"||this.style.display==="none"){ve.remove();return}else ve.style({visibility:null,display:null});var xe=this.style.fontFamily;xe&&xe.indexOf('"')!==-1&&ve.style("font-family",xe.replace(E,S));var re=this.style.fontWeight;re&&(re==="normal"||re==="400")&&ve.style("font-weight",void 0);var de=this.style.fontStyle;de&&de==="normal"&&ve.style("font-style",void 0);var be=this.style.fontVariant;be&&be==="normal"&&ve.style("font-variant",void 0)}),G.selectAll(".gradient_filled,.pattern_filled").each(function(){var ve=M.select(this),xe=this.style.fill;xe&&xe.indexOf("url(")!==-1&&ve.style("fill",xe.replace(E,S));var re=this.style.stroke;re&&re.indexOf("url(")!==-1&&ve.style("stroke",re.replace(E,S))}),(N==="pdf"||N==="eps")&&G.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),N==="svg"&&j&&(G.attr("width",j*W),G.attr("height",j*q),G.attr("viewBox","0 0 "+W+" "+q));var fe=new window.XMLSerializer().serializeToString(G.node());return fe=C(fe),fe=P(fe),fe=fe.replace(T,"'"),fe}}}),Ny=a({"src/snapshot/svgtoimg.js"(pe,me){var M=o0(),v=ov().EventEmitter,g=e_();function E(S){var T=S.emitter||new v,C=new Promise(function(P,p){var Y=window.Image,N=S.svg,j=S.format||"png",ee=S.canvas,G=S.scale||1,V=S.width||300,W=S.height||150,q=G*V,z=G*W,H=ee.getContext("2d",{willReadFrequently:!0}),Z=new Y,ne,te;j==="svg"||M.isSafari()?te=g.encodeSVG(N):(ne=g.createBlob(N,"svg"),te=g.createObjectURL(ne)),ee.width=q,ee.height=z,Z.onload=function(){var Se;switch(ne=null,g.revokeObjectURL(te),j!=="svg"&&H.drawImage(Z,0,0,q,z),j){case"jpeg":Se=ee.toDataURL("image/jpeg");break;case"png":Se=ee.toDataURL("image/png");break;case"webp":Se=ee.toDataURL("image/webp");break;case"svg":Se=te;break;default:var fe="Image format is not jpeg, png, svg or webp.";if(p(new Error(fe)),!S.promise)return T.emit("error",fe)}P(Se),S.promise||T.emit("success",Se)},Z.onerror=function(Se){if(ne=null,g.revokeObjectURL(te),p(Se),!S.promise)return T.emit("error",Se)},Z.src=te});return S.promise?C:T}me.exports=E}}),wg=a({"src/plot_api/to_image.js"(pe,me){var M=w(),v=K_(),g=p1(),E=o0(),S=e_(),T=dy(),C=Ny(),P=s().version,p={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};function Y(N,j){j=j||{};var ee,G,V,W;E.isPlainObject(N)?(ee=N.data||[],G=N.layout||{},V=N.config||{},W={}):(N=E.getGraphDiv(N),ee=E.extendDeep([],N.data),G=E.extendDeep({},N.layout),V=N._context,W=N._fullLayout||{});function q(Ue){return!(Ue in j)||E.validate(j[Ue],p[Ue])}if(!q("width")&&j.width!==null||!q("height")&&j.height!==null)throw new Error("Height and width should be pixel values.");if(!q("format"))throw new Error("Export format is not "+E.join2(p.format.values,", "," or ")+".");var z={};function H(Ue,he){return E.coerce(j,z,p,Ue,he)}var Z=H("format"),ne=H("width"),te=H("height"),Se=H("scale"),fe=H("setBackground"),ve=H("imageDataOnly"),xe=document.createElement("div");xe.style.position="absolute",xe.style.left="-5000px",document.body.appendChild(xe);var re=E.extendFlat({},G);ne?re.width=ne:j.width===null&&M(W.width)&&(re.width=W.width),te?re.height=te:j.height===null&&M(W.height)&&(re.height=W.height);var de=E.extendFlat({},V,{_exportedPlot:!0,staticPlot:!0,setBackground:fe}),be=S.getRedrawFunc(xe);function Te(){return new Promise(function(Ue){setTimeout(Ue,S.getDelay(xe._fullLayout))})}function ye(){return new Promise(function(Ue,he){var Be=T(xe,Z,Se),Ye=xe._fullLayout.width,et=xe._fullLayout.height;function Qe(){v.purge(xe),document.body.removeChild(xe)}if(Z==="full-json"){var ft=g.graphJson(xe,!1,"keepdata","object",!0,!0);return ft.version=P,ft=JSON.stringify(ft),Qe(),Ue(ve?ft:S.encodeJSON(ft))}if(Qe(),Z==="svg")return Ue(ve?Be:S.encodeSVG(Be));var mn=document.createElement("canvas");mn.id=E.randstr(),C({format:Z,width:Ye,height:et,scale:Se,canvas:mn,svg:Be,promise:!0}).then(Ue).catch(he)})}function De(Ue){return ve?Ue.replace(S.IMAGE_URL_PREFIX,""):Ue}return new Promise(function(Ue,he){v.newPlot(xe,ee,re,de).then(be).then(Te).then(ye).then(function(Be){Ue(De(Be))}).catch(function(Be){he(Be)})})}me.exports=Y}}),J_=a({"src/plot_api/validate.js"(pe,me){var M=o0(),v=p1(),g=Lv(),E=lt().dfltConfig,S=M.isPlainObject,T=Array.isArray,C=M.isArrayOrTypedArray;me.exports=function(H,Z){H===void 0&&(H=[]),Z===void 0&&(Z={});var ne=g.get(),te=[],Se={_context:M.extendFlat({},E)},fe,ve;T(H)?(Se.data=M.extendDeep([],H),fe=H):(Se.data=[],fe=[],te.push(j("array","data"))),S(Z)?(Se.layout=M.extendDeep({},Z),ve=Z):(Se.layout={},ve={},arguments.length>1&&te.push(j("object","layout"))),v.supplyDefaults(Se);for(var xe=Se._fullData,re=fe.length,de=0;de<re;de++){var be=fe[de],Te=["data",de];if(!S(be)){te.push(j("object",Te));continue}var ye=xe[de],De=ye.type,Ue=ne.traces[De].attributes;Ue.type={valType:"enumerated",values:[De]},ye.visible===!1&&be.visible!==!1&&te.push(j("invisible",Te)),P(be,ye,Ue,te,Te)}var he=Se._fullLayout,Be=p(ne,xe);return P(ve,he,Be,te,"layout"),te.length===0?void 0:te};function P(z,H,Z,ne,te,Se){Se=Se||[];for(var fe=Object.keys(z),ve=0;ve<fe.length;ve++){var xe=fe[ve],re=Se.slice();re.push(xe);var de=z[xe],be=H[xe],Te=G(Z,xe),ye=(Te||{}).valType,De=ye==="info_array",Ue=ye==="colorscale",he=(Te||{}).items;if(!ee(Z,xe))ne.push(j("schema",te,re));else if(S(de)&&S(be)&&ye!=="any")P(de,be,Te,ne,te,re);else if(De&&T(de)){de.length>be.length&&ne.push(j("unused",te,re.concat(be.length)));var Be=be.length,Ye=Array.isArray(he);Ye&&(Be=Math.min(Be,he.length));var et,Qe,ft,mn,ta;if(Te.dimensions===2)for(Qe=0;Qe<Be;Qe++)if(T(de[Qe])){de[Qe].length>be[Qe].length&&ne.push(j("unused",te,re.concat(Qe,be[Qe].length)));var Do=be[Qe].length;for(et=0;et<(Ye?Math.min(Do,he[Qe].length):Do);et++)ft=Ye?he[Qe][et]:he,mn=de[Qe][et],ta=be[Qe][et],M.validate(mn,ft)?ta!==mn&&ta!==+mn&&ne.push(j("dynamic",te,re.concat(Qe,et),mn,ta)):ne.push(j("value",te,re.concat(Qe,et),mn))}else ne.push(j("array",te,re.concat(Qe),de[Qe]));else for(Qe=0;Qe<Be;Qe++)ft=Ye?he[Qe]:he,mn=de[Qe],ta=be[Qe],M.validate(mn,ft)?ta!==mn&&ta!==+mn&&ne.push(j("dynamic",te,re.concat(Qe),mn,ta)):ne.push(j("value",te,re.concat(Qe),mn))}else if(Te.items&&!De&&T(de)){var Ae=he[Object.keys(he)[0]],ke=[],ge,Ce;for(ge=0;ge<be.length;ge++){var Je=be[ge]._index||ge;if(Ce=re.slice(),Ce.push(Je),S(de[Je])&&S(be[ge])){ke.push(Je);var Re=de[Je],Q=be[ge];S(Re)&&Re.visible!==!1&&Q.visible===!1?ne.push(j("invisible",te,Ce)):P(Re,Q,Ae,ne,te,Ce)}}for(ge=0;ge<de.length;ge++)Ce=re.slice(),Ce.push(ge),S(de[ge])?ke.indexOf(ge)===-1&&ne.push(j("unused",te,Ce)):ne.push(j("object",te,Ce,de[ge]))}else!S(de)&&S(be)?ne.push(j("object",te,re,de)):!C(de)&&C(be)&&!De&&!Ue?ne.push(j("array",te,re,de)):xe in H?M.validate(de,Te)?Te.valType==="enumerated"&&(Te.coerceNumber&&de!==+be||!C(de)&&de!==be||String(de)!==String(be))&&ne.push(j("dynamic",te,re,de,be)):ne.push(j("value",te,re,de)):ne.push(j("unused",te,re,de))}return ne}function p(z,H){for(var Z=z.layout.layoutAttributes,ne=0;ne<H.length;ne++){var te=H[ne],Se=z.traces[te.type],fe=Se.layoutAttributes;fe&&(te.subplot?M.extendFlat(Z[Se.attributes.subplot.dflt],fe):M.extendFlat(Z,fe))}return Z}var Y={object:function(z,H){var Z;return z==="layout"&&H===""?Z="The layout argument":z[0]==="data"&&H===""?Z="Trace "+z[1]+" in the data argument":Z=N(z)+"key "+H,Z+" must be linked to an object container"},array:function(z,H){var Z;return z==="data"?Z="The data argument":Z=N(z)+"key "+H,Z+" must be linked to an array container"},schema:function(z,H){return N(z)+"key "+H+" is not part of the schema"},unused:function(z,H,Z){var ne=S(Z)?"container":"key";return N(z)+ne+" "+H+" did not get coerced"},dynamic:function(z,H,Z,ne){return[N(z)+"key",H,"(set to '"+Z+"')","got reset to","'"+ne+"'","during defaults."].join(" ")},invisible:function(z,H){return(H?N(z)+"item "+H:"Trace "+z[1])+" got defaulted to be not visible"},value:function(z,H,Z){return[N(z)+"key "+H,"is set to an invalid value ("+Z+")"].join(" ")}};function N(z){return T(z)?"In data trace "+z[1]+", ":"In "+z+", "}function j(z,H,Z,ne,te){Z=Z||"";var Se,fe;T(H)?(Se=H[0],fe=H[1]):(Se=H,fe=null);var ve=q(Z),xe=Y[z](H,ve,ne,te);return M.log(xe),{code:z,container:Se,trace:fe,path:Z,astr:ve,msg:xe}}function ee(z,H){var Z=W(H),ne=Z.keyMinusId,te=Z.id;return ne in z&&z[ne]._isSubplotObj&&te?!0:H in z}function G(z,H){if(H in z)return z[H];var Z=W(H);return z[Z.keyMinusId]}var V=M.counterRegex("([a-z]+)");function W(z){var H=z.match(V);return{keyMinusId:H&&H[1],id:H&&H[2]}}function q(z){if(!T(z))return String(z);for(var H="",Z=0;Z<z.length;Z++){var ne=z[Z];typeof ne=="number"?H=H.substr(0,H.length-1)+"["+ne+"]":H+=ne,Z<z.length-1&&(H+=".")}return H}}}),vx=a({"src/snapshot/filesaver.js"(pe,me){var M=o0(),v=e_();function g(E,S,T){var C=document.createElement("a"),P="download"in C,p=new Promise(function(Y,N){var j,ee;if(P)return j=v.createBlob(E,T),ee=v.createObjectURL(j),C.href=ee,C.download=S,document.body.appendChild(C),C.click(),document.body.removeChild(C),v.revokeObjectURL(ee),j=null,Y(S);if(M.isSafari()){var G=T==="svg"?",":";base64,";return v.octetStream(G+encodeURIComponent(E)),Y(S)}N(new Error("download error"))});return p}me.exports=g}}),ey=a({"src/snapshot/download.js"(pe,me){var M=o0(),v=wg(),g=vx();e_();function E(S,T){var C;return M.isPlainObject(S)||(C=M.getGraphDiv(S)),T=T||{},T.format=T.format||"png",T.width=T.width||null,T.height=T.height||null,T.imageDataOnly=!0,new Promise(function(P,p){C&&C._snapshotInProgress&&p(new Error("Snapshotting already in progress.")),C&&(C._snapshotInProgress=!0);var Y=v(S,T),N=T.filename||S.fn||"newplot";N+="."+T.format.replace("-","."),Y.then(function(j){return C&&(C._snapshotInProgress=!1),g(j,N,T.format)}).then(function(j){P(j)}).catch(function(j){C&&(C._snapshotInProgress=!1),p(j)})})}me.exports=E}}),t_=a({"src/plot_api/template_api.js"(pe){var me=o0(),M=me.isPlainObject,v=Lv(),g=p1(),E=He(),S=Vm(),T=lt().dfltConfig;pe.makeTemplate=function(V){V=me.isPlainObject(V)?V:me.getGraphDiv(V),V=me.extendDeep({_context:T},{data:V.data,layout:V.layout}),g.supplyDefaults(V);var W=V.data||[],q=V.layout||{};q._basePlotModules=V._fullLayout._basePlotModules,q._modules=V._fullLayout._modules;var z={data:{},layout:{}};W.forEach(function(de){var be={};p(de,be,N.bind(null,de));var Te=me.coerce(de,{},E,"type"),ye=z.data[Te];ye||(ye=z.data[Te]=[]),ye.push(be)}),p(q,z.layout,Y.bind(null,q)),delete z.layout.template;var H=q.template;if(M(H)){var Z=H.layout,ne,te,Se,fe,ve,xe;M(Z)&&C(Z,z.layout);var re=H.data;if(M(re)){for(te in z.data)if(Se=re[te],Array.isArray(Se)){for(ve=z.data[te],xe=ve.length,fe=Se.length,ne=0;ne<xe;ne++)C(Se[ne%fe],ve[ne]);for(ne=xe;ne<fe;ne++)ve.push(me.extendDeep({},Se[ne]))}for(te in re)te in z.data||(z.data[te]=me.extendDeep([],re[te]))}}return z};function C(V,W){V=me.extendDeep({},V);var q=Object.keys(V).sort(),z,H;function Z(ve,xe,re){if(M(xe)&&M(ve))C(ve,xe);else if(Array.isArray(xe)&&Array.isArray(ve)){var de=S.arrayTemplater({_template:V},re);for(H=0;H<xe.length;H++){var be=xe[H],Te=de.newItem(be)._template;Te&&C(Te,be)}var ye=de.defaultItems();for(H=0;H<ye.length;H++)xe.push(ye[H]._template);for(H=0;H<xe.length;H++)delete xe[H].templateitemname}}for(z=0;z<q.length;z++){var ne=q[z],te=V[ne];if(ne in W?Z(te,W[ne],ne):W[ne]=te,P(ne)===ne)for(var Se in W){var fe=P(Se);Se!==fe&&fe===ne&&!(Se in V)&&Z(te,W[Se],ne)}}}function P(V){return V.replace(/[0-9]+$/,"")}function p(V,W,q,z,H){var Z=H&&q(H);for(var ne in V){var te=V[ne],Se=j(V,ne,z),fe=j(V,ne,H),ve=q(fe);if(!ve){var xe=P(ne);xe!==ne&&(fe=j(V,xe,H),ve=q(fe))}if(!(Z&&Z===ve)&&!(!ve||ve._noTemplating||ve.valType==="data_array"||ve.arrayOk&&Array.isArray(te)))if(!ve.valType&&M(te))p(te,W,q,Se,fe);else if(ve._isLinkedToArray&&Array.isArray(te))for(var re=!1,de=0,be={},Te=0;Te<te.length;Te++){var ye=te[Te];if(M(ye)){var De=ye.name;if(De)be[De]||(p(ye,W,q,j(te,de,Se),j(te,de,fe)),de++,be[De]=1);else if(!re){var Ue=S.arrayDefaultKey(ne),he=j(V,Ue,z),Be=j(te,de,Se);p(ye,W,q,Be,j(te,de,fe));var Ye=me.nestedProperty(W,Be),et=me.nestedProperty(W,he);et.set(Ye.get()),Ye.set(null),re=!0}}}else{var Qe=me.nestedProperty(W,Se);Qe.set(te)}}}function Y(V,W){return v.getLayoutValObject(V,me.nestedProperty({},W).parts)}function N(V,W){return v.getTraceValObject(V,me.nestedProperty({},W).parts)}function j(V,W,q){var z;return q?Array.isArray(V)?z=q+"["+W+"]":z=q+"."+W:z=W,z}pe.validateTemplate=function(V,W){var q=me.extendDeep({},{_context:T,data:V.data,layout:V.layout}),z=q.layout||{};M(W)||(W=z.template||{});var H=W.layout,Z=W.data,ne=[];q.layout=z,q.layout.template=W,g.supplyDefaults(q);var te=q._fullLayout,Se=q._fullData,fe={};function ve(he,Be){for(var Ye in he)if(Ye.charAt(0)!=="_"&&M(he[Ye])){var et=P(Ye),Qe=[],ft;for(ft=0;ft<Be.length;ft++)Qe.push(j(he,Ye,Be[ft])),et!==Ye&&Qe.push(j(he,et,Be[ft]));for(ft=0;ft<Qe.length;ft++)fe[Qe[ft]]=1;ve(he[Ye],Qe)}}function xe(he,Be){for(var Ye in he)if(Ye.indexOf("defaults")===-1&&M(he[Ye])){var et=j(he,Ye,Be);fe[et]?xe(he[Ye],et):ne.push({code:"unused",path:et})}}if(M(H)?(ve(te,["layout"]),xe(H,"layout")):ne.push({code:"layout"}),!M(Z))ne.push({code:"data"});else{for(var re={},de,be=0;be<Se.length;be++){var Te=Se[be];de=Te.type,re[de]=(re[de]||0)+1,Te._fullInput._template||ne.push({code:"missing",index:Te.index,traceType:de})}for(de in Z){var ye=Z[de].length,De=re[de]||0;ye>De?ne.push({code:"unused",traceType:de,templateCount:ye,dataCount:De}):De>ye&&ne.push({code:"reused",traceType:de,templateCount:ye,dataCount:De})}}function Ue(he,Be){for(var Ye in he)if(Ye.charAt(0)!=="_"){var et=he[Ye],Qe=j(he,Ye,Be);M(et)?(Array.isArray(he)&&et._template===!1&&et.templateitemname&&ne.push({code:"missing",path:Qe,templateitemname:et.templateitemname}),Ue(et,Qe)):Array.isArray(et)&&ee(et)&&Ue(et,Qe)}}if(Ue({data:Se,layout:te},""),ne.length)return ne.map(G)};function ee(V){for(var W=0;W<V.length;W++)if(M(V[W]))return!0}function G(V){var W;switch(V.code){case"data":W="The template has no key data.";break;case"layout":W="The template has no key layout.";break;case"missing":V.path?W="There are no templates for item "+V.path+" with name "+V.templateitemname:W="There are no templates for trace "+V.index+", of type "+V.traceType+".";break;case"unused":V.path?W="The template item at "+V.path+" was not used in constructing the plot.":V.dataCount?W="Some of the templates of type "+V.traceType+" were not used. The template has "+V.templateCount+" traces, the data only has "+V.dataCount+" of this type.":W="The template has "+V.templateCount+" traces of type "+V.traceType+" but there are none in the data.";break;case"reused":W="Some of the templates of type "+V.traceType+" were used more than once. The template has "+V.templateCount+" traces, the data has "+V.dataCount+" of this type.";break}return V.msg=W,V}}}),T2=a({"src/plot_api/index.js"(pe){var me=K_();pe._doPlot=me._doPlot,pe.newPlot=me.newPlot,pe.restyle=me.restyle,pe.relayout=me.relayout,pe.redraw=me.redraw,pe.update=me.update,pe._guiRestyle=me._guiRestyle,pe._guiRelayout=me._guiRelayout,pe._guiUpdate=me._guiUpdate,pe._storeDirectGUIEdit=me._storeDirectGUIEdit,pe.react=me.react,pe.extendTraces=me.extendTraces,pe.prependTraces=me.prependTraces,pe.addTraces=me.addTraces,pe.deleteTraces=me.deleteTraces,pe.moveTraces=me.moveTraces,pe.purge=me.purge,pe.addFrames=me.addFrames,pe.deleteFrames=me.deleteFrames,pe.animate=me.animate,pe.setPlotConfig=me.setPlotConfig;var M=u0().getGraphDiv,v=lx().eraseActiveShape;pe.deleteActiveShape=function(E){return v(M(E))},pe.toImage=wg(),pe.validate=J_(),pe.downloadImage=ey();var g=t_();pe.makeTemplate=g.makeTemplate,pe.validateTemplate=g.validateTemplate}}),E2=a({"src/traces/scatter/xy_defaults.js"(pe,me){var M=o0(),v=jp();me.exports=function(E,S,T,C){var P=C("x"),p=C("y"),Y,N=v.getComponentMethod("calendars","handleTraceDefaults");if(N(E,S,["x","y"],T),P){var j=M.minRowLength(P);p?Y=Math.min(j,M.minRowLength(p)):(Y=j,C("y0"),C("dy"))}else{if(!p)return 0;Y=M.minRowLength(p),C("x0"),C("dx")}return S._length=Y,Y}}}),py=a({"src/traces/scatter/period_defaults.js"(pe,me){var M=o0().dateTick0,v=A(),g=v.ONEWEEK;function E(S,T){return S%g===0?M(T,1):M(T,0)}me.exports=function(T,C,P,p,Y){if(Y||(Y={x:!0,y:!0}),Y.x){var N=p("xperiod");N&&(p("xperiod0",E(N,C.xcalendar)),p("xperiodalignment"))}if(Y.y){var j=p("yperiod");j&&(p("yperiod0",E(j,C.ycalendar)),p("yperiodalignment"))}}}}),Q_=a({"src/traces/scatter/stack_defaults.js"(pe,me){var M=["orientation","groupnorm","stackgaps"];me.exports=function(g,E,S,T){var C=S._scatterStackOpts,P=T("stackgroup");if(P){var p=E.xaxis+E.yaxis,Y=C[p];Y||(Y=C[p]={});var N=Y[P],j=!1;N?N.traces.push(E):(N=Y[P]={traceIndices:[],traces:[E]},j=!0);for(var ee={orientation:E.x&&!E.y?"h":"v"},G=0;G<M.length;G++){var V=M[G],W=V+"Found";if(!N[W]){var q=g[V]!==void 0,z=V==="orientation";if((q||j)&&(N[V]=T(V,ee[V]),z&&(N.fillDflt=N[V]==="h"?"tonextx":"tonexty"),q&&(N[W]=!0,!j&&(delete N.traces[0][V],z))))for(var H=0;H<N.traces.length-1;H++){var Z=N.traces[H];Z._input.fill!==Z.fill&&(Z.fill=N.fillDflt)}}}return N}}}}),e2=a({"src/traces/scatter/marker_defaults.js"(pe,me){var M=Oe(),v=Q1().hasColorscale,g=Ey(),E=D1();me.exports=function(T,C,P,p,Y,N){var j=E.isBubble(T),ee=(T.line||{}).color,G;if(N=N||{},ee&&(P=ee),Y("marker.symbol"),Y("marker.opacity",j?.7:1),Y("marker.size"),N.noAngle||(Y("marker.angle"),N.noAngleRef||Y("marker.angleref"),N.noStandOff||Y("marker.standoff")),Y("marker.color",P),v(T,"marker")&&g(T,C,p,Y,{prefix:"marker.",cLetter:"c"}),N.noSelect||(Y("selected.marker.color"),Y("unselected.marker.color"),Y("selected.marker.size"),Y("unselected.marker.size")),N.noLine||(ee&&!Array.isArray(ee)&&C.marker.color!==ee?G=ee:j?G=M.background:G=M.defaultLine,Y("marker.line.color",G),v(T,"marker.line")&&g(T,C,p,Y,{prefix:"marker.line.",cLetter:"c"}),Y("marker.line.width",j?1:0)),j&&(Y("marker.sizeref"),Y("marker.sizemin"),Y("marker.sizemode")),N.gradient){var V=Y("marker.gradient.type");V!=="none"&&Y("marker.gradient.color")}}}}),gx=a({"src/traces/scatter/line_defaults.js"(pe,me){var M=o0().isArrayOrTypedArray,v=Q1().hasColorscale,g=Ey();me.exports=function(S,T,C,P,p,Y){Y||(Y={});var N=(S.marker||{}).color;if(N&&N._inputArray&&(N=N._inputArray),p("line.color",C),v(S,"line"))g(S,T,P,p,{prefix:"line.",cLetter:"c"});else{var j=(M(N)?!1:N)||C;p("line.color",j)}p("line.width"),Y.noDash||p("line.dash"),Y.backoff&&p("line.backoff")}}}),cb=a({"src/traces/scatter/line_shape_defaults.js"(pe,me){me.exports=function(v,g,E){var S=E("line.shape");S==="spline"&&E("line.smoothing")}}}),ub=a({"src/traces/scatter/text_defaults.js"(pe,me){var M=o0();me.exports=function(v,g,E,S,T){T=T||{},S("textposition"),M.coerceFont(S,"textfont",T.font||E.font,T),T.noSelect||(S("selected.textfont.color"),S("unselected.textfont.color"))}}}),fb=a({"src/traces/scatter/fillcolor_defaults.js"(pe,me){var M=Oe(),v=o0().isArrayOrTypedArray;function g(E){for(var S=M.interpolate(E[0][1],E[1][1],.5),T=2;T<E.length;T++){var C=M.interpolate(E[T-1][1],E[T][1],.5);S=M.interpolate(S,C,E[T-1][0]/E[T][0])}return S}me.exports=function(S,T,C,P,p){p||(p={});var Y=!1;if(T.marker){var N=T.marker.color,j=(T.marker.line||{}).color;N&&!v(N)?Y=N:j&&!v(j)&&(Y=j)}var ee;if(p.moduleHasFillgradient){var G=P("fillgradient.type");if(G!=="none"){P("fillgradient.start"),P("fillgradient.stop");var V=P("fillgradient.colorscale");V&&(ee=g(V))}}P("fillcolor",M.addOpacity((T.line||{}).color||Y||ee||C,.5))}}}),yx=a({"src/traces/scatter/defaults.js"(pe,me){var M=o0(),v=jp(),g=Jy(),E=M2(),S=D1(),T=E2(),C=py(),P=Q_(),p=e2(),Y=gx(),N=cb(),j=ub(),ee=fb(),G=o0().coercePattern;me.exports=function(W,q,z,H){function Z(de,be){return M.coerce(W,q,g,de,be)}var ne=T(W,q,H,Z);if(ne||(q.visible=!1),!!q.visible){C(W,q,H,Z),Z("xhoverformat"),Z("yhoverformat"),Z("zorder");var te=P(W,q,H,Z);H.scattermode==="group"&&q.orientation===void 0&&Z("orientation","v");var Se=!te&&ne<E.PTS_LINESONLY?"lines+markers":"lines";Z("text"),Z("hovertext"),Z("mode",Se),S.hasMarkers(q)&&p(W,q,z,H,Z,{gradient:!0}),S.hasLines(q)&&(Y(W,q,z,H,Z,{backoff:!0}),N(W,q,Z),Z("connectgaps"),Z("line.simplify")),S.hasText(q)&&(Z("texttemplate"),j(W,q,H,Z));var fe=[];(S.hasMarkers(q)||S.hasText(q))&&(Z("cliponaxis"),Z("marker.maxdisplayed"),fe.push("points")),Z("fill",te?te.fillDflt:"none"),q.fill!=="none"&&(ee(W,q,z,Z,{moduleHasFillgradient:!0}),S.hasLines(q)||N(W,q,Z),G(Z,"fillpattern",q.fillcolor,!1));var ve=(q.line||{}).color,xe=(q.marker||{}).color;(q.fill==="tonext"||q.fill==="toself")&&fe.push("fills"),Z("hoveron",fe.join("+")||"points"),q.hoveron!=="fills"&&Z("hovertemplate");var re=v.getComponentMethod("errorbars","supplyDefaults");re(W,q,ve||xe||z,{axis:"y"}),re(W,q,ve||xe||z,{axis:"x",inherit:"y"}),M.coerceSelectionMarkerOpacity(q,Z)}}}}),t2=a({"src/traces/scatter/grouping_defaults.js"(pe,me){var M=y_().getAxisGroup;me.exports=function(g,E,S,T,C){var P=E.orientation,p=E[{v:"x",h:"y"}[P]+"axis"],Y=M(S,p)+P,N=S._alignmentOpts||{},j=T("alignmentgroup"),ee=N[Y];ee||(ee=N[Y]={});var G=ee[j];G?G.traces.push(E):G=ee[j]={traces:[E],alignmentIndex:Object.keys(ee).length,offsetGroups:{}};var V=T("offsetgroup")||"",W=G.offsetGroups,q=W[V];E._offsetIndex=0,(C!=="group"||V)&&(q||(q=W[V]={offsetIndex:Object.keys(W).length}),E._offsetIndex=q.offsetIndex)}}}),A2=a({"src/traces/scatter/cross_trace_defaults.js"(pe,me){var M=o0(),v=t2(),g=Jy();me.exports=function(S,T){var C,P,p,Y=T.scattermode;function N(W){return M.coerce(P._input,P,g,W)}if(T.scattermode==="group")for(p=0;p<S.length;p++)P=S[p],P.type==="scatter"&&(C=P._input,v(C,P,T,N,Y));for(p=0;p<S.length;p++){var j=S[p];if(j.type==="scatter"){var ee=j.fill;if(!(ee==="none"||ee==="toself")&&(j.opacity=void 0,ee==="tonexty"||ee==="tonextx"))for(var G=p-1;G>=0;G--){var V=S[G];if(V.type==="scatter"&&V.xaxis===j.xaxis&&V.yaxis===j.yaxis){V.opacity=void 0;break}}}}}}}),Og=a({"src/traces/scatter/layout_defaults.js"(pe,me){var M=o0(),v=n1();me.exports=function(g,E){function S(C,P){return M.coerce(g,E,v,C,P)}var T=E.barmode==="group";E.scattermode==="group"&&S("scattergap",T?E.bargap:.2)}}}),x1=a({"src/plots/cartesian/align_period.js"(pe,me){var M=w(),v=o0(),g=v.dateTime2ms,E=v.incrementMonth,S=A(),T=S.ONEAVGMONTH;me.exports=function(P,p,Y,N){if(p.type!=="date")return{vals:N};var j=P[Y+"periodalignment"];if(!j)return{vals:N};var ee=P[Y+"period"],G;if(M(ee)){if(ee=+ee,ee<=0)return{vals:N}}else if(typeof ee=="string"&&ee.charAt(0)==="M"){var V=+ee.substring(1);if(V>0&&Math.round(V)===V)G=V;else return{vals:N}}for(var W=p.calendar,q=j==="start",z=j==="end",H=P[Y+"period0"],Z=g(H,W)||0,ne=[],te=[],Se=[],fe=N.length,ve=0;ve<fe;ve++){var xe=N[ve],re,de,be;if(G){for(re=Math.round((xe-Z)/(G*T)),be=E(Z,G*re,W);be>xe;)be=E(be,-G,W);for(;be<=xe;)be=E(be,G,W);de=E(be,-G,W)}else{for(re=Math.round((xe-Z)/ee),be=Z+re*ee;be>xe;)be-=ee;for(;be<=xe;)be+=ee;de=be-ee}ne[ve]=q?de:z?be:(de+be)/2,te[ve]=de,Se[ve]=be}return{vals:ne,starts:te,ends:Se}}}}),Rg=a({"src/traces/scatter/colorscale_calc.js"(pe,me){var M=Q1().hasColorscale,v=g2(),g=D1();me.exports=function(S,T){g.hasLines(T)&&M(T,"line")&&v(S,T,{vals:T.line.color,containerStr:"line",cLetter:"c"}),g.hasMarkers(T)&&(M(T,"marker")&&v(S,T,{vals:T.marker.color,containerStr:"marker",cLetter:"c"}),M(T,"marker.line")&&v(S,T,{vals:T.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}}}),zy=a({"src/traces/scatter/arrays_to_calcdata.js"(pe,me){var M=o0();me.exports=function(g,E){for(var S=0;S<g.length;S++)g[S].i=S;M.mergeArray(E.text,g,"tx"),M.mergeArray(E.texttemplate,g,"txt"),M.mergeArray(E.hovertext,g,"htx"),M.mergeArray(E.customdata,g,"data"),M.mergeArray(E.textposition,g,"tp"),E.textfont&&(M.mergeArrayCastPositive(E.textfont.size,g,"ts"),M.mergeArray(E.textfont.color,g,"tc"),M.mergeArray(E.textfont.family,g,"tf"),M.mergeArray(E.textfont.weight,g,"tw"),M.mergeArray(E.textfont.style,g,"ty"),M.mergeArray(E.textfont.variant,g,"tv"),M.mergeArray(E.textfont.textcase,g,"tC"),M.mergeArray(E.textfont.lineposition,g,"tE"),M.mergeArray(E.textfont.shadow,g,"tS"));var T=E.marker;if(T){M.mergeArrayCastPositive(T.size,g,"ms"),M.mergeArrayCastPositive(T.opacity,g,"mo"),M.mergeArray(T.symbol,g,"mx"),M.mergeArray(T.angle,g,"ma"),M.mergeArray(T.standoff,g,"mf"),M.mergeArray(T.color,g,"mc");var C=T.line;T.line&&(M.mergeArray(C.color,g,"mlc"),M.mergeArrayCastPositive(C.width,g,"mlw"));var P=T.gradient;P&&P.type!=="none"&&(M.mergeArray(P.type,g,"mgt"),M.mergeArray(P.color,g,"mgc"))}}}}),C2=a({"src/traces/scatter/calc_selection.js"(pe,me){var M=o0();me.exports=function(g,E){M.isArrayOrTypedArray(E.selectedpoints)&&M.tagSelected(g,E)}}}),r2=a({"src/traces/scatter/calc.js"(pe,me){var M=w(),v=o0(),g=g1(),E=x1(),S=A().BADNUM,T=D1(),C=Rg(),P=zy(),p=C2();function Y(W,q){var z=W._fullLayout,H=q._xA=g.getFromId(W,q.xaxis||"x","x"),Z=q._yA=g.getFromId(W,q.yaxis||"y","y"),ne=H.makeCalcdata(q,"x"),te=Z.makeCalcdata(q,"y"),Se=E(q,H,"x",ne),fe=E(q,Z,"y",te),ve=Se.vals,xe=fe.vals,re=q._length,de=new Array(re),be=q.ids,Te=V(q,z,H,Z),ye=!1,De,Ue,he,Be,Ye,et;ee(z,q);var Qe="x",ft="y",mn;if(Te)v.pushUnique(Te.traceIndices,q.index),De=Te.orientation==="v",De?(ft="s",mn="x"):(Qe="s",mn="y"),Ye=Te.stackgaps==="interpolate";else{var ta=j(q,re);N(W,q,H,Z,ve,xe,ta)}var Do=!!q.xperiodalignment,Ae=!!q.yperiodalignment;for(Ue=0;Ue<re;Ue++){var ke=de[Ue]={},ge=M(ve[Ue]),Ce=M(xe[Ue]);ge&&Ce?(ke[Qe]=ve[Ue],ke[ft]=xe[Ue],Do&&(ke.orig_x=ne[Ue],ke.xEnd=Se.ends[Ue],ke.xStart=Se.starts[Ue]),Ae&&(ke.orig_y=te[Ue],ke.yEnd=fe.ends[Ue],ke.yStart=fe.starts[Ue])):Te&&(De?ge:Ce)?(ke[mn]=De?ve[Ue]:xe[Ue],ke.gap=!0,Ye?(ke.s=S,ye=!0):ke.s=0):ke[Qe]=ke[ft]=S,be&&(ke.id=String(be[Ue]))}if(P(de,q),C(W,q),p(de,q),Te){for(Ue=0;Ue<de.length;)de[Ue][mn]===S?de.splice(Ue,1):Ue++;if(v.sort(de,function(ce,Me){return ce[mn]-Me[mn]||ce.i-Me.i}),ye){for(Ue=0;Ue<de.length-1&&de[Ue].gap;)Ue++;for(et=de[Ue].s,et||(et=de[Ue].s=0),he=0;he<Ue;he++)de[he].s=et;for(Be=de.length-1;Be>Ue&&de[Be].gap;)Be--;for(et=de[Be].s,he=de.length-1;he>Be;he--)de[he].s=et;for(;Ue<Be;)if(Ue++,de[Ue].gap){for(he=Ue+1;de[he].gap;)he++;for(var Je=de[Ue-1][mn],Re=de[Ue-1].s,Q=(de[he].s-Re)/(de[he][mn]-Je);Ue<he;)de[Ue].s=Re+(de[Ue][mn]-Je)*Q,Ue++}}}return de}function N(W,q,z,H,Z,ne,te){var Se=q._length,fe=W._fullLayout,ve=z._id,xe=H._id,re=fe._firstScatter[G(q)]===q.uid,de=(V(q,fe,z,H)||{}).orientation,be=q.fill;z._minDtick=0,H._minDtick=0;var Te={padded:!0},ye={padded:!0};te&&(Te.ppad=ye.ppad=te);var De=Se<2||Z[0]!==Z[Se-1]||ne[0]!==ne[Se-1];De&&(be==="tozerox"||be==="tonextx"&&(re||de==="h"))?Te.tozero=!0:!(q.error_y||{}).visible&&(be==="tonexty"||be==="tozeroy"||!T.hasMarkers(q)&&!T.hasText(q))&&(Te.padded=!1,Te.ppad=0),De&&(be==="tozeroy"||be==="tonexty"&&(re||de==="v"))?ye.tozero=!0:(be==="tonextx"||be==="tozerox")&&(ye.padded=!1),ve&&(q._extremes[ve]=g.findExtremes(z,Z,Te)),xe&&(q._extremes[xe]=g.findExtremes(H,ne,ye))}function j(W,q){if(T.hasMarkers(W)){var z=W.marker,H=1.6*(W.marker.sizeref||1),Z;if(W.marker.sizemode==="area"?Z=function(ve){return Math.max(Math.sqrt((ve||0)/H),3)}:Z=function(ve){return Math.max((ve||0)/H,3)},v.isArrayOrTypedArray(z.size)){var ne={type:"linear"};g.setConvert(ne);for(var te=ne.makeCalcdata(W.marker,"size"),Se=new Array(q),fe=0;fe<q;fe++)Se[fe]=Z(te[fe]);return Se}else return Z(z.size)}}function ee(W,q){var z=G(q),H=W._firstScatter;H[z]||(H[z]=q.uid)}function G(W){var q=W.stackgroup;return W.xaxis+W.yaxis+W.type+(q?"-"+q:"")}function V(W,q,z,H){var Z=W.stackgroup;if(Z){var ne=q._scatterStackOpts[z._id+H._id][Z],te=ne.orientation==="v"?H:z;if(te.type==="linear"||te.type==="log")return ne}}me.exports={calc:Y,calcMarkerSize:j,calcAxisExpansion:N,setFirstScatter:ee,getStackOpts:V}}}),R2=a({"src/traces/bar/sieve.js"(pe,me){me.exports=v;var M=o0().distinctVals;function v(g,E){this.traces=g,this.sepNegVal=E.sepNegVal,this.overlapNoMerge=E.overlapNoMerge;for(var S=1/0,T=E.posAxis._id.charAt(0),C=[],P=0;P<g.length;P++){for(var p=g[P],Y=0;Y<p.length;Y++){var N=p[Y],j=N.p;j===void 0&&(j=N[T]),j!==void 0&&C.push(j)}p[0]&&p[0].width1&&(S=Math.min(p[0].width1,S))}this.positions=C;var ee=M(C);this.distinctPositions=ee.vals,ee.vals.length===1&&S!==1/0?this.minDiff=S:this.minDiff=Math.min(ee.minDiff,S);var G=(E.posAxis||{}).type;(G==="category"||G==="multicategory")&&(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}v.prototype.put=function(E,S,T){var C=this.getLabel(E,S,T),P=this.bins[C]||0;return this.bins[C]=P+T,P},v.prototype.get=function(E,S,T){var C=this.getLabel(E,S,T);return this.bins[C]||0},v.prototype.getLabel=function(E,S,T){var C=T<0&&this.sepNegVal?"v":"^",P=this.overlapNoMerge?E:Math.round(E/this.binWidth);return C+P+"g"+S}}}),a2=a({"src/traces/bar/cross_trace_calc.js"(pe,me){var M=w(),v=o0().isArrayOrTypedArray,g=A().BADNUM,E=jp(),S=g1(),T=y_().getAxisGroup,C=R2();function P(de,be){for(var Te=be.xaxis,ye=be.yaxis,De=de._fullLayout,Ue=de._fullData,he=de.calcdata,Be=[],Ye=[],et=0;et<Ue.length;et++){var Qe=Ue[et];if(Qe.visible===!0&&E.traceIs(Qe,"bar")&&Qe.xaxis===Te._id&&Qe.yaxis===ye._id&&(Qe.orientation==="h"?Be.push(he[et]):Ye.push(he[et]),Qe._computePh))for(var ft=de.calcdata[et],mn=0;mn<ft.length;mn++)typeof ft[mn].ph0=="function"&&(ft[mn].ph0=ft[mn].ph0()),typeof ft[mn].ph1=="function"&&(ft[mn].ph1=ft[mn].ph1())}var ta={xCat:Te.type==="category"||Te.type==="multicategory",yCat:ye.type==="category"||ye.type==="multicategory",mode:De.barmode,norm:De.barnorm,gap:De.bargap,groupgap:De.bargroupgap};p(de,Te,ye,Ye,ta),p(de,ye,Te,Be,ta)}function p(de,be,Te,ye,De){if(ye.length){var Ue,he,Be,Ye,et;switch(j(Te,ye),De.mode){case"overlay":ee(de,be,Te,ye,De);break;case"group":for(Ue=[],he=[],Be=0;Be<ye.length;Be++)Ye=ye[Be],et=Ye[0].trace,et.offset===void 0?he.push(Ye):Ue.push(Ye);he.length&&G(de,be,Te,he,De),Ue.length&&ee(de,be,Te,Ue,De);break;case"stack":case"relative":for(Ue=[],he=[],Be=0;Be<ye.length;Be++)Ye=ye[Be],et=Ye[0].trace,et.base===void 0?he.push(Ye):Ue.push(Ye);N(he),he.length&&V(de,be,Te,he,De),Ue.length&&ee(de,be,Te,Ue,De);break}Y(ye),xe(ye,be)}}function Y(de){var be,Te,ye,De,Ue,he,Be;for(be=0;be<de.length;be++)Te=de[be],ye=Te[0].trace,De=Te[0].t,De.cornerradiusvalue===void 0&&(Ue=ye.marker?ye.marker.cornerradius:void 0,Ue!==void 0&&(he=M(Ue)?+Ue:+Ue.slice(0,-1),Be=M(Ue)?"px":"%",De.cornerradiusvalue=he,De.cornerradiusform=Be))}function N(de){if(!(de.length<2)){var be,Te,ye,De,Ue,he,Be;for(be=0;be<de.length&&(Te=de[be],ye=Te[0].trace,Ue=ye.marker?ye.marker.cornerradius:void 0,Ue===void 0);be++);if(Ue!==void 0)for(he=M(Ue)?+Ue:+Ue.slice(0,-1),Be=M(Ue)?"px":"%",be=0;be<de.length;be++)Te=de[be],De=Te[0].t,De.cornerradiusvalue=he,De.cornerradiusform=Be}}function j(de,be){var Te,ye;for(Te=0;Te<be.length;Te++){var De=be[Te],Ue=De[0].trace,he=Ue.type==="funnel"?Ue._base:Ue.base,Be,Ye=Ue.orientation==="h"?Ue.xcalendar:Ue.ycalendar,et=de.type==="category"||de.type==="multicategory"?function(){return null}:de.d2c;if(v(he)){for(ye=0;ye<Math.min(he.length,De.length);ye++)Be=et(he[ye],0,Ye),M(Be)?(De[ye].b=+Be,De[ye].hasB=1):De[ye].b=0;for(;ye<De.length;ye++)De[ye].b=0}else{Be=et(he,0,Ye);var Qe=M(Be);for(Be=Qe?Be:0,ye=0;ye<De.length;ye++)De[ye].b=Be,Qe&&(De[ye].hasB=1)}}}function ee(de,be,Te,ye,De){for(var Ue=0;Ue<ye.length;Ue++){var he=ye[Ue],Be=new C([he],{posAxis:be,sepNegVal:!1,overlapNoMerge:!De.norm});W(de,be,Be,De),De.norm?(te(Be),fe(Te,Be,De)):Z(Te,Be)}}function G(de,be,Te,ye,De){var Ue=new C(ye,{posAxis:be,sepNegVal:!1,overlapNoMerge:!De.norm});W(de,be,Ue,De),Se(Ue,be),De.norm?(te(Ue),fe(Te,Ue,De)):Z(Te,Ue)}function V(de,be,Te,ye,De){var Ue=new C(ye,{posAxis:be,sepNegVal:De.mode==="relative",overlapNoMerge:!(De.norm||De.mode==="stack"||De.mode==="relative")});W(de,be,Ue,De),ne(Te,Ue,De);for(var he=0;he<ye.length;he++)for(var Be=ye[he],Ye=Be[0].t.offsetindex,et=0;et<Be.length;et++){var Qe=Be[et];if(Qe.s!==g){var ft=Qe.b+Qe.s===Ue.get(Qe.p,Ye,Qe.s);ft&&(Qe._outmost=!0)}}De.norm&&fe(Te,Ue,De)}function W(de,be,Te,ye){var De=de._fullLayout,Ue=Te.positions,he=Te.distinctPositions,Be=Te.minDiff,Ye=Te.traces,et=Ye.length,Qe=Ue.length!==he.length,ft=Be*(1-ye.gap),mn,ta,Do,Ae;if(be._id==="angularaxis")mn=ft,ta=mn*(1-(ye.groupgap||0)),Do=-ta/2;else{var ke=T(De,be._id)+Ye[0][0].trace.orientation;Ae=De._alignmentOpts[ke]||{}}for(var ge=0;ge<et;ge++){var Ce=Ye[ge],Je=Ce[0].trace;if(be._id!=="angularaxis"){var Re=Ae[Je.alignmentgroup]||{},Q=Object.keys(Re.offsetGroups||{}).length;Q?mn=ft/Q:mn=Qe?ft/et:ft,ta=mn*(1-(ye.groupgap||0)),Q?Do=((2*Je._offsetIndex+1-Q)*mn-ta)/2:Do=Qe?((2*ge+1-et)*mn-ta)/2:-ta/2}var ce=Ce[0].t;ce.barwidth=ta,ce.offsetindex=Je._offsetIndex||0,ce.poffset=Do,ce.bargroupwidth=ft,ce.bardelta=Be}Te.binWidth=Ye[0][0].t.barwidth/100,q(Te),z(be,Te),be._id==="angularaxis"?H(be,Te):H(be,Te,Qe)}function q(de){var be=de.traces,Te,ye;for(Te=0;Te<be.length;Te++){var De=be[Te],Ue=De[0],he=Ue.trace,Be=Ue.t,Ye=he._offset||he.offset,et=Be.poffset,Qe;if(v(Ye)){for(Qe=Array.prototype.slice.call(Ye,0,De.length),ye=0;ye<Qe.length;ye++)M(Qe[ye])||(Qe[ye]=et);for(ye=Qe.length;ye<De.length;ye++)Qe.push(et);Be.poffset=Qe}else Ye!==void 0&&(Be.poffset=Ye);var ft=he._width||he.width,mn=Be.barwidth;if(v(ft)){var ta=Array.prototype.slice.call(ft,0,De.length);for(ye=0;ye<ta.length;ye++)M(ta[ye])||(ta[ye]=mn);for(ye=ta.length;ye<De.length;ye++)ta.push(mn);if(Be.barwidth=ta,Ye===void 0){for(Qe=[],ye=0;ye<De.length;ye++)Qe.push(et+(mn-ta[ye])/2);Be.poffset=Qe}}else ft!==void 0&&(Be.barwidth=ft,Ye===void 0&&(Be.poffset=et+(mn-ft)/2))}}function z(de,be){for(var Te=be.traces,ye=re(de),De=0;De<Te.length;De++)for(var Ue=Te[De],he=Ue[0].t,Be=he.poffset,Ye=v(Be),et=he.barwidth,Qe=v(et),ft=0;ft<Ue.length;ft++){var mn=Ue[ft],ta=mn.w=Qe?et[ft]:et;mn.p===void 0&&(mn.p=mn[ye],mn["orig_"+ye]=mn[ye]);var Do=(Ye?Be[ft]:Be)+ta/2;mn[ye]=mn.p+Do}}function H(de,be,Te){var ye=be.traces,De=be.minDiff,Ue=De/2;S.minDtick(de,be.minDiff,be.distinctPositions[0],Te);for(var he=0;he<ye.length;he++){var Be=ye[he],Ye=Be[0],et=Ye.trace,Qe=[],ft,mn,ta,Do;for(Do=0;Do<Be.length;Do++)ft=Be[Do],mn=ft.p-Ue,ta=ft.p+Ue,Qe.push(mn,ta);if(et.width||et.offset){var Ae=Ye.t,ke=Ae.poffset,ge=Ae.barwidth,Ce=v(ke),Je=v(ge);for(Do=0;Do<Be.length;Do++){ft=Be[Do];var Re=Ce?ke[Do]:ke,Q=Je?ge[Do]:ge;mn=ft.p+Re,ta=mn+Q,Qe.push(mn,ta)}}et._extremes[de._id]=S.findExtremes(de,Qe,{padded:!1})}}function Z(de,be){for(var Te=be.traces,ye=re(de),De=0;De<Te.length;De++){for(var Ue=Te[De],he=Ue[0].trace,Be=he.type==="scatter",Ye=he.orientation==="v",et=[],Qe=!1,ft=0;ft<Ue.length;ft++){var mn=Ue[ft],ta=Be?0:mn.b,Do=Be?Ye?mn.y:mn.x:ta+mn.s;mn[ye]=Do,et.push(Do),mn.hasB&&et.push(ta),(!mn.hasB||!mn.b)&&(Qe=!0)}he._extremes[de._id]=S.findExtremes(de,et,{tozero:Qe,padded:!0})}}function ne(de,be,Te){var ye=re(de),De=be.traces,Ue,he,Be,Ye,et,Qe,ft;for(Ye=0;Ye<De.length;Ye++)if(Ue=De[Ye],he=Ue[0].trace,he.type==="funnel")for(ft=Ue[0].t.offsetindex,et=0;et<Ue.length;et++)Qe=Ue[et],Qe.s!==g&&be.put(Qe.p,ft,-.5*Qe.s);for(Ye=0;Ye<De.length;Ye++){Ue=De[Ye],he=Ue[0].trace,Be=he.type==="funnel",ft=he.type==="barpolar"?0:Ue[0].t.offsetindex;var mn=[];for(et=0;et<Ue.length;et++)if(Qe=Ue[et],Qe.s!==g){var ta;Be?ta=Qe.s:ta=Qe.s+Qe.b;var Do=be.put(Qe.p,ft,ta),Ae=Do+ta;Qe.b=Do,Qe[ye]=Ae,Te.norm||(mn.push(Ae),Qe.hasB&&mn.push(Do))}Te.norm||(he._extremes[de._id]=S.findExtremes(de,mn,{tozero:!0,padded:!0}))}}function te(de){for(var be=de.traces,Te=0;Te<be.length;Te++)for(var ye=be[Te],De=ye[0].t.offsetindex,Ue=0;Ue<ye.length;Ue++){var he=ye[Ue];he.s!==g&&de.put(he.p,De,he.b+he.s)}}function Se(de,be){for(var Te=de.traces,ye=0;ye<Te.length;ye++){var De=Te[ye],Ue=De[0].trace,he=De[0].t.offsetindex;if(Ue.base===void 0)for(var Be=new C([De],{posAxis:be,sepNegVal:!0,overlapNoMerge:!0}),Ye=0;Ye<De.length;Ye++){var et=De[Ye];if(et.p!==g){var Qe=Be.put(et.p,he,et.b+et.s);Qe&&(et.b=Qe)}}}}function fe(de,be,Te){var ye=be.traces,De=re(de),Ue=Te.norm==="fraction"?1:100,he=Ue/1e9,Be=de.l2c(de.c2l(0)),Ye=Te.mode==="stack"?Ue:Be;function et(ce){return M(de.c2l(ce))&&(ce<Be-he||ce>Ye+he||!M(Be))}for(var Qe=0;Qe<ye.length;Qe++){for(var ft=ye[Qe],mn=ft[0].t.offsetindex,ta=ft[0].trace,Do=[],Ae=!1,ke=!1,ge=0;ge<ft.length;ge++){var Ce=ft[ge];if(Ce.s!==g){var Je=Math.abs(Ue/be.get(Ce.p,mn,Ce.s));Ce.b*=Je,Ce.s*=Je;var Re=Ce.b,Q=Re+Ce.s;Ce[De]=Q,Do.push(Q),ke=ke||et(Q),Ce.hasB&&(Do.push(Re),ke=ke||et(Re)),(!Ce.hasB||!Ce.b)&&(Ae=!0)}}ta._extremes[de._id]=S.findExtremes(de,Do,{tozero:Ae,padded:ke})}}function ve(de,be,Te,ye){for(var De=re(ye),Ue=0;Ue<de.length;Ue++)for(var he=de[Ue],Be=0;Be<he.length;Be++){var Ye=he[Be],et=Ye[De];Ye._sMin=be[et],Ye._sMax=Te[et]}}function xe(de,be){var Te=re(be),ye={},De,Ue,he,Be=1/0,Ye=-1/0;for(De=0;De<de.length;De++)for(he=de[De],Ue=0;Ue<he.length;Ue++){var et=he[Ue].p;M(et)&&(Be=Math.min(Be,et),Ye=Math.max(Ye,et))}var Qe=1e4/(Ye-Be),ft=ye.round=function(Le){return String(Math.round(Qe*(Le-Be)))},mn={},ta={},Do=de.some(function(Le){var tt=Le[0].trace;return"marker"in tt&&tt.marker.cornerradius});for(De=0;De<de.length;De++){he=de[De],he[0].t.extents=ye;var Ae=he[0].t.poffset,ke=v(Ae);for(Ue=0;Ue<he.length;Ue++){var ge=he[Ue],Ce=ge[Te]-ge.w/2;if(M(Ce)){var Je=ge[Te]+ge.w/2,Re=ft(ge.p);ye[Re]?ye[Re]=[Math.min(Ce,ye[Re][0]),Math.max(Je,ye[Re][1])]:ye[Re]=[Ce,Je]}if(ge.p0=ge.p+(ke?Ae[Ue]:Ae),ge.p1=ge.p0+ge.w,ge.s0=ge.b,ge.s1=ge.s0+ge.s,Do){var Q=Math.min(ge.s0,ge.s1)||0,ce=Math.max(ge.s0,ge.s1)||0,Me=ge[Te];mn[Me]=Me in mn?Math.min(mn[Me],Q):Q,ta[Me]=Me in ta?Math.max(ta[Me],ce):ce}}}Do&&ve(de,mn,ta,be)}function re(de){return de._id.charAt(0)}me.exports={crossTraceCalc:P,setGroupPositions:p}}}),r_=a({"src/traces/scatter/cross_trace_calc.js"(pe,me){var M=r2(),v=a2().setGroupPositions;function g(T,C){for(var P=C.xaxis,p=C.yaxis,Y=T._fullLayout,N=T._fullData,j=T.calcdata,ee=[],G=[],V=0;V<N.length;V++){var W=N[V];W.visible===!0&&W.type==="scatter"&&W.xaxis===P._id&&W.yaxis===p._id&&(W.orientation==="h"?ee.push(j[V]):W.orientation==="v"&&G.push(j[V]))}var q={mode:Y.scattermode,gap:Y.scattergap};v(T,P,p,G,q),v(T,p,P,ee,q)}me.exports=function(C,P){C._fullLayout.scattermode==="group"&&g(C,P);var p=P.xaxis,Y=P.yaxis,N=p._id+Y._id,j=C._fullLayout._scatterStackOpts[N];if(j){var ee=C.calcdata,G,V,W,q,z,H,Z,ne,te,Se,fe,ve,xe,re,de;for(var be in j){Se=j[be];var Te=Se.traceIndices;if(Te.length){for(fe=Se.stackgaps==="interpolate",ve=Se.groupnorm,Se.orientation==="v"?(xe="x",re="y"):(xe="y",re="x"),de=new Array(Te.length),G=0;G<de.length;G++)de[G]=!1;H=ee[Te[0]];var ye=new Array(H.length);for(G=0;G<H.length;G++)ye[G]=H[G][xe];for(G=1;G<Te.length;G++){for(z=ee[Te[G]],V=W=0;V<z.length;V++){for(Z=z[V][xe];Z>ye[W]&&W<ye.length;W++)E(z,V,ye[W],G,de,fe,xe),V++;if(Z!==ye[W]){for(q=0;q<G;q++)E(ee[Te[q]],W,Z,q,de,fe,xe);ye.splice(W,0,Z)}W++}for(;W<ye.length;W++)E(z,V,ye[W],G,de,fe,xe),V++}var De=ye.length;for(V=0;V<H.length;V++){for(ne=H[V][re]=H[V].s,G=1;G<Te.length;G++)z=ee[Te[G]],z[0].trace._rawLength=z[0].trace._length,z[0].trace._length=De,ne+=z[V].s,z[V][re]=ne;if(ve)for(te=(ve==="fraction"?ne:ne/100)||1,G=0;G<Te.length;G++){var Ue=ee[Te[G]][V];Ue[re]/=te,Ue.sNorm=Ue.s/te}}for(G=0;G<Te.length;G++){z=ee[Te[G]];var he=z[0].trace,Be=M.calcMarkerSize(he,he._rawLength),Ye=Array.isArray(Be);if(Be&&de[G]||Ye){var et=Be;for(Be=new Array(De),V=0;V<De;V++)Be[V]=z[V].gap?0:Ye?et[z[V].i]:et}var Qe=new Array(De),ft=new Array(De);for(V=0;V<De;V++)Qe[V]=z[V].x,ft[V]=z[V].y;M.calcAxisExpansion(C,he,p,Y,Qe,ft,Be),z[0].t.orientation=Se.orientation}}}}};function E(T,C,P,p,Y,N,j){Y[p]=!0;var ee={i:null,gap:!0,s:0};if(ee[j]=P,T.splice(C,0,ee),C&&P===T[C-1][j]){var G=T[C-1];ee.s=G.s,ee.i=G.i,ee.gap=G.gap}else N&&(ee.s=S(T,C,P,j));C||(T[0].t=T[1].t,T[0].trace=T[1].trace,delete T[1].t,delete T[1].trace)}function S(T,C,P,p){var Y=T[C-1],N=T[C+1];return N?Y?Y.s+(N.s-Y.s)*(P-Y[p])/(N[p]-Y[p]):N.s:Y.s}}}),Py=a({"src/traces/scatter/line_points.js"(pe,me){var M=t1(),v=A(),g=v.BADNUM,E=v.LOG_CLIP,S=E+.5,T=E-.5,C=o0(),P=C.segmentsIntersect,p=C.constrain,Y=M2();me.exports=function(j,ee){var G=ee.trace||{},V=ee.xaxis,W=ee.yaxis,q=V.type==="log",z=W.type==="log",H=V._length,Z=W._length,ne=ee.backoff,te=G.marker,Se=ee.connectGaps,fe=ee.baseTolerance,ve=ee.shape,xe=ve==="linear",re=G.fill&&G.fill!=="none",de=[],be=Y.minTolerance,Te=j.length,ye=new Array(Te),De=0,Ue,he,Be,Ye,et,Qe,ft,mn,ta,Do,Ae,ke,ge,Ce,Je,Re;function Q(Ip){var Jp=j[Ip];if(!Jp)return!1;var m0=ee.linearized?V.l2p(Jp.x):V.c2p(Jp.x),Dp=ee.linearized?W.l2p(Jp.y):W.c2p(Jp.y);if(m0===g){if(q&&(m0=V.c2p(Jp.x,!0)),m0===g)return!1;z&&Dp===g&&(m0*=Math.abs(V._m*Z*(V._m>0?S:T)/(W._m*H*(W._m>0?S:T)))),m0*=1e3}if(Dp===g){if(z&&(Dp=W.c2p(Jp.y,!0)),Dp===g)return!1;Dp*=1e3}return[m0,Dp]}function ce(Ip,Jp,m0,Dp){var c0=m0-Ip,b0=Dp-Jp,E0=.5-Ip,gm=.5-Jp,Nm=c0*c0+b0*b0,Bm=c0*E0+b0*gm;if(Bm>0&&Bm<Nm){var xm=E0*b0-gm*c0;if(xm*xm<Nm)return!0}}var Me,Le;function tt(Ip,Jp){var m0=Ip[0]/H,Dp=Ip[1]/Z,c0=Math.max(0,-m0,m0-1,-Dp,Dp-1);return c0&&Me!==void 0&&ce(m0,Dp,Me,Le)&&(c0=0),c0&&Jp&&ce(m0,Dp,Jp[0]/H,Jp[1]/Z)&&(c0=0),(1+Y.toleranceGrowth*c0)*fe}function bt(Ip,Jp){var m0=Ip[0]-Jp[0],Dp=Ip[1]-Jp[1];return Math.sqrt(m0*m0+Dp*Dp)}var Ct=Y.maxScreensAway,yi=-H*Ct,Fl=H*(1+Ct),Yl=-Z*Ct,qp=Z*(1+Ct),Fp=[[yi,Yl,Fl,Yl],[Fl,Yl,Fl,qp],[Fl,qp,yi,qp],[yi,qp,yi,Yl]],Up,_r,gs,dr,Lo,Cp;function Hp(Ip,Jp){for(var m0=[],Dp=0,c0=0;c0<4;c0++){var b0=Fp[c0],E0=P(Ip[0],Ip[1],Jp[0],Jp[1],b0[0],b0[1],b0[2],b0[3]);E0&&(!Dp||Math.abs(E0.x-m0[0][0])>1||Math.abs(E0.y-m0[0][1])>1)&&(E0=[E0.x,E0.y],Dp&&bt(E0,Ip)<bt(m0[0],Ip)?m0.unshift(E0):m0.push(E0),Dp++)}return m0}function e0(Ip){if(Ip[0]<yi||Ip[0]>Fl||Ip[1]<Yl||Ip[1]>qp)return[p(Ip[0],yi,Fl),p(Ip[1],Yl,qp)]}function t0(Ip,Jp){if(Ip[0]===Jp[0]&&(Ip[0]===yi||Ip[0]===Fl)||Ip[1]===Jp[1]&&(Ip[1]===Yl||Ip[1]===qp))return!0}function n0(Ip,Jp){var m0=[],Dp=e0(Ip),c0=e0(Jp);return Dp&&c0&&t0(Dp,c0)||(Dp&&m0.push(Dp),c0&&m0.push(c0)),m0}function y0(Ip,Jp,m0){return function(Dp,c0){var b0=e0(Dp),E0=e0(c0),gm=[];if(b0&&E0&&t0(b0,E0))return gm;b0&&gm.push(b0),E0&&gm.push(E0);var Nm=2*C.constrain((Dp[Ip]+c0[Ip])/2,Jp,m0)-((b0||Dp)[Ip]+(E0||c0)[Ip]);if(Nm){var Bm;b0&&E0?Bm=Nm>0==b0[Ip]>E0[Ip]?b0:E0:Bm=b0||E0,Bm[Ip]+=Nm}return gm}}var h0;ve==="linear"||ve==="spline"?h0=Hp:ve==="hv"||ve==="vh"?h0=n0:ve==="hvh"?h0=y0(0,yi,Fl):ve==="vhv"&&(h0=y0(1,Yl,qp));function I0(Ip,Jp){var m0=Jp[0]-Ip[0],Dp=(Jp[1]-Ip[1])/m0,c0=(Ip[1]*Jp[0]-Jp[1]*Ip[0])/m0;return c0>0?[Dp>0?yi:Fl,qp]:[Dp>0?Fl:yi,Yl]}function Kp(Ip){var Jp=Ip[0],m0=Ip[1],Dp=Jp===ye[De-1][0],c0=m0===ye[De-1][1];if(!(Dp&&c0))if(De>1){var b0=Jp===ye[De-2][0],E0=m0===ye[De-2][1];Dp&&(Jp===yi||Jp===Fl)&&b0?E0?De--:ye[De-1]=Ip:c0&&(m0===Yl||m0===qp)&&E0?b0?De--:ye[De-1]=Ip:ye[De++]=Ip}else ye[De++]=Ip}function B0(Ip){ye[De-1][0]!==Ip[0]&&ye[De-1][1]!==Ip[1]&&Kp([gs,dr]),Kp(Ip),Lo=null,gs=dr=0}var em=C.isArrayOrTypedArray(te);function k0(Ip){if(Ip&&ne&&(Ip.i=Ue,Ip.d=j,Ip.trace=G,Ip.marker=em?te[Ip.i]:te,Ip.backoff=ne),Me=Ip[0]/H,Le=Ip[1]/Z,Up=Ip[0]<yi?yi:Ip[0]>Fl?Fl:0,_r=Ip[1]<Yl?Yl:Ip[1]>qp?qp:0,Up||_r){if(!De)ye[De++]=[Up||Ip[0],_r||Ip[1]];else if(Lo){var Jp=h0(Lo,Ip);Jp.length>1&&(B0(Jp[0]),ye[De++]=Jp[1])}else Cp=h0(ye[De-1],Ip)[0],ye[De++]=Cp;var m0=ye[De-1];Up&&_r&&(m0[0]!==Up||m0[1]!==_r)?(Lo&&(gs!==Up&&dr!==_r?Kp(gs&&dr?I0(Lo,Ip):[gs||Up,dr||_r]):gs&&dr&&Kp([gs,dr])),Kp([Up,_r])):gs-Up&&dr-_r&&Kp([Up||gs,_r||dr]),Lo=Ip,gs=Up,dr=_r}else Lo&&B0(h0(Lo,Ip)[0]),ye[De++]=Ip}for(Ue=0;Ue<Te;Ue++)if(he=Q(Ue),!!he){for(De=0,Lo=null,k0(he),Ue++;Ue<Te;Ue++){if(Ye=Q(Ue),!Ye){if(Se)continue;break}if(!xe||!ee.simplify){k0(Ye);continue}var J0=Q(Ue+1);if(Do=bt(Ye,he),!(!(re&&(De===0||De===Te-1))&&Do<tt(Ye,J0)*be)){for(mn=[(Ye[0]-he[0])/Do,(Ye[1]-he[1])/Do],et=he,Ae=Do,ke=Ce=Je=0,ft=!1,Be=Ye,Ue++;Ue<j.length;Ue++){if(Qe=J0,J0=Q(Ue+1),!Qe){if(Se)continue;break}if(ta=[Qe[0]-he[0],Qe[1]-he[1]],Re=ta[0]*mn[1]-ta[1]*mn[0],Ce=Math.min(Ce,Re),Je=Math.max(Je,Re),Je-Ce>tt(Qe,J0))break;Be=Qe,ge=ta[0]*mn[0]+ta[1]*mn[1],ge>Ae?(Ae=ge,Ye=Qe,ft=!1):ge<ke&&(ke=ge,et=Qe,ft=!0)}if(ft?(k0(Ye),Be!==et&&k0(et)):(et!==he&&k0(et),Be!==Ye&&k0(Ye)),k0(Be),Ue>=j.length||!Qe)break;k0(Qe),he=Qe}}Lo&&Kp([gs||Lo[0],dr||Lo[1]]),de.push(ye.slice(0,De))}var vs=ve.slice(ve.length-1);if(ne&&vs!=="h"&&vs!=="v"){for(var jl=!1,zl=-1,Ve=[],pn=0;pn<de.length;pn++)for(var ci=0;ci<de[pn].length-1;ci++){var _n=de[pn][ci],Tp=de[pn][ci+1],Sp=M.applyBackoff(Tp,_n);(Sp[0]!==Tp[0]||Sp[1]!==Tp[1])&&(jl=!0),Ve[zl+1]||(zl++,Ve[zl]=[_n,[Sp[0],Sp[1]]])}return jl?Ve:de}return de}}}),n2=a({"src/traces/scatter/link_traces.js"(pe,me){var M={tonextx:1,tonexty:1,tonext:1};me.exports=function(g,E,S){var T,C,P,p,Y,N={},j=!1,ee=-1,G=0,V=-1;for(C=0;C<S.length;C++)T=S[C][0].trace,P=T.stackgroup||"",P?P in N?Y=N[P]:(Y=N[P]=G,G++):T.fill in M&&V>=0?Y=V:(Y=V=G,G++),Y<ee&&(j=!0),T._groupIndex=ee=Y;var W=S.slice();j&&W.sort(function(z,H){var Z=z[0].trace,ne=H[0].trace;return Z._groupIndex-ne._groupIndex||Z.index-ne.index});var q={};for(C=0;C<W.length;C++)T=W[C][0].trace,P=T.stackgroup||"",T.visible===!0?(T._nexttrace=null,T.fill in M&&(p=q[P],T._prevtrace=p||null,p&&(p._nexttrace=T)),T._ownfill=T.fill&&(T.fill.substr(0,6)==="tozero"||T.fill==="toself"||T.fill.substr(0,2)==="to"&&!T._prevtrace),q[P]=T):T._prevtrace=T._nexttrace=T._ownfill=null;return W}}}),a_=a({"src/traces/scatter/plot.js"(pe,me){var M=f(),v=jp(),g=o0(),E=g.ensureSingle,S=g.identity,T=t1(),C=D1(),P=Py(),p=n2(),Y=__().tester;me.exports=function(V,W,q,z,H,Z){var ne,te,Se=!H,fe=!!H&&H.duration>0,ve=p(V,W,q);if(ne=z.selectAll("g.trace").data(ve,function(re){return re[0].trace.uid}),ne.enter().append("g").attr("class",function(re){return"trace scatter trace"+re[0].trace.uid}).style("stroke-miterlimit",2),ne.order(),N(V,ne,W),fe){Z&&(te=Z());var xe=M.transition().duration(H.duration).ease(H.easing).each("end",function(){te&&te()}).each("interrupt",function(){te&&te()});xe.each(function(){z.selectAll("g.trace").each(function(re,de){j(V,de,W,re,ve,this,H)})})}else ne.each(function(re,de){j(V,de,W,re,ve,this,H)});Se&&ne.exit().remove(),z.selectAll("path:not([d])").remove()};function N(G,V,W){V.each(function(q){var z=E(M.select(this),"g","fills");T.setClipUrl(z,W.layerClipId,G);var H=q[0].trace,Z=[];H._ownfill&&Z.push("_ownFill"),H._nexttrace&&Z.push("_nextFill");var ne=z.selectAll("g").data(Z,S);ne.enter().append("g"),ne.exit().each(function(te){H[te]=null}).remove(),ne.order().each(function(te){H[te]=E(M.select(this),"path","js-fill")})})}function j(G,V,W,q,z,H,Z){var ne=G._context.staticPlot,te;ee(G,V,W,q,z);var Se=!!Z&&Z.duration>0;function fe(Kp){return Se?Kp.transition():Kp}var ve=W.xaxis,xe=W.yaxis,re=q[0].trace,de=re.line,be=M.select(H),Te=E(be,"g","errorbars"),ye=E(be,"g","lines"),De=E(be,"g","points"),Ue=E(be,"g","text");if(v.getComponentMethod("errorbars","plot")(G,Te,W,Z),re.visible!==!0)return;fe(be).style("opacity",re.opacity);var he,Be,Ye=re.fill.charAt(re.fill.length-1);Ye!=="x"&&Ye!=="y"&&(Ye="");var et,Qe;Ye==="y"?(et=1,Qe=xe.c2p(0,!0)):Ye==="x"&&(et=0,Qe=ve.c2p(0,!0)),q[0][W.isRangePlot?"nodeRangePlot3":"node3"]=be;var ft="",mn=[],ta=re._prevtrace,Do=null,Ae=null;ta&&(ft=ta._prevRevpath||"",Be=ta._nextFill,mn=ta._ownPolygons,Do=ta._fillsegments,Ae=ta._fillElement);var ke,ge,Ce="",Je="",Re,Q,ce,Me,Le,tt,bt=[];re._polygons=[];var Ct=[],yi=[],Fl=g.noop;if(he=re._ownFill,C.hasLines(re)||re.fill!=="none"){Be&&Be.datum(q),["hv","vh","hvh","vhv"].indexOf(de.shape)!==-1?(Re=T.steps(de.shape),Q=T.steps(de.shape.split("").reverse().join(""))):de.shape==="spline"?Re=Q=function(Kp){var B0=Kp[Kp.length-1];return Kp.length>1&&Kp[0][0]===B0[0]&&Kp[0][1]===B0[1]?T.smoothclosed(Kp.slice(1),de.smoothing):T.smoothopen(Kp,de.smoothing)}:Re=Q=function(Kp){return"M"+Kp.join("L")},ce=function(Kp){return Q(Kp.reverse())},yi=P(q,{xaxis:ve,yaxis:xe,trace:re,connectGaps:re.connectgaps,baseTolerance:Math.max(de.width||1,3)/4,shape:de.shape,backoff:de.backoff,simplify:de.simplify,fill:re.fill}),Ct=new Array(yi.length);var Yl=0;for(te=0;te<yi.length;te++){var qp,Fp=yi[te];!qp||!Ye?(qp=Fp.slice(),Ct[Yl]=qp,Yl++):qp.push.apply(qp,Fp)}re._fillElement=null,re._fillExclusionElement=Ae,re._fillsegments=Ct.slice(0,Yl),Ct=re._fillsegments,yi.length&&(Me=yi[0][0].slice(),Le=yi[yi.length-1],tt=Le[Le.length-1].slice()),Fl=function(Kp){return function(B0){if(ke=Re(B0),ge=ce(B0),Ce?Ye?(Ce+="L"+ke.substr(1),Je=ge+("L"+Je.substr(1))):(Ce+="Z"+ke,Je=ge+"Z"+Je):(Ce=ke,Je=ge),C.hasLines(re)){var em=M.select(this);if(em.datum(q),Kp)fe(em.style("opacity",0).attr("d",ke).call(T.lineGroupStyle)).style("opacity",1);else{var k0=fe(em);k0.attr("d",ke),T.singleLineStyle(q,k0)}}}}}var Up=ye.selectAll(".js-line").data(yi);fe(Up.exit()).style("opacity",0).remove(),Up.each(Fl(!1)),Up.enter().append("path").classed("js-line",!0).style("vector-effect",ne?"none":"non-scaling-stroke").call(T.lineGroupStyle).each(Fl(!0)),T.setClipUrl(Up,W.layerClipId,G);function _r(Kp){fe(Kp).attr("d","M0,0Z")}var gs=function(){var Kp=new Array(Ct.length);for(te=0;te<Ct.length;te++)Kp[te]=Y(Ct[te]);return Kp},dr=function(Kp){var B0,em;if(!Kp||Kp.length===0)for(B0=new Array(Ct.length),em=0;em<Ct.length;em++){var k0=Ct[em][0].slice(),J0=Ct[em][Ct[em].length-1].slice();k0[et]=J0[et]=Qe;var vs=[J0,k0],jl=vs.concat(Ct[em]);B0[em]=Y(jl)}else{for(B0=new Array(Kp.length-1+Ct.length),em=0;em<Kp.length-1;em++)B0[em]=Y(Kp[em]);var zl=Kp[Kp.length-1].slice();for(zl.reverse(),em=0;em<Ct.length;em++)B0[Kp.length-1+em]=Y(Ct[em].concat(zl))}return B0};yi.length?(he?(he.datum(q),Me&&tt&&(Ye?(Me[et]=tt[et]=Qe,fe(he).attr("d","M"+tt+"L"+Me+"L"+Ce.substr(1)).call(T.singleFillStyle,G),bt=dr(null)):(fe(he).attr("d",Ce+"Z").call(T.singleFillStyle,G),bt=gs())),re._polygons=bt,re._fillElement=he):Be&&(re.fill.substr(0,6)==="tonext"&&Ce&&ft?(re.fill==="tonext"?(fe(Be).attr("d",Ce+"Z"+ft+"Z").call(T.singleFillStyle,G),bt=gs(),re._polygons=bt.concat(mn)):(fe(Be).attr("d",Ce+"L"+ft.substr(1)+"Z").call(T.singleFillStyle,G),bt=dr(Do),re._polygons=bt),re._fillElement=Be):_r(Be)),re._prevRevpath=Je):(he?_r(he):Be&&_r(Be),re._prevRevpath=null),re._ownPolygons=bt;function Lo(Kp){return Kp.filter(function(B0){return!B0.gap&&B0.vis})}function Cp(Kp){return Kp.filter(function(B0){return B0.vis})}function Hp(Kp){return Kp.filter(function(B0){return!B0.gap})}function e0(Kp){return Kp.id}function t0(Kp){if(Kp.ids)return e0}function n0(){return!1}function y0(Kp,B0,em){var k0,J0,vs,jl=em[0].trace,zl=C.hasMarkers(jl),Ve=C.hasText(jl),pn=t0(jl),ci=n0,_n=n0;if(zl||Ve){var Tp=S,Sp=jl.stackgroup,Ip=Sp&&G._fullLayout._scatterStackOpts[ve._id+xe._id][Sp].stackgaps==="infer zero";jl.marker.maxdisplayed||jl._needsCull?Tp=Ip?Cp:Lo:Sp&&!Ip&&(Tp=Hp),zl&&(ci=Tp),Ve&&(_n=Tp)}J0=Kp.selectAll("path.point"),k0=J0.data(ci,pn);var Jp=k0.enter().append("path").classed("point",!0);Se&&Jp.call(T.pointStyle,jl,G).call(T.translatePoints,ve,xe).style("opacity",0).transition().style("opacity",1),k0.order();var m0;zl&&(m0=T.makePointStyleFns(jl)),k0.each(function(Dp){var c0=M.select(this),b0=fe(c0);vs=T.translatePoint(Dp,b0,ve,xe),vs?(T.singlePointStyle(Dp,b0,jl,m0,G),W.layerClipId&&T.hideOutsideRangePoint(Dp,b0,ve,xe,jl.xcalendar,jl.ycalendar),jl.customdata&&c0.classed("plotly-customdata",Dp.data!==null&&Dp.data!==void 0)):b0.remove()}),Se?k0.exit().transition().style("opacity",0).remove():k0.exit().remove(),J0=B0.selectAll("g"),k0=J0.data(_n,pn),k0.enter().append("g").classed("textpoint",!0).append("text"),k0.order(),k0.each(function(Dp){var c0=M.select(this),b0=fe(c0.select("text"));vs=T.translatePoint(Dp,b0,ve,xe),vs?W.layerClipId&&T.hideOutsideRangePoint(Dp,c0,ve,xe,jl.xcalendar,jl.ycalendar):c0.remove()}),k0.selectAll("text").call(T.textPointStyle,jl,G).each(function(Dp){var c0=ve.c2p(Dp.x),b0=xe.c2p(Dp.y);M.select(this).selectAll("tspan.line").each(function(){fe(M.select(this)).attr({x:c0,y:b0})})}),k0.exit().remove()}De.datum(q),Ue.datum(q),y0(De,Ue,q);var h0=re.cliponaxis===!1,I0=h0?null:W.layerClipId;T.setClipUrl(De,I0,G),T.setClipUrl(Ue,I0,G)}function ee(G,V,W,q,z){var H=W.xaxis,Z=W.yaxis,ne=M.extent(g.simpleMap(H.range,H.r2c)),te=M.extent(g.simpleMap(Z.range,Z.r2c)),Se=q[0].trace;if(C.hasMarkers(Se)){var fe=Se.marker.maxdisplayed;if(fe!==0){var ve=q.filter(function(be){return be.x>=ne[0]&&be.x<=ne[1]&&be.y>=te[0]&&be.y<=te[1]}),xe=Math.ceil(ve.length/fe),re=0;z.forEach(function(be,Te){var ye=be[0].trace;C.hasMarkers(ye)&&ye.marker.maxdisplayed>0&&Te<V&&re++});var de=Math.round(re*xe/3+Math.floor(re/3)*xe/7.1);q.forEach(function(be){delete be.vis}),ve.forEach(function(be,Te){Math.round((Te+de)%xe)===0&&(be.vis=!0)})}}}}}),_x=a({"src/traces/scatter/marker_colorbar.js"(pe,me){me.exports={container:"marker",min:"cmin",max:"cmax"}}}),Mg=a({"src/traces/scatter/format_labels.js"(pe,me){var M=g1();me.exports=function(g,E,S){var T={},C={_fullLayout:S},P=M.getFromTrace(C,E,"x"),p=M.getFromTrace(C,E,"y"),Y=g.orig_x;Y===void 0&&(Y=g.x);var N=g.orig_y;return N===void 0&&(N=g.y),T.xLabel=M.tickText(P,P.c2l(Y),!0).text,T.yLabel=M.tickText(p,p.c2l(N),!0).text,T}}}),L2=a({"src/traces/scatter/style.js"(pe,me){var M=f(),v=t1(),g=jp();function E(P){var p=M.select(P).selectAll("g.trace.scatter");p.style("opacity",function(Y){return Y[0].trace.opacity}),p.selectAll("g.points").each(function(Y){var N=M.select(this),j=Y.trace||Y[0].trace;S(N,j,P)}),p.selectAll("g.text").each(function(Y){var N=M.select(this),j=Y.trace||Y[0].trace;T(N,j,P)}),p.selectAll("g.trace path.js-line").call(v.lineGroupStyle),p.selectAll("g.trace path.js-fill").call(v.fillGroupStyle,P,!1),g.getComponentMethod("errorbars","style")(p)}function S(P,p,Y){v.pointStyle(P.selectAll("path.point"),p,Y)}function T(P,p,Y){v.textPointStyle(P.selectAll("text"),p,Y)}function C(P,p,Y){var N=p[0].trace;N.selectedpoints?(v.selectedPointStyle(Y.selectAll("path.point"),N),v.selectedTextStyle(Y.selectAll("text"),N)):(S(Y,N,P),T(Y,N,P))}me.exports={style:E,stylePoints:S,styleText:T,styleOnSelect:C}}}),ty=a({"src/traces/scatter/get_trace_color.js"(pe,me){var M=Oe(),v=D1();me.exports=function(E,S){var T,C;if(E.mode==="lines")return T=E.line.color,T&&M.opacity(T)?T:E.fillcolor;if(E.mode==="none")return E.fill?E.fillcolor:"";var P=S.mcc||(E.marker||{}).color,p=S.mlcc||((E.marker||{}).line||{}).color;return C=P&&M.opacity(P)?P:p&&M.opacity(p)&&(S.mlw||((E.marker||{}).line||{}).width)?p:"",C?M.opacity(C)<.3?M.addOpacity(C,.3):C:(T=(E.line||{}).color,T&&M.opacity(T)&&v.hasLines(E)&&E.line.width?T:E.fillcolor)}}}),D2=a({"src/traces/scatter/hover.js"(pe,me){var M=o0(),v=uy(),g=jp(),E=ty(),S=Oe(),T=M.fillText;me.exports=function(P,p,Y,N){var j=P.cd,ee=j[0].trace,G=P.xa,V=P.ya,W=G.c2p(p),q=V.c2p(Y),z=[W,q],H=ee.hoveron||"",Z=ee.mode.indexOf("markers")!==-1?3:.5,ne=!!ee.xperiodalignment,te=!!ee.yperiodalignment;if(H.indexOf("points")!==-1){var Se=function(mn){if(ne){var ta=G.c2p(mn.xStart),Do=G.c2p(mn.xEnd);return W>=Math.min(ta,Do)&&W<=Math.max(ta,Do)?0:1/0}var Ae=Math.max(3,mn.mrc||0),ke=1-1/Ae,ge=Math.abs(G.c2p(mn.x)-W);return ge<Ae?ke*ge/Ae:ge-Ae+ke},fe=function(mn){if(te){var ta=V.c2p(mn.yStart),Do=V.c2p(mn.yEnd);return q>=Math.min(ta,Do)&&q<=Math.max(ta,Do)?0:1/0}var Ae=Math.max(3,mn.mrc||0),ke=1-1/Ae,ge=Math.abs(V.c2p(mn.y)-q);return ge<Ae?ke*ge/Ae:ge-Ae+ke},ve=function(mn){var ta=Math.max(Z,mn.mrc||0),Do=G.c2p(mn.x)-W,Ae=V.c2p(mn.y)-q;return Math.max(Math.sqrt(Do*Do+Ae*Ae)-ta,1-Z/ta)},xe=v.getDistanceFunction(N,Se,fe,ve);if(v.getClosest(j,xe,P),P.index!==!1){var re=j[P.index],de=G.c2p(re.x,!0),be=V.c2p(re.y,!0),Te=re.mrc||1;P.index=re.i;var ye=j[0].t.orientation,De=ye&&(re.sNorm||re.s),Ue=ye==="h"?De:re.orig_x!==void 0?re.orig_x:re.x,he=ye==="v"?De:re.orig_y!==void 0?re.orig_y:re.y;return M.extendFlat(P,{color:E(ee,re),x0:de-Te,x1:de+Te,xLabelVal:Ue,y0:be-Te,y1:be+Te,yLabelVal:he,spikeDistance:ve(re),hovertemplate:ee.hovertemplate}),T(re,ee,P),g.getComponentMethod("errorbars","hoverInfo")(re,ee,P),[P]}}function Be(mn){if(!mn)return!1;var ta=mn.node();try{var Do=new DOMPoint(z[0],z[1]);return ta.isPointInFill(Do)}catch{var Ae=ta.ownerSVGElement.createSVGPoint();return Ae.x=z[0],Ae.y=z[1],ta.isPointInFill(Ae)}}function Ye(mn){var ta,Do=[],Ae=1/0,ke=-1/0,ge=1/0,Ce=-1/0,Je;for(ta=0;ta<mn.length;ta++){var Re=mn[ta];Re.contains(z)&&(Do.push(Re),ge=Math.min(ge,Re.ymin),Ce=Math.max(Ce,Re.ymax))}if(Do.length===0)return null;ge=Math.max(ge,0),Ce=Math.min(Ce,V._length),Je=(ge+Ce)/2;var Q,ce,Me,Le,tt,bt,Ct;for(ta=0;ta<Do.length;ta++)for(ce=Do[ta].pts,Q=1;Q<ce.length;Q++)bt=ce[Q-1][1],Ct=ce[Q][1],bt>Je!=Ct>=Je&&(Le=ce[Q-1][0],tt=ce[Q][0],Ct-bt&&(Me=Le+(tt-Le)*(Je-bt)/(Ct-bt),Ae=Math.min(Ae,Me),ke=Math.max(ke,Me)));return Ae=Math.max(Ae,0),ke=Math.min(ke,G._length),{x0:Ae,x1:ke,y0:Je,y1:Je}}if(H.indexOf("fills")!==-1&&ee._fillElement){var et=Be(ee._fillElement)&&!Be(ee._fillExclusionElement);if(et){var Qe=Ye(ee._polygons);Qe===null&&(Qe={x0:z[0],x1:z[0],y0:z[1],y1:z[1]});var ft=S.defaultLine;return S.opacity(ee.fillcolor)?ft=ee.fillcolor:S.opacity((ee.line||{}).color)&&(ft=ee.line.color),M.extendFlat(P,{distance:P.maxHoverDistance,x0:Qe.x0,x1:Qe.x1,y0:Qe.y0,y1:Qe.y1,color:ft,hovertemplate:!1}),delete P.index,ee.text&&!M.isArrayOrTypedArray(ee.text)?P.text=String(ee.text):P.text=ee.name,[P]}}}}}),w_=a({"src/traces/scatter/select.js"(pe,me){var M=D1();me.exports=function(g,E){var S=g.cd,T=g.xaxis,C=g.yaxis,P=[],p=S[0].trace,Y,N,j,ee,G=!M.hasMarkers(p)&&!M.hasText(p);if(G)return[];if(E===!1)for(Y=0;Y<S.length;Y++)S[Y].selected=0;else for(Y=0;Y<S.length;Y++)N=S[Y],j=T.c2p(N.x),ee=C.c2p(N.y),N.i!==null&&E.contains([j,ee],!1,Y,g)?(P.push({pointNumber:N.i,x:T.c2d(N.x),y:C.c2d(N.y)}),N.selected=1):N.selected=0;return P}}}),n_=a({"src/plots/cartesian/attributes.js"(pe,me){me.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}}}),k2=a({"src/plots/cartesian/type_defaults.js"(pe,me){var M=jp().traceIs,v=Yy();me.exports=function(P,p,Y,N){Y("autotypenumbers",N.autotypenumbersDflt);var j=Y("type",(N.splomStash||{}).type);j==="-"&&(g(p,N.data),p.type==="-"?p.type="linear":P.type=p.type)};function g(C,P){if(C.type==="-"){var p=C._id,Y=p.charAt(0),N;p.indexOf("scene")!==-1&&(p=Y);var j=E(P,p,Y);if(j){if(j.type==="histogram"&&Y==={v:"y",h:"x"}[j.orientation||"v"]){C.type="linear";return}var ee=Y+"calendar",G=j[ee],V={noMultiCategory:!M(j,"cartesian")||M(j,"noMultiCategory")};if(j.type==="box"&&j._hasPreCompStats&&Y==={h:"x",v:"y"}[j.orientation||"v"]&&(V.noMultiCategory=!0),V.autotypenumbers=C.autotypenumbers,T(j,Y)){var W=S(j),q=[];for(N=0;N<P.length;N++){var z=P[N];!M(z,"box-violin")||(z[Y+"axis"]||Y)!==p||(z[W]!==void 0?q.push(z[W][0]):z.name!==void 0?q.push(z.name):q.push("text"),z[ee]!==G&&(G=void 0))}C.type=v(q,G,V)}else if(j.type==="splom"){var H=j.dimensions,Z=H[j._axesDim[p]];Z.visible&&(C.type=v(Z.values,G,V))}else C.type=v(j[Y]||[j[Y+"0"]],G,V)}}}function E(C,P,p){for(var Y=0;Y<C.length;Y++){var N=C[Y];if(N.type==="splom"&&N._length>0&&(N["_"+p+"axes"]||{})[P])return N;if((N[p+"axis"]||p)===P){if(T(N,p))return N;if((N[p]||[]).length||N[p+"0"])return N}}}function S(C){return{v:"x",h:"y"}[C.orientation||"v"]}function T(C,P){var p=S(C),Y=M(C,"box-violin"),N=M(C._fullInput||{},"candlestick");return Y&&!N&&P===p&&C[p]===void 0&&C[p+"0"]===void 0}}}),hb=a({"src/plots/cartesian/category_order_defaults.js"(pe,me){var M=y().isTypedArraySpec;function v(g,E){var S=E.dataAttr||g._id.charAt(0),T={},C,P,p;if(E.axData)C=E.axData;else for(C=[],P=0;P<E.data.length;P++){var Y=E.data[P];Y[S+"axis"]===g._id&&C.push(Y)}for(P=0;P<C.length;P++){var N=C[P][S];for(p=0;p<N.length;p++){var j=N[p];j!=null&&(T[j]=1)}}return Object.keys(T)}me.exports=function(E,S,T,C){if(S.type==="category"){var P=E.categoryarray,p=Array.isArray(P)&&P.length>0||M(P),Y;p&&(Y="array");var N=T("categoryorder",Y),j;N==="array"&&(j=T("categoryarray")),!p&&N==="array"&&(N=S.categoryorder="trace"),N==="trace"?S._initialCategories=[]:N==="array"?S._initialCategories=j.slice():(j=v(S,C).sort(),N==="category ascending"?S._initialCategories=j:N==="category descending"&&(S._initialCategories=j.reverse()))}}}}),xx=a({"src/plots/cartesian/line_grid_defaults.js"(pe,me){var M=b().mix,v=ue(),g=o0();me.exports=function(S,T,C,P){P=P||{};var p=P.dfltColor;function Y(re,de){return g.coerce2(S,T,P.attributes,re,de)}var N=Y("linecolor",p),j=Y("linewidth"),ee=C("showline",P.showLine||!!N||!!j);ee||(delete T.linecolor,delete T.linewidth);var G=M(p,P.bgColor,P.blend||v.lightFraction).toRgbString(),V=Y("gridcolor",G),W=Y("gridwidth"),q=Y("griddash"),z=C("showgrid",P.showGrid||!!V||!!W||!!q);if(z||(delete T.gridcolor,delete T.gridwidth,delete T.griddash),P.hasMinor){var H=M(T.gridcolor,P.bgColor,67).toRgbString(),Z=Y("minor.gridcolor",H),ne=Y("minor.gridwidth",T.gridwidth||1),te=Y("minor.griddash",T.griddash||"solid"),Se=C("minor.showgrid",!!Z||!!ne||!!te);Se||(delete T.minor.gridcolor,delete T.minor.gridwidth,delete T.minor.griddash)}if(!P.noZeroLine){Y("zerolinelayer");var fe=Y("zerolinecolor",p),ve=Y("zerolinewidth"),xe=C("zeroline",P.showGrid||!!fe||!!ve);xe||(delete T.zerolinelayer,delete T.zerolinecolor,delete T.zerolinewidth)}}}}),bx=a({"src/plots/cartesian/axis_defaults.js"(pe,me){var M=w(),v=jp(),g=o0(),E=Vm(),S=U1(),T=O1(),C=Hg(),P=Vy(),p=eg(),Y=o1(),N=hb(),j=xx(),ee=cy(),G=Ay(),V=wv().WEEKDAY_PATTERN,W=wv().HOUR_PATTERN;me.exports=function(ne,te,Se,fe,ve){var xe=fe.letter,re=fe.font||{},de=fe.splomStash||{},be=Se("visible",!fe.visibleDflt),Te=te._template||{},ye=te.type||Te.type||"-",De;if(ye==="date"){var Ue=v.getComponentMethod("calendars","handleDefaults");Ue(ne,te,"calendar",fe.calendar),fe.noTicklabelmode||(De=Se("ticklabelmode"))}!fe.noTicklabelindex&&(ye==="date"||ye==="linear")&&Se("ticklabelindex");var he="";(!fe.noTicklabelposition||ye==="multicategory")&&(he=g.coerce(ne,te,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:De==="period"?["outside","inside"]:xe==="x"?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),fe.noTicklabeloverflow||Se("ticklabeloverflow",he.indexOf("inside")!==-1?"hide past domain":ye==="category"||ye==="multicategory"?"allow":"hide past div"),G(te,ve),ee(ne,te,Se,fe),N(ne,te,Se,fe),fe.noHover||(ye!=="category"&&Se("hoverformat"),fe.noUnifiedhovertitle||Se("unifiedhovertitle.text"));var Be=Se("color"),Ye=Be!==T.color.dflt?Be:re.color,et=de.label||ve._dfltTitle[xe];if(Y(ne,te,Se,ye,fe),!be)return te;Se("title.text",et),g.coerceFont(Se,"title.font",re,{overrideDflt:{size:g.bigFont(re.size),color:Ye}}),C(ne,te,Se,ye);var Qe=fe.hasMinor;if(Qe&&(E.newContainer(te,"minor"),C(ne,te,Se,ye,{isMinor:!0})),p(ne,te,Se,ye,fe),P(ne,te,Se,fe),Qe){var ft=fe.isMinor;fe.isMinor=!0,P(ne,te,Se,fe),fe.isMinor=ft}j(ne,te,Se,{dfltColor:Be,bgColor:fe.bgColor,showGrid:fe.showGrid,hasMinor:Qe,attributes:T}),Qe&&!te.minor.ticks&&!te.minor.showgrid&&delete te.minor,(te.showline||te.ticks)&&Se("mirror");var mn=ye==="multicategory";if(!fe.noTickson&&(ye==="category"||mn)&&(te.ticks||te.showgrid)&&(mn?(Se("tickson","boundaries"),delete te.ticklabelposition):Se("tickson")),mn){var ta=Se("showdividers");ta&&(Se("dividercolor"),Se("dividerwidth"))}if(ye==="date")if(S(ne,te,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:q}),!te.rangebreaks.length)delete te.rangebreaks;else{for(var Do=0;Do<te.rangebreaks.length;Do++)if(te.rangebreaks[Do].pattern===V){te._hasDayOfWeekBreaks=!0;break}if(G(te,ve),ve._has("scattergl")||ve._has("splom"))for(var Ae=0;Ae<fe.data.length;Ae++){var ke=fe.data[Ae];(ke.type==="scattergl"||ke.type==="splom")&&(ke.visible=!1,g.warn(ke.type+" traces do not work on axes with rangebreaks. Setting trace "+ke.index+" to `visible: false`."))}}return te};function q(Z,ne,te){function Se(De,Ue){return g.coerce(Z,ne,T.rangebreaks,De,Ue)}var fe=Se("enabled");if(fe){var ve=Se("bounds");if(ve&&ve.length>=2){var xe="",re,de;if(ve.length===2){for(re=0;re<2;re++)if(de=H(ve[re]),de){xe=V;break}}var be=Se("pattern",xe);if(be===V)for(re=0;re<2;re++)de=H(ve[re]),de&&(ne.bounds[re]=ve[re]=de-1);if(be)for(re=0;re<2;re++)switch(de=ve[re],be){case V:if(!M(de)){ne.enabled=!1;return}if(de=+de,de!==Math.floor(de)||de<0||de>=7){ne.enabled=!1;return}ne.bounds[re]=ve[re]=de;break;case W:if(!M(de)){ne.enabled=!1;return}if(de=+de,de<0||de>24){ne.enabled=!1;return}ne.bounds[re]=ve[re]=de;break}if(te.autorange===!1){var Te=te.range;if(Te[0]<Te[1]){if(ve[0]<Te[0]&&ve[1]>Te[1]){ne.enabled=!1;return}}else if(ve[0]>Te[0]&&ve[1]<Te[1]){ne.enabled=!1;return}}}else{var ye=Se("values");if(ye&&ye.length)Se("dvalue");else{ne.enabled=!1;return}}}}var z={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function H(Z){if(typeof Z=="string")return z[Z.substr(0,3).toLowerCase()]}}}),Lg=a({"src/plots/cartesian/position_defaults.js"(pe,me){var M=w(),v=o0();me.exports=function(E,S,T,C){var P=C.counterAxes||[],p=C.overlayableAxes||[],Y=C.letter,N=C.grid,j=C.overlayingDomain,ee,G,V,W,q,z;N&&(G=N._domains[Y][N._axisMap[S._id]],ee=N._anchors[S._id],G&&(V=N[Y+"side"].split(" ")[0],W=N.domain[Y][V==="right"||V==="top"?1:0])),G=G||[0,1],ee=ee||(M(E.position)?"free":P[0]||"free"),V=V||(Y==="x"?"bottom":"left"),W=W||0,q=0,z=!1;var H=v.coerce(E,S,{anchor:{valType:"enumerated",values:["free"].concat(P),dflt:ee}},"anchor"),Z=v.coerce(E,S,{side:{valType:"enumerated",values:Y==="x"?["bottom","top"]:["left","right"],dflt:V}},"side");if(H==="free"){if(Y==="y"){var ne=T("autoshift");ne&&(W=Z==="left"?j[0]:j[1],z=S.automargin?S.automargin:!0,q=Z==="left"?-3:3),T("shift",q)}T("position",W)}T("automargin",z);var te=!1;if(p.length&&(te=v.coerce(E,S,{overlaying:{valType:"enumerated",values:[!1].concat(p),dflt:!1}},"overlaying")),!te){var Se=T("domain",G);Se[0]>Se[1]-1/4096&&(S.domain=G),v.noneOrAll(E.domain,S.domain,G),S.tickmode==="sync"&&(S.tickmode="auto")}return T("layer"),S}}}),M_=a({"src/plots/cartesian/layout_defaults.js"(pe,me){var M=o0(),v=Oe(),g=jg().isUnifiedHover,E=v_(),S=Vm(),T=d0(),C=O1(),P=k2(),p=bx(),Y=y_(),N=Lg(),j=Ov(),ee=j.id2name,G=j.name2id,V=wv().AX_ID_PATTERN,W=jp(),q=W.traceIs,z=W.getComponentMethod;function H(Z,ne,te){Array.isArray(Z[ne])?Z[ne].push(te):Z[ne]=[te]}me.exports=function(ne,te,Se){var fe=te.autotypenumbers,ve={},xe={},re={},de={},be={},Te={},ye={},De={},Ue={},he={},Be,Ye;for(Be=0;Be<Se.length;Be++){var et=Se[Be];if(q(et,"cartesian")){var Qe;if(et.xaxis)Qe=ee(et.xaxis),H(ve,Qe,et);else if(et.xaxes)for(Ye=0;Ye<et.xaxes.length;Ye++)H(ve,ee(et.xaxes[Ye]),et);var ft;if(et.yaxis)ft=ee(et.yaxis),H(ve,ft,et);else if(et.yaxes)for(Ye=0;Ye<et.yaxes.length;Ye++)H(ve,ee(et.yaxes[Ye]),et);if(et.type==="funnel"?et.orientation==="h"?(Qe&&(xe[Qe]=!0),ft&&(ye[ft]=!0)):ft&&(re[ft]=!0):et.type==="image"?(ft&&(De[ft]=!0),Qe&&(De[Qe]=!0)):(ft&&(be[ft]=!0,Te[ft]=!0),(!q(et,"carpet")||et.type==="carpet"&&!et._cheater)&&Qe&&(de[Qe]=!0)),et.type==="carpet"&&et._cheater&&Qe&&(xe[Qe]=!0),q(et,"2dMap")&&(Ue[Qe]=!0,Ue[ft]=!0),q(et,"oriented")){var mn=et.orientation==="h"?ft:Qe;he[mn]=!0}}}var ta=te._subplots,Do=ta.xaxis,Ae=ta.yaxis,ke=M.simpleMap(Do,ee),ge=M.simpleMap(Ae,ee),Ce=ke.concat(ge),Je=v.background;Do.length&&Ae.length&&(Je=M.coerce(ne,te,T,"plot_bgcolor"));var Re=v.combine(Je,te.paper_bgcolor),Q,ce,Me,Le,tt;function bt(){var ci=ve[Q]||[];tt._traceIndices=ci.map(function(_n){return _n.index}),tt._annIndices=[],tt._shapeIndices=[],tt._selectionIndices=[],tt._imgIndices=[],tt._subplotsWith=[],tt._counterAxes=[],tt._name=tt._attr=Q,tt._id=ce}function Ct(ci,_n){return M.coerce(Le,tt,C,ci,_n)}function yi(ci,_n){return M.coerce2(Le,tt,C,ci,_n)}function Fl(ci){return ci==="x"?Ae:Do}function Yl(ci,_n){for(var Tp=ci==="x"?ke:ge,Sp=[],Ip=0;Ip<Tp.length;Ip++){var Jp=Tp[Ip];Jp!==_n&&!(ne[Jp]||{}).overlaying&&Sp.push(G(Jp))}return Sp}var qp={x:Fl("x"),y:Fl("y")},Fp=qp.x.concat(qp.y),Up={},_r=[];function gs(){var ci=Le.matches;V.test(ci)&&Fp.indexOf(ci)===-1&&(Up[ci]=Le.type,_r=Object.keys(Up))}var dr=E(ne,te),Lo=g(dr);for(Be=0;Be<Ce.length;Be++){Q=Ce[Be],ce=G(Q),Me=Q.charAt(0),M.isPlainObject(ne[Q])||(ne[Q]={}),Le=ne[Q],tt=S.newContainer(te,Q,Me+"axis"),bt();var Cp=Me==="x"&&!de[Q]&&xe[Q]||Me==="y"&&!be[Q]&&re[Q],Hp=Me==="y"&&(!Te[Q]&&ye[Q]||De[Q]),e0={hasMinor:!0,letter:Me,font:te.font,outerTicks:Ue[Q],showGrid:!he[Q],data:ve[Q]||[],bgColor:Re,calendar:te.calendar,automargin:!0,visibleDflt:Cp,reverseDflt:Hp,autotypenumbersDflt:fe,splomStash:((te._splomAxes||{})[Me]||{})[ce],noAutotickangles:Me==="y"};Ct("uirevision",te.uirevision),P(Le,tt,Ct,e0),p(Le,tt,Ct,e0,te);var t0=Lo&&Me===dr.charAt(0),n0=yi("spikecolor",Lo?tt.color:void 0),y0=yi("spikethickness",Lo?1.5:void 0),h0=yi("spikedash",Lo?"dot":void 0),I0=yi("spikemode",Lo?"across":void 0),Kp=yi("spikesnap"),B0=Ct("showspikes",!!t0||!!n0||!!y0||!!h0||!!I0||!!Kp);B0||(delete tt.spikecolor,delete tt.spikethickness,delete tt.spikedash,delete tt.spikemode,delete tt.spikesnap);var em=ee(Le.overlaying),k0=[0,1];if(te[em]!==void 0){var J0=ee(te[em].anchor);te[J0]!==void 0&&(k0=te[J0].domain)}N(Le,tt,Ct,{letter:Me,counterAxes:qp[Me],overlayableAxes:Yl(Me,Q),grid:te.grid,overlayingDomain:k0}),Ct("title.standoff"),gs(),tt._input=Le}for(Be=0;Be<_r.length;){ce=_r[Be++],Q=ee(ce),Me=Q.charAt(0),M.isPlainObject(ne[Q])||(ne[Q]={}),Le=ne[Q],tt=S.newContainer(te,Q,Me+"axis"),bt();var vs={letter:Me,font:te.font,outerTicks:Ue[Q],showGrid:!he[Q],data:[],bgColor:Re,calendar:te.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:fe,splomStash:((te._splomAxes||{})[Me]||{})[ce]};Ct("uirevision",te.uirevision),tt.type=Up[ce]||"linear",p(Le,tt,Ct,vs,te),N(Le,tt,Ct,{letter:Me,counterAxes:qp[Me],overlayableAxes:Yl(Me,Q),grid:te.grid}),Ct("fixedrange"),Ct("modebardisable"),gs(),tt._input=Le}var jl=z("rangeslider","handleDefaults"),zl=z("rangeselector","handleDefaults");for(Be=0;Be<ke.length;Be++)Q=ke[Be],Le=ne[Q],tt=te[Q],jl(ne,te,Q),tt.type==="date"&&zl(Le,tt,te,ge,tt.calendar),Ct("fixedrange"),Ct("modebardisable");for(Be=0;Be<ge.length;Be++){Q=ge[Be],Le=ne[Q],tt=te[Q];var Ve=te[ee(tt.anchor)],pn=z("rangeslider","isVisible")(Ve);Ct("fixedrange",pn),Ct("modebardisable")}Y.handleDefaults(ne,te,{axIds:Fp.concat(_r).sort(j.idSort),axHasImage:De})}}}),S_=a({"src/plots/cartesian/transition_axes.js"(pe,me){var M=f(),v=jp(),g=o0(),E=t1(),S=g1();me.exports=function(C,P,p,Y){var N=C._fullLayout;if(P.length===0){S.redrawComponents(C);return}function j(te){var Se=te.xaxis,fe=te.yaxis;N._defs.select("#"+te.clipId+"> rect").call(E.setTranslate,0,0).call(E.setScale,1,1),te.plot.call(E.setTranslate,Se._offset,fe._offset).call(E.setScale,1,1);var ve=te.plot.selectAll(".scatterlayer .trace");ve.selectAll(".point").call(E.setPointGroupScale,1,1),ve.selectAll(".textpoint").call(E.setTextPointsScale,1,1),ve.call(E.hideOutsideRangePoints,te)}function ee(te,Se){var fe=te.plotinfo,ve=fe.xaxis,xe=fe.yaxis,re=ve._length,de=xe._length,be=!!te.xr1,Te=!!te.yr1,ye=[];if(be){var De=g.simpleMap(te.xr0,ve.r2l),Ue=g.simpleMap(te.xr1,ve.r2l),he=De[1]-De[0],Be=Ue[1]-Ue[0];ye[0]=(De[0]*(1-Se)+Se*Ue[0]-De[0])/(De[1]-De[0])*re,ye[2]=re*(1-Se+Se*Be/he),ve.range[0]=ve.l2r(De[0]*(1-Se)+Se*Ue[0]),ve.range[1]=ve.l2r(De[1]*(1-Se)+Se*Ue[1])}else ye[0]=0,ye[2]=re;if(Te){var Ye=g.simpleMap(te.yr0,xe.r2l),et=g.simpleMap(te.yr1,xe.r2l),Qe=Ye[1]-Ye[0],ft=et[1]-et[0];ye[1]=(Ye[1]*(1-Se)+Se*et[1]-Ye[1])/(Ye[0]-Ye[1])*de,ye[3]=de*(1-Se+Se*ft/Qe),xe.range[0]=ve.l2r(Ye[0]*(1-Se)+Se*et[0]),xe.range[1]=xe.l2r(Ye[1]*(1-Se)+Se*et[1])}else ye[1]=0,ye[3]=de;S.drawOne(C,ve,{skipTitle:!0}),S.drawOne(C,xe,{skipTitle:!0}),S.redrawComponents(C,[ve._id,xe._id]);var mn=be?re/ye[2]:1,ta=Te?de/ye[3]:1,Do=be?ye[0]:0,Ae=Te?ye[1]:0,ke=be?ye[0]/ye[2]*re:0,ge=Te?ye[1]/ye[3]*de:0,Ce=ve._offset-ke,Je=xe._offset-ge;fe.clipRect.call(E.setTranslate,Do,Ae).call(E.setScale,1/mn,1/ta),fe.plot.call(E.setTranslate,Ce,Je).call(E.setScale,mn,ta),E.setPointGroupScale(fe.zoomScalePts,1/mn,1/ta),E.setTextPointsScale(fe.zoomScaleTxt,1/mn,1/ta)}var G;Y&&(G=Y());function V(){for(var te={},Se=0;Se<P.length;Se++){var fe=P[Se],ve=fe.plotinfo.xaxis,xe=fe.plotinfo.yaxis;fe.xr1&&(te[ve._name+".range"]=fe.xr1.slice()),fe.yr1&&(te[xe._name+".range"]=fe.yr1.slice())}return G&&G(),v.call("relayout",C,te).then(function(){for(var re=0;re<P.length;re++)j(P[re].plotinfo)})}function W(){for(var te={},Se=0;Se<P.length;Se++){var fe=P[Se],ve=fe.plotinfo.xaxis,xe=fe.plotinfo.yaxis;fe.xr0&&(te[ve._name+".range"]=fe.xr0.slice()),fe.yr0&&(te[xe._name+".range"]=fe.yr0.slice())}return v.call("relayout",C,te).then(function(){for(var re=0;re<P.length;re++)j(P[re].plotinfo)})}var q,z,H,Z=M.ease(p.easing);C._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(H),H=null,W()});function ne(){z=Date.now();for(var te=Math.min(1,(z-q)/p.duration),Se=Z(te),fe=0;fe<P.length;fe++)ee(P[fe],Se);z-q>p.duration?(V(),H=window.cancelAnimationFrame(ne)):H=window.requestAnimationFrame(ne)}return q=Date.now(),H=window.requestAnimationFrame(ne),Promise.resolve()}}}),T_=a({"src/plots/cartesian/index.js"(pe){var me=f(),M=jp(),v=o0(),g=p1(),E=t1(),S=Rv().getModuleCalcData,T=Ov(),C=wv(),P=P1(),p=v.ensureSingle;function Y(q,z,H){return v.ensureSingle(q,z,H,function(Z){Z.datum(H)})}var N=C.zindexSeparator;pe.name="cartesian",pe.attr=["xaxis","yaxis"],pe.idRoot=["x","y"],pe.idRegex=C.idRegex,pe.attrRegex=C.attrRegex,pe.attributes=n_(),pe.layoutAttributes=O1(),pe.supplyLayoutDefaults=M_(),pe.transitionAxes=S_(),pe.finalizeSubplots=function(q,z){var H=z._subplots,Z=H.xaxis,ne=H.yaxis,te=H.cartesian,Se=te,fe={},ve={},xe,re,de;for(xe=0;xe<Se.length;xe++){var be=Se[xe].split("y");fe[be[0]]=1,ve["y"+be[1]]=1}for(xe=0;xe<Z.length;xe++)re=Z[xe],fe[re]||(de=(q[T.id2name(re)]||{}).anchor,C.idRegex.y.test(de)||(de="y"),te.push(re+de),Se.push(re+de),ve[de]||(ve[de]=1,v.pushUnique(ne,de)));for(xe=0;xe<ne.length;xe++)de=ne[xe],ve[de]||(re=(q[T.id2name(de)]||{}).anchor,C.idRegex.x.test(re)||(re="x"),te.push(re+de),Se.push(re+de),fe[re]||(fe[re]=1,v.pushUnique(Z,re)));if(!Se.length){re="",de="";for(var Te in q)if(C.attrRegex.test(Te)){var ye=Te.charAt(0);ye==="x"?(!re||+Te.substr(5)<+re.substr(5))&&(re=Te):(!de||+Te.substr(5)<+de.substr(5))&&(de=Te)}re=re?T.name2id(re):"x",de=de?T.name2id(de):"y",Z.push(re),ne.push(de),te.push(re+de)}},pe.plot=function(q,z,H,Z){var ne=q._fullLayout,te=ne._subplots.cartesian,Se=q.calcdata,fe;if(!Array.isArray(z))for(z=[],fe=0;fe<Se.length;fe++)z.push(fe);for(var ve=ne._zindices,xe=0;xe<ve.length;xe++){var re=ve[xe];for(fe=0;fe<te.length;fe++){var de=te[fe],be=ne._plots[de];if(xe>0){var Te=be.id;if(Te.indexOf(N)!==-1)continue;Te+=N+(xe+1),be=v.extendFlat({},be,{id:Te,plot:ne._cartesianlayer.selectAll(".subplot").select("."+Te)})}for(var ye=[],De,Ue=0;Ue<Se.length;Ue++){var he=Se[Ue],Be=he[0].trace;re===(Be.zorder||0)&&Be.xaxis+Be.yaxis===de&&((z.indexOf(Be.index)!==-1||Be.carpet)&&(De&&De[0].trace.xaxis+De[0].trace.yaxis===de&&["tonextx","tonexty","tonext"].indexOf(Be.fill)!==-1&&ye.indexOf(De)===-1&&ye.push(De),ye.push(he)),De=he)}j(q,be,ye,H,Z)}}};function j(q,z,H,Z,ne){for(var te=C.traceLayerClasses,Se=q._fullLayout,fe=Se._zindices,ve=Se._modules,xe,re,de,be=[],Te=[],ye=0;ye<fe.length;ye++)for(var De=fe[ye],Ue=0;Ue<ve.length;Ue++){xe=ve[Ue];var he=xe.name,Be=M.modules[he].categories;if(Be.svg){var Ye=xe.layerName||he+"layer",et=Ye+(ye?Number(ye)+1:""),Qe=xe.plot;re=S(H,Qe,De),de=re[0],H=re[1],de.length&&be.push({i:te.indexOf(Ye),zindex:ye,className:et,plotMethod:Qe,cdModule:de}),Be.zoomScale&&Te.push("."+et)}}be.sort(function(ta,Do){return(ta.zindex||0)-(Do.zindex||0)||ta.i-Do.i});var ft=z.plot.selectAll("g.mlayer").data(be,function(ta){return ta.className});if(ft.enter().append("g").attr("class",function(ta){return ta.className}).classed("mlayer",!0).classed("rangeplot",z.isRangePlot),ft.exit().remove(),ft.order(),ft.each(function(ta){var Do=me.select(this),Ae=ta.className;ta.plotMethod(q,z,ta.cdModule,Do,Z,ne),C.clipOnAxisFalseQuery.indexOf("."+Ae)===-1&&E.setClipUrl(Do,z.layerClipId,q)}),Se._has("scattergl")&&(xe=M.getModule("scattergl"),de=S(H,xe)[0],xe.plot(q,z,de)),!q._context.staticPlot&&(z._hasClipOnAxisFalse&&(z.clipOnAxisFalseTraces=z.plot.selectAll(C.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),Te.length)){var mn=z.plot.selectAll(Te.join(",")).selectAll(".trace");z.zoomScalePts=mn.selectAll("path.point"),z.zoomScaleTxt=mn.selectAll(".textpoint")}}pe.clean=function(q,z,H,Z){var ne=Z._plots||{},te=z._plots||{},Se=Z._subplots||{},fe,ve,xe;if(Z._hasOnlyLargeSploms&&!z._hasOnlyLargeSploms)for(xe in ne)fe=ne[xe],fe.plotgroup&&fe.plotgroup.remove();var re=Z._has&&Z._has("gl"),de=z._has&&z._has("gl");if(re&&!de)for(xe in ne)fe=ne[xe],fe._scene&&fe._scene.destroy();if(Se.xaxis&&Se.yaxis){var be=T.listIds({_fullLayout:Z});for(ve=0;ve<be.length;ve++){var Te=be[ve];z[T.id2name(Te)]||Z._infolayer.selectAll(".g-"+Te+"title").remove()}}var ye=Z._has&&Z._has("cartesian"),De=z._has&&z._has("cartesian");if(ye&&!De)V(Z._cartesianlayer.selectAll(".subplot"),Z),Z._defs.selectAll(".axesclip").remove(),delete Z._axisConstraintGroups,delete Z._axisMatchGroups;else if(Se.cartesian)for(ve=0;ve<Se.cartesian.length;ve++){var Ue=Se.cartesian[ve];if(Ue.indexOf(N)===-1&&!te[Ue]){var he="."+Ue+",."+Ue+"-x,."+Ue+"-y";Z._cartesianlayer.selectAll(he).remove(),W(Ue,Z)}}},pe.drawFramework=function(q){var z=q._fullLayout,H=q.calcdata,Z,ne={};for(Z=0;Z<H.length;Z++){var te=H[Z][0],Se=te.trace,fe=Se.zorder||0;ne[fe]||(ne[fe]=[]),ne[fe].push(te)}var ve=Object.keys(ne).map(Number).sort(v.sorterAsc);ve.length||(ve=[0]),z._zindices=ve;var xe=ee(q),re=xe.length,de=[];for(Z=0;Z<re;Z++)de[Z]=xe[Z].slice();for(var be=1;be<ve.length;be++){var Te=[];for(Z=0;Z<re;Z++)Te[Z]=xe[Z].slice(),Te[Z][0]+=N+(be+1);de=de.concat(Te)}var ye=z._cartesianlayer.selectAll(".subplot").data(de,String);ye.enter().append("g").attr("class",function(De){return"subplot "+De[0]}),ye.order(),ye.exit().call(V,z),ye.each(function(De){var Ue=De[0],he=Ue.indexOf(N),Be=he!==-1,Ye=Be?Ue.slice(0,he):Ue,et=z._plots[Ue];et||(et=v.extendFlat({},z._plots[Ye]),et&&(et.id=Ue,z._plots[Ue]=et,z._subplots.cartesian.push(Ue))),et&&(et.plotgroup=me.select(this),G(q,et),Be||(et.draglayer=p(z._draggers,"g",Ue)))})},pe.rangePlot=function(q,z,H){G(q,z),j(q,z,H),g.style(q)};function ee(q){var z=q._fullLayout,H=z._zindices.length,Z=z._subplots.cartesian,ne=Z.length,te,Se,fe,ve,xe,re,de=[],be=[];for(te=0;te<ne;te++){fe=Z[te],ve=z._plots[fe],xe=ve.xaxis,re=ve.yaxis;var Te=xe._mainAxis,ye=re._mainAxis,De=Te._id+ye._id,Ue=z._plots[De];ve.overlays=[],De!==fe&&Ue?(ve.mainplot=De,ve.mainplotinfo=Ue,be.push(fe)):(ve.mainplot=void 0,ve.mainplotinfo=void 0,de.push(fe))}for(te=0;te<be.length;te++)fe=be[te],ve=z._plots[fe],ve.mainplotinfo.overlays.push(ve);var he=de.concat(be),Be=[];for(te=0;te<ne;te++){fe=he[te],ve=z._plots[fe],xe=ve.xaxis,re=ve.yaxis;for(var Ye=[],et=1;et<=H;et++){var Qe="";for(et>1&&(Qe+=N+et),Ye.push(fe+Qe),Se=0;Se<ve.overlays.length;Se++)Ye.push(ve.overlays[Se].id+Qe)}Ye=Ye.concat([xe.layer,re.layer,xe.overlaying||"",re.overlaying||""]),Be.push(Ye)}return Be}function G(q,z){var H=q._fullLayout,Z=z.plotgroup,ne=z.id,te=ne.indexOf(N),Se=te!==-1,fe=C.layerValue2layerClass[z.xaxis.layer],ve=C.layerValue2layerClass[z.yaxis.layer],xe=H._hasOnlyLargeSploms,re=H._zindices.length>1,de=z.mainplotinfo;if(!z.mainplot||re)if(xe)z.xlines=p(Z,"path","xlines-above"),z.ylines=p(Z,"path","ylines-above"),z.xaxislayer=p(Z,"g","xaxislayer-above"),z.yaxislayer=p(Z,"g","yaxislayer-above");else{if(!Se){var be=p(Z,"g","layer-subplot");z.shapelayer=p(be,"g","shapelayer"),z.imagelayer=p(be,"g","imagelayer"),de&&re?(z.minorGridlayer=de.minorGridlayer,z.gridlayer=de.gridlayer,z.zerolinelayer=de.zerolinelayer):(z.minorGridlayer=p(Z,"g","minor-gridlayer"),z.gridlayer=p(Z,"g","gridlayer"),z.zerolinelayer=p(Z,"g","zerolinelayer"));var Te=p(Z,"g","layer-between");z.shapelayerBetween=p(Te,"g","shapelayer"),z.imagelayerBetween=p(Te,"g","imagelayer"),p(Z,"path","xlines-below"),p(Z,"path","ylines-below"),z.overlinesBelow=p(Z,"g","overlines-below"),p(Z,"g","xaxislayer-below"),p(Z,"g","yaxislayer-below"),z.overaxesBelow=p(Z,"g","overaxes-below")}z.overplot=p(Z,"g","overplot"),z.plot=p(z.overplot,"g",ne),de&&re?z.zerolinelayerAbove=de.zerolinelayerAbove:z.zerolinelayerAbove=p(Z,"g","zerolinelayer-above"),Se||(z.xlines=p(Z,"path","xlines-above"),z.ylines=p(Z,"path","ylines-above"),z.overlinesAbove=p(Z,"g","overlines-above"),p(Z,"g","xaxislayer-above"),p(Z,"g","yaxislayer-above"),z.overaxesAbove=p(Z,"g","overaxes-above"),z.xlines=Z.select(".xlines-"+fe),z.ylines=Z.select(".ylines-"+ve),z.xaxislayer=Z.select(".xaxislayer-"+fe),z.yaxislayer=Z.select(".yaxislayer-"+ve))}else{var ye=de.plotgroup,De=ne+"-x",Ue=ne+"-y";z.minorGridlayer=de.minorGridlayer,z.gridlayer=de.gridlayer,z.zerolinelayer=de.zerolinelayer,z.zerolinelayerAbove=de.zerolinelayerAbove,p(de.overlinesBelow,"path",De),p(de.overlinesBelow,"path",Ue),p(de.overaxesBelow,"g",De),p(de.overaxesBelow,"g",Ue),z.plot=p(de.overplot,"g",ne),p(de.overlinesAbove,"path",De),p(de.overlinesAbove,"path",Ue),p(de.overaxesAbove,"g",De),p(de.overaxesAbove,"g",Ue),z.xlines=ye.select(".overlines-"+fe).select("."+De),z.ylines=ye.select(".overlines-"+ve).select("."+Ue),z.xaxislayer=ye.select(".overaxes-"+fe).select("."+De),z.yaxislayer=ye.select(".overaxes-"+ve).select("."+Ue)}Se||(xe||(Y(z.minorGridlayer,"g",z.xaxis._id),Y(z.minorGridlayer,"g",z.yaxis._id),z.minorGridlayer.selectAll("g").map(function(he){return he[0]}).sort(T.idSort),Y(z.gridlayer,"g",z.xaxis._id),Y(z.gridlayer,"g",z.yaxis._id),z.gridlayer.selectAll("g").map(function(he){return he[0]}).sort(T.idSort)),z.xlines.style("fill","none").classed("crisp",!0),z.ylines.style("fill","none").classed("crisp",!0))}function V(q,z){if(q){var H={};q.each(function(ve){var xe=ve[0],re=me.select(this);re.remove(),W(xe,z),H[xe]=!0});for(var Z in z._plots)for(var ne=z._plots[Z],te=ne.overlays||[],Se=0;Se<te.length;Se++){var fe=te[Se];H[fe.id]&&fe.plot.selectAll(".trace").remove()}}}function W(q,z){z._draggers.selectAll("g."+q).remove(),z._defs.select("#clip"+z._uid+q+"plot").remove()}pe.toSVG=function(q){var z=q._fullLayout._glimages,H=me.select(q).selectAll(".svg-container"),Z=H.filter(function(te,Se){return Se===H.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus");function ne(){var te=this,Se=te.toDataURL("image/png"),fe=z.append("svg:image");fe.attr({xmlns:P.svg,"xlink:href":Se,preserveAspectRatio:"none",x:0,y:0,width:te.style.width,height:te.style.height})}Z.each(ne)},pe.updateFx=S2().updateFx}}),i2=a({"src/traces/scatter/index.js"(pe,me){var M=D1();me.exports={hasLines:M.hasLines,hasMarkers:M.hasMarkers,hasText:M.hasText,isBubble:M.isBubble,attributes:Jy(),layoutAttributes:n1(),supplyDefaults:yx(),crossTraceDefaults:A2(),supplyLayoutDefaults:Og(),calc:r2().calc,crossTraceCalc:r_(),arraysToCalcdata:zy(),plot:a_(),colorbar:_x(),formatLabels:Mg(),style:L2().style,styleOnSelect:L2().styleOnSelect,hoverPoints:D2(),selectPoints:w_(),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:T_(),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}}}),Ig=a({"src/components/annotations/draw_arrow_head.js"(pe,me){var M=f(),v=Oe(),g=Ky(),E=o0(),S=E.strScale,T=E.strRotate,C=E.strTranslate;me.exports=function(p,Y,N){var j=p.node(),ee=g[N.arrowhead||0],G=g[N.startarrowhead||0],V=(N.arrowwidth||1)*(N.arrowsize||1),W=(N.arrowwidth||1)*(N.startarrowsize||1),q=Y.indexOf("start")>=0,z=Y.indexOf("end")>=0,H=ee.backoff*V+N.standoff,Z=G.backoff*W+N.startstandoff,ne,te,Se,fe;if(j.nodeName==="line"){ne={x:+p.attr("x1"),y:+p.attr("y1")},te={x:+p.attr("x2"),y:+p.attr("y2")};var ve=ne.x-te.x,xe=ne.y-te.y;if(Se=Math.atan2(xe,ve),fe=Se+Math.PI,H&&Z&&H+Z>Math.sqrt(ve*ve+xe*xe)){Qe();return}if(H){if(H*H>ve*ve+xe*xe){Qe();return}var re=H*Math.cos(Se),de=H*Math.sin(Se);te.x+=re,te.y+=de,p.attr({x2:te.x,y2:te.y})}if(Z){if(Z*Z>ve*ve+xe*xe){Qe();return}var be=Z*Math.cos(Se),Te=Z*Math.sin(Se);ne.x-=be,ne.y-=Te,p.attr({x1:ne.x,y1:ne.y})}}else if(j.nodeName==="path"){var ye=j.getTotalLength(),De="";if(ye<H+Z){Qe();return}var Ue=j.getPointAtLength(0),he=j.getPointAtLength(.1);Se=Math.atan2(Ue.y-he.y,Ue.x-he.x),ne=j.getPointAtLength(Math.min(Z,ye)),De="0px,"+Z+"px,";var Be=j.getPointAtLength(ye),Ye=j.getPointAtLength(ye-.1);fe=Math.atan2(Be.y-Ye.y,Be.x-Ye.x),te=j.getPointAtLength(Math.max(0,ye-H));var et=De?Z+H:H;De+=ye-et+"px,"+ye+"px",p.style("stroke-dasharray",De)}function Qe(){p.style("stroke-dasharray","0px,100px")}function ft(mn,ta,Do,Ae){mn.path&&(mn.noRotate&&(Do=0),M.select(j.parentNode).append("path").attr({class:p.attr("class"),d:mn.path,transform:C(ta.x,ta.y)+T(Do*180/Math.PI)+S(Ae)}).style({fill:v.rgb(N.arrowcolor),"stroke-width":0}))}q&&ft(G,ne,Se,W),z&&ft(ee,te,fe,V)}}}),Sg=a({"src/components/annotations/draw.js"(pe,me){var M=f(),v=jp(),g=p1(),E=o0(),S=E.strTranslate,T=g1(),C=Oe(),P=t1(),p=uy(),Y=v1(),N=$1(),j=Gg(),ee=Vm().arrayEditor,G=Ig();me.exports={draw:V,drawOne:W,drawRaw:z};function V(H){var Z=H._fullLayout;Z._infolayer.selectAll(".annotation").remove();for(var ne=0;ne<Z.annotations.length;ne++)Z.annotations[ne].visible&&W(H,ne);return g.previousPromises(H)}function W(H,Z){var ne=H._fullLayout,te=ne.annotations[Z]||{},Se=T.getFromId(H,te.xref),fe=T.getFromId(H,te.yref);Se&&Se.setScale(),fe&&fe.setScale(),z(H,te,Z,!1,Se,fe)}function q(H,Z,ne,te,Se){var fe=Se[ne],ve=Se[ne+"ref"],xe=ne.indexOf("y")!==-1,re=T.getRefType(ve)==="domain",de=xe?te.h:te.w;return H?re?fe+(xe?-Z:Z)/H._length:H.p2r(H.r2p(fe)+Z):fe+(xe?-Z:Z)/de}function z(H,Z,ne,te,Se,fe){var ve=H._fullLayout,xe=H._fullLayout._size,re=H._context.edits,de,be;te?(de="annotation-"+te,be=te+".annotations"):(de="annotation",be="annotations");var Te=ee(H.layout,be,Z),ye=Te.modifyBase,De=Te.modifyItem,Ue=Te.getUpdateObj;ve._infolayer.selectAll("."+de+'[data-index="'+ne+'"]').remove();var he="clip"+ve._uid+"_ann"+ne;if(!Z._input||Z.visible===!1){M.selectAll("#"+he).remove();return}var Be={x:{},y:{}},Ye=+Z.textangle||0,et=ve._infolayer.append("g").classed(de,!0).attr("data-index",String(ne)).style("opacity",Z.opacity),Qe=et.append("g").classed("annotation-text-g",!0),ft=re[Z.showarrow?"annotationTail":"annotationPosition"],mn=Z.captureevents||re.annotationText||ft;function ta(bt){var Ct={index:ne,annotation:Z._input,fullAnnotation:Z,event:bt};return te&&(Ct.subplotId=te),Ct}var Do=Qe.append("g").style("pointer-events",mn?"all":null).call(N,"pointer").on("click",function(){H._dragging=!1,H.emit("plotly_clickannotation",ta(M.event))});Z.hovertext&&Do.on("mouseover",function(){var bt=Z.hoverlabel,Ct=bt.font,yi=this.getBoundingClientRect(),Fl=H.getBoundingClientRect();p.loneHover({x0:yi.left-Fl.left,x1:yi.right-Fl.left,y:(yi.top+yi.bottom)/2-Fl.top,text:Z.hovertext,color:bt.bgcolor,borderColor:bt.bordercolor,fontFamily:Ct.family,fontSize:Ct.size,fontColor:Ct.color,fontWeight:Ct.weight,fontStyle:Ct.style,fontVariant:Ct.variant,fontShadow:Ct.fontShadow,fontLineposition:Ct.fontLineposition,fontTextcase:Ct.fontTextcase},{container:ve._hoverlayer.node(),outerContainer:ve._paper.node(),gd:H})}).on("mouseout",function(){p.loneUnhover(ve._hoverlayer.node())});var Ae=Z.borderwidth,ke=Z.borderpad,ge=Ae+ke,Ce=Do.append("rect").attr("class","bg").style("stroke-width",Ae+"px").call(C.stroke,Z.bordercolor).call(C.fill,Z.bgcolor),Je=Z.width||Z.height,Re=ve._topclips.selectAll("#"+he).data(Je?[0]:[]);Re.enter().append("clipPath").classed("annclip",!0).attr("id",he).append("rect"),Re.exit().remove();var Q=Z.font,ce=ve._meta?E.templateString(Z.text,ve._meta):Z.text,Me=Do.append("text").classed("annotation-text",!0).text(ce);function Le(bt){return bt.call(P.font,Q).attr({"text-anchor":{left:"start",right:"end"}[Z.align]||"middle"}),Y.convertToTspans(bt,H,tt),bt}function tt(){var bt=Me.selectAll("a");if(bt.size()===1&&bt.text()===Me.text()){var Ct=Do.insert("a",":first-child").attr({"xlink:xlink:href":bt.attr("xlink:href"),"xlink:xlink:show":bt.attr("xlink:show")}).style({cursor:"pointer"});Ct.node().appendChild(Ce.node())}var yi=Do.select(".annotation-text-math-group"),Fl=!yi.empty(),Yl=P.bBox((Fl?yi:Me).node()),qp=Yl.width,Fp=Yl.height,Up=Z.width||qp,_r=Z.height||Fp,gs=Math.round(Up+2*ge),dr=Math.round(_r+2*ge);function Lo(Am,mm){return mm==="auto"&&(Am<1/3?mm="left":Am>2/3?mm="right":mm="center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[mm]}for(var Cp=!1,Hp=["x","y"],e0=0;e0<Hp.length;e0++){var t0=Hp[e0],n0=Z[t0+"ref"]||t0,y0=Z["a"+t0+"ref"],h0={x:Se,y:fe}[t0],I0=(Ye+(t0==="x"?0:-90))*Math.PI/180,Kp=gs*Math.cos(I0),B0=dr*Math.sin(I0),em=Math.abs(Kp)+Math.abs(B0),k0=Z[t0+"anchor"],J0=Z[t0+"shift"]*(t0==="x"?1:-1),vs=Be[t0],jl,zl,Ve,pn,ci,_n=T.getRefType(n0);if(h0&&_n!=="domain"){var Tp=h0.r2fraction(Z[t0]);(Tp<0||Tp>1)&&(y0===n0?(Tp=h0.r2fraction(Z["a"+t0]),(Tp<0||Tp>1)&&(Cp=!0)):Cp=!0),jl=h0._offset+h0.r2p(Z[t0]),pn=.5}else{var Sp=_n==="domain";t0==="x"?(Ve=Z[t0],jl=Sp?h0._offset+h0._length*Ve:jl=xe.l+xe.w*Ve):(Ve=1-Z[t0],jl=Sp?h0._offset+h0._length*Ve:jl=xe.t+xe.h*Ve),pn=Z.showarrow?.5:Ve}if(Z.showarrow){vs.head=jl;var Ip=Z["a"+t0];if(ci=Kp*Lo(.5,Z.xanchor)-B0*Lo(.5,Z.yanchor),y0===n0){var Jp=T.getRefType(y0);Jp==="domain"?(t0==="y"&&(Ip=1-Ip),vs.tail=h0._offset+h0._length*Ip):Jp==="paper"?t0==="y"?(Ip=1-Ip,vs.tail=xe.t+xe.h*Ip):vs.tail=xe.l+xe.w*Ip:vs.tail=h0._offset+h0.r2p(Ip),zl=ci}else vs.tail=jl+Ip,zl=ci+Ip;vs.text=vs.tail+ci;var m0=ve[t0==="x"?"width":"height"];if(n0==="paper"&&(vs.head=E.constrain(vs.head,1,m0-1)),y0==="pixel"){var Dp=-Math.max(vs.tail-3,vs.text),c0=Math.min(vs.tail+3,vs.text)-m0;Dp>0?(vs.tail+=Dp,vs.text+=Dp):c0>0&&(vs.tail-=c0,vs.text-=c0)}vs.tail+=J0,vs.head+=J0}else ci=em*Lo(pn,k0),zl=ci,vs.text=jl+ci;vs.text+=J0,ci+=J0,zl+=J0,Z["_"+t0+"padplus"]=em/2+zl,Z["_"+t0+"padminus"]=em/2-zl,Z["_"+t0+"size"]=em,Z["_"+t0+"shift"]=ci}if(Cp){Do.remove();return}var b0=0,E0=0;if(Z.align!=="left"&&(b0=(Up-qp)*(Z.align==="center"?.5:1)),Z.valign!=="top"&&(E0=(_r-Fp)*(Z.valign==="middle"?.5:1)),Fl)yi.select("svg").attr({x:ge+b0-1,y:ge+E0}).call(P.setClipUrl,Je?he:null,H);else{var gm=ge+E0-Yl.top,Nm=ge+b0-Yl.left;Me.call(Y.positionText,Nm,gm).call(P.setClipUrl,Je?he:null,H)}Re.select("rect").call(P.setRect,ge,ge,Up,_r),Ce.call(P.setRect,Ae/2,Ae/2,gs-Ae,dr-Ae),Do.call(P.setTranslate,Math.round(Be.x.text-gs/2),Math.round(Be.y.text-dr/2)),Qe.attr({transform:"rotate("+Ye+","+Be.x.text+","+Be.y.text+")"});var Bm=function(Am,mm){et.selectAll(".annotation-arrow-g").remove();var vm=Be.x.head,Om=Be.y.head,Lm=Be.x.tail+Am,Um=Be.y.tail+mm,Em=Be.x.text+Am,lm=Be.y.text+mm,Dm=E.rotationXYMatrix(Ye,Em,lm),Zm=E.apply2DTransform(Dm),rv=E.apply2DTransform2(Dm),zm=+Ce.attr("width"),Ym=+Ce.attr("height"),Km=Em-.5*zm,_v=Km+zm,Hm=lm-.5*Ym,uv=Hm+Ym,dt=[[Km,Hm,Km,uv],[Km,uv,_v,uv],[_v,uv,_v,Hm],[_v,Hm,Km,Hm]].map(rv);if(!dt.reduce(function(P0,j0){return P0^!!E.segmentsIntersect(vm,Om,vm+1e6,Om+1e6,j0[0],j0[1],j0[2],j0[3])},!1)){dt.forEach(function(P0){var j0=E.segmentsIntersect(Lm,Um,vm,Om,P0[0],P0[1],P0[2],P0[3]);j0&&(Lm=j0.x,Um=j0.y)});var Fe=Z.arrowwidth,Gp=Z.arrowcolor,kp=Z.arrowside,yp=et.append("g").style({opacity:C.opacity(Gp)}).classed("annotation-arrow-g",!0),bp=yp.append("path").attr("d","M"+Lm+","+Um+"L"+vm+","+Om).style("stroke-width",Fe+"px").call(C.stroke,C.rgb(Gp));if(G(bp,kp,Z),re.annotationPosition&&bp.node().parentNode&&!te){var Pp=vm,s0=Om;if(Z.standoff){var Rp=Math.sqrt(Math.pow(vm-Lm,2)+Math.pow(Om-Um,2));Pp+=Z.standoff*(Lm-vm)/Rp,s0+=Z.standoff*(Um-Om)/Rp}var Vp=yp.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(Lm-Pp)+","+(Um-s0),transform:S(Pp,s0)}).style("stroke-width",Fe+6+"px").call(C.stroke,"rgba(0,0,0,0)").call(C.fill,"rgba(0,0,0,0)"),r0,$p;j.init({element:Vp.node(),gd:H,prepFn:function(){var P0=P.getTranslate(Do);r0=P0.x,$p=P0.y,Se&&Se.autorange&&ye(Se._name+".autorange",!0),fe&&fe.autorange&&ye(fe._name+".autorange",!0)},moveFn:function(P0,j0){var tm=Zm(r0,$p),wm=tm[0]+P0,bm=tm[1]+j0;Do.call(P.setTranslate,wm,bm),De("x",q(Se,P0,"x",xe,Z)),De("y",q(fe,j0,"y",xe,Z)),Z.axref===Z.xref&&De("ax",q(Se,P0,"ax",xe,Z)),Z.ayref===Z.yref&&De("ay",q(fe,j0,"ay",xe,Z)),yp.attr("transform",S(P0,j0)),Qe.attr({transform:"rotate("+Ye+","+wm+","+bm+")"})},doneFn:function(){v.call("_guiRelayout",H,Ue());var P0=document.querySelector(".js-notes-box-panel");P0&&P0.redraw(P0.selectedObj)}})}}};if(Z.showarrow&&Bm(0,0),ft){var xm;j.init({element:Do.node(),gd:H,prepFn:function(){xm=Qe.attr("transform")},moveFn:function(Am,mm){var vm="pointer";if(Z.showarrow)Z.axref===Z.xref?De("ax",q(Se,Am,"ax",xe,Z)):De("ax",Z.ax+Am),Z.ayref===Z.yref?De("ay",q(fe,mm,"ay",xe.w,Z)):De("ay",Z.ay+mm),Bm(Am,mm);else{if(te)return;var Om,Lm;if(Se)Om=q(Se,Am,"x",xe,Z);else{var Um=Z._xsize/xe.w,Em=Z.x+(Z._xshift-Z.xshift)/xe.w-Um/2;Om=j.align(Em+Am/xe.w,Um,0,1,Z.xanchor)}if(fe)Lm=q(fe,mm,"y",xe,Z);else{var lm=Z._ysize/xe.h,Dm=Z.y-(Z._yshift+Z.yshift)/xe.h-lm/2;Lm=j.align(Dm-mm/xe.h,lm,0,1,Z.yanchor)}De("x",Om),De("y",Lm),(!Se||!fe)&&(vm=j.getCursor(Se?.5:Om,fe?.5:Lm,Z.xanchor,Z.yanchor))}Qe.attr({transform:S(Am,mm)+xm}),N(Do,vm)},clickFn:function(Am,mm){Z.captureevents&&H.emit("plotly_clickannotation",ta(mm))},doneFn:function(){N(Do),v.call("_guiRelayout",H,Ue());var Am=document.querySelector(".js-notes-box-panel");Am&&Am.redraw(Am.selectedObj)}})}}re.annotationText?Me.call(Y.makeEditable,{delegate:Do,gd:H}).call(Le).on("edit",function(bt){Z.text=bt,this.call(Le),De("text",bt),Se&&Se.autorange&&ye(Se._name+".autorange",!0),fe&&fe.autorange&&ye(fe._name+".autorange",!0),v.call("_guiRelayout",H,Ue())}):Me.call(Le)}}}),Oy=a({"src/components/annotations/click.js"(pe,me){var M=o0(),v=jp(),g=Vm().arrayEditor;me.exports={hasClickToShow:E,onClick:S};function E(P,p){var Y=T(P,p);return Y.on.length>0||Y.explicitOff.length>0}function S(P,p){var Y=T(P,p),N=Y.on,j=Y.off.concat(Y.explicitOff),ee={},G=P._fullLayout.annotations,V,W;if(N.length||j.length){for(V=0;V<N.length;V++)W=g(P.layout,"annotations",G[N[V]]),W.modifyItem("visible",!0),M.extendFlat(ee,W.getUpdateObj());for(V=0;V<j.length;V++)W=g(P.layout,"annotations",G[j[V]]),W.modifyItem("visible",!1),M.extendFlat(ee,W.getUpdateObj());return v.call("update",P,{},ee)}}function T(P,p){var Y=P._fullLayout.annotations,N=[],j=[],ee=[],G=(p||[]).length,V,W,q,z,H,Z,ne,te;for(V=0;V<Y.length;V++)if(q=Y[V],z=q.clicktoshow,z){for(W=0;W<G;W++)if(H=p[W],Z=H.xaxis,ne=H.yaxis,Z._id===q.xref&&ne._id===q.yref&&Z.d2r(H.x)===C(q._xclick,Z)&&ne.d2r(H.y)===C(q._yclick,ne)){q.visible?z==="onout"?te=j:te=ee:te=N,te.push(V);break}W===G&&q.visible&&z==="onout"&&j.push(V)}return{on:N,off:j,explicitOff:ee}}function C(P,p){return p.type==="log"?p.l2r(P):p.d2r(P)}}}),Vg=a({"src/components/annotations/common_defaults.js"(pe,me){var M=o0(),v=Oe();me.exports=function(E,S,T,C){C("opacity");var P=C("bgcolor"),p=C("bordercolor"),Y=v.opacity(p);C("borderpad");var N=C("borderwidth"),j=C("showarrow");C("text",j?" ":T._dfltTitle.annotation),C("textangle"),M.coerceFont(C,"font",T.font),C("width"),C("align");var ee=C("height");if(ee&&C("valign"),j){var G=C("arrowside"),V,W;G.indexOf("end")!==-1&&(V=C("arrowhead"),W=C("arrowsize")),G.indexOf("start")!==-1&&(C("startarrowhead",V),C("startarrowsize",W)),C("arrowcolor",Y?S.bordercolor:v.defaultLine),C("arrowwidth",(Y&&N||1)*2),C("standoff"),C("startstandoff")}var q=C("hovertext"),z=T.hoverlabel||{};if(q){var H=C("hoverlabel.bgcolor",z.bgcolor||(v.opacity(P)?v.rgb(P):v.defaultLine)),Z=C("hoverlabel.bordercolor",z.bordercolor||v.contrast(H)),ne=M.extendFlat({},z.font);ne.color||(ne.color=Z),M.coerceFont(C,"hoverlabel.font",ne)}C("captureevents",!!q)}}}),ry=a({"src/components/annotations/defaults.js"(pe,me){var M=o0(),v=g1(),g=U1(),E=Vg(),S=x_();me.exports=function(P,p){g(P,p,{name:"annotations",handleItemDefaults:T})};function T(C,P,p){function Y(xe,re){return M.coerce(C,P,S,xe,re)}var N=Y("visible"),j=Y("clicktoshow");if(N||j){E(C,P,p,Y);for(var ee=P.showarrow,G=["x","y"],V=[-10,-30],W={_fullLayout:p},q=0;q<2;q++){var z=G[q],H=v.coerceRef(C,P,W,z,"","paper");if(H!=="paper"){var Z=v.getFromId(W,H);Z._annIndices.push(P._index)}if(v.coercePosition(P,W,Y,H,z,.5),ee){var ne="a"+z,te=v.coerceRef(C,P,W,ne,"pixel",["pixel","paper"]);te!=="pixel"&&te!==H&&(te=P[ne]="pixel");var Se=te==="pixel"?V[q]:.4;v.coercePosition(P,W,Y,te,ne,Se)}Y(z+"anchor"),Y(z+"shift")}if(M.noneOrAll(C,P,["x","y"]),ee&&M.noneOrAll(C,P,["ax","ay"]),j){var fe=Y("xclick"),ve=Y("yclick");P._xclick=fe===void 0?P.x:v.cleanPosition(fe,W,P.xref),P._yclick=ve===void 0?P.y:v.cleanPosition(ve,W,P.yref)}}}}}),my=a({"src/components/annotations/calc_autorange.js"(pe,me){var M=o0(),v=g1(),g=Sg().draw;me.exports=function(C){var P=C._fullLayout,p=M.filterVisible(P.annotations);if(p.length&&C._fullData.length)return M.syncOrAsync([g,E],C)};function E(T){var C=T._fullLayout;M.filterVisible(C.annotations).forEach(function(P){var p=v.getFromId(T,P.xref),Y=v.getFromId(T,P.yref),N=v.getRefType(P.xref),j=v.getRefType(P.yref);P._extremes={},N==="range"&&S(P,p),j==="range"&&S(P,Y)})}function S(T,C){var P=C._id,p=P.charAt(0),Y=T[p],N=T["a"+p],j=T[p+"ref"],ee=T["a"+p+"ref"],G=T["_"+p+"padplus"],V=T["_"+p+"padminus"],W={x:1,y:-1}[p]*T[p+"shift"],q=3*T.arrowsize*T.arrowwidth||0,z=q+W,H=q-W,Z=3*T.startarrowsize*T.arrowwidth||0,ne=Z+W,te=Z-W,Se;if(ee===j){var fe=v.findExtremes(C,[C.r2c(Y)],{ppadplus:z,ppadminus:H}),ve=v.findExtremes(C,[C.r2c(N)],{ppadplus:Math.max(G,ne),ppadminus:Math.max(V,te)});Se={min:[fe.min[0],ve.min[0]],max:[fe.max[0],ve.max[0]]}}else ne=N?ne+N:ne,te=N?te-N:te,Se=v.findExtremes(C,[C.r2c(Y)],{ppadplus:Math.max(G,z,ne),ppadminus:Math.max(V,H,te)});T._extremes[P]=Se}}}),ay=a({"src/components/annotations/convert_coords.js"(pe,me){var M=w(),v=R();me.exports=function(E,S,T,C){S=S||{};var P=T==="log"&&S.type==="linear",p=T==="linear"&&S.type==="log";if(!(P||p))return;var Y=E._fullLayout.annotations,N=S._id.charAt(0),j,ee;function G(W){var q=j[W],z=null;P?z=v(q,S.range):z=Math.pow(10,q),M(z)||(z=null),C(ee+W,z)}for(var V=0;V<Y.length;V++)j=Y[V],ee="annotations["+V+"].",j[N+"ref"]===S._id&&G(N),j["a"+N+"ref"]===S._id&&G("a"+N)}}}),wx=a({"src/components/annotations/index.js"(pe,me){var M=Sg(),v=Oy();me.exports={moduleType:"component",name:"annotations",layoutAttributes:x_(),supplyLayoutDefaults:ry(),includeBasePlot:Qy()("annotations"),calcAutorange:my(),draw:M.draw,drawOne:M.drawOne,drawRaw:M.drawRaw,hasClickToShow:v.hasClickToShow,onClick:v.onClick,convertCoords:ay()}}}),s2=a({"src/components/annotations3d/attributes.js"(pe,me){var M=x_(),v=Xl().overrideAll,g=Vm().templatedArray;me.exports=v(g("annotation",{visible:M.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:M.xanchor,xshift:M.xshift,yanchor:M.yanchor,yshift:M.yshift,text:M.text,textangle:M.textangle,font:M.font,width:M.width,height:M.height,opacity:M.opacity,align:M.align,valign:M.valign,bgcolor:M.bgcolor,bordercolor:M.bordercolor,borderpad:M.borderpad,borderwidth:M.borderwidth,showarrow:M.showarrow,arrowcolor:M.arrowcolor,arrowhead:M.arrowhead,startarrowhead:M.startarrowhead,arrowside:M.arrowside,arrowsize:M.arrowsize,startarrowsize:M.startarrowsize,arrowwidth:M.arrowwidth,standoff:M.standoff,startstandoff:M.startstandoff,hovertext:M.hovertext,hoverlabel:M.hoverlabel,captureevents:M.captureevents}),"calc","from-root")}}),Mx=a({"src/components/annotations3d/defaults.js"(pe,me){var M=o0(),v=g1(),g=U1(),E=Vg(),S=s2();me.exports=function(P,p,Y){g(P,p,{name:"annotations",handleItemDefaults:T,fullLayout:Y.fullLayout})};function T(C,P,p,Y){function N(G,V){return M.coerce(C,P,S,G,V)}function j(G){var V=G+"axis",W={_fullLayout:{}};return W._fullLayout[V]=p[V],v.coercePosition(P,W,N,G,G,.5)}var ee=N("visible");ee&&(E(C,P,Y.fullLayout,N),j("x"),j("y"),j("z"),M.noneOrAll(C,P,["x","y","z"]),P.xref="x",P.yref="y",P.zref="z",N("xanchor"),N("yanchor"),N("xshift"),N("yshift"),P.showarrow&&(P.axref="pixel",P.ayref="pixel",N("ax",-10),N("ay",-30),M.noneOrAll(C,P,["ax","ay"])))}}}),lg=a({"src/components/annotations3d/convert.js"(pe,me){var M=o0(),v=g1();me.exports=function(S){for(var T=S.fullSceneLayout,C=T.annotations,P=0;P<C.length;P++)g(C[P],S);S.fullLayout._infolayer.selectAll(".annotation-"+S.id).remove()};function g(E,S){var T=S.fullSceneLayout,C=T.domain,P=S.fullLayout._size,p={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};E._xa={},M.extendFlat(E._xa,p),v.setConvert(E._xa),E._xa._offset=P.l+C.x[0]*P.w,E._xa.l2p=function(){return .5*(1+E._pdata[0]/E._pdata[3])*P.w*(C.x[1]-C.x[0])},E._ya={},M.extendFlat(E._ya,p),v.setConvert(E._ya),E._ya._offset=P.t+(1-C.y[1])*P.h,E._ya.l2p=function(){return .5*(1-E._pdata[1]/E._pdata[3])*P.h*(C.y[1]-C.y[0])}}}}),k1=a({"src/plots/gl3d/project.js"(pe,me){function M(g,E){var S=[0,0,0,0],T,C;for(T=0;T<4;++T)for(C=0;C<4;++C)S[C]+=g[4*T+C]*E[T];return S}function v(g,E){var S=M(g.projection,M(g.view,M(g.model,[E[0],E[1],E[2],1])));return S}me.exports=v}}),Wv=a({"src/components/annotations3d/draw.js"(pe,me){var M=Sg().drawRaw,v=k1(),g=["x","y","z"];me.exports=function(S){for(var T=S.fullSceneLayout,C=S.dataScale,P=T.annotations,p=0;p<P.length;p++){for(var Y=P[p],N=!1,j=0;j<3;j++){var ee=g[j],G=Y[ee],V=T[ee+"axis"],W=V.r2fraction(G);if(W<0||W>1){N=!0;break}}N?S.fullLayout._infolayer.select(".annotation-"+S.id+'[data-index="'+p+'"]').remove():(Y._pdata=v(S.glplot.cameraParams,[T.xaxis.r2l(Y.x)*C[0],T.yaxis.r2l(Y.y)*C[1],T.zaxis.r2l(Y.z)*C[2]]),M(S.graphDiv,Y,p,S.id,Y._xa,Y._ya))}}}}),ny=a({"src/components/annotations3d/index.js"(pe,me){var M=jp(),v=o0();me.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:s2()}}},layoutAttributes:s2(),handleDefaults:Mx(),includeBasePlot:g,convert:lg(),draw:Wv()};function g(E,S){var T=M.subplotsRegistry.gl3d;if(T)for(var C=T.attrRegex,P=Object.keys(E),p=0;p<P.length;p++){var Y=P[p];C.test(Y)&&(E[Y].annotations||[]).length&&(v.pushUnique(S._basePlotModules,T),v.pushUnique(S._subplots.gl3d,Y))}}}}),yg=a({"src/components/shapes/attributes.js"(pe,me){var M=x_(),v=B(),g=Jy().line,E=Bp().dash,S=k().extendFlat,T=Vm().templatedArray;zg();var C=He(),P=kl().shapeTexttemplateAttrs,p=Np();me.exports=T("shape",{visible:S({},C.visible,{editType:"calc+arraydraw"}),showlegend:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},legend:S({},C.legend,{editType:"calc+arraydraw"}),legendgroup:S({},C.legendgroup,{editType:"calc+arraydraw"}),legendgrouptitle:{text:S({},C.legendgrouptitle.text,{editType:"calc+arraydraw"}),font:v({editType:"calc+arraydraw"}),editType:"calc+arraydraw"},legendrank:S({},C.legendrank,{editType:"calc+arraydraw"}),legendwidth:S({},C.legendwidth,{editType:"calc+arraydraw"}),type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above","between"],dflt:"above",editType:"arraydraw"},xref:S({},M.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},x0shift:{valType:"number",dflt:0,min:-1,max:1,editType:"calc"},x1shift:{valType:"number",dflt:0,min:-1,max:1,editType:"calc"},yref:S({},M.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},y0shift:{valType:"number",dflt:0,min:-1,max:1,editType:"calc"},y1shift:{valType:"number",dflt:0,min:-1,max:1,editType:"calc"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:S({},g.color,{editType:"arraydraw"}),width:S({},g.width,{editType:"calc+arraydraw"}),dash:S({},E,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},label:{text:{valType:"string",dflt:"",editType:"arraydraw"},texttemplate:P({},{keys:Object.keys(p)}),font:v({editType:"calc+arraydraw",colorEditType:"arraydraw"}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"],editType:"arraydraw"},textangle:{valType:"angle",dflt:"auto",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],editType:"calc+arraydraw"},padding:{valType:"number",dflt:3,min:0,editType:"arraydraw"},editType:"arraydraw"},editType:"arraydraw"})}}),Sx=a({"src/components/shapes/defaults.js"(pe,me){var M=o0(),v=g1(),g=U1(),E=yg(),S=fy();me.exports=function(p,Y){g(p,Y,{name:"shapes",handleItemDefaults:C})};function T(P,p){return P?"bottom":p.indexOf("top")!==-1?"top":p.indexOf("bottom")!==-1?"bottom":"middle"}function C(P,p,Y){function N(Ae,ke){return M.coerce(P,p,E,Ae,ke)}p._isShape=!0;var j=N("visible");if(j){var ee=N("showlegend");ee&&(N("legend"),N("legendwidth"),N("legendgroup"),N("legendgrouptitle.text"),M.coerceFont(N,"legendgrouptitle.font"),N("legendrank"));var G=N("path"),V=G?"path":"rect",W=N("type",V),q=W!=="path";q&&delete p.path,N("editable"),N("layer"),N("opacity"),N("fillcolor"),N("fillrule");var z=N("line.width");z&&(N("line.color"),N("line.dash"));for(var H=N("xsizemode"),Z=N("ysizemode"),ne=["x","y"],te=0;te<2;te++){var Se=ne[te],fe=Se+"anchor",ve=Se==="x"?H:Z,xe={_fullLayout:Y},re,de,be,Te=v.coerceRef(P,p,xe,Se,void 0,"paper"),ye=v.getRefType(Te);if(ye==="range"?(re=v.getFromId(xe,Te),re._shapeIndices.push(p._index),be=S.rangeToShapePosition(re),de=S.shapePositionToRange(re),(re.type==="category"||re.type==="multicategory")&&(N(Se+"0shift"),N(Se+"1shift"))):de=be=M.identity,q){var De=.25,Ue=.75,he=Se+"0",Be=Se+"1",Ye=P[he],et=P[Be];P[he]=de(P[he],!0),P[Be]=de(P[Be],!0),ve==="pixel"?(N(he,0),N(Be,10)):(v.coercePosition(p,xe,N,Te,he,De),v.coercePosition(p,xe,N,Te,Be,Ue)),p[he]=be(p[he]),p[Be]=be(p[Be]),P[he]=Ye,P[Be]=et}if(ve==="pixel"){var Qe=P[fe];P[fe]=de(P[fe],!0),v.coercePosition(p,xe,N,Te,fe,.25),p[fe]=be(p[fe]),P[fe]=Qe}}q&&M.noneOrAll(P,p,["x0","x1","y0","y1"]);var ft=W==="line",mn,ta;if(q&&(mn=N("label.texttemplate")),mn||(ta=N("label.text")),ta||mn){N("label.textangle");var Do=N("label.textposition",ft?"middle":"middle center");N("label.xanchor"),N("label.yanchor",T(ft,Do)),N("label.padding"),M.coerceFont(N,"label.font",Y.font)}}}}}),vy=a({"src/components/shapes/draw_newshape/defaults.js"(pe,me){var M=Oe(),v=o0();function g(E,S){return E?"bottom":S.indexOf("top")!==-1?"top":S.indexOf("bottom")!==-1?"bottom":"middle"}me.exports=function(S,T,C){C("newshape.visible"),C("newshape.name"),C("newshape.showlegend"),C("newshape.legend"),C("newshape.legendwidth"),C("newshape.legendgroup"),C("newshape.legendgrouptitle.text"),v.coerceFont(C,"newshape.legendgrouptitle.font"),C("newshape.legendrank"),C("newshape.drawdirection"),C("newshape.layer"),C("newshape.fillcolor"),C("newshape.fillrule"),C("newshape.opacity");var P=C("newshape.line.width");if(P){var p=(S||{}).plot_bgcolor||"#FFF";C("newshape.line.color",M.contrast(p)),C("newshape.line.dash")}var Y=S.dragmode==="drawline",N=C("newshape.label.text"),j=C("newshape.label.texttemplate");if(N||j){C("newshape.label.textangle");var ee=C("newshape.label.textposition",Y?"middle":"middle center");C("newshape.label.xanchor"),C("newshape.label.yanchor",g(Y,ee)),C("newshape.label.padding"),v.coerceFont(C,"newshape.label.font",T.font)}C("activeshape.fillcolor"),C("activeshape.opacity")}}}),db=a({"src/components/shapes/calc_autorange.js"(pe,me){var M=o0(),v=g1(),g=Ry(),E=fy();me.exports=function(Y){var N=Y._fullLayout,j=M.filterVisible(N.shapes);if(!(!j.length||!Y._fullData.length))for(var ee=0;ee<j.length;ee++){var G=j[ee];G._extremes={};var V,W,q=v.getRefType(G.xref),z=v.getRefType(G.yref);G.xref!=="paper"&&q!=="domain"&&(V=v.getFromId(Y,G.xref),W=P(V,G,g.paramIsX),W&&(G._extremes[V._id]=v.findExtremes(V,W,S(G)))),G.yref!=="paper"&&z!=="domain"&&(V=v.getFromId(Y,G.yref),W=P(V,G,g.paramIsY),W&&(G._extremes[V._id]=v.findExtremes(V,W,T(G))))}};function S(p){return C(p.line.width,p.xsizemode,p.x0,p.x1,p.path,!1)}function T(p){return C(p.line.width,p.ysizemode,p.y0,p.y1,p.path,!0)}function C(p,Y,N,j,ee,G){var V=p/2,W=G;if(Y==="pixel"){var q=ee?E.extractPathCoords(ee,G?g.paramIsY:g.paramIsX):[N,j],z=M.aggNums(Math.max,null,q),H=M.aggNums(Math.min,null,q),Z=H<0?Math.abs(H)+V:V,ne=z>0?z+V:V;return{ppad:V,ppadplus:W?Z:ne,ppadminus:W?ne:Z}}else return{ppad:V}}function P(p,Y,N){var j=p._id.charAt(0)==="x"?"x":"y",ee=p.type==="category"||p.type==="multicategory",G,V,W=0,q=0,z=ee?p.r2c:p.d2c,H=Y[j+"sizemode"]==="scaled";if(H?(G=Y[j+"0"],V=Y[j+"1"],ee&&(W=Y[j+"0shift"],q=Y[j+"1shift"])):(G=Y[j+"anchor"],V=Y[j+"anchor"]),G!==void 0)return[z(G)+W,z(V)+q];if(Y.path){var Z=1/0,ne=-1/0,te=Y.path.match(g.segmentRE),Se,fe,ve,xe,re;for(p.type==="date"&&(z=E.decodeDate(z)),Se=0;Se<te.length;Se++)fe=te[Se],ve=N[fe.charAt(0)].drawn,ve!==void 0&&(xe=te[Se].substr(1).match(g.paramRE),!(!xe||xe.length<ve)&&(re=z(xe[ve]),re<Z&&(Z=re),re>ne&&(ne=re)));if(ne>=Z)return[Z,ne]}}}}),E_=a({"src/components/shapes/index.js"(pe,me){var M=lx();me.exports={moduleType:"component",name:"shapes",layoutAttributes:yg(),supplyLayoutDefaults:Sx(),supplyDrawNewShapeDefaults:vy(),includeBasePlot:Qy()("shapes"),calcAutorange:db(),draw:M.draw,drawOne:M.drawOne}}}),gy=a({"src/components/images/attributes.js"(pe,me){var M=wv(),v=Vm().templatedArray;zg(),me.exports=v("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",M.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",M.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})}}),i_=a({"src/components/images/defaults.js"(pe,me){var M=o0(),v=g1(),g=U1(),E=gy(),S="images";me.exports=function(P,p){var Y={name:S,handleItemDefaults:T};g(P,p,Y)};function T(C,P,p){function Y(H,Z){return M.coerce(C,P,E,H,Z)}var N=Y("source"),j=Y("visible",!!N);if(!j)return P;Y("layer"),Y("xanchor"),Y("yanchor"),Y("sizex"),Y("sizey"),Y("sizing"),Y("opacity");for(var ee={_fullLayout:p},G=["x","y"],V=0;V<2;V++){var W=G[V],q=v.coerceRef(C,P,ee,W,"paper",void 0);if(q!=="paper"){var z=v.getFromId(ee,q);z._imgIndices.push(P._index)}v.coercePosition(P,ee,Y,q,W,0)}return P}}}),Tx=a({"src/components/images/draw.js"(pe,me){var M=f(),v=t1(),g=g1(),E=Ov(),S=P1();me.exports=function(C){var P=C._fullLayout,p=[],Y={},N=[],j,ee;for(ee=0;ee<P.images.length;ee++){var G=P.images[ee];if(G.visible)if(G.layer==="below"&&G.xref!=="paper"&&G.yref!=="paper"){j=E.ref2id(G.xref)+E.ref2id(G.yref);var V=P._plots[j];if(!V){N.push(G);continue}V.mainplot&&(j=V.mainplot.id),Y[j]||(Y[j]=[]),Y[j].push(G)}else G.layer==="above"?p.push(G):N.push(G)}var W={x:{left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-1/2},right:{sizing:"xMax",offset:-1}},y:{top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-1/2},bottom:{sizing:"YMax",offset:-1}}};function q(xe){var re=M.select(this);if(this._imgSrc!==xe.source)if(re.attr("xmlns",S.svg),!C._context.staticPlot||xe.source&&xe.source.slice(0,5)==="data:")re.attr("xlink:href",xe.source),this._imgSrc=xe.source;else{var de=new Promise((function(be){var Te=new Image;this.img=Te,Te.setAttribute("crossOrigin","anonymous"),Te.onerror=ye,Te.onload=function(){var De=document.createElement("canvas");De.width=this.width,De.height=this.height;var Ue=De.getContext("2d",{willReadFrequently:!0});Ue.drawImage(this,0,0);var he=De.toDataURL("image/png");re.attr("xlink:href",he),be()},re.on("error",ye),Te.src=xe.source,this._imgSrc=xe.source;function ye(){re.remove(),be()}}).bind(this));C._promises.push(de)}}function z(xe){var re=M.select(this),de=g.getFromId(C,xe.xref),be=g.getFromId(C,xe.yref),Te=g.getRefType(xe.xref)==="domain",ye=g.getRefType(xe.yref)==="domain",De=P._size,Ue,he;de!==void 0?Ue=typeof xe.xref=="string"&&Te?de._length*xe.sizex:Math.abs(de.l2p(xe.sizex)-de.l2p(0)):Ue=xe.sizex*De.w,be!==void 0?he=typeof xe.yref=="string"&&ye?be._length*xe.sizey:Math.abs(be.l2p(xe.sizey)-be.l2p(0)):he=xe.sizey*De.h;var Be=Ue*W.x[xe.xanchor].offset,Ye=he*W.y[xe.yanchor].offset,et=W.x[xe.xanchor].sizing+W.y[xe.yanchor].sizing,Qe,ft;switch(de!==void 0?Qe=typeof xe.xref=="string"&&Te?de._length*xe.x+de._offset:de.r2p(xe.x)+de._offset:Qe=xe.x*De.w+De.l,Qe+=Be,be!==void 0?ft=typeof xe.yref=="string"&&ye?be._length*(1-xe.y)+be._offset:be.r2p(xe.y)+be._offset:ft=De.h-xe.y*De.h+De.t,ft+=Ye,xe.sizing){case"fill":et+=" slice";break;case"stretch":et="none";break}re.attr({x:Qe,y:ft,width:Ue,height:he,preserveAspectRatio:et,opacity:xe.opacity});var mn=de&&g.getRefType(xe.xref)!=="domain"?de._id:"",ta=be&&g.getRefType(xe.yref)!=="domain"?be._id:"",Do=mn+ta;v.setClipUrl(re,Do?"clip"+P._uid+Do:null,C)}function H(xe){return[xe.xref,xe.x,xe.sizex,xe.yref,xe.y,xe.sizey].join("_")}function Z(xe,re){return xe._index-re._index}var ne=P._imageLowerLayer.selectAll("image").data(N,H),te=P._imageUpperLayer.selectAll("image").data(p,H);ne.enter().append("image"),te.enter().append("image"),ne.exit().remove(),te.exit().remove(),ne.each(function(xe){q.bind(this)(xe),z.bind(this)(xe)}),te.each(function(xe){q.bind(this)(xe),z.bind(this)(xe)}),ne.sort(Z),te.sort(Z);var Se=Object.keys(P._plots);for(ee=0;ee<Se.length;ee++){j=Se[ee];var fe=P._plots[j];if(fe.imagelayer){var ve=fe.imagelayer.selectAll("image").data(Y[j]||[],H);ve.enter().append("image"),ve.exit().remove(),ve.each(function(xe){q.bind(this)(xe),z.bind(this)(xe)}),ve.sort(Z)}}}}}),o2=a({"src/components/images/convert_coords.js"(pe,me){var M=w(),v=R();me.exports=function(E,S,T,C){S=S||{};var P=T==="log"&&S.type==="linear",p=T==="linear"&&S.type==="log";if(P||p){for(var Y=E._fullLayout.images,N=S._id.charAt(0),j,ee,G=0;G<Y.length;G++)if(j=Y[G],ee="images["+G+"].",j[N+"ref"]===S._id){var V=j[N],W=j["size"+N],q=null,z=null;if(P){q=v(V,S.range);var H=W/Math.pow(10,q)/2;z=2*Math.log(H+Math.sqrt(1+H*H))/Math.LN10}else q=Math.pow(10,V),z=q*(Math.pow(10,W/2)-Math.pow(10,-W/2));M(q)?M(z)||(z=null):(q=null,z=null),C(ee+N,q),C(ee+"size"+N,z)}}}}}),Ex=a({"src/components/images/index.js"(pe,me){me.exports={moduleType:"component",name:"images",layoutAttributes:gy(),supplyLayoutDefaults:i_(),includeBasePlot:Qy()("images"),draw:Tx(),convertCoords:o2()}}}),yy=a({"src/components/updatemenus/constants.js"(pe,me){me.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"◄",right:"►",up:"▲",down:"▼"}}}}),iy=a({"src/components/updatemenus/attributes.js"(pe,me){var M=B(),v=ue(),g=k().extendFlat,E=Xl().overrideAll,S=g0(),T=Vm().templatedArray,C=T("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});me.exports=E(T("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:C,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:g(S({editType:"arraydraw"}),{}),font:M({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:v.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")}}),Iy=a({"src/components/updatemenus/defaults.js"(pe,me){var M=o0(),v=U1(),g=iy(),E=yy(),S=E.name,T=g.buttons;me.exports=function(Y,N){var j={name:S,handleItemDefaults:C};v(Y,N,j)};function C(p,Y,N){function j(V,W){return M.coerce(p,Y,g,V,W)}var ee=v(p,Y,{name:"buttons",handleItemDefaults:P}),G=j("visible",ee.length>0);G&&(j("active"),j("direction"),j("type"),j("showactive"),j("x"),j("y"),M.noneOrAll(p,Y,["x","y"]),j("xanchor"),j("yanchor"),j("pad.t"),j("pad.r"),j("pad.b"),j("pad.l"),M.coerceFont(j,"font",N.font),j("bgcolor",N.paper_bgcolor),j("bordercolor"),j("borderwidth"))}function P(p,Y){function N(ee,G){return M.coerce(p,Y,T,ee,G)}var j=N("visible",p.method==="skip"||Array.isArray(p.args));j&&(N("method"),N("args"),N("args2"),N("label"),N("execute"))}}}),_y=a({"src/components/updatemenus/scrollbox.js"(pe,me){me.exports=S;var M=f(),v=Oe(),g=t1(),E=o0();function S(T,C,P){this.gd=T,this.container=C,this.id=P,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}S.barWidth=2,S.barLength=20,S.barRadius=2,S.barPad=1,S.barColor="#808BA4",S.prototype.enable=function(C,P,p){var Y=this.gd._fullLayout,N=Y.width,j=Y.height;this.position=C;var ee=this.position.l,G=this.position.w,V=this.position.t,W=this.position.h,q=this.position.direction,z=q==="down",H=q==="left",Z=q==="right",ne=q==="up",te=G,Se=W,fe,ve,xe,re;!z&&!H&&!Z&&!ne&&(this.position.direction="down",z=!0);var de=z||ne;de?(fe=ee,ve=fe+te,z?(xe=V,re=Math.min(xe+Se,j),Se=re-xe):(re=V+Se,xe=Math.max(re-Se,0),Se=re-xe)):(xe=V,re=xe+Se,H?(ve=ee+te,fe=Math.max(ve-te,0),te=ve-fe):(fe=ee,ve=Math.min(fe+te,N),te=ve-fe)),this._box={l:fe,t:xe,w:te,h:Se};var be=G>te,Te=S.barLength+2*S.barPad,ye=S.barWidth+2*S.barPad,De=ee,Ue=V+W;Ue+ye>j&&(Ue=j-ye);var he=this.container.selectAll("rect.scrollbar-horizontal").data(be?[0]:[]);he.exit().on(".drag",null).remove(),he.enter().append("rect").classed("scrollbar-horizontal",!0).call(v.fill,S.barColor),be?(this.hbar=he.attr({rx:S.barRadius,ry:S.barRadius,x:De,y:Ue,width:Te,height:ye}),this._hbarXMin=De+Te/2,this._hbarTranslateMax=te-Te):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var Be=W>Se,Ye=S.barWidth+2*S.barPad,et=S.barLength+2*S.barPad,Qe=ee+G,ft=V;Qe+Ye>N&&(Qe=N-Ye);var mn=this.container.selectAll("rect.scrollbar-vertical").data(Be?[0]:[]);mn.exit().on(".drag",null).remove(),mn.enter().append("rect").classed("scrollbar-vertical",!0).call(v.fill,S.barColor),Be?(this.vbar=mn.attr({rx:S.barRadius,ry:S.barRadius,x:Qe,y:ft,width:Ye,height:et}),this._vbarYMin=ft+et/2,this._vbarTranslateMax=Se-et):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var ta=this.id,Do=fe-.5,Ae=Be?ve+Ye+.5:ve+.5,ke=xe-.5,ge=be?re+ye+.5:re+.5,Ce=Y._topdefs.selectAll("#"+ta).data(be||Be?[0]:[]);if(Ce.exit().remove(),Ce.enter().append("clipPath").attr("id",ta).append("rect"),be||Be?(this._clipRect=Ce.select("rect").attr({x:Math.floor(Do),y:Math.floor(ke),width:Math.ceil(Ae)-Math.floor(Do),height:Math.ceil(ge)-Math.floor(ke)}),this.container.call(g.setClipUrl,ta,this.gd),this.bg.attr({x:ee,y:V,width:G,height:W})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(g.setClipUrl,null),delete this._clipRect),be||Be){var Je=M.behavior.drag().on("dragstart",function(){M.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(Je);var Re=M.behavior.drag().on("dragstart",function(){M.event.sourceEvent.preventDefault(),M.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));be&&this.hbar.on(".drag",null).call(Re),Be&&this.vbar.on(".drag",null).call(Re)}this.setTranslate(P,p)},S.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(g.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},S.prototype._onBoxDrag=function(){var C=this.translateX,P=this.translateY;this.hbar&&(C-=M.event.dx),this.vbar&&(P-=M.event.dy),this.setTranslate(C,P)},S.prototype._onBoxWheel=function(){var C=this.translateX,P=this.translateY;this.hbar&&(C+=M.event.deltaY),this.vbar&&(P+=M.event.deltaY),this.setTranslate(C,P)},S.prototype._onBarDrag=function(){var C=this.translateX,P=this.translateY;if(this.hbar){var p=C+this._hbarXMin,Y=p+this._hbarTranslateMax,N=E.constrain(M.event.x,p,Y),j=(N-p)/(Y-p),ee=this.position.w-this._box.w;C=j*ee}if(this.vbar){var G=P+this._vbarYMin,V=G+this._vbarTranslateMax,W=E.constrain(M.event.y,G,V),q=(W-G)/(V-G),z=this.position.h-this._box.h;P=q*z}this.setTranslate(C,P)},S.prototype.setTranslate=function(C,P){var p=this.position.w-this._box.w,Y=this.position.h-this._box.h;if(C=E.constrain(C||0,0,p),P=E.constrain(P||0,0,Y),this.translateX=C,this.translateY=P,this.container.call(g.setTranslate,this._box.l-this.position.l-C,this._box.t-this.position.t-P),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+C-.5),y:Math.floor(this.position.t+P-.5)}),this.hbar){var N=C/p;this.hbar.call(g.setTranslate,C+N*this._hbarTranslateMax,P)}if(this.vbar){var j=P/Y;this.vbar.call(g.setTranslate,C,P+j*this._vbarTranslateMax)}}}}),Ax=a({"src/components/updatemenus/draw.js"(pe,me){var M=f(),v=p1(),g=Oe(),E=t1(),S=o0(),T=v1(),C=Vm().arrayEditor,P=f1().LINE_SPACING,p=yy(),Y=_y();me.exports=function(Te){var ye=Te._fullLayout,De=S.filterVisible(ye[p.name]);function Ue(ta){v.autoMargin(Te,xe(ta))}var he=ye._menulayer.selectAll("g."+p.containerClassName).data(De.length>0?[0]:[]);if(he.enter().append("g").classed(p.containerClassName,!0).style("cursor","pointer"),he.exit().each(function(){M.select(this).selectAll("g."+p.headerGroupClassName).each(Ue)}).remove(),De.length!==0){var Be=he.selectAll("g."+p.headerGroupClassName).data(De,N);Be.enter().append("g").classed(p.headerGroupClassName,!0);for(var Ye=S.ensureSingle(he,"g",p.dropdownButtonGroupClassName,function(ta){ta.style("pointer-events","all")}),et=0;et<De.length;et++){var Qe=De[et];ve(Te,Qe)}var ft="updatemenus"+ye._uid,mn=new Y(Te,Ye,ft);Be.enter().size()&&(Ye.node().parentNode.appendChild(Ye.node()),Ye.call(de)),Be.exit().each(function(ta){Ye.call(de),Ue(ta)}).remove(),Be.each(function(ta){var Do=M.select(this),Ae=ta.type==="dropdown"?Ye:null;v.manageCommandObserver(Te,ta,ta.buttons,function(ke){G(Te,ta,ta.buttons[ke.index],Do,Ae,mn,ke.index,!0)}),ta.type==="dropdown"?(V(Te,Do,Ye,mn,ta),ee(Ye,ta)&&W(Te,Do,Ye,mn,ta)):W(Te,Do,null,null,ta)})}};function N(be){return be._index}function j(be){return+be.attr(p.menuIndexAttrName)==-1}function ee(be,Te){return+be.attr(p.menuIndexAttrName)===Te._index}function G(be,Te,ye,De,Ue,he,Be,Ye){Te.active=Be,C(be.layout,p.name,Te).applyUpdate("active",Be),Te.type==="buttons"?W(be,De,null,null,Te):Te.type==="dropdown"&&(Ue.attr(p.menuIndexAttrName,"-1"),V(be,De,Ue,he,Te),Ye||W(be,De,Ue,he,Te))}function V(be,Te,ye,De,Ue){var he=S.ensureSingle(Te,"g",p.headerClassName,function(ta){ta.style("pointer-events","all")}),Be=Ue._dims,Ye=Ue.active,et=Ue.buttons[Ye]||p.blankHeaderOpts,Qe={y:Ue.pad.t,yPad:0,x:Ue.pad.l,xPad:0,index:0},ft={width:Be.headerWidth,height:Be.headerHeight};he.call(H,Ue,et,be).call(re,Ue,Qe,ft);var mn=S.ensureSingle(Te,"text",p.headerArrowClassName,function(ta){ta.attr("text-anchor","end").call(E.font,Ue.font).text(p.arrowSymbol[Ue.direction])});mn.attr({x:Be.headerWidth-p.arrowOffsetX+Ue.pad.l,y:Be.headerHeight/2+p.textOffsetY+Ue.pad.t}),he.on("click",function(){ye.call(de,String(ee(ye,Ue)?-1:Ue._index)),W(be,Te,ye,De,Ue)}),he.on("mouseover",function(){he.call(Se)}),he.on("mouseout",function(){he.call(fe,Ue)}),E.setTranslate(Te,Be.lx,Be.ly)}function W(be,Te,ye,De,Ue){ye||(ye=Te,ye.attr("pointer-events","all"));var he=!j(ye)||Ue.type==="buttons"?Ue.buttons:[],Be=Ue.type==="dropdown"?p.dropdownButtonClassName:p.buttonClassName,Ye=ye.selectAll("g."+Be).data(S.filterVisible(he)),et=Ye.enter().append("g").classed(Be,!0),Qe=Ye.exit();Ue.type==="dropdown"?(et.attr("opacity","0").transition().attr("opacity","1"),Qe.transition().attr("opacity","0").remove()):Qe.remove();var ft=0,mn=0,ta=Ue._dims,Do=["up","down"].indexOf(Ue.direction)!==-1;Ue.type==="dropdown"&&(Do?mn=ta.headerHeight+p.gapButtonHeader:ft=ta.headerWidth+p.gapButtonHeader),Ue.type==="dropdown"&&Ue.direction==="up"&&(mn=-p.gapButtonHeader+p.gapButton-ta.openHeight),Ue.type==="dropdown"&&Ue.direction==="left"&&(ft=-p.gapButtonHeader+p.gapButton-ta.openWidth);var Ae={x:ta.lx+ft+Ue.pad.l,y:ta.ly+mn+Ue.pad.t,yPad:p.gapButton,xPad:p.gapButton,index:0},ke={l:Ae.x+Ue.borderwidth,t:Ae.y+Ue.borderwidth};Ye.each(function(ge,Ce){var Je=M.select(this);Je.call(H,Ue,ge,be).call(re,Ue,Ae),Je.on("click",function(){M.event.defaultPrevented||(ge.execute&&(ge.args2&&Ue.active===Ce?(G(be,Ue,ge,Te,ye,De,-1),v.executeAPICommand(be,ge.method,ge.args2)):(G(be,Ue,ge,Te,ye,De,Ce),v.executeAPICommand(be,ge.method,ge.args))),be.emit("plotly_buttonclicked",{menu:Ue,button:ge,active:Ue.active}))}),Je.on("mouseover",function(){Je.call(Se)}),Je.on("mouseout",function(){Je.call(fe,Ue),Ye.call(te,Ue)})}),Ye.call(te,Ue),Do?(ke.w=Math.max(ta.openWidth,ta.headerWidth),ke.h=Ae.y-ke.t):(ke.w=Ae.x-ke.l,ke.h=Math.max(ta.openHeight,ta.headerHeight)),ke.direction=Ue.direction,De&&(Ye.size()?q(be,Te,ye,De,Ue,ke):z(De))}function q(be,Te,ye,De,Ue,he){var Be=Ue.direction,Ye=Be==="up"||Be==="down",et=Ue._dims,Qe=Ue.active,ft,mn,ta;if(Ye)for(mn=0,ta=0;ta<Qe;ta++)mn+=et.heights[ta]+p.gapButton;else for(ft=0,ta=0;ta<Qe;ta++)ft+=et.widths[ta]+p.gapButton;De.enable(he,ft,mn),De.hbar&&De.hbar.attr("opacity","0").transition().attr("opacity","1"),De.vbar&&De.vbar.attr("opacity","0").transition().attr("opacity","1")}function z(be){var Te=!!be.hbar,ye=!!be.vbar;Te&&be.hbar.transition().attr("opacity","0").each("end",function(){Te=!1,ye||be.disable()}),ye&&be.vbar.transition().attr("opacity","0").each("end",function(){ye=!1,Te||be.disable()})}function H(be,Te,ye,De){be.call(Z,Te).call(ne,Te,ye,De)}function Z(be,Te){var ye=S.ensureSingle(be,"rect",p.itemRectClassName,function(De){De.attr({rx:p.rx,ry:p.ry,"shape-rendering":"crispEdges"})});ye.call(g.stroke,Te.bordercolor).call(g.fill,Te.bgcolor).style("stroke-width",Te.borderwidth+"px")}function ne(be,Te,ye,De){var Ue=S.ensureSingle(be,"text",p.itemTextClassName,function(Ye){Ye.attr({"text-anchor":"start","data-notex":1})}),he=ye.label,Be=De._fullLayout._meta;Be&&(he=S.templateString(he,Be)),Ue.call(E.font,Te.font).text(he).call(T.convertToTspans,De)}function te(be,Te){var ye=Te.active;be.each(function(De,Ue){var he=M.select(this);Ue===ye&&Te.showactive&&he.select("rect."+p.itemRectClassName).call(g.fill,p.activeColor)})}function Se(be){be.select("rect."+p.itemRectClassName).call(g.fill,p.hoverColor)}function fe(be,Te){be.select("rect."+p.itemRectClassName).call(g.fill,Te.bgcolor)}function ve(be,Te){var ye=Te._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},De=E.tester.selectAll("g."+p.dropdownButtonClassName).data(S.filterVisible(Te.buttons));De.enter().append("g").classed(p.dropdownButtonClassName,!0);var Ue=["up","down"].indexOf(Te.direction)!==-1;De.each(function(ft,mn){var ta=M.select(this);ta.call(H,Te,ft,be);var Do=ta.select("."+p.itemTextClassName),Ae=Do.node()&&E.bBox(Do.node()).width,ke=Math.max(Ae+p.textPadX,p.minWidth),ge=Te.font.size*P,Ce=T.lineCount(Do),Je=Math.max(ge*Ce,p.minHeight)+p.textOffsetY;Je=Math.ceil(Je),ke=Math.ceil(ke),ye.widths[mn]=ke,ye.heights[mn]=Je,ye.height1=Math.max(ye.height1,Je),ye.width1=Math.max(ye.width1,ke),Ue?(ye.totalWidth=Math.max(ye.totalWidth,ke),ye.openWidth=ye.totalWidth,ye.totalHeight+=Je+p.gapButton,ye.openHeight+=Je+p.gapButton):(ye.totalWidth+=ke+p.gapButton,ye.openWidth+=ke+p.gapButton,ye.totalHeight=Math.max(ye.totalHeight,Je),ye.openHeight=ye.totalHeight)}),Ue?ye.totalHeight-=p.gapButton:ye.totalWidth-=p.gapButton,ye.headerWidth=ye.width1+p.arrowPadX,ye.headerHeight=ye.height1,Te.type==="dropdown"&&(Ue?(ye.width1+=p.arrowPadX,ye.totalHeight=ye.height1):ye.totalWidth=ye.width1,ye.totalWidth+=p.arrowPadX),De.remove();var he=ye.totalWidth+Te.pad.l+Te.pad.r,Be=ye.totalHeight+Te.pad.t+Te.pad.b,Ye=be._fullLayout._size;ye.lx=Ye.l+Ye.w*Te.x,ye.ly=Ye.t+Ye.h*(1-Te.y);var et="left";S.isRightAnchor(Te)&&(ye.lx-=he,et="right"),S.isCenterAnchor(Te)&&(ye.lx-=he/2,et="center");var Qe="top";S.isBottomAnchor(Te)&&(ye.ly-=Be,Qe="bottom"),S.isMiddleAnchor(Te)&&(ye.ly-=Be/2,Qe="middle"),ye.totalWidth=Math.ceil(ye.totalWidth),ye.totalHeight=Math.ceil(ye.totalHeight),ye.lx=Math.round(ye.lx),ye.ly=Math.round(ye.ly),v.autoMargin(be,xe(Te),{x:Te.x,y:Te.y,l:he*({right:1,center:.5}[et]||0),r:he*({left:1,center:.5}[et]||0),b:Be*({top:1,middle:.5}[Qe]||0),t:Be*({bottom:1,middle:.5}[Qe]||0)})}function xe(be){return p.autoMarginIdRoot+be._index}function re(be,Te,ye,De){De=De||{};var Ue=be.select("."+p.itemRectClassName),he=be.select("."+p.itemTextClassName),Be=Te.borderwidth,Ye=ye.index,et=Te._dims;E.setTranslate(be,Be+ye.x,Be+ye.y);var Qe=["up","down"].indexOf(Te.direction)!==-1,ft=De.height||(Qe?et.heights[Ye]:et.height1);Ue.attr({x:0,y:0,width:De.width||(Qe?et.width1:et.widths[Ye]),height:ft});var mn=Te.font.size*P,ta=T.lineCount(he),Do=(ta-1)*mn/2;T.positionText(he,p.textOffsetX,ft/2-Do+p.textOffsetY),Qe?ye.y+=et.heights[Ye]+ye.yPad:ye.x+=et.widths[Ye]+ye.xPad,ye.index++}function de(be,Te){be.attr(p.menuIndexAttrName,Te||"-1").selectAll("g."+p.dropdownButtonClassName).remove()}}}),Cx=a({"src/components/updatemenus/index.js"(pe,me){var M=yy();me.exports={moduleType:"component",name:M.name,layoutAttributes:iy(),supplyLayoutDefaults:Iy(),draw:Ax()}}}),xy=a({"src/components/sliders/constants.js"(pe,me){me.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}}}),l2=a({"src/components/sliders/attributes.js"(pe,me){var M=B(),v=g0(),g=k().extendDeepAll,E=Xl().overrideAll,S=x0(),T=Vm().templatedArray,C=xy(),P=T("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});me.exports=E(T("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:P,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:g(v({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:S.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:M({})},font:M({}),activebgcolor:{valType:"color",dflt:C.gripBgActiveColor},bgcolor:{valType:"color",dflt:C.railBgColor},bordercolor:{valType:"color",dflt:C.railBorderColor},borderwidth:{valType:"number",min:0,dflt:C.railBorderWidth},ticklen:{valType:"number",min:0,dflt:C.tickLength},tickcolor:{valType:"color",dflt:C.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:C.minorTickLength}}),"arraydraw","from-root")}}),s_=a({"src/components/sliders/defaults.js"(pe,me){var M=o0(),v=U1(),g=l2(),E=xy(),S=E.name,T=g.steps;me.exports=function(Y,N){v(Y,N,{name:S,handleItemDefaults:C})};function C(p,Y,N){function j(Z,ne){return M.coerce(p,Y,g,Z,ne)}for(var ee=v(p,Y,{name:"steps",handleItemDefaults:P}),G=0,V=0;V<ee.length;V++)ee[V].visible&&G++;var W;if(G<2?W=Y.visible=!1:W=j("visible"),!!W){Y._stepCount=G;var q=Y._visibleSteps=M.filterVisible(ee),z=j("active");(ee[z]||{}).visible||(Y.active=q[0]._index),j("x"),j("y"),M.noneOrAll(p,Y,["x","y"]),j("xanchor"),j("yanchor"),j("len"),j("lenmode"),j("pad.t"),j("pad.r"),j("pad.b"),j("pad.l"),M.coerceFont(j,"font",N.font);var H=j("currentvalue.visible");H&&(j("currentvalue.xanchor"),j("currentvalue.prefix"),j("currentvalue.suffix"),j("currentvalue.offset"),M.coerceFont(j,"currentvalue.font",Y.font)),j("transition.duration"),j("transition.easing"),j("bgcolor"),j("activebgcolor"),j("bordercolor"),j("borderwidth"),j("ticklen"),j("tickwidth"),j("tickcolor"),j("minorticklen")}}function P(p,Y){function N(G,V){return M.coerce(p,Y,T,G,V)}var j;if(p.method!=="skip"&&!Array.isArray(p.args)?j=Y.visible=!1:j=N("visible"),j){N("method"),N("args");var ee=N("label","step-"+Y._index);N("value",ee),N("execute")}}}}),cg=a({"src/components/sliders/draw.js"(pe,me){var M=f(),v=p1(),g=Oe(),E=t1(),S=o0(),T=S.strTranslate,C=v1(),P=Vm().arrayEditor,p=xy(),Y=f1(),N=Y.LINE_SPACING,j=Y.FROM_TL,ee=Y.FROM_BR;me.exports=function(he){var Be=he._context.staticPlot,Ye=he._fullLayout,et=V(Ye,he),Qe=Ye._infolayer.selectAll("g."+p.containerClassName).data(et.length>0?[0]:[]);Qe.enter().append("g").classed(p.containerClassName,!0).style("cursor",Be?null:"ew-resize");function ft(Ae){Ae._commandObserver&&(Ae._commandObserver.remove(),delete Ae._commandObserver),v.autoMargin(he,G(Ae))}if(Qe.exit().each(function(){M.select(this).selectAll("g."+p.groupClassName).each(ft)}).remove(),et.length!==0){var mn=Qe.selectAll("g."+p.groupClassName).data(et,W);mn.enter().append("g").classed(p.groupClassName,!0),mn.exit().each(ft).remove();for(var ta=0;ta<et.length;ta++){var Do=et[ta];q(he,Do)}mn.each(function(Ae){var ke=M.select(this);re(Ae),v.manageCommandObserver(he,Ae,Ae._visibleSteps,function(ge){var Ce=ke.data()[0];Ce.active!==ge.index&&(Ce._dragging||fe(he,ke,Ce,ge.index,!1,!0))}),z(he,M.select(this),Ae)})}};function G(Ue){return p.autoMarginIdRoot+Ue._index}function V(Ue,he){for(var Be=Ue[p.name],Ye=[],et=0;et<Be.length;et++){var Qe=Be[et];Qe.visible&&(Qe._gd=he,Ye.push(Qe))}return Ye}function W(Ue){return Ue._index}function q(Ue,he){var Be=E.tester.selectAll("g."+p.labelGroupClass).data(he._visibleSteps);Be.enter().append("g").classed(p.labelGroupClass,!0);var Ye=0,et=0;Be.each(function(Je){var Re=M.select(this),Q=ne(Re,{step:Je},he),ce=Q.node();if(ce){var Me=E.bBox(ce);et=Math.max(et,Me.height),Ye=Math.max(Ye,Me.width)}}),Be.remove();var Qe=he._dims={};Qe.inputAreaWidth=Math.max(p.railWidth,p.gripHeight);var ft=Ue._fullLayout._size;Qe.lx=ft.l+ft.w*he.x,Qe.ly=ft.t+ft.h*(1-he.y),he.lenmode==="fraction"?Qe.outerLength=Math.round(ft.w*he.len):Qe.outerLength=he.len,Qe.inputAreaStart=0,Qe.inputAreaLength=Math.round(Qe.outerLength-he.pad.l-he.pad.r);var mn=Qe.inputAreaLength-2*p.stepInset,ta=mn/(he._stepCount-1),Do=Ye+p.labelPadding;if(Qe.labelStride=Math.max(1,Math.ceil(Do/ta)),Qe.labelHeight=et,Qe.currentValueMaxWidth=0,Qe.currentValueHeight=0,Qe.currentValueTotalHeight=0,Qe.currentValueMaxLines=1,he.currentvalue.visible){var Ae=E.tester.append("g");Be.each(function(Je){var Re=H(Ae,he,Je.label),Q=Re.node()&&E.bBox(Re.node())||{width:0,height:0},ce=C.lineCount(Re);Qe.currentValueMaxWidth=Math.max(Qe.currentValueMaxWidth,Math.ceil(Q.width)),Qe.currentValueHeight=Math.max(Qe.currentValueHeight,Math.ceil(Q.height)),Qe.currentValueMaxLines=Math.max(Qe.currentValueMaxLines,ce)}),Qe.currentValueTotalHeight=Qe.currentValueHeight+he.currentvalue.offset,Ae.remove()}Qe.height=Qe.currentValueTotalHeight+p.tickOffset+he.ticklen+p.labelOffset+Qe.labelHeight+he.pad.t+he.pad.b;var ke="left";S.isRightAnchor(he)&&(Qe.lx-=Qe.outerLength,ke="right"),S.isCenterAnchor(he)&&(Qe.lx-=Qe.outerLength/2,ke="center");var ge="top";S.isBottomAnchor(he)&&(Qe.ly-=Qe.height,ge="bottom"),S.isMiddleAnchor(he)&&(Qe.ly-=Qe.height/2,ge="middle"),Qe.outerLength=Math.ceil(Qe.outerLength),Qe.height=Math.ceil(Qe.height),Qe.lx=Math.round(Qe.lx),Qe.ly=Math.round(Qe.ly);var Ce={y:he.y,b:Qe.height*ee[ge],t:Qe.height*j[ge]};he.lenmode==="fraction"?(Ce.l=0,Ce.xl=he.x-he.len*j[ke],Ce.r=0,Ce.xr=he.x+he.len*ee[ke]):(Ce.x=he.x,Ce.l=Qe.outerLength*j[ke],Ce.r=Qe.outerLength*ee[ke]),v.autoMargin(Ue,G(he),Ce)}function z(Ue,he,Be){(Be.steps[Be.active]||{}).visible||(Be.active=Be._visibleSteps[0]._index),he.call(H,Be).call(De,Be).call(te,Be).call(xe,Be).call(ye,Ue,Be).call(Z,Ue,Be);var Ye=Be._dims;E.setTranslate(he,Ye.lx+Be.pad.l,Ye.ly+Be.pad.t),he.call(de,Be,!1),he.call(H,Be)}function H(Ue,he,Be){if(he.currentvalue.visible){var Ye=he._dims,et,Qe;switch(he.currentvalue.xanchor){case"right":et=Ye.inputAreaLength-p.currentValueInset-Ye.currentValueMaxWidth,Qe="left";break;case"center":et=Ye.inputAreaLength*.5,Qe="middle";break;default:et=p.currentValueInset,Qe="left"}var ft=S.ensureSingle(Ue,"text",p.labelClass,function(ge){ge.attr({"text-anchor":Qe,"data-notex":1})}),mn=he.currentvalue.prefix?he.currentvalue.prefix:"";if(typeof Be=="string")mn+=Be;else{var ta=he.steps[he.active].label,Do=he._gd._fullLayout._meta;Do&&(ta=S.templateString(ta,Do)),mn+=ta}he.currentvalue.suffix&&(mn+=he.currentvalue.suffix),ft.call(E.font,he.currentvalue.font).text(mn).call(C.convertToTspans,he._gd);var Ae=C.lineCount(ft),ke=(Ye.currentValueMaxLines+1-Ae)*he.currentvalue.font.size*N;return C.positionText(ft,et,ke),ft}}function Z(Ue,he,Be){var Ye=S.ensureSingle(Ue,"rect",p.gripRectClass,function(et){et.call(ve,he,Ue,Be).style("pointer-events","all")});Ye.attr({width:p.gripWidth,height:p.gripHeight,rx:p.gripRadius,ry:p.gripRadius}).call(g.stroke,Be.bordercolor).call(g.fill,Be.bgcolor).style("stroke-width",Be.borderwidth+"px")}function ne(Ue,he,Be){var Ye=S.ensureSingle(Ue,"text",p.labelClass,function(ft){ft.attr({"text-anchor":"middle","data-notex":1})}),et=he.step.label,Qe=Be._gd._fullLayout._meta;return Qe&&(et=S.templateString(et,Qe)),Ye.call(E.font,Be.font).text(et).call(C.convertToTspans,Be._gd),Ye}function te(Ue,he){var Be=S.ensureSingle(Ue,"g",p.labelsClass),Ye=he._dims,et=Be.selectAll("g."+p.labelGroupClass).data(Ye.labelSteps);et.enter().append("g").classed(p.labelGroupClass,!0),et.exit().remove(),et.each(function(Qe){var ft=M.select(this);ft.call(ne,Qe,he),E.setTranslate(ft,be(he,Qe.fraction),p.tickOffset+he.ticklen+he.font.size*N+p.labelOffset+Ye.currentValueTotalHeight)})}function Se(Ue,he,Be,Ye,et){var Qe=Math.round(Ye*(Be._stepCount-1)),ft=Be._visibleSteps[Qe]._index;ft!==Be.active&&fe(Ue,he,Be,ft,!0,et)}function fe(Ue,he,Be,Ye,et,Qe){var ft=Be.active;Be.active=Ye,P(Ue.layout,p.name,Be).applyUpdate("active",Ye);var mn=Be.steps[Be.active];he.call(de,Be,Qe),he.call(H,Be),Ue.emit("plotly_sliderchange",{slider:Be,step:Be.steps[Be.active],interaction:et,previousActive:ft}),mn&&mn.method&&et&&(he._nextMethod?(he._nextMethod.step=mn,he._nextMethod.doCallback=et,he._nextMethod.doTransition=Qe):(he._nextMethod={step:mn,doCallback:et,doTransition:Qe},he._nextMethodRaf=window.requestAnimationFrame(function(){var ta=he._nextMethod.step;ta.method&&(ta.execute&&v.executeAPICommand(Ue,ta.method,ta.args),he._nextMethod=null,he._nextMethodRaf=null)})))}function ve(Ue,he,Be){if(he._context.staticPlot)return;var Ye=Be.node(),et=M.select(he);function Qe(){return Be.data()[0]}function ft(){var mn=Qe();he.emit("plotly_sliderstart",{slider:mn});var ta=Be.select("."+p.gripRectClass);M.event.stopPropagation(),M.event.preventDefault(),ta.call(g.fill,mn.activebgcolor);var Do=Te(mn,M.mouse(Ye)[0]);Se(he,Be,mn,Do,!0),mn._dragging=!0;function Ae(){var ge=Qe(),Ce=Te(ge,M.mouse(Ye)[0]);Se(he,Be,ge,Ce,!1)}et.on("mousemove",Ae),et.on("touchmove",Ae);function ke(){var ge=Qe();ge._dragging=!1,ta.call(g.fill,ge.bgcolor),et.on("mouseup",null),et.on("mousemove",null),et.on("touchend",null),et.on("touchmove",null),he.emit("plotly_sliderend",{slider:ge,step:ge.steps[ge.active]})}et.on("mouseup",ke),et.on("touchend",ke)}Ue.on("mousedown",ft),Ue.on("touchstart",ft)}function xe(Ue,he){var Be=Ue.selectAll("rect."+p.tickRectClass).data(he._visibleSteps),Ye=he._dims;Be.enter().append("rect").classed(p.tickRectClass,!0),Be.exit().remove(),Be.attr({width:he.tickwidth+"px","shape-rendering":"crispEdges"}),Be.each(function(et,Qe){var ft=Qe%Ye.labelStride===0,mn=M.select(this);mn.attr({height:ft?he.ticklen:he.minorticklen}).call(g.fill,he.tickcolor),E.setTranslate(mn,be(he,Qe/(he._stepCount-1))-.5*he.tickwidth,(ft?p.tickOffset:p.minorTickOffset)+Ye.currentValueTotalHeight)})}function re(Ue){var he=Ue._dims;he.labelSteps=[];for(var Be=Ue._stepCount,Ye=0;Ye<Be;Ye+=he.labelStride)he.labelSteps.push({fraction:Ye/(Be-1),step:Ue._visibleSteps[Ye]})}function de(Ue,he,Be){for(var Ye=Ue.select("rect."+p.gripRectClass),et=0,Qe=0;Qe<he._stepCount;Qe++)if(he._visibleSteps[Qe]._index===he.active){et=Qe;break}var ft=be(he,et/(he._stepCount-1));if(!he._invokingCommand){var mn=Ye;Be&&he.transition.duration>0&&(mn=mn.transition().duration(he.transition.duration).ease(he.transition.easing)),mn.attr("transform",T(ft-p.gripWidth*.5,he._dims.currentValueTotalHeight))}}function be(Ue,he){var Be=Ue._dims;return Be.inputAreaStart+p.stepInset+(Be.inputAreaLength-2*p.stepInset)*Math.min(1,Math.max(0,he))}function Te(Ue,he){var Be=Ue._dims;return Math.min(1,Math.max(0,(he-p.stepInset-Be.inputAreaStart)/(Be.inputAreaLength-2*p.stepInset-2*Be.inputAreaStart)))}function ye(Ue,he,Be){var Ye=Be._dims,et=S.ensureSingle(Ue,"rect",p.railTouchRectClass,function(Qe){Qe.call(ve,he,Ue,Be).style("pointer-events","all")});et.attr({width:Ye.inputAreaLength,height:Math.max(Ye.inputAreaWidth,p.tickOffset+Be.ticklen+Ye.labelHeight)}).call(g.fill,Be.bgcolor).attr("opacity",0),E.setTranslate(et,0,Ye.currentValueTotalHeight)}function De(Ue,he){var Be=he._dims,Ye=Be.inputAreaLength-p.railInset*2,et=S.ensureSingle(Ue,"rect",p.railRectClass);et.attr({width:Ye,height:p.railWidth,rx:p.railRadius,ry:p.railRadius,"shape-rendering":"crispEdges"}).call(g.stroke,he.bordercolor).call(g.fill,he.bgcolor).style("stroke-width",he.borderwidth+"px"),E.setTranslate(et,p.railInset,(Be.inputAreaWidth-p.railWidth)*.5+Be.currentValueTotalHeight)}}}),c2=a({"src/components/sliders/index.js"(pe,me){var M=xy();me.exports={moduleType:"component",name:M.name,layoutAttributes:l2(),supplyLayoutDefaults:s_(),draw:cg()}}}),u2=a({"src/components/rangeslider/attributes.js"(pe,me){var M=ue();me.exports={bgcolor:{valType:"color",dflt:M.background,editType:"plot"},bordercolor:{valType:"color",dflt:M.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}}}),Rx=a({"src/components/rangeslider/oppaxis_attributes.js"(pe,me){me.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}}}),N2=a({"src/components/rangeslider/constants.js"(pe,me){me.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}}}),pb=a({"src/components/rangeslider/helpers.js"(pe){var me=Ov(),M=v1(),v=N2(),g=f1().LINE_SPACING,E=v.name;function S(T){var C=T&&T[E];return C&&C.visible}pe.isVisible=S,pe.makeData=function(T){for(var C=me.list({_fullLayout:T},"x",!0),P=T.margin,p=[],Y=0;Y<C.length;Y++){var N=C[Y];if(S(N)){p.push(N);var j=N[E];j._id=E+N._id,j._height=(T.height-P.b-P.t)*j.thickness,j._offsetShift=Math.floor(j.borderwidth/2)}}T._rangeSliderData=p},pe.autoMarginOpts=function(T,C){var P=T._fullLayout,p=C[E],Y=C._id.charAt(0),N=0,j=0;if(C.side==="bottom"&&(N=C._depth,C.title.text!==P._dfltTitle[Y])){j=1.5*C.title.font.size+10+p._offsetShift;var ee=(C.title.text.match(M.BR_TAG_ALL)||[]).length;j+=ee*C.title.font.size*g}return{x:0,y:C._counterDomainMin,l:0,r:0,t:0,b:p._height+N+Math.max(P.margin.b,j),pad:v.extraPad+p._offsetShift*2}}}}),W1=a({"src/components/rangeslider/defaults.js"(pe,me){var M=o0(),v=Vm(),g=Ov(),E=u2(),S=Rx();me.exports=function(C,P,p){var Y=C[p],N=P[p];if(!(Y.rangeslider||P._requestRangeslider[N._id]))return;M.isPlainObject(Y.rangeslider)||(Y.rangeslider={});var j=Y.rangeslider,ee=v.newContainer(N,"rangeslider");function G(re,de){return M.coerce(j,ee,E,re,de)}var V,W;function q(re,de){return M.coerce(V,W,S,re,de)}var z=G("visible");if(z){G("bgcolor",P.plot_bgcolor),G("bordercolor"),G("borderwidth"),G("thickness"),G("autorange",!N.isValidRange(j.range)),G("range");var H=P._subplots;if(H)for(var Z=H.cartesian.filter(function(re){return re.substr(0,re.indexOf("y"))===g.name2id(p)}).map(function(re){return re.substr(re.indexOf("y"),re.length)}),ne=M.simpleMap(Z,g.id2name),te=0;te<ne.length;te++){var Se=ne[te];V=j[Se]||{},W=v.newContainer(ee,Se,"yaxis");var fe=P[Se],ve;V.range&&fe.isValidRange(V.range)&&(ve="fixed");var xe=q("rangemode",ve);xe!=="match"&&q("range",fe.range.slice())}ee._input=j}}}}),z2=a({"src/components/rangeslider/calc_autorange.js"(pe,me){var M=Ov().list,v=Cg().getAutoRange,g=N2();me.exports=function(S){for(var T=M(S,"x",!0),C=0;C<T.length;C++){var P=T[C],p=P[g.name];p&&p.visible&&p.autorange&&(p._input.autorange=!0,p._input.range=p.range=v(S,P))}}}}),A_=a({"src/components/rangeslider/draw.js"(pe,me){var M=f(),v=jp(),g=p1(),E=o0(),S=E.strTranslate,T=t1(),C=Oe(),P=f_(),p=T_(),Y=Ov(),N=Gg(),j=$1(),ee=N2();me.exports=function(ve){for(var xe=ve._fullLayout,re=xe._rangeSliderData,de=0;de<re.length;de++){var be=re[de][ee.name];be._clipId=be._id+"-"+xe._uid}function Te(De){return De._name}var ye=xe._infolayer.selectAll("g."+ee.containerClassName).data(re,Te);ye.exit().each(function(De){var Ue=De[ee.name];xe._topdefs.select("#"+Ue._clipId).remove()}).remove(),re.length!==0&&(ye.enter().append("g").classed(ee.containerClassName,!0).attr("pointer-events","all"),ye.each(function(De){var Ue=M.select(this),he=De[ee.name],Be=xe[Y.id2name(De.anchor)],Ye=he[Y.id2name(De.anchor)];if(he.range){var et=E.simpleMap(he.range,De.r2l),Qe=E.simpleMap(De.range,De.r2l),ft;Qe[0]<Qe[1]?ft=[Math.min(et[0],Qe[0]),Math.max(et[1],Qe[1])]:ft=[Math.max(et[0],Qe[0]),Math.min(et[1],Qe[1])],he.range=he._input.range=E.simpleMap(ft,De.l2r)}De.cleanRange("rangeslider.range");var mn=xe._size,ta=De.domain;he._width=mn.w*(ta[1]-ta[0]);var Do=Math.round(mn.l+mn.w*ta[0]),Ae=Math.round(mn.t+mn.h*(1-De._counterDomainMin)+(De.side==="bottom"?De._depth:0)+he._offsetShift+ee.extraPad);Ue.attr("transform",S(Do,Ae)),he._rl=E.simpleMap(he.range,De.r2l);var ke=he._rl[0],ge=he._rl[1],Ce=ge-ke;if(he.p2d=function(yi){return yi/he._width*Ce+ke},he.d2p=function(yi){return(yi-ke)/Ce*he._width},De.rangebreaks){var Je=De.locateBreaks(ke,ge);if(Je.length){var Re,Q,ce=0;for(Re=0;Re<Je.length;Re++)Q=Je[Re],ce+=Q.max-Q.min;var Me=he._width/(ge-ke-ce),Le=[-Me*ke];for(Re=0;Re<Je.length;Re++)Q=Je[Re],Le.push(Le[Le.length-1]-Me*(Q.max-Q.min));for(he.d2p=function(yi){for(var Fl=Le[0],Yl=0;Yl<Je.length;Yl++){var qp=Je[Yl];if(yi>=qp.max)Fl=Le[Yl+1];else if(yi<qp.min)break}return Fl+Me*yi},Re=0;Re<Je.length;Re++)Q=Je[Re],Q.pmin=he.d2p(Q.min),Q.pmax=he.d2p(Q.max);he.p2d=function(yi){for(var Fl=Le[0],Yl=0;Yl<Je.length;Yl++){var qp=Je[Yl];if(yi>=qp.pmax)Fl=Le[Yl+1];else if(yi<qp.pmin)break}return(yi-Fl)/Me}}}if(Ye.rangemode!=="match"){var tt=Be.r2l(Ye.range[0]),bt=Be.r2l(Ye.range[1]),Ct=bt-tt;he.d2pOppAxis=function(yi){return(yi-tt)/Ct*he._height}}Ue.call(z,ve,De,he).call(H,ve,De,he).call(Z,ve,De,he).call(te,ve,De,he,Ye).call(Se,ve,De,he).call(fe,ve,De,he),V(Ue,ve,De,he),q(Ue,ve,De,he,Be,Ye),De.side==="bottom"&&P.draw(ve,De._id+"title",{propContainer:De,propName:De._name+".title",placeholder:xe._dfltTitle.x,attributes:{x:De._offset+De._length/2,y:Ae+he._height+he._offsetShift+10+1.5*De.title.font.size,"text-anchor":"middle"}})}))};function G(ve){return typeof ve.clientX=="number"?ve.clientX:ve.touches&&ve.touches.length>0?ve.touches[0].clientX:0}function V(ve,xe,re,de){if(xe._context.staticPlot)return;var be=ve.select("rect."+ee.slideBoxClassName).node(),Te=ve.select("rect."+ee.grabAreaMinClassName).node(),ye=ve.select("rect."+ee.grabAreaMaxClassName).node();function De(){var Ue=M.event,he=Ue.target,Be=G(Ue),Ye=Be-ve.node().getBoundingClientRect().left,et=de.d2p(re._rl[0]),Qe=de.d2p(re._rl[1]),ft=N.coverSlip();this.addEventListener("touchmove",mn),this.addEventListener("touchend",ta),ft.addEventListener("mousemove",mn),ft.addEventListener("mouseup",ta);function mn(Do){var Ae=G(Do),ke=+Ae-Be,ge,Ce,Je;switch(he){case be:if(Je="ew-resize",et+ke>re._length||Qe+ke<0)return;ge=et+ke,Ce=Qe+ke;break;case Te:if(Je="col-resize",et+ke>re._length)return;ge=et+ke,Ce=Qe;break;case ye:if(Je="col-resize",Qe+ke<0)return;ge=et,Ce=Qe+ke;break;default:Je="ew-resize",ge=Ye,Ce=Ye+ke;break}if(Ce<ge){var Re=Ce;Ce=ge,ge=Re}de._pixelMin=ge,de._pixelMax=Ce,j(M.select(ft),Je),W(ve,xe,re,de)}function ta(){ft.removeEventListener("mousemove",mn),ft.removeEventListener("mouseup",ta),this.removeEventListener("touchmove",mn),this.removeEventListener("touchend",ta),E.removeElement(ft)}}ve.on("mousedown",De),ve.on("touchstart",De)}function W(ve,xe,re,de){function be(De){return re.l2r(E.constrain(De,de._rl[0],de._rl[1]))}var Te=be(de.p2d(de._pixelMin)),ye=be(de.p2d(de._pixelMax));window.requestAnimationFrame(function(){v.call("_guiRelayout",xe,re._name+".range",[Te,ye])})}function q(ve,xe,re,de,be,Te){var ye=ee.handleWidth/2;function De(Do){return E.constrain(Do,0,de._width)}function Ue(Do){return E.constrain(Do,0,de._height)}function he(Do){return E.constrain(Do,-ye,de._width+ye)}var Be=De(de.d2p(re._rl[0])),Ye=De(de.d2p(re._rl[1]));if(ve.select("rect."+ee.slideBoxClassName).attr("x",Be).attr("width",Ye-Be),ve.select("rect."+ee.maskMinClassName).attr("width",Be),ve.select("rect."+ee.maskMaxClassName).attr("x",Ye).attr("width",de._width-Ye),Te.rangemode!=="match"){var et=de._height-Ue(de.d2pOppAxis(be._rl[1])),Qe=de._height-Ue(de.d2pOppAxis(be._rl[0]));ve.select("rect."+ee.maskMinOppAxisClassName).attr("x",Be).attr("height",et).attr("width",Ye-Be),ve.select("rect."+ee.maskMaxOppAxisClassName).attr("x",Be).attr("y",Qe).attr("height",de._height-Qe).attr("width",Ye-Be),ve.select("rect."+ee.slideBoxClassName).attr("y",et).attr("height",Qe-et)}var ft=.5,mn=Math.round(he(Be-ye))-ft,ta=Math.round(he(Ye-ye))+ft;ve.select("g."+ee.grabberMinClassName).attr("transform",S(mn,ft)),ve.select("g."+ee.grabberMaxClassName).attr("transform",S(ta,ft))}function z(ve,xe,re,de){var be=E.ensureSingle(ve,"rect",ee.bgClassName,function(Ue){Ue.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),Te=de.borderwidth%2===0?de.borderwidth:de.borderwidth-1,ye=-de._offsetShift,De=T.crispRound(xe,de.borderwidth);be.attr({width:de._width+Te,height:de._height+Te,transform:S(ye,ye),"stroke-width":De}).call(C.stroke,de.bordercolor).call(C.fill,de.bgcolor)}function H(ve,xe,re,de){var be=xe._fullLayout,Te=E.ensureSingleById(be._topdefs,"clipPath",de._clipId,function(ye){ye.append("rect").attr({x:0,y:0})});Te.select("rect").attr({width:de._width,height:de._height})}function Z(ve,xe,re,de){var be=xe.calcdata,Te=ve.selectAll("g."+ee.rangePlotClassName).data(re._subplotsWith,E.identity);Te.enter().append("g").attr("class",function(De){return ee.rangePlotClassName+" "+De}).call(T.setClipUrl,de._clipId,xe),Te.order(),Te.exit().remove();var ye;Te.each(function(De,Ue){var he=M.select(this),Be=Ue===0,Ye=Y.getFromId(xe,De,"y"),et=Ye._name,Qe=de[et],ft={data:[],layout:{xaxis:{type:re.type,domain:[0,1],range:de.range.slice(),calendar:re.calendar},width:de._width,height:de._height,margin:{t:0,b:0,l:0,r:0}},_context:xe._context};re.rangebreaks&&(ft.layout.xaxis.rangebreaks=re.rangebreaks),ft.layout[et]={type:Ye.type,domain:[0,1],range:Qe.rangemode!=="match"?Qe.range.slice():Ye.range.slice(),calendar:Ye.calendar},Ye.rangebreaks&&(ft.layout[et].rangebreaks=Ye.rangebreaks),g.supplyDefaults(ft);var mn=ft._fullLayout.xaxis,ta=ft._fullLayout[et];mn.clearCalc(),mn.setScale(),ta.clearCalc(),ta.setScale();var Do={id:De,plotgroup:he,xaxis:mn,yaxis:ta,isRangePlot:!0};Be?ye=Do:(Do.mainplot="xy",Do.mainplotinfo=ye),p.rangePlot(xe,Do,ne(be,De))})}function ne(ve,xe){for(var re=[],de=0;de<ve.length;de++){var be=ve[de],Te=be[0].trace;Te.xaxis+Te.yaxis===xe&&re.push(be)}return re}function te(ve,xe,re,de,be){var Te=E.ensureSingle(ve,"rect",ee.maskMinClassName,function(he){he.attr({x:0,y:0,"shape-rendering":"crispEdges"})});Te.attr("height",de._height).call(C.fill,ee.maskColor);var ye=E.ensureSingle(ve,"rect",ee.maskMaxClassName,function(he){he.attr({y:0,"shape-rendering":"crispEdges"})});if(ye.attr("height",de._height).call(C.fill,ee.maskColor),be.rangemode!=="match"){var De=E.ensureSingle(ve,"rect",ee.maskMinOppAxisClassName,function(he){he.attr({y:0,"shape-rendering":"crispEdges"})});De.attr("width",de._width).call(C.fill,ee.maskOppAxisColor);var Ue=E.ensureSingle(ve,"rect",ee.maskMaxOppAxisClassName,function(he){he.attr({y:0,"shape-rendering":"crispEdges"})});Ue.attr("width",de._width).style("border-top",ee.maskOppBorder).call(C.fill,ee.maskOppAxisColor)}}function Se(ve,xe,re,de){if(!xe._context.staticPlot){var be=E.ensureSingle(ve,"rect",ee.slideBoxClassName,function(Te){Te.attr({y:0,cursor:ee.slideBoxCursor,"shape-rendering":"crispEdges"})});be.attr({height:de._height,fill:ee.slideBoxFill})}}function fe(ve,xe,re,de){var be=E.ensureSingle(ve,"g",ee.grabberMinClassName),Te=E.ensureSingle(ve,"g",ee.grabberMaxClassName),ye={x:0,width:ee.handleWidth,rx:ee.handleRadius,fill:C.background,stroke:C.defaultLine,"stroke-width":ee.handleStrokeWidth,"shape-rendering":"crispEdges"},De={y:Math.round(de._height/4),height:Math.round(de._height/2)},Ue=E.ensureSingle(be,"rect",ee.handleMinClassName,function(Qe){Qe.attr(ye)});Ue.attr(De);var he=E.ensureSingle(Te,"rect",ee.handleMaxClassName,function(Qe){Qe.attr(ye)});he.attr(De);var Be={width:ee.grabAreaWidth,x:0,y:0,fill:ee.grabAreaFill,cursor:xe._context.staticPlot?void 0:ee.grabAreaCursor},Ye=E.ensureSingle(be,"rect",ee.grabAreaMinClassName,function(Qe){Qe.attr(Be)});Ye.attr("height",de._height);var et=E.ensureSingle(Te,"rect",ee.grabAreaMaxClassName,function(Qe){Qe.attr(Be)});et.attr("height",de._height)}}}),C_=a({"src/components/rangeslider/index.js"(pe,me){var M=o0(),v=u2(),g=Rx(),E=pb();me.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:M.extendFlat({},v,{yaxis:g})}}},layoutAttributes:u2(),handleDefaults:W1(),calcAutorange:z2(),draw:A_(),isVisible:E.isVisible,makeData:E.makeData,autoMarginOpts:E.autoMarginOpts}}}),f2=a({"src/components/rangeselector/attributes.js"(pe,me){var M=B(),v=ue(),g=Vm().templatedArray,E=g("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});me.exports={visible:{valType:"boolean",editType:"plot"},buttons:E,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:M({editType:"plot"}),bgcolor:{valType:"color",dflt:v.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:v.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}}}),ie=a({"src/components/rangeselector/constants.js"(pe,me){me.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}}}),Ol=a({"src/components/rangeselector/defaults.js"(pe,me){var M=o0(),v=Oe(),g=Vm(),E=U1(),S=f2(),T=ie();me.exports=function(Y,N,j,ee,G){var V=Y.rangeselector||{},W=g.newContainer(N,"rangeselector");function q(te,Se){return M.coerce(V,W,S,te,Se)}var z=E(V,W,{name:"buttons",handleItemDefaults:C,calendar:G}),H=q("visible",z.length>0);if(H){var Z=P(N,j,ee);q("x",Z[0]),q("y",Z[1]),M.noneOrAll(Y,N,["x","y"]),q("xanchor"),q("yanchor"),M.coerceFont(q,"font",j.font);var ne=q("bgcolor");q("activecolor",v.contrast(ne,T.lightAmount,T.darkAmount)),q("bordercolor"),q("borderwidth")}};function C(p,Y,N,j){var ee=j.calendar;function G(q,z){return M.coerce(p,Y,S.buttons,q,z)}var V=G("visible");if(V){var W=G("step");W!=="all"&&(ee&&ee!=="gregorian"&&(W==="month"||W==="year")?Y.stepmode="backward":G("stepmode"),G("count")),G("label")}}function P(p,Y,N){for(var j=N.filter(function(W){return Y[W].anchor===p._id}),ee=0,G=0;G<j.length;G++){var V=Y[j[G]].domain;V&&(ee=Math.max(V[1],ee))}return[p.domain[0],ee+T.yPad]}}}),Xe=a({"src/components/rangeselector/get_update_object.js"(pe,me){var M=u(),v=o0().titleCase;me.exports=function(S,T){var C=S._name,P={};if(T.step==="all")P[C+".autorange"]=!0;else{var p=g(S,T);P[C+".range[0]"]=p[0],P[C+".range[1]"]=p[1]}return P};function g(E,S){var T=E.range,C=new Date(E.r2l(T[1])),P=S.step,p=M["utc"+v(P)],Y=S.count,N;switch(S.stepmode){case"backward":N=E.l2r(+p.offset(C,-Y));break;case"todate":var j=p.offset(C,-Y);N=E.l2r(+p.ceil(j));break}var ee=T[1];return[N,ee]}}}),Wp=a({"src/components/rangeselector/draw.js"(pe,me){var M=f(),v=jp(),g=p1(),E=Oe(),S=t1(),T=o0(),C=T.strTranslate,P=v1(),p=Ov(),Y=f1(),N=Y.LINE_SPACING,j=Y.FROM_TL,ee=Y.FROM_BR,G=ie(),V=Xe();me.exports=function(ve){var xe=ve._fullLayout,re=xe._infolayer.selectAll(".rangeselector").data(W(ve),q);re.enter().append("g").classed("rangeselector",!0),re.exit().remove(),re.style({cursor:"pointer","pointer-events":"all"}),re.each(function(de){var be=M.select(this),Te=de,ye=Te.rangeselector,De=be.selectAll("g.button").data(T.filterVisible(ye.buttons));De.enter().append("g").classed("button",!0),De.exit().remove(),De.each(function(Ue){var he=M.select(this),Be=V(Te,Ue);Ue._isActive=z(Te,Ue,Be),he.call(H,ye,Ue),he.call(ne,ye,Ue,ve),he.on("click",function(){ve._dragged||v.call("_guiRelayout",ve,Be)}),he.on("mouseover",function(){Ue._isHovered=!0,he.call(H,ye,Ue)}),he.on("mouseout",function(){Ue._isHovered=!1,he.call(H,ye,Ue)})}),Se(ve,De,ye,Te._name,be)})};function W(fe){for(var ve=p.list(fe,"x",!0),xe=[],re=0;re<ve.length;re++){var de=ve[re];de.rangeselector&&de.rangeselector.visible&&xe.push(de)}return xe}function q(fe){return fe._id}function z(fe,ve,xe){if(ve.step==="all")return fe.autorange===!0;var re=Object.keys(xe);return fe.range[0]===xe[re[0]]&&fe.range[1]===xe[re[1]]}function H(fe,ve,xe){var re=T.ensureSingle(fe,"rect","selector-rect",function(de){de.attr("shape-rendering","crispEdges")});re.attr({rx:G.rx,ry:G.ry}),re.call(E.stroke,ve.bordercolor).call(E.fill,Z(ve,xe)).style("stroke-width",ve.borderwidth+"px")}function Z(fe,ve){return ve._isActive||ve._isHovered?fe.activecolor:fe.bgcolor}function ne(fe,ve,xe,re){function de(Te){P.convertToTspans(Te,re)}var be=T.ensureSingle(fe,"text","selector-text",function(Te){Te.attr("text-anchor","middle")});be.call(S.font,ve.font).text(te(xe,re._fullLayout._meta)).call(de)}function te(fe,ve){return fe.label?ve?T.templateString(fe.label,ve):fe.label:fe.step==="all"?"all":fe.count+fe.step.charAt(0)}function Se(fe,ve,xe,re,de){var be=0,Te=0,ye=xe.borderwidth;ve.each(function(){var et=M.select(this),Qe=et.select(".selector-text"),ft=xe.font.size*N,mn=Math.max(ft*P.lineCount(Qe),16)+3;Te=Math.max(Te,mn)}),ve.each(function(){var et=M.select(this),Qe=et.select(".selector-rect"),ft=et.select(".selector-text"),mn=ft.node()&&S.bBox(ft.node()).width,ta=xe.font.size*N,Do=P.lineCount(ft),Ae=Math.max(mn+10,G.minButtonWidth);et.attr("transform",C(ye+be,ye)),Qe.attr({x:0,y:0,width:Ae,height:Te}),P.positionText(ft,Ae/2,Te/2-(Do-1)*ta/2+3),be+=Ae+5});var De=fe._fullLayout._size,Ue=De.l+De.w*xe.x,he=De.t+De.h*(1-xe.y),Be="left";T.isRightAnchor(xe)&&(Ue-=be,Be="right"),T.isCenterAnchor(xe)&&(Ue-=be/2,Be="center");var Ye="top";T.isBottomAnchor(xe)&&(he-=Te,Ye="bottom"),T.isMiddleAnchor(xe)&&(he-=Te/2,Ye="middle"),be=Math.ceil(be),Te=Math.ceil(Te),Ue=Math.round(Ue),he=Math.round(he),g.autoMargin(fe,re+"-range-selector",{x:xe.x,y:xe.y,l:be*j[Be],r:be*ee[Be],b:Te*ee[Ye],t:Te*j[Ye]}),de.attr("transform",C(Ue,he))}}}),l0=a({"src/components/rangeselector/index.js"(pe,me){me.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:f2()}}},layoutAttributes:f2(),handleDefaults:Ol(),draw:Wp()}}}),S0=a({"src/plots/domain.js"(pe){var me=k().extendFlat;pe.attributes=function(M,v){M=M||{},v=v||{};var g={valType:"info_array",editType:M.editType,items:[{valType:"number",min:0,max:1,editType:M.editType},{valType:"number",min:0,max:1,editType:M.editType}],dflt:[0,1]};M.name&&M.name+"",M.trace,v.description&&""+v.description;var E={x:me({},g,{}),y:me({},g,{}),editType:M.editType};return M.noGridCell||(E.row={valType:"integer",min:0,dflt:0,editType:M.editType},E.column={valType:"integer",min:0,dflt:0,editType:M.editType}),E},pe.defaults=function(M,v,g,E){var S=E&&E.x||[0,1],T=E&&E.y||[0,1],C=v.grid;if(C){var P=g("domain.column");P!==void 0&&(P<C.columns?S=C._domains.x[P]:delete M.domain.column);var p=g("domain.row");p!==void 0&&(p<C.rows?T=C._domains.y[p]:delete M.domain.row)}var Y=g("domain.x",S),N=g("domain.y",T);Y[0]<Y[1]||(M.domain.x=S.slice()),N[0]<N[1]||(M.domain.y=T.slice())}}}),hm=a({"src/components/grid/index.js"(pe,me){var M=o0(),v=Ze().counter,g=S0().attributes,E=wv().idRegex,S=Vm(),T={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[v("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[E.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[E.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:g({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function C(j,ee,G){var V=ee[G+"axes"],W=Object.keys((j._splomAxes||{})[G]||{});if(Array.isArray(V))return V;if(W.length)return W}function P(j,ee){var G=j.grid||{},V=C(ee,G,"x"),W=C(ee,G,"y");if(!j.grid&&!V&&!W)return;var q=Array.isArray(G.subplots)&&Array.isArray(G.subplots[0]),z=Array.isArray(V),H=Array.isArray(W),Z=z&&V!==G.xaxes&&H&&W!==G.yaxes,ne,te;q?(ne=G.subplots.length,te=G.subplots[0].length):(H&&(ne=W.length),z&&(te=V.length));var Se=S.newContainer(ee,"grid");function fe(he,Be){return M.coerce(G,Se,T,he,Be)}var ve=fe("rows",ne),xe=fe("columns",te);if(!(ve*xe>1)){delete ee.grid;return}if(!q&&!z&&!H){var re=fe("pattern")==="independent";re&&(q=!0)}Se._hasSubplotGrid=q;var de=fe("roworder"),be=de==="top to bottom",Te=q?.2:.1,ye=q?.3:.1,De,Ue;Z&&ee._splomGridDflt&&(De=ee._splomGridDflt.xside,Ue=ee._splomGridDflt.yside),Se._domains={x:p("x",fe,Te,De,xe),y:p("y",fe,ye,Ue,ve,be)}}function p(j,ee,G,V,W,q){var z=ee(j+"gap",G),H=ee("domain."+j);ee(j+"side",V);for(var Z=new Array(W),ne=H[0],te=(H[1]-ne)/(W-z),Se=te*(1-z),fe=0;fe<W;fe++){var ve=ne+te*fe;Z[q?W-1-fe:fe]=[ve,ve+Se]}return Z}function Y(j,ee){var G=ee.grid;if(!(!G||!G._domains)){var V=j.grid||{},W=ee._subplots,q=G._hasSubplotGrid,z=G.rows,H=G.columns,Z=G.pattern==="independent",ne,te,Se,fe,ve,xe,re,de=G._axisMap={};if(q){var be=V.subplots||[];xe=G.subplots=new Array(z);var Te=1;for(ne=0;ne<z;ne++){var ye=xe[ne]=new Array(H),De=be[ne]||[];for(te=0;te<H;te++)if(Z?(ve=Te===1?"xy":"x"+Te+"y"+Te,Te++):ve=De[te],ye[te]="",W.cartesian.indexOf(ve)!==-1){if(re=ve.indexOf("y"),Se=ve.slice(0,re),fe=ve.slice(re),de[Se]!==void 0&&de[Se]!==te||de[fe]!==void 0&&de[fe]!==ne)continue;ye[te]=ve,de[Se]=te,de[fe]=ne}}}else{var Ue=C(ee,V,"x"),he=C(ee,V,"y");G.xaxes=N(Ue,W.xaxis,H,de,"x"),G.yaxes=N(he,W.yaxis,z,de,"y")}var Be=G._anchors={},Ye=G.roworder==="top to bottom";for(var et in de){var Qe=et.charAt(0),ft=G[Qe+"side"],mn,ta,Do;if(ft.length<8)Be[et]="free";else if(Qe==="x"){if(ft.charAt(0)==="t"===Ye?(mn=0,ta=1,Do=z):(mn=z-1,ta=-1,Do=-1),q){var Ae=de[et];for(ne=mn;ne!==Do;ne+=ta)if(ve=xe[ne][Ae],!!ve&&(re=ve.indexOf("y"),ve.slice(0,re)===et)){Be[et]=ve.slice(re);break}}else for(ne=mn;ne!==Do;ne+=ta)if(fe=G.yaxes[ne],W.cartesian.indexOf(et+fe)!==-1){Be[et]=fe;break}}else if(ft.charAt(0)==="l"?(mn=0,ta=1,Do=H):(mn=H-1,ta=-1,Do=-1),q){var ke=de[et];for(ne=mn;ne!==Do;ne+=ta)if(ve=xe[ke][ne],!!ve&&(re=ve.indexOf("y"),ve.slice(re)===et)){Be[et]=ve.slice(0,re);break}}else for(ne=mn;ne!==Do;ne+=ta)if(Se=G.xaxes[ne],W.cartesian.indexOf(Se+et)!==-1){Be[et]=Se;break}}}}function N(j,ee,G,V,W){var q=new Array(G),z;function H(Z,ne){ee.indexOf(ne)!==-1&&V[ne]===void 0?(q[Z]=ne,V[ne]=Z):q[Z]=""}if(Array.isArray(j))for(z=0;z<G;z++)H(z,j[z]);else for(H(0,W),z=1;z<G;z++)H(z,W+(z+1));return q}me.exports={moduleType:"component",name:"grid",schema:{layout:{grid:T}},layoutAttributes:T,sizeDefaults:P,contentDefaults:Y}}}),am=a({"src/components/errorbars/attributes.js"(pe,me){me.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc"}}}),av=a({"src/components/errorbars/defaults.js"(pe,me){var M=w(),v=jp(),g=o0(),E=Vm(),S=am();me.exports=function(T,C,P,p){var Y="error_"+p.axis,N=E.newContainer(C,Y),j=T[Y]||{};function ee(Z,ne){return g.coerce(j,N,S,Z,ne)}var G=j.array!==void 0||j.value!==void 0||j.type==="sqrt",V=ee("visible",G);if(V!==!1){var W=ee("type","array"in j?"data":"percent"),q=!0;W!=="sqrt"&&(q=ee("symmetric",!((W==="data"?"arrayminus":"valueminus")in j))),W==="data"?(ee("array"),ee("traceref"),q||(ee("arrayminus"),ee("tracerefminus"))):(W==="percent"||W==="constant")&&(ee("value"),q||ee("valueminus"));var z="copy_"+p.inherit+"style";if(p.inherit){var H=C["error_"+p.inherit];(H||{}).visible&&ee(z,!(j.color||M(j.thickness)||M(j.width)))}(!p.inherit||!N[z])&&(ee("color",P),ee("thickness"),ee("width",v.traceIs(C,"gl3d")?0:4))}}}}),q0=a({"src/components/errorbars/compute_error.js"(pe,me){me.exports=function(g){var E=g.type,S=g.symmetric;if(E==="data"){var T=g.array||[];if(S)return function(N,j){var ee=+T[j];return[ee,ee]};var C=g.arrayminus||[];return function(N,j){var ee=+T[j],G=+C[j];return!isNaN(ee)||!isNaN(G)?[G||0,ee||0]:[NaN,NaN]}}else{var P=M(E,g.value),p=M(E,g.valueminus);return S||g.valueminus===void 0?function(N){var j=P(N);return[j,j]}:function(N){return[p(N),P(N)]}}};function M(v,g){if(v==="percent")return function(E){return Math.abs(E*g/100)};if(v==="constant")return function(){return Math.abs(g)};if(v==="sqrt")return function(E){return Math.sqrt(Math.abs(E))}}}}),um=a({"src/components/errorbars/calc.js"(pe,me){var M=w(),v=jp(),g=g1(),E=o0(),S=q0();me.exports=function(P){for(var p=P.calcdata,Y=0;Y<p.length;Y++){var N=p[Y],j=N[0].trace;if(j.visible===!0&&v.traceIs(j,"errorBarsOK")){var ee=g.getFromId(P,j.xaxis),G=g.getFromId(P,j.yaxis);T(N,j,ee,"x"),T(N,j,G,"y")}}};function T(C,P,p,Y){var N=P["error_"+Y]||{},j=N.visible&&["linear","log"].indexOf(p.type)!==-1,ee=[];if(j){for(var G=S(N),V=0;V<C.length;V++){var W=C[V],q=W.i;if(q===void 0)q=V;else if(q===null)continue;var z=W[Y];if(M(p.c2l(z))){var H=G(z,q);if(M(H[0])&&M(H[1])){var Z=W[Y+"s"]=z-H[0],ne=W[Y+"h"]=z+H[1];ee.push(Z,ne)}}}var te=p._id,Se=P._extremes[te],fe=g.findExtremes(p,ee,E.extendFlat({tozero:Se.opts.tozero},{padded:!0}));Se.min=Se.min.concat(fe.min),Se.max=Se.max.concat(fe.max)}}}}),l1=a({"src/components/errorbars/plot.js"(pe,me){var M=f(),v=w(),g=t1(),E=D1();me.exports=function(C,P,p,Y){var N,j=p.xaxis,ee=p.yaxis,G=Y&&Y.duration>0,V=C._context.staticPlot;P.each(function(W){var q=W[0].trace,z=q.error_x||{},H=q.error_y||{},Z;q.ids&&(Z=function(fe){return fe.id});var ne=E.hasMarkers(q)&&q.marker.maxdisplayed>0;!H.visible&&!z.visible&&(W=[]);var te=M.select(this).selectAll("g.errorbar").data(W,Z);if(te.exit().remove(),!!W.length){z.visible||te.selectAll("path.xerror").remove(),H.visible||te.selectAll("path.yerror").remove(),te.style("opacity",1);var Se=te.enter().append("g").classed("errorbar",!0);G&&Se.style("opacity",0).transition().duration(Y.duration).style("opacity",1),g.setClipUrl(te,p.layerClipId,C),te.each(function(fe){var ve=M.select(this),xe=S(fe,j,ee);if(!(ne&&!fe.vis)){var re,de=ve.select("path.yerror");if(H.visible&&v(xe.x)&&v(xe.yh)&&v(xe.ys)){var be=H.width;re="M"+(xe.x-be)+","+xe.yh+"h"+2*be+"m-"+be+",0V"+xe.ys,xe.noYS||(re+="m-"+be+",0h"+2*be),N=!de.size(),N?de=ve.append("path").style("vector-effect",V?"none":"non-scaling-stroke").classed("yerror",!0):G&&(de=de.transition().duration(Y.duration).ease(Y.easing)),de.attr("d",re)}else de.remove();var Te=ve.select("path.xerror");if(z.visible&&v(xe.y)&&v(xe.xh)&&v(xe.xs)){var ye=(z.copy_ystyle?H:z).width;re="M"+xe.xh+","+(xe.y-ye)+"v"+2*ye+"m0,-"+ye+"H"+xe.xs,xe.noXS||(re+="m0,-"+ye+"v"+2*ye),N=!Te.size(),N?Te=ve.append("path").style("vector-effect",V?"none":"non-scaling-stroke").classed("xerror",!0):G&&(Te=Te.transition().duration(Y.duration).ease(Y.easing)),Te.attr("d",re)}else Te.remove()}})}})};function S(T,C,P){var p={x:C.c2p(T.x),y:P.c2p(T.y)};return T.yh!==void 0&&(p.yh=P.c2p(T.yh),p.ys=P.c2p(T.ys),v(p.ys)||(p.noYS=!0,p.ys=P.c2p(T.ys,!0))),T.xh!==void 0&&(p.xh=C.c2p(T.xh),p.xs=C.c2p(T.xs),v(p.xs)||(p.noXS=!0,p.xs=C.c2p(T.xs,!0))),p}}}),qm=a({"src/components/errorbars/style.js"(pe,me){var M=f(),v=Oe();me.exports=function(E){E.each(function(S){var T=S[0].trace,C=T.error_y||{},P=T.error_x||{},p=M.select(this);p.selectAll("path.yerror").style("stroke-width",C.thickness+"px").call(v.stroke,C.color),P.copy_ystyle&&(P=C),p.selectAll("path.xerror").style("stroke-width",P.thickness+"px").call(v.stroke,P.color)})}}}),Im=a({"src/components/errorbars/index.js"(pe,me){var M=o0(),v=Xl().overrideAll,g=am(),E={error_x:M.extendFlat({},g),error_y:M.extendFlat({},g)};delete E.error_x.copy_zstyle,delete E.error_y.copy_zstyle,delete E.error_y.copy_ystyle;var S={error_x:M.extendFlat({},g),error_y:M.extendFlat({},g),error_z:M.extendFlat({},g)};delete S.error_x.copy_ystyle,delete S.error_y.copy_ystyle,delete S.error_z.copy_ystyle,delete S.error_z.copy_zstyle,me.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:E,bar:E,histogram:E,scatter3d:v(S,"calc","nested"),scattergl:v(E,"calc","nested")}},supplyDefaults:av(),calc:um(),makeComputeError:q0(),plot:l1(),style:qm(),hoverInfo:T};function T(C,P,p){(P.error_y||{}).visible&&(p.yerr=C.yh-C.y,P.error_y.symmetric||(p.yerrneg=C.y-C.ys)),(P.error_x||{}).visible&&(p.xerr=C.xh-C.x,P.error_x.symmetric||(p.xerrneg=C.x-C.xs))}}}),C1=a({"src/components/colorbar/constants.js"(pe,me){me.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}}}),I1=a({"src/components/colorbar/draw.js"(pe,me){var M=f(),v=b(),g=p1(),E=jp(),S=g1(),T=Gg(),C=o0(),P=C.strTranslate,p=k().extendFlat,Y=$1(),N=t1(),j=Oe(),ee=f_(),G=v1(),V=Q1().flipScale,W=bx(),q=Lg(),z=O1(),H=f1(),Z=H.LINE_SPACING,ne=H.FROM_TL,te=H.FROM_BR,Se=C1().cn;function fe(Te){var ye=Te._fullLayout,De=ye._infolayer.selectAll("g."+Se.colorbar).data(ve(Te),function(Ue){return Ue._id});De.enter().append("g").attr("class",function(Ue){return Ue._id}).classed(Se.colorbar,!0),De.each(function(Ue){var he=M.select(this);C.ensureSingle(he,"rect",Se.cbbg),C.ensureSingle(he,"g",Se.cbfills),C.ensureSingle(he,"g",Se.cblines),C.ensureSingle(he,"g",Se.cbaxis,function(Ye){Ye.classed(Se.crisp,!0)}),C.ensureSingle(he,"g",Se.cbtitleunshift,function(Ye){Ye.append("g").classed(Se.cbtitle,!0)}),C.ensureSingle(he,"rect",Se.cboutline);var Be=xe(he,Ue,Te);Be&&Be.then&&(Te._promises||[]).push(Be),Te._context.edits.colorbarPosition&&re(he,Ue,Te)}),De.exit().each(function(Ue){g.autoMargin(Te,Ue._id)}).remove(),De.order()}function ve(Te){var ye=Te._fullLayout,De=Te.calcdata,Ue=[],he,Be,Ye,et;function Qe(Q){return p(Q,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function ft(){typeof et.calc=="function"?et.calc(Te,Ye,he):(he._fillgradient=Be.reversescale?V(Be.colorscale):Be.colorscale,he._zrange=[Be[et.min],Be[et.max]])}for(var mn=0;mn<De.length;mn++){var ta=De[mn];if(Ye=ta[0].trace,!!Ye._module){var Do=Ye._module.colorbar;if(Ye.visible===!0&&Do)for(var Ae=Array.isArray(Do),ke=Ae?Do:[Do],ge=0;ge<ke.length;ge++){et=ke[ge];var Ce=et.container;Be=Ce?Ye[Ce]:Ye,Be&&Be.showscale&&(he=Qe(Be.colorbar),he._id="cb"+Ye.uid+(Ae&&Ce?"-"+Ce:""),he._traceIndex=Ye.index,he._propPrefix=(Ce?Ce+".":"")+"colorbar.",he._meta=Ye._meta,ft(),Ue.push(he))}}}for(var Je in ye._colorAxes)if(Be=ye[Je],Be.showscale){var Re=ye._colorAxes[Je];he=Qe(Be.colorbar),he._id="cb"+Je,he._propPrefix=Je+".colorbar.",he._meta=ye._meta,et={min:"cmin",max:"cmax"},Re[0]!=="heatmap"&&(Ye=Re[1],et.calc=Ye._module.colorbar.calc),ft(),Ue.push(he)}return Ue}function xe(Te,ye,De){var Ue=ye.orientation==="v",he=ye.len,Be=ye.lenmode,Ye=ye.thickness,et=ye.thicknessmode,Qe=ye.outlinewidth,ft=ye.borderwidth,mn=ye.bgcolor,ta=ye.xanchor,Do=ye.yanchor,Ae=ye.xpad,ke=ye.ypad,ge=ye.x,Ce=Ue?ye.y:1-ye.y,Je=ye.yref==="paper",Re=ye.xref==="paper",Q=De._fullLayout,ce=Q._size,Me=ye._fillcolor,Le=ye._line,tt=ye.title,bt=tt.side,Ct=ye._zrange||M.extent((typeof Me=="function"?Me:Le.color).domain()),yi=typeof Le.color=="function"?Le.color:function(){return Le.color},Fl=typeof Me=="function"?Me:function(){return Me},Yl=ye._levels,qp=de(De,ye,Ct),Fp=qp.fill,Up=qp.line,_r=Math.round(Ye*(et==="fraction"?Ue?ce.w:ce.h:1)),gs=_r/(Ue?ce.w:ce.h),dr=Math.round(he*(Be==="fraction"?Ue?ce.h:ce.w:1)),Lo=dr/(Ue?ce.h:ce.w),Cp=Re?ce.w:De._fullLayout.width,Hp=Je?ce.h:De._fullLayout.height,e0=Math.round(Ue?ge*Cp+Ae:Ce*Hp+ke),t0={center:.5,right:1}[ta]||0,n0={top:1,middle:.5}[Do]||0,y0=Ue?ge-t0*gs:Ce-n0*gs,h0=Ue?Ce-n0*Lo:ge-t0*Lo,I0=Math.round(Ue?Hp*(1-h0):Cp*h0);ye._lenFrac=Lo,ye._thickFrac=gs,ye._uFrac=y0,ye._vFrac=h0;var Kp=ye._axis=be(De,ye,Ct);Kp.position=gs+(Ue?ge+Ae/ce.w:Ce+ke/ce.h);var B0=["top","bottom"].indexOf(bt)!==-1;if(Ue&&B0&&(Kp.title.side=bt,Kp.titlex=ge+Ae/ce.w,Kp.titley=h0+(tt.side==="top"?Lo-ke/ce.h:ke/ce.h)),!Ue&&!B0&&(Kp.title.side=bt,Kp.titley=Ce+ke/ce.h,Kp.titlex=h0+Ae/ce.w),Le.color&&ye.tickmode==="auto"){Kp.tickmode="linear",Kp.tick0=Yl.start;var em=Yl.size,k0=C.constrain(dr/50,4,15)+1,J0=(Ct[1]-Ct[0])/((ye.nticks||k0)*em);if(J0>1){var vs=Math.pow(10,Math.floor(Math.log(J0)/Math.LN10));em*=vs*C.roundUp(J0/vs,[2,5,10]),(Math.abs(Yl.start)/Yl.size+1e-6)%1<2e-6&&(Kp.tick0=0)}Kp.dtick=em}Kp.domain=Ue?[h0+ke/ce.h,h0+Lo-ke/ce.h]:[h0+Ae/ce.w,h0+Lo-Ae/ce.w],Kp.setScale(),Te.attr("transform",P(Math.round(ce.l),Math.round(ce.t)));var jl=Te.select("."+Se.cbtitleunshift).attr("transform",P(-Math.round(ce.l),-Math.round(ce.t))),zl=Kp.ticklabelposition,Ve=Kp.title.font.size,pn=Te.select("."+Se.cbaxis),ci,_n=0,Tp=0;function Sp(c0,b0){var E0={propContainer:Kp,propName:ye._propPrefix+"title",traceIndex:ye._traceIndex,_meta:ye._meta,placeholder:Q._dfltTitle.colorbar,containerGroup:Te.select("."+Se.cbtitle)},gm=c0.charAt(0)==="h"?c0.substr(1):"h"+c0;Te.selectAll("."+gm+",."+gm+"-math-group").remove(),ee.draw(De,c0,p(E0,b0||{}))}function Ip(){if(Ue&&B0||!Ue&&!B0){var c0,b0;bt==="top"&&(c0=Ae+ce.l+Cp*ge,b0=ke+ce.t+Hp*(1-h0-Lo)+3+Ve*.75),bt==="bottom"&&(c0=Ae+ce.l+Cp*ge,b0=ke+ce.t+Hp*(1-h0)-3-Ve*.25),bt==="right"&&(b0=ke+ce.t+Hp*Ce+3+Ve*.75,c0=Ae+ce.l+Cp*h0),Sp(Kp._id+"title",{attributes:{x:c0,y:b0,"text-anchor":Ue?"start":"middle"}})}}function Jp(){if(Ue&&!B0||!Ue&&B0){var c0=Kp.position||0,b0=Kp._offset+Kp._length/2,E0,gm;if(bt==="right")gm=b0,E0=ce.l+Cp*c0+10+Ve*(Kp.showticklabels?1:.5);else if(E0=b0,bt==="bottom"&&(gm=ce.t+Hp*c0+10+(zl.indexOf("inside")===-1?Kp.tickfont.size:0)+(Kp.ticks!=="inside"&&ye.ticklen||0)),bt==="top"){var Nm=tt.text.split("<br>").length;gm=ce.t+Hp*c0+10-_r-Z*Ve*Nm}Sp((Ue?"h":"v")+Kp._id+"title",{avoid:{selection:M.select(De).selectAll("g."+Kp._id+"tick"),side:bt,offsetTop:Ue?0:ce.t,offsetLeft:Ue?ce.l:0,maxShift:Ue?Q.width:Q.height},attributes:{x:E0,y:gm,"text-anchor":"middle"},transform:{rotate:Ue?-90:0,offset:0}})}}function m0(){if(!Ue&&!B0||Ue&&B0){var c0=Te.select("."+Se.cbtitle),b0=c0.select("text"),E0=[-Qe/2,Qe/2],gm=c0.select(".h"+Kp._id+"title-math-group").node(),Nm=15.6;b0.node()&&(Nm=parseInt(b0.node().style.fontSize,10)*Z);var Bm;if(gm?(Bm=N.bBox(gm),Tp=Bm.width,_n=Bm.height,_n>Nm&&(E0[1]-=(_n-Nm)/2)):b0.node()&&!b0.classed(Se.jsPlaceholder)&&(Bm=N.bBox(b0.node()),Tp=Bm.width,_n=Bm.height),Ue){if(_n){if(_n+=5,bt==="top")Kp.domain[1]-=_n/ce.h,E0[1]*=-1;else{Kp.domain[0]+=_n/ce.h;var xm=G.lineCount(b0);E0[1]+=(1-xm)*Nm}c0.attr("transform",P(E0[0],E0[1])),Kp.setScale()}}else Tp&&(bt==="right"&&(Kp.domain[0]+=(Tp+Ve/2)/ce.w),c0.attr("transform",P(E0[0],E0[1])),Kp.setScale())}Te.selectAll("."+Se.cbfills+",."+Se.cblines).attr("transform",Ue?P(0,Math.round(ce.h*(1-Kp.domain[1]))):P(Math.round(ce.w*Kp.domain[0]),0)),pn.attr("transform",Ue?P(0,Math.round(-ce.t)):P(Math.round(-ce.l),0));var Am=Te.select("."+Se.cbfills).selectAll("rect."+Se.cbfill).attr("style","").data(Fp);Am.enter().append("rect").classed(Se.cbfill,!0).attr("style",""),Am.exit().remove();var mm=Ct.map(Kp.c2p).map(Math.round).sort(function(Em,lm){return Em-lm});Am.each(function(Em,lm){var Dm=[lm===0?Ct[0]:(Fp[lm]+Fp[lm-1])/2,lm===Fp.length-1?Ct[1]:(Fp[lm]+Fp[lm+1])/2].map(Kp.c2p).map(Math.round);Ue&&(Dm[1]=C.constrain(Dm[1]+(Dm[1]>Dm[0])?1:-1,mm[0],mm[1]));var Zm=M.select(this).attr(Ue?"x":"y",e0).attr(Ue?"y":"x",M.min(Dm)).attr(Ue?"width":"height",Math.max(_r,2)).attr(Ue?"height":"width",Math.max(M.max(Dm)-M.min(Dm),2));if(ye._fillgradient)N.gradient(Zm,De,ye._id,Ue?"vertical":"horizontalreversed",ye._fillgradient,"fill");else{var rv=Fl(Em).replace("e-","");Zm.attr("fill",v(rv).toHexString())}});var vm=Te.select("."+Se.cblines).selectAll("path."+Se.cbline).data(Le.color&&Le.width?Up:[]);vm.enter().append("path").classed(Se.cbline,!0),vm.exit().remove(),vm.each(function(Em){var lm=e0,Dm=Math.round(Kp.c2p(Em))+Le.width/2%1;M.select(this).attr("d","M"+(Ue?lm+","+Dm:Dm+","+lm)+(Ue?"h":"v")+_r).call(N.lineGroupStyle,Le.width,yi(Em),Le.dash)}),pn.selectAll("g."+Kp._id+"tick,path").remove();var Om=e0+_r+(Qe||0)/2-(ye.ticks==="outside"?1:0),Lm=S.calcTicks(Kp),Um=S.getTickSigns(Kp)[2];return S.drawTicks(De,Kp,{vals:Kp.ticks==="inside"?S.clipEnds(Kp,Lm):Lm,layer:pn,path:S.makeTickPath(Kp,Om,Um),transFn:S.makeTransTickFn(Kp)}),S.drawLabels(De,Kp,{vals:Lm,layer:pn,transFn:S.makeTransTickLabelFn(Kp),labelFns:S.makeLabelFns(Kp,Om)})}function Dp(){var c0,b0=_r+Qe/2;zl.indexOf("inside")===-1&&(c0=N.bBox(pn.node()),b0+=Ue?c0.width:c0.height),ci=jl.select("text");var E0=0,gm=Ue&&bt==="top",Nm=!Ue&&bt==="right",Bm=0;if(ci.node()&&!ci.classed(Se.jsPlaceholder)){var xm,Am=jl.select(".h"+Kp._id+"title-math-group").node();Am&&(Ue&&B0||!Ue&&!B0)?(c0=N.bBox(Am),E0=c0.width,xm=c0.height):(c0=N.bBox(jl.node()),E0=c0.right-ce.l-(Ue?e0:I0),xm=c0.bottom-ce.t-(Ue?I0:e0),!Ue&&bt==="top"&&(b0+=c0.height,Bm=c0.height)),Nm&&(ci.attr("transform",P(E0/2+Ve/2,0)),E0*=2),b0=Math.max(b0,Ue?E0:xm)}var mm=(Ue?Ae:ke)*2+b0+ft+Qe/2,vm=0;!Ue&&tt.text&&Do==="bottom"&&Ce<=0&&(vm=mm/2,mm+=vm,Bm+=vm),Q._hColorbarMoveTitle=vm,Q._hColorbarMoveCBTitle=Bm;var Om=ft+Qe,Lm=(Ue?e0:I0)-Om/2-(Ue?Ae:0),Um=(Ue?I0:e0)-(Ue?dr:ke+Bm-vm);Te.select("."+Se.cbbg).attr("x",Lm).attr("y",Um).attr(Ue?"width":"height",Math.max(mm-vm,2)).attr(Ue?"height":"width",Math.max(dr+Om,2)).call(j.fill,mn).call(j.stroke,ye.bordercolor).style("stroke-width",ft);var Em=Nm?Math.max(E0-10,0):0;Te.selectAll("."+Se.cboutline).attr("x",(Ue?e0:I0+Ae)+Em).attr("y",(Ue?I0+ke-dr:e0)+(gm?_n:0)).attr(Ue?"width":"height",Math.max(_r,2)).attr(Ue?"height":"width",Math.max(dr-(Ue?2*ke+_n:2*Ae+Em),2)).call(j.stroke,ye.outlinecolor).style({fill:"none","stroke-width":Qe});var lm=Ue?t0*mm:0,Dm=Ue?0:(1-n0)*mm-Bm;if(lm=Re?ce.l-lm:-lm,Dm=Je?ce.t-Dm:-Dm,Te.attr("transform",P(lm,Dm)),!Ue&&(ft||v(mn).getAlpha()&&!v.equals(Q.paper_bgcolor,mn))){var Zm=pn.selectAll("text"),rv=Zm[0].length,zm=Te.select("."+Se.cbbg).node(),Ym=N.bBox(zm),Km=N.getTranslate(Te),_v=2;Zm.each(function(s0,Rp){var Vp=0,r0=rv-1;if(Rp===Vp||Rp===r0){var $p=N.bBox(this),P0=N.getTranslate(this),j0;if(Rp===r0){var tm=$p.right+P0.x,wm=Ym.right+Km.x+I0-ft-_v+ge;j0=wm-tm,j0>0&&(j0=0)}else if(Rp===Vp){var bm=$p.left+P0.x,Tm=Ym.left+Km.x+I0+ft+_v;j0=Tm-bm,j0<0&&(j0=0)}j0&&(rv<3?this.setAttribute("transform","translate("+j0+",0) "+this.getAttribute("transform")):this.setAttribute("visibility","hidden"))}})}var Hm={},uv=ne[ta],dt=te[ta],Fe=ne[Do],Gp=te[Do],kp=mm-_r;Ue?(Be==="pixels"?(Hm.y=Ce,Hm.t=dr*Fe,Hm.b=dr*Gp):(Hm.t=Hm.b=0,Hm.yt=Ce+he*Fe,Hm.yb=Ce-he*Gp),et==="pixels"?(Hm.x=ge,Hm.l=mm*uv,Hm.r=mm*dt):(Hm.l=kp*uv,Hm.r=kp*dt,Hm.xl=ge-Ye*uv,Hm.xr=ge+Ye*dt)):(Be==="pixels"?(Hm.x=ge,Hm.l=dr*uv,Hm.r=dr*dt):(Hm.l=Hm.r=0,Hm.xl=ge+he*uv,Hm.xr=ge-he*dt),et==="pixels"?(Hm.y=1-Ce,Hm.t=mm*Fe,Hm.b=mm*Gp):(Hm.t=kp*Fe,Hm.b=kp*Gp,Hm.yt=Ce-Ye*Fe,Hm.yb=Ce+Ye*Gp));var yp=ye.y<.5?"b":"t",bp=ye.x<.5?"l":"r";De._fullLayout._reservedMargin[ye._id]={};var Pp={r:Q.width-Lm-lm,l:Lm+Hm.r,b:Q.height-Um-Dm,t:Um+Hm.b};Re&&Je?g.autoMargin(De,ye._id,Hm):Re?De._fullLayout._reservedMargin[ye._id][yp]=Pp[yp]:Je||Ue?De._fullLayout._reservedMargin[ye._id][bp]=Pp[bp]:De._fullLayout._reservedMargin[ye._id][yp]=Pp[yp]}return C.syncOrAsync([g.previousPromises,Ip,m0,Jp,g.previousPromises,Dp],De)}function re(Te,ye,De){var Ue=ye.orientation==="v",he=De._fullLayout,Be=he._size,Ye,et,Qe;T.init({element:Te.node(),gd:De,prepFn:function(){Ye=Te.attr("transform"),Y(Te)},moveFn:function(ft,mn){Te.attr("transform",Ye+P(ft,mn)),et=T.align((Ue?ye._uFrac:ye._vFrac)+ft/Be.w,Ue?ye._thickFrac:ye._lenFrac,0,1,ye.xanchor),Qe=T.align((Ue?ye._vFrac:1-ye._uFrac)-mn/Be.h,Ue?ye._lenFrac:ye._thickFrac,0,1,ye.yanchor);var ta=T.getCursor(et,Qe,ye.xanchor,ye.yanchor);Y(Te,ta)},doneFn:function(){if(Y(Te),et!==void 0&&Qe!==void 0){var ft={};ft[ye._propPrefix+"x"]=et,ft[ye._propPrefix+"y"]=Qe,ye._traceIndex!==void 0?E.call("_guiRestyle",De,ft,ye._traceIndex):E.call("_guiRelayout",De,ft)}}})}function de(Te,ye,De){var Ue=ye._levels,he=[],Be=[],Ye,et,Qe=Ue.end+Ue.size/100,ft=Ue.size,mn=1.001*De[0]-.001*De[1],ta=1.001*De[1]-.001*De[0];for(et=0;et<1e5&&(Ye=Ue.start+et*ft,!(ft>0?Ye>=Qe:Ye<=Qe));et++)Ye>mn&&Ye<ta&&he.push(Ye);if(ye._fillgradient)Be=[0];else if(typeof ye._fillcolor=="function"){var Do=ye._filllevels;if(Do)for(Qe=Do.end+Do.size/100,ft=Do.size,et=0;et<1e5&&(Ye=Do.start+et*ft,!(ft>0?Ye>=Qe:Ye<=Qe));et++)Ye>De[0]&&Ye<De[1]&&Be.push(Ye);else Be=he.map(function(Ae){return Ae-Ue.size/2}),Be.push(Be[Be.length-1]+Ue.size)}else ye._fillcolor&&typeof ye._fillcolor=="string"&&(Be=[0]);return Ue.size<0&&(he.reverse(),Be.reverse()),{line:he,fill:Be}}function be(Te,ye,De){var Ue=Te._fullLayout,he=ye.orientation==="v",Be={type:"linear",range:De,tickmode:ye.tickmode,nticks:ye.nticks,tick0:ye.tick0,dtick:ye.dtick,tickvals:ye.tickvals,ticktext:ye.ticktext,ticks:ye.ticks,ticklen:ye.ticklen,tickwidth:ye.tickwidth,tickcolor:ye.tickcolor,showticklabels:ye.showticklabels,labelalias:ye.labelalias,ticklabelposition:ye.ticklabelposition,ticklabeloverflow:ye.ticklabeloverflow,ticklabelstep:ye.ticklabelstep,tickfont:ye.tickfont,tickangle:ye.tickangle,tickformat:ye.tickformat,exponentformat:ye.exponentformat,minexponent:ye.minexponent,separatethousands:ye.separatethousands,showexponent:ye.showexponent,showtickprefix:ye.showtickprefix,tickprefix:ye.tickprefix,showticksuffix:ye.showticksuffix,ticksuffix:ye.ticksuffix,title:ye.title,showline:!0,anchor:"free",side:he?"right":"bottom",position:1},Ye=he?"y":"x",et={type:"linear",_id:Ye+ye._id},Qe={letter:Ye,font:Ue.font,noAutotickangles:Ye==="y",noHover:!0,noTickson:!0,noTicklabelmode:!0,noInsideRange:!0,calendar:Ue.calendar};function ft(mn,ta){return C.coerce(Be,et,z,mn,ta)}return W(Be,et,ft,Qe,Ue),q(Be,et,ft,Qe),et}me.exports={draw:fe}}}),Yv=a({"src/components/colorbar/index.js"(pe,me){me.exports={moduleType:"component",name:"colorbar",attributes:hg(),supplyDefaults:qy(),draw:I1().draw,hasColorbar:Ng()}}}),Pv=a({"src/components/legend/index.js"(pe,me){me.exports={moduleType:"component",name:"legend",layoutAttributes:q_(),supplyLayoutDefaults:$x(),draw:m_(),style:rx()}}}),Bv=a({"src/locale-en.js"(pe,me){me.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}}}),Qm=a({"src/locale-en-us.js"(pe,me){me.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}}}),Dv=a({"src/snapshot/cloneplot.js"(pe,me){var M=jp(),v=o0(),g=v.extendFlat,E=v.extendDeep;function S(C){var P;switch(C){case"themes__thumb":P={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":P={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:P={}}return P}function T(C){var P=["xaxis","yaxis","zaxis"];return P.indexOf(C.slice(0,5))>-1}me.exports=function(P,p){var Y,N=P.data,j=P.layout,ee=E([],N),G=E({},j,S(p.tileClass)),V=P._context||{};if(p.width&&(G.width=p.width),p.height&&(G.height=p.height),p.tileClass==="thumbnail"||p.tileClass==="themes__thumb"){G.annotations=[];var W=Object.keys(G);for(Y=0;Y<W.length;Y++)T(W[Y])&&(G[W[Y]].title={text:""});for(Y=0;Y<ee.length;Y++){var q=ee[Y];q.showscale=!1,q.marker&&(q.marker.showscale=!1),M.traceIs(q,"pie-like")&&(q.textposition="none")}}if(Array.isArray(p.annotations))for(Y=0;Y<p.annotations.length;Y++)G.annotations.push(p.annotations[Y]);var z=Object.keys(G).filter(function(Se){return Se.match(/^scene\d*$/)});if(z.length){var H={};for(p.tileClass==="thumbnail"&&(H={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),Y=0;Y<z.length;Y++){var Z=G[z[Y]];Z.xaxis||(Z.xaxis={}),Z.yaxis||(Z.yaxis={}),Z.zaxis||(Z.zaxis={}),g(Z.xaxis,H),g(Z.yaxis,H),g(Z.zaxis,H),Z._scene=null}}var ne=document.createElement("div");p.tileClass&&(ne.className=p.tileClass);var te={gd:ne,td:ne,layout:G,data:ee,config:{staticPlot:p.staticPlot===void 0?!0:p.staticPlot,plotGlPixelRatio:p.plotGlPixelRatio===void 0?2:p.plotGlPixelRatio,displaylogo:p.displaylogo||!1,showLink:p.showLink||!1,showTips:p.showTips||!1,mapboxAccessToken:V.mapboxAccessToken}};return p.setBackground!=="transparent"&&(te.config.setBackground=p.setBackground||"opaque"),te.gd.defaultLayout=S(p.tileClass),te}}}),F1=a({"src/snapshot/toimage.js"(pe,me){var M=ov().EventEmitter,v=jp(),g=o0(),E=e_(),S=Dv(),T=dy(),C=Ny();function P(p,Y){var N=new M,j=S(p,{format:"png"}),ee=j.gd;ee.style.position="absolute",ee.style.left="-5000px",document.body.appendChild(ee);function G(){var W=E.getDelay(ee._fullLayout);setTimeout(function(){var q=T(ee),z=document.createElement("canvas");z.id=g.randstr(),N=C({format:Y.format,width:ee._fullLayout.width,height:ee._fullLayout.height,canvas:z,emitter:N,svg:q}),N.clean=function(){ee&&document.body.removeChild(ee)}},W)}var V=E.getRedrawFunc(ee);return v.call("_doPlot",ee,j.data,j.layout,j.config).then(V).then(G).catch(function(W){N.emit("error",W)}),N}me.exports=P}}),Qv=a({"src/snapshot/index.js"(pe,me){var M=e_(),v={getDelay:M.getDelay,getRedrawFunc:M.getRedrawFunc,clone:Dv(),toSVG:dy(),svgToImg:Ny(),toImage:F1(),downloadImage:ey()};me.exports=v}}),jv=a({"src/core.js"(pe){pe.version=s().version,o(),pm();var me=jp(),M=pe.register=me.register,v=T2(),g=Object.keys(v);for(S=0;S<g.length;S++)E=g[S],E.charAt(0)!=="_"&&(pe[E]=v[E]),M({moduleType:"apiMethod",name:E,fn:v[E]});var E,S;M(i2()),M([wx(),ny(),ng(),E_(),Ex(),Cx(),c2(),C_(),l0(),hm(),Im(),Wy(),Yv(),Pv(),uy(),ux()]),M([Bv(),Qm()]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(M(window.PlotlyLocales),delete window.PlotlyLocales),pe.Icons=X_();var T=uy(),C=p1();pe.Plots={resize:C.resize,graphJson:C.graphJson,sendDataToCloud:C.sendDataToCloud},pe.Fx={hover:T.hover,unhover:T.unhover,loneHover:T.loneHover,loneUnhover:T.loneUnhover},pe.Snapshot=Qv(),pe.PlotSchema=Lv()}}),y1=a({"lib/core.js"(pe,me){me.exports=jv()}}),bv=a({"src/traces/bar/constants.js"(pe,me){me.exports={TEXTPAD:3,eventDataKeys:["value","label"]}}}),Nv=a({"src/traces/bar/attributes.js"(pe,me){var M=Jy(),v=Kv().axisHoverFormat,g=kl().hovertemplateAttrs,E=kl().texttemplateAttrs,S=j1(),T=B(),C=bv(),P=Bp().pattern,p=k().extendFlat,Y=T({editType:"calc",arrayOk:!0,colorEditType:"style"}),N=M.marker,j=N.line,ee=p({},j.width,{dflt:0}),G=p({width:ee,editType:"calc"},S("marker.line")),V=p({line:G,editType:"calc"},S("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"},pattern:P,cornerradius:{valType:"any",editType:"calc"}});me.exports={x:M.x,x0:M.x0,dx:M.dx,y:M.y,y0:M.y0,dy:M.dy,xperiod:M.xperiod,yperiod:M.yperiod,xperiod0:M.xperiod0,yperiod0:M.yperiod0,xperiodalignment:M.xperiodalignment,yperiodalignment:M.yperiodalignment,xhoverformat:v("x"),yhoverformat:v("y"),text:M.text,texttemplate:E({editType:"plot"},{keys:C.eventDataKeys}),hovertext:M.hovertext,hovertemplate:g({},{keys:C.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:p({},Y,{}),insidetextfont:p({},Y,{}),outsidetextfont:p({},Y,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:p({},M.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:V,offsetgroup:M.offsetgroup,alignmentgroup:M.alignmentgroup,selected:{marker:{opacity:M.selected.marker.opacity,color:M.selected.marker.color,editType:"style"},textfont:M.selected.textfont,editType:"style"},unselected:{marker:{opacity:M.unselected.marker.opacity,color:M.unselected.marker.color,editType:"style"},textfont:M.unselected.textfont,editType:"style"},zorder:M.zorder}}}),ug=a({"src/traces/bar/layout_attributes.js"(pe,me){me.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},barcornerradius:{valType:"any",editType:"calc"}}}}),Tg=a({"src/traces/bar/style_defaults.js"(pe,me){var M=Oe(),v=Q1().hasColorscale,g=Ey(),E=o0().coercePattern;me.exports=function(T,C,P,p,Y){var N=P("marker.color",p),j=v(T,"marker");j&&g(T,C,Y,P,{prefix:"marker.",cLetter:"c"}),P("marker.line.color",M.defaultLine),v(T,"marker.line")&&g(T,C,Y,P,{prefix:"marker.line.",cLetter:"c"}),P("marker.line.width"),P("marker.opacity"),E(P,"marker.pattern",N,j),P("selected.marker.color"),P("unselected.marker.color")}}}),o_=a({"src/traces/bar/defaults.js"(pe,me){var M=w(),v=o0(),g=Oe(),E=jp(),S=E2(),T=py(),C=Tg(),P=t2(),p=Nv(),Y=v.coerceFont;function N(V,W,q,z){function H(fe,ve){return v.coerce(V,W,p,fe,ve)}var Z=S(V,W,z,H);if(!Z){W.visible=!1;return}T(V,W,z,H),H("xhoverformat"),H("yhoverformat"),H("zorder"),H("orientation",W.x&&!W.y?"h":"v"),H("base"),H("offset"),H("width"),H("text"),H("hovertext"),H("hovertemplate");var ne=H("textposition");G(V,W,z,H,ne,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),C(V,W,H,q,z);var te=(W.marker.line||{}).color,Se=E.getComponentMethod("errorbars","supplyDefaults");Se(V,W,te||g.defaultLine,{axis:"y"}),Se(V,W,te||g.defaultLine,{axis:"x",inherit:"y"}),v.coerceSelectionMarkerOpacity(W,H)}function j(V,W){var q,z;function H(te,Se){return v.coerce(z._input,z,p,te,Se)}for(var Z=0;Z<V.length;Z++)if(z=V[Z],z.type==="bar"){q=z._input;var ne=H("marker.cornerradius",W.barcornerradius);z.marker&&(z.marker.cornerradius=ee(ne)),P(q,z,W,H,W.barmode)}}function ee(V){if(M(V)){if(V=+V,V>=0)return V}else if(typeof V=="string"&&(V=V.trim(),V.slice(-1)==="%"&&M(V.slice(0,-1))&&(V=+V.slice(0,-1),V>=0)))return V+"%"}function G(V,W,q,z,H,Z){Z=Z||{};var ne=Z.moduleHasSelected!==!1,te=Z.moduleHasUnselected!==!1,Se=Z.moduleHasConstrain!==!1,fe=Z.moduleHasCliponaxis!==!1,ve=Z.moduleHasTextangle!==!1,xe=Z.moduleHasInsideanchor!==!1,re=!!Z.hasPathbar,de=Array.isArray(H)||H==="auto",be=de||H==="inside",Te=de||H==="outside";if(be||Te){var ye=Y(z,"textfont",q.font),De=v.extendFlat({},ye),Ue=V.textfont&&V.textfont.color,he=!Ue;if(he&&delete De.color,Y(z,"insidetextfont",De),re){var Be=v.extendFlat({},ye);he&&delete Be.color,Y(z,"pathbar.textfont",Be)}Te&&Y(z,"outsidetextfont",ye),ne&&z("selected.textfont.color"),te&&z("unselected.textfont.color"),Se&&z("constraintext"),fe&&z("cliponaxis"),ve&&z("textangle"),z("texttemplate")}be&&xe&&z("insidetextanchor")}me.exports={supplyDefaults:N,crossTraceDefaults:j,handleText:G,validateCornerradius:ee}}}),R_=a({"src/traces/bar/layout_defaults.js"(pe,me){var M=jp(),v=g1(),g=o0(),E=ug(),S=o_().validateCornerradius;me.exports=function(T,C,P){function p(ne,te){return g.coerce(T,C,E,ne,te)}for(var Y=!1,N=!1,j=!1,ee={},G=p("barmode"),V=G==="group",W=0;W<P.length;W++){var q=P[W];if(M.traceIs(q,"bar")&&q.visible)Y=!0;else continue;var z=q.xaxis+q.yaxis;if(V?(ee[z]&&(j=!0),ee[z]=!0):(z+=q._input.offsetgroup,ee.length>0&&!ee[z]&&(j=!0),ee[z]=!0),q.visible&&q.type==="histogram"){var H=v.getFromId({_fullLayout:C},q[q.orientation==="v"?"xaxis":"yaxis"]);H.type!=="category"&&(N=!0)}}if(!Y){delete C.barmode;return}G!=="overlay"&&p("barnorm"),p("bargap",N&&!j?0:.2),p("bargroupgap");var Z=p("barcornerradius");C.barcornerradius=S(Z)}}}),Ug=a({"src/traces/bar/arrays_to_calcdata.js"(pe,me){var M=o0();me.exports=function(g,E){for(var S=0;S<g.length;S++)g[S].i=S;M.mergeArray(E.text,g,"tx"),M.mergeArray(E.hovertext,g,"htx");var T=E.marker;if(T){M.mergeArray(T.opacity,g,"mo",!0),M.mergeArray(T.color,g,"mc");var C=T.line;C&&(M.mergeArray(C.color,g,"mlc"),M.mergeArrayCastPositive(C.width,g,"mlw"))}}}}),L_=a({"src/traces/bar/calc.js"(pe,me){var M=g1(),v=x1(),g=Q1().hasColorscale,E=g2(),S=Ug(),T=C2();me.exports=function(P,p){var Y=M.getFromId(P,p.xaxis||"x"),N=M.getFromId(P,p.yaxis||"y"),j,ee,G,V,W,q,z={msUTC:!!(p.base||p.base===0)};p.orientation==="h"?(j=Y.makeCalcdata(p,"x",z),G=N.makeCalcdata(p,"y"),V=v(p,N,"y",G),W=!!p.yperiodalignment,q="y"):(j=N.makeCalcdata(p,"y",z),G=Y.makeCalcdata(p,"x"),V=v(p,Y,"x",G),W=!!p.xperiodalignment,q="x"),ee=V.vals;for(var H=Math.min(ee.length,j.length),Z=new Array(H),ne=0;ne<H;ne++)Z[ne]={p:ee[ne],s:j[ne]},W&&(Z[ne].orig_p=G[ne],Z[ne][q+"End"]=V.ends[ne],Z[ne][q+"Start"]=V.starts[ne]),p.ids&&(Z[ne].id=String(p.ids[ne]));return g(p,"marker")&&E(P,p,{vals:p.marker.color,containerStr:"marker",cLetter:"c"}),g(p,"marker.line")&&E(P,p,{vals:p.marker.line.color,containerStr:"marker.line",cLetter:"c"}),S(Z,p),T(Z,p),Z}}}),D_=a({"src/traces/bar/uniform_text.js"(pe,me){var M=f(),v=o0();function g(C,P,p){var Y=C._fullLayout,N=Y["_"+p+"Text_minsize"];if(N){var j=Y.uniformtext.mode==="hide",ee;switch(p){case"funnelarea":case"pie":case"sunburst":ee="g.slice";break;case"treemap":case"icicle":ee="g.slice, g.pathbar";break;default:ee="g.points > g.point"}P.selectAll(ee).each(function(G){var V=G.transform;if(V){V.scale=j&&V.hide?0:N/V.fontSize;var W=M.select(this).select("text");v.setTransormAndDisplay(W,V)}})}}function E(C,P,p){if(p.uniformtext.mode){var Y=T(C),N=p.uniformtext.minsize,j=P.scale*P.fontSize;P.hide=j<N,p[Y]=p[Y]||1/0,P.hide||(p[Y]=Math.min(p[Y],Math.max(j,N)))}}function S(C,P){var p=T(C);P[p]=void 0}function T(C){return"_"+C+"Text_minsize"}me.exports={recordMinTextSize:E,clearMinTextSize:S,resizeText:g}}}),Lx=a({"src/traces/bar/helpers.js"(pe){var me=w(),M=b(),v=o0().isArrayOrTypedArray;pe.coerceString=function(g,E,S){if(typeof E=="string"){if(E||!g.noBlank)return E}else if((typeof E=="number"||E===!0)&&!g.strict)return String(E);return S!==void 0?S:g.dflt},pe.coerceNumber=function(g,E,S){if(me(E)){E=+E;var T=g.min,C=g.max,P=T!==void 0&&E<T||C!==void 0&&E>C;if(!P)return E}return S!==void 0?S:g.dflt},pe.coerceColor=function(g,E,S){return M(E).isValid()?E:S!==void 0?S:g.dflt},pe.coerceEnumerated=function(g,E,S){return g.coerceNumber&&(E=+E),g.values.indexOf(E)!==-1?E:S!==void 0?S:g.dflt},pe.getValue=function(g,E){var S;return v(g)?E<g.length&&(S=g[E]):S=g,S},pe.getLineWidth=function(g,E){var S=0<E.mlw?E.mlw:v(g.marker.line.width)?0:g.marker.line.width;return S}}}),Dx=a({"src/traces/bar/style.js"(pe,me){var M=f(),v=Oe(),g=t1(),E=o0(),S=jp(),T=D_().resizeText,C=Nv(),P=C.textfont,p=C.insidetextfont,Y=C.outsidetextfont,N=Lx();function j(fe){var ve=M.select(fe).selectAll('g[class^="barlayer"]').selectAll("g.trace");T(fe,ve,"bar");var xe=ve.size(),re=fe._fullLayout;ve.style("opacity",function(de){return de[0].trace.opacity}).each(function(de){(re.barmode==="stack"&&xe>1||re.bargap===0&&re.bargroupgap===0&&!de[0].trace.marker.line.width)&&M.select(this).attr("shape-rendering","crispEdges")}),ve.selectAll("g.points").each(function(de){var be=M.select(this),Te=de[0].trace;ee(be,Te,fe)}),S.getComponentMethod("errorbars","style")(ve)}function ee(fe,ve,xe){g.pointStyle(fe.selectAll("path"),ve,xe),G(fe,ve,xe)}function G(fe,ve,xe){fe.selectAll("text").each(function(re){var de=M.select(this),be=E.ensureUniformFontSize(xe,z(de,re,ve,xe));g.font(de,be)})}function V(fe,ve,xe){var re=ve[0].trace;re.selectedpoints?W(xe,re,fe):(ee(xe,re,fe),S.getComponentMethod("errorbars","style")(xe))}function W(fe,ve,xe){g.selectedPointStyle(fe.selectAll("path"),ve),q(fe.selectAll("text"),ve,xe)}function q(fe,ve,xe){fe.each(function(re){var de=M.select(this),be;if(re.selected){be=E.ensureUniformFontSize(xe,z(de,re,ve,xe));var Te=ve.selected.textfont&&ve.selected.textfont.color;Te&&(be.color=Te),g.font(de,be)}else g.selectedTextStyle(de,ve)})}function z(fe,ve,xe,re){var de=re._fullLayout.font,be=xe.textfont;if(fe.classed("bartext-inside")){var Te=Se(ve,xe);be=Z(xe,ve.i,de,Te)}else fe.classed("bartext-outside")&&(be=ne(xe,ve.i,de));return be}function H(fe,ve,xe){return te(P,fe.textfont,ve,xe)}function Z(fe,ve,xe,re){var de=H(fe,ve,xe),be=fe._input.textfont===void 0||fe._input.textfont.color===void 0||Array.isArray(fe.textfont.color)&&fe.textfont.color[ve]===void 0;return be&&(de={color:v.contrast(re),family:de.family,size:de.size,weight:de.weight,style:de.style,variant:de.variant,textcase:de.textcase,lineposition:de.lineposition,shadow:de.shadow}),te(p,fe.insidetextfont,ve,de)}function ne(fe,ve,xe){var re=H(fe,ve,xe);return te(Y,fe.outsidetextfont,ve,re)}function te(fe,ve,xe,re){ve=ve||{};var de=N.getValue(ve.family,xe),be=N.getValue(ve.size,xe),Te=N.getValue(ve.color,xe),ye=N.getValue(ve.weight,xe),De=N.getValue(ve.style,xe),Ue=N.getValue(ve.variant,xe),he=N.getValue(ve.textcase,xe),Be=N.getValue(ve.lineposition,xe),Ye=N.getValue(ve.shadow,xe);return{family:N.coerceString(fe.family,de,re.family),size:N.coerceNumber(fe.size,be,re.size),color:N.coerceColor(fe.color,Te,re.color),weight:N.coerceString(fe.weight,ye,re.weight),style:N.coerceString(fe.style,De,re.style),variant:N.coerceString(fe.variant,Ue,re.variant),textcase:N.coerceString(fe.variant,he,re.textcase),lineposition:N.coerceString(fe.variant,Be,re.lineposition),shadow:N.coerceString(fe.variant,Ye,re.shadow)}}function Se(fe,ve){return ve.type==="waterfall"?ve[fe.dir].marker.color:fe.mcc||fe.mc||ve.marker.color}me.exports={style:j,styleTextPoints:G,styleOnSelect:V,getInsideTextFont:Z,getOutsideTextFont:ne,getBarColor:Se,resizeText:T}}}),kx=a({"src/traces/bar/plot.js"(pe,me){var M=f(),v=w(),g=o0(),E=v1(),S=Oe(),T=t1(),C=jp(),P=g1().tickText,p=D_(),Y=p.recordMinTextSize,N=p.clearMinTextSize,j=Dx(),ee=Lx(),G=bv(),V=Nv(),W=V.text,q=V.textposition,z=jg().appendArrayPointValue,H=G.TEXTPAD;function Z(ft){return ft.id}function ne(ft){if(ft.ids)return Z}function te(ft){return(ft>0)-(ft<0)}function Se(ft,mn){return ft<mn?1:-1}function fe(ft,mn,ta,Do){var Ae=[],ke=[],ge=Do?mn:ta,Ce=Do?ta:mn;return Ae[0]=ge.c2p(ft.s0,!0),ke[0]=Ce.c2p(ft.p0,!0),Ae[1]=ge.c2p(ft.s1,!0),ke[1]=Ce.c2p(ft.p1,!0),Do?[Ae,ke]:[ke,Ae]}function ve(ft,mn,ta,Do){if(!mn.uniformtext.mode&&xe(ta)){var Ae;return Do&&(Ae=Do()),ft.transition().duration(ta.duration).ease(ta.easing).each("end",function(){Ae&&Ae()}).each("interrupt",function(){Ae&&Ae()})}else return ft}function xe(ft){return ft&&ft.duration>0}function re(ft,mn,ta,Do,Ae,ke){var ge=mn.xaxis,Ce=mn.yaxis,Je=ft._fullLayout,Re=ft._context.staticPlot;Ae||(Ae={mode:Je.barmode,norm:Je.barmode,gap:Je.bargap,groupgap:Je.bargroupgap},N("bar",Je));var Q=g.makeTraceGroups(Do,ta,"trace bars").each(function(ce){var Me=M.select(this),Le=ce[0].trace,tt=ce[0].t,bt=Le.type==="waterfall",Ct=Le.type==="funnel",yi=Le.type==="histogram",Fl=Le.type==="bar",Yl=Fl||Ct,qp=0;bt&&Le.connector.visible&&Le.connector.mode==="between"&&(qp=Le.connector.line.width/2);var Fp=Le.orientation==="h",Up=xe(Ae),_r=g.ensureSingle(Me,"g","points"),gs=ne(Le),dr=_r.selectAll("g.point").data(g.identity,gs);dr.enter().append("g").classed("point",!0),dr.exit().remove(),dr.each(function(Cp,Hp){var e0=M.select(this),t0=fe(Cp,ge,Ce,Fp),n0=t0[0][0],y0=t0[0][1],h0=t0[1][0],I0=t0[1][1],Kp=(Fp?y0-n0:I0-h0)===0;Kp&&Yl&&ee.getLineWidth(Le,Cp)&&(Kp=!1),Kp||(Kp=!v(n0)||!v(y0)||!v(h0)||!v(I0)),Cp.isBlank=Kp,Kp&&(Fp?y0=n0:I0=h0),qp&&!Kp&&(Fp?(n0-=Se(n0,y0)*qp,y0+=Se(n0,y0)*qp):(h0-=Se(h0,I0)*qp,I0+=Se(h0,I0)*qp));var B0,em;if(Le.type==="waterfall"){if(!Kp){var k0=Le[Cp.dir].marker;B0=k0.line.width,em=k0.color}}else B0=ee.getLineWidth(Le,Cp),em=Cp.mc||Le.marker.color;function J0(Om){var Lm=M.round(B0/2%1,2);return Ae.gap===0&&Ae.groupgap===0?M.round(Math.round(Om)-Lm,2):Om}function vs(Om,Lm,Um){return Um&&Om===Lm?Om:Math.abs(Om-Lm)>=2?J0(Om):Om>Lm?Math.ceil(Om):Math.floor(Om)}var jl=S.opacity(em),zl=jl<1||B0>.01?J0:vs;ft._context.staticPlot||(n0=zl(n0,y0,Fp),y0=zl(y0,n0,Fp),h0=zl(h0,I0,!Fp),I0=zl(I0,h0,!Fp));var Ve=Fp?ge.c2p:Ce.c2p,pn;Cp.s0>0?pn=Cp._sMax:Cp.s0<0?pn=Cp._sMin:pn=Cp.s1>0?Cp._sMax:Cp._sMin;function ci(Om,Lm){if(!Om)return 0;var Um=Math.abs(Fp?I0-h0:y0-n0),Em=Math.abs(Fp?y0-n0:I0-h0),lm=zl(Math.abs(Ve(pn,!0)-Ve(0,!0))),Dm=Cp.hasB?Math.min(Um/2,Em/2):Math.min(Um/2,lm),Zm;if(Lm==="%"){var rv=Math.min(50,Om);Zm=Um*(rv/100)}else Zm=Om;return zl(Math.max(Math.min(Zm,Dm),0))}var _n=Fl||yi?ci(tt.cornerradiusvalue,tt.cornerradiusform):0,Tp,Sp,Ip="M"+n0+","+h0+"V"+I0+"H"+y0+"V"+h0+"Z",Jp=0;if(_n&&Cp.s){var m0=te(Cp.s0)===0||te(Cp.s)===te(Cp.s0)?Cp.s1:Cp.s0;if(Jp=zl(Cp.hasB?0:Math.abs(Ve(pn,!0)-Ve(m0,!0))),Jp<_n){var Dp=Se(n0,y0),c0=Se(h0,I0),b0=Dp===-c0?1:0;if(Fp)if(Cp.hasB)Tp="M"+(n0+_n*Dp)+","+h0+"A "+_n+","+_n+" 0 0 "+b0+" "+n0+","+(h0+_n*c0)+"V"+(I0-_n*c0)+"A "+_n+","+_n+" 0 0 "+b0+" "+(n0+_n*Dp)+","+I0+"H"+(y0-_n*Dp)+"A "+_n+","+_n+" 0 0 "+b0+" "+y0+","+(I0-_n*c0)+"V"+(h0+_n*c0)+"A "+_n+","+_n+" 0 0 "+b0+" "+(y0-_n*Dp)+","+h0+"Z";else{Sp=Math.abs(y0-n0)+Jp;var E0=Sp<_n?_n-Math.sqrt(Sp*(2*_n-Sp)):0,gm=Jp>0?Math.sqrt(Jp*(2*_n-Jp)):0,Nm=Dp>0?Math.max:Math.min;Tp="M"+n0+","+h0+"V"+(I0-E0*c0)+"H"+Nm(y0-(_n-Jp)*Dp,n0)+"A "+_n+","+_n+" 0 0 "+b0+" "+y0+","+(I0-_n*c0-gm)+"V"+(h0+_n*c0+gm)+"A "+_n+","+_n+" 0 0 "+b0+" "+Nm(y0-(_n-Jp)*Dp,n0)+","+(h0+E0*c0)+"Z"}else if(Cp.hasB)Tp="M"+(n0+_n*Dp)+","+h0+"A "+_n+","+_n+" 0 0 "+b0+" "+n0+","+(h0+_n*c0)+"V"+(I0-_n*c0)+"A "+_n+","+_n+" 0 0 "+b0+" "+(n0+_n*Dp)+","+I0+"H"+(y0-_n*Dp)+"A "+_n+","+_n+" 0 0 "+b0+" "+y0+","+(I0-_n*c0)+"V"+(h0+_n*c0)+"A "+_n+","+_n+" 0 0 "+b0+" "+(y0-_n*Dp)+","+h0+"Z";else{Sp=Math.abs(I0-h0)+Jp;var Bm=Sp<_n?_n-Math.sqrt(Sp*(2*_n-Sp)):0,xm=Jp>0?Math.sqrt(Jp*(2*_n-Jp)):0,Am=c0>0?Math.max:Math.min;Tp="M"+(n0+Bm*Dp)+","+h0+"V"+Am(I0-(_n-Jp)*c0,h0)+"A "+_n+","+_n+" 0 0 "+b0+" "+(n0+_n*Dp-xm)+","+I0+"H"+(y0-_n*Dp+xm)+"A "+_n+","+_n+" 0 0 "+b0+" "+(y0-Bm*Dp)+","+Am(I0-(_n-Jp)*c0,h0)+"V"+h0+"Z"}}else Tp=Ip}else Tp=Ip;var mm=ve(g.ensureSingle(e0,"path"),Je,Ae,ke);if(mm.style("vector-effect",Re?"none":"non-scaling-stroke").attr("d",isNaN((y0-n0)*(I0-h0))||Kp&&ft._context.staticPlot?"M0,0Z":Tp).call(T.setClipUrl,mn.layerClipId,ft),!Je.uniformtext.mode&&Up){var vm=T.makePointStyleFns(Le);T.singlePointStyle(Cp,mm,Le,vm,ft)}de(ft,mn,e0,ce,Hp,n0,y0,h0,I0,_n,Jp,Ae,ke),mn.layerClipId&&T.hideOutsideRangePoint(Cp,e0.select("text"),ge,Ce,Le.xcalendar,Le.ycalendar)});var Lo=Le.cliponaxis===!1;T.setClipUrl(Me,Lo?null:mn.layerClipId,ft)});C.getComponentMethod("errorbars","plot")(ft,Q,mn,Ae)}function de(ft,mn,ta,Do,Ae,ke,ge,Ce,Je,Re,Q,ce,Me){var Le=mn.xaxis,tt=mn.yaxis,bt=ft._fullLayout,Ct;function yi(Sp,Ip,Jp){var m0=g.ensureSingle(Sp,"text").text(Ip).attr({class:"bartext bartext-"+Ct,"text-anchor":"middle","data-notex":1}).call(T.font,Jp).call(E.convertToTspans,ft);return m0}var Fl=Do[0].trace,Yl=Fl.orientation==="h",qp=Be(bt,Do,Ae,Le,tt);Ct=Ye(Fl,Ae);var Fp=ce.mode==="stack"||ce.mode==="relative",Up=Do[Ae],_r=!Fp||Up._outmost,gs=Up.hasB,dr=Re&&Re-Q>H;if(!qp||Ct==="none"||(Up.isBlank||ke===ge||Ce===Je)&&(Ct==="auto"||Ct==="inside")){ta.select("text").remove();return}var Lo=bt.font,Cp=j.getBarColor(Do[Ae],Fl),Hp=j.getInsideTextFont(Fl,Ae,Lo,Cp),e0=j.getOutsideTextFont(Fl,Ae,Lo),t0=Fl.insidetextanchor||"end",n0=ta.datum();Yl?Le.type==="log"&&n0.s0<=0&&(Le.range[0]<Le.range[1]?ke=0:ke=Le._length):tt.type==="log"&&n0.s0<=0&&(tt.range[0]<tt.range[1]?Ce=tt._length:Ce=0);var y0=Math.abs(ge-ke),h0=Math.abs(Je-Ce),I0=y0-2*H,Kp=h0-2*H,B0,em,k0,J0,vs;if(Ct==="outside"&&!_r&&!Up.hasB&&(Ct="inside"),Ct==="auto")if(_r){Ct="inside",vs=g.ensureUniformFontSize(ft,Hp),B0=yi(ta,qp,vs),em=T.bBox(B0.node()),k0=em.width,J0=em.height;var jl=k0>0&&J0>0,zl;dr?gs?zl=be(I0-2*Re,Kp,k0,J0,Yl)||be(I0,Kp-2*Re,k0,J0,Yl):Yl?zl=be(I0-(Re-Q),Kp,k0,J0,Yl)||be(I0,Kp-2*(Re-Q),k0,J0,Yl):zl=be(I0,Kp-(Re-Q),k0,J0,Yl)||be(I0-2*(Re-Q),Kp,k0,J0,Yl):zl=be(I0,Kp,k0,J0,Yl),jl&&zl?Ct="inside":(Ct="outside",B0.remove(),B0=null)}else Ct="inside";if(!B0){vs=g.ensureUniformFontSize(ft,Ct==="outside"?e0:Hp),B0=yi(ta,qp,vs);var Ve=B0.attr("transform");if(B0.attr("transform",""),em=T.bBox(B0.node()),k0=em.width,J0=em.height,B0.attr("transform",Ve),k0<=0||J0<=0){B0.remove();return}}var pn=Fl.textangle,ci,_n;Ct==="outside"?(_n=Fl.constraintext==="both"||Fl.constraintext==="outside",ci=he(ke,ge,Ce,Je,em,{isHorizontal:Yl,constrained:_n,angle:pn})):(_n=Fl.constraintext==="both"||Fl.constraintext==="inside",ci=De(ke,ge,Ce,Je,em,{isHorizontal:Yl,constrained:_n,angle:pn,anchor:t0,hasB:gs,r:Re,overhead:Q})),ci.fontSize=vs.size,Y(Fl.type==="histogram"?"bar":Fl.type,ci,bt),Up.transform=ci;var Tp=ve(B0,bt,ce,Me);g.setTransormAndDisplay(Tp,ci)}function be(ft,mn,ta,Do,Ae){if(ft<0||mn<0)return!1;var ke=ta<=ft&&Do<=mn,ge=ta<=mn&&Do<=ft,Ce=Ae?ft>=ta*(mn/Do):mn>=Do*(ft/ta);return ke||ge||Ce}function Te(ft){return ft==="auto"?0:ft}function ye(ft,mn){var ta=Math.PI/180*mn,Do=Math.abs(Math.sin(ta)),Ae=Math.abs(Math.cos(ta));return{x:ft.width*Ae+ft.height*Do,y:ft.width*Do+ft.height*Ae}}function De(ft,mn,ta,Do,Ae,ke){var ge=!!ke.isHorizontal,Ce=!!ke.constrained,Je=ke.angle||0,Re=ke.anchor,Q=Re==="end",ce=Re==="start",Me=ke.leftToRight||0,Le=(Me+1)/2,tt=1-Le,bt=ke.hasB,Ct=ke.r,yi=ke.overhead,Fl=Ae.width,Yl=Ae.height,qp=Math.abs(mn-ft),Fp=Math.abs(Do-ta),Up=qp>2*H&&Fp>2*H?H:0;qp-=2*Up,Fp-=2*Up;var _r=Te(Je);Je==="auto"&&!(Fl<=qp&&Yl<=Fp)&&(Fl>qp||Yl>Fp)&&(!(Fl>Fp||Yl>qp)||Fl<Yl!=qp<Fp)&&(_r+=90);var gs=ye(Ae,_r),dr,Lo;if(Ct&&Ct-yi>H){var Cp=Ue(ft,mn,ta,Do,gs,Ct,yi,ge,bt);dr=Cp.scale,Lo=Cp.pad}else dr=1,Ce&&(dr=Math.min(1,qp/gs.x,Fp/gs.y)),Lo=0;var Hp=Ae.left*tt+Ae.right*Le,e0=(Ae.top+Ae.bottom)/2,t0=(ft+H)*tt+(mn-H)*Le,n0=(ta+Do)/2,y0=0,h0=0;if(ce||Q){var I0=(ge?gs.x:gs.y)/2;Ct&&(Q||bt)&&(Up+=Lo);var Kp=ge?Se(ft,mn):Se(ta,Do);ge?ce?(t0=ft+Kp*Up,y0=-Kp*I0):(t0=mn-Kp*Up,y0=Kp*I0):ce?(n0=ta+Kp*Up,h0=-Kp*I0):(n0=Do-Kp*Up,h0=Kp*I0)}return{textX:Hp,textY:e0,targetX:t0,targetY:n0,anchorX:y0,anchorY:h0,scale:dr,rotate:_r}}function Ue(ft,mn,ta,Do,Ae,ke,ge,Ce,Je){var Re=Math.max(0,Math.abs(mn-ft)-2*H),Q=Math.max(0,Math.abs(Do-ta)-2*H),ce=ke-H,Me=ge?ce-Math.sqrt(ce*ce-(ce-ge)*(ce-ge)):ce,Le=Je?ce*2:Ce?ce-ge:2*Me,tt=Je?ce*2:Ce?2*Me:ce-ge,bt,Ct,yi,Fl,Yl;return Ae.y/Ae.x>=Q/(Re-Le)?Fl=Q/Ae.y:Ae.y/Ae.x<=(Q-tt)/Re?Fl=Re/Ae.x:!Je&&Ce?(bt=Ae.x*Ae.x+Ae.y*Ae.y/4,Ct=-2*Ae.x*(Re-ce)-Ae.y*(Q/2-ce),yi=(Re-ce)*(Re-ce)+(Q/2-ce)*(Q/2-ce)-ce*ce,Fl=(-Ct+Math.sqrt(Ct*Ct-4*bt*yi))/(2*bt)):Je?(bt=(Ae.x*Ae.x+Ae.y*Ae.y)/4,Ct=-Ae.x*(Re/2-ce)-Ae.y*(Q/2-ce),yi=(Re/2-ce)*(Re/2-ce)+(Q/2-ce)*(Q/2-ce)-ce*ce,Fl=(-Ct+Math.sqrt(Ct*Ct-4*bt*yi))/(2*bt)):(bt=Ae.x*Ae.x/4+Ae.y*Ae.y,Ct=-Ae.x*(Re/2-ce)-2*Ae.y*(Q-ce),yi=(Re/2-ce)*(Re/2-ce)+(Q-ce)*(Q-ce)-ce*ce,Fl=(-Ct+Math.sqrt(Ct*Ct-4*bt*yi))/(2*bt)),Fl=Math.min(1,Fl),Ce?Yl=Math.max(0,ce-Math.sqrt(Math.max(0,ce*ce-(ce-(Q-Ae.y*Fl)/2)*(ce-(Q-Ae.y*Fl)/2)))-ge):Yl=Math.max(0,ce-Math.sqrt(Math.max(0,ce*ce-(ce-(Re-Ae.x*Fl)/2)*(ce-(Re-Ae.x*Fl)/2)))-ge),{scale:Fl,pad:Yl}}function he(ft,mn,ta,Do,Ae,ke){var ge=!!ke.isHorizontal,Ce=!!ke.constrained,Je=ke.angle||0,Re=Ae.width,Q=Ae.height,ce=Math.abs(mn-ft),Me=Math.abs(Do-ta),Le;ge?Le=Me>2*H?H:0:Le=ce>2*H?H:0;var tt=1;Ce&&(tt=ge?Math.min(1,Me/Q):Math.min(1,ce/Re));var bt=Te(Je),Ct=ye(Ae,bt),yi=(ge?Ct.x:Ct.y)/2,Fl=(Ae.left+Ae.right)/2,Yl=(Ae.top+Ae.bottom)/2,qp=(ft+mn)/2,Fp=(ta+Do)/2,Up=0,_r=0,gs=ge?Se(mn,ft):Se(ta,Do);return ge?(qp=mn-gs*Le,Up=gs*yi):(Fp=Do+gs*Le,_r=-gs*yi),{textX:Fl,textY:Yl,targetX:qp,targetY:Fp,anchorX:Up,anchorY:_r,scale:tt,rotate:bt}}function Be(ft,mn,ta,Do,Ae){var ke=mn[0].trace,ge=ke.texttemplate,Ce;return ge?Ce=et(ft,mn,ta,Do,Ae):ke.textinfo?Ce=Qe(mn,ta,Do,Ae):Ce=ee.getValue(ke.text,ta),ee.coerceString(W,Ce)}function Ye(ft,mn){var ta=ee.getValue(ft.textposition,mn);return ee.coerceEnumerated(q,ta)}function et(ft,mn,ta,Do,Ae){var ke=mn[0].trace,ge=g.castOption(ke,ta,"texttemplate");if(!ge)return"";var Ce=ke.type==="histogram",Je=ke.type==="waterfall",Re=ke.type==="funnel",Q=ke.orientation==="h",ce,Me,Le,tt;Q?(ce="y",Me=Ae,Le="x",tt=Do):(ce="x",Me=Do,Le="y",tt=Ae);function bt(Up){return P(Me,Me.c2l(Up),!0).text}function Ct(Up){return P(tt,tt.c2l(Up),!0).text}var yi=mn[ta],Fl={};Fl.label=yi.p,Fl.labelLabel=Fl[ce+"Label"]=bt(yi.p);var Yl=g.castOption(ke,yi.i,"text");(Yl===0||Yl)&&(Fl.text=Yl),Fl.value=yi.s,Fl.valueLabel=Fl[Le+"Label"]=Ct(yi.s);var qp={};z(qp,ke,yi.i),(Ce||qp.x===void 0)&&(qp.x=Q?Fl.value:Fl.label),(Ce||qp.y===void 0)&&(qp.y=Q?Fl.label:Fl.value),(Ce||qp.xLabel===void 0)&&(qp.xLabel=Q?Fl.valueLabel:Fl.labelLabel),(Ce||qp.yLabel===void 0)&&(qp.yLabel=Q?Fl.labelLabel:Fl.valueLabel),Je&&(Fl.delta=+yi.rawS||yi.s,Fl.deltaLabel=Ct(Fl.delta),Fl.final=yi.v,Fl.finalLabel=Ct(Fl.final),Fl.initial=Fl.final-Fl.delta,Fl.initialLabel=Ct(Fl.initial)),Re&&(Fl.value=yi.s,Fl.valueLabel=Ct(Fl.value),Fl.percentInitial=yi.begR,Fl.percentInitialLabel=g.formatPercent(yi.begR),Fl.percentPrevious=yi.difR,Fl.percentPreviousLabel=g.formatPercent(yi.difR),Fl.percentTotal=yi.sumR,Fl.percenTotalLabel=g.formatPercent(yi.sumR));var Fp=g.castOption(ke,yi.i,"customdata");return Fp&&(Fl.customdata=Fp),g.texttemplateString(ge,Fl,ft._d3locale,qp,Fl,ke._meta||{})}function Qe(ft,mn,ta,Do){var Ae=ft[0].trace,ke=Ae.orientation==="h",ge=Ae.type==="waterfall",Ce=Ae.type==="funnel";function Je(Fp){var Up=ke?Do:ta;return P(Up,Fp,!0).text}function Re(Fp){var Up=ke?ta:Do;return P(Up,+Fp,!0).text}var Q=Ae.textinfo,ce=ft[mn],Me=Q.split("+"),Le=[],tt,bt=function(Fp){return Me.indexOf(Fp)!==-1};if(bt("label")&&Le.push(Je(ft[mn].p)),bt("text")&&(tt=g.castOption(Ae,ce.i,"text"),(tt===0||tt)&&Le.push(tt)),ge){var Ct=+ce.rawS||ce.s,yi=ce.v,Fl=yi-Ct;bt("initial")&&Le.push(Re(Fl)),bt("delta")&&Le.push(Re(Ct)),bt("final")&&Le.push(Re(yi))}if(Ce){bt("value")&&Le.push(Re(ce.s));var Yl=0;bt("percent initial")&&Yl++,bt("percent previous")&&Yl++,bt("percent total")&&Yl++;var qp=Yl>1;bt("percent initial")&&(tt=g.formatPercent(ce.begR),qp&&(tt+=" of initial"),Le.push(tt)),bt("percent previous")&&(tt=g.formatPercent(ce.difR),qp&&(tt+=" of previous"),Le.push(tt)),bt("percent total")&&(tt=g.formatPercent(ce.sumR),qp&&(tt+=" of total"),Le.push(tt))}return Le.join("<br>")}me.exports={plot:re,toMoveInsideBar:De}}}),Nx=a({"src/traces/bar/hover.js"(pe,me){var M=uy(),v=jp(),g=Oe(),E=o0().fillText,S=Lx().getLineWidth,T=g1().hoverLabelText,C=A().BADNUM;function P(N,j,ee,G,V){var W=p(N,j,ee,G,V);if(W){var q=W.cd,z=q[0].trace,H=q[W.index];return W.color=Y(z,H),v.getComponentMethod("errorbars","hoverInfo")(H,z,W),[W]}}function p(N,j,ee,G,V){var W=N.cd,q=W[0].trace,z=W[0].t,H=G==="closest",Z=q.type==="waterfall",ne=N.maxHoverDistance,te=N.maxSpikeDistance,Se,fe,ve,xe,re,de,be;q.orientation==="h"?(Se=ee,fe=j,ve="y",xe="x",re=Do,de=ft):(Se=j,fe=ee,ve="x",xe="y",de=Do,re=ft);var Te=q[ve+"period"],ye=H||Te;function De(tt){return he(tt,-1)}function Ue(tt){return he(tt,1)}function he(tt,bt){var Ct=tt.w;return tt[ve]+bt*Ct/2}function Be(tt){return tt[ve+"End"]-tt[ve+"Start"]}var Ye=H?De:Te?function(tt){return tt.p-Be(tt)/2}:function(tt){return Math.min(De(tt),tt.p-z.bardelta/2)},et=H?Ue:Te?function(tt){return tt.p+Be(tt)/2}:function(tt){return Math.max(Ue(tt),tt.p+z.bardelta/2)};function Qe(tt,bt,Ct){return V.finiteRange&&(Ct=0),M.inbox(tt-Se,bt-Se,Ct+Math.min(1,Math.abs(bt-tt)/be)-1)}function ft(tt){return Qe(Ye(tt),et(tt),ne)}function mn(tt){return Qe(De(tt),Ue(tt),te)}function ta(tt){var bt=tt[xe];if(Z){var Ct=Math.abs(tt.rawS)||0;fe>0?bt+=Ct:fe<0&&(bt-=Ct)}return bt}function Do(tt){var bt=fe,Ct=tt.b,yi=ta(tt);return M.inbox(Ct-bt,yi-bt,ne+(yi-bt)/(yi-Ct)-1)}function Ae(tt){var bt=fe,Ct=tt.b,yi=ta(tt);return M.inbox(Ct-bt,yi-bt,te+(yi-bt)/(yi-Ct)-1)}var ke=N[ve+"a"],ge=N[xe+"a"];be=Math.abs(ke.r2c(ke.range[1])-ke.r2c(ke.range[0]));function Ce(tt){return(re(tt)+de(tt))/2}var Je=M.getDistanceFunction(G,re,de,Ce);if(M.getClosest(W,Je,N),N.index!==!1&&W[N.index].p!==C){ye||(Ye=function(tt){return Math.min(De(tt),tt.p-z.bargroupwidth/2)},et=function(tt){return Math.max(Ue(tt),tt.p+z.bargroupwidth/2)});var Re=N.index,Q=W[Re],ce=q.base?Q.b+Q.s:Q.s;N[xe+"0"]=N[xe+"1"]=ge.c2p(Q[xe],!0),N[xe+"LabelVal"]=ce;var Me=z.extents[z.extents.round(Q.p)];N[ve+"0"]=ke.c2p(H?Ye(Q):Me[0],!0),N[ve+"1"]=ke.c2p(H?et(Q):Me[1],!0);var Le=Q.orig_p!==void 0;return N[ve+"LabelVal"]=Le?Q.orig_p:Q.p,N.labelLabel=T(ke,N[ve+"LabelVal"],q[ve+"hoverformat"]),N.valueLabel=T(ge,N[xe+"LabelVal"],q[xe+"hoverformat"]),N.baseLabel=T(ge,Q.b,q[xe+"hoverformat"]),N.spikeDistance=(Ae(Q)+mn(Q))/2,N[ve+"Spike"]=ke.c2p(Q.p,!0),E(Q,q,N),N.hovertemplate=q.hovertemplate,N}}function Y(N,j){var ee=j.mcc||N.marker.color,G=j.mlcc||N.marker.line.color,V=S(N,j);if(g.opacity(ee))return ee;if(g.opacity(G)&&V)return G}me.exports={hoverPoints:P,hoverOnBars:p,getTraceColor:Y}}}),e5=a({"src/traces/bar/event_data.js"(pe,me){me.exports=function(v,g,E){return v.x="xVal"in g?g.xVal:g.x,v.y="yVal"in g?g.yVal:g.y,g.xa&&(v.xaxis=g.xa),g.ya&&(v.yaxis=g.ya),E.orientation==="h"?(v.label=v.y,v.value=v.x):(v.label=v.x,v.value=v.y),v}}}),t5=a({"src/traces/bar/select.js"(pe,me){me.exports=function(g,E){var S=g.cd,T=g.xaxis,C=g.yaxis,P=S[0].trace,p=P.type==="funnel",Y=P.orientation==="h",N=[],j;if(E===!1)for(j=0;j<S.length;j++)S[j].selected=0;else for(j=0;j<S.length;j++){var ee=S[j],G="ct"in ee?ee.ct:M(ee,T,C,Y,p);E.contains(G,!1,j,g)?(N.push({pointNumber:j,x:T.c2d(ee.x),y:C.c2d(ee.y)}),ee.selected=1):ee.selected=0}return N};function M(v,g,E,S,T){var C=g.c2p(S?v.s0:v.p0,!0),P=g.c2p(S?v.s1:v.p1,!0),p=E.c2p(S?v.p0:v.s0,!0),Y=E.c2p(S?v.p1:v.s1,!0);return T?[(C+P)/2,(p+Y)/2]:S?[P,(p+Y)/2]:[(C+P)/2,Y]}}}),P2=a({"src/traces/bar/index.js"(pe,me){me.exports={attributes:Nv(),layoutAttributes:ug(),supplyDefaults:o_().supplyDefaults,crossTraceDefaults:o_().crossTraceDefaults,supplyLayoutDefaults:R_(),calc:L_(),crossTraceCalc:a2().crossTraceCalc,colorbar:_x(),arraysToCalcdata:Ug(),plot:kx().plot,style:Dx().style,styleOnSelect:Dx().styleOnSelect,hoverPoints:Nx().hoverPoints,eventData:e5(),selectPoints:t5(),moduleType:"trace",name:"bar",basePlotModule:T_(),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{}}}}),mb=a({"lib/bar.js"(pe,me){me.exports=P2()}}),t3=a({"src/traces/pie/attributes.js"(pe,me){var M=He(),v=S0().attributes,g=B(),E=ue(),S=kl().hovertemplateAttrs,T=kl().texttemplateAttrs,C=k().extendFlat,P=Bp().pattern,p=g({editType:"plot",arrayOk:!0,colorEditType:"plot"});me.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:E.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},pattern:P,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:C({},M.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:S({},{keys:["label","color","value","percent","text"]}),texttemplate:T({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:C({},p,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:C({},p,{}),outsidetextfont:C({},p,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:C({},p,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:v({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"}}}}),r3=a({"src/traces/pie/defaults.js"(pe,me){var M=w(),v=o0(),g=t3(),E=S0().defaults,S=o_().handleText,T=o0().coercePattern;function C(Y,N){var j=v.isArrayOrTypedArray(Y),ee=v.isArrayOrTypedArray(N),G=Math.min(j?Y.length:1/0,ee?N.length:1/0);if(isFinite(G)||(G=0),G&&ee){for(var V,W=0;W<G;W++){var q=N[W];if(M(q)&&q>0){V=!0;break}}V||(G=0)}return{hasLabels:j,hasValues:ee,len:G}}function P(Y,N,j,ee,G){var V=ee("marker.line.width");V&&ee("marker.line.color",G?void 0:j.paper_bgcolor);var W=ee("marker.colors");T(ee,"marker.pattern",W),Y.marker&&!N.marker.pattern.fgcolor&&(N.marker.pattern.fgcolor=Y.marker.colors),N.marker.pattern.bgcolor||(N.marker.pattern.bgcolor=j.paper_bgcolor)}function p(Y,N,j,ee){function G(de,be){return v.coerce(Y,N,g,de,be)}var V=G("labels"),W=G("values"),q=C(V,W),z=q.len;if(N._hasLabels=q.hasLabels,N._hasValues=q.hasValues,!N._hasLabels&&N._hasValues&&(G("label0"),G("dlabel")),!z){N.visible=!1;return}N._length=z,P(Y,N,ee,G,!0),G("scalegroup");var H=G("text"),Z=G("texttemplate"),ne;if(Z||(ne=G("textinfo",v.isArrayOrTypedArray(H)?"text+percent":"percent")),G("hovertext"),G("hovertemplate"),Z||ne&&ne!=="none"){var te=G("textposition");S(Y,N,ee,G,te,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1});var Se=Array.isArray(te)||te==="auto",fe=Se||te==="outside";fe&&G("automargin"),(te==="inside"||te==="auto"||Array.isArray(te))&&G("insidetextorientation")}else ne==="none"&&G("textposition","none");E(N,ee,G);var ve=G("hole"),xe=G("title.text");if(xe){var re=G("title.position",ve?"middle center":"top center");!ve&&re==="middle center"&&(N.title.position="top center"),v.coerceFont(G,"title.font",ee.font)}G("sort"),G("direction"),G("rotation"),G("pull")}me.exports={handleLabelsAndValues:C,handleMarkerDefaults:P,supplyDefaults:p}}}),vb=a({"src/traces/pie/layout_attributes.js"(pe,me){me.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}}}),qg=a({"src/traces/pie/layout_defaults.js"(pe,me){var M=o0(),v=vb();me.exports=function(E,S){function T(C,P){return M.coerce(E,S,v,C,P)}T("hiddenlabels"),T("piecolorway",S.colorway),T("extendpiecolors")}}}),Wg=a({"src/traces/pie/calc.js"(pe,me){var M=w(),v=b(),g=Oe(),E={};function S(p,Y){var N=[],j=p._fullLayout,ee=j.hiddenlabels||[],G=Y.labels,V=Y.marker.colors||[],W=Y.values,q=Y._length,z=Y._hasValues&&q,H,Z;if(Y.dlabel)for(G=new Array(q),H=0;H<q;H++)G[H]=String(Y.label0+H*Y.dlabel);var ne={},te=T(j["_"+Y.type+"colormap"]),Se=0,fe=!1;for(H=0;H<q;H++){var ve,xe,re;if(z){if(ve=W[H],!M(ve))continue;ve=+ve}else ve=1;xe=G[H],(xe===void 0||xe==="")&&(xe=H),xe=String(xe);var de=ne[xe];de===void 0?(ne[xe]=N.length,re=ee.indexOf(xe)!==-1,re||(Se+=ve),N.push({v:ve,label:xe,color:te(V[H],xe),i:H,pts:[H],hidden:re})):(fe=!0,Z=N[de],Z.v+=ve,Z.pts.push(H),Z.hidden||(Se+=ve),Z.color===!1&&V[H]&&(Z.color=te(V[H],xe)))}N=N.filter(function(Te){return Te.v>=0});var be=Y.type==="funnelarea"?fe:Y.sort;return be&&N.sort(function(Te,ye){return ye.v-Te.v}),N[0]&&(N[0].vTotal=Se),N}function T(p){return function(N,j){return!N||(N=v(N),!N.isValid())?!1:(N=g.addOpacity(N,N.getAlpha()),p[j]||(p[j]=N),N)}}function C(p,Y){var N=(Y||{}).type;N||(N="pie");var j=p._fullLayout,ee=p.calcdata,G=j[N+"colorway"],V=j["_"+N+"colormap"];j["extend"+N+"colors"]&&(G=P(G,E));for(var W=0,q=0;q<ee.length;q++){var z=ee[q],H=z[0].trace.type;if(H===N)for(var Z=0;Z<z.length;Z++){var ne=z[Z];ne.color===!1&&(V[ne.label]?ne.color=V[ne.label]:(V[ne.label]=ne.color=G[W%G.length],W++))}}}function P(p,Y){var N,j=JSON.stringify(p),ee=Y[j];if(!ee){for(ee=p.slice(),N=0;N<p.length;N++)ee.push(v(p[N]).lighten(20).toHexString());for(N=0;N<p.length;N++)ee.push(v(p[N]).darken(20).toHexString());Y[j]=ee}return ee}me.exports={calc:S,crossTraceCalc:C,makePullColorFn:T,generateExtendedColors:P}}}),k_=a({"src/traces/pie/event_data.js"(pe,me){var M=jg().appendArrayMultiPointValues;me.exports=function(g,E){var S={curveNumber:E.index,pointNumbers:g.pts,data:E._input,fullData:E,label:g.label,color:g.color,value:g.v,percent:g.percent,text:g.text,bbox:g.bbox,v:g.v};return g.pts.length===1&&(S.pointNumber=S.i=g.pts[0]),M(S,E,g.pts),E.type==="funnelarea"&&(delete S.v,delete S.i),S}}}),a3=a({"src/traces/pie/plot.js"(pe,me){var M=f(),v=p1(),g=uy(),E=Oe(),S=t1(),T=o0(),C=T.strScale,P=T.strTranslate,p=v1(),Y=D_(),N=Y.recordMinTextSize,j=Y.clearMinTextSize,ee=bv().TEXTPAD,G=d_(),V=k_(),W=o0().isValidTextValue;function q(ke,ge){var Ce=ke._context.staticPlot,Je=ke._fullLayout,Re=Je._size;j("pie",Je),te(ge,ke),Qe(ge,Re);var Q=T.makeTraceGroups(Je._pielayer,ge,"trace").each(function(ce){var Me=M.select(this),Le=ce[0],tt=Le.trace;mn(ce),Me.attr("stroke-linejoin","round"),Me.each(function(){var bt=M.select(this).selectAll("g.slice").data(ce);bt.enter().append("g").classed("slice",!0),bt.exit().remove();var Ct=[[[],[]],[[],[]]],yi=!1;bt.each(function(dr,Lo){if(dr.hidden){M.select(this).selectAll("path,g").remove();return}dr.pointNumber=dr.i,dr.curveNumber=tt.index,Ct[dr.pxmid[1]<0?0:1][dr.pxmid[0]<0?0:1].push(dr);var Cp=Le.cx,Hp=Le.cy,e0=M.select(this),t0=e0.selectAll("path.surface").data([dr]);if(t0.enter().append("path").classed("surface",!0).style({"pointer-events":Ce?"none":"all"}),e0.call(H,ke,ce),tt.pull){var n0=+G.castOption(tt.pull,dr.pts)||0;n0>0&&(Cp+=n0*dr.pxmid[0],Hp+=n0*dr.pxmid[1])}dr.cxFinal=Cp,dr.cyFinal=Hp;function y0(J0,vs,jl,zl){var Ve=zl*(vs[0]-J0[0]),pn=zl*(vs[1]-J0[1]);return"a"+zl*Le.r+","+zl*Le.r+" 0 "+dr.largeArc+(jl?" 1 ":" 0 ")+Ve+","+pn}var h0=tt.hole;if(dr.v===Le.vTotal){var I0="M"+(Cp+dr.px0[0])+","+(Hp+dr.px0[1])+y0(dr.px0,dr.pxmid,!0,1)+y0(dr.pxmid,dr.px0,!0,1)+"Z";h0?t0.attr("d","M"+(Cp+h0*dr.px0[0])+","+(Hp+h0*dr.px0[1])+y0(dr.px0,dr.pxmid,!1,h0)+y0(dr.pxmid,dr.px0,!1,h0)+"Z"+I0):t0.attr("d",I0)}else{var Kp=y0(dr.px0,dr.px1,!0,1);if(h0){var B0=1-h0;t0.attr("d","M"+(Cp+h0*dr.px1[0])+","+(Hp+h0*dr.px1[1])+y0(dr.px1,dr.px0,!1,h0)+"l"+B0*dr.px0[0]+","+B0*dr.px0[1]+Kp+"Z")}else t0.attr("d","M"+Cp+","+Hp+"l"+dr.px0[0]+","+dr.px0[1]+Kp+"Z")}Do(ke,dr,Le);var em=G.castOption(tt.textposition,dr.pts),k0=e0.selectAll("g.slicetext").data(dr.text&&em!=="none"?[0]:[]);k0.enter().append("g").classed("slicetext",!0),k0.exit().remove(),k0.each(function(){var J0=T.ensureSingle(M.select(this),"text","",function(Tp){Tp.attr("data-notex",1)}),vs=T.ensureUniformFontSize(ke,em==="outside"?Z(tt,dr,Je.font):ne(tt,dr,Je.font));J0.text(dr.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(S.font,vs).call(p.convertToTspans,ke);var jl=S.bBox(J0.node()),zl;if(em==="outside")zl=ye(jl,dr);else if(zl=Se(jl,dr,Le),em==="auto"&&zl.scale<1){var Ve=T.ensureUniformFontSize(ke,tt.outsidetextfont);J0.call(S.font,Ve),jl=S.bBox(J0.node()),zl=ye(jl,dr)}var pn=zl.textPosAngle,ci=pn===void 0?dr.pxmid:ta(Le.r,pn);if(zl.targetX=Cp+ci[0]*zl.rCenter+(zl.x||0),zl.targetY=Hp+ci[1]*zl.rCenter+(zl.y||0),Ae(zl,jl),zl.outside){var _n=zl.targetY;dr.yLabelMin=_n-jl.height/2,dr.yLabelMid=_n,dr.yLabelMax=_n+jl.height/2,dr.labelExtraX=0,dr.labelExtraY=0,yi=!0}zl.fontSize=vs.size,N(tt.type,zl,Je),ce[Lo].transform=zl,T.setTransormAndDisplay(J0,zl)})});var Fl=M.select(this).selectAll("g.titletext").data(tt.title.text?[0]:[]);if(Fl.enter().append("g").classed("titletext",!0),Fl.exit().remove(),Fl.each(function(){var dr=T.ensureSingle(M.select(this),"text","",function(Hp){Hp.attr("data-notex",1)}),Lo=tt.title.text;tt._meta&&(Lo=T.templateString(Lo,tt._meta)),dr.text(Lo).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(S.font,tt.title.font).call(p.convertToTspans,ke);var Cp;tt.title.position==="middle center"?Cp=De(Le):Cp=Ue(Le,Re),dr.attr("transform",P(Cp.x,Cp.y)+C(Math.min(1,Cp.scale))+P(Cp.tx,Cp.ty))}),yi&&et(Ct,tt),z(bt,tt),yi&&tt.automargin){var Yl=S.bBox(Me.node()),qp=tt.domain,Fp=Re.w*(qp.x[1]-qp.x[0]),Up=Re.h*(qp.y[1]-qp.y[0]),_r=(.5*Fp-Le.r)/Re.w,gs=(.5*Up-Le.r)/Re.h;v.autoMargin(ke,"pie."+tt.uid+".automargin",{xl:qp.x[0]-_r,xr:qp.x[1]+_r,yb:qp.y[0]-gs,yt:qp.y[1]+gs,l:Math.max(Le.cx-Le.r-Yl.left,0),r:Math.max(Yl.right-(Le.cx+Le.r),0),b:Math.max(Yl.bottom-(Le.cy+Le.r),0),t:Math.max(Le.cy-Le.r-Yl.top,0),pad:5})}})});setTimeout(function(){Q.selectAll("tspan").each(function(){var ce=M.select(this);ce.attr("dy")&&ce.attr("dy",ce.attr("dy"))})},0)}function z(ke,ge){ke.each(function(Ce){var Je=M.select(this);if(!Ce.labelExtraX&&!Ce.labelExtraY){Je.select("path.textline").remove();return}var Re=Je.select("g.slicetext text");Ce.transform.targetX+=Ce.labelExtraX,Ce.transform.targetY+=Ce.labelExtraY,T.setTransormAndDisplay(Re,Ce.transform);var Q=Ce.cxFinal+Ce.pxmid[0],ce=Ce.cyFinal+Ce.pxmid[1],Me="M"+Q+","+ce,Le=(Ce.yLabelMax-Ce.yLabelMin)*(Ce.pxmid[0]<0?-1:1)/4;if(Ce.labelExtraX){var tt=Ce.labelExtraX*Ce.pxmid[1]/Ce.pxmid[0],bt=Ce.yLabelMid+Ce.labelExtraY-(Ce.cyFinal+Ce.pxmid[1]);Math.abs(tt)>Math.abs(bt)?Me+="l"+bt*Ce.pxmid[0]/Ce.pxmid[1]+","+bt+"H"+(Q+Ce.labelExtraX+Le):Me+="l"+Ce.labelExtraX+","+tt+"v"+(bt-tt)+"h"+Le}else Me+="V"+(Ce.yLabelMid+Ce.labelExtraY)+"h"+Le;T.ensureSingle(Je,"path","textline").call(E.stroke,ge.outsidetextfont.color).attr({"stroke-width":Math.min(2,ge.outsidetextfont.size/8),d:Me,fill:"none"})})}function H(ke,ge,Ce){var Je=Ce[0],Re=Je.cx,Q=Je.cy,ce=Je.trace,Me=ce.type==="funnelarea";"_hasHoverLabel"in ce||(ce._hasHoverLabel=!1),"_hasHoverEvent"in ce||(ce._hasHoverEvent=!1),ke.on("mouseover",function(Le){var tt=ge._fullLayout,bt=ge._fullData[ce.index];if(!(ge._dragging||tt.hovermode===!1)){var Ct=bt.hoverinfo;if(Array.isArray(Ct)&&(Ct=g.castHoverinfo({hoverinfo:[G.castOption(Ct,Le.pts)],_module:ce._module},tt,0)),Ct==="all"&&(Ct="label+text+value+percent+name"),bt.hovertemplate||Ct!=="none"&&Ct!=="skip"&&Ct){var yi=Le.rInscribed||0,Fl=Re+Le.pxmid[0]*(1-yi),Yl=Q+Le.pxmid[1]*(1-yi),qp=tt.separators,Fp=[];if(Ct&&Ct.indexOf("label")!==-1&&Fp.push(Le.label),Le.text=G.castOption(bt.hovertext||bt.text,Le.pts),Ct&&Ct.indexOf("text")!==-1){var Up=Le.text;T.isValidTextValue(Up)&&Fp.push(Up)}Le.value=Le.v,Le.valueLabel=G.formatPieValue(Le.v,qp),Ct&&Ct.indexOf("value")!==-1&&Fp.push(Le.valueLabel),Le.percent=Le.v/Je.vTotal,Le.percentLabel=G.formatPiePercent(Le.percent,qp),Ct&&Ct.indexOf("percent")!==-1&&Fp.push(Le.percentLabel);var _r=bt.hoverlabel,gs=_r.font,dr=[];g.loneHover({trace:ce,x0:Fl-yi*Je.r,x1:Fl+yi*Je.r,y:Yl,_x0:Me?Re+Le.TL[0]:Fl-yi*Je.r,_x1:Me?Re+Le.TR[0]:Fl+yi*Je.r,_y0:Me?Q+Le.TL[1]:Yl-yi*Je.r,_y1:Me?Q+Le.BL[1]:Yl+yi*Je.r,text:Fp.join("<br>"),name:bt.hovertemplate||Ct.indexOf("name")!==-1?bt.name:void 0,idealAlign:Le.pxmid[0]<0?"left":"right",color:G.castOption(_r.bgcolor,Le.pts)||Le.color,borderColor:G.castOption(_r.bordercolor,Le.pts),fontFamily:G.castOption(gs.family,Le.pts),fontSize:G.castOption(gs.size,Le.pts),fontColor:G.castOption(gs.color,Le.pts),nameLength:G.castOption(_r.namelength,Le.pts),textAlign:G.castOption(_r.align,Le.pts),hovertemplate:G.castOption(bt.hovertemplate,Le.pts),hovertemplateLabels:Le,eventData:[V(Le,bt)]},{container:tt._hoverlayer.node(),outerContainer:tt._paper.node(),gd:ge,inOut_bbox:dr}),Le.bbox=dr[0],ce._hasHoverLabel=!0}ce._hasHoverEvent=!0,ge.emit("plotly_hover",{points:[V(Le,bt)],event:M.event})}}),ke.on("mouseout",function(Le){var tt=ge._fullLayout,bt=ge._fullData[ce.index],Ct=M.select(this).datum();ce._hasHoverEvent&&(Le.originalEvent=M.event,ge.emit("plotly_unhover",{points:[V(Ct,bt)],event:M.event}),ce._hasHoverEvent=!1),ce._hasHoverLabel&&(g.loneUnhover(tt._hoverlayer.node()),ce._hasHoverLabel=!1)}),ke.on("click",function(Le){var tt=ge._fullLayout,bt=ge._fullData[ce.index];ge._dragging||tt.hovermode===!1||(ge._hoverdata=[V(Le,bt)],g.click(ge,M.event))})}function Z(ke,ge,Ce){var Je=G.castOption(ke.outsidetextfont.color,ge.pts)||G.castOption(ke.textfont.color,ge.pts)||Ce.color,Re=G.castOption(ke.outsidetextfont.family,ge.pts)||G.castOption(ke.textfont.family,ge.pts)||Ce.family,Q=G.castOption(ke.outsidetextfont.size,ge.pts)||G.castOption(ke.textfont.size,ge.pts)||Ce.size,ce=G.castOption(ke.outsidetextfont.weight,ge.pts)||G.castOption(ke.textfont.weight,ge.pts)||Ce.weight,Me=G.castOption(ke.outsidetextfont.style,ge.pts)||G.castOption(ke.textfont.style,ge.pts)||Ce.style,Le=G.castOption(ke.outsidetextfont.variant,ge.pts)||G.castOption(ke.textfont.variant,ge.pts)||Ce.variant,tt=G.castOption(ke.outsidetextfont.textcase,ge.pts)||G.castOption(ke.textfont.textcase,ge.pts)||Ce.textcase,bt=G.castOption(ke.outsidetextfont.lineposition,ge.pts)||G.castOption(ke.textfont.lineposition,ge.pts)||Ce.lineposition,Ct=G.castOption(ke.outsidetextfont.shadow,ge.pts)||G.castOption(ke.textfont.shadow,ge.pts)||Ce.shadow;return{color:Je,family:Re,size:Q,weight:ce,style:Me,variant:Le,textcase:tt,lineposition:bt,shadow:Ct}}function ne(ke,ge,Ce){var Je=G.castOption(ke.insidetextfont.color,ge.pts);!Je&&ke._input.textfont&&(Je=G.castOption(ke._input.textfont.color,ge.pts));var Re=G.castOption(ke.insidetextfont.family,ge.pts)||G.castOption(ke.textfont.family,ge.pts)||Ce.family,Q=G.castOption(ke.insidetextfont.size,ge.pts)||G.castOption(ke.textfont.size,ge.pts)||Ce.size,ce=G.castOption(ke.insidetextfont.weight,ge.pts)||G.castOption(ke.textfont.weight,ge.pts)||Ce.weight,Me=G.castOption(ke.insidetextfont.style,ge.pts)||G.castOption(ke.textfont.style,ge.pts)||Ce.style,Le=G.castOption(ke.insidetextfont.variant,ge.pts)||G.castOption(ke.textfont.variant,ge.pts)||Ce.variant,tt=G.castOption(ke.insidetextfont.textcase,ge.pts)||G.castOption(ke.textfont.textcase,ge.pts)||Ce.textcase,bt=G.castOption(ke.insidetextfont.lineposition,ge.pts)||G.castOption(ke.textfont.lineposition,ge.pts)||Ce.lineposition,Ct=G.castOption(ke.insidetextfont.shadow,ge.pts)||G.castOption(ke.textfont.shadow,ge.pts)||Ce.shadow;return{color:Je||E.contrast(ge.color),family:Re,size:Q,weight:ce,style:Me,variant:Le,textcase:tt,lineposition:bt,shadow:Ct}}function te(ke,ge){for(var Ce,Je,Re=0;Re<ke.length;Re++)if(Ce=ke[Re][0],Je=Ce.trace,Je.title.text){var Q=Je.title.text;Je._meta&&(Q=T.templateString(Q,Je._meta));var ce=S.tester.append("text").attr("data-notex",1).text(Q).call(S.font,Je.title.font).call(p.convertToTspans,ge),Me=S.bBox(ce.node(),!0);Ce.titleBox={width:Me.width,height:Me.height},ce.remove()}}function Se(ke,ge,Ce){var Je=Ce.r||ge.rpx1,Re=ge.rInscribed,Q=ge.startangle===ge.stopangle;if(Q)return{rCenter:1-Re,scale:0,rotate:0,textPosAngle:0};var ce=ge.ring,Me=ce===1&&Math.abs(ge.startangle-ge.stopangle)===Math.PI*2,Le=ge.halfangle,tt=ge.midangle,bt=Ce.trace.insidetextorientation,Ct=bt==="horizontal",yi=bt==="tangential",Fl=bt==="radial",Yl=bt==="auto",qp=[],Fp;if(!Yl){var Up=function(e0,t0){if(fe(ge,e0)){var n0=Math.abs(e0-ge.startangle),y0=Math.abs(e0-ge.stopangle),h0=n0<y0?n0:y0;t0==="tan"?Fp=xe(ke,Je,ce,h0,0):Fp=ve(ke,Je,ce,h0,Math.PI/2),Fp.textPosAngle=e0,qp.push(Fp)}},_r;if(Ct||yi){for(_r=4;_r>=-4;_r-=2)Up(Math.PI*_r,"tan");for(_r=4;_r>=-4;_r-=2)Up(Math.PI*(_r+1),"tan")}if(Ct||Fl){for(_r=4;_r>=-4;_r-=2)Up(Math.PI*(_r+1.5),"rad");for(_r=4;_r>=-4;_r-=2)Up(Math.PI*(_r+.5),"rad")}}if(Me||Yl||Ct){var gs=Math.sqrt(ke.width*ke.width+ke.height*ke.height);if(Fp={scale:Re*Je*2/gs,rCenter:1-Re,rotate:0},Fp.textPosAngle=(ge.startangle+ge.stopangle)/2,Fp.scale>=1)return Fp;qp.push(Fp)}(Yl||Fl)&&(Fp=ve(ke,Je,ce,Le,tt),Fp.textPosAngle=(ge.startangle+ge.stopangle)/2,qp.push(Fp)),(Yl||yi)&&(Fp=xe(ke,Je,ce,Le,tt),Fp.textPosAngle=(ge.startangle+ge.stopangle)/2,qp.push(Fp));for(var dr=0,Lo=0,Cp=0;Cp<qp.length;Cp++){var Hp=qp[Cp].scale;if(Lo<Hp&&(Lo=Hp,dr=Cp),!Yl&&Lo>=1)break}return qp[dr]}function fe(ke,ge){var Ce=ke.startangle,Je=ke.stopangle;return Ce>ge&&ge>Je||Ce<ge&&ge<Je}function ve(ke,ge,Ce,Je,Re){ge=Math.max(0,ge-2*ee);var Q=ke.width/ke.height,ce=be(Q,Je,ge,Ce);return{scale:ce*2/ke.height,rCenter:re(Q,ce/ge),rotate:de(Re)}}function xe(ke,ge,Ce,Je,Re){ge=Math.max(0,ge-2*ee);var Q=ke.height/ke.width,ce=be(Q,Je,ge,Ce);return{scale:ce*2/ke.width,rCenter:re(Q,ce/ge),rotate:de(Re+Math.PI/2)}}function re(ke,ge){return Math.cos(ge)-ke*ge}function de(ke){return(180/Math.PI*ke+720)%180-90}function be(ke,ge,Ce,Je){var Re=ke+1/(2*Math.tan(ge));return Ce*Math.min(1/(Math.sqrt(Re*Re+.5)+Re),Je/(Math.sqrt(ke*ke+Je/2)+ke))}function Te(ke,ge){return ke.v===ge.vTotal&&!ge.trace.hole?1:Math.min(1/(1+1/Math.sin(ke.halfangle)),ke.ring/2)}function ye(ke,ge){var Ce=ge.pxmid[0],Je=ge.pxmid[1],Re=ke.width/2,Q=ke.height/2;return Ce<0&&(Re*=-1),Je<0&&(Q*=-1),{scale:1,rCenter:1,rotate:0,x:Re+Math.abs(Q)*(Re>0?1:-1)/2,y:Q/(1+Ce*Ce/(Je*Je)),outside:!0}}function De(ke){var ge=Math.sqrt(ke.titleBox.width*ke.titleBox.width+ke.titleBox.height*ke.titleBox.height);return{x:ke.cx,y:ke.cy,scale:ke.trace.hole*ke.r*2/ge,tx:0,ty:-ke.titleBox.height/2+ke.trace.title.font.size}}function Ue(ke,ge){var Ce=1,Je=1,Re,Q=ke.trace,ce={x:ke.cx,y:ke.cy},Me={tx:0,ty:0};Me.ty+=Q.title.font.size,Re=Ye(Q),Q.title.position.indexOf("top")!==-1?(ce.y-=(1+Re)*ke.r,Me.ty-=ke.titleBox.height):Q.title.position.indexOf("bottom")!==-1&&(ce.y+=(1+Re)*ke.r);var Le=he(ke.r,ke.trace.aspectratio),tt=ge.w*(Q.domain.x[1]-Q.domain.x[0])/2;return Q.title.position.indexOf("left")!==-1?(tt=tt+Le,ce.x-=(1+Re)*Le,Me.tx+=ke.titleBox.width/2):Q.title.position.indexOf("center")!==-1?tt*=2:Q.title.position.indexOf("right")!==-1&&(tt=tt+Le,ce.x+=(1+Re)*Le,Me.tx-=ke.titleBox.width/2),Ce=tt/ke.titleBox.width,Je=Be(ke,ge)/ke.titleBox.height,{x:ce.x,y:ce.y,scale:Math.min(Ce,Je),tx:Me.tx,ty:Me.ty}}function he(ke,ge){return ke/(ge===void 0?1:ge)}function Be(ke,ge){var Ce=ke.trace,Je=ge.h*(Ce.domain.y[1]-Ce.domain.y[0]);return Math.min(ke.titleBox.height,Je/2)}function Ye(ke){var ge=ke.pull;if(!ge)return 0;var Ce;if(T.isArrayOrTypedArray(ge))for(ge=0,Ce=0;Ce<ke.pull.length;Ce++)ke.pull[Ce]>ge&&(ge=ke.pull[Ce]);return ge}function et(ke,ge){var Ce,Je,Re,Q,ce,Me,Le,tt,bt,Ct,yi,Fl,Yl;function qp(gs,dr){return gs.pxmid[1]-dr.pxmid[1]}function Fp(gs,dr){return dr.pxmid[1]-gs.pxmid[1]}function Up(gs,dr){dr||(dr={});var Lo=dr.labelExtraY+(Je?dr.yLabelMax:dr.yLabelMin),Cp=Je?gs.yLabelMin:gs.yLabelMax,Hp=Je?gs.yLabelMax:gs.yLabelMin,e0=gs.cyFinal+ce(gs.px0[1],gs.px1[1]),t0=Lo-Cp,n0,y0,h0,I0,Kp,B0;if(t0*Le>0&&(gs.labelExtraY=t0),!!T.isArrayOrTypedArray(ge.pull))for(y0=0;y0<Ct.length;y0++)h0=Ct[y0],!(h0===gs||(G.castOption(ge.pull,gs.pts)||0)>=(G.castOption(ge.pull,h0.pts)||0))&&((gs.pxmid[1]-h0.pxmid[1])*Le>0?(I0=h0.cyFinal+ce(h0.px0[1],h0.px1[1]),t0=I0-Cp-gs.labelExtraY,t0*Le>0&&(gs.labelExtraY+=t0)):(Hp+gs.labelExtraY-e0)*Le>0&&(n0=3*Me*Math.abs(y0-Ct.indexOf(gs)),Kp=h0.cxFinal+Q(h0.px0[0],h0.px1[0]),B0=Kp+n0-(gs.cxFinal+gs.pxmid[0])-gs.labelExtraX,B0*Me>0&&(gs.labelExtraX+=B0)))}for(Je=0;Je<2;Je++)for(Re=Je?qp:Fp,ce=Je?Math.max:Math.min,Le=Je?1:-1,Ce=0;Ce<2;Ce++){for(Q=Ce?Math.max:Math.min,Me=Ce?1:-1,tt=ke[Je][Ce],tt.sort(Re),bt=ke[1-Je][Ce],Ct=bt.concat(tt),Fl=[],yi=0;yi<tt.length;yi++)tt[yi].yLabelMid!==void 0&&Fl.push(tt[yi]);for(Yl=!1,yi=0;Je&&yi<bt.length;yi++)if(bt[yi].yLabelMid!==void 0){Yl=bt[yi];break}for(yi=0;yi<Fl.length;yi++){var _r=yi&&Fl[yi-1];Yl&&!yi&&(_r=Yl),Up(Fl[yi],_r)}}}function Qe(ke,ge){for(var Ce=[],Je=0;Je<ke.length;Je++){var Re=ke[Je][0],Q=Re.trace,ce=Q.domain,Me=ge.w*(ce.x[1]-ce.x[0]),Le=ge.h*(ce.y[1]-ce.y[0]);Q.title.text&&Q.title.position!=="middle center"&&(Le-=Be(Re,ge));var tt=Me/2,bt=Le/2;Q.type==="funnelarea"&&!Q.scalegroup&&(bt/=Q.aspectratio),Re.r=Math.min(tt,bt)/(1+Ye(Q)),Re.cx=ge.l+ge.w*(Q.domain.x[1]+Q.domain.x[0])/2,Re.cy=ge.t+ge.h*(1-Q.domain.y[0])-Le/2,Q.title.text&&Q.title.position.indexOf("bottom")!==-1&&(Re.cy-=Be(Re,ge)),Q.scalegroup&&Ce.indexOf(Q.scalegroup)===-1&&Ce.push(Q.scalegroup)}ft(ke,Ce)}function ft(ke,ge){for(var Ce,Je,Re,Q=0;Q<ge.length;Q++){var ce=1/0,Me=ge[Q];for(Je=0;Je<ke.length;Je++)if(Ce=ke[Je][0],Re=Ce.trace,Re.scalegroup===Me){var Le;if(Re.type==="pie")Le=Ce.r*Ce.r;else if(Re.type==="funnelarea"){var tt,bt;Re.aspectratio>1?(tt=Ce.r,bt=tt/Re.aspectratio):(bt=Ce.r,tt=bt*Re.aspectratio),tt*=(1+Re.baseratio)/2,Le=tt*bt}ce=Math.min(ce,Le/Ce.vTotal)}for(Je=0;Je<ke.length;Je++)if(Ce=ke[Je][0],Re=Ce.trace,Re.scalegroup===Me){var Ct=ce*Ce.vTotal;Re.type==="funnelarea"&&(Ct/=(1+Re.baseratio)/2,Ct/=Re.aspectratio),Ce.r=Math.sqrt(Ct)}}}function mn(ke){var ge=ke[0],Ce=ge.r,Je=ge.trace,Re=G.getRotationAngle(Je.rotation),Q=2*Math.PI/ge.vTotal,ce="px0",Me="px1",Le,tt,bt;if(Je.direction==="counterclockwise"){for(Le=0;Le<ke.length&&ke[Le].hidden;Le++);if(Le===ke.length)return;Re+=Q*ke[Le].v,Q*=-1,ce="px1",Me="px0"}for(bt=ta(Ce,Re),Le=0;Le<ke.length;Le++)tt=ke[Le],!tt.hidden&&(tt[ce]=bt,tt.startangle=Re,Re+=Q*tt.v/2,tt.pxmid=ta(Ce,Re),tt.midangle=Re,Re+=Q*tt.v/2,bt=ta(Ce,Re),tt.stopangle=Re,tt[Me]=bt,tt.largeArc=tt.v>ge.vTotal/2?1:0,tt.halfangle=Math.PI*Math.min(tt.v/ge.vTotal,.5),tt.ring=1-Je.hole,tt.rInscribed=Te(tt,ge))}function ta(ke,ge){return[ke*Math.sin(ge),-ke*Math.cos(ge)]}function Do(ke,ge,Ce){var Je=ke._fullLayout,Re=Ce.trace,Q=Re.texttemplate,ce=Re.textinfo;if(!Q&&ce&&ce!=="none"){var Me=ce.split("+"),Le=function(dr){return Me.indexOf(dr)!==-1},tt=Le("label"),bt=Le("text"),Ct=Le("value"),yi=Le("percent"),Fl=Je.separators,Yl;if(Yl=tt?[ge.label]:[],bt){var qp=G.getFirstFilled(Re.text,ge.pts);W(qp)&&Yl.push(qp)}Ct&&Yl.push(G.formatPieValue(ge.v,Fl)),yi&&Yl.push(G.formatPiePercent(ge.v/Ce.vTotal,Fl)),ge.text=Yl.join("<br>")}function Fp(dr){return{label:dr.label,value:dr.v,valueLabel:G.formatPieValue(dr.v,Je.separators),percent:dr.v/Ce.vTotal,percentLabel:G.formatPiePercent(dr.v/Ce.vTotal,Je.separators),color:dr.color,text:dr.text,customdata:T.castOption(Re,dr.i,"customdata")}}if(Q){var Up=T.castOption(Re,ge.i,"texttemplate");if(!Up)ge.text="";else{var _r=Fp(ge),gs=G.getFirstFilled(Re.text,ge.pts);(W(gs)||gs==="")&&(_r.text=gs),ge.text=T.texttemplateString(Up,_r,ke._fullLayout._d3locale,_r,Re._meta||{})}}}function Ae(ke,ge){var Ce=ke.rotate*Math.PI/180,Je=Math.cos(Ce),Re=Math.sin(Ce),Q=(ge.left+ge.right)/2,ce=(ge.top+ge.bottom)/2;ke.textX=Q*Je-ce*Re,ke.textY=Q*Re+ce*Je,ke.noCenter=!0}me.exports={plot:q,formatSliceLabel:Do,transformInsideText:Se,determineInsideTextFont:ne,positionTitleOutside:Ue,prerenderTitles:te,layoutAreas:Qe,attachFxHandlers:H,computeTransform:Ae}}}),r5=a({"src/traces/pie/style.js"(pe,me){var M=f(),v=p_(),g=D_().resizeText;me.exports=function(S){var T=S._fullLayout._pielayer.selectAll(".trace");g(S,T,"pie"),T.each(function(C){var P=C[0],p=P.trace,Y=M.select(this);Y.style({opacity:p.opacity}),Y.selectAll("path.surface").each(function(N){M.select(this).call(v,N,p,S)})})}}}),N_=a({"src/traces/pie/base_plot.js"(pe){var me=p1();pe.name="pie",pe.plot=function(M,v,g,E){me.plotBasePlot(pe.name,M,v,g,E)},pe.clean=function(M,v,g,E){me.cleanBasePlot(pe.name,M,v,g,E)}}}),Yg=a({"src/traces/pie/index.js"(pe,me){me.exports={attributes:t3(),supplyDefaults:r3().supplyDefaults,supplyLayoutDefaults:qg(),layoutAttributes:vb(),calc:Wg().calc,crossTraceCalc:Wg().crossTraceCalc,plot:a3().plot,style:r5(),styleOne:p_(),moduleType:"trace",name:"pie",basePlotModule:N_(),categories:["pie-like","pie","showLegend"],meta:{}}}}),tg=a({"lib/pie.js"(pe,me){me.exports=Yg()}}),fg=a({"node_modules/object-assign/index.js"(pe,me){var M=Object.getOwnPropertySymbols,v=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable;function E(T){if(T==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(T)}function S(){try{if(!Object.assign)return!1;var T=new String("abc");if(T[5]="de",Object.getOwnPropertyNames(T)[0]==="5")return!1;for(var C={},P=0;P<10;P++)C["_"+String.fromCharCode(P)]=P;var p=Object.getOwnPropertyNames(C).map(function(N){return C[N]});if(p.join("")!=="0123456789")return!1;var Y={};return"abcdefghijklmnopqrst".split("").forEach(function(N){Y[N]=N}),Object.keys(Object.assign({},Y)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}me.exports=S()?Object.assign:function(T,C){for(var P,p=E(T),Y,N=1;N<arguments.length;N++){P=Object(arguments[N]);for(var j in P)v.call(P,j)&&(p[j]=P[j]);if(M){Y=M(P);for(var ee=0;ee<Y.length;ee++)g.call(P,Y[ee])&&(p[Y[ee]]=P[Y[ee]])}}return p}}}),G1=a({"node_modules/world-calendars/dist/main.js"(pe,me){var M=fg();function v(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}M(v.prototype,{instance:function(P,p){P=(P||"gregorian").toLowerCase(),p=p||"";var Y=this._localCals[P+"-"+p];if(!Y&&this.calendars[P]&&(Y=new this.calendars[P](p),this._localCals[P+"-"+p]=Y),!Y)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,P);return Y},newDate:function(P,p,Y,N,j){return N=(P!=null&&P.year?P.calendar():typeof N=="string"?this.instance(N,j):N)||this.instance(),N.newDate(P,p,Y)},substituteDigits:function(P){return function(p){return(p+"").replace(/[0-9]/g,function(Y){return P[Y]})}},substituteChineseDigits:function(P,p){return function(Y){for(var N="",j=0;Y>0;){var ee=Y%10;N=(ee===0?"":P[ee]+p[j])+N,j++,Y=Math.floor(Y/10)}return N.indexOf(P[1]+p[1])===0&&(N=N.substr(1)),N||P[0]}}});function g(P,p,Y,N){if(this._calendar=P,this._year=p,this._month=Y,this._day=N,this._calendar._validateLevel===0&&!this._calendar.isValid(this._year,this._month,this._day))throw(C.local.invalidDate||C.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function E(P,p){return P=""+P,"000000".substring(0,p-P.length)+P}M(g.prototype,{newDate:function(P,p,Y){return this._calendar.newDate(P??this,p,Y)},year:function(P){return arguments.length===0?this._year:this.set(P,"y")},month:function(P){return arguments.length===0?this._month:this.set(P,"m")},day:function(P){return arguments.length===0?this._day:this.set(P,"d")},date:function(P,p,Y){if(!this._calendar.isValid(P,p,Y))throw(C.local.invalidDate||C.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=P,this._month=p,this._day=Y,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(P,p){return this._calendar.add(this,P,p)},set:function(P,p){return this._calendar.set(this,P,p)},compareTo:function(P){if(this._calendar.name!==P._calendar.name)throw(C.local.differentCalendars||C.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,P._calendar.local.name);var p=this._year!==P._year?this._year-P._year:this._month!==P._month?this.monthOfYear()-P.monthOfYear():this._day-P._day;return p===0?0:p<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(P){return this._calendar.fromJD(P)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(P){return this._calendar.fromJSDate(P)},toString:function(){return(this.year()<0?"-":"")+E(Math.abs(this.year()),4)+"-"+E(this.month(),2)+"-"+E(this.day(),2)}});function S(){this.shortYearCutoff="+10"}M(S.prototype,{_validateLevel:0,newDate:function(P,p,Y){return P==null?this.today():(P.year&&(this._validate(P,p,Y,C.local.invalidDate||C.regionalOptions[""].invalidDate),Y=P.day(),p=P.month(),P=P.year()),new g(this,P,p,Y))},today:function(){return this.fromJSDate(new Date)},epoch:function(P){var p=this._validate(P,this.minMonth,this.minDay,C.local.invalidYear||C.regionalOptions[""].invalidYear);return p.year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(P){var p=this._validate(P,this.minMonth,this.minDay,C.local.invalidYear||C.regionalOptions[""].invalidYear);return(p.year()<0?"-":"")+E(Math.abs(p.year()),4)},monthsInYear:function(P){return this._validate(P,this.minMonth,this.minDay,C.local.invalidYear||C.regionalOptions[""].invalidYear),12},monthOfYear:function(P,p){var Y=this._validate(P,p,this.minDay,C.local.invalidMonth||C.regionalOptions[""].invalidMonth);return(Y.month()+this.monthsInYear(Y)-this.firstMonth)%this.monthsInYear(Y)+this.minMonth},fromMonthOfYear:function(P,p){var Y=(p+this.firstMonth-2*this.minMonth)%this.monthsInYear(P)+this.minMonth;return this._validate(P,Y,this.minDay,C.local.invalidMonth||C.regionalOptions[""].invalidMonth),Y},daysInYear:function(P){var p=this._validate(P,this.minMonth,this.minDay,C.local.invalidYear||C.regionalOptions[""].invalidYear);return this.leapYear(p)?366:365},dayOfYear:function(P,p,Y){var N=this._validate(P,p,Y,C.local.invalidDate||C.regionalOptions[""].invalidDate);return N.toJD()-this.newDate(N.year(),this.fromMonthOfYear(N.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(P,p,Y){var N=this._validate(P,p,Y,C.local.invalidDate||C.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(N))+2)%this.daysInWeek()},extraInfo:function(P,p,Y){return this._validate(P,p,Y,C.local.invalidDate||C.regionalOptions[""].invalidDate),{}},add:function(P,p,Y){return this._validate(P,this.minMonth,this.minDay,C.local.invalidDate||C.regionalOptions[""].invalidDate),this._correctAdd(P,this._add(P,p,Y),p,Y)},_add:function(P,p,Y){if(this._validateLevel++,Y==="d"||Y==="w"){var N=P.toJD()+p*(Y==="w"?this.daysInWeek():1),j=P.calendar().fromJD(N);return this._validateLevel--,[j.year(),j.month(),j.day()]}try{var ee=P.year()+(Y==="y"?p:0),G=P.monthOfYear()+(Y==="m"?p:0),j=P.day(),V=function(z){for(;G<z.minMonth;)ee--,G+=z.monthsInYear(ee);for(var H=z.monthsInYear(ee);G>H-1+z.minMonth;)ee++,G-=H,H=z.monthsInYear(ee)};Y==="y"?(P.month()!==this.fromMonthOfYear(ee,G)&&(G=this.newDate(ee,P.month(),this.minDay).monthOfYear()),G=Math.min(G,this.monthsInYear(ee)),j=Math.min(j,this.daysInMonth(ee,this.fromMonthOfYear(ee,G)))):Y==="m"&&(V(this),j=Math.min(j,this.daysInMonth(ee,this.fromMonthOfYear(ee,G))));var W=[ee,this.fromMonthOfYear(ee,G),j];return this._validateLevel--,W}catch(q){throw this._validateLevel--,q}},_correctAdd:function(P,p,Y,N){if(!this.hasYearZero&&(N==="y"||N==="m")&&(p[0]===0||P.year()>0!=p[0]>0)){var j={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[N],ee=Y<0?-1:1;p=this._add(P,Y*j[0]+ee*j[1],j[2])}return P.date(p[0],p[1],p[2])},set:function(P,p,Y){this._validate(P,this.minMonth,this.minDay,C.local.invalidDate||C.regionalOptions[""].invalidDate);var N=Y==="y"?p:P.year(),j=Y==="m"?p:P.month(),ee=Y==="d"?p:P.day();return(Y==="y"||Y==="m")&&(ee=Math.min(ee,this.daysInMonth(N,j))),P.date(N,j,ee)},isValid:function(P,p,Y){this._validateLevel++;var N=this.hasYearZero||P!==0;if(N){var j=this.newDate(P,p,this.minDay);N=p>=this.minMonth&&p-this.minMonth<this.monthsInYear(j)&&Y>=this.minDay&&Y-this.minDay<this.daysInMonth(j)}return this._validateLevel--,N},toJSDate:function(P,p,Y){var N=this._validate(P,p,Y,C.local.invalidDate||C.regionalOptions[""].invalidDate);return C.instance().fromJD(this.toJD(N)).toJSDate()},fromJSDate:function(P){return this.fromJD(C.instance().fromJSDate(P).toJD())},_validate:function(P,p,Y,N){if(P.year){if(this._validateLevel===0&&this.name!==P.calendar().name)throw(C.local.differentCalendars||C.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,P.calendar().local.name);return P}try{if(this._validateLevel++,this._validateLevel===1&&!this.isValid(P,p,Y))throw N.replace(/\{0\}/,this.local.name);var j=this.newDate(P,p,Y);return this._validateLevel--,j}catch(ee){throw this._validateLevel--,ee}}});function T(P){this.local=this.regionalOptions[P]||this.regionalOptions[""]}T.prototype=new S,M(T.prototype,{name:"Gregorian",jdEpoch:17214255e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(Y){var p=this._validate(Y,this.minMonth,this.minDay,C.local.invalidYear||C.regionalOptions[""].invalidYear),Y=p.year()+(p.year()<0?1:0);return Y%4===0&&(Y%100!==0||Y%400===0)},weekOfYear:function(P,p,Y){var N=this.newDate(P,p,Y);return N.add(4-(N.dayOfWeek()||7),"d"),Math.floor((N.dayOfYear()-1)/7)+1},daysInMonth:function(P,p){var Y=this._validate(P,p,this.minDay,C.local.invalidMonth||C.regionalOptions[""].invalidMonth);return this.daysPerMonth[Y.month()-1]+(Y.month()===2&&this.leapYear(Y.year())?1:0)},weekDay:function(P,p,Y){return(this.dayOfWeek(P,p,Y)||7)<6},toJD:function(P,p,Y){var N=this._validate(P,p,Y,C.local.invalidDate||C.regionalOptions[""].invalidDate);P=N.year(),p=N.month(),Y=N.day(),P<0&&P++,p<3&&(p+=12,P--);var j=Math.floor(P/100),ee=2-j+Math.floor(j/4);return Math.floor(365.25*(P+4716))+Math.floor(30.6001*(p+1))+Y+ee-1524.5},fromJD:function(P){var p=Math.floor(P+.5),Y=Math.floor((p-186721625e-2)/36524.25);Y=p+1+Y-Math.floor(Y/4);var N=Y+1524,j=Math.floor((N-122.1)/365.25),ee=Math.floor(365.25*j),G=Math.floor((N-ee)/30.6001),V=N-ee-Math.floor(G*30.6001),W=G-(G>13.5?13:1),q=j-(W>2.5?4716:4715);return q<=0&&q--,this.newDate(q,W,V)},toJSDate:function(P,p,Y){var N=this._validate(P,p,Y,C.local.invalidDate||C.regionalOptions[""].invalidDate),j=new Date(N.year(),N.month()-1,N.day());return j.setHours(0),j.setMinutes(0),j.setSeconds(0),j.setMilliseconds(0),j.setHours(j.getHours()>12?j.getHours()+2:0),j},fromJSDate:function(P){return this.newDate(P.getFullYear(),P.getMonth()+1,P.getDate())}});var C=me.exports=new v;C.cdate=g,C.baseCalendar=S,C.calendars.gregorian=T}}),Gv=a({"node_modules/world-calendars/dist/plus.js"(){var pe=fg(),me=G1();pe(me.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),me.local=me.regionalOptions[""],pe(me.cdate.prototype,{formatDate:function(M,v){return typeof M!="string"&&(v=M,M=""),this._calendar.formatDate(M||"",this,v)}}),pe(me.baseCalendar.prototype,{UNIX_EPOCH:me.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:1440*60,TICKS_EPOCH:me.instance().jdEpoch,TICKS_PER_DAY:1440*60*1e7,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(M,v,g){if(typeof M!="string"&&(g=v,v=M,M=""),!v)return"";if(v.calendar()!==this)throw me.local.invalidFormat||me.regionalOptions[""].invalidFormat;M=M||this.local.dateFormat,g=g||{};var E=g.dayNamesShort||this.local.dayNamesShort,S=g.dayNames||this.local.dayNames,T=g.monthNumbers||this.local.monthNumbers,C=g.monthNamesShort||this.local.monthNamesShort,P=g.monthNames||this.local.monthNames;g.calculateWeek||this.local.calculateWeek;for(var p=function(Z,ne){for(var te=1;H+te<M.length&&M.charAt(H+te)===Z;)te++;return H+=te-1,Math.floor(te/(ne||1))>1},Y=function(Z,ne,te,Se){var fe=""+ne;if(p(Z,Se))for(;fe.length<te;)fe="0"+fe;return fe},N=function(Z,ne,te,Se){return p(Z)?Se[ne]:te[ne]},j=this,ee=function(Z){return typeof T=="function"?T.call(j,Z,p("m")):W(Y("m",Z.month(),2))},G=function(Z,ne){return ne?typeof P=="function"?P.call(j,Z):P[Z.month()-j.minMonth]:typeof C=="function"?C.call(j,Z):C[Z.month()-j.minMonth]},V=this.local.digits,W=function(Z){return g.localNumbers&&V?V(Z):Z},q="",z=!1,H=0;H<M.length;H++)if(z)M.charAt(H)==="'"&&!p("'")?z=!1:q+=M.charAt(H);else switch(M.charAt(H)){case"d":q+=W(Y("d",v.day(),2));break;case"D":q+=N("D",v.dayOfWeek(),E,S);break;case"o":q+=Y("o",v.dayOfYear(),3);break;case"w":q+=Y("w",v.weekOfYear(),2);break;case"m":q+=ee(v);break;case"M":q+=G(v,p("M"));break;case"y":q+=p("y",2)?v.year():(v.year()%100<10?"0":"")+v.year()%100;break;case"Y":p("Y",2),q+=v.formatYear();break;case"J":q+=v.toJD();break;case"@":q+=(v.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":q+=(v.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":p("'")?q+="'":z=!0;break;default:q+=M.charAt(H)}return q},parseDate:function(M,v,g){if(v==null)throw me.local.invalidArguments||me.regionalOptions[""].invalidArguments;if(v=typeof v=="object"?v.toString():v+"",v==="")return null;M=M||this.local.dateFormat,g=g||{};var E=g.shortYearCutoff||this.shortYearCutoff;E=typeof E!="string"?E:this.today().year()%100+parseInt(E,10);for(var S=g.dayNamesShort||this.local.dayNamesShort,T=g.dayNames||this.local.dayNames,C=g.parseMonth||this.local.parseMonth,P=g.monthNumbers||this.local.monthNumbers,p=g.monthNamesShort||this.local.monthNamesShort,Y=g.monthNames||this.local.monthNames,N=-1,j=-1,ee=-1,G=-1,V=-1,W=!1,q=!1,z=function(be,Te){for(var ye=1;xe+ye<M.length&&M.charAt(xe+ye)===be;)ye++;return xe+=ye-1,Math.floor(ye/(Te||1))>1},H=function(be,Te){var ye=z(be,Te),De=[2,3,ye?4:2,ye?4:2,10,11,20]["oyYJ@!".indexOf(be)+1],Ue=new RegExp("^-?\\d{1,"+De+"}"),he=v.substring(ve).match(Ue);if(!he)throw(me.local.missingNumberAt||me.regionalOptions[""].missingNumberAt).replace(/\{0\}/,ve);return ve+=he[0].length,parseInt(he[0],10)},Z=this,ne=function(){if(typeof P=="function"){z("m");var be=P.call(Z,v.substring(ve));return ve+=be.length,be}return H("m")},te=function(be,Te,ye,De){for(var Ue=z(be,De)?ye:Te,he=0;he<Ue.length;he++)if(v.substr(ve,Ue[he].length).toLowerCase()===Ue[he].toLowerCase())return ve+=Ue[he].length,he+Z.minMonth;throw(me.local.unknownNameAt||me.regionalOptions[""].unknownNameAt).replace(/\{0\}/,ve)},Se=function(){if(typeof Y=="function"){var be=z("M")?Y.call(Z,v.substring(ve)):p.call(Z,v.substring(ve));return ve+=be.length,be}return te("M",p,Y)},fe=function(){if(v.charAt(ve)!==M.charAt(xe))throw(me.local.unexpectedLiteralAt||me.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,ve);ve++},ve=0,xe=0;xe<M.length;xe++)if(q)M.charAt(xe)==="'"&&!z("'")?q=!1:fe();else switch(M.charAt(xe)){case"d":G=H("d");break;case"D":te("D",S,T);break;case"o":V=H("o");break;case"w":H("w");break;case"m":ee=ne();break;case"M":ee=Se();break;case"y":var re=xe;W=!z("y",2),xe=re,j=H("y",2);break;case"Y":j=H("Y",2);break;case"J":N=H("J")+.5,v.charAt(ve)==="."&&(ve++,H("J"));break;case"@":N=H("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":N=H("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":ve=v.length;break;case"'":z("'")?fe():q=!0;break;default:fe()}if(ve<v.length)throw me.local.unexpectedText||me.regionalOptions[""].unexpectedText;if(j===-1?j=this.today().year():j<100&&W&&(j+=E===-1?1900:this.today().year()-this.today().year()%100-(j<=E?0:100)),typeof ee=="string"&&(ee=C.call(this,j,ee)),V>-1){ee=1,G=V;for(var de=this.daysInMonth(j,ee);G>de;de=this.daysInMonth(j,ee))ee++,G-=de}return N>-1?this.fromJD(N):this.newDate(j,ee,G)},determineDate:function(M,v,g,E,S){g&&typeof g!="object"&&(S=E,E=g,g=null),typeof E!="string"&&(S=E,E="");var T=this,C=function(P){try{return T.parseDate(E,P,S)}catch{}P=P.toLowerCase();for(var p=(P.match(/^c/)&&g?g.newDate():null)||T.today(),Y=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,N=Y.exec(P);N;)p.add(parseInt(N[1],10),N[2]||"d"),N=Y.exec(P);return p};return v=v?v.newDate():null,M=M==null?v:typeof M=="string"?C(M):typeof M=="number"?isNaN(M)||M===1/0||M===-1/0?v:T.today().add(M,"d"):T.newDate(M),M}})}}),R1=a({"node_modules/world-calendars/dist/calendars/chinese.js"(){var pe=G1(),me=fg(),M=pe.instance();function v(N){this.local=this.regionalOptions[N||""]||this.regionalOptions[""]}v.prototype=new pe.baseCalendar,me(v.prototype,{name:"Chinese",jdEpoch:17214255e-1,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(N,j){if(typeof N=="string"){var ee=N.match(E);return ee?ee[0]:""}var G=this._validateYear(N),V=N.month(),W=""+this.toChineseMonth(G,V);return j&&W.length<2&&(W="0"+W),this.isIntercalaryMonth(G,V)&&(W+="i"),W},monthNames:function(N){if(typeof N=="string"){var j=N.match(S);return j?j[0]:""}var ee=this._validateYear(N),G=N.month(),V=this.toChineseMonth(ee,G),W=["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"][V-1];return this.isIntercalaryMonth(ee,G)&&(W="闰"+W),W},monthNamesShort:function(N){if(typeof N=="string"){var j=N.match(T);return j?j[0]:""}var ee=this._validateYear(N),G=N.month(),V=this.toChineseMonth(ee,G),W=["一","二","三","四","五","六","七","八","九","十","十一","十二"][V-1];return this.isIntercalaryMonth(ee,G)&&(W="闰"+W),W},parseMonth:function(N,j){N=this._validateYear(N);var ee=parseInt(j),G;if(isNaN(ee))j[0]==="闰"&&(G=!0,j=j.substring(1)),j[j.length-1]==="月"&&(j=j.substring(0,j.length-1)),ee=1+["一","二","三","四","五","六","七","八","九","十","十一","十二"].indexOf(j);else{var V=j[j.length-1];G=V==="i"||V==="I"}var W=this.toMonthIndex(N,ee,G);return W},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(N,j){if(N.year&&(N=N.year()),typeof N!="number"||N<1888||N>2111)throw j.replace(/\{0\}/,this.local.name);return N},toMonthIndex:function(N,j,ee){var G=this.intercalaryMonth(N),V=ee&&j!==G;if(V||j<1||j>12)throw pe.local.invalidMonth.replace(/\{0\}/,this.local.name);var W;return G?!ee&&j<=G?W=j-1:W=j:W=j-1,W},toChineseMonth:function(N,j){N.year&&(N=N.year(),j=N.month());var ee=this.intercalaryMonth(N),G=ee?12:11;if(j<0||j>G)throw pe.local.invalidMonth.replace(/\{0\}/,this.local.name);var V;return ee?j<ee?V=j+1:V=j:V=j+1,V},intercalaryMonth:function(N){N=this._validateYear(N);var j=C[N-C[0]],ee=j>>13;return ee},isIntercalaryMonth:function(N,j){N.year&&(N=N.year(),j=N.month());var ee=this.intercalaryMonth(N);return!!ee&&ee===j},leapYear:function(N){return this.intercalaryMonth(N)!==0},weekOfYear:function(N,j,ee){var G=this._validateYear(N,pe.local.invalidyear),V=P[G-P[0]],W=V>>9&4095,q=V>>5&15,z=V&31,H;H=M.newDate(W,q,z),H.add(4-(H.dayOfWeek()||7),"d");var Z=this.toJD(N,j,ee)-H.toJD();return 1+Math.floor(Z/7)},monthsInYear:function(N){return this.leapYear(N)?13:12},daysInMonth:function(N,j){N.year&&(j=N.month(),N=N.year()),N=this._validateYear(N);var ee=C[N-C[0]],G=ee>>13,V=G?12:11;if(j>V)throw pe.local.invalidMonth.replace(/\{0\}/,this.local.name);var W=ee&1<<12-j?30:29;return W},weekDay:function(N,j,ee){return(this.dayOfWeek(N,j,ee)||7)<6},toJD:function(N,j,ee){var G=this._validate(N,W,ee,pe.local.invalidDate);N=this._validateYear(G.year()),j=G.month(),ee=G.day();var V=this.isIntercalaryMonth(N,j),W=this.toChineseMonth(N,j),q=Y(N,W,ee,V);return M.toJD(q.year,q.month,q.day)},fromJD:function(N){var j=M.fromJD(N),ee=p(j.year(),j.month(),j.day()),G=this.toMonthIndex(ee.year,ee.month,ee.isIntercalary);return this.newDate(ee.year,G,ee.day)},fromString:function(N){var j=N.match(g),ee=this._validateYear(+j[1]),G=+j[2],V=!!j[3],W=this.toMonthIndex(ee,G,V),q=+j[4];return this.newDate(ee,W,q)},add:function(N,j,ee){var G=N.year(),V=N.month(),W=this.isIntercalaryMonth(G,V),q=this.toChineseMonth(G,V),z=Object.getPrototypeOf(v.prototype).add.call(this,N,j,ee);if(ee==="y"){var H=z.year(),Z=z.month(),ne=this.isIntercalaryMonth(H,q),te=W&&ne?this.toMonthIndex(H,q,!0):this.toMonthIndex(H,q,!1);te!==Z&&z.month(te)}return z}});var g=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,E=/^\d?\d[iI]?/m,S=/^闰?十?[一二三四五六七八九]?月/m,T=/^闰?十?[一二三四五六七八九]?/m;pe.calendars.chinese=v;var C=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],P=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904];function p(N,j,ee,G){var V,W;if(typeof N=="object")V=N,W=j||{};else{var q=typeof N=="number"&&N>=1888&&N<=2111;if(!q)throw new Error("Solar year outside range 1888-2111");var z=typeof j=="number"&&j>=1&&j<=12;if(!z)throw new Error("Solar month outside range 1 - 12");var H=typeof ee=="number"&&ee>=1&&ee<=31;if(!H)throw new Error("Solar day outside range 1 - 31");V={year:N,month:j,day:ee},W={}}var Z=P[V.year-P[0]],ne=V.year<<9|V.month<<5|V.day;W.year=ne>=Z?V.year:V.year-1,Z=P[W.year-P[0]];var te=Z>>9&4095,Se=Z>>5&15,fe=Z&31,ve,xe=new Date(te,Se-1,fe),re=new Date(V.year,V.month-1,V.day);ve=Math.round((re-xe)/(24*3600*1e3));var de=C[W.year-C[0]],be;for(be=0;be<13;be++){var Te=de&1<<12-be?30:29;if(ve<Te)break;ve-=Te}var ye=de>>13;return!ye||be<ye?(W.isIntercalary=!1,W.month=1+be):be===ye?(W.isIntercalary=!0,W.month=be):(W.isIntercalary=!1,W.month=be),W.day=1+ve,W}function Y(N,j,ee,G,V){var W,q;if(typeof N=="object")q=N,W=j||{};else{var z=typeof N=="number"&&N>=1888&&N<=2111;if(!z)throw new Error("Lunar year outside range 1888-2111");var H=typeof j=="number"&&j>=1&&j<=12;if(!H)throw new Error("Lunar month outside range 1 - 12");var Z=typeof ee=="number"&&ee>=1&&ee<=30;if(!Z)throw new Error("Lunar day outside range 1 - 30");var ne;typeof G=="object"?(ne=!1,W=G):(ne=!!G,W={}),q={year:N,month:j,day:ee,isIntercalary:ne}}var te;te=q.day-1;var Se=C[q.year-C[0]],fe=Se>>13,ve;fe&&(q.month>fe||q.isIntercalary)?ve=q.month:ve=q.month-1;for(var xe=0;xe<ve;xe++){var re=Se&1<<12-xe?30:29;te+=re}var de=P[q.year-P[0]],be=de>>9&4095,Te=de>>5&15,ye=de&31,De=new Date(be,Te-1,ye+te);return W.year=De.getFullYear(),W.month=1+De.getMonth(),W.day=De.getDate(),W}}}),ig=a({"node_modules/world-calendars/dist/calendars/coptic.js"(){var pe=G1(),me=fg();function M(v){this.local=this.regionalOptions[v||""]||this.regionalOptions[""]}M.prototype=new pe.baseCalendar,me(M.prototype,{name:"Coptic",jdEpoch:18250295e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(E){var g=this._validate(E,this.minMonth,this.minDay,pe.local.invalidYear),E=g.year()+(g.year()<0?1:0);return E%4===3||E%4===-1},monthsInYear:function(v){return this._validate(v,this.minMonth,this.minDay,pe.local.invalidYear||pe.regionalOptions[""].invalidYear),13},weekOfYear:function(v,g,E){var S=this.newDate(v,g,E);return S.add(-S.dayOfWeek(),"d"),Math.floor((S.dayOfYear()-1)/7)+1},daysInMonth:function(v,g){var E=this._validate(v,g,this.minDay,pe.local.invalidMonth);return this.daysPerMonth[E.month()-1]+(E.month()===13&&this.leapYear(E.year())?1:0)},weekDay:function(v,g,E){return(this.dayOfWeek(v,g,E)||7)<6},toJD:function(v,g,E){var S=this._validate(v,g,E,pe.local.invalidDate);return v=S.year(),v<0&&v++,S.day()+(S.month()-1)*30+(v-1)*365+Math.floor(v/4)+this.jdEpoch-1},fromJD:function(v){var g=Math.floor(v)+.5-this.jdEpoch,E=Math.floor((g-Math.floor((g+366)/1461))/365)+1;E<=0&&E--,g=Math.floor(v)+.5-this.newDate(E,1,1).toJD();var S=Math.floor(g/30)+1,T=g-(S-1)*30+1;return this.newDate(E,S,T)}}),pe.calendars.coptic=M}}),gb=a({"node_modules/world-calendars/dist/calendars/discworld.js"(){var pe=G1(),me=fg();function M(g){this.local=this.regionalOptions[g||""]||this.regionalOptions[""]}M.prototype=new pe.baseCalendar,me(M.prototype,{name:"Discworld",jdEpoch:17214255e-1,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(g){return this._validate(g,this.minMonth,this.minDay,pe.local.invalidYear),!1},monthsInYear:function(g){return this._validate(g,this.minMonth,this.minDay,pe.local.invalidYear),13},daysInYear:function(g){return this._validate(g,this.minMonth,this.minDay,pe.local.invalidYear),400},weekOfYear:function(g,E,S){var T=this.newDate(g,E,S);return T.add(-T.dayOfWeek(),"d"),Math.floor((T.dayOfYear()-1)/8)+1},daysInMonth:function(g,E){var S=this._validate(g,E,this.minDay,pe.local.invalidMonth);return this.daysPerMonth[S.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(g,E,S){var T=this._validate(g,E,S,pe.local.invalidDate);return(T.day()+1)%8},weekDay:function(g,E,S){var T=this.dayOfWeek(g,E,S);return T>=2&&T<=6},extraInfo:function(g,E,S){var T=this._validate(g,E,S,pe.local.invalidDate);return{century:v[Math.floor((T.year()-1)/100)+1]||""}},toJD:function(g,E,S){var T=this._validate(g,E,S,pe.local.invalidDate);return g=T.year()+(T.year()<0?1:0),E=T.month(),S=T.day(),S+(E>1?16:0)+(E>2?(E-2)*32:0)+(g-1)*400+this.jdEpoch-1},fromJD:function(g){g=Math.floor(g+.5)-Math.floor(this.jdEpoch)-1;var E=Math.floor(g/400)+1;g-=(E-1)*400,g+=g>15?16:0;var S=Math.floor(g/32)+1,T=g-(S-1)*32+1;return this.newDate(E<=0?E-1:E,S,T)}});var v={20:"Fruitbat",21:"Anchovy"};pe.calendars.discworld=M}}),O2=a({"node_modules/world-calendars/dist/calendars/ethiopian.js"(){var pe=G1(),me=fg();function M(v){this.local=this.regionalOptions[v||""]||this.regionalOptions[""]}M.prototype=new pe.baseCalendar,me(M.prototype,{name:"Ethiopian",jdEpoch:17242205e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(E){var g=this._validate(E,this.minMonth,this.minDay,pe.local.invalidYear),E=g.year()+(g.year()<0?1:0);return E%4===3||E%4===-1},monthsInYear:function(v){return this._validate(v,this.minMonth,this.minDay,pe.local.invalidYear||pe.regionalOptions[""].invalidYear),13},weekOfYear:function(v,g,E){var S=this.newDate(v,g,E);return S.add(-S.dayOfWeek(),"d"),Math.floor((S.dayOfYear()-1)/7)+1},daysInMonth:function(v,g){var E=this._validate(v,g,this.minDay,pe.local.invalidMonth);return this.daysPerMonth[E.month()-1]+(E.month()===13&&this.leapYear(E.year())?1:0)},weekDay:function(v,g,E){return(this.dayOfWeek(v,g,E)||7)<6},toJD:function(v,g,E){var S=this._validate(v,g,E,pe.local.invalidDate);return v=S.year(),v<0&&v++,S.day()+(S.month()-1)*30+(v-1)*365+Math.floor(v/4)+this.jdEpoch-1},fromJD:function(v){var g=Math.floor(v)+.5-this.jdEpoch,E=Math.floor((g-Math.floor((g+366)/1461))/365)+1;E<=0&&E--,g=Math.floor(v)+.5-this.newDate(E,1,1).toJD();var S=Math.floor(g/30)+1,T=g-(S-1)*30+1;return this.newDate(E,S,T)}}),pe.calendars.ethiopian=M}}),h2=a({"node_modules/world-calendars/dist/calendars/hebrew.js"(){var pe=G1(),me=fg();function M(g){this.local=this.regionalOptions[g||""]||this.regionalOptions[""]}M.prototype=new pe.baseCalendar,me(M.prototype,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(g){var E=this._validate(g,this.minMonth,this.minDay,pe.local.invalidYear);return this._leapYear(E.year())},_leapYear:function(g){return g=g<0?g+1:g,v(g*7+1,19)<7},monthsInYear:function(g){return this._validate(g,this.minMonth,this.minDay,pe.local.invalidYear),this._leapYear(g.year?g.year():g)?13:12},weekOfYear:function(g,E,S){var T=this.newDate(g,E,S);return T.add(-T.dayOfWeek(),"d"),Math.floor((T.dayOfYear()-1)/7)+1},daysInYear:function(g){var E=this._validate(g,this.minMonth,this.minDay,pe.local.invalidYear);return g=E.year(),this.toJD(g===-1?1:g+1,7,1)-this.toJD(g,7,1)},daysInMonth:function(g,E){return g.year&&(E=g.month(),g=g.year()),this._validate(g,E,this.minDay,pe.local.invalidMonth),E===12&&this.leapYear(g)||E===8&&v(this.daysInYear(g),10)===5?30:E===9&&v(this.daysInYear(g),10)===3?29:this.daysPerMonth[E-1]},weekDay:function(g,E,S){return this.dayOfWeek(g,E,S)!==6},extraInfo:function(g,E,S){var T=this._validate(g,E,S,pe.local.invalidDate);return{yearType:(this.leapYear(T)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(T)%10-3]}},toJD:function(g,E,S){var T=this._validate(g,E,S,pe.local.invalidDate);g=T.year(),E=T.month(),S=T.day();var C=g<=0?g+1:g,P=this.jdEpoch+this._delay1(C)+this._delay2(C)+S+1;if(E<7){for(var p=7;p<=this.monthsInYear(g);p++)P+=this.daysInMonth(g,p);for(var p=1;p<E;p++)P+=this.daysInMonth(g,p)}else for(var p=7;p<E;p++)P+=this.daysInMonth(g,p);return P},_delay1:function(g){var E=Math.floor((235*g-234)/19),S=12084+13753*E,T=E*29+Math.floor(S/25920);return v(3*(T+1),7)<3&&T++,T},_delay2:function(g){var E=this._delay1(g-1),S=this._delay1(g),T=this._delay1(g+1);return T-S===356?2:S-E===382?1:0},fromJD:function(g){g=Math.floor(g)+.5;for(var E=Math.floor((g-this.jdEpoch)*98496/35975351)-1;g>=this.toJD(E===-1?1:E+1,7,1);)E++;for(var S=g<this.toJD(E,1,1)?7:1;g>this.toJD(E,S,this.daysInMonth(E,S));)S++;var T=g-this.toJD(E,S,1)+1;return this.newDate(E,S,T)}});function v(g,E){return g-E*Math.floor(g/E)}pe.calendars.hebrew=M}}),yb=a({"node_modules/world-calendars/dist/calendars/islamic.js"(){var pe=G1(),me=fg();function M(v){this.local=this.regionalOptions[v||""]||this.regionalOptions[""]}M.prototype=new pe.baseCalendar,me(M.prototype,{name:"Islamic",jdEpoch:19484395e-1,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-khamīs","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(v){var g=this._validate(v,this.minMonth,this.minDay,pe.local.invalidYear);return(g.year()*11+14)%30<11},weekOfYear:function(v,g,E){var S=this.newDate(v,g,E);return S.add(-S.dayOfWeek(),"d"),Math.floor((S.dayOfYear()-1)/7)+1},daysInYear:function(v){return this.leapYear(v)?355:354},daysInMonth:function(v,g){var E=this._validate(v,g,this.minDay,pe.local.invalidMonth);return this.daysPerMonth[E.month()-1]+(E.month()===12&&this.leapYear(E.year())?1:0)},weekDay:function(v,g,E){return this.dayOfWeek(v,g,E)!==5},toJD:function(v,g,E){var S=this._validate(v,g,E,pe.local.invalidDate);return v=S.year(),g=S.month(),E=S.day(),v=v<=0?v+1:v,E+Math.ceil(29.5*(g-1))+(v-1)*354+Math.floor((3+11*v)/30)+this.jdEpoch-1},fromJD:function(v){v=Math.floor(v)+.5;var g=Math.floor((30*(v-this.jdEpoch)+10646)/10631);g=g<=0?g-1:g;var E=Math.min(12,Math.ceil((v-29-this.toJD(g,1,1))/29.5)+1),S=v-this.toJD(g,E,1)+1;return this.newDate(g,E,S)}}),pe.calendars.islamic=M}}),zx=a({"node_modules/world-calendars/dist/calendars/julian.js"(){var pe=G1(),me=fg();function M(v){this.local=this.regionalOptions[v||""]||this.regionalOptions[""]}M.prototype=new pe.baseCalendar,me(M.prototype,{name:"Julian",jdEpoch:17214235e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(E){var g=this._validate(E,this.minMonth,this.minDay,pe.local.invalidYear),E=g.year()<0?g.year()+1:g.year();return E%4===0},weekOfYear:function(v,g,E){var S=this.newDate(v,g,E);return S.add(4-(S.dayOfWeek()||7),"d"),Math.floor((S.dayOfYear()-1)/7)+1},daysInMonth:function(v,g){var E=this._validate(v,g,this.minDay,pe.local.invalidMonth);return this.daysPerMonth[E.month()-1]+(E.month()===2&&this.leapYear(E.year())?1:0)},weekDay:function(v,g,E){return(this.dayOfWeek(v,g,E)||7)<6},toJD:function(v,g,E){var S=this._validate(v,g,E,pe.local.invalidDate);return v=S.year(),g=S.month(),E=S.day(),v<0&&v++,g<=2&&(v--,g+=12),Math.floor(365.25*(v+4716))+Math.floor(30.6001*(g+1))+E-1524.5},fromJD:function(v){var g=Math.floor(v+.5),E=g+1524,S=Math.floor((E-122.1)/365.25),T=Math.floor(365.25*S),C=Math.floor((E-T)/30.6001),P=C-Math.floor(C<14?1:13),p=S-Math.floor(P>2?4716:4715),Y=E-T-Math.floor(30.6001*C);return p<=0&&p--,this.newDate(p,P,Y)}}),pe.calendars.julian=M}}),I2=a({"node_modules/world-calendars/dist/calendars/mayan.js"(){var pe=G1(),me=fg();function M(E){this.local=this.regionalOptions[E||""]||this.regionalOptions[""]}M.prototype=new pe.baseCalendar,me(M.prototype,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(E){return this._validate(E,this.minMonth,this.minDay,pe.local.invalidYear),!1},formatYear:function(E){var S=this._validate(E,this.minMonth,this.minDay,pe.local.invalidYear);E=S.year();var T=Math.floor(E/400);E=E%400,E+=E<0?400:0;var C=Math.floor(E/20);return T+"."+C+"."+E%20},forYear:function(E){if(E=E.split("."),E.length<3)throw"Invalid Mayan year";for(var S=0,T=0;T<E.length;T++){var C=parseInt(E[T],10);if(Math.abs(C)>19||T>0&&C<0)throw"Invalid Mayan year";S=S*20+C}return S},monthsInYear:function(E){return this._validate(E,this.minMonth,this.minDay,pe.local.invalidYear),18},weekOfYear:function(E,S,T){return this._validate(E,S,T,pe.local.invalidDate),0},daysInYear:function(E){return this._validate(E,this.minMonth,this.minDay,pe.local.invalidYear),360},daysInMonth:function(E,S){return this._validate(E,S,this.minDay,pe.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(E,S,T){var C=this._validate(E,S,T,pe.local.invalidDate);return C.day()},weekDay:function(E,S,T){return this._validate(E,S,T,pe.local.invalidDate),!0},extraInfo:function(E,S,T){var C=this._validate(E,S,T,pe.local.invalidDate),P=C.toJD(),p=this._toHaab(P),Y=this._toTzolkin(P);return{haabMonthName:this.local.haabMonths[p[0]-1],haabMonth:p[0],haabDay:p[1],tzolkinDayName:this.local.tzolkinMonths[Y[0]-1],tzolkinDay:Y[0],tzolkinTrecena:Y[1]}},_toHaab:function(E){E-=this.jdEpoch;var S=v(E+8+340,365);return[Math.floor(S/20)+1,v(S,20)]},_toTzolkin:function(E){return E-=this.jdEpoch,[g(E+20,20),g(E+4,13)]},toJD:function(E,S,T){var C=this._validate(E,S,T,pe.local.invalidDate);return C.day()+C.month()*20+C.year()*360+this.jdEpoch},fromJD:function(E){E=Math.floor(E)+.5-this.jdEpoch;var S=Math.floor(E/360);E=E%360,E+=E<0?360:0;var T=Math.floor(E/20),C=E%20;return this.newDate(S,T,C)}});function v(E,S){return E-S*Math.floor(E/S)}function g(E,S){return v(E-1,S)+1}pe.calendars.mayan=M}}),q5=a({"node_modules/world-calendars/dist/calendars/nanakshahi.js"(){var pe=G1(),me=fg();function M(g){this.local=this.regionalOptions[g||""]||this.regionalOptions[""]}M.prototype=new pe.baseCalendar;var v=pe.instance("gregorian");me(M.prototype,{name:"Nanakshahi",jdEpoch:22576735e-1,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(g){var E=this._validate(g,this.minMonth,this.minDay,pe.local.invalidYear||pe.regionalOptions[""].invalidYear);return v.leapYear(E.year()+(E.year()<1?1:0)+1469)},weekOfYear:function(g,E,S){var T=this.newDate(g,E,S);return T.add(1-(T.dayOfWeek()||7),"d"),Math.floor((T.dayOfYear()-1)/7)+1},daysInMonth:function(g,E){var S=this._validate(g,E,this.minDay,pe.local.invalidMonth);return this.daysPerMonth[S.month()-1]+(S.month()===12&&this.leapYear(S.year())?1:0)},weekDay:function(g,E,S){return(this.dayOfWeek(g,E,S)||7)<6},toJD:function(C,E,S){var T=this._validate(C,E,S,pe.local.invalidMonth),C=T.year();C<0&&C++;for(var P=T.day(),p=1;p<T.month();p++)P+=this.daysPerMonth[p-1];return P+v.toJD(C+1468,3,13)},fromJD:function(g){g=Math.floor(g+.5);for(var E=Math.floor((g-(this.jdEpoch-1))/366);g>=this.toJD(E+1,1,1);)E++;for(var S=g-Math.floor(this.toJD(E,1,1)+.5)+1,T=1;S>this.daysInMonth(E,T);)S-=this.daysInMonth(E,T),T++;return this.newDate(E,T,S)}}),pe.calendars.nanakshahi=M}}),Z1=a({"node_modules/world-calendars/dist/calendars/nepali.js"(){var pe=G1(),me=fg();function M(v){this.local=this.regionalOptions[v||""]||this.regionalOptions[""]}M.prototype=new pe.baseCalendar,me(M.prototype,{name:"Nepali",jdEpoch:17007095e-1,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(v){return this.daysInYear(v)!==this.daysPerYear},weekOfYear:function(v,g,E){var S=this.newDate(v,g,E);return S.add(-S.dayOfWeek(),"d"),Math.floor((S.dayOfYear()-1)/7)+1},daysInYear:function(v){var g=this._validate(v,this.minMonth,this.minDay,pe.local.invalidYear);if(v=g.year(),typeof this.NEPALI_CALENDAR_DATA[v]>"u")return this.daysPerYear;for(var E=0,S=this.minMonth;S<=12;S++)E+=this.NEPALI_CALENDAR_DATA[v][S];return E},daysInMonth:function(v,g){return v.year&&(g=v.month(),v=v.year()),this._validate(v,g,this.minDay,pe.local.invalidMonth),typeof this.NEPALI_CALENDAR_DATA[v]>"u"?this.daysPerMonth[g-1]:this.NEPALI_CALENDAR_DATA[v][g]},weekDay:function(v,g,E){return this.dayOfWeek(v,g,E)!==6},toJD:function(v,g,E){var S=this._validate(v,g,E,pe.local.invalidDate);v=S.year(),g=S.month(),E=S.day();var T=pe.instance(),C=0,P=g,p=v;this._createMissingCalendarData(v);var Y=v-(P>9||P===9&&E>=this.NEPALI_CALENDAR_DATA[p][0]?56:57);for(g!==9&&(C=E,P--);P!==9;)P<=0&&(P=12,p--),C+=this.NEPALI_CALENDAR_DATA[p][P],P--;return g===9?(C+=E-this.NEPALI_CALENDAR_DATA[p][0],C<0&&(C+=T.daysInYear(Y))):C+=this.NEPALI_CALENDAR_DATA[p][9]-this.NEPALI_CALENDAR_DATA[p][0],T.newDate(Y,1,1).add(C,"d").toJD()},fromJD:function(v){var g=pe.instance(),E=g.fromJD(v),S=E.year(),T=E.dayOfYear(),C=S+56;this._createMissingCalendarData(C);for(var P=9,p=this.NEPALI_CALENDAR_DATA[C][0],Y=this.NEPALI_CALENDAR_DATA[C][P]-p+1;T>Y;)P++,P>12&&(P=1,C++),Y+=this.NEPALI_CALENDAR_DATA[C][P];var N=this.NEPALI_CALENDAR_DATA[C][P]-(Y-T);return this.newDate(C,P,N)},_createMissingCalendarData:function(v){var g=this.daysPerMonth.slice(0);g.unshift(17);for(var E=v-1;E<v+2;E++)typeof this.NEPALI_CALENDAR_DATA[E]>"u"&&(this.NEPALI_CALENDAR_DATA[E]=g)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}}),pe.calendars.nepali=M}}),n3=a({"node_modules/world-calendars/dist/calendars/persian.js"(){var pe=G1(),me=fg();function M(g){this.local=this.regionalOptions[g||""]||this.regionalOptions[""]}function v(g){var E=g-475;g<0&&E++;var S=.242197,T=S*E,C=S*(E+1),P=T-Math.floor(T),p=C-Math.floor(C);return P>p}M.prototype=new pe.baseCalendar,me(M.prototype,{name:"Persian",jdEpoch:19483205e-1,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Dey","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Dey","Bah","Esf"],dayNames:["Yekshanbeh","Doshanbeh","Seshanbeh","Chahārshanbeh","Panjshanbeh","Jom'eh","Shanbeh"],dayNamesShort:["Yek","Do","Se","Cha","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(g){var E=this._validate(g,this.minMonth,this.minDay,pe.local.invalidYear);return v(E.year())},weekOfYear:function(g,E,S){var T=this.newDate(g,E,S);return T.add(-((T.dayOfWeek()+1)%7),"d"),Math.floor((T.dayOfYear()-1)/7)+1},daysInMonth:function(g,E){var S=this._validate(g,E,this.minDay,pe.local.invalidMonth);return this.daysPerMonth[S.month()-1]+(S.month()===12&&this.leapYear(S.year())?1:0)},weekDay:function(g,E,S){return this.dayOfWeek(g,E,S)!==5},toJD:function(g,E,S){var T=this._validate(g,E,S,pe.local.invalidDate);g=T.year(),E=T.month(),S=T.day();var C=0;if(g>0)for(var P=1;P<g;P++)v(P)&&C++;else if(g<0)for(var P=g;P<0;P++)v(P)&&C--;return S+(E<=7?(E-1)*31:(E-1)*30+6)+(g>0?g-1:g)*365+C+this.jdEpoch-1},fromJD:function(g){g=Math.floor(g)+.5;var E=475+(g-this.toJD(475,1,1))/365.242197,S=Math.floor(E);S<=0&&S--,g>this.toJD(S,12,v(S)?30:29)&&(S++,S===0&&S++);var T=g-this.toJD(S,1,1)+1,C=T<=186?Math.ceil(T/31):Math.ceil((T-6)/30),P=g-this.toJD(S,C,1)+1;return this.newDate(S,C,P)}}),pe.calendars.persian=M,pe.calendars.jalali=M}}),i3=a({"node_modules/world-calendars/dist/calendars/taiwan.js"(){var pe=G1(),me=fg(),M=pe.instance();function v(g){this.local=this.regionalOptions[g||""]||this.regionalOptions[""]}v.prototype=new pe.baseCalendar,me(v.prototype,{name:"Taiwan",jdEpoch:24194025e-1,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(S){var E=this._validate(S,this.minMonth,this.minDay,pe.local.invalidYear),S=this._t2gYear(E.year());return M.leapYear(S)},weekOfYear:function(C,E,S){var T=this._validate(C,this.minMonth,this.minDay,pe.local.invalidYear),C=this._t2gYear(T.year());return M.weekOfYear(C,T.month(),T.day())},daysInMonth:function(g,E){var S=this._validate(g,E,this.minDay,pe.local.invalidMonth);return this.daysPerMonth[S.month()-1]+(S.month()===2&&this.leapYear(S.year())?1:0)},weekDay:function(g,E,S){return(this.dayOfWeek(g,E,S)||7)<6},toJD:function(C,E,S){var T=this._validate(C,E,S,pe.local.invalidDate),C=this._t2gYear(T.year());return M.toJD(C,T.month(),T.day())},fromJD:function(g){var E=M.fromJD(g),S=this._g2tYear(E.year());return this.newDate(S,E.month(),E.day())},_t2gYear:function(g){return g+this.yearsOffset+(g>=-this.yearsOffset&&g<=-1?1:0)},_g2tYear:function(g){return g-this.yearsOffset-(g>=1&&g<=this.yearsOffset?1:0)}}),pe.calendars.taiwan=v}}),a5=a({"node_modules/world-calendars/dist/calendars/thai.js"(){var pe=G1(),me=fg(),M=pe.instance();function v(g){this.local=this.regionalOptions[g||""]||this.regionalOptions[""]}v.prototype=new pe.baseCalendar,me(v.prototype,{name:"Thai",jdEpoch:15230985e-1,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(S){var E=this._validate(S,this.minMonth,this.minDay,pe.local.invalidYear),S=this._t2gYear(E.year());return M.leapYear(S)},weekOfYear:function(C,E,S){var T=this._validate(C,this.minMonth,this.minDay,pe.local.invalidYear),C=this._t2gYear(T.year());return M.weekOfYear(C,T.month(),T.day())},daysInMonth:function(g,E){var S=this._validate(g,E,this.minDay,pe.local.invalidMonth);return this.daysPerMonth[S.month()-1]+(S.month()===2&&this.leapYear(S.year())?1:0)},weekDay:function(g,E,S){return(this.dayOfWeek(g,E,S)||7)<6},toJD:function(C,E,S){var T=this._validate(C,E,S,pe.local.invalidDate),C=this._t2gYear(T.year());return M.toJD(C,T.month(),T.day())},fromJD:function(g){var E=M.fromJD(g),S=this._g2tYear(E.year());return this.newDate(S,E.month(),E.day())},_t2gYear:function(g){return g-this.yearsOffset-(g>=1&&g<=this.yearsOffset?1:0)},_g2tYear:function(g){return g+this.yearsOffset+(g>=-this.yearsOffset&&g<=-1?1:0)}}),pe.calendars.thai=v}}),n5=a({"node_modules/world-calendars/dist/calendars/ummalqura.js"(){var pe=G1(),me=fg();function M(g){this.local=this.regionalOptions[g||""]||this.regionalOptions[""]}M.prototype=new pe.baseCalendar,me(M.prototype,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thalāthā’","Yawm al-Arba‘ā’","Yawm al-Khamīs","Yawm al-Jum‘a","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(g){var E=this._validate(g,this.minMonth,this.minDay,pe.local.invalidYear);return this.daysInYear(E.year())===355},weekOfYear:function(g,E,S){var T=this.newDate(g,E,S);return T.add(-T.dayOfWeek(),"d"),Math.floor((T.dayOfYear()-1)/7)+1},daysInYear:function(g){for(var E=0,S=1;S<=12;S++)E+=this.daysInMonth(g,S);return E},daysInMonth:function(g,E){for(var S=this._validate(g,E,this.minDay,pe.local.invalidMonth),T=S.toJD()-24e5+.5,C=0,P=0;P<v.length;P++){if(v[P]>T)return v[C]-v[C-1];C++}return 30},weekDay:function(g,E,S){return this.dayOfWeek(g,E,S)!==5},toJD:function(g,E,S){var T=this._validate(g,E,S,pe.local.invalidDate),C=12*(T.year()-1)+T.month()-15292,P=T.day()+v[C-1]-1;return P+24e5-.5},fromJD:function(g){for(var E=g-24e5+.5,S=0,T=0;T<v.length&&!(v[T]>E);T++)S++;var C=S+15292,P=Math.floor((C-1)/12),p=P+1,Y=C-12*P,N=E-v[S-1]+1;return this.newDate(p,Y,N)},isValid:function(g,E,S){var T=pe.baseCalendar.prototype.isValid.apply(this,arguments);return T&&(g=g.year!=null?g.year:g,T=g>=1276&&g<=1500),T},_validate:function(g,E,S,T){var C=pe.baseCalendar.prototype._validate.apply(this,arguments);if(C.year<1276||C.year>1500)throw T.replace(/\{0\}/,this.local.name);return C}}),pe.calendars.ummalqura=M;var v=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]}}),W5=a({"src/components/calendars/calendars.js"(pe,me){me.exports=G1(),Gv(),R1(),ig(),gb(),O2(),h2(),yb(),zx(),I2(),q5(),Z1(),n3(),i3(),a5(),n5()}}),s3=a({"src/components/calendars/index.js"(pe,me){var M=W5(),v=o0(),g=A(),E=g.EPOCHJD,S=g.ONEDAY,T={valType:"enumerated",values:v.sortObjectKeys(M.calendars),editType:"calc",dflt:"gregorian"},C=function(Se,fe,ve,xe){var re={};return re[ve]=T,v.coerce(Se,fe,re,ve,xe)},P=function(Se,fe,ve,xe){for(var re=0;re<ve.length;re++)C(Se,fe,ve[re]+"calendar",xe.calendar)},p={chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},Y={chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},N={chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},j="##",ee={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:j,w:j,c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}};function G(Se,fe,ve){for(var xe=Math.floor((fe+.05)/S)+E,re=W(ve).fromJD(xe),de=0,be,Te,ye,De,Ue;(de=Se.indexOf("%",de))!==-1;)be=Se.charAt(de+1),be==="0"||be==="-"||be==="_"?(ye=3,Te=Se.charAt(de+2),be==="_"&&(be="-")):(Te=be,be="0",ye=2),De=ee[Te],De?(De===j?Ue=j:Ue=re.formatDate(De[be]),Se=Se.substr(0,de)+Ue+Se.substr(de+ye),de+=Ue.length):de+=ye;return Se}var V={};function W(Se){var fe=V[Se];return fe||(fe=V[Se]=M.instance(Se),fe)}function q(Se){return v.extendFlat({},T,{description:Se})}function z(Se){return"Sets the calendar system to use with `"+Se+"` date data."}var H={xcalendar:q(z("x"))},Z=v.extendFlat({},H,{ycalendar:q(z("y"))}),ne=v.extendFlat({},Z,{zcalendar:q(z("z"))}),te=q(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));me.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:Z,bar:Z,box:Z,heatmap:Z,contour:Z,histogram:Z,histogram2d:Z,histogram2dcontour:Z,scatter3d:ne,surface:ne,mesh3d:ne,scattergl:Z,ohlc:H,candlestick:H},layout:{calendar:q(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:te},yaxis:{calendar:te},scene:{xaxis:{calendar:te},yaxis:{calendar:te},zaxis:{calendar:te}},polar:{radialaxis:{calendar:te}}}},layoutAttributes:T,handleDefaults:C,handleTraceDefaults:P,CANONICAL_SUNDAY:Y,CANONICAL_TICK:p,DFLTRANGE:N,getCal:W,worldCalFmt:G}}}),o3=a({"lib/calendars.js"(pe,me){me.exports=s3()}}),l3=a({"lib/index-basic.js"(pe,me){var M=y1();M.register([mb(),tg(),o3()]),me.exports=M}});return l3()})();/*! Bundled license information:

		native-promise-only/lib/npo.src.js:
		  (*! Native Promise Only
		      v0.8.1 (c) Kyle Simpson
		      MIT License: http://getify.mit-license.org
		  *)

		polybooljs/index.js:
		  (*
		   * @copyright 2016 Sean Connelly (@voidqk), http://syntheti.cc
		   * @license MIT
		   * @preserve Project Home: https://github.com/voidqk/polybooljs
		   *)

		object-assign/index.js:
		  (*
		  object-assign
		  (c) Sindre Sorhus
		  @license MIT
		  *)
		*/return window.Plotly=e,e})})(plotlyBasic$1)),plotlyBasic$1.exports}var plotlyBasicExports=requirePlotlyBasic();const Plotly=getDefaultExportFromCjs(plotlyBasicExports);function getBandTraces(r,e,t={}){const a=[];return e.forEach((s,o)=>{a.push({name:t.name,legendgroup:t.name,showlegend:o===0,...traceDefaultBands,...t,x:r,y:s})}),a}function getBandLayout(r=[],e=[]){return deepmerge.all([plotBandLayout,{xaxis:{tickvals:e,ticktext:r},yaxis:{}}])}function getBandStructure(r){const t=getXLabelsfromkpath(r[0].bandsData.path).map(prettifyLabels),a=getXLabelPos(r[0].bandsData.paths),s=getBandLayout(t,a);let o=[];for(const[f,u]of r.entries()){let h=u.traceFormat;(!h||Object.keys(h).length===0)&&(h={name:`Band Structure ${f}`,line:{color:getColor(f),width:1}});const x=u.bandsData,{xs:m,ys:w}=getXYData(x),A=getBandTraces(m,w,h);o.push(...A)}return{bandTraces:o,bandLayout:s}}function getDosLayout(r="h"){let e;return r==="v"?e=plotDOSLayoutF:e=plotDOSLayout,e}function getDosTraces(r,e="h",t={}){const a=e==="v"?r.y:r.x,s=e==="v"?r.x:r.y;return{...traceDefaultDos,...t,x:a,y:s}}function getDos(r,e="h"){const t=[];for(const[s,o]of r.entries()){let f=o.traceFormat;(!f||Object.keys(f).length===0)&&(f={name:`DOS ${s}`,line:{color:getColor(s),width:2}});const u=o.dosData,h=getDosTraces(u,e,f);t.push(h)}const a=getDosLayout(e);return{dosTraces:t,dosLayout:a}}function getProjectionTraces(r,e,t,a={},s=1){const o=transpose(t),f=transpose(e),u=[];return f.forEach((h,x)=>{const m=o[x],w=new Float64Array(h.length),A=new Float64Array(h.length);for(let l=0;l<h.length;l++){const c=m[l]*s;w[l]=h[l]+c,A[l]=h[l]-c}const D=r.length,I=new Float32Array(D*2),y=new Float32Array(D*2);for(let l=0;l<D;l++)I[l]=r[l],y[l]=A[l],I[2*D-1-l]=r[l],y[2*D-1-l]=w[l];u.push({name:a.name,legendgroup:a.name,type:"scatter",mode:"lines",fill:"toself",...a,showlegend:x===0,x:I,y})}),u}function handleSettings(r,e){for(const t in r)r[t]!==null&&typeof r[t]=="object"&&!Array.isArray(r[t])&&e[t]&&typeof e[t]=="object"&&!Array.isArray(e[t])?e[t]=deepmerge(e[t],r[t]):e[t]=r[t]}function BandsVisualiser(r,{bandsDataArray:e=[],dosDataArray:t=[],fermiLevels:a=[],customTraces:s=[],settings:o={}}){let f=[],u={},h=[],x=[],m={};typeof a=="number"&&(a=[a]);const w=e.length>0,A=t.length>0;if(w){const l=getBandStructure(e);f=l.bandTraces,u=l.bandLayout;for(const[c,L]of e.entries())if(L.hasOwnProperty("projections"))for(const[R,F]of L.projections.entries()){const $=F.traceFormat&&Object.keys(F.traceFormat).length>0?F.traceFormat:{name:`Projection ${R}`,line:{color:getColor(R),width:0}};h.push(...getProjectionTraces(L.bandsData.x,L.bandsData.y,F.projData.weights,$))}}if(A){const c=getDos(t,w?"v":"h");x=c.dosTraces,m=c.dosLayout}let D={},I=[];if(A&&!w)I=x,D={...m,showlegend:m?.showlegend??!0};else if(w&&!A)I=[...f,...h],D={...u,showlegend:u?.showlegend??!0};else if(A&&w){x=x.map(c=>({...c,xaxis:"x2",yaxis:"y"}));const l=mergeLegendTracesByName([...h,...x]);I=[...f,...l],D={...plotCombinedLayout,xaxis:{...plotCombinedLayout.xaxis||{},...u?.xaxis||{}},xaxis2:{...plotCombinedLayout.xaxis2||{},...m?.xaxis2||{}},yaxis:{...plotCombinedLayout.yaxis||{},...u?.yaxis||{},...m?.yaxis||{}}}}for(const l of s)console.log(l),l.target==="dos"?I.push({...l,xaxis:"x2",yaxis:"y"}):l.target==="bands"?I.push({...l,xaxis:"x",yaxis:"y"}):I.push({...l});const y=addfermiLines(a,I,A,w);handleSettings(o,D),Plotly.react(r,y,D,{displaylogo:!1,responsive:!0})}function CardContainer({children:r,header:e,footer:t,className:a="",childrenClassName:s="",style:o={}}){return jsxRuntimeExports$1.jsxs("div",{className:`w-full max-w-full bg-theme-100 border border-theme-200 p-3 rounded-md shadow-md ${a}`,style:o,children:[e&&jsxRuntimeExports$1.jsx("div",{className:"mb-2 font-semibold",children:e}),jsxRuntimeExports$1.jsx("div",{className:`px-1 ${s}`,children:r}),t&&jsxRuntimeExports$1.jsx("div",{className:"mt-2 text-sm text-gray-500",children:t})]})}function BandsDataVisualiser({nodeData:r}){const e=reactExports.useRef(null),[t,a]=reactExports.useState(null),[s,o]=reactExports.useState(!1),[f,u]=reactExports.useState(null),h=r.downloadByFormat?.json;return reactExports.useEffect(()=>{if(!h)return;(async()=>{o(!0),u(null);try{const m=await fetch(h);if(!m.ok)throw new Error(`HTTP error: ${m.status}`);const w=await m.json();a([{bandsData:w}])}catch(m){console.error("Failed to fetch bands JSON:",m),u(m.message)}finally{o(!1)}})()},[h]),reactExports.useEffect(()=>{!e.current||!t||BandsVisualiser(e.current,{bandsDataArray:t,settings:{showlegend:!1}})},[t]),jsxRuntimeExports$1.jsx("div",{className:"w-full mx-auto p-4 space-y-6",children:jsxRuntimeExports$1.jsx(CardContainer,{header:"Bands Structure Plot",className:"!px-1.5 !pt-2 !pb-0",childrenClassName:"!p-0",children:jsxRuntimeExports$1.jsxs("div",{className:"w-full h-[450px] relative flex items-center justify-center",children:[s&&jsxRuntimeExports$1.jsx(Spinner,{}),f&&!s&&jsxRuntimeExports$1.jsx(ErrorDisplay,{message:f,onRetry:()=>{}}),!s&&!f&&t&&jsxRuntimeExports$1.jsx("div",{ref:e,className:"absolute inset-4"})]})})})}var Vs$1=Object.defineProperty,js$1=(r,e,t)=>e in r?Vs$1(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Lt$1=(r,e,t)=>js$1(r,typeof e!="symbol"?e+"":e,t),commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},jsxRuntime={exports:{}},reactJsxRuntime_production={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactJsxRuntime_production;function requireReactJsxRuntime_production(){if(hasRequiredReactJsxRuntime_production)return reactJsxRuntime_production;hasRequiredReactJsxRuntime_production=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(a,s,o){var f=null;if(o!==void 0&&(f=""+o),s.key!==void 0&&(f=""+s.key),"key"in s){o={};for(var u in s)u!=="key"&&(o[u]=s[u])}else o=s;return s=o.ref,{$$typeof:r,type:a,key:f,ref:s!==void 0?s:null,props:o}}return reactJsxRuntime_production.Fragment=e,reactJsxRuntime_production.jsx=t,reactJsxRuntime_production.jsxs=t,reactJsxRuntime_production}jsxRuntime.exports=requireReactJsxRuntime_production();var jsxRuntimeExports=jsxRuntime.exports;const ControlBox=({viewerParams:r,onViewerParamChange:e,onViewerEvent:t})=>{const a=(f,u)=>{let h=r.supercell;h[f]=parseInt(u),e("supercell",h)},s=f=>{e(f,!r[f])},o=f=>{t("camera",f)};return jsxRuntimeExports.jsxs("div",{className:"control-box",children:[jsxRuntimeExports.jsxs("div",{className:"control-box-row",children:[jsxRuntimeExports.jsxs("div",{className:"supercell-container",children:[jsxRuntimeExports.jsx("label",{children:"Supercell: "}),jsxRuntimeExports.jsx("div",{style:{display:"flex"},children:[0,1,2].map(f=>jsxRuntimeExports.jsx("input",{className:"supercell-input",type:"number",min:"1",max:"99",value:r.supercell[f],onChange:u=>a(f,u.target.value)},f))})]}),jsxRuntimeExports.jsxs("div",{className:"camera-controls",children:[jsxRuntimeExports.jsx("label",{children:"Camera: "}),jsxRuntimeExports.jsx("button",{className:"camera-button",onClick:()=>o("x"),children:"x"}),jsxRuntimeExports.jsx("button",{className:"camera-button",onClick:()=>o("y"),children:"y"}),jsxRuntimeExports.jsx("button",{className:"camera-button",onClick:()=>o("z"),children:"z"})]})]}),jsxRuntimeExports.jsxs("div",{className:"control-box-row",style:{display:"flex"},children:[jsxRuntimeExports.jsxs("label",{className:"option-checkbox",children:[jsxRuntimeExports.jsx("input",{className:"control-box-input",type:"checkbox",checked:r.bonds,onChange:()=>s("bonds")}),jsxRuntimeExports.jsx("span",{children:"Bonds"})]}),jsxRuntimeExports.jsxs("label",{className:"option-checkbox",children:[jsxRuntimeExports.jsx("input",{className:"control-box-input",type:"checkbox",checked:r.packedCell,onChange:()=>s("packedCell")}),jsxRuntimeExports.jsx("span",{children:"Packed cell"})]}),jsxRuntimeExports.jsxs("label",{className:"option-checkbox",children:[jsxRuntimeExports.jsx("input",{className:"control-box-input",type:"checkbox",checked:r.atomLabels,onChange:()=>s("atomLabels")}),jsxRuntimeExports.jsx("span",{children:"Atom labels"})]}),jsxRuntimeExports.jsxs("label",{className:"option-checkbox",children:[jsxRuntimeExports.jsx("input",{className:"control-box-input",type:"checkbox",checked:r.spaceFilling,onChange:()=>s("vdwRadius")}),jsxRuntimeExports.jsx("span",{children:"vdW radius"})]})]})]})};var _3Dmol={exports:{}};/*!
 * 3dmol v2.5.3
 * JavaScript/TypeScript molecular visualization library
 * Author: David Koes and contributors
 */(function(module,exports){(function(r,e){module.exports=e()})(commonjsGlobal,()=>(()=>{var __webpack_modules__={"./node_modules/iobuffer/lib-esm/IOBuffer.js":((r,e,t)=>{t.r(e),t.d(e,{IOBuffer:()=>u});var a=t("./node_modules/iobuffer/lib-esm/text.js");const s=1024*8,o=(()=>{const h=new Uint8Array(4),x=new Uint32Array(h.buffer);return!((x[0]=1)&h[0])})(),f={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class u{constructor(x=s,m={}){Lt$1(this,"buffer"),Lt$1(this,"byteLength"),Lt$1(this,"byteOffset"),Lt$1(this,"length"),Lt$1(this,"offset"),Lt$1(this,"lastWrittenByte"),Lt$1(this,"littleEndian"),Lt$1(this,"_data"),Lt$1(this,"_mark"),Lt$1(this,"_marks");let w=!1;typeof x=="number"?x=new ArrayBuffer(x):(w=!0,this.lastWrittenByte=x.byteLength);const A=m.offset?m.offset>>>0:0,D=x.byteLength-A;let I=A;(ArrayBuffer.isView(x)||x instanceof u)&&(x.byteLength!==x.buffer.byteLength&&(I=x.byteOffset+A),x=x.buffer),w?this.lastWrittenByte=D:this.lastWrittenByte=0,this.buffer=x,this.length=D,this.byteLength=D,this.byteOffset=I,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,I,D),this._mark=0,this._marks=[]}available(x=1){return this.offset+x<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(x=1){return this.offset+=x,this}back(x=1){return this.offset-=x,this}seek(x){return this.offset=x,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const x=this._marks.pop();if(x===void 0)throw new Error("Mark stack empty");return this.seek(x),this}rewind(){return this.offset=0,this}ensureAvailable(x=1){if(!this.available(x)){const m=(this.offset+x)*2,w=new Uint8Array(m);w.set(new Uint8Array(this.buffer)),this.buffer=w.buffer,this.length=m,this.byteLength=m,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(x=1){return this.readArray(x,"uint8")}readArray(x,m){const w=f[m].BYTES_PER_ELEMENT*x,A=this.byteOffset+this.offset,D=this.buffer.slice(A,A+w);if(this.littleEndian===o&&m!=="uint8"&&m!=="int8"){const y=new Uint8Array(this.buffer.slice(A,A+w));y.reverse();const l=new f[m](y.buffer);return this.offset+=w,l.reverse(),l}const I=new f[m](D);return this.offset+=w,I}readInt16(){const x=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,x}readUint16(){const x=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,x}readInt32(){const x=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,x}readUint32(){const x=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,x}readFloat32(){const x=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,x}readFloat64(){const x=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,x}readBigInt64(){const x=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,x}readBigUint64(){const x=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,x}readChar(){return String.fromCharCode(this.readInt8())}readChars(x=1){let m="";for(let w=0;w<x;w++)m+=this.readChar();return m}readUtf8(x=1){return(0,a.decode)(this.readBytes(x))}decodeText(x=1,m="utf8"){return(0,a.decode)(this.readBytes(x),m)}writeBoolean(x){return this.writeUint8(x?255:0),this}writeInt8(x){return this.ensureAvailable(1),this._data.setInt8(this.offset++,x),this._updateLastWrittenByte(),this}writeUint8(x){return this.ensureAvailable(1),this._data.setUint8(this.offset++,x),this._updateLastWrittenByte(),this}writeByte(x){return this.writeUint8(x)}writeBytes(x){this.ensureAvailable(x.length);for(let m=0;m<x.length;m++)this._data.setUint8(this.offset++,x[m]);return this._updateLastWrittenByte(),this}writeInt16(x){return this.ensureAvailable(2),this._data.setInt16(this.offset,x,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(x){return this.ensureAvailable(2),this._data.setUint16(this.offset,x,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(x){return this.ensureAvailable(4),this._data.setInt32(this.offset,x,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(x){return this.ensureAvailable(4),this._data.setUint32(this.offset,x,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(x){return this.ensureAvailable(4),this._data.setFloat32(this.offset,x,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(x){return this.ensureAvailable(8),this._data.setFloat64(this.offset,x,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(x){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,x,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(x){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,x,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(x){return this.writeUint8(x.charCodeAt(0))}writeChars(x){for(let m=0;m<x.length;m++)this.writeUint8(x.charCodeAt(m));return this}writeUtf8(x){return this.writeBytes((0,a.encode)(x))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}}),"./node_modules/iobuffer/lib-esm/text.js":((r,e,t)=>{t.r(e),t.d(e,{decode:()=>a,encode:()=>o});function a(f,u="utf8"){return new TextDecoder(u).decode(f)}const s=new TextEncoder;function o(f){return s.encode(f)}}),"./node_modules/netcdfjs/lib-esm/data.js":((r,e,t)=>{t.r(e),t.d(e,{nonRecord:()=>s,record:()=>o});var a=t("./node_modules/netcdfjs/lib-esm/types.js");function s(f,u){const h=(0,a.str2num)(u.type),x=u.size/(0,a.num2bytes)(h),m=new Array(x);for(let w=0;w<x;w++)m[w]=(0,a.readType)(f,h,1);return m}function o(f,u,h){const x=(0,a.str2num)(u.type),m=u.size?u.size/(0,a.num2bytes)(x):1,w=h.length,A=new Array(w),D=h.recordStep;if(D)for(let I=0;I<w;I++){const y=f.offset;A[I]=(0,a.readType)(f,x,m),f.seek(y+D)}else throw new Error("recordDimension.recordStep is undefined");return A}}),"./node_modules/netcdfjs/lib-esm/header.js":((r,e,t)=>{t.r(e),t.d(e,{header:()=>m});var a=t("./node_modules/netcdfjs/lib-esm/types.js"),s=t("./node_modules/netcdfjs/lib-esm/utils.js");const o=0,f=10,u=11,h=12,x=0;function m(I,y){const l={version:y},c={length:I.readUint32()},L=w(I);Array.isArray(L)||(c.id=L.recordId,c.name=L.recordName,l.dimensions=L.dimensions),l.globalAttributes=A(I);const R=D(I,c?.id,y);return Array.isArray(R)||(l.variables=R.variables,c.recordStep=R.recordStep),l.recordDimension=c,l}function w(I){const y={};let l,c;const L=I.readUint32();let R;if(L===o)return(0,s.notNetcdf)(I.readUint32()!==o,"wrong empty tag for list of dimensions"),[];{(0,s.notNetcdf)(L!==f,"wrong tag for list of dimensions");const F=I.readUint32();R=new Array(F);for(let $=0;$<F;$++){const b=(0,s.readName)(I),k=I.readUint32();k===x&&(l=$,c=b),R[$]={name:b,size:k}}}return l!==void 0&&(y.recordId=l),c!==void 0&&(y.recordName=c),y.dimensions=R,y}function A(I){const y=I.readUint32();let l;if(y===o)return(0,s.notNetcdf)(I.readUint32()!==o,"wrong empty tag for list of attributes"),[];{(0,s.notNetcdf)(y!==h,"wrong tag for list of attributes");const c=I.readUint32();l=new Array(c);for(let L=0;L<c;L++){const R=(0,s.readName)(I),F=I.readUint32();(0,s.notNetcdf)(F<1||F>6,`non valid type ${F}`);const $=I.readUint32(),b=(0,a.readType)(I,F,$);(0,s.padding)(I),l[L]={name:R,type:(0,a.num2str)(F),value:b}}}return l}function D(I,y,l){const c=I.readUint32();let L=0,R;if(c===o)return(0,s.notNetcdf)(I.readUint32()!==o,"wrong empty tag for list of variables"),[];{(0,s.notNetcdf)(c!==u,"wrong tag for list of variables");const F=I.readUint32();R=new Array(F);for(let $=0;$<F;$++){const b=(0,s.readName)(I),k=I.readUint32(),B=new Array(k);for(let ue=0;ue<k;ue++)B[ue]=I.readUint32();const J=A(I),X=I.readUint32();(0,s.notNetcdf)(X<1&&X>6,`non valid type ${X}`);const ae=I.readUint32();let He=I.readUint32();l===2&&((0,s.notNetcdf)(He>0,"offsets larger than 4GB not supported"),He=I.readUint32());let Pe=!1;typeof y<"u"&&B[0]===y&&(L+=ae,Pe=!0),R[$]={name:b,dimensions:B,attributes:J,type:(0,a.num2str)(X),size:ae,offset:He,record:Pe}}}return{variables:R,recordStep:L}}}),"./node_modules/netcdfjs/lib-esm/index.js":((r,e,t)=>{t.r(e),t.d(e,{NetCDFReader:()=>a.NetCDFReader});var a=t("./node_modules/netcdfjs/lib-esm/parser.js")}),"./node_modules/netcdfjs/lib-esm/parser.js":((r,e,t)=>{t.r(e),t.d(e,{NetCDFReader:()=>h});var a=t("./node_modules/iobuffer/lib-esm/IOBuffer.js"),s=t("./node_modules/netcdfjs/lib-esm/data.js"),o=t("./node_modules/netcdfjs/lib-esm/header.js"),f=t("./node_modules/netcdfjs/lib-esm/toString.js"),u=t("./node_modules/netcdfjs/lib-esm/utils.js");class h{constructor(m){this.toString=f.toString;const w=new a.IOBuffer(m);w.setBigEndian(),(0,u.notNetcdf)(w.readChars(3)!=="CDF","should start with CDF");const A=w.readByte();(0,u.notNetcdf)(A>2,"unknown version"),this.header=(0,o.header)(w,A),this.buffer=w}get version(){return this.header.version===1?"classic format":"64-bit offset format"}get recordDimension(){return this.header.recordDimension}get dimensions(){return this.header.dimensions}get globalAttributes(){return this.header.globalAttributes}getAttribute(m){const w=this.globalAttributes.find(A=>A.name===m);return w?w.value:null}getDataVariableAsString(m){const w=this.getDataVariable(m);return w?w.join(""):null}get variables(){return this.header.variables}getDataVariable(m){let w;if(typeof m=="string"?w=this.header.variables.find(A=>A.name===m):w=m,w===void 0)throw new Error("Not a valid NetCDF v3.x file: variable not found");return this.buffer.seek(w.offset),w.record?(0,s.record)(this.buffer,w,this.header.recordDimension):(0,s.nonRecord)(this.buffer,w)}dataVariableExists(m){return this.header.variables.find(w=>w.name===m)!==void 0}attributeExists(m){return this.globalAttributes.find(w=>w.name===m)!==void 0}}}),"./node_modules/netcdfjs/lib-esm/toString.js":((r,e,t)=>{t.r(e),t.d(e,{toString:()=>a});function a(){const s=[];s.push("DIMENSIONS");for(const f of this.dimensions)s.push(`  ${f.name.padEnd(30)} = size: ${f.size}`);s.push(""),s.push("GLOBAL ATTRIBUTES");for(const f of this.globalAttributes)s.push(`  ${f.name.padEnd(30)} = ${f.value}`);const o=JSON.parse(JSON.stringify(this.variables));s.push(""),s.push("VARIABLES:");for(const f of o){f.value=this.getDataVariable(f);let u=JSON.stringify(f.value);u.length>50&&(u=u.substring(0,50)),isNaN(f.value.length)||(u+=` (length: ${f.value.length})`),s.push(`  ${f.name.padEnd(30)} = ${u}`)}return s.join(`
`)}}),"./node_modules/netcdfjs/lib-esm/types.js":((r,e,t)=>{t.r(e),t.d(e,{num2bytes:()=>o,num2str:()=>s,readType:()=>h,str2num:()=>f});const a={BYTE:1,CHAR:2,SHORT:3,INT:4,FLOAT:5,DOUBLE:6};function s(m){switch(Number(m)){case a.BYTE:return"byte";case a.CHAR:return"char";case a.SHORT:return"short";case a.INT:return"int";case a.FLOAT:return"float";case a.DOUBLE:return"double";default:return"undefined"}}function o(m){switch(Number(m)){case a.BYTE:return 1;case a.CHAR:return 1;case a.SHORT:return 2;case a.INT:return 4;case a.FLOAT:return 4;case a.DOUBLE:return 8;default:return-1}}function f(m){switch(String(m)){case"byte":return a.BYTE;case"char":return a.CHAR;case"short":return a.SHORT;case"int":return a.INT;case"float":return a.FLOAT;case"double":return a.DOUBLE;default:return-1}}function u(m,w){if(m!==1){const A=new Array(m);for(let D=0;D<m;D++)A[D]=w();return A}else return w()}function h(m,w,A){switch(w){case a.BYTE:return Array.from(m.readBytes(A));case a.CHAR:return x(m.readChars(A));case a.SHORT:return u(A,m.readInt16.bind(m));case a.INT:return u(A,m.readInt32.bind(m));case a.FLOAT:return u(A,m.readFloat32.bind(m));case a.DOUBLE:return u(A,m.readFloat64.bind(m));default:throw new Error(`non valid type ${w}`)}}function x(m){return m.charCodeAt(m.length-1)===0?m.substring(0,m.length-1):m}}),"./node_modules/netcdfjs/lib-esm/utils.js":((r,e,t)=>{t.r(e),t.d(e,{notNetcdf:()=>a,padding:()=>s,readName:()=>o});function a(f,u){if(f)throw new TypeError(`Not a valid NetCDF v3.x file: ${u}`)}function s(f){f.offset%4!==0&&f.skip(4-f.offset%4)}function o(f){const u=f.readUint32(),h=f.readChars(u);return s(f),h}}),"./node_modules/pako/dist/pako.esm.mjs":((r,e,t)=>{t.r(e),t.d(e,{Deflate:()=>c2,Inflate:()=>pb,constants:()=>C_,default:()=>f2,deflate:()=>u2,deflateRaw:()=>Rx,gzip:()=>N2,inflate:()=>W1,inflateRaw:()=>z2,ungzip:()=>A_});/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */const a=4,s=0,o=1,f=2;function u(ie){let Ol=ie.length;for(;--Ol>=0;)ie[Ol]=0}const h=0,x=1,m=2,w=3,A=258,D=29,I=256,y=I+1+D,l=30,c=19,L=2*y+1,R=15,F=16,$=7,b=256,k=16,B=17,J=18,X=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),ae=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),He=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),Pe=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),ue=512,Oe=new Array((y+2)*2);u(Oe);const we=new Array(l*2);u(we);const Ze=new Array(ue);u(Ze);const it=new Array(A-w+1);u(it);const lt=new Array(D);u(lt);const Vt=new Array(l);u(Vt);function _e(ie,Ol,Xe,Wp,l0){this.static_tree=ie,this.extra_bits=Ol,this.extra_base=Xe,this.elems=Wp,this.max_length=l0,this.has_stree=ie&&ie.length}let pr,_s,Ei;function Bl(ie,Ol){this.dyn_tree=ie,this.max_code=0,this.stat_desc=Ol}const Wl=ie=>ie<256?Ze[ie]:Ze[256+(ie>>>7)],Ep=(ie,Ol)=>{ie.pending_buf[ie.pending++]=Ol&255,ie.pending_buf[ie.pending++]=Ol>>>8&255},Lp=(ie,Ol,Xe)=>{ie.bi_valid>F-Xe?(ie.bi_buf|=Ol<<ie.bi_valid&65535,Ep(ie,ie.bi_buf),ie.bi_buf=Ol>>F-ie.bi_valid,ie.bi_valid+=Xe-F):(ie.bi_buf|=Ol<<ie.bi_valid&65535,ie.bi_valid+=Xe)},Op=(ie,Ol,Xe)=>{Lp(ie,Xe[Ol*2],Xe[Ol*2+1])},R0=(ie,Ol)=>{let Xe=0;do Xe|=ie&1,ie>>>=1,Xe<<=1;while(--Ol>0);return Xe>>>1},N0=ie=>{ie.bi_valid===16?(Ep(ie,ie.bi_buf),ie.bi_buf=0,ie.bi_valid=0):ie.bi_valid>=8&&(ie.pending_buf[ie.pending++]=ie.bi_buf&255,ie.bi_buf>>=8,ie.bi_valid-=8)},Qp=(ie,Ol)=>{const Xe=Ol.dyn_tree,Wp=Ol.max_code,l0=Ol.stat_desc.static_tree,S0=Ol.stat_desc.has_stree,hm=Ol.stat_desc.extra_bits,am=Ol.stat_desc.extra_base,av=Ol.stat_desc.max_length;let q0,um,l1,qm,Im,C1,I1=0;for(qm=0;qm<=R;qm++)ie.bl_count[qm]=0;for(Xe[ie.heap[ie.heap_max]*2+1]=0,q0=ie.heap_max+1;q0<L;q0++)um=ie.heap[q0],qm=Xe[Xe[um*2+1]*2+1]+1,qm>av&&(qm=av,I1++),Xe[um*2+1]=qm,!(um>Wp)&&(ie.bl_count[qm]++,Im=0,um>=am&&(Im=hm[um-am]),C1=Xe[um*2],ie.opt_len+=C1*(qm+Im),S0&&(ie.static_len+=C1*(l0[um*2+1]+Im)));if(I1!==0){do{for(qm=av-1;ie.bl_count[qm]===0;)qm--;ie.bl_count[qm]--,ie.bl_count[qm+1]+=2,ie.bl_count[av]--,I1-=2}while(I1>0);for(qm=av;qm!==0;qm--)for(um=ie.bl_count[qm];um!==0;)l1=ie.heap[--q0],!(l1>Wp)&&(Xe[l1*2+1]!==qm&&(ie.opt_len+=(qm-Xe[l1*2+1])*Xe[l1*2],Xe[l1*2+1]=qm),um--)}},O0=(ie,Ol,Xe)=>{const Wp=new Array(R+1);let l0=0,S0,hm;for(S0=1;S0<=R;S0++)l0=l0+Xe[S0-1]<<1,Wp[S0]=l0;for(hm=0;hm<=Ol;hm++){let am=ie[hm*2+1];am!==0&&(ie[hm*2]=R0(Wp[am]++,am))}},zp=()=>{let ie,Ol,Xe,Wp,l0;const S0=new Array(R+1);for(Xe=0,Wp=0;Wp<D-1;Wp++)for(lt[Wp]=Xe,ie=0;ie<1<<X[Wp];ie++)it[Xe++]=Wp;for(it[Xe-1]=Wp,l0=0,Wp=0;Wp<16;Wp++)for(Vt[Wp]=l0,ie=0;ie<1<<ae[Wp];ie++)Ze[l0++]=Wp;for(l0>>=7;Wp<l;Wp++)for(Vt[Wp]=l0<<7,ie=0;ie<1<<ae[Wp]-7;ie++)Ze[256+l0++]=Wp;for(Ol=0;Ol<=R;Ol++)S0[Ol]=0;for(ie=0;ie<=143;)Oe[ie*2+1]=8,ie++,S0[8]++;for(;ie<=255;)Oe[ie*2+1]=9,ie++,S0[9]++;for(;ie<=279;)Oe[ie*2+1]=7,ie++,S0[7]++;for(;ie<=287;)Oe[ie*2+1]=8,ie++,S0[8]++;for(O0(Oe,y+1,S0),ie=0;ie<l;ie++)we[ie*2+1]=5,we[ie*2]=R0(ie,5);pr=new _e(Oe,X,I+1,y,R),_s=new _e(we,ae,0,l,R),Ei=new _e(new Array(0),He,0,c,$)},M0=ie=>{let Ol;for(Ol=0;Ol<y;Ol++)ie.dyn_ltree[Ol*2]=0;for(Ol=0;Ol<l;Ol++)ie.dyn_dtree[Ol*2]=0;for(Ol=0;Ol<c;Ol++)ie.bl_tree[Ol*2]=0;ie.dyn_ltree[b*2]=1,ie.opt_len=ie.static_len=0,ie.sym_next=ie.matches=0},W0=ie=>{ie.bi_valid>8?Ep(ie,ie.bi_buf):ie.bi_valid>0&&(ie.pending_buf[ie.pending++]=ie.bi_buf),ie.bi_buf=0,ie.bi_valid=0},im=(ie,Ol,Xe,Wp)=>{const l0=Ol*2,S0=Xe*2;return ie[l0]<ie[S0]||ie[l0]===ie[S0]&&Wp[Ol]<=Wp[Xe]},F0=(ie,Ol,Xe)=>{const Wp=ie.heap[Xe];let l0=Xe<<1;for(;l0<=ie.heap_len&&(l0<ie.heap_len&&im(Ol,ie.heap[l0+1],ie.heap[l0],ie.depth)&&l0++,!im(Ol,Wp,ie.heap[l0],ie.depth));)ie.heap[Xe]=ie.heap[l0],Xe=l0,l0<<=1;ie.heap[Xe]=Wp},fm=(ie,Ol,Xe)=>{let Wp,l0,S0=0,hm,am;if(ie.sym_next!==0)do Wp=ie.pending_buf[ie.sym_buf+S0++]&255,Wp+=(ie.pending_buf[ie.sym_buf+S0++]&255)<<8,l0=ie.pending_buf[ie.sym_buf+S0++],Wp===0?Op(ie,l0,Ol):(hm=it[l0],Op(ie,hm+I+1,Ol),am=X[hm],am!==0&&(l0-=lt[hm],Lp(ie,l0,am)),Wp--,hm=Wl(Wp),Op(ie,hm,Xe),am=ae[hm],am!==0&&(Wp-=Vt[hm],Lp(ie,Wp,am)));while(S0<ie.sym_next);Op(ie,b,Ol)},cm=(ie,Ol)=>{const Xe=Ol.dyn_tree,Wp=Ol.stat_desc.static_tree,l0=Ol.stat_desc.has_stree,S0=Ol.stat_desc.elems;let hm,am,av=-1,q0;for(ie.heap_len=0,ie.heap_max=L,hm=0;hm<S0;hm++)Xe[hm*2]!==0?(ie.heap[++ie.heap_len]=av=hm,ie.depth[hm]=0):Xe[hm*2+1]=0;for(;ie.heap_len<2;)q0=ie.heap[++ie.heap_len]=av<2?++av:0,Xe[q0*2]=1,ie.depth[q0]=0,ie.opt_len--,l0&&(ie.static_len-=Wp[q0*2+1]);for(Ol.max_code=av,hm=ie.heap_len>>1;hm>=1;hm--)F0(ie,Xe,hm);q0=S0;do hm=ie.heap[1],ie.heap[1]=ie.heap[ie.heap_len--],F0(ie,Xe,1),am=ie.heap[1],ie.heap[--ie.heap_max]=hm,ie.heap[--ie.heap_max]=am,Xe[q0*2]=Xe[hm*2]+Xe[am*2],ie.depth[q0]=(ie.depth[hm]>=ie.depth[am]?ie.depth[hm]:ie.depth[am])+1,Xe[hm*2+1]=Xe[am*2+1]=q0,ie.heap[1]=q0++,F0(ie,Xe,1);while(ie.heap_len>=2);ie.heap[--ie.heap_max]=ie.heap[1],Qp(ie,Ol),O0(Xe,av,ie.bl_count)},Ap=(ie,Ol,Xe)=>{let Wp,l0=-1,S0,hm=Ol[1],am=0,av=7,q0=4;for(hm===0&&(av=138,q0=3),Ol[(Xe+1)*2+1]=65535,Wp=0;Wp<=Xe;Wp++)S0=hm,hm=Ol[(Wp+1)*2+1],!(++am<av&&S0===hm)&&(am<q0?ie.bl_tree[S0*2]+=am:S0!==0?(S0!==l0&&ie.bl_tree[S0*2]++,ie.bl_tree[k*2]++):am<=10?ie.bl_tree[B*2]++:ie.bl_tree[J*2]++,am=0,l0=S0,hm===0?(av=138,q0=3):S0===hm?(av=6,q0=3):(av=7,q0=4))},Io=(ie,Ol,Xe)=>{let Wp,l0=-1,S0,hm=Ol[1],am=0,av=7,q0=4;for(hm===0&&(av=138,q0=3),Wp=0;Wp<=Xe;Wp++)if(S0=hm,hm=Ol[(Wp+1)*2+1],!(++am<av&&S0===hm)){if(am<q0)do Op(ie,S0,ie.bl_tree);while(--am!==0);else S0!==0?(S0!==l0&&(Op(ie,S0,ie.bl_tree),am--),Op(ie,k,ie.bl_tree),Lp(ie,am-3,2)):am<=10?(Op(ie,B,ie.bl_tree),Lp(ie,am-3,3)):(Op(ie,J,ie.bl_tree),Lp(ie,am-11,7));am=0,l0=S0,hm===0?(av=138,q0=3):S0===hm?(av=6,q0=3):(av=7,q0=4)}},p0=ie=>{let Ol;for(Ap(ie,ie.dyn_ltree,ie.l_desc.max_code),Ap(ie,ie.dyn_dtree,ie.d_desc.max_code),cm(ie,ie.bl_desc),Ol=c-1;Ol>=3&&ie.bl_tree[Pe[Ol]*2+1]===0;Ol--);return ie.opt_len+=3*(Ol+1)+5+5+4,Ol},a0=(ie,Ol,Xe,Wp)=>{let l0;for(Lp(ie,Ol-257,5),Lp(ie,Xe-1,5),Lp(ie,Wp-4,4),l0=0;l0<Wp;l0++)Lp(ie,ie.bl_tree[Pe[l0]*2+1],3);Io(ie,ie.dyn_ltree,Ol-1),Io(ie,ie.dyn_dtree,Xe-1)},rm=ie=>{let Ol=4093624447,Xe;for(Xe=0;Xe<=31;Xe++,Ol>>>=1)if(Ol&1&&ie.dyn_ltree[Xe*2]!==0)return s;if(ie.dyn_ltree[18]!==0||ie.dyn_ltree[20]!==0||ie.dyn_ltree[26]!==0)return o;for(Xe=32;Xe<I;Xe++)if(ie.dyn_ltree[Xe*2]!==0)return o;return s};let X0=!1;const Nl=ie=>{X0||(zp(),X0=!0),ie.l_desc=new Bl(ie.dyn_ltree,pr),ie.d_desc=new Bl(ie.dyn_dtree,_s),ie.bl_desc=new Bl(ie.bl_tree,Ei),ie.bi_buf=0,ie.bi_valid=0,M0(ie)},Gl=(ie,Ol,Xe,Wp)=>{Lp(ie,(h<<1)+(Wp?1:0),3),W0(ie),Ep(ie,Xe),Ep(ie,~Xe),Xe&&ie.pending_buf.set(ie.window.subarray(Ol,Ol+Xe),ie.pending),ie.pending+=Xe},Mp=ie=>{Lp(ie,x<<1,3),Op(ie,b,Oe),N0(ie)},_0=(ie,Ol,Xe,Wp)=>{let l0,S0,hm=0;ie.level>0?(ie.strm.data_type===f&&(ie.strm.data_type=rm(ie)),cm(ie,ie.l_desc),cm(ie,ie.d_desc),hm=p0(ie),l0=ie.opt_len+3+7>>>3,S0=ie.static_len+3+7>>>3,S0<=l0&&(l0=S0)):l0=S0=Xe+5,Xe+4<=l0&&Ol!==-1?Gl(ie,Ol,Xe,Wp):ie.strategy===a||S0===l0?(Lp(ie,(x<<1)+(Wp?1:0),3),fm(ie,Oe,we)):(Lp(ie,(m<<1)+(Wp?1:0),3),a0(ie,ie.l_desc.max_code+1,ie.d_desc.max_code+1,hm+1),fm(ie,ie.dyn_ltree,ie.dyn_dtree)),M0(ie),Wp&&W0(ie)},v0=(ie,Ol,Xe)=>(ie.pending_buf[ie.sym_buf+ie.sym_next++]=Ol,ie.pending_buf[ie.sym_buf+ie.sym_next++]=Ol>>8,ie.pending_buf[ie.sym_buf+ie.sym_next++]=Xe,Ol===0?ie.dyn_ltree[Xe*2]++:(ie.matches++,Ol--,ie.dyn_ltree[(it[Xe]+I+1)*2]++,ie.dyn_dtree[Wl(Ol)*2]++),ie.sym_next===ie.sym_end);var z0=Nl,sm=Gl,Uo=_0,u0=v0,x0=Mp,Xl={_tr_init:z0,_tr_stored_block:sm,_tr_flush_block:Uo,_tr_tally:u0,_tr_align:x0},Bp=(ie,Ol,Xe,Wp)=>{let l0=ie&65535|0,S0=ie>>>16&65535|0,hm=0;for(;Xe!==0;){hm=Xe>2e3?2e3:Xe,Xe-=hm;do l0=l0+Ol[Wp++]|0,S0=S0+l0|0;while(--hm);l0%=65521,S0%=65521}return l0|S0<<16|0};const L0=()=>{let ie,Ol=[];for(var Xe=0;Xe<256;Xe++){ie=Xe;for(var Wp=0;Wp<8;Wp++)ie=ie&1?3988292384^ie>>>1:ie>>>1;Ol[Xe]=ie}return Ol},kl=new Uint32Array(L0());var Np=(ie,Ol,Xe,Wp)=>{const l0=kl,S0=Wp+Xe;ie^=-1;for(let hm=Wp;hm<S0;hm++)ie=ie>>>8^l0[(ie^Ol[hm])&255];return ie^-1},V0={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Ke={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:g0,_tr_stored_block:d0,_tr_flush_block:Vl,_tr_tally:jp,_tr_align:K0}=Xl,{Z_NO_FLUSH:Pm,Z_PARTIAL_FLUSH:Cm,Z_FULL_FLUSH:Fm,Z_FINISH:ev,Z_BLOCK:h1,Z_OK:xv,Z_STREAM_END:gv,Z_STREAM_ERROR:zv,Z_DATA_ERROR:a1,Z_BUF_ERROR:Jv,Z_DEFAULT_COMPRESSION:d1,Z_FILTERED:A1,Z_HUFFMAN_ONLY:Zv,Z_RLE:u1,Z_FIXED:Yp,Z_DEFAULT_STRATEGY:nm,Z_UNKNOWN:dm,Z_DEFLATED:o0}=Ke,pm=9,jm=15,iv=8,ov=286,dv=30,cv=19,Cv=2*ov+1,Lv=15,Vm=3,wv=258,Ov=wv+Vm+1,X1=32,n1=42,Rv=57,Kg=69,p1=73,P1=91,f1=103,v1=113,Q1=666,Kv=1,O1=2,hg=3,j1=4,og=3,Ng=(ie,Ol)=>(ie.msg=V0[Ol],Ol),Gy=ie=>ie*2-(ie>4?9:0),Hg=ie=>{let Ol=ie.length;for(;--Ol>=0;)ie[Ol]=0},Vy=ie=>{let Ol,Xe,Wp,l0=ie.w_size;Ol=ie.hash_size,Wp=Ol;do Xe=ie.head[--Wp],ie.head[Wp]=Xe>=l0?Xe-l0:0;while(--Ol);Ol=l0,Wp=Ol;do Xe=ie.prev[--Wp],ie.prev[Wp]=Xe>=l0?Xe-l0:0;while(--Ol)};let Jg=(ie,Ol,Xe)=>(Ol<<ie.hash_shift^Xe)&ie.hash_mask;const U1=ie=>{const Ol=ie.state;let Xe=Ol.pending;Xe>ie.avail_out&&(Xe=ie.avail_out),Xe!==0&&(ie.output.set(Ol.pending_buf.subarray(Ol.pending_out,Ol.pending_out+Xe),ie.next_out),ie.next_out+=Xe,Ol.pending_out+=Xe,ie.total_out+=Xe,ie.avail_out-=Xe,Ol.pending-=Xe,Ol.pending===0&&(Ol.pending_out=0))},eg=(ie,Ol)=>{Vl(ie,ie.block_start>=0?ie.block_start:-1,ie.strstart-ie.block_start,Ol),ie.block_start=ie.strstart,U1(ie.strm)},o1=(ie,Ol)=>{ie.pending_buf[ie.pending++]=Ol},qy=(ie,Ol)=>{ie.pending_buf[ie.pending++]=Ol>>>8&255,ie.pending_buf[ie.pending++]=Ol&255},Ey=(ie,Ol,Xe,Wp)=>{let l0=ie.avail_in;return l0>Wp&&(l0=Wp),l0===0?0:(ie.avail_in-=l0,Ol.set(ie.input.subarray(ie.next_in,ie.next_in+l0),Xe),ie.state.wrap===1?ie.adler=Bp(ie.adler,Ol,l0,Xe):ie.state.wrap===2&&(ie.adler=Np(ie.adler,Ol,l0,Xe)),ie.next_in+=l0,ie.total_in+=l0,l0)},v2=(ie,Ol)=>{let Xe=ie.max_chain_length,Wp=ie.strstart,l0,S0,hm=ie.prev_length,am=ie.nice_match;const av=ie.strstart>ie.w_size-Ov?ie.strstart-(ie.w_size-Ov):0,q0=ie.window,um=ie.w_mask,l1=ie.prev,qm=ie.strstart+wv;let Im=q0[Wp+hm-1],C1=q0[Wp+hm];ie.prev_length>=ie.good_match&&(Xe>>=2),am>ie.lookahead&&(am=ie.lookahead);do if(l0=Ol,!(q0[l0+hm]!==C1||q0[l0+hm-1]!==Im||q0[l0]!==q0[Wp]||q0[++l0]!==q0[Wp+1])){Wp+=2,l0++;do;while(q0[++Wp]===q0[++l0]&&q0[++Wp]===q0[++l0]&&q0[++Wp]===q0[++l0]&&q0[++Wp]===q0[++l0]&&q0[++Wp]===q0[++l0]&&q0[++Wp]===q0[++l0]&&q0[++Wp]===q0[++l0]&&q0[++Wp]===q0[++l0]&&Wp<qm);if(S0=wv-(qm-Wp),Wp=qm-wv,S0>hm){if(ie.match_start=Ol,hm=S0,S0>=am)break;Im=q0[Wp+hm-1],C1=q0[Wp+hm]}}while((Ol=l1[Ol&um])>av&&--Xe!==0);return hm<=ie.lookahead?hm:ie.lookahead},u_=ie=>{const Ol=ie.w_size;let Xe,Wp,l0;do{if(Wp=ie.window_size-ie.lookahead-ie.strstart,ie.strstart>=Ol+(Ol-Ov)&&(ie.window.set(ie.window.subarray(Ol,Ol+Ol-Wp),0),ie.match_start-=Ol,ie.strstart-=Ol,ie.block_start-=Ol,ie.insert>ie.strstart&&(ie.insert=ie.strstart),Vy(ie),Wp+=Ol),ie.strm.avail_in===0)break;if(Xe=Ey(ie.strm,ie.window,ie.strstart+ie.lookahead,Wp),ie.lookahead+=Xe,ie.lookahead+ie.insert>=Vm)for(l0=ie.strstart-ie.insert,ie.ins_h=ie.window[l0],ie.ins_h=Jg(ie,ie.ins_h,ie.window[l0+1]);ie.insert&&(ie.ins_h=Jg(ie,ie.ins_h,ie.window[l0+Vm-1]),ie.prev[l0&ie.w_mask]=ie.head[ie.ins_h],ie.head[ie.ins_h]=l0,l0++,ie.insert--,!(ie.lookahead+ie.insert<Vm)););}while(ie.lookahead<Ov&&ie.strm.avail_in!==0)},g2=(ie,Ol)=>{let Xe=ie.pending_buf_size-5>ie.w_size?ie.w_size:ie.pending_buf_size-5,Wp,l0,S0,hm=0,am=ie.strm.avail_in;do{if(Wp=65535,S0=ie.bi_valid+42>>3,ie.strm.avail_out<S0||(S0=ie.strm.avail_out-S0,l0=ie.strstart-ie.block_start,Wp>l0+ie.strm.avail_in&&(Wp=l0+ie.strm.avail_in),Wp>S0&&(Wp=S0),Wp<Xe&&(Wp===0&&Ol!==ev||Ol===Pm||Wp!==l0+ie.strm.avail_in)))break;hm=Ol===ev&&Wp===l0+ie.strm.avail_in?1:0,d0(ie,0,0,hm),ie.pending_buf[ie.pending-4]=Wp,ie.pending_buf[ie.pending-3]=Wp>>8,ie.pending_buf[ie.pending-2]=~Wp,ie.pending_buf[ie.pending-1]=~Wp>>8,U1(ie.strm),l0&&(l0>Wp&&(l0=Wp),ie.strm.output.set(ie.window.subarray(ie.block_start,ie.block_start+l0),ie.strm.next_out),ie.strm.next_out+=l0,ie.strm.avail_out-=l0,ie.strm.total_out+=l0,ie.block_start+=l0,Wp-=l0),Wp&&(Ey(ie.strm,ie.strm.output,ie.strm.next_out,Wp),ie.strm.next_out+=Wp,ie.strm.avail_out-=Wp,ie.strm.total_out+=Wp)}while(hm===0);return am-=ie.strm.avail_in,am&&(am>=ie.w_size?(ie.matches=2,ie.window.set(ie.strm.input.subarray(ie.strm.next_in-ie.w_size,ie.strm.next_in),0),ie.strstart=ie.w_size,ie.insert=ie.strstart):(ie.window_size-ie.strstart<=am&&(ie.strstart-=ie.w_size,ie.window.set(ie.window.subarray(ie.w_size,ie.w_size+ie.strstart),0),ie.matches<2&&ie.matches++,ie.insert>ie.strstart&&(ie.insert=ie.strstart)),ie.window.set(ie.strm.input.subarray(ie.strm.next_in-am,ie.strm.next_in),ie.strstart),ie.strstart+=am,ie.insert+=am>ie.w_size-ie.insert?ie.w_size-ie.insert:am),ie.block_start=ie.strstart),ie.high_water<ie.strstart&&(ie.high_water=ie.strstart),hm?j1:Ol!==Pm&&Ol!==ev&&ie.strm.avail_in===0&&ie.strstart===ie.block_start?O1:(S0=ie.window_size-ie.strstart,ie.strm.avail_in>S0&&ie.block_start>=ie.w_size&&(ie.block_start-=ie.w_size,ie.strstart-=ie.w_size,ie.window.set(ie.window.subarray(ie.w_size,ie.w_size+ie.strstart),0),ie.matches<2&&ie.matches++,S0+=ie.w_size,ie.insert>ie.strstart&&(ie.insert=ie.strstart)),S0>ie.strm.avail_in&&(S0=ie.strm.avail_in),S0&&(Ey(ie.strm,ie.window,ie.strstart,S0),ie.strstart+=S0,ie.insert+=S0>ie.w_size-ie.insert?ie.w_size-ie.insert:S0),ie.high_water<ie.strstart&&(ie.high_water=ie.strstart),S0=ie.bi_valid+42>>3,S0=ie.pending_buf_size-S0>65535?65535:ie.pending_buf_size-S0,Xe=S0>ie.w_size?ie.w_size:S0,l0=ie.strstart-ie.block_start,(l0>=Xe||(l0||Ol===ev)&&Ol!==Pm&&ie.strm.avail_in===0&&l0<=S0)&&(Wp=l0>S0?S0:l0,hm=Ol===ev&&ie.strm.avail_in===0&&Wp===l0?1:0,d0(ie,ie.block_start,Wp,hm),ie.block_start+=Wp,U1(ie.strm)),hm?hg:Kv)},Wy=(ie,Ol)=>{let Xe,Wp;for(;;){if(ie.lookahead<Ov){if(u_(ie),ie.lookahead<Ov&&Ol===Pm)return Kv;if(ie.lookahead===0)break}if(Xe=0,ie.lookahead>=Vm&&(ie.ins_h=Jg(ie,ie.ins_h,ie.window[ie.strstart+Vm-1]),Xe=ie.prev[ie.strstart&ie.w_mask]=ie.head[ie.ins_h],ie.head[ie.ins_h]=ie.strstart),Xe!==0&&ie.strstart-Xe<=ie.w_size-Ov&&(ie.match_length=v2(ie,Xe)),ie.match_length>=Vm)if(Wp=jp(ie,ie.strstart-ie.match_start,ie.match_length-Vm),ie.lookahead-=ie.match_length,ie.match_length<=ie.max_lazy_match&&ie.lookahead>=Vm){ie.match_length--;do ie.strstart++,ie.ins_h=Jg(ie,ie.ins_h,ie.window[ie.strstart+Vm-1]),Xe=ie.prev[ie.strstart&ie.w_mask]=ie.head[ie.ins_h],ie.head[ie.ins_h]=ie.strstart;while(--ie.match_length!==0);ie.strstart++}else ie.strstart+=ie.match_length,ie.match_length=0,ie.ins_h=ie.window[ie.strstart],ie.ins_h=Jg(ie,ie.ins_h,ie.window[ie.strstart+1]);else Wp=jp(ie,0,ie.window[ie.strstart]),ie.lookahead--,ie.strstart++;if(Wp&&(eg(ie,!1),ie.strm.avail_out===0))return Kv}return ie.insert=ie.strstart<Vm-1?ie.strstart:Vm-1,Ol===ev?(eg(ie,!0),ie.strm.avail_out===0?hg:j1):ie.sym_next&&(eg(ie,!1),ie.strm.avail_out===0)?Kv:O1},D1=(ie,Ol)=>{let Xe,Wp,l0;for(;;){if(ie.lookahead<Ov){if(u_(ie),ie.lookahead<Ov&&Ol===Pm)return Kv;if(ie.lookahead===0)break}if(Xe=0,ie.lookahead>=Vm&&(ie.ins_h=Jg(ie,ie.ins_h,ie.window[ie.strstart+Vm-1]),Xe=ie.prev[ie.strstart&ie.w_mask]=ie.head[ie.ins_h],ie.head[ie.ins_h]=ie.strstart),ie.prev_length=ie.match_length,ie.prev_match=ie.match_start,ie.match_length=Vm-1,Xe!==0&&ie.prev_length<ie.max_lazy_match&&ie.strstart-Xe<=ie.w_size-Ov&&(ie.match_length=v2(ie,Xe),ie.match_length<=5&&(ie.strategy===A1||ie.match_length===Vm&&ie.strstart-ie.match_start>4096)&&(ie.match_length=Vm-1)),ie.prev_length>=Vm&&ie.match_length<=ie.prev_length){l0=ie.strstart+ie.lookahead-Vm,Wp=jp(ie,ie.strstart-1-ie.prev_match,ie.prev_length-Vm),ie.lookahead-=ie.prev_length-1,ie.prev_length-=2;do++ie.strstart<=l0&&(ie.ins_h=Jg(ie,ie.ins_h,ie.window[ie.strstart+Vm-1]),Xe=ie.prev[ie.strstart&ie.w_mask]=ie.head[ie.ins_h],ie.head[ie.ins_h]=ie.strstart);while(--ie.prev_length!==0);if(ie.match_available=0,ie.match_length=Vm-1,ie.strstart++,Wp&&(eg(ie,!1),ie.strm.avail_out===0))return Kv}else if(ie.match_available){if(Wp=jp(ie,0,ie.window[ie.strstart-1]),Wp&&eg(ie,!1),ie.strstart++,ie.lookahead--,ie.strm.avail_out===0)return Kv}else ie.match_available=1,ie.strstart++,ie.lookahead--}return ie.match_available&&(Wp=jp(ie,0,ie.window[ie.strstart-1]),ie.match_available=0),ie.insert=ie.strstart<Vm-1?ie.strstart:Vm-1,Ol===ev?(eg(ie,!0),ie.strm.avail_out===0?hg:j1):ie.sym_next&&(eg(ie,!1),ie.strm.avail_out===0)?Kv:O1},Q2=(ie,Ol)=>{let Xe,Wp,l0,S0;const hm=ie.window;for(;;){if(ie.lookahead<=wv){if(u_(ie),ie.lookahead<=wv&&Ol===Pm)return Kv;if(ie.lookahead===0)break}if(ie.match_length=0,ie.lookahead>=Vm&&ie.strstart>0&&(l0=ie.strstart-1,Wp=hm[l0],Wp===hm[++l0]&&Wp===hm[++l0]&&Wp===hm[++l0])){S0=ie.strstart+wv;do;while(Wp===hm[++l0]&&Wp===hm[++l0]&&Wp===hm[++l0]&&Wp===hm[++l0]&&Wp===hm[++l0]&&Wp===hm[++l0]&&Wp===hm[++l0]&&Wp===hm[++l0]&&l0<S0);ie.match_length=wv-(S0-l0),ie.match_length>ie.lookahead&&(ie.match_length=ie.lookahead)}if(ie.match_length>=Vm?(Xe=jp(ie,1,ie.match_length-Vm),ie.lookahead-=ie.match_length,ie.strstart+=ie.match_length,ie.match_length=0):(Xe=jp(ie,0,ie.window[ie.strstart]),ie.lookahead--,ie.strstart++),Xe&&(eg(ie,!1),ie.strm.avail_out===0))return Kv}return ie.insert=0,Ol===ev?(eg(ie,!0),ie.strm.avail_out===0?hg:j1):ie.sym_next&&(eg(ie,!1),ie.strm.avail_out===0)?Kv:O1},jg=(ie,Ol)=>{let Xe;for(;;){if(ie.lookahead===0&&(u_(ie),ie.lookahead===0)){if(Ol===Pm)return Kv;break}if(ie.match_length=0,Xe=jp(ie,0,ie.window[ie.strstart]),ie.lookahead--,ie.strstart++,Xe&&(eg(ie,!1),ie.strm.avail_out===0))return Kv}return ie.insert=0,Ol===ev?(eg(ie,!0),ie.strm.avail_out===0?hg:j1):ie.sym_next&&(eg(ie,!1),ie.strm.avail_out===0)?Kv:O1};function dg(ie,Ol,Xe,Wp,l0){this.good_length=ie,this.max_lazy=Ol,this.nice_length=Xe,this.max_chain=Wp,this.func=l0}const Qg=[new dg(0,0,0,0,g2),new dg(4,4,8,4,Wy),new dg(4,5,16,8,Wy),new dg(4,6,32,32,Wy),new dg(4,4,16,16,D1),new dg(8,16,32,32,D1),new dg(8,16,128,128,D1),new dg(8,32,128,256,D1),new dg(32,128,258,1024,D1),new dg(32,258,258,4096,D1)],t1=ie=>{ie.window_size=2*ie.w_size,Hg(ie.head),ie.max_lazy_match=Qg[ie.level].max_lazy,ie.good_match=Qg[ie.level].good_length,ie.nice_match=Qg[ie.level].nice_length,ie.max_chain_length=Qg[ie.level].max_chain,ie.strstart=0,ie.block_start=0,ie.lookahead=0,ie.insert=0,ie.match_length=ie.prev_length=Vm-1,ie.match_available=0,ie.ins_h=0};function f_(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=o0,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(Cv*2),this.dyn_dtree=new Uint16Array((2*dv+1)*2),this.bl_tree=new Uint16Array((2*cv+1)*2),Hg(this.dyn_ltree),Hg(this.dyn_dtree),Hg(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(Lv+1),this.heap=new Uint16Array(2*ov+1),Hg(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*ov+1),Hg(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Ay=ie=>{if(!ie)return 1;const Ol=ie.state;return!Ol||Ol.strm!==ie||Ol.status!==n1&&Ol.status!==Rv&&Ol.status!==Kg&&Ol.status!==p1&&Ol.status!==P1&&Ol.status!==f1&&Ol.status!==v1&&Ol.status!==Q1?1:0},Yy=ie=>{if(Ay(ie))return Ng(ie,zv);ie.total_in=ie.total_out=0,ie.data_type=dm;const Ol=ie.state;return Ol.pending=0,Ol.pending_out=0,Ol.wrap<0&&(Ol.wrap=-Ol.wrap),Ol.status=Ol.wrap===2?Rv:Ol.wrap?n1:v1,ie.adler=Ol.wrap===2?0:1,Ol.last_flush=-2,g0(Ol),xv},Cg=ie=>{const Ol=Yy(ie);return Ol===xv&&t1(ie.state),Ol},g1=(ie,Ol)=>Ay(ie)||ie.state.wrap!==2?zv:(ie.state.gzhead=Ol,xv),h_=(ie,Ol,Xe,Wp,l0,S0)=>{if(!ie)return zv;let hm=1;if(Ol===d1&&(Ol=6),Wp<0?(hm=0,Wp=-Wp):Wp>15&&(hm=2,Wp-=16),l0<1||l0>pm||Xe!==o0||Wp<8||Wp>15||Ol<0||Ol>9||S0<0||S0>Yp||Wp===8&&hm!==1)return Ng(ie,zv);Wp===8&&(Wp=9);const am=new f_;return ie.state=am,am.strm=ie,am.status=n1,am.wrap=hm,am.gzhead=null,am.w_bits=Wp,am.w_size=1<<am.w_bits,am.w_mask=am.w_size-1,am.hash_bits=l0+7,am.hash_size=1<<am.hash_bits,am.hash_mask=am.hash_size-1,am.hash_shift=~~((am.hash_bits+Vm-1)/Vm),am.window=new Uint8Array(am.w_size*2),am.head=new Uint16Array(am.hash_size),am.prev=new Uint16Array(am.w_size),am.lit_bufsize=1<<l0+6,am.pending_buf_size=am.lit_bufsize*4,am.pending_buf=new Uint8Array(am.pending_buf_size),am.sym_buf=am.lit_bufsize,am.sym_end=(am.lit_bufsize-1)*3,am.level=Ol,am.strategy=S0,am.method=Xe,Cg(ie)},cy=(ie,Ol)=>h_(ie,Ol,o0,jm,iv,nm),ex=(ie,Ol)=>{if(Ay(ie)||Ol>h1||Ol<0)return ie?Ng(ie,zv):zv;const Xe=ie.state;if(!ie.output||ie.avail_in!==0&&!ie.input||Xe.status===Q1&&Ol!==ev)return Ng(ie,ie.avail_out===0?Jv:zv);const Wp=Xe.last_flush;if(Xe.last_flush=Ol,Xe.pending!==0){if(U1(ie),ie.avail_out===0)return Xe.last_flush=-1,xv}else if(ie.avail_in===0&&Gy(Ol)<=Gy(Wp)&&Ol!==ev)return Ng(ie,Jv);if(Xe.status===Q1&&ie.avail_in!==0)return Ng(ie,Jv);if(Xe.status===n1&&Xe.wrap===0&&(Xe.status=v1),Xe.status===n1){let l0=o0+(Xe.w_bits-8<<4)<<8,S0=-1;if(Xe.strategy>=Zv||Xe.level<2?S0=0:Xe.level<6?S0=1:Xe.level===6?S0=2:S0=3,l0|=S0<<6,Xe.strstart!==0&&(l0|=X1),l0+=31-l0%31,qy(Xe,l0),Xe.strstart!==0&&(qy(Xe,ie.adler>>>16),qy(Xe,ie.adler&65535)),ie.adler=1,Xe.status=v1,U1(ie),Xe.pending!==0)return Xe.last_flush=-1,xv}if(Xe.status===Rv){if(ie.adler=0,o1(Xe,31),o1(Xe,139),o1(Xe,8),Xe.gzhead)o1(Xe,(Xe.gzhead.text?1:0)+(Xe.gzhead.hcrc?2:0)+(Xe.gzhead.extra?4:0)+(Xe.gzhead.name?8:0)+(Xe.gzhead.comment?16:0)),o1(Xe,Xe.gzhead.time&255),o1(Xe,Xe.gzhead.time>>8&255),o1(Xe,Xe.gzhead.time>>16&255),o1(Xe,Xe.gzhead.time>>24&255),o1(Xe,Xe.level===9?2:Xe.strategy>=Zv||Xe.level<2?4:0),o1(Xe,Xe.gzhead.os&255),Xe.gzhead.extra&&Xe.gzhead.extra.length&&(o1(Xe,Xe.gzhead.extra.length&255),o1(Xe,Xe.gzhead.extra.length>>8&255)),Xe.gzhead.hcrc&&(ie.adler=Np(ie.adler,Xe.pending_buf,Xe.pending,0)),Xe.gzindex=0,Xe.status=Kg;else if(o1(Xe,0),o1(Xe,0),o1(Xe,0),o1(Xe,0),o1(Xe,0),o1(Xe,Xe.level===9?2:Xe.strategy>=Zv||Xe.level<2?4:0),o1(Xe,og),Xe.status=v1,U1(ie),Xe.pending!==0)return Xe.last_flush=-1,xv}if(Xe.status===Kg){if(Xe.gzhead.extra){let l0=Xe.pending,S0=(Xe.gzhead.extra.length&65535)-Xe.gzindex;for(;Xe.pending+S0>Xe.pending_buf_size;){let am=Xe.pending_buf_size-Xe.pending;if(Xe.pending_buf.set(Xe.gzhead.extra.subarray(Xe.gzindex,Xe.gzindex+am),Xe.pending),Xe.pending=Xe.pending_buf_size,Xe.gzhead.hcrc&&Xe.pending>l0&&(ie.adler=Np(ie.adler,Xe.pending_buf,Xe.pending-l0,l0)),Xe.gzindex+=am,U1(ie),Xe.pending!==0)return Xe.last_flush=-1,xv;l0=0,S0-=am}let hm=new Uint8Array(Xe.gzhead.extra);Xe.pending_buf.set(hm.subarray(Xe.gzindex,Xe.gzindex+S0),Xe.pending),Xe.pending+=S0,Xe.gzhead.hcrc&&Xe.pending>l0&&(ie.adler=Np(ie.adler,Xe.pending_buf,Xe.pending-l0,l0)),Xe.gzindex=0}Xe.status=p1}if(Xe.status===p1){if(Xe.gzhead.name){let l0=Xe.pending,S0;do{if(Xe.pending===Xe.pending_buf_size){if(Xe.gzhead.hcrc&&Xe.pending>l0&&(ie.adler=Np(ie.adler,Xe.pending_buf,Xe.pending-l0,l0)),U1(ie),Xe.pending!==0)return Xe.last_flush=-1,xv;l0=0}Xe.gzindex<Xe.gzhead.name.length?S0=Xe.gzhead.name.charCodeAt(Xe.gzindex++)&255:S0=0,o1(Xe,S0)}while(S0!==0);Xe.gzhead.hcrc&&Xe.pending>l0&&(ie.adler=Np(ie.adler,Xe.pending_buf,Xe.pending-l0,l0)),Xe.gzindex=0}Xe.status=P1}if(Xe.status===P1){if(Xe.gzhead.comment){let l0=Xe.pending,S0;do{if(Xe.pending===Xe.pending_buf_size){if(Xe.gzhead.hcrc&&Xe.pending>l0&&(ie.adler=Np(ie.adler,Xe.pending_buf,Xe.pending-l0,l0)),U1(ie),Xe.pending!==0)return Xe.last_flush=-1,xv;l0=0}Xe.gzindex<Xe.gzhead.comment.length?S0=Xe.gzhead.comment.charCodeAt(Xe.gzindex++)&255:S0=0,o1(Xe,S0)}while(S0!==0);Xe.gzhead.hcrc&&Xe.pending>l0&&(ie.adler=Np(ie.adler,Xe.pending_buf,Xe.pending-l0,l0))}Xe.status=f1}if(Xe.status===f1){if(Xe.gzhead.hcrc){if(Xe.pending+2>Xe.pending_buf_size&&(U1(ie),Xe.pending!==0))return Xe.last_flush=-1,xv;o1(Xe,ie.adler&255),o1(Xe,ie.adler>>8&255),ie.adler=0}if(Xe.status=v1,U1(ie),Xe.pending!==0)return Xe.last_flush=-1,xv}if(ie.avail_in!==0||Xe.lookahead!==0||Ol!==Pm&&Xe.status!==Q1){let l0=Xe.level===0?g2(Xe,Ol):Xe.strategy===Zv?jg(Xe,Ol):Xe.strategy===u1?Q2(Xe,Ol):Qg[Xe.level].func(Xe,Ol);if((l0===hg||l0===j1)&&(Xe.status=Q1),l0===Kv||l0===hg)return ie.avail_out===0&&(Xe.last_flush=-1),xv;if(l0===O1&&(Ol===Cm?K0(Xe):Ol!==h1&&(d0(Xe,0,0,!1),Ol===Fm&&(Hg(Xe.head),Xe.lookahead===0&&(Xe.strstart=0,Xe.block_start=0,Xe.insert=0))),U1(ie),ie.avail_out===0))return Xe.last_flush=-1,xv}return Ol!==ev?xv:Xe.wrap<=0?gv:(Xe.wrap===2?(o1(Xe,ie.adler&255),o1(Xe,ie.adler>>8&255),o1(Xe,ie.adler>>16&255),o1(Xe,ie.adler>>24&255),o1(Xe,ie.total_in&255),o1(Xe,ie.total_in>>8&255),o1(Xe,ie.total_in>>16&255),o1(Xe,ie.total_in>>24&255)):(qy(Xe,ie.adler>>>16),qy(Xe,ie.adler&65535)),U1(ie),Xe.wrap>0&&(Xe.wrap=-Xe.wrap),Xe.pending!==0?xv:gv)},V_=ie=>{if(Ay(ie))return zv;const Ol=ie.state.status;return ie.state=null,Ol===v1?Ng(ie,a1):xv},Xx=(ie,Ol)=>{let Xe=Ol.length;if(Ay(ie))return zv;const Wp=ie.state,l0=Wp.wrap;if(l0===2||l0===1&&Wp.status!==n1||Wp.lookahead)return zv;if(l0===1&&(ie.adler=Bp(ie.adler,Ol,Xe,0)),Wp.wrap=0,Xe>=Wp.w_size){l0===0&&(Hg(Wp.head),Wp.strstart=0,Wp.block_start=0,Wp.insert=0);let av=new Uint8Array(Wp.w_size);av.set(Ol.subarray(Xe-Wp.w_size,Xe),0),Ol=av,Xe=Wp.w_size}const S0=ie.avail_in,hm=ie.next_in,am=ie.input;for(ie.avail_in=Xe,ie.next_in=0,ie.input=Ol,u_(Wp);Wp.lookahead>=Vm;){let av=Wp.strstart,q0=Wp.lookahead-(Vm-1);do Wp.ins_h=Jg(Wp,Wp.ins_h,Wp.window[av+Vm-1]),Wp.prev[av&Wp.w_mask]=Wp.head[Wp.ins_h],Wp.head[Wp.ins_h]=av,av++;while(--q0);Wp.strstart=av,Wp.lookahead=Vm-1,u_(Wp)}return Wp.strstart+=Wp.lookahead,Wp.block_start=Wp.strstart,Wp.insert=Wp.lookahead,Wp.lookahead=0,Wp.match_length=Wp.prev_length=Vm-1,Wp.match_available=0,ie.next_in=hm,ie.input=am,ie.avail_in=S0,Wp.wrap=l0,xv};var y2=cy,_2=h_,Gg=Cg,$1=Yy,Xy=g1,q_=ex,$y=V_,$x=Xx,tx="pako deflate (from Nodeca project)",Cy={deflateInit:y2,deflateInit2:_2,deflateReset:Gg,deflateResetKeep:$1,deflateSetHeader:Xy,deflate:q_,deflateEnd:$y,deflateSetDictionary:$x,deflateInfo:tx};const W_=(ie,Ol)=>Object.prototype.hasOwnProperty.call(ie,Ol);var d_=function(ie){const Ol=Array.prototype.slice.call(arguments,1);for(;Ol.length;){const Xe=Ol.shift();if(Xe){if(typeof Xe!="object")throw new TypeError(Xe+"must be non-object");for(const Wp in Xe)W_(Xe,Wp)&&(ie[Wp]=Xe[Wp])}}return ie},Zx=ie=>{let Ol=0;for(let Wp=0,l0=ie.length;Wp<l0;Wp++)Ol+=ie[Wp].length;const Xe=new Uint8Array(Ol);for(let Wp=0,l0=0,S0=ie.length;Wp<S0;Wp++){let hm=ie[Wp];Xe.set(hm,l0),l0+=hm.length}return Xe},p_={assign:d_,flattenChunks:Zx};let rx=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{rx=!1}const m_=new Uint8Array(256);for(let ie=0;ie<256;ie++)m_[ie]=ie>=252?6:ie>=248?5:ie>=240?4:ie>=224?3:ie>=192?2:1;m_[254]=m_[254]=1;var x2=ie=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(ie);let Ol,Xe,Wp,l0,S0,hm=ie.length,am=0;for(l0=0;l0<hm;l0++)Xe=ie.charCodeAt(l0),(Xe&64512)===55296&&l0+1<hm&&(Wp=ie.charCodeAt(l0+1),(Wp&64512)===56320&&(Xe=65536+(Xe-55296<<10)+(Wp-56320),l0++)),am+=Xe<128?1:Xe<2048?2:Xe<65536?3:4;for(Ol=new Uint8Array(am),S0=0,l0=0;S0<am;l0++)Xe=ie.charCodeAt(l0),(Xe&64512)===55296&&l0+1<hm&&(Wp=ie.charCodeAt(l0+1),(Wp&64512)===56320&&(Xe=65536+(Xe-55296<<10)+(Wp-56320),l0++)),Xe<128?Ol[S0++]=Xe:Xe<2048?(Ol[S0++]=192|Xe>>>6,Ol[S0++]=128|Xe&63):Xe<65536?(Ol[S0++]=224|Xe>>>12,Ol[S0++]=128|Xe>>>6&63,Ol[S0++]=128|Xe&63):(Ol[S0++]=240|Xe>>>18,Ol[S0++]=128|Xe>>>12&63,Ol[S0++]=128|Xe>>>6&63,Ol[S0++]=128|Xe&63);return Ol};const ax=(ie,Ol)=>{if(Ol<65534&&ie.subarray&&rx)return String.fromCharCode.apply(null,ie.length===Ol?ie:ie.subarray(0,Ol));let Xe="";for(let Wp=0;Wp<Ol;Wp++)Xe+=String.fromCharCode(ie[Wp]);return Xe};var Xb=(ie,Ol)=>{const Xe=Ol||ie.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(ie.subarray(0,Ol));let Wp,l0;const S0=new Array(Xe*2);for(l0=0,Wp=0;Wp<Xe;){let hm=ie[Wp++];if(hm<128){S0[l0++]=hm;continue}let am=m_[hm];if(am>4){S0[l0++]=65533,Wp+=am-1;continue}for(hm&=am===2?31:am===3?15:7;am>1&&Wp<Xe;)hm=hm<<6|ie[Wp++]&63,am--;if(am>1){S0[l0++]=65533;continue}hm<65536?S0[l0++]=hm:(hm-=65536,S0[l0++]=55296|hm>>10&1023,S0[l0++]=56320|hm&1023)}return ax(S0,l0)},$b=(ie,Ol)=>{Ol=Ol||ie.length,Ol>ie.length&&(Ol=ie.length);let Xe=Ol-1;for(;Xe>=0&&(ie[Xe]&192)===128;)Xe--;return Xe<0||Xe===0?Ol:Xe+m_[ie[Xe]]>Ol?Xe:Ol},v_={string2buf:x2,buf2string:Xb,utf8border:$b};function Zb(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var nx=Zb;const Kx=Object.prototype.toString,{Z_NO_FLUSH:uy,Z_SYNC_FLUSH:Y_,Z_FULL_FLUSH:ix,Z_FINISH:X_,Z_OK:g_,Z_STREAM_END:sx,Z_DEFAULT_COMPRESSION:Zy,Z_DEFAULT_STRATEGY:b2,Z_DEFLATED:Jx}=Ke;function Ry(ie){this.options=p_.assign({level:Zy,method:Jx,chunkSize:16384,windowBits:15,memLevel:8,strategy:b2},ie||{});let Ol=this.options;Ol.raw&&Ol.windowBits>0?Ol.windowBits=-Ol.windowBits:Ol.gzip&&Ol.windowBits>0&&Ol.windowBits<16&&(Ol.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new nx,this.strm.avail_out=0;let Xe=Cy.deflateInit2(this.strm,Ol.level,Ol.method,Ol.windowBits,Ol.memLevel,Ol.strategy);if(Xe!==g_)throw new Error(V0[Xe]);if(Ol.header&&Cy.deflateSetHeader(this.strm,Ol.header),Ol.dictionary){let Wp;if(typeof Ol.dictionary=="string"?Wp=v_.string2buf(Ol.dictionary):Kx.call(Ol.dictionary)==="[object ArrayBuffer]"?Wp=new Uint8Array(Ol.dictionary):Wp=Ol.dictionary,Xe=Cy.deflateSetDictionary(this.strm,Wp),Xe!==g_)throw new Error(V0[Xe]);this._dict_set=!0}}Ry.prototype.push=function(ie,Ol){const Xe=this.strm,Wp=this.options.chunkSize;let l0,S0;if(this.ended)return!1;for(Ol===~~Ol?S0=Ol:S0=Ol===!0?X_:uy,typeof ie=="string"?Xe.input=v_.string2buf(ie):Kx.call(ie)==="[object ArrayBuffer]"?Xe.input=new Uint8Array(ie):Xe.input=ie,Xe.next_in=0,Xe.avail_in=Xe.input.length;;){if(Xe.avail_out===0&&(Xe.output=new Uint8Array(Wp),Xe.next_out=0,Xe.avail_out=Wp),(S0===Y_||S0===ix)&&Xe.avail_out<=6){this.onData(Xe.output.subarray(0,Xe.next_out)),Xe.avail_out=0;continue}if(l0=Cy.deflate(Xe,S0),l0===sx)return Xe.next_out>0&&this.onData(Xe.output.subarray(0,Xe.next_out)),l0=Cy.deflateEnd(this.strm),this.onEnd(l0),this.ended=!0,l0===g_;if(Xe.avail_out===0){this.onData(Xe.output);continue}if(S0>0&&Xe.next_out>0){this.onData(Xe.output.subarray(0,Xe.next_out)),Xe.avail_out=0;continue}if(Xe.avail_in===0)break}return!0},Ry.prototype.onData=function(ie){this.chunks.push(ie)},Ry.prototype.onEnd=function(ie){ie===g_&&(this.result=p_.flattenChunks(this.chunks)),this.chunks=[],this.err=ie,this.msg=this.strm.msg};function fy(ie,Ol){const Xe=new Ry(Ol);if(Xe.push(ie,!0),Xe.err)throw Xe.msg||V0[Xe.err];return Xe.result}function Qx(ie,Ol){return Ol=Ol||{},Ol.raw=!0,fy(ie,Ol)}function ox(ie,Ol){return Ol=Ol||{},Ol.gzip=!0,fy(ie,Ol)}var lx=Ry,eb=fy,tb=Qx,rb=ox,cx={Deflate:lx,deflate:eb,deflateRaw:tb,gzip:rb};const Ly=16209,Kb=16191;var ux=function(ie,Ol){let Xe,Wp,l0,S0,hm,am,av,q0,um,l1,qm,Im,C1,I1,Yv,Pv,Bv,Qm,Dv,F1,Qv,jv,y1,bv;const Nv=ie.state;Xe=ie.next_in,y1=ie.input,Wp=Xe+(ie.avail_in-5),l0=ie.next_out,bv=ie.output,S0=l0-(Ol-ie.avail_out),hm=l0+(ie.avail_out-257),am=Nv.dmax,av=Nv.wsize,q0=Nv.whave,um=Nv.wnext,l1=Nv.window,qm=Nv.hold,Im=Nv.bits,C1=Nv.lencode,I1=Nv.distcode,Yv=(1<<Nv.lenbits)-1,Pv=(1<<Nv.distbits)-1;e:do{Im<15&&(qm+=y1[Xe++]<<Im,Im+=8,qm+=y1[Xe++]<<Im,Im+=8),Bv=C1[qm&Yv];t:for(;;){if(Qm=Bv>>>24,qm>>>=Qm,Im-=Qm,Qm=Bv>>>16&255,Qm===0)bv[l0++]=Bv&65535;else if(Qm&16){Dv=Bv&65535,Qm&=15,Qm&&(Im<Qm&&(qm+=y1[Xe++]<<Im,Im+=8),Dv+=qm&(1<<Qm)-1,qm>>>=Qm,Im-=Qm),Im<15&&(qm+=y1[Xe++]<<Im,Im+=8,qm+=y1[Xe++]<<Im,Im+=8),Bv=I1[qm&Pv];r:for(;;){if(Qm=Bv>>>24,qm>>>=Qm,Im-=Qm,Qm=Bv>>>16&255,Qm&16){if(F1=Bv&65535,Qm&=15,Im<Qm&&(qm+=y1[Xe++]<<Im,Im+=8,Im<Qm&&(qm+=y1[Xe++]<<Im,Im+=8)),F1+=qm&(1<<Qm)-1,F1>am){ie.msg="invalid distance too far back",Nv.mode=Ly;break e}if(qm>>>=Qm,Im-=Qm,Qm=l0-S0,F1>Qm){if(Qm=F1-Qm,Qm>q0&&Nv.sane){ie.msg="invalid distance too far back",Nv.mode=Ly;break e}if(Qv=0,jv=l1,um===0){if(Qv+=av-Qm,Qm<Dv){Dv-=Qm;do bv[l0++]=l1[Qv++];while(--Qm);Qv=l0-F1,jv=bv}}else if(um<Qm){if(Qv+=av+um-Qm,Qm-=um,Qm<Dv){Dv-=Qm;do bv[l0++]=l1[Qv++];while(--Qm);if(Qv=0,um<Dv){Qm=um,Dv-=Qm;do bv[l0++]=l1[Qv++];while(--Qm);Qv=l0-F1,jv=bv}}}else if(Qv+=um-Qm,Qm<Dv){Dv-=Qm;do bv[l0++]=l1[Qv++];while(--Qm);Qv=l0-F1,jv=bv}for(;Dv>2;)bv[l0++]=jv[Qv++],bv[l0++]=jv[Qv++],bv[l0++]=jv[Qv++],Dv-=3;Dv&&(bv[l0++]=jv[Qv++],Dv>1&&(bv[l0++]=jv[Qv++]))}else{Qv=l0-F1;do bv[l0++]=bv[Qv++],bv[l0++]=bv[Qv++],bv[l0++]=bv[Qv++],Dv-=3;while(Dv>2);Dv&&(bv[l0++]=bv[Qv++],Dv>1&&(bv[l0++]=bv[Qv++]))}}else if(Qm&64){ie.msg="invalid distance code",Nv.mode=Ly;break e}else{Bv=I1[(Bv&65535)+(qm&(1<<Qm)-1)];continue r}break}}else if(Qm&64)if(Qm&32){Nv.mode=Kb;break e}else{ie.msg="invalid literal/length code",Nv.mode=Ly;break e}else{Bv=C1[(Bv&65535)+(qm&(1<<Qm)-1)];continue t}break}}while(Xe<Wp&&l0<hm);Dv=Im>>3,Xe-=Dv,Im-=Dv<<3,qm&=(1<<Im)-1,ie.next_in=Xe,ie.next_out=l0,ie.avail_in=Xe<Wp?5+(Wp-Xe):5-(Xe-Wp),ie.avail_out=l0<hm?257+(hm-l0):257-(l0-hm),Nv.hold=qm,Nv.bits=Im};const Dy=15,y_=852,$_=592,w2=0,ky=1,ab=2,Jb=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Qb=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),nb=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),ib=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var hy=(ie,Ol,Xe,Wp,l0,S0,hm,am)=>{const av=am.bits;let q0=0,um=0,l1=0,qm=0,Im=0,C1=0,I1=0,Yv=0,Pv=0,Bv=0,Qm,Dv,F1,Qv,jv,y1=null,bv;const Nv=new Uint16Array(Dy+1),ug=new Uint16Array(Dy+1);let Tg=null,o_,R_,Ug;for(q0=0;q0<=Dy;q0++)Nv[q0]=0;for(um=0;um<Wp;um++)Nv[Ol[Xe+um]]++;for(Im=av,qm=Dy;qm>=1&&Nv[qm]===0;qm--);if(Im>qm&&(Im=qm),qm===0)return l0[S0++]=1<<24|64<<16|0,l0[S0++]=1<<24|64<<16|0,am.bits=1,0;for(l1=1;l1<qm&&Nv[l1]===0;l1++);for(Im<l1&&(Im=l1),Yv=1,q0=1;q0<=Dy;q0++)if(Yv<<=1,Yv-=Nv[q0],Yv<0)return-1;if(Yv>0&&(ie===w2||qm!==1))return-1;for(ug[1]=0,q0=1;q0<Dy;q0++)ug[q0+1]=ug[q0]+Nv[q0];for(um=0;um<Wp;um++)Ol[Xe+um]!==0&&(hm[ug[Ol[Xe+um]]++]=um);if(ie===w2?(y1=Tg=hm,bv=20):ie===ky?(y1=Jb,Tg=Qb,bv=257):(y1=nb,Tg=ib,bv=0),Bv=0,um=0,q0=l1,jv=S0,C1=Im,I1=0,F1=-1,Pv=1<<Im,Qv=Pv-1,ie===ky&&Pv>y_||ie===ab&&Pv>$_)return 1;for(;;){o_=q0-I1,hm[um]+1<bv?(R_=0,Ug=hm[um]):hm[um]>=bv?(R_=Tg[hm[um]-bv],Ug=y1[hm[um]-bv]):(R_=96,Ug=0),Qm=1<<q0-I1,Dv=1<<C1,l1=Dv;do Dv-=Qm,l0[jv+(Bv>>I1)+Dv]=o_<<24|R_<<16|Ug|0;while(Dv!==0);for(Qm=1<<q0-1;Bv&Qm;)Qm>>=1;if(Qm!==0?(Bv&=Qm-1,Bv+=Qm):Bv=0,um++,--Nv[q0]===0){if(q0===qm)break;q0=Ol[Xe+hm[um]]}if(q0>Im&&(Bv&Qv)!==F1){for(I1===0&&(I1=Im),jv+=l1,C1=q0-I1,Yv=1<<C1;C1+I1<qm&&(Yv-=Nv[C1+I1],!(Yv<=0));)C1++,Yv<<=1;if(Pv+=1<<C1,ie===ky&&Pv>y_||ie===ab&&Pv>$_)return 1;F1=Bv&Qv,l0[F1]=Im<<24|C1<<16|jv-S0|0}}return Bv!==0&&(l0[jv+Bv]=q0-I1<<24|64<<16|0),am.bits=Im,0};const Z_=0,sb=1,__=2,{Z_FINISH:fx,Z_BLOCK:ob,Z_TREES:Ky,Z_OK:zg,Z_STREAM_END:x_,Z_NEED_DICT:M2,Z_STREAM_ERROR:Pg,Z_DATA_ERROR:Jy,Z_MEM_ERROR:hx,Z_BUF_ERROR:e3,Z_DEFLATED:lb}=Ke,Qy=16180,ng=16181,b_=16182,S2=16183,dx=16184,px=16185,mx=16186,K_=16187,e_=16188,dy=16189,Ny=16190,wg=16191,J_=16192,vx=16193,ey=16194,t_=16195,T2=16196,E2=16197,py=16198,Q_=16199,e2=16200,gx=16201,cb=16202,ub=16203,fb=16204,yx=16205,t2=16206,A2=16207,Og=16208,x1=16209,Rg=16210,zy=16211,C2=852,r2=592,R2=15,a2=ie=>(ie>>>24&255)+(ie>>>8&65280)+((ie&65280)<<8)+((ie&255)<<24);function r_(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Py=ie=>{if(!ie)return 1;const Ol=ie.state;return!Ol||Ol.strm!==ie||Ol.mode<Qy||Ol.mode>zy?1:0},n2=ie=>{if(Py(ie))return Pg;const Ol=ie.state;return ie.total_in=ie.total_out=Ol.total=0,ie.msg="",Ol.wrap&&(ie.adler=Ol.wrap&1),Ol.mode=Qy,Ol.last=0,Ol.havedict=0,Ol.flags=-1,Ol.dmax=32768,Ol.head=null,Ol.hold=0,Ol.bits=0,Ol.lencode=Ol.lendyn=new Int32Array(C2),Ol.distcode=Ol.distdyn=new Int32Array(r2),Ol.sane=1,Ol.back=-1,zg},a_=ie=>{if(Py(ie))return Pg;const Ol=ie.state;return Ol.wsize=0,Ol.whave=0,Ol.wnext=0,n2(ie)},_x=(ie,Ol)=>{let Xe;if(Py(ie))return Pg;const Wp=ie.state;return Ol<0?(Xe=0,Ol=-Ol):(Xe=(Ol>>4)+5,Ol<48&&(Ol&=15)),Ol&&(Ol<8||Ol>15)?Pg:(Wp.window!==null&&Wp.wbits!==Ol&&(Wp.window=null),Wp.wrap=Xe,Wp.wbits=Ol,a_(ie))},Mg=(ie,Ol)=>{if(!ie)return Pg;const Xe=new r_;ie.state=Xe,Xe.strm=ie,Xe.window=null,Xe.mode=Qy;const Wp=_x(ie,Ol);return Wp!==zg&&(ie.state=null),Wp},L2=ie=>Mg(ie,R2);let ty=!0,D2,w_;const n_=ie=>{if(ty){D2=new Int32Array(512),w_=new Int32Array(32);let Ol=0;for(;Ol<144;)ie.lens[Ol++]=8;for(;Ol<256;)ie.lens[Ol++]=9;for(;Ol<280;)ie.lens[Ol++]=7;for(;Ol<288;)ie.lens[Ol++]=8;for(hy(sb,ie.lens,0,288,D2,0,ie.work,{bits:9}),Ol=0;Ol<32;)ie.lens[Ol++]=5;hy(__,ie.lens,0,32,w_,0,ie.work,{bits:5}),ty=!1}ie.lencode=D2,ie.lenbits=9,ie.distcode=w_,ie.distbits=5},k2=(ie,Ol,Xe,Wp)=>{let l0;const S0=ie.state;return S0.window===null&&(S0.wsize=1<<S0.wbits,S0.wnext=0,S0.whave=0,S0.window=new Uint8Array(S0.wsize)),Wp>=S0.wsize?(S0.window.set(Ol.subarray(Xe-S0.wsize,Xe),0),S0.wnext=0,S0.whave=S0.wsize):(l0=S0.wsize-S0.wnext,l0>Wp&&(l0=Wp),S0.window.set(Ol.subarray(Xe-Wp,Xe-Wp+l0),S0.wnext),Wp-=l0,Wp?(S0.window.set(Ol.subarray(Xe-Wp,Xe),0),S0.wnext=Wp,S0.whave=S0.wsize):(S0.wnext+=l0,S0.wnext===S0.wsize&&(S0.wnext=0),S0.whave<S0.wsize&&(S0.whave+=l0))),0},hb=(ie,Ol)=>{let Xe,Wp,l0,S0,hm,am,av,q0,um,l1,qm,Im,C1,I1,Yv=0,Pv,Bv,Qm,Dv,F1,Qv,jv,y1;const bv=new Uint8Array(4);let Nv,ug;const Tg=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Py(ie)||!ie.output||!ie.input&&ie.avail_in!==0)return Pg;Xe=ie.state,Xe.mode===wg&&(Xe.mode=J_),hm=ie.next_out,l0=ie.output,av=ie.avail_out,S0=ie.next_in,Wp=ie.input,am=ie.avail_in,q0=Xe.hold,um=Xe.bits,l1=am,qm=av,y1=zg;e:for(;;)switch(Xe.mode){case Qy:if(Xe.wrap===0){Xe.mode=J_;break}for(;um<16;){if(am===0)break e;am--,q0+=Wp[S0++]<<um,um+=8}if(Xe.wrap&2&&q0===35615){Xe.wbits===0&&(Xe.wbits=15),Xe.check=0,bv[0]=q0&255,bv[1]=q0>>>8&255,Xe.check=Np(Xe.check,bv,2,0),q0=0,um=0,Xe.mode=ng;break}if(Xe.head&&(Xe.head.done=!1),!(Xe.wrap&1)||(((q0&255)<<8)+(q0>>8))%31){ie.msg="incorrect header check",Xe.mode=x1;break}if((q0&15)!==lb){ie.msg="unknown compression method",Xe.mode=x1;break}if(q0>>>=4,um-=4,jv=(q0&15)+8,Xe.wbits===0&&(Xe.wbits=jv),jv>15||jv>Xe.wbits){ie.msg="invalid window size",Xe.mode=x1;break}Xe.dmax=1<<Xe.wbits,Xe.flags=0,ie.adler=Xe.check=1,Xe.mode=q0&512?dy:wg,q0=0,um=0;break;case ng:for(;um<16;){if(am===0)break e;am--,q0+=Wp[S0++]<<um,um+=8}if(Xe.flags=q0,(Xe.flags&255)!==lb){ie.msg="unknown compression method",Xe.mode=x1;break}if(Xe.flags&57344){ie.msg="unknown header flags set",Xe.mode=x1;break}Xe.head&&(Xe.head.text=q0>>8&1),Xe.flags&512&&Xe.wrap&4&&(bv[0]=q0&255,bv[1]=q0>>>8&255,Xe.check=Np(Xe.check,bv,2,0)),q0=0,um=0,Xe.mode=b_;case b_:for(;um<32;){if(am===0)break e;am--,q0+=Wp[S0++]<<um,um+=8}Xe.head&&(Xe.head.time=q0),Xe.flags&512&&Xe.wrap&4&&(bv[0]=q0&255,bv[1]=q0>>>8&255,bv[2]=q0>>>16&255,bv[3]=q0>>>24&255,Xe.check=Np(Xe.check,bv,4,0)),q0=0,um=0,Xe.mode=S2;case S2:for(;um<16;){if(am===0)break e;am--,q0+=Wp[S0++]<<um,um+=8}Xe.head&&(Xe.head.xflags=q0&255,Xe.head.os=q0>>8),Xe.flags&512&&Xe.wrap&4&&(bv[0]=q0&255,bv[1]=q0>>>8&255,Xe.check=Np(Xe.check,bv,2,0)),q0=0,um=0,Xe.mode=dx;case dx:if(Xe.flags&1024){for(;um<16;){if(am===0)break e;am--,q0+=Wp[S0++]<<um,um+=8}Xe.length=q0,Xe.head&&(Xe.head.extra_len=q0),Xe.flags&512&&Xe.wrap&4&&(bv[0]=q0&255,bv[1]=q0>>>8&255,Xe.check=Np(Xe.check,bv,2,0)),q0=0,um=0}else Xe.head&&(Xe.head.extra=null);Xe.mode=px;case px:if(Xe.flags&1024&&(Im=Xe.length,Im>am&&(Im=am),Im&&(Xe.head&&(jv=Xe.head.extra_len-Xe.length,Xe.head.extra||(Xe.head.extra=new Uint8Array(Xe.head.extra_len)),Xe.head.extra.set(Wp.subarray(S0,S0+Im),jv)),Xe.flags&512&&Xe.wrap&4&&(Xe.check=Np(Xe.check,Wp,Im,S0)),am-=Im,S0+=Im,Xe.length-=Im),Xe.length))break e;Xe.length=0,Xe.mode=mx;case mx:if(Xe.flags&2048){if(am===0)break e;Im=0;do jv=Wp[S0+Im++],Xe.head&&jv&&Xe.length<65536&&(Xe.head.name+=String.fromCharCode(jv));while(jv&&Im<am);if(Xe.flags&512&&Xe.wrap&4&&(Xe.check=Np(Xe.check,Wp,Im,S0)),am-=Im,S0+=Im,jv)break e}else Xe.head&&(Xe.head.name=null);Xe.length=0,Xe.mode=K_;case K_:if(Xe.flags&4096){if(am===0)break e;Im=0;do jv=Wp[S0+Im++],Xe.head&&jv&&Xe.length<65536&&(Xe.head.comment+=String.fromCharCode(jv));while(jv&&Im<am);if(Xe.flags&512&&Xe.wrap&4&&(Xe.check=Np(Xe.check,Wp,Im,S0)),am-=Im,S0+=Im,jv)break e}else Xe.head&&(Xe.head.comment=null);Xe.mode=e_;case e_:if(Xe.flags&512){for(;um<16;){if(am===0)break e;am--,q0+=Wp[S0++]<<um,um+=8}if(Xe.wrap&4&&q0!==(Xe.check&65535)){ie.msg="header crc mismatch",Xe.mode=x1;break}q0=0,um=0}Xe.head&&(Xe.head.hcrc=Xe.flags>>9&1,Xe.head.done=!0),ie.adler=Xe.check=0,Xe.mode=wg;break;case dy:for(;um<32;){if(am===0)break e;am--,q0+=Wp[S0++]<<um,um+=8}ie.adler=Xe.check=a2(q0),q0=0,um=0,Xe.mode=Ny;case Ny:if(Xe.havedict===0)return ie.next_out=hm,ie.avail_out=av,ie.next_in=S0,ie.avail_in=am,Xe.hold=q0,Xe.bits=um,M2;ie.adler=Xe.check=1,Xe.mode=wg;case wg:if(Ol===ob||Ol===Ky)break e;case J_:if(Xe.last){q0>>>=um&7,um-=um&7,Xe.mode=t2;break}for(;um<3;){if(am===0)break e;am--,q0+=Wp[S0++]<<um,um+=8}switch(Xe.last=q0&1,q0>>>=1,um-=1,q0&3){case 0:Xe.mode=vx;break;case 1:if(n_(Xe),Xe.mode=Q_,Ol===Ky){q0>>>=2,um-=2;break e}break;case 2:Xe.mode=T2;break;case 3:ie.msg="invalid block type",Xe.mode=x1}q0>>>=2,um-=2;break;case vx:for(q0>>>=um&7,um-=um&7;um<32;){if(am===0)break e;am--,q0+=Wp[S0++]<<um,um+=8}if((q0&65535)!==(q0>>>16^65535)){ie.msg="invalid stored block lengths",Xe.mode=x1;break}if(Xe.length=q0&65535,q0=0,um=0,Xe.mode=ey,Ol===Ky)break e;case ey:Xe.mode=t_;case t_:if(Im=Xe.length,Im){if(Im>am&&(Im=am),Im>av&&(Im=av),Im===0)break e;l0.set(Wp.subarray(S0,S0+Im),hm),am-=Im,S0+=Im,av-=Im,hm+=Im,Xe.length-=Im;break}Xe.mode=wg;break;case T2:for(;um<14;){if(am===0)break e;am--,q0+=Wp[S0++]<<um,um+=8}if(Xe.nlen=(q0&31)+257,q0>>>=5,um-=5,Xe.ndist=(q0&31)+1,q0>>>=5,um-=5,Xe.ncode=(q0&15)+4,q0>>>=4,um-=4,Xe.nlen>286||Xe.ndist>30){ie.msg="too many length or distance symbols",Xe.mode=x1;break}Xe.have=0,Xe.mode=E2;case E2:for(;Xe.have<Xe.ncode;){for(;um<3;){if(am===0)break e;am--,q0+=Wp[S0++]<<um,um+=8}Xe.lens[Tg[Xe.have++]]=q0&7,q0>>>=3,um-=3}for(;Xe.have<19;)Xe.lens[Tg[Xe.have++]]=0;if(Xe.lencode=Xe.lendyn,Xe.lenbits=7,Nv={bits:Xe.lenbits},y1=hy(Z_,Xe.lens,0,19,Xe.lencode,0,Xe.work,Nv),Xe.lenbits=Nv.bits,y1){ie.msg="invalid code lengths set",Xe.mode=x1;break}Xe.have=0,Xe.mode=py;case py:for(;Xe.have<Xe.nlen+Xe.ndist;){for(;Yv=Xe.lencode[q0&(1<<Xe.lenbits)-1],Pv=Yv>>>24,Bv=Yv>>>16&255,Qm=Yv&65535,!(Pv<=um);){if(am===0)break e;am--,q0+=Wp[S0++]<<um,um+=8}if(Qm<16)q0>>>=Pv,um-=Pv,Xe.lens[Xe.have++]=Qm;else{if(Qm===16){for(ug=Pv+2;um<ug;){if(am===0)break e;am--,q0+=Wp[S0++]<<um,um+=8}if(q0>>>=Pv,um-=Pv,Xe.have===0){ie.msg="invalid bit length repeat",Xe.mode=x1;break}jv=Xe.lens[Xe.have-1],Im=3+(q0&3),q0>>>=2,um-=2}else if(Qm===17){for(ug=Pv+3;um<ug;){if(am===0)break e;am--,q0+=Wp[S0++]<<um,um+=8}q0>>>=Pv,um-=Pv,jv=0,Im=3+(q0&7),q0>>>=3,um-=3}else{for(ug=Pv+7;um<ug;){if(am===0)break e;am--,q0+=Wp[S0++]<<um,um+=8}q0>>>=Pv,um-=Pv,jv=0,Im=11+(q0&127),q0>>>=7,um-=7}if(Xe.have+Im>Xe.nlen+Xe.ndist){ie.msg="invalid bit length repeat",Xe.mode=x1;break}for(;Im--;)Xe.lens[Xe.have++]=jv}}if(Xe.mode===x1)break;if(Xe.lens[256]===0){ie.msg="invalid code -- missing end-of-block",Xe.mode=x1;break}if(Xe.lenbits=9,Nv={bits:Xe.lenbits},y1=hy(sb,Xe.lens,0,Xe.nlen,Xe.lencode,0,Xe.work,Nv),Xe.lenbits=Nv.bits,y1){ie.msg="invalid literal/lengths set",Xe.mode=x1;break}if(Xe.distbits=6,Xe.distcode=Xe.distdyn,Nv={bits:Xe.distbits},y1=hy(__,Xe.lens,Xe.nlen,Xe.ndist,Xe.distcode,0,Xe.work,Nv),Xe.distbits=Nv.bits,y1){ie.msg="invalid distances set",Xe.mode=x1;break}if(Xe.mode=Q_,Ol===Ky)break e;case Q_:Xe.mode=e2;case e2:if(am>=6&&av>=258){ie.next_out=hm,ie.avail_out=av,ie.next_in=S0,ie.avail_in=am,Xe.hold=q0,Xe.bits=um,ux(ie,qm),hm=ie.next_out,l0=ie.output,av=ie.avail_out,S0=ie.next_in,Wp=ie.input,am=ie.avail_in,q0=Xe.hold,um=Xe.bits,Xe.mode===wg&&(Xe.back=-1);break}for(Xe.back=0;Yv=Xe.lencode[q0&(1<<Xe.lenbits)-1],Pv=Yv>>>24,Bv=Yv>>>16&255,Qm=Yv&65535,!(Pv<=um);){if(am===0)break e;am--,q0+=Wp[S0++]<<um,um+=8}if(Bv&&!(Bv&240)){for(Dv=Pv,F1=Bv,Qv=Qm;Yv=Xe.lencode[Qv+((q0&(1<<Dv+F1)-1)>>Dv)],Pv=Yv>>>24,Bv=Yv>>>16&255,Qm=Yv&65535,!(Dv+Pv<=um);){if(am===0)break e;am--,q0+=Wp[S0++]<<um,um+=8}q0>>>=Dv,um-=Dv,Xe.back+=Dv}if(q0>>>=Pv,um-=Pv,Xe.back+=Pv,Xe.length=Qm,Bv===0){Xe.mode=yx;break}if(Bv&32){Xe.back=-1,Xe.mode=wg;break}if(Bv&64){ie.msg="invalid literal/length code",Xe.mode=x1;break}Xe.extra=Bv&15,Xe.mode=gx;case gx:if(Xe.extra){for(ug=Xe.extra;um<ug;){if(am===0)break e;am--,q0+=Wp[S0++]<<um,um+=8}Xe.length+=q0&(1<<Xe.extra)-1,q0>>>=Xe.extra,um-=Xe.extra,Xe.back+=Xe.extra}Xe.was=Xe.length,Xe.mode=cb;case cb:for(;Yv=Xe.distcode[q0&(1<<Xe.distbits)-1],Pv=Yv>>>24,Bv=Yv>>>16&255,Qm=Yv&65535,!(Pv<=um);){if(am===0)break e;am--,q0+=Wp[S0++]<<um,um+=8}if(!(Bv&240)){for(Dv=Pv,F1=Bv,Qv=Qm;Yv=Xe.distcode[Qv+((q0&(1<<Dv+F1)-1)>>Dv)],Pv=Yv>>>24,Bv=Yv>>>16&255,Qm=Yv&65535,!(Dv+Pv<=um);){if(am===0)break e;am--,q0+=Wp[S0++]<<um,um+=8}q0>>>=Dv,um-=Dv,Xe.back+=Dv}if(q0>>>=Pv,um-=Pv,Xe.back+=Pv,Bv&64){ie.msg="invalid distance code",Xe.mode=x1;break}Xe.offset=Qm,Xe.extra=Bv&15,Xe.mode=ub;case ub:if(Xe.extra){for(ug=Xe.extra;um<ug;){if(am===0)break e;am--,q0+=Wp[S0++]<<um,um+=8}Xe.offset+=q0&(1<<Xe.extra)-1,q0>>>=Xe.extra,um-=Xe.extra,Xe.back+=Xe.extra}if(Xe.offset>Xe.dmax){ie.msg="invalid distance too far back",Xe.mode=x1;break}Xe.mode=fb;case fb:if(av===0)break e;if(Im=qm-av,Xe.offset>Im){if(Im=Xe.offset-Im,Im>Xe.whave&&Xe.sane){ie.msg="invalid distance too far back",Xe.mode=x1;break}Im>Xe.wnext?(Im-=Xe.wnext,C1=Xe.wsize-Im):C1=Xe.wnext-Im,Im>Xe.length&&(Im=Xe.length),I1=Xe.window}else I1=l0,C1=hm-Xe.offset,Im=Xe.length;Im>av&&(Im=av),av-=Im,Xe.length-=Im;do l0[hm++]=I1[C1++];while(--Im);Xe.length===0&&(Xe.mode=e2);break;case yx:if(av===0)break e;l0[hm++]=Xe.length,av--,Xe.mode=e2;break;case t2:if(Xe.wrap){for(;um<32;){if(am===0)break e;am--,q0|=Wp[S0++]<<um,um+=8}if(qm-=av,ie.total_out+=qm,Xe.total+=qm,Xe.wrap&4&&qm&&(ie.adler=Xe.check=Xe.flags?Np(Xe.check,l0,qm,hm-qm):Bp(Xe.check,l0,qm,hm-qm)),qm=av,Xe.wrap&4&&(Xe.flags?q0:a2(q0))!==Xe.check){ie.msg="incorrect data check",Xe.mode=x1;break}q0=0,um=0}Xe.mode=A2;case A2:if(Xe.wrap&&Xe.flags){for(;um<32;){if(am===0)break e;am--,q0+=Wp[S0++]<<um,um+=8}if(Xe.wrap&4&&q0!==(Xe.total&4294967295)){ie.msg="incorrect length check",Xe.mode=x1;break}q0=0,um=0}Xe.mode=Og;case Og:y1=x_;break e;case x1:y1=Jy;break e;case Rg:return hx;case zy:default:return Pg}return ie.next_out=hm,ie.avail_out=av,ie.next_in=S0,ie.avail_in=am,Xe.hold=q0,Xe.bits=um,(Xe.wsize||qm!==ie.avail_out&&Xe.mode<x1&&(Xe.mode<t2||Ol!==fx))&&k2(ie,ie.output,ie.next_out,qm-ie.avail_out),l1-=ie.avail_in,qm-=ie.avail_out,ie.total_in+=l1,ie.total_out+=qm,Xe.total+=qm,Xe.wrap&4&&qm&&(ie.adler=Xe.check=Xe.flags?Np(Xe.check,l0,qm,ie.next_out-qm):Bp(Xe.check,l0,qm,ie.next_out-qm)),ie.data_type=Xe.bits+(Xe.last?64:0)+(Xe.mode===wg?128:0)+(Xe.mode===Q_||Xe.mode===ey?256:0),(l1===0&&qm===0||Ol===fx)&&y1===zg&&(y1=e3),y1},xx=ie=>{if(Py(ie))return Pg;let Ol=ie.state;return Ol.window&&(Ol.window=null),ie.state=null,zg},bx=(ie,Ol)=>{if(Py(ie))return Pg;const Xe=ie.state;return Xe.wrap&2?(Xe.head=Ol,Ol.done=!1,zg):Pg},Lg=(ie,Ol)=>{const Xe=Ol.length;let Wp,l0,S0;return Py(ie)||(Wp=ie.state,Wp.wrap!==0&&Wp.mode!==Ny)?Pg:Wp.mode===Ny&&(l0=1,l0=Bp(l0,Ol,Xe,0),l0!==Wp.check)?Jy:(S0=k2(ie,Ol,Xe,Xe),S0?(Wp.mode=Rg,hx):(Wp.havedict=1,zg))};var M_=a_,S_=_x,T_=n2,i2=L2,Ig=Mg,Sg=hb,Oy=xx,Vg=bx,ry=Lg,my="pako inflate (from Nodeca project)",ay={inflateReset:M_,inflateReset2:S_,inflateResetKeep:T_,inflateInit:i2,inflateInit2:Ig,inflate:Sg,inflateEnd:Oy,inflateGetHeader:Vg,inflateSetDictionary:ry,inflateInfo:my};function wx(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var s2=wx;const Mx=Object.prototype.toString,{Z_NO_FLUSH:lg,Z_FINISH:k1,Z_OK:Wv,Z_STREAM_END:ny,Z_NEED_DICT:yg,Z_STREAM_ERROR:Sx,Z_DATA_ERROR:vy,Z_MEM_ERROR:db}=Ke;function E_(ie){this.options=p_.assign({chunkSize:65536,windowBits:15,to:""},ie||{});const Ol=this.options;Ol.raw&&Ol.windowBits>=0&&Ol.windowBits<16&&(Ol.windowBits=-Ol.windowBits,Ol.windowBits===0&&(Ol.windowBits=-15)),Ol.windowBits>=0&&Ol.windowBits<16&&!(ie&&ie.windowBits)&&(Ol.windowBits+=32),Ol.windowBits>15&&Ol.windowBits<48&&(Ol.windowBits&15||(Ol.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new nx,this.strm.avail_out=0;let Xe=ay.inflateInit2(this.strm,Ol.windowBits);if(Xe!==Wv)throw new Error(V0[Xe]);if(this.header=new s2,ay.inflateGetHeader(this.strm,this.header),Ol.dictionary&&(typeof Ol.dictionary=="string"?Ol.dictionary=v_.string2buf(Ol.dictionary):Mx.call(Ol.dictionary)==="[object ArrayBuffer]"&&(Ol.dictionary=new Uint8Array(Ol.dictionary)),Ol.raw&&(Xe=ay.inflateSetDictionary(this.strm,Ol.dictionary),Xe!==Wv)))throw new Error(V0[Xe])}E_.prototype.push=function(ie,Ol){const Xe=this.strm,Wp=this.options.chunkSize,l0=this.options.dictionary;let S0,hm,am;if(this.ended)return!1;for(Ol===~~Ol?hm=Ol:hm=Ol===!0?k1:lg,Mx.call(ie)==="[object ArrayBuffer]"?Xe.input=new Uint8Array(ie):Xe.input=ie,Xe.next_in=0,Xe.avail_in=Xe.input.length;;){for(Xe.avail_out===0&&(Xe.output=new Uint8Array(Wp),Xe.next_out=0,Xe.avail_out=Wp),S0=ay.inflate(Xe,hm),S0===yg&&l0&&(S0=ay.inflateSetDictionary(Xe,l0),S0===Wv?S0=ay.inflate(Xe,hm):S0===vy&&(S0=yg));Xe.avail_in>0&&S0===ny&&Xe.state.wrap>0&&ie[Xe.next_in]!==0;)ay.inflateReset(Xe),S0=ay.inflate(Xe,hm);switch(S0){case Sx:case vy:case yg:case db:return this.onEnd(S0),this.ended=!0,!1}if(am=Xe.avail_out,Xe.next_out&&(Xe.avail_out===0||S0===ny))if(this.options.to==="string"){let av=v_.utf8border(Xe.output,Xe.next_out),q0=Xe.next_out-av,um=v_.buf2string(Xe.output,av);Xe.next_out=q0,Xe.avail_out=Wp-q0,q0&&Xe.output.set(Xe.output.subarray(av,av+q0),0),this.onData(um)}else this.onData(Xe.output.length===Xe.next_out?Xe.output:Xe.output.subarray(0,Xe.next_out));if(!(S0===Wv&&am===0)){if(S0===ny)return S0=ay.inflateEnd(this.strm),this.onEnd(S0),this.ended=!0,!0;if(Xe.avail_in===0)break}}return!0},E_.prototype.onData=function(ie){this.chunks.push(ie)},E_.prototype.onEnd=function(ie){ie===Wv&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=p_.flattenChunks(this.chunks)),this.chunks=[],this.err=ie,this.msg=this.strm.msg};function gy(ie,Ol){const Xe=new E_(Ol);if(Xe.push(ie),Xe.err)throw Xe.msg||V0[Xe.err];return Xe.result}function i_(ie,Ol){return Ol=Ol||{},Ol.raw=!0,gy(ie,Ol)}var Tx=E_,o2=gy,Ex=i_,yy=gy,iy={Inflate:Tx,inflate:o2,inflateRaw:Ex,ungzip:yy};const{Deflate:Iy,deflate:_y,deflateRaw:Ax,gzip:Cx}=cx,{Inflate:xy,inflate:l2,inflateRaw:s_,ungzip:cg}=iy;var c2=Iy,u2=_y,Rx=Ax,N2=Cx,pb=xy,W1=l2,z2=s_,A_=cg,C_=Ke,f2={Deflate:c2,deflate:u2,deflateRaw:Rx,gzip:N2,Inflate:pb,inflate:W1,inflateRaw:z2,ungzip:A_,constants:C_}}),"./node_modules/upng-js/UPNG.js":((r,e,t)=>{(function(){var a={},s;r.exports=a,s=t("./node_modules/upng-js/node_modules/pako/index.js"),(function(o,f){o.toRGBA8=function(u){var h=u.width,x=u.height;if(u.tabs.acTL==null)return[o.toRGBA8.decodeImage(u.data,h,x,u).buffer];var m=[];u.frames[0].data==null&&(u.frames[0].data=u.data);for(var w,A=new Uint8Array(h*x*4),D=0;D<u.frames.length;D++){var I=u.frames[D],y=I.rect.x,l=I.rect.y,c=I.rect.width,L=I.rect.height,R=o.toRGBA8.decodeImage(I.data,c,L,u);if(D==0?w=R:I.blend==0?o._copyTile(R,c,L,w,h,x,y,l,0):I.blend==1&&o._copyTile(R,c,L,w,h,x,y,l,1),m.push(w.buffer),w=w.slice(0),I.dispose!=0){if(I.dispose==1)o._copyTile(A,c,L,w,h,x,y,l,0);else if(I.dispose==2){for(var F=D-1;u.frames[F].dispose==2;)F--;w=new Uint8Array(m[F]).slice(0)}}}return m},o.toRGBA8.decodeImage=function(u,h,x,m){var w=h*x,A=o.decode._getBPP(m),D=Math.ceil(h*A/8),I=new Uint8Array(w*4),y=new Uint32Array(I.buffer),l=m.ctype,c=m.depth,L=o._bin.readUshort;if(l==6){var R=w<<2;if(c==8)for(var F=0;F<R;F++)I[F]=u[F];if(c==16)for(var F=0;F<R;F++)I[F]=u[F<<1]}else if(l==2){var $=m.tabs.tRNS,b=-1,k=-1,B=-1;if($&&(b=$[0],k=$[1],B=$[2]),c==8)for(var F=0;F<w;F++){var J=F<<2,X=F*3;I[J]=u[X],I[J+1]=u[X+1],I[J+2]=u[X+2],I[J+3]=255,b!=-1&&u[X]==b&&u[X+1]==k&&u[X+2]==B&&(I[J+3]=0)}if(c==16)for(var F=0;F<w;F++){var J=F<<2,X=F*6;I[J]=u[X],I[J+1]=u[X+2],I[J+2]=u[X+4],I[J+3]=255,b!=-1&&L(u,X)==b&&L(u,X+2)==k&&L(u,X+4)==B&&(I[J+3]=0)}}else if(l==3){var ae=m.tabs.PLTE,He=m.tabs.tRNS,Pe=He?He.length:0;if(c==1)for(var ue=0;ue<x;ue++)for(var Oe=ue*D,we=ue*h,F=0;F<h;F++){var J=we+F<<2,Ze=u[Oe+(F>>3)]>>7-((F&7)<<0)&1,it=3*Ze;I[J]=ae[it],I[J+1]=ae[it+1],I[J+2]=ae[it+2],I[J+3]=Ze<Pe?He[Ze]:255}if(c==2)for(var ue=0;ue<x;ue++)for(var Oe=ue*D,we=ue*h,F=0;F<h;F++){var J=we+F<<2,Ze=u[Oe+(F>>2)]>>6-((F&3)<<1)&3,it=3*Ze;I[J]=ae[it],I[J+1]=ae[it+1],I[J+2]=ae[it+2],I[J+3]=Ze<Pe?He[Ze]:255}if(c==4)for(var ue=0;ue<x;ue++)for(var Oe=ue*D,we=ue*h,F=0;F<h;F++){var J=we+F<<2,Ze=u[Oe+(F>>1)]>>4-((F&1)<<2)&15,it=3*Ze;I[J]=ae[it],I[J+1]=ae[it+1],I[J+2]=ae[it+2],I[J+3]=Ze<Pe?He[Ze]:255}if(c==8)for(var F=0;F<w;F++){var J=F<<2,Ze=u[F],it=3*Ze;I[J]=ae[it],I[J+1]=ae[it+1],I[J+2]=ae[it+2],I[J+3]=Ze<Pe?He[Ze]:255}}else if(l==4){if(c==8)for(var F=0;F<w;F++){var J=F<<2,lt=F<<1,Vt=u[lt];I[J]=Vt,I[J+1]=Vt,I[J+2]=Vt,I[J+3]=u[lt+1]}if(c==16)for(var F=0;F<w;F++){var J=F<<2,lt=F<<2,Vt=u[lt];I[J]=Vt,I[J+1]=Vt,I[J+2]=Vt,I[J+3]=u[lt+2]}}else if(l==0){var b=m.tabs.tRNS?m.tabs.tRNS:-1;if(c==1)for(var F=0;F<w;F++){var Vt=255*(u[F>>3]>>7-(F&7)&1),_e=Vt==b*255?0:255;y[F]=_e<<24|Vt<<16|Vt<<8|Vt}if(c==2)for(var F=0;F<w;F++){var Vt=85*(u[F>>2]>>6-((F&3)<<1)&3),_e=Vt==b*85?0:255;y[F]=_e<<24|Vt<<16|Vt<<8|Vt}if(c==4)for(var F=0;F<w;F++){var Vt=17*(u[F>>1]>>4-((F&1)<<2)&15),_e=Vt==b*17?0:255;y[F]=_e<<24|Vt<<16|Vt<<8|Vt}if(c==8)for(var F=0;F<w;F++){var Vt=u[F],_e=Vt==b?0:255;y[F]=_e<<24|Vt<<16|Vt<<8|Vt}if(c==16)for(var F=0;F<w;F++){var Vt=u[F<<1],_e=L(u,F<<1)==b?0:255;y[F]=_e<<24|Vt<<16|Vt<<8|Vt}}return I},o.decode=function(u){for(var h=new Uint8Array(u),x=8,m=o._bin,w=m.readUshort,A=m.readUint,D={tabs:{},frames:[]},I=new Uint8Array(h.length),y=0,l,c=0,L=[137,80,78,71,13,10,26,10],R=0;R<8;R++)if(h[R]!=L[R])throw"The input is not a PNG file!";for(;x<h.length;){var F=m.readUint(h,x);x+=4;var $=m.readASCII(h,x,4);if(x+=4,$=="IHDR")o.decode._IHDR(h,x,D);else if($=="IDAT"){for(var R=0;R<F;R++)I[y+R]=h[x+R];y+=F}else if($=="acTL")D.tabs[$]={num_frames:A(h,x),num_plays:A(h,x+4)},l=new Uint8Array(h.length);else if($=="fcTL"){if(c!=0){var b=D.frames[D.frames.length-1];b.data=o.decode._decompress(D,l.slice(0,c),b.rect.width,b.rect.height),c=0}var k={x:A(h,x+12),y:A(h,x+16),width:A(h,x+4),height:A(h,x+8)},B=w(h,x+22);B=w(h,x+20)/(B==0?100:B);var J={rect:k,delay:Math.round(B*1e3),dispose:h[x+24],blend:h[x+25]};D.frames.push(J)}else if($=="fdAT"){for(var R=0;R<F-4;R++)l[c+R]=h[x+R+4];c+=F-4}else if($=="pHYs")D.tabs[$]=[m.readUint(h,x),m.readUint(h,x+4),h[x+8]];else if($=="cHRM"){D.tabs[$]=[];for(var R=0;R<8;R++)D.tabs[$].push(m.readUint(h,x+R*4))}else if($=="tEXt"){D.tabs[$]==null&&(D.tabs[$]={});var X=m.nextZero(h,x),ae=m.readASCII(h,x,X-x),He=m.readASCII(h,X+1,x+F-X-1);D.tabs[$][ae]=He}else if($=="iTXt"){D.tabs[$]==null&&(D.tabs[$]={});var X=0,Pe=x;X=m.nextZero(h,Pe);var ae=m.readASCII(h,Pe,X-Pe);Pe=X+1,h[Pe],h[Pe+1],Pe+=2,X=m.nextZero(h,Pe),m.readASCII(h,Pe,X-Pe),Pe=X+1,X=m.nextZero(h,Pe),m.readUTF8(h,Pe,X-Pe),Pe=X+1;var He=m.readUTF8(h,Pe,F-(Pe-x));D.tabs[$][ae]=He}else if($=="PLTE")D.tabs[$]=m.readBytes(h,x,F);else if($=="hIST"){var ue=D.tabs.PLTE.length/3;D.tabs[$]=[];for(var R=0;R<ue;R++)D.tabs[$].push(w(h,x+R*2))}else if($=="tRNS")D.ctype==3?D.tabs[$]=m.readBytes(h,x,F):D.ctype==0?D.tabs[$]=w(h,x):D.ctype==2&&(D.tabs[$]=[w(h,x),w(h,x+2),w(h,x+4)]);else if($=="gAMA")D.tabs[$]=m.readUint(h,x)/1e5;else if($=="sRGB")D.tabs[$]=h[x];else if($=="bKGD")D.ctype==0||D.ctype==4?D.tabs[$]=[w(h,x)]:D.ctype==2||D.ctype==6?D.tabs[$]=[w(h,x),w(h,x+2),w(h,x+4)]:D.ctype==3&&(D.tabs[$]=h[x]);else if($=="IEND"){if(c!=0){var b=D.frames[D.frames.length-1];b.data=o.decode._decompress(D,l.slice(0,c),b.rect.width,b.rect.height),c=0}D.data=o.decode._decompress(D,I,D.width,D.height);break}x+=F,m.readUint(h,x),x+=4}return delete D.compress,delete D.interlace,delete D.filter,D},o.decode._decompress=function(u,h,x,m){return u.compress==0&&(h=o.decode._inflate(h)),u.interlace==0?h=o.decode._filterZero(h,u,0,x,m):u.interlace==1&&(h=o.decode._readInterlace(h,u)),h},o.decode._inflate=function(u){return f.inflate(u)},o.decode._readInterlace=function(u,h){for(var x=h.width,m=h.height,w=o.decode._getBPP(h),A=w>>3,D=Math.ceil(x*w/8),I=new Uint8Array(m*D),y=0,l=[0,0,4,0,2,0,1],c=[0,4,0,2,0,1,0],L=[8,8,8,4,4,2,2],R=[8,8,4,4,2,2,1],F=0;F<7;){for(var $=L[F],b=R[F],k=0,B=0,J=l[F];J<m;)J+=$,B++;for(var X=c[F];X<x;)X+=b,k++;var ae=Math.ceil(k*w/8);o.decode._filterZero(u,h,y,k,B);for(var He=0,Pe=l[F];Pe<m;){for(var ue=c[F],Oe=y+He*ae<<3;ue<x;){if(w==1){var we=u[Oe>>3];we=we>>7-(Oe&7)&1,I[Pe*D+(ue>>3)]|=we<<7-((ue&3)<<0)}if(w==2){var we=u[Oe>>3];we=we>>6-(Oe&7)&3,I[Pe*D+(ue>>2)]|=we<<6-((ue&3)<<1)}if(w==4){var we=u[Oe>>3];we=we>>4-(Oe&7)&15,I[Pe*D+(ue>>1)]|=we<<4-((ue&1)<<2)}if(w>=8)for(var Ze=Pe*D+ue*A,it=0;it<A;it++)I[Ze+it]=u[(Oe>>3)+it];Oe+=w,ue+=b}He++,Pe+=$}k*B!=0&&(y+=B*(1+ae)),F=F+1}return I},o.decode._getBPP=function(u){var h=[1,null,3,1,2,null,4][u.ctype];return h*u.depth},o.decode._filterZero=function(u,h,x,m,w){var A=o.decode._getBPP(h),D=Math.ceil(m*A/8),I=o.decode._paeth;A=Math.ceil(A/8);for(var y=0;y<w;y++){var l=x+y*D,c=l+y+1,L=u[c-1];if(L==0)for(var R=0;R<D;R++)u[l+R]=u[c+R];else if(L==1){for(var R=0;R<A;R++)u[l+R]=u[c+R];for(var R=A;R<D;R++)u[l+R]=u[c+R]+u[l+R-A]&255}else if(y==0){for(var R=0;R<A;R++)u[l+R]=u[c+R];if(L==2)for(var R=A;R<D;R++)u[l+R]=u[c+R]&255;if(L==3)for(var R=A;R<D;R++)u[l+R]=u[c+R]+(u[l+R-A]>>1)&255;if(L==4)for(var R=A;R<D;R++)u[l+R]=u[c+R]+I(u[l+R-A],0,0)&255}else{if(L==2)for(var R=0;R<D;R++)u[l+R]=u[c+R]+u[l+R-D]&255;if(L==3){for(var R=0;R<A;R++)u[l+R]=u[c+R]+(u[l+R-D]>>1)&255;for(var R=A;R<D;R++)u[l+R]=u[c+R]+(u[l+R-D]+u[l+R-A]>>1)&255}if(L==4){for(var R=0;R<A;R++)u[l+R]=u[c+R]+I(0,u[l+R-D],0)&255;for(var R=A;R<D;R++)u[l+R]=u[c+R]+I(u[l+R-A],u[l+R-D],u[l+R-A-D])&255}}}return u},o.decode._paeth=function(u,h,x){var m=u+h-x,w=Math.abs(m-u),A=Math.abs(m-h),D=Math.abs(m-x);return w<=A&&w<=D?u:A<=D?h:x},o.decode._IHDR=function(u,h,x){var m=o._bin;x.width=m.readUint(u,h),h+=4,x.height=m.readUint(u,h),h+=4,x.depth=u[h],h++,x.ctype=u[h],h++,x.compress=u[h],h++,x.filter=u[h],h++,x.interlace=u[h],h++},o._bin={nextZero:function(u,h){for(;u[h]!=0;)h++;return h},readUshort:function(u,h){return u[h]<<8|u[h+1]},writeUshort:function(u,h,x){u[h]=x>>8&255,u[h+1]=x&255},readUint:function(u,h){return u[h]*16777216+(u[h+1]<<16|u[h+2]<<8|u[h+3])},writeUint:function(u,h,x){u[h]=x>>24&255,u[h+1]=x>>16&255,u[h+2]=x>>8&255,u[h+3]=x&255},readASCII:function(u,h,x){for(var m="",w=0;w<x;w++)m+=String.fromCharCode(u[h+w]);return m},writeASCII:function(u,h,x){for(var m=0;m<x.length;m++)u[h+m]=x.charCodeAt(m)},readBytes:function(u,h,x){for(var m=[],w=0;w<x;w++)m.push(u[h+w]);return m},pad:function(u){return u.length<2?"0"+u:u},readUTF8:function(u,h,x){for(var m="",w,A=0;A<x;A++)m+="%"+o._bin.pad(u[h+A].toString(16));try{w=decodeURIComponent(m)}catch{return o._bin.readASCII(u,h,x)}return w}},o._copyTile=function(u,h,x,m,w,A,D,I,y){for(var l=Math.min(h,w),c=Math.min(x,A),L=0,R=0,F=0;F<c;F++)for(var $=0;$<l;$++)if(D>=0&&I>=0?(L=F*h+$<<2,R=(I+F)*w+D+$<<2):(L=(-I+F)*h-D+$<<2,R=F*w+$<<2),y==0)m[R]=u[L],m[R+1]=u[L+1],m[R+2]=u[L+2],m[R+3]=u[L+3];else if(y==1){var b=u[L+3]*.00392156862745098,k=u[L]*b,B=u[L+1]*b,J=u[L+2]*b,X=m[R+3]*(1/255),ae=m[R]*X,He=m[R+1]*X,Pe=m[R+2]*X,ue=1-b,Oe=b+X*ue,we=Oe==0?0:1/Oe;m[R+3]=255*Oe,m[R+0]=(k+ae*ue)*we,m[R+1]=(B+He*ue)*we,m[R+2]=(J+Pe*ue)*we}else if(y==2){var b=u[L+3],k=u[L],B=u[L+1],J=u[L+2],X=m[R+3],ae=m[R],He=m[R+1],Pe=m[R+2];b==X&&k==ae&&B==He&&J==Pe?(m[R]=0,m[R+1]=0,m[R+2]=0,m[R+3]=0):(m[R]=k,m[R+1]=B,m[R+2]=J,m[R+3]=b)}else if(y==3){var b=u[L+3],k=u[L],B=u[L+1],J=u[L+2],X=m[R+3],ae=m[R],He=m[R+1],Pe=m[R+2];if(b==X&&k==ae&&B==He&&J==Pe)continue;if(b<220&&X>20)return!1}return!0},o.encode=function(u,h,x,m,w,A){m==null&&(m=0),A==null&&(A=!1);for(var D=new Uint8Array(u[0].byteLength*u.length+100),I=[137,80,78,71,13,10,26,10],y=0;y<8;y++)D[y]=I[y];var l=8,c=o._bin,L=o.crc.crc,R=c.writeUint,F=c.writeUshort,$=c.writeASCII,b=o.encode.compressPNG(u,h,x,m,A);R(D,l,13),l+=4,$(D,l,"IHDR"),l+=4,R(D,l,h),l+=4,R(D,l,x),l+=4,D[l]=b.depth,l++,D[l]=b.ctype,l++,D[l]=0,l++,D[l]=0,l++,D[l]=0,l++,R(D,l,L(D,l-17,17)),l+=4,R(D,l,1),l+=4,$(D,l,"sRGB"),l+=4,D[l]=1,l++,R(D,l,L(D,l-5,5)),l+=4;var k=u.length>1;if(k&&(R(D,l,8),l+=4,$(D,l,"acTL"),l+=4,R(D,l,u.length),l+=4,R(D,l,0),l+=4,R(D,l,L(D,l-12,12)),l+=4),b.ctype==3){var B=b.plte.length;R(D,l,B*3),l+=4,$(D,l,"PLTE"),l+=4;for(var y=0;y<B;y++){var J=y*3,X=b.plte[y],ae=X&255,He=X>>8&255,Pe=X>>16&255;D[l+J+0]=ae,D[l+J+1]=He,D[l+J+2]=Pe}if(l+=B*3,R(D,l,L(D,l-B*3-4,B*3+4)),l+=4,b.gotAlpha){R(D,l,B),l+=4,$(D,l,"tRNS"),l+=4;for(var y=0;y<B;y++)D[l+y]=b.plte[y]>>24&255;l+=B,R(D,l,L(D,l-B-4,B+4)),l+=4}}for(var ue=0,Oe=0;Oe<b.frames.length;Oe++){var we=b.frames[Oe];k&&(R(D,l,26),l+=4,$(D,l,"fcTL"),l+=4,R(D,l,ue++),l+=4,R(D,l,we.rect.width),l+=4,R(D,l,we.rect.height),l+=4,R(D,l,we.rect.x),l+=4,R(D,l,we.rect.y),l+=4,F(D,l,w[Oe]),l+=2,F(D,l,1e3),l+=2,D[l]=we.dispose,l++,D[l]=we.blend,l++,R(D,l,L(D,l-30,30)),l+=4);var Ze=we.cimg,B=Ze.length;R(D,l,B+(Oe==0?0:4)),l+=4;var it=l;$(D,l,Oe==0?"IDAT":"fdAT"),l+=4,Oe!=0&&(R(D,l,ue++),l+=4);for(var y=0;y<B;y++)D[l+y]=Ze[y];l+=B,R(D,l,L(D,it,l-it)),l+=4}return R(D,l,0),l+=4,$(D,l,"IEND"),l+=4,R(D,l,L(D,l-4,4)),l+=4,D.buffer.slice(0,l)},o.encode.compressPNG=function(u,h,x,m,w){for(var A=o.encode.compress(u,h,x,m,!1,w),D=0;D<u.length;D++){var I=A.frames[D];I.rect.width;var y=I.rect.height,l=I.bpl,c=I.bpp,L=new Uint8Array(y*l+y);I.cimg=o.encode._filterZero(I.img,y,c,l,L)}return A},o.encode.compress=function(u,h,x,m,w,A){A==null&&(A=!1);for(var D=6,I=8,y=4,l=255,c=0;c<u.length;c++)for(var L=new Uint8Array(u[c]),R=L.length,F=0;F<R;F+=4)l&=L[F+3];var $=l!=255,b={},k=[];if(u.length!=0&&(b[0]=0,k.push(0),m!=0&&m--),m!=0){var B=o.quantize(u,m,w);u=B.bufs;for(var F=0;F<B.plte.length;F++){var J=B.plte[F].est.rgba;b[J]==null&&(b[J]=k.length,k.push(J))}}else for(var c=0;c<u.length;c++)for(var X=new Uint32Array(u[c]),R=X.length,F=0;F<R;F++){var J=X[F];if((F<h||J!=X[F-1]&&J!=X[F-h])&&b[J]==null&&(b[J]=k.length,k.push(J),k.length>=300))break}var ae=$?w:!1,He=k.length;He<=256&&A==!1&&(He<=2?I=1:He<=4?I=2:He<=16?I=4:I=8,w&&(I=8),$=!0);for(var Pe=[],c=0;c<u.length;c++){var ue=new Uint8Array(u[c]),Oe=new Uint32Array(ue.buffer),we=0,Ze=0,it=h,lt=x,Vt=0;if(c!=0&&!ae){for(var _e=w||c==1||Pe[Pe.length-2].dispose==2?1:2,pr=0,_s=1e9,Ei=0;Ei<_e;Ei++){for(var O0=new Uint8Array(u[c-1-Ei]),Bl=new Uint32Array(u[c-1-Ei]),Wl=h,Ep=x,Lp=-1,Op=-1,R0=0;R0<x;R0++)for(var N0=0;N0<h;N0++){var F=R0*h+N0;Oe[F]!=Bl[F]&&(N0<Wl&&(Wl=N0),N0>Lp&&(Lp=N0),R0<Ep&&(Ep=R0),R0>Op&&(Op=R0))}var Qp=Lp==-1?1:(Lp-Wl+1)*(Op-Ep+1);Qp<_s&&(_s=Qp,pr=Ei,Lp==-1?(we=Ze=0,it=lt=1):(we=Wl,Ze=Ep,it=Lp-Wl+1,lt=Op-Ep+1))}var O0=new Uint8Array(u[c-1-pr]);pr==1&&(Pe[Pe.length-1].dispose=2);var zp=new Uint8Array(it*lt*4);new Uint32Array(zp.buffer),o._copyTile(O0,h,x,zp,it,lt,-we,-Ze,0),o._copyTile(ue,h,x,zp,it,lt,-we,-Ze,3)?(o._copyTile(ue,h,x,zp,it,lt,-we,-Ze,2),Vt=1):(o._copyTile(ue,h,x,zp,it,lt,-we,-Ze,0),Vt=0),ue=zp,Oe=new Uint32Array(ue.buffer)}var M0=4*it;if(He<=256&&A==!1){M0=Math.ceil(I*it/8);for(var zp=new Uint8Array(M0*lt),R0=0;R0<lt;R0++){var F=R0*M0,W0=R0*it;if(I==8)for(var N0=0;N0<it;N0++)zp[F+N0]=b[Oe[W0+N0]];else if(I==4)for(var N0=0;N0<it;N0++)zp[F+(N0>>1)]|=b[Oe[W0+N0]]<<4-(N0&1)*4;else if(I==2)for(var N0=0;N0<it;N0++)zp[F+(N0>>2)]|=b[Oe[W0+N0]]<<6-(N0&3)*2;else if(I==1)for(var N0=0;N0<it;N0++)zp[F+(N0>>3)]|=b[Oe[W0+N0]]<<7-(N0&7)*1}ue=zp,D=3,y=1}else if($==!1&&u.length==1){for(var zp=new Uint8Array(it*lt*3),im=it*lt,F=0;F<im;F++){var F0=F*3,fm=F*4;zp[F0]=ue[fm],zp[F0+1]=ue[fm+1],zp[F0+2]=ue[fm+2]}ue=zp,D=2,y=3,M0=3*it}Pe.push({rect:{x:we,y:Ze,width:it,height:lt},img:ue,bpl:M0,bpp:y,blend:Vt,dispose:ae?1:0})}return{ctype:D,depth:I,plte:k,gotAlpha:$,frames:Pe}},o.encode._filterZero=function(u,h,x,m,w){for(var A=[],D=0;D<5;D++)if(!(h*m>5e5&&(D==2||D==3||D==4))){for(var I=0;I<h;I++)o.encode._filterLine(w,u,I,m,x,D);if(A.push(f.deflate(w)),x==1)break}for(var y,l=1e9,c=0;c<A.length;c++)A[c].length<l&&(y=c,l=A[c].length);return A[y]},o.encode._filterLine=function(u,h,x,m,w,A){var D=x*m,I=D+x,y=o.decode._paeth;if(u[I]=A,I++,A==0)for(var l=0;l<m;l++)u[I+l]=h[D+l];else if(A==1){for(var l=0;l<w;l++)u[I+l]=h[D+l];for(var l=w;l<m;l++)u[I+l]=h[D+l]-h[D+l-w]+256&255}else if(x==0){for(var l=0;l<w;l++)u[I+l]=h[D+l];if(A==2)for(var l=w;l<m;l++)u[I+l]=h[D+l];if(A==3)for(var l=w;l<m;l++)u[I+l]=h[D+l]-(h[D+l-w]>>1)+256&255;if(A==4)for(var l=w;l<m;l++)u[I+l]=h[D+l]-y(h[D+l-w],0,0)+256&255}else{if(A==2)for(var l=0;l<m;l++)u[I+l]=h[D+l]+256-h[D+l-m]&255;if(A==3){for(var l=0;l<w;l++)u[I+l]=h[D+l]+256-(h[D+l-m]>>1)&255;for(var l=w;l<m;l++)u[I+l]=h[D+l]+256-(h[D+l-m]+h[D+l-w]>>1)&255}if(A==4){for(var l=0;l<w;l++)u[I+l]=h[D+l]+256-y(0,h[D+l-m],0)&255;for(var l=w;l<m;l++)u[I+l]=h[D+l]+256-y(h[D+l-w],h[D+l-m],h[D+l-w-m])&255}}},o.crc={table:(function(){for(var u=new Uint32Array(256),h=0;h<256;h++){for(var x=h,m=0;m<8;m++)x&1?x=3988292384^x>>>1:x=x>>>1;u[h]=x}return u})(),update:function(u,h,x,m){for(var w=0;w<m;w++)u=o.crc.table[(u^h[x+w])&255]^u>>>8;return u},crc:function(u,h,x){return o.crc.update(4294967295,u,h,x)^4294967295}},o.quantize=function(u,h,x){for(var m=[],w=0,A=0;A<u.length;A++)m.push(o.encode.alphaMul(new Uint8Array(u[A]),x)),w+=u[A].byteLength;for(var D=new Uint8Array(w),I=new Uint32Array(D.buffer),y=0,A=0;A<m.length;A++){for(var l=m[A],c=l.length,L=0;L<c;L++)D[y+L]=l[L];y+=c}var R={i0:0,i1:D.length,bst:null,est:null,tdst:0,left:null,right:null};R.bst=o.quantize.stats(D,R.i0,R.i1),R.est=o.quantize.estats(R.bst);for(var F=[R];F.length<h;){for(var $=0,b=0,A=0;A<F.length;A++)F[A].est.L>$&&($=F[A].est.L,b=A);if($<.001)break;var k=F[b],B=o.quantize.splitPixels(D,I,k.i0,k.i1,k.est.e,k.est.eMq255),J={i0:k.i0,i1:B,bst:null,est:null,tdst:0,left:null,right:null};J.bst=o.quantize.stats(D,J.i0,J.i1),J.est=o.quantize.estats(J.bst);var X={i0:B,i1:k.i1,bst:null,est:null,tdst:0,left:null,right:null};X.bst={R:[],m:[],N:k.bst.N-J.bst.N};for(var A=0;A<16;A++)X.bst.R[A]=k.bst.R[A]-J.bst.R[A];for(var A=0;A<4;A++)X.bst.m[A]=k.bst.m[A]-J.bst.m[A];X.est=o.quantize.estats(X.bst),k.left=J,k.right=X,F[b]=J,F.push(X)}F.sort(function(_e,pr){return pr.bst.N-_e.bst.N});for(var ae=0;ae<m.length;ae++){for(var He=o.quantize.planeDst,Pe=new Uint8Array(m[ae].buffer),ue=new Uint32Array(m[ae].buffer),Oe=Pe.length,A=0;A<Oe;A+=4){for(var we=Pe[A]*.00392156862745098,Ze=Pe[A+1]*.00392156862745098,it=Pe[A+2]*.00392156862745098,lt=Pe[A+3]*.00392156862745098,Vt=R;Vt.left;)Vt=He(Vt.est,we,Ze,it,lt)<=0?Vt.left:Vt.right;ue[A>>2]=Vt.est.rgba}m[ae]=ue.buffer}return{bufs:m,plte:F}},o.quantize.getNearest=function(u,h,x,m,w){if(u.left==null)return u.tdst=o.quantize.dist(u.est.q,h,x,m,w),u;var A=o.quantize.planeDst(u.est,h,x,m,w),D=u.left,I=u.right;A>0&&(D=u.right,I=u.left);var y=o.quantize.getNearest(D,h,x,m,w);if(y.tdst<=A*A)return y;var l=o.quantize.getNearest(I,h,x,m,w);return l.tdst<y.tdst?l:y},o.quantize.planeDst=function(u,h,x,m,w){var A=u.e;return A[0]*h+A[1]*x+A[2]*m+A[3]*w-u.eMq},o.quantize.dist=function(u,h,x,m,w){var A=h-u[0],D=x-u[1],I=m-u[2],y=w-u[3];return A*A+D*D+I*I+y*y},o.quantize.splitPixels=function(u,h,x,m,w,A){var D=o.quantize.vecDot;for(m-=4;x<m;){for(;D(u,x,w)<=A;)x+=4;for(;D(u,m,w)>A;)m-=4;if(x>=m)break;var I=h[x>>2];h[x>>2]=h[m>>2],h[m>>2]=I,x+=4,m-=4}for(;D(u,x,w)>A;)x-=4;return x+4},o.quantize.vecDot=function(u,h,x){return u[h]*x[0]+u[h+1]*x[1]+u[h+2]*x[2]+u[h+3]*x[3]},o.quantize.stats=function(u,h,x){for(var m=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],w=[0,0,0,0],A=x-h>>2,D=h;D<x;D+=4){var I=u[D]*.00392156862745098,y=u[D+1]*(1/255),l=u[D+2]*(1/255),c=u[D+3]*(1/255);w[0]+=I,w[1]+=y,w[2]+=l,w[3]+=c,m[0]+=I*I,m[1]+=I*y,m[2]+=I*l,m[3]+=I*c,m[5]+=y*y,m[6]+=y*l,m[7]+=y*c,m[10]+=l*l,m[11]+=l*c,m[15]+=c*c}return m[4]=m[1],m[8]=m[2],m[12]=m[3],m[9]=m[6],m[13]=m[7],m[14]=m[11],{R:m,m:w,N:A}},o.quantize.estats=function(u){var h=u.R,x=u.m,m=u.N,w=x[0],A=x[1],D=x[2],I=x[3],y=m==0?0:1/m,l=[h[0]-w*w*y,h[1]-w*A*y,h[2]-w*D*y,h[3]-w*I*y,h[4]-A*w*y,h[5]-A*A*y,h[6]-A*D*y,h[7]-A*I*y,h[8]-D*w*y,h[9]-D*A*y,h[10]-D*D*y,h[11]-D*I*y,h[12]-I*w*y,h[13]-I*A*y,h[14]-I*D*y,h[15]-I*I*y],c=l,L=o.M4,R=[.5,.5,.5,.5],F=0,$=0;if(m!=0)for(var b=0;b<10&&(R=L.multVec(c,R),$=Math.sqrt(L.dot(R,R)),R=L.sml(1/$,R),!(Math.abs($-F)<1e-9));b++)F=$;var k=[w*y,A*y,D*y,I*y],B=L.dot(L.sml(255,k),R),J=k[3]<.001?0:1/k[3];return{Cov:l,q:k,e:R,L:F,eMq255:B,eMq:L.dot(R,k),rgba:(Math.round(255*k[3])<<24|Math.round(255*k[2]*J)<<16|Math.round(255*k[1]*J)<<8|Math.round(255*k[0]*J)<<0)>>>0}},o.M4={multVec:function(u,h){return[u[0]*h[0]+u[1]*h[1]+u[2]*h[2]+u[3]*h[3],u[4]*h[0]+u[5]*h[1]+u[6]*h[2]+u[7]*h[3],u[8]*h[0]+u[9]*h[1]+u[10]*h[2]+u[11]*h[3],u[12]*h[0]+u[13]*h[1]+u[14]*h[2]+u[15]*h[3]]},dot:function(u,h){return u[0]*h[0]+u[1]*h[1]+u[2]*h[2]+u[3]*h[3]},sml:function(u,h){return[u*h[0],u*h[1],u*h[2],u*h[3]]}},o.encode.alphaMul=function(u,h){for(var x=new Uint8Array(u.length),m=u.length>>2,w=0;w<m;w++){var A=w<<2,D=u[A+3];h&&(D=D<128?0:255);var I=D*(1/255);x[A+0]=u[A+0]*I,x[A+1]=u[A+1]*I,x[A+2]=u[A+2]*I,x[A+3]=D}return x}})(a,s)})()}),"./node_modules/upng-js/node_modules/pako/index.js":((r,e,t)=>{var a=t("./node_modules/upng-js/node_modules/pako/lib/utils/common.js").assign,s=t("./node_modules/upng-js/node_modules/pako/lib/deflate.js"),o=t("./node_modules/upng-js/node_modules/pako/lib/inflate.js"),f=t("./node_modules/upng-js/node_modules/pako/lib/zlib/constants.js"),u={};a(u,s,o,f),r.exports=u}),"./node_modules/upng-js/node_modules/pako/lib/deflate.js":((r,e,t)=>{var a=t("./node_modules/upng-js/node_modules/pako/lib/zlib/deflate.js"),s=t("./node_modules/upng-js/node_modules/pako/lib/utils/common.js"),o=t("./node_modules/upng-js/node_modules/pako/lib/utils/strings.js"),f=t("./node_modules/upng-js/node_modules/pako/lib/zlib/messages.js"),u=t("./node_modules/upng-js/node_modules/pako/lib/zlib/zstream.js"),h=Object.prototype.toString,x=0,m=4,w=0,A=1,D=2,I=-1,y=0,l=8;function c($){if(!(this instanceof c))return new c($);this.options=s.assign({level:I,method:l,chunkSize:16384,windowBits:15,memLevel:8,strategy:y,to:""},$||{});var b=this.options;b.raw&&b.windowBits>0?b.windowBits=-b.windowBits:b.gzip&&b.windowBits>0&&b.windowBits<16&&(b.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var k=a.deflateInit2(this.strm,b.level,b.method,b.windowBits,b.memLevel,b.strategy);if(k!==w)throw new Error(f[k]);if(b.header&&a.deflateSetHeader(this.strm,b.header),b.dictionary){var B;if(typeof b.dictionary=="string"?B=o.string2buf(b.dictionary):h.call(b.dictionary)==="[object ArrayBuffer]"?B=new Uint8Array(b.dictionary):B=b.dictionary,k=a.deflateSetDictionary(this.strm,B),k!==w)throw new Error(f[k]);this._dict_set=!0}}c.prototype.push=function($,b){var k=this.strm,B=this.options.chunkSize,J,X;if(this.ended)return!1;X=b===~~b?b:b===!0?m:x,typeof $=="string"?k.input=o.string2buf($):h.call($)==="[object ArrayBuffer]"?k.input=new Uint8Array($):k.input=$,k.next_in=0,k.avail_in=k.input.length;do{if(k.avail_out===0&&(k.output=new s.Buf8(B),k.next_out=0,k.avail_out=B),J=a.deflate(k,X),J!==A&&J!==w)return this.onEnd(J),this.ended=!0,!1;(k.avail_out===0||k.avail_in===0&&(X===m||X===D))&&(this.options.to==="string"?this.onData(o.buf2binstring(s.shrinkBuf(k.output,k.next_out))):this.onData(s.shrinkBuf(k.output,k.next_out)))}while((k.avail_in>0||k.avail_out===0)&&J!==A);return X===m?(J=a.deflateEnd(this.strm),this.onEnd(J),this.ended=!0,J===w):(X===D&&(this.onEnd(w),k.avail_out=0),!0)},c.prototype.onData=function($){this.chunks.push($)},c.prototype.onEnd=function($){$===w&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=$,this.msg=this.strm.msg};function L($,b){var k=new c(b);if(k.push($,!0),k.err)throw k.msg||f[k.err];return k.result}function R($,b){return b=b||{},b.raw=!0,L($,b)}function F($,b){return b=b||{},b.gzip=!0,L($,b)}e.Deflate=c,e.deflate=L,e.deflateRaw=R,e.gzip=F}),"./node_modules/upng-js/node_modules/pako/lib/inflate.js":((r,e,t)=>{var a=t("./node_modules/upng-js/node_modules/pako/lib/zlib/inflate.js"),s=t("./node_modules/upng-js/node_modules/pako/lib/utils/common.js"),o=t("./node_modules/upng-js/node_modules/pako/lib/utils/strings.js"),f=t("./node_modules/upng-js/node_modules/pako/lib/zlib/constants.js"),u=t("./node_modules/upng-js/node_modules/pako/lib/zlib/messages.js"),h=t("./node_modules/upng-js/node_modules/pako/lib/zlib/zstream.js"),x=t("./node_modules/upng-js/node_modules/pako/lib/zlib/gzheader.js"),m=Object.prototype.toString;function w(I){if(!(this instanceof w))return new w(I);this.options=s.assign({chunkSize:16384,windowBits:0,to:""},I||{});var y=this.options;y.raw&&y.windowBits>=0&&y.windowBits<16&&(y.windowBits=-y.windowBits,y.windowBits===0&&(y.windowBits=-15)),y.windowBits>=0&&y.windowBits<16&&!(I&&I.windowBits)&&(y.windowBits+=32),y.windowBits>15&&y.windowBits<48&&(y.windowBits&15||(y.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var l=a.inflateInit2(this.strm,y.windowBits);if(l!==f.Z_OK)throw new Error(u[l]);if(this.header=new x,a.inflateGetHeader(this.strm,this.header),y.dictionary&&(typeof y.dictionary=="string"?y.dictionary=o.string2buf(y.dictionary):m.call(y.dictionary)==="[object ArrayBuffer]"&&(y.dictionary=new Uint8Array(y.dictionary)),y.raw&&(l=a.inflateSetDictionary(this.strm,y.dictionary),l!==f.Z_OK)))throw new Error(u[l])}w.prototype.push=function(I,y){var l=this.strm,c=this.options.chunkSize,L=this.options.dictionary,R,F,$,b,k,B=!1;if(this.ended)return!1;F=y===~~y?y:y===!0?f.Z_FINISH:f.Z_NO_FLUSH,typeof I=="string"?l.input=o.binstring2buf(I):m.call(I)==="[object ArrayBuffer]"?l.input=new Uint8Array(I):l.input=I,l.next_in=0,l.avail_in=l.input.length;do{if(l.avail_out===0&&(l.output=new s.Buf8(c),l.next_out=0,l.avail_out=c),R=a.inflate(l,f.Z_NO_FLUSH),R===f.Z_NEED_DICT&&L&&(R=a.inflateSetDictionary(this.strm,L)),R===f.Z_BUF_ERROR&&B===!0&&(R=f.Z_OK,B=!1),R!==f.Z_STREAM_END&&R!==f.Z_OK)return this.onEnd(R),this.ended=!0,!1;l.next_out&&(l.avail_out===0||R===f.Z_STREAM_END||l.avail_in===0&&(F===f.Z_FINISH||F===f.Z_SYNC_FLUSH))&&(this.options.to==="string"?($=o.utf8border(l.output,l.next_out),b=l.next_out-$,k=o.buf2string(l.output,$),l.next_out=b,l.avail_out=c-b,b&&s.arraySet(l.output,l.output,$,b,0),this.onData(k)):this.onData(s.shrinkBuf(l.output,l.next_out))),l.avail_in===0&&l.avail_out===0&&(B=!0)}while((l.avail_in>0||l.avail_out===0)&&R!==f.Z_STREAM_END);return R===f.Z_STREAM_END&&(F=f.Z_FINISH),F===f.Z_FINISH?(R=a.inflateEnd(this.strm),this.onEnd(R),this.ended=!0,R===f.Z_OK):(F===f.Z_SYNC_FLUSH&&(this.onEnd(f.Z_OK),l.avail_out=0),!0)},w.prototype.onData=function(I){this.chunks.push(I)},w.prototype.onEnd=function(I){I===f.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=I,this.msg=this.strm.msg};function A(I,y){var l=new w(y);if(l.push(I,!0),l.err)throw l.msg||u[l.err];return l.result}function D(I,y){return y=y||{},y.raw=!0,A(I,y)}e.Inflate=w,e.inflate=A,e.inflateRaw=D,e.ungzip=A}),"./node_modules/upng-js/node_modules/pako/lib/utils/common.js":((r,e)=>{var t=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function a(f,u){return Object.prototype.hasOwnProperty.call(f,u)}e.assign=function(f){for(var u=Array.prototype.slice.call(arguments,1);u.length;){var h=u.shift();if(h){if(typeof h!="object")throw new TypeError(h+"must be non-object");for(var x in h)a(h,x)&&(f[x]=h[x])}}return f},e.shrinkBuf=function(f,u){return f.length===u?f:f.subarray?f.subarray(0,u):(f.length=u,f)};var s={arraySet:function(f,u,h,x,m){if(u.subarray&&f.subarray){f.set(u.subarray(h,h+x),m);return}for(var w=0;w<x;w++)f[m+w]=u[h+w]},flattenChunks:function(f){var u,h,x,m,w,A;for(x=0,u=0,h=f.length;u<h;u++)x+=f[u].length;for(A=new Uint8Array(x),m=0,u=0,h=f.length;u<h;u++)w=f[u],A.set(w,m),m+=w.length;return A}},o={arraySet:function(f,u,h,x,m){for(var w=0;w<x;w++)f[m+w]=u[h+w]},flattenChunks:function(f){return[].concat.apply([],f)}};e.setTyped=function(f){f?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,s)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,o))},e.setTyped(t)}),"./node_modules/upng-js/node_modules/pako/lib/utils/strings.js":((r,e,t)=>{var a=t("./node_modules/upng-js/node_modules/pako/lib/utils/common.js"),s=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch{s=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{o=!1}for(var f=new a.Buf8(256),u=0;u<256;u++)f[u]=u>=252?6:u>=248?5:u>=240?4:u>=224?3:u>=192?2:1;f[254]=f[254]=1,e.string2buf=function(x){var m,w,A,D,I,y=x.length,l=0;for(D=0;D<y;D++)w=x.charCodeAt(D),(w&64512)===55296&&D+1<y&&(A=x.charCodeAt(D+1),(A&64512)===56320&&(w=65536+(w-55296<<10)+(A-56320),D++)),l+=w<128?1:w<2048?2:w<65536?3:4;for(m=new a.Buf8(l),I=0,D=0;I<l;D++)w=x.charCodeAt(D),(w&64512)===55296&&D+1<y&&(A=x.charCodeAt(D+1),(A&64512)===56320&&(w=65536+(w-55296<<10)+(A-56320),D++)),w<128?m[I++]=w:w<2048?(m[I++]=192|w>>>6,m[I++]=128|w&63):w<65536?(m[I++]=224|w>>>12,m[I++]=128|w>>>6&63,m[I++]=128|w&63):(m[I++]=240|w>>>18,m[I++]=128|w>>>12&63,m[I++]=128|w>>>6&63,m[I++]=128|w&63);return m};function h(x,m){if(m<65534&&(x.subarray&&o||!x.subarray&&s))return String.fromCharCode.apply(null,a.shrinkBuf(x,m));for(var w="",A=0;A<m;A++)w+=String.fromCharCode(x[A]);return w}e.buf2binstring=function(x){return h(x,x.length)},e.binstring2buf=function(x){for(var m=new a.Buf8(x.length),w=0,A=m.length;w<A;w++)m[w]=x.charCodeAt(w);return m},e.buf2string=function(x,m){var w,A,D,I,y=m||x.length,l=new Array(y*2);for(A=0,w=0;w<y;){if(D=x[w++],D<128){l[A++]=D;continue}if(I=f[D],I>4){l[A++]=65533,w+=I-1;continue}for(D&=I===2?31:I===3?15:7;I>1&&w<y;)D=D<<6|x[w++]&63,I--;if(I>1){l[A++]=65533;continue}D<65536?l[A++]=D:(D-=65536,l[A++]=55296|D>>10&1023,l[A++]=56320|D&1023)}return h(l,A)},e.utf8border=function(x,m){var w;for(m=m||x.length,m>x.length&&(m=x.length),w=m-1;w>=0&&(x[w]&192)===128;)w--;return w<0||w===0?m:w+f[x[w]]>m?w:m}}),"./node_modules/upng-js/node_modules/pako/lib/zlib/adler32.js":(r=>{function e(t,a,s,o){for(var f=t&65535|0,u=t>>>16&65535|0,h=0;s!==0;){h=s>2e3?2e3:s,s-=h;do f=f+a[o++]|0,u=u+f|0;while(--h);f%=65521,u%=65521}return f|u<<16|0}r.exports=e}),"./node_modules/upng-js/node_modules/pako/lib/zlib/constants.js":(r=>{r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}}),"./node_modules/upng-js/node_modules/pako/lib/zlib/crc32.js":(r=>{function e(){for(var s,o=[],f=0;f<256;f++){s=f;for(var u=0;u<8;u++)s=s&1?3988292384^s>>>1:s>>>1;o[f]=s}return o}var t=e();function a(s,o,f,u){var h=t,x=u+f;s^=-1;for(var m=u;m<x;m++)s=s>>>8^h[(s^o[m])&255];return s^-1}r.exports=a}),"./node_modules/upng-js/node_modules/pako/lib/zlib/deflate.js":((r,e,t)=>{var a=t("./node_modules/upng-js/node_modules/pako/lib/utils/common.js"),s=t("./node_modules/upng-js/node_modules/pako/lib/zlib/trees.js"),o=t("./node_modules/upng-js/node_modules/pako/lib/zlib/adler32.js"),f=t("./node_modules/upng-js/node_modules/pako/lib/zlib/crc32.js"),u=t("./node_modules/upng-js/node_modules/pako/lib/zlib/messages.js"),h=0,x=1,m=3,w=4,A=5,D=0,I=1,y=-2,l=-3,c=-5,L=-1,R=1,F=2,$=3,b=4,k=0,B=2,J=8,X=9,ae=15,He=8,Pe=29,ue=256,Oe=ue+1+Pe,we=30,Ze=19,it=2*Oe+1,lt=15,Vt=3,_e=258,pr=_e+Vt+1,_s=32,Ei=42,Bl=69,Wl=73,Ep=91,Lp=103,Op=113,R0=666,N0=1,Qp=2,O0=3,zp=4,M0=3;function W0(Ke,g0){return Ke.msg=u[g0],g0}function im(Ke){return(Ke<<1)-(Ke>4?9:0)}function F0(Ke){for(var g0=Ke.length;--g0>=0;)Ke[g0]=0}function fm(Ke){var g0=Ke.state,d0=g0.pending;d0>Ke.avail_out&&(d0=Ke.avail_out),d0!==0&&(a.arraySet(Ke.output,g0.pending_buf,g0.pending_out,d0,Ke.next_out),Ke.next_out+=d0,g0.pending_out+=d0,Ke.total_out+=d0,Ke.avail_out-=d0,g0.pending-=d0,g0.pending===0&&(g0.pending_out=0))}function cm(Ke,g0){s._tr_flush_block(Ke,Ke.block_start>=0?Ke.block_start:-1,Ke.strstart-Ke.block_start,g0),Ke.block_start=Ke.strstart,fm(Ke.strm)}function Ap(Ke,g0){Ke.pending_buf[Ke.pending++]=g0}function Io(Ke,g0){Ke.pending_buf[Ke.pending++]=g0>>>8&255,Ke.pending_buf[Ke.pending++]=g0&255}function p0(Ke,g0,d0,Vl){var jp=Ke.avail_in;return jp>Vl&&(jp=Vl),jp===0?0:(Ke.avail_in-=jp,a.arraySet(g0,Ke.input,Ke.next_in,jp,d0),Ke.state.wrap===1?Ke.adler=o(Ke.adler,g0,jp,d0):Ke.state.wrap===2&&(Ke.adler=f(Ke.adler,g0,jp,d0)),Ke.next_in+=jp,Ke.total_in+=jp,jp)}function a0(Ke,g0){var d0=Ke.max_chain_length,Vl=Ke.strstart,jp,K0,Pm=Ke.prev_length,Cm=Ke.nice_match,Fm=Ke.strstart>Ke.w_size-pr?Ke.strstart-(Ke.w_size-pr):0,ev=Ke.window,h1=Ke.w_mask,xv=Ke.prev,gv=Ke.strstart+_e,zv=ev[Vl+Pm-1],a1=ev[Vl+Pm];Ke.prev_length>=Ke.good_match&&(d0>>=2),Cm>Ke.lookahead&&(Cm=Ke.lookahead);do if(jp=g0,!(ev[jp+Pm]!==a1||ev[jp+Pm-1]!==zv||ev[jp]!==ev[Vl]||ev[++jp]!==ev[Vl+1])){Vl+=2,jp++;do;while(ev[++Vl]===ev[++jp]&&ev[++Vl]===ev[++jp]&&ev[++Vl]===ev[++jp]&&ev[++Vl]===ev[++jp]&&ev[++Vl]===ev[++jp]&&ev[++Vl]===ev[++jp]&&ev[++Vl]===ev[++jp]&&ev[++Vl]===ev[++jp]&&Vl<gv);if(K0=_e-(gv-Vl),Vl=gv-_e,K0>Pm){if(Ke.match_start=g0,Pm=K0,K0>=Cm)break;zv=ev[Vl+Pm-1],a1=ev[Vl+Pm]}}while((g0=xv[g0&h1])>Fm&&--d0!==0);return Pm<=Ke.lookahead?Pm:Ke.lookahead}function rm(Ke){var g0=Ke.w_size,d0,Vl,jp,K0,Pm;do{if(K0=Ke.window_size-Ke.lookahead-Ke.strstart,Ke.strstart>=g0+(g0-pr)){a.arraySet(Ke.window,Ke.window,g0,g0,0),Ke.match_start-=g0,Ke.strstart-=g0,Ke.block_start-=g0,Vl=Ke.hash_size,d0=Vl;do jp=Ke.head[--d0],Ke.head[d0]=jp>=g0?jp-g0:0;while(--Vl);Vl=g0,d0=Vl;do jp=Ke.prev[--d0],Ke.prev[d0]=jp>=g0?jp-g0:0;while(--Vl);K0+=g0}if(Ke.strm.avail_in===0)break;if(Vl=p0(Ke.strm,Ke.window,Ke.strstart+Ke.lookahead,K0),Ke.lookahead+=Vl,Ke.lookahead+Ke.insert>=Vt)for(Pm=Ke.strstart-Ke.insert,Ke.ins_h=Ke.window[Pm],Ke.ins_h=(Ke.ins_h<<Ke.hash_shift^Ke.window[Pm+1])&Ke.hash_mask;Ke.insert&&(Ke.ins_h=(Ke.ins_h<<Ke.hash_shift^Ke.window[Pm+Vt-1])&Ke.hash_mask,Ke.prev[Pm&Ke.w_mask]=Ke.head[Ke.ins_h],Ke.head[Ke.ins_h]=Pm,Pm++,Ke.insert--,!(Ke.lookahead+Ke.insert<Vt)););}while(Ke.lookahead<pr&&Ke.strm.avail_in!==0)}function X0(Ke,g0){var d0=65535;for(d0>Ke.pending_buf_size-5&&(d0=Ke.pending_buf_size-5);;){if(Ke.lookahead<=1){if(rm(Ke),Ke.lookahead===0&&g0===h)return N0;if(Ke.lookahead===0)break}Ke.strstart+=Ke.lookahead,Ke.lookahead=0;var Vl=Ke.block_start+d0;if((Ke.strstart===0||Ke.strstart>=Vl)&&(Ke.lookahead=Ke.strstart-Vl,Ke.strstart=Vl,cm(Ke,!1),Ke.strm.avail_out===0)||Ke.strstart-Ke.block_start>=Ke.w_size-pr&&(cm(Ke,!1),Ke.strm.avail_out===0))return N0}return Ke.insert=0,g0===w?(cm(Ke,!0),Ke.strm.avail_out===0?O0:zp):(Ke.strstart>Ke.block_start&&(cm(Ke,!1),Ke.strm.avail_out),N0)}function Nl(Ke,g0){for(var d0,Vl;;){if(Ke.lookahead<pr){if(rm(Ke),Ke.lookahead<pr&&g0===h)return N0;if(Ke.lookahead===0)break}if(d0=0,Ke.lookahead>=Vt&&(Ke.ins_h=(Ke.ins_h<<Ke.hash_shift^Ke.window[Ke.strstart+Vt-1])&Ke.hash_mask,d0=Ke.prev[Ke.strstart&Ke.w_mask]=Ke.head[Ke.ins_h],Ke.head[Ke.ins_h]=Ke.strstart),d0!==0&&Ke.strstart-d0<=Ke.w_size-pr&&(Ke.match_length=a0(Ke,d0)),Ke.match_length>=Vt)if(Vl=s._tr_tally(Ke,Ke.strstart-Ke.match_start,Ke.match_length-Vt),Ke.lookahead-=Ke.match_length,Ke.match_length<=Ke.max_lazy_match&&Ke.lookahead>=Vt){Ke.match_length--;do Ke.strstart++,Ke.ins_h=(Ke.ins_h<<Ke.hash_shift^Ke.window[Ke.strstart+Vt-1])&Ke.hash_mask,d0=Ke.prev[Ke.strstart&Ke.w_mask]=Ke.head[Ke.ins_h],Ke.head[Ke.ins_h]=Ke.strstart;while(--Ke.match_length!==0);Ke.strstart++}else Ke.strstart+=Ke.match_length,Ke.match_length=0,Ke.ins_h=Ke.window[Ke.strstart],Ke.ins_h=(Ke.ins_h<<Ke.hash_shift^Ke.window[Ke.strstart+1])&Ke.hash_mask;else Vl=s._tr_tally(Ke,0,Ke.window[Ke.strstart]),Ke.lookahead--,Ke.strstart++;if(Vl&&(cm(Ke,!1),Ke.strm.avail_out===0))return N0}return Ke.insert=Ke.strstart<Vt-1?Ke.strstart:Vt-1,g0===w?(cm(Ke,!0),Ke.strm.avail_out===0?O0:zp):Ke.last_lit&&(cm(Ke,!1),Ke.strm.avail_out===0)?N0:Qp}function Gl(Ke,g0){for(var d0,Vl,jp;;){if(Ke.lookahead<pr){if(rm(Ke),Ke.lookahead<pr&&g0===h)return N0;if(Ke.lookahead===0)break}if(d0=0,Ke.lookahead>=Vt&&(Ke.ins_h=(Ke.ins_h<<Ke.hash_shift^Ke.window[Ke.strstart+Vt-1])&Ke.hash_mask,d0=Ke.prev[Ke.strstart&Ke.w_mask]=Ke.head[Ke.ins_h],Ke.head[Ke.ins_h]=Ke.strstart),Ke.prev_length=Ke.match_length,Ke.prev_match=Ke.match_start,Ke.match_length=Vt-1,d0!==0&&Ke.prev_length<Ke.max_lazy_match&&Ke.strstart-d0<=Ke.w_size-pr&&(Ke.match_length=a0(Ke,d0),Ke.match_length<=5&&(Ke.strategy===R||Ke.match_length===Vt&&Ke.strstart-Ke.match_start>4096)&&(Ke.match_length=Vt-1)),Ke.prev_length>=Vt&&Ke.match_length<=Ke.prev_length){jp=Ke.strstart+Ke.lookahead-Vt,Vl=s._tr_tally(Ke,Ke.strstart-1-Ke.prev_match,Ke.prev_length-Vt),Ke.lookahead-=Ke.prev_length-1,Ke.prev_length-=2;do++Ke.strstart<=jp&&(Ke.ins_h=(Ke.ins_h<<Ke.hash_shift^Ke.window[Ke.strstart+Vt-1])&Ke.hash_mask,d0=Ke.prev[Ke.strstart&Ke.w_mask]=Ke.head[Ke.ins_h],Ke.head[Ke.ins_h]=Ke.strstart);while(--Ke.prev_length!==0);if(Ke.match_available=0,Ke.match_length=Vt-1,Ke.strstart++,Vl&&(cm(Ke,!1),Ke.strm.avail_out===0))return N0}else if(Ke.match_available){if(Vl=s._tr_tally(Ke,0,Ke.window[Ke.strstart-1]),Vl&&cm(Ke,!1),Ke.strstart++,Ke.lookahead--,Ke.strm.avail_out===0)return N0}else Ke.match_available=1,Ke.strstart++,Ke.lookahead--}return Ke.match_available&&(Vl=s._tr_tally(Ke,0,Ke.window[Ke.strstart-1]),Ke.match_available=0),Ke.insert=Ke.strstart<Vt-1?Ke.strstart:Vt-1,g0===w?(cm(Ke,!0),Ke.strm.avail_out===0?O0:zp):Ke.last_lit&&(cm(Ke,!1),Ke.strm.avail_out===0)?N0:Qp}function Mp(Ke,g0){for(var d0,Vl,jp,K0,Pm=Ke.window;;){if(Ke.lookahead<=_e){if(rm(Ke),Ke.lookahead<=_e&&g0===h)return N0;if(Ke.lookahead===0)break}if(Ke.match_length=0,Ke.lookahead>=Vt&&Ke.strstart>0&&(jp=Ke.strstart-1,Vl=Pm[jp],Vl===Pm[++jp]&&Vl===Pm[++jp]&&Vl===Pm[++jp])){K0=Ke.strstart+_e;do;while(Vl===Pm[++jp]&&Vl===Pm[++jp]&&Vl===Pm[++jp]&&Vl===Pm[++jp]&&Vl===Pm[++jp]&&Vl===Pm[++jp]&&Vl===Pm[++jp]&&Vl===Pm[++jp]&&jp<K0);Ke.match_length=_e-(K0-jp),Ke.match_length>Ke.lookahead&&(Ke.match_length=Ke.lookahead)}if(Ke.match_length>=Vt?(d0=s._tr_tally(Ke,1,Ke.match_length-Vt),Ke.lookahead-=Ke.match_length,Ke.strstart+=Ke.match_length,Ke.match_length=0):(d0=s._tr_tally(Ke,0,Ke.window[Ke.strstart]),Ke.lookahead--,Ke.strstart++),d0&&(cm(Ke,!1),Ke.strm.avail_out===0))return N0}return Ke.insert=0,g0===w?(cm(Ke,!0),Ke.strm.avail_out===0?O0:zp):Ke.last_lit&&(cm(Ke,!1),Ke.strm.avail_out===0)?N0:Qp}function _0(Ke,g0){for(var d0;;){if(Ke.lookahead===0&&(rm(Ke),Ke.lookahead===0)){if(g0===h)return N0;break}if(Ke.match_length=0,d0=s._tr_tally(Ke,0,Ke.window[Ke.strstart]),Ke.lookahead--,Ke.strstart++,d0&&(cm(Ke,!1),Ke.strm.avail_out===0))return N0}return Ke.insert=0,g0===w?(cm(Ke,!0),Ke.strm.avail_out===0?O0:zp):Ke.last_lit&&(cm(Ke,!1),Ke.strm.avail_out===0)?N0:Qp}function v0(Ke,g0,d0,Vl,jp){this.good_length=Ke,this.max_lazy=g0,this.nice_length=d0,this.max_chain=Vl,this.func=jp}var z0;z0=[new v0(0,0,0,0,X0),new v0(4,4,8,4,Nl),new v0(4,5,16,8,Nl),new v0(4,6,32,32,Nl),new v0(4,4,16,16,Gl),new v0(8,16,32,32,Gl),new v0(8,16,128,128,Gl),new v0(8,32,128,256,Gl),new v0(32,128,258,1024,Gl),new v0(32,258,258,4096,Gl)];function sm(Ke){Ke.window_size=2*Ke.w_size,F0(Ke.head),Ke.max_lazy_match=z0[Ke.level].max_lazy,Ke.good_match=z0[Ke.level].good_length,Ke.nice_match=z0[Ke.level].nice_length,Ke.max_chain_length=z0[Ke.level].max_chain,Ke.strstart=0,Ke.block_start=0,Ke.lookahead=0,Ke.insert=0,Ke.match_length=Ke.prev_length=Vt-1,Ke.match_available=0,Ke.ins_h=0}function Uo(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=J,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new a.Buf16(it*2),this.dyn_dtree=new a.Buf16((2*we+1)*2),this.bl_tree=new a.Buf16((2*Ze+1)*2),F0(this.dyn_ltree),F0(this.dyn_dtree),F0(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new a.Buf16(lt+1),this.heap=new a.Buf16(2*Oe+1),F0(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new a.Buf16(2*Oe+1),F0(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function u0(Ke){var g0;return!Ke||!Ke.state?W0(Ke,y):(Ke.total_in=Ke.total_out=0,Ke.data_type=B,g0=Ke.state,g0.pending=0,g0.pending_out=0,g0.wrap<0&&(g0.wrap=-g0.wrap),g0.status=g0.wrap?Ei:Op,Ke.adler=g0.wrap===2?0:1,g0.last_flush=h,s._tr_init(g0),D)}function x0(Ke){var g0=u0(Ke);return g0===D&&sm(Ke.state),g0}function Xl(Ke,g0){return!Ke||!Ke.state||Ke.state.wrap!==2?y:(Ke.state.gzhead=g0,D)}function Bp(Ke,g0,d0,Vl,jp,K0){if(!Ke)return y;var Pm=1;if(g0===L&&(g0=6),Vl<0?(Pm=0,Vl=-Vl):Vl>15&&(Pm=2,Vl-=16),jp<1||jp>X||d0!==J||Vl<8||Vl>15||g0<0||g0>9||K0<0||K0>b)return W0(Ke,y);Vl===8&&(Vl=9);var Cm=new Uo;return Ke.state=Cm,Cm.strm=Ke,Cm.wrap=Pm,Cm.gzhead=null,Cm.w_bits=Vl,Cm.w_size=1<<Cm.w_bits,Cm.w_mask=Cm.w_size-1,Cm.hash_bits=jp+7,Cm.hash_size=1<<Cm.hash_bits,Cm.hash_mask=Cm.hash_size-1,Cm.hash_shift=~~((Cm.hash_bits+Vt-1)/Vt),Cm.window=new a.Buf8(Cm.w_size*2),Cm.head=new a.Buf16(Cm.hash_size),Cm.prev=new a.Buf16(Cm.w_size),Cm.lit_bufsize=1<<jp+6,Cm.pending_buf_size=Cm.lit_bufsize*4,Cm.pending_buf=new a.Buf8(Cm.pending_buf_size),Cm.d_buf=1*Cm.lit_bufsize,Cm.l_buf=3*Cm.lit_bufsize,Cm.level=g0,Cm.strategy=K0,Cm.method=d0,x0(Ke)}function L0(Ke,g0){return Bp(Ke,g0,J,ae,He,k)}function kl(Ke,g0){var d0,Vl,jp,K0;if(!Ke||!Ke.state||g0>A||g0<0)return Ke?W0(Ke,y):y;if(Vl=Ke.state,!Ke.output||!Ke.input&&Ke.avail_in!==0||Vl.status===R0&&g0!==w)return W0(Ke,Ke.avail_out===0?c:y);if(Vl.strm=Ke,d0=Vl.last_flush,Vl.last_flush=g0,Vl.status===Ei)if(Vl.wrap===2)Ke.adler=0,Ap(Vl,31),Ap(Vl,139),Ap(Vl,8),Vl.gzhead?(Ap(Vl,(Vl.gzhead.text?1:0)+(Vl.gzhead.hcrc?2:0)+(Vl.gzhead.extra?4:0)+(Vl.gzhead.name?8:0)+(Vl.gzhead.comment?16:0)),Ap(Vl,Vl.gzhead.time&255),Ap(Vl,Vl.gzhead.time>>8&255),Ap(Vl,Vl.gzhead.time>>16&255),Ap(Vl,Vl.gzhead.time>>24&255),Ap(Vl,Vl.level===9?2:Vl.strategy>=F||Vl.level<2?4:0),Ap(Vl,Vl.gzhead.os&255),Vl.gzhead.extra&&Vl.gzhead.extra.length&&(Ap(Vl,Vl.gzhead.extra.length&255),Ap(Vl,Vl.gzhead.extra.length>>8&255)),Vl.gzhead.hcrc&&(Ke.adler=f(Ke.adler,Vl.pending_buf,Vl.pending,0)),Vl.gzindex=0,Vl.status=Bl):(Ap(Vl,0),Ap(Vl,0),Ap(Vl,0),Ap(Vl,0),Ap(Vl,0),Ap(Vl,Vl.level===9?2:Vl.strategy>=F||Vl.level<2?4:0),Ap(Vl,M0),Vl.status=Op);else{var Pm=J+(Vl.w_bits-8<<4)<<8,Cm=-1;Vl.strategy>=F||Vl.level<2?Cm=0:Vl.level<6?Cm=1:Vl.level===6?Cm=2:Cm=3,Pm|=Cm<<6,Vl.strstart!==0&&(Pm|=_s),Pm+=31-Pm%31,Vl.status=Op,Io(Vl,Pm),Vl.strstart!==0&&(Io(Vl,Ke.adler>>>16),Io(Vl,Ke.adler&65535)),Ke.adler=1}if(Vl.status===Bl)if(Vl.gzhead.extra){for(jp=Vl.pending;Vl.gzindex<(Vl.gzhead.extra.length&65535)&&!(Vl.pending===Vl.pending_buf_size&&(Vl.gzhead.hcrc&&Vl.pending>jp&&(Ke.adler=f(Ke.adler,Vl.pending_buf,Vl.pending-jp,jp)),fm(Ke),jp=Vl.pending,Vl.pending===Vl.pending_buf_size));)Ap(Vl,Vl.gzhead.extra[Vl.gzindex]&255),Vl.gzindex++;Vl.gzhead.hcrc&&Vl.pending>jp&&(Ke.adler=f(Ke.adler,Vl.pending_buf,Vl.pending-jp,jp)),Vl.gzindex===Vl.gzhead.extra.length&&(Vl.gzindex=0,Vl.status=Wl)}else Vl.status=Wl;if(Vl.status===Wl)if(Vl.gzhead.name){jp=Vl.pending;do{if(Vl.pending===Vl.pending_buf_size&&(Vl.gzhead.hcrc&&Vl.pending>jp&&(Ke.adler=f(Ke.adler,Vl.pending_buf,Vl.pending-jp,jp)),fm(Ke),jp=Vl.pending,Vl.pending===Vl.pending_buf_size)){K0=1;break}Vl.gzindex<Vl.gzhead.name.length?K0=Vl.gzhead.name.charCodeAt(Vl.gzindex++)&255:K0=0,Ap(Vl,K0)}while(K0!==0);Vl.gzhead.hcrc&&Vl.pending>jp&&(Ke.adler=f(Ke.adler,Vl.pending_buf,Vl.pending-jp,jp)),K0===0&&(Vl.gzindex=0,Vl.status=Ep)}else Vl.status=Ep;if(Vl.status===Ep)if(Vl.gzhead.comment){jp=Vl.pending;do{if(Vl.pending===Vl.pending_buf_size&&(Vl.gzhead.hcrc&&Vl.pending>jp&&(Ke.adler=f(Ke.adler,Vl.pending_buf,Vl.pending-jp,jp)),fm(Ke),jp=Vl.pending,Vl.pending===Vl.pending_buf_size)){K0=1;break}Vl.gzindex<Vl.gzhead.comment.length?K0=Vl.gzhead.comment.charCodeAt(Vl.gzindex++)&255:K0=0,Ap(Vl,K0)}while(K0!==0);Vl.gzhead.hcrc&&Vl.pending>jp&&(Ke.adler=f(Ke.adler,Vl.pending_buf,Vl.pending-jp,jp)),K0===0&&(Vl.status=Lp)}else Vl.status=Lp;if(Vl.status===Lp&&(Vl.gzhead.hcrc?(Vl.pending+2>Vl.pending_buf_size&&fm(Ke),Vl.pending+2<=Vl.pending_buf_size&&(Ap(Vl,Ke.adler&255),Ap(Vl,Ke.adler>>8&255),Ke.adler=0,Vl.status=Op)):Vl.status=Op),Vl.pending!==0){if(fm(Ke),Ke.avail_out===0)return Vl.last_flush=-1,D}else if(Ke.avail_in===0&&im(g0)<=im(d0)&&g0!==w)return W0(Ke,c);if(Vl.status===R0&&Ke.avail_in!==0)return W0(Ke,c);if(Ke.avail_in!==0||Vl.lookahead!==0||g0!==h&&Vl.status!==R0){var Fm=Vl.strategy===F?_0(Vl,g0):Vl.strategy===$?Mp(Vl,g0):z0[Vl.level].func(Vl,g0);if((Fm===O0||Fm===zp)&&(Vl.status=R0),Fm===N0||Fm===O0)return Ke.avail_out===0&&(Vl.last_flush=-1),D;if(Fm===Qp&&(g0===x?s._tr_align(Vl):g0!==A&&(s._tr_stored_block(Vl,0,0,!1),g0===m&&(F0(Vl.head),Vl.lookahead===0&&(Vl.strstart=0,Vl.block_start=0,Vl.insert=0))),fm(Ke),Ke.avail_out===0))return Vl.last_flush=-1,D}return g0!==w?D:Vl.wrap<=0?I:(Vl.wrap===2?(Ap(Vl,Ke.adler&255),Ap(Vl,Ke.adler>>8&255),Ap(Vl,Ke.adler>>16&255),Ap(Vl,Ke.adler>>24&255),Ap(Vl,Ke.total_in&255),Ap(Vl,Ke.total_in>>8&255),Ap(Vl,Ke.total_in>>16&255),Ap(Vl,Ke.total_in>>24&255)):(Io(Vl,Ke.adler>>>16),Io(Vl,Ke.adler&65535)),fm(Ke),Vl.wrap>0&&(Vl.wrap=-Vl.wrap),Vl.pending!==0?D:I)}function Np(Ke){var g0;return!Ke||!Ke.state?y:(g0=Ke.state.status,g0!==Ei&&g0!==Bl&&g0!==Wl&&g0!==Ep&&g0!==Lp&&g0!==Op&&g0!==R0?W0(Ke,y):(Ke.state=null,g0===Op?W0(Ke,l):D))}function V0(Ke,g0){var d0=g0.length,Vl,jp,K0,Pm,Cm,Fm,ev,h1;if(!Ke||!Ke.state||(Vl=Ke.state,Pm=Vl.wrap,Pm===2||Pm===1&&Vl.status!==Ei||Vl.lookahead))return y;for(Pm===1&&(Ke.adler=o(Ke.adler,g0,d0,0)),Vl.wrap=0,d0>=Vl.w_size&&(Pm===0&&(F0(Vl.head),Vl.strstart=0,Vl.block_start=0,Vl.insert=0),h1=new a.Buf8(Vl.w_size),a.arraySet(h1,g0,d0-Vl.w_size,Vl.w_size,0),g0=h1,d0=Vl.w_size),Cm=Ke.avail_in,Fm=Ke.next_in,ev=Ke.input,Ke.avail_in=d0,Ke.next_in=0,Ke.input=g0,rm(Vl);Vl.lookahead>=Vt;){jp=Vl.strstart,K0=Vl.lookahead-(Vt-1);do Vl.ins_h=(Vl.ins_h<<Vl.hash_shift^Vl.window[jp+Vt-1])&Vl.hash_mask,Vl.prev[jp&Vl.w_mask]=Vl.head[Vl.ins_h],Vl.head[Vl.ins_h]=jp,jp++;while(--K0);Vl.strstart=jp,Vl.lookahead=Vt-1,rm(Vl)}return Vl.strstart+=Vl.lookahead,Vl.block_start=Vl.strstart,Vl.insert=Vl.lookahead,Vl.lookahead=0,Vl.match_length=Vl.prev_length=Vt-1,Vl.match_available=0,Ke.next_in=Fm,Ke.input=ev,Ke.avail_in=Cm,Vl.wrap=Pm,D}e.deflateInit=L0,e.deflateInit2=Bp,e.deflateReset=x0,e.deflateResetKeep=u0,e.deflateSetHeader=Xl,e.deflate=kl,e.deflateEnd=Np,e.deflateSetDictionary=V0,e.deflateInfo="pako deflate (from Nodeca project)"}),"./node_modules/upng-js/node_modules/pako/lib/zlib/gzheader.js":(r=>{function e(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}r.exports=e}),"./node_modules/upng-js/node_modules/pako/lib/zlib/inffast.js":(r=>{var e=30,t=12;r.exports=function(a,s){var o,f,u,h,x,m,w,A,D,I,y,l,c,L,R,F,$,b,k,B,J,X,ae,He,Pe;o=a.state,f=a.next_in,He=a.input,u=f+(a.avail_in-5),h=a.next_out,Pe=a.output,x=h-(s-a.avail_out),m=h+(a.avail_out-257),w=o.dmax,A=o.wsize,D=o.whave,I=o.wnext,y=o.window,l=o.hold,c=o.bits,L=o.lencode,R=o.distcode,F=(1<<o.lenbits)-1,$=(1<<o.distbits)-1;e:do{c<15&&(l+=He[f++]<<c,c+=8,l+=He[f++]<<c,c+=8),b=L[l&F];t:for(;;){if(k=b>>>24,l>>>=k,c-=k,k=b>>>16&255,k===0)Pe[h++]=b&65535;else if(k&16){B=b&65535,k&=15,k&&(c<k&&(l+=He[f++]<<c,c+=8),B+=l&(1<<k)-1,l>>>=k,c-=k),c<15&&(l+=He[f++]<<c,c+=8,l+=He[f++]<<c,c+=8),b=R[l&$];r:for(;;){if(k=b>>>24,l>>>=k,c-=k,k=b>>>16&255,k&16){if(J=b&65535,k&=15,c<k&&(l+=He[f++]<<c,c+=8,c<k&&(l+=He[f++]<<c,c+=8)),J+=l&(1<<k)-1,J>w){a.msg="invalid distance too far back",o.mode=e;break e}if(l>>>=k,c-=k,k=h-x,J>k){if(k=J-k,k>D&&o.sane){a.msg="invalid distance too far back",o.mode=e;break e}if(X=0,ae=y,I===0){if(X+=A-k,k<B){B-=k;do Pe[h++]=y[X++];while(--k);X=h-J,ae=Pe}}else if(I<k){if(X+=A+I-k,k-=I,k<B){B-=k;do Pe[h++]=y[X++];while(--k);if(X=0,I<B){k=I,B-=k;do Pe[h++]=y[X++];while(--k);X=h-J,ae=Pe}}}else if(X+=I-k,k<B){B-=k;do Pe[h++]=y[X++];while(--k);X=h-J,ae=Pe}for(;B>2;)Pe[h++]=ae[X++],Pe[h++]=ae[X++],Pe[h++]=ae[X++],B-=3;B&&(Pe[h++]=ae[X++],B>1&&(Pe[h++]=ae[X++]))}else{X=h-J;do Pe[h++]=Pe[X++],Pe[h++]=Pe[X++],Pe[h++]=Pe[X++],B-=3;while(B>2);B&&(Pe[h++]=Pe[X++],B>1&&(Pe[h++]=Pe[X++]))}}else if(k&64){a.msg="invalid distance code",o.mode=e;break e}else{b=R[(b&65535)+(l&(1<<k)-1)];continue r}break}}else if(k&64)if(k&32){o.mode=t;break e}else{a.msg="invalid literal/length code",o.mode=e;break e}else{b=L[(b&65535)+(l&(1<<k)-1)];continue t}break}}while(f<u&&h<m);B=c>>3,f-=B,c-=B<<3,l&=(1<<c)-1,a.next_in=f,a.next_out=h,a.avail_in=f<u?5+(u-f):5-(f-u),a.avail_out=h<m?257+(m-h):257-(h-m),o.hold=l,o.bits=c}}),"./node_modules/upng-js/node_modules/pako/lib/zlib/inflate.js":((r,e,t)=>{var a=t("./node_modules/upng-js/node_modules/pako/lib/utils/common.js"),s=t("./node_modules/upng-js/node_modules/pako/lib/zlib/adler32.js"),o=t("./node_modules/upng-js/node_modules/pako/lib/zlib/crc32.js"),f=t("./node_modules/upng-js/node_modules/pako/lib/zlib/inffast.js"),u=t("./node_modules/upng-js/node_modules/pako/lib/zlib/inftrees.js"),h=0,x=1,m=2,w=4,A=5,D=6,I=0,y=1,l=2,c=-2,L=-3,R=-4,F=-5,$=8,b=1,k=2,B=3,J=4,X=5,ae=6,He=7,Pe=8,ue=9,Oe=10,we=11,Ze=12,it=13,lt=14,Vt=15,_e=16,pr=17,_s=18,Ei=19,Bl=20,Wl=21,Ep=22,Lp=23,Op=24,R0=25,N0=26,Qp=27,O0=28,zp=29,M0=30,W0=31,im=32,F0=852,fm=592,cm=15,Ap=cm;function Io(Bp){return(Bp>>>24&255)+(Bp>>>8&65280)+((Bp&65280)<<8)+((Bp&255)<<24)}function p0(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new a.Buf16(320),this.work=new a.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function a0(Bp){var L0;return!Bp||!Bp.state?c:(L0=Bp.state,Bp.total_in=Bp.total_out=L0.total=0,Bp.msg="",L0.wrap&&(Bp.adler=L0.wrap&1),L0.mode=b,L0.last=0,L0.havedict=0,L0.dmax=32768,L0.head=null,L0.hold=0,L0.bits=0,L0.lencode=L0.lendyn=new a.Buf32(F0),L0.distcode=L0.distdyn=new a.Buf32(fm),L0.sane=1,L0.back=-1,I)}function rm(Bp){var L0;return!Bp||!Bp.state?c:(L0=Bp.state,L0.wsize=0,L0.whave=0,L0.wnext=0,a0(Bp))}function X0(Bp,L0){var kl,Np;return!Bp||!Bp.state||(Np=Bp.state,L0<0?(kl=0,L0=-L0):(kl=(L0>>4)+1,L0<48&&(L0&=15)),L0&&(L0<8||L0>15))?c:(Np.window!==null&&Np.wbits!==L0&&(Np.window=null),Np.wrap=kl,Np.wbits=L0,rm(Bp))}function Nl(Bp,L0){var kl,Np;return Bp?(Np=new p0,Bp.state=Np,Np.window=null,kl=X0(Bp,L0),kl!==I&&(Bp.state=null),kl):c}function Gl(Bp){return Nl(Bp,Ap)}var Mp=!0,_0,v0;function z0(Bp){if(Mp){var L0;for(_0=new a.Buf32(512),v0=new a.Buf32(32),L0=0;L0<144;)Bp.lens[L0++]=8;for(;L0<256;)Bp.lens[L0++]=9;for(;L0<280;)Bp.lens[L0++]=7;for(;L0<288;)Bp.lens[L0++]=8;for(u(x,Bp.lens,0,288,_0,0,Bp.work,{bits:9}),L0=0;L0<32;)Bp.lens[L0++]=5;u(m,Bp.lens,0,32,v0,0,Bp.work,{bits:5}),Mp=!1}Bp.lencode=_0,Bp.lenbits=9,Bp.distcode=v0,Bp.distbits=5}function sm(Bp,L0,kl,Np){var V0,Ke=Bp.state;return Ke.window===null&&(Ke.wsize=1<<Ke.wbits,Ke.wnext=0,Ke.whave=0,Ke.window=new a.Buf8(Ke.wsize)),Np>=Ke.wsize?(a.arraySet(Ke.window,L0,kl-Ke.wsize,Ke.wsize,0),Ke.wnext=0,Ke.whave=Ke.wsize):(V0=Ke.wsize-Ke.wnext,V0>Np&&(V0=Np),a.arraySet(Ke.window,L0,kl-Np,V0,Ke.wnext),Np-=V0,Np?(a.arraySet(Ke.window,L0,kl-Np,Np,0),Ke.wnext=Np,Ke.whave=Ke.wsize):(Ke.wnext+=V0,Ke.wnext===Ke.wsize&&(Ke.wnext=0),Ke.whave<Ke.wsize&&(Ke.whave+=V0))),0}function Uo(Bp,L0){var kl,Np,V0,Ke,g0,d0,Vl,jp,K0,Pm,Cm,Fm,ev,h1,xv=0,gv,zv,a1,Jv,d1,A1,Zv,u1,Yp=new a.Buf8(4),nm,dm,o0=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!Bp||!Bp.state||!Bp.output||!Bp.input&&Bp.avail_in!==0)return c;kl=Bp.state,kl.mode===Ze&&(kl.mode=it),g0=Bp.next_out,V0=Bp.output,Vl=Bp.avail_out,Ke=Bp.next_in,Np=Bp.input,d0=Bp.avail_in,jp=kl.hold,K0=kl.bits,Pm=d0,Cm=Vl,u1=I;e:for(;;)switch(kl.mode){case b:if(kl.wrap===0){kl.mode=it;break}for(;K0<16;){if(d0===0)break e;d0--,jp+=Np[Ke++]<<K0,K0+=8}if(kl.wrap&2&&jp===35615){kl.check=0,Yp[0]=jp&255,Yp[1]=jp>>>8&255,kl.check=o(kl.check,Yp,2,0),jp=0,K0=0,kl.mode=k;break}if(kl.flags=0,kl.head&&(kl.head.done=!1),!(kl.wrap&1)||(((jp&255)<<8)+(jp>>8))%31){Bp.msg="incorrect header check",kl.mode=M0;break}if((jp&15)!==$){Bp.msg="unknown compression method",kl.mode=M0;break}if(jp>>>=4,K0-=4,Zv=(jp&15)+8,kl.wbits===0)kl.wbits=Zv;else if(Zv>kl.wbits){Bp.msg="invalid window size",kl.mode=M0;break}kl.dmax=1<<Zv,Bp.adler=kl.check=1,kl.mode=jp&512?Oe:Ze,jp=0,K0=0;break;case k:for(;K0<16;){if(d0===0)break e;d0--,jp+=Np[Ke++]<<K0,K0+=8}if(kl.flags=jp,(kl.flags&255)!==$){Bp.msg="unknown compression method",kl.mode=M0;break}if(kl.flags&57344){Bp.msg="unknown header flags set",kl.mode=M0;break}kl.head&&(kl.head.text=jp>>8&1),kl.flags&512&&(Yp[0]=jp&255,Yp[1]=jp>>>8&255,kl.check=o(kl.check,Yp,2,0)),jp=0,K0=0,kl.mode=B;case B:for(;K0<32;){if(d0===0)break e;d0--,jp+=Np[Ke++]<<K0,K0+=8}kl.head&&(kl.head.time=jp),kl.flags&512&&(Yp[0]=jp&255,Yp[1]=jp>>>8&255,Yp[2]=jp>>>16&255,Yp[3]=jp>>>24&255,kl.check=o(kl.check,Yp,4,0)),jp=0,K0=0,kl.mode=J;case J:for(;K0<16;){if(d0===0)break e;d0--,jp+=Np[Ke++]<<K0,K0+=8}kl.head&&(kl.head.xflags=jp&255,kl.head.os=jp>>8),kl.flags&512&&(Yp[0]=jp&255,Yp[1]=jp>>>8&255,kl.check=o(kl.check,Yp,2,0)),jp=0,K0=0,kl.mode=X;case X:if(kl.flags&1024){for(;K0<16;){if(d0===0)break e;d0--,jp+=Np[Ke++]<<K0,K0+=8}kl.length=jp,kl.head&&(kl.head.extra_len=jp),kl.flags&512&&(Yp[0]=jp&255,Yp[1]=jp>>>8&255,kl.check=o(kl.check,Yp,2,0)),jp=0,K0=0}else kl.head&&(kl.head.extra=null);kl.mode=ae;case ae:if(kl.flags&1024&&(Fm=kl.length,Fm>d0&&(Fm=d0),Fm&&(kl.head&&(Zv=kl.head.extra_len-kl.length,kl.head.extra||(kl.head.extra=new Array(kl.head.extra_len)),a.arraySet(kl.head.extra,Np,Ke,Fm,Zv)),kl.flags&512&&(kl.check=o(kl.check,Np,Fm,Ke)),d0-=Fm,Ke+=Fm,kl.length-=Fm),kl.length))break e;kl.length=0,kl.mode=He;case He:if(kl.flags&2048){if(d0===0)break e;Fm=0;do Zv=Np[Ke+Fm++],kl.head&&Zv&&kl.length<65536&&(kl.head.name+=String.fromCharCode(Zv));while(Zv&&Fm<d0);if(kl.flags&512&&(kl.check=o(kl.check,Np,Fm,Ke)),d0-=Fm,Ke+=Fm,Zv)break e}else kl.head&&(kl.head.name=null);kl.length=0,kl.mode=Pe;case Pe:if(kl.flags&4096){if(d0===0)break e;Fm=0;do Zv=Np[Ke+Fm++],kl.head&&Zv&&kl.length<65536&&(kl.head.comment+=String.fromCharCode(Zv));while(Zv&&Fm<d0);if(kl.flags&512&&(kl.check=o(kl.check,Np,Fm,Ke)),d0-=Fm,Ke+=Fm,Zv)break e}else kl.head&&(kl.head.comment=null);kl.mode=ue;case ue:if(kl.flags&512){for(;K0<16;){if(d0===0)break e;d0--,jp+=Np[Ke++]<<K0,K0+=8}if(jp!==(kl.check&65535)){Bp.msg="header crc mismatch",kl.mode=M0;break}jp=0,K0=0}kl.head&&(kl.head.hcrc=kl.flags>>9&1,kl.head.done=!0),Bp.adler=kl.check=0,kl.mode=Ze;break;case Oe:for(;K0<32;){if(d0===0)break e;d0--,jp+=Np[Ke++]<<K0,K0+=8}Bp.adler=kl.check=Io(jp),jp=0,K0=0,kl.mode=we;case we:if(kl.havedict===0)return Bp.next_out=g0,Bp.avail_out=Vl,Bp.next_in=Ke,Bp.avail_in=d0,kl.hold=jp,kl.bits=K0,l;Bp.adler=kl.check=1,kl.mode=Ze;case Ze:if(L0===A||L0===D)break e;case it:if(kl.last){jp>>>=K0&7,K0-=K0&7,kl.mode=Qp;break}for(;K0<3;){if(d0===0)break e;d0--,jp+=Np[Ke++]<<K0,K0+=8}switch(kl.last=jp&1,jp>>>=1,K0-=1,jp&3){case 0:kl.mode=lt;break;case 1:if(z0(kl),kl.mode=Bl,L0===D){jp>>>=2,K0-=2;break e}break;case 2:kl.mode=pr;break;case 3:Bp.msg="invalid block type",kl.mode=M0}jp>>>=2,K0-=2;break;case lt:for(jp>>>=K0&7,K0-=K0&7;K0<32;){if(d0===0)break e;d0--,jp+=Np[Ke++]<<K0,K0+=8}if((jp&65535)!==(jp>>>16^65535)){Bp.msg="invalid stored block lengths",kl.mode=M0;break}if(kl.length=jp&65535,jp=0,K0=0,kl.mode=Vt,L0===D)break e;case Vt:kl.mode=_e;case _e:if(Fm=kl.length,Fm){if(Fm>d0&&(Fm=d0),Fm>Vl&&(Fm=Vl),Fm===0)break e;a.arraySet(V0,Np,Ke,Fm,g0),d0-=Fm,Ke+=Fm,Vl-=Fm,g0+=Fm,kl.length-=Fm;break}kl.mode=Ze;break;case pr:for(;K0<14;){if(d0===0)break e;d0--,jp+=Np[Ke++]<<K0,K0+=8}if(kl.nlen=(jp&31)+257,jp>>>=5,K0-=5,kl.ndist=(jp&31)+1,jp>>>=5,K0-=5,kl.ncode=(jp&15)+4,jp>>>=4,K0-=4,kl.nlen>286||kl.ndist>30){Bp.msg="too many length or distance symbols",kl.mode=M0;break}kl.have=0,kl.mode=_s;case _s:for(;kl.have<kl.ncode;){for(;K0<3;){if(d0===0)break e;d0--,jp+=Np[Ke++]<<K0,K0+=8}kl.lens[o0[kl.have++]]=jp&7,jp>>>=3,K0-=3}for(;kl.have<19;)kl.lens[o0[kl.have++]]=0;if(kl.lencode=kl.lendyn,kl.lenbits=7,nm={bits:kl.lenbits},u1=u(h,kl.lens,0,19,kl.lencode,0,kl.work,nm),kl.lenbits=nm.bits,u1){Bp.msg="invalid code lengths set",kl.mode=M0;break}kl.have=0,kl.mode=Ei;case Ei:for(;kl.have<kl.nlen+kl.ndist;){for(;xv=kl.lencode[jp&(1<<kl.lenbits)-1],gv=xv>>>24,zv=xv>>>16&255,a1=xv&65535,!(gv<=K0);){if(d0===0)break e;d0--,jp+=Np[Ke++]<<K0,K0+=8}if(a1<16)jp>>>=gv,K0-=gv,kl.lens[kl.have++]=a1;else{if(a1===16){for(dm=gv+2;K0<dm;){if(d0===0)break e;d0--,jp+=Np[Ke++]<<K0,K0+=8}if(jp>>>=gv,K0-=gv,kl.have===0){Bp.msg="invalid bit length repeat",kl.mode=M0;break}Zv=kl.lens[kl.have-1],Fm=3+(jp&3),jp>>>=2,K0-=2}else if(a1===17){for(dm=gv+3;K0<dm;){if(d0===0)break e;d0--,jp+=Np[Ke++]<<K0,K0+=8}jp>>>=gv,K0-=gv,Zv=0,Fm=3+(jp&7),jp>>>=3,K0-=3}else{for(dm=gv+7;K0<dm;){if(d0===0)break e;d0--,jp+=Np[Ke++]<<K0,K0+=8}jp>>>=gv,K0-=gv,Zv=0,Fm=11+(jp&127),jp>>>=7,K0-=7}if(kl.have+Fm>kl.nlen+kl.ndist){Bp.msg="invalid bit length repeat",kl.mode=M0;break}for(;Fm--;)kl.lens[kl.have++]=Zv}}if(kl.mode===M0)break;if(kl.lens[256]===0){Bp.msg="invalid code -- missing end-of-block",kl.mode=M0;break}if(kl.lenbits=9,nm={bits:kl.lenbits},u1=u(x,kl.lens,0,kl.nlen,kl.lencode,0,kl.work,nm),kl.lenbits=nm.bits,u1){Bp.msg="invalid literal/lengths set",kl.mode=M0;break}if(kl.distbits=6,kl.distcode=kl.distdyn,nm={bits:kl.distbits},u1=u(m,kl.lens,kl.nlen,kl.ndist,kl.distcode,0,kl.work,nm),kl.distbits=nm.bits,u1){Bp.msg="invalid distances set",kl.mode=M0;break}if(kl.mode=Bl,L0===D)break e;case Bl:kl.mode=Wl;case Wl:if(d0>=6&&Vl>=258){Bp.next_out=g0,Bp.avail_out=Vl,Bp.next_in=Ke,Bp.avail_in=d0,kl.hold=jp,kl.bits=K0,f(Bp,Cm),g0=Bp.next_out,V0=Bp.output,Vl=Bp.avail_out,Ke=Bp.next_in,Np=Bp.input,d0=Bp.avail_in,jp=kl.hold,K0=kl.bits,kl.mode===Ze&&(kl.back=-1);break}for(kl.back=0;xv=kl.lencode[jp&(1<<kl.lenbits)-1],gv=xv>>>24,zv=xv>>>16&255,a1=xv&65535,!(gv<=K0);){if(d0===0)break e;d0--,jp+=Np[Ke++]<<K0,K0+=8}if(zv&&!(zv&240)){for(Jv=gv,d1=zv,A1=a1;xv=kl.lencode[A1+((jp&(1<<Jv+d1)-1)>>Jv)],gv=xv>>>24,zv=xv>>>16&255,a1=xv&65535,!(Jv+gv<=K0);){if(d0===0)break e;d0--,jp+=Np[Ke++]<<K0,K0+=8}jp>>>=Jv,K0-=Jv,kl.back+=Jv}if(jp>>>=gv,K0-=gv,kl.back+=gv,kl.length=a1,zv===0){kl.mode=N0;break}if(zv&32){kl.back=-1,kl.mode=Ze;break}if(zv&64){Bp.msg="invalid literal/length code",kl.mode=M0;break}kl.extra=zv&15,kl.mode=Ep;case Ep:if(kl.extra){for(dm=kl.extra;K0<dm;){if(d0===0)break e;d0--,jp+=Np[Ke++]<<K0,K0+=8}kl.length+=jp&(1<<kl.extra)-1,jp>>>=kl.extra,K0-=kl.extra,kl.back+=kl.extra}kl.was=kl.length,kl.mode=Lp;case Lp:for(;xv=kl.distcode[jp&(1<<kl.distbits)-1],gv=xv>>>24,zv=xv>>>16&255,a1=xv&65535,!(gv<=K0);){if(d0===0)break e;d0--,jp+=Np[Ke++]<<K0,K0+=8}if(!(zv&240)){for(Jv=gv,d1=zv,A1=a1;xv=kl.distcode[A1+((jp&(1<<Jv+d1)-1)>>Jv)],gv=xv>>>24,zv=xv>>>16&255,a1=xv&65535,!(Jv+gv<=K0);){if(d0===0)break e;d0--,jp+=Np[Ke++]<<K0,K0+=8}jp>>>=Jv,K0-=Jv,kl.back+=Jv}if(jp>>>=gv,K0-=gv,kl.back+=gv,zv&64){Bp.msg="invalid distance code",kl.mode=M0;break}kl.offset=a1,kl.extra=zv&15,kl.mode=Op;case Op:if(kl.extra){for(dm=kl.extra;K0<dm;){if(d0===0)break e;d0--,jp+=Np[Ke++]<<K0,K0+=8}kl.offset+=jp&(1<<kl.extra)-1,jp>>>=kl.extra,K0-=kl.extra,kl.back+=kl.extra}if(kl.offset>kl.dmax){Bp.msg="invalid distance too far back",kl.mode=M0;break}kl.mode=R0;case R0:if(Vl===0)break e;if(Fm=Cm-Vl,kl.offset>Fm){if(Fm=kl.offset-Fm,Fm>kl.whave&&kl.sane){Bp.msg="invalid distance too far back",kl.mode=M0;break}Fm>kl.wnext?(Fm-=kl.wnext,ev=kl.wsize-Fm):ev=kl.wnext-Fm,Fm>kl.length&&(Fm=kl.length),h1=kl.window}else h1=V0,ev=g0-kl.offset,Fm=kl.length;Fm>Vl&&(Fm=Vl),Vl-=Fm,kl.length-=Fm;do V0[g0++]=h1[ev++];while(--Fm);kl.length===0&&(kl.mode=Wl);break;case N0:if(Vl===0)break e;V0[g0++]=kl.length,Vl--,kl.mode=Wl;break;case Qp:if(kl.wrap){for(;K0<32;){if(d0===0)break e;d0--,jp|=Np[Ke++]<<K0,K0+=8}if(Cm-=Vl,Bp.total_out+=Cm,kl.total+=Cm,Cm&&(Bp.adler=kl.check=kl.flags?o(kl.check,V0,Cm,g0-Cm):s(kl.check,V0,Cm,g0-Cm)),Cm=Vl,(kl.flags?jp:Io(jp))!==kl.check){Bp.msg="incorrect data check",kl.mode=M0;break}jp=0,K0=0}kl.mode=O0;case O0:if(kl.wrap&&kl.flags){for(;K0<32;){if(d0===0)break e;d0--,jp+=Np[Ke++]<<K0,K0+=8}if(jp!==(kl.total&4294967295)){Bp.msg="incorrect length check",kl.mode=M0;break}jp=0,K0=0}kl.mode=zp;case zp:u1=y;break e;case M0:u1=L;break e;case W0:return R;case im:default:return c}return Bp.next_out=g0,Bp.avail_out=Vl,Bp.next_in=Ke,Bp.avail_in=d0,kl.hold=jp,kl.bits=K0,(kl.wsize||Cm!==Bp.avail_out&&kl.mode<M0&&(kl.mode<Qp||L0!==w))&&sm(Bp,Bp.output,Bp.next_out,Cm-Bp.avail_out),Pm-=Bp.avail_in,Cm-=Bp.avail_out,Bp.total_in+=Pm,Bp.total_out+=Cm,kl.total+=Cm,kl.wrap&&Cm&&(Bp.adler=kl.check=kl.flags?o(kl.check,V0,Cm,Bp.next_out-Cm):s(kl.check,V0,Cm,Bp.next_out-Cm)),Bp.data_type=kl.bits+(kl.last?64:0)+(kl.mode===Ze?128:0)+(kl.mode===Bl||kl.mode===Vt?256:0),(Pm===0&&Cm===0||L0===w)&&u1===I&&(u1=F),u1}function u0(Bp){if(!Bp||!Bp.state)return c;var L0=Bp.state;return L0.window&&(L0.window=null),Bp.state=null,I}function x0(Bp,L0){var kl;return!Bp||!Bp.state||(kl=Bp.state,!(kl.wrap&2))?c:(kl.head=L0,L0.done=!1,I)}function Xl(Bp,L0){var kl=L0.length,Np,V0,Ke;return!Bp||!Bp.state||(Np=Bp.state,Np.wrap!==0&&Np.mode!==we)?c:Np.mode===we&&(V0=1,V0=s(V0,L0,kl,0),V0!==Np.check)?L:(Ke=sm(Bp,L0,kl,kl),Ke?(Np.mode=W0,R):(Np.havedict=1,I))}e.inflateReset=rm,e.inflateReset2=X0,e.inflateResetKeep=a0,e.inflateInit=Gl,e.inflateInit2=Nl,e.inflate=Uo,e.inflateEnd=u0,e.inflateGetHeader=x0,e.inflateSetDictionary=Xl,e.inflateInfo="pako inflate (from Nodeca project)"}),"./node_modules/upng-js/node_modules/pako/lib/zlib/inftrees.js":((r,e,t)=>{var a=t("./node_modules/upng-js/node_modules/pako/lib/utils/common.js"),s=15,o=852,f=592,u=0,h=1,x=2,m=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],w=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],A=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],D=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(I,y,l,c,L,R,F,$){var b=$.bits,k=0,B=0,J=0,X=0,ae=0,He=0,Pe=0,ue=0,Oe=0,we=0,Ze,it,lt,Vt,_e,pr=null,_s=0,Ei,Bl=new a.Buf16(s+1),Wl=new a.Buf16(s+1),Ep=null,Lp=0,Op,R0,N0;for(k=0;k<=s;k++)Bl[k]=0;for(B=0;B<c;B++)Bl[y[l+B]]++;for(ae=b,X=s;X>=1&&Bl[X]===0;X--);if(ae>X&&(ae=X),X===0)return L[R++]=20971520,L[R++]=20971520,$.bits=1,0;for(J=1;J<X&&Bl[J]===0;J++);for(ae<J&&(ae=J),ue=1,k=1;k<=s;k++)if(ue<<=1,ue-=Bl[k],ue<0)return-1;if(ue>0&&(I===u||X!==1))return-1;for(Wl[1]=0,k=1;k<s;k++)Wl[k+1]=Wl[k]+Bl[k];for(B=0;B<c;B++)y[l+B]!==0&&(F[Wl[y[l+B]]++]=B);if(I===u?(pr=Ep=F,Ei=19):I===h?(pr=m,_s-=257,Ep=w,Lp-=257,Ei=256):(pr=A,Ep=D,Ei=-1),we=0,B=0,k=J,_e=R,He=ae,Pe=0,lt=-1,Oe=1<<ae,Vt=Oe-1,I===h&&Oe>o||I===x&&Oe>f)return 1;for(;;){Op=k-Pe,F[B]<Ei?(R0=0,N0=F[B]):F[B]>Ei?(R0=Ep[Lp+F[B]],N0=pr[_s+F[B]]):(R0=96,N0=0),Ze=1<<k-Pe,it=1<<He,J=it;do it-=Ze,L[_e+(we>>Pe)+it]=Op<<24|R0<<16|N0|0;while(it!==0);for(Ze=1<<k-1;we&Ze;)Ze>>=1;if(Ze!==0?(we&=Ze-1,we+=Ze):we=0,B++,--Bl[k]===0){if(k===X)break;k=y[l+F[B]]}if(k>ae&&(we&Vt)!==lt){for(Pe===0&&(Pe=ae),_e+=J,He=k-Pe,ue=1<<He;He+Pe<X&&(ue-=Bl[He+Pe],!(ue<=0));)He++,ue<<=1;if(Oe+=1<<He,I===h&&Oe>o||I===x&&Oe>f)return 1;lt=we&Vt,L[lt]=ae<<24|He<<16|_e-R|0}}return we!==0&&(L[_e+we]=k-Pe<<24|4194304|0),$.bits=ae,0}}),"./node_modules/upng-js/node_modules/pako/lib/zlib/messages.js":(r=>{r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}}),"./node_modules/upng-js/node_modules/pako/lib/zlib/trees.js":((r,e,t)=>{var a=t("./node_modules/upng-js/node_modules/pako/lib/utils/common.js"),s=4,o=0,f=1,u=2;function h(Uo){for(var u0=Uo.length;--u0>=0;)Uo[u0]=0}var x=0,m=1,w=2,A=3,D=258,I=29,y=256,l=y+1+I,c=30,L=19,R=2*l+1,F=15,$=16,b=7,k=256,B=16,J=17,X=18,ae=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],He=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Pe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],ue=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Oe=512,we=new Array((l+2)*2);h(we);var Ze=new Array(c*2);h(Ze);var it=new Array(Oe);h(it);var lt=new Array(D-A+1);h(lt);var Vt=new Array(I);h(Vt);var _e=new Array(c);h(_e);function pr(Uo,u0,x0,Xl,Bp){this.static_tree=Uo,this.extra_bits=u0,this.extra_base=x0,this.elems=Xl,this.max_length=Bp,this.has_stree=Uo&&Uo.length}var _s,Ei,Bl;function Wl(Uo,u0){this.dyn_tree=Uo,this.max_code=0,this.stat_desc=u0}function Ep(Uo){return Uo<256?it[Uo]:it[256+(Uo>>>7)]}function Lp(Uo,u0){Uo.pending_buf[Uo.pending++]=u0&255,Uo.pending_buf[Uo.pending++]=u0>>>8&255}function Op(Uo,u0,x0){Uo.bi_valid>$-x0?(Uo.bi_buf|=u0<<Uo.bi_valid&65535,Lp(Uo,Uo.bi_buf),Uo.bi_buf=u0>>$-Uo.bi_valid,Uo.bi_valid+=x0-$):(Uo.bi_buf|=u0<<Uo.bi_valid&65535,Uo.bi_valid+=x0)}function R0(Uo,u0,x0){Op(Uo,x0[u0*2],x0[u0*2+1])}function N0(Uo,u0){var x0=0;do x0|=Uo&1,Uo>>>=1,x0<<=1;while(--u0>0);return x0>>>1}function Qp(Uo){Uo.bi_valid===16?(Lp(Uo,Uo.bi_buf),Uo.bi_buf=0,Uo.bi_valid=0):Uo.bi_valid>=8&&(Uo.pending_buf[Uo.pending++]=Uo.bi_buf&255,Uo.bi_buf>>=8,Uo.bi_valid-=8)}function O0(Uo,u0){var x0=u0.dyn_tree,Xl=u0.max_code,Bp=u0.stat_desc.static_tree,L0=u0.stat_desc.has_stree,kl=u0.stat_desc.extra_bits,Np=u0.stat_desc.extra_base,V0=u0.stat_desc.max_length,Ke,g0,d0,Vl,jp,K0,Pm=0;for(Vl=0;Vl<=F;Vl++)Uo.bl_count[Vl]=0;for(x0[Uo.heap[Uo.heap_max]*2+1]=0,Ke=Uo.heap_max+1;Ke<R;Ke++)g0=Uo.heap[Ke],Vl=x0[x0[g0*2+1]*2+1]+1,Vl>V0&&(Vl=V0,Pm++),x0[g0*2+1]=Vl,!(g0>Xl)&&(Uo.bl_count[Vl]++,jp=0,g0>=Np&&(jp=kl[g0-Np]),K0=x0[g0*2],Uo.opt_len+=K0*(Vl+jp),L0&&(Uo.static_len+=K0*(Bp[g0*2+1]+jp)));if(Pm!==0){do{for(Vl=V0-1;Uo.bl_count[Vl]===0;)Vl--;Uo.bl_count[Vl]--,Uo.bl_count[Vl+1]+=2,Uo.bl_count[V0]--,Pm-=2}while(Pm>0);for(Vl=V0;Vl!==0;Vl--)for(g0=Uo.bl_count[Vl];g0!==0;)d0=Uo.heap[--Ke],!(d0>Xl)&&(x0[d0*2+1]!==Vl&&(Uo.opt_len+=(Vl-x0[d0*2+1])*x0[d0*2],x0[d0*2+1]=Vl),g0--)}}function zp(Uo,u0,x0){var Xl=new Array(F+1),Bp=0,L0,kl;for(L0=1;L0<=F;L0++)Xl[L0]=Bp=Bp+x0[L0-1]<<1;for(kl=0;kl<=u0;kl++){var Np=Uo[kl*2+1];Np!==0&&(Uo[kl*2]=N0(Xl[Np]++,Np))}}function M0(){var Uo,u0,x0,Xl,Bp,L0=new Array(F+1);for(x0=0,Xl=0;Xl<I-1;Xl++)for(Vt[Xl]=x0,Uo=0;Uo<1<<ae[Xl];Uo++)lt[x0++]=Xl;for(lt[x0-1]=Xl,Bp=0,Xl=0;Xl<16;Xl++)for(_e[Xl]=Bp,Uo=0;Uo<1<<He[Xl];Uo++)it[Bp++]=Xl;for(Bp>>=7;Xl<c;Xl++)for(_e[Xl]=Bp<<7,Uo=0;Uo<1<<He[Xl]-7;Uo++)it[256+Bp++]=Xl;for(u0=0;u0<=F;u0++)L0[u0]=0;for(Uo=0;Uo<=143;)we[Uo*2+1]=8,Uo++,L0[8]++;for(;Uo<=255;)we[Uo*2+1]=9,Uo++,L0[9]++;for(;Uo<=279;)we[Uo*2+1]=7,Uo++,L0[7]++;for(;Uo<=287;)we[Uo*2+1]=8,Uo++,L0[8]++;for(zp(we,l+1,L0),Uo=0;Uo<c;Uo++)Ze[Uo*2+1]=5,Ze[Uo*2]=N0(Uo,5);_s=new pr(we,ae,y+1,l,F),Ei=new pr(Ze,He,0,c,F),Bl=new pr(new Array(0),Pe,0,L,b)}function W0(Uo){var u0;for(u0=0;u0<l;u0++)Uo.dyn_ltree[u0*2]=0;for(u0=0;u0<c;u0++)Uo.dyn_dtree[u0*2]=0;for(u0=0;u0<L;u0++)Uo.bl_tree[u0*2]=0;Uo.dyn_ltree[k*2]=1,Uo.opt_len=Uo.static_len=0,Uo.last_lit=Uo.matches=0}function im(Uo){Uo.bi_valid>8?Lp(Uo,Uo.bi_buf):Uo.bi_valid>0&&(Uo.pending_buf[Uo.pending++]=Uo.bi_buf),Uo.bi_buf=0,Uo.bi_valid=0}function F0(Uo,u0,x0,Xl){im(Uo),Lp(Uo,x0),Lp(Uo,~x0),a.arraySet(Uo.pending_buf,Uo.window,u0,x0,Uo.pending),Uo.pending+=x0}function fm(Uo,u0,x0,Xl){var Bp=u0*2,L0=x0*2;return Uo[Bp]<Uo[L0]||Uo[Bp]===Uo[L0]&&Xl[u0]<=Xl[x0]}function cm(Uo,u0,x0){for(var Xl=Uo.heap[x0],Bp=x0<<1;Bp<=Uo.heap_len&&(Bp<Uo.heap_len&&fm(u0,Uo.heap[Bp+1],Uo.heap[Bp],Uo.depth)&&Bp++,!fm(u0,Xl,Uo.heap[Bp],Uo.depth));)Uo.heap[x0]=Uo.heap[Bp],x0=Bp,Bp<<=1;Uo.heap[x0]=Xl}function Ap(Uo,u0,x0){var Xl,Bp,L0=0,kl,Np;if(Uo.last_lit!==0)do Xl=Uo.pending_buf[Uo.d_buf+L0*2]<<8|Uo.pending_buf[Uo.d_buf+L0*2+1],Bp=Uo.pending_buf[Uo.l_buf+L0],L0++,Xl===0?R0(Uo,Bp,u0):(kl=lt[Bp],R0(Uo,kl+y+1,u0),Np=ae[kl],Np!==0&&(Bp-=Vt[kl],Op(Uo,Bp,Np)),Xl--,kl=Ep(Xl),R0(Uo,kl,x0),Np=He[kl],Np!==0&&(Xl-=_e[kl],Op(Uo,Xl,Np)));while(L0<Uo.last_lit);R0(Uo,k,u0)}function Io(Uo,u0){var x0=u0.dyn_tree,Xl=u0.stat_desc.static_tree,Bp=u0.stat_desc.has_stree,L0=u0.stat_desc.elems,kl,Np,V0=-1,Ke;for(Uo.heap_len=0,Uo.heap_max=R,kl=0;kl<L0;kl++)x0[kl*2]!==0?(Uo.heap[++Uo.heap_len]=V0=kl,Uo.depth[kl]=0):x0[kl*2+1]=0;for(;Uo.heap_len<2;)Ke=Uo.heap[++Uo.heap_len]=V0<2?++V0:0,x0[Ke*2]=1,Uo.depth[Ke]=0,Uo.opt_len--,Bp&&(Uo.static_len-=Xl[Ke*2+1]);for(u0.max_code=V0,kl=Uo.heap_len>>1;kl>=1;kl--)cm(Uo,x0,kl);Ke=L0;do kl=Uo.heap[1],Uo.heap[1]=Uo.heap[Uo.heap_len--],cm(Uo,x0,1),Np=Uo.heap[1],Uo.heap[--Uo.heap_max]=kl,Uo.heap[--Uo.heap_max]=Np,x0[Ke*2]=x0[kl*2]+x0[Np*2],Uo.depth[Ke]=(Uo.depth[kl]>=Uo.depth[Np]?Uo.depth[kl]:Uo.depth[Np])+1,x0[kl*2+1]=x0[Np*2+1]=Ke,Uo.heap[1]=Ke++,cm(Uo,x0,1);while(Uo.heap_len>=2);Uo.heap[--Uo.heap_max]=Uo.heap[1],O0(Uo,u0),zp(x0,V0,Uo.bl_count)}function p0(Uo,u0,x0){var Xl,Bp=-1,L0,kl=u0[1],Np=0,V0=7,Ke=4;for(kl===0&&(V0=138,Ke=3),u0[(x0+1)*2+1]=65535,Xl=0;Xl<=x0;Xl++)L0=kl,kl=u0[(Xl+1)*2+1],!(++Np<V0&&L0===kl)&&(Np<Ke?Uo.bl_tree[L0*2]+=Np:L0!==0?(L0!==Bp&&Uo.bl_tree[L0*2]++,Uo.bl_tree[B*2]++):Np<=10?Uo.bl_tree[J*2]++:Uo.bl_tree[X*2]++,Np=0,Bp=L0,kl===0?(V0=138,Ke=3):L0===kl?(V0=6,Ke=3):(V0=7,Ke=4))}function a0(Uo,u0,x0){var Xl,Bp=-1,L0,kl=u0[1],Np=0,V0=7,Ke=4;for(kl===0&&(V0=138,Ke=3),Xl=0;Xl<=x0;Xl++)if(L0=kl,kl=u0[(Xl+1)*2+1],!(++Np<V0&&L0===kl)){if(Np<Ke)do R0(Uo,L0,Uo.bl_tree);while(--Np!==0);else L0!==0?(L0!==Bp&&(R0(Uo,L0,Uo.bl_tree),Np--),R0(Uo,B,Uo.bl_tree),Op(Uo,Np-3,2)):Np<=10?(R0(Uo,J,Uo.bl_tree),Op(Uo,Np-3,3)):(R0(Uo,X,Uo.bl_tree),Op(Uo,Np-11,7));Np=0,Bp=L0,kl===0?(V0=138,Ke=3):L0===kl?(V0=6,Ke=3):(V0=7,Ke=4)}}function rm(Uo){var u0;for(p0(Uo,Uo.dyn_ltree,Uo.l_desc.max_code),p0(Uo,Uo.dyn_dtree,Uo.d_desc.max_code),Io(Uo,Uo.bl_desc),u0=L-1;u0>=3&&Uo.bl_tree[ue[u0]*2+1]===0;u0--);return Uo.opt_len+=3*(u0+1)+5+5+4,u0}function X0(Uo,u0,x0,Xl){var Bp;for(Op(Uo,u0-257,5),Op(Uo,x0-1,5),Op(Uo,Xl-4,4),Bp=0;Bp<Xl;Bp++)Op(Uo,Uo.bl_tree[ue[Bp]*2+1],3);a0(Uo,Uo.dyn_ltree,u0-1),a0(Uo,Uo.dyn_dtree,x0-1)}function Nl(Uo){var u0=4093624447,x0;for(x0=0;x0<=31;x0++,u0>>>=1)if(u0&1&&Uo.dyn_ltree[x0*2]!==0)return o;if(Uo.dyn_ltree[18]!==0||Uo.dyn_ltree[20]!==0||Uo.dyn_ltree[26]!==0)return f;for(x0=32;x0<y;x0++)if(Uo.dyn_ltree[x0*2]!==0)return f;return o}var Gl=!1;function Mp(Uo){Gl||(M0(),Gl=!0),Uo.l_desc=new Wl(Uo.dyn_ltree,_s),Uo.d_desc=new Wl(Uo.dyn_dtree,Ei),Uo.bl_desc=new Wl(Uo.bl_tree,Bl),Uo.bi_buf=0,Uo.bi_valid=0,W0(Uo)}function _0(Uo,u0,x0,Xl){Op(Uo,(x<<1)+(Xl?1:0),3),F0(Uo,u0,x0)}function v0(Uo){Op(Uo,m<<1,3),R0(Uo,k,we),Qp(Uo)}function z0(Uo,u0,x0,Xl){var Bp,L0,kl=0;Uo.level>0?(Uo.strm.data_type===u&&(Uo.strm.data_type=Nl(Uo)),Io(Uo,Uo.l_desc),Io(Uo,Uo.d_desc),kl=rm(Uo),Bp=Uo.opt_len+3+7>>>3,L0=Uo.static_len+3+7>>>3,L0<=Bp&&(Bp=L0)):Bp=L0=x0+5,x0+4<=Bp&&u0!==-1?_0(Uo,u0,x0,Xl):Uo.strategy===s||L0===Bp?(Op(Uo,(m<<1)+(Xl?1:0),3),Ap(Uo,we,Ze)):(Op(Uo,(w<<1)+(Xl?1:0),3),X0(Uo,Uo.l_desc.max_code+1,Uo.d_desc.max_code+1,kl+1),Ap(Uo,Uo.dyn_ltree,Uo.dyn_dtree)),W0(Uo),Xl&&im(Uo)}function sm(Uo,u0,x0){return Uo.pending_buf[Uo.d_buf+Uo.last_lit*2]=u0>>>8&255,Uo.pending_buf[Uo.d_buf+Uo.last_lit*2+1]=u0&255,Uo.pending_buf[Uo.l_buf+Uo.last_lit]=x0&255,Uo.last_lit++,u0===0?Uo.dyn_ltree[x0*2]++:(Uo.matches++,u0--,Uo.dyn_ltree[(lt[x0]+y+1)*2]++,Uo.dyn_dtree[Ep(u0)*2]++),Uo.last_lit===Uo.lit_bufsize-1}e._tr_init=Mp,e._tr_stored_block=_0,e._tr_flush_block=z0,e._tr_tally=sm,e._tr_align=v0}),"./node_modules/upng-js/node_modules/pako/lib/zlib/zstream.js":(r=>{function e(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}r.exports=e}),"./src/3Dmol.ts":((r,e,t)=>{t.r(e),t.d(e,{CAP:()=>f.CAP,CC:()=>s.CC,CONTEXTS_PER_VIEWPORT:()=>x.CONTEXTS_PER_VIEWPORT,Color:()=>s.Color,CustomLinear:()=>m.CustomLinear,Cylinder:()=>R.Cylinder,GLDraw:()=>f.GLDraw,GLModel:()=>u.GLModel,GLShape:()=>h.GLShape,GLViewer:()=>x.GLViewer,GLVolumetricRender:()=>c.GLVolumetricRender,Gradient:()=>m.Gradient,GradientType:()=>m.GradientType,Label:()=>w.Label,LabelCount:()=>w.LabelCount,MarchingCube:()=>I.MarchingCube,MarchingCubeInitializer:()=>I.MarchingCubeInitializer,Matrix3:()=>L.Matrix3,Matrix4:()=>L.Matrix4,Parsers:()=>A.Parsers,PausableTimer:()=>y.PausableTimer,PointGrid:()=>I.PointGrid,ProteinSurface:()=>I.ProteinSurface,Quaternion:()=>L.Quaternion,ROYGB:()=>m.ROYGB,RWB:()=>m.RWB,Ray:()=>L.Ray,Sinebow:()=>m.Sinebow,Sphere:()=>R.Sphere,SurfaceType:()=>I.SurfaceType,Triangle:()=>R.Triangle,Vector2:()=>L.Vector2,Vector3:()=>L.Vector3,VolumeData:()=>l.VolumeData,adjustVolumeStyle:()=>y.adjustVolumeStyle,applyPartialCharges:()=>D.applyPartialCharges,autoinit:()=>a.autoinit,autoload:()=>a.autoload,base64ToArray:()=>y.base64ToArray,bondLength:()=>A.bondLength,builtinColorSchemes:()=>s.builtinColorSchemes,builtinGradients:()=>m.builtinGradients,chains:()=>s.chains,clamp:()=>L.clamp,conversionMatrix3:()=>L.conversionMatrix3,createStereoViewer:()=>x.createStereoViewer,createViewer:()=>x.createViewer,createViewerGrid:()=>x.createViewerGrid,deepCopy:()=>y.deepCopy,degToRad:()=>L.degToRad,download:()=>y.download,drawCartoon:()=>o.drawCartoon,elementColors:()=>s.elementColors,extend:()=>y.extend,get:()=>y.get,getAtomProperty:()=>y.getAtomProperty,getColorFromStyle:()=>y.getColorFromStyle,getElement:()=>y.getElement,getExtent:()=>y.getExtent,getGradient:()=>m.getGradient,getPropertyRange:()=>y.getPropertyRange,getbin:()=>y.getbin,htmlColors:()=>s.htmlColors,inflateString:()=>y.inflateString,isEmptyObject:()=>y.isEmptyObject,isNumeric:()=>y.isNumeric,makeFunction:()=>y.makeFunction,mergeGeos:()=>y.mergeGeos,normalizeValue:()=>m.normalizeValue,partialCharges:()=>D.partialCharges,processing_autoinit:()=>a.processing_autoinit,residues:()=>s.residues,setBondLength:()=>A.setBondLength,setSyncSurface:()=>I.setSyncSurface,specStringToObject:()=>y.specStringToObject,splitMesh:()=>h.splitMesh,ssColors:()=>s.ssColors,subdivide_spline:()=>o.subdivide_spline,syncSurface:()=>I.syncSurface,viewers:()=>a.viewers});var a=t("./src/autoload.ts"),s=t("./src/colors.ts"),o=t("./src/glcartoon.ts"),f=t("./src/GLDraw.ts"),u=t("./src/GLModel.ts"),h=t("./src/GLShape.ts"),x=t("./src/GLViewer.ts"),m=t("./src/Gradient.ts"),w=t("./src/Label.ts"),A=t("./src/parsers/index.ts"),D=t("./src/partialCharges.ts"),I=t("./src/ProteinSurface4.ts");t("./src/specs.ts");var y=t("./src/utilities.ts"),l=t("./src/VolumeData.ts"),c=t("./src/VolumetricRender.ts"),L=t("./src/WebGL/math/index.ts"),R=t("./src/WebGL/shapes/index.ts")}),"./src/GLDraw.ts":((r,e,t)=>{t.r(e),t.d(e,{CAP:()=>s,GLDraw:()=>o});var a=t("./src/WebGL/math/index.ts"),s;(function(f){f[f.NONE=0]="NONE",f[f.FLAT=1]="FLAT",f[f.ROUND=2]="ROUND"})(s||(s={}));var o;(function(f){function u(y,l,c){var L=Math.hypot(y,l),R,F,$,b,k;L<1e-4?(F=0,$=1):(F=-y/L,$=l/L),l=-F*y+$*l,R=Math.hypot(l,c),R<1e-4?(b=0,k=1):(b=c/R,k=l/R);var B=new Float32Array(9);return B[0]=$,B[1]=F,B[2]=0,B[3]=-F*k,B[4]=$*k,B[5]=b,B[6]=F*b,B[7]=-$*b,B[8]=k,B}class h{constructor(){this.cache={};let l=[],c=4,L=Math.pow(2,c),R=2,F=Math.pow(2,R),$=L/F,b;for(l[0]=new a.Vector3(-1,0,0),l[$]=new a.Vector3(0,0,1),l[$*2]=new a.Vector3(1,0,0),l[$*3]=new a.Vector3(0,0,-1),R=3;R<=c;R++){for(F=Math.pow(2,R-1),$=L/F,b=0;b<F-1;b++)l[$/2+b*$]=l[b*$].clone().add(l[(b+1)*$]).normalize();b=F-1,l[$/2+b*$]=l[b*$].clone().add(l[0]).normalize()}this.basisVectors=l}getVerticesForRadius(l,c,L){if(typeof this.cache<"u"&&this.cache[l]!==void 0&&this.cache[l][c+L]!==void 0)return this.cache[l][c+L];for(var R=this.basisVectors.length,F=[],$=[],b,k=0;k<R;k++)F.push(this.basisVectors[k].clone().multiplyScalar(l)),F.push(this.basisVectors[k].clone().multiplyScalar(l)),b=this.basisVectors[k].clone().normalize(),$.push(b),$.push(b);var B=[],J=10,X=R,ae=0,He=Math.PI*2,Pe=0,ue=Math.PI,Oe,we,Ze=!1,it=!1;for(we=0;we<=J;we++){Ze=we===0||we===J,it=we===J/2;var lt=[],Vt=[];for(Oe=0;Oe<=X;Oe++){if(it){var _e=Oe<X?2*Oe:0;Vt.push(_e+1),lt.push(_e);continue}var pr=Oe/X,_s=we/J;if(!Ze||Oe===0)if(Oe<X){var Ei=new a.Vector3;Ei.x=-l*Math.cos(ae+pr*He)*Math.sin(Pe+_s*ue),c==1?Ei.y=0:Ei.y=l*Math.cos(Pe+_s*ue),Ei.z=l*Math.sin(ae+pr*He)*Math.sin(Pe+_s*ue),Math.abs(Ei.x)<1e-5&&(Ei.x=0),Math.abs(Ei.y)<1e-5&&(Ei.y=0),Math.abs(Ei.z)<1e-5&&(Ei.z=0),c==s.FLAT?(b=new a.Vector3(0,Math.cos(Pe+_s*ue),0),b.normalize()):(b=new a.Vector3(Ei.x,Ei.y,Ei.z),b.normalize()),F.push(Ei),$.push(b),lt.push(F.length-1)}else lt.push(F.length-X);else Ze&&lt.push(F.length-1)}it&&B.push(Vt),B.push(lt)}var Bl={vertices:F,normals:$,verticesRows:B,w:X,h:J};return l in this.cache||(this.cache[l]={}),this.cache[l][c+L]=Bl,Bl}}var x=new h;function m(y,l,c,L,R,F=0,$=0){if(!l||!c)return;let b=function(K0){if(typeof K0=="string"){let Pm=K0;return Pm.toLowerCase()=="flat"?s.FLAT:Pm.toLowerCase()=="round"?s.ROUND:s.NONE}else return K0};F=b(F),$=b($);var k=$||F;R=R||{r:0,g:0,b:0};var B=u(c.x-l.x,c.y-l.y,c.z-l.z),J=x.getVerticesForRadius(L,$,"to"),X=J.w,ae=J.h,He=k?ae*X+2:2*X,Pe=y.updateGeoGroup(He),ue=J.vertices,Oe=J.normals,we=J.verticesRows,Ze=we[ae/2],it=we[ae/2+1],lt=Pe.vertices,Vt,_e,pr,_s,Ei,Bl,Wl=Pe.vertexArray,Ep=Pe.normalArray,Lp=Pe.colorArray,Op=Pe.faceArray;for(pr=0;pr<X;++pr){var R0=2*pr;_s=B[0]*ue[R0].x+B[3]*ue[R0].y+B[6]*ue[R0].z,Ei=B[1]*ue[R0].x+B[4]*ue[R0].y+B[7]*ue[R0].z,Bl=B[5]*ue[R0].y+B[8]*ue[R0].z,Vt=3*(lt+R0),_e=Pe.faceidx,Wl[Vt]=_s+l.x,Wl[Vt+1]=Ei+l.y,Wl[Vt+2]=Bl+l.z,Wl[Vt+3]=_s+c.x,Wl[Vt+4]=Ei+c.y,Wl[Vt+5]=Bl+c.z,Ep[Vt]=_s,Ep[Vt+3]=_s,Ep[Vt+1]=Ei,Ep[Vt+4]=Ei,Ep[Vt+2]=Bl,Ep[Vt+5]=Bl,Lp[Vt]=R.r,Lp[Vt+3]=R.r,Lp[Vt+1]=R.g,Lp[Vt+4]=R.g,Lp[Vt+2]=R.b,Lp[Vt+5]=R.b,Op[_e]=it[pr]+lt,Op[_e+1]=it[pr+1]+lt,Op[_e+2]=Ze[pr]+lt,Op[_e+3]=Ze[pr]+lt,Op[_e+4]=it[pr+1]+lt,Op[_e+5]=Ze[pr+1]+lt,Pe.faceidx+=6}if(k){var N0=$?0:ae/2,Qp=F?ae+1:ae/2+1,O0,zp,M0,W0,im,F0,fm,cm,Ap,Io,p0,a0,rm,X0,Nl,Gl,Mp,_0,v0,z0,sm,Uo,u0,x0,Xl,Bp,L0,kl,Np,V0,Ke,g0;for(Ei=N0;Ei<Qp;Ei++)if(Ei!==ae/2){var d0=Ei<=ae/2?c:l,Vl=x.getVerticesForRadius(L,$,"to"),jp=x.getVerticesForRadius(L,F,"from");for(d0===c?(ue=Vl.vertices,Oe=Vl.normals,we=Vl.verticesRows):d0==l&&(ue=jp.vertices,Oe=jp.normals,we=jp.verticesRows),_s=0;_s<X;_s++)_e=Pe.faceidx,O0=we[Ei][_s+1],Np=(O0+lt)*3,zp=we[Ei][_s],V0=(zp+lt)*3,M0=we[Ei+1][_s],Ke=(M0+lt)*3,W0=we[Ei+1][_s+1],g0=(W0+lt)*3,im=B[0]*ue[O0].x+B[3]*ue[O0].y+B[6]*ue[O0].z,F0=B[0]*ue[zp].x+B[3]*ue[zp].y+B[6]*ue[zp].z,fm=B[0]*ue[M0].x+B[3]*ue[M0].y+B[6]*ue[M0].z,cm=B[0]*ue[W0].x+B[3]*ue[W0].y+B[6]*ue[W0].z,Ap=B[1]*ue[O0].x+B[4]*ue[O0].y+B[7]*ue[O0].z,Io=B[1]*ue[zp].x+B[4]*ue[zp].y+B[7]*ue[zp].z,p0=B[1]*ue[M0].x+B[4]*ue[M0].y+B[7]*ue[M0].z,a0=B[1]*ue[W0].x+B[4]*ue[W0].y+B[7]*ue[W0].z,rm=B[5]*ue[O0].y+B[8]*ue[O0].z,X0=B[5]*ue[zp].y+B[8]*ue[zp].z,Nl=B[5]*ue[M0].y+B[8]*ue[M0].z,Gl=B[5]*ue[W0].y+B[8]*ue[W0].z,Wl[Np]=im+d0.x,Wl[V0]=F0+d0.x,Wl[Ke]=fm+d0.x,Wl[g0]=cm+d0.x,Wl[Np+1]=Ap+d0.y,Wl[V0+1]=Io+d0.y,Wl[Ke+1]=p0+d0.y,Wl[g0+1]=a0+d0.y,Wl[Np+2]=rm+d0.z,Wl[V0+2]=X0+d0.z,Wl[Ke+2]=Nl+d0.z,Wl[g0+2]=Gl+d0.z,Lp[Np]=R.r,Lp[V0]=R.r,Lp[Ke]=R.r,Lp[g0]=R.r,Lp[Np+1]=R.g,Lp[V0+1]=R.g,Lp[Ke+1]=R.g,Lp[g0+1]=R.g,Lp[Np+2]=R.b,Lp[V0+2]=R.b,Lp[Ke+2]=R.b,Lp[g0+2]=R.b,Mp=B[0]*Oe[O0].x+B[3]*Oe[O0].y+B[6]*Oe[O0].z,_0=B[0]*Oe[zp].x+B[3]*Oe[zp].y+B[6]*Oe[zp].z,v0=B[0]*Oe[M0].x+B[3]*Oe[M0].y+B[6]*Oe[M0].z,z0=B[0]*Oe[W0].x+B[3]*Oe[W0].y+B[6]*Oe[W0].z,sm=B[1]*Oe[O0].x+B[4]*Oe[O0].y+B[7]*Oe[O0].z,Uo=B[1]*Oe[zp].x+B[4]*Oe[zp].y+B[7]*Oe[zp].z,u0=B[1]*Oe[M0].x+B[4]*Oe[M0].y+B[7]*Oe[M0].z,x0=B[1]*Oe[W0].x+B[4]*Oe[W0].y+B[7]*Oe[W0].z,Xl=B[5]*Oe[O0].y+B[8]*Oe[O0].z,Bp=B[5]*Oe[zp].y+B[8]*Oe[zp].z,L0=B[5]*Oe[M0].y+B[8]*Oe[M0].z,kl=B[5]*Oe[W0].y+B[8]*Oe[W0].z,Ei===0?(Ep[Np]=Mp,Ep[Ke]=v0,Ep[g0]=z0,Ep[Np+1]=sm,Ep[Ke+1]=u0,Ep[g0+1]=x0,Ep[Np+2]=Xl,Ep[Ke+2]=L0,Ep[g0+2]=kl,Op[_e]=O0+lt,Op[_e+1]=M0+lt,Op[_e+2]=W0+lt,Pe.faceidx+=3):Ei===Qp-1?(Ep[Np]=Mp,Ep[V0]=_0,Ep[Ke]=v0,Ep[Np+1]=sm,Ep[V0+1]=Uo,Ep[Ke+1]=u0,Ep[Np+2]=Xl,Ep[V0+2]=Bp,Ep[Ke+2]=L0,Op[_e]=O0+lt,Op[_e+1]=zp+lt,Op[_e+2]=M0+lt,Pe.faceidx+=3):(Ep[Np]=Mp,Ep[V0]=_0,Ep[g0]=z0,Ep[Np+1]=sm,Ep[V0+1]=Uo,Ep[g0+1]=x0,Ep[Np+2]=Xl,Ep[V0+2]=Bp,Ep[g0+2]=kl,Ep[V0]=_0,Ep[Ke]=v0,Ep[g0]=z0,Ep[V0+1]=Uo,Ep[Ke+1]=u0,Ep[g0+1]=x0,Ep[V0+2]=Bp,Ep[Ke+2]=L0,Ep[g0+2]=kl,Op[_e]=O0+lt,Op[_e+1]=zp+lt,Op[_e+2]=W0+lt,Op[_e+3]=zp+lt,Op[_e+4]=M0+lt,Op[_e+5]=W0+lt,Pe.faceidx+=6)}}Pe.vertices+=He}f.drawCylinder=m;function w(y,l,c,L,R){if(!l||!c)return;R=R||{r:0,g:0,b:0};let F=new a.Vector3(c.x-l.x,c.y-l.y,c.z-l.z);var $=u(F.x,F.y,F.z);F=F.normalize();var b=x.basisVectors.length,k=x.basisVectors,B=b+2,J=y.updateGeoGroup(B),X=J.vertices,ae,He,Pe,ue,Oe,we,Ze=J.vertexArray,it=J.normalArray,lt=J.colorArray,Vt=J.faceArray;for(ae=X*3,Ze[ae]=l.x,Ze[ae+1]=l.y,Ze[ae+2]=l.z,it[ae]=-F.x,it[ae+1]=-F.y,it[ae+2]=-F.z,lt[ae]=R.r,lt[ae+1]=R.g,lt[ae+2]=R.b,Ze[ae+3]=c.x,Ze[ae+4]=c.y,Ze[ae+5]=c.z,it[ae+3]=F.x,it[ae+4]=F.y,it[ae+5]=F.z,lt[ae+3]=R.r,lt[ae+4]=R.g,lt[ae+5]=R.b,ae+=6,Pe=0;Pe<b;++Pe){var _e=k[Pe].clone();_e.multiplyScalar(L),ue=$[0]*_e.x+$[3]*_e.y+$[6]*_e.z,Oe=$[1]*_e.x+$[4]*_e.y+$[7]*_e.z,we=$[5]*_e.y+$[8]*_e.z,Ze[ae]=ue+l.x,Ze[ae+1]=Oe+l.y,Ze[ae+2]=we+l.z,it[ae]=ue,it[ae+1]=Oe,it[ae+2]=we,lt[ae]=R.r,lt[ae+1]=R.g,lt[ae+2]=R.b,ae+=3}for(J.vertices+=b+2,He=J.faceidx,Pe=0;Pe<b;Pe++){var pr=X+2+Pe,_s=X+2+(Pe+1)%b;Vt[He]=pr,Vt[He+1]=_s,Vt[He+2]=X,He+=3,Vt[He]=pr,Vt[He+1]=_s,Vt[He+2]=X+1,He+=3}J.faceidx+=6*b}f.drawCone=w;class A{constructor(){this.cache=new Map}getVerticesForRadius(l,c){c=c||2,this.cache.has(c)||this.cache.set(c,new Map);let L=this.cache.get(c);if(L.has(l))return L.get(l);var R={vertices:[],verticesRows:[],normals:[]},F=16*c,$=10*c;l<1&&(F=10*c,$=8*c);var b=0,k=Math.PI*2,B=0,J=Math.PI,X,ae;for(ae=0;ae<=$;ae++){let Pe=[];for(X=0;X<=F;X++){let ue=X/F,Oe=ae/$,we=-l*Math.cos(b+ue*k)*Math.sin(B+Oe*J),Ze=l*Math.cos(B+Oe*J),it=l*Math.sin(b+ue*k)*Math.sin(B+Oe*J);var He=new a.Vector3(we,Ze,it);He.normalize(),R.vertices.push({x:we,y:Ze,z:it}),R.normals.push(He),Pe.push(R.vertices.length-1)}R.verticesRows.push(Pe)}return L.set(l,R),R}}var D=new A;function I(y,l,c,L,R){var F=D.getVerticesForRadius(c,R),$=F.vertices,b=F.normals,k=y.updateGeoGroup($.length),B=k.vertices,J=k.vertexArray,X=k.colorArray,ae=k.faceArray,He=k.lineArray,Pe=k.normalArray;for(let we=0,Ze=$.length;we<Ze;++we){let it=3*(B+we),lt=$[we];J[it]=lt.x+l.x,J[it+1]=lt.y+l.y,J[it+2]=lt.z+l.z,X[it]=L.r,X[it+1]=L.g,X[it+2]=L.b}k.vertices+=$.length;let ue=F.verticesRows,Oe=ue.length-1;for(let we=0;we<Oe;we++){let Ze=ue[we].length-1;for(let it=0;it<Ze;it++){let lt=k.faceidx,Vt=k.lineidx,_e=ue[we][it+1]+B,pr=_e*3,_s=ue[we][it]+B,Ei=_s*3,Bl=ue[we+1][it]+B,Wl=Bl*3,Ep=ue[we+1][it+1]+B,Lp=Ep*3,Op=b[_e-B],R0=b[_s-B],N0=b[Bl-B],Qp=b[Ep-B];Math.abs($[_e-B].y)===c?(Pe[pr]=Op.x,Pe[Wl]=N0.x,Pe[Lp]=Qp.x,Pe[pr+1]=Op.y,Pe[Wl+1]=N0.y,Pe[Lp+1]=Qp.y,Pe[pr+2]=Op.z,Pe[Wl+2]=N0.z,Pe[Lp+2]=Qp.z,ae[lt]=_e,ae[lt+1]=Bl,ae[lt+2]=Ep,He[Vt]=_e,He[Vt+1]=Bl,He[Vt+2]=_e,He[Vt+3]=Ep,He[Vt+4]=Bl,He[Vt+5]=Ep,k.faceidx+=3,k.lineidx+=6):Math.abs($[Bl-B].y)===c?(Pe[pr]=Op.x,Pe[Ei]=R0.x,Pe[Wl]=N0.x,Pe[pr+1]=Op.y,Pe[Ei+1]=R0.y,Pe[Wl+1]=N0.y,Pe[pr+2]=Op.z,Pe[Ei+2]=R0.z,Pe[Wl+2]=N0.z,ae[lt]=_e,ae[lt+1]=_s,ae[lt+2]=Bl,He[Vt]=_e,He[Vt+1]=_s,He[Vt+2]=_e,He[Vt+3]=Bl,He[Vt+4]=_s,He[Vt+5]=Bl,k.faceidx+=3,k.lineidx+=6):(Pe[pr]=Op.x,Pe[Ei]=R0.x,Pe[Lp]=Qp.x,Pe[pr+1]=Op.y,Pe[Ei+1]=R0.y,Pe[Lp+1]=Qp.y,Pe[pr+2]=Op.z,Pe[Ei+2]=R0.z,Pe[Lp+2]=Qp.z,Pe[Ei]=R0.x,Pe[Wl]=N0.x,Pe[Lp]=Qp.x,Pe[Ei+1]=R0.y,Pe[Wl+1]=N0.y,Pe[Lp+1]=Qp.y,Pe[Ei+2]=R0.z,Pe[Wl+2]=N0.z,Pe[Lp+2]=Qp.z,ae[lt]=_e,ae[lt+1]=_s,ae[lt+2]=Ep,ae[lt+3]=_s,ae[lt+4]=Bl,ae[lt+5]=Ep,He[Vt]=_e,He[Vt+1]=_s,He[Vt+2]=_e,He[Vt+3]=Ep,He[Vt+4]=_s,He[Vt+5]=Bl,He[Vt+6]=Bl,He[Vt+7]=Ep,k.faceidx+=6,k.lineidx+=8)}}}f.drawSphere=I})(o||(o={}))}),"./src/GLModel.ts":((r,e,t)=>{t.r(e),t.d(e,{GLModel:()=>I});var a=t("./src/WebGL/index.ts"),s=t("./src/WebGL/shapes/index.ts"),o=t("./src/WebGL/math/index.ts"),f=t("./src/colors.ts"),u=t("./src/GLDraw.ts"),h=t("./src/glcartoon.ts"),x=t("./src/utilities.ts"),m=t("./src/Gradient.ts"),w=t("./src/parsers/index.ts"),A=t("./node_modules/netcdfjs/lib-esm/index.js"),D=t("./src/parsers/utils/assignBonds.ts");class I{static sameObj(l,c){return l&&c?JSON.stringify(l)==JSON.stringify(c):l==c}constructor(l,c,L){this.atoms=[],this.frames=[],this.box=null,this.atomdfs=null,this.id=0,this.hidden=!1,this.molObj=null,this.renderedMolObj=null,this.lastColors=null,this.modelData={},this.modelDatas=null,this.idMatrix=new o.Matrix4,this.dontDuplicateAtoms=!0,this.defaultColor=f.elementColors.defaultColor,this.defaultStickRadius=.25,this.options=c||{},this.viewer=L,this.ElementColors=this.options.defaultcolors?this.options.defaultcolors:f.elementColors.defaultColors,this.defaultSphereRadius=this.options.defaultSphereRadius?this.options.defaultSphereRadius:1.5,this.defaultCartoonQuality=this.options.cartoonQuality?this.options.cartoonQuality:10,this.id=l}getRadiusFromStyle(l,c){var L=this.defaultSphereRadius;if(typeof c.radius<"u")L=c.radius;else if(I.vdwRadii[l.elem])L=I.vdwRadii[l.elem];else if(l.elem.length>1){let R=l.elem;R=R[0].toUpperCase()+R[1].toLowerCase(),I.vdwRadii[R]&&(L=I.vdwRadii[R])}return typeof c.scale<"u"&&(L*=c.scale),L}drawAtomCross(l,c){if(l.style.cross){var L=l.style.cross;if(!L.hidden){var R=L.linewidth||I.defaultlineWidth;c[R]||(c[R]=new a.Geometry);var F=c[R].updateGeoGroup(6),$=this.getRadiusFromStyle(l,L),b=[[$,0,0],[-$,0,0],[0,$,0],[0,-$,0],[0,0,$],[0,0,-$]],k=l.clickable||l.hoverable;k&&l.intersectionShape===void 0&&(l.intersectionShape={sphere:[],cylinder:[],line:[]});for(var B=(0,x.getColorFromStyle)(l,L),J=F.vertexArray,X=F.colorArray,ae=0;ae<6;ae++){var He=F.vertices*3;if(F.vertices++,J[He]=l.x+b[ae][0],J[He+1]=l.y+b[ae][1],J[He+2]=l.z+b[ae][2],X[He]=B.r,X[He+1]=B.g,X[He+2]=B.b,k){var Pe=new o.Vector3(b[ae][0],b[ae][1],b[ae][2]);Pe.multiplyScalar(.1),Pe.set(Pe.x+l.x,Pe.y+l.y,Pe.z+l.z),l.intersectionShape.line.push(Pe)}}}}}getGoodCross(l,c,L,R){for(var F=null,$=-1,b=0,k=l.bonds.length;b<k;b++)if(l.bonds[b]!=c.index){let J=l.bonds[b],X=this.atoms[J],ae=new o.Vector3(X.x,X.y,X.z).clone();ae.sub(L);let He=ae.clone();He.cross(R);var B=He.lengthSq();if(B>$&&($=B,F=He,$>.1))return F}return F}getSideBondV(l,c,L){var R,F,$,b,k,B=new o.Vector3(l.x,l.y,l.z),J=new o.Vector3(c.x,c.y,c.z),X=J.clone(),ae=null;if(X.sub(B),l.bonds.length===1)c.bonds.length===1?(ae=X.clone(),Math.abs(ae.x)>1e-4?ae.y+=1:ae.x+=1):(R=(L+1)%c.bonds.length,F=c.bonds[R],$=this.atoms[F],$.index==l.index&&(R=(R+1)%c.bonds.length,F=c.bonds[R],$=this.atoms[F]),b=new o.Vector3($.x,$.y,$.z),k=b.clone(),k.sub(B),ae=k.clone(),ae.cross(X));else if(ae=this.getGoodCross(l,c,B,X),ae.lengthSq()<.01){var He=this.getGoodCross(c,l,B,X);He!=null&&(ae=He)}return ae.lengthSq()<.01&&(ae=X.clone(),Math.abs(ae.x)>1e-4?ae.y+=1:ae.x+=1),ae.cross(X),ae.normalize(),ae}addLine(l,c,L,R,F,$){l[L]=R.x,l[L+1]=R.y,l[L+2]=R.z,c[L]=$.r,c[L+1]=$.g,c[L+2]=$.b,l[L+3]=F.x,l[L+4]=F.y,l[L+5]=F.z,c[L+3]=$.r,c[L+4]=$.g,c[L+5]=$.b}drawBondLines(l,c,L){if(l.style.line){var R=l.style.line;if(!R.hidden){var F,$,b,k,B=R.linewidth||I.defaultlineWidth;L[B]||(L[B]=new a.Geometry);for(var J=L[B].updateGeoGroup(6*l.bonds.length),X=J.vertexArray,ae=J.colorArray,He=0;He<l.bonds.length;He++){var Pe=l.bonds[He],ue=c[Pe];if(ue.style.line&&!(l.index>=ue.index)){var Oe=new o.Vector3(l.x,l.y,l.z),we=new o.Vector3(ue.x,ue.y,ue.z),Ze=Oe.clone().add(we).multiplyScalar(.5),it=!1,lt=l.clickable||l.hoverable,Vt=ue.clickable||ue.hoverable;(lt||Vt)&&(lt&&(l.intersectionShape===void 0&&(l.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),l.intersectionShape.line.push(Oe),l.intersectionShape.line.push(Ze)),Vt&&(ue.intersectionShape===void 0&&(ue.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),ue.intersectionShape.line.push(Ze),ue.intersectionShape.line.push(we)));var _e=(0,x.getColorFromStyle)(l,l.style.line),pr=(0,x.getColorFromStyle)(ue,ue.style.line);if(l.bondStyles&&l.bondStyles[He]){var _s=l.bondStyles[He];if(!_s.iswire)continue;_s.singleBond&&(it=!0),typeof _s.color1<"u"&&(_e=f.CC.color(_s.color1)),typeof _s.color2<"u"&&(pr=f.CC.color(_s.color2))}var Ei=J.vertices*3,Bl,Wl;if(l.bondOrder[He]>1&&l.bondOrder[He]<4&&!it){var Ep=this.getSideBondV(l,ue,He),Lp=we.clone();Lp.sub(Oe),l.bondOrder[He]==2?(Ep.multiplyScalar(.1),F=Oe.clone(),F.add(Ep),$=Oe.clone(),$.sub(Ep),b=F.clone(),b.add(Lp),k=$.clone(),k.add(Lp),_e==pr?(J.vertices+=4,this.addLine(X,ae,Ei,F,b,_e),this.addLine(X,ae,Ei+6,$,k,_e)):(J.vertices+=8,Lp.multiplyScalar(.5),Bl=F.clone(),Bl.add(Lp),Wl=$.clone(),Wl.add(Lp),this.addLine(X,ae,Ei,F,Bl,_e),this.addLine(X,ae,Ei+6,Bl,b,pr),this.addLine(X,ae,Ei+12,$,Wl,_e),this.addLine(X,ae,Ei+18,Wl,k,pr))):l.bondOrder[He]==3&&(Ep.multiplyScalar(.1),F=Oe.clone(),F.add(Ep),$=Oe.clone(),$.sub(Ep),b=F.clone(),b.add(Lp),k=$.clone(),k.add(Lp),_e==pr?(J.vertices+=6,this.addLine(X,ae,Ei,Oe,we,_e),this.addLine(X,ae,Ei+6,F,b,_e),this.addLine(X,ae,Ei+12,$,k,_e)):(J.vertices+=12,Lp.multiplyScalar(.5),Bl=F.clone(),Bl.add(Lp),Wl=$.clone(),Wl.add(Lp),this.addLine(X,ae,Ei,Oe,Ze,_e),this.addLine(X,ae,Ei+6,Ze,we,pr),this.addLine(X,ae,Ei+12,F,Bl,_e),this.addLine(X,ae,Ei+18,Bl,b,pr),this.addLine(X,ae,Ei+24,$,Wl,_e),this.addLine(X,ae,Ei+30,Wl,k,pr)))}else _e==pr?(J.vertices+=2,this.addLine(X,ae,Ei,Oe,we,_e)):(J.vertices+=4,this.addLine(X,ae,Ei,Oe,Ze,_e),this.addLine(X,ae,Ei+6,Ze,we,pr))}}}}}drawAtomSphere(l,c){if(l.style.sphere){var L=l.style.sphere;if(!L.hidden){var R=(0,x.getColorFromStyle)(l,L),F=this.getRadiusFromStyle(l,L);if((l.clickable===!0||l.hoverable)&&l.intersectionShape!==void 0){var $=new o.Vector3(l.x,l.y,l.z);l.intersectionShape.sphere.push(new s.Sphere($,F))}u.GLDraw.drawSphere(c,l,F,R)}}}drawAtomClickSphere(l){if(l.style.clicksphere){var c=l.style.clicksphere;if(!c.hidden){var L=this.getRadiusFromStyle(l,c);if((l.clickable===!0||l.hoverable)&&l.intersectionShape!==void 0){var R=new o.Vector3(l.x,l.y,l.z);l.intersectionShape.sphere.push(new s.Sphere(R,L))}}}}drawAtomInstanced(l,c){if(l.style.sphere){var L=l.style.sphere;if(!L.hidden){var R=this.getRadiusFromStyle(l,L),F=(0,x.getColorFromStyle)(l,L),$=c.updateGeoGroup(1),b=$.vertices,k=b*3,B=$.vertexArray,J=$.colorArray,X=$.radiusArray;if(B[k]=l.x,B[k+1]=l.y,B[k+2]=l.z,J[k]=F.r,J[k+1]=F.g,J[k+2]=F.b,X[b]=R,(l.clickable===!0||l.hoverable)&&l.intersectionShape!==void 0){var ae=new o.Vector3(l.x,l.y,l.z);l.intersectionShape.sphere.push(new s.Sphere(ae,R))}$.vertices+=1}}}drawSphereImposter(l,c,L,R){var F=l.updateGeoGroup(4),$,b=F.vertices,k=b*3,B=F.vertexArray,J=F.colorArray;for($=0;$<4;$++)B[k+3*$]=c.x,B[k+3*$+1]=c.y,B[k+3*$+2]=c.z;var X=F.normalArray;for($=0;$<4;$++)J[k+3*$]=R.r,J[k+3*$+1]=R.g,J[k+3*$+2]=R.b;X[k+0]=-L,X[k+1]=L,X[k+2]=0,X[k+3]=-L,X[k+4]=-L,X[k+5]=0,X[k+6]=L,X[k+7]=-L,X[k+8]=0,X[k+9]=L,X[k+10]=L,X[k+11]=0,F.vertices+=4;var ae=F.faceArray,He=F.faceidx;ae[He+0]=b,ae[He+1]=b+1,ae[He+2]=b+2,ae[He+3]=b+2,ae[He+4]=b+3,ae[He+5]=b,F.faceidx+=6}drawAtomImposter(l,c){if(l.style.sphere){var L=l.style.sphere;if(!L.hidden){var R=this.getRadiusFromStyle(l,L),F=(0,x.getColorFromStyle)(l,L);if((l.clickable===!0||l.hoverable)&&l.intersectionShape!==void 0){var $=new o.Vector3(l.x,l.y,l.z);l.intersectionShape.sphere.push(new s.Sphere($,R))}this.drawSphereImposter(c,l,R,F)}}}calculateDashes(l,c,L,R,F){var $=Math.sqrt(Math.pow(l.x-c.x,2)+Math.pow(l.y-c.y,2)+Math.pow(l.z-c.z,2));L=Math.max(L,0),F=Math.max(F,0)+2*L,R=Math.max(R,.001),R+F>$&&(R=$,F=0);var b=Math.floor(($-R)/(R+F))+1,k=b*R;F=($-k)/b;for(var B,J=new o.Vector3(l.x,l.y,l.z),X=new o.Vector3((c.x-l.x)/($/F),(c.y-l.y)/($/F),(c.z-l.z)/($/F)),ae=new o.Vector3((c.x-l.x)/($/R),(c.y-l.y)/($/R),(c.z-l.z)/($/R)),He=[],Pe=0;Pe<b;Pe++)B=new o.Vector3(J.x+ae.x,J.y+ae.y,J.z+ae.z),He.push({from:J,to:B}),J=new o.Vector3(B.x+X.x,B.y+X.y,B.z+X.z);return He}static drawStickImposter(l,c,L,R,F,$=0,b=0){for(var k=l.updateGeoGroup(4),B=k.vertices,J=B*3,X=k.vertexArray,ae=k.colorArray,He=k.radiusArray,Pe=k.normalArray,ue=F.r,Oe=F.g,we=F.b,Ze=function(pr){var _s=-pr;return _s==0&&(_s=-1e-4),_s},it=J,lt=0;lt<4;lt++)X[it]=c.x,Pe[it]=L.x,ae[it]=ue,it++,X[it]=c.y,Pe[it]=L.y,ae[it]=Oe,it++,X[it]=c.z,Pe[it]=L.z,lt<2?ae[it]=we:ae[it]=Ze(we),it++;k.vertices+=4,He[B]=-R,He[B+1]=R,He[B+2]=-R,He[B+3]=R;var Vt=k.faceArray,_e=k.faceidx;Vt[_e+0]=B,Vt[_e+1]=B+1,Vt[_e+2]=B+2,Vt[_e+3]=B+2,Vt[_e+4]=B+3,Vt[_e+5]=B,k.faceidx+=6}drawBondSticks(l,c,L){var R,F;if(l.style.stick){var $=l.style.stick;if(!$.hidden){var b=$.radius||this.defaultStickRadius,k=$.doubleBondScaling||.4,B=$.tripleBondScaling||.25,J=((R=$.dashedBondConfig)===null||R===void 0?void 0:R.dashLength)||.1,X=((F=$.dashedBondConfig)===null||F===void 0?void 0:F.gapLength)||.25,ae=b,He=$.singleBonds||!1,Pe=$.dashedBonds||!1,ue=0,Oe=0,we,Ze,it,lt,Vt,_e,pr,_s,Ei,Bl,Wl,Ep=(0,x.getColorFromStyle)(l,$),Lp,Op,R0;!l.capDrawn&&l.bonds.length<4&&(ue=2);var N0=u0=>{var x0=L.imposter?I.drawStickImposter:u.GLDraw.drawCylinder;return!Pe&&u0>=1?x0:(Xl,Bp,L0,kl,Np,V0=0,Ke=0,g0=.1,d0=.25)=>{var Vl=this.calculateDashes(Bp,L0,kl,g0,d0);Vl.forEach(jp=>{x0(Xl,jp.from,jp.to,kl,Np,V0,Ke)})}};for(it=0;it<l.bonds.length;it++){var Qp=N0(l.bondOrder[it]),O0=l.bonds[it],zp=c[O0];if(Lp=Op=R0=null,l.index<zp.index){var M0=zp.style;if(!M0.stick||M0.stick.hidden)continue;var W0=(0,x.getColorFromStyle)(zp,M0.stick);if(ae=b,lt=He,l.bondStyles&&l.bondStyles[it]){if(Vt=l.bondStyles[it],Vt.iswire)continue;Vt.radius&&(ae=Vt.radius),Vt.singleBond&&(lt=!0),typeof Vt.color1<"u"&&(Ep=f.CC.color(Vt.color1)),typeof Vt.color2<"u"&&(W0=f.CC.color(Vt.color2))}var im=new o.Vector3(l.x,l.y,l.z),F0=new o.Vector3(zp.x,zp.y,zp.z);if(l.bondOrder[it]<=1||lt||l.bondOrder[it]>3){if(l.bondOrder[it]<1&&(ae*=l.bondOrder[it]),!zp.capDrawn&&zp.bonds.length<4&&(Oe=2),Ep!=W0?(Lp=new o.Vector3().addVectors(im,F0).multiplyScalar(.5),Qp(L,im,Lp,ae,Ep,ue,0,J,X),Qp(L,Lp,F0,ae,W0,0,Oe,J,X)):Qp(L,im,F0,ae,Ep,ue,Oe,J,X),we=l.clickable||l.hoverable,Ze=zp.clickable||zp.hoverable,we||Ze){if(Lp||(Lp=new o.Vector3().addVectors(im,F0).multiplyScalar(.5)),we){var fm=new s.Cylinder(im,Lp,ae),cm=new s.Sphere(im,ae);l.intersectionShape.cylinder.push(fm),l.intersectionShape.sphere.push(cm)}if(Ze){var Ap=new s.Cylinder(F0,Lp,ae),Io=new s.Sphere(F0,ae);zp.intersectionShape.cylinder.push(Ap),zp.intersectionShape.sphere.push(Io)}}}else if(l.bondOrder[it]>1){var p0=0,a0=0;ae!=b&&(p0=2,a0=2);var rm=F0.clone(),X0=null;rm.sub(im);var Nl,Gl,Mp,_0,v0;X0=this.getSideBondV(l,zp,it),l.bondOrder[it]==2?(Nl=ae*k,X0.multiplyScalar(Nl*1.5),Gl=im.clone(),Gl.add(X0),Mp=im.clone(),Mp.sub(X0),_0=Gl.clone(),_0.add(rm),v0=Mp.clone(),v0.add(rm),Ep!=W0?(Lp=new o.Vector3().addVectors(Gl,_0).multiplyScalar(.5),Op=new o.Vector3().addVectors(Mp,v0).multiplyScalar(.5),Qp(L,Gl,Lp,Nl,Ep,p0,0),Qp(L,Lp,_0,Nl,W0,0,a0),Qp(L,Mp,Op,Nl,Ep,p0,0),Qp(L,Op,v0,Nl,W0,0,a0)):(Qp(L,Gl,_0,Nl,Ep,p0,a0),Qp(L,Mp,v0,Nl,Ep,p0,a0)),we=l.clickable||l.hoverable,Ze=zp.clickable||zp.hoverable,(we||Ze)&&(Lp||(Lp=new o.Vector3().addVectors(Gl,_0).multiplyScalar(.5)),Op||(Op=new o.Vector3().addVectors(Mp,v0).multiplyScalar(.5)),we&&(_e=new s.Cylinder(Gl,Lp,Nl),pr=new s.Cylinder(Mp,Op,Nl),l.intersectionShape.cylinder.push(_e),l.intersectionShape.cylinder.push(pr)),Ze&&(Ei=new s.Cylinder(_0,Lp,Nl),Bl=new s.Cylinder(v0,Op,Nl),zp.intersectionShape.cylinder.push(Ei),zp.intersectionShape.cylinder.push(Bl)))):l.bondOrder[it]==3&&(Nl=ae*B,X0.cross(rm),X0.normalize(),X0.multiplyScalar(Nl*3),Gl=im.clone(),Gl.add(X0),Mp=im.clone(),Mp.sub(X0),_0=Gl.clone(),_0.add(rm),v0=Mp.clone(),v0.add(rm),Ep!=W0?(Lp=new o.Vector3().addVectors(Gl,_0).multiplyScalar(.5),Op=new o.Vector3().addVectors(Mp,v0).multiplyScalar(.5),R0=new o.Vector3().addVectors(im,F0).multiplyScalar(.5),Qp(L,Gl,Lp,Nl,Ep,p0,0),Qp(L,Lp,_0,Nl,W0,0,a0),Qp(L,im,R0,Nl,Ep,ue,0),Qp(L,R0,F0,Nl,W0,0,Oe),Qp(L,Mp,Op,Nl,Ep,p0,0),Qp(L,Op,v0,Nl,W0,0,a0)):(Qp(L,Gl,_0,Nl,Ep,p0,a0),Qp(L,im,F0,Nl,Ep,ue,Oe),Qp(L,Mp,v0,Nl,Ep,p0,a0)),we=l.clickable||l.hoverable,Ze=zp.clickable||zp.hoverable,(we||Ze)&&(Lp||(Lp=new o.Vector3().addVectors(Gl,_0).multiplyScalar(.5)),Op||(Op=new o.Vector3().addVectors(Mp,v0).multiplyScalar(.5)),R0||(R0=new o.Vector3().addVectors(im,F0).multiplyScalar(.5)),we&&(_e=new s.Cylinder(Gl.clone(),Lp.clone(),Nl),pr=new s.Cylinder(Mp.clone(),Op.clone(),Nl),_s=new s.Cylinder(im.clone(),R0.clone(),Nl),l.intersectionShape.cylinder.push(_e),l.intersectionShape.cylinder.push(pr),l.intersectionShape.cylinder.push(_s)),Ze&&(Ei=new s.Cylinder(_0.clone(),Lp.clone(),Nl),Bl=new s.Cylinder(v0.clone(),Op.clone(),Nl),Wl=new s.Cylinder(F0.clone(),R0.clone(),Nl),zp.intersectionShape.cylinder.push(Ei),zp.intersectionShape.cylinder.push(Bl),zp.intersectionShape.cylinder.push(Wl))))}}}var z0=!1,sm=0,Uo=!1;for(it=0;it<l.bonds.length;it++)lt=He,l.bondStyles&&l.bondStyles[it]&&(Vt=l.bondStyles[it],Vt.singleBond&&(lt=!0),Vt.radius&&Vt.radius!=b&&(Uo=!0)),(lt||l.bondOrder[it]==1)&&sm++;Uo?sm>0&&(z0=!0):sm==0&&(l.bonds.length>0||$.showNonBonded)&&(z0=!0),z0&&(ae=b,L.imposter?this.drawSphereImposter(L.sphereGeometry,l,ae,Ep):u.GLDraw.drawSphere(L,l,ae,Ep))}}}createMolObj(l,c){c=c||{};var L=new a.Object3D,R=[],F={},$={},b=this.drawAtomSphere,k=null,B=null;c.supportsImposters?(b=this.drawAtomImposter,k=new a.Geometry(!0),k.imposter=!0,B=new a.Geometry(!0,!0),B.imposter=!0,B.sphereGeometry=new a.Geometry(!0),B.sphereGeometry.imposter=!0,B.drawnCaps={}):c.supportsAIA?(b=this.drawAtomInstanced,k=new a.Geometry(!1,!0,!0),k.instanced=!0,B=new a.Geometry(!0)):(k=new a.Geometry(!0),B=new a.Geometry(!0));var J,X,ae,He,Pe={},ue=[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];for(J=0,ae=l.length;J<ae;J++){var Oe=l[J];if(Oe&&Oe.style){(Oe.clickable||Oe.hoverable)&&Oe.intersectionShape===void 0&&(Oe.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),He={line:void 0,cross:void 0,stick:void 0,sphere:void 0};for(X in He)Oe.style[X]?Oe.style[X].opacity?He[X]=parseFloat(Oe.style[X].opacity):He[X]=1:He[X]=void 0,Pe[X]?He[X]!=null&&Pe[X]!=He[X]&&(console.log("Warning: "+X+" opacity is ambiguous"),Pe[X]=1):Pe[X]=He[X];b.call(this,Oe,k),this.drawAtomClickSphere(Oe),this.drawAtomCross(Oe,$),this.drawBondLines(Oe,l,F),this.drawBondSticks(Oe,l,B),typeof Oe.style.cartoon<"u"&&!Oe.style.cartoon.hidden&&(Oe.style.cartoon.color==="spectrum"&&typeof Oe.resi=="number"&&!Oe.hetflag&&(Oe.resi<ue[0]&&(ue[0]=Oe.resi),Oe.resi>ue[1]&&(ue[1]=Oe.resi)),R.push(Oe))}}if(R.length>0&&(0,h.drawCartoon)(L,R,ue,this.defaultCartoonQuality),k&&k.vertices>0){k.initTypedArrays();var we=null,Ze=null;k.imposter?we=new a.SphereImposterMaterial({ambient:0,vertexColors:!0,reflectivity:0}):k.instanced?(Ze=new a.Geometry(!0),u.GLDraw.drawSphere(Ze,{x:0,y:0,z:0},1,new f.Color(.5,.5,.5)),Ze.initTypedArrays(),we=new a.InstancedMaterial({sphereMaterial:new a.MeshLambertMaterial({ambient:0,vertexColors:!0,reflectivity:0}),sphere:Ze})):we=new a.MeshLambertMaterial({ambient:0,vertexColors:!0,reflectivity:0}),Pe.sphere<1&&Pe.sphere>=0&&(we.transparent=!0,we.opacity=Pe.sphere),Ze=new a.Mesh(k,we),L.add(Ze)}if(B.vertices>0){var it=null,lt=null,Vt=B.sphereGeometry;(!Vt||typeof Vt.vertices>"u"||Vt.vertices==0)&&(Vt=null),B.initTypedArrays(),Vt&&Vt.initTypedArrays();var _e={ambient:0,vertexColors:!0,reflectivity:0};B.imposter?(it=new a.StickImposterMaterial(_e),lt=new a.SphereImposterMaterial(_e)):(it=new a.MeshLambertMaterial(_e),lt=new a.MeshLambertMaterial(_e),it.wireframe&&(B.setUpWireframe(),Vt&&Vt.setUpWireframe())),Pe.stick<1&&Pe.stick>=0&&(it.transparent=!0,it.opacity=Pe.stick,lt.transparent=!0,lt.opacity=Pe.stick);var pr=new a.Mesh(B,it);if(L.add(pr),Vt){var _s=new a.Mesh(Vt,lt);L.add(_s)}}var Ei;for(J in F)if(F.hasOwnProperty(J)){Ei=J;var Bl=new a.LineBasicMaterial({linewidth:Ei,vertexColors:!0});Pe.line<1&&Pe.line>=0&&(Bl.transparent=!0,Bl.opacity=Pe.line),F[J].initTypedArrays();var Wl=new a.Line(F[J],Bl,a.LineStyle.LinePieces);L.add(Wl)}for(J in $)if($.hasOwnProperty(J)){Ei=J;var Ep=new a.LineBasicMaterial({linewidth:Ei,vertexColors:!0});Pe.cross<1&&Pe.cross>=0&&(Ep.transparent=!0,Ep.opacity=Pe.cross),$[J].initTypedArrays();var Lp=new a.Line($[J],Ep,a.LineStyle.LinePieces);L.add(Lp)}if(this.dontDuplicateAtoms&&this.modelData.symmetries&&this.modelData.symmetries.length>0){var Op=new a.Object3D,R0;for(R0=0;R0<this.modelData.symmetries.length;R0++){var N0=new a.Object3D;N0=L.clone(),N0.matrix.copy(this.modelData.symmetries[R0]),N0.matrixAutoUpdate=!1,Op.add(N0)}return Op}return L}getViewer(){return this.viewer}getInternalState(){return{atoms:this.atoms,frames:this.frames}}setInternalState(l){this.atoms=l.atoms,this.frames=l.frames,this.molObj=null}getCrystData(){if(this.modelData.cryst){if(!this.modelData.cryst.matrix){const l=this.modelData.cryst;this.modelData.cryst.matrix=(0,o.conversionMatrix3)(l.a,l.b,l.c,l.alpha,l.beta,l.gamma)}return this.modelData.cryst}else return null}setCrystData(l,c,L,R,F,$){l=l||1,c=c||1,L=L||1,R=R||90,F=F||90,$=$||90;const b=(0,o.conversionMatrix3)(l,c,L,R,F,$);this.modelData.cryst={a:l,b:c,c:L,alpha:R,beta:F,gamma:$,matrix:b}}setCrystMatrix(l){l=l||new o.Matrix3(1,0,0,0,1,0,0,0,1),this.modelData.cryst={matrix:l}}getSymmetries(){return typeof this.modelData.symmetries>"u"&&(this.modelData.symmetries=[this.idMatrix]),this.modelData.symmetries}setSymmetries(l){typeof l>"u"?this.modelData.symmetries=[this.idMatrix]:(this.modelData.symmetries=l,this.molObj=null)}getID(){return this.id}getNumFrames(){return this.frames.numFrames!=null?this.frames.numFrames:this.frames.length}adjustCoord(l,c,L,R){var F=c-l;return F<-L?c+R:F>L?c-R:c}adjustCoordinatesToBox(){if(this.box&&this.atomdfs)for(var l=this.box[0],c=this.box[1],L=this.box[2],R=l*.9,F=c*.9,$=L*.9,b=0;b<this.atomdfs.length;b++)for(var k=this.atomdfs[b],B=1;B<k.length;B++){var J=this.atoms[k[B][0]],X=this.atoms[k[B][1]];J.x=this.adjustCoord(X.x,J.x,R,l),J.y=this.adjustCoord(X.y,J.y,F,c),J.z=this.adjustCoord(X.z,J.z,$,L)}}setFrame(l){var c=this.getNumFrames();let L=this,R=this.viewer;return new Promise(function(F,$){if(c==0&&F(),(l<0||l>=c)&&(l=c-1),L.frames.url!=null){var b=L.frames.url;(0,x.getbin)(b+"/traj/frame/"+l+"/"+L.frames.path,void 0,"POST",void 0).then(function(k){for(var B=new Float32Array(k,44),J=0,X=0;X<L.atoms.length;X++)L.atoms[X].x=B[J++],L.atoms[X].y=B[J++],L.atoms[X].z=B[J++];L.box&&L.atomdfs&&L.adjustCoordinatesToBox(),F()}).catch($)}else L.atoms=L.frames[l],F();L.molObj=null,L.modelDatas&&l<L.modelDatas.length&&(L.modelData=L.modelDatas[l],L.unitCellObjects&&R&&(R.removeUnitCell(L),R.addUnitCell(L)))})}addFrame(l){this.frames.push(l)}vibrate(l=10,c=1,L=!1,R){var F=0,$=l;let b=this.viewer;L&&(F=-l,$=l),this.frames!==void 0&&this.frames.origIndex!==void 0?this.setFrame(this.frames.origIndex):this.setFrame(0),F<$&&(this.frames=[]),L&&(this.frames.origIndex=l);for(var k=F;k<$;k++){var B=[],J=this.frames.length;if(k==0&&!R){this.frames.push(this.atoms);continue}for(var X=0;X<this.atoms.length;X++){var ae=(0,x.getAtomProperty)(this.atoms[X],"dx"),He=(0,x.getAtomProperty)(this.atoms[X],"dy"),Pe=(0,x.getAtomProperty)(this.atoms[X],"dz"),ue=new o.Vector3(ae,He,Pe),Oe=new o.Vector3(this.atoms[X].x,this.atoms[X].y,this.atoms[X].z),we=k*c/l;ue.multiplyScalar(we),Oe.add(ue);var Ze={};for(var it in this.atoms[X])Ze[it]=this.atoms[X][it];if(Ze.x=Oe.x,Ze.y=Oe.y,Ze.z=Oe.z,B.push(Ze),b&&R){var lt=(0,x.extend)({},R),Vt=new o.Vector3(ae,He,Pe);if(Vt.multiplyScalar(c),Vt.add(Oe),lt.start=Oe,lt.end=Vt,lt.frame=J,!lt.color){var _e=Ze.style.sphere;_e||(_e=Ze.style.stick),_e||(_e=Ze.style.line),lt.color=(0,x.getColorFromStyle)(Ze,_e)}b.addArrow(lt)}}this.frames.push(B)}}setAtomDefaults(l){for(let c=0;c<l.length;c++){let L=l[c];L&&(L.style=L.style||(0,x.deepCopy)(I.defaultAtomStyle),L.color=L.color||this.ElementColors[L.elem]||this.defaultColor,L.model=this.id,(L.clickable||L.hoverable)&&(L.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}))}}addMolData(l,c,L={}){var R=I.parseMolData(l,c,L);this.dontDuplicateAtoms=!L.duplicateAssemblyAtoms;var F=R.modelData;if(F&&(Array.isArray(F)?(this.modelData=F[0],L.frames&&(this.modelDatas=F)):this.modelData=F),R.box?this.box=R.box:this.box=null,this.frames.length==0){for(let b=0;b<R.length;b++)R[b].length!=0&&this.frames.push(R[b]);this.frames[0]&&(this.atoms=this.frames[0])}else if(L.frames)for(let b=0;b<R.length;b++)this.frames.push(R[b]);else for(var $=0;$<R.length;$++)this.addAtoms(R[$]);for(let b=0;b<this.frames.length;b++)this.setAtomDefaults(this.frames[b]);L.vibrate&&L.vibrate.frames&&L.vibrate.amplitude&&this.vibrate(L.vibrate.frames,L.vibrate.amplitude),L.style&&this.setStyle({},L.style)}setDontDuplicateAtoms(l){this.dontDuplicateAtoms=l}setModelData(l){this.modelData=l}propertyMatches(l,c){if(l==c)return!0;if(typeof c=="string"&&typeof l=="number"){var L=c.match(/(-?\d+)\s*-\s*(-?\d+)/);if(L){var R=parseInt(L[1]),F=parseInt(L[2]);if(L&&l>=R&&l<=F)return!0}}return!1}static deepCopyAndCache(l,c){if(typeof l!="object"||l==null||l instanceof I||l.__cache_created)return l;const L={};for(const R in l){const F=l[R];if(Array.isArray(F)){L[R]=[];for(let $=0;$<F.length;$++)L[R].push(I.deepCopyAndCache(F[$],c))}else typeof F=="object"&&R!="properties"&&R!="model"?L[R]=I.deepCopyAndCache(F,c):L[R]=F;if(R=="and"||R=="or"){const $=[];for(const b of L[R]){const k=new Set;for(const B of c.selectedAtoms(b))k.add(B.index);$.push(k)}if(R=="and"){const b=function(B,J){const X=new Set;for(const ae of J)B.has(ae)&&X.add(ae);return X};let k=new Set($[0]);for(const B of $.splice(1))k=b(k,B);L[R].__cached_results=k}else if(R=="or"){const b=new Set;for(const k of $)for(const B of k)b.add(B);L[R].__cached_results=b}}}return L.__cache_created=!0,L}atomIsSelected(l,c){if(typeof c>"u")return!0;var L=!!c.invert,R=!0;for(var F in c)if(F=="and"||F=="or"||F=="not"){if(F=="not"){if(this.atomIsSelected(l,c[F])){R=!1;break}}else if(c[F].__cached_results===void 0&&(c=I.deepCopyAndCache(c,this)),R=c[F].__cached_results.has(l.index),!R)break}else if(F==="predicate"){if(!c.predicate(l)){R=!1;break}}else if(F=="properties"&&l[F]){for(var $ in c.properties)if(!$.startsWith("__cache")){if(typeof l.properties[$]>"u"){R=!1;break}if(l.properties[$]!=c.properties[$]){R=!1;break}}}else if(F=="model"){let J=c.model;if(typeof J=="number"&&J<0&&(J=this.viewer.getNextModelId()+J),Array.isArray(J)){let X=!1;for(let ae=0;ae<J.length;ae++)if(J[ae]==this||J[ae]==this.id){X=!0;break}if(!X){R=!1;break}}else if(J!=this&&J!=this.id){R=!1;break}}else if(c.hasOwnProperty(F)&&!I.ignoredKeys.has(F)&&!F.startsWith("__cache")){if(typeof l[F]>"u"){R=!1;break}let J=!1;if(F==="bonds"){var b=c[F];if(b!=l.bonds.length){R=!1;break}}else if(Array.isArray(c[F])){var k=c[F],B=l[F];for(let X=0;X<k.length;X++)if(this.propertyMatches(B,k[X])){J=!0;break}if(!J){R=!1;break}}else{let X=c[F];if(!this.propertyMatches(l[F],X)){R=!1;break}}}return L?!R:R}static squaredDistance(l,c){var L=c.x-l.x,R=c.y-l.y,F=c.z-l.z;return L*L+R*R+F*F}expandAtomList(l,c){if(c<=0)return l;for(var L=(0,x.getExtent)(l,void 0),R=[[],[],[]],F=0;F<3;F++)R[0][F]=L[0][F]-c,R[1][F]=L[1][F]+c,R[2][F]=L[2][F];var $=[];for(let J=0;J<this.atoms.length;J++){var b=this.atoms[J].x,k=this.atoms[J].y,B=this.atoms[J].z;b>=R[0][0]&&b<=R[1][0]&&k>=R[0][1]&&k<=R[1][1]&&B>=R[0][2]&&B<=R[1][2]&&(b>=L[0][0]&&b<=L[1][0]&&k>=L[0][1]&&k<=L[1][1]&&B>=L[0][2]&&B<=L[1][2]||$.push(this.atoms[J]))}return $}static getFloat(l){return typeof l=="number"?l:parseFloat(l)}selectedAtoms(l,c){var L=[];l=I.deepCopyAndCache(l||{},this),c||(c=this.atoms);for(var R=c.length,F=0;F<R;F++){var $=c[F];$&&this.atomIsSelected($,l)&&L.push($)}if(l.hasOwnProperty("expand")){const Ze=I.getFloat(l.expand);let it=this.expandAtomList(L,Ze),lt=L.length;const Vt=Ze*Ze;for(let _e=0;_e<it.length;_e++)for(let pr=0;pr<lt;pr++){var b=I.squaredDistance(it[_e],L[pr]);b<Vt&&b>0&&L.push(it[_e])}}if(l.hasOwnProperty("within")&&l.within.hasOwnProperty("sel")&&l.within.hasOwnProperty("distance")){var k=this.selectedAtoms(l.within.sel,this.atoms),B={};const Ze=I.getFloat(l.within.distance),it=Ze*Ze;for(let lt=0;lt<k.length;lt++)for(let Vt=0;Vt<L.length;Vt++){let _e=I.squaredDistance(k[lt],L[Vt]);_e<it&&_e>0&&(B[Vt]=1)}var J=[];if(l.within.invert)for(let lt=0;lt<L.length;lt++)B[lt]||J.push(L[lt]);else for(let lt in B)J.push(L[lt]);L=J}if(l.hasOwnProperty("byres")){var X={},ae=[],He=[];for(let Ze=0;Ze<L.length;Ze++){let it=L[Ze];var Pe=it.chain,ue=it.resi;if(X[Pe]===void 0&&(X[Pe]={}),it.hasOwnProperty("resi")&&X[Pe][ue]===void 0){for(X[Pe][ue]=!0,He.push(it);He.length>0;)if(it=He.pop(),Pe=it.chain,ue=it.resi,ae[it.index]===void 0){ae[it.index]=!0;for(var Oe=0;Oe<it.bonds.length;Oe++){var we=this.atoms[it.bonds[Oe]];ae[we.index]===void 0&&we.hasOwnProperty("resi")&&we.chain==Pe&&we.resi==ue&&(He.push(we),L.push(we))}}}}}return L}addAtoms(l){this.molObj=null;var c=this.atoms.length,L=[],R;for(R=0;R<l.length;R++)typeof l[R].index>"u"&&(l[R].index=R),typeof l[R].serial>"u"&&(l[R].serial=R),L[l[R].index]=c+R;for(R=0;R<l.length;R++){var F=l[R],$=L[F.index],b=(0,x.extend)({},F);b.index=$,b.bonds=[],b.bondOrder=[],b.model=this.id,b.style=b.style||(0,x.deepCopy)(I.defaultAtomStyle),typeof b.color>"u"&&(b.color=this.ElementColors[b.elem]||this.defaultColor);for(var k=F.bonds?F.bonds.length:0,B=0;B<k;B++){var J=L[F.bonds[B]];typeof J<"u"&&(b.bonds.push(J),b.bondOrder.push(F.bondOrder?F.bondOrder[B]:1))}this.atoms.push(b)}}assignBonds(){(0,D.assignBonds)(this.atoms,{assignBonds:!0})}removeAtoms(l){this.molObj=null;var c=[],L;for(L=0;L<l.length;L++)c[l[L].index]=!0;var R=[];for(L=0;L<this.atoms.length;L++){var F=this.atoms[L];c[F.index]||R.push(F)}this.atoms=[],this.addAtoms(R)}setStyle(l,c,L){typeof c>"u"&&typeof L>"u"&&(c=l,l={}),l=l,typeof c=="string"&&(c=(0,x.specStringToObject)(c));var R=!1,F=this,$=function(k){var B=F.selectedAtoms(l,k);for(let J=0;J<k.length;J++)k[J]&&(k[J].capDrawn=!1);for(let J=0;J<B.length;J++){R=!0,(B[J].clickable||B[J].hoverable)&&(B[J].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),L||(B[J].style={});for(let X in c)c.hasOwnProperty(X)&&(B[J].style[X]=B[J].style[X]||{},Object.assign(B[J].style[X],c[X]))}};if(l.frame!==void 0&&l.frame<this.frames.length){let k=l.frame;k<0&&(k=this.frames.length+k),$(this.frames[k])}else{$(this.atoms);for(var b=0;b<this.frames.length;b++)this.frames[b]!==this.atoms&&$(this.frames[b])}R&&(this.molObj=null)}setClickable(l,c,L){if(c=!!c,L=(0,x.makeFunction)(L),L===null){console.log("Callback is not a function");return}var R=this.selectedAtoms(l,this.atoms),F=R.length;for(let $=0;$<F;$++)R[$].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},R[$].clickable=c,L&&(R[$].callback=L);F>0&&(this.molObj=null)}setHoverable(l,c,L,R){if(c=!!c,L=(0,x.makeFunction)(L),R=(0,x.makeFunction)(R),L===null){console.log("Hover_callback is not a function");return}if(R===null){console.log("Unhover_callback is not a function");return}var F=this.selectedAtoms(l,this.atoms),$=F.length;for(let b=0;b<$;b++)F[b].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},F[b].hoverable=c,L&&(F[b].hover_callback=L),R&&(F[b].unhover_callback=R);$>0&&(this.molObj=null)}enableContextMenu(l,c){c=!!c;var L,R=this.selectedAtoms(l,this.atoms),F=R.length;for(L=0;L<F;L++)R[L].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},R[L].contextMenuEnabled=c;F>0&&(this.molObj=null)}setColorByElement(l,c){if(!(this.molObj!==null&&I.sameObj(c,this.lastColors))){this.lastColors=c;var L=this.selectedAtoms(l,L);L.length>0&&(this.molObj=null);for(var R=0;R<L.length;R++){var F=L[R];typeof c[F.elem]<"u"&&(F.color=c[F.elem])}}}setColorByProperty(l,c,L,R){var F,$,b=this.selectedAtoms(l,b);for(this.lastColors=null,b.length>0&&(this.molObj=null),typeof L=="string"&&typeof m.Gradient.builtinGradients[L]<"u"&&(L=new m.Gradient.builtinGradients[L]),L=L,R||(R=L.range()),R||(R=(0,x.getPropertyRange)(b,c)),F=0;F<b.length;F++){$=b[F];var k=(0,x.getAtomProperty)($,c);k!=null&&($.color=L.valueToHex(parseFloat($.properties[c]),R))}}setColorByFunction(l,c){var L=this.selectedAtoms(l,L);if(typeof c=="function"){this.lastColors=null,L.length>0&&(this.molObj=null);for(let R=0;R<L.length;R++){let F=L[R];F.color=c(F)}}}toCDObject(l=!1){var c={a:[],b:[]};l&&(c.s=[]);for(let R=0;R<this.atoms.length;R++){let F={},$=this.atoms[R];if(F.x=$.x,F.y=$.y,F.z=$.z,$.elem!="C"&&(F.l=$.elem),l){for(var L=0;L<c.s.length&&JSON.stringify($.style)!==JSON.stringify(c.s[L]);)L++;L===c.s.length&&c.s.push($.style),L!==0&&(F.s=L)}c.a.push(F);for(let b=0;b<$.bonds.length;b++){let k=R,B=$.bonds[b];if(k>=B)continue;let J={b:k,e:B},X=$.bondOrder[b];X!=1&&(J.o=X),c.b.push(J)}}return c}globj(l,c){(this.molObj===null||c.regen)&&(this.molObj=this.createMolObj(this.atoms,c),this.renderedMolObj&&(l.remove(this.renderedMolObj),this.renderedMolObj=null),this.renderedMolObj=this.molObj.clone(),this.hidden&&(this.renderedMolObj.setVisible(!1),this.molObj.setVisible(!1)),l.add(this.renderedMolObj))}exportVRML(){var l=this.createMolObj(this.atoms,{supportsImposters:!1,supportsAIA:!1});return l.vrml()}removegl(l){this.renderedMolObj&&(this.renderedMolObj.geometry!==void 0&&this.renderedMolObj.geometry.dispose(),this.renderedMolObj.material!==void 0&&this.renderedMolObj.material.dispose(),l.remove(this.renderedMolObj),this.renderedMolObj=null),this.molObj=null}hide(){this.hidden=!0,this.renderedMolObj&&this.renderedMolObj.setVisible(!1),this.molObj&&this.molObj.setVisible(!1)}show(){this.hidden=!1,this.renderedMolObj&&this.renderedMolObj.setVisible(!0),this.molObj&&this.molObj.setVisible(!0)}addPropertyLabels(l,c,L){let R=this.selectedAtoms(c),F=this.viewer,$=(0,x.deepCopy)(L);for(let k=0;k<R.length;k++){let B=R[k];var b=null;typeof B[l]<"u"?b=String(B[l]):typeof B.properties[l]<"u"&&(b=String(B.properties[l])),b!=null&&($.position=B,F.addLabel(b,$))}}addResLabels(l,c,L=!1){let R=this.viewer;var F=[],$=function(k,B){for(var J=k.selectedAtoms(l,J),X={},ae=0;ae<J.length;ae++){var He=J[ae],Pe=He.chain,ue=He.resn,Oe=He.resi,we=ue+""+Oe;X[Pe]||(X[Pe]={}),X[Pe][we]||(X[Pe][we]=[]),X[Pe][we].push(He)}var Ze=(0,x.deepCopy)(c);for(let lt in X)if(X.hasOwnProperty(lt)){var it=X[lt];for(let Vt in it)if(it.hasOwnProperty(Vt)){let _e=it[Vt],pr=new o.Vector3(0,0,0);for(let Ei=0;Ei<_e.length;Ei++){let Bl=_e[Ei];pr.x+=Bl.x,pr.y+=Bl.y,pr.z+=Bl.z}pr.divideScalar(_e.length),Ze.position=pr,Ze.frame=B;let _s=R.addLabel(Vt,Ze,void 0,!0);F.push(_s)}}};if(L){var b=this.getNumFrames();let k=this.atoms;for(let B=0;B<b;B++)this.frames[B]&&(this.atoms=this.frames[B],$(this,B));this.atoms=k}else $(this);return F}setupDFS(){this.atomdfs=[];var l=this,c=new Int8Array(this.atoms.length);c.fill(0);for(var L=function(b,k,B){B.push([b,k]);var J=l.atoms[b];c[b]=1;for(var X=0;X<J.bonds.length;X++){var ae=J.bonds[X];l.atoms[ae]&&!c[ae]&&L(ae,b,B)}},R=0;R<this.atoms.length;R++){var F=this.atoms[R];if(F&&!c[R]){var $=[];L(R,-1,$),this.atomdfs.push($)}}}setCoordinatesFromURL(l,c){this.frames=[];var L=this;return this.box&&this.setupDFS(),l.startsWith("http")||(l="http://"+l),(0,x.get)(l+"/traj/numframes/"+c,function(R){if(!isNaN(parseInt(R)))return L.frames.push(L.atoms),L.frames.numFrames=R,L.frames.url=l,L.frames.path=c,L.setFrame(0)})}setCoordinates(l,c){if(c=c||"",!l)return[];if(/\.gz$/.test(c)){c=c.replace(/\.gz$/,"");try{l=(0,x.inflateString)(l)}catch(X){console.log(X)}}var L={mdcrd:"",inpcrd:"",pdb:"",netcdf:"",array:""};if(L.hasOwnProperty(c)){this.frames=[];for(var R=this.atoms.length,F=I.parseCrd(l,c),$=0;$<F.length;){for(var b=[],k=0;k<R;k++){var B={};for(var J in this.atoms[k])B[J]=this.atoms[k][J];b[k]=B,b[k].x=F[$++],b[k].y=F[$++],b[k].z=F[$++]}this.frames.push(b)}return this.atoms=this.frames[0],this.frames}return[]}addAtomSpecs(l){}static parseCrd(l,c){var L=[],R=0;if(c=="pdb")for(var F=l.indexOf(`
ATOM`);F!=-1;){for(;l.slice(F,F+5)==`
ATOM`||l.slice(F,F+7)==`
HETATM`;)L[R++]=parseFloat(l.slice(F+31,F+39)),L[R++]=parseFloat(l.slice(F+39,F+47)),L[R++]=parseFloat(l.slice(F+47,F+55)),F=l.indexOf(`
`,F+54),l.slice(F,F+4)==`
TER`&&(F=l.indexOf(`
`,F+5));F=l.indexOf(`
ATOM`,F)}else if(c=="netcdf"){var $=new A.NetCDFReader(l);L=[].concat.apply([],$.getDataVariable("coordinates"))}else{if(c=="array"||Array.isArray(l))return l.flat(2);{let b=l.indexOf(`
`);c=="inpcrd"&&(b=l.indexOf(`
`,b+1)),l=l.slice(b+1),L=l.match(/\S+/g).map(parseFloat)}}return L}static parseMolData(l,c="",L){if(!l)return[];if(/\.gz$/.test(c)){c=c.replace(/\.gz$/,"");try{c.match(/bcif/i)?l=(0,x.inflateString)(l,!1):l=(0,x.inflateString)(l)}catch($){console.log($)}}typeof w.Parsers[c]>"u"&&(c=c.split(".").pop(),typeof w.Parsers[c]>"u"&&(console.log("Unknown format: "+c),l instanceof Uint8Array?c="bcif":l.match(/^@<TRIPOS>MOLECULE/gm)?c="mol2":l.match(/^data_/gm)&&l.match(/^loop_/gm)?c="cif":l.match(/^HETATM/gm)||l.match(/^ATOM/gm)?c="pdb":l.match(/ITEM: TIMESTEP/gm)?c="lammpstrj":l.match(/^.*\n.*\n.\s*(\d+)\s+(\d+)/gm)?c="sdf":l.match(/^%VERSION\s+VERSION_STAMP/gm)?c="prmtop":c="xyz",console.log("Best guess: "+c)));var R=w.Parsers[c],F=R(l,L);return F}}I.defaultAtomStyle={line:{}},I.defaultlineWidth=1,I.vdwRadii={H:1.2,He:1.4,Li:1.82,Be:1.53,B:1.92,C:1.7,N:1.55,O:1.52,F:1.47,Ne:1.54,Na:2.27,Mg:1.73,Al:1.84,Si:2.1,P:1.8,S:1.8,Cl:1.75,Ar:1.88,K:2.75,Ca:2.31,Ni:1.63,Cu:1.4,Zn:1.39,Ga:1.87,Ge:2.11,As:1.85,Se:1.9,Br:1.85,Kr:2.02,Rb:3.03,Sr:2.49,Pd:1.63,Ag:1.72,Cd:1.58,In:1.93,Sn:2.17,Sb:2.06,Te:2.06,I:1.98,Xe:2.16,Cs:3.43,Ba:2.68,Pt:1.75,Au:1.66,Hg:1.55,Tl:1.96,Pb:2.02,Bi:2.07,Po:1.97,At:2.02,Rn:2.2,Fr:3.48,Ra:2.83,U:1.86},I.ignoredKeys=new Set(["props","invert","model","frame","byres","expand","within","and","or","not"])}),"./src/GLShape.ts":((r,e,t)=>{t.r(e),t.d(e,{GLShape:()=>A,splitMesh:()=>D});var a=t("./src/WebGL/index.ts"),s=t("./src/WebGL/shapes/index.ts"),o=t("./src/WebGL/math/index.ts"),f=t("./src/colors.ts"),u=t("./src/ProteinSurface4.ts"),h=t("./src/VolumeData.ts"),x=t("./src/GLDraw.ts"),m=t("./src/glcartoon.ts"),w=t("./src/utilities.ts");class A{static finalizeGeo(y){var l=y.updateGeoGroup(0);l.vertices>0&&l.truncateArrayBuffers(!0,!0)}static updateColor(y,l){l=l||f.CC.color(l),y.colorsNeedUpdate=!0;var c,L,R;l.constructor!==Array&&(c=l.r,L=l.g,R=l.b);for(let F in y.geometryGroups){let $=y.geometryGroups[F],b=$.colorArray;for(let k=0,B=$.vertices;k<B;++k){if(l.constructor===Array){let J=l[k];c=J.r,L=J.g,R=J.b}b[k*3]=c,b[k*3+1]=L,b[k*3+2]=R}}}static drawArrow(y,l,c){var L=c.start,R=c.end,F=c.radius,$=c.radiusRatio,b=c.mid,k=c.midpos;if(!(L&&R))return;var B=l.updateGeoGroup(51),J=new o.Vector3(R.x,R.y,R.z).sub(L);if(k){let Bp=J.length();k>0?b=k/Bp:b=(Bp+k)/Bp}J.multiplyScalar(b);var X=new o.Vector3(L.x,L.y,L.z).add(J),ae=J.clone().negate();let He=new o.Vector3(L.x,L.y,L.z);y.intersectionShape.cylinder.push(new s.Cylinder(He,X.clone(),F)),y.intersectionShape.sphere.push(new s.Sphere(He,F));var Pe=[];Pe[0]=J.clone(),Math.abs(Pe[0].x)>1e-4?Pe[0].y+=1:Pe[0].x+=1,Pe[0].cross(J),Pe[0].normalize(),Pe[4]=Pe[0].clone(),Pe[4].crossVectors(Pe[0],J),Pe[4].normalize(),Pe[8]=Pe[0].clone().negate(),Pe[12]=Pe[4].clone().negate(),Pe[2]=Pe[0].clone().add(Pe[4]).normalize(),Pe[6]=Pe[4].clone().add(Pe[8]).normalize(),Pe[10]=Pe[8].clone().add(Pe[12]).normalize(),Pe[14]=Pe[12].clone().add(Pe[0]).normalize(),Pe[1]=Pe[0].clone().add(Pe[2]).normalize(),Pe[3]=Pe[2].clone().add(Pe[4]).normalize(),Pe[5]=Pe[4].clone().add(Pe[6]).normalize(),Pe[7]=Pe[6].clone().add(Pe[8]).normalize(),Pe[9]=Pe[8].clone().add(Pe[10]).normalize(),Pe[11]=Pe[10].clone().add(Pe[12]).normalize(),Pe[13]=Pe[12].clone().add(Pe[14]).normalize(),Pe[15]=Pe[14].clone().add(Pe[0]).normalize();var ue=B.vertices,Oe=B.vertexArray,we=B.faceArray,Ze=B.normalArray,it=B.lineArray,lt,Vt,_e;for(Vt=0,_e=Pe.length;Vt<_e;++Vt){lt=3*(ue+3*Vt);var pr=Pe[Vt].clone().multiplyScalar(F).add(L),_s=Pe[Vt].clone().multiplyScalar(F).add(X),Ei=Pe[Vt].clone().multiplyScalar(F*$).add(X);if(Oe[lt]=pr.x,Oe[lt+1]=pr.y,Oe[lt+2]=pr.z,Oe[lt+3]=_s.x,Oe[lt+4]=_s.y,Oe[lt+5]=_s.z,Oe[lt+6]=Ei.x,Oe[lt+7]=Ei.y,Oe[lt+8]=Ei.z,Vt>0){var Bl=Oe[lt-3],Wl=Oe[lt-2],Ep=Oe[lt-1],Lp=new o.Vector3(Bl,Wl,Ep),Op=new o.Vector3(R.x,R.y,R.z),R0=X.clone(),N0=new o.Vector3(Ei.x,Ei.y,Ei.z);y.intersectionShape.triangle.push(new s.Triangle(N0,Op,Lp)),y.intersectionShape.triangle.push(new s.Triangle(Lp.clone(),R0,N0.clone()))}}B.vertices+=48,lt=B.vertices*3,Oe[lt]=L.x,Oe[lt+1]=L.y,Oe[lt+2]=L.z,Oe[lt+3]=X.x,Oe[lt+4]=X.y,Oe[lt+5]=X.z,Oe[lt+6]=R.x,Oe[lt+7]=R.y,Oe[lt+8]=R.z,B.vertices+=3;var Qp,O0,zp,M0,W0,im,F0,fm,cm,Ap,Io,p0,a0,rm,X0,Nl,Gl,Mp,_0,v0=B.vertices-3,z0=B.vertices-2,sm=B.vertices-1,Uo=v0*3,u0=z0*3,x0=sm*3;for(Vt=0,_e=Pe.length-1;Vt<_e;++Vt){var Xl=ue+3*Vt;lt=Xl*3,O0=B.faceidx,zp=B.lineidx,M0=Xl,Ap=M0*3,W0=Xl+1,Io=W0*3,im=Xl+2,p0=im*3,F0=Xl+4,a0=F0*3,fm=Xl+5,rm=fm*3,cm=Xl+3,X0=cm*3,Nl=Gl=Pe[Vt],Mp=_0=Pe[Vt+1],Ze[Ap]=Nl.x,Ze[Io]=Gl.x,Ze[X0]=_0.x,Ze[Ap+1]=Nl.y,Ze[Io+1]=Gl.y,Ze[X0+1]=_0.y,Ze[Ap+2]=Nl.z,Ze[Io+2]=Gl.z,Ze[X0+2]=_0.z,Ze[Io]=Gl.x,Ze[a0]=Mp.x,Ze[X0]=_0.x,Ze[Io+1]=Gl.y,Ze[a0+1]=Mp.y,Ze[X0+1]=_0.y,Ze[Io+2]=Gl.z,Ze[a0+2]=Mp.z,Ze[X0+2]=_0.z,Ze[p0]=Gl.x,Ze[rm]=Mp.x,Ze[p0+1]=Gl.y,Ze[rm+1]=Mp.y,Ze[p0+2]=Gl.z,Ze[rm+2]=Mp.z,we[O0]=M0,we[O0+1]=W0,we[O0+2]=cm,we[O0+3]=W0,we[O0+4]=F0,we[O0+5]=cm,we[O0+6]=M0,we[O0+7]=cm,we[O0+8]=v0,we[O0+9]=im,we[O0+10]=z0,we[O0+11]=fm,we[O0+12]=im,we[O0+13]=sm,we[O0+14]=fm,it[zp]=M0,it[zp+1]=W0,it[zp+2]=M0,it[zp+3]=cm,it[zp+4]=F0,it[zp+5]=cm,it[zp+6]=M0,it[zp+7]=cm,it[zp+8]=im,it[zp+9]=W0,it[zp+10]=im,it[zp+11]=fm,it[zp+12]=F0,it[zp+13]=fm,it[zp+14]=im,it[zp+15]=sm,it[zp+16]=im,it[zp+17]=fm,it[zp+18]=sm,it[zp+19]=fm,B.faceidx+=15,B.lineidx+=20}Qp=[ue+45,ue+46,ue+1,ue,ue+47,ue+2],O0=B.faceidx,zp=B.lineidx,M0=Qp[0],Ap=M0*3,W0=Qp[1],Io=W0*3,im=Qp[4],p0=im*3,F0=Qp[2],a0=F0*3,fm=Qp[5],rm=fm*3,cm=Qp[3],X0=cm*3,Nl=Gl=Pe[15],Mp=_0=Pe[0],Ze[Ap]=Nl.x,Ze[Io]=Gl.x,Ze[X0]=_0.x,Ze[Ap+1]=Nl.y,Ze[Io+1]=Gl.y,Ze[X0+1]=_0.y,Ze[Ap+2]=Nl.z,Ze[Io+2]=Gl.z,Ze[X0+2]=_0.z,Ze[Io]=Gl.x,Ze[a0]=Mp.x,Ze[X0]=_0.x,Ze[Io+1]=Gl.y,Ze[a0+1]=Mp.y,Ze[X0+1]=_0.y,Ze[Io+2]=Gl.z,Ze[a0+2]=Mp.z,Ze[X0+2]=_0.z,Ze[p0]=Gl.x,Ze[rm]=Mp.x,Ze[p0+1]=Gl.y,Ze[rm+1]=Mp.y,Ze[p0+2]=Gl.z,Ze[rm+2]=Mp.z,J.normalize(),ae.normalize(),Ze[Uo]=ae.x,Ze[u0]=Ze[x0]=J.x,Ze[Uo+1]=ae.y,Ze[u0+1]=Ze[x0+1]=J.y,Ze[Uo+2]=ae.z,Ze[u0+2]=Ze[x0+2]=J.z,we[O0]=M0,we[O0+1]=W0,we[O0+2]=cm,we[O0+3]=W0,we[O0+4]=F0,we[O0+5]=cm,we[O0+6]=M0,we[O0+7]=cm,we[O0+8]=v0,we[O0+9]=im,we[O0+10]=z0,we[O0+11]=fm,we[O0+12]=im,we[O0+13]=sm,we[O0+14]=fm,it[zp]=M0,it[zp+1]=W0,it[zp+2]=M0,it[zp+3]=cm,it[zp+4]=F0,it[zp+5]=cm,it[zp+6]=M0,it[zp+7]=cm,it[zp+8]=im,it[zp+9]=W0,it[zp+10]=im,it[zp+11]=fm,it[zp+12]=F0,it[zp+13]=fm,it[zp+14]=im,it[zp+15]=sm,it[zp+16]=im,it[zp+17]=fm,it[zp+18]=sm,it[zp+19]=fm,B.faceidx+=15,B.lineidx+=20}static updateBoundingFromPoints(y,l,c,L){y.center.set(0,0,0);let R=1/0,F=1/0,$=1/0,b=-1/0,k=-1/0,B=-1/0;y.box&&(R=y.box.min.x,b=y.box.max.x,F=y.box.min.y,k=y.box.max.y,$=y.box.min.z,B=y.box.max.z);for(let He=0,Pe=L;He<Pe;He++){var J=c[He*3],X=c[He*3+1],ae=c[He*3+2];J<R&&(R=J),X<F&&(F=X),ae<$&&($=ae),J>b&&(b=J),X>k&&(k=X),ae>B&&(B=ae)}y.center.set((b+R)/2,(k+F)/2,(B+$)/2),y.radius=y.center.distanceTo({x:b,y:k,z:B}),y.box={min:{x:R,y:F,z:$},max:{x:b,y:k,z:B}}}static addCustomGeo(y,l,c,L,R){var F=l.addGeoGroup(),$=c.vertexArr,b=c.normalArr,k=c.faceArr;F.vertices=$.length,F.faceidx=k.length;var B,J,X,ae,He,Pe,ue,Oe,we,Ze=F.vertexArray,it=F.colorArray;for(L.constructor!==Array&&(Oe=L.r,we=L.g,ae=L.b),Pe=0,ue=F.vertices;Pe<ue;++Pe)B=Pe*3,J=$[Pe],Ze[B]=J.x,Ze[B+1]=J.y,Ze[B+2]=J.z,L.constructor===Array&&(He=L[Pe],Oe=He.r,we=He.g,ae=He.b),it[B]=Oe,it[B+1]=we,it[B+2]=ae;if(R)for(Pe=0,ue=F.faceidx/3;Pe<ue;++Pe){B=Pe*3,X=k[B],ae=k[B+1],He=k[B+2];var lt=new o.Vector3,Vt=new o.Vector3,_e=new o.Vector3;y.intersectionShape.triangle.push(new s.Triangle(lt.copy($[X]),Vt.copy($[ae]),_e.copy($[He])))}if(R){var pr=new o.Vector3(0,0,0),_s=0;for(let Wl=0;Wl<l.geometryGroups.length;Wl++)pr.add(l.geometryGroups[Wl].getCentroid()),_s++;pr.divideScalar(_s),A.updateBoundingFromPoints(y.boundingSphere,{centroid:pr},Ze,F.vertices)}if(F.faceArray=new Uint16Array(k),F.truncateArrayBuffers(!0,!0),b.length<F.vertices)F.setNormals();else{var Ei=F.normalArray=new Float32Array(F.vertices*3),Bl;for(Pe=0,ue=F.vertices;Pe<ue;++Pe)B=Pe*3,Bl=b[Pe],Ei[B]=Bl.x,Ei[B+1]=Bl.y,Ei[B+2]=Bl.z}F.setLineIndices(),F.lineidx=F.lineArray.length}static updateFromStyle(y,l){typeof l.color<"u"?(y.color=l.color||new f.Color,l.color instanceof f.Color||(y.color=f.CC.color(l.color))):y.color=f.CC.color(0),y.wireframe=!!l.wireframe,y.opacity=l.alpha?(0,o.clamp)(l.alpha,0,1):1,typeof l.opacity<"u"&&(y.opacity=(0,o.clamp)(l.opacity,0,1)),y.side=l.side!==void 0?l.side:a.DoubleSide,y.linewidth=typeof l.linewidth>"u"?1:l.linewidth,y.clickable=!!l.clickable,y.callback=(0,w.makeFunction)(l.callback),y.hoverable=!!l.hoverable,y.hover_callback=(0,w.makeFunction)(l.hover_callback),y.unhover_callback=(0,w.makeFunction)(l.unhover_callback),y.contextMenuEnabled=!!l.contextMenuEnabled,y.hidden=l.hidden,y.frame=l.frame}constructor(y){this.color=16777215,this.hidden=!1,this.wireframe=!1,this.opacity=1,this.linewidth=1,this.clickable=!1,this.hoverable=!1,this.contextMenuEnabled=!1,this.side=a.DoubleSide,this.stylespec=y||{},this.boundingSphere=new s.Sphere,this.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},A.updateFromStyle(this,this.stylespec),this.components=[],this.shapeObj=null,this.renderedShapeObj=null,this.geo=new a.Geometry(!0),this.linegeo=new a.Geometry(!0)}updateStyle(y){for(var l in y)this.stylespec[l]=y[l];if(A.updateFromStyle(this,this.stylespec),y.voldata&&y.volscheme){(0,w.adjustVolumeStyle)(y);const c=y.volscheme,L=y.voldata,R=f.CC,F=c.range()||[-1,1];this.geo.setColors(function($,b,k){let B=L.getVal($,b,k);return R.color(c.valueToHex(B,F))}),delete this.color}}addCustom(y){y.vertexArr=y.vertexArr||[],y.faceArr=y.faceArr||[],y.normalArr=y.normalArr||[],A.drawCustom(this,this.geo,y)}addSphere(y){y.center||(y.center=new o.Vector3(0,0,0)),y.radius=y.radius?(0,o.clamp)(y.radius,0,1/0):1.5,y.color=f.CC.color(y.color),this.intersectionShape.sphere.push(new s.Sphere(y.center,y.radius)),x.GLDraw.drawSphere(this.geo,y.center,y.radius,y.color,y.quality),this.components.push({centroid:new o.Vector3(y.center.x,y.center.y,y.center.z)});var l=this.geo.updateGeoGroup(0);A.updateBoundingFromPoints(this.boundingSphere,this.components,l.vertexArray,l.vertices)}addBox(y){var l=y.dimensions||{w:1,h:1,d:1},c;typeof l.w=="number"?c={x:l.w,y:0,z:0}:c=l.w;var L;typeof l.h=="number"?L={x:0,y:l.h,z:0}:L=l.h;var R;typeof l.d=="number"?R={x:0,y:0,z:l.d}:R=l.d;var F=y.corner;F==null&&(y.center!==void 0?F={x:y.center.x-.5*(c.x+L.x+R.x),y:y.center.y-.5*(c.y+L.y+R.y),z:y.center.z-.5*(c.z+L.z+R.z)}:F={x:0,y:0,z:0});var $=[{x:F.x,y:F.y,z:F.z},{x:F.x+c.x,y:F.y+c.y,z:F.z+c.z},{x:F.x+L.x,y:F.y+L.y,z:F.z+L.z},{x:F.x+c.x+L.x,y:F.y+c.y+L.y,z:F.z+c.z+L.z},{x:F.x+R.x,y:F.y+R.y,z:F.z+R.z},{x:F.x+c.x+R.x,y:F.y+c.y+R.y,z:F.z+c.z+R.z},{x:F.x+L.x+R.x,y:F.y+L.y+R.y,z:F.z+L.z+R.z},{x:F.x+c.x+L.x+R.x,y:F.y+c.y+L.y+R.y,z:F.z+c.z+L.z+R.z}],b=[],k=[];b.splice(b.length,0,$[0],$[1],$[2],$[3]),k.splice(k.length,0,0,2,1,1,2,3);var B=4;b.splice(b.length,0,$[2],$[3],$[6],$[7]),k.splice(k.length,0,B+0,B+2,B+1,B+1,B+2,B+3),B+=4,b.splice(b.length,0,$[4],$[5],$[0],$[1]),k.splice(k.length,0,B+0,B+2,B+1,B+1,B+2,B+3),B+=4,b.splice(b.length,0,$[6],$[7],$[4],$[5]),k.splice(k.length,0,B+0,B+2,B+1,B+1,B+2,B+3),B+=4,b.splice(b.length,0,$[3],$[1],$[7],$[5]),k.splice(k.length,0,B+0,B+2,B+1,B+1,B+2,B+3),B+=4,b.splice(b.length,0,$[2],$[6],$[0],$[4]),k.splice(k.length,0,B+0,B+2,B+1,B+1,B+2,B+3),B+=4;var J=(0,w.extend)({},y);J.vertexArr=b,J.faceArr=k,J.normalArr=[],A.drawCustom(this,this.geo,J);var X=new o.Vector3;this.components.push({centroid:X.addVectors($[0],$[7]).multiplyScalar(.5)});var ae=this.geo.updateGeoGroup(0);A.updateBoundingFromPoints(this.boundingSphere,this.components,ae.vertexArray,ae.vertices)}addCylinder(y){var l,c;y.start?l=new o.Vector3(y.start.x||0,y.start.y||0,y.start.z||0):l=new o.Vector3(0,0,0),y.end?(c=new o.Vector3(y.end.x,y.end.y||0,y.end.z||0),typeof c.x>"u"&&(c.x=3)):c=new o.Vector3(0,0,0);var L=y.radius||.1,R=f.CC.color(y.color);this.intersectionShape.cylinder.push(new s.Cylinder(l,c,L)),x.GLDraw.drawCylinder(this.geo,l,c,L,R,y.fromCap,y.toCap);var F=new o.Vector3;this.components.push({centroid:F.addVectors(l,c).multiplyScalar(.5)});var $=this.geo.updateGeoGroup(0);A.updateBoundingFromPoints(this.boundingSphere,this.components,$.vertexArray,$.vertices)}addDashedCylinder(y){y.dashLength=y.dashLength||.25,y.gapLength=y.gapLength||.25;var l;y.start?l=new o.Vector3(y.start.x||0,y.start.y||0,y.start.z||0):l=new o.Vector3(0,0,0);var c;y.end?(c=new o.Vector3(y.end.x,y.end.y||0,y.end.z||0),typeof c.x>"u"&&(c.x=3)):c=new o.Vector3(3,0,0);for(var L=y.radius||.1,R=f.CC.color(y.color),F=Math.sqrt(Math.pow(l.x-c.x,2)+Math.pow(l.y-c.y,2)+Math.pow(l.z-c.z,2)),$=F/(y.gapLength+y.dashLength),b=new o.Vector3(y.start.x||0,y.start.y||0,y.start.z||0),k=new o.Vector3(y.end.x,y.end.y||0,y.end.z||0),B=new o.Vector3((c.x-l.x)/(F/y.gapLength),(c.y-l.y)/(F/y.gapLength),(c.z-l.z)/(F/y.gapLength)),J=new o.Vector3((c.x-l.x)/(F/y.dashLength),(c.y-l.y)/(F/y.dashLength),(c.z-l.z)/(F/y.dashLength)),X=0;X<$;X++)k=new o.Vector3(b.x+J.x,b.y+J.y,b.z+J.z),this.intersectionShape.cylinder.push(new s.Cylinder(b,k,L)),x.GLDraw.drawCylinder(this.geo,b,k,L,R,y.fromCap,y.toCap),b=new o.Vector3(k.x+B.x,k.y+B.y,k.z+B.z);var ae=new o.Vector3;this.components.push({centroid:ae.addVectors(l,c).multiplyScalar(.5)});var He=this.geo.updateGeoGroup(0);A.updateBoundingFromPoints(this.boundingSphere,this.components,He.vertexArray,He.vertices)}addCurve(y){y.points=y.points||[],y.smooth=y.smooth||10,typeof y.fromCap>"u"&&(y.fromCap=2),typeof y.toCap>"u"&&(y.toCap=2);var l=(0,m.subdivide_spline)(y.points,y.smooth);if(l.length<3){console.log("Too few points in addCurve");return}var c=y.radius||.1,L=f.CC.color(y.color),R=0,F=l.length-1,$=l[0].distanceTo(l[1]),b=Math.ceil(2*c/$);if(y.toArrow){F-=b;let X={start:l[F],end:l[l.length-1],radius:c,color:L,mid:1e-4};this.addArrow(X)}if(y.fromArrow){R+=b;let X={start:l[R],end:l[0],radius:c,color:L,mid:1e-4};this.addArrow(X)}for(var k=Math.ceil(l.length/2),B={radius:c,color:L,fromCap:2,toCap:2},J=R;J<F;J++)B.start=l[J],B.end=l[J+1],B.fromCap=2,B.toCap=2,J<k?(B.fromCap=2,B.toCap=0):J>k?(B.fromCap=0,B.toCap=2):(B.fromCap=2,B.toCap=2),this.addCylinder(B)}addLine(y){var l,c;y.start?l=new o.Vector3(y.start.x||0,y.start.y||0,y.start.z||0):l=new o.Vector3(0,0,0),y.end?(c=new o.Vector3(y.end.x,y.end.y||0,y.end.z||0),typeof c.x>"u"&&(c.x=3)):c=new o.Vector3(3,0,0);var L=this.geo.updateGeoGroup(2),R=L.vertices,F=R*3,$=L.vertexArray;$[F]=l.x,$[F+1]=l.y,$[F+2]=l.z,$[F+3]=c.x,$[F+4]=c.y,$[F+5]=c.z,L.vertices+=2;var b=L.lineArray,k=L.lineidx;b[k]=R,b[k+1]=R+1,L.lineidx+=2;var B=new o.Vector3;this.components.push({centroid:B.addVectors(l,c).multiplyScalar(.5)}),L=this.geo.updateGeoGroup(0),A.updateBoundingFromPoints(this.boundingSphere,this.components,L.vertexArray,L.vertices)}addArrow(y){if(y.start?y.start=new o.Vector3(y.start.x||0,y.start.y||0,y.start.z||0):y.start=new o.Vector3(0,0,0),y.dir instanceof o.Vector3&&typeof y.length=="number"){var l=y.dir.clone().multiplyScalar(y.length).add(y.start);y.end=l}else y.end?(y.end=new o.Vector3(y.end.x,y.end.y||0,y.end.z||0),typeof y.end.x>"u"&&(y.end.x=3)):y.end=new o.Vector3(3,0,0);y.radius=y.radius||.1,y.radiusRatio=y.radiusRatio||1.618034,y.mid=0<y.mid&&y.mid<1?y.mid:.618034,A.drawArrow(this,this.geo,y);var c=new o.Vector3;this.components.push({centroid:c.addVectors(y.start,y.end).multiplyScalar(.5)});var L=this.geo.updateGeoGroup(0);A.updateBoundingFromPoints(this.boundingSphere,this.components,L.vertexArray,L.vertices)}static distance_from(y,l){return Math.sqrt(Math.pow(y.x-l.x,2)+Math.pow(y.y-l.y,2)+Math.pow(y.z-l.z,2))}static inSelectedRegion(y,l,c){for(var L=0;L<l.length;L++)if(A.distance_from(l[L],y)<=c)return!0;return!1}addIsosurface(y,l,c,L){var R=l.isoval!==void 0&&typeof l.isoval=="number"?l.isoval:0,F=!!l.voxel,$=l.smoothness===void 0?1:l.smoothness,b=y.size.x,k=y.size.y,B=y.size.z,J=new Int16Array(b*k*B),X=y.data,ae,He;for(ae=0,He=J.length;ae<He;++ae)J[ae]=-1;var Pe=new Uint8Array(b*k*B);for(ae=0,He=X.length;ae<He;++ae){var ue=R>=0?X[ae]-R:R-X[ae];ue>0&&(Pe[ae]|=A.ISDONE)}var Oe=[],we=[];u.MarchingCube.march(Pe,Oe,we,{fulltable:!0,voxel:F,unitCube:y.unit,origin:y.origin,matrix:y.matrix,nX:b,nY:k,nZ:B}),!F&&$>0&&u.MarchingCube.laplacianSmooth($,Oe,we);var Ze=[],it=[],lt=[];if(l.selectedRegion&&l.coords===void 0&&(l.coords=l.selectedRegion),l.coords===void 0&&l.selection!==void 0&&(L?l.coords=L.selectedAtoms(l.selection):console.log("addIsosurface needs viewer is selection provided.")),l.coords!==void 0){var Vt=l.coords[0].x,_e=l.coords[0].y,pr=l.coords[0].z,_s=l.coords[0].x,Ei=l.coords[0].y,Bl=l.coords[0].z;for(let zp=0;zp<l.coords.length;zp++)l.coords[zp].x>Vt?Vt=l.coords[zp].x:l.coords[zp].x<_s&&(_s=l.coords[zp].x),l.coords[zp].y>_e?_e=l.coords[zp].y:l.coords[zp].y<Ei&&(Ei=l.coords[zp].y),l.coords[zp].z>pr?pr=l.coords[zp].z:l.coords[zp].z<Bl&&(Bl=l.coords[zp].z);var Wl=2;l.radius!==void 0&&(Wl=l.radius),l.selectedOffset!==void 0&&(Wl=l.selectedOffset),l.seldist!==void 0&&(Wl=l.seldist),_s-=Wl,Vt+=Wl,Ei-=Wl,_e+=Wl,Bl-=Wl,pr+=Wl;for(let zp=0;zp<Oe.length;zp++)Oe[zp].x>_s&&Oe[zp].x<Vt&&Oe[zp].y>Ei&&Oe[zp].y<_e&&Oe[zp].z>Bl&&Oe[zp].z<pr&&A.inSelectedRegion(Oe[zp],l.coords,Wl)?(Ze.push(it.length),it.push(Oe[zp])):Ze.push(-1);for(let zp=0;zp+2<we.length;zp+=3)Ze[we[zp]]!==-1&&Ze[we[zp+1]]!==-1&&Ze[we[zp+2]]!==-1&&(lt.push(we[zp]-(we[zp]-Ze[we[zp]])),lt.push(we[zp+1]-(we[zp+1]-Ze[we[zp+1]])),lt.push(we[zp+2]-(we[zp+2]-Ze[we[zp+2]])));Oe=it,we=lt}A.drawCustom(this,this.geo,{vertexArr:Oe,faceArr:we,normalArr:[],clickable:l.clickable,hoverable:l.hoverable}),this.updateStyle(l);var Ep=new o.Vector3(y.origin.x,y.origin.y,y.origin.z),Lp=new o.Vector3(y.size.x*y.unit.x,y.size.y*y.unit.y,y.size.z*y.unit.z),Op=new o.Vector3(0,0,0),R0=Ep.clone(),N0=Ep.clone().add(Lp);for(let zp=0;zp<Oe.length;zp++)Op.add(Oe[zp]),R0.max(Oe[zp]),N0.min(Oe[zp]);Op.divideScalar(Oe.length);var Qp=Op.distanceTo(N0),O0=Op.distanceTo(R0);this.boundingSphere.center=Op,this.boundingSphere.radius=Math.max(Qp,O0),typeof c=="function"&&c()}addVolumetricData(y,l,c){y=new h.VolumeData(y,l),this.addIsosurface(y,c)}finalize(){return A.finalizeGeo(this.geo),this.geo.initTypedArrays(),this.geo}globj(y){if(this.renderedShapeObj&&(y.remove(this.renderedShapeObj),this.renderedShapeObj=null),!this.hidden){A.finalizeGeo(this.geo),this.geo.initTypedArrays(),this.wireframe&&this.geo.setUpWireframe(),typeof this.color<"u"&&A.updateColor(this.geo,this.color),this.shapeObj=new a.Object3D;var l=null;this.side==a.DoubleSide?l=new a.MeshDoubleLambertMaterial({wireframe:this.wireframe,side:this.side,transparent:this.opacity<1,opacity:this.opacity,wireframeLinewidth:this.linewidth,vertexColors:a.Coloring.VertexColors}):l=new a.MeshLambertMaterial({wireframe:this.wireframe,side:this.side,transparent:this.opacity<1,opacity:this.opacity,wireframeLinewidth:this.linewidth,vertexColors:a.Coloring.VertexColors});var c=new a.Mesh(this.geo,l);if(this.shapeObj.add(c),this.linegeo&&this.linegeo.vertices>0){var L=new a.LineBasicMaterial({linewidth:this.linewidth,color:this.color}),R=new a.Line(this.linegeo,L,a.LineStyle.LinePieces);this.shapeObj.add(R)}this.renderedShapeObj=this.shapeObj.clone(),y.add(this.renderedShapeObj)}}removegl(y){this.renderedShapeObj&&(this.renderedShapeObj.geometry!==void 0&&this.renderedShapeObj.geometry.dispose(),this.renderedShapeObj.material!==void 0&&this.renderedShapeObj.material.dispose(),y.remove(this.renderedShapeObj),this.renderedShapeObj=null),this.shapeObj=null}get position(){return this.boundingSphere.center}get x(){return this.boundingSphere.center.x}get y(){return this.boundingSphere.center.y}get z(){return this.boundingSphere.center.z}}A.ISDONE=2,A.drawCustom=function(I,y,l){var c=l,L=c.vertexArr,R=c.faceArr;(L.length===0||R.length===0)&&console.warn("Error adding custom shape component: No vertices and/or face indices supplied!");var F=l.color;typeof F>"u"&&(F=I.color),F=f.CC.color(F);for(var $=D(c),b=0,k=$.length;b<k;b++)A.addCustomGeo(I,y,$[b],$[b].colorArr?$[b].colorArr:F,l.clickable)};function D(I){var y=64e3;if(I.vertexArr.length<y)return[I];var l=[{vertexArr:[],normalArr:[],faceArr:[]}];I.colorArr&&(l.colorArr=[]);var c=[],L=[],R=0,F=I.faceArr;for(let b=0,k=F.length;b<k;b+=3){let B=l[R];for(let J=0;J<3;J++){var $=F[b+J];c[$]!==R&&(c[$]=R,L[$]=B.vertexArr.length,B.vertexArr.push(I.vertexArr[$]),I.normalArr&&I.normalArr[$]&&B.normalArr.push(I.normalArr[$]),I.colorArr&&I.colorArr[$]&&B.colorArr.push(I.colorArr[$])),B.faceArr.push(L[$])}B.vertexArr.length>=y&&(l.push({vertexArr:[],normalArr:[],faceArr:[]}),I.colorArr&&(l.colorArr=[]),R++)}return l}}),"./src/GLViewer.ts":((r,e,t)=>{t.r(e),t.d(e,{CONTEXTS_PER_VIEWPORT:()=>y,GLViewer:()=>c,createStereoViewer:()=>F,createViewer:()=>L,createViewerGrid:()=>R});var a=t("./node_modules/upng-js/UPNG.js"),s=t("./src/GLModel.ts"),o=t("./src/GLShape.ts"),f=t("./src/Gradient.ts"),u=t("./src/Label.ts"),h=t("./src/ProteinSurface4.ts"),x=t("./src/VolumeData.ts"),m=t("./src/VolumetricRender.ts"),w=t("./src/WebGL/index.ts"),A=t("./src/WebGL/math/index.ts"),D=t("./src/colors.ts"),I=t("./src/utilities.ts");const y=16;class l extends Array{constructor(b){super(...b)}getSymmetries(){if(this.length==0)return[];let b=this[0];return typeof b.symmetries>"u"&&this.setSymmetries([new A.Matrix4]),b.symmetries}setSymmetries(b){typeof b>"u"&&(b=[new A.Matrix4]);for(let k of this)k.symmetries=b,k.finished=!1}}class c{getWidth(){let b=this.container,k=b.offsetWidth;if(k==0&&b.style.display==="none"){let B=b.style.position,J=b.style.visibility;b.style.display="block",b.style.visibility="hidden",b.style.position="absolute",k=b.offsetWidth,b.style.display="none",b.style.visibility=J,b.style.position=B}return k}getHeight(){let b=this.container,k=b.offsetHeight;if(k==0&&b.style.display==="none"){let B=b.style.position,J=b.style.visibility;b.style.display="block",b.style.visibility="hidden",b.style.position="absolute",k=b.offsetHeight,b.style.display="none",b.style.visibility=J,b.style.position=B}return k}setupRenderer(){let b=Object.assign(Object.assign({},this.config),{preserveDrawingBuffer:!0,premultipliedAlpha:!1,containerWidth:this.WIDTH,containerHeight:this.HEIGHT});this.renderer=new w.Renderer(b),this.renderer.domElement.style.width="100%",this.renderer.domElement.style.height="100%",this.renderer.domElement.style.padding="0",this.renderer.domElement.style.position="absolute",this.renderer.domElement.style.top="0px",this.renderer.domElement.style.left="0px",this.renderer.domElement.style.zIndex="0"}initializeScene(){this.scene=new w.Scene,this.scene.fog=new w.Fog(this.bgColor,100,200),this.modelGroup=new w.Object3D,this.rotationGroup=new w.Object3D,this.rotationGroup.useQuaternion=!0,this.rotationGroup.quaternion=new A.Quaternion(0,0,0,1),this.rotationGroup.add(this.modelGroup),this.scene.add(this.rotationGroup);var b=new w.Light(16777215);b.position=new A.Vector3(.2,.2,1).normalize(),b.intensity=1,this.scene.add(b)}_handleLostContext(b){const k=function(B){const J=B.getBoundingClientRect();return!(J.right<0||J.bottom<0||J.top>(window.innerHeight||document.documentElement.clientHeight)||J.left>(window.innerWidth||document.documentElement.clientWidth))};if(k(this.container)){let B=0;for(let J of document.getElementsByTagName("canvas"))if(k(J)&&J._3dmol_viewer!=null&&(J._3dmol_viewer.resize(),B+=1,B>=y))break}}initContainer(b){this.container=b,this.WIDTH=this.getWidth(),this.HEIGHT=this.getHeight(),this.ASPECT=this.renderer.getAspect(this.WIDTH,this.HEIGHT),this.renderer.setSize(this.WIDTH,this.HEIGHT),this.container.append(this.renderer.domElement),this.glDOM=this.renderer.domElement,this.glDOM._3dmol_viewer=this,this.glDOM.addEventListener("webglcontextlost",this._handleLostContext.bind(this)),this.nomouse||(this.glDOM.addEventListener("mousedown",this._handleMouseDown.bind(this),{passive:!1}),this.glDOM.addEventListener("touchstart",this._handleMouseDown.bind(this),{passive:!1}),this.glDOM.addEventListener("wheel",this._handleMouseScroll.bind(this),{passive:!1}),this.glDOM.addEventListener("mousemove",this._handleMouseMove.bind(this),{passive:!1}),this.glDOM.addEventListener("touchmove",this._handleMouseMove.bind(this),{passive:!1}),this.glDOM.addEventListener("contextmenu",this._handleContextMenu.bind(this),{passive:!1}))}decAnim(){this.animated--,this.animated<0&&(this.animated=0)}incAnim(){this.animated++}nextSurfID(){var b=0;for(let B in this.surfaces)if(this.surfaces.hasOwnProperty(B)){var k=parseInt(B);isNaN(k)||k>b&&(b=k)}return b+1}setSlabAndFog(){let b=this.camera.position.z-this.rotationGroup.position.z;b<1&&(b=1),this.camera.near=b+this.slabNear,!this.camera.ortho&&this.camera.near<1&&(this.camera.near=1),this.camera.far=b+this.slabFar,this.camera.near+1>this.camera.far&&(this.camera.far=this.camera.near+1),this.camera.fov=this.fov,this.camera.right=b*Math.tan(Math.PI/180*this.fov),this.camera.left=-this.camera.right,this.camera.top=this.camera.right/this.ASPECT,this.camera.bottom=-this.camera.top,this.camera.updateProjectionMatrix(),this.scene.fog.near=this.camera.near+this.fogStart*(this.camera.far-this.camera.near),this.scene.fog.far=this.camera.near+this.fogEnd*(this.camera.far-this.camera.near),this.config.disableFog&&(this.scene.fog.near=this.scene.fog.far)}show(b){if(this.renderer.setViewport(),!!this.scene&&(this.setSlabAndFog(),this.renderer.render(this.scene,this.camera),this.viewChangeCallback&&this.viewChangeCallback(this._viewer.getView()),!b&&this.linkedViewers.length>0))for(var k=this._viewer.getView(),B=0;B<this.linkedViewers.length;B++){var J=this.linkedViewers[B];J.setView(k,!0)}}updateClickables(){this.clickables.splice(0,this.clickables.length),this.hoverables.splice(0,this.hoverables.length),this.contextMenuEnabledObjects.splice(0,this.contextMenuEnabledObjects.length);for(let b=0,k=this.models.length;b<k;b++){let B=this.models[b];if(B){let J=B.selectedAtoms({clickable:!0}),X=B.selectedAtoms({hoverable:!0}),ae=B.selectedAtoms({contextMenuEnabled:!0});for(let He=0;He<X.length;He++)this.hoverables.push(X[He]);for(let He=0;He<J.length;He++)this.clickables.push(J[He]);for(let He=0;He<ae.length;He++)this.contextMenuEnabledObjects.push(ae[He])}}for(let b=0,k=this.shapes.length;b<k;b++){let B=this.shapes[b];B&&B.clickable&&this.clickables.push(B),B&&B.hoverable&&this.hoverables.push(B),B&&B.contextMenuEnabled&&this.contextMenuEnabledObjects.push(B)}}handleClickSelection(b,k,B){let J=this.targetedObjects(b,k,this.clickables);if(J.length){var X=J[0].clickable;X.callback!==void 0&&(typeof X.callback!="function"&&(X.callback=(0,I.makeFunction)(X.callback)),typeof X.callback=="function"&&(this.mouseButton===3&&this.contextMenuEnabledObjects.includes(X)&&this.userContextMenuHandler||X.callback(X,this._viewer,B,this.container,J)))}}canvasOffset(){let b=this.glDOM,k=b.getBoundingClientRect(),B=b.ownerDocument,J=B.documentElement,X=B.defaultView;return{top:k.top+X.pageYOffset-J.clientTop,left:k.left+X.pageXOffset-J.clientLeft}}setHover(b,k,B){this.current_hover!=b&&(this.current_hover&&(typeof this.current_hover.unhover_callback!="function"&&(this.current_hover.unhover_callback=(0,I.makeFunction)(this.current_hover.unhover_callback)),this.current_hover.unhover_callback(this.current_hover,this._viewer,k,this.container,B)),this.current_hover=b,b&&b.hover_callback!==void 0&&(typeof b.hover_callback!="function"&&(b.hover_callback=(0,I.makeFunction)(b.hover_callback)),typeof b.hover_callback=="function"&&b.hover_callback(b,this._viewer,k,this.container,B)))}handleHoverSelection(b,k,B){if(this.hoverables.length==0)return;let J=this.targetedObjects(b,k,this.hoverables);if(J.length){var X=J[0].clickable;this.setHover(X,B,J),this.current_hover=X}else this.setHover(null)}handleHoverContinue(b,k){let B=this.targetedObjects(b,k,this.hoverables);(B.length==0||B[0]===void 0)&&this.setHover(null),B[0]!==void 0&&B[0].clickable!==this.current_hover&&this.setHover(null)}closeEnoughForClick(b,{allowTolerance:k=b.targetTouches,tolerance:B=5}={}){const J=this.getX(b),X=this.getY(b);if(k){const ae=Math.abs(J-this.mouseStartX),He=Math.abs(X-this.mouseStartY);return ae<=B&&He<=B}else return J===this.mouseStartX&&X===this.mouseStartY}calcTouchDistance(b){var k=b.targetTouches[0].pageX-b.targetTouches[1].pageX,B=b.targetTouches[0].pageY-b.targetTouches[1].pageY;return Math.hypot(k,B)}getX(b){var k=b.pageX;return k==null&&(k=b.pageX),b.targetTouches&&b.targetTouches[0]?k=b.targetTouches[0].pageX:b.changedTouches&&b.changedTouches[0]&&(k=b.changedTouches[0].pageX),k}getY(b){var k=b.pageY;return k==null&&(k=b.pageY),b.targetTouches&&b.targetTouches[0]?k=b.targetTouches[0].pageY:b.changedTouches&&b.changedTouches[0]&&(k=b.changedTouches[0].pageY),k}isInViewer(b,k){if(this.viewers!=null){var B=this.WIDTH/this.cols,J=this.HEIGHT/this.rows,X=this.canvasOffset(),ae=b-X.left,He=k-X.top,Pe=this.rows-Math.floor(He/J)-1,ue=Math.floor(ae/B);if(Pe!=this.row||ue!=this.col)return!1}return!0}adjustZoomToLimits(b){if(this.config.lowerZoomLimit&&this.config.lowerZoomLimit>0){let k=this.CAMERA_Z-this.config.lowerZoomLimit;b>k&&(b=k)}if(this.config.upperZoomLimit&&this.config.upperZoomLimit>0){let k=this.CAMERA_Z-this.config.upperZoomLimit;b<k&&(b=k)}return b>this.CAMERA_Z-1&&(b=this.CAMERA_Z-1),b}static slerp(b,k,B){if(B==1)return k.clone();if(B==0)return b.clone();let J=b.x*k.x+b.y*k.y+b.z*k.z+b.w*k.w;if(J>.9995){let we=new A.Quaternion(b.x+B*(k.x-b.x),b.y+B*(k.y-b.y),b.z+B*(k.z-b.z),b.w+B*(k.w-b.w));return we.normalize(),we}J<0&&(k=k.clone().multiplyScalar(-1),J=-J),J>1?J=1:J<-1&&(J=-1);var X=Math.acos(J),ae=X*B,He=k.clone();He.sub(b.clone().multiplyScalar(J)),He.normalize();var Pe=Math.cos(ae),ue=Math.sin(ae),Oe=new A.Quaternion(b.x*Pe+He.x*ue,b.y*Pe+He.y*ue,b.z*Pe+He.z*ue,b.w*Pe+He.w*ue);return Oe.normalize(),Oe}constructor(b,k={}){if(this.nomouse=!1,this.glDOM=null,this.models=[],this.surfaces={},this.shapes=[],this.labels=[],this.clickables=[],this.hoverables=[],this.contextMenuEnabledObjects=[],this.current_hover=null,this.hoverDuration=500,this.longTouchDuration=1e3,this.viewer_frame=0,this.viewChangeCallback=null,this.stateChangeCallback=null,this.NEAR=1,this.FAR=800,this.CAMERA_Z=150,this.fov=20,this.linkedViewers=[],this.renderer=null,this.control_all=!1,this.scene=null,this.rotationGroup=null,this.modelGroup=null,this.fogStart=.4,this.fogEnd=1,this.slabNear=-50,this.slabFar=50,this.cq=new A.Quaternion(0,0,0,1),this.dq=new A.Quaternion(0,0,0,1),this.animated=0,this.animationTimers=new Set,this.isDragging=!1,this.mouseStartX=0,this.mouseStartY=0,this.touchDistanceStart=0,this.touchHold=!1,this.currentModelPos=0,this.cz=0,this.cslabNear=0,this.cslabFar=0,this.userContextMenuHandler=null,this.config=k,this.callback=this.config.callback,this.defaultcolors=this.config.defaultcolors,this.defaultcolors||(this.defaultcolors=D.elementColors.defaultColors),this.nomouse=!!this.config.nomouse,this.bgColor=0,this.config.backgroundColor=this.config.backgroundColor||"#ffffff",typeof this.config.backgroundColor<"u"&&(this.bgColor=D.CC.color(this.config.backgroundColor).getHex()),this.config.backgroundAlpha=this.config.backgroundAlpha==null?1:this.config.backgroundAlpha,this.camerax=0,typeof this.config.camerax<"u"&&(this.camerax=typeof this.config.camerax=="string"?parseFloat(this.config.camerax):this.config.camerax),this._viewer=this,this.container=b,this.config.hoverDuration!=null&&(this.hoverDuration=this.config.hoverDuration),this.config.antialias===void 0&&(this.config.antialias=!0),this.config.cartoonQuality===void 0&&(this.config.cartoonQuality=10),this.WIDTH=this.getWidth(),this.HEIGHT=this.getHeight(),this.setupRenderer(),this.row=this.config.row==null?0:this.config.row,this.col=this.config.col==null?0:this.config.col,this.cols=this.config.cols,this.rows=this.config.rows,this.viewers=this.config.viewers,this.control_all=this.config.control_all,this.ASPECT=this.renderer.getAspect(this.WIDTH,this.HEIGHT),this.camera=new w.Camera(this.fov,this.ASPECT,this.NEAR,this.FAR,this.config.orthographic),this.camera.position=new A.Vector3(this.camerax,0,this.CAMERA_Z),this.lookingAt=new A.Vector3,this.camera.lookAt(this.lookingAt),this.raycaster=new w.Raycaster(new A.Vector3(0,0,0),new A.Vector3(0,0,0)),this.projector=new w.Projector,this.initializeScene(),this.renderer.setClearColorHex(this.bgColor,this.config.backgroundAlpha),this.scene.fog.color=D.CC.color(this.bgColor),document.body.addEventListener("mouseup",this._handleMouseUp.bind(this)),document.body.addEventListener("touchend",this._handleMouseUp.bind(this)),this.initContainer(this.container),this.config.style&&this.setViewStyle(this.config),window.addEventListener("resize",this.resize.bind(this)),typeof window.ResizeObserver<"u"&&(this.divwatcher=new window.ResizeObserver(this.resize.bind(this)),this.divwatcher.observe(this.container)),typeof window.IntersectionObserver<"u"){let B=(J,X)=>{J.forEach(ae=>{ae.isIntersecting&&this.resize()})};this.intwatcher=new window.IntersectionObserver(B),this.intwatcher.observe(this.container)}try{typeof this.callback=="function"&&this.callback(this)}catch(B){console.log("error with glviewer callback: "+B)}}targetedObjects(b,k,B){var J={x:b,y:k,z:-1};return Array.isArray(B)||(B=this.selectedAtoms(B)),B.length==0?[]:(this.raycaster.setFromCamera(J,this.camera),this.raycaster.intersectObjects(this.modelGroup,B))}modelToScreen(b){let k=!1;Array.isArray(b)||(b=[b],k=!0);let B=this.renderer.getXRatio(),J=this.renderer.getYRatio(),X=this.col,ae=this.row,He=X*(this.WIDTH/B),Pe=(J-ae-1)*(this.HEIGHT/J),ue=[],Oe=this.canvasOffset();return b.forEach(we=>{let Ze=new A.Vector3(we.x,we.y,we.z);Ze.applyMatrix4(this.modelGroup.matrixWorld),this.projector.projectVector(Ze,this.camera);let it=this.WIDTH/B*(Ze.x+1)/2+Oe.left+He,lt=-(this.HEIGHT/J)*(Ze.y-1)/2+Oe.top+Pe;ue.push({x:it,y:lt})}),k&&(ue=ue[0]),ue}screenOffsetToModel(b,k,B){var J=b/this.WIDTH,X=k/this.HEIGHT,ae=B===void 0?this.rotationGroup.position.z:B,He=this.rotationGroup.quaternion,Pe=new A.Vector3(0,0,ae);return this.projector.projectVector(Pe,this.camera),Pe.x+=J*2,Pe.y-=X*2,this.projector.unprojectVector(Pe,this.camera),Pe.z=0,Pe.applyQuaternion(He),Pe}screenToModelDistance(b,k){let B=this.canvasOffset(),J=new A.Vector3(k.x,k.y,k.z);J.applyMatrix4(this.modelGroup.matrixWorld);let X=J.clone();this.projector.projectVector(J,this.camera);let ae=new A.Vector3((b.x-B.left)*2/this.WIDTH-1,(b.y-B.top)*2/-this.HEIGHT+1,J.z);return this.projector.unprojectVector(ae,this.camera),ae.distanceTo(X)}setViewChangeCallback(b){(typeof b=="function"||b==null)&&(this.viewChangeCallback=b)}setStateChangeCallback(b){(typeof b=="function"||b==null)&&(this.stateChangeCallback=b)}getConfig(){return this.config}setConfig(b){this.config=b,b.ambientOcclusion&&this.renderer.enableAmbientOcclusion(b.ambientOcclusion)}getInternalState(){var b={models:[],surfaces:[],shapes:[],labels:[]};for(let k=0;k<this.models.length;k++)this.models[k]&&(b.models[k]=this.models[k].getInternalState());return b}setInternalState(b){this.clear();var k=b.models;for(let B=0;B<k.length;B++)k[B]&&(this.models[B]=new s.GLModel(B,void 0,this),this.models[B].setInternalState(k[B]));this.render()}setZoomLimits(b,k){typeof b<"u"&&(this.config.lowerZoomLimit=b),k&&(this.config.upperZoomLimit=k),this.rotationGroup.position.z=this.adjustZoomToLimits(this.rotationGroup.position.z),this.show()}setCameraParameters(b){b.fov!==void 0&&(this.fov=b.fov,this.camera.fov=this.fov),b.z!==void 0&&(this.CAMERA_Z=b.z,this.camera.z=this.CAMERA_Z),b.orthographic!==void 0&&(this.camera.ortho=b.orthographic),this.setSlabAndFog()}_handleMouseDown(b){if(b.preventDefault(),!this.scene)return;var k=this.getX(b),B=this.getY(b);if(k===void 0)return;this.isDragging=!0,this.mouseButton=b.which,this.mouseStartX=k,this.mouseStartY=B,this.touchHold=!0,this.touchDistanceStart=0,b.targetTouches&&b.targetTouches.length==2&&(this.touchDistanceStart=this.calcTouchDistance(b)),this.cq=this.rotationGroup.quaternion.clone(),this.cz=this.rotationGroup.position.z,this.currentModelPos=this.modelGroup.position.clone(),this.cslabNear=this.slabNear,this.cslabFar=this.slabFar;let J=this;b.targetTouches&&b.targetTouches.length===1&&(this.longTouchTimeout=setTimeout(function(){if(J.touchHold==!0){J.glDOM=J.renderer.domElement;const X=b.targetTouches[0],ae=new PointerEvent("contextmenu",Object.assign(Object.assign({},b),{pageX:X.pageX,pageY:X.pageY,screenX:X.screenX,screenY:X.screenY,clientX:X.clientX,clientY:X.clientY}));J.glDOM.dispatchEvent(ae)}},this.longTouchDuration))}_handleMouseUp(b){if(this.touchHold=!1,this.isDragging&&this.scene){var k=this.getX(b),B=this.getY(b);if(this.closeEnoughForClick(b)&&this.isInViewer(k,B)){let J=this.mouseXY(k,B);this.handleClickSelection(J.x,J.y,b)}}this.isDragging=!1}_handleMouseScroll(b){if(b.preventDefault(),!!this.scene){var k=this.getX(b),B=this.getY(b);if(k!==void 0&&!(!this.control_all&&!this.isInViewer(k,B))){var J=(this.CAMERA_Z-this.rotationGroup.position.z)*.85,X=1;if(b.ctrlKey&&(X=-1),b.detail)this.rotationGroup.position.z+=X*J*b.detail/10;else if(b.wheelDelta){let ae=b.wheelDelta*600/(b.wheelDelta+600);this.rotationGroup.position.z-=X*J*ae/400}this.rotationGroup.position.z=this.adjustZoomToLimits(this.rotationGroup.position.z),this.show()}}}pngURI(){return this.getCanvas().toDataURL("image/png")}apngURI(b){let k=this;return b=b||1,new Promise(function(B){let J=0,X=k.viewChangeCallback,ae=[],He=[],Pe=Date.now();k.viewChangeCallback=function(){He.push(Date.now()-Pe),Pe=Date.now(),ae.push(new Promise(ue=>{k.getCanvas().toBlob(function(Oe){Oe.arrayBuffer().then(ue)},"image/png")})),J+=1,J==b&&(k.viewChangeCallback=X,Promise.all(ae).then(ue=>{let Oe=[];for(let _e=0;_e<ue.length;_e++){let pr=(0,a.decode)(ue[_e]);Oe.push((0,a.toRGBA8)(pr)[0])}let we=k.getCanvas().width,Ze=k.getCanvas().height,it=(0,a.encode)(Oe,we,Ze,0,He),lt=new Blob([it],{type:"image/png"}),Vt=new FileReader;Vt.onload=function(_e){B(_e.target.result)},Vt.readAsDataURL(lt)}))}})}getCanvas(){return this.glDOM}getRenderer(){return this.renderer}setHoverDuration(b){this.hoverDuration=b}mouseXY(b,k){let B=this.canvasOffset(),J=this.renderer.getXRatio(),X=this.renderer.getYRatio(),ae=this.col,He=this.row,Pe=ae*(this.WIDTH/J),ue=(X-He-1)*(this.HEIGHT/X),Oe=(b-B.left-Pe)/(this.WIDTH/J)*2-1,we=-((k-B.top-ue)/(this.HEIGHT/X))*2+1;return{x:Oe,y:we}}_handleMouseMove(b){clearTimeout(this.hoverTimeout),b.preventDefault();let k=this.getX(b),B=this.getY(b);if(k===void 0)return;let J=this.renderer.getXRatio(),X=this.renderer.getYRatio(),ae=this.mouseXY(k,B),He=this;this.current_hover!==null&&this.handleHoverContinue(ae.x,ae.y);var Pe=0;if(!(!this.control_all&&!this.isInViewer(k,B))&&this.scene&&(this.hoverables.length>0&&(this.hoverTimeout=setTimeout(function(){He.handleHoverSelection(ae.x,ae.y,b)},this.hoverDuration)),!!this.isDragging)){b.targetTouches&&(b.targetTouches.length>1||b.targetTouches.length===1&&!this.closeEnoughForClick(b))&&clearTimeout(this.longTouchTimeout);var ue=(k-this.mouseStartX)/this.WIDTH,Oe=(B-this.mouseStartY)/this.HEIGHT;if(this.touchDistanceStart!=0&&b.targetTouches&&b.targetTouches.length==2){var we=this.calcTouchDistance(b);Pe=2,Oe=(we-this.touchDistanceStart)*2/(this.WIDTH+this.HEIGHT)}else b.targetTouches&&b.targetTouches.length==3&&(Pe=1);ue*=J,Oe*=X;var Ze=Math.hypot(ue,Oe),it;if(Pe==3||this.mouseButton==3&&b.ctrlKey)this.slabNear=this.cslabNear+ue*100,this.slabFar=this.cslabFar-Oe*100;else if(Pe==2||this.mouseButton==3||b.shiftKey)it=(this.CAMERA_Z-this.rotationGroup.position.z)*.85,it<80&&(it=80),this.rotationGroup.position.z=this.cz+Oe*it,this.rotationGroup.position.z=this.adjustZoomToLimits(this.rotationGroup.position.z);else if(Pe==1||this.mouseButton==2||b.ctrlKey){var lt=this.screenOffsetToModel(J*(k-this.mouseStartX),X*(B-this.mouseStartY));this.modelGroup.position.addVectors(this.currentModelPos,lt)}else if((Pe===0||this.mouseButton==1)&&Ze!==0){var Vt=Math.sin(Ze*Math.PI)/Ze;this.dq.x=Math.cos(Ze*Math.PI),this.dq.y=0,this.dq.z=Vt*ue,this.dq.w=-Vt*Oe,this.rotationGroup.quaternion.set(1,0,0,0),this.rotationGroup.quaternion.multiply(this.dq),this.rotationGroup.quaternion.multiply(this.cq)}this.show()}}_handleContextMenu(b){if(b.preventDefault(),this.closeEnoughForClick(b)){var J=this.mouseStartX,X=this.mouseStartY,B=this.canvasOffset();let ae=this.mouseXY(J,X),He=ae.x,Pe=ae.y,ue=this.targetedObjects(He,Pe,this.contextMenuEnabledObjects);var k=null;ue.length&&(k=ue[0].clickable);var B=this.canvasOffset(),J=this.mouseStartX-B.left,X=this.mouseStartY-B.top;this.userContextMenuHandler&&(this.userContextMenuHandler(k,J,X,ue,b),this.isDragging=!1)}}setContainer(b){let k=(0,I.getElement)(b)||this.container;return this.initContainer(k),this}setBackgroundColor(b,k){(typeof k>"u"||k<0||k>1)&&(k=1);var B=D.CC.color(b);return this.scene.fog.color=B,this.bgColor=B.getHex(),this.renderer.setClearColorHex(B.getHex(),k),this.show(),this}setProjection(b){this.camera.ortho=b==="orthographic",this.setSlabAndFog()}setViewStyle(b){if(b=b||{},b.style=b.style||"",b.style.includes("outline")?this.renderer.enableOutline(b):this.renderer.disableOutline(),b.style.includes("ambientOcclusion")){var k={};b.strength&&(k.strength=b.strength),b.radius&&(k.radius=b.radius),this.renderer.enableAmbientOcclusion(k)}else this.renderer.disableAmbientOcclusion();return this}updateSize(){this.renderer.setSize(this.WIDTH,this.HEIGHT),this.ASPECT=this.renderer.getAspect(this.WIDTH,this.HEIGHT),this.renderer.setSize(this.WIDTH,this.HEIGHT),this.camera.aspect=this.ASPECT,this.camera.updateProjectionMatrix()}setWidth(b){return this.WIDTH=b||this.WIDTH,this.updateSize(),this}setHeight(b){return this.HEIGHT=b||this.HEIGHT,this.updateSize(),this}resize(){this.WIDTH=this.getWidth(),this.HEIGHT=this.getHeight();let b=!1;if(this.renderer.isLost()&&this.WIDTH>0&&this.HEIGHT>0){let k=!1,B=this.container.querySelector("canvas");B&&B!=this.renderer.getCanvas()?this.config.canvas=B:(B.remove(),this.config&&this.config.canvas!=null&&(delete this.config.canvas,k=!0)),this.setupRenderer(),this.initContainer(this.container),this.renderer.setClearColorHex(this.bgColor,this.config.backgroundAlpha),b=!0,k&&(this.config.canvas=this.renderer.getCanvas())}if(this.WIDTH==0||this.HEIGHT==0?this.animated&&this._viewer.pauseAnimate():this.animated&&this._viewer.resumeAnimate(),this.updateSize(),b){let k=this.renderer.supportedExtensions();if(k.regen=!0,this.viewers)for(let B=0,J=this.viewers.length;B<J;B++)for(let X=0,ae=this.viewers[B].length;X<ae;X++)this.viewers[B][X].render(null,k);this._viewer.render(null,k)}else this.WIDTH>0&&this.HEIGHT>0&&this.show();return this}getModel(b){return b===void 0?this.models.length==0?null:this.models[this.models.length-1]:b instanceof s.GLModel?b:b in this.models?this.models[b]:this.models.length==0?null:this.models[this.models.length-1]}spin(b,k=1,B=!1){if(clearInterval(this.spinInterval),typeof b>"u"&&(b="y"),typeof b=="boolean")if(b)b="y";else return;Array.isArray(b)&&(b={x:b[0],y:b[1],z:b[2]});var J=this;this.spinInterval=setInterval(function(){!J.getCanvas().isConnected&&J.renderer.isLost()&&clearInterval(J.spinInterval),(!B||J.container.checkVisibility&&J.container.checkVisibility())&&J.rotate(1*k,b)},25)}animateMotion(b,k,B,J,X,ae){var He=20,Pe=Math.ceil(b/He);Pe<1&&(Pe=1),this.incAnim();var ue={mpos:this.modelGroup.position.clone(),rz:this.rotationGroup.position.z,rot:this.rotationGroup.quaternion.clone(),cam:this.lookingAt.clone()};if(k){let Ze=new Array(Pe);for(let _e=0;_e<Pe;_e++){let pr=(_e+1)/Pe,_s={mpos:ue.mpos,rz:ue.rz,rot:ue.rot};_s.mpos=B.clone().sub(ue.mpos).multiplyScalar(pr).add(ue.mpos),_s.rz=ue.rz+pr*(J-ue.rz),_s.rot=c.slerp(ue.rot,X,pr),_s.cam=ae.clone().sub(ue.cam).multiplyScalar(pr).add(ue.cam),Ze[_e]=_s}let it=0,lt=this,Vt=function(){var _e=Ze[it];it+=1,lt.modelGroup.position=_e.mpos,lt.rotationGroup.position.z=_e.rz,lt.rotationGroup.quaternion=_e.rot,lt.camera.lookAt(_e.cam),it<Ze.length?setTimeout(Vt,He):lt.decAnim(),lt.show()};setTimeout(Vt,He)}else{var Oe={};let Ze=1/Pe;if(B&&(Oe.mpos=B.clone().sub(ue.mpos).multiplyScalar(Ze)),typeof J<"u"&&J!=null&&(Oe.rz=Ze*(J-ue.rz)),X){var we=c.slerp(ue.rot,X,Ze);Oe.rot=ue.rot.clone().inverse().multiply(we)}ae&&(Oe.cam=ae.clone().sub(ue.cam).multiplyScalar(Ze));let it=0,lt=this,Vt=function(){it+=1,Oe.mpos&&lt.modelGroup.position.add(Oe.mpos),Oe.rz&&(lt.rotationGroup.position.z+=Oe.rz),Oe.rot&&lt.rotationGroup.quaternion.multiply(Oe.rot),Oe.cam&&(lt.lookingAt.add(Oe.cam),lt.camera.lookAt(lt.lookingAt)),it<Pe?setTimeout(Vt,He):lt.decAnim(),lt.show()};setTimeout(Vt,He)}}rotate(b,k="y",B=0,J=!1){if(k=="x"?k={x:1,y:0,z:0}:k=="y"?k={x:0,y:1,z:0}:k=="z"&&(k={x:0,y:0,z:1}),k=="vx"?k={vx:1,vy:0,vz:0}:k=="vy"?k={vx:0,vy:1,vz:0}:k=="vz"&&(k={vx:0,vy:0,vz:1}),typeof k.vx<"u"){var X=new A.Vector3(k.vx,k.vy,k.vz);X.applyQuaternion(this.rotationGroup.quaternion),k={x:X.x,y:X.y,z:X.z}}var ae=function(Oe){var we=Math.sin(Oe/2),Ze=Math.cos(Oe/2),it=0,lt=0,Vt=0;return it=k.x*we,lt=k.y*we,Vt=k.z*we,new A.Quaternion(it,lt,Vt,Ze).normalize()},He=Math.PI*b/180,Pe=ae(He);if(B){var ue=new A.Quaternion().copy(this.rotationGroup.quaternion).multiply(Pe);this.animateMotion(B,J,this.modelGroup.position,this.rotationGroup.position.z,ue,this.lookingAt)}else this.rotationGroup.quaternion.multiply(Pe),this.show();return this}surfacesFinished(){for(var b in this.surfaces)if(!this.surfaces[b][0].done)return!1;return!0}getView(){if(!this.modelGroup)return[0,0,0,0,0,0,0,1];var b=this.modelGroup.position,k=this.rotationGroup.quaternion;return[b.x,b.y,b.z,this.rotationGroup.position.z,k.x,k.y,k.z,k.w]}setView(b,k){return b===void 0||!(b instanceof Array||b.length!==8)?this:!this.modelGroup||!this.rotationGroup?this:(this.modelGroup.position.x=b[0],this.modelGroup.position.y=b[1],this.modelGroup.position.z=b[2],this.rotationGroup.position.z=b[3],this.rotationGroup.quaternion.x=b[4],this.rotationGroup.quaternion.y=b[5],this.rotationGroup.quaternion.z=b[6],this.rotationGroup.quaternion.w=b[7],typeof b[8]<"u"&&(this.rotationGroup.position.x=b[8],this.rotationGroup.position.y=b[9]),this.show(k),this)}render(b,k){this.renderer.setViewport(),this.updateClickables();var B=this.getView();this.stateChangeCallback&&this.stateChangeCallback(this.getInternalState());var J,X;for(k||(k=this.renderer.supportedExtensions()),J=0;J<this.models.length;J++)this.models[J]&&this.models[J].globj(this.modelGroup,k);for(J=0;J<this.shapes.length;J++)this.shapes[J]&&(typeof this.shapes[J].frame>"u"||this.viewer_frame<0||this.shapes[J].frame<0||this.shapes[J].frame==this.viewer_frame?this.shapes[J].globj(this.modelGroup,k):this.shapes[J].removegl(this.modelGroup));for(J=0;J<this.labels.length;J++)k.regen&&(this.labels[J].dispose(),this.modelGroup.remove(this.labels[J].sprite),this.labels[J].setContext(),this.modelGroup.add(this.labels[J].sprite)),this.labels[J]&&typeof this.labels[J].frame<"u"&&this.labels[J].frame>=0&&(this.modelGroup.remove(this.labels[J].sprite),(this.viewer_frame<0||this.labels[J].frame==this.viewer_frame)&&this.modelGroup.add(this.labels[J].sprite));for(J in this.surfaces)if(this.surfaces.hasOwnProperty(J)){var ae=this.surfaces[J];for(X=0;X<ae.length;X++)if(ae.hasOwnProperty(X)){var He=ae[X].geo;if(!ae[X].finished||k.regen){He.verticesNeedUpdate=!0,He.elementsNeedUpdate=!0,He.normalsNeedUpdate=!0,He.colorsNeedUpdate=!0,He.buffersNeedUpdate=!0,ae[X].mat.needsUpdate=!0,ae[X].done&&(ae[X].finished=!0),ae[X].lastGL&&this.modelGroup.remove(ae[X].lastGL);var Pe=null;if(ae[X].mat instanceof w.LineBasicMaterial?Pe=new w.Line(He,ae[X].mat):("wireframe"in ae.style&&ae.style.wireframe&&He.setUpWireframe(),Pe=new w.Mesh(He,ae[X].mat)),ae[X].mat.transparent&&ae[X].mat.opacity==0?Pe.visible=!1:Pe.visible=!0,ae[X].symmetries.length>1||ae[X].symmetries.length==1&&!ae[X].symmetries[0].isIdentity()){var ue,Oe=new w.Object3D;for(ue=0;ue<ae[X].symmetries.length;ue++){var we=Pe.clone();we.matrix=ae[X].symmetries[ue],we.matrixAutoUpdate=!1,Oe.add(we)}ae[X].lastGL=Oe,this.modelGroup.add(Oe)}else ae[X].lastGL=Pe,this.modelGroup.add(Pe)}}}return this.setView(B),typeof b=="function"&&b(this),this}getModelList(b){let k=[];if(typeof b>"u"||typeof b.model>"u")for(let J=0;J<this.models.length;J++)this.models[J]&&k.push(this.models[J]);else{let J=b.model;Array.isArray(J)||(J=[J]);for(let X=0;X<J.length;X++)if(typeof J[X]=="number"){var B=J[X];B<0&&(B+=this.models.length),k.push(this.models[B])}else k.push(J[X])}return k}getAtomsFromSel(b){var k=[];typeof b>"u"&&(b={});var B=this.getModelList(b);for(let J=0;J<B.length;J++)k=k.concat(B[J].selectedAtoms(b));return k}atomIsSelected(b,k){typeof k>"u"&&(k={});for(var B=this.getModelList(k),J=0;J<B.length;J++)if(B[J].atomIsSelected(b,k))return!0;return!1}selectedAtoms(b){return this.getAtomsFromSel(b)}getUniqueValues(b,k){typeof k>"u"&&(k={});var B=this.getAtomsFromSel(k),J={};for(var X in B)if(B[X].hasOwnProperty(b)){var ae=B[X][b];J[ae]=!0}return Object.keys(J)}pdbData(b){for(var k=this.getAtomsFromSel(b),B="",J=0,X=k.length;J<X;++J)B+=k[J].pdbline+`
`;return B}zoom(b=2,k=0,B=!1){var J=(this.CAMERA_Z-this.rotationGroup.position.z)/b,X=this.CAMERA_Z-J;return k>0?this.animateMotion(k,B,this.modelGroup.position,this.adjustZoomToLimits(X),this.rotationGroup.quaternion,this.lookingAt):(this.rotationGroup.position.z=this.adjustZoomToLimits(X),this.show()),this}translate(b,k,B=0,J=!1){var X=b/this.WIDTH,ae=k/this.HEIGHT,He=new A.Vector3(0,0,-this.CAMERA_Z);this.projector.projectVector(He,this.camera),He.x-=X,He.y-=ae,this.projector.unprojectVector(He,this.camera),He.z=0;var Pe=this.lookingAt.clone().add(He);return B>0?this.animateMotion(B,J,this.modelGroup.position,this.rotationGroup.position.z,this.rotationGroup.quaternion,Pe):(this.lookingAt=Pe,this.camera.lookAt(this.lookingAt),this.show()),this}translateScene(b,k,B=0,J=!1){var X=this.screenOffsetToModel(b,k),ae=this.modelGroup.position.clone().add(X);return B>0?this.animateMotion(B,J,this.modelGroup.position,this.rotationGroup.position.z,this.rotationGroup.quaternion,this.lookingAt):(this.modelGroup.position=ae,this.show()),this}fitSlab(b){b=b||{};var k=this.getAtomsFromSel(b),B=(0,I.getExtent)(k),J=B[1][0]-B[0][0],X=B[1][1]-B[0][1],ae=B[1][2]-B[0][2],He=Math.hypot(J,X,ae);return He<5&&(He=5),this.slabNear=-He/1.9,this.slabFar=He/2,this}center(b={},k=0,B=!1){var J,X,ae=this.getAtomsFromSel(b),He=(0,I.getExtent)(ae);(0,I.isEmptyObject)(b)?(this.shapes.forEach(pr=>{if(pr&&pr.boundingSphere&&pr.boundingSphere.center){var _s=pr.boundingSphere.center,Ei=pr.boundingSphere.radius;Ei>0?(ae.push(new A.Vector3(_s.x+Ei,_s.y,_s.z)),ae.push(new A.Vector3(_s.x-Ei,_s.y,_s.z)),ae.push(new A.Vector3(_s.x,_s.y+Ei,_s.z)),ae.push(new A.Vector3(_s.x,_s.y-Ei,_s.z)),ae.push(new A.Vector3(_s.x,_s.y,_s.z+Ei)),ae.push(new A.Vector3(_s.x,_s.y,_s.z-Ei))):ae.push(_s)}}),He=(0,I.getExtent)(ae),J=ae,X=He):(J=this.getAtomsFromSel({}),X=(0,I.getExtent)(J));var Pe=new A.Vector3(He[2][0],He[2][1],He[2][2]),ue=X[1][0]-X[0][0],Oe=X[1][1]-X[0][1],we=X[1][2]-X[0][2],Ze=Math.hypot(ue,Oe,we);Ze<5&&(Ze=5),this.slabNear=-Ze/1.9,this.slabFar=Ze/2,ue=He[1][0]-He[0][0],Oe=He[1][1]-He[0][1],we=He[1][2]-He[0][2],Ze=Math.hypot(ue,Oe,we),Ze<5&&(Ze=5);for(var it=25,lt=0;lt<ae.length;lt++)if(ae[lt]){var Vt=Pe.distanceToSquared(ae[lt]);Vt>it&&(it=Vt)}Ze=Math.sqrt(it)*2;var _e=Pe.clone().multiplyScalar(-1);return k>0?this.animateMotion(k,B,_e,this.rotationGroup.position.z,this.rotationGroup.quaternion,this.lookingAt):(this.modelGroup.position=_e,this.show()),this}zoomTo(b={},k=0,B=!1){let J=this.getAtomsFromSel(b),X=(0,I.getExtent)(J),ae=X;if((0,I.isEmptyObject)(b)){let _s=J&&J.length;if(this.shapes.forEach(Ei=>{if(Ei&&Ei.boundingSphere){if(Ei.boundingSphere.box){let Ep=Ei.boundingSphere.box;J.push(new A.Vector3(Ep.min.x,Ep.min.y,Ep.min.z)),J.push(new A.Vector3(Ep.max.x,Ep.max.y,Ep.max.z))}else if(Ei.boundingSphere.center){var Bl=Ei.boundingSphere.center,Wl=Ei.boundingSphere.radius;Wl>0?(J.push(new A.Vector3(Bl.x+Wl,Bl.y,Bl.z)),J.push(new A.Vector3(Bl.x-Wl,Bl.y,Bl.z)),J.push(new A.Vector3(Bl.x,Bl.y+Wl,Bl.z)),J.push(new A.Vector3(Bl.x,Bl.y-Wl,Bl.z)),J.push(new A.Vector3(Bl.x,Bl.y,Bl.z+Wl)),J.push(new A.Vector3(Bl.x,Bl.y,Bl.z-Wl))):J.push(Bl)}}}),ae=(0,I.getExtent)(J),!_s)for(let Ei=0;Ei<3;Ei++)X[2][Ei]=(ae[0][Ei]+ae[1][Ei])/2}else{let _s=this.getAtomsFromSel({});ae=(0,I.getExtent)(_s)}var He=new A.Vector3(X[2][0],X[2][1],X[2][2]),Pe=ae[1][0]-ae[0][0],ue=ae[1][1]-ae[0][1],Oe=ae[1][2]-ae[0][2],we=Math.hypot(Pe,ue,Oe);we<5&&(we=5),this.slabNear=-we/1.9,this.slabFar=we/2,Object.keys(b).length===0&&(this.slabNear=Math.min(-we*2,-50),this.slabFar=Math.max(we*2,50));var Ze=this.config.minimumZoomToDistance||5;Pe=X[1][0]-X[0][0],ue=X[1][1]-X[0][1],Oe=X[1][2]-X[0][2],we=Math.hypot(Pe,ue,Oe),we<Ze&&(we=Ze);for(var it=Ze*Ze,lt=0;lt<J.length;lt++)if(J[lt]){var Vt=He.distanceToSquared(J[lt]);Vt>it&&(it=Vt)}we=Math.sqrt(it)*2;var _e=He.clone().multiplyScalar(-1),pr=-(we*.5/Math.tan(Math.PI/180*this.camera.fov/2)-this.CAMERA_Z);return pr=this.adjustZoomToLimits(pr),k>0?this.animateMotion(k,B,_e,pr,this.rotationGroup.quaternion,this.lookingAt):(this.modelGroup.position=_e,this.rotationGroup.position.z=pr,this.show()),this}setSlab(b,k){this.slabNear=b,this.slabFar=k}getSlab(){return{near:this.slabNear,far:this.slabFar}}addLabel(b,k={},B,J=!1){if(B){var X=(0,I.getExtent)(this.getAtomsFromSel(B));k.position={x:X[2][0],y:X[2][1],z:X[2][2]}}var ae=new u.Label(b,k);return ae.setContext(),this.modelGroup.add(ae.sprite),this.labels.push(ae),J||this.show(),ae}addResLabels(b,k,B=!1){let J=this.labels.length;return this.applyToModels("addResLabels",b,k,B),this.show(),this.labels.slice(J)}addPropertyLabels(b,k,B){return this.applyToModels("addPropertyLabels",b,k,B),this.show(),this}removeLabel(b){for(var k=0;k<this.labels.length;k++)if(this.labels[k]==b){this.labels.splice(k,1),b.dispose(),this.modelGroup.remove(b.sprite);break}return this.show(),this}removeAllLabels(){for(var b=0;b<this.labels.length;b++)this.labels[b]&&this.labels[b].sprite&&this.modelGroup.remove(this.labels[b].sprite);return this.labels.splice(0,this.labels.length),this.show(),this}hideAllLabels(){for(var b=0;b<this.labels.length;b++)this.labels[b]&&this.labels[b].hide();return this.show(),this}showAllLabels(){for(var b=0;b<this.labels.length;b++)this.labels[b]&&this.labels[b].show();return this.show(),this}setLabelStyle(b,k){return this.modelGroup.remove(b.sprite),b.dispose(),b.stylespec=k,b.setContext(),this.modelGroup.add(b.sprite),this.show(),b}setLabelText(b,k){return this.modelGroup.remove(b.sprite),b.dispose(),b.text=k,b.setContext(),this.modelGroup.add(b.sprite),this.show(),b}addShape(b){b=b||{};var k=new o.GLShape(b);return k.shapePosition=this.shapes.length,this.shapes.push(k),k}removeShape(b){if(!b)return this;for(b.removegl(this.modelGroup),delete this.shapes[b.shapePosition];this.shapes.length>0&&typeof this.shapes[this.shapes.length-1]>"u";)this.shapes.pop();return this}removeAllShapes(){for(var b=0;b<this.shapes.length;b++){var k=this.shapes[b];k&&k.removegl(this.modelGroup)}return this.shapes.splice(0,this.shapes.length),this}getSelectionCenter(b){if(b.hasOwnProperty("x")&&b.hasOwnProperty("y")&&b.hasOwnProperty("z"))return b;var k=this.getAtomsFromSel(b);if(k.length==0)return{x:0,y:0,z:0};var B=(0,I.getExtent)(k);return{x:B[0][0]+(B[1][0]-B[0][0])/2,y:B[0][1]+(B[1][1]-B[0][1])/2,z:B[0][2]+(B[1][2]-B[0][2])/2}}addSphere(b){b=b||{},b.center=this.getSelectionCenter(b.center);var k=new o.GLShape(b);return k.shapePosition=this.shapes.length,k.addSphere(b),this.shapes.push(k),k.finalize(),k}addBox(b={}){b.corner!=null&&(b.corner=this.getSelectionCenter(b.corner)),b.center!=null&&(b.center=this.getSelectionCenter(b.center));var k=new o.GLShape(b);return k.shapePosition=this.shapes.length,k.addBox(b),this.shapes.push(k),k.finalize(),k}addArrow(b={}){b.start=this.getSelectionCenter(b.start),b.end=this.getSelectionCenter(b.end);var k=new o.GLShape(b);return k.shapePosition=this.shapes.length,k.addArrow(b),this.shapes.push(k),k.finalize(),k}addCylinder(b={}){b.start=this.getSelectionCenter(b.start),b.end=this.getSelectionCenter(b.end);var k=new o.GLShape(b);return k.shapePosition=this.shapes.length,b.dashed?k.addDashedCylinder(b):k.addCylinder(b),this.shapes.push(k),k.finalize(),k}addCurve(b={}){var k=new o.GLShape(b);return k.shapePosition=this.shapes.length,k.addCurve(b),this.shapes.push(k),k.finalize(),k}addLine(b={}){b.start=this.getSelectionCenter(b.start),b.end=this.getSelectionCenter(b.end),b.wireframe=!0;var k=new o.GLShape(b);return k.shapePosition=this.shapes.length,b.dashed?k=this.addLineDashed(b,k):k.addLine(b),this.shapes.push(k),k.finalize(),k}addUnitCell(b,k){b=this.getModel(b),k=k||{alabel:"a",blabel:"b",clabel:"c"},k.box=k.box||{},k.astyle=k.astyle||{color:"red",radius:.1,midpos:-1},k.bstyle=k.bstyle||{color:"green",radius:.1,midpos:-1},k.cstyle=k.cstyle||{color:"blue",radius:.1,midpos:-1},k.alabelstyle=k.alabelstyle||{fontColor:"red",showBackground:!1,alignment:"center",inFront:!1},k.blabelstyle=k.blabelstyle||{fontColor:"green",showBackground:!1,alignment:"center",inFront:!1},k.clabelstyle=k.clabelstyle||{fontColor:"blue",showBackground:!1,alignment:"center",inFront:!1},b.unitCellObjects&&this.removeUnitCell(b),b.unitCellObjects={shapes:[],labels:[]};var B=b.getCrystData(),J=null;if(B){if(B.matrix)J=B.matrix;else{var X=B.a,ae=B.b,He=B.c,Pe=B.alpha,ue=B.beta,Oe=B.gamma;Pe=Pe*Math.PI/180,ue=ue*Math.PI/180,Oe=Oe*Math.PI/180;var we,Ze,it;we=Math.cos(ue),Ze=(Math.cos(Pe)-Math.cos(ue)*Math.cos(Oe))/Math.sin(Oe),it=Math.sqrt(Math.max(0,1-we*we-Ze*Ze)),J=new A.Matrix3(X,ae*Math.cos(Oe),He*we,0,ae*Math.sin(Oe),He*Ze,0,0,He*it)}var lt=[new A.Vector3(0,0,0),new A.Vector3(1,0,0),new A.Vector3(0,1,0),new A.Vector3(0,0,1),new A.Vector3(1,1,0),new A.Vector3(0,1,1),new A.Vector3(1,0,1),new A.Vector3(1,1,1)];if(B.matrix4)for(let _e=0;_e<lt.length;_e++)B.size&&lt[_e].multiplyVectors(lt[_e],B.size),lt[_e]=lt[_e].applyMatrix4(B.matrix4);else for(let _e=0;_e<lt.length;_e++)lt[_e]=lt[_e].applyMatrix3(J);if(k.box&&!k.box.hidden){k.box.wireframe=!0;var Vt=new o.GLShape(k.box);Vt.shapePosition=this.shapes.length,Vt.addLine({start:lt[0],end:lt[1]}),Vt.addLine({start:lt[0],end:lt[2]}),Vt.addLine({start:lt[1],end:lt[4]}),Vt.addLine({start:lt[2],end:lt[4]}),Vt.addLine({start:lt[0],end:lt[3]}),Vt.addLine({start:lt[3],end:lt[5]}),Vt.addLine({start:lt[2],end:lt[5]}),Vt.addLine({start:lt[1],end:lt[6]}),Vt.addLine({start:lt[4],end:lt[7]}),Vt.addLine({start:lt[6],end:lt[7]}),Vt.addLine({start:lt[3],end:lt[6]}),Vt.addLine({start:lt[5],end:lt[7]}),this.shapes.push(Vt),b.unitCellObjects.shapes.push(Vt),Vt.finalize()}if(!k.astyle.hidden){k.astyle.start=lt[0],k.astyle.end=lt[1];let _e=this.addArrow(k.astyle);b.unitCellObjects.shapes.push(_e)}if(!k.bstyle.hidden){k.bstyle.start=lt[0],k.bstyle.end=lt[2];let _e=this.addArrow(k.bstyle);b.unitCellObjects.shapes.push(_e)}if(!k.cstyle.hidden){k.cstyle.start=lt[0],k.cstyle.end=lt[3];let _e=this.addArrow(k.cstyle);b.unitCellObjects.shapes.push(_e)}if(k.alabel){k.alabelstyle.position=lt[1];let _e=this.addLabel(k.alabel,k.alabelstyle);b.unitCellObjects.labels.push(_e)}if(k.blabel){k.blabelstyle.position=lt[2];let _e=this.addLabel(k.blabel,k.blabelstyle);b.unitCellObjects.labels.push(_e)}if(k.clabel){k.clabelstyle.position=lt[3];let _e=this.addLabel(k.clabel,k.clabelstyle);b.unitCellObjects.labels.push(_e)}}}removeUnitCell(b){if(b=this.getModel(b),b.unitCellObjects){let k=this;b.unitCellObjects.shapes.forEach(function(B){k.removeShape(B)}),b.unitCellObjects.labels.forEach(function(B){k.removeLabel(B)})}delete b.unitCellObjects}replicateUnitCell(b=3,k=b,B=k,J,X,ae){J=this.getModel(J);let He=J.getCrystData();if(He){const Pe=J.selectedAtoms({}),ue=He.matrix;let Oe=function(Ze){return Ze%2==0?-Ze/2:Math.ceil(Ze/2)};b<=1&&k<=1&&B<=1&&(ae=!0,b=k=B=3);let we=function(Ze,it,lt){return!1};if(ae){const Ze=new A.Matrix3().getInverse3(ue);we=function(it,lt,Vt){let _e=new A.Vector3(it,lt,Vt).applyMatrix3(Ze);return!(_e.x>-1e-4&&_e.x<1.0001&&_e.y>-1e-4&&_e.y<1.0001&&_e.z>-1e-4&&_e.z<1.0001)}}for(let Ze=0;Ze<b;Ze++)for(let it=0;it<k;it++)for(let lt=0;lt<B;lt++){if(Ze==0&&it==0&&lt==0)continue;let Vt=new A.Vector3(Oe(Ze),Oe(it),Oe(lt));Vt.applyMatrix3(ue);let _e=[];for(let pr=0;pr<Pe.length;pr++){let _s=Pe[pr].x+Vt.x,Ei=Pe[pr].y+Vt.y,Bl=Pe[pr].z+Vt.z;if(we(_s,Ei,Bl))continue;let Wl={};for(let Ep in Pe[pr])Wl[Ep]=Pe[pr][Ep];Wl.x=_s,Wl.y=Ei,Wl.z=Bl,_e.push(Wl)}J.addAtoms(_e)}X&&J.assignBonds()}}addLineDashed(b,k){b.dashLength=b.dashLength||.5,b.gapLength=b.gapLength||.5;var B;b.start?B=new A.Vector3(b.start.x||0,b.start.y||0,b.start.z||0):B=new A.Vector3(0,0,0);var J;b.end?J=new A.Vector3(b.end.x,b.end.y||0,b.end.z||0):J=new A.Vector3(0,0,0);var X=new A.Vector3,ae=new A.Vector3,He=new A.Vector3,Pe,ue,Oe,we=B.clone(),Ze=0;for(X.subVectors(J,B),Pe=X.length(),X.normalize(),ae=X.clone(),He=X.clone(),ae.multiplyScalar(b.dashLength),He.multiplyScalar(b.gapLength),ue=ae.length(),Oe=He.length();Ze<Pe;){if(Ze+ue>Pe){b.start=B,b.end=J,k.addLine(b);break}we.addVectors(B,ae),b.start=B,b.end=we,k.addLine(b),B=we.clone(),Ze+=ue,we.addVectors(B,He),B=we.clone(),Ze+=Oe}return k.finalize(),k}addCustom(b){b=b||{};var k=new o.GLShape(b);return k.shapePosition=this.shapes.length,k.addCustom(b),this.shapes.push(k),k.finalize(),k}addVolumetricData(b,k,B={}){var J=new x.VolumeData(b,k);return B.hasOwnProperty("transferfn")?this.addVolumetricRender(J,B):this.addIsosurface(J,B)}addIsosurface(b,k={},B){var J=new o.GLShape(k);return J.shapePosition=this.shapes.length,J.addIsosurface(b,k,B,this),this.shapes.push(J),J}addVolumetricRender(b,k){k=k||{};var B=new m.GLVolumetricRender(b,k,this);return B.shapePosition=this.shapes.length,this.shapes.push(B),B}hasVolumetricRender(){return this.renderer.supportsVolumetric()}enableFog(b){if(b){this.scene.fog=new w.Fog(this.bgColor,100,200),this.config.disableFog=!1;const k=b;k.fogStart==null?this.fogStart=.4:this.fogStart=k.fogStart,k.fogEnd==null?this.fogEnd=1:this.fogEnd=k.fogEnd}else this.config.disableFog=!0,this.show()}setFrame(b){this.viewer_frame=b;let k=this;return new Promise(function(B){var J=k.models.map(function(X){return X.setFrame(b)});Promise.all(J).then(function(){B()})})}getFrame(){return this.viewer_frame}getNumFrames(){var b=0;for(let k=0;k<this.models.length;k++)this.models[k].getNumFrames()>b&&(b=this.models[k].getNumFrames());for(let k=0;k<this.shapes.length;k++)this.shapes[k].frame&&this.shapes[k].frame>=b&&(b=this.shapes[k].frame+1);for(let k=0;k<this.labels.length;k++)this.labels[k].frame&&this.labels[k].frame>=b&&(b=this.labels[k].frame+1);return b}getNextModelId(){return this.models.length}animate(b){this.incAnim();var k=100,B="forward",J=1/0;b=b||{},b.interval&&(k=b.interval),b.loop&&(B=b.loop),b.reps&&(J=b.reps);var X=this.getNumFrames(),ae=this,He=0;b.startFrame&&(He=b.startFrame%X);var Pe=1;b.step&&(Pe=b.step,J/=Pe);var ue=0,Oe=X*J,we=new Date,Ze,it,lt=function(Vt){we=new Date,Vt=="forward"?ae.setFrame(He).then(function(){He=(He+Pe)%X,Ze()}):Vt=="backward"?ae.setFrame(X-1-He).then(function(){He=(He+Pe)%X,Ze()}):ae.setFrame(He).then(function(){He+=Pe,Pe*=He%(X-1)==0?-1:1,Ze()})};return Ze=function(){if(ae.render(),!ae.getCanvas().isConnected)ae.stopAnimate();else if(++ue>=Oe||!ae.isAnimated())it.cancel(),ae.animationTimers.delete(it),ae.decAnim();else{var Vt=k-(new Date().getTime()-we.getTime());Vt=Vt>0?Vt:0,it.cancel(),ae.animationTimers.delete(it),it=new I.PausableTimer(lt,Vt,B),ae.animationTimers.add(it)}},it=new I.PausableTimer(lt,0,B),this.animationTimers.add(it),this}stopAnimate(){return this.animated=0,this.animationTimers.forEach(function(b){b.cancel()}),this.animationTimers=new Set,this}pauseAnimate(){return this.animationTimers.forEach(function(b){b.pause()}),this}resumeAnimate(){return this.animationTimers.forEach(function(b){b.resume()}),this}isAnimated(){return this.animated>0}getModelOpt(b){return b&&!b.defaultcolors?(b.defaultcolors=this.defaultcolors,b.cartoonQuality=b.cartoonQuality||this.config.cartoonQuality):typeof b>"u"&&(b={defaultcolors:this.defaultcolors,cartoonQuality:this.config.cartoonQuality}),b}addModel(b,k="",B){B=this.getModelOpt(B);var J=new s.GLModel(this.models.length,B,this);return J.addMolData(b,k,B),this.models.push(J),J}addModels(b,k,B){B=this.getModelOpt(B),B.multimodel=!0,B.frames=!0;for(var J=s.GLModel.parseMolData(b,k,B),X=0;X<J.length;X++){var ae=new s.GLModel(this.models.length,B,this);ae.setAtomDefaults(J[X]),ae.addFrame(J[X]),ae.setFrame(0),J.modelData&&ae.setModelData(J.modelData[X]),ae.setDontDuplicateAtoms(!B.duplicateAssemblyAtoms),this.models.push(ae)}return this.models}addModelsAsFrames(b,k,B){B=this.getModelOpt(B),B.multimodel=!0,B.frames=!0;var J=new s.GLModel(this.models.length,B,this);return J.addMolData(b,k,B),this.models.push(J),J}addAsOneMolecule(b,k,B){B=this.getModelOpt(B),B.multimodel=!0,B.onemol=!0;var J=new s.GLModel(this.models.length,B,this);return J.addMolData(b,k,B),this.models.push(J),J}removeModel(b){if(b=this.getModel(b),!!b){for(b.removegl(this.modelGroup),delete this.models[b.getID()];this.models.length>0&&typeof this.models[this.models.length-1]>"u";)this.models.pop();return this}}removeAllModels(){for(var b=0;b<this.models.length;b++){var k=this.models[b];k&&k.removegl(this.modelGroup)}return this.models.splice(0,this.models.length),this}exportJSON(b,k){var B={};return k===void 0?B.m=this.models.map(function(J){return J.toCDObject(b)}):B.m=[this.models[k].toCDObject()],JSON.stringify(B)}exportVRML(){var b=this.modelGroup;this.applyToModels("removegl",this.modelGroup),this.modelGroup=new w.Object3D,this.render(null,{supportsImposters:!1,supportsAIA:!1,regen:!0});var k=`#VRML V2.0 utf8
`+this.modelGroup.vrml()+`
`;return this.applyToModels("removegl",this.modelGroup),this.modelGroup=b,k}createModelFrom(b,k=!1){for(var B=new s.GLModel(this.models.length,this.defaultcolors,this),J=0;J<this.models.length;J++)if(this.models[J]){var X=this.models[J].selectedAtoms(b);B.addAtoms(X),k&&this.models[J].removeAtoms(X)}return this.models.push(B),B}applyToModels(b,k,B,J,X,ae,He){for(var Pe=this.getModelList(k),ue=0;ue<Pe.length;ue++)Pe[ue][b](k,B,J,X,ae,He)}setStyle(b,k){return typeof k>"u"&&(k=b,b={}),this.applyToModels("setStyle",b,k,!1),this}addStyle(b,k){return typeof k>"u"&&(k=b,b={}),this.applyToModels("setStyle",b,k,!0),this}setClickable(b,k,B){return this.applyToModels("setClickable",b,k,B),this}setHoverable(b,k,B,J){return this.applyToModels("setHoverable",b,k,B,J),this}enableContextMenu(b,k){return this.applyToModels("enableContextMenu",b,k),this}vibrate(b,k,B,J){return this.applyToModels("vibrate",b,k,B,J),this}setColorByProperty(b,k,B,J){return this.applyToModels("setColorByProperty",b,k,B,J),this}setColorByElement(b,k){return this.applyToModels("setColorByElement",b,k),this}static getAtomsWithin(b,k){var B=[];for(let X=0;X<b.length;X++){var J=b[X];typeof J>"u"||J.x<k[0][0]||J.x>k[1][0]||J.y<k[0][1]||J.y>k[1][1]||J.z<k[0][2]||J.z>k[1][2]||B.push(J)}return B}static volume(b){var k=b[1][0]-b[0][0],B=b[1][1]-b[0][1],J=b[1][2]-b[0][2];return k*B*J}carveUpExtent(b,k,B){let J=[],X={};for(let we=0,Ze=k.length;we<Ze;we++)X[k[we].index]=we;let ae=function(we){let Ze=[];for(let it=0,lt=we.length;it<lt;it++)we[it].index in X&&Ze.push(X[we[it].index]);return Ze},He=function(we){let Ze=[];return Ze[0]=[we[0][0],we[0][1],we[0][2]],Ze[1]=[we[1][0],we[1][1],we[1][2]],Ze},Pe=function(we){if(c.volume(we)<c.maxVolume)return[we];var Ze=we[1][0]-we[0][0],it=we[1][1]-we[0][1],lt=we[1][2]-we[0][2],Vt;Ze>it&&Ze>lt?Vt=0:it>Ze&&it>lt?Vt=1:Vt=2;var _e=He(we),pr=He(we),_s=(we[1][Vt]-we[0][Vt])/2+we[0][Vt];_e[1][Vt]=_s,pr[0][Vt]=_s;var Ei=Pe(_e),Bl=Pe(pr);return Ei.concat(Bl)},ue=Pe(b),Oe=6;for(let we=0,Ze=ue.length;we<Ze;we++){let it=He(ue[we]);it[0][0]-=Oe,it[0][1]-=Oe,it[0][2]-=Oe,it[1][0]+=Oe,it[1][1]+=Oe,it[1][2]+=Oe;let lt=c.getAtomsWithin(k,it),Vt=c.getAtomsWithin(B,ue[we]);J.push({extent:ue[we],atoms:ae(lt),toshow:ae(Vt)})}return J}static generateSurfaceMesh(b,k,B){var J=new w.Geometry(!0),X=J.updateGeoGroup(0),ae=[];for(let zp=0,M0=b.length;zp<M0;zp++){var He=b[zp];He&&(typeof He.surfaceColor<"u"?ae[zp]=He.surfaceColor:He.color&&(ae[zp]=D.CC.color(He.color)))}var Pe=X.vertexArray,ue=k.vertices;for(let zp=0,M0=ue.length;zp<M0;zp++){let W0=X.vertices*3;Pe[W0]=ue[zp].x,Pe[W0+1]=ue[zp].y,Pe[W0+2]=ue[zp].z,X.vertices++}var Oe=X.colorArray;let we=X.atomArray;if(B.voldata&&B.volscheme){var Ze=B.volscheme,it=B.voldata,lt=Ze.range()||[-1,1];for(let zp=0,M0=ue.length;zp<M0;zp++){let W0=ue[zp].atomid,im=it.getVal(ue[zp].x,ue[zp].y,ue[zp].z),F0=D.CC.color(Ze.valueToHex(im,lt)),fm=zp*3;Oe[fm]=F0.r,Oe[fm+1]=F0.g,Oe[fm+2]=F0.b,we[zp]=b[W0]}}else if(ae.length>0)for(let zp=0,M0=ue.length;zp<M0;zp++){let W0=ue[zp].atomid,im=zp*3;Oe[im]=ae[W0].r,Oe[im+1]=ae[W0].g,Oe[im+2]=ae[W0].b,we[zp]=b[W0]}var Vt=k.faces;X.faceidx=Vt.length,J.initTypedArrays();var _e=X.vertexArray,pr=X.normalArray,_s,Ei,Bl,Wl;for(let zp=0,M0=Vt.length;zp<M0;zp+=3){var Ep=Vt[zp],Lp=Vt[zp+1],Op=Vt[zp+2],R0=Ep*3,N0=Lp*3,Qp=Op*3;_s=new A.Vector3(_e[R0],_e[R0+1],_e[R0+2]),Ei=new A.Vector3(_e[N0],_e[N0+1],_e[N0+2]),Bl=new A.Vector3(_e[Qp],_e[Qp+1],_e[Qp+2]),Bl.subVectors(Bl,Ei),_s.subVectors(_s,Ei),Bl.cross(_s),Wl=Bl,Wl.normalize(),pr[R0]+=Wl.x,pr[N0]+=Wl.x,pr[Qp]+=Wl.x,pr[R0+1]+=Wl.y,pr[N0+1]+=Wl.y,pr[Qp+1]+=Wl.y,pr[R0+2]+=Wl.z,pr[N0+2]+=Wl.z,pr[Qp+2]+=Wl.z}X.faceArray=new Uint16Array(Vt);var O0=new w.Mesh(J,B);return O0}static generateMeshSyncHelper(b,k,B,J,X,ae){var He=new h.ProteinSurface;return He.initparm(k,b!==1,ae),He.fillvoxels(X,B),He.buildboundary(),(b==h.SurfaceType.SES||b==h.SurfaceType.MS)&&(He.fastdistancemap(),He.boundingatom(!1),He.fillvoxelswaals(X,B)),He.marchingcube(b),He.getFacesAndVertices(J)}static getMatWithStyle(b){let k=null;b.onesided?k=new w.MeshLambertMaterial:k=new w.MeshDoubleLambertMaterial,k.vertexColors=w.Coloring.VertexColors;for(var B in b)B==="color"||B==="map"||b.hasOwnProperty(B)&&(k[B]=b[B]);return b.opacity!==void 0&&(b.opacity===1?k.transparent=!1:k.transparent=!0),b.wireframe!==void 0&&(k.wireframe=b.wireframe),k}addMesh(b){let k={geo:b.geometry,mat:b.material,done:!0,finished:!1};var B=this.nextSurfID();return this.surfaces[B]=new l([k]),B}static shallowCopy(b){var k=[];let B=b.length;for(let J=0;J<B;J++)k[J]=(0,I.extend)({},b[J]);return k}addSurface(b,k={},B={},J,X,ae){let He=this.nextSurfID(),Pe=null,ue=this,Oe=h.SurfaceType.VDW;typeof b=="string"?c.surfaceTypeMap[b.toUpperCase()]!==void 0?Oe=c.surfaceTypeMap[b]:console.log("Surface type : "+b+" is not recognized"):typeof b=="number"&&(Oe=b);var we=null,Ze=null,it=c.shallowCopy(this.getAtomsFromSel(B));J?we=c.shallowCopy(this.getAtomsFromSel(J)):we=it,(0,I.adjustVolumeStyle)(k);var lt=!1,Vt;for(Vt=0;Vt<this.models.length;Vt++)if(this.models[Vt]){var _e=this.models[Vt].getSymmetries();if(_e.length>1||_e.length==1&&!_e[0].isIdentity()){lt=!0;break}}var pr=function(Lp,Op,R0){X?Ze=c.shallowCopy(ue.getAtomsFromSel(X)):Ze=R0;var N0,Qp=(0,I.getExtent)(R0,!0);if(k.map&&k.map.prop){var O0=k.map.prop;let a0=(0,f.getGradient)(k.map.scheme||k.map.gradient||new f.Gradient.RWB),rm=a0.range();rm||(rm=(0,I.getPropertyRange)(R0,O0)),k.colorscheme={prop:O0,gradient:a0}}for(let a0=0,rm=Op.length;a0<rm;a0++)N0=Op[a0],N0.surfaceColor=(0,I.getColorFromStyle)(N0,k);var zp=c.volume(Qp),M0=ue.carveUpExtent(Qp,Op,R0);if(Ze&&Ze.length&&Ze.length>0){var W0=(0,I.getExtent)(Ze,!0),im=function(a0,rm){var X0=function(Mp,_0){var v0=Mp.extent,z0=v0[1][0]-v0[0][0],sm=v0[1][1]-v0[0][1],Uo=v0[1][2]-v0[0][2],u0=z0-_0[2][0];u0*=u0;var x0=sm-_0[2][1];x0*=x0;var Xl=Uo-_0[2][2];return Xl*=Xl,u0+x0+Xl},Nl=X0(a0,W0),Gl=X0(rm,W0);return Nl-Gl};M0.sort(im)}var F0=[];for(let a0=0,rm=Op.length;a0<rm;a0++)N0=Op[a0],F0[a0]={x:N0.x,y:N0.y,z:N0.z,serial:a0,elem:N0.elem};var fm=!!h.syncSurface;if((typeof $3Dmol>"u"||typeof $3Dmol.SurfaceWorker>"u")&&(console.log("$3Dmol.SurfaceWorker is not defined, using synchronous surface generation."),fm=!0),fm){var cm=function(a0){return new Promise(function(rm){for(var X0=c.generateMeshSyncHelper(Oe,M0[a0].extent,M0[a0].atoms,M0[a0].toshow,F0,zp),Nl=(0,o.splitMesh)({vertexArr:X0.vertices,faceArr:X0.faces}),Gl=0,Mp=Nl.length;Gl<Mp;Gl++){X0={vertices:Nl[Gl].vertexArr,faces:Nl[Gl].faceArr};var _0=c.generateSurfaceMesh(Op,X0,Pe);(0,I.mergeGeos)(Lp.geo,_0)}ue.render(),rm()})},Ap=[];for(let a0=0;a0<M0.length;a0++)Ap.push(cm(a0));return Promise.all(Ap).then(function(){return Lp.done=!0,ue.render(),Promise.resolve(He)})}else{var Io=[];Oe<0&&(Oe=0);for(let a0=0,rm=c.numWorkers;a0<rm;a0++){var p0=new Worker($3Dmol.SurfaceWorker);Io.push(p0),p0.postMessage({type:-1,atoms:F0,volume:zp})}return new Promise(function(a0,rm){var X0=0,Nl=function(){!Io||!Io.length||Io.forEach(function(v0){v0&&v0.terminate&&v0.terminate()})},Gl=function(v0){for(var z0=(0,o.splitMesh)({vertexArr:v0.data.vertices,faceArr:v0.data.faces}),sm=0,Uo=z0.length;sm<Uo;sm++){var u0={vertices:z0[sm].vertexArr,faces:z0[sm].faceArr},x0=c.generateSurfaceMesh(Op,u0,Pe);(0,I.mergeGeos)(Lp.geo,x0)}ue.render(),X0++,X0==M0.length&&(Lp.done=!0,Nl(),a0(He))},Mp=function(v0){Nl(),console.log(v0.message+" ("+v0.filename+":"+v0.lineno+")"),rm(v0)};for(let v0=0;v0<M0.length;v0++){var _0=Io[v0%Io.length];_0.onmessage=Gl,_0.onerror=Mp,_0.postMessage({type:Oe,expandedExtent:M0[v0].extent,extendedAtoms:M0[v0].atoms,atomsToShow:M0[v0].toshow})}})}};k=k||{},Pe=c.getMatWithStyle(k);let _s=new l([]);_s.style=k,_s.atomsel=B,_s.allsel=J,_s.focus=X;var Ei=null;if(lt){var Bl={},Wl={};for(Vt=0;Vt<this.models.length;Vt++)Bl[Vt]=[],Wl[Vt]=[];for(Vt=0;Vt<we.length;Vt++)Bl[we[Vt].model].push(we[Vt]);for(Vt=0;Vt<it.length;Vt++)Wl[it[Vt].model].push(it[Vt]);var Ep=[];for(Vt=0;Vt<this.models.length;Vt++)Wl[Vt].length>0&&(_s.push({geo:new w.Geometry(!0),mat:Pe,done:!1,finished:!1,symmetries:this.models[Vt].getSymmetries()}),Ep.push(pr(_s[_s.length-1],Bl[Vt],Wl[Vt])));Ei=Promise.all(Ep)}else _s.push({geo:new w.Geometry(!0),mat:Pe,done:!1,finished:!1,symmetries:[new A.Matrix4]}),Ei=pr(_s[_s.length-1],we,it);return this.surfaces[He]=_s,Ei.surfid=He,ae&&typeof ae=="function"?(Ei.then(function(Lp){ae(Lp)}),He):Ei}setSurfaceMaterialStyle(b,k){if((0,I.adjustVolumeStyle)(k),this.surfaces[b]){var B=this.surfaces[b];for(let X=0;X<B.length;X++){var J=B[X].mat=c.getMatWithStyle(k);if(B[X].mat.side=w.FrontSide,k.wireframe&&B[X].geo.setUpWireframe(),k.color){B[X].mat.color=D.CC.color(k.color),B[X].geo.colorsNeedUpdate=!0;const ae=D.CC.color(k.color);B[X].geo.setColor(ae)}else if(J.voldata&&J.volscheme){const ae=J.volscheme,He=J.voldata,Pe=D.CC,ue=ae.range()||[-1,1];B[X].geo.setColors(function(Oe,we,Ze){let it=He.getVal(Oe,we,Ze);return Pe.color(ae.valueToHex(it,ue))})}else{B[X].geo.colorsNeedUpdate=!0;for(let ae of B[X].geo.geometryGroups)for(let He=0;He<ae.vertices;He++){let Pe=(0,I.getColorFromStyle)(ae.atomArray[He],k),ue=3*He;ae.colorArray[ue]=Pe.r,ae.colorArray[ue+1]=Pe.g,ae.colorArray[ue+2]=Pe.b}}B[X].finished=!1}}return this}getSurface(b){return this.surfaces[b]}removeSurface(b){for(var k=this.surfaces[b],B=0;B<k.length;B++)k[B]&&k[B].lastGL&&(k[B].geo!==void 0&&k[B].geo.dispose(),k[B].mat!==void 0&&k[B].mat.dispose(),this.modelGroup.remove(k[B].lastGL));return delete this.surfaces[b],this.show(),this}removeAllSurfaces(){for(var b in this.surfaces)if(this.surfaces.hasOwnProperty(b)){for(var k=this.surfaces[b],B=0;B<k.length;B++)k[B]&&k[B].lastGL&&(k[B].geo!==void 0&&k[B].geo.dispose(),k[B].mat!==void 0&&k[B].mat.dispose(),this.modelGroup.remove(k[B].lastGL));delete this.surfaces[b]}return this.show(),this}jmolMoveTo(){var b=this.modelGroup.position,k="center { "+-b.x+" "+-b.y+" "+-b.z+" }; ",B=this.rotationGroup.quaternion;return k+="moveto .5 quaternion { "+B.x+" "+B.y+" "+B.z+" "+B.w+" };",k}clear(){return this.removeAllSurfaces(),this.removeAllModels(),this.removeAllLabels(),this.removeAllShapes(),this.show(),this}mapAtomProperties(b,k){k=k||{};var B=this.getAtomsFromSel(k);if(typeof b=="function")for(let ae=0,He=B.length;ae<He;ae++){let Pe=B[ae];b(Pe)}else for(let ae=0,He=B.length;ae<He;ae++){var J=B[ae];for(let Pe=0,ue=b.length;Pe<ue;Pe++){let Oe=b[Pe];if(Oe.props)for(var X in Oe.props)Oe.props.hasOwnProperty(X)&&this.atomIsSelected(J,Oe)&&(J.properties||(J.properties={}),J.properties[X]=Oe.props[X])}}return this}linkViewer(b){return this.linkedViewers.push(b),this}getPerceivedDistance(){return this.CAMERA_Z-this.rotationGroup.position.z}setPerceivedDistance(b){this.rotationGroup.position.z=this.CAMERA_Z-b}setAutoEyeSeparation(b,k){var B=this.getPerceivedDistance();return k||(k=5),b||this.camera.position.x>0?this.camera.position.x=B*Math.tan(Math.PI/180*k):this.camera.position.x=-B*Math.tan(Math.PI/180*k),this.camera.lookAt(new A.Vector3(0,0,this.rotationGroup.position.z)),this.camera.position.x}setDefaultCartoonQuality(b){this.config.cartoonQuality=b}}c.numWorkers=4,c.maxVolume=64e3,c.surfaceTypeMap={VDW:h.SurfaceType.VDW,MS:h.SurfaceType.MS,SAS:h.SurfaceType.SAS,SES:h.SurfaceType.SES};function L($,b){if($=(0,I.getElement)($),!!$){b=b||{};try{var k=new c($,b);return k}catch(B){throw"error creating viewer: "+B}}}function R($,b={},k={}){if($=(0,I.getElement)($),!!$){var B=[],J=document.createElement("canvas");k.rows=b.rows,k.cols=b.cols,k.control_all=b.control_all!=null?b.control_all:!1,$.appendChild(J);try{for(var X=0;X<b.rows;X++){for(var ae=[],He=0;He<b.cols;He++){k.row=X,k.col=He,k.canvas=J,k.viewers=B,k.control_all=b.control_all;var Pe=L($,(0,I.extend)({},k));ae.push(Pe)}B.unshift(ae)}}catch(ue){throw"error creating viewer grid: "+ue}return B}}function F($){var b=this;if($=(0,I.getElement)($),!!$){var k=R($,{rows:1,cols:2,control_all:!0});this.glviewer1=k[0][0],this.glviewer2=k[0][1],this.glviewer1.setAutoEyeSeparation(!1),this.glviewer2.setAutoEyeSeparation(!0),this.glviewer1.linkViewer(this.glviewer2),this.glviewer2.linkViewer(this.glviewer1);for(var B=Object.getOwnPropertyNames(this.glviewer1.__proto__).filter(function(X){return typeof b.glviewer1[X]=="function"}),J=0;J<B.length;J++)this[B[J]]=(function(X){return function(){var ae=this.glviewer1[X].apply(this.glviewer1,arguments),He=this.glviewer2[X].apply(this.glviewer2,arguments);return[ae,He]}})(B[J]);this.setCoordinates=function(X,ae,He){for(var Pe=0;Pe<X.length;Pe++)X[Pe].setCoordinates(ae,He)},this.surfacesFinished=function(){return this.glviewer1.surfacesFinished()&&this.glviewer2.surfacesFinished()},this.isAnimated=function(){return this.glviewer1.isAnimated()||this.glviewer2.isAnimated()},this.render=function(X){this.glviewer1.render(),this.glviewer2.render(),X&&X(this)},this.getCanvas=function(){return this.glviewer1.getCanvas()}}}}),"./src/Gradient.ts":((r,e,t)=>{t.r(e),t.d(e,{CustomLinear:()=>m,Gradient:()=>A,GradientType:()=>s,ROYGB:()=>h,RWB:()=>u,Sinebow:()=>x,builtinGradients:()=>w,getGradient:()=>f,normalizeValue:()=>o});var a=t("./src/colors.ts");class s{}function o(D,I,y){return I>=D?(y<D&&(y=D),y>I&&(y=I),{lo:D,hi:I,val:y}):(y>D&&(y=D),y<I&&(y=I),y=D-y+I,{lo:I,hi:D,val:y})}function f(D){if(D instanceof s)return D;if(D.gradient!==void 0&&w[D.gradient]){let I=D.min===void 0?-1:D.min,y=D.max===void 0?1:D.max;return D.mid===void 0?D.colors===void 0?new w[D.gradient](I,y):new w[D.gradient](I,y,D.colors):new w[D.gradient](I,y,D.mid)}else if(typeof D.gradient=="string"&&D.gradient.startsWith("linear_")){let I=D.gradient.split("_");I.shift();let y=D.min===void 0?-1:D.min,l=D.max===void 0?1:D.max;return new m(y,l,I)}return D}class u extends s{constructor(I,y,l){super(),this.gradient="RWB",this.mult=1,this.mid=l,this.min=I,this.max=y,typeof y>"u"&&Array.isArray(I)&&I.length>=2?(this.max=I[1],this.min=I[0]):I&&y&&!Array.isArray(I)&&(this.min=I,this.max=y)}range(){return typeof this.min<"u"&&typeof this.max<"u"?[this.min,this.max]:null}valueToHex(I,y){var l,c;if(I=this.mult*I,y?(l=y[0],c=y[1]):(l=this.min,c=this.max),I===void 0)return 16777215;var L=o(l,c,I);l=L.lo,c=L.hi,I=L.val;var R=(c+l)/2;y&&typeof y[2]<"u"?R=y[2]:typeof this.mid<"u"?R=this.mid:R=(l+c)/2;var F,$;return I<R?(F=Math.floor(255*Math.sqrt((I-l)/(R-l))),$=16711680+256*F+F,$):I>R?(F=Math.floor(255*Math.sqrt(1-(I-R)/(c-R))),$=65536*F+256*F+255,$):16777215}}class h extends s{constructor(I,y){super(),this.gradient="ROYGB",this.mult=1,this.min=I,this.max=y,typeof y>"u"&&Array.isArray(I)&&I.length>=2?(this.max=I[1],this.min=I[0]):I&&y&&!Array.isArray(I)&&(this.min=I,this.max=y)}valueToHex(I,y){var l,c;if(I=this.mult*I,y?(l=y[0],c=y[1]):(l=this.min,c=this.max),typeof I>"u")return 16777215;var L=o(l,c,I);l=L.lo,c=L.hi,I=L.val;var R=(l+c)/2,F=(l+R)/2,$=(R+c)/2,b,k;return I<F?(b=Math.floor(255*Math.sqrt((I-l)/(F-l))),k=16711680+256*b+0,k):I<R?(b=Math.floor(255*Math.sqrt(1-(I-F)/(R-F))),k=65536*b+65280+0,k):I<$?(b=Math.floor(255*Math.sqrt((I-R)/($-R))),k=65280+1*b,k):(b=Math.floor(255*Math.sqrt(1-(I-$)/(c-$))),k=0+256*b+255,k)}range(){return typeof this.min<"u"&&typeof this.max<"u"?[this.min,this.max]:null}}class x extends s{constructor(I,y){super(),this.gradient="Sinebow",this.mult=1,this.min=I,this.max=y,typeof y>"u"&&Array.isArray(I)&&I.length>=2&&(this.max=I[1],this.min=I[0]),y<I&&(this.mult=-1,this.min*=-1,this.max*=-1)}valueToHex(I,y){var l,c;if(I=this.mult*I,y?(l=y[0],c=y[1]):(l=this.min,c=this.max),typeof I>"u")return 16777215;var L=A.normalizeValue(l,c,I);l=L.lo,c=L.hi,I=L.val;var R=(I-l)/(c-l),F=5*R/6+.5,$=Math.sin(Math.PI*F);$*=$*255;var b=Math.sin(Math.PI*(F+1/3));b*=b*255;var k=Math.sin(Math.PI*(F+2/3));return k*=k*255,65536*Math.floor($)+256*Math.floor(k)+1*Math.floor(b)}range(){return typeof this.min<"u"&&typeof this.max<"u"?[this.min,this.max]:null}}class m extends s{constructor(I,y,l){super(),this.gradient="linear",this.colors=new Array;var c;if(Array.isArray(I)&&I.length>=2?(this.max=I[1],this.min=I[0],c=y):(this.min=I,this.max=y,c=l),c)for(let L of c)this.colors.push(a.CC.color(L));else this.colors.push(a.CC.color(0))}range(){return typeof this.min<"u"&&typeof this.max<"u"?[this.min,this.max]:null}valueToHex(I,y){var l,c;if(y?(l=y[0],c=y[1]):(l=this.min,c=this.max),I===void 0)return 16777215;var L=o(l,c,I);l=L.lo,c=L.hi,I=L.val;let R=this.colors.length,F=(c-l)/R,$=Math.min(Math.floor((I-l)/F),R-1),b=Math.min($+1,R-1),k=(I-l-$*F)/F,B=this.colors[$],J=this.colors[b];return new a.Color(B.r+k*(J.r-B.r),B.g+k*(J.g-B.g),B.b+k*(J.b-B.b)).getHex()}}const w={rwb:u,RWB:u,roygb:h,ROYGB:h,sinebow:x,linear:m};class A extends s{valueToHex(I,y){return 0}range(){return null}}A.RWB=u,A.ROYGB=h,A.Sinebow=x,A.CustomLinear=m,A.builtinGradients=w,A.normalizeValue=o,A.getGradient=f}),"./src/Label.ts":((r,e,t)=>{t.r(e),t.d(e,{Label:()=>x,LabelCount:()=>f});var a=t("./src/WebGL/index.ts"),s=t("./src/Gradient.ts"),o=t("./src/colors.ts");let f=0;function u(m,w,A,D,I,y,l){m.beginPath(),m.moveTo(w+y,A),m.lineTo(w+D-y,A),m.quadraticCurveTo(w+D,A,w+D,A+y),m.lineTo(w+D,A+I-y),m.quadraticCurveTo(w+D,A+I,w+D-y,A+I),m.lineTo(w+y,A+I),m.quadraticCurveTo(w,A+I,w,A+I-y),m.lineTo(w,A+y),m.quadraticCurveTo(w,A,w+y,A),m.closePath(),m.fill(),l&&m.stroke()}function h(m,w,A){var D=A;return typeof m<"u"&&(m instanceof o.Color?D=m.scaled():(D=o.CC.color(m),typeof D.scaled<"u"&&(D=D.scaled()))),typeof w<"u"&&(D.a=parseFloat(w)),D}class x{constructor(w,A){this.id=f++,this.stylespec=A||{},this.canvas=document.createElement("canvas"),this.canvas.width=134,this.canvas.height=35,this.context=this.canvas.getContext("2d"),this.sprite=new a.Sprite,this.text=w,this.frame=this.stylespec.frame}getStyle(){return this.stylespec}hide(){this.sprite&&(this.sprite.visible=!1)}show(){this.sprite&&(this.sprite.visible=!0)}setContext(){var w=this.stylespec,A=typeof w.useScreen>"u"?!1:w.useScreen,D=w.showBackground;(D==="0"||D==="false")&&(D=!1),typeof D>"u"&&(D=!0);var I=w.font?w.font:"sans-serif",y=parseInt(w.fontSize)?parseInt(w.fontSize):18,l=h(w.fontColor,w.fontOpacity,{r:255,g:255,b:255,a:1}),c=w.padding?w.padding:4,L=w.borderThickness?w.borderThickness:0,R=h(w.backgroundColor,w.backgroundOpacity,{r:0,g:0,b:0,a:1}),F=h(w.borderColor,w.borderOpacity,R),$=w.position?w.position:{x:-10,y:1,z:1},b=w.inFront!==void 0?w.inFront:!0;(b==="false"||b==="0")&&(b=!1);var k=w.alignment||a.SpriteAlignment.topLeft;typeof k=="string"&&k in a.SpriteAlignment&&(k=a.SpriteAlignment[k]);var B="";w.bold&&(B="bold "),this.context.font=B+y+"px  "+I;var J=this.context.measureText(this.text),X=J.width;D||(L=0);var ae=X+2.5*L+2*c,He=y*1.25+2*L+2*c;if(w.backgroundImage){var Pe=w.backgroundImage,ue=w.backgroundWidth?w.backgroundWidth:Pe.width,Oe=w.backgroundHeight?w.backgroundHeight:Pe.height;ue>ae&&(ae=ue),Oe>He&&(He=Oe)}if(this.canvas.width=ae,this.canvas.height=He,this.context.clearRect(0,0,this.canvas.width,this.canvas.height),B="",w.bold&&(B="bold "),this.context.font=B+y+"px  "+I,this.context.fillStyle="rgba("+R.r+","+R.g+","+R.b+","+R.a+")",this.context.strokeStyle="rgba("+F.r+","+F.g+","+F.b+","+F.a+")",w.backgroundGradient){let Ze=this.context.createLinearGradient(0,He/2,ae,He/2),it=s.Gradient.getGradient(w.backgroundGradient),lt=it.range(),Vt=-1,_e=1;lt&&(Vt=lt[0],_e=lt[1]);let pr=_e-Vt;for(let _s=0;_s<1.01;_s+=.1){let Ei=h(it.valueToHex(Vt+pr*_s)),Bl="rgba("+Ei.r+","+Ei.g+","+Ei.b+","+Ei.a+")";Ze.addColorStop(_s,Bl)}this.context.fillStyle=Ze}this.context.lineWidth=L,D&&u(this.context,L,L,ae-2*L,He-2*L,6,L>0),w.backgroundImage&&this.context.drawImage(Pe,0,0,ae,He),this.context.fillStyle="rgba("+l.r+","+l.g+","+l.b+","+l.a+")",this.context.fillText(this.text,L+c,y+L+c,X);var we=new a.Texture(this.canvas);we.needsUpdate=!0,this.sprite.material=new a.SpriteMaterial({map:we,useScreenCoordinates:A,alignment:k,depthTest:!b,screenOffset:w.screenOffset||null}),this.sprite.scale.set(1,1,1),this.sprite.position.set($.x,$.y,$.z)}dispose(){this.sprite.material.map!==void 0&&this.sprite.material.map.dispose(),this.sprite.material!==void 0&&this.sprite.material.dispose()}}}),"./src/ProteinSurface4.ts":((r,e,t)=>{t.r(e),t.d(e,{MarchingCube:()=>h,MarchingCubeInitializer:()=>u,PointGrid:()=>x,ProteinSurface:()=>m,SurfaceType:()=>s,setSyncSurface:()=>f,syncSurface:()=>o});var a=t("./src/WebGL/math/index.ts"),s;(function(w){w[w.VDW=1]="VDW",w[w.MS=2]="MS",w[w.SAS=3]="SAS",w[w.SES=4]="SES"})(s||(s={}));var o=!1;function f(w){o=w}(window.navigator.userAgent.indexOf("MSIE ")>=0||window.navigator.userAgent.indexOf("Trident/")>=0)&&(o=!0);class u{constructor(){this.ISDONE=2,this.edgeTable=new Uint32Array([0,0,0,0,0,0,0,2816,0,0,0,1792,0,3328,3584,3840,0,0,0,138,0,21,0,134,0,0,0,652,0,2067,3865,3600,0,0,0,42,0,0,0,294,0,0,21,28,0,3875,1049,3360,0,168,162,170,0,645,2475,2210,0,687,293,172,4010,3747,3497,3232,0,0,0,0,0,69,0,900,0,0,0,1792,138,131,1608,1920,0,81,0,2074,84,85,84,86,0,81,0,3676,330,1105,1881,1616,0,0,0,42,0,69,0,502,0,0,21,3580,138,2035,1273,1520,2816,104,2337,106,840,581,367,102,2816,3695,3429,3180,1898,1635,1385,1120,0,0,0,0,0,0,0,3910,0,0,69,588,42,2083,41,2880,0,0,0,1722,0,2293,4095,3830,0,255,757,764,2538,2291,3065,2800,0,0,81,338,0,3925,1119,3414,84,855,85,340,2130,2899,89,2384,1792,712,194,1162,4036,3781,3535,3270,708,719,197,204,3018,2755,2505,2240,0,0,0,0,168,420,168,1958,162,162,676,2988,170,163,680,928,3328,3096,3328,3642,52,53,1855,1590,2340,2111,2869,2620,298,51,825,560,3584,3584,3090,3482,1668,1941,1183,1430,146,2975,2069,2460,154,915,153,400,3840,3592,3329,3082,1796,1541,1295,1030,2818,2575,2309,2060,778,515,265,0]),this.triTable=[[],[],[],[],[],[],[],[11,9,8],[],[],[],[8,10,9],[],[10,8,11],[9,11,10],[8,10,9,8,11,10],[],[],[],[1,7,3],[],[4,2,0],[],[2,1,7],[],[],[],[2,7,3,2,9,7],[],[1,4,11,1,0,4],[3,8,0,11,9,4,11,10,9],[4,11,9,11,10,9],[],[],[],[5,3,1],[],[],[],[2,5,8,2,1,5],[],[],[2,4,0],[3,2,4],[],[0,9,1,8,10,5,8,11,10],[3,4,0,3,10,4],[5,8,10,8,11,10],[],[3,5,7],[7,1,5],[1,7,3,1,5,7],[],[9,2,0,9,7,2],[0,3,8,1,7,11,1,5,7],[11,1,7,1,5,7],[],[9,1,0,5,3,2,5,7,3],[8,2,5,8,0,2],[2,5,3,5,7,3],[3,9,1,3,8,9,7,11,10,7,10,5],[9,1,0,10,7,11,10,5,7],[3,8,0,7,10,5,7,11,10],[11,5,7,11,10,5],[],[],[],[],[],[0,6,2],[],[7,2,9,7,9,8],[],[],[],[8,10,9],[7,1,3],[7,1,0],[6,9,3,6,10,9],[7,10,8,10,9,8],[],[6,0,4],[],[11,1,4,11,3,1],[2,4,6],[2,0,4,2,4,6],[2,4,6],[1,4,2,4,6,2],[],[6,0,4],[],[2,11,3,6,9,4,6,10,9],[8,6,1,8,1,3],[10,0,6,0,4,6],[8,0,3,9,6,10,9,4,6],[10,4,6,10,9,4],[],[],[],[5,3,1],[],[0,6,2],[],[7,4,8,5,2,1,5,6,2],[],[],[2,4,0],[7,4,8,2,11,3,10,5,6],[7,1,3],[5,6,10,0,9,1,8,7,4],[5,6,10,7,0,3,7,4,0],[10,5,6,4,8,7],[9,11,8],[3,5,6],[0,5,11,0,11,8],[6,3,5,3,1,5],[3,9,6,3,8,9],[9,6,0,6,2,0],[0,3,8,2,5,6,2,1,5],[1,6,2,1,5,6],[9,11,8],[1,0,9,6,10,5,11,3,2],[6,10,5,2,8,0,2,11,8],[3,2,11,10,5,6],[10,5,6,9,3,8,9,1,3],[0,9,1,5,6,10],[8,0,3,10,5,6],[10,5,6],[],[],[],[],[],[],[],[1,10,2,9,11,6,9,8,11],[],[],[6,0,2],[3,6,9,3,2,6],[3,5,1],[0,5,1,0,11,5],[0,3,5],[6,9,11,9,8,11],[],[],[],[4,5,9,7,1,10,7,3,1],[],[11,6,7,2,4,5,2,0,4],[11,6,7,8,0,3,1,10,2,9,4,5],[6,7,11,1,10,2,9,4,5],[],[4,1,0,4,5,1,6,7,3,6,3,2],[9,4,5,0,6,7,0,2,6],[4,5,9,6,3,2,6,7,3],[6,7,11,5,3,8,5,1,3],[6,7,11,4,1,0,4,5,1],[4,5,9,3,8,0,11,6,7],[9,4,5,7,11,6],[],[],[0,6,4],[8,6,4,8,1,6],[],[0,10,2,0,9,10,4,8,11,4,11,6],[10,2,1,6,0,3,6,4,0],[10,2,1,11,4,8,11,6,4],[4,2,6],[1,0,9,2,4,8,2,6,4],[2,4,0,2,6,4],[8,2,4,2,6,4],[11,4,1,11,6,4],[0,9,1,4,11,6,4,8,11],[3,6,0,6,4,0],[8,6,4,8,11,6],[10,8,9],[6,3,9,6,7,3],[6,7,1],[10,7,1,7,3,1],[7,11,6,8,10,2,8,9,10],[11,6,7,10,0,9,10,2,0],[2,1,10,7,11,6,8,0,3],[1,10,2,6,7,11],[7,2,6,7,9,2],[1,0,9,3,6,7,3,2,6],[7,0,6,0,2,6],[2,7,3,2,6,7],[7,11,6,3,9,1,3,8,9],[9,1,0,11,6,7],[0,3,8,11,6,7],[11,6,7],[],[],[],[],[5,3,7],[8,5,2,8,7,5],[5,3,7],[1,10,2,5,8,7,5,9,8],[1,7,5],[1,7,5],[9,2,7,9,7,5],[11,3,2,8,5,9,8,7,5],[1,3,7,1,7,5],[0,7,1,7,5,1],[9,3,5,3,7,5],[9,7,5,9,8,7],[8,10,11],[3,4,10,3,10,11],[8,10,11],[5,9,4,1,11,3,1,10,11],[2,4,5],[5,2,4,2,0,4],[0,3,8,5,9,4,10,2,1],[2,1,10,9,4,5],[2,8,5,2,11,8],[3,2,11,1,4,5,1,0,4],[9,4,5,8,2,11,8,0,2],[11,3,2,9,4,5],[8,5,3,5,1,3],[5,0,4,5,1,0],[3,8,0,4,5,9],[9,4,5],[11,9,10],[11,9,10],[1,11,4,1,10,11],[8,7,4,11,1,10,11,3,1],[2,7,9,2,9,10],[4,8,7,0,10,2,0,9,10],[2,1,10,0,7,4,0,3,7],[10,2,1,8,7,4],[1,7,4],[3,2,11,4,8,7,9,1,0],[11,4,2,4,0,2],[2,11,3,7,4,8],[4,1,7,1,3,7],[1,0,9,8,7,4],[3,4,0,3,7,4],[8,7,4],[8,9,10,8,10,11],[3,9,11,9,10,11],[0,10,8,10,11,8],[10,3,1,10,11,3],[2,8,10,8,9,10],[9,2,0,9,10,2],[8,0,3,1,10,2],[10,2,1],[1,11,9,11,8,9],[11,3,2,0,9,1],[11,0,2,11,8,0],[11,3,2],[8,1,3,8,9,1],[9,1,0],[8,0,3],[]],this.edgeTable2=[0,265,515,778,2060,2309,2575,2822,1030,1295,1541,1804,3082,3331,3593,3840,400,153,915,666,2460,2197,2975,2710,1430,1183,1941,1692,3482,3219,3993,3728,560,825,51,314,2620,2869,2111,2358,1590,1855,1077,1340,3642,3891,3129,3376,928,681,419,170,2988,2725,2479,2214,1958,1711,1445,1196,4010,3747,3497,3232,2240,2505,2755,3018,204,453,719,966,3270,3535,3781,4044,1226,1475,1737,1984,2384,2137,2899,2650,348,85,863,598,3414,3167,3925,3676,1370,1107,1881,1616,2800,3065,2291,2554,764,1013,255,502,3830,4095,3317,3580,1786,2035,1273,1520,2912,2665,2403,2154,876,613,367,102,3942,3695,3429,3180,1898,1635,1385,1120,1120,1385,1635,1898,3180,3429,3695,3942,102,367,613,876,2154,2403,2665,2912,1520,1273,2035,1786,3580,3317,4095,3830,502,255,1013,764,2554,2291,3065,2800,1616,1881,1107,1370,3676,3925,3167,3414,598,863,85,348,2650,2899,2137,2384,1984,1737,1475,1226,4044,3781,3535,3270,966,719,453,204,3018,2755,2505,2240,3232,3497,3747,4010,1196,1445,1711,1958,2214,2479,2725,2988,170,419,681,928,3376,3129,3891,3642,1340,1077,1855,1590,2358,2111,2869,2620,314,51,825,560,3728,3993,3219,3482,1692,1941,1183,1430,2710,2975,2197,2460,666,915,153,400,3840,3593,3331,3082,1804,1541,1295,1030,2822,2575,2309,2060,778,515,265,0],this.triTable2=[[],[8,3,0],[9,0,1],[8,3,1,8,1,9],[11,2,3],[11,2,0,11,0,8],[11,2,3,0,1,9],[2,1,11,1,9,11,11,9,8],[10,1,2],[8,3,0,1,2,10],[9,0,2,9,2,10],[3,2,8,2,10,8,8,10,9],[10,1,3,10,3,11],[1,0,10,0,8,10,10,8,11],[0,3,9,3,11,9,9,11,10],[8,10,9,8,11,10],[8,4,7],[3,0,4,3,4,7],[1,9,0,8,4,7],[9,4,1,4,7,1,1,7,3],[2,3,11,7,8,4],[7,11,4,11,2,4,4,2,0],[3,11,2,4,7,8,9,0,1],[2,7,11,2,1,7,1,4,7,1,9,4],[10,1,2,8,4,7],[2,10,1,0,4,7,0,7,3],[4,7,8,0,2,10,0,10,9],[2,7,3,2,9,7,7,9,4,2,10,9],[8,4,7,11,10,1,11,1,3],[11,4,7,1,4,11,1,11,10,1,0,4],[3,8,0,7,11,4,11,9,4,11,10,9],[7,11,4,4,11,9,11,10,9],[9,5,4],[3,0,8,4,9,5],[5,4,0,5,0,1],[4,8,5,8,3,5,5,3,1],[11,2,3,9,5,4],[9,5,4,8,11,2,8,2,0],[3,11,2,1,5,4,1,4,0],[8,5,4,2,5,8,2,8,11,2,1,5],[2,10,1,9,5,4],[0,8,3,5,4,9,10,1,2],[10,5,2,5,4,2,2,4,0],[3,4,8,3,2,4,2,5,4,2,10,5],[5,4,9,1,3,11,1,11,10],[0,9,1,4,8,5,8,10,5,8,11,10],[3,4,0,3,10,4,4,10,5,3,11,10],[4,8,5,5,8,10,8,11,10],[9,5,7,9,7,8],[0,9,3,9,5,3,3,5,7],[8,0,7,0,1,7,7,1,5],[1,7,3,1,5,7],[11,2,3,8,9,5,8,5,7],[9,2,0,9,7,2,2,7,11,9,5,7],[0,3,8,2,1,11,1,7,11,1,5,7],[2,1,11,11,1,7,1,5,7],[1,2,10,5,7,8,5,8,9],[9,1,0,10,5,2,5,3,2,5,7,3],[5,2,10,8,2,5,8,5,7,8,0,2],[10,5,2,2,5,3,5,7,3],[3,9,1,3,8,9,7,11,10,7,10,5],[9,1,0,10,7,11,10,5,7],[3,8,0,7,10,5,7,11,10],[11,5,7,11,10,5],[11,7,6],[0,8,3,11,7,6],[9,0,1,11,7,6],[7,6,11,3,1,9,3,9,8],[2,3,7,2,7,6],[8,7,0,7,6,0,0,6,2],[1,9,0,3,7,6,3,6,2],[7,6,2,7,2,9,2,1,9,7,9,8],[1,2,10,6,11,7],[2,10,1,7,6,11,8,3,0],[11,7,6,10,9,0,10,0,2],[7,6,11,3,2,8,8,2,10,8,10,9],[6,10,7,10,1,7,7,1,3],[6,10,1,6,1,7,7,1,0,7,0,8],[9,0,3,6,9,3,6,10,9,6,3,7],[6,10,7,7,10,8,10,9,8],[8,4,6,8,6,11],[11,3,6,3,0,6,6,0,4],[0,1,9,4,6,11,4,11,8],[1,9,4,11,1,4,11,3,1,11,4,6],[3,8,2,8,4,2,2,4,6],[2,0,4,2,4,6],[1,9,0,3,8,2,2,8,4,2,4,6],[9,4,1,1,4,2,4,6,2],[10,1,2,11,8,4,11,4,6],[10,1,2,11,3,6,6,3,0,6,0,4],[0,2,10,0,10,9,4,11,8,4,6,11],[2,11,3,6,9,4,6,10,9],[8,4,6,8,6,1,6,10,1,8,1,3],[1,0,10,10,0,6,0,4,6],[8,0,3,9,6,10,9,4,6],[10,4,6,10,9,4],[9,5,4,7,6,11],[4,9,5,3,0,8,11,7,6],[6,11,7,4,0,1,4,1,5],[6,11,7,4,8,5,5,8,3,5,3,1],[4,9,5,6,2,3,6,3,7],[9,5,4,8,7,0,0,7,6,0,6,2],[4,0,1,4,1,5,6,3,7,6,2,3],[7,4,8,5,2,1,5,6,2],[6,11,7,1,2,10,9,5,4],[11,7,6,8,3,0,1,2,10,9,5,4],[11,7,6,10,5,2,2,5,4,2,4,0],[7,4,8,2,11,3,10,5,6],[4,9,5,6,10,7,7,10,1,7,1,3],[5,6,10,0,9,1,8,7,4],[5,6,10,7,0,3,7,4,0],[10,5,6,4,8,7],[5,6,9,6,11,9,9,11,8],[0,9,5,0,5,3,3,5,6,3,6,11],[0,1,5,0,5,11,5,6,11,0,11,8],[11,3,6,6,3,5,3,1,5],[9,5,6,3,9,6,3,8,9,3,6,2],[5,6,9,9,6,0,6,2,0],[0,3,8,2,5,6,2,1,5],[1,6,2,1,5,6],[1,2,10,5,6,9,9,6,11,9,11,8],[1,0,9,6,10,5,11,3,2],[6,10,5,2,8,0,2,11,8],[3,2,11,10,5,6],[10,5,6,9,3,8,9,1,3],[0,9,1,5,6,10],[8,0,3,10,5,6],[10,5,6],[10,6,5],[8,3,0,10,6,5],[0,1,9,5,10,6],[10,6,5,9,8,3,9,3,1],[3,11,2,10,6,5],[6,5,10,2,0,8,2,8,11],[1,9,0,6,5,10,11,2,3],[1,10,2,5,9,6,9,11,6,9,8,11],[1,2,6,1,6,5],[0,8,3,2,6,5,2,5,1],[5,9,6,9,0,6,6,0,2],[9,6,5,3,6,9,3,9,8,3,2,6],[11,6,3,6,5,3,3,5,1],[0,5,1,0,11,5,5,11,6,0,8,11],[0,5,9,0,3,5,3,6,5,3,11,6],[5,9,6,6,9,11,9,8,11],[10,6,5,4,7,8],[5,10,6,7,3,0,7,0,4],[5,10,6,0,1,9,8,4,7],[4,5,9,6,7,10,7,1,10,7,3,1],[7,8,4,2,3,11,10,6,5],[11,6,7,10,2,5,2,4,5,2,0,4],[11,6,7,8,0,3,1,10,2,9,4,5],[6,7,11,1,10,2,9,4,5],[7,8,4,5,1,2,5,2,6],[4,1,0,4,5,1,6,7,3,6,3,2],[9,4,5,8,0,7,0,6,7,0,2,6],[4,5,9,6,3,2,6,7,3],[6,7,11,4,5,8,5,3,8,5,1,3],[6,7,11,4,1,0,4,5,1],[4,5,9,3,8,0,11,6,7],[9,4,5,7,11,6],[10,6,4,10,4,9],[8,3,0,9,10,6,9,6,4],[1,10,0,10,6,0,0,6,4],[8,6,4,8,1,6,6,1,10,8,3,1],[2,3,11,6,4,9,6,9,10],[0,10,2,0,9,10,4,8,11,4,11,6],[10,2,1,11,6,3,6,0,3,6,4,0],[10,2,1,11,4,8,11,6,4],[9,1,4,1,2,4,4,2,6],[1,0,9,3,2,8,2,4,8,2,6,4],[2,4,0,2,6,4],[3,2,8,8,2,4,2,6,4],[1,4,9,11,4,1,11,1,3,11,6,4],[0,9,1,4,11,6,4,8,11],[11,6,3,3,6,0,6,4,0],[8,6,4,8,11,6],[6,7,10,7,8,10,10,8,9],[9,3,0,6,3,9,6,9,10,6,7,3],[6,1,10,6,7,1,7,0,1,7,8,0],[6,7,10,10,7,1,7,3,1],[7,11,6,3,8,2,8,10,2,8,9,10],[11,6,7,10,0,9,10,2,0],[2,1,10,7,11,6,8,0,3],[1,10,2,6,7,11],[7,2,6,7,9,2,2,9,1,7,8,9],[1,0,9,3,6,7,3,2,6],[8,0,7,7,0,6,0,2,6],[2,7,3,2,6,7],[7,11,6,3,9,1,3,8,9],[9,1,0,11,6,7],[0,3,8,11,6,7],[11,6,7],[11,7,5,11,5,10],[3,0,8,7,5,10,7,10,11],[9,0,1,10,11,7,10,7,5],[3,1,9,3,9,8,7,10,11,7,5,10],[10,2,5,2,3,5,5,3,7],[5,10,2,8,5,2,8,7,5,8,2,0],[9,0,1,10,2,5,5,2,3,5,3,7],[1,10,2,5,8,7,5,9,8],[2,11,1,11,7,1,1,7,5],[0,8,3,2,11,1,1,11,7,1,7,5],[9,0,2,9,2,7,2,11,7,9,7,5],[11,3,2,8,5,9,8,7,5],[1,3,7,1,7,5],[8,7,0,0,7,1,7,5,1],[0,3,9,9,3,5,3,7,5],[9,7,5,9,8,7],[4,5,8,5,10,8,8,10,11],[3,0,4,3,4,10,4,5,10,3,10,11],[0,1,9,4,5,8,8,5,10,8,10,11],[5,9,4,1,11,3,1,10,11],[3,8,4,3,4,2,2,4,5,2,5,10],[10,2,5,5,2,4,2,0,4],[0,3,8,5,9,4,10,2,1],[2,1,10,9,4,5],[8,4,5,2,8,5,2,11,8,2,5,1],[3,2,11,1,4,5,1,0,4],[9,4,5,8,2,11,8,0,2],[11,3,2,9,4,5],[4,5,8,8,5,3,5,1,3],[5,0,4,5,1,0],[3,8,0,4,5,9],[9,4,5],[7,4,11,4,9,11,11,9,10],[3,0,8,7,4,11,11,4,9,11,9,10],[11,7,4,1,11,4,1,10,11,1,4,0],[8,7,4,11,1,10,11,3,1],[2,3,7,2,7,9,7,4,9,2,9,10],[4,8,7,0,10,2,0,9,10],[2,1,10,0,7,4,0,3,7],[10,2,1,8,7,4],[2,11,7,2,7,1,1,7,4,1,4,9],[3,2,11,4,8,7,9,1,0],[7,4,11,11,4,2,4,0,2],[2,11,3,7,4,8],[9,1,4,4,1,7,1,3,7],[1,0,9,8,7,4],[3,4,0,3,7,4],[8,7,4],[8,9,10,8,10,11],[0,9,3,3,9,11,9,10,11],[1,10,0,0,10,8,10,11,8],[10,3,1,10,11,3],[3,8,2,2,8,10,8,9,10],[9,2,0,9,10,2],[8,0,3,1,10,2],[10,2,1],[2,11,1,1,11,9,11,8,9],[11,3,2,0,9,1],[11,0,2,11,8,0],[11,3,2],[8,1,3,8,9,1],[9,1,0],[8,0,3],[]]}march(A,D,I,y){let l=!!y.fulltable,c=y.hasOwnProperty("origin")&&y.origin.hasOwnProperty("x")?y.origin:{x:0,y:0,z:0},L=!!y.voxel,R=y.matrix,F=y.nX||0,$=y.nY||0,b=y.nZ||0,k=y.scale||1,B=null;y.unitCube?B=y.unitCube:B={x:k,y:k,z:k};let J=new Int32Array(F*$*b),X,ae;for(X=0,ae=J.length;X<ae;++X)J[X]=-1;let He=function(we,Ze,it,lt,Vt,_e){let pr={x:0,y:0,z:0},_s=!!(lt&1<<Vt),Ei=!!(lt&1<<_e),Bl=Vt;if(!_s&&Ei&&(Bl=_e),Bl&1&&it++,Bl&2&&Ze++,Bl&4&&we++,R){let Ep=new a.Vector3(we,Ze,it);Ep=Ep.applyMatrix4(R),pr={x:Ep.x,y:Ep.y,z:Ep.z}}else pr.x=c.x+B.x*we,pr.y=c.y+B.y*Ze,pr.z=c.z+B.z*it;let Wl=($*we+Ze)*b+it;return L?(D.push(pr),D.length-1):(J[Wl]<0&&(J[Wl]=D.length,D.push(pr)),J[Wl])},Pe=new Int32Array(12),ue=l?this.edgeTable2:this.edgeTable,Oe=l?this.triTable2:this.triTable;for(X=0;X<F-1;++X)for(let we=0;we<$-1;++we)for(let Ze=0;Ze<b-1;++Ze){let it=0;for(let _e=0;_e<8;++_e){let pr=($*(X+((_e&4)>>2))+we+((_e&2)>>1))*b+Ze+(_e&1),_s=!!(A[pr]&this.ISDONE);it|=_s<<_e}if(it===0||it===255)continue;let lt=ue[it];if(lt===0)continue;let Vt=Oe[it];lt&1&&(Pe[0]=He(X,we,Ze,it,0,1)),lt&2&&(Pe[1]=He(X,we,Ze,it,1,3)),lt&4&&(Pe[2]=He(X,we,Ze,it,3,2)),lt&8&&(Pe[3]=He(X,we,Ze,it,2,0)),lt&16&&(Pe[4]=He(X,we,Ze,it,4,5)),lt&32&&(Pe[5]=He(X,we,Ze,it,5,7)),lt&64&&(Pe[6]=He(X,we,Ze,it,7,6)),lt&128&&(Pe[7]=He(X,we,Ze,it,6,4)),lt&256&&(Pe[8]=He(X,we,Ze,it,0,4)),lt&512&&(Pe[9]=He(X,we,Ze,it,1,5)),lt&1024&&(Pe[10]=He(X,we,Ze,it,3,7)),lt&2048&&(Pe[11]=He(X,we,Ze,it,2,6));for(let _e=0;_e<Vt.length;_e+=3){let pr=Pe[Vt[_e]],_s=Pe[Vt[_e+1]],Ei=Pe[Vt[_e+2]];L&&_e>=3&&(D.push(D[pr]),pr=D.length-1,D.push(D[_s]),_s=D.length-1,D.push(D[Ei]),Ei=D.length-1),I.push(pr),I.push(_s),I.push(Ei)}}}laplacianSmooth(A,D,I){let y=new Array(D.length),l,c,L,R,F;for(l=0,c=D.length;l<c;l++)y[l]={x:0,y:0,z:0};let $=new Array(20),b;for(l=0;l<20;l++)$[l]=new Array(D.length);for(l=0,c=D.length;l<c;l++)$[0][l]=0;for(l=0,c=I.length/3;l<c;l++){let J=l*3,X=l*3+1,ae=l*3+2;for(b=!0,L=0,R=$[0][I[J]];L<R;L++)if(I[X]==$[L+1][I[J]]){b=!1;break}for(b&&($[0][I[J]]++,$[$[0][I[J]]][I[J]]=I[X]),b=!0,L=0,R=$[0][I[J]];L<R;L++)if(I[ae]==$[L+1][I[J]]){b=!1;break}for(b&&($[0][I[J]]++,$[$[0][I[J]]][I[J]]=I[ae]),b=!0,L=0,R=$[0][I[X]];L<R;L++)if(I[J]==$[L+1][I[X]]){b=!1;break}for(b&&($[0][I[X]]++,$[$[0][I[X]]][I[X]]=I[J]),b=!0,L=0,R=$[0][I[X]];L<R;L++)if(I[ae]==$[L+1][I[X]]){b=!1;break}for(b&&($[0][I[X]]++,$[$[0][I[X]]][I[X]]=I[ae]),b=!0,L=0;L<$[0][I[ae]];L++)if(I[J]==$[L+1][I[ae]]){b=!1;break}for(b&&($[0][I[ae]]++,$[$[0][I[ae]]][I[ae]]=I[J]),b=!0,L=0,R=$[0][I[ae]];L<R;L++)if(I[X]==$[L+1][I[ae]]){b=!1;break}b&&($[0][I[ae]]++,$[$[0][I[ae]]][I[ae]]=I[X])}let k=1,B=.5;for(F=0;F<A;F++){for(l=0,c=D.length;l<c;l++)if($[0][l]<3)y[l].x=D[l].x,y[l].y=D[l].y,y[l].z=D[l].z;else if($[0][l]==3||$[0][l]==4){for(y[l].x=0,y[l].y=0,y[l].z=0,L=0,R=$[0][l];L<R;L++)y[l].x+=D[$[L+1][l]].x,y[l].y+=D[$[L+1][l]].y,y[l].z+=D[$[L+1][l]].z;y[l].x+=B*D[l].x,y[l].y+=B*D[l].y,y[l].z+=B*D[l].z,y[l].x/=B+$[0][l],y[l].y/=B+$[0][l],y[l].z/=B+$[0][l]}else{for(y[l].x=0,y[l].y=0,y[l].z=0,L=0,R=$[0][l];L<R;L++)y[l].x+=D[$[L+1][l]].x,y[l].y+=D[$[L+1][l]].y,y[l].z+=D[$[L+1][l]].z;y[l].x+=k*D[l].x,y[l].y+=k*D[l].y,y[l].z+=k*D[l].z,y[l].x/=k+$[0][l],y[l].y/=k+$[0][l],y[l].z/=k+$[0][l]}for(l=0,c=D.length;l<c;l++)D[l].x=y[l].x,D[l].y=y[l].y,D[l].z=y[l].z}}}let h=new u;class x{constructor(A,D,I){this.data=new Int32Array(A*D*I*3),this.width=D,this.height=I}set(A,D,I,y){let l=((A*this.width+D)*this.height+I)*3;this.data[l]=y.ix,this.data[l+1]=y.iy,this.data[l+2]=y.iz}get(A,D,I){let y=((A*this.width+D)*this.height+I)*3;return{ix:this.data[y],iy:this.data[y+1],iz:this.data[y+2]}}}class m{constructor(){this.INOUT=1,this.ISDONE=2,this.ISBOUND=4,this.ptranx=0,this.ptrany=0,this.ptranz=0,this.probeRadius=1.4,this.defaultScaleFactor=2,this.scaleFactor=this.defaultScaleFactor,this.pHeight=0,this.pWidth=0,this.pLength=0,this.cutRadius=0,this.vpBits=null,this.vpDistance=null,this.vpAtomID=null,this.pminx=0,this.pminy=0,this.pminz=0,this.pmaxx=0,this.pmaxy=0,this.pmaxz=0,this.depty={},this.widxz={},this.faces=[],this.verts=[],this.vdwRadii={H:1.2,Li:1.82,Na:2.27,K:2.75,C:1.7,N:1.55,O:1.52,F:1.47,P:1.8,S:1.8,CL:1.75,BR:1.85,SE:1.9,ZN:1.39,CU:1.4,NI:1.63,X:2},this.nb=[new Int32Array([1,0,0]),new Int32Array([-1,0,0]),new Int32Array([0,1,0]),new Int32Array([0,-1,0]),new Int32Array([0,0,1]),new Int32Array([0,0,-1]),new Int32Array([1,1,0]),new Int32Array([1,-1,0]),new Int32Array([-1,1,0]),new Int32Array([-1,-1,0]),new Int32Array([1,0,1]),new Int32Array([1,0,-1]),new Int32Array([-1,0,1]),new Int32Array([-1,0,-1]),new Int32Array([0,1,1]),new Int32Array([0,1,-1]),new Int32Array([0,-1,1]),new Int32Array([0,-1,-1]),new Int32Array([1,1,1]),new Int32Array([1,1,-1]),new Int32Array([1,-1,1]),new Int32Array([-1,1,1]),new Int32Array([1,-1,-1]),new Int32Array([-1,-1,1]),new Int32Array([-1,1,-1]),new Int32Array([-1,-1,-1])],m.MarchingCube||(m.MarchingCube=new u)}getVDWIndex(A){return!A.elem||typeof this.vdwRadii[A.elem]>"u"?"X":A.elem}getFacesAndVertices(A){let D={};for(let l=0,c=A.length;l<c;l++)D[A[l]]=!0;let I=this.verts;for(let l=0,c=I.length;l<c;l++)I[l].x=I[l].x/this.scaleFactor-this.ptranx,I[l].y=I[l].y/this.scaleFactor-this.ptrany,I[l].z=I[l].z/this.scaleFactor-this.ptranz;let y=[];for(let l=0,c=this.faces.length;l<c;l+=3){let L=this.faces[l],R=this.faces[l+1],F=this.faces[l+2],$=I[L].atomid,b=I[R].atomid,k=I[F].atomid,B=$;b<B&&(B=b),k<B&&(B=k),D[B]&&L!==R&&R!==F&&L!==F&&(y.push(L),y.push(R),y.push(F))}return this.vpBits=null,this.vpDistance=null,this.vpAtomID=null,{vertices:I,faces:y}}initparm(A,D,I){I>1e6&&(this.scaleFactor=this.defaultScaleFactor/2);let y=1/this.scaleFactor*5.5;this.pminx=A[0][0],this.pmaxx=A[1][0],this.pminy=A[0][1],this.pmaxy=A[1][1],this.pminz=A[0][2],this.pmaxz=A[1][2],D?(this.pminx-=this.probeRadius+y,this.pminy-=this.probeRadius+y,this.pminz-=this.probeRadius+y,this.pmaxx+=this.probeRadius+y,this.pmaxy+=this.probeRadius+y,this.pmaxz+=this.probeRadius+y):(this.pminx-=y,this.pminy-=y,this.pminz-=y,this.pmaxx+=y,this.pmaxy+=y,this.pmaxz+=y),this.pminx=Math.floor(this.pminx*this.scaleFactor)/this.scaleFactor,this.pminy=Math.floor(this.pminy*this.scaleFactor)/this.scaleFactor,this.pminz=Math.floor(this.pminz*this.scaleFactor)/this.scaleFactor,this.pmaxx=Math.ceil(this.pmaxx*this.scaleFactor)/this.scaleFactor,this.pmaxy=Math.ceil(this.pmaxy*this.scaleFactor)/this.scaleFactor,this.pmaxz=Math.ceil(this.pmaxz*this.scaleFactor)/this.scaleFactor,this.ptranx=-this.pminx,this.ptrany=-this.pminy,this.ptranz=-this.pminz,this.pLength=Math.ceil(this.scaleFactor*(this.pmaxx-this.pminx))+1,this.pWidth=Math.ceil(this.scaleFactor*(this.pmaxy-this.pminy))+1,this.pHeight=Math.ceil(this.scaleFactor*(this.pmaxz-this.pminz))+1,this.boundingatom(D),this.cutRadius=this.probeRadius*this.scaleFactor,this.vpBits=new Uint8Array(this.pLength*this.pWidth*this.pHeight),this.vpDistance=new Float64Array(this.pLength*this.pWidth*this.pHeight),this.vpAtomID=new Int32Array(this.pLength*this.pWidth*this.pHeight)}boundingatom(A){let D={};for(const I in this.vdwRadii){let y=this.vdwRadii[I];A?D[I]=(y+this.probeRadius)*this.scaleFactor+.5:D[I]=y*this.scaleFactor+.5;let l=D[I]*D[I];this.widxz[I]=Math.floor(D[I])+1,this.depty[I]=new Int32Array(this.widxz[I]*this.widxz[I]);let c=0;for(let L=0;L<this.widxz[I];L++)for(let R=0;R<this.widxz[I];R++){let F=L*L+R*R;if(F>l)this.depty[I][c]=-1;else{let $=Math.sqrt(l-F);this.depty[I][c]=Math.floor($)}c++}}}fillvoxels(A,D){for(let I=0,y=this.vpBits.length;I<y;I++)this.vpBits[I]=0,this.vpDistance[I]=-1,this.vpAtomID[I]=-1;for(let I in D){let y=A[D[I]];y!==void 0&&this.fillAtom(y,A)}for(let I=0,y=this.vpBits.length;I<y;I++)this.vpBits[I]&this.INOUT&&(this.vpBits[I]|=this.ISDONE)}fillAtom(A,D){let I=Math.floor(.5+this.scaleFactor*(A.x+this.ptranx)),y=Math.floor(.5+this.scaleFactor*(A.y+this.ptrany)),l=Math.floor(.5+this.scaleFactor*(A.z+this.ptranz)),c=this.getVDWIndex(A),L=0,R=this.pWidth*this.pHeight;for(let F=0,$=this.widxz[c];F<$;F++)for(let b=0;b<$;b++){if(this.depty[c][L]!=-1){for(let k=-1;k<2;k++)for(let B=-1;B<2;B++)for(let J=-1;J<2;J++)if(k!==0&&B!==0&&J!==0){let X=k*F,ae=J*b;for(let He=0;He<=this.depty[c][L];He++){let Pe=He*B,ue=I+X,Oe=y+Pe,we=l+ae;if(ue<0||Oe<0||we<0||ue>=this.pLength||Oe>=this.pWidth||we>=this.pHeight)continue;let Ze=ue*R+Oe*this.pHeight+we;if(!(this.vpBits[Ze]&this.INOUT))this.vpBits[Ze]|=this.INOUT,this.vpAtomID[Ze]=A.serial;else{let it=D[this.vpAtomID[Ze]];if(it.serial!=A.serial){let lt=I+X-Math.floor(.5+this.scaleFactor*(it.x+this.ptranx)),Vt=y+Pe-Math.floor(.5+this.scaleFactor*(it.y+this.ptrany)),_e=l+ae-Math.floor(.5+this.scaleFactor*(it.z+this.ptranz));X*X+Pe*Pe+ae*ae<lt*lt+Vt*Vt+_e*_e&&(this.vpAtomID[Ze]=A.serial)}}}}}L++}}fillvoxelswaals(A,D){for(let I=0,y=this.vpBits.length;I<y;I++)this.vpBits[I]&=~this.ISDONE;for(let I in D){let y=A[D[I]];y!==void 0&&this.fillAtomWaals(y,A)}}fillAtomWaals(A,D){let I=0,y=Math.floor(.5+this.scaleFactor*(A.x+this.ptranx)),l=Math.floor(.5+this.scaleFactor*(A.y+this.ptrany)),c=Math.floor(.5+this.scaleFactor*(A.z+this.ptranz)),L=this.getVDWIndex(A),R=this.pWidth*this.pHeight;for(let F=0,$=this.widxz[L];F<$;F++)for(let b=0;b<$;b++){if(this.depty[L][I]!=-1){for(let k=-1;k<2;k++)for(let B=-1;B<2;B++)for(let J=-1;J<2;J++)if(k!==0&&B!==0&&J!==0){let X=k*F,ae=J*b;for(let He=0;He<=this.depty[L][I];He++){let Pe=He*B,ue=y+X,Oe=l+Pe,we=c+ae;if(ue<0||Oe<0||we<0||ue>=this.pLength||Oe>=this.pWidth||we>=this.pHeight)continue;let Ze=ue*R+Oe*this.pHeight+we;if(!(this.vpBits[Ze]&this.ISDONE))this.vpBits[Ze]|=this.ISDONE,this.vpAtomID[Ze]=A.serial;else{let it=D[this.vpAtomID[Ze]];if(it.serial!=A.serial){let lt=y+X-Math.floor(.5+this.scaleFactor*(it.x+this.ptranx)),Vt=l+Pe-Math.floor(.5+this.scaleFactor*(it.y+this.ptrany)),_e=c+ae-Math.floor(.5+this.scaleFactor*(it.z+this.ptranz));X*X+Pe*Pe+ae*ae<lt*lt+Vt*Vt+_e*_e&&(this.vpAtomID[Ze]=A.serial)}}}}}I++}}buildboundary(){let A=this.pWidth*this.pHeight;for(let D=0;D<this.pLength;D++)for(let I=0;I<this.pHeight;I++)for(let y=0;y<this.pWidth;y++){let l=D*A+y*this.pHeight+I;if(this.vpBits[l]&this.INOUT){let c=0;for(;c<26;){let L=D+this.nb[c][0],R=I+this.nb[c][2],F=y+this.nb[c][1];if(L>-1&&L<this.pLength&&F>-1&&F<this.pWidth&&R>-1&&R<this.pHeight&&!(this.vpBits[L*A+F*this.pHeight+R]&this.INOUT)){this.vpBits[l]|=this.ISBOUND;break}else c++}}}}fastdistancemap(){let A=new x(this.pLength,this.pWidth,this.pHeight),D=this.pWidth*this.pHeight,I=this.cutRadius*this.cutRadius,y=[],l=[],c;for(let F=0;F<this.pLength;F++)for(let $=0;$<this.pWidth;$++)for(let b=0;b<this.pHeight;b++)if(c=F*D+$*this.pHeight+b,this.vpBits[c]&=~this.ISDONE,this.vpBits[c]&this.INOUT&&this.vpBits[c]&this.ISBOUND){let k={ix:F,iy:$,iz:b};A.set(F,$,b,k),y.push(k),this.vpDistance[c]=0,this.vpBits[c]|=this.ISDONE,this.vpBits[c]&=~this.ISBOUND}do{l=this.fastoneshell(y,A),y=[];for(let F=0,$=l.length;F<$;F++)c=D*l[F].ix+this.pHeight*l[F].iy+l[F].iz,this.vpBits[c]&=~this.ISBOUND,this.vpDistance[c]<=1.0404*I&&y.push({ix:l[F].ix,iy:l[F].iy,iz:l[F].iz})}while(y.length!==0);y=[],l=[],A=null;let L=this.scaleFactor-.5;L<0&&(L=0);let R=I-.5/(.1+L);for(let F=0;F<this.pLength;F++)for(let $=0;$<this.pWidth;$++)for(let b=0;b<this.pHeight;b++)c=F*D+$*this.pHeight+b,this.vpBits[c]&=~this.ISBOUND,this.vpBits[c]&this.INOUT&&(!(this.vpBits[c]&this.ISDONE)||this.vpBits[c]&this.ISDONE&&this.vpDistance[c]>=R)&&(this.vpBits[c]|=this.ISBOUND)}fastoneshell(A,D){let I,y,l,c,L,R,F,$,b,k=[];if(A.length===0)return k;let B={ix:-1,iy:-1,iz:-1},J=this.pWidth*this.pHeight;for(let X=0,ae=A.length;X<ae;X++){I=A[X].ix,y=A[X].iy,l=A[X].iz,$=D.get(I,y,l);for(let He=0;He<6;He++)B.ix=I+this.nb[He][0],B.iy=y+this.nb[He][1],B.iz=l+this.nb[He][2],B.ix<this.pLength&&B.ix>-1&&B.iy<this.pWidth&&B.iy>-1&&B.iz<this.pHeight&&B.iz>-1&&(b=B.ix*J+this.pHeight*B.iy+B.iz,this.vpBits[b]&this.INOUT&&!(this.vpBits[b]&this.ISDONE)?(D.set(B.ix,B.iy,l+this.nb[He][2],$),c=B.ix-$.ix,L=B.iy-$.iy,R=B.iz-$.iz,F=c*c+L*L+R*R,this.vpDistance[b]=F,this.vpBits[b]|=this.ISDONE,this.vpBits[b]|=this.ISBOUND,k.push({ix:B.ix,iy:B.iy,iz:B.iz})):this.vpBits[b]&this.INOUT&&this.vpBits[b]&this.ISDONE&&(c=B.ix-$.ix,L=B.iy-$.iy,R=B.iz-$.iz,F=c*c+L*L+R*R,F<this.vpDistance[b]&&(D.set(B.ix,B.iy,B.iz,$),this.vpDistance[b]=F,this.vpBits[b]&this.ISBOUND||(this.vpBits[b]|=this.ISBOUND,k.push({ix:B.ix,iy:B.iy,iz:B.iz})))))}for(let X=0,ae=A.length;X<ae;X++){I=A[X].ix,y=A[X].iy,l=A[X].iz,$=D.get(I,y,l);for(let He=6;He<18;He++)B.ix=I+this.nb[He][0],B.iy=y+this.nb[He][1],B.iz=l+this.nb[He][2],B.ix<this.pLength&&B.ix>-1&&B.iy<this.pWidth&&B.iy>-1&&B.iz<this.pHeight&&B.iz>-1&&(b=B.ix*J+this.pHeight*B.iy+B.iz,this.vpBits[b]&this.INOUT&&!(this.vpBits[b]&this.ISDONE)?(D.set(B.ix,B.iy,l+this.nb[He][2],$),c=B.ix-$.ix,L=B.iy-$.iy,R=B.iz-$.iz,F=c*c+L*L+R*R,this.vpDistance[b]=F,this.vpBits[b]|=this.ISDONE,this.vpBits[b]|=this.ISBOUND,k.push({ix:B.ix,iy:B.iy,iz:B.iz})):this.vpBits[b]&this.INOUT&&this.vpBits[b]&this.ISDONE&&(c=B.ix-$.ix,L=B.iy-$.iy,R=B.iz-$.iz,F=c*c+L*L+R*R,F<this.vpDistance[b]&&(D.set(B.ix,B.iy,B.iz,$),this.vpDistance[b]=F,this.vpBits[b]&this.ISBOUND||(this.vpBits[b]|=this.ISBOUND,k.push({ix:B.ix,iy:B.iy,iz:B.iz})))))}for(let X=0,ae=A.length;X<ae;X++){I=A[X].ix,y=A[X].iy,l=A[X].iz,$=D.get(I,y,l);for(let He=18;He<26;He++)B.ix=I+this.nb[He][0],B.iy=y+this.nb[He][1],B.iz=l+this.nb[He][2],B.ix<this.pLength&&B.ix>-1&&B.iy<this.pWidth&&B.iy>-1&&B.iz<this.pHeight&&B.iz>-1&&(b=B.ix*J+this.pHeight*B.iy+B.iz,this.vpBits[b]&this.INOUT&&!(this.vpBits[b]&this.ISDONE)?(D.set(B.ix,B.iy,l+this.nb[He][2],$),c=B.ix-$.ix,L=B.iy-$.iy,R=B.iz-$.iz,F=c*c+L*L+R*R,this.vpDistance[b]=F,this.vpBits[b]|=this.ISDONE,this.vpBits[b]|=this.ISBOUND,k.push({ix:B.ix,iy:B.iy,iz:B.iz})):this.vpBits[b]&this.INOUT&&this.vpBits[b]&this.ISDONE&&(c=B.ix-$.ix,L=B.iy-$.iy,R=B.iz-$.iz,F=c*c+L*L+R*R,F<this.vpDistance[b]&&(D.set(B.ix,B.iy,B.iz,$),this.vpDistance[b]=F,this.vpBits[b]&this.ISBOUND||(this.vpBits[b]|=this.ISBOUND,k.push({ix:B.ix,iy:B.iy,iz:B.iz})))))}return k}marchingcubeinit(A){for(let D=0,I=this.vpBits.length;D<I;D++)A==1?this.vpBits[D]&=~this.ISBOUND:A==4?(this.vpBits[D]&=~this.ISDONE,this.vpBits[D]&this.ISBOUND&&(this.vpBits[D]|=this.ISDONE),this.vpBits[D]&=~this.ISBOUND):A==2?this.vpBits[D]&this.ISBOUND&&this.vpBits[D]&this.ISDONE?this.vpBits[D]&=~this.ISBOUND:this.vpBits[D]&this.ISBOUND&&!(this.vpBits[D]&this.ISDONE)&&(this.vpBits[D]|=this.ISDONE):A==3&&(this.vpBits[D]&=~this.ISBOUND)}marchingcube(A){this.marchingcubeinit(A),this.verts=[],this.faces=[],m.MarchingCube.march(this.vpBits,this.verts,this.faces,{smooth:1,nX:this.pLength,nY:this.pWidth,nZ:this.pHeight});let D=this.pWidth*this.pHeight;for(let I=0,y=this.verts.length;I<y;I++)this.verts[I].atomid=this.vpAtomID[this.verts[I].x*D+this.pHeight*this.verts[I].y+this.verts[I].z];m.MarchingCube.laplacianSmooth(1,this.verts,this.faces)}}m.MarchingCube=new u}),"./src/SurfaceWorker.js":(()=>{$3Dmol.workerString=(function(){self.onmessage=function(r){var e=r.data,t=e.type;if(t<0)self.atomData=e.atoms,self.volume=e.volume,self.ps=new ProteinSurface;else{var a=self.ps;a.initparm(e.expandedExtent,t!=1,self.volume),a.fillvoxels(self.atomData,e.extendedAtoms),a.buildboundary(),(t===4||t===2)&&(a.fastdistancemap(),a.boundingatom(!1),a.fillvoxelswaals(self.atomData,e.extendedAtoms)),a.marchingcube(t);var s=a.getFacesAndVertices(e.atomsToShow);self.postMessage(s)}}}).toString().replace(/(^.*?\{|\}$)/g,""),$3Dmol.workerString+=`;
function _classCallCheck() {};`,$3Dmol.workerString+=`;
`+$3Dmol.Vector3.toString(),$3Dmol.workerString+=`;
`+$3Dmol.MarchingCubeInitializer.toString()+`;

`,$3Dmol.workerString+=`;
`+$3Dmol.PointGrid.toString()+`;
`,$3Dmol.workerString+=`;
var ProteinSurface = `+$3Dmol.ProteinSurface.toString()+`;
`,$3Dmol.SurfaceWorker=window.URL?window.URL.createObjectURL(new Blob([$3Dmol.workerString],{type:"text/javascript"})):void 0}),"./src/VolumeData.ts":((r,e,t)=>{t.r(e),t.d(e,{VolumeData:()=>h});var a=t("./src/utilities.ts"),s=t("./src/WebGL/math/index.ts"),o=t("./src/parsers/VASP.ts"),f=t("./src/parsers/CUBE.ts"),u=t("./node_modules/pako/dist/pako.esm.mjs");class h{constructor(m,w,A){if(this.unit={x:1,y:1,z:1},this.origin={x:0,y:0,z:0},this.size={x:0,y:0,z:0},this.data=new Float32Array([]),this.matrix=null,this.inversematrix=null,this.isbinary=new Set(["ccp4","CCP4"]),this.getCoordinates=function(c){var L=c/(this.size.y*this.size.z),R=c%(this.size.y*this.size.z),F=c%this.size.z;return L*=this.unit.x,R*=this.unit.y,F*=this.unit.z,L+=this.origin.x,R+=this.origin.y,F+=this.origin.z,{x:L,y:R,z:F}},this.vasp=function(c){var L=c.replace(/^\s+/,"").split(/[\n\r]/),R=(0,o.VASP)(c)[0],F=R.length;if(F==0){console.warn("No good formating of CHG or CHGCAR file, not atomic information provided in the file."),this.data=[];return}var $=1.889725992,b=.036749309,k=parseFloat(L[1]),B;B=L[2].replace(/^\s+/,"").split(/\s+/);var J=new s.Vector3(parseFloat(B[0]),parseFloat(B[1]),parseFloat(B[2])).multiplyScalar(k*$);B=L[3].replace(/^\s+/,"").split(/\s+/);var X=new s.Vector3(parseFloat(B[0]),parseFloat(B[1]),parseFloat(B[2])).multiplyScalar(k*$);B=L[4].replace(/^\s+/,"").split(/\s+/);var ae=new s.Vector3(parseFloat(B[0]),parseFloat(B[1]),parseFloat(B[2])).multiplyScalar(k*$),He=J.x*(X.y*ae.z-ae.y*X.z)-X.x*(J.y*ae.z-ae.y*J.z)+ae.x*(J.y*X.z-X.y*J.z);He=Math.abs(He)/Math.pow($,3);var Pe=1/He;L.splice(0,8+F+1);var ue=L[0].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),Oe=Math.abs(parseFloat(ue[0])),we=Math.abs(parseFloat(ue[1])),Ze=Math.abs(parseFloat(ue[2])),it=this.origin=new s.Vector3(0,0,0);this.size={x:Oe,y:we,z:Ze},this.unit=new s.Vector3(J.x,X.y,ae.z),J=J.multiplyScalar(1/($*Oe)),X=X.multiplyScalar(1/($*we)),ae=ae.multiplyScalar(1/($*Ze)),(J.y!=0||J.z!=0||X.x!=0||X.z!=0||ae.x!=0||ae.y!=0)&&(this.matrix=new s.Matrix4(J.x,X.x,ae.x,0,J.y,X.y,ae.y,0,J.z,X.z,ae.z,0,0,0,0,1),this.matrix=this.matrix.multiplyMatrices(this.matrix,new s.Matrix4().makeTranslation(it.x,it.y,it.z)),this.origin=new s.Vector3(0,0,0),this.unit=new s.Vector3(1,1,1)),L.splice(0,1);var lt=L.join(" ");lt=lt.replace(/^\s+/,"");var Vt=lt.split(/[\s\r]+/);Vt.splice(Oe*we*Ze+1);for(var _e=Float32Array.from(Vt,parseFloat),pr=0;pr<_e.length;pr++)_e[pr]=_e[pr]*Pe*b;this.data=_e},this.dx=function(c){var L=c.split(/[\n\r]+/),R,F=/gridpositions\s+counts\s+(\d+)\s+(\d+)\s+(\d+)/,$=/^origin\s+(\S+)\s+(\S+)\s+(\S+)/,b=/^delta\s+(\S+)\s+(\S+)\s+(\S+)/,k=/data follows/,B=0;for(B=0;B<L.length;B++){var J=L[B];if(R=F.exec(J)){var X=parseInt(R[1]),ae=parseInt(R[2]),He=parseInt(R[3]);this.size={x:X,y:ae,z:He}}else if(R=b.exec(J)){var Pe=parseFloat(R[1]);if((parseFloat(R[2])!=0||parseFloat(R[3])!=0)&&console.warn("Non-orthogonal delta matrix not currently supported in dx format"),B+=1,J=L[B],R=b.exec(J),R==null){console.error("Parse error in dx delta matrix");return}var ue=parseFloat(R[2]);if((parseFloat(R[1])!=0||parseFloat(R[3])!=0)&&console.warn("Non-orthogonal delta matrix not currently supported in dx format"),B+=1,J=L[B],R=b.exec(J),R==null){console.error("Parse error in dx delta matrix");return}var Oe=parseFloat(R[3]);(parseFloat(R[1])!=0||parseFloat(R[2])!=0)&&console.warn("Non-orthogonal delta matrix not currently supported in dx format"),this.unit=new s.Vector3(Pe,ue,Oe)}else if(R=$.exec(J)){var we=parseFloat(R[1]),Ze=parseFloat(R[2]),it=parseFloat(R[3]);this.origin=new s.Vector3(we,Ze,it)}else if(R=k.exec(J))break}if(B+=1,!this.size||!this.origin||!this.unit||!this.size){console.error("Error parsing dx format");return}var lt=L.splice(B).join(" "),Vt=lt.split(/[\s\r]+/);this.data=Float32Array.from(Vt,parseFloat)},w=w.toLowerCase(),/\.gz$/.test(w)){w=w.replace(/\.gz$/,"");try{this[w]&&this.isbinary.has(w)?(typeof m=="string"&&(m=(0,a.base64ToArray)(m)),m=(0,u.inflate)(m)):m=new TextDecoder("utf-8").decode((0,u.inflate)(m))}catch(c){console.error(c)}}if(this[w]&&(this.isbinary.has(w)&&typeof m=="string"&&(m=(0,a.base64ToArray)(m)),this[w](m)),A){if(A.negate)for(let c=0,L=this.data.length;c<L;c++)this.data[c]=-this.data[c];if(A.normalize){var D=0;for(let c=0,L=this.data.length;c<L;c++)D+=this.data[c];var I=D/this.data.length;D=0;for(let c=0,L=this.data.length;c<L;c++){var y=this.data[c]-I;D+=y*y}var l=D/this.data.length;for(let c=0,L=this.data.length;c<L;c++)this.data[c]=(this.data[c]-I)/l}}}getIndex(m,w,A){if(this.matrix){this.inversematrix==null&&(this.inversematrix=new s.Matrix4().getInverse(this.matrix));var D=new s.Vector3(m,w,A);D=D.applyMatrix4(this.inversematrix),m=D.x,w=D.y,A=D.z}else m-=this.origin.x,w-=this.origin.y,A-=this.origin.z,m/=this.unit.x,w/=this.unit.y,A/=this.unit.z;return m=Math.round(m),w=Math.round(w),A=Math.round(A),m<0||m>=this.size.x||w<0||w>=this.size.y||A<0||A>=this.size.z?-1:m*this.size.y*this.size.z+w*this.size.z+A}getVal(m,w,A){let D=this.getIndex(m,w,A);return D<0?0:this.data[D]}cube(m){var w=m.split(/\r?\n/);if(!(w.length<6)){var A=(0,f.CUBE)(m,{}).modelData[0].cryst,D=w[2].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),I=parseFloat(D[0]),y=Math.abs(I);this.origin=A.origin,this.size=A.size,this.unit=A.unit,this.matrix=A.matrix4;var l=6;I<0&&l++;var c=w.splice(y+l).join(" ");c=c.replace(/^\s+/,"");var L=c.split(/[\s\r]+/);this.data=Float32Array.from(L,parseFloat)}}ccp4(m){var w={};m=new Int8Array(m);var A=new Int32Array(m.buffer,0,56),D=new Float32Array(m.buffer,0,56),I=new DataView(m.buffer);if(w.MAP=String.fromCharCode(I.getUint8(208),I.getUint8(209),I.getUint8(210),I.getUint8(211)),w.MACHST=[I.getUint8(212),I.getUint8(213)],w.MACHST[0]===17&&w.MACHST[1]===17)for(var y=m.byteLength,l=0;l<y;l+=4)I.setFloat32(l,I.getFloat32(l),!0);w.NX=A[0],w.NY=A[1],w.NZ=A[2],w.MODE=A[3],w.NXSTART=A[4],w.NYSTART=A[5],w.NZSTART=A[6],w.MX=A[7],w.MY=A[8],w.MZ=A[9],w.xlen=D[10],w.ylen=D[11],w.zlen=D[12],w.alpha=D[13],w.beta=D[14],w.gamma=D[15],w.MAPC=A[16],w.MAPR=A[17],w.MAPS=A[18],w.DMIN=D[19],w.DMAX=D[20],w.DMEAN=D[21],w.ISPG=A[22],w.NSYMBT=A[23],w.LSKFLG=A[24],w.originX=D[49],w.originY=D[50],w.originZ=D[51],w.ARMS=D[54];var c=w,L=[c.xlen,0,0],R=[c.ylen*Math.cos(Math.PI/180*c.gamma),c.ylen*Math.sin(Math.PI/180*c.gamma),0],F=[c.zlen*Math.cos(Math.PI/180*c.beta),c.zlen*(Math.cos(Math.PI/180*c.alpha)-Math.cos(Math.PI/180*c.gamma)*Math.cos(Math.PI/180*c.beta))/Math.sin(Math.PI/180*c.gamma),0];F[2]=Math.sqrt(c.zlen*c.zlen*Math.sin(Math.PI/180*c.beta)*Math.sin(Math.PI/180*c.beta)-F[1]*F[1]);var $=[0,L,R,F],b=[0,c.MX,c.MY,c.MZ],k=[0,c.MAPC,c.MAPR,c.MAPS];this.matrix=new s.Matrix4,this.matrix.set($[k[1]][0]/b[k[1]],$[k[2]][0]/b[k[2]],$[k[3]][0]/b[k[3]],0,$[k[1]][1]/b[k[1]],$[k[2]][1]/b[k[2]],$[k[3]][1]/b[k[3]],0,$[k[1]][2]/b[k[1]],$[k[2]][2]/b[k[2]],$[k[3]][2]/b[k[3]],0,0,0,0,1),this.matrix=this.matrix.multiplyMatrices(this.matrix,new s.Matrix4().makeTranslation(c.NXSTART+c.originX,c.NYSTART+c.originY,c.NZSTART+c.originZ)),this.origin=new s.Vector3(0,0,0),this.unit=new s.Vector3(1,1,1),this.size={x:w.NX,y:w.NY,z:w.NZ},this.dimensionorder=[w.MAPC,w.MAPR,w.MAPS];var B=new Float32Array(m.buffer,1024+w.NSYMBT),J=w.NX,X=w.NY,ae=w.NZ;this.data=new Float32Array(J*X*ae);for(let He=0;He<J;He++)for(let Pe=0;Pe<X;Pe++)for(let ue=0;ue<ae;ue++)this.data[(He*X+Pe)*ae+ue]=B[(ue*X+Pe)*J+He]}}}),"./src/VolumetricRender.ts":((r,e,t)=>{t.r(e),t.d(e,{GLVolumetricRender:()=>h});var a=t("./src/WebGL/shapes/index.ts"),s=t("./src/WebGL/math/index.ts"),o=t("./src/WebGL/index.ts"),f=t("./src/colors.ts"),u=t("./src/GLShape.ts");class h{static interpolateArray(m,w){function A(F,$,b){return F+($-F)*b}var D=[],I=(m.length-1)/(w-1);D[0]=m[0];for(var y=1;y<w-1;y++){var l=y*I,c=Math.floor(l),L=Math.ceil(l),R=l-c;D[y]=A(m[c],m[L],R)}return D[w-1]=m[m.length-1],D}constructor(m,w,A){this.hidden=!1,this.boundingSphere=new a.Sphere,this.renderedShapeObj=null,this.shapeObj=null,this.subsamples=5,this.data=null,this.transferfunctionbuffer=[],this.min=0,this.max=0,w=w||{};var D=Object.assign([],w.transferfn);this.subsamples=w.subsamples||5;let I=256;D.forEach(function(X){X.value=parseFloat(X.value)}),D.sort(function(X,ae){return X.value-ae.value}),this.min=D[0].value,D.length==0&&D.push(D[0]),this.max=D[D.length-1].value;var y,l,c,L,R,F,$,b,k,B;for(let X=0;X<D.length-1;X++)if(c=f.CC.color(D[X].color),L=f.CC.color(D[X+1].color),k=D[X].opacity,B=D[X+1].opacity,y=Math.floor((D[X].value-this.min)*I/(this.max-this.min)),l=Math.floor((D[X+1].value-this.min)*I/(this.max-this.min)),y!=l){R=h.interpolateArray([c.r*255,L.r*255],l-y),F=h.interpolateArray([c.g*255,L.g*255],l-y),$=h.interpolateArray([c.b*255,L.b*255],l-y),b=h.interpolateArray([k*255,B*255],l-y);for(let ae=0;ae<R.length;ae++)this.transferfunctionbuffer.push(R[ae]),this.transferfunctionbuffer.push(F[ae]),this.transferfunctionbuffer.push($[ae]),this.transferfunctionbuffer.push(b[ae])}if(this.transferfunctionbuffer=new Uint8ClampedArray(this.transferfunctionbuffer),m.matrix){let X=new s.Vector3(0,0,0),ae=new s.Vector3(m.size.x,m.size.y,m.size.z),He=new s.Vector3(1,1,1);X.applyMatrix4(m.matrix),ae.applyMatrix4(m.matrix),He.applyMatrix4(m.matrix).sub(X),this.extent=[[X.x,X.y,X.z],[ae.x,ae.y,ae.z]];for(let we=1;we<7;we++)ae.x=we&1?m.size.x:0,ae.y=we&2?m.size.y:0,ae.z=we&4?m.size.z:0,ae.applyMatrix4(m.matrix),this.extent[0][0]=Math.min(this.extent[0][0],ae.x),this.extent[0][1]=Math.min(this.extent[0][1],ae.y),this.extent[0][2]=Math.min(this.extent[0][2],ae.z),this.extent[1][0]=Math.max(this.extent[1][0],ae.x),this.extent[1][1]=Math.max(this.extent[1][1],ae.y),this.extent[1][2]=Math.max(this.extent[1][2],ae.z);let Pe=ae.x-X.x,ue=ae.y-X.y,Oe=ae.z-X.z;this.maxdepth=Math.sqrt(Pe*Pe+ue*ue+Oe*Oe),this.minunit=Math.min(Math.min(He.x,He.y),He.z),this.texmatrix=new s.Matrix4().identity().scale({x:m.size.x,y:m.size.y,z:m.size.z}),this.texmatrix=this.texmatrix.multiplyMatrices(m.matrix,this.texmatrix),this.texmatrix=this.texmatrix.getInverse(this.texmatrix)}else{this.texmatrix=new s.Matrix4().identity();let X=m.unit.x*m.size.x,ae=m.unit.y*m.size.y,He=m.unit.z*m.size.z;this.texmatrix.makeTranslation(-m.origin.x/X,-m.origin.y/ae,-m.origin.z/He),this.texmatrix.scale({x:1/X,y:1/ae,z:1/He}),this.minunit=Math.min(Math.min(m.unit.x,m.unit.y),m.unit.z),this.extent=[[m.origin.x,m.origin.y,m.origin.z],[m.origin.x+X,m.origin.y+ae,m.origin.z+He]],this.maxdepth=Math.sqrt(X*X+ae*ae+He*He)}var J=new u.GLShape({});if(J.addBox({corner:{x:this.extent[0][0],y:this.extent[0][1],z:this.extent[0][2]},dimensions:{w:this.extent[1][0]-this.extent[0][0],h:this.extent[1][1]-this.extent[0][1],d:this.extent[1][2]-this.extent[0][2]}}),this.geo=J.finalize(),this.boundingSphere.center=new s.Vector3((this.extent[0][0]+this.extent[1][0])/2,(this.extent[0][1]+this.extent[1][1])/2,(this.extent[0][2]+this.extent[1][2])/2),this.boundingSphere.radius=this.maxdepth/2,w.coords===void 0&&w.selection!==void 0&&(A?w.coords=A.selectedAtoms(w.selection):console.log("Need to provide viewer to volumetric renderer if selection specified.")),w.coords!==void 0&&w.seldist!==void 0){let X=new Uint8Array(m.data.length),ae=w.seldist,He=ae*ae;for(let Pe=0,ue=w.coords.length;Pe<ue;Pe++){let Oe=w.coords[Pe],we=Oe.x-ae,Ze=Oe.y-ae,it=Oe.z-ae,lt=Oe.x+ae,Vt=Oe.y+ae,_e=Oe.z+ae;if(m.getIndex(we,Ze,it)>=0||m.getIndex(lt,Vt,_e)>=0)for(let pr=we;pr<lt;pr+=this.minunit)for(let _s=Ze;_s<Vt;_s+=this.minunit)for(let Ei=it;Ei<_e;Ei+=this.minunit){let Bl=m.getIndex(pr,_s,Ei);Bl>=0&&!X[Bl]&&(pr-Oe.x)*(pr-Oe.x)+(_s-Oe.y)*(_s-Oe.y)+(Ei-Oe.z)*(Ei-Oe.z)<He&&(X[Bl]=1)}}for(let Pe=0,ue=m.data.length;Pe<ue;Pe++)X[Pe]==0&&(m.data[Pe]=1/0)}this.data=m}globj(m){if(this.renderedShapeObj&&(m.remove(this.renderedShapeObj),this.renderedShapeObj=null),!this.hidden){this.shapeObj=new o.Object3D;var w=null,A=new o.Texture(this.data,!0),D=new o.Texture(this.transferfunctionbuffer,!1);A.needsUpdate=!0,D.needsUpdate=!0,D.flipY=!1,w=new o.VolumetricMaterial({transferfn:D,transfermin:this.min,transfermax:this.max,map:A,extent:this.extent,maxdepth:this.maxdepth,texmatrix:this.texmatrix,unit:this.minunit,subsamples:this.subsamples});var I=new o.Mesh(this.geo,w);this.shapeObj.add(I),this.renderedShapeObj=this.shapeObj.clone(),m.add(this.renderedShapeObj)}}removegl(m){this.renderedShapeObj&&(this.renderedShapeObj.geometry!==void 0&&this.renderedShapeObj.geometry.dispose(),this.renderedShapeObj.material!==void 0&&this.renderedShapeObj.material.dispose(),m.remove(this.renderedShapeObj),this.renderedShapeObj=null),this.shapeObj=null}get position(){return this.boundingSphere.center}get x(){return this.boundingSphere.center.x}get y(){return this.boundingSphere.center.y}get z(){return this.boundingSphere.center.z}}}),"./src/WebGL/Camera.ts":((r,e,t)=>{t.r(e),t.d(e,{Camera:()=>o});var a=t("./src/WebGL/core/index.ts"),s=t("./src/WebGL/math/index.ts");class o extends a.Object3D{constructor(u=50,h=1,x=.1,m=2e3,w=!1){super(),this.projectionMatrix=new s.Matrix4,this.projectionMatrixInverse=new s.Matrix4,this.matrixWorldInverse=new s.Matrix4,this.fov=u,this.aspect=h,this.near=x,this.far=m;var A=this.position.z;this.right=A*Math.tan(Math.PI/180*u),this.left=-this.right,this.top=this.right/this.aspect,this.bottom=-this.top,this.ortho=!!w,this.updateProjectionMatrix()}lookAt(u){this.matrix.lookAt(this.position,u,this.up),this.rotationAutoUpdate&&(this.useQuaternion===!1&&this.rotation instanceof s.Vector3?this.rotation.setEulerFromRotationMatrix(this.matrix,this.eulerOrder):console.error("Unimplemented math operation."))}updateProjectionMatrix(){this.ortho?this.projectionMatrix.makeOrthographic(this.left,this.right,this.top,this.bottom,this.near,this.far):this.projectionMatrix.makePerspective(this.fov,this.aspect,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)}}}),"./src/WebGL/Fog.ts":((r,e,t)=>{t.r(e),t.d(e,{Fog:()=>s});var a=t("./src/colors.ts");class s{constructor(f,u=1,h=1e3){this.name="",this.color=new a.Color(f),this.near=u,this.far=h}clone(){return new s(this.color.getHex(),this.near,this.far)}}}),"./src/WebGL/Renderer.ts":((r,e,t)=>{t.r(e),t.d(e,{Renderer:()=>y});var a=t("./src/WebGL/Camera.ts"),s=t("./src/WebGL/constants/Sides.ts"),o=t("./src/WebGL/constants/TextureConstants.ts"),f=t("./src/WebGL/core/index.ts"),u=t("./src/colors.ts"),h=t("./src/WebGL/materials/index.ts"),x=t("./src/WebGL/math/index.ts"),m=t("./src/WebGL/objects/index.ts"),w=t("./src/WebGL/shaders/index.ts"),A=t("./src/WebGL/SpritePlugin.ts"),D=null,I=null;class y{constructor(c){this.context=null,this.devicePixelRatio=1,this.sortObjects=!0,this.autoUpdateObjects=!0,this.autoUpdateScene=!0,this.info={memory:{programs:0,geometries:0,textures:0},render:{calls:0,vertices:0,faces:0,points:0}},this._offscreen=null,this._bitmap=null,this._programs=[],this._programs_counter=0,this._webglversion=1,this._currentProgram=null,this._currentMaterialId=-1,this._currentGeometryGroupHash=null,this._currentCamera=null,this._geometryGroupCounter=0,this._oldDoubleSided=-1,this._oldFlipSided=-1,this._oldDepthTest=-1,this._oldDepthWrite=-1,this._oldPolygonOffset=null,this._oldLineWidth=null,this._viewportWidth=0,this._viewportHeight=0,this._currentWidth=0,this._currentHeight=0,this._enabledAttributes={},this._vector3=new x.Vector3,this._worldInverse=new x.Matrix4,this._projInverse=new x.Matrix4,this._textureMatrix=new x.Matrix4,this._fullProjModelMatrix=new x.Matrix4,this._fullProjModelMatrixInv=new x.Matrix4,this._direction=new x.Vector3,this._lightsNeedUpdate=!0,this._lights={ambient:[0,0,0],directional:{length:0,colors:[],positions:[]},point:{length:0,colors:[],positions:[],distances:[]},spot:{length:0,colors:[],positions:[],distances:[],directions:[],anglesCos:[],exponents:[]},hemi:{length:0,skyColors:[],groundColors:[],positions:[]}},this.sprites=new A.SpritePlugin,this._screenshader=null,this._AOshader=null,this._blurshader=null,this._vertexattribpos=null,this._aovertexattribpos=null,this._blurvertexattribpos=null,this._screenQuadVBO=null,this._fb=null,this._targetTexture=null,this._depthTexture=null,this._shadingTexture=null,this._scratchTexture=null,this._upscale=null,this._AOstrength=1,this._AOradius=5,this.SHADE_TEXTURE=3,c=c||{},this.row=c.row,this.col=c.col,this.rows=c.rows,this.cols=c.cols,this._canvas=c.canvas!==void 0?c.canvas:document.createElement("canvas"),this._precision=c.precision!==void 0?c.precision:"highp",this._alpha=c.alpha!==void 0?c.alpha:!0,this._premultipliedAlpha=c.premultipliedAlpha!==void 0?c.premultipliedAlpha:!0,this._antialias=c.antialias!==void 0?c.antialias:!1,this._upscale=c.upscale!==void 0?c.upscale:this._antialias,this._preserveDrawingBuffer=c.preserveDrawingBuffer!==void 0?c.preserveDrawingBuffer:!1,this._clearColor=c.clearColor!==void 0?new u.Color(c.clearColor):new u.Color(0),this._clearAlpha=c.clearAlpha!==void 0?c.clearAlpha:0,this._outlineMaterial=new h.MeshOutlineMaterial(c.outline),this._outlineSphereImposterMaterial=new h.SphereImposterOutlineMaterial(c.outline),this._outlineStickImposterMaterial=new h.StickImposterOutlineMaterial(c.outline),this._outlineEnabled=!!c.outline,this._AOEnabled=!!c.ambientOcclusion,c.ambientOcclusion&&typeof c.ambientOcclusion.strength<"u"&&(this._AOstrength=parseFloat(c.ambientOcclusion.strength)),this._AOstrength==0&&(this._AOEnabled=!1),c.ambientOcclusion&&typeof c.ambientOcclusion.radius<"u"&&(this._AOradius=parseFloat(c.ambientOcclusion.radius)),this.domElement=this._canvas,this._canvas.id=c.id,!(c.containerWidth==0||c.containerHeight==0)&&(this.initGL(),this.setDefaultGLState(),this.context=this._gl,this.isWebGL1()?this._extInstanced=this._gl.getExtension("ANGLE_instanced_arrays"):this._extInstanced={vertexAttribDivisorANGLE:this._gl.vertexAttribDivisor.bind(this._gl),drawElementsInstancedANGLE:this._gl.drawElementsInstanced.bind(this._gl)},this._extFragDepth=this._gl.getExtension("EXT_frag_depth"),this._extFloatLinear=this._gl.getExtension("OES_texture_float_linear"),this._extColorBufferFloat=this._gl.getExtension("EXT_color_buffer_float"),this.sprites.init(this))}supportedExtensions(){return{supportsAIA:!!this._extInstanced,supportsImposters:!!this._extFragDepth||!this.isWebGL1(),regen:!1}}getContext(){return this._gl}getCanvas(){return this._canvas}isLost(){return this._gl==null||this._gl.isContextLost()}getPrecision(){return this._precision}setClearColorHex(c,L){this._clearColor.setHex(c),this._clearAlpha=L,this.isLost()||this._gl.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearAlpha)}enableOutline(c){this._outlineMaterial=new h.MeshOutlineMaterial(c),this._outlineSphereImposterMaterial=new h.SphereImposterOutlineMaterial(c),this._outlineStickImposterMaterial=new h.StickImposterOutlineMaterial(c),this._outlineEnabled=!0}disableOutline(){this._outlineEnabled=!1}enableAmbientOcclusion(c){c&&(c.strength&&(this._AOstrength=c.strength),c.scale&&(this._AOradius=c.scale)),this._AOEnabled=this._AOstrength>0}disableAmbientOcclusion(){this._AOEnabled=!1}setViewport(){if(this._offscreen&&(this._offscreen.width=this._canvas.width,this._offscreen.height=this._canvas.height),this.rows!=null&&this.cols!=null&&this.row!=null&&this.col!=null&&!this.isLost()){var c=this._gl.drawingBufferWidth/this.cols,L=this._gl.drawingBufferHeight/this.rows;this._viewportWidth=c,this._viewportHeight=L,this._gl.enable(this._gl.SCISSOR_TEST),this._gl.scissor(c*this.col,L*this.row,c,L),this._gl.viewport(c*this.col,L*this.row,c,L)}}setSize(c,L){this.devicePixelRatio=window.devicePixelRatio!==void 0?window.devicePixelRatio:1,this._upscale&&this.devicePixelRatio<2&&(this.devicePixelRatio=2),this._canvas.width=c*this.devicePixelRatio,this._canvas.height=L*this.devicePixelRatio,this._canvas.style.width=c+"px",this._canvas.style.height=L+"px",this.rows!=null&&this.cols!=null&&this.row!=null&&this.col!=null?(this.isLost()||(this._viewportWidth=this._gl.drawingBufferWidth/this.cols,this._viewportHeight=this._gl.drawingBufferHeight/this.rows),this.setViewport()):(this._viewportWidth=this._canvas.width,this._viewportHeight=this._canvas.height,this.isLost()||this._gl.viewport(0,0,this._gl.drawingBufferWidth,this._gl.drawingBufferHeight)),this.initFrameBuffer()}clear(c,L,R){var F=0;(c===void 0||c)&&(F|=this._gl.COLOR_BUFFER_BIT),(L===void 0||L)&&(F|=this._gl.DEPTH_BUFFER_BIT),(R===void 0||R)&&(F|=this._gl.STENCIL_BUFFER_BIT),this._gl.clear(F)}setMaterialFaces(c,L){var R=c.side===s.DoubleSide,F=c.side===s.BackSide;c.imposter||(F=L?!F:F),this._oldDoubleSided!==R&&(R?this._gl.disable(this._gl.CULL_FACE):this._gl.enable(this._gl.CULL_FACE),this._oldDoubleSided=R),this._oldFlipSided!==F&&(F?this._gl.frontFace(this._gl.CW):this._gl.frontFace(this._gl.CCW),this._oldFlipSided=F),this._gl.cullFace(this._gl.BACK)}setDepthTest(c){this._oldDepthTest!==c&&(c?this._gl.enable(this._gl.DEPTH_TEST):this._gl.disable(this._gl.DEPTH_TEST),this._oldDepthTest=c)}setDepthWrite(c){this._oldDepthWrite!==c&&(this._gl.depthMask(c),this._oldDepthWrite=c)}setBlending(c){c?(this._gl.enable(this._gl.BLEND),this._gl.blendEquationSeparate(this._gl.FUNC_ADD,this._gl.FUNC_ADD),this._gl.blendFuncSeparate(this._gl.SRC_ALPHA,this._gl.ONE_MINUS_SRC_ALPHA,this._gl.ONE,this._gl.ONE_MINUS_SRC_ALPHA)):this._gl.disable(this._gl.BLEND)}initMaterial(c,L,R,F){c.addEventListener("dispose",this.onMaterialDispose.bind(this));var $,b;if(b=c.shaderID,b){var k=w.ShaderLib[b];c.vertexShader=k.vertexShader,c.fragmentShader=k.fragmentShader,c.uniforms=w.ShaderUtils.clone(k.uniforms),c.shaded&&c.makeShaded(this.SHADE_TEXTURE)}$={wireframe:c.wireframe,fragdepth:c.imposter,volumetric:c.volumetric,shaded:c.shaded},c.program=this.buildProgram(c.fragmentShader,c.vertexShader,c.uniforms,$)}renderBuffer(c,L,R,F,$,b){if(F.visible){var k,B;if(k=this.setProgram(c,L,R,F,b,this),!!k){B=k.attributes;var J=!1,X=F.wireframe?1:0,ae=$.id*16777215+k.id*2+X;ae!==this._currentGeometryGroupHash&&(this._currentGeometryGroupHash=ae,J=!0),J&&(this.disableAttributes(),B.position>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,$.__webglVertexBuffer),this.enableAttribute(B.position),this._gl.vertexAttribPointer(B.position,3,this._gl.FLOAT,!1,0,0)),B.color>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,$.__webglColorBuffer),this.enableAttribute(B.color),this._gl.vertexAttribPointer(B.color,3,this._gl.FLOAT,!1,0,0)),B.normal>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,$.__webglNormalBuffer),this.enableAttribute(B.normal),this._gl.vertexAttribPointer(B.normal,3,this._gl.FLOAT,!1,0,0)),B.offset>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,$.__webglOffsetBuffer),this.enableAttribute(B.offset),this._gl.vertexAttribPointer(B.offset,3,this._gl.FLOAT,!1,0,0)),B.radius>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,$.__webglRadiusBuffer),this.enableAttribute(B.radius),this._gl.vertexAttribPointer(B.radius,1,this._gl.FLOAT,!1,0,0)));var He,Pe;if(b instanceof m.Mesh){if(F.shaderID==="instanced"){var ue=F.sphere.geometryGroups[0];J&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,$.__webglVertexBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,ue.vertexArray,this._gl.STATIC_DRAW),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,$.__webglNormalBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,ue.normalArray,this._gl.STATIC_DRAW),this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,$.__webglFaceBuffer),this._gl.bufferData(this._gl.ELEMENT_ARRAY_BUFFER,ue.faceArray,this._gl.STATIC_DRAW)),He=ue.faceidx,this._extInstanced.vertexAttribDivisorANGLE(B.offset,1),this._extInstanced.vertexAttribDivisorANGLE(B.radius,1),this._extInstanced.vertexAttribDivisorANGLE(B.color,1),this._extInstanced.drawElementsInstancedANGLE(this._gl.TRIANGLES,He,this._gl.UNSIGNED_SHORT,0,$.radiusArray.length),this._extInstanced.vertexAttribDivisorANGLE(B.offset,0),this._extInstanced.vertexAttribDivisorANGLE(B.radius,0),this._extInstanced.vertexAttribDivisorANGLE(B.color,0)}else F.wireframe?(Pe=$.lineidx,this.setLineWidth(F.wireframeLinewidth),J&&this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,$.__webglLineBuffer),this._gl.drawElements(this._gl.LINES,Pe,this._gl.UNSIGNED_SHORT,0)):(He=$.faceidx,J&&this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,$.__webglFaceBuffer),this._gl.drawElements(this._gl.TRIANGLES,He,this._gl.UNSIGNED_SHORT,0));this.info.render.calls++,this.info.render.vertices+=He,this.info.render.faces+=He/3}else b instanceof m.Line&&(Pe=$.vertices,this.setLineWidth(F.linewidth),this._gl.drawArrays(this._gl.LINES,0,Pe),this.info.render.calls++)}}}clearShading(){this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._shadingTexture,0),this.clear(!1,!0,!1),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._depthTexture,0)}setShading(c,L,R){let F=c.__lights,$=c.fog,b=[];for(let J=0,X=c.__webglObjects.length;J<X;J++){let ae=c.__webglObjects[J];ae.render&&ae[R]&&b.push(ae)}if(b.length==0)return;this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._shadingTexture,0),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.COLOR_ATTACHMENT0,this._gl.TEXTURE_2D,null,0),this.renderObjects(c.__webglObjects,!0,R+"Depth",L,F,$,!1),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._scratchTexture,0),this.clear(!1,!0,!1),this._gl.useProgram(this._AOshader),this._currentProgram=this._AOshader,this.setDepthTest(-1),this.setDepthWrite(-1);let k=this._AOshader.uniforms;this._gl.uniform1f(k.total_strength,this._AOstrength),this._gl.uniform1f(k.radius,this._AOradius),this._fullProjModelMatrix=new x.Matrix4,this._fullProjModelMatrixInv=new x.Matrix4;let B=b[0].object;this._fullProjModelMatrix.multiplyMatrices(L.projectionMatrix,B._modelViewMatrix),this._fullProjModelMatrixInv.getInverse(this._fullProjModelMatrix),this._gl.uniformMatrix4fv(k.projectionMatrix,!1,this._fullProjModelMatrix.elements),this._gl.uniformMatrix4fv(k.projinv,!1,this._fullProjModelMatrixInv.elements),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._screenQuadVBO),this._gl.enableVertexAttribArray(this._aovertexattribpos),this._gl.vertexAttribPointer(this._aovertexattribpos,2,this._gl.FLOAT,!1,0,0),this._gl.activeTexture(this._gl.TEXTURE0),this._gl.bindTexture(this._gl.TEXTURE_2D,this._shadingTexture),this._gl.drawArrays(this._gl.TRIANGLES,0,6),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._shadingTexture,0),this.clear(!1,!0,!1),this._gl.useProgram(this._blurshader),this._currentProgram=this._blurshader,this.setDepthTest(-1),this.setDepthWrite(-1),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._screenQuadVBO),this._gl.enableVertexAttribArray(this._blurvertexattribpos),this._gl.vertexAttribPointer(this._blurvertexattribpos,2,this._gl.FLOAT,!1,0,0),this._gl.activeTexture(this._gl.TEXTURE0),this._gl.bindTexture(this._gl.TEXTURE_2D,this._scratchTexture),this._gl.drawArrays(this._gl.TRIANGLES,0,6),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.COLOR_ATTACHMENT0,this._gl.TEXTURE_2D,this._targetTexture,0),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._depthTexture,0)}render(c,L){if(!(L instanceof a.Camera)){console.error("Renderer.render: camera is not an instance of Camera.");return}var R,F,$,b,k,B=c.__lights,J=c.fog;if(this._currentMaterialId=-1,this._lightsNeedUpdate=!0,this.autoUpdateScene&&c.updateMatrixWorld(),L.parent===void 0&&L.updateMatrixWorld(),L.matrixWorldInverse.getInverse(L.matrixWorld),this.isLost())return;this.autoUpdateObjects&&this.initWebGLObjects(c),this.info.render.calls=0,this.info.render.vertices=0,this.info.render.faces=0,this.info.render.points=0,this._currentWidth=this._viewportWidth,this._currentHeight=this._viewportHeight,this.setViewport(),this.setFrameBuffer(),this._gl.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearAlpha),this.clear(!0,!0,!0),k=c.__webglObjects;let X=!1,ae=this._AOEnabled;for(R=0,F=k.length;R<F;R++)$=k[R],b=$.object,$.render=!1,b.visible&&(this.setupMatrices(b,L),this.unrollBufferMaterial($),$.render=!0,$.volumetric&&(X=!0),$.hasAO&&(ae=!0));if(this.setBlending(!1),ae&&this.setShading(c,L,"opaque"),this.renderObjects(c.__webglObjects,!0,"opaque",L,B,J,!1),ae&&this.clearShading(),this.renderSprites(c,L,!1),this.renderObjects(c.__webglObjects,!0,"transparentDepth",L,B,J,!0),this.renderObjects(c.__webglObjects,!1,"transparent",L,B,J,!0),X&&this._fb&&(this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,null,0),this.renderObjects(c.__webglObjects,!1,"volumetric",L,B,J,!0)),this.renderFrameBuffertoScreen(),this.setDepthTest(!0),this.setDepthWrite(!0),this.renderSprites(c,L,!0),this._bitmap){const He=this._offscreen.transferToImageBitmap();this._bitmap.transferFromImageBitmap(He),He.close()}}setFrameBuffer(){if(this.isWebGL1()||!this._fb)return;let c=this._viewportWidth,L=this._viewportHeight;this._gl.enable(this._gl.SCISSOR_TEST),this._gl.scissor(0,0,c,L),this._gl.viewport(0,0,c,L),this._gl.bindTexture(this._gl.TEXTURE_2D,this._targetTexture),this._gl.texImage2D(this._gl.TEXTURE_2D,0,this._gl.RGBA,c,L,0,this._gl.RGBA,this._gl.UNSIGNED_BYTE,null),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MIN_FILTER,this._gl.LINEAR),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MAG_FILTER,this._gl.LINEAR),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._gl.bindTexture(this._gl.TEXTURE_2D,this._depthTexture),this._gl.texImage2D(this._gl.TEXTURE_2D,0,this._gl.DEPTH_COMPONENT32F,c,L,0,this._gl.DEPTH_COMPONENT,this._gl.FLOAT,null),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MIN_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MAG_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._shadingTexture&&(this._gl.deleteTexture(this._shadingTexture),this._shadingTexture=this._gl.createTexture(),this._gl.bindTexture(this._gl.TEXTURE_2D,this._shadingTexture),this._gl.texImage2D(this._gl.TEXTURE_2D,0,this._gl.DEPTH_COMPONENT32F,c,L,0,this._gl.DEPTH_COMPONENT,this._gl.FLOAT,null),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MIN_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MAG_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._gl.deleteTexture(this._scratchTexture),this._scratchTexture=this._gl.createTexture(),this._gl.bindTexture(this._gl.TEXTURE_2D,this._scratchTexture),this._gl.texImage2D(this._gl.TEXTURE_2D,0,this._gl.DEPTH_COMPONENT32F,c,L,0,this._gl.DEPTH_COMPONENT,this._gl.FLOAT,null),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MIN_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MAG_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE)),this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,this._fb),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.COLOR_ATTACHMENT0,this._gl.TEXTURE_2D,this._targetTexture,0),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._shadingTexture,0),this._gl.clearDepth(1),this._gl.clear(this._gl.DEPTH_BUFFER_BIT),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._depthTexture,0)}initFrameBuffer(){if(this.isWebGL1())return;let c=this._viewportWidth,L=this._viewportHeight;this._gl.enable(this._gl.SCISSOR_TEST),this._gl.scissor(0,0,c,L),this._gl.viewport(0,0,c,L),this._targetTexture=this._gl.createTexture(),this._depthTexture=this._gl.createTexture(),this._shadingTexture=this._gl.createTexture(),this._scratchTexture=this._gl.createTexture(),this._fb=this._gl.createFramebuffer();var R=this._antialias?w.ShaderLib.screenaa:w.ShaderLib.screen;this._screenshader=this.buildProgram(R.fragmentShader,R.vertexShader,R.uniforms,{}),this._vertexattribpos=this._gl.getAttribLocation(this._screenshader,"vertexPosition");var F=[1,1,-1,1,-1,-1,-1,-1,1,-1,1,1];this._screenQuadVBO=this._gl.createBuffer(),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._screenQuadVBO),this._gl.bufferData(this._gl.ARRAY_BUFFER,new Float32Array(F),this._gl.STATIC_DRAW);let $=w.ShaderLib.ssao;this._AOshader=this.buildProgram($.fragmentShader,$.vertexShader,$.uniforms,{}),this._aovertexattribpos=this._gl.getAttribLocation(this._AOshader,"vertexPosition");let b=w.ShaderLib.blur;this._blurshader=this.buildProgram(b.fragmentShader,b.vertexShader,b.uniforms,{}),this._blurvertexattribpos=this._gl.getAttribLocation(this._blurshader,"vertexPosition")}renderFrameBuffertoScreen(){this.isWebGL1()||this._fb===null||(this.setViewport(),this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,null),this._gl.clear(this._gl.COLOR_BUFFER_BIT|this._gl.DEPTH_BUFFER_BIT),this._gl.frontFace(this._gl.CCW),this._gl.cullFace(this._gl.BACK),this._gl.useProgram(this._screenshader),this._currentProgram=this._screenshader,this.setDepthTest(-1),this.setDepthWrite(-1),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._screenQuadVBO),this._gl.enableVertexAttribArray(this._vertexattribpos),this._gl.vertexAttribPointer(this._vertexattribpos,2,this._gl.FLOAT,!1,0,0),this._gl.activeTexture(this._gl.TEXTURE0),this._gl.bindTexture(this._gl.TEXTURE_2D,this._targetTexture),this._gl.drawArrays(this._gl.TRIANGLES,0,6))}initWebGLObjects(c){if(c.__webglObjects||(c.__webglObjects=[],c.__webglObjectsImmediate=[],c.__webglSprites=[],c.__webglFlares=[]),c.__objectsAdded.length){for(;c.__objectsAdded.length;)this.addObject(c.__objectsAdded[0],c),c.__objectsAdded.splice(0,1);this._currentGeometryGroupHash=-1}for(;c.__objectsRemoved.length;)this.removeObject(c.__objectsRemoved[0],c),c.__objectsRemoved.splice(0,1);for(var L=0,R=c.__webglObjects.length;L<R;L++)this.updateObject(c.__webglObjects[L].object)}getYRatio(){return this.rows!==void 0&&this.row!==void 0?this.rows:1}getXRatio(){return this.cols!==void 0&&this.col!==void 0?this.cols:1}getAspect(c,L){(c==null||L==null)&&(c=this._canvas.width,L=this._canvas.height);var R=c/L;if(this.rows!=null&&this.cols!=null&&this.row!=null&&this.col!=null){var F=c/this.cols,$=L/this.rows;R=F/$}return R}setTexture(c,L,R){if(c.needsUpdate){c.__webglInit||(c.__webglInit=!0,c.addEventListener("dispose",this.onTextureDispose.bind(this)),c.__webglTexture=this._gl.createTexture(),this.info.memory.textures++),this._gl.activeTexture(this._gl.TEXTURE0+L);var F=R?this._gl.TEXTURE_3D:this._gl.TEXTURE_2D;this._gl.bindTexture(F,c.__webglTexture),this._gl.pixelStorei(this._gl.UNPACK_FLIP_Y_WEBGL,c.flipY),this._gl.pixelStorei(this._gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,c.premultiplyAlpha),this._gl.pixelStorei(this._gl.UNPACK_ALIGNMENT,c.unpackAlignment),this._gl.pixelStorei(this._gl.PACK_ALIGNMENT,c.unpackAlignment);var $=this.paramToGL(c.format),b=this.paramToGL(c.type);if(R)this.setTextureParameters(this._gl.TEXTURE_3D,c),this._gl.texImage3D(this._gl.TEXTURE_3D,0,this._gl.R32F,c.image.size.z,c.image.size.y,c.image.size.x,0,this._gl.RED,this._gl.FLOAT,c.image.data);else{var k=c.image,B=k.width,J=k.height;typeof B>"u"&&(B=k.length,$==this._gl.RGBA&&(B/=4),J=1),this.setTextureParameters(this._gl.TEXTURE_2D,c),this.isWebGL1()?this._gl.texImage2D(this._gl.TEXTURE_2D,0,$,$,b,c.image):this._gl.texImage2D(this._gl.TEXTURE_2D,0,$,B,J,0,$,b,c.image)}c.needsUpdate=!1,c.onUpdate&&c.onUpdate()}else this._gl.activeTexture(this._gl.TEXTURE0+L),R?this._gl.bindTexture(this._gl.TEXTURE_3D,c.__webglTexture):this._gl.bindTexture(this._gl.TEXTURE_2D,c.__webglTexture)}supportsVolumetric(){return!this.isWebGL1()}enableAttribute(c){this._enabledAttributes[c]||(this._gl.enableVertexAttribArray(c),this._enabledAttributes[c]=!0)}disableAttributes(){for(let c in this._enabledAttributes)this._enabledAttributes[c]&&(this._gl.disableVertexAttribArray(c),this._enabledAttributes[c]=!1)}setPolygonOffset(c,L,R){this._oldPolygonOffset!==c&&(c?this._gl.enable(this._gl.POLYGON_OFFSET_FILL):this._gl.disable(this._gl.POLYGON_OFFSET_FILL))}setLineWidth(c){c!==this._oldLineWidth&&(this._gl.lineWidth(c),this._oldLineWidth=c)}deallocateGeometry(c){if(c.__webglInit=void 0,c.__webglVertexBuffer!==void 0&&this._gl.deleteBuffer(c.__webglVertexBuffer),c.__webglColorBuffer!==void 0&&this._gl.deleteBuffer(c.__webglColorBuffer),c.geometryGroups!==void 0)for(var L=0,R=c.groups;L<R;L++){var F=c.geometryGroups[L];F.__webglVertexBuffer!==void 0&&this._gl.deleteBuffer(F.__webglVertexBuffer),F.__webglColorBuffer!==void 0&&this._gl.deleteBuffer(F.__webglColorBuffer),F.__webglNormalBuffer!==void 0&&this._gl.deleteBuffer(F.__webglNormalBuffer),F.__webglFaceBuffer!==void 0&&this._gl.deleteBuffer(F.__webglFaceBuffer),F.__webglLineBuffer!==void 0&&this._gl.deleteBuffer(F.__webglLineBuffer)}}deallocateMaterial(c){var L=c.program;if(L!==void 0){c.program=void 0;var R,F,$,b=!1;for(R=0,F=this._programs.length;R<F;R++)if($=this._programs[R],$.program===L){$.usedTimes--,$.usedTimes===0&&(b=!0);break}if(b===!0){var k=[];for(R=0,F=this._programs.length;R<F;R++)$=this._programs[R],$.program!==L&&k.push($);this._programs=k,this._gl.deleteProgram(L),this.info.memory.programs--}}}deallocateTexture(c){if(c.image&&c.image.__webglTextureCube)this._gl.deleteTexture(c.image.__webglTextureCube);else{if(!c.__webglInit)return;c.__webglInit=!1,this._gl.deleteTexture(c.__webglTexture)}}onGeometryDispose(c){var L=c.target;L.removeEventListener("dispose",this.onGeometryDispose),this.deallocateGeometry(L),this.info.memory.geometries--}onTextureDispose(c){var L=c.target;L.removeEventListener("dispose",this.onTextureDispose),this.deallocateTexture(L),this.info.memory.textures--}onMaterialDispose(c){var L=c.target;L.removeEventListener("dispose",this.onMaterialDispose),this.deallocateMaterial(L)}getShader(c,L){var R;return!this.isWebGL1()&&!L.startsWith("#version")&&(L=L.replace(/gl_FragDepthEXT/g,"gl_FragDepth"),c=="fragment"?L=L.replace(/varying/g,"in"):L=L.replace(/varying/g,"out"),L=L.replace(/attribute/g,"in"),L=L.replace(/texture2D/g,"texture"),L=L.replace(/\/\/DEFINEFRAGCOLOR/g,"out vec4 glFragColor;"),L=L.replace(/gl_FragColor/g,"glFragColor"),L=`#version 300 es
`+L),c==="fragment"?R=this._gl.createShader(this._gl.FRAGMENT_SHADER):c==="vertex"&&(R=this._gl.createShader(this._gl.VERTEX_SHADER)),R==null?null:(this._gl.shaderSource(R,L),this._gl.compileShader(R),this._gl.getShaderParameter(R,this._gl.COMPILE_STATUS)?R:(console.error(this._gl.getShaderInfoLog(R)),console.error("could not initialize shader"),null))}buildProgram(c,L,R,F){var $,b,k,B,J=[];J.push(c),J.push(L);for($ in F)J.push($),J.push(F[$]);for(B=J.join(),$=0,b=this._programs.length;$<b;$++){var X=this._programs[$];if(X.code===B)return X.usedTimes++,X.program}if(this.isWebGL1()&&F.volumetric)throw new Error("Volumetric rendering requires webgl2 which is not supported by your hardware.");if(k=this._gl.createProgram(),k==null)return null;var ae=this._precision,He="precision "+ae+" float;",Pe=[F.volumetric?"#version 300 es":"",He].join(`
`),ue=[F.volumetric?"#version 300 es":"",F.fragdepth&&this.isWebGL1()?"#extension GL_EXT_frag_depth: enable":"",F.shaded?"#define SHADED 1":"",F.wireframe?"#define WIREFRAME 1":"",He].join(`
`),Oe=this.getShader("fragment",ue+c),we=this.getShader("vertex",Pe+L);we!=null&&this._gl.attachShader(k,we),Oe!=null&&this._gl.attachShader(k,Oe),this._gl.linkProgram(k),this._gl.getProgramParameter(k,this._gl.LINK_STATUS)||console.error("Could not initialize shader"),k.uniforms={},k.attributes={};var Ze,it,lt;Ze=["viewMatrix","modelViewMatrix","projectionMatrix","normalMatrix","vWidth","vHeight"];for(it in R)Ze.push(it);for(lt=0;lt<Ze.length;lt++){var Vt=Ze[lt];k.uniforms[Vt]=this._gl.getUniformLocation(k,Vt)}for(Ze=["position","normal","color","lineDistance","offset","radius"],lt=0;lt<Ze.length;lt++){var _e=Ze[lt];k.attributes[_e]=this._gl.getAttribLocation(k,_e)}return k.id=this._programs_counter++,this._programs.push({program:k,code:B,usedTimes:1}),this.info.memory.programs=this._programs.length,k}setProgram(c,L,R,F,$,b){if(F.needsUpdate&&(F.program&&this.deallocateMaterial(F),this.initMaterial(F,L,R,$),F.needsUpdate=!1),F.program==null)return null;var k=!1,B=F.program,J=B.uniforms,X=F.uniforms;if(B!=this._currentProgram&&(this._gl.useProgram(B),this._currentProgram=B,k=!0),F.id!=this._currentMaterialId&&(this._currentMaterialId=F.id,k=!0),c!=this._currentCamera&&(this._currentCamera=c,k=!0),J.projectionMatrix&&this._gl.uniformMatrix4fv(J.projectionMatrix,!1,c.projectionMatrix.elements),J.modelViewMatrix&&this._gl.uniformMatrix4fv(J.modelViewMatrix,!1,$._modelViewMatrix.elements),J.normalMatrix&&this._gl.uniformMatrix3fv(J.normalMatrix,!1,$._normalMatrix.elements),J.projinv&&(this._projInverse.getInverse(c.projectionMatrix),this._gl.uniformMatrix4fv(J.projinv,!1,this._projInverse.elements)),J.viewMatrix&&this._gl.uniformMatrix4fv(J.viewMatrix,!1,c.matrixWorldInverse.elements),J.vWidth&&this._gl.uniform1f(J.vWidth,this._viewportWidth),J.vHeight&&this._gl.uniform1f(J.vHeight,this._viewportHeight),k){if(X.fogColor.value=R.color,X.fogNear.value=R.near,X.fogFar.value=R.far,F.shaderID.startsWith("lambert")||F.shaderID==="instanced"||F.shaderID.endsWith("imposter"))this._lightsNeedUpdate&&(this.setupLights(B,L),this._lightsNeedUpdate=!1),X.directionalLightColor.value=this._lights.directional.colors,X.directionalLightDirection.value=this._lights.directional.positions;else if(F.shaderID.endsWith("outline"))X.outlineColor.value=F.outlineColor,X.outlineWidth.value=F.outlineWidth,X.outlinePushback.value=F.outlinePushback,X.outlineMaxPixels.value=F.outlineMaxPixels*this.devicePixelRatio;else if(F.shaderID==="volumetric"){$._modelViewMatrix.getScale(this._direction),this._worldInverse.getInverse($._modelViewMatrix),this._projInverse.getInverse(c.projectionMatrix),this._textureMatrix.multiplyMatrices($.material.texmatrix,this._worldInverse),this._gl.uniformMatrix4fv(J.textmat,!1,this._textureMatrix.elements),this._gl.uniformMatrix4fv(J.projinv,!1,this._projInverse.elements);let ae=Math.min(Math.min(this._direction.x,this._direction.y),this._direction.z);X.step.value=$.material.unit*ae,X.maxdepth.value=$.material.maxdepth*ae,X.transfermax.value=$.material.transfermax,X.transfermin.value=$.material.transfermin,X.subsamples.value=$.material.subsamples,b.setTexture($.material.transferfn,4,!1),b.setTexture($.material.map,3,!0),this._gl.activeTexture(this._gl.TEXTURE5),this._gl.bindTexture(this._gl.TEXTURE_2D,this._depthTexture)}X.opacity.value=F.opacity,this.loadMaterialUniforms(J,X)}return X.shading&&(X.shading.value==3?(this._gl.activeTexture(this._gl.TEXTURE0+this.SHADE_TEXTURE),this._gl.bindTexture(this._gl.TEXTURE_2D,this._shadingTexture)):console.error("Invalid shading textures.")),B}loadMaterialUniforms(c,L){var R,F,$,b;for(R in L)c[R]&&(F=L[R].type,$=L[R].value,b=c[R],F==="f"?this._gl.uniform1f(b,$):F==="i"?this._gl.uniform1i(b,$):F==="fv"?this._gl.uniform3fv(b,$):F==="c"?this._gl.uniform3f(b,$.r,$.g,$.b):F==="f4"&&this._gl.uniform4f(b,$[0],$[1],$[2],$[3]))}addObject(c,L){var R,F,$,b;if(!c.__webglInit&&(c.__webglInit=!0,c._modelViewMatrix=new x.Matrix4,c._normalMatrix=new x.Matrix3,c.geometry!==void 0&&c.geometry.__webglInit===void 0&&(c.geometry.__webglInit=!0,c.geometry.addEventListener("dispose",this.onGeometryDispose.bind(this))),c instanceof m.Mesh||c instanceof m.Line))for($=c.geometry,R=0,F=$.geometryGroups.length;R<F;R++)b=$.geometryGroups[R],b.id=this._geometryGroupCounter++,b.__webglVertexBuffer||(c instanceof m.Mesh?(this.createMeshBuffers(b),$.elementsNeedUpdate=!0,$.normalsNeedUpdate=!0):c instanceof m.Line&&this.createLineBuffers(b),$.verticesNeedUpdate=!0,$.colorsNeedUpdate=!0);if(!c.__webglActive){if(c instanceof m.Mesh||c instanceof m.Line)for($=c.geometry,R=0,F=$.geometryGroups.length;R<F;R++)b=$.geometryGroups[R],this.addBuffer(L.__webglObjects,b,c);else c instanceof m.Sprite&&L.__webglSprites.push(c);c.__webglActive=!0}}updateObject(c){var L=c.geometry,R;if(c instanceof m.Mesh||c instanceof m.Line){for(var F=0,$=L.geometryGroups.length;F<$;F++)R=L.geometryGroups[F],(L.verticesNeedUpdate||L.elementsNeedUpdate||L.colorsNeedUpdate||L.normalsNeedUpdate)&&this.setBuffers(R,this._gl.STATIC_DRAW);L.verticesNeedUpdate=!1,L.elementsNeedUpdate=!1,L.normalsNeedUpdate=!1,L.colorsNeedUpdate=!1,L.buffersNeedUpdate=!1}}removeObject(c,L){c instanceof m.Mesh||c instanceof m.Line?this.removeInstances(L.__webglObjects,c):c instanceof m.Sprite&&this.removeInstancesDirect(L.__webglSprites,c),c.__webglActive=!1}removeInstances(c,L){for(var R=c.length-1;R>=0;--R)c[R].object===L&&c.splice(R,1)}removeInstancesDirect(c,L){for(var R=c.length-1;R>=0;--R)c[R]===L&&c.splice(R,1)}unrollBufferMaterial(c){var L=c.object,R=L.material;if(R.volumetric)c.opaque=null,c.transparent=null,c.volumetric=R;else if(R.transparent){if(c.opaque=null,c.volumetric=null,c.transparent=R,!R.wireframe){let F=R.clone();F.opacity=0,c.transparentDepth=F}}else{if(c.opaque=R,c.transparent=null,c.volumetric=null,!R.wireframe){let F=R.clone();F.opacity=0,c.opaqueDepth=F}R.hasAO&&(c.hasAO=!0),(this._AOEnabled||c.hasAO)&&(c.opaqueShaded=R.clone(),c.opaqueShaded.shaded=!0)}}setBuffers(c,L){var R=c.vertexArray,F=c.colorArray;if(c.__webglOffsetBuffer!==void 0?(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,c.__webglOffsetBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,R,L)):(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,c.__webglVertexBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,R,L)),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,c.__webglColorBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,F,L),c.normalArray&&c.__webglNormalBuffer!==void 0){var $=c.normalArray;this._gl.bindBuffer(this._gl.ARRAY_BUFFER,c.__webglNormalBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,$,L)}if(c.radiusArray&&c.__webglRadiusBuffer!==void 0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,c.__webglRadiusBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,c.radiusArray,L)),c.faceArray&&c.__webglFaceBuffer!==void 0){var b=c.faceArray;this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,c.__webglFaceBuffer),this._gl.bufferData(this._gl.ELEMENT_ARRAY_BUFFER,b,L)}if(c.lineArray&&c.__webglLineBuffer!==void 0){var k=c.lineArray;this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,c.__webglLineBuffer),this._gl.bufferData(this._gl.ELEMENT_ARRAY_BUFFER,k,L)}}createMeshBuffers(c){c.radiusArray&&(c.__webglRadiusBuffer=this._gl.createBuffer()),c.useOffset&&(c.__webglOffsetBuffer=this._gl.createBuffer()),c.__webglVertexBuffer=this._gl.createBuffer(),c.__webglNormalBuffer=this._gl.createBuffer(),c.__webglColorBuffer=this._gl.createBuffer(),c.__webglFaceBuffer=this._gl.createBuffer(),c.__webglLineBuffer=this._gl.createBuffer(),this.info.memory.geometries++}createLineBuffers(c){c.__webglVertexBuffer=this._gl.createBuffer(),c.__webglColorBuffer=this._gl.createBuffer(),this.info.memory.geometries++}addBuffer(c,L,R){c.push({buffer:L,object:R,opaque:null,transparent:null})}setupMatrices(c,L){c._modelViewMatrix.multiplyMatrices(L.matrixWorldInverse,c.matrixWorld),c._normalMatrix.getInverse(c._modelViewMatrix),c._normalMatrix.transpose()}filterFallback(c){return this._gl.LINEAR}setTextureParameters(c,L){c==this._gl.TEXTURE_2D?(this._gl.texParameteri(c,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(c,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(c,this._gl.TEXTURE_MAG_FILTER,this.filterFallback(L.magFilter)),this._gl.texParameteri(c,this._gl.TEXTURE_MIN_FILTER,this.filterFallback(L.minFilter))):(this._gl.texParameteri(c,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(c,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(c,this._gl.TEXTURE_WRAP_R,this._gl.CLAMP_TO_EDGE),this._extColorBufferFloat&&this._extFloatLinear?(this._gl.texParameteri(c,this._gl.TEXTURE_MAG_FILTER,this._gl.LINEAR),this._gl.texParameteri(c,this._gl.TEXTURE_MIN_FILTER,this._gl.LINEAR)):(this._gl.texParameteri(c,this._gl.TEXTURE_MAG_FILTER,this._gl.NEAREST),this._gl.texParameteri(c,this._gl.TEXTURE_MIN_FILTER,this._gl.NEAREST)))}paramToGL(c){return c===o.UnsignedByteType?this._gl.UNSIGNED_BYTE:c===o.RGBAFormat?this._gl.RGBA:c===o.NearestFilter?this._gl.NEAREST:0}setupLights(c,L){var R,F,$,b=0,k=0,B=0,J,X,ae=this._lights,He=ae.directional.colors,Pe=ae.directional.positions,ue=0,Oe=0;for(R=0,F=L.length;R<F;R++)if($=L[R],J=$.color,X=$.intensity,$ instanceof f.Light){if(this._direction.getPositionFromMatrix($.matrixWorld),this._vector3.getPositionFromMatrix($.target.matrixWorld),this._direction.sub(this._vector3),this._direction.normalize(),this._direction.x===0&&this._direction.y===0&&this._direction.z===0)continue;Pe[Oe]=this._direction.x,Pe[Oe+1]=this._direction.y,Pe[Oe+2]=this._direction.z,He[Oe]=J.r*X,He[Oe+1]=J.g*X,He[Oe+2]=J.b*X,Oe+=3,ue++}ae.ambient[0]=b,ae.ambient[1]=k,ae.ambient[2]=B,ae.directional.length=ue}initGL(){try{if(OffscreenCanvas&&!(this.rows!=null&&this.cols!=null&&this.row!=null&&this.col!=null))(I==null||I.isContextLost())&&(D=new OffscreenCanvas(this._canvas.width,this._canvas.height),I=D.getContext("webgl2",{alpha:!0,premultipliedAlpha:this._premultipliedAlpha,antialias:this._antialias,preserveDrawingBuffer:this._preserveDrawingBuffer})),this._offscreen=D,this._gl=I,this._bitmap=this._canvas.getContext("bitmaprenderer",{alpha:!0});else if(!(this._gl=this._canvas.getContext("webgl2",{alpha:this._alpha,premultipliedAlpha:this._premultipliedAlpha,antialias:this._antialias,preserveDrawingBuffer:this._preserveDrawingBuffer}))&&!(this._gl=this._canvas.getContext("experimental-webgl",{alpha:this._alpha,premultipliedAlpha:this._premultipliedAlpha,antialias:this._antialias,preserveDrawingBuffer:this._preserveDrawingBuffer}))&&!(this._gl=this._canvas.getContext("webgl",{alpha:this._alpha,premultipliedAlpha:this._premultipliedAlpha,antialias:this._antialias,preserveDrawingBuffer:this._preserveDrawingBuffer})))throw"Error creating WebGL context.";var c=this._gl.getParameter(this._gl.VERSION);this._webglversion=parseInt(c[6])}catch(L){console.error(L)}}isWebGL1(){return this._webglversion==1}setDefaultGLState(){this._gl.clearDepth(1),this._gl.clearStencil(0),this._gl.enable(this._gl.DEPTH_TEST),this._gl.depthFunc(this._gl.LEQUAL),this._gl.frontFace(this._gl.CCW),this._gl.cullFace(this._gl.BACK),this._gl.enable(this._gl.CULL_FACE),this._gl.enable(this._gl.BLEND),this._gl.blendEquation(this._gl.FUNC_ADD),this._gl.blendFunc(this._gl.SRC_ALPHA,this._gl.ONE_MINUS_SRC_ALPHA),this._gl.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearAlpha)}renderObjects(c,L,R,F,$,b,k){var B,J,X,ae,He,Pe,ue;L?(He=c.length-1,Pe=-1,ue=-1):(He=0,Pe=c.length,ue=1);for(var Oe=He;Oe!==Pe;Oe+=ue)if(B=c[Oe],B.render){if(J=B.object,X=B.buffer,ae=B[R],(B.hasAO||this._AOEnabled)&&B[R+"Shaded"]&&(ae=B[R+"Shaded"]),!ae)continue;this.setBlending(k),this.setDepthTest(ae.depthTest),this.setDepthWrite(ae.depthWrite),this.setPolygonOffset(ae.polygonOffset,ae.polygonOffsetFactor,ae.polygonOffsetUnits);var we=J._modelViewMatrix.isReflected();if(this.setMaterialFaces(ae,we),this.renderBuffer(F,$,b,ae,X,J),(this._outlineEnabled||ae.outline)&&!ae.wireframe&&ae.shaderID!=="basic"&&ae.opacity!==0){let Ze=this._outlineMaterial;ae.shaderID=="sphereimposter"?Ze=this._outlineSphereImposterMaterial:ae.shaderID=="stickimposter"&&(Ze=this._outlineStickImposterMaterial),this.renderBuffer(F,$,b,Ze,X,J)}}}renderSprites(c,L,R){this._currentGeometryGroupHash=-1,this._currentProgram=null,this._currentCamera=null,this._oldDepthWrite=-1,this._oldDepthTest=-1,this._oldDoubleSided=-1,this._currentMaterialId=-1,this._oldFlipSided=-1,this._lightsNeedUpdate=!0,this.sprites.render(c,L,this._currentWidth,this._currentHeight,R),this._currentGeometryGroupHash=-1,this._currentProgram=null,this._currentCamera=null,this._oldDepthWrite=-1,this._oldDepthTest=-1,this._oldDoubleSided=-1,this._currentMaterialId=-1,this._oldFlipSided=-1}}}),"./src/WebGL/SpritePlugin.ts":((r,e,t)=>{t.r(e),t.d(e,{SpritePlugin:()=>s});var a=t("./src/WebGL/shaders/index.ts");class s{constructor(){this.sprite={vertices:null,faces:null,vertexBuffer:null,elementBuffer:null,program:null,attributes:{},uniforms:null}}init(u){this.gl=u.context,this.renderer=u,this.precision=u.getPrecision(),this.sprite.vertices=new Float32Array(16),this.sprite.faces=new Uint16Array(6);var h=0;this.sprite.vertices[h++]=-1,this.sprite.vertices[h++]=-1,this.sprite.vertices[h++]=0,this.sprite.vertices[h++]=0,this.sprite.vertices[h++]=1,this.sprite.vertices[h++]=-1,this.sprite.vertices[h++]=1,this.sprite.vertices[h++]=0,this.sprite.vertices[h++]=1,this.sprite.vertices[h++]=1,this.sprite.vertices[h++]=1,this.sprite.vertices[h++]=1,this.sprite.vertices[h++]=-1,this.sprite.vertices[h++]=1,this.sprite.vertices[h++]=0,this.sprite.vertices[h++]=1,h=0,this.sprite.faces[h++]=0,this.sprite.faces[h++]=1,this.sprite.faces[h++]=2,this.sprite.faces[h++]=0,this.sprite.faces[h++]=2,this.sprite.faces[h++]=3,this.sprite.vertexBuffer=this.gl.createBuffer(),this.sprite.elementBuffer=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.sprite.vertexBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.sprite.vertices,this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.sprite.elementBuffer),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,this.sprite.faces,this.gl.STATIC_DRAW),this.sprite.program=this.createProgram(a.ShaderLib.sprite,this.precision||1),this.sprite.attributes={};const x={};this.sprite.attributes.position=this.gl.getAttribLocation(this.sprite.program,"position"),this.sprite.attributes.uv=this.gl.getAttribLocation(this.sprite.program,"uv"),x.uvOffset=this.gl.getUniformLocation(this.sprite.program,"uvOffset"),x.uvScale=this.gl.getUniformLocation(this.sprite.program,"uvScale"),x.rotation=this.gl.getUniformLocation(this.sprite.program,"rotation"),x.scale=this.gl.getUniformLocation(this.sprite.program,"scale"),x.alignment=this.gl.getUniformLocation(this.sprite.program,"alignment"),x.color=this.gl.getUniformLocation(this.sprite.program,"color"),x.map=this.gl.getUniformLocation(this.sprite.program,"map"),x.opacity=this.gl.getUniformLocation(this.sprite.program,"opacity"),x.useScreenCoordinates=this.gl.getUniformLocation(this.sprite.program,"useScreenCoordinates"),x.screenPosition=this.gl.getUniformLocation(this.sprite.program,"screenPosition"),x.modelViewMatrix=this.gl.getUniformLocation(this.sprite.program,"modelViewMatrix"),x.projectionMatrix=this.gl.getUniformLocation(this.sprite.program,"projectionMatrix"),x.fogNear=this.gl.getUniformLocation(this.sprite.program,"fogNear"),x.fogFar=this.gl.getUniformLocation(this.sprite.program,"fogFar"),x.fogColor=this.gl.getUniformLocation(this.sprite.program,"fogColor"),x.alphaTest=this.gl.getUniformLocation(this.sprite.program,"alphaTest"),this.sprite.uniforms=x}render(u,h,x,m,w){var A,D,I,y,l,c,L,R,F,$;if(!this.gl)throw new Error("WebGLRenderer not initialized");let b=[];(A=u?.__webglSprites)===null||A===void 0||A.forEach(Vt=>{(w&&Vt.material.depthTest==!1||!w&&Vt.material.depthTest)&&b.push(Vt)});let k=b.length;if(!k)return;const B=this.sprite.attributes,J=this.sprite.uniforms;if(!J)throw new Error("Uniforms not defined");var X=x*.5,ae=m*.5;this.gl.useProgram(this.sprite.program),this.gl.enableVertexAttribArray(B.position),this.gl.enableVertexAttribArray(B.uv),this.gl.disable(this.gl.CULL_FACE),this.gl.enable(this.gl.BLEND),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.sprite.vertexBuffer),this.gl.vertexAttribPointer(B.position,2,this.gl.FLOAT,!1,16,0),this.gl.vertexAttribPointer(B.uv,2,this.gl.FLOAT,!1,16,8),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.sprite.elementBuffer),this.gl.uniformMatrix4fv(J.projectionMatrix,!1,h.projectionMatrix.elements),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.uniform1i(J.map,0);var He=u.fog;He?(this.gl.uniform3f(J.fogColor,He.color.r,He.color.g,He.color.b),this.gl.uniform1f(J.fogNear,He.near),this.gl.uniform1f(J.fogFar,He.far)):(this.gl.uniform1f(J.fogNear,0),this.gl.uniform1f(J.fogFar,0));var Pe;let ue,Oe,we,Ze=[];for(Pe=0;Pe<k;Pe++)ue=b[Pe],Oe=ue.material,Oe&&(Oe.depthTest==!1&&!w||!ue.visible||Oe.opacity===0||(Oe.useScreenCoordinates?ue.z=-ue.position.z:(ue._modelViewMatrix.multiplyMatrices(h.matrixWorldInverse,ue.matrixWorld),ue.z=-ue._modelViewMatrix.elements[14])));for(b.sort(o),Pe=0;Pe<k;Pe++)if(ue=b[Pe],Oe=ue.material,!!Oe&&!(!ue.visible||Oe.opacity===0)&&Oe.map&&Oe.map.image&&Oe.map.image.width){this.gl.uniform1f(J?.alphaTest||null,Oe.alphaTest);var it=Oe.map.image.width,lt=Oe.map.image.height;Ze[0]=it*this.renderer.devicePixelRatio/x,Ze[1]=lt*this.renderer.devicePixelRatio/m,Oe.useScreenCoordinates===!0?(this.gl.uniform1i(J.useScreenCoordinates,1),this.gl.uniform3f(J.screenPosition,(ue.position.x*this.renderer.devicePixelRatio-X)/X,(ae-ue.position.y*this.renderer.devicePixelRatio)/ae,Math.max(0,Math.min(1,ue.position.z)))):(this.gl.uniform1i(J.useScreenCoordinates,0),this.gl.uniformMatrix4fv(J.modelViewMatrix,!1,ue._modelViewMatrix.elements)),we=1/(Oe.scaleByViewport?m:1),Ze[0]*=we*ue.scale.x,Ze[1]*=we*ue.scale.y;let Vt=(D=Oe?.alignment)===null||D===void 0?void 0:D.x,_e=(I=Oe?.alignment)===null||I===void 0?void 0:I.y;Oe.screenOffset&&(Vt=(Vt||0)+2*Oe.screenOffset.x/it,_e=(_e||0)+2*Oe.screenOffset.y/lt),this.gl.uniform2f(J.uvScale,((y=Oe?.uvScale)===null||y===void 0?void 0:y.x)||1,((l=Oe?.uvScale)===null||l===void 0?void 0:l.y)||1),this.gl.uniform2f(J.uvOffset,((c=Oe?.uvOffset)===null||c===void 0?void 0:c.x)||0,((L=Oe?.uvOffset)===null||L===void 0?void 0:L.y)||0),this.gl.uniform2f(J.alignment,Vt||0,_e||0),this.gl.uniform1f(J.opacity,Oe.opacity),this.gl.uniform3f(J.color,((R=Oe?.color)===null||R===void 0?void 0:R.r)||0,((F=Oe?.color)===null||F===void 0?void 0:F.g)||0,(($=Oe?.color)===null||$===void 0?void 0:$.b)||0),this.gl.uniform1f(J.rotation,ue.rotation),this.gl.uniform2fv(J.scale,Ze),this.renderer.setDepthTest(Oe.depthTest),this.renderer.setDepthWrite(Oe.depthWrite),this.renderer.setTexture(Oe.map,0),this.gl.drawElements(this.gl.TRIANGLES,6,this.gl.UNSIGNED_SHORT,0)}this.gl.enable(this.gl.CULL_FACE)}createProgram(u,h){if(!this.gl)throw new Error("WebGL Rendering context not found");var x=this.gl.createProgram();if(!x)throw new Error("Error creating webgl program");var m=this.gl.createShader(this.gl.FRAGMENT_SHADER),w=this.gl.createShader(this.gl.VERTEX_SHADER);if(!m)throw new Error("Unable to create fragment shader SpritePlugin.createProgram");if(!w)throw new Error("Unable to create vertex shader SpritePlugin.createProgram");var A="precision "+h+` float;
`;if(this.gl.shaderSource(m,A+u.fragmentShader),this.gl.shaderSource(w,A+u.vertexShader),this.gl.compileShader(m),this.gl.compileShader(w),!this.gl.getShaderParameter(m,this.gl.COMPILE_STATUS)||!this.gl.getShaderParameter(w,this.gl.COMPILE_STATUS))throw new Error(`Error compiling shader: 
      ${this.gl.getShaderInfoLog(m)} 
      ${this.gl.getShaderInfoLog(w)}`);return this.gl.attachShader(x,m),this.gl.attachShader(x,w),this.gl.linkProgram(x),this.gl.getProgramParameter(x,this.gl.LINK_STATUS)||console.error("Could not initialize shader"),x}}function o(f,u){return f.z!==u.z?u.z-f.z:u.id-f.id}}),"./src/WebGL/constants/Coloring.ts":((r,e,t)=>{t.r(e),t.d(e,{Coloring:()=>a});var a;(function(s){s[s.NoColors=0]="NoColors",s[s.FaceColors=1]="FaceColors",s[s.VertexColors=2]="VertexColors"})(a||(a={}))}),"./src/WebGL/constants/Shading.ts":((r,e,t)=>{t.r(e),t.d(e,{Shading:()=>a});var a;(function(s){s[s.NoShading=0]="NoShading",s[s.FlatShading=1]="FlatShading",s[s.SmoothShading=2]="SmoothShading"})(a||(a={}))}),"./src/WebGL/constants/Sides.ts":((r,e,t)=>{t.r(e),t.d(e,{BackSide:()=>s,DoubleSide:()=>o,FrontSide:()=>a});const a=0,s=1,o=2}),"./src/WebGL/constants/SpriteAlignment.ts":((r,e,t)=>{t.r(e),t.d(e,{SpriteAlignment:()=>s});var a=t("./src/WebGL/math/index.ts");const s={topLeft:new a.Vector2(1,-1),topCenter:new a.Vector2(0,-1),topRight:new a.Vector2(-1,-1),centerLeft:new a.Vector2(1,0),center:new a.Vector2(0,0),centerRight:new a.Vector2(-1,0),bottomLeft:new a.Vector2(1,1),bottomCenter:new a.Vector2(0,1),bottomRight:new a.Vector2(-1,1)}}),"./src/WebGL/constants/TextureConstants.ts":((r,e,t)=>{t.r(e),t.d(e,{ClampToEdgeWrapping:()=>a,FloatType:()=>h,LinearFilter:()=>s,LinearMipMapLinearFilter:()=>f,NearestFilter:()=>o,R32Format:()=>w,RFormat:()=>m,RGBAFormat:()=>x,UnsignedByteType:()=>u});const a=1001,s=1006,o=1007,f=1008,u=1009,h=1010,x=1021,m=1022,w=1023}),"./src/WebGL/constants/TextureOperations.ts":((r,e,t)=>{t.r(e),t.d(e,{TextureOperations:()=>a});var a;(function(s){s[s.MultiplyOperation=0]="MultiplyOperation",s[s.MixOperation=1]="MixOperation",s[s.AddOperation=2]="AddOperation"})(a||(a={}))}),"./src/WebGL/constants/index.ts":((r,e,t)=>{t.r(e),t.d(e,{BackSide:()=>s.BackSide,ClampToEdgeWrapping:()=>u.ClampToEdgeWrapping,Coloring:()=>a.Coloring,DoubleSide:()=>s.DoubleSide,FloatType:()=>u.FloatType,FrontSide:()=>s.FrontSide,LinearFilter:()=>u.LinearFilter,LinearMipMapLinearFilter:()=>u.LinearMipMapLinearFilter,NearestFilter:()=>u.NearestFilter,R32Format:()=>u.R32Format,RFormat:()=>u.RFormat,RGBAFormat:()=>u.RGBAFormat,Shading:()=>o.Shading,SpriteAlignment:()=>f.SpriteAlignment,TextureOperations:()=>h.TextureOperations,UnsignedByteType:()=>u.UnsignedByteType});var a=t("./src/WebGL/constants/Coloring.ts"),s=t("./src/WebGL/constants/Sides.ts"),o=t("./src/WebGL/constants/Shading.ts"),f=t("./src/WebGL/constants/SpriteAlignment.ts"),u=t("./src/WebGL/constants/TextureConstants.ts"),h=t("./src/WebGL/constants/TextureOperations.ts")}),"./src/WebGL/core/EventDispatcher.ts":((r,e,t)=>{t.r(e),t.d(e,{EventDispatcher:()=>a});class a{constructor(){this.listeners={}}dispatchEvent(o){var f=this.listeners[o.type];if(f!==void 0){o.target=this;for(var u=0,h=f.length;u<h;u++)f[u].call(this,o)}}removeEventListener(o,f){if(!f)this.listeners[o]=[];else{var u=this.listeners[o].indexOf(f);u!==-1&&this.listeners[o].splice(u,1)}}addEventListener(o,f){this.listeners[o]===void 0&&(this.listeners[o]=[]),this.listeners[o].indexOf(f)===-1&&this.listeners[o].push(f)}}}),"./src/WebGL/core/Geometry.ts":((r,e,t)=>{t.r(e),t.d(e,{Geometry:()=>x,GeometryGroup:()=>h,GeometryIDCount:()=>m});var a=t("./src/WebGL/materials/LineBasicMaterial.ts"),s=t("./src/WebGL/core/EventDispatcher.ts"),o=t("./src/WebGL/math/index.ts"),f=t("./src/colors.ts");const u=65535;class h{constructor(A=0){this.vertexArray=null,this.colorArray=null,this.normalArray=null,this.radiusArray=null,this.faceArray=null,this.lineArray=null,this.atomArray=Array(),this.vertices=0,this.faceidx=0,this.lineidx=0,this.__inittedArrays=!1,this.id=A}setColor(A){var D=this.vertexArray,I=this.colorArray;if(!D)throw new Error("vertex array not initialized");if(!I)throw new Error("color array not initialized");let y=f.CC.color(A);for(var l=0;l<D.length;l+=3)I[l]=y.r,I[l+1]=y.g,I[l+2]=y.b}setColors(A){var D=this.vertexArray,I=this.colorArray;if(!D)throw new Error("vertex array not initialized");if(!I)throw new Error("color array not initialized");if(D.length!=I.length){console.log("Cannot re-color geometry group due to mismatched lengths.");return}for(var y=0;y<D.length;y+=3){var l=A(D[y],D[y+1],D[y+2]);l instanceof f.Color||(l=f.CC.color(l)),I[y]=l.r,I[y+1]=l.g,I[y+2]=l.b}}getNumVertices(){return this.vertices}getVertices(){return this.vertexArray}getCentroid(){if(!this.vertexArray)throw new Error("vertex array not initialized");for(var A=new o.Vector3,D,I,y,l,c=0;c<this.vertices;++c)D=c*3,I=this.vertexArray[D],y=this.vertexArray[D+1],l=this.vertexArray[D+2],A.x+=I,A.y+=y,A.z+=l;return A.divideScalar(this.vertices),A}setNormals(){var A=this.faceArray,D=this.vertexArray,I=this.normalArray;if(!(!this.vertices||!this.faceidx)){if(!A)throw new Error("face array not initialized");if(!D)throw new Error("vertex array not initialized");if(!I)throw new Error("normal array not initialized");for(var y,l,c,L,R,F,$,b=0;b<A.length/3;++b)y=A[b*3]*3,l=A[b*3+1]*3,c=A[b*3+2]*3,L=new o.Vector3(D[y],D[y+1],D[y+2]),R=new o.Vector3(D[l],D[l+1],D[l+2]),F=new o.Vector3(D[c],D[c+1],D[c+2]),L.subVectors(L,R),F.subVectors(F,R),F.cross(L),$=F,$.normalize(),I[y]+=$.x,I[l]+=$.x,I[c]+=$.x,I[y+1]+=$.y,I[l+1]+=$.y,I[c+1]+=$.y,I[y+2]+=$.z,I[l+2]+=$.z,I[c+2]+=$.z}}setLineIndices(){if(this.faceidx&&!(this.lineArray&&this.lineArray.length==this.faceidx*2&&this.lineidx==this.faceidx*2)){var A=this.faceArray,D=this.lineArray=new Uint16Array(this.faceidx*2);if(this.lineidx=this.faceidx*2,!A)throw new Error("face array not initialized");for(var I=0;I<this.faceidx/3;++I){var y=I*3,l=y*2,c=A[y],L=A[y+1],R=A[y+2];D[l]=c,D[l+1]=L,D[l+2]=c,D[l+3]=R,D[l+4]=L,D[l+5]=R}}}vrml(A,D){var I,y,l,c,L,R,F,$,b,k,B,J,X,ae,He,Pe,ue,Oe,we="";if(we+=A+`Shape {
`+A+` appearance Appearance {
`+A+`  material Material {
`+A+"   diffuseColor "+((I=D?.color)===null||I===void 0?void 0:I.r)+" "+((y=D?.color)===null||y===void 0?void 0:y.g)+" "+((l=D?.color)===null||l===void 0?void 0:l.b)+`
`,D.wireframe&&this.colorArray){let it=this.colorArray;we+=A+"    emissiveColor "+it[0]+" "+it[1]+" "+it[2]+`
`}D!=null&&D.transparent&&(we+=A+"   transparency "+(1-D.opacity)+`
`),we+=A+`  }
`,we+=A+` }
`;var Ze=A;if(A+=" ",D instanceof a.LineBasicMaterial||D.wireframe){we+=A+`geometry IndexedLineSet {
`+A+` colorPerVertex TRUE
`+A+` coord Coordinate {
`+A+`  point [
`;let it,lt,Vt;for(let _e=0;_e<this.vertices;++_e){let pr=_e*3;it=(c=this.vertexArray)===null||c===void 0?void 0:c[pr],lt=(L=this.vertexArray)===null||L===void 0?void 0:L[pr+1],Vt=(R=this.vertexArray)===null||R===void 0?void 0:R[pr+2],we+=A+"   "+it+" "+lt+" "+Vt+`,
`}if(we+=A+`  ]
`,we+=A+` }
`,this.colorArray&&!D.wireframe){we+=A+` color Color {
`+A+`  color [
`;for(let _e=0;_e<this.vertices;++_e){let pr=_e*3;it=this.colorArray[pr],lt=this.colorArray[pr+1],Vt=this.colorArray[pr+2],we+=A+"   "+it+" "+lt+" "+Vt+`,
`}we+=A+`  ]
`,we+=A+` }
`}if(we+=A+` coordIndex [
`,D.wireframe&&this.faceArray)for(let _e=0;_e<this.faceidx;_e+=3)it=(F=this.faceArray)===null||F===void 0?void 0:F[_e],lt=($=this.faceArray)===null||$===void 0?void 0:$[_e+1],Vt=(b=this.faceArray)===null||b===void 0?void 0:b[_e+2],we+=A+"  "+it+", "+lt+", "+Vt+`, -1,
`;else for(let _e=0;_e<this.vertices-1;_e+=2)we+=A+"  "+_e+", "+(_e+1)+`, -1,
`;we+=A+` ]
`,we+=A+`}
`}else{we+=A+`geometry IndexedFaceSet {
`+A+` colorPerVertex TRUE
`+A+` normalPerVertex TRUE
`+A+` solid FALSE
`,we+=A+` coord Coordinate {
`+A+`  point [
`;let it,lt,Vt;for(let _e=0;_e<this.vertices;++_e){let pr=_e*3;it=(k=this.vertexArray)===null||k===void 0?void 0:k[pr],lt=(B=this.vertexArray)===null||B===void 0?void 0:B[pr+1],Vt=(J=this.vertexArray)===null||J===void 0?void 0:J[pr+2],we+=A+"   "+it+" "+lt+" "+Vt+`,
`}we+=A+`  ]
`,we+=A+` }
`,we+=A+` normal Normal {
`+A+`  vector [
`;for(let _e=0;_e<this.vertices;++_e){let pr=_e*3;it=(X=this.normalArray)===null||X===void 0?void 0:X[pr],lt=(ae=this.normalArray)===null||ae===void 0?void 0:ae[pr+1],Vt=(He=this.normalArray)===null||He===void 0?void 0:He[pr+2],we+=A+"   "+it+" "+lt+" "+Vt+`,
`}if(we+=A+`  ]
`,we+=A+` }
`,this.colorArray){we+=A+` color Color {
`+A+`  color [
`;for(let _e=0;_e<this.vertices;++_e){let pr=_e*3;it=this.colorArray[pr],lt=this.colorArray[pr+1],Vt=this.colorArray[pr+2],we+=A+"   "+it+" "+lt+" "+Vt+`,
`}we+=A+`  ]
`,we+=A+` }
`}we+=A+` coordIndex [
`;for(let _e=0;_e<this.faceidx;_e+=3)it=(Pe=this.faceArray)===null||Pe===void 0?void 0:Pe[_e],lt=(ue=this.faceArray)===null||ue===void 0?void 0:ue[_e+1],Vt=(Oe=this.faceArray)===null||Oe===void 0?void 0:Oe[_e+2],we+=A+"  "+it+", "+lt+", "+Vt+`, -1,
`;we+=A+` ]
`,we+=A+`}
`}return we+=Ze+"}",we}truncateArrayBuffers(A=!0,D=!1){var I=this.vertexArray,y=this.colorArray,l=this.normalArray,c=this.faceArray,L=this.lineArray,R=this.radiusArray;this.vertexArray=I?.subarray(0,this.vertices*3)||null,this.colorArray=y?.subarray(0,this.vertices*3)||null,A?(this.normalArray=l?.subarray(0,this.vertices*3)||null,this.faceArray=c?.subarray(0,this.faceidx)||null,this.lineidx>0?this.lineArray=L?.subarray(0,this.lineidx)||null:this.lineArray=new Uint16Array(0)):(this.normalArray=new Float32Array(0),this.faceArray=new Uint16Array(0),this.lineArray=new Uint16Array(0)),R&&(this.radiusArray=R.subarray(0,this.vertices)),D&&(this.normalArray&&(this.normalArray=new Float32Array(this.normalArray)),this.faceArray&&(this.faceArray=new Uint16Array(this.faceArray)),this.lineArray&&(this.lineArray=new Uint16Array(this.lineArray)),this.vertexArray&&(this.vertexArray=new Float32Array(this.vertexArray)),this.colorArray&&(this.colorArray=new Float32Array(this.colorArray)),this.radiusArray&&(this.radiusArray=new Float32Array(this.radiusArray))),this.__inittedArrays=!0}}class x extends s.EventDispatcher{constructor(A=!1,D=!1,I=!1){super(),this.name="",this.hasTangents=!1,this.dynamic=!0,this.verticesNeedUpdate=!1,this.elementsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.buffersNeedUpdate=!1,this.imposter=!1,this.instanced=!1,this.geometryGroups=[],this.groups=0,this.id=m++,this.mesh=A,this.radii=D,this.offset=I}updateGeoGroup(A=0){var D,I=this.groups>0?this.geometryGroups[this.groups-1]:null;return(!I||I.vertices+A>(((D=I?.vertexArray)===null||D===void 0?void 0:D.length)||0)/3)&&(I=this.addGeoGroup()),I}vrml(A,D){for(var I="",y=this.geometryGroups.length,l=0;l<y;l++){var c=this.geometryGroups[l];I+=c.vrml(A,D)+`,
`}return I}addGeoGroup(){var A=new h(this.geometryGroups.length);return this.geometryGroups.push(A),this.groups=this.geometryGroups.length,A.vertexArray=new Float32Array(u*3),A.colorArray=new Float32Array(u*3),this.mesh&&(A.normalArray=new Float32Array(u*3),A.faceArray=new Uint16Array(u*6),A.lineArray=new Uint16Array(u*6)),this.radii&&(A.radiusArray=new Float32Array(u)),A.useOffset=this.offset,A}setUpNormals(...A){for(var D=0;D<this.groups;D++){var I=this.geometryGroups[D];I.setNormals(...A)}}setColors(...A){for(var D=this.geometryGroups.length,I=0;I<D;I++){var y=this.geometryGroups[I];y.setColors(...A)}}setColor(...A){let D=this.geometryGroups.length;for(var I=0;I<D;I++){var y=this.geometryGroups[I];y.setColor(...A)}}setUpWireframe(...A){let D=this.geometryGroups.length;for(var I=0;I<D;I++){var y=this.geometryGroups[I];y.setLineIndices(...A)}}initTypedArrays(){for(var A=0;A<this.groups;A++){var D=this.geometryGroups[A];D.__inittedArrays!==!0&&D.truncateArrayBuffers(this.mesh,!1)}}dispose(){this.dispatchEvent({type:"dispose"})}get vertices(){for(var A=0,D=0;D<this.groups;D++)A+=this.geometryGroups[D].vertices;return A}}let m=0}),"./src/WebGL/core/Object3D.ts":((r,e,t)=>{t.r(e),t.d(e,{Light:()=>h,Object3D:()=>f,Object3DIDCount:()=>o,Scene:()=>u});var a=t("./src/WebGL/math/index.ts"),s=t("./src/colors.ts");let o=0;class f{constructor(){this.id=o++,this.name="",this.children=[],this.position=new a.Vector3,this.rotation=new a.Vector3,this.matrix=new a.Matrix4,this.matrixWorld=new a.Matrix4,this.quaternion=new a.Quaternion,this.eulerOrder="XYZ",this.up=new a.Vector3(0,1,0),this.scale=new a.Vector3(1,1,1),this.matrixAutoUpdate=!0,this.matrixWorldNeedsUpdate=!0,this.rotationAutoUpdate=!0,this.useQuaternion=!1,this.visible=!0}lookAt(m){this.matrix.lookAt(m,this.position,this.up),this.rotationAutoUpdate&&(this.useQuaternion===!0?console.error("Unimplemented math operation."):this.rotation instanceof a.Vector3&&this.rotation.setEulerFromRotationMatrix(this.matrix,this.eulerOrder))}add(m){if(m===this){console.error("Can't add $3Dmol.Object3D to itself");return}m.parent=this,this.children.push(m);for(var w=this;w.parent!==void 0;)w=w.parent;w!==void 0&&w instanceof u&&w.__addObject(m)}remove(m){var w=this.children.indexOf(m);if(w!==-1){m.parent=void 0,this.children.splice(w,1);for(var A=this;A.parent!==void 0;)A=A.parent;A!==void 0&&A instanceof u&&A.__removeObject(m)}}vrml(m){m||(m=" ");var w=2*Math.atan2(this.quaternion.lengthxyz(),this.quaternion.w),A=0,D=0,I=0;if(w!=0){let c=Math.sin(w/2);A=this.quaternion.x/c,D=this.quaternion.y/c,I=this.quaternion.z/c}var y=m+`Transform {
`+m+" center "+this.position.x+" "+this.position.y+" "+this.position.z+`
`+m+" rotation "+A+" "+D+" "+I+" "+w+`
`+m+` children [
`;this.geometry&&(y+=this.geometry.vrml(m,this.material));for(var l=0;l<this.children.length;l++)y+=this.children[l].vrml(m+" ")+`,
`;return y+=` ]
`,y+="}",y}updateMatrix(){this.matrix.setPosition(this.position),this.useQuaternion===!1&&this.rotation instanceof a.Vector3?this.matrix.setRotationFromEuler(this.rotation,this.eulerOrder):this.matrix.setRotationFromQuaternion(this.quaternion),(this.scale.x!==1||this.scale.y!==1||this.scale.z!==1)&&this.matrix.scale(this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(m){this.matrixAutoUpdate===!0&&this.updateMatrix(),(this.matrixWorldNeedsUpdate===!0||m===!0)&&(this.parent===void 0?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1;for(var w=0;w<this.children.length;w++)this.children[w].updateMatrixWorld(!0)}clone(m){m===void 0&&(m=new f),m.name=this.name,m.up.copy(this.up),m.position.copy(this.position),m.rotation instanceof a.Vector3&&this.rotation instanceof a.Vector3?m.rotation.copy(this.rotation):m.rotation=this.rotation,m.eulerOrder=this.eulerOrder,m.scale.copy(this.scale),m.rotationAutoUpdate=this.rotationAutoUpdate,m.matrix.copy(this.matrix),m.matrixWorld.copy(this.matrixWorld),m.quaternion.copy(this.quaternion),m.matrixAutoUpdate=this.matrixAutoUpdate,m.matrixWorldNeedsUpdate=this.matrixWorldNeedsUpdate,m.useQuaternion=this.useQuaternion,m.visible=this.visible;for(var w=0;w<this.children.length;w++){var A=this.children[w];m.add(A.clone())}return m}setVisible(m){this.visible=m;for(var w=0;w<this.children.length;w++){var A=this.children[w];A.setVisible(m)}}}class u extends f{constructor(){super(...arguments),this.fog=null,this.overrideMaterial=null,this.matrixAutoUpdate=!1,this.__objects=[],this.__lights=[],this.__objectsAdded=[],this.__objectsRemoved=[]}__addObject(m){if(m instanceof h)this.__lights.indexOf(m)===-1&&this.__lights.push(m),m.target&&m.target.parent===void 0&&this.add(m.target);else if(this.__objects.indexOf(m)===-1){this.__objects.push(m),this.__objectsAdded.push(m);var w=this.__objectsRemoved.indexOf(m);w!==-1&&this.__objectsRemoved.splice(w,1)}for(var A=0;A<m.children.length;A++)this.__addObject(m.children[A])}__removeObject(m){var w;if(m instanceof h)w=this.__lights.indexOf(m),w!==-1&&this.__lights.splice(w,1);else if(w=this.__objects.indexOf(m),w!==-1){this.__objects.splice(w,1),this.__objectsRemoved.push(m);var A=this.__objectsAdded.indexOf(m);A!==-1&&this.__objectsAdded.splice(w,1)}for(var D=0;D<m.children.length;D++)this.__removeObject(m.children[D])}}class h extends f{constructor(m,w=1){super(),this.position=new a.Vector3(0,1,0),this.target=new f,this.castShadow=!1,this.onlyShadow=!1,this.color=new s.Color(m),this.intensity=w}}}),"./src/WebGL/core/Projector.ts":((r,e,t)=>{t.r(e),t.d(e,{Projector:()=>o});var a=t("./src/WebGL/math/index.ts");const s=new a.Matrix4;class o{static unprojectVector(u,h){return h.projectionMatrixInverse.getInverse(h.projectionMatrix),s.multiplyMatrices(h.matrixWorld,h.projectionMatrixInverse),u.applyProjection(s)}static projectVector(u,h){return h.matrixWorldInverse.getInverse(h.matrixWorld),s.multiplyMatrices(h.projectionMatrix,h.matrixWorldInverse),u.applyProjection(s)}projectVector(u,h){return o.projectVector(u,h)}unprojectVector(u,h){return o.unprojectVector(u,h)}}}),"./src/WebGL/core/Raycaster.ts":((r,e,t)=>{t.r(e),t.d(e,{Raycaster:()=>u,intersectObject:()=>c});var a=t("./src/WebGL/math/index.ts"),s=t("./src/WebGL/shapes/index.ts");const o=(L,R)=>L.distance-R.distance,f=new a.Matrix4;class u{constructor(R,F,$,b){this.precision=1e-4,this.linePrecision=.2,this.ray=new a.Ray(R,F),this.ray.direction.lengthSq()>0&&this.ray.direction.normalize(),this.near=b||0,this.far=$||1/0}set(R,F){this.ray.set(R,F)}setFromCamera(R,F){F.ortho?(this.ray.origin.set(R.x,R.y,(F.near+F.far)/(F.near-F.far)).unproject(F),this.ray.direction.set(0,0,-1).transformDirection(F.matrixWorld)):(this.ray.origin.setFromMatrixPosition(F.matrixWorld),this.ray.direction.set(R.x,R.y,R.z),F.projectionMatrixInverse.getInverse(F.projectionMatrix),f.multiplyMatrices(F.matrixWorld,F.projectionMatrixInverse),this.ray.direction.applyProjection(f),this.ray.direction.sub(this.ray.origin).normalize())}intersectObjects(R,F){for(var $=[],b=0,k=F.length;b<k;b++)c(R,F[b],this,$);return $.sort(o),$}}const h=L=>Math.min(Math.max(L,-1),1);var x=new s.Sphere,m=new s.Cylinder,w=new s.Triangle,A=new a.Vector3,D=new a.Vector3,I=new a.Vector3,y=new a.Vector3,l=new a.Vector3;function c(L,R,F,$){if(l.getPositionFromMatrix(L.matrixWorld),R.intersectionShape===void 0||R.hidden)return $;var b=R.intersectionShape,k=F.linePrecision;k*=L.matrixWorld.getMaxScaleOnAxis();var B=k*k;if(R.boundingSphere!==void 0&&R.boundingSphere instanceof s.Sphere&&(x.copy(R.boundingSphere),x.applyMatrix4(L.matrixWorld),!F.ray.isIntersectionSphere(x)))return $;var J,X,ae,He,Pe,ue,Oe,we,Ze,it,lt,Vt,_e,pr;for(J=0,X=b.triangle.length;J<X;J++)if(b.triangle[J]instanceof s.Triangle){if(w.copy(b.triangle[J]),w.applyMatrix4(L.matrixWorld),ae=w.getNormal(),He=F.ray.direction.dot(ae),He>=0||(A.subVectors(w.a,F.ray.origin),Oe=ae.dot(A)/He,Oe<0))continue;D.copy(F.ray.direction).multiplyScalar(Oe).add(F.ray.origin),D.sub(w.a),I.copy(w.b).sub(w.a),y.copy(w.c).sub(w.a);var _s=I.dot(y),Ei=I.lengthSq(),Bl=y.lengthSq();if(Vt=(Ei*D.dot(y)-_s*D.dot(I))/(Ei*Bl-_s*_s),Vt<0||Vt>1||(lt=(D.dot(I)-Vt*_s)/Ei,lt<0||lt>1||lt+Vt>1))continue;$.push({clickable:R,distance:Oe})}for(J=0,X=b.cylinder.length;J<X;J++)if(b.cylinder[J]instanceof s.Cylinder){if(m.copy(b.cylinder[J]),m.applyMatrix4(L.matrixWorld),A.subVectors(m.c1,F.ray.origin),Pe=A.dot(m.direction),ue=A.dot(F.ray.direction),He=h(F.ray.direction.dot(m.direction)),Ze=1-He*He,Ze===0)continue;_e=(He*ue-Pe)/Ze,pr=(ue-He*Pe)/Ze,D.copy(m.direction).multiplyScalar(_e).add(m.c1),I.copy(F.ray.direction).multiplyScalar(pr).add(F.ray.origin),we=y.subVectors(D,I).lengthSq();var Wl=m.radius*m.radius;if(we<=Wl){if(it=(He*Pe-ue)*(He*Pe-ue)-Ze*(A.lengthSq()-Pe*Pe-Wl),it<=0?Vt=Oe=Math.sqrt(we):Vt=Oe=(ue-He*Pe-Math.sqrt(it))/Ze,lt=He*Vt-Pe,lt<0||lt*lt>m.lengthSq()||Vt<0)continue;$.push({clickable:R,distance:Oe})}}for(J=0,X=b.line.length;J<X;J+=2){D.copy(b.line[J]),D.applyMatrix4(L.matrixWorld),I.copy(b.line[J+1]),I.applyMatrix4(L.matrixWorld),y.subVectors(I,D);var Ep=y.lengthSq();y.normalize(),A.subVectors(D,F.ray.origin);var Lp=A.dot(y);ue=A.dot(F.ray.direction),He=h(F.ray.direction.dot(y)),Ze=1-He*He,Ze!==0&&(_e=(He*ue-Lp)/Ze,pr=(ue-He*Lp)/Ze,D.add(y.multiplyScalar(_e)),I.copy(F.ray.direction).multiplyScalar(pr).add(F.ray.origin),we=y.subVectors(I,D).lengthSq(),we<B&&_e*_e<Ep&&$.push({clickable:R,distance:pr}))}for(J=0,X=b.sphere.length;J<X;J++)if(b.sphere[J]instanceof s.Sphere&&(x.copy(b.sphere[J]),x.applyMatrix4(L.matrixWorld),F.ray.isIntersectionSphere(x))){D.subVectors(x.center,F.ray.origin);var Op=D.dot(F.ray.direction);if(it=Op*Op-(D.lengthSq()-x.radius*x.radius),Op<0)return $;it<=0?Oe=Op:Oe=Op-Math.sqrt(it),$.push({clickable:R,distance:Oe})}return $}}),"./src/WebGL/core/Texture.ts":((r,e,t)=>{t.r(e),t.d(e,{Texture:()=>u,TextureIdCount:()=>h});var a=t("./src/WebGL/constants/TextureConstants.ts"),s=t("./src/WebGL/math/index.ts"),o=t("./src/WebGL/core/EventDispatcher.ts"),f=t("./src/WebGL/core/UVMapping.ts");class u extends o.EventDispatcher{constructor(m,w){super(),this.id=h++,this.name="",this.image=m,this.mapping=new f.UVMapping,this.wrapS=a.ClampToEdgeWrapping,this.wrapT=a.ClampToEdgeWrapping,this.anisotropy=1,w?(this.format=a.RFormat,this.type=a.FloatType,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.magFilter=a.NearestFilter,this.minFilter=a.NearestFilter):(this.format=a.RGBAFormat,this.type=a.UnsignedByteType,this.offset=new s.Vector2(0,0),this.repeat=new s.Vector2(1,1),this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.magFilter=a.LinearFilter,this.minFilter=a.LinearMipMapLinearFilter),this.needsUpdate=!1,this.onUpdate=null}clone(m=new u){return m.image=this.image,m.mapping=this.mapping,m.wrapS=this.wrapS,m.wrapT=this.wrapT,m.magFilter=this.magFilter,m.minFilter=this.minFilter,m.anisotropy=this.anisotropy,m.format=this.format,m.type=this.type,m.offset.copy(this.offset),m.repeat.copy(this.repeat),m.premultiplyAlpha=this.premultiplyAlpha,m.flipY=this.flipY,m.unpackAlignment=this.unpackAlignment,m}dispose(){this.dispatchEvent({type:"dispose"})}}let h=0}),"./src/WebGL/core/UVMapping.ts":((r,e,t)=>{t.r(e),t.d(e,{UVMapping:()=>a});class a{}}),"./src/WebGL/core/index.ts":((r,e,t)=>{t.r(e),t.d(e,{EventDispatcher:()=>a.EventDispatcher,Geometry:()=>s.Geometry,GeometryGroup:()=>s.GeometryGroup,GeometryIDCount:()=>s.GeometryIDCount,Light:()=>o.Light,Object3D:()=>o.Object3D,Object3DIDCount:()=>o.Object3DIDCount,Projector:()=>f.Projector,Raycaster:()=>u.Raycaster,Scene:()=>o.Scene,Texture:()=>h.Texture,TextureIdCount:()=>h.TextureIdCount,UVMapping:()=>x.UVMapping,intersectObject:()=>u.intersectObject});var a=t("./src/WebGL/core/EventDispatcher.ts"),s=t("./src/WebGL/core/Geometry.ts"),o=t("./src/WebGL/core/Object3D.ts"),f=t("./src/WebGL/core/Projector.ts"),u=t("./src/WebGL/core/Raycaster.ts"),h=t("./src/WebGL/core/Texture.ts"),x=t("./src/WebGL/core/UVMapping.ts")}),"./src/WebGL/index.ts":((r,e,t)=>{t.r(e),t.d(e,{BackSide:()=>a.BackSide,Camera:()=>m.Camera,ClampToEdgeWrapping:()=>a.ClampToEdgeWrapping,Coloring:()=>a.Coloring,Cylinder:()=>x.Cylinder,DoubleSide:()=>a.DoubleSide,EventDispatcher:()=>s.EventDispatcher,FloatType:()=>a.FloatType,Fog:()=>w.Fog,FrontSide:()=>a.FrontSide,Geometry:()=>s.Geometry,GeometryGroup:()=>s.GeometryGroup,GeometryIDCount:()=>s.GeometryIDCount,ImposterMaterial:()=>o.ImposterMaterial,InstancedMaterial:()=>o.InstancedMaterial,Light:()=>s.Light,Line:()=>u.Line,LineBasicMaterial:()=>o.LineBasicMaterial,LineStyle:()=>u.LineStyle,LinearFilter:()=>a.LinearFilter,LinearMipMapLinearFilter:()=>a.LinearMipMapLinearFilter,Material:()=>o.Material,MaterialIdCount:()=>o.MaterialIdCount,Matrix3:()=>f.Matrix3,Matrix4:()=>f.Matrix4,Mesh:()=>u.Mesh,MeshDoubleLambertMaterial:()=>o.MeshDoubleLambertMaterial,MeshLambertMaterial:()=>o.MeshLambertMaterial,MeshOutlineMaterial:()=>o.MeshOutlineMaterial,NearestFilter:()=>a.NearestFilter,Object3D:()=>s.Object3D,Object3DIDCount:()=>s.Object3DIDCount,Projector:()=>s.Projector,Quaternion:()=>f.Quaternion,R32Format:()=>a.R32Format,RFormat:()=>a.RFormat,RGBAFormat:()=>a.RGBAFormat,Ray:()=>f.Ray,Raycaster:()=>s.Raycaster,Renderer:()=>A.Renderer,Scene:()=>s.Scene,ShaderLib:()=>h.ShaderLib,ShaderUtils:()=>h.ShaderUtils,Shading:()=>a.Shading,Sphere:()=>x.Sphere,SphereImposterMaterial:()=>o.SphereImposterMaterial,SphereImposterOutlineMaterial:()=>o.SphereImposterOutlineMaterial,Sprite:()=>u.Sprite,SpriteAlignment:()=>a.SpriteAlignment,SpriteMaterial:()=>o.SpriteMaterial,SpritePlugin:()=>D.SpritePlugin,StickImposterMaterial:()=>o.StickImposterMaterial,StickImposterOutlineMaterial:()=>o.StickImposterOutlineMaterial,Texture:()=>s.Texture,TextureIdCount:()=>s.TextureIdCount,TextureOperations:()=>a.TextureOperations,Triangle:()=>x.Triangle,UVMapping:()=>s.UVMapping,UnsignedByteType:()=>a.UnsignedByteType,Vector2:()=>f.Vector2,Vector3:()=>f.Vector3,VolumetricMaterial:()=>o.VolumetricMaterial,basic:()=>h.basic,clamp:()=>f.clamp,clone:()=>h.clone,conversionMatrix3:()=>f.conversionMatrix3,degToRad:()=>f.degToRad,instanced:()=>h.instanced,intersectObject:()=>s.intersectObject,lambert:()=>h.lambert,lambertdouble:()=>h.lambertdouble,outline:()=>h.outline,screen:()=>h.screen,screenaa:()=>h.screenaa,sphereimposter:()=>h.sphereimposter,sphereimposteroutline:()=>h.sphereimposteroutline,sprite:()=>h.sprite,stickimposter:()=>h.stickimposter,stickimposteroutline:()=>h.stickimposteroutline,volumetric:()=>h.volumetric});var a=t("./src/WebGL/constants/index.ts"),s=t("./src/WebGL/core/index.ts"),o=t("./src/WebGL/materials/index.ts"),f=t("./src/WebGL/math/index.ts"),u=t("./src/WebGL/objects/index.ts"),h=t("./src/WebGL/shaders/index.ts"),x=t("./src/WebGL/shapes/index.ts"),m=t("./src/WebGL/Camera.ts"),w=t("./src/WebGL/Fog.ts"),A=t("./src/WebGL/Renderer.ts"),D=t("./src/WebGL/SpritePlugin.ts")}),"./src/WebGL/materials/ImposterMaterial.ts":((r,e,t)=>{t.r(e),t.d(e,{ImposterMaterial:()=>h});var a=t("./src/WebGL/constants/Coloring.ts"),s=t("./src/WebGL/constants/Shading.ts"),o=t("./src/colors.ts"),f=t("./src/WebGL/math/index.ts"),u=t("./src/WebGL/materials/Material.ts");class h extends u.Material{constructor(m){super(),this.color=new o.Color(16777215),this.ambient=new o.Color(1048575),this.emissive=new o.Color(0),this.imposter=!0,this.wrapAround=!1,this.wrapRGB=new f.Vector3(1,1,1),this.map=void 0,this.lightMap=null,this.specularMap=null,this.envMap=null,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.shading=s.Shading.SmoothShading,this.shaderID=null,this.vertexColors=a.Coloring.NoColors,this.skinning=!1,this.setValues(m)}clone(m=new h){return super.clone.call(this,m),m.color.copy(this.color),m.ambient.copy(this.ambient),m.emissive.copy(this.emissive),m.wrapAround=this.wrapAround,m.wrapRGB.copy(this.wrapRGB),m.map=this.map,m.lightMap=this.lightMap,m.specularMap=this.specularMap,m.envMap=this.envMap,m.combine=this.combine,m.reflectivity=this.reflectivity,m.refractionRatio=this.refractionRatio,m.fog=this.fog,m.shading=this.shading,m.shaderID=this.shaderID,m.vertexColors=this.vertexColors,m.skinning=this.skinning,m.morphTargets=this.morphTargets,m.morphNormals=this.morphNormals,m}}}),"./src/WebGL/materials/InstancedMaterial.ts":((r,e,t)=>{t.r(e),t.d(e,{InstancedMaterial:()=>h});var a=t("./src/WebGL/constants/Coloring.ts"),s=t("./src/WebGL/constants/Shading.ts"),o=t("./src/colors.ts"),f=t("./src/WebGL/math/index.ts"),u=t("./src/WebGL/materials/Material.ts");class h extends u.Material{constructor(m){super(),this.color=new o.Color(16777215),this.ambient=new o.Color(1048575),this.emissive=new o.Color(0),this.wrapAround=!1,this.wrapRGB=new f.Vector3(1,1,1),this.map=void 0,this.lightMap=null,this.specularMap=null,this.envMap=null,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.shading=s.Shading.SmoothShading,this.shaderID="instanced",this.vertexColors=a.Coloring.NoColors,this.skinning=!1,this.sphere=null,this.setValues(m)}clone(m=new h){return super.clone.call(this,m),m.color.copy(this.color),m.ambient.copy(this.ambient),m.emissive.copy(this.emissive),m.wrapAround=this.wrapAround,m.wrapRGB.copy(this.wrapRGB),m.map=this.map,m.lightMap=this.lightMap,m.specularMap=this.specularMap,m.envMap=this.envMap,m.combine=this.combine,m.reflectivity=this.reflectivity,m.refractionRatio=this.refractionRatio,m.fog=this.fog,m.shading=this.shading,m.shaderID=this.shaderID,m.vertexColors=this.vertexColors,m.skinning=this.skinning,m.morphTargets=this.morphTargets,m.morphNormals=this.morphNormals,m.sphere=this.sphere,m}}}),"./src/WebGL/materials/LineBasicMaterial.ts":((r,e,t)=>{t.r(e),t.d(e,{LineBasicMaterial:()=>o});var a=t("./src/colors.ts"),s=t("./src/WebGL/materials/Material.ts");class o extends s.Material{constructor(u){super(),this.color=new a.Color(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.vertexColors=!1,this.fog=!0,this.shaderID="basic",this.setValues(u)}clone(u=new o){return super.clone.call(this,u),u.color.copy(this.color),u}}}),"./src/WebGL/materials/Material.ts":((r,e,t)=>{t.r(e),t.d(e,{Material:()=>u,MaterialIdCount:()=>h});var a=t("./src/WebGL/constants/Sides.ts"),s=t("./src/WebGL/core/index.ts"),o=t("./src/WebGL/math/index.ts"),f=t("./src/colors.ts");class u extends s.EventDispatcher{constructor(){super(...arguments),this.id=h++,this.name="",this.side=a.FrontSide,this.opacity=1,this.transparent=!1,this.depthTest=!0,this.depthWrite=!0,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.alphaTest=0,this.visible=!0,this.needsUpdate=!0,this.outline=!1,this.wireframe=!1,this.shaded=!1}setValues(m={}){if(m!==void 0)for(var w in m){var A=m[w];if(A===void 0){console.warn("$3Dmol.Material: '"+w+"' parameter is undefined.");continue}if(w in this){var D=this[w];D instanceof f.Color&&A instanceof f.Color?D.copy(A):D instanceof f.Color?D.set(A):D instanceof o.Vector3&&A instanceof o.Vector3?D.copy(A):this[w]=A}}}clone(m=new u){return m.name=this.name,m.side=this.side,m.opacity=this.opacity,m.transparent=this.transparent,m.depthTest=this.depthTest,m.depthWrite=this.depthWrite,m.polygonOffset=this.polygonOffset,m.polygonOffsetFactor=this.polygonOffsetFactor,m.polygonOffsetUnits=this.polygonOffsetUnits,m.alphaTest=this.alphaTest,m.overdraw=this.overdraw,m.visible=this.visible,m}makeShaded(m){this.shaded=!0,this.uniforms&&(this.uniforms.shading={type:"i",value:m},this.uniforms.vWidth={type:"f",value:1},this.uniforms.vHeight={type:"f",value:1})}dispose(){this.dispatchEvent({type:"dispose"})}}let h=0}),"./src/WebGL/materials/MeshDoubleLambertMaterial.ts":((r,e,t)=>{t.r(e),t.d(e,{MeshDoubleLambertMaterial:()=>o});var a=t("./src/WebGL/constants/Sides.ts"),s=t("./src/WebGL/materials/MeshLambertMaterial.ts");class o extends s.MeshLambertMaterial{constructor(u){super(u),this.shaderID="lambertdouble",this.side=a.DoubleSide,this.outline=!1}clone(u=new o){return super.clone.call(this,u),u}}}),"./src/WebGL/materials/MeshLambertMaterial.ts":((r,e,t)=>{t.r(e),t.d(e,{MeshLambertMaterial:()=>h});var a=t("./src/WebGL/constants/Coloring.ts"),s=t("./src/WebGL/constants/Shading.ts"),o=t("./src/WebGL/materials/Material.ts"),f=t("./src/colors.ts"),u=t("./src/WebGL/math/index.ts");class h extends o.Material{constructor(m){super(),this.color=new f.Color(16777215),this.ambient=new f.Color(1048575),this.emissive=new f.Color(0),this.wrapAround=!1,this.wrapRGB=new u.Vector3(1,1,1),this.map=void 0,this.lightMap=null,this.specularMap=null,this.envMap=null,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.shading=s.Shading.SmoothShading,this.shaderID="lambert",this.vertexColors=a.Coloring.NoColors,this.skinning=!1,this.setValues(m)}clone(m=new h){return super.clone.call(this,m),m.color.copy(this.color),m.ambient.copy(this.ambient),m.emissive.copy(this.emissive),m.wrapAround=this.wrapAround,m.wrapRGB.copy(this.wrapRGB),m.map=this.map,m.lightMap=this.lightMap,m.specularMap=this.specularMap,m.envMap=this.envMap,m.combine=this.combine,m.reflectivity=this.reflectivity,m.refractionRatio=this.refractionRatio,m.fog=this.fog,m.shading=this.shading,m.shaderID=this.shaderID,m.vertexColors=this.vertexColors,m.skinning=this.skinning,m.morphTargets=this.morphTargets,m.morphNormals=this.morphNormals,m}}}),"./src/WebGL/materials/MeshOutlineMaterial.ts":((r,e,t)=>{t.r(e),t.d(e,{MeshOutlineMaterial:()=>o});var a=t("./src/colors.ts"),s=t("./src/WebGL/materials/Material.ts");class o extends s.Material{constructor(u){super(),u=u||{},this.fog=!0,this.shaderID="outline",this.wireframe=!1,this.outlineColor=a.CC.color(u.color||new a.Color(0,0,0)),this.outlineWidth=u.width||.1,this.outlinePushback=u.pushback||1,this.outlineMaxPixels=u.maxpixels||0}clone(u=new o){return super.clone.call(this,u),u.fog=this.fog,u.shaderID=this.shaderID,u.wireframe=this.wireframe,u.outlineColor=this.outlineColor,u.outlineWidth=this.outlineWidth,u.outlinePushback=this.outlinePushback,u.outlineMaxPixels=this.outlineMaxPixels,u}}}),"./src/WebGL/materials/SphereImposterMaterial.ts":((r,e,t)=>{t.r(e),t.d(e,{SphereImposterMaterial:()=>s});var a=t("./src/WebGL/materials/ImposterMaterial.ts");class s extends a.ImposterMaterial{constructor(f){super(f),this.shaderID="sphereimposter",this.setValues(f)}clone(f=new s){return super.clone.call(this,f),f}}}),"./src/WebGL/materials/SphereImposterOutlineMaterial.ts":((r,e,t)=>{t.r(e),t.d(e,{SphereImposterOutlineMaterial:()=>o});var a=t("./src/colors.ts"),s=t("./src/WebGL/materials/ImposterMaterial.ts");class o extends s.ImposterMaterial{constructor(u){super(u),u=u||{},this.shaderID="sphereimposteroutline",this.outlineColor=a.CC.color(u.color||new a.Color(0,0,0)),this.outlineWidth=u.width||.1,this.outlinePushback=u.pushback||1,this.outlineMaxPixels=u.maxpixels||0,this.setValues(u)}clone(u=new o){return super.clone.call(this,u),u.outlineColor=this.outlineColor,u.outlineWidth=this.outlineWidth,u.outlinePushback=this.outlinePushback,u.outlineMaxPixels=this.outlineMaxPixels,u}}}),"./src/WebGL/materials/SpriteMaterial.ts":((r,e,t)=>{t.r(e),t.d(e,{SpriteMaterial:()=>h});var a=t("./src/WebGL/constants/SpriteAlignment.ts"),s=t("./src/WebGL/core/Texture.ts"),o=t("./src/colors.ts"),f=t("./src/WebGL/math/index.ts"),u=t("./src/WebGL/materials/Material.ts");class h extends u.Material{constructor(m){super(),this.color=new o.Color(16777215),this.map=new s.Texture,this.useScreenCoordinates=!0,this.fog=!1,this.uvOffset=new f.Vector2(0,0),this.uvScale=new f.Vector2(1,1),this.depthTest=!this.useScreenCoordinates,this.sizeAttenuation=!this.useScreenCoordinates,this.screenOffset=this.screenOffset,this.scaleByViewPort=!this.sizeAttenuation,this.alignment=a.SpriteAlignment.center.clone(),this.setValues(m),m=m||{},m.depthTest===void 0&&(this.depthTest=!this.useScreenCoordinates),m.sizeAttenuation===void 0&&(this.sizeAttenuation=!this.useScreenCoordinates),m.scaleByViewPort===void 0&&(this.scaleByViewPort=!this.sizeAttenuation)}clone(m=new h){return super.clone.call(this,m),m.color.copy(this.color),m.map=this.map,m.useScreenCoordinates=this.useScreenCoordinates,m.screenOffset=this.screenOffset,m.sizeAttenuation=this.sizeAttenuation,m.scaleByViewport=this.scaleByViewPort,m.alignment.copy(this.alignment),m.uvOffset.copy(this.uvOffset),m}}}),"./src/WebGL/materials/StickImposterMaterial.ts":((r,e,t)=>{t.r(e),t.d(e,{StickImposterMaterial:()=>s});var a=t("./src/WebGL/materials/ImposterMaterial.ts");class s extends a.ImposterMaterial{constructor(f){super(f),this.shaderID="stickimposter",this.setValues(f)}clone(f=new s){return super.clone.call(this,f),f}}}),"./src/WebGL/materials/StickImposterOutlineMaterial.ts":((r,e,t)=>{t.r(e),t.d(e,{StickImposterOutlineMaterial:()=>o});var a=t("./src/colors.ts"),s=t("./src/WebGL/materials/ImposterMaterial.ts");class o extends s.ImposterMaterial{constructor(u={}){super(u),this.shaderID="stickimposteroutline",this.outlineColor=new a.Color(0,0,0),this.outlineWidth=.1,this.outlinePushback=1,this.outlineMaxPixels=0,u.color&&(this.outlineColor=a.CC.color(u.color)),u.width&&(this.outlineWidth=u.width),u.pushback&&(this.outlinePushback=u.pushback),u.maxpixels&&(this.outlineMaxPixels=u.maxpixels),this.setValues(u)}clone(u=new o){return super.clone.call(this,u),u.outlineColor=this.outlineColor,u.outlineWidth=this.outlineWidth,u.outlinePushback=this.outlinePushback,u.outlineMaxPixels=this.outlineMaxPixels,u}}}),"./src/WebGL/materials/VolumetricMaterial.ts":((r,e,t)=>{t.r(e),t.d(e,{VolumetricMaterial:()=>f});var a=t("./src/WebGL/constants/Sides.ts"),s=t("./src/colors.ts"),o=t("./src/WebGL/materials/Material.ts");class f extends o.Material{constructor(h){super(),this.transparent=!1,this.volumetric=!0,this.color=new s.Color(16777215),this.transferfn=null,this.map=void 0,this.extent=[],this.maxdepth=100,this.unit=0,this.texmatrix=null,this.transfermin=-1,this.transfermax=1,this.subsamples=5,this.shaderID="volumetric",this.side=a.FrontSide,this.setValues(h)}clone(h=new f){return super.clone.call(this,h),h.transparent=this.transparent,h.volumetric=this.volumetric,h.color=this.color,h.transferfn=this.transferfn,h.map=this.map,h.extent=this.extent,h.maxdepth=this.maxdepth,h.unit=this.unit,h.texmatrix=this.texmatrix,h.transfermin=this.transfermin,h.transfermax=this.transfermax,h.subsamples=this.subsamples,h.shaderID=this.shaderID,h.side=this.side,h}}}),"./src/WebGL/materials/index.ts":((r,e,t)=>{t.r(e),t.d(e,{ImposterMaterial:()=>a.ImposterMaterial,InstancedMaterial:()=>s.InstancedMaterial,LineBasicMaterial:()=>o.LineBasicMaterial,Material:()=>f.Material,MaterialIdCount:()=>f.MaterialIdCount,MeshDoubleLambertMaterial:()=>u.MeshDoubleLambertMaterial,MeshLambertMaterial:()=>h.MeshLambertMaterial,MeshOutlineMaterial:()=>x.MeshOutlineMaterial,SphereImposterMaterial:()=>m.SphereImposterMaterial,SphereImposterOutlineMaterial:()=>w.SphereImposterOutlineMaterial,SpriteMaterial:()=>A.SpriteMaterial,StickImposterMaterial:()=>D.StickImposterMaterial,StickImposterOutlineMaterial:()=>I.StickImposterOutlineMaterial,VolumetricMaterial:()=>y.VolumetricMaterial});var a=t("./src/WebGL/materials/ImposterMaterial.ts"),s=t("./src/WebGL/materials/InstancedMaterial.ts"),o=t("./src/WebGL/materials/LineBasicMaterial.ts"),f=t("./src/WebGL/materials/Material.ts"),u=t("./src/WebGL/materials/MeshDoubleLambertMaterial.ts"),h=t("./src/WebGL/materials/MeshLambertMaterial.ts"),x=t("./src/WebGL/materials/MeshOutlineMaterial.ts"),m=t("./src/WebGL/materials/SphereImposterMaterial.ts"),w=t("./src/WebGL/materials/SphereImposterOutlineMaterial.ts"),A=t("./src/WebGL/materials/SpriteMaterial.ts"),D=t("./src/WebGL/materials/StickImposterMaterial.ts"),I=t("./src/WebGL/materials/StickImposterOutlineMaterial.ts"),y=t("./src/WebGL/materials/VolumetricMaterial.ts")}),"./src/WebGL/math/Quaternion.ts":((r,e,t)=>{t.r(e),t.d(e,{Quaternion:()=>a});class a{constructor(o,f,u,h){this.x=o||0,this.y=f||0,this.z=u||0,this.w=h!==void 0?h:1}set(o,f,u,h){return this.x=o,this.y=f,this.z=u,this.w=h,this}copy(o){return this.x=o.x,this.y=o.y,this.z=o.z,this.w=o.w,this}conjugate(){return this.x*=-1,this.y*=-1,this.z*=-1,this}inverse(){return this.conjugate().normalize()}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}lengthxyz(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}normalize(){let o=this.length();return o===0?(this.x=0,this.y=0,this.z=0,this.w=1):(o=1/o,this.x*=o,this.y*=o,this.z*=o,this.w*=o),this}multiply(o){return this.multiplyQuaternions(this,o)}multiplyScalar(o){return this.x*=o,this.y*=o,this.z*=o,this.w*=o,this}multiplyQuaternions(o,f){const u=o.x,h=o.y,x=o.z,m=o.w,w=f.x,A=f.y,D=f.z,I=f.w;return this.x=u*I+m*w+h*D-x*A,this.y=h*I+m*A+x*w-u*D,this.z=x*I+m*D+u*A-h*w,this.w=m*I-u*w-h*A-x*D,this}sub(o){return this.x-=o.x,this.y-=o.y,this.z-=o.z,this.w-=o.w,this}clone(){return new a(this.x,this.y,this.z,this.w)}setFromEuler(o){const f=Math.cos(o.x/2),u=Math.cos(o.y/2),h=Math.cos(o.z/2),x=Math.sin(o.x/2),m=Math.sin(o.y/2),w=Math.sin(o.z/2);return this.x=x*u*h+f*m*w,this.y=f*m*h-x*u*w,this.z=f*u*w+x*m*h,this.w=f*u*h-x*m*w,this}}}),"./src/WebGL/math/Vector2.ts":((r,e,t)=>{t.r(e),t.d(e,{Vector2:()=>a});class a{constructor(o,f){this.x=o||0,this.y=f||0}set(o,f){return this.x=o,this.y=f,this}subVectors(o,f){return this.x=o.x-f.x,this.y=o.y-f.y,this}copy(o){return this.x=o.x,this.y=o.y,this}clone(){return new a(this.x,this.y)}}}),"./src/WebGL/math/index.ts":((r,e,t)=>{t.r(e),t.d(e,{Matrix3:()=>h.Matrix3,Matrix4:()=>h.Matrix4,Quaternion:()=>a.Quaternion,Ray:()=>h.Ray,Vector2:()=>s.Vector2,Vector3:()=>h.Vector3,clamp:()=>o.clamp,conversionMatrix3:()=>f.conversionMatrix3,degToRad:()=>u.degToRad});var a=t("./src/WebGL/math/Quaternion.ts"),s=t("./src/WebGL/math/Vector2.ts"),o=t("./src/WebGL/math/utils/clamp.ts"),f=t("./src/WebGL/math/utils/conversionMatrix3.ts"),u=t("./src/WebGL/math/utils/degToRad.ts"),h=t("./src/WebGL/math/math.ts")}),"./src/WebGL/math/math.ts":((r,e,t)=>{t.r(e),t.d(e,{Matrix3:()=>A,Matrix4:()=>m,Ray:()=>D,Vector3:()=>w});var a=t("./src/WebGL/math/utils/degToRad.ts"),s=t("./src/WebGL/math/utils/clamp.ts"),o,f,u,h,x;class m{constructor(y=1,l=0,c=0,L=0,R=0,F=1,$=0,b=0,k=0,B=0,J=1,X=0,ae=0,He=0,Pe=0,ue=1){typeof y<"u"&&typeof y!="number"?this.elements=new Float32Array(y):(this.elements=new Float32Array(16),this.elements[0]=y,this.elements[4]=l,this.elements[8]=c,this.elements[12]=L,this.elements[1]=R,this.elements[5]=F,this.elements[9]=$,this.elements[13]=b,this.elements[2]=k,this.elements[6]=B,this.elements[10]=J,this.elements[14]=X,this.elements[3]=ae,this.elements[7]=He,this.elements[11]=Pe,this.elements[15]=ue)}makeScale(y,l,c){throw new Error("Method not implemented.")}set(y,l,c,L,R,F,$,b,k,B,J,X,ae,He,Pe,ue){const Oe=this.elements;return Oe[0]=y,Oe[4]=l,Oe[8]=c,Oe[12]=L,Oe[1]=R,Oe[5]=F,Oe[9]=$,Oe[13]=b,Oe[2]=k,Oe[6]=B,Oe[10]=J,Oe[14]=X,Oe[3]=ae,Oe[7]=He,Oe[11]=Pe,Oe[15]=ue,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}copy(y){const l=y.elements;return this.set(l[0],l[4],l[8],l[12],l[1],l[5],l[9],l[13],l[2],l[6],l[10],l[14],l[3],l[7],l[11],l[15]),this}matrix3FromTopLeft(){const y=this.elements;return new A(y[0],y[4],y[8],y[1],y[5],y[9],y[2],y[6],y[10])}setRotationFromEuler(y,l){const c=this.elements,{x:L,y:R,z:F}=y,$=Math.cos(L),b=Math.sin(L),k=Math.cos(R),B=Math.sin(R),J=Math.cos(F),X=Math.sin(F);if(l===void 0||l==="XYZ"){const ae=$*J,He=$*X,Pe=b*J,ue=b*X;c[0]=k*J,c[4]=-k*X,c[8]=B,c[1]=He+Pe*B,c[5]=ae-ue*B,c[9]=-b*k,c[2]=ue-ae*B,c[6]=Pe+He*B,c[10]=$*k}else console.error(`Error with matrix4 setRotationFromEuler. Order: ${l}`);return this}setRotationFromQuaternion(y){const l=this.elements,{x:c,y:L,z:R,w:F}=y,$=c+c,b=L+L,k=R+R,B=c*$,J=c*b,X=c*k,ae=L*b,He=L*k,Pe=R*k,ue=F*$,Oe=F*b,we=F*k;return l[0]=1-(ae+Pe),l[4]=J-we,l[8]=X+Oe,l[1]=J+we,l[5]=1-(B+Pe),l[9]=He-ue,l[2]=X-Oe,l[6]=He+ue,l[10]=1-(B+ae),this}multiplyMatrices(y,l){const c=y.elements,L=l.elements,R=this.elements,F=c[0],$=c[4],b=c[8],k=c[12],B=c[1],J=c[5],X=c[9],ae=c[13],He=c[2],Pe=c[6],ue=c[10],Oe=c[14],we=c[3],Ze=c[7],it=c[11],lt=c[15],Vt=L[0],_e=L[4],pr=L[8],_s=L[12],Ei=L[1],Bl=L[5],Wl=L[9],Ep=L[13],Lp=L[2],Op=L[6],R0=L[10],N0=L[14],Qp=L[3],O0=L[7],zp=L[11],M0=L[15];return R[0]=F*Vt+$*Ei+b*Lp+k*Qp,R[4]=F*_e+$*Bl+b*Op+k*O0,R[8]=F*pr+$*Wl+b*R0+k*zp,R[12]=F*_s+$*Ep+b*N0+k*M0,R[1]=B*Vt+J*Ei+X*Lp+ae*Qp,R[5]=B*_e+J*Bl+X*Op+ae*O0,R[9]=B*pr+J*Wl+X*R0+ae*zp,R[13]=B*_s+J*Ep+X*N0+ae*M0,R[2]=He*Vt+Pe*Ei+ue*Lp+Oe*Qp,R[6]=He*_e+Pe*Bl+ue*Op+Oe*O0,R[10]=He*pr+Pe*Wl+ue*R0+Oe*zp,R[14]=He*_s+Pe*Ep+ue*N0+Oe*M0,R[3]=we*Vt+Ze*Ei+it*Lp+lt*Qp,R[7]=we*_e+Ze*Bl+it*Op+lt*O0,R[11]=we*pr+Ze*Wl+it*R0+lt*zp,R[15]=we*_s+Ze*Ep+it*N0+lt*M0,this}multiplyScalar(y){const l=this.elements;return l[0]*=y,l[4]*=y,l[8]*=y,l[12]*=y,l[1]*=y,l[5]*=y,l[9]*=y,l[13]*=y,l[2]*=y,l[6]*=y,l[10]*=y,l[14]*=y,l[3]*=y,l[7]*=y,l[11]*=y,l[15]*=y,this}makeTranslation(y,l,c){return this.set(1,0,0,y,0,1,0,l,0,0,1,c,0,0,0,1),this}snap(y){const l=Math.pow(10,4),c=this.elements;for(let L=0;L<16;L++){const R=Math.round(c[L]);R===Math.round(c[L]*l)/l&&(c[L]=R)}return this}transpose(){const y=this.elements;let l;return l=y[1],y[1]=y[4],y[4]=l,l=y[2],y[2]=y[8],y[8]=l,l=y[6],y[6]=y[9],y[9]=l,l=y[3],y[3]=y[12],y[12]=l,l=y[7],y[7]=y[13],y[13]=l,l=y[11],y[11]=y[14],y[14]=l,this}setPosition(y){const l=this.elements;return l[12]=y.x,l[13]=y.y,l[14]=y.z,this}translate(y){const l=this.elements;return l[12]+=y.x,l[13]+=y.y,l[14]+=y.z,this}getInverse(y,l){const c=this.elements,L=y.elements,R=L[0],F=L[4],$=L[8],b=L[12],k=L[1],B=L[5],J=L[9],X=L[13],ae=L[2],He=L[6],Pe=L[10],ue=L[14],Oe=L[3],we=L[7],Ze=L[11],it=L[15];c[0]=J*ue*we-X*Pe*we+X*He*Ze-B*ue*Ze-J*He*it+B*Pe*it,c[4]=b*Pe*we-$*ue*we-b*He*Ze+F*ue*Ze+$*He*it-F*Pe*it,c[8]=$*X*we-b*J*we+b*B*Ze-F*X*Ze-$*B*it+F*J*it,c[12]=b*J*He-$*X*He-b*B*Pe+F*X*Pe+$*B*ue-F*J*ue,c[1]=X*Pe*Oe-J*ue*Oe-X*ae*Ze+k*ue*Ze+J*ae*it-k*Pe*it,c[5]=$*ue*Oe-b*Pe*Oe+b*ae*Ze-R*ue*Ze-$*ae*it+R*Pe*it,c[9]=b*J*Oe-$*X*Oe-b*k*Ze+R*X*Ze+$*k*it-R*J*it,c[13]=$*X*ae-b*J*ae+b*k*Pe-R*X*Pe-$*k*ue+R*J*ue,c[2]=B*ue*Oe-X*He*Oe+X*ae*we-k*ue*we-B*ae*it+k*He*it,c[6]=b*He*Oe-F*ue*Oe-b*ae*we+R*ue*we+F*ae*it-R*He*it,c[10]=F*X*Oe-b*B*Oe+b*k*we-R*X*we-F*k*it+R*B*it,c[14]=b*B*ae-F*X*ae-b*k*He+R*X*He+F*k*ue-R*B*ue,c[3]=J*He*Oe-B*Pe*Oe-J*ae*we+k*Pe*we+B*ae*Ze-k*He*Ze,c[7]=F*Pe*Oe-$*He*Oe+$*ae*we-R*Pe*we-F*ae*Ze+R*He*Ze,c[11]=$*B*Oe-F*J*Oe-$*k*we+R*J*we+F*k*Ze-R*B*Ze,c[15]=F*J*ae-$*B*ae+$*k*He-R*J*He-F*k*Pe+R*B*Pe;const lt=R*c[0]+k*c[4]+ae*c[8]+Oe*c[12];if(lt===0){const Vt="Matrix4.getInverse(): can't invert matrix, determinant is 0";if(l)throw new Error(Vt);return console.warn(Vt),this.identity(),this}return this.multiplyScalar(1/lt),this}isReflected(){const y=this.elements,l=y[0],c=y[4],L=y[8],R=y[1],F=y[5],$=y[9],b=y[2],k=y[6],B=y[10];return l*F*B+R*k*L+b*c*$-b*F*L-R*c*B-l*k*$<0}scale(y){const l=this.elements,{x:c}=y,{y:L}=y,{z:R}=y;return l[0]*=c,l[4]*=L,l[8]*=R,l[1]*=c,l[5]*=L,l[9]*=R,l[2]*=c,l[6]*=L,l[10]*=R,l[3]*=c,l[7]*=L,l[11]*=R,this}getMaxScaleOnAxis(){const y=this.elements,l=y[0]*y[0]+y[1]*y[1]+y[2]*y[2],c=y[4]*y[4]+y[5]*y[5]+y[6]*y[6],L=y[8]*y[8]+y[9]*y[9]+y[10]*y[10];return Math.sqrt(Math.max(l,Math.max(c,L)))}makeFrustum(y,l,c,L,R,F){const $=this.elements,b=2*R/(l-y),k=2*R/(L-c),B=(l+y)/(l-y),J=(L+c)/(L-c),X=-(F+R)/(F-R),ae=-2*F*R/(F-R);return $[0]=b,$[4]=0,$[8]=B,$[12]=0,$[1]=0,$[5]=k,$[9]=J,$[13]=0,$[2]=0,$[6]=0,$[10]=X,$[14]=ae,$[3]=0,$[7]=0,$[11]=-1,$[15]=0,this}makePerspective(y,l,c,L){const R=c*Math.tan((0,a.degToRad)(y*.5)),F=-R,$=F*l,b=R*l;return this.makeFrustum($,b,F,R,c,L)}makeOrthographic(y,l,c,L,R,F){const $=this.elements,b=1/(l-y),k=1/(c-L),B=1/(F-R),J=(l+y)*b,X=(c+L)*k,ae=(F+R)*B;return $[0]=2*b,$[4]=0,$[8]=0,$[12]=-J,$[1]=0,$[5]=2*k,$[9]=0,$[13]=-X,$[2]=0,$[6]=0,$[10]=-2*B,$[14]=-ae,$[3]=0,$[7]=0,$[11]=0,$[15]=1,this}isEqual(y){const l=y.elements,c=this.elements;return c[0]===l[0]&&c[4]===l[4]&&c[8]===l[8]&&c[12]===l[12]&&c[1]===l[1]&&c[5]===l[5]&&c[9]===l[9]&&c[13]===l[13]&&c[2]===l[2]&&c[6]===l[6]&&c[10]===l[10]&&c[14]===l[14]&&c[3]===l[3]&&c[7]===l[7]&&c[11]===l[11]&&c[15]===l[15]}clone(){const y=this.elements;return new m(y[0],y[4],y[8],y[12],y[1],y[5],y[9],y[13],y[2],y[6],y[10],y[14],y[3],y[7],y[11],y[15])}isIdentity(){const y=this.elements;return y[0]===1&&y[4]===0&&y[8]===0&&y[12]===0&&y[1]===0&&y[5]===1&&y[9]===0&&y[13]===0&&y[2]===0&&y[6]===0&&y[10]===1&&y[14]===0&&y[3]===0&&y[7]===0&&y[11]===0&&y[15]===1}isNearlyIdentity(y){return this.clone().snap(y).isIdentity()}getScale(y){const l=this.elements;return y=y||new w,u.set(l[0],l[1],l[2]),h.set(l[4],l[5],l[6]),x.set(l[8],l[9],l[10]),y.x=u.length(),y.y=h.length(),y.z=x.length(),y}lookAt(y,l,c){const L=this.elements;return x.subVectors(y,l).normalize(),x.length()===0&&(x.z=1),u.crossVectors(c,x).normalize(),u.length()===0&&(x.x+=1e-4,u.crossVectors(c,x).normalize()),h.crossVectors(x,u),L[0]=u.x,L[4]=h.x,L[8]=x.x,L[1]=u.y,L[5]=h.y,L[9]=x.y,L[2]=u.z,L[6]=h.z,L[10]=x.z,this}compose(y,l,c){const L=this.elements;return o.identity(),o.setRotationFromQuaternion(l),f.makeScale(c.x,c.y,c.z),this.multiplyMatrices(o,f),L[12]=y.x,L[13]=y.y,L[14]=y.z,this}}o=new m,f=new m;class w{constructor(y,l,c){this.x=y||0,this.y=l||0,this.z=c||0,this.atomid=void 0}set(y,l,c){return this.x=y,this.y=l,this.z=c,this}copy(y){return this.x=y.x,this.y=y.y,this.z=y.z,this}add(y){return this.x+=y.x,this.y+=y.y,this.z+=y.z,this}addVectors(y,l){return this.x=y.x+l.x,this.y=y.y+l.y,this.z=y.z+l.z,this}multiplyVectors(y,l){return this.x=y.x*l.x,this.y=y.y*l.y,this.z=y.z*l.z,this}sub(y){return this.x-=y.x,this.y-=y.y,this.z-=y.z,this}subVectors(y,l){return this.x=y.x-l.x,this.y=y.y-l.y,this.z=y.z-l.z,this}multiplyScalar(y){return this.x*=y,this.y*=y,this.z*=y,this}divideScalar(y){return y!==0?(this.x/=y,this.y/=y,this.z/=y):(this.x=0,this.y=0,this.z=0),this}max(y){return this.x=Math.max(this.x,y.x),this.y=Math.max(this.y,y.y),this.z=Math.max(this.z,y.z),this}min(y){return this.x=Math.min(this.x,y.x),this.y=Math.min(this.y,y.y),this.z=Math.min(this.z,y.z),this}distanceTo(y){return Math.sqrt(this.distanceToSquared(y))}distanceToSquared(y){const l=this.x-y.x,c=this.y-y.y,L=this.z-y.z;return l*l+c*c+L*L}applyMatrix3(y){const{x:l}=this,{y:c}=this,{z:L}=this,R=y.elements;return this.x=R[0]*l+R[3]*c+R[6]*L,this.y=R[1]*l+R[4]*c+R[7]*L,this.z=R[2]*l+R[5]*c+R[8]*L,this}applyMatrix4(y){const{x:l}=this,{y:c}=this,{z:L}=this,R=y.elements;return this.x=R[0]*l+R[4]*c+R[8]*L+R[12],this.y=R[1]*l+R[5]*c+R[9]*L+R[13],this.z=R[2]*l+R[6]*c+R[10]*L+R[14],this}applyProjection(y){const{x:l}=this,{y:c}=this,{z:L}=this,R=y.elements,F=R[3]*l+R[7]*c+R[11]*L+R[15];return this.x=(R[0]*l+R[4]*c+R[8]*L+R[12])/F,this.y=(R[1]*l+R[5]*c+R[9]*L+R[13])/F,this.z=(R[2]*l+R[6]*c+R[10]*L+R[14])/F,this}applyQuaternion(y){const{x:l}=this,{y:c}=this,{z:L}=this,R=y.x,F=y.y,$=y.z,b=y.w,k={};k.x=2*(c*$-L*F),k.y=2*(L*R-l*$),k.z=2*(l*F-c*R);const B={};return B.x=k.y*$-k.z*F,B.y=k.z*R-k.x*$,B.z=k.x*F-k.y*R,this.x=l+b*k.x+B.x,this.y=c+b*k.y+B.y,this.z=L+b*k.z+B.z,this}negate(){return this.multiplyScalar(-1)}dot(y){return this.x*y.x+this.y*y.y+this.z*y.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}normalize(){return this.divideScalar(this.length())}cross(y){const{x:l}=this,{y:c}=this,{z:L}=this;return this.x=c*y.z-L*y.y,this.y=L*y.x-l*y.z,this.z=l*y.y-c*y.x,this}crossVectors(y,l){return this.x=y.y*l.z-y.z*l.y,this.y=y.z*l.x-y.x*l.z,this.z=y.x*l.y-y.y*l.x,this}equals(y){return this.x==y.x&&this.y==y.y&&this.z==y.z}getPositionFromMatrix(y){return this.x=y.elements[12],this.y=y.elements[13],this.z=y.elements[14],this}setEulerFromRotationMatrix(y,l){const c=y.elements,L=c[0],R=c[4],F=c[8],$=c[5],b=c[9],k=c[6],B=c[10];return l===void 0||l==="XYZ"?(this.y=Math.asin((0,s.clamp)(F,-1,1)),Math.abs(F)<.99999?(this.x=Math.atan2(-b,B),this.z=Math.atan2(-R,L)):(this.x=Math.atan2(k,$),this.z=0)):console.error(`Error with vector's setEulerFromRotationMatrix: Unknown order: ${l}`),this}rotateAboutVector(y,l){y.normalize();const c=Math.cos(l),L=Math.sin(l),R=this.clone().multiplyScalar(c),F=y.clone().cross(this).multiplyScalar(L),$=y.clone().multiplyScalar(y.clone().dot(this)).multiplyScalar(1-c),b=R.add(F).add($);return this.x=b.x,this.y=b.y,this.z=b.z,this}setFromMatrixPosition(y){const l=y.elements;return this.x=l[12],this.y=l[13],this.z=l[14],this}transformDirection(y){const{x:l}=this,{y:c}=this,{z:L}=this,R=y.elements;return this.x=R[0]*l+R[4]*c+R[8]*L,this.y=R[1]*l+R[5]*c+R[9]*L,this.z=R[2]*l+R[6]*c+R[10]*L,this.normalize()}clone(){return new w(this.x,this.y,this.z)}unproject(y){const l=o;return l.multiplyMatrices(y.matrixWorld,l.getInverse(y.projectionMatrix)),this.applyMatrix4(l)}}u=new w,h=new w,x=new w;class A{constructor(y=1,l=0,c=0,L=0,R=1,F=0,$=0,b=0,k=1){this.elements=new Float32Array(9),this.set(y,l,c,L,R,F,$,b,k)}set(y,l,c,L,R,F,$,b,k){const B=this.elements;return B[0]=y,B[3]=l,B[6]=c,B[1]=L,B[4]=R,B[7]=F,B[2]=$,B[5]=b,B[8]=k,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(y){const l=y.elements;this.set(l[0],l[3],l[6],l[1],l[4],l[7],l[2],l[5],l[8])}multiplyScalar(y){const l=this.elements;return l[0]*=y,l[3]*=y,l[6]*=y,l[1]*=y,l[4]*=y,l[7]*=y,l[2]*=y,l[5]*=y,l[8]*=y,this}getInverse3(y){const l=y.elements,c=this.elements;c[0]=l[4]*l[8]-l[5]*l[7],c[3]=l[6]*l[5]-l[3]*l[8],c[6]=l[3]*l[7]-l[6]*l[4],c[1]=l[7]*l[2]-l[1]*l[8],c[4]=l[0]*l[8]-l[6]*l[2],c[7]=l[1]*l[6]-l[0]*l[7],c[2]=l[1]*l[5]-l[2]*l[4],c[5]=l[2]*l[3]-l[0]*l[5],c[8]=l[0]*l[4]-l[1]*l[3];const L=l[0]*c[0]+l[3]*c[1]+l[6]*c[2];return this.multiplyScalar(1/L),this}getInverse(y,l){const c=y.elements,L=this.elements;L[0]=c[10]*c[5]-c[6]*c[9],L[1]=-c[10]*c[1]+c[2]*c[9],L[2]=c[6]*c[1]-c[2]*c[5],L[3]=-c[10]*c[4]+c[6]*c[8],L[4]=c[10]*c[0]-c[2]*c[8],L[5]=-c[6]*c[0]+c[2]*c[4],L[6]=c[9]*c[4]-c[5]*c[8],L[7]=-c[9]*c[0]+c[1]*c[8],L[8]=c[5]*c[0]-c[1]*c[4];const R=c[0]*L[0]+c[1]*L[3]+c[2]*L[6];if(R===0){const F="Matrix3.getInverse(): can't invert matrix, determinant is 0";if(l)throw new Error(F);return console.warn(F),this.identity(),this}return this.multiplyScalar(1/R),this}getDeterminant(){const y=this.elements;return y[0]*y[4]*y[8]+y[1]*y[5]*y[6]+y[2]*y[3]*y[7]-y[2]*y[4]*y[6]-y[1]*y[3]*y[8]-y[0]*y[5]*y[7]}transpose(){let y;const l=this.elements;return y=l[1],l[1]=l[3],l[3]=y,y=l[2],l[2]=l[6],l[6]=y,y=l[5],l[5]=l[7],l[7]=y,this}clone(){const y=this.elements;return new A(y[0],y[3],y[6],y[1],y[4],y[7],y[2],y[5],y[8])}getMatrix4(){const y=this.elements;return new m(y[0],y[3],y[6],0,y[1],y[4],y[7],0,y[2],y[5],y[8],0)}}class D{constructor(y,l){this.origin=y!==void 0?y:new w,this.direction=l!==void 0?l:new w}set(y,l){return this.origin.copy(y),this.direction.copy(l),this}copy(y){return this.origin.copy(y.origin),this.direction.copy(y.direction),this}at(y,l){return(l||new w).copy(this.direction).multiplyScalar(y).add(this.origin)}recast(y){const l=u;return this.origin.copy(this.at(y,l)),this}closestPointToPoint(y,l){const c=l||new w;c.subVectors(y,this.origin);const L=c.dot(this.direction);return c.copy(this.direction).multiplyScalar(L).add(this.origin)}distanceToPoint(y){const l=u,c=l.subVectors(y,this.origin).dot(this.direction);return l.copy(this.direction).multiplyScalar(c).add(this.origin),l.distanceTo(y)}isIntersectionCylinder(){}isIntersectionSphere(y){return this.distanceToPoint(y.center)<=y.radius}isIntersectionPlane(y){return y.normal.dot(this.direction)!==0||y.distanceToPoint(this.origin)===0}distanceToPlane(y){const l=y.normal.dot(this.direction);return l===0?y.distanceToPoint(this.origin)===0?0:void 0:-(this.origin.dot(y.normal)+y.constant)/l}intersectPlane(y,l){const c=this.distanceToPlane(y);if(c!==void 0)return this.at(c,l)}applyMatrix4(y){return this.direction.add(this.origin).applyMatrix4(y),this.origin.applyMatrix4(y),this.direction.sub(this.origin),this}clone(){return new D().copy(this)}}}),"./src/WebGL/math/utils/clamp.ts":((r,e,t)=>{t.r(e),t.d(e,{clamp:()=>a});function a(s,o,f){return Math.min(Math.max(s,o),f)}}),"./src/WebGL/math/utils/conversionMatrix3.ts":((r,e,t)=>{t.r(e),t.d(e,{conversionMatrix3:()=>s});var a=t("./src/WebGL/math/math.ts");function s(o,f,u,h,x,m){h=h*Math.PI/180,x=x*Math.PI/180,m=m*Math.PI/180;const w=l=>l*l,A=Math.cos(h),D=Math.cos(x),I=Math.cos(m),y=Math.sin(m);return new a.Matrix3(o,f*I,u*D,0,f*y,u*(A-D*I)/y,0,0,u*Math.sqrt(1-w(A)-w(D)-w(I)+2*A*D*I)/y)}}),"./src/WebGL/math/utils/degToRad.ts":((r,e,t)=>{t.r(e),t.d(e,{degToRad:()=>s});const a=Math.PI/180;function s(o){return o*a}}),"./src/WebGL/objects/Line.ts":((r,e,t)=>{t.r(e),t.d(e,{Line:()=>f,LineStyle:()=>o});var a=t("./src/WebGL/materials/index.ts"),s=t("./src/WebGL/core/index.ts"),o;(function(u){u[u.LineStrip=0]="LineStrip",u[u.LinePieces=1]="LinePieces"})(o||(o={}));class f extends s.Object3D{constructor(h,x=new a.LineBasicMaterial({color:Math.random()*16777215}),m=o.LineStrip){super(),this.geometry=h,this.material=x,this.type=m}clone(h=new f(this.geometry,this.material,this.type)){return super.clone.call(this,h),h}}}),"./src/WebGL/objects/Mesh.ts":((r,e,t)=>{t.r(e),t.d(e,{Mesh:()=>s});var a=t("./src/WebGL/core/index.ts");class s extends a.Object3D{constructor(f,u){super(),this.geometry=f,this.material=u}clone(f){return f===void 0&&(f=new s(this.geometry,this.material)),super.clone.call(this,f),f}}}),"./src/WebGL/objects/Sprite.ts":((r,e,t)=>{t.r(e),t.d(e,{Sprite:()=>o});var a=t("./src/WebGL/materials/index.ts"),s=t("./src/WebGL/core/index.ts");class o extends s.Object3D{constructor(u=new a.SpriteMaterial){super(),this.material=u,this.rotation3d=this.rotation,this.rotation=0}updateMatrix(){this.matrix.setPosition(this.position),this.rotation3d.set(0,0,this.rotation),this.matrix.setRotationFromEuler(this.rotation3d),(this.scale.x!==1||this.scale.y!==1)&&this.matrix.scale(this.scale),this.matrixWorldNeedsUpdate=!0}clone(u=new o(this.material)){return s.Object3D.prototype.clone.call(this,u),u}}}),"./src/WebGL/objects/index.ts":((r,e,t)=>{t.r(e),t.d(e,{Line:()=>a.Line,LineStyle:()=>a.LineStyle,Mesh:()=>s.Mesh,Sprite:()=>o.Sprite});var a=t("./src/WebGL/objects/Line.ts"),s=t("./src/WebGL/objects/Mesh.ts"),o=t("./src/WebGL/objects/Sprite.ts")}),"./src/WebGL/shaders/ShaderType.ts":((r,e,t)=>{t.r(e)}),"./src/WebGL/shaders/index.ts":((r,e,t)=>{t.r(e),t.d(e,{ShaderLib:()=>a.ShaderLib,ShaderUtils:()=>s.ShaderUtils,basic:()=>a.basic,clone:()=>s.clone,instanced:()=>a.instanced,lambert:()=>a.lambert,lambertdouble:()=>a.lambertdouble,outline:()=>a.outline,screen:()=>a.screen,screenaa:()=>a.screenaa,sphereimposter:()=>a.sphereimposter,sphereimposteroutline:()=>a.sphereimposteroutline,sprite:()=>a.sprite,stickimposter:()=>a.stickimposter,stickimposteroutline:()=>a.stickimposteroutline,volumetric:()=>a.volumetric});var a=t("./src/WebGL/shaders/lib/index.ts"),s=t("./src/WebGL/shaders/utils/index.ts");t("./src/WebGL/shaders/ShaderType.ts")}),"./src/WebGL/shaders/lib/basic/basic.frag":((r,e,t)=>{t.r(e),t.d(e,{default:()=>a});const a=`uniform mat4 viewMatrix;
uniform float opacity;
uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
varying vec3 vColor;
varying vec4 mvPosition;

//DEFINEFRAGCOLOR
void main() {
    gl_FragColor = vec4( vColor, opacity );
    if(fogNear != fogFar) {
        float depth = -mvPosition.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }
}`}),"./src/WebGL/shaders/lib/basic/basic.vert":((r,e,t)=>{t.r(e),t.d(e,{default:()=>a});const a=`uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;

attribute vec3 position;
attribute vec3 color;

varying vec3 vColor;
varying vec4 mvPosition;

void main() {

    vColor = color;
    mvPosition = modelViewMatrix * vec4( position, 1.0 );
    gl_Position = projectionMatrix * mvPosition;

}`}),"./src/WebGL/shaders/lib/basic/index.ts":((r,e,t)=>{t.r(e),t.d(e,{basic:()=>f});var a=t("./src/WebGL/shaders/lib/basic/uniforms.ts"),s=t("./src/WebGL/shaders/lib/basic/basic.frag"),o=t("./src/WebGL/shaders/lib/basic/basic.vert");const f={vertexShader:o.default.replace("#define GLSLIFY 1",""),fragmentShader:s.default.replace("#define GLSLIFY 1",""),uniforms:a.uniforms}}),"./src/WebGL/shaders/lib/basic/uniforms.ts":((r,e,t)=>{t.r(e),t.d(e,{uniforms:()=>s});var a=t("./src/colors.ts");const s={opacity:{type:"f",value:1},fogColor:{type:"c",value:new a.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3}}}),"./src/WebGL/shaders/lib/blur/blur.frag":((r,e,t)=>{t.r(e),t.d(e,{default:()=>a});const a=`const float INV_TOTAL_SAMPLES_FACTOR = 1.0 / 9.0;
uniform highp sampler2D inTex;
varying highp vec2 vTexCoords;
    
void main() {
 
 vec2 texelSize = 1.0 / vec2(textureSize(inTex,0));
 float blurred_visibility_factor = 0.0f;
 for (int t = -1; t <= 1; ++t) {
  for (int s = -1; s <= 1; ++s) {
   vec2 offset = vec2(float(s), float(t)) * texelSize;
   blurred_visibility_factor += texture2D(inTex, vTexCoords + offset).r;
  }
 }
    
 gl_FragDepthEXT = blurred_visibility_factor * INV_TOTAL_SAMPLES_FACTOR;
 
}`}),"./src/WebGL/shaders/lib/blur/blur.vert":((r,e,t)=>{t.r(e),t.d(e,{default:()=>a});const a=`attribute vec2 vertexPosition;
varying highp vec2 vTexCoords;
const vec2 scale = vec2(0.5, 0.5);

void main() {
   vTexCoords  = vertexPosition * scale + scale; // scale vertex attribute to [0,1] range
   gl_Position = vec4(vertexPosition, 0.0, 1.0);
}
        `}),"./src/WebGL/shaders/lib/blur/index.ts":((r,e,t)=>{t.r(e),t.d(e,{blur:()=>f});var a=t("./src/WebGL/shaders/lib/blur/uniforms.ts"),s=t("./src/WebGL/shaders/lib/blur/blur.frag"),o=t("./src/WebGL/shaders/lib/blur/blur.vert");const f={fragmentShader:s.default,vertexShader:o.default,uniforms:a.uniforms}}),"./src/WebGL/shaders/lib/blur/uniforms.ts":((r,e,t)=>{t.r(e),t.d(e,{uniforms:()=>a});const a={}}),"./src/WebGL/shaders/lib/index.ts":((r,e,t)=>{t.r(e),t.d(e,{ShaderLib:()=>L,basic:()=>a.basic,instanced:()=>s.instanced,lambert:()=>o.lambert,lambertdouble:()=>f.lambertdouble,outline:()=>u.outline,screen:()=>h.screen,screenaa:()=>x.screenaa,sphereimposter:()=>m.sphereimposter,sphereimposteroutline:()=>w.sphereimposteroutline,sprite:()=>A.sprite,stickimposter:()=>D.stickimposter,stickimposteroutline:()=>I.stickimposteroutline,volumetric:()=>y.volumetric});var a=t("./src/WebGL/shaders/lib/basic/index.ts"),s=t("./src/WebGL/shaders/lib/instanced/index.ts"),o=t("./src/WebGL/shaders/lib/lambert/index.ts"),f=t("./src/WebGL/shaders/lib/lambertdouble/index.ts"),u=t("./src/WebGL/shaders/lib/outline/index.ts"),h=t("./src/WebGL/shaders/lib/screen/index.ts"),x=t("./src/WebGL/shaders/lib/screenaa/index.ts"),m=t("./src/WebGL/shaders/lib/sphereimposter/index.ts"),w=t("./src/WebGL/shaders/lib/sphereimposteroutline/index.ts"),A=t("./src/WebGL/shaders/lib/sprite/index.ts"),D=t("./src/WebGL/shaders/lib/stickimposter/index.ts"),I=t("./src/WebGL/shaders/lib/stickimposteroutline/index.ts"),y=t("./src/WebGL/shaders/lib/volumetric/index.ts"),l=t("./src/WebGL/shaders/lib/ssao/index.ts"),c=t("./src/WebGL/shaders/lib/blur/index.ts");const L={basic:a.basic,blur:c.blur,instanced:s.instanced,lambert:o.lambert,lambertdouble:f.lambertdouble,outline:u.outline,screen:h.screen,screenaa:x.screenaa,ssao:l.ssao,sphereimposter:m.sphereimposter,sphereimposteroutline:w.sphereimposteroutline,sprite:A.sprite,stickimposter:D.stickimposter,stickimposteroutline:I.stickimposteroutline,volumetric:y.volumetric}}),"./src/WebGL/shaders/lib/instanced/index.ts":((r,e,t)=>{t.r(e),t.d(e,{instanced:()=>f});var a=t("./src/WebGL/shaders/lib/instanced/uniforms.ts"),s=t("./src/WebGL/shaders/lib/instanced/instanced.frag"),o=t("./src/WebGL/shaders/lib/instanced/instanced.vert");const f={fragmentShader:s.default.replace("#define GLSLIFY 1",""),vertexShader:o.default.replace("#define GLSLIFY 1",""),uniforms:a.uniforms}}),"./src/WebGL/shaders/lib/instanced/instanced.frag":((r,e,t)=>{t.r(e),t.d(e,{default:()=>a});const a=`uniform mat4 viewMatrix;
uniform float opacity;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
#ifdef SHADED
uniform highp sampler2D shading;
#endif
varying vec3 vLightFront;
varying vec3 vColor;
//DEFINEFRAGCOLOR

void main() {

    gl_FragColor = vec4( vec3 ( 1.0 ), opacity );

    #ifndef WIREFRAME
    gl_FragColor.xyz *= vLightFront;
    #endif

#ifdef SHADED
    ivec2 dim = textureSize(shading,0);
    float shadowFactor = texture2D(shading,vec2(gl_FragCoord.x/float(dim.x),gl_FragCoord.y/float(dim.y))).r;
    vColor *= shadowFactor;
#endif
    gl_FragColor = gl_FragColor * vec4( vColor, opacity );
    float depth = gl_FragCoord.z / gl_FragCoord.w;

    float fogFactor = smoothstep( fogNear, fogFar, depth );

    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );

}


`}),"./src/WebGL/shaders/lib/instanced/instanced.vert":((r,e,t)=>{t.r(e),t.d(e,{default:()=>a});const a=`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];

attribute vec3 offset;
attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;
attribute float radius;

varying vec3 vColor;
varying vec3 vLightFront;

void main() {

    vColor = color;

    vec3 objectNormal = normal;
    vec3 transformedNormal = normalMatrix * objectNormal;
    vec4 mvPosition = modelViewMatrix * vec4( position * radius + offset, 1.0 );

    vLightFront = vec3( 0.0 );

    transformedNormal = normalize( transformedNormal );

    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );
    vec3 dirVector = normalize( lDirection.xyz );
    float dotProduct = dot( transformedNormal, dirVector );
    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );

    vLightFront += directionalLightColor[ 0 ] * directionalLightWeighting;

    gl_Position = projectionMatrix * mvPosition;
}

`}),"./src/WebGL/shaders/lib/instanced/uniforms.ts":((r,e,t)=>{t.r(e),t.d(e,{uniforms:()=>s});var a=t("./src/colors.ts");const s={opacity:{type:"f",value:1},fogColor:{type:"c",value:new a.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}}}),"./src/WebGL/shaders/lib/lambert/index.ts":((r,e,t)=>{t.r(e),t.d(e,{lambert:()=>f});var a=t("./src/WebGL/shaders/lib/lambert/uniforms.ts"),s=t("./src/WebGL/shaders/lib/lambert/lambert.frag"),o=t("./src/WebGL/shaders/lib/lambert/lambert.vert");const f={fragmentShader:s.default.replace("#define GLSLIFY 1",""),vertexShader:o.default.replace("#define GLSLIFY 1",""),uniforms:a.uniforms}}),"./src/WebGL/shaders/lib/lambert/lambert.frag":((r,e,t)=>{t.r(e),t.d(e,{default:()=>a});const a=`uniform mat4 viewMatrix;
uniform float opacity;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
#ifdef SHADED
uniform highp sampler2D shading;
#endif
varying vec3 vLightFront;
varying vec3 vColor;
varying vec4 mvPosition;


//DEFINEFRAGCOLOR

void main() {

    gl_FragColor = vec4( vec3 ( 1.0 ), opacity );

    #ifndef WIREFRAME
    gl_FragColor.xyz *= vLightFront;
    #endif
#ifdef SHADED
    ivec2 dim = textureSize(shading,0);
    float shadowFactor = texture2D(shading,vec2(gl_FragCoord.x/float(dim.x),gl_FragCoord.y/float(dim.y))).r;
    vColor *= shadowFactor;
#endif
    gl_FragColor = gl_FragColor * vec4( vColor, opacity );

    if(fogNear != fogFar) {
        float depth = -mvPosition.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }

}`}),"./src/WebGL/shaders/lib/lambert/lambert.vert":((r,e,t)=>{t.r(e),t.d(e,{default:()=>a});const a=`
uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;

varying vec3 vColor;
varying vec3 vLightFront;
varying vec4 mvPosition;

void main() {

    vColor = color;

    vec3 objectNormal = normal;
    vec3 transformedNormal = normalMatrix * objectNormal;
    mvPosition = modelViewMatrix * vec4( position, 1.0 );

    vLightFront = vec3( 0.0 );

    transformedNormal = normalize( transformedNormal );

    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );
    vec3 dirVector = normalize( lDirection.xyz );
    float dotProduct = dot( transformedNormal, dirVector );
    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );

    vLightFront += directionalLightColor[ 0 ] * directionalLightWeighting;

    gl_Position = projectionMatrix * mvPosition;
}`}),"./src/WebGL/shaders/lib/lambert/uniforms.ts":((r,e,t)=>{t.r(e),t.d(e,{uniforms:()=>s});var a=t("./src/colors.ts");const s={opacity:{type:"f",value:1},fogColor:{type:"c",value:new a.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}}}),"./src/WebGL/shaders/lib/lambertdouble/index.ts":((r,e,t)=>{t.r(e),t.d(e,{lambertdouble:()=>f});var a=t("./src/WebGL/shaders/lib/lambertdouble/uniforms.ts"),s=t("./src/WebGL/shaders/lib/lambertdouble/lambertdouble.frag"),o=t("./src/WebGL/shaders/lib/lambertdouble/lambertdouble.vert");const f={fragmentShader:s.default.replace("#define GLSLIFY 1",""),vertexShader:o.default.replace("#define GLSLIFY 1",""),uniforms:a.uniforms}}),"./src/WebGL/shaders/lib/lambertdouble/lambertdouble.frag":((r,e,t)=>{t.r(e),t.d(e,{default:()=>a});const a=`
#ifdef SHADED
uniform highp sampler2D shading;
#endif

uniform mat4 viewMatrix;
uniform float opacity;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;

varying vec3 vLightFront;
varying vec3 vLightBack;

varying vec3 vColor;
varying vec4 mvPosition;

//DEFINEFRAGCOLOR

void main() {

    gl_FragColor = vec4( vec3 ( 1.0 ), opacity );

    #ifndef WIREFRAME
    if ( gl_FrontFacing )
       gl_FragColor.xyz *= vLightFront;
    else
       gl_FragColor.xyz *= vLightBack;
    #endif

    vec3 color = vColor;
#ifdef SHADED
    ivec2 dim = textureSize(shading,0);
    float shadowFactor = texture2D(shading,vec2(gl_FragCoord.x/float(dim.x),gl_FragCoord.y/float(dim.y))).r;
    color *= shadowFactor;
#endif
    gl_FragColor = gl_FragColor * vec4( color, opacity );

    if(fogNear != fogFar) {
        float depth = -mvPosition.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }

}


`}),"./src/WebGL/shaders/lib/lambertdouble/lambertdouble.vert":((r,e,t)=>{t.r(e),t.d(e,{default:()=>a});const a=`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;

varying vec3 vColor;
varying vec3 vLightFront;
varying vec3 vLightBack;
varying vec4 mvPosition;

void main() {

    vColor = color;

    vec3 objectNormal = normal;
    vec3 transformedNormal = normalMatrix * objectNormal;
    mvPosition = modelViewMatrix * vec4( position, 1.0 );

    vLightFront = vec3( 0.0 );
    vLightBack = vec3( 0.0 );

    transformedNormal = normalize( transformedNormal );

    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );
    vec3 dirVector = normalize( lDirection.xyz );
    float dotProduct = dot( transformedNormal, dirVector );
    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );
    vec3 directionalLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );

    vLightFront += directionalLightColor[ 0 ] * directionalLightWeighting;
    vLightBack += directionalLightColor[ 0 ] * directionalLightWeightingBack;

    gl_Position = projectionMatrix * mvPosition;
}

`}),"./src/WebGL/shaders/lib/lambertdouble/uniforms.ts":((r,e,t)=>{t.r(e),t.d(e,{uniforms:()=>s});var a=t("./src/colors.ts");const s={opacity:{type:"f",value:1},fogColor:{type:"c",value:new a.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}}}),"./src/WebGL/shaders/lib/outline/index.ts":((r,e,t)=>{t.r(e),t.d(e,{outline:()=>f});var a=t("./src/WebGL/shaders/lib/outline/uniforms.ts"),s=t("./src/WebGL/shaders/lib/outline/outline.frag"),o=t("./src/WebGL/shaders/lib/outline/outline.vert");const f={fragmentShader:s.default.replace("#define GLSLIFY 1",""),vertexShader:o.default.replace("#define GLSLIFY 1",""),uniforms:a.uniforms}}),"./src/WebGL/shaders/lib/outline/outline.frag":((r,e,t)=>{t.r(e),t.d(e,{default:()=>a});const a=`

uniform float opacity;
uniform vec3 outlineColor;
uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;

varying vec4 mvPosition;
//DEFINEFRAGCOLOR

void main() {
    gl_FragColor = vec4( outlineColor, 1 );

    if(fogNear != fogFar) {
        float depth = -mvPosition.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }
}


`}),"./src/WebGL/shaders/lib/outline/outline.vert":((r,e,t)=>{t.r(e),t.d(e,{default:()=>a});const a=`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform float outlineWidth;
uniform float outlinePushback;
uniform float vWidth;
uniform float vHeight;
uniform float outlineMaxPixels;

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;

varying vec4 mvPosition;

void main() {

    vec4 norm = modelViewMatrix*vec4(normalize(normal),0.0);
    mvPosition = modelViewMatrix * vec4( position, 1.0 );
    mvPosition.xy += norm.xy*outlineWidth;
    vec4 outpos = projectionMatrix * mvPosition;

    if(outlineMaxPixels > 0.0) {
        vec4 unadjusted = projectionMatrix*modelViewMatrix * vec4( position, 1.0 );
        float w = outpos.w;
        //normalize homogeneous coords
        unadjusted /= unadjusted.w;
        outpos /= outpos.w;
        vec2 diff = outpos.xy-unadjusted.xy;
        //put into pixels
        diff.x *= vWidth;
        diff.y *= vHeight;
        if ( length(diff) > outlineMaxPixels) {
            vec2 ndiff = normalize(diff)*outlineMaxPixels;
            ndiff.x /= vWidth;
            ndiff.y /= vHeight;
            outpos.xy = unadjusted.xy;
            outpos.xy += ndiff;
        }
        outpos *= w; //if I don't do this things blow up
    }
    gl_Position = outpos;
    mvPosition.z -= outlinePushback; //go backwards in model space
    vec4 pushpos = projectionMatrix*mvPosition; //project to get z in projection space, I'm probably missing some simple math to do the same thing..
    gl_Position.z = gl_Position.w*pushpos.z/pushpos.w;
}

`}),"./src/WebGL/shaders/lib/outline/uniforms.ts":((r,e,t)=>{t.r(e),t.d(e,{uniforms:()=>s});var a=t("./src/colors.ts");const s={opacity:{type:"f",value:1},outlineColor:{type:"c",value:new a.Color(0,0,0)},fogColor:{type:"c",value:new a.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},outlineWidth:{type:"f",value:.1},outlinePushback:{type:"f",value:1},outlineMaxPixels:{type:"f",value:0}}}),"./src/WebGL/shaders/lib/screen/index.ts":((r,e,t)=>{t.r(e),t.d(e,{screen:()=>f});var a=t("./src/WebGL/shaders/lib/screen/uniforms.ts"),s=t("./src/WebGL/shaders/lib/screen/screen.frag"),o=t("./src/WebGL/shaders/lib/screen/screen.vert");const f={fragmentShader:s.default.replace("#define GLSLIFY 1",""),vertexShader:o.default.replace("#define GLSLIFY 1",""),uniforms:a.uniforms}}),"./src/WebGL/shaders/lib/screen/screen.frag":((r,e,t)=>{t.r(e),t.d(e,{default:()=>a});const a=`uniform sampler2D colormap;
varying highp vec2 vTexCoords;
uniform vec2 dimensions;
//DEFINEFRAGCOLOR
void main (void) {
   gl_FragColor = texture2D(colormap, vTexCoords);

   //gl_FragColor.g = gl_FragColor.b =  gl_FragColor.r; //debug shading 
}
        `}),"./src/WebGL/shaders/lib/screen/screen.vert":((r,e,t)=>{t.r(e),t.d(e,{default:()=>a});const a=`attribute vec2 vertexPosition;
varying highp vec2 vTexCoords;
const vec2 scale = vec2(0.5, 0.5);

void main() {
   vTexCoords  = vertexPosition * scale + scale; // scale vertex attribute to [0,1] range
   gl_Position = vec4(vertexPosition, 0.0, 1.0);
}
        `}),"./src/WebGL/shaders/lib/screen/uniforms.ts":((r,e,t)=>{t.r(e),t.d(e,{uniforms:()=>a});const a={}}),"./src/WebGL/shaders/lib/screenaa/index.ts":((r,e,t)=>{t.r(e),t.d(e,{screenaa:()=>f});var a=t("./src/WebGL/shaders/lib/screenaa/uniforms.ts"),s=t("./src/WebGL/shaders/lib/screenaa/screenaa.frag"),o=t("./src/WebGL/shaders/lib/screenaa/screenaa.vert");const f={fragmentShader:s.default.replace("#define GLSLIFY 1",""),vertexShader:o.default.replace("#define GLSLIFY 1",""),uniforms:a.uniforms}}),"./src/WebGL/shaders/lib/screenaa/screenaa.frag":((r,e,t)=>{t.r(e),t.d(e,{default:()=>a});const a=`
        
precision highp float;
precision highp int;
precision highp sampler2D;

uniform sampler2D tColor;
varying highp vec2 vTexCoords;

// adapted from https://github.com/kosua20/Rendu
// MIT License Copyright (c) 2017 Simon Rodriguez
// by way of molstar (https://github.com/molstar/molstar/blob/master/src/mol-gl/shader/fxaa.frag.ts)

#define QUALITY(q) ((q) < 5 ? 1.0 : ((q) > 5 ? ((q) < 10 ? 2.0 : ((q) < 11 ? 4.0 : 8.0)) : 1.5))

float rgb2luma(vec3 rgb){
    return sqrt(dot(rgb, vec3(0.299, 0.587, 0.114)));
}

float sampleLuma(vec2 uv) {
    return rgb2luma(texture2D(tColor, uv).rgb);
}

float sampleLuma(vec2 uv, float uOffset, float vOffset) {
    uv += vec2(uOffset, vOffset);
    return sampleLuma(uv);
}

//DEFINEFRAGCOLOR
void main(void) {
    ivec2 dim = textureSize(tColor,0);
    vec2 dimensions = vec2(float(dim.x),float(dim.y));
    vec2 inverseScreenSize = vec2(1.0 / dimensions.x, 1.0 / dimensions.y);
    vec2 coords = vTexCoords;

    vec4 colorCenter = texture2D(tColor, coords);
    float dEdgeThresholdMin = 0.0312;
    float dEdgeThresholdMax = 0.125;
    int dIterations = 12;
    float dSubpixelQuality = 0.3;

    // Luma at the current fragment
    float lumaCenter = rgb2luma(colorCenter.rgb);

    // Luma at the four direct neighbours of the current fragment.
    float lumaDown = sampleLuma(coords, 0.0, -inverseScreenSize.y);
    float lumaUp = sampleLuma(coords, 0.0, inverseScreenSize.y);
    float lumaLeft = sampleLuma(coords, -inverseScreenSize.x, 0.0);
    float lumaRight = sampleLuma(coords, inverseScreenSize.x, 0.0);

    // Find the maximum and minimum luma around the current fragment.
    float lumaMin = min(lumaCenter, min(min(lumaDown, lumaUp), min(lumaLeft, lumaRight)));
    float lumaMax = max(lumaCenter, max(max(lumaDown, lumaUp), max(lumaLeft, lumaRight)));

    // Compute the delta.
    float lumaRange = lumaMax - lumaMin;

    // If the luma variation is lower that a threshold (or if we are in a really dark area),
    // we are not on an edge, don't perform any AA.
    if (lumaRange < max(dEdgeThresholdMin, lumaMax * dEdgeThresholdMax)) {
        gl_FragColor = colorCenter;
        return;
    }

    // Query the 4 remaining corners lumas.
    float lumaDownLeft = sampleLuma(coords, -inverseScreenSize.x, -inverseScreenSize.y);
    float lumaUpRight = sampleLuma(coords, inverseScreenSize.x, inverseScreenSize.y);
    float lumaUpLeft = sampleLuma(coords, -inverseScreenSize.x, inverseScreenSize.y);
    float lumaDownRight = sampleLuma(coords, inverseScreenSize.x, -inverseScreenSize.y);

    // Combine the four edges lumas (using intermediary variables for future computations
    // with the same values).
    float lumaDownUp = lumaDown + lumaUp;
    float lumaLeftRight = lumaLeft + lumaRight;

    // Same for corners
    float lumaLeftCorners = lumaDownLeft + lumaUpLeft;
    float lumaDownCorners = lumaDownLeft + lumaDownRight;
    float lumaRightCorners = lumaDownRight + lumaUpRight;
    float lumaUpCorners = lumaUpRight + lumaUpLeft;

    // Compute an estimation of the gradient along the horizontal and vertical axis.
    float edgeHorizontal = abs(-2.0 * lumaLeft + lumaLeftCorners) + abs(-2.0 * lumaCenter + lumaDownUp) * 2.0 + abs(-2.0 * lumaRight + lumaRightCorners);
    float edgeVertical = abs(-2.0 * lumaUp + lumaUpCorners) + abs(-2.0 * lumaCenter + lumaLeftRight) * 2.0 + abs(-2.0 * lumaDown + lumaDownCorners);

    // Is the local edge horizontal or vertical ?
    bool isHorizontal = (edgeHorizontal >= edgeVertical);

    // Choose the step size (one pixel) accordingly.
    float stepLength = isHorizontal ? inverseScreenSize.y : inverseScreenSize.x;

    // Select the two neighboring texels lumas in the opposite direction to the local edge.
    float luma1 = isHorizontal ? lumaDown : lumaLeft;
    float luma2 = isHorizontal ? lumaUp : lumaRight;
    // Compute gradients in this direction.
    float gradient1 = luma1 - lumaCenter;
    float gradient2 = luma2 - lumaCenter;

    // Which direction is the steepest ?
    bool is1Steepest = abs(gradient1) >= abs(gradient2);

    // Gradient in the corresponding direction, normalized.
    float gradientScaled = 0.25 * max(abs(gradient1), abs(gradient2));

    // Average luma in the correct direction.
    float lumaLocalAverage = 0.0;
    if(is1Steepest){
        // Switch the direction
        stepLength = -stepLength;
        lumaLocalAverage = 0.5 * (luma1 + lumaCenter);
    } else {
        lumaLocalAverage = 0.5 * (luma2 + lumaCenter);
    }

    // Shift UV in the correct direction by half a pixel.
    vec2 currentUv = coords;
    if(isHorizontal){
        currentUv.y += stepLength * 0.5;
    } else {
        currentUv.x += stepLength * 0.5;
    }

    // Compute offset (for each iteration step) in the right direction.
    vec2 offset = isHorizontal ? vec2(inverseScreenSize.x, 0.0) : vec2(0.0, inverseScreenSize.y);
    // Compute UVs to explore on each side of the edge, orthogonally.
    // The QUALITY allows us to step faster.
    vec2 uv1 = currentUv - offset * QUALITY(0);
    vec2 uv2 = currentUv + offset * QUALITY(0);

    // Read the lumas at both current extremities of the exploration segment,
    // and compute the delta wrt to the local average luma.
    float lumaEnd1 = sampleLuma(uv1);
    float lumaEnd2 = sampleLuma(uv2);
    lumaEnd1 -= lumaLocalAverage;
    lumaEnd2 -= lumaLocalAverage;

    // If the luma deltas at the current extremities is larger than the local gradient,
    // we have reached the side of the edge.
    bool reached1 = abs(lumaEnd1) >= gradientScaled;
    bool reached2 = abs(lumaEnd2) >= gradientScaled;
    bool reachedBoth = reached1 && reached2;

    // If the side is not reached, we continue to explore in this direction.
    if(!reached1){
        uv1 -= offset * QUALITY(1);
    }
    if(!reached2){
        uv2 += offset * QUALITY(1);
    }

    // If both sides have not been reached, continue to explore.
    if(!reachedBoth){
        for(int i = 2; i < dIterations; i++){
            // If needed, read luma in 1st direction, compute delta.
            if(!reached1){
                lumaEnd1 = sampleLuma(uv1);
                lumaEnd1 = lumaEnd1 - lumaLocalAverage;
            }
            // If needed, read luma in opposite direction, compute delta.
            if(!reached2){
                lumaEnd2 = sampleLuma(uv2);
                lumaEnd2 = lumaEnd2 - lumaLocalAverage;
            }
            // If the luma deltas at the current extremities is larger than the local gradient,
            // we have reached the side of the edge.
            reached1 = abs(lumaEnd1) >= gradientScaled;
            reached2 = abs(lumaEnd2) >= gradientScaled;
            reachedBoth = reached1 && reached2;

            // If the side is not reached, we continue to explore in this direction,
            // with a variable quality.
            if(!reached1){
                uv1 -= offset * QUALITY(i);
            }
            if(!reached2){
                uv2 += offset * QUALITY(i);
            }

            // If both sides have been reached, stop the exploration.
            if(reachedBoth){
                break;
            }
        }
    }

    // Compute the distances to each side edge of the edge (!).
    float distance1 = isHorizontal ? (coords.x - uv1.x) : (coords.y - uv1.y);
    float distance2 = isHorizontal ? (uv2.x - coords.x) : (uv2.y - coords.y);

    // In which direction is the side of the edge closer ?
    bool isDirection1 = distance1 < distance2;
    float distanceFinal = min(distance1, distance2);

    // Thickness of the edge.
    float edgeThickness = (distance1 + distance2);

    // Is the luma at center smaller than the local average ?
    bool isLumaCenterSmaller = lumaCenter < lumaLocalAverage;

    // If the luma at center is smaller than at its neighbour,
    // the delta luma at each end should be positive (same variation).
    bool correctVariation1 = (lumaEnd1 < 0.0) != isLumaCenterSmaller;
    bool correctVariation2 = (lumaEnd2 < 0.0) != isLumaCenterSmaller;

    // Only keep the result in the direction of the closer side of the edge.
    bool correctVariation = isDirection1 ? correctVariation1 : correctVariation2;

    // UV offset: read in the direction of the closest side of the edge.
    float pixelOffset = - distanceFinal / edgeThickness + 0.5;

    // If the luma variation is incorrect, do not offset.
    float finalOffset = correctVariation ? pixelOffset : 0.0;

    // Sub-pixel shifting
    // Full weighted average of the luma over the 3x3 neighborhood.
    float lumaAverage = (1.0 / 12.0) * (2.0 * (lumaDownUp + lumaLeftRight) + lumaLeftCorners + lumaRightCorners);
    // Ratio of the delta between the global average and the center luma,
    // over the luma range in the 3x3 neighborhood.
    float subPixelOffset1 = clamp(abs(lumaAverage - lumaCenter) / lumaRange, 0.0, 1.0);
    float subPixelOffset2 = (-2.0 * subPixelOffset1 + 3.0) * subPixelOffset1 * subPixelOffset1;
    // Compute a sub-pixel offset based on this delta.
    float subPixelOffsetFinal = subPixelOffset2 * subPixelOffset2 * float(dSubpixelQuality);

    // Pick the biggest of the two offsets.
    finalOffset = max(finalOffset, subPixelOffsetFinal);

    // Compute the final UV coordinates.
    vec2 finalUv = coords;
    if(isHorizontal){
        finalUv.y += finalOffset * stepLength;
    } else {
        finalUv.x += finalOffset * stepLength;
    }

    // Read the color at the new UV coordinates, and use it.
    gl_FragColor = texture2D(tColor, finalUv);
}        

/* old fxaa implementation
uniform highp sampler2D colormap;
varying highp vec2 vTexCoords;


// Basic FXAA implementation based on the code on geeks3d.com 
#define FXAA_REDUCE_MIN (1.0/ 128.0)
#define FXAA_REDUCE_MUL (1.0 / 8.0)
#define FXAA_SPAN_MAX 8.0


vec4 applyFXAA(vec2 fragCoord, highp sampler2D tex)
{
    vec4 color;
    ivec2 dim = textureSize(tex,0);
    vec2 dimensions = vec2(float(dim.x),float(dim.y));
    vec2 inverseVP = vec2(1.0 / dimensions.x, 1.0 / dimensions.y);
    vec4 rgbNW = texture2D(tex, fragCoord + vec2(-1.0, -1.0) * inverseVP);
    vec4 rgbNE = texture2D(tex, fragCoord + vec2(1.0, -1.0) * inverseVP);
    vec4 rgbSW = texture2D(tex, fragCoord + vec2(-1.0, 1.0) * inverseVP);
    vec4 rgbSE = texture2D(tex, fragCoord + vec2(1.0, 1.0) * inverseVP);
    vec4 rgbM  = texture2D(tex, fragCoord );
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW.xyz, luma);
    float lumaNE = dot(rgbNE.xyz, luma);
    float lumaSW = dot(rgbSW.xyz, luma);
    float lumaSE = dot(rgbSE.xyz, luma);
    float lumaM  = dot(rgbM.xyz,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                        (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
            max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
            dir * rcpDirMin)) * inverseVP;

    vec4 rgbA = 0.5 * (
        texture2D(tex, fragCoord + dir * (1.0 / 3.0 - 0.5)) +
        texture2D(tex, fragCoord  + dir * (2.0 / 3.0 - 0.5)));
    vec4 rgbB = rgbA * 0.5 + 0.25 * (
        texture2D(tex, fragCoord  + dir * -0.5) +
        texture2D(tex, fragCoord  + dir * 0.5));

    float lumaB = dot(rgbB.xyz, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = rgbA;
    else
        color = rgbB;

    return color;
}


//DEFINEFRAGCOLOR
void main (void) {
    ivec2 dim = textureSize(colormap,0);

  gl_FragColor = applyFXAA(vTexCoords, colormap);
}
        
*/`}),"./src/WebGL/shaders/lib/screenaa/screenaa.vert":((r,e,t)=>{t.r(e),t.d(e,{default:()=>a});const a=`attribute vec2 vertexPosition;
varying highp vec2 vTexCoords;
const vec2 scale = vec2(0.5, 0.5);

void main() {
   vTexCoords  = vertexPosition * scale + scale; // scale vertex attribute to [0,1] range
   gl_Position = vec4(vertexPosition, 0.0, 1.0);
}
        `}),"./src/WebGL/shaders/lib/screenaa/uniforms.ts":((r,e,t)=>{t.r(e),t.d(e,{uniforms:()=>a});const a={}}),"./src/WebGL/shaders/lib/sphereimposter/index.ts":((r,e,t)=>{t.r(e),t.d(e,{sphereimposter:()=>f});var a=t("./src/WebGL/shaders/lib/sphereimposter/uniforms.ts"),s=t("./src/WebGL/shaders/lib/sphereimposter/sphereimposter.frag"),o=t("./src/WebGL/shaders/lib/sphereimposter/sphereimposter.vert");const f={vertexShader:o.default.replace("#define GLSLIFY 1",""),fragmentShader:s.default.replace("#define GLSLIFY 1",""),uniforms:a.uniforms}}),"./src/WebGL/shaders/lib/sphereimposter/sphereimposter.frag":((r,e,t)=>{t.r(e),t.d(e,{default:()=>a});const a=`
uniform mat4 viewMatrix;
uniform float opacity;
uniform mat4 projectionMatrix;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
uniform float uDepth;
uniform vec3 directionalLightColor[ 1 ];

varying vec3 vColor;
varying vec2 mapping;
varying float rval;
varying vec3 vLight;
varying vec3 center;

#ifdef SHADED
uniform highp sampler2D shading;
#endif

//DEFINEFRAGCOLOR

void main() {
    float lensqr = dot(mapping,mapping);
    float rsqr = rval*rval;
    if(lensqr > rsqr)
       discard;
    float z = sqrt(rsqr-lensqr);
    vec3 cameraPos = center+ vec3(mapping.x,mapping.y,z);
    vec4 clipPos = projectionMatrix * vec4(cameraPos, 1.0);
    float ndcDepth = clipPos.z / clipPos.w;
    gl_FragDepthEXT = ((gl_DepthRange.diff * ndcDepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;
    vec3 norm = normalize(vec3(mapping.x,mapping.y,z));
    float dotProduct = dot( norm, vLight );
    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );
    vec3 vLight = directionalLightColor[ 0 ] * directionalLightWeighting;
    vec3 color = vLight*vColor;
#ifdef SHADED
    ivec2 dim = textureSize(shading,0);
    float shadowFactor = texture2D(shading,vec2(gl_FragCoord.x/float(dim.x),gl_FragCoord.y/float(dim.y))).r;
    color *= shadowFactor;
#endif    
    gl_FragColor = vec4(color, opacity*opacity );

    if(fogNear != fogFar) {
        float depth = -cameraPos.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }
     
}

`}),"./src/WebGL/shaders/lib/sphereimposter/sphereimposter.vert":((r,e,t)=>{t.r(e),t.d(e,{default:()=>a});const a=`uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;

varying vec2 mapping;
varying vec3 vColor;
varying float rval;
varying vec3 vLight;
varying vec3 center;

void main() {

    vColor = color;
    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
    center = mvPosition.xyz;
    vec4 projPosition = projectionMatrix * mvPosition;
    vec4 adjust = projectionMatrix* vec4(normal,0.0); adjust.z = 0.0; adjust.w = 0.0;
    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );
    vLight = normalize( lDirection.xyz );
    mapping = normal.xy;
    rval = abs(normal.x);
    gl_Position = projPosition+adjust;

}
`}),"./src/WebGL/shaders/lib/sphereimposter/uniforms.ts":((r,e,t)=>{t.r(e),t.d(e,{uniforms:()=>s});var a=t("./src/colors.ts");const s={opacity:{type:"f",value:1},fogColor:{type:"c",value:new a.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}}}),"./src/WebGL/shaders/lib/sphereimposteroutline/index.ts":((r,e,t)=>{t.r(e),t.d(e,{sphereimposteroutline:()=>f});var a=t("./src/WebGL/shaders/lib/sphereimposteroutline/uniforms.ts"),s=t("./src/WebGL/shaders/lib/sphereimposteroutline/sphereimposteroutline.frag"),o=t("./src/WebGL/shaders/lib/sphereimposteroutline/sphereimposteroutline.vert");const f={fragmentShader:s.default.replace("#define GLSLIFY 1",""),vertexShader:o.default.replace("#define GLSLIFY 1",""),uniforms:a.uniforms}}),"./src/WebGL/shaders/lib/sphereimposteroutline/sphereimposteroutline.frag":((r,e,t)=>{t.r(e),t.d(e,{default:()=>a});const a=`

uniform float opacity;
uniform vec3 outlineColor;
uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
uniform mat4 projectionMatrix;
varying vec2 mapping;
varying float rval;
varying vec3 center;

uniform float outlinePushback;

//DEFINEFRAGCOLOR

void main() {
    float lensqr = dot(mapping,mapping);
    float rsqr = rval*rval;
    if(lensqr > rsqr)
       discard;
    float z = sqrt(rsqr-lensqr);
    vec3 cameraPos = center+ vec3(mapping.x,mapping.y,z-outlinePushback);
    vec4 clipPos = projectionMatrix * vec4(cameraPos, 1.0);
    float ndcDepth = clipPos.z / clipPos.w;
    gl_FragDepthEXT = ((gl_DepthRange.diff * ndcDepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;
    gl_FragColor = vec4(outlineColor, 1 );

    if(fogNear != fogFar) {
        float depth = -cameraPos.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }
}


`}),"./src/WebGL/shaders/lib/sphereimposteroutline/sphereimposteroutline.vert":((r,e,t)=>{t.r(e),t.d(e,{default:()=>a});const a=`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform float outlineWidth;
uniform float outlinePushback;
uniform float outlineMaxPixels;
uniform float vWidth;
uniform float vHeight;

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;

varying vec2 mapping;
varying float rval;
varying vec3 center;

void main() {

    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
    center = mvPosition.xyz;
    vec4 projPosition = projectionMatrix * mvPosition;
    vec2 norm = normal.xy + vec2(sign(normal.x)*outlineWidth,sign(normal.y)*outlineWidth);

    vec4 adjust = projectionMatrix* vec4(norm,normal.z,1.0); 
    mapping = norm.xy;
    rval = abs(norm.x);
    gl_Position = projPosition+vec4(adjust.xy,0.0,0.0);

    if(outlineMaxPixels > 0.0) {
        vec4 unadjusted = projectionMatrix*vec4(center.x+normal.x, center.y,center.z,1.0); 
        vec4 ccoord = projectionMatrix*vec4(center.xyz,1.0);
        adjust = projectionMatrix* vec4(center.x+norm.x,center.y,center.z,1.0); 
        //subtract center 
        unadjusted.xyz -= ccoord.xyz;
        adjust.xyz -= ccoord.xyz;
        unadjusted /= unadjusted.w;
        adjust /= adjust.w;
        float diff = abs(adjust.x-unadjusted.x);
        diff *= vWidth;
        if(diff > outlineMaxPixels) {
            
            float fixlen = abs(unadjusted.x) + outlineMaxPixels/vWidth;
            //adjsut reval by ratio of lengths
            rval *= fixlen/abs(adjust.x);
        }

    }
}

`}),"./src/WebGL/shaders/lib/sphereimposteroutline/uniforms.ts":((r,e,t)=>{t.r(e),t.d(e,{uniforms:()=>s});var a=t("./src/colors.ts");const s={opacity:{type:"f",value:1},outlineColor:{type:"c",value:new a.Color(0,0,0)},fogColor:{type:"c",value:new a.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},outlineWidth:{type:"f",value:.1},outlinePushback:{type:"f",value:1},outlineMaxPixels:{type:"f",value:0}}}),"./src/WebGL/shaders/lib/sprite/index.ts":((r,e,t)=>{t.r(e),t.d(e,{sprite:()=>f});var a=t("./src/WebGL/shaders/lib/sprite/uniforms.ts"),s=t("./src/WebGL/shaders/lib/sprite/sprite.frag"),o=t("./src/WebGL/shaders/lib/sprite/sprite.vert");const f={fragmentShader:s.default.replace("#define GLSLIFY 1",""),vertexShader:o.default.replace("#define GLSLIFY 1",""),uniforms:a.uniforms}}),"./src/WebGL/shaders/lib/sprite/sprite.frag":((r,e,t)=>{t.r(e),t.d(e,{default:()=>a});const a=`

uniform vec3 color;
uniform sampler2D map;
uniform float opacity;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
uniform float alphaTest;

varying vec2 vUV;
//DEFINEFRAGCOLOR

void main() {

    vec4 texture = texture2D(map, vUV);

    if (texture.a <= alphaTest) discard;

    gl_FragColor = vec4(color * texture.xyz, texture.a * opacity);

    if (fogNear != fogFar) {

        float depth = gl_FragCoord.z / gl_FragCoord.w; //probably wrong
        float fogFactor = smoothstep(fogNear, fogFar, depth);        
        gl_FragColor = mix(gl_FragColor, vec4(fogColor, gl_FragColor.w), fogFactor);
    }
}

`}),"./src/WebGL/shaders/lib/sprite/sprite.vert":((r,e,t)=>{t.r(e),t.d(e,{default:()=>a});const a=`

uniform int useScreenCoordinates;
uniform vec3 screenPosition;
uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform float rotation;
uniform vec2 scale;
uniform vec2 alignment;
uniform vec2 uvOffset;
uniform vec2 uvScale;

attribute vec2 position;
attribute vec2 uv;

varying vec2 vUV;

void main() {

    vUV = uvOffset + uv * uvScale;

    vec2 alignedPosition = position + alignment;

    vec2 rotatedPosition;
    rotatedPosition.x = ( cos(rotation) * alignedPosition.x - sin(rotation) * alignedPosition.y ) * scale.x;
    rotatedPosition.y = ( sin(rotation) * alignedPosition.x + cos(rotation) * alignedPosition.y ) * scale.y;

    vec4 finalPosition;

    if(useScreenCoordinates != 0) {
        finalPosition = vec4(screenPosition.xy + rotatedPosition, screenPosition.z, 1.0);
    }

    else {
        finalPosition = projectionMatrix * modelViewMatrix * vec4(0.0, 0.0, 0.0, 1.0); finalPosition /= finalPosition.w;
        finalPosition.xy += rotatedPosition; 
    }

    gl_Position = finalPosition;

}

`}),"./src/WebGL/shaders/lib/sprite/uniforms.ts":((r,e,t)=>{t.r(e),t.d(e,{uniforms:()=>a});const a={}}),"./src/WebGL/shaders/lib/ssao/index.ts":((r,e,t)=>{t.r(e),t.d(e,{ssao:()=>f});var a=t("./src/WebGL/shaders/lib/ssao/uniforms.ts"),s=t("./src/WebGL/shaders/lib/ssao/ssao.frag"),o=t("./src/WebGL/shaders/lib/ssao/ssao.vert");const f={fragmentShader:s.default,vertexShader:o.default,uniforms:a.uniforms}}),"./src/WebGL/shaders/lib/ssao/ssao.frag":((r,e,t)=>{t.r(e),t.d(e,{default:()=>a});const a=`uniform sampler2D depthmap;
varying highp vec2 vTexCoords;
uniform float vWidth;
uniform float vHeight;
uniform float total_strength;
uniform float radius;
uniform mat4 projinv;
uniform mat4 projectionMatrix;

//code for pseudorandom vector from chatgpt
float hash(vec3 p) {
    p = fract(p * vec3(0.1031, 0.1030, 0.0973));
    p += dot(p, p.yzx + 33.33);
    return fract((p.x + p.y) * p.z);
}

// Generate a pseudorandom vec3 from a seed vec3
vec3 pseudorandomVec3(vec3 seed) {
    vec3 randomVec;
    randomVec.x = hash(seed);
    randomVec.y = hash(seed + vec3(1.0, 0.0, 17.1));
    randomVec.z = hash(seed + vec3(0.0, 13.23, 0.0));
    return randomVec;
}

void main(void)
{   
   const float base = 0.2;
   const float area = 0.75;
   const int cycles = 1;

   const int samples = 64;
   vec3 sample_sphere[64] = vec3[](
      vec3(0.091258,-0.510164,0.000000),
      vec3(-0.204347,-0.872967,0.187199),
      vec3(0.009690,-0.263696,-0.110414),
      vec3(0.175208,-0.563987,0.228527),
      vec3(-0.001824,-0.003113,-0.000323),
      vec3(0.411134,-0.719869,-0.261530),
      vec3(-0.074272,-0.377368,0.276290),
      vec3(-0.147773,-0.381587,-0.284529),
      vec3(0.173317,-0.199635,0.063295),
      vec3(-0.186452,-0.199460,0.076965),
      vec3(0.143985,-0.308160,-0.307687),
      vec3(0.053194,-0.148286,0.169589),
      vec3(-0.547656,-0.486476,-0.317378),
      vec3(0.020804,-0.015092,-0.004574),
      vec3(-0.038006,-0.043165,0.054059),
      vec3(-0.094795,-0.443908,-0.731525),
      vec3(0.547552,-0.396466,0.461477),
      vec3(-0.176886,-0.089989,0.007315),
      vec3(0.074401,-0.048840,-0.074039),
      vec3(-0.008240,-0.075697,0.178197),
      vec3(-0.307880,-0.185053,-0.368943),
      vec3(0.309520,-0.108483,0.041646),
      vec3(-0.773478,-0.292946,0.538166),
      vec3(0.184487,-0.231594,-0.820065),
      vec3(0.207318,-0.100531,0.361797),
      vec3(-0.173306,-0.037737,-0.055289),
      vec3(0.548102,-0.105342,-0.253237),
      vec3(-0.119342,-0.043907,0.285162),
      vec3(-0.270247,-0.087861,-0.751357),
      vec3(0.449312,-0.039777,0.236146),
      vec3(-0.743773,-0.036095,0.196056),
      vec3(0.148819,-0.004300,-0.231448),
      vec3(0.008773,0.000809,0.051047),
      vec3(-0.461467,0.027390,-0.357386),
      vec3(0.169626,0.013338,-0.014053),
      vec3(-0.043786,0.007095,0.047331),
      vec3(0.004821,0.140371,-0.988260),
      vec3(0.092402,0.023994,0.101860),
      vec3(-0.295335,0.061530,-0.027372),
      vec3(0.024903,0.007537,-0.018901),
      vec3(-0.081463,0.125402,0.447794),
      vec3(-0.397119,0.231805,-0.631062),
      vec3(0.163853,0.059014,0.044905),
      vec3(-0.495220,0.214357,0.254139),
      vec3(0.306123,0.373687,-0.825715),
      vec3(0.021665,0.026737,0.053220),
      vec3(-0.208231,0.117129,-0.098685),
      vec3(0.139749,0.080968,-0.043086),
      vec3(-0.153599,0.182814,0.262090),
      vec3(-0.159673,0.496777,-0.743568),
      vec3(0.134797,0.117152,0.095753),
      vec3(-0.155626,0.120533,0.019395),
      vec3(0.042311,0.054462,-0.049709),
      vec3(0.001257,0.031288,0.034468),
      vec3(-0.002271,0.003199,-0.002304),
      vec3(0.662104,0.717307,0.033854),
      vec3(-0.373100,0.576021,0.308274),
      vec3(0.024233,0.231316,-0.173688),
      vec3(0.161311,0.420217,0.234273),
      vec3(-0.045248,0.078031,-0.010411),
      vec3(0.167453,0.376942,-0.094872),
      vec3(-0.056194,0.433247,0.173218),
      vec3(-0.016224,0.123149,-0.035569),
      vec3(0.067127,0.407641,0.028479)
   );

   float depth = texture2D(depthmap, vTexCoords).r;
   if(depth == 1.0) {
      discard;
   }

   vec4 screen_position = vec4(vTexCoords, depth,1.0);
   vec4 pos = projinv*screen_position;
   pos /= pos.w;
   vec3 position = pos.xyz;

   //approximate the normal from the depth map; I find this simpler
   //than trying to recompute the exact normal within every possible object shader

   //pixel offset positions in screen space
   ivec2 dim = textureSize(depthmap,0);
   vec2 offset1 = vec2(0.0,1.0/float(dim.y));
   vec2 offset2 = vec2(1.0/float(dim.x),0.0);
   float depth1 = texture2D(depthmap, vTexCoords + offset1).r;
   float depth2 = texture2D(depthmap, vTexCoords + offset2).r;
   
   vec3 p1 = vec3(screen_position.xy+offset1, depth1 - depth);
   vec3 p2 = vec3(screen_position.xy+offset2, depth2 - depth);

   //convert to model space
   vec4 pos1 = projinv*vec4(p1,1);
   pos1 /= pos1.w;
   vec4 pos2 = projinv*vec4(p2,1);
   pos2 /= pos2.w;

   vec3 normal = normalize(cross(pos1.xyz-position, pos2.xyz-position)); //model normal, important we normalize in model space

   //pseudo random number

   float occlusion = 0.0;
   for(int c = 0; c < cycles; c++) {
   vec3 random = normalize(pseudorandomVec3(position+float(c)));
   for(int i=0; i < samples; i++) {

      vec3 ray = radius * reflect(sample_sphere[i],random);
      vec3 hemi_ray = position + sign(dot(ray,normal)) * ray; //model space
      vec4 hemi_screen = projectionMatrix*vec4(hemi_ray,1.0);
      hemi_screen /= hemi_screen.w;
      
      float occ_depth = texture2D(depthmap, clamp(hemi_screen.xy,0.0,1.0)).r;
      float difference = hemi_screen.z - occ_depth;
      
      occlusion += step(0.0, difference) * (1.0-smoothstep(0.0, area, difference));
   }
   }
   float ao = 1.0 - total_strength * occlusion * (1.0 / float(cycles*samples));
   gl_FragDepthEXT = clamp(ao+base,0.0,1.0);

}`}),"./src/WebGL/shaders/lib/ssao/ssao.vert":((r,e,t)=>{t.r(e),t.d(e,{default:()=>a});const a=`attribute vec2 vertexPosition;
varying highp vec2 vTexCoords;
const vec2 scale = vec2(0.5, 0.5);

void main() {
   vTexCoords  = vertexPosition * scale + scale; // scale vertex attribute to [0,1] range
   gl_Position = vec4(vertexPosition, 0.0, 1.0);
}
        `}),"./src/WebGL/shaders/lib/ssao/uniforms.ts":((r,e,t)=>{t.r(e),t.d(e,{uniforms:()=>a});const a={total_strength:{type:"f",value:1},radius:{type:"f",value:5},projinv:{type:"mat4",value:[]}}}),"./src/WebGL/shaders/lib/stickimposter/index.ts":((r,e,t)=>{t.r(e),t.d(e,{stickimposter:()=>u});var a=t("./src/WebGL/shaders/lib/stickimposter/uniforms.ts"),s=t("./src/WebGL/shaders/lib/stickimposter/stickimposterFragmentShader.partial.frag"),o=t("./src/WebGL/shaders/lib/stickimposter/stickimposter.partial.frag"),f=t("./src/WebGL/shaders/lib/stickimposter/stickimposter.vert");const u={fragmentShader:[s.default,o.default].join(`
`),vertexShader:f.default,uniforms:a.uniforms}}),"./src/WebGL/shaders/lib/stickimposter/stickimposter.partial.frag":((r,e,t)=>{t.r(e),t.d(e,{default:()=>a});const a=`    float dotProduct = dot( norm, vLight );
    vec3 light = vec3( max( dotProduct, 0.0 ) );
    color *= light;
#ifdef SHADED
    ivec2 dim = textureSize(shading,0);
    float shadowFactor = texture2D(shading,vec2(gl_FragCoord.x/float(dim.x),gl_FragCoord.y/float(dim.y))).r;
    color *= shadowFactor;
#endif    
    gl_FragColor = vec4(color, opacity*opacity );
    if(fogNear != fogFar) {
        float depth = -qi.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }
}`}),"./src/WebGL/shaders/lib/stickimposter/stickimposter.vert":((r,e,t)=>{t.r(e),t.d(e,{default:()=>a});const a=`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;
attribute float radius;

varying vec3 vColor;
varying vec3 vLight;
varying vec3 cposition;
varying vec3 p1;
varying vec3 p2;
varying float r;

void main() {

    vColor = color; vColor.z = abs(vColor.z); //z indicates which vertex and so would vary
    r = abs(radius);
    vec4 to = modelViewMatrix*vec4(normal, 1.0); //normal is other point of cylinder
    vec4 pt = modelViewMatrix*vec4(position, 1.0);
    vec4 mvPosition = pt;
    p1 = pt.xyz; p2 = to.xyz;
    vec3 norm = to.xyz-pt.xyz;
    float mult = 1.1; //slop to account for perspective of sphere
    if(length(p1) > length(p2)) { //billboard at level of closest point
       mvPosition = to;
    }
    vec3 n = normalize(mvPosition.xyz);
    bool isperspective = (projectionMatrix[3][3] == 0.0);
//intersect with the plane defined by the camera looking at the billboard point
    if(color.z >= 0.0) { //p1
       if(isperspective) { //perspective
         vec3 pnorm = normalize(p1);
         float t = dot(mvPosition.xyz-p1,n)/dot(pnorm,n);
         mvPosition.xyz = p1+t*pnorm; 
       } else { //orthographic
         mvPosition.xyz = p1;
       }
    } else {
      if(isperspective) { //perspective
         vec3 pnorm = normalize(p2);
         float t = dot(mvPosition.xyz-p2,n)/dot(pnorm,n);
         mvPosition.xyz = p2+t*pnorm;
       } else { //orthographic
         mvPosition.xyz = p2;
       } 
       mult *= -1.0;
    }

    if(isperspective) { //perspective
      vec3 cr = normalize(cross(mvPosition.xyz,norm))*radius;
      vec3 doublecr = normalize(cross(mvPosition.xyz,cr))*radius;
      mvPosition.xyz +=  mult*(cr + doublecr).xyz;
    } else {
      vec3 cr = normalize(cross(vec3(0.0,0.0,-1.0),norm))*radius;
      vec3 doublecr = normalize(cross(vec3(0.0,0.0,-1.0),cr))*radius;
      mvPosition.xyz +=  mult*(cr + doublecr).xyz;     
    }

    cposition = mvPosition.xyz;
    gl_Position = projectionMatrix * mvPosition;
    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );
    vLight = normalize( lDirection.xyz )*directionalLightColor[0]; //not really sure this is right, but color is always white so..
}

`}),"./src/WebGL/shaders/lib/stickimposter/stickimposterFragmentShader.partial.frag":((r,e,t)=>{t.r(e),t.d(e,{default:()=>a});const a=`uniform float opacity;
uniform mat4 projectionMatrix;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;

varying vec3 vLight;
varying vec3 vColor;
varying vec3 cposition;
varying vec3 p1;
varying vec3 p2;
varying float r;

#ifdef SHADED
uniform highp sampler2D shading;
#endif

//DEFINEFRAGCOLOR

//cylinder-ray intersection testing taken from http://mrl.nyu.edu/~dzorin/cg05/lecture12.pdf
//also useful: http://stackoverflow.com/questions/9595300/cylinder-impostor-in-glsl
//with a bit more care (caps) this could be a general cylinder imposter (see also outline)
void main() {
    vec3 color = abs(vColor);
    vec3 pos = cposition;
    vec3 p = pos; //ray point
    vec3 v = vec3(0.0,0.0,-1.0); //ray normal - orthographic
    if(projectionMatrix[3][3] == 0.0) v = normalize(pos); //ray normal - perspective
    vec3 pa = p1; //cyl start
    vec3 va = normalize(p2-p1); //cyl norm
    vec3 tmp1 = v-(dot(v,va)*va);
    vec3 deltap = p-pa;
    float A = dot(tmp1,tmp1);
    if(A == 0.0) discard;
    vec3 tmp2 = deltap-(dot(deltap,va)*va);
    float B = 2.0*dot(tmp1, tmp2);
    float C = dot(tmp2,tmp2)-r*r;
//quadratic equation!
    float det = (B*B) - (4.0*A*C);
    if(det < 0.0) discard;
    float sqrtDet = sqrt(det);
    float posT = (-B+sqrtDet)/(2.0*A);
    float negT = (-B-sqrtDet)/(2.0*A);
    float intersectionT = min(posT,negT);
    vec3 qi = p+v*intersectionT;
    float dotp1 = dot(va,qi-p1);
    float dotp2 = dot(va,qi-p2);
    vec3 norm;
    if( dotp1 < 0.0 || dotp2 > 0.0) { //(p-c)^2 + 2(p-c)vt +v^2+t^2 - r^2 = 0
       vec3 cp;
       if( dotp1 < 0.0) {  
//        if(vColor.x < 0.0 ) discard; //color sign bit indicates if we should cap or not
        cp = p1;
       } else {
//          if(vColor.y < 0.0 ) discard;
          cp = p2;
       }
       vec3 diff = p-cp;
       A = dot(v,v);
       B = dot(diff,v)*2.0;
       C = dot(diff,diff)-r*r;
       det = (B*B) - (4.0*C);
       if(det < 0.0) discard;
       sqrtDet = sqrt(det);
       posT = (-B+sqrtDet)/(2.0);
       negT = (-B-sqrtDet)/(2.0);
       float t = min(posT,negT);
       qi = p+v*t; 
       norm = normalize(qi-cp); 
    } else {
       norm = normalize(qi-(dotp1*va + p1));
    }
    vec4 clipPos = projectionMatrix * vec4(qi, 1.0);
    float ndcDepth = clipPos.z / clipPos.w;
    float depth = ((gl_DepthRange.diff * ndcDepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;
    gl_FragDepthEXT = depth;`}),"./src/WebGL/shaders/lib/stickimposter/uniforms.ts":((r,e,t)=>{t.r(e),t.d(e,{uniforms:()=>s});var a=t("./src/colors.ts");const s={opacity:{type:"f",value:1},fogColor:{type:"c",value:new a.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}}}),"./src/WebGL/shaders/lib/stickimposteroutline/index.ts":((r,e,t)=>{t.r(e),t.d(e,{stickimposteroutline:()=>u});var a=t("./src/WebGL/shaders/lib/stickimposteroutline/uniforms.ts"),s=t("./src/WebGL/shaders/lib/stickimposter/stickimposterFragmentShader.partial.frag"),o=t("./src/WebGL/shaders/lib/stickimposteroutline/stickimposteroutline.partial.frag"),f=t("./src/WebGL/shaders/lib/stickimposteroutline/stickimposteroutline.vert");const u={fragmentShader:s.default+o.default,vertexShader:f.default,uniforms:a.uniforms}}),"./src/WebGL/shaders/lib/stickimposteroutline/stickimposteroutline.partial.frag":((r,e,t)=>{t.r(e),t.d(e,{default:()=>a});const a=`
    gl_FragColor = vec4(color, opacity*opacity );
    if(fogNear != fogFar) {
        float depth = -qi.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }
}`}),"./src/WebGL/shaders/lib/stickimposteroutline/stickimposteroutline.vert":((r,e,t)=>{t.r(e),t.d(e,{default:()=>a});const a=`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];
uniform vec3 outlineColor;
uniform float outlineWidth;
uniform float outlinePushback;
uniform float outlineMaxPixels;
uniform float vWidth;
uniform mat4 projinv;


attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;
attribute float radius;

varying vec3 vColor;
varying vec3 vLight;
varying vec3 cposition;
varying vec3 p1;
varying vec3 p2;
varying float r;

void main() {

    vColor = outlineColor;
    float rad = radius+sign(radius)*outlineWidth;
    r = abs(rad);

    vec4 to = modelViewMatrix*vec4(normal, 1.0); //normal is other point of cylinder
    vec4 pt = modelViewMatrix*vec4(position, 1.0);
//pushback
    float scale = 1.0;
    if(projectionMatrix[3][3] != 0.0) { //orthographic
        to.z -= outlinePushback;
        pt.z -= outlinePushback;
    } else { //perspective
        vec4 midbefore = pt;
        if(length(to.xyz) < length(pt)) {
            midbefore = to;
        }
        vec4 midafter = midbefore;
        midafter.xyz += normalize(midbefore.xyz)*outlinePushback;

        to.xyz += normalize(to.xyz)*outlinePushback;
        pt.xyz += normalize(pt.xyz)*outlinePushback;

        //figure out a scaling factor for radius to account for perspective setback
        vec4 midbeforer = vec4(midbefore.x+rad,midbefore.y, midbefore.z, midbefore.w);
        vec4 midafterr = vec4(midafter.x+rad,midafter.y, midafter.z, midafter.w);

        vec4 mb = projectionMatrix*midbefore;
        vec4 mbr = projectionMatrix*midbeforer;
        vec4 ma = projectionMatrix*midafter;
        vec4 mar = projectionMatrix*midafterr;
        mb /= mb.w;
        mbr /= mbr.w;
        ma /= ma.w;
        mar /= mar.w;
        scale = abs((mbr.x-mb.x)/(mar.x-ma.x));
        rad *= scale;
        r = abs(rad);
    }
    vec4 mvPosition = pt;
    p1 = pt.xyz; p2 = to.xyz;
    vec3 norm = to.xyz-pt.xyz;
    float mult = 1.1; //slop to account for perspective of sphere
    if(length(p1) > length(p2)) { //billboard at level of closest point
       mvPosition = to;
    }

    vec3 n = normalize(mvPosition.xyz);
//intersect with the plane defined by the camera looking at the billboard point
    if(color.z >= 0.0) { //p1
       vec3 pnorm = normalize(p1);
       float t = dot(mvPosition.xyz-p1,n)/dot(pnorm,n);
       mvPosition.xyz = p1+t*pnorm;
    } else {
       vec3 pnorm = normalize(p2);
       float t = dot(mvPosition.xyz-p2,n)/dot(pnorm,n);
       mvPosition.xyz = p2+t*pnorm;
       mult *= -1.0;
    }

    if(outlineMaxPixels > 0.0) {
        vec4 cpos = mvPosition;
        vec4 unadjusted = projectionMatrix*vec4(cpos.x+abs(scale*radius), cpos.y,cpos.z,cpos.w); 
        vec4 ccoord = projectionMatrix*cpos;
        vec4 adjust = projectionMatrix*vec4(cpos.x+r,cpos.y,cpos.z,cpos.w); 
        unadjusted /= unadjusted.w;
        adjust /= adjust.w;
        unadjusted.xyz -= ccoord.xyz/ccoord.w;
        adjust.xyz -= ccoord.xyz/ccoord.w;
        float diff = abs(adjust.x-unadjusted.x);
        diff *= vWidth; //this should now be in pixels
        if(diff > outlineMaxPixels) {
            float fixlen = abs(unadjusted.x) + outlineMaxPixels/vWidth; 
            vec4 pcoord = ccoord;
            pcoord.x += fixlen*pcoord.w;
            vec4 altc = projinv*pcoord;
            r= abs(altc.x-cpos.x);
        }
    }

    vec3 cr = normalize(cross(mvPosition.xyz,norm))*rad;
    vec3 doublecr = normalize(cross(mvPosition.xyz,cr))*rad;
    mvPosition.xy +=  mult*(cr + doublecr).xy;
    cposition = mvPosition.xyz;
    gl_Position = projectionMatrix * mvPosition;
    vLight = vec3(1.0,1.0,1.0);
}

`}),"./src/WebGL/shaders/lib/stickimposteroutline/uniforms.ts":((r,e,t)=>{t.r(e),t.d(e,{uniforms:()=>s});var a=t("./src/colors.ts");const s={opacity:{type:"f",value:1},fogColor:{type:"c",value:new a.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},outlineColor:{type:"c",value:new a.Color(0,0,0)},outlineWidth:{type:"f",value:.1},outlinePushback:{type:"f",value:1},outlineMaxPixels:{type:"f",value:0},projinv:{type:"mat4",value:[]}}}),"./src/WebGL/shaders/lib/volumetric/index.ts":((r,e,t)=>{t.r(e),t.d(e,{volumetric:()=>f});var a=t("./src/WebGL/shaders/lib/volumetric/uniforms.ts"),s=t("./src/WebGL/shaders/lib/volumetric/volumetric.frag"),o=t("./src/WebGL/shaders/lib/volumetric/volumetric.vert");const f={fragmentShader:s.default.replace("#define GLSLIFY 1",""),vertexShader:o.default.replace("#define GLSLIFY 1",""),uniforms:a.uniforms}}),"./src/WebGL/shaders/lib/volumetric/uniforms.ts":((r,e,t)=>{t.r(e),t.d(e,{uniforms:()=>s});var a=t("./src/colors.ts");const s={opacity:{type:"f",value:1},fogColor:{type:"c",value:new a.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},data:{type:"i",value:3},colormap:{type:"i",value:4},depthmap:{type:"i",value:5},step:{type:"f",value:1},maxdepth:{type:"f",value:100},subsamples:{type:"f",value:5},textmat:{type:"mat4",value:[]},projinv:{type:"mat4",value:[]},transfermin:{type:"f",value:-.2},transfermax:{type:"f",value:.2}}}),"./src/WebGL/shaders/lib/volumetric/volumetric.frag":((r,e,t)=>{t.r(e),t.d(e,{default:()=>a});const a=`
uniform highp sampler3D data;
uniform highp sampler2D colormap;
uniform highp sampler2D depthmap;


uniform mat4 textmat;
uniform mat4 projinv;
uniform mat4 projectionMatrix;

uniform float step;
uniform float subsamples;
uniform float maxdepth;
uniform float transfermin;
uniform float transfermax;
in  vec4 mvPosition;
out vec4 color;
void main(void) {

   vec4 pos = mvPosition;
   bool seengood = false;
   float i = 0.0;
   color = vec4(1,1,1,0);
   float increment = 1.0/subsamples;
   float maxsteps = (maxdepth*subsamples/step);
//there's probably a better way to do this..
//calculate farthest possible point in model coordinates
   vec4 maxpos = vec4(pos.x,pos.y,pos.z-maxdepth,1.0);
// convert to projection
   maxpos = projectionMatrix*maxpos;
   vec4 startp = projectionMatrix*pos;
// homogonize
   maxpos /= maxpos.w;
   startp /= startp.w;
//take x,y from start and z from max
   maxpos = vec4(startp.x,startp.y,maxpos.z,1.0);
//convert back to model space
   maxpos = projinv*maxpos;
   maxpos /= maxpos.w;
   float incr = step/subsamples;
//get depth from depthmap
//startp is apparently [-1,1]
   vec2 tpos = startp.xy/2.0+0.5;
   float depth = texture(depthmap, tpos).r;
//compute vector between start and end
   vec4 direction = maxpos-pos;
   for( i = 0.0; i <= maxsteps; i++) {
      vec4 pt = (pos+(i/maxsteps)*direction);
      vec4 ppt = projectionMatrix*pt;
      float ptdepth = ppt.z/ppt.w;
      ptdepth = ((gl_DepthRange.diff * ptdepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;
      if(ptdepth > depth) break;
      pt = textmat*pt;
//       pt /= pt.w;
      if(pt.x >= -0.01 && pt.y >= -0.01 && pt.z >= -0.01 && pt.x <= 1.01 && pt.y <= 1.01 && pt.z <= 1.01) {
         seengood = true;
      } else if(seengood) {
         break;
      }
      if( pt.x < -0.01 || pt.x > 1.01 || pt.y < -0.01 || pt.y > 1.01 || pt.z < -0.01 || pt.z > 1.01  ){
          color.a = 0.0;
          continue;
      }
      else {
         float val = texture(data, pt.zyx).r;
         if(isinf(val)) continue; //masked out
         float cval = (val-transfermin)/(transfermax-transfermin); //scale to texture 0-1 range
         vec4 val_color = texture(colormap, vec2(cval,0.5));
         color.rgb = color.rgb*color.a + (1.0-color.a)*val_color.a*val_color.rgb;
         color.a += (1.0 - color.a) * val_color.a; 
         if(color.a > 0.0) color.rgb /= color.a;
//          color = vec4(pt.x, pt.y, pt.z, 1.0);
      }
//       color = vec4(pt.x, pt.y, pt.z, 0.0)
    }
}

        `}),"./src/WebGL/shaders/lib/volumetric/volumetric.vert":((r,e,t)=>{t.r(e),t.d(e,{default:()=>a});const a=`uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;

in vec3 position;
out vec4 mvPosition;
void main() {

    mvPosition = modelViewMatrix * vec4( position, 1.0 );
    gl_Position = projectionMatrix*mvPosition;
}
`}),"./src/WebGL/shaders/utils/clone.ts":((r,e,t)=>{t.r(e),t.d(e,{clone:()=>s});var a=t("./src/colors.ts");function s(o){let f={};for(const h in o){f[h]={},f[h].type=o[h].type;var u=o[h].value;u instanceof a.Color?f[h].value=u.clone():typeof u=="number"?f[h].value=u:u instanceof Array?f[h].value=[]:console.error("Error copying shader uniforms from ShaderLib: unknown type for uniform")}return f}}),"./src/WebGL/shaders/utils/index.ts":((r,e,t)=>{t.r(e),t.d(e,{ShaderUtils:()=>s,clone:()=>a.clone});var a=t("./src/WebGL/shaders/utils/clone.ts");const s={clone:a.clone}}),"./src/WebGL/shapes/Cylinder.ts":((r,e,t)=>{t.r(e),t.d(e,{Cylinder:()=>o});var a=t("./src/WebGL/math/index.ts");let s=new a.Vector3;class o{constructor(u=new a.Vector3,h=new a.Vector3,x=0){this.c1=u,this.c2=h,this.radius=x,this.direction=new a.Vector3().subVectors(this.c2,this.c1).normalize()}copy(u){return this.c1.copy(u.c1),this.c2.copy(u.c2),this.direction.copy(u.direction),this.radius=u.radius,this}lengthSq(){return s.subVectors(this.c2,this.c1).lengthSq()}applyMatrix4(u){return this.direction.add(this.c1).applyMatrix4(u),this.c1.applyMatrix4(u),this.c2.applyMatrix4(u),this.direction.sub(this.c1).normalize(),this.radius=this.radius*u.getMaxScaleOnAxis(),this}}}),"./src/WebGL/shapes/Sphere.ts":((r,e,t)=>{t.r(e),t.d(e,{Sphere:()=>s});var a=t("./src/WebGL/math/index.ts");class s{constructor(f={x:0,y:0,z:0},u=0){this.center=new a.Vector3(f.x,f.y,f.z),this.radius=u}set(f,u){return this.center.copy(f),this.radius=u,this}copy(f){return this.center.copy(f.center),this.radius=f.radius,this}applyMatrix4(f){return this.center.applyMatrix4(f),this.radius=this.radius*f.getMaxScaleOnAxis(),this}translate(f){return this.center.add(f),this}equals(f){return f.center.equals(this.center)&&f.radius===this.radius}clone(){return new s().copy(this)}}}),"./src/WebGL/shapes/Triangle.ts":((r,e,t)=>{t.r(e),t.d(e,{Triangle:()=>o});var a=t("./src/WebGL/math/index.ts");const s=new a.Vector3;class o{constructor(u=new a.Vector3,h=new a.Vector3,x=new a.Vector3){this.a=u,this.b=h,this.c=x}copy(u){return this.a.copy(u.a),this.b.copy(u.b),this.c.copy(u.c),this}applyMatrix4(u){return this.a.applyMatrix4(u),this.b.applyMatrix4(u),this.c.applyMatrix4(u),this}getNormal(){var u=this.a.clone();return u.sub(this.b),s.subVectors(this.c,this.b),u.cross(s),u.normalize(),u}}}),"./src/WebGL/shapes/index.ts":((r,e,t)=>{t.r(e),t.d(e,{Cylinder:()=>s.Cylinder,Sphere:()=>a.Sphere,Triangle:()=>o.Triangle});var a=t("./src/WebGL/shapes/Sphere.ts"),s=t("./src/WebGL/shapes/Cylinder.ts"),o=t("./src/WebGL/shapes/Triangle.ts")}),"./src/autoload.ts":((r,e,t)=>{t.r(e),t.d(e,{autoinit:()=>u,autoload:()=>m,processing_autoinit:()=>h,viewers:()=>x});var a=t("./src/GLViewer.ts"),s=t("./src/ProteinSurface4.ts"),o=t("./src/utilities.ts"),f=t("./src/colors.ts"),u=!1,h=!1,x={};function m(w,A){var D,I,y;if(document.querySelector(".viewer_3Dmoljs")!=null&&(u=!0),u){h=!0,w=w??null;var l=0;document.querySelectorAll(".viewer_3Dmoljs").forEach(c=>{var L=[],R=[],F="";c.style.position=="static"&&(c.style.position="relative");var $=null;if(y=null,c.dataset.pdb)L.push("https://files.rcsb.org/view/"+c.dataset.pdb+".pdb"),R.push("pdb");else if(c.dataset.cid)R.push("sdf"),L.push("https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/"+c.dataset.cid+"/SDF?record_type=3d");else if(c.dataset.href||c.dataset.url){if(c.dataset.href?F=c.dataset.href:F=c.dataset.url,L.push(F),y=F.substring(F.lastIndexOf(".")+1),y=="gz"){let O0=F.substring(0,F.lastIndexOf(".")).lastIndexOf(".");y=F.substring(O0+1)}R.push(y);var b=F.substring(F.lastIndexOf("/")+1,F.lastIndexOf("."));b=="/"&&(b=F.substring(F.lastIndexOf("/")+1)),c.dataset[R[R.length-1]]=b}let k=c.dataset;for(D in k)D.substring(0,3)==="pdb"&&D!=="pdb"?(L.push("https://files.rcsb.org/view/"+k[D]+".pdb"),R.push("pdb")):D.substring(0,4)==="href"&&D!=="href"?(F=k[D],L.push(F),R.push(F.substring(F.lastIndexOf(".")+1))):D.substring(0,3)==="cid"&&D!=="cid"&&(L.push("https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/"+k[D]+"/SDF?record_type=3d"),R.push("sdf"));var B={};c.dataset.options&&(B=(0,o.specStringToObject)(c.dataset.options));var J=f.CC.color(c.dataset.backgroundcolor),X=c.dataset.backgroundalpha;X=X==null?1:parseFloat(X);var ae={line:{}};c.dataset.style&&(ae=(0,o.specStringToObject)(c.dataset.style));var He={};c.dataset.select&&(He=(0,o.specStringToObject)(c.dataset.select));var Pe=[],ue=[],Oe=[],we={},Ze=null,it=c.dataset,lt=/style(.+)/,Vt=/surface(.*)/,_e=/labelres(.*)/,pr=[];for(I in it)Object.prototype.hasOwnProperty.call(it,I)&&pr.push(I);for(pr.sort(),D=0;D<pr.length;D++){I=pr[D];var _s=lt.exec(I),Ei,Bl,Wl;_s&&(Ei="select"+_s[1],Bl=(0,o.specStringToObject)(it[Ei]),Wl=(0,o.specStringToObject)(it[I]),Pe.push([Bl,Wl])),_s=Vt.exec(I),_s&&(Ei="select"+_s[1],Bl=(0,o.specStringToObject)(it[Ei]),Wl=(0,o.specStringToObject)(it[I]),ue.push([Bl,Wl])),_s=_e.exec(I),_s&&(Ei="select"+_s[1],Bl=(0,o.specStringToObject)(it[Ei]),Wl=(0,o.specStringToObject)(it[I]),Oe.push([Bl,Wl])),I=="zoomto"&&(we=(0,o.specStringToObject)(it[I])),I=="spin"&&(Ze=(0,o.specStringToObject)(it[I]))}var Ep=function(O0){for(O0.setStyle(He,ae),$&&$.createSelectionAndStyle(He,ae),D=0;D<Pe.length;D++){let zp=Pe[D][0]||{},M0=Pe[D][1]||{line:{}};O0.setStyle(zp,M0),$&&$.createSelectionAndStyle(He,ae)}for(D=0;D<ue.length;D++){let zp=ue[D][0]||{},M0=ue[D][1]||{};$?O0.addSurface(s.SurfaceType.VDW,M0,zp,zp).then(W0=>{$.loadSurface("VDW",zp,M0,W0)}):O0.addSurface(s.SurfaceType.VDW,M0,zp,zp)}for(D=0;D<Oe.length;D++){let zp=Oe[D][0]||{},M0=Oe[D][1]||{};O0.addResLabels(zp,M0)}O0.render(),O0.zoomTo(we),Ze&&O0.spin(Ze.axis,Ze.speed)};let Lp=w;try{var Op=(0,o.specStringToObject)(c.dataset.config)||{};Op.backgroundColor===void 0&&(Op.backgroundColor=J),Op.backgroundAlpha===void 0&&(Op.backgroundAlpha=X),Lp==null?Lp=x[c.id||l++]=(0,a.createViewer)(c,Op):(Lp.setBackgroundColor(J,X),Lp.setConfig(Op),$&&$.initiateUI()),c.dataset.ui&&$3Dmol.StateManager&&($=new $3Dmol.StateManager(Lp))}catch(O0){console.log(O0),c.textContent="WebGL appears to be disabled."}if(L.length!=0){let O0=0,zp=((M0,W0)=>function(im){F=L[O0];var F0=M0.dataset.type||M0.dataset.datatype||R[O0];if(W0.addModel(im,F0,B),$){var fm=M0.dataset[R[O0]];$.setModelTitle(fm)}O0+=1,O0<L.length?(0,o.get)(L[O0]).then(zp):(Ep(W0),M0.dataset.callback&&(0,o.makeFunction)(M0.dataset.callback)(W0),h=!1,A&&A(W0))})(c,Lp);y&&y.endsWith("gz")?(0,o.getbin)(L[0]).then(zp):(0,o.get)(L[0]).then(zp)}else{if(c.dataset.element){var R0="#"+c.dataset.element,N0=document.querySelector(R0),Qp=N0?N0.textContent:"";y=c.dataset.type||c.dataset.datatype,Lp.addModel(Qp,y,B)}Ep(Lp),c.dataset.callback&&(0,o.makeFunction)(c.dataset.callback)(Lp),h=!1,A&&A(Lp)}})}}document.onreadystatechange=()=>{document.readyState==="complete"&&m()}}),"./src/colors.ts":((r,e,t)=>{t.r(e),t.d(e,{CC:()=>s,Color:()=>a,builtinColorSchemes:()=>w,chains:()=>m,elementColors:()=>h,htmlColors:()=>o,residues:()=>x,ssColors:()=>f});class a{constructor(D,I,y){return this.r=0,this.g=0,this.b=0,arguments.length>1&&typeof D=="number"?(this.r=D||0,this.g=I||0,this.b=y||0,this):this.set(D||0)}set(D){return D instanceof a?D.clone():(typeof D=="number"?this.setHex(D):typeof D=="object"&&(this.r=D?.r||0,this.g=D?.g||0,this.b=D?.b||0),this)}setHex(D){return D=Math.floor(D),this.r=(D>>16&255)/255,this.g=(D>>8&255)/255,this.b=(D&255)/255,this}getHex(){var D=Math.round(this.r*255),I=Math.round(this.g*255),y=Math.round(this.b*255);return D<<16|I<<8|y}clone(){return new a(this.r,this.g,this.b)}copy(D){return this.r=D.r,this.g=D.g,this.b=D.b,this}scaled(){var D={};return D.r=Math.round(this.r*255),D.g=Math.round(this.g*255),D.b=Math.round(this.b*255),D.a=1,D}}class s{static color(D){if(!D)return s.cache[0];if(D instanceof a)return D;if(typeof D=="number"&&typeof s.cache[D]<"u")return s.cache[D];if(D&&Array.isArray(D))return D.map(s.color);let I=s.getHex(D),y=new a(I);return s.cache[I]=y,y}static getHex(D){if(Array.isArray(D))return D.map(s.getHex);if(typeof D=="string"){let I=D;if(!isNaN(parseInt(I)))return parseInt(I);if(I=I.trim(),I.length==4&&I[0]=="#"&&(I="#"+I[1]+I[1]+I[2]+I[2]+I[3]+I[3]),I.length==7&&I[0]=="#")return parseInt(I.substring(1),16);let y=s.rgbRegEx.exec(I);if(y){y[1]!=""&&console.log("WARNING: Opacity value in rgba ignored.  Specify separately as opacity attribute.");let c=0;for(let L=2;L<5;L++){c*=256;let R=y[L].endsWith("%")?255*parseFloat(y[L])/100:parseFloat(y[L]);c+=Math.round(R)}return c}let l=o[I.toLowerCase()];return l!==void 0?l:(console.error("color not found",D.toLowerCase(),o),0)}return D}}s.rgbRegEx=/rgb(a?)\(\s*([^ ,\)\t]+)\s*,\s*([^ ,\)\t]+)\s*,\s*([^ ,\)\t]+)/i,s.cache={0:new a(0)};const o={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgrey:11119017,darkgreen:25600,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,grey:8421504,green:32768,greenyellow:11403055,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgrey:13882323,lightgreen:9498256,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074,b:255,g:32768,r:16711680,c:49087,m:12517567,y:12566272,k:0,w:16777215},f={pyMol:{h:16711680,s:16776960,c:65280},Jmol:{h:16711808,s:16762880,c:16777215}},u={H:16777215,He:16761035,HE:16761035,Li:11674146,LI:11674146,B:65280,C:13158600,N:9408511,O:15728640,F:14329120,Na:255,NA:255,Mg:2263842,MG:2263842,Al:8421520,AL:8421520,Si:14329120,SI:14329120,P:16753920,S:16762930,Cl:65280,CL:65280,Ca:8421520,CA:8421520,Ti:8421520,TI:8421520,Cr:8421520,CR:8421520,Mn:8421520,MN:8421520,Fe:16753920,FE:16753920,Ni:10824234,NI:10824234,Cu:10824234,CU:10824234,Zn:10824234,ZN:10824234,Br:10824234,BR:10824234,Ag:8421520,AG:8421520,I:10494192,Ba:16753920,BA:16753920,Au:14329120,AU:14329120},h={defaultColor:16716947,Jmol:{H:16777215,He:14286847,HE:14286847,Li:13402367,LI:13402367,Be:12779264,BE:12779264,B:16758197,C:9474192,N:3166456,O:16715021,F:9494608,Ne:11789301,NE:11789301,Na:11230450,NA:11230450,Mg:9109248,MG:9109248,Al:12560038,AL:12560038,Si:1578e4,SI:1578e4,P:16744448,S:16777008,Cl:2093087,CL:2093087,Ar:8442339,AR:8442339,K:9388244,Ca:4062976,CA:4062976,Sc:15132390,SC:15132390,Ti:12567239,TI:12567239,V:10921643,Cr:9083335,CR:9083335,Mn:10255047,MN:10255047,Fe:14706227,FE:14706227,Co:15765664,CO:15765664,Ni:5296208,NI:5296208,Cu:13140019,CU:13140019,Zn:8224944,ZN:8224944,Ga:12750735,GA:12750735,Ge:6721423,GE:6721423,As:12419299,AS:12419299,Se:16752896,SE:16752896,Br:10889513,BR:10889513,Kr:6076625,KR:6076625,Rb:7351984,RB:7351984,Sr:65280,SR:65280,Y:9764863,Zr:9756896,ZR:9756896,Nb:7586505,NB:7586505,Mo:5551541,MO:5551541,Tc:3907230,TC:3907230,Ru:2396047,RU:2396047,Rh:687500,RH:687500,Pd:27013,PD:27013,Ag:12632256,AG:12632256,Cd:16767375,CD:16767375,In:10909043,IN:10909043,Sn:6717568,SN:6717568,Sb:10380213,SB:10380213,Te:13924864,TE:13924864,I:9699476,Xe:4366e3,XE:4366e3,Cs:5707663,CS:5707663,Ba:51456,BA:51456,La:7394559,LA:7394559,Ce:16777159,CE:16777159,Pr:14286791,PR:14286791,Nd:13107143,ND:13107143,Pm:10747847,PM:10747847,Sm:9437127,SM:9437127,Eu:6422471,EU:6422471,Gd:4587463,GD:4587463,Tb:3211207,TB:3211207,Dy:2097095,DY:2097095,Ho:65436,HO:65436,Er:58997,ER:58997,Tm:54354,TM:54354,Yb:48952,YB:48952,Lu:43812,LU:43812,Hf:5096191,HF:5096191,Ta:5089023,TA:5089023,W:2200790,Re:2522539,RE:2522539,Os:2516630,OS:2516630,Ir:1528967,IR:1528967,Pt:13684960,PT:13684960,Au:16765219,AU:16765219,Hg:12105936,HG:12105936,Tl:10900557,TL:10900557,Pb:5724513,PB:5724513,Bi:10375093,BI:10375093,Po:11230208,PO:11230208,At:7688005,AT:7688005,Rn:4358806,RN:4358806,Fr:4325478,FR:4325478,Ra:32e3,RA:32e3,Ac:7384058,AC:7384058,Th:47871,TH:47871,Pa:41471,PA:41471,U:36863,Np:33023,NP:33023,Pu:27647,PU:27647,Am:5528818,AM:5528818,Cm:7888099,CM:7888099,Bk:9064419,BK:9064419,Cf:10565332,CF:10565332,Es:11739092,ES:11739092,Fm:11739066,FM:11739066,Md:11734438,MD:11734438,No:12389767,NO:12389767,Lr:13041766,LR:13041766,Rf:13369433,RF:13369433,Db:13697103,DB:13697103,Sg:14221381,SG:14221381,Bh:14680120,BH:14680120,Hs:15073326,HS:15073326,Mt:15400998,MT:15400998},rasmol:u,defaultColors:Object.assign({},u),greenCarbon:Object.assign(Object.assign({},u),{C:65280}),cyanCarbon:Object.assign(Object.assign({},u),{C:65535}),magentaCarbon:Object.assign(Object.assign({},u),{C:16711935}),yellowCarbon:Object.assign(Object.assign({},u),{C:16776960}),whiteCarbon:Object.assign(Object.assign({},u),{C:16777215}),orangeCarbon:Object.assign(Object.assign({},u),{C:16753920}),purpleCarbon:Object.assign(Object.assign({},u),{C:8388736}),blueCarbon:Object.assign(Object.assign({},u),{C:255})},x={amino:{ALA:13158600,ARG:1334015,ASN:56540,ASP:15075850,CYS:15132160,GLN:56540,GLU:15075850,GLY:15461355,HIS:8553170,ILE:1016335,LEU:1016335,LYS:1334015,MET:15132160,PHE:3289770,PRO:14456450,SER:16422400,THR:16422400,TRP:11819700,TYR:3289770,VAL:1016335,ASX:16738740,GLX:16738740},shapely:{ALA:9240460,ARG:124,ASN:16743536,ASP:10485826,CYS:16777072,GLN:16731212,GLU:6684672,GLY:16777215,HIS:7368959,ILE:19456,LEU:4546117,LYS:4671416,MET:12099650,PHE:5459026,PRO:5395026,SER:16740418,THR:12078080,TRP:5195264,TYR:9203788,VAL:16747775,ASX:16711935,GLX:16711935},nucleic:{A:10526975,G:16740464,I:8454143,C:16747595,T:10551200,U:16744576}},m={atom:{A:12636415,B:11599792,C:16761032,D:16777088,E:16761087,F:11596016,G:16765040,H:15761536,I:16113331,J:49151,K:13458524,L:6737322,M:10145074,N:15631086,O:52945,P:65407,Q:3978097,R:139,S:12433259,T:25600,U:8388608,V:8421376,W:8388736,X:32896,Y:12092939,Z:11674146},hetatm:{A:9478351,B:8441752,C:13602992,D:13619056,E:13603023,F:8437952,G:13607008,H:12603504,I:12955267,J:42959,K:11881548,L:5682578,M:9090346,N:12481214,O:46753,P:53103,Q:3447649,R:187,S:10854235,T:37888,U:11534336,V:11579392,W:11534512,X:45232,Y:15250963,Z:12726834}},w={ssPyMol:{prop:"ss",map:f.pyMol},ssJmol:{prop:"ss",map:f.Jmol},Jmol:{prop:"elem",map:h.Jmol},amino:{prop:"resn",map:x.amino},shapely:{prop:"resn",map:x.shapely},nucleic:{prop:"resn",map:x.nucleic},chain:{prop:"chain",map:m.atom},rasmol:{prop:"elem",map:h.rasmol},default:{prop:"elem",map:h.defaultColors},greenCarbon:{prop:"elem",map:h.greenCarbon},chainHetatm:{prop:"chain",map:m.hetatm},cyanCarbon:{prop:"elem",map:h.cyanCarbon},magentaCarbon:{prop:"elem",map:h.magentaCarbon},purpleCarbon:{prop:"elem",map:h.purpleCarbon},whiteCarbon:{prop:"elem",map:h.whiteCarbon},orangeCarbon:{prop:"elem",map:h.orangeCarbon},yellowCarbon:{prop:"elem",map:h.yellowCarbon},blueCarbon:{prop:"elem",map:h.blueCarbon}}}),"./src/exporter.js":(r=>{typeof r.exports=="object"&&(r.exports=window.$3Dmol)}),"./src/glcartoon.ts":((r,e,t)=>{t.r(e),t.d(e,{drawCartoon:()=>He,subdivide_spline:()=>m});var a=t("./src/WebGL/math/index.ts"),s=t("./src/WebGL/shapes/index.ts"),o=t("./src/WebGL/index.ts"),f=t("./src/Gradient.ts"),u=t("./src/colors.ts"),h=t("./src/GLDraw.ts"),x=t("./src/utilities.ts");function m(Pe,ue){var Oe=[],we=Pe;we=[],we.push(Pe[0]);var Ze,it,lt,Vt,_e,pr,_s,Ei,Bl;for(Ze=1,it=Pe.length-1;Ze<it;Ze++)if(_e=Pe[Ze],pr=Pe[Ze+1],_e.smoothen){var Wl=new a.Vector3((_e.x+pr.x)/2,(_e.y+pr.y)/2,(_e.z+pr.z)/2);Wl.atom=_e.atom,we.push(Wl)}else we.push(_e);for(we.push(Pe[Pe.length-1]),Ze=-1,lt=we.length;Ze<=lt-3;Ze++)if(Vt=we[Ze===-1?0:Ze],_e=we[Ze+1],pr=we[Ze+2],_s=we[Ze===lt-3?lt-1:Ze+3],Ei=new a.Vector3().subVectors(pr,Vt).multiplyScalar(.5),Bl=new a.Vector3().subVectors(_s,_e).multiplyScalar(.5),!pr.skip)for(var Ep=0;Ep<ue;Ep++){var Lp=1/ue*Ep,Op=_e.x+Lp*Ei.x+Lp*Lp*(-3*_e.x+3*pr.x-2*Ei.x-Bl.x)+Lp*Lp*Lp*(2*_e.x-2*pr.x+Ei.x+Bl.x),R0=_e.y+Lp*Ei.y+Lp*Lp*(-3*_e.y+3*pr.y-2*Ei.y-Bl.y)+Lp*Lp*Lp*(2*_e.y-2*pr.y+Ei.y+Bl.y),N0=_e.z+Lp*Ei.z+Lp*Lp*(-3*_e.z+3*pr.z-2*Ei.z-Bl.z)+Lp*Lp*Lp*(2*_e.z-2*pr.z+Ei.z+Bl.z),Qp=new a.Vector3(Op,R0,N0);Ep<ue/2?Qp.atom=_e.atom:Qp.atom=pr.atom,Oe.push(Qp)}return Oe.push(we[we.length-1]),Oe}const w=.5,A=1.3,D=.8,I=.4,y=.4;function l(Pe,ue,Oe,we){for(var Ze,it,lt,Vt,_e=0,pr=ue.length;_e<pr;_e++){Vt=Math.round(_e*(we.length-1)/pr),lt=u.CC.color(we[Vt]);var _s=Pe.updateGeoGroup(2),Ei=_s.vertexArray,Bl=_s.colorArray,Wl=_s.faceArray;Ze=_s.vertices,it=Ze*3,Ei[it]=ue[_e].x,Ei[it+1]=ue[_e].y,Ei[it+2]=ue[_e].z,Ei[it+3]=Oe[_e].x,Ei[it+4]=Oe[_e].y,Ei[it+5]=Oe[_e].z;for(var Ep=0;Ep<6;++Ep)Bl[it+3*Ep]=lt.r,Bl[it+1+3*Ep]=lt.g,Bl[it+2+3*Ep]=lt.b;if(_e>0){var Lp=[Ze,Ze+1,Ze-1,Ze-2],Op=_s.faceidx;Wl[Op]=Lp[0],Wl[Op+1]=Lp[1],Wl[Op+2]=Lp[3],Wl[Op+3]=Lp[1],Wl[Op+4]=Lp[2],Wl[Op+5]=Lp[3],_s.faceidx+=6}_s.vertices+=2}}function c(Pe,ue,Oe,we,Ze,it,lt){var Vt,_e,pr,_s;if(pr=ue.length,pr<2||ue[0].length<2)return;for(Vt=0;Vt<pr;Vt++)ue[Vt]=m(ue[Vt],we);if(_s=ue[0].length,!Ze)return l(Pe,ue[0],ue[pr-1],Oe);var Ei,Bl,Wl,Ep,Lp,Op,R0=[],N0=[],Qp=[];for(_e=0;_e<pr;_e++)R0.push(.25+1.5*Math.sqrt((pr-1)*_e-Math.pow(_e,2))/(pr-1)),N0.push(.5),Qp.push(2*(Math.pow(_e/pr,2)-_e/pr)+.6);var O0=[];for(_e=0;_e<pr*2-1;_e++)O0[_e]=[_e,_e+1,_e+1-2*pr,_e-2*pr];O0[pr*2-1]=[_e,_e+1-2*pr,_e+1-4*pr,_e-2*pr];var zp,M0,W0,im,F0,fm,cm,Ap,Io,p0;let a0=Pe.updateGeoGroup();for(Vt=0;Vt<_s;Vt++){let Gl=Pe.groups,Mp=!1;a0=Pe.updateGeoGroup(2*pr),Gl!=Pe.groups&&Vt>0&&(Vt=Vt-1,Mp=!0),fm=Math.round(Vt*(Oe.length-1)/_s),F0=u.CC.color(Oe[fm]),Lp=Wl,Op=Ep,Wl=[],Ep=[],Ei=[],ue[0][Vt].atom!==void 0&&(im=ue[0][Vt].atom,lt==="oval"?Bl=R0:lt==="rectangle"?Bl=N0:lt==="parabola"&&(Bl=Qp)),Bl||(Bl=N0);var rm,X0;for(_e=0;_e<pr;_e++)Vt<_s-1?rm=ue[_e][Vt+1].clone().sub(ue[_e][Vt]):rm=ue[_e][Vt-1].clone().sub(ue[_e][Vt]).negate(),_e<pr-1?X0=ue[_e+1][Vt].clone().sub(ue[_e][Vt]):X0=ue[_e-1][Vt].clone().sub(ue[_e][Vt]).negate(),Ei[_e]=X0.cross(rm).normalize().multiplyScalar(Ze*Bl[_e]);for(_e=0;_e<pr;_e++)Wl[_e]=ue[_e][Vt].clone().add(Ei[_e].clone().negate());for(_e=0;_e<pr;_e++)Ep[_e]=ue[_e][Vt].clone().add(Ei[_e]);for(cm=a0.vertexArray,Ap=a0.colorArray,Io=a0.faceArray,zp=a0.vertices,M0=zp*3,_e=0;_e<pr;_e++)cm[M0+3*_e+0]=Wl[_e].x,cm[M0+3*_e+1]=Wl[_e].y,cm[M0+3*_e+2]=Wl[_e].z;for(_e=0;_e<pr;_e++)cm[M0+3*_e+0+3*pr]=Ep[pr-1-_e].x,cm[M0+3*_e+1+3*pr]=Ep[pr-1-_e].y,cm[M0+3*_e+2+3*pr]=Ep[pr-1-_e].z;for(_e=0;_e<2*pr;++_e)Ap[M0+3*_e+0]=F0.r,Ap[M0+3*_e+1]=F0.g,Ap[M0+3*_e+2]=F0.b;if(Vt>0&&!Mp){for(_e=0;_e<pr*2;_e++)p0=[zp+O0[_e][0],zp+O0[_e][1],zp+O0[_e][2],zp+O0[_e][3]],W0=a0.faceidx,Io[W0]=p0[0],Io[W0+1]=p0[1],Io[W0+2]=p0[3],Io[W0+3]=p0[1],Io[W0+4]=p0[2],Io[W0+5]=p0[3],a0.faceidx+=6;if(im.clickable||im.hoverable){var Nl=[];Nl.push(new s.Triangle(Lp[0],Wl[0],Wl[pr-1])),Nl.push(new s.Triangle(Lp[0],Wl[pr-1],Lp[pr-1])),Nl.push(new s.Triangle(Lp[pr-1],Wl[pr-1],Ep[pr-1])),Nl.push(new s.Triangle(Lp[pr-1],Ep[pr-1],Op[pr-1])),Nl.push(new s.Triangle(Ep[0],Op[0],Op[pr-1])),Nl.push(new s.Triangle(Ep[pr-1],Ep[0],Op[pr-1])),Nl.push(new s.Triangle(Wl[0],Lp[0],Op[0])),Nl.push(new s.Triangle(Ep[0],Wl[0],Op[0]));for(_e in Nl)im.intersectionShape.triangle.push(Nl[_e])}}a0.vertices+=2*pr}for(cm=a0.vertexArray,Ap=a0.colorArray,Io=a0.faceArray,zp=a0.vertices,M0=zp*3,W0=a0.faceidx,Vt=0;Vt<pr-1;Vt++)p0=[Vt,Vt+1,2*pr-2-Vt,2*pr-1-Vt],W0=a0.faceidx,Io[W0]=p0[0],Io[W0+1]=p0[1],Io[W0+2]=p0[3],Io[W0+3]=p0[1],Io[W0+4]=p0[2],Io[W0+5]=p0[3],a0.faceidx+=6;for(Vt=0;Vt<pr-1;Vt++)p0=[zp-1-Vt,zp-2-Vt,zp-2*pr+Vt+1,zp-2*pr+Vt],W0=a0.faceidx,Io[W0]=p0[0],Io[W0+1]=p0[1],Io[W0+2]=p0[3],Io[W0+3]=p0[1],Io[W0+4]=p0[2],Io[W0+5]=p0[3],a0.faceidx+=6}function L(Pe,ue,Oe,we,Ze,it){if(!(ue.length<2)){var lt,Vt;if(lt=ue[0],Vt=ue[ue.length-1],lt=m(lt,we),Vt=m(Vt,we),!Ze)return l(Pe,lt,Vt,Oe);var _e=[],pr,_s,Ei,Bl,Wl,Ep=[[0,2,-6,-8],[-4,-2,6,4],[7,-1,-5,3],[-3,5,1,-7]],Lp,Op,R0,N0,Qp,O0,zp,M0,W0,im,F0,fm,cm,Ap,Io,p0,a0;for(M0=0,W0=lt.length;M0<W0;M0++){if(Qp=Math.round(M0*(Oe.length-1)/W0),N0=u.CC.color(Oe[Qp]),_e.push(_s=lt[M0]),_e.push(_s),_e.push(Ei=Vt[M0]),_e.push(Ei),M0<W0-1){var rm=lt[M0+1].clone().sub(lt[M0]),X0=Vt[M0].clone().sub(lt[M0]);pr=X0.cross(rm).normalize().multiplyScalar(Ze)}for(_e.push(Bl=lt[M0].clone().add(pr)),_e.push(Bl),_e.push(Wl=Vt[M0].clone().add(pr)),_e.push(Wl),_s.atom!==void 0&&(O0=_s.atom),Ap=Pe.updateGeoGroup(8),Io=Ap.vertexArray,p0=Ap.colorArray,a0=Ap.faceArray,Lp=Ap.vertices,Op=Lp*3,Io[Op]=_s.x,Io[Op+1]=_s.y,Io[Op+2]=_s.z,Io[Op+3]=_s.x,Io[Op+4]=_s.y,Io[Op+5]=_s.z,Io[Op+6]=Ei.x,Io[Op+7]=Ei.y,Io[Op+8]=Ei.z,Io[Op+9]=Ei.x,Io[Op+10]=Ei.y,Io[Op+11]=Ei.z,Io[Op+12]=Bl.x,Io[Op+13]=Bl.y,Io[Op+14]=Bl.z,Io[Op+15]=Bl.x,Io[Op+16]=Bl.y,Io[Op+17]=Bl.z,Io[Op+18]=Wl.x,Io[Op+19]=Wl.y,Io[Op+20]=Wl.z,Io[Op+21]=Wl.x,Io[Op+22]=Wl.y,Io[Op+23]=Wl.z,im=0;im<8;++im)p0[Op+3*im]=N0.r,p0[Op+1+3*im]=N0.g,p0[Op+2+3*im]=N0.b;if(M0>0){var Nl=zp!==void 0&&O0!==void 0&&zp.serial!==O0.serial;for(im=0;im<4;im++){var Gl=[Lp+Ep[im][0],Lp+Ep[im][1],Lp+Ep[im][2],Lp+Ep[im][3]];if(R0=Ap.faceidx,a0[R0]=Gl[0],a0[R0+1]=Gl[1],a0[R0+2]=Gl[3],a0[R0+3]=Gl[1],a0[R0+4]=Gl[2],a0[R0+5]=Gl[3],Ap.faceidx+=6,O0.clickable||zp.clickable||O0.hoverable||zp.hoverable){var Mp=_e[Gl[3]].clone(),_0=_e[Gl[0]].clone(),v0=_e[Gl[2]].clone(),z0=_e[Gl[1]].clone();if(Mp.atom=_e[Gl[3]].atom||null,v0.atom=_e[Gl[2]].atom||null,_0.atom=_e[Gl[0]].atom||null,z0.atom=_e[Gl[1]].atom||null,Nl){var sm=Mp.clone().add(_0).multiplyScalar(.5),Uo=v0.clone().add(z0).multiplyScalar(.5),u0=Mp.clone().add(z0).multiplyScalar(.5);im%2===0?((zp.clickable||zp.hoverable)&&(F0=new s.Triangle(sm,u0,Mp),fm=new s.Triangle(Uo,v0,u0),cm=new s.Triangle(u0,v0,Mp),zp.intersectionShape.triangle.push(F0),zp.intersectionShape.triangle.push(fm),zp.intersectionShape.triangle.push(cm)),(O0.clickable||O0.hoverable)&&(F0=new s.Triangle(_0,z0,u0),fm=new s.Triangle(z0,Uo,u0),cm=new s.Triangle(_0,u0,sm),O0.intersectionShape.triangle.push(F0),O0.intersectionShape.triangle.push(fm),O0.intersectionShape.triangle.push(cm))):((O0.clickable||O0.hoverable)&&(F0=new s.Triangle(sm,u0,Mp),fm=new s.Triangle(Uo,v0,u0),cm=new s.Triangle(u0,v0,Mp),O0.intersectionShape.triangle.push(F0),O0.intersectionShape.triangle.push(fm),O0.intersectionShape.triangle.push(cm)),(zp.clickable||zp.hoverable)&&(F0=new s.Triangle(_0,z0,u0),fm=new s.Triangle(z0,Uo,u0),cm=new s.Triangle(_0,u0,sm),zp.intersectionShape.triangle.push(F0),zp.intersectionShape.triangle.push(fm),zp.intersectionShape.triangle.push(cm)))}else(O0.clickable||O0.hoverable)&&(F0=new s.Triangle(_0,z0,Mp),fm=new s.Triangle(z0,v0,Mp),O0.intersectionShape.triangle.push(F0),O0.intersectionShape.triangle.push(fm))}}}Ap.vertices+=8,zp=O0}var x0=_e.length-8;for(Ap=Pe.updateGeoGroup(8),Io=Ap.vertexArray,p0=Ap.colorArray,a0=Ap.faceArray,Lp=Ap.vertices,Op=Lp*3,R0=Ap.faceidx,M0=0;M0<4;M0++){_e.push(_e[M0*2]),_e.push(_e[x0+M0*2]);var Xl=_e[M0*2],Bp=_e[x0+M0*2];Io[Op+6*M0]=Xl.x,Io[Op+1+6*M0]=Xl.y,Io[Op+2+6*M0]=Xl.z,Io[Op+3+6*M0]=Bp.x,Io[Op+4+6*M0]=Bp.y,Io[Op+5+6*M0]=Bp.z,p0[Op+6*M0]=N0.r,p0[Op+1+6*M0]=N0.g,p0[Op+2+6*M0]=N0.b,p0[Op+3+6*M0]=N0.r,p0[Op+4+6*M0]=N0.g,p0[Op+5+6*M0]=N0.b}x0+=8,F0=[Lp,Lp+2,Lp+6,Lp+4],fm=[Lp+1,Lp+5,Lp+7,Lp+3],a0[R0]=F0[0],a0[R0+1]=F0[1],a0[R0+2]=F0[3],a0[R0+3]=F0[1],a0[R0+4]=F0[2],a0[R0+5]=F0[3],a0[R0+6]=fm[0],a0[R0+7]=fm[1],a0[R0+8]=fm[3],a0[R0+9]=fm[1],a0[R0+10]=fm[2],a0[R0+11]=fm[3],Ap.faceidx+=12,Ap.vertices+=8}}function R(Pe,ue,Oe,we,Ze,it,lt){(!lt||lt==="default")&&(lt="rectangle"),lt==="edged"?L(Pe,ue,Oe,we,Ze):(lt==="rectangle"||lt==="oval"||lt==="parabola")&&c(Pe,ue,Oe,we,Ze,it,lt)}function F(Pe){return Pe&&Pe.elem==="C"&&Pe.atom==="CA"}function $(Pe,ue){if(Pe&&ue&&Pe.chain===ue.chain){if(!Pe.hetflag&&!ue.hetflag&&Pe.reschain===ue.reschain&&(Pe.resi===ue.resi||Pe.resi===ue.resi-1))return!0;if(Pe.resi<ue.resi){var Oe=Pe.x-ue.x,we=Pe.y-ue.y,Ze=Pe.z-ue.z,it=Oe*Oe+we*we+Ze*Ze;if(Pe.atom=="CA"&&ue.atom=="CA"&&it<16||(Pe.atom=="P"||ue.atom=="P")&&it<64)return!0}}return!1}function b(Pe,ue,Oe,we,Ze){if(!(ue==null||ue.vertices==0)){Ze&&(ue.initTypedArrays(),ue.setUpNormals());var it=new o.MeshDoubleLambertMaterial;it.vertexColors=o.Coloring.FaceColors,typeof Oe=="number"&&Oe>=0&&Oe<1&&(it.transparent=!0,it.opacity=Oe),it.outline=we;var lt=new o.Mesh(ue,it);Pe.add(lt)}}function k(Pe,ue,Oe,we,Ze,it,lt,Vt,_e){var pr,_s,Ei,Bl,Wl,Ep;if(!(!we||!Ze||!lt)){var Lp=Ze.sub(we);Lp.normalize();var Op=Vt[_e];for(_s=_e+1;_s<Vt.length&&(Op=Vt[_s],Op.atom!=lt.atom);_s++);if(Op=Op?new a.Vector3(Op.x,Op.y,Op.z):new a.Vector3(0,0,0),Op.sub(we),lt.ss==="arrow start"){var R0=Op.clone().multiplyScalar(.3).cross(Ze);we.add(R0);var N0=Op.clone().cross(Lp).normalize();Lp.rotateAboutVector(N0,.43)}for(lt.style.cartoon.ribbon?pr=lt.style.cartoon.thickness||I:lt.style.cartoon.width?pr=lt.style.cartoon.width:lt.ss==="c"?lt.atom==="P"?pr=D:pr=w:lt.ss==="arrow start"?(pr=A,Wl=!0):lt.ss==="arrow end"||lt.ss==="h"&&lt.style.cartoon.tubes||lt.ss==="tube start"?pr=w:pr=A,it!=null&&Lp.dot(it)<0&&Lp.negate(),Lp.multiplyScalar(pr),_s=0;_s<ue;_s++)Ei=-1+_s*2/(ue-1),Bl=new a.Vector3(we.x+Ei*Lp.x,we.y+Ei*Lp.y,we.z+Ei*Lp.z),Bl.atom=lt,lt.ss==="s"&&(Bl.smoothen=!0),Pe[_s].push(Bl);if(Wl)for(Lp.multiplyScalar(2),_s=0;_s<ue;_s++)Ei=-1+_s*2/(ue-1),Bl=new a.Vector3(we.x+Ei*Lp.x,we.y+Ei*Lp.y,we.z+Ei*Lp.z),Bl.atom=lt,Bl.smoothen=!1,Bl.skip=!0,Pe[_s].push(Bl);return Ep=lt.style.cartoon.style||"default",Pe.style?Pe.style!=Ep&&(console.log("Warning: a cartoon chain's strand-style is ambiguous"),Pe.style="default"):Pe.style=Ep,(lt.ss==="arrow start"||lt.ss==="arrow end")&&(lt.ss="s"),Wl}}const B={C:!0,CA:!0,O:!0,P:!0,OP2:!0,O2P:!0,"O5'":!0,"O3'":!0,"C5'":!0,"C2'":!0,"O5*":!0,"O3*":!0,"C5*":!0,"C2*":!0,N1:!0,N3:!0},J={DA:!0,DG:!0,A:!0,G:!0},X={DT:!0,DC:!0,U:!0,C:!0,T:!0},ae={DA:!0,DG:!0,A:!0,G:!0,DT:!0,DC:!0,U:!0,C:!0,T:!0};function He(Pe,ue,Oe,we=10){let Ze=we,it=we;var lt,Vt,_e,pr,_s,Ei,Bl,Wl,Ep,Lp,Op,R0,N0,Qp,O0,zp,M0,W0,im=new o.Geometry(!0),F0=new o.Geometry(!0),fm=[],cm=[],Ap=1,Io=!1,p0={};for(var a0 in f.Gradient.builtinGradients)f.Gradient.builtinGradients.hasOwnProperty(a0)&&(p0[a0]=new f.Gradient.builtinGradients[a0](Oe[1],Oe[0]));var rm=function(V0,Ke){return Oe&&Ke.color==="spectrum"?Ke.colorscheme in p0?p0[Ke.colorscheme].valueToHex(V0.resi):p0.sinebow.valueToHex(V0.resi):(0,x.getColorFromStyle)(V0,Ke).getHex()};for(Wl=0;Wl<Ze;Wl++)cm[Wl]=[];var X0=!1,Nl=!1,Gl=[];for(Wl in ue){if(pr=ue[Wl],pr.elem==="C"&&pr.atom==="CA"){var Mp=$(_e,pr);Mp&&pr.ss==="s"?X0=!0:X0&&(_e&&Vt&&_e.style.cartoon.arrows&&Vt.style.cartoon.arrows&&(_e.ss="arrow end",Vt.ss="arrow start"),X0=!1),Mp&&(_e.ss==="h"||_e.ss=="tube start")&&_e.style.cartoon.tubes?!Nl&&_e.ss!="tube start"&&pr.style.cartoon.tubes&&(pr.ss="tube start",Nl=!0):Nl&&(_e.ss==="tube start"?_e.ss="tube end":Vt&&Vt.style.cartoon.tubes&&(Vt.ss="tube end"),Nl=!1),Vt=_e,_e=pr}pr&&pr.atom in B&&Gl.push(pr)}Nl&&_e.style.cartoon.tubes&&(_e.ss="tube end",Nl=!1);var _0=function(V0){cm[0].length>0&&R(F0,cm,fm,it,Bl,Ap,cm.style);var Ke=[],g0=null;if(V0){for(Wl=0;Wl<Ze;Wl++)Ke[Wl]=cm[Wl][cm[Wl].length-1];g0=fm[fm.length-1]}for(cm=[],Wl=0;Wl<Ze;Wl++)cm[Wl]=[];if(fm=[],V0){for(Wl=0;Wl<Ze;Wl++)cm[Wl].push(Ke[Wl]);fm.push(g0)}b(Pe,F0,Ap,Io,!0),b(Pe,im,Ap,Io,!1),F0=new o.Geometry(!0),im=new o.Geometry(!0)};_e=void 0;let v0=[];for(var z0=0;z0<Gl.length;z0++){pr=Gl[z0];var sm=pr.resn.trim(),Uo=sm in ae;if(Ap=1,lt=pr.style.cartoon,_e&&_e.style.cartoon&&(Ap=_e.style.cartoon.opacity),_e&&_e.style.cartoon&&_e.style.cartoon.outline&&(Io=_e.style.cartoon.outline),_e&&_e.style.cartoon&&(!pr.style.cartoon||_e.style.cartoon.opacity!=pr.style.cartoon.opacity)&&_0(_e.chain==pr.chain),_e&&pr&&!$(_e,pr)&&_e.chain&&_e.chain==pr.chain&&!_e.hetflag&&!pr.hetflag&&_e.reschain+1==pr.reschain&&v0.push([_e,pr]),lt.style==="trace"){if(!pr.hetflag&&(pr.elem==="C"&&pr.atom==="CA"||Uo&&pr.atom==="P"||pr.atom==="BB")){if(Ei=rm(pr,lt),(0,x.isNumeric)(lt.thickness)?Bl=lt.thickness:Bl=I,$(_e,pr))if(Ei==_s){var u0=u.CC.color(Ei);h.GLDraw.drawCylinder(im,_e,pr,Bl,u0,2,2)}else{var x0=new a.Vector3().addVectors(_e,pr).multiplyScalar(.5),Xl=u.CC.color(_s),Bp=u.CC.color(Ei);h.GLDraw.drawCylinder(im,_e,x0,Bl,Xl,2,0),h.GLDraw.drawCylinder(im,x0,pr,Bl,Bp,0,2)}if((pr.clickable===!0||pr.hoverable)&&pr.intersectionShape!==void 0){var L0=new a.Vector3(pr.x,pr.y,pr.z);pr.intersectionShape.sphere.push(new s.Sphere(L0,Bl))}_e=pr,_s=Ei}}else{if(F(pr)||Uo&&(pr.atom==="P"||pr.atom.indexOf("O5")==0)){if(W0)if(pr.ss==="tube end")W0=!1,M0=new a.Vector3(pr.x,pr.y,pr.z),h.GLDraw.drawCylinder(im,zp,M0,2,u.CC.color(_s),1,1),pr.ss="h";else if(_e.chain!=pr.chain||_e.ss==="tube end")W0=!1,_e.ss="h",M0=new a.Vector3(_e.x,_e.y,_e.z),h.GLDraw.drawCylinder(im,zp,M0,2,u.CC.color(_s),1,1);else continue;if(_e&&(!$(_e,pr)||_e.ss==="tube start")){for(_e.ss==="tube start"&&(W0=!0,zp=new a.Vector3(_e.x,_e.y,_e.z),_e.ss="h"),O0&&(R0?Qp=new a.Vector3().addVectors(_e,R0).multiplyScalar(.5):Qp=new a.Vector3(_e.x,_e.y,_e.z),h.GLDraw.drawCylinder(im,Qp,O0,y,u.CC.color(O0.color),0,2),k(cm,Ze,!0,R0,N0,Op,_e,Gl,z0),fm.push(Ei),Qp=null,O0=null),cm[0].length>0&&R(F0,cm,fm,it,Bl,Ap,cm.style),cm=[],Wl=0;Wl<Ze;Wl++)cm[Wl]=[];fm=[]}if(_e===void 0||_e.rescode!=pr.rescode||_e.resi!=pr.resi){if(O0&&_e!=null){Qp=new a.Vector3().addVectors(_e,pr).multiplyScalar(.5);var kl=Qp.clone().sub(O0).multiplyScalar(.02);Qp.add(kl),h.GLDraw.drawCylinder(im,Qp,O0,y,u.CC.color(O0.color),0,2),Qp=null,O0=null}Ei=rm(pr,lt),fm.push(Ei),(0,x.isNumeric)(lt.thickness)?Bl=lt.thickness:Bl=I,_e=pr,Ep=new a.Vector3(_e.x,_e.y,_e.z),Ep.resi=_e.resi,_s=Ei}(pr.clickable===!0||pr.hoverable===!0)&&(pr.intersectionShape===void 0||pr.intersectionShape.triangle===void 0)&&(pr.intersectionShape={sphere:null,cylinder:[],line:[],triangle:[]})}else _e!=null&&(F(_e)&&pr.atom==="O"||Uo&&_e.atom==="P"&&(pr.atom==="OP2"||pr.atom==="O2P")||Uo&&_e.atom.indexOf("O5")==0&&pr.atom.indexOf("C5")==0)?(Lp=new a.Vector3(pr.x,pr.y,pr.z),Lp.resi=pr.resi,(pr.atom==="OP2"||pr.atom==="O2P")&&(N0=new a.Vector3(pr.x,pr.y,pr.z))):Uo&&pr.atom.indexOf("O3")==0?R0=new a.Vector3(pr.x,pr.y,pr.z):(pr.atom==="N1"&&sm in J||pr.atom==="N3"&&sm in X)&&(O0=new a.Vector3(pr.x,pr.y,pr.z),O0.color=(0,x.getColorFromStyle)(pr,lt).getHex());Lp&&Ep&&Lp.resi===Ep.resi&&(k(cm,Ze,!0,Ep,Lp,Op,_e,Gl,z0),Op=Lp,Ep=null,Lp=null,fm.push(Ei))}}O0&&(R0?Qp=new a.Vector3().addVectors(_e,R0).multiplyScalar(.5):Qp=new a.Vector3(_e.x,_e.y,_e.z),h.GLDraw.drawCylinder(im,Qp,O0,y,u.CC.color(O0.color),0,2),k(cm,Ze,!0,R0,N0,Op,_e,Gl,z0),fm.push(Ei)),_0(!1);var Np=function(V0,Ke){if(V0.style.cartoon.gapcutoff&&V0.style.cartoon.gapcutoff==Ke.style.cartoon.gapcutoff){let d0=V0.style.cartoon.gapcutoff,Vl=Ke.resi-V0.resi;if(Vl>0&&Vl<d0){let jp=.25,K0=Ke.x-V0.x,Pm=Ke.y-V0.y,Cm=Ke.z-V0.z,Fm=Math.sqrt(K0*K0+Pm*Pm+Cm*Cm),ev=Fm/(2*Vl),h1=new a.Vector3(V0.x,V0.y,V0.z),xv=Fm/ev,gv=new a.Vector3((Ke.x-V0.x)/xv,(Ke.y-V0.y)/xv,(Ke.z-V0.z)/xv);h1.add({x:gv.x/2,y:gv.y/2,z:gv.z/2});let zv=h1.clone().add(gv);gv.multiplyScalar(2);let a1=(0,x.extend)({},V0);for(var g0=0;g0<Vl;g0++){a1.resi+=1;let Jv=rm(a1,a1.style.cartoon);h.GLDraw.drawCylinder(im,h1,zv,jp,u.CC.color(Jv),h.CAP.FLAT,h.CAP.FLAT),h1.add(gv),zv.add(gv)}_0(!1)}}};for(let V0 of v0)Np(V0[0],V0[1])}}),"./src/index.ts":((r,e,t)=>{t.r(e),t.d(e,{CAP:()=>a.CAP,CC:()=>a.CC,CONTEXTS_PER_VIEWPORT:()=>a.CONTEXTS_PER_VIEWPORT,Color:()=>a.Color,CustomLinear:()=>a.CustomLinear,Cylinder:()=>a.Cylinder,GLDraw:()=>a.GLDraw,GLModel:()=>a.GLModel,GLShape:()=>a.GLShape,GLViewer:()=>a.GLViewer,GLVolumetricRender:()=>a.GLVolumetricRender,Gradient:()=>a.Gradient,GradientType:()=>a.GradientType,Label:()=>a.Label,LabelCount:()=>a.LabelCount,MarchingCube:()=>a.MarchingCube,MarchingCubeInitializer:()=>a.MarchingCubeInitializer,Matrix3:()=>a.Matrix3,Matrix4:()=>a.Matrix4,Parsers:()=>a.Parsers,PausableTimer:()=>a.PausableTimer,PointGrid:()=>a.PointGrid,ProteinSurface:()=>a.ProteinSurface,Quaternion:()=>a.Quaternion,ROYGB:()=>a.ROYGB,RWB:()=>a.RWB,Ray:()=>a.Ray,Sinebow:()=>a.Sinebow,Sphere:()=>a.Sphere,SurfaceType:()=>a.SurfaceType,Triangle:()=>a.Triangle,Vector2:()=>a.Vector2,Vector3:()=>a.Vector3,VolumeData:()=>a.VolumeData,adjustVolumeStyle:()=>a.adjustVolumeStyle,applyPartialCharges:()=>a.applyPartialCharges,autoinit:()=>a.autoinit,autoload:()=>a.autoload,base64ToArray:()=>a.base64ToArray,bondLength:()=>a.bondLength,builtinColorSchemes:()=>a.builtinColorSchemes,builtinGradients:()=>a.builtinGradients,chains:()=>a.chains,clamp:()=>a.clamp,conversionMatrix3:()=>a.conversionMatrix3,createStereoViewer:()=>a.createStereoViewer,createViewer:()=>a.createViewer,createViewerGrid:()=>a.createViewerGrid,deepCopy:()=>a.deepCopy,degToRad:()=>a.degToRad,download:()=>a.download,drawCartoon:()=>a.drawCartoon,elementColors:()=>a.elementColors,extend:()=>a.extend,get:()=>a.get,getAtomProperty:()=>a.getAtomProperty,getColorFromStyle:()=>a.getColorFromStyle,getElement:()=>a.getElement,getExtent:()=>a.getExtent,getGradient:()=>a.getGradient,getPropertyRange:()=>a.getPropertyRange,getbin:()=>a.getbin,htmlColors:()=>a.htmlColors,inflateString:()=>a.inflateString,isEmptyObject:()=>a.isEmptyObject,isNumeric:()=>a.isNumeric,makeFunction:()=>a.makeFunction,mergeGeos:()=>a.mergeGeos,normalizeValue:()=>a.normalizeValue,partialCharges:()=>a.partialCharges,processing_autoinit:()=>a.processing_autoinit,residues:()=>a.residues,setBondLength:()=>a.setBondLength,setSyncSurface:()=>a.setSyncSurface,specStringToObject:()=>a.specStringToObject,splitMesh:()=>a.splitMesh,ssColors:()=>a.ssColors,subdivide_spline:()=>a.subdivide_spline,syncSurface:()=>a.syncSurface,viewers:()=>a.viewers});var a=t("./src/3Dmol.ts");window&&(window.$3Dmol=e)}),"./src/parsers/BCIF.ts":((r,e,t)=>{t.r(e),t.d(e,{BCIF:()=>I});var a=t("./src/utilities.ts"),s=t("./src/parsers/utils/computeSecondaryStructure.ts"),o=t("./src/parsers/utils/processSymmetries.ts"),f=t("./src/parsers/cifutils/category.ts"),u=t("./src/parsers/utils/assignPDBBonds.ts"),h=t("./src/WebGL/index.ts"),x=t("./src/parsers/utils/isEmpty.ts"),m=t("./src/vendor/mmtf.js");class w{constructor(l){if(this.C={},l){let c=l.getField("comp_id"),L=l.getField("atom_id_1"),R=l.getField("atom_id_2"),F=l.getField("value_order");for(let $=0;$<c.length;$++){let b=c[$],k=L[$],B=R[$],J=F[$],X=1;J=="doub"?X=2:J=="trip"&&(X=3),this.C[b]==null&&(this.C[b]={}),this.C[b][k]==null&&(this.C[b][k]={}),this.C[b][B]==null&&(this.C[b][B]={}),this.C[b][k][B]=X,this.C[b][B][k]=X}}}order(l,c,L){return this.C[l]!==void 0&&this.C[l][c]!==void 0&&this.C[l][c][L]!==void 0?this.C[l][c][L]:0}}class A{constructor(l){if(this.C=[],l){let c=l.getField("conn_type_id"),L=l.getField("ptnr1_label_asym_id"),R=l.getField("ptnr1_label_seq_id"),F=l.getField("ptnr1_label_comp_id"),$=l.getField("ptnr1_label_atom_id"),b=l.getField("ptnr2_label_asym_id"),k=l.getField("ptnr2_label_seq_id"),B=l.getField("ptnr2_label_comp_id"),J=l.getField("ptnr2_label_atom_id"),X=l.getField("pdbx_value_order");for(let ae=0;ae<c.length;ae++)if(c[ae]=="disulf"||c[ae]=="covale"){let He=X?X[ae]==""?1:parseInt(X[ae]):1;this.C.push([[L[ae],R[ae],F[ae],$[ae]],[b[ae],k[ae],B[ae],J[ae]],He])}}}}class D{constructor(){this.R={}}add(l){this.R[l.lchain]==null&&(this.R[l.lchain]={}),this.R[l.lchain][l.lresi]==null&&(this.R[l.lchain][l.lresi]={}),this.R[l.lchain][l.lresi][l.lresn]==null&&(this.R[l.lchain][l.lresi][l.lresn]=[]),this.R[l.lchain][l.lresi][l.lresn].push(l),this.R[l.lchain][l.lresi][l.lresn][l.atom]=l}geta([l,c,L,R]){if(this.R[l]!==void 0&&this.R[l][c]!==void 0&&this.R[l][c][L]!==void 0)return this.R[l][c][L][R]}setBonds(l,c){for(let L in this.R)for(let R in this.R[L])for(let F in this.R[L][R]){let $=this.R[L][R][F];for(let b=0;b<$.length;b++)for(let k=b+1;k<$.length;k++){let B=$[b],J=$[k],X=l.order(F,B.atom,J.atom);B.altLoc!=J.altLoc&&B.altLoc!=""&&J.altLoc!=""&&(X=0),X>0&&(B.bonds.push(J.index),J.bonds.push(B.index),B.bondOrder.push(X),J.bondOrder.push(X))}}for(let L of c.C){let R=L[0],F=L[1],$=L[2],b=this.geta(R),k=this.geta(F);b!=null&&k!=null&&(b.bonds.push(k.index),k.bonds.push(b.index),b.bondOrder.push($),k.bondOrder.push($))}}}function I(y,l){var c=!l.keepH,L=l.altLoc?l.altLoc:"A",R=!l.noComputeSecondaryStructure;const F=!l.doAssembly,$=l.assignBonds===void 0?!0:l.assignBonds;if(typeof y=="string")try{y=(0,a.base64ToArray)(y)}catch{y=new TextEncoder().encode(y)}else y=new Uint8Array(y);var b=m.decodeMsgpack(y);b==31&&(y=(0,a.inflateString)(y,!1),b=m.decodeMsgpack(y));var k=[],B=k.modelData=[],J=b.dataBlocks.length;if(J==0)return k;l.multimodel||(J=1);for(let X=0;X<J;X++){let ae=k.length;const He=[];B.push({symmetries:[]}),k.push([]);const Pe=b.dataBlocks[X],ue=Object.create(null);for(const p0 of Pe.categories)ue[p0.name.substr(1)]=(0,f.Category)(p0);let Oe={},we=ue.struct_conf;if(we){let p0=we.getField("conf_type_id"),a0=we.getField("beg_label_asym_id"),rm=we.getField("beg_label_seq_id"),X0=we.getField("end_label_seq_id");for(let Nl=0;Nl<p0.length;Nl++)if(p0[Nl].startsWith("H")){let Gl=a0[Nl],Mp=rm[Nl],_0=X0[Nl];Gl in Oe||(Oe[Gl]={}),Oe[Gl][Mp]="h1";for(let v0=Mp+1;v0<_0;v0++)Oe[Gl][v0]="h";Oe[Gl][_0]="h2"}}let Ze=ue.struct_sheet_range;if(Ze){let p0=Ze.getField("id"),a0=Ze.getField("beg_label_asym_id"),rm=Ze.getField("beg_label_seq_id"),X0=Ze.getField("end_label_seq_id");for(let Nl=0;Nl<p0.length;Nl++){let Gl=a0[Nl],Mp=rm[Nl],_0=X0[Nl];Gl in Oe||(Oe[Gl]={}),Oe[Gl][Mp]="s1";for(let v0=Mp+1;v0<_0;v0++)Oe[Gl][v0]="s";Oe[Gl][_0]="s2"}}let it=ue.pdbx_struct_oper_list,lt=it.getField("id");if(lt&&!F){let p0=it.getField("matrix[1][1]"),a0=it.getField("matrix[1][2]"),rm=it.getField("matrix[1][3]"),X0=it.getField("matrix[2][1]"),Nl=it.getField("matrix[2][2]"),Gl=it.getField("matrix[2][3]"),Mp=it.getField("matrix[3][1]"),_0=it.getField("matrix[3][2]"),v0=it.getField("matrix[3][3]"),z0=it.getField("vector[1]"),sm=it.getField("vector[2]"),Uo=it.getField("vector[3]");for(let u0=0;u0<lt.length;u0++){const x0=new h.Matrix4(p0[u0],a0[u0],rm[u0],z0[u0],X0[u0],Nl[u0],Gl[u0],sm[u0],Mp[u0],_0[u0],v0[u0],Uo[u0]);B[B.length-1].symmetries.push(x0)}}let Vt=new w(ue.chem_comp_bond),_e=new D,pr=new A(ue.struct_conn),_s=ue.atom_site,Ei=_s.rowCount,Bl=_s.getField("group_PDB"),Wl=_s.getField("Cartn_x"),Ep=_s.getField("Cartn_y"),Lp=_s.getField("Cartn_z"),Op=_s.getField("auth_asym_id"),R0=_s.getField("label_asym_id"),N0=_s.getField("auth_seq_id"),Qp=_s.getField("label_seq_id"),O0=_s.getField("auth_comp_id"),zp=_s.getField("label_comp_id"),M0=_s.getField("auth_atom_id"),W0=_s.getField("label_atom_id"),im=_s.getField("type_symbol"),F0=_s.getField("B_iso_or_equiv"),fm=_s.getField("id"),cm=_s.getField("label_alt_id"),Ap=_s.getField("pdbx_PDB_model_num"),Io=Ap?Ap[0]:0;for(let p0=0;p0<Ei;p0++){if(Bl!==void 0&&Bl[p0]==="TER")continue;if(Ap&&Ap[p0]!=Io)if(Io=Ap[p0],l.multimodel)l.onemol||(k.push([]),B.push(B[B.length-1]),Io=Ap[p0],_e.setBonds(Vt,pr),_e=new D);else break;const a0={};a0.x=Wl[p0],a0.y=Ep[p0],a0.z=Lp[p0],a0.chain=Op?Op[p0]:R0?R0[p0]:void 0,a0.lchain=R0?R0[p0]:void 0,a0.resi=N0?N0[p0]:Qp?Qp[p0]:void 0,a0.lresi=Qp?Qp[p0]:void 0,a0.resn=O0?O0[p0].trim():zp?zp[p0].trim():void 0,a0.lresn=zp?zp[p0].trim():void 0,a0.atom=M0?M0[p0].replace(/"/gm,""):W0?W0[p0].replace(/"/gm,""):void 0,a0.icode=cm?cm[p0]:void 0,a0.altLoc=a0.icode,a0.hetflag=!Bl||Bl[p0]==="HETA"||Bl[p0]==="HETATM";let rm="X";im&&(rm=im[p0].replace(/\(?\+?\d+.*/,"")),a0.elem=rm[0].toUpperCase()+rm.substring(1,2).toLowerCase(),F0&&(a0.b=F0[p0]),!(c&&a0.elem=="H")&&(a0.altLoc!=""&&a0.altLoc!=L&&L!="*"||(a0.bonds=[],a0.ss="c",a0.serial=fm[p0],a0.model=Io,a0.bondOrder=[],a0.properties={},a0.index=k[k.length-1].length,He[a0.serial]=[k.length,a0.index],k[k.length-1].push(a0),_e.add(a0)))}if(_e.setBonds(Vt,pr),!(0,x.isEmpty)(Oe))for(let p0=ae;p0<k.length;p0++){let a0=k[p0];for(let rm=0;rm<a0.length;rm++){const X0=a0[rm];if(X0!==void 0&&X0.lchain in Oe&&X0.lresi in Oe[X0.lchain]){const Nl=Oe[X0.lchain][X0.lresi];X0.ss=Nl[0],Nl.length>1&&(Nl[1]=="1"?X0.ssbegin=!0:Nl[1]=="2"&&(X0.ssend=!0))}}}l.multimodel&&X<J-1&&(l.onemol||(k.push([]),B.push({symmetries:[]})))}for(let X=0;X<k.length;X++)$&&!(l.duplicateAssemblyAtoms&&!l.dontConnectDuplicatedAtoms)&&(0,u.assignPDBBonds)(k[X],l),R&&(0,s.computeSecondaryStructure)(k[X],l.hbondCutoff),(0,o.processSymmetries)(B[X].symmetries,k[X],l,B[X].cryst),l.duplicateAssemblyAtoms&&!l.dontConnectDuplicatedAtoms&&$&&(0,u.assignPDBBonds)(k[X],l);return k}}),"./src/parsers/CDJSON.ts":((r,e,t)=>{t.r(e),t.d(e,{CDJSON:()=>a});function a(s,o){var f=[[]];typeof s=="string"&&(s=JSON.parse(s));for(var u=s.m,h=u[0].a,x=u[0].b,m=u[0].s,w=o!==void 0&&o.parseStyle!==void 0?o.parseStyle:m!==void 0,A=f[f.length-1].length,D=0;D<h.length;D++){var I=h[D],y={};y.id=I.i,y.x=I.x,y.y=I.y,y.z=I.z||0,y.bonds=[],y.bondOrder=[];var l=I.l||"C";y.elem=l[0].toUpperCase()+l.substring(1).toLowerCase(),y.serial=f[f.length-1].length,w&&(y.style=m[I.s||0]),f[f.length-1].push(y)}for(let c=0;c<x.length;c++){let L=x[c],R=L.b+A,F=L.e+A,$=L.o||1,b=f[f.length-1][R],k=f[f.length-1][F];b.bonds.push(F),b.bondOrder.push($),k.bonds.push(R),k.bondOrder.push($)}return f}}),"./src/parsers/CIF.ts":((r,e,t)=>{t.r(e),t.d(e,{CIF:()=>h});var a=t("./src/parsers/utils/computeSecondaryStructure.ts"),s=t("./src/parsers/utils/processSymmetries.ts"),o=t("./src/WebGL/index.ts"),f=t("./src/parsers/utils/assignPDBBonds.ts");const u=function(x,m,w,A){return new o.Vector3(m,w,A).applyMatrix3(x)};function h(x,m={}){const w=[],A=!m.doAssembly,D=w.modelData=[],I=m.assignBonds===void 0?!0:m.assignBonds;function y($,b){const k=[];let B=0,J=0;for(;J<$.length;){for(;$.substring(J,J+b.length)!==b&&J<$.length;)if($[J]==="'"){for(J++;J<$.length&&$[J]!=="'";)J++;for(;$.substring(J,J+b.length)!==b&&J<$.length;)J++}else if($[J]==='"'){for(J++;J<$.length&&$[J]!=='"';)J++;J++}else J++;k.push($.substring(B,J)),B=J=J+b.length}return k}const l=x.split(/\r?\n|\r/),c=[];let L=!1;for(let $=0;$<l.length;$++){var R=l[$].split("#")[0];if(L?R[0]===";"&&(L=!1):R[0]===";"&&(L=!0),L||R!==""){if(!L&&(R=R.trim(),R[0]==="_")){const b=R.split(/\s/)[0].indexOf(".");if(b>-1){let k=R.split("");k[b]="_",R=k.join(""),R=R.substring(0,b)+"_"+R.substring(b+1)}}c.push(R)}}let F=0;for(;F<c.length;){for(;!c[F].startsWith("data_")||c[F]==="data_global";)F++;F++;const $={};for(;F<c.length&&!c[F].startsWith("data_");)if(c[F][0]===void 0)F++;else if(c[F][0]==="_"){const J=c[F].split(/\s/)[0].toLowerCase(),X=$[J]=$[J]||[],ae=c[F].substring(c[F].indexOf(J)+J.length);if(ae==="")if(F++,c[F][0]===";"){let He=c[F].substring(1);for(F++;c[F]!==";";)He=He+`
`+c[F],F++;X.push(He)}else X.push(c[F]);else X.push(ae.trim());F++}else if(c[F].substring(0,5)==="loop_"){F++;const J=[];for(;c[F]===""||c[F][0]==="_";){if(c[F]!==""){let ae=c[F].split(/\s/)[0].toLowerCase(),He=$[ae]=$[ae]||[];J.push(He)}F++}let X=0;for(;F<c.length&&c[F][0]!=="_"&&!c[F].startsWith("loop_")&&!c[F].startsWith("data_");){let ae=y(c[F]," ");for(let He=0;He<ae.length;He++)ae[He]!==""&&(J[X].push(ae[He]),X=(X+1)%J.length);F++}}else F++;D.push({symmetries:[]}),w.push([]);const b=$._atom_site_id!==void 0?$._atom_site_id.length:$._atom_site_label.length;let k;if($._cell_length_a!==void 0){const J=parseFloat($._cell_length_a),X=parseFloat($._cell_length_b),ae=parseFloat($._cell_length_c),He=parseFloat($._cell_angle_alpha)||90,Pe=parseFloat($._cell_angle_beta)||90,ue=parseFloat($._cell_angle_gamma)||90;k=(0,o.conversionMatrix3)(J,X,ae,He,Pe,ue),D[D.length-1].cryst={a:J,b:X,c:ae,alpha:He,beta:Pe,gamma:ue}}for(let J=0;J<b;J++){if($._atom_site_group_pdb!==void 0&&$._atom_site_group_pdb[J]==="TER")continue;const X={};if($._atom_site_cartn_x!==void 0)X.x=parseFloat($._atom_site_cartn_x[J]),X.y=parseFloat($._atom_site_cartn_y[J]),X.z=parseFloat($._atom_site_cartn_z[J]);else{const He=u(k,parseFloat($._atom_site_fract_x[J]),parseFloat($._atom_site_fract_y[J]),parseFloat($._atom_site_fract_z[J]));X.x=He.x,X.y=He.y,X.z=He.z}X.chain=$._atom_site_auth_asym_id?$._atom_site_auth_asym_id[J]:$._atom_site_label_asym_id?$._atom_site_label_asym_id[J]:void 0,X.lchain=$._atom_site_label_asym_id?$._atom_site_label_asym_id[J]:void 0,X.resi=$._atom_site_auth_seq_id?parseInt($._atom_site_auth_seq_id[J]):$._atom_site_label_seq_id?$._atom_site_label_seq_id[J]:void 0,X.resn=$._atom_site_auth_comp_id?$._atom_site_auth_comp_id[J].trim():$._atom_site_label_comp_id?$._atom_site_label_comp_id[J].trim():void 0,X.atom=$._atom_site_auth_atom_id?$._atom_site_auth_atom_id[J].replace(/"/gm,""):$._atom_site_label_atom_id?$._atom_site_label_atom_id[J].replace(/"/gm,""):void 0,X.hetflag=!$._atom_site_group_pdb||$._atom_site_group_pdb[J]==="HETA"||$._atom_site_group_pdb[J]==="HETATM",$._atom_site_b_iso_or_equiv&&(X.b=parseFloat($._atom_site_b_iso_or_equiv[J]));let ae="X";$._atom_site_type_symbol?ae=$._atom_site_type_symbol[J].replace(/\(?\+?\d+.*/,""):$._atom_site_label&&(ae=$._atom_site_label[J].split("_")[0].replace(/\(?\d+.*/,"")),X.elem=ae[0].toUpperCase()+ae.substring(1,2).toLowerCase(),X.bonds=[],X.ss="c",X.serial=J,X.bondOrder=[],X.properties={},w[w.length-1].push(X)}if($._pdbx_struct_oper_list_id!==void 0&&!A)for(let J=0;J<$._pdbx_struct_oper_list_id.length;J++){const X=parseFloat($["_pdbx_struct_oper_list_matrix[1][1]"][J]),ae=parseFloat($["_pdbx_struct_oper_list_matrix[1][2]"][J]),He=parseFloat($["_pdbx_struct_oper_list_matrix[1][3]"][J]),Pe=parseFloat($["_pdbx_struct_oper_list_vector[1]"][J]),ue=parseFloat($["_pdbx_struct_oper_list_matrix[2][1]"][J]),Oe=parseFloat($["_pdbx_struct_oper_list_matrix[2][2]"][J]),we=parseFloat($["_pdbx_struct_oper_list_matrix[2][3]"][J]),Ze=parseFloat($["_pdbx_struct_oper_list_vector[2]"][J]),it=parseFloat($["_pdbx_struct_oper_list_matrix[3][1]"][J]),lt=parseFloat($["_pdbx_struct_oper_list_matrix[3][2]"][J]),Vt=parseFloat($["_pdbx_struct_oper_list_matrix[3][3]"][J]),_e=parseFloat($["_pdbx_struct_oper_list_vector[3]"][J]),pr=new o.Matrix4(X,ae,He,Pe,ue,Oe,we,Ze,it,lt,Vt,_e);D[D.length-1].symmetries.push(pr)}const B=function(J){const X=J.match("-");J=J.replace(/[-xyz]/g,"");const ae=J.split("/");let He,Pe;return ae[1]===void 0?Pe=1:Pe=parseInt(ae[1]),ae[0]===""?He=1:He=parseInt(ae[0]),He/Pe*(X?-1:1)};if($._symmetry_equiv_pos_as_xyz!==void 0&&!A)for(let J=0;J<$._symmetry_equiv_pos_as_xyz.length;J++){const X=$._symmetry_equiv_pos_as_xyz[J].replace(/["' ]/g,"").split(",").map(function(ue){return ue.replace(/-/g,"+-")});let ae=new o.Matrix4(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1);for(let ue=0;ue<3;ue++){const Oe=X[ue].split("+");for(let we=0;we<Oe.length;we++){const Ze=Oe[we];if(Ze==="")continue;const it=B(Ze);Ze.match("x")?ae.elements[ue+0]=it:Ze.match("y")?ae.elements[ue+4]=it:Ze.match("z")?ae.elements[ue+8]=it:ae.elements[ue+12]=it}}const He=k.getMatrix4(),Pe=new o.Matrix4().getInverse(He,!0);ae=new o.Matrix4().multiplyMatrices(ae,Pe),ae=new o.Matrix4().multiplyMatrices(He,ae),D[D.length-1].symmetries.push(ae)}}for(let $=0;$<w.length;$++)I&&!(m.duplicateAssemblyAtoms&&!m.dontConnectDuplicatedAtoms)&&(0,f.assignPDBBonds)(w[$],m),(0,a.computeSecondaryStructure)(w[$],m.hbondCutoff),(0,s.processSymmetries)(D[$].symmetries,w[$],m,D[$].cryst),m.duplicateAssemblyAtoms&&!m.dontConnectDuplicatedAtoms&&I&&(0,f.assignPDBBonds)(w[$],m);return w}}),"./src/parsers/CUBE.ts":((r,e,t)=>{t.r(e),t.d(e,{CUBE:()=>f});var a=t("./src/WebGL/index.ts"),s=t("./src/parsers/utils/assignBonds.ts"),o=t("./src/parsers/utils/anumToSymbol.ts");function f(u,h){h=h||{};const x=[[]];let m=u.split(/\r?\n/);const w=h.assignBonds===void 0?!0:h.assignBonds;if(m.length<6)return x;let A=m[2].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");const D=Math.abs(parseFloat(A[0]));let I={origin:void 0,size:void 0,unit:void 0,matrix4:void 0,matrix:void 0};const y=I.origin=new a.Vector3(parseFloat(A[1]),parseFloat(A[2]),parseFloat(A[3]));A=m[3].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),A=m[3].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");const l=A[0]>0?.529177:1;y.multiplyScalar(l);const c=Math.abs(A[0]),L=new a.Vector3(parseFloat(A[1]),parseFloat(A[2]),parseFloat(A[3])).multiplyScalar(l);A=m[4].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");const R=Math.abs(A[0]),F=new a.Vector3(parseFloat(A[1]),parseFloat(A[2]),parseFloat(A[3])).multiplyScalar(l);A=m[5].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");const $=Math.abs(A[0]),b=new a.Vector3(parseFloat(A[1]),parseFloat(A[2]),parseFloat(A[3])).multiplyScalar(l);if(I.size={x:c,y:R,z:$},I.unit=new a.Vector3(L.x,F.y,b.z),L.y!=0||L.z!=0||F.x!=0||F.z!=0||b.x!=0||b.y!=0){I.matrix4=new a.Matrix4(L.x,F.x,b.x,0,L.y,F.y,b.y,0,L.z,F.z,b.z,0,0,0,0,1);let Pe=new a.Matrix4().makeTranslation(y.x,y.y,y.z);I.matrix4=I.matrix4.multiplyMatrices(Pe,I.matrix4),I.matrix=I.matrix4.matrix3FromTopLeft(),I.origin=new a.Vector3(0,0,0),I.unit=new a.Vector3(1,1,1)}x.modelData=[{cryst:I}],m=m.splice(6,D);for(var k=x[x.length-1].length,B=k+m.length,J=k;J<B;++J){var X={};X.serial=J;var ae=m[J-k],He=ae.replace(/^\s+/,"").replace(/\s+/g," ").split(" ");X.elem=o.anumToSymbol[He[0]],X.x=parseFloat(He[2])*l,X.y=parseFloat(He[3])*l,X.z=parseFloat(He[4])*l,X.hetflag=!0,X.bonds=[],X.bondOrder=[],X.properties={},x[x.length-1].push(X)}if(w)for(let Pe=0;Pe<x.length;Pe++)(0,s.assignBonds)(x[Pe],h);return x}}),"./src/parsers/GRO.ts":((r,e,t)=>{t.r(e),t.d(e,{GRO:()=>o});var a=t("./src/parsers/utils/assignPDBBonds.ts"),s=t("./src/parsers/utils/atomNameToElem.ts");function o(f,u){const h=[],x=f.split(/\r?\n|\r/);for(;x.length>0;){const m=parseInt(x[1]);if(x.length<3||isNaN(m)||m<=0||x.length<m+3)break;const w=[];h.push(w);let A=2;const D=w.length,I=D+m;for(let y=D;y<I;y++){const l=x[A++],c={};c.serial=y,c.atom=l.slice(10,15).trim(),c.elem=(0,s.atomNameToElem)(c.atom,!0),c.x=10*parseFloat(l.slice(20,28)),c.y=10*parseFloat(l.slice(28,36)),c.z=10*parseFloat(l.slice(36,44)),c.resi=parseInt(l.slice(0,5)),c.resn=l.slice(5,10).trim(),c.bonds=[],c.bondOrder=[],c.properties={},l.length>44&&(c.dx=10*parseFloat(l.slice(44,52)),c.dy=10*parseFloat(l.slice(52,60)),c.dz=10*parseFloat(l.slice(60,68))),w[y]=c}if(x.length<=A+3){const y=x[A++].trim().split(/\s+/);if(y.length===3){for(let l=0;l<3;l++)y[l]=(parseFloat(y[l])*10).toString();h.box=y}}x.splice(0,++A)}for(let m=0;m<h.length;m++)(0,a.assignPDBBonds)(h[m],u);return h}}),"./src/parsers/LAMMPSTRJ.ts":((r,e,t)=>{t.r(e),t.d(e,{LAMMPSTRJ:()=>o});var a=t("./src/parsers/utils/assignBonds.ts");const s={id:"serial",type:"atom",element:"elem",q:"charge",radius:"radius",x:"x",xu:"x",xs:"x",xsu:"x",y:"y",yu:"y",ys:"y",ysu:"y",z:"z",zu:"z",zs:"z",zsu:"z"};function o(f,u){const h=[],x=f.split(/\r?\n|\r/);let m=0,w=0,A=0;for(;A<x.length-9;){for(var D=A;D<x.length;D++)if(x[D].match(/ITEM: NUMBER OF ATOMS/)&&(w=parseInt(x[D+1])),x[D].match(/ITEM: ATOMS/)){m=D+1;break}const I=x[m-1].replace("ITEM: ATOMS ","").split(" ");h.push([]);for(let y=m;y<m+w;y++){const l={},c={},L=x[y].split(" ");for(let R=0;R<L.length;R++){const F=s[I[R]];F!==void 0&&(F==="serial"?l[F]=parseInt(L[R]):F==="x"||F==="y"||F==="z"?l[F]=parseFloat(L[R]):F==="charge"||F==="radius"?c[F]=parseFloat(L[R]):l[F]=L[R]),l.properties=c,l.bonds=[],l.bondOrder=[]}h[h.length-1][y-m]=l}A=m+w-1}if(u.assignBonds)for(let I=0;I<h.length;I++)(0,a.assignBonds)(h[I],u);return h}}),"./src/parsers/MMTF.ts":((r,e,t)=>{t.r(e),t.d(e,{MMTFparser:()=>w});var a=t("./src/utilities.ts"),s=t("./src/WebGL/index.ts"),o=t("./src/parsers/utils/computeSecondaryStructure.ts"),f=t("./src/parsers/utils/processSymmetries.ts"),u=t("./src/vendor/mmtf.js"),h=function(A){return String.fromCharCode.apply(null,A).replace(/\0/g,"")},x=function(A){return A==0||A==2||A==4?"h":A==3?"s":"c"};let m=new Set(["D-SACCHARIDE","D-SACCHARIDE 1,4 AND 1,4 LINKING","D-SACCHARIDE 1,4 AND 1,6 LINKING","L-SACCHARIDE","L-SACCHARIDE 1,4 AND 1,4 LINKING","L-SACCHARIDE 1,4 AND 1,6 LINKING","NON-POLYMER","OTHER","PEPTIDE-LIKE","SACCHARIDE"]);function w(A,D){var I=!D.keepH,y=D.altLoc?D.altLoc:"A",l=!!D.noSecondaryStructure,c=!D.noComputeSecondaryStructure,L=!D.doAssembly,R=D.assemblyIndex?D.assemblyIndex:0;typeof A=="string"?A=(0,a.base64ToArray)(A):A=new Uint8Array(A);var F=u.decode(A),$=[[]],b=$.modelData=[],k=0,B=0,J=0,X=F.secStructList,ae=F.bFactorList,He=F.altLocList,Pe=F.occupancyList,ue=F.bondAtomList,Oe=F.bondOrderList,we=F.numModels;if(we==0)return $;D.multimodel||(we=1);var Ze,it,lt,Vt,_e,pr,_s=[];if(!L&&F.bioAssemblyList&&F.bioAssemblyList.length>0){var Ei=F.bioAssemblyList[R].transformList;for(Ze=0,pr=Ei.length;Ze<pr;Ze++){var Bl=new s.Matrix4(Ei[Ze].matrix);Bl.transpose(),_s.push(Bl)}}var Wl=null;if(F.unitCell){var Ep=F.unitCell;Wl={a:Ep[0],b:Ep[1],c:Ep[2],alpha:Ep[3],beta:Ep[4],gamma:Ep[5]}}let Lp=[];F.entityList.forEach(d0=>{d0.chainIndexList.forEach(Vl=>{Lp[Vl]=d0.type=="polymer"})});var Op=0;for(_e=0;_e<we;_e++){var R0=F.chainsPerModel[_e],N0=$[$.length-1],Qp=[];for(b.push({symmetries:_s,cryst:Wl}),Ze=0;Ze<R0;++Ze){var O0=F.groupsPerChain[k],zp=h(F.chainIdList.subarray(k*4,k*4+4));F.chainNameList&&(zp=h(F.chainNameList.subarray(k*4,k*4+4)));var M0=B,W0="";for(it=0;it<O0;++it){var im=F.groupList[F.groupTypeList[B]],F0=im.atomNameList.length,fm=0,cm=!1,Ap=!1;if(X){fm=X[B];var Io=x(fm);(B==0||Io!=W0)&&(cm=!0),W0=Io;var p0=B+1;(p0>=X.length||x(X[p0]!=Io))&&(Ap=!0)}var a0=F.groupIdList[B],rm=im.groupName;let d0=im.chemCompType;var X0=J;let Vl=m.has(d0)||!Lp[k];for(lt=0;lt<F0;++lt){var Nl=im.elementList[lt];if(I&&Nl=="H"){J+=1;continue}var Gl="";ae&&(Gl=ae[J]);var Mp="";He&&He[J]&&(Mp=String.fromCharCode(He[J]));var _0="";if(Pe&&(_0=Pe[J]),Mp!=""&&Mp!=y&&y!="*"){J+=1;continue}var v0=F.atomIdList[J],z0=im.atomNameList[lt],sm=0;im.atomChargeList&&(sm=im.atomChargeList[lt]);var Uo=F.xCoordList[J],u0=F.yCoordList[J],x0=F.zCoordList[J];Qp[J]=N0.length,N0.push({resn:rm,x:Uo,y:u0,z:x0,elem:Nl,hetflag:Vl,chain:zp,resi:a0,icode:Mp,rescode:a0+(Mp!=" "?"^"+Mp:""),serial:v0,altLoc:Mp,index:J,atom:z0,bonds:[],ss:x(fm),ssbegin:cm,ssend:Ap,bondOrder:[],properties:{charge:sm,occupancy:_0},b:Gl}),J+=1}var Xl=im.bondAtomList;for(lt=0,Vt=im.bondOrderList.length;lt<Vt;++lt){var Bp=X0+Xl[lt*2],L0=X0+Xl[lt*2+1],kl=im.bondOrderList[lt],Np=Qp[Bp],V0=Qp[L0],Ke=N0[Np],g0=N0[V0];Ke&&g0&&(Ke.bonds.push(V0),Ke.bondOrder.push(kl),g0.bonds.push(Np),g0.bondOrder.push(kl))}B+=1}for(B=M0,it=0;it<O0;++it)B+=1;k+=1}if(ue)for(let d0=Op,Vl=ue.length;d0<Vl;d0+=2){let jp=ue[d0],K0=ue[d0+1],Pm=Oe?Oe[d0/2]:1;if(jp>=J){Op=d0;break}let Cm=Qp[jp],Fm=Qp[K0],ev=N0[Cm],h1=N0[Fm];ev&&h1&&(ev.bonds.push(Fm),ev.bondOrder.push(Pm),h1.bonds.push(Cm),h1.bondOrder.push(Pm))}D.multimodel&&(D.onemol||$.push([]))}if(!L)for(let d0=0;d0<$.length;d0++)(0,f.processSymmetries)(b[d0].symmetries,$[d0],D,b[d0].cryst);return c&&!l&&(0,o.computeSecondaryStructure)($,D.hbondCutoff),$}}),"./src/parsers/MOL2.ts":((r,e,t)=>{t.r(e),t.d(e,{MOL2:()=>s});let a={"C.1":"C",C1:"C","C.2":"C",C2:"C","C.3":"C",C3:"C","C.ar":"C",Car:"C","C.cat":"C",Ccat:"C","H.spc":"H",Hspc:"H","H.t3p":"H",Ht3p:"H","N.1":"N",N1:"N","N.2":"N",N2:"N","N.3":"N",N3:"N","N.4":"N",N4:"N","N.am":"N",Nam:"N","N.ar":"N",Nar:"N","N.p13":"N",Np13:"N","O.2":"O",O2:"O","O.3":"O",O3:"O","O.co2":"O",Oco2:"O","O.spc":"O",Ospc:"O","O.t3p":"O",Ot3p:"O","P.3":"P",P3:"P","S.2":"S",S2:"S","S.3":"S",S3:"S","S.o":"S",So:"S","S.o2":"S",So2:"S"};function s(o,f){var u=[[]],h=!1;typeof f.keepH<"u"&&(h=!f.keepH);var x=o.search(/@<TRIPOS>MOLECULE/),m=o.search(/@<TRIPOS>ATOM/);if(x==-1||m==-1)return u;for(var w=o.substring(x).split(/\r?\n|\r/);w.length>0;){var A=[],D=w[2].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),I=parseInt(D[0]),y=0;D.length>1&&(y=parseInt(D[1]));var l=4,c;for(c=3;c<w.length;c++)if(w[c]=="@<TRIPOS>ATOM"){l=c+1;break}var L=u[u.length-1].length,R=L+I,F;for(c=L;c<R;c++){F=w[l++],D=F.replace(/^\s+/,"").replace(/\s+/g," ").split(" ");var $={},b=D[5];if(a[b]!==void 0?b=a[b]:(b=b.split(".")[0],b=b[0].toUpperCase()+b.substring(1).toLowerCase()),$.atom=D[1],$.elem=b,!($.elem=="H"&&h)){var k=u[u.length-1].length,B=parseInt(D[0]);$.serial=B,$.x=parseFloat(D[2]),$.y=parseFloat(D[3]),$.z=parseFloat(D[4]),$.atom=D[5];var J=parseFloat(D[8]);$.index=k,$.bonds=[],$.bondOrder=[],$.properties={charge:J,partialCharge:J},A[B]=k,u[u.length-1].push($)}}for(var X=!1;l<w.length;)if(w[l++]=="@<TRIPOS>BOND"){X=!0;break}if(X&&y)for(c=0;c<y;c++){F=w[l++],D=F.replace(/^\s+/,"").replace(/\s+/g," ").split(" ");var ae=parseInt(D[1]),He=u[u.length-1][A[ae]],Pe=parseInt(D[2]),ue=u[u.length-1][A[Pe]],Oe=parseInt(D[3]);isNaN(Oe)&&(Oe=1),He!==void 0&&ue!==void 0&&(He.bonds.push(A[Pe]),He.bondOrder.push(Oe),ue.bonds.push(A[ae]),ue.bondOrder.push(Oe))}if(f.multimodel){f.onemol||u.push([]),w.splice(0,l),o=w.join(`
`);continue}else break}return u}}),"./src/parsers/PDB.ts":((r,e,t)=>{t.r(e),t.d(e,{PDB:()=>s});var a=t("./src/parsers/utils/getSinglePDB.ts");function s(o,f){f=f||{};var u=[],h={};u.modelData=[];for(var x=o.split(/\r?\n|\r/);x.length>0;){var m=(0,a.getSinglePDB)(x,f,h),w=m[0],A=m[1];if(x=m[2],w.length!=0){if(f.multimodel&&f.onemol&&u.length>0)for(var D=u[0].length,I=0;I<w.length;I++){var y=w[I];y.index=I;for(var l=0;l<y.bonds.length;l++)y.bonds[l]+=D;u[0].push(y)}else u.modelData.push(A),u.push(w);if(!f.multimodel)break}}return u}}),"./src/parsers/PQR.ts":((r,e,t)=>{t.r(e),t.d(e,{PQR:()=>o});var a=t("./src/parsers/utils/assignPDBBonds.ts"),s=t("./src/parsers/utils/computeSecondaryStructure.ts");function o(f,u){var h=[[]],x=!u.noSecondaryStructure;h.modelData=[{symmetries:[]}];var m=[],w=f.split(/\r?\n|\r/),A;for(let X=0;X<w.length;X++){A=w[X].replace(/^\s*/,"");var D=A.substring(0,6);if(D.indexOf("END")==0)if(u.multimodel){u.onemol||h.push([]);continue}else break;else if(D=="ATOM  "||D=="HETATM"){var I;let ae=parseInt(A.substring(6,11)),He=A.substring(12,16).replace(/ /g,""),Pe=A.substring(17,20).trim(),ue=A.substring(21,22),Oe=parseInt(A.substring(22,26));var y=A.substring(30).trim().split(/\s+/),l=parseFloat(y[0]),c=parseFloat(y[1]),L=parseFloat(y[2]),R=parseFloat(y[3]),F=parseFloat(y[4]),$=He[0];He.length>1&&He[1].toUpperCase()!=He[1]&&($=He.substring(0,2)),A[0]=="H"?I=!0:I=!1,m[ae]=h[h.length-1].length,h[h.length-1].push({resn:Pe,x:l,y:c,z:L,elem:$,hetflag:I,chain:ue,resi:Oe,serial:ae,atom:He,bonds:[],ss:"c",bondOrder:[],properties:{charge:R,partialCharge:R,radius:F},pdbline:A})}else if(D=="CONECT"){var b=parseInt(A.substring(6,11)),k=h[h.length-1][m[b]];for(let ae=0;ae<4;ae++){var B=parseInt(A.substring([11,16,21,26][ae],[11,16,21,26][ae]+5)),J=h[h.length-1][m[B]];k!==void 0&&J!==void 0&&(k.bonds.push(m[B]),k.bondOrder.push(1))}}}for(let X=0;X<h.length;X++)(0,a.assignPDBBonds)(h[X],u),x&&(0,s.computeSecondaryStructure)(h[X],u.hbondCutoff);return h}}),"./src/parsers/PRMTOP.ts":((r,e,t)=>{t.r(e),t.d(e,{PRMTOP:()=>a});function a(s){var o=[],f,u=0,h=s.split(/\r?\n|\r/);if(h.length>0&&h[0].includes("VERSION")){var x=h.filter(function(L){return L.includes("POINTERS")||L.includes("ATOM_NAME")||L.includes("CHARGE")||L.includes("RADII")||L.includes("BONDS_INC_HYDROGEN")||L.includes("BONDS_WITHOUT_HYDROGEN")||L.includes("RESIDUE_LABEL")||L.includes("RESIDUE_POINTER")}),m=y("POINTERS");if(m==-1)return[];var w=l(m),A=parseInt(h[m+1].slice(0,w[1]));let c=parseInt(h[m+2].slice(w[1],w[0]+w[1]));if(isNaN(A)||A<=0)return[];if(m=y("ATOM_NAME"),m==-1)return[];w=l(m);var D=w[0];for(let L=0;L<A/w[0];L++){L==parseInt(A/w[0])&&(D=A%w[0]);for(let R=0;R<D;R++){let F={},$={charge:"",radii:""};F.serial=u,F.x=0,F.y=0,F.z=0,F.atom=h[m+1].slice(w[1]*R,w[1]*(R+1)).trim(),F.elem=h[m+1].slice(w[1]*R,w[1]*R+1).trim(),F.properties=$,F.bonds=[],F.bondOrder=[],F.index=o.length,o.push(F),u++}m++}if(m=y("CHARGE"),m!=-1){w=l(m),u=0,D=w[0];for(let L=0;L<A/w[0];L++){L==parseInt(A/w[0])&&(D=A%w[0]);for(let R=0;R<D;R++)o[u].properties.charge=parseFloat(h[m+1].slice(w[1]*R,w[1]*(R+1))),u++;m++}}m=y("RESIDUE_POINTER");var I=[];if(m!=-1){w=l(m),D=w[0],m+=1;for(let L=0;L<c/w[0];L++){L==parseInt(c/w[0])&&(D=c%w[0]);for(let R=0;R<D;R++)I.push(parseInt(h[m].slice(w[1]*R,w[1]*(R+1))));m++}if(m=y("RESIDUE_LABEL"),m!=-1){let L=[];w=l(m),D=w[0],m+=1;for(let b=0;b<c/w[0];b++){b==parseInt(c/w[0])&&(D=c%w[0]);for(let k=0;k<D;k++)L.push(h[m].slice(w[1]*k,w[1]*(k+1)).trim());m++}let R=0,F=0,$="";I.push(o.length+1);for(let b=0;b<o.length;b++)b+1>=I[R]&&($=L[R],R+=1,F+=1),o[b].resi=F,o[b].resn=$}}if(m=y("RADII"),m!=-1){w=l(m),u=0,D=w[0];for(let L=0;L<A/w[0];L++){L==parseInt(A/w[0])&&(D=A%w[0]);for(let R=0;R<D;R++)o[u].properties.radii=parseFloat(h[m+1].slice(w[1]*R,w[1]*(R+1))),u++;m++}}if(m=y("BONDS_WITHOUT_HYDROGEN"),m!=-1)for(w=l(m),u=0,D=w[0],m=m+1;!h[m].match(/^%FLAG/);){h[m+1].match(/^%FLAG/)&&(D=A%w[0]);for(let L=0;L<D;L++)u%3==0?f=parseInt(h[m].slice(w[1]*L,w[1]*(L+1))/3):u%3==1&&(o[f].bonds.push(parseInt(h[m].slice(w[1]*L,w[1]*(L+1))/3)),o[f].bondOrder.push(1)),u++;m++}if(m=y("BONDS_INC_HYDROGEN"),m!=-1)for(w=l(m),u=0,D=w[0],m=m+1;!h[m].match(/^%FLAG/);){h[m+1].match(/^%FLAG/)&&(D=A%w[0]);for(let L=0;L<D;L++)u%3==0?f=parseInt(h[m].slice(w[1]*L,w[1]*(L+1))/3):u%3==1&&(o[f].bonds.push(parseInt(h[m].slice(w[1]*L,w[1]*(L+1))/3)),o[f].bonds.push(1)),u++;m++}}else return[];function y(c){var L=h.indexOf(x.filter(function(R){return R.includes(c)})[0]);if(Number.isInteger(L)&&L>0){for(;!h[L].includes("FORMAT");)L++;return L}else return-1}function l(c){var L=h[c].match(/\((\d*)\S*/),R=h[c].match(/[a-zA-Z](\d*)\)\s*/);return R==null&&(R=h[c].match(/[a-zA-Z](\d*)\.\d*\)\s*/)),[parseInt(L[1]),parseInt(R[1])]}return[o]}}),"./src/parsers/SDF.ts":((r,e,t)=>{t.r(e),t.d(e,{SDF:()=>o});var a=function(f,u){var h=[[]],x=!1;for(typeof u.keepH<"u"&&(x=!u.keepH);f.length>0&&!(f.length<4);){var m=parseInt(f[3].substring(0,3));if(isNaN(m)||m<=0)break;var w=parseInt(f[3].substring(3,6)),A=4;if(f.length<4+m+w)break;var D=[],I=h[h.length-1].length,y=I+m,l,c;for(l=I;l<y;l++,A++){c=f[A];var L={},R=c.substring(31,34).replace(/ /g,"");L.atom=L.elem=R[0].toUpperCase()+R.substring(1).toLowerCase(),(L.elem!=="H"||!x)&&(L.serial=l,D[l]=h[h.length-1].length,L.x=parseFloat(c.substring(0,10)),L.y=parseFloat(c.substring(10,20)),L.z=parseFloat(c.substring(20,30)),L.hetflag=!0,L.bonds=[],L.bondOrder=[],L.properties={},L.index=h[h.length-1].length,h[h.length-1].push(L))}for(l=0;l<w;l++,A++){c=f[A];var F=D[parseInt(c.substring(0,3))-1+I],$=D[parseInt(c.substring(3,6))-1+I],b=parseFloat(c.substring(6));typeof F<"u"&&typeof $<"u"&&(h[h.length-1][F].bonds.push($),h[h.length-1][F].bondOrder.push(b),h[h.length-1][$].bonds.push(F),h[h.length-1][$].bondOrder.push(b))}if(u.multimodel){for(u.onemol||h.push([]);f[A]!=="$$$$"&&A<f.length;)A++;f.splice(0,++A)}else break}return h},s=function(f,u){var h=[[]],x=!1;for(typeof u.keepH<"u"&&(x=!u.keepH);f.length>0&&!(f.length<8||!f[4].startsWith("M  V30 BEGIN CTAB")||!f[5].startsWith("M  V30 COUNTS")||f[5].length<14);){var m=f[5].substring(13).match(/\S+/g);if(m.length<2)break;var w=parseInt(m[0]);if(isNaN(w)||w<=0)break;var A=parseInt(m[1]),D=7;if(f.length<8+w+A)break;var I=[],y=h[h.length-1].length,l=y+w,c,L;for(c=y;c<l;c++,D++){L=f[D];var R=L.substring(6).match(/\S+/g);if(R.length>4){var F={},$=R[1].replace(/ /g,"");F.atom=F.elem=$[0].toUpperCase()+$.substring(1).toLowerCase(),(F.elem!=="H"||!x)&&(F.serial=c,I[c]=h[h.length-1].length,F.x=parseFloat(R[2]),F.y=parseFloat(R[3]),F.z=parseFloat(R[4]),F.hetflag=!0,F.bonds=[],F.bondOrder=[],F.properties={},F.index=h[h.length-1].length,h[h.length-1].push(F))}}if(f[D]==="M  V30 END ATOM")D++;else break;if(A!==0&&f[D]==="M  V30 BEGIN BOND")D++;else break;for(c=0;c<A;c++,D++){L=f[D];var b=L.substring(6).match(/\S+/g);if(b.length>3){var k=I[parseInt(b[2])-1+y],B=I[parseInt(b[3])-1+y],J=parseFloat(b[1]);typeof k<"u"&&typeof B<"u"&&(h[h.length-1][k].bonds.push(B),h[h.length-1][k].bondOrder.push(J),h[h.length-1][B].bonds.push(k),h[h.length-1][B].bondOrder.push(J))}}if(u.multimodel){for(u.onemol||h.push([]);f[D]!=="$$$$"&&D<f.length;)D++;f.splice(0,++D)}else break}return h};function o(f,u){var h="V2000",x=f.split(/\r?\n|\r/);return x.length>3&&x[3].length>38&&(h=x[3].substring(34,39)),h==="V2000"?a(x,u):h==="V3000"?s(x,u):[[""]]}}),"./src/parsers/VASP.ts":((r,e,t)=>{t.r(e),t.d(e,{VASP:()=>o});var a=t("./src/WebGL/index.ts"),s=t("./src/parsers/utils/assignBonds.ts");function o(f,u={}){var h=[[]],x={};const m=u.assignBonds===void 0?!0:u.assignBonds;var w=f.replace(/^\s+/,"").split(/\r?\n/);if(w.length<3)return h;if(w[1].match(/\d+/))x.length=parseFloat(w[1]);else return console.log("Warning: second line of the vasp structure file must be a number"),h;if(x.length<0)return console.log("Warning: Vasp implementation for negative lattice lengths is not yet available"),h;x.xVec=new Float32Array(w[2].replace(/^\s+/,"").split(/\s+/)),x.yVec=new Float32Array(w[3].replace(/^\s+/,"").split(/\s+/)),x.zVec=new Float32Array(w[4].replace(/^\s+/,"").split(/\s+/));var A=new a.Matrix3(x.xVec[0],x.xVec[1],x.xVec[2],x.yVec[0],x.yVec[1],x.yVec[2],x.zVec[0],x.zVec[1],x.zVec[2]);A.multiplyScalar(x.length),h.modelData=[{symmetries:[],cryst:{matrix:A}}];var D=w[5].trim().split(/\s+/),I=new Int16Array(w[6].trim().split(/\s+/)),y=w[7].trim(),l=!1;if(y.match(/S/)&&(l=!0,y=w[8].trim()),y.toLowerCase()[0]=="c")y="cartesian";else if(y.toLowerCase()[0]=="d")y="direct";else return console.log("Warning: Unknown vasp mode in POSCAR file: mode must be either C(artesian) or D(irect)"),h;if(D.length!=I.length)return console.log("Warning: declaration of atomary species wrong:"),console.log(D),console.log(I),h;l?w.splice(0,9):w.splice(0,8);for(var c=0,L=0,R=D.length;L<R;L++){for(var F=D[L],$=0,b=I[L];$<b;$++){var k=new Float32Array(w[c+$].trim().split(/\s+/)),B={};B.elem=F,y=="cartesian"?(B.x=x.length*k[0],B.y=x.length*k[1],B.z=x.length*k[2]):(B.x=x.length*(k[0]*x.xVec[0]+k[1]*x.yVec[0]+k[2]*x.zVec[0]),B.y=x.length*(k[0]*x.xVec[1]+k[1]*x.yVec[1]+k[2]*x.zVec[1]),B.z=x.length*(k[0]*x.xVec[2]+k[1]*x.yVec[2]+k[2]*x.zVec[2])),B.bonds=[],B.bondOrder=[],h[0].push(B)}c+=I[L]}if(m)for(let J=0;J<h.length;J++)(0,s.assignBonds)(h[J],u);return h}}),"./src/parsers/XYZ.ts":((r,e,t)=>{t.r(e),t.d(e,{XYZ:()=>o});var a=t("./src/WebGL/index.ts"),s=t("./src/parsers/utils/assignBonds.ts");function o(f,u){u=u||{};for(var h=[[]],x=u.assignBonds===void 0?!0:u.assignBonds,m=f.trimStart().split(/\r?\n|\r/);m.length>0&&!(m.length<3);){var w=parseInt(m[0]);if(isNaN(w)||w<=0||m.length<w+2)break;var A=/Lattice\s*=\s*["\{\}]([^"\{\}]+)["\{\}]\s*/gi,D=A.exec(m[1]);if(D!=null&&D.length>1){var I=new Float32Array(D[1].split(/\s+/)),y=new a.Matrix3(I[0],I[3],I[6],I[1],I[4],I[7],I[2],I[5],I[8]);h.modelData=[{cryst:{matrix:y}}]}for(var l=2,c=h[h.length-1].length,L=c+w,R=c;R<L;R++){var F=m[l++],$=F.trim().split(/\s+/),b={};b.serial=R;var k=$[0];b.atom=b.elem=k[0].toUpperCase()+k.substring(1,2).toLowerCase(),b.x=parseFloat($[1]),b.y=parseFloat($[2]),b.z=parseFloat($[3]),b.hetflag=!0,b.bonds=[],b.bondOrder=[],b.properties={},h[h.length-1][R]=b,$.length>=7&&(b.dx=parseFloat($[4]),b.dy=parseFloat($[5]),b.dz=parseFloat($[6]))}if(u.multimodel)h.push([]),m.splice(0,l);else break}if(x)for(let J=0;J<h.length;J++)(0,s.assignBonds)(h[J],u);if(u.onemol){var B=h;h=[],h.push(B[0]);for(let J=1;J<B.length;J++){let X=h[0].length;for(let ae=0;ae<B[J].length;ae++){let He=B[J][ae];for(let Pe=0;Pe<He.bonds.length;Pe++)He.bonds[Pe]=He.bonds[Pe]+X;He.index=h[0].length,He.serial=h[0].length,h[0].push(He)}}}return h}}),"./src/parsers/cifutils/category.ts":((r,e,t)=>{t.r(e),t.d(e,{Category:()=>s});var a=t("./src/parsers/cifutils/decoder.ts");function s(o){const f=Object.create(null),u=Object.create(null);for(const h of o.columns)f[h.name]=h;return{rowCount:o.rowCount,name:o.name.substring(1),fieldNames:o.columns.map(h=>h.name),getField(h){const x=f[h];if(x)return u[h]||(u[h]=(0,a.decode)(x.data)),u[h]}}}}),"./src/parsers/cifutils/decoder.ts":((r,e,t)=>{t.r(e),t.d(e,{decode:()=>f});var a=t("./src/parsers/cifutils/encoding.ts");const s=new Uint16Array(new Uint8Array([18,52]).buffer)[0]===13330;function o(X,ae){const He=new ArrayBuffer(X.length),Pe=new Uint8Array(He);for(let ue=0,Oe=X.length;ue<Oe;ue+=ae)for(let we=0;we<ae;we++)Pe[ue+ae-we-1]=X[ue+we];return He}function f(X){let ae=X.data;for(let He=X.encoding.length-1;He>=0;He--)ae=u(ae,X.encoding[He]);return ae}function u(X,ae){switch(ae.kind){case"ByteArray":switch(ae.type){case a.Encoding.IntDataType.Uint8:return X;case a.Encoding.IntDataType.Int8:return m(X);case a.Encoding.IntDataType.Int16:return A(X);case a.Encoding.IntDataType.Uint16:return D(X);case a.Encoding.IntDataType.Int32:return I(X);case a.Encoding.IntDataType.Uint32:return y(X);case a.Encoding.FloatDataType.Float32:return l(X);case a.Encoding.FloatDataType.Float64:return c(X);default:throw new Error("unreachable")}case"FixedPoint":return L(X,ae);case"IntervalQuantization":return R(X,ae);case"RunLength":return F(X,ae);case"Delta":return $(X,ae);case"IntegerPacking":return B(X,ae);case"StringArray":return J(X,ae)}}function h(X,ae){switch(X){case a.Encoding.IntDataType.Int8:return new Int8Array(ae);case a.Encoding.IntDataType.Int16:return new Int16Array(ae);case a.Encoding.IntDataType.Int32:return new Int32Array(ae);case a.Encoding.IntDataType.Uint8:return new Uint8Array(ae);case a.Encoding.IntDataType.Uint16:return new Uint16Array(ae);case a.Encoding.IntDataType.Uint32:return new Uint32Array(ae);default:return new Int32Array(ae)}}function x(X,ae){switch(X){case a.Encoding.FloatDataType.Float32:return new Float32Array(ae);case a.Encoding.FloatDataType.Float64:return new Float64Array(ae);default:return new Float64Array(ae)}}function m(X){return new Int8Array(X.buffer,X.byteOffset)}function w(X,ae,He){return(X.byteOffset!=0||X.byteLength!=X.buffer.byteLength)&&(X=new Uint8Array(X)),s?new He(X.buffer):new He(o(X,ae))}function A(X){return w(X,2,Int16Array)}function D(X){return w(X,2,Uint16Array)}function I(X){return w(X,4,Int32Array)}function y(X){return w(X,4,Uint32Array)}function l(X){return w(X,4,Float32Array)}function c(X){return w(X,8,Float64Array)}function L(X,ae){const He=X.length,Pe=x(ae.srcType,He),ue=1/ae.factor;for(let Oe=0;Oe<He;Oe++)Pe[Oe]=ue*X[Oe];return Pe}function R(X,ae){const He=X.length,Pe=x(ae.srcType,He),ue=(ae.max-ae.min)/(ae.numSteps-1),Oe=ae.min;for(let we=0;we<He;we++)Pe[we]=Oe+ue*X[we];return Pe}function F(X,ae){const He=h(ae.srcType,ae.srcSize);let Pe=0;for(let ue=0,Oe=X.length;ue<Oe;ue+=2){const we=X[ue],Ze=X[ue+1];for(let it=0;it<Ze;++it)He[Pe++]=we}return He}function $(X,ae){const He=X.length,Pe=h(ae.srcType,He);if(!He)return X;Pe[0]=X[0]+(ae.origin|0);for(let ue=1;ue<He;++ue)Pe[ue]=X[ue]+Pe[ue-1];return Pe}function b(X,ae){const He=ae.byteCount===1?127:32767,Pe=-He-1,ue=X.length,Oe=new Int32Array(ae.srcSize);let we=0,Ze=0;for(;we<ue;){let it=0,lt=X[we];for(;lt===He||lt===Pe;)it+=lt,we++,lt=X[we];it+=lt,Oe[Ze]=it,we++,Ze++}return Oe}function k(X,ae){const He=ae.byteCount===1?255:65535,Pe=X.length,ue=new Int32Array(ae.srcSize);let Oe=0,we=0;for(;Oe<Pe;){let Ze=0,it=X[Oe];for(;it===He;)Ze+=it,Oe++,it=X[Oe];Ze+=it,ue[we]=Ze,Oe++,we++}return ue}function B(X,ae){return X.length===ae.srcSize?X:ae.isUnsigned?k(X,ae):b(X,ae)}function J(X,ae){const He=f({encoding:ae.offsetEncoding,data:ae.offsets}),Pe=f({encoding:ae.dataEncoding,data:X}),ue=ae.stringData,Oe=new Array(He.length);Oe[0]="";for(let it=1,lt=He.length;it<lt;it++)Oe[it]=ue.substring(He[it-1],He[it]);let we=0;const Ze=new Array(Pe.length);for(let it=0,lt=Pe.length;it<lt;it++)Ze[we++]=Oe[Pe[it]+1];return Ze}}),"./src/parsers/cifutils/encoding.ts":((r,e,t)=>{t.r(e),t.d(e,{Encoding:()=>s,VERSION:()=>a});const a="0.3.0";var s;(function(o){(function(h){h[h.Int8=1]="Int8",h[h.Int16=2]="Int16",h[h.Int32=3]="Int32",h[h.Uint8=4]="Uint8",h[h.Uint16=5]="Uint16",h[h.Uint32=6]="Uint32"})(o.IntDataType||(o.IntDataType={})),(function(h){h[h.Float32=32]="Float32",h[h.Float64=33]="Float64"})(o.FloatDataType||(o.FloatDataType={}));function f(h){let x;return h instanceof Int8Array?x=o.IntDataType.Int8:h instanceof Int16Array?x=o.IntDataType.Int16:h instanceof Int32Array?x=o.IntDataType.Int32:h instanceof Uint8Array?x=o.IntDataType.Uint8:h instanceof Uint16Array?x=o.IntDataType.Uint16:h instanceof Uint32Array?x=o.IntDataType.Uint32:h instanceof Float32Array?x=o.FloatDataType.Float32:h instanceof Float64Array?x=o.FloatDataType.Float64:x=o.IntDataType.Int32,x}o.getDataType=f;function u(h){if(h instanceof Int8Array||h instanceof Int16Array||h instanceof Int32Array)return!0;for(let x=0,m=h.length;x<m;x++)if(x<0)return!1;return!0}o.isSignedIntegerDataType=u})(s||(s={}))}),"./src/parsers/index.ts":((r,e,t)=>{t.r(e),t.d(e,{Parsers:()=>L,bondLength:()=>c.bondLength,setBondLength:()=>c.setBondLength});var a=t("./src/parsers/VASP.ts"),s=t("./src/parsers/CUBE.ts"),o=t("./src/parsers/XYZ.ts"),f=t("./src/parsers/SDF.ts"),u=t("./src/parsers/CDJSON.ts"),h=t("./src/parsers/CIF.ts"),x=t("./src/parsers/MOL2.ts"),m=t("./src/parsers/PDB.ts"),w=t("./src/parsers/PQR.ts"),A=t("./src/parsers/MMTF.ts"),D=t("./src/parsers/PRMTOP.ts"),I=t("./src/parsers/GRO.ts"),y=t("./src/parsers/LAMMPSTRJ.ts"),l=t("./src/parsers/BCIF.ts"),c=t("./src/parsers/utils/bondLength.ts");const L={vasp:a.VASP,VASP:a.VASP,cube:s.CUBE,CUBE:s.CUBE,xyz:o.XYZ,XYZ:o.XYZ,sdf:f.SDF,SDF:f.SDF,json:u.CDJSON,cdjson:u.CDJSON,CDJSON:u.CDJSON,mcif:h.CIF,cif:h.CIF,CIF:h.CIF,mol2:x.MOL2,MOL2:x.MOL2,pdb:m.PDB,PDB:m.PDB,pdbqt:m.PDB,PDBQT:m.PDB,pqr:w.PQR,PQR:w.PQR,mmtf:A.MMTFparser,MMTF:A.MMTFparser,prmtop:D.PRMTOP,PRMTOP:D.PRMTOP,gro:I.GRO,GRO:I.GRO,lammpstrj:y.LAMMPSTRJ,LAMMPSTRJ:y.LAMMPSTRJ,bcif:l.BCIF,BCIF:l.BCIF}}),"./src/parsers/utils/anumToSymbol.ts":((r,e,t)=>{t.r(e),t.d(e,{anumToSymbol:()=>a});const a={1:"H",2:"He",3:"Li",4:"Be",5:"B",6:"C",7:"N",8:"O",9:"F",10:"Ne",11:"Na",12:"Mg",13:"Al",14:"Si",15:"P",16:"S",17:"Cl",18:"Ar",19:"K",20:"Ca",21:"Sc",22:"Ti",23:"V",24:"Cr",25:"Mn",26:"Fe",27:"Co",28:"Ni",29:"Cu",30:"Zn",31:"Ga",32:"Ge",33:"As",34:"Se",35:"Br",36:"Kr",37:"Rb",38:"Sr",39:"Y",40:"Zr",41:"Nb",42:"Mo",43:"Tc",44:"Ru",45:"Rh",46:"Pd",47:"Ag",48:"Cd",49:"In",50:"Sn",51:"Sb",52:"Te",53:"I",54:"Xe",55:"Cs",56:"Ba",71:"Lu",72:"Hf",73:"Ta",74:"W",75:"Re",76:"Os",77:"Ir",78:"Pt",79:"Au",80:"Hg",81:"Tl",82:"Pb",83:"Bi",84:"Po",85:"At",86:"Rn",87:"Fr",88:"Ra",104:"Rf",105:"Db",106:"Sg",107:"Bh",108:"Hs",109:"Mt",110:"Ds",111:"Rg",112:"Cn",113:"Nh",114:"Fl",115:"Mc",116:"Lv",117:"Ts",118:"Og",57:"La",58:"Ce",59:"Pr",60:"Nd",61:"Pm",62:"Sm",63:"Eu",64:"Gd",65:"Tb",66:"Dy",67:"Ho",68:"Er",69:"Tm",70:"Yb",89:"Ac",90:"Th",91:"Pa",92:"U",93:"Np",94:"Pu",95:"Am",96:"Cm",97:"Bk",98:"Cf",99:"Es",100:"Fm",101:"Md",102:"No"}}),"./src/parsers/utils/areConnected.ts":((r,e,t)=>{t.r(e),t.d(e,{areConnected:()=>o});var a=t("./src/parsers/utils/bondLength.ts");const s=new Set(["Na","K","Ca","Mg","Mn","Sr"]);function o(f,u,h){if(h&&h.unboundCations&&(s.has(f.elem)||s.has(u.elem)))return!1;let x=(0,a.bondLength)(f.elem)+(0,a.bondLength)(u.elem);x+=.25,x*=x;let m=f.x-u.x;if(m*=m,m>x)return!1;let w=f.y-u.y;if(w*=w,w>x)return!1;let A=f.z-u.z;if(A*=A,A>x)return!1;const D=m+w+A;return!(isNaN(D)||D<.5||D>x||f.altLoc!==u.altLoc&&f.altLoc.trim()!==""&&u.altLoc.trim()!=="")}}),"./src/parsers/utils/assignBackboneHBonds.ts":((r,e,t)=>{t.r(e),t.d(e,{assignBackboneHBonds:()=>a});function a(s,o){const f=o||3.2,u=f*f,h=[];for(let x=0,m=s.length;x<m;x++){s[x].index=x;const w=s[x];!w.hetflag&&(w.atom==="N"||w.atom==="O")&&(h.push(w),w.hbondOther=null,w.hbondDistanceSq=Number.POSITIVE_INFINITY)}h.sort(function(x,m){return x.z-m.z});for(let x=0,m=h.length;x<m;x++){const w=h[x];for(let A=x+1;A<m;A++){const D=h[A],I=D.z-w.z;if(I>f)break;if(D.atom==w.atom)continue;const y=Math.abs(D.y-w.y);if(y>f)continue;const l=Math.abs(D.x-w.x);if(l>f)continue;const c=l*l+y*y+I*I;c>u||D.chain==w.chain&&Math.abs(D.resi-w.resi)<4||(c<w.hbondDistanceSq&&(w.hbondOther=D,w.hbondDistanceSq=c),c<D.hbondDistanceSq&&(D.hbondOther=w,D.hbondDistanceSq=c))}}}}),"./src/parsers/utils/assignBonds.ts":((r,e,t)=>{t.r(e),t.d(e,{assignBonds:()=>f});var a=t("./src/parsers/utils/areConnected.ts");const s=[{x:0,y:0,z:1},{x:0,y:1,z:-1},{x:0,y:1,z:0},{x:0,y:1,z:1},{x:1,y:-1,z:-1},{x:1,y:-1,z:0},{x:1,y:-1,z:1},{x:1,y:0,z:-1},{x:1,y:0,z:0},{x:1,y:0,z:1},{x:1,y:1,z:-1},{x:1,y:1,z:0},{x:1,y:1,z:1}],o=4.95;function f(u,h){for(let w=0,A=u.length;w<A;w++)u[w].index||(u[w].index=w);const x={x:{y:{z:[]}}};for(let w=0;w<u.length;w++){const A=u[w],D=Math.floor(A.x/o),I=Math.floor(A.y/o),y=Math.floor(A.z/o);x[D]||(x[D]={}),x[D][I]||(x[D][I]={}),x[D][I][y]||(x[D][I][y]=[]),x[D][I][y].push(A)}function m(w,A){for(let D=0;D<w.length;D++){const I=w[D];for(let y=0;y<A.length;y++){const l=A[y];if((0,a.areConnected)(I,l,h)){const c=I.bonds.indexOf(l.index),L=l.bonds.indexOf(I.index);c===-1&&L===-1?(I.bonds.push(l.index),I.bondOrder.push(1),l.bonds.push(I.index),l.bondOrder.push(1)):c===-1?(I.bonds.push(l.index),I.bondOrder.push(l.bondOrder[L])):L===-1&&(l.bonds.push(I.index),l.bondOrder.push(I.bondOrder[c]))}}}}for(let w in x){const A=parseInt(w);for(let D in x[A]){const I=parseInt(D);for(let y in x[A][I]){const l=parseInt(y),c=x[A][I][l];for(let L=0;L<c.length;L++){const R=c[L];for(let F=L+1;F<c.length;F++){const $=c[F];(0,a.areConnected)(R,$,h)&&R.bonds.indexOf($.index)==-1&&(R.bonds.push($.index),R.bondOrder.push(1),$.bonds.push(R.index),$.bondOrder.push(1))}}for(let L=0;L<s.length;L++){const R=s[L];if(!x[A+R.x]||!x[A+R.x][I+R.y]||!x[A+R.x][I+R.y][l+R.z])continue;const F=x[A+R.x][I+R.y][l+R.z];m(c,F)}}}}}}),"./src/parsers/utils/assignPDBBonds.ts":((r,e,t)=>{t.r(e),t.d(e,{assignPDBBonds:()=>f});var a=t("./src/parsers/utils/areConnected.ts"),s=t("./src/parsers/utils/assignBonds.ts"),o=t("./src/parsers/utils/standardResidues.ts");function f(u,h){const x=[],m=[];for(let I=0,y=u.length;I<y;I++){const l=u[I];l.index=I,l.hetflag||!o.standardResidues.has(l.resn)?m.push(l):x.push(l)}(0,s.assignBonds)(m,h),x.sort(function(I,y){return I.chain!==y.chain?I.chain<y.chain?-1:1:I.resi-y.resi});let w=-1,A=-1,D;for(let I=0,y=x.length;I<y;I++){const l=x[I];l.resi!==w&&(w=l.resi,D||A++,D=!1),l.reschain=A;for(let c=I+1;c<x.length;c++){const L=x[c];if(L.chain!==l.chain||L.resi-l.resi>1)break;(0,a.areConnected)(l,L,h)&&(l.bonds.indexOf(L.index)===-1&&(l.bonds.push(L.index),l.bondOrder.push(1),L.bonds.push(l.index),L.bondOrder.push(1)),l.resi!==L.resi&&(D=!0))}}}}),"./src/parsers/utils/atomNameToElem.ts":((r,e,t)=>{t.r(e),t.d(e,{atomNameToElem:()=>s});var a=t("./src/parsers/utils/bondLength.ts");function s(o,f){let u=o.replace(/ /g,"");return u.length>0&&u[0]==="H"&&u!=="Hg"&&u!=="He"&&u!=="Hf"&&u!=="Hs"&&u!=="Ho"&&(u="H"),u.length>1&&(u=u[0].toUpperCase()+u.substring(1).toLowerCase(),a.bondTable[u]===void 0?u=u[0]:f&&(u==="Ca"||u==="Cd")&&(u="C")),u}}),"./src/parsers/utils/bondLength.ts":((r,e,t)=>{t.r(e),t.d(e,{bondLength:()=>s,bondTable:()=>a,setBondLength:()=>o});let a={H:.37,He:.32,Li:1.34,Be:.9,B:.82,C:.77,N:.75,O:.73,F:.71,Ne:.69,Na:1.54,Mg:1.3,Al:1.18,Si:1.11,P:1.06,S:1.02,Cl:.99,Ar:.97,K:1.96,Ca:1.74,Sc:1.44,Ti:1.56,V:1.25,Mn:1.39,Fe:1.25,Co:1.26,Ni:1.21,Cu:1.38,Zn:1.31,Ga:1.26,Ge:1.22,Se:1.16,Br:1.14,Kr:1.1,Rb:2.11,Sr:1.92,Y:1.62,Zr:1.48,Nb:1.37,Mo:1.45,Tc:1.56,Ru:1.26,Rh:1.35,Pd:1.31,Ag:1.53,Cd:1.48,In:1.44,Sn:1.41,Sb:1.38,Te:1.35,I:1.33,Xe:1.3,Cs:2.25,Ba:1.98,Lu:1.6,Hf:1.5,Ta:1.38,W:1.46,Re:1.59,Os:1.44,Ir:1.37,Pt:1.28,Au:1.44,Hg:1.49,Tl:1.48,Pb:1.47,Bi:1.46,Rn:1.45};function s(f){return a[f]||1.6}function o(f,u){u<0&&(u=0),a[f]=u}}),"./src/parsers/utils/computeSecondaryStructure.ts":((r,e,t)=>{t.r(e),t.d(e,{computeSecondaryStructure:()=>s});var a=t("./src/parsers/utils/assignBackboneHBonds.ts");function s(o,f){(0,a.assignBackboneHBonds)(o,f);const u={};let h,x,m,w,A,D;for(h=0,x=o.length;h<x;h++)if(A=o[h],u[A.chain]===void 0&&(u[A.chain]=[]),isFinite(A.hbondDistanceSq)){const I=A.hbondOther;u[I.chain]===void 0&&(u[I.chain]=[]),Math.abs(I.resi-A.resi)===4&&(u[A.chain][A.resi]="h")}for(m in u)for(w=1;w<u[m].length-1;w++){const I=u[m][w-1],y=u[m][w+1];D=u[m][w],I=="h"&&I==y&&D!=I&&(u[m][w]=I)}for(h=0,x=o.length;h<x;h++)A=o[h],isFinite(A.hbondDistanceSq)&&u[A.chain][A.resi]!="h"&&A.ss!=="h"&&(u[A.chain][A.resi]="maybesheet");for(let I=0,y=o.length;I<y;I++)if(A=o[I],isFinite(A.hbondDistanceSq)&&u[A.chain][A.resi]=="maybesheet"){let l=A.hbondOther,c=u[l.chain][l.resi];(c=="maybesheet"||c=="s")&&(u[A.chain][A.resi]="s",u[l.chain][l.resi]="s")}for(let I in u){for(let y=1;y<u[I].length-1;y++){const l=u[I][y-1],c=u[I][y+1];D=u[I][y],l=="s"&&l==c&&D!=l&&(u[I][y]=l)}for(let y=0;y<u[I].length;y++){const l=u[I][y];(l=="h"||l=="s")&&u[I][y-1]!=l&&u[I][y+1]!=l&&delete u[I][y]}}for(h=0,x=o.length;h<x;h++)A=o[h],D=u[A.chain][A.resi],delete A.hbondOther,delete A.hbondDistanceSq,!(D===void 0||D==="maybesheet")&&(A.ss=D,u[A.chain][A.resi-1]!=D&&(A.ssbegin=!0),u[A.chain][A.resi+1]!=D&&(A.ssend=!0))}}),"./src/parsers/utils/getSinglePDB.ts":((r,e,t)=>{t.r(e),t.d(e,{getSinglePDB:()=>w});var a=t("./src/WebGL/index.ts"),s=t("./src/parsers/utils/atomNameToElem.ts"),o=t("./src/parsers/utils/bondLength.ts"),f=t("./src/parsers/utils/computeSecondaryStructure.ts"),u=t("./src/parsers/utils/isEmpty.ts"),h=t("./src/parsers/utils/processSymmetries.ts"),x=t("./src/parsers/utils/assignPDBBonds.ts"),m=t("./src/parsers/utils/validateBonds.ts");function w(A,D,I){const y=[],l=D.assignBonds===void 0?!0:D.assignBonds,c=!D.keepH,L=!!D.noSecondaryStructure,R=!D.noComputeSecondaryStructure,F=!D.doAssembly,$=D.altLoc?D.altLoc:"A",b={symmetries:[],cryst:void 0};let k,B=[];const J=[];let X;const ae={};for(let He=0;He<A.length;He++){X=A[He].replace(/^\s*/,"");const Pe=X.substring(0,6);let ue,Oe,we;if(Pe.indexOf("END")===0){if(B=A.slice(He+1),Pe==="END")for(const Ze in I)I.hasOwnProperty(Ze)&&delete I[Ze];break}else if(Pe==="ATOM  "||Pe==="HETATM"){let Ze,it,lt,Vt,_e,pr,_s,Ei,Bl,Wl,Ep,Lp;if(Ep=X.substring(16,17),Ep!==" "&&Ep!==$&&$!=="*"||(Wl=parseInt(X.substring(6,11)),k=X.substring(12,16).replace(/ /g,""),Ze=X.substring(17,20).replace(/ /g,""),it=X.substring(21,22),lt=parseInt(X.substring(22,26)),Vt=X.substring(26,27),_e=parseFloat(X.substring(30,38)),pr=parseFloat(X.substring(38,46)),_s=parseFloat(X.substring(46,54)),Lp=parseFloat(X.substring(60,68)),Bl=X.substring(76,78).replace(/ /g,""),Bl===""||o.bondTable[Bl]===void 0?Bl=(0,s.atomNameToElem)(X.substring(12,14),X[0]=="A"):Bl=Bl[0].toUpperCase()+Bl.substring(1).toLowerCase(),Bl==="H"&&c))continue;Pe[0]=="H"?Ei=!0:Ei=!1,J[Wl]=y.length,y.push({resn:Ze,x:_e,y:pr,z:_s,elem:Bl,hetflag:Ei,altLoc:Ep,chain:it,resi:lt,icode:Vt,rescode:lt+(Vt!==" "?"^"+Vt:""),serial:Wl,atom:k,bonds:[],ss:"c",bondOrder:[],properties:{},b:Lp,pdbline:X})}else if(Pe==="SHEET "){ue=X.substring(21,22),Oe=parseInt(X.substring(22,26)),we=parseInt(X.substring(33,37)),ue in I||(I[ue]={}),I[ue][Oe]="s1";for(let Ze=Oe+1;Ze<we;Ze++)I[ue][Ze]="s";I[ue][we]="s2"}else if(Pe==="CONECT"){const Ze=parseInt(X.substring(6,11)),it=J[Ze],lt=y[it],Vt=[11,16,21,26];for(let _e=0;_e<4;_e++){const pr=parseInt(X.substring(Vt[_e],Vt[_e]+5)),_s=J[pr];let Ei=it+":"+_s;const Bl=y[_s];if(lt!==void 0&&Bl!==void 0)if(!ae[Ei])ae[Ei]=1,(lt.bonds.length==0||lt.bonds[lt.bonds.length-1]!==_s)&&(lt.bonds.push(_s),lt.bondOrder.push(1));else{ae[Ei]+=1;for(let Wl=0;Wl<lt.bonds.length;Wl++)if(lt.bonds[Wl]==_s){const Ep=ae[Ei];Ep>=4?lt.bondOrder[Wl]=1:lt.bondOrder[Wl]=Ep}}}}else if(Pe==="HELIX "){ue=X.substring(19,20),Oe=parseInt(X.substring(21,25)),we=parseInt(X.substring(33,37)),ue in I||(I[ue]={}),I[ue][Oe]="h1";for(let Ze=Oe+1;Ze<we;Ze++)I[ue][Ze]="h";I[ue][we]="h2"}else if(!F&&Pe==="REMARK"&&X.substring(13,18)==="BIOMT"){let Ze,it=new a.Matrix4;for(Ze=1;Ze<=3;Ze++)if(X=A[He].replace(/^\s*/,""),parseInt(X.substring(18,19))==Ze)it.elements[Ze-1]=parseFloat(X.substring(23,33)),it.elements[Ze-1+4]=parseFloat(X.substring(33,43)),it.elements[Ze-1+8]=parseFloat(X.substring(43,53)),it.elements[Ze-1+12]=parseFloat(X.substring(53)),He++;else for(;X.substring(13,18)==="BIOMT";)He++,X=A[He].replace(/^\s*/,"");it.elements[3]=0,it.elements[7]=0,it.elements[11]=0,it.elements[15]=1,b.symmetries.push(it),He--}else if(Pe==="CRYST1"){let Ze,it,lt,Vt,_e,pr;Ze=parseFloat(X.substring(7,15)),it=parseFloat(X.substring(16,24)),lt=parseFloat(X.substring(25,33)),Vt=parseFloat(X.substring(34,40)),_e=parseFloat(X.substring(41,47)),pr=parseFloat(X.substring(48,54)),b.cryst={a:Ze,b:it,c:lt,alpha:Vt,beta:_e,gamma:pr}}else if(Pe==="ANISOU"){const Ze=parseInt(X.substring(6,11)),it=J[Ze],lt=y[it];if(lt){const Vt=X.substring(30).trim().split(/\s+/),_e={u11:parseInt(Vt[0]),u22:parseInt(Vt[1]),u33:parseInt(Vt[2]),u12:parseInt(Vt[3]),u13:parseInt(Vt[4]),u23:parseInt(Vt[5])};lt.uMat=_e}}}if((0,m.validateBonds)(y,J),l&&(0,x.assignPDBBonds)(y,D),F||(0,h.processSymmetries)(b.symmetries,y,D,b.cryst),R&&!L&&(0,f.computeSecondaryStructure)(y,D.hbondCutoff),!(0,u.isEmpty)(I))for(let He=0;He<y.length;He++){const Pe=y[He];if(Pe!==void 0&&Pe.chain in I&&Pe.resi in I[Pe.chain]){const ue=I[Pe.chain][Pe.resi];Pe.ss=ue[0],ue.length>1&&(ue[1]=="1"?Pe.ssbegin=!0:ue[1]=="2"&&(Pe.ssend=!0))}}return[y,b,B]}}),"./src/parsers/utils/isEmpty.ts":((r,e,t)=>{t.r(e),t.d(e,{isEmpty:()=>a});function a(s){for(const o in s)return!1;return!0}}),"./src/parsers/utils/processSymmetries.ts":((r,e,t)=>{t.r(e),t.d(e,{processSymmetries:()=>s});var a=t("./src/WebGL/index.ts");function s(o,f,u,h){const x=!u.duplicateAssemblyAtoms,m=f.length;let w=m,A=-1,D=null,I=null;(u.normalizeAssembly||u.wrapAtoms)&&h&&(D=(0,a.conversionMatrix3)(h.a,h.b,h.c,h.alpha,h.beta,h.gamma),I=new a.Matrix3,I.getInverse3(D));let y=function(L){let R=L.clone().applyMatrix3(I);const F=[R.x,R.y,R.z],$=[0,0,0];for(let k=0;k<3;k++){for(;F[k]<-.001;)F[k]+=1,$[k]+=1;for(;F[k]>1.001;)F[k]-=1,$[k]-=1}const b=new a.Vector3($[0],$[1],$[2]);return b.applyMatrix3(D),b};if(u.normalizeAssembly&&h)for(let L=0;L<o.length;L++){const R=new a.Vector3(0,0,0);for(let $=0;$<m;$++){const b=new a.Vector3(f[$].x,f[$].y,f[$].z);b.applyMatrix4(o[L]),R.add(b)}R.divideScalar(m);const F=y(R);o[L].isNearlyIdentity()&&F.lengthSq()>.001&&(A=L),o[L].translate(F)}if(x){if(o.length>1)for(let L=0;L<f.length;L++){var l=[];for(let R=0;R<o.length;R++)if(!o[R].isNearlyIdentity()){var c=new a.Vector3;c.set(f[L].x,f[L].y,f[L].z),c.applyMatrix4(o[R]),l.push(c)}f[L].symmetries=l}}else{for(let L=0;L<m;L++)f[L].sym=-1;for(let L=0;L<o.length;L++)if(!o[L].isNearlyIdentity()&&A!=L){let R=new a.Vector3;for(let F=0;F<m;F++){const $=[];for(let k=0;k<f[F].bonds.length;k++)$.push(f[F].bonds[k]+w);if(R.set(f[F].x,f[F].y,f[F].z),R.applyMatrix4(o[L]),u.wrapAtoms&&h){let k=y(R);R.add(k)}const b={};for(const k in f[F])b[k]=f[F][k];b.x=R.x,b.y=R.y,b.z=R.z,b.bonds=$,b.sym=L,b.index=f.length,f.push(b)}w=f.length}else for(let R=0;R<m;R++)f[R].sym=L;if(u.wrapAtoms&&h){let L=new a.Vector3;for(let R=0;R<m;R++){L.set(f[R].x,f[R].y,f[R].z);let F=y(L);L.add(F),f[R].x=L.x,f[R].y=L.y,f[R].z=L.z}}if(A>=0){const L=new a.Vector3;for(let R=0;R<m;R++)L.set(f[R].x,f[R].y,f[R].z),L.applyMatrix4(o[A]),f[R].x=L.x,f[R].y=L.y,f[R].z=L.z}o.length=0}}}),"./src/parsers/utils/standardResidues.ts":((r,e,t)=>{t.r(e),t.d(e,{standardResidues:()=>a});const a=new Set(["ABU","ACD","ALA","ALB","ALI","ARG","AR0","ASN","ASP","ASX","BAS","CYS","CYH","CYX","CSS","CSH","GLN","GLU","GLX","GLY","HIS","HIE","HID","HIP","HYP","ILE","ILU","LEU","LYS","MET","PCA","PGA","PHE","PR0","PRO","PRZ","SER","THR","TRP","TYR","VAL","A","1MA","C","5MC","OMC","G","1MG","2MG","M2G","7MG","OMG","YG","I","T","U","+U","H2U","5MU","PSU","ACE","F0R","H2O","HOH","WAT"])}),"./src/parsers/utils/validateBonds.ts":((r,e,t)=>{t.r(e),t.d(e,{validateBonds:()=>a});function a(s,o){for(let f=0,u=s.length;f<u;f++){const h=s[f];for(let x=0;x<h.bonds.length;x++){const m=h.bonds[x],w=s[m],A=o[h.serial];w&&A&&w.bonds.indexOf(A)<0&&(w.bonds.push(A),w.bondOrder.push(h.bondOrder[x]))}}}}),"./src/partialCharges.ts":((r,e,t)=>{t.r(e),t.d(e,{applyPartialCharges:()=>s,partialCharges:()=>a});const a={"ALA:N":-.15,"ALA:CA":.1,"ALA:CB":0,"ALA:C":.6,"ALA:O":-.55,"ARG:N":-.15,"ARG:CA":.1,"ARG:CB":0,"ARG:CG":0,"ARG:CD":.1,"ARG:NE":-.1,"ARG:CZ":.5,"ARG:NH1":.25,"ARG:NH2":.25,"ARG:C":.6,"ARG:O":-.55,"ASN:N":-.15,"ASN:CA":.1,"ASN:CB":0,"ASN:CG":.55,"ASN:OD1":-.55,"ASN:ND2":0,"ASN:C":.6,"ASN:O":-.55,"ASP:N":-.15,"ASP:CA":.1,"ASP:CB":0,"ASP:CG":.14,"ASP:OD1":-.57,"ASP:OD2":-.57,"ASP:C":.6,"ASP:O":-.55,"CYS:N":-.15,"CYS:CA":.1,"CYS:CB":.19,"CYS:SG":-.19,"CYS:C":.6,"CYS:O":-.55,"GLN:N":-.15,"GLN:CA":.1,"GLN:CB":0,"GLN:CG":0,"GLN:CD":.55,"GLN:OE1":-.55,"GLN:NE2":0,"GLN:C":.6,"GLN:O":-.55,"GLU:N":-.15,"GLU:CA":.1,"GLU:CB":0,"GLU:CG":0,"GLU:CD":.14,"GLU:OE1":-.57,"GLU:OE2":-.57,"GLU:C":.6,"GLU:O":-.55,"GLY:N":-.15,"GLY:CA":.1,"GLY:C":.6,"GLY:O":-.55,"HIS:N":-.15,"HIS:CA":.1,"HIS:CB":0,"HIS:CG":.1,"HIS:ND1":-.1,"HIS:CD2":.1,"HIS:NE2":-.4,"HIS:CE1":.3,"HIS:C":.6,"HIS:O":-.55,"ILE:N":-.15,"ILE:CA":.1,"ILE:CB":0,"ILE:CG2":0,"ILE:CG1":0,"ILE:CD":0,"ILE:C":.6,"ILE:O":-.55,"LEU:N":-.15,"LEU:CA":.1,"LEU:CB":0,"LEU:CG":0,"LEU:CD1":0,"LEU:CD2":0,"LEU:C":.6,"LEU:O":-.55,"LYS:N":-.15,"LYS:CA":.1,"LYS:CB":0,"LYS:CG":0,"LYS:CD":0,"LYS:CE":.25,"LYS:NZ":.75,"LYS:C":.6,"LYS:O":-.55,"MET:N":-.15,"MET:CA":.1,"MET:CB":0,"MET:CG":.06,"MET:SD":-.12,"MET:CE":.06,"MET:C":.6,"MET:O":-.55,"PHE:N":-.15,"PHE:CA":.1,"PHE:CB":0,"PHE:CG":0,"PHE:CD1":0,"PHE:CD2":0,"PHE:CE1":0,"PHE:CE2":0,"PHE:CZ":0,"PHE:C":.6,"PHE:O":-.55,"PRO:N":-.25,"PRO:CD":.1,"PRO:CA":.1,"PRO:CB":0,"PRO:CG":0,"PRO:C":.6,"PRO:O":-.55,"SER:N":-.15,"SER:CA":.1,"SER:CB":.25,"SER:OG":-.25,"SER:C":.6,"SER:O":-.55,"THR:N":-.15,"THR:CA":.1,"THR:CB":.25,"THR:OG1":-.25,"THR:CG2":0,"THR:C":.6,"THR:O":-.55,"TRP:N":-.15,"TRP:CA":.1,"TRP:CB":0,"TRP:CG":-.03,"TRP:CD2":.1,"TRP:CE2":-.04,"TRP:CE3":-.03,"TRP:CD1":.06,"TRP:NE1":-.06,"TRP:CZ2":0,"TRP:CZ3":0,"TRP:CH2":0,"TRP:C":.6,"TRP:O":-.55,"TYR:N":-.15,"TYR:CA":.1,"TYR:CB":0,"TYR:CG":0,"TYR:CD1":0,"TYR:CE1":0,"TYR:CD2":0,"TYR:CE2":0,"TYR:CZ":.25,"TYR:OH":-.25,"TYR:C":.6,"TYR:O":-.55,"VAL:N":-.15,"VAL:CA":.1,"VAL:CB":0,"VAL:CG1":0,"VAL:CG2":0,"VAL:C":.6,"VAL:O":-.55};function s(o,f){if((!f||typeof o.partialCharge>"u")&&o.resn&&o.atom){var u=o.resn+":"+o.atom;o.properties.partialCharge=a[u]}}}),"./src/specs.ts":((r,e,t)=>{t.r(e)}),"./src/utilities.ts":((__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{PausableTimer:()=>PausableTimer,adjustVolumeStyle:()=>adjustVolumeStyle,base64ToArray:()=>base64ToArray,deepCopy:()=>deepCopy,download:()=>download,extend:()=>extend,get:()=>get,getAtomProperty:()=>getAtomProperty,getColorFromStyle:()=>getColorFromStyle,getElement:()=>getElement,getExtent:()=>getExtent,getPropertyRange:()=>getPropertyRange,getbin:()=>getbin,inflateString:()=>inflateString,isEmptyObject:()=>isEmptyObject,isNumeric:()=>isNumeric,makeFunction:()=>makeFunction,mergeGeos:()=>mergeGeos,specStringToObject:()=>specStringToObject});var _Gradient__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/Gradient.ts"),_VolumeData__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/VolumeData.ts"),_colors__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/colors.ts"),pako__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/pako/dist/pako.esm.mjs");function extend(r,e){for(var t in e)e.hasOwnProperty(t)&&e[t]!==void 0&&(r[t]=e[t]);return r}function deepCopy(r){let e,t,a;if(r==null)return{};if(typeof r!="object"||r===null)return r;e=Array.isArray(r)?[]:{};for(a in r)t=r[a],e[a]=deepCopy(t);return e}function isNumeric(r){var e=typeof r;return(e==="number"||e==="string")&&!isNaN(r-parseFloat(r))}function isEmptyObject(r){return Object.keys(r).length===0}function makeFunction(callback){return callback&&typeof callback=="string"&&(callback=eval("("+callback+")")),callback&&typeof callback!="function"?(console.warn("Invalid callback provided."),()=>{}):callback}function adjustVolumeStyle(r){r&&(r.volformat&&!(r.voldata instanceof _VolumeData__WEBPACK_IMPORTED_MODULE_1__.VolumeData)&&(r.voldata=new _VolumeData__WEBPACK_IMPORTED_MODULE_1__.VolumeData(r.voldata,r.volformat)),r.volscheme&&(r.volscheme=_Gradient__WEBPACK_IMPORTED_MODULE_0__.Gradient.getGradient(r.volscheme)))}function getExtent(r,e){var t,a,s,o,f,u,h,x,m,w,A=!e;if(t=a=s=9999,o=f=u=-9999,h=x=m=w=0,r.length===0)return[[0,0,0],[0,0,0],[0,0,0]];for(var D=0;D<r.length;D++){var I=r[D];if(!(typeof I>"u"||!isFinite(I.x)||!isFinite(I.y)||!isFinite(I.z))&&(w++,h+=I.x,x+=I.y,m+=I.z,t=t<I.x?t:I.x,a=a<I.y?a:I.y,s=s<I.z?s:I.z,o=o>I.x?o:I.x,f=f>I.y?f:I.y,u=u>I.z?u:I.z,I.symmetries&&A))for(var y=0;y<I.symmetries.length;y++)w++,h+=I.symmetries[y].x,x+=I.symmetries[y].y,m+=I.symmetries[y].z,t=t<I.symmetries[y].x?t:I.symmetries[y].x,a=a<I.symmetries[y].y?a:I.symmetries[y].y,s=s<I.symmetries[y].z?s:I.symmetries[y].z,o=o>I.symmetries[y].x?o:I.symmetries[y].x,f=f>I.symmetries[y].y?f:I.symmetries[y].y,u=u>I.symmetries[y].z?u:I.symmetries[y].z}return[[t,a,s],[o,f,u],[h/w,x/w,m/w]]}function getPropertyRange(r,e){for(var t=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,s=0,o=r.length;s<o;s++){var f=r[s],u=getAtomProperty(f,e);u!=null&&(u<t&&(t=u),u>a&&(a=u))}return!isFinite(t)&&!isFinite(a)?t=a=0:isFinite(t)?isFinite(a)||(a=t):t=a,[t,a]}class PausableTimer{constructor(e,t,a){this.total_time_run=0,this.fn=e,this.arg=a,this.countdown=t,this.start_time=new Date().getTime(),this.ident=setTimeout(e,t,a)}cancel(){clearTimeout(this.ident)}pause(){clearTimeout(this.ident),this.total_time_run=new Date().getTime()-this.start_time}resume(){this.ident=setTimeout(this.fn,Math.max(0,this.countdown-this.total_time_run),this.arg)}}function base64ToArray(r){for(var e=window.atob(r),t=e.length,a=new Uint8Array(t),s=0;s<t;s++)a[s]=e.charCodeAt(s);return a}function getAtomProperty(r,e){var t=null;return r.properties&&typeof r.properties[e]<"u"?t=r.properties[e]:typeof r[e]<"u"&&(t=r[e]),t}function mergeGeos(r,e){var t=e.geometry;t!==void 0&&r.geometryGroups.push(t.geometryGroups[0])}function specStringToObject(r){if(typeof r=="object"||typeof r>"u"||r==null)return r;try{return JSON.parse(r)}catch{}r=r.replace(/%7E/g,"~");var e=function(A){return isNumeric(A)?Math.floor(parseFloat(A))==parseInt(A)||A.indexOf(".")>=0?parseFloat(A):parseInt(A):A==="true"?!0:A==="false"?!1:A},t={};if(r==="all")return t;for(var a=r.split(";"),s=0;s<a.length;s++){var o=a[s].split(":"),f=o[0],u={},h=o[1];if(h)if(h=h.replace(/~/g,"="),h.indexOf("=")!==-1)for(var x=h.split(","),m=0;m<x.length;m++){var w=x[m].split("=",2);u[w[0]]=e(w[1])}else h.indexOf(",")!==-1?u=h.split(","):u=e(h);t[f]=u}return t}function checkStatus(r){if(!r.ok)throw new Error(`HTTP ${r.status} - ${r.statusText}`);return r}function get(r,e){var t=fetch(r).then(checkStatus).then(a=>a.text());return e?t.then(e):t}function getbin(r,e,t,a){var s;return t=="POST"?s=fetch(r,{method:"POST",body:a}).then(o=>checkStatus(o)).then(o=>o.arrayBuffer()):s=fetch(r).then(o=>checkStatus(o)).then(o=>o.arrayBuffer()),e?s.then(e):s}function download(r,e,t,a){var s="",o="",f="",u=null,h=e.addModel();if(r.indexOf(":")<0&&(r.length==4?r="pdb:"+r:isNaN(r)?r="url:"+r:r="cid:"+r),r.substring(0,5)=="mmtf:"&&(console.warn("WARNING: MMTF now deprecated.  Reverting to bcif."),r="bcif:"+r.slice(5)),r.substring(0,5)==="bcif:")r=r.substring(5).toUpperCase(),f="https://models.rcsb.org/"+r+".bcif.gz",t&&typeof t.noComputeSecondaryStructure>"u"&&(t.noComputeSecondaryStructure=!0),u=new Promise(function(m){getbin(f).then(function(w){h.addMolData(w,"bcif.gz",t),e.zoomTo(),e.render(),m(h)},function(){console.error("fetch of "+f+" failed.")})});else{if(r.substring(0,4)==="pdb:"){if(s="bcif",t&&t.format&&(s=t.format),t&&typeof t.noComputeSecondaryStructure>"u"&&(t.noComputeSecondaryStructure=!0),r=r.substring(4).toUpperCase(),!r.match(/^[1-9][A-Za-z0-9]{3}$/)){alert("Wrong PDB ID");return}s=="bcif"?f="https://models.rcsb.org/"+r.toUpperCase()+".bcif.gz":(o=t&&t.pdbUri?t.pdbUri:"https://files.rcsb.org/view/",f=o+r+"."+s)}else if(r.substring(0,4)=="cid:"){if(s="sdf",r=r.substring(4),!r.match(/^[0-9]+$/)){alert("Wrong Compound ID");return}f="https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/"+r+"/SDF?record_type=3d"}else r.substring(0,4)=="url:"&&(f=r.substring(4),s=f);var x=function(m){h.addMolData(m,s,t),e.zoomTo(),e.render()};u=new Promise(function(m){s=="bcif"?getbin(f).then(function(w){x(w),m(h)}).catch(function(){o=t&&t.pdbUri?t.pdbUri:"https://files.rcsb.org/view/",f=o+r+".pdb",s="pdb",console.warn("falling back to pdb format"),get(f).then(function(w){x(w),m(h)}).catch(function(w){x(""),m(h),console.error("fetch of "+f+" failed: "+w.statusText)})}):get(f).then(function(w){x(w),m(h)}).catch(function(w){x(""),m(h),console.error("fetch of "+f+" failed: "+w.statusText)})})}return a?(u.then(function(m){a(m)}),h):u}function getColorFromStyle(r,e){let t=e.colorscheme;if(typeof _colors__WEBPACK_IMPORTED_MODULE_2__.builtinColorSchemes[t]<"u")t=_colors__WEBPACK_IMPORTED_MODULE_2__.builtinColorSchemes[t];else if(typeof t=="string"&&t.endsWith("Carbon")){let o=t.substring(0,t.lastIndexOf("Carbon")).toLowerCase();if(typeof _colors__WEBPACK_IMPORTED_MODULE_2__.htmlColors[o]<"u"){let f=Object.assign({},_colors__WEBPACK_IMPORTED_MODULE_2__.elementColors.defaultColors);f.C=_colors__WEBPACK_IMPORTED_MODULE_2__.htmlColors[o],_colors__WEBPACK_IMPORTED_MODULE_2__.builtinColorSchemes[t]={prop:"elem",map:f},t=_colors__WEBPACK_IMPORTED_MODULE_2__.builtinColorSchemes[t]}}let a=r.color;if(typeof e.color<"u"&&e.color!="spectrum"&&(a=e.color),typeof t<"u"){let o,f;if(typeof _colors__WEBPACK_IMPORTED_MODULE_2__.elementColors[t]<"u")t=_colors__WEBPACK_IMPORTED_MODULE_2__.elementColors[t],typeof t[r[t.prop]]<"u"&&(a=t.map[r[t.prop]]);else if(typeof t[r[t.prop]]<"u")a=t.map[r[t.prop]];else if(typeof t.prop<"u"&&typeof t.gradient<"u"){o=t.prop;var s=t.gradient;s instanceof _Gradient__WEBPACK_IMPORTED_MODULE_0__.GradientType||(s=(0,_Gradient__WEBPACK_IMPORTED_MODULE_0__.getGradient)(t));let u=s.range()||[-1,1];f=getAtomProperty(r,o),f!=null&&(a=s.valueToHex(f,u))}else typeof t.prop<"u"&&typeof t.map<"u"?(o=t.prop,f=getAtomProperty(r,o),typeof t.map[f]<"u"&&(a=t.map[f])):typeof e.colorscheme[r.elem]<"u"?a=e.colorscheme[r.elem]:console.warn("Could not interpret colorscheme "+t)}else typeof e.colorfunc<"u"&&(a=e.colorfunc(r));return _colors__WEBPACK_IMPORTED_MODULE_2__.CC.color(a)}function getElement(r){let e=r;return typeof r=="string"?e=document.querySelector("#"+r):typeof r=="object"&&r.get&&(e=r.get(0)),e}function inflateString(r,e=!0){let t;return typeof r=="string"?t=new TextEncoder().encode(r):t=new Uint8Array(r),(0,pako__WEBPACK_IMPORTED_MODULE_3__.inflate)(t,{to:e?"string":null})}}),"./src/vendor/mmtf.js":(function(r,e){(function(t,a){a(e)})(this,function(t){function a(Nl,Gl,Mp){for(var _0=(Nl.byteLength,0),v0=Mp.length;v0>_0;_0++){var z0=Mp.charCodeAt(_0);if(128>z0)Nl.setUint8(Gl++,z0>>>0&127|0);else if(2048>z0)Nl.setUint8(Gl++,z0>>>6&31|192),Nl.setUint8(Gl++,z0>>>0&63|128);else if(65536>z0)Nl.setUint8(Gl++,z0>>>12&15|224),Nl.setUint8(Gl++,z0>>>6&63|128),Nl.setUint8(Gl++,z0>>>0&63|128);else{if(!(1114112>z0))throw new Error("bad codepoint "+z0);Nl.setUint8(Gl++,z0>>>18&7|240),Nl.setUint8(Gl++,z0>>>12&63|128),Nl.setUint8(Gl++,z0>>>6&63|128),Nl.setUint8(Gl++,z0>>>0&63|128)}}}function s(Nl){for(var Gl=0,Mp=0,_0=Nl.length;_0>Mp;Mp++){var v0=Nl.charCodeAt(Mp);if(128>v0)Gl+=1;else if(2048>v0)Gl+=2;else if(65536>v0)Gl+=3;else{if(!(1114112>v0))throw new Error("bad codepoint "+v0);Gl+=4}}return Gl}function o(Nl,Gl,Mp){var _0=typeof Nl;if(_0==="string"){var v0=s(Nl);if(32>v0)return Gl.setUint8(Mp,160|v0),a(Gl,Mp+1,Nl),1+v0;if(256>v0)return Gl.setUint8(Mp,217),Gl.setUint8(Mp+1,v0),a(Gl,Mp+2,Nl),2+v0;if(65536>v0)return Gl.setUint8(Mp,218),Gl.setUint16(Mp+1,v0),a(Gl,Mp+3,Nl),3+v0;if(4294967296>v0)return Gl.setUint8(Mp,219),Gl.setUint32(Mp+1,v0),a(Gl,Mp+5,Nl),5+v0}if(Nl instanceof Uint8Array){var v0=Nl.byteLength,z0=new Uint8Array(Gl.buffer);if(256>v0)return Gl.setUint8(Mp,196),Gl.setUint8(Mp+1,v0),z0.set(Nl,Mp+2),2+v0;if(65536>v0)return Gl.setUint8(Mp,197),Gl.setUint16(Mp+1,v0),z0.set(Nl,Mp+3),3+v0;if(4294967296>v0)return Gl.setUint8(Mp,198),Gl.setUint32(Mp+1,v0),z0.set(Nl,Mp+5),5+v0}if(_0==="number"){if(!isFinite(Nl))throw new Error("Number not finite: "+Nl);if(Math.floor(Nl)!==Nl)return Gl.setUint8(Mp,203),Gl.setFloat64(Mp+1,Nl),9;if(Nl>=0){if(128>Nl)return Gl.setUint8(Mp,Nl),1;if(256>Nl)return Gl.setUint8(Mp,204),Gl.setUint8(Mp+1,Nl),2;if(65536>Nl)return Gl.setUint8(Mp,205),Gl.setUint16(Mp+1,Nl),3;if(4294967296>Nl)return Gl.setUint8(Mp,206),Gl.setUint32(Mp+1,Nl),5;throw new Error("Number too big 0x"+Nl.toString(16))}if(Nl>=-32)return Gl.setInt8(Mp,Nl),1;if(Nl>=-128)return Gl.setUint8(Mp,208),Gl.setInt8(Mp+1,Nl),2;if(Nl>=-32768)return Gl.setUint8(Mp,209),Gl.setInt16(Mp+1,Nl),3;if(Nl>=-2147483648)return Gl.setUint8(Mp,210),Gl.setInt32(Mp+1,Nl),5;throw new Error("Number too small -0x"+(-Nl).toString(16).substr(1))}if(Nl===null)return Gl.setUint8(Mp,192),1;if(_0==="boolean")return Gl.setUint8(Mp,Nl?195:194),1;if(_0==="object"){var v0,u0=0,sm=Array.isArray(Nl);if(sm)v0=Nl.length;else{var Uo=Object.keys(Nl);v0=Uo.length}var u0;if(16>v0?(Gl.setUint8(Mp,v0|(sm?144:128)),u0=1):65536>v0?(Gl.setUint8(Mp,sm?220:222),Gl.setUint16(Mp+1,v0),u0=3):4294967296>v0&&(Gl.setUint8(Mp,sm?221:223),Gl.setUint32(Mp+1,v0),u0=5),sm)for(var x0=0;v0>x0;x0++)u0+=o(Nl[x0],Gl,Mp+u0);else for(var x0=0;v0>x0;x0++){var Xl=Uo[x0];u0+=o(Xl,Gl,Mp+u0),u0+=o(Nl[Xl],Gl,Mp+u0)}return u0}throw new Error("Unknown type "+_0)}function f(Nl){var Gl=typeof Nl;if(Gl==="string"){var Mp=s(Nl);if(32>Mp)return 1+Mp;if(256>Mp)return 2+Mp;if(65536>Mp)return 3+Mp;if(4294967296>Mp)return 5+Mp}if(Nl instanceof Uint8Array){var Mp=Nl.byteLength;if(256>Mp)return 2+Mp;if(65536>Mp)return 3+Mp;if(4294967296>Mp)return 5+Mp}if(Gl==="number"){if(Math.floor(Nl)!==Nl)return 9;if(Nl>=0){if(128>Nl)return 1;if(256>Nl)return 2;if(65536>Nl)return 3;if(4294967296>Nl)return 5;throw new Error("Number too big 0x"+Nl.toString(16))}if(Nl>=-32)return 1;if(Nl>=-128)return 2;if(Nl>=-32768)return 3;if(Nl>=-2147483648)return 5;throw new Error("Number too small -0x"+Nl.toString(16).substr(1))}if(Gl==="boolean"||Nl===null)return 1;if(Gl==="object"){var Mp,_0=0;if(Array.isArray(Nl)){Mp=Nl.length;for(var v0=0;Mp>v0;v0++)_0+=f(Nl[v0])}else{var z0=Object.keys(Nl);Mp=z0.length;for(var v0=0;Mp>v0;v0++){var sm=z0[v0];_0+=f(sm)+f(Nl[sm])}}if(16>Mp)return 1+_0;if(65536>Mp)return 3+_0;if(4294967296>Mp)return 5+_0;throw new Error("Array or object too long 0x"+Mp.toString(16))}throw new Error("Unknown type "+Gl)}function u(Nl){var Gl=new ArrayBuffer(f(Nl)),Mp=new DataView(Gl);return o(Nl,Mp,0),new Uint8Array(Gl)}function h(Nl,Gl,Mp){return Gl?new Nl(Gl.buffer,Gl.byteOffset,Gl.byteLength/(Mp||1)):void 0}function x(Nl){return h(DataView,Nl)}function m(Nl){return h(Uint8Array,Nl)}function w(Nl){return h(Int8Array,Nl)}function A(Nl){return h(Int32Array,Nl,4)}function D(Nl){return h(Float32Array,Nl,4)}function I(Nl,Gl){var Mp=Nl.length/2;Gl||(Gl=new Int16Array(Mp));for(var _0=0,v0=0;Mp>_0;++_0,v0+=2)Gl[_0]=Nl[v0]<<8^Nl[v0+1]<<0;return Gl}function y(Nl,Gl){var Mp=Nl.length;Gl||(Gl=new Uint8Array(2*Mp));for(var _0=x(Gl),v0=0;Mp>v0;++v0)_0.setInt16(2*v0,Nl[v0]);return m(Gl)}function l(Nl,Gl){var Mp=Nl.length/4;Gl||(Gl=new Int32Array(Mp));for(var _0=0,v0=0;Mp>_0;++_0,v0+=4)Gl[_0]=Nl[v0]<<24^Nl[v0+1]<<16^Nl[v0+2]<<8^Nl[v0+3]<<0;return Gl}function c(Nl,Gl){var Mp=Nl.length;Gl||(Gl=new Uint8Array(4*Mp));for(var _0=x(Gl),v0=0;Mp>v0;++v0)_0.setInt32(4*v0,Nl[v0]);return m(Gl)}function L(Nl,Gl){var Mp=Nl.length;Gl||(Gl=new Float32Array(Mp/4));for(var _0=x(Gl),v0=x(Nl),z0=0,sm=0,Uo=Mp/4;Uo>z0;++z0,sm+=4)_0.setFloat32(sm,v0.getFloat32(sm),!0);return Gl}function R(Nl,Gl,Mp){var _0=Nl.length,v0=1/Gl;Mp||(Mp=new Float32Array(_0));for(var z0=0;_0>z0;++z0)Mp[z0]=Nl[z0]*v0;return Mp}function F(Nl,Gl,Mp){var _0=Nl.length;Mp||(Mp=new Int32Array(_0));for(var v0=0;_0>v0;++v0)Mp[v0]=Math.round(Nl[v0]*Gl);return Mp}function $(Nl,Gl){var Mp,_0;if(!Gl){var v0=0;for(Mp=0,_0=Nl.length;_0>Mp;Mp+=2)v0+=Nl[Mp+1];Gl=new Nl.constructor(v0)}var z0=0;for(Mp=0,_0=Nl.length;_0>Mp;Mp+=2)for(var sm=Nl[Mp],Uo=Nl[Mp+1],u0=0;Uo>u0;++u0)Gl[z0]=sm,++z0;return Gl}function b(Nl){if(Nl.length===0)return new Int32Array;var Gl,Mp,_0=2;for(Gl=1,Mp=Nl.length;Mp>Gl;++Gl)Nl[Gl-1]!==Nl[Gl]&&(_0+=2);var v0=new Int32Array(_0),z0=0,sm=1;for(Gl=1,Mp=Nl.length;Mp>Gl;++Gl)Nl[Gl-1]!==Nl[Gl]?(v0[z0]=Nl[Gl-1],v0[z0+1]=sm,sm=1,z0+=2):++sm;return v0[z0]=Nl[Nl.length-1],v0[z0+1]=sm,v0}function k(Nl,Gl){var Mp=Nl.length;Gl||(Gl=new Nl.constructor(Mp)),Mp&&(Gl[0]=Nl[0]);for(var _0=1;Mp>_0;++_0)Gl[_0]=Nl[_0]+Gl[_0-1];return Gl}function B(Nl,Gl){var Mp=Nl.length;Gl||(Gl=new Nl.constructor(Mp)),Gl[0]=Nl[0];for(var _0=1;Mp>_0;++_0)Gl[_0]=Nl[_0]-Nl[_0-1];return Gl}function J(Nl,Gl){var Mp,_0,v0=Nl instanceof Int8Array?127:32767,z0=-v0-1,sm=Nl.length;if(!Gl){var Uo=0;for(Mp=0;sm>Mp;++Mp)Nl[Mp]<v0&&Nl[Mp]>z0&&++Uo;Gl=new Int32Array(Uo)}for(Mp=0,_0=0;sm>Mp;){for(var u0=0;Nl[Mp]===v0||Nl[Mp]===z0;)u0+=Nl[Mp],++Mp;u0+=Nl[Mp],++Mp,Gl[_0]=u0,++_0}return Gl}function X(Nl,Gl){var Mp,_0=32767,v0=-_0-1,z0=Nl.length,sm=0;for(Mp=0;z0>Mp;++Mp){var Uo=Nl[Mp];Uo===0?++sm:Uo>0?(sm+=Math.ceil(Uo/_0),Uo%_0===0&&(sm+=1)):(sm+=Math.ceil(Uo/v0),Uo%v0===0&&(sm+=1))}var u0=new Int16Array(sm),x0=0;for(Mp=0;z0>Mp;++Mp){var Uo=Nl[Mp];if(Uo>=0)for(;Uo>=_0;)u0[x0]=_0,++x0,Uo-=_0;else for(;v0>=Uo;)u0[x0]=v0,++x0,Uo-=v0;u0[x0]=Uo,++x0}return u0}function ae(Nl,Gl){return k($(Nl),Gl)}function He(Nl){return b(B(Nl))}function Pe(Nl,Gl,Mp){return R($(Nl,A(Mp)),Gl,Mp)}function ue(Nl,Gl){return b(F(Nl,Gl))}function Oe(Nl,Gl,Mp){return R(k(Nl,A(Mp)),Gl,Mp)}function we(Nl,Gl,Mp){return B(F(Nl,Gl),Mp)}function Ze(Nl,Gl,Mp){return R(J(Nl,A(Mp)),Gl,Mp)}function it(Nl,Gl,Mp){var _0=J(Nl,A(Mp));return Oe(_0,Gl,D(_0))}function lt(Nl,Gl,Mp){return X(we(Nl,Gl))}function Vt(z0){var Gl=x(z0),Mp=Gl.getInt32(0),_0=Gl.getInt32(4),v0=z0.subarray(8,12),z0=z0.subarray(12);return[Mp,z0,_0,v0]}function _e(Nl,Gl,Mp,_0){var v0=new ArrayBuffer(12+_0.byteLength),z0=new Uint8Array(v0),sm=new DataView(v0);return sm.setInt32(0,Nl),sm.setInt32(4,Gl),Mp&&z0.set(Mp,8),z0.set(_0,12),z0}function pr(Nl){var Gl=Nl.length,Mp=m(Nl);return _e(2,Gl,void 0,Mp)}function _s(Nl){var Gl=Nl.length,Mp=c(Nl);return _e(4,Gl,void 0,Mp)}function Ei(Nl,Gl){var Mp=Nl.length/Gl,_0=c([Gl]),v0=m(Nl);return _e(5,Mp,_0,v0)}function Bl(Nl){var Gl=Nl.length,Mp=c(b(Nl));return _e(6,Gl,void 0,Mp)}function Wl(Nl){var Gl=Nl.length,Mp=c(He(Nl));return _e(8,Gl,void 0,Mp)}function Ep(Nl,Gl){var Mp=Nl.length,_0=c([Gl]),v0=c(ue(Nl,Gl));return _e(9,Mp,_0,v0)}function Lp(Nl,Gl){var Mp=Nl.length,_0=c([Gl]),v0=y(lt(Nl,Gl));return _e(10,Mp,_0,v0)}function Op(Nl){var Gl={};return cm.forEach(function(Mp){Nl[Mp]!==void 0&&(Gl[Mp]=Nl[Mp])}),Nl.bondAtomList&&(Gl.bondAtomList=_s(Nl.bondAtomList)),Nl.bondOrderList&&(Gl.bondOrderList=pr(Nl.bondOrderList)),Gl.xCoordList=Lp(Nl.xCoordList,1e3),Gl.yCoordList=Lp(Nl.yCoordList,1e3),Gl.zCoordList=Lp(Nl.zCoordList,1e3),Nl.bFactorList&&(Gl.bFactorList=Lp(Nl.bFactorList,100)),Nl.atomIdList&&(Gl.atomIdList=Wl(Nl.atomIdList)),Nl.altLocList&&(Gl.altLocList=Bl(Nl.altLocList)),Nl.occupancyList&&(Gl.occupancyList=Ep(Nl.occupancyList,100)),Gl.groupIdList=Wl(Nl.groupIdList),Gl.groupTypeList=_s(Nl.groupTypeList),Nl.secStructList&&(Gl.secStructList=pr(Nl.secStructList)),Nl.insCodeList&&(Gl.insCodeList=Bl(Nl.insCodeList)),Nl.sequenceIndexList&&(Gl.sequenceIndexList=Wl(Nl.sequenceIndexList)),Gl.chainIdList=Ei(Nl.chainIdList,4),Nl.chainNameList&&(Gl.chainNameList=Ei(Nl.chainNameList,4)),Gl}function R0(Nl){function Gl(u0){for(var x0={},Xl=0;u0>Xl;Xl++){var Bp=z0();x0[Bp]=z0()}return x0}function Mp(u0){var x0=Nl.subarray(sm,sm+u0);return sm+=u0,x0}function _0(u0){var x0=Nl.subarray(sm,sm+u0);sm+=u0;var Xl=65535;if(u0>Xl){for(var Bp=[],L0=0;L0<x0.length;L0+=Xl)Bp.push(String.fromCharCode.apply(null,x0.subarray(L0,L0+Xl)));return Bp.join("")}return String.fromCharCode.apply(null,x0)}function v0(u0){for(var x0=new Array(u0),Xl=0;u0>Xl;Xl++)x0[Xl]=z0();return x0}function z0(){var u0,x0,Xl=Nl[sm];if(!(128&Xl))return sm++,Xl;if((240&Xl)===128)return x0=15&Xl,sm++,Gl(x0);if((240&Xl)===144)return x0=15&Xl,sm++,v0(x0);if((224&Xl)===160)return x0=31&Xl,sm++,_0(x0);if((224&Xl)===224)return u0=Uo.getInt8(sm),sm++,u0;switch(Xl){case 192:return sm++,null;case 194:return sm++,!1;case 195:return sm++,!0;case 196:return x0=Uo.getUint8(sm+1),sm+=2,Mp(x0);case 197:return x0=Uo.getUint16(sm+1),sm+=3,Mp(x0);case 198:return x0=Uo.getUint32(sm+1),sm+=5,Mp(x0);case 202:return u0=Uo.getFloat32(sm+1),sm+=5,u0;case 203:return u0=Uo.getFloat64(sm+1),sm+=9,u0;case 204:return u0=Nl[sm+1],sm+=2,u0;case 205:return u0=Uo.getUint16(sm+1),sm+=3,u0;case 206:return u0=Uo.getUint32(sm+1),sm+=5,u0;case 208:return u0=Uo.getInt8(sm+1),sm+=2,u0;case 209:return u0=Uo.getInt16(sm+1),sm+=3,u0;case 210:return u0=Uo.getInt32(sm+1),sm+=5,u0;case 217:return x0=Uo.getUint8(sm+1),sm+=2,_0(x0);case 218:return x0=Uo.getUint16(sm+1),sm+=3,_0(x0);case 219:return x0=Uo.getUint32(sm+1),sm+=5,_0(x0);case 220:return x0=Uo.getUint16(sm+1),sm+=3,v0(x0);case 221:return x0=Uo.getUint32(sm+1),sm+=5,v0(x0);case 222:return x0=Uo.getUint16(sm+1),sm+=3,Gl(x0);case 223:return x0=Uo.getUint32(sm+1),sm+=5,Gl(x0)}throw new Error("Unknown type 0x"+Xl.toString(16))}var sm=0,Uo=new DataView(Nl.buffer);return z0()}function N0(Nl,Gl,Mp,_0){switch(Nl){case 1:return L(Gl);case 2:return w(Gl);case 3:return I(Gl);case 4:return l(Gl);case 5:return m(Gl);case 6:return $(l(Gl),new Uint8Array(Mp));case 7:return $(l(Gl));case 8:return ae(l(Gl));case 9:return Pe(l(Gl),l(_0)[0]);case 10:return it(I(Gl),l(_0)[0]);case 11:return R(I(Gl),l(_0)[0]);case 12:return Ze(I(Gl),l(_0)[0]);case 13:return Ze(w(Gl),l(_0)[0]);case 14:return J(I(Gl));case 15:return J(w(Gl))}}function Qp(Nl,Gl){Gl=Gl||{};var Mp=Gl.ignoreFields,_0={};return Io.forEach(function(v0){var z0=Mp?Mp.indexOf(v0)!==-1:!1,sm=Nl[v0];z0||sm===void 0||(sm instanceof Uint8Array?_0[v0]=N0.apply(null,Vt(sm)):_0[v0]=sm)}),_0}function O0(Nl){return String.fromCharCode.apply(null,Nl).replace(/\0/g,"")}function zp(Nl,Gl,Mp){Mp=Mp||{};var _0,v0,z0,sm,Uo,u0,x0=Mp.firstModelOnly,Xl=Gl.onModel,Bp=Gl.onChain,L0=Gl.onGroup,kl=Gl.onAtom,Np=Gl.onBond,V0=0,Ke=0,g0=0,d0=0,Vl=0,jp=-1,K0=Nl.chainNameList,Pm=Nl.secStructList,Cm=Nl.insCodeList,Fm=Nl.sequenceIndexList,ev=Nl.atomIdList,h1=Nl.bFactorList,xv=Nl.altLocList,gv=Nl.occupancyList,zv=Nl.bondAtomList,a1=Nl.bondOrderList;for(_0=0,v0=Nl.chainsPerModel.length;v0>_0&&!(x0&&V0>0);++_0){var Jv=Nl.chainsPerModel[V0];for(Xl&&Xl({chainCount:Jv,modelIndex:V0}),z0=0;Jv>z0;++z0){var d1=Nl.groupsPerChain[Ke];if(Bp){var A1=O0(Nl.chainIdList.subarray(4*Ke,4*Ke+4)),Zv=null;K0&&(Zv=O0(K0.subarray(4*Ke,4*Ke+4))),Bp({groupCount:d1,chainIndex:Ke,modelIndex:V0,chainId:A1,chainName:Zv})}for(sm=0;d1>sm;++sm){var u1=Nl.groupList[Nl.groupTypeList[g0]],Yp=u1.atomNameList.length;if(L0){var nm=null;Pm&&(nm=Pm[g0]);var dm=null;Nl.insCodeList&&(dm=String.fromCharCode(Cm[g0]));var o0=null;Fm&&(o0=Fm[g0]),L0({atomCount:Yp,groupIndex:g0,chainIndex:Ke,modelIndex:V0,groupId:Nl.groupIdList[g0],groupType:Nl.groupTypeList[g0],groupName:u1.groupName,singleLetterCode:u1.singleLetterCode,chemCompType:u1.chemCompType,secStruct:nm,insCode:dm,sequenceIndex:o0})}for(Uo=0;Yp>Uo;++Uo){if(kl){var pm=null;ev&&(pm=ev[d0]);var jm=null;h1&&(jm=h1[d0]);var iv=null;xv&&(iv=String.fromCharCode(xv[d0]));var ov=null;gv&&(ov=gv[d0]),kl({atomIndex:d0,groupIndex:g0,chainIndex:Ke,modelIndex:V0,atomId:pm,element:u1.elementList[Uo],atomName:u1.atomNameList[Uo],formalCharge:u1.formalChargeList[Uo],xCoord:Nl.xCoordList[d0],yCoord:Nl.yCoordList[d0],zCoord:Nl.zCoordList[d0],bFactor:jm,altLoc:iv,occupancy:ov})}d0+=1}if(Np){var dv=u1.bondAtomList;for(Uo=0,u0=u1.bondOrderList.length;u0>Uo;++Uo)Np({atomIndex1:d0-Yp+dv[2*Uo],atomIndex2:d0-Yp+dv[2*Uo+1],bondOrder:u1.bondOrderList[Uo]})}g0+=1}Ke+=1}if(Vl=jp+1,jp=d0-1,Np&&zv)for(Uo=0,u0=zv.length;u0>Uo;Uo+=2){var cv=zv[Uo],Cv=zv[Uo+1];(cv>=Vl&&jp>=cv||Cv>=Vl&&jp>=Cv)&&Np({atomIndex1:cv,atomIndex2:Cv,bondOrder:a1?a1[Uo/2]:null})}V0+=1}}function M0(Nl){return u(Op(Nl))}function W0(Nl,Gl){Nl instanceof ArrayBuffer&&(Nl=new Uint8Array(Nl));var Mp;return Mp=Nl instanceof Uint8Array?R0(Nl):Nl,Qp(Mp,Gl)}function im(Nl,Gl,Mp,_0){function v0(){try{var sm=W0(z0.response);Mp(sm)}catch(Uo){_0(Uo)}}var z0=new XMLHttpRequest;z0.addEventListener("load",v0,!0),z0.addEventListener("error",_0,!0),z0.responseType="arraybuffer",z0.open("GET",Gl+Nl.toUpperCase()),z0.send()}function F0(Nl,Gl,Mp){im(Nl,rm,Gl,Mp)}function fm(Nl,Gl,Mp){im(Nl,X0,Gl,Mp)}var cm=["mmtfVersion","mmtfProducer","unitCell","spaceGroup","structureId","title","depositionDate","releaseDate","experimentalMethods","resolution","rFree","rWork","bioAssemblyList","ncsOperatorList","entityList","groupList","numBonds","numAtoms","numGroups","numChains","numModels","groupsPerChain","chainsPerModel"],Ap=["xCoordList","yCoordList","zCoordList","groupIdList","groupTypeList","chainIdList","bFactorList","atomIdList","altLocList","occupancyList","secStructList","insCodeList","sequenceIndexList","chainNameList","bondAtomList","bondOrderList"],Io=cm.concat(Ap),p0="v1.0.1",a0="//mmtf.rcsb.org/v1.0/",rm=a0+"full/",X0=a0+"reduced/";t.encode=M0,t.decode=W0,t.traverse=zp,t.fetch=F0,t.fetchReduced=fm,t.version=p0,t.fetchUrl=rm,t.fetchReducedUrl=X0,t.encodeMsgpack=u,t.encodeMmtf=Op,t.decodeMsgpack=R0,t.decodeMmtf=Qp})})},__webpack_module_cache__={};function __webpack_require__(r){var e=__webpack_module_cache__[r];if(e!==void 0)return e.exports;var t=__webpack_module_cache__[r]={exports:{}};return __webpack_modules__[r].call(t.exports,t,t.exports,__webpack_require__),t.exports}__webpack_require__.n=r=>{var e=r&&r.__esModule?(()=>r.default):(()=>r);return __webpack_require__.d(e,{a:e}),e},__webpack_require__.d=(r,e)=>{for(var t in e)__webpack_require__.o(e,t)&&!__webpack_require__.o(r,t)&&Object.defineProperty(r,t,{enumerable:!0,get:e[t]})},__webpack_require__.o=(r,e)=>Object.prototype.hasOwnProperty.call(r,e),__webpack_require__.r=r=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},__webpack_require__("./src/index.ts"),__webpack_require__("./src/SurfaceWorker.js");var __webpack_exports__=__webpack_require__("./src/exporter.js");return __webpack_exports__})())})(_3Dmol);var _3DmolExports=_3Dmol.exports;const covalentRadii={H:.31,He:.28,Li:1.28,Be:.96,B:.84,C:.76,N:.71,O:.66,F:.57,Ne:.58,Na:1.66,Mg:1.41,Al:1.21,Si:1.11,P:1.07,S:1.05,Cl:1.02,Ar:1.06,K:2.03,Ca:1.76,Sc:1.7,Ti:1.6,V:1.53,Cr:1.39,Mn:1.61,Fe:1.52,Co:1.5,Ni:1.24,Cu:1.32,Zn:1.22,Ga:1.22,Ge:1.2,As:1.19,Se:1.2,Br:1.2,Kr:1.16,Rb:2.2,Sr:1.95,Y:1.9,Zr:1.75,Nb:1.64,Mo:1.54,Tc:1.47,Ru:1.46,Rh:1.42,Pd:1.39,Ag:1.45,Cd:1.44,In:1.42,Sn:1.39,Sb:1.39,Te:1.38,I:1.39,Xe:1.4,Cs:2.44,Ba:2.15,La:2.07,Ce:2.04,Pr:2.03,Nd:2.01,Pm:1.99,Sm:1.98,Eu:1.98,Gd:1.96,Tb:1.94,Dy:1.92,Ho:1.92,Er:1.89,Tm:1.9,Yb:1.87,Lu:1.75,Hf:1.87,Ta:1.7,W:1.62,Re:1.51,Os:1.44,Ir:1.41,Pt:1.36,Au:1.36,Hg:1.32,Tl:1.45,Pb:1.46,Bi:1.48,Po:1.4,At:1.5,Rn:1.5,Fr:2.6,Ra:2.21,Ac:2.15,Th:2.06,Pa:2,U:1.96,Np:1.9,Pu:1.87,Am:1.8,Cm:1.69};function mod(r,e){return(r%e+e)%e}function setCustomBondLengths(){function r(e,t){_3DmolExports.setBondLength(e,t)}Object.keys(covalentRadii).forEach(e=>{r(e,1.05*covalentRadii[e])})}const Visualizer3dmol=reactExports.forwardRef(({viewerParams:r,cifText:e},t)=>{const a=reactExports.useRef(null),s=reactExports.useRef(null),o=reactExports.useRef("gldiv-"+(Math.random()+1).toString(36).substring(7));reactExports.useEffect(()=>{setCustomBondLengths()},[]);const f=()=>{if(s.current=a.current.addModel(),e){let x=_3DmolExports.Parsers.CIF(e),m=x[0],w=x.modelData[0].cryst;s.current.setCrystData(w.a,w.b,w.c,w.alpha,w.beta,w.gamma);let A=s.current.modelData.cryst.matrix,D=new _3DmolExports.Matrix3().getInverse3(A),I=[],y=[];m.forEach(L=>{let R=new _3DmolExports.Vector3(L.x,L.y,L.z);if(r.packedCell){let F=R.clone().applyMatrix3(D);R=new _3DmolExports.Vector3(mod(F.x,1),mod(F.y,1),mod(F.z,1)).applyMatrix3(A)}y.push({elem:L.elem,x:R.x,y:R.y,z:R.z})});let l=.03,c=r.supercell;for(let L=-1;L<c[0]+1;L++)for(let R=-1;R<c[1]+1;R++)for(let F=-1;F<c[2]+1;F++){let $=new _3DmolExports.Vector3(L,R,F);if($.applyMatrix3(A),L==-1||L==c[0]||R==-1||R==c[1]||F==-1||F==c[2])if(r.packedCell)y.forEach(b=>{let k=new _3DmolExports.Vector3(b.x,b.y,b.z);k.add($);let B=k.clone().applyMatrix3(D);B.x>-l&&B.x<c[0]+l&&B.y>-l&&B.y<c[1]+l&&B.z>-l&&B.z<c[2]+l&&I.push({elem:b.elem,x:k.x,y:k.y,z:k.z})});else continue;else y.forEach(b=>{I.push({elem:b.elem,x:b.x+$.x,y:b.y+$.y,z:b.z+$.z})})}s.current.addAtoms(I)}},u=()=>{a.current.removeAllModels(),f();let x={sphere:{scale:.3,colorscheme:"Jmol"}};r.vdwRadius&&(x.sphere.scale=1),r.bonds&&(x.stick={radius:.15,colorscheme:"Jmol"}),a.current.setStyle(x),a.current.addUnitCell(s.current),s.current.assignBonds(),a.current.removeAllLabels(),r.atomLabels&&s.current.atoms.forEach(m=>{a.current.addLabel(m.elem,{position:{x:m.x,y:m.y,z:m.z},fontColor:"black",bold:!0,fontSize:18,showBackground:!1,backgroundOpacity:1,inFront:!0},null,!0)}),a.current.zoomTo(),a.current.zoom(1.4),a.current.render()},h=(x,m)=>{x=="camera"&&(m=="x"&&a.current.setView([0,0,0,0,-.5,-.5,-.5,.5]),m=="y"&&a.current.setView([0,0,0,0,.5,.5,.5,.5]),m=="z"&&a.current.setView([0,0,0,0,0,0,0,1]),a.current.zoomTo(),a.current.zoom(1.4))};return reactExports.useImperativeHandle(t,()=>({handleEvent:h})),reactExports.useEffect(()=>{let x={backgroundColor:"white",orthographic:!0};a.current=_3DmolExports.createViewer(o.current,x),u()},[]),reactExports.useEffect(()=>{a.current&&u()},[r,e]),jsxRuntimeExports.jsx("div",{id:o.current,className:"gldiv",children:"No data!"})});Visualizer3dmol.displayName="Visualizer3dmol";const StructureWindow=({mouseEnabled:r,setMouseEnabledState:e,visualizerRef:t,viewerParams:a,cifText:s})=>{let o="structure-window";r||(o+=" disable-mouse");let f="Click to interact",u="mouse-disabled-note";return r&&(u="mouse-disabled-note on"),jsxRuntimeExports.jsxs("div",{className:"structure-window-outer",children:[jsxRuntimeExports.jsx("div",{className:"structure-window-click-handler",onClick:()=>e(!0),children:jsxRuntimeExports.jsx("div",{className:o,children:jsxRuntimeExports.jsx(Visualizer3dmol,{ref:t,viewerParams:a,cifText:s})})}),jsxRuntimeExports.jsx("div",{className:u,onClick:()=>e(!r),children:f})]})},StructureVisualizer=r=>{const[e,t]=reactExports.useState({supercell:r.initSupercell||[2,2,2],bonds:!0,packedCell:!0,atomLabels:!1,vdwRadius:!1}),[a,s]=reactExports.useState(!1),o=reactExports.useRef(null),f=reactExports.useRef(null);reactExports.useEffect(()=>{const m=w=>{f&&!f.current.contains(w.target)&&s(!1)};return document.addEventListener("mousedown",m),()=>{document.removeEventListener("mousedown",m)}},[]);const u=m=>{s(m)},h=(m,w)=>{t(A=>({...A,[m]:w}))},x=(m,w)=>{o.current.handleEvent(m,w)};return jsxRuntimeExports.jsxs("div",{ref:f,className:"structure-visualizer",children:[jsxRuntimeExports.jsx(StructureWindow,{visualizerRef:o,viewerParams:e,cifText:r.cifText,mouseEnabled:a,setMouseEnabledState:u}),jsxRuntimeExports.jsx(ControlBox,{viewerParams:e,onViewerParamChange:h,onViewerEvent:x})]})},defaultFormats=[{format:"cif",label:"CIF"},{format:"xsf",label:"XSF"},{format:"xyz",label:"XYZ"}];function StructDownloadButton(r){const e=`${r.aiida_rest_url}/nodes/${r.uuid}/download`,t=r.download_formats||defaultFormats,[a,s]=reactExports.useState(!1),o=reactExports.useRef(null);return reactExports.useEffect(()=>{function f(u){o.current&&!o.current.contains(u.target)&&s(!1)}return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[]),jsxRuntimeExports$1.jsxs("div",{ref:o,className:"download-wrapper",children:[jsxRuntimeExports$1.jsx("button",{type:"button",className:"download-button",title:"Download",onClick:()=>s(!a),children:jsxRuntimeExports$1.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",children:[jsxRuntimeExports$1.jsx("path",{d:"M12 15V3"}),jsxRuntimeExports$1.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),jsxRuntimeExports$1.jsx("path",{d:"m7 10 5 5 5-5"})]})}),a&&jsxRuntimeExports$1.jsx("div",{className:"download-menu-container",children:jsxRuntimeExports$1.jsx("ul",{className:"download-menu",children:t.map(({format:f,label:u})=>jsxRuntimeExports$1.jsx("li",{children:jsxRuntimeExports$1.jsx("a",{href:`${e}?download_format=${f}`,children:u})},f))})})]})}function getVol(r,e=4){const t=(o,f)=>[o[1]*f[2]-o[2]*f[1],o[2]*f[0]-o[0]*f[2],o[0]*f[1]-o[1]*f[0]],a=r.attributes.cell,s=Math.abs(a[0].reduce((o,f,u)=>o+f*t(a[1],a[2])[u],0));return parseFloat(s.toFixed(e))}function formatLattice(r){const e=r.attributes.cell,t=Math.hypot(...e[0]),a=Math.hypot(...e[1]),s=Math.hypot(...e[2]);return{a:t,b:a,c:s}}function StructureDataVisualiser({nodeData:r,restApiUrl:e}){const t=r.downloadByFormat?.cif,[a,s]=reactExports.useState(null),[o,f]=reactExports.useState(!0),[u,h]=reactExports.useState(null),[x,m]=reactExports.useState(!1),w=reactExports.useRef(null);reactExports.useEffect(()=>{const L=new ResizeObserver(([R])=>{m(R.contentRect.width<600)});return w.current&&L.observe(w.current),()=>L.disconnect()},[]);const A=reactExports.useCallback(async()=>{if(!t){h("No CIF file available"),f(!1);return}f(!0),h(null);try{const L=await fetch(t);if(!L.ok)throw new Error(`HTTP error: ${L.status}`);const R=await L.text();s(R)}catch(L){h(L.message)}finally{f(!1)}},[t]);reactExports.useEffect(()=>{A()},[A]);const D=r.label==="CifData"?[{format:"cif",label:"CIF"}]:[{format:"cif",label:"CIF"},{format:"xsf",label:"XSF"},{format:"xyz",label:"XYZ"}],I=r.derived_properties&&Object.keys(r.derived_properties).length>0,y=r.attributes?.cell?formatLattice(r):null,l=I?r.derived_properties.dimensionality?.value:y?getVol(r):null,c=r.attributes?.sites?.length||0;return jsxRuntimeExports$1.jsx("div",{className:"w-full mx-auto p-4 space-y-6",children:jsxRuntimeExports$1.jsxs("div",{ref:w,className:`grid gap-4 ${x?"grid-cols-1":"grid-cols-[1fr_auto]"}`,children:[jsxRuntimeExports$1.jsxs("div",{className:"w-full h-[500px] relative bg-theme-100 shadow-sm overflow-hidden",children:[jsxRuntimeExports$1.jsx("div",{className:"absolute top-4 right-4 z-50",children:jsxRuntimeExports$1.jsx(StructDownloadButton,{aiida_rest_url:e,uuid:r.aiida.uuid,download_formats:D})}),jsxRuntimeExports$1.jsx("div",{className:"w-full h-full",children:jsxRuntimeExports$1.jsx(StructureVisualizer,{cifText:a,initSupercell:[2,2,2]})})]}),jsxRuntimeExports$1.jsx("div",{className:"flex flex-col space-y-4 max-w-xs",children:I&&jsxRuntimeExports$1.jsxs(jsxRuntimeExports$1.Fragment,{children:[jsxRuntimeExports$1.jsxs(CardContainer,{children:[jsxRuntimeExports$1.jsxs("p",{children:[jsxRuntimeExports$1.jsx("span",{className:"font-medium",children:"Cell Volume:"})," ",l?.toFixed(4)," Å³"]}),jsxRuntimeExports$1.jsxs("p",{children:[jsxRuntimeExports$1.jsx("span",{className:"font-medium",children:"Formula:"})," ",r.derived_properties.formula]}),jsxRuntimeExports$1.jsxs("p",{children:[jsxRuntimeExports$1.jsx("span",{className:"font-medium",children:"Dimensionality:"})," ",r.derived_properties.dimensionality?.description||"N/A"]})]}),y&&jsxRuntimeExports$1.jsxs(CardContainer,{children:[jsxRuntimeExports$1.jsxs("p",{children:[jsxRuntimeExports$1.jsx("span",{className:"font-medium",children:"Lattice a:"})," ",y.a.toFixed(4)," Å"]}),jsxRuntimeExports$1.jsxs("p",{children:[jsxRuntimeExports$1.jsx("span",{className:"font-medium",children:"Lattice b:"})," ",y.b.toFixed(4)," Å"]}),jsxRuntimeExports$1.jsxs("p",{children:[jsxRuntimeExports$1.jsx("span",{className:"font-medium",children:"Lattice c:"})," ",y.c.toFixed(4)," Å"]}),jsxRuntimeExports$1.jsxs("p",{children:[jsxRuntimeExports$1.jsx("span",{className:"font-medium",children:"Number of Sites:"})," ",c]})]})]})})]})})}function SimplePlot({data:r,layout:e,config:t={},style:a={width:"100%",height:"400"}}){const s=reactExports.useRef(null),o=reactExports.useMemo(()=>r,[JSON.stringify(r)]),f=reactExports.useMemo(()=>e,[JSON.stringify(e)]),u=reactExports.useMemo(()=>t,[JSON.stringify(t)]);return reactExports.useEffect(()=>{const h=s.current;if(!h)return;const x=o.length;let m=0;o.forEach(A=>{m+=(A.x?.length||0)+(A.y?.length||0)+(A.z?.length||0)}),console.debug(`Rendering ${x} traces with ~${m} data points`);const w=performance.now();Plotly.newPlot(h,o,f,{responsive:!0,...u}).then(()=>{const A=performance.now();console.log(`Plotly rendering took ${(A-w).toFixed(2)} ms for ${x} traces (~${m} points)`)})},[o,f,u]),jsxRuntimeExports$1.jsx("div",{ref:s,style:a})}function getRadialFunctionsTraces(r){return!r||!r.atomic_wave_functions||!r.radial_grid?[]:r.atomic_wave_functions.map(t=>{const a=t.label??"",s=t.angular_momentum!=null?`(ℓ=${t.angular_momentum}`:"",o=t.occupation!=null?`, occ=${t.occupation})`:t.angular_momentum!=null?")":"";return{x:r.radial_grid,y:t.radial_function,type:"scatter",mode:"lines",name:`${a} ${s}${o}`}})}function getBetaProjectorsTraces(r){return!r||!r.beta_projectors||!r.radial_grid?[]:r.beta_projectors.map(t=>{const a=t.label??"",s=t.angular_momentum!=null?`(ℓ=${t.angular_momentum}`:"",o=t.ultrasoft_cutoff_radius!=null?`, cutoff=${t.ultrasoft_cutoff_radius})`:t.angular_momentum!=null?")":"";return{x:r.radial_grid,y:t.radial_function,type:"scatter",mode:"lines",name:`${a} ${s}${o}`}})}function getChargeDensitiesTraces(r){if(!r||!r.radial_grid)return[];const e={x:r.radial_grid,y:r.total_charge_density,type:"scatter",mode:"lines",name:"Valence Pseudocharge density"};return[{x:r.radial_grid,y:r.core_charge_density,type:"scatter",mode:"lines",name:"Core Pseudocharge density"},e].filter(a=>Array.isArray(a.y)&&a.y.length>0)}function UpfDataVisualiser({nodeData:r}){const[e,t]=reactExports.useState(!0),[a,s]=reactExports.useState(null),[o,f]=reactExports.useState(null),u=r.downloadByFormat?.json,h=reactExports.useMemo(()=>getRadialFunctionsTraces(o),[o]),x=reactExports.useMemo(()=>getBetaProjectorsTraces(o),[o]),m=reactExports.useMemo(()=>getChargeDensitiesTraces(o),[o]),w=reactExports.useCallback(async()=>{if(!u){s("No JSON path available"),t(!1);return}t(!0),s(null);try{const l=await fetch(u);if(!l.ok)throw new Error(`HTTP ${l.status}`);const c=await l.json();f(c.pseudo_potential)}catch(l){console.error("Failed to fetch UPF JSON:",l),s(l.message||"Failed to load UPF data")}finally{t(!1)}},[u]);if(reactExports.useEffect(()=>{w()},[w]),e)return jsxRuntimeExports$1.jsx("div",{className:"w-full min-h-[450px] flex items-center justify-center",children:jsxRuntimeExports$1.jsx(Spinner,{})});if(a)return jsxRuntimeExports$1.jsx("div",{className:"w-full min-h-[450px] flex items-center justify-center",children:jsxRuntimeExports$1.jsx(ErrorDisplay,{message:a,onRetry:w})});if(!o)return null;const{header:A,radial_grid:D}=o,I={x:.97,y:.95,xanchor:"right",yanchor:"top",bordercolor:"#ccc",borderwidth:1},y={t:20,b:40,l:50,r:20};return jsxRuntimeExports$1.jsxs("div",{className:"w-full mx-auto p-4 space-y-6",children:[jsxRuntimeExports$1.jsxs(CardContainer,{header:"Metadata",children:[jsxRuntimeExports$1.jsxs("p",{children:[jsxRuntimeExports$1.jsx("span",{className:"font-medium",children:"Element:"})," ",A?.element||"N/A"]}),jsxRuntimeExports$1.jsxs("p",{children:[jsxRuntimeExports$1.jsx("span",{className:"font-medium",children:"Valence Electrons:"})," ",A?.z_valence??"N/A"]}),jsxRuntimeExports$1.jsxs("p",{children:[jsxRuntimeExports$1.jsx("span",{className:"font-medium",children:"Pseudopotential Type:"})," ",A?.pseudo_type||"N/A"]}),jsxRuntimeExports$1.jsxs("p",{children:[jsxRuntimeExports$1.jsx("span",{className:"font-medium",children:"Functional:"})," ",A?.functional||"N/A"]})]}),jsxRuntimeExports$1.jsx(CardContainer,{header:"Orbital radial functions",className:"!px-1.5 !py-2",childrenClassName:"!p-0",children:jsxRuntimeExports$1.jsx(SimplePlot,{data:h,layout:{autosize:!0,height:400,margin:y,xaxis:{title:{text:"Radius (Bohr)"},range:[0,20]},yaxis:{title:{text:"φ(r)"}},legend:I},config:{responsive:!0},useResizeHandler:!0,style:{width:"100%",height:400}})}),jsxRuntimeExports$1.jsx(CardContainer,{header:"Beta projectors",className:"!px-1.5 !py-2",childrenClassName:"!p-0",children:jsxRuntimeExports$1.jsx(SimplePlot,{data:x,layout:{autosize:!0,height:400,margin:y,xaxis:{title:{text:"Radius (Bohr)"}},yaxis:{title:{text:"φ(r)"}},legend:I},config:{responsive:!0}})}),jsxRuntimeExports$1.jsx(CardContainer,{header:"Charge densities",className:"!px-1.5 !py-2",childrenClassName:"!p-0",children:jsxRuntimeExports$1.jsx(SimplePlot,{data:m,layout:{autosize:!0,height:400,margin:y,xaxis:{title:{text:"Radius (Bohr)"},range:[0,5]},yaxis:{title:{text:"φ(r)"}},legend:I},config:{responsive:!0},useResizeHandler:!0,style:{width:"100%",height:"100%"}})})]})}/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const os="162",Dn={ROTATE:0,DOLLY:1,PAN:2},Un={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},No=0,Ms=1,Fo=2,Qa=1,Oo=2,jt=3,hn=0,Et=1,Gt=2,ln=0,Qn=1,Ss=2,Es=3,ys=4,Bo=5,Tn=100,zo=101,Go=102,Ts=103,bs=104,Ho=200,Vo=201,ko=202,Wo=203,Jr=204,Qr=205,Xo=206,Yo=207,qo=208,jo=209,Ko=210,Zo=211,$o=212,Jo=213,Qo=214,el=0,tl=1,nl=2,Qi=3,il=4,rl=5,sl=6,al=7,eo=0,ol=1,ll=2,cn=0,cl=1,ul=2,hl=3,fl=4,dl=5,pl=6,ml=7,to=300,ii=301,ri=302,es=303,ts=304,lr=306,ns=1e3,Nt=1001,is=1002,xt=1003,As=1004,ui=1005,St=1006,gr=1007,An=1008,un=1009,_l=1010,gl=1011,ls=1012,no=1013,on=1014,Kt=1015,_i=1016,io=1017,ro=1018,wn=1020,vl=1021,Ft=1023,xl=1024,Ml=1025,Rn=1026,si=1027,Sl=1028,so=1029,El=1030,ao=1031,oo=1033,vr=33776,xr=33777,Mr=33778,Sr=33779,ws=35840,Rs=35841,Cs=35842,Ps=35843,lo=36196,Ls=37492,Ds=37496,Us=37808,Is=37809,Ns=37810,Fs=37811,Os=37812,Bs=37813,zs=37814,Gs=37815,Hs=37816,Vs=37817,ks=37818,Ws=37819,Xs=37820,Ys=37821,Er=36492,qs=36494,js=36495,yl=36283,Ks=36284,Zs=36285,$s=36286,Tl=3200,bl=3201,Al=0,wl=1,an="",Bt="srgb",dn="srgb-linear",cs="display-p3",cr="display-p3-linear",er="linear",$e="srgb",tr="rec709",nr="p3",In=7680,Js=519,Rl=512,Cl=513,Pl=514,co=515,Ll=516,Dl=517,Ul=518,Il=519,Qs=35044,ea="300 es",rs=1035,Zt=2e3,ir=2001;class Ln{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const a=this._listeners;a[e]===void 0&&(a[e]=[]),a[e].indexOf(t)===-1&&a[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const a=this._listeners;return a[e]!==void 0&&a[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const a=this._listeners[e];if(a!==void 0){const s=a.indexOf(t);s!==-1&&a.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const t=this._listeners[e.type];if(t!==void 0){e.target=this;const a=t.slice(0);for(let s=0,o=a.length;s<o;s++)a[s].call(this,e);e.target=null}}}const pt=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],ei=Math.PI/180,gi=180/Math.PI;function oi(){const r=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,a=Math.random()*4294967295|0;return(pt[r&255]+pt[r>>8&255]+pt[r>>16&255]+pt[r>>24&255]+"-"+pt[e&255]+pt[e>>8&255]+"-"+pt[e>>16&15|64]+pt[e>>24&255]+"-"+pt[t&63|128]+pt[t>>8&255]+"-"+pt[t>>16&255]+pt[t>>24&255]+pt[a&255]+pt[a>>8&255]+pt[a>>16&255]+pt[a>>24&255]).toLowerCase()}function _t(r,e,t){return Math.max(e,Math.min(t,r))}function us(r,e){return(r%e+e)%e}function mi(r,e,t){return(1-t)*r+t*e}function ss(r){return(r&r-1)===0&&r!==0}function rr(r){return Math.pow(2,Math.floor(Math.log(r)/Math.LN2))}function Zn(r,e){switch(e.constructor){case Float32Array:return r;case Uint32Array:return r/4294967295;case Uint16Array:return r/65535;case Uint8Array:return r/255;case Int32Array:return Math.max(r/2147483647,-1);case Int16Array:return Math.max(r/32767,-1);case Int8Array:return Math.max(r/127,-1);default:throw new Error("Invalid component type.")}}function gt(r,e){switch(e.constructor){case Float32Array:return r;case Uint32Array:return Math.round(r*4294967295);case Uint16Array:return Math.round(r*65535);case Uint8Array:return Math.round(r*255);case Int32Array:return Math.round(r*2147483647);case Int16Array:return Math.round(r*32767);case Int8Array:return Math.round(r*127);default:throw new Error("Invalid component type.")}}const Kl={DEG2RAD:ei};class Ie{constructor(e=0,t=0){Ie.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,a=this.y,s=e.elements;return this.x=s[0]*t+s[3]*a+s[6],this.y=s[1]*t+s[4]*a+s[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const a=this.length();return this.divideScalar(a||1).multiplyScalar(Math.max(e,Math.min(t,a)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const a=this.dot(e)/t;return Math.acos(_t(a,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,a=this.y-e.y;return t*t+a*a}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,a){return this.x=e.x+(t.x-e.x)*a,this.y=e.y+(t.y-e.y)*a,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const a=Math.cos(t),s=Math.sin(t),o=this.x-e.x,f=this.y-e.y;return this.x=o*a-f*s+e.x,this.y=o*s+f*a+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Ge{constructor(e,t,a,s,o,f,u,h,x){Ge.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,a,s,o,f,u,h,x)}set(e,t,a,s,o,f,u,h,x){const m=this.elements;return m[0]=e,m[1]=s,m[2]=u,m[3]=t,m[4]=o,m[5]=h,m[6]=a,m[7]=f,m[8]=x,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,a=e.elements;return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[8]=a[8],this}extractBasis(e,t,a){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),a.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const a=e.elements,s=t.elements,o=this.elements,f=a[0],u=a[3],h=a[6],x=a[1],m=a[4],w=a[7],A=a[2],D=a[5],I=a[8],y=s[0],l=s[3],c=s[6],L=s[1],R=s[4],F=s[7],$=s[2],b=s[5],k=s[8];return o[0]=f*y+u*L+h*$,o[3]=f*l+u*R+h*b,o[6]=f*c+u*F+h*k,o[1]=x*y+m*L+w*$,o[4]=x*l+m*R+w*b,o[7]=x*c+m*F+w*k,o[2]=A*y+D*L+I*$,o[5]=A*l+D*R+I*b,o[8]=A*c+D*F+I*k,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],a=e[1],s=e[2],o=e[3],f=e[4],u=e[5],h=e[6],x=e[7],m=e[8];return t*f*m-t*u*x-a*o*m+a*u*h+s*o*x-s*f*h}invert(){const e=this.elements,t=e[0],a=e[1],s=e[2],o=e[3],f=e[4],u=e[5],h=e[6],x=e[7],m=e[8],w=m*f-u*x,A=u*h-m*o,D=x*o-f*h,I=t*w+a*A+s*D;if(I===0)return this.set(0,0,0,0,0,0,0,0,0);const y=1/I;return e[0]=w*y,e[1]=(s*x-m*a)*y,e[2]=(u*a-s*f)*y,e[3]=A*y,e[4]=(m*t-s*h)*y,e[5]=(s*o-u*t)*y,e[6]=D*y,e[7]=(a*h-x*t)*y,e[8]=(f*t-a*o)*y,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,a,s,o,f,u){const h=Math.cos(o),x=Math.sin(o);return this.set(a*h,a*x,-a*(h*f+x*u)+f+e,-s*x,s*h,-s*(-x*f+h*u)+u+t,0,0,1),this}scale(e,t){return this.premultiply(yr.makeScale(e,t)),this}rotate(e){return this.premultiply(yr.makeRotation(-e)),this}translate(e,t){return this.premultiply(yr.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),a=Math.sin(e);return this.set(t,-a,0,a,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,a=e.elements;for(let s=0;s<9;s++)if(t[s]!==a[s])return!1;return!0}fromArray(e,t=0){for(let a=0;a<9;a++)this.elements[a]=e[a+t];return this}toArray(e=[],t=0){const a=this.elements;return e[t]=a[0],e[t+1]=a[1],e[t+2]=a[2],e[t+3]=a[3],e[t+4]=a[4],e[t+5]=a[5],e[t+6]=a[6],e[t+7]=a[7],e[t+8]=a[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const yr=new Ge;function uo(r){for(let e=r.length-1;e>=0;--e)if(r[e]>=65535)return!0;return!1}function sr(r){return document.createElementNS("http://www.w3.org/1999/xhtml",r)}function Zl(){const r=sr("canvas");return r.style.display="block",r}const na={};function $l(r){r in na||(na[r]=!0,console.warn(r))}const ia=new Ge().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),ra=new Ge().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),Ti={[dn]:{transfer:er,primaries:tr,toReference:r=>r,fromReference:r=>r},[Bt]:{transfer:$e,primaries:tr,toReference:r=>r.convertSRGBToLinear(),fromReference:r=>r.convertLinearToSRGB()},[cr]:{transfer:er,primaries:nr,toReference:r=>r.applyMatrix3(ra),fromReference:r=>r.applyMatrix3(ia)},[cs]:{transfer:$e,primaries:nr,toReference:r=>r.convertSRGBToLinear().applyMatrix3(ra),fromReference:r=>r.applyMatrix3(ia).convertLinearToSRGB()}},Jl=new Set([dn,cr]),je={enabled:!0,_workingColorSpace:dn,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(r){if(!Jl.has(r))throw new Error(`Unsupported working color space, "${r}".`);this._workingColorSpace=r},convert:function(r,e,t){if(this.enabled===!1||e===t||!e||!t)return r;const a=Ti[e].toReference,s=Ti[t].fromReference;return s(a(r))},fromWorkingColorSpace:function(r,e){return this.convert(r,this._workingColorSpace,e)},toWorkingColorSpace:function(r,e){return this.convert(r,e,this._workingColorSpace)},getPrimaries:function(r){return Ti[r].primaries},getTransfer:function(r){return r===an?er:Ti[r].transfer}};function ti(r){return r<.04045?r*.0773993808:Math.pow(r*.9478672986+.0521327014,2.4)}function Tr(r){return r<.0031308?r*12.92:1.055*Math.pow(r,.41666)-.055}let Nn;class ho{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Nn===void 0&&(Nn=sr("canvas")),Nn.width=e.width,Nn.height=e.height;const a=Nn.getContext("2d");e instanceof ImageData?a.putImageData(e,0,0):a.drawImage(e,0,0,e.width,e.height),t=Nn}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=sr("canvas");t.width=e.width,t.height=e.height;const a=t.getContext("2d");a.drawImage(e,0,0,e.width,e.height);const s=a.getImageData(0,0,e.width,e.height),o=s.data;for(let f=0;f<o.length;f++)o[f]=ti(o[f]/255)*255;return a.putImageData(s,0,0),t}else if(e.data){const t=e.data.slice(0);for(let a=0;a<t.length;a++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[a]=Math.floor(ti(t[a]/255)*255):t[a]=ti(t[a]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let Ql=0;class fo{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Ql++}),this.uuid=oi(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const a={uuid:this.uuid,url:""},s=this.data;if(s!==null){let o;if(Array.isArray(s)){o=[];for(let f=0,u=s.length;f<u;f++)s[f].isDataTexture?o.push(br(s[f].image)):o.push(br(s[f]))}else o=br(s);a.url=o}return t||(e.images[this.uuid]=a),a}}function br(r){return typeof HTMLImageElement<"u"&&r instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&r instanceof ImageBitmap?ho.getDataURL(r):r.data?{data:Array.from(r.data),width:r.width,height:r.height,type:r.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let ec=0;class yt extends Ln{constructor(e=yt.DEFAULT_IMAGE,t=yt.DEFAULT_MAPPING,a=Nt,s=Nt,o=St,f=An,u=Ft,h=un,x=yt.DEFAULT_ANISOTROPY,m=an){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:ec++}),this.uuid=oi(),this.name="",this.source=new fo(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=a,this.wrapT=s,this.magFilter=o,this.minFilter=f,this.anisotropy=x,this.format=u,this.internalFormat=null,this.type=h,this.offset=new Ie(0,0),this.repeat=new Ie(1,1),this.center=new Ie(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Ge,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=m,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const a={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(a.userData=this.userData),t||(e.textures[this.uuid]=a),a}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==to)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case ns:e.x=e.x-Math.floor(e.x);break;case Nt:e.x=e.x<0?0:1;break;case is:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case ns:e.y=e.y-Math.floor(e.y);break;case Nt:e.y=e.y<0?0:1;break;case is:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}}yt.DEFAULT_IMAGE=null;yt.DEFAULT_MAPPING=to;yt.DEFAULT_ANISOTROPY=1;class ht{constructor(e=0,t=0,a=0,s=1){ht.prototype.isVector4=!0,this.x=e,this.y=t,this.z=a,this.w=s}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,a,s){return this.x=e,this.y=t,this.z=a,this.w=s,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,a=this.y,s=this.z,o=this.w,f=e.elements;return this.x=f[0]*t+f[4]*a+f[8]*s+f[12]*o,this.y=f[1]*t+f[5]*a+f[9]*s+f[13]*o,this.z=f[2]*t+f[6]*a+f[10]*s+f[14]*o,this.w=f[3]*t+f[7]*a+f[11]*s+f[15]*o,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,a,s,o;const f=e.elements,u=f[0],h=f[4],x=f[8],m=f[1],w=f[5],A=f[9],D=f[2],I=f[6],y=f[10];if(Math.abs(h-m)<.01&&Math.abs(x-D)<.01&&Math.abs(A-I)<.01){if(Math.abs(h+m)<.1&&Math.abs(x+D)<.1&&Math.abs(A+I)<.1&&Math.abs(u+w+y-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const c=(u+1)/2,L=(w+1)/2,R=(y+1)/2,F=(h+m)/4,$=(x+D)/4,b=(A+I)/4;return c>L&&c>R?c<.01?(a=0,s=.707106781,o=.707106781):(a=Math.sqrt(c),s=F/a,o=$/a):L>R?L<.01?(a=.707106781,s=0,o=.707106781):(s=Math.sqrt(L),a=F/s,o=b/s):R<.01?(a=.707106781,s=.707106781,o=0):(o=Math.sqrt(R),a=$/o,s=b/o),this.set(a,s,o,t),this}let l=Math.sqrt((I-A)*(I-A)+(x-D)*(x-D)+(m-h)*(m-h));return Math.abs(l)<.001&&(l=1),this.x=(I-A)/l,this.y=(x-D)/l,this.z=(m-h)/l,this.w=Math.acos((u+w+y-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const a=this.length();return this.divideScalar(a||1).multiplyScalar(Math.max(e,Math.min(t,a)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,a){return this.x=e.x+(t.x-e.x)*a,this.y=e.y+(t.y-e.y)*a,this.z=e.z+(t.z-e.z)*a,this.w=e.w+(t.w-e.w)*a,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class tc extends Ln{constructor(e=1,t=1,a={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new ht(0,0,e,t),this.scissorTest=!1,this.viewport=new ht(0,0,e,t);const s={width:e,height:t,depth:1};a=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:St,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0,count:1},a);const o=new yt(s,a.mapping,a.wrapS,a.wrapT,a.magFilter,a.minFilter,a.format,a.type,a.anisotropy,a.colorSpace);o.flipY=!1,o.generateMipmaps=a.generateMipmaps,o.internalFormat=a.internalFormat,this.textures=[];const f=a.count;for(let u=0;u<f;u++)this.textures[u]=o.clone(),this.textures[u].isRenderTargetTexture=!0;this.depthBuffer=a.depthBuffer,this.stencilBuffer=a.stencilBuffer,this.depthTexture=a.depthTexture,this.samples=a.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,t,a=1){if(this.width!==e||this.height!==t||this.depth!==a){this.width=e,this.height=t,this.depth=a;for(let s=0,o=this.textures.length;s<o;s++)this.textures[s].image.width=e,this.textures[s].image.height=t,this.textures[s].image.depth=a;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let a=0,s=e.textures.length;a<s;a++)this.textures[a]=e.textures[a].clone(),this.textures[a].isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new fo(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Cn extends tc{constructor(e=1,t=1,a={}){super(e,t,a),this.isWebGLRenderTarget=!0}}class po extends yt{constructor(e=null,t=1,a=1,s=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:a,depth:s},this.magFilter=xt,this.minFilter=xt,this.wrapR=Nt,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class nc extends yt{constructor(e=null,t=1,a=1,s=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:a,depth:s},this.magFilter=xt,this.minFilter=xt,this.wrapR=Nt,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Pn{constructor(e=0,t=0,a=0,s=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=a,this._w=s}static slerpFlat(e,t,a,s,o,f,u){let h=a[s+0],x=a[s+1],m=a[s+2],w=a[s+3];const A=o[f+0],D=o[f+1],I=o[f+2],y=o[f+3];if(u===0){e[t+0]=h,e[t+1]=x,e[t+2]=m,e[t+3]=w;return}if(u===1){e[t+0]=A,e[t+1]=D,e[t+2]=I,e[t+3]=y;return}if(w!==y||h!==A||x!==D||m!==I){let l=1-u;const c=h*A+x*D+m*I+w*y,L=c>=0?1:-1,R=1-c*c;if(R>Number.EPSILON){const $=Math.sqrt(R),b=Math.atan2($,c*L);l=Math.sin(l*b)/$,u=Math.sin(u*b)/$}const F=u*L;if(h=h*l+A*F,x=x*l+D*F,m=m*l+I*F,w=w*l+y*F,l===1-u){const $=1/Math.sqrt(h*h+x*x+m*m+w*w);h*=$,x*=$,m*=$,w*=$}}e[t]=h,e[t+1]=x,e[t+2]=m,e[t+3]=w}static multiplyQuaternionsFlat(e,t,a,s,o,f){const u=a[s],h=a[s+1],x=a[s+2],m=a[s+3],w=o[f],A=o[f+1],D=o[f+2],I=o[f+3];return e[t]=u*I+m*w+h*D-x*A,e[t+1]=h*I+m*A+x*w-u*D,e[t+2]=x*I+m*D+u*A-h*w,e[t+3]=m*I-u*w-h*A-x*D,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,a,s){return this._x=e,this._y=t,this._z=a,this._w=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const a=e._x,s=e._y,o=e._z,f=e._order,u=Math.cos,h=Math.sin,x=u(a/2),m=u(s/2),w=u(o/2),A=h(a/2),D=h(s/2),I=h(o/2);switch(f){case"XYZ":this._x=A*m*w+x*D*I,this._y=x*D*w-A*m*I,this._z=x*m*I+A*D*w,this._w=x*m*w-A*D*I;break;case"YXZ":this._x=A*m*w+x*D*I,this._y=x*D*w-A*m*I,this._z=x*m*I-A*D*w,this._w=x*m*w+A*D*I;break;case"ZXY":this._x=A*m*w-x*D*I,this._y=x*D*w+A*m*I,this._z=x*m*I+A*D*w,this._w=x*m*w-A*D*I;break;case"ZYX":this._x=A*m*w-x*D*I,this._y=x*D*w+A*m*I,this._z=x*m*I-A*D*w,this._w=x*m*w+A*D*I;break;case"YZX":this._x=A*m*w+x*D*I,this._y=x*D*w+A*m*I,this._z=x*m*I-A*D*w,this._w=x*m*w-A*D*I;break;case"XZY":this._x=A*m*w-x*D*I,this._y=x*D*w-A*m*I,this._z=x*m*I+A*D*w,this._w=x*m*w+A*D*I;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+f)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const a=t/2,s=Math.sin(a);return this._x=e.x*s,this._y=e.y*s,this._z=e.z*s,this._w=Math.cos(a),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,a=t[0],s=t[4],o=t[8],f=t[1],u=t[5],h=t[9],x=t[2],m=t[6],w=t[10],A=a+u+w;if(A>0){const D=.5/Math.sqrt(A+1);this._w=.25/D,this._x=(m-h)*D,this._y=(o-x)*D,this._z=(f-s)*D}else if(a>u&&a>w){const D=2*Math.sqrt(1+a-u-w);this._w=(m-h)/D,this._x=.25*D,this._y=(s+f)/D,this._z=(o+x)/D}else if(u>w){const D=2*Math.sqrt(1+u-a-w);this._w=(o-x)/D,this._x=(s+f)/D,this._y=.25*D,this._z=(h+m)/D}else{const D=2*Math.sqrt(1+w-a-u);this._w=(f-s)/D,this._x=(o+x)/D,this._y=(h+m)/D,this._z=.25*D}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let a=e.dot(t)+1;return a<Number.EPSILON?(a=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=a):(this._x=0,this._y=-e.z,this._z=e.y,this._w=a)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=a),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(_t(this.dot(e),-1,1)))}rotateTowards(e,t){const a=this.angleTo(e);if(a===0)return this;const s=Math.min(1,t/a);return this.slerp(e,s),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const a=e._x,s=e._y,o=e._z,f=e._w,u=t._x,h=t._y,x=t._z,m=t._w;return this._x=a*m+f*u+s*x-o*h,this._y=s*m+f*h+o*u-a*x,this._z=o*m+f*x+a*h-s*u,this._w=f*m-a*u-s*h-o*x,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const a=this._x,s=this._y,o=this._z,f=this._w;let u=f*e._w+a*e._x+s*e._y+o*e._z;if(u<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,u=-u):this.copy(e),u>=1)return this._w=f,this._x=a,this._y=s,this._z=o,this;const h=1-u*u;if(h<=Number.EPSILON){const D=1-t;return this._w=D*f+t*this._w,this._x=D*a+t*this._x,this._y=D*s+t*this._y,this._z=D*o+t*this._z,this.normalize(),this}const x=Math.sqrt(h),m=Math.atan2(x,u),w=Math.sin((1-t)*m)/x,A=Math.sin(t*m)/x;return this._w=f*w+this._w*A,this._x=a*w+this._x*A,this._y=s*w+this._y*A,this._z=o*w+this._z*A,this._onChangeCallback(),this}slerpQuaternions(e,t,a){return this.copy(e).slerp(t,a)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),a=Math.random(),s=Math.sqrt(1-a),o=Math.sqrt(a);return this.set(s*Math.sin(e),s*Math.cos(e),o*Math.sin(t),o*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class U{constructor(e=0,t=0,a=0){U.prototype.isVector3=!0,this.x=e,this.y=t,this.z=a}set(e,t,a){return a===void 0&&(a=this.z),this.x=e,this.y=t,this.z=a,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(sa.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(sa.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,a=this.y,s=this.z,o=e.elements;return this.x=o[0]*t+o[3]*a+o[6]*s,this.y=o[1]*t+o[4]*a+o[7]*s,this.z=o[2]*t+o[5]*a+o[8]*s,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,a=this.y,s=this.z,o=e.elements,f=1/(o[3]*t+o[7]*a+o[11]*s+o[15]);return this.x=(o[0]*t+o[4]*a+o[8]*s+o[12])*f,this.y=(o[1]*t+o[5]*a+o[9]*s+o[13])*f,this.z=(o[2]*t+o[6]*a+o[10]*s+o[14])*f,this}applyQuaternion(e){const t=this.x,a=this.y,s=this.z,o=e.x,f=e.y,u=e.z,h=e.w,x=2*(f*s-u*a),m=2*(u*t-o*s),w=2*(o*a-f*t);return this.x=t+h*x+f*w-u*m,this.y=a+h*m+u*x-o*w,this.z=s+h*w+o*m-f*x,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,a=this.y,s=this.z,o=e.elements;return this.x=o[0]*t+o[4]*a+o[8]*s,this.y=o[1]*t+o[5]*a+o[9]*s,this.z=o[2]*t+o[6]*a+o[10]*s,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const a=this.length();return this.divideScalar(a||1).multiplyScalar(Math.max(e,Math.min(t,a)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,a){return this.x=e.x+(t.x-e.x)*a,this.y=e.y+(t.y-e.y)*a,this.z=e.z+(t.z-e.z)*a,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const a=e.x,s=e.y,o=e.z,f=t.x,u=t.y,h=t.z;return this.x=s*h-o*u,this.y=o*f-a*h,this.z=a*u-s*f,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const a=e.dot(this)/t;return this.copy(e).multiplyScalar(a)}projectOnPlane(e){return Ar.copy(this).projectOnVector(e),this.sub(Ar)}reflect(e){return this.sub(Ar.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const a=this.dot(e)/t;return Math.acos(_t(a,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,a=this.y-e.y,s=this.z-e.z;return t*t+a*a+s*s}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,a){const s=Math.sin(t)*e;return this.x=s*Math.sin(a),this.y=Math.cos(t)*e,this.z=s*Math.cos(a),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,a){return this.x=e*Math.sin(t),this.y=a,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),a=this.setFromMatrixColumn(e,1).length(),s=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=a,this.z=s,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,a=Math.sqrt(1-t*t);return this.x=a*Math.cos(e),this.y=t,this.z=a*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Ar=new U,sa=new Pn;class vi{constructor(e=new U(1/0,1/0,1/0),t=new U(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,a=e.length;t<a;t+=3)this.expandByPoint(Dt.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,a=e.count;t<a;t++)this.expandByPoint(Dt.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,a=e.length;t<a;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const a=Dt.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(a),this.max.copy(e).add(a),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const a=e.geometry;if(a!==void 0){const o=a.getAttribute("position");if(t===!0&&o!==void 0&&e.isInstancedMesh!==!0)for(let f=0,u=o.count;f<u;f++)e.isMesh===!0?e.getVertexPosition(f,Dt):Dt.fromBufferAttribute(o,f),Dt.applyMatrix4(e.matrixWorld),this.expandByPoint(Dt);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),bi.copy(e.boundingBox)):(a.boundingBox===null&&a.computeBoundingBox(),bi.copy(a.boundingBox)),bi.applyMatrix4(e.matrixWorld),this.union(bi)}const s=e.children;for(let o=0,f=s.length;o<f;o++)this.expandByObject(s[o],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Dt),Dt.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,a;return e.normal.x>0?(t=e.normal.x*this.min.x,a=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,a=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,a+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,a+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,a+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,a+=e.normal.z*this.min.z),t<=-e.constant&&a>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(hi),Ai.subVectors(this.max,hi),Fn.subVectors(e.a,hi),On.subVectors(e.b,hi),Bn.subVectors(e.c,hi),Jt.subVectors(On,Fn),Qt.subVectors(Bn,On),gn.subVectors(Fn,Bn);let t=[0,-Jt.z,Jt.y,0,-Qt.z,Qt.y,0,-gn.z,gn.y,Jt.z,0,-Jt.x,Qt.z,0,-Qt.x,gn.z,0,-gn.x,-Jt.y,Jt.x,0,-Qt.y,Qt.x,0,-gn.y,gn.x,0];return!wr(t,Fn,On,Bn,Ai)||(t=[1,0,0,0,1,0,0,0,1],!wr(t,Fn,On,Bn,Ai))?!1:(wi.crossVectors(Jt,Qt),t=[wi.x,wi.y,wi.z],wr(t,Fn,On,Bn,Ai))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Dt).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Dt).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(kt[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),kt[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),kt[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),kt[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),kt[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),kt[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),kt[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),kt[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(kt),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const kt=[new U,new U,new U,new U,new U,new U,new U,new U],Dt=new U,bi=new vi,Fn=new U,On=new U,Bn=new U,Jt=new U,Qt=new U,gn=new U,hi=new U,Ai=new U,wi=new U,vn=new U;function wr(r,e,t,a,s){for(let o=0,f=r.length-3;o<=f;o+=3){vn.fromArray(r,o);const u=s.x*Math.abs(vn.x)+s.y*Math.abs(vn.y)+s.z*Math.abs(vn.z),h=e.dot(vn),x=t.dot(vn),m=a.dot(vn);if(Math.max(-Math.max(h,x,m),Math.min(h,x,m))>u)return!1}return!0}const ic=new vi,fi=new U,Rr=new U;class ur{constructor(e=new U,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const a=this.center;t!==void 0?a.copy(t):ic.setFromPoints(e).getCenter(a);let s=0;for(let o=0,f=e.length;o<f;o++)s=Math.max(s,a.distanceToSquared(e[o]));return this.radius=Math.sqrt(s),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const a=this.center.distanceToSquared(e);return t.copy(e),a>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;fi.subVectors(e,this.center);const t=fi.lengthSq();if(t>this.radius*this.radius){const a=Math.sqrt(t),s=(a-this.radius)*.5;this.center.addScaledVector(fi,s/a),this.radius+=s}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(Rr.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(fi.copy(e.center).add(Rr)),this.expandByPoint(fi.copy(e.center).sub(Rr))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Wt=new U,Cr=new U,Ri=new U,en=new U,Pr=new U,Ci=new U,Lr=new U;class hs{constructor(e=new U,t=new U(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Wt)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const a=t.dot(this.direction);return a<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,a)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Wt.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Wt.copy(this.origin).addScaledVector(this.direction,t),Wt.distanceToSquared(e))}distanceSqToSegment(e,t,a,s){Cr.copy(e).add(t).multiplyScalar(.5),Ri.copy(t).sub(e).normalize(),en.copy(this.origin).sub(Cr);const o=e.distanceTo(t)*.5,f=-this.direction.dot(Ri),u=en.dot(this.direction),h=-en.dot(Ri),x=en.lengthSq(),m=Math.abs(1-f*f);let w,A,D,I;if(m>0)if(w=f*h-u,A=f*u-h,I=o*m,w>=0)if(A>=-I)if(A<=I){const y=1/m;w*=y,A*=y,D=w*(w+f*A+2*u)+A*(f*w+A+2*h)+x}else A=o,w=Math.max(0,-(f*A+u)),D=-w*w+A*(A+2*h)+x;else A=-o,w=Math.max(0,-(f*A+u)),D=-w*w+A*(A+2*h)+x;else A<=-I?(w=Math.max(0,-(-f*o+u)),A=w>0?-o:Math.min(Math.max(-o,-h),o),D=-w*w+A*(A+2*h)+x):A<=I?(w=0,A=Math.min(Math.max(-o,-h),o),D=A*(A+2*h)+x):(w=Math.max(0,-(f*o+u)),A=w>0?o:Math.min(Math.max(-o,-h),o),D=-w*w+A*(A+2*h)+x);else A=f>0?-o:o,w=Math.max(0,-(f*A+u)),D=-w*w+A*(A+2*h)+x;return a&&a.copy(this.origin).addScaledVector(this.direction,w),s&&s.copy(Cr).addScaledVector(Ri,A),D}intersectSphere(e,t){Wt.subVectors(e.center,this.origin);const a=Wt.dot(this.direction),s=Wt.dot(Wt)-a*a,o=e.radius*e.radius;if(s>o)return null;const f=Math.sqrt(o-s),u=a-f,h=a+f;return h<0?null:u<0?this.at(h,t):this.at(u,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const a=-(this.origin.dot(e.normal)+e.constant)/t;return a>=0?a:null}intersectPlane(e,t){const a=this.distanceToPlane(e);return a===null?null:this.at(a,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let a,s,o,f,u,h;const x=1/this.direction.x,m=1/this.direction.y,w=1/this.direction.z,A=this.origin;return x>=0?(a=(e.min.x-A.x)*x,s=(e.max.x-A.x)*x):(a=(e.max.x-A.x)*x,s=(e.min.x-A.x)*x),m>=0?(o=(e.min.y-A.y)*m,f=(e.max.y-A.y)*m):(o=(e.max.y-A.y)*m,f=(e.min.y-A.y)*m),a>f||o>s||((o>a||isNaN(a))&&(a=o),(f<s||isNaN(s))&&(s=f),w>=0?(u=(e.min.z-A.z)*w,h=(e.max.z-A.z)*w):(u=(e.max.z-A.z)*w,h=(e.min.z-A.z)*w),a>h||u>s)||((u>a||a!==a)&&(a=u),(h<s||s!==s)&&(s=h),s<0)?null:this.at(a>=0?a:s,t)}intersectsBox(e){return this.intersectBox(e,Wt)!==null}intersectTriangle(e,t,a,s,o){Pr.subVectors(t,e),Ci.subVectors(a,e),Lr.crossVectors(Pr,Ci);let f=this.direction.dot(Lr),u;if(f>0){if(s)return null;u=1}else if(f<0)u=-1,f=-f;else return null;en.subVectors(this.origin,e);const h=u*this.direction.dot(Ci.crossVectors(en,Ci));if(h<0)return null;const x=u*this.direction.dot(Pr.cross(en));if(x<0||h+x>f)return null;const m=-u*en.dot(Lr);return m<0?null:this.at(m/f,o)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class st{constructor(e,t,a,s,o,f,u,h,x,m,w,A,D,I,y,l){st.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,a,s,o,f,u,h,x,m,w,A,D,I,y,l)}set(e,t,a,s,o,f,u,h,x,m,w,A,D,I,y,l){const c=this.elements;return c[0]=e,c[4]=t,c[8]=a,c[12]=s,c[1]=o,c[5]=f,c[9]=u,c[13]=h,c[2]=x,c[6]=m,c[10]=w,c[14]=A,c[3]=D,c[7]=I,c[11]=y,c[15]=l,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new st().fromArray(this.elements)}copy(e){const t=this.elements,a=e.elements;return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[8]=a[8],t[9]=a[9],t[10]=a[10],t[11]=a[11],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15],this}copyPosition(e){const t=this.elements,a=e.elements;return t[12]=a[12],t[13]=a[13],t[14]=a[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,a){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),a.setFromMatrixColumn(this,2),this}makeBasis(e,t,a){return this.set(e.x,t.x,a.x,0,e.y,t.y,a.y,0,e.z,t.z,a.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,a=e.elements,s=1/zn.setFromMatrixColumn(e,0).length(),o=1/zn.setFromMatrixColumn(e,1).length(),f=1/zn.setFromMatrixColumn(e,2).length();return t[0]=a[0]*s,t[1]=a[1]*s,t[2]=a[2]*s,t[3]=0,t[4]=a[4]*o,t[5]=a[5]*o,t[6]=a[6]*o,t[7]=0,t[8]=a[8]*f,t[9]=a[9]*f,t[10]=a[10]*f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,a=e.x,s=e.y,o=e.z,f=Math.cos(a),u=Math.sin(a),h=Math.cos(s),x=Math.sin(s),m=Math.cos(o),w=Math.sin(o);if(e.order==="XYZ"){const A=f*m,D=f*w,I=u*m,y=u*w;t[0]=h*m,t[4]=-h*w,t[8]=x,t[1]=D+I*x,t[5]=A-y*x,t[9]=-u*h,t[2]=y-A*x,t[6]=I+D*x,t[10]=f*h}else if(e.order==="YXZ"){const A=h*m,D=h*w,I=x*m,y=x*w;t[0]=A+y*u,t[4]=I*u-D,t[8]=f*x,t[1]=f*w,t[5]=f*m,t[9]=-u,t[2]=D*u-I,t[6]=y+A*u,t[10]=f*h}else if(e.order==="ZXY"){const A=h*m,D=h*w,I=x*m,y=x*w;t[0]=A-y*u,t[4]=-f*w,t[8]=I+D*u,t[1]=D+I*u,t[5]=f*m,t[9]=y-A*u,t[2]=-f*x,t[6]=u,t[10]=f*h}else if(e.order==="ZYX"){const A=f*m,D=f*w,I=u*m,y=u*w;t[0]=h*m,t[4]=I*x-D,t[8]=A*x+y,t[1]=h*w,t[5]=y*x+A,t[9]=D*x-I,t[2]=-x,t[6]=u*h,t[10]=f*h}else if(e.order==="YZX"){const A=f*h,D=f*x,I=u*h,y=u*x;t[0]=h*m,t[4]=y-A*w,t[8]=I*w+D,t[1]=w,t[5]=f*m,t[9]=-u*m,t[2]=-x*m,t[6]=D*w+I,t[10]=A-y*w}else if(e.order==="XZY"){const A=f*h,D=f*x,I=u*h,y=u*x;t[0]=h*m,t[4]=-w,t[8]=x*m,t[1]=A*w+y,t[5]=f*m,t[9]=D*w-I,t[2]=I*w-D,t[6]=u*m,t[10]=y*w+A}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(rc,e,sc)}lookAt(e,t,a){const s=this.elements;return At.subVectors(e,t),At.lengthSq()===0&&(At.z=1),At.normalize(),tn.crossVectors(a,At),tn.lengthSq()===0&&(Math.abs(a.z)===1?At.x+=1e-4:At.z+=1e-4,At.normalize(),tn.crossVectors(a,At)),tn.normalize(),Pi.crossVectors(At,tn),s[0]=tn.x,s[4]=Pi.x,s[8]=At.x,s[1]=tn.y,s[5]=Pi.y,s[9]=At.y,s[2]=tn.z,s[6]=Pi.z,s[10]=At.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const a=e.elements,s=t.elements,o=this.elements,f=a[0],u=a[4],h=a[8],x=a[12],m=a[1],w=a[5],A=a[9],D=a[13],I=a[2],y=a[6],l=a[10],c=a[14],L=a[3],R=a[7],F=a[11],$=a[15],b=s[0],k=s[4],B=s[8],J=s[12],X=s[1],ae=s[5],He=s[9],Pe=s[13],ue=s[2],Oe=s[6],we=s[10],Ze=s[14],it=s[3],lt=s[7],Vt=s[11],_e=s[15];return o[0]=f*b+u*X+h*ue+x*it,o[4]=f*k+u*ae+h*Oe+x*lt,o[8]=f*B+u*He+h*we+x*Vt,o[12]=f*J+u*Pe+h*Ze+x*_e,o[1]=m*b+w*X+A*ue+D*it,o[5]=m*k+w*ae+A*Oe+D*lt,o[9]=m*B+w*He+A*we+D*Vt,o[13]=m*J+w*Pe+A*Ze+D*_e,o[2]=I*b+y*X+l*ue+c*it,o[6]=I*k+y*ae+l*Oe+c*lt,o[10]=I*B+y*He+l*we+c*Vt,o[14]=I*J+y*Pe+l*Ze+c*_e,o[3]=L*b+R*X+F*ue+$*it,o[7]=L*k+R*ae+F*Oe+$*lt,o[11]=L*B+R*He+F*we+$*Vt,o[15]=L*J+R*Pe+F*Ze+$*_e,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],a=e[4],s=e[8],o=e[12],f=e[1],u=e[5],h=e[9],x=e[13],m=e[2],w=e[6],A=e[10],D=e[14],I=e[3],y=e[7],l=e[11],c=e[15];return I*(+o*h*w-s*x*w-o*u*A+a*x*A+s*u*D-a*h*D)+y*(+t*h*D-t*x*A+o*f*A-s*f*D+s*x*m-o*h*m)+l*(+t*x*w-t*u*D-o*f*w+a*f*D+o*u*m-a*x*m)+c*(-s*u*m-t*h*w+t*u*A+s*f*w-a*f*A+a*h*m)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,a){const s=this.elements;return e.isVector3?(s[12]=e.x,s[13]=e.y,s[14]=e.z):(s[12]=e,s[13]=t,s[14]=a),this}invert(){const e=this.elements,t=e[0],a=e[1],s=e[2],o=e[3],f=e[4],u=e[5],h=e[6],x=e[7],m=e[8],w=e[9],A=e[10],D=e[11],I=e[12],y=e[13],l=e[14],c=e[15],L=w*l*x-y*A*x+y*h*D-u*l*D-w*h*c+u*A*c,R=I*A*x-m*l*x-I*h*D+f*l*D+m*h*c-f*A*c,F=m*y*x-I*w*x+I*u*D-f*y*D-m*u*c+f*w*c,$=I*w*h-m*y*h-I*u*A+f*y*A+m*u*l-f*w*l,b=t*L+a*R+s*F+o*$;if(b===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const k=1/b;return e[0]=L*k,e[1]=(y*A*o-w*l*o-y*s*D+a*l*D+w*s*c-a*A*c)*k,e[2]=(u*l*o-y*h*o+y*s*x-a*l*x-u*s*c+a*h*c)*k,e[3]=(w*h*o-u*A*o-w*s*x+a*A*x+u*s*D-a*h*D)*k,e[4]=R*k,e[5]=(m*l*o-I*A*o+I*s*D-t*l*D-m*s*c+t*A*c)*k,e[6]=(I*h*o-f*l*o-I*s*x+t*l*x+f*s*c-t*h*c)*k,e[7]=(f*A*o-m*h*o+m*s*x-t*A*x-f*s*D+t*h*D)*k,e[8]=F*k,e[9]=(I*w*o-m*y*o-I*a*D+t*y*D+m*a*c-t*w*c)*k,e[10]=(f*y*o-I*u*o+I*a*x-t*y*x-f*a*c+t*u*c)*k,e[11]=(m*u*o-f*w*o-m*a*x+t*w*x+f*a*D-t*u*D)*k,e[12]=$*k,e[13]=(m*y*s-I*w*s+I*a*A-t*y*A-m*a*l+t*w*l)*k,e[14]=(I*u*s-f*y*s-I*a*h+t*y*h+f*a*l-t*u*l)*k,e[15]=(f*w*s-m*u*s+m*a*h-t*w*h-f*a*A+t*u*A)*k,this}scale(e){const t=this.elements,a=e.x,s=e.y,o=e.z;return t[0]*=a,t[4]*=s,t[8]*=o,t[1]*=a,t[5]*=s,t[9]*=o,t[2]*=a,t[6]*=s,t[10]*=o,t[3]*=a,t[7]*=s,t[11]*=o,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],a=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],s=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,a,s))}makeTranslation(e,t,a){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,a,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),a=Math.sin(e);return this.set(1,0,0,0,0,t,-a,0,0,a,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),a=Math.sin(e);return this.set(t,0,a,0,0,1,0,0,-a,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),a=Math.sin(e);return this.set(t,-a,0,0,a,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const a=Math.cos(t),s=Math.sin(t),o=1-a,f=e.x,u=e.y,h=e.z,x=o*f,m=o*u;return this.set(x*f+a,x*u-s*h,x*h+s*u,0,x*u+s*h,m*u+a,m*h-s*f,0,x*h-s*u,m*h+s*f,o*h*h+a,0,0,0,0,1),this}makeScale(e,t,a){return this.set(e,0,0,0,0,t,0,0,0,0,a,0,0,0,0,1),this}makeShear(e,t,a,s,o,f){return this.set(1,a,o,0,e,1,f,0,t,s,1,0,0,0,0,1),this}compose(e,t,a){const s=this.elements,o=t._x,f=t._y,u=t._z,h=t._w,x=o+o,m=f+f,w=u+u,A=o*x,D=o*m,I=o*w,y=f*m,l=f*w,c=u*w,L=h*x,R=h*m,F=h*w,$=a.x,b=a.y,k=a.z;return s[0]=(1-(y+c))*$,s[1]=(D+F)*$,s[2]=(I-R)*$,s[3]=0,s[4]=(D-F)*b,s[5]=(1-(A+c))*b,s[6]=(l+L)*b,s[7]=0,s[8]=(I+R)*k,s[9]=(l-L)*k,s[10]=(1-(A+y))*k,s[11]=0,s[12]=e.x,s[13]=e.y,s[14]=e.z,s[15]=1,this}decompose(e,t,a){const s=this.elements;let o=zn.set(s[0],s[1],s[2]).length();const f=zn.set(s[4],s[5],s[6]).length(),u=zn.set(s[8],s[9],s[10]).length();this.determinant()<0&&(o=-o),e.x=s[12],e.y=s[13],e.z=s[14],Ut.copy(this);const h=1/o,x=1/f,m=1/u;return Ut.elements[0]*=h,Ut.elements[1]*=h,Ut.elements[2]*=h,Ut.elements[4]*=x,Ut.elements[5]*=x,Ut.elements[6]*=x,Ut.elements[8]*=m,Ut.elements[9]*=m,Ut.elements[10]*=m,t.setFromRotationMatrix(Ut),a.x=o,a.y=f,a.z=u,this}makePerspective(e,t,a,s,o,f,u=Zt){const h=this.elements,x=2*o/(t-e),m=2*o/(a-s),w=(t+e)/(t-e),A=(a+s)/(a-s);let D,I;if(u===Zt)D=-(f+o)/(f-o),I=-2*f*o/(f-o);else if(u===ir)D=-f/(f-o),I=-f*o/(f-o);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+u);return h[0]=x,h[4]=0,h[8]=w,h[12]=0,h[1]=0,h[5]=m,h[9]=A,h[13]=0,h[2]=0,h[6]=0,h[10]=D,h[14]=I,h[3]=0,h[7]=0,h[11]=-1,h[15]=0,this}makeOrthographic(e,t,a,s,o,f,u=Zt){const h=this.elements,x=1/(t-e),m=1/(a-s),w=1/(f-o),A=(t+e)*x,D=(a+s)*m;let I,y;if(u===Zt)I=(f+o)*w,y=-2*w;else if(u===ir)I=o*w,y=-1*w;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+u);return h[0]=2*x,h[4]=0,h[8]=0,h[12]=-A,h[1]=0,h[5]=2*m,h[9]=0,h[13]=-D,h[2]=0,h[6]=0,h[10]=y,h[14]=-I,h[3]=0,h[7]=0,h[11]=0,h[15]=1,this}equals(e){const t=this.elements,a=e.elements;for(let s=0;s<16;s++)if(t[s]!==a[s])return!1;return!0}fromArray(e,t=0){for(let a=0;a<16;a++)this.elements[a]=e[a+t];return this}toArray(e=[],t=0){const a=this.elements;return e[t]=a[0],e[t+1]=a[1],e[t+2]=a[2],e[t+3]=a[3],e[t+4]=a[4],e[t+5]=a[5],e[t+6]=a[6],e[t+7]=a[7],e[t+8]=a[8],e[t+9]=a[9],e[t+10]=a[10],e[t+11]=a[11],e[t+12]=a[12],e[t+13]=a[13],e[t+14]=a[14],e[t+15]=a[15],e}}const zn=new U,Ut=new st,rc=new U(0,0,0),sc=new U(1,1,1),tn=new U,Pi=new U,At=new U,aa=new st,oa=new Pn;class $t{constructor(e=0,t=0,a=0,s=$t.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=a,this._order=s}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,a,s=this._order){return this._x=e,this._y=t,this._z=a,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,a=!0){const s=e.elements,o=s[0],f=s[4],u=s[8],h=s[1],x=s[5],m=s[9],w=s[2],A=s[6],D=s[10];switch(t){case"XYZ":this._y=Math.asin(_t(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-m,D),this._z=Math.atan2(-f,o)):(this._x=Math.atan2(A,x),this._z=0);break;case"YXZ":this._x=Math.asin(-_t(m,-1,1)),Math.abs(m)<.9999999?(this._y=Math.atan2(u,D),this._z=Math.atan2(h,x)):(this._y=Math.atan2(-w,o),this._z=0);break;case"ZXY":this._x=Math.asin(_t(A,-1,1)),Math.abs(A)<.9999999?(this._y=Math.atan2(-w,D),this._z=Math.atan2(-f,x)):(this._y=0,this._z=Math.atan2(h,o));break;case"ZYX":this._y=Math.asin(-_t(w,-1,1)),Math.abs(w)<.9999999?(this._x=Math.atan2(A,D),this._z=Math.atan2(h,o)):(this._x=0,this._z=Math.atan2(-f,x));break;case"YZX":this._z=Math.asin(_t(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(-m,x),this._y=Math.atan2(-w,o)):(this._x=0,this._y=Math.atan2(u,D));break;case"XZY":this._z=Math.asin(-_t(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(A,x),this._y=Math.atan2(u,o)):(this._x=Math.atan2(-m,D),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,a===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,a){return aa.makeRotationFromQuaternion(e),this.setFromRotationMatrix(aa,t,a)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return oa.setFromEuler(this),this.setFromQuaternion(oa,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}$t.DEFAULT_ORDER="XYZ";class mo{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let ac=0;const la=new U,Gn=new Pn,Xt=new st,Li=new U,di=new U,oc=new U,lc=new Pn,ca=new U(1,0,0),ua=new U(0,1,0),ha=new U(0,0,1),cc={type:"added"},uc={type:"removed"},Dr={type:"childadded",child:null},Ur={type:"childremoved",child:null};class Mt extends Ln{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:ac++}),this.uuid=oi(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Mt.DEFAULT_UP.clone();const e=new U,t=new $t,a=new Pn,s=new U(1,1,1);function o(){a.setFromEuler(t,!1)}function f(){t.setFromQuaternion(a,void 0,!1)}t._onChange(o),a._onChange(f),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:a},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new st},normalMatrix:{value:new Ge}}),this.matrix=new st,this.matrixWorld=new st,this.matrixAutoUpdate=Mt.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Mt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new mo,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Gn.setFromAxisAngle(e,t),this.quaternion.multiply(Gn),this}rotateOnWorldAxis(e,t){return Gn.setFromAxisAngle(e,t),this.quaternion.premultiply(Gn),this}rotateX(e){return this.rotateOnAxis(ca,e)}rotateY(e){return this.rotateOnAxis(ua,e)}rotateZ(e){return this.rotateOnAxis(ha,e)}translateOnAxis(e,t){return la.copy(e).applyQuaternion(this.quaternion),this.position.add(la.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(ca,e)}translateY(e){return this.translateOnAxis(ua,e)}translateZ(e){return this.translateOnAxis(ha,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Xt.copy(this.matrixWorld).invert())}lookAt(e,t,a){e.isVector3?Li.copy(e):Li.set(e,t,a);const s=this.parent;this.updateWorldMatrix(!0,!1),di.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Xt.lookAt(di,Li,this.up):Xt.lookAt(Li,di,this.up),this.quaternion.setFromRotationMatrix(Xt),s&&(Xt.extractRotation(s.matrixWorld),Gn.setFromRotationMatrix(Xt),this.quaternion.premultiply(Gn.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(cc),Dr.child=e,this.dispatchEvent(Dr),Dr.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let a=0;a<arguments.length;a++)this.remove(arguments[a]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(uc),Ur.child=e,this.dispatchEvent(Ur),Ur.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Xt.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Xt.multiply(e.parent.matrixWorld)),e.applyMatrix4(Xt),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let a=0,s=this.children.length;a<s;a++){const o=this.children[a].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t,a=[]){this[e]===t&&a.push(this);const s=this.children;for(let o=0,f=s.length;o<f;o++)s[o].getObjectsByProperty(e,t,a);return a}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(di,e,oc),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(di,lc,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let a=0,s=t.length;a<s;a++)t[a].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let a=0,s=t.length;a<s;a++)t[a].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let a=0,s=t.length;a<s;a++){const o=t[a];(o.matrixWorldAutoUpdate===!0||e===!0)&&o.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const a=this.parent;if(e===!0&&a!==null&&a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const s=this.children;for(let o=0,f=s.length;o<f;o++){const u=s[o];u.matrixWorldAutoUpdate===!0&&u.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",a={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},a.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const s={};s.uuid=this.uuid,s.type=this.type,this.name!==""&&(s.name=this.name),this.castShadow===!0&&(s.castShadow=!0),this.receiveShadow===!0&&(s.receiveShadow=!0),this.visible===!1&&(s.visible=!1),this.frustumCulled===!1&&(s.frustumCulled=!1),this.renderOrder!==0&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(s.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(s.type="BatchedMesh",s.perObjectFrustumCulled=this.perObjectFrustumCulled,s.sortObjects=this.sortObjects,s.drawRanges=this._drawRanges,s.reservedRanges=this._reservedRanges,s.visibility=this._visibility,s.active=this._active,s.bounds=this._bounds.map(u=>({boxInitialized:u.boxInitialized,boxMin:u.box.min.toArray(),boxMax:u.box.max.toArray(),sphereInitialized:u.sphereInitialized,sphereRadius:u.sphere.radius,sphereCenter:u.sphere.center.toArray()})),s.maxGeometryCount=this._maxGeometryCount,s.maxVertexCount=this._maxVertexCount,s.maxIndexCount=this._maxIndexCount,s.geometryInitialized=this._geometryInitialized,s.geometryCount=this._geometryCount,s.matricesTexture=this._matricesTexture.toJSON(e),this.boundingSphere!==null&&(s.boundingSphere={center:s.boundingSphere.center.toArray(),radius:s.boundingSphere.radius}),this.boundingBox!==null&&(s.boundingBox={min:s.boundingBox.min.toArray(),max:s.boundingBox.max.toArray()}));function o(u,h){return u[h.uuid]===void 0&&(u[h.uuid]=h.toJSON(e)),h.uuid}if(this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(s.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=o(e.geometries,this.geometry);const u=this.geometry.parameters;if(u!==void 0&&u.shapes!==void 0){const h=u.shapes;if(Array.isArray(h))for(let x=0,m=h.length;x<m;x++){const w=h[x];o(e.shapes,w)}else o(e.shapes,h)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(o(e.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const u=[];for(let h=0,x=this.material.length;h<x;h++)u.push(o(e.materials,this.material[h]));s.material=u}else s.material=o(e.materials,this.material);if(this.children.length>0){s.children=[];for(let u=0;u<this.children.length;u++)s.children.push(this.children[u].toJSON(e).object)}if(this.animations.length>0){s.animations=[];for(let u=0;u<this.animations.length;u++){const h=this.animations[u];s.animations.push(o(e.animations,h))}}if(t){const u=f(e.geometries),h=f(e.materials),x=f(e.textures),m=f(e.images),w=f(e.shapes),A=f(e.skeletons),D=f(e.animations),I=f(e.nodes);u.length>0&&(a.geometries=u),h.length>0&&(a.materials=h),x.length>0&&(a.textures=x),m.length>0&&(a.images=m),w.length>0&&(a.shapes=w),A.length>0&&(a.skeletons=A),D.length>0&&(a.animations=D),I.length>0&&(a.nodes=I)}return a.object=s,a;function f(u){const h=[];for(const x in u){const m=u[x];delete m.metadata,h.push(m)}return h}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let a=0;a<e.children.length;a++){const s=e.children[a];this.add(s.clone())}return this}}Mt.DEFAULT_UP=new U(0,1,0);Mt.DEFAULT_MATRIX_AUTO_UPDATE=!0;Mt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const It=new U,Yt=new U,Ir=new U,qt=new U,Hn=new U,Vn=new U,fa=new U,Nr=new U,Fr=new U,Or=new U;class Ot{constructor(e=new U,t=new U,a=new U){this.a=e,this.b=t,this.c=a}static getNormal(e,t,a,s){s.subVectors(a,t),It.subVectors(e,t),s.cross(It);const o=s.lengthSq();return o>0?s.multiplyScalar(1/Math.sqrt(o)):s.set(0,0,0)}static getBarycoord(e,t,a,s,o){It.subVectors(s,t),Yt.subVectors(a,t),Ir.subVectors(e,t);const f=It.dot(It),u=It.dot(Yt),h=It.dot(Ir),x=Yt.dot(Yt),m=Yt.dot(Ir),w=f*x-u*u;if(w===0)return o.set(0,0,0),null;const A=1/w,D=(x*h-u*m)*A,I=(f*m-u*h)*A;return o.set(1-D-I,I,D)}static containsPoint(e,t,a,s){return this.getBarycoord(e,t,a,s,qt)===null?!1:qt.x>=0&&qt.y>=0&&qt.x+qt.y<=1}static getInterpolation(e,t,a,s,o,f,u,h){return this.getBarycoord(e,t,a,s,qt)===null?(h.x=0,h.y=0,"z"in h&&(h.z=0),"w"in h&&(h.w=0),null):(h.setScalar(0),h.addScaledVector(o,qt.x),h.addScaledVector(f,qt.y),h.addScaledVector(u,qt.z),h)}static isFrontFacing(e,t,a,s){return It.subVectors(a,t),Yt.subVectors(e,t),It.cross(Yt).dot(s)<0}set(e,t,a){return this.a.copy(e),this.b.copy(t),this.c.copy(a),this}setFromPointsAndIndices(e,t,a,s){return this.a.copy(e[t]),this.b.copy(e[a]),this.c.copy(e[s]),this}setFromAttributeAndIndices(e,t,a,s){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,a),this.c.fromBufferAttribute(e,s),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return It.subVectors(this.c,this.b),Yt.subVectors(this.a,this.b),It.cross(Yt).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Ot.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Ot.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,a,s,o){return Ot.getInterpolation(e,this.a,this.b,this.c,t,a,s,o)}containsPoint(e){return Ot.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Ot.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const a=this.a,s=this.b,o=this.c;let f,u;Hn.subVectors(s,a),Vn.subVectors(o,a),Nr.subVectors(e,a);const h=Hn.dot(Nr),x=Vn.dot(Nr);if(h<=0&&x<=0)return t.copy(a);Fr.subVectors(e,s);const m=Hn.dot(Fr),w=Vn.dot(Fr);if(m>=0&&w<=m)return t.copy(s);const A=h*w-m*x;if(A<=0&&h>=0&&m<=0)return f=h/(h-m),t.copy(a).addScaledVector(Hn,f);Or.subVectors(e,o);const D=Hn.dot(Or),I=Vn.dot(Or);if(I>=0&&D<=I)return t.copy(o);const y=D*x-h*I;if(y<=0&&x>=0&&I<=0)return u=x/(x-I),t.copy(a).addScaledVector(Vn,u);const l=m*I-D*w;if(l<=0&&w-m>=0&&D-I>=0)return fa.subVectors(o,s),u=(w-m)/(w-m+(D-I)),t.copy(s).addScaledVector(fa,u);const c=1/(l+y+A);return f=y*c,u=A*c,t.copy(a).addScaledVector(Hn,f).addScaledVector(Vn,u)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const _o={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},nn={h:0,s:0,l:0},Di={h:0,s:0,l:0};function Br(r,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?r+(e-r)*6*t:t<1/2?e:t<2/3?r+(e-r)*6*(2/3-t):r}class qe{constructor(e,t,a){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,a)}set(e,t,a){if(t===void 0&&a===void 0){const s=e;s&&s.isColor?this.copy(s):typeof s=="number"?this.setHex(s):typeof s=="string"&&this.setStyle(s)}else this.setRGB(e,t,a);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Bt){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,je.toWorkingColorSpace(this,t),this}setRGB(e,t,a,s=je.workingColorSpace){return this.r=e,this.g=t,this.b=a,je.toWorkingColorSpace(this,s),this}setHSL(e,t,a,s=je.workingColorSpace){if(e=us(e,1),t=_t(t,0,1),a=_t(a,0,1),t===0)this.r=this.g=this.b=a;else{const o=a<=.5?a*(1+t):a+t-a*t,f=2*a-o;this.r=Br(f,o,e+1/3),this.g=Br(f,o,e),this.b=Br(f,o,e-1/3)}return je.toWorkingColorSpace(this,s),this}setStyle(e,t=Bt){function a(o){o!==void 0&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let s;if(s=/^(\w+)\(([^\)]*)\)/.exec(e)){let o;const f=s[1],u=s[2];switch(f){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return a(o[4]),this.setRGB(Math.min(255,parseInt(o[1],10))/255,Math.min(255,parseInt(o[2],10))/255,Math.min(255,parseInt(o[3],10))/255,t);if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return a(o[4]),this.setRGB(Math.min(100,parseInt(o[1],10))/100,Math.min(100,parseInt(o[2],10))/100,Math.min(100,parseInt(o[3],10))/100,t);break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return a(o[4]),this.setHSL(parseFloat(o[1])/360,parseFloat(o[2])/100,parseFloat(o[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(e)){const o=s[1],f=o.length;if(f===3)return this.setRGB(parseInt(o.charAt(0),16)/15,parseInt(o.charAt(1),16)/15,parseInt(o.charAt(2),16)/15,t);if(f===6)return this.setHex(parseInt(o,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Bt){const a=_o[e.toLowerCase()];return a!==void 0?this.setHex(a,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=ti(e.r),this.g=ti(e.g),this.b=ti(e.b),this}copyLinearToSRGB(e){return this.r=Tr(e.r),this.g=Tr(e.g),this.b=Tr(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Bt){return je.fromWorkingColorSpace(mt.copy(this),e),Math.round(_t(mt.r*255,0,255))*65536+Math.round(_t(mt.g*255,0,255))*256+Math.round(_t(mt.b*255,0,255))}getHexString(e=Bt){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=je.workingColorSpace){je.fromWorkingColorSpace(mt.copy(this),t);const a=mt.r,s=mt.g,o=mt.b,f=Math.max(a,s,o),u=Math.min(a,s,o);let h,x;const m=(u+f)/2;if(u===f)h=0,x=0;else{const w=f-u;switch(x=m<=.5?w/(f+u):w/(2-f-u),f){case a:h=(s-o)/w+(s<o?6:0);break;case s:h=(o-a)/w+2;break;case o:h=(a-s)/w+4;break}h/=6}return e.h=h,e.s=x,e.l=m,e}getRGB(e,t=je.workingColorSpace){return je.fromWorkingColorSpace(mt.copy(this),t),e.r=mt.r,e.g=mt.g,e.b=mt.b,e}getStyle(e=Bt){je.fromWorkingColorSpace(mt.copy(this),e);const t=mt.r,a=mt.g,s=mt.b;return e!==Bt?`color(${e} ${t.toFixed(3)} ${a.toFixed(3)} ${s.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(a*255)},${Math.round(s*255)})`}offsetHSL(e,t,a){return this.getHSL(nn),this.setHSL(nn.h+e,nn.s+t,nn.l+a)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,a){return this.r=e.r+(t.r-e.r)*a,this.g=e.g+(t.g-e.g)*a,this.b=e.b+(t.b-e.b)*a,this}lerpHSL(e,t){this.getHSL(nn),e.getHSL(Di);const a=mi(nn.h,Di.h,t),s=mi(nn.s,Di.s,t),o=mi(nn.l,Di.l,t);return this.setHSL(a,s,o),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,a=this.g,s=this.b,o=e.elements;return this.r=o[0]*t+o[3]*a+o[6]*s,this.g=o[1]*t+o[4]*a+o[7]*s,this.b=o[2]*t+o[5]*a+o[8]*s,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const mt=new qe;qe.NAMES=_o;let hc=0;class xi extends Ln{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:hc++}),this.uuid=oi(),this.name="",this.type="Material",this.blending=Qn,this.side=hn,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=Jr,this.blendDst=Qr,this.blendEquation=Tn,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new qe(0,0,0),this.blendAlpha=0,this.depthFunc=Qi,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Js,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=In,this.stencilZFail=In,this.stencilZPass=In,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const a=e[t];if(a===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const s=this[t];if(s===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}s&&s.isColor?s.set(a):s&&s.isVector3&&a&&a.isVector3?s.copy(a):this[t]=a}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const a={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};a.uuid=this.uuid,a.type=this.type,this.name!==""&&(a.name=this.name),this.color&&this.color.isColor&&(a.color=this.color.getHex()),this.roughness!==void 0&&(a.roughness=this.roughness),this.metalness!==void 0&&(a.metalness=this.metalness),this.sheen!==void 0&&(a.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(a.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(a.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(a.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(a.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(a.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(a.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(a.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(a.shininess=this.shininess),this.clearcoat!==void 0&&(a.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(a.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(a.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(a.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(a.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,a.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(a.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(a.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(a.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(a.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(a.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(a.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(a.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(a.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(a.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(a.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(a.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(a.lightMap=this.lightMap.toJSON(e).uuid,a.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(a.aoMap=this.aoMap.toJSON(e).uuid,a.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(a.bumpMap=this.bumpMap.toJSON(e).uuid,a.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(a.normalMap=this.normalMap.toJSON(e).uuid,a.normalMapType=this.normalMapType,a.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(a.displacementMap=this.displacementMap.toJSON(e).uuid,a.displacementScale=this.displacementScale,a.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(a.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(a.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(a.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(a.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(a.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(a.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(a.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(a.combine=this.combine)),this.envMapRotation!==void 0&&(a.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(a.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(a.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(a.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(a.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(a.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(a.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(a.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(a.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(a.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(a.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(a.size=this.size),this.shadowSide!==null&&(a.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(a.sizeAttenuation=this.sizeAttenuation),this.blending!==Qn&&(a.blending=this.blending),this.side!==hn&&(a.side=this.side),this.vertexColors===!0&&(a.vertexColors=!0),this.opacity<1&&(a.opacity=this.opacity),this.transparent===!0&&(a.transparent=!0),this.blendSrc!==Jr&&(a.blendSrc=this.blendSrc),this.blendDst!==Qr&&(a.blendDst=this.blendDst),this.blendEquation!==Tn&&(a.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(a.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(a.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(a.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(a.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(a.blendAlpha=this.blendAlpha),this.depthFunc!==Qi&&(a.depthFunc=this.depthFunc),this.depthTest===!1&&(a.depthTest=this.depthTest),this.depthWrite===!1&&(a.depthWrite=this.depthWrite),this.colorWrite===!1&&(a.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(a.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==Js&&(a.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(a.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(a.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==In&&(a.stencilFail=this.stencilFail),this.stencilZFail!==In&&(a.stencilZFail=this.stencilZFail),this.stencilZPass!==In&&(a.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(a.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(a.rotation=this.rotation),this.polygonOffset===!0&&(a.polygonOffset=!0),this.polygonOffsetFactor!==0&&(a.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(a.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(a.linewidth=this.linewidth),this.dashSize!==void 0&&(a.dashSize=this.dashSize),this.gapSize!==void 0&&(a.gapSize=this.gapSize),this.scale!==void 0&&(a.scale=this.scale),this.dithering===!0&&(a.dithering=!0),this.alphaTest>0&&(a.alphaTest=this.alphaTest),this.alphaHash===!0&&(a.alphaHash=!0),this.alphaToCoverage===!0&&(a.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(a.premultipliedAlpha=!0),this.forceSinglePass===!0&&(a.forceSinglePass=!0),this.wireframe===!0&&(a.wireframe=!0),this.wireframeLinewidth>1&&(a.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(a.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(a.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(a.flatShading=!0),this.visible===!1&&(a.visible=!1),this.toneMapped===!1&&(a.toneMapped=!1),this.fog===!1&&(a.fog=!1),Object.keys(this.userData).length>0&&(a.userData=this.userData);function s(o){const f=[];for(const u in o){const h=o[u];delete h.metadata,f.push(h)}return f}if(t){const o=s(e.textures),f=s(e.images);o.length>0&&(a.textures=o),f.length>0&&(a.images=f)}return a}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let a=null;if(t!==null){const s=t.length;a=new Array(s);for(let o=0;o!==s;++o)a[o]=t[o].clone()}return this.clippingPlanes=a,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class ni extends xi{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new qe(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new $t,this.combine=eo,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const rt=new U,Ui=new Ie;class Ht{constructor(e,t,a=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=a,this.usage=Qs,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=Kt,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return $l("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,a){e*=this.itemSize,a*=t.itemSize;for(let s=0,o=this.itemSize;s<o;s++)this.array[e+s]=t.array[a+s];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,a=this.count;t<a;t++)Ui.fromBufferAttribute(this,t),Ui.applyMatrix3(e),this.setXY(t,Ui.x,Ui.y);else if(this.itemSize===3)for(let t=0,a=this.count;t<a;t++)rt.fromBufferAttribute(this,t),rt.applyMatrix3(e),this.setXYZ(t,rt.x,rt.y,rt.z);return this}applyMatrix4(e){for(let t=0,a=this.count;t<a;t++)rt.fromBufferAttribute(this,t),rt.applyMatrix4(e),this.setXYZ(t,rt.x,rt.y,rt.z);return this}applyNormalMatrix(e){for(let t=0,a=this.count;t<a;t++)rt.fromBufferAttribute(this,t),rt.applyNormalMatrix(e),this.setXYZ(t,rt.x,rt.y,rt.z);return this}transformDirection(e){for(let t=0,a=this.count;t<a;t++)rt.fromBufferAttribute(this,t),rt.transformDirection(e),this.setXYZ(t,rt.x,rt.y,rt.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let a=this.array[e*this.itemSize+t];return this.normalized&&(a=Zn(a,this.array)),a}setComponent(e,t,a){return this.normalized&&(a=gt(a,this.array)),this.array[e*this.itemSize+t]=a,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Zn(t,this.array)),t}setX(e,t){return this.normalized&&(t=gt(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Zn(t,this.array)),t}setY(e,t){return this.normalized&&(t=gt(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Zn(t,this.array)),t}setZ(e,t){return this.normalized&&(t=gt(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Zn(t,this.array)),t}setW(e,t){return this.normalized&&(t=gt(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,a){return e*=this.itemSize,this.normalized&&(t=gt(t,this.array),a=gt(a,this.array)),this.array[e+0]=t,this.array[e+1]=a,this}setXYZ(e,t,a,s){return e*=this.itemSize,this.normalized&&(t=gt(t,this.array),a=gt(a,this.array),s=gt(s,this.array)),this.array[e+0]=t,this.array[e+1]=a,this.array[e+2]=s,this}setXYZW(e,t,a,s,o){return e*=this.itemSize,this.normalized&&(t=gt(t,this.array),a=gt(a,this.array),s=gt(s,this.array),o=gt(o,this.array)),this.array[e+0]=t,this.array[e+1]=a,this.array[e+2]=s,this.array[e+3]=o,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Qs&&(e.usage=this.usage),e}}class go extends Ht{constructor(e,t,a){super(new Uint16Array(e),t,a)}}class vo extends Ht{constructor(e,t,a){super(new Uint32Array(e),t,a)}}class ut extends Ht{constructor(e,t,a){super(new Float32Array(e),t,a)}}let fc=0;const Pt=new st,zr=new Mt,kn=new U,wt=new vi,pi=new vi,ct=new U;class Tt extends Ln{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:fc++}),this.uuid=oi(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(uo(e)?vo:go)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,a=0){this.groups.push({start:e,count:t,materialIndex:a})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const a=this.attributes.normal;if(a!==void 0){const o=new Ge().getNormalMatrix(e);a.applyNormalMatrix(o),a.needsUpdate=!0}const s=this.attributes.tangent;return s!==void 0&&(s.transformDirection(e),s.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Pt.makeRotationFromQuaternion(e),this.applyMatrix4(Pt),this}rotateX(e){return Pt.makeRotationX(e),this.applyMatrix4(Pt),this}rotateY(e){return Pt.makeRotationY(e),this.applyMatrix4(Pt),this}rotateZ(e){return Pt.makeRotationZ(e),this.applyMatrix4(Pt),this}translate(e,t,a){return Pt.makeTranslation(e,t,a),this.applyMatrix4(Pt),this}scale(e,t,a){return Pt.makeScale(e,t,a),this.applyMatrix4(Pt),this}lookAt(e){return zr.lookAt(e),zr.updateMatrix(),this.applyMatrix4(zr.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(kn).negate(),this.translate(kn.x,kn.y,kn.z),this}setFromPoints(e){const t=[];for(let a=0,s=e.length;a<s;a++){const o=e[a];t.push(o.x,o.y,o.z||0)}return this.setAttribute("position",new ut(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new vi);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new U(-1/0,-1/0,-1/0),new U(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let a=0,s=t.length;a<s;a++){const o=t[a];wt.setFromBufferAttribute(o),this.morphTargetsRelative?(ct.addVectors(this.boundingBox.min,wt.min),this.boundingBox.expandByPoint(ct),ct.addVectors(this.boundingBox.max,wt.max),this.boundingBox.expandByPoint(ct)):(this.boundingBox.expandByPoint(wt.min),this.boundingBox.expandByPoint(wt.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new ur);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new U,1/0);return}if(e){const a=this.boundingSphere.center;if(wt.setFromBufferAttribute(e),t)for(let o=0,f=t.length;o<f;o++){const u=t[o];pi.setFromBufferAttribute(u),this.morphTargetsRelative?(ct.addVectors(wt.min,pi.min),wt.expandByPoint(ct),ct.addVectors(wt.max,pi.max),wt.expandByPoint(ct)):(wt.expandByPoint(pi.min),wt.expandByPoint(pi.max))}wt.getCenter(a);let s=0;for(let o=0,f=e.count;o<f;o++)ct.fromBufferAttribute(e,o),s=Math.max(s,a.distanceToSquared(ct));if(t)for(let o=0,f=t.length;o<f;o++){const u=t[o],h=this.morphTargetsRelative;for(let x=0,m=u.count;x<m;x++)ct.fromBufferAttribute(u,x),h&&(kn.fromBufferAttribute(e,x),ct.add(kn)),s=Math.max(s,a.distanceToSquared(ct))}this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const a=t.position,s=t.normal,o=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Ht(new Float32Array(4*a.count),4));const f=this.getAttribute("tangent"),u=[],h=[];for(let B=0;B<a.count;B++)u[B]=new U,h[B]=new U;const x=new U,m=new U,w=new U,A=new Ie,D=new Ie,I=new Ie,y=new U,l=new U;function c(B,J,X){x.fromBufferAttribute(a,B),m.fromBufferAttribute(a,J),w.fromBufferAttribute(a,X),A.fromBufferAttribute(o,B),D.fromBufferAttribute(o,J),I.fromBufferAttribute(o,X),m.sub(x),w.sub(x),D.sub(A),I.sub(A);const ae=1/(D.x*I.y-I.x*D.y);isFinite(ae)&&(y.copy(m).multiplyScalar(I.y).addScaledVector(w,-D.y).multiplyScalar(ae),l.copy(w).multiplyScalar(D.x).addScaledVector(m,-I.x).multiplyScalar(ae),u[B].add(y),u[J].add(y),u[X].add(y),h[B].add(l),h[J].add(l),h[X].add(l))}let L=this.groups;L.length===0&&(L=[{start:0,count:e.count}]);for(let B=0,J=L.length;B<J;++B){const X=L[B],ae=X.start,He=X.count;for(let Pe=ae,ue=ae+He;Pe<ue;Pe+=3)c(e.getX(Pe+0),e.getX(Pe+1),e.getX(Pe+2))}const R=new U,F=new U,$=new U,b=new U;function k(B){$.fromBufferAttribute(s,B),b.copy($);const J=u[B];R.copy(J),R.sub($.multiplyScalar($.dot(J))).normalize(),F.crossVectors(b,J);const X=F.dot(h[B])<0?-1:1;f.setXYZW(B,R.x,R.y,R.z,X)}for(let B=0,J=L.length;B<J;++B){const X=L[B],ae=X.start,He=X.count;for(let Pe=ae,ue=ae+He;Pe<ue;Pe+=3)k(e.getX(Pe+0)),k(e.getX(Pe+1)),k(e.getX(Pe+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let a=this.getAttribute("normal");if(a===void 0)a=new Ht(new Float32Array(t.count*3),3),this.setAttribute("normal",a);else for(let A=0,D=a.count;A<D;A++)a.setXYZ(A,0,0,0);const s=new U,o=new U,f=new U,u=new U,h=new U,x=new U,m=new U,w=new U;if(e)for(let A=0,D=e.count;A<D;A+=3){const I=e.getX(A+0),y=e.getX(A+1),l=e.getX(A+2);s.fromBufferAttribute(t,I),o.fromBufferAttribute(t,y),f.fromBufferAttribute(t,l),m.subVectors(f,o),w.subVectors(s,o),m.cross(w),u.fromBufferAttribute(a,I),h.fromBufferAttribute(a,y),x.fromBufferAttribute(a,l),u.add(m),h.add(m),x.add(m),a.setXYZ(I,u.x,u.y,u.z),a.setXYZ(y,h.x,h.y,h.z),a.setXYZ(l,x.x,x.y,x.z)}else for(let A=0,D=t.count;A<D;A+=3)s.fromBufferAttribute(t,A+0),o.fromBufferAttribute(t,A+1),f.fromBufferAttribute(t,A+2),m.subVectors(f,o),w.subVectors(s,o),m.cross(w),a.setXYZ(A+0,m.x,m.y,m.z),a.setXYZ(A+1,m.x,m.y,m.z),a.setXYZ(A+2,m.x,m.y,m.z);this.normalizeNormals(),a.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,a=e.count;t<a;t++)ct.fromBufferAttribute(e,t),ct.normalize(),e.setXYZ(t,ct.x,ct.y,ct.z)}toNonIndexed(){function e(u,h){const x=u.array,m=u.itemSize,w=u.normalized,A=new x.constructor(h.length*m);let D=0,I=0;for(let y=0,l=h.length;y<l;y++){u.isInterleavedBufferAttribute?D=h[y]*u.data.stride+u.offset:D=h[y]*m;for(let c=0;c<m;c++)A[I++]=x[D++]}return new Ht(A,m,w)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Tt,a=this.index.array,s=this.attributes;for(const u in s){const h=s[u],x=e(h,a);t.setAttribute(u,x)}const o=this.morphAttributes;for(const u in o){const h=[],x=o[u];for(let m=0,w=x.length;m<w;m++){const A=x[m],D=e(A,a);h.push(D)}t.morphAttributes[u]=h}t.morphTargetsRelative=this.morphTargetsRelative;const f=this.groups;for(let u=0,h=f.length;u<h;u++){const x=f[u];t.addGroup(x.start,x.count,x.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const h=this.parameters;for(const x in h)h[x]!==void 0&&(e[x]=h[x]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const a=this.attributes;for(const h in a){const x=a[h];e.data.attributes[h]=x.toJSON(e.data)}const s={};let o=!1;for(const h in this.morphAttributes){const x=this.morphAttributes[h],m=[];for(let w=0,A=x.length;w<A;w++){const D=x[w];m.push(D.toJSON(e.data))}m.length>0&&(s[h]=m,o=!0)}o&&(e.data.morphAttributes=s,e.data.morphTargetsRelative=this.morphTargetsRelative);const f=this.groups;f.length>0&&(e.data.groups=JSON.parse(JSON.stringify(f)));const u=this.boundingSphere;return u!==null&&(e.data.boundingSphere={center:u.center.toArray(),radius:u.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const a=e.index;a!==null&&this.setIndex(a.clone(t));const s=e.attributes;for(const x in s){const m=s[x];this.setAttribute(x,m.clone(t))}const o=e.morphAttributes;for(const x in o){const m=[],w=o[x];for(let A=0,D=w.length;A<D;A++)m.push(w[A].clone(t));this.morphAttributes[x]=m}this.morphTargetsRelative=e.morphTargetsRelative;const f=e.groups;for(let x=0,m=f.length;x<m;x++){const w=f[x];this.addGroup(w.start,w.count,w.materialIndex)}const u=e.boundingBox;u!==null&&(this.boundingBox=u.clone());const h=e.boundingSphere;return h!==null&&(this.boundingSphere=h.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const da=new st,xn=new hs,Ii=new ur,pa=new U,Wn=new U,Xn=new U,Yn=new U,Gr=new U,Ni=new U,Fi=new Ie,Oi=new Ie,Bi=new Ie,ma=new U,_a=new U,ga=new U,zi=new U,Gi=new U;class Rt extends Mt{constructor(e=new Tt,t=new ni){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const a=e[t[0]];if(a!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=a.length;s<o;s++){const f=a[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[f]=s}}}}getVertexPosition(e,t){const a=this.geometry,s=a.attributes.position,o=a.morphAttributes.position,f=a.morphTargetsRelative;t.fromBufferAttribute(s,e);const u=this.morphTargetInfluences;if(o&&u){Ni.set(0,0,0);for(let h=0,x=o.length;h<x;h++){const m=u[h],w=o[h];m!==0&&(Gr.fromBufferAttribute(w,e),f?Ni.addScaledVector(Gr,m):Ni.addScaledVector(Gr.sub(t),m))}t.add(Ni)}return t}raycast(e,t){const a=this.geometry,s=this.material,o=this.matrixWorld;s!==void 0&&(a.boundingSphere===null&&a.computeBoundingSphere(),Ii.copy(a.boundingSphere),Ii.applyMatrix4(o),xn.copy(e.ray).recast(e.near),!(Ii.containsPoint(xn.origin)===!1&&(xn.intersectSphere(Ii,pa)===null||xn.origin.distanceToSquared(pa)>(e.far-e.near)**2))&&(da.copy(o).invert(),xn.copy(e.ray).applyMatrix4(da),!(a.boundingBox!==null&&xn.intersectsBox(a.boundingBox)===!1)&&this._computeIntersections(e,t,xn)))}_computeIntersections(e,t,a){let s;const o=this.geometry,f=this.material,u=o.index,h=o.attributes.position,x=o.attributes.uv,m=o.attributes.uv1,w=o.attributes.normal,A=o.groups,D=o.drawRange;if(u!==null)if(Array.isArray(f))for(let I=0,y=A.length;I<y;I++){const l=A[I],c=f[l.materialIndex],L=Math.max(l.start,D.start),R=Math.min(u.count,Math.min(l.start+l.count,D.start+D.count));for(let F=L,$=R;F<$;F+=3){const b=u.getX(F),k=u.getX(F+1),B=u.getX(F+2);s=Hi(this,c,e,a,x,m,w,b,k,B),s&&(s.faceIndex=Math.floor(F/3),s.face.materialIndex=l.materialIndex,t.push(s))}}else{const I=Math.max(0,D.start),y=Math.min(u.count,D.start+D.count);for(let l=I,c=y;l<c;l+=3){const L=u.getX(l),R=u.getX(l+1),F=u.getX(l+2);s=Hi(this,f,e,a,x,m,w,L,R,F),s&&(s.faceIndex=Math.floor(l/3),t.push(s))}}else if(h!==void 0)if(Array.isArray(f))for(let I=0,y=A.length;I<y;I++){const l=A[I],c=f[l.materialIndex],L=Math.max(l.start,D.start),R=Math.min(h.count,Math.min(l.start+l.count,D.start+D.count));for(let F=L,$=R;F<$;F+=3){const b=F,k=F+1,B=F+2;s=Hi(this,c,e,a,x,m,w,b,k,B),s&&(s.faceIndex=Math.floor(F/3),s.face.materialIndex=l.materialIndex,t.push(s))}}else{const I=Math.max(0,D.start),y=Math.min(h.count,D.start+D.count);for(let l=I,c=y;l<c;l+=3){const L=l,R=l+1,F=l+2;s=Hi(this,f,e,a,x,m,w,L,R,F),s&&(s.faceIndex=Math.floor(l/3),t.push(s))}}}}function dc(r,e,t,a,s,o,f,u){let h;if(e.side===Et?h=a.intersectTriangle(f,o,s,!0,u):h=a.intersectTriangle(s,o,f,e.side===hn,u),h===null)return null;Gi.copy(u),Gi.applyMatrix4(r.matrixWorld);const x=t.ray.origin.distanceTo(Gi);return x<t.near||x>t.far?null:{distance:x,point:Gi.clone(),object:r}}function Hi(r,e,t,a,s,o,f,u,h,x){r.getVertexPosition(u,Wn),r.getVertexPosition(h,Xn),r.getVertexPosition(x,Yn);const m=dc(r,e,t,a,Wn,Xn,Yn,zi);if(m){s&&(Fi.fromBufferAttribute(s,u),Oi.fromBufferAttribute(s,h),Bi.fromBufferAttribute(s,x),m.uv=Ot.getInterpolation(zi,Wn,Xn,Yn,Fi,Oi,Bi,new Ie)),o&&(Fi.fromBufferAttribute(o,u),Oi.fromBufferAttribute(o,h),Bi.fromBufferAttribute(o,x),m.uv1=Ot.getInterpolation(zi,Wn,Xn,Yn,Fi,Oi,Bi,new Ie)),f&&(ma.fromBufferAttribute(f,u),_a.fromBufferAttribute(f,h),ga.fromBufferAttribute(f,x),m.normal=Ot.getInterpolation(zi,Wn,Xn,Yn,ma,_a,ga,new U),m.normal.dot(a.direction)>0&&m.normal.multiplyScalar(-1));const w={a:u,b:h,c:x,normal:new U,materialIndex:0};Ot.getNormal(Wn,Xn,Yn,w.normal),m.face=w}return m}class Mi extends Tt{constructor(e=1,t=1,a=1,s=1,o=1,f=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:a,widthSegments:s,heightSegments:o,depthSegments:f};const u=this;s=Math.floor(s),o=Math.floor(o),f=Math.floor(f);const h=[],x=[],m=[],w=[];let A=0,D=0;I("z","y","x",-1,-1,a,t,e,f,o,0),I("z","y","x",1,-1,a,t,-e,f,o,1),I("x","z","y",1,1,e,a,t,s,f,2),I("x","z","y",1,-1,e,a,-t,s,f,3),I("x","y","z",1,-1,e,t,a,s,o,4),I("x","y","z",-1,-1,e,t,-a,s,o,5),this.setIndex(h),this.setAttribute("position",new ut(x,3)),this.setAttribute("normal",new ut(m,3)),this.setAttribute("uv",new ut(w,2));function I(y,l,c,L,R,F,$,b,k,B,J){const X=F/k,ae=$/B,He=F/2,Pe=$/2,ue=b/2,Oe=k+1,we=B+1;let Ze=0,it=0;const lt=new U;for(let Vt=0;Vt<we;Vt++){const _e=Vt*ae-Pe;for(let pr=0;pr<Oe;pr++){const _s=pr*X-He;lt[y]=_s*L,lt[l]=_e*R,lt[c]=ue,x.push(lt.x,lt.y,lt.z),lt[y]=0,lt[l]=0,lt[c]=b>0?1:-1,m.push(lt.x,lt.y,lt.z),w.push(pr/k),w.push(1-Vt/B),Ze+=1}}for(let Vt=0;Vt<B;Vt++)for(let _e=0;_e<k;_e++){const pr=A+_e+Oe*Vt,_s=A+_e+Oe*(Vt+1),Ei=A+(_e+1)+Oe*(Vt+1),Bl=A+(_e+1)+Oe*Vt;h.push(pr,_s,Bl),h.push(_s,Ei,Bl),it+=6}u.addGroup(D,it,J),D+=it,A+=Ze}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Mi(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function ai(r){const e={};for(const t in r){e[t]={};for(const a in r[t]){const s=r[t][a];s&&(s.isColor||s.isMatrix3||s.isMatrix4||s.isVector2||s.isVector3||s.isVector4||s.isTexture||s.isQuaternion)?s.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][a]=null):e[t][a]=s.clone():Array.isArray(s)?e[t][a]=s.slice():e[t][a]=s}}return e}function vt(r){const e={};for(let t=0;t<r.length;t++){const a=ai(r[t]);for(const s in a)e[s]=a[s]}return e}function pc(r){const e=[];for(let t=0;t<r.length;t++)e.push(r[t].clone());return e}function xo(r){return r.getRenderTarget()===null?r.outputColorSpace:je.workingColorSpace}const mc={clone:ai,merge:vt};var _c=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,gc=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class fn extends xi{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=_c,this.fragmentShader=gc,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1,clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=ai(e.uniforms),this.uniformsGroups=pc(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const s in this.uniforms){const o=this.uniforms[s].value;o&&o.isTexture?t.uniforms[s]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[s]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[s]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[s]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[s]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[s]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[s]={type:"m4",value:o.toArray()}:t.uniforms[s]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const a={};for(const s in this.extensions)this.extensions[s]===!0&&(a[s]=!0);return Object.keys(a).length>0&&(t.extensions=a),t}}class Mo extends Mt{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new st,this.projectionMatrix=new st,this.projectionMatrixInverse=new st,this.coordinateSystem=Zt}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const rn=new U,va=new Ie,xa=new Ie;class Lt extends Mo{constructor(e=50,t=1,a=.1,s=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=a,this.far=s,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=gi*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(ei*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return gi*2*Math.atan(Math.tan(ei*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,a){rn.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(rn.x,rn.y).multiplyScalar(-e/rn.z),rn.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),a.set(rn.x,rn.y).multiplyScalar(-e/rn.z)}getViewSize(e,t){return this.getViewBounds(e,va,xa),t.subVectors(xa,va)}setViewOffset(e,t,a,s,o,f){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=a,this.view.offsetY=s,this.view.width=o,this.view.height=f,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(ei*.5*this.fov)/this.zoom,a=2*t,s=this.aspect*a,o=-.5*s;const f=this.view;if(this.view!==null&&this.view.enabled){const h=f.fullWidth,x=f.fullHeight;o+=f.offsetX*s/h,t-=f.offsetY*a/x,s*=f.width/h,a*=f.height/x}const u=this.filmOffset;u!==0&&(o+=e*u/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+s,t,t-a,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const qn=-90,jn=1;class vc extends Mt{constructor(e,t,a){super(),this.type="CubeCamera",this.renderTarget=a,this.coordinateSystem=null,this.activeMipmapLevel=0;const s=new Lt(qn,jn,e,t);s.layers=this.layers,this.add(s);const o=new Lt(qn,jn,e,t);o.layers=this.layers,this.add(o);const f=new Lt(qn,jn,e,t);f.layers=this.layers,this.add(f);const u=new Lt(qn,jn,e,t);u.layers=this.layers,this.add(u);const h=new Lt(qn,jn,e,t);h.layers=this.layers,this.add(h);const x=new Lt(qn,jn,e,t);x.layers=this.layers,this.add(x)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[a,s,o,f,u,h]=t;for(const x of t)this.remove(x);if(e===Zt)a.up.set(0,1,0),a.lookAt(1,0,0),s.up.set(0,1,0),s.lookAt(-1,0,0),o.up.set(0,0,-1),o.lookAt(0,1,0),f.up.set(0,0,1),f.lookAt(0,-1,0),u.up.set(0,1,0),u.lookAt(0,0,1),h.up.set(0,1,0),h.lookAt(0,0,-1);else if(e===ir)a.up.set(0,-1,0),a.lookAt(-1,0,0),s.up.set(0,-1,0),s.lookAt(1,0,0),o.up.set(0,0,1),o.lookAt(0,1,0),f.up.set(0,0,-1),f.lookAt(0,-1,0),u.up.set(0,-1,0),u.lookAt(0,0,1),h.up.set(0,-1,0),h.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const x of t)this.add(x),x.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:a,activeMipmapLevel:s}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[o,f,u,h,x,m]=this.children,w=e.getRenderTarget(),A=e.getActiveCubeFace(),D=e.getActiveMipmapLevel(),I=e.xr.enabled;e.xr.enabled=!1;const y=a.texture.generateMipmaps;a.texture.generateMipmaps=!1,e.setRenderTarget(a,0,s),e.render(t,o),e.setRenderTarget(a,1,s),e.render(t,f),e.setRenderTarget(a,2,s),e.render(t,u),e.setRenderTarget(a,3,s),e.render(t,h),e.setRenderTarget(a,4,s),e.render(t,x),a.texture.generateMipmaps=y,e.setRenderTarget(a,5,s),e.render(t,m),e.setRenderTarget(w,A,D),e.xr.enabled=I,a.texture.needsPMREMUpdate=!0}}class So extends yt{constructor(e,t,a,s,o,f,u,h,x,m){e=e!==void 0?e:[],t=t!==void 0?t:ii,super(e,t,a,s,o,f,u,h,x,m),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class xc extends Cn{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const a={width:e,height:e,depth:1},s=[a,a,a,a,a,a];this.texture=new So(s,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:St}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const a={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},s=new Mi(5,5,5),o=new fn({name:"CubemapFromEquirect",uniforms:ai(a.uniforms),vertexShader:a.vertexShader,fragmentShader:a.fragmentShader,side:Et,blending:ln});o.uniforms.tEquirect.value=t;const f=new Rt(s,o),u=t.minFilter;return t.minFilter===An&&(t.minFilter=St),new vc(1,10,this).update(e,f),t.minFilter=u,f.geometry.dispose(),f.material.dispose(),this}clear(e,t,a,s){const o=e.getRenderTarget();for(let f=0;f<6;f++)e.setRenderTarget(this,f),e.clear(t,a,s);e.setRenderTarget(o)}}const Hr=new U,Mc=new U,Sc=new Ge;class sn{constructor(e=new U(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,a,s){return this.normal.set(e,t,a),this.constant=s,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,a){const s=Hr.subVectors(a,t).cross(Mc.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(s,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const a=e.delta(Hr),s=this.normal.dot(a);if(s===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const o=-(e.start.dot(this.normal)+this.constant)/s;return o<0||o>1?null:t.copy(e.start).addScaledVector(a,o)}intersectsLine(e){const t=this.distanceToPoint(e.start),a=this.distanceToPoint(e.end);return t<0&&a>0||a<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const a=t||Sc.getNormalMatrix(e),s=this.coplanarPoint(Hr).applyMatrix4(e),o=this.normal.applyMatrix3(a).normalize();return this.constant=-s.dot(o),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Mn=new ur,Vi=new U;class Eo{constructor(e=new sn,t=new sn,a=new sn,s=new sn,o=new sn,f=new sn){this.planes=[e,t,a,s,o,f]}set(e,t,a,s,o,f){const u=this.planes;return u[0].copy(e),u[1].copy(t),u[2].copy(a),u[3].copy(s),u[4].copy(o),u[5].copy(f),this}copy(e){const t=this.planes;for(let a=0;a<6;a++)t[a].copy(e.planes[a]);return this}setFromProjectionMatrix(e,t=Zt){const a=this.planes,s=e.elements,o=s[0],f=s[1],u=s[2],h=s[3],x=s[4],m=s[5],w=s[6],A=s[7],D=s[8],I=s[9],y=s[10],l=s[11],c=s[12],L=s[13],R=s[14],F=s[15];if(a[0].setComponents(h-o,A-x,l-D,F-c).normalize(),a[1].setComponents(h+o,A+x,l+D,F+c).normalize(),a[2].setComponents(h+f,A+m,l+I,F+L).normalize(),a[3].setComponents(h-f,A-m,l-I,F-L).normalize(),a[4].setComponents(h-u,A-w,l-y,F-R).normalize(),t===Zt)a[5].setComponents(h+u,A+w,l+y,F+R).normalize();else if(t===ir)a[5].setComponents(u,w,y,R).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Mn.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Mn.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Mn)}intersectsSprite(e){return Mn.center.set(0,0,0),Mn.radius=.7071067811865476,Mn.applyMatrix4(e.matrixWorld),this.intersectsSphere(Mn)}intersectsSphere(e){const t=this.planes,a=e.center,s=-e.radius;for(let o=0;o<6;o++)if(t[o].distanceToPoint(a)<s)return!1;return!0}intersectsBox(e){const t=this.planes;for(let a=0;a<6;a++){const s=t[a];if(Vi.x=s.normal.x>0?e.max.x:e.min.x,Vi.y=s.normal.y>0?e.max.y:e.min.y,Vi.z=s.normal.z>0?e.max.z:e.min.z,s.distanceToPoint(Vi)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let a=0;a<6;a++)if(t[a].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function yo(){let r=null,e=!1,t=null,a=null;function s(o,f){t(o,f),a=r.requestAnimationFrame(s)}return{start:function(){e!==!0&&t!==null&&(a=r.requestAnimationFrame(s),e=!0)},stop:function(){r.cancelAnimationFrame(a),e=!1},setAnimationLoop:function(o){t=o},setContext:function(o){r=o}}}function Ec(r,e){const t=e.isWebGL2,a=new WeakMap;function s(x,m){const w=x.array,A=x.usage,D=w.byteLength,I=r.createBuffer();r.bindBuffer(m,I),r.bufferData(m,w,A),x.onUploadCallback();let y;if(w instanceof Float32Array)y=r.FLOAT;else if(w instanceof Uint16Array)if(x.isFloat16BufferAttribute)if(t)y=r.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else y=r.UNSIGNED_SHORT;else if(w instanceof Int16Array)y=r.SHORT;else if(w instanceof Uint32Array)y=r.UNSIGNED_INT;else if(w instanceof Int32Array)y=r.INT;else if(w instanceof Int8Array)y=r.BYTE;else if(w instanceof Uint8Array)y=r.UNSIGNED_BYTE;else if(w instanceof Uint8ClampedArray)y=r.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+w);return{buffer:I,type:y,bytesPerElement:w.BYTES_PER_ELEMENT,version:x.version,size:D}}function o(x,m,w){const A=m.array,D=m._updateRange,I=m.updateRanges;if(r.bindBuffer(w,x),D.count===-1&&I.length===0&&r.bufferSubData(w,0,A),I.length!==0){for(let y=0,l=I.length;y<l;y++){const c=I[y];t?r.bufferSubData(w,c.start*A.BYTES_PER_ELEMENT,A,c.start,c.count):r.bufferSubData(w,c.start*A.BYTES_PER_ELEMENT,A.subarray(c.start,c.start+c.count))}m.clearUpdateRanges()}D.count!==-1&&(t?r.bufferSubData(w,D.offset*A.BYTES_PER_ELEMENT,A,D.offset,D.count):r.bufferSubData(w,D.offset*A.BYTES_PER_ELEMENT,A.subarray(D.offset,D.offset+D.count)),D.count=-1),m.onUploadCallback()}function f(x){return x.isInterleavedBufferAttribute&&(x=x.data),a.get(x)}function u(x){x.isInterleavedBufferAttribute&&(x=x.data);const m=a.get(x);m&&(r.deleteBuffer(m.buffer),a.delete(x))}function h(x,m){if(x.isGLBufferAttribute){const A=a.get(x);(!A||A.version<x.version)&&a.set(x,{buffer:x.buffer,type:x.type,bytesPerElement:x.elementSize,version:x.version});return}x.isInterleavedBufferAttribute&&(x=x.data);const w=a.get(x);if(w===void 0)a.set(x,s(x,m));else if(w.version<x.version){if(w.size!==x.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");o(w.buffer,x,m),w.version=x.version}}return{get:f,remove:u,update:h}}class hr extends Tt{constructor(e=1,t=1,a=1,s=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:a,heightSegments:s};const o=e/2,f=t/2,u=Math.floor(a),h=Math.floor(s),x=u+1,m=h+1,w=e/u,A=t/h,D=[],I=[],y=[],l=[];for(let c=0;c<m;c++){const L=c*A-f;for(let R=0;R<x;R++){const F=R*w-o;I.push(F,-L,0),y.push(0,0,1),l.push(R/u),l.push(1-c/h)}}for(let c=0;c<h;c++)for(let L=0;L<u;L++){const R=L+x*c,F=L+x*(c+1),$=L+1+x*(c+1),b=L+1+x*c;D.push(R,F,b),D.push(F,$,b)}this.setIndex(D),this.setAttribute("position",new ut(I,3)),this.setAttribute("normal",new ut(y,3)),this.setAttribute("uv",new ut(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new hr(e.width,e.height,e.widthSegments,e.heightSegments)}}var yc=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,Tc=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,bc=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,Ac=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,wc=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,Rc=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Cc=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Pc=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Lc=`#ifdef USE_BATCHING
	attribute float batchId;
	uniform highp sampler2D batchingTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,Dc=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( batchId );
#endif`,Uc=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,Ic=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Nc=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,Fc=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Oc=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Bc=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,zc=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Gc=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Hc=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,Vc=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,kc=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,Wc=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,Xc=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,Yc=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,qc=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,jc=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Kc=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,Zc=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,$c=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Jc=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Qc="gl_FragColor = linearToOutputTexel( gl_FragColor );",eu=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,tu=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,nu=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,iu=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,ru=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,su=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,au=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,ou=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,lu=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,cu=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,uu=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,hu=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,fu=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,du=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,pu=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,mu=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,_u=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,gu=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,vu=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,xu=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Mu=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,Su=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,Eu=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,yu=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Tu=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,bu=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,Au=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,wu=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Ru=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,Cu=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,Pu=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,Lu=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Du=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Uu=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Iu=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Nu=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,Fu=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[MORPHTARGETS_COUNT];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,Ou=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Bu=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,zu=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
	#endif
	#ifdef MORPHTARGETS_TEXTURE
		#ifndef USE_INSTANCING_MORPH
			uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		#endif
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,Gu=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,Hu=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,Vu=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,ku=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Wu=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Xu=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,Yu=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,qu=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,ju=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,Ku=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,Zu=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,$u=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,Ju=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,Qu=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,eh=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,th=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,nh=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,ih=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,rh=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,sh=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,ah=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,oh=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,lh=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,ch=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,uh=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,hh=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,fh=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,dh=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,ph=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,mh=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,_h=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	float startCompression = 0.8 - 0.04;
	float desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min(color.r, min(color.g, color.b));
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max(color.r, max(color.g, color.b));
	if (peak < startCompression) return color;
	float d = 1. - startCompression;
	float newPeak = 1. - d * d / (peak + d - startCompression);
	color *= newPeak / peak;
	float g = 1. - 1. / (desaturation * (peak - newPeak) + 1.);
	return mix(color, vec3(1, 1, 1), g);
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,gh=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,vh=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,xh=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Mh=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Sh=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,Eh=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const yh=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,Th=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,bh=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Ah=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,wh=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Rh=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Ch=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,Ph=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,Lh=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Dh=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,Uh=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,Ih=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Nh=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Fh=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Oh=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Bh=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,zh=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Gh=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Hh=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,Vh=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,kh=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,Wh=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,Xh=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Yh=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,qh=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,jh=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Kh=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Zh=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,$h=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,Jh=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Qh=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,ef=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,tf=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,nf=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,ze={alphahash_fragment:yc,alphahash_pars_fragment:Tc,alphamap_fragment:bc,alphamap_pars_fragment:Ac,alphatest_fragment:wc,alphatest_pars_fragment:Rc,aomap_fragment:Cc,aomap_pars_fragment:Pc,batching_pars_vertex:Lc,batching_vertex:Dc,begin_vertex:Uc,beginnormal_vertex:Ic,bsdfs:Nc,iridescence_fragment:Fc,bumpmap_pars_fragment:Oc,clipping_planes_fragment:Bc,clipping_planes_pars_fragment:zc,clipping_planes_pars_vertex:Gc,clipping_planes_vertex:Hc,color_fragment:Vc,color_pars_fragment:kc,color_pars_vertex:Wc,color_vertex:Xc,common:Yc,cube_uv_reflection_fragment:qc,defaultnormal_vertex:jc,displacementmap_pars_vertex:Kc,displacementmap_vertex:Zc,emissivemap_fragment:$c,emissivemap_pars_fragment:Jc,colorspace_fragment:Qc,colorspace_pars_fragment:eu,envmap_fragment:tu,envmap_common_pars_fragment:nu,envmap_pars_fragment:iu,envmap_pars_vertex:ru,envmap_physical_pars_fragment:_u,envmap_vertex:su,fog_vertex:au,fog_pars_vertex:ou,fog_fragment:lu,fog_pars_fragment:cu,gradientmap_pars_fragment:uu,lightmap_fragment:hu,lightmap_pars_fragment:fu,lights_lambert_fragment:du,lights_lambert_pars_fragment:pu,lights_pars_begin:mu,lights_toon_fragment:gu,lights_toon_pars_fragment:vu,lights_phong_fragment:xu,lights_phong_pars_fragment:Mu,lights_physical_fragment:Su,lights_physical_pars_fragment:Eu,lights_fragment_begin:yu,lights_fragment_maps:Tu,lights_fragment_end:bu,logdepthbuf_fragment:Au,logdepthbuf_pars_fragment:wu,logdepthbuf_pars_vertex:Ru,logdepthbuf_vertex:Cu,map_fragment:Pu,map_pars_fragment:Lu,map_particle_fragment:Du,map_particle_pars_fragment:Uu,metalnessmap_fragment:Iu,metalnessmap_pars_fragment:Nu,morphinstance_vertex:Fu,morphcolor_vertex:Ou,morphnormal_vertex:Bu,morphtarget_pars_vertex:zu,morphtarget_vertex:Gu,normal_fragment_begin:Hu,normal_fragment_maps:Vu,normal_pars_fragment:ku,normal_pars_vertex:Wu,normal_vertex:Xu,normalmap_pars_fragment:Yu,clearcoat_normal_fragment_begin:qu,clearcoat_normal_fragment_maps:ju,clearcoat_pars_fragment:Ku,iridescence_pars_fragment:Zu,opaque_fragment:$u,packing:Ju,premultiplied_alpha_fragment:Qu,project_vertex:eh,dithering_fragment:th,dithering_pars_fragment:nh,roughnessmap_fragment:ih,roughnessmap_pars_fragment:rh,shadowmap_pars_fragment:sh,shadowmap_pars_vertex:ah,shadowmap_vertex:oh,shadowmask_pars_fragment:lh,skinbase_vertex:ch,skinning_pars_vertex:uh,skinning_vertex:hh,skinnormal_vertex:fh,specularmap_fragment:dh,specularmap_pars_fragment:ph,tonemapping_fragment:mh,tonemapping_pars_fragment:_h,transmission_fragment:gh,transmission_pars_fragment:vh,uv_pars_fragment:xh,uv_pars_vertex:Mh,uv_vertex:Sh,worldpos_vertex:Eh,background_vert:yh,background_frag:Th,backgroundCube_vert:bh,backgroundCube_frag:Ah,cube_vert:wh,cube_frag:Rh,depth_vert:Ch,depth_frag:Ph,distanceRGBA_vert:Lh,distanceRGBA_frag:Dh,equirect_vert:Uh,equirect_frag:Ih,linedashed_vert:Nh,linedashed_frag:Fh,meshbasic_vert:Oh,meshbasic_frag:Bh,meshlambert_vert:zh,meshlambert_frag:Gh,meshmatcap_vert:Hh,meshmatcap_frag:Vh,meshnormal_vert:kh,meshnormal_frag:Wh,meshphong_vert:Xh,meshphong_frag:Yh,meshphysical_vert:qh,meshphysical_frag:jh,meshtoon_vert:Kh,meshtoon_frag:Zh,points_vert:$h,points_frag:Jh,shadow_vert:Qh,shadow_frag:ef,sprite_vert:tf,sprite_frag:nf},oe={common:{diffuse:{value:new qe(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Ge},alphaMap:{value:null},alphaMapTransform:{value:new Ge},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Ge}},envmap:{envMap:{value:null},envMapRotation:{value:new Ge},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Ge}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Ge}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Ge},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Ge},normalScale:{value:new Ie(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Ge},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Ge}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Ge}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Ge}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new qe(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new qe(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Ge},alphaTest:{value:0},uvTransform:{value:new Ge}},sprite:{diffuse:{value:new qe(16777215)},opacity:{value:1},center:{value:new Ie(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Ge},alphaMap:{value:null},alphaMapTransform:{value:new Ge},alphaTest:{value:0}}},zt={basic:{uniforms:vt([oe.common,oe.specularmap,oe.envmap,oe.aomap,oe.lightmap,oe.fog]),vertexShader:ze.meshbasic_vert,fragmentShader:ze.meshbasic_frag},lambert:{uniforms:vt([oe.common,oe.specularmap,oe.envmap,oe.aomap,oe.lightmap,oe.emissivemap,oe.bumpmap,oe.normalmap,oe.displacementmap,oe.fog,oe.lights,{emissive:{value:new qe(0)}}]),vertexShader:ze.meshlambert_vert,fragmentShader:ze.meshlambert_frag},phong:{uniforms:vt([oe.common,oe.specularmap,oe.envmap,oe.aomap,oe.lightmap,oe.emissivemap,oe.bumpmap,oe.normalmap,oe.displacementmap,oe.fog,oe.lights,{emissive:{value:new qe(0)},specular:{value:new qe(1118481)},shininess:{value:30}}]),vertexShader:ze.meshphong_vert,fragmentShader:ze.meshphong_frag},standard:{uniforms:vt([oe.common,oe.envmap,oe.aomap,oe.lightmap,oe.emissivemap,oe.bumpmap,oe.normalmap,oe.displacementmap,oe.roughnessmap,oe.metalnessmap,oe.fog,oe.lights,{emissive:{value:new qe(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ze.meshphysical_vert,fragmentShader:ze.meshphysical_frag},toon:{uniforms:vt([oe.common,oe.aomap,oe.lightmap,oe.emissivemap,oe.bumpmap,oe.normalmap,oe.displacementmap,oe.gradientmap,oe.fog,oe.lights,{emissive:{value:new qe(0)}}]),vertexShader:ze.meshtoon_vert,fragmentShader:ze.meshtoon_frag},matcap:{uniforms:vt([oe.common,oe.bumpmap,oe.normalmap,oe.displacementmap,oe.fog,{matcap:{value:null}}]),vertexShader:ze.meshmatcap_vert,fragmentShader:ze.meshmatcap_frag},points:{uniforms:vt([oe.points,oe.fog]),vertexShader:ze.points_vert,fragmentShader:ze.points_frag},dashed:{uniforms:vt([oe.common,oe.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ze.linedashed_vert,fragmentShader:ze.linedashed_frag},depth:{uniforms:vt([oe.common,oe.displacementmap]),vertexShader:ze.depth_vert,fragmentShader:ze.depth_frag},normal:{uniforms:vt([oe.common,oe.bumpmap,oe.normalmap,oe.displacementmap,{opacity:{value:1}}]),vertexShader:ze.meshnormal_vert,fragmentShader:ze.meshnormal_frag},sprite:{uniforms:vt([oe.sprite,oe.fog]),vertexShader:ze.sprite_vert,fragmentShader:ze.sprite_frag},background:{uniforms:{uvTransform:{value:new Ge},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:ze.background_vert,fragmentShader:ze.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Ge}},vertexShader:ze.backgroundCube_vert,fragmentShader:ze.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ze.cube_vert,fragmentShader:ze.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ze.equirect_vert,fragmentShader:ze.equirect_frag},distanceRGBA:{uniforms:vt([oe.common,oe.displacementmap,{referencePosition:{value:new U},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ze.distanceRGBA_vert,fragmentShader:ze.distanceRGBA_frag},shadow:{uniforms:vt([oe.lights,oe.fog,{color:{value:new qe(0)},opacity:{value:1}}]),vertexShader:ze.shadow_vert,fragmentShader:ze.shadow_frag}};zt.physical={uniforms:vt([zt.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Ge},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Ge},clearcoatNormalScale:{value:new Ie(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Ge},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Ge},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Ge},sheen:{value:0},sheenColor:{value:new qe(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Ge},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Ge},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Ge},transmissionSamplerSize:{value:new Ie},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Ge},attenuationDistance:{value:0},attenuationColor:{value:new qe(0)},specularColor:{value:new qe(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Ge},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Ge},anisotropyVector:{value:new Ie},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Ge}}]),vertexShader:ze.meshphysical_vert,fragmentShader:ze.meshphysical_frag};const ki={r:0,b:0,g:0},Sn=new $t,rf=new st;function sf(r,e,t,a,s,o,f){const u=new qe(0);let h=o===!0?0:1,x,m,w=null,A=0,D=null;function I(l,c){let L=!1,R=c.isScene===!0?c.background:null;R&&R.isTexture&&(R=(c.backgroundBlurriness>0?t:e).get(R)),R===null?y(u,h):R&&R.isColor&&(y(R,1),L=!0);const F=r.xr.getEnvironmentBlendMode();F==="additive"?a.buffers.color.setClear(0,0,0,1,f):F==="alpha-blend"&&a.buffers.color.setClear(0,0,0,0,f),(r.autoClear||L)&&r.clear(r.autoClearColor,r.autoClearDepth,r.autoClearStencil),R&&(R.isCubeTexture||R.mapping===lr)?(m===void 0&&(m=new Rt(new Mi(1,1,1),new fn({name:"BackgroundCubeMaterial",uniforms:ai(zt.backgroundCube.uniforms),vertexShader:zt.backgroundCube.vertexShader,fragmentShader:zt.backgroundCube.fragmentShader,side:Et,depthTest:!1,depthWrite:!1,fog:!1})),m.geometry.deleteAttribute("normal"),m.geometry.deleteAttribute("uv"),m.onBeforeRender=function($,b,k){this.matrixWorld.copyPosition(k.matrixWorld)},Object.defineProperty(m.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),s.update(m)),Sn.copy(c.backgroundRotation),Sn.x*=-1,Sn.y*=-1,Sn.z*=-1,R.isCubeTexture&&R.isRenderTargetTexture===!1&&(Sn.y*=-1,Sn.z*=-1),m.material.uniforms.envMap.value=R,m.material.uniforms.flipEnvMap.value=R.isCubeTexture&&R.isRenderTargetTexture===!1?-1:1,m.material.uniforms.backgroundBlurriness.value=c.backgroundBlurriness,m.material.uniforms.backgroundIntensity.value=c.backgroundIntensity,m.material.uniforms.backgroundRotation.value.setFromMatrix4(rf.makeRotationFromEuler(Sn)),m.material.toneMapped=je.getTransfer(R.colorSpace)!==$e,(w!==R||A!==R.version||D!==r.toneMapping)&&(m.material.needsUpdate=!0,w=R,A=R.version,D=r.toneMapping),m.layers.enableAll(),l.unshift(m,m.geometry,m.material,0,0,null)):R&&R.isTexture&&(x===void 0&&(x=new Rt(new hr(2,2),new fn({name:"BackgroundMaterial",uniforms:ai(zt.background.uniforms),vertexShader:zt.background.vertexShader,fragmentShader:zt.background.fragmentShader,side:hn,depthTest:!1,depthWrite:!1,fog:!1})),x.geometry.deleteAttribute("normal"),Object.defineProperty(x.material,"map",{get:function(){return this.uniforms.t2D.value}}),s.update(x)),x.material.uniforms.t2D.value=R,x.material.uniforms.backgroundIntensity.value=c.backgroundIntensity,x.material.toneMapped=je.getTransfer(R.colorSpace)!==$e,R.matrixAutoUpdate===!0&&R.updateMatrix(),x.material.uniforms.uvTransform.value.copy(R.matrix),(w!==R||A!==R.version||D!==r.toneMapping)&&(x.material.needsUpdate=!0,w=R,A=R.version,D=r.toneMapping),x.layers.enableAll(),l.unshift(x,x.geometry,x.material,0,0,null))}function y(l,c){l.getRGB(ki,xo(r)),a.buffers.color.setClear(ki.r,ki.g,ki.b,c,f)}return{getClearColor:function(){return u},setClearColor:function(l,c=1){u.set(l),h=c,y(u,h)},getClearAlpha:function(){return h},setClearAlpha:function(l){h=l,y(u,h)},render:I}}function af(r,e,t,a){const s=r.getParameter(r.MAX_VERTEX_ATTRIBS),o=a.isWebGL2?null:e.get("OES_vertex_array_object"),f=a.isWebGL2||o!==null,u={},h=l(null);let x=h,m=!1;function w(ue,Oe,we,Ze,it){let lt=!1;if(f){const Vt=y(Ze,we,Oe);x!==Vt&&(x=Vt,D(x.object)),lt=c(ue,Ze,we,it),lt&&L(ue,Ze,we,it)}else{const Vt=Oe.wireframe===!0;(x.geometry!==Ze.id||x.program!==we.id||x.wireframe!==Vt)&&(x.geometry=Ze.id,x.program=we.id,x.wireframe=Vt,lt=!0)}it!==null&&t.update(it,r.ELEMENT_ARRAY_BUFFER),(lt||m)&&(m=!1,B(ue,Oe,we,Ze),it!==null&&r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,t.get(it).buffer))}function A(){return a.isWebGL2?r.createVertexArray():o.createVertexArrayOES()}function D(ue){return a.isWebGL2?r.bindVertexArray(ue):o.bindVertexArrayOES(ue)}function I(ue){return a.isWebGL2?r.deleteVertexArray(ue):o.deleteVertexArrayOES(ue)}function y(ue,Oe,we){const Ze=we.wireframe===!0;let it=u[ue.id];it===void 0&&(it={},u[ue.id]=it);let lt=it[Oe.id];lt===void 0&&(lt={},it[Oe.id]=lt);let Vt=lt[Ze];return Vt===void 0&&(Vt=l(A()),lt[Ze]=Vt),Vt}function l(ue){const Oe=[],we=[],Ze=[];for(let it=0;it<s;it++)Oe[it]=0,we[it]=0,Ze[it]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Oe,enabledAttributes:we,attributeDivisors:Ze,object:ue,attributes:{},index:null}}function c(ue,Oe,we,Ze){const it=x.attributes,lt=Oe.attributes;let Vt=0;const _e=we.getAttributes();for(const pr in _e)if(_e[pr].location>=0){const _s=it[pr];let Ei=lt[pr];if(Ei===void 0&&(pr==="instanceMatrix"&&ue.instanceMatrix&&(Ei=ue.instanceMatrix),pr==="instanceColor"&&ue.instanceColor&&(Ei=ue.instanceColor)),_s===void 0||_s.attribute!==Ei||Ei&&_s.data!==Ei.data)return!0;Vt++}return x.attributesNum!==Vt||x.index!==Ze}function L(ue,Oe,we,Ze){const it={},lt=Oe.attributes;let Vt=0;const _e=we.getAttributes();for(const pr in _e)if(_e[pr].location>=0){let _s=lt[pr];_s===void 0&&(pr==="instanceMatrix"&&ue.instanceMatrix&&(_s=ue.instanceMatrix),pr==="instanceColor"&&ue.instanceColor&&(_s=ue.instanceColor));const Ei={};Ei.attribute=_s,_s&&_s.data&&(Ei.data=_s.data),it[pr]=Ei,Vt++}x.attributes=it,x.attributesNum=Vt,x.index=Ze}function R(){const ue=x.newAttributes;for(let Oe=0,we=ue.length;Oe<we;Oe++)ue[Oe]=0}function F(ue){$(ue,0)}function $(ue,Oe){const we=x.newAttributes,Ze=x.enabledAttributes,it=x.attributeDivisors;we[ue]=1,Ze[ue]===0&&(r.enableVertexAttribArray(ue),Ze[ue]=1),it[ue]!==Oe&&((a.isWebGL2?r:e.get("ANGLE_instanced_arrays"))[a.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](ue,Oe),it[ue]=Oe)}function b(){const ue=x.newAttributes,Oe=x.enabledAttributes;for(let we=0,Ze=Oe.length;we<Ze;we++)Oe[we]!==ue[we]&&(r.disableVertexAttribArray(we),Oe[we]=0)}function k(ue,Oe,we,Ze,it,lt,Vt){Vt===!0?r.vertexAttribIPointer(ue,Oe,we,it,lt):r.vertexAttribPointer(ue,Oe,we,Ze,it,lt)}function B(ue,Oe,we,Ze){if(a.isWebGL2===!1&&(ue.isInstancedMesh||Ze.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;R();const it=Ze.attributes,lt=we.getAttributes(),Vt=Oe.defaultAttributeValues;for(const _e in lt){const pr=lt[_e];if(pr.location>=0){let _s=it[_e];if(_s===void 0&&(_e==="instanceMatrix"&&ue.instanceMatrix&&(_s=ue.instanceMatrix),_e==="instanceColor"&&ue.instanceColor&&(_s=ue.instanceColor)),_s!==void 0){const Ei=_s.normalized,Bl=_s.itemSize,Wl=t.get(_s);if(Wl===void 0)continue;const Ep=Wl.buffer,Lp=Wl.type,Op=Wl.bytesPerElement,R0=a.isWebGL2===!0&&(Lp===r.INT||Lp===r.UNSIGNED_INT||_s.gpuType===no);if(_s.isInterleavedBufferAttribute){const N0=_s.data,Qp=N0.stride,O0=_s.offset;if(N0.isInstancedInterleavedBuffer){for(let zp=0;zp<pr.locationSize;zp++)$(pr.location+zp,N0.meshPerAttribute);ue.isInstancedMesh!==!0&&Ze._maxInstanceCount===void 0&&(Ze._maxInstanceCount=N0.meshPerAttribute*N0.count)}else for(let zp=0;zp<pr.locationSize;zp++)F(pr.location+zp);r.bindBuffer(r.ARRAY_BUFFER,Ep);for(let zp=0;zp<pr.locationSize;zp++)k(pr.location+zp,Bl/pr.locationSize,Lp,Ei,Qp*Op,(O0+Bl/pr.locationSize*zp)*Op,R0)}else{if(_s.isInstancedBufferAttribute){for(let N0=0;N0<pr.locationSize;N0++)$(pr.location+N0,_s.meshPerAttribute);ue.isInstancedMesh!==!0&&Ze._maxInstanceCount===void 0&&(Ze._maxInstanceCount=_s.meshPerAttribute*_s.count)}else for(let N0=0;N0<pr.locationSize;N0++)F(pr.location+N0);r.bindBuffer(r.ARRAY_BUFFER,Ep);for(let N0=0;N0<pr.locationSize;N0++)k(pr.location+N0,Bl/pr.locationSize,Lp,Ei,Bl*Op,Bl/pr.locationSize*N0*Op,R0)}}else if(Vt!==void 0){const Ei=Vt[_e];if(Ei!==void 0)switch(Ei.length){case 2:r.vertexAttrib2fv(pr.location,Ei);break;case 3:r.vertexAttrib3fv(pr.location,Ei);break;case 4:r.vertexAttrib4fv(pr.location,Ei);break;default:r.vertexAttrib1fv(pr.location,Ei)}}}}b()}function J(){He();for(const ue in u){const Oe=u[ue];for(const we in Oe){const Ze=Oe[we];for(const it in Ze)I(Ze[it].object),delete Ze[it];delete Oe[we]}delete u[ue]}}function X(ue){if(u[ue.id]===void 0)return;const Oe=u[ue.id];for(const we in Oe){const Ze=Oe[we];for(const it in Ze)I(Ze[it].object),delete Ze[it];delete Oe[we]}delete u[ue.id]}function ae(ue){for(const Oe in u){const we=u[Oe];if(we[ue.id]===void 0)continue;const Ze=we[ue.id];for(const it in Ze)I(Ze[it].object),delete Ze[it];delete we[ue.id]}}function He(){Pe(),m=!0,x!==h&&(x=h,D(x.object))}function Pe(){h.geometry=null,h.program=null,h.wireframe=!1}return{setup:w,reset:He,resetDefaultState:Pe,dispose:J,releaseStatesOfGeometry:X,releaseStatesOfProgram:ae,initAttributes:R,enableAttribute:F,disableUnusedAttributes:b}}function of(r,e,t,a){const s=a.isWebGL2;let o;function f(m){o=m}function u(m,w){r.drawArrays(o,m,w),t.update(w,o,1)}function h(m,w,A){if(A===0)return;let D,I;if(s)D=r,I="drawArraysInstanced";else if(D=e.get("ANGLE_instanced_arrays"),I="drawArraysInstancedANGLE",D===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}D[I](o,m,w,A),t.update(w,o,A)}function x(m,w,A){if(A===0)return;const D=e.get("WEBGL_multi_draw");if(D===null)for(let I=0;I<A;I++)this.render(m[I],w[I]);else{D.multiDrawArraysWEBGL(o,m,0,w,0,A);let I=0;for(let y=0;y<A;y++)I+=w[y];t.update(I,o,1)}}this.setMode=f,this.render=u,this.renderInstances=h,this.renderMultiDraw=x}function lf(r,e,t){let a;function s(){if(a!==void 0)return a;if(e.has("EXT_texture_filter_anisotropic")===!0){const k=e.get("EXT_texture_filter_anisotropic");a=r.getParameter(k.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else a=0;return a}function o(k){if(k==="highp"){if(r.getShaderPrecisionFormat(r.VERTEX_SHADER,r.HIGH_FLOAT).precision>0&&r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT).precision>0)return"highp";k="mediump"}return k==="mediump"&&r.getShaderPrecisionFormat(r.VERTEX_SHADER,r.MEDIUM_FLOAT).precision>0&&r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const f=typeof WebGL2RenderingContext<"u"&&r.constructor.name==="WebGL2RenderingContext";let u=t.precision!==void 0?t.precision:"highp";const h=o(u);h!==u&&(console.warn("THREE.WebGLRenderer:",u,"not supported, using",h,"instead."),u=h);const x=f||e.has("WEBGL_draw_buffers"),m=t.logarithmicDepthBuffer===!0,w=r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS),A=r.getParameter(r.MAX_VERTEX_TEXTURE_IMAGE_UNITS),D=r.getParameter(r.MAX_TEXTURE_SIZE),I=r.getParameter(r.MAX_CUBE_MAP_TEXTURE_SIZE),y=r.getParameter(r.MAX_VERTEX_ATTRIBS),l=r.getParameter(r.MAX_VERTEX_UNIFORM_VECTORS),c=r.getParameter(r.MAX_VARYING_VECTORS),L=r.getParameter(r.MAX_FRAGMENT_UNIFORM_VECTORS),R=A>0,F=f||e.has("OES_texture_float"),$=R&&F,b=f?r.getParameter(r.MAX_SAMPLES):0;return{isWebGL2:f,drawBuffers:x,getMaxAnisotropy:s,getMaxPrecision:o,precision:u,logarithmicDepthBuffer:m,maxTextures:w,maxVertexTextures:A,maxTextureSize:D,maxCubemapSize:I,maxAttributes:y,maxVertexUniforms:l,maxVaryings:c,maxFragmentUniforms:L,vertexTextures:R,floatFragmentTextures:F,floatVertexTextures:$,maxSamples:b}}function cf(r){const e=this;let t=null,a=0,s=!1,o=!1;const f=new sn,u=new Ge,h={value:null,needsUpdate:!1};this.uniform=h,this.numPlanes=0,this.numIntersection=0,this.init=function(w,A){const D=w.length!==0||A||a!==0||s;return s=A,a=w.length,D},this.beginShadows=function(){o=!0,m(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(w,A){t=m(w,A,0)},this.setState=function(w,A,D){const I=w.clippingPlanes,y=w.clipIntersection,l=w.clipShadows,c=r.get(w);if(!s||I===null||I.length===0||o&&!l)o?m(null):x();else{const L=o?0:a,R=L*4;let F=c.clippingState||null;h.value=F,F=m(I,A,R,D);for(let $=0;$!==R;++$)F[$]=t[$];c.clippingState=F,this.numIntersection=y?this.numPlanes:0,this.numPlanes+=L}};function x(){h.value!==t&&(h.value=t,h.needsUpdate=a>0),e.numPlanes=a,e.numIntersection=0}function m(w,A,D,I){const y=w!==null?w.length:0;let l=null;if(y!==0){if(l=h.value,I!==!0||l===null){const c=D+y*4,L=A.matrixWorldInverse;u.getNormalMatrix(L),(l===null||l.length<c)&&(l=new Float32Array(c));for(let R=0,F=D;R!==y;++R,F+=4)f.copy(w[R]).applyMatrix4(L,u),f.normal.toArray(l,F),l[F+3]=f.constant}h.value=l,h.needsUpdate=!0}return e.numPlanes=y,e.numIntersection=0,l}}function uf(r){let e=new WeakMap;function t(f,u){return u===es?f.mapping=ii:u===ts&&(f.mapping=ri),f}function a(f){if(f&&f.isTexture){const u=f.mapping;if(u===es||u===ts)if(e.has(f)){const h=e.get(f).texture;return t(h,f.mapping)}else{const h=f.image;if(h&&h.height>0){const x=new xc(h.height);return x.fromEquirectangularTexture(r,f),e.set(f,x),f.addEventListener("dispose",s),t(x.texture,f.mapping)}else return null}}return f}function s(f){const u=f.target;u.removeEventListener("dispose",s);const h=e.get(u);h!==void 0&&(e.delete(u),h.dispose())}function o(){e=new WeakMap}return{get:a,dispose:o}}class hf extends Mo{constructor(e=-1,t=1,a=1,s=-1,o=.1,f=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=a,this.bottom=s,this.near=o,this.far=f,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,a,s,o,f){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=a,this.view.offsetY=s,this.view.width=o,this.view.height=f,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),a=(this.right+this.left)/2,s=(this.top+this.bottom)/2;let o=a-e,f=a+e,u=s+t,h=s-t;if(this.view!==null&&this.view.enabled){const x=(this.right-this.left)/this.view.fullWidth/this.zoom,m=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=x*this.view.offsetX,f=o+x*this.view.width,u-=m*this.view.offsetY,h=u-m*this.view.height}this.projectionMatrix.makeOrthographic(o,f,u,h,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const $n=4,Ma=[.125,.215,.35,.446,.526,.582],bn=20,Vr=new hf,Sa=new qe;let kr=null,Wr=0,Xr=0;const yn=(1+Math.sqrt(5))/2,Kn=1/yn,Ea=[new U(1,1,1),new U(-1,1,1),new U(1,1,-1),new U(-1,1,-1),new U(0,yn,Kn),new U(0,yn,-Kn),new U(Kn,0,yn),new U(-Kn,0,yn),new U(yn,Kn,0),new U(-yn,Kn,0)];class ya{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,a=.1,s=100){kr=this._renderer.getRenderTarget(),Wr=this._renderer.getActiveCubeFace(),Xr=this._renderer.getActiveMipmapLevel(),this._setSize(256);const o=this._allocateTargets();return o.depthBuffer=!0,this._sceneToCubeUV(e,a,s,o),t>0&&this._blur(o,0,0,t),this._applyPMREM(o),this._cleanup(o),o}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=Aa(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=ba(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(kr,Wr,Xr),e.scissorTest=!1,Wi(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===ii||e.mapping===ri?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),kr=this._renderer.getRenderTarget(),Wr=this._renderer.getActiveCubeFace(),Xr=this._renderer.getActiveMipmapLevel();const a=t||this._allocateTargets();return this._textureToCubeUV(e,a),this._applyPMREM(a),this._cleanup(a),a}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,a={magFilter:St,minFilter:St,generateMipmaps:!1,type:_i,format:Ft,colorSpace:dn,depthBuffer:!1},s=Ta(e,t,a);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=Ta(e,t,a);const{_lodMax:o}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=ff(o)),this._blurMaterial=df(o,e,t)}return s}_compileMaterial(e){const t=new Rt(this._lodPlanes[0],e);this._renderer.compile(t,Vr)}_sceneToCubeUV(e,t,a,s){const o=new Lt(90,1,t,a),f=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],h=this._renderer,x=h.autoClear,m=h.toneMapping;h.getClearColor(Sa),h.toneMapping=cn,h.autoClear=!1;const w=new ni({name:"PMREM.Background",side:Et,depthWrite:!1,depthTest:!1}),A=new Rt(new Mi,w);let D=!1;const I=e.background;I?I.isColor&&(w.color.copy(I),e.background=null,D=!0):(w.color.copy(Sa),D=!0);for(let y=0;y<6;y++){const l=y%3;l===0?(o.up.set(0,f[y],0),o.lookAt(u[y],0,0)):l===1?(o.up.set(0,0,f[y]),o.lookAt(0,u[y],0)):(o.up.set(0,f[y],0),o.lookAt(0,0,u[y]));const c=this._cubeSize;Wi(s,l*c,y>2?c:0,c,c),h.setRenderTarget(s),D&&h.render(A,o),h.render(e,o)}A.geometry.dispose(),A.material.dispose(),h.toneMapping=m,h.autoClear=x,e.background=I}_textureToCubeUV(e,t){const a=this._renderer,s=e.mapping===ii||e.mapping===ri;s?(this._cubemapMaterial===null&&(this._cubemapMaterial=Aa()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=ba());const o=s?this._cubemapMaterial:this._equirectMaterial,f=new Rt(this._lodPlanes[0],o),u=o.uniforms;u.envMap.value=e;const h=this._cubeSize;Wi(t,0,0,3*h,2*h),a.setRenderTarget(t),a.render(f,Vr)}_applyPMREM(e){const t=this._renderer,a=t.autoClear;t.autoClear=!1;for(let s=1;s<this._lodPlanes.length;s++){const o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),f=Ea[(s-1)%Ea.length];this._blur(e,s-1,s,o,f)}t.autoClear=a}_blur(e,t,a,s,o){const f=this._pingPongRenderTarget;this._halfBlur(e,f,t,a,s,"latitudinal",o),this._halfBlur(f,e,a,a,s,"longitudinal",o)}_halfBlur(e,t,a,s,o,f,u){const h=this._renderer,x=this._blurMaterial;f!=="latitudinal"&&f!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const m=3,w=new Rt(this._lodPlanes[s],x),A=x.uniforms,D=this._sizeLods[a]-1,I=isFinite(o)?Math.PI/(2*D):2*Math.PI/(2*bn-1),y=o/I,l=isFinite(o)?1+Math.floor(m*y):bn;l>bn&&console.warn(`sigmaRadians, ${o}, is too large and will clip, as it requested ${l} samples when the maximum is set to ${bn}`);const c=[];let L=0;for(let k=0;k<bn;++k){const B=k/y,J=Math.exp(-B*B/2);c.push(J),k===0?L+=J:k<l&&(L+=2*J)}for(let k=0;k<c.length;k++)c[k]=c[k]/L;A.envMap.value=e.texture,A.samples.value=l,A.weights.value=c,A.latitudinal.value=f==="latitudinal",u&&(A.poleAxis.value=u);const{_lodMax:R}=this;A.dTheta.value=I,A.mipInt.value=R-a;const F=this._sizeLods[s],$=3*F*(s>R-$n?s-R+$n:0),b=4*(this._cubeSize-F);Wi(t,$,b,3*F,2*F),h.setRenderTarget(t),h.render(w,Vr)}}function ff(r){const e=[],t=[],a=[];let s=r;const o=r-$n+1+Ma.length;for(let f=0;f<o;f++){const u=Math.pow(2,s);t.push(u);let h=1/u;f>r-$n?h=Ma[f-r+$n-1]:f===0&&(h=0),a.push(h);const x=1/(u-2),m=-x,w=1+x,A=[m,m,w,m,w,w,m,m,w,w,m,w],D=6,I=6,y=3,l=2,c=1,L=new Float32Array(y*I*D),R=new Float32Array(l*I*D),F=new Float32Array(c*I*D);for(let b=0;b<D;b++){const k=b%3*2/3-1,B=b>2?0:-1,J=[k,B,0,k+2/3,B,0,k+2/3,B+1,0,k,B,0,k+2/3,B+1,0,k,B+1,0];L.set(J,y*I*b),R.set(A,l*I*b);const X=[b,b,b,b,b,b];F.set(X,c*I*b)}const $=new Tt;$.setAttribute("position",new Ht(L,y)),$.setAttribute("uv",new Ht(R,l)),$.setAttribute("faceIndex",new Ht(F,c)),e.push($),s>$n&&s--}return{lodPlanes:e,sizeLods:t,sigmas:a}}function Ta(r,e,t){const a=new Cn(r,e,t);return a.texture.mapping=lr,a.texture.name="PMREM.cubeUv",a.scissorTest=!0,a}function Wi(r,e,t,a,s){r.viewport.set(e,t,a,s),r.scissor.set(e,t,a,s)}function df(r,e,t){const a=new Float32Array(bn),s=new U(0,1,0);return new fn({name:"SphericalGaussianBlur",defines:{n:bn,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${r}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:a},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:s}},vertexShader:fs(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:ln,depthTest:!1,depthWrite:!1})}function ba(){return new fn({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:fs(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:ln,depthTest:!1,depthWrite:!1})}function Aa(){return new fn({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:fs(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:ln,depthTest:!1,depthWrite:!1})}function fs(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function pf(r){let e=new WeakMap,t=null;function a(u){if(u&&u.isTexture){const h=u.mapping,x=h===es||h===ts,m=h===ii||h===ri;if(x||m)if(u.isRenderTargetTexture&&u.needsPMREMUpdate===!0){u.needsPMREMUpdate=!1;let w=e.get(u);return t===null&&(t=new ya(r)),w=x?t.fromEquirectangular(u,w):t.fromCubemap(u,w),e.set(u,w),w.texture}else{if(e.has(u))return e.get(u).texture;{const w=u.image;if(x&&w&&w.height>0||m&&w&&s(w)){t===null&&(t=new ya(r));const A=x?t.fromEquirectangular(u):t.fromCubemap(u);return e.set(u,A),u.addEventListener("dispose",o),A.texture}else return null}}}return u}function s(u){let h=0;const x=6;for(let m=0;m<x;m++)u[m]!==void 0&&h++;return h===x}function o(u){const h=u.target;h.removeEventListener("dispose",o);const x=e.get(h);x!==void 0&&(e.delete(h),x.dispose())}function f(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:a,dispose:f}}function mf(r){const e={};function t(a){if(e[a]!==void 0)return e[a];let s;switch(a){case"WEBGL_depth_texture":s=r.getExtension("WEBGL_depth_texture")||r.getExtension("MOZ_WEBGL_depth_texture")||r.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":s=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":s=r.getExtension("WEBGL_compressed_texture_s3tc")||r.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":s=r.getExtension("WEBGL_compressed_texture_pvrtc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:s=r.getExtension(a)}return e[a]=s,s}return{has:function(a){return t(a)!==null},init:function(a){a.isWebGL2?(t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance")):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(a){const s=t(a);return s===null&&console.warn("THREE.WebGLRenderer: "+a+" extension not supported."),s}}}function _f(r,e,t,a){const s={},o=new WeakMap;function f(w){const A=w.target;A.index!==null&&e.remove(A.index);for(const I in A.attributes)e.remove(A.attributes[I]);for(const I in A.morphAttributes){const y=A.morphAttributes[I];for(let l=0,c=y.length;l<c;l++)e.remove(y[l])}A.removeEventListener("dispose",f),delete s[A.id];const D=o.get(A);D&&(e.remove(D),o.delete(A)),a.releaseStatesOfGeometry(A),A.isInstancedBufferGeometry===!0&&delete A._maxInstanceCount,t.memory.geometries--}function u(w,A){return s[A.id]===!0||(A.addEventListener("dispose",f),s[A.id]=!0,t.memory.geometries++),A}function h(w){const A=w.attributes;for(const I in A)e.update(A[I],r.ARRAY_BUFFER);const D=w.morphAttributes;for(const I in D){const y=D[I];for(let l=0,c=y.length;l<c;l++)e.update(y[l],r.ARRAY_BUFFER)}}function x(w){const A=[],D=w.index,I=w.attributes.position;let y=0;if(D!==null){const L=D.array;y=D.version;for(let R=0,F=L.length;R<F;R+=3){const $=L[R+0],b=L[R+1],k=L[R+2];A.push($,b,b,k,k,$)}}else if(I!==void 0){const L=I.array;y=I.version;for(let R=0,F=L.length/3-1;R<F;R+=3){const $=R+0,b=R+1,k=R+2;A.push($,b,b,k,k,$)}}else return;const l=new(uo(A)?vo:go)(A,1);l.version=y;const c=o.get(w);c&&e.remove(c),o.set(w,l)}function m(w){const A=o.get(w);if(A){const D=w.index;D!==null&&A.version<D.version&&x(w)}else x(w);return o.get(w)}return{get:u,update:h,getWireframeAttribute:m}}function gf(r,e,t,a){const s=a.isWebGL2;let o;function f(D){o=D}let u,h;function x(D){u=D.type,h=D.bytesPerElement}function m(D,I){r.drawElements(o,I,u,D*h),t.update(I,o,1)}function w(D,I,y){if(y===0)return;let l,c;if(s)l=r,c="drawElementsInstanced";else if(l=e.get("ANGLE_instanced_arrays"),c="drawElementsInstancedANGLE",l===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}l[c](o,I,u,D*h,y),t.update(I,o,y)}function A(D,I,y){if(y===0)return;const l=e.get("WEBGL_multi_draw");if(l===null)for(let c=0;c<y;c++)this.render(D[c]/h,I[c]);else{l.multiDrawElementsWEBGL(o,I,0,u,D,0,y);let c=0;for(let L=0;L<y;L++)c+=I[L];t.update(c,o,1)}}this.setMode=f,this.setIndex=x,this.render=m,this.renderInstances=w,this.renderMultiDraw=A}function vf(r){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function a(o,f,u){switch(t.calls++,f){case r.TRIANGLES:t.triangles+=u*(o/3);break;case r.LINES:t.lines+=u*(o/2);break;case r.LINE_STRIP:t.lines+=u*(o-1);break;case r.LINE_LOOP:t.lines+=u*o;break;case r.POINTS:t.points+=u*o;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",f);break}}function s(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:s,update:a}}function xf(r,e){return r[0]-e[0]}function Mf(r,e){return Math.abs(e[1])-Math.abs(r[1])}function Sf(r,e,t){const a={},s=new Float32Array(8),o=new WeakMap,f=new ht,u=[];for(let x=0;x<8;x++)u[x]=[x,0];function h(x,m,w){const A=x.morphTargetInfluences;if(e.isWebGL2===!0){const D=m.morphAttributes.position||m.morphAttributes.normal||m.morphAttributes.color,I=D!==void 0?D.length:0;let y=o.get(m);if(y===void 0||y.count!==I){let l=function(){ae.dispose(),o.delete(m),m.removeEventListener("dispose",l)};y!==void 0&&y.texture.dispose();const c=m.morphAttributes.position!==void 0,L=m.morphAttributes.normal!==void 0,R=m.morphAttributes.color!==void 0,F=m.morphAttributes.position||[],$=m.morphAttributes.normal||[],b=m.morphAttributes.color||[];let k=0;c===!0&&(k=1),L===!0&&(k=2),R===!0&&(k=3);let B=m.attributes.position.count*k,J=1;B>e.maxTextureSize&&(J=Math.ceil(B/e.maxTextureSize),B=e.maxTextureSize);const X=new Float32Array(B*J*4*I),ae=new po(X,B,J,I);ae.type=Kt,ae.needsUpdate=!0;const He=k*4;for(let Pe=0;Pe<I;Pe++){const ue=F[Pe],Oe=$[Pe],we=b[Pe],Ze=B*J*4*Pe;for(let it=0;it<ue.count;it++){const lt=it*He;c===!0&&(f.fromBufferAttribute(ue,it),X[Ze+lt+0]=f.x,X[Ze+lt+1]=f.y,X[Ze+lt+2]=f.z,X[Ze+lt+3]=0),L===!0&&(f.fromBufferAttribute(Oe,it),X[Ze+lt+4]=f.x,X[Ze+lt+5]=f.y,X[Ze+lt+6]=f.z,X[Ze+lt+7]=0),R===!0&&(f.fromBufferAttribute(we,it),X[Ze+lt+8]=f.x,X[Ze+lt+9]=f.y,X[Ze+lt+10]=f.z,X[Ze+lt+11]=we.itemSize===4?f.w:1)}}y={count:I,texture:ae,size:new Ie(B,J)},o.set(m,y),m.addEventListener("dispose",l)}if(x.isInstancedMesh===!0&&x.morphTexture!==null)w.getUniforms().setValue(r,"morphTexture",x.morphTexture,t);else{let l=0;for(let L=0;L<A.length;L++)l+=A[L];const c=m.morphTargetsRelative?1:1-l;w.getUniforms().setValue(r,"morphTargetBaseInfluence",c),w.getUniforms().setValue(r,"morphTargetInfluences",A)}w.getUniforms().setValue(r,"morphTargetsTexture",y.texture,t),w.getUniforms().setValue(r,"morphTargetsTextureSize",y.size)}else{const D=A===void 0?0:A.length;let I=a[m.id];if(I===void 0||I.length!==D){I=[];for(let R=0;R<D;R++)I[R]=[R,0];a[m.id]=I}for(let R=0;R<D;R++){const F=I[R];F[0]=R,F[1]=A[R]}I.sort(Mf);for(let R=0;R<8;R++)R<D&&I[R][1]?(u[R][0]=I[R][0],u[R][1]=I[R][1]):(u[R][0]=Number.MAX_SAFE_INTEGER,u[R][1]=0);u.sort(xf);const y=m.morphAttributes.position,l=m.morphAttributes.normal;let c=0;for(let R=0;R<8;R++){const F=u[R],$=F[0],b=F[1];$!==Number.MAX_SAFE_INTEGER&&b?(y&&m.getAttribute("morphTarget"+R)!==y[$]&&m.setAttribute("morphTarget"+R,y[$]),l&&m.getAttribute("morphNormal"+R)!==l[$]&&m.setAttribute("morphNormal"+R,l[$]),s[R]=b,c+=b):(y&&m.hasAttribute("morphTarget"+R)===!0&&m.deleteAttribute("morphTarget"+R),l&&m.hasAttribute("morphNormal"+R)===!0&&m.deleteAttribute("morphNormal"+R),s[R]=0)}const L=m.morphTargetsRelative?1:1-c;w.getUniforms().setValue(r,"morphTargetBaseInfluence",L),w.getUniforms().setValue(r,"morphTargetInfluences",s)}}return{update:h}}function Ef(r,e,t,a){let s=new WeakMap;function o(h){const x=a.render.frame,m=h.geometry,w=e.get(h,m);if(s.get(w)!==x&&(e.update(w),s.set(w,x)),h.isInstancedMesh&&(h.hasEventListener("dispose",u)===!1&&h.addEventListener("dispose",u),s.get(h)!==x&&(t.update(h.instanceMatrix,r.ARRAY_BUFFER),h.instanceColor!==null&&t.update(h.instanceColor,r.ARRAY_BUFFER),s.set(h,x))),h.isSkinnedMesh){const A=h.skeleton;s.get(A)!==x&&(A.update(),s.set(A,x))}return w}function f(){s=new WeakMap}function u(h){const x=h.target;x.removeEventListener("dispose",u),t.remove(x.instanceMatrix),x.instanceColor!==null&&t.remove(x.instanceColor)}return{update:o,dispose:f}}class To extends yt{constructor(e,t,a,s,o,f,u,h,x,m){if(m=m!==void 0?m:Rn,m!==Rn&&m!==si)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");a===void 0&&m===Rn&&(a=on),a===void 0&&m===si&&(a=wn),super(null,s,o,f,u,h,m,a,x),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=u!==void 0?u:xt,this.minFilter=h!==void 0?h:xt,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}const bo=new yt,Ao=new To(1,1);Ao.compareFunction=co;const wo=new po,Ro=new nc,Co=new So,wa=[],Ra=[],Ca=new Float32Array(16),Pa=new Float32Array(9),La=new Float32Array(4);function li(r,e,t){const a=r[0];if(a<=0||a>0)return r;const s=e*t;let o=wa[s];if(o===void 0&&(o=new Float32Array(s),wa[s]=o),e!==0){a.toArray(o,0);for(let f=1,u=0;f!==e;++f)u+=t,r[f].toArray(o,u)}return o}function at(r,e){if(r.length!==e.length)return!1;for(let t=0,a=r.length;t<a;t++)if(r[t]!==e[t])return!1;return!0}function ot(r,e){for(let t=0,a=e.length;t<a;t++)r[t]=e[t]}function fr(r,e){let t=Ra[e];t===void 0&&(t=new Int32Array(e),Ra[e]=t);for(let a=0;a!==e;++a)t[a]=r.allocateTextureUnit();return t}function yf(r,e){const t=this.cache;t[0]!==e&&(r.uniform1f(this.addr,e),t[0]=e)}function Tf(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(at(t,e))return;r.uniform2fv(this.addr,e),ot(t,e)}}function bf(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(r.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(at(t,e))return;r.uniform3fv(this.addr,e),ot(t,e)}}function Af(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(at(t,e))return;r.uniform4fv(this.addr,e),ot(t,e)}}function wf(r,e){const t=this.cache,a=e.elements;if(a===void 0){if(at(t,e))return;r.uniformMatrix2fv(this.addr,!1,e),ot(t,e)}else{if(at(t,a))return;La.set(a),r.uniformMatrix2fv(this.addr,!1,La),ot(t,a)}}function Rf(r,e){const t=this.cache,a=e.elements;if(a===void 0){if(at(t,e))return;r.uniformMatrix3fv(this.addr,!1,e),ot(t,e)}else{if(at(t,a))return;Pa.set(a),r.uniformMatrix3fv(this.addr,!1,Pa),ot(t,a)}}function Cf(r,e){const t=this.cache,a=e.elements;if(a===void 0){if(at(t,e))return;r.uniformMatrix4fv(this.addr,!1,e),ot(t,e)}else{if(at(t,a))return;Ca.set(a),r.uniformMatrix4fv(this.addr,!1,Ca),ot(t,a)}}function Pf(r,e){const t=this.cache;t[0]!==e&&(r.uniform1i(this.addr,e),t[0]=e)}function Lf(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(at(t,e))return;r.uniform2iv(this.addr,e),ot(t,e)}}function Df(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(at(t,e))return;r.uniform3iv(this.addr,e),ot(t,e)}}function Uf(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(at(t,e))return;r.uniform4iv(this.addr,e),ot(t,e)}}function If(r,e){const t=this.cache;t[0]!==e&&(r.uniform1ui(this.addr,e),t[0]=e)}function Nf(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(at(t,e))return;r.uniform2uiv(this.addr,e),ot(t,e)}}function Ff(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(at(t,e))return;r.uniform3uiv(this.addr,e),ot(t,e)}}function Of(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(at(t,e))return;r.uniform4uiv(this.addr,e),ot(t,e)}}function Bf(r,e,t){const a=this.cache,s=t.allocateTextureUnit();a[0]!==s&&(r.uniform1i(this.addr,s),a[0]=s);const o=this.type===r.SAMPLER_2D_SHADOW?Ao:bo;t.setTexture2D(e||o,s)}function zf(r,e,t){const a=this.cache,s=t.allocateTextureUnit();a[0]!==s&&(r.uniform1i(this.addr,s),a[0]=s),t.setTexture3D(e||Ro,s)}function Gf(r,e,t){const a=this.cache,s=t.allocateTextureUnit();a[0]!==s&&(r.uniform1i(this.addr,s),a[0]=s),t.setTextureCube(e||Co,s)}function Hf(r,e,t){const a=this.cache,s=t.allocateTextureUnit();a[0]!==s&&(r.uniform1i(this.addr,s),a[0]=s),t.setTexture2DArray(e||wo,s)}function Vf(r){switch(r){case 5126:return yf;case 35664:return Tf;case 35665:return bf;case 35666:return Af;case 35674:return wf;case 35675:return Rf;case 35676:return Cf;case 5124:case 35670:return Pf;case 35667:case 35671:return Lf;case 35668:case 35672:return Df;case 35669:case 35673:return Uf;case 5125:return If;case 36294:return Nf;case 36295:return Ff;case 36296:return Of;case 35678:case 36198:case 36298:case 36306:case 35682:return Bf;case 35679:case 36299:case 36307:return zf;case 35680:case 36300:case 36308:case 36293:return Gf;case 36289:case 36303:case 36311:case 36292:return Hf}}function kf(r,e){r.uniform1fv(this.addr,e)}function Wf(r,e){const t=li(e,this.size,2);r.uniform2fv(this.addr,t)}function Xf(r,e){const t=li(e,this.size,3);r.uniform3fv(this.addr,t)}function Yf(r,e){const t=li(e,this.size,4);r.uniform4fv(this.addr,t)}function qf(r,e){const t=li(e,this.size,4);r.uniformMatrix2fv(this.addr,!1,t)}function jf(r,e){const t=li(e,this.size,9);r.uniformMatrix3fv(this.addr,!1,t)}function Kf(r,e){const t=li(e,this.size,16);r.uniformMatrix4fv(this.addr,!1,t)}function Zf(r,e){r.uniform1iv(this.addr,e)}function $f(r,e){r.uniform2iv(this.addr,e)}function Jf(r,e){r.uniform3iv(this.addr,e)}function Qf(r,e){r.uniform4iv(this.addr,e)}function ed(r,e){r.uniform1uiv(this.addr,e)}function td$1(r,e){r.uniform2uiv(this.addr,e)}function nd(r,e){r.uniform3uiv(this.addr,e)}function id(r,e){r.uniform4uiv(this.addr,e)}function rd(r,e,t){const a=this.cache,s=e.length,o=fr(t,s);at(a,o)||(r.uniform1iv(this.addr,o),ot(a,o));for(let f=0;f!==s;++f)t.setTexture2D(e[f]||bo,o[f])}function sd(r,e,t){const a=this.cache,s=e.length,o=fr(t,s);at(a,o)||(r.uniform1iv(this.addr,o),ot(a,o));for(let f=0;f!==s;++f)t.setTexture3D(e[f]||Ro,o[f])}function ad(r,e,t){const a=this.cache,s=e.length,o=fr(t,s);at(a,o)||(r.uniform1iv(this.addr,o),ot(a,o));for(let f=0;f!==s;++f)t.setTextureCube(e[f]||Co,o[f])}function od(r,e,t){const a=this.cache,s=e.length,o=fr(t,s);at(a,o)||(r.uniform1iv(this.addr,o),ot(a,o));for(let f=0;f!==s;++f)t.setTexture2DArray(e[f]||wo,o[f])}function ld(r){switch(r){case 5126:return kf;case 35664:return Wf;case 35665:return Xf;case 35666:return Yf;case 35674:return qf;case 35675:return jf;case 35676:return Kf;case 5124:case 35670:return Zf;case 35667:case 35671:return $f;case 35668:case 35672:return Jf;case 35669:case 35673:return Qf;case 5125:return ed;case 36294:return td$1;case 36295:return nd;case 36296:return id;case 35678:case 36198:case 36298:case 36306:case 35682:return rd;case 35679:case 36299:case 36307:return sd;case 35680:case 36300:case 36308:case 36293:return ad;case 36289:case 36303:case 36311:case 36292:return od}}class cd{constructor(e,t,a){this.id=e,this.addr=a,this.cache=[],this.type=t.type,this.setValue=Vf(t.type)}}class ud{constructor(e,t,a){this.id=e,this.addr=a,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=ld(t.type)}}class hd{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,a){const s=this.seq;for(let o=0,f=s.length;o!==f;++o){const u=s[o];u.setValue(e,t[u.id],a)}}}const Yr=/(\w+)(\])?(\[|\.)?/g;function Da(r,e){r.seq.push(e),r.map[e.id]=e}function fd(r,e,t){const a=r.name,s=a.length;for(Yr.lastIndex=0;;){const o=Yr.exec(a),f=Yr.lastIndex;let u=o[1];const h=o[2]==="]",x=o[3];if(h&&(u=u|0),x===void 0||x==="["&&f+2===s){Da(t,x===void 0?new cd(u,r,e):new ud(u,r,e));break}else{let m=t.map[u];m===void 0&&(m=new hd(u),Da(t,m)),t=m}}}class Ji{constructor(e,t){this.seq=[],this.map={};const a=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let s=0;s<a;++s){const o=e.getActiveUniform(t,s),f=e.getUniformLocation(t,o.name);fd(o,f,this)}}setValue(e,t,a,s){const o=this.map[t];o!==void 0&&o.setValue(e,a,s)}setOptional(e,t,a){const s=t[a];s!==void 0&&this.setValue(e,a,s)}static upload(e,t,a,s){for(let o=0,f=t.length;o!==f;++o){const u=t[o],h=a[u.id];h.needsUpdate!==!1&&u.setValue(e,h.value,s)}}static seqWithValue(e,t){const a=[];for(let s=0,o=e.length;s!==o;++s){const f=e[s];f.id in t&&a.push(f)}return a}}function Ua(r,e,t){const a=r.createShader(e);return r.shaderSource(a,t),r.compileShader(a),a}const dd=37297;let pd=0;function md(r,e){const t=r.split(`
`),a=[],s=Math.max(e-6,0),o=Math.min(e+6,t.length);for(let f=s;f<o;f++){const u=f+1;a.push(`${u===e?">":" "} ${u}: ${t[f]}`)}return a.join(`
`)}function _d(r){const e=je.getPrimaries(je.workingColorSpace),t=je.getPrimaries(r);let a;switch(e===t?a="":e===nr&&t===tr?a="LinearDisplayP3ToLinearSRGB":e===tr&&t===nr&&(a="LinearSRGBToLinearDisplayP3"),r){case dn:case cr:return[a,"LinearTransferOETF"];case Bt:case cs:return[a,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",r),[a,"LinearTransferOETF"]}}function Ia(r,e,t){const a=r.getShaderParameter(e,r.COMPILE_STATUS),s=r.getShaderInfoLog(e).trim();if(a&&s==="")return"";const o=/ERROR: 0:(\d+)/.exec(s);if(o){const f=parseInt(o[1]);return t.toUpperCase()+`

`+s+`

`+md(r.getShaderSource(e),f)}else return s}function gd(r,e){const t=_d(e);return`vec4 ${r}( vec4 value ) { return ${t[0]}( ${t[1]}( value ) ); }`}function vd(r,e){let t;switch(e){case cl:t="Linear";break;case ul:t="Reinhard";break;case hl:t="OptimizedCineon";break;case fl:t="ACESFilmic";break;case pl:t="AgX";break;case ml:t="Neutral";break;case dl:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+r+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function xd(r){return[r.extensionDerivatives||r.envMapCubeUVHeight||r.bumpMap||r.normalMapTangentSpace||r.clearcoatNormalMap||r.flatShading||r.alphaToCoverage||r.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(r.extensionFragDepth||r.logarithmicDepthBuffer)&&r.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",r.extensionDrawBuffers&&r.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(r.extensionShaderTextureLOD||r.envMap||r.transmission)&&r.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Jn).join(`
`)}function Md(r){return[r.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",r.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Jn).join(`
`)}function Sd(r){const e=[];for(const t in r){const a=r[t];a!==!1&&e.push("#define "+t+" "+a)}return e.join(`
`)}function Ed(r,e){const t={},a=r.getProgramParameter(e,r.ACTIVE_ATTRIBUTES);for(let s=0;s<a;s++){const o=r.getActiveAttrib(e,s),f=o.name;let u=1;o.type===r.FLOAT_MAT2&&(u=2),o.type===r.FLOAT_MAT3&&(u=3),o.type===r.FLOAT_MAT4&&(u=4),t[f]={type:o.type,location:r.getAttribLocation(e,f),locationSize:u}}return t}function Jn(r){return r!==""}function Na(r,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return r.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Fa(r,e){return r.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const yd=/^[ \t]*#include +<([\w\d./]+)>/gm;function as(r){return r.replace(yd,bd)}const Td=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function bd(r,e){let t=ze[e];if(t===void 0){const a=Td.get(e);if(a!==void 0)t=ze[a],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,a);else throw new Error("Can not resolve #include <"+e+">")}return as(t)}const Ad=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Oa(r){return r.replace(Ad,wd)}function wd(r,e,t,a){let s="";for(let o=parseInt(e);o<parseInt(t);o++)s+=a.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return s}function Ba(r){let e=`precision ${r.precision} float;
	precision ${r.precision} int;
	precision ${r.precision} sampler2D;
	precision ${r.precision} samplerCube;
	`;return r.isWebGL2&&(e+=`precision ${r.precision} sampler3D;
		precision ${r.precision} sampler2DArray;
		precision ${r.precision} sampler2DShadow;
		precision ${r.precision} samplerCubeShadow;
		precision ${r.precision} sampler2DArrayShadow;
		precision ${r.precision} isampler2D;
		precision ${r.precision} isampler3D;
		precision ${r.precision} isamplerCube;
		precision ${r.precision} isampler2DArray;
		precision ${r.precision} usampler2D;
		precision ${r.precision} usampler3D;
		precision ${r.precision} usamplerCube;
		precision ${r.precision} usampler2DArray;
		`),r.precision==="highp"?e+=`
#define HIGH_PRECISION`:r.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:r.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function Rd(r){let e="SHADOWMAP_TYPE_BASIC";return r.shadowMapType===Qa?e="SHADOWMAP_TYPE_PCF":r.shadowMapType===Oo?e="SHADOWMAP_TYPE_PCF_SOFT":r.shadowMapType===jt&&(e="SHADOWMAP_TYPE_VSM"),e}function Cd(r){let e="ENVMAP_TYPE_CUBE";if(r.envMap)switch(r.envMapMode){case ii:case ri:e="ENVMAP_TYPE_CUBE";break;case lr:e="ENVMAP_TYPE_CUBE_UV";break}return e}function Pd(r){let e="ENVMAP_MODE_REFLECTION";if(r.envMap)switch(r.envMapMode){case ri:e="ENVMAP_MODE_REFRACTION";break}return e}function Ld(r){let e="ENVMAP_BLENDING_NONE";if(r.envMap)switch(r.combine){case eo:e="ENVMAP_BLENDING_MULTIPLY";break;case ol:e="ENVMAP_BLENDING_MIX";break;case ll:e="ENVMAP_BLENDING_ADD";break}return e}function Dd(r){const e=r.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,a=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:a,maxMip:t}}function Ud(r,e,t,a){const s=r.getContext(),o=t.defines;let f=t.vertexShader,u=t.fragmentShader;const h=Rd(t),x=Cd(t),m=Pd(t),w=Ld(t),A=Dd(t),D=t.isWebGL2?"":xd(t),I=Md(t),y=Sd(o),l=s.createProgram();let c,L,R=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(c=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,y].filter(Jn).join(`
`),c.length>0&&(c+=`
`),L=[D,"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,y].filter(Jn).join(`
`),L.length>0&&(L+=`
`)):(c=[Ba(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,y,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+m:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+h:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Jn).join(`
`),L=[D,Ba(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,y,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+x:"",t.envMap?"#define "+m:"",t.envMap?"#define "+w:"",A?"#define CUBEUV_TEXEL_WIDTH "+A.texelWidth:"",A?"#define CUBEUV_TEXEL_HEIGHT "+A.texelHeight:"",A?"#define CUBEUV_MAX_MIP "+A.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+h:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==cn?"#define TONE_MAPPING":"",t.toneMapping!==cn?ze.tonemapping_pars_fragment:"",t.toneMapping!==cn?vd("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",ze.colorspace_pars_fragment,gd("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Jn).join(`
`)),f=as(f),f=Na(f,t),f=Fa(f,t),u=as(u),u=Na(u,t),u=Fa(u,t),f=Oa(f),u=Oa(u),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(R=`#version 300 es
`,c=[I,"precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+c,L=["precision mediump sampler2DArray;","#define varying in",t.glslVersion===ea?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===ea?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+L);const F=R+c+f,$=R+L+u,b=Ua(s,s.VERTEX_SHADER,F),k=Ua(s,s.FRAGMENT_SHADER,$);s.attachShader(l,b),s.attachShader(l,k),t.index0AttributeName!==void 0?s.bindAttribLocation(l,0,t.index0AttributeName):t.morphTargets===!0&&s.bindAttribLocation(l,0,"position"),s.linkProgram(l);function B(He){if(r.debug.checkShaderErrors){const Pe=s.getProgramInfoLog(l).trim(),ue=s.getShaderInfoLog(b).trim(),Oe=s.getShaderInfoLog(k).trim();let we=!0,Ze=!0;if(s.getProgramParameter(l,s.LINK_STATUS)===!1)if(we=!1,typeof r.debug.onShaderError=="function")r.debug.onShaderError(s,l,b,k);else{const it=Ia(s,b,"vertex"),lt=Ia(s,k,"fragment");console.error("THREE.WebGLProgram: Shader Error "+s.getError()+" - VALIDATE_STATUS "+s.getProgramParameter(l,s.VALIDATE_STATUS)+`

Material Name: `+He.name+`
Material Type: `+He.type+`

Program Info Log: `+Pe+`
`+it+`
`+lt)}else Pe!==""?console.warn("THREE.WebGLProgram: Program Info Log:",Pe):(ue===""||Oe==="")&&(Ze=!1);Ze&&(He.diagnostics={runnable:we,programLog:Pe,vertexShader:{log:ue,prefix:c},fragmentShader:{log:Oe,prefix:L}})}s.deleteShader(b),s.deleteShader(k),J=new Ji(s,l),X=Ed(s,l)}let J;this.getUniforms=function(){return J===void 0&&B(this),J};let X;this.getAttributes=function(){return X===void 0&&B(this),X};let ae=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return ae===!1&&(ae=s.getProgramParameter(l,dd)),ae},this.destroy=function(){a.releaseStatesOfProgram(this),s.deleteProgram(l),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=pd++,this.cacheKey=e,this.usedTimes=1,this.program=l,this.vertexShader=b,this.fragmentShader=k,this}let Id=0;class Nd{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,a=e.fragmentShader,s=this._getShaderStage(t),o=this._getShaderStage(a),f=this._getShaderCacheForMaterial(e);return f.has(s)===!1&&(f.add(s),s.usedTimes++),f.has(o)===!1&&(f.add(o),o.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const a of t)a.usedTimes--,a.usedTimes===0&&this.shaderCache.delete(a.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let a=t.get(e);return a===void 0&&(a=new Set,t.set(e,a)),a}_getShaderStage(e){const t=this.shaderCache;let a=t.get(e);return a===void 0&&(a=new Fd(e),t.set(e,a)),a}}class Fd{constructor(e){this.id=Id++,this.code=e,this.usedTimes=0}}function Od(r,e,t,a,s,o,f){const u=new mo,h=new Nd,x=new Set,m=[],w=s.isWebGL2,A=s.logarithmicDepthBuffer,D=s.vertexTextures;let I=s.precision;const y={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function l(X){return x.add(X),X===0?"uv":`uv${X}`}function c(X,ae,He,Pe,ue){const Oe=Pe.fog,we=ue.geometry,Ze=X.isMeshStandardMaterial?Pe.environment:null,it=(X.isMeshStandardMaterial?t:e).get(X.envMap||Ze),lt=it&&it.mapping===lr?it.image.height:null,Vt=y[X.type];X.precision!==null&&(I=s.getMaxPrecision(X.precision),I!==X.precision&&console.warn("THREE.WebGLProgram.getParameters:",X.precision,"not supported, using",I,"instead."));const _e=we.morphAttributes.position||we.morphAttributes.normal||we.morphAttributes.color,pr=_e!==void 0?_e.length:0;let _s=0;we.morphAttributes.position!==void 0&&(_s=1),we.morphAttributes.normal!==void 0&&(_s=2),we.morphAttributes.color!==void 0&&(_s=3);let Ei,Bl,Wl,Ep;if(Vt){const jp=zt[Vt];Ei=jp.vertexShader,Bl=jp.fragmentShader}else Ei=X.vertexShader,Bl=X.fragmentShader,h.update(X),Wl=h.getVertexShaderID(X),Ep=h.getFragmentShaderID(X);const Lp=r.getRenderTarget(),Op=ue.isInstancedMesh===!0,R0=ue.isBatchedMesh===!0,N0=!!X.map,Qp=!!X.matcap,O0=!!it,zp=!!X.aoMap,M0=!!X.lightMap,W0=!!X.bumpMap,im=!!X.normalMap,F0=!!X.displacementMap,fm=!!X.emissiveMap,cm=!!X.metalnessMap,Ap=!!X.roughnessMap,Io=X.anisotropy>0,p0=X.clearcoat>0,a0=X.iridescence>0,rm=X.sheen>0,X0=X.transmission>0,Nl=Io&&!!X.anisotropyMap,Gl=p0&&!!X.clearcoatMap,Mp=p0&&!!X.clearcoatNormalMap,_0=p0&&!!X.clearcoatRoughnessMap,v0=a0&&!!X.iridescenceMap,z0=a0&&!!X.iridescenceThicknessMap,sm=rm&&!!X.sheenColorMap,Uo=rm&&!!X.sheenRoughnessMap,u0=!!X.specularMap,x0=!!X.specularColorMap,Xl=!!X.specularIntensityMap,Bp=X0&&!!X.transmissionMap,L0=X0&&!!X.thicknessMap,kl=!!X.gradientMap,Np=!!X.alphaMap,V0=X.alphaTest>0,Ke=!!X.alphaHash,g0=!!X.extensions;let d0=cn;X.toneMapped&&(Lp===null||Lp.isXRRenderTarget===!0)&&(d0=r.toneMapping);const Vl={isWebGL2:w,shaderID:Vt,shaderType:X.type,shaderName:X.name,vertexShader:Ei,fragmentShader:Bl,defines:X.defines,customVertexShaderID:Wl,customFragmentShaderID:Ep,isRawShaderMaterial:X.isRawShaderMaterial===!0,glslVersion:X.glslVersion,precision:I,batching:R0,instancing:Op,instancingColor:Op&&ue.instanceColor!==null,instancingMorph:Op&&ue.morphTexture!==null,supportsVertexTextures:D,outputColorSpace:Lp===null?r.outputColorSpace:Lp.isXRRenderTarget===!0?Lp.texture.colorSpace:dn,alphaToCoverage:!!X.alphaToCoverage,map:N0,matcap:Qp,envMap:O0,envMapMode:O0&&it.mapping,envMapCubeUVHeight:lt,aoMap:zp,lightMap:M0,bumpMap:W0,normalMap:im,displacementMap:D&&F0,emissiveMap:fm,normalMapObjectSpace:im&&X.normalMapType===wl,normalMapTangentSpace:im&&X.normalMapType===Al,metalnessMap:cm,roughnessMap:Ap,anisotropy:Io,anisotropyMap:Nl,clearcoat:p0,clearcoatMap:Gl,clearcoatNormalMap:Mp,clearcoatRoughnessMap:_0,iridescence:a0,iridescenceMap:v0,iridescenceThicknessMap:z0,sheen:rm,sheenColorMap:sm,sheenRoughnessMap:Uo,specularMap:u0,specularColorMap:x0,specularIntensityMap:Xl,transmission:X0,transmissionMap:Bp,thicknessMap:L0,gradientMap:kl,opaque:X.transparent===!1&&X.blending===Qn&&X.alphaToCoverage===!1,alphaMap:Np,alphaTest:V0,alphaHash:Ke,combine:X.combine,mapUv:N0&&l(X.map.channel),aoMapUv:zp&&l(X.aoMap.channel),lightMapUv:M0&&l(X.lightMap.channel),bumpMapUv:W0&&l(X.bumpMap.channel),normalMapUv:im&&l(X.normalMap.channel),displacementMapUv:F0&&l(X.displacementMap.channel),emissiveMapUv:fm&&l(X.emissiveMap.channel),metalnessMapUv:cm&&l(X.metalnessMap.channel),roughnessMapUv:Ap&&l(X.roughnessMap.channel),anisotropyMapUv:Nl&&l(X.anisotropyMap.channel),clearcoatMapUv:Gl&&l(X.clearcoatMap.channel),clearcoatNormalMapUv:Mp&&l(X.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:_0&&l(X.clearcoatRoughnessMap.channel),iridescenceMapUv:v0&&l(X.iridescenceMap.channel),iridescenceThicknessMapUv:z0&&l(X.iridescenceThicknessMap.channel),sheenColorMapUv:sm&&l(X.sheenColorMap.channel),sheenRoughnessMapUv:Uo&&l(X.sheenRoughnessMap.channel),specularMapUv:u0&&l(X.specularMap.channel),specularColorMapUv:x0&&l(X.specularColorMap.channel),specularIntensityMapUv:Xl&&l(X.specularIntensityMap.channel),transmissionMapUv:Bp&&l(X.transmissionMap.channel),thicknessMapUv:L0&&l(X.thicknessMap.channel),alphaMapUv:Np&&l(X.alphaMap.channel),vertexTangents:!!we.attributes.tangent&&(im||Io),vertexColors:X.vertexColors,vertexAlphas:X.vertexColors===!0&&!!we.attributes.color&&we.attributes.color.itemSize===4,pointsUvs:ue.isPoints===!0&&!!we.attributes.uv&&(N0||Np),fog:!!Oe,useFog:X.fog===!0,fogExp2:!!Oe&&Oe.isFogExp2,flatShading:X.flatShading===!0,sizeAttenuation:X.sizeAttenuation===!0,logarithmicDepthBuffer:A,skinning:ue.isSkinnedMesh===!0,morphTargets:we.morphAttributes.position!==void 0,morphNormals:we.morphAttributes.normal!==void 0,morphColors:we.morphAttributes.color!==void 0,morphTargetsCount:pr,morphTextureStride:_s,numDirLights:ae.directional.length,numPointLights:ae.point.length,numSpotLights:ae.spot.length,numSpotLightMaps:ae.spotLightMap.length,numRectAreaLights:ae.rectArea.length,numHemiLights:ae.hemi.length,numDirLightShadows:ae.directionalShadowMap.length,numPointLightShadows:ae.pointShadowMap.length,numSpotLightShadows:ae.spotShadowMap.length,numSpotLightShadowsWithMaps:ae.numSpotLightShadowsWithMaps,numLightProbes:ae.numLightProbes,numClippingPlanes:f.numPlanes,numClipIntersection:f.numIntersection,dithering:X.dithering,shadowMapEnabled:r.shadowMap.enabled&&He.length>0,shadowMapType:r.shadowMap.type,toneMapping:d0,useLegacyLights:r._useLegacyLights,decodeVideoTexture:N0&&X.map.isVideoTexture===!0&&je.getTransfer(X.map.colorSpace)===$e,premultipliedAlpha:X.premultipliedAlpha,doubleSided:X.side===Gt,flipSided:X.side===Et,useDepthPacking:X.depthPacking>=0,depthPacking:X.depthPacking||0,index0AttributeName:X.index0AttributeName,extensionDerivatives:g0&&X.extensions.derivatives===!0,extensionFragDepth:g0&&X.extensions.fragDepth===!0,extensionDrawBuffers:g0&&X.extensions.drawBuffers===!0,extensionShaderTextureLOD:g0&&X.extensions.shaderTextureLOD===!0,extensionClipCullDistance:g0&&X.extensions.clipCullDistance===!0&&a.has("WEBGL_clip_cull_distance"),extensionMultiDraw:g0&&X.extensions.multiDraw===!0&&a.has("WEBGL_multi_draw"),rendererExtensionFragDepth:w||a.has("EXT_frag_depth"),rendererExtensionDrawBuffers:w||a.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:w||a.has("EXT_shader_texture_lod"),rendererExtensionParallelShaderCompile:a.has("KHR_parallel_shader_compile"),customProgramCacheKey:X.customProgramCacheKey()};return Vl.vertexUv1s=x.has(1),Vl.vertexUv2s=x.has(2),Vl.vertexUv3s=x.has(3),x.clear(),Vl}function L(X){const ae=[];if(X.shaderID?ae.push(X.shaderID):(ae.push(X.customVertexShaderID),ae.push(X.customFragmentShaderID)),X.defines!==void 0)for(const He in X.defines)ae.push(He),ae.push(X.defines[He]);return X.isRawShaderMaterial===!1&&(R(ae,X),F(ae,X),ae.push(r.outputColorSpace)),ae.push(X.customProgramCacheKey),ae.join()}function R(X,ae){X.push(ae.precision),X.push(ae.outputColorSpace),X.push(ae.envMapMode),X.push(ae.envMapCubeUVHeight),X.push(ae.mapUv),X.push(ae.alphaMapUv),X.push(ae.lightMapUv),X.push(ae.aoMapUv),X.push(ae.bumpMapUv),X.push(ae.normalMapUv),X.push(ae.displacementMapUv),X.push(ae.emissiveMapUv),X.push(ae.metalnessMapUv),X.push(ae.roughnessMapUv),X.push(ae.anisotropyMapUv),X.push(ae.clearcoatMapUv),X.push(ae.clearcoatNormalMapUv),X.push(ae.clearcoatRoughnessMapUv),X.push(ae.iridescenceMapUv),X.push(ae.iridescenceThicknessMapUv),X.push(ae.sheenColorMapUv),X.push(ae.sheenRoughnessMapUv),X.push(ae.specularMapUv),X.push(ae.specularColorMapUv),X.push(ae.specularIntensityMapUv),X.push(ae.transmissionMapUv),X.push(ae.thicknessMapUv),X.push(ae.combine),X.push(ae.fogExp2),X.push(ae.sizeAttenuation),X.push(ae.morphTargetsCount),X.push(ae.morphAttributeCount),X.push(ae.numDirLights),X.push(ae.numPointLights),X.push(ae.numSpotLights),X.push(ae.numSpotLightMaps),X.push(ae.numHemiLights),X.push(ae.numRectAreaLights),X.push(ae.numDirLightShadows),X.push(ae.numPointLightShadows),X.push(ae.numSpotLightShadows),X.push(ae.numSpotLightShadowsWithMaps),X.push(ae.numLightProbes),X.push(ae.shadowMapType),X.push(ae.toneMapping),X.push(ae.numClippingPlanes),X.push(ae.numClipIntersection),X.push(ae.depthPacking)}function F(X,ae){u.disableAll(),ae.isWebGL2&&u.enable(0),ae.supportsVertexTextures&&u.enable(1),ae.instancing&&u.enable(2),ae.instancingColor&&u.enable(3),ae.instancingMorph&&u.enable(4),ae.matcap&&u.enable(5),ae.envMap&&u.enable(6),ae.normalMapObjectSpace&&u.enable(7),ae.normalMapTangentSpace&&u.enable(8),ae.clearcoat&&u.enable(9),ae.iridescence&&u.enable(10),ae.alphaTest&&u.enable(11),ae.vertexColors&&u.enable(12),ae.vertexAlphas&&u.enable(13),ae.vertexUv1s&&u.enable(14),ae.vertexUv2s&&u.enable(15),ae.vertexUv3s&&u.enable(16),ae.vertexTangents&&u.enable(17),ae.anisotropy&&u.enable(18),ae.alphaHash&&u.enable(19),ae.batching&&u.enable(20),X.push(u.mask),u.disableAll(),ae.fog&&u.enable(0),ae.useFog&&u.enable(1),ae.flatShading&&u.enable(2),ae.logarithmicDepthBuffer&&u.enable(3),ae.skinning&&u.enable(4),ae.morphTargets&&u.enable(5),ae.morphNormals&&u.enable(6),ae.morphColors&&u.enable(7),ae.premultipliedAlpha&&u.enable(8),ae.shadowMapEnabled&&u.enable(9),ae.useLegacyLights&&u.enable(10),ae.doubleSided&&u.enable(11),ae.flipSided&&u.enable(12),ae.useDepthPacking&&u.enable(13),ae.dithering&&u.enable(14),ae.transmission&&u.enable(15),ae.sheen&&u.enable(16),ae.opaque&&u.enable(17),ae.pointsUvs&&u.enable(18),ae.decodeVideoTexture&&u.enable(19),ae.alphaToCoverage&&u.enable(20),X.push(u.mask)}function $(X){const ae=y[X.type];let He;if(ae){const Pe=zt[ae];He=mc.clone(Pe.uniforms)}else He=X.uniforms;return He}function b(X,ae){let He;for(let Pe=0,ue=m.length;Pe<ue;Pe++){const Oe=m[Pe];if(Oe.cacheKey===ae){He=Oe,++He.usedTimes;break}}return He===void 0&&(He=new Ud(r,ae,X,o),m.push(He)),He}function k(X){if(--X.usedTimes===0){const ae=m.indexOf(X);m[ae]=m[m.length-1],m.pop(),X.destroy()}}function B(X){h.remove(X)}function J(){h.dispose()}return{getParameters:c,getProgramCacheKey:L,getUniforms:$,acquireProgram:b,releaseProgram:k,releaseShaderCache:B,programs:m,dispose:J}}function Bd(){let r=new WeakMap;function e(o){let f=r.get(o);return f===void 0&&(f={},r.set(o,f)),f}function t(o){r.delete(o)}function a(o,f,u){r.get(o)[f]=u}function s(){r=new WeakMap}return{get:e,remove:t,update:a,dispose:s}}function zd(r,e){return r.groupOrder!==e.groupOrder?r.groupOrder-e.groupOrder:r.renderOrder!==e.renderOrder?r.renderOrder-e.renderOrder:r.material.id!==e.material.id?r.material.id-e.material.id:r.z!==e.z?r.z-e.z:r.id-e.id}function za(r,e){return r.groupOrder!==e.groupOrder?r.groupOrder-e.groupOrder:r.renderOrder!==e.renderOrder?r.renderOrder-e.renderOrder:r.z!==e.z?e.z-r.z:r.id-e.id}function Ga(){const r=[];let e=0;const t=[],a=[],s=[];function o(){e=0,t.length=0,a.length=0,s.length=0}function f(w,A,D,I,y,l){let c=r[e];return c===void 0?(c={id:w.id,object:w,geometry:A,material:D,groupOrder:I,renderOrder:w.renderOrder,z:y,group:l},r[e]=c):(c.id=w.id,c.object=w,c.geometry=A,c.material=D,c.groupOrder=I,c.renderOrder=w.renderOrder,c.z=y,c.group=l),e++,c}function u(w,A,D,I,y,l){const c=f(w,A,D,I,y,l);D.transmission>0?a.push(c):D.transparent===!0?s.push(c):t.push(c)}function h(w,A,D,I,y,l){const c=f(w,A,D,I,y,l);D.transmission>0?a.unshift(c):D.transparent===!0?s.unshift(c):t.unshift(c)}function x(w,A){t.length>1&&t.sort(w||zd),a.length>1&&a.sort(A||za),s.length>1&&s.sort(A||za)}function m(){for(let w=e,A=r.length;w<A;w++){const D=r[w];if(D.id===null)break;D.id=null,D.object=null,D.geometry=null,D.material=null,D.group=null}}return{opaque:t,transmissive:a,transparent:s,init:o,push:u,unshift:h,finish:m,sort:x}}function Gd(){let r=new WeakMap;function e(a,s){const o=r.get(a);let f;return o===void 0?(f=new Ga,r.set(a,[f])):s>=o.length?(f=new Ga,o.push(f)):f=o[s],f}function t(){r=new WeakMap}return{get:e,dispose:t}}function Hd(){const r={};return{get:function(e){if(r[e.id]!==void 0)return r[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new U,color:new qe};break;case"SpotLight":t={position:new U,direction:new U,color:new qe,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new U,color:new qe,distance:0,decay:0};break;case"HemisphereLight":t={direction:new U,skyColor:new qe,groundColor:new qe};break;case"RectAreaLight":t={color:new qe,position:new U,halfWidth:new U,halfHeight:new U};break}return r[e.id]=t,t}}}function Vd(){const r={};return{get:function(e){if(r[e.id]!==void 0)return r[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ie};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ie};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ie,shadowCameraNear:1,shadowCameraFar:1e3};break}return r[e.id]=t,t}}}let kd=0;function Wd(r,e){return(e.castShadow?2:0)-(r.castShadow?2:0)+(e.map?1:0)-(r.map?1:0)}function Xd(r,e){const t=new Hd,a=Vd(),s={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let m=0;m<9;m++)s.probe.push(new U);const o=new U,f=new st,u=new st;function h(m,w){let A=0,D=0,I=0;for(let He=0;He<9;He++)s.probe[He].set(0,0,0);let y=0,l=0,c=0,L=0,R=0,F=0,$=0,b=0,k=0,B=0,J=0;m.sort(Wd);const X=w===!0?Math.PI:1;for(let He=0,Pe=m.length;He<Pe;He++){const ue=m[He],Oe=ue.color,we=ue.intensity,Ze=ue.distance,it=ue.shadow&&ue.shadow.map?ue.shadow.map.texture:null;if(ue.isAmbientLight)A+=Oe.r*we*X,D+=Oe.g*we*X,I+=Oe.b*we*X;else if(ue.isLightProbe){for(let lt=0;lt<9;lt++)s.probe[lt].addScaledVector(ue.sh.coefficients[lt],we);J++}else if(ue.isDirectionalLight){const lt=t.get(ue);if(lt.color.copy(ue.color).multiplyScalar(ue.intensity*X),ue.castShadow){const Vt=ue.shadow,_e=a.get(ue);_e.shadowBias=Vt.bias,_e.shadowNormalBias=Vt.normalBias,_e.shadowRadius=Vt.radius,_e.shadowMapSize=Vt.mapSize,s.directionalShadow[y]=_e,s.directionalShadowMap[y]=it,s.directionalShadowMatrix[y]=ue.shadow.matrix,F++}s.directional[y]=lt,y++}else if(ue.isSpotLight){const lt=t.get(ue);lt.position.setFromMatrixPosition(ue.matrixWorld),lt.color.copy(Oe).multiplyScalar(we*X),lt.distance=Ze,lt.coneCos=Math.cos(ue.angle),lt.penumbraCos=Math.cos(ue.angle*(1-ue.penumbra)),lt.decay=ue.decay,s.spot[c]=lt;const Vt=ue.shadow;if(ue.map&&(s.spotLightMap[k]=ue.map,k++,Vt.updateMatrices(ue),ue.castShadow&&B++),s.spotLightMatrix[c]=Vt.matrix,ue.castShadow){const _e=a.get(ue);_e.shadowBias=Vt.bias,_e.shadowNormalBias=Vt.normalBias,_e.shadowRadius=Vt.radius,_e.shadowMapSize=Vt.mapSize,s.spotShadow[c]=_e,s.spotShadowMap[c]=it,b++}c++}else if(ue.isRectAreaLight){const lt=t.get(ue);lt.color.copy(Oe).multiplyScalar(we),lt.halfWidth.set(ue.width*.5,0,0),lt.halfHeight.set(0,ue.height*.5,0),s.rectArea[L]=lt,L++}else if(ue.isPointLight){const lt=t.get(ue);if(lt.color.copy(ue.color).multiplyScalar(ue.intensity*X),lt.distance=ue.distance,lt.decay=ue.decay,ue.castShadow){const Vt=ue.shadow,_e=a.get(ue);_e.shadowBias=Vt.bias,_e.shadowNormalBias=Vt.normalBias,_e.shadowRadius=Vt.radius,_e.shadowMapSize=Vt.mapSize,_e.shadowCameraNear=Vt.camera.near,_e.shadowCameraFar=Vt.camera.far,s.pointShadow[l]=_e,s.pointShadowMap[l]=it,s.pointShadowMatrix[l]=ue.shadow.matrix,$++}s.point[l]=lt,l++}else if(ue.isHemisphereLight){const lt=t.get(ue);lt.skyColor.copy(ue.color).multiplyScalar(we*X),lt.groundColor.copy(ue.groundColor).multiplyScalar(we*X),s.hemi[R]=lt,R++}}L>0&&(e.isWebGL2?r.has("OES_texture_float_linear")===!0?(s.rectAreaLTC1=oe.LTC_FLOAT_1,s.rectAreaLTC2=oe.LTC_FLOAT_2):(s.rectAreaLTC1=oe.LTC_HALF_1,s.rectAreaLTC2=oe.LTC_HALF_2):r.has("OES_texture_float_linear")===!0?(s.rectAreaLTC1=oe.LTC_FLOAT_1,s.rectAreaLTC2=oe.LTC_FLOAT_2):r.has("OES_texture_half_float_linear")===!0?(s.rectAreaLTC1=oe.LTC_HALF_1,s.rectAreaLTC2=oe.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),s.ambient[0]=A,s.ambient[1]=D,s.ambient[2]=I;const ae=s.hash;(ae.directionalLength!==y||ae.pointLength!==l||ae.spotLength!==c||ae.rectAreaLength!==L||ae.hemiLength!==R||ae.numDirectionalShadows!==F||ae.numPointShadows!==$||ae.numSpotShadows!==b||ae.numSpotMaps!==k||ae.numLightProbes!==J)&&(s.directional.length=y,s.spot.length=c,s.rectArea.length=L,s.point.length=l,s.hemi.length=R,s.directionalShadow.length=F,s.directionalShadowMap.length=F,s.pointShadow.length=$,s.pointShadowMap.length=$,s.spotShadow.length=b,s.spotShadowMap.length=b,s.directionalShadowMatrix.length=F,s.pointShadowMatrix.length=$,s.spotLightMatrix.length=b+k-B,s.spotLightMap.length=k,s.numSpotLightShadowsWithMaps=B,s.numLightProbes=J,ae.directionalLength=y,ae.pointLength=l,ae.spotLength=c,ae.rectAreaLength=L,ae.hemiLength=R,ae.numDirectionalShadows=F,ae.numPointShadows=$,ae.numSpotShadows=b,ae.numSpotMaps=k,ae.numLightProbes=J,s.version=kd++)}function x(m,w){let A=0,D=0,I=0,y=0,l=0;const c=w.matrixWorldInverse;for(let L=0,R=m.length;L<R;L++){const F=m[L];if(F.isDirectionalLight){const $=s.directional[A];$.direction.setFromMatrixPosition(F.matrixWorld),o.setFromMatrixPosition(F.target.matrixWorld),$.direction.sub(o),$.direction.transformDirection(c),A++}else if(F.isSpotLight){const $=s.spot[I];$.position.setFromMatrixPosition(F.matrixWorld),$.position.applyMatrix4(c),$.direction.setFromMatrixPosition(F.matrixWorld),o.setFromMatrixPosition(F.target.matrixWorld),$.direction.sub(o),$.direction.transformDirection(c),I++}else if(F.isRectAreaLight){const $=s.rectArea[y];$.position.setFromMatrixPosition(F.matrixWorld),$.position.applyMatrix4(c),u.identity(),f.copy(F.matrixWorld),f.premultiply(c),u.extractRotation(f),$.halfWidth.set(F.width*.5,0,0),$.halfHeight.set(0,F.height*.5,0),$.halfWidth.applyMatrix4(u),$.halfHeight.applyMatrix4(u),y++}else if(F.isPointLight){const $=s.point[D];$.position.setFromMatrixPosition(F.matrixWorld),$.position.applyMatrix4(c),D++}else if(F.isHemisphereLight){const $=s.hemi[l];$.direction.setFromMatrixPosition(F.matrixWorld),$.direction.transformDirection(c),l++}}}return{setup:h,setupView:x,state:s}}function Ha(r,e){const t=new Xd(r,e),a=[],s=[];function o(){a.length=0,s.length=0}function f(m){a.push(m)}function u(m){s.push(m)}function h(m){t.setup(a,m)}function x(m){t.setupView(a,m)}return{init:o,state:{lightsArray:a,shadowsArray:s,lights:t},setupLights:h,setupLightsView:x,pushLight:f,pushShadow:u}}function Yd(r,e){let t=new WeakMap;function a(o,f=0){const u=t.get(o);let h;return u===void 0?(h=new Ha(r,e),t.set(o,[h])):f>=u.length?(h=new Ha(r,e),u.push(h)):h=u[f],h}function s(){t=new WeakMap}return{get:a,dispose:s}}class qd extends xi{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Tl,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class jd extends xi{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const Kd=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,Zd=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function $d(r,e,t){let a=new Eo;const s=new Ie,o=new Ie,f=new ht,u=new qd({depthPacking:bl}),h=new jd,x={},m=t.maxTextureSize,w={[hn]:Et,[Et]:hn,[Gt]:Gt},A=new fn({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ie},radius:{value:4}},vertexShader:Kd,fragmentShader:Zd}),D=A.clone();D.defines.HORIZONTAL_PASS=1;const I=new Tt;I.setAttribute("position",new Ht(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const y=new Rt(I,A),l=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Qa;let c=this.type;this.render=function(b,k,B){if(l.enabled===!1||l.autoUpdate===!1&&l.needsUpdate===!1||b.length===0)return;const J=r.getRenderTarget(),X=r.getActiveCubeFace(),ae=r.getActiveMipmapLevel(),He=r.state;He.setBlending(ln),He.buffers.color.setClear(1,1,1,1),He.buffers.depth.setTest(!0),He.setScissorTest(!1);const Pe=c!==jt&&this.type===jt,ue=c===jt&&this.type!==jt;for(let Oe=0,we=b.length;Oe<we;Oe++){const Ze=b[Oe],it=Ze.shadow;if(it===void 0){console.warn("THREE.WebGLShadowMap:",Ze,"has no shadow.");continue}if(it.autoUpdate===!1&&it.needsUpdate===!1)continue;s.copy(it.mapSize);const lt=it.getFrameExtents();if(s.multiply(lt),o.copy(it.mapSize),(s.x>m||s.y>m)&&(s.x>m&&(o.x=Math.floor(m/lt.x),s.x=o.x*lt.x,it.mapSize.x=o.x),s.y>m&&(o.y=Math.floor(m/lt.y),s.y=o.y*lt.y,it.mapSize.y=o.y)),it.map===null||Pe===!0||ue===!0){const _e=this.type!==jt?{minFilter:xt,magFilter:xt}:{};it.map!==null&&it.map.dispose(),it.map=new Cn(s.x,s.y,_e),it.map.texture.name=Ze.name+".shadowMap",it.camera.updateProjectionMatrix()}r.setRenderTarget(it.map),r.clear();const Vt=it.getViewportCount();for(let _e=0;_e<Vt;_e++){const pr=it.getViewport(_e);f.set(o.x*pr.x,o.y*pr.y,o.x*pr.z,o.y*pr.w),He.viewport(f),it.updateMatrices(Ze,_e),a=it.getFrustum(),F(k,B,it.camera,Ze,this.type)}it.isPointLightShadow!==!0&&this.type===jt&&L(it,B),it.needsUpdate=!1}c=this.type,l.needsUpdate=!1,r.setRenderTarget(J,X,ae)};function L(b,k){const B=e.update(y);A.defines.VSM_SAMPLES!==b.blurSamples&&(A.defines.VSM_SAMPLES=b.blurSamples,D.defines.VSM_SAMPLES=b.blurSamples,A.needsUpdate=!0,D.needsUpdate=!0),b.mapPass===null&&(b.mapPass=new Cn(s.x,s.y)),A.uniforms.shadow_pass.value=b.map.texture,A.uniforms.resolution.value=b.mapSize,A.uniforms.radius.value=b.radius,r.setRenderTarget(b.mapPass),r.clear(),r.renderBufferDirect(k,null,B,A,y,null),D.uniforms.shadow_pass.value=b.mapPass.texture,D.uniforms.resolution.value=b.mapSize,D.uniforms.radius.value=b.radius,r.setRenderTarget(b.map),r.clear(),r.renderBufferDirect(k,null,B,D,y,null)}function R(b,k,B,J){let X=null;const ae=B.isPointLight===!0?b.customDistanceMaterial:b.customDepthMaterial;if(ae!==void 0)X=ae;else if(X=B.isPointLight===!0?h:u,r.localClippingEnabled&&k.clipShadows===!0&&Array.isArray(k.clippingPlanes)&&k.clippingPlanes.length!==0||k.displacementMap&&k.displacementScale!==0||k.alphaMap&&k.alphaTest>0||k.map&&k.alphaTest>0){const He=X.uuid,Pe=k.uuid;let ue=x[He];ue===void 0&&(ue={},x[He]=ue);let Oe=ue[Pe];Oe===void 0&&(Oe=X.clone(),ue[Pe]=Oe,k.addEventListener("dispose",$)),X=Oe}if(X.visible=k.visible,X.wireframe=k.wireframe,J===jt?X.side=k.shadowSide!==null?k.shadowSide:k.side:X.side=k.shadowSide!==null?k.shadowSide:w[k.side],X.alphaMap=k.alphaMap,X.alphaTest=k.alphaTest,X.map=k.map,X.clipShadows=k.clipShadows,X.clippingPlanes=k.clippingPlanes,X.clipIntersection=k.clipIntersection,X.displacementMap=k.displacementMap,X.displacementScale=k.displacementScale,X.displacementBias=k.displacementBias,X.wireframeLinewidth=k.wireframeLinewidth,X.linewidth=k.linewidth,B.isPointLight===!0&&X.isMeshDistanceMaterial===!0){const He=r.properties.get(X);He.light=B}return X}function F(b,k,B,J,X){if(b.visible===!1)return;if(b.layers.test(k.layers)&&(b.isMesh||b.isLine||b.isPoints)&&(b.castShadow||b.receiveShadow&&X===jt)&&(!b.frustumCulled||a.intersectsObject(b))){b.modelViewMatrix.multiplyMatrices(B.matrixWorldInverse,b.matrixWorld);const He=e.update(b),Pe=b.material;if(Array.isArray(Pe)){const ue=He.groups;for(let Oe=0,we=ue.length;Oe<we;Oe++){const Ze=ue[Oe],it=Pe[Ze.materialIndex];if(it&&it.visible){const lt=R(b,it,J,X);b.onBeforeShadow(r,b,k,B,He,lt,Ze),r.renderBufferDirect(B,null,He,lt,b,Ze),b.onAfterShadow(r,b,k,B,He,lt,Ze)}}}else if(Pe.visible){const ue=R(b,Pe,J,X);b.onBeforeShadow(r,b,k,B,He,ue,null),r.renderBufferDirect(B,null,He,ue,b,null),b.onAfterShadow(r,b,k,B,He,ue,null)}}const ae=b.children;for(let He=0,Pe=ae.length;He<Pe;He++)F(ae[He],k,B,J,X)}function $(b){b.target.removeEventListener("dispose",$);for(const k in x){const B=x[k],J=b.target.uuid;J in B&&(B[J].dispose(),delete B[J])}}}function Jd(r,e,t){const a=t.isWebGL2;function s(){let Np=!1;const V0=new ht;let Ke=null;const g0=new ht(0,0,0,0);return{setMask:function(d0){Ke!==d0&&!Np&&(r.colorMask(d0,d0,d0,d0),Ke=d0)},setLocked:function(d0){Np=d0},setClear:function(d0,Vl,jp,K0,Pm){Pm===!0&&(d0*=K0,Vl*=K0,jp*=K0),V0.set(d0,Vl,jp,K0),g0.equals(V0)===!1&&(r.clearColor(d0,Vl,jp,K0),g0.copy(V0))},reset:function(){Np=!1,Ke=null,g0.set(-1,0,0,0)}}}function o(){let Np=!1,V0=null,Ke=null,g0=null;return{setTest:function(d0){d0?Op(r.DEPTH_TEST):R0(r.DEPTH_TEST)},setMask:function(d0){V0!==d0&&!Np&&(r.depthMask(d0),V0=d0)},setFunc:function(d0){if(Ke!==d0){switch(d0){case el:r.depthFunc(r.NEVER);break;case tl:r.depthFunc(r.ALWAYS);break;case nl:r.depthFunc(r.LESS);break;case Qi:r.depthFunc(r.LEQUAL);break;case il:r.depthFunc(r.EQUAL);break;case rl:r.depthFunc(r.GEQUAL);break;case sl:r.depthFunc(r.GREATER);break;case al:r.depthFunc(r.NOTEQUAL);break;default:r.depthFunc(r.LEQUAL)}Ke=d0}},setLocked:function(d0){Np=d0},setClear:function(d0){g0!==d0&&(r.clearDepth(d0),g0=d0)},reset:function(){Np=!1,V0=null,Ke=null,g0=null}}}function f(){let Np=!1,V0=null,Ke=null,g0=null,d0=null,Vl=null,jp=null,K0=null,Pm=null;return{setTest:function(Cm){Np||(Cm?Op(r.STENCIL_TEST):R0(r.STENCIL_TEST))},setMask:function(Cm){V0!==Cm&&!Np&&(r.stencilMask(Cm),V0=Cm)},setFunc:function(Cm,Fm,ev){(Ke!==Cm||g0!==Fm||d0!==ev)&&(r.stencilFunc(Cm,Fm,ev),Ke=Cm,g0=Fm,d0=ev)},setOp:function(Cm,Fm,ev){(Vl!==Cm||jp!==Fm||K0!==ev)&&(r.stencilOp(Cm,Fm,ev),Vl=Cm,jp=Fm,K0=ev)},setLocked:function(Cm){Np=Cm},setClear:function(Cm){Pm!==Cm&&(r.clearStencil(Cm),Pm=Cm)},reset:function(){Np=!1,V0=null,Ke=null,g0=null,d0=null,Vl=null,jp=null,K0=null,Pm=null}}}const u=new s,h=new o,x=new f,m=new WeakMap,w=new WeakMap;let A={},D={},I=new WeakMap,y=[],l=null,c=!1,L=null,R=null,F=null,$=null,b=null,k=null,B=null,J=new qe(0,0,0),X=0,ae=!1,He=null,Pe=null,ue=null,Oe=null,we=null;const Ze=r.getParameter(r.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let it=!1,lt=0;const Vt=r.getParameter(r.VERSION);Vt.indexOf("WebGL")!==-1?(lt=parseFloat(/^WebGL (\d)/.exec(Vt)[1]),it=lt>=1):Vt.indexOf("OpenGL ES")!==-1&&(lt=parseFloat(/^OpenGL ES (\d)/.exec(Vt)[1]),it=lt>=2);let _e=null,pr={};const _s=r.getParameter(r.SCISSOR_BOX),Ei=r.getParameter(r.VIEWPORT),Bl=new ht().fromArray(_s),Wl=new ht().fromArray(Ei);function Ep(Np,V0,Ke,g0){const d0=new Uint8Array(4),Vl=r.createTexture();r.bindTexture(Np,Vl),r.texParameteri(Np,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(Np,r.TEXTURE_MAG_FILTER,r.NEAREST);for(let jp=0;jp<Ke;jp++)a&&(Np===r.TEXTURE_3D||Np===r.TEXTURE_2D_ARRAY)?r.texImage3D(V0,0,r.RGBA,1,1,g0,0,r.RGBA,r.UNSIGNED_BYTE,d0):r.texImage2D(V0+jp,0,r.RGBA,1,1,0,r.RGBA,r.UNSIGNED_BYTE,d0);return Vl}const Lp={};Lp[r.TEXTURE_2D]=Ep(r.TEXTURE_2D,r.TEXTURE_2D,1),Lp[r.TEXTURE_CUBE_MAP]=Ep(r.TEXTURE_CUBE_MAP,r.TEXTURE_CUBE_MAP_POSITIVE_X,6),a&&(Lp[r.TEXTURE_2D_ARRAY]=Ep(r.TEXTURE_2D_ARRAY,r.TEXTURE_2D_ARRAY,1,1),Lp[r.TEXTURE_3D]=Ep(r.TEXTURE_3D,r.TEXTURE_3D,1,1)),u.setClear(0,0,0,1),h.setClear(1),x.setClear(0),Op(r.DEPTH_TEST),h.setFunc(Qi),F0(!1),fm(Ms),Op(r.CULL_FACE),W0(ln);function Op(Np){A[Np]!==!0&&(r.enable(Np),A[Np]=!0)}function R0(Np){A[Np]!==!1&&(r.disable(Np),A[Np]=!1)}function N0(Np,V0){return D[Np]!==V0?(r.bindFramebuffer(Np,V0),D[Np]=V0,a&&(Np===r.DRAW_FRAMEBUFFER&&(D[r.FRAMEBUFFER]=V0),Np===r.FRAMEBUFFER&&(D[r.DRAW_FRAMEBUFFER]=V0)),!0):!1}function Qp(Np,V0){let Ke=y,g0=!1;if(Np){Ke=I.get(V0),Ke===void 0&&(Ke=[],I.set(V0,Ke));const d0=Np.textures;if(Ke.length!==d0.length||Ke[0]!==r.COLOR_ATTACHMENT0){for(let Vl=0,jp=d0.length;Vl<jp;Vl++)Ke[Vl]=r.COLOR_ATTACHMENT0+Vl;Ke.length=d0.length,g0=!0}}else Ke[0]!==r.BACK&&(Ke[0]=r.BACK,g0=!0);if(g0)if(t.isWebGL2)r.drawBuffers(Ke);else if(e.has("WEBGL_draw_buffers")===!0)e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Ke);else throw new Error("THREE.WebGLState: Usage of gl.drawBuffers() require WebGL2 or WEBGL_draw_buffers extension")}function O0(Np){return l!==Np?(r.useProgram(Np),l=Np,!0):!1}const zp={[Tn]:r.FUNC_ADD,[zo]:r.FUNC_SUBTRACT,[Go]:r.FUNC_REVERSE_SUBTRACT};if(a)zp[Ts]=r.MIN,zp[bs]=r.MAX;else{const Np=e.get("EXT_blend_minmax");Np!==null&&(zp[Ts]=Np.MIN_EXT,zp[bs]=Np.MAX_EXT)}const M0={[Ho]:r.ZERO,[Vo]:r.ONE,[ko]:r.SRC_COLOR,[Jr]:r.SRC_ALPHA,[Ko]:r.SRC_ALPHA_SATURATE,[qo]:r.DST_COLOR,[Xo]:r.DST_ALPHA,[Wo]:r.ONE_MINUS_SRC_COLOR,[Qr]:r.ONE_MINUS_SRC_ALPHA,[jo]:r.ONE_MINUS_DST_COLOR,[Yo]:r.ONE_MINUS_DST_ALPHA,[Zo]:r.CONSTANT_COLOR,[$o]:r.ONE_MINUS_CONSTANT_COLOR,[Jo]:r.CONSTANT_ALPHA,[Qo]:r.ONE_MINUS_CONSTANT_ALPHA};function W0(Np,V0,Ke,g0,d0,Vl,jp,K0,Pm,Cm){if(Np===ln){c===!0&&(R0(r.BLEND),c=!1);return}if(c===!1&&(Op(r.BLEND),c=!0),Np!==Bo){if(Np!==L||Cm!==ae){if((R!==Tn||b!==Tn)&&(r.blendEquation(r.FUNC_ADD),R=Tn,b=Tn),Cm)switch(Np){case Qn:r.blendFuncSeparate(r.ONE,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA);break;case Ss:r.blendFunc(r.ONE,r.ONE);break;case Es:r.blendFuncSeparate(r.ZERO,r.ONE_MINUS_SRC_COLOR,r.ZERO,r.ONE);break;case ys:r.blendFuncSeparate(r.ZERO,r.SRC_COLOR,r.ZERO,r.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",Np);break}else switch(Np){case Qn:r.blendFuncSeparate(r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA);break;case Ss:r.blendFunc(r.SRC_ALPHA,r.ONE);break;case Es:r.blendFuncSeparate(r.ZERO,r.ONE_MINUS_SRC_COLOR,r.ZERO,r.ONE);break;case ys:r.blendFunc(r.ZERO,r.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",Np);break}F=null,$=null,k=null,B=null,J.set(0,0,0),X=0,L=Np,ae=Cm}return}d0=d0||V0,Vl=Vl||Ke,jp=jp||g0,(V0!==R||d0!==b)&&(r.blendEquationSeparate(zp[V0],zp[d0]),R=V0,b=d0),(Ke!==F||g0!==$||Vl!==k||jp!==B)&&(r.blendFuncSeparate(M0[Ke],M0[g0],M0[Vl],M0[jp]),F=Ke,$=g0,k=Vl,B=jp),(K0.equals(J)===!1||Pm!==X)&&(r.blendColor(K0.r,K0.g,K0.b,Pm),J.copy(K0),X=Pm),L=Np,ae=!1}function im(Np,V0){Np.side===Gt?R0(r.CULL_FACE):Op(r.CULL_FACE);let Ke=Np.side===Et;V0&&(Ke=!Ke),F0(Ke),Np.blending===Qn&&Np.transparent===!1?W0(ln):W0(Np.blending,Np.blendEquation,Np.blendSrc,Np.blendDst,Np.blendEquationAlpha,Np.blendSrcAlpha,Np.blendDstAlpha,Np.blendColor,Np.blendAlpha,Np.premultipliedAlpha),h.setFunc(Np.depthFunc),h.setTest(Np.depthTest),h.setMask(Np.depthWrite),u.setMask(Np.colorWrite);const g0=Np.stencilWrite;x.setTest(g0),g0&&(x.setMask(Np.stencilWriteMask),x.setFunc(Np.stencilFunc,Np.stencilRef,Np.stencilFuncMask),x.setOp(Np.stencilFail,Np.stencilZFail,Np.stencilZPass)),Ap(Np.polygonOffset,Np.polygonOffsetFactor,Np.polygonOffsetUnits),Np.alphaToCoverage===!0?Op(r.SAMPLE_ALPHA_TO_COVERAGE):R0(r.SAMPLE_ALPHA_TO_COVERAGE)}function F0(Np){He!==Np&&(Np?r.frontFace(r.CW):r.frontFace(r.CCW),He=Np)}function fm(Np){Np!==No?(Op(r.CULL_FACE),Np!==Pe&&(Np===Ms?r.cullFace(r.BACK):Np===Fo?r.cullFace(r.FRONT):r.cullFace(r.FRONT_AND_BACK))):R0(r.CULL_FACE),Pe=Np}function cm(Np){Np!==ue&&(it&&r.lineWidth(Np),ue=Np)}function Ap(Np,V0,Ke){Np?(Op(r.POLYGON_OFFSET_FILL),(Oe!==V0||we!==Ke)&&(r.polygonOffset(V0,Ke),Oe=V0,we=Ke)):R0(r.POLYGON_OFFSET_FILL)}function Io(Np){Np?Op(r.SCISSOR_TEST):R0(r.SCISSOR_TEST)}function p0(Np){Np===void 0&&(Np=r.TEXTURE0+Ze-1),_e!==Np&&(r.activeTexture(Np),_e=Np)}function a0(Np,V0,Ke){Ke===void 0&&(_e===null?Ke=r.TEXTURE0+Ze-1:Ke=_e);let g0=pr[Ke];g0===void 0&&(g0={type:void 0,texture:void 0},pr[Ke]=g0),(g0.type!==Np||g0.texture!==V0)&&(_e!==Ke&&(r.activeTexture(Ke),_e=Ke),r.bindTexture(Np,V0||Lp[Np]),g0.type=Np,g0.texture=V0)}function rm(){const Np=pr[_e];Np!==void 0&&Np.type!==void 0&&(r.bindTexture(Np.type,null),Np.type=void 0,Np.texture=void 0)}function X0(){try{r.compressedTexImage2D.apply(r,arguments)}catch(Np){console.error("THREE.WebGLState:",Np)}}function Nl(){try{r.compressedTexImage3D.apply(r,arguments)}catch(Np){console.error("THREE.WebGLState:",Np)}}function Gl(){try{r.texSubImage2D.apply(r,arguments)}catch(Np){console.error("THREE.WebGLState:",Np)}}function Mp(){try{r.texSubImage3D.apply(r,arguments)}catch(Np){console.error("THREE.WebGLState:",Np)}}function _0(){try{r.compressedTexSubImage2D.apply(r,arguments)}catch(Np){console.error("THREE.WebGLState:",Np)}}function v0(){try{r.compressedTexSubImage3D.apply(r,arguments)}catch(Np){console.error("THREE.WebGLState:",Np)}}function z0(){try{r.texStorage2D.apply(r,arguments)}catch(Np){console.error("THREE.WebGLState:",Np)}}function sm(){try{r.texStorage3D.apply(r,arguments)}catch(Np){console.error("THREE.WebGLState:",Np)}}function Uo(){try{r.texImage2D.apply(r,arguments)}catch(Np){console.error("THREE.WebGLState:",Np)}}function u0(){try{r.texImage3D.apply(r,arguments)}catch(Np){console.error("THREE.WebGLState:",Np)}}function x0(Np){Bl.equals(Np)===!1&&(r.scissor(Np.x,Np.y,Np.z,Np.w),Bl.copy(Np))}function Xl(Np){Wl.equals(Np)===!1&&(r.viewport(Np.x,Np.y,Np.z,Np.w),Wl.copy(Np))}function Bp(Np,V0){let Ke=w.get(V0);Ke===void 0&&(Ke=new WeakMap,w.set(V0,Ke));let g0=Ke.get(Np);g0===void 0&&(g0=r.getUniformBlockIndex(V0,Np.name),Ke.set(Np,g0))}function L0(Np,V0){const Ke=w.get(V0).get(Np);m.get(V0)!==Ke&&(r.uniformBlockBinding(V0,Ke,Np.__bindingPointIndex),m.set(V0,Ke))}function kl(){r.disable(r.BLEND),r.disable(r.CULL_FACE),r.disable(r.DEPTH_TEST),r.disable(r.POLYGON_OFFSET_FILL),r.disable(r.SCISSOR_TEST),r.disable(r.STENCIL_TEST),r.disable(r.SAMPLE_ALPHA_TO_COVERAGE),r.blendEquation(r.FUNC_ADD),r.blendFunc(r.ONE,r.ZERO),r.blendFuncSeparate(r.ONE,r.ZERO,r.ONE,r.ZERO),r.blendColor(0,0,0,0),r.colorMask(!0,!0,!0,!0),r.clearColor(0,0,0,0),r.depthMask(!0),r.depthFunc(r.LESS),r.clearDepth(1),r.stencilMask(4294967295),r.stencilFunc(r.ALWAYS,0,4294967295),r.stencilOp(r.KEEP,r.KEEP,r.KEEP),r.clearStencil(0),r.cullFace(r.BACK),r.frontFace(r.CCW),r.polygonOffset(0,0),r.activeTexture(r.TEXTURE0),r.bindFramebuffer(r.FRAMEBUFFER,null),a===!0&&(r.bindFramebuffer(r.DRAW_FRAMEBUFFER,null),r.bindFramebuffer(r.READ_FRAMEBUFFER,null)),r.useProgram(null),r.lineWidth(1),r.scissor(0,0,r.canvas.width,r.canvas.height),r.viewport(0,0,r.canvas.width,r.canvas.height),A={},_e=null,pr={},D={},I=new WeakMap,y=[],l=null,c=!1,L=null,R=null,F=null,$=null,b=null,k=null,B=null,J=new qe(0,0,0),X=0,ae=!1,He=null,Pe=null,ue=null,Oe=null,we=null,Bl.set(0,0,r.canvas.width,r.canvas.height),Wl.set(0,0,r.canvas.width,r.canvas.height),u.reset(),h.reset(),x.reset()}return{buffers:{color:u,depth:h,stencil:x},enable:Op,disable:R0,bindFramebuffer:N0,drawBuffers:Qp,useProgram:O0,setBlending:W0,setMaterial:im,setFlipSided:F0,setCullFace:fm,setLineWidth:cm,setPolygonOffset:Ap,setScissorTest:Io,activeTexture:p0,bindTexture:a0,unbindTexture:rm,compressedTexImage2D:X0,compressedTexImage3D:Nl,texImage2D:Uo,texImage3D:u0,updateUBOMapping:Bp,uniformBlockBinding:L0,texStorage2D:z0,texStorage3D:sm,texSubImage2D:Gl,texSubImage3D:Mp,compressedTexSubImage2D:_0,compressedTexSubImage3D:v0,scissor:x0,viewport:Xl,reset:kl}}function Qd(r,e,t,a,s,o,f){const u=s.isWebGL2,h=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,x=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),m=new Ie,w=new WeakMap;let A;const D=new WeakMap;let I=!1;try{I=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function y(Ap,Io){return I?new OffscreenCanvas(Ap,Io):sr("canvas")}function l(Ap,Io,p0,a0){let rm=1;const X0=cm(Ap);if((X0.width>a0||X0.height>a0)&&(rm=a0/Math.max(X0.width,X0.height)),rm<1||Io===!0)if(typeof HTMLImageElement<"u"&&Ap instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&Ap instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&Ap instanceof ImageBitmap||typeof VideoFrame<"u"&&Ap instanceof VideoFrame){const Nl=Io?rr:Math.floor,Gl=Nl(rm*X0.width),Mp=Nl(rm*X0.height);A===void 0&&(A=y(Gl,Mp));const _0=p0?y(Gl,Mp):A;return _0.width=Gl,_0.height=Mp,_0.getContext("2d").drawImage(Ap,0,0,Gl,Mp),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+X0.width+"x"+X0.height+") to ("+Gl+"x"+Mp+")."),_0}else return"data"in Ap&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+X0.width+"x"+X0.height+")."),Ap;return Ap}function c(Ap){const Io=cm(Ap);return ss(Io.width)&&ss(Io.height)}function L(Ap){return u?!1:Ap.wrapS!==Nt||Ap.wrapT!==Nt||Ap.minFilter!==xt&&Ap.minFilter!==St}function R(Ap,Io){return Ap.generateMipmaps&&Io&&Ap.minFilter!==xt&&Ap.minFilter!==St}function F(Ap){r.generateMipmap(Ap)}function $(Ap,Io,p0,a0,rm=!1){if(u===!1)return Io;if(Ap!==null){if(r[Ap]!==void 0)return r[Ap];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Ap+"'")}let X0=Io;if(Io===r.RED&&(p0===r.FLOAT&&(X0=r.R32F),p0===r.HALF_FLOAT&&(X0=r.R16F),p0===r.UNSIGNED_BYTE&&(X0=r.R8)),Io===r.RED_INTEGER&&(p0===r.UNSIGNED_BYTE&&(X0=r.R8UI),p0===r.UNSIGNED_SHORT&&(X0=r.R16UI),p0===r.UNSIGNED_INT&&(X0=r.R32UI),p0===r.BYTE&&(X0=r.R8I),p0===r.SHORT&&(X0=r.R16I),p0===r.INT&&(X0=r.R32I)),Io===r.RG&&(p0===r.FLOAT&&(X0=r.RG32F),p0===r.HALF_FLOAT&&(X0=r.RG16F),p0===r.UNSIGNED_BYTE&&(X0=r.RG8)),Io===r.RG_INTEGER&&(p0===r.UNSIGNED_BYTE&&(X0=r.RG8UI),p0===r.UNSIGNED_SHORT&&(X0=r.RG16UI),p0===r.UNSIGNED_INT&&(X0=r.RG32UI),p0===r.BYTE&&(X0=r.RG8I),p0===r.SHORT&&(X0=r.RG16I),p0===r.INT&&(X0=r.RG32I)),Io===r.RGBA){const Nl=rm?er:je.getTransfer(a0);p0===r.FLOAT&&(X0=r.RGBA32F),p0===r.HALF_FLOAT&&(X0=r.RGBA16F),p0===r.UNSIGNED_BYTE&&(X0=Nl===$e?r.SRGB8_ALPHA8:r.RGBA8),p0===r.UNSIGNED_SHORT_4_4_4_4&&(X0=r.RGBA4),p0===r.UNSIGNED_SHORT_5_5_5_1&&(X0=r.RGB5_A1)}return(X0===r.R16F||X0===r.R32F||X0===r.RG16F||X0===r.RG32F||X0===r.RGBA16F||X0===r.RGBA32F)&&e.get("EXT_color_buffer_float"),X0}function b(Ap,Io,p0){return R(Ap,p0)===!0||Ap.isFramebufferTexture&&Ap.minFilter!==xt&&Ap.minFilter!==St?Math.log2(Math.max(Io.width,Io.height))+1:Ap.mipmaps!==void 0&&Ap.mipmaps.length>0?Ap.mipmaps.length:Ap.isCompressedTexture&&Array.isArray(Ap.image)?Io.mipmaps.length:1}function k(Ap){return Ap===xt||Ap===As||Ap===ui?r.NEAREST:r.LINEAR}function B(Ap){const Io=Ap.target;Io.removeEventListener("dispose",B),X(Io),Io.isVideoTexture&&w.delete(Io)}function J(Ap){const Io=Ap.target;Io.removeEventListener("dispose",J),He(Io)}function X(Ap){const Io=a.get(Ap);if(Io.__webglInit===void 0)return;const p0=Ap.source,a0=D.get(p0);if(a0){const rm=a0[Io.__cacheKey];rm.usedTimes--,rm.usedTimes===0&&ae(Ap),Object.keys(a0).length===0&&D.delete(p0)}a.remove(Ap)}function ae(Ap){const Io=a.get(Ap);r.deleteTexture(Io.__webglTexture);const p0=Ap.source,a0=D.get(p0);delete a0[Io.__cacheKey],f.memory.textures--}function He(Ap){const Io=a.get(Ap);if(Ap.depthTexture&&Ap.depthTexture.dispose(),Ap.isWebGLCubeRenderTarget)for(let a0=0;a0<6;a0++){if(Array.isArray(Io.__webglFramebuffer[a0]))for(let rm=0;rm<Io.__webglFramebuffer[a0].length;rm++)r.deleteFramebuffer(Io.__webglFramebuffer[a0][rm]);else r.deleteFramebuffer(Io.__webglFramebuffer[a0]);Io.__webglDepthbuffer&&r.deleteRenderbuffer(Io.__webglDepthbuffer[a0])}else{if(Array.isArray(Io.__webglFramebuffer))for(let a0=0;a0<Io.__webglFramebuffer.length;a0++)r.deleteFramebuffer(Io.__webglFramebuffer[a0]);else r.deleteFramebuffer(Io.__webglFramebuffer);if(Io.__webglDepthbuffer&&r.deleteRenderbuffer(Io.__webglDepthbuffer),Io.__webglMultisampledFramebuffer&&r.deleteFramebuffer(Io.__webglMultisampledFramebuffer),Io.__webglColorRenderbuffer)for(let a0=0;a0<Io.__webglColorRenderbuffer.length;a0++)Io.__webglColorRenderbuffer[a0]&&r.deleteRenderbuffer(Io.__webglColorRenderbuffer[a0]);Io.__webglDepthRenderbuffer&&r.deleteRenderbuffer(Io.__webglDepthRenderbuffer)}const p0=Ap.textures;for(let a0=0,rm=p0.length;a0<rm;a0++){const X0=a.get(p0[a0]);X0.__webglTexture&&(r.deleteTexture(X0.__webglTexture),f.memory.textures--),a.remove(p0[a0])}a.remove(Ap)}let Pe=0;function ue(){Pe=0}function Oe(){const Ap=Pe;return Ap>=s.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+Ap+" texture units while this GPU supports only "+s.maxTextures),Pe+=1,Ap}function we(Ap){const Io=[];return Io.push(Ap.wrapS),Io.push(Ap.wrapT),Io.push(Ap.wrapR||0),Io.push(Ap.magFilter),Io.push(Ap.minFilter),Io.push(Ap.anisotropy),Io.push(Ap.internalFormat),Io.push(Ap.format),Io.push(Ap.type),Io.push(Ap.generateMipmaps),Io.push(Ap.premultiplyAlpha),Io.push(Ap.flipY),Io.push(Ap.unpackAlignment),Io.push(Ap.colorSpace),Io.join()}function Ze(Ap,Io){const p0=a.get(Ap);if(Ap.isVideoTexture&&F0(Ap),Ap.isRenderTargetTexture===!1&&Ap.version>0&&p0.__version!==Ap.version){const a0=Ap.image;if(a0===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(a0.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Wl(p0,Ap,Io);return}}t.bindTexture(r.TEXTURE_2D,p0.__webglTexture,r.TEXTURE0+Io)}function it(Ap,Io){const p0=a.get(Ap);if(Ap.version>0&&p0.__version!==Ap.version){Wl(p0,Ap,Io);return}t.bindTexture(r.TEXTURE_2D_ARRAY,p0.__webglTexture,r.TEXTURE0+Io)}function lt(Ap,Io){const p0=a.get(Ap);if(Ap.version>0&&p0.__version!==Ap.version){Wl(p0,Ap,Io);return}t.bindTexture(r.TEXTURE_3D,p0.__webglTexture,r.TEXTURE0+Io)}function Vt(Ap,Io){const p0=a.get(Ap);if(Ap.version>0&&p0.__version!==Ap.version){Ep(p0,Ap,Io);return}t.bindTexture(r.TEXTURE_CUBE_MAP,p0.__webglTexture,r.TEXTURE0+Io)}const _e={[ns]:r.REPEAT,[Nt]:r.CLAMP_TO_EDGE,[is]:r.MIRRORED_REPEAT},pr={[xt]:r.NEAREST,[As]:r.NEAREST_MIPMAP_NEAREST,[ui]:r.NEAREST_MIPMAP_LINEAR,[St]:r.LINEAR,[gr]:r.LINEAR_MIPMAP_NEAREST,[An]:r.LINEAR_MIPMAP_LINEAR},_s={[Rl]:r.NEVER,[Il]:r.ALWAYS,[Cl]:r.LESS,[co]:r.LEQUAL,[Pl]:r.EQUAL,[Ul]:r.GEQUAL,[Ll]:r.GREATER,[Dl]:r.NOTEQUAL};function Ei(Ap,Io,p0){if(Io.type===Kt&&e.has("OES_texture_float_linear")===!1&&(Io.magFilter===St||Io.magFilter===gr||Io.magFilter===ui||Io.magFilter===An||Io.minFilter===St||Io.minFilter===gr||Io.minFilter===ui||Io.minFilter===An)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),p0?(r.texParameteri(Ap,r.TEXTURE_WRAP_S,_e[Io.wrapS]),r.texParameteri(Ap,r.TEXTURE_WRAP_T,_e[Io.wrapT]),(Ap===r.TEXTURE_3D||Ap===r.TEXTURE_2D_ARRAY)&&r.texParameteri(Ap,r.TEXTURE_WRAP_R,_e[Io.wrapR]),r.texParameteri(Ap,r.TEXTURE_MAG_FILTER,pr[Io.magFilter]),r.texParameteri(Ap,r.TEXTURE_MIN_FILTER,pr[Io.minFilter])):(r.texParameteri(Ap,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(Ap,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),(Ap===r.TEXTURE_3D||Ap===r.TEXTURE_2D_ARRAY)&&r.texParameteri(Ap,r.TEXTURE_WRAP_R,r.CLAMP_TO_EDGE),(Io.wrapS!==Nt||Io.wrapT!==Nt)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),r.texParameteri(Ap,r.TEXTURE_MAG_FILTER,k(Io.magFilter)),r.texParameteri(Ap,r.TEXTURE_MIN_FILTER,k(Io.minFilter)),Io.minFilter!==xt&&Io.minFilter!==St&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),Io.compareFunction&&(r.texParameteri(Ap,r.TEXTURE_COMPARE_MODE,r.COMPARE_REF_TO_TEXTURE),r.texParameteri(Ap,r.TEXTURE_COMPARE_FUNC,_s[Io.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(Io.magFilter===xt||Io.minFilter!==ui&&Io.minFilter!==An||Io.type===Kt&&e.has("OES_texture_float_linear")===!1||u===!1&&Io.type===_i&&e.has("OES_texture_half_float_linear")===!1)return;if(Io.anisotropy>1||a.get(Io).__currentAnisotropy){const a0=e.get("EXT_texture_filter_anisotropic");r.texParameterf(Ap,a0.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Io.anisotropy,s.getMaxAnisotropy())),a.get(Io).__currentAnisotropy=Io.anisotropy}}}function Bl(Ap,Io){let p0=!1;Ap.__webglInit===void 0&&(Ap.__webglInit=!0,Io.addEventListener("dispose",B));const a0=Io.source;let rm=D.get(a0);rm===void 0&&(rm={},D.set(a0,rm));const X0=we(Io);if(X0!==Ap.__cacheKey){rm[X0]===void 0&&(rm[X0]={texture:r.createTexture(),usedTimes:0},f.memory.textures++,p0=!0),rm[X0].usedTimes++;const Nl=rm[Ap.__cacheKey];Nl!==void 0&&(rm[Ap.__cacheKey].usedTimes--,Nl.usedTimes===0&&ae(Io)),Ap.__cacheKey=X0,Ap.__webglTexture=rm[X0].texture}return p0}function Wl(Ap,Io,p0){let a0=r.TEXTURE_2D;(Io.isDataArrayTexture||Io.isCompressedArrayTexture)&&(a0=r.TEXTURE_2D_ARRAY),Io.isData3DTexture&&(a0=r.TEXTURE_3D);const rm=Bl(Ap,Io),X0=Io.source;t.bindTexture(a0,Ap.__webglTexture,r.TEXTURE0+p0);const Nl=a.get(X0);if(X0.version!==Nl.__version||rm===!0){t.activeTexture(r.TEXTURE0+p0);const Gl=je.getPrimaries(je.workingColorSpace),Mp=Io.colorSpace===an?null:je.getPrimaries(Io.colorSpace),_0=Io.colorSpace===an||Gl===Mp?r.NONE:r.BROWSER_DEFAULT_WEBGL;r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,Io.flipY),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Io.premultiplyAlpha),r.pixelStorei(r.UNPACK_ALIGNMENT,Io.unpackAlignment),r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,_0);const v0=L(Io)&&c(Io.image)===!1;let z0=l(Io.image,v0,!1,s.maxTextureSize);z0=fm(Io,z0);const sm=c(z0)||u,Uo=o.convert(Io.format,Io.colorSpace);let u0=o.convert(Io.type),x0=$(Io.internalFormat,Uo,u0,Io.colorSpace,Io.isVideoTexture);Ei(a0,Io,sm);let Xl;const Bp=Io.mipmaps,L0=u&&Io.isVideoTexture!==!0&&x0!==lo,kl=Nl.__version===void 0||rm===!0,Np=X0.dataReady,V0=b(Io,z0,sm);if(Io.isDepthTexture)x0=r.DEPTH_COMPONENT,u?Io.type===Kt?x0=r.DEPTH_COMPONENT32F:Io.type===on?x0=r.DEPTH_COMPONENT24:Io.type===wn?x0=r.DEPTH24_STENCIL8:x0=r.DEPTH_COMPONENT16:Io.type===Kt&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),Io.format===Rn&&x0===r.DEPTH_COMPONENT&&Io.type!==ls&&Io.type!==on&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),Io.type=on,u0=o.convert(Io.type)),Io.format===si&&x0===r.DEPTH_COMPONENT&&(x0=r.DEPTH_STENCIL,Io.type!==wn&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),Io.type=wn,u0=o.convert(Io.type))),kl&&(L0?t.texStorage2D(r.TEXTURE_2D,1,x0,z0.width,z0.height):t.texImage2D(r.TEXTURE_2D,0,x0,z0.width,z0.height,0,Uo,u0,null));else if(Io.isDataTexture)if(Bp.length>0&&sm){L0&&kl&&t.texStorage2D(r.TEXTURE_2D,V0,x0,Bp[0].width,Bp[0].height);for(let Ke=0,g0=Bp.length;Ke<g0;Ke++)Xl=Bp[Ke],L0?Np&&t.texSubImage2D(r.TEXTURE_2D,Ke,0,0,Xl.width,Xl.height,Uo,u0,Xl.data):t.texImage2D(r.TEXTURE_2D,Ke,x0,Xl.width,Xl.height,0,Uo,u0,Xl.data);Io.generateMipmaps=!1}else L0?(kl&&t.texStorage2D(r.TEXTURE_2D,V0,x0,z0.width,z0.height),Np&&t.texSubImage2D(r.TEXTURE_2D,0,0,0,z0.width,z0.height,Uo,u0,z0.data)):t.texImage2D(r.TEXTURE_2D,0,x0,z0.width,z0.height,0,Uo,u0,z0.data);else if(Io.isCompressedTexture)if(Io.isCompressedArrayTexture){L0&&kl&&t.texStorage3D(r.TEXTURE_2D_ARRAY,V0,x0,Bp[0].width,Bp[0].height,z0.depth);for(let Ke=0,g0=Bp.length;Ke<g0;Ke++)Xl=Bp[Ke],Io.format!==Ft?Uo!==null?L0?Np&&t.compressedTexSubImage3D(r.TEXTURE_2D_ARRAY,Ke,0,0,0,Xl.width,Xl.height,z0.depth,Uo,Xl.data,0,0):t.compressedTexImage3D(r.TEXTURE_2D_ARRAY,Ke,x0,Xl.width,Xl.height,z0.depth,0,Xl.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):L0?Np&&t.texSubImage3D(r.TEXTURE_2D_ARRAY,Ke,0,0,0,Xl.width,Xl.height,z0.depth,Uo,u0,Xl.data):t.texImage3D(r.TEXTURE_2D_ARRAY,Ke,x0,Xl.width,Xl.height,z0.depth,0,Uo,u0,Xl.data)}else{L0&&kl&&t.texStorage2D(r.TEXTURE_2D,V0,x0,Bp[0].width,Bp[0].height);for(let Ke=0,g0=Bp.length;Ke<g0;Ke++)Xl=Bp[Ke],Io.format!==Ft?Uo!==null?L0?Np&&t.compressedTexSubImage2D(r.TEXTURE_2D,Ke,0,0,Xl.width,Xl.height,Uo,Xl.data):t.compressedTexImage2D(r.TEXTURE_2D,Ke,x0,Xl.width,Xl.height,0,Xl.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):L0?Np&&t.texSubImage2D(r.TEXTURE_2D,Ke,0,0,Xl.width,Xl.height,Uo,u0,Xl.data):t.texImage2D(r.TEXTURE_2D,Ke,x0,Xl.width,Xl.height,0,Uo,u0,Xl.data)}else if(Io.isDataArrayTexture)L0?(kl&&t.texStorage3D(r.TEXTURE_2D_ARRAY,V0,x0,z0.width,z0.height,z0.depth),Np&&t.texSubImage3D(r.TEXTURE_2D_ARRAY,0,0,0,0,z0.width,z0.height,z0.depth,Uo,u0,z0.data)):t.texImage3D(r.TEXTURE_2D_ARRAY,0,x0,z0.width,z0.height,z0.depth,0,Uo,u0,z0.data);else if(Io.isData3DTexture)L0?(kl&&t.texStorage3D(r.TEXTURE_3D,V0,x0,z0.width,z0.height,z0.depth),Np&&t.texSubImage3D(r.TEXTURE_3D,0,0,0,0,z0.width,z0.height,z0.depth,Uo,u0,z0.data)):t.texImage3D(r.TEXTURE_3D,0,x0,z0.width,z0.height,z0.depth,0,Uo,u0,z0.data);else if(Io.isFramebufferTexture){if(kl)if(L0)t.texStorage2D(r.TEXTURE_2D,V0,x0,z0.width,z0.height);else{let Ke=z0.width,g0=z0.height;for(let d0=0;d0<V0;d0++)t.texImage2D(r.TEXTURE_2D,d0,x0,Ke,g0,0,Uo,u0,null),Ke>>=1,g0>>=1}}else if(Bp.length>0&&sm){if(L0&&kl){const Ke=cm(Bp[0]);t.texStorage2D(r.TEXTURE_2D,V0,x0,Ke.width,Ke.height)}for(let Ke=0,g0=Bp.length;Ke<g0;Ke++)Xl=Bp[Ke],L0?Np&&t.texSubImage2D(r.TEXTURE_2D,Ke,0,0,Uo,u0,Xl):t.texImage2D(r.TEXTURE_2D,Ke,x0,Uo,u0,Xl);Io.generateMipmaps=!1}else if(L0){if(kl){const Ke=cm(z0);t.texStorage2D(r.TEXTURE_2D,V0,x0,Ke.width,Ke.height)}Np&&t.texSubImage2D(r.TEXTURE_2D,0,0,0,Uo,u0,z0)}else t.texImage2D(r.TEXTURE_2D,0,x0,Uo,u0,z0);R(Io,sm)&&F(a0),Nl.__version=X0.version,Io.onUpdate&&Io.onUpdate(Io)}Ap.__version=Io.version}function Ep(Ap,Io,p0){if(Io.image.length!==6)return;const a0=Bl(Ap,Io),rm=Io.source;t.bindTexture(r.TEXTURE_CUBE_MAP,Ap.__webglTexture,r.TEXTURE0+p0);const X0=a.get(rm);if(rm.version!==X0.__version||a0===!0){t.activeTexture(r.TEXTURE0+p0);const Nl=je.getPrimaries(je.workingColorSpace),Gl=Io.colorSpace===an?null:je.getPrimaries(Io.colorSpace),Mp=Io.colorSpace===an||Nl===Gl?r.NONE:r.BROWSER_DEFAULT_WEBGL;r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,Io.flipY),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Io.premultiplyAlpha),r.pixelStorei(r.UNPACK_ALIGNMENT,Io.unpackAlignment),r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,Mp);const _0=Io.isCompressedTexture||Io.image[0].isCompressedTexture,v0=Io.image[0]&&Io.image[0].isDataTexture,z0=[];for(let Ke=0;Ke<6;Ke++)!_0&&!v0?z0[Ke]=l(Io.image[Ke],!1,!0,s.maxCubemapSize):z0[Ke]=v0?Io.image[Ke].image:Io.image[Ke],z0[Ke]=fm(Io,z0[Ke]);const sm=z0[0],Uo=c(sm)||u,u0=o.convert(Io.format,Io.colorSpace),x0=o.convert(Io.type),Xl=$(Io.internalFormat,u0,x0,Io.colorSpace),Bp=u&&Io.isVideoTexture!==!0,L0=X0.__version===void 0||a0===!0,kl=rm.dataReady;let Np=b(Io,sm,Uo);Ei(r.TEXTURE_CUBE_MAP,Io,Uo);let V0;if(_0){Bp&&L0&&t.texStorage2D(r.TEXTURE_CUBE_MAP,Np,Xl,sm.width,sm.height);for(let Ke=0;Ke<6;Ke++){V0=z0[Ke].mipmaps;for(let g0=0;g0<V0.length;g0++){const d0=V0[g0];Io.format!==Ft?u0!==null?Bp?kl&&t.compressedTexSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ke,g0,0,0,d0.width,d0.height,u0,d0.data):t.compressedTexImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ke,g0,Xl,d0.width,d0.height,0,d0.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Bp?kl&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ke,g0,0,0,d0.width,d0.height,u0,x0,d0.data):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ke,g0,Xl,d0.width,d0.height,0,u0,x0,d0.data)}}}else{if(V0=Io.mipmaps,Bp&&L0){V0.length>0&&Np++;const Ke=cm(z0[0]);t.texStorage2D(r.TEXTURE_CUBE_MAP,Np,Xl,Ke.width,Ke.height)}for(let Ke=0;Ke<6;Ke++)if(v0){Bp?kl&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ke,0,0,0,z0[Ke].width,z0[Ke].height,u0,x0,z0[Ke].data):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ke,0,Xl,z0[Ke].width,z0[Ke].height,0,u0,x0,z0[Ke].data);for(let g0=0;g0<V0.length;g0++){const d0=V0[g0].image[Ke].image;Bp?kl&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ke,g0+1,0,0,d0.width,d0.height,u0,x0,d0.data):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ke,g0+1,Xl,d0.width,d0.height,0,u0,x0,d0.data)}}else{Bp?kl&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ke,0,0,0,u0,x0,z0[Ke]):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ke,0,Xl,u0,x0,z0[Ke]);for(let g0=0;g0<V0.length;g0++){const d0=V0[g0];Bp?kl&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ke,g0+1,0,0,u0,x0,d0.image[Ke]):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ke,g0+1,Xl,u0,x0,d0.image[Ke])}}}R(Io,Uo)&&F(r.TEXTURE_CUBE_MAP),X0.__version=rm.version,Io.onUpdate&&Io.onUpdate(Io)}Ap.__version=Io.version}function Lp(Ap,Io,p0,a0,rm,X0){const Nl=o.convert(p0.format,p0.colorSpace),Gl=o.convert(p0.type),Mp=$(p0.internalFormat,Nl,Gl,p0.colorSpace);if(!a.get(Io).__hasExternalTextures){const _0=Math.max(1,Io.width>>X0),v0=Math.max(1,Io.height>>X0);rm===r.TEXTURE_3D||rm===r.TEXTURE_2D_ARRAY?t.texImage3D(rm,X0,Mp,_0,v0,Io.depth,0,Nl,Gl,null):t.texImage2D(rm,X0,Mp,_0,v0,0,Nl,Gl,null)}t.bindFramebuffer(r.FRAMEBUFFER,Ap),im(Io)?h.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,a0,rm,a.get(p0).__webglTexture,0,W0(Io)):(rm===r.TEXTURE_2D||rm>=r.TEXTURE_CUBE_MAP_POSITIVE_X&&rm<=r.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&r.framebufferTexture2D(r.FRAMEBUFFER,a0,rm,a.get(p0).__webglTexture,X0),t.bindFramebuffer(r.FRAMEBUFFER,null)}function Op(Ap,Io,p0){if(r.bindRenderbuffer(r.RENDERBUFFER,Ap),Io.depthBuffer&&!Io.stencilBuffer){let a0=u===!0?r.DEPTH_COMPONENT24:r.DEPTH_COMPONENT16;if(p0||im(Io)){const rm=Io.depthTexture;rm&&rm.isDepthTexture&&(rm.type===Kt?a0=r.DEPTH_COMPONENT32F:rm.type===on&&(a0=r.DEPTH_COMPONENT24));const X0=W0(Io);im(Io)?h.renderbufferStorageMultisampleEXT(r.RENDERBUFFER,X0,a0,Io.width,Io.height):r.renderbufferStorageMultisample(r.RENDERBUFFER,X0,a0,Io.width,Io.height)}else r.renderbufferStorage(r.RENDERBUFFER,a0,Io.width,Io.height);r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.RENDERBUFFER,Ap)}else if(Io.depthBuffer&&Io.stencilBuffer){const a0=W0(Io);p0&&im(Io)===!1?r.renderbufferStorageMultisample(r.RENDERBUFFER,a0,r.DEPTH24_STENCIL8,Io.width,Io.height):im(Io)?h.renderbufferStorageMultisampleEXT(r.RENDERBUFFER,a0,r.DEPTH24_STENCIL8,Io.width,Io.height):r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,Io.width,Io.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.RENDERBUFFER,Ap)}else{const a0=Io.textures;for(let rm=0;rm<a0.length;rm++){const X0=a0[rm],Nl=o.convert(X0.format,X0.colorSpace),Gl=o.convert(X0.type),Mp=$(X0.internalFormat,Nl,Gl,X0.colorSpace),_0=W0(Io);p0&&im(Io)===!1?r.renderbufferStorageMultisample(r.RENDERBUFFER,_0,Mp,Io.width,Io.height):im(Io)?h.renderbufferStorageMultisampleEXT(r.RENDERBUFFER,_0,Mp,Io.width,Io.height):r.renderbufferStorage(r.RENDERBUFFER,Mp,Io.width,Io.height)}}r.bindRenderbuffer(r.RENDERBUFFER,null)}function R0(Ap,Io){if(Io&&Io.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(r.FRAMEBUFFER,Ap),!(Io.depthTexture&&Io.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!a.get(Io.depthTexture).__webglTexture||Io.depthTexture.image.width!==Io.width||Io.depthTexture.image.height!==Io.height)&&(Io.depthTexture.image.width=Io.width,Io.depthTexture.image.height=Io.height,Io.depthTexture.needsUpdate=!0),Ze(Io.depthTexture,0);const p0=a.get(Io.depthTexture).__webglTexture,a0=W0(Io);if(Io.depthTexture.format===Rn)im(Io)?h.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,p0,0,a0):r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,p0,0);else if(Io.depthTexture.format===si)im(Io)?h.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.TEXTURE_2D,p0,0,a0):r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.TEXTURE_2D,p0,0);else throw new Error("Unknown depthTexture format")}function N0(Ap){const Io=a.get(Ap),p0=Ap.isWebGLCubeRenderTarget===!0;if(Ap.depthTexture&&!Io.__autoAllocateDepthBuffer){if(p0)throw new Error("target.depthTexture not supported in Cube render targets");R0(Io.__webglFramebuffer,Ap)}else if(p0){Io.__webglDepthbuffer=[];for(let a0=0;a0<6;a0++)t.bindFramebuffer(r.FRAMEBUFFER,Io.__webglFramebuffer[a0]),Io.__webglDepthbuffer[a0]=r.createRenderbuffer(),Op(Io.__webglDepthbuffer[a0],Ap,!1)}else t.bindFramebuffer(r.FRAMEBUFFER,Io.__webglFramebuffer),Io.__webglDepthbuffer=r.createRenderbuffer(),Op(Io.__webglDepthbuffer,Ap,!1);t.bindFramebuffer(r.FRAMEBUFFER,null)}function Qp(Ap,Io,p0){const a0=a.get(Ap);Io!==void 0&&Lp(a0.__webglFramebuffer,Ap,Ap.texture,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,0),p0!==void 0&&N0(Ap)}function O0(Ap){const Io=Ap.texture,p0=a.get(Ap),a0=a.get(Io);Ap.addEventListener("dispose",J);const rm=Ap.textures,X0=Ap.isWebGLCubeRenderTarget===!0,Nl=rm.length>1,Gl=c(Ap)||u;if(Nl||(a0.__webglTexture===void 0&&(a0.__webglTexture=r.createTexture()),a0.__version=Io.version,f.memory.textures++),X0){p0.__webglFramebuffer=[];for(let Mp=0;Mp<6;Mp++)if(u&&Io.mipmaps&&Io.mipmaps.length>0){p0.__webglFramebuffer[Mp]=[];for(let _0=0;_0<Io.mipmaps.length;_0++)p0.__webglFramebuffer[Mp][_0]=r.createFramebuffer()}else p0.__webglFramebuffer[Mp]=r.createFramebuffer()}else{if(u&&Io.mipmaps&&Io.mipmaps.length>0){p0.__webglFramebuffer=[];for(let Mp=0;Mp<Io.mipmaps.length;Mp++)p0.__webglFramebuffer[Mp]=r.createFramebuffer()}else p0.__webglFramebuffer=r.createFramebuffer();if(Nl)if(s.drawBuffers)for(let Mp=0,_0=rm.length;Mp<_0;Mp++){const v0=a.get(rm[Mp]);v0.__webglTexture===void 0&&(v0.__webglTexture=r.createTexture(),f.memory.textures++)}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(u&&Ap.samples>0&&im(Ap)===!1){p0.__webglMultisampledFramebuffer=r.createFramebuffer(),p0.__webglColorRenderbuffer=[],t.bindFramebuffer(r.FRAMEBUFFER,p0.__webglMultisampledFramebuffer);for(let Mp=0;Mp<rm.length;Mp++){const _0=rm[Mp];p0.__webglColorRenderbuffer[Mp]=r.createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,p0.__webglColorRenderbuffer[Mp]);const v0=o.convert(_0.format,_0.colorSpace),z0=o.convert(_0.type),sm=$(_0.internalFormat,v0,z0,_0.colorSpace,Ap.isXRRenderTarget===!0),Uo=W0(Ap);r.renderbufferStorageMultisample(r.RENDERBUFFER,Uo,sm,Ap.width,Ap.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+Mp,r.RENDERBUFFER,p0.__webglColorRenderbuffer[Mp])}r.bindRenderbuffer(r.RENDERBUFFER,null),Ap.depthBuffer&&(p0.__webglDepthRenderbuffer=r.createRenderbuffer(),Op(p0.__webglDepthRenderbuffer,Ap,!0)),t.bindFramebuffer(r.FRAMEBUFFER,null)}}if(X0){t.bindTexture(r.TEXTURE_CUBE_MAP,a0.__webglTexture),Ei(r.TEXTURE_CUBE_MAP,Io,Gl);for(let Mp=0;Mp<6;Mp++)if(u&&Io.mipmaps&&Io.mipmaps.length>0)for(let _0=0;_0<Io.mipmaps.length;_0++)Lp(p0.__webglFramebuffer[Mp][_0],Ap,Io,r.COLOR_ATTACHMENT0,r.TEXTURE_CUBE_MAP_POSITIVE_X+Mp,_0);else Lp(p0.__webglFramebuffer[Mp],Ap,Io,r.COLOR_ATTACHMENT0,r.TEXTURE_CUBE_MAP_POSITIVE_X+Mp,0);R(Io,Gl)&&F(r.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Nl){for(let Mp=0,_0=rm.length;Mp<_0;Mp++){const v0=rm[Mp],z0=a.get(v0);t.bindTexture(r.TEXTURE_2D,z0.__webglTexture),Ei(r.TEXTURE_2D,v0,Gl),Lp(p0.__webglFramebuffer,Ap,v0,r.COLOR_ATTACHMENT0+Mp,r.TEXTURE_2D,0),R(v0,Gl)&&F(r.TEXTURE_2D)}t.unbindTexture()}else{let Mp=r.TEXTURE_2D;if((Ap.isWebGL3DRenderTarget||Ap.isWebGLArrayRenderTarget)&&(u?Mp=Ap.isWebGL3DRenderTarget?r.TEXTURE_3D:r.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(Mp,a0.__webglTexture),Ei(Mp,Io,Gl),u&&Io.mipmaps&&Io.mipmaps.length>0)for(let _0=0;_0<Io.mipmaps.length;_0++)Lp(p0.__webglFramebuffer[_0],Ap,Io,r.COLOR_ATTACHMENT0,Mp,_0);else Lp(p0.__webglFramebuffer,Ap,Io,r.COLOR_ATTACHMENT0,Mp,0);R(Io,Gl)&&F(Mp),t.unbindTexture()}Ap.depthBuffer&&N0(Ap)}function zp(Ap){const Io=c(Ap)||u,p0=Ap.textures;for(let a0=0,rm=p0.length;a0<rm;a0++){const X0=p0[a0];if(R(X0,Io)){const Nl=Ap.isWebGLCubeRenderTarget?r.TEXTURE_CUBE_MAP:r.TEXTURE_2D,Gl=a.get(X0).__webglTexture;t.bindTexture(Nl,Gl),F(Nl),t.unbindTexture()}}}function M0(Ap){if(u&&Ap.samples>0&&im(Ap)===!1){const Io=Ap.textures,p0=Ap.width,a0=Ap.height;let rm=r.COLOR_BUFFER_BIT;const X0=[],Nl=Ap.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT,Gl=a.get(Ap),Mp=Io.length>1;if(Mp)for(let _0=0;_0<Io.length;_0++)t.bindFramebuffer(r.FRAMEBUFFER,Gl.__webglMultisampledFramebuffer),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+_0,r.RENDERBUFFER,null),t.bindFramebuffer(r.FRAMEBUFFER,Gl.__webglFramebuffer),r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0+_0,r.TEXTURE_2D,null,0);t.bindFramebuffer(r.READ_FRAMEBUFFER,Gl.__webglMultisampledFramebuffer),t.bindFramebuffer(r.DRAW_FRAMEBUFFER,Gl.__webglFramebuffer);for(let _0=0;_0<Io.length;_0++){X0.push(r.COLOR_ATTACHMENT0+_0),Ap.depthBuffer&&X0.push(Nl);const v0=Gl.__ignoreDepthValues!==void 0?Gl.__ignoreDepthValues:!1;if(v0===!1&&(Ap.depthBuffer&&(rm|=r.DEPTH_BUFFER_BIT),Ap.stencilBuffer&&(rm|=r.STENCIL_BUFFER_BIT)),Mp&&r.framebufferRenderbuffer(r.READ_FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.RENDERBUFFER,Gl.__webglColorRenderbuffer[_0]),v0===!0&&(r.invalidateFramebuffer(r.READ_FRAMEBUFFER,[Nl]),r.invalidateFramebuffer(r.DRAW_FRAMEBUFFER,[Nl])),Mp){const z0=a.get(Io[_0]).__webglTexture;r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,z0,0)}r.blitFramebuffer(0,0,p0,a0,0,0,p0,a0,rm,r.NEAREST),x&&r.invalidateFramebuffer(r.READ_FRAMEBUFFER,X0)}if(t.bindFramebuffer(r.READ_FRAMEBUFFER,null),t.bindFramebuffer(r.DRAW_FRAMEBUFFER,null),Mp)for(let _0=0;_0<Io.length;_0++){t.bindFramebuffer(r.FRAMEBUFFER,Gl.__webglMultisampledFramebuffer),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+_0,r.RENDERBUFFER,Gl.__webglColorRenderbuffer[_0]);const v0=a.get(Io[_0]).__webglTexture;t.bindFramebuffer(r.FRAMEBUFFER,Gl.__webglFramebuffer),r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0+_0,r.TEXTURE_2D,v0,0)}t.bindFramebuffer(r.DRAW_FRAMEBUFFER,Gl.__webglMultisampledFramebuffer)}}function W0(Ap){return Math.min(s.maxSamples,Ap.samples)}function im(Ap){const Io=a.get(Ap);return u&&Ap.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&Io.__useRenderToTexture!==!1}function F0(Ap){const Io=f.render.frame;w.get(Ap)!==Io&&(w.set(Ap,Io),Ap.update())}function fm(Ap,Io){const p0=Ap.colorSpace,a0=Ap.format,rm=Ap.type;return Ap.isCompressedTexture===!0||Ap.isVideoTexture===!0||Ap.format===rs||p0!==dn&&p0!==an&&(je.getTransfer(p0)===$e?u===!1?e.has("EXT_sRGB")===!0&&a0===Ft?(Ap.format=rs,Ap.minFilter=St,Ap.generateMipmaps=!1):Io=ho.sRGBToLinear(Io):(a0!==Ft||rm!==un)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",p0)),Io}function cm(Ap){return typeof HTMLImageElement<"u"&&Ap instanceof HTMLImageElement?(m.width=Ap.naturalWidth||Ap.width,m.height=Ap.naturalHeight||Ap.height):typeof VideoFrame<"u"&&Ap instanceof VideoFrame?(m.width=Ap.displayWidth,m.height=Ap.displayHeight):(m.width=Ap.width,m.height=Ap.height),m}this.allocateTextureUnit=Oe,this.resetTextureUnits=ue,this.setTexture2D=Ze,this.setTexture2DArray=it,this.setTexture3D=lt,this.setTextureCube=Vt,this.rebindTextures=Qp,this.setupRenderTarget=O0,this.updateRenderTargetMipmap=zp,this.updateMultisampleRenderTarget=M0,this.setupDepthRenderbuffer=N0,this.setupFrameBufferTexture=Lp,this.useMultisampledRTT=im}function ep(r,e,t){const a=t.isWebGL2;function s(o,f=an){let u;const h=je.getTransfer(f);if(o===un)return r.UNSIGNED_BYTE;if(o===io)return r.UNSIGNED_SHORT_4_4_4_4;if(o===ro)return r.UNSIGNED_SHORT_5_5_5_1;if(o===_l)return r.BYTE;if(o===gl)return r.SHORT;if(o===ls)return r.UNSIGNED_SHORT;if(o===no)return r.INT;if(o===on)return r.UNSIGNED_INT;if(o===Kt)return r.FLOAT;if(o===_i)return a?r.HALF_FLOAT:(u=e.get("OES_texture_half_float"),u!==null?u.HALF_FLOAT_OES:null);if(o===vl)return r.ALPHA;if(o===Ft)return r.RGBA;if(o===xl)return r.LUMINANCE;if(o===Ml)return r.LUMINANCE_ALPHA;if(o===Rn)return r.DEPTH_COMPONENT;if(o===si)return r.DEPTH_STENCIL;if(o===rs)return u=e.get("EXT_sRGB"),u!==null?u.SRGB_ALPHA_EXT:null;if(o===Sl)return r.RED;if(o===so)return r.RED_INTEGER;if(o===El)return r.RG;if(o===ao)return r.RG_INTEGER;if(o===oo)return r.RGBA_INTEGER;if(o===vr||o===xr||o===Mr||o===Sr)if(h===$e)if(u=e.get("WEBGL_compressed_texture_s3tc_srgb"),u!==null){if(o===vr)return u.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(o===xr)return u.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(o===Mr)return u.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(o===Sr)return u.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(u=e.get("WEBGL_compressed_texture_s3tc"),u!==null){if(o===vr)return u.COMPRESSED_RGB_S3TC_DXT1_EXT;if(o===xr)return u.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(o===Mr)return u.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(o===Sr)return u.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(o===ws||o===Rs||o===Cs||o===Ps)if(u=e.get("WEBGL_compressed_texture_pvrtc"),u!==null){if(o===ws)return u.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(o===Rs)return u.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(o===Cs)return u.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(o===Ps)return u.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(o===lo)return u=e.get("WEBGL_compressed_texture_etc1"),u!==null?u.COMPRESSED_RGB_ETC1_WEBGL:null;if(o===Ls||o===Ds)if(u=e.get("WEBGL_compressed_texture_etc"),u!==null){if(o===Ls)return h===$e?u.COMPRESSED_SRGB8_ETC2:u.COMPRESSED_RGB8_ETC2;if(o===Ds)return h===$e?u.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:u.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(o===Us||o===Is||o===Ns||o===Fs||o===Os||o===Bs||o===zs||o===Gs||o===Hs||o===Vs||o===ks||o===Ws||o===Xs||o===Ys)if(u=e.get("WEBGL_compressed_texture_astc"),u!==null){if(o===Us)return h===$e?u.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:u.COMPRESSED_RGBA_ASTC_4x4_KHR;if(o===Is)return h===$e?u.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:u.COMPRESSED_RGBA_ASTC_5x4_KHR;if(o===Ns)return h===$e?u.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:u.COMPRESSED_RGBA_ASTC_5x5_KHR;if(o===Fs)return h===$e?u.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:u.COMPRESSED_RGBA_ASTC_6x5_KHR;if(o===Os)return h===$e?u.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:u.COMPRESSED_RGBA_ASTC_6x6_KHR;if(o===Bs)return h===$e?u.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:u.COMPRESSED_RGBA_ASTC_8x5_KHR;if(o===zs)return h===$e?u.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:u.COMPRESSED_RGBA_ASTC_8x6_KHR;if(o===Gs)return h===$e?u.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:u.COMPRESSED_RGBA_ASTC_8x8_KHR;if(o===Hs)return h===$e?u.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:u.COMPRESSED_RGBA_ASTC_10x5_KHR;if(o===Vs)return h===$e?u.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:u.COMPRESSED_RGBA_ASTC_10x6_KHR;if(o===ks)return h===$e?u.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:u.COMPRESSED_RGBA_ASTC_10x8_KHR;if(o===Ws)return h===$e?u.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:u.COMPRESSED_RGBA_ASTC_10x10_KHR;if(o===Xs)return h===$e?u.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:u.COMPRESSED_RGBA_ASTC_12x10_KHR;if(o===Ys)return h===$e?u.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:u.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(o===Er||o===qs||o===js)if(u=e.get("EXT_texture_compression_bptc"),u!==null){if(o===Er)return h===$e?u.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:u.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(o===qs)return u.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(o===js)return u.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(o===yl||o===Ks||o===Zs||o===$s)if(u=e.get("EXT_texture_compression_rgtc"),u!==null){if(o===Er)return u.COMPRESSED_RED_RGTC1_EXT;if(o===Ks)return u.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(o===Zs)return u.COMPRESSED_RED_GREEN_RGTC2_EXT;if(o===$s)return u.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return o===wn?a?r.UNSIGNED_INT_24_8:(u=e.get("WEBGL_depth_texture"),u!==null?u.UNSIGNED_INT_24_8_WEBGL:null):r[o]!==void 0?r[o]:null}return{convert:s}}class tp extends Lt{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Xi extends Mt{constructor(){super(),this.isGroup=!0,this.type="Group"}}const np={type:"move"};class qr{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Xi,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Xi,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new U,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new U),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Xi,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new U,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new U),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const a of e.hand.values())this._getHandJoint(t,a)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,a){let s=null,o=null,f=null;const u=this._targetRay,h=this._grip,x=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(x&&e.hand){f=!0;for(const y of e.hand.values()){const l=t.getJointPose(y,a),c=this._getHandJoint(x,y);l!==null&&(c.matrix.fromArray(l.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,c.jointRadius=l.radius),c.visible=l!==null}const m=x.joints["index-finger-tip"],w=x.joints["thumb-tip"],A=m.position.distanceTo(w.position),D=.02,I=.005;x.inputState.pinching&&A>D+I?(x.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!x.inputState.pinching&&A<=D-I&&(x.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else h!==null&&e.gripSpace&&(o=t.getPose(e.gripSpace,a),o!==null&&(h.matrix.fromArray(o.transform.matrix),h.matrix.decompose(h.position,h.rotation,h.scale),h.matrixWorldNeedsUpdate=!0,o.linearVelocity?(h.hasLinearVelocity=!0,h.linearVelocity.copy(o.linearVelocity)):h.hasLinearVelocity=!1,o.angularVelocity?(h.hasAngularVelocity=!0,h.angularVelocity.copy(o.angularVelocity)):h.hasAngularVelocity=!1));u!==null&&(s=t.getPose(e.targetRaySpace,a),s===null&&o!==null&&(s=o),s!==null&&(u.matrix.fromArray(s.transform.matrix),u.matrix.decompose(u.position,u.rotation,u.scale),u.matrixWorldNeedsUpdate=!0,s.linearVelocity?(u.hasLinearVelocity=!0,u.linearVelocity.copy(s.linearVelocity)):u.hasLinearVelocity=!1,s.angularVelocity?(u.hasAngularVelocity=!0,u.angularVelocity.copy(s.angularVelocity)):u.hasAngularVelocity=!1,this.dispatchEvent(np)))}return u!==null&&(u.visible=s!==null),h!==null&&(h.visible=o!==null),x!==null&&(x.visible=f!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const a=new Xi;a.matrixAutoUpdate=!1,a.visible=!1,e.joints[t.jointName]=a,e.add(a)}return e.joints[t.jointName]}}const ip=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,rp=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepthEXT = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepthEXT = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class sp{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,a){if(this.texture===null){const s=new yt,o=e.properties.get(s);o.__webglTexture=t.texture,(t.depthNear!=a.depthNear||t.depthFar!=a.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=s}}render(e,t){if(this.texture!==null){if(this.mesh===null){const a=t.cameras[0].viewport,s=new fn({extensions:{fragDepth:!0},vertexShader:ip,fragmentShader:rp,uniforms:{depthColor:{value:this.texture},depthWidth:{value:a.z},depthHeight:{value:a.w}}});this.mesh=new Rt(new hr(20,20),s)}e.render(this.mesh,t)}}reset(){this.texture=null,this.mesh=null}}class ap extends Ln{constructor(e,t){super();const a=this;let s=null,o=1,f=null,u="local-floor",h=1,x=null,m=null,w=null,A=null,D=null,I=null;const y=new sp,l=t.getContextAttributes();let c=null,L=null;const R=[],F=[],$=new Ie;let b=null;const k=new Lt;k.layers.enable(1),k.viewport=new ht;const B=new Lt;B.layers.enable(2),B.viewport=new ht;const J=[k,B],X=new tp;X.layers.enable(1),X.layers.enable(2);let ae=null,He=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Ei){let Bl=R[Ei];return Bl===void 0&&(Bl=new qr,R[Ei]=Bl),Bl.getTargetRaySpace()},this.getControllerGrip=function(Ei){let Bl=R[Ei];return Bl===void 0&&(Bl=new qr,R[Ei]=Bl),Bl.getGripSpace()},this.getHand=function(Ei){let Bl=R[Ei];return Bl===void 0&&(Bl=new qr,R[Ei]=Bl),Bl.getHandSpace()};function Pe(Ei){const Bl=F.indexOf(Ei.inputSource);if(Bl===-1)return;const Wl=R[Bl];Wl!==void 0&&(Wl.update(Ei.inputSource,Ei.frame,x||f),Wl.dispatchEvent({type:Ei.type,data:Ei.inputSource}))}function ue(){s.removeEventListener("select",Pe),s.removeEventListener("selectstart",Pe),s.removeEventListener("selectend",Pe),s.removeEventListener("squeeze",Pe),s.removeEventListener("squeezestart",Pe),s.removeEventListener("squeezeend",Pe),s.removeEventListener("end",ue),s.removeEventListener("inputsourceschange",Oe);for(let Ei=0;Ei<R.length;Ei++){const Bl=F[Ei];Bl!==null&&(F[Ei]=null,R[Ei].disconnect(Bl))}ae=null,He=null,y.reset(),e.setRenderTarget(c),D=null,A=null,w=null,s=null,L=null,_s.stop(),a.isPresenting=!1,e.setPixelRatio(b),e.setSize($.width,$.height,!1),a.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Ei){o=Ei,a.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Ei){u=Ei,a.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return x||f},this.setReferenceSpace=function(Ei){x=Ei},this.getBaseLayer=function(){return A!==null?A:D},this.getBinding=function(){return w},this.getFrame=function(){return I},this.getSession=function(){return s},this.setSession=async function(Ei){if(s=Ei,s!==null){if(c=e.getRenderTarget(),s.addEventListener("select",Pe),s.addEventListener("selectstart",Pe),s.addEventListener("selectend",Pe),s.addEventListener("squeeze",Pe),s.addEventListener("squeezestart",Pe),s.addEventListener("squeezeend",Pe),s.addEventListener("end",ue),s.addEventListener("inputsourceschange",Oe),l.xrCompatible!==!0&&await t.makeXRCompatible(),b=e.getPixelRatio(),e.getSize($),s.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const Bl={antialias:s.renderState.layers===void 0?l.antialias:!0,alpha:!0,depth:l.depth,stencil:l.stencil,framebufferScaleFactor:o};D=new XRWebGLLayer(s,t,Bl),s.updateRenderState({baseLayer:D}),e.setPixelRatio(1),e.setSize(D.framebufferWidth,D.framebufferHeight,!1),L=new Cn(D.framebufferWidth,D.framebufferHeight,{format:Ft,type:un,colorSpace:e.outputColorSpace,stencilBuffer:l.stencil})}else{let Bl=null,Wl=null,Ep=null;l.depth&&(Ep=l.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,Bl=l.stencil?si:Rn,Wl=l.stencil?wn:on);const Lp={colorFormat:t.RGBA8,depthFormat:Ep,scaleFactor:o};w=new XRWebGLBinding(s,t),A=w.createProjectionLayer(Lp),s.updateRenderState({layers:[A]}),e.setPixelRatio(1),e.setSize(A.textureWidth,A.textureHeight,!1),L=new Cn(A.textureWidth,A.textureHeight,{format:Ft,type:un,depthTexture:new To(A.textureWidth,A.textureHeight,Wl,void 0,void 0,void 0,void 0,void 0,void 0,Bl),stencilBuffer:l.stencil,colorSpace:e.outputColorSpace,samples:l.antialias?4:0});const Op=e.properties.get(L);Op.__ignoreDepthValues=A.ignoreDepthValues}L.isXRRenderTarget=!0,this.setFoveation(h),x=null,f=await s.requestReferenceSpace(u),_s.setContext(s),_s.start(),a.isPresenting=!0,a.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(s!==null)return s.environmentBlendMode};function Oe(Ei){for(let Bl=0;Bl<Ei.removed.length;Bl++){const Wl=Ei.removed[Bl],Ep=F.indexOf(Wl);Ep>=0&&(F[Ep]=null,R[Ep].disconnect(Wl))}for(let Bl=0;Bl<Ei.added.length;Bl++){const Wl=Ei.added[Bl];let Ep=F.indexOf(Wl);if(Ep===-1){for(let Op=0;Op<R.length;Op++)if(Op>=F.length){F.push(Wl),Ep=Op;break}else if(F[Op]===null){F[Op]=Wl,Ep=Op;break}if(Ep===-1)break}const Lp=R[Ep];Lp&&Lp.connect(Wl)}}const we=new U,Ze=new U;function it(Ei,Bl,Wl){we.setFromMatrixPosition(Bl.matrixWorld),Ze.setFromMatrixPosition(Wl.matrixWorld);const Ep=we.distanceTo(Ze),Lp=Bl.projectionMatrix.elements,Op=Wl.projectionMatrix.elements,R0=Lp[14]/(Lp[10]-1),N0=Lp[14]/(Lp[10]+1),Qp=(Lp[9]+1)/Lp[5],O0=(Lp[9]-1)/Lp[5],zp=(Lp[8]-1)/Lp[0],M0=(Op[8]+1)/Op[0],W0=R0*zp,im=R0*M0,F0=Ep/(-zp+M0),fm=F0*-zp;Bl.matrixWorld.decompose(Ei.position,Ei.quaternion,Ei.scale),Ei.translateX(fm),Ei.translateZ(F0),Ei.matrixWorld.compose(Ei.position,Ei.quaternion,Ei.scale),Ei.matrixWorldInverse.copy(Ei.matrixWorld).invert();const cm=R0+F0,Ap=N0+F0,Io=W0-fm,p0=im+(Ep-fm),a0=Qp*N0/Ap*cm,rm=O0*N0/Ap*cm;Ei.projectionMatrix.makePerspective(Io,p0,a0,rm,cm,Ap),Ei.projectionMatrixInverse.copy(Ei.projectionMatrix).invert()}function lt(Ei,Bl){Bl===null?Ei.matrixWorld.copy(Ei.matrix):Ei.matrixWorld.multiplyMatrices(Bl.matrixWorld,Ei.matrix),Ei.matrixWorldInverse.copy(Ei.matrixWorld).invert()}this.updateCamera=function(Ei){if(s===null)return;y.texture!==null&&(Ei.near=y.depthNear,Ei.far=y.depthFar),X.near=B.near=k.near=Ei.near,X.far=B.far=k.far=Ei.far,(ae!==X.near||He!==X.far)&&(s.updateRenderState({depthNear:X.near,depthFar:X.far}),ae=X.near,He=X.far,k.near=ae,k.far=He,B.near=ae,B.far=He,k.updateProjectionMatrix(),B.updateProjectionMatrix(),Ei.updateProjectionMatrix());const Bl=Ei.parent,Wl=X.cameras;lt(X,Bl);for(let Ep=0;Ep<Wl.length;Ep++)lt(Wl[Ep],Bl);Wl.length===2?it(X,k,B):X.projectionMatrix.copy(k.projectionMatrix),Vt(Ei,X,Bl)};function Vt(Ei,Bl,Wl){Wl===null?Ei.matrix.copy(Bl.matrixWorld):(Ei.matrix.copy(Wl.matrixWorld),Ei.matrix.invert(),Ei.matrix.multiply(Bl.matrixWorld)),Ei.matrix.decompose(Ei.position,Ei.quaternion,Ei.scale),Ei.updateMatrixWorld(!0),Ei.projectionMatrix.copy(Bl.projectionMatrix),Ei.projectionMatrixInverse.copy(Bl.projectionMatrixInverse),Ei.isPerspectiveCamera&&(Ei.fov=gi*2*Math.atan(1/Ei.projectionMatrix.elements[5]),Ei.zoom=1)}this.getCamera=function(){return X},this.getFoveation=function(){if(!(A===null&&D===null))return h},this.setFoveation=function(Ei){h=Ei,A!==null&&(A.fixedFoveation=Ei),D!==null&&D.fixedFoveation!==void 0&&(D.fixedFoveation=Ei)},this.hasDepthSensing=function(){return y.texture!==null};let _e=null;function pr(Ei,Bl){if(m=Bl.getViewerPose(x||f),I=Bl,m!==null){const Wl=m.views;D!==null&&(e.setRenderTargetFramebuffer(L,D.framebuffer),e.setRenderTarget(L));let Ep=!1;Wl.length!==X.cameras.length&&(X.cameras.length=0,Ep=!0);for(let Op=0;Op<Wl.length;Op++){const R0=Wl[Op];let N0=null;if(D!==null)N0=D.getViewport(R0);else{const O0=w.getViewSubImage(A,R0);N0=O0.viewport,Op===0&&(e.setRenderTargetTextures(L,O0.colorTexture,A.ignoreDepthValues?void 0:O0.depthStencilTexture),e.setRenderTarget(L))}let Qp=J[Op];Qp===void 0&&(Qp=new Lt,Qp.layers.enable(Op),Qp.viewport=new ht,J[Op]=Qp),Qp.matrix.fromArray(R0.transform.matrix),Qp.matrix.decompose(Qp.position,Qp.quaternion,Qp.scale),Qp.projectionMatrix.fromArray(R0.projectionMatrix),Qp.projectionMatrixInverse.copy(Qp.projectionMatrix).invert(),Qp.viewport.set(N0.x,N0.y,N0.width,N0.height),Op===0&&(X.matrix.copy(Qp.matrix),X.matrix.decompose(X.position,X.quaternion,X.scale)),Ep===!0&&X.cameras.push(Qp)}const Lp=s.enabledFeatures;if(Lp&&Lp.includes("depth-sensing")){const Op=w.getDepthInformation(Wl[0]);Op&&Op.isValid&&Op.texture&&y.init(e,Op,s.renderState)}}for(let Wl=0;Wl<R.length;Wl++){const Ep=F[Wl],Lp=R[Wl];Ep!==null&&Lp!==void 0&&Lp.update(Ep,Bl,x||f)}y.render(e,X),_e&&_e(Ei,Bl),Bl.detectedPlanes&&a.dispatchEvent({type:"planesdetected",data:Bl}),I=null}const _s=new yo;_s.setAnimationLoop(pr),this.setAnimationLoop=function(Ei){_e=Ei},this.dispose=function(){}}}const En=new $t,op=new st;function lp(r,e){function t(l,c){l.matrixAutoUpdate===!0&&l.updateMatrix(),c.value.copy(l.matrix)}function a(l,c){c.color.getRGB(l.fogColor.value,xo(r)),c.isFog?(l.fogNear.value=c.near,l.fogFar.value=c.far):c.isFogExp2&&(l.fogDensity.value=c.density)}function s(l,c,L,R,F){c.isMeshBasicMaterial||c.isMeshLambertMaterial?o(l,c):c.isMeshToonMaterial?(o(l,c),w(l,c)):c.isMeshPhongMaterial?(o(l,c),m(l,c)):c.isMeshStandardMaterial?(o(l,c),A(l,c),c.isMeshPhysicalMaterial&&D(l,c,F)):c.isMeshMatcapMaterial?(o(l,c),I(l,c)):c.isMeshDepthMaterial?o(l,c):c.isMeshDistanceMaterial?(o(l,c),y(l,c)):c.isMeshNormalMaterial?o(l,c):c.isLineBasicMaterial?(f(l,c),c.isLineDashedMaterial&&u(l,c)):c.isPointsMaterial?h(l,c,L,R):c.isSpriteMaterial?x(l,c):c.isShadowMaterial?(l.color.value.copy(c.color),l.opacity.value=c.opacity):c.isShaderMaterial&&(c.uniformsNeedUpdate=!1)}function o(l,c){l.opacity.value=c.opacity,c.color&&l.diffuse.value.copy(c.color),c.emissive&&l.emissive.value.copy(c.emissive).multiplyScalar(c.emissiveIntensity),c.map&&(l.map.value=c.map,t(c.map,l.mapTransform)),c.alphaMap&&(l.alphaMap.value=c.alphaMap,t(c.alphaMap,l.alphaMapTransform)),c.bumpMap&&(l.bumpMap.value=c.bumpMap,t(c.bumpMap,l.bumpMapTransform),l.bumpScale.value=c.bumpScale,c.side===Et&&(l.bumpScale.value*=-1)),c.normalMap&&(l.normalMap.value=c.normalMap,t(c.normalMap,l.normalMapTransform),l.normalScale.value.copy(c.normalScale),c.side===Et&&l.normalScale.value.negate()),c.displacementMap&&(l.displacementMap.value=c.displacementMap,t(c.displacementMap,l.displacementMapTransform),l.displacementScale.value=c.displacementScale,l.displacementBias.value=c.displacementBias),c.emissiveMap&&(l.emissiveMap.value=c.emissiveMap,t(c.emissiveMap,l.emissiveMapTransform)),c.specularMap&&(l.specularMap.value=c.specularMap,t(c.specularMap,l.specularMapTransform)),c.alphaTest>0&&(l.alphaTest.value=c.alphaTest);const L=e.get(c),R=L.envMap,F=L.envMapRotation;if(R&&(l.envMap.value=R,En.copy(F),En.x*=-1,En.y*=-1,En.z*=-1,R.isCubeTexture&&R.isRenderTargetTexture===!1&&(En.y*=-1,En.z*=-1),l.envMapRotation.value.setFromMatrix4(op.makeRotationFromEuler(En)),l.flipEnvMap.value=R.isCubeTexture&&R.isRenderTargetTexture===!1?-1:1,l.reflectivity.value=c.reflectivity,l.ior.value=c.ior,l.refractionRatio.value=c.refractionRatio),c.lightMap){l.lightMap.value=c.lightMap;const $=r._useLegacyLights===!0?Math.PI:1;l.lightMapIntensity.value=c.lightMapIntensity*$,t(c.lightMap,l.lightMapTransform)}c.aoMap&&(l.aoMap.value=c.aoMap,l.aoMapIntensity.value=c.aoMapIntensity,t(c.aoMap,l.aoMapTransform))}function f(l,c){l.diffuse.value.copy(c.color),l.opacity.value=c.opacity,c.map&&(l.map.value=c.map,t(c.map,l.mapTransform))}function u(l,c){l.dashSize.value=c.dashSize,l.totalSize.value=c.dashSize+c.gapSize,l.scale.value=c.scale}function h(l,c,L,R){l.diffuse.value.copy(c.color),l.opacity.value=c.opacity,l.size.value=c.size*L,l.scale.value=R*.5,c.map&&(l.map.value=c.map,t(c.map,l.uvTransform)),c.alphaMap&&(l.alphaMap.value=c.alphaMap,t(c.alphaMap,l.alphaMapTransform)),c.alphaTest>0&&(l.alphaTest.value=c.alphaTest)}function x(l,c){l.diffuse.value.copy(c.color),l.opacity.value=c.opacity,l.rotation.value=c.rotation,c.map&&(l.map.value=c.map,t(c.map,l.mapTransform)),c.alphaMap&&(l.alphaMap.value=c.alphaMap,t(c.alphaMap,l.alphaMapTransform)),c.alphaTest>0&&(l.alphaTest.value=c.alphaTest)}function m(l,c){l.specular.value.copy(c.specular),l.shininess.value=Math.max(c.shininess,1e-4)}function w(l,c){c.gradientMap&&(l.gradientMap.value=c.gradientMap)}function A(l,c){l.metalness.value=c.metalness,c.metalnessMap&&(l.metalnessMap.value=c.metalnessMap,t(c.metalnessMap,l.metalnessMapTransform)),l.roughness.value=c.roughness,c.roughnessMap&&(l.roughnessMap.value=c.roughnessMap,t(c.roughnessMap,l.roughnessMapTransform)),e.get(c).envMap&&(l.envMapIntensity.value=c.envMapIntensity)}function D(l,c,L){l.ior.value=c.ior,c.sheen>0&&(l.sheenColor.value.copy(c.sheenColor).multiplyScalar(c.sheen),l.sheenRoughness.value=c.sheenRoughness,c.sheenColorMap&&(l.sheenColorMap.value=c.sheenColorMap,t(c.sheenColorMap,l.sheenColorMapTransform)),c.sheenRoughnessMap&&(l.sheenRoughnessMap.value=c.sheenRoughnessMap,t(c.sheenRoughnessMap,l.sheenRoughnessMapTransform))),c.clearcoat>0&&(l.clearcoat.value=c.clearcoat,l.clearcoatRoughness.value=c.clearcoatRoughness,c.clearcoatMap&&(l.clearcoatMap.value=c.clearcoatMap,t(c.clearcoatMap,l.clearcoatMapTransform)),c.clearcoatRoughnessMap&&(l.clearcoatRoughnessMap.value=c.clearcoatRoughnessMap,t(c.clearcoatRoughnessMap,l.clearcoatRoughnessMapTransform)),c.clearcoatNormalMap&&(l.clearcoatNormalMap.value=c.clearcoatNormalMap,t(c.clearcoatNormalMap,l.clearcoatNormalMapTransform),l.clearcoatNormalScale.value.copy(c.clearcoatNormalScale),c.side===Et&&l.clearcoatNormalScale.value.negate())),c.iridescence>0&&(l.iridescence.value=c.iridescence,l.iridescenceIOR.value=c.iridescenceIOR,l.iridescenceThicknessMinimum.value=c.iridescenceThicknessRange[0],l.iridescenceThicknessMaximum.value=c.iridescenceThicknessRange[1],c.iridescenceMap&&(l.iridescenceMap.value=c.iridescenceMap,t(c.iridescenceMap,l.iridescenceMapTransform)),c.iridescenceThicknessMap&&(l.iridescenceThicknessMap.value=c.iridescenceThicknessMap,t(c.iridescenceThicknessMap,l.iridescenceThicknessMapTransform))),c.transmission>0&&(l.transmission.value=c.transmission,l.transmissionSamplerMap.value=L.texture,l.transmissionSamplerSize.value.set(L.width,L.height),c.transmissionMap&&(l.transmissionMap.value=c.transmissionMap,t(c.transmissionMap,l.transmissionMapTransform)),l.thickness.value=c.thickness,c.thicknessMap&&(l.thicknessMap.value=c.thicknessMap,t(c.thicknessMap,l.thicknessMapTransform)),l.attenuationDistance.value=c.attenuationDistance,l.attenuationColor.value.copy(c.attenuationColor)),c.anisotropy>0&&(l.anisotropyVector.value.set(c.anisotropy*Math.cos(c.anisotropyRotation),c.anisotropy*Math.sin(c.anisotropyRotation)),c.anisotropyMap&&(l.anisotropyMap.value=c.anisotropyMap,t(c.anisotropyMap,l.anisotropyMapTransform))),l.specularIntensity.value=c.specularIntensity,l.specularColor.value.copy(c.specularColor),c.specularColorMap&&(l.specularColorMap.value=c.specularColorMap,t(c.specularColorMap,l.specularColorMapTransform)),c.specularIntensityMap&&(l.specularIntensityMap.value=c.specularIntensityMap,t(c.specularIntensityMap,l.specularIntensityMapTransform))}function I(l,c){c.matcap&&(l.matcap.value=c.matcap)}function y(l,c){const L=e.get(c).light;l.referencePosition.value.setFromMatrixPosition(L.matrixWorld),l.nearDistance.value=L.shadow.camera.near,l.farDistance.value=L.shadow.camera.far}return{refreshFogUniforms:a,refreshMaterialUniforms:s}}function cp(r,e,t,a){let s={},o={},f=[];const u=t.isWebGL2?r.getParameter(r.MAX_UNIFORM_BUFFER_BINDINGS):0;function h(L,R){const F=R.program;a.uniformBlockBinding(L,F)}function x(L,R){let F=s[L.id];F===void 0&&(I(L),F=m(L),s[L.id]=F,L.addEventListener("dispose",l));const $=R.program;a.updateUBOMapping(L,$);const b=e.render.frame;o[L.id]!==b&&(A(L),o[L.id]=b)}function m(L){const R=w();L.__bindingPointIndex=R;const F=r.createBuffer(),$=L.__size,b=L.usage;return r.bindBuffer(r.UNIFORM_BUFFER,F),r.bufferData(r.UNIFORM_BUFFER,$,b),r.bindBuffer(r.UNIFORM_BUFFER,null),r.bindBufferBase(r.UNIFORM_BUFFER,R,F),F}function w(){for(let L=0;L<u;L++)if(f.indexOf(L)===-1)return f.push(L),L;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function A(L){const R=s[L.id],F=L.uniforms,$=L.__cache;r.bindBuffer(r.UNIFORM_BUFFER,R);for(let b=0,k=F.length;b<k;b++){const B=Array.isArray(F[b])?F[b]:[F[b]];for(let J=0,X=B.length;J<X;J++){const ae=B[J];if(D(ae,b,J,$)===!0){const He=ae.__offset,Pe=Array.isArray(ae.value)?ae.value:[ae.value];let ue=0;for(let Oe=0;Oe<Pe.length;Oe++){const we=Pe[Oe],Ze=y(we);typeof we=="number"||typeof we=="boolean"?(ae.__data[0]=we,r.bufferSubData(r.UNIFORM_BUFFER,He+ue,ae.__data)):we.isMatrix3?(ae.__data[0]=we.elements[0],ae.__data[1]=we.elements[1],ae.__data[2]=we.elements[2],ae.__data[3]=0,ae.__data[4]=we.elements[3],ae.__data[5]=we.elements[4],ae.__data[6]=we.elements[5],ae.__data[7]=0,ae.__data[8]=we.elements[6],ae.__data[9]=we.elements[7],ae.__data[10]=we.elements[8],ae.__data[11]=0):(we.toArray(ae.__data,ue),ue+=Ze.storage/Float32Array.BYTES_PER_ELEMENT)}r.bufferSubData(r.UNIFORM_BUFFER,He,ae.__data)}}}r.bindBuffer(r.UNIFORM_BUFFER,null)}function D(L,R,F,$){const b=L.value,k=R+"_"+F;if($[k]===void 0)return typeof b=="number"||typeof b=="boolean"?$[k]=b:$[k]=b.clone(),!0;{const B=$[k];if(typeof b=="number"||typeof b=="boolean"){if(B!==b)return $[k]=b,!0}else if(B.equals(b)===!1)return B.copy(b),!0}return!1}function I(L){const R=L.uniforms;let F=0;const $=16;for(let k=0,B=R.length;k<B;k++){const J=Array.isArray(R[k])?R[k]:[R[k]];for(let X=0,ae=J.length;X<ae;X++){const He=J[X],Pe=Array.isArray(He.value)?He.value:[He.value];for(let ue=0,Oe=Pe.length;ue<Oe;ue++){const we=Pe[ue],Ze=y(we),it=F%$;it!==0&&$-it<Ze.boundary&&(F+=$-it),He.__data=new Float32Array(Ze.storage/Float32Array.BYTES_PER_ELEMENT),He.__offset=F,F+=Ze.storage}}}const b=F%$;return b>0&&(F+=$-b),L.__size=F,L.__cache={},this}function y(L){const R={boundary:0,storage:0};return typeof L=="number"||typeof L=="boolean"?(R.boundary=4,R.storage=4):L.isVector2?(R.boundary=8,R.storage=8):L.isVector3||L.isColor?(R.boundary=16,R.storage=12):L.isVector4?(R.boundary=16,R.storage=16):L.isMatrix3?(R.boundary=48,R.storage=48):L.isMatrix4?(R.boundary=64,R.storage=64):L.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",L),R}function l(L){const R=L.target;R.removeEventListener("dispose",l);const F=f.indexOf(R.__bindingPointIndex);f.splice(F,1),r.deleteBuffer(s[R.id]),delete s[R.id],delete o[R.id]}function c(){for(const L in s)r.deleteBuffer(s[L]);f=[],s={},o={}}return{bind:h,update:x,dispose:c}}class Po{constructor(e={}){const{canvas:t=Zl(),context:a=null,depth:s=!0,stencil:o=!0,alpha:f=!1,antialias:u=!1,premultipliedAlpha:h=!0,preserveDrawingBuffer:x=!1,powerPreference:m="default",failIfMajorPerformanceCaveat:w=!1}=e;this.isWebGLRenderer=!0;let A;a!==null?A=a.getContextAttributes().alpha:A=f;const D=new Uint32Array(4),I=new Int32Array(4);let y=null,l=null;const c=[],L=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Bt,this._useLegacyLights=!1,this.toneMapping=cn,this.toneMappingExposure=1;const R=this;let F=!1,$=0,b=0,k=null,B=-1,J=null;const X=new ht,ae=new ht;let He=null;const Pe=new qe(0);let ue=0,Oe=t.width,we=t.height,Ze=1,it=null,lt=null;const Vt=new ht(0,0,Oe,we),_e=new ht(0,0,Oe,we);let pr=!1;const _s=new Eo;let Ei=!1,Bl=!1,Wl=null;const Ep=new st,Lp=new Ie,Op=new U,R0={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function N0(){return k===null?Ze:1}let Qp=a;function O0(Yp,nm){for(let dm=0;dm<Yp.length;dm++){const o0=Yp[dm],pm=t.getContext(o0,nm);if(pm!==null)return pm}return null}try{const Yp={alpha:!0,depth:s,stencil:o,antialias:u,premultipliedAlpha:h,preserveDrawingBuffer:x,powerPreference:m,failIfMajorPerformanceCaveat:w};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${os}`),t.addEventListener("webglcontextlost",kl,!1),t.addEventListener("webglcontextrestored",Np,!1),t.addEventListener("webglcontextcreationerror",V0,!1),Qp===null){const nm=["webgl2","webgl","experimental-webgl"];if(R.isWebGL1Renderer===!0&&nm.shift(),Qp=O0(nm,Yp),Qp===null)throw O0(nm)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&Qp instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),Qp.getShaderPrecisionFormat===void 0&&(Qp.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Yp){throw console.error("THREE.WebGLRenderer: "+Yp.message),Yp}let zp,M0,W0,im,F0,fm,cm,Ap,Io,p0,a0,rm,X0,Nl,Gl,Mp,_0,v0,z0,sm,Uo,u0,x0,Xl;function Bp(){zp=new mf(Qp),M0=new lf(Qp,zp,e),zp.init(M0),u0=new ep(Qp,zp,M0),W0=new Jd(Qp,zp,M0),im=new vf(Qp),F0=new Bd,fm=new Qd(Qp,zp,W0,F0,M0,u0,im),cm=new uf(R),Ap=new pf(R),Io=new Ec(Qp,M0),x0=new af(Qp,zp,Io,M0),p0=new _f(Qp,Io,im,x0),a0=new Ef(Qp,p0,Io,im),z0=new Sf(Qp,M0,fm),Mp=new cf(F0),rm=new Od(R,cm,Ap,zp,M0,x0,Mp),X0=new lp(R,F0),Nl=new Gd,Gl=new Yd(zp,M0),v0=new sf(R,cm,Ap,W0,a0,A,h),_0=new $d(R,a0,M0),Xl=new cp(Qp,im,M0,W0),sm=new of(Qp,zp,im,M0),Uo=new gf(Qp,zp,im,M0),im.programs=rm.programs,R.capabilities=M0,R.extensions=zp,R.properties=F0,R.renderLists=Nl,R.shadowMap=_0,R.state=W0,R.info=im}Bp();const L0=new ap(R,Qp);this.xr=L0,this.getContext=function(){return Qp},this.getContextAttributes=function(){return Qp.getContextAttributes()},this.forceContextLoss=function(){const Yp=zp.get("WEBGL_lose_context");Yp&&Yp.loseContext()},this.forceContextRestore=function(){const Yp=zp.get("WEBGL_lose_context");Yp&&Yp.restoreContext()},this.getPixelRatio=function(){return Ze},this.setPixelRatio=function(Yp){Yp!==void 0&&(Ze=Yp,this.setSize(Oe,we,!1))},this.getSize=function(Yp){return Yp.set(Oe,we)},this.setSize=function(Yp,nm,dm=!0){if(L0.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}Oe=Yp,we=nm,t.width=Math.floor(Yp*Ze),t.height=Math.floor(nm*Ze),dm===!0&&(t.style.width=Yp+"px",t.style.height=nm+"px"),this.setViewport(0,0,Yp,nm)},this.getDrawingBufferSize=function(Yp){return Yp.set(Oe*Ze,we*Ze).floor()},this.setDrawingBufferSize=function(Yp,nm,dm){Oe=Yp,we=nm,Ze=dm,t.width=Math.floor(Yp*dm),t.height=Math.floor(nm*dm),this.setViewport(0,0,Yp,nm)},this.getCurrentViewport=function(Yp){return Yp.copy(X)},this.getViewport=function(Yp){return Yp.copy(Vt)},this.setViewport=function(Yp,nm,dm,o0){Yp.isVector4?Vt.set(Yp.x,Yp.y,Yp.z,Yp.w):Vt.set(Yp,nm,dm,o0),W0.viewport(X.copy(Vt).multiplyScalar(Ze).round())},this.getScissor=function(Yp){return Yp.copy(_e)},this.setScissor=function(Yp,nm,dm,o0){Yp.isVector4?_e.set(Yp.x,Yp.y,Yp.z,Yp.w):_e.set(Yp,nm,dm,o0),W0.scissor(ae.copy(_e).multiplyScalar(Ze).round())},this.getScissorTest=function(){return pr},this.setScissorTest=function(Yp){W0.setScissorTest(pr=Yp)},this.setOpaqueSort=function(Yp){it=Yp},this.setTransparentSort=function(Yp){lt=Yp},this.getClearColor=function(Yp){return Yp.copy(v0.getClearColor())},this.setClearColor=function(){v0.setClearColor.apply(v0,arguments)},this.getClearAlpha=function(){return v0.getClearAlpha()},this.setClearAlpha=function(){v0.setClearAlpha.apply(v0,arguments)},this.clear=function(Yp=!0,nm=!0,dm=!0){let o0=0;if(Yp){let pm=!1;if(k!==null){const jm=k.texture.format;pm=jm===oo||jm===ao||jm===so}if(pm){const jm=k.texture.type,iv=jm===un||jm===on||jm===ls||jm===wn||jm===io||jm===ro,ov=v0.getClearColor(),dv=v0.getClearAlpha(),cv=ov.r,Cv=ov.g,Lv=ov.b;iv?(D[0]=cv,D[1]=Cv,D[2]=Lv,D[3]=dv,Qp.clearBufferuiv(Qp.COLOR,0,D)):(I[0]=cv,I[1]=Cv,I[2]=Lv,I[3]=dv,Qp.clearBufferiv(Qp.COLOR,0,I))}else o0|=Qp.COLOR_BUFFER_BIT}nm&&(o0|=Qp.DEPTH_BUFFER_BIT),dm&&(o0|=Qp.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),Qp.clear(o0)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",kl,!1),t.removeEventListener("webglcontextrestored",Np,!1),t.removeEventListener("webglcontextcreationerror",V0,!1),Nl.dispose(),Gl.dispose(),F0.dispose(),cm.dispose(),Ap.dispose(),a0.dispose(),x0.dispose(),Xl.dispose(),rm.dispose(),L0.dispose(),L0.removeEventListener("sessionstart",Pm),L0.removeEventListener("sessionend",Cm),Wl&&(Wl.dispose(),Wl=null),Fm.stop()};function kl(Yp){Yp.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),F=!0}function Np(){console.log("THREE.WebGLRenderer: Context Restored."),F=!1;const Yp=im.autoReset,nm=_0.enabled,dm=_0.autoUpdate,o0=_0.needsUpdate,pm=_0.type;Bp(),im.autoReset=Yp,_0.enabled=nm,_0.autoUpdate=dm,_0.needsUpdate=o0,_0.type=pm}function V0(Yp){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Yp.statusMessage)}function Ke(Yp){const nm=Yp.target;nm.removeEventListener("dispose",Ke),g0(nm)}function g0(Yp){d0(Yp),F0.remove(Yp)}function d0(Yp){const nm=F0.get(Yp).programs;nm!==void 0&&(nm.forEach(function(dm){rm.releaseProgram(dm)}),Yp.isShaderMaterial&&rm.releaseShaderCache(Yp))}this.renderBufferDirect=function(Yp,nm,dm,o0,pm,jm){nm===null&&(nm=R0);const iv=pm.isMesh&&pm.matrixWorld.determinant()<0,ov=A1(Yp,nm,dm,o0,pm);W0.setMaterial(o0,iv);let dv=dm.index,cv=1;if(o0.wireframe===!0){if(dv=p0.getWireframeAttribute(dm),dv===void 0)return;cv=2}const Cv=dm.drawRange,Lv=dm.attributes.position;let Vm=Cv.start*cv,wv=(Cv.start+Cv.count)*cv;jm!==null&&(Vm=Math.max(Vm,jm.start*cv),wv=Math.min(wv,(jm.start+jm.count)*cv)),dv!==null?(Vm=Math.max(Vm,0),wv=Math.min(wv,dv.count)):Lv!=null&&(Vm=Math.max(Vm,0),wv=Math.min(wv,Lv.count));const Ov=wv-Vm;if(Ov<0||Ov===1/0)return;x0.setup(pm,o0,ov,dm,dv);let X1,n1=sm;if(dv!==null&&(X1=Io.get(dv),n1=Uo,n1.setIndex(X1)),pm.isMesh)o0.wireframe===!0?(W0.setLineWidth(o0.wireframeLinewidth*N0()),n1.setMode(Qp.LINES)):n1.setMode(Qp.TRIANGLES);else if(pm.isLine){let Rv=o0.linewidth;Rv===void 0&&(Rv=1),W0.setLineWidth(Rv*N0()),pm.isLineSegments?n1.setMode(Qp.LINES):pm.isLineLoop?n1.setMode(Qp.LINE_LOOP):n1.setMode(Qp.LINE_STRIP)}else pm.isPoints?n1.setMode(Qp.POINTS):pm.isSprite&&n1.setMode(Qp.TRIANGLES);if(pm.isBatchedMesh)n1.renderMultiDraw(pm._multiDrawStarts,pm._multiDrawCounts,pm._multiDrawCount);else if(pm.isInstancedMesh)n1.renderInstances(Vm,Ov,pm.count);else if(dm.isInstancedBufferGeometry){const Rv=dm._maxInstanceCount!==void 0?dm._maxInstanceCount:1/0,Kg=Math.min(dm.instanceCount,Rv);n1.renderInstances(Vm,Ov,Kg)}else n1.render(Vm,Ov)};function Vl(Yp,nm,dm){Yp.transparent===!0&&Yp.side===Gt&&Yp.forceSinglePass===!1?(Yp.side=Et,Yp.needsUpdate=!0,a1(Yp,nm,dm),Yp.side=hn,Yp.needsUpdate=!0,a1(Yp,nm,dm),Yp.side=Gt):a1(Yp,nm,dm)}this.compile=function(Yp,nm,dm=null){dm===null&&(dm=Yp),l=Gl.get(dm),l.init(),L.push(l),dm.traverseVisible(function(pm){pm.isLight&&pm.layers.test(nm.layers)&&(l.pushLight(pm),pm.castShadow&&l.pushShadow(pm))}),Yp!==dm&&Yp.traverseVisible(function(pm){pm.isLight&&pm.layers.test(nm.layers)&&(l.pushLight(pm),pm.castShadow&&l.pushShadow(pm))}),l.setupLights(R._useLegacyLights);const o0=new Set;return Yp.traverse(function(pm){const jm=pm.material;if(jm)if(Array.isArray(jm))for(let iv=0;iv<jm.length;iv++){const ov=jm[iv];Vl(ov,dm,pm),o0.add(ov)}else Vl(jm,dm,pm),o0.add(jm)}),L.pop(),l=null,o0},this.compileAsync=function(Yp,nm,dm=null){const o0=this.compile(Yp,nm,dm);return new Promise(pm=>{function jm(){if(o0.forEach(function(iv){F0.get(iv).currentProgram.isReady()&&o0.delete(iv)}),o0.size===0){pm(Yp);return}setTimeout(jm,10)}zp.get("KHR_parallel_shader_compile")!==null?jm():setTimeout(jm,10)})};let jp=null;function K0(Yp){jp&&jp(Yp)}function Pm(){Fm.stop()}function Cm(){Fm.start()}const Fm=new yo;Fm.setAnimationLoop(K0),typeof self<"u"&&Fm.setContext(self),this.setAnimationLoop=function(Yp){jp=Yp,L0.setAnimationLoop(Yp),Yp===null?Fm.stop():Fm.start()},L0.addEventListener("sessionstart",Pm),L0.addEventListener("sessionend",Cm),this.render=function(Yp,nm){if(nm!==void 0&&nm.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(F===!0)return;Yp.matrixWorldAutoUpdate===!0&&Yp.updateMatrixWorld(),nm.parent===null&&nm.matrixWorldAutoUpdate===!0&&nm.updateMatrixWorld(),L0.enabled===!0&&L0.isPresenting===!0&&(L0.cameraAutoUpdate===!0&&L0.updateCamera(nm),nm=L0.getCamera()),Yp.isScene===!0&&Yp.onBeforeRender(R,Yp,nm,k),l=Gl.get(Yp,L.length),l.init(),L.push(l),Ep.multiplyMatrices(nm.projectionMatrix,nm.matrixWorldInverse),_s.setFromProjectionMatrix(Ep),Bl=this.localClippingEnabled,Ei=Mp.init(this.clippingPlanes,Bl),y=Nl.get(Yp,c.length),y.init(),c.push(y),ev(Yp,nm,0,R.sortObjects),y.finish(),R.sortObjects===!0&&y.sort(it,lt),this.info.render.frame++,Ei===!0&&Mp.beginShadows();const dm=l.state.shadowsArray;if(_0.render(dm,Yp,nm),Ei===!0&&Mp.endShadows(),this.info.autoReset===!0&&this.info.reset(),(L0.enabled===!1||L0.isPresenting===!1||L0.hasDepthSensing()===!1)&&v0.render(y,Yp),l.setupLights(R._useLegacyLights),nm.isArrayCamera){const o0=nm.cameras;for(let pm=0,jm=o0.length;pm<jm;pm++){const iv=o0[pm];h1(y,Yp,iv,iv.viewport)}}else h1(y,Yp,nm);k!==null&&(fm.updateMultisampleRenderTarget(k),fm.updateRenderTargetMipmap(k)),Yp.isScene===!0&&Yp.onAfterRender(R,Yp,nm),x0.resetDefaultState(),B=-1,J=null,L.pop(),L.length>0?l=L[L.length-1]:l=null,c.pop(),c.length>0?y=c[c.length-1]:y=null};function ev(Yp,nm,dm,o0){if(Yp.visible===!1)return;if(Yp.layers.test(nm.layers)){if(Yp.isGroup)dm=Yp.renderOrder;else if(Yp.isLOD)Yp.autoUpdate===!0&&Yp.update(nm);else if(Yp.isLight)l.pushLight(Yp),Yp.castShadow&&l.pushShadow(Yp);else if(Yp.isSprite){if(!Yp.frustumCulled||_s.intersectsSprite(Yp)){o0&&Op.setFromMatrixPosition(Yp.matrixWorld).applyMatrix4(Ep);const jm=a0.update(Yp),iv=Yp.material;iv.visible&&y.push(Yp,jm,iv,dm,Op.z,null)}}else if((Yp.isMesh||Yp.isLine||Yp.isPoints)&&(!Yp.frustumCulled||_s.intersectsObject(Yp))){const jm=a0.update(Yp),iv=Yp.material;if(o0&&(Yp.boundingSphere!==void 0?(Yp.boundingSphere===null&&Yp.computeBoundingSphere(),Op.copy(Yp.boundingSphere.center)):(jm.boundingSphere===null&&jm.computeBoundingSphere(),Op.copy(jm.boundingSphere.center)),Op.applyMatrix4(Yp.matrixWorld).applyMatrix4(Ep)),Array.isArray(iv)){const ov=jm.groups;for(let dv=0,cv=ov.length;dv<cv;dv++){const Cv=ov[dv],Lv=iv[Cv.materialIndex];Lv&&Lv.visible&&y.push(Yp,jm,Lv,dm,Op.z,Cv)}}else iv.visible&&y.push(Yp,jm,iv,dm,Op.z,null)}}const pm=Yp.children;for(let jm=0,iv=pm.length;jm<iv;jm++)ev(pm[jm],nm,dm,o0)}function h1(Yp,nm,dm,o0){const pm=Yp.opaque,jm=Yp.transmissive,iv=Yp.transparent;l.setupLightsView(dm),Ei===!0&&Mp.setGlobalState(R.clippingPlanes,dm),jm.length>0&&xv(pm,jm,nm,dm),o0&&W0.viewport(X.copy(o0)),pm.length>0&&gv(pm,nm,dm),jm.length>0&&gv(jm,nm,dm),iv.length>0&&gv(iv,nm,dm),W0.buffers.depth.setTest(!0),W0.buffers.depth.setMask(!0),W0.buffers.color.setMask(!0),W0.setPolygonOffset(!1)}function xv(Yp,nm,dm,o0){if((dm.isScene===!0?dm.overrideMaterial:null)!==null)return;const pm=M0.isWebGL2;Wl===null&&(Wl=new Cn(1,1,{generateMipmaps:!0,type:zp.has("EXT_color_buffer_half_float")?_i:un,minFilter:An,samples:pm?4:0})),R.getDrawingBufferSize(Lp),pm?Wl.setSize(Lp.x,Lp.y):Wl.setSize(rr(Lp.x),rr(Lp.y));const jm=R.getRenderTarget();R.setRenderTarget(Wl),R.getClearColor(Pe),ue=R.getClearAlpha(),ue<1&&R.setClearColor(16777215,.5),R.clear();const iv=R.toneMapping;R.toneMapping=cn,gv(Yp,dm,o0),fm.updateMultisampleRenderTarget(Wl),fm.updateRenderTargetMipmap(Wl);let ov=!1;for(let dv=0,cv=nm.length;dv<cv;dv++){const Cv=nm[dv],Lv=Cv.object,Vm=Cv.geometry,wv=Cv.material,Ov=Cv.group;if(wv.side===Gt&&Lv.layers.test(o0.layers)){const X1=wv.side;wv.side=Et,wv.needsUpdate=!0,zv(Lv,dm,o0,Vm,wv,Ov),wv.side=X1,wv.needsUpdate=!0,ov=!0}}ov===!0&&(fm.updateMultisampleRenderTarget(Wl),fm.updateRenderTargetMipmap(Wl)),R.setRenderTarget(jm),R.setClearColor(Pe,ue),R.toneMapping=iv}function gv(Yp,nm,dm){const o0=nm.isScene===!0?nm.overrideMaterial:null;for(let pm=0,jm=Yp.length;pm<jm;pm++){const iv=Yp[pm],ov=iv.object,dv=iv.geometry,cv=o0===null?iv.material:o0,Cv=iv.group;ov.layers.test(dm.layers)&&zv(ov,nm,dm,dv,cv,Cv)}}function zv(Yp,nm,dm,o0,pm,jm){Yp.onBeforeRender(R,nm,dm,o0,pm,jm),Yp.modelViewMatrix.multiplyMatrices(dm.matrixWorldInverse,Yp.matrixWorld),Yp.normalMatrix.getNormalMatrix(Yp.modelViewMatrix),pm.onBeforeRender(R,nm,dm,o0,Yp,jm),pm.transparent===!0&&pm.side===Gt&&pm.forceSinglePass===!1?(pm.side=Et,pm.needsUpdate=!0,R.renderBufferDirect(dm,nm,o0,pm,Yp,jm),pm.side=hn,pm.needsUpdate=!0,R.renderBufferDirect(dm,nm,o0,pm,Yp,jm),pm.side=Gt):R.renderBufferDirect(dm,nm,o0,pm,Yp,jm),Yp.onAfterRender(R,nm,dm,o0,pm,jm)}function a1(Yp,nm,dm){nm.isScene!==!0&&(nm=R0);const o0=F0.get(Yp),pm=l.state.lights,jm=l.state.shadowsArray,iv=pm.state.version,ov=rm.getParameters(Yp,pm.state,jm,nm,dm),dv=rm.getProgramCacheKey(ov);let cv=o0.programs;o0.environment=Yp.isMeshStandardMaterial?nm.environment:null,o0.fog=nm.fog,o0.envMap=(Yp.isMeshStandardMaterial?Ap:cm).get(Yp.envMap||o0.environment),o0.envMapRotation=o0.environment!==null&&Yp.envMap===null?nm.environmentRotation:Yp.envMapRotation,cv===void 0&&(Yp.addEventListener("dispose",Ke),cv=new Map,o0.programs=cv);let Cv=cv.get(dv);if(Cv!==void 0){if(o0.currentProgram===Cv&&o0.lightsStateVersion===iv)return d1(Yp,ov),Cv}else ov.uniforms=rm.getUniforms(Yp),Yp.onBuild(dm,ov,R),Yp.onBeforeCompile(ov,R),Cv=rm.acquireProgram(ov,dv),cv.set(dv,Cv),o0.uniforms=ov.uniforms;const Lv=o0.uniforms;return(!Yp.isShaderMaterial&&!Yp.isRawShaderMaterial||Yp.clipping===!0)&&(Lv.clippingPlanes=Mp.uniform),d1(Yp,ov),o0.needsLights=u1(Yp),o0.lightsStateVersion=iv,o0.needsLights&&(Lv.ambientLightColor.value=pm.state.ambient,Lv.lightProbe.value=pm.state.probe,Lv.directionalLights.value=pm.state.directional,Lv.directionalLightShadows.value=pm.state.directionalShadow,Lv.spotLights.value=pm.state.spot,Lv.spotLightShadows.value=pm.state.spotShadow,Lv.rectAreaLights.value=pm.state.rectArea,Lv.ltc_1.value=pm.state.rectAreaLTC1,Lv.ltc_2.value=pm.state.rectAreaLTC2,Lv.pointLights.value=pm.state.point,Lv.pointLightShadows.value=pm.state.pointShadow,Lv.hemisphereLights.value=pm.state.hemi,Lv.directionalShadowMap.value=pm.state.directionalShadowMap,Lv.directionalShadowMatrix.value=pm.state.directionalShadowMatrix,Lv.spotShadowMap.value=pm.state.spotShadowMap,Lv.spotLightMatrix.value=pm.state.spotLightMatrix,Lv.spotLightMap.value=pm.state.spotLightMap,Lv.pointShadowMap.value=pm.state.pointShadowMap,Lv.pointShadowMatrix.value=pm.state.pointShadowMatrix),o0.currentProgram=Cv,o0.uniformsList=null,Cv}function Jv(Yp){if(Yp.uniformsList===null){const nm=Yp.currentProgram.getUniforms();Yp.uniformsList=Ji.seqWithValue(nm.seq,Yp.uniforms)}return Yp.uniformsList}function d1(Yp,nm){const dm=F0.get(Yp);dm.outputColorSpace=nm.outputColorSpace,dm.batching=nm.batching,dm.instancing=nm.instancing,dm.instancingColor=nm.instancingColor,dm.instancingMorph=nm.instancingMorph,dm.skinning=nm.skinning,dm.morphTargets=nm.morphTargets,dm.morphNormals=nm.morphNormals,dm.morphColors=nm.morphColors,dm.morphTargetsCount=nm.morphTargetsCount,dm.numClippingPlanes=nm.numClippingPlanes,dm.numIntersection=nm.numClipIntersection,dm.vertexAlphas=nm.vertexAlphas,dm.vertexTangents=nm.vertexTangents,dm.toneMapping=nm.toneMapping}function A1(Yp,nm,dm,o0,pm){nm.isScene!==!0&&(nm=R0),fm.resetTextureUnits();const jm=nm.fog,iv=o0.isMeshStandardMaterial?nm.environment:null,ov=k===null?R.outputColorSpace:k.isXRRenderTarget===!0?k.texture.colorSpace:dn,dv=(o0.isMeshStandardMaterial?Ap:cm).get(o0.envMap||iv),cv=o0.vertexColors===!0&&!!dm.attributes.color&&dm.attributes.color.itemSize===4,Cv=!!dm.attributes.tangent&&(!!o0.normalMap||o0.anisotropy>0),Lv=!!dm.morphAttributes.position,Vm=!!dm.morphAttributes.normal,wv=!!dm.morphAttributes.color;let Ov=cn;o0.toneMapped&&(k===null||k.isXRRenderTarget===!0)&&(Ov=R.toneMapping);const X1=dm.morphAttributes.position||dm.morphAttributes.normal||dm.morphAttributes.color,n1=X1!==void 0?X1.length:0,Rv=F0.get(o0),Kg=l.state.lights;if(Ei===!0&&(Bl===!0||Yp!==J)){const j1=Yp===J&&o0.id===B;Mp.setState(o0,Yp,j1)}let p1=!1;o0.version===Rv.__version?(Rv.needsLights&&Rv.lightsStateVersion!==Kg.state.version||Rv.outputColorSpace!==ov||pm.isBatchedMesh&&Rv.batching===!1||!pm.isBatchedMesh&&Rv.batching===!0||pm.isInstancedMesh&&Rv.instancing===!1||!pm.isInstancedMesh&&Rv.instancing===!0||pm.isSkinnedMesh&&Rv.skinning===!1||!pm.isSkinnedMesh&&Rv.skinning===!0||pm.isInstancedMesh&&Rv.instancingColor===!0&&pm.instanceColor===null||pm.isInstancedMesh&&Rv.instancingColor===!1&&pm.instanceColor!==null||pm.isInstancedMesh&&Rv.instancingMorph===!0&&pm.morphTexture===null||pm.isInstancedMesh&&Rv.instancingMorph===!1&&pm.morphTexture!==null||Rv.envMap!==dv||o0.fog===!0&&Rv.fog!==jm||Rv.numClippingPlanes!==void 0&&(Rv.numClippingPlanes!==Mp.numPlanes||Rv.numIntersection!==Mp.numIntersection)||Rv.vertexAlphas!==cv||Rv.vertexTangents!==Cv||Rv.morphTargets!==Lv||Rv.morphNormals!==Vm||Rv.morphColors!==wv||Rv.toneMapping!==Ov||M0.isWebGL2===!0&&Rv.morphTargetsCount!==n1)&&(p1=!0):(p1=!0,Rv.__version=o0.version);let P1=Rv.currentProgram;p1===!0&&(P1=a1(o0,nm,pm));let f1=!1,v1=!1,Q1=!1;const Kv=P1.getUniforms(),O1=Rv.uniforms;if(W0.useProgram(P1.program)&&(f1=!0,v1=!0,Q1=!0),o0.id!==B&&(B=o0.id,v1=!0),f1||J!==Yp){Kv.setValue(Qp,"projectionMatrix",Yp.projectionMatrix),Kv.setValue(Qp,"viewMatrix",Yp.matrixWorldInverse);const j1=Kv.map.cameraPosition;j1!==void 0&&j1.setValue(Qp,Op.setFromMatrixPosition(Yp.matrixWorld)),M0.logarithmicDepthBuffer&&Kv.setValue(Qp,"logDepthBufFC",2/(Math.log(Yp.far+1)/Math.LN2)),(o0.isMeshPhongMaterial||o0.isMeshToonMaterial||o0.isMeshLambertMaterial||o0.isMeshBasicMaterial||o0.isMeshStandardMaterial||o0.isShaderMaterial)&&Kv.setValue(Qp,"isOrthographic",Yp.isOrthographicCamera===!0),J!==Yp&&(J=Yp,v1=!0,Q1=!0)}if(pm.isSkinnedMesh){Kv.setOptional(Qp,pm,"bindMatrix"),Kv.setOptional(Qp,pm,"bindMatrixInverse");const j1=pm.skeleton;j1&&(M0.floatVertexTextures?(j1.boneTexture===null&&j1.computeBoneTexture(),Kv.setValue(Qp,"boneTexture",j1.boneTexture,fm)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}pm.isBatchedMesh&&(Kv.setOptional(Qp,pm,"batchingTexture"),Kv.setValue(Qp,"batchingTexture",pm._matricesTexture,fm));const hg=dm.morphAttributes;if((hg.position!==void 0||hg.normal!==void 0||hg.color!==void 0&&M0.isWebGL2===!0)&&z0.update(pm,dm,P1),(v1||Rv.receiveShadow!==pm.receiveShadow)&&(Rv.receiveShadow=pm.receiveShadow,Kv.setValue(Qp,"receiveShadow",pm.receiveShadow)),o0.isMeshGouraudMaterial&&o0.envMap!==null&&(O1.envMap.value=dv,O1.flipEnvMap.value=dv.isCubeTexture&&dv.isRenderTargetTexture===!1?-1:1),v1&&(Kv.setValue(Qp,"toneMappingExposure",R.toneMappingExposure),Rv.needsLights&&Zv(O1,Q1),jm&&o0.fog===!0&&X0.refreshFogUniforms(O1,jm),X0.refreshMaterialUniforms(O1,o0,Ze,we,Wl),Ji.upload(Qp,Jv(Rv),O1,fm)),o0.isShaderMaterial&&o0.uniformsNeedUpdate===!0&&(Ji.upload(Qp,Jv(Rv),O1,fm),o0.uniformsNeedUpdate=!1),o0.isSpriteMaterial&&Kv.setValue(Qp,"center",pm.center),Kv.setValue(Qp,"modelViewMatrix",pm.modelViewMatrix),Kv.setValue(Qp,"normalMatrix",pm.normalMatrix),Kv.setValue(Qp,"modelMatrix",pm.matrixWorld),o0.isShaderMaterial||o0.isRawShaderMaterial){const j1=o0.uniformsGroups;for(let og=0,Ng=j1.length;og<Ng;og++)if(M0.isWebGL2){const Gy=j1[og];Xl.update(Gy,P1),Xl.bind(Gy,P1)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return P1}function Zv(Yp,nm){Yp.ambientLightColor.needsUpdate=nm,Yp.lightProbe.needsUpdate=nm,Yp.directionalLights.needsUpdate=nm,Yp.directionalLightShadows.needsUpdate=nm,Yp.pointLights.needsUpdate=nm,Yp.pointLightShadows.needsUpdate=nm,Yp.spotLights.needsUpdate=nm,Yp.spotLightShadows.needsUpdate=nm,Yp.rectAreaLights.needsUpdate=nm,Yp.hemisphereLights.needsUpdate=nm}function u1(Yp){return Yp.isMeshLambertMaterial||Yp.isMeshToonMaterial||Yp.isMeshPhongMaterial||Yp.isMeshStandardMaterial||Yp.isShadowMaterial||Yp.isShaderMaterial&&Yp.lights===!0}this.getActiveCubeFace=function(){return $},this.getActiveMipmapLevel=function(){return b},this.getRenderTarget=function(){return k},this.setRenderTargetTextures=function(Yp,nm,dm){F0.get(Yp.texture).__webglTexture=nm,F0.get(Yp.depthTexture).__webglTexture=dm;const o0=F0.get(Yp);o0.__hasExternalTextures=!0,o0.__autoAllocateDepthBuffer=dm===void 0,o0.__autoAllocateDepthBuffer||zp.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),o0.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(Yp,nm){const dm=F0.get(Yp);dm.__webglFramebuffer=nm,dm.__useDefaultFramebuffer=nm===void 0},this.setRenderTarget=function(Yp,nm=0,dm=0){k=Yp,$=nm,b=dm;let o0=!0,pm=null,jm=!1,iv=!1;if(Yp){const ov=F0.get(Yp);ov.__useDefaultFramebuffer!==void 0?(W0.bindFramebuffer(Qp.FRAMEBUFFER,null),o0=!1):ov.__webglFramebuffer===void 0?fm.setupRenderTarget(Yp):ov.__hasExternalTextures&&fm.rebindTextures(Yp,F0.get(Yp.texture).__webglTexture,F0.get(Yp.depthTexture).__webglTexture);const dv=Yp.texture;(dv.isData3DTexture||dv.isDataArrayTexture||dv.isCompressedArrayTexture)&&(iv=!0);const cv=F0.get(Yp).__webglFramebuffer;Yp.isWebGLCubeRenderTarget?(Array.isArray(cv[nm])?pm=cv[nm][dm]:pm=cv[nm],jm=!0):M0.isWebGL2&&Yp.samples>0&&fm.useMultisampledRTT(Yp)===!1?pm=F0.get(Yp).__webglMultisampledFramebuffer:Array.isArray(cv)?pm=cv[dm]:pm=cv,X.copy(Yp.viewport),ae.copy(Yp.scissor),He=Yp.scissorTest}else X.copy(Vt).multiplyScalar(Ze).floor(),ae.copy(_e).multiplyScalar(Ze).floor(),He=pr;if(W0.bindFramebuffer(Qp.FRAMEBUFFER,pm)&&M0.drawBuffers&&o0&&W0.drawBuffers(Yp,pm),W0.viewport(X),W0.scissor(ae),W0.setScissorTest(He),jm){const ov=F0.get(Yp.texture);Qp.framebufferTexture2D(Qp.FRAMEBUFFER,Qp.COLOR_ATTACHMENT0,Qp.TEXTURE_CUBE_MAP_POSITIVE_X+nm,ov.__webglTexture,dm)}else if(iv){const ov=F0.get(Yp.texture),dv=nm||0;Qp.framebufferTextureLayer(Qp.FRAMEBUFFER,Qp.COLOR_ATTACHMENT0,ov.__webglTexture,dm||0,dv)}B=-1},this.readRenderTargetPixels=function(Yp,nm,dm,o0,pm,jm,iv){if(!(Yp&&Yp.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let ov=F0.get(Yp).__webglFramebuffer;if(Yp.isWebGLCubeRenderTarget&&iv!==void 0&&(ov=ov[iv]),ov){W0.bindFramebuffer(Qp.FRAMEBUFFER,ov);try{const dv=Yp.texture,cv=dv.format,Cv=dv.type;if(cv!==Ft&&u0.convert(cv)!==Qp.getParameter(Qp.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const Lv=Cv===_i&&(zp.has("EXT_color_buffer_half_float")||M0.isWebGL2&&zp.has("EXT_color_buffer_float"));if(Cv!==un&&u0.convert(Cv)!==Qp.getParameter(Qp.IMPLEMENTATION_COLOR_READ_TYPE)&&!(Cv===Kt&&(M0.isWebGL2||zp.has("OES_texture_float")||zp.has("WEBGL_color_buffer_float")))&&!Lv){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}nm>=0&&nm<=Yp.width-o0&&dm>=0&&dm<=Yp.height-pm&&Qp.readPixels(nm,dm,o0,pm,u0.convert(cv),u0.convert(Cv),jm)}finally{const dv=k!==null?F0.get(k).__webglFramebuffer:null;W0.bindFramebuffer(Qp.FRAMEBUFFER,dv)}}},this.copyFramebufferToTexture=function(Yp,nm,dm=0){const o0=Math.pow(2,-dm),pm=Math.floor(nm.image.width*o0),jm=Math.floor(nm.image.height*o0);fm.setTexture2D(nm,0),Qp.copyTexSubImage2D(Qp.TEXTURE_2D,dm,0,0,Yp.x,Yp.y,pm,jm),W0.unbindTexture()},this.copyTextureToTexture=function(Yp,nm,dm,o0=0){const pm=nm.image.width,jm=nm.image.height,iv=u0.convert(dm.format),ov=u0.convert(dm.type);fm.setTexture2D(dm,0),Qp.pixelStorei(Qp.UNPACK_FLIP_Y_WEBGL,dm.flipY),Qp.pixelStorei(Qp.UNPACK_PREMULTIPLY_ALPHA_WEBGL,dm.premultiplyAlpha),Qp.pixelStorei(Qp.UNPACK_ALIGNMENT,dm.unpackAlignment),nm.isDataTexture?Qp.texSubImage2D(Qp.TEXTURE_2D,o0,Yp.x,Yp.y,pm,jm,iv,ov,nm.image.data):nm.isCompressedTexture?Qp.compressedTexSubImage2D(Qp.TEXTURE_2D,o0,Yp.x,Yp.y,nm.mipmaps[0].width,nm.mipmaps[0].height,iv,nm.mipmaps[0].data):Qp.texSubImage2D(Qp.TEXTURE_2D,o0,Yp.x,Yp.y,iv,ov,nm.image),o0===0&&dm.generateMipmaps&&Qp.generateMipmap(Qp.TEXTURE_2D),W0.unbindTexture()},this.copyTextureToTexture3D=function(Yp,nm,dm,o0,pm=0){if(R.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const jm=Math.round(Yp.max.x-Yp.min.x),iv=Math.round(Yp.max.y-Yp.min.y),ov=Yp.max.z-Yp.min.z+1,dv=u0.convert(o0.format),cv=u0.convert(o0.type);let Cv;if(o0.isData3DTexture)fm.setTexture3D(o0,0),Cv=Qp.TEXTURE_3D;else if(o0.isDataArrayTexture||o0.isCompressedArrayTexture)fm.setTexture2DArray(o0,0),Cv=Qp.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}Qp.pixelStorei(Qp.UNPACK_FLIP_Y_WEBGL,o0.flipY),Qp.pixelStorei(Qp.UNPACK_PREMULTIPLY_ALPHA_WEBGL,o0.premultiplyAlpha),Qp.pixelStorei(Qp.UNPACK_ALIGNMENT,o0.unpackAlignment);const Lv=Qp.getParameter(Qp.UNPACK_ROW_LENGTH),Vm=Qp.getParameter(Qp.UNPACK_IMAGE_HEIGHT),wv=Qp.getParameter(Qp.UNPACK_SKIP_PIXELS),Ov=Qp.getParameter(Qp.UNPACK_SKIP_ROWS),X1=Qp.getParameter(Qp.UNPACK_SKIP_IMAGES),n1=dm.isCompressedTexture?dm.mipmaps[pm]:dm.image;Qp.pixelStorei(Qp.UNPACK_ROW_LENGTH,n1.width),Qp.pixelStorei(Qp.UNPACK_IMAGE_HEIGHT,n1.height),Qp.pixelStorei(Qp.UNPACK_SKIP_PIXELS,Yp.min.x),Qp.pixelStorei(Qp.UNPACK_SKIP_ROWS,Yp.min.y),Qp.pixelStorei(Qp.UNPACK_SKIP_IMAGES,Yp.min.z),dm.isDataTexture||dm.isData3DTexture?Qp.texSubImage3D(Cv,pm,nm.x,nm.y,nm.z,jm,iv,ov,dv,cv,n1.data):o0.isCompressedArrayTexture?Qp.compressedTexSubImage3D(Cv,pm,nm.x,nm.y,nm.z,jm,iv,ov,dv,n1.data):Qp.texSubImage3D(Cv,pm,nm.x,nm.y,nm.z,jm,iv,ov,dv,cv,n1),Qp.pixelStorei(Qp.UNPACK_ROW_LENGTH,Lv),Qp.pixelStorei(Qp.UNPACK_IMAGE_HEIGHT,Vm),Qp.pixelStorei(Qp.UNPACK_SKIP_PIXELS,wv),Qp.pixelStorei(Qp.UNPACK_SKIP_ROWS,Ov),Qp.pixelStorei(Qp.UNPACK_SKIP_IMAGES,X1),pm===0&&o0.generateMipmaps&&Qp.generateMipmap(Cv),W0.unbindTexture()},this.initTexture=function(Yp){Yp.isCubeTexture?fm.setTextureCube(Yp,0):Yp.isData3DTexture?fm.setTexture3D(Yp,0):Yp.isDataArrayTexture||Yp.isCompressedArrayTexture?fm.setTexture2DArray(Yp,0):fm.setTexture2D(Yp,0),W0.unbindTexture()},this.resetState=function(){$=0,b=0,k=null,W0.reset(),x0.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Zt}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===cs?"display-p3":"srgb",t.unpackColorSpace=je.workingColorSpace===cr?"display-p3":"srgb"}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class up extends Po{}up.prototype.isWebGL1Renderer=!0;class hp extends Mt{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new $t,this.environmentRotation=new $t,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class ar extends xi{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new qe(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const Va=new U,ka=new U,Wa=new st,jr=new hs,Yi=new ur;class ds extends Mt{constructor(e=new Tt,t=new ar){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,a=[0];for(let s=1,o=t.count;s<o;s++)Va.fromBufferAttribute(t,s-1),ka.fromBufferAttribute(t,s),a[s]=a[s-1],a[s]+=Va.distanceTo(ka);e.setAttribute("lineDistance",new ut(a,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const a=this.geometry,s=this.matrixWorld,o=e.params.Line.threshold,f=a.drawRange;if(a.boundingSphere===null&&a.computeBoundingSphere(),Yi.copy(a.boundingSphere),Yi.applyMatrix4(s),Yi.radius+=o,e.ray.intersectsSphere(Yi)===!1)return;Wa.copy(s).invert(),jr.copy(e.ray).applyMatrix4(Wa);const u=o/((this.scale.x+this.scale.y+this.scale.z)/3),h=u*u,x=new U,m=new U,w=new U,A=new U,D=this.isLineSegments?2:1,I=a.index,y=a.attributes.position;if(I!==null){const l=Math.max(0,f.start),c=Math.min(I.count,f.start+f.count);for(let L=l,R=c-1;L<R;L+=D){const F=I.getX(L),$=I.getX(L+1);if(x.fromBufferAttribute(y,F),m.fromBufferAttribute(y,$),jr.distanceSqToSegment(x,m,A,w)>h)continue;A.applyMatrix4(this.matrixWorld);const b=e.ray.origin.distanceTo(A);b<e.near||b>e.far||t.push({distance:b,point:w.clone().applyMatrix4(this.matrixWorld),index:L,face:null,faceIndex:null,object:this})}}else{const l=Math.max(0,f.start),c=Math.min(y.count,f.start+f.count);for(let L=l,R=c-1;L<R;L+=D){if(x.fromBufferAttribute(y,L),m.fromBufferAttribute(y,L+1),jr.distanceSqToSegment(x,m,A,w)>h)continue;A.applyMatrix4(this.matrixWorld);const F=e.ray.origin.distanceTo(A);F<e.near||F>e.far||t.push({distance:F,point:w.clone().applyMatrix4(this.matrixWorld),index:L,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const a=e[t[0]];if(a!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=a.length;s<o;s++){const f=a[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[f]=s}}}}}const Xa=new U,Ya=new U;class fp extends ds{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,a=[];for(let s=0,o=t.count;s<o;s+=2)Xa.fromBufferAttribute(t,s),Ya.fromBufferAttribute(t,s+1),a[s]=s===0?0:a[s-1],a[s+1]=a[s]+Xa.distanceTo(Ya);e.setAttribute("lineDistance",new ut(a,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class ps extends Tt{constructor(e=1,t=1,a=1,s=32,o=1,f=!1,u=0,h=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:a,radialSegments:s,heightSegments:o,openEnded:f,thetaStart:u,thetaLength:h};const x=this;s=Math.floor(s),o=Math.floor(o);const m=[],w=[],A=[],D=[];let I=0;const y=[],l=a/2;let c=0;L(),f===!1&&(e>0&&R(!0),t>0&&R(!1)),this.setIndex(m),this.setAttribute("position",new ut(w,3)),this.setAttribute("normal",new ut(A,3)),this.setAttribute("uv",new ut(D,2));function L(){const F=new U,$=new U;let b=0;const k=(t-e)/a;for(let B=0;B<=o;B++){const J=[],X=B/o,ae=X*(t-e)+e;for(let He=0;He<=s;He++){const Pe=He/s,ue=Pe*h+u,Oe=Math.sin(ue),we=Math.cos(ue);$.x=ae*Oe,$.y=-X*a+l,$.z=ae*we,w.push($.x,$.y,$.z),F.set(Oe,k,we).normalize(),A.push(F.x,F.y,F.z),D.push(Pe,1-X),J.push(I++)}y.push(J)}for(let B=0;B<s;B++)for(let J=0;J<o;J++){const X=y[J][B],ae=y[J+1][B],He=y[J+1][B+1],Pe=y[J][B+1];m.push(X,ae,Pe),m.push(ae,He,Pe),b+=6}x.addGroup(c,b,0),c+=b}function R(F){const $=I,b=new Ie,k=new U;let B=0;const J=F===!0?e:t,X=F===!0?1:-1;for(let He=1;He<=s;He++)w.push(0,l*X,0),A.push(0,X,0),D.push(.5,.5),I++;const ae=I;for(let He=0;He<=s;He++){const Pe=He/s*h+u,ue=Math.cos(Pe),Oe=Math.sin(Pe);k.x=J*Oe,k.y=l*X,k.z=J*ue,w.push(k.x,k.y,k.z),A.push(0,X,0),b.x=ue*.5+.5,b.y=Oe*.5*X+.5,D.push(b.x,b.y),I++}for(let He=0;He<s;He++){const Pe=$+He,ue=ae+He;F===!0?m.push(ue,ue+1,Pe):m.push(ue+1,ue,Pe),B+=3}x.addGroup(c,B,F===!0?1:2),c+=B}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ps(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}const qi=new U,ji=new U,Kr=new U,Ki=new Ot;class dp extends Tt{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const a=Math.pow(10,4),s=Math.cos(ei*t),o=e.getIndex(),f=e.getAttribute("position"),u=o?o.count:f.count,h=[0,0,0],x=["a","b","c"],m=new Array(3),w={},A=[];for(let D=0;D<u;D+=3){o?(h[0]=o.getX(D),h[1]=o.getX(D+1),h[2]=o.getX(D+2)):(h[0]=D,h[1]=D+1,h[2]=D+2);const{a:I,b:y,c:l}=Ki;if(I.fromBufferAttribute(f,h[0]),y.fromBufferAttribute(f,h[1]),l.fromBufferAttribute(f,h[2]),Ki.getNormal(Kr),m[0]=`${Math.round(I.x*a)},${Math.round(I.y*a)},${Math.round(I.z*a)}`,m[1]=`${Math.round(y.x*a)},${Math.round(y.y*a)},${Math.round(y.z*a)}`,m[2]=`${Math.round(l.x*a)},${Math.round(l.y*a)},${Math.round(l.z*a)}`,!(m[0]===m[1]||m[1]===m[2]||m[2]===m[0]))for(let c=0;c<3;c++){const L=(c+1)%3,R=m[c],F=m[L],$=Ki[x[c]],b=Ki[x[L]],k=`${R}_${F}`,B=`${F}_${R}`;B in w&&w[B]?(Kr.dot(w[B].normal)<=s&&(A.push($.x,$.y,$.z),A.push(b.x,b.y,b.z)),w[B]=null):k in w||(w[k]={index0:h[c],index1:h[L],normal:Kr.clone()})}}for(const D in w)if(w[D]){const{index0:I,index1:y}=w[D];qi.fromBufferAttribute(f,I),ji.fromBufferAttribute(f,y),A.push(qi.x,qi.y,qi.z),A.push(ji.x,ji.y,ji.z)}this.setAttribute("position",new ut(A,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class or extends Tt{constructor(e=1,t=32,a=16,s=0,o=Math.PI*2,f=0,u=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:a,phiStart:s,phiLength:o,thetaStart:f,thetaLength:u},t=Math.max(3,Math.floor(t)),a=Math.max(2,Math.floor(a));const h=Math.min(f+u,Math.PI);let x=0;const m=[],w=new U,A=new U,D=[],I=[],y=[],l=[];for(let c=0;c<=a;c++){const L=[],R=c/a;let F=0;c===0&&f===0?F=.5/t:c===a&&h===Math.PI&&(F=-.5/t);for(let $=0;$<=t;$++){const b=$/t;w.x=-e*Math.cos(s+b*o)*Math.sin(f+R*u),w.y=e*Math.cos(f+R*u),w.z=e*Math.sin(s+b*o)*Math.sin(f+R*u),I.push(w.x,w.y,w.z),A.copy(w).normalize(),y.push(A.x,A.y,A.z),l.push(b+F,1-R),L.push(x++)}m.push(L)}for(let c=0;c<a;c++)for(let L=0;L<t;L++){const R=m[c][L+1],F=m[c][L],$=m[c+1][L],b=m[c+1][L+1];(c!==0||f>0)&&D.push(R,F,b),(c!==a-1||h<Math.PI)&&D.push(F,$,b)}this.setIndex(D),this.setAttribute("position",new ut(I,3)),this.setAttribute("normal",new ut(y,3)),this.setAttribute("uv",new ut(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new or(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class qa{constructor(e=1,t=0,a=0){return this.radius=e,this.phi=t,this.theta=a,this}set(e,t,a){return this.radius=e,this.phi=t,this.theta=a,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,a){return this.radius=Math.sqrt(e*e+t*t+a*a),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,a),this.phi=Math.acos(_t(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}const ja=new U;let Zi,Zr;class Ka extends Mt{constructor(e=new U(0,0,1),t=new U(0,0,0),a=1,s=16776960,o=a*.2,f=o*.2){super(),this.type="ArrowHelper",Zi===void 0&&(Zi=new Tt,Zi.setAttribute("position",new ut([0,0,0,0,1,0],3)),Zr=new ps(0,.5,1,5,1),Zr.translate(0,-.5,0)),this.position.copy(t),this.line=new ds(Zi,new ar({color:s,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Rt(Zr,new ni({color:s,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(a,o,f)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{ja.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(ja,t)}}setLength(e,t=e*.2,a=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(a,t,a),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:os}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=os);const Za={type:"change"},$r={type:"start"},$a={type:"end"},$i=new hs,Ja=new sn,pp=Math.cos(70*Kl.DEG2RAD);class mp extends Ln{constructor(e,t){super(),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new U,this.cursor=new U,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:Dn.ROTATE,MIDDLE:Dn.DOLLY,RIGHT:Dn.PAN},this.touches={ONE:Un.ROTATE,TWO:Un.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return u.phi},this.getAzimuthalAngle=function(){return u.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(Xl){Xl.addEventListener("keydown",Gl),this._domElementKeyEvents=Xl},this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",Gl),this._domElementKeyEvents=null},this.saveState=function(){a.target0.copy(a.target),a.position0.copy(a.object.position),a.zoom0=a.object.zoom},this.reset=function(){a.target.copy(a.target0),a.object.position.copy(a.position0),a.object.zoom=a.zoom0,a.object.updateProjectionMatrix(),a.dispatchEvent(Za),a.update(),o=s.NONE},this.update=(function(){const Xl=new U,Bp=new Pn().setFromUnitVectors(e.up,new U(0,1,0)),L0=Bp.clone().invert(),kl=new U,Np=new Pn,V0=new U,Ke=2*Math.PI;return function(g0=null){const d0=a.object.position;Xl.copy(d0).sub(a.target),Xl.applyQuaternion(Bp),u.setFromVector3(Xl),a.autoRotate&&o===s.NONE&&He(X(g0)),a.enableDamping?(u.theta+=h.theta*a.dampingFactor,u.phi+=h.phi*a.dampingFactor):(u.theta+=h.theta,u.phi+=h.phi);let Vl=a.minAzimuthAngle,jp=a.maxAzimuthAngle;isFinite(Vl)&&isFinite(jp)&&(Vl<-Math.PI?Vl+=Ke:Vl>Math.PI&&(Vl-=Ke),jp<-Math.PI?jp+=Ke:jp>Math.PI&&(jp-=Ke),Vl<=jp?u.theta=Math.max(Vl,Math.min(jp,u.theta)):u.theta=u.theta>(Vl+jp)/2?Math.max(Vl,u.theta):Math.min(jp,u.theta)),u.phi=Math.max(a.minPolarAngle,Math.min(a.maxPolarAngle,u.phi)),u.makeSafe(),a.enableDamping===!0?a.target.addScaledVector(m,a.dampingFactor):a.target.add(m),a.target.sub(a.cursor),a.target.clampLength(a.minTargetRadius,a.maxTargetRadius),a.target.add(a.cursor);let K0=!1;if(a.zoomToCursor&&b||a.object.isOrthographicCamera)u.radius=Vt(u.radius);else{const Pm=u.radius;u.radius=Vt(u.radius*x),K0=Pm!=u.radius}if(Xl.setFromSpherical(u),Xl.applyQuaternion(L0),d0.copy(a.target).add(Xl),a.object.lookAt(a.target),a.enableDamping===!0?(h.theta*=1-a.dampingFactor,h.phi*=1-a.dampingFactor,m.multiplyScalar(1-a.dampingFactor)):(h.set(0,0,0),m.set(0,0,0)),a.zoomToCursor&&b){let Pm=null;if(a.object.isPerspectiveCamera){const Cm=Xl.length();Pm=Vt(Cm*x);const Fm=Cm-Pm;a.object.position.addScaledVector(F,Fm),a.object.updateMatrixWorld(),K0=!!Fm}else if(a.object.isOrthographicCamera){const Cm=new U($.x,$.y,0);Cm.unproject(a.object);const Fm=a.object.zoom;a.object.zoom=Math.max(a.minZoom,Math.min(a.maxZoom,a.object.zoom/x)),a.object.updateProjectionMatrix(),K0=Fm!==a.object.zoom;const ev=new U($.x,$.y,0);ev.unproject(a.object),a.object.position.sub(ev).add(Cm),a.object.updateMatrixWorld(),Pm=Xl.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),a.zoomToCursor=!1;Pm!==null&&(this.screenSpacePanning?a.target.set(0,0,-1).transformDirection(a.object.matrix).multiplyScalar(Pm).add(a.object.position):($i.origin.copy(a.object.position),$i.direction.set(0,0,-1).transformDirection(a.object.matrix),Math.abs(a.object.up.dot($i.direction))<pp?e.lookAt(a.target):(Ja.setFromNormalAndCoplanarPoint(a.object.up,a.target),$i.intersectPlane(Ja,a.target))))}else if(a.object.isOrthographicCamera){const Pm=a.object.zoom;a.object.zoom=Math.max(a.minZoom,Math.min(a.maxZoom,a.object.zoom/x)),Pm!==a.object.zoom&&(a.object.updateProjectionMatrix(),K0=!0)}return x=1,b=!1,K0||kl.distanceToSquared(a.object.position)>f||8*(1-Np.dot(a.object.quaternion))>f||V0.distanceToSquared(a.target)>f?(a.dispatchEvent(Za),kl.copy(a.object.position),Np.copy(a.object.quaternion),V0.copy(a.target),!0):!1}})(),this.dispose=function(){a.domElement.removeEventListener("contextmenu",v0),a.domElement.removeEventListener("pointerdown",fm),a.domElement.removeEventListener("pointercancel",Ap),a.domElement.removeEventListener("wheel",a0),a.domElement.removeEventListener("pointermove",cm),a.domElement.removeEventListener("pointerup",Ap),a.domElement.getRootNode().removeEventListener("keydown",X0,{capture:!0}),a._domElementKeyEvents!==null&&(a._domElementKeyEvents.removeEventListener("keydown",Gl),a._domElementKeyEvents=null)};const a=this,s={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let o=s.NONE;const f=1e-6,u=new qa,h=new qa;let x=1;const m=new U,w=new Ie,A=new Ie,D=new Ie,I=new Ie,y=new Ie,l=new Ie,c=new Ie,L=new Ie,R=new Ie,F=new U,$=new Ie;let b=!1;const k=[],B={};let J=!1;function X(Xl){return Xl!==null?2*Math.PI/60*a.autoRotateSpeed*Xl:2*Math.PI/60/60*a.autoRotateSpeed}function ae(Xl){const Bp=Math.abs(Xl*.01);return Math.pow(.95,a.zoomSpeed*Bp)}function He(Xl){h.theta-=Xl}function Pe(Xl){h.phi-=Xl}const ue=(function(){const Xl=new U;return function(Bp,L0){Xl.setFromMatrixColumn(L0,0),Xl.multiplyScalar(-Bp),m.add(Xl)}})(),Oe=(function(){const Xl=new U;return function(Bp,L0){a.screenSpacePanning===!0?Xl.setFromMatrixColumn(L0,1):(Xl.setFromMatrixColumn(L0,0),Xl.crossVectors(a.object.up,Xl)),Xl.multiplyScalar(Bp),m.add(Xl)}})(),we=(function(){const Xl=new U;return function(Bp,L0){const kl=a.domElement;if(a.object.isPerspectiveCamera){const Np=a.object.position;Xl.copy(Np).sub(a.target);let V0=Xl.length();V0*=Math.tan(a.object.fov/2*Math.PI/180),ue(2*Bp*V0/kl.clientHeight,a.object.matrix),Oe(2*L0*V0/kl.clientHeight,a.object.matrix)}else a.object.isOrthographicCamera?(ue(Bp*(a.object.right-a.object.left)/a.object.zoom/kl.clientWidth,a.object.matrix),Oe(L0*(a.object.top-a.object.bottom)/a.object.zoom/kl.clientHeight,a.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),a.enablePan=!1)}})();function Ze(Xl){a.object.isPerspectiveCamera||a.object.isOrthographicCamera?x/=Xl:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),a.enableZoom=!1)}function it(Xl){a.object.isPerspectiveCamera||a.object.isOrthographicCamera?x*=Xl:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),a.enableZoom=!1)}function lt(Xl,Bp){if(!a.zoomToCursor)return;b=!0;const L0=a.domElement.getBoundingClientRect(),kl=Xl-L0.left,Np=Bp-L0.top,V0=L0.width,Ke=L0.height;$.x=kl/V0*2-1,$.y=-(Np/Ke)*2+1,F.set($.x,$.y,1).unproject(a.object).sub(a.object.position).normalize()}function Vt(Xl){return Math.max(a.minDistance,Math.min(a.maxDistance,Xl))}function _e(Xl){w.set(Xl.clientX,Xl.clientY)}function pr(Xl){lt(Xl.clientX,Xl.clientX),c.set(Xl.clientX,Xl.clientY)}function _s(Xl){I.set(Xl.clientX,Xl.clientY)}function Ei(Xl){A.set(Xl.clientX,Xl.clientY),D.subVectors(A,w).multiplyScalar(a.rotateSpeed);const Bp=a.domElement;He(2*Math.PI*D.x/Bp.clientHeight),Pe(2*Math.PI*D.y/Bp.clientHeight),w.copy(A),a.update()}function Bl(Xl){L.set(Xl.clientX,Xl.clientY),R.subVectors(L,c),R.y>0?Ze(ae(R.y)):R.y<0&&it(ae(R.y)),c.copy(L),a.update()}function Wl(Xl){y.set(Xl.clientX,Xl.clientY),l.subVectors(y,I).multiplyScalar(a.panSpeed),we(l.x,l.y),I.copy(y),a.update()}function Ep(Xl){lt(Xl.clientX,Xl.clientY),Xl.deltaY<0?it(ae(Xl.deltaY)):Xl.deltaY>0&&Ze(ae(Xl.deltaY)),a.update()}function Lp(Xl){let Bp=!1;switch(Xl.code){case a.keys.UP:Xl.ctrlKey||Xl.metaKey||Xl.shiftKey?Pe(2*Math.PI*a.rotateSpeed/a.domElement.clientHeight):we(0,a.keyPanSpeed),Bp=!0;break;case a.keys.BOTTOM:Xl.ctrlKey||Xl.metaKey||Xl.shiftKey?Pe(-2*Math.PI*a.rotateSpeed/a.domElement.clientHeight):we(0,-a.keyPanSpeed),Bp=!0;break;case a.keys.LEFT:Xl.ctrlKey||Xl.metaKey||Xl.shiftKey?He(2*Math.PI*a.rotateSpeed/a.domElement.clientHeight):we(a.keyPanSpeed,0),Bp=!0;break;case a.keys.RIGHT:Xl.ctrlKey||Xl.metaKey||Xl.shiftKey?He(-2*Math.PI*a.rotateSpeed/a.domElement.clientHeight):we(-a.keyPanSpeed,0),Bp=!0;break}Bp&&(Xl.preventDefault(),a.update())}function Op(Xl){if(k.length===1)w.set(Xl.pageX,Xl.pageY);else{const Bp=x0(Xl),L0=.5*(Xl.pageX+Bp.x),kl=.5*(Xl.pageY+Bp.y);w.set(L0,kl)}}function R0(Xl){if(k.length===1)I.set(Xl.pageX,Xl.pageY);else{const Bp=x0(Xl),L0=.5*(Xl.pageX+Bp.x),kl=.5*(Xl.pageY+Bp.y);I.set(L0,kl)}}function N0(Xl){const Bp=x0(Xl),L0=Xl.pageX-Bp.x,kl=Xl.pageY-Bp.y,Np=Math.sqrt(L0*L0+kl*kl);c.set(0,Np)}function Qp(Xl){a.enableZoom&&N0(Xl),a.enablePan&&R0(Xl)}function O0(Xl){a.enableZoom&&N0(Xl),a.enableRotate&&Op(Xl)}function zp(Xl){if(k.length==1)A.set(Xl.pageX,Xl.pageY);else{const L0=x0(Xl),kl=.5*(Xl.pageX+L0.x),Np=.5*(Xl.pageY+L0.y);A.set(kl,Np)}D.subVectors(A,w).multiplyScalar(a.rotateSpeed);const Bp=a.domElement;He(2*Math.PI*D.x/Bp.clientHeight),Pe(2*Math.PI*D.y/Bp.clientHeight),w.copy(A)}function M0(Xl){if(k.length===1)y.set(Xl.pageX,Xl.pageY);else{const Bp=x0(Xl),L0=.5*(Xl.pageX+Bp.x),kl=.5*(Xl.pageY+Bp.y);y.set(L0,kl)}l.subVectors(y,I).multiplyScalar(a.panSpeed),we(l.x,l.y),I.copy(y)}function W0(Xl){const Bp=x0(Xl),L0=Xl.pageX-Bp.x,kl=Xl.pageY-Bp.y,Np=Math.sqrt(L0*L0+kl*kl);L.set(0,Np),R.set(0,Math.pow(L.y/c.y,a.zoomSpeed)),Ze(R.y),c.copy(L);const V0=(Xl.pageX+Bp.x)*.5,Ke=(Xl.pageY+Bp.y)*.5;lt(V0,Ke)}function im(Xl){a.enableZoom&&W0(Xl),a.enablePan&&M0(Xl)}function F0(Xl){a.enableZoom&&W0(Xl),a.enableRotate&&zp(Xl)}function fm(Xl){a.enabled!==!1&&(k.length===0&&(a.domElement.setPointerCapture(Xl.pointerId),a.domElement.addEventListener("pointermove",cm),a.domElement.addEventListener("pointerup",Ap)),!Uo(Xl)&&(z0(Xl),Xl.pointerType==="touch"?Mp(Xl):Io(Xl)))}function cm(Xl){a.enabled!==!1&&(Xl.pointerType==="touch"?_0(Xl):p0(Xl))}function Ap(Xl){switch(sm(Xl),k.length){case 0:a.domElement.releasePointerCapture(Xl.pointerId),a.domElement.removeEventListener("pointermove",cm),a.domElement.removeEventListener("pointerup",Ap),a.dispatchEvent($a),o=s.NONE;break;case 1:const Bp=k[0],L0=B[Bp];Mp({pointerId:Bp,pageX:L0.x,pageY:L0.y});break}}function Io(Xl){let Bp;switch(Xl.button){case 0:Bp=a.mouseButtons.LEFT;break;case 1:Bp=a.mouseButtons.MIDDLE;break;case 2:Bp=a.mouseButtons.RIGHT;break;default:Bp=-1}switch(Bp){case Dn.DOLLY:if(a.enableZoom===!1)return;pr(Xl),o=s.DOLLY;break;case Dn.ROTATE:if(Xl.ctrlKey||Xl.metaKey||Xl.shiftKey){if(a.enablePan===!1)return;_s(Xl),o=s.PAN}else{if(a.enableRotate===!1)return;_e(Xl),o=s.ROTATE}break;case Dn.PAN:if(Xl.ctrlKey||Xl.metaKey||Xl.shiftKey){if(a.enableRotate===!1)return;_e(Xl),o=s.ROTATE}else{if(a.enablePan===!1)return;_s(Xl),o=s.PAN}break;default:o=s.NONE}o!==s.NONE&&a.dispatchEvent($r)}function p0(Xl){switch(o){case s.ROTATE:if(a.enableRotate===!1)return;Ei(Xl);break;case s.DOLLY:if(a.enableZoom===!1)return;Bl(Xl);break;case s.PAN:if(a.enablePan===!1)return;Wl(Xl);break}}function a0(Xl){a.enabled===!1||a.enableZoom===!1||o!==s.NONE||(Xl.preventDefault(),a.dispatchEvent($r),Ep(rm(Xl)),a.dispatchEvent($a))}function rm(Xl){const Bp=Xl.deltaMode,L0={clientX:Xl.clientX,clientY:Xl.clientY,deltaY:Xl.deltaY};switch(Bp){case 1:L0.deltaY*=16;break;case 2:L0.deltaY*=100;break}return Xl.ctrlKey&&!J&&(L0.deltaY*=10),L0}function X0(Xl){Xl.key==="Control"&&(J=!0,a.domElement.getRootNode().addEventListener("keyup",Nl,{passive:!0,capture:!0}))}function Nl(Xl){Xl.key==="Control"&&(J=!1,a.domElement.getRootNode().removeEventListener("keyup",Nl,{passive:!0,capture:!0}))}function Gl(Xl){a.enabled===!1||a.enablePan===!1||Lp(Xl)}function Mp(Xl){switch(u0(Xl),k.length){case 1:switch(a.touches.ONE){case Un.ROTATE:if(a.enableRotate===!1)return;Op(Xl),o=s.TOUCH_ROTATE;break;case Un.PAN:if(a.enablePan===!1)return;R0(Xl),o=s.TOUCH_PAN;break;default:o=s.NONE}break;case 2:switch(a.touches.TWO){case Un.DOLLY_PAN:if(a.enableZoom===!1&&a.enablePan===!1)return;Qp(Xl),o=s.TOUCH_DOLLY_PAN;break;case Un.DOLLY_ROTATE:if(a.enableZoom===!1&&a.enableRotate===!1)return;O0(Xl),o=s.TOUCH_DOLLY_ROTATE;break;default:o=s.NONE}break;default:o=s.NONE}o!==s.NONE&&a.dispatchEvent($r)}function _0(Xl){switch(u0(Xl),o){case s.TOUCH_ROTATE:if(a.enableRotate===!1)return;zp(Xl),a.update();break;case s.TOUCH_PAN:if(a.enablePan===!1)return;M0(Xl),a.update();break;case s.TOUCH_DOLLY_PAN:if(a.enableZoom===!1&&a.enablePan===!1)return;im(Xl),a.update();break;case s.TOUCH_DOLLY_ROTATE:if(a.enableZoom===!1&&a.enableRotate===!1)return;F0(Xl),a.update();break;default:o=s.NONE}}function v0(Xl){a.enabled!==!1&&Xl.preventDefault()}function z0(Xl){k.push(Xl.pointerId)}function sm(Xl){delete B[Xl.pointerId];for(let Bp=0;Bp<k.length;Bp++)if(k[Bp]==Xl.pointerId){k.splice(Bp,1);return}}function Uo(Xl){for(let Bp=0;Bp<k.length;Bp++)if(k[Bp]==Xl.pointerId)return!0;return!1}function u0(Xl){let Bp=B[Xl.pointerId];Bp===void 0&&(Bp=new Ie,B[Xl.pointerId]=Bp),Bp.set(Xl.pageX,Xl.pageY)}function x0(Xl){const Bp=Xl.pointerId===k[0]?k[1]:k[0];return B[Bp]}a.domElement.addEventListener("contextmenu",v0),a.domElement.addEventListener("pointerdown",fm),a.domElement.addEventListener("pointercancel",Ap),a.domElement.addEventListener("wheel",a0,{passive:!1}),a.domElement.getRootNode().addEventListener("keydown",X0,{passive:!0,capture:!0}),this.update()}}var _p=function(r,e){return e=typeof e<"u"?e:!1,r=r.replace(/GAMMA/gi,"&Gamma;"),r=r.replace(/DELTA/gi,"&Delta;"),r=r.replace(/SIGMA/gi,"&Sigma;"),r=r.replace(/LAMBDA/gi,"&Lambda;"),r=r.replace(/\-/gi,"&mdash;"),e?r=r.replace(/_(.)/gi,function(t,a,s,o){return'<tspan baseline-shift="sub">'+a+"</tspan>"}):r=r.replace(/_(.)/gi,function(t,a,s,o){return"<sub>"+a+"</sub>"}),r},gp=function(a,s,t){var a=a,s=s;t==null&&(t={});var o=t.showAxes??!0,f=t.showBVectors??!0,u=t.showPathpoints??!1,h=t.disableInteractOverlay??!1,x=!1,m=[],w=new ni({color:13975119,opacity:.15,transparent:!0,side:Gt}),A=new ar({color:3355443,opacity:1,transparent:!1,linewidth:1}),D=new ar({color:285405,opacity:1,transparent:!1}),I=new ni({color:3311805,opacity:1,transparent:!1}),y=new ni({color:8925746,opacity:1,transparent:!1}),l=null,c=null,L=null;this.resizeRenderer=function(){if(a){var k=window.devicePixelRatio||1,B=a.offsetWidth,J=a.offsetHeight;L&&(c.aspect=B/J,c.updateProjectionMatrix(),L.setSize(B*k,J*k),L.domElement.style.width=B+"px",L.domElement.style.height=J+"px",L.domElement.width=B*k,L.domElement.height=J*k,b())}};var R=function(k,B){B=typeof B<"u"?B:"#000000";var J;{var J=document.createElement("div");J.style.position="absolute",J.style.fontFamily="'Helvetica Neue', Helvetica, Arial, sans-serif",J.style.color=B,J.style.width=100,J.style.height=100,J.style.fontSize="12px",J.innerHTML=k,J.style.top="-100px",J.style.left="-100px",J.style.userSelect="none",J.style.userSelect="none",J.style.webkitUserSelect="none",J.style.MozUserSelect="none",J.setAttribute("unselectable","on"),J.style.pointerEvents="none"}return J},F=function(k){var B=document.createElement("div");B.classList.add(k),B.style.position="absolute",B.style.fontFamily="'Helvetica Neue', Helvetica, Arial, sans-serif",B.style.zIndex=1,B.style.width="100%",B.style.height="100%",B.style.display="table",B.style.top="0px",B.style.left="0px",B.style.textAlign="center",B.style.verticalAlign="middle",B.style.userSelect="none",B.style.userSelect="none",B.style.webkitUserSelect="none",B.style.MozUserSelect="none",B.setAttribute("unselectable","on");var J=document.createElement("span");return J.innerHTML="Double click to toggle interaction",J.style.color="rgb(80, 80, 80)",J.style.fontSize="24px",J.style.fontWeight="bold",J.style.backgroundColor="rgba(230,230,230,0.5)",J.style.display="table-cell",J.style.verticalAlign="middle",J.style.lineHeight="normal",J.style.userSelect="none",J.style.userSelect="none",J.style.webkitUserSelect="none",J.style.MozUserSelect="none",J.setAttribute("unselectable","on"),J.onmouseover=function(){this.style.backgroundColor="rgba(230,230,230,0.5)",this.innerHTML="Double click to toggle interaction"},J.onmouseleave=function(){this.style.backgroundColor="rgba(255,255,255,0.01)",this.innerHTML=""},B.appendChild(J),B};this.loadBZ=function(k){if(k==null||Object.keys(k).length===0||a==null||a.id==""||s==null)return;let B=k.b1,J=k.b2,X=k.b3,ae=k.faces_data,He=k.kpoints,Pe=k.path,ue=k.explicit_kpoints_abs;var Oe=window.devicePixelRatio||1;s.innerHTML="";for(var we=a;we.firstChild;)we.removeChild(we.firstChild);m=[],l=new hp;let Ze=we.offsetWidth,it=we.offsetHeight;c=new Lt(45,Ze/it,.01,1e3),c.position.z=3,L=new Po({alpha:!0,preserveDrawingBuffer:!0}),L.setClearColor(16777215,0),L.setSize(Ze*Oe,it*Oe),L.domElement.style.width=Ze+"px",L.domElement.style.height=it+"px",L.domElement.width=Ze*Oe,L.domElement.height=it*Oe,we.appendChild(L.domElement);let lt=new mp(c,L.domElement);lt.addEventListener("change",b),lt.enableDamping=!0,lt.dampingFactor=.25,lt.enableZoom=!0;let Vt=Math.sqrt(Math.max(Math.pow(B[0],2)+Math.pow(B[1],2)+Math.pow(B[2],2),Math.pow(J[0],2)+Math.pow(J[1],2)+Math.pow(J[2],2),Math.pow(X[0],2)+Math.pow(X[1],2)+Math.pow(X[2],2)));var _e=Vt*1.5;if(c.position.z=Vt*3,o){var pr=[[new U(1,0,0),'<span style="font-style: italic">x</span>'],[new U(0,1,0),'<span style="font-style: italic">y</span>'],[new U(0,0,1),'<span style="font-style: italic">z</span>']];pr.forEach(function(cm){var Ap=cm[0],Io=cm[1],p0=new U(0,0,0),a0=5592405,rm=new Ka(Ap,p0,_e,a0,_e/10,_e/20);l.add(rm);var X0="#555555",Nl=R(Io,X0),Gl=Ap.clone();Gl.sub(p0),Gl.multiplyScalar(_e),we.appendChild(Nl),m.push([Gl,Nl])})}var _s=[[B,'<span style="font-weight: bold">b</span><sub>1</sub>'],[J,'<span style="font-weight: bold">b</span><sub>2</sub>'],[X,'<span style="font-weight: bold">b</span><sub>3</sub>']],_s;if(f||(_s=[]),_s.forEach(function(cm){var Ap=cm[0],Io=cm[1],p0=Math.sqrt(Math.pow(Ap[0],2)+Math.pow(Ap[1],2)+Math.pow(Ap[2],2)),a0=new U(Ap[0]/p0,Ap[1]/p0,Ap[2]/p0),rm=new U(0,0,0),X0=0,Nl=new Ka(a0,rm,length=p0,X0=X0,p0/10,p0/20);l.add(Nl);var Gl=R(Io=Io),Mp=a0.clone();Mp.sub(rm),Mp.multiplyScalar(p0),we.appendChild(Gl),m.push([Mp,Gl])}),ae){var Ei=new Tt,Bl=[];ae.triangles_vertices.forEach(function(cm){Bl.push(cm[0],cm[1],cm[2])}),Ei.setAttribute("position",new ut(Bl,3));var Wl=[];ae.triangles.forEach(function(cm){Wl.push(cm[0],cm[1],cm[2])}),Ei.setIndex(Wl);var Ep=new Rt(Ei,w),Lp=new dp(Ep.geometry),Op=new fp(Lp,A);l.add(Ep),l.add(Op)}if(He)for(var R0 in He){let cm=He[R0],Ap=.02*Vt;var N0=new or(Ap,16,16),Qp=new Rt(N0,I);Qp.translateX(cm[0]),Qp.translateY(cm[1]),Qp.translateZ(cm[2]),l.add(Qp),R0=_p(R0,x);var O0=R(R0);we.appendChild(O0),m.push([new U(cm[0],cm[1],cm[2]),O0])}if(Pe&&He&&Pe.forEach(function(cm){var Ap=cm[0],Io=cm[1],p0=He[Ap],a0=He[Io],rm=[];rm.push(new U(p0[0],p0[1],p0[2])),rm.push(new U(a0[0],a0[1],a0[2]));var X0=new Tt().setFromPoints(rm),Nl=new ds(X0,D);Nl.material.linewidth=4,l.add(Nl)}),u&&ue)for(var zp in ue){var M0=ue[zp],W0=.01*Vt,N0=new or(W0,16,16),Qp=new Rt(N0,y);Qp.translateX(M0[0]),Qp.translateY(M0[1]),Qp.translateZ(M0[2]),l.add(Qp)}b();var im=function(cm,Ap){if(typeof Ap>"u")var Io=!lt.enabled;else var Io=Ap;lt.enabled=Io;for(var p0=we.getElementsByClassName("BZDoubleClickText"),a0=0;a0<p0.length;a0++)we.removeChild(p0[a0]);Io||we.appendChild(F("BZDoubleClickText"))};h||(im(),we.addEventListener("dblclick",im));var F0,fm=!1;we.addEventListener("touchend",function(cm){if(typeof F0<"u"&&clearTimeout(F0),fm)fm=!1,cm.preventDefault(),im();else{if(cm.targetTouches.length!=0){typeof F0<"u"&&(clearTimeout(F0),fm=!1);return}fm=!0,F0=setTimeout(function(){fm=!1},500)}}),we.addEventListener("touchcancel",function(cm){typeof F0<"u"&&(clearTimeout(F0),fm=!1)}),we.addEventListener("touchmove",function(cm){typeof F0<"u"&&(clearTimeout(F0),fm=!1)})};function $(k,B){var J=k.clone().project(B),X=window.devicePixelRatio||1,ae,He;{var ae=.5*L.domElement.width/X,He=.5*L.domElement.height/X;J.x=J.x*ae+ae,J.y=-(J.y*He)+He}return{left:J.x,top:J.y}}function b(){L.render(l,c),m.forEach(function(k){var B=k[0],J=k[1],X=$(B,c);J.style.top=X.top+"px",J.style.left=X.left+"px"})}};function vp(r){let e="";for(;e.length<r;)e+=Math.random().toString(36).substring(2);return e.substring(0,r)}function xp(r,e,t){let a=document.createElement("div");a.className="bz-main-container";let s=vp(6),o=document.createElement("div");o.id=`canvas-${s}`,o.className="bz-canvas3d";let f=document.createElement("div");f.id=`info-${s}`,a.appendChild(o),a.appendChild(f),r.appendChild(a);let u=new gp(o,f,t);return window.addEventListener("resize",u.resizeRenderer),requestAnimationFrame(()=>{u.loadBZ(e)}),u}function BZVisualizer({data:r,options:e}){const t=reactExports.useRef(null);return reactExports.useEffect(()=>{t.current&&(t.current.innerHTML="",xp(t.current,r,e))},[r,e]),jsxRuntimeExports$1.jsx("div",{ref:t,style:{width:"100%",height:"400px"}})}function reciprocalLattice(r){if(!r||r.length<3)return[[1,0,0],[0,1,0],[0,0,1]];const[e,t,a]=r,s=(m,w)=>[m[1]*w[2]-m[2]*w[1],m[2]*w[0]-m[0]*w[2],m[0]*w[1]-m[1]*w[0]],f=((m,w)=>m[0]*w[0]+m[1]*w[1]+m[2]*w[2])(e,s(t,a)),u=s(t,a).map(m=>2*Math.PI*m/f),h=s(a,e).map(m=>2*Math.PI*m/f),x=s(e,t).map(m=>2*Math.PI*m/f);return[u,h,x]}function KpointsDataVisualiser({nodeData:r={}}){const e=r.attributes||{},t=r.derived_properties||{};if(!e&&!t)return jsxRuntimeExports$1.jsx("div",{children:"No attributes available"});e.cell&&(e.cell[0]?.[0],e.cell[1]?.[1],e.cell[2]?.[2]),e.cell?.length;const[a,s,o]=reciprocalLattice(e.cell),f={...t,b1:a,b2:s,b3:o},u=["vector","x","y","z"],h=[{vector:"b1",x:a[0],y:a[1],z:a[2]},{vector:"b2",x:s[0],y:s[1],z:s[2]},{vector:"b3",x:o[0],y:o[1],z:o[2]}],x=["x","y","z"],m=(e.cell||[]).map(R=>({x:R[0]??0,y:R[1]??0,z:R[2]??0})),w=["dimension","value"],A=(e.mesh||[]).map((R,F)=>({dimension:F+1,value:R??0})),D=["i","x","y","z"],I=(e.offset||[]).map((R,F)=>({i:F+1,x:Array.isArray(R)?R[0]??0:R??0,y:Array.isArray(R)?R[1]??0:0,z:Array.isArray(R)?R[2]??0:0})),y=["axis","periodic"],l=["pbc1","pbc2","pbc3"].filter(R=>R in e).map(R=>({axis:R,periodic:!!e[R]})),c=["K-point number","x","y","z"],L=(t.explicit_kpoints_abs||[]).map((R,F)=>({"K-point number":F+1,x:R[0]??0,y:R[1]??0,z:R[2]??0}));return jsxRuntimeExports$1.jsxs("div",{className:"w-full mx-auto p-4 space-y-2",children:[jsxRuntimeExports$1.jsx(CardContainer,{header:"Brillouin Zone",className:"!px-1.5 !py-2",childrenClassName:"!p-0",children:jsxRuntimeExports$1.jsx("div",{className:"w-full",children:jsxRuntimeExports$1.jsx(BZVisualizer,{data:f,options:{showAxes:!0,showBVectors:!0,showPathpoints:!1,disableInteractOverlay:!0}})})}),jsxRuntimeExports$1.jsx(DataTable,{title:"Reciprocal cell vectors (1/Å)",columns:u,data:h,sortableCols:!1}),jsxRuntimeExports$1.jsx(DataTable,{title:"Cell",columns:x,data:m,sortableCols:!1}),jsxRuntimeExports$1.jsx(DataTable,{title:"Mesh",columns:w,data:A,sortableCols:!1}),jsxRuntimeExports$1.jsx(DataTable,{title:"Offset",columns:D,data:I,sortableCols:!1}),jsxRuntimeExports$1.jsx(DataTable,{title:"PBC Flags",columns:y,data:l,sortableCols:!1}),jsxRuntimeExports$1.jsx(DataTable,{title:"Explicit K-points (Absolute)",columns:c,data:L,sortableCols:!1})]})}const RICH_TYPES={StructureData:StructureDataVisualiser,CifData:StructureDataVisualiser,BandsData:BandsDataVisualiser,UpfData:UpfDataVisualiser,KpointsData:KpointsDataVisualiser};function geRichVisualiser(r,e){if(!e||!e.data)return null;const{label:t,aiida:a}=e.data,s=RICH_TYPES[t];return s?jsxRuntimeExports$1.jsx(s,{nodeData:e.data,restApiUrl:r},a?.uuid):null}function VisualiserPane({restApiUrl:r,selectedNode:e,userData:t,downloadFormats:a}){let s=geRichVisualiser(r,e);const[o,f]=reactExports.useState(s?"rich":"raw");if(reactExports.useEffect(()=>{f(s?"rich":"raw")},[e]),!e)return jsxRuntimeExports$1.jsx("div",{className:"w-full h-full p-4",children:jsxRuntimeExports$1.jsx("p",{children:"Click a node to see top level details. Double click to traverse the graph."})});const u=!s;return jsxRuntimeExports$1.jsxs("div",{className:"w-full h-full flex flex-col overflow-hidden",children:[jsxRuntimeExports$1.jsx("div",{className:"px-4 py-3 md:py-2 bg-theme-50",children:jsxRuntimeExports$1.jsx(FormattedMetaData,{nodeData:e.data,userData:t})}),jsxRuntimeExports$1.jsxs("div",{className:"flex border-y bg-theme-100",children:[jsxRuntimeExports$1.jsx("button",{disabled:u,className:`px-4 py-2 !rounded-none ${o==="rich"?"border-b-2 border-theme-500 font-semibold":u?"text-gray-400 cursor-not-allowed":""}`,onClick:()=>!u&&f("rich"),children:"Rich View"}),jsxRuntimeExports$1.jsx("button",{className:`px-4 py-2 ${o==="raw"?"border-b-2 border-theme-500 !rounded-none font-semibold":""}`,onClick:()=>f("raw"),children:"Raw View"})]}),jsxRuntimeExports$1.jsxs("div",{className:"flex-1 overflow-auto",children:[o==="rich"&&s,o==="raw"&&jsxRuntimeExports$1.jsx(RawDataVisualiser,{nodeData:e.data,downloadFormats:a})]})]})}function TopControls({onFindNode:r,onGetLinkCounts:e,onHelp:t,isLoading:a,disableGetCounts:s=!1}){return jsxRuntimeExports$1.jsxs("div",{className:"w-full shadow-md bg-theme-100 border-b px-4 py-2 flex justify-between items-center z-50",children:[jsxRuntimeExports$1.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports$1.jsxs("button",{className:"group px-3 py-1 bg-theme-200 text-theme-700 flex items-center gap-1 hover:bg-theme-300 ",onClick:r,children:[jsxRuntimeExports$1.jsx(GroupIcon,{className:"w-5 h-5"}),jsxRuntimeExports$1.jsx("span",{children:"Find Node"})]}),jsxRuntimeExports$1.jsxs("button",{className:"group px-3 py-1 bg-theme-200 text-theme-700 flex items-center gap-1 hover:bg-theme-300 ",onClick:e,disabled:s||a,children:[jsxRuntimeExports$1.jsx(LinksIcon,{className:"w-5 h-5"}),jsxRuntimeExports$1.jsx("span",{children:"Get Link Counts"})]})]}),jsxRuntimeExports$1.jsxs("button",{className:"group px-3 py-1 bg-theme-200 text-theme-700 flex items-center gap-1 hover:bg-theme-300 ",onClick:t,children:[jsxRuntimeExports$1.jsx(QuestionIcon,{className:"w-5 h-5"}),jsxRuntimeExports$1.jsx("span",{children:"Help"})]})]})}function useRootNode(r,e,t){const a=r!==void 0,[s,o]=reactExports.useState(e),f=a?r:s,u=reactExports.useCallback(h=>{a||o(h),t(h)},[a,t]);return[f,u]}function AiidaExplorer(r){return jsxRuntimeExports$1.jsx(AiidaExplorerInner,{...r},r.restApiUrl)}function AiidaExplorerInner({restApiUrl:r,rootNode:e,defaultRootNode:t="",onRootNodeChange:a=()=>{},debugMode:s=!1,theme:o="default"}){const[f,u]=useRootNode(e,t,a),h=reactExports.useRef(null),x=reactExports.useRef(null),m=useMediaQuery("(min-width: 1000px)"),[w,A]=reactExports.useState(!1),[D,I]=reactExports.useState(null),[y,l]=reactExports.useState(null),[c,L]=reactExports.useState(null),[R,F]=reactExports.useState([]),[$,b]=reactExports.useState([]),[k,B]=reactExports.useState([]),[J,X]=reactExports.useState(null),[ae,He]=reactExports.useState({}),[Pe,ue]=reactExports.useState("groupsview"),Oe=10,we=reactExports.useRef(!0);reactExports.useEffect(()=>{we.current&&!f?(we.current=!1,ue("groupsview")):ue(f?null:"groupsview")},[f]),reactExports.useEffect(()=>{fetchUsers(r).then(l)},[r]),reactExports.useEffect(()=>{fetchDownloadFormats(r).then(L)},[r]),reactExports.useEffect(()=>{if(!f)return;let _e=!0;async function pr(){A(!0),I(null);try{const{nodes:_s,edges:Ei}=await fetchGraphByNodeId(r,f);if(!_e)return;const Bl=_s.map(Ep=>({...Ep,data:{...Ep.data,...ae[Ep.id]||{}}}));F(Bl),b(Ei),requestAnimationFrame(()=>{const Ep=x.current;if(!Ep)return;Ep.fitView({padding:1.5,duration:300});const Lp=Bl.find(Op=>Op.id===f);Lp?.position&&setTimeout(()=>{Ep.setCenter(Lp.position.x+70,Lp.position.y+0,{zoom:1.22,duration:500})},400)});const Wl=Bl.find(Ep=>Ep.id===f);if(Wl){const Ep=await Ze(Wl);X(Ep)}k[k.length-1]?.id!==Wl?.id&&B(Ep=>[...Ep,Wl].slice(-Oe))}catch(_s){console.error("Failed to load graph:",_s),_e&&I(_s.message||"Failed to load node data")}finally{_e&&A(!1)}}return pr(),()=>{_e=!1}},[f,r,c,y]);const Ze=async _e=>{const pr=await smartFetchData(r,_e,ae,c);return He(_s=>({..._s,[_e.id]:{..._s[_e.id]||{},...pr.data}})),pr},it=async _e=>{const pr=await Ze(_e);X(pr),F(_s=>_s.map(Ei=>Ei.id===_e.id?{...Ei,data:{...Ei.data,...pr.data}}:Ei))},lt=async _e=>{if(!w){A(!0);try{u(_e.id)}finally{A(!1)}}},Vt=async(_e,pr)=>{B(_s=>_s.slice(0,pr+1)),u(_e.id)};return jsxRuntimeExports$1.jsx("div",{"data-theme":o,className:"flex flex-col h-full",children:jsxRuntimeExports$1.jsxs(OverlayProvider,{ref:h,className:"flex flex-col relative h-full min-h-[300px] border bg-theme-50",children:[jsxRuntimeExports$1.jsxs(Overlay,{active:Pe,onClose:()=>ue(null),title:Pe==="groupsview"?"Find node":Pe==="typesview"?"Node Types":Pe==="helpview"?"Help":"",container:h.current,children:[Pe==="groupsview"&&jsxRuntimeExports$1.jsx(GroupsViewer,{restApiUrl:r,setRootNodeId:u}),Pe==="helpview"&&jsxRuntimeExports$1.jsx(HelpViewer,{})]}),jsxRuntimeExports$1.jsxs(PanelGroup,{direction:m?"horizontal":"vertical",className:"flex-1 min-h-0 overflow-hidden",children:[jsxRuntimeExports$1.jsxs(Panel$1,{className:"flex flex-col min-h-0 relative",defaultSize:50,minSize:10,children:[w&&jsxRuntimeExports$1.jsx("div",{className:"absolute bottom-2 right-2 z-50",children:jsxRuntimeExports$1.jsx(Spinner,{})}),D&&jsxRuntimeExports$1.jsx("div",{className:"absolute bottom-2 right-2 z-50",children:jsxRuntimeExports$1.jsx(ErrorDisplay,{message:`Failed to find node UUID: ${f}`})}),jsxRuntimeExports$1.jsx(TopControls,{onFindNode:()=>ue("groupsview"),onGetLinkCounts:async()=>{if(!(w||R.length===0)){A(!0);try{const _e=await fetchLinkCounts(r,R);F(_e)}finally{A(!1)}}},onHelp:()=>ue("helpview"),isLoading:w,disableGetCounts:R.length===0}),jsxRuntimeExports$1.jsx("div",{className:"flex-1 min-h-0",children:jsxRuntimeExports$1.jsx(FlowChart,{className:"flex-1 min-h-0",nodes:R,edges:$,setNodes:F,setEdges:b,selectedNode:J,onNodeSelect:it,onNodeDoubleSelect:lt,onInit:_e=>{x.current=_e}})})]}),jsxRuntimeExports$1.jsx(PanelResizeHandle,{"data-theme":o,className:`group flex items-center justify-center bg-theme-200 border-x ${m?"w-1.5 cursor-col-resize":"h-1.5 cursor-row-resize"}`,children:jsxRuntimeExports$1.jsx("div",{className:`bg-theme-700 rounded group-hover:scale-125 ${m?"w-0.5 h-6":"w-6 h-0.5"}`})}),jsxRuntimeExports$1.jsxs(Panel$1,{className:"flex-1 flex flex-col min-h-0",children:[s&&jsxRuntimeExports$1.jsx("div",{className:"hidden md:flex h-1/4 border-b border-theme-300 overflow-y-auto",children:jsxRuntimeExports$1.jsx(DebugPane,{selectedNode:J})}),jsxRuntimeExports$1.jsx("div",{className:"flex-1 overflow-y-auto min-h-0",children:jsxRuntimeExports$1.jsx(VisualiserPane,{restApiUrl:r,selectedNode:J,userData:y,downloadFormats:c})})]})]}),jsxRuntimeExports$1.jsx("div",{className:"flex-none overflow-x-auto",children:jsxRuntimeExports$1.jsx(Breadcrumbs,{trail:k,onClick:Vt,maxItems:Oe})})]})})}const DEFAULT_REST_URL="https://aiida.materialscloud.org/2dtopo/api/v4";function App(){const[r,e]=useSearchParams(),t=r.get("restApiUrl")??DEFAULT_REST_URL,a=r.get("rootNode")??"",[s,o]=reactExports.useState(t);reactExports.useEffect(()=>{o(t)},[t]);const f=reactExports.useCallback(m=>{const w=new URLSearchParams(r);m?w.set("rootNode",m):w.delete("rootNode"),e(w,{replace:!0})},[r,e]),u=()=>{const m=new URLSearchParams(r);m.set("restApiUrl",s.trim()||DEFAULT_REST_URL),m.delete("rootNode"),e(m,{replace:!0})},[h,x]=reactExports.useState("default");return jsxRuntimeExports$1.jsxs("div",{className:"flex flex-col items-center justify-center h-screen space-y-4",children:[jsxRuntimeExports$1.jsxs("div",{className:"flex items-center space-x-2 w-[95vw]",children:[jsxRuntimeExports$1.jsx("label",{htmlFor:"aiida-rest-url",className:"text-gray-800 font-medium whitespace-nowrap",children:"AiiDA REST endpoint:"}),jsxRuntimeExports$1.jsx("input",{id:"aiida-rest-url",type:"text",value:s,onChange:m=>o(m.target.value),placeholder:"Enter AiiDA REST API URL",className:"flex-grow p-2 border border-gray-400",onKeyDown:m=>m.key==="Enter"&&u()}),jsxRuntimeExports$1.jsx("button",{onClick:u,className:"px-4 py-2 bg-blue-600 text-white hover:bg-blue-700",children:"Load"}),jsxRuntimeExports$1.jsxs("div",{className:"flex items-center space-x-1",children:[jsxRuntimeExports$1.jsx("label",{htmlFor:"theme",className:"text-gray-800 font-medium",children:"Theme:"}),jsxRuntimeExports$1.jsxs("select",{id:"theme",value:h,onChange:m=>x(m.target.value),className:"p-2 border border-gray-400 rounded bg-white cursor-pointer hover:border-blue-500 transition",children:[jsxRuntimeExports$1.jsx("option",{value:"red",children:"Red"}),jsxRuntimeExports$1.jsx("option",{value:"blue",children:"Blue"}),jsxRuntimeExports$1.jsx("option",{value:"green",children:"Green"}),jsxRuntimeExports$1.jsx("option",{value:"yellow",children:"Yellow"}),jsxRuntimeExports$1.jsx("option",{value:"amber",children:"Amber"}),jsxRuntimeExports$1.jsx("option",{value:"violet",children:"Violet"}),jsxRuntimeExports$1.jsx("option",{value:"emerald",children:"Emerald"}),jsxRuntimeExports$1.jsx("option",{value:"pink",children:"Pink"}),jsxRuntimeExports$1.jsx("option",{value:"rose",children:"Rose"}),jsxRuntimeExports$1.jsx("option",{value:"cyan",children:"Cyan"}),jsxRuntimeExports$1.jsx("option",{value:"teal",children:"Teal"}),jsxRuntimeExports$1.jsx("option",{value:"default",children:"Slate (default)"})]})]})]}),jsxRuntimeExports$1.jsx("div",{className:"w-[95vw] h-[85vh] bg-amber-600",children:jsxRuntimeExports$1.jsx(AiidaExplorer,{restApiUrl:t,rootNode:a,onRootNodeChange:f,theme:h})})]})}ReactDOM.createRoot(document.getElementById("root")).render(jsxRuntimeExports$1.jsx(React.StrictMode,{children:jsxRuntimeExports$1.jsx(HashRouter,{children:jsxRuntimeExports$1.jsx(App,{})})}));
