function _mergeNamespaces(r,e){for(var t=0;t<e.length;t++){const a=e[t];if(typeof a!="string"&&!Array.isArray(a)){for(const o in a)if(o!=="default"&&!(o in r)){const l=Object.getOwnPropertyDescriptor(a,o);l&&Object.defineProperty(r,o,l.get?l:{enumerable:!0,get:()=>a[o]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const s of l.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&a(s)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function getDefaultExportFromCjs(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var jsxRuntime={exports:{}},reactJsxRuntime_production={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactJsxRuntime_production;function requireReactJsxRuntime_production(){if(hasRequiredReactJsxRuntime_production)return reactJsxRuntime_production;hasRequiredReactJsxRuntime_production=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(a,o,l){var s=null;if(l!==void 0&&(s=""+l),o.key!==void 0&&(s=""+o.key),"key"in o){l={};for(var f in o)f!=="key"&&(l[f]=o[f])}else l=o;return o=l.ref,{$$typeof:r,type:a,key:s,ref:o!==void 0?o:null,props:l}}return reactJsxRuntime_production.Fragment=e,reactJsxRuntime_production.jsx=t,reactJsxRuntime_production.jsxs=t,reactJsxRuntime_production}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),react={exports:{}},react_production={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReact_production;function requireReact_production(){if(hasRequiredReact_production)return react_production;hasRequiredReact_production=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),s=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),b=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),M=Symbol.for("react.activity"),I=Symbol.iterator;function V(Pp){return Pp===null||typeof Pp!="object"?null:(Pp=I&&Pp[I]||Pp["@@iterator"],typeof Pp=="function"?Pp:null)}var Z={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ee=Object.assign,le={};function K(Pp,d0,x0){this.props=Pp,this.context=d0,this.refs=le,this.updater=x0||Z}K.prototype.isReactComponent={},K.prototype.setState=function(Pp,d0){if(typeof Pp!="object"&&typeof Pp!="function"&&Pp!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Pp,d0,"setState")},K.prototype.forceUpdate=function(Pp){this.updater.enqueueForceUpdate(this,Pp,"forceUpdate")};function vt(){}vt.prototype=K.prototype;function q(Pp,d0,x0){this.props=Pp,this.context=d0,this.refs=le,this.updater=x0||Z}var Q=q.prototype=new vt;Q.constructor=q,ee(Q,K.prototype),Q.isPureReactComponent=!0;var wt=Array.isArray;function bt(){}var Ut={H:null,A:null,T:null,S:null},it=Object.prototype.hasOwnProperty;function zt(Pp,d0,x0){var Dp=x0.ref;return{$$typeof:r,type:Pp,key:d0,ref:Dp!==void 0?Dp:null,props:x0}}function Zt(Pp,d0){return zt(Pp.type,d0,Pp.props)}function Mn(Pp){return typeof Pp=="object"&&Pp!==null&&Pp.$$typeof===r}function kp(Pp){var d0={"=":"=0",":":"=2"};return"$"+Pp.replace(/[=:]/g,function(x0){return d0[x0]})}var zp=/\/+/g;function sa(Pp,d0){return typeof Pp=="object"&&Pp!==null&&Pp.key!=null?kp(""+Pp.key):d0.toString(36)}function qo(Pp){switch(Pp.status){case"fulfilled":return Pp.value;case"rejected":throw Pp.reason;default:switch(typeof Pp.status=="string"?Pp.then(bt,bt):(Pp.status="pending",Pp.then(function(d0){Pp.status==="pending"&&(Pp.status="fulfilled",Pp.value=d0)},function(d0){Pp.status==="pending"&&(Pp.status="rejected",Pp.reason=d0)})),Pp.status){case"fulfilled":return Pp.value;case"rejected":throw Pp.reason}}throw Pp}function ae(Pp,d0,x0,Dp,c0){var u0=typeof Pp;(u0==="undefined"||u0==="boolean")&&(Pp=null);var y0=!1;if(Pp===null)y0=!0;else switch(u0){case"bigint":case"string":case"number":y0=!0;break;case"object":switch(Pp.$$typeof){case r:case e:y0=!0;break;case E:return y0=Pp._init,ae(y0(Pp._payload),d0,x0,Dp,c0)}}if(y0)return c0=c0(Pp),y0=Dp===""?"."+sa(Pp,0):Dp,wt(c0)?(x0="",y0!=null&&(x0=y0.replace(zp,"$&/")+"/"),ae(c0,d0,x0,"",function(mm){return mm})):c0!=null&&(Mn(c0)&&(c0=Zt(c0,x0+(c0.key==null||Pp&&Pp.key===c0.key?"":(""+c0.key).replace(zp,"$&/")+"/")+y0)),d0.push(c0)),1;y0=0;var M0=Dp===""?".":Dp+":";if(wt(Pp))for(var sm=0;sm<Pp.length;sm++)Dp=Pp[sm],u0=M0+sa(Dp,sm),y0+=ae(Dp,d0,x0,u0,c0);else if(sm=V(Pp),typeof sm=="function")for(Pp=sm.call(Pp),sm=0;!(Dp=Pp.next()).done;)Dp=Dp.value,u0=M0+sa(Dp,sm++),y0+=ae(Dp,d0,x0,u0,c0);else if(u0==="object"){if(typeof Pp.then=="function")return ae(qo(Pp),d0,x0,Dp,c0);throw d0=String(Pp),Error("Objects are not valid as a React child (found: "+(d0==="[object Object]"?"object with keys {"+Object.keys(Pp).join(", ")+"}":d0)+"). If you meant to render a collection of children, use an array instead.")}return y0}function wp(Pp,d0,x0){if(Pp==null)return Pp;var Dp=[],c0=0;return ae(Pp,Dp,"","",function(u0){return d0.call(x0,u0,c0++)}),Dp}function Cp(Pp){if(Pp._status===-1){var d0=Pp._result;d0=d0(),d0.then(function(x0){(Pp._status===0||Pp._status===-1)&&(Pp._status=1,Pp._result=x0)},function(x0){(Pp._status===0||Pp._status===-1)&&(Pp._status=2,Pp._result=x0)}),Pp._status===-1&&(Pp._status=0,Pp._result=d0)}if(Pp._status===1)return Pp._result.default;throw Pp._result}var Kt=typeof reportError=="function"?reportError:function(Pp){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var d0=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Pp=="object"&&Pp!==null&&typeof Pp.message=="string"?String(Pp.message):String(Pp),error:Pp});if(!window.dispatchEvent(d0))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Pp);return}console.error(Pp)},h0={map:wp,forEach:function(Pp,d0,x0){wp(Pp,function(){d0.apply(this,arguments)},x0)},count:function(Pp){var d0=0;return wp(Pp,function(){d0++}),d0},toArray:function(Pp){return wp(Pp,function(d0){return d0})||[]},only:function(Pp){if(!Mn(Pp))throw Error("React.Children.only expected to receive a single React element child.");return Pp}};return react_production.Activity=M,react_production.Children=h0,react_production.Component=K,react_production.Fragment=t,react_production.Profiler=o,react_production.PureComponent=q,react_production.StrictMode=a,react_production.Suspense=m,react_production.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Ut,react_production.__COMPILER_RUNTIME={__proto__:null,c:function(Pp){return Ut.H.useMemoCache(Pp)}},react_production.cache=function(Pp){return function(){return Pp.apply(null,arguments)}},react_production.cacheSignal=function(){return null},react_production.cloneElement=function(Pp,d0,x0){if(Pp==null)throw Error("The argument must be a React element, but you passed "+Pp+".");var Dp=ee({},Pp.props),c0=Pp.key;if(d0!=null)for(u0 in d0.key!==void 0&&(c0=""+d0.key),d0)!it.call(d0,u0)||u0==="key"||u0==="__self"||u0==="__source"||u0==="ref"&&d0.ref===void 0||(Dp[u0]=d0[u0]);var u0=arguments.length-2;if(u0===1)Dp.children=x0;else if(1<u0){for(var y0=Array(u0),M0=0;M0<u0;M0++)y0[M0]=arguments[M0+2];Dp.children=y0}return zt(Pp.type,c0,Dp)},react_production.createContext=function(Pp){return Pp={$$typeof:s,_currentValue:Pp,_currentValue2:Pp,_threadCount:0,Provider:null,Consumer:null},Pp.Provider=Pp,Pp.Consumer={$$typeof:l,_context:Pp},Pp},react_production.createElement=function(Pp,d0,x0){var Dp,c0={},u0=null;if(d0!=null)for(Dp in d0.key!==void 0&&(u0=""+d0.key),d0)it.call(d0,Dp)&&Dp!=="key"&&Dp!=="__self"&&Dp!=="__source"&&(c0[Dp]=d0[Dp]);var y0=arguments.length-2;if(y0===1)c0.children=x0;else if(1<y0){for(var M0=Array(y0),sm=0;sm<y0;sm++)M0[sm]=arguments[sm+2];c0.children=M0}if(Pp&&Pp.defaultProps)for(Dp in y0=Pp.defaultProps,y0)c0[Dp]===void 0&&(c0[Dp]=y0[Dp]);return zt(Pp,u0,c0)},react_production.createRef=function(){return{current:null}},react_production.forwardRef=function(Pp){return{$$typeof:f,render:Pp}},react_production.isValidElement=Mn,react_production.lazy=function(Pp){return{$$typeof:E,_payload:{_status:-1,_result:Pp},_init:Cp}},react_production.memo=function(Pp,d0){return{$$typeof:b,type:Pp,compare:d0===void 0?null:d0}},react_production.startTransition=function(Pp){var d0=Ut.T,x0={};Ut.T=x0;try{var Dp=Pp(),c0=Ut.S;c0!==null&&c0(x0,Dp),typeof Dp=="object"&&Dp!==null&&typeof Dp.then=="function"&&Dp.then(bt,Kt)}catch(u0){Kt(u0)}finally{d0!==null&&x0.types!==null&&(d0.types=x0.types),Ut.T=d0}},react_production.unstable_useCacheRefresh=function(){return Ut.H.useCacheRefresh()},react_production.use=function(Pp){return Ut.H.use(Pp)},react_production.useActionState=function(Pp,d0,x0){return Ut.H.useActionState(Pp,d0,x0)},react_production.useCallback=function(Pp,d0){return Ut.H.useCallback(Pp,d0)},react_production.useContext=function(Pp){return Ut.H.useContext(Pp)},react_production.useDebugValue=function(){},react_production.useDeferredValue=function(Pp,d0){return Ut.H.useDeferredValue(Pp,d0)},react_production.useEffect=function(Pp,d0){return Ut.H.useEffect(Pp,d0)},react_production.useEffectEvent=function(Pp){return Ut.H.useEffectEvent(Pp)},react_production.useId=function(){return Ut.H.useId()},react_production.useImperativeHandle=function(Pp,d0,x0){return Ut.H.useImperativeHandle(Pp,d0,x0)},react_production.useInsertionEffect=function(Pp,d0){return Ut.H.useInsertionEffect(Pp,d0)},react_production.useLayoutEffect=function(Pp,d0){return Ut.H.useLayoutEffect(Pp,d0)},react_production.useMemo=function(Pp,d0){return Ut.H.useMemo(Pp,d0)},react_production.useOptimistic=function(Pp,d0){return Ut.H.useOptimistic(Pp,d0)},react_production.useReducer=function(Pp,d0,x0){return Ut.H.useReducer(Pp,d0,x0)},react_production.useRef=function(Pp){return Ut.H.useRef(Pp)},react_production.useState=function(Pp){return Ut.H.useState(Pp)},react_production.useSyncExternalStore=function(Pp,d0,x0){return Ut.H.useSyncExternalStore(Pp,d0,x0)},react_production.useTransition=function(){return Ut.H.useTransition()},react_production.version="19.2.0",react_production}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production()),react.exports}var reactExports=requireReact();const React=getDefaultExportFromCjs(reactExports),React$1=_mergeNamespaces({__proto__:null,default:React},[reactExports]);var client={exports:{}},reactDomClient_production={},scheduler={exports:{}},scheduler_production={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production;function requireScheduler_production(){return hasRequiredScheduler_production||(hasRequiredScheduler_production=1,(function(r){function e(ae,wp){var Cp=ae.length;ae.push(wp);e:for(;0<Cp;){var Kt=Cp-1>>>1,h0=ae[Kt];if(0<o(h0,wp))ae[Kt]=wp,ae[Cp]=h0,Cp=Kt;else break e}}function t(ae){return ae.length===0?null:ae[0]}function a(ae){if(ae.length===0)return null;var wp=ae[0],Cp=ae.pop();if(Cp!==wp){ae[0]=Cp;e:for(var Kt=0,h0=ae.length,Pp=h0>>>1;Kt<Pp;){var d0=2*(Kt+1)-1,x0=ae[d0],Dp=d0+1,c0=ae[Dp];if(0>o(x0,Cp))Dp<h0&&0>o(c0,x0)?(ae[Kt]=c0,ae[Dp]=Cp,Kt=Dp):(ae[Kt]=x0,ae[d0]=Cp,Kt=d0);else if(Dp<h0&&0>o(c0,Cp))ae[Kt]=c0,ae[Dp]=Cp,Kt=Dp;else break e}}return wp}function o(ae,wp){var Cp=ae.sortIndex-wp.sortIndex;return Cp!==0?Cp:ae.id-wp.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var s=Date,f=s.now();r.unstable_now=function(){return s.now()-f}}var m=[],b=[],E=1,M=null,I=3,V=!1,Z=!1,ee=!1,le=!1,K=typeof setTimeout=="function"?setTimeout:null,vt=typeof clearTimeout=="function"?clearTimeout:null,q=typeof setImmediate<"u"?setImmediate:null;function Q(ae){for(var wp=t(b);wp!==null;){if(wp.callback===null)a(b);else if(wp.startTime<=ae)a(b),wp.sortIndex=wp.expirationTime,e(m,wp);else break;wp=t(b)}}function wt(ae){if(ee=!1,Q(ae),!Z)if(t(m)!==null)Z=!0,bt||(bt=!0,kp());else{var wp=t(b);wp!==null&&qo(wt,wp.startTime-ae)}}var bt=!1,Ut=-1,it=5,zt=-1;function Zt(){return le?!0:!(r.unstable_now()-zt<it)}function Mn(){if(le=!1,bt){var ae=r.unstable_now();zt=ae;var wp=!0;try{e:{Z=!1,ee&&(ee=!1,vt(Ut),Ut=-1),V=!0;var Cp=I;try{t:{for(Q(ae),M=t(m);M!==null&&!(M.expirationTime>ae&&Zt());){var Kt=M.callback;if(typeof Kt=="function"){M.callback=null,I=M.priorityLevel;var h0=Kt(M.expirationTime<=ae);if(ae=r.unstable_now(),typeof h0=="function"){M.callback=h0,Q(ae),wp=!0;break t}M===t(m)&&a(m),Q(ae)}else a(m);M=t(m)}if(M!==null)wp=!0;else{var Pp=t(b);Pp!==null&&qo(wt,Pp.startTime-ae),wp=!1}}break e}finally{M=null,I=Cp,V=!1}wp=void 0}}finally{wp?kp():bt=!1}}}var kp;if(typeof q=="function")kp=function(){q(Mn)};else if(typeof MessageChannel<"u"){var zp=new MessageChannel,sa=zp.port2;zp.port1.onmessage=Mn,kp=function(){sa.postMessage(null)}}else kp=function(){K(Mn,0)};function qo(ae,wp){Ut=K(function(){ae(r.unstable_now())},wp)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(ae){ae.callback=null},r.unstable_forceFrameRate=function(ae){0>ae||125<ae?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):it=0<ae?Math.floor(1e3/ae):5},r.unstable_getCurrentPriorityLevel=function(){return I},r.unstable_next=function(ae){switch(I){case 1:case 2:case 3:var wp=3;break;default:wp=I}var Cp=I;I=wp;try{return ae()}finally{I=Cp}},r.unstable_requestPaint=function(){le=!0},r.unstable_runWithPriority=function(ae,wp){switch(ae){case 1:case 2:case 3:case 4:case 5:break;default:ae=3}var Cp=I;I=ae;try{return wp()}finally{I=Cp}},r.unstable_scheduleCallback=function(ae,wp,Cp){var Kt=r.unstable_now();switch(typeof Cp=="object"&&Cp!==null?(Cp=Cp.delay,Cp=typeof Cp=="number"&&0<Cp?Kt+Cp:Kt):Cp=Kt,ae){case 1:var h0=-1;break;case 2:h0=250;break;case 5:h0=1073741823;break;case 4:h0=1e4;break;default:h0=5e3}return h0=Cp+h0,ae={id:E++,callback:wp,priorityLevel:ae,startTime:Cp,expirationTime:h0,sortIndex:-1},Cp>Kt?(ae.sortIndex=Cp,e(b,ae),t(m)===null&&ae===t(b)&&(ee?(vt(Ut),Ut=-1):ee=!0,qo(wt,Cp-Kt))):(ae.sortIndex=h0,e(m,ae),Z||V||(Z=!0,bt||(bt=!0,kp()))),ae},r.unstable_shouldYield=Zt,r.unstable_wrapCallback=function(ae){var wp=I;return function(){var Cp=I;I=wp;try{return ae.apply(this,arguments)}finally{I=Cp}}}})(scheduler_production)),scheduler_production}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production()),scheduler.exports}var reactDom={exports:{}},reactDom_production={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDom_production;function requireReactDom_production(){if(hasRequiredReactDom_production)return reactDom_production;hasRequiredReactDom_production=1;var r=requireReact();function e(m){var b="https://react.dev/errors/"+m;if(1<arguments.length){b+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)b+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+m+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var a={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function l(m,b,E){var M=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:M==null?null:""+M,children:m,containerInfo:b,implementation:E}}var s=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(m,b){if(m==="font")return"";if(typeof b=="string")return b==="use-credentials"?b:""}return reactDom_production.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,reactDom_production.createPortal=function(m,b){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!b||b.nodeType!==1&&b.nodeType!==9&&b.nodeType!==11)throw Error(e(299));return l(m,b,null,E)},reactDom_production.flushSync=function(m){var b=s.T,E=a.p;try{if(s.T=null,a.p=2,m)return m()}finally{s.T=b,a.p=E,a.d.f()}},reactDom_production.preconnect=function(m,b){typeof m=="string"&&(b?(b=b.crossOrigin,b=typeof b=="string"?b==="use-credentials"?b:"":void 0):b=null,a.d.C(m,b))},reactDom_production.prefetchDNS=function(m){typeof m=="string"&&a.d.D(m)},reactDom_production.preinit=function(m,b){if(typeof m=="string"&&b&&typeof b.as=="string"){var E=b.as,M=f(E,b.crossOrigin),I=typeof b.integrity=="string"?b.integrity:void 0,V=typeof b.fetchPriority=="string"?b.fetchPriority:void 0;E==="style"?a.d.S(m,typeof b.precedence=="string"?b.precedence:void 0,{crossOrigin:M,integrity:I,fetchPriority:V}):E==="script"&&a.d.X(m,{crossOrigin:M,integrity:I,fetchPriority:V,nonce:typeof b.nonce=="string"?b.nonce:void 0})}},reactDom_production.preinitModule=function(m,b){if(typeof m=="string")if(typeof b=="object"&&b!==null){if(b.as==null||b.as==="script"){var E=f(b.as,b.crossOrigin);a.d.M(m,{crossOrigin:E,integrity:typeof b.integrity=="string"?b.integrity:void 0,nonce:typeof b.nonce=="string"?b.nonce:void 0})}}else b==null&&a.d.M(m)},reactDom_production.preload=function(m,b){if(typeof m=="string"&&typeof b=="object"&&b!==null&&typeof b.as=="string"){var E=b.as,M=f(E,b.crossOrigin);a.d.L(m,E,{crossOrigin:M,integrity:typeof b.integrity=="string"?b.integrity:void 0,nonce:typeof b.nonce=="string"?b.nonce:void 0,type:typeof b.type=="string"?b.type:void 0,fetchPriority:typeof b.fetchPriority=="string"?b.fetchPriority:void 0,referrerPolicy:typeof b.referrerPolicy=="string"?b.referrerPolicy:void 0,imageSrcSet:typeof b.imageSrcSet=="string"?b.imageSrcSet:void 0,imageSizes:typeof b.imageSizes=="string"?b.imageSizes:void 0,media:typeof b.media=="string"?b.media:void 0})}},reactDom_production.preloadModule=function(m,b){if(typeof m=="string")if(b){var E=f(b.as,b.crossOrigin);a.d.m(m,{as:typeof b.as=="string"&&b.as!=="script"?b.as:void 0,crossOrigin:E,integrity:typeof b.integrity=="string"?b.integrity:void 0})}else a.d.m(m)},reactDom_production.requestFormReset=function(m){a.d.r(m)},reactDom_production.unstable_batchedUpdates=function(m,b){return m(b)},reactDom_production.useFormState=function(m,b,E){return s.H.useFormState(m,b,E)},reactDom_production.useFormStatus=function(){return s.H.useHostTransitionStatus()},reactDom_production.version="19.2.0",reactDom_production}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),reactDom.exports=requireReactDom_production(),reactDom.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDomClient_production;function requireReactDomClient_production(){if(hasRequiredReactDomClient_production)return reactDomClient_production;hasRequiredReactDomClient_production=1;var r=requireScheduler(),e=requireReact(),t=requireReactDom();function a(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)i+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var i=n,u=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(u=i.return),n=i.return;while(n)}return i.tag===3?u:null}function s(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function f(n){if(n.tag===31){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function m(n){if(l(n)!==n)throw Error(a(188))}function b(n){var i=n.alternate;if(!i){if(i=l(n),i===null)throw Error(a(188));return i!==n?null:n}for(var u=n,C=i;;){var re=u.return;if(re===null)break;var st=re.alternate;if(st===null){if(C=re.return,C!==null){u=C;continue}break}if(re.child===st.child){for(st=re.child;st;){if(st===u)return m(re),n;if(st===C)return m(re),i;st=st.sibling}throw Error(a(188))}if(u.return!==C.return)u=re,C=st;else{for(var ha=!1,qp=re.child;qp;){if(qp===u){ha=!0,u=re,C=st;break}if(qp===C){ha=!0,C=re,u=st;break}qp=qp.sibling}if(!ha){for(qp=st.child;qp;){if(qp===u){ha=!0,u=st,C=re;break}if(qp===C){ha=!0,C=st,u=re;break}qp=qp.sibling}if(!ha)throw Error(a(189))}}if(u.alternate!==C)throw Error(a(190))}if(u.tag!==3)throw Error(a(188));return u.stateNode.current===u?n:i}function E(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=E(n),i!==null)return i;n=n.sibling}return null}var M=Object.assign,I=Symbol.for("react.element"),V=Symbol.for("react.transitional.element"),Z=Symbol.for("react.portal"),ee=Symbol.for("react.fragment"),le=Symbol.for("react.strict_mode"),K=Symbol.for("react.profiler"),vt=Symbol.for("react.consumer"),q=Symbol.for("react.context"),Q=Symbol.for("react.forward_ref"),wt=Symbol.for("react.suspense"),bt=Symbol.for("react.suspense_list"),Ut=Symbol.for("react.memo"),it=Symbol.for("react.lazy"),zt=Symbol.for("react.activity"),Zt=Symbol.for("react.memo_cache_sentinel"),Mn=Symbol.iterator;function kp(n){return n===null||typeof n!="object"?null:(n=Mn&&n[Mn]||n["@@iterator"],typeof n=="function"?n:null)}var zp=Symbol.for("react.client.reference");function sa(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===zp?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case ee:return"Fragment";case K:return"Profiler";case le:return"StrictMode";case wt:return"Suspense";case bt:return"SuspenseList";case zt:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case Z:return"Portal";case q:return n.displayName||"Context";case vt:return(n._context.displayName||"Context")+".Consumer";case Q:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Ut:return i=n.displayName||null,i!==null?i:sa(n.type)||"Memo";case it:i=n._payload,n=n._init;try{return sa(n(i))}catch{}}return null}var qo=Array.isArray,ae=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,wp=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Cp={pending:!1,data:null,method:null,action:null},Kt=[],h0=-1;function Pp(n){return{current:n}}function d0(n){0>h0||(n.current=Kt[h0],Kt[h0]=null,h0--)}function x0(n,i){h0++,Kt[h0]=n.current,n.current=i}var Dp=Pp(null),c0=Pp(null),u0=Pp(null),y0=Pp(null);function M0(n,i){switch(x0(u0,i),x0(c0,n),x0(Dp,null),i.nodeType){case 9:case 11:n=(n=i.documentElement)&&(n=n.namespaceURI)?x3(n):0;break;default:if(n=i.tagName,i=i.namespaceURI)i=x3(i),n=_3(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}d0(Dp),x0(Dp,n)}function sm(){d0(Dp),d0(c0),d0(u0)}function mm(n){n.memoizedState!==null&&x0(y0,n);var i=Dp.current,u=_3(i,n.type);i!==u&&(x0(c0,n),x0(Dp,u))}function Mm(n){c0.current===n&&(d0(Dp),d0(c0)),y0.current===n&&(d0(y0),H2._currentValue=Cp)}var v1,v0;function D1(n){if(v1===void 0)try{throw Error()}catch(u){var i=u.stack.trim().match(/\n( *(at )?)/);v1=i&&i[1]||"",v0=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+v1+n+v0}var P1=!1;function ig(n,i){if(!n||P1)return"";P1=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var C={DetermineComponentFrameRoot:function(){try{if(i){var pm=function(){throw Error()};if(Object.defineProperty(pm.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(pm,[])}catch(Cm){var _m=Cm}Reflect.construct(n,[],pm)}else{try{pm.call()}catch(Cm){_m=Cm}n.call(pm.prototype)}}else{try{throw Error()}catch(Cm){_m=Cm}(pm=n())&&typeof pm.catch=="function"&&pm.catch(function(){})}}catch(Cm){if(Cm&&_m&&typeof Cm.stack=="string")return[Cm.stack,_m.stack]}return[null,null]}};C.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var re=Object.getOwnPropertyDescriptor(C.DetermineComponentFrameRoot,"name");re&&re.configurable&&Object.defineProperty(C.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var st=C.DetermineComponentFrameRoot(),ha=st[0],qp=st[1];if(ha&&qp){var q0=ha.split(`
`),Dm=qp.split(`
`);for(re=C=0;C<q0.length&&!q0[C].includes("DetermineComponentFrameRoot");)C++;for(;re<Dm.length&&!Dm[re].includes("DetermineComponentFrameRoot");)re++;if(C===q0.length||re===Dm.length)for(C=q0.length-1,re=Dm.length-1;1<=C&&0<=re&&q0[C]!==Dm[re];)re--;for(;1<=C&&0<=re;C--,re--)if(q0[C]!==Dm[re]){if(C!==1||re!==1)do if(C--,re--,0>re||q0[C]!==Dm[re]){var Gm=`
`+q0[C].replace(" at new "," at ");return n.displayName&&Gm.includes("<anonymous>")&&(Gm=Gm.replace("<anonymous>",n.displayName)),Gm}while(1<=C&&0<=re);break}}}finally{P1=!1,Error.prepareStackTrace=u}return(u=n?n.displayName||n.name:"")?D1(u):""}function w1(n,i){switch(n.tag){case 26:case 27:case 5:return D1(n.type);case 16:return D1("Lazy");case 13:return n.child!==i&&i!==null?D1("Suspense Fallback"):D1("Suspense");case 19:return D1("SuspenseList");case 0:case 15:return ig(n.type,!1);case 11:return ig(n.type.render,!1);case 1:return ig(n.type,!0);case 31:return D1("Activity");default:return""}}function o1(n){try{var i="",u=null;do i+=w1(n,u),u=n,n=n.return;while(n);return i}catch(C){return`
Error generating stack: `+C.message+`
`+C.stack}}var g1=Object.prototype.hasOwnProperty,X1=r.unstable_scheduleCallback,sg=r.unstable_cancelCallback,og=r.unstable_shouldYield,R0=r.unstable_requestPaint,Xp=r.unstable_now,wm=r.unstable_getCurrentPriorityLevel,$m=r.unstable_ImmediatePriority,Vp=r.unstable_UserBlockingPriority,r0=r.unstable_NormalPriority,B0=r.unstable_LowPriority,bm=r.unstable_IdlePriority,Sm=r.log,Xm=r.unstable_setDisableYieldValue,cm=null,zm=null;function x1(n){if(typeof Sm=="function"&&Xm(n),zm&&typeof zm.setStrictMode=="function")try{zm.setStrictMode(cm,n)}catch{}}var Um=Math.clz32?Math.clz32:um,h1=Math.log,Sg=Math.LN2;function um(n){return n>>>=0,n===0?32:31-(h1(n)/Sg|0)|0}var M1=256,F1=262144,Y1=4194304;function n1(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Zm(n,i,u){var C=n.pendingLanes;if(C===0)return 0;var re=0,st=n.suspendedLanes,ha=n.pingedLanes;n=n.warmLanes;var qp=C&134217727;return qp!==0?(C=qp&~st,C!==0?re=n1(C):(ha&=qp,ha!==0?re=n1(ha):u||(u=qp&~n,u!==0&&(re=n1(u))))):(qp=C&~st,qp!==0?re=n1(qp):ha!==0?re=n1(ha):u||(u=C&~n,u!==0&&(re=n1(u)))),re===0?0:i!==0&&i!==re&&(i&st)===0&&(st=re&-re,u=i&-i,st>=u||st===32&&(u&4194048)!==0)?i:re}function S1(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function p1(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hv(){var n=Y1;return Y1<<=1,(Y1&62914560)===0&&(Y1=4194304),n}function Gg(n){for(var i=[],u=0;31>u;u++)i.push(n);return i}function Cv(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function ey(n,i,u,C,re,st){var ha=n.pendingLanes;n.pendingLanes=u,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=u,n.entangledLanes&=u,n.errorRecoveryDisabledLanes&=u,n.shellSuspendCounter=0;var qp=n.entanglements,q0=n.expirationTimes,Dm=n.hiddenUpdates;for(u=ha&~u;0<u;){var Gm=31-Um(u),pm=1<<Gm;qp[Gm]=0,q0[Gm]=-1;var _m=Dm[Gm];if(_m!==null)for(Dm[Gm]=null,Gm=0;Gm<_m.length;Gm++){var Cm=_m[Gm];Cm!==null&&(Cm.lane&=-536870913)}u&=~pm}C!==0&&xy(n,C,0),st!==0&&re===0&&n.tag!==0&&(n.suspendedLanes|=st&~(ha&~i))}function xy(n,i,u){n.pendingLanes|=i,n.suspendedLanes&=~i;var C=31-Um(i);n.entangledLanes|=i,n.entanglements[C]=n.entanglements[C]|1073741824|u&261930}function Gv(n,i){var u=n.entangledLanes|=i;for(n=n.entanglements;u;){var C=31-Um(u),re=1<<C;re&i|n[C]&i&&(n[C]|=i),u&=~re}}function yv(n,i){var u=i&-i;return u=(u&42)!==0?1:Wv(u),(u&(n.suspendedLanes|i))!==0?0:u}function Wv(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function _y(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function iy(){var n=wp.p;return n!==0?n:(n=window.event,n===void 0?32:J5(n.type))}function Cy(n,i){var u=wp.p;try{return wp.p=n,i()}finally{wp.p=u}}var $v=Math.random().toString(36).slice(2),Lv="__reactFiber$"+$v,wg="__reactProps$"+$v,Ov="__reactContainer$"+$v,Uv="__reactEvents$"+$v,zy="__reactListeners$"+$v,mg="__reactHandles$"+$v,Re="__reactResources$"+$v,Kp="__reactMarker$"+$v;function Fn(n){delete n[Lv],delete n[wg],delete n[Uv],delete n[zy],delete n[mg]}function t0(n){var i=n[Lv];if(i)return i;for(var u=n.parentNode;u;){if(i=u[Ov]||u[Lv]){if(u=i.alternate,i.child!==null||u!==null&&u.child!==null)for(n=H5(n);n!==null;){if(u=n[Lv])return u;n=H5(n)}return i}n=u,u=n.parentNode}return null}function s0(n){if(n=n[Lv]||n[Ov]){var i=n.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return n}return null}function J0(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(a(33))}function F0(n){var i=n[Re];return i||(i=n[Re]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function lm(n){n[Kp]=!0}var Bm=new Set,Nm={};function jm(n,i){A1(n,i),A1(n+"Capture",i)}function A1(n,i){for(Nm[n]=i,n=0;n<i.length;n++)Bm.add(i[n])}var L1=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),K1={},Tg={};function Lg(n){return g1.call(Tg,n)?!0:g1.call(K1,n)?!1:L1.test(n)?Tg[n]=!0:(K1[n]=!0,!1)}function lg(n,i,u){if(Lg(i))if(u===null)n.removeAttribute(i);else{switch(typeof u){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var C=i.toLowerCase().slice(0,5);if(C!=="data-"&&C!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+u)}}function Mg(n,i,u){if(u===null)n.removeAttribute(i);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+u)}}function $1(n,i,u,C){if(C===null)n.removeAttribute(u);else{switch(typeof C){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(u);return}n.setAttributeNS(i,u,""+C)}}function j1(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function ng(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function zv(n,i,u){var C=Object.getOwnPropertyDescriptor(n.constructor.prototype,i);if(!n.hasOwnProperty(i)&&typeof C<"u"&&typeof C.get=="function"&&typeof C.set=="function"){var re=C.get,st=C.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return re.call(this)},set:function(ha){u=""+ha,st.call(this,ha)}}),Object.defineProperty(n,i,{enumerable:C.enumerable}),{getValue:function(){return u},setValue:function(ha){u=""+ha},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function o0(n){if(!n._valueTracker){var i=ng(n)?"checked":"value";n._valueTracker=zv(n,i,""+n[i])}}function p(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var u=i.getValue(),C="";return n&&(C=ng(n)?n.checked?"true":"false":n.value),n=C,n!==u?(i.setValue(n),!0):!1}function R(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var W=/[\n"\\]/g;function J(n){return n.replace(W,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Et(n,i,u,C,re,st,ha,qp){n.name="",ha!=null&&typeof ha!="function"&&typeof ha!="symbol"&&typeof ha!="boolean"?n.type=ha:n.removeAttribute("type"),i!=null?ha==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+j1(i)):n.value!==""+j1(i)&&(n.value=""+j1(i)):ha!=="submit"&&ha!=="reset"||n.removeAttribute("value"),i!=null?Dt(n,ha,j1(i)):u!=null?Dt(n,ha,j1(u)):C!=null&&n.removeAttribute("value"),re==null&&st!=null&&(n.defaultChecked=!!st),re!=null&&(n.checked=re&&typeof re!="function"&&typeof re!="symbol"),qp!=null&&typeof qp!="function"&&typeof qp!="symbol"&&typeof qp!="boolean"?n.name=""+j1(qp):n.removeAttribute("name")}function tt(n,i,u,C,re,st,ha,qp){if(st!=null&&typeof st!="function"&&typeof st!="symbol"&&typeof st!="boolean"&&(n.type=st),i!=null||u!=null){if(!(st!=="submit"&&st!=="reset"||i!=null)){o0(n);return}u=u!=null?""+j1(u):"",i=i!=null?""+j1(i):u,qp||i===n.value||(n.value=i),n.defaultValue=i}C=C??re,C=typeof C!="function"&&typeof C!="symbol"&&!!C,n.checked=qp?n.checked:!!C,n.defaultChecked=!!C,ha!=null&&typeof ha!="function"&&typeof ha!="symbol"&&typeof ha!="boolean"&&(n.name=ha),o0(n)}function Dt(n,i,u){i==="number"&&R(n.ownerDocument)===n||n.defaultValue===""+u||(n.defaultValue=""+u)}function It(n,i,u,C){if(n=n.options,i){i={};for(var re=0;re<u.length;re++)i["$"+u[re]]=!0;for(u=0;u<n.length;u++)re=i.hasOwnProperty("$"+n[u].value),n[u].selected!==re&&(n[u].selected=re),re&&C&&(n[u].defaultSelected=!0)}else{for(u=""+j1(u),i=null,re=0;re<n.length;re++){if(n[re].value===u){n[re].selected=!0,C&&(n[re].defaultSelected=!0);return}i!==null||n[re].disabled||(i=n[re])}i!==null&&(i.selected=!0)}}function Mt(n,i,u){if(i!=null&&(i=""+j1(i),i!==n.value&&(n.value=i),u==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=u!=null?""+j1(u):""}function Wt(n,i,u,C){if(i==null){if(C!=null){if(u!=null)throw Error(a(92));if(qo(C)){if(1<C.length)throw Error(a(93));C=C[0]}u=C}u==null&&(u=""),i=u}u=j1(i),n.defaultValue=u,C=n.textContent,C===u&&C!==""&&C!==null&&(n.value=C),o0(n)}function Yt(n,i){if(i){var u=n.firstChild;if(u&&u===n.lastChild&&u.nodeType===3){u.nodeValue=i;return}}n.textContent=i}var Zo=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function wi(n,i,u){var C=i.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?C?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":C?n.setProperty(i,u):typeof u!="number"||u===0||Zo.has(i)?i==="float"?n.cssFloat=u:n[i]=(""+u).trim():n[i]=u+"px"}function aa(n,i,u){if(i!=null&&typeof i!="object")throw Error(a(62));if(n=n.style,u!=null){for(var C in u)!u.hasOwnProperty(C)||i!=null&&i.hasOwnProperty(C)||(C.indexOf("--")===0?n.setProperty(C,""):C==="float"?n.cssFloat="":n[C]="");for(var re in i)C=i[re],i.hasOwnProperty(re)&&u[re]!==C&&wi(n,re,C)}else for(var st in i)i.hasOwnProperty(st)&&wi(n,st,i[st])}function Yo(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ci=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ip=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function $p(n){return Ip.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function Qp(){}var T0=null;function g0(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var U0=null,Y0=null;function Q0(n){var i=s0(n);if(i&&(n=i.stateNode)){var u=n[wg]||null;e:switch(n=i.stateNode,i.type){case"input":if(Et(n,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),i=u.name,u.type==="radio"&&i!=null){for(u=n;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+J(""+i)+'"][type="radio"]'),i=0;i<u.length;i++){var C=u[i];if(C!==n&&C.form===n.form){var re=C[wg]||null;if(!re)throw Error(a(90));Et(C,re.value,re.defaultValue,re.defaultValue,re.checked,re.defaultChecked,re.type,re.name)}}for(i=0;i<u.length;i++)C=u[i],C.form===n.form&&p(C)}break e;case"textarea":Mt(n,u.value,u.defaultValue);break e;case"select":i=u.value,i!=null&&It(n,!!u.multiple,i,!1)}}}var tm=!1;function G0(n,i,u){if(tm)return n(i,u);tm=!0;try{var C=n(i);return C}finally{if(tm=!1,(U0!==null||Y0!==null)&&($_(),U0&&(i=U0,n=Y0,Y0=U0=null,Q0(i),n)))for(i=0;i<n.length;i++)Q0(n[i])}}function Pm(n,i){var u=n.stateNode;if(u===null)return null;var C=u[wg]||null;if(C===null)return null;u=C[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(C=!C.disabled)||(n=n.type,C=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!C;break e;default:n=!1}if(n)return null;if(u&&typeof u!="function")throw Error(a(231,i,typeof u));return u}var km=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),i1=!1;if(km)try{var Qm={};Object.defineProperty(Qm,"passive",{get:function(){i1=!0}}),window.addEventListener("test",Qm,Qm),window.removeEventListener("test",Qm,Qm)}catch{i1=!1}var _1=null,C1=null,a1=null;function I1(){if(a1)return a1;var n,i=C1,u=i.length,C,re="value"in _1?_1.value:_1.textContent,st=re.length;for(n=0;n<u&&i[n]===re[n];n++);var ha=u-n;for(C=1;C<=ha&&i[u-C]===re[st-C];C++);return a1=re.slice(n,1<C?1-C:void 0)}function Fm(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function Km(){return!0}function W1(){return!1}function s1(n){function i(u,C,re,st,ha){this._reactName=u,this._targetInst=re,this.type=C,this.nativeEvent=st,this.target=ha,this.currentTarget=null;for(var qp in n)n.hasOwnProperty(qp)&&(u=n[qp],this[qp]=u?u(st):st[qp]);return this.isDefaultPrevented=(st.defaultPrevented!=null?st.defaultPrevented:st.returnValue===!1)?Km:W1,this.isPropagationStopped=W1,this}return M(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Km)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Km)},persist:function(){},isPersistent:Km}),i}var H1={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},q1=s1(H1),u1=M({},H1,{view:0,detail:0}),eg=s1(u1),kg,J1,b1,Ug=M({},u1,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gy,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==b1&&(b1&&n.type==="mousemove"?(kg=n.screenX-b1.screenX,J1=n.screenY-b1.screenY):J1=kg=0,b1=n),kg)},movementY:function(n){return"movementY"in n?n.movementY:J1}}),gg=s1(Ug),Pg=M({},Ug,{dataTransfer:0}),vg=s1(Pg),jg=M({},u1,{relatedTarget:0}),mv=s1(jg),Fv=M({},H1,{animationName:0,elapsedTime:0,pseudoElement:0}),Pv=s1(Fv),fy=M({},H1,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),ty=s1(fy),wv=M({},H1,{data:0}),py=s1(wv),Zv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ry={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},my={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ry(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=my[n])?!!i[n]:!1}function gy(){return Ry}var Py=M({},u1,{key:function(n){if(n.key){var i=Zv[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=Fm(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?ry[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gy,charCode:function(n){return n.type==="keypress"?Fm(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Fm(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Mv=s1(Py),jv=M({},Ug,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xv=s1(jv),Jv=M({},u1,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gy}),we=s1(Jv),Op=M({},H1,{propertyName:0,elapsedTime:0,pseudoElement:0}),mt=s1(Op),W0=M({},Ug,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),j0=s1(W0),P0=M({},H1,{newState:0,oldState:0}),Wm=s1(P0),dm=[9,13,27,32],U1=km&&"CompositionEvent"in window,gm=null;km&&"documentMode"in document&&(gm=document.documentMode);var qm=km&&"TextEvent"in window&&!gm,Wg=km&&(!U1||gm&&8<gm&&11>=gm),_g=" ",V1=!1;function oy(n,i){switch(n){case"keyup":return dm.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xv(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Og=!1;function Rv(n,i){switch(n){case"compositionend":return xv(i);case"keypress":return i.which!==32?null:(V1=!0,_g);case"textInput":return n=i.data,n===_g&&V1?null:n;default:return null}}function $g(n,i){if(Og)return n==="compositionend"||!U1&&oy(n,i)?(n=I1(),a1=C1=_1=null,Og=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Wg&&i.locale!=="ko"?null:i.data;default:return null}}var tg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vg(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!tg[n.type]:i==="textarea"}function Ev(n,i,u,C){U0?Y0?Y0.push(C):Y0=[C]:U0=C,i=ob(i,"onChange"),0<i.length&&(u=new q1("onChange","change",null,u,C),n.push({event:u,listeners:i}))}var ag=null,fv=null;function Zg(n){L5(n,0)}function Fg(n){var i=J0(n);if(p(i))return n}function pv(n,i){if(n==="change")return i}var Dy=!1;if(km){var rx;if(km){var nx="oninput"in document;if(!nx){var Tx=document.createElement("div");Tx.setAttribute("oninput","return;"),nx=typeof Tx.oninput=="function"}rx=nx}else rx=!1;Dy=rx&&(!document.documentMode||9<document.documentMode)}function Qx(){ag&&(ag.detachEvent("onpropertychange",e2),fv=ag=null)}function e2(n){if(n.propertyName==="value"&&Fg(fv)){var i=[];Ev(i,fv,n,g0(n)),G0(Zg,i)}}function I3(n,i,u){n==="focusin"?(Qx(),ag=i,fv=u,ag.attachEvent("onpropertychange",e2)):n==="focusout"&&Qx()}function Q5(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Fg(fv)}function ew(n,i){if(n==="click")return Fg(i)}function D_(n,i){if(n==="input"||n==="change")return Fg(i)}function X2(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var $y=typeof Object.is=="function"?Object.is:X2;function v2(n,i){if($y(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var u=Object.keys(n),C=Object.keys(i);if(u.length!==C.length)return!1;for(C=0;C<u.length;C++){var re=u[C];if(!g1.call(i,re)||!$y(n[re],i[re]))return!1}return!0}function U3(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function F3(n,i){var u=U3(n);n=0;for(var C;u;){if(u.nodeType===3){if(C=n+u.textContent.length,n<=i&&C>=i)return{node:u,offset:i-n};n=C}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=U3(u)}}function B3(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?B3(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function Tb(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=R(n.document);i instanceof n.HTMLIFrameElement;){try{var u=typeof i.contentWindow.location.href=="string"}catch{u=!1}if(u)n=i.contentWindow;else break;i=R(n.document)}return i}function zx(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}var Mb=km&&"documentMode"in document&&11>=document.documentMode,Px=null,L_=null,q2=null,Eb=!1;function Ab(n,i,u){var C=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Eb||Px==null||Px!==R(C)||(C=Px,"selectionStart"in C&&zx(C)?C={start:C.selectionStart,end:C.selectionEnd}:(C=(C.ownerDocument&&C.ownerDocument.defaultView||window).getSelection(),C={anchorNode:C.anchorNode,anchorOffset:C.anchorOffset,focusNode:C.focusNode,focusOffset:C.focusOffset}),q2&&v2(q2,C)||(q2=C,C=ob(L_,"onSelect"),0<C.length&&(i=new q1("onSelect","select",null,i,u),n.push({event:i,listeners:C}),i.target=Px)))}function t2(n,i){var u={};return u[n.toLowerCase()]=i.toLowerCase(),u["Webkit"+n]="webkit"+i,u["Moz"+n]="moz"+i,u}var y2={animationend:t2("Animation","AnimationEnd"),animationiteration:t2("Animation","AnimationIteration"),animationstart:t2("Animation","AnimationStart"),transitionrun:t2("Transition","TransitionRun"),transitionstart:t2("Transition","TransitionStart"),transitioncancel:t2("Transition","TransitionCancel"),transitionend:t2("Transition","TransitionEnd")},k_={},Cb={};km&&(Cb=document.createElement("div").style,"AnimationEvent"in window||(delete y2.animationend.animation,delete y2.animationiteration.animation,delete y2.animationstart.animation),"TransitionEvent"in window||delete y2.transitionend.transition);function r2(n){if(k_[n])return k_[n];if(!y2[n])return n;var i=y2[n],u;for(u in i)if(i.hasOwnProperty(u)&&u in Cb)return k_[n]=i[u];return n}var j3=r2("animationend"),V3=r2("animationiteration"),H3=r2("animationstart"),tw=r2("transitionrun"),rw=r2("transitionstart"),nw=r2("transitioncancel"),Rb=r2("transitionend"),G3=new Map,Db="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Db.push("scrollEnd");function ax(n,i){G3.set(n,i),jm(i,[n])}var N_=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},Zy=[],n2=0,O_=0;function z_(){for(var n=n2,i=O_=n2=0;i<n;){var u=Zy[i];Zy[i++]=null;var C=Zy[i];Zy[i++]=null;var re=Zy[i];Zy[i++]=null;var st=Zy[i];if(Zy[i++]=null,C!==null&&re!==null){var ha=C.pending;ha===null?re.next=re:(re.next=ha.next,ha.next=re),C.pending=re}st!==0&&W3(u,re,st)}}function Y2(n,i,u,C){Zy[n2++]=n,Zy[n2++]=i,Zy[n2++]=u,Zy[n2++]=C,O_|=C,n.lanes|=C,n=n.alternate,n!==null&&(n.lanes|=C)}function Lb(n,i,u,C){return Y2(n,i,u,C),P_(n)}function a2(n,i){return Y2(n,null,null,i),P_(n)}function W3(n,i,u){n.lanes|=u;var C=n.alternate;C!==null&&(C.lanes|=u);for(var re=!1,st=n.return;st!==null;)st.childLanes|=u,C=st.alternate,C!==null&&(C.childLanes|=u),st.tag===22&&(n=st.stateNode,n===null||n._visibility&1||(re=!0)),n=st,st=st.return;return n.tag===3?(st=n.stateNode,re&&i!==null&&(re=31-Um(u),n=st.hiddenUpdates,C=n[re],C===null?n[re]=[i]:C.push(i),i.lane=u|536870912),st):null}function P_(n){if(50<N2)throw N2=0,a3=null,Error(a(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var i2={};function aw(n,i,u,C){this.tag=n,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=C,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gy(n,i,u,C){return new aw(n,i,u,C)}function kb(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Mx(n,i){var u=n.alternate;return u===null?(u=Gy(n.tag,i,n.key,n.mode),u.elementType=n.elementType,u.type=n.type,u.stateNode=n.stateNode,u.alternate=n,n.alternate=u):(u.pendingProps=i,u.type=n.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=n.flags&65011712,u.childLanes=n.childLanes,u.lanes=n.lanes,u.child=n.child,u.memoizedProps=n.memoizedProps,u.memoizedState=n.memoizedState,u.updateQueue=n.updateQueue,i=n.dependencies,u.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},u.sibling=n.sibling,u.index=n.index,u.ref=n.ref,u.refCleanup=n.refCleanup,u}function X3(n,i){n.flags&=65011714;var u=n.alternate;return u===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=u.childLanes,n.lanes=u.lanes,n.child=u.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=u.memoizedProps,n.memoizedState=u.memoizedState,n.updateQueue=u.updateQueue,n.type=u.type,i=u.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function I_(n,i,u,C,re,st){var ha=0;if(C=n,typeof n=="function")kb(n)&&(ha=1);else if(typeof n=="string")ha=Y5(n,u,Dp.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case zt:return n=Gy(31,u,i,re),n.elementType=zt,n.lanes=st,n;case ee:return o2(u.children,re,st,i);case le:ha=8,re|=24;break;case K:return n=Gy(12,u,i,re|2),n.elementType=K,n.lanes=st,n;case wt:return n=Gy(13,u,i,re),n.elementType=wt,n.lanes=st,n;case bt:return n=Gy(19,u,i,re),n.elementType=bt,n.lanes=st,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case q:ha=10;break e;case vt:ha=9;break e;case Q:ha=11;break e;case Ut:ha=14;break e;case it:ha=16,C=null;break e}ha=29,u=Error(a(130,n===null?"null":typeof n,"")),C=null}return i=Gy(ha,u,i,re),i.elementType=n,i.type=C,i.lanes=st,i}function o2(n,i,u,C){return n=Gy(7,n,C,i),n.lanes=u,n}function Nb(n,i,u){return n=Gy(6,n,null,i),n.lanes=u,n}function q3(n){var i=Gy(18,null,null,0);return i.stateNode=n,i}function U_(n,i,u){return i=Gy(4,n.children!==null?n.children:[],n.key,i),i.lanes=u,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}var Ob=new WeakMap;function ix(n,i){if(typeof n=="object"&&n!==null){var u=Ob.get(n);return u!==void 0?u:(i={value:n,source:i,stack:o1(i)},Ob.set(n,i),i)}return{value:n,source:i,stack:o1(i)}}var x2=[],Ix=0,F_=null,$2=0,Wy=[],ox=0,Ex=null,mx=1,gx="";function Ax(n,i){x2[Ix++]=$2,x2[Ix++]=F_,F_=n,$2=i}function Y3(n,i,u){Wy[ox++]=mx,Wy[ox++]=gx,Wy[ox++]=Ex,Ex=n;var C=mx;n=gx;var re=32-Um(C)-1;C&=~(1<<re),u+=1;var st=32-Um(i)+re;if(30<st){var ha=re-re%5;st=(C&(1<<ha)-1).toString(32),C>>=ha,re-=ha,mx=1<<32-Um(i)+re|u<<re|C,gx=st+n}else mx=1<<st|u<<re|C,gx=n}function Z2(n){n.return!==null&&(Ax(n,1),Y3(n,1,0))}function zb(n){for(;n===F_;)F_=x2[--Ix],x2[Ix]=null,$2=x2[--Ix],x2[Ix]=null;for(;n===Ex;)Ex=Wy[--ox],Wy[ox]=null,gx=Wy[--ox],Wy[ox]=null,mx=Wy[--ox],Wy[ox]=null}function $3(n,i){Wy[ox++]=mx,Wy[ox++]=gx,Wy[ox++]=Ex,mx=i.id,gx=i.overflow,Ex=n}var Iy=null,sy=null,Av=!1,Cx=null,sx=!1,Pb=Error(a(519));function Ux(n){var i=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw J2(ix(i,n)),Pb}function Z3(n){var i=n.stateNode,u=n.type,C=n.memoizedProps;switch(i[Lv]=n,i[wg]=C,u){case"dialog":bv("cancel",i),bv("close",i);break;case"iframe":case"object":case"embed":bv("load",i);break;case"video":case"audio":for(u=0;u<U2.length;u++)bv(U2[u],i);break;case"source":bv("error",i);break;case"img":case"image":case"link":bv("error",i),bv("load",i);break;case"details":bv("toggle",i);break;case"input":bv("invalid",i),tt(i,C.value,C.defaultValue,C.checked,C.defaultChecked,C.type,C.name,!0);break;case"select":bv("invalid",i);break;case"textarea":bv("invalid",i),Wt(i,C.value,C.defaultValue,C.children)}u=C.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||i.textContent===""+u||C.suppressHydrationWarning===!0||sb(i.textContent,u)?(C.popover!=null&&(bv("beforetoggle",i),bv("toggle",i)),C.onScroll!=null&&bv("scroll",i),C.onScrollEnd!=null&&bv("scrollend",i),C.onClick!=null&&(i.onclick=Qp),i=!0):i=!1,i||Ux(n,!0)}function Ib(n){for(Iy=n.return;Iy;)switch(Iy.tag){case 5:case 31:case 13:sx=!1;return;case 27:case 3:sx=!0;return;default:Iy=Iy.return}}function _2(n){if(n!==Iy)return!1;if(!Av)return Ib(n),Av=!0,!1;var i=n.tag,u;if((u=i!==3&&i!==27)&&((u=i===5)&&(u=n.type,u=!(u!=="form"&&u!=="button")||__(n.type,n.memoizedProps)),u=!u),u&&sy&&Ux(n),Ib(n),i===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(a(317));sy=S3(n)}else if(i===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(a(317));sy=S3(n)}else i===27?(i=sy,qx(n.type)?(n=ub,ub=null,sy=n):sy=i):sy=Iy?ux(n.stateNode.nextSibling):null;return!0}function s2(){sy=Iy=null,Av=!1}function Ub(){var n=Cx;return n!==null&&(qy===null?qy=n:qy.push.apply(qy,n),Cx=null),n}function J2(n){Cx===null?Cx=[n]:Cx.push(n)}var K2=Pp(null),Fx=null,Rx=null;function Bx(n,i,u){x0(K2,i._currentValue),i._currentValue=u}function Dx(n){n._currentValue=K2.current,d0(K2)}function Fb(n,i,u){for(;n!==null;){var C=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,C!==null&&(C.childLanes|=i)):C!==null&&(C.childLanes&i)!==i&&(C.childLanes|=i),n===u)break;n=n.return}}function b2(n,i,u,C){var re=n.child;for(re!==null&&(re.return=n);re!==null;){var st=re.dependencies;if(st!==null){var ha=re.child;st=st.firstContext;e:for(;st!==null;){var qp=st;st=re;for(var q0=0;q0<i.length;q0++)if(qp.context===i[q0]){st.lanes|=u,qp=st.alternate,qp!==null&&(qp.lanes|=u),Fb(st.return,u,n),C||(ha=null);break e}st=qp.next}}else if(re.tag===18){if(ha=re.return,ha===null)throw Error(a(341));ha.lanes|=u,st=ha.alternate,st!==null&&(st.lanes|=u),Fb(ha,u,n),ha=null}else ha=re.child;if(ha!==null)ha.return=re;else for(ha=re;ha!==null;){if(ha===n){ha=null;break}if(re=ha.sibling,re!==null){re.return=ha.return,ha=re;break}ha=ha.return}re=ha}}function l2(n,i,u,C){n=null;for(var re=i,st=!1;re!==null;){if(!st){if((re.flags&524288)!==0)st=!0;else if((re.flags&262144)!==0)break}if(re.tag===10){var ha=re.alternate;if(ha===null)throw Error(a(387));if(ha=ha.memoizedProps,ha!==null){var qp=re.type;$y(re.pendingProps.value,ha.value)||(n!==null?n.push(qp):n=[qp])}}else if(re===y0.current){if(ha=re.alternate,ha===null)throw Error(a(387));ha.memoizedState.memoizedState!==re.memoizedState.memoizedState&&(n!==null?n.push(H2):n=[H2])}re=re.return}n!==null&&b2(i,n,u,C),i.flags|=262144}function B_(n){for(n=n.firstContext;n!==null;){if(!$y(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function c2(n){Fx=n,Rx=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Uy(n){return Bb(Fx,n)}function w2(n,i){return Fx===null&&c2(n),Bb(n,i)}function Bb(n,i){var u=i._currentValue;if(i={context:i,memoizedValue:u,next:null},Rx===null){if(n===null)throw Error(a(308));Rx=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else Rx=Rx.next=i;return u}var jb=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(u,C){n.push(C)}};this.abort=function(){i.aborted=!0,n.forEach(function(u){return u()})}},iw=r.unstable_scheduleCallback,ow=r.unstable_NormalPriority,Ty={$$typeof:q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Vb(){return{controller:new jb,data:new Map,refCount:0}}function Q2(n){n.refCount--,n.refCount===0&&iw(ow,function(){n.controller.abort()})}var u2=null,j_=0,S2=0,T2=null;function sw(n,i){if(u2===null){var u=u2=[];j_=0,S2=h3(),T2={status:"pending",value:void 0,then:function(C){u.push(C)}}}return j_++,i.then(J3,J3),i}function J3(){if(--j_===0&&u2!==null){T2!==null&&(T2.status="fulfilled");var n=u2;u2=null,S2=0,T2=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function Hb(n,i){var u=[],C={status:"pending",value:null,reason:null,then:function(re){u.push(re)}};return n.then(function(){C.status="fulfilled",C.value=i;for(var re=0;re<u.length;re++)(0,u[re])(i)},function(re){for(C.status="rejected",C.reason=re,re=0;re<u.length;re++)(0,u[re])(void 0)}),C}var K3=ae.S;ae.S=function(n,i){_x=Xp(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&sw(n,i),K3!==null&&K3(n,i)};var jx=Pp(null);function Gb(){var n=jx.current;return n!==null?n:Ag.pooledCache}function e_(n,i){i===null?x0(jx,jx.current):x0(jx,i.pool)}function Q3(){var n=Gb();return n===null?null:{parent:Ty._currentValue,pool:n}}var M2=Error(a(460)),Wb=Error(a(474)),V_=Error(a(542)),H_={then:function(){}};function e5(n){return n=n.status,n==="fulfilled"||n==="rejected"}function t5(n,i,u){switch(u=n[u],u===void 0?n.push(i):u!==i&&(i.then(Qp,Qp),i=u),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,Xb(n),n;default:if(typeof i.status=="string")i.then(Qp,Qp);else{if(n=Ag,n!==null&&100<n.shellSuspendCounter)throw Error(a(482));n=i,n.status="pending",n.then(function(C){if(i.status==="pending"){var re=i;re.status="fulfilled",re.value=C}},function(C){if(i.status==="pending"){var re=i;re.status="rejected",re.reason=C}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,Xb(n),n}throw h2=i,M2}}function d2(n){try{var i=n._init;return i(n._payload)}catch(u){throw u!==null&&typeof u=="object"&&typeof u.then=="function"?(h2=u,M2):u}}var h2=null;function r5(){if(h2===null)throw Error(a(459));var n=h2;return h2=null,n}function Xb(n){if(n===M2||n===V_)throw Error(a(483))}var E2=null,t_=0;function G_(n){var i=t_;return t_+=1,E2===null&&(E2=[]),t5(E2,n,i)}function r_(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function A2(n,i){throw i.$$typeof===I?Error(a(525)):(n=Object.prototype.toString.call(i),Error(a(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function n_(n){function i(Em,hm){if(n){var Om=Em.deletions;Om===null?(Em.deletions=[hm],Em.flags|=16):Om.push(hm)}}function u(Em,hm){if(!n)return null;for(;hm!==null;)i(Em,hm),hm=hm.sibling;return null}function C(Em){for(var hm=new Map;Em!==null;)Em.key!==null?hm.set(Em.key,Em):hm.set(Em.index,Em),Em=Em.sibling;return hm}function re(Em,hm){return Em=Mx(Em,hm),Em.index=0,Em.sibling=null,Em}function st(Em,hm,Om){return Em.index=Om,n?(Om=Em.alternate,Om!==null?(Om=Om.index,Om<hm?(Em.flags|=67108866,hm):Om):(Em.flags|=67108866,hm)):(Em.flags|=1048576,hm)}function ha(Em){return n&&Em.alternate===null&&(Em.flags|=67108866),Em}function qp(Em,hm,Om,c1){return hm===null||hm.tag!==6?(hm=Nb(Om,Em.mode,c1),hm.return=Em,hm):(hm=re(hm,Om),hm.return=Em,hm)}function q0(Em,hm,Om,c1){var bg=Om.type;return bg===ee?Gm(Em,hm,Om.props.children,c1,Om.key):hm!==null&&(hm.elementType===bg||typeof bg=="object"&&bg!==null&&bg.$$typeof===it&&d2(bg)===hm.type)?(hm=re(hm,Om.props),r_(hm,Om),hm.return=Em,hm):(hm=I_(Om.type,Om.key,Om.props,null,Em.mode,c1),r_(hm,Om),hm.return=Em,hm)}function Dm(Em,hm,Om,c1){return hm===null||hm.tag!==4||hm.stateNode.containerInfo!==Om.containerInfo||hm.stateNode.implementation!==Om.implementation?(hm=U_(Om,Em.mode,c1),hm.return=Em,hm):(hm=re(hm,Om.children||[]),hm.return=Em,hm)}function Gm(Em,hm,Om,c1,bg){return hm===null||hm.tag!==7?(hm=o2(Om,Em.mode,c1,bg),hm.return=Em,hm):(hm=re(hm,Om),hm.return=Em,hm)}function pm(Em,hm,Om){if(typeof hm=="string"&&hm!==""||typeof hm=="number"||typeof hm=="bigint")return hm=Nb(""+hm,Em.mode,Om),hm.return=Em,hm;if(typeof hm=="object"&&hm!==null){switch(hm.$$typeof){case V:return Om=I_(hm.type,hm.key,hm.props,null,Em.mode,Om),r_(Om,hm),Om.return=Em,Om;case Z:return hm=U_(hm,Em.mode,Om),hm.return=Em,hm;case it:return hm=d2(hm),pm(Em,hm,Om)}if(qo(hm)||kp(hm))return hm=o2(hm,Em.mode,Om,null),hm.return=Em,hm;if(typeof hm.then=="function")return pm(Em,G_(hm),Om);if(hm.$$typeof===q)return pm(Em,w2(Em,hm),Om);A2(Em,hm)}return null}function _m(Em,hm,Om,c1){var bg=hm!==null?hm.key:null;if(typeof Om=="string"&&Om!==""||typeof Om=="number"||typeof Om=="bigint")return bg!==null?null:qp(Em,hm,""+Om,c1);if(typeof Om=="object"&&Om!==null){switch(Om.$$typeof){case V:return Om.key===bg?q0(Em,hm,Om,c1):null;case Z:return Om.key===bg?Dm(Em,hm,Om,c1):null;case it:return Om=d2(Om),_m(Em,hm,Om,c1)}if(qo(Om)||kp(Om))return bg!==null?null:Gm(Em,hm,Om,c1,null);if(typeof Om.then=="function")return _m(Em,hm,G_(Om),c1);if(Om.$$typeof===q)return _m(Em,hm,w2(Em,Om),c1);A2(Em,Om)}return null}function Cm(Em,hm,Om,c1,bg){if(typeof c1=="string"&&c1!==""||typeof c1=="number"||typeof c1=="bigint")return Em=Em.get(Om)||null,qp(hm,Em,""+c1,bg);if(typeof c1=="object"&&c1!==null){switch(c1.$$typeof){case V:return Em=Em.get(c1.key===null?Om:c1.key)||null,q0(hm,Em,c1,bg);case Z:return Em=Em.get(c1.key===null?Om:c1.key)||null,Dm(hm,Em,c1,bg);case it:return c1=d2(c1),Cm(Em,hm,Om,c1,bg)}if(qo(c1)||kp(c1))return Em=Em.get(Om)||null,Gm(hm,Em,c1,bg,null);if(typeof c1.then=="function")return Cm(Em,hm,Om,G_(c1),bg);if(c1.$$typeof===q)return Cm(Em,hm,Om,w2(hm,c1),bg);A2(hm,c1)}return null}function G1(Em,hm,Om,c1){for(var bg=null,Yg=null,pg=hm,nv=hm=0,Tv=null;pg!==null&&nv<Om.length;nv++){pg.index>nv?(Tv=pg,pg=null):Tv=pg.sibling;var dv=_m(Em,pg,Om[nv],c1);if(dv===null){pg===null&&(pg=Tv);break}n&&pg&&dv.alternate===null&&i(Em,pg),hm=st(dv,hm,nv),Yg===null?bg=dv:Yg.sibling=dv,Yg=dv,pg=Tv}if(nv===Om.length)return u(Em,pg),Av&&Ax(Em,nv),bg;if(pg===null){for(;nv<Om.length;nv++)pg=pm(Em,Om[nv],c1),pg!==null&&(hm=st(pg,hm,nv),Yg===null?bg=pg:Yg.sibling=pg,Yg=pg);return Av&&Ax(Em,nv),bg}for(pg=C(pg);nv<Om.length;nv++)Tv=Cm(pg,Em,nv,Om[nv],c1),Tv!==null&&(n&&Tv.alternate!==null&&pg.delete(Tv.key===null?nv:Tv.key),hm=st(Tv,hm,nv),Yg===null?bg=Tv:Yg.sibling=Tv,Yg=Tv);return n&&pg.forEach(function(hy){return i(Em,hy)}),Av&&Ax(Em,nv),bg}function hg(Em,hm,Om,c1){if(Om==null)throw Error(a(151));for(var bg=null,Yg=null,pg=hm,nv=hm=0,Tv=null,dv=Om.next();pg!==null&&!dv.done;nv++,dv=Om.next()){pg.index>nv?(Tv=pg,pg=null):Tv=pg.sibling;var hy=_m(Em,pg,dv.value,c1);if(hy===null){pg===null&&(pg=Tv);break}n&&pg&&hy.alternate===null&&i(Em,pg),hm=st(hy,hm,nv),Yg===null?bg=hy:Yg.sibling=hy,Yg=hy,pg=Tv}if(dv.done)return u(Em,pg),Av&&Ax(Em,nv),bg;if(pg===null){for(;!dv.done;nv++,dv=Om.next())dv=pm(Em,dv.value,c1),dv!==null&&(hm=st(dv,hm,nv),Yg===null?bg=dv:Yg.sibling=dv,Yg=dv);return Av&&Ax(Em,nv),bg}for(pg=C(pg);!dv.done;nv++,dv=Om.next())dv=Cm(pg,Em,nv,dv.value,c1),dv!==null&&(n&&dv.alternate!==null&&pg.delete(dv.key===null?nv:dv.key),hm=st(dv,hm,nv),Yg===null?bg=dv:Yg.sibling=dv,Yg=dv);return n&&pg.forEach(function(dx){return i(Em,dx)}),Av&&Ax(Em,nv),bg}function qg(Em,hm,Om,c1){if(typeof Om=="object"&&Om!==null&&Om.type===ee&&Om.key===null&&(Om=Om.props.children),typeof Om=="object"&&Om!==null){switch(Om.$$typeof){case V:e:{for(var bg=Om.key;hm!==null;){if(hm.key===bg){if(bg=Om.type,bg===ee){if(hm.tag===7){u(Em,hm.sibling),c1=re(hm,Om.props.children),c1.return=Em,Em=c1;break e}}else if(hm.elementType===bg||typeof bg=="object"&&bg!==null&&bg.$$typeof===it&&d2(bg)===hm.type){u(Em,hm.sibling),c1=re(hm,Om.props),r_(c1,Om),c1.return=Em,Em=c1;break e}u(Em,hm);break}else i(Em,hm);hm=hm.sibling}Om.type===ee?(c1=o2(Om.props.children,Em.mode,c1,Om.key),c1.return=Em,Em=c1):(c1=I_(Om.type,Om.key,Om.props,null,Em.mode,c1),r_(c1,Om),c1.return=Em,Em=c1)}return ha(Em);case Z:e:{for(bg=Om.key;hm!==null;){if(hm.key===bg)if(hm.tag===4&&hm.stateNode.containerInfo===Om.containerInfo&&hm.stateNode.implementation===Om.implementation){u(Em,hm.sibling),c1=re(hm,Om.children||[]),c1.return=Em,Em=c1;break e}else{u(Em,hm);break}else i(Em,hm);hm=hm.sibling}c1=U_(Om,Em.mode,c1),c1.return=Em,Em=c1}return ha(Em);case it:return Om=d2(Om),qg(Em,hm,Om,c1)}if(qo(Om))return G1(Em,hm,Om,c1);if(kp(Om)){if(bg=kp(Om),typeof bg!="function")throw Error(a(150));return Om=bg.call(Om),hg(Em,hm,Om,c1)}if(typeof Om.then=="function")return qg(Em,hm,G_(Om),c1);if(Om.$$typeof===q)return qg(Em,hm,w2(Em,Om),c1);A2(Em,Om)}return typeof Om=="string"&&Om!==""||typeof Om=="number"||typeof Om=="bigint"?(Om=""+Om,hm!==null&&hm.tag===6?(u(Em,hm.sibling),c1=re(hm,Om),c1.return=Em,Em=c1):(u(Em,hm),c1=Nb(Om,Em.mode,c1),c1.return=Em,Em=c1),ha(Em)):u(Em,hm)}return function(Em,hm,Om,c1){try{t_=0;var bg=qg(Em,hm,Om,c1);return E2=null,bg}catch(pg){if(pg===M2||pg===V_)throw pg;var Yg=Gy(29,pg,null,Em.mode);return Yg.lanes=c1,Yg.return=Em,Yg}finally{}}}var Vx=n_(!0),n5=n_(!1),hx=!1;function qb(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function W_(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Hx(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function fx(n,i,u){var C=n.updateQueue;if(C===null)return null;if(C=C.shared,(lv&2)!==0){var re=C.pending;return re===null?i.next=i:(i.next=re.next,re.next=i),C.pending=i,i=P_(n),W3(n,null,u),i}return Y2(n,C,i,u),P_(n)}function f2(n,i,u){if(i=i.updateQueue,i!==null&&(i=i.shared,(u&4194048)!==0)){var C=i.lanes;C&=n.pendingLanes,u|=C,i.lanes=u,Gv(n,u)}}function a_(n,i){var u=n.updateQueue,C=n.alternate;if(C!==null&&(C=C.updateQueue,u===C)){var re=null,st=null;if(u=u.firstBaseUpdate,u!==null){do{var ha={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};st===null?re=st=ha:st=st.next=ha,u=u.next}while(u!==null);st===null?re=st=i:st=st.next=i}else re=st=i;u={baseState:C.baseState,firstBaseUpdate:re,lastBaseUpdate:st,shared:C.shared,callbacks:C.callbacks},n.updateQueue=u;return}n=u.lastBaseUpdate,n===null?u.firstBaseUpdate=i:n.next=i,u.lastBaseUpdate=i}var Yb=!1;function i_(){if(Yb){var n=T2;if(n!==null)throw n}}function o_(n,i,u,C){Yb=!1;var re=n.updateQueue;hx=!1;var st=re.firstBaseUpdate,ha=re.lastBaseUpdate,qp=re.shared.pending;if(qp!==null){re.shared.pending=null;var q0=qp,Dm=q0.next;q0.next=null,ha===null?st=Dm:ha.next=Dm,ha=q0;var Gm=n.alternate;Gm!==null&&(Gm=Gm.updateQueue,qp=Gm.lastBaseUpdate,qp!==ha&&(qp===null?Gm.firstBaseUpdate=Dm:qp.next=Dm,Gm.lastBaseUpdate=q0))}if(st!==null){var pm=re.baseState;ha=0,Gm=Dm=q0=null,qp=st;do{var _m=qp.lane&-536870913,Cm=_m!==qp.lane;if(Cm?(zg&_m)===_m:(C&_m)===_m){_m!==0&&_m===S2&&(Yb=!0),Gm!==null&&(Gm=Gm.next={lane:0,tag:qp.tag,payload:qp.payload,callback:null,next:null});e:{var G1=n,hg=qp;_m=i;var qg=u;switch(hg.tag){case 1:if(G1=hg.payload,typeof G1=="function"){pm=G1.call(qg,pm,_m);break e}pm=G1;break e;case 3:G1.flags=G1.flags&-65537|128;case 0:if(G1=hg.payload,_m=typeof G1=="function"?G1.call(qg,pm,_m):G1,_m==null)break e;pm=M({},pm,_m);break e;case 2:hx=!0}}_m=qp.callback,_m!==null&&(n.flags|=64,Cm&&(n.flags|=8192),Cm=re.callbacks,Cm===null?re.callbacks=[_m]:Cm.push(_m))}else Cm={lane:_m,tag:qp.tag,payload:qp.payload,callback:qp.callback,next:null},Gm===null?(Dm=Gm=Cm,q0=pm):Gm=Gm.next=Cm,ha|=_m;if(qp=qp.next,qp===null){if(qp=re.shared.pending,qp===null)break;Cm=qp,qp=Cm.next,Cm.next=null,re.lastBaseUpdate=Cm,re.shared.pending=null}}while(!0);Gm===null&&(q0=pm),re.baseState=q0,re.firstBaseUpdate=Dm,re.lastBaseUpdate=Gm,st===null&&(re.shared.lanes=0),By|=ha,n.lanes=ha,n.memoizedState=pm}}function a5(n,i){if(typeof n!="function")throw Error(a(191,n));n.call(i)}function i5(n,i){var u=n.callbacks;if(u!==null)for(n.callbacks=null,n=0;n<u.length;n++)a5(u[n],i)}var C2=Pp(null),s_=Pp(0);function o5(n,i){n=Oy,x0(s_,n),x0(C2,i),Oy=n|i.baseLanes}function X_(){x0(s_,Oy),x0(C2,C2.current)}function $b(){Oy=s_.current,d0(C2),d0(s_)}var Xy=Pp(null),lx=null;function Gx(n){var i=n.alternate;x0(Sv,Sv.current&1),x0(Xy,n),lx===null&&(i===null||C2.current!==null||i.memoizedState!==null)&&(lx=n)}function Zb(n){x0(Sv,Sv.current),x0(Xy,n),lx===null&&(lx=n)}function s5(n){n.tag===22?(x0(Sv,Sv.current),x0(Xy,n),lx===null&&(lx=n)):Wx()}function Wx(){x0(Sv,Sv.current),x0(Xy,Xy.current)}function Jy(n){d0(Xy),lx===n&&(lx=null),d0(Sv)}var Sv=Pp(0);function Ly(n){for(var i=n;i!==null;){if(i.tag===13){var u=i.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||w3(u)||B2(u)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Lx=0,cv=null,qv=null,My=null,q_=!1,R2=!1,p2=!1,Y_=0,l_=0,D2=null,lw=0;function by(){throw Error(a(321))}function Jb(n,i){if(i===null)return!1;for(var u=0;u<i.length&&u<n.length;u++)if(!$y(n[u],i[u]))return!1;return!0}function Kb(n,i,u,C,re,st){return Lx=st,cv=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,ae.H=n===null||n.memoizedState===null?jt:Fp,p2=!1,st=u(C,re),p2=!1,R2&&(st=c5(i,u,C,re)),l5(n),st}function l5(n){ae.H=$o;var i=qv!==null&&qv.next!==null;if(Lx=0,My=qv=cv=null,q_=!1,l_=0,D2=null,i)throw Error(a(300));n===null||Ht||(n=n.dependencies,n!==null&&B_(n)&&(Ht=!0))}function c5(n,i,u,C){cv=n;var re=0;do{if(R2&&(D2=null),l_=0,R2=!1,25<=re)throw Error(a(301));if(re+=1,My=qv=null,n.updateQueue!=null){var st=n.updateQueue;st.lastEffect=null,st.events=null,st.stores=null,st.memoCache!=null&&(st.memoCache.index=0)}ae.H=i0,st=i(u,C)}while(R2);return st}function cw(){var n=ae.H,i=n.useState()[0];return i=typeof i.then=="function"?h(i):i,n=n.useState()[0],(qv!==null?qv.memoizedState:null)!==n&&(cv.flags|=1024),i}function Qb(){var n=Y_!==0;return Y_=0,n}function e3(n,i,u){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~u}function Ue(n){if(q_){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}q_=!1}Lx=0,My=qv=cv=null,R2=!1,l_=Y_=0,D2=null}function ve(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return My===null?cv.memoizedState=My=n:My=My.next=n,My}function v(){if(qv===null){var n=cv.alternate;n=n!==null?n.memoizedState:null}else n=qv.next;var i=My===null?cv.memoizedState:My.next;if(i!==null)My=i,qv=n;else{if(n===null)throw cv.alternate===null?Error(a(467)):Error(a(310));qv=n,n={memoizedState:qv.memoizedState,baseState:qv.baseState,baseQueue:qv.baseQueue,queue:qv.queue,next:null},My===null?cv.memoizedState=My=n:My=My.next=n}return My}function c(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function h(n){var i=l_;return l_+=1,D2===null&&(D2=[]),n=t5(D2,n,i),i=cv,(My===null?i.memoizedState:My.next)===null&&(i=i.alternate,ae.H=i===null||i.memoizedState===null?jt:Fp),n}function _(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return h(n);if(n.$$typeof===q)return Uy(n)}throw Error(a(438,String(n)))}function y(n){var i=null,u=cv.updateQueue;if(u!==null&&(i=u.memoCache),i==null){var C=cv.alternate;C!==null&&(C=C.updateQueue,C!==null&&(C=C.memoCache,C!=null&&(i={data:C.data.map(function(re){return re.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),u===null&&(u=c(),cv.updateQueue=u),u.memoCache=i,u=i.data[i.index],u===void 0)for(u=i.data[i.index]=Array(n),C=0;C<n;C++)u[C]=Zt;return i.index++,u}function x(n,i){return typeof i=="function"?i(n):i}function w(n){var i=v();return A(i,qv,n)}function A(n,i,u){var C=n.queue;if(C===null)throw Error(a(311));C.lastRenderedReducer=u;var re=n.baseQueue,st=C.pending;if(st!==null){if(re!==null){var ha=re.next;re.next=st.next,st.next=ha}i.baseQueue=re=st,C.pending=null}if(st=n.baseState,re===null)n.memoizedState=st;else{i=re.next;var qp=ha=null,q0=null,Dm=i,Gm=!1;do{var pm=Dm.lane&-536870913;if(pm!==Dm.lane?(zg&pm)===pm:(Lx&pm)===pm){var _m=Dm.revertLane;if(_m===0)q0!==null&&(q0=q0.next={lane:0,revertLane:0,gesture:null,action:Dm.action,hasEagerState:Dm.hasEagerState,eagerState:Dm.eagerState,next:null}),pm===S2&&(Gm=!0);else if((Lx&_m)===_m){Dm=Dm.next,_m===S2&&(Gm=!0);continue}else pm={lane:0,revertLane:Dm.revertLane,gesture:null,action:Dm.action,hasEagerState:Dm.hasEagerState,eagerState:Dm.eagerState,next:null},q0===null?(qp=q0=pm,ha=st):q0=q0.next=pm,cv.lanes|=_m,By|=_m;pm=Dm.action,p2&&u(st,pm),st=Dm.hasEagerState?Dm.eagerState:u(st,pm)}else _m={lane:pm,revertLane:Dm.revertLane,gesture:Dm.gesture,action:Dm.action,hasEagerState:Dm.hasEagerState,eagerState:Dm.eagerState,next:null},q0===null?(qp=q0=_m,ha=st):q0=q0.next=_m,cv.lanes|=pm,By|=pm;Dm=Dm.next}while(Dm!==null&&Dm!==i);if(q0===null?ha=st:q0.next=qp,!$y(st,n.memoizedState)&&(Ht=!0,Gm&&(u=T2,u!==null)))throw u;n.memoizedState=st,n.baseState=ha,n.baseQueue=q0,C.lastRenderedState=st}return re===null&&(C.lanes=0),[n.memoizedState,C.dispatch]}function d(n){var i=v(),u=i.queue;if(u===null)throw Error(a(311));u.lastRenderedReducer=n;var C=u.dispatch,re=u.pending,st=i.memoizedState;if(re!==null){u.pending=null;var ha=re=re.next;do st=n(st,ha.action),ha=ha.next;while(ha!==re);$y(st,i.memoizedState)||(Ht=!0),i.memoizedState=st,i.baseQueue===null&&(i.baseState=st),u.lastRenderedState=st}return[st,C]}function k(n,i,u){var C=cv,re=v(),st=Av;if(st){if(u===void 0)throw Error(a(407));u=u()}else u=i();var ha=!$y((qv||re).memoizedState,u);if(ha&&(re.memoizedState=u,Ht=!0),re=re.queue,gt(j.bind(null,C,re,n),[n]),re.getSnapshot!==i||ha||My!==null&&My.memoizedState.tag&1){if(C.flags|=2048,Ze(9,{destroy:void 0},L.bind(null,C,re,u,i),null),Ag===null)throw Error(a(349));st||(Lx&127)!==0||T(C,i,u)}return u}function T(n,i,u){n.flags|=16384,n={getSnapshot:i,value:u},i=cv.updateQueue,i===null?(i=c(),cv.updateQueue=i,i.stores=[n]):(u=i.stores,u===null?i.stores=[n]:u.push(n))}function L(n,i,u,C){i.value=u,i.getSnapshot=C,P(i)&&N(n)}function j(n,i,u){return u(function(){P(i)&&N(n)})}function P(n){var i=n.getSnapshot;n=n.value;try{var u=i();return!$y(n,u)}catch{return!0}}function N(n){var i=a2(n,2);i!==null&&Yy(i,n,2)}function O(n){var i=ve();if(typeof n=="function"){var u=n;if(n=u(),p2){x1(!0);try{u()}finally{x1(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:x,lastRenderedState:n},i}function B(n,i,u,C){return n.baseState=u,A(n,qv,typeof C=="function"?C:x)}function S(n,i,u,C,re){if(m0(n))throw Error(a(485));if(n=i.action,n!==null){var st={payload:re,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(ha){st.listeners.push(ha)}};ae.T!==null?u(!0):st.isTransition=!1,C(st),u=i.pending,u===null?(st.next=i.pending=st,D(i,st)):(st.next=u.next,i.pending=u.next=st)}}function D(n,i){var u=i.action,C=i.payload,re=n.state;if(i.isTransition){var st=ae.T,ha={};ae.T=ha;try{var qp=u(re,C),q0=ae.S;q0!==null&&q0(ha,qp),z(n,i,qp)}catch(Dm){Y(n,i,Dm)}finally{st!==null&&ha.types!==null&&(st.types=ha.types),ae.T=st}}else try{st=u(re,C),z(n,i,st)}catch(Dm){Y(n,i,Dm)}}function z(n,i,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(C){H(n,i,C)},function(C){return Y(n,i,C)}):H(n,i,u)}function H(n,i,u){i.status="fulfilled",i.value=u,ht(i),n.state=u,i=n.pending,i!==null&&(u=i.next,u===i?n.pending=null:(u=u.next,i.next=u,D(n,u)))}function Y(n,i,u){var C=n.pending;if(n.pending=null,C!==null){C=C.next;do i.status="rejected",i.reason=u,ht(i),i=i.next;while(i!==C)}n.action=null}function ht(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function Se(n,i){return i}function ie(n,i){if(Av){var u=Ag.formState;if(u!==null){e:{var C=cv;if(Av){if(sy){t:{for(var re=sy,st=sx;re.nodeType!==8;){if(!st){re=null;break t}if(re=ux(re.nextSibling),re===null){re=null;break t}}st=re.data,re=st==="F!"||st==="F"?re:null}if(re){sy=ux(re.nextSibling),C=re.data==="F!";break e}}Ux(C)}C=!1}C&&(i=u[0])}}return u=ve(),u.memoizedState=u.baseState=i,C={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Se,lastRenderedState:i},u.queue=C,u=Up.bind(null,cv,C),C.dispatch=u,C=O(!1),st=E0.bind(null,cv,!1,C.queue),C=ve(),re={state:i,dispatch:null,action:n,pending:null},C.queue=re,u=S.bind(null,cv,re,st,u),re.dispatch=u,C.memoizedState=n,[i,u,!1]}function X(n){var i=v();return ft(i,qv,n)}function ft(n,i,u){if(i=A(n,i,Se)[0],n=w(x)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var C=h(i)}catch(ha){throw ha===M2?V_:ha}else C=i;i=v();var re=i.queue,st=re.dispatch;return u!==i.memoizedState&&(cv.flags|=2048,Ze(9,{destroy:void 0},Le.bind(null,re,u),null)),[C,st,n]}function Le(n,i){n.action=i}function nt(n){var i=v(),u=qv;if(u!==null)return ft(i,u,n);v(),i=i.memoizedState,u=v();var C=u.queue.dispatch;return u.memoizedState=n,[i,C,!1]}function Ze(n,i,u,C){return n={tag:n,create:u,deps:C,inst:i,next:null},i=cv.updateQueue,i===null&&(i=c(),cv.updateQueue=i),u=i.lastEffect,u===null?i.lastEffect=n.next=n:(C=u.next,u.next=n,n.next=C,i.lastEffect=n),n}function rt(){return v().memoizedState}function dt(n,i,u,C){var re=ve();cv.flags|=n,re.memoizedState=Ze(1|i,{destroy:void 0},u,C===void 0?null:C)}function pt(n,i,u,C){var re=v();C=C===void 0?null:C;var st=re.memoizedState.inst;qv!==null&&C!==null&&Jb(C,qv.memoizedState.deps)?re.memoizedState=Ze(i,st,u,C):(cv.flags|=n,re.memoizedState=Ze(1|i,st,u,C))}function se(n,i){dt(8390656,8,n,i)}function gt(n,i){pt(2048,8,n,i)}function xt(n){cv.flags|=4;var i=cv.updateQueue;if(i===null)i=c(),cv.updateQueue=i,i.events=[n];else{var u=i.events;u===null?i.events=[n]:u.push(n)}}function Nt(n){var i=v().memoizedState;return xt({ref:i,nextImpl:n}),function(){if((lv&2)!==0)throw Error(a(440));return i.impl.apply(void 0,arguments)}}function Rt(n,i){return pt(4,2,n,i)}function Pt(n,i){return pt(4,4,n,i)}function xn(n,i){if(typeof i=="function"){n=n();var u=i(n);return function(){typeof u=="function"?u():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function oa(n,i,u){u=u!=null?u.concat([n]):null,pt(4,4,xn.bind(null,i,n),u)}function jo(){}function lt(n,i){var u=v();i=i===void 0?null:i;var C=u.memoizedState;return i!==null&&Jb(i,C[1])?C[0]:(u.memoizedState=[n,i],n)}function ut(n,i){var u=v();i=i===void 0?null:i;var C=u.memoizedState;if(i!==null&&Jb(i,C[1]))return C[0];if(C=n(),p2){x1(!0);try{n()}finally{x1(!1)}}return u.memoizedState=[C,i],C}function $(n,i,u){return u===void 0||(Lx&1073741824)!==0&&(zg&261930)===0?n.memoizedState=i:(n.memoizedState=u,n=u5(),cv.lanes|=n,By|=n,u)}function yt(n,i,u,C){return $y(u,i)?u:C2.current!==null?(n=$(n,u,C),$y(n,i)||(Ht=!0),n):(Lx&42)===0||(Lx&1073741824)!==0&&(zg&261930)===0?(Ht=!0,n.memoizedState=u):(n=u5(),cv.lanes|=n,By|=n,i)}function Lt(n,i,u,C,re){var st=wp.p;wp.p=st!==0&&8>st?st:8;var ha=ae.T,qp={};ae.T=qp,E0(n,!1,i,u);try{var q0=re(),Dm=ae.S;if(Dm!==null&&Dm(qp,q0),q0!==null&&typeof q0=="object"&&typeof q0.then=="function"){var Gm=Hb(q0,C);e0(n,i,Gm,Ky(n))}else e0(n,i,C,Ky(n))}catch(pm){e0(n,i,{then:function(){},status:"rejected",reason:pm},Ky())}finally{wp.p=st,ha!==null&&qp.types!==null&&(ha.types=qp.types),ae.T=ha}}function ke(){}function G(n,i,u,C){if(n.tag!==5)throw Error(a(476));var re=ne(n).queue;Lt(n,re,i,Cp,u===null?ke:function(){return et(n),u(C)})}function ne(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:Cp,baseState:Cp,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:x,lastRenderedState:Cp},next:null};var u={};return i.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:x,lastRenderedState:u},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function et(n){var i=ne(n);i.next===null&&(i=n.alternate.memoizedState),e0(n,i.next.queue,{},Ky())}function ct(){return Uy(H2)}function kt(){return v().memoizedState}function Gt(){return v().memoizedState}function $t(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var u=Ky();n=Hx(u);var C=fx(i,n,u);C!==null&&(Yy(C,i,u),f2(C,i,u)),i={cache:Vb()},n.payload=i;return}i=i.return}}function Ko(n,i,u){var C=Ky();u={lane:C,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},m0(n)?f0(i,u):(u=Lb(n,i,u,C),u!==null&&(Yy(u,n,C),la(u,i,C)))}function Up(n,i,u){var C=Ky();e0(n,i,u,C)}function e0(n,i,u,C){var re={lane:C,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null};if(m0(n))f0(i,re);else{var st=n.alternate;if(n.lanes===0&&(st===null||st.lanes===0)&&(st=i.lastRenderedReducer,st!==null))try{var ha=i.lastRenderedState,qp=st(ha,u);if(re.hasEagerState=!0,re.eagerState=qp,$y(qp,ha))return Y2(n,i,re,0),Ag===null&&z_(),!1}catch{}finally{}if(u=Lb(n,i,re,C),u!==null)return Yy(u,n,C),la(u,i,C),!0}return!1}function E0(n,i,u,C){if(C={lane:2,revertLane:h3(),gesture:null,action:C,hasEagerState:!1,eagerState:null,next:null},m0(n)){if(i)throw Error(a(479))}else i=Lb(n,u,C,2),i!==null&&Yy(i,n,2)}function m0(n){var i=n.alternate;return n===cv||i!==null&&i===cv}function f0(n,i){R2=q_=!0;var u=n.pending;u===null?i.next=i:(i.next=u.next,u.next=i),n.pending=i}function la(n,i,u){if((u&4194048)!==0){var C=i.lanes;C&=n.pendingLanes,u|=C,i.lanes=u,Gv(n,u)}}var $o={readContext:Uy,use:_,useCallback:by,useContext:by,useEffect:by,useImperativeHandle:by,useLayoutEffect:by,useInsertionEffect:by,useMemo:by,useReducer:by,useRef:by,useState:by,useDebugValue:by,useDeferredValue:by,useTransition:by,useSyncExternalStore:by,useId:by,useHostTransitionStatus:by,useFormState:by,useActionState:by,useOptimistic:by,useMemoCache:by,useCacheRefresh:by};$o.useEffectEvent=by;var jt={readContext:Uy,use:_,useCallback:function(n,i){return ve().memoizedState=[n,i===void 0?null:i],n},useContext:Uy,useEffect:se,useImperativeHandle:function(n,i,u){u=u!=null?u.concat([n]):null,dt(4194308,4,xn.bind(null,i,n),u)},useLayoutEffect:function(n,i){return dt(4194308,4,n,i)},useInsertionEffect:function(n,i){dt(4,2,n,i)},useMemo:function(n,i){var u=ve();i=i===void 0?null:i;var C=n();if(p2){x1(!0);try{n()}finally{x1(!1)}}return u.memoizedState=[C,i],C},useReducer:function(n,i,u){var C=ve();if(u!==void 0){var re=u(i);if(p2){x1(!0);try{u(i)}finally{x1(!1)}}}else re=i;return C.memoizedState=C.baseState=re,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:re},C.queue=n,n=n.dispatch=Ko.bind(null,cv,n),[C.memoizedState,n]},useRef:function(n){var i=ve();return n={current:n},i.memoizedState=n},useState:function(n){n=O(n);var i=n.queue,u=Up.bind(null,cv,i);return i.dispatch=u,[n.memoizedState,u]},useDebugValue:jo,useDeferredValue:function(n,i){var u=ve();return $(u,n,i)},useTransition:function(){var n=O(!1);return n=Lt.bind(null,cv,n.queue,!0,!1),ve().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,u){var C=cv,re=ve();if(Av){if(u===void 0)throw Error(a(407));u=u()}else{if(u=i(),Ag===null)throw Error(a(349));(zg&127)!==0||T(C,i,u)}re.memoizedState=u;var st={value:u,getSnapshot:i};return re.queue=st,se(j.bind(null,C,st,n),[n]),C.flags|=2048,Ze(9,{destroy:void 0},L.bind(null,C,st,u,i),null),u},useId:function(){var n=ve(),i=Ag.identifierPrefix;if(Av){var u=gx,C=mx;u=(C&~(1<<32-Um(C)-1)).toString(32)+u,i="_"+i+"R_"+u,u=Y_++,0<u&&(i+="H"+u.toString(32)),i+="_"}else u=lw++,i="_"+i+"r_"+u.toString(32)+"_";return n.memoizedState=i},useHostTransitionStatus:ct,useFormState:ie,useActionState:ie,useOptimistic:function(n){var i=ve();i.memoizedState=i.baseState=n;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=u,i=E0.bind(null,cv,!0,u),u.dispatch=i,[n,i]},useMemoCache:y,useCacheRefresh:function(){return ve().memoizedState=$t.bind(null,cv)},useEffectEvent:function(n){var i=ve(),u={impl:n};return i.memoizedState=u,function(){if((lv&2)!==0)throw Error(a(440));return u.impl.apply(void 0,arguments)}}},Fp={readContext:Uy,use:_,useCallback:lt,useContext:Uy,useEffect:gt,useImperativeHandle:oa,useInsertionEffect:Rt,useLayoutEffect:Pt,useMemo:ut,useReducer:w,useRef:rt,useState:function(){return w(x)},useDebugValue:jo,useDeferredValue:function(n,i){var u=v();return yt(u,qv.memoizedState,n,i)},useTransition:function(){var n=w(x)[0],i=v().memoizedState;return[typeof n=="boolean"?n:h(n),i]},useSyncExternalStore:k,useId:kt,useHostTransitionStatus:ct,useFormState:X,useActionState:X,useOptimistic:function(n,i){var u=v();return B(u,qv,n,i)},useMemoCache:y,useCacheRefresh:Gt};Fp.useEffectEvent=Nt;var i0={readContext:Uy,use:_,useCallback:lt,useContext:Uy,useEffect:gt,useImperativeHandle:oa,useInsertionEffect:Rt,useLayoutEffect:Pt,useMemo:ut,useReducer:d,useRef:rt,useState:function(){return d(x)},useDebugValue:jo,useDeferredValue:function(n,i){var u=v();return qv===null?$(u,n,i):yt(u,qv.memoizedState,n,i)},useTransition:function(){var n=d(x)[0],i=v().memoizedState;return[typeof n=="boolean"?n:h(n),i]},useSyncExternalStore:k,useId:kt,useHostTransitionStatus:ct,useFormState:nt,useActionState:nt,useOptimistic:function(n,i){var u=v();return qv!==null?B(u,qv,n,i):(u.baseState=n,[n,u.queue.dispatch])},useMemoCache:y,useCacheRefresh:Gt};i0.useEffectEvent=Nt;function b0(n,i,u,C){i=n.memoizedState,u=u(C,i),u=u==null?i:M({},i,u),n.memoizedState=u,n.lanes===0&&(n.updateQueue.baseState=u)}var O0={enqueueSetState:function(n,i,u){n=n._reactInternals;var C=Ky(),re=Hx(C);re.payload=i,u!=null&&(re.callback=u),i=fx(n,re,C),i!==null&&(Yy(i,n,C),f2(i,n,C))},enqueueReplaceState:function(n,i,u){n=n._reactInternals;var C=Ky(),re=Hx(C);re.tag=1,re.payload=i,u!=null&&(re.callback=u),i=fx(n,re,C),i!==null&&(Yy(i,n,C),f2(i,n,C))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var u=Ky(),C=Hx(u);C.tag=2,i!=null&&(C.callback=i),i=fx(n,C,u),i!==null&&(Yy(i,n,u),f2(i,n,u))}};function C0(n,i,u,C,re,st,ha){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(C,st,ha):i.prototype&&i.prototype.isPureReactComponent?!v2(u,C)||!v2(re,st):!0}function I0(n,i,u,C){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(u,C),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(u,C),i.state!==n&&O0.enqueueReplaceState(i,i.state,null)}function V0(n,i){var u=i;if("ref"in i){u={};for(var C in i)C!=="ref"&&(u[C]=i[C])}if(n=n.defaultProps){u===i&&(u=M({},u));for(var re in n)u[re]===void 0&&(u[re]=n[re])}return u}function H0(n){N_(n)}function im(n){console.error(n)}function k0(n){N_(n)}function fm(n,i){try{var u=n.onUncaughtError;u(i.value,{componentStack:i.stack})}catch(C){setTimeout(function(){throw C})}}function Tm(n,i,u){try{var C=n.onCaughtError;C(u.value,{componentStack:u.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(re){setTimeout(function(){throw re})}}function om(n,i,u){return u=Hx(u),u.tag=3,u.payload={element:null},u.callback=function(){fm(n,i)},u}function Rm(n){return n=Hx(n),n.tag=3,n}function ci(n,i,u,C){var re=u.type.getDerivedStateFromError;if(typeof re=="function"){var st=C.value;n.payload=function(){return re(st)},n.callback=function(){Tm(i,u,C)}}var ha=u.stateNode;ha!==null&&typeof ha.componentDidCatch=="function"&&(n.callback=function(){Tm(i,u,C),typeof re!="function"&&(bx===null?bx=new Set([this]):bx.add(this));var qp=C.stack;this.componentDidCatch(C.value,{componentStack:qp!==null?qp:""})})}function Hp(n,i,u,C,re){if(u.flags|=32768,C!==null&&typeof C=="object"&&typeof C.then=="function"){if(i=u.alternate,i!==null&&l2(i,u,re,!0),u=Xy.current,u!==null){switch(u.tag){case 31:case 13:return lx===null?h_():u.alternate===null&&ay===0&&(ay=3),u.flags&=-257,u.flags|=65536,u.lanes=re,C===H_?u.flags|=16384:(i=u.updateQueue,i===null?u.updateQueue=new Set([C]):i.add(C),Q_(n,C,re)),!1;case 22:return u.flags|=65536,C===H_?u.flags|=16384:(i=u.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([C])},u.updateQueue=i):(u=i.retryQueue,u===null?i.retryQueue=new Set([C]):u.add(C)),Q_(n,C,re)),!1}throw Error(a(435,u.tag))}return Q_(n,C,re),h_(),!1}if(Av)return i=Xy.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=re,C!==Pb&&(n=Error(a(422),{cause:C}),J2(ix(n,u)))):(C!==Pb&&(i=Error(a(423),{cause:C}),J2(ix(i,u))),n=n.current.alternate,n.flags|=65536,re&=-re,n.lanes|=re,C=ix(C,u),re=om(n.stateNode,C,re),a_(n,re),ay!==4&&(ay=2)),!1;var st=Error(a(520),{cause:C});if(st=ix(st,u),cx===null?cx=[st]:cx.push(st),ay!==4&&(ay=2),i===null)return!0;C=ix(C,u),u=i;do{switch(u.tag){case 3:return u.flags|=65536,n=re&-re,u.lanes|=n,n=om(u.stateNode,C,n),a_(u,n),!1;case 1:if(i=u.type,st=u.stateNode,(u.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||st!==null&&typeof st.componentDidCatch=="function"&&(bx===null||!bx.has(st))))return u.flags|=65536,re&=-re,u.lanes|=re,re=Rm(re),ci(re,n,u,C),a_(u,re),!1}u=u.return}while(u!==null);return!1}var St=Error(a(461)),Ht=!1;function Sr(n,i,u,C){i.child=n===null?n5(i,null,u,C):Vx(i,n.child,u,C)}function Rp(n,i,u,C,re){u=u.render;var st=i.ref;if("ref"in C){var ha={};for(var qp in C)qp!=="ref"&&(ha[qp]=C[qp])}else ha=C;return c2(i),C=Kb(n,i,u,ha,st,re),qp=Qb(),n!==null&&!Ht?(e3(n,i,re),rg(n,i,re)):(Av&&qp&&Z2(i),i.flags|=1,Sr(n,i,C,re),i.child)}function Np(n,i,u,C,re){if(n===null){var st=u.type;return typeof st=="function"&&!kb(st)&&st.defaultProps===void 0&&u.compare===null?(i.tag=15,i.type=st,Jp(n,i,st,C,re)):(n=I_(u.type,null,C,i,i.mode,re),n.ref=i.ref,n.return=i,i.child=n)}if(st=n.child,!k1(n,re)){var ha=st.memoizedProps;if(u=u.compare,u=u!==null?u:v2,u(ha,C)&&n.ref===i.ref)return rg(n,i,re)}return i.flags|=1,n=Mx(st,C),n.ref=i.ref,n.return=i,i.child=n}function Jp(n,i,u,C,re){if(n!==null){var st=n.memoizedProps;if(v2(st,C)&&n.ref===i.ref)if(Ht=!1,i.pendingProps=C=st,k1(n,re))(n.flags&131072)!==0&&(Ht=!0);else return i.lanes=n.lanes,rg(n,i,re)}return Am(n,i,u,C,re)}function n0(n,i,u,C){var re=C.children,st=n!==null?n.memoizedState:null;if(n===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),C.mode==="hidden"){if((i.flags&128)!==0){if(st=st!==null?st.baseLanes|u:u,n!==null){for(C=i.child=n.child,re=0;C!==null;)re=re|C.lanes|C.childLanes,C=C.sibling;C=re&~st}else C=0,i.child=null;return _0(n,i,st,u,C)}if((u&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&e_(i,st!==null?st.cachePool:null),st!==null?o5(i,st):X_(),s5(i);else return C=i.lanes=536870912,_0(n,i,st!==null?st.baseLanes|u:u,u,C)}else st!==null?(e_(i,st.cachePool),o5(i,st),Wx(),i.memoizedState=null):(n!==null&&e_(i,null),X_(),Wx());return Sr(n,i,re,u),i.child}function S0(n,i){return n!==null&&n.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function _0(n,i,u,C,re){var st=Gb();return st=st===null?null:{parent:Ty._currentValue,pool:st},i.memoizedState={baseLanes:u,cachePool:st},n!==null&&e_(i,null),X_(),s5(i),n!==null&&l2(n,i,C,!0),i.childLanes=re,null}function w0(n,i){return i=y1({mode:i.mode,children:i.children},n.mode),i.ref=n.ref,n.child=i,i.return=n,i}function X0(n,i,u){return Vx(i,n.child,null,u),n=w0(i,i.pendingProps),n.flags|=2,Jy(i),i.memoizedState=null,n}function $0(n,i,u){var C=i.pendingProps,re=(i.flags&128)!==0;if(i.flags&=-129,n===null){if(Av){if(C.mode==="hidden")return n=w0(i,C),i.lanes=536870912,S0(null,n);if(Zb(i),(n=sy)?(n=b3(n,sx),n=n!==null&&n.data==="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:Ex!==null?{id:mx,overflow:gx}:null,retryLane:536870912,hydrationErrors:null},u=q3(n),u.return=i,i.child=u,Iy=i,sy=null)):n=null,n===null)throw Ux(i);return i.lanes=536870912,null}return w0(i,C)}var st=n.memoizedState;if(st!==null){var ha=st.dehydrated;if(Zb(i),re)if(i.flags&256)i.flags&=-257,i=X0(n,i,u);else if(i.memoizedState!==null)i.child=n.child,i.flags|=128,i=null;else throw Error(a(558));else if(Ht||l2(n,i,u,!1),re=(u&n.childLanes)!==0,Ht||re){if(C=Ag,C!==null&&(ha=yv(C,u),ha!==0&&ha!==st.retryLane))throw st.retryLane=ha,a2(n,ha),Yy(C,n,ha),St;h_(),i=X0(n,i,u)}else n=st.treeContext,sy=ux(ha.nextSibling),Iy=i,Av=!0,Cx=null,sx=!1,n!==null&&$3(i,n),i=w0(i,C),i.flags|=4096;return i}return n=Mx(n.child,{mode:C.mode,children:C.children}),n.ref=i.ref,i.child=n,n.return=i,n}function Z0(n,i){var u=i.ref;if(u===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(a(284));(n===null||n.ref!==u)&&(i.flags|=4194816)}}function Am(n,i,u,C,re){return c2(i),u=Kb(n,i,u,C,void 0,re),C=Qb(),n!==null&&!Ht?(e3(n,i,re),rg(n,i,re)):(Av&&C&&Z2(i),i.flags|=1,Sr(n,i,u,re),i.child)}function e1(n,i,u,C,re,st){return c2(i),i.updateQueue=null,u=c5(i,C,u,re),l5(n),C=Qb(),n!==null&&!Ht?(e3(n,i,st),rg(n,i,st)):(Av&&C&&Z2(i),i.flags|=1,Sr(n,i,u,st),i.child)}function E1(n,i,u,C,re){if(c2(i),i.stateNode===null){var st=i2,ha=u.contextType;typeof ha=="object"&&ha!==null&&(st=Uy(ha)),st=new u(C,st),i.memoizedState=st.state!==null&&st.state!==void 0?st.state:null,st.updater=O0,i.stateNode=st,st._reactInternals=i,st=i.stateNode,st.props=C,st.state=i.memoizedState,st.refs={},qb(i),ha=u.contextType,st.context=typeof ha=="object"&&ha!==null?Uy(ha):i2,st.state=i.memoizedState,ha=u.getDerivedStateFromProps,typeof ha=="function"&&(b0(i,u,ha,C),st.state=i.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof st.getSnapshotBeforeUpdate=="function"||typeof st.UNSAFE_componentWillMount!="function"&&typeof st.componentWillMount!="function"||(ha=st.state,typeof st.componentWillMount=="function"&&st.componentWillMount(),typeof st.UNSAFE_componentWillMount=="function"&&st.UNSAFE_componentWillMount(),ha!==st.state&&O0.enqueueReplaceState(st,st.state,null),o_(i,C,st,re),i_(),st.state=i.memoizedState),typeof st.componentDidMount=="function"&&(i.flags|=4194308),C=!0}else if(n===null){st=i.stateNode;var qp=i.memoizedProps,q0=V0(u,qp);st.props=q0;var Dm=st.context,Gm=u.contextType;ha=i2,typeof Gm=="object"&&Gm!==null&&(ha=Uy(Gm));var pm=u.getDerivedStateFromProps;Gm=typeof pm=="function"||typeof st.getSnapshotBeforeUpdate=="function",qp=i.pendingProps!==qp,Gm||typeof st.UNSAFE_componentWillReceiveProps!="function"&&typeof st.componentWillReceiveProps!="function"||(qp||Dm!==ha)&&I0(i,st,C,ha),hx=!1;var _m=i.memoizedState;st.state=_m,o_(i,C,st,re),i_(),Dm=i.memoizedState,qp||_m!==Dm||hx?(typeof pm=="function"&&(b0(i,u,pm,C),Dm=i.memoizedState),(q0=hx||C0(i,u,q0,C,_m,Dm,ha))?(Gm||typeof st.UNSAFE_componentWillMount!="function"&&typeof st.componentWillMount!="function"||(typeof st.componentWillMount=="function"&&st.componentWillMount(),typeof st.UNSAFE_componentWillMount=="function"&&st.UNSAFE_componentWillMount()),typeof st.componentDidMount=="function"&&(i.flags|=4194308)):(typeof st.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=C,i.memoizedState=Dm),st.props=C,st.state=Dm,st.context=ha,C=q0):(typeof st.componentDidMount=="function"&&(i.flags|=4194308),C=!1)}else{st=i.stateNode,W_(n,i),ha=i.memoizedProps,Gm=V0(u,ha),st.props=Gm,pm=i.pendingProps,_m=st.context,Dm=u.contextType,q0=i2,typeof Dm=="object"&&Dm!==null&&(q0=Uy(Dm)),qp=u.getDerivedStateFromProps,(Dm=typeof qp=="function"||typeof st.getSnapshotBeforeUpdate=="function")||typeof st.UNSAFE_componentWillReceiveProps!="function"&&typeof st.componentWillReceiveProps!="function"||(ha!==pm||_m!==q0)&&I0(i,st,C,q0),hx=!1,_m=i.memoizedState,st.state=_m,o_(i,C,st,re),i_();var Cm=i.memoizedState;ha!==pm||_m!==Cm||hx||n!==null&&n.dependencies!==null&&B_(n.dependencies)?(typeof qp=="function"&&(b0(i,u,qp,C),Cm=i.memoizedState),(Gm=hx||C0(i,u,Gm,C,_m,Cm,q0)||n!==null&&n.dependencies!==null&&B_(n.dependencies))?(Dm||typeof st.UNSAFE_componentWillUpdate!="function"&&typeof st.componentWillUpdate!="function"||(typeof st.componentWillUpdate=="function"&&st.componentWillUpdate(C,Cm,q0),typeof st.UNSAFE_componentWillUpdate=="function"&&st.UNSAFE_componentWillUpdate(C,Cm,q0)),typeof st.componentDidUpdate=="function"&&(i.flags|=4),typeof st.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof st.componentDidUpdate!="function"||ha===n.memoizedProps&&_m===n.memoizedState||(i.flags|=4),typeof st.getSnapshotBeforeUpdate!="function"||ha===n.memoizedProps&&_m===n.memoizedState||(i.flags|=1024),i.memoizedProps=C,i.memoizedState=Cm),st.props=C,st.state=Cm,st.context=q0,C=Gm):(typeof st.componentDidUpdate!="function"||ha===n.memoizedProps&&_m===n.memoizedState||(i.flags|=4),typeof st.getSnapshotBeforeUpdate!="function"||ha===n.memoizedProps&&_m===n.memoizedState||(i.flags|=1024),C=!1)}return st=C,Z0(n,i),C=(i.flags&128)!==0,st||C?(st=i.stateNode,u=C&&typeof u.getDerivedStateFromError!="function"?null:st.render(),i.flags|=1,n!==null&&C?(i.child=Vx(i,n.child,null,re),i.child=Vx(i,null,u,re)):Sr(n,i,u,re),i.memoizedState=st.state,n=i.child):n=rg(n,i,re),n}function N1(n,i,u,C){return s2(),i.flags|=256,Sr(n,i,u,C),i.child}var z1={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function r1(n){return{baseLanes:n,cachePool:Q3()}}function Lm(n,i,u){return n=n!==null?n.childLanes&~u:0,i&&(n|=jy),n}function T1(n,i,u){var C=i.pendingProps,re=!1,st=(i.flags&128)!==0,ha;if((ha=st)||(ha=n!==null&&n.memoizedState===null?!1:(Sv.current&2)!==0),ha&&(re=!0,i.flags&=-129),ha=(i.flags&32)!==0,i.flags&=-33,n===null){if(Av){if(re?Gx(i):Wx(),(n=sy)?(n=b3(n,sx),n=n!==null&&n.data!=="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:Ex!==null?{id:mx,overflow:gx}:null,retryLane:536870912,hydrationErrors:null},u=q3(n),u.return=i,i.child=u,Iy=i,sy=null)):n=null,n===null)throw Ux(i);return B2(n)?i.lanes=32:i.lanes=536870912,null}var qp=C.children;return C=C.fallback,re?(Wx(),re=i.mode,qp=y1({mode:"hidden",children:qp},re),C=o2(C,re,u,null),qp.return=i,C.return=i,qp.sibling=C,i.child=qp,C=i.child,C.memoizedState=r1(u),C.childLanes=Lm(n,ha,u),i.memoizedState=z1,S0(null,C)):(Gx(i),O1(i,qp))}var q0=n.memoizedState;if(q0!==null&&(qp=q0.dehydrated,qp!==null)){if(st)i.flags&256?(Gx(i),i.flags&=-257,i=l1(n,i,u)):i.memoizedState!==null?(Wx(),i.child=n.child,i.flags|=128,i=null):(Wx(),qp=C.fallback,re=i.mode,C=y1({mode:"visible",children:C.children},re),qp=o2(qp,re,u,null),qp.flags|=2,C.return=i,qp.return=i,C.sibling=qp,i.child=C,Vx(i,n.child,null,u),C=i.child,C.memoizedState=r1(u),C.childLanes=Lm(n,ha,u),i.memoizedState=z1,i=S0(null,C));else if(Gx(i),B2(qp)){if(ha=qp.nextSibling&&qp.nextSibling.dataset,ha)var Dm=ha.dgst;ha=Dm,C=Error(a(419)),C.stack="",C.digest=ha,J2({value:C,source:null,stack:null}),i=l1(n,i,u)}else if(Ht||l2(n,i,u,!1),ha=(u&n.childLanes)!==0,Ht||ha){if(ha=Ag,ha!==null&&(C=yv(ha,u),C!==0&&C!==q0.retryLane))throw q0.retryLane=C,a2(n,C),Yy(ha,n,C),St;w3(qp)||h_(),i=l1(n,i,u)}else w3(qp)?(i.flags|=192,i.child=n.child,i=null):(n=q0.treeContext,sy=ux(qp.nextSibling),Iy=i,Av=!0,Cx=null,sx=!1,n!==null&&$3(i,n),i=O1(i,C.children),i.flags|=4096);return i}return re?(Wx(),qp=C.fallback,re=i.mode,q0=n.child,Dm=q0.sibling,C=Mx(q0,{mode:"hidden",children:C.children}),C.subtreeFlags=q0.subtreeFlags&65011712,Dm!==null?qp=Mx(Dm,qp):(qp=o2(qp,re,u,null),qp.flags|=2),qp.return=i,C.return=i,C.sibling=qp,i.child=C,S0(null,C),C=i.child,qp=n.child.memoizedState,qp===null?qp=r1(u):(re=qp.cachePool,re!==null?(q0=Ty._currentValue,re=re.parent!==q0?{parent:q0,pool:q0}:re):re=Q3(),qp={baseLanes:qp.baseLanes|u,cachePool:re}),C.memoizedState=qp,C.childLanes=Lm(n,ha,u),i.memoizedState=z1,S0(n.child,C)):(Gx(i),u=n.child,n=u.sibling,u=Mx(u,{mode:"visible",children:C.children}),u.return=i,u.sibling=null,n!==null&&(ha=i.deletions,ha===null?(i.deletions=[n],i.flags|=16):ha.push(n)),i.child=u,i.memoizedState=null,u)}function O1(n,i){return i=y1({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function y1(n,i){return n=Gy(22,n,null,i),n.lanes=0,n}function l1(n,i,u){return Vx(i,n.child,null,u),n=O1(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function m1(n,i,u){n.lanes|=i;var C=n.alternate;C!==null&&(C.lanes|=i),Fb(n.return,i,u)}function t1(n,i,u,C,re,st){var ha=n.memoizedState;ha===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:C,tail:u,tailMode:re,treeForkCount:st}:(ha.isBackwards=i,ha.rendering=null,ha.renderingStartTime=0,ha.last=C,ha.tail=u,ha.tailMode=re,ha.treeForkCount=st)}function Z1(n,i,u){var C=i.pendingProps,re=C.revealOrder,st=C.tail;C=C.children;var ha=Sv.current,qp=(ha&2)!==0;if(qp?(ha=ha&1|2,i.flags|=128):ha&=1,x0(Sv,ha),Sr(n,i,C,u),C=Av?$2:0,!qp&&n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&m1(n,u,i);else if(n.tag===19)m1(n,u,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(re){case"forwards":for(u=i.child,re=null;u!==null;)n=u.alternate,n!==null&&Ly(n)===null&&(re=u),u=u.sibling;u=re,u===null?(re=i.child,i.child=null):(re=u.sibling,u.sibling=null),t1(i,!1,re,u,st,C);break;case"backwards":case"unstable_legacy-backwards":for(u=null,re=i.child,i.child=null;re!==null;){if(n=re.alternate,n!==null&&Ly(n)===null){i.child=re;break}n=re.sibling,re.sibling=u,u=re,re=n}t1(i,!0,u,null,st,C);break;case"together":t1(i,!1,null,null,void 0,C);break;default:i.memoizedState=null}return i.child}function rg(n,i,u){if(n!==null&&(i.dependencies=n.dependencies),By|=i.lanes,(u&i.childLanes)===0)if(n!==null){if(l2(n,i,u,!1),(u&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(a(153));if(i.child!==null){for(n=i.child,u=Mx(n,n.pendingProps),i.child=u,u.return=i;n.sibling!==null;)n=n.sibling,u=u.sibling=Mx(n,n.pendingProps),u.return=i;u.sibling=null}return i.child}function k1(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&B_(n)))}function ug(n,i,u){switch(i.tag){case 3:M0(i,i.stateNode.containerInfo),Bx(i,Ty,n.memoizedState.cache),s2();break;case 27:case 5:mm(i);break;case 4:M0(i,i.stateNode.containerInfo);break;case 10:Bx(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Zb(i),null;break;case 13:var C=i.memoizedState;if(C!==null)return C.dehydrated!==null?(Gx(i),i.flags|=128,null):(u&i.child.childLanes)!==0?T1(n,i,u):(Gx(i),n=rg(n,i,u),n!==null?n.sibling:null);Gx(i);break;case 19:var re=(n.flags&128)!==0;if(C=(u&i.childLanes)!==0,C||(l2(n,i,u,!1),C=(u&i.childLanes)!==0),re){if(C)return Z1(n,i,u);i.flags|=128}if(re=i.memoizedState,re!==null&&(re.rendering=null,re.tail=null,re.lastEffect=null),x0(Sv,Sv.current),C)break;return null;case 22:return i.lanes=0,n0(n,i,u,i.pendingProps);case 24:Bx(i,Ty,n.memoizedState.cache)}return rg(n,i,u)}function yg(n,i,u){if(n!==null)if(n.memoizedProps!==i.pendingProps)Ht=!0;else{if(!k1(n,u)&&(i.flags&128)===0)return Ht=!1,ug(n,i,u);Ht=(n.flags&131072)!==0}else Ht=!1,Av&&(i.flags&1048576)!==0&&Y3(i,$2,i.index);switch(i.lanes=0,i.tag){case 16:e:{var C=i.pendingProps;if(n=d2(i.elementType),i.type=n,typeof n=="function")kb(n)?(C=V0(n,C),i.tag=1,i=E1(null,i,n,C,u)):(i.tag=0,i=Am(null,i,n,C,u));else{if(n!=null){var re=n.$$typeof;if(re===Q){i.tag=11,i=Rp(null,i,n,C,u);break e}else if(re===Ut){i.tag=14,i=Np(null,i,n,C,u);break e}}throw i=sa(n)||n,Error(a(306,i,""))}}return i;case 0:return Am(n,i,i.type,i.pendingProps,u);case 1:return C=i.type,re=V0(C,i.pendingProps),E1(n,i,C,re,u);case 3:e:{if(M0(i,i.stateNode.containerInfo),n===null)throw Error(a(387));C=i.pendingProps;var st=i.memoizedState;re=st.element,W_(n,i),o_(i,C,null,u);var ha=i.memoizedState;if(C=ha.cache,Bx(i,Ty,C),C!==st.cache&&b2(i,[Ty],u,!0),i_(),C=ha.element,st.isDehydrated)if(st={element:C,isDehydrated:!1,cache:ha.cache},i.updateQueue.baseState=st,i.memoizedState=st,i.flags&256){i=N1(n,i,C,u);break e}else if(C!==re){re=ix(Error(a(424)),i),J2(re),i=N1(n,i,C,u);break e}else{switch(n=i.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(sy=ux(n.firstChild),Iy=i,Av=!0,Cx=null,sx=!0,u=n5(i,null,C,u),i.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(s2(),C===re){i=rg(n,i,u);break e}Sr(n,i,C,u)}i=i.child}return i;case 26:return Z0(n,i),n===null?(u=X5(i.type,null,i.pendingProps,null))?i.memoizedState=u:Av||(u=i.type,n=i.pendingProps,C=x_(u0.current).createElement(u),C[Lv]=i,C[wg]=n,Ay(C,u,n),lm(C),i.stateNode=C):i.memoizedState=X5(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return mm(i),n===null&&Av&&(C=i.stateNode=S_(i.type,i.pendingProps,u0.current),Iy=i,sx=!0,re=sy,qx(i.type)?(ub=re,sy=ux(C.firstChild)):sy=re),Sr(n,i,i.pendingProps.children,u),Z0(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&Av&&((re=C=sy)&&(C=j5(C,i.type,i.pendingProps,sx),C!==null?(i.stateNode=C,Iy=i,sy=ux(C.firstChild),sx=!1,re=!0):re=!1),re||Ux(i)),mm(i),re=i.type,st=i.pendingProps,ha=n!==null?n.memoizedProps:null,C=st.children,__(re,st)?C=null:ha!==null&&__(re,ha)&&(i.flags|=32),i.memoizedState!==null&&(re=Kb(n,i,cw,null,null,u),H2._currentValue=re),Z0(n,i),Sr(n,i,C,u),i.child;case 6:return n===null&&Av&&((n=u=sy)&&(u=V5(u,i.pendingProps,sx),u!==null?(i.stateNode=u,Iy=i,sy=null,n=!0):n=!1),n||Ux(i)),null;case 13:return T1(n,i,u);case 4:return M0(i,i.stateNode.containerInfo),C=i.pendingProps,n===null?i.child=Vx(i,null,C,u):Sr(n,i,C,u),i.child;case 11:return Rp(n,i,i.type,i.pendingProps,u);case 7:return Sr(n,i,i.pendingProps,u),i.child;case 8:return Sr(n,i,i.pendingProps.children,u),i.child;case 12:return Sr(n,i,i.pendingProps.children,u),i.child;case 10:return C=i.pendingProps,Bx(i,i.type,C.value),Sr(n,i,C.children,u),i.child;case 9:return re=i.type._context,C=i.pendingProps.children,c2(i),re=Uy(re),C=C(re),i.flags|=1,Sr(n,i,C,u),i.child;case 14:return Np(n,i,i.type,i.pendingProps,u);case 15:return Jp(n,i,i.type,i.pendingProps,u);case 19:return Z1(n,i,u);case 31:return $0(n,i,u);case 22:return n0(n,i,u,i.pendingProps);case 24:return c2(i),C=Uy(Ty),n===null?(re=Gb(),re===null&&(re=Ag,st=Vb(),re.pooledCache=st,st.refCount++,st!==null&&(re.pooledCacheLanes|=u),re=st),i.memoizedState={parent:C,cache:re},qb(i),Bx(i,Ty,re)):((n.lanes&u)!==0&&(W_(n,i),o_(i,null,null,u),i_()),re=n.memoizedState,st=i.memoizedState,re.parent!==C?(re={parent:C,cache:C},i.memoizedState=re,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=re),Bx(i,Ty,C)):(C=st.cache,Bx(i,Ty,C),C!==re.cache&&b2(i,[Ty],u,!0))),Sr(n,i,i.pendingProps.children,u),i.child;case 29:throw i.pendingProps}throw Error(a(156,i.tag))}function Eg(n){n.flags|=4}function Ig(n,i,u,C,re){if((i=(n.mode&32)!==0)&&(i=!1),i){if(n.flags|=16777216,(re&335544128)===re)if(n.stateNode.complete)n.flags|=8192;else if(p5())n.flags|=8192;else throw h2=H_,Wb}else n.flags&=-16777217}function Q1(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!$5(i))if(p5())n.flags|=8192;else throw h2=H_,Wb}function Rg(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?hv():536870912,n.lanes|=i,xx|=i)}function cg(n,i){if(!Av)switch(n.tailMode){case"hidden":i=n.tail;for(var u=null;i!==null;)i.alternate!==null&&(u=i),i=i.sibling;u===null?n.tail=null:u.sibling=null;break;case"collapsed":u=n.tail;for(var C=null;u!==null;)u.alternate!==null&&(C=u),u=u.sibling;C===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:C.sibling=null}}function Vm(n){var i=n.alternate!==null&&n.alternate.child===n.child,u=0,C=0;if(i)for(var re=n.child;re!==null;)u|=re.lanes|re.childLanes,C|=re.subtreeFlags&65011712,C|=re.flags&65011712,re.return=n,re=re.sibling;else for(re=n.child;re!==null;)u|=re.lanes|re.childLanes,C|=re.subtreeFlags,C|=re.flags,re.return=n,re=re.sibling;return n.subtreeFlags|=C,n.childLanes=u,i}function Xg(n,i,u){var C=i.pendingProps;switch(zb(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vm(i),null;case 1:return Vm(i),null;case 3:return u=i.stateNode,C=null,n!==null&&(C=n.memoizedState.cache),i.memoizedState.cache!==C&&(i.flags|=2048),Dx(Ty),sm(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(n===null||n.child===null)&&(_2(i)?Eg(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Ub())),Vm(i),null;case 26:var re=i.type,st=i.memoizedState;return n===null?(Eg(i),st!==null?(Vm(i),Q1(i,st)):(Vm(i),Ig(i,re,null,C,u))):st?st!==n.memoizedState?(Eg(i),Vm(i),Q1(i,st)):(Vm(i),i.flags&=-16777217):(n=n.memoizedProps,n!==C&&Eg(i),Vm(i),Ig(i,re,n,C,u)),null;case 27:if(Mm(i),u=u0.current,re=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==C&&Eg(i);else{if(!C){if(i.stateNode===null)throw Error(a(166));return Vm(i),null}n=Dp.current,_2(i)?Z3(i):(n=S_(re,C,u),i.stateNode=n,Eg(i))}return Vm(i),null;case 5:if(Mm(i),re=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==C&&Eg(i);else{if(!C){if(i.stateNode===null)throw Error(a(166));return Vm(i),null}if(st=Dp.current,_2(i))Z3(i);else{var ha=x_(u0.current);switch(st){case 1:st=ha.createElementNS("http://www.w3.org/2000/svg",re);break;case 2:st=ha.createElementNS("http://www.w3.org/1998/Math/MathML",re);break;default:switch(re){case"svg":st=ha.createElementNS("http://www.w3.org/2000/svg",re);break;case"math":st=ha.createElementNS("http://www.w3.org/1998/Math/MathML",re);break;case"script":st=ha.createElement("div"),st.innerHTML="<script><\/script>",st=st.removeChild(st.firstChild);break;case"select":st=typeof C.is=="string"?ha.createElement("select",{is:C.is}):ha.createElement("select"),C.multiple?st.multiple=!0:C.size&&(st.size=C.size);break;default:st=typeof C.is=="string"?ha.createElement(re,{is:C.is}):ha.createElement(re)}}st[Lv]=i,st[wg]=C;e:for(ha=i.child;ha!==null;){if(ha.tag===5||ha.tag===6)st.appendChild(ha.stateNode);else if(ha.tag!==4&&ha.tag!==27&&ha.child!==null){ha.child.return=ha,ha=ha.child;continue}if(ha===i)break e;for(;ha.sibling===null;){if(ha.return===null||ha.return===i)break e;ha=ha.return}ha.sibling.return=ha.return,ha=ha.sibling}i.stateNode=st;e:switch(Ay(st,re,C),re){case"button":case"input":case"select":case"textarea":C=!!C.autoFocus;break e;case"img":C=!0;break e;default:C=!1}C&&Eg(i)}}return Vm(i),Ig(i,i.type,n===null?null:n.memoizedProps,i.pendingProps,u),null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==C&&Eg(i);else{if(typeof C!="string"&&i.stateNode===null)throw Error(a(166));if(n=u0.current,_2(i)){if(n=i.stateNode,u=i.memoizedProps,C=null,re=Iy,re!==null)switch(re.tag){case 27:case 5:C=re.memoizedProps}n[Lv]=i,n=!!(n.nodeValue===u||C!==null&&C.suppressHydrationWarning===!0||sb(n.nodeValue,u)),n||Ux(i,!0)}else n=x_(n).createTextNode(C),n[Lv]=i,i.stateNode=n}return Vm(i),null;case 31:if(u=i.memoizedState,n===null||n.memoizedState!==null){if(C=_2(i),u!==null){if(n===null){if(!C)throw Error(a(318));if(n=i.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(a(557));n[Lv]=i}else s2(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Vm(i),n=!1}else u=Ub(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=u),n=!0;if(!n)return i.flags&256?(Jy(i),i):(Jy(i),null);if((i.flags&128)!==0)throw Error(a(558))}return Vm(i),null;case 13:if(C=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(re=_2(i),C!==null&&C.dehydrated!==null){if(n===null){if(!re)throw Error(a(318));if(re=i.memoizedState,re=re!==null?re.dehydrated:null,!re)throw Error(a(317));re[Lv]=i}else s2(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Vm(i),re=!1}else re=Ub(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=re),re=!0;if(!re)return i.flags&256?(Jy(i),i):(Jy(i),null)}return Jy(i),(i.flags&128)!==0?(i.lanes=u,i):(u=C!==null,n=n!==null&&n.memoizedState!==null,u&&(C=i.child,re=null,C.alternate!==null&&C.alternate.memoizedState!==null&&C.alternate.memoizedState.cachePool!==null&&(re=C.alternate.memoizedState.cachePool.pool),st=null,C.memoizedState!==null&&C.memoizedState.cachePool!==null&&(st=C.memoizedState.cachePool.pool),st!==re&&(C.flags|=2048)),u!==n&&u&&(i.child.flags|=8192),Rg(i,i.updateQueue),Vm(i),null);case 4:return sm(),n===null&&ab(i.stateNode.containerInfo),Vm(i),null;case 10:return Dx(i.type),Vm(i),null;case 19:if(d0(Sv),C=i.memoizedState,C===null)return Vm(i),null;if(re=(i.flags&128)!==0,st=C.rendering,st===null)if(re)cg(C,!1);else{if(ay!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(st=Ly(n),st!==null){for(i.flags|=128,cg(C,!1),n=st.updateQueue,i.updateQueue=n,Rg(i,n),i.subtreeFlags=0,n=u,u=i.child;u!==null;)X3(u,n),u=u.sibling;return x0(Sv,Sv.current&1|2),Av&&Ax(i,C.treeForkCount),i.child}n=n.sibling}C.tail!==null&&Xp()>d_&&(i.flags|=128,re=!0,cg(C,!1),i.lanes=4194304)}else{if(!re)if(n=Ly(st),n!==null){if(i.flags|=128,re=!0,n=n.updateQueue,i.updateQueue=n,Rg(i,n),cg(C,!0),C.tail===null&&C.tailMode==="hidden"&&!st.alternate&&!Av)return Vm(i),null}else 2*Xp()-C.renderingStartTime>d_&&u!==536870912&&(i.flags|=128,re=!0,cg(C,!1),i.lanes=4194304);C.isBackwards?(st.sibling=i.child,i.child=st):(n=C.last,n!==null?n.sibling=st:i.child=st,C.last=st)}return C.tail!==null?(n=C.tail,C.rendering=n,C.tail=n.sibling,C.renderingStartTime=Xp(),n.sibling=null,u=Sv.current,x0(Sv,re?u&1|2:u&1),Av&&Ax(i,C.treeForkCount),n):(Vm(i),null);case 22:case 23:return Jy(i),$b(),C=i.memoizedState!==null,n!==null?n.memoizedState!==null!==C&&(i.flags|=8192):C&&(i.flags|=8192),C?(u&536870912)!==0&&(i.flags&128)===0&&(Vm(i),i.subtreeFlags&6&&(i.flags|=8192)):Vm(i),u=i.updateQueue,u!==null&&Rg(i,u.retryQueue),u=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(u=n.memoizedState.cachePool.pool),C=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(C=i.memoizedState.cachePool.pool),C!==u&&(i.flags|=2048),n!==null&&d0(jx),null;case 24:return u=null,n!==null&&(u=n.memoizedState.cache),i.memoizedState.cache!==u&&(i.flags|=2048),Dx(Ty),Vm(i),null;case 25:return null;case 30:return null}throw Error(a(156,i.tag))}function Ct(n,i){switch(zb(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return Dx(Ty),sm(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return Mm(i),null;case 31:if(i.memoizedState!==null){if(Jy(i),i.alternate===null)throw Error(a(340));s2()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 13:if(Jy(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(a(340));s2()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return d0(Sv),null;case 4:return sm(),null;case 10:return Dx(i.type),null;case 22:case 23:return Jy(i),$b(),n!==null&&d0(jx),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return Dx(Ty),null;case 25:return null;default:return null}}function Tt(n,i){switch(zb(i),i.tag){case 3:Dx(Ty),sm();break;case 26:case 27:case 5:Mm(i);break;case 4:sm();break;case 31:i.memoizedState!==null&&Jy(i);break;case 13:Jy(i);break;case 19:d0(Sv);break;case 10:Dx(i.type);break;case 22:case 23:Jy(i),$b(),n!==null&&d0(jx);break;case 24:Dx(Ty)}}function jp(n,i){try{var u=i.updateQueue,C=u!==null?u.lastEffect:null;if(C!==null){var re=C.next;u=re;do{if((u.tag&n)===n){C=void 0;var st=u.create,ha=u.inst;C=st(),ha.destroy=C}u=u.next}while(u!==re)}}catch(qp){Vv(i,i.return,qp)}}function Zp(n,i,u){try{var C=i.updateQueue,re=C!==null?C.lastEffect:null;if(re!==null){var st=re.next;C=st;do{if((C.tag&n)===n){var ha=C.inst,qp=ha.destroy;if(qp!==void 0){ha.destroy=void 0,re=i;var q0=u,Dm=qp;try{Dm()}catch(Gm){Vv(re,q0,Gm)}}}C=C.next}while(C!==st)}}catch(Gm){Vv(i,i.return,Gm)}}function l0(n){var i=n.updateQueue;if(i!==null){var u=n.stateNode;try{i5(i,u)}catch(C){Vv(n,n.return,C)}}}function Bp(n,i,u){u.props=V0(n.type,n.memoizedProps),u.state=n.memoizedState;try{u.componentWillUnmount()}catch(C){Vv(n,i,C)}}function Gp(n,i){try{var u=n.ref;if(u!==null){switch(n.tag){case 26:case 27:case 5:var C=n.stateNode;break;case 30:C=n.stateNode;break;default:C=n.stateNode}typeof u=="function"?n.refCleanup=u(C):u.current=C}}catch(re){Vv(n,i,re)}}function p0(n,i){var u=n.ref,C=n.refCleanup;if(u!==null)if(typeof C=="function")try{C()}catch(re){Vv(n,i,re)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(re){Vv(n,i,re)}else u.current=null}function a0(n){var i=n.type,u=n.memoizedProps,C=n.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":u.autoFocus&&C.focus();break e;case"img":u.src?C.src=u.src:u.srcSet&&(C.srcset=u.srcSet)}}catch(re){Vv(n,n.return,re)}}function D0(n,i,u){try{var C=n.stateNode;xw(C,n.type,u,i),C[wg]=i}catch(re){Vv(n,n.return,re)}}function z0(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&qx(n.type)||n.tag===4}function am(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||z0(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&qx(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Ym(n,i,u){var C=n.tag;if(C===5||C===6)n=n.stateNode,i?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(n,i):(i=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,i.appendChild(n),u=u._reactRootContainer,u!=null||i.onclick!==null||(i.onclick=Qp));else if(C!==4&&(C===27&&qx(n.type)&&(u=n.stateNode,i=null),n=n.child,n!==null))for(Ym(n,i,u),n=n.sibling;n!==null;)Ym(n,i,u),n=n.sibling}function Hm(n,i,u){var C=n.tag;if(C===5||C===6)n=n.stateNode,i?u.insertBefore(n,i):u.appendChild(n);else if(C!==4&&(C===27&&qx(n.type)&&(u=n.stateNode),n=n.child,n!==null))for(Hm(n,i,u),n=n.sibling;n!==null;)Hm(n,i,u),n=n.sibling}function f1(n){var i=n.stateNode,u=n.memoizedProps;try{for(var C=n.type,re=i.attributes;re.length;)i.removeAttributeNode(re[0]);Ay(i,C,u),i[Lv]=n,i[wg]=u}catch(st){Vv(n,n.return,st)}}var Im=!1,Jm=!1,R1=!1,Ng=typeof WeakSet=="function"?WeakSet:Set,B1=null;function av(n,i){if(n=n.containerInfo,v3=xb,n=Tb(n),zx(n)){if("selectionStart"in n)var u={start:n.selectionStart,end:n.selectionEnd};else e:{u=(u=n.ownerDocument)&&u.defaultView||window;var C=u.getSelection&&u.getSelection();if(C&&C.rangeCount!==0){u=C.anchorNode;var re=C.anchorOffset,st=C.focusNode;C=C.focusOffset;try{u.nodeType,st.nodeType}catch{u=null;break e}var ha=0,qp=-1,q0=-1,Dm=0,Gm=0,pm=n,_m=null;t:for(;;){for(var Cm;pm!==u||re!==0&&pm.nodeType!==3||(qp=ha+re),pm!==st||C!==0&&pm.nodeType!==3||(q0=ha+C),pm.nodeType===3&&(ha+=pm.nodeValue.length),(Cm=pm.firstChild)!==null;)_m=pm,pm=Cm;for(;;){if(pm===n)break t;if(_m===u&&++Dm===re&&(qp=ha),_m===st&&++Gm===C&&(q0=ha),(Cm=pm.nextSibling)!==null)break;pm=_m,_m=pm.parentNode}pm=Cm}u=qp===-1||q0===-1?null:{start:qp,end:q0}}else u=null}u=u||{start:0,end:0}}else u=null;for(y3={focusedElem:n,selectionRange:u},xb=!1,B1=i;B1!==null;)if(i=B1,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,B1=n;else for(;B1!==null;){switch(i=B1,st=i.alternate,n=i.flags,i.tag){case 0:if((n&4)!==0&&(n=i.updateQueue,n=n!==null?n.events:null,n!==null))for(u=0;u<n.length;u++)re=n[u],re.ref.impl=re.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&st!==null){n=void 0,u=i,re=st.memoizedProps,st=st.memoizedState,C=u.stateNode;try{var G1=V0(u.type,re);n=C.getSnapshotBeforeUpdate(G1,st),C.__reactInternalSnapshotBeforeUpdate=n}catch(hg){Vv(u,u.return,hg)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,u=n.nodeType,u===9)cb(n);else if(u===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":cb(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(a(163))}if(n=i.sibling,n!==null){n.return=i.return,B1=n;break}B1=i.return}}function dg(n,i,u){var C=u.flags;switch(u.tag){case 0:case 11:case 15:Qg(n,u),C&4&&jp(5,u);break;case 1:if(Qg(n,u),C&4)if(n=u.stateNode,i===null)try{n.componentDidMount()}catch(ha){Vv(u,u.return,ha)}else{var re=V0(u.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(re,i,n.__reactInternalSnapshotBeforeUpdate)}catch(ha){Vv(u,u.return,ha)}}C&64&&l0(u),C&512&&Gp(u,u.return);break;case 3:if(Qg(n,u),C&64&&(n=u.updateQueue,n!==null)){if(i=null,u.child!==null)switch(u.child.tag){case 27:case 5:i=u.child.stateNode;break;case 1:i=u.child.stateNode}try{i5(n,i)}catch(ha){Vv(u,u.return,ha)}}break;case 27:i===null&&C&4&&f1(u);case 26:case 5:Qg(n,u),i===null&&C&4&&a0(u),C&512&&Gp(u,u.return);break;case 12:Qg(n,u);break;case 31:Qg(n,u),C&4&&kv(n,u);break;case 13:Qg(n,u),C&4&&_v(n,u),C&64&&(n=u.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(u=pw.bind(null,u),bw(n,u))));break;case 22:if(C=u.memoizedState!==null||Im,!C){i=i!==null&&i.memoizedState!==null||Jm,re=Im;var st=Jm;Im=C,(Jm=i)&&!st?ev(n,u,(u.subtreeFlags&8772)!==0):Qg(n,u),Im=re,Jm=st}break;case 30:break;default:Qg(n,u)}}function sv(n){var i=n.alternate;i!==null&&(n.alternate=null,sv(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&Fn(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var xg=null,Jg=!1;function ov(n,i,u){for(u=u.child;u!==null;)fg(n,i,u),u=u.sibling}function fg(n,i,u){if(zm&&typeof zm.onCommitFiberUnmount=="function")try{zm.onCommitFiberUnmount(cm,u)}catch{}switch(u.tag){case 26:Jm||p0(u,i),ov(n,i,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:Jm||p0(u,i);var C=xg,re=Jg;qx(u.type)&&(xg=u.stateNode,Jg=!1),ov(n,i,u),Yx(u.stateNode),xg=C,Jg=re;break;case 5:Jm||p0(u,i);case 6:if(C=xg,re=Jg,xg=null,ov(n,i,u),xg=C,Jg=re,xg!==null)if(Jg)try{(xg.nodeType===9?xg.body:xg.nodeName==="HTML"?xg.ownerDocument.body:xg).removeChild(u.stateNode)}catch(st){Vv(u,i,st)}else try{xg.removeChild(u.stateNode)}catch(st){Vv(u,i,st)}break;case 18:xg!==null&&(Jg?(n=xg,F5(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,u.stateNode),N0(n)):F5(xg,u.stateNode));break;case 4:C=xg,re=Jg,xg=u.stateNode.containerInfo,Jg=!0,ov(n,i,u),xg=C,Jg=re;break;case 0:case 11:case 14:case 15:Zp(2,u,i),Jm||Zp(4,u,i),ov(n,i,u);break;case 1:Jm||(p0(u,i),C=u.stateNode,typeof C.componentWillUnmount=="function"&&Bp(u,i,C)),ov(n,i,u);break;case 21:ov(n,i,u);break;case 22:Jm=(C=Jm)||u.memoizedState!==null,ov(n,i,u),Jm=C;break;default:ov(n,i,u)}}function kv(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{N0(n)}catch(u){Vv(i,i.return,u)}}}function _v(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{N0(n)}catch(u){Vv(i,i.return,u)}}function Dg(n){switch(n.tag){case 31:case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new Ng),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new Ng),i;default:throw Error(a(435,n.tag))}}function gv(n,i){var u=Dg(n);i.forEach(function(C){if(!u.has(C)){u.add(C);var re=f_.bind(null,n,C);C.then(re,re)}})}function Kg(n,i){var u=i.deletions;if(u!==null)for(var C=0;C<u.length;C++){var re=u[C],st=n,ha=i,qp=ha;e:for(;qp!==null;){switch(qp.tag){case 27:if(qx(qp.type)){xg=qp.stateNode,Jg=!1;break e}break;case 5:xg=qp.stateNode,Jg=!1;break e;case 3:case 4:xg=qp.stateNode.containerInfo,Jg=!0;break e}qp=qp.return}if(xg===null)throw Error(a(160));fg(st,ha,re),xg=null,Jg=!1,st=re.alternate,st!==null&&(st.return=null),re.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)Kv(i,n),i=i.sibling}var iv=null;function Kv(n,i){var u=n.alternate,C=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Kg(i,n),Nv(n),C&4&&(Zp(3,n,n.return),jp(3,n),Zp(5,n,n.return));break;case 1:Kg(i,n),Nv(n),C&512&&(Jm||u===null||p0(u,u.return)),C&64&&Im&&(n=n.updateQueue,n!==null&&(C=n.callbacks,C!==null&&(u=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=u===null?C:u.concat(C))));break;case 26:var re=iv;if(Kg(i,n),Nv(n),C&512&&(Jm||u===null||p0(u,u.return)),C&4){var st=u!==null?u.memoizedState:null;if(C=n.memoizedState,u===null)if(C===null)if(n.stateNode===null){e:{C=n.type,u=n.memoizedProps,re=re.ownerDocument||re;t:switch(C){case"title":st=re.getElementsByTagName("title")[0],(!st||st[Kp]||st[Lv]||st.namespaceURI==="http://www.w3.org/2000/svg"||st.hasAttribute("itemprop"))&&(st=re.createElement(C),re.head.insertBefore(st,re.querySelector("head > title"))),Ay(st,C,u),st[Lv]=n,lm(st),C=st;break e;case"link":var ha=R3("link","href",re).get(C+(u.href||""));if(ha){for(var qp=0;qp<ha.length;qp++)if(st=ha[qp],st.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&st.getAttribute("rel")===(u.rel==null?null:u.rel)&&st.getAttribute("title")===(u.title==null?null:u.title)&&st.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){ha.splice(qp,1);break t}}st=re.createElement(C),Ay(st,C,u),re.head.appendChild(st);break;case"meta":if(ha=R3("meta","content",re).get(C+(u.content||""))){for(qp=0;qp<ha.length;qp++)if(st=ha[qp],st.getAttribute("content")===(u.content==null?null:""+u.content)&&st.getAttribute("name")===(u.name==null?null:u.name)&&st.getAttribute("property")===(u.property==null?null:u.property)&&st.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&st.getAttribute("charset")===(u.charSet==null?null:u.charSet)){ha.splice(qp,1);break t}}st=re.createElement(C),Ay(st,C,u),re.head.appendChild(st);break;default:throw Error(a(468,C))}st[Lv]=n,lm(st),C=st}n.stateNode=C}else D3(re,n.type,n.stateNode);else n.stateNode=fb(re,C,n.memoizedProps);else st!==C?(st===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):st.count--,C===null?D3(re,n.type,n.stateNode):fb(re,C,n.memoizedProps)):C===null&&n.stateNode!==null&&D0(n,n.memoizedProps,u.memoizedProps)}break;case 27:Kg(i,n),Nv(n),C&512&&(Jm||u===null||p0(u,u.return)),u!==null&&C&4&&D0(n,n.memoizedProps,u.memoizedProps);break;case 5:if(Kg(i,n),Nv(n),C&512&&(Jm||u===null||p0(u,u.return)),n.flags&32){re=n.stateNode;try{Yt(re,"")}catch(G1){Vv(n,n.return,G1)}}C&4&&n.stateNode!=null&&(re=n.memoizedProps,D0(n,re,u!==null?u.memoizedProps:re)),C&1024&&(R1=!0);break;case 6:if(Kg(i,n),Nv(n),C&4){if(n.stateNode===null)throw Error(a(162));C=n.memoizedProps,u=n.stateNode;try{u.nodeValue=C}catch(G1){Vv(n,n.return,G1)}}break;case 3:if(T_=null,re=iv,iv=j2(i.containerInfo),Kg(i,n),iv=re,Nv(n),C&4&&u!==null&&u.memoizedState.isDehydrated)try{N0(i.containerInfo)}catch(G1){Vv(n,n.return,G1)}R1&&(R1=!1,Bg(n));break;case 4:C=iv,iv=j2(n.stateNode.containerInfo),Kg(i,n),Nv(n),iv=C;break;case 12:Kg(i,n),Nv(n);break;case 31:Kg(i,n),Nv(n),C&4&&(C=n.updateQueue,C!==null&&(n.updateQueue=null,gv(n,C)));break;case 13:Kg(i,n),Nv(n),n.child.flags&8192&&n.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(u_=Xp()),C&4&&(C=n.updateQueue,C!==null&&(n.updateQueue=null,gv(n,C)));break;case 22:re=n.memoizedState!==null;var q0=u!==null&&u.memoizedState!==null,Dm=Im,Gm=Jm;if(Im=Dm||re,Jm=Gm||q0,Kg(i,n),Jm=Gm,Im=Dm,Nv(n),C&8192)e:for(i=n.stateNode,i._visibility=re?i._visibility&-2:i._visibility|1,re&&(u===null||q0||Im||Jm||Hg(n)),u=null,i=n;;){if(i.tag===5||i.tag===26){if(u===null){q0=u=i;try{if(st=q0.stateNode,re)ha=st.style,typeof ha.setProperty=="function"?ha.setProperty("display","none","important"):ha.display="none";else{qp=q0.stateNode;var pm=q0.memoizedProps.style,_m=pm!=null&&pm.hasOwnProperty("display")?pm.display:null;qp.style.display=_m==null||typeof _m=="boolean"?"":(""+_m).trim()}}catch(G1){Vv(q0,q0.return,G1)}}}else if(i.tag===6){if(u===null){q0=i;try{q0.stateNode.nodeValue=re?"":q0.memoizedProps}catch(G1){Vv(q0,q0.return,G1)}}}else if(i.tag===18){if(u===null){q0=i;try{var Cm=q0.stateNode;re?B5(Cm,!0):B5(q0.stateNode,!1)}catch(G1){Vv(q0,q0.return,G1)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break e;for(;i.sibling===null;){if(i.return===null||i.return===n)break e;u===i&&(u=null),i=i.return}u===i&&(u=null),i.sibling.return=i.return,i=i.sibling}C&4&&(C=n.updateQueue,C!==null&&(u=C.retryQueue,u!==null&&(C.retryQueue=null,gv(n,u))));break;case 19:Kg(i,n),Nv(n),C&4&&(C=n.updateQueue,C!==null&&(n.updateQueue=null,gv(n,C)));break;case 30:break;case 21:break;default:Kg(i,n),Nv(n)}}function Nv(n){var i=n.flags;if(i&2){try{for(var u,C=n.return;C!==null;){if(z0(C)){u=C;break}C=C.return}if(u==null)throw Error(a(160));switch(u.tag){case 27:var re=u.stateNode,st=am(n);Hm(n,st,re);break;case 5:var ha=u.stateNode;u.flags&32&&(Yt(ha,""),u.flags&=-33);var qp=am(n);Hm(n,qp,ha);break;case 3:case 4:var q0=u.stateNode.containerInfo,Dm=am(n);Ym(n,Dm,q0);break;default:throw Error(a(161))}}catch(Gm){Vv(n,n.return,Gm)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function Bg(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;Bg(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function Qg(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)dg(n,i.alternate,i),i=i.sibling}function Hg(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:Zp(4,i,i.return),Hg(i);break;case 1:p0(i,i.return);var u=i.stateNode;typeof u.componentWillUnmount=="function"&&Bp(i,i.return,u),Hg(i);break;case 27:Yx(i.stateNode);case 26:case 5:p0(i,i.return),Hg(i);break;case 22:i.memoizedState===null&&Hg(i);break;case 30:Hg(i);break;default:Hg(i)}n=n.sibling}}function ev(n,i,u){for(u=u&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var C=i.alternate,re=n,st=i,ha=st.flags;switch(st.tag){case 0:case 11:case 15:ev(re,st,u),jp(4,st);break;case 1:if(ev(re,st,u),C=st,re=C.stateNode,typeof re.componentDidMount=="function")try{re.componentDidMount()}catch(Dm){Vv(C,C.return,Dm)}if(C=st,re=C.updateQueue,re!==null){var qp=C.stateNode;try{var q0=re.shared.hiddenCallbacks;if(q0!==null)for(re.shared.hiddenCallbacks=null,re=0;re<q0.length;re++)a5(q0[re],qp)}catch(Dm){Vv(C,C.return,Dm)}}u&&ha&64&&l0(st),Gp(st,st.return);break;case 27:f1(st);case 26:case 5:ev(re,st,u),u&&C===null&&ha&4&&a0(st),Gp(st,st.return);break;case 12:ev(re,st,u);break;case 31:ev(re,st,u),u&&ha&4&&kv(re,st);break;case 13:ev(re,st,u),u&&ha&4&&_v(re,st);break;case 22:st.memoizedState===null&&ev(re,st,u),Gp(st,st.return);break;case 30:break;default:ev(re,st,u)}i=i.sibling}}function Iv(n,i){var u=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(u=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==u&&(n!=null&&n.refCount++,u!=null&&Q2(u))}function Yv(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Q2(n))}function Dv(n,i,u,C){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Qv(n,i,u,C),i=i.sibling}function Qv(n,i,u,C){var re=i.flags;switch(i.tag){case 0:case 11:case 15:Dv(n,i,u,C),re&2048&&jp(9,i);break;case 1:Dv(n,i,u,C);break;case 3:Dv(n,i,u,C),re&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Q2(n)));break;case 12:if(re&2048){Dv(n,i,u,C),n=i.stateNode;try{var st=i.memoizedProps,ha=st.id,qp=st.onPostCommit;typeof qp=="function"&&qp(ha,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(q0){Vv(i,i.return,q0)}}else Dv(n,i,u,C);break;case 31:Dv(n,i,u,C);break;case 13:Dv(n,i,u,C);break;case 23:break;case 22:st=i.stateNode,ha=i.alternate,i.memoizedState!==null?st._visibility&2?Dv(n,i,u,C):Bv(n,i):st._visibility&2?Dv(n,i,u,C):(st._visibility|=2,ny(n,i,u,C,(i.subtreeFlags&10256)!==0||!1)),re&2048&&Iv(ha,i);break;case 24:Dv(n,i,u,C),re&2048&&Yv(i.alternate,i);break;default:Dv(n,i,u,C)}}function ny(n,i,u,C,re){for(re=re&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var st=n,ha=i,qp=u,q0=C,Dm=ha.flags;switch(ha.tag){case 0:case 11:case 15:ny(st,ha,qp,q0,re),jp(8,ha);break;case 23:break;case 22:var Gm=ha.stateNode;ha.memoizedState!==null?Gm._visibility&2?ny(st,ha,qp,q0,re):Bv(st,ha):(Gm._visibility|=2,ny(st,ha,qp,q0,re)),re&&Dm&2048&&Iv(ha.alternate,ha);break;case 24:ny(st,ha,qp,q0,re),re&&Dm&2048&&Yv(ha.alternate,ha);break;default:ny(st,ha,qp,q0,re)}i=i.sibling}}function Bv(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var u=n,C=i,re=C.flags;switch(C.tag){case 22:Bv(u,C),re&2048&&Iv(C.alternate,C);break;case 24:Bv(u,C),re&2048&&Yv(C.alternate,C);break;default:Bv(u,C)}i=i.sibling}}var tv=8192;function Sy(n,i,u){if(n.subtreeFlags&tv)for(n=n.child;n!==null;)ly(n,i,u),n=n.sibling}function ly(n,i,u){switch(n.tag){case 26:Sy(n,i,u),n.flags&tv&&n.memoizedState!==null&&Z5(u,iv,n.memoizedState,n.memoizedProps);break;case 5:Sy(n,i,u);break;case 3:case 4:var C=iv;iv=j2(n.stateNode.containerInfo),Sy(n,i,u),iv=C;break;case 22:n.memoizedState===null&&(C=n.alternate,C!==null&&C.memoizedState!==null?(C=tv,tv=16777216,Sy(n,i,u),tv=C):Sy(n,i,u));break;default:Sy(n,i,u)}}function Ey(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function cy(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var u=0;u<i.length;u++){var C=i[u];B1=C,Ny(C,n)}Ey(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)uy(n),n=n.sibling}function uy(n){switch(n.tag){case 0:case 11:case 15:cy(n),n.flags&2048&&Zp(9,n,n.return);break;case 3:cy(n);break;case 12:cy(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,Fy(n)):cy(n);break;default:cy(n)}}function Fy(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var u=0;u<i.length;u++){var C=i[u];B1=C,Ny(C,n)}Ey(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:Zp(8,i,i.return),Fy(i);break;case 22:u=i.stateNode,u._visibility&2&&(u._visibility&=-3,Fy(i));break;default:Fy(i)}n=n.sibling}}function Ny(n,i){for(;B1!==null;){var u=B1;switch(u.tag){case 0:case 11:case 15:Zp(8,u,i);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var C=u.memoizedState.cachePool.pool;C!=null&&C.refCount++}break;case 24:Q2(u.memoizedState.cache)}if(C=u.child,C!==null)C.return=u,B1=C;else e:for(u=n;B1!==null;){C=B1;var re=C.sibling,st=C.return;if(sv(C),C===u){B1=null;break e}if(re!==null){re.return=st,B1=re;break e}B1=st}}}var yy={getCacheForType:function(n){var i=Uy(Ty),u=i.data.get(n);return u===void 0&&(u=n(),i.data.set(n,u)),u},cacheSignal:function(){return Uy(Ty).controller.signal}},Hy=typeof WeakMap=="function"?WeakMap:Map,lv=0,Ag=null,Cg=null,zg=0,rv=0,vv=null,uv=!1,vy=!1,vx=!1,Oy=0,ay=0,By=0,yx=0,L2=0,jy=0,xx=0,cx=null,qy=null,c_=!1,u_=0,_x=0,d_=1/0,k2=null,bx=null,dy=0,px=null,m2=null,kx=0,t3=0,r3=null,n3=null,N2=0,a3=null;function Ky(){return(lv&2)!==0&&zg!==0?zg&-zg:ae.T!==null?h3():iy()}function u5(){if(jy===0)if((zg&536870912)===0||Av){var n=F1;F1<<=1,(F1&3932160)===0&&(F1=262144),jy=n}else jy=536870912;return n=Xy.current,n!==null&&(n.flags|=32),jy}function Yy(n,i,u){(n===Ag&&(rv===2||rv===9)||n.cancelPendingCommit!==null)&&(O2(n,0),Xx(n,zg,jy,!1)),Cv(n,u),((lv&2)===0||n!==Ag)&&(n===Ag&&((lv&2)===0&&(yx|=u),ay===4&&Xx(n,zg,jy,!1)),wx(n))}function d5(n,i,u){if((lv&6)!==0)throw Error(a(327));var C=!u&&(i&127)===0&&(i&n.expiredLanes)===0||S1(n,i),re=C?hw(n,i):Z_(n,i,!0),st=C;do{if(re===0){vy&&!C&&Xx(n,i,0,!1);break}else{if(u=n.current.alternate,st&&!uw(u)){re=Z_(n,i,!1),st=!1;continue}if(re===2){if(st=i,n.errorRecoveryDisabledLanes&st)var ha=0;else ha=n.pendingLanes&-536870913,ha=ha!==0?ha:ha&536870912?536870912:0;if(ha!==0){i=ha;e:{var qp=n;re=cx;var q0=qp.current.memoizedState.isDehydrated;if(q0&&(O2(qp,ha).flags|=256),ha=Z_(qp,ha,!1),ha!==2){if(vx&&!q0){qp.errorRecoveryDisabledLanes|=st,yx|=st,re=4;break e}st=qy,qy=re,st!==null&&(qy===null?qy=st:qy.push.apply(qy,st))}re=ha}if(st=!1,re!==2)continue}}if(re===1){O2(n,0),Xx(n,i,0,!0);break}e:{switch(C=n,st=re,st){case 0:case 1:throw Error(a(345));case 4:if((i&4194048)!==i)break;case 6:Xx(C,i,jy,!uv);break e;case 2:qy=null;break;case 3:case 5:break;default:throw Error(a(329))}if((i&62914560)===i&&(re=u_+300-Xp(),10<re)){if(Xx(C,i,jy,!uv),Zm(C,0,!0)!==0)break e;kx=i,C.timeoutHandle=P5(h5.bind(null,C,u,qy,k2,c_,i,jy,yx,xx,uv,st,"Throttled",-0,0),re);break e}h5(C,u,qy,k2,c_,i,jy,yx,xx,uv,st,null,-0,0)}}break}while(!0);wx(n)}function h5(n,i,u,C,re,st,ha,qp,q0,Dm,Gm,pm,_m,Cm){if(n.timeoutHandle=-1,pm=i.subtreeFlags,pm&8192||(pm&16785408)===16785408){pm={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Qp},ly(i,st,pm);var G1=(st&62914560)===st?u_-Xp():(st&4194048)===st?_x-Xp():0;if(G1=Aw(pm,G1),G1!==null){kx=st,n.cancelPendingCommit=G1(v5.bind(null,n,i,st,u,C,re,ha,qp,q0,Gm,pm,null,_m,Cm)),Xx(n,st,ha,!Dm);return}}v5(n,i,st,u,C,re,ha,qp,q0)}function uw(n){for(var i=n;;){var u=i.tag;if((u===0||u===11||u===15)&&i.flags&16384&&(u=i.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var C=0;C<u.length;C++){var re=u[C],st=re.getSnapshot;re=re.value;try{if(!$y(st(),re))return!1}catch{return!1}}if(u=i.child,i.subtreeFlags&16384&&u!==null)u.return=i,i=u;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Xx(n,i,u,C){i&=~L2,i&=~yx,n.suspendedLanes|=i,n.pingedLanes&=~i,C&&(n.warmLanes|=i),C=n.expirationTimes;for(var re=i;0<re;){var st=31-Um(re),ha=1<<st;C[st]=-1,re&=~ha}u!==0&&xy(n,u,i)}function $_(){return(lv&6)===0?(m_(0),!1):!0}function i3(){if(Cg!==null){if(rv===0)var n=Cg.return;else n=Cg,Rx=Fx=null,Ue(n),E2=null,t_=0,n=Cg;for(;n!==null;)Tt(n.alternate,n),n=n.return;Cg=null}}function O2(n,i){var u=n.timeoutHandle;u!==-1&&(n.timeoutHandle=-1,I5(u)),u=n.cancelPendingCommit,u!==null&&(n.cancelPendingCommit=null,u()),kx=0,i3(),Ag=n,Cg=u=Mx(n.current,null),zg=i,rv=0,vv=null,uv=!1,vy=S1(n,i),vx=!1,xx=jy=L2=yx=By=ay=0,qy=cx=null,c_=!1,(i&8)!==0&&(i|=i&32);var C=n.entangledLanes;if(C!==0)for(n=n.entanglements,C&=i;0<C;){var re=31-Um(C),st=1<<re;i|=n[re],C&=~st}return Oy=i,z_(),u}function f5(n,i){cv=null,ae.H=$o,i===M2||i===V_?(i=r5(),rv=3):i===Wb?(i=r5(),rv=4):rv=i===St?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,vv=i,Cg===null&&(ay=1,fm(n,ix(i,n.current)))}function p5(){var n=Xy.current;return n===null?!0:(zg&4194048)===zg?lx===null:(zg&62914560)===zg||(zg&536870912)!==0?n===lx:!1}function o3(){var n=ae.H;return ae.H=$o,n===null?$o:n}function s3(){var n=ae.A;return ae.A=yy,n}function h_(){ay=4,uv||(zg&4194048)!==zg&&Xy.current!==null||(vy=!0),(By&134217727)===0&&(yx&134217727)===0||Ag===null||Xx(Ag,zg,jy,!1)}function Z_(n,i,u){var C=lv;lv|=2;var re=o3(),st=s3();(Ag!==n||zg!==i)&&(k2=null,O2(n,i)),i=!1;var ha=ay;e:do try{if(rv!==0&&Cg!==null){var qp=Cg,q0=vv;switch(rv){case 8:i3(),ha=6;break e;case 3:case 2:case 9:case 6:Xy.current===null&&(i=!0);var Dm=rv;if(rv=0,vv=null,P2(n,qp,q0,Dm),u&&vy){ha=0;break e}break;default:Dm=rv,rv=0,vv=null,P2(n,qp,q0,Dm)}}dw(),ha=ay;break}catch(Gm){f5(n,Gm)}while(!0);return i&&n.shellSuspendCounter++,Rx=Fx=null,lv=C,ae.H=re,ae.A=st,Cg===null&&(Ag=null,zg=0,z_()),ha}function dw(){for(;Cg!==null;)m5(Cg)}function hw(n,i){var u=lv;lv|=2;var C=o3(),re=s3();Ag!==n||zg!==i?(k2=null,d_=Xp()+500,O2(n,i)):vy=S1(n,i);e:do try{if(rv!==0&&Cg!==null){i=Cg;var st=vv;t:switch(rv){case 1:rv=0,vv=null,P2(n,i,st,1);break;case 2:case 9:if(e5(st)){rv=0,vv=null,g5(i);break}i=function(){rv!==2&&rv!==9||Ag!==n||(rv=7),wx(n)},st.then(i,i);break e;case 3:rv=7;break e;case 4:rv=5;break e;case 7:e5(st)?(rv=0,vv=null,g5(i)):(rv=0,vv=null,P2(n,i,st,7));break;case 5:var ha=null;switch(Cg.tag){case 26:ha=Cg.memoizedState;case 5:case 27:var qp=Cg;if(ha?$5(ha):qp.stateNode.complete){rv=0,vv=null;var q0=qp.sibling;if(q0!==null)Cg=q0;else{var Dm=qp.return;Dm!==null?(Cg=Dm,J_(Dm)):Cg=null}break t}}rv=0,vv=null,P2(n,i,st,5);break;case 6:rv=0,vv=null,P2(n,i,st,6);break;case 8:i3(),ay=6;break e;default:throw Error(a(462))}}z2();break}catch(Gm){f5(n,Gm)}while(!0);return Rx=Fx=null,ae.H=C,ae.A=re,lv=u,Cg!==null?0:(Ag=null,zg=0,z_(),ay)}function z2(){for(;Cg!==null&&!og();)m5(Cg)}function m5(n){var i=yg(n.alternate,n,Oy);n.memoizedProps=n.pendingProps,i===null?J_(n):Cg=i}function g5(n){var i=n,u=i.alternate;switch(i.tag){case 15:case 0:i=e1(u,i,i.pendingProps,i.type,void 0,zg);break;case 11:i=e1(u,i,i.pendingProps,i.type.render,i.ref,zg);break;case 5:Ue(i);default:Tt(u,i),i=Cg=X3(i,Oy),i=yg(u,i,Oy)}n.memoizedProps=n.pendingProps,i===null?J_(n):Cg=i}function P2(n,i,u,C){Rx=Fx=null,Ue(i),E2=null,t_=0;var re=i.return;try{if(Hp(n,re,i,u,zg)){ay=1,fm(n,ix(u,n.current)),Cg=null;return}}catch(st){if(re!==null)throw Cg=re,st;ay=1,fm(n,ix(u,n.current)),Cg=null;return}i.flags&32768?(Av||C===1?n=!0:vy||(zg&536870912)!==0?n=!1:(uv=n=!0,(C===2||C===9||C===3||C===6)&&(C=Xy.current,C!==null&&C.tag===13&&(C.flags|=16384))),l3(i,n)):J_(i)}function J_(n){var i=n;do{if((i.flags&32768)!==0){l3(i,uv);return}n=i.return;var u=Xg(i.alternate,i,Oy);if(u!==null){Cg=u;return}if(i=i.sibling,i!==null){Cg=i;return}Cg=i=n}while(i!==null);ay===0&&(ay=5)}function l3(n,i){do{var u=Ct(n.alternate,n);if(u!==null){u.flags&=32767,Cg=u;return}if(u=n.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!i&&(n=n.sibling,n!==null)){Cg=n;return}Cg=n=u}while(n!==null);ay=6,Cg=null}function v5(n,i,u,C,re,st,ha,qp,q0){n.cancelPendingCommit=null;do K_();while(dy!==0);if((lv&6)!==0)throw Error(a(327));if(i!==null){if(i===n.current)throw Error(a(177));if(st=i.lanes|i.childLanes,st|=O_,ey(n,u,st,ha,qp,q0),n===Ag&&(Cg=Ag=null,zg=0),m2=i,px=n,kx=u,t3=st,r3=re,n3=C,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,p_(r0,function(){return b5(),null})):(n.callbackNode=null,n.callbackPriority=0),C=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||C){C=ae.T,ae.T=null,re=wp.p,wp.p=2,ha=lv,lv|=4;try{av(n,i,u)}finally{lv=ha,wp.p=re,ae.T=C}}dy=1,y5(),x5(),c3()}}function y5(){if(dy===1){dy=0;var n=px,i=m2,u=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||u){u=ae.T,ae.T=null;var C=wp.p;wp.p=2;var re=lv;lv|=4;try{Kv(i,n);var st=y3,ha=Tb(n.containerInfo),qp=st.focusedElem,q0=st.selectionRange;if(ha!==qp&&qp&&qp.ownerDocument&&B3(qp.ownerDocument.documentElement,qp)){if(q0!==null&&zx(qp)){var Dm=q0.start,Gm=q0.end;if(Gm===void 0&&(Gm=Dm),"selectionStart"in qp)qp.selectionStart=Dm,qp.selectionEnd=Math.min(Gm,qp.value.length);else{var pm=qp.ownerDocument||document,_m=pm&&pm.defaultView||window;if(_m.getSelection){var Cm=_m.getSelection(),G1=qp.textContent.length,hg=Math.min(q0.start,G1),qg=q0.end===void 0?hg:Math.min(q0.end,G1);!Cm.extend&&hg>qg&&(ha=qg,qg=hg,hg=ha);var Em=F3(qp,hg),hm=F3(qp,qg);if(Em&&hm&&(Cm.rangeCount!==1||Cm.anchorNode!==Em.node||Cm.anchorOffset!==Em.offset||Cm.focusNode!==hm.node||Cm.focusOffset!==hm.offset)){var Om=pm.createRange();Om.setStart(Em.node,Em.offset),Cm.removeAllRanges(),hg>qg?(Cm.addRange(Om),Cm.extend(hm.node,hm.offset)):(Om.setEnd(hm.node,hm.offset),Cm.addRange(Om))}}}}for(pm=[],Cm=qp;Cm=Cm.parentNode;)Cm.nodeType===1&&pm.push({element:Cm,left:Cm.scrollLeft,top:Cm.scrollTop});for(typeof qp.focus=="function"&&qp.focus(),qp=0;qp<pm.length;qp++){var c1=pm[qp];c1.element.scrollLeft=c1.left,c1.element.scrollTop=c1.top}}xb=!!v3,y3=v3=null}finally{lv=re,wp.p=C,ae.T=u}}n.current=i,dy=2}}function x5(){if(dy===2){dy=0;var n=px,i=m2,u=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||u){u=ae.T,ae.T=null;var C=wp.p;wp.p=2;var re=lv;lv|=4;try{dg(n,i.alternate,i)}finally{lv=re,wp.p=C,ae.T=u}}dy=3}}function c3(){if(dy===4||dy===3){dy=0,R0();var n=px,i=m2,u=kx,C=n3;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?dy=5:(dy=0,m2=px=null,_5(n,n.pendingLanes));var re=n.pendingLanes;if(re===0&&(bx=null),_y(u),i=i.stateNode,zm&&typeof zm.onCommitFiberRoot=="function")try{zm.onCommitFiberRoot(cm,i,void 0,(i.current.flags&128)===128)}catch{}if(C!==null){i=ae.T,re=wp.p,wp.p=2,ae.T=null;try{for(var st=n.onRecoverableError,ha=0;ha<C.length;ha++){var qp=C[ha];st(qp.value,{componentStack:qp.stack})}}finally{ae.T=i,wp.p=re}}(kx&3)!==0&&K_(),wx(n),re=n.pendingLanes,(u&261930)!==0&&(re&42)!==0?n===a3?N2++:(N2=0,a3=n):N2=0,m_(0)}}function _5(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,Q2(i)))}function K_(){return y5(),x5(),c3(),b5()}function b5(){if(dy!==5)return!1;var n=px,i=t3;t3=0;var u=_y(kx),C=ae.T,re=wp.p;try{wp.p=32>u?32:u,ae.T=null,u=r3,r3=null;var st=px,ha=kx;if(dy=0,m2=px=null,kx=0,(lv&6)!==0)throw Error(a(331));var qp=lv;if(lv|=4,uy(st.current),Qv(st,st.current,ha,u),lv=qp,m_(0,!1),zm&&typeof zm.onPostCommitFiberRoot=="function")try{zm.onPostCommitFiberRoot(cm,st)}catch{}return!0}finally{wp.p=re,ae.T=C,_5(n,i)}}function w5(n,i,u){i=ix(u,i),i=om(n.stateNode,i,2),n=fx(n,i,2),n!==null&&(Cv(n,2),wx(n))}function Vv(n,i,u){if(n.tag===3)w5(n,n,u);else for(;i!==null;){if(i.tag===3){w5(i,n,u);break}else if(i.tag===1){var C=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof C.componentDidCatch=="function"&&(bx===null||!bx.has(C))){n=ix(u,n),u=Rm(2),C=fx(i,u,2),C!==null&&(ci(u,C,i,n),Cv(C,2),wx(C));break}}i=i.return}}function Q_(n,i,u){var C=n.pingCache;if(C===null){C=n.pingCache=new Hy;var re=new Set;C.set(i,re)}else re=C.get(i),re===void 0&&(re=new Set,C.set(i,re));re.has(u)||(vx=!0,re.add(u),n=fw.bind(null,n,i,u),i.then(n,n))}function fw(n,i,u){var C=n.pingCache;C!==null&&C.delete(i),n.pingedLanes|=n.suspendedLanes&u,n.warmLanes&=~u,Ag===n&&(zg&u)===u&&(ay===4||ay===3&&(zg&62914560)===zg&&300>Xp()-u_?(lv&2)===0&&O2(n,0):L2|=u,xx===zg&&(xx=0)),wx(n)}function S5(n,i){i===0&&(i=hv()),n=a2(n,i),n!==null&&(Cv(n,i),wx(n))}function pw(n){var i=n.memoizedState,u=0;i!==null&&(u=i.retryLane),S5(n,u)}function f_(n,i){var u=0;switch(n.tag){case 31:case 13:var C=n.stateNode,re=n.memoizedState;re!==null&&(u=re.retryLane);break;case 19:C=n.stateNode;break;case 22:C=n.stateNode._retryCache;break;default:throw Error(a(314))}C!==null&&C.delete(i),S5(n,u)}function p_(n,i){return X1(n,i)}var Qy=null,I2=null,u3=!1,eb=!1,d3=!1,Nx=0;function wx(n){n!==I2&&n.next===null&&(I2===null?Qy=I2=n:I2=I2.next=n),eb=!0,u3||(u3=!0,gw())}function m_(n,i){if(!d3&&eb){d3=!0;do for(var u=!1,C=Qy;C!==null;){if(n!==0){var re=C.pendingLanes;if(re===0)var st=0;else{var ha=C.suspendedLanes,qp=C.pingedLanes;st=(1<<31-Um(42|n)+1)-1,st&=re&~(ha&~qp),st=st&201326741?st&201326741|1:st?st|2:0}st!==0&&(u=!0,rb(C,st))}else st=zg,st=Zm(C,C===Ag?st:0,C.cancelPendingCommit!==null||C.timeoutHandle!==-1),(st&3)===0||S1(C,st)||(u=!0,rb(C,st));C=C.next}while(u);d3=!1}}function mw(){T5()}function T5(){eb=u3=!1;var n=0;Nx!==0&&z5()&&(n=Nx);for(var i=Xp(),u=null,C=Qy;C!==null;){var re=C.next,st=M5(C,i);st===0?(C.next=null,u===null?Qy=re:u.next=re,re===null&&(I2=u)):(u=C,(n!==0||(st&3)!==0)&&(eb=!0)),C=re}dy!==0&&dy!==5||m_(n),Nx!==0&&(Nx=0)}function M5(n,i){for(var u=n.suspendedLanes,C=n.pingedLanes,re=n.expirationTimes,st=n.pendingLanes&-62914561;0<st;){var ha=31-Um(st),qp=1<<ha,q0=re[ha];q0===-1?((qp&u)===0||(qp&C)!==0)&&(re[ha]=p1(qp,i)):q0<=i&&(n.expiredLanes|=qp),st&=~qp}if(i=Ag,u=zg,u=Zm(n,n===i?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),C=n.callbackNode,u===0||n===i&&(rv===2||rv===9)||n.cancelPendingCommit!==null)return C!==null&&C!==null&&sg(C),n.callbackNode=null,n.callbackPriority=0;if((u&3)===0||S1(n,u)){if(i=u&-u,i===n.callbackPriority)return i;switch(C!==null&&sg(C),_y(u)){case 2:case 8:u=Vp;break;case 32:u=r0;break;case 268435456:u=bm;break;default:u=r0}return C=tb.bind(null,n),u=X1(u,C),n.callbackPriority=i,n.callbackNode=u,i}return C!==null&&C!==null&&sg(C),n.callbackPriority=2,n.callbackNode=null,2}function tb(n,i){if(dy!==0&&dy!==5)return n.callbackNode=null,n.callbackPriority=0,null;var u=n.callbackNode;if(K_()&&n.callbackNode!==u)return null;var C=zg;return C=Zm(n,n===Ag?C:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),C===0?null:(d5(n,C,i),M5(n,Xp()),n.callbackNode!=null&&n.callbackNode===u?tb.bind(null,n):null)}function rb(n,i){if(K_())return null;d5(n,i,!0)}function gw(){U5(function(){(lv&6)!==0?X1($m,mw):T5()})}function h3(){if(Nx===0){var n=S2;n===0&&(n=M1,M1<<=1,(M1&261888)===0&&(M1=256)),Nx=n}return Nx}function E5(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:$p(""+n)}function A5(n,i){var u=i.ownerDocument.createElement("input");return u.name=i.name,u.value=i.value,n.id&&u.setAttribute("form",n.id),i.parentNode.insertBefore(u,i),n=new FormData(n),u.parentNode.removeChild(u),n}function C5(n,i,u,C,re){if(i==="submit"&&u&&u.stateNode===re){var st=E5((re[wg]||null).action),ha=C.submitter;ha&&(i=(i=ha[wg]||null)?E5(i.formAction):ha.getAttribute("formAction"),i!==null&&(st=i,ha=null));var qp=new q1("action","action",null,C,re);n.push({event:qp,listeners:[{instance:null,listener:function(){if(C.defaultPrevented){if(Nx!==0){var q0=ha?A5(re,ha):new FormData(re);G(u,{pending:!0,data:q0,method:re.method,action:st},null,q0)}}else typeof st=="function"&&(qp.preventDefault(),q0=ha?A5(re,ha):new FormData(re),G(u,{pending:!0,data:q0,method:re.method,action:st},st,q0))},currentTarget:re}]})}}for(var f3=0;f3<Db.length;f3++){var p3=Db[f3],m3=p3.toLowerCase(),R5=p3[0].toUpperCase()+p3.slice(1);ax(m3,"on"+R5)}ax(j3,"onAnimationEnd"),ax(V3,"onAnimationIteration"),ax(H3,"onAnimationStart"),ax("dblclick","onDoubleClick"),ax("focusin","onFocus"),ax("focusout","onBlur"),ax(tw,"onTransitionRun"),ax(rw,"onTransitionStart"),ax(nw,"onTransitionCancel"),ax(Rb,"onTransitionEnd"),A1("onMouseEnter",["mouseout","mouseover"]),A1("onMouseLeave",["mouseout","mouseover"]),A1("onPointerEnter",["pointerout","pointerover"]),A1("onPointerLeave",["pointerout","pointerover"]),jm("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),jm("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),jm("onBeforeInput",["compositionend","keypress","textInput","paste"]),jm("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),jm("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),jm("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var U2="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),D5=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(U2));function L5(n,i){i=(i&4)!==0;for(var u=0;u<n.length;u++){var C=n[u],re=C.event;C=C.listeners;e:{var st=void 0;if(i)for(var ha=C.length-1;0<=ha;ha--){var qp=C[ha],q0=qp.instance,Dm=qp.currentTarget;if(qp=qp.listener,q0!==st&&re.isPropagationStopped())break e;st=qp,re.currentTarget=Dm;try{st(re)}catch(Gm){N_(Gm)}re.currentTarget=null,st=q0}else for(ha=0;ha<C.length;ha++){if(qp=C[ha],q0=qp.instance,Dm=qp.currentTarget,qp=qp.listener,q0!==st&&re.isPropagationStopped())break e;st=qp,re.currentTarget=Dm;try{st(re)}catch(Gm){N_(Gm)}re.currentTarget=null,st=q0}}}}function bv(n,i){var u=i[Uv];u===void 0&&(u=i[Uv]=new Set);var C=n+"__bubble";u.has(C)||(ib(i,n,2,!1),u.add(C))}function nb(n,i,u){var C=0;i&&(C|=4),ib(u,n,C,i)}var g_="_reactListening"+Math.random().toString(36).slice(2);function ab(n){if(!n[g_]){n[g_]=!0,Bm.forEach(function(u){u!=="selectionchange"&&(D5.has(u)||nb(u,!1,n),nb(u,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[g_]||(i[g_]=!0,nb("selectionchange",!1,i))}}function ib(n,i,u,C){switch(J5(i)){case 2:var re=O3;break;case 8:re=_b;break;default:re=bb}u=re.bind(null,i,u,n),re=void 0,!i1||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(re=!0),C?re!==void 0?n.addEventListener(i,u,{capture:!0,passive:re}):n.addEventListener(i,u,!0):re!==void 0?n.addEventListener(i,u,{passive:re}):n.addEventListener(i,u,!1)}function v_(n,i,u,C,re){var st=C;if((i&1)===0&&(i&2)===0&&C!==null)e:for(;;){if(C===null)return;var ha=C.tag;if(ha===3||ha===4){var qp=C.stateNode.containerInfo;if(qp===re)break;if(ha===4)for(ha=C.return;ha!==null;){var q0=ha.tag;if((q0===3||q0===4)&&ha.stateNode.containerInfo===re)return;ha=ha.return}for(;qp!==null;){if(ha=t0(qp),ha===null)return;if(q0=ha.tag,q0===5||q0===6||q0===26||q0===27){C=st=ha;continue e}qp=qp.parentNode}}C=C.return}G0(function(){var Dm=st,Gm=g0(u),pm=[];e:{var _m=G3.get(n);if(_m!==void 0){var Cm=q1,G1=n;switch(n){case"keypress":if(Fm(u)===0)break e;case"keydown":case"keyup":Cm=Mv;break;case"focusin":G1="focus",Cm=mv;break;case"focusout":G1="blur",Cm=mv;break;case"beforeblur":case"afterblur":Cm=mv;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Cm=gg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Cm=vg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Cm=we;break;case j3:case V3:case H3:Cm=Pv;break;case Rb:Cm=mt;break;case"scroll":case"scrollend":Cm=eg;break;case"wheel":Cm=j0;break;case"copy":case"cut":case"paste":Cm=ty;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Cm=Xv;break;case"toggle":case"beforetoggle":Cm=Wm}var hg=(i&4)!==0,qg=!hg&&(n==="scroll"||n==="scrollend"),Em=hg?_m!==null?_m+"Capture":null:_m;hg=[];for(var hm=Dm,Om;hm!==null;){var c1=hm;if(Om=c1.stateNode,c1=c1.tag,c1!==5&&c1!==26&&c1!==27||Om===null||Em===null||(c1=Pm(hm,Em),c1!=null&&hg.push(y_(hm,c1,Om))),qg)break;hm=hm.return}0<hg.length&&(_m=new Cm(_m,G1,null,u,Gm),pm.push({event:_m,listeners:hg}))}}if((i&7)===0){e:{if(_m=n==="mouseover"||n==="pointerover",Cm=n==="mouseout"||n==="pointerout",_m&&u!==T0&&(G1=u.relatedTarget||u.fromElement)&&(t0(G1)||G1[Ov]))break e;if((Cm||_m)&&(_m=Gm.window===Gm?Gm:(_m=Gm.ownerDocument)?_m.defaultView||_m.parentWindow:window,Cm?(G1=u.relatedTarget||u.toElement,Cm=Dm,G1=G1?t0(G1):null,G1!==null&&(qg=l(G1),hg=G1.tag,G1!==qg||hg!==5&&hg!==27&&hg!==6)&&(G1=null)):(Cm=null,G1=Dm),Cm!==G1)){if(hg=gg,c1="onMouseLeave",Em="onMouseEnter",hm="mouse",(n==="pointerout"||n==="pointerover")&&(hg=Xv,c1="onPointerLeave",Em="onPointerEnter",hm="pointer"),qg=Cm==null?_m:J0(Cm),Om=G1==null?_m:J0(G1),_m=new hg(c1,hm+"leave",Cm,u,Gm),_m.target=qg,_m.relatedTarget=Om,c1=null,t0(Gm)===Dm&&(hg=new hg(Em,hm+"enter",G1,u,Gm),hg.target=Om,hg.relatedTarget=qg,c1=hg),qg=c1,Cm&&G1)t:{for(hg=vw,Em=Cm,hm=G1,Om=0,c1=Em;c1;c1=hg(c1))Om++;c1=0;for(var bg=hm;bg;bg=hg(bg))c1++;for(;0<Om-c1;)Em=hg(Em),Om--;for(;0<c1-Om;)hm=hg(hm),c1--;for(;Om--;){if(Em===hm||hm!==null&&Em===hm.alternate){hg=Em;break t}Em=hg(Em),hm=hg(hm)}hg=null}else hg=null;Cm!==null&&k5(pm,_m,Cm,hg,!1),G1!==null&&qg!==null&&k5(pm,qg,G1,hg,!0)}}e:{if(_m=Dm?J0(Dm):window,Cm=_m.nodeName&&_m.nodeName.toLowerCase(),Cm==="select"||Cm==="input"&&_m.type==="file")var Yg=pv;else if(Vg(_m))if(Dy)Yg=D_;else{Yg=Q5;var pg=I3}else Cm=_m.nodeName,!Cm||Cm.toLowerCase()!=="input"||_m.type!=="checkbox"&&_m.type!=="radio"?Dm&&Yo(Dm.elementType)&&(Yg=pv):Yg=ew;if(Yg&&(Yg=Yg(n,Dm))){Ev(pm,Yg,u,Gm);break e}pg&&pg(n,_m,Dm),n==="focusout"&&Dm&&_m.type==="number"&&Dm.memoizedProps.value!=null&&Dt(_m,"number",_m.value)}switch(pg=Dm?J0(Dm):window,n){case"focusin":(Vg(pg)||pg.contentEditable==="true")&&(Px=pg,L_=Dm,q2=null);break;case"focusout":q2=L_=Px=null;break;case"mousedown":Eb=!0;break;case"contextmenu":case"mouseup":case"dragend":Eb=!1,Ab(pm,u,Gm);break;case"selectionchange":if(Mb)break;case"keydown":case"keyup":Ab(pm,u,Gm)}var nv;if(U1)e:{switch(n){case"compositionstart":var Tv="onCompositionStart";break e;case"compositionend":Tv="onCompositionEnd";break e;case"compositionupdate":Tv="onCompositionUpdate";break e}Tv=void 0}else Og?oy(n,u)&&(Tv="onCompositionEnd"):n==="keydown"&&u.keyCode===229&&(Tv="onCompositionStart");Tv&&(Wg&&u.locale!=="ko"&&(Og||Tv!=="onCompositionStart"?Tv==="onCompositionEnd"&&Og&&(nv=I1()):(_1=Gm,C1="value"in _1?_1.value:_1.textContent,Og=!0)),pg=ob(Dm,Tv),0<pg.length&&(Tv=new py(Tv,n,null,u,Gm),pm.push({event:Tv,listeners:pg}),nv?Tv.data=nv:(nv=xv(u),nv!==null&&(Tv.data=nv)))),(nv=qm?Rv(n,u):$g(n,u))&&(Tv=ob(Dm,"onBeforeInput"),0<Tv.length&&(pg=new py("onBeforeInput","beforeinput",null,u,Gm),pm.push({event:pg,listeners:Tv}),pg.data=nv)),C5(pm,n,Dm,u,Gm)}L5(pm,i)})}function y_(n,i,u){return{instance:n,listener:i,currentTarget:u}}function ob(n,i){for(var u=i+"Capture",C=[];n!==null;){var re=n,st=re.stateNode;if(re=re.tag,re!==5&&re!==26&&re!==27||st===null||(re=Pm(n,u),re!=null&&C.unshift(y_(n,re,st)),re=Pm(n,i),re!=null&&C.push(y_(n,re,st))),n.tag===3)return C;n=n.return}return[]}function vw(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function k5(n,i,u,C,re){for(var st=i._reactName,ha=[];u!==null&&u!==C;){var qp=u,q0=qp.alternate,Dm=qp.stateNode;if(qp=qp.tag,q0!==null&&q0===C)break;qp!==5&&qp!==26&&qp!==27||Dm===null||(q0=Dm,re?(Dm=Pm(u,st),Dm!=null&&ha.unshift(y_(u,Dm,q0))):re||(Dm=Pm(u,st),Dm!=null&&ha.push(y_(u,Dm,q0)))),u=u.return}ha.length!==0&&n.push({event:i,listeners:ha})}var yw=/\r\n?/g,N5=/\u0000|\uFFFD/g;function g3(n){return(typeof n=="string"?n:""+n).replace(yw,`
`).replace(N5,"")}function sb(n,i){return i=g3(i),g3(n)===i}function Hv(n,i,u,C,re,st){switch(u){case"children":typeof C=="string"?i==="body"||i==="textarea"&&C===""||Yt(n,C):(typeof C=="number"||typeof C=="bigint")&&i!=="body"&&Yt(n,""+C);break;case"className":Mg(n,"class",C);break;case"tabIndex":Mg(n,"tabindex",C);break;case"dir":case"role":case"viewBox":case"width":case"height":Mg(n,u,C);break;case"style":aa(n,C,st);break;case"data":if(i!=="object"){Mg(n,"data",C);break}case"src":case"href":if(C===""&&(i!=="a"||u!=="href")){n.removeAttribute(u);break}if(C==null||typeof C=="function"||typeof C=="symbol"||typeof C=="boolean"){n.removeAttribute(u);break}C=$p(""+C),n.setAttribute(u,C);break;case"action":case"formAction":if(typeof C=="function"){n.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof st=="function"&&(u==="formAction"?(i!=="input"&&Hv(n,i,"name",re.name,re,null),Hv(n,i,"formEncType",re.formEncType,re,null),Hv(n,i,"formMethod",re.formMethod,re,null),Hv(n,i,"formTarget",re.formTarget,re,null)):(Hv(n,i,"encType",re.encType,re,null),Hv(n,i,"method",re.method,re,null),Hv(n,i,"target",re.target,re,null)));if(C==null||typeof C=="symbol"||typeof C=="boolean"){n.removeAttribute(u);break}C=$p(""+C),n.setAttribute(u,C);break;case"onClick":C!=null&&(n.onclick=Qp);break;case"onScroll":C!=null&&bv("scroll",n);break;case"onScrollEnd":C!=null&&bv("scrollend",n);break;case"dangerouslySetInnerHTML":if(C!=null){if(typeof C!="object"||!("__html"in C))throw Error(a(61));if(u=C.__html,u!=null){if(re.children!=null)throw Error(a(60));n.innerHTML=u}}break;case"multiple":n.multiple=C&&typeof C!="function"&&typeof C!="symbol";break;case"muted":n.muted=C&&typeof C!="function"&&typeof C!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(C==null||typeof C=="function"||typeof C=="boolean"||typeof C=="symbol"){n.removeAttribute("xlink:href");break}u=$p(""+C),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":C!=null&&typeof C!="function"&&typeof C!="symbol"?n.setAttribute(u,""+C):n.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":C&&typeof C!="function"&&typeof C!="symbol"?n.setAttribute(u,""):n.removeAttribute(u);break;case"capture":case"download":C===!0?n.setAttribute(u,""):C!==!1&&C!=null&&typeof C!="function"&&typeof C!="symbol"?n.setAttribute(u,C):n.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":C!=null&&typeof C!="function"&&typeof C!="symbol"&&!isNaN(C)&&1<=C?n.setAttribute(u,C):n.removeAttribute(u);break;case"rowSpan":case"start":C==null||typeof C=="function"||typeof C=="symbol"||isNaN(C)?n.removeAttribute(u):n.setAttribute(u,C);break;case"popover":bv("beforetoggle",n),bv("toggle",n),lg(n,"popover",C);break;case"xlinkActuate":$1(n,"http://www.w3.org/1999/xlink","xlink:actuate",C);break;case"xlinkArcrole":$1(n,"http://www.w3.org/1999/xlink","xlink:arcrole",C);break;case"xlinkRole":$1(n,"http://www.w3.org/1999/xlink","xlink:role",C);break;case"xlinkShow":$1(n,"http://www.w3.org/1999/xlink","xlink:show",C);break;case"xlinkTitle":$1(n,"http://www.w3.org/1999/xlink","xlink:title",C);break;case"xlinkType":$1(n,"http://www.w3.org/1999/xlink","xlink:type",C);break;case"xmlBase":$1(n,"http://www.w3.org/XML/1998/namespace","xml:base",C);break;case"xmlLang":$1(n,"http://www.w3.org/XML/1998/namespace","xml:lang",C);break;case"xmlSpace":$1(n,"http://www.w3.org/XML/1998/namespace","xml:space",C);break;case"is":lg(n,"is",C);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=Ci.get(u)||u,lg(n,u,C))}}function F2(n,i,u,C,re,st){switch(u){case"style":aa(n,C,st);break;case"dangerouslySetInnerHTML":if(C!=null){if(typeof C!="object"||!("__html"in C))throw Error(a(61));if(u=C.__html,u!=null){if(re.children!=null)throw Error(a(60));n.innerHTML=u}}break;case"children":typeof C=="string"?Yt(n,C):(typeof C=="number"||typeof C=="bigint")&&Yt(n,""+C);break;case"onScroll":C!=null&&bv("scroll",n);break;case"onScrollEnd":C!=null&&bv("scrollend",n);break;case"onClick":C!=null&&(n.onclick=Qp);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Nm.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(re=u.endsWith("Capture"),i=u.slice(2,re?u.length-7:void 0),st=n[wg]||null,st=st!=null?st[u]:null,typeof st=="function"&&n.removeEventListener(i,st,re),typeof C=="function")){typeof st!="function"&&st!==null&&(u in n?n[u]=null:n.hasAttribute(u)&&n.removeAttribute(u)),n.addEventListener(i,C,re);break e}u in n?n[u]=C:C===!0?n.setAttribute(u,""):lg(n,u,C)}}}function Ay(n,i,u){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":bv("error",n),bv("load",n);var C=!1,re=!1,st;for(st in u)if(u.hasOwnProperty(st)){var ha=u[st];if(ha!=null)switch(st){case"src":C=!0;break;case"srcSet":re=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:Hv(n,i,st,ha,u,null)}}re&&Hv(n,i,"srcSet",u.srcSet,u,null),C&&Hv(n,i,"src",u.src,u,null);return;case"input":bv("invalid",n);var qp=st=ha=re=null,q0=null,Dm=null;for(C in u)if(u.hasOwnProperty(C)){var Gm=u[C];if(Gm!=null)switch(C){case"name":re=Gm;break;case"type":ha=Gm;break;case"checked":q0=Gm;break;case"defaultChecked":Dm=Gm;break;case"value":st=Gm;break;case"defaultValue":qp=Gm;break;case"children":case"dangerouslySetInnerHTML":if(Gm!=null)throw Error(a(137,i));break;default:Hv(n,i,C,Gm,u,null)}}tt(n,st,qp,q0,Dm,ha,re,!1);return;case"select":bv("invalid",n),C=ha=st=null;for(re in u)if(u.hasOwnProperty(re)&&(qp=u[re],qp!=null))switch(re){case"value":st=qp;break;case"defaultValue":ha=qp;break;case"multiple":C=qp;default:Hv(n,i,re,qp,u,null)}i=st,u=ha,n.multiple=!!C,i!=null?It(n,!!C,i,!1):u!=null&&It(n,!!C,u,!0);return;case"textarea":bv("invalid",n),st=re=C=null;for(ha in u)if(u.hasOwnProperty(ha)&&(qp=u[ha],qp!=null))switch(ha){case"value":C=qp;break;case"defaultValue":re=qp;break;case"children":st=qp;break;case"dangerouslySetInnerHTML":if(qp!=null)throw Error(a(91));break;default:Hv(n,i,ha,qp,u,null)}Wt(n,C,re,st);return;case"option":for(q0 in u)if(u.hasOwnProperty(q0)&&(C=u[q0],C!=null))switch(q0){case"selected":n.selected=C&&typeof C!="function"&&typeof C!="symbol";break;default:Hv(n,i,q0,C,u,null)}return;case"dialog":bv("beforetoggle",n),bv("toggle",n),bv("cancel",n),bv("close",n);break;case"iframe":case"object":bv("load",n);break;case"video":case"audio":for(C=0;C<U2.length;C++)bv(U2[C],n);break;case"image":bv("error",n),bv("load",n);break;case"details":bv("toggle",n);break;case"embed":case"source":case"link":bv("error",n),bv("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Dm in u)if(u.hasOwnProperty(Dm)&&(C=u[Dm],C!=null))switch(Dm){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:Hv(n,i,Dm,C,u,null)}return;default:if(Yo(i)){for(Gm in u)u.hasOwnProperty(Gm)&&(C=u[Gm],C!==void 0&&F2(n,i,Gm,C,u,void 0));return}}for(qp in u)u.hasOwnProperty(qp)&&(C=u[qp],C!=null&&Hv(n,i,qp,C,u,null))}function xw(n,i,u,C){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var re=null,st=null,ha=null,qp=null,q0=null,Dm=null,Gm=null;for(Cm in u){var pm=u[Cm];if(u.hasOwnProperty(Cm)&&pm!=null)switch(Cm){case"checked":break;case"value":break;case"defaultValue":q0=pm;default:C.hasOwnProperty(Cm)||Hv(n,i,Cm,null,C,pm)}}for(var _m in C){var Cm=C[_m];if(pm=u[_m],C.hasOwnProperty(_m)&&(Cm!=null||pm!=null))switch(_m){case"type":st=Cm;break;case"name":re=Cm;break;case"checked":Dm=Cm;break;case"defaultChecked":Gm=Cm;break;case"value":ha=Cm;break;case"defaultValue":qp=Cm;break;case"children":case"dangerouslySetInnerHTML":if(Cm!=null)throw Error(a(137,i));break;default:Cm!==pm&&Hv(n,i,_m,Cm,C,pm)}}Et(n,ha,qp,q0,Dm,Gm,st,re);return;case"select":Cm=ha=qp=_m=null;for(st in u)if(q0=u[st],u.hasOwnProperty(st)&&q0!=null)switch(st){case"value":break;case"multiple":Cm=q0;default:C.hasOwnProperty(st)||Hv(n,i,st,null,C,q0)}for(re in C)if(st=C[re],q0=u[re],C.hasOwnProperty(re)&&(st!=null||q0!=null))switch(re){case"value":_m=st;break;case"defaultValue":qp=st;break;case"multiple":ha=st;default:st!==q0&&Hv(n,i,re,st,C,q0)}i=qp,u=ha,C=Cm,_m!=null?It(n,!!u,_m,!1):!!C!=!!u&&(i!=null?It(n,!!u,i,!0):It(n,!!u,u?[]:"",!1));return;case"textarea":Cm=_m=null;for(qp in u)if(re=u[qp],u.hasOwnProperty(qp)&&re!=null&&!C.hasOwnProperty(qp))switch(qp){case"value":break;case"children":break;default:Hv(n,i,qp,null,C,re)}for(ha in C)if(re=C[ha],st=u[ha],C.hasOwnProperty(ha)&&(re!=null||st!=null))switch(ha){case"value":_m=re;break;case"defaultValue":Cm=re;break;case"children":break;case"dangerouslySetInnerHTML":if(re!=null)throw Error(a(91));break;default:re!==st&&Hv(n,i,ha,re,C,st)}Mt(n,_m,Cm);return;case"option":for(var G1 in u)if(_m=u[G1],u.hasOwnProperty(G1)&&_m!=null&&!C.hasOwnProperty(G1))switch(G1){case"selected":n.selected=!1;break;default:Hv(n,i,G1,null,C,_m)}for(q0 in C)if(_m=C[q0],Cm=u[q0],C.hasOwnProperty(q0)&&_m!==Cm&&(_m!=null||Cm!=null))switch(q0){case"selected":n.selected=_m&&typeof _m!="function"&&typeof _m!="symbol";break;default:Hv(n,i,q0,_m,C,Cm)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var hg in u)_m=u[hg],u.hasOwnProperty(hg)&&_m!=null&&!C.hasOwnProperty(hg)&&Hv(n,i,hg,null,C,_m);for(Dm in C)if(_m=C[Dm],Cm=u[Dm],C.hasOwnProperty(Dm)&&_m!==Cm&&(_m!=null||Cm!=null))switch(Dm){case"children":case"dangerouslySetInnerHTML":if(_m!=null)throw Error(a(137,i));break;default:Hv(n,i,Dm,_m,C,Cm)}return;default:if(Yo(i)){for(var qg in u)_m=u[qg],u.hasOwnProperty(qg)&&_m!==void 0&&!C.hasOwnProperty(qg)&&F2(n,i,qg,void 0,C,_m);for(Gm in C)_m=C[Gm],Cm=u[Gm],!C.hasOwnProperty(Gm)||_m===Cm||_m===void 0&&Cm===void 0||F2(n,i,Gm,_m,C,Cm);return}}for(var Em in u)_m=u[Em],u.hasOwnProperty(Em)&&_m!=null&&!C.hasOwnProperty(Em)&&Hv(n,i,Em,null,C,_m);for(pm in C)_m=C[pm],Cm=u[pm],!C.hasOwnProperty(pm)||_m===Cm||_m==null&&Cm==null||Hv(n,i,pm,_m,C,Cm)}function lb(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function O5(){if(typeof performance.getEntriesByType=="function"){for(var n=0,i=0,u=performance.getEntriesByType("resource"),C=0;C<u.length;C++){var re=u[C],st=re.transferSize,ha=re.initiatorType,qp=re.duration;if(st&&qp&&lb(ha)){for(ha=0,qp=re.responseEnd,C+=1;C<u.length;C++){var q0=u[C],Dm=q0.startTime;if(Dm>qp)break;var Gm=q0.transferSize,pm=q0.initiatorType;Gm&&lb(pm)&&(q0=q0.responseEnd,ha+=Gm*(q0<qp?1:(qp-Dm)/(q0-Dm)))}if(--C,i+=8*(st+ha)/(re.duration/1e3),n++,10<n)break}}if(0<n)return i/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var v3=null,y3=null;function x_(n){return n.nodeType===9?n:n.ownerDocument}function x3(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function _3(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function __(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var b_=null;function z5(){var n=window.event;return n&&n.type==="popstate"?n===b_?!1:(b_=n,!0):(b_=null,!1)}var P5=typeof setTimeout=="function"?setTimeout:void 0,I5=typeof clearTimeout=="function"?clearTimeout:void 0,w_=typeof Promise=="function"?Promise:void 0,U5=typeof queueMicrotask=="function"?queueMicrotask:typeof w_<"u"?function(n){return w_.resolve(null).then(n).catch(_w)}:P5;function _w(n){setTimeout(function(){throw n})}function qx(n){return n==="head"}function F5(n,i){var u=i,C=0;do{var re=u.nextSibling;if(n.removeChild(u),re&&re.nodeType===8)if(u=re.data,u==="/$"||u==="/&"){if(C===0){n.removeChild(re),N0(i);return}C--}else if(u==="$"||u==="$?"||u==="$~"||u==="$!"||u==="&")C++;else if(u==="html")Yx(n.ownerDocument.documentElement);else if(u==="head"){u=n.ownerDocument.head,Yx(u);for(var st=u.firstChild;st;){var ha=st.nextSibling,qp=st.nodeName;st[Kp]||qp==="SCRIPT"||qp==="STYLE"||qp==="LINK"&&st.rel.toLowerCase()==="stylesheet"||u.removeChild(st),st=ha}}else u==="body"&&Yx(n.ownerDocument.body);u=re}while(u);N0(i)}function B5(n,i){var u=n;n=0;do{var C=u.nextSibling;if(u.nodeType===1?i?(u._stashedDisplay=u.style.display,u.style.display="none"):(u.style.display=u._stashedDisplay||"",u.getAttribute("style")===""&&u.removeAttribute("style")):u.nodeType===3&&(i?(u._stashedText=u.nodeValue,u.nodeValue=""):u.nodeValue=u._stashedText||""),C&&C.nodeType===8)if(u=C.data,u==="/$"){if(n===0)break;n--}else u!=="$"&&u!=="$?"&&u!=="$~"&&u!=="$!"||n++;u=C}while(u)}function cb(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var u=i;switch(i=i.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":cb(u),Fn(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}n.removeChild(u)}}function j5(n,i,u,C){for(;n.nodeType===1;){var re=u;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!C&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(C){if(!n[Kp])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(st=n.getAttribute("rel"),st==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(st!==re.rel||n.getAttribute("href")!==(re.href==null||re.href===""?null:re.href)||n.getAttribute("crossorigin")!==(re.crossOrigin==null?null:re.crossOrigin)||n.getAttribute("title")!==(re.title==null?null:re.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(st=n.getAttribute("src"),(st!==(re.src==null?null:re.src)||n.getAttribute("type")!==(re.type==null?null:re.type)||n.getAttribute("crossorigin")!==(re.crossOrigin==null?null:re.crossOrigin))&&st&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var st=re.name==null?null:""+re.name;if(re.type==="hidden"&&n.getAttribute("name")===st)return n}else return n;if(n=ux(n.nextSibling),n===null)break}return null}function V5(n,i,u){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!u||(n=ux(n.nextSibling),n===null))return null;return n}function b3(n,i){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!i||(n=ux(n.nextSibling),n===null))return null;return n}function w3(n){return n.data==="$?"||n.data==="$~"}function B2(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function bw(n,i){var u=n.ownerDocument;if(n.data==="$~")n._reactRetry=i;else if(n.data!=="$?"||u.readyState!=="loading")i();else{var C=function(){i(),u.removeEventListener("DOMContentLoaded",C)};u.addEventListener("DOMContentLoaded",C),n._reactRetry=C}}function ux(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return n}var ub=null;function S3(n){n=n.nextSibling;for(var i=0;n;){if(n.nodeType===8){var u=n.data;if(u==="/$"||u==="/&"){if(i===0)return ux(n.nextSibling);i--}else u!=="$"&&u!=="$!"&&u!=="$?"&&u!=="$~"&&u!=="&"||i++}n=n.nextSibling}return null}function H5(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var u=n.data;if(u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"){if(i===0)return n;i--}else u!=="/$"&&u!=="/&"||i++}n=n.previousSibling}return null}function S_(n,i,u){switch(i=x_(u),n){case"html":if(n=i.documentElement,!n)throw Error(a(452));return n;case"head":if(n=i.head,!n)throw Error(a(453));return n;case"body":if(n=i.body,!n)throw Error(a(454));return n;default:throw Error(a(451))}}function Yx(n){for(var i=n.attributes;i.length;)n.removeAttributeNode(i[0]);Fn(n)}var ex=new Map,T3=new Set;function j2(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var ky=wp.d;wp.d={f:G5,r:ww,D:Sw,C:Tw,L:Mw,m:hb,X:W5,S:M3,M:Ew};function G5(){var n=ky.f(),i=$_();return n||i}function ww(n){var i=s0(n);i!==null&&i.tag===5&&i.type==="form"?et(i):ky.r(n)}var $x=typeof document>"u"?null:document;function db(n,i,u){var C=$x;if(C&&typeof i=="string"&&i){var re=J(i);re='link[rel="'+n+'"][href="'+re+'"]',typeof u=="string"&&(re+='[crossorigin="'+u+'"]'),T3.has(re)||(T3.add(re),n={rel:n,crossOrigin:u,href:i},C.querySelector(re)===null&&(i=C.createElement("link"),Ay(i,"link",n),lm(i),C.head.appendChild(i)))}}function Sw(n){ky.D(n),db("dns-prefetch",n,null)}function Tw(n,i){ky.C(n,i),db("preconnect",n,i)}function Mw(n,i,u){ky.L(n,i,u);var C=$x;if(C&&n&&i){var re='link[rel="preload"][as="'+J(i)+'"]';i==="image"&&u&&u.imageSrcSet?(re+='[imagesrcset="'+J(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(re+='[imagesizes="'+J(u.imageSizes)+'"]')):re+='[href="'+J(n)+'"]';var st=re;switch(i){case"style":st=V2(n);break;case"script":st=tx(n)}ex.has(st)||(n=M({rel:"preload",href:i==="image"&&u&&u.imageSrcSet?void 0:n,as:i},u),ex.set(st,n),C.querySelector(re)!==null||i==="style"&&C.querySelector(Vy(st))||i==="script"&&C.querySelector(g2(st))||(i=C.createElement("link"),Ay(i,"link",n),lm(i),C.head.appendChild(i)))}}function hb(n,i){ky.m(n,i);var u=$x;if(u&&n){var C=i&&typeof i.as=="string"?i.as:"script",re='link[rel="modulepreload"][as="'+J(C)+'"][href="'+J(n)+'"]',st=re;switch(C){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":st=tx(n)}if(!ex.has(st)&&(n=M({rel:"modulepreload",href:n},i),ex.set(st,n),u.querySelector(re)===null)){switch(C){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(g2(st)))return}C=u.createElement("link"),Ay(C,"link",n),lm(C),u.head.appendChild(C)}}}function M3(n,i,u){ky.S(n,i,u);var C=$x;if(C&&n){var re=F0(C).hoistableStyles,st=V2(n);i=i||"default";var ha=re.get(st);if(!ha){var qp={loading:0,preload:null};if(ha=C.querySelector(Vy(st)))qp.loading=5;else{n=M({rel:"stylesheet",href:n,"data-precedence":i},u),(u=ex.get(st))&&A3(n,u);var q0=ha=C.createElement("link");lm(q0),Ay(q0,"link",n),q0._p=new Promise(function(Dm,Gm){q0.onload=Dm,q0.onerror=Gm}),q0.addEventListener("load",function(){qp.loading|=1}),q0.addEventListener("error",function(){qp.loading|=2}),qp.loading|=4,pb(ha,i,C)}ha={type:"stylesheet",instance:ha,count:1,state:qp},re.set(st,ha)}}}function W5(n,i){ky.X(n,i);var u=$x;if(u&&n){var C=F0(u).hoistableScripts,re=tx(n),st=C.get(re);st||(st=u.querySelector(g2(re)),st||(n=M({src:n,async:!0},i),(i=ex.get(re))&&C3(n,i),st=u.createElement("script"),lm(st),Ay(st,"link",n),u.head.appendChild(st)),st={type:"script",instance:st,count:1,state:null},C.set(re,st))}}function Ew(n,i){ky.M(n,i);var u=$x;if(u&&n){var C=F0(u).hoistableScripts,re=tx(n),st=C.get(re);st||(st=u.querySelector(g2(re)),st||(n=M({src:n,async:!0,type:"module"},i),(i=ex.get(re))&&C3(n,i),st=u.createElement("script"),lm(st),Ay(st,"link",n),u.head.appendChild(st)),st={type:"script",instance:st,count:1,state:null},C.set(re,st))}}function X5(n,i,u,C){var re=(re=u0.current)?j2(re):null;if(!re)throw Error(a(446));switch(n){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(i=V2(u.href),u=F0(re).hoistableStyles,C=u.get(i),C||(C={type:"style",instance:null,count:0,state:null},u.set(i,C)),C):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){n=V2(u.href);var st=F0(re).hoistableStyles,ha=st.get(n);if(ha||(re=re.ownerDocument||re,ha={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},st.set(n,ha),(st=re.querySelector(Vy(n)))&&!st._p&&(ha.instance=st,ha.state.loading=5),ex.has(n)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},ex.set(n,u),st||q5(re,n,u,ha.state))),i&&C===null)throw Error(a(528,""));return ha}if(i&&C!==null)throw Error(a(529,""));return null;case"script":return i=u.async,u=u.src,typeof u=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=tx(u),u=F0(re).hoistableScripts,C=u.get(i),C||(C={type:"script",instance:null,count:0,state:null},u.set(i,C)),C):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,n))}}function V2(n){return'href="'+J(n)+'"'}function Vy(n){return'link[rel="stylesheet"]['+n+"]"}function E3(n){return M({},n,{"data-precedence":n.precedence,precedence:null})}function q5(n,i,u,C){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?C.loading=1:(i=n.createElement("link"),C.preload=i,i.addEventListener("load",function(){return C.loading|=1}),i.addEventListener("error",function(){return C.loading|=2}),Ay(i,"link",u),lm(i),n.head.appendChild(i))}function tx(n){return'[src="'+J(n)+'"]'}function g2(n){return"script[async]"+n}function fb(n,i,u){if(i.count++,i.instance===null)switch(i.type){case"style":var C=n.querySelector('style[data-href~="'+J(u.href)+'"]');if(C)return i.instance=C,lm(C),C;var re=M({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return C=(n.ownerDocument||n).createElement("style"),lm(C),Ay(C,"style",re),pb(C,u.precedence,n),i.instance=C;case"stylesheet":re=V2(u.href);var st=n.querySelector(Vy(re));if(st)return i.state.loading|=4,i.instance=st,lm(st),st;C=E3(u),(re=ex.get(re))&&A3(C,re),st=(n.ownerDocument||n).createElement("link"),lm(st);var ha=st;return ha._p=new Promise(function(qp,q0){ha.onload=qp,ha.onerror=q0}),Ay(st,"link",C),i.state.loading|=4,pb(st,u.precedence,n),i.instance=st;case"script":return st=tx(u.src),(re=n.querySelector(g2(st)))?(i.instance=re,lm(re),re):(C=u,(re=ex.get(st))&&(C=M({},u),C3(C,re)),n=n.ownerDocument||n,re=n.createElement("script"),lm(re),Ay(re,"link",C),n.head.appendChild(re),i.instance=re);case"void":return null;default:throw Error(a(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(C=i.instance,i.state.loading|=4,pb(C,u.precedence,n));return i.instance}function pb(n,i,u){for(var C=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),re=C.length?C[C.length-1]:null,st=re,ha=0;ha<C.length;ha++){var qp=C[ha];if(qp.dataset.precedence===i)st=qp;else if(st!==re)break}st?st.parentNode.insertBefore(n,st.nextSibling):(i=u.nodeType===9?u.head:u,i.insertBefore(n,i.firstChild))}function A3(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function C3(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var T_=null;function R3(n,i,u){if(T_===null){var C=new Map,re=T_=new Map;re.set(u,C)}else re=T_,C=re.get(u),C||(C=new Map,re.set(u,C));if(C.has(n))return C;for(C.set(n,null),u=u.getElementsByTagName(n),re=0;re<u.length;re++){var st=u[re];if(!(st[Kp]||st[Lv]||n==="link"&&st.getAttribute("rel")==="stylesheet")&&st.namespaceURI!=="http://www.w3.org/2000/svg"){var ha=st.getAttribute(i)||"";ha=n+ha;var qp=C.get(ha);qp?qp.push(st):C.set(ha,[st])}}return C}function D3(n,i,u){n=n.ownerDocument||n,n.head.insertBefore(u,i==="title"?n.querySelector("head > title"):null)}function Y5(n,i,u){if(u===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return n=i.disabled,typeof i.precedence=="string"&&n==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function $5(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function Z5(n,i,u,C){if(u.type==="stylesheet"&&(typeof C.media!="string"||matchMedia(C.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var re=V2(C.href),st=i.querySelector(Vy(re));if(st){i=st._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(n.count++,n=mb.bind(n),i.then(n,n)),u.state.loading|=4,u.instance=st,lm(st);return}st=i.ownerDocument||i,C=E3(C),(re=ex.get(re))&&A3(C,re),st=st.createElement("link"),lm(st);var ha=st;ha._p=new Promise(function(qp,q0){ha.onload=qp,ha.onerror=q0}),Ay(st,"link",C),u.instance=st}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(u,i),(i=u.state.preload)&&(u.state.loading&3)===0&&(n.count++,u=mb.bind(n),i.addEventListener("load",u),i.addEventListener("error",u))}}var L3=0;function Aw(n,i){return n.stylesheets&&n.count===0&&E_(n,n.stylesheets),0<n.count||0<n.imgCount?function(u){var C=setTimeout(function(){if(n.stylesheets&&E_(n,n.stylesheets),n.unsuspend){var st=n.unsuspend;n.unsuspend=null,st()}},6e4+i);0<n.imgBytes&&L3===0&&(L3=62500*O5());var re=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&E_(n,n.stylesheets),n.unsuspend)){var st=n.unsuspend;n.unsuspend=null,st()}},(n.imgBytes>L3?50:800)+i);return n.unsuspend=u,function(){n.unsuspend=null,clearTimeout(C),clearTimeout(re)}}:null}function mb(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)E_(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var M_=null;function E_(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,M_=new Map,i.forEach(gb,n),M_=null,mb.call(n))}function gb(n,i){if(!(i.state.loading&4)){var u=M_.get(n);if(u)var C=u.get(null);else{u=new Map,M_.set(n,u);for(var re=n.querySelectorAll("link[data-precedence],style[data-precedence]"),st=0;st<re.length;st++){var ha=re[st];(ha.nodeName==="LINK"||ha.getAttribute("media")!=="not all")&&(u.set(ha.dataset.precedence,ha),C=ha)}C&&u.set(null,C)}re=i.instance,ha=re.getAttribute("data-precedence"),st=u.get(ha)||C,st===C&&u.set(null,re),u.set(ha,re),this.count++,C=mb.bind(this),re.addEventListener("load",C),re.addEventListener("error",C),st?st.parentNode.insertBefore(re,st.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(re,n.firstChild)),i.state.loading|=4}}var H2={$$typeof:q,Provider:null,Consumer:null,_currentValue:Cp,_currentValue2:Cp,_threadCount:0};function vb(n,i,u,C,re,st,ha,qp,q0){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Gg(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gg(0),this.hiddenUpdates=Gg(null),this.identifierPrefix=C,this.onUncaughtError=re,this.onCaughtError=st,this.onRecoverableError=ha,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=q0,this.incompleteTransitions=new Map}function k3(n,i,u,C,re,st,ha,qp,q0,Dm,Gm,pm){return n=new vb(n,i,u,ha,q0,Dm,Gm,pm,qp),i=1,st===!0&&(i|=24),st=Gy(3,null,null,i),n.current=st,st.stateNode=n,i=Vb(),i.refCount++,n.pooledCache=i,i.refCount++,st.memoizedState={element:C,isDehydrated:u,cache:i},qb(st),n}function G2(n){return n?(n=i2,n):i2}function wy(n,i,u,C,re,st){re=G2(re),C.context===null?C.context=re:C.pendingContext=re,C=Hx(i),C.payload={element:u},st=st===void 0?null:st,st!==null&&(C.callback=st),u=fx(n,C,i),u!==null&&(Yy(u,n,i),f2(u,n,i))}function N3(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var u=n.retryLane;n.retryLane=u!==0&&u<i?u:i}}function Ox(n,i){N3(n,i),(n=n.alternate)&&N3(n,i)}function A_(n){if(n.tag===13||n.tag===31){var i=a2(n,67108864);i!==null&&Yy(i,n,67108864),Ox(n,67108864)}}function yb(n){if(n.tag===13||n.tag===31){var i=Ky();i=Wv(i);var u=a2(n,i);u!==null&&Yy(u,n,i),Ox(n,i)}}var xb=!0;function O3(n,i,u,C){var re=ae.T;ae.T=null;var st=wp.p;try{wp.p=2,bb(n,i,u,C)}finally{wp.p=st,ae.T=re}}function _b(n,i,u,C){var re=ae.T;ae.T=null;var st=wp.p;try{wp.p=8,bb(n,i,u,C)}finally{wp.p=st,ae.T=re}}function bb(n,i,u,C){if(xb){var re=z3(C);if(re===null)v_(n,i,C,wb,u),At(n,C);else if(Er(re,n,i,u,C))C.stopPropagation();else if(At(n,C),i&4&&-1<_t.indexOf(n)){for(;re!==null;){var st=s0(re);if(st!==null)switch(st.tag){case 3:if(st=st.stateNode,st.current.memoizedState.isDehydrated){var ha=n1(st.pendingLanes);if(ha!==0){var qp=st;for(qp.pendingLanes|=2,qp.entangledLanes|=2;ha;){var q0=1<<31-Um(ha);qp.entanglements[1]|=q0,ha&=~q0}wx(st),(lv&6)===0&&(d_=Xp()+500,m_(0))}}break;case 31:case 13:qp=a2(st,2),qp!==null&&Yy(qp,st,2),$_(),Ox(st,2)}if(st=z3(C),st===null&&v_(n,i,C,wb,u),st===re)break;re=st}re!==null&&C.stopPropagation()}else v_(n,i,C,null,u)}}function z3(n){return n=g0(n),P3(n)}var wb=null;function P3(n){if(wb=null,n=t0(n),n!==null){var i=l(n);if(i===null)n=null;else{var u=i.tag;if(u===13){if(n=s(i),n!==null)return n;n=null}else if(u===31){if(n=f(i),n!==null)return n;n=null}else if(u===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return wb=n,null}function J5(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(wm()){case $m:return 2;case Vp:return 8;case r0:case B0:return 32;case bm:return 268435456;default:return 32}default:return 32}}var C_=!1,Zx=null,Jx=null,g=null,F=new Map,te=new Map,ot=[],_t="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function At(n,i){switch(n){case"focusin":case"focusout":Zx=null;break;case"dragenter":case"dragleave":Jx=null;break;case"mouseover":case"mouseout":g=null;break;case"pointerover":case"pointerout":F.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":te.delete(i.pointerId)}}function ca(n,i,u,C,re,st){return n===null||n.nativeEvent!==st?(n={blockedOn:i,domEventName:u,eventSystemFlags:C,nativeEvent:st,targetContainers:[re]},i!==null&&(i=s0(i),i!==null&&A_(i)),n):(n.eventSystemFlags|=C,i=n.targetContainers,re!==null&&i.indexOf(re)===-1&&i.push(re),n)}function Er(n,i,u,C,re){switch(i){case"focusin":return Zx=ca(Zx,n,i,u,C,re),!0;case"dragenter":return Jx=ca(Jx,n,i,u,C,re),!0;case"mouseover":return g=ca(g,n,i,u,C,re),!0;case"pointerover":var st=re.pointerId;return F.set(st,ca(F.get(st)||null,n,i,u,C,re)),!0;case"gotpointercapture":return st=re.pointerId,te.set(st,ca(te.get(st)||null,n,i,u,C,re)),!0}return!1}function Lp(n){var i=t0(n.target);if(i!==null){var u=l(i);if(u!==null){if(i=u.tag,i===13){if(i=s(u),i!==null){n.blockedOn=i,Cy(n.priority,function(){yb(u)});return}}else if(i===31){if(i=f(u),i!==null){n.blockedOn=i,Cy(n.priority,function(){yb(u)});return}}else if(i===3&&u.stateNode.current.memoizedState.isDehydrated){n.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Wp(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var u=z3(n.nativeEvent);if(u===null){u=n.nativeEvent;var C=new u.constructor(u.type,u);T0=C,u.target.dispatchEvent(C),T0=null}else return i=s0(u),i!==null&&A_(i),n.blockedOn=u,!1;i.shift()}return!0}function Yp(n,i,u){Wp(n)&&u.delete(i)}function A0(){C_=!1,Zx!==null&&Wp(Zx)&&(Zx=null),Jx!==null&&Wp(Jx)&&(Jx=null),g!==null&&Wp(g)&&(g=null),F.forEach(Yp),te.forEach(Yp)}function L0(n,i){n.blockedOn===i&&(n.blockedOn=null,C_||(C_=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,A0)))}var rm=null;function xm(n){rm!==n&&(rm=n,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){rm===n&&(rm=null);for(var i=0;i<n.length;i+=3){var u=n[i],C=n[i+1],re=n[i+2];if(typeof C!="function"){if(P3(C||u)===null)continue;break}var st=s0(u);st!==null&&(n.splice(i,3),i-=3,G(st,{pending:!0,data:re,method:u.method,action:C},C,re))}}))}function N0(n){function i(q0){return L0(q0,n)}Zx!==null&&L0(Zx,n),Jx!==null&&L0(Jx,n),g!==null&&L0(g,n),F.forEach(i),te.forEach(i);for(var u=0;u<ot.length;u++){var C=ot[u];C.blockedOn===n&&(C.blockedOn=null)}for(;0<ot.length&&(u=ot[0],u.blockedOn===null);)Lp(u),u.blockedOn===null&&ot.shift();if(u=(n.ownerDocument||n).$$reactFormReplay,u!=null)for(C=0;C<u.length;C+=3){var re=u[C],st=u[C+1],ha=re[wg]||null;if(typeof st=="function")ha||xm(u);else if(ha){var qp=null;if(st&&st.hasAttribute("formAction")){if(re=st,ha=st[wg]||null)qp=ha.formAction;else if(P3(re)!==null)continue}else qp=ha.action;typeof qp=="function"?u[C+1]=qp:(u.splice(C,3),C-=3),xm(u)}}}function K0(){function n(st){st.canIntercept&&st.info==="react-transition"&&st.intercept({handler:function(){return new Promise(function(ha){return re=ha})},focusReset:"manual",scroll:"manual"})}function i(){re!==null&&(re(),re=null),C||setTimeout(u,20)}function u(){if(!C&&!navigation.transition){var st=navigation.currentEntry;st&&st.url!=null&&navigation.navigate(st.url,{state:st.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var C=!1,re=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(u,100),function(){C=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),re!==null&&(re(),re=null)}}}function em(n){this._internalRoot=n}vm.prototype.render=em.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(a(409));var u=i.current,C=Ky();wy(u,C,n,i,null,null)},vm.prototype.unmount=em.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;wy(n.current,2,null,n,null,null),$_(),i[Ov]=null}};function vm(n){this._internalRoot=n}vm.prototype.unstable_scheduleHydration=function(n){if(n){var i=iy();n={blockedOn:null,target:n,priority:i};for(var u=0;u<ot.length&&i!==0&&i<ot[u].priority;u++);ot.splice(u,0,n),u===0&&Lp(n)}};var ym=e.version;if(ym!=="19.2.0")throw Error(a(527,ym,"19.2.0"));wp.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(a(188)):(n=Object.keys(n).join(","),Error(a(268,n)));return n=b(i),n=n!==null?E(n):null,n=n===null?null:n.stateNode,n};var nm={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:ae,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var d1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!d1.isDisabled&&d1.supportsFiber)try{cm=d1.inject(nm),zm=d1}catch{}}return reactDomClient_production.createRoot=function(n,i){if(!o(n))throw Error(a(299));var u=!1,C="",re=H0,st=im,ha=k0;return i!=null&&(i.unstable_strictMode===!0&&(u=!0),i.identifierPrefix!==void 0&&(C=i.identifierPrefix),i.onUncaughtError!==void 0&&(re=i.onUncaughtError),i.onCaughtError!==void 0&&(st=i.onCaughtError),i.onRecoverableError!==void 0&&(ha=i.onRecoverableError)),i=k3(n,1,!1,null,null,u,C,null,re,st,ha,K0),n[Ov]=i.current,ab(n),new em(i)},reactDomClient_production.hydrateRoot=function(n,i,u){if(!o(n))throw Error(a(299));var C=!1,re="",st=H0,ha=im,qp=k0,q0=null;return u!=null&&(u.unstable_strictMode===!0&&(C=!0),u.identifierPrefix!==void 0&&(re=u.identifierPrefix),u.onUncaughtError!==void 0&&(st=u.onUncaughtError),u.onCaughtError!==void 0&&(ha=u.onCaughtError),u.onRecoverableError!==void 0&&(qp=u.onRecoverableError),u.formState!==void 0&&(q0=u.formState)),i=k3(n,1,!0,i,u??null,C,re,q0,st,ha,qp,K0),i.context=G2(null),u=i.current,C=Ky(),C=Wv(C),re=Hx(C),re.callback=null,fx(u,re,C),u=C,i.current.lanes=u,Cv(i,u),wx(i),n[Ov]=i.current,ab(n),new vm(i)},reactDomClient_production.version="19.2.0",reactDomClient_production}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client.exports;hasRequiredClient=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),client.exports=requireReactDomClient_production(),client.exports}var clientExports=requireClient();const ReactDOM=getDefaultExportFromCjs(clientExports);/**
 * react-router v7.9.4
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var PopStateEventType="popstate";function createHashHistory(r={}){function e(o,l){let{pathname:s="/",search:f="",hash:m=""}=parsePath(o.location.hash.substring(1));return!s.startsWith("/")&&!s.startsWith(".")&&(s="/"+s),createLocation("",{pathname:s,search:f,hash:m},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(o,l){let s=o.document.querySelector("base"),f="";if(s&&s.getAttribute("href")){let m=o.location.href,b=m.indexOf("#");f=b===-1?m:m.slice(0,b)}return f+"#"+(typeof l=="string"?l:createPath(l))}function a(o,l){warning(o.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(l)})`)}return getUrlBasedHistory(e,t,a,r)}function invariant(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function warning(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function createKey(){return Math.random().toString(36).substring(2,10)}function getHistoryState(r,e){return{usr:r.state,key:r.key,idx:e}}function createLocation(r,e,t=null,a){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?parsePath(e):e,state:t,key:e&&e.key||a||createKey()}}function createPath({pathname:r="/",search:e="",hash:t=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(r+=t.charAt(0)==="#"?t:"#"+t),r}function parsePath(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substring(t),r=r.substring(0,t));let a=r.indexOf("?");a>=0&&(e.search=r.substring(a),r=r.substring(0,a)),r&&(e.pathname=r)}return e}function getUrlBasedHistory(r,e,t,a={}){let{window:o=document.defaultView,v5Compat:l=!1}=a,s=o.history,f="POP",m=null,b=E();b==null&&(b=0,s.replaceState({...s.state,idx:b},""));function E(){return(s.state||{idx:null}).idx}function M(){f="POP";let le=E(),K=le==null?null:le-b;b=le,m&&m({action:f,location:ee.location,delta:K})}function I(le,K){f="PUSH";let vt=createLocation(ee.location,le,K);t&&t(vt,le),b=E()+1;let q=getHistoryState(vt,b),Q=ee.createHref(vt);try{s.pushState(q,"",Q)}catch(wt){if(wt instanceof DOMException&&wt.name==="DataCloneError")throw wt;o.location.assign(Q)}l&&m&&m({action:f,location:ee.location,delta:1})}function V(le,K){f="REPLACE";let vt=createLocation(ee.location,le,K);t&&t(vt,le),b=E();let q=getHistoryState(vt,b),Q=ee.createHref(vt);s.replaceState(q,"",Q),l&&m&&m({action:f,location:ee.location,delta:0})}function Z(le){return createBrowserURLImpl(le)}let ee={get action(){return f},get location(){return r(o,s)},listen(le){if(m)throw new Error("A history only accepts one active listener");return o.addEventListener(PopStateEventType,M),m=le,()=>{o.removeEventListener(PopStateEventType,M),m=null}},createHref(le){return e(o,le)},createURL:Z,encodeLocation(le){let K=Z(le);return{pathname:K.pathname,search:K.search,hash:K.hash}},push:I,replace:V,go(le){return s.go(le)}};return ee}function createBrowserURLImpl(r,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),invariant(t,"No window.location.(origin|href) available to create URL");let a=typeof r=="string"?r:createPath(r);return a=a.replace(/ $/,"%20"),!e&&a.startsWith("//")&&(a=t+a),new URL(a,t)}function matchRoutes(r,e,t="/"){return matchRoutesImpl(r,e,t,!1)}function matchRoutesImpl(r,e,t,a){let o=typeof e=="string"?parsePath(e):e,l=stripBasename(o.pathname||"/",t);if(l==null)return null;let s=flattenRoutes(r);rankRouteBranches(s);let f=null;for(let m=0;f==null&&m<s.length;++m){let b=decodePath(l);f=matchRouteBranch(s[m],b,a)}return f}function flattenRoutes(r,e=[],t=[],a="",o=!1){let l=(s,f,m=o,b)=>{let E={relativePath:b===void 0?s.path||"":b,caseSensitive:s.caseSensitive===!0,childrenIndex:f,route:s};if(E.relativePath.startsWith("/")){if(!E.relativePath.startsWith(a)&&m)return;invariant(E.relativePath.startsWith(a),`Absolute route path "${E.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),E.relativePath=E.relativePath.slice(a.length)}let M=joinPaths([a,E.relativePath]),I=t.concat(E);s.children&&s.children.length>0&&(invariant(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${M}".`),flattenRoutes(s.children,e,I,M,m)),!(s.path==null&&!s.index)&&e.push({path:M,score:computeScore(M,s.index),routesMeta:I})};return r.forEach((s,f)=>{if(s.path===""||!s.path?.includes("?"))l(s,f);else for(let m of explodeOptionalSegments(s.path))l(s,f,!0,m)}),e}function explodeOptionalSegments(r){let e=r.split("/");if(e.length===0)return[];let[t,...a]=e,o=t.endsWith("?"),l=t.replace(/\?$/,"");if(a.length===0)return o?[l,""]:[l];let s=explodeOptionalSegments(a.join("/")),f=[];return f.push(...s.map(m=>m===""?l:[l,m].join("/"))),o&&f.push(...s),f.map(m=>r.startsWith("/")&&m===""?"/":m)}function rankRouteBranches(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:compareIndexes(e.routesMeta.map(a=>a.childrenIndex),t.routesMeta.map(a=>a.childrenIndex)))}var paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=r=>r==="*";function computeScore(r,e){let t=r.split("/"),a=t.length;return t.some(isSplat)&&(a+=splatPenalty),e&&(a+=indexRouteValue),t.filter(o=>!isSplat(o)).reduce((o,l)=>o+(paramRe.test(l)?dynamicSegmentValue:l===""?emptySegmentValue:staticSegmentValue),a)}function compareIndexes(r,e){return r.length===e.length&&r.slice(0,-1).every((a,o)=>a===e[o])?r[r.length-1]-e[e.length-1]:0}function matchRouteBranch(r,e,t=!1){let{routesMeta:a}=r,o={},l="/",s=[];for(let f=0;f<a.length;++f){let m=a[f],b=f===a.length-1,E=l==="/"?e:e.slice(l.length)||"/",M=matchPath({path:m.relativePath,caseSensitive:m.caseSensitive,end:b},E),I=m.route;if(!M&&b&&t&&!a[a.length-1].route.index&&(M=matchPath({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},E)),!M)return null;Object.assign(o,M.params),s.push({params:o,pathname:joinPaths([l,M.pathname]),pathnameBase:normalizePathname(joinPaths([l,M.pathnameBase])),route:I}),M.pathnameBase!=="/"&&(l=joinPaths([l,M.pathnameBase]))}return s}function matchPath(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,a]=compilePath(r.path,r.caseSensitive,r.end),o=e.match(t);if(!o)return null;let l=o[0],s=l.replace(/(.)\/+$/,"$1"),f=o.slice(1);return{params:a.reduce((b,{paramName:E,isOptional:M},I)=>{if(E==="*"){let Z=f[I]||"";s=l.slice(0,l.length-Z.length).replace(/(.)\/+$/,"$1")}const V=f[I];return M&&!V?b[E]=void 0:b[E]=(V||"").replace(/%2F/g,"/"),b},{}),pathname:l,pathnameBase:s,pattern:r}}function compilePath(r,e=!1,t=!0){warning(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let a=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,f,m)=>(a.push({paramName:f,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(a.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),a]}function decodePath(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return warning(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function stripBasename(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,a=r.charAt(t);return a&&a!=="/"?null:r.slice(t)||"/"}function resolvePath(r,e="/"){let{pathname:t,search:a="",hash:o=""}=typeof r=="string"?parsePath(r):r;return{pathname:t?t.startsWith("/")?t:resolvePathname(t,e):e,search:normalizeSearch(a),hash:normalizeHash(o)}}function resolvePathname(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function getInvalidPathError(r,e,t,a){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function getPathContributingMatches(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function getResolveToMatches(r){let e=getPathContributingMatches(r);return e.map((t,a)=>a===e.length-1?t.pathname:t.pathnameBase)}function resolveTo(r,e,t,a=!1){let o;typeof r=="string"?o=parsePath(r):(o={...r},invariant(!o.pathname||!o.pathname.includes("?"),getInvalidPathError("?","pathname","search",o)),invariant(!o.pathname||!o.pathname.includes("#"),getInvalidPathError("#","pathname","hash",o)),invariant(!o.search||!o.search.includes("#"),getInvalidPathError("#","search","hash",o)));let l=r===""||o.pathname==="",s=l?"/":o.pathname,f;if(s==null)f=t;else{let M=e.length-1;if(!a&&s.startsWith("..")){let I=s.split("/");for(;I[0]==="..";)I.shift(),M-=1;o.pathname=I.join("/")}f=M>=0?e[M]:"/"}let m=resolvePath(o,f),b=s&&s!=="/"&&s.endsWith("/"),E=(l||s===".")&&t.endsWith("/");return!m.pathname.endsWith("/")&&(b||E)&&(m.pathname+="/"),m}var joinPaths=r=>r.join("/").replace(/\/\/+/g,"/"),normalizePathname=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,normalizeHash=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function isRouteErrorResponse(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}var validMutationMethodsArr=["POST","PUT","PATCH","DELETE"];new Set(validMutationMethodsArr);var validRequestMethodsArr=["GET",...validMutationMethodsArr];new Set(validRequestMethodsArr);var DataRouterContext=reactExports.createContext(null);DataRouterContext.displayName="DataRouter";var DataRouterStateContext=reactExports.createContext(null);DataRouterStateContext.displayName="DataRouterState";reactExports.createContext(!1);var ViewTransitionContext=reactExports.createContext({isTransitioning:!1});ViewTransitionContext.displayName="ViewTransition";var FetchersContext=reactExports.createContext(new Map);FetchersContext.displayName="Fetchers";var AwaitContext=reactExports.createContext(null);AwaitContext.displayName="Await";var NavigationContext=reactExports.createContext(null);NavigationContext.displayName="Navigation";var LocationContext=reactExports.createContext(null);LocationContext.displayName="Location";var RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1});RouteContext.displayName="Route";var RouteErrorContext=reactExports.createContext(null);RouteErrorContext.displayName="RouteError";function useHref(r,{relative:e}={}){invariant(useInRouterContext(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:a}=reactExports.useContext(NavigationContext),{hash:o,pathname:l,search:s}=useResolvedPath(r,{relative:e}),f=l;return t!=="/"&&(f=l==="/"?t:joinPaths([t,l])),a.createHref({pathname:f,search:s,hash:o})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return invariant(useInRouterContext(),"useLocation() may be used only in the context of a <Router> component."),reactExports.useContext(LocationContext).location}var navigateEffectWarning="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function useIsomorphicLayoutEffect$1(r){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(r)}function useNavigate(){let{isDataRoute:r}=reactExports.useContext(RouteContext);return r?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){invariant(useInRouterContext(),"useNavigate() may be used only in the context of a <Router> component.");let r=reactExports.useContext(DataRouterContext),{basename:e,navigator:t}=reactExports.useContext(NavigationContext),{matches:a}=reactExports.useContext(RouteContext),{pathname:o}=useLocation(),l=JSON.stringify(getResolveToMatches(a)),s=reactExports.useRef(!1);return useIsomorphicLayoutEffect$1(()=>{s.current=!0}),reactExports.useCallback((m,b={})=>{if(warning(s.current,navigateEffectWarning),!s.current)return;if(typeof m=="number"){t.go(m);return}let E=resolveTo(m,JSON.parse(l),o,b.relative==="path");r==null&&e!=="/"&&(E.pathname=E.pathname==="/"?e:joinPaths([e,E.pathname])),(b.replace?t.replace:t.push)(E,b.state,b)},[e,t,l,o,r])}reactExports.createContext(null);function useResolvedPath(r,{relative:e}={}){let{matches:t}=reactExports.useContext(RouteContext),{pathname:a}=useLocation(),o=JSON.stringify(getResolveToMatches(t));return reactExports.useMemo(()=>resolveTo(r,JSON.parse(o),a,e==="path"),[r,o,a,e])}function useRoutesImpl(r,e,t,a,o){invariant(useInRouterContext(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=reactExports.useContext(NavigationContext),{matches:s}=reactExports.useContext(RouteContext),f=s[s.length-1],m=f?f.params:{},b=f?f.pathname:"/",E=f?f.pathnameBase:"/",M=f&&f.route;{let vt=M&&M.path||"";warningOnce(b,!M||vt.endsWith("*")||vt.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${b}" (under <Route path="${vt}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${vt}"> to <Route path="${vt==="/"?"*":`${vt}/*`}">.`)}let I=useLocation(),V;V=I;let Z=V.pathname||"/",ee=Z;if(E!=="/"){let vt=E.replace(/^\//,"").split("/");ee="/"+Z.replace(/^\//,"").split("/").slice(vt.length).join("/")}let le=matchRoutes(r,{pathname:ee});return warning(M||le!=null,`No routes matched location "${V.pathname}${V.search}${V.hash}" `),warning(le==null||le[le.length-1].route.element!==void 0||le[le.length-1].route.Component!==void 0||le[le.length-1].route.lazy!==void 0,`Matched leaf route at location "${V.pathname}${V.search}${V.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),_renderMatches(le&&le.map(vt=>Object.assign({},vt,{params:Object.assign({},m,vt.params),pathname:joinPaths([E,l.encodeLocation?l.encodeLocation(vt.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:vt.pathname]),pathnameBase:vt.pathnameBase==="/"?E:joinPaths([E,l.encodeLocation?l.encodeLocation(vt.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:vt.pathnameBase])})),s,t,a,o)}function DefaultErrorComponent(){let r=useRouteError(),e=isRouteErrorResponse(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,a="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:a},l={padding:"2px 4px",backgroundColor:a},s=null;return console.error("Error handled by React Router default ErrorBoundary:",r),s=reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("p",null,"💿 Hey developer 👋"),reactExports.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",reactExports.createElement("code",{style:l},"ErrorBoundary")," or"," ",reactExports.createElement("code",{style:l},"errorElement")," prop on your route.")),reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},e),t?reactExports.createElement("pre",{style:o},t):null,s)}var defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null),RenderErrorBoundary=class extends reactExports.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){this.props.unstable_onError?this.props.unstable_onError(r,e):console.error("React Router caught the following error during render",r)}render(){return this.state.error!==void 0?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function RenderedRoute({routeContext:r,match:e,children:t}){let a=reactExports.useContext(DataRouterContext);return a&&a.static&&a.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=e.route.id),reactExports.createElement(RouteContext.Provider,{value:r},t)}function _renderMatches(r,e=[],t=null,a=null,o=null){if(r==null){if(!t)return null;if(t.errors)r=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let l=r,s=t?.errors;if(s!=null){let b=l.findIndex(E=>E.route.id&&s?.[E.route.id]!==void 0);invariant(b>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),l=l.slice(0,Math.min(l.length,b+1))}let f=!1,m=-1;if(t)for(let b=0;b<l.length;b++){let E=l[b];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(m=b),E.route.id){let{loaderData:M,errors:I}=t,V=E.route.loader&&!M.hasOwnProperty(E.route.id)&&(!I||I[E.route.id]===void 0);if(E.route.lazy||V){f=!0,m>=0?l=l.slice(0,m+1):l=[l[0]];break}}}return l.reduceRight((b,E,M)=>{let I,V=!1,Z=null,ee=null;t&&(I=s&&E.route.id?s[E.route.id]:void 0,Z=E.route.errorElement||defaultErrorElement,f&&(m<0&&M===0?(warningOnce("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),V=!0,ee=null):m===M&&(V=!0,ee=E.route.hydrateFallbackElement||null)));let le=e.concat(l.slice(0,M+1)),K=()=>{let vt;return I?vt=Z:V?vt=ee:E.route.Component?vt=reactExports.createElement(E.route.Component,null):E.route.element?vt=E.route.element:vt=b,reactExports.createElement(RenderedRoute,{match:E,routeContext:{outlet:b,matches:le,isDataRoute:t!=null},children:vt})};return t&&(E.route.ErrorBoundary||E.route.errorElement||M===0)?reactExports.createElement(RenderErrorBoundary,{location:t.location,revalidation:t.revalidation,component:Z,error:I,children:K(),routeContext:{outlet:null,matches:le,isDataRoute:!0},unstable_onError:a}):K()},null)}function getDataRouterConsoleError(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext(r){let e=reactExports.useContext(DataRouterContext);return invariant(e,getDataRouterConsoleError(r)),e}function useDataRouterState(r){let e=reactExports.useContext(DataRouterStateContext);return invariant(e,getDataRouterConsoleError(r)),e}function useRouteContext(r){let e=reactExports.useContext(RouteContext);return invariant(e,getDataRouterConsoleError(r)),e}function useCurrentRouteId(r){let e=useRouteContext(r),t=e.matches[e.matches.length-1];return invariant(t.route.id,`${r} can only be used on routes that contain a unique "id"`),t.route.id}function useRouteId(){return useCurrentRouteId("useRouteId")}function useRouteError(){let r=reactExports.useContext(RouteErrorContext),e=useDataRouterState("useRouteError"),t=useCurrentRouteId("useRouteError");return r!==void 0?r:e.errors?.[t]}function useNavigateStable(){let{router:r}=useDataRouterContext("useNavigate"),e=useCurrentRouteId("useNavigate"),t=reactExports.useRef(!1);return useIsomorphicLayoutEffect$1(()=>{t.current=!0}),reactExports.useCallback(async(o,l={})=>{warning(t.current,navigateEffectWarning),t.current&&(typeof o=="number"?r.navigate(o):await r.navigate(o,{fromRouteId:e,...l}))},[r,e])}var alreadyWarned={};function warningOnce(r,e,t){!e&&!alreadyWarned[r]&&(alreadyWarned[r]=!0,warning(!1,t))}reactExports.memo(DataRoutes);function DataRoutes({routes:r,future:e,state:t,unstable_onError:a}){return useRoutesImpl(r,void 0,t,a,e)}function Router({basename:r="/",children:e=null,location:t,navigationType:a="POP",navigator:o,static:l=!1}){invariant(!useInRouterContext(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let s=r.replace(/^\/*/,"/"),f=reactExports.useMemo(()=>({basename:s,navigator:o,static:l,future:{}}),[s,o,l]);typeof t=="string"&&(t=parsePath(t));let{pathname:m="/",search:b="",hash:E="",state:M=null,key:I="default"}=t,V=reactExports.useMemo(()=>{let Z=stripBasename(m,s);return Z==null?null:{location:{pathname:Z,search:b,hash:E,state:M,key:I},navigationType:a}},[s,m,b,E,M,I,a]);return warning(V!=null,`<Router basename="${s}"> is not able to match the URL "${m}${b}${E}" because it does not start with the basename, so the <Router> won't render anything.`),V==null?null:reactExports.createElement(NavigationContext.Provider,{value:f},reactExports.createElement(LocationContext.Provider,{children:e,value:V}))}var defaultMethod="get",defaultEncType="application/x-www-form-urlencoded";function isHtmlElement(r){return r!=null&&typeof r.tagName=="string"}function isButtonElement(r){return isHtmlElement(r)&&r.tagName.toLowerCase()==="button"}function isFormElement(r){return isHtmlElement(r)&&r.tagName.toLowerCase()==="form"}function isInputElement(r){return isHtmlElement(r)&&r.tagName.toLowerCase()==="input"}function isModifiedEvent(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function shouldProcessLinkClick(r,e){return r.button===0&&(!e||e==="_self")&&!isModifiedEvent(r)}function createSearchParams(r=""){return new URLSearchParams(typeof r=="string"||Array.isArray(r)||r instanceof URLSearchParams?r:Object.keys(r).reduce((e,t)=>{let a=r[t];return e.concat(Array.isArray(a)?a.map(o=>[t,o]):[[t,a]])},[]))}function getSearchParamsForLocation(r,e){let t=createSearchParams(r);return e&&e.forEach((a,o)=>{t.has(o)||e.getAll(o).forEach(l=>{t.append(o,l)})}),t}var _formDataSupportsSubmitter=null;function isFormDataSubmitterSupported(){if(_formDataSupportsSubmitter===null)try{new FormData(document.createElement("form"),0),_formDataSupportsSubmitter=!1}catch{_formDataSupportsSubmitter=!0}return _formDataSupportsSubmitter}var supportedFormEncTypes=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function getFormEncType(r){return r!=null&&!supportedFormEncTypes.has(r)?(warning(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${defaultEncType}"`),null):r}function getFormSubmissionInfo(r,e){let t,a,o,l,s;if(isFormElement(r)){let f=r.getAttribute("action");a=f?stripBasename(f,e):null,t=r.getAttribute("method")||defaultMethod,o=getFormEncType(r.getAttribute("enctype"))||defaultEncType,l=new FormData(r)}else if(isButtonElement(r)||isInputElement(r)&&(r.type==="submit"||r.type==="image")){let f=r.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=r.getAttribute("formaction")||f.getAttribute("action");if(a=m?stripBasename(m,e):null,t=r.getAttribute("formmethod")||f.getAttribute("method")||defaultMethod,o=getFormEncType(r.getAttribute("formenctype"))||getFormEncType(f.getAttribute("enctype"))||defaultEncType,l=new FormData(f,r),!isFormDataSubmitterSupported()){let{name:b,type:E,value:M}=r;if(E==="image"){let I=b?`${b}.`:"";l.append(`${I}x`,"0"),l.append(`${I}y`,"0")}else b&&l.append(b,M)}}else{if(isHtmlElement(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=defaultMethod,a=null,o=defaultEncType,s=r}return l&&o==="text/plain"&&(s=l,l=void 0),{action:a,method:t.toLowerCase(),encType:o,formData:l,body:s}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function invariant2(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function singleFetchUrl(r,e,t){let a=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return a.pathname==="/"?a.pathname=`_root.${t}`:e&&stripBasename(a.pathname,e)==="/"?a.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:a.pathname=`${a.pathname.replace(/\/$/,"")}.${t}`,a}async function loadRouteModule(r,e){if(r.id in e)return e[r.id];try{let t=await import(r.module);return e[r.id]=t,t}catch(t){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function isHtmlLinkDescriptor(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function getKeyedPrefetchLinks(r,e,t){let a=await Promise.all(r.map(async o=>{let l=e.routes[o.route.id];if(l){let s=await loadRouteModule(l,t);return s.links?s.links():[]}return[]}));return dedupeLinkDescriptors(a.flat(1).filter(isHtmlLinkDescriptor).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function getNewMatchesForLinks(r,e,t,a,o,l){let s=(m,b)=>t[b]?m.route.id!==t[b].route.id:!0,f=(m,b)=>t[b].pathname!==m.pathname||t[b].route.path?.endsWith("*")&&t[b].params["*"]!==m.params["*"];return l==="assets"?e.filter((m,b)=>s(m,b)||f(m,b)):l==="data"?e.filter((m,b)=>{let E=a.routes[m.route.id];if(!E||!E.hasLoader)return!1;if(s(m,b)||f(m,b))return!0;if(m.route.shouldRevalidate){let M=m.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(r,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof M=="boolean")return M}return!0}):[]}function getModuleLinkHrefs(r,e,{includeHydrateFallback:t}={}){return dedupeHrefs(r.map(a=>{let o=e.routes[a.route.id];if(!o)return[];let l=[o.module];return o.clientActionModule&&(l=l.concat(o.clientActionModule)),o.clientLoaderModule&&(l=l.concat(o.clientLoaderModule)),t&&o.hydrateFallbackModule&&(l=l.concat(o.hydrateFallbackModule)),o.imports&&(l=l.concat(o.imports)),l}).flat(1))}function dedupeHrefs(r){return[...new Set(r)]}function sortKeys(r){let e={},t=Object.keys(r).sort();for(let a of t)e[a]=r[a];return e}function dedupeLinkDescriptors(r,e){let t=new Set;return new Set(e),r.reduce((a,o)=>{let l=JSON.stringify(sortKeys(o));return t.has(l)||(t.add(l),a.push({key:l,link:o})),a},[])}function useDataRouterContext2(){let r=reactExports.useContext(DataRouterContext);return invariant2(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function useDataRouterStateContext(){let r=reactExports.useContext(DataRouterStateContext);return invariant2(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var FrameworkContext=reactExports.createContext(void 0);FrameworkContext.displayName="FrameworkContext";function useFrameworkContext(){let r=reactExports.useContext(FrameworkContext);return invariant2(r,"You must render this element inside a <HydratedRouter> element"),r}function usePrefetchBehavior(r,e){let t=reactExports.useContext(FrameworkContext),[a,o]=reactExports.useState(!1),[l,s]=reactExports.useState(!1),{onFocus:f,onBlur:m,onMouseEnter:b,onMouseLeave:E,onTouchStart:M}=e,I=reactExports.useRef(null);reactExports.useEffect(()=>{if(r==="render"&&s(!0),r==="viewport"){let ee=K=>{K.forEach(vt=>{s(vt.isIntersecting)})},le=new IntersectionObserver(ee,{threshold:.5});return I.current&&le.observe(I.current),()=>{le.disconnect()}}},[r]),reactExports.useEffect(()=>{if(a){let ee=setTimeout(()=>{s(!0)},100);return()=>{clearTimeout(ee)}}},[a]);let V=()=>{o(!0)},Z=()=>{o(!1),s(!1)};return t?r!=="intent"?[l,I,{}]:[l,I,{onFocus:composeEventHandlers(f,V),onBlur:composeEventHandlers(m,Z),onMouseEnter:composeEventHandlers(b,V),onMouseLeave:composeEventHandlers(E,Z),onTouchStart:composeEventHandlers(M,V)}]:[!1,I,{}]}function composeEventHandlers(r,e){return t=>{r&&r(t),t.defaultPrevented||e(t)}}function PrefetchPageLinks({page:r,...e}){let{router:t}=useDataRouterContext2(),a=reactExports.useMemo(()=>matchRoutes(t.routes,r,t.basename),[t.routes,r,t.basename]);return a?reactExports.createElement(PrefetchPageLinksImpl,{page:r,matches:a,...e}):null}function useKeyedPrefetchLinks(r){let{manifest:e,routeModules:t}=useFrameworkContext(),[a,o]=reactExports.useState([]);return reactExports.useEffect(()=>{let l=!1;return getKeyedPrefetchLinks(r,e,t).then(s=>{l||o(s)}),()=>{l=!0}},[r,e,t]),a}function PrefetchPageLinksImpl({page:r,matches:e,...t}){let a=useLocation(),{manifest:o,routeModules:l}=useFrameworkContext(),{basename:s}=useDataRouterContext2(),{loaderData:f,matches:m}=useDataRouterStateContext(),b=reactExports.useMemo(()=>getNewMatchesForLinks(r,e,m,o,a,"data"),[r,e,m,o,a]),E=reactExports.useMemo(()=>getNewMatchesForLinks(r,e,m,o,a,"assets"),[r,e,m,o,a]),M=reactExports.useMemo(()=>{if(r===a.pathname+a.search+a.hash)return[];let Z=new Set,ee=!1;if(e.forEach(K=>{let vt=o.routes[K.route.id];!vt||!vt.hasLoader||(!b.some(q=>q.route.id===K.route.id)&&K.route.id in f&&l[K.route.id]?.shouldRevalidate||vt.hasClientLoader?ee=!0:Z.add(K.route.id))}),Z.size===0)return[];let le=singleFetchUrl(r,s,"data");return ee&&Z.size>0&&le.searchParams.set("_routes",e.filter(K=>Z.has(K.route.id)).map(K=>K.route.id).join(",")),[le.pathname+le.search]},[s,f,a,o,b,e,r,l]),I=reactExports.useMemo(()=>getModuleLinkHrefs(E,o),[E,o]),V=useKeyedPrefetchLinks(E);return reactExports.createElement(reactExports.Fragment,null,M.map(Z=>reactExports.createElement("link",{key:Z,rel:"prefetch",as:"fetch",href:Z,...t})),I.map(Z=>reactExports.createElement("link",{key:Z,rel:"modulepreload",href:Z,...t})),V.map(({key:Z,link:ee})=>reactExports.createElement("link",{key:Z,nonce:t.nonce,...ee})))}function mergeRefs(...r){return e=>{r.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var isBrowser=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{isBrowser&&(window.__reactRouterVersion="7.9.4")}catch{}function HashRouter({basename:r,children:e,window:t}){let a=reactExports.useRef();a.current==null&&(a.current=createHashHistory({window:t,v5Compat:!0}));let o=a.current,[l,s]=reactExports.useState({action:o.action,location:o.location}),f=reactExports.useCallback(m=>{reactExports.startTransition(()=>s(m))},[s]);return reactExports.useLayoutEffect(()=>o.listen(f),[o,f]),reactExports.createElement(Router,{basename:r,children:e,location:l.location,navigationType:l.action,navigator:o})}var ABSOLUTE_URL_REGEX2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link=reactExports.forwardRef(function({onClick:e,discover:t="render",prefetch:a="none",relative:o,reloadDocument:l,replace:s,state:f,target:m,to:b,preventScrollReset:E,viewTransition:M,...I},V){let{basename:Z}=reactExports.useContext(NavigationContext),ee=typeof b=="string"&&ABSOLUTE_URL_REGEX2.test(b),le,K=!1;if(typeof b=="string"&&ee&&(le=b,isBrowser))try{let zt=new URL(window.location.href),Zt=b.startsWith("//")?new URL(zt.protocol+b):new URL(b),Mn=stripBasename(Zt.pathname,Z);Zt.origin===zt.origin&&Mn!=null?b=Mn+Zt.search+Zt.hash:K=!0}catch{warning(!1,`<Link to="${b}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let vt=useHref(b,{relative:o}),[q,Q,wt]=usePrefetchBehavior(a,I),bt=useLinkClickHandler(b,{replace:s,state:f,target:m,preventScrollReset:E,relative:o,viewTransition:M});function Ut(zt){e&&e(zt),zt.defaultPrevented||bt(zt)}let it=reactExports.createElement("a",{...I,...wt,href:le||vt,onClick:K||l?e:Ut,ref:mergeRefs(V,Q),target:m,"data-discover":!ee&&t==="render"?"true":void 0});return q&&!ee?reactExports.createElement(reactExports.Fragment,null,it,reactExports.createElement(PrefetchPageLinks,{page:vt})):it});Link.displayName="Link";var NavLink=reactExports.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:a="",end:o=!1,style:l,to:s,viewTransition:f,children:m,...b},E){let M=useResolvedPath(s,{relative:b.relative}),I=useLocation(),V=reactExports.useContext(DataRouterStateContext),{navigator:Z,basename:ee}=reactExports.useContext(NavigationContext),le=V!=null&&useViewTransitionState(M)&&f===!0,K=Z.encodeLocation?Z.encodeLocation(M).pathname:M.pathname,vt=I.pathname,q=V&&V.navigation&&V.navigation.location?V.navigation.location.pathname:null;t||(vt=vt.toLowerCase(),q=q?q.toLowerCase():null,K=K.toLowerCase()),q&&ee&&(q=stripBasename(q,ee)||q);const Q=K!=="/"&&K.endsWith("/")?K.length-1:K.length;let wt=vt===K||!o&&vt.startsWith(K)&&vt.charAt(Q)==="/",bt=q!=null&&(q===K||!o&&q.startsWith(K)&&q.charAt(K.length)==="/"),Ut={isActive:wt,isPending:bt,isTransitioning:le},it=wt?e:void 0,zt;typeof a=="function"?zt=a(Ut):zt=[a,wt?"active":null,bt?"pending":null,le?"transitioning":null].filter(Boolean).join(" ");let Zt=typeof l=="function"?l(Ut):l;return reactExports.createElement(Link,{...b,"aria-current":it,className:zt,ref:E,style:Zt,to:s,viewTransition:f},typeof m=="function"?m(Ut):m)});NavLink.displayName="NavLink";var Form=reactExports.forwardRef(({discover:r="render",fetcherKey:e,navigate:t,reloadDocument:a,replace:o,state:l,method:s=defaultMethod,action:f,onSubmit:m,relative:b,preventScrollReset:E,viewTransition:M,...I},V)=>{let Z=useSubmit(),ee=useFormAction(f,{relative:b}),le=s.toLowerCase()==="get"?"get":"post",K=typeof f=="string"&&ABSOLUTE_URL_REGEX2.test(f),vt=q=>{if(m&&m(q),q.defaultPrevented)return;q.preventDefault();let Q=q.nativeEvent.submitter,wt=Q?.getAttribute("formmethod")||s;Z(Q||q.currentTarget,{fetcherKey:e,method:wt,navigate:t,replace:o,state:l,relative:b,preventScrollReset:E,viewTransition:M})};return reactExports.createElement("form",{ref:V,method:le,action:ee,onSubmit:a?m:vt,...I,"data-discover":!K&&r==="render"?"true":void 0})});Form.displayName="Form";function getDataRouterConsoleError2(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext3(r){let e=reactExports.useContext(DataRouterContext);return invariant(e,getDataRouterConsoleError2(r)),e}function useLinkClickHandler(r,{target:e,replace:t,state:a,preventScrollReset:o,relative:l,viewTransition:s}={}){let f=useNavigate(),m=useLocation(),b=useResolvedPath(r,{relative:l});return reactExports.useCallback(E=>{if(shouldProcessLinkClick(E,e)){E.preventDefault();let M=t!==void 0?t:createPath(m)===createPath(b);f(r,{replace:M,state:a,preventScrollReset:o,relative:l,viewTransition:s})}},[m,f,b,t,a,e,r,o,l,s])}function useSearchParams(r){warning(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=reactExports.useRef(createSearchParams(r)),t=reactExports.useRef(!1),a=useLocation(),o=reactExports.useMemo(()=>getSearchParamsForLocation(a.search,t.current?null:e.current),[a.search]),l=useNavigate(),s=reactExports.useCallback((f,m)=>{const b=createSearchParams(typeof f=="function"?f(new URLSearchParams(o)):f);t.current=!0,l("?"+b,m)},[l,o]);return[o,s]}var fetcherId=0,getUniqueFetcherId=()=>`__${String(++fetcherId)}__`;function useSubmit(){let{router:r}=useDataRouterContext3("useSubmit"),{basename:e}=reactExports.useContext(NavigationContext),t=useRouteId();return reactExports.useCallback(async(a,o={})=>{let{action:l,method:s,encType:f,formData:m,body:b}=getFormSubmissionInfo(a,e);if(o.navigate===!1){let E=o.fetcherKey||getUniqueFetcherId();await r.fetch(E,t,o.action||l,{preventScrollReset:o.preventScrollReset,formData:m,body:b,formMethod:o.method||s,formEncType:o.encType||f,flushSync:o.flushSync})}else await r.navigate(o.action||l,{preventScrollReset:o.preventScrollReset,formData:m,body:b,formMethod:o.method||s,formEncType:o.encType||f,replace:o.replace,state:o.state,fromRouteId:t,flushSync:o.flushSync,viewTransition:o.viewTransition})},[r,e,t])}function useFormAction(r,{relative:e}={}){let{basename:t}=reactExports.useContext(NavigationContext),a=reactExports.useContext(RouteContext);invariant(a,"useFormAction must be used inside a RouteContext");let[o]=a.matches.slice(-1),l={...useResolvedPath(r||".",{relative:e})},s=useLocation();if(r==null){l.search=s.search;let f=new URLSearchParams(l.search),m=f.getAll("index");if(m.some(E=>E==="")){f.delete("index"),m.filter(M=>M).forEach(M=>f.append("index",M));let E=f.toString();l.search=E?`?${E}`:""}}return(!r||r===".")&&o.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:joinPaths([t,l.pathname])),createPath(l)}function useViewTransitionState(r,{relative:e}={}){let t=reactExports.useContext(ViewTransitionContext);invariant(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=useDataRouterContext3("useViewTransitionState"),o=useResolvedPath(r,{relative:e});if(!t.isTransitioning)return!1;let l=stripBasename(t.currentLocation.pathname,a)||t.currentLocation.pathname,s=stripBasename(t.nextLocation.pathname,a)||t.nextLocation.pathname;return matchPath(o.pathname,s)!=null||matchPath(o.pathname,l)!=null}var reactDomExports=requireReactDom();const PanelGroupContext=reactExports.createContext(null);PanelGroupContext.displayName="PanelGroupContext";const DATA_ATTRIBUTES={group:"data-panel-group",groupDirection:"data-panel-group-direction",groupId:"data-panel-group-id",panel:"data-panel",panelCollapsible:"data-panel-collapsible",panelId:"data-panel-id",panelSize:"data-panel-size",resizeHandle:"data-resize-handle",resizeHandleActive:"data-resize-handle-active",resizeHandleEnabled:"data-panel-resize-handle-enabled",resizeHandleId:"data-panel-resize-handle-id",resizeHandleState:"data-resize-handle-state"},PRECISION=10,useIsomorphicLayoutEffect=reactExports.useLayoutEffect,useId=React$1.useId,wrappedUseId=typeof useId=="function"?useId:()=>null;let counter=0;function useUniqueId(r=null){const e=wrappedUseId(),t=reactExports.useRef(r||e||null);return t.current===null&&(t.current=""+counter++),r??t.current}function PanelWithForwardedRef({children:r,className:e="",collapsedSize:t,collapsible:a,defaultSize:o,forwardedRef:l,id:s,maxSize:f,minSize:m,onCollapse:b,onExpand:E,onResize:M,order:I,style:V,tagName:Z="div",...ee}){const le=reactExports.useContext(PanelGroupContext);if(le===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:K,expandPanel:vt,getPanelSize:q,getPanelStyle:Q,groupId:wt,isPanelCollapsed:bt,reevaluatePanelConstraints:Ut,registerPanel:it,resizePanel:zt,unregisterPanel:Zt}=le,Mn=useUniqueId(s),kp=reactExports.useRef({callbacks:{onCollapse:b,onExpand:E,onResize:M},constraints:{collapsedSize:t,collapsible:a,defaultSize:o,maxSize:f,minSize:m},id:Mn,idIsFromProps:s!==void 0,order:I});reactExports.useRef({didLogMissingDefaultSizeWarning:!1}),useIsomorphicLayoutEffect(()=>{const{callbacks:sa,constraints:qo}=kp.current,ae={...qo};kp.current.id=Mn,kp.current.idIsFromProps=s!==void 0,kp.current.order=I,sa.onCollapse=b,sa.onExpand=E,sa.onResize=M,qo.collapsedSize=t,qo.collapsible=a,qo.defaultSize=o,qo.maxSize=f,qo.minSize=m,(ae.collapsedSize!==qo.collapsedSize||ae.collapsible!==qo.collapsible||ae.maxSize!==qo.maxSize||ae.minSize!==qo.minSize)&&Ut(kp.current,ae)}),useIsomorphicLayoutEffect(()=>{const sa=kp.current;return it(sa),()=>{Zt(sa)}},[I,Mn,it,Zt]),reactExports.useImperativeHandle(l,()=>({collapse:()=>{K(kp.current)},expand:sa=>{vt(kp.current,sa)},getId(){return Mn},getSize(){return q(kp.current)},isCollapsed(){return bt(kp.current)},isExpanded(){return!bt(kp.current)},resize:sa=>{zt(kp.current,sa)}}),[K,vt,q,bt,Mn,zt]);const zp=Q(kp.current,o);return reactExports.createElement(Z,{...ee,children:r,className:e,id:Mn,style:{...zp,...V},[DATA_ATTRIBUTES.groupId]:wt,[DATA_ATTRIBUTES.panel]:"",[DATA_ATTRIBUTES.panelCollapsible]:a||void 0,[DATA_ATTRIBUTES.panelId]:Mn,[DATA_ATTRIBUTES.panelSize]:parseFloat(""+zp.flexGrow).toFixed(1)})}const Panel$1=reactExports.forwardRef((r,e)=>reactExports.createElement(PanelWithForwardedRef,{...r,forwardedRef:e}));PanelWithForwardedRef.displayName="Panel";Panel$1.displayName="forwardRef(Panel)";let currentCursorStyle=null,prevRuleIndex=-1,styleElement=null;function getCursorStyle(r,e,t){const a=(e&EXCEEDED_HORIZONTAL_MIN)!==0,o=(e&EXCEEDED_HORIZONTAL_MAX)!==0,l=(e&EXCEEDED_VERTICAL_MIN)!==0,s=(e&EXCEEDED_VERTICAL_MAX)!==0;if(e){if(a)return l?"se-resize":s?"ne-resize":"e-resize";if(o)return l?"sw-resize":s?"nw-resize":"w-resize";if(l)return"s-resize";if(s)return"n-resize"}switch(r){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}function resetGlobalCursorStyle(){styleElement!==null&&(document.head.removeChild(styleElement),currentCursorStyle=null,styleElement=null,prevRuleIndex=-1)}function setGlobalCursorStyle(r,e,t){var a,o;const l=getCursorStyle(r,e);if(currentCursorStyle!==l){if(currentCursorStyle=l,styleElement===null&&(styleElement=document.createElement("style"),document.head.appendChild(styleElement)),prevRuleIndex>=0){var s;(s=styleElement.sheet)===null||s===void 0||s.removeRule(prevRuleIndex)}prevRuleIndex=(a=(o=styleElement.sheet)===null||o===void 0?void 0:o.insertRule(`*{cursor: ${l} !important;}`))!==null&&a!==void 0?a:-1}}function isKeyDown(r){return r.type==="keydown"}function isPointerEvent(r){return r.type.startsWith("pointer")}function isMouseEvent$1(r){return r.type.startsWith("mouse")}function getResizeEventCoordinates(r){if(isPointerEvent(r)){if(r.isPrimary)return{x:r.clientX,y:r.clientY}}else if(isMouseEvent$1(r))return{x:r.clientX,y:r.clientY};return{x:1/0,y:1/0}}function getInputType(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}function intersects(r,e,t){return r.x<e.x+e.width&&r.x+r.width>e.x&&r.y<e.y+e.height&&r.y+r.height>e.y}function compare(r,e){if(r===e)throw new Error("Cannot compare node with itself");const t={a:get_ancestors(r),b:get_ancestors(e)};let a;for(;t.a.at(-1)===t.b.at(-1);)r=t.a.pop(),e=t.b.pop(),a=r;assert(a,"Stacking order can only be calculated for elements with a common ancestor");const o={a:get_z_index(find_stacking_context(t.a)),b:get_z_index(find_stacking_context(t.b))};if(o.a===o.b){const l=a.childNodes,s={a:t.a.at(-1),b:t.b.at(-1)};let f=l.length;for(;f--;){const m=l[f];if(m===s.a)return 1;if(m===s.b)return-1}}return Math.sign(o.a-o.b)}const props=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function is_flex_item(r){var e;const t=getComputedStyle((e=get_parent(r))!==null&&e!==void 0?e:r).display;return t==="flex"||t==="inline-flex"}function creates_stacking_context(r){const e=getComputedStyle(r);return!!(e.position==="fixed"||e.zIndex!=="auto"&&(e.position!=="static"||is_flex_item(r))||+e.opacity<1||"transform"in e&&e.transform!=="none"||"webkitTransform"in e&&e.webkitTransform!=="none"||"mixBlendMode"in e&&e.mixBlendMode!=="normal"||"filter"in e&&e.filter!=="none"||"webkitFilter"in e&&e.webkitFilter!=="none"||"isolation"in e&&e.isolation==="isolate"||props.test(e.willChange)||e.webkitOverflowScrolling==="touch")}function find_stacking_context(r){let e=r.length;for(;e--;){const t=r[e];if(assert(t,"Missing node"),creates_stacking_context(t))return t}return null}function get_z_index(r){return r&&Number(getComputedStyle(r).zIndex)||0}function get_ancestors(r){const e=[];for(;r;)e.push(r),r=get_parent(r);return e}function get_parent(r){const{parentNode:e}=r;return e&&e instanceof ShadowRoot?e.host:e}const EXCEEDED_HORIZONTAL_MIN=1,EXCEEDED_HORIZONTAL_MAX=2,EXCEEDED_VERTICAL_MIN=4,EXCEEDED_VERTICAL_MAX=8,isCoarsePointer=getInputType()==="coarse";let intersectingHandles=[],isPointerDown=!1,ownerDocumentCounts=new Map,panelConstraintFlags=new Map;const registeredResizeHandlers=new Set;function registerResizeHandle(r,e,t,a,o){var l;const{ownerDocument:s}=e,f={direction:t,element:e,hitAreaMargins:a,setResizeHandlerState:o},m=(l=ownerDocumentCounts.get(s))!==null&&l!==void 0?l:0;return ownerDocumentCounts.set(s,m+1),registeredResizeHandlers.add(f),updateListeners(),function(){var E;panelConstraintFlags.delete(r),registeredResizeHandlers.delete(f);const M=(E=ownerDocumentCounts.get(s))!==null&&E!==void 0?E:1;if(ownerDocumentCounts.set(s,M-1),updateListeners(),M===1&&ownerDocumentCounts.delete(s),intersectingHandles.includes(f)){const I=intersectingHandles.indexOf(f);I>=0&&intersectingHandles.splice(I,1),updateCursor(),o("up",!0,null)}}}function handlePointerDown$1(r){const{target:e}=r,{x:t,y:a}=getResizeEventCoordinates(r);isPointerDown=!0,recalculateIntersectingHandles({target:e,x:t,y:a}),updateListeners(),intersectingHandles.length>0&&(updateResizeHandlerStates("down",r),updateCursor(),r.preventDefault(),isWithinResizeHandle(e)||r.stopImmediatePropagation())}function handlePointerMove(r){const{x:e,y:t}=getResizeEventCoordinates(r);if(isPointerDown&&r.type!=="pointerleave"&&r.buttons===0&&(isPointerDown=!1,updateResizeHandlerStates("up",r)),!isPointerDown){const{target:a}=r;recalculateIntersectingHandles({target:a,x:e,y:t})}updateResizeHandlerStates("move",r),updateCursor(),intersectingHandles.length>0&&r.preventDefault()}function handlePointerUp(r){const{target:e}=r,{x:t,y:a}=getResizeEventCoordinates(r);panelConstraintFlags.clear(),isPointerDown=!1,intersectingHandles.length>0&&(r.preventDefault(),isWithinResizeHandle(e)||r.stopImmediatePropagation()),updateResizeHandlerStates("up",r),recalculateIntersectingHandles({target:e,x:t,y:a}),updateCursor(),updateListeners()}function isWithinResizeHandle(r){let e=r;for(;e;){if(e.hasAttribute(DATA_ATTRIBUTES.resizeHandle))return!0;e=e.parentElement}return!1}function recalculateIntersectingHandles({target:r,x:e,y:t}){intersectingHandles.splice(0);let a=null;(r instanceof HTMLElement||r instanceof SVGElement)&&(a=r),registeredResizeHandlers.forEach(o=>{const{element:l,hitAreaMargins:s}=o,f=l.getBoundingClientRect(),{bottom:m,left:b,right:E,top:M}=f,I=isCoarsePointer?s.coarse:s.fine;if(e>=b-I&&e<=E+I&&t>=M-I&&t<=m+I){if(a!==null&&document.contains(a)&&l!==a&&!l.contains(a)&&!a.contains(l)&&compare(a,l)>0){let Z=a,ee=!1;for(;Z&&!Z.contains(l);){if(intersects(Z.getBoundingClientRect(),f)){ee=!0;break}Z=Z.parentElement}if(ee)return}intersectingHandles.push(o)}})}function reportConstraintsViolation(r,e){panelConstraintFlags.set(r,e)}function updateCursor(){let r=!1,e=!1;intersectingHandles.forEach(a=>{const{direction:o}=a;o==="horizontal"?r=!0:e=!0});let t=0;panelConstraintFlags.forEach(a=>{t|=a}),r&&e?setGlobalCursorStyle("intersection",t):r?setGlobalCursorStyle("horizontal",t):e?setGlobalCursorStyle("vertical",t):resetGlobalCursorStyle()}let listenersAbortController;function updateListeners(){var r;(r=listenersAbortController)===null||r===void 0||r.abort(),listenersAbortController=new AbortController;const e={capture:!0,signal:listenersAbortController.signal};registeredResizeHandlers.size&&(isPointerDown?(intersectingHandles.length>0&&ownerDocumentCounts.forEach((t,a)=>{const{body:o}=a;t>0&&(o.addEventListener("contextmenu",handlePointerUp,e),o.addEventListener("pointerleave",handlePointerMove,e),o.addEventListener("pointermove",handlePointerMove,e))}),ownerDocumentCounts.forEach((t,a)=>{const{body:o}=a;o.addEventListener("pointerup",handlePointerUp,e),o.addEventListener("pointercancel",handlePointerUp,e)})):ownerDocumentCounts.forEach((t,a)=>{const{body:o}=a;t>0&&(o.addEventListener("pointerdown",handlePointerDown$1,e),o.addEventListener("pointermove",handlePointerMove,e))}))}function updateResizeHandlerStates(r,e){registeredResizeHandlers.forEach(t=>{const{setResizeHandlerState:a}=t,o=intersectingHandles.includes(t);a(r,o,e)})}function useForceUpdate(){const[r,e]=reactExports.useState(0);return reactExports.useCallback(()=>e(t=>t+1),[])}function assert(r,e){if(!r)throw console.error(e),Error(e)}function fuzzyCompareNumbers(r,e,t=PRECISION){return r.toFixed(t)===e.toFixed(t)?0:r>e?1:-1}function fuzzyNumbersEqual$1(r,e,t=PRECISION){return fuzzyCompareNumbers(r,e,t)===0}function fuzzyNumbersEqual(r,e,t){return fuzzyCompareNumbers(r,e,t)===0}function fuzzyLayoutsEqual(r,e,t){if(r.length!==e.length)return!1;for(let a=0;a<r.length;a++){const o=r[a],l=e[a];if(!fuzzyNumbersEqual(o,l,t))return!1}return!0}function resizePanel({panelConstraints:r,panelIndex:e,size:t}){const a=r[e];assert(a!=null,`Panel constraints not found for index ${e}`);let{collapsedSize:o=0,collapsible:l,maxSize:s=100,minSize:f=0}=a;if(fuzzyCompareNumbers(t,f)<0)if(l){const m=(o+f)/2;fuzzyCompareNumbers(t,m)<0?t=o:t=f}else t=f;return t=Math.min(s,t),t=parseFloat(t.toFixed(PRECISION)),t}function adjustLayoutByDelta({delta:r,initialLayout:e,panelConstraints:t,pivotIndices:a,prevLayout:o,trigger:l}){if(fuzzyNumbersEqual(r,0))return e;const s=[...e],[f,m]=a;assert(f!=null,"Invalid first pivot index"),assert(m!=null,"Invalid second pivot index");let b=0;if(l==="keyboard"){{const M=r<0?m:f,I=t[M];assert(I,`Panel constraints not found for index ${M}`);const{collapsedSize:V=0,collapsible:Z,minSize:ee=0}=I;if(Z){const le=e[M];if(assert(le!=null,`Previous layout not found for panel index ${M}`),fuzzyNumbersEqual(le,V)){const K=ee-le;fuzzyCompareNumbers(K,Math.abs(r))>0&&(r=r<0?0-K:K)}}}{const M=r<0?f:m,I=t[M];assert(I,`No panel constraints found for index ${M}`);const{collapsedSize:V=0,collapsible:Z,minSize:ee=0}=I;if(Z){const le=e[M];if(assert(le!=null,`Previous layout not found for panel index ${M}`),fuzzyNumbersEqual(le,ee)){const K=le-V;fuzzyCompareNumbers(K,Math.abs(r))>0&&(r=r<0?0-K:K)}}}}{const M=r<0?1:-1;let I=r<0?m:f,V=0;for(;;){const ee=e[I];assert(ee!=null,`Previous layout not found for panel index ${I}`);const K=resizePanel({panelConstraints:t,panelIndex:I,size:100})-ee;if(V+=K,I+=M,I<0||I>=t.length)break}const Z=Math.min(Math.abs(r),Math.abs(V));r=r<0?0-Z:Z}{let I=r<0?f:m;for(;I>=0&&I<t.length;){const V=Math.abs(r)-Math.abs(b),Z=e[I];assert(Z!=null,`Previous layout not found for panel index ${I}`);const ee=Z-V,le=resizePanel({panelConstraints:t,panelIndex:I,size:ee});if(!fuzzyNumbersEqual(Z,le)&&(b+=Z-le,s[I]=le,b.toFixed(3).localeCompare(Math.abs(r).toFixed(3),void 0,{numeric:!0})>=0))break;r<0?I--:I++}}if(fuzzyLayoutsEqual(o,s))return o;{const M=r<0?m:f,I=e[M];assert(I!=null,`Previous layout not found for panel index ${M}`);const V=I+b,Z=resizePanel({panelConstraints:t,panelIndex:M,size:V});if(s[M]=Z,!fuzzyNumbersEqual(Z,V)){let ee=V-Z,K=r<0?m:f;for(;K>=0&&K<t.length;){const vt=s[K];assert(vt!=null,`Previous layout not found for panel index ${K}`);const q=vt+ee,Q=resizePanel({panelConstraints:t,panelIndex:K,size:q});if(fuzzyNumbersEqual(vt,Q)||(ee-=Q-vt,s[K]=Q),fuzzyNumbersEqual(ee,0))break;r>0?K--:K++}}}const E=s.reduce((M,I)=>I+M,0);return fuzzyNumbersEqual(E,100)?s:o}function calculateAriaValues({layout:r,panelsArray:e,pivotIndices:t}){let a=0,o=100,l=0,s=0;const f=t[0];assert(f!=null,"No pivot index found"),e.forEach((M,I)=>{const{constraints:V}=M,{maxSize:Z=100,minSize:ee=0}=V;I===f?(a=ee,o=Z):(l+=ee,s+=Z)});const m=Math.min(o,100-l),b=Math.max(a,100-s),E=r[f];return{valueMax:m,valueMin:b,valueNow:E}}function getResizeHandleElementsForGroup(r,e=document){return Array.from(e.querySelectorAll(`[${DATA_ATTRIBUTES.resizeHandleId}][data-panel-group-id="${r}"]`))}function getResizeHandleElementIndex(r,e,t=document){const o=getResizeHandleElementsForGroup(r,t).findIndex(l=>l.getAttribute(DATA_ATTRIBUTES.resizeHandleId)===e);return o??null}function determinePivotIndices(r,e,t){const a=getResizeHandleElementIndex(r,e,t);return a!=null?[a,a+1]:[-1,-1]}function isHTMLElement(r){return r instanceof HTMLElement?!0:typeof r=="object"&&r!==null&&"tagName"in r&&"getAttribute"in r}function getPanelGroupElement(r,e=document){if(isHTMLElement(e)&&e.dataset.panelGroupId==r)return e;const t=e.querySelector(`[data-panel-group][data-panel-group-id="${r}"]`);return t||null}function getResizeHandleElement(r,e=document){const t=e.querySelector(`[${DATA_ATTRIBUTES.resizeHandleId}="${r}"]`);return t||null}function getResizeHandlePanelIds(r,e,t,a=document){var o,l,s,f;const m=getResizeHandleElement(e,a),b=getResizeHandleElementsForGroup(r,a),E=m?b.indexOf(m):-1,M=(o=(l=t[E])===null||l===void 0?void 0:l.id)!==null&&o!==void 0?o:null,I=(s=(f=t[E+1])===null||f===void 0?void 0:f.id)!==null&&s!==void 0?s:null;return[M,I]}function useWindowSplitterPanelGroupBehavior({committedValuesRef:r,eagerValuesRef:e,groupId:t,layout:a,panelDataArray:o,panelGroupElement:l,setLayout:s}){reactExports.useRef({didWarnAboutMissingResizeHandle:!1}),useIsomorphicLayoutEffect(()=>{if(!l)return;const f=getResizeHandleElementsForGroup(t,l);for(let m=0;m<o.length-1;m++){const{valueMax:b,valueMin:E,valueNow:M}=calculateAriaValues({layout:a,panelsArray:o,pivotIndices:[m,m+1]}),I=f[m];if(I!=null){const V=o[m];assert(V,`No panel data found for index "${m}"`),I.setAttribute("aria-controls",V.id),I.setAttribute("aria-valuemax",""+Math.round(b)),I.setAttribute("aria-valuemin",""+Math.round(E)),I.setAttribute("aria-valuenow",M!=null?""+Math.round(M):"")}}return()=>{f.forEach((m,b)=>{m.removeAttribute("aria-controls"),m.removeAttribute("aria-valuemax"),m.removeAttribute("aria-valuemin"),m.removeAttribute("aria-valuenow")})}},[t,a,o,l]),reactExports.useEffect(()=>{if(!l)return;const f=e.current;assert(f,"Eager values not found");const{panelDataArray:m}=f,b=getPanelGroupElement(t,l);assert(b!=null,`No group found for id "${t}"`);const E=getResizeHandleElementsForGroup(t,l);assert(E,`No resize handles found for group id "${t}"`);const M=E.map(I=>{const V=I.getAttribute(DATA_ATTRIBUTES.resizeHandleId);assert(V,"Resize handle element has no handle id attribute");const[Z,ee]=getResizeHandlePanelIds(t,V,m,l);if(Z==null||ee==null)return()=>{};const le=K=>{if(!K.defaultPrevented)switch(K.key){case"Enter":{K.preventDefault();const vt=m.findIndex(q=>q.id===Z);if(vt>=0){const q=m[vt];assert(q,`No panel data found for index ${vt}`);const Q=a[vt],{collapsedSize:wt=0,collapsible:bt,minSize:Ut=0}=q.constraints;if(Q!=null&&bt){const it=adjustLayoutByDelta({delta:fuzzyNumbersEqual(Q,wt)?Ut-wt:wt-Q,initialLayout:a,panelConstraints:m.map(zt=>zt.constraints),pivotIndices:determinePivotIndices(t,V,l),prevLayout:a,trigger:"keyboard"});a!==it&&s(it)}}break}}};return I.addEventListener("keydown",le),()=>{I.removeEventListener("keydown",le)}});return()=>{M.forEach(I=>I())}},[l,r,e,t,a,o,s])}function areEqual$1(r,e){if(r.length!==e.length)return!1;for(let t=0;t<r.length;t++)if(r[t]!==e[t])return!1;return!0}function getResizeEventCursorPosition(r,e){const t=r==="horizontal",{x:a,y:o}=getResizeEventCoordinates(e);return t?a:o}function calculateDragOffsetPercentage(r,e,t,a,o){const l=t==="horizontal",s=getResizeHandleElement(e,o);assert(s,`No resize handle element found for id "${e}"`);const f=s.getAttribute(DATA_ATTRIBUTES.groupId);assert(f,"Resize handle element has no group id attribute");let{initialCursorPosition:m}=a;const b=getResizeEventCursorPosition(t,r),E=getPanelGroupElement(f,o);assert(E,`No group element found for id "${f}"`);const M=E.getBoundingClientRect(),I=l?M.width:M.height;return(b-m)/I*100}function calculateDeltaPercentage(r,e,t,a,o,l){if(isKeyDown(r)){const s=t==="horizontal";let f=0;r.shiftKey?f=100:o!=null?f=o:f=10;let m=0;switch(r.key){case"ArrowDown":m=s?0:f;break;case"ArrowLeft":m=s?-f:0;break;case"ArrowRight":m=s?f:0;break;case"ArrowUp":m=s?0:-f;break;case"End":m=100;break;case"Home":m=-100;break}return m}else return a==null?0:calculateDragOffsetPercentage(r,e,t,a,l)}function calculateUnsafeDefaultLayout({panelDataArray:r}){const e=Array(r.length),t=r.map(l=>l.constraints);let a=0,o=100;for(let l=0;l<r.length;l++){const s=t[l];assert(s,`Panel constraints not found for index ${l}`);const{defaultSize:f}=s;f!=null&&(a++,e[l]=f,o-=f)}for(let l=0;l<r.length;l++){const s=t[l];assert(s,`Panel constraints not found for index ${l}`);const{defaultSize:f}=s;if(f!=null)continue;const m=r.length-a,b=o/m;a++,e[l]=b,o-=b}return e}function callPanelCallbacks(r,e,t){e.forEach((a,o)=>{const l=r[o];assert(l,`Panel data not found for index ${o}`);const{callbacks:s,constraints:f,id:m}=l,{collapsedSize:b=0,collapsible:E}=f,M=t[m];if(M==null||a!==M){t[m]=a;const{onCollapse:I,onExpand:V,onResize:Z}=s;Z&&Z(a,M),E&&(I||V)&&(V&&(M==null||fuzzyNumbersEqual$1(M,b))&&!fuzzyNumbersEqual$1(a,b)&&V(),I&&(M==null||!fuzzyNumbersEqual$1(M,b))&&fuzzyNumbersEqual$1(a,b)&&I())}})}function compareLayouts(r,e){if(r.length!==e.length)return!1;for(let t=0;t<r.length;t++)if(r[t]!=e[t])return!1;return!0}function computePanelFlexBoxStyle({defaultSize:r,dragState:e,layout:t,panelData:a,panelIndex:o,precision:l=3}){const s=t[o];let f;return s==null?f=r!=null?r.toFixed(l):"1":a.length===1?f="1":f=s.toFixed(l),{flexBasis:0,flexGrow:f,flexShrink:1,overflow:"hidden",pointerEvents:e!==null?"none":void 0}}function debounce(r,e=10){let t=null;return(...o)=>{t!==null&&clearTimeout(t),t=setTimeout(()=>{r(...o)},e)}}function initializeDefaultStorage(r){try{if(typeof localStorage<"u")r.getItem=e=>localStorage.getItem(e),r.setItem=(e,t)=>{localStorage.setItem(e,t)};else throw new Error("localStorage not supported in this environment")}catch(e){console.error(e),r.getItem=()=>null,r.setItem=()=>{}}}function getPanelGroupKey(r){return`react-resizable-panels:${r}`}function getPanelKey(r){return r.map(e=>{const{constraints:t,id:a,idIsFromProps:o,order:l}=e;return o?a:l?`${l}:${JSON.stringify(t)}`:JSON.stringify(t)}).sort((e,t)=>e.localeCompare(t)).join(",")}function loadSerializedPanelGroupState(r,e){try{const t=getPanelGroupKey(r),a=e.getItem(t);if(a){const o=JSON.parse(a);if(typeof o=="object"&&o!=null)return o}}catch{}return null}function loadPanelGroupState(r,e,t){var a,o;const l=(a=loadSerializedPanelGroupState(r,t))!==null&&a!==void 0?a:{},s=getPanelKey(e);return(o=l[s])!==null&&o!==void 0?o:null}function savePanelGroupState(r,e,t,a,o){var l;const s=getPanelGroupKey(r),f=getPanelKey(e),m=(l=loadSerializedPanelGroupState(r,o))!==null&&l!==void 0?l:{};m[f]={expandToSizes:Object.fromEntries(t.entries()),layout:a};try{o.setItem(s,JSON.stringify(m))}catch(b){console.error(b)}}function validatePanelGroupLayout({layout:r,panelConstraints:e}){const t=[...r],a=t.reduce((l,s)=>l+s,0);if(t.length!==e.length)throw Error(`Invalid ${e.length} panel layout: ${t.map(l=>`${l}%`).join(", ")}`);if(!fuzzyNumbersEqual(a,100)&&t.length>0)for(let l=0;l<e.length;l++){const s=t[l];assert(s!=null,`No layout data found for index ${l}`);const f=100/a*s;t[l]=f}let o=0;for(let l=0;l<e.length;l++){const s=t[l];assert(s!=null,`No layout data found for index ${l}`);const f=resizePanel({panelConstraints:e,panelIndex:l,size:s});s!=f&&(o+=s-f,t[l]=f)}if(!fuzzyNumbersEqual(o,0))for(let l=0;l<e.length;l++){const s=t[l];assert(s!=null,`No layout data found for index ${l}`);const f=s+o,m=resizePanel({panelConstraints:e,panelIndex:l,size:f});if(s!==m&&(o-=m-s,t[l]=m,fuzzyNumbersEqual(o,0)))break}return t}const LOCAL_STORAGE_DEBOUNCE_INTERVAL=100,defaultStorage={getItem:r=>(initializeDefaultStorage(defaultStorage),defaultStorage.getItem(r)),setItem:(r,e)=>{initializeDefaultStorage(defaultStorage),defaultStorage.setItem(r,e)}},debounceMap={};function PanelGroupWithForwardedRef({autoSaveId:r=null,children:e,className:t="",direction:a,forwardedRef:o,id:l=null,onLayout:s=null,keyboardResizeBy:f=null,storage:m=defaultStorage,style:b,tagName:E="div",...M}){const I=useUniqueId(l),V=reactExports.useRef(null),[Z,ee]=reactExports.useState(null),[le,K]=reactExports.useState([]),vt=useForceUpdate(),q=reactExports.useRef({}),Q=reactExports.useRef(new Map),wt=reactExports.useRef(0),bt=reactExports.useRef({autoSaveId:r,direction:a,dragState:Z,id:I,keyboardResizeBy:f,onLayout:s,storage:m}),Ut=reactExports.useRef({layout:le,panelDataArray:[],panelDataArrayChanged:!1});reactExports.useRef({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),reactExports.useImperativeHandle(o,()=>({getId:()=>bt.current.id,getLayout:()=>{const{layout:x0}=Ut.current;return x0},setLayout:x0=>{const{onLayout:Dp}=bt.current,{layout:c0,panelDataArray:u0}=Ut.current,y0=validatePanelGroupLayout({layout:x0,panelConstraints:u0.map(M0=>M0.constraints)});areEqual$1(c0,y0)||(K(y0),Ut.current.layout=y0,Dp&&Dp(y0),callPanelCallbacks(u0,y0,q.current))}}),[]),useIsomorphicLayoutEffect(()=>{bt.current.autoSaveId=r,bt.current.direction=a,bt.current.dragState=Z,bt.current.id=I,bt.current.onLayout=s,bt.current.storage=m}),useWindowSplitterPanelGroupBehavior({committedValuesRef:bt,eagerValuesRef:Ut,groupId:I,layout:le,panelDataArray:Ut.current.panelDataArray,setLayout:K,panelGroupElement:V.current}),reactExports.useEffect(()=>{const{panelDataArray:x0}=Ut.current;if(r){if(le.length===0||le.length!==x0.length)return;let Dp=debounceMap[r];Dp==null&&(Dp=debounce(savePanelGroupState,LOCAL_STORAGE_DEBOUNCE_INTERVAL),debounceMap[r]=Dp);const c0=[...x0],u0=new Map(Q.current);Dp(r,c0,u0,le,m)}},[r,le,m]),reactExports.useEffect(()=>{});const it=reactExports.useCallback(x0=>{const{onLayout:Dp}=bt.current,{layout:c0,panelDataArray:u0}=Ut.current;if(x0.constraints.collapsible){const y0=u0.map(Mm=>Mm.constraints),{collapsedSize:M0=0,panelSize:sm,pivotIndices:mm}=panelDataHelper(u0,x0,c0);if(assert(sm!=null,`Panel size not found for panel "${x0.id}"`),!fuzzyNumbersEqual$1(sm,M0)){Q.current.set(x0.id,sm);const v1=findPanelDataIndex(u0,x0)===u0.length-1?sm-M0:M0-sm,v0=adjustLayoutByDelta({delta:v1,initialLayout:c0,panelConstraints:y0,pivotIndices:mm,prevLayout:c0,trigger:"imperative-api"});compareLayouts(c0,v0)||(K(v0),Ut.current.layout=v0,Dp&&Dp(v0),callPanelCallbacks(u0,v0,q.current))}}},[]),zt=reactExports.useCallback((x0,Dp)=>{const{onLayout:c0}=bt.current,{layout:u0,panelDataArray:y0}=Ut.current;if(x0.constraints.collapsible){const M0=y0.map(D1=>D1.constraints),{collapsedSize:sm=0,panelSize:mm=0,minSize:Mm=0,pivotIndices:v1}=panelDataHelper(y0,x0,u0),v0=Dp??Mm;if(fuzzyNumbersEqual$1(mm,sm)){const D1=Q.current.get(x0.id),P1=D1!=null&&D1>=v0?D1:v0,w1=findPanelDataIndex(y0,x0)===y0.length-1?mm-P1:P1-mm,o1=adjustLayoutByDelta({delta:w1,initialLayout:u0,panelConstraints:M0,pivotIndices:v1,prevLayout:u0,trigger:"imperative-api"});compareLayouts(u0,o1)||(K(o1),Ut.current.layout=o1,c0&&c0(o1),callPanelCallbacks(y0,o1,q.current))}}},[]),Zt=reactExports.useCallback(x0=>{const{layout:Dp,panelDataArray:c0}=Ut.current,{panelSize:u0}=panelDataHelper(c0,x0,Dp);return assert(u0!=null,`Panel size not found for panel "${x0.id}"`),u0},[]),Mn=reactExports.useCallback((x0,Dp)=>{const{panelDataArray:c0}=Ut.current,u0=findPanelDataIndex(c0,x0);return computePanelFlexBoxStyle({defaultSize:Dp,dragState:Z,layout:le,panelData:c0,panelIndex:u0})},[Z,le]),kp=reactExports.useCallback(x0=>{const{layout:Dp,panelDataArray:c0}=Ut.current,{collapsedSize:u0=0,collapsible:y0,panelSize:M0}=panelDataHelper(c0,x0,Dp);return assert(M0!=null,`Panel size not found for panel "${x0.id}"`),y0===!0&&fuzzyNumbersEqual$1(M0,u0)},[]),zp=reactExports.useCallback(x0=>{const{layout:Dp,panelDataArray:c0}=Ut.current,{collapsedSize:u0=0,collapsible:y0,panelSize:M0}=panelDataHelper(c0,x0,Dp);return assert(M0!=null,`Panel size not found for panel "${x0.id}"`),!y0||fuzzyCompareNumbers(M0,u0)>0},[]),sa=reactExports.useCallback(x0=>{const{panelDataArray:Dp}=Ut.current;Dp.push(x0),Dp.sort((c0,u0)=>{const y0=c0.order,M0=u0.order;return y0==null&&M0==null?0:y0==null?-1:M0==null?1:y0-M0}),Ut.current.panelDataArrayChanged=!0,vt()},[vt]);useIsomorphicLayoutEffect(()=>{if(Ut.current.panelDataArrayChanged){Ut.current.panelDataArrayChanged=!1;const{autoSaveId:x0,onLayout:Dp,storage:c0}=bt.current,{layout:u0,panelDataArray:y0}=Ut.current;let M0=null;if(x0){const mm=loadPanelGroupState(x0,y0,c0);mm&&(Q.current=new Map(Object.entries(mm.expandToSizes)),M0=mm.layout)}M0==null&&(M0=calculateUnsafeDefaultLayout({panelDataArray:y0}));const sm=validatePanelGroupLayout({layout:M0,panelConstraints:y0.map(mm=>mm.constraints)});areEqual$1(u0,sm)||(K(sm),Ut.current.layout=sm,Dp&&Dp(sm),callPanelCallbacks(y0,sm,q.current))}}),useIsomorphicLayoutEffect(()=>{const x0=Ut.current;return()=>{x0.layout=[]}},[]);const qo=reactExports.useCallback(x0=>{let Dp=!1;const c0=V.current;return c0&&window.getComputedStyle(c0,null).getPropertyValue("direction")==="rtl"&&(Dp=!0),function(y0){y0.preventDefault();const M0=V.current;if(!M0)return()=>null;const{direction:sm,dragState:mm,id:Mm,keyboardResizeBy:v1,onLayout:v0}=bt.current,{layout:D1,panelDataArray:P1}=Ut.current,{initialLayout:ig}=mm??{},w1=determinePivotIndices(Mm,x0,M0);let o1=calculateDeltaPercentage(y0,x0,sm,mm,v1,M0);const g1=sm==="horizontal";g1&&Dp&&(o1=-o1);const X1=P1.map(R0=>R0.constraints),sg=adjustLayoutByDelta({delta:o1,initialLayout:ig??D1,panelConstraints:X1,pivotIndices:w1,prevLayout:D1,trigger:isKeyDown(y0)?"keyboard":"mouse-or-touch"}),og=!compareLayouts(D1,sg);(isPointerEvent(y0)||isMouseEvent$1(y0))&&wt.current!=o1&&(wt.current=o1,!og&&o1!==0?g1?reportConstraintsViolation(x0,o1<0?EXCEEDED_HORIZONTAL_MIN:EXCEEDED_HORIZONTAL_MAX):reportConstraintsViolation(x0,o1<0?EXCEEDED_VERTICAL_MIN:EXCEEDED_VERTICAL_MAX):reportConstraintsViolation(x0,0)),og&&(K(sg),Ut.current.layout=sg,v0&&v0(sg),callPanelCallbacks(P1,sg,q.current))}},[]),ae=reactExports.useCallback((x0,Dp)=>{const{onLayout:c0}=bt.current,{layout:u0,panelDataArray:y0}=Ut.current,M0=y0.map(D1=>D1.constraints),{panelSize:sm,pivotIndices:mm}=panelDataHelper(y0,x0,u0);assert(sm!=null,`Panel size not found for panel "${x0.id}"`);const v1=findPanelDataIndex(y0,x0)===y0.length-1?sm-Dp:Dp-sm,v0=adjustLayoutByDelta({delta:v1,initialLayout:u0,panelConstraints:M0,pivotIndices:mm,prevLayout:u0,trigger:"imperative-api"});compareLayouts(u0,v0)||(K(v0),Ut.current.layout=v0,c0&&c0(v0),callPanelCallbacks(y0,v0,q.current))},[]),wp=reactExports.useCallback((x0,Dp)=>{const{layout:c0,panelDataArray:u0}=Ut.current,{collapsedSize:y0=0,collapsible:M0}=Dp,{collapsedSize:sm=0,collapsible:mm,maxSize:Mm=100,minSize:v1=0}=x0.constraints,{panelSize:v0}=panelDataHelper(u0,x0,c0);v0!=null&&(M0&&mm&&fuzzyNumbersEqual$1(v0,y0)?fuzzyNumbersEqual$1(y0,sm)||ae(x0,sm):v0<v1?ae(x0,v1):v0>Mm&&ae(x0,Mm))},[ae]),Cp=reactExports.useCallback((x0,Dp)=>{const{direction:c0}=bt.current,{layout:u0}=Ut.current;if(!V.current)return;const y0=getResizeHandleElement(x0,V.current);assert(y0,`Drag handle element not found for id "${x0}"`);const M0=getResizeEventCursorPosition(c0,Dp);ee({dragHandleId:x0,dragHandleRect:y0.getBoundingClientRect(),initialCursorPosition:M0,initialLayout:u0})},[]),Kt=reactExports.useCallback(()=>{ee(null)},[]),h0=reactExports.useCallback(x0=>{const{panelDataArray:Dp}=Ut.current,c0=findPanelDataIndex(Dp,x0);c0>=0&&(Dp.splice(c0,1),delete q.current[x0.id],Ut.current.panelDataArrayChanged=!0,vt())},[vt]),Pp=reactExports.useMemo(()=>({collapsePanel:it,direction:a,dragState:Z,expandPanel:zt,getPanelSize:Zt,getPanelStyle:Mn,groupId:I,isPanelCollapsed:kp,isPanelExpanded:zp,reevaluatePanelConstraints:wp,registerPanel:sa,registerResizeHandle:qo,resizePanel:ae,startDragging:Cp,stopDragging:Kt,unregisterPanel:h0,panelGroupElement:V.current}),[it,Z,a,zt,Zt,Mn,I,kp,zp,wp,sa,qo,ae,Cp,Kt,h0]),d0={display:"flex",flexDirection:a==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return reactExports.createElement(PanelGroupContext.Provider,{value:Pp},reactExports.createElement(E,{...M,children:e,className:t,id:l,ref:V,style:{...d0,...b},[DATA_ATTRIBUTES.group]:"",[DATA_ATTRIBUTES.groupDirection]:a,[DATA_ATTRIBUTES.groupId]:I}))}const PanelGroup=reactExports.forwardRef((r,e)=>reactExports.createElement(PanelGroupWithForwardedRef,{...r,forwardedRef:e}));PanelGroupWithForwardedRef.displayName="PanelGroup";PanelGroup.displayName="forwardRef(PanelGroup)";function findPanelDataIndex(r,e){return r.findIndex(t=>t===e||t.id===e.id)}function panelDataHelper(r,e,t){const a=findPanelDataIndex(r,e),l=a===r.length-1?[a-1,a]:[a,a+1],s=t[a];return{...e.constraints,panelSize:s,pivotIndices:l}}function useWindowSplitterResizeHandlerBehavior({disabled:r,handleId:e,resizeHandler:t,panelGroupElement:a}){reactExports.useEffect(()=>{if(r||t==null||a==null)return;const o=getResizeHandleElement(e,a);if(o==null)return;const l=s=>{if(!s.defaultPrevented)switch(s.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{s.preventDefault(),t(s);break}case"F6":{s.preventDefault();const f=o.getAttribute(DATA_ATTRIBUTES.groupId);assert(f,`No group element found for id "${f}"`);const m=getResizeHandleElementsForGroup(f,a),b=getResizeHandleElementIndex(f,e,a);assert(b!==null,`No resize element found for id "${e}"`);const E=s.shiftKey?b>0?b-1:m.length-1:b+1<m.length?b+1:0;m[E].focus();break}}};return o.addEventListener("keydown",l),()=>{o.removeEventListener("keydown",l)}},[a,r,e,t])}function PanelResizeHandle({children:r=null,className:e="",disabled:t=!1,hitAreaMargins:a,id:o,onBlur:l,onClick:s,onDragging:f,onFocus:m,onPointerDown:b,onPointerUp:E,style:M={},tabIndex:I=0,tagName:V="div",...Z}){var ee,le;const K=reactExports.useRef(null),vt=reactExports.useRef({onClick:s,onDragging:f,onPointerDown:b,onPointerUp:E});reactExports.useEffect(()=>{vt.current.onClick=s,vt.current.onDragging=f,vt.current.onPointerDown=b,vt.current.onPointerUp=E});const q=reactExports.useContext(PanelGroupContext);if(q===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:Q,groupId:wt,registerResizeHandle:bt,startDragging:Ut,stopDragging:it,panelGroupElement:zt}=q,Zt=useUniqueId(o),[Mn,kp]=reactExports.useState("inactive"),[zp,sa]=reactExports.useState(!1),[qo,ae]=reactExports.useState(null),wp=reactExports.useRef({state:Mn});useIsomorphicLayoutEffect(()=>{wp.current.state=Mn}),reactExports.useEffect(()=>{if(t)ae(null);else{const Pp=bt(Zt);ae(()=>Pp)}},[t,Zt,bt]);const Cp=(ee=a?.coarse)!==null&&ee!==void 0?ee:15,Kt=(le=a?.fine)!==null&&le!==void 0?le:5;reactExports.useEffect(()=>{if(t||qo==null)return;const Pp=K.current;assert(Pp,"Element ref not attached");let d0=!1;return registerResizeHandle(Zt,Pp,Q,{coarse:Cp,fine:Kt},(Dp,c0,u0)=>{if(!c0){kp("inactive");return}switch(Dp){case"down":{kp("drag"),d0=!1,assert(u0,'Expected event to be defined for "down" action'),Ut(Zt,u0);const{onDragging:y0,onPointerDown:M0}=vt.current;y0?.(!0),M0?.();break}case"move":{const{state:y0}=wp.current;d0=!0,y0!=="drag"&&kp("hover"),assert(u0,'Expected event to be defined for "move" action'),qo(u0);break}case"up":{kp("hover"),it();const{onClick:y0,onDragging:M0,onPointerUp:sm}=vt.current;M0?.(!1),sm?.(),d0||y0?.();break}}})},[Cp,Q,t,Kt,bt,Zt,qo,Ut,it]),useWindowSplitterResizeHandlerBehavior({disabled:t,handleId:Zt,resizeHandler:qo,panelGroupElement:zt});const h0={touchAction:"none",userSelect:"none"};return reactExports.createElement(V,{...Z,children:r,className:e,id:o,onBlur:()=>{sa(!1),l?.()},onFocus:()=>{sa(!0),m?.()},ref:K,role:"separator",style:{...h0,...M},tabIndex:I,[DATA_ATTRIBUTES.groupDirection]:Q,[DATA_ATTRIBUTES.groupId]:wt,[DATA_ATTRIBUTES.resizeHandle]:"",[DATA_ATTRIBUTES.resizeHandleActive]:Mn==="drag"?"pointer":zp?"keyboard":void 0,[DATA_ATTRIBUTES.resizeHandleEnabled]:!t,[DATA_ATTRIBUTES.resizeHandleId]:Zt,[DATA_ATTRIBUTES.resizeHandleState]:Mn})}PanelResizeHandle.displayName="PanelResizeHandle";function cc$1(r){if(typeof r=="string"||typeof r=="number")return""+r;let e="";if(Array.isArray(r))for(let t=0,a;t<r.length;t++)(a=cc$1(r[t]))!==""&&(e+=(e&&" ")+a);else for(let t in r)r[t]&&(e+=(e&&" ")+t);return e}var withSelector={exports:{}},withSelector_production={},shim={exports:{}},useSyncExternalStoreShim_production={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredUseSyncExternalStoreShim_production;function requireUseSyncExternalStoreShim_production(){if(hasRequiredUseSyncExternalStoreShim_production)return useSyncExternalStoreShim_production;hasRequiredUseSyncExternalStoreShim_production=1;var r=requireReact();function e(M,I){return M===I&&(M!==0||1/M===1/I)||M!==M&&I!==I}var t=typeof Object.is=="function"?Object.is:e,a=r.useState,o=r.useEffect,l=r.useLayoutEffect,s=r.useDebugValue;function f(M,I){var V=I(),Z=a({inst:{value:V,getSnapshot:I}}),ee=Z[0].inst,le=Z[1];return l(function(){ee.value=V,ee.getSnapshot=I,m(ee)&&le({inst:ee})},[M,V,I]),o(function(){return m(ee)&&le({inst:ee}),M(function(){m(ee)&&le({inst:ee})})},[M]),s(V),V}function m(M){var I=M.getSnapshot;M=M.value;try{var V=I();return!t(M,V)}catch{return!0}}function b(M,I){return I()}var E=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?b:f;return useSyncExternalStoreShim_production.useSyncExternalStore=r.useSyncExternalStore!==void 0?r.useSyncExternalStore:E,useSyncExternalStoreShim_production}var hasRequiredShim;function requireShim(){return hasRequiredShim||(hasRequiredShim=1,shim.exports=requireUseSyncExternalStoreShim_production()),shim.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredWithSelector_production;function requireWithSelector_production(){if(hasRequiredWithSelector_production)return withSelector_production;hasRequiredWithSelector_production=1;var r=requireReact(),e=requireShim();function t(b,E){return b===E&&(b!==0||1/b===1/E)||b!==b&&E!==E}var a=typeof Object.is=="function"?Object.is:t,o=e.useSyncExternalStore,l=r.useRef,s=r.useEffect,f=r.useMemo,m=r.useDebugValue;return withSelector_production.useSyncExternalStoreWithSelector=function(b,E,M,I,V){var Z=l(null);if(Z.current===null){var ee={hasValue:!1,value:null};Z.current=ee}else ee=Z.current;Z=f(function(){function K(bt){if(!vt){if(vt=!0,q=bt,bt=I(bt),V!==void 0&&ee.hasValue){var Ut=ee.value;if(V(Ut,bt))return Q=Ut}return Q=bt}if(Ut=Q,a(q,bt))return Ut;var it=I(bt);return V!==void 0&&V(Ut,it)?(q=bt,Ut):(q=bt,Q=it)}var vt=!1,q,Q,wt=M===void 0?null:M;return[function(){return K(E())},wt===null?void 0:function(){return K(wt())}]},[E,M,I,V]);var le=o(b,Z[0],Z[1]);return s(function(){ee.hasValue=!0,ee.value=le},[le]),m(le),le},withSelector_production}var hasRequiredWithSelector;function requireWithSelector(){return hasRequiredWithSelector||(hasRequiredWithSelector=1,withSelector.exports=requireWithSelector_production()),withSelector.exports}var withSelectorExports=requireWithSelector();const useSyncExternalStoreExports=getDefaultExportFromCjs(withSelectorExports),__vite_import_meta_env__={},createStoreImpl=r=>{let e;const t=new Set,a=(E,M)=>{const I=typeof E=="function"?E(e):E;if(!Object.is(I,e)){const V=e;e=M??(typeof I!="object"||I===null)?I:Object.assign({},e,I),t.forEach(Z=>Z(e,V))}},o=()=>e,m={setState:a,getState:o,getInitialState:()=>b,subscribe:E=>(t.add(E),()=>t.delete(E)),destroy:()=>{(__vite_import_meta_env__?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),t.clear()}},b=e=r(a,o,m);return m},createStore=r=>r?createStoreImpl(r):createStoreImpl,{useDebugValue}=React,{useSyncExternalStoreWithSelector}=useSyncExternalStoreExports,identity$2=r=>r;function useStoreWithEqualityFn(r,e=identity$2,t){const a=useSyncExternalStoreWithSelector(r.subscribe,r.getState,r.getServerState||r.getInitialState,e,t);return useDebugValue(a),a}const createWithEqualityFnImpl=(r,e)=>{const t=createStore(r),a=(o,l=e)=>useStoreWithEqualityFn(t,o,l);return Object.assign(a,t),a},createWithEqualityFn=(r,e)=>r?createWithEqualityFnImpl(r,e):createWithEqualityFnImpl;function shallow$1(r,e){if(Object.is(r,e))return!0;if(typeof r!="object"||r===null||typeof e!="object"||e===null)return!1;if(r instanceof Map&&e instanceof Map){if(r.size!==e.size)return!1;for(const[a,o]of r)if(!Object.is(o,e.get(a)))return!1;return!0}if(r instanceof Set&&e instanceof Set){if(r.size!==e.size)return!1;for(const a of r)if(!e.has(a))return!1;return!0}const t=Object.keys(r);if(t.length!==Object.keys(e).length)return!1;for(const a of t)if(!Object.prototype.hasOwnProperty.call(e,a)||!Object.is(r[a],e[a]))return!1;return!0}var noop$1={value:()=>{}};function dispatch(){for(var r=0,e=arguments.length,t={},a;r<e;++r){if(!(a=arguments[r]+"")||a in t||/[\s.]/.test(a))throw new Error("illegal type: "+a);t[a]=[]}return new Dispatch(t)}function Dispatch(r){this._=r}function parseTypenames$1(r,e){return r.trim().split(/^|\s+/).map(function(t){var a="",o=t.indexOf(".");if(o>=0&&(a=t.slice(o+1),t=t.slice(0,o)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:a}})}Dispatch.prototype=dispatch.prototype={constructor:Dispatch,on:function(r,e){var t=this._,a=parseTypenames$1(r+"",t),o,l=-1,s=a.length;if(arguments.length<2){for(;++l<s;)if((o=(r=a[l]).type)&&(o=get$1(t[o],r.name)))return o;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++l<s;)if(o=(r=a[l]).type)t[o]=set$1(t[o],r.name,e);else if(e==null)for(o in t)t[o]=set$1(t[o],r.name,null);return this},copy:function(){var r={},e=this._;for(var t in e)r[t]=e[t].slice();return new Dispatch(r)},call:function(r,e){if((o=arguments.length-2)>0)for(var t=new Array(o),a=0,o,l;a<o;++a)t[a]=arguments[a+2];if(!this._.hasOwnProperty(r))throw new Error("unknown type: "+r);for(l=this._[r],a=0,o=l.length;a<o;++a)l[a].value.apply(e,t)},apply:function(r,e,t){if(!this._.hasOwnProperty(r))throw new Error("unknown type: "+r);for(var a=this._[r],o=0,l=a.length;o<l;++o)a[o].value.apply(e,t)}};function get$1(r,e){for(var t=0,a=r.length,o;t<a;++t)if((o=r[t]).name===e)return o.value}function set$1(r,e,t){for(var a=0,o=r.length;a<o;++a)if(r[a].name===e){r[a]=noop$1,r=r.slice(0,a).concat(r.slice(a+1));break}return t!=null&&r.push({name:e,value:t}),r}var xhtml="http://www.w3.org/1999/xhtml";const namespaces={svg:"http://www.w3.org/2000/svg",xhtml,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function namespace(r){var e=r+="",t=e.indexOf(":");return t>=0&&(e=r.slice(0,t))!=="xmlns"&&(r=r.slice(t+1)),namespaces.hasOwnProperty(e)?{space:namespaces[e],local:r}:r}function creatorInherit(r){return function(){var e=this.ownerDocument,t=this.namespaceURI;return t===xhtml&&e.documentElement.namespaceURI===xhtml?e.createElement(r):e.createElementNS(t,r)}}function creatorFixed(r){return function(){return this.ownerDocument.createElementNS(r.space,r.local)}}function creator(r){var e=namespace(r);return(e.local?creatorFixed:creatorInherit)(e)}function none(){}function selector$h(r){return r==null?none:function(){return this.querySelector(r)}}function selection_select(r){typeof r!="function"&&(r=selector$h(r));for(var e=this._groups,t=e.length,a=new Array(t),o=0;o<t;++o)for(var l=e[o],s=l.length,f=a[o]=new Array(s),m,b,E=0;E<s;++E)(m=l[E])&&(b=r.call(m,m.__data__,E,l))&&("__data__"in m&&(b.__data__=m.__data__),f[E]=b);return new Selection$1(a,this._parents)}function array(r){return r==null?[]:Array.isArray(r)?r:Array.from(r)}function empty(){return[]}function selectorAll(r){return r==null?empty:function(){return this.querySelectorAll(r)}}function arrayAll(r){return function(){return array(r.apply(this,arguments))}}function selection_selectAll(r){typeof r=="function"?r=arrayAll(r):r=selectorAll(r);for(var e=this._groups,t=e.length,a=[],o=[],l=0;l<t;++l)for(var s=e[l],f=s.length,m,b=0;b<f;++b)(m=s[b])&&(a.push(r.call(m,m.__data__,b,s)),o.push(m));return new Selection$1(a,o)}function matcher(r){return function(){return this.matches(r)}}function childMatcher(r){return function(e){return e.matches(r)}}var find=Array.prototype.find;function childFind(r){return function(){return find.call(this.children,r)}}function childFirst(){return this.firstElementChild}function selection_selectChild(r){return this.select(r==null?childFirst:childFind(typeof r=="function"?r:childMatcher(r)))}var filter=Array.prototype.filter;function children(){return Array.from(this.children)}function childrenFilter(r){return function(){return filter.call(this.children,r)}}function selection_selectChildren(r){return this.selectAll(r==null?children:childrenFilter(typeof r=="function"?r:childMatcher(r)))}function selection_filter(r){typeof r!="function"&&(r=matcher(r));for(var e=this._groups,t=e.length,a=new Array(t),o=0;o<t;++o)for(var l=e[o],s=l.length,f=a[o]=[],m,b=0;b<s;++b)(m=l[b])&&r.call(m,m.__data__,b,l)&&f.push(m);return new Selection$1(a,this._parents)}function sparse(r){return new Array(r.length)}function selection_enter(){return new Selection$1(this._enter||this._groups.map(sparse),this._parents)}function EnterNode(r,e){this.ownerDocument=r.ownerDocument,this.namespaceURI=r.namespaceURI,this._next=null,this._parent=r,this.__data__=e}EnterNode.prototype={constructor:EnterNode,appendChild:function(r){return this._parent.insertBefore(r,this._next)},insertBefore:function(r,e){return this._parent.insertBefore(r,e)},querySelector:function(r){return this._parent.querySelector(r)},querySelectorAll:function(r){return this._parent.querySelectorAll(r)}};function constant$3(r){return function(){return r}}function bindIndex(r,e,t,a,o,l){for(var s=0,f,m=e.length,b=l.length;s<b;++s)(f=e[s])?(f.__data__=l[s],a[s]=f):t[s]=new EnterNode(r,l[s]);for(;s<m;++s)(f=e[s])&&(o[s]=f)}function bindKey(r,e,t,a,o,l,s){var f,m,b=new Map,E=e.length,M=l.length,I=new Array(E),V;for(f=0;f<E;++f)(m=e[f])&&(I[f]=V=s.call(m,m.__data__,f,e)+"",b.has(V)?o[f]=m:b.set(V,m));for(f=0;f<M;++f)V=s.call(r,l[f],f,l)+"",(m=b.get(V))?(a[f]=m,m.__data__=l[f],b.delete(V)):t[f]=new EnterNode(r,l[f]);for(f=0;f<E;++f)(m=e[f])&&b.get(I[f])===m&&(o[f]=m)}function datum(r){return r.__data__}function selection_data(r,e){if(!arguments.length)return Array.from(this,datum);var t=e?bindKey:bindIndex,a=this._parents,o=this._groups;typeof r!="function"&&(r=constant$3(r));for(var l=o.length,s=new Array(l),f=new Array(l),m=new Array(l),b=0;b<l;++b){var E=a[b],M=o[b],I=M.length,V=arraylike(r.call(E,E&&E.__data__,b,a)),Z=V.length,ee=f[b]=new Array(Z),le=s[b]=new Array(Z),K=m[b]=new Array(I);t(E,M,ee,le,K,V,e);for(var vt=0,q=0,Q,wt;vt<Z;++vt)if(Q=ee[vt]){for(vt>=q&&(q=vt+1);!(wt=le[q])&&++q<Z;);Q._next=wt||null}}return s=new Selection$1(s,a),s._enter=f,s._exit=m,s}function arraylike(r){return typeof r=="object"&&"length"in r?r:Array.from(r)}function selection_exit(){return new Selection$1(this._exit||this._groups.map(sparse),this._parents)}function selection_join(r,e,t){var a=this.enter(),o=this,l=this.exit();return typeof r=="function"?(a=r(a),a&&(a=a.selection())):a=a.append(r+""),e!=null&&(o=e(o),o&&(o=o.selection())),t==null?l.remove():t(l),a&&o?a.merge(o).order():o}function selection_merge(r){for(var e=r.selection?r.selection():r,t=this._groups,a=e._groups,o=t.length,l=a.length,s=Math.min(o,l),f=new Array(o),m=0;m<s;++m)for(var b=t[m],E=a[m],M=b.length,I=f[m]=new Array(M),V,Z=0;Z<M;++Z)(V=b[Z]||E[Z])&&(I[Z]=V);for(;m<o;++m)f[m]=t[m];return new Selection$1(f,this._parents)}function selection_order(){for(var r=this._groups,e=-1,t=r.length;++e<t;)for(var a=r[e],o=a.length-1,l=a[o],s;--o>=0;)(s=a[o])&&(l&&s.compareDocumentPosition(l)^4&&l.parentNode.insertBefore(s,l),l=s);return this}function selection_sort(r){r||(r=ascending);function e(M,I){return M&&I?r(M.__data__,I.__data__):!M-!I}for(var t=this._groups,a=t.length,o=new Array(a),l=0;l<a;++l){for(var s=t[l],f=s.length,m=o[l]=new Array(f),b,E=0;E<f;++E)(b=s[E])&&(m[E]=b);m.sort(e)}return new Selection$1(o,this._parents).order()}function ascending(r,e){return r<e?-1:r>e?1:r>=e?0:NaN}function selection_call(){var r=arguments[0];return arguments[0]=this,r.apply(null,arguments),this}function selection_nodes(){return Array.from(this)}function selection_node(){for(var r=this._groups,e=0,t=r.length;e<t;++e)for(var a=r[e],o=0,l=a.length;o<l;++o){var s=a[o];if(s)return s}return null}function selection_size(){let r=0;for(const e of this)++r;return r}function selection_empty(){return!this.node()}function selection_each(r){for(var e=this._groups,t=0,a=e.length;t<a;++t)for(var o=e[t],l=0,s=o.length,f;l<s;++l)(f=o[l])&&r.call(f,f.__data__,l,o);return this}function attrRemove$1(r){return function(){this.removeAttribute(r)}}function attrRemoveNS$1(r){return function(){this.removeAttributeNS(r.space,r.local)}}function attrConstant$1(r,e){return function(){this.setAttribute(r,e)}}function attrConstantNS$1(r,e){return function(){this.setAttributeNS(r.space,r.local,e)}}function attrFunction$1(r,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttribute(r):this.setAttribute(r,t)}}function attrFunctionNS$1(r,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttributeNS(r.space,r.local):this.setAttributeNS(r.space,r.local,t)}}function selection_attr(r,e){var t=namespace(r);if(arguments.length<2){var a=this.node();return t.local?a.getAttributeNS(t.space,t.local):a.getAttribute(t)}return this.each((e==null?t.local?attrRemoveNS$1:attrRemove$1:typeof e=="function"?t.local?attrFunctionNS$1:attrFunction$1:t.local?attrConstantNS$1:attrConstant$1)(t,e))}function defaultView(r){return r.ownerDocument&&r.ownerDocument.defaultView||r.document&&r||r.defaultView}function styleRemove$1(r){return function(){this.style.removeProperty(r)}}function styleConstant$1(r,e,t){return function(){this.style.setProperty(r,e,t)}}function styleFunction$1(r,e,t){return function(){var a=e.apply(this,arguments);a==null?this.style.removeProperty(r):this.style.setProperty(r,a,t)}}function selection_style(r,e,t){return arguments.length>1?this.each((e==null?styleRemove$1:typeof e=="function"?styleFunction$1:styleConstant$1)(r,e,t??"")):styleValue(this.node(),r)}function styleValue(r,e){return r.style.getPropertyValue(e)||defaultView(r).getComputedStyle(r,null).getPropertyValue(e)}function propertyRemove(r){return function(){delete this[r]}}function propertyConstant(r,e){return function(){this[r]=e}}function propertyFunction(r,e){return function(){var t=e.apply(this,arguments);t==null?delete this[r]:this[r]=t}}function selection_property(r,e){return arguments.length>1?this.each((e==null?propertyRemove:typeof e=="function"?propertyFunction:propertyConstant)(r,e)):this.node()[r]}function classArray(r){return r.trim().split(/^|\s+/)}function classList(r){return r.classList||new ClassList(r)}function ClassList(r){this._node=r,this._names=classArray(r.getAttribute("class")||"")}ClassList.prototype={add:function(r){var e=this._names.indexOf(r);e<0&&(this._names.push(r),this._node.setAttribute("class",this._names.join(" ")))},remove:function(r){var e=this._names.indexOf(r);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(r){return this._names.indexOf(r)>=0}};function classedAdd(r,e){for(var t=classList(r),a=-1,o=e.length;++a<o;)t.add(e[a])}function classedRemove(r,e){for(var t=classList(r),a=-1,o=e.length;++a<o;)t.remove(e[a])}function classedTrue(r){return function(){classedAdd(this,r)}}function classedFalse(r){return function(){classedRemove(this,r)}}function classedFunction(r,e){return function(){(e.apply(this,arguments)?classedAdd:classedRemove)(this,r)}}function selection_classed(r,e){var t=classArray(r+"");if(arguments.length<2){for(var a=classList(this.node()),o=-1,l=t.length;++o<l;)if(!a.contains(t[o]))return!1;return!0}return this.each((typeof e=="function"?classedFunction:e?classedTrue:classedFalse)(t,e))}function textRemove(){this.textContent=""}function textConstant$1(r){return function(){this.textContent=r}}function textFunction$1(r){return function(){var e=r.apply(this,arguments);this.textContent=e??""}}function selection_text(r){return arguments.length?this.each(r==null?textRemove:(typeof r=="function"?textFunction$1:textConstant$1)(r)):this.node().textContent}function htmlRemove(){this.innerHTML=""}function htmlConstant(r){return function(){this.innerHTML=r}}function htmlFunction(r){return function(){var e=r.apply(this,arguments);this.innerHTML=e??""}}function selection_html(r){return arguments.length?this.each(r==null?htmlRemove:(typeof r=="function"?htmlFunction:htmlConstant)(r)):this.node().innerHTML}function raise(){this.nextSibling&&this.parentNode.appendChild(this)}function selection_raise(){return this.each(raise)}function lower(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function selection_lower(){return this.each(lower)}function selection_append(r){var e=typeof r=="function"?r:creator(r);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function constantNull(){return null}function selection_insert(r,e){var t=typeof r=="function"?r:creator(r),a=e==null?constantNull:typeof e=="function"?e:selector$h(e);return this.select(function(){return this.insertBefore(t.apply(this,arguments),a.apply(this,arguments)||null)})}function remove(){var r=this.parentNode;r&&r.removeChild(this)}function selection_remove(){return this.each(remove)}function selection_cloneShallow(){var r=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(r,this.nextSibling):r}function selection_cloneDeep(){var r=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(r,this.nextSibling):r}function selection_clone(r){return this.select(r?selection_cloneDeep:selection_cloneShallow)}function selection_datum(r){return arguments.length?this.property("__data__",r):this.node().__data__}function contextListener(r){return function(e){r.call(this,e,this.__data__)}}function parseTypenames(r){return r.trim().split(/^|\s+/).map(function(e){var t="",a=e.indexOf(".");return a>=0&&(t=e.slice(a+1),e=e.slice(0,a)),{type:e,name:t}})}function onRemove(r){return function(){var e=this.__on;if(e){for(var t=0,a=-1,o=e.length,l;t<o;++t)l=e[t],(!r.type||l.type===r.type)&&l.name===r.name?this.removeEventListener(l.type,l.listener,l.options):e[++a]=l;++a?e.length=a:delete this.__on}}}function onAdd(r,e,t){return function(){var a=this.__on,o,l=contextListener(e);if(a){for(var s=0,f=a.length;s<f;++s)if((o=a[s]).type===r.type&&o.name===r.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=l,o.options=t),o.value=e;return}}this.addEventListener(r.type,l,t),o={type:r.type,name:r.name,value:e,listener:l,options:t},a?a.push(o):this.__on=[o]}}function selection_on(r,e,t){var a=parseTypenames(r+""),o,l=a.length,s;if(arguments.length<2){var f=this.node().__on;if(f){for(var m=0,b=f.length,E;m<b;++m)for(o=0,E=f[m];o<l;++o)if((s=a[o]).type===E.type&&s.name===E.name)return E.value}return}for(f=e?onAdd:onRemove,o=0;o<l;++o)this.each(f(a[o],e,t));return this}function dispatchEvent(r,e,t){var a=defaultView(r),o=a.CustomEvent;typeof o=="function"?o=new o(e,t):(o=a.document.createEvent("Event"),t?(o.initEvent(e,t.bubbles,t.cancelable),o.detail=t.detail):o.initEvent(e,!1,!1)),r.dispatchEvent(o)}function dispatchConstant(r,e){return function(){return dispatchEvent(this,r,e)}}function dispatchFunction(r,e){return function(){return dispatchEvent(this,r,e.apply(this,arguments))}}function selection_dispatch(r,e){return this.each((typeof e=="function"?dispatchFunction:dispatchConstant)(r,e))}function*selection_iterator(){for(var r=this._groups,e=0,t=r.length;e<t;++e)for(var a=r[e],o=0,l=a.length,s;o<l;++o)(s=a[o])&&(yield s)}var root=[null];function Selection$1(r,e){this._groups=r,this._parents=e}function selection(){return new Selection$1([[document.documentElement]],root)}function selection_selection(){return this}Selection$1.prototype=selection.prototype={constructor:Selection$1,select:selection_select,selectAll:selection_selectAll,selectChild:selection_selectChild,selectChildren:selection_selectChildren,filter:selection_filter,data:selection_data,enter:selection_enter,exit:selection_exit,join:selection_join,merge:selection_merge,selection:selection_selection,order:selection_order,sort:selection_sort,call:selection_call,nodes:selection_nodes,node:selection_node,size:selection_size,empty:selection_empty,each:selection_each,attr:selection_attr,style:selection_style,property:selection_property,classed:selection_classed,text:selection_text,html:selection_html,raise:selection_raise,lower:selection_lower,append:selection_append,insert:selection_insert,remove:selection_remove,clone:selection_clone,datum:selection_datum,on:selection_on,dispatch:selection_dispatch,[Symbol.iterator]:selection_iterator};function select(r){return typeof r=="string"?new Selection$1([[document.querySelector(r)]],[document.documentElement]):new Selection$1([[r]],root)}function sourceEvent(r){let e;for(;e=r.sourceEvent;)r=e;return r}function pointer(r,e){if(r=sourceEvent(r),e===void 0&&(e=r.currentTarget),e){var t=e.ownerSVGElement||e;if(t.createSVGPoint){var a=t.createSVGPoint();return a.x=r.clientX,a.y=r.clientY,a=a.matrixTransform(e.getScreenCTM().inverse()),[a.x,a.y]}if(e.getBoundingClientRect){var o=e.getBoundingClientRect();return[r.clientX-o.left-e.clientLeft,r.clientY-o.top-e.clientTop]}}return[r.pageX,r.pageY]}const nonpassive={passive:!1},nonpassivecapture={capture:!0,passive:!1};function nopropagation$1(r){r.stopImmediatePropagation()}function noevent$1(r){r.preventDefault(),r.stopImmediatePropagation()}function dragDisable(r){var e=r.document.documentElement,t=select(r).on("dragstart.drag",noevent$1,nonpassivecapture);"onselectstart"in e?t.on("selectstart.drag",noevent$1,nonpassivecapture):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function yesdrag(r,e){var t=r.document.documentElement,a=select(r).on("dragstart.drag",null);e&&(a.on("click.drag",noevent$1,nonpassivecapture),setTimeout(function(){a.on("click.drag",null)},0)),"onselectstart"in t?a.on("selectstart.drag",null):(t.style.MozUserSelect=t.__noselect,delete t.__noselect)}const constant$2=r=>()=>r;function DragEvent(r,{sourceEvent:e,subject:t,target:a,identifier:o,active:l,x:s,y:f,dx:m,dy:b,dispatch:E}){Object.defineProperties(this,{type:{value:r,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:t,enumerable:!0,configurable:!0},target:{value:a,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:l,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:f,enumerable:!0,configurable:!0},dx:{value:m,enumerable:!0,configurable:!0},dy:{value:b,enumerable:!0,configurable:!0},_:{value:E}})}DragEvent.prototype.on=function(){var r=this._.on.apply(this._,arguments);return r===this._?this:r};function defaultFilter$1(r){return!r.ctrlKey&&!r.button}function defaultContainer(){return this.parentNode}function defaultSubject(r,e){return e??{x:r.x,y:r.y}}function defaultTouchable$1(){return navigator.maxTouchPoints||"ontouchstart"in this}function drag(){var r=defaultFilter$1,e=defaultContainer,t=defaultSubject,a=defaultTouchable$1,o={},l=dispatch("start","drag","end"),s=0,f,m,b,E,M=0;function I(Q){Q.on("mousedown.drag",V).filter(a).on("touchstart.drag",le).on("touchmove.drag",K,nonpassive).on("touchend.drag touchcancel.drag",vt).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function V(Q,wt){if(!(E||!r.call(this,Q,wt))){var bt=q(this,e.call(this,Q,wt),Q,wt,"mouse");bt&&(select(Q.view).on("mousemove.drag",Z,nonpassivecapture).on("mouseup.drag",ee,nonpassivecapture),dragDisable(Q.view),nopropagation$1(Q),b=!1,f=Q.clientX,m=Q.clientY,bt("start",Q))}}function Z(Q){if(noevent$1(Q),!b){var wt=Q.clientX-f,bt=Q.clientY-m;b=wt*wt+bt*bt>M}o.mouse("drag",Q)}function ee(Q){select(Q.view).on("mousemove.drag mouseup.drag",null),yesdrag(Q.view,b),noevent$1(Q),o.mouse("end",Q)}function le(Q,wt){if(r.call(this,Q,wt)){var bt=Q.changedTouches,Ut=e.call(this,Q,wt),it=bt.length,zt,Zt;for(zt=0;zt<it;++zt)(Zt=q(this,Ut,Q,wt,bt[zt].identifier,bt[zt]))&&(nopropagation$1(Q),Zt("start",Q,bt[zt]))}}function K(Q){var wt=Q.changedTouches,bt=wt.length,Ut,it;for(Ut=0;Ut<bt;++Ut)(it=o[wt[Ut].identifier])&&(noevent$1(Q),it("drag",Q,wt[Ut]))}function vt(Q){var wt=Q.changedTouches,bt=wt.length,Ut,it;for(E&&clearTimeout(E),E=setTimeout(function(){E=null},500),Ut=0;Ut<bt;++Ut)(it=o[wt[Ut].identifier])&&(nopropagation$1(Q),it("end",Q,wt[Ut]))}function q(Q,wt,bt,Ut,it,zt){var Zt=l.copy(),Mn=pointer(zt||bt,wt),kp,zp,sa;if((sa=t.call(Q,new DragEvent("beforestart",{sourceEvent:bt,target:I,identifier:it,active:s,x:Mn[0],y:Mn[1],dx:0,dy:0,dispatch:Zt}),Ut))!=null)return kp=sa.x-Mn[0]||0,zp=sa.y-Mn[1]||0,function qo(ae,wp,Cp){var Kt=Mn,h0;switch(ae){case"start":o[it]=qo,h0=s++;break;case"end":delete o[it],--s;case"drag":Mn=pointer(Cp||wp,wt),h0=s;break}Zt.call(ae,Q,new DragEvent(ae,{sourceEvent:wp,subject:sa,target:I,identifier:it,active:h0,x:Mn[0]+kp,y:Mn[1]+zp,dx:Mn[0]-Kt[0],dy:Mn[1]-Kt[1],dispatch:Zt}),Ut)}}return I.filter=function(Q){return arguments.length?(r=typeof Q=="function"?Q:constant$2(!!Q),I):r},I.container=function(Q){return arguments.length?(e=typeof Q=="function"?Q:constant$2(Q),I):e},I.subject=function(Q){return arguments.length?(t=typeof Q=="function"?Q:constant$2(Q),I):t},I.touchable=function(Q){return arguments.length?(a=typeof Q=="function"?Q:constant$2(!!Q),I):a},I.on=function(){var Q=l.on.apply(l,arguments);return Q===l?I:Q},I.clickDistance=function(Q){return arguments.length?(M=(Q=+Q)*Q,I):Math.sqrt(M)},I}function define(r,e,t){r.prototype=e.prototype=t,t.constructor=r}function extend(r,e){var t=Object.create(r.prototype);for(var a in e)t[a]=e[a];return t}function Color(){}var darker=.7,brighter=1/darker,reI="\\s*([+-]?\\d+)\\s*",reN="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",reP="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",reHex=/^#([0-9a-f]{3,8})$/,reRgbInteger=new RegExp(`^rgb\\(${reI},${reI},${reI}\\)$`),reRgbPercent=new RegExp(`^rgb\\(${reP},${reP},${reP}\\)$`),reRgbaInteger=new RegExp(`^rgba\\(${reI},${reI},${reI},${reN}\\)$`),reRgbaPercent=new RegExp(`^rgba\\(${reP},${reP},${reP},${reN}\\)$`),reHslPercent=new RegExp(`^hsl\\(${reN},${reP},${reP}\\)$`),reHslaPercent=new RegExp(`^hsla\\(${reN},${reP},${reP},${reN}\\)$`),named={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};define(Color,color,{copy(r){return Object.assign(new this.constructor,this,r)},displayable(){return this.rgb().displayable()},hex:color_formatHex,formatHex:color_formatHex,formatHex8:color_formatHex8,formatHsl:color_formatHsl,formatRgb:color_formatRgb,toString:color_formatRgb});function color_formatHex(){return this.rgb().formatHex()}function color_formatHex8(){return this.rgb().formatHex8()}function color_formatHsl(){return hslConvert(this).formatHsl()}function color_formatRgb(){return this.rgb().formatRgb()}function color(r){var e,t;return r=(r+"").trim().toLowerCase(),(e=reHex.exec(r))?(t=e[1].length,e=parseInt(e[1],16),t===6?rgbn(e):t===3?new Rgb(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?rgba(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?rgba(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=reRgbInteger.exec(r))?new Rgb(e[1],e[2],e[3],1):(e=reRgbPercent.exec(r))?new Rgb(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=reRgbaInteger.exec(r))?rgba(e[1],e[2],e[3],e[4]):(e=reRgbaPercent.exec(r))?rgba(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=reHslPercent.exec(r))?hsla(e[1],e[2]/100,e[3]/100,1):(e=reHslaPercent.exec(r))?hsla(e[1],e[2]/100,e[3]/100,e[4]):named.hasOwnProperty(r)?rgbn(named[r]):r==="transparent"?new Rgb(NaN,NaN,NaN,0):null}function rgbn(r){return new Rgb(r>>16&255,r>>8&255,r&255,1)}function rgba(r,e,t,a){return a<=0&&(r=e=t=NaN),new Rgb(r,e,t,a)}function rgbConvert(r){return r instanceof Color||(r=color(r)),r?(r=r.rgb(),new Rgb(r.r,r.g,r.b,r.opacity)):new Rgb}function rgb(r,e,t,a){return arguments.length===1?rgbConvert(r):new Rgb(r,e,t,a??1)}function Rgb(r,e,t,a){this.r=+r,this.g=+e,this.b=+t,this.opacity=+a}define(Rgb,rgb,extend(Color,{brighter(r){return r=r==null?brighter:Math.pow(brighter,r),new Rgb(this.r*r,this.g*r,this.b*r,this.opacity)},darker(r){return r=r==null?darker:Math.pow(darker,r),new Rgb(this.r*r,this.g*r,this.b*r,this.opacity)},rgb(){return this},clamp(){return new Rgb(clampi(this.r),clampi(this.g),clampi(this.b),clampa(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rgb_formatHex,formatHex:rgb_formatHex,formatHex8:rgb_formatHex8,formatRgb:rgb_formatRgb,toString:rgb_formatRgb}));function rgb_formatHex(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}`}function rgb_formatHex8(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex((isNaN(this.opacity)?1:this.opacity)*255)}`}function rgb_formatRgb(){const r=clampa(this.opacity);return`${r===1?"rgb(":"rgba("}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${r===1?")":`, ${r})`}`}function clampa(r){return isNaN(r)?1:Math.max(0,Math.min(1,r))}function clampi(r){return Math.max(0,Math.min(255,Math.round(r)||0))}function hex(r){return r=clampi(r),(r<16?"0":"")+r.toString(16)}function hsla(r,e,t,a){return a<=0?r=e=t=NaN:t<=0||t>=1?r=e=NaN:e<=0&&(r=NaN),new Hsl(r,e,t,a)}function hslConvert(r){if(r instanceof Hsl)return new Hsl(r.h,r.s,r.l,r.opacity);if(r instanceof Color||(r=color(r)),!r)return new Hsl;if(r instanceof Hsl)return r;r=r.rgb();var e=r.r/255,t=r.g/255,a=r.b/255,o=Math.min(e,t,a),l=Math.max(e,t,a),s=NaN,f=l-o,m=(l+o)/2;return f?(e===l?s=(t-a)/f+(t<a)*6:t===l?s=(a-e)/f+2:s=(e-t)/f+4,f/=m<.5?l+o:2-l-o,s*=60):f=m>0&&m<1?0:s,new Hsl(s,f,m,r.opacity)}function hsl(r,e,t,a){return arguments.length===1?hslConvert(r):new Hsl(r,e,t,a??1)}function Hsl(r,e,t,a){this.h=+r,this.s=+e,this.l=+t,this.opacity=+a}define(Hsl,hsl,extend(Color,{brighter(r){return r=r==null?brighter:Math.pow(brighter,r),new Hsl(this.h,this.s,this.l*r,this.opacity)},darker(r){return r=r==null?darker:Math.pow(darker,r),new Hsl(this.h,this.s,this.l*r,this.opacity)},rgb(){var r=this.h%360+(this.h<0)*360,e=isNaN(r)||isNaN(this.s)?0:this.s,t=this.l,a=t+(t<.5?t:1-t)*e,o=2*t-a;return new Rgb(hsl2rgb(r>=240?r-240:r+120,o,a),hsl2rgb(r,o,a),hsl2rgb(r<120?r+240:r-120,o,a),this.opacity)},clamp(){return new Hsl(clamph(this.h),clampt(this.s),clampt(this.l),clampa(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const r=clampa(this.opacity);return`${r===1?"hsl(":"hsla("}${clamph(this.h)}, ${clampt(this.s)*100}%, ${clampt(this.l)*100}%${r===1?")":`, ${r})`}`}}));function clamph(r){return r=(r||0)%360,r<0?r+360:r}function clampt(r){return Math.max(0,Math.min(1,r||0))}function hsl2rgb(r,e,t){return(r<60?e+(t-e)*r/60:r<180?t:r<240?e+(t-e)*(240-r)/60:e)*255}const constant$1=r=>()=>r;function linear(r,e){return function(t){return r+t*e}}function exponential(r,e,t){return r=Math.pow(r,t),e=Math.pow(e,t)-r,t=1/t,function(a){return Math.pow(r+a*e,t)}}function gamma(r){return(r=+r)==1?nogamma:function(e,t){return t-e?exponential(e,t,r):constant$1(isNaN(e)?t:e)}}function nogamma(r,e){var t=e-r;return t?linear(r,t):constant$1(isNaN(r)?e:r)}const interpolateRgb=(function r(e){var t=gamma(e);function a(o,l){var s=t((o=rgb(o)).r,(l=rgb(l)).r),f=t(o.g,l.g),m=t(o.b,l.b),b=nogamma(o.opacity,l.opacity);return function(E){return o.r=s(E),o.g=f(E),o.b=m(E),o.opacity=b(E),o+""}}return a.gamma=r,a})(1);function interpolateNumber(r,e){return r=+r,e=+e,function(t){return r*(1-t)+e*t}}var reA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB=new RegExp(reA.source,"g");function zero(r){return function(){return r}}function one(r){return function(e){return r(e)+""}}function interpolateString(r,e){var t=reA.lastIndex=reB.lastIndex=0,a,o,l,s=-1,f=[],m=[];for(r=r+"",e=e+"";(a=reA.exec(r))&&(o=reB.exec(e));)(l=o.index)>t&&(l=e.slice(t,l),f[s]?f[s]+=l:f[++s]=l),(a=a[0])===(o=o[0])?f[s]?f[s]+=o:f[++s]=o:(f[++s]=null,m.push({i:s,x:interpolateNumber(a,o)})),t=reB.lastIndex;return t<e.length&&(l=e.slice(t),f[s]?f[s]+=l:f[++s]=l),f.length<2?m[0]?one(m[0].x):zero(e):(e=m.length,function(b){for(var E=0,M;E<e;++E)f[(M=m[E]).i]=M.x(b);return f.join("")})}var degrees=180/Math.PI,identity$1={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function decompose(r,e,t,a,o,l){var s,f,m;return(s=Math.sqrt(r*r+e*e))&&(r/=s,e/=s),(m=r*t+e*a)&&(t-=r*m,a-=e*m),(f=Math.sqrt(t*t+a*a))&&(t/=f,a/=f,m/=f),r*a<e*t&&(r=-r,e=-e,m=-m,s=-s),{translateX:o,translateY:l,rotate:Math.atan2(e,r)*degrees,skewX:Math.atan(m)*degrees,scaleX:s,scaleY:f}}var svgNode;function parseCss(r){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(r+"");return e.isIdentity?identity$1:decompose(e.a,e.b,e.c,e.d,e.e,e.f)}function parseSvg(r){return r==null||(svgNode||(svgNode=document.createElementNS("http://www.w3.org/2000/svg","g")),svgNode.setAttribute("transform",r),!(r=svgNode.transform.baseVal.consolidate()))?identity$1:(r=r.matrix,decompose(r.a,r.b,r.c,r.d,r.e,r.f))}function interpolateTransform(r,e,t,a){function o(b){return b.length?b.pop()+" ":""}function l(b,E,M,I,V,Z){if(b!==M||E!==I){var ee=V.push("translate(",null,e,null,t);Z.push({i:ee-4,x:interpolateNumber(b,M)},{i:ee-2,x:interpolateNumber(E,I)})}else(M||I)&&V.push("translate("+M+e+I+t)}function s(b,E,M,I){b!==E?(b-E>180?E+=360:E-b>180&&(b+=360),I.push({i:M.push(o(M)+"rotate(",null,a)-2,x:interpolateNumber(b,E)})):E&&M.push(o(M)+"rotate("+E+a)}function f(b,E,M,I){b!==E?I.push({i:M.push(o(M)+"skewX(",null,a)-2,x:interpolateNumber(b,E)}):E&&M.push(o(M)+"skewX("+E+a)}function m(b,E,M,I,V,Z){if(b!==M||E!==I){var ee=V.push(o(V)+"scale(",null,",",null,")");Z.push({i:ee-4,x:interpolateNumber(b,M)},{i:ee-2,x:interpolateNumber(E,I)})}else(M!==1||I!==1)&&V.push(o(V)+"scale("+M+","+I+")")}return function(b,E){var M=[],I=[];return b=r(b),E=r(E),l(b.translateX,b.translateY,E.translateX,E.translateY,M,I),s(b.rotate,E.rotate,M,I),f(b.skewX,E.skewX,M,I),m(b.scaleX,b.scaleY,E.scaleX,E.scaleY,M,I),b=E=null,function(V){for(var Z=-1,ee=I.length,le;++Z<ee;)M[(le=I[Z]).i]=le.x(V);return M.join("")}}}var interpolateTransformCss=interpolateTransform(parseCss,"px, ","px)","deg)"),interpolateTransformSvg=interpolateTransform(parseSvg,", ",")",")"),epsilon2=1e-12;function cosh(r){return((r=Math.exp(r))+1/r)/2}function sinh(r){return((r=Math.exp(r))-1/r)/2}function tanh(r){return((r=Math.exp(2*r))-1)/(r+1)}const interpolateZoom=(function r(e,t,a){function o(l,s){var f=l[0],m=l[1],b=l[2],E=s[0],M=s[1],I=s[2],V=E-f,Z=M-m,ee=V*V+Z*Z,le,K;if(ee<epsilon2)K=Math.log(I/b)/e,le=function(Ut){return[f+Ut*V,m+Ut*Z,b*Math.exp(e*Ut*K)]};else{var vt=Math.sqrt(ee),q=(I*I-b*b+a*ee)/(2*b*t*vt),Q=(I*I-b*b-a*ee)/(2*I*t*vt),wt=Math.log(Math.sqrt(q*q+1)-q),bt=Math.log(Math.sqrt(Q*Q+1)-Q);K=(bt-wt)/e,le=function(Ut){var it=Ut*K,zt=cosh(wt),Zt=b/(t*vt)*(zt*tanh(e*it+wt)-sinh(wt));return[f+Zt*V,m+Zt*Z,b*zt/cosh(e*it+wt)]}}return le.duration=K*1e3*e/Math.SQRT2,le}return o.rho=function(l){var s=Math.max(.001,+l),f=s*s,m=f*f;return r(s,f,m)},o})(Math.SQRT2,2,4);var frame=0,timeout$1=0,interval=0,pokeDelay=1e3,taskHead,taskTail,clockLast=0,clockNow=0,clockSkew=0,clock=typeof performance=="object"&&performance.now?performance:Date,setFrame=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(r){setTimeout(r,17)};function now(){return clockNow||(setFrame(clearNow),clockNow=clock.now()+clockSkew)}function clearNow(){clockNow=0}function Timer(){this._call=this._time=this._next=null}Timer.prototype=timer.prototype={constructor:Timer,restart:function(r,e,t){if(typeof r!="function")throw new TypeError("callback is not a function");t=(t==null?now():+t)+(e==null?0:+e),!this._next&&taskTail!==this&&(taskTail?taskTail._next=this:taskHead=this,taskTail=this),this._call=r,this._time=t,sleep()},stop:function(){this._call&&(this._call=null,this._time=1/0,sleep())}};function timer(r,e,t){var a=new Timer;return a.restart(r,e,t),a}function timerFlush(){now(),++frame;for(var r=taskHead,e;r;)(e=clockNow-r._time)>=0&&r._call.call(void 0,e),r=r._next;--frame}function wake(){clockNow=(clockLast=clock.now())+clockSkew,frame=timeout$1=0;try{timerFlush()}finally{frame=0,nap(),clockNow=0}}function poke(){var r=clock.now(),e=r-clockLast;e>pokeDelay&&(clockSkew-=e,clockLast=r)}function nap(){for(var r,e=taskHead,t,a=1/0;e;)e._call?(a>e._time&&(a=e._time),r=e,e=e._next):(t=e._next,e._next=null,e=r?r._next=t:taskHead=t);taskTail=r,sleep(a)}function sleep(r){if(!frame){timeout$1&&(timeout$1=clearTimeout(timeout$1));var e=r-clockNow;e>24?(r<1/0&&(timeout$1=setTimeout(wake,r-clock.now()-clockSkew)),interval&&(interval=clearInterval(interval))):(interval||(clockLast=clock.now(),interval=setInterval(poke,pokeDelay)),frame=1,setFrame(wake))}}function timeout(r,e,t){var a=new Timer;return e=e==null?0:+e,a.restart(o=>{a.stop(),r(o+e)},e,t),a}var emptyOn=dispatch("start","end","cancel","interrupt"),emptyTween=[],CREATED=0,SCHEDULED=1,STARTING=2,STARTED=3,RUNNING=4,ENDING=5,ENDED=6;function schedule(r,e,t,a,o,l){var s=r.__transition;if(!s)r.__transition={};else if(t in s)return;create(r,t,{name:e,index:a,group:o,on:emptyOn,tween:emptyTween,time:l.time,delay:l.delay,duration:l.duration,ease:l.ease,timer:null,state:CREATED})}function init(r,e){var t=get(r,e);if(t.state>CREATED)throw new Error("too late; already scheduled");return t}function set(r,e){var t=get(r,e);if(t.state>STARTED)throw new Error("too late; already running");return t}function get(r,e){var t=r.__transition;if(!t||!(t=t[e]))throw new Error("transition not found");return t}function create(r,e,t){var a=r.__transition,o;a[e]=t,t.timer=timer(l,0,t.time);function l(b){t.state=SCHEDULED,t.timer.restart(s,t.delay,t.time),t.delay<=b&&s(b-t.delay)}function s(b){var E,M,I,V;if(t.state!==SCHEDULED)return m();for(E in a)if(V=a[E],V.name===t.name){if(V.state===STARTED)return timeout(s);V.state===RUNNING?(V.state=ENDED,V.timer.stop(),V.on.call("interrupt",r,r.__data__,V.index,V.group),delete a[E]):+E<e&&(V.state=ENDED,V.timer.stop(),V.on.call("cancel",r,r.__data__,V.index,V.group),delete a[E])}if(timeout(function(){t.state===STARTED&&(t.state=RUNNING,t.timer.restart(f,t.delay,t.time),f(b))}),t.state=STARTING,t.on.call("start",r,r.__data__,t.index,t.group),t.state===STARTING){for(t.state=STARTED,o=new Array(I=t.tween.length),E=0,M=-1;E<I;++E)(V=t.tween[E].value.call(r,r.__data__,t.index,t.group))&&(o[++M]=V);o.length=M+1}}function f(b){for(var E=b<t.duration?t.ease.call(null,b/t.duration):(t.timer.restart(m),t.state=ENDING,1),M=-1,I=o.length;++M<I;)o[M].call(r,E);t.state===ENDING&&(t.on.call("end",r,r.__data__,t.index,t.group),m())}function m(){t.state=ENDED,t.timer.stop(),delete a[e];for(var b in a)return;delete r.__transition}}function interrupt(r,e){var t=r.__transition,a,o,l=!0,s;if(t){e=e==null?null:e+"";for(s in t){if((a=t[s]).name!==e){l=!1;continue}o=a.state>STARTING&&a.state<ENDING,a.state=ENDED,a.timer.stop(),a.on.call(o?"interrupt":"cancel",r,r.__data__,a.index,a.group),delete t[s]}l&&delete r.__transition}}function selection_interrupt(r){return this.each(function(){interrupt(this,r)})}function tweenRemove(r,e){var t,a;return function(){var o=set(this,r),l=o.tween;if(l!==t){a=t=l;for(var s=0,f=a.length;s<f;++s)if(a[s].name===e){a=a.slice(),a.splice(s,1);break}}o.tween=a}}function tweenFunction(r,e,t){var a,o;if(typeof t!="function")throw new Error;return function(){var l=set(this,r),s=l.tween;if(s!==a){o=(a=s).slice();for(var f={name:e,value:t},m=0,b=o.length;m<b;++m)if(o[m].name===e){o[m]=f;break}m===b&&o.push(f)}l.tween=o}}function transition_tween(r,e){var t=this._id;if(r+="",arguments.length<2){for(var a=get(this.node(),t).tween,o=0,l=a.length,s;o<l;++o)if((s=a[o]).name===r)return s.value;return null}return this.each((e==null?tweenRemove:tweenFunction)(t,r,e))}function tweenValue(r,e,t){var a=r._id;return r.each(function(){var o=set(this,a);(o.value||(o.value={}))[e]=t.apply(this,arguments)}),function(o){return get(o,a).value[e]}}function interpolate(r,e){var t;return(typeof e=="number"?interpolateNumber:e instanceof color?interpolateRgb:(t=color(e))?(e=t,interpolateRgb):interpolateString)(r,e)}function attrRemove(r){return function(){this.removeAttribute(r)}}function attrRemoveNS(r){return function(){this.removeAttributeNS(r.space,r.local)}}function attrConstant(r,e,t){var a,o=t+"",l;return function(){var s=this.getAttribute(r);return s===o?null:s===a?l:l=e(a=s,t)}}function attrConstantNS(r,e,t){var a,o=t+"",l;return function(){var s=this.getAttributeNS(r.space,r.local);return s===o?null:s===a?l:l=e(a=s,t)}}function attrFunction(r,e,t){var a,o,l;return function(){var s,f=t(this),m;return f==null?void this.removeAttribute(r):(s=this.getAttribute(r),m=f+"",s===m?null:s===a&&m===o?l:(o=m,l=e(a=s,f)))}}function attrFunctionNS(r,e,t){var a,o,l;return function(){var s,f=t(this),m;return f==null?void this.removeAttributeNS(r.space,r.local):(s=this.getAttributeNS(r.space,r.local),m=f+"",s===m?null:s===a&&m===o?l:(o=m,l=e(a=s,f)))}}function transition_attr(r,e){var t=namespace(r),a=t==="transform"?interpolateTransformSvg:interpolate;return this.attrTween(r,typeof e=="function"?(t.local?attrFunctionNS:attrFunction)(t,a,tweenValue(this,"attr."+r,e)):e==null?(t.local?attrRemoveNS:attrRemove)(t):(t.local?attrConstantNS:attrConstant)(t,a,e))}function attrInterpolate(r,e){return function(t){this.setAttribute(r,e.call(this,t))}}function attrInterpolateNS(r,e){return function(t){this.setAttributeNS(r.space,r.local,e.call(this,t))}}function attrTweenNS(r,e){var t,a;function o(){var l=e.apply(this,arguments);return l!==a&&(t=(a=l)&&attrInterpolateNS(r,l)),t}return o._value=e,o}function attrTween(r,e){var t,a;function o(){var l=e.apply(this,arguments);return l!==a&&(t=(a=l)&&attrInterpolate(r,l)),t}return o._value=e,o}function transition_attrTween(r,e){var t="attr."+r;if(arguments.length<2)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;var a=namespace(r);return this.tween(t,(a.local?attrTweenNS:attrTween)(a,e))}function delayFunction(r,e){return function(){init(this,r).delay=+e.apply(this,arguments)}}function delayConstant(r,e){return e=+e,function(){init(this,r).delay=e}}function transition_delay(r){var e=this._id;return arguments.length?this.each((typeof r=="function"?delayFunction:delayConstant)(e,r)):get(this.node(),e).delay}function durationFunction(r,e){return function(){set(this,r).duration=+e.apply(this,arguments)}}function durationConstant(r,e){return e=+e,function(){set(this,r).duration=e}}function transition_duration(r){var e=this._id;return arguments.length?this.each((typeof r=="function"?durationFunction:durationConstant)(e,r)):get(this.node(),e).duration}function easeConstant(r,e){if(typeof e!="function")throw new Error;return function(){set(this,r).ease=e}}function transition_ease(r){var e=this._id;return arguments.length?this.each(easeConstant(e,r)):get(this.node(),e).ease}function easeVarying(r,e){return function(){var t=e.apply(this,arguments);if(typeof t!="function")throw new Error;set(this,r).ease=t}}function transition_easeVarying(r){if(typeof r!="function")throw new Error;return this.each(easeVarying(this._id,r))}function transition_filter(r){typeof r!="function"&&(r=matcher(r));for(var e=this._groups,t=e.length,a=new Array(t),o=0;o<t;++o)for(var l=e[o],s=l.length,f=a[o]=[],m,b=0;b<s;++b)(m=l[b])&&r.call(m,m.__data__,b,l)&&f.push(m);return new Transition(a,this._parents,this._name,this._id)}function transition_merge(r){if(r._id!==this._id)throw new Error;for(var e=this._groups,t=r._groups,a=e.length,o=t.length,l=Math.min(a,o),s=new Array(a),f=0;f<l;++f)for(var m=e[f],b=t[f],E=m.length,M=s[f]=new Array(E),I,V=0;V<E;++V)(I=m[V]||b[V])&&(M[V]=I);for(;f<a;++f)s[f]=e[f];return new Transition(s,this._parents,this._name,this._id)}function start(r){return(r+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||e==="start"})}function onFunction(r,e,t){var a,o,l=start(e)?init:set;return function(){var s=l(this,r),f=s.on;f!==a&&(o=(a=f).copy()).on(e,t),s.on=o}}function transition_on(r,e){var t=this._id;return arguments.length<2?get(this.node(),t).on.on(r):this.each(onFunction(t,r,e))}function removeFunction(r){return function(){var e=this.parentNode;for(var t in this.__transition)if(+t!==r)return;e&&e.removeChild(this)}}function transition_remove(){return this.on("end.remove",removeFunction(this._id))}function transition_select(r){var e=this._name,t=this._id;typeof r!="function"&&(r=selector$h(r));for(var a=this._groups,o=a.length,l=new Array(o),s=0;s<o;++s)for(var f=a[s],m=f.length,b=l[s]=new Array(m),E,M,I=0;I<m;++I)(E=f[I])&&(M=r.call(E,E.__data__,I,f))&&("__data__"in E&&(M.__data__=E.__data__),b[I]=M,schedule(b[I],e,t,I,b,get(E,t)));return new Transition(l,this._parents,e,t)}function transition_selectAll(r){var e=this._name,t=this._id;typeof r!="function"&&(r=selectorAll(r));for(var a=this._groups,o=a.length,l=[],s=[],f=0;f<o;++f)for(var m=a[f],b=m.length,E,M=0;M<b;++M)if(E=m[M]){for(var I=r.call(E,E.__data__,M,m),V,Z=get(E,t),ee=0,le=I.length;ee<le;++ee)(V=I[ee])&&schedule(V,e,t,ee,I,Z);l.push(I),s.push(E)}return new Transition(l,s,e,t)}var Selection=selection.prototype.constructor;function transition_selection(){return new Selection(this._groups,this._parents)}function styleNull(r,e){var t,a,o;return function(){var l=styleValue(this,r),s=(this.style.removeProperty(r),styleValue(this,r));return l===s?null:l===t&&s===a?o:o=e(t=l,a=s)}}function styleRemove(r){return function(){this.style.removeProperty(r)}}function styleConstant(r,e,t){var a,o=t+"",l;return function(){var s=styleValue(this,r);return s===o?null:s===a?l:l=e(a=s,t)}}function styleFunction(r,e,t){var a,o,l;return function(){var s=styleValue(this,r),f=t(this),m=f+"";return f==null&&(m=f=(this.style.removeProperty(r),styleValue(this,r))),s===m?null:s===a&&m===o?l:(o=m,l=e(a=s,f))}}function styleMaybeRemove(r,e){var t,a,o,l="style."+e,s="end."+l,f;return function(){var m=set(this,r),b=m.on,E=m.value[l]==null?f||(f=styleRemove(e)):void 0;(b!==t||o!==E)&&(a=(t=b).copy()).on(s,o=E),m.on=a}}function transition_style(r,e,t){var a=(r+="")=="transform"?interpolateTransformCss:interpolate;return e==null?this.styleTween(r,styleNull(r,a)).on("end.style."+r,styleRemove(r)):typeof e=="function"?this.styleTween(r,styleFunction(r,a,tweenValue(this,"style."+r,e))).each(styleMaybeRemove(this._id,r)):this.styleTween(r,styleConstant(r,a,e),t).on("end.style."+r,null)}function styleInterpolate(r,e,t){return function(a){this.style.setProperty(r,e.call(this,a),t)}}function styleTween(r,e,t){var a,o;function l(){var s=e.apply(this,arguments);return s!==o&&(a=(o=s)&&styleInterpolate(r,s,t)),a}return l._value=e,l}function transition_styleTween(r,e,t){var a="style."+(r+="");if(arguments.length<2)return(a=this.tween(a))&&a._value;if(e==null)return this.tween(a,null);if(typeof e!="function")throw new Error;return this.tween(a,styleTween(r,e,t??""))}function textConstant(r){return function(){this.textContent=r}}function textFunction(r){return function(){var e=r(this);this.textContent=e??""}}function transition_text(r){return this.tween("text",typeof r=="function"?textFunction(tweenValue(this,"text",r)):textConstant(r==null?"":r+""))}function textInterpolate(r){return function(e){this.textContent=r.call(this,e)}}function textTween(r){var e,t;function a(){var o=r.apply(this,arguments);return o!==t&&(e=(t=o)&&textInterpolate(o)),e}return a._value=r,a}function transition_textTween(r){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(r==null)return this.tween(e,null);if(typeof r!="function")throw new Error;return this.tween(e,textTween(r))}function transition_transition(){for(var r=this._name,e=this._id,t=newId(),a=this._groups,o=a.length,l=0;l<o;++l)for(var s=a[l],f=s.length,m,b=0;b<f;++b)if(m=s[b]){var E=get(m,e);schedule(m,r,t,b,s,{time:E.time+E.delay+E.duration,delay:0,duration:E.duration,ease:E.ease})}return new Transition(a,this._parents,r,t)}function transition_end(){var r,e,t=this,a=t._id,o=t.size();return new Promise(function(l,s){var f={value:s},m={value:function(){--o===0&&l()}};t.each(function(){var b=set(this,a),E=b.on;E!==r&&(e=(r=E).copy(),e._.cancel.push(f),e._.interrupt.push(f),e._.end.push(m)),b.on=e}),o===0&&l()})}var id$1=0;function Transition(r,e,t,a){this._groups=r,this._parents=e,this._name=t,this._id=a}function newId(){return++id$1}var selection_prototype=selection.prototype;Transition.prototype={constructor:Transition,select:transition_select,selectAll:transition_selectAll,selectChild:selection_prototype.selectChild,selectChildren:selection_prototype.selectChildren,filter:transition_filter,merge:transition_merge,selection:transition_selection,transition:transition_transition,call:selection_prototype.call,nodes:selection_prototype.nodes,node:selection_prototype.node,size:selection_prototype.size,empty:selection_prototype.empty,each:selection_prototype.each,on:transition_on,attr:transition_attr,attrTween:transition_attrTween,style:transition_style,styleTween:transition_styleTween,text:transition_text,textTween:transition_textTween,remove:transition_remove,tween:transition_tween,delay:transition_delay,duration:transition_duration,ease:transition_ease,easeVarying:transition_easeVarying,end:transition_end,[Symbol.iterator]:selection_prototype[Symbol.iterator]};function cubicInOut(r){return((r*=2)<=1?r*r*r:(r-=2)*r*r+2)/2}var defaultTiming={time:null,delay:0,duration:250,ease:cubicInOut};function inherit(r,e){for(var t;!(t=r.__transition)||!(t=t[e]);)if(!(r=r.parentNode))throw new Error(`transition ${e} not found`);return t}function selection_transition(r){var e,t;r instanceof Transition?(e=r._id,r=r._name):(e=newId(),(t=defaultTiming).time=now(),r=r==null?null:r+"");for(var a=this._groups,o=a.length,l=0;l<o;++l)for(var s=a[l],f=s.length,m,b=0;b<f;++b)(m=s[b])&&schedule(m,r,e,b,s,t||inherit(m,e));return new Transition(a,this._parents,r,e)}selection.prototype.interrupt=selection_interrupt;selection.prototype.transition=selection_transition;const constant=r=>()=>r;function ZoomEvent(r,{sourceEvent:e,target:t,transform:a,dispatch:o}){Object.defineProperties(this,{type:{value:r,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:t,enumerable:!0,configurable:!0},transform:{value:a,enumerable:!0,configurable:!0},_:{value:o}})}function Transform(r,e,t){this.k=r,this.x=e,this.y=t}Transform.prototype={constructor:Transform,scale:function(r){return r===1?this:new Transform(this.k*r,this.x,this.y)},translate:function(r,e){return r===0&e===0?this:new Transform(this.k,this.x+this.k*r,this.y+this.k*e)},apply:function(r){return[r[0]*this.k+this.x,r[1]*this.k+this.y]},applyX:function(r){return r*this.k+this.x},applyY:function(r){return r*this.k+this.y},invert:function(r){return[(r[0]-this.x)/this.k,(r[1]-this.y)/this.k]},invertX:function(r){return(r-this.x)/this.k},invertY:function(r){return(r-this.y)/this.k},rescaleX:function(r){return r.copy().domain(r.range().map(this.invertX,this).map(r.invert,r))},rescaleY:function(r){return r.copy().domain(r.range().map(this.invertY,this).map(r.invert,r))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var identity=new Transform(1,0,0);Transform.prototype;function nopropagation(r){r.stopImmediatePropagation()}function noevent(r){r.preventDefault(),r.stopImmediatePropagation()}function defaultFilter(r){return(!r.ctrlKey||r.type==="wheel")&&!r.button}function defaultExtent(){var r=this;return r instanceof SVGElement?(r=r.ownerSVGElement||r,r.hasAttribute("viewBox")?(r=r.viewBox.baseVal,[[r.x,r.y],[r.x+r.width,r.y+r.height]]):[[0,0],[r.width.baseVal.value,r.height.baseVal.value]]):[[0,0],[r.clientWidth,r.clientHeight]]}function defaultTransform(){return this.__zoom||identity}function defaultWheelDelta(r){return-r.deltaY*(r.deltaMode===1?.05:r.deltaMode?1:.002)*(r.ctrlKey?10:1)}function defaultTouchable(){return navigator.maxTouchPoints||"ontouchstart"in this}function defaultConstrain(r,e,t){var a=r.invertX(e[0][0])-t[0][0],o=r.invertX(e[1][0])-t[1][0],l=r.invertY(e[0][1])-t[0][1],s=r.invertY(e[1][1])-t[1][1];return r.translate(o>a?(a+o)/2:Math.min(0,a)||Math.max(0,o),s>l?(l+s)/2:Math.min(0,l)||Math.max(0,s))}function zoom(){var r=defaultFilter,e=defaultExtent,t=defaultConstrain,a=defaultWheelDelta,o=defaultTouchable,l=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],f=250,m=interpolateZoom,b=dispatch("start","zoom","end"),E,M,I,V=500,Z=150,ee=0,le=10;function K(sa){sa.property("__zoom",defaultTransform).on("wheel.zoom",it,{passive:!1}).on("mousedown.zoom",zt).on("dblclick.zoom",Zt).filter(o).on("touchstart.zoom",Mn).on("touchmove.zoom",kp).on("touchend.zoom touchcancel.zoom",zp).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}K.transform=function(sa,qo,ae,wp){var Cp=sa.selection?sa.selection():sa;Cp.property("__zoom",defaultTransform),sa!==Cp?wt(sa,qo,ae,wp):Cp.interrupt().each(function(){bt(this,arguments).event(wp).start().zoom(null,typeof qo=="function"?qo.apply(this,arguments):qo).end()})},K.scaleBy=function(sa,qo,ae,wp){K.scaleTo(sa,function(){var Cp=this.__zoom.k,Kt=typeof qo=="function"?qo.apply(this,arguments):qo;return Cp*Kt},ae,wp)},K.scaleTo=function(sa,qo,ae,wp){K.transform(sa,function(){var Cp=e.apply(this,arguments),Kt=this.__zoom,h0=ae==null?Q(Cp):typeof ae=="function"?ae.apply(this,arguments):ae,Pp=Kt.invert(h0),d0=typeof qo=="function"?qo.apply(this,arguments):qo;return t(q(vt(Kt,d0),h0,Pp),Cp,s)},ae,wp)},K.translateBy=function(sa,qo,ae,wp){K.transform(sa,function(){return t(this.__zoom.translate(typeof qo=="function"?qo.apply(this,arguments):qo,typeof ae=="function"?ae.apply(this,arguments):ae),e.apply(this,arguments),s)},null,wp)},K.translateTo=function(sa,qo,ae,wp,Cp){K.transform(sa,function(){var Kt=e.apply(this,arguments),h0=this.__zoom,Pp=wp==null?Q(Kt):typeof wp=="function"?wp.apply(this,arguments):wp;return t(identity.translate(Pp[0],Pp[1]).scale(h0.k).translate(typeof qo=="function"?-qo.apply(this,arguments):-qo,typeof ae=="function"?-ae.apply(this,arguments):-ae),Kt,s)},wp,Cp)};function vt(sa,qo){return qo=Math.max(l[0],Math.min(l[1],qo)),qo===sa.k?sa:new Transform(qo,sa.x,sa.y)}function q(sa,qo,ae){var wp=qo[0]-ae[0]*sa.k,Cp=qo[1]-ae[1]*sa.k;return wp===sa.x&&Cp===sa.y?sa:new Transform(sa.k,wp,Cp)}function Q(sa){return[(+sa[0][0]+ +sa[1][0])/2,(+sa[0][1]+ +sa[1][1])/2]}function wt(sa,qo,ae,wp){sa.on("start.zoom",function(){bt(this,arguments).event(wp).start()}).on("interrupt.zoom end.zoom",function(){bt(this,arguments).event(wp).end()}).tween("zoom",function(){var Cp=this,Kt=arguments,h0=bt(Cp,Kt).event(wp),Pp=e.apply(Cp,Kt),d0=ae==null?Q(Pp):typeof ae=="function"?ae.apply(Cp,Kt):ae,x0=Math.max(Pp[1][0]-Pp[0][0],Pp[1][1]-Pp[0][1]),Dp=Cp.__zoom,c0=typeof qo=="function"?qo.apply(Cp,Kt):qo,u0=m(Dp.invert(d0).concat(x0/Dp.k),c0.invert(d0).concat(x0/c0.k));return function(y0){if(y0===1)y0=c0;else{var M0=u0(y0),sm=x0/M0[2];y0=new Transform(sm,d0[0]-M0[0]*sm,d0[1]-M0[1]*sm)}h0.zoom(null,y0)}})}function bt(sa,qo,ae){return!ae&&sa.__zooming||new Ut(sa,qo)}function Ut(sa,qo){this.that=sa,this.args=qo,this.active=0,this.sourceEvent=null,this.extent=e.apply(sa,qo),this.taps=0}Ut.prototype={event:function(sa){return sa&&(this.sourceEvent=sa),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(sa,qo){return this.mouse&&sa!=="mouse"&&(this.mouse[1]=qo.invert(this.mouse[0])),this.touch0&&sa!=="touch"&&(this.touch0[1]=qo.invert(this.touch0[0])),this.touch1&&sa!=="touch"&&(this.touch1[1]=qo.invert(this.touch1[0])),this.that.__zoom=qo,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(sa){var qo=select(this.that).datum();b.call(sa,this.that,new ZoomEvent(sa,{sourceEvent:this.sourceEvent,target:K,transform:this.that.__zoom,dispatch:b}),qo)}};function it(sa,...qo){if(!r.apply(this,arguments))return;var ae=bt(this,qo).event(sa),wp=this.__zoom,Cp=Math.max(l[0],Math.min(l[1],wp.k*Math.pow(2,a.apply(this,arguments)))),Kt=pointer(sa);if(ae.wheel)(ae.mouse[0][0]!==Kt[0]||ae.mouse[0][1]!==Kt[1])&&(ae.mouse[1]=wp.invert(ae.mouse[0]=Kt)),clearTimeout(ae.wheel);else{if(wp.k===Cp)return;ae.mouse=[Kt,wp.invert(Kt)],interrupt(this),ae.start()}noevent(sa),ae.wheel=setTimeout(h0,Z),ae.zoom("mouse",t(q(vt(wp,Cp),ae.mouse[0],ae.mouse[1]),ae.extent,s));function h0(){ae.wheel=null,ae.end()}}function zt(sa,...qo){if(I||!r.apply(this,arguments))return;var ae=sa.currentTarget,wp=bt(this,qo,!0).event(sa),Cp=select(sa.view).on("mousemove.zoom",d0,!0).on("mouseup.zoom",x0,!0),Kt=pointer(sa,ae),h0=sa.clientX,Pp=sa.clientY;dragDisable(sa.view),nopropagation(sa),wp.mouse=[Kt,this.__zoom.invert(Kt)],interrupt(this),wp.start();function d0(Dp){if(noevent(Dp),!wp.moved){var c0=Dp.clientX-h0,u0=Dp.clientY-Pp;wp.moved=c0*c0+u0*u0>ee}wp.event(Dp).zoom("mouse",t(q(wp.that.__zoom,wp.mouse[0]=pointer(Dp,ae),wp.mouse[1]),wp.extent,s))}function x0(Dp){Cp.on("mousemove.zoom mouseup.zoom",null),yesdrag(Dp.view,wp.moved),noevent(Dp),wp.event(Dp).end()}}function Zt(sa,...qo){if(r.apply(this,arguments)){var ae=this.__zoom,wp=pointer(sa.changedTouches?sa.changedTouches[0]:sa,this),Cp=ae.invert(wp),Kt=ae.k*(sa.shiftKey?.5:2),h0=t(q(vt(ae,Kt),wp,Cp),e.apply(this,qo),s);noevent(sa),f>0?select(this).transition().duration(f).call(wt,h0,wp,sa):select(this).call(K.transform,h0,wp,sa)}}function Mn(sa,...qo){if(r.apply(this,arguments)){var ae=sa.touches,wp=ae.length,Cp=bt(this,qo,sa.changedTouches.length===wp).event(sa),Kt,h0,Pp,d0;for(nopropagation(sa),h0=0;h0<wp;++h0)Pp=ae[h0],d0=pointer(Pp,this),d0=[d0,this.__zoom.invert(d0),Pp.identifier],Cp.touch0?!Cp.touch1&&Cp.touch0[2]!==d0[2]&&(Cp.touch1=d0,Cp.taps=0):(Cp.touch0=d0,Kt=!0,Cp.taps=1+!!E);E&&(E=clearTimeout(E)),Kt&&(Cp.taps<2&&(M=d0[0],E=setTimeout(function(){E=null},V)),interrupt(this),Cp.start())}}function kp(sa,...qo){if(this.__zooming){var ae=bt(this,qo).event(sa),wp=sa.changedTouches,Cp=wp.length,Kt,h0,Pp,d0;for(noevent(sa),Kt=0;Kt<Cp;++Kt)h0=wp[Kt],Pp=pointer(h0,this),ae.touch0&&ae.touch0[2]===h0.identifier?ae.touch0[0]=Pp:ae.touch1&&ae.touch1[2]===h0.identifier&&(ae.touch1[0]=Pp);if(h0=ae.that.__zoom,ae.touch1){var x0=ae.touch0[0],Dp=ae.touch0[1],c0=ae.touch1[0],u0=ae.touch1[1],y0=(y0=c0[0]-x0[0])*y0+(y0=c0[1]-x0[1])*y0,M0=(M0=u0[0]-Dp[0])*M0+(M0=u0[1]-Dp[1])*M0;h0=vt(h0,Math.sqrt(y0/M0)),Pp=[(x0[0]+c0[0])/2,(x0[1]+c0[1])/2],d0=[(Dp[0]+u0[0])/2,(Dp[1]+u0[1])/2]}else if(ae.touch0)Pp=ae.touch0[0],d0=ae.touch0[1];else return;ae.zoom("touch",t(q(h0,Pp,d0),ae.extent,s))}}function zp(sa,...qo){if(this.__zooming){var ae=bt(this,qo).event(sa),wp=sa.changedTouches,Cp=wp.length,Kt,h0;for(nopropagation(sa),I&&clearTimeout(I),I=setTimeout(function(){I=null},V),Kt=0;Kt<Cp;++Kt)h0=wp[Kt],ae.touch0&&ae.touch0[2]===h0.identifier?delete ae.touch0:ae.touch1&&ae.touch1[2]===h0.identifier&&delete ae.touch1;if(ae.touch1&&!ae.touch0&&(ae.touch0=ae.touch1,delete ae.touch1),ae.touch0)ae.touch0[1]=this.__zoom.invert(ae.touch0[0]);else if(ae.end(),ae.taps===2&&(h0=pointer(h0,this),Math.hypot(M[0]-h0[0],M[1]-h0[1])<le)){var Pp=select(this).on("dblclick.zoom");Pp&&Pp.apply(this,arguments)}}}return K.wheelDelta=function(sa){return arguments.length?(a=typeof sa=="function"?sa:constant(+sa),K):a},K.filter=function(sa){return arguments.length?(r=typeof sa=="function"?sa:constant(!!sa),K):r},K.touchable=function(sa){return arguments.length?(o=typeof sa=="function"?sa:constant(!!sa),K):o},K.extent=function(sa){return arguments.length?(e=typeof sa=="function"?sa:constant([[+sa[0][0],+sa[0][1]],[+sa[1][0],+sa[1][1]]]),K):e},K.scaleExtent=function(sa){return arguments.length?(l[0]=+sa[0],l[1]=+sa[1],K):[l[0],l[1]]},K.translateExtent=function(sa){return arguments.length?(s[0][0]=+sa[0][0],s[1][0]=+sa[1][0],s[0][1]=+sa[0][1],s[1][1]=+sa[1][1],K):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},K.constrain=function(sa){return arguments.length?(t=sa,K):t},K.duration=function(sa){return arguments.length?(f=+sa,K):f},K.interpolate=function(sa){return arguments.length?(m=sa,K):m},K.on=function(){var sa=b.on.apply(b,arguments);return sa===b?K:sa},K.clickDistance=function(sa){return arguments.length?(ee=(sa=+sa)*sa,K):Math.sqrt(ee)},K.tapDistance=function(sa){return arguments.length?(le=+sa,K):le},K}const StoreContext=reactExports.createContext(null),Provider$1=StoreContext.Provider,errorMessages={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:r=>`Node type "${r}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:r=>`The old edge with id=${r} does not exist.`,error009:r=>`Marker type "${r}" doesn't exist.`,error008:(r,e)=>`Couldn't create edge for ${r?"target":"source"} handle id: "${r?e.targetHandle:e.sourceHandle}", edge id: ${e.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:r=>`Edge type "${r}" not found. Using fallback type "default".`,error012:r=>`Node with id "${r}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},zustandErrorMessage=errorMessages.error001();function useStore$1(r,e){const t=reactExports.useContext(StoreContext);if(t===null)throw new Error(zustandErrorMessage);return useStoreWithEqualityFn(t,r,e)}const useStoreApi=()=>{const r=reactExports.useContext(StoreContext);if(r===null)throw new Error(zustandErrorMessage);return reactExports.useMemo(()=>({getState:r.getState,setState:r.setState,subscribe:r.subscribe,destroy:r.destroy}),[r])},selector$g=r=>r.userSelectionActive?"none":"all";function Panel({position:r,children:e,className:t,style:a,...o}){const l=useStore$1(selector$g),s=`${r}`.split("-");return React.createElement("div",{className:cc$1(["react-flow__panel",t,...s]),style:{...a,pointerEvents:l},...o},e)}function Attribution({proOptions:r,position:e="bottom-right"}){return r?.hideAttribution?null:React.createElement(Panel,{position:e,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},React.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const EdgeText=({x:r,y:e,label:t,labelStyle:a={},labelShowBg:o=!0,labelBgStyle:l={},labelBgPadding:s=[2,4],labelBgBorderRadius:f=2,children:m,className:b,...E})=>{const M=reactExports.useRef(null),[I,V]=reactExports.useState({x:0,y:0,width:0,height:0}),Z=cc$1(["react-flow__edge-textwrapper",b]);return reactExports.useEffect(()=>{if(M.current){const ee=M.current.getBBox();V({x:ee.x,y:ee.y,width:ee.width,height:ee.height})}},[t]),typeof t>"u"||!t?null:React.createElement("g",{transform:`translate(${r-I.width/2} ${e-I.height/2})`,className:Z,visibility:I.width?"visible":"hidden",...E},o&&React.createElement("rect",{width:I.width+2*s[0],x:-s[0],y:-s[1],height:I.height+2*s[1],className:"react-flow__edge-textbg",style:l,rx:f,ry:f}),React.createElement("text",{className:"react-flow__edge-text",y:I.height/2,dy:"0.3em",ref:M,style:a},t),m)};var EdgeText$1=reactExports.memo(EdgeText);const getDimensions=r=>({width:r.offsetWidth,height:r.offsetHeight}),clamp=(r,e=0,t=1)=>Math.min(Math.max(r,e),t),clampPosition=(r={x:0,y:0},e)=>({x:clamp(r.x,e[0][0],e[1][0]),y:clamp(r.y,e[0][1],e[1][1])}),calcAutoPanVelocity=(r,e,t)=>r<e?clamp(Math.abs(r-e),1,50)/50:r>t?-clamp(Math.abs(r-t),1,50)/50:0,calcAutoPan=(r,e)=>{const t=calcAutoPanVelocity(r.x,35,e.width-35)*20,a=calcAutoPanVelocity(r.y,35,e.height-35)*20;return[t,a]},getHostForElement=r=>r.getRootNode?.()||window?.document,getBoundsOfBoxes=(r,e)=>({x:Math.min(r.x,e.x),y:Math.min(r.y,e.y),x2:Math.max(r.x2,e.x2),y2:Math.max(r.y2,e.y2)}),rectToBox=({x:r,y:e,width:t,height:a})=>({x:r,y:e,x2:r+t,y2:e+a}),boxToRect=({x:r,y:e,x2:t,y2:a})=>({x:r,y:e,width:t-r,height:a-e}),nodeToRect=r=>({...r.positionAbsolute||{x:0,y:0},width:r.width||0,height:r.height||0}),getOverlappingArea=(r,e)=>{const t=Math.max(0,Math.min(r.x+r.width,e.x+e.width)-Math.max(r.x,e.x)),a=Math.max(0,Math.min(r.y+r.height,e.y+e.height)-Math.max(r.y,e.y));return Math.ceil(t*a)},isRectObject=r=>isNumeric(r.width)&&isNumeric(r.height)&&isNumeric(r.x)&&isNumeric(r.y),isNumeric=r=>!isNaN(r)&&isFinite(r),internalsSymbol=Symbol.for("internals"),elementSelectionKeys=["Enter"," ","Escape"],devWarn=(r,e)=>{},isReactKeyboardEvent=r=>"nativeEvent"in r;function isInputDOMNode(r){const t=(isReactKeyboardEvent(r)?r.nativeEvent:r).composedPath?.()?.[0]||r.target;return["INPUT","SELECT","TEXTAREA"].includes(t?.nodeName)||t?.hasAttribute("contenteditable")||!!t?.closest(".nokey")}const isMouseEvent=r=>"clientX"in r,getEventPosition=(r,e)=>{const t=isMouseEvent(r),a=t?r.clientX:r.touches?.[0].clientX,o=t?r.clientY:r.touches?.[0].clientY;return{x:a-(e?.left??0),y:o-(e?.top??0)}},isMacOs=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0,BaseEdge=({id:r,path:e,labelX:t,labelY:a,label:o,labelStyle:l,labelShowBg:s,labelBgStyle:f,labelBgPadding:m,labelBgBorderRadius:b,style:E,markerEnd:M,markerStart:I,interactionWidth:V=20})=>React.createElement(React.Fragment,null,React.createElement("path",{id:r,style:E,d:e,fill:"none",className:"react-flow__edge-path",markerEnd:M,markerStart:I}),V&&React.createElement("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:V,className:"react-flow__edge-interaction"}),o&&isNumeric(t)&&isNumeric(a)?React.createElement(EdgeText$1,{x:t,y:a,label:o,labelStyle:l,labelShowBg:s,labelBgStyle:f,labelBgPadding:m,labelBgBorderRadius:b}):null);BaseEdge.displayName="BaseEdge";function getMouseHandler$1(r,e,t){return t===void 0?t:a=>{const o=e().edges.find(l=>l.id===r);o&&t(a,{...o})}}function getEdgeCenter({sourceX:r,sourceY:e,targetX:t,targetY:a}){const o=Math.abs(t-r)/2,l=t<r?t+o:t-o,s=Math.abs(a-e)/2,f=a<e?a+s:a-s;return[l,f,o,s]}function getBezierEdgeCenter({sourceX:r,sourceY:e,targetX:t,targetY:a,sourceControlX:o,sourceControlY:l,targetControlX:s,targetControlY:f}){const m=r*.125+o*.375+s*.375+t*.125,b=e*.125+l*.375+f*.375+a*.125,E=Math.abs(m-r),M=Math.abs(b-e);return[m,b,E,M]}var ConnectionMode;(function(r){r.Strict="strict",r.Loose="loose"})(ConnectionMode||(ConnectionMode={}));var PanOnScrollMode;(function(r){r.Free="free",r.Vertical="vertical",r.Horizontal="horizontal"})(PanOnScrollMode||(PanOnScrollMode={}));var SelectionMode;(function(r){r.Partial="partial",r.Full="full"})(SelectionMode||(SelectionMode={}));var ConnectionLineType;(function(r){r.Bezier="default",r.Straight="straight",r.Step="step",r.SmoothStep="smoothstep",r.SimpleBezier="simplebezier"})(ConnectionLineType||(ConnectionLineType={}));var MarkerType;(function(r){r.Arrow="arrow",r.ArrowClosed="arrowclosed"})(MarkerType||(MarkerType={}));var Position;(function(r){r.Left="left",r.Top="top",r.Right="right",r.Bottom="bottom"})(Position||(Position={}));function getControl({pos:r,x1:e,y1:t,x2:a,y2:o}){return r===Position.Left||r===Position.Right?[.5*(e+a),t]:[e,.5*(t+o)]}function getSimpleBezierPath({sourceX:r,sourceY:e,sourcePosition:t=Position.Bottom,targetX:a,targetY:o,targetPosition:l=Position.Top}){const[s,f]=getControl({pos:t,x1:r,y1:e,x2:a,y2:o}),[m,b]=getControl({pos:l,x1:a,y1:o,x2:r,y2:e}),[E,M,I,V]=getBezierEdgeCenter({sourceX:r,sourceY:e,targetX:a,targetY:o,sourceControlX:s,sourceControlY:f,targetControlX:m,targetControlY:b});return[`M${r},${e} C${s},${f} ${m},${b} ${a},${o}`,E,M,I,V]}const SimpleBezierEdge=reactExports.memo(({sourceX:r,sourceY:e,targetX:t,targetY:a,sourcePosition:o=Position.Bottom,targetPosition:l=Position.Top,label:s,labelStyle:f,labelShowBg:m,labelBgStyle:b,labelBgPadding:E,labelBgBorderRadius:M,style:I,markerEnd:V,markerStart:Z,interactionWidth:ee})=>{const[le,K,vt]=getSimpleBezierPath({sourceX:r,sourceY:e,sourcePosition:o,targetX:t,targetY:a,targetPosition:l});return React.createElement(BaseEdge,{path:le,labelX:K,labelY:vt,label:s,labelStyle:f,labelShowBg:m,labelBgStyle:b,labelBgPadding:E,labelBgBorderRadius:M,style:I,markerEnd:V,markerStart:Z,interactionWidth:ee})});SimpleBezierEdge.displayName="SimpleBezierEdge";const handleDirections={[Position.Left]:{x:-1,y:0},[Position.Right]:{x:1,y:0},[Position.Top]:{x:0,y:-1},[Position.Bottom]:{x:0,y:1}},getDirection=({source:r,sourcePosition:e=Position.Bottom,target:t})=>e===Position.Left||e===Position.Right?r.x<t.x?{x:1,y:0}:{x:-1,y:0}:r.y<t.y?{x:0,y:1}:{x:0,y:-1},distance=(r,e)=>Math.sqrt(Math.pow(e.x-r.x,2)+Math.pow(e.y-r.y,2));function getPoints({source:r,sourcePosition:e=Position.Bottom,target:t,targetPosition:a=Position.Top,center:o,offset:l}){const s=handleDirections[e],f=handleDirections[a],m={x:r.x+s.x*l,y:r.y+s.y*l},b={x:t.x+f.x*l,y:t.y+f.y*l},E=getDirection({source:m,sourcePosition:e,target:b}),M=E.x!==0?"x":"y",I=E[M];let V=[],Z,ee;const le={x:0,y:0},K={x:0,y:0},[vt,q,Q,wt]=getEdgeCenter({sourceX:r.x,sourceY:r.y,targetX:t.x,targetY:t.y});if(s[M]*f[M]===-1){Z=o.x??vt,ee=o.y??q;const Ut=[{x:Z,y:m.y},{x:Z,y:b.y}],it=[{x:m.x,y:ee},{x:b.x,y:ee}];s[M]===I?V=M==="x"?Ut:it:V=M==="x"?it:Ut}else{const Ut=[{x:m.x,y:b.y}],it=[{x:b.x,y:m.y}];if(M==="x"?V=s.x===I?it:Ut:V=s.y===I?Ut:it,e===a){const zp=Math.abs(r[M]-t[M]);if(zp<=l){const sa=Math.min(l-1,l-zp);s[M]===I?le[M]=(m[M]>r[M]?-1:1)*sa:K[M]=(b[M]>t[M]?-1:1)*sa}}if(e!==a){const zp=M==="x"?"y":"x",sa=s[M]===f[zp],qo=m[zp]>b[zp],ae=m[zp]<b[zp];(s[M]===1&&(!sa&&qo||sa&&ae)||s[M]!==1&&(!sa&&ae||sa&&qo))&&(V=M==="x"?Ut:it)}const zt={x:m.x+le.x,y:m.y+le.y},Zt={x:b.x+K.x,y:b.y+K.y},Mn=Math.max(Math.abs(zt.x-V[0].x),Math.abs(Zt.x-V[0].x)),kp=Math.max(Math.abs(zt.y-V[0].y),Math.abs(Zt.y-V[0].y));Mn>=kp?(Z=(zt.x+Zt.x)/2,ee=V[0].y):(Z=V[0].x,ee=(zt.y+Zt.y)/2)}return[[r,{x:m.x+le.x,y:m.y+le.y},...V,{x:b.x+K.x,y:b.y+K.y},t],Z,ee,Q,wt]}function getBend(r,e,t,a){const o=Math.min(distance(r,e)/2,distance(e,t)/2,a),{x:l,y:s}=e;if(r.x===l&&l===t.x||r.y===s&&s===t.y)return`L${l} ${s}`;if(r.y===s){const b=r.x<t.x?-1:1,E=r.y<t.y?1:-1;return`L ${l+o*b},${s}Q ${l},${s} ${l},${s+o*E}`}const f=r.x<t.x?1:-1,m=r.y<t.y?-1:1;return`L ${l},${s+o*m}Q ${l},${s} ${l+o*f},${s}`}function getSmoothStepPath({sourceX:r,sourceY:e,sourcePosition:t=Position.Bottom,targetX:a,targetY:o,targetPosition:l=Position.Top,borderRadius:s=5,centerX:f,centerY:m,offset:b=20}){const[E,M,I,V,Z]=getPoints({source:{x:r,y:e},sourcePosition:t,target:{x:a,y:o},targetPosition:l,center:{x:f,y:m},offset:b});return[E.reduce((le,K,vt)=>{let q="";return vt>0&&vt<E.length-1?q=getBend(E[vt-1],K,E[vt+1],s):q=`${vt===0?"M":"L"}${K.x} ${K.y}`,le+=q,le},""),M,I,V,Z]}const SmoothStepEdge=reactExports.memo(({sourceX:r,sourceY:e,targetX:t,targetY:a,label:o,labelStyle:l,labelShowBg:s,labelBgStyle:f,labelBgPadding:m,labelBgBorderRadius:b,style:E,sourcePosition:M=Position.Bottom,targetPosition:I=Position.Top,markerEnd:V,markerStart:Z,pathOptions:ee,interactionWidth:le})=>{const[K,vt,q]=getSmoothStepPath({sourceX:r,sourceY:e,sourcePosition:M,targetX:t,targetY:a,targetPosition:I,borderRadius:ee?.borderRadius,offset:ee?.offset});return React.createElement(BaseEdge,{path:K,labelX:vt,labelY:q,label:o,labelStyle:l,labelShowBg:s,labelBgStyle:f,labelBgPadding:m,labelBgBorderRadius:b,style:E,markerEnd:V,markerStart:Z,interactionWidth:le})});SmoothStepEdge.displayName="SmoothStepEdge";const StepEdge=reactExports.memo(r=>React.createElement(SmoothStepEdge,{...r,pathOptions:reactExports.useMemo(()=>({borderRadius:0,offset:r.pathOptions?.offset}),[r.pathOptions?.offset])}));StepEdge.displayName="StepEdge";function getStraightPath({sourceX:r,sourceY:e,targetX:t,targetY:a}){const[o,l,s,f]=getEdgeCenter({sourceX:r,sourceY:e,targetX:t,targetY:a});return[`M ${r},${e}L ${t},${a}`,o,l,s,f]}const StraightEdge=reactExports.memo(({sourceX:r,sourceY:e,targetX:t,targetY:a,label:o,labelStyle:l,labelShowBg:s,labelBgStyle:f,labelBgPadding:m,labelBgBorderRadius:b,style:E,markerEnd:M,markerStart:I,interactionWidth:V})=>{const[Z,ee,le]=getStraightPath({sourceX:r,sourceY:e,targetX:t,targetY:a});return React.createElement(BaseEdge,{path:Z,labelX:ee,labelY:le,label:o,labelStyle:l,labelShowBg:s,labelBgStyle:f,labelBgPadding:m,labelBgBorderRadius:b,style:E,markerEnd:M,markerStart:I,interactionWidth:V})});StraightEdge.displayName="StraightEdge";function calculateControlOffset(r,e){return r>=0?.5*r:e*25*Math.sqrt(-r)}function getControlWithCurvature({pos:r,x1:e,y1:t,x2:a,y2:o,c:l}){switch(r){case Position.Left:return[e-calculateControlOffset(e-a,l),t];case Position.Right:return[e+calculateControlOffset(a-e,l),t];case Position.Top:return[e,t-calculateControlOffset(t-o,l)];case Position.Bottom:return[e,t+calculateControlOffset(o-t,l)]}}function getBezierPath({sourceX:r,sourceY:e,sourcePosition:t=Position.Bottom,targetX:a,targetY:o,targetPosition:l=Position.Top,curvature:s=.25}){const[f,m]=getControlWithCurvature({pos:t,x1:r,y1:e,x2:a,y2:o,c:s}),[b,E]=getControlWithCurvature({pos:l,x1:a,y1:o,x2:r,y2:e,c:s}),[M,I,V,Z]=getBezierEdgeCenter({sourceX:r,sourceY:e,targetX:a,targetY:o,sourceControlX:f,sourceControlY:m,targetControlX:b,targetControlY:E});return[`M${r},${e} C${f},${m} ${b},${E} ${a},${o}`,M,I,V,Z]}const BezierEdge=reactExports.memo(({sourceX:r,sourceY:e,targetX:t,targetY:a,sourcePosition:o=Position.Bottom,targetPosition:l=Position.Top,label:s,labelStyle:f,labelShowBg:m,labelBgStyle:b,labelBgPadding:E,labelBgBorderRadius:M,style:I,markerEnd:V,markerStart:Z,pathOptions:ee,interactionWidth:le})=>{const[K,vt,q]=getBezierPath({sourceX:r,sourceY:e,sourcePosition:o,targetX:t,targetY:a,targetPosition:l,curvature:ee?.curvature});return React.createElement(BaseEdge,{path:K,labelX:vt,labelY:q,label:s,labelStyle:f,labelShowBg:m,labelBgStyle:b,labelBgPadding:E,labelBgBorderRadius:M,style:I,markerEnd:V,markerStart:Z,interactionWidth:le})});BezierEdge.displayName="BezierEdge";const NodeIdContext=reactExports.createContext(null),Provider$2=NodeIdContext.Provider;NodeIdContext.Consumer;const useNodeId=()=>reactExports.useContext(NodeIdContext),isEdge=r=>"id"in r&&"source"in r&&"target"in r,getEdgeId=({source:r,sourceHandle:e,target:t,targetHandle:a})=>`reactflow__edge-${r}${e||""}-${t}${a||""}`,getMarkerId=(r,e)=>typeof r>"u"?"":typeof r=="string"?r:`${e?`${e}__`:""}${Object.keys(r).sort().map(a=>`${a}=${r[a]}`).join("&")}`,connectionExists=(r,e)=>e.some(t=>t.source===r.source&&t.target===r.target&&(t.sourceHandle===r.sourceHandle||!t.sourceHandle&&!r.sourceHandle)&&(t.targetHandle===r.targetHandle||!t.targetHandle&&!r.targetHandle)),addEdge=(r,e)=>{if(!r.source||!r.target)return e;let t;return isEdge(r)?t={...r}:t={...r,id:getEdgeId(r)},connectionExists(t,e)?e:e.concat(t)},pointToRendererPoint=({x:r,y:e},[t,a,o],l,[s,f])=>{const m={x:(r-t)/o,y:(e-a)/o};return l?{x:s*Math.round(m.x/s),y:f*Math.round(m.y/f)}:m},rendererPointToPoint=({x:r,y:e},[t,a,o])=>({x:r*o+t,y:e*o+a}),getNodePositionWithOrigin=(r,e=[0,0])=>{if(!r)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const t=(r.width??0)*e[0],a=(r.height??0)*e[1],o={x:r.position.x-t,y:r.position.y-a};return{...o,positionAbsolute:r.positionAbsolute?{x:r.positionAbsolute.x-t,y:r.positionAbsolute.y-a}:o}},getNodesBounds=(r,e=[0,0])=>{if(r.length===0)return{x:0,y:0,width:0,height:0};const t=r.reduce((a,o)=>{const{x:l,y:s}=getNodePositionWithOrigin(o,e).positionAbsolute;return getBoundsOfBoxes(a,rectToBox({x:l,y:s,width:o.width||0,height:o.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return boxToRect(t)},getNodesInside=(r,e,[t,a,o]=[0,0,1],l=!1,s=!1,f=[0,0])=>{const m={x:(e.x-t)/o,y:(e.y-a)/o,width:e.width/o,height:e.height/o},b=[];return r.forEach(E=>{const{width:M,height:I,selectable:V=!0,hidden:Z=!1}=E;if(s&&!V||Z)return!1;const{positionAbsolute:ee}=getNodePositionWithOrigin(E,f),le={x:ee.x,y:ee.y,width:M||0,height:I||0},K=getOverlappingArea(m,le),vt=typeof M>"u"||typeof I>"u"||M===null||I===null,q=l&&K>0,Q=(M||0)*(I||0);(vt||q||K>=Q||E.dragging)&&b.push(E)}),b},getConnectedEdges=(r,e)=>{const t=r.map(a=>a.id);return e.filter(a=>t.includes(a.source)||t.includes(a.target))},getViewportForBounds=(r,e,t,a,o,l=.1)=>{const s=e/(r.width*(1+l)),f=t/(r.height*(1+l)),m=Math.min(s,f),b=clamp(m,a,o),E=r.x+r.width/2,M=r.y+r.height/2,I=e/2-E*b,V=t/2-M*b;return{x:I,y:V,zoom:b}},getD3Transition=(r,e=0)=>r.transition().duration(e);function getHandles(r,e,t,a){return(e[t]||[]).reduce((o,l)=>(`${r.id}-${l.id}-${t}`!==a&&o.push({id:l.id||null,type:t,nodeId:r.id,x:(r.positionAbsolute?.x??0)+l.x+l.width/2,y:(r.positionAbsolute?.y??0)+l.y+l.height/2}),o),[])}function getClosestHandle(r,e,t,a,o,l){const{x:s,y:f}=getEventPosition(r),b=e.elementsFromPoint(s,f).find(Z=>Z.classList.contains("react-flow__handle"));if(b){const Z=b.getAttribute("data-nodeid");if(Z){const ee=getHandleType(void 0,b),le=b.getAttribute("data-handleid"),K=l({nodeId:Z,id:le,type:ee});if(K){const vt=o.find(q=>q.nodeId===Z&&q.type===ee&&q.id===le);return{handle:{id:le,type:ee,nodeId:Z,x:vt?.x||t.x,y:vt?.y||t.y},validHandleResult:K}}}}let E=[],M=1/0;if(o.forEach(Z=>{const ee=Math.sqrt((Z.x-t.x)**2+(Z.y-t.y)**2);if(ee<=a){const le=l(Z);ee<=M&&(ee<M?E=[{handle:Z,validHandleResult:le}]:ee===M&&E.push({handle:Z,validHandleResult:le}),M=ee)}}),!E.length)return{handle:null,validHandleResult:defaultResult()};if(E.length===1)return E[0];const I=E.some(({validHandleResult:Z})=>Z.isValid),V=E.some(({handle:Z})=>Z.type==="target");return E.find(({handle:Z,validHandleResult:ee})=>V?Z.type==="target":I?ee.isValid:!0)||E[0]}const nullConnection={source:null,target:null,sourceHandle:null,targetHandle:null},defaultResult=()=>({handleDomNode:null,isValid:!1,connection:nullConnection,endHandle:null});function isValidHandle(r,e,t,a,o,l,s){const f=o==="target",m=s.querySelector(`.react-flow__handle[data-id="${r?.nodeId}-${r?.id}-${r?.type}"]`),b={...defaultResult(),handleDomNode:m};if(m){const E=getHandleType(void 0,m),M=m.getAttribute("data-nodeid"),I=m.getAttribute("data-handleid"),V=m.classList.contains("connectable"),Z=m.classList.contains("connectableend"),ee={source:f?M:t,sourceHandle:f?I:a,target:f?t:M,targetHandle:f?a:I};b.connection=ee,V&&Z&&(e===ConnectionMode.Strict?f&&E==="source"||!f&&E==="target":M!==t||I!==a)&&(b.endHandle={nodeId:M,handleId:I,type:E},b.isValid=l(ee))}return b}function getHandleLookup({nodes:r,nodeId:e,handleId:t,handleType:a}){return r.reduce((o,l)=>{if(l[internalsSymbol]){const{handleBounds:s}=l[internalsSymbol];let f=[],m=[];s&&(f=getHandles(l,s,"source",`${e}-${t}-${a}`),m=getHandles(l,s,"target",`${e}-${t}-${a}`)),o.push(...f,...m)}return o},[])}function getHandleType(r,e){return r||(e?.classList.contains("target")?"target":e?.classList.contains("source")?"source":null)}function resetRecentHandle(r){r?.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function getConnectionStatus(r,e){let t=null;return e?t="valid":r&&!e&&(t="invalid"),t}function handlePointerDown({event:r,handleId:e,nodeId:t,onConnect:a,isTarget:o,getState:l,setState:s,isValidConnection:f,edgeUpdaterType:m,onReconnectEnd:b}){const E=getHostForElement(r.target),{connectionMode:M,domNode:I,autoPanOnConnect:V,connectionRadius:Z,onConnectStart:ee,panBy:le,getNodes:K,cancelConnection:vt}=l();let q=0,Q;const{x:wt,y:bt}=getEventPosition(r),Ut=E?.elementFromPoint(wt,bt),it=getHandleType(m,Ut),zt=I?.getBoundingClientRect();if(!zt||!it)return;let Zt,Mn=getEventPosition(r,zt),kp=!1,zp=null,sa=!1,qo=null;const ae=getHandleLookup({nodes:K(),nodeId:t,handleId:e,handleType:it}),wp=()=>{if(!V)return;const[h0,Pp]=calcAutoPan(Mn,zt);le({x:h0,y:Pp}),q=requestAnimationFrame(wp)};s({connectionPosition:Mn,connectionStatus:null,connectionNodeId:t,connectionHandleId:e,connectionHandleType:it,connectionStartHandle:{nodeId:t,handleId:e,type:it},connectionEndHandle:null}),ee?.(r,{nodeId:t,handleId:e,handleType:it});function Cp(h0){const{transform:Pp}=l();Mn=getEventPosition(h0,zt);const{handle:d0,validHandleResult:x0}=getClosestHandle(h0,E,pointToRendererPoint(Mn,Pp,!1,[1,1]),Z,ae,Dp=>isValidHandle(Dp,M,t,e,o?"target":"source",f,E));if(Q=d0,kp||(wp(),kp=!0),qo=x0.handleDomNode,zp=x0.connection,sa=x0.isValid,s({connectionPosition:Q&&sa?rendererPointToPoint({x:Q.x,y:Q.y},Pp):Mn,connectionStatus:getConnectionStatus(!!Q,sa),connectionEndHandle:x0.endHandle}),!Q&&!sa&&!qo)return resetRecentHandle(Zt);zp.source!==zp.target&&qo&&(resetRecentHandle(Zt),Zt=qo,qo.classList.add("connecting","react-flow__handle-connecting"),qo.classList.toggle("valid",sa),qo.classList.toggle("react-flow__handle-valid",sa))}function Kt(h0){(Q||qo)&&zp&&sa&&a?.(zp),l().onConnectEnd?.(h0),m&&b?.(h0),resetRecentHandle(Zt),vt(),cancelAnimationFrame(q),kp=!1,sa=!1,zp=null,qo=null,E.removeEventListener("mousemove",Cp),E.removeEventListener("mouseup",Kt),E.removeEventListener("touchmove",Cp),E.removeEventListener("touchend",Kt)}E.addEventListener("mousemove",Cp),E.addEventListener("mouseup",Kt),E.addEventListener("touchmove",Cp),E.addEventListener("touchend",Kt)}const alwaysValid=()=>!0,selector$f=r=>({connectionStartHandle:r.connectionStartHandle,connectOnClick:r.connectOnClick,noPanClassName:r.noPanClassName}),connectingSelector=(r,e,t)=>a=>{const{connectionStartHandle:o,connectionEndHandle:l,connectionClickStartHandle:s}=a;return{connecting:o?.nodeId===r&&o?.handleId===e&&o?.type===t||l?.nodeId===r&&l?.handleId===e&&l?.type===t,clickConnecting:s?.nodeId===r&&s?.handleId===e&&s?.type===t}},Handle=reactExports.forwardRef(({type:r="source",position:e=Position.Top,isValidConnection:t,isConnectable:a=!0,isConnectableStart:o=!0,isConnectableEnd:l=!0,id:s,onConnect:f,children:m,className:b,onMouseDown:E,onTouchStart:M,...I},V)=>{const Z=s||null,ee=r==="target",le=useStoreApi(),K=useNodeId(),{connectOnClick:vt,noPanClassName:q}=useStore$1(selector$f,shallow$1),{connecting:Q,clickConnecting:wt}=useStore$1(connectingSelector(K,Z,r),shallow$1);K||le.getState().onError?.("010",errorMessages.error010());const bt=zt=>{const{defaultEdgeOptions:Zt,onConnect:Mn,hasDefaultEdges:kp}=le.getState(),zp={...Zt,...zt};if(kp){const{edges:sa,setEdges:qo}=le.getState();qo(addEdge(zp,sa))}Mn?.(zp),f?.(zp)},Ut=zt=>{if(!K)return;const Zt=isMouseEvent(zt);o&&(Zt&&zt.button===0||!Zt)&&handlePointerDown({event:zt,handleId:Z,nodeId:K,onConnect:bt,isTarget:ee,getState:le.getState,setState:le.setState,isValidConnection:t||le.getState().isValidConnection||alwaysValid}),Zt?E?.(zt):M?.(zt)},it=zt=>{const{onClickConnectStart:Zt,onClickConnectEnd:Mn,connectionClickStartHandle:kp,connectionMode:zp,isValidConnection:sa}=le.getState();if(!K||!kp&&!o)return;if(!kp){Zt?.(zt,{nodeId:K,handleId:Z,handleType:r}),le.setState({connectionClickStartHandle:{nodeId:K,type:r,handleId:Z}});return}const qo=getHostForElement(zt.target),ae=t||sa||alwaysValid,{connection:wp,isValid:Cp}=isValidHandle({nodeId:K,id:Z,type:r},zp,kp.nodeId,kp.handleId||null,kp.type,ae,qo);Cp&&bt(wp),Mn?.(zt),le.setState({connectionClickStartHandle:null})};return React.createElement("div",{"data-handleid":Z,"data-nodeid":K,"data-handlepos":e,"data-id":`${K}-${Z}-${r}`,className:cc$1(["react-flow__handle",`react-flow__handle-${e}`,"nodrag",q,b,{source:!ee,target:ee,connectable:a,connectablestart:o,connectableend:l,connecting:wt,connectionindicator:a&&(o&&!Q||l&&Q)}]),onMouseDown:Ut,onTouchStart:Ut,onClick:vt?it:void 0,ref:V,...I},m)});Handle.displayName="Handle";var Handle$1=reactExports.memo(Handle);const DefaultNode=({data:r,isConnectable:e,targetPosition:t=Position.Top,sourcePosition:a=Position.Bottom})=>React.createElement(React.Fragment,null,React.createElement(Handle$1,{type:"target",position:t,isConnectable:e}),r?.label,React.createElement(Handle$1,{type:"source",position:a,isConnectable:e}));DefaultNode.displayName="DefaultNode";var DefaultNode$1=reactExports.memo(DefaultNode);const InputNode=({data:r,isConnectable:e,sourcePosition:t=Position.Bottom})=>React.createElement(React.Fragment,null,r?.label,React.createElement(Handle$1,{type:"source",position:t,isConnectable:e}));InputNode.displayName="InputNode";var InputNode$1=reactExports.memo(InputNode);const OutputNode=({data:r,isConnectable:e,targetPosition:t=Position.Top})=>React.createElement(React.Fragment,null,React.createElement(Handle$1,{type:"target",position:t,isConnectable:e}),r?.label);OutputNode.displayName="OutputNode";var OutputNode$1=reactExports.memo(OutputNode);const GroupNode=()=>null;GroupNode.displayName="GroupNode";const selector$e=r=>({selectedNodes:r.getNodes().filter(e=>e.selected),selectedEdges:r.edges.filter(e=>e.selected).map(e=>({...e}))}),selectId=r=>r.id;function areEqual(r,e){return shallow$1(r.selectedNodes.map(selectId),e.selectedNodes.map(selectId))&&shallow$1(r.selectedEdges.map(selectId),e.selectedEdges.map(selectId))}const SelectionListener=reactExports.memo(({onSelectionChange:r})=>{const e=useStoreApi(),{selectedNodes:t,selectedEdges:a}=useStore$1(selector$e,areEqual);return reactExports.useEffect(()=>{const o={nodes:t,edges:a};r?.(o),e.getState().onSelectionChange.forEach(l=>l(o))},[t,a,r]),null});SelectionListener.displayName="SelectionListener";const changeSelector=r=>!!r.onSelectionChange;function Wrapper$1({onSelectionChange:r}){const e=useStore$1(changeSelector);return r||e?React.createElement(SelectionListener,{onSelectionChange:r}):null}const selector$d=r=>({setNodes:r.setNodes,setEdges:r.setEdges,setDefaultNodesAndEdges:r.setDefaultNodesAndEdges,setMinZoom:r.setMinZoom,setMaxZoom:r.setMaxZoom,setTranslateExtent:r.setTranslateExtent,setNodeExtent:r.setNodeExtent,reset:r.reset});function useStoreUpdater(r,e){reactExports.useEffect(()=>{typeof r<"u"&&e(r)},[r])}function useDirectStoreUpdater(r,e,t){reactExports.useEffect(()=>{typeof e<"u"&&t({[r]:e})},[e])}const StoreUpdater=({nodes:r,edges:e,defaultNodes:t,defaultEdges:a,onConnect:o,onConnectStart:l,onConnectEnd:s,onClickConnectStart:f,onClickConnectEnd:m,nodesDraggable:b,nodesConnectable:E,nodesFocusable:M,edgesFocusable:I,edgesUpdatable:V,elevateNodesOnSelect:Z,minZoom:ee,maxZoom:le,nodeExtent:K,onNodesChange:vt,onEdgesChange:q,elementsSelectable:Q,connectionMode:wt,snapGrid:bt,snapToGrid:Ut,translateExtent:it,connectOnClick:zt,defaultEdgeOptions:Zt,fitView:Mn,fitViewOptions:kp,onNodesDelete:zp,onEdgesDelete:sa,onNodeDrag:qo,onNodeDragStart:ae,onNodeDragStop:wp,onSelectionDrag:Cp,onSelectionDragStart:Kt,onSelectionDragStop:h0,noPanClassName:Pp,nodeOrigin:d0,rfId:x0,autoPanOnConnect:Dp,autoPanOnNodeDrag:c0,onError:u0,connectionRadius:y0,isValidConnection:M0,nodeDragThreshold:sm})=>{const{setNodes:mm,setEdges:Mm,setDefaultNodesAndEdges:v1,setMinZoom:v0,setMaxZoom:D1,setTranslateExtent:P1,setNodeExtent:ig,reset:w1}=useStore$1(selector$d,shallow$1),o1=useStoreApi();return reactExports.useEffect(()=>{const g1=a?.map(X1=>({...X1,...Zt}));return v1(t,g1),()=>{w1()}},[]),useDirectStoreUpdater("defaultEdgeOptions",Zt,o1.setState),useDirectStoreUpdater("connectionMode",wt,o1.setState),useDirectStoreUpdater("onConnect",o,o1.setState),useDirectStoreUpdater("onConnectStart",l,o1.setState),useDirectStoreUpdater("onConnectEnd",s,o1.setState),useDirectStoreUpdater("onClickConnectStart",f,o1.setState),useDirectStoreUpdater("onClickConnectEnd",m,o1.setState),useDirectStoreUpdater("nodesDraggable",b,o1.setState),useDirectStoreUpdater("nodesConnectable",E,o1.setState),useDirectStoreUpdater("nodesFocusable",M,o1.setState),useDirectStoreUpdater("edgesFocusable",I,o1.setState),useDirectStoreUpdater("edgesUpdatable",V,o1.setState),useDirectStoreUpdater("elementsSelectable",Q,o1.setState),useDirectStoreUpdater("elevateNodesOnSelect",Z,o1.setState),useDirectStoreUpdater("snapToGrid",Ut,o1.setState),useDirectStoreUpdater("snapGrid",bt,o1.setState),useDirectStoreUpdater("onNodesChange",vt,o1.setState),useDirectStoreUpdater("onEdgesChange",q,o1.setState),useDirectStoreUpdater("connectOnClick",zt,o1.setState),useDirectStoreUpdater("fitViewOnInit",Mn,o1.setState),useDirectStoreUpdater("fitViewOnInitOptions",kp,o1.setState),useDirectStoreUpdater("onNodesDelete",zp,o1.setState),useDirectStoreUpdater("onEdgesDelete",sa,o1.setState),useDirectStoreUpdater("onNodeDrag",qo,o1.setState),useDirectStoreUpdater("onNodeDragStart",ae,o1.setState),useDirectStoreUpdater("onNodeDragStop",wp,o1.setState),useDirectStoreUpdater("onSelectionDrag",Cp,o1.setState),useDirectStoreUpdater("onSelectionDragStart",Kt,o1.setState),useDirectStoreUpdater("onSelectionDragStop",h0,o1.setState),useDirectStoreUpdater("noPanClassName",Pp,o1.setState),useDirectStoreUpdater("nodeOrigin",d0,o1.setState),useDirectStoreUpdater("rfId",x0,o1.setState),useDirectStoreUpdater("autoPanOnConnect",Dp,o1.setState),useDirectStoreUpdater("autoPanOnNodeDrag",c0,o1.setState),useDirectStoreUpdater("onError",u0,o1.setState),useDirectStoreUpdater("connectionRadius",y0,o1.setState),useDirectStoreUpdater("isValidConnection",M0,o1.setState),useDirectStoreUpdater("nodeDragThreshold",sm,o1.setState),useStoreUpdater(r,mm),useStoreUpdater(e,Mm),useStoreUpdater(ee,v0),useStoreUpdater(le,D1),useStoreUpdater(it,P1),useStoreUpdater(K,ig),null},style={display:"none"},ariaLiveStyle={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},ARIA_NODE_DESC_KEY="react-flow__node-desc",ARIA_EDGE_DESC_KEY="react-flow__edge-desc",ARIA_LIVE_MESSAGE="react-flow__aria-live",selector$c=r=>r.ariaLiveMessage;function AriaLiveMessage({rfId:r}){const e=useStore$1(selector$c);return React.createElement("div",{id:`${ARIA_LIVE_MESSAGE}-${r}`,"aria-live":"assertive","aria-atomic":"true",style:ariaLiveStyle},e)}function A11yDescriptions({rfId:r,disableKeyboardA11y:e}){return React.createElement(React.Fragment,null,React.createElement("div",{id:`${ARIA_NODE_DESC_KEY}-${r}`,style},"Press enter or space to select a node.",!e&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),React.createElement("div",{id:`${ARIA_EDGE_DESC_KEY}-${r}`,style},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!e&&React.createElement(AriaLiveMessage,{rfId:r}))}var useKeyPress=(r=null,e={actInsideInputWithModifier:!0})=>{const[t,a]=reactExports.useState(!1),o=reactExports.useRef(!1),l=reactExports.useRef(new Set([])),[s,f]=reactExports.useMemo(()=>{if(r!==null){const b=(Array.isArray(r)?r:[r]).filter(M=>typeof M=="string").map(M=>M.split("+")),E=b.reduce((M,I)=>M.concat(...I),[]);return[b,E]}return[[],[]]},[r]);return reactExports.useEffect(()=>{const m=typeof document<"u"?document:null,b=e?.target||m;if(r!==null){const E=V=>{if(o.current=V.ctrlKey||V.metaKey||V.shiftKey,(!o.current||o.current&&!e.actInsideInputWithModifier)&&isInputDOMNode(V))return!1;const ee=useKeyOrCode(V.code,f);l.current.add(V[ee]),isMatchingKey(s,l.current,!1)&&(V.preventDefault(),a(!0))},M=V=>{if((!o.current||o.current&&!e.actInsideInputWithModifier)&&isInputDOMNode(V))return!1;const ee=useKeyOrCode(V.code,f);isMatchingKey(s,l.current,!0)?(a(!1),l.current.clear()):l.current.delete(V[ee]),V.key==="Meta"&&l.current.clear(),o.current=!1},I=()=>{l.current.clear(),a(!1)};return b?.addEventListener("keydown",E),b?.addEventListener("keyup",M),window.addEventListener("blur",I),()=>{b?.removeEventListener("keydown",E),b?.removeEventListener("keyup",M),window.removeEventListener("blur",I)}}},[r,a]),t};function isMatchingKey(r,e,t){return r.filter(a=>t||a.length===e.size).some(a=>a.every(o=>e.has(o)))}function useKeyOrCode(r,e){return e.includes(r)?"code":"key"}function calculateXYZPosition(r,e,t,a){const o=r.parentNode||r.parentId;if(!o)return t;const l=e.get(o),s=getNodePositionWithOrigin(l,a);return calculateXYZPosition(l,e,{x:(t.x??0)+s.x,y:(t.y??0)+s.y,z:(l[internalsSymbol]?.z??0)>(t.z??0)?l[internalsSymbol]?.z??0:t.z??0},a)}function updateAbsoluteNodePositions(r,e,t){r.forEach(a=>{const o=a.parentNode||a.parentId;if(o&&!r.has(o))throw new Error(`Parent node ${o} not found`);if(o||t?.[a.id]){const{x:l,y:s,z:f}=calculateXYZPosition(a,r,{...a.position,z:a[internalsSymbol]?.z??0},e);a.positionAbsolute={x:l,y:s},a[internalsSymbol].z=f,t?.[a.id]&&(a[internalsSymbol].isParent=!0)}})}function createNodeInternals(r,e,t,a){const o=new Map,l={},s=a?1e3:0;return r.forEach(f=>{const m=(isNumeric(f.zIndex)?f.zIndex:0)+(f.selected?s:0),b=e.get(f.id),E={...f,positionAbsolute:{x:f.position.x,y:f.position.y}},M=f.parentNode||f.parentId;M&&(l[M]=!0);const I=b?.type&&b?.type!==f.type;Object.defineProperty(E,internalsSymbol,{enumerable:!1,value:{handleBounds:I?void 0:b?.[internalsSymbol]?.handleBounds,z:m}}),o.set(f.id,E)}),updateAbsoluteNodePositions(o,t,l),o}function fitView(r,e={}){const{getNodes:t,width:a,height:o,minZoom:l,maxZoom:s,d3Zoom:f,d3Selection:m,fitViewOnInitDone:b,fitViewOnInit:E,nodeOrigin:M}=r(),I=e.initial&&!b&&E;if(f&&m&&(I||!e.initial)){const Z=t().filter(le=>{const K=e.includeHiddenNodes?le.width&&le.height:!le.hidden;return e.nodes?.length?K&&e.nodes.some(vt=>vt.id===le.id):K}),ee=Z.every(le=>le.width&&le.height);if(Z.length>0&&ee){const le=getNodesBounds(Z,M),{x:K,y:vt,zoom:q}=getViewportForBounds(le,a,o,e.minZoom??l,e.maxZoom??s,e.padding??.1),Q=identity.translate(K,vt).scale(q);return typeof e.duration=="number"&&e.duration>0?f.transform(getD3Transition(m,e.duration),Q):f.transform(m,Q),!0}}return!1}function handleControlledNodeSelectionChange(r,e){return r.forEach(t=>{const a=e.get(t.id);a&&e.set(a.id,{...a,[internalsSymbol]:a[internalsSymbol],selected:t.selected})}),new Map(e)}function handleControlledEdgeSelectionChange(r,e){return e.map(t=>{const a=r.find(o=>o.id===t.id);return a&&(t.selected=a.selected),t})}function updateNodesAndEdgesSelections({changedNodes:r,changedEdges:e,get:t,set:a}){const{nodeInternals:o,edges:l,onNodesChange:s,onEdgesChange:f,hasDefaultNodes:m,hasDefaultEdges:b}=t();r?.length&&(m&&a({nodeInternals:handleControlledNodeSelectionChange(r,o)}),s?.(r)),e?.length&&(b&&a({edges:handleControlledEdgeSelectionChange(e,l)}),f?.(e))}const noop=()=>{},initialViewportHelper={zoomIn:noop,zoomOut:noop,zoomTo:noop,getZoom:()=>1,setViewport:noop,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:noop,fitBounds:noop,project:r=>r,screenToFlowPosition:r=>r,flowToScreenPosition:r=>r,viewportInitialized:!1},selector$b=r=>({d3Zoom:r.d3Zoom,d3Selection:r.d3Selection}),useViewportHelper=()=>{const r=useStoreApi(),{d3Zoom:e,d3Selection:t}=useStore$1(selector$b,shallow$1);return reactExports.useMemo(()=>t&&e?{zoomIn:o=>e.scaleBy(getD3Transition(t,o?.duration),1.2),zoomOut:o=>e.scaleBy(getD3Transition(t,o?.duration),1/1.2),zoomTo:(o,l)=>e.scaleTo(getD3Transition(t,l?.duration),o),getZoom:()=>r.getState().transform[2],setViewport:(o,l)=>{const[s,f,m]=r.getState().transform,b=identity.translate(o.x??s,o.y??f).scale(o.zoom??m);e.transform(getD3Transition(t,l?.duration),b)},getViewport:()=>{const[o,l,s]=r.getState().transform;return{x:o,y:l,zoom:s}},fitView:o=>fitView(r.getState,o),setCenter:(o,l,s)=>{const{width:f,height:m,maxZoom:b}=r.getState(),E=typeof s?.zoom<"u"?s.zoom:b,M=f/2-o*E,I=m/2-l*E,V=identity.translate(M,I).scale(E);e.transform(getD3Transition(t,s?.duration),V)},fitBounds:(o,l)=>{const{width:s,height:f,minZoom:m,maxZoom:b}=r.getState(),{x:E,y:M,zoom:I}=getViewportForBounds(o,s,f,m,b,l?.padding??.1),V=identity.translate(E,M).scale(I);e.transform(getD3Transition(t,l?.duration),V)},project:o=>{const{transform:l,snapToGrid:s,snapGrid:f}=r.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),pointToRendererPoint(o,l,s,f)},screenToFlowPosition:o=>{const{transform:l,snapToGrid:s,snapGrid:f,domNode:m}=r.getState();if(!m)return o;const{x:b,y:E}=m.getBoundingClientRect(),M={x:o.x-b,y:o.y-E};return pointToRendererPoint(M,l,s,f)},flowToScreenPosition:o=>{const{transform:l,domNode:s}=r.getState();if(!s)return o;const{x:f,y:m}=s.getBoundingClientRect(),b=rendererPointToPoint(o,l);return{x:b.x+f,y:b.y+m}},viewportInitialized:!0}:initialViewportHelper,[e,t])};function useReactFlow(){const r=useViewportHelper(),e=useStoreApi(),t=reactExports.useCallback(()=>e.getState().getNodes().map(ee=>({...ee})),[]),a=reactExports.useCallback(ee=>e.getState().nodeInternals.get(ee),[]),o=reactExports.useCallback(()=>{const{edges:ee=[]}=e.getState();return ee.map(le=>({...le}))},[]),l=reactExports.useCallback(ee=>{const{edges:le=[]}=e.getState();return le.find(K=>K.id===ee)},[]),s=reactExports.useCallback(ee=>{const{getNodes:le,setNodes:K,hasDefaultNodes:vt,onNodesChange:q}=e.getState(),Q=le(),wt=typeof ee=="function"?ee(Q):ee;if(vt)K(wt);else if(q){const bt=wt.length===0?Q.map(Ut=>({type:"remove",id:Ut.id})):wt.map(Ut=>({item:Ut,type:"reset"}));q(bt)}},[]),f=reactExports.useCallback(ee=>{const{edges:le=[],setEdges:K,hasDefaultEdges:vt,onEdgesChange:q}=e.getState(),Q=typeof ee=="function"?ee(le):ee;if(vt)K(Q);else if(q){const wt=Q.length===0?le.map(bt=>({type:"remove",id:bt.id})):Q.map(bt=>({item:bt,type:"reset"}));q(wt)}},[]),m=reactExports.useCallback(ee=>{const le=Array.isArray(ee)?ee:[ee],{getNodes:K,setNodes:vt,hasDefaultNodes:q,onNodesChange:Q}=e.getState();if(q){const bt=[...K(),...le];vt(bt)}else if(Q){const wt=le.map(bt=>({item:bt,type:"add"}));Q(wt)}},[]),b=reactExports.useCallback(ee=>{const le=Array.isArray(ee)?ee:[ee],{edges:K=[],setEdges:vt,hasDefaultEdges:q,onEdgesChange:Q}=e.getState();if(q)vt([...K,...le]);else if(Q){const wt=le.map(bt=>({item:bt,type:"add"}));Q(wt)}},[]),E=reactExports.useCallback(()=>{const{getNodes:ee,edges:le=[],transform:K}=e.getState(),[vt,q,Q]=K;return{nodes:ee().map(wt=>({...wt})),edges:le.map(wt=>({...wt})),viewport:{x:vt,y:q,zoom:Q}}},[]),M=reactExports.useCallback(({nodes:ee,edges:le})=>{const{nodeInternals:K,getNodes:vt,edges:q,hasDefaultNodes:Q,hasDefaultEdges:wt,onNodesDelete:bt,onEdgesDelete:Ut,onNodesChange:it,onEdgesChange:zt}=e.getState(),Zt=(ee||[]).map(qo=>qo.id),Mn=(le||[]).map(qo=>qo.id),kp=vt().reduce((qo,ae)=>{const wp=ae.parentNode||ae.parentId,Cp=!Zt.includes(ae.id)&&wp&&qo.find(h0=>h0.id===wp);return(typeof ae.deletable=="boolean"?ae.deletable:!0)&&(Zt.includes(ae.id)||Cp)&&qo.push(ae),qo},[]),zp=q.filter(qo=>typeof qo.deletable=="boolean"?qo.deletable:!0),sa=zp.filter(qo=>Mn.includes(qo.id));if(kp||sa){const qo=getConnectedEdges(kp,zp),ae=[...sa,...qo],wp=ae.reduce((Cp,Kt)=>(Cp.includes(Kt.id)||Cp.push(Kt.id),Cp),[]);if((wt||Q)&&(wt&&e.setState({edges:q.filter(Cp=>!wp.includes(Cp.id))}),Q&&(kp.forEach(Cp=>{K.delete(Cp.id)}),e.setState({nodeInternals:new Map(K)}))),wp.length>0&&(Ut?.(ae),zt&&zt(wp.map(Cp=>({id:Cp,type:"remove"})))),kp.length>0&&(bt?.(kp),it)){const Cp=kp.map(Kt=>({id:Kt.id,type:"remove"}));it(Cp)}}},[]),I=reactExports.useCallback(ee=>{const le=isRectObject(ee),K=le?null:e.getState().nodeInternals.get(ee.id);return!le&&!K?[null,null,le]:[le?ee:nodeToRect(K),K,le]},[]),V=reactExports.useCallback((ee,le=!0,K)=>{const[vt,q,Q]=I(ee);return vt?(K||e.getState().getNodes()).filter(wt=>{if(!Q&&(wt.id===q.id||!wt.positionAbsolute))return!1;const bt=nodeToRect(wt),Ut=getOverlappingArea(bt,vt);return le&&Ut>0||Ut>=vt.width*vt.height}):[]},[]),Z=reactExports.useCallback((ee,le,K=!0)=>{const[vt]=I(ee);if(!vt)return!1;const q=getOverlappingArea(vt,le);return K&&q>0||q>=vt.width*vt.height},[]);return reactExports.useMemo(()=>({...r,getNodes:t,getNode:a,getEdges:o,getEdge:l,setNodes:s,setEdges:f,addNodes:m,addEdges:b,toObject:E,deleteElements:M,getIntersectingNodes:V,isNodeIntersecting:Z}),[r,t,a,o,l,s,f,m,b,E,M,V,Z])}const deleteKeyOptions={actInsideInputWithModifier:!1};var useGlobalKeyHandler=({deleteKeyCode:r,multiSelectionKeyCode:e})=>{const t=useStoreApi(),{deleteElements:a}=useReactFlow(),o=useKeyPress(r,deleteKeyOptions),l=useKeyPress(e);reactExports.useEffect(()=>{if(o){const{edges:s,getNodes:f}=t.getState(),m=f().filter(E=>E.selected),b=s.filter(E=>E.selected);a({nodes:m,edges:b}),t.setState({nodesSelectionActive:!1})}},[o]),reactExports.useEffect(()=>{t.setState({multiSelectionActive:l})},[l])};function useResizeHandler(r){const e=useStoreApi();reactExports.useEffect(()=>{let t;const a=()=>{if(!r.current)return;const o=getDimensions(r.current);(o.height===0||o.width===0)&&e.getState().onError?.("004",errorMessages.error004()),e.setState({width:o.width||500,height:o.height||500})};return a(),window.addEventListener("resize",a),r.current&&(t=new ResizeObserver(()=>a()),t.observe(r.current)),()=>{window.removeEventListener("resize",a),t&&r.current&&t.unobserve(r.current)}},[])}const containerStyle={position:"absolute",width:"100%",height:"100%",top:0,left:0},viewChanged=(r,e)=>r.x!==e.x||r.y!==e.y||r.zoom!==e.k,eventToFlowTransform=r=>({x:r.x,y:r.y,zoom:r.k}),isWrappedWithClass=(r,e)=>r.target.closest(`.${e}`),isRightClickPan=(r,e)=>e===2&&Array.isArray(r)&&r.includes(2),wheelDelta=r=>{const e=r.ctrlKey&&isMacOs()?10:1;return-r.deltaY*(r.deltaMode===1?.05:r.deltaMode?1:.002)*e},selector$a=r=>({d3Zoom:r.d3Zoom,d3Selection:r.d3Selection,d3ZoomHandler:r.d3ZoomHandler,userSelectionActive:r.userSelectionActive}),ZoomPane=({onMove:r,onMoveStart:e,onMoveEnd:t,onPaneContextMenu:a,zoomOnScroll:o=!0,zoomOnPinch:l=!0,panOnScroll:s=!1,panOnScrollSpeed:f=.5,panOnScrollMode:m=PanOnScrollMode.Free,zoomOnDoubleClick:b=!0,elementsSelectable:E,panOnDrag:M=!0,defaultViewport:I,translateExtent:V,minZoom:Z,maxZoom:ee,zoomActivationKeyCode:le,preventScrolling:K=!0,children:vt,noWheelClassName:q,noPanClassName:Q})=>{const wt=reactExports.useRef(),bt=useStoreApi(),Ut=reactExports.useRef(!1),it=reactExports.useRef(!1),zt=reactExports.useRef(null),Zt=reactExports.useRef({x:0,y:0,zoom:0}),{d3Zoom:Mn,d3Selection:kp,d3ZoomHandler:zp,userSelectionActive:sa}=useStore$1(selector$a,shallow$1),qo=useKeyPress(le),ae=reactExports.useRef(0),wp=reactExports.useRef(!1),Cp=reactExports.useRef();return useResizeHandler(zt),reactExports.useEffect(()=>{if(zt.current){const Kt=zt.current.getBoundingClientRect(),h0=zoom().scaleExtent([Z,ee]).translateExtent(V),Pp=select(zt.current).call(h0),d0=identity.translate(I.x,I.y).scale(clamp(I.zoom,Z,ee)),x0=[[0,0],[Kt.width,Kt.height]],Dp=h0.constrain()(d0,x0,V);h0.transform(Pp,Dp),h0.wheelDelta(wheelDelta),bt.setState({d3Zoom:h0,d3Selection:Pp,d3ZoomHandler:Pp.on("wheel.zoom"),transform:[Dp.x,Dp.y,Dp.k],domNode:zt.current.closest(".react-flow")})}},[]),reactExports.useEffect(()=>{kp&&Mn&&(s&&!qo&&!sa?kp.on("wheel.zoom",Kt=>{if(isWrappedWithClass(Kt,q))return!1;Kt.preventDefault(),Kt.stopImmediatePropagation();const h0=kp.property("__zoom").k||1;if(Kt.ctrlKey&&l){const M0=pointer(Kt),sm=wheelDelta(Kt),mm=h0*Math.pow(2,sm);Mn.scaleTo(kp,mm,M0,Kt);return}const Pp=Kt.deltaMode===1?20:1;let d0=m===PanOnScrollMode.Vertical?0:Kt.deltaX*Pp,x0=m===PanOnScrollMode.Horizontal?0:Kt.deltaY*Pp;!isMacOs()&&Kt.shiftKey&&m!==PanOnScrollMode.Vertical&&(d0=Kt.deltaY*Pp,x0=0),Mn.translateBy(kp,-(d0/h0)*f,-(x0/h0)*f,{internal:!0});const Dp=eventToFlowTransform(kp.property("__zoom")),{onViewportChangeStart:c0,onViewportChange:u0,onViewportChangeEnd:y0}=bt.getState();clearTimeout(Cp.current),wp.current||(wp.current=!0,e?.(Kt,Dp),c0?.(Dp)),wp.current&&(r?.(Kt,Dp),u0?.(Dp),Cp.current=setTimeout(()=>{t?.(Kt,Dp),y0?.(Dp),wp.current=!1},150))},{passive:!1}):typeof zp<"u"&&kp.on("wheel.zoom",function(Kt,h0){if(!K&&Kt.type==="wheel"&&!Kt.ctrlKey||isWrappedWithClass(Kt,q))return null;Kt.preventDefault(),zp.call(this,Kt,h0)},{passive:!1}))},[sa,s,m,kp,Mn,zp,qo,l,K,q,e,r,t]),reactExports.useEffect(()=>{Mn&&Mn.on("start",Kt=>{if(!Kt.sourceEvent||Kt.sourceEvent.internal)return null;ae.current=Kt.sourceEvent?.button;const{onViewportChangeStart:h0}=bt.getState(),Pp=eventToFlowTransform(Kt.transform);Ut.current=!0,Zt.current=Pp,Kt.sourceEvent?.type==="mousedown"&&bt.setState({paneDragging:!0}),h0?.(Pp),e?.(Kt.sourceEvent,Pp)})},[Mn,e]),reactExports.useEffect(()=>{Mn&&(sa&&!Ut.current?Mn.on("zoom",null):sa||Mn.on("zoom",Kt=>{const{onViewportChange:h0}=bt.getState();if(bt.setState({transform:[Kt.transform.x,Kt.transform.y,Kt.transform.k]}),it.current=!!(a&&isRightClickPan(M,ae.current??0)),(r||h0)&&!Kt.sourceEvent?.internal){const Pp=eventToFlowTransform(Kt.transform);h0?.(Pp),r?.(Kt.sourceEvent,Pp)}}))},[sa,Mn,r,M,a]),reactExports.useEffect(()=>{Mn&&Mn.on("end",Kt=>{if(!Kt.sourceEvent||Kt.sourceEvent.internal)return null;const{onViewportChangeEnd:h0}=bt.getState();if(Ut.current=!1,bt.setState({paneDragging:!1}),a&&isRightClickPan(M,ae.current??0)&&!it.current&&a(Kt.sourceEvent),it.current=!1,(t||h0)&&viewChanged(Zt.current,Kt.transform)){const Pp=eventToFlowTransform(Kt.transform);Zt.current=Pp,clearTimeout(wt.current),wt.current=setTimeout(()=>{h0?.(Pp),t?.(Kt.sourceEvent,Pp)},s?150:0)}})},[Mn,s,M,t,a]),reactExports.useEffect(()=>{Mn&&Mn.filter(Kt=>{const h0=qo||o,Pp=l&&Kt.ctrlKey;if((M===!0||Array.isArray(M)&&M.includes(1))&&Kt.button===1&&Kt.type==="mousedown"&&(isWrappedWithClass(Kt,"react-flow__node")||isWrappedWithClass(Kt,"react-flow__edge")))return!0;if(!M&&!h0&&!s&&!b&&!l||sa||!b&&Kt.type==="dblclick"||isWrappedWithClass(Kt,q)&&Kt.type==="wheel"||isWrappedWithClass(Kt,Q)&&(Kt.type!=="wheel"||s&&Kt.type==="wheel"&&!qo)||!l&&Kt.ctrlKey&&Kt.type==="wheel"||!h0&&!s&&!Pp&&Kt.type==="wheel"||!M&&(Kt.type==="mousedown"||Kt.type==="touchstart")||Array.isArray(M)&&!M.includes(Kt.button)&&Kt.type==="mousedown")return!1;const d0=Array.isArray(M)&&M.includes(Kt.button)||!Kt.button||Kt.button<=1;return(!Kt.ctrlKey||Kt.type==="wheel")&&d0})},[sa,Mn,o,l,s,b,M,E,qo]),React.createElement("div",{className:"react-flow__renderer",ref:zt,style:containerStyle},vt)},selector$9=r=>({userSelectionActive:r.userSelectionActive,userSelectionRect:r.userSelectionRect});function UserSelection(){const{userSelectionActive:r,userSelectionRect:e}=useStore$1(selector$9,shallow$1);return r&&e?React.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:e.width,height:e.height,transform:`translate(${e.x}px, ${e.y}px)`}}):null}function handleParentExpand(r,e){const t=e.parentNode||e.parentId,a=r.find(o=>o.id===t);if(a){const o=e.position.x+e.width-a.width,l=e.position.y+e.height-a.height;if(o>0||l>0||e.position.x<0||e.position.y<0){if(a.style={...a.style},a.style.width=a.style.width??a.width,a.style.height=a.style.height??a.height,o>0&&(a.style.width+=o),l>0&&(a.style.height+=l),e.position.x<0){const s=Math.abs(e.position.x);a.position.x=a.position.x-s,a.style.width+=s,e.position.x=0}if(e.position.y<0){const s=Math.abs(e.position.y);a.position.y=a.position.y-s,a.style.height+=s,e.position.y=0}a.width=a.style.width,a.height=a.style.height}}}function applyChanges(r,e){if(r.some(a=>a.type==="reset"))return r.filter(a=>a.type==="reset").map(a=>a.item);const t=r.filter(a=>a.type==="add").map(a=>a.item);return e.reduce((a,o)=>{const l=r.filter(f=>f.id===o.id);if(l.length===0)return a.push(o),a;const s={...o};for(const f of l)if(f)switch(f.type){case"select":{s.selected=f.selected;break}case"position":{typeof f.position<"u"&&(s.position=f.position),typeof f.positionAbsolute<"u"&&(s.positionAbsolute=f.positionAbsolute),typeof f.dragging<"u"&&(s.dragging=f.dragging),s.expandParent&&handleParentExpand(a,s);break}case"dimensions":{typeof f.dimensions<"u"&&(s.width=f.dimensions.width,s.height=f.dimensions.height),typeof f.updateStyle<"u"&&(s.style={...s.style||{},...f.dimensions}),typeof f.resizing=="boolean"&&(s.resizing=f.resizing),s.expandParent&&handleParentExpand(a,s);break}case"remove":return a}return a.push(s),a},t)}function applyNodeChanges(r,e){return applyChanges(r,e)}function applyEdgeChanges(r,e){return applyChanges(r,e)}const createSelectionChange=(r,e)=>({id:r,type:"select",selected:e});function getSelectionChanges(r,e){return r.reduce((t,a)=>{const o=e.includes(a.id);return!a.selected&&o?(a.selected=!0,t.push(createSelectionChange(a.id,!0))):a.selected&&!o&&(a.selected=!1,t.push(createSelectionChange(a.id,!1))),t},[])}const wrapHandler=(r,e)=>t=>{t.target===e.current&&r?.(t)},selector$8=r=>({userSelectionActive:r.userSelectionActive,elementsSelectable:r.elementsSelectable,dragging:r.paneDragging}),Pane=reactExports.memo(({isSelecting:r,selectionMode:e=SelectionMode.Full,panOnDrag:t,onSelectionStart:a,onSelectionEnd:o,onPaneClick:l,onPaneContextMenu:s,onPaneScroll:f,onPaneMouseEnter:m,onPaneMouseMove:b,onPaneMouseLeave:E,children:M})=>{const I=reactExports.useRef(null),V=useStoreApi(),Z=reactExports.useRef(0),ee=reactExports.useRef(0),le=reactExports.useRef(),{userSelectionActive:K,elementsSelectable:vt,dragging:q}=useStore$1(selector$8,shallow$1),Q=()=>{V.setState({userSelectionActive:!1,userSelectionRect:null}),Z.current=0,ee.current=0},wt=zp=>{l?.(zp),V.getState().resetSelectedElements(),V.setState({nodesSelectionActive:!1})},bt=zp=>{if(Array.isArray(t)&&t?.includes(2)){zp.preventDefault();return}s?.(zp)},Ut=f?zp=>f(zp):void 0,it=zp=>{const{resetSelectedElements:sa,domNode:qo}=V.getState();if(le.current=qo?.getBoundingClientRect(),!vt||!r||zp.button!==0||zp.target!==I.current||!le.current)return;const{x:ae,y:wp}=getEventPosition(zp,le.current);sa(),V.setState({userSelectionRect:{width:0,height:0,startX:ae,startY:wp,x:ae,y:wp}}),a?.(zp)},zt=zp=>{const{userSelectionRect:sa,nodeInternals:qo,edges:ae,transform:wp,onNodesChange:Cp,onEdgesChange:Kt,nodeOrigin:h0,getNodes:Pp}=V.getState();if(!r||!le.current||!sa)return;V.setState({userSelectionActive:!0,nodesSelectionActive:!1});const d0=getEventPosition(zp,le.current),x0=sa.startX??0,Dp=sa.startY??0,c0={...sa,x:d0.x<x0?d0.x:x0,y:d0.y<Dp?d0.y:Dp,width:Math.abs(d0.x-x0),height:Math.abs(d0.y-Dp)},u0=Pp(),y0=getNodesInside(qo,c0,wp,e===SelectionMode.Partial,!0,h0),M0=getConnectedEdges(y0,ae).map(mm=>mm.id),sm=y0.map(mm=>mm.id);if(Z.current!==sm.length){Z.current=sm.length;const mm=getSelectionChanges(u0,sm);mm.length&&Cp?.(mm)}if(ee.current!==M0.length){ee.current=M0.length;const mm=getSelectionChanges(ae,M0);mm.length&&Kt?.(mm)}V.setState({userSelectionRect:c0})},Zt=zp=>{if(zp.button!==0)return;const{userSelectionRect:sa}=V.getState();!K&&sa&&zp.target===I.current&&wt?.(zp),V.setState({nodesSelectionActive:Z.current>0}),Q(),o?.(zp)},Mn=zp=>{K&&(V.setState({nodesSelectionActive:Z.current>0}),o?.(zp)),Q()},kp=vt&&(r||K);return React.createElement("div",{className:cc$1(["react-flow__pane",{dragging:q,selection:r}]),onClick:kp?void 0:wrapHandler(wt,I),onContextMenu:wrapHandler(bt,I),onWheel:wrapHandler(Ut,I),onMouseEnter:kp?void 0:m,onMouseDown:kp?it:void 0,onMouseMove:kp?zt:b,onMouseUp:kp?Zt:void 0,onMouseLeave:kp?Mn:E,ref:I,style:containerStyle},M,React.createElement(UserSelection,null))});Pane.displayName="Pane";function isParentSelected(r,e){const t=r.parentNode||r.parentId;if(!t)return!1;const a=e.get(t);return a?a.selected?!0:isParentSelected(a,e):!1}function hasSelector(r,e,t){let a=r;do{if(a?.matches(e))return!0;if(a===t.current)return!1;a=a.parentElement}while(a);return!1}function getDragItems(r,e,t,a){return Array.from(r.values()).filter(o=>(o.selected||o.id===a)&&(!o.parentNode||o.parentId||!isParentSelected(o,r))&&(o.draggable||e&&typeof o.draggable>"u")).map(o=>({id:o.id,position:o.position||{x:0,y:0},positionAbsolute:o.positionAbsolute||{x:0,y:0},distance:{x:t.x-(o.positionAbsolute?.x??0),y:t.y-(o.positionAbsolute?.y??0)},delta:{x:0,y:0},extent:o.extent,parentNode:o.parentNode||o.parentId,parentId:o.parentNode||o.parentId,width:o.width,height:o.height,expandParent:o.expandParent}))}function clampNodeExtent(r,e){return!e||e==="parent"?e:[e[0],[e[1][0]-(r.width||0),e[1][1]-(r.height||0)]]}function calcNextPosition(r,e,t,a,o=[0,0],l){const s=clampNodeExtent(r,r.extent||a);let f=s;const m=r.parentNode||r.parentId;if(r.extent==="parent"&&!r.expandParent)if(m&&r.width&&r.height){const M=t.get(m),{x:I,y:V}=getNodePositionWithOrigin(M,o).positionAbsolute;f=M&&isNumeric(I)&&isNumeric(V)&&isNumeric(M.width)&&isNumeric(M.height)?[[I+r.width*o[0],V+r.height*o[1]],[I+M.width-r.width+r.width*o[0],V+M.height-r.height+r.height*o[1]]]:f}else l?.("005",errorMessages.error005()),f=s;else if(r.extent&&m&&r.extent!=="parent"){const M=t.get(m),{x:I,y:V}=getNodePositionWithOrigin(M,o).positionAbsolute;f=[[r.extent[0][0]+I,r.extent[0][1]+V],[r.extent[1][0]+I,r.extent[1][1]+V]]}let b={x:0,y:0};if(m){const M=t.get(m);b=getNodePositionWithOrigin(M,o).positionAbsolute}const E=f&&f!=="parent"?clampPosition(e,f):e;return{position:{x:E.x-b.x,y:E.y-b.y},positionAbsolute:E}}function getEventHandlerParams({nodeId:r,dragItems:e,nodeInternals:t}){const a=e.map(o=>({...t.get(o.id),position:o.position,positionAbsolute:o.positionAbsolute}));return[r?a.find(o=>o.id===r):a[0],a]}const getHandleBounds=(r,e,t,a)=>{const o=e.querySelectorAll(r);if(!o||!o.length)return null;const l=Array.from(o),s=e.getBoundingClientRect(),f={x:s.width*a[0],y:s.height*a[1]};return l.map(m=>{const b=m.getBoundingClientRect();return{id:m.getAttribute("data-handleid"),position:m.getAttribute("data-handlepos"),x:(b.left-s.left-f.x)/t,y:(b.top-s.top-f.y)/t,...getDimensions(m)}})};function getMouseHandler(r,e,t){return t===void 0?t:a=>{const o=e().nodeInternals.get(r);o&&t(a,{...o})}}function handleNodeClick({id:r,store:e,unselect:t=!1,nodeRef:a}){const{addSelectedNodes:o,unselectNodesAndEdges:l,multiSelectionActive:s,nodeInternals:f,onError:m}=e.getState(),b=f.get(r);if(!b){m?.("012",errorMessages.error012(r));return}e.setState({nodesSelectionActive:!1}),b.selected?(t||b.selected&&s)&&(l({nodes:[b],edges:[]}),requestAnimationFrame(()=>a?.current?.blur())):o([r])}function useGetPointerPosition(){const r=useStoreApi();return reactExports.useCallback(({sourceEvent:t})=>{const{transform:a,snapGrid:o,snapToGrid:l}=r.getState(),s=t.touches?t.touches[0].clientX:t.clientX,f=t.touches?t.touches[0].clientY:t.clientY,m={x:(s-a[0])/a[2],y:(f-a[1])/a[2]};return{xSnapped:l?o[0]*Math.round(m.x/o[0]):m.x,ySnapped:l?o[1]*Math.round(m.y/o[1]):m.y,...m}},[])}function wrapSelectionDragFunc(r){return(e,t,a)=>r?.(e,a)}function useDrag({nodeRef:r,disabled:e=!1,noDragClassName:t,handleSelector:a,nodeId:o,isSelectable:l,selectNodesOnDrag:s}){const f=useStoreApi(),[m,b]=reactExports.useState(!1),E=reactExports.useRef([]),M=reactExports.useRef({x:null,y:null}),I=reactExports.useRef(0),V=reactExports.useRef(null),Z=reactExports.useRef({x:0,y:0}),ee=reactExports.useRef(null),le=reactExports.useRef(!1),K=reactExports.useRef(!1),vt=reactExports.useRef(!1),q=useGetPointerPosition();return reactExports.useEffect(()=>{if(r?.current){const Q=select(r.current),wt=({x:it,y:zt})=>{const{nodeInternals:Zt,onNodeDrag:Mn,onSelectionDrag:kp,updateNodePositions:zp,nodeExtent:sa,snapGrid:qo,snapToGrid:ae,nodeOrigin:wp,onError:Cp}=f.getState();M.current={x:it,y:zt};let Kt=!1,h0={x:0,y:0,x2:0,y2:0};if(E.current.length>1&&sa){const d0=getNodesBounds(E.current,wp);h0=rectToBox(d0)}if(E.current=E.current.map(d0=>{const x0={x:it-d0.distance.x,y:zt-d0.distance.y};ae&&(x0.x=qo[0]*Math.round(x0.x/qo[0]),x0.y=qo[1]*Math.round(x0.y/qo[1]));const Dp=[[sa[0][0],sa[0][1]],[sa[1][0],sa[1][1]]];E.current.length>1&&sa&&!d0.extent&&(Dp[0][0]=d0.positionAbsolute.x-h0.x+sa[0][0],Dp[1][0]=d0.positionAbsolute.x+(d0.width??0)-h0.x2+sa[1][0],Dp[0][1]=d0.positionAbsolute.y-h0.y+sa[0][1],Dp[1][1]=d0.positionAbsolute.y+(d0.height??0)-h0.y2+sa[1][1]);const c0=calcNextPosition(d0,x0,Zt,Dp,wp,Cp);return Kt=Kt||d0.position.x!==c0.position.x||d0.position.y!==c0.position.y,d0.position=c0.position,d0.positionAbsolute=c0.positionAbsolute,d0}),!Kt)return;zp(E.current,!0,!0),b(!0);const Pp=o?Mn:wrapSelectionDragFunc(kp);if(Pp&&ee.current){const[d0,x0]=getEventHandlerParams({nodeId:o,dragItems:E.current,nodeInternals:Zt});Pp(ee.current,d0,x0)}},bt=()=>{if(!V.current)return;const[it,zt]=calcAutoPan(Z.current,V.current);if(it!==0||zt!==0){const{transform:Zt,panBy:Mn}=f.getState();M.current.x=(M.current.x??0)-it/Zt[2],M.current.y=(M.current.y??0)-zt/Zt[2],Mn({x:it,y:zt})&&wt(M.current)}I.current=requestAnimationFrame(bt)},Ut=it=>{const{nodeInternals:zt,multiSelectionActive:Zt,nodesDraggable:Mn,unselectNodesAndEdges:kp,onNodeDragStart:zp,onSelectionDragStart:sa}=f.getState();K.current=!0;const qo=o?zp:wrapSelectionDragFunc(sa);(!s||!l)&&!Zt&&o&&(zt.get(o)?.selected||kp()),o&&l&&s&&handleNodeClick({id:o,store:f,nodeRef:r});const ae=q(it);if(M.current=ae,E.current=getDragItems(zt,Mn,ae,o),qo&&E.current){const[wp,Cp]=getEventHandlerParams({nodeId:o,dragItems:E.current,nodeInternals:zt});qo(it.sourceEvent,wp,Cp)}};if(e)Q.on(".drag",null);else{const it=drag().on("start",zt=>{const{domNode:Zt,nodeDragThreshold:Mn}=f.getState();Mn===0&&Ut(zt),vt.current=!1;const kp=q(zt);M.current=kp,V.current=Zt?.getBoundingClientRect()||null,Z.current=getEventPosition(zt.sourceEvent,V.current)}).on("drag",zt=>{const Zt=q(zt),{autoPanOnNodeDrag:Mn,nodeDragThreshold:kp}=f.getState();if(zt.sourceEvent.type==="touchmove"&&zt.sourceEvent.touches.length>1&&(vt.current=!0),!vt.current){if(!le.current&&K.current&&Mn&&(le.current=!0,bt()),!K.current){const zp=Zt.xSnapped-(M?.current?.x??0),sa=Zt.ySnapped-(M?.current?.y??0);Math.sqrt(zp*zp+sa*sa)>kp&&Ut(zt)}(M.current.x!==Zt.xSnapped||M.current.y!==Zt.ySnapped)&&E.current&&K.current&&(ee.current=zt.sourceEvent,Z.current=getEventPosition(zt.sourceEvent,V.current),wt(Zt))}}).on("end",zt=>{if(!(!K.current||vt.current)&&(b(!1),le.current=!1,K.current=!1,cancelAnimationFrame(I.current),E.current)){const{updateNodePositions:Zt,nodeInternals:Mn,onNodeDragStop:kp,onSelectionDragStop:zp}=f.getState(),sa=o?kp:wrapSelectionDragFunc(zp);if(Zt(E.current,!1,!1),sa){const[qo,ae]=getEventHandlerParams({nodeId:o,dragItems:E.current,nodeInternals:Mn});sa(zt.sourceEvent,qo,ae)}}}).filter(zt=>{const Zt=zt.target;return!zt.button&&(!t||!hasSelector(Zt,`.${t}`,r))&&(!a||hasSelector(Zt,a,r))});return Q.call(it),()=>{Q.on(".drag",null)}}}},[r,e,t,a,l,f,o,s,q]),m}function useUpdateNodePositions(){const r=useStoreApi();return reactExports.useCallback(t=>{const{nodeInternals:a,nodeExtent:o,updateNodePositions:l,getNodes:s,snapToGrid:f,snapGrid:m,onError:b,nodesDraggable:E}=r.getState(),M=s().filter(vt=>vt.selected&&(vt.draggable||E&&typeof vt.draggable>"u")),I=f?m[0]:5,V=f?m[1]:5,Z=t.isShiftPressed?4:1,ee=t.x*I*Z,le=t.y*V*Z,K=M.map(vt=>{if(vt.positionAbsolute){const q={x:vt.positionAbsolute.x+ee,y:vt.positionAbsolute.y+le};f&&(q.x=m[0]*Math.round(q.x/m[0]),q.y=m[1]*Math.round(q.y/m[1]));const{positionAbsolute:Q,position:wt}=calcNextPosition(vt,q,a,o,void 0,b);vt.position=wt,vt.positionAbsolute=Q}return vt});l(K,!0,!1)},[])}const arrowKeyDiffs={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var wrapNode=r=>{const e=({id:t,type:a,data:o,xPos:l,yPos:s,xPosOrigin:f,yPosOrigin:m,selected:b,onClick:E,onMouseEnter:M,onMouseMove:I,onMouseLeave:V,onContextMenu:Z,onDoubleClick:ee,style:le,className:K,isDraggable:vt,isSelectable:q,isConnectable:Q,isFocusable:wt,selectNodesOnDrag:bt,sourcePosition:Ut,targetPosition:it,hidden:zt,resizeObserver:Zt,dragHandle:Mn,zIndex:kp,isParent:zp,noDragClassName:sa,noPanClassName:qo,initialized:ae,disableKeyboardA11y:wp,ariaLabel:Cp,rfId:Kt,hasHandleBounds:h0})=>{const Pp=useStoreApi(),d0=reactExports.useRef(null),x0=reactExports.useRef(null),Dp=reactExports.useRef(Ut),c0=reactExports.useRef(it),u0=reactExports.useRef(a),y0=q||vt||E||M||I||V,M0=useUpdateNodePositions(),sm=getMouseHandler(t,Pp.getState,M),mm=getMouseHandler(t,Pp.getState,I),Mm=getMouseHandler(t,Pp.getState,V),v1=getMouseHandler(t,Pp.getState,Z),v0=getMouseHandler(t,Pp.getState,ee),D1=w1=>{const{nodeDragThreshold:o1}=Pp.getState();if(q&&(!bt||!vt||o1>0)&&handleNodeClick({id:t,store:Pp,nodeRef:d0}),E){const g1=Pp.getState().nodeInternals.get(t);g1&&E(w1,{...g1})}},P1=w1=>{if(!isInputDOMNode(w1)&&!wp)if(elementSelectionKeys.includes(w1.key)&&q){const o1=w1.key==="Escape";handleNodeClick({id:t,store:Pp,unselect:o1,nodeRef:d0})}else vt&&b&&Object.prototype.hasOwnProperty.call(arrowKeyDiffs,w1.key)&&(Pp.setState({ariaLiveMessage:`Moved selected node ${w1.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~l}, y: ${~~s}`}),M0({x:arrowKeyDiffs[w1.key].x,y:arrowKeyDiffs[w1.key].y,isShiftPressed:w1.shiftKey}))};reactExports.useEffect(()=>()=>{x0.current&&(Zt?.unobserve(x0.current),x0.current=null)},[]),reactExports.useEffect(()=>{if(d0.current&&!zt){const w1=d0.current;(!ae||!h0||x0.current!==w1)&&(x0.current&&Zt?.unobserve(x0.current),Zt?.observe(w1),x0.current=w1)}},[zt,ae,h0]),reactExports.useEffect(()=>{const w1=u0.current!==a,o1=Dp.current!==Ut,g1=c0.current!==it;d0.current&&(w1||o1||g1)&&(w1&&(u0.current=a),o1&&(Dp.current=Ut),g1&&(c0.current=it),Pp.getState().updateNodeDimensions([{id:t,nodeElement:d0.current,forceUpdate:!0}]))},[t,a,Ut,it]);const ig=useDrag({nodeRef:d0,disabled:zt||!vt,noDragClassName:sa,handleSelector:Mn,nodeId:t,isSelectable:q,selectNodesOnDrag:bt});return zt?null:React.createElement("div",{className:cc$1(["react-flow__node",`react-flow__node-${a}`,{[qo]:vt},K,{selected:b,selectable:q,parent:zp,dragging:ig}]),ref:d0,style:{zIndex:kp,transform:`translate(${f}px,${m}px)`,pointerEvents:y0?"all":"none",visibility:ae?"visible":"hidden",...le},"data-id":t,"data-testid":`rf__node-${t}`,onMouseEnter:sm,onMouseMove:mm,onMouseLeave:Mm,onContextMenu:v1,onClick:D1,onDoubleClick:v0,onKeyDown:wt?P1:void 0,tabIndex:wt?0:void 0,role:wt?"button":void 0,"aria-describedby":wp?void 0:`${ARIA_NODE_DESC_KEY}-${Kt}`,"aria-label":Cp},React.createElement(Provider$2,{value:t},React.createElement(r,{id:t,data:o,type:a,xPos:l,yPos:s,selected:b,isConnectable:Q,sourcePosition:Ut,targetPosition:it,dragging:ig,dragHandle:Mn,zIndex:kp})))};return e.displayName="NodeWrapper",reactExports.memo(e)};const selector$7=r=>{const e=r.getNodes().filter(t=>t.selected);return{...getNodesBounds(e,r.nodeOrigin),transformString:`translate(${r.transform[0]}px,${r.transform[1]}px) scale(${r.transform[2]})`,userSelectionActive:r.userSelectionActive}};function NodesSelection({onSelectionContextMenu:r,noPanClassName:e,disableKeyboardA11y:t}){const a=useStoreApi(),{width:o,height:l,x:s,y:f,transformString:m,userSelectionActive:b}=useStore$1(selector$7,shallow$1),E=useUpdateNodePositions(),M=reactExports.useRef(null);if(reactExports.useEffect(()=>{t||M.current?.focus({preventScroll:!0})},[t]),useDrag({nodeRef:M}),b||!o||!l)return null;const I=r?Z=>{const ee=a.getState().getNodes().filter(le=>le.selected);r(Z,ee)}:void 0,V=Z=>{Object.prototype.hasOwnProperty.call(arrowKeyDiffs,Z.key)&&E({x:arrowKeyDiffs[Z.key].x,y:arrowKeyDiffs[Z.key].y,isShiftPressed:Z.shiftKey})};return React.createElement("div",{className:cc$1(["react-flow__nodesselection","react-flow__container",e]),style:{transform:m}},React.createElement("div",{ref:M,className:"react-flow__nodesselection-rect",onContextMenu:I,tabIndex:t?void 0:-1,onKeyDown:t?void 0:V,style:{width:o,height:l,top:f,left:s}}))}var NodesSelection$1=reactExports.memo(NodesSelection);const selector$6=r=>r.nodesSelectionActive,FlowRenderer=({children:r,onPaneClick:e,onPaneMouseEnter:t,onPaneMouseMove:a,onPaneMouseLeave:o,onPaneContextMenu:l,onPaneScroll:s,deleteKeyCode:f,onMove:m,onMoveStart:b,onMoveEnd:E,selectionKeyCode:M,selectionOnDrag:I,selectionMode:V,onSelectionStart:Z,onSelectionEnd:ee,multiSelectionKeyCode:le,panActivationKeyCode:K,zoomActivationKeyCode:vt,elementsSelectable:q,zoomOnScroll:Q,zoomOnPinch:wt,panOnScroll:bt,panOnScrollSpeed:Ut,panOnScrollMode:it,zoomOnDoubleClick:zt,panOnDrag:Zt,defaultViewport:Mn,translateExtent:kp,minZoom:zp,maxZoom:sa,preventScrolling:qo,onSelectionContextMenu:ae,noWheelClassName:wp,noPanClassName:Cp,disableKeyboardA11y:Kt})=>{const h0=useStore$1(selector$6),Pp=useKeyPress(M),d0=useKeyPress(K),x0=d0||Zt,Dp=d0||bt,c0=Pp||I&&x0!==!0;return useGlobalKeyHandler({deleteKeyCode:f,multiSelectionKeyCode:le}),React.createElement(ZoomPane,{onMove:m,onMoveStart:b,onMoveEnd:E,onPaneContextMenu:l,elementsSelectable:q,zoomOnScroll:Q,zoomOnPinch:wt,panOnScroll:Dp,panOnScrollSpeed:Ut,panOnScrollMode:it,zoomOnDoubleClick:zt,panOnDrag:!Pp&&x0,defaultViewport:Mn,translateExtent:kp,minZoom:zp,maxZoom:sa,zoomActivationKeyCode:vt,preventScrolling:qo,noWheelClassName:wp,noPanClassName:Cp},React.createElement(Pane,{onSelectionStart:Z,onSelectionEnd:ee,onPaneClick:e,onPaneMouseEnter:t,onPaneMouseMove:a,onPaneMouseLeave:o,onPaneContextMenu:l,onPaneScroll:s,panOnDrag:x0,isSelecting:!!c0,selectionMode:V},r,h0&&React.createElement(NodesSelection$1,{onSelectionContextMenu:ae,noPanClassName:Cp,disableKeyboardA11y:Kt})))};FlowRenderer.displayName="FlowRenderer";var FlowRenderer$1=reactExports.memo(FlowRenderer);function useVisibleNodes(r){return useStore$1(reactExports.useCallback(t=>r?getNodesInside(t.nodeInternals,{x:0,y:0,width:t.width,height:t.height},t.transform,!0):t.getNodes(),[r]))}function createNodeTypes(r){const e={input:wrapNode(r.input||InputNode$1),default:wrapNode(r.default||DefaultNode$1),output:wrapNode(r.output||OutputNode$1),group:wrapNode(r.group||GroupNode)},t={},a=Object.keys(r).filter(o=>!["input","default","output","group"].includes(o)).reduce((o,l)=>(o[l]=wrapNode(r[l]||DefaultNode$1),o),t);return{...e,...a}}const getPositionWithOrigin=({x:r,y:e,width:t,height:a,origin:o})=>!t||!a?{x:r,y:e}:o[0]<0||o[1]<0||o[0]>1||o[1]>1?{x:r,y:e}:{x:r-t*o[0],y:e-a*o[1]},selector$5=r=>({nodesDraggable:r.nodesDraggable,nodesConnectable:r.nodesConnectable,nodesFocusable:r.nodesFocusable,elementsSelectable:r.elementsSelectable,updateNodeDimensions:r.updateNodeDimensions,onError:r.onError}),NodeRenderer=r=>{const{nodesDraggable:e,nodesConnectable:t,nodesFocusable:a,elementsSelectable:o,updateNodeDimensions:l,onError:s}=useStore$1(selector$5,shallow$1),f=useVisibleNodes(r.onlyRenderVisibleElements),m=reactExports.useRef(),b=reactExports.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const E=new ResizeObserver(M=>{const I=M.map(V=>({id:V.target.getAttribute("data-id"),nodeElement:V.target,forceUpdate:!0}));l(I)});return m.current=E,E},[]);return reactExports.useEffect(()=>()=>{m?.current?.disconnect()},[]),React.createElement("div",{className:"react-flow__nodes",style:containerStyle},f.map(E=>{let M=E.type||"default";r.nodeTypes[M]||(s?.("003",errorMessages.error003(M)),M="default");const I=r.nodeTypes[M]||r.nodeTypes.default,V=!!(E.draggable||e&&typeof E.draggable>"u"),Z=!!(E.selectable||o&&typeof E.selectable>"u"),ee=!!(E.connectable||t&&typeof E.connectable>"u"),le=!!(E.focusable||a&&typeof E.focusable>"u"),K=r.nodeExtent?clampPosition(E.positionAbsolute,r.nodeExtent):E.positionAbsolute,vt=K?.x??0,q=K?.y??0,Q=getPositionWithOrigin({x:vt,y:q,width:E.width??0,height:E.height??0,origin:r.nodeOrigin});return React.createElement(I,{key:E.id,id:E.id,className:E.className,style:E.style,type:M,data:E.data,sourcePosition:E.sourcePosition||Position.Bottom,targetPosition:E.targetPosition||Position.Top,hidden:E.hidden,xPos:vt,yPos:q,xPosOrigin:Q.x,yPosOrigin:Q.y,selectNodesOnDrag:r.selectNodesOnDrag,onClick:r.onNodeClick,onMouseEnter:r.onNodeMouseEnter,onMouseMove:r.onNodeMouseMove,onMouseLeave:r.onNodeMouseLeave,onContextMenu:r.onNodeContextMenu,onDoubleClick:r.onNodeDoubleClick,selected:!!E.selected,isDraggable:V,isSelectable:Z,isConnectable:ee,isFocusable:le,resizeObserver:b,dragHandle:E.dragHandle,zIndex:E[internalsSymbol]?.z??0,isParent:!!E[internalsSymbol]?.isParent,noDragClassName:r.noDragClassName,noPanClassName:r.noPanClassName,initialized:!!E.width&&!!E.height,rfId:r.rfId,disableKeyboardA11y:r.disableKeyboardA11y,ariaLabel:E.ariaLabel,hasHandleBounds:!!E[internalsSymbol]?.handleBounds})}))};NodeRenderer.displayName="NodeRenderer";var NodeRenderer$1=reactExports.memo(NodeRenderer);const shiftX=(r,e,t)=>t===Position.Left?r-e:t===Position.Right?r+e:r,shiftY=(r,e,t)=>t===Position.Top?r-e:t===Position.Bottom?r+e:r,EdgeUpdaterClassName="react-flow__edgeupdater",EdgeAnchor=({position:r,centerX:e,centerY:t,radius:a=10,onMouseDown:o,onMouseEnter:l,onMouseOut:s,type:f})=>React.createElement("circle",{onMouseDown:o,onMouseEnter:l,onMouseOut:s,className:cc$1([EdgeUpdaterClassName,`${EdgeUpdaterClassName}-${f}`]),cx:shiftX(e,a,r),cy:shiftY(t,a,r),r:a,stroke:"transparent",fill:"transparent"}),alwaysValidConnection=()=>!0;var wrapEdge=r=>{const e=({id:t,className:a,type:o,data:l,onClick:s,onEdgeDoubleClick:f,selected:m,animated:b,label:E,labelStyle:M,labelShowBg:I,labelBgStyle:V,labelBgPadding:Z,labelBgBorderRadius:ee,style:le,source:K,target:vt,sourceX:q,sourceY:Q,targetX:wt,targetY:bt,sourcePosition:Ut,targetPosition:it,elementsSelectable:zt,hidden:Zt,sourceHandleId:Mn,targetHandleId:kp,onContextMenu:zp,onMouseEnter:sa,onMouseMove:qo,onMouseLeave:ae,reconnectRadius:wp,onReconnect:Cp,onReconnectStart:Kt,onReconnectEnd:h0,markerEnd:Pp,markerStart:d0,rfId:x0,ariaLabel:Dp,isFocusable:c0,isReconnectable:u0,pathOptions:y0,interactionWidth:M0,disableKeyboardA11y:sm})=>{const mm=reactExports.useRef(null),[Mm,v1]=reactExports.useState(!1),[v0,D1]=reactExports.useState(!1),P1=useStoreApi(),ig=reactExports.useMemo(()=>`url('#${getMarkerId(d0,x0)}')`,[d0,x0]),w1=reactExports.useMemo(()=>`url('#${getMarkerId(Pp,x0)}')`,[Pp,x0]);if(Zt)return null;const o1=Sm=>{const{edges:Xm,addSelectedEdges:cm,unselectNodesAndEdges:zm,multiSelectionActive:x1}=P1.getState(),Um=Xm.find(h1=>h1.id===t);Um&&(zt&&(P1.setState({nodesSelectionActive:!1}),Um.selected&&x1?(zm({nodes:[],edges:[Um]}),mm.current?.blur()):cm([t])),s&&s(Sm,Um))},g1=getMouseHandler$1(t,P1.getState,f),X1=getMouseHandler$1(t,P1.getState,zp),sg=getMouseHandler$1(t,P1.getState,sa),og=getMouseHandler$1(t,P1.getState,qo),R0=getMouseHandler$1(t,P1.getState,ae),Xp=(Sm,Xm)=>{if(Sm.button!==0)return;const{edges:cm,isValidConnection:zm}=P1.getState(),x1=Xm?vt:K,Um=(Xm?kp:Mn)||null,h1=Xm?"target":"source",Sg=zm||alwaysValidConnection,um=Xm,M1=cm.find(n1=>n1.id===t);D1(!0),Kt?.(Sm,M1,h1);const F1=n1=>{D1(!1),h0?.(n1,M1,h1)};handlePointerDown({event:Sm,handleId:Um,nodeId:x1,onConnect:n1=>Cp?.(M1,n1),isTarget:um,getState:P1.getState,setState:P1.setState,isValidConnection:Sg,edgeUpdaterType:h1,onReconnectEnd:F1})},wm=Sm=>Xp(Sm,!0),$m=Sm=>Xp(Sm,!1),Vp=()=>v1(!0),r0=()=>v1(!1),B0=!zt&&!s,bm=Sm=>{if(!sm&&elementSelectionKeys.includes(Sm.key)&&zt){const{unselectNodesAndEdges:Xm,addSelectedEdges:cm,edges:zm}=P1.getState();Sm.key==="Escape"?(mm.current?.blur(),Xm({edges:[zm.find(Um=>Um.id===t)]})):cm([t])}};return React.createElement("g",{className:cc$1(["react-flow__edge",`react-flow__edge-${o}`,a,{selected:m,animated:b,inactive:B0,updating:Mm}]),onClick:o1,onDoubleClick:g1,onContextMenu:X1,onMouseEnter:sg,onMouseMove:og,onMouseLeave:R0,onKeyDown:c0?bm:void 0,tabIndex:c0?0:void 0,role:c0?"button":"img","data-testid":`rf__edge-${t}`,"aria-label":Dp===null?void 0:Dp||`Edge from ${K} to ${vt}`,"aria-describedby":c0?`${ARIA_EDGE_DESC_KEY}-${x0}`:void 0,ref:mm},!v0&&React.createElement(r,{id:t,source:K,target:vt,selected:m,animated:b,label:E,labelStyle:M,labelShowBg:I,labelBgStyle:V,labelBgPadding:Z,labelBgBorderRadius:ee,data:l,style:le,sourceX:q,sourceY:Q,targetX:wt,targetY:bt,sourcePosition:Ut,targetPosition:it,sourceHandleId:Mn,targetHandleId:kp,markerStart:ig,markerEnd:w1,pathOptions:y0,interactionWidth:M0}),u0&&React.createElement(React.Fragment,null,(u0==="source"||u0===!0)&&React.createElement(EdgeAnchor,{position:Ut,centerX:q,centerY:Q,radius:wp,onMouseDown:wm,onMouseEnter:Vp,onMouseOut:r0,type:"source"}),(u0==="target"||u0===!0)&&React.createElement(EdgeAnchor,{position:it,centerX:wt,centerY:bt,radius:wp,onMouseDown:$m,onMouseEnter:Vp,onMouseOut:r0,type:"target"})))};return e.displayName="EdgeWrapper",reactExports.memo(e)};function createEdgeTypes(r){const e={default:wrapEdge(r.default||BezierEdge),straight:wrapEdge(r.bezier||StraightEdge),step:wrapEdge(r.step||StepEdge),smoothstep:wrapEdge(r.step||SmoothStepEdge),simplebezier:wrapEdge(r.simplebezier||SimpleBezierEdge)},t={},a=Object.keys(r).filter(o=>!["default","bezier"].includes(o)).reduce((o,l)=>(o[l]=wrapEdge(r[l]||BezierEdge),o),t);return{...e,...a}}function getHandlePosition(r,e,t=null){const a=(t?.x||0)+e.x,o=(t?.y||0)+e.y,l=t?.width||e.width,s=t?.height||e.height;switch(r){case Position.Top:return{x:a+l/2,y:o};case Position.Right:return{x:a+l,y:o+s/2};case Position.Bottom:return{x:a+l/2,y:o+s};case Position.Left:return{x:a,y:o+s/2}}}function getHandle(r,e){return r?r.length===1||!e?r[0]:e&&r.find(t=>t.id===e)||null:null}const getEdgePositions=(r,e,t,a,o,l)=>{const s=getHandlePosition(t,r,e),f=getHandlePosition(l,a,o);return{sourceX:s.x,sourceY:s.y,targetX:f.x,targetY:f.y}};function isEdgeVisible({sourcePos:r,targetPos:e,sourceWidth:t,sourceHeight:a,targetWidth:o,targetHeight:l,width:s,height:f,transform:m}){const b={x:Math.min(r.x,e.x),y:Math.min(r.y,e.y),x2:Math.max(r.x+t,e.x+o),y2:Math.max(r.y+a,e.y+l)};b.x===b.x2&&(b.x2+=1),b.y===b.y2&&(b.y2+=1);const E=rectToBox({x:(0-m[0])/m[2],y:(0-m[1])/m[2],width:s/m[2],height:f/m[2]}),M=Math.max(0,Math.min(E.x2,b.x2)-Math.max(E.x,b.x)),I=Math.max(0,Math.min(E.y2,b.y2)-Math.max(E.y,b.y));return Math.ceil(M*I)>0}function getNodeData(r){const e=r?.[internalsSymbol]?.handleBounds||null,t=e&&r?.width&&r?.height&&typeof r?.positionAbsolute?.x<"u"&&typeof r?.positionAbsolute?.y<"u";return[{x:r?.positionAbsolute?.x||0,y:r?.positionAbsolute?.y||0,width:r?.width||0,height:r?.height||0},e,!!t]}const defaultEdgeTree=[{level:0,isMaxLevel:!0,edges:[]}];function groupEdgesByZLevel(r,e,t=!1){let a=-1;const o=r.reduce((s,f)=>{const m=isNumeric(f.zIndex);let b=m?f.zIndex:0;if(t){const E=e.get(f.target),M=e.get(f.source),I=f.selected||E?.selected||M?.selected,V=Math.max(M?.[internalsSymbol]?.z||0,E?.[internalsSymbol]?.z||0,1e3);b=(m?f.zIndex:0)+(I?V:0)}return s[b]?s[b].push(f):s[b]=[f],a=b>a?b:a,s},{}),l=Object.entries(o).map(([s,f])=>{const m=+s;return{edges:f,level:m,isMaxLevel:m===a}});return l.length===0?defaultEdgeTree:l}function useVisibleEdges(r,e,t){const a=useStore$1(reactExports.useCallback(o=>r?o.edges.filter(l=>{const s=e.get(l.source),f=e.get(l.target);return s?.width&&s?.height&&f?.width&&f?.height&&isEdgeVisible({sourcePos:s.positionAbsolute||{x:0,y:0},targetPos:f.positionAbsolute||{x:0,y:0},sourceWidth:s.width,sourceHeight:s.height,targetWidth:f.width,targetHeight:f.height,width:o.width,height:o.height,transform:o.transform})}):o.edges,[r,e]));return groupEdgesByZLevel(a,e,t)}const ArrowSymbol=({color:r="none",strokeWidth:e=1})=>React.createElement("polyline",{style:{stroke:r,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),ArrowClosedSymbol=({color:r="none",strokeWidth:e=1})=>React.createElement("polyline",{style:{stroke:r,fill:r,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),MarkerSymbols={[MarkerType.Arrow]:ArrowSymbol,[MarkerType.ArrowClosed]:ArrowClosedSymbol};function useMarkerSymbol(r){const e=useStoreApi();return reactExports.useMemo(()=>Object.prototype.hasOwnProperty.call(MarkerSymbols,r)?MarkerSymbols[r]:(e.getState().onError?.("009",errorMessages.error009(r)),null),[r])}const Marker=({id:r,type:e,color:t,width:a=12.5,height:o=12.5,markerUnits:l="strokeWidth",strokeWidth:s,orient:f="auto-start-reverse"})=>{const m=useMarkerSymbol(e);return m?React.createElement("marker",{className:"react-flow__arrowhead",id:r,markerWidth:`${a}`,markerHeight:`${o}`,viewBox:"-10 -10 20 20",markerUnits:l,orient:f,refX:"0",refY:"0"},React.createElement(m,{color:t,strokeWidth:s})):null},markerSelector=({defaultColor:r,rfId:e})=>t=>{const a=[];return t.edges.reduce((o,l)=>([l.markerStart,l.markerEnd].forEach(s=>{if(s&&typeof s=="object"){const f=getMarkerId(s,e);a.includes(f)||(o.push({id:f,color:s.color||r,...s}),a.push(f))}}),o),[]).sort((o,l)=>o.id.localeCompare(l.id))},MarkerDefinitions=({defaultColor:r,rfId:e})=>{const t=useStore$1(reactExports.useCallback(markerSelector({defaultColor:r,rfId:e}),[r,e]),(a,o)=>!(a.length!==o.length||a.some((l,s)=>l.id!==o[s].id)));return React.createElement("defs",null,t.map(a=>React.createElement(Marker,{id:a.id,key:a.id,type:a.type,color:a.color,width:a.width,height:a.height,markerUnits:a.markerUnits,strokeWidth:a.strokeWidth,orient:a.orient})))};MarkerDefinitions.displayName="MarkerDefinitions";var MarkerDefinitions$1=reactExports.memo(MarkerDefinitions);const selector$4=r=>({nodesConnectable:r.nodesConnectable,edgesFocusable:r.edgesFocusable,edgesUpdatable:r.edgesUpdatable,elementsSelectable:r.elementsSelectable,width:r.width,height:r.height,connectionMode:r.connectionMode,nodeInternals:r.nodeInternals,onError:r.onError}),EdgeRenderer=({defaultMarkerColor:r,onlyRenderVisibleElements:e,elevateEdgesOnSelect:t,rfId:a,edgeTypes:o,noPanClassName:l,onEdgeContextMenu:s,onEdgeMouseEnter:f,onEdgeMouseMove:m,onEdgeMouseLeave:b,onEdgeClick:E,onEdgeDoubleClick:M,onReconnect:I,onReconnectStart:V,onReconnectEnd:Z,reconnectRadius:ee,children:le,disableKeyboardA11y:K})=>{const{edgesFocusable:vt,edgesUpdatable:q,elementsSelectable:Q,width:wt,height:bt,connectionMode:Ut,nodeInternals:it,onError:zt}=useStore$1(selector$4,shallow$1),Zt=useVisibleEdges(e,it,t);return wt?React.createElement(React.Fragment,null,Zt.map(({level:Mn,edges:kp,isMaxLevel:zp})=>React.createElement("svg",{key:Mn,style:{zIndex:Mn},width:wt,height:bt,className:"react-flow__edges react-flow__container"},zp&&React.createElement(MarkerDefinitions$1,{defaultColor:r,rfId:a}),React.createElement("g",null,kp.map(sa=>{const[qo,ae,wp]=getNodeData(it.get(sa.source)),[Cp,Kt,h0]=getNodeData(it.get(sa.target));if(!wp||!h0)return null;let Pp=sa.type||"default";o[Pp]||(zt?.("011",errorMessages.error011(Pp)),Pp="default");const d0=o[Pp]||o.default,x0=Ut===ConnectionMode.Strict?Kt.target:(Kt.target??[]).concat(Kt.source??[]),Dp=getHandle(ae.source,sa.sourceHandle),c0=getHandle(x0,sa.targetHandle),u0=Dp?.position||Position.Bottom,y0=c0?.position||Position.Top,M0=!!(sa.focusable||vt&&typeof sa.focusable>"u"),sm=sa.reconnectable||sa.updatable,mm=typeof I<"u"&&(sm||q&&typeof sm>"u");if(!Dp||!c0)return zt?.("008",errorMessages.error008(Dp,sa)),null;const{sourceX:Mm,sourceY:v1,targetX:v0,targetY:D1}=getEdgePositions(qo,Dp,u0,Cp,c0,y0);return React.createElement(d0,{key:sa.id,id:sa.id,className:cc$1([sa.className,l]),type:Pp,data:sa.data,selected:!!sa.selected,animated:!!sa.animated,hidden:!!sa.hidden,label:sa.label,labelStyle:sa.labelStyle,labelShowBg:sa.labelShowBg,labelBgStyle:sa.labelBgStyle,labelBgPadding:sa.labelBgPadding,labelBgBorderRadius:sa.labelBgBorderRadius,style:sa.style,source:sa.source,target:sa.target,sourceHandleId:sa.sourceHandle,targetHandleId:sa.targetHandle,markerEnd:sa.markerEnd,markerStart:sa.markerStart,sourceX:Mm,sourceY:v1,targetX:v0,targetY:D1,sourcePosition:u0,targetPosition:y0,elementsSelectable:Q,onContextMenu:s,onMouseEnter:f,onMouseMove:m,onMouseLeave:b,onClick:E,onEdgeDoubleClick:M,onReconnect:I,onReconnectStart:V,onReconnectEnd:Z,reconnectRadius:ee,rfId:a,ariaLabel:sa.ariaLabel,isFocusable:M0,isReconnectable:mm,pathOptions:"pathOptions"in sa?sa.pathOptions:void 0,interactionWidth:sa.interactionWidth,disableKeyboardA11y:K})})))),le):null};EdgeRenderer.displayName="EdgeRenderer";var EdgeRenderer$1=reactExports.memo(EdgeRenderer);const selector$3=r=>`translate(${r.transform[0]}px,${r.transform[1]}px) scale(${r.transform[2]})`;function Viewport({children:r}){const e=useStore$1(selector$3);return React.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:e}},r)}function useOnInitHandler(r){const e=useReactFlow(),t=reactExports.useRef(!1);reactExports.useEffect(()=>{!t.current&&e.viewportInitialized&&r&&(setTimeout(()=>r(e),1),t.current=!0)},[r,e.viewportInitialized])}const oppositePosition={[Position.Left]:Position.Right,[Position.Right]:Position.Left,[Position.Top]:Position.Bottom,[Position.Bottom]:Position.Top},ConnectionLine=({nodeId:r,handleType:e,style:t,type:a=ConnectionLineType.Bezier,CustomComponent:o,connectionStatus:l})=>{const{fromNode:s,handleId:f,toX:m,toY:b,connectionMode:E}=useStore$1(reactExports.useCallback(bt=>({fromNode:bt.nodeInternals.get(r),handleId:bt.connectionHandleId,toX:(bt.connectionPosition.x-bt.transform[0])/bt.transform[2],toY:(bt.connectionPosition.y-bt.transform[1])/bt.transform[2],connectionMode:bt.connectionMode}),[r]),shallow$1),M=s?.[internalsSymbol]?.handleBounds;let I=M?.[e];if(E===ConnectionMode.Loose&&(I=I||M?.[e==="source"?"target":"source"]),!s||!I)return null;const V=f?I.find(bt=>bt.id===f):I[0],Z=V?V.x+V.width/2:(s.width??0)/2,ee=V?V.y+V.height/2:s.height??0,le=(s.positionAbsolute?.x??0)+Z,K=(s.positionAbsolute?.y??0)+ee,vt=V?.position,q=vt?oppositePosition[vt]:null;if(!vt||!q)return null;if(o)return React.createElement(o,{connectionLineType:a,connectionLineStyle:t,fromNode:s,fromHandle:V,fromX:le,fromY:K,toX:m,toY:b,fromPosition:vt,toPosition:q,connectionStatus:l});let Q="";const wt={sourceX:le,sourceY:K,sourcePosition:vt,targetX:m,targetY:b,targetPosition:q};return a===ConnectionLineType.Bezier?[Q]=getBezierPath(wt):a===ConnectionLineType.Step?[Q]=getSmoothStepPath({...wt,borderRadius:0}):a===ConnectionLineType.SmoothStep?[Q]=getSmoothStepPath(wt):a===ConnectionLineType.SimpleBezier?[Q]=getSimpleBezierPath(wt):Q=`M${le},${K} ${m},${b}`,React.createElement("path",{d:Q,fill:"none",className:"react-flow__connection-path",style:t})};ConnectionLine.displayName="ConnectionLine";const selector$2=r=>({nodeId:r.connectionNodeId,handleType:r.connectionHandleType,nodesConnectable:r.nodesConnectable,connectionStatus:r.connectionStatus,width:r.width,height:r.height});function ConnectionLineWrapper({containerStyle:r,style:e,type:t,component:a}){const{nodeId:o,handleType:l,nodesConnectable:s,width:f,height:m,connectionStatus:b}=useStore$1(selector$2,shallow$1);return!(o&&l&&f&&s)?null:React.createElement("svg",{style:r,width:f,height:m,className:"react-flow__edges react-flow__connectionline react-flow__container"},React.createElement("g",{className:cc$1(["react-flow__connection",b])},React.createElement(ConnectionLine,{nodeId:o,handleType:l,style:e,type:t,CustomComponent:a,connectionStatus:b})))}function useNodeOrEdgeTypes(r,e){return reactExports.useRef(null),useStoreApi(),reactExports.useMemo(()=>e(r),[r])}const GraphView=({nodeTypes:r,edgeTypes:e,onMove:t,onMoveStart:a,onMoveEnd:o,onInit:l,onNodeClick:s,onEdgeClick:f,onNodeDoubleClick:m,onEdgeDoubleClick:b,onNodeMouseEnter:E,onNodeMouseMove:M,onNodeMouseLeave:I,onNodeContextMenu:V,onSelectionContextMenu:Z,onSelectionStart:ee,onSelectionEnd:le,connectionLineType:K,connectionLineStyle:vt,connectionLineComponent:q,connectionLineContainerStyle:Q,selectionKeyCode:wt,selectionOnDrag:bt,selectionMode:Ut,multiSelectionKeyCode:it,panActivationKeyCode:zt,zoomActivationKeyCode:Zt,deleteKeyCode:Mn,onlyRenderVisibleElements:kp,elementsSelectable:zp,selectNodesOnDrag:sa,defaultViewport:qo,translateExtent:ae,minZoom:wp,maxZoom:Cp,preventScrolling:Kt,defaultMarkerColor:h0,zoomOnScroll:Pp,zoomOnPinch:d0,panOnScroll:x0,panOnScrollSpeed:Dp,panOnScrollMode:c0,zoomOnDoubleClick:u0,panOnDrag:y0,onPaneClick:M0,onPaneMouseEnter:sm,onPaneMouseMove:mm,onPaneMouseLeave:Mm,onPaneScroll:v1,onPaneContextMenu:v0,onEdgeContextMenu:D1,onEdgeMouseEnter:P1,onEdgeMouseMove:ig,onEdgeMouseLeave:w1,onReconnect:o1,onReconnectStart:g1,onReconnectEnd:X1,reconnectRadius:sg,noDragClassName:og,noWheelClassName:R0,noPanClassName:Xp,elevateEdgesOnSelect:wm,disableKeyboardA11y:$m,nodeOrigin:Vp,nodeExtent:r0,rfId:B0})=>{const bm=useNodeOrEdgeTypes(r,createNodeTypes),Sm=useNodeOrEdgeTypes(e,createEdgeTypes);return useOnInitHandler(l),React.createElement(FlowRenderer$1,{onPaneClick:M0,onPaneMouseEnter:sm,onPaneMouseMove:mm,onPaneMouseLeave:Mm,onPaneContextMenu:v0,onPaneScroll:v1,deleteKeyCode:Mn,selectionKeyCode:wt,selectionOnDrag:bt,selectionMode:Ut,onSelectionStart:ee,onSelectionEnd:le,multiSelectionKeyCode:it,panActivationKeyCode:zt,zoomActivationKeyCode:Zt,elementsSelectable:zp,onMove:t,onMoveStart:a,onMoveEnd:o,zoomOnScroll:Pp,zoomOnPinch:d0,zoomOnDoubleClick:u0,panOnScroll:x0,panOnScrollSpeed:Dp,panOnScrollMode:c0,panOnDrag:y0,defaultViewport:qo,translateExtent:ae,minZoom:wp,maxZoom:Cp,onSelectionContextMenu:Z,preventScrolling:Kt,noDragClassName:og,noWheelClassName:R0,noPanClassName:Xp,disableKeyboardA11y:$m},React.createElement(Viewport,null,React.createElement(EdgeRenderer$1,{edgeTypes:Sm,onEdgeClick:f,onEdgeDoubleClick:b,onlyRenderVisibleElements:kp,onEdgeContextMenu:D1,onEdgeMouseEnter:P1,onEdgeMouseMove:ig,onEdgeMouseLeave:w1,onReconnect:o1,onReconnectStart:g1,onReconnectEnd:X1,reconnectRadius:sg,defaultMarkerColor:h0,noPanClassName:Xp,elevateEdgesOnSelect:!!wm,disableKeyboardA11y:$m,rfId:B0},React.createElement(ConnectionLineWrapper,{style:vt,type:K,component:q,containerStyle:Q})),React.createElement("div",{className:"react-flow__edgelabel-renderer"}),React.createElement(NodeRenderer$1,{nodeTypes:bm,onNodeClick:s,onNodeDoubleClick:m,onNodeMouseEnter:E,onNodeMouseMove:M,onNodeMouseLeave:I,onNodeContextMenu:V,selectNodesOnDrag:sa,onlyRenderVisibleElements:kp,noPanClassName:Xp,noDragClassName:og,disableKeyboardA11y:$m,nodeOrigin:Vp,nodeExtent:r0,rfId:B0})))};GraphView.displayName="GraphView";var GraphView$1=reactExports.memo(GraphView);const infiniteExtent=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],initialState$6={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:infiniteExtent,nodeExtent:infiniteExtent,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:ConnectionMode.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:devWarn,isValidConnection:void 0},createRFStore=()=>createWithEqualityFn((r,e)=>({...initialState$6,setNodes:t=>{const{nodeInternals:a,nodeOrigin:o,elevateNodesOnSelect:l}=e();r({nodeInternals:createNodeInternals(t,a,o,l)})},getNodes:()=>Array.from(e().nodeInternals.values()),setEdges:t=>{const{defaultEdgeOptions:a={}}=e();r({edges:t.map(o=>({...a,...o}))})},setDefaultNodesAndEdges:(t,a)=>{const o=typeof t<"u",l=typeof a<"u",s=o?createNodeInternals(t,new Map,e().nodeOrigin,e().elevateNodesOnSelect):new Map;r({nodeInternals:s,edges:l?a:[],hasDefaultNodes:o,hasDefaultEdges:l})},updateNodeDimensions:t=>{const{onNodesChange:a,nodeInternals:o,fitViewOnInit:l,fitViewOnInitDone:s,fitViewOnInitOptions:f,domNode:m,nodeOrigin:b}=e(),E=m?.querySelector(".react-flow__viewport");if(!E)return;const M=window.getComputedStyle(E),{m22:I}=new window.DOMMatrixReadOnly(M.transform),V=t.reduce((ee,le)=>{const K=o.get(le.id);if(K?.hidden)o.set(K.id,{...K,[internalsSymbol]:{...K[internalsSymbol],handleBounds:void 0}});else if(K){const vt=getDimensions(le.nodeElement);!!(vt.width&&vt.height&&(K.width!==vt.width||K.height!==vt.height||le.forceUpdate))&&(o.set(K.id,{...K,[internalsSymbol]:{...K[internalsSymbol],handleBounds:{source:getHandleBounds(".source",le.nodeElement,I,b),target:getHandleBounds(".target",le.nodeElement,I,b)}},...vt}),ee.push({id:K.id,type:"dimensions",dimensions:vt}))}return ee},[]);updateAbsoluteNodePositions(o,b);const Z=s||l&&!s&&fitView(e,{initial:!0,...f});r({nodeInternals:new Map(o),fitViewOnInitDone:Z}),V?.length>0&&a?.(V)},updateNodePositions:(t,a=!0,o=!1)=>{const{triggerNodeChanges:l}=e(),s=t.map(f=>{const m={id:f.id,type:"position",dragging:o};return a&&(m.positionAbsolute=f.positionAbsolute,m.position=f.position),m});l(s)},triggerNodeChanges:t=>{const{onNodesChange:a,nodeInternals:o,hasDefaultNodes:l,nodeOrigin:s,getNodes:f,elevateNodesOnSelect:m}=e();if(t?.length){if(l){const b=applyNodeChanges(t,f()),E=createNodeInternals(b,o,s,m);r({nodeInternals:E})}a?.(t)}},addSelectedNodes:t=>{const{multiSelectionActive:a,edges:o,getNodes:l}=e();let s,f=null;a?s=t.map(m=>createSelectionChange(m,!0)):(s=getSelectionChanges(l(),t),f=getSelectionChanges(o,[])),updateNodesAndEdgesSelections({changedNodes:s,changedEdges:f,get:e,set:r})},addSelectedEdges:t=>{const{multiSelectionActive:a,edges:o,getNodes:l}=e();let s,f=null;a?s=t.map(m=>createSelectionChange(m,!0)):(s=getSelectionChanges(o,t),f=getSelectionChanges(l(),[])),updateNodesAndEdgesSelections({changedNodes:f,changedEdges:s,get:e,set:r})},unselectNodesAndEdges:({nodes:t,edges:a}={})=>{const{edges:o,getNodes:l}=e(),s=t||l(),f=a||o,m=s.map(E=>(E.selected=!1,createSelectionChange(E.id,!1))),b=f.map(E=>createSelectionChange(E.id,!1));updateNodesAndEdgesSelections({changedNodes:m,changedEdges:b,get:e,set:r})},setMinZoom:t=>{const{d3Zoom:a,maxZoom:o}=e();a?.scaleExtent([t,o]),r({minZoom:t})},setMaxZoom:t=>{const{d3Zoom:a,minZoom:o}=e();a?.scaleExtent([o,t]),r({maxZoom:t})},setTranslateExtent:t=>{e().d3Zoom?.translateExtent(t),r({translateExtent:t})},resetSelectedElements:()=>{const{edges:t,getNodes:a}=e(),l=a().filter(f=>f.selected).map(f=>createSelectionChange(f.id,!1)),s=t.filter(f=>f.selected).map(f=>createSelectionChange(f.id,!1));updateNodesAndEdgesSelections({changedNodes:l,changedEdges:s,get:e,set:r})},setNodeExtent:t=>{const{nodeInternals:a}=e();a.forEach(o=>{o.positionAbsolute=clampPosition(o.position,t)}),r({nodeExtent:t,nodeInternals:new Map(a)})},panBy:t=>{const{transform:a,width:o,height:l,d3Zoom:s,d3Selection:f,translateExtent:m}=e();if(!s||!f||!t.x&&!t.y)return!1;const b=identity.translate(a[0]+t.x,a[1]+t.y).scale(a[2]),E=[[0,0],[o,l]],M=s?.constrain()(b,E,m);return s.transform(f,M),a[0]!==M.x||a[1]!==M.y||a[2]!==M.k},cancelConnection:()=>r({connectionNodeId:initialState$6.connectionNodeId,connectionHandleId:initialState$6.connectionHandleId,connectionHandleType:initialState$6.connectionHandleType,connectionStatus:initialState$6.connectionStatus,connectionStartHandle:initialState$6.connectionStartHandle,connectionEndHandle:initialState$6.connectionEndHandle}),reset:()=>r({...initialState$6})}),Object.is),ReactFlowProvider=({children:r})=>{const e=reactExports.useRef(null);return e.current||(e.current=createRFStore()),React.createElement(Provider$1,{value:e.current},r)};ReactFlowProvider.displayName="ReactFlowProvider";const Wrapper=({children:r})=>reactExports.useContext(StoreContext)?React.createElement(React.Fragment,null,r):React.createElement(ReactFlowProvider,null,r);Wrapper.displayName="ReactFlowWrapper";const defaultNodeTypes={input:InputNode$1,default:DefaultNode$1,output:OutputNode$1,group:GroupNode},defaultEdgeTypes={default:BezierEdge,straight:StraightEdge,step:StepEdge,smoothstep:SmoothStepEdge,simplebezier:SimpleBezierEdge},initNodeOrigin=[0,0],initSnapGrid=[15,15],initDefaultViewport={x:0,y:0,zoom:1},wrapperStyle={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},ReactFlow=reactExports.forwardRef(({nodes:r,edges:e,defaultNodes:t,defaultEdges:a,className:o,nodeTypes:l=defaultNodeTypes,edgeTypes:s=defaultEdgeTypes,onNodeClick:f,onEdgeClick:m,onInit:b,onMove:E,onMoveStart:M,onMoveEnd:I,onConnect:V,onConnectStart:Z,onConnectEnd:ee,onClickConnectStart:le,onClickConnectEnd:K,onNodeMouseEnter:vt,onNodeMouseMove:q,onNodeMouseLeave:Q,onNodeContextMenu:wt,onNodeDoubleClick:bt,onNodeDragStart:Ut,onNodeDrag:it,onNodeDragStop:zt,onNodesDelete:Zt,onEdgesDelete:Mn,onSelectionChange:kp,onSelectionDragStart:zp,onSelectionDrag:sa,onSelectionDragStop:qo,onSelectionContextMenu:ae,onSelectionStart:wp,onSelectionEnd:Cp,connectionMode:Kt=ConnectionMode.Strict,connectionLineType:h0=ConnectionLineType.Bezier,connectionLineStyle:Pp,connectionLineComponent:d0,connectionLineContainerStyle:x0,deleteKeyCode:Dp="Backspace",selectionKeyCode:c0="Shift",selectionOnDrag:u0=!1,selectionMode:y0=SelectionMode.Full,panActivationKeyCode:M0="Space",multiSelectionKeyCode:sm=isMacOs()?"Meta":"Control",zoomActivationKeyCode:mm=isMacOs()?"Meta":"Control",snapToGrid:Mm=!1,snapGrid:v1=initSnapGrid,onlyRenderVisibleElements:v0=!1,selectNodesOnDrag:D1=!0,nodesDraggable:P1,nodesConnectable:ig,nodesFocusable:w1,nodeOrigin:o1=initNodeOrigin,edgesFocusable:g1,edgesUpdatable:X1,elementsSelectable:sg,defaultViewport:og=initDefaultViewport,minZoom:R0=.5,maxZoom:Xp=2,translateExtent:wm=infiniteExtent,preventScrolling:$m=!0,nodeExtent:Vp,defaultMarkerColor:r0="#b1b1b7",zoomOnScroll:B0=!0,zoomOnPinch:bm=!0,panOnScroll:Sm=!1,panOnScrollSpeed:Xm=.5,panOnScrollMode:cm=PanOnScrollMode.Free,zoomOnDoubleClick:zm=!0,panOnDrag:x1=!0,onPaneClick:Um,onPaneMouseEnter:h1,onPaneMouseMove:Sg,onPaneMouseLeave:um,onPaneScroll:M1,onPaneContextMenu:F1,children:Y1,onEdgeContextMenu:n1,onEdgeDoubleClick:Zm,onEdgeMouseEnter:S1,onEdgeMouseMove:p1,onEdgeMouseLeave:hv,onEdgeUpdate:Gg,onEdgeUpdateStart:Cv,onEdgeUpdateEnd:ey,onReconnect:xy,onReconnectStart:Gv,onReconnectEnd:yv,reconnectRadius:Wv=10,edgeUpdaterRadius:_y=10,onNodesChange:iy,onEdgesChange:Cy,noDragClassName:$v="nodrag",noWheelClassName:Lv="nowheel",noPanClassName:wg="nopan",fitView:Ov=!1,fitViewOptions:Uv,connectOnClick:zy=!0,attributionPosition:mg,proOptions:Re,defaultEdgeOptions:Kp,elevateNodesOnSelect:Fn=!0,elevateEdgesOnSelect:t0=!1,disableKeyboardA11y:s0=!1,autoPanOnConnect:J0=!0,autoPanOnNodeDrag:F0=!0,connectionRadius:lm=20,isValidConnection:Bm,onError:Nm,style:jm,id:A1,nodeDragThreshold:L1,...K1},Tg)=>{const Lg=A1||"1";return React.createElement("div",{...K1,style:{...jm,...wrapperStyle},ref:Tg,className:cc$1(["react-flow",o]),"data-testid":"rf__wrapper",id:A1},React.createElement(Wrapper,null,React.createElement(GraphView$1,{onInit:b,onMove:E,onMoveStart:M,onMoveEnd:I,onNodeClick:f,onEdgeClick:m,onNodeMouseEnter:vt,onNodeMouseMove:q,onNodeMouseLeave:Q,onNodeContextMenu:wt,onNodeDoubleClick:bt,nodeTypes:l,edgeTypes:s,connectionLineType:h0,connectionLineStyle:Pp,connectionLineComponent:d0,connectionLineContainerStyle:x0,selectionKeyCode:c0,selectionOnDrag:u0,selectionMode:y0,deleteKeyCode:Dp,multiSelectionKeyCode:sm,panActivationKeyCode:M0,zoomActivationKeyCode:mm,onlyRenderVisibleElements:v0,selectNodesOnDrag:D1,defaultViewport:og,translateExtent:wm,minZoom:R0,maxZoom:Xp,preventScrolling:$m,zoomOnScroll:B0,zoomOnPinch:bm,zoomOnDoubleClick:zm,panOnScroll:Sm,panOnScrollSpeed:Xm,panOnScrollMode:cm,panOnDrag:x1,onPaneClick:Um,onPaneMouseEnter:h1,onPaneMouseMove:Sg,onPaneMouseLeave:um,onPaneScroll:M1,onPaneContextMenu:F1,onSelectionContextMenu:ae,onSelectionStart:wp,onSelectionEnd:Cp,onEdgeContextMenu:n1,onEdgeDoubleClick:Zm,onEdgeMouseEnter:S1,onEdgeMouseMove:p1,onEdgeMouseLeave:hv,onReconnect:xy??Gg,onReconnectStart:Gv??Cv,onReconnectEnd:yv??ey,reconnectRadius:Wv??_y,defaultMarkerColor:r0,noDragClassName:$v,noWheelClassName:Lv,noPanClassName:wg,elevateEdgesOnSelect:t0,rfId:Lg,disableKeyboardA11y:s0,nodeOrigin:o1,nodeExtent:Vp}),React.createElement(StoreUpdater,{nodes:r,edges:e,defaultNodes:t,defaultEdges:a,onConnect:V,onConnectStart:Z,onConnectEnd:ee,onClickConnectStart:le,onClickConnectEnd:K,nodesDraggable:P1,nodesConnectable:ig,nodesFocusable:w1,edgesFocusable:g1,edgesUpdatable:X1,elementsSelectable:sg,elevateNodesOnSelect:Fn,minZoom:R0,maxZoom:Xp,nodeExtent:Vp,onNodesChange:iy,onEdgesChange:Cy,snapToGrid:Mm,snapGrid:v1,connectionMode:Kt,translateExtent:wm,connectOnClick:zy,defaultEdgeOptions:Kp,fitView:Ov,fitViewOptions:Uv,onNodesDelete:Zt,onEdgesDelete:Mn,onNodeDragStart:Ut,onNodeDrag:it,onNodeDragStop:zt,onSelectionDrag:sa,onSelectionDragStart:zp,onSelectionDragStop:qo,noPanClassName:wg,nodeOrigin:o1,rfId:Lg,autoPanOnConnect:J0,autoPanOnNodeDrag:F0,onError:Nm,connectionRadius:lm,isValidConnection:Bm,nodeDragThreshold:L1}),React.createElement(Wrapper$1,{onSelectionChange:kp}),Y1,React.createElement(Attribution,{proOptions:Re,position:mg}),React.createElement(A11yDescriptions,{rfId:Lg,disableKeyboardA11y:s0})))});ReactFlow.displayName="ReactFlow";const selector$1$1=r=>r.domNode?.querySelector(".react-flow__edgelabel-renderer");function EdgeLabelRenderer({children:r}){const e=useStore$1(selector$1$1);return e?reactDomExports.createPortal(r,e):null}const viewportSelector=r=>({x:r.transform[0],y:r.transform[1],zoom:r.transform[2]});function useViewport(){return useStore$1(viewportSelector,shallow$1)}function PlusIcon(){return React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},React.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function MinusIcon(){return React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},React.createElement("path",{d:"M0 0h32v4.2H0z"}))}function FitViewIcon(){return React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},React.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function LockIcon(){return React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},React.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function UnlockIcon(){return React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},React.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const ControlButton=({children:r,className:e,...t})=>React.createElement("button",{type:"button",className:cc$1(["react-flow__controls-button",e]),...t},r);ControlButton.displayName="ControlButton";const selector$1=r=>({isInteractive:r.nodesDraggable||r.nodesConnectable||r.elementsSelectable,minZoomReached:r.transform[2]<=r.minZoom,maxZoomReached:r.transform[2]>=r.maxZoom}),Controls=({style:r,showZoom:e=!0,showFitView:t=!0,showInteractive:a=!0,fitViewOptions:o,onZoomIn:l,onZoomOut:s,onFitView:f,onInteractiveChange:m,className:b,children:E,position:M="bottom-left"})=>{const I=useStoreApi(),[V,Z]=reactExports.useState(!1),{isInteractive:ee,minZoomReached:le,maxZoomReached:K}=useStore$1(selector$1,shallow$1),{zoomIn:vt,zoomOut:q,fitView:Q}=useReactFlow();if(reactExports.useEffect(()=>{Z(!0)},[]),!V)return null;const wt=()=>{vt(),l?.()},bt=()=>{q(),s?.()},Ut=()=>{Q(o),f?.()},it=()=>{I.setState({nodesDraggable:!ee,nodesConnectable:!ee,elementsSelectable:!ee}),m?.(!ee)};return React.createElement(Panel,{className:cc$1(["react-flow__controls",b]),position:M,style:r,"data-testid":"rf__controls"},e&&React.createElement(React.Fragment,null,React.createElement(ControlButton,{onClick:wt,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:K},React.createElement(PlusIcon,null)),React.createElement(ControlButton,{onClick:bt,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:le},React.createElement(MinusIcon,null))),t&&React.createElement(ControlButton,{className:"react-flow__controls-fitview",onClick:Ut,title:"fit view","aria-label":"fit view"},React.createElement(FitViewIcon,null)),a&&React.createElement(ControlButton,{className:"react-flow__controls-interactive",onClick:it,title:"toggle interactivity","aria-label":"toggle interactivity"},ee?React.createElement(UnlockIcon,null):React.createElement(LockIcon,null)),E)};Controls.displayName="Controls";var Controls$1=reactExports.memo(Controls),BackgroundVariant;(function(r){r.Lines="lines",r.Dots="dots",r.Cross="cross"})(BackgroundVariant||(BackgroundVariant={}));function LinePattern({color:r,dimensions:e,lineWidth:t}){return React.createElement("path",{stroke:r,strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`})}function DotPattern({color:r,radius:e}){return React.createElement("circle",{cx:e,cy:e,r:e,fill:r})}const defaultColor={[BackgroundVariant.Dots]:"#91919a",[BackgroundVariant.Lines]:"#eee",[BackgroundVariant.Cross]:"#e2e2e2"},defaultSize={[BackgroundVariant.Dots]:1,[BackgroundVariant.Lines]:1,[BackgroundVariant.Cross]:6},selector=r=>({transform:r.transform,patternId:`pattern-${r.rfId}`});function Background({id:r,variant:e=BackgroundVariant.Dots,gap:t=20,size:a,lineWidth:o=1,offset:l=2,color:s,style:f,className:m}){const b=reactExports.useRef(null),{transform:E,patternId:M}=useStore$1(selector,shallow$1),I=s||defaultColor[e],V=a||defaultSize[e],Z=e===BackgroundVariant.Dots,ee=e===BackgroundVariant.Cross,le=Array.isArray(t)?t:[t,t],K=[le[0]*E[2]||1,le[1]*E[2]||1],vt=V*E[2],q=ee?[vt,vt]:K,Q=Z?[vt/l,vt/l]:[q[0]/l,q[1]/l];return React.createElement("svg",{className:cc$1(["react-flow__background",m]),style:{...f,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:b,"data-testid":"rf__background"},React.createElement("pattern",{id:M+r,x:E[0]%K[0],y:E[1]%K[1],width:K[0],height:K[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${Q[0]},-${Q[1]})`},Z?React.createElement(DotPattern,{color:I,radius:vt/l}):React.createElement(LinePattern,{dimensions:q,color:I,lineWidth:o})),React.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${M+r})`}))}Background.displayName="Background";var Background$1=reactExports.memo(Background);function sortByCtimeDescending(r,e){const t=new Date(r?.data?.aiida?.ctime||0);return new Date(e?.data?.aiida?.ctime||0)-t}function sortByLabel(r,e){return(r?.data?.label||"").localeCompare(e?.data?.label||"")}function categorizeNodes(r){const e=r.filter(o=>o.data?.node_type.includes("calculation")).sort(sortByCtimeDescending),t=r.filter(o=>o.data?.node_type.includes("workflow")).sort(sortByCtimeDescending),a=r.filter(o=>o.data?.node_type.includes("data")).sort(sortByLabel);return{calculation:e,workflow:t,data:a}}function layoutGraphDefault(r,e,t,a={}){const{spacingX:o=280,spacingY:l=70,groupGapY:s=90,centerX:f=window.innerWidth/2,centerY:m=window.innerHeight/2,smallThreshold:b=20}=a,E=[],M=[],I=categorizeNodes(e),V=categorizeNodes(t),Z={data:["calculation","workflow","data"],calculation:["data","calculation","workflow"],workflow:["data","calculation","workflow"]},ee=r.data?.node_type.split(".")[1],le=Z[ee]||Z.data;E.push({...r,position:{x:f,y:m}});const vt=le.flatMap(Q=>[...I[Q]||[],...V[Q]||[]]).length<=b,q=(Q,wt,bt,Ut=!0)=>{(Q||[]).forEach((it,zt)=>{const Zt=Ut?wt+zt*l:wt-zt*l,Mn=f+o*bt;it.position={x:Mn,y:Zt},E.push(it);let kp="";if(it?.data?.aiida?.link_label){const qo=it.data.aiida.link_label;kp=qo.length>21?`${qo.slice(0,18)}...`:qo}const zp={},sa=it.data?.node_type||"";(sa.includes("workflow")||sa.includes("process"))&&(zp.strokeDasharray="5,5"),M.push({id:`e-${bt<0?it.id+"->":r.id+"->"}${bt<0?r.id:it.id}`,source:bt<0?it.id:r.id,target:bt<0?r.id:it.id,sourcePosition:bt<0?"right":"left",targetPosition:bt<0?"left":"right",type:"custom",style:zp,data:{label:kp,labelPosition:bt<0?"start":"end"}})})};if(vt){const Q=le.flatMap(it=>I[it]||[]).reverse(),wt=le.flatMap(it=>V[it]||[]).reverse(),bt=m-(Q.length-1)/2*l,Ut=m-(wt.length-1)/2*l;Q.forEach((it,zt)=>q([it],bt+zt*l,-1,!0)),wt.forEach((it,zt)=>q([it],Ut+zt*l,1,!0))}else{const Q=I[le[0]]||[],wt=V[le[0]]||[],bt=le.slice(1,3),Ut=bt.flatMap(Mn=>I[Mn]||[]),it=bt.flatMap(Mn=>V[Mn]||[]),zt=m-175;q(Q,zt,-1,!0),q(wt,zt,1,!0);const Zt=zt-s;q(Ut,Zt,-1,!1),q(it,Zt,1,!1)}return{nodes:E,edges:M}}async function fetchGeneric(r,e={},t=null){try{const a=await fetch(r,e);return a.ok?await a.json():(console.warn(`Fetch failed for ${r} with status ${a.status}`),t)}catch(a){return console.error(`Error fetching ${r}:`,a),t}}async function fetchUsers(r){const e=`${r}/users/`;return(await fetchGeneric(e,{},{data:[]})).data}async function fetchDownloadFormats(r){const e=`${r}/nodes/download_formats/`;return(await fetchGeneric(e,{},{data:[]})).data}async function fetchGroups(r){const e=`${r}/groups`;return(await fetchGeneric(e,{},{data:{groups:[]}}))?.data?.groups||[]}async function fetchFromQueryBuilder(r,e){try{const t=await fetch(`${r}/querybuilder/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return t.ok?(await t.json())?.data||[]:(console.error("QueryBuilder request failed:",t.status,t.statusText),[])}catch(t){return console.error("Error fetching from QueryBuilder:",t),[]}}async function fetchNodeById(r,e){if(!e)return null;const t=`${r}/nodes/${encodeURIComponent(e)}`;return fetchGeneric(t)}async function fetchNodeContents(r,e){if(!e)return null;const t=["attributes","comments","extras","derived_properties"],a={};for(const o of t){const l=`${r}/nodes/${encodeURIComponent(e)}/contents/${o}`,s=await fetchGeneric(l,{},{});s?a[o]=s?.data?.[o]??s:a[o]={}}return a}async function fetchNodeRepoList(r,e){if(!e)return[];const t=`${r}/nodes/${encodeURIComponent(e)}/repo/list`,a=await fetchGeneric(t,{},{data:{repo_list:[]}});return a?.data?.repo_list?a.data.repo_list.filter(o=>o.type==="FILE").map(o=>({name:o.name,downloadUrl:`${r}/nodes/${encodeURIComponent(e)}/repo/contents?filename="${encodeURIComponent(o.name)}"`})):[]}async function fetchRetrievedUUID(r,e){if(!e)return null;const t=`${r}/nodes/${encodeURIComponent(e)}/links/outgoing/`;return((await fetchGeneric(t,{},{data:{outgoing:[]}}))?.data?.outgoing||[]).find(s=>s.link_label==="retrieved")?.uuid||null}async function fetchFiles(r,e,t){if(!e)return null;const a=["input_files","output_files"],o={};for(const l of a){const s=`${r}/calcjobs/${encodeURIComponent(e)}/${l}`,f=await fetchGeneric(s,{},{data:[]}),m=Array.isArray(f.data?.[l])?f.data[l]:Array.isArray(f.data)?f.data:[],b=l==="input_files"?e:t,E=m.filter(M=>M.type==="FILE").map(M=>({...M,downloadUrl:`${r}/nodes/${encodeURIComponent(b)}/repo/contents?filename="${encodeURIComponent(M.name)}"`}));o[l]=E}return o}async function fetchLinks(r,e){if(!e)return{incoming:[],outgoing:[]};try{const[t,a]=await Promise.all([fetch(`${r}/nodes/${encodeURIComponent(e)}/links/incoming`),fetch(`${r}/nodes/${encodeURIComponent(e)}/links/outgoing`)]),o=t.ok?await t.json():[],l=a.ok?await a.json():[];return{incoming:o,outgoing:l}}catch(t){return console.error("Error fetching links:",t),{incoming:[],outgoing:[]}}}async function fetchLinkCounts(r,e=[]){if(!e.length)return e;try{return await Promise.all(e.map(async a=>{if(typeof a?.data?.parentCount=="number"&&typeof a?.data?.childCount=="number")return a;const{incoming:o,outgoing:l}=await fetchLinks(r,a.id),s=(o?.data?.incoming||[]).length,f=(l?.data?.outgoing||[]).length;return{...a,data:{...a.data,parentCount:s,childCount:f}}}))}catch(t){return console.error("Error fetching next level nodes:",t),e}}async function smartFetchData(r,e,t={},a=null){const o=t[e.id];if(o)return console.debug(`${e.id} data is already cached`),{...e,data:{...e.data,...o}};let l={...e.data};const s={},f=async()=>fetchNodeRepoList(r,e.id),m=await fetchNodeContents(r,e.id);l={...l,...m};const b=s[e.data.label]?s[e.data.label](r,e.id):null,E=f();let M=null;e.data.label==="CalcJobNode"&&(M=(async()=>{let ee=l.retrievedUUID;ee||(ee=await fetchRetrievedUUID(r,e.id));const le=await fetchFiles(r,e.id,ee);return{retrievedUUID:ee,files:le}})());const[I,V,Z]=await Promise.all([b,E,M]);if(I&&(l.download=I),V&&(l.repo_list=V),Z&&(l={...l,...Z}),a&&e.data.node_type){const ee=e.data.node_type.endsWith("|")?e.data.node_type:`${e.data.node_type}|`,le=a[ee]||[];l.downloadByFormat=le.reduce((K,vt)=>(K[vt]=`${r}/nodes/${encodeURIComponent(e.id)}/download?download_format=${encodeURIComponent(vt)}`,K),{})}return{...e,data:l}}async function fetchGraphByNodeId(r,e){const a=(await fetchNodeById(r,e)).data.nodes[0];if(!a)return{nodes:[],edges:[]};const{incoming:o,outgoing:l}=await fetchLinks(r,e),s=o?.data?.incoming||[],f=l?.data?.outgoing||[],m=[{id:a.uuid,data:{label:a.node_type.split(".").filter(Boolean).pop(),node_type:a.node_type,pos:0,aiida:a,parentCount:s.length,childCount:f.length}},...s.map(V=>({id:V.uuid,data:{label:V.node_type.split(".").filter(Boolean).pop(),node_type:V.node_type,pos:1,link_label:V.link_label,aiida:V}})),...f.map(V=>({id:V.uuid,data:{label:V.node_type.split(".").filter(Boolean).pop(),node_type:V.node_type,pos:-1,link_label:V.link_label,aiida:V}}))],b=new Map;for(const V of m)b.has(V.id)||b.set(V.id,V);const E=Array.from(b.values()),{nodes:M,edges:I}=layoutGraphDefault(E.find(V=>V.data.pos===0),E.filter(V=>V.data.pos===1),E.filter(V=>V.data.pos===-1));return{nodes:M,edges:I}}function Breadcrumbs({trail:r,onClick:e,maxItems:t=10}){const a=r.slice(-t);return jsxRuntimeExports.jsxs("div",{className:"ae:w-full ae:flex ae:gap-2 ae:flex-wrap ae:overflow-x-auto ae:items-center ae:bg-slate-100 ae:border-slate-800 ae:border-t ae:p-2",children:[jsxRuntimeExports.jsx("span",{className:"",children:"History:"}),a.map((o,l)=>jsxRuntimeExports.jsxs(React.Fragment,{children:[jsxRuntimeExports.jsxs("button",{className:"explorerButton ae:text-sm ",onClick:()=>e(o,l),children:[o.data.label," (",o.data.aiida.uuid.split("-")[0],")"]}),l<a.length-1&&jsxRuntimeExports.jsx("span",{className:"ae:mx-1",children:"→"})]},`${o.id}-${l}`))]})}function ErrorDisplay({message:r,onRetry:e}){return jsxRuntimeExports.jsxs("div",{className:"ae:flex ae:flex-col ae:items-center ae:text-red-500 ae:p-4",children:[jsxRuntimeExports.jsx("div",{className:"ae:text-5xl ae:mb-2",children:"⚠️"}),jsxRuntimeExports.jsx("span",{className:"ae:text-sm ae:font-medium",children:"Failed to load data"}),r&&jsxRuntimeExports.jsx("span",{className:"ae:text-xs ae:text-gray-400 ae:mt-1",children:r}),e&&jsxRuntimeExports.jsx("button",{onClick:e,className:"ae:mt-3 ae:px-3 ae:py-1 ae:rounded-md ae:bg-red-500 ae:text-white ae:hover:bg-red-600",children:"Retry"})]})}function GroupIcon({size:r=14,className:e=""}){return jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:r,height:r,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[jsxRuntimeExports.jsx("path",{d:"M15.536 11.293a1 1 0 0 0 0 1.414l2.376 2.377a1 1 0 0 0 1.414 0l2.377-2.377a1 1 0 0 0 0-1.414l-2.377-2.377a1 1 0 0 0-1.414 0z"}),jsxRuntimeExports.jsx("path",{d:"M2.297 11.293a1 1 0 0 0 0 1.414l2.377 2.377a1 1 0 0 0 1.414 0l2.377-2.377a1 1 0 0 0 0-1.414L6.088 8.916a1 1 0 0 0-1.414 0z"}),jsxRuntimeExports.jsx("path",{d:"M8.916 17.912a1 1 0 0 0 0 1.415l2.377 2.376a1 1 0 0 0 1.414 0l2.377-2.376a1 1 0 0 0 0-1.415l-2.377-2.376a1 1 0 0 0-1.414 0z"}),jsxRuntimeExports.jsx("path",{d:"M8.916 4.674a1 1 0 0 0 0 1.414l2.377 2.376a1 1 0 0 0 1.414 0l2.377-2.376a1 1 0 0 0 0-1.414l-2.377-2.377a1 1 0 0 0-1.414 0z"})]})}function DownloadIcon({data:r=null,downloadUrl:e=null,filename:t="data.json",size:a=14,className:o=""}){const l=()=>{if(e){const s=document.createElement("a");s.href=e,s.download=t,s.target="_blank",s.rel="noopener noreferrer",s.click();return}if(r){const s=JSON.stringify(r,null,2),f=new Blob([s],{type:"application/json"}),m=URL.createObjectURL(f),b=document.createElement("a");b.href=m,b.download=t,b.click(),URL.revokeObjectURL(m)}};return jsxRuntimeExports.jsx("button",{type:"button",onClick:l,title:"Download",className:"ae:p-1",children:jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:a,height:a,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:o,children:[jsxRuntimeExports.jsx("path",{d:"M12 15V3"}),jsxRuntimeExports.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),jsxRuntimeExports.jsx("path",{d:"m7 10 5 5 5-5"})]})})}function ClipBoardIcon({size:r=14,className:e=""}){return jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:r,height:r,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[jsxRuntimeExports.jsx("rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2"}),jsxRuntimeExports.jsx("path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"})]})}function ClipboardCopyIcon({size:r=18,className:e=""}){return jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:r,height:r,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[jsxRuntimeExports.jsx("path",{d:"m12 15 2 2 4-4"}),jsxRuntimeExports.jsx("rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2"}),jsxRuntimeExports.jsx("path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"})]})}function RightDropDownIcon({size:r=14,className:e=""}){return jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:r,height:r,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:jsxRuntimeExports.jsx("path",{d:"m9 18 6-6-6-6"})})}function DownDropDownIcon({size:r=14,className:e=""}){return jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:r,height:r,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:jsxRuntimeExports.jsx("path",{d:"m6 9 6 6 6-6"})})}function ViewIcon({size:r=14,className:e=""}){return jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:r,height:r,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[jsxRuntimeExports.jsx("path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0"}),jsxRuntimeExports.jsx("circle",{cx:"12",cy:"12",r:"3"})]})}function LinksIcon({size:r=14,className:e=""}){return jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:r,height:r,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[jsxRuntimeExports.jsx("path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"}),jsxRuntimeExports.jsx("path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"})]})}function QuestionIcon({size:r=14,className:e=""}){return jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:r,height:r,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[jsxRuntimeExports.jsx("circle",{cx:"12",cy:"12",r:"10"}),jsxRuntimeExports.jsx("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),jsxRuntimeExports.jsx("path",{d:"M12 17h.01"})]})}function ClickIcon({size:r=14,className:e=""}){return jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:r,height:r,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[jsxRuntimeExports.jsx("path",{d:"M12.034 12.681a.498.498 0 0 1 .647-.647l9 3.5a.5.5 0 0 1-.033.943l-3.444 1.068a1 1 0 0 0-.66.66l-1.067 3.443a.5.5 0 0 1-.943.033z"}),jsxRuntimeExports.jsx("path",{d:"M5 3a2 2 0 0 0-2 2"}),jsxRuntimeExports.jsx("path",{d:"M19 3a2 2 0 0 1 2 2"}),jsxRuntimeExports.jsx("path",{d:"M5 21a2 2 0 0 1-2-2"}),jsxRuntimeExports.jsx("path",{d:"M9 3h1"}),jsxRuntimeExports.jsx("path",{d:"M9 21h2"}),jsxRuntimeExports.jsx("path",{d:"M14 3h1"}),jsxRuntimeExports.jsx("path",{d:"M3 9v1"}),jsxRuntimeExports.jsx("path",{d:"M21 9v2"}),jsxRuntimeExports.jsx("path",{d:"M3 14v1"})]})}function ClickIcon2({size:r=14,className:e=""}){return jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:r,height:r,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:jsxRuntimeExports.jsx("path",{d:"M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z"})})}function DoubleClickIcon({size:r=24,className:e}){return jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:r,height:r,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[jsxRuntimeExports.jsx("path",{d:"M14 4.1 12 6"}),jsxRuntimeExports.jsx("path",{d:"m5.1 8-2.9-.8"}),jsxRuntimeExports.jsx("path",{d:"m6 12-1.9 2"}),jsxRuntimeExports.jsx("path",{d:"M7.2 2.2 8 5.1"}),jsxRuntimeExports.jsx("path",{d:"M9.037 9.69a.498.498 0 0 1 .653-.653l11 4.5a.5.5 0 0 1-.074.949l-4.349 1.041a1 1 0 0 0-.74.739l-1.04 4.35a.5.5 0 0 1-.95.074z"})]})}function BreadcrumbsIcon({size:r=14,className:e=""}){return jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:r,height:r,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[jsxRuntimeExports.jsx("path",{d:"M16 14v2.2l1.6 1"}),jsxRuntimeExports.jsx("path",{d:"M7 20H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H20a2 2 0 0 1 2 2"}),jsxRuntimeExports.jsx("circle",{cx:"16",cy:"16",r:"6"})]})}function GraphIcon({size:r=14,className:e=""}){return jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:r,height:r,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[jsxRuntimeExports.jsx("rect",{x:"16",y:"16",width:"6",height:"6",rx:"1"}),jsxRuntimeExports.jsx("rect",{x:"2",y:"16",width:"6",height:"6",rx:"1"}),jsxRuntimeExports.jsx("rect",{x:"9",y:"2",width:"6",height:"6",rx:"1"}),jsxRuntimeExports.jsx("path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3"}),jsxRuntimeExports.jsx("path",{d:"M12 12V8"})]})}function GithubIcon({size:r=14,className:e=""}){return jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:r,height:r,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[jsxRuntimeExports.jsx("path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"}),jsxRuntimeExports.jsx("path",{d:"M9 18c-4.51 2-5-2-7-2"})]})}const OverlayContext=reactExports.createContext(null);function useOverlayContainer(){const r=reactExports.useContext(OverlayContext);if(!r)throw new Error("useOverlayContainer must be used inside <OverlayProvider>");return r}function OverlayProvider({children:r,className:e=""}){const t=reactExports.useRef(null);return jsxRuntimeExports.jsx(OverlayContext.Provider,{value:t,children:jsxRuntimeExports.jsx("div",{ref:t,className:e,children:r})})}function Overlay({children:r,active:e,onClose:t,title:a,maxWidth:o=""}){const l=useOverlayContainer();return reactExports.useEffect(()=>{if(!e)return;const s=f=>{f.key==="Escape"&&(f.stopPropagation(),t?.())};return document.addEventListener("keydown",s),()=>document.removeEventListener("keydown",s)},[e,t]),!e||!l.current?null:reactDomExports.createPortal(jsxRuntimeExports.jsx("div",{className:"ae:absolute ae:inset-0 ae:z-50 ae:flex ae:items-center ae:justify-center ae:bg-black/30",onClick:t,children:jsxRuntimeExports.jsxs("div",{className:"ae:bg-white ae:w-full ae:mx-4 ae:h-5/6 ae:rounded-md ae:overflow-auto ae:transform ae:transition-all ae:duration-800 ae:ease-in-out",style:{maxWidth:o,width:"100%"},onClick:s=>s.stopPropagation(),children:[jsxRuntimeExports.jsxs("div",{className:"ae:flex ae:justify-between ae:items-center ae:border-b ae:px-3 ae:py-1",children:[a&&jsxRuntimeExports.jsx("div",{className:"ae:text-lg ae:font-medium",children:a}),jsxRuntimeExports.jsx("button",{onClick:t,className:"ae:text-gray-600 ae:hover:text-black ae:hover:bg-slate-50 ae:rounded-lg ae:hover:cursor-pointer ae:p-1",children:"✕"})]}),jsxRuntimeExports.jsx("div",{className:"ae:px-4 ae:py-4",children:r})]})}),l.current)}function Spinner({size:r=100,message:e="Loading..."}){return jsxRuntimeExports.jsxs("div",{className:"ae:flex ae:flex-col ae:items-center ae:justify-center",children:[jsxRuntimeExports.jsx("svg",{className:"ae:animate-spin ae:origin-center",xmlns:"http://www.w3.org/2000/svg",width:r,height:r,viewBox:"0 0 390 390",children:jsxRuntimeExports.jsxs("g",{className:"ae:origin-center",children:[jsxRuntimeExports.jsx("path",{fill:"#0096DE",d:"M232 222c-8 11-11 18-14 32h56v-23l63 39-63 36v-23h-56c3 14 5 20 14 31s14 15 24 22c10 6 16 8 27 10 16 1 25 0 40-5 13-6 20-10 29-21 10-9 11-14 17-27 3-9 4-14 3-23 1-10-1-15-3-25-5-12-9-19-17-29-9-9-16-14-29-20-15-5-23-6-40-4-14 3-20 5-27 9-10 6-15 11-24 21Z"}),jsxRuntimeExports.jsx("path",{fill:"#30B808",d:"M178 238c-6-12-11-19-21-28l-28 48 20 11-65 36v-73l20 11 27-48c-13-4-20-5-34-3-13 2-19 4-30 10-10 6-15 9-22 18-9 14-13 22-16 37-1 15-1 22 3 36 4 13 7 17 16 28 6 7 10 10 18 15s14 6 23 9c13 2 21 2 34 0 13-3 20-7 32-15 11-11 16-18 23-33 5-14 6-20 6-28 0-12-2-18-6-31Z"}),jsxRuntimeExports.jsx("path",{fill:"#FF7D17",d:"M191 183c14 2 21 1 35-3l-28-48-20 11 2-74 63 37-20 11 28 48c10-9 15-15 20-28 5-12 6-19 7-31 0-12-1-18-5-28-7-15-12-23-24-33-12-8-19-12-33-15-12-3-18-2-31 0-10 1-15 3-23 8s-12 9-19 15v1c-9 10-12 16-17 28-3 13-4 21-3 36 4 15 7 23 17 37 10 10 14 14 21 18 10 6 17 8 30 10Z"})]})}),jsxRuntimeExports.jsx("span",{className:"ae:text-base ae:md:text-lg ae:text-gray-500 ae:animate-pulse",children:e})]})}function DebugPane({selectedNode:r}){return jsxRuntimeExports.jsxs("div",{className:"ae:w-full ae:h-full ae:p-4",children:[jsxRuntimeExports.jsx("h3",{className:"ae:text-lg ae:font-medium ae:mb-2",children:"Node Info"}),r?jsxRuntimeExports.jsxs("pre",{className:"ae:bg-slate-100 ae:p-2 ae:rounded ae:overflow-x-auto",children:[" ",JSON.stringify(r.data,null,2)]}):jsxRuntimeExports.jsx("p",{children:"Click a node to see top level details. Double click fetch the node and get all the details."})]})}function CustomEdge({id:r,sourceX:e,sourceY:t,targetX:a,targetY:o,sourcePosition:l,targetPosition:s,data:f={},style:m={}}){const[b]=getSmoothStepPath({sourceX:e,sourceY:t,sourcePosition:l,targetX:a,targetY:o,targetPosition:s}),{zoom:E}=useViewport(),I={...{stroke:"grey",strokeWidth:1},...m||{}};if(!f.label)return jsxRuntimeExports.jsx(BaseEdge,{id:r,path:b});let V=.5,Z="translate(-50%, -50%)";f.labelPosition==="start"?(V=.02,Z="translate(0%, -50%)"):f.labelPosition==="end"&&(V=.98,Z="translate(-100%, -50%)");const ee=e+(a-e)*V,le=t+(o-t)*V,K=E>1.1?"ae:text-xs":"ae:text-sm";return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(BaseEdge,{id:r,path:b,interactionWidth:0,style:I}),jsxRuntimeExports.jsx(EdgeLabelRenderer,{children:jsxRuntimeExports.jsx("div",{className:`ae:absolute ae:bg-slate-200 ae:border 
          ae:border-slate-300 ae:rounded-sm ae:px-1 ae:py-0.5 
          ae:text-slate-700 ae:font-light ${K} ae:pointer-events-drag ae:z-50`,style:{left:`${ee}px`,top:`${le}px`,transform:Z},children:f.label.length>21?`${f.label.slice(0,18)}...`:f.label})})]})}function getNodeDisplay(r){switch(r.label){case"AbstractCode":return"";case"ArrayData":return"";case"BandsData":{const a=r.attributes?.["array|bands"];return a?.[1]!==void 0?`Num. bands: ${a[1]}`:""}case"Bool":return r.attributes?.value!==void 0?`Value: ${r.attributes.value}`:"";case"CalcFunctionNode":{const a=r?.aiida?.process_type?.split(".").at(-1);return a||""}case"CalcJobNode":{const a=r?.aiida?.process_type?.split(":")[1];return a||""}case"Code":{const a=r?.attributes?.input_plugin;return a||""}case"Dict":return r?.attributes?`Num. keys: ${Object.keys(r.attributes).length}`:"";case"EnumData":return"";case"Float":case"Int":return r.attributes?.value!==void 0?`Value: ${r.attributes.value}`:"";case"JsonableData":return"";case"List":return r.attributes?.value!==void 0?`Length: ${r.attributes.list.length}`:"";case"Str":return"";case"KpointsData":if(r.attributes?.mesh){const[a,o,l]=r.attributes.mesh;return`Grid: ${a} × ${o} × ${l}`}if(r.attributes?.labels&&r.attributes?.label_numbers){let a=r.attributes.labels.join(" → ");return a.length>20&&(a=a.slice(0,17)+"..."),`Path: ${a}`}return"";case"StructureData":{let a=function(o,l=22){const s={0:"₀",1:"₁",2:"₂",3:"₃",4:"₄",5:"₅",6:"₆",7:"₇",8:"₈",9:"₉"},f=o.replace(/\d/g,m=>s[m]||m);return f.length>l?f.slice(0,l-3)+"...":f};var t=a;return r.extras?.formula_hill?`${a(r.extras.formula_hill)}`:r.derived_properties?.formula?`${a(r.derived_properties?.formula)}`:""}case"UpfData":{const a=r.attributes?.filename;return a?`${a}`:""}case"XyData":return"";case"SinglefileData":return"";case"FolderData":{const a=r?.repo_list?.length||0;return a?`Num. Files: ${a}`:""}case"RemoteData":return"";case"InstalledCode":return"";case"PortableCode":return"";case"ContainerizedCode":return"";case"WorkChainNode":{const a=r?.aiida?.process_type?.split(":")[1];return a||""}default:return""}}function getNodeColorClasses(r,e=!1){let t="ae:bg-gray-200",a="ae:text-black",o="ae:transition-all";return r?.startsWith("process.workflow")?(t="ae:bg-orange-300",o="ae:border-orange-400 ae:shadow-md"):r?.startsWith("process")?(t="ae:bg-red-300",o="ae:border-red-400 ae:shadow-md"):r?.startsWith("data")&&(t="ae:bg-green-300",o="ae:border-green-400 ae:shadow-md"),e&&(o="ae:border-blue-600 ae:shadow-md ae:rounded ae:transition ae:duration-700",t="ae:bg-blue-100 ae:glow-4",a="ae:text-black ae:font-medium"),{bgClass:t,textClass:a,borderStyle:o}}function HorizontalNode({data:r,selected:e}){const{zoom:t}=useViewport(),a="ae:min-w-[150px] ae:text-center ae:py-1.5 ae:rounded ae:border-3",o=t>1.2,s=`
  ae:absolute
  ae:top-1/3
  ae:bottom-1/3
  ae:flex
  ae:items-center
  ${o?"ae:text-[8px]":"ae:text-[10px]"}
  ae:text-slate-600
  ae:font-light
  ${o?"":"ae:hidden"}
`,f=`${s} ae:left-0 ae:ml-0.5 ae:pr-1 ae:pl-0.5 ae:bg-gray-400/50 ae:rounded-r-sm`,m=`${s} ae:right-0 ae:mr-0.5 ae:pl-1 ae:pr-0.5 ae:bg-gray-400/50 ae:rounded-l-sm`,{bgClass:b,textClass:E,borderStyle:M}=getNodeColorClasses(r.node_type,e,r.pos),I=r.aiida.uuid.split("-")[0],V=getNodeDisplay(r),Z=t>1.2?"ae:text-[12px]":"ae:text-[14px]",ee=jsxRuntimeExports.jsxs("div",{className:`${Z}`,children:[r.label,t>1.2&&jsxRuntimeExports.jsx("br",{}),t>1.2&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"ae:text-[8px] ae:opacity-80",children:`uuid: ${I}`}),jsxRuntimeExports.jsx("div",{className:"ae:text-[8px] ae:opacity-80 ",children:`${V}`})]})]});return jsxRuntimeExports.jsxs("div",{className:`${a} ${b} ${E} ${M}`,children:[jsxRuntimeExports.jsx("div",{className:f,children:r.parentCount>99?"99+":r.parentCount??""}),jsxRuntimeExports.jsx("div",{className:m,children:r.childCount>99?"99+":r.childCount??""}),ee,jsxRuntimeExports.jsx(Handle$1,{type:"target",position:Position.Left,style:{pointerEvents:"none",opacity:0,marginLeft:"4px"}}),jsxRuntimeExports.jsx(Handle$1,{type:"source",position:Position.Right,style:{pointerEvents:"none",opacity:0,marginRight:"4px"}})]})}const HorizontalNode$1=reactExports.memo(HorizontalNode),nodeTypes={custom:HorizontalNode$1},edgeTypes={custom:CustomEdge};function FlowChart({nodes:r,edges:e,setNodes:t,setEdges:a,selectedNode:o,onNodeSelect:l,onNodeDoubleSelect:s,onInit:f}){const m=reactExports.useCallback((M,I)=>{l&&l(I)},[l]),b=reactExports.useCallback((M,I)=>{s&&s(I)},[s]),E=r.map(M=>({...M,type:"custom",selected:o?.id===M.id}));return jsxRuntimeExports.jsx("div",{className:"ae:w-full ae:h-full",children:jsxRuntimeExports.jsxs(ReactFlow,{className:"ae:bg-slate-50",nodes:E,edges:e,nodeTypes,onNodesChange:M=>t(I=>applyNodeChanges(M,I)),onEdgesChange:M=>a(I=>applyEdgeChanges(M,I)),edgeTypes,edgesFocusable:!1,onNodeClick:m,onNodeDoubleClick:b,fitView:!0,nodesDraggable:!0,nodesConnectable:!1,onInit:f,children:[jsxRuntimeExports.jsx(Controls$1,{}),jsxRuntimeExports.jsx(Background$1,{variant:"dots",gap:12,size:1})]})})}function TypeCheckboxTree({types:r,selectedTypes:e,setSelectedTypes:t,level:a=0}){const[o,l]=reactExports.useState({}),s=b=>b.every(E=>e.includes(E.label)),f=b=>b.some(E=>e.includes(E.label))&&!s(b),m=(b,E)=>{if(!E||E.length===0){t(I=>I.includes(b)?I.filter(V=>V!==b):[...I,b]);return}t(I=>{const V=new Set(I),Z=(le,K)=>{le.forEach(vt=>{K?V.add(vt.label):V.delete(vt.label),vt.children&&Z(vt.children,K)})};return V.has(b)&&s(E)?(V.delete(b),Z(E,!1)):(V.add(b),Z(E,!0)),[...V]});const M=I=>{const V={};return I.forEach(Z=>{Z.children&&(V[Z.label]=!0,Object.assign(V,M(Z.children)))}),V};l(I=>({...I,[b]:!0,...M(E)}))};return jsxRuntimeExports.jsx("div",{className:"ae:flex ae:flex-col",children:r.map(({label:b,children:E})=>{const M=e.includes(b),I=E&&f(E);return jsxRuntimeExports.jsxs("div",{style:{marginLeft:`${a*8}px`},children:[jsxRuntimeExports.jsxs("div",{className:"ae:flex ae:items-center ae:gap-1 ae:cursor-pointer",onClick:()=>m(b,E),children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:M,ref:V=>{V&&(V.indeterminate=I)},onChange:V=>V.stopPropagation(),className:"ae:cursor-pointer"}),E&&E.length>0&&jsxRuntimeExports.jsx("button",{type:"button",onClick:V=>{V.stopPropagation(),l(Z=>({...Z,[b]:!Z[b]}))},className:"ae:p-0.5 ae:focus:outline-none",children:o[b]?jsxRuntimeExports.jsx(DownDropDownIcon,{size:14}):jsxRuntimeExports.jsx(RightDropDownIcon,{size:14})}),jsxRuntimeExports.jsx("span",{children:b})]}),E&&E.length>0&&o[b]&&jsxRuntimeExports.jsx(TypeCheckboxTree,{types:E,selectedTypes:e,setSelectedTypes:t,level:a+1})]},b)})})}const aiidaTypes=[{label:"Data",type:"data",children:[{label:"Int",type:"data.core.int.%"},{label:"Float",type:"data.core.float.%"},{label:"ArrayData",type:"data.core.array.%",children:[{label:"BandsData",type:"data.core.array.bands.%"},{label:"XyData",type:"data.core.array.xy.%"},{label:"TrajectoryData",type:"data.core.array.trajectory.%"},{label:"KpointsData",type:"data.core.array.kpoints.%"}]},{label:"Str",type:"data.core.str.%"},{label:"Bool",type:"data.core.bool.%"},{label:"List",type:"data.core.list.%"},{label:"Dict",type:"data.core.dict.%"},{label:"StructureData",type:"data.core.structure.%"},{label:"RemoteData",type:"data.core.remote.%"},{label:"FolderData",type:"data.core.folder.%"},{label:"SinglefileData",type:"data.core.singlefile.%"},{label:"UpfData",type:"data.core.upf.%"},{label:"Code",type:"data.core.code.%"}]},{label:"Process",type:"process.%",children:[{label:"CalcJob",type:"process.calculation.calcjob.%"},{label:"CalcFunction",type:"process.calculation.calcfunction.%"},{label:"WorkFunction",type:"process.workflow.workfunction.%"},{label:"Workgraph",type:"process.workflow.workgraph.%"},{label:"Workchain",type:"process.workflow.workchain.%"}]}];function getFlattenedNodeTypes(r,e){const t=[],a=o=>{o.forEach(l=>{r.includes(l.label)&&t.push(l.type),l.children&&a(l.children)})};return a(e),t}function buildQuery({groups:r=[],nodeTypes:e=[],limit:t=50,offset:a=0}={}){const o=[{entity_type:"",orm_base:"node",tag:"node",joining_keyword:null,joining_value:null,edge_tag:null,outerjoin:!1}],l={node:{}},s={node:["id","uuid","node_type","label","ctime","mtime"]};if(e.length===1?l.node.node_type={like:e[0]}:e.length>1&&(l.node={or:e.map(f=>({node_type:{like:f}}))}),r.length>0){const f="core_1",m="node--core_1";o.push({entity_type:"group.core",orm_base:"group",tag:f,joining_keyword:"with_node",joining_value:"node",edge_tag:m,outerjoin:!1}),l[f]={type_string:{like:"%"},or:r.map(b=>({label:b}))},l[m]={},s[f]=[],s[m]=[]}return{path:o,filters:l,project:s,project_map:{},order_by:[],limit:t,offset:a,distinct:!0}}function SortIcon({direction:r="asc",size:e=14,className:t=""}){return jsxRuntimeExports.jsx("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",className:`${t} ae:transform ${r==="asc"?"rotate-180":""}`,children:jsxRuntimeExports.jsx("path",{d:"M6 9l6 6 6-6",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"})})}function DataTable({title:r,columns:e,data:t=[],maxWidth:a="2000px",maxHeight:o=null,sortableCols:l=!0,breakableCols:s=!1,renderIfMissing:f=!1}){const[m,b]=reactExports.useState({key:null,direction:"asc"}),E=reactExports.useMemo(()=>{if(!t)return[];if(!m.key)return t;const M=[...t].sort((I,V)=>{const Z=I[m.key],ee=V[m.key];return!isNaN(Z)&&!isNaN(ee)?Z-ee:String(Z).localeCompare(String(ee))});return m.direction==="asc"?M:M.reverse()},[t,m]);return!f&&(!t||t.length===0)?null:jsxRuntimeExports.jsxs("div",{className:"ae:p-2",style:{maxWidth:a},children:[jsxRuntimeExports.jsx("div",{className:"explorerHeading ae:pb-2",children:r}),jsxRuntimeExports.jsx("div",{className:"ae:overflow-x-auto ae:shadow-md ae:md:shadow ae:bg-white",style:o?{maxHeight:o,overflowY:"auto"}:{},children:jsxRuntimeExports.jsxs("table",{className:"ae:min-w-full ae:text-xs ae:md:text-sm ae:text-left",children:[jsxRuntimeExports.jsx("thead",{className:"ae:bg-slate-100 ae:text-slate-700",children:jsxRuntimeExports.jsx("tr",{children:e.map(M=>{const I=Array.isArray(l)?l.includes(M):l;return jsxRuntimeExports.jsx("th",{className:`ae:px-3 ae:md:px-4 ae:py-0.5 ae:md:py-1 ae:font-medium ${I?"ae:cursor-pointer ae:select-none":""}`,onClick:()=>I&&b(V=>({key:M,direction:V.key===M&&V.direction==="asc"?"desc":"asc"})),children:jsxRuntimeExports.jsxs("div",{className:"ae:flex ae:items-center ae:gap-1",children:[M,I&&m.key===M&&jsxRuntimeExports.jsx(SortIcon,{direction:m.direction,size:14,className:"ae:ml-1 ae:text-slate-500"})]})},M)})})}),jsxRuntimeExports.jsx("tbody",{children:E.map((M,I)=>jsxRuntimeExports.jsx("tr",{className:I%2===0?"ae:bg-slate-50":"ae:bg-slate-100",children:e.map(V=>{const ee=["ae:px-3 ae:md:px-4 ae:py-0.5 ae:md:py-2 ae:text-slate-900",(Array.isArray(s)?s.includes(V):s)?"ae:whitespace-normal ae:break-all":"ae:whitespace-nowrap"].join(" ");return jsxRuntimeExports.jsx("td",{className:ee,children:M[V]},V)})},M.id||I))})]})})]})}function useMediaQuery(r){const[e,t]=reactExports.useState(()=>typeof window<"u"?window.matchMedia(r).matches:!1);return reactExports.useEffect(()=>{if(typeof window>"u")return;const a=window.matchMedia(r),o=l=>{t(l.matches),console.log("media query fired")};return a.addEventListener("change",o),t(a.matches),()=>a.removeEventListener("change",o)},[r]),e}const columnLabels={uuid:"Unique ID",label:"Label",full_type:"Type",ctime:"Created",mtime:"Modified",id:"ID"},columnOrder=["Unique ID","Label","Type","Created","Modified",""];function formatValue(r,e,t=!1){if(e==null)return"";switch(r){case"Type":return typeof e!="string"?e:t&&e.replace(/\|$/,"").split(".").at(-2)||e;case"Created":case"Modified":{const a=new Date(e);return t?a.toISOString().split("T")[0]:a.toLocaleString()}case"Unique ID":return t&&typeof e=="string"?e.split("-")[0]:e;default:return e}}function formatTableData(r,e,t=!1){return r.map(a=>{const o={};return columnOrder.forEach(l=>{const s=Object.keys(columnLabels).find(f=>columnLabels[f]===l);s&&a[s]!==void 0&&(o[l]=formatValue(l,a[s],t))}),o[""]=jsxRuntimeExports.jsx("button",{onClick:()=>e(a.uuid),className:"explorerButton ae:bg-slate-500 ae:hover:bg-slate-700 ae:text-white",children:"View"}),o})}function sortGroups(r){return[...r].sort((e,t)=>{const a=/^\d/.test(e.label),o=/^\d/.test(t.label);return a&&!o?1:!a&&o?-1:e.label.localeCompare(t.label,void 0,{numeric:!0})})}function GroupsViewer({restApiUrl:r,setRootNodeId:e}){const[t,a]=reactExports.useState([]),[o,l]=reactExports.useState([]),[s,f]=reactExports.useState([]),[m,b]=reactExports.useState([]),[E,M]=reactExports.useState(0),[I,V]=reactExports.useState(!1),[Z,ee]=reactExports.useState(null),[le,K]=reactExports.useState(""),vt=200,q=useMediaQuery("(max-width: 790px)"),Q=q?columnOrder.filter(it=>it!=="Created"):columnOrder;reactExports.useEffect(()=>{fetchGroups(r).then(a).catch(console.error)},[r]);const wt=reactExports.useCallback(async(it=0,zt=vt)=>{V(!0),ee(null);try{const Zt=getFlattenedNodeTypes(s,aiidaTypes),Mn=buildQuery({groups:o,nodeTypes:Zt,limit:zt,offset:it}),zp=(await fetchFromQueryBuilder(r,Mn)).node||[];b(sa=>it===0?zp:[...sa,...zp]),M(it+zp.length)}catch(Zt){console.error(Zt),ee(Zt.message||"Failed to fetch nodes")}finally{V(!1)}},[r,o,s]);reactExports.useEffect(()=>{t.length>0&&m.length===0&&wt(0,1e3)},[t,m.length,wt]);const bt=reactExports.useMemo(()=>formatTableData(m,e,q),[m,q,e]),Ut=()=>{le.trim()!==""&&(e(le.trim()),K(""))};return jsxRuntimeExports.jsxs("div",{className:"ae:flex ae:flex-col ae:lg:flex-row ae:gap-4 ae:overflow-auto ae:w-full ae:items-start",children:[jsxRuntimeExports.jsxs("div",{className:"ae:min-w-[250px] ae:max-w-[400px] ae:flex-shrink-0 ae:bg-slate-50 ae:p-2 ae:px-3 ae:rounded",children:[jsxRuntimeExports.jsxs("div",{className:"ae:flex ae:gap-4 ae:items-center ae:mb-2",children:[jsxRuntimeExports.jsx("div",{className:"ae:font-medium",children:"Filter by Node Types"}),jsxRuntimeExports.jsx("button",{onClick:()=>wt(0),className:"explorerButton ae:bg-slate-500 ae:hover:bg-slate-700 ae:text-white",children:"Apply"})]}),jsxRuntimeExports.jsx(TypeCheckboxTree,{types:aiidaTypes,selectedTypes:s,setSelectedTypes:f}),jsxRuntimeExports.jsx("div",{className:"ae:font-medium ae:my-2 ae:mt-4",children:"Filter by Defined Groups"}),sortGroups(t).map(it=>jsxRuntimeExports.jsxs("label",{className:"ae:flex ae:items-start ae:gap-2 ae:mb-1",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",className:"ae:mt-1",checked:o.includes(it.label),onChange:zt=>l(Zt=>zt.target.checked?[...Zt,it.label]:Zt.filter(Mn=>Mn!==it.label))}),jsxRuntimeExports.jsx("span",{className:"ae:truncate ae:block",title:it.label,children:it.label})]},it.label))]}),jsxRuntimeExports.jsxs("div",{className:"ae:flex-1 ae:bg-white ae:rounded ae:gap-2",children:[jsxRuntimeExports.jsxs("div",{className:"ae:flex ae:flex-col ae:lg:flex-row ae:lg:items-center ae:gap-2",children:[jsxRuntimeExports.jsxs("div",{className:"ae:flex-1 ae:flex ae:items-center ae:gap-2 ae:py-2",children:[jsxRuntimeExports.jsxs("div",{className:"ae:text-xl ae:font-medium",children:[bt.length," nodes loaded"]}),bt.length>0&&jsxRuntimeExports.jsx("button",{onClick:()=>wt(E),className:"explorerButton ae:bg-slate-500 ae:hover:bg-slate-700 ae:text-white",children:"Load next 200"})]}),jsxRuntimeExports.jsxs("div",{className:"ae:flex ae:flex-col ae:sm:flex-row ae:items-start ae:sm:items-center ae:gap-2 ae:py-1 ae:w-full ae:lg:w-auto",children:[jsxRuntimeExports.jsx("span",{className:"ae:font-medium",children:"Navigate via UUID:"}),jsxRuntimeExports.jsx("input",{type:"text",value:le,onChange:it=>K(it.target.value),placeholder:"Enter a UUID",className:"ae:flex-1 ae:min-w-80 ae:border-2 ae:border-gray-300 ae:focus:outline-none ae:focus:border-slate-500 ae:px-2 ae:py-1 ae:rounded"}),jsxRuntimeExports.jsx("button",{onClick:Ut,className:"explorerButton ae:bg-slate-500 ae:hover:bg-slate-700 ae:text-white",children:"Go"})]})]}),I&&jsxRuntimeExports.jsx("div",{className:"ae:w-full ae:h-[400px] ae:flex ae:items-center ae:justify-center",children:jsxRuntimeExports.jsx(Spinner,{})}),Z&&!I&&jsxRuntimeExports.jsx("div",{className:"ae:w-full ae:h-[400px] ae:flex ae:flex-col ae:items-center ae:justify-center",children:jsxRuntimeExports.jsx(ErrorDisplay,{message:Z,onRetry:()=>wt(E)})}),!I&&!Z&&jsxRuntimeExports.jsx(DataTable,{columns:Q,data:bt,maxWidth:"3000px",sortableCols:["Unique ID","Label","Type","Created","Modified"],renderIfMissing:!0,breakableCols:["Unique ID","Label","Type","Created","Modified"]})]})]})}function HelpViewer(){return jsxRuntimeExports.jsxs("div",{className:"ae:p-2 ae:w-full ae:h-full ae:overflow-y-auto ae:bg-white",children:[jsxRuntimeExports.jsxs("section",{className:"ae:mb-4",children:[jsxRuntimeExports.jsx("div",{className:"ae:text-lg  ae:mb-3 ae:flex ae:items-center ae:gap-2",children:"Overview"}),jsxRuntimeExports.jsxs("p",{className:"ae:text-gray-700 ae:leading-relaxed",children:["Aiida Explorer is an interactive tool for visualizing AiiDA workflows and calculations. You can navigate nodes, inspect their details, and explore relationships between workflows, calculations, and data nodes. This tool leverages the"," ",jsxRuntimeExports.jsx("a",{href:"https://aiida.readthedocs.io/projects/aiida-core/en/stable/internals/rest_api.html",className:"ae:text-blue-400 ae:hover:underline ae:hover:text-blue-700",target:"_blank",children:"AiiDA REST API"})," ","and presents data retrieved from it in a curated manner."]})]}),jsxRuntimeExports.jsxs("section",{className:"ae:mb-4",children:[jsxRuntimeExports.jsxs("div",{className:"ae:text-lg  ae:mb-3 ae:flex ae:items-center ae:gap-2",children:[jsxRuntimeExports.jsx(GraphIcon,{size:24})," Provenance"]}),jsxRuntimeExports.jsxs("p",{className:"ae:text-gray-700 ae:leading-relaxed",children:["Using AiiDA for high-throughput workflows comes with the benefit of AiiDA provenence. This provenence stores how calculations were performed and the results from them. Every node is part of a directed acyclic graph (DAG) that records the inputs, outputs, and intermediate steps. Understanding provenance helps reproducability and facilitates sharing. Learn more in the"," ",jsxRuntimeExports.jsx("a",{href:"https://aiida.readthedocs.io/projects/aiida-core/en/latest/",className:"ae:text-blue-400 ae:hover:underline ae:hover:text-blue-700",target:"_blank",children:"official docs."})," ","This tool uses the the 'API endpoint /links' to build up a local view of each node."]})]}),jsxRuntimeExports.jsxs("section",{className:"ae:mb-4",children:[jsxRuntimeExports.jsxs("div",{className:"ae:text-lg ae:mb-3 ae:flex ae:items-center ae:gap-2",children:[jsxRuntimeExports.jsx(ClickIcon,{size:24})," Inspecting Nodes"]}),jsxRuntimeExports.jsxs("ul",{className:"ae:pl-4 ae:list-inside ae:text-gray-700 ae:space-y-1",children:[jsxRuntimeExports.jsxs("li",{className:"ae:flex ae:items-center ae:gap-2",children:[jsxRuntimeExports.jsxs("span",{className:"ae:flex ae:items-center ae:gap-1 ae:font-medium",children:[jsxRuntimeExports.jsx(ClickIcon2,{size:22})," Click a node:"]}),jsxRuntimeExports.jsx("span",{className:"ae:text-gray-700",children:"Highlights the node and displays detailed information in the side panel."})]}),jsxRuntimeExports.jsxs("li",{className:"ae:flex ae:items-center ae:gap-2",children:[jsxRuntimeExports.jsxs("span",{className:"ae:flex ae:items-center ae:gap-1 ae:font-medium",children:[jsxRuntimeExports.jsx(DoubleClickIcon,{size:22})," Double-click a node:"]}),jsxRuntimeExports.jsx("span",{className:"ae:text-gray-700",children:"Sets the node as the central focus, building the links and centering the graph."})]}),jsxRuntimeExports.jsxs("li",{className:"ae:flex ae:items-center ae:gap-2",children:[jsxRuntimeExports.jsxs("span",{className:"ae:flex ae:items-center ae:gap-1 ae:font-medium",children:[jsxRuntimeExports.jsx(BreadcrumbsIcon,{size:22})," Breadcrumbs:"]}),jsxRuntimeExports.jsx("span",{className:"ae:text-gray-700",children:"Quickly navigate back to previously explored nodes. A history of the last 10 visited nodes is retained."})]})]})]}),jsxRuntimeExports.jsxs("section",{className:"ae:mb-4",children:[jsxRuntimeExports.jsxs("div",{className:"ae:text-lg ae:mb-3 ae:flex ae:items-center ae:gap-2",children:[jsxRuntimeExports.jsx(GraphIcon,{size:26})," Buttons & Controls"]}),jsxRuntimeExports.jsxs("ul",{className:"ae:pl-4 ae:list-inside ae:text-gray-700 ae:space-y-1",children:[jsxRuntimeExports.jsxs("li",{className:"ae:flex ae:items-center ae:gap-2",children:[jsxRuntimeExports.jsxs("span",{className:"ae:flex ae:items-center ae:gap-1 ae:font-medium",children:[jsxRuntimeExports.jsx(GroupIcon,{size:22})," Find node:"]}),jsxRuntimeExports.jsx("span",{className:"ae:text-gray-700",children:"Provides a graphical interface for simple AiiDA queries using the querybuilder endpoint."})]}),jsxRuntimeExports.jsxs("li",{className:"ae:flex ae:items-center ae:gap-2",children:[jsxRuntimeExports.jsxs("span",{className:"ae:flex ae:items-center ae:gap-1 ae:font-medium",children:[jsxRuntimeExports.jsx(LinksIcon,{size:20})," Get Counts:"]}),jsxRuntimeExports.jsx("span",{className:"ae:text-gray-700",children:"Fetches the parent/child counts for all nodes currently visible in the graph."})]}),jsxRuntimeExports.jsxs("li",{className:"ae:flex ae:items-center ae:gap-2",children:[jsxRuntimeExports.jsxs("span",{className:"ae:flex ae:items-center ae:gap-1 ae:font-medium",children:[jsxRuntimeExports.jsx(QuestionIcon,{size:20})," Help:"]}),jsxRuntimeExports.jsx("span",{className:"ae:text-gray-700",children:"Opens this help overlay."})]})]})]}),jsxRuntimeExports.jsxs("p",{className:"ae:text-gray-500 ae:text-sm ae:mt-6",children:["This tool is currently in beta testing stage. Report unexpected behaviour, bugs or general suggestions on"," ",jsxRuntimeExports.jsxs("a",{href:"https://github.com/aiidateam/aiida-explorer/issues/new",className:"ae:group ae:inline-flex ae:items-center ae:gap-0.5 ae:text-blue-400",target:"_blank",children:[jsxRuntimeExports.jsx("span",{className:"ae:transition-colors ae:group-hover:ae:text-blue-700",children:"GitHub."}),jsxRuntimeExports.jsx("span",{className:"ae:inline-flex ae:items-center ae:justify-center ae:w-5 ae:h-5 ae:rounded-full ae:bg-blue-400 ae:group-hover:bg-blue-700 ae:transition-colors",children:jsxRuntimeExports.jsx(GithubIcon,{className:"ae:w-[18px] ae:h-[18px] ae:text-white"})})]})]})]})}function useRootNode(r,e,t){const a=r!==void 0,[o,l]=reactExports.useState(e),s=a?r:o,f=reactExports.useCallback(m=>{a||l(m),t(m)},[a,t]);return[s,f]}function TopControls({onFindNode:r,onGetLinkCounts:e,onHelp:t,isLoading:a,disableGetCounts:o=!1}){return jsxRuntimeExports.jsxs("div",{className:"ae:w-full ae:shadow-md ae:bg-slate-100 ae:border-b ae:px-4 ae:py-2 ae:flex ae:justify-between ae:items-center ae:z-50",children:[jsxRuntimeExports.jsxs("div",{className:"ae:flex ae:gap-2",children:[jsxRuntimeExports.jsxs("button",{className:"explorerButton",onClick:r,children:[jsxRuntimeExports.jsx(GroupIcon,{className:"ae:w-5 ae:h-5"}),jsxRuntimeExports.jsx("span",{children:"Find Node"})]}),jsxRuntimeExports.jsxs("button",{className:"explorerButton",onClick:e,disabled:o||a,children:[jsxRuntimeExports.jsx(LinksIcon,{className:"ae:w-5 ae:h-5"}),jsxRuntimeExports.jsx("span",{children:"Get Link Counts"})]})]}),jsxRuntimeExports.jsxs("button",{className:"explorerButton",onClick:t,children:[jsxRuntimeExports.jsx(QuestionIcon,{className:"ae:w-5 ae:h-5"}),jsxRuntimeExports.jsx("span",{children:"Help"})]})]})}function FormattedMetaData({nodeData:r,userData:e}){const t=e?.users||[],a=r?.aiida,[o,l]=reactExports.useState(!1);if(!a)return jsxRuntimeExports.jsx("div",{className:"ae:p-4 ae:text-slate-500 ae:italic",children:"No metadata available"});const s=Array.isArray(t)?t.find(f=>f.id===a.user_id):null;return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"ae:flex ae:gap-2 ae:items-center ae:cursor-pointer ae:md:cursor-default",onClick:()=>l(!o),children:[jsxRuntimeExports.jsx("div",{className:"explorerHeadingBig",children:r.label||""}),jsxRuntimeExports.jsx("span",{className:"ae:lg:hidden ae:transition-transform ae:duration-200",children:o?"▲":"▼"})]}),jsxRuntimeExports.jsx("div",{className:`${o?"ae:block":"ae:hidden"} ae:mt-1 ae:lg:block ae:lg:mt-2`,children:jsxRuntimeExports.jsxs("div",{className:"ae:space-y-1 ae:px-1 ae:text-xs ae:lg:text-sm",children:[a.uuid&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"ae:font-medium",children:"UUID:"})," ",a.uuid]}),a.ctime&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"ae:font-medium",children:"Created:"})," ",a.ctime]}),a.mtime&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"ae:font-medium",children:"Modified:"})," ",a.mtime]}),a.node_type&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"ae:font-medium",children:"Node Type:"})," ",a.node_type]}),s&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"ae:font-medium",children:"Owner:"})," ",s.first_name," ",s.last_name||"",s.institution&&jsxRuntimeExports.jsxs("span",{className:"ae:text-gray-500",children:[" (",s.institution,")"]})]})]})})]})}function _extends(){return _extends=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var a in t)({}).hasOwnProperty.call(t,a)&&(r[a]=t[a])}return r},_extends.apply(null,arguments)}function _objectWithoutPropertiesLoose(r,e){if(r==null)return{};var t={};for(var a in r)if({}.hasOwnProperty.call(r,a)){if(e.indexOf(a)!==-1)continue;t[a]=r[a]}return t}var initialState$5={},Context$5=reactExports.createContext(initialState$5),reducer$5=(r,e)=>_extends({},r,e),useShowToolsStore=()=>reactExports.useContext(Context$5),DispatchShowTools=reactExports.createContext(()=>{});DispatchShowTools.displayName="JVR.DispatchShowTools";function useShowTools(){return reactExports.useReducer(reducer$5,initialState$5)}function useShowToolsDispatch(){return reactExports.useContext(DispatchShowTools)}var ShowTools=r=>{var{initial:e,dispatch:t,children:a}=r;return jsxRuntimeExports.jsx(Context$5.Provider,{value:e,children:jsxRuntimeExports.jsx(DispatchShowTools.Provider,{value:t,children:a})})};ShowTools.displayName="JVR.ShowTools";var initialState$4={},Context$4=reactExports.createContext(initialState$4),reducer$4=(r,e)=>_extends({},r,e),useExpandsStore=()=>reactExports.useContext(Context$4),DispatchExpands=reactExports.createContext(()=>{});DispatchExpands.displayName="JVR.DispatchExpands";function useExpands(){return reactExports.useReducer(reducer$4,initialState$4)}function useExpandsDispatch(){return reactExports.useContext(DispatchExpands)}var Expands=r=>{var{initial:e,dispatch:t,children:a}=r;return jsxRuntimeExports.jsx(Context$4.Provider,{value:e,children:jsxRuntimeExports.jsx(DispatchExpands.Provider,{value:t,children:a})})};Expands.displayName="JVR.Expands";var initialState$3={Str:{as:"span","data-type":"string",style:{color:"var(--w-rjv-type-string-color, #cb4b16)"},className:"w-rjv-type",children:"string"},Url:{as:"a",style:{color:"var(--w-rjv-type-url-color, #0969da)"},"data-type":"url",className:"w-rjv-type",children:"url"},Undefined:{style:{color:"var(--w-rjv-type-undefined-color, #586e75)"},as:"span","data-type":"undefined",className:"w-rjv-type",children:"undefined"},Null:{style:{color:"var(--w-rjv-type-null-color, #d33682)"},as:"span","data-type":"null",className:"w-rjv-type",children:"null"},Map:{style:{color:"var(--w-rjv-type-map-color, #268bd2)",marginRight:3},as:"span","data-type":"map",className:"w-rjv-type",children:"Map"},Nan:{style:{color:"var(--w-rjv-type-nan-color, #859900)"},as:"span","data-type":"nan",className:"w-rjv-type",children:"NaN"},Bigint:{style:{color:"var(--w-rjv-type-bigint-color, #268bd2)"},as:"span","data-type":"bigint",className:"w-rjv-type",children:"bigint"},Int:{style:{color:"var(--w-rjv-type-int-color, #268bd2)"},as:"span","data-type":"int",className:"w-rjv-type",children:"int"},Set:{style:{color:"var(--w-rjv-type-set-color, #268bd2)",marginRight:3},as:"span","data-type":"set",className:"w-rjv-type",children:"Set"},Float:{style:{color:"var(--w-rjv-type-float-color, #859900)"},as:"span","data-type":"float",className:"w-rjv-type",children:"float"},True:{style:{color:"var(--w-rjv-type-boolean-color, #2aa198)"},as:"span","data-type":"bool",className:"w-rjv-type",children:"bool"},False:{style:{color:"var(--w-rjv-type-boolean-color, #2aa198)"},as:"span","data-type":"bool",className:"w-rjv-type",children:"bool"},Date:{style:{color:"var(--w-rjv-type-date-color, #268bd2)"},as:"span","data-type":"date",className:"w-rjv-type",children:"date"}},Context$3=reactExports.createContext(initialState$3),reducer$3=(r,e)=>_extends({},r,e),useTypesStore=()=>reactExports.useContext(Context$3),DispatchTypes=reactExports.createContext(()=>{});DispatchTypes.displayName="JVR.DispatchTypes";function useTypes(){return reactExports.useReducer(reducer$3,initialState$3)}function useTypesDispatch(){return reactExports.useContext(DispatchTypes)}function Types(r){var{initial:e,dispatch:t,children:a}=r;return jsxRuntimeExports.jsx(Context$3.Provider,{value:e,children:jsxRuntimeExports.jsx(DispatchTypes.Provider,{value:t,children:a})})}Types.displayName="JVR.Types";var _excluded$a=["style"];function TriangleArrow(r){var{style:e}=r,t=_objectWithoutPropertiesLoose(r,_excluded$a),a=_extends({cursor:"pointer",height:"1em",width:"1em",userSelect:"none",display:"inline-flex"},e);return jsxRuntimeExports.jsx("svg",_extends({viewBox:"0 0 24 24",fill:"var(--w-rjv-arrow-color, currentColor)",style:a},t,{children:jsxRuntimeExports.jsx("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"})}))}TriangleArrow.displayName="JVR.TriangleArrow";var initialState$2={Arrow:{as:"span",className:"w-rjv-arrow",style:{transform:"rotate(0deg)",transition:"all 0.3s"},children:jsxRuntimeExports.jsx(TriangleArrow,{})},Colon:{as:"span",style:{color:"var(--w-rjv-colon-color, var(--w-rjv-color))",marginLeft:0,marginRight:2},className:"w-rjv-colon",children:":"},Quote:{as:"span",style:{color:"var(--w-rjv-quotes-color, #236a7c)"},className:"w-rjv-quotes",children:'"'},ValueQuote:{as:"span",style:{color:"var(--w-rjv-quotes-string-color, #cb4b16)"},className:"w-rjv-quotes",children:'"'},BracketsLeft:{as:"span",style:{color:"var(--w-rjv-brackets-color, #236a7c)"},className:"w-rjv-brackets-start",children:"["},BracketsRight:{as:"span",style:{color:"var(--w-rjv-brackets-color, #236a7c)"},className:"w-rjv-brackets-end",children:"]"},BraceLeft:{as:"span",style:{color:"var(--w-rjv-curlybraces-color, #236a7c)"},className:"w-rjv-curlybraces-start",children:"{"},BraceRight:{as:"span",style:{color:"var(--w-rjv-curlybraces-color, #236a7c)"},className:"w-rjv-curlybraces-end",children:"}"}},Context$2=reactExports.createContext(initialState$2),reducer$2=(r,e)=>_extends({},r,e),useSymbolsStore=()=>reactExports.useContext(Context$2),DispatchSymbols=reactExports.createContext(()=>{});DispatchSymbols.displayName="JVR.DispatchSymbols";function useSymbols(){return reactExports.useReducer(reducer$2,initialState$2)}function useSymbolsDispatch(){return reactExports.useContext(DispatchSymbols)}var Symbols=r=>{var{initial:e,dispatch:t,children:a}=r;return jsxRuntimeExports.jsx(Context$2.Provider,{value:e,children:jsxRuntimeExports.jsx(DispatchSymbols.Provider,{value:t,children:a})})};Symbols.displayName="JVR.Symbols";var initialState$1={Copied:{className:"w-rjv-copied",style:{height:"1em",width:"1em",cursor:"pointer",verticalAlign:"middle",marginLeft:5}},CountInfo:{as:"span",className:"w-rjv-object-size",style:{color:"var(--w-rjv-info-color, #0000004d)",paddingLeft:8,fontStyle:"italic"}},CountInfoExtra:{as:"span",className:"w-rjv-object-extra",style:{paddingLeft:8}},Ellipsis:{as:"span",style:{cursor:"pointer",color:"var(--w-rjv-ellipsis-color, #cb4b16)",userSelect:"none"},className:"w-rjv-ellipsis",children:"..."},Row:{as:"div",className:"w-rjv-line"},KeyName:{as:"span",className:"w-rjv-object-key"}},Context$1=reactExports.createContext(initialState$1),reducer$1=(r,e)=>_extends({},r,e),useSectionStore=()=>reactExports.useContext(Context$1),DispatchSection=reactExports.createContext(()=>{});DispatchSection.displayName="JVR.DispatchSection";function useSection(){return reactExports.useReducer(reducer$1,initialState$1)}function useSectionDispatch(){return reactExports.useContext(DispatchSection)}var Section=r=>{var{initial:e,dispatch:t,children:a}=r;return jsxRuntimeExports.jsx(Context$1.Provider,{value:e,children:jsxRuntimeExports.jsx(DispatchSection.Provider,{value:t,children:a})})};Section.displayName="JVR.Section";var initialState={objectSortKeys:!1,indentWidth:15},Context=reactExports.createContext(initialState);Context.displayName="JVR.Context";var DispatchContext=reactExports.createContext(()=>{});DispatchContext.displayName="JVR.DispatchContext";function reducer(r,e){return _extends({},r,e)}var useStore=()=>reactExports.useContext(Context),Provider=r=>{var{children:e,initialState:t,initialTypes:a}=r,[o,l]=reactExports.useReducer(reducer,Object.assign({},initialState,t)),[s,f]=useShowTools(),[m,b]=useExpands(),[E,M]=useTypes(),[I,V]=useSymbols(),[Z,ee]=useSection();return reactExports.useEffect(()=>l(_extends({},t)),[t]),jsxRuntimeExports.jsx(Context.Provider,{value:o,children:jsxRuntimeExports.jsx(DispatchContext.Provider,{value:l,children:jsxRuntimeExports.jsx(ShowTools,{initial:s,dispatch:f,children:jsxRuntimeExports.jsx(Expands,{initial:m,dispatch:b,children:jsxRuntimeExports.jsx(Types,{initial:_extends({},E,a),dispatch:M,children:jsxRuntimeExports.jsx(Symbols,{initial:I,dispatch:V,children:jsxRuntimeExports.jsx(Section,{initial:Z,dispatch:ee,children:e})})})})})})})};Provider.displayName="JVR.Provider";function _objectDestructuringEmpty(r){if(r==null)throw new TypeError("Cannot destructure "+r)}var _excluded$9=["isNumber","value","parentValue","keyName","keys"],_excluded2$5=["as","render"],_excluded3$1=["as","render"],_excluded4$1=["as","render"],_excluded5$1=["as","style","render"],_excluded6$1=["as","render"],_excluded7$1=["as","render"],_excluded8$1=["as","render"],_excluded9$1=["as","render"],Quote$1=r=>{var{Quote:e={}}=useSymbolsStore(),{isNumber:t,value:a,parentValue:o,keyName:l,keys:s}=r,f=_objectWithoutPropertiesLoose(r,_excluded$9);if(t)return null;var{as:m,render:b}=e,E=_objectWithoutPropertiesLoose(e,_excluded2$5),M=m||"span",I=_extends({},f,E),V={value:a,parentValue:o,keyName:l,keys:s||(l?[l]:[])},Z=b&&typeof b=="function"&&b(I,V);return Z||jsxRuntimeExports.jsx(M,_extends({},I))};Quote$1.displayName="JVR.Quote";var ValueQuote$1=r=>{var{ValueQuote:e={}}=useSymbolsStore(),t=_extends({},(_objectDestructuringEmpty(r),r)),{as:a,render:o}=e,l=_objectWithoutPropertiesLoose(e,_excluded3$1),s=a||"span",f=_extends({},t,l),m=o&&typeof o=="function"&&o(f,{});return m||jsxRuntimeExports.jsx(s,_extends({},f))};ValueQuote$1.displayName="JVR.ValueQuote";var Colon$1=r=>{var{value:e,parentValue:t,keyName:a,keys:o}=r,{Colon:l={}}=useSymbolsStore(),{as:s,render:f}=l,m=_objectWithoutPropertiesLoose(l,_excluded4$1),b=s||"span",E=f&&typeof f=="function"&&f(m,{value:e,parentValue:t,keyName:a,keys:o||(a?[a]:[])});return E||jsxRuntimeExports.jsx(b,_extends({},m))};Colon$1.displayName="JVR.Colon";var Arrow$1=r=>{var{Arrow:e={}}=useSymbolsStore(),t=useExpandsStore(),{expandKey:a,style:o,value:l,parentValue:s,keyName:f,keys:m}=r,b=!!t[a],{as:E,style:M,render:I}=e,V=_objectWithoutPropertiesLoose(e,_excluded5$1),Z=E||"span",ee=I&&typeof I=="function",le=_extends({},V,{"data-expanded":b,style:_extends({},M,o)}),K={value:l,parentValue:s,keyName:f,keys:m||(f?[f]:[])},vt=ee&&I(le,K);return vt||jsxRuntimeExports.jsx(Z,_extends({},V,{style:_extends({},M,o)}))};Arrow$1.displayName="JVR.Arrow";var BracketsOpen=r=>{var{isBrackets:e,value:t,parentValue:a,keyName:o,keys:l}=r,{BracketsLeft:s={},BraceLeft:f={}}=useSymbolsStore(),m={value:t,parentValue:a,keyName:o,keys:l||(o?[o]:[])};if(e){var{as:b,render:E}=s,M=_objectWithoutPropertiesLoose(s,_excluded6$1),I=b||"span",V=E&&typeof E=="function"&&E(M,m);return V||jsxRuntimeExports.jsx(I,_extends({},M))}var{as:Z,render:ee}=f,le=_objectWithoutPropertiesLoose(f,_excluded7$1),K=Z||"span",vt=ee&&typeof ee=="function"&&ee(le,m);return vt||jsxRuntimeExports.jsx(K,_extends({},le))};BracketsOpen.displayName="JVR.BracketsOpen";var BracketsClose=r=>{var{isBrackets:e,isVisiable:t,value:a,parentValue:o,keyName:l,keys:s}=r,f={value:a,parentValue:o,keyName:l,keys:s||(l?[l]:[])};if(!t)return null;var{BracketsRight:m={},BraceRight:b={}}=useSymbolsStore();if(e){var{as:E,render:M}=m,I=_objectWithoutPropertiesLoose(m,_excluded8$1),V=E||"span",Z=M&&typeof M=="function"&&M(I,f);return Z||jsxRuntimeExports.jsx(V,_extends({},I))}var{as:ee,render:le}=b,K=_objectWithoutPropertiesLoose(b,_excluded9$1),vt=ee||"span",q=le&&typeof le=="function"&&le(K,f);return q||jsxRuntimeExports.jsx(vt,_extends({},K))};BracketsClose.displayName="JVR.BracketsClose";var NestedClose=r=>{var e,{keyName:t,value:a,expandKey:o,parentValue:l,level:s,keys:f=[]}=r,m=useExpandsStore(),{collapsed:b,shouldExpandNodeInitially:E}=useStore(),M=typeof b=="boolean"?b:typeof b=="number"?s>b:!1,I=(e=m[o])!=null?e:E?!1:M,V=E&&E(!I,{value:a,keys:f,level:s,keyName:t,parentValue:l});if(m[o]===void 0&&!V)return null;var Z=Object.keys(a).length;if(I||Z===0)return null;var ee={paddingLeft:4},le={keyName:t,value:a,keys:f,parentValue:l},K=Array.isArray(a),vt=a instanceof Set;return jsxRuntimeExports.jsx("div",{style:ee,children:jsxRuntimeExports.jsx(BracketsClose,_extends({isBrackets:K||vt},le,{isVisiable:!0}))})};NestedClose.displayName="JVR.NestedClose";var _excluded$8=["as","render"],_excluded2$4=["as","render"],_excluded3=["as","render"],_excluded4=["as","render"],_excluded5=["as","render"],_excluded6=["as","render"],_excluded7=["as","render"],_excluded8=["as","render"],_excluded9=["as","render"],_excluded0=["as","render"],_excluded1=["as","render"],_excluded10=["as","render"],_excluded11=["as","render"],bigIntToString=r=>{if(r===void 0)return"0n";if(typeof r=="string")try{r=BigInt(r)}catch{return"0n"}return r?r.toString()+"n":"0n"},SetComp=r=>{var{value:e,keyName:t}=r,{Set:a={},displayDataTypes:o}=useTypesStore(),l=e instanceof Set;if(!l||!o)return null;var{as:s,render:f}=a,m=_objectWithoutPropertiesLoose(a,_excluded$8),b=f&&typeof f=="function",E=b&&f(m,{type:"type",value:e,keyName:t});if(E)return E;var M=s||"span";return jsxRuntimeExports.jsx(M,_extends({},m))};SetComp.displayName="JVR.SetComp";var MapComp=r=>{var{value:e,keyName:t}=r,{Map:a={},displayDataTypes:o}=useTypesStore(),l=e instanceof Map;if(!l||!o)return null;var{as:s,render:f}=a,m=_objectWithoutPropertiesLoose(a,_excluded2$4),b=f&&typeof f=="function",E=b&&f(m,{type:"type",value:e,keyName:t});if(E)return E;var M=s||"span";return jsxRuntimeExports.jsx(M,_extends({},m))};MapComp.displayName="JVR.MapComp";var defalutStyle={opacity:.75,paddingRight:4},TypeString=r=>{var{children:e="",keyName:t,keys:a}=r,{Str:o={},displayDataTypes:l}=useTypesStore(),{shortenTextAfterLength:s=30,stringEllipsis:f="..."}=useStore(),{as:m,render:b}=o,E=_objectWithoutPropertiesLoose(o,_excluded3),M=e,[I,V]=reactExports.useState(s&&M.length>s);reactExports.useEffect(()=>V(s&&M.length>s),[s]);var Z=m||"span",ee=_extends({},defalutStyle,o.style||{});s>0&&(E.style=_extends({},E.style,{cursor:M.length<=s?"initial":"pointer"}),M.length>s&&(E.onClick=()=>{V(!I)}));var le=I?""+M.slice(0,s)+f:M,K=b&&typeof b=="function",vt=K&&b(_extends({},E,{style:ee}),{type:"type",value:e,keyName:t,keys:a}),q=I?"w-rjv-value w-rjv-value-short":"w-rjv-value",Q=K&&b(_extends({},E,{children:le,className:q}),{type:"value",value:e,keyName:t,keys:a});return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[l&&(vt||jsxRuntimeExports.jsx(Z,_extends({},E,{style:ee}))),Q||jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(ValueQuote$1,{}),jsxRuntimeExports.jsx(Z,_extends({},E,{className:q,children:le})),jsxRuntimeExports.jsx(ValueQuote$1,{})]})]})};TypeString.displayName="JVR.TypeString";var TypeTrue=r=>{var{children:e,keyName:t,keys:a}=r,{True:o={},displayDataTypes:l}=useTypesStore(),{as:s,render:f}=o,m=_objectWithoutPropertiesLoose(o,_excluded4),b=s||"span",E=_extends({},defalutStyle,o.style||{}),M=f&&typeof f=="function",I=M&&f(_extends({},m,{style:E}),{type:"type",value:e,keyName:t,keys:a}),V=M&&f(_extends({},m,{children:e,className:"w-rjv-value"}),{type:"value",value:e,keyName:t,keys:a});return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[l&&(I||jsxRuntimeExports.jsx(b,_extends({},m,{style:E}))),V||jsxRuntimeExports.jsx(b,_extends({},m,{className:"w-rjv-value",children:e?.toString()}))]})};TypeTrue.displayName="JVR.TypeTrue";var TypeFalse=r=>{var{children:e,keyName:t,keys:a}=r,{False:o={},displayDataTypes:l}=useTypesStore(),{as:s,render:f}=o,m=_objectWithoutPropertiesLoose(o,_excluded5),b=s||"span",E=_extends({},defalutStyle,o.style||{}),M=f&&typeof f=="function",I=M&&f(_extends({},m,{style:E}),{type:"type",value:e,keyName:t,keys:a}),V=M&&f(_extends({},m,{children:e,className:"w-rjv-value"}),{type:"value",value:e,keyName:t,keys:a});return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[l&&(I||jsxRuntimeExports.jsx(b,_extends({},m,{style:E}))),V||jsxRuntimeExports.jsx(b,_extends({},m,{className:"w-rjv-value",children:e?.toString()}))]})};TypeFalse.displayName="JVR.TypeFalse";var TypeFloat=r=>{var{children:e,keyName:t,keys:a}=r,{Float:o={},displayDataTypes:l}=useTypesStore(),{as:s,render:f}=o,m=_objectWithoutPropertiesLoose(o,_excluded6),b=s||"span",E=_extends({},defalutStyle,o.style||{}),M=f&&typeof f=="function",I=M&&f(_extends({},m,{style:E}),{type:"type",value:e,keyName:t,keys:a}),V=M&&f(_extends({},m,{children:e,className:"w-rjv-value"}),{type:"value",value:e,keyName:t,keys:a});return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[l&&(I||jsxRuntimeExports.jsx(b,_extends({},m,{style:E}))),V||jsxRuntimeExports.jsx(b,_extends({},m,{className:"w-rjv-value",children:e?.toString()}))]})};TypeFloat.displayName="JVR.TypeFloat";var TypeInt=r=>{var{children:e,keyName:t,keys:a}=r,{Int:o={},displayDataTypes:l}=useTypesStore(),{as:s,render:f}=o,m=_objectWithoutPropertiesLoose(o,_excluded7),b=s||"span",E=_extends({},defalutStyle,o.style||{}),M=f&&typeof f=="function",I=M&&f(_extends({},m,{style:E}),{type:"type",value:e,keyName:t,keys:a}),V=M&&f(_extends({},m,{children:e,className:"w-rjv-value"}),{type:"value",value:e,keyName:t,keys:a});return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[l&&(I||jsxRuntimeExports.jsx(b,_extends({},m,{style:E}))),V||jsxRuntimeExports.jsx(b,_extends({},m,{className:"w-rjv-value",children:e?.toString()}))]})};TypeInt.displayName="JVR.TypeInt";var TypeBigint=r=>{var{children:e,keyName:t,keys:a}=r,{Bigint:o={},displayDataTypes:l}=useTypesStore(),{as:s,render:f}=o,m=_objectWithoutPropertiesLoose(o,_excluded8),b=s||"span",E=_extends({},defalutStyle,o.style||{}),M=f&&typeof f=="function",I=M&&f(_extends({},m,{style:E}),{type:"type",value:e,keyName:t,keys:a}),V=M&&f(_extends({},m,{children:e,className:"w-rjv-value"}),{type:"value",value:e,keyName:t,keys:a});return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[l&&(I||jsxRuntimeExports.jsx(b,_extends({},m,{style:E}))),V||jsxRuntimeExports.jsx(b,_extends({},m,{className:"w-rjv-value",children:bigIntToString(e?.toString())}))]})};TypeBigint.displayName="JVR.TypeFloat";var TypeUrl=r=>{var{children:e,keyName:t,keys:a}=r,{Url:o={},displayDataTypes:l}=useTypesStore(),{as:s,render:f}=o,m=_objectWithoutPropertiesLoose(o,_excluded9),b=s||"span",E=_extends({},defalutStyle,o.style),M=f&&typeof f=="function",I=M&&f(_extends({},m,{style:E}),{type:"type",value:e,keyName:t,keys:a}),V=M&&f(_extends({},m,{children:e?.href,className:"w-rjv-value"}),{type:"value",value:e,keyName:t,keys:a});return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[l&&(I||jsxRuntimeExports.jsx(b,_extends({},m,{style:E}))),V||jsxRuntimeExports.jsxs("a",_extends({href:e?.href,target:"_blank"},m,{className:"w-rjv-value",children:[jsxRuntimeExports.jsx(ValueQuote$1,{}),e?.href,jsxRuntimeExports.jsx(ValueQuote$1,{})]}))]})};TypeUrl.displayName="JVR.TypeUrl";var TypeDate=r=>{var{children:e,keyName:t,keys:a}=r,{Date:o={},displayDataTypes:l}=useTypesStore(),{as:s,render:f}=o,m=_objectWithoutPropertiesLoose(o,_excluded0),b=s||"span",E=_extends({},defalutStyle,o.style||{}),M=f&&typeof f=="function",I=M&&f(_extends({},m,{style:E}),{type:"type",value:e,keyName:t,keys:a}),V=e instanceof Date?e.toLocaleString():e,Z=M&&f(_extends({},m,{children:V,className:"w-rjv-value"}),{type:"value",value:e,keyName:t,keys:a});return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[l&&(I||jsxRuntimeExports.jsx(b,_extends({},m,{style:E}))),Z||jsxRuntimeExports.jsx(b,_extends({},m,{className:"w-rjv-value",children:V}))]})};TypeDate.displayName="JVR.TypeDate";var TypeUndefined=r=>{var{children:e,keyName:t,keys:a}=r,{Undefined:o={},displayDataTypes:l}=useTypesStore(),{as:s,render:f}=o,m=_objectWithoutPropertiesLoose(o,_excluded1),b=s||"span",E=_extends({},defalutStyle,o.style||{}),M=f&&typeof f=="function",I=M&&f(_extends({},m,{style:E}),{type:"type",value:e,keyName:t,keys:a}),V=M&&f(_extends({},m,{children:e,className:"w-rjv-value"}),{type:"value",value:e,keyName:t,keys:a});return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[l&&(I||jsxRuntimeExports.jsx(b,_extends({},m,{style:E}))),V]})};TypeUndefined.displayName="JVR.TypeUndefined";var TypeNull=r=>{var{children:e,keyName:t,keys:a}=r,{Null:o={},displayDataTypes:l}=useTypesStore(),{as:s,render:f}=o,m=_objectWithoutPropertiesLoose(o,_excluded10),b=s||"span",E=_extends({},defalutStyle,o.style||{}),M=f&&typeof f=="function",I=M&&f(_extends({},m,{style:E}),{type:"type",value:e,keyName:t,keys:a}),V=M&&f(_extends({},m,{children:e,className:"w-rjv-value"}),{type:"value",value:e,keyName:t,keys:a});return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[l&&(I||jsxRuntimeExports.jsx(b,_extends({},m,{style:E}))),V]})};TypeNull.displayName="JVR.TypeNull";var TypeNan=r=>{var{children:e,keyName:t,keys:a}=r,{Nan:o={},displayDataTypes:l}=useTypesStore(),{as:s,render:f}=o,m=_objectWithoutPropertiesLoose(o,_excluded11),b=s||"span",E=_extends({},defalutStyle,o.style||{}),M=f&&typeof f=="function",I=M&&f(_extends({},m,{style:E}),{type:"type",value:e,keyName:t,keys:a}),V=M&&f(_extends({},m,{children:e?.toString(),className:"w-rjv-value"}),{type:"value",value:e,keyName:t,keys:a});return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[l&&(I||jsxRuntimeExports.jsx(b,_extends({},m,{style:E}))),V]})};TypeNan.displayName="JVR.TypeNan";var isFloat=r=>Number(r)===r&&r%1!==0||isNaN(r),Value=r=>{var{value:e,keyName:t,keys:a}=r,o={keyName:t,keys:a};return e instanceof URL?jsxRuntimeExports.jsx(TypeUrl,_extends({},o,{children:e})):typeof e=="string"?jsxRuntimeExports.jsx(TypeString,_extends({},o,{children:e})):e===!0?jsxRuntimeExports.jsx(TypeTrue,_extends({},o,{children:e})):e===!1?jsxRuntimeExports.jsx(TypeFalse,_extends({},o,{children:e})):e===null?jsxRuntimeExports.jsx(TypeNull,_extends({},o,{children:e})):e===void 0?jsxRuntimeExports.jsx(TypeUndefined,_extends({},o,{children:e})):e instanceof Date?jsxRuntimeExports.jsx(TypeDate,_extends({},o,{children:e})):typeof e=="number"&&isNaN(e)?jsxRuntimeExports.jsx(TypeNan,_extends({},o,{children:e})):typeof e=="number"&&isFloat(e)?jsxRuntimeExports.jsx(TypeFloat,_extends({},o,{children:e})):typeof e=="bigint"?jsxRuntimeExports.jsx(TypeBigint,_extends({},o,{children:e})):typeof e=="number"?jsxRuntimeExports.jsx(TypeInt,_extends({},o,{children:e})):null};Value.displayName="JVR.Value";function useSymbolsRender(r,e,t){var a=useSymbolsDispatch(),o=[r.className,e.className].filter(Boolean).join(" "),l=_extends({},r,e,{className:o,style:_extends({},r.style,e.style),children:e.children||r.children});reactExports.useEffect(()=>a({[t]:l}),[e])}function useTypesRender(r,e,t){var a=useTypesDispatch(),o=[r.className,e.className].filter(Boolean).join(" "),l=_extends({},r,e,{className:o,style:_extends({},r.style,e.style),children:e.children||r.children});reactExports.useEffect(()=>a({[t]:l}),[e])}function useSectionRender(r,e,t){var a=useSectionDispatch(),o=[r.className,e.className].filter(Boolean).join(" "),l=_extends({},r,e,{className:o,style:_extends({},r.style,e.style),children:e.children||r.children});reactExports.useEffect(()=>a({[t]:l}),[e])}var _excluded$7=["as","render"],KeyName=r=>{var{KeyName:e={}}=useSectionStore();return useSectionRender(e,r,"KeyName"),null};KeyName.displayName="JVR.KeyName";var KeyNameComp=r=>{var{children:e,value:t,parentValue:a,keyName:o,keys:l}=r,s=typeof e=="number",f={color:s?"var(--w-rjv-key-number, #268bd2)":"var(--w-rjv-key-string, #002b36)"},{KeyName:m={}}=useSectionStore(),{as:b,render:E}=m,M=_objectWithoutPropertiesLoose(m,_excluded$7);M.style=_extends({},M.style,f);var I=b||"span",V=E&&typeof E=="function"&&E(_extends({},M,{children:e}),{value:t,parentValue:a,keyName:o,keys:l||(o?[o]:[])});return V||jsxRuntimeExports.jsx(I,_extends({},M,{children:e}))};KeyNameComp.displayName="JVR.KeyNameComp";var _excluded$6=["children","value","parentValue","keyName","keys"],_excluded2$3=["as","render","children"],Row=r=>{var{Row:e={}}=useSectionStore();return useSectionRender(e,r,"Row"),null};Row.displayName="JVR.Row";var RowComp=r=>{var{children:e,value:t,parentValue:a,keyName:o,keys:l}=r,s=_objectWithoutPropertiesLoose(r,_excluded$6),{Row:f={}}=useSectionStore(),{as:m,render:b}=f,E=_objectWithoutPropertiesLoose(f,_excluded2$3),M=m||"div",I=b&&typeof b=="function"&&b(_extends({},s,E,{children:e}),{value:t,keyName:o,parentValue:a,keys:l});return I||jsxRuntimeExports.jsx(M,_extends({},s,E,{children:e}))};RowComp.displayName="JVR.RowComp";function usePrevious(r){var e=reactExports.useRef();return reactExports.useEffect(()=>{e.current=r}),e.current}function useHighlight(r){var{value:e,highlightUpdates:t,highlightContainer:a}=r,o=usePrevious(e),l=reactExports.useMemo(()=>{if(!t||o===void 0)return!1;if(typeof e!=typeof o)return!0;if(typeof e=="number")return isNaN(e)&&isNaN(o)?!1:e!==o;if(Array.isArray(e)!==Array.isArray(o))return!0;if(typeof e=="object"||typeof e=="function")return!1;if(e!==o)return!0},[t,e]);reactExports.useEffect(()=>{a&&a.current&&l&&"animate"in a.current&&a.current.animate([{backgroundColor:"var(--w-rjv-update-color, #ebcb8b)"},{backgroundColor:""}],{duration:1e3,easing:"ease-in"})},[l,e,a])}var _excluded$5=["keyName","value","parentValue","expandKey","keys","beforeCopy"],_excluded2$2=["as","render"],Copied$1=r=>{var{keyName:e,value:t,parentValue:a,expandKey:o,keys:l,beforeCopy:s}=r,f=_objectWithoutPropertiesLoose(r,_excluded$5),{onCopied:m,enableClipboard:b,beforeCopy:E}=useStore(),M=useShowToolsStore(),I=M[o],[V,Z]=reactExports.useState(!1),{Copied:ee={}}=useSectionStore(),le=ee?.beforeCopy;if(b===!1||!I)return null;var K=it=>{it.stopPropagation();var zt="";typeof t=="number"&&t===1/0?zt="Infinity":typeof t=="number"&&isNaN(t)?zt="NaN":typeof t=="bigint"?zt=bigIntToString(t):t instanceof Date?zt=t.toLocaleString():zt=JSON.stringify(t,(kp,zp)=>typeof zp=="bigint"?bigIntToString(zp):zp,2);var Zt=s||le||E;Zt&&typeof Zt=="function"&&(zt=Zt(zt,e,t,a,o,l)),m&&m(zt,t),Z(!0);var Mn=navigator.clipboard||{writeText(kp){return new Promise((zp,sa)=>{var qo=document.createElement("textarea");qo.style.position="absolute",qo.style.opacity="0",qo.style.left="-99999999px",qo.value=kp,document.body.appendChild(qo),qo.select(),document.execCommand("copy")?zp():sa(),qo.remove()})}};Mn.writeText(zt).then(()=>{var kp=setTimeout(()=>{Z(!1),clearTimeout(kp)},3e3)}).catch(kp=>{})},vt={style:{display:"inline-flex"},fill:V?"var(--w-rjv-copied-success-color, #28a745)":"var(--w-rjv-copied-color, currentColor)",onClick:K},{render:q}=ee,Q=_objectWithoutPropertiesLoose(ee,_excluded2$2),wt=_extends({},Q,f,vt,{style:_extends({},Q.style,f.style,vt.style)}),bt=q&&typeof q=="function",Ut=bt&&q(_extends({},wt,{"data-copied":V}),{value:t,keyName:e,keys:l,parentValue:a});return Ut||(V?jsxRuntimeExports.jsx("svg",_extends({viewBox:"0 0 32 36"},wt,{children:jsxRuntimeExports.jsx("path",{d:"M27.5,33 L2.5,33 L2.5,12.5 L27.5,12.5 L27.5,15.2249049 C29.1403264,13.8627542 29.9736597,13.1778155 30,13.1700887 C30,11.9705278 30,10.0804982 30,7.5 C30,6.1 28.9,5 27.5,5 L20,5 C20,2.2 17.8,0 15,0 C12.2,0 10,2.2 10,5 L2.5,5 C1.1,5 0,6.1 0,7.5 L0,33 C0,34.4 1.1,36 2.5,36 L27.5,36 C28.9,36 30,34.4 30,33 L30,26.1114493 L27.5,28.4926435 L27.5,33 Z M7.5,7.5 L10,7.5 C10,7.5 12.5,6.4 12.5,5 C12.5,3.6 13.6,2.5 15,2.5 C16.4,2.5 17.5,3.6 17.5,5 C17.5,6.4 18.8,7.5 20,7.5 L22.5,7.5 C22.5,7.5 25,8.6 25,10 L5,10 C5,8.5 6.1,7.5 7.5,7.5 Z M5,27.5 L10,27.5 L10,25 L5,25 L5,27.5 Z M28.5589286,16 L32,19.6 L21.0160714,30.5382252 L13.5303571,24.2571429 L17.1303571,20.6571429 L21.0160714,24.5428571 L28.5589286,16 Z M17.5,15 L5,15 L5,17.5 L17.5,17.5 L17.5,15 Z M10,20 L5,20 L5,22.5 L10,22.5 L10,20 Z"})})):jsxRuntimeExports.jsx("svg",_extends({viewBox:"0 0 32 36"},wt,{children:jsxRuntimeExports.jsx("path",{d:"M27.5,33 L2.5,33 L2.5,12.5 L27.5,12.5 L27.5,20 L30,20 L30,7.5 C30,6.1 28.9,5 27.5,5 L20,5 C20,2.2 17.8,0 15,0 C12.2,0 10,2.2 10,5 L2.5,5 C1.1,5 0,6.1 0,7.5 L0,33 C0,34.4 1.1,36 2.5,36 L27.5,36 C28.9,36 30,34.4 30,33 L30,29 L27.5,29 L27.5,33 Z M7.5,7.5 L10,7.5 C10,7.5 12.5,6.4 12.5,5 C12.5,3.6 13.6,2.5 15,2.5 C16.4,2.5 17.5,3.6 17.5,5 C17.5,6.4 18.8,7.5 20,7.5 L22.5,7.5 C22.5,7.5 25,8.6 25,10 L5,10 C5,8.5 6.1,7.5 7.5,7.5 Z M5,27.5 L10,27.5 L10,25 L5,25 L5,27.5 Z M22.5,21.5 L22.5,16.5 L12.5,24 L22.5,31.5 L22.5,26.5 L32,26.5 L32,21.5 L22.5,21.5 Z M17.5,15 L5,15 L5,17.5 L17.5,17.5 L17.5,15 Z M10,20 L5,20 L5,22.5 L10,22.5 L10,20 Z"})})))};Copied$1.displayName="JVR.Copied";function useIdCompat(){var r=reactExports.useRef(null);return r.current===null&&(r.current="custom-id-"+Math.random().toString(36).substr(2,9)),r.current}var KeyValues=r=>{var e,{keyName:t,value:a,expandKey:o="",level:l,keys:s=[],parentValue:f}=r,m=useExpandsStore(),{objectSortKeys:b,indentWidth:E,collapsed:M,shouldExpandNodeInitially:I}=useStore(),V=typeof M=="boolean"?M:typeof M=="number"?l>M:!1,Z=(e=m[o])!=null?e:I?!1:V,ee=I&&I(!Z,{value:a,keys:s,level:l,keyName:t,parentValue:f});if(m[o]===void 0&&!ee||Z)return null;var le=Array.isArray(a),K=le?Object.entries(a).map(q=>[Number(q[0]),q[1]]):Object.entries(a);b&&(K=b===!0?K.sort((q,Q)=>{var[wt]=q,[bt]=Q;return typeof wt=="string"&&typeof bt=="string"?wt.localeCompare(bt):0}):K.sort((q,Q)=>{var[wt,bt]=q,[Ut,it]=Q;return typeof wt=="string"&&typeof Ut=="string"?b(wt,Ut,bt,it):0}));var vt={borderLeft:"var(--w-rjv-border-left-width, 1px) var(--w-rjv-line-style, solid) var(--w-rjv-line-color, #ebebeb)",paddingLeft:E,marginLeft:6};return jsxRuntimeExports.jsx("div",{className:"w-rjv-wrap",style:vt,children:K.map((q,Q)=>{var[wt,bt]=q;return jsxRuntimeExports.jsx(KeyValuesItem,{parentValue:a,keyName:wt,keys:[...s,wt],value:bt,level:l},Q)})})};KeyValues.displayName="JVR.KeyValues";var KayName=r=>{var{keyName:e,parentValue:t,keys:a,value:o}=r,{highlightUpdates:l}=useStore(),s=typeof e=="number",f=reactExports.useRef(null);useHighlight({value:o,highlightUpdates:l,highlightContainer:f});var m={keyName:e,value:o,keys:a,parentValue:t};return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsxs("span",{ref:f,children:[jsxRuntimeExports.jsx(Quote$1,_extends({isNumber:s,"data-placement":"left"},m)),jsxRuntimeExports.jsx(KeyNameComp,_extends({},m,{children:e})),jsxRuntimeExports.jsx(Quote$1,_extends({isNumber:s,"data-placement":"right"},m))]}),jsxRuntimeExports.jsx(Colon$1,_extends({},m))]})};KayName.displayName="JVR.KayName";var KeyValuesItem=r=>{var{keyName:e,value:t,parentValue:a,level:o=0,keys:l=[]}=r,s=useShowToolsDispatch(),f=useIdCompat(),m=Array.isArray(t),b=t instanceof Set,E=t instanceof Map,M=t instanceof Date,I=t instanceof URL,V=t&&typeof t=="object"&&!m&&!b&&!E&&!M&&!I,Z=V||m||b||E;if(Z){var ee=b?Array.from(t):E?Object.fromEntries(t):t;return jsxRuntimeExports.jsx(Container,{keyName:e,value:ee,parentValue:a,initialValue:t,keys:l,level:o+1})}var le={onMouseEnter:()=>s({[f]:!0}),onMouseLeave:()=>s({[f]:!1})};return jsxRuntimeExports.jsxs(RowComp,_extends({className:"w-rjv-line",value:t,keyName:e,keys:l,parentValue:a},le,{children:[jsxRuntimeExports.jsx(KayName,{keyName:e,value:t,keys:l,parentValue:a}),jsxRuntimeExports.jsx(Value,{keyName:e,value:t,keys:l}),jsxRuntimeExports.jsx(Copied$1,{keyName:e,value:t,keys:l,parentValue:a,expandKey:f})]}))};KeyValuesItem.displayName="JVR.KeyValuesItem";var _excluded$4=["value","keyName"],_excluded2$1=["as","render"],CountInfoExtra=r=>{var{CountInfoExtra:e={}}=useSectionStore();return useSectionRender(e,r,"CountInfoExtra"),null};CountInfoExtra.displayName="JVR.CountInfoExtra";var CountInfoExtraComps=r=>{var{value:e={},keyName:t}=r,a=_objectWithoutPropertiesLoose(r,_excluded$4),{CountInfoExtra:o={}}=useSectionStore(),{as:l,render:s}=o,f=_objectWithoutPropertiesLoose(o,_excluded2$1);if(!s&&!f.children)return null;var m=l||"span",b=s&&typeof s=="function",E=_extends({},f,a),M=b&&s(E,{value:e,keyName:t});return M||jsxRuntimeExports.jsx(m,_extends({},E))};CountInfoExtraComps.displayName="JVR.CountInfoExtraComps";var _excluded$3=["value","keyName"],_excluded2=["as","render"],CountInfo=r=>{var{CountInfo:e={}}=useSectionStore();return useSectionRender(e,r,"CountInfo"),null};CountInfo.displayName="JVR.CountInfo";var CountInfoComp=r=>{var{value:e={},keyName:t}=r,a=_objectWithoutPropertiesLoose(r,_excluded$3),{displayObjectSize:o}=useStore(),{CountInfo:l={}}=useSectionStore();if(!o)return null;var{as:s,render:f}=l,m=_objectWithoutPropertiesLoose(l,_excluded2),b=s||"span";m.style=_extends({},m.style,r.style);var E=Object.keys(e).length;m.children||(m.children=E+" item"+(E===1?"":"s"));var M=_extends({},m,a),I=f&&typeof f=="function",V=I&&f(_extends({},M,{"data-length":E}),{value:e,keyName:t});return V||jsxRuntimeExports.jsx(b,_extends({},M))};CountInfoComp.displayName="JVR.CountInfoComp";var _excluded$2=["as","render"],Ellipsis=r=>{var{Ellipsis:e={}}=useSectionStore();return useSectionRender(e,r,"Ellipsis"),null};Ellipsis.displayName="JVR.Ellipsis";var EllipsisComp=r=>{var{isExpanded:e,value:t,keyName:a}=r,{Ellipsis:o={}}=useSectionStore(),{as:l,render:s}=o,f=_objectWithoutPropertiesLoose(o,_excluded$2),m=l||"span",b=s&&typeof s=="function"&&s(_extends({},f,{"data-expanded":e}),{value:t,keyName:a});return b||(!e||typeof t=="object"&&Object.keys(t).length==0?null:jsxRuntimeExports.jsx(m,_extends({},f)))};EllipsisComp.displayName="JVR.EllipsisComp";var NestedOpen=r=>{var e,{keyName:t,expandKey:a,keys:o=[],initialValue:l,value:s,parentValue:f,level:m}=r,b=useExpandsStore(),E=useExpandsDispatch(),{onExpand:M,collapsed:I,shouldExpandNodeInitially:V}=useStore(),Z=typeof I=="boolean"?I:typeof I=="number"?m>I:!1,ee=(e=b[a])!=null?e:V?!1:Z,le=V&&V(!ee,{value:s,keys:o,level:m,keyName:t,parentValue:f});b[a]===void 0&&V&&(ee=!le);var K=()=>{var Mn={expand:!ee,value:s,keyid:a,keyName:t};M&&M(Mn),E({[a]:Mn.expand})},vt={display:"inline-flex",alignItems:"center"},q={transform:"rotate("+(ee?"-90":"0")+"deg)",transition:"all 0.3s"},Q=Object.keys(s).length,wt=typeof s=="object",bt=Array.isArray(s),Ut=s instanceof Set,it=Q!==0&&(bt||Ut||wt),zt={style:vt};it&&(zt.onClick=K);var Zt={keyName:t,value:s,keys:o,parentValue:f};return jsxRuntimeExports.jsxs("span",_extends({},zt,{children:[it&&jsxRuntimeExports.jsx(Arrow$1,_extends({style:q,expandKey:a},Zt)),(t||typeof t=="number")&&jsxRuntimeExports.jsx(KayName,_extends({},Zt)),jsxRuntimeExports.jsx(SetComp,{value:l,keyName:t}),jsxRuntimeExports.jsx(MapComp,{value:l,keyName:t}),jsxRuntimeExports.jsx(BracketsOpen,_extends({isBrackets:bt||Ut},Zt)),jsxRuntimeExports.jsx(EllipsisComp,{keyName:t,value:s,isExpanded:ee}),jsxRuntimeExports.jsx(BracketsClose,_extends({isVisiable:ee||!it,isBrackets:bt||Ut},Zt)),jsxRuntimeExports.jsx(CountInfoComp,{value:s,keyName:t}),jsxRuntimeExports.jsx(CountInfoExtraComps,{value:s,keyName:t}),jsxRuntimeExports.jsx(Copied$1,{keyName:t,value:s,expandKey:a,parentValue:f,keys:o})]}))};NestedOpen.displayName="JVR.NestedOpen";var _excluded$1=["className","children","parentValue","keyid","level","value","initialValue","keys","keyName"],Container=reactExports.forwardRef((r,e)=>{var{className:t="",parentValue:a,level:o=1,value:l,initialValue:s,keys:f,keyName:m}=r,b=_objectWithoutPropertiesLoose(r,_excluded$1),E=useShowToolsDispatch(),M=useIdCompat(),I=[t,"w-rjv-inner"].filter(Boolean).join(" "),V={onMouseEnter:()=>E({[M]:!0}),onMouseLeave:()=>E({[M]:!1})};return jsxRuntimeExports.jsxs("div",_extends({className:I,ref:e},b,V,{children:[jsxRuntimeExports.jsx(NestedOpen,{expandKey:M,value:l,level:o,keys:f,parentValue:a,keyName:m,initialValue:s}),jsxRuntimeExports.jsx(KeyValues,{expandKey:M,value:l,level:o,keys:f,parentValue:a,keyName:m}),jsxRuntimeExports.jsx(NestedClose,{expandKey:M,value:l,level:o,keys:f,parentValue:a,keyName:m})]}))});Container.displayName="JVR.Container";var BraceLeft=r=>{var{BraceLeft:e={}}=useSymbolsStore();return useSymbolsRender(e,r,"BraceLeft"),null};BraceLeft.displayName="JVR.BraceLeft";var BraceRight=r=>{var{BraceRight:e={}}=useSymbolsStore();return useSymbolsRender(e,r,"BraceRight"),null};BraceRight.displayName="JVR.BraceRight";var BracketsLeft=r=>{var{BracketsLeft:e={}}=useSymbolsStore();return useSymbolsRender(e,r,"BracketsLeft"),null};BracketsLeft.displayName="JVR.BracketsLeft";var BracketsRight=r=>{var{BracketsRight:e={}}=useSymbolsStore();return useSymbolsRender(e,r,"BracketsRight"),null};BracketsRight.displayName="JVR.BracketsRight";var Arrow=r=>{var{Arrow:e={}}=useSymbolsStore();return useSymbolsRender(e,r,"Arrow"),null};Arrow.displayName="JVR.Arrow";var Colon=r=>{var{Colon:e={}}=useSymbolsStore();return useSymbolsRender(e,r,"Colon"),null};Colon.displayName="JVR.Colon";var Quote=r=>{var{Quote:e={}}=useSymbolsStore();return useSymbolsRender(e,r,"Quote"),null};Quote.displayName="JVR.Quote";var ValueQuote=r=>{var{ValueQuote:e={}}=useSymbolsStore();return useSymbolsRender(e,r,"ValueQuote"),null};ValueQuote.displayName="JVR.ValueQuote";var Bigint=r=>{var{Bigint:e={}}=useTypesStore();return useTypesRender(e,r,"Bigint"),null};Bigint.displayName="JVR.Bigint";var Date$1=r=>{var{Date:e={}}=useTypesStore();return useTypesRender(e,r,"Date"),null};Date$1.displayName="JVR.Date";var False=r=>{var{False:e={}}=useTypesStore();return useTypesRender(e,r,"False"),null};False.displayName="JVR.False";var Float=r=>{var{Float:e={}}=useTypesStore();return useTypesRender(e,r,"Float"),null};Float.displayName="JVR.Float";var Int=r=>{var{Int:e={}}=useTypesStore();return useTypesRender(e,r,"Int"),null};Int.displayName="JVR.Int";var Map$1=r=>{var{Map:e={}}=useTypesStore();return useTypesRender(e,r,"Map"),null};Map$1.displayName="JVR.Map";var Nan=r=>{var{Nan:e={}}=useTypesStore();return useTypesRender(e,r,"Nan"),null};Nan.displayName="JVR.Nan";var Null=r=>{var{Null:e={}}=useTypesStore();return useTypesRender(e,r,"Null"),null};Null.displayName="JVR.Null";var Set$1=r=>{var{Set:e={}}=useTypesStore();return useTypesRender(e,r,"Set"),null};Set$1.displayName="JVR.Set";var StringText=r=>{var{Str:e={}}=useTypesStore();return useTypesRender(e,r,"Str"),null};StringText.displayName="JVR.StringText";var True=r=>{var{True:e={}}=useTypesStore();return useTypesRender(e,r,"True"),null};True.displayName="JVR.True";var Undefined=r=>{var{Undefined:e={}}=useTypesStore();return useTypesRender(e,r,"Undefined"),null};Undefined.displayName="JVR.Undefined";var Url=r=>{var{Url:e={}}=useTypesStore();return useTypesRender(e,r,"Url"),null};Url.displayName="JVR.Url";var Copied=r=>{var{Copied:e={}}=useSectionStore();return useSectionRender(e,r,"Copied"),null};Copied.displayName="JVR.Copied";var _excluded=["className","style","value","children","collapsed","shouldExpandNodeInitially","indentWidth","displayObjectSize","shortenTextAfterLength","stringEllipsis","highlightUpdates","enableClipboard","displayDataTypes","objectSortKeys","onExpand","onCopied","beforeCopy"],JsonView=reactExports.forwardRef((r,e)=>{var{className:t="",style:a,value:o,children:l,collapsed:s=!1,shouldExpandNodeInitially:f=()=>!0,indentWidth:m=15,displayObjectSize:b=!0,shortenTextAfterLength:E=30,stringEllipsis:M,highlightUpdates:I=!0,enableClipboard:V=!0,displayDataTypes:Z=!0,objectSortKeys:ee=!1,onExpand:le,onCopied:K,beforeCopy:vt}=r,q=_objectWithoutPropertiesLoose(r,_excluded),Q=_extends({lineHeight:1.4,fontFamily:"var(--w-rjv-font-family, Menlo, monospace)",color:"var(--w-rjv-color, #002b36)",backgroundColor:"var(--w-rjv-background-color, #00000000)",fontSize:13},a),wt=["w-json-view-container","w-rjv",t].filter(Boolean).join(" ");return jsxRuntimeExports.jsxs(Provider,{initialState:{value:o,objectSortKeys:ee,indentWidth:m,shouldExpandNodeInitially:s===!1?f:()=>!1,displayObjectSize:b,collapsed:s,enableClipboard:V,shortenTextAfterLength:E,stringEllipsis:M,highlightUpdates:I,onCopied:K,onExpand:le,beforeCopy:vt},initialTypes:{displayDataTypes:Z},children:[jsxRuntimeExports.jsx(Container,_extends({value:o},q,{ref:e,className:wt,style:Q})),l]})});JsonView.Bigint=Bigint;JsonView.Date=Date$1;JsonView.False=False;JsonView.Float=Float;JsonView.Int=Int;JsonView.Map=Map$1;JsonView.Nan=Nan;JsonView.Null=Null;JsonView.Set=Set$1;JsonView.String=StringText;JsonView.True=True;JsonView.Undefined=Undefined;JsonView.Url=Url;JsonView.ValueQuote=ValueQuote;JsonView.Arrow=Arrow;JsonView.Colon=Colon;JsonView.Quote=Quote;JsonView.Ellipsis=Ellipsis;JsonView.BraceLeft=BraceLeft;JsonView.BraceRight=BraceRight;JsonView.BracketsLeft=BracketsLeft;JsonView.BracketsRight=BracketsRight;JsonView.Copied=Copied;JsonView.CountInfo=CountInfo;JsonView.CountInfoExtra=CountInfoExtra;JsonView.KeyName=KeyName;JsonView.Row=Row;JsonView.displayName="JVR.JsonView";function FileTable$1({title:r,dataArray:e=[],onView:t}){const a="ae:transition-colors ae:duration-75",o="ae:hover:scale-105 ae:transition-all ae:duration-75 ae:hover:cursor-pointer";if(!Array.isArray(e)||e.length===0)return null;const l=["File","Download","View"],s=e.map(f=>({File:f.name,Download:jsxRuntimeExports.jsx("a",{href:f.downloadUrl||"#",download:f.name||void 0,rel:"noopener noreferrer",className:`ae:text-blue-600 ae:hover:text-blue-800 ${a}`,children:jsxRuntimeExports.jsx(DownloadIcon,{size:18,className:o})}),View:jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>t?.(f.name,f.downloadUrl),className:`ae:text-green-600 ae:hover:text-green-800 ${a}`,children:jsxRuntimeExports.jsx(ViewIcon,{size:18,className:o})})}));return jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(DataTable,{title:r,columns:l,data:s,sortableCols:["File"]})})}function RawDataVisualiser({nodeData:r={}}){const[e,t]=reactExports.useState(null),[a,o]=reactExports.useState(null),[l,s]=reactExports.useState(!1),f=async(E,M)=>{try{const V=await(await fetch(M)).text();t(V),o(E),s(!0)}catch(I){console.error("Error loading preview:",I),t("Failed to load preview."),o(E),s(!0)}},m=[{title:"Attributes",data:r.attributes},{title:"Derived properties",data:r.derived_properties},{title:"Extras",data:r.extras},{title:"Full AiiDA metadata",data:r.aiida,collapseLevel:0}],b=jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(FileTable$1,{title:"Download node by format",dataArray:r.downloadByFormat?Object.entries(r.downloadByFormat).map(([E,M])=>({name:E,downloadUrl:M})):[],onView:f}),jsxRuntimeExports.jsx(FileTable$1,{title:"Files in this node",dataArray:r.repo_list||[],onView:f})]});return jsxRuntimeExports.jsxs("div",{className:"ae:flex ae:flex-col ae:px-3 ae:py-2 ae:gap-2 ae:lg:gap-4",children:[b,m.map((E,M)=>{const I=E.data||{};return Object.keys(I).length===0?null:jsxRuntimeExports.jsxs("div",{className:"ae:py-1 ae:px-2",children:[jsxRuntimeExports.jsx("div",{className:"ae:flex ae:items-center ae:gap-2 ae:pb-2",children:jsxRuntimeExports.jsx("div",{className:"explorerHeading",children:E.title})}),jsxRuntimeExports.jsx("div",{className:"ae:max-h-32 ae:md:max-h-96 ae:overflow-auto ae:border ae:border-slate-200 ae:rounded ae:p-1 ae:bg-slate-100",children:jsxRuntimeExports.jsxs(JsonView,{value:I,collapsed:!1,shouldExpandNodeInitially:(V,{level:Z})=>Z<2,displayDataTypes:!1,enableClipboard:!0,children:[jsxRuntimeExports.jsx(JsonView.Quote,{render:({children:V,...Z},{type:ee})=>ee==="key"?null:jsxRuntimeExports.jsx("span",{...Z,children:V})}),jsxRuntimeExports.jsx(JsonView.Copied,{render:({"data-copied":V,onClick:Z,...ee})=>jsxRuntimeExports.jsx("button",{...ee,onClick:Z,type:"button",className:"ae:flex ae:items-center ae:gap-1 ae:text-slate-700 ae:hover:text-blue-500",children:V?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(ClipboardCopyIcon,{size:16,className:"ae:text-xs ae:text-green-400"})}):jsxRuntimeExports.jsx(ClipBoardIcon,{size:16})})})]})})]},M)}),jsxRuntimeExports.jsx(Overlay,{active:l,onClose:()=>s(!1),title:`Preview: ${a}`,children:jsxRuntimeExports.jsx("pre",{className:"ae:overflow-y-auto ae:whitespace-pre-wrap ae:text-sm ae:flex-1",children:e})})]})}function transpose(r){const e=r.length,t=r[0].length,a=new Array(t);for(let o=0;o<t;o++){a[o]=new Array(e);for(let l=0;l<e;l++)a[o][l]=r[l][o]}return a}const baseColors=["#636EFA","#EF553B","#00CC96","#AB63FA","#FFA15A","#19D3F3","#FF6692","#B6E880","#FF97FF","#FECB52"];function getColor(r){return r<baseColors.length?baseColors[r]:`hsl(${r*47%360}, 70%, 50%)`}function mergeLegendTracesByName(r){const e=new Set;return r.map(a=>{const o=a.name||"",l=!e.has(o);return l&&e.add(o),{...a,legendgroup:o,showlegend:l}})}function getXYData(r){const e=[],t=[];let a=null;return r.paths.forEach((o,l)=>{const s=o.x,f=o.values;l>0&&(e.push(null),t.forEach(m=>m.push(null))),s.forEach((m,b)=>{m===a&&(e.push(null),t.forEach(E=>E.push(null))),e.push(m),a=m,f.forEach((E,M)=>{t[M]||(t[M]=[]),t[M].push(E[b])})})}),{xs:e,ys:t}}function prettifyLabels(r){const e={GAMMA:"Γ",DELTA:"Δ",SIGMA:"Σ",LAMBDA:"Λ"};Object.keys(e).forEach(a=>{const o=new RegExp(a,"gi");r=r.replace(o,e[a])}),r=r.replace(/\bG\b/g,"Γ"),r=r.replace(/-/g,"—");const t={0:"₀",1:"₁",2:"₂",3:"₃",4:"₄",5:"₅",6:"₆",7:"₇",8:"₈",9:"₉"};return r=r.replace(/_(.)/g,(a,o)=>t[o]||a),r}function getXLabelPos(r=td.paths){const e=[0];for(const t of r)t.x.length<3||e.push(t.x[t.x.length-1]);return e}function getXLabelsfromkpath(r){const e=r.flat(),t=[];t.push(e[0]);for(let a=1;a<e.length-1;a++)e[a]===e[a+1]?(t.push(e[a]),a++):(t.push(e[a]+"|"+e[a+1]),a++);return t.push(e[e.length-1]),t}function getXYRangeForAxis(r,e="x",t="y"){let a=1/0,o=-1/0,l=1/0,s=-1/0;for(const f of r){const m=f.xaxis===e||!f.xaxis&&e==="x",b=f.yaxis===t||!f.yaxis&&t==="y";if(!(!m||!b)){for(const E of f.x??[])typeof E=="number"&&(a=Math.min(a,E),o=Math.max(o,E));for(const E of f.y??[])typeof E=="number"&&(l=Math.min(l,E),s=Math.max(s,E))}}return{x:a===1/0?null:[a,o],y:l===1/0?null:[l,s]}}function createFermiLine(r,e,t,a={}){return{x:r,y:e,mode:"lines",type:"scatter",name:`Fermi [${t}eV]`,legendgroup:`fermi-${t}`,showlegend:a.showlegend??!0,line:{color:"green",width:1.25,dash:"dash"},...a}}function addfermiLines(r,e,t,a){const o=[...e];if(t&&!a){const{y:l}=getXYRangeForAxis(e);for(const s of r)o.push(createFermiLine([s,s],[l[0],l[1]],s))}else if(a&&!t){const{x:l}=getXYRangeForAxis(e);for(const s of r)o.push(createFermiLine([l[0],l[1]],[s,s],s))}else if(a&&t){const{x:l}=getXYRangeForAxis(e,"x2","y"),{x:s}=getXYRangeForAxis(e,"x","y");for(const f of r)o.push(createFermiLine([s[0],s[1]],[f,f],f)),o.push(createFermiLine([l[0],l[1]],[f,f],f,{showlegend:!1,xaxis:"x2",yaxis:"y"}))}return o}var cjs,hasRequiredCjs;function requireCjs(){if(hasRequiredCjs)return cjs;hasRequiredCjs=1;var r=function(vt){return e(vt)&&!t(vt)};function e(K){return!!K&&typeof K=="object"}function t(K){var vt=Object.prototype.toString.call(K);return vt==="[object RegExp]"||vt==="[object Date]"||l(K)}var a=typeof Symbol=="function"&&Symbol.for,o=a?Symbol.for("react.element"):60103;function l(K){return K.$$typeof===o}function s(K){return Array.isArray(K)?[]:{}}function f(K,vt){return vt.clone!==!1&&vt.isMergeableObject(K)?ee(s(K),K,vt):K}function m(K,vt,q){return K.concat(vt).map(function(Q){return f(Q,q)})}function b(K,vt){if(!vt.customMerge)return ee;var q=vt.customMerge(K);return typeof q=="function"?q:ee}function E(K){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(K).filter(function(vt){return Object.propertyIsEnumerable.call(K,vt)}):[]}function M(K){return Object.keys(K).concat(E(K))}function I(K,vt){try{return vt in K}catch{return!1}}function V(K,vt){return I(K,vt)&&!(Object.hasOwnProperty.call(K,vt)&&Object.propertyIsEnumerable.call(K,vt))}function Z(K,vt,q){var Q={};return q.isMergeableObject(K)&&M(K).forEach(function(wt){Q[wt]=f(K[wt],q)}),M(vt).forEach(function(wt){V(K,wt)||(I(K,wt)&&q.isMergeableObject(vt[wt])?Q[wt]=b(wt,q)(K[wt],vt[wt],q):Q[wt]=f(vt[wt],q))}),Q}function ee(K,vt,q){q=q||{},q.arrayMerge=q.arrayMerge||m,q.isMergeableObject=q.isMergeableObject||r,q.cloneUnlessOtherwiseSpecified=f;var Q=Array.isArray(vt),wt=Array.isArray(K),bt=Q===wt;return bt?Q?q.arrayMerge(K,vt,q):Z(K,vt,q):f(vt,q)}ee.all=function(vt,q){if(!Array.isArray(vt))throw new Error("first argument should be an array");return vt.reduce(function(Q,wt){return ee(Q,wt,q)},{})};var le=ee;return cjs=le,cjs}var cjsExports=requireCjs();const deepmerge=getDefaultExportFromCjs(cjsExports),plotLayoutDefault={title:"Multi Trace Plot with border",hovermode:"closest",uirevision:!0,shapes:[{type:"rect",xref:"paper",yref:"paper",x0:0,y0:0,x1:1,y1:1,line:{color:"black",width:2},layer:"above"}],margin:{l:55,r:10,t:10,b:45},dragmode:"zoom",xaxis:{title:{text:"x-axis",font:{size:18,color:"#212529"}},showgrid:!0,showline:!1,zeroline:!1,ticks:"inside",tickfont:{size:16,color:"#212529"}},yaxis:{title:{text:"y-axis",font:{size:19,color:"#212529"}},showgrid:!0,zeroline:!1,showline:!1,ticks:"inside",color:"#212529",tickfont:{color:"#212529",size:19}},legend:{x:1.01,y:1,xanchor:"left",yanchor:"top",orientation:"v"}},plotBandLayout=deepmerge(plotLayoutDefault,{title:"BSPlot",xaxis:{title:{text:"K-path",font:{size:18,color:"#212529"}},showgrid:!0,showline:!1,zeroline:!1,ticks:"inside",tickfont:{size:16,color:"#212529"}},yaxis:{title:{text:"Energy [eV]",font:{size:19,color:"#212529"}},showgrid:!0,zeroline:!1,showline:!1,ticks:"inside",color:"#212529",tickfont:{color:"#212529",size:19}}}),plotDOSLayout=deepmerge(plotLayoutDefault,{title:"DOSPlot",xaxis:{title:{text:"Energy [eV]",font:{size:18,color:"#212529"}},showgrid:!0,zeroline:!1,ticks:"inside",tickfont:{size:16,color:"#212529"}},yaxis:{title:{text:"Density of States",font:{size:18,color:"#212529"}},showgrid:!0,zeroline:!1,ticks:"inside",tickfont:{size:16,color:"#212529"}}}),plotDOSLayoutF=deepmerge(plotLayoutDefault,{title:"DOSPlot",xaxis:{title:{text:"Density of States",font:{size:18,color:"#212529"}},showgrid:!0,zeroline:!1,ticks:"inside",tickfont:{size:16,color:"#212529"}},yaxis:{title:{text:"Energy [eV]",font:{size:18,color:"#212529"}},showgrid:!0,zeroline:!1,ticks:"inside",tickfont:{size:16,color:"#212529"}}}),plotCombinedLayout={shapes:[{type:"rect",xref:"paper",yref:"paper",x0:0,y0:0,x1:.7,y1:1,line:{color:"black",width:2},layer:"above"},{type:"rect",xref:"paper",yref:"paper",x0:.73,y0:0,x1:1,y1:1,line:{color:"black",width:2},layer:"above"}],grid:{rows:1,columns:2,pattern:"independent"},xaxis:{domain:[0,.7],autorange:!0},xaxis2:{title:{text:"Energy [eV]",font:{size:18}},showgrid:!0,zeroline:!1,ticks:"inside",tickfont:{size:16,color:"#212529"},domain:[.73,1],autorange:!0,showgrid:!0},yaxis:{autorange:!0},margin:{l:60,r:30,b:40,t:40},showlegend:!0,legend:{}},traceDefaultBands={mode:"lines",dash:"solid",line:{color:"rgba(90, 60, 255, 0.85)",width:1},name:"Band Structure"},traceDefaultDos={name:"DOS",legendgroup:"DOS",showlegend:!0,type:"scatter",mode:"lines",dash:"dash",line:{color:"rgba(90, 60, 255, 0.85)",width:2},fill:"toself"};var plotlyBasic_min$1={exports:{}},plotlyBasic_min=plotlyBasic_min$1.exports,hasRequiredPlotlyBasic_min;function requirePlotlyBasic_min(){return hasRequiredPlotlyBasic_min||(hasRequiredPlotlyBasic_min=1,(function(r){(function(e,t){r.exports?r.exports=t():e.moduleName=t()})(typeof self<"u"?self:plotlyBasic_min,()=>{var e=(()=>{var t=(Ue,ve)=>()=>(ve||Ue((ve={exports:{}}).exports,ve),ve.exports),a=t(Ue=>{Ue.version="3.1.2"}),o=t((Ue,ve)=>{(function(v,c,h){c[v]=c[v]||h(),typeof ve<"u"&&ve.exports&&(ve.exports=c[v])})("Promise",typeof window<"u"?window:Ue,function(){var v,c,h,_=Object.prototype.toString,y=typeof setImmediate<"u"?function(B){return setImmediate(B)}:setTimeout;try{Object.defineProperty({},"x",{}),v=function(B,S,D,z){return Object.defineProperty(B,S,{value:D,writable:!0,configurable:z!==!1})}}catch{v=function(S,D,z){return S[D]=z,S}}h=(function(){var B,S,D;function z(H,Y){this.fn=H,this.self=Y,this.next=void 0}return{add:function(H,Y){D=new z(H,Y),S?S.next=D:B=D,S=D,D=void 0},drain:function(){var H=B;for(B=S=c=void 0;H;)H.fn.call(H.self),H=H.next}}})();function x(B,S){h.add(B,S),c||(c=y(h.drain))}function w(B){var S,D=typeof B;return B!=null&&(D=="object"||D=="function")&&(S=B.then),typeof S=="function"?S:!1}function A(){for(var B=0;B<this.chain.length;B++)d(this,this.state===1?this.chain[B].success:this.chain[B].failure,this.chain[B]);this.chain.length=0}function d(B,S,D){var z,H;try{S===!1?D.reject(B.msg):(S===!0?z=B.msg:z=S.call(void 0,B.msg),z===D.promise?D.reject(TypeError("Promise-chain cycle")):(H=w(z))?H.call(z,D.resolve,D.reject):D.resolve(z))}catch(Y){D.reject(Y)}}function k(B){var S,D=this;if(!D.triggered){D.triggered=!0,D.def&&(D=D.def);try{(S=w(B))?x(function(){var z=new j(D);try{S.call(B,function(){k.apply(z,arguments)},function(){T.apply(z,arguments)})}catch(H){T.call(z,H)}}):(D.msg=B,D.state=1,D.chain.length>0&&x(A,D))}catch(z){T.call(new j(D),z)}}}function T(B){var S=this;S.triggered||(S.triggered=!0,S.def&&(S=S.def),S.msg=B,S.state=2,S.chain.length>0&&x(A,S))}function L(B,S,D,z){for(var H=0;H<S.length;H++)(function(Y){B.resolve(S[Y]).then(function(ht){D(Y,ht)},z)})(H)}function j(B){this.def=B,this.triggered=!1}function P(B){this.promise=B,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function N(B){if(typeof B!="function")throw TypeError("Not a function");if(this.__NPO__!==0)throw TypeError("Not a promise");this.__NPO__=1;var S=new P(this);this.then=function(D,z){var H={success:typeof D=="function"?D:!0,failure:typeof z=="function"?z:!1};return H.promise=new this.constructor(function(Y,ht){if(typeof Y!="function"||typeof ht!="function")throw TypeError("Not a function");H.resolve=Y,H.reject=ht}),S.chain.push(H),S.state!==0&&x(A,S),H.promise},this.catch=function(D){return this.then(void 0,D)};try{B.call(void 0,function(D){k.call(S,D)},function(D){T.call(S,D)})}catch(D){T.call(S,D)}}var O=v({},"constructor",N,!1);return N.prototype=O,v(O,"__NPO__",0,!1),v(N,"resolve",function(B){var S=this;return B&&typeof B=="object"&&B.__NPO__===1?B:new S(function(D,z){if(typeof D!="function"||typeof z!="function")throw TypeError("Not a function");D(B)})}),v(N,"reject",function(B){return new this(function(S,D){if(typeof S!="function"||typeof D!="function")throw TypeError("Not a function");D(B)})}),v(N,"all",function(B){var S=this;return _.call(B)!="[object Array]"?S.reject(TypeError("Not an array")):B.length===0?S.resolve([]):new S(function(D,z){if(typeof D!="function"||typeof z!="function")throw TypeError("Not a function");var H=B.length,Y=Array(H),ht=0;L(S,B,function(Se,ie){Y[Se]=ie,++ht===H&&D(Y)},z)})}),v(N,"race",function(B){var S=this;return _.call(B)!="[object Array]"?S.reject(TypeError("Not an array")):new S(function(D,z){if(typeof D!="function"||typeof z!="function")throw TypeError("Not a function");L(S,B,function(H,Y){D(Y)},z)})}),N})}),l=t((Ue,ve)=>{(function(){var v={version:"3.8.2"},c=[].slice,h=function(g){return c.call(g)},_=self.document;function y(g){return g&&(g.ownerDocument||g.document||g).documentElement}function x(g){return g&&(g.ownerDocument&&g.ownerDocument.defaultView||g.document&&g||g.defaultView)}if(_)try{h(_.documentElement.childNodes)[0].nodeType}catch{h=function(F){for(var te=F.length,ot=new Array(te);te--;)ot[te]=F[te];return ot}}if(Date.now||(Date.now=function(){return+new Date}),_)try{_.createElement("DIV").style.setProperty("opacity",0,"")}catch{var w=this.Element.prototype,A=w.setAttribute,d=w.setAttributeNS,k=this.CSSStyleDeclaration.prototype,T=k.setProperty;w.setAttribute=function(F,te){A.call(this,F,te+"")},w.setAttributeNS=function(F,te,ot){d.call(this,F,te,ot+"")},k.setProperty=function(F,te,ot){T.call(this,F,te+"",ot)}}v.ascending=L;function L(g,F){return g<F?-1:g>F?1:g>=F?0:NaN}v.descending=function(g,F){return F<g?-1:F>g?1:F>=g?0:NaN},v.min=function(g,F){var te=-1,ot=g.length,_t,At;if(arguments.length===1){for(;++te<ot;)if((At=g[te])!=null&&At>=At){_t=At;break}for(;++te<ot;)(At=g[te])!=null&&_t>At&&(_t=At)}else{for(;++te<ot;)if((At=F.call(g,g[te],te))!=null&&At>=At){_t=At;break}for(;++te<ot;)(At=F.call(g,g[te],te))!=null&&_t>At&&(_t=At)}return _t},v.max=function(g,F){var te=-1,ot=g.length,_t,At;if(arguments.length===1){for(;++te<ot;)if((At=g[te])!=null&&At>=At){_t=At;break}for(;++te<ot;)(At=g[te])!=null&&At>_t&&(_t=At)}else{for(;++te<ot;)if((At=F.call(g,g[te],te))!=null&&At>=At){_t=At;break}for(;++te<ot;)(At=F.call(g,g[te],te))!=null&&At>_t&&(_t=At)}return _t},v.extent=function(g,F){var te=-1,ot=g.length,_t,At,ca;if(arguments.length===1){for(;++te<ot;)if((At=g[te])!=null&&At>=At){_t=ca=At;break}for(;++te<ot;)(At=g[te])!=null&&(_t>At&&(_t=At),ca<At&&(ca=At))}else{for(;++te<ot;)if((At=F.call(g,g[te],te))!=null&&At>=At){_t=ca=At;break}for(;++te<ot;)(At=F.call(g,g[te],te))!=null&&(_t>At&&(_t=At),ca<At&&(ca=At))}return[_t,ca]};function j(g){return g===null?NaN:+g}function P(g){return!isNaN(g)}v.sum=function(g,F){var te=0,ot=g.length,_t,At=-1;if(arguments.length===1)for(;++At<ot;)P(_t=+g[At])&&(te+=_t);else for(;++At<ot;)P(_t=+F.call(g,g[At],At))&&(te+=_t);return te},v.mean=function(g,F){var te=0,ot=g.length,_t,At=-1,ca=ot;if(arguments.length===1)for(;++At<ot;)P(_t=j(g[At]))?te+=_t:--ca;else for(;++At<ot;)P(_t=j(F.call(g,g[At],At)))?te+=_t:--ca;if(ca)return te/ca},v.quantile=function(g,F){var te=(g.length-1)*F+1,ot=Math.floor(te),_t=+g[ot-1],At=te-ot;return At?_t+At*(g[ot]-_t):_t},v.median=function(g,F){var te=[],ot=g.length,_t,At=-1;if(arguments.length===1)for(;++At<ot;)P(_t=j(g[At]))&&te.push(_t);else for(;++At<ot;)P(_t=j(F.call(g,g[At],At)))&&te.push(_t);if(te.length)return v.quantile(te.sort(L),.5)},v.variance=function(g,F){var te=g.length,ot=0,_t,At,ca=0,Er=-1,Lp=0;if(arguments.length===1)for(;++Er<te;)P(_t=j(g[Er]))&&(At=_t-ot,ot+=At/++Lp,ca+=At*(_t-ot));else for(;++Er<te;)P(_t=j(F.call(g,g[Er],Er)))&&(At=_t-ot,ot+=At/++Lp,ca+=At*(_t-ot));if(Lp>1)return ca/(Lp-1)},v.deviation=function(){var g=v.variance.apply(this,arguments);return g&&Math.sqrt(g)};function N(g){return{left:function(F,te,ot,_t){for(arguments.length<3&&(ot=0),arguments.length<4&&(_t=F.length);ot<_t;){var At=ot+_t>>>1;g(F[At],te)<0?ot=At+1:_t=At}return ot},right:function(F,te,ot,_t){for(arguments.length<3&&(ot=0),arguments.length<4&&(_t=F.length);ot<_t;){var At=ot+_t>>>1;g(F[At],te)>0?_t=At:ot=At+1}return ot}}}var O=N(L);v.bisectLeft=O.left,v.bisect=v.bisectRight=O.right,v.bisector=function(g){return N(g.length===1?function(F,te){return L(g(F),te)}:g)},v.shuffle=function(g,F,te){(ot=arguments.length)<3&&(te=g.length,ot<2&&(F=0));for(var ot=te-F,_t,At;ot;)At=Math.random()*ot--|0,_t=g[ot+F],g[ot+F]=g[At+F],g[At+F]=_t;return g},v.permute=function(g,F){for(var te=F.length,ot=new Array(te);te--;)ot[te]=g[F[te]];return ot},v.pairs=function(g){for(var F=0,te=g.length-1,ot,_t=g[0],At=new Array(te<0?0:te);F<te;)At[F]=[ot=_t,_t=g[++F]];return At},v.transpose=function(g){if(!(At=g.length))return[];for(var F=-1,te=v.min(g,B),ot=new Array(te);++F<te;)for(var _t=-1,At,ca=ot[F]=new Array(At);++_t<At;)ca[_t]=g[_t][F];return ot};function B(g){return g.length}v.zip=function(){return v.transpose(arguments)},v.keys=function(g){var F=[];for(var te in g)F.push(te);return F},v.values=function(g){var F=[];for(var te in g)F.push(g[te]);return F},v.entries=function(g){var F=[];for(var te in g)F.push({key:te,value:g[te]});return F},v.merge=function(g){for(var F=g.length,te,ot=-1,_t=0,At,ca;++ot<F;)_t+=g[ot].length;for(At=new Array(_t);--F>=0;)for(ca=g[F],te=ca.length;--te>=0;)At[--_t]=ca[te];return At};var S=Math.abs;v.range=function(g,F,te){if(arguments.length<3&&(te=1,arguments.length<2&&(F=g,g=0)),(F-g)/te===1/0)throw new Error("infinite range");var ot=[],_t=D(S(te)),At=-1,ca;if(g*=_t,F*=_t,te*=_t,te<0)for(;(ca=g+te*++At)>F;)ot.push(ca/_t);else for(;(ca=g+te*++At)<F;)ot.push(ca/_t);return ot};function D(g){for(var F=1;g*F%1;)F*=10;return F}function z(g,F){for(var te in F)Object.defineProperty(g.prototype,te,{value:F[te],enumerable:!1})}v.map=function(g,F){var te=new H;if(g instanceof H)g.forEach(function(Er,Lp){te.set(Er,Lp)});else if(Array.isArray(g)){var ot=-1,_t=g.length,At;if(arguments.length===1)for(;++ot<_t;)te.set(ot,g[ot]);else for(;++ot<_t;)te.set(F.call(g,At=g[ot],ot),At)}else for(var ca in g)te.set(ca,g[ca]);return te};function H(){this._=Object.create(null)}var Y="__proto__",ht="\0";z(H,{has:X,get:function(g){return this._[Se(g)]},set:function(g,F){return this._[Se(g)]=F},remove:ft,keys:Le,values:function(){var g=[];for(var F in this._)g.push(this._[F]);return g},entries:function(){var g=[];for(var F in this._)g.push({key:ie(F),value:this._[F]});return g},size:nt,empty:Ze,forEach:function(g){for(var F in this._)g.call(this,ie(F),this._[F])}});function Se(g){return(g+="")===Y||g[0]===ht?ht+g:g}function ie(g){return(g+="")[0]===ht?g.slice(1):g}function X(g){return Se(g)in this._}function ft(g){return(g=Se(g))in this._&&delete this._[g]}function Le(){var g=[];for(var F in this._)g.push(ie(F));return g}function nt(){var g=0;for(var F in this._)++g;return g}function Ze(){for(var g in this._)return!1;return!0}v.nest=function(){var g={},F=[],te=[],ot,_t;function At(Er,Lp,Wp){if(Wp>=F.length)return _t?_t.call(g,Lp):ot?Lp.sort(ot):Lp;for(var Yp=-1,A0=Lp.length,L0=F[Wp++],rm,xm,N0,K0=new H,em;++Yp<A0;)(em=K0.get(rm=L0(xm=Lp[Yp])))?em.push(xm):K0.set(rm,[xm]);return Er?(xm=Er(),N0=function(vm,ym){xm.set(vm,At(Er,ym,Wp))}):(xm={},N0=function(vm,ym){xm[vm]=At(Er,ym,Wp)}),K0.forEach(N0),xm}function ca(Er,Lp){if(Lp>=F.length)return Er;var Wp=[],Yp=te[Lp++];return Er.forEach(function(A0,L0){Wp.push({key:A0,values:ca(L0,Lp)})}),Yp?Wp.sort(function(A0,L0){return Yp(A0.key,L0.key)}):Wp}return g.map=function(Er,Lp){return At(Lp,Er,0)},g.entries=function(Er){return ca(At(v.map,Er,0),0)},g.key=function(Er){return F.push(Er),g},g.sortKeys=function(Er){return te[F.length-1]=Er,g},g.sortValues=function(Er){return ot=Er,g},g.rollup=function(Er){return _t=Er,g},g},v.set=function(g){var F=new rt;if(g)for(var te=0,ot=g.length;te<ot;++te)F.add(g[te]);return F};function rt(){this._=Object.create(null)}z(rt,{has:X,add:function(g){return this._[Se(g+="")]=!0,g},remove:ft,values:Le,size:nt,empty:Ze,forEach:function(g){for(var F in this._)g.call(this,ie(F))}}),v.behavior={};function dt(g){return g}v.rebind=function(g,F){for(var te=1,ot=arguments.length,_t;++te<ot;)g[_t=arguments[te]]=pt(g,F,F[_t]);return g};function pt(g,F,te){return function(){var ot=te.apply(F,arguments);return ot===F?g:ot}}function se(g,F){if(F in g)return F;F=F.charAt(0).toUpperCase()+F.slice(1);for(var te=0,ot=gt.length;te<ot;++te){var _t=gt[te]+F;if(_t in g)return _t}}var gt=["webkit","ms","moz","Moz","o","O"];function xt(){}v.dispatch=function(){for(var g=new Nt,F=-1,te=arguments.length;++F<te;)g[arguments[F]]=Rt(g);return g};function Nt(){}Nt.prototype.on=function(g,F){var te=g.indexOf("."),ot="";if(te>=0&&(ot=g.slice(te+1),g=g.slice(0,te)),g)return arguments.length<2?this[g].on(ot):this[g].on(ot,F);if(arguments.length===2){if(F==null)for(g in this)this.hasOwnProperty(g)&&this[g].on(ot,null);return this}};function Rt(g){var F=[],te=new H;function ot(){for(var _t=F,At=-1,ca=_t.length,Er;++At<ca;)(Er=_t[At].on)&&Er.apply(this,arguments);return g}return ot.on=function(_t,At){var ca=te.get(_t),Er;return arguments.length<2?ca&&ca.on:(ca&&(ca.on=null,F=F.slice(0,Er=F.indexOf(ca)).concat(F.slice(Er+1)),te.remove(_t)),At&&F.push(te.set(_t,{on:At})),g)},ot}v.event=null;function Pt(){v.event.preventDefault()}function xn(){for(var g=v.event,F;F=g.sourceEvent;)g=F;return g}function oa(g){for(var F=new Nt,te=0,ot=arguments.length;++te<ot;)F[arguments[te]]=Rt(F);return F.of=function(_t,At){return function(ca){try{var Er=ca.sourceEvent=v.event;ca.target=g,v.event=ca,F[ca.type].apply(_t,At)}finally{v.event=Er}}},F}v.requote=function(g){return g.replace(jo,"\\$&")};var jo=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,lt={}.__proto__?function(g,F){g.__proto__=F}:function(g,F){for(var te in F)g[te]=F[te]};function ut(g){return lt(g,ke),g}var $=function(g,F){return F.querySelector(g)},yt=function(g,F){return F.querySelectorAll(g)},Lt=function(g,F){var te=g.matches||g[se(g,"matchesSelector")];return Lt=function(ot,_t){return te.call(ot,_t)},Lt(g,F)};typeof Sizzle=="function"&&($=function(g,F){return Sizzle(g,F)[0]||null},yt=Sizzle,Lt=Sizzle.matchesSelector),v.selection=function(){return v.select(_.documentElement)};var ke=v.selection.prototype=[];ke.select=function(g){var F=[],te,ot,_t,At;g=G(g);for(var ca=-1,Er=this.length;++ca<Er;){F.push(te=[]),te.parentNode=(_t=this[ca]).parentNode;for(var Lp=-1,Wp=_t.length;++Lp<Wp;)(At=_t[Lp])?(te.push(ot=g.call(At,At.__data__,Lp,ca)),ot&&"__data__"in At&&(ot.__data__=At.__data__)):te.push(null)}return ut(F)};function G(g){return typeof g=="function"?g:function(){return $(g,this)}}ke.selectAll=function(g){var F=[],te,ot;g=ne(g);for(var _t=-1,At=this.length;++_t<At;)for(var ca=this[_t],Er=-1,Lp=ca.length;++Er<Lp;)(ot=ca[Er])&&(F.push(te=h(g.call(ot,ot.__data__,Er,_t))),te.parentNode=ot);return ut(F)};function ne(g){return typeof g=="function"?g:function(){return yt(g,this)}}var et="http://www.w3.org/1999/xhtml",ct={svg:"http://www.w3.org/2000/svg",xhtml:et,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};v.ns={prefix:ct,qualify:function(g){var F=g.indexOf(":"),te=g;return F>=0&&(te=g.slice(0,F))!=="xmlns"&&(g=g.slice(F+1)),ct.hasOwnProperty(te)?{space:ct[te],local:g}:g}},ke.attr=function(g,F){if(arguments.length<2){if(typeof g=="string"){var te=this.node();return g=v.ns.qualify(g),g.local?te.getAttributeNS(g.space,g.local):te.getAttribute(g)}for(F in g)this.each(kt(F,g[F]));return this}return this.each(kt(g,F))};function kt(g,F){g=v.ns.qualify(g);function te(){this.removeAttribute(g)}function ot(){this.removeAttributeNS(g.space,g.local)}function _t(){this.setAttribute(g,F)}function At(){this.setAttributeNS(g.space,g.local,F)}function ca(){var Lp=F.apply(this,arguments);Lp==null?this.removeAttribute(g):this.setAttribute(g,Lp)}function Er(){var Lp=F.apply(this,arguments);Lp==null?this.removeAttributeNS(g.space,g.local):this.setAttributeNS(g.space,g.local,Lp)}return F==null?g.local?ot:te:typeof F=="function"?g.local?Er:ca:g.local?At:_t}function Gt(g){return g.trim().replace(/\s+/g," ")}ke.classed=function(g,F){if(arguments.length<2){if(typeof g=="string"){var te=this.node(),ot=(g=Ko(g)).length,_t=-1;if(F=te.classList){for(;++_t<ot;)if(!F.contains(g[_t]))return!1}else for(F=te.getAttribute("class");++_t<ot;)if(!$t(g[_t]).test(F))return!1;return!0}for(F in g)this.each(Up(F,g[F]));return this}return this.each(Up(g,F))};function $t(g){return new RegExp("(?:^|\\s+)"+v.requote(g)+"(?:\\s+|$)","g")}function Ko(g){return(g+"").trim().split(/^|\s+/)}function Up(g,F){g=Ko(g).map(e0);var te=g.length;function ot(){for(var At=-1;++At<te;)g[At](this,F)}function _t(){for(var At=-1,ca=F.apply(this,arguments);++At<te;)g[At](this,ca)}return typeof F=="function"?_t:ot}function e0(g){var F=$t(g);return function(te,ot){if(_t=te.classList)return ot?_t.add(g):_t.remove(g);var _t=te.getAttribute("class")||"";ot?(F.lastIndex=0,F.test(_t)||te.setAttribute("class",Gt(_t+" "+g))):te.setAttribute("class",Gt(_t.replace(F," ")))}}ke.style=function(g,F,te){var ot=arguments.length;if(ot<3){if(typeof g!="string"){ot<2&&(F="");for(te in g)this.each(E0(te,g[te],F));return this}if(ot<2){var _t=this.node();return x(_t).getComputedStyle(_t,null).getPropertyValue(g)}te=""}return this.each(E0(g,F,te))};function E0(g,F,te){function ot(){this.style.removeProperty(g)}function _t(){this.style.setProperty(g,F,te)}function At(){var ca=F.apply(this,arguments);ca==null?this.style.removeProperty(g):this.style.setProperty(g,ca,te)}return F==null?ot:typeof F=="function"?At:_t}ke.property=function(g,F){if(arguments.length<2){if(typeof g=="string")return this.node()[g];for(F in g)this.each(m0(F,g[F]));return this}return this.each(m0(g,F))};function m0(g,F){function te(){delete this[g]}function ot(){this[g]=F}function _t(){var At=F.apply(this,arguments);At==null?delete this[g]:this[g]=At}return F==null?te:typeof F=="function"?_t:ot}ke.text=function(g){return arguments.length?this.each(typeof g=="function"?function(){var F=g.apply(this,arguments);this.textContent=F??""}:g==null?function(){this.textContent=""}:function(){this.textContent=g}):this.node().textContent},ke.html=function(g){return arguments.length?this.each(typeof g=="function"?function(){var F=g.apply(this,arguments);this.innerHTML=F??""}:g==null?function(){this.innerHTML=""}:function(){this.innerHTML=g}):this.node().innerHTML},ke.append=function(g){return g=f0(g),this.select(function(){return this.appendChild(g.apply(this,arguments))})};function f0(g){function F(){var ot=this.ownerDocument,_t=this.namespaceURI;return _t===et&&ot.documentElement.namespaceURI===et?ot.createElement(g):ot.createElementNS(_t,g)}function te(){return this.ownerDocument.createElementNS(g.space,g.local)}return typeof g=="function"?g:(g=v.ns.qualify(g)).local?te:F}ke.insert=function(g,F){return g=f0(g),F=G(F),this.select(function(){return this.insertBefore(g.apply(this,arguments),F.apply(this,arguments)||null)})},ke.remove=function(){return this.each(la)};function la(){var g=this.parentNode;g&&g.removeChild(this)}ke.data=function(g,F){var te=-1,ot=this.length,_t,At;if(!arguments.length){for(g=new Array(ot=(_t=this[0]).length);++te<ot;)(At=_t[te])&&(g[te]=At.__data__);return g}function ca(Yp,A0){var L0,rm=Yp.length,xm=A0.length,N0=Math.min(rm,xm),K0=new Array(xm),em=new Array(xm),vm=new Array(rm),ym,nm;if(F){var d1=new H,n=new Array(rm),i;for(L0=-1;++L0<rm;)(ym=Yp[L0])&&(d1.has(i=F.call(ym,ym.__data__,L0))?vm[L0]=ym:d1.set(i,ym),n[L0]=i);for(L0=-1;++L0<xm;)(ym=d1.get(i=F.call(A0,nm=A0[L0],L0)))?ym!==!0&&(K0[L0]=ym,ym.__data__=nm):em[L0]=$o(nm),d1.set(i,!0);for(L0=-1;++L0<rm;)L0 in n&&d1.get(n[L0])!==!0&&(vm[L0]=Yp[L0])}else{for(L0=-1;++L0<N0;)ym=Yp[L0],nm=A0[L0],ym?(ym.__data__=nm,K0[L0]=ym):em[L0]=$o(nm);for(;L0<xm;++L0)em[L0]=$o(A0[L0]);for(;L0<rm;++L0)vm[L0]=Yp[L0]}em.update=K0,em.parentNode=K0.parentNode=vm.parentNode=Yp.parentNode,Er.push(em),Lp.push(K0),Wp.push(vm)}var Er=b0([]),Lp=ut([]),Wp=ut([]);if(typeof g=="function")for(;++te<ot;)ca(_t=this[te],g.call(_t,_t.parentNode.__data__,te));else for(;++te<ot;)ca(_t=this[te],g);return Lp.enter=function(){return Er},Lp.exit=function(){return Wp},Lp};function $o(g){return{__data__:g}}ke.datum=function(g){return arguments.length?this.property("__data__",g):this.property("__data__")},ke.filter=function(g){var F=[],te,ot,_t;typeof g!="function"&&(g=jt(g));for(var At=0,ca=this.length;At<ca;At++){F.push(te=[]),te.parentNode=(ot=this[At]).parentNode;for(var Er=0,Lp=ot.length;Er<Lp;Er++)(_t=ot[Er])&&g.call(_t,_t.__data__,Er,At)&&te.push(_t)}return ut(F)};function jt(g){return function(){return Lt(this,g)}}ke.order=function(){for(var g=-1,F=this.length;++g<F;)for(var te=this[g],ot=te.length-1,_t=te[ot],At;--ot>=0;)(At=te[ot])&&(_t&&_t!==At.nextSibling&&_t.parentNode.insertBefore(At,_t),_t=At);return this},ke.sort=function(g){g=Fp.apply(this,arguments);for(var F=-1,te=this.length;++F<te;)this[F].sort(g);return this.order()};function Fp(g){return arguments.length||(g=L),function(F,te){return F&&te?g(F.__data__,te.__data__):!F-!te}}ke.each=function(g){return i0(this,function(F,te,ot){g.call(F,F.__data__,te,ot)})};function i0(g,F){for(var te=0,ot=g.length;te<ot;te++)for(var _t=g[te],At=0,ca=_t.length,Er;At<ca;At++)(Er=_t[At])&&F(Er,At,te);return g}ke.call=function(g){var F=h(arguments);return g.apply(F[0]=this,F),this},ke.empty=function(){return!this.node()},ke.node=function(){for(var g=0,F=this.length;g<F;g++)for(var te=this[g],ot=0,_t=te.length;ot<_t;ot++){var At=te[ot];if(At)return At}return null},ke.size=function(){var g=0;return i0(this,function(){++g}),g};function b0(g){return lt(g,O0),g}var O0=[];v.selection.enter=b0,v.selection.enter.prototype=O0,O0.append=ke.append,O0.empty=ke.empty,O0.node=ke.node,O0.call=ke.call,O0.size=ke.size,O0.select=function(g){for(var F=[],te,ot,_t,At,ca,Er=-1,Lp=this.length;++Er<Lp;){_t=(At=this[Er]).update,F.push(te=[]),te.parentNode=At.parentNode;for(var Wp=-1,Yp=At.length;++Wp<Yp;)(ca=At[Wp])?(te.push(_t[Wp]=ot=g.call(At.parentNode,ca.__data__,Wp,Er)),ot.__data__=ca.__data__):te.push(null)}return ut(F)},O0.insert=function(g,F){return arguments.length<2&&(F=C0(this)),ke.insert.call(this,g,F)};function C0(g){var F,te;return function(ot,_t,At){var ca=g[At].update,Er=ca.length,Lp;for(At!=te&&(te=At,F=0),_t>=F&&(F=_t+1);!(Lp=ca[F])&&++F<Er;);return Lp}}v.select=function(g){var F;return typeof g=="string"?(F=[$(g,_)],F.parentNode=_.documentElement):(F=[g],F.parentNode=y(g)),ut([F])},v.selectAll=function(g){var F;return typeof g=="string"?(F=h(yt(g,_)),F.parentNode=_.documentElement):(F=h(g),F.parentNode=null),ut([F])},ke.on=function(g,F,te){var ot=arguments.length;if(ot<3){if(typeof g!="string"){ot<2&&(F=!1);for(te in g)this.each(I0(te,g[te],F));return this}if(ot<2)return(ot=this.node()["__on"+g])&&ot._;te=!1}return this.each(I0(g,F,te))};function I0(g,F,te){var ot="__on"+g,_t=g.indexOf("."),At=H0;_t>0&&(g=g.slice(0,_t));var ca=V0.get(g);ca&&(g=ca,At=im);function Er(){var Yp=this[ot];Yp&&(this.removeEventListener(g,Yp,Yp.$),delete this[ot])}function Lp(){var Yp=At(F,h(arguments));Er.call(this),this.addEventListener(g,this[ot]=Yp,Yp.$=te),Yp._=F}function Wp(){var Yp=new RegExp("^__on([^.]+)"+v.requote(g)+"$"),A0;for(var L0 in this)if(A0=L0.match(Yp)){var rm=this[L0];this.removeEventListener(A0[1],rm,rm.$),delete this[L0]}}return _t?F?Lp:Er:F?xt:Wp}var V0=v.map({mouseenter:"mouseover",mouseleave:"mouseout"});_&&V0.forEach(function(g){"on"+g in _&&V0.remove(g)});function H0(g,F){return function(te){var ot=v.event;v.event=te,F[0]=this.__data__;try{g.apply(this,F)}finally{v.event=ot}}}function im(g,F){var te=H0(g,F);return function(ot){var _t=this,At=ot.relatedTarget;(!At||At!==_t&&!(At.compareDocumentPosition(_t)&8))&&te.call(_t,ot)}}var k0,fm=0;function Tm(g){var F=".dragsuppress-"+ ++fm,te="click"+F,ot=v.select(x(g)).on("touchmove"+F,Pt).on("dragstart"+F,Pt).on("selectstart"+F,Pt);if(k0==null&&(k0="onselectstart"in g?!1:se(g.style,"userSelect")),k0){var _t=y(g).style,At=_t[k0];_t[k0]="none"}return function(ca){if(ot.on(F,null),k0&&(_t[k0]=At),ca){var Er=function(){ot.on(te,null)};ot.on(te,function(){Pt(),Er()},!0),setTimeout(Er,0)}}}v.mouse=function(g){return Rm(g,xn())};var om=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function Rm(g,F){F.changedTouches&&(F=F.changedTouches[0]);var te=g.ownerSVGElement||g;if(te.createSVGPoint){var ot=te.createSVGPoint();if(om<0){var _t=x(g);if(_t.scrollX||_t.scrollY){te=v.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var At=te[0][0].getScreenCTM();om=!(At.f||At.e),te.remove()}}return om?(ot.x=F.pageX,ot.y=F.pageY):(ot.x=F.clientX,ot.y=F.clientY),ot=ot.matrixTransform(g.getScreenCTM().inverse()),[ot.x,ot.y]}var ca=g.getBoundingClientRect();return[F.clientX-ca.left-g.clientLeft,F.clientY-ca.top-g.clientTop]}v.touch=function(g,F,te){if(arguments.length<3&&(te=F,F=xn().changedTouches),F){for(var ot=0,_t=F.length,At;ot<_t;++ot)if((At=F[ot]).identifier===te)return Rm(g,At)}},v.behavior.drag=function(){var g=oa(_t,"drag","dragstart","dragend"),F=null,te=At(xt,v.mouse,x,"mousemove","mouseup"),ot=At(ci,v.touch,dt,"touchmove","touchend");function _t(){this.on("mousedown.drag",te).on("touchstart.drag",ot)}function At(ca,Er,Lp,Wp,Yp){return function(){var A0=this,L0=v.event.target.correspondingElement||v.event.target,rm=A0.parentNode,xm=g.of(A0,arguments),N0=0,K0=ca(),em=".drag"+(K0==null?"":"-"+K0),vm,ym=v.select(Lp(L0)).on(Wp+em,n).on(Yp+em,i),nm=Tm(L0),d1=Er(rm,K0);F?(vm=F.apply(A0,arguments),vm=[vm.x-d1[0],vm.y-d1[1]]):vm=[0,0],xm({type:"dragstart"});function n(){var u=Er(rm,K0),C,re;u&&(C=u[0]-d1[0],re=u[1]-d1[1],N0|=C|re,d1=u,xm({type:"drag",x:u[0]+vm[0],y:u[1]+vm[1],dx:C,dy:re}))}function i(){Er(rm,K0)&&(ym.on(Wp+em,null).on(Yp+em,null),nm(N0),xm({type:"dragend"}))}}}return _t.origin=function(ca){return arguments.length?(F=ca,_t):F},v.rebind(_t,g,"on")};function ci(){return v.event.changedTouches[0].identifier}v.touches=function(g,F){return arguments.length<2&&(F=xn().touches),F?h(F).map(function(te){var ot=Rm(g,te);return ot.identifier=te.identifier,ot}):[]};var Hp=1e-6,St=Hp*Hp,Ht=Math.PI,Sr=2*Ht,Rp=Sr-Hp,Np=Ht/2,Jp=Ht/180,n0=180/Ht;function S0(g,F,te){return(F[0]-g[0])*(te[1]-g[1])-(F[1]-g[1])*(te[0]-g[0])}function _0(g){return g>1?Np:g<-1?-Np:Math.asin(g)}function w0(g){return((g=Math.exp(g))-1/g)/2}function X0(g){return((g=Math.exp(g))+1/g)/2}function $0(g){return((g=Math.exp(2*g))-1)/(g+1)}var Z0=Math.SQRT2,Am=2,e1=4;v.interpolateZoom=function(g,F){var te=g[0],ot=g[1],_t=g[2],At=F[0],ca=F[1],Er=F[2],Lp=At-te,Wp=ca-ot,Yp=Lp*Lp+Wp*Wp,A0,L0;if(Yp<St)L0=Math.log(Er/_t)/Z0,A0=function(vm){return[te+vm*Lp,ot+vm*Wp,_t*Math.exp(Z0*vm*L0)]};else{var rm=Math.sqrt(Yp),xm=(Er*Er-_t*_t+e1*Yp)/(2*_t*Am*rm),N0=(Er*Er-_t*_t-e1*Yp)/(2*Er*Am*rm),K0=Math.log(Math.sqrt(xm*xm+1)-xm),em=Math.log(Math.sqrt(N0*N0+1)-N0);L0=(em-K0)/Z0,A0=function(vm){var ym=vm*L0,nm=X0(K0),d1=_t/(Am*rm)*(nm*$0(Z0*ym+K0)-w0(K0));return[te+d1*Lp,ot+d1*Wp,_t*nm/X0(Z0*ym+K0)]}}return A0.duration=L0*1e3,A0},v.behavior.zoom=function(){var g={x:0,y:0,k:1},F,te,ot,_t=[960,500],At=E1,ca=250,Er=0,Lp="mousedown.zoom",Wp="mousemove.zoom",Yp="mouseup.zoom",A0,L0="touchstart.zoom",rm,xm=oa(ym,"zoomstart","zoom","zoomend"),N0,K0,em,vm;z1||(z1="onwheel"in _?(N1=function(){return-v.event.deltaY*(v.event.deltaMode?120:1)},"wheel"):"onmousewheel"in _?(N1=function(){return v.event.wheelDelta},"mousewheel"):(N1=function(){return-v.event.detail},"MozMousePixelScroll"));function ym(pm){pm.on(Lp,qp).on(z1+".zoom",Dm).on("dblclick.zoom",Gm).on(L0,q0)}ym.event=function(pm){pm.each(function(){var _m=xm.of(this,arguments),Cm=g;Ox?v.select(this).transition().each("start.zoom",function(){g=this.__chart__||{x:0,y:0,k:1},re(_m)}).tween("zoom:zoom",function(){var G1=_t[0],hg=_t[1],qg=te?te[0]:G1/2,Em=te?te[1]:hg/2,hm=v.interpolateZoom([(qg-g.x)/g.k,(Em-g.y)/g.k,G1/g.k],[(qg-Cm.x)/Cm.k,(Em-Cm.y)/Cm.k,G1/Cm.k]);return function(Om){var c1=hm(Om),bg=G1/c1[2];this.__chart__=g={x:qg-c1[0]*bg,y:Em-c1[1]*bg,k:bg},st(_m)}}).each("interrupt.zoom",function(){ha(_m)}).each("end.zoom",function(){ha(_m)}):(this.__chart__=g,re(_m),st(_m),ha(_m))})},ym.translate=function(pm){return arguments.length?(g={x:+pm[0],y:+pm[1],k:g.k},C(),ym):[g.x,g.y]},ym.scale=function(pm){return arguments.length?(g={x:g.x,y:g.y,k:null},n(+pm),C(),ym):g.k},ym.scaleExtent=function(pm){return arguments.length?(At=pm==null?E1:[+pm[0],+pm[1]],ym):At},ym.center=function(pm){return arguments.length?(ot=pm&&[+pm[0],+pm[1]],ym):ot},ym.size=function(pm){return arguments.length?(_t=pm&&[+pm[0],+pm[1]],ym):_t},ym.duration=function(pm){return arguments.length?(ca=+pm,ym):ca},ym.x=function(pm){return arguments.length?(K0=pm,N0=pm.copy(),g={x:0,y:0,k:1},ym):K0},ym.y=function(pm){return arguments.length?(vm=pm,em=pm.copy(),g={x:0,y:0,k:1},ym):vm};function nm(pm){return[(pm[0]-g.x)/g.k,(pm[1]-g.y)/g.k]}function d1(pm){return[pm[0]*g.k+g.x,pm[1]*g.k+g.y]}function n(pm){g.k=Math.max(At[0],Math.min(At[1],pm))}function i(pm,_m){_m=d1(_m),g.x+=pm[0]-_m[0],g.y+=pm[1]-_m[1]}function u(pm,_m,Cm,G1){pm.__chart__={x:g.x,y:g.y,k:g.k},n(Math.pow(2,G1)),i(te=_m,Cm),pm=v.select(pm),ca>0&&(pm=pm.transition().duration(ca)),pm.call(ym.event)}function C(){K0&&K0.domain(N0.range().map(function(pm){return(pm-g.x)/g.k}).map(N0.invert)),vm&&vm.domain(em.range().map(function(pm){return(pm-g.y)/g.k}).map(em.invert))}function re(pm){Er++||pm({type:"zoomstart"})}function st(pm){C(),pm({type:"zoom",scale:g.k,translate:[g.x,g.y]})}function ha(pm){--Er||(pm({type:"zoomend"}),te=null)}function qp(){var pm=this,_m=xm.of(pm,arguments),Cm=0,G1=v.select(x(pm)).on(Wp,Em).on(Yp,hm),hg=nm(v.mouse(pm)),qg=Tm(pm);vb.call(pm),re(_m);function Em(){Cm=1,i(v.mouse(pm),hg),st(_m)}function hm(){G1.on(Wp,null).on(Yp,null),qg(Cm),ha(_m)}}function q0(){var pm=this,_m=xm.of(pm,arguments),Cm={},G1=0,hg,qg=".zoom-"+v.event.changedTouches[0].identifier,Em="touchmove"+qg,hm="touchend"+qg,Om=[],c1=v.select(pm),bg=Tm(pm);pg(),re(_m),c1.on(Lp,null).on(L0,pg);function Yg(){var dv=v.touches(pm);return hg=g.k,dv.forEach(function(hy){hy.identifier in Cm&&(Cm[hy.identifier]=nm(hy))}),dv}function pg(){var dv=v.event.target;v.select(dv).on(Em,nv).on(hm,Tv),Om.push(dv);for(var hy=v.event.changedTouches,dx=0,Kx=hy.length;dx<Kx;++dx)Cm[hy[dx].identifier]=null;var Sx=Yg(),Sb=Date.now();if(Sx.length===1){if(Sb-rm<500){var R_=Sx[0];u(pm,R_,Cm[R_.identifier],Math.floor(Math.log(g.k)/Math.LN2)+1),Pt()}rm=Sb}else if(Sx.length>1){var R_=Sx[0],W2=Sx[1],K5=R_[0]-W2[0],Cw=R_[1]-W2[1];G1=K5*K5+Cw*Cw}}function nv(){var dv=v.touches(pm),hy,dx,Kx,Sx;vb.call(pm);for(var Sb=0,R_=dv.length;Sb<R_;++Sb,Sx=null)if(Kx=dv[Sb],Sx=Cm[Kx.identifier]){if(dx)break;hy=Kx,dx=Sx}if(Sx){var W2=(W2=Kx[0]-hy[0])*W2+(W2=Kx[1]-hy[1])*W2,K5=G1&&Math.sqrt(W2/G1);hy=[(hy[0]+Kx[0])/2,(hy[1]+Kx[1])/2],dx=[(dx[0]+Sx[0])/2,(dx[1]+Sx[1])/2],n(K5*hg)}rm=null,i(hy,dx),st(_m)}function Tv(){if(v.event.touches.length){for(var dv=v.event.changedTouches,hy=0,dx=dv.length;hy<dx;++hy)delete Cm[dv[hy].identifier];for(var Kx in Cm)return void Yg()}v.selectAll(Om).on(qg,null),c1.on(Lp,qp).on(L0,q0),bg(),ha(_m)}}function Dm(){var pm=xm.of(this,arguments);A0?clearTimeout(A0):(vb.call(this),F=nm(te=ot||v.mouse(this)),re(pm)),A0=setTimeout(function(){A0=null,ha(pm)},50),Pt(),n(Math.pow(2,N1()*.002)*g.k),i(te,F),st(pm)}function Gm(){var pm=v.mouse(this),_m=Math.log(g.k)/Math.LN2;u(this,pm,nm(pm),v.event.shiftKey?Math.ceil(_m)-1:Math.floor(_m)+1)}return v.rebind(ym,xm,"on")};var E1=[0,1/0],N1,z1;v.color=r1;function r1(){}r1.prototype.toString=function(){return this.rgb()+""},v.hsl=Lm;function Lm(g,F,te){return this instanceof Lm?(this.h=+g,this.s=+F,void(this.l=+te)):arguments.length<2?g instanceof Lm?new Lm(g.h,g.s,g.l):Zp(""+g,l0,Lm):new Lm(g,F,te)}var T1=Lm.prototype=new r1;T1.brighter=function(g){return g=Math.pow(.7,arguments.length?g:1),new Lm(this.h,this.s,this.l/g)},T1.darker=function(g){return g=Math.pow(.7,arguments.length?g:1),new Lm(this.h,this.s,g*this.l)},T1.rgb=function(){return O1(this.h,this.s,this.l)};function O1(g,F,te){var ot,_t;g=isNaN(g)?0:(g%=360)<0?g+360:g,F=isNaN(F)||F<0?0:F>1?1:F,te=te<0?0:te>1?1:te,_t=te<=.5?te*(1+F):te+F-te*F,ot=2*te-_t;function At(Er){return Er>360?Er-=360:Er<0&&(Er+=360),Er<60?ot+(_t-ot)*Er/60:Er<180?_t:Er<240?ot+(_t-ot)*(240-Er)/60:ot}function ca(Er){return Math.round(At(Er)*255)}return new Vm(ca(g+120),ca(g),ca(g-120))}v.hcl=y1;function y1(g,F,te){return this instanceof y1?(this.h=+g,this.c=+F,void(this.l=+te)):arguments.length<2?g instanceof y1?new y1(g.h,g.c,g.l):g instanceof t1?Ig(g.l,g.a,g.b):Ig((g=Bp((g=v.rgb(g)).r,g.g,g.b)).l,g.a,g.b):new y1(g,F,te)}var l1=y1.prototype=new r1;l1.brighter=function(g){return new y1(this.h,this.c,Math.min(100,this.l+Z1*(arguments.length?g:1)))},l1.darker=function(g){return new y1(this.h,this.c,Math.max(0,this.l-Z1*(arguments.length?g:1)))},l1.rgb=function(){return m1(this.h,this.c,this.l).rgb()};function m1(g,F,te){return isNaN(g)&&(g=0),isNaN(F)&&(F=0),new t1(te,Math.cos(g*=Jp)*F,Math.sin(g)*F)}v.lab=t1;function t1(g,F,te){return this instanceof t1?(this.l=+g,this.a=+F,void(this.b=+te)):arguments.length<2?g instanceof t1?new t1(g.l,g.a,g.b):g instanceof y1?m1(g.h,g.c,g.l):Bp((g=Vm(g)).r,g.g,g.b):new t1(g,F,te)}var Z1=18,rg=.95047,k1=1,ug=1.08883,yg=t1.prototype=new r1;yg.brighter=function(g){return new t1(Math.min(100,this.l+Z1*(arguments.length?g:1)),this.a,this.b)},yg.darker=function(g){return new t1(Math.max(0,this.l-Z1*(arguments.length?g:1)),this.a,this.b)},yg.rgb=function(){return Eg(this.l,this.a,this.b)};function Eg(g,F,te){var ot=(g+16)/116,_t=ot+F/500,At=ot-te/200;return _t=Q1(_t)*rg,ot=Q1(ot)*k1,At=Q1(At)*ug,new Vm(cg(3.2404542*_t-1.5371385*ot-.4985314*At),cg(-.969266*_t+1.8760108*ot+.041556*At),cg(.0556434*_t-.2040259*ot+1.0572252*At))}function Ig(g,F,te){return g>0?new y1(Math.atan2(te,F)*n0,Math.sqrt(F*F+te*te),g):new y1(NaN,NaN,g)}function Q1(g){return g>.206893034?g*g*g:(g-4/29)/7.787037}function Rg(g){return g>.008856?Math.pow(g,1/3):7.787037*g+4/29}function cg(g){return Math.round(255*(g<=.00304?12.92*g:1.055*Math.pow(g,1/2.4)-.055))}v.rgb=Vm;function Vm(g,F,te){return this instanceof Vm?(this.r=~~g,this.g=~~F,void(this.b=~~te)):arguments.length<2?g instanceof Vm?new Vm(g.r,g.g,g.b):Zp(""+g,Vm,O1):new Vm(g,F,te)}function Xg(g){return new Vm(g>>16,g>>8&255,g&255)}function Ct(g){return Xg(g)+""}var Tt=Vm.prototype=new r1;Tt.brighter=function(g){g=Math.pow(.7,arguments.length?g:1);var F=this.r,te=this.g,ot=this.b,_t=30;return!F&&!te&&!ot?new Vm(_t,_t,_t):(F&&F<_t&&(F=_t),te&&te<_t&&(te=_t),ot&&ot<_t&&(ot=_t),new Vm(Math.min(255,F/g),Math.min(255,te/g),Math.min(255,ot/g)))},Tt.darker=function(g){return g=Math.pow(.7,arguments.length?g:1),new Vm(g*this.r,g*this.g,g*this.b)},Tt.hsl=function(){return l0(this.r,this.g,this.b)},Tt.toString=function(){return"#"+jp(this.r)+jp(this.g)+jp(this.b)};function jp(g){return g<16?"0"+Math.max(0,g).toString(16):Math.min(255,g).toString(16)}function Zp(g,F,te){var ot=0,_t=0,At=0,ca,Er,Lp;if(ca=/([a-z]+)\((.*)\)/.exec(g=g.toLowerCase()),ca)switch(Er=ca[2].split(","),ca[1]){case"hsl":return te(parseFloat(Er[0]),parseFloat(Er[1])/100,parseFloat(Er[2])/100);case"rgb":return F(p0(Er[0]),p0(Er[1]),p0(Er[2]))}return(Lp=a0.get(g))?F(Lp.r,Lp.g,Lp.b):(g!=null&&g.charAt(0)==="#"&&!isNaN(Lp=parseInt(g.slice(1),16))&&(g.length===4?(ot=(Lp&3840)>>4,ot=ot>>4|ot,_t=Lp&240,_t=_t>>4|_t,At=Lp&15,At=At<<4|At):g.length===7&&(ot=(Lp&16711680)>>16,_t=(Lp&65280)>>8,At=Lp&255)),F(ot,_t,At))}function l0(g,F,te){var ot=Math.min(g/=255,F/=255,te/=255),_t=Math.max(g,F,te),At=_t-ot,ca,Er,Lp=(_t+ot)/2;return At?(Er=Lp<.5?At/(_t+ot):At/(2-_t-ot),g==_t?ca=(F-te)/At+(F<te?6:0):F==_t?ca=(te-g)/At+2:ca=(g-F)/At+4,ca*=60):(ca=NaN,Er=Lp>0&&Lp<1?0:ca),new Lm(ca,Er,Lp)}function Bp(g,F,te){g=Gp(g),F=Gp(F),te=Gp(te);var ot=Rg((.4124564*g+.3575761*F+.1804375*te)/rg),_t=Rg((.2126729*g+.7151522*F+.072175*te)/k1),At=Rg((.0193339*g+.119192*F+.9503041*te)/ug);return t1(116*_t-16,500*(ot-_t),200*(_t-At))}function Gp(g){return(g/=255)<=.04045?g/12.92:Math.pow((g+.055)/1.055,2.4)}function p0(g){var F=parseFloat(g);return g.charAt(g.length-1)==="%"?Math.round(F*2.55):F}var a0=v.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});a0.forEach(function(g,F){a0.set(g,Xg(F))});function D0(g){return typeof g=="function"?g:function(){return g}}v.functor=D0,v.xhr=z0(dt);function z0(g){return function(F,te,ot){return arguments.length===2&&typeof te=="function"&&(ot=te,te=null),am(F,te,g,ot)}}function am(g,F,te,ot){var _t={},At=v.dispatch("beforesend","progress","load","error"),ca={},Er=new XMLHttpRequest,Lp=null;self.XDomainRequest&&!("withCredentials"in Er)&&/^(http(s)?:)?\/\//.test(g)&&(Er=new XDomainRequest),"onload"in Er?Er.onload=Er.onerror=Wp:Er.onreadystatechange=function(){Er.readyState>3&&Wp()};function Wp(){var Yp=Er.status,A0;if(!Yp&&Hm(Er)||Yp>=200&&Yp<300||Yp===304){try{A0=te.call(_t,Er)}catch(L0){At.error.call(_t,L0);return}At.load.call(_t,A0)}else At.error.call(_t,Er)}return Er.onprogress=function(Yp){var A0=v.event;v.event=Yp;try{At.progress.call(_t,Er)}finally{v.event=A0}},_t.header=function(Yp,A0){return Yp=(Yp+"").toLowerCase(),arguments.length<2?ca[Yp]:(A0==null?delete ca[Yp]:ca[Yp]=A0+"",_t)},_t.mimeType=function(Yp){return arguments.length?(F=Yp==null?null:Yp+"",_t):F},_t.responseType=function(Yp){return arguments.length?(Lp=Yp,_t):Lp},_t.response=function(Yp){return te=Yp,_t},["get","post"].forEach(function(Yp){_t[Yp]=function(){return _t.send.apply(_t,[Yp].concat(h(arguments)))}}),_t.send=function(Yp,A0,L0){if(arguments.length===2&&typeof A0=="function"&&(L0=A0,A0=null),Er.open(Yp,g,!0),F!=null&&!("accept"in ca)&&(ca.accept=F+",*/*"),Er.setRequestHeader)for(var rm in ca)Er.setRequestHeader(rm,ca[rm]);return F!=null&&Er.overrideMimeType&&Er.overrideMimeType(F),Lp!=null&&(Er.responseType=Lp),L0!=null&&_t.on("error",L0).on("load",function(xm){L0(null,xm)}),At.beforesend.call(_t,Er),Er.send(A0??null),_t},_t.abort=function(){return Er.abort(),_t},v.rebind(_t,At,"on"),ot==null?_t:_t.get(Ym(ot))}function Ym(g){return g.length===1?function(F,te){g(F==null?te:null)}:g}function Hm(g){var F=g.responseType;return F&&F!=="text"?g.response:g.responseText}v.dsv=function(g,F){var te=new RegExp('["'+g+`
]`),ot=g.charCodeAt(0);function _t(Wp,Yp,A0){arguments.length<3&&(A0=Yp,Yp=null);var L0=am(Wp,F,Yp==null?At:ca(Yp),A0);return L0.row=function(rm){return arguments.length?L0.response((Yp=rm)==null?At:ca(rm)):Yp},L0}function At(Wp){return _t.parse(Wp.responseText)}function ca(Wp){return function(Yp){return _t.parse(Yp.responseText,Wp)}}_t.parse=function(Wp,Yp){var A0;return _t.parseRows(Wp,function(L0,rm){if(A0)return A0(L0,rm-1);var xm=function(N0){for(var K0={},em=L0.length,vm=0;vm<em;++vm)K0[L0[vm]]=N0[vm];return K0};A0=Yp?function(N0,K0){return Yp(xm(N0),K0)}:xm})},_t.parseRows=function(Wp,Yp){var A0={},L0={},rm=[],xm=Wp.length,N0=0,K0=0,em,vm;function ym(){if(N0>=xm)return L0;if(vm)return vm=!1,A0;var d1=N0;if(Wp.charCodeAt(d1)===34){for(var n=d1;n++<xm;)if(Wp.charCodeAt(n)===34){if(Wp.charCodeAt(n+1)!==34)break;++n}N0=n+2;var i=Wp.charCodeAt(n+1);return i===13?(vm=!0,Wp.charCodeAt(n+2)===10&&++N0):i===10&&(vm=!0),Wp.slice(d1+1,n).replace(/""/g,'"')}for(;N0<xm;){var i=Wp.charCodeAt(N0++),u=1;if(i===10)vm=!0;else if(i===13)vm=!0,Wp.charCodeAt(N0)===10&&(++N0,++u);else if(i!==ot)continue;return Wp.slice(d1,N0-u)}return Wp.slice(d1)}for(;(em=ym())!==L0;){for(var nm=[];em!==A0&&em!==L0;)nm.push(em),em=ym();Yp&&(nm=Yp(nm,K0++))==null||rm.push(nm)}return rm},_t.format=function(Wp){if(Array.isArray(Wp[0]))return _t.formatRows(Wp);var Yp=new rt,A0=[];return Wp.forEach(function(L0){for(var rm in L0)Yp.has(rm)||A0.push(Yp.add(rm))}),[A0.map(Lp).join(g)].concat(Wp.map(function(L0){return A0.map(function(rm){return Lp(L0[rm])}).join(g)})).join(`
`)},_t.formatRows=function(Wp){return Wp.map(Er).join(`
`)};function Er(Wp){return Wp.map(Lp).join(g)}function Lp(Wp){return te.test(Wp)?'"'+Wp.replace(/\"/g,'""')+'"':Wp}return _t},v.csv=v.dsv(",","text/csv"),v.tsv=v.dsv("	","text/tab-separated-values");var f1,Im,Jm,R1,Ng=this[se(this,"requestAnimationFrame")]||function(g){setTimeout(g,17)};v.timer=function(){B1.apply(this,arguments)};function B1(g,F,te){var ot=arguments.length;ot<2&&(F=0),ot<3&&(te=Date.now());var _t=te+F,At={c:g,t:_t,n:null};return Im?Im.n=At:f1=At,Im=At,Jm||(R1=clearTimeout(R1),Jm=1,Ng(av)),At}function av(){var g=dg(),F=sv()-g;F>24?(isFinite(F)&&(clearTimeout(R1),R1=setTimeout(av,F)),Jm=0):(Jm=1,Ng(av))}v.timer.flush=function(){dg(),sv()};function dg(){for(var g=Date.now(),F=f1;F;)g>=F.t&&F.c(g-F.t)&&(F.c=null),F=F.n;return g}function sv(){for(var g,F=f1,te=1/0;F;)F.c?(F.t<te&&(te=F.t),F=(g=F).n):F=g?g.n=F.n:f1=F.n;return Im=g,te}v.round=function(g,F){return F?Math.round(g*(F=Math.pow(10,F)))/F:Math.round(g)},v.geom={};function xg(g){return g[0]}function Jg(g){return g[1]}v.geom.hull=function(g){var F=xg,te=Jg;if(arguments.length)return ot(g);function ot(_t){if(_t.length<3)return[];var At=D0(F),ca=D0(te),Er,Lp=_t.length,Wp=[],Yp=[];for(Er=0;Er<Lp;Er++)Wp.push([+At.call(this,_t[Er],Er),+ca.call(this,_t[Er],Er),Er]);for(Wp.sort(fg),Er=0;Er<Lp;Er++)Yp.push([Wp[Er][0],-Wp[Er][1]]);var A0=ov(Wp),L0=ov(Yp),rm=L0[0]===A0[0],xm=L0[L0.length-1]===A0[A0.length-1],N0=[];for(Er=A0.length-1;Er>=0;--Er)N0.push(_t[Wp[A0[Er]][2]]);for(Er=+rm;Er<L0.length-xm;++Er)N0.push(_t[Wp[L0[Er]][2]]);return N0}return ot.x=function(_t){return arguments.length?(F=_t,ot):F},ot.y=function(_t){return arguments.length?(te=_t,ot):te},ot};function ov(g){for(var F=g.length,te=[0,1],ot=2,_t=2;_t<F;_t++){for(;ot>1&&S0(g[te[ot-2]],g[te[ot-1]],g[_t])<=0;)--ot;te[ot++]=_t}return te.slice(0,ot)}function fg(g,F){return g[0]-F[0]||g[1]-F[1]}v.geom.polygon=function(g){return lt(g,kv),g};var kv=v.geom.polygon.prototype=[];kv.area=function(){for(var g=-1,F=this.length,te,ot=this[F-1],_t=0;++g<F;)te=ot,ot=this[g],_t+=te[1]*ot[0]-te[0]*ot[1];return _t*.5},kv.centroid=function(g){var F=-1,te=this.length,ot=0,_t=0,At,ca=this[te-1],Er;for(arguments.length||(g=-1/(6*this.area()));++F<te;)At=ca,ca=this[F],Er=At[0]*ca[1]-ca[0]*At[1],ot+=(At[0]+ca[0])*Er,_t+=(At[1]+ca[1])*Er;return[ot*g,_t*g]},kv.clip=function(g){for(var F,te=gv(g),ot=-1,_t=this.length-gv(this),At,ca,Er=this[_t-1],Lp,Wp,Yp;++ot<_t;){for(F=g.slice(),g.length=0,Lp=this[ot],Wp=F[(ca=F.length-te)-1],At=-1;++At<ca;)Yp=F[At],_v(Yp,Er,Lp)?(_v(Wp,Er,Lp)||g.push(Dg(Wp,Yp,Er,Lp)),g.push(Yp)):_v(Wp,Er,Lp)&&g.push(Dg(Wp,Yp,Er,Lp)),Wp=Yp;te&&g.push(g[0]),Er=Lp}return g};function _v(g,F,te){return(te[0]-F[0])*(g[1]-F[1])<(te[1]-F[1])*(g[0]-F[0])}function Dg(g,F,te,ot){var _t=g[0],At=te[0],ca=F[0]-_t,Er=ot[0]-At,Lp=g[1],Wp=te[1],Yp=F[1]-Lp,A0=ot[1]-Wp,L0=(Er*(Lp-Wp)-A0*(_t-At))/(A0*ca-Er*Yp);return[_t+L0*ca,Lp+L0*Yp]}function gv(g){var F=g[0],te=g[g.length-1];return!(F[0]-te[0]||F[1]-te[1])}var Kg,iv,Kv,Nv=[],Bg,Qg,Hg=[];function ev(){vv(this),this.edge=this.site=this.circle=null}function Iv(g){var F=Nv.pop()||new ev;return F.site=g,F}function Yv(g){uy(g),Kv.remove(g),Nv.push(g),vv(g)}function Dv(g){var F=g.circle,te=F.x,ot=F.cy,_t={x:te,y:ot},At=g.P,ca=g.N,Er=[g];Yv(g);for(var Lp=At;Lp.circle&&S(te-Lp.circle.x)<Hp&&S(ot-Lp.circle.cy)<Hp;)At=Lp.P,Er.unshift(Lp),Yv(Lp),Lp=At;Er.unshift(Lp),uy(Lp);for(var Wp=ca;Wp.circle&&S(te-Wp.circle.x)<Hp&&S(ot-Wp.circle.cy)<Hp;)ca=Wp.N,Er.push(Wp),Yv(Wp),Wp=ca;Er.push(Wp),uy(Wp);var Yp=Er.length,A0;for(A0=1;A0<Yp;++A0)Wp=Er[A0],Lp=Er[A0-1],Cg(Wp.edge,Lp.site,Wp.site,_t);Lp=Er[0],Wp=Er[Yp-1],Wp.edge=lv(Lp.site,Wp.site,null,_t),cy(Lp),cy(Wp)}function Qv(g){for(var F=g.x,te=g.y,ot,_t,At,ca,Er=Kv._;Er;)if(At=ny(Er,te)-F,At>Hp)Er=Er.L;else if(ca=F-Bv(Er,te),ca>Hp){if(!Er.R){ot=Er;break}Er=Er.R}else{At>-Hp?(ot=Er.P,_t=Er):ca>-Hp?(ot=Er,_t=Er.N):ot=_t=Er;break}var Lp=Iv(g);if(Kv.insert(ot,Lp),!(!ot&&!_t)){if(ot===_t){uy(ot),_t=Iv(ot.site),Kv.insert(Lp,_t),Lp.edge=_t.edge=lv(ot.site,Lp.site),cy(ot),cy(_t);return}if(!_t){Lp.edge=lv(ot.site,Lp.site);return}uy(ot),uy(_t);var Wp=ot.site,Yp=Wp.x,A0=Wp.y,L0=g.x-Yp,rm=g.y-A0,xm=_t.site,N0=xm.x-Yp,K0=xm.y-A0,em=2*(L0*K0-rm*N0),vm=L0*L0+rm*rm,ym=N0*N0+K0*K0,nm={x:(K0*vm-rm*ym)/em+Yp,y:(L0*ym-N0*vm)/em+A0};Cg(_t.edge,Wp,xm,nm),Lp.edge=lv(Wp,g,null,nm),_t.edge=lv(g,xm,null,nm),cy(ot),cy(_t)}}function ny(g,F){var te=g.site,ot=te.x,_t=te.y,At=_t-F;if(!At)return ot;var ca=g.P;if(!ca)return-1/0;te=ca.site;var Er=te.x,Lp=te.y,Wp=Lp-F;if(!Wp)return Er;var Yp=Er-ot,A0=1/At-1/Wp,L0=Yp/Wp;return A0?(-L0+Math.sqrt(L0*L0-2*A0*(Yp*Yp/(-2*Wp)-Lp+Wp/2+_t-At/2)))/A0+ot:(ot+Er)/2}function Bv(g,F){var te=g.N;if(te)return ny(te,F);var ot=g.site;return ot.y===F?ot.x:1/0}function tv(g){this.site=g,this.edges=[]}tv.prototype.prepare=function(){for(var g=this.edges,F=g.length,te;F--;)te=g[F].edge,(!te.b||!te.a)&&g.splice(F,1);return g.sort(ly),g.length};function Sy(g){for(var F=g[0][0],te=g[1][0],ot=g[0][1],_t=g[1][1],At,ca,Er,Lp,Wp=iv,Yp=Wp.length,A0,L0,rm,xm,N0,K0;Yp--;)if(A0=Wp[Yp],!(!A0||!A0.prepare()))for(rm=A0.edges,xm=rm.length,L0=0;L0<xm;)K0=rm[L0].end(),Er=K0.x,Lp=K0.y,N0=rm[++L0%xm].start(),At=N0.x,ca=N0.y,(S(Er-At)>Hp||S(Lp-ca)>Hp)&&(rm.splice(L0,0,new zg(Ag(A0.site,K0,S(Er-F)<Hp&&_t-Lp>Hp?{x:F,y:S(At-F)<Hp?ca:_t}:S(Lp-_t)<Hp&&te-Er>Hp?{x:S(ca-_t)<Hp?At:te,y:_t}:S(Er-te)<Hp&&Lp-ot>Hp?{x:te,y:S(At-te)<Hp?ca:ot}:S(Lp-ot)<Hp&&Er-F>Hp?{x:S(ca-ot)<Hp?At:F,y:ot}:null),A0.site,null)),++xm)}function ly(g,F){return F.angle-g.angle}function Ey(){vv(this),this.x=this.y=this.arc=this.site=this.cy=null}function cy(g){var F=g.P,te=g.N;if(!(!F||!te)){var ot=F.site,_t=g.site,At=te.site;if(ot!==At){var ca=_t.x,Er=_t.y,Lp=ot.x-ca,Wp=ot.y-Er,Yp=At.x-ca,A0=At.y-Er,L0=2*(Lp*A0-Wp*Yp);if(!(L0>=-St)){var rm=Lp*Lp+Wp*Wp,xm=Yp*Yp+A0*A0,N0=(A0*rm-Wp*xm)/L0,K0=(Lp*xm-Yp*rm)/L0,A0=K0+Er,em=Hg.pop()||new Ey;em.arc=g,em.site=_t,em.x=N0+ca,em.y=A0+Math.sqrt(N0*N0+K0*K0),em.cy=A0,g.circle=em;for(var vm=null,ym=Qg._;ym;)if(em.y<ym.y||em.y===ym.y&&em.x<=ym.x)if(ym.L)ym=ym.L;else{vm=ym.P;break}else if(ym.R)ym=ym.R;else{vm=ym;break}Qg.insert(vm,em),vm||(Bg=em)}}}}function uy(g){var F=g.circle;F&&(F.P||(Bg=F.N),Qg.remove(F),Hg.push(F),vv(F),g.circle=null)}function Fy(g,F,te,ot){return function(_t){var At=_t.a,ca=_t.b,Er=At.x,Lp=At.y,Wp=ca.x,Yp=ca.y,A0=0,L0=1,rm=Wp-Er,xm=Yp-Lp,N0;if(N0=g-Er,!(!rm&&N0>0)){if(N0/=rm,rm<0){if(N0<A0)return;N0<L0&&(L0=N0)}else if(rm>0){if(N0>L0)return;N0>A0&&(A0=N0)}if(N0=te-Er,!(!rm&&N0<0)){if(N0/=rm,rm<0){if(N0>L0)return;N0>A0&&(A0=N0)}else if(rm>0){if(N0<A0)return;N0<L0&&(L0=N0)}if(N0=F-Lp,!(!xm&&N0>0)){if(N0/=xm,xm<0){if(N0<A0)return;N0<L0&&(L0=N0)}else if(xm>0){if(N0>L0)return;N0>A0&&(A0=N0)}if(N0=ot-Lp,!(!xm&&N0<0)){if(N0/=xm,xm<0){if(N0>L0)return;N0>A0&&(A0=N0)}else if(xm>0){if(N0<A0)return;N0<L0&&(L0=N0)}return A0>0&&(_t.a={x:Er+A0*rm,y:Lp+A0*xm}),L0<1&&(_t.b={x:Er+L0*rm,y:Lp+L0*xm}),_t}}}}}}function Ny(g){for(var F=Kg,te=Fy(g[0][0],g[0][1],g[1][0],g[1][1]),ot=F.length,_t;ot--;)_t=F[ot],(!yy(_t,g)||!te(_t)||S(_t.a.x-_t.b.x)<Hp&&S(_t.a.y-_t.b.y)<Hp)&&(_t.a=_t.b=null,F.splice(ot,1))}function yy(g,F){var te=g.b;if(te)return!0;var ot=g.a,_t=F[0][0],At=F[1][0],ca=F[0][1],Er=F[1][1],Lp=g.l,Wp=g.r,Yp=Lp.x,A0=Lp.y,L0=Wp.x,rm=Wp.y,xm=(Yp+L0)/2,N0=(A0+rm)/2,K0,em;if(rm===A0){if(xm<_t||xm>=At)return;if(Yp>L0){if(!ot)ot={x:xm,y:ca};else if(ot.y>=Er)return;te={x:xm,y:Er}}else{if(!ot)ot={x:xm,y:Er};else if(ot.y<ca)return;te={x:xm,y:ca}}}else if(K0=(Yp-L0)/(rm-A0),em=N0-K0*xm,K0<-1||K0>1)if(Yp>L0){if(!ot)ot={x:(ca-em)/K0,y:ca};else if(ot.y>=Er)return;te={x:(Er-em)/K0,y:Er}}else{if(!ot)ot={x:(Er-em)/K0,y:Er};else if(ot.y<ca)return;te={x:(ca-em)/K0,y:ca}}else if(A0<rm){if(!ot)ot={x:_t,y:K0*_t+em};else if(ot.x>=At)return;te={x:At,y:K0*At+em}}else{if(!ot)ot={x:At,y:K0*At+em};else if(ot.x<_t)return;te={x:_t,y:K0*_t+em}}return g.a=ot,g.b=te,!0}function Hy(g,F){this.l=g,this.r=F,this.a=this.b=null}function lv(g,F,te,ot){var _t=new Hy(g,F);return Kg.push(_t),te&&Cg(_t,g,F,te),ot&&Cg(_t,F,g,ot),iv[g.i].edges.push(new zg(_t,g,F)),iv[F.i].edges.push(new zg(_t,F,g)),_t}function Ag(g,F,te){var ot=new Hy(g,null);return ot.a=F,ot.b=te,Kg.push(ot),ot}function Cg(g,F,te,ot){!g.a&&!g.b?(g.a=ot,g.l=F,g.r=te):g.l===te?g.b=ot:g.a=ot}function zg(g,F,te){var ot=g.a,_t=g.b;this.edge=g,this.site=F,this.angle=te?Math.atan2(te.y-F.y,te.x-F.x):g.l===F?Math.atan2(_t.x-ot.x,ot.y-_t.y):Math.atan2(ot.x-_t.x,_t.y-ot.y)}zg.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};function rv(){this._=null}function vv(g){g.U=g.C=g.L=g.R=g.P=g.N=null}rv.prototype={insert:function(g,F){var te,ot,_t;if(g){if(F.P=g,F.N=g.N,g.N&&(g.N.P=F),g.N=F,g.R){for(g=g.R;g.L;)g=g.L;g.L=F}else g.R=F;te=g}else this._?(g=vx(this._),F.P=null,F.N=g,g.P=g.L=F,te=g):(F.P=F.N=null,this._=F,te=null);for(F.L=F.R=null,F.U=te,F.C=!0,g=F;te&&te.C;)ot=te.U,te===ot.L?(_t=ot.R,_t&&_t.C?(te.C=_t.C=!1,ot.C=!0,g=ot):(g===te.R&&(uv(this,te),g=te,te=g.U),te.C=!1,ot.C=!0,vy(this,ot))):(_t=ot.L,_t&&_t.C?(te.C=_t.C=!1,ot.C=!0,g=ot):(g===te.L&&(vy(this,te),g=te,te=g.U),te.C=!1,ot.C=!0,uv(this,ot))),te=g.U;this._.C=!1},remove:function(g){g.N&&(g.N.P=g.P),g.P&&(g.P.N=g.N),g.N=g.P=null;var F=g.U,te,ot=g.L,_t=g.R,At,ca;if(ot?_t?At=vx(_t):At=ot:At=_t,F?F.L===g?F.L=At:F.R=At:this._=At,ot&&_t?(ca=At.C,At.C=g.C,At.L=ot,ot.U=At,At!==_t?(F=At.U,At.U=g.U,g=At.R,F.L=g,At.R=_t,_t.U=At):(At.U=F,F=At,g=At.R)):(ca=g.C,g=At),g&&(g.U=F),!ca){if(g&&g.C){g.C=!1;return}do{if(g===this._)break;if(g===F.L){if(te=F.R,te.C&&(te.C=!1,F.C=!0,uv(this,F),te=F.R),te.L&&te.L.C||te.R&&te.R.C){(!te.R||!te.R.C)&&(te.L.C=!1,te.C=!0,vy(this,te),te=F.R),te.C=F.C,F.C=te.R.C=!1,uv(this,F),g=this._;break}}else if(te=F.L,te.C&&(te.C=!1,F.C=!0,vy(this,F),te=F.L),te.L&&te.L.C||te.R&&te.R.C){(!te.L||!te.L.C)&&(te.R.C=!1,te.C=!0,uv(this,te),te=F.L),te.C=F.C,F.C=te.L.C=!1,vy(this,F),g=this._;break}te.C=!0,g=F,F=F.U}while(!g.C);g&&(g.C=!1)}}};function uv(g,F){var te=F,ot=F.R,_t=te.U;_t?_t.L===te?_t.L=ot:_t.R=ot:g._=ot,ot.U=_t,te.U=ot,te.R=ot.L,te.R&&(te.R.U=te),ot.L=te}function vy(g,F){var te=F,ot=F.L,_t=te.U;_t?_t.L===te?_t.L=ot:_t.R=ot:g._=ot,ot.U=_t,te.U=ot,te.L=ot.R,te.L&&(te.L.U=te),ot.R=te}function vx(g){for(;g.L;)g=g.L;return g}function Oy(g,F){var te=g.sort(ay).pop(),ot,_t,At;for(Kg=[],iv=new Array(g.length),Kv=new rv,Qg=new rv;;)if(At=Bg,te&&(!At||te.y<At.y||te.y===At.y&&te.x<At.x))(te.x!==ot||te.y!==_t)&&(iv[te.i]=new tv(te),Qv(te),ot=te.x,_t=te.y),te=g.pop();else if(At)Dv(At.arc);else break;F&&(Ny(F),Sy(F));var ca={cells:iv,edges:Kg};return Kv=Qg=Kg=iv=null,ca}function ay(g,F){return F.y-g.y||F.x-g.x}v.geom.voronoi=function(g){var F=xg,te=Jg,ot=F,_t=te,At=By;if(g)return ca(g);function ca(Lp){var Wp=new Array(Lp.length),Yp=At[0][0],A0=At[0][1],L0=At[1][0],rm=At[1][1];return Oy(Er(Lp),At).cells.forEach(function(xm,N0){var K0=xm.edges,em=xm.site,vm=Wp[N0]=K0.length?K0.map(function(ym){var nm=ym.start();return[nm.x,nm.y]}):em.x>=Yp&&em.x<=L0&&em.y>=A0&&em.y<=rm?[[Yp,rm],[L0,rm],[L0,A0],[Yp,A0]]:[];vm.point=Lp[N0]}),Wp}function Er(Lp){return Lp.map(function(Wp,Yp){return{x:Math.round(ot(Wp,Yp)/Hp)*Hp,y:Math.round(_t(Wp,Yp)/Hp)*Hp,i:Yp}})}return ca.links=function(Lp){return Oy(Er(Lp)).edges.filter(function(Wp){return Wp.l&&Wp.r}).map(function(Wp){return{source:Lp[Wp.l.i],target:Lp[Wp.r.i]}})},ca.triangles=function(Lp){var Wp=[];return Oy(Er(Lp)).cells.forEach(function(Yp,A0){for(var L0=Yp.site,rm=Yp.edges.sort(ly),xm=-1,N0=rm.length,K0,em,vm=rm[N0-1].edge,ym=vm.l===L0?vm.r:vm.l;++xm<N0;)K0=vm,em=ym,vm=rm[xm].edge,ym=vm.l===L0?vm.r:vm.l,A0<em.i&&A0<ym.i&&yx(L0,em,ym)<0&&Wp.push([Lp[A0],Lp[em.i],Lp[ym.i]])}),Wp},ca.x=function(Lp){return arguments.length?(ot=D0(F=Lp),ca):F},ca.y=function(Lp){return arguments.length?(_t=D0(te=Lp),ca):te},ca.clipExtent=function(Lp){return arguments.length?(At=Lp??By,ca):At===By?null:At},ca.size=function(Lp){return arguments.length?ca.clipExtent(Lp&&[[0,0],Lp]):At===By?null:At&&At[1]},ca};var By=[[-1e6,-1e6],[1e6,1e6]];function yx(g,F,te){return(g.x-te.x)*(F.y-g.y)-(g.x-F.x)*(te.y-g.y)}v.geom.delaunay=function(g){return v.geom.voronoi().triangles(g)},v.geom.quadtree=function(g,F,te,ot,_t){var At=xg,ca=Jg,Er;if(Er=arguments.length)return At=L2,ca=jy,Er===3&&(_t=te,ot=F,te=F=0),Lp(g);function Lp(Wp){var Yp,A0=D0(At),L0=D0(ca),rm,xm,N0,K0,em,vm,ym,nm;if(F!=null)em=F,vm=te,ym=ot,nm=_t;else if(ym=nm=-(em=vm=1/0),rm=[],xm=[],K0=Wp.length,Er)for(N0=0;N0<K0;++N0)Yp=Wp[N0],Yp.x<em&&(em=Yp.x),Yp.y<vm&&(vm=Yp.y),Yp.x>ym&&(ym=Yp.x),Yp.y>nm&&(nm=Yp.y),rm.push(Yp.x),xm.push(Yp.y);else for(N0=0;N0<K0;++N0){var d1=+A0(Yp=Wp[N0],N0),n=+L0(Yp,N0);d1<em&&(em=d1),n<vm&&(vm=n),d1>ym&&(ym=d1),n>nm&&(nm=n),rm.push(d1),xm.push(n)}var i=ym-em,u=nm-vm;i>u?nm=vm+i:ym=em+u;function C(ha,qp,q0,Dm,Gm,pm,_m,Cm){if(!(isNaN(q0)||isNaN(Dm)))if(ha.leaf){var G1=ha.x,hg=ha.y;if(G1!=null)if(S(G1-q0)+S(hg-Dm)<.01)re(ha,qp,q0,Dm,Gm,pm,_m,Cm);else{var qg=ha.point;ha.x=ha.y=ha.point=null,re(ha,qg,G1,hg,Gm,pm,_m,Cm),re(ha,qp,q0,Dm,Gm,pm,_m,Cm)}else ha.x=q0,ha.y=Dm,ha.point=qp}else re(ha,qp,q0,Dm,Gm,pm,_m,Cm)}function re(ha,qp,q0,Dm,Gm,pm,_m,Cm){var G1=(Gm+_m)*.5,hg=(pm+Cm)*.5,qg=q0>=G1,Em=Dm>=hg,hm=Em<<1|qg;ha.leaf=!1,ha=ha.nodes[hm]||(ha.nodes[hm]=xx()),qg?Gm=G1:_m=G1,Em?pm=hg:Cm=hg,C(ha,qp,q0,Dm,Gm,pm,_m,Cm)}var st=xx();if(st.add=function(ha){C(st,ha,+A0(ha,++N0),+L0(ha,N0),em,vm,ym,nm)},st.visit=function(ha){cx(ha,st,em,vm,ym,nm)},st.find=function(ha){return qy(st,ha[0],ha[1],em,vm,ym,nm)},N0=-1,F==null){for(;++N0<K0;)C(st,Wp[N0],rm[N0],xm[N0],em,vm,ym,nm);--N0}else Wp.forEach(st.add);return rm=xm=Wp=Yp=null,st}return Lp.x=function(Wp){return arguments.length?(At=Wp,Lp):At},Lp.y=function(Wp){return arguments.length?(ca=Wp,Lp):ca},Lp.extent=function(Wp){return arguments.length?(Wp==null?F=te=ot=_t=null:(F=+Wp[0][0],te=+Wp[0][1],ot=+Wp[1][0],_t=+Wp[1][1]),Lp):F==null?null:[[F,te],[ot,_t]]},Lp.size=function(Wp){return arguments.length?(Wp==null?F=te=ot=_t=null:(F=te=0,ot=+Wp[0],_t=+Wp[1]),Lp):F==null?null:[ot-F,_t-te]},Lp};function L2(g){return g.x}function jy(g){return g.y}function xx(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function cx(g,F,te,ot,_t,At){if(!g(F,te,ot,_t,At)){var ca=(te+_t)*.5,Er=(ot+At)*.5,Lp=F.nodes;Lp[0]&&cx(g,Lp[0],te,ot,ca,Er),Lp[1]&&cx(g,Lp[1],ca,ot,_t,Er),Lp[2]&&cx(g,Lp[2],te,Er,ca,At),Lp[3]&&cx(g,Lp[3],ca,Er,_t,At)}}function qy(g,F,te,ot,_t,At,ca){var Er=1/0,Lp;return(function Wp(Yp,A0,L0,rm,xm){if(!(A0>At||L0>ca||rm<ot||xm<_t)){if(N0=Yp.point){var N0,K0=F-Yp.x,em=te-Yp.y,vm=K0*K0+em*em;if(vm<Er){var ym=Math.sqrt(Er=vm);ot=F-ym,_t=te-ym,At=F+ym,ca=te+ym,Lp=N0}}for(var nm=Yp.nodes,d1=(A0+rm)*.5,n=(L0+xm)*.5,i=F>=d1,u=te>=n,C=u<<1|i,re=C+4;C<re;++C)if(Yp=nm[C&3])switch(C&3){case 0:Wp(Yp,A0,L0,d1,n);break;case 1:Wp(Yp,d1,L0,rm,n);break;case 2:Wp(Yp,A0,n,d1,xm);break;case 3:Wp(Yp,d1,n,rm,xm);break}}})(g,ot,_t,At,ca),Lp}v.interpolateRgb=c_;function c_(g,F){g=v.rgb(g),F=v.rgb(F);var te=g.r,ot=g.g,_t=g.b,At=F.r-te,ca=F.g-ot,Er=F.b-_t;return function(Lp){return"#"+jp(Math.round(te+At*Lp))+jp(Math.round(ot+ca*Lp))+jp(Math.round(_t+Er*Lp))}}v.interpolateObject=u_;function u_(g,F){var te={},ot={},_t;for(_t in g)_t in F?te[_t]=dy(g[_t],F[_t]):ot[_t]=g[_t];for(_t in F)_t in g||(ot[_t]=F[_t]);return function(At){for(_t in te)ot[_t]=te[_t](At);return ot}}v.interpolateNumber=_x;function _x(g,F){return g=+g,F=+F,function(te){return g*(1-te)+F*te}}v.interpolateString=d_;function d_(g,F){var te=k2.lastIndex=bx.lastIndex=0,ot,_t,At,ca=-1,Er=[],Lp=[];for(g=g+"",F=F+"";(ot=k2.exec(g))&&(_t=bx.exec(F));)(At=_t.index)>te&&(At=F.slice(te,At),Er[ca]?Er[ca]+=At:Er[++ca]=At),(ot=ot[0])===(_t=_t[0])?Er[ca]?Er[ca]+=_t:Er[++ca]=_t:(Er[++ca]=null,Lp.push({i:ca,x:_x(ot,_t)})),te=bx.lastIndex;return te<F.length&&(At=F.slice(te),Er[ca]?Er[ca]+=At:Er[++ca]=At),Er.length<2?Lp[0]?(F=Lp[0].x,function(Wp){return F(Wp)+""}):function(){return F}:(F=Lp.length,function(Wp){for(var Yp=0,A0;Yp<F;++Yp)Er[(A0=Lp[Yp]).i]=A0.x(Wp);return Er.join("")})}var k2=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,bx=new RegExp(k2.source,"g");v.interpolate=dy;function dy(g,F){for(var te=v.interpolators.length,ot;--te>=0&&!(ot=v.interpolators[te](g,F)););return ot}v.interpolators=[function(g,F){var te=typeof F;return(te==="string"?a0.has(F.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(F)?c_:d_:F instanceof r1?c_:Array.isArray(F)?px:te==="object"&&isNaN(F)?u_:_x)(g,F)}],v.interpolateArray=px;function px(g,F){var te=[],ot=[],_t=g.length,At=F.length,ca=Math.min(g.length,F.length),Er;for(Er=0;Er<ca;++Er)te.push(dy(g[Er],F[Er]));for(;Er<_t;++Er)ot[Er]=g[Er];for(;Er<At;++Er)ot[Er]=F[Er];return function(Lp){for(Er=0;Er<ca;++Er)ot[Er]=te[Er](Lp);return ot}}var m2=function(){return dt},kx=v.map({linear:m2,poly:Yy,quad:function(){return a3},cubic:function(){return Ky},sin:function(){return d5},exp:function(){return h5},circle:function(){return uw},elastic:Xx,back:$_,bounce:function(){return i3}}),t3=v.map({in:dt,out:n3,"in-out":N2,"out-in":function(g){return N2(n3(g))}});v.ease=function(g){var F=g.indexOf("-"),te=F>=0?g.slice(0,F):g,ot=F>=0?g.slice(F+1):"in";return te=kx.get(te)||m2,ot=t3.get(ot)||dt,r3(ot(te.apply(null,c.call(arguments,1))))};function r3(g){return function(F){return F<=0?0:F>=1?1:g(F)}}function n3(g){return function(F){return 1-g(1-F)}}function N2(g){return function(F){return .5*(F<.5?g(2*F):2-g(2-2*F))}}function a3(g){return g*g}function Ky(g){return g*g*g}function u5(g){if(g<=0)return 0;if(g>=1)return 1;var F=g*g,te=F*g;return 4*(g<.5?te:3*(g-F)+te-.75)}function Yy(g){return function(F){return Math.pow(F,g)}}function d5(g){return 1-Math.cos(g*Np)}function h5(g){return Math.pow(2,10*(g-1))}function uw(g){return 1-Math.sqrt(1-g*g)}function Xx(g,F){var te;return arguments.length<2&&(F=.45),arguments.length?te=F/Sr*Math.asin(1/g):(g=1,te=F/4),function(ot){return 1+g*Math.pow(2,-10*ot)*Math.sin((ot-te)*Sr/F)}}function $_(g){return g||(g=1.70158),function(F){return F*F*((g+1)*F-g)}}function i3(g){return g<1/2.75?7.5625*g*g:g<2/2.75?7.5625*(g-=1.5/2.75)*g+.75:g<2.5/2.75?7.5625*(g-=2.25/2.75)*g+.9375:7.5625*(g-=2.625/2.75)*g+.984375}v.interpolateHcl=O2;function O2(g,F){g=v.hcl(g),F=v.hcl(F);var te=g.h,ot=g.c,_t=g.l,At=F.h-te,ca=F.c-ot,Er=F.l-_t;return isNaN(ca)&&(ca=0,ot=isNaN(ot)?F.c:ot),isNaN(At)?(At=0,te=isNaN(te)?F.h:te):At>180?At-=360:At<-180&&(At+=360),function(Lp){return m1(te+At*Lp,ot+ca*Lp,_t+Er*Lp)+""}}v.interpolateHsl=f5;function f5(g,F){g=v.hsl(g),F=v.hsl(F);var te=g.h,ot=g.s,_t=g.l,At=F.h-te,ca=F.s-ot,Er=F.l-_t;return isNaN(ca)&&(ca=0,ot=isNaN(ot)?F.s:ot),isNaN(At)?(At=0,te=isNaN(te)?F.h:te):At>180?At-=360:At<-180&&(At+=360),function(Lp){return O1(te+At*Lp,ot+ca*Lp,_t+Er*Lp)+""}}v.interpolateLab=p5;function p5(g,F){g=v.lab(g),F=v.lab(F);var te=g.l,ot=g.a,_t=g.b,At=F.l-te,ca=F.a-ot,Er=F.b-_t;return function(Lp){return Eg(te+At*Lp,ot+ca*Lp,_t+Er*Lp)+""}}v.interpolateRound=o3;function o3(g,F){return F-=g,function(te){return Math.round(g+F*te)}}v.transform=function(g){var F=_.createElementNS(v.ns.prefix.svg,"g");return(v.transform=function(te){if(te!=null){F.setAttribute("transform",te);var ot=F.transform.baseVal.consolidate()}return new s3(ot?ot.matrix:hw)})(g)};function s3(g){var F=[g.a,g.b],te=[g.c,g.d],ot=Z_(F),_t=h_(F,te),At=Z_(dw(te,F,-_t))||0;F[0]*te[1]<te[0]*F[1]&&(F[0]*=-1,F[1]*=-1,ot*=-1,_t*=-1),this.rotate=(ot?Math.atan2(F[1],F[0]):Math.atan2(-te[0],te[1]))*n0,this.translate=[g.e,g.f],this.scale=[ot,At],this.skew=At?Math.atan2(_t,At)*n0:0}s3.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};function h_(g,F){return g[0]*F[0]+g[1]*F[1]}function Z_(g){var F=Math.sqrt(h_(g,g));return F&&(g[0]/=F,g[1]/=F),F}function dw(g,F,te){return g[0]+=te*F[0],g[1]+=te*F[1],g}var hw={a:1,b:0,c:0,d:1,e:0,f:0};v.interpolateTransform=l3;function z2(g){return g.length?g.pop()+",":""}function m5(g,F,te,ot){if(g[0]!==F[0]||g[1]!==F[1]){var _t=te.push("translate(",null,",",null,")");ot.push({i:_t-4,x:_x(g[0],F[0])},{i:_t-2,x:_x(g[1],F[1])})}else(F[0]||F[1])&&te.push("translate("+F+")")}function g5(g,F,te,ot){g!==F?(g-F>180?F+=360:F-g>180&&(g+=360),ot.push({i:te.push(z2(te)+"rotate(",null,")")-2,x:_x(g,F)})):F&&te.push(z2(te)+"rotate("+F+")")}function P2(g,F,te,ot){g!==F?ot.push({i:te.push(z2(te)+"skewX(",null,")")-2,x:_x(g,F)}):F&&te.push(z2(te)+"skewX("+F+")")}function J_(g,F,te,ot){if(g[0]!==F[0]||g[1]!==F[1]){var _t=te.push(z2(te)+"scale(",null,",",null,")");ot.push({i:_t-4,x:_x(g[0],F[0])},{i:_t-2,x:_x(g[1],F[1])})}else(F[0]!==1||F[1]!==1)&&te.push(z2(te)+"scale("+F+")")}function l3(g,F){var te=[],ot=[];return g=v.transform(g),F=v.transform(F),m5(g.translate,F.translate,te,ot),g5(g.rotate,F.rotate,te,ot),P2(g.skew,F.skew,te,ot),J_(g.scale,F.scale,te,ot),g=F=null,function(_t){for(var At=-1,ca=ot.length,Er;++At<ca;)te[(Er=ot[At]).i]=Er.x(_t);return te.join("")}}function v5(g,F){return F=(F-=g=+g)||1/F,function(te){return(te-g)/F}}function y5(g,F){return F=(F-=g=+g)||1/F,function(te){return Math.max(0,Math.min(1,(te-g)/F))}}v.layout={},v.layout.bundle=function(){return function(g){for(var F=[],te=-1,ot=g.length;++te<ot;)F.push(x5(g[te]));return F}};function x5(g){for(var F=g.source,te=g.target,ot=_5(F,te),_t=[F];F!==ot;)F=F.parent,_t.push(F);for(var At=_t.length;te!==ot;)_t.splice(At,0,te),te=te.parent;return _t}function c3(g){for(var F=[],te=g.parent;te!=null;)F.push(g),g=te,te=te.parent;return F.push(g),F}function _5(g,F){if(g===F)return g;for(var te=c3(g),ot=c3(F),_t=te.pop(),At=ot.pop(),ca=null;_t===At;)ca=_t,_t=te.pop(),At=ot.pop();return ca}v.layout.chord=function(){var g={},F,te,ot,_t,At=0,ca,Er,Lp;function Wp(){var A0={},L0=[],rm=v.range(_t),xm=[],N0,K0,em,vm,ym;for(F=[],te=[],N0=0,vm=-1;++vm<_t;){for(K0=0,ym=-1;++ym<_t;)K0+=ot[vm][ym];L0.push(K0),xm.push(v.range(_t)),N0+=K0}for(ca&&rm.sort(function(st,ha){return ca(L0[st],L0[ha])}),Er&&xm.forEach(function(st,ha){st.sort(function(qp,q0){return Er(ot[ha][qp],ot[ha][q0])})}),N0=(Sr-At*_t)/N0,K0=0,vm=-1;++vm<_t;){for(em=K0,ym=-1;++ym<_t;){var nm=rm[vm],d1=xm[nm][ym],n=ot[nm][d1],i=K0,u=K0+=n*N0;A0[nm+"-"+d1]={index:nm,subindex:d1,startAngle:i,endAngle:u,value:n}}te[nm]={index:nm,startAngle:em,endAngle:K0,value:L0[nm]},K0+=At}for(vm=-1;++vm<_t;)for(ym=vm-1;++ym<_t;){var C=A0[vm+"-"+ym],re=A0[ym+"-"+vm];(C.value||re.value)&&F.push(C.value<re.value?{source:re,target:C}:{source:C,target:re})}Lp&&Yp()}function Yp(){F.sort(function(A0,L0){return Lp((A0.source.value+A0.target.value)/2,(L0.source.value+L0.target.value)/2)})}return g.matrix=function(A0){return arguments.length?(_t=(ot=A0)&&ot.length,F=te=null,g):ot},g.padding=function(A0){return arguments.length?(At=A0,F=te=null,g):At},g.sortGroups=function(A0){return arguments.length?(ca=A0,F=te=null,g):ca},g.sortSubgroups=function(A0){return arguments.length?(Er=A0,F=null,g):Er},g.sortChords=function(A0){return arguments.length?(Lp=A0,F&&Yp(),g):Lp},g.chords=function(){return F||Wp(),F},g.groups=function(){return te||Wp(),te},g},v.layout.force=function(){var g={},F=v.dispatch("start","tick","end"),te,ot=[1,1],_t,At,ca=.9,Er=fw,Lp=S5,Wp=-30,Yp=pw,A0=.1,L0=.64,rm=[],xm=[],N0,K0,em;function vm(nm){return function(d1,n,i,u){if(d1.point!==nm){var C=d1.cx-nm.x,re=d1.cy-nm.y,st=u-n,ha=C*C+re*re;if(st*st/L0<ha){if(ha<Yp){var qp=d1.charge/ha;nm.px-=C*qp,nm.py-=re*qp}return!0}if(d1.point&&ha&&ha<Yp){var qp=d1.pointCharge/ha;nm.px-=C*qp,nm.py-=re*qp}}return!d1.charge}}g.tick=function(){if((At*=.99)<.005)return te=null,F.end({type:"end",alpha:At=0}),!0;var nm=rm.length,d1=xm.length,n,i,u,C,re,st,ha,qp,q0;for(i=0;i<d1;++i)u=xm[i],C=u.source,re=u.target,qp=re.x-C.x,q0=re.y-C.y,(st=qp*qp+q0*q0)&&(st=At*K0[i]*((st=Math.sqrt(st))-N0[i])/st,qp*=st,q0*=st,re.x-=qp*(ha=C.weight+re.weight?C.weight/(C.weight+re.weight):.5),re.y-=q0*ha,C.x+=qp*(ha=1-ha),C.y+=q0*ha);if((ha=At*A0)&&(qp=ot[0]/2,q0=ot[1]/2,i=-1,ha))for(;++i<nm;)u=rm[i],u.x+=(qp-u.x)*ha,u.y+=(q0-u.y)*ha;if(Wp)for(Q_(n=v.geom.quadtree(rm),At,em),i=-1;++i<nm;)(u=rm[i]).fixed||n.visit(vm(u));for(i=-1;++i<nm;)u=rm[i],u.fixed?(u.x=u.px,u.y=u.py):(u.x-=(u.px-(u.px=u.x))*ca,u.y-=(u.py-(u.py=u.y))*ca);F.tick({type:"tick",alpha:At})},g.nodes=function(nm){return arguments.length?(rm=nm,g):rm},g.links=function(nm){return arguments.length?(xm=nm,g):xm},g.size=function(nm){return arguments.length?(ot=nm,g):ot},g.linkDistance=function(nm){return arguments.length?(Er=typeof nm=="function"?nm:+nm,g):Er},g.distance=g.linkDistance,g.linkStrength=function(nm){return arguments.length?(Lp=typeof nm=="function"?nm:+nm,g):Lp},g.friction=function(nm){return arguments.length?(ca=+nm,g):ca},g.charge=function(nm){return arguments.length?(Wp=typeof nm=="function"?nm:+nm,g):Wp},g.chargeDistance=function(nm){return arguments.length?(Yp=nm*nm,g):Math.sqrt(Yp)},g.gravity=function(nm){return arguments.length?(A0=+nm,g):A0},g.theta=function(nm){return arguments.length?(L0=nm*nm,g):Math.sqrt(L0)},g.alpha=function(nm){return arguments.length?(nm=+nm,At?nm>0?At=nm:(te.c=null,te.t=NaN,te=null,F.end({type:"end",alpha:At=0})):nm>0&&(F.start({type:"start",alpha:At=nm}),te=B1(g.tick)),g):At},g.start=function(){var nm,d1=rm.length,n=xm.length,i=ot[0],u=ot[1],C,re;for(nm=0;nm<d1;++nm)(re=rm[nm]).index=nm,re.weight=0;for(nm=0;nm<n;++nm)re=xm[nm],typeof re.source=="number"&&(re.source=rm[re.source]),typeof re.target=="number"&&(re.target=rm[re.target]),++re.source.weight,++re.target.weight;for(nm=0;nm<d1;++nm)re=rm[nm],isNaN(re.x)&&(re.x=st("x",i)),isNaN(re.y)&&(re.y=st("y",u)),isNaN(re.px)&&(re.px=re.x),isNaN(re.py)&&(re.py=re.y);if(N0=[],typeof Er=="function")for(nm=0;nm<n;++nm)N0[nm]=+Er.call(this,xm[nm],nm);else for(nm=0;nm<n;++nm)N0[nm]=Er;if(K0=[],typeof Lp=="function")for(nm=0;nm<n;++nm)K0[nm]=+Lp.call(this,xm[nm],nm);else for(nm=0;nm<n;++nm)K0[nm]=Lp;if(em=[],typeof Wp=="function")for(nm=0;nm<d1;++nm)em[nm]=+Wp.call(this,rm[nm],nm);else for(nm=0;nm<d1;++nm)em[nm]=Wp;function st(ha,qp){if(!C){for(C=new Array(d1),Gm=0;Gm<d1;++Gm)C[Gm]=[];for(Gm=0;Gm<n;++Gm){var q0=xm[Gm];C[q0.source.index].push(q0.target),C[q0.target.index].push(q0.source)}}for(var Dm=C[nm],Gm=-1,pm=Dm.length,_m;++Gm<pm;)if(!isNaN(_m=Dm[Gm][ha]))return _m;return Math.random()*qp}return g.resume()},g.resume=function(){return g.alpha(.1)},g.stop=function(){return g.alpha(0)},g.drag=function(){if(_t||(_t=v.behavior.drag().origin(dt).on("dragstart.force",K_).on("drag.force",ym).on("dragend.force",b5)),!arguments.length)return _t;this.on("mouseover.force",w5).on("mouseout.force",Vv).call(_t)};function ym(nm){nm.px=v.event.x,nm.py=v.event.y,g.resume()}return v.rebind(g,F,"on")};function K_(g){g.fixed|=2}function b5(g){g.fixed&=-7}function w5(g){g.fixed|=4,g.px=g.x,g.py=g.y}function Vv(g){g.fixed&=-5}function Q_(g,F,te){var ot=0,_t=0;if(g.charge=0,!g.leaf)for(var At=g.nodes,ca=At.length,Er=-1,Lp;++Er<ca;)Lp=At[Er],Lp!=null&&(Q_(Lp,F,te),g.charge+=Lp.charge,ot+=Lp.charge*Lp.cx,_t+=Lp.charge*Lp.cy);if(g.point){g.leaf||(g.point.x+=Math.random()-.5,g.point.y+=Math.random()-.5);var Wp=F*te[g.point.index];g.charge+=g.pointCharge=Wp,ot+=Wp*g.point.x,_t+=Wp*g.point.y}g.cx=ot/g.charge,g.cy=_t/g.charge}var fw=20,S5=1,pw=1/0;v.layout.hierarchy=function(){var g=eb,F=I2,te=u3;function ot(_t){var At=[_t],ca=[],Er;for(_t.depth=0;(Er=At.pop())!=null;)if(ca.push(Er),(Wp=F.call(ot,Er,Er.depth))&&(Lp=Wp.length)){for(var Lp,Wp,Yp;--Lp>=0;)At.push(Yp=Wp[Lp]),Yp.parent=Er,Yp.depth=Er.depth+1;te&&(Er.value=0),Er.children=Wp}else te&&(Er.value=+te.call(ot,Er,Er.depth)||0),delete Er.children;return Qy(_t,function(A0){var L0,rm;g&&(L0=A0.children)&&L0.sort(g),te&&(rm=A0.parent)&&(rm.value+=A0.value)}),ca}return ot.sort=function(_t){return arguments.length?(g=_t,ot):g},ot.children=function(_t){return arguments.length?(F=_t,ot):F},ot.value=function(_t){return arguments.length?(te=_t,ot):te},ot.revalue=function(_t){return te&&(p_(_t,function(At){At.children&&(At.value=0)}),Qy(_t,function(At){var ca;At.children||(At.value=+te.call(ot,At,At.depth)||0),(ca=At.parent)&&(ca.value+=At.value)})),_t},ot};function f_(g,F){return v.rebind(g,F,"sort","children","value"),g.nodes=g,g.links=d3,g}function p_(g,F){for(var te=[g];(g=te.pop())!=null;)if(F(g),(_t=g.children)&&(ot=_t.length))for(var ot,_t;--ot>=0;)te.push(_t[ot])}function Qy(g,F){for(var te=[g],ot=[];(g=te.pop())!=null;)if(ot.push(g),(ca=g.children)&&(At=ca.length))for(var _t=-1,At,ca;++_t<At;)te.push(ca[_t]);for(;(g=ot.pop())!=null;)F(g)}function I2(g){return g.children}function u3(g){return g.value}function eb(g,F){return F.value-g.value}function d3(g){return v.merge(g.map(function(F){return(F.children||[]).map(function(te){return{source:F,target:te}})}))}v.layout.partition=function(){var g=v.layout.hierarchy(),F=[1,1];function te(At,ca,Er,Lp){var Wp=At.children;if(At.x=ca,At.y=At.depth*Lp,At.dx=Er,At.dy=Lp,Wp&&(A0=Wp.length)){var Yp=-1,A0,L0,rm;for(Er=At.value?Er/At.value:0;++Yp<A0;)te(L0=Wp[Yp],ca,rm=L0.value*Er,Lp),ca+=rm}}function ot(At){var ca=At.children,Er=0;if(ca&&(Wp=ca.length))for(var Lp=-1,Wp;++Lp<Wp;)Er=Math.max(Er,ot(ca[Lp]));return 1+Er}function _t(At,ca){var Er=g.call(this,At,ca);return te(Er[0],0,F[0],F[1]/ot(Er[0])),Er}return _t.size=function(At){return arguments.length?(F=At,_t):F},f_(_t,g)},v.layout.pie=function(){var g=Number,F=Nx,te=0,ot=Sr,_t=0;function At(ca){var Er=ca.length,Lp=ca.map(function(vm,ym){return+g.call(At,vm,ym)}),Wp=+(typeof te=="function"?te.apply(this,arguments):te),Yp=(typeof ot=="function"?ot.apply(this,arguments):ot)-Wp,A0=Math.min(Math.abs(Yp)/Er,+(typeof _t=="function"?_t.apply(this,arguments):_t)),L0=A0*(Yp<0?-1:1),rm=v.sum(Lp),xm=rm?(Yp-Er*L0)/rm:0,N0=v.range(Er),K0=[],em;return F!=null&&N0.sort(F===Nx?function(vm,ym){return Lp[ym]-Lp[vm]}:function(vm,ym){return F(ca[vm],ca[ym])}),N0.forEach(function(vm){K0[vm]={data:ca[vm],value:em=Lp[vm],startAngle:Wp,endAngle:Wp+=em*xm+L0,padAngle:A0}}),K0}return At.value=function(ca){return arguments.length?(g=ca,At):g},At.sort=function(ca){return arguments.length?(F=ca,At):F},At.startAngle=function(ca){return arguments.length?(te=ca,At):te},At.endAngle=function(ca){return arguments.length?(ot=ca,At):ot},At.padAngle=function(ca){return arguments.length?(_t=ca,At):_t},At};var Nx={};v.layout.stack=function(){var g=dt,F=tb,te=rb,ot=mw,_t=wx,At=m_;function ca(Er,Lp){if(!(xm=Er.length))return Er;var Wp=Er.map(function(vm,ym){return g.call(ca,vm,ym)}),Yp=Wp.map(function(vm){return vm.map(function(ym,nm){return[_t.call(ca,ym,nm),At.call(ca,ym,nm)]})}),A0=F.call(ca,Yp,Lp);Wp=v.permute(Wp,A0),Yp=v.permute(Yp,A0);var L0=te.call(ca,Yp,Lp),rm=Wp[0].length,xm,N0,K0,em;for(K0=0;K0<rm;++K0)for(ot.call(ca,Wp[0][K0],em=L0[K0],Yp[0][K0][1]),N0=1;N0<xm;++N0)ot.call(ca,Wp[N0][K0],em+=Yp[N0-1][K0][1],Yp[N0][K0][1]);return Er}return ca.values=function(Er){return arguments.length?(g=Er,ca):g},ca.order=function(Er){return arguments.length?(F=typeof Er=="function"?Er:T5.get(Er)||tb,ca):F},ca.offset=function(Er){return arguments.length?(te=typeof Er=="function"?Er:M5.get(Er)||rb,ca):te},ca.x=function(Er){return arguments.length?(_t=Er,ca):_t},ca.y=function(Er){return arguments.length?(At=Er,ca):At},ca.out=function(Er){return arguments.length?(ot=Er,ca):ot},ca};function wx(g){return g.x}function m_(g){return g.y}function mw(g,F,te){g.y0=F,g.y=te}var T5=v.map({"inside-out":function(g){var F=g.length,te,ot,_t=g.map(gw),At=g.map(h3),ca=v.range(F).sort(function(A0,L0){return _t[A0]-_t[L0]}),Er=0,Lp=0,Wp=[],Yp=[];for(te=0;te<F;++te)ot=ca[te],Er<Lp?(Er+=At[ot],Wp.push(ot)):(Lp+=At[ot],Yp.push(ot));return Yp.reverse().concat(Wp)},reverse:function(g){return v.range(g.length).reverse()},default:tb}),M5=v.map({silhouette:function(g){var F=g.length,te=g[0].length,ot=[],_t=0,At,ca,Er,Lp=[];for(ca=0;ca<te;++ca){for(At=0,Er=0;At<F;At++)Er+=g[At][ca][1];Er>_t&&(_t=Er),ot.push(Er)}for(ca=0;ca<te;++ca)Lp[ca]=(_t-ot[ca])/2;return Lp},wiggle:function(g){var F=g.length,te=g[0],ot=te.length,_t,At,ca,Er,Lp,Wp,Yp,A0,L0,rm=[];for(rm[0]=A0=L0=0,At=1;At<ot;++At){for(_t=0,Er=0;_t<F;++_t)Er+=g[_t][At][1];for(_t=0,Lp=0,Yp=te[At][0]-te[At-1][0];_t<F;++_t){for(ca=0,Wp=(g[_t][At][1]-g[_t][At-1][1])/(2*Yp);ca<_t;++ca)Wp+=(g[ca][At][1]-g[ca][At-1][1])/Yp;Lp+=Wp*g[_t][At][1]}rm[At]=A0-=Er?Lp/Er*Yp:0,A0<L0&&(L0=A0)}for(At=0;At<ot;++At)rm[At]-=L0;return rm},expand:function(g){var F=g.length,te=g[0].length,ot=1/F,_t,At,ca,Er=[];for(At=0;At<te;++At){for(_t=0,ca=0;_t<F;_t++)ca+=g[_t][At][1];if(ca)for(_t=0;_t<F;_t++)g[_t][At][1]/=ca;else for(_t=0;_t<F;_t++)g[_t][At][1]=ot}for(At=0;At<te;++At)Er[At]=0;return Er},zero:rb});function tb(g){return v.range(g.length)}function rb(g){for(var F=-1,te=g[0].length,ot=[];++F<te;)ot[F]=0;return ot}function gw(g){for(var F=1,te=0,ot=g[0][1],_t,At=g.length;F<At;++F)(_t=g[F][1])>ot&&(te=F,ot=_t);return te}function h3(g){return g.reduce(E5,0)}function E5(g,F){return g+F[1]}v.layout.histogram=function(){var g=!0,F=Number,te=f3,ot=A5;function _t(At,ca){for(var Er=[],Lp=At.map(F,this),Wp=te.call(this,Lp,ca),Yp=ot.call(this,Wp,Lp,ca),A0,ca=-1,L0=Lp.length,rm=Yp.length-1,xm=g?1:1/L0,N0;++ca<rm;)A0=Er[ca]=[],A0.dx=Yp[ca+1]-(A0.x=Yp[ca]),A0.y=0;if(rm>0)for(ca=-1;++ca<L0;)N0=Lp[ca],N0>=Wp[0]&&N0<=Wp[1]&&(A0=Er[v.bisect(Yp,N0,1,rm)-1],A0.y+=xm,A0.push(At[ca]));return Er}return _t.value=function(At){return arguments.length?(F=At,_t):F},_t.range=function(At){return arguments.length?(te=D0(At),_t):te},_t.bins=function(At){return arguments.length?(ot=typeof At=="number"?function(ca){return C5(ca,At)}:D0(At),_t):ot},_t.frequency=function(At){return arguments.length?(g=!!At,_t):g},_t};function A5(g,F){return C5(g,Math.ceil(Math.log(F.length)/Math.LN2+1))}function C5(g,F){for(var te=-1,ot=+g[0],_t=(g[1]-ot)/F,At=[];++te<=F;)At[te]=_t*te+ot;return At}function f3(g){return[v.min(g),v.max(g)]}v.layout.pack=function(){var g=v.layout.hierarchy().sort(p3),F=0,te=[1,1],ot;function _t(At,ca){var Er=g.call(this,At,ca),Lp=Er[0],Wp=te[0],Yp=te[1],A0=ot==null?Math.sqrt:typeof ot=="function"?ot:function(){return ot};if(Lp.x=Lp.y=0,Qy(Lp,function(rm){rm.r=+A0(rm.value)}),Qy(Lp,D5),F){var L0=F*(ot?1:Math.max(2*Lp.r/Wp,2*Lp.r/Yp))/2;Qy(Lp,function(rm){rm.r+=L0}),Qy(Lp,D5),Qy(Lp,function(rm){rm.r-=L0})}return nb(Lp,Wp/2,Yp/2,ot?1:1/Math.max(2*Lp.r/Wp,2*Lp.r/Yp)),Er}return _t.size=function(At){return arguments.length?(te=At,_t):te},_t.radius=function(At){return arguments.length?(ot=At==null||typeof At=="function"?At:+At,_t):ot},_t.padding=function(At){return arguments.length?(F=+At,_t):F},f_(_t,g)};function p3(g,F){return g.value-F.value}function m3(g,F){var te=g._pack_next;g._pack_next=F,F._pack_prev=g,F._pack_next=te,te._pack_prev=F}function R5(g,F){g._pack_next=F,F._pack_prev=g}function U2(g,F){var te=F.x-g.x,ot=F.y-g.y,_t=g.r+F.r;return .999*_t*_t>te*te+ot*ot}function D5(g){if(!(F=g.children)||!(L0=F.length))return;var F,te=1/0,ot=-1/0,_t=1/0,At=-1/0,ca,Er,Lp,Wp,Yp,A0,L0;function rm(nm){te=Math.min(nm.x-nm.r,te),ot=Math.max(nm.x+nm.r,ot),_t=Math.min(nm.y-nm.r,_t),At=Math.max(nm.y+nm.r,At)}if(F.forEach(L5),ca=F[0],ca.x=-ca.r,ca.y=0,rm(ca),L0>1&&(Er=F[1],Er.x=Er.r,Er.y=0,rm(Er),L0>2))for(Lp=F[2],g_(ca,Er,Lp),rm(Lp),m3(ca,Lp),ca._pack_prev=Lp,m3(Lp,Er),Er=ca._pack_next,Wp=3;Wp<L0;Wp++){g_(ca,Er,Lp=F[Wp]);var xm=0,N0=1,K0=1;for(Yp=Er._pack_next;Yp!==Er;Yp=Yp._pack_next,N0++)if(U2(Yp,Lp)){xm=1;break}if(xm==1)for(A0=ca._pack_prev;A0!==Yp._pack_prev&&!U2(A0,Lp);A0=A0._pack_prev,K0++);xm?(N0<K0||N0==K0&&Er.r<ca.r?R5(ca,Er=Yp):R5(ca=A0,Er),Wp--):(m3(ca,Lp),Er=Lp,rm(Lp))}var em=(te+ot)/2,vm=(_t+At)/2,ym=0;for(Wp=0;Wp<L0;Wp++)Lp=F[Wp],Lp.x-=em,Lp.y-=vm,ym=Math.max(ym,Lp.r+Math.sqrt(Lp.x*Lp.x+Lp.y*Lp.y));g.r=ym,F.forEach(bv)}function L5(g){g._pack_next=g._pack_prev=g}function bv(g){delete g._pack_next,delete g._pack_prev}function nb(g,F,te,ot){var _t=g.children;if(g.x=F+=ot*g.x,g.y=te+=ot*g.y,g.r*=ot,_t)for(var At=-1,ca=_t.length;++At<ca;)nb(_t[At],F,te,ot)}function g_(g,F,te){var ot=g.r+te.r,_t=F.x-g.x,At=F.y-g.y;if(ot&&(_t||At)){var ca=F.r+te.r,Er=_t*_t+At*At;ca*=ca,ot*=ot;var Lp=.5+(ot-ca)/(2*Er),Wp=Math.sqrt(Math.max(0,2*ca*(ot+Er)-(ot-=Er)*ot-ca*ca))/(2*Er);te.x=g.x+Lp*_t+Wp*At,te.y=g.y+Lp*At-Wp*_t}else te.x=g.x+ot,te.y=g.y}v.layout.tree=function(){var g=v.layout.hierarchy().sort(null).value(null),F=ab,te=[1,1],ot=null;function _t(Yp,A0){var L0=g.call(this,Yp,A0),rm=L0[0],xm=At(rm);if(Qy(xm,ca),xm.parent.m=-xm.z,p_(xm,Er),ot)p_(rm,Wp);else{var N0=rm,K0=rm,em=rm;p_(rm,function(d1){d1.x<N0.x&&(N0=d1),d1.x>K0.x&&(K0=d1),d1.depth>em.depth&&(em=d1)});var vm=F(N0,K0)/2-N0.x,ym=te[0]/(K0.x+F(K0,N0)/2+vm),nm=te[1]/(em.depth||1);p_(rm,function(d1){d1.x=(d1.x+vm)*ym,d1.y=d1.depth*nm})}return L0}function At(Yp){for(var A0={A:null,children:[Yp]},L0=[A0],rm;(rm=L0.pop())!=null;)for(var xm=rm.children,N0,K0=0,em=xm.length;K0<em;++K0)L0.push((xm[K0]=N0={_:xm[K0],parent:rm,children:(N0=xm[K0].children)&&N0.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:K0}).a=N0);return A0.children[0]}function ca(Yp){var A0=Yp.children,L0=Yp.parent.children,rm=Yp.i?L0[Yp.i-1]:null;if(A0.length){ob(Yp);var xm=(A0[0].z+A0[A0.length-1].z)/2;rm?(Yp.z=rm.z+F(Yp._,rm._),Yp.m=Yp.z-xm):Yp.z=xm}else rm&&(Yp.z=rm.z+F(Yp._,rm._));Yp.parent.A=Lp(Yp,rm,Yp.parent.A||L0[0])}function Er(Yp){Yp._.x=Yp.z+Yp.parent.m,Yp.m+=Yp.parent.m}function Lp(Yp,A0,L0){if(A0){for(var rm=Yp,xm=Yp,N0=A0,K0=rm.parent.children[0],em=rm.m,vm=xm.m,ym=N0.m,nm=K0.m,d1;N0=v_(N0),rm=ib(rm),N0&&rm;)K0=ib(K0),xm=v_(xm),xm.a=Yp,d1=N0.z+ym-rm.z-em+F(N0._,rm._),d1>0&&(y_(vw(N0,Yp,L0),Yp,d1),em+=d1,vm+=d1),ym+=N0.m,em+=rm.m,nm+=K0.m,vm+=xm.m;N0&&!v_(xm)&&(xm.t=N0,xm.m+=ym-vm),rm&&!ib(K0)&&(K0.t=rm,K0.m+=em-nm,L0=Yp)}return L0}function Wp(Yp){Yp.x*=te[0],Yp.y=Yp.depth*te[1]}return _t.separation=function(Yp){return arguments.length?(F=Yp,_t):F},_t.size=function(Yp){return arguments.length?(ot=(te=Yp)==null?Wp:null,_t):ot?null:te},_t.nodeSize=function(Yp){return arguments.length?(ot=(te=Yp)==null?null:Wp,_t):ot?te:null},f_(_t,g)};function ab(g,F){return g.parent==F.parent?1:2}function ib(g){var F=g.children;return F.length?F[0]:g.t}function v_(g){var F=g.children,te;return(te=F.length)?F[te-1]:g.t}function y_(g,F,te){var ot=te/(F.i-g.i);F.c-=ot,F.s+=te,g.c+=ot,F.z+=te,F.m+=te}function ob(g){for(var F=0,te=0,ot=g.children,_t=ot.length,At;--_t>=0;)At=ot[_t],At.z+=F,At.m+=F,F+=At.s+(te+=At.c)}function vw(g,F,te){return g.a.parent===F.parent?g.a:te}v.layout.cluster=function(){var g=v.layout.hierarchy().sort(null).value(null),F=ab,te=[1,1],ot=!1;function _t(At,ca){var Er=g.call(this,At,ca),Lp=Er[0],Wp,Yp=0;Qy(Lp,function(N0){var K0=N0.children;K0&&K0.length?(N0.x=yw(K0),N0.y=k5(K0)):(N0.x=Wp?Yp+=F(N0,Wp):0,N0.y=0,Wp=N0)});var A0=N5(Lp),L0=g3(Lp),rm=A0.x-F(A0,L0)/2,xm=L0.x+F(L0,A0)/2;return Qy(Lp,ot?function(N0){N0.x=(N0.x-Lp.x)*te[0],N0.y=(Lp.y-N0.y)*te[1]}:function(N0){N0.x=(N0.x-rm)/(xm-rm)*te[0],N0.y=(1-(Lp.y?N0.y/Lp.y:1))*te[1]}),Er}return _t.separation=function(At){return arguments.length?(F=At,_t):F},_t.size=function(At){return arguments.length?(ot=(te=At)==null,_t):ot?null:te},_t.nodeSize=function(At){return arguments.length?(ot=(te=At)!=null,_t):ot?te:null},f_(_t,g)};function k5(g){return 1+v.max(g,function(F){return F.y})}function yw(g){return g.reduce(function(F,te){return F+te.x},0)/g.length}function N5(g){var F=g.children;return F&&F.length?N5(F[0]):g}function g3(g){var F=g.children,te;return F&&(te=F.length)?g3(F[te-1]):g}v.layout.treemap=function(){var g=v.layout.hierarchy(),F=Math.round,te=[1,1],ot=null,_t=sb,At=!1,ca,Er="squarify",Lp=.5*(1+Math.sqrt(5));function Wp(N0,K0){for(var em=-1,vm=N0.length,ym,nm;++em<vm;)nm=(ym=N0[em]).value*(K0<0?0:K0),ym.area=isNaN(nm)||nm<=0?0:nm}function Yp(N0){var K0=N0.children;if(K0&&K0.length){var em=_t(N0),vm=[],ym=K0.slice(),nm,d1=1/0,n,i=Er==="slice"?em.dx:Er==="dice"?em.dy:Er==="slice-dice"?N0.depth&1?em.dy:em.dx:Math.min(em.dx,em.dy),u;for(Wp(ym,em.dx*em.dy/N0.value),vm.area=0;(u=ym.length)>0;)vm.push(nm=ym[u-1]),vm.area+=nm.area,Er!=="squarify"||(n=L0(vm,i))<=d1?(ym.pop(),d1=n):(vm.area-=vm.pop().area,rm(vm,i,em,!1),i=Math.min(em.dx,em.dy),vm.length=vm.area=0,d1=1/0);vm.length&&(rm(vm,i,em,!0),vm.length=vm.area=0),K0.forEach(Yp)}}function A0(N0){var K0=N0.children;if(K0&&K0.length){var em=_t(N0),vm=K0.slice(),ym,nm=[];for(Wp(vm,em.dx*em.dy/N0.value),nm.area=0;ym=vm.pop();)nm.push(ym),nm.area+=ym.area,ym.z!=null&&(rm(nm,ym.z?em.dx:em.dy,em,!vm.length),nm.length=nm.area=0);K0.forEach(A0)}}function L0(N0,K0){for(var em=N0.area,vm,ym=0,nm=1/0,d1=-1,n=N0.length;++d1<n;)(vm=N0[d1].area)&&(vm<nm&&(nm=vm),vm>ym&&(ym=vm));return em*=em,K0*=K0,em?Math.max(K0*ym*Lp/em,em/(K0*nm*Lp)):1/0}function rm(N0,K0,em,vm){var ym=-1,nm=N0.length,d1=em.x,n=em.y,i=K0?F(N0.area/K0):0,u;if(K0==em.dx){for((vm||i>em.dy)&&(i=em.dy);++ym<nm;)u=N0[ym],u.x=d1,u.y=n,u.dy=i,d1+=u.dx=Math.min(em.x+em.dx-d1,i?F(u.area/i):0);u.z=!0,u.dx+=em.x+em.dx-d1,em.y+=i,em.dy-=i}else{for((vm||i>em.dx)&&(i=em.dx);++ym<nm;)u=N0[ym],u.x=d1,u.y=n,u.dx=i,n+=u.dy=Math.min(em.y+em.dy-n,i?F(u.area/i):0);u.z=!1,u.dy+=em.y+em.dy-n,em.x+=i,em.dx-=i}}function xm(N0){var K0=ca||g(N0),em=K0[0];return em.x=em.y=0,em.value?(em.dx=te[0],em.dy=te[1]):em.dx=em.dy=0,ca&&g.revalue(em),Wp([em],em.dx*em.dy/em.value),(ca?A0:Yp)(em),At&&(ca=K0),K0}return xm.size=function(N0){return arguments.length?(te=N0,xm):te},xm.padding=function(N0){if(!arguments.length)return ot;function K0(ym){var nm=N0.call(xm,ym,ym.depth);return nm==null?sb(ym):Hv(ym,typeof nm=="number"?[nm,nm,nm,nm]:nm)}function em(ym){return Hv(ym,N0)}var vm;return _t=(ot=N0)==null?sb:(vm=typeof N0)=="function"?K0:(vm==="number"&&(N0=[N0,N0,N0,N0]),em),xm},xm.round=function(N0){return arguments.length?(F=N0?Math.round:Number,xm):F!=Number},xm.sticky=function(N0){return arguments.length?(At=N0,ca=null,xm):At},xm.ratio=function(N0){return arguments.length?(Lp=N0,xm):Lp},xm.mode=function(N0){return arguments.length?(Er=N0+"",xm):Er},f_(xm,g)};function sb(g){return{x:g.x,y:g.y,dx:g.dx,dy:g.dy}}function Hv(g,F){var te=g.x+F[3],ot=g.y+F[0],_t=g.dx-F[1]-F[3],At=g.dy-F[0]-F[2];return _t<0&&(te+=_t/2,_t=0),At<0&&(ot+=At/2,At=0),{x:te,y:ot,dx:_t,dy:At}}v.random={normal:function(g,F){var te=arguments.length;return te<2&&(F=1),te<1&&(g=0),function(){var ot,_t,At;do ot=Math.random()*2-1,_t=Math.random()*2-1,At=ot*ot+_t*_t;while(!At||At>1);return g+F*ot*Math.sqrt(-2*Math.log(At)/At)}},logNormal:function(){var g=v.random.normal.apply(v,arguments);return function(){return Math.exp(g())}},bates:function(g){var F=v.random.irwinHall(g);return function(){return F()/g}},irwinHall:function(g){return function(){for(var F=0,te=0;te<g;te++)F+=Math.random();return F}}},v.scale={};function F2(g){var F=g[0],te=g[g.length-1];return F<te?[F,te]:[te,F]}function Ay(g){return g.rangeExtent?g.rangeExtent():F2(g.range())}function xw(g,F,te,ot){var _t=te(g[0],g[1]),At=ot(F[0],F[1]);return function(ca){return At(_t(ca))}}function lb(g,F){var te=0,ot=g.length-1,_t=g[te],At=g[ot],ca;return At<_t&&(ca=te,te=ot,ot=ca,ca=_t,_t=At,At=ca),g[te]=F.floor(_t),g[ot]=F.ceil(At),g}function O5(g){return g?{floor:function(F){return Math.floor(F/g)*g},ceil:function(F){return Math.ceil(F/g)*g}}:v3}var v3={floor:dt,ceil:dt};function y3(g,F,te,ot){var _t=[],At=[],ca=0,Er=Math.min(g.length,F.length)-1;for(g[Er]<g[0]&&(g=g.slice().reverse(),F=F.slice().reverse());++ca<=Er;)_t.push(te(g[ca-1],g[ca])),At.push(ot(F[ca-1],F[ca]));return function(Lp){var Wp=v.bisect(g,Lp,1,Er)-1;return At[Wp](_t[Wp](Lp))}}v.scale.linear=function(){return x_([0,1],[0,1],dy,!1)};function x_(g,F,te,ot){var _t,At;function ca(){var Lp=Math.min(g.length,F.length)>2?y3:xw,Wp=ot?y5:v5;return _t=Lp(g,F,Wp,te),At=Lp(F,g,Wp,dy),Er}function Er(Lp){return _t(Lp)}return Er.invert=function(Lp){return At(Lp)},Er.domain=function(Lp){return arguments.length?(g=Lp.map(Number),ca()):g},Er.range=function(Lp){return arguments.length?(F=Lp,ca()):F},Er.rangeRound=function(Lp){return Er.range(Lp).interpolate(o3)},Er.clamp=function(Lp){return arguments.length?(ot=Lp,ca()):ot},Er.interpolate=function(Lp){return arguments.length?(te=Lp,ca()):te},Er.ticks=function(Lp){return b_(g,Lp)},Er.tickFormat=function(Lp,Wp){return d3_scale_linearTickFormat(g,Lp,Wp)},Er.nice=function(Lp){return _3(g,Lp),ca()},Er.copy=function(){return x_(g,F,te,ot)},ca()}function x3(g,F){return v.rebind(g,F,"range","rangeRound","interpolate","clamp")}function _3(g,F){return lb(g,O5(__(g,F)[2])),lb(g,O5(__(g,F)[2])),g}function __(g,F){F==null&&(F=10);var te=F2(g),ot=te[1]-te[0],_t=Math.pow(10,Math.floor(Math.log(ot/F)/Math.LN10)),At=F/ot*_t;return At<=.15?_t*=10:At<=.35?_t*=5:At<=.75&&(_t*=2),te[0]=Math.ceil(te[0]/_t)*_t,te[1]=Math.floor(te[1]/_t)*_t+_t*.5,te[2]=_t,te}function b_(g,F){return v.range.apply(v,__(g,F))}v.scale.log=function(){return z5(v.scale.linear().domain([0,1]),10,!0,[1,10])};function z5(g,F,te,ot){function _t(Er){return(te?Math.log(Er<0?0:Er):-Math.log(Er>0?0:-Er))/Math.log(F)}function At(Er){return te?Math.pow(F,Er):-Math.pow(F,-Er)}function ca(Er){return g(_t(Er))}return ca.invert=function(Er){return At(g.invert(Er))},ca.domain=function(Er){return arguments.length?(te=Er[0]>=0,g.domain((ot=Er.map(Number)).map(_t)),ca):ot},ca.base=function(Er){return arguments.length?(F=+Er,g.domain(ot.map(_t)),ca):F},ca.nice=function(){var Er=lb(ot.map(_t),te?Math:P5);return g.domain(Er),ot=Er.map(At),ca},ca.ticks=function(){var Er=F2(ot),Lp=[],Wp=Er[0],Yp=Er[1],A0=Math.floor(_t(Wp)),L0=Math.ceil(_t(Yp)),rm=F%1?2:F;if(isFinite(L0-A0)){if(te){for(;A0<L0;A0++)for(var xm=1;xm<rm;xm++)Lp.push(At(A0)*xm);Lp.push(At(A0))}else for(Lp.push(At(A0));A0++<L0;)for(var xm=rm-1;xm>0;xm--)Lp.push(At(A0)*xm);for(A0=0;Lp[A0]<Wp;A0++);for(L0=Lp.length;Lp[L0-1]>Yp;L0--);Lp=Lp.slice(A0,L0)}return Lp},ca.copy=function(){return z5(g.copy(),F,te,ot)},x3(ca,g)}var P5={floor:function(g){return-Math.ceil(-g)},ceil:function(g){return-Math.floor(-g)}};v.scale.pow=function(){return I5(v.scale.linear(),1,[0,1])};function I5(g,F,te){var ot=w_(F),_t=w_(1/F);function At(ca){return g(ot(ca))}return At.invert=function(ca){return _t(g.invert(ca))},At.domain=function(ca){return arguments.length?(g.domain((te=ca.map(Number)).map(ot)),At):te},At.ticks=function(ca){return b_(te,ca)},At.tickFormat=function(ca,Er){return d3_scale_linearTickFormat(te,ca,Er)},At.nice=function(ca){return At.domain(_3(te,ca))},At.exponent=function(ca){return arguments.length?(ot=w_(F=ca),_t=w_(1/F),g.domain(te.map(ot)),At):F},At.copy=function(){return I5(g.copy(),F,te)},x3(At,g)}function w_(g){return function(F){return F<0?-Math.pow(-F,g):Math.pow(F,g)}}v.scale.sqrt=function(){return v.scale.pow().exponent(.5)},v.scale.ordinal=function(){return U5([],{t:"range",a:[[]]})};function U5(g,F){var te,ot,_t;function At(Er){return ot[((te.get(Er)||(F.t==="range"?te.set(Er,g.push(Er)):NaN))-1)%ot.length]}function ca(Er,Lp){return v.range(g.length).map(function(Wp){return Er+Lp*Wp})}return At.domain=function(Er){if(!arguments.length)return g;g=[],te=new H;for(var Lp=-1,Wp=Er.length,Yp;++Lp<Wp;)te.has(Yp=Er[Lp])||te.set(Yp,g.push(Yp));return At[F.t].apply(At,F.a)},At.range=function(Er){return arguments.length?(ot=Er,_t=0,F={t:"range",a:arguments},At):ot},At.rangePoints=function(Er,Lp){arguments.length<2&&(Lp=0);var Wp=Er[0],Yp=Er[1],A0=g.length<2?(Wp=(Wp+Yp)/2,0):(Yp-Wp)/(g.length-1+Lp);return ot=ca(Wp+A0*Lp/2,A0),_t=0,F={t:"rangePoints",a:arguments},At},At.rangeRoundPoints=function(Er,Lp){arguments.length<2&&(Lp=0);var Wp=Er[0],Yp=Er[1],A0=g.length<2?(Wp=Yp=Math.round((Wp+Yp)/2),0):(Yp-Wp)/(g.length-1+Lp)|0;return ot=ca(Wp+Math.round(A0*Lp/2+(Yp-Wp-(g.length-1+Lp)*A0)/2),A0),_t=0,F={t:"rangeRoundPoints",a:arguments},At},At.rangeBands=function(Er,Lp,Wp){arguments.length<2&&(Lp=0),arguments.length<3&&(Wp=Lp);var Yp=Er[1]<Er[0],A0=Er[Yp-0],L0=Er[1-Yp],rm=(L0-A0)/(g.length-Lp+2*Wp);return ot=ca(A0+rm*Wp,rm),Yp&&ot.reverse(),_t=rm*(1-Lp),F={t:"rangeBands",a:arguments},At},At.rangeRoundBands=function(Er,Lp,Wp){arguments.length<2&&(Lp=0),arguments.length<3&&(Wp=Lp);var Yp=Er[1]<Er[0],A0=Er[Yp-0],L0=Er[1-Yp],rm=Math.floor((L0-A0)/(g.length-Lp+2*Wp));return ot=ca(A0+Math.round((L0-A0-(g.length-Lp)*rm)/2),rm),Yp&&ot.reverse(),_t=Math.round(rm*(1-Lp)),F={t:"rangeRoundBands",a:arguments},At},At.rangeBand=function(){return _t},At.rangeExtent=function(){return F2(F.a[0])},At.copy=function(){return U5(g,F)},At.domain(g)}v.scale.category10=function(){return v.scale.ordinal().range(_w)},v.scale.category20=function(){return v.scale.ordinal().range(qx)},v.scale.category20b=function(){return v.scale.ordinal().range(F5)},v.scale.category20c=function(){return v.scale.ordinal().range(B5)};var _w=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(Ct),qx=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(Ct),F5=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(Ct),B5=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(Ct);v.scale.quantile=function(){return cb([],[])};function cb(g,F){var te;function ot(){var At=0,ca=F.length;for(te=[];++At<ca;)te[At-1]=v.quantile(g,At/ca);return _t}function _t(At){if(!isNaN(At=+At))return F[v.bisect(te,At)]}return _t.domain=function(At){return arguments.length?(g=At.map(j).filter(P).sort(L),ot()):g},_t.range=function(At){return arguments.length?(F=At,ot()):F},_t.quantiles=function(){return te},_t.invertExtent=function(At){return At=F.indexOf(At),At<0?[NaN,NaN]:[At>0?te[At-1]:g[0],At<te.length?te[At]:g[g.length-1]]},_t.copy=function(){return cb(g,F)},ot()}v.scale.quantize=function(){return j5(0,1,[0,1])};function j5(g,F,te){var ot,_t;function At(Er){return te[Math.max(0,Math.min(_t,Math.floor(ot*(Er-g))))]}function ca(){return ot=te.length/(F-g),_t=te.length-1,At}return At.domain=function(Er){return arguments.length?(g=+Er[0],F=+Er[Er.length-1],ca()):[g,F]},At.range=function(Er){return arguments.length?(te=Er,ca()):te},At.invertExtent=function(Er){return Er=te.indexOf(Er),Er=Er<0?NaN:Er/ot+g,[Er,Er+1/ot]},At.copy=function(){return j5(g,F,te)},ca()}v.scale.threshold=function(){return V5([.5],[0,1])};function V5(g,F){function te(ot){if(ot<=ot)return F[v.bisect(g,ot)]}return te.domain=function(ot){return arguments.length?(g=ot,te):g},te.range=function(ot){return arguments.length?(F=ot,te):F},te.invertExtent=function(ot){return ot=F.indexOf(ot),[g[ot-1],g[ot]]},te.copy=function(){return V5(g,F)},te}v.scale.identity=function(){return b3([0,1])};function b3(g){function F(te){return+te}return F.invert=F,F.domain=F.range=function(te){return arguments.length?(g=te.map(F),F):g},F.ticks=function(te){return b_(g,te)},F.tickFormat=function(te,ot){return d3_scale_linearTickFormat(g,te,ot)},F.copy=function(){return b3(g)},F}v.svg={};function w3(){return 0}v.svg.arc=function(){var g=bw,F=ux,te=w3,ot=B2,_t=ub,At=S3,ca=H5;function Er(){var Wp=Math.max(0,+g.apply(this,arguments)),Yp=Math.max(0,+F.apply(this,arguments)),A0=_t.apply(this,arguments)-Np,L0=At.apply(this,arguments)-Np,rm=Math.abs(L0-A0),xm=A0>L0?0:1;if(Yp<Wp&&(N0=Yp,Yp=Wp,Wp=N0),rm>=Rp)return Lp(Yp,xm)+(Wp?Lp(Wp,1-xm):"")+"Z";var N0,K0,em,vm,ym=0,nm=0,d1,n,i,u,C,re,st,ha,qp=[];if((vm=(+ca.apply(this,arguments)||0)/2)&&(em=ot===B2?Math.sqrt(Wp*Wp+Yp*Yp):+ot.apply(this,arguments),xm||(nm*=-1),Yp&&(nm=_0(em/Yp*Math.sin(vm))),Wp&&(ym=_0(em/Wp*Math.sin(vm)))),Yp){d1=Yp*Math.cos(A0+nm),n=Yp*Math.sin(A0+nm),i=Yp*Math.cos(L0-nm),u=Yp*Math.sin(L0-nm);var q0=Math.abs(L0-A0-2*nm)<=Ht?0:1;if(nm&&S_(d1,n,i,u)===xm^q0){var Dm=(A0+L0)/2;d1=Yp*Math.cos(Dm),n=Yp*Math.sin(Dm),i=u=null}}else d1=n=0;if(Wp){C=Wp*Math.cos(L0-ym),re=Wp*Math.sin(L0-ym),st=Wp*Math.cos(A0+ym),ha=Wp*Math.sin(A0+ym);var Gm=Math.abs(A0-L0+2*ym)<=Ht?0:1;if(ym&&S_(C,re,st,ha)===1-xm^Gm){var pm=(A0+L0)/2;C=Wp*Math.cos(pm),re=Wp*Math.sin(pm),st=ha=null}}else C=re=0;if(rm>Hp&&(N0=Math.min(Math.abs(Yp-Wp)/2,+te.apply(this,arguments)))>.001){K0=Wp<Yp^xm?0:1;var _m=N0,Cm=N0;if(rm<Ht){var G1=st==null?[C,re]:i==null?[d1,n]:Dg([d1,n],[st,ha],[i,u],[C,re]),hg=d1-G1[0],qg=n-G1[1],Em=i-G1[0],hm=u-G1[1],Om=1/Math.sin(Math.acos((hg*Em+qg*hm)/(Math.sqrt(hg*hg+qg*qg)*Math.sqrt(Em*Em+hm*hm)))/2),c1=Math.sqrt(G1[0]*G1[0]+G1[1]*G1[1]);Cm=Math.min(N0,(Wp-c1)/(Om-1)),_m=Math.min(N0,(Yp-c1)/(Om+1))}if(i!=null){var bg=Yx(st==null?[C,re]:[st,ha],[d1,n],Yp,_m,xm),Yg=Yx([i,u],[C,re],Yp,_m,xm);N0===_m?qp.push("M",bg[0],"A",_m,",",_m," 0 0,",K0," ",bg[1],"A",Yp,",",Yp," 0 ",1-xm^S_(bg[1][0],bg[1][1],Yg[1][0],Yg[1][1]),",",xm," ",Yg[1],"A",_m,",",_m," 0 0,",K0," ",Yg[0]):qp.push("M",bg[0],"A",_m,",",_m," 0 1,",K0," ",Yg[0])}else qp.push("M",d1,",",n);if(st!=null){var pg=Yx([d1,n],[st,ha],Wp,-Cm,xm),nv=Yx([C,re],i==null?[d1,n]:[i,u],Wp,-Cm,xm);N0===Cm?qp.push("L",nv[0],"A",Cm,",",Cm," 0 0,",K0," ",nv[1],"A",Wp,",",Wp," 0 ",xm^S_(nv[1][0],nv[1][1],pg[1][0],pg[1][1]),",",1-xm," ",pg[1],"A",Cm,",",Cm," 0 0,",K0," ",pg[0]):qp.push("L",nv[0],"A",Cm,",",Cm," 0 0,",K0," ",pg[0])}else qp.push("L",C,",",re)}else qp.push("M",d1,",",n),i!=null&&qp.push("A",Yp,",",Yp," 0 ",q0,",",xm," ",i,",",u),qp.push("L",C,",",re),st!=null&&qp.push("A",Wp,",",Wp," 0 ",Gm,",",1-xm," ",st,",",ha);return qp.push("Z"),qp.join("")}function Lp(Wp,Yp){return"M0,"+Wp+"A"+Wp+","+Wp+" 0 1,"+Yp+" 0,"+-Wp+"A"+Wp+","+Wp+" 0 1,"+Yp+" 0,"+Wp}return Er.innerRadius=function(Wp){return arguments.length?(g=D0(Wp),Er):g},Er.outerRadius=function(Wp){return arguments.length?(F=D0(Wp),Er):F},Er.cornerRadius=function(Wp){return arguments.length?(te=D0(Wp),Er):te},Er.padRadius=function(Wp){return arguments.length?(ot=Wp==B2?B2:D0(Wp),Er):ot},Er.startAngle=function(Wp){return arguments.length?(_t=D0(Wp),Er):_t},Er.endAngle=function(Wp){return arguments.length?(At=D0(Wp),Er):At},Er.padAngle=function(Wp){return arguments.length?(ca=D0(Wp),Er):ca},Er.centroid=function(){var Wp=(+g.apply(this,arguments)+ +F.apply(this,arguments))/2,Yp=(+_t.apply(this,arguments)+ +At.apply(this,arguments))/2-Np;return[Math.cos(Yp)*Wp,Math.sin(Yp)*Wp]},Er};var B2="auto";function bw(g){return g.innerRadius}function ux(g){return g.outerRadius}function ub(g){return g.startAngle}function S3(g){return g.endAngle}function H5(g){return g&&g.padAngle}function S_(g,F,te,ot){return(g-te)*F-(F-ot)*g>0?0:1}function Yx(g,F,te,ot,_t){var At=g[0]-F[0],ca=g[1]-F[1],Er=(_t?ot:-ot)/Math.sqrt(At*At+ca*ca),Lp=Er*ca,Wp=-Er*At,Yp=g[0]+Lp,A0=g[1]+Wp,L0=F[0]+Lp,rm=F[1]+Wp,xm=(Yp+L0)/2,N0=(A0+rm)/2,K0=L0-Yp,em=rm-A0,vm=K0*K0+em*em,ym=te-ot,nm=Yp*rm-L0*A0,d1=(em<0?-1:1)*Math.sqrt(Math.max(0,ym*ym*vm-nm*nm)),n=(nm*em-K0*d1)/vm,i=(-nm*K0-em*d1)/vm,u=(nm*em+K0*d1)/vm,C=(-nm*K0+em*d1)/vm,re=n-xm,st=i-N0,ha=u-xm,qp=C-N0;return re*re+st*st>ha*ha+qp*qp&&(n=u,i=C),[[n-Lp,i-Wp],[n*te/ym,i*te/ym]]}function ex(){return!0}function T3(g){var F=xg,te=Jg,ot=ex,_t=ky,At=_t.key,ca=.7;function Er(Lp){var Wp=[],Yp=[],A0=-1,L0=Lp.length,rm,xm=D0(F),N0=D0(te);function K0(){Wp.push("M",_t(g(Yp),ca))}for(;++A0<L0;)ot.call(this,rm=Lp[A0],A0)?Yp.push([+xm.call(this,rm,A0),+N0.call(this,rm,A0)]):Yp.length&&(K0(),Yp=[]);return Yp.length&&K0(),Wp.length?Wp.join(""):null}return Er.x=function(Lp){return arguments.length?(F=Lp,Er):F},Er.y=function(Lp){return arguments.length?(te=Lp,Er):te},Er.defined=function(Lp){return arguments.length?(ot=Lp,Er):ot},Er.interpolate=function(Lp){return arguments.length?(typeof Lp=="function"?At=_t=Lp:At=(_t=j2.get(Lp)||ky).key,Er):At},Er.tension=function(Lp){return arguments.length?(ca=Lp,Er):ca},Er}v.svg.line=function(){return T3(dt)};var j2=v.map({linear:ky,"linear-closed":G5,step:ww,"step-before":$x,"step-after":db,basis:W5,"basis-open":Ew,"basis-closed":X5,bundle:V2,cardinal:Mw,"cardinal-open":Sw,"cardinal-closed":Tw,monotone:C3});j2.forEach(function(g,F){F.key=g,F.closed=/-closed$/.test(g)});function ky(g){return g.length>1?g.join("L"):g+"Z"}function G5(g){return g.join("L")+"Z"}function ww(g){for(var F=0,te=g.length,ot=g[0],_t=[ot[0],",",ot[1]];++F<te;)_t.push("H",(ot[0]+(ot=g[F])[0])/2,"V",ot[1]);return te>1&&_t.push("H",ot[0]),_t.join("")}function $x(g){for(var F=0,te=g.length,ot=g[0],_t=[ot[0],",",ot[1]];++F<te;)_t.push("V",(ot=g[F])[1],"H",ot[0]);return _t.join("")}function db(g){for(var F=0,te=g.length,ot=g[0],_t=[ot[0],",",ot[1]];++F<te;)_t.push("H",(ot=g[F])[0],"V",ot[1]);return _t.join("")}function Sw(g,F){return g.length<4?ky(g):g[1]+hb(g.slice(1,-1),M3(g,F))}function Tw(g,F){return g.length<3?G5(g):g[0]+hb((g.push(g[0]),g),M3([g[g.length-2]].concat(g,[g[1]]),F))}function Mw(g,F){return g.length<3?ky(g):g[0]+hb(g,M3(g,F))}function hb(g,F){if(F.length<1||g.length!=F.length&&g.length!=F.length+2)return ky(g);var te=g.length!=F.length,ot="",_t=g[0],At=g[1],ca=F[0],Er=ca,Lp=1;if(te&&(ot+="Q"+(At[0]-ca[0]*2/3)+","+(At[1]-ca[1]*2/3)+","+At[0]+","+At[1],_t=g[1],Lp=2),F.length>1){Er=F[1],At=g[Lp],Lp++,ot+="C"+(_t[0]+ca[0])+","+(_t[1]+ca[1])+","+(At[0]-Er[0])+","+(At[1]-Er[1])+","+At[0]+","+At[1];for(var Wp=2;Wp<F.length;Wp++,Lp++)At=g[Lp],Er=F[Wp],ot+="S"+(At[0]-Er[0])+","+(At[1]-Er[1])+","+At[0]+","+At[1]}if(te){var Yp=g[Lp];ot+="Q"+(At[0]+Er[0]*2/3)+","+(At[1]+Er[1]*2/3)+","+Yp[0]+","+Yp[1]}return ot}function M3(g,F){for(var te=[],ot=(1-F)/2,_t,At=g[0],ca=g[1],Er=1,Lp=g.length;++Er<Lp;)_t=At,At=ca,ca=g[Er],te.push([ot*(ca[0]-_t[0]),ot*(ca[1]-_t[1])]);return te}function W5(g){if(g.length<3)return ky(g);var F=1,te=g.length,ot=g[0],_t=ot[0],At=ot[1],ca=[_t,_t,_t,(ot=g[1])[0]],Er=[At,At,At,ot[1]],Lp=[_t,",",At,"L",Vy(tx,ca),",",Vy(tx,Er)];for(g.push(g[te-1]);++F<=te;)ot=g[F],ca.shift(),ca.push(ot[0]),Er.shift(),Er.push(ot[1]),g2(Lp,ca,Er);return g.pop(),Lp.push("L",ot),Lp.join("")}function Ew(g){if(g.length<4)return ky(g);for(var F=[],te=-1,ot=g.length,_t,At=[0],ca=[0];++te<3;)_t=g[te],At.push(_t[0]),ca.push(_t[1]);for(F.push(Vy(tx,At)+","+Vy(tx,ca)),--te;++te<ot;)_t=g[te],At.shift(),At.push(_t[0]),ca.shift(),ca.push(_t[1]),g2(F,At,ca);return F.join("")}function X5(g){for(var F,te=-1,ot=g.length,_t=ot+4,At,ca=[],Er=[];++te<4;)At=g[te%ot],ca.push(At[0]),Er.push(At[1]);for(F=[Vy(tx,ca),",",Vy(tx,Er)],--te;++te<_t;)At=g[te%ot],ca.shift(),ca.push(At[0]),Er.shift(),Er.push(At[1]),g2(F,ca,Er);return F.join("")}function V2(g,F){var te=g.length-1;if(te)for(var ot=g[0][0],_t=g[0][1],At=g[te][0]-ot,ca=g[te][1]-_t,Er=-1,Lp,Wp;++Er<=te;)Lp=g[Er],Wp=Er/te,Lp[0]=F*Lp[0]+(1-F)*(ot+Wp*At),Lp[1]=F*Lp[1]+(1-F)*(_t+Wp*ca);return W5(g)}function Vy(g,F){return g[0]*F[0]+g[1]*F[1]+g[2]*F[2]+g[3]*F[3]}var E3=[0,2/3,1/3,0],q5=[0,1/3,2/3,0],tx=[0,1/6,2/3,1/6];function g2(g,F,te){g.push("C",Vy(E3,F),",",Vy(E3,te),",",Vy(q5,F),",",Vy(q5,te),",",Vy(tx,F),",",Vy(tx,te))}function fb(g,F){return(F[1]-g[1])/(F[0]-g[0])}function pb(g){for(var F=0,te=g.length-1,ot=[],_t=g[0],At=g[1],ca=ot[0]=fb(_t,At);++F<te;)ot[F]=(ca+(ca=fb(_t=At,At=g[F+1])))/2;return ot[F]=ca,ot}function A3(g){for(var F=[],te,ot,_t,At,ca=pb(g),Er=-1,Lp=g.length-1;++Er<Lp;)te=fb(g[Er],g[Er+1]),S(te)<Hp?ca[Er]=ca[Er+1]=0:(ot=ca[Er]/te,_t=ca[Er+1]/te,At=ot*ot+_t*_t,At>9&&(At=te*3/Math.sqrt(At),ca[Er]=At*ot,ca[Er+1]=At*_t));for(Er=-1;++Er<=Lp;)At=(g[Math.min(Lp,Er+1)][0]-g[Math.max(0,Er-1)][0])/(6*(1+ca[Er]*ca[Er])),F.push([At||0,ca[Er]*At||0]);return F}function C3(g){return g.length<3?ky(g):g[0]+hb(g,A3(g))}v.svg.line.radial=function(){var g=T3(T_);return g.radius=g.x,delete g.x,g.angle=g.y,delete g.y,g};function T_(g){for(var F,te=-1,ot=g.length,_t,At;++te<ot;)F=g[te],_t=F[0],At=F[1]-Np,F[0]=_t*Math.cos(At),F[1]=_t*Math.sin(At);return g}function R3(g){var F=xg,te=xg,ot=0,_t=Jg,At=ex,ca=ky,Er=ca.key,Lp=ca,Wp="L",Yp=.7;function A0(L0){var rm=[],xm=[],N0=[],K0=-1,em=L0.length,vm,ym=D0(F),nm=D0(ot),d1=F===te?function(){return i}:D0(te),n=ot===_t?function(){return u}:D0(_t),i,u;function C(){rm.push("M",ca(g(N0),Yp),Wp,Lp(g(xm.reverse()),Yp),"Z")}for(;++K0<em;)At.call(this,vm=L0[K0],K0)?(xm.push([i=+ym.call(this,vm,K0),u=+nm.call(this,vm,K0)]),N0.push([+d1.call(this,vm,K0),+n.call(this,vm,K0)])):xm.length&&(C(),xm=[],N0=[]);return xm.length&&C(),rm.length?rm.join(""):null}return A0.x=function(L0){return arguments.length?(F=te=L0,A0):te},A0.x0=function(L0){return arguments.length?(F=L0,A0):F},A0.x1=function(L0){return arguments.length?(te=L0,A0):te},A0.y=function(L0){return arguments.length?(ot=_t=L0,A0):_t},A0.y0=function(L0){return arguments.length?(ot=L0,A0):ot},A0.y1=function(L0){return arguments.length?(_t=L0,A0):_t},A0.defined=function(L0){return arguments.length?(At=L0,A0):At},A0.interpolate=function(L0){return arguments.length?(typeof L0=="function"?Er=ca=L0:Er=(ca=j2.get(L0)||ky).key,Lp=ca.reverse||ca,Wp=ca.closed?"M":"L",A0):Er},A0.tension=function(L0){return arguments.length?(Yp=L0,A0):Yp},A0}$x.reverse=db,db.reverse=$x,v.svg.area=function(){return R3(dt)},v.svg.area.radial=function(){var g=R3(T_);return g.radius=g.x,delete g.x,g.innerRadius=g.x0,delete g.x0,g.outerRadius=g.x1,delete g.x1,g.angle=g.y,delete g.y,g.startAngle=g.y0,delete g.y0,g.endAngle=g.y1,delete g.y1,g};function D3(g){return g.source}function Y5(g){return g.target}v.svg.chord=function(){var g=D3,F=Y5,te=$5,ot=ub,_t=S3;function At(Yp,A0){var L0=ca(this,g,Yp,A0),rm=ca(this,F,Yp,A0);return"M"+L0.p0+Lp(L0.r,L0.p1,L0.a1-L0.a0)+(Er(L0,rm)?Wp(L0.r,L0.p1,L0.r,L0.p0):Wp(L0.r,L0.p1,rm.r,rm.p0)+Lp(rm.r,rm.p1,rm.a1-rm.a0)+Wp(rm.r,rm.p1,L0.r,L0.p0))+"Z"}function ca(Yp,A0,L0,rm){var xm=A0.call(Yp,L0,rm),N0=te.call(Yp,xm,rm),K0=ot.call(Yp,xm,rm)-Np,em=_t.call(Yp,xm,rm)-Np;return{r:N0,a0:K0,a1:em,p0:[N0*Math.cos(K0),N0*Math.sin(K0)],p1:[N0*Math.cos(em),N0*Math.sin(em)]}}function Er(Yp,A0){return Yp.a0==A0.a0&&Yp.a1==A0.a1}function Lp(Yp,A0,L0){return"A"+Yp+","+Yp+" 0 "+ +(L0>Ht)+",1 "+A0}function Wp(Yp,A0,L0,rm){return"Q 0,0 "+rm}return At.radius=function(Yp){return arguments.length?(te=D0(Yp),At):te},At.source=function(Yp){return arguments.length?(g=D0(Yp),At):g},At.target=function(Yp){return arguments.length?(F=D0(Yp),At):F},At.startAngle=function(Yp){return arguments.length?(ot=D0(Yp),At):ot},At.endAngle=function(Yp){return arguments.length?(_t=D0(Yp),At):_t},At};function $5(g){return g.radius}v.svg.diagonal=function(){var g=D3,F=Y5,te=Z5;function ot(_t,At){var ca=g.call(this,_t,At),Er=F.call(this,_t,At),Lp=(ca.y+Er.y)/2,Wp=[ca,{x:ca.x,y:Lp},{x:Er.x,y:Lp},Er];return Wp=Wp.map(te),"M"+Wp[0]+"C"+Wp[1]+" "+Wp[2]+" "+Wp[3]}return ot.source=function(_t){return arguments.length?(g=D0(_t),ot):g},ot.target=function(_t){return arguments.length?(F=D0(_t),ot):F},ot.projection=function(_t){return arguments.length?(te=_t,ot):te},ot};function Z5(g){return[g.x,g.y]}v.svg.diagonal.radial=function(){var g=v.svg.diagonal(),F=Z5,te=g.projection;return g.projection=function(ot){return arguments.length?te(L3(F=ot)):F},g};function L3(g){return function(){var F=g.apply(this,arguments),te=F[0],ot=F[1]-Np;return[te*Math.cos(ot),te*Math.sin(ot)]}}v.svg.symbol=function(){var g=mb,F=Aw;function te(ot,_t){return(E_.get(g.call(this,ot,_t))||M_)(F.call(this,ot,_t))}return te.type=function(ot){return arguments.length?(g=D0(ot),te):g},te.size=function(ot){return arguments.length?(F=D0(ot),te):F},te};function Aw(){return 64}function mb(){return"circle"}function M_(g){var F=Math.sqrt(g/Ht);return"M0,"+F+"A"+F+","+F+" 0 1,1 0,"+-F+"A"+F+","+F+" 0 1,1 0,"+F+"Z"}var E_=v.map({circle:M_,cross:function(g){var F=Math.sqrt(g/5)/2;return"M"+-3*F+","+-F+"H"+-F+"V"+-3*F+"H"+F+"V"+-F+"H"+3*F+"V"+F+"H"+F+"V"+3*F+"H"+-F+"V"+F+"H"+-3*F+"Z"},diamond:function(g){var F=Math.sqrt(g/(2*H2)),te=F*H2;return"M0,"+-F+"L"+te+",0 0,"+F+" "+-te+",0Z"},square:function(g){var F=Math.sqrt(g)/2;return"M"+-F+","+-F+"L"+F+","+-F+" "+F+","+F+" "+-F+","+F+"Z"},"triangle-down":function(g){var F=Math.sqrt(g/gb),te=F*gb/2;return"M0,"+te+"L"+F+","+-te+" "+-F+","+-te+"Z"},"triangle-up":function(g){var F=Math.sqrt(g/gb),te=F*gb/2;return"M0,"+-te+"L"+F+","+te+" "+-F+","+te+"Z"}});v.svg.symbolTypes=E_.keys();var gb=Math.sqrt(3),H2=Math.tan(30*Jp);ke.transition=function(g){for(var F=Ox||++N3,te=O3(g),ot=[],_t,At,ca=A_||{time:Date.now(),ease:u5,delay:0,duration:250},Er=-1,Lp=this.length;++Er<Lp;){ot.push(_t=[]);for(var Wp=this[Er],Yp=-1,A0=Wp.length;++Yp<A0;)(At=Wp[Yp])&&_b(At,Yp,te,F,ca),_t.push(At)}return G2(ot,te,F)},ke.interrupt=function(g){return this.each(g==null?vb:k3(O3(g)))};var vb=k3(O3());function k3(g){return function(){var F,te,ot;(F=this[g])&&(ot=F[te=F.active])&&(ot.timer.c=null,ot.timer.t=NaN,--F.count?delete F[te]:delete this[g],F.active+=.5,ot.event&&ot.event.interrupt.call(this,this.__data__,ot.index))}}function G2(g,F,te){return lt(g,wy),g.namespace=F,g.id=te,g}var wy=[],N3=0,Ox,A_;wy.call=ke.call,wy.empty=ke.empty,wy.node=ke.node,wy.size=ke.size,v.transition=function(g,F){return g&&g.transition?Ox?g.transition(F):g:v.selection().transition(g)},v.transition.prototype=wy,wy.select=function(g){var F=this.id,te=this.namespace,ot=[],_t,At,ca;g=G(g);for(var Er=-1,Lp=this.length;++Er<Lp;){ot.push(_t=[]);for(var Wp=this[Er],Yp=-1,A0=Wp.length;++Yp<A0;)(ca=Wp[Yp])&&(At=g.call(ca,ca.__data__,Yp,Er))?("__data__"in ca&&(At.__data__=ca.__data__),_b(At,Yp,te,F,ca[te][F]),_t.push(At)):_t.push(null)}return G2(ot,te,F)},wy.selectAll=function(g){var F=this.id,te=this.namespace,ot=[],_t,At,ca,Er,Lp;g=ne(g);for(var Wp=-1,Yp=this.length;++Wp<Yp;)for(var A0=this[Wp],L0=-1,rm=A0.length;++L0<rm;)if(ca=A0[L0]){Lp=ca[te][F],At=g.call(ca,ca.__data__,L0,Wp),ot.push(_t=[]);for(var xm=-1,N0=At.length;++xm<N0;)(Er=At[xm])&&_b(Er,xm,te,F,Lp),_t.push(Er)}return G2(ot,te,F)},wy.filter=function(g){var F=[],te,ot,_t;typeof g!="function"&&(g=jt(g));for(var At=0,ca=this.length;At<ca;At++){F.push(te=[]);for(var ot=this[At],Er=0,Lp=ot.length;Er<Lp;Er++)(_t=ot[Er])&&g.call(_t,_t.__data__,Er,At)&&te.push(_t)}return G2(F,this.namespace,this.id)},wy.tween=function(g,F){var te=this.id,ot=this.namespace;return arguments.length<2?this.node()[ot][te].tween.get(g):i0(this,F==null?function(_t){_t[ot][te].tween.remove(g)}:function(_t){_t[ot][te].tween.set(g,F)})};function yb(g,F,te,ot){var _t=g.id,At=g.namespace;return i0(g,typeof te=="function"?function(ca,Er,Lp){ca[At][_t].tween.set(F,ot(te.call(ca,ca.__data__,Er,Lp)))}:(te=ot(te),function(ca){ca[At][_t].tween.set(F,te)}))}wy.attr=function(g,F){if(arguments.length<2){for(F in g)this.attr(F,g[F]);return this}var te=g=="transform"?l3:dy,ot=v.ns.qualify(g);function _t(){this.removeAttribute(ot)}function At(){this.removeAttributeNS(ot.space,ot.local)}function ca(Lp){return Lp==null?_t:(Lp+="",function(){var Wp=this.getAttribute(ot),Yp;return Wp!==Lp&&(Yp=te(Wp,Lp),function(A0){this.setAttribute(ot,Yp(A0))})})}function Er(Lp){return Lp==null?At:(Lp+="",function(){var Wp=this.getAttributeNS(ot.space,ot.local),Yp;return Wp!==Lp&&(Yp=te(Wp,Lp),function(A0){this.setAttributeNS(ot.space,ot.local,Yp(A0))})})}return yb(this,"attr."+g,F,ot.local?Er:ca)},wy.attrTween=function(g,F){var te=v.ns.qualify(g);function ot(At,ca){var Er=F.call(this,At,ca,this.getAttribute(te));return Er&&function(Lp){this.setAttribute(te,Er(Lp))}}function _t(At,ca){var Er=F.call(this,At,ca,this.getAttributeNS(te.space,te.local));return Er&&function(Lp){this.setAttributeNS(te.space,te.local,Er(Lp))}}return this.tween("attr."+g,te.local?_t:ot)},wy.style=function(g,F,te){var ot=arguments.length;if(ot<3){if(typeof g!="string"){ot<2&&(F="");for(te in g)this.style(te,g[te],F);return this}te=""}function _t(){this.style.removeProperty(g)}function At(ca){return ca==null?_t:(ca+="",function(){var Er=x(this).getComputedStyle(this,null).getPropertyValue(g),Lp;return Er!==ca&&(Lp=dy(Er,ca),function(Wp){this.style.setProperty(g,Lp(Wp),te)})})}return yb(this,"style."+g,F,At)},wy.styleTween=function(g,F,te){arguments.length<3&&(te="");function ot(_t,At){var ca=F.call(this,_t,At,x(this).getComputedStyle(this,null).getPropertyValue(g));return ca&&function(Er){this.style.setProperty(g,ca(Er),te)}}return this.tween("style."+g,ot)},wy.text=function(g){return yb(this,"text",g,xb)};function xb(g){return g==null&&(g=""),function(){this.textContent=g}}wy.remove=function(){var g=this.namespace;return this.each("end.transition",function(){var F;this[g].count<2&&(F=this.parentNode)&&F.removeChild(this)})},wy.ease=function(g){var F=this.id,te=this.namespace;return arguments.length<1?this.node()[te][F].ease:(typeof g!="function"&&(g=v.ease.apply(v,arguments)),i0(this,function(ot){ot[te][F].ease=g}))},wy.delay=function(g){var F=this.id,te=this.namespace;return arguments.length<1?this.node()[te][F].delay:i0(this,typeof g=="function"?function(ot,_t,At){ot[te][F].delay=+g.call(ot,ot.__data__,_t,At)}:(g=+g,function(ot){ot[te][F].delay=g}))},wy.duration=function(g){var F=this.id,te=this.namespace;return arguments.length<1?this.node()[te][F].duration:i0(this,typeof g=="function"?function(ot,_t,At){ot[te][F].duration=Math.max(1,g.call(ot,ot.__data__,_t,At))}:(g=Math.max(1,g),function(ot){ot[te][F].duration=g}))},wy.each=function(g,F){var te=this.id,ot=this.namespace;if(arguments.length<2){var _t=A_,At=Ox;try{Ox=te,i0(this,function(ca,Er,Lp){A_=ca[ot][te],g.call(ca,ca.__data__,Er,Lp)})}finally{A_=_t,Ox=At}}else i0(this,function(ca){var Er=ca[ot][te];(Er.event||(Er.event=v.dispatch("start","end","interrupt"))).on(g,F)});return this},wy.transition=function(){for(var g=this.id,F=++N3,te=this.namespace,ot=[],_t,At,ca,Er,Lp=0,Wp=this.length;Lp<Wp;Lp++){ot.push(_t=[]);for(var At=this[Lp],Yp=0,A0=At.length;Yp<A0;Yp++)(ca=At[Yp])&&(Er=ca[te][g],_b(ca,Yp,te,F,{time:Er.time,ease:Er.ease,delay:Er.delay+Er.duration,duration:Er.duration})),_t.push(ca)}return G2(ot,te,F)};function O3(g){return g==null?"__transition__":"__transition_"+g+"__"}function _b(g,F,te,ot,_t){var At=g[te]||(g[te]={active:0,count:0}),ca=At[ot],Er,Lp,Wp,Yp,A0;function L0(N0){var K0=ca.delay;if(Lp.t=K0+Er,K0<=N0)return rm(N0-K0);Lp.c=rm}function rm(N0){var K0=At.active,em=At[K0];em&&(em.timer.c=null,em.timer.t=NaN,--At.count,delete At[K0],em.event&&em.event.interrupt.call(g,g.__data__,em.index));for(var vm in At)if(+vm<ot){var ym=At[vm];ym.timer.c=null,ym.timer.t=NaN,--At.count,delete At[vm]}Lp.c=xm,B1(function(){return Lp.c&&xm(N0||1)&&(Lp.c=null,Lp.t=NaN),1},0,Er),At.active=ot,ca.event&&ca.event.start.call(g,g.__data__,F),A0=[],ca.tween.forEach(function(nm,d1){(d1=d1.call(g,g.__data__,F))&&A0.push(d1)}),Yp=ca.ease,Wp=ca.duration}function xm(N0){for(var K0=N0/Wp,em=Yp(K0),vm=A0.length;vm>0;)A0[--vm].call(g,em);if(K0>=1)return ca.event&&ca.event.end.call(g,g.__data__,F),--At.count?delete At[ot]:delete g[te],1}ca||(Er=_t.time,Lp=B1(L0,0,Er),ca=At[ot]={tween:new H,time:Er,timer:Lp,delay:_t.delay,duration:_t.duration,ease:_t.ease,index:F},_t=null,++At.count)}v.svg.axis=function(){var g=v.scale.linear(),F=bb,te=6,ot=6,_t=3,At=[10],ca=null,Er;function Lp(Wp){Wp.each(function(){var Yp=v.select(this),A0=this.__chart__||g,L0=this.__chart__=g.copy(),rm=ca??(L0.ticks?L0.ticks.apply(L0,At):L0.domain()),xm=Er??(L0.tickFormat?L0.tickFormat.apply(L0,At):dt),N0=Yp.selectAll(".tick").data(rm,L0),K0=N0.enter().insert("g",".domain").attr("class","tick").style("opacity",Hp),em=v.transition(N0.exit()).style("opacity",Hp).remove(),vm=v.transition(N0.order()).style("opacity",1),ym=Math.max(te,0)+_t,nm,d1=Ay(L0),n=Yp.selectAll(".domain").data([0]),i=(n.enter().append("path").attr("class","domain"),v.transition(n));K0.append("line"),K0.append("text");var u=K0.select("line"),C=vm.select("line"),re=N0.select("text").text(xm),st=K0.select("text"),ha=vm.select("text"),qp=F==="top"||F==="left"?-1:1,q0,Dm,Gm,pm;if(F==="bottom"||F==="top"?(nm=wb,q0="x",Gm="y",Dm="x2",pm="y2",re.attr("dy",qp<0?"0em":".71em").style("text-anchor","middle"),i.attr("d","M"+d1[0]+","+qp*ot+"V0H"+d1[1]+"V"+qp*ot)):(nm=P3,q0="y",Gm="x",Dm="y2",pm="x2",re.attr("dy",".32em").style("text-anchor",qp<0?"end":"start"),i.attr("d","M"+qp*ot+","+d1[0]+"H0V"+d1[1]+"H"+qp*ot)),u.attr(pm,qp*te),st.attr(Gm,qp*ym),C.attr(Dm,0).attr(pm,qp*te),ha.attr(q0,0).attr(Gm,qp*ym),L0.rangeBand){var _m=L0,Cm=_m.rangeBand()/2;A0=L0=function(G1){return _m(G1)+Cm}}else A0.rangeBand?A0=L0:em.call(nm,L0,A0);K0.call(nm,A0,L0),vm.call(nm,L0,L0)})}return Lp.scale=function(Wp){return arguments.length?(g=Wp,Lp):g},Lp.orient=function(Wp){return arguments.length?(F=Wp in z3?Wp+"":bb,Lp):F},Lp.ticks=function(){return arguments.length?(At=h(arguments),Lp):At},Lp.tickValues=function(Wp){return arguments.length?(ca=Wp,Lp):ca},Lp.tickFormat=function(Wp){return arguments.length?(Er=Wp,Lp):Er},Lp.tickSize=function(Wp){var Yp=arguments.length;return Yp?(te=+Wp,ot=+arguments[Yp-1],Lp):te},Lp.innerTickSize=function(Wp){return arguments.length?(te=+Wp,Lp):te},Lp.outerTickSize=function(Wp){return arguments.length?(ot=+Wp,Lp):ot},Lp.tickPadding=function(Wp){return arguments.length?(_t=+Wp,Lp):_t},Lp.tickSubdivide=function(){return arguments.length&&Lp},Lp};var bb="bottom",z3={top:1,right:1,bottom:1,left:1};function wb(g,F,te){g.attr("transform",function(ot){var _t=F(ot);return"translate("+(isFinite(_t)?_t:te(ot))+",0)"})}function P3(g,F,te){g.attr("transform",function(ot){var _t=F(ot);return"translate(0,"+(isFinite(_t)?_t:te(ot))+")"})}v.svg.brush=function(){var g=oa(Yp,"brushstart","brush","brushend"),F=null,te=null,ot=[0,0],_t=[0,0],At,ca,Er=!0,Lp=!0,Wp=C_[0];function Yp(N0){N0.each(function(){var K0=v.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",xm).on("touchstart.brush",xm),em=K0.selectAll(".background").data([0]);em.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),K0.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var vm=K0.selectAll(".resize").data(Wp,dt);vm.exit().remove(),vm.enter().append("g").attr("class",function(n){return"resize "+n}).style("cursor",function(n){return J5[n]}).append("rect").attr("x",function(n){return/[ew]$/.test(n)?-3:null}).attr("y",function(n){return/^[ns]/.test(n)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),vm.style("display",Yp.empty()?"none":null);var ym=v.transition(K0),nm=v.transition(em),d1;F&&(d1=Ay(F),nm.attr("x",d1[0]).attr("width",d1[1]-d1[0]),L0(ym)),te&&(d1=Ay(te),nm.attr("y",d1[0]).attr("height",d1[1]-d1[0]),rm(ym)),A0(ym)})}Yp.event=function(N0){N0.each(function(){var K0=g.of(this,arguments),em={x:ot,y:_t,i:At,j:ca},vm=this.__chart__||em;this.__chart__=em,Ox?v.select(this).transition().each("start.brush",function(){At=vm.i,ca=vm.j,ot=vm.x,_t=vm.y,K0({type:"brushstart"})}).tween("brush:brush",function(){var ym=px(ot,em.x),nm=px(_t,em.y);return At=ca=null,function(d1){ot=em.x=ym(d1),_t=em.y=nm(d1),K0({type:"brush",mode:"resize"})}}).each("end.brush",function(){At=em.i,ca=em.j,K0({type:"brush",mode:"resize"}),K0({type:"brushend"})}):(K0({type:"brushstart"}),K0({type:"brush",mode:"resize"}),K0({type:"brushend"}))})};function A0(N0){N0.selectAll(".resize").attr("transform",function(K0){return"translate("+ot[+/e$/.test(K0)]+","+_t[+/^s/.test(K0)]+")"})}function L0(N0){N0.select(".extent").attr("x",ot[0]),N0.selectAll(".extent,.n>rect,.s>rect").attr("width",ot[1]-ot[0])}function rm(N0){N0.select(".extent").attr("y",_t[0]),N0.selectAll(".extent,.e>rect,.w>rect").attr("height",_t[1]-_t[0])}function xm(){var N0=this,K0=v.select(v.event.target),em=g.of(N0,arguments),vm=v.select(N0),ym=K0.datum(),nm=!/^(n|s)$/.test(ym)&&F,d1=!/^(e|w)$/.test(ym)&&te,n=K0.classed("extent"),i=Tm(N0),u,C=v.mouse(N0),re,st=v.select(x(N0)).on("keydown.brush",q0).on("keyup.brush",Dm);if(v.event.changedTouches?st.on("touchmove.brush",Gm).on("touchend.brush",_m):st.on("mousemove.brush",Gm).on("mouseup.brush",_m),vm.interrupt().selectAll("*").interrupt(),n)C[0]=ot[0]-C[0],C[1]=_t[0]-C[1];else if(ym){var ha=+/w$/.test(ym),qp=+/^n/.test(ym);re=[ot[1-ha]-C[0],_t[1-qp]-C[1]],C[0]=ot[ha],C[1]=_t[qp]}else v.event.altKey&&(u=C.slice());vm.style("pointer-events","none").selectAll(".resize").style("display",null),v.select("body").style("cursor",K0.style("cursor")),em({type:"brushstart"}),Gm();function q0(){v.event.keyCode==32&&(n||(u=null,C[0]-=ot[1],C[1]-=_t[1],n=2),Pt())}function Dm(){v.event.keyCode==32&&n==2&&(C[0]+=ot[1],C[1]+=_t[1],n=0,Pt())}function Gm(){var Cm=v.mouse(N0),G1=!1;re&&(Cm[0]+=re[0],Cm[1]+=re[1]),n||(v.event.altKey?(u||(u=[(ot[0]+ot[1])/2,(_t[0]+_t[1])/2]),C[0]=ot[+(Cm[0]<u[0])],C[1]=_t[+(Cm[1]<u[1])]):u=null),nm&&pm(Cm,F,0)&&(L0(vm),G1=!0),d1&&pm(Cm,te,1)&&(rm(vm),G1=!0),G1&&(A0(vm),em({type:"brush",mode:n?"move":"resize"}))}function pm(Cm,G1,hg){var qg=Ay(G1),Em=qg[0],hm=qg[1],Om=C[hg],c1=hg?_t:ot,bg=c1[1]-c1[0],Yg,pg;if(n&&(Em-=Om,hm-=bg+Om),Yg=(hg?Lp:Er)?Math.max(Em,Math.min(hm,Cm[hg])):Cm[hg],n?pg=(Yg+=Om)+bg:(u&&(Om=Math.max(Em,Math.min(hm,2*u[hg]-Yg))),Om<Yg?(pg=Yg,Yg=Om):pg=Om),c1[0]!=Yg||c1[1]!=pg)return hg?ca=null:At=null,c1[0]=Yg,c1[1]=pg,!0}function _m(){Gm(),vm.style("pointer-events","all").selectAll(".resize").style("display",Yp.empty()?"none":null),v.select("body").style("cursor",null),st.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),i(),em({type:"brushend"})}}return Yp.x=function(N0){return arguments.length?(F=N0,Wp=C_[!F<<1|!te],Yp):F},Yp.y=function(N0){return arguments.length?(te=N0,Wp=C_[!F<<1|!te],Yp):te},Yp.clamp=function(N0){return arguments.length?(F&&te?(Er=!!N0[0],Lp=!!N0[1]):F?Er=!!N0:te&&(Lp=!!N0),Yp):F&&te?[Er,Lp]:F?Er:te?Lp:null},Yp.extent=function(N0){var K0,em,vm,ym,nm;return arguments.length?(F&&(K0=N0[0],em=N0[1],te&&(K0=K0[0],em=em[0]),At=[K0,em],F.invert&&(K0=F(K0),em=F(em)),em<K0&&(nm=K0,K0=em,em=nm),(K0!=ot[0]||em!=ot[1])&&(ot=[K0,em])),te&&(vm=N0[0],ym=N0[1],F&&(vm=vm[1],ym=ym[1]),ca=[vm,ym],te.invert&&(vm=te(vm),ym=te(ym)),ym<vm&&(nm=vm,vm=ym,ym=nm),(vm!=_t[0]||ym!=_t[1])&&(_t=[vm,ym])),Yp):(F&&(At?(K0=At[0],em=At[1]):(K0=ot[0],em=ot[1],F.invert&&(K0=F.invert(K0),em=F.invert(em)),em<K0&&(nm=K0,K0=em,em=nm))),te&&(ca?(vm=ca[0],ym=ca[1]):(vm=_t[0],ym=_t[1],te.invert&&(vm=te.invert(vm),ym=te.invert(ym)),ym<vm&&(nm=vm,vm=ym,ym=nm))),F&&te?[[K0,vm],[em,ym]]:F?[K0,em]:te&&[vm,ym])},Yp.clear=function(){return Yp.empty()||(ot=[0,0],_t=[0,0],At=ca=null),Yp},Yp.empty=function(){return!!F&&ot[0]==ot[1]||!!te&&_t[0]==_t[1]},v.rebind(Yp,g,"on")};var J5={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},C_=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];v.text=z0(function(g){return g.responseText}),v.json=function(g,F){return am(g,"application/json",Zx,F)};function Zx(g){return JSON.parse(g.responseText)}v.html=function(g,F){return am(g,"text/html",Jx,F)};function Jx(g){var F=_.createRange();return F.selectNode(_.body),F.createContextualFragment(g.responseText)}v.xml=z0(function(g){return g.responseXML}),typeof ve=="object"&&ve.exports?ve.exports=v:this.d3=v}).apply(self)}),s=t((Ue,ve)=>{(function(v,c){typeof Ue=="object"&&typeof ve<"u"?c(Ue):(v=v||self,c(v.d3=v.d3||{}))})(Ue,function(v){var c=new Date,h=new Date;function _(jt,Fp,i0,b0){function O0(C0){return jt(C0=arguments.length===0?new Date:new Date(+C0)),C0}return O0.floor=function(C0){return jt(C0=new Date(+C0)),C0},O0.ceil=function(C0){return jt(C0=new Date(C0-1)),Fp(C0,1),jt(C0),C0},O0.round=function(C0){var I0=O0(C0),V0=O0.ceil(C0);return C0-I0<V0-C0?I0:V0},O0.offset=function(C0,I0){return Fp(C0=new Date(+C0),I0==null?1:Math.floor(I0)),C0},O0.range=function(C0,I0,V0){var H0=[],im;if(C0=O0.ceil(C0),V0=V0==null?1:Math.floor(V0),!(C0<I0)||!(V0>0))return H0;do H0.push(im=new Date(+C0)),Fp(C0,V0),jt(C0);while(im<C0&&C0<I0);return H0},O0.filter=function(C0){return _(function(I0){if(I0>=I0)for(;jt(I0),!C0(I0);)I0.setTime(I0-1)},function(I0,V0){if(I0>=I0)if(V0<0)for(;++V0<=0;)for(;Fp(I0,-1),!C0(I0););else for(;--V0>=0;)for(;Fp(I0,1),!C0(I0););})},i0&&(O0.count=function(C0,I0){return c.setTime(+C0),h.setTime(+I0),jt(c),jt(h),Math.floor(i0(c,h))},O0.every=function(C0){return C0=Math.floor(C0),!isFinite(C0)||!(C0>0)?null:C0>1?O0.filter(b0?function(I0){return b0(I0)%C0===0}:function(I0){return O0.count(0,I0)%C0===0}):O0}),O0}var y=_(function(){},function(jt,Fp){jt.setTime(+jt+Fp)},function(jt,Fp){return Fp-jt});y.every=function(jt){return jt=Math.floor(jt),!isFinite(jt)||!(jt>0)?null:jt>1?_(function(Fp){Fp.setTime(Math.floor(Fp/jt)*jt)},function(Fp,i0){Fp.setTime(+Fp+i0*jt)},function(Fp,i0){return(i0-Fp)/jt}):y};var x=y.range,w=1e3,A=6e4,d=36e5,k=864e5,T=6048e5,L=_(function(jt){jt.setTime(jt-jt.getMilliseconds())},function(jt,Fp){jt.setTime(+jt+Fp*w)},function(jt,Fp){return(Fp-jt)/w},function(jt){return jt.getUTCSeconds()}),j=L.range,P=_(function(jt){jt.setTime(jt-jt.getMilliseconds()-jt.getSeconds()*w)},function(jt,Fp){jt.setTime(+jt+Fp*A)},function(jt,Fp){return(Fp-jt)/A},function(jt){return jt.getMinutes()}),N=P.range,O=_(function(jt){jt.setTime(jt-jt.getMilliseconds()-jt.getSeconds()*w-jt.getMinutes()*A)},function(jt,Fp){jt.setTime(+jt+Fp*d)},function(jt,Fp){return(Fp-jt)/d},function(jt){return jt.getHours()}),B=O.range,S=_(function(jt){jt.setHours(0,0,0,0)},function(jt,Fp){jt.setDate(jt.getDate()+Fp)},function(jt,Fp){return(Fp-jt-(Fp.getTimezoneOffset()-jt.getTimezoneOffset())*A)/k},function(jt){return jt.getDate()-1}),D=S.range;function z(jt){return _(function(Fp){Fp.setDate(Fp.getDate()-(Fp.getDay()+7-jt)%7),Fp.setHours(0,0,0,0)},function(Fp,i0){Fp.setDate(Fp.getDate()+i0*7)},function(Fp,i0){return(i0-Fp-(i0.getTimezoneOffset()-Fp.getTimezoneOffset())*A)/T})}var H=z(0),Y=z(1),ht=z(2),Se=z(3),ie=z(4),X=z(5),ft=z(6),Le=H.range,nt=Y.range,Ze=ht.range,rt=Se.range,dt=ie.range,pt=X.range,se=ft.range,gt=_(function(jt){jt.setDate(1),jt.setHours(0,0,0,0)},function(jt,Fp){jt.setMonth(jt.getMonth()+Fp)},function(jt,Fp){return Fp.getMonth()-jt.getMonth()+(Fp.getFullYear()-jt.getFullYear())*12},function(jt){return jt.getMonth()}),xt=gt.range,Nt=_(function(jt){jt.setMonth(0,1),jt.setHours(0,0,0,0)},function(jt,Fp){jt.setFullYear(jt.getFullYear()+Fp)},function(jt,Fp){return Fp.getFullYear()-jt.getFullYear()},function(jt){return jt.getFullYear()});Nt.every=function(jt){return!isFinite(jt=Math.floor(jt))||!(jt>0)?null:_(function(Fp){Fp.setFullYear(Math.floor(Fp.getFullYear()/jt)*jt),Fp.setMonth(0,1),Fp.setHours(0,0,0,0)},function(Fp,i0){Fp.setFullYear(Fp.getFullYear()+i0*jt)})};var Rt=Nt.range,Pt=_(function(jt){jt.setUTCSeconds(0,0)},function(jt,Fp){jt.setTime(+jt+Fp*A)},function(jt,Fp){return(Fp-jt)/A},function(jt){return jt.getUTCMinutes()}),xn=Pt.range,oa=_(function(jt){jt.setUTCMinutes(0,0,0)},function(jt,Fp){jt.setTime(+jt+Fp*d)},function(jt,Fp){return(Fp-jt)/d},function(jt){return jt.getUTCHours()}),jo=oa.range,lt=_(function(jt){jt.setUTCHours(0,0,0,0)},function(jt,Fp){jt.setUTCDate(jt.getUTCDate()+Fp)},function(jt,Fp){return(Fp-jt)/k},function(jt){return jt.getUTCDate()-1}),ut=lt.range;function $(jt){return _(function(Fp){Fp.setUTCDate(Fp.getUTCDate()-(Fp.getUTCDay()+7-jt)%7),Fp.setUTCHours(0,0,0,0)},function(Fp,i0){Fp.setUTCDate(Fp.getUTCDate()+i0*7)},function(Fp,i0){return(i0-Fp)/T})}var yt=$(0),Lt=$(1),ke=$(2),G=$(3),ne=$(4),et=$(5),ct=$(6),kt=yt.range,Gt=Lt.range,$t=ke.range,Ko=G.range,Up=ne.range,e0=et.range,E0=ct.range,m0=_(function(jt){jt.setUTCDate(1),jt.setUTCHours(0,0,0,0)},function(jt,Fp){jt.setUTCMonth(jt.getUTCMonth()+Fp)},function(jt,Fp){return Fp.getUTCMonth()-jt.getUTCMonth()+(Fp.getUTCFullYear()-jt.getUTCFullYear())*12},function(jt){return jt.getUTCMonth()}),f0=m0.range,la=_(function(jt){jt.setUTCMonth(0,1),jt.setUTCHours(0,0,0,0)},function(jt,Fp){jt.setUTCFullYear(jt.getUTCFullYear()+Fp)},function(jt,Fp){return Fp.getUTCFullYear()-jt.getUTCFullYear()},function(jt){return jt.getUTCFullYear()});la.every=function(jt){return!isFinite(jt=Math.floor(jt))||!(jt>0)?null:_(function(Fp){Fp.setUTCFullYear(Math.floor(Fp.getUTCFullYear()/jt)*jt),Fp.setUTCMonth(0,1),Fp.setUTCHours(0,0,0,0)},function(Fp,i0){Fp.setUTCFullYear(Fp.getUTCFullYear()+i0*jt)})};var $o=la.range;v.timeDay=S,v.timeDays=D,v.timeFriday=X,v.timeFridays=pt,v.timeHour=O,v.timeHours=B,v.timeInterval=_,v.timeMillisecond=y,v.timeMilliseconds=x,v.timeMinute=P,v.timeMinutes=N,v.timeMonday=Y,v.timeMondays=nt,v.timeMonth=gt,v.timeMonths=xt,v.timeSaturday=ft,v.timeSaturdays=se,v.timeSecond=L,v.timeSeconds=j,v.timeSunday=H,v.timeSundays=Le,v.timeThursday=ie,v.timeThursdays=dt,v.timeTuesday=ht,v.timeTuesdays=Ze,v.timeWednesday=Se,v.timeWednesdays=rt,v.timeWeek=H,v.timeWeeks=Le,v.timeYear=Nt,v.timeYears=Rt,v.utcDay=lt,v.utcDays=ut,v.utcFriday=et,v.utcFridays=e0,v.utcHour=oa,v.utcHours=jo,v.utcMillisecond=y,v.utcMilliseconds=x,v.utcMinute=Pt,v.utcMinutes=xn,v.utcMonday=Lt,v.utcMondays=Gt,v.utcMonth=m0,v.utcMonths=f0,v.utcSaturday=ct,v.utcSaturdays=E0,v.utcSecond=L,v.utcSeconds=j,v.utcSunday=yt,v.utcSundays=kt,v.utcThursday=ne,v.utcThursdays=Up,v.utcTuesday=ke,v.utcTuesdays=$t,v.utcWednesday=G,v.utcWednesdays=Ko,v.utcWeek=yt,v.utcWeeks=kt,v.utcYear=la,v.utcYears=$o,Object.defineProperty(v,"__esModule",{value:!0})})}),f=t((Ue,ve)=>{(function(v,c){typeof Ue=="object"&&typeof ve<"u"?c(Ue,s()):(v=v||self,c(v.d3=v.d3||{},v.d3))})(Ue,function(v,c){function h(ci){if(0<=ci.y&&ci.y<100){var Hp=new Date(-1,ci.m,ci.d,ci.H,ci.M,ci.S,ci.L);return Hp.setFullYear(ci.y),Hp}return new Date(ci.y,ci.m,ci.d,ci.H,ci.M,ci.S,ci.L)}function _(ci){if(0<=ci.y&&ci.y<100){var Hp=new Date(Date.UTC(-1,ci.m,ci.d,ci.H,ci.M,ci.S,ci.L));return Hp.setUTCFullYear(ci.y),Hp}return new Date(Date.UTC(ci.y,ci.m,ci.d,ci.H,ci.M,ci.S,ci.L))}function y(ci,Hp,St){return{y:ci,m:Hp,d:St,H:0,M:0,S:0,L:0}}function x(ci){var Hp=ci.dateTime,St=ci.date,Ht=ci.time,Sr=ci.periods,Rp=ci.days,Np=ci.shortDays,Jp=ci.months,n0=ci.shortMonths,S0=j(Sr),_0=P(Sr),w0=j(Rp),X0=P(Rp),$0=j(Np),Z0=P(Np),Am=j(Jp),e1=P(Jp),E1=j(n0),N1=P(n0),z1={a:Eg,A:Ig,b:Q1,B:Rg,c:null,d:gt,e:gt,f:xn,H:xt,I:Nt,j:Rt,L:Pt,m:oa,M:jo,p:cg,q:Vm,Q:I0,s:V0,S:lt,u:ut,U:$,V:yt,w:Lt,W:ke,x:null,X:null,y:G,Y:ne,Z:et,"%":C0},r1={a:Xg,A:Ct,b:Tt,B:jp,c:null,d:ct,e:ct,f:Up,H:kt,I:Gt,j:$t,L:Ko,m:e0,M:E0,p:Zp,q:l0,Q:I0,s:V0,S:m0,u:f0,U:la,V:$o,w:jt,W:Fp,x:null,X:null,y:i0,Y:b0,Z:O0,"%":C0},Lm={a:m1,A:t1,b:Z1,B:rg,c:k1,d:ie,e:ie,f:rt,H:ft,I:ft,j:X,L:Ze,m:Se,M:Le,p:l1,q:ht,Q:pt,s:se,S:nt,u:O,U:B,V:S,w:N,W:D,x:ug,X:yg,y:H,Y:z,Z:Y,"%":dt};z1.x=T1(St,z1),z1.X=T1(Ht,z1),z1.c=T1(Hp,z1),r1.x=T1(St,r1),r1.X=T1(Ht,r1),r1.c=T1(Hp,r1);function T1(Bp,Gp){return function(p0){var a0=[],D0=-1,z0=0,am=Bp.length,Ym,Hm,f1;for(p0 instanceof Date||(p0=new Date(+p0));++D0<am;)Bp.charCodeAt(D0)===37&&(a0.push(Bp.slice(z0,D0)),(Hm=w[Ym=Bp.charAt(++D0)])!=null?Ym=Bp.charAt(++D0):Hm=Ym==="e"?" ":"0",(f1=Gp[Ym])&&(Ym=f1(p0,Hm)),a0.push(Ym),z0=D0+1);return a0.push(Bp.slice(z0,D0)),a0.join("")}}function O1(Bp,Gp){return function(p0){var a0=y(1900,void 0,1),D0=y1(a0,Bp,p0+="",0),z0,am;if(D0!=p0.length)return null;if("Q"in a0)return new Date(a0.Q);if("s"in a0)return new Date(a0.s*1e3+("L"in a0?a0.L:0));if(Gp&&!("Z"in a0)&&(a0.Z=0),"p"in a0&&(a0.H=a0.H%12+a0.p*12),a0.m===void 0&&(a0.m="q"in a0?a0.q:0),"V"in a0){if(a0.V<1||a0.V>53)return null;"w"in a0||(a0.w=1),"Z"in a0?(z0=_(y(a0.y,0,1)),am=z0.getUTCDay(),z0=am>4||am===0?c.utcMonday.ceil(z0):c.utcMonday(z0),z0=c.utcDay.offset(z0,(a0.V-1)*7),a0.y=z0.getUTCFullYear(),a0.m=z0.getUTCMonth(),a0.d=z0.getUTCDate()+(a0.w+6)%7):(z0=h(y(a0.y,0,1)),am=z0.getDay(),z0=am>4||am===0?c.timeMonday.ceil(z0):c.timeMonday(z0),z0=c.timeDay.offset(z0,(a0.V-1)*7),a0.y=z0.getFullYear(),a0.m=z0.getMonth(),a0.d=z0.getDate()+(a0.w+6)%7)}else("W"in a0||"U"in a0)&&("w"in a0||(a0.w="u"in a0?a0.u%7:"W"in a0?1:0),am="Z"in a0?_(y(a0.y,0,1)).getUTCDay():h(y(a0.y,0,1)).getDay(),a0.m=0,a0.d="W"in a0?(a0.w+6)%7+a0.W*7-(am+5)%7:a0.w+a0.U*7-(am+6)%7);return"Z"in a0?(a0.H+=a0.Z/100|0,a0.M+=a0.Z%100,_(a0)):h(a0)}}function y1(Bp,Gp,p0,a0){for(var D0=0,z0=Gp.length,am=p0.length,Ym,Hm;D0<z0;){if(a0>=am)return-1;if(Ym=Gp.charCodeAt(D0++),Ym===37){if(Ym=Gp.charAt(D0++),Hm=Lm[Ym in w?Gp.charAt(D0++):Ym],!Hm||(a0=Hm(Bp,p0,a0))<0)return-1}else if(Ym!=p0.charCodeAt(a0++))return-1}return a0}function l1(Bp,Gp,p0){var a0=S0.exec(Gp.slice(p0));return a0?(Bp.p=_0[a0[0].toLowerCase()],p0+a0[0].length):-1}function m1(Bp,Gp,p0){var a0=$0.exec(Gp.slice(p0));return a0?(Bp.w=Z0[a0[0].toLowerCase()],p0+a0[0].length):-1}function t1(Bp,Gp,p0){var a0=w0.exec(Gp.slice(p0));return a0?(Bp.w=X0[a0[0].toLowerCase()],p0+a0[0].length):-1}function Z1(Bp,Gp,p0){var a0=E1.exec(Gp.slice(p0));return a0?(Bp.m=N1[a0[0].toLowerCase()],p0+a0[0].length):-1}function rg(Bp,Gp,p0){var a0=Am.exec(Gp.slice(p0));return a0?(Bp.m=e1[a0[0].toLowerCase()],p0+a0[0].length):-1}function k1(Bp,Gp,p0){return y1(Bp,Hp,Gp,p0)}function ug(Bp,Gp,p0){return y1(Bp,St,Gp,p0)}function yg(Bp,Gp,p0){return y1(Bp,Ht,Gp,p0)}function Eg(Bp){return Np[Bp.getDay()]}function Ig(Bp){return Rp[Bp.getDay()]}function Q1(Bp){return n0[Bp.getMonth()]}function Rg(Bp){return Jp[Bp.getMonth()]}function cg(Bp){return Sr[+(Bp.getHours()>=12)]}function Vm(Bp){return 1+~~(Bp.getMonth()/3)}function Xg(Bp){return Np[Bp.getUTCDay()]}function Ct(Bp){return Rp[Bp.getUTCDay()]}function Tt(Bp){return n0[Bp.getUTCMonth()]}function jp(Bp){return Jp[Bp.getUTCMonth()]}function Zp(Bp){return Sr[+(Bp.getUTCHours()>=12)]}function l0(Bp){return 1+~~(Bp.getUTCMonth()/3)}return{format:function(Bp){var Gp=T1(Bp+="",z1);return Gp.toString=function(){return Bp},Gp},parse:function(Bp){var Gp=O1(Bp+="",!1);return Gp.toString=function(){return Bp},Gp},utcFormat:function(Bp){var Gp=T1(Bp+="",r1);return Gp.toString=function(){return Bp},Gp},utcParse:function(Bp){var Gp=O1(Bp+="",!0);return Gp.toString=function(){return Bp},Gp}}}var w={"-":"",_:" ",0:"0"},A=/^\s*\d+/,d=/^%/,k=/[\\^$*+?|[\]().{}]/g;function T(ci,Hp,St){var Ht=ci<0?"-":"",Sr=(Ht?-ci:ci)+"",Rp=Sr.length;return Ht+(Rp<St?new Array(St-Rp+1).join(Hp)+Sr:Sr)}function L(ci){return ci.replace(k,"\\$&")}function j(ci){return new RegExp("^(?:"+ci.map(L).join("|")+")","i")}function P(ci){for(var Hp={},St=-1,Ht=ci.length;++St<Ht;)Hp[ci[St].toLowerCase()]=St;return Hp}function N(ci,Hp,St){var Ht=A.exec(Hp.slice(St,St+1));return Ht?(ci.w=+Ht[0],St+Ht[0].length):-1}function O(ci,Hp,St){var Ht=A.exec(Hp.slice(St,St+1));return Ht?(ci.u=+Ht[0],St+Ht[0].length):-1}function B(ci,Hp,St){var Ht=A.exec(Hp.slice(St,St+2));return Ht?(ci.U=+Ht[0],St+Ht[0].length):-1}function S(ci,Hp,St){var Ht=A.exec(Hp.slice(St,St+2));return Ht?(ci.V=+Ht[0],St+Ht[0].length):-1}function D(ci,Hp,St){var Ht=A.exec(Hp.slice(St,St+2));return Ht?(ci.W=+Ht[0],St+Ht[0].length):-1}function z(ci,Hp,St){var Ht=A.exec(Hp.slice(St,St+4));return Ht?(ci.y=+Ht[0],St+Ht[0].length):-1}function H(ci,Hp,St){var Ht=A.exec(Hp.slice(St,St+2));return Ht?(ci.y=+Ht[0]+(+Ht[0]>68?1900:2e3),St+Ht[0].length):-1}function Y(ci,Hp,St){var Ht=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(Hp.slice(St,St+6));return Ht?(ci.Z=Ht[1]?0:-(Ht[2]+(Ht[3]||"00")),St+Ht[0].length):-1}function ht(ci,Hp,St){var Ht=A.exec(Hp.slice(St,St+1));return Ht?(ci.q=Ht[0]*3-3,St+Ht[0].length):-1}function Se(ci,Hp,St){var Ht=A.exec(Hp.slice(St,St+2));return Ht?(ci.m=Ht[0]-1,St+Ht[0].length):-1}function ie(ci,Hp,St){var Ht=A.exec(Hp.slice(St,St+2));return Ht?(ci.d=+Ht[0],St+Ht[0].length):-1}function X(ci,Hp,St){var Ht=A.exec(Hp.slice(St,St+3));return Ht?(ci.m=0,ci.d=+Ht[0],St+Ht[0].length):-1}function ft(ci,Hp,St){var Ht=A.exec(Hp.slice(St,St+2));return Ht?(ci.H=+Ht[0],St+Ht[0].length):-1}function Le(ci,Hp,St){var Ht=A.exec(Hp.slice(St,St+2));return Ht?(ci.M=+Ht[0],St+Ht[0].length):-1}function nt(ci,Hp,St){var Ht=A.exec(Hp.slice(St,St+2));return Ht?(ci.S=+Ht[0],St+Ht[0].length):-1}function Ze(ci,Hp,St){var Ht=A.exec(Hp.slice(St,St+3));return Ht?(ci.L=+Ht[0],St+Ht[0].length):-1}function rt(ci,Hp,St){var Ht=A.exec(Hp.slice(St,St+6));return Ht?(ci.L=Math.floor(Ht[0]/1e3),St+Ht[0].length):-1}function dt(ci,Hp,St){var Ht=d.exec(Hp.slice(St,St+1));return Ht?St+Ht[0].length:-1}function pt(ci,Hp,St){var Ht=A.exec(Hp.slice(St));return Ht?(ci.Q=+Ht[0],St+Ht[0].length):-1}function se(ci,Hp,St){var Ht=A.exec(Hp.slice(St));return Ht?(ci.s=+Ht[0],St+Ht[0].length):-1}function gt(ci,Hp){return T(ci.getDate(),Hp,2)}function xt(ci,Hp){return T(ci.getHours(),Hp,2)}function Nt(ci,Hp){return T(ci.getHours()%12||12,Hp,2)}function Rt(ci,Hp){return T(1+c.timeDay.count(c.timeYear(ci),ci),Hp,3)}function Pt(ci,Hp){return T(ci.getMilliseconds(),Hp,3)}function xn(ci,Hp){return Pt(ci,Hp)+"000"}function oa(ci,Hp){return T(ci.getMonth()+1,Hp,2)}function jo(ci,Hp){return T(ci.getMinutes(),Hp,2)}function lt(ci,Hp){return T(ci.getSeconds(),Hp,2)}function ut(ci){var Hp=ci.getDay();return Hp===0?7:Hp}function $(ci,Hp){return T(c.timeSunday.count(c.timeYear(ci)-1,ci),Hp,2)}function yt(ci,Hp){var St=ci.getDay();return ci=St>=4||St===0?c.timeThursday(ci):c.timeThursday.ceil(ci),T(c.timeThursday.count(c.timeYear(ci),ci)+(c.timeYear(ci).getDay()===4),Hp,2)}function Lt(ci){return ci.getDay()}function ke(ci,Hp){return T(c.timeMonday.count(c.timeYear(ci)-1,ci),Hp,2)}function G(ci,Hp){return T(ci.getFullYear()%100,Hp,2)}function ne(ci,Hp){return T(ci.getFullYear()%1e4,Hp,4)}function et(ci){var Hp=ci.getTimezoneOffset();return(Hp>0?"-":(Hp*=-1,"+"))+T(Hp/60|0,"0",2)+T(Hp%60,"0",2)}function ct(ci,Hp){return T(ci.getUTCDate(),Hp,2)}function kt(ci,Hp){return T(ci.getUTCHours(),Hp,2)}function Gt(ci,Hp){return T(ci.getUTCHours()%12||12,Hp,2)}function $t(ci,Hp){return T(1+c.utcDay.count(c.utcYear(ci),ci),Hp,3)}function Ko(ci,Hp){return T(ci.getUTCMilliseconds(),Hp,3)}function Up(ci,Hp){return Ko(ci,Hp)+"000"}function e0(ci,Hp){return T(ci.getUTCMonth()+1,Hp,2)}function E0(ci,Hp){return T(ci.getUTCMinutes(),Hp,2)}function m0(ci,Hp){return T(ci.getUTCSeconds(),Hp,2)}function f0(ci){var Hp=ci.getUTCDay();return Hp===0?7:Hp}function la(ci,Hp){return T(c.utcSunday.count(c.utcYear(ci)-1,ci),Hp,2)}function $o(ci,Hp){var St=ci.getUTCDay();return ci=St>=4||St===0?c.utcThursday(ci):c.utcThursday.ceil(ci),T(c.utcThursday.count(c.utcYear(ci),ci)+(c.utcYear(ci).getUTCDay()===4),Hp,2)}function jt(ci){return ci.getUTCDay()}function Fp(ci,Hp){return T(c.utcMonday.count(c.utcYear(ci)-1,ci),Hp,2)}function i0(ci,Hp){return T(ci.getUTCFullYear()%100,Hp,2)}function b0(ci,Hp){return T(ci.getUTCFullYear()%1e4,Hp,4)}function O0(){return"+0000"}function C0(){return"%"}function I0(ci){return+ci}function V0(ci){return Math.floor(+ci/1e3)}var H0;im({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function im(ci){return H0=x(ci),v.timeFormat=H0.format,v.timeParse=H0.parse,v.utcFormat=H0.utcFormat,v.utcParse=H0.utcParse,H0}var k0="%Y-%m-%dT%H:%M:%S.%LZ";function fm(ci){return ci.toISOString()}var Tm=Date.prototype.toISOString?fm:v.utcFormat(k0);function om(ci){var Hp=new Date(ci);return isNaN(Hp)?null:Hp}var Rm=+new Date("2000-01-01T00:00:00.000Z")?om:v.utcParse(k0);v.isoFormat=Tm,v.isoParse=Rm,v.timeFormatDefaultLocale=im,v.timeFormatLocale=x,Object.defineProperty(v,"__esModule",{value:!0})})}),m=t((Ue,ve)=>{(function(v,c){typeof Ue=="object"&&typeof ve<"u"?c(Ue):(v=typeof globalThis<"u"?globalThis:v||self,c(v.d3=v.d3||{}))})(Ue,function(v){function c(Se){return Math.abs(Se=Math.round(Se))>=1e21?Se.toLocaleString("en").replace(/,/g,""):Se.toString(10)}function h(Se,ie){if((X=(Se=ie?Se.toExponential(ie-1):Se.toExponential()).indexOf("e"))<0)return null;var X,ft=Se.slice(0,X);return[ft.length>1?ft[0]+ft.slice(2):ft,+Se.slice(X+1)]}function _(Se){return Se=h(Math.abs(Se)),Se?Se[1]:NaN}function y(Se,ie){return function(X,ft){for(var Le=X.length,nt=[],Ze=0,rt=Se[0],dt=0;Le>0&&rt>0&&(dt+rt+1>ft&&(rt=Math.max(1,ft-dt)),nt.push(X.substring(Le-=rt,Le+rt)),!((dt+=rt+1)>ft));)rt=Se[Ze=(Ze+1)%Se.length];return nt.reverse().join(ie)}}function x(Se){return function(ie){return ie.replace(/[0-9]/g,function(X){return Se[+X]})}}var w=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function A(Se){if(!(ie=w.exec(Se)))throw new Error("invalid format: "+Se);var ie;return new d({fill:ie[1],align:ie[2],sign:ie[3],symbol:ie[4],zero:ie[5],width:ie[6],comma:ie[7],precision:ie[8]&&ie[8].slice(1),trim:ie[9],type:ie[10]})}A.prototype=d.prototype;function d(Se){this.fill=Se.fill===void 0?" ":Se.fill+"",this.align=Se.align===void 0?">":Se.align+"",this.sign=Se.sign===void 0?"-":Se.sign+"",this.symbol=Se.symbol===void 0?"":Se.symbol+"",this.zero=!!Se.zero,this.width=Se.width===void 0?void 0:+Se.width,this.comma=!!Se.comma,this.precision=Se.precision===void 0?void 0:+Se.precision,this.trim=!!Se.trim,this.type=Se.type===void 0?"":Se.type+""}d.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function k(Se){e:for(var ie=Se.length,X=1,ft=-1,Le;X<ie;++X)switch(Se[X]){case".":ft=Le=X;break;case"0":ft===0&&(ft=X),Le=X;break;default:if(!+Se[X])break e;ft>0&&(ft=0);break}return ft>0?Se.slice(0,ft)+Se.slice(Le+1):Se}var T;function L(Se,ie){var X=h(Se,ie);if(!X)return Se+"";var ft=X[0],Le=X[1],nt=Le-(T=Math.max(-8,Math.min(8,Math.floor(Le/3)))*3)+1,Ze=ft.length;return nt===Ze?ft:nt>Ze?ft+new Array(nt-Ze+1).join("0"):nt>0?ft.slice(0,nt)+"."+ft.slice(nt):"0."+new Array(1-nt).join("0")+h(Se,Math.max(0,ie+nt-1))[0]}function j(Se,ie){var X=h(Se,ie);if(!X)return Se+"";var ft=X[0],Le=X[1];return Le<0?"0."+new Array(-Le).join("0")+ft:ft.length>Le+1?ft.slice(0,Le+1)+"."+ft.slice(Le+1):ft+new Array(Le-ft.length+2).join("0")}var P={"%":function(Se,ie){return(Se*100).toFixed(ie)},b:function(Se){return Math.round(Se).toString(2)},c:function(Se){return Se+""},d:c,e:function(Se,ie){return Se.toExponential(ie)},f:function(Se,ie){return Se.toFixed(ie)},g:function(Se,ie){return Se.toPrecision(ie)},o:function(Se){return Math.round(Se).toString(8)},p:function(Se,ie){return j(Se*100,ie)},r:j,s:L,X:function(Se){return Math.round(Se).toString(16).toUpperCase()},x:function(Se){return Math.round(Se).toString(16)}};function N(Se){return Se}var O=Array.prototype.map,B=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function S(Se){var ie=Se.grouping===void 0||Se.thousands===void 0?N:y(O.call(Se.grouping,Number),Se.thousands+""),X=Se.currency===void 0?"":Se.currency[0]+"",ft=Se.currency===void 0?"":Se.currency[1]+"",Le=Se.decimal===void 0?".":Se.decimal+"",nt=Se.numerals===void 0?N:x(O.call(Se.numerals,String)),Ze=Se.percent===void 0?"%":Se.percent+"",rt=Se.minus===void 0?"-":Se.minus+"",dt=Se.nan===void 0?"NaN":Se.nan+"";function pt(gt){gt=A(gt);var xt=gt.fill,Nt=gt.align,Rt=gt.sign,Pt=gt.symbol,xn=gt.zero,oa=gt.width,jo=gt.comma,lt=gt.precision,ut=gt.trim,$=gt.type;$==="n"?(jo=!0,$="g"):P[$]||(lt===void 0&&(lt=12),ut=!0,$="g"),(xn||xt==="0"&&Nt==="=")&&(xn=!0,xt="0",Nt="=");var yt=Pt==="$"?X:Pt==="#"&&/[boxX]/.test($)?"0"+$.toLowerCase():"",Lt=Pt==="$"?ft:/[%p]/.test($)?Ze:"",ke=P[$],G=/[defgprs%]/.test($);lt=lt===void 0?6:/[gprs]/.test($)?Math.max(1,Math.min(21,lt)):Math.max(0,Math.min(20,lt));function ne(et){var ct=yt,kt=Lt,Gt,$t,Ko;if($==="c")kt=ke(et)+kt,et="";else{et=+et;var Up=et<0||1/et<0;if(et=isNaN(et)?dt:ke(Math.abs(et),lt),ut&&(et=k(et)),Up&&+et==0&&Rt!=="+"&&(Up=!1),ct=(Up?Rt==="("?Rt:rt:Rt==="-"||Rt==="("?"":Rt)+ct,kt=($==="s"?B[8+T/3]:"")+kt+(Up&&Rt==="("?")":""),G){for(Gt=-1,$t=et.length;++Gt<$t;)if(Ko=et.charCodeAt(Gt),48>Ko||Ko>57){kt=(Ko===46?Le+et.slice(Gt+1):et.slice(Gt))+kt,et=et.slice(0,Gt);break}}}jo&&!xn&&(et=ie(et,1/0));var e0=ct.length+et.length+kt.length,E0=e0<oa?new Array(oa-e0+1).join(xt):"";switch(jo&&xn&&(et=ie(E0+et,E0.length?oa-kt.length:1/0),E0=""),Nt){case"<":et=ct+et+kt+E0;break;case"=":et=ct+E0+et+kt;break;case"^":et=E0.slice(0,e0=E0.length>>1)+ct+et+kt+E0.slice(e0);break;default:et=E0+ct+et+kt;break}return nt(et)}return ne.toString=function(){return gt+""},ne}function se(gt,xt){var Nt=pt((gt=A(gt),gt.type="f",gt)),Rt=Math.max(-8,Math.min(8,Math.floor(_(xt)/3)))*3,Pt=Math.pow(10,-Rt),xn=B[8+Rt/3];return function(oa){return Nt(Pt*oa)+xn}}return{format:pt,formatPrefix:se}}var D;z({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function z(Se){return D=S(Se),v.format=D.format,v.formatPrefix=D.formatPrefix,D}function H(Se){return Math.max(0,-_(Math.abs(Se)))}function Y(Se,ie){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(_(ie)/3)))*3-_(Math.abs(Se)))}function ht(Se,ie){return Se=Math.abs(Se),ie=Math.abs(ie)-Se,Math.max(0,_(ie)-_(Se))+1}v.FormatSpecifier=d,v.formatDefaultLocale=z,v.formatLocale=S,v.formatSpecifier=A,v.precisionFixed=H,v.precisionPrefix=Y,v.precisionRound=ht,Object.defineProperty(v,"__esModule",{value:!0})})}),b=t((Ue,ve)=>{ve.exports=function(v){for(var c=v.length,h,_=0;_<c;_++)if(h=v.charCodeAt(_),(h<9||h>13)&&h!==32&&h!==133&&h!==160&&h!==5760&&h!==6158&&(h<8192||h>8205)&&h!==8232&&h!==8233&&h!==8239&&h!==8287&&h!==8288&&h!==12288&&h!==65279)return!1;return!0}}),E=t((Ue,ve)=>{var v=b();ve.exports=function(c){var h=typeof c;if(h==="string"){var _=c;if(c=+c,c===0&&v(_))return!1}else if(h!=="number")return!1;return c-c<1}}),M=t((Ue,ve)=>{ve.exports={BADNUM:void 0,FP_SAFE:Number.MAX_VALUE*1e-4,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,ONEMILLI:1,ONEMICROSEC:.001,EPOCHJD:24405875e-1,ALMOST_EQUAL:1-1e-6,LOG_CLIP:10,MINUS_SIGN:"−"}}),I=t((Ue,ve)=>{(function(v,c){typeof Ue=="object"&&typeof ve<"u"?c(Ue):(v=typeof globalThis<"u"?globalThis:v||self,c(v["base64-arraybuffer"]={}))})(Ue,function(v){for(var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=typeof Uint8Array>"u"?[]:new Uint8Array(256),_=0;_<c.length;_++)h[c.charCodeAt(_)]=_;var y=function(w){var A=new Uint8Array(w),d,k=A.length,T="";for(d=0;d<k;d+=3)T+=c[A[d]>>2],T+=c[(A[d]&3)<<4|A[d+1]>>4],T+=c[(A[d+1]&15)<<2|A[d+2]>>6],T+=c[A[d+2]&63];return k%3===2?T=T.substring(0,T.length-1)+"=":k%3===1&&(T=T.substring(0,T.length-2)+"=="),T},x=function(w){var A=w.length*.75,d=w.length,k,T=0,L,j,P,N;w[w.length-1]==="="&&(A--,w[w.length-2]==="="&&A--);var O=new ArrayBuffer(A),B=new Uint8Array(O);for(k=0;k<d;k+=4)L=h[w.charCodeAt(k)],j=h[w.charCodeAt(k+1)],P=h[w.charCodeAt(k+2)],N=h[w.charCodeAt(k+3)],B[T++]=L<<2|j>>4,B[T++]=(j&15)<<4|P>>2,B[T++]=(P&3)<<6|N&63;return O};v.decode=x,v.encode=y,Object.defineProperty(v,"__esModule",{value:!0})})}),V=t((Ue,ve)=>{ve.exports=function(v){return window&&window.process&&window.process.versions?Object.prototype.toString.call(v)==="[object Object]":Object.prototype.toString.call(v)==="[object Object]"&&Object.getPrototypeOf(v).hasOwnProperty("hasOwnProperty")}}),Z=t(Ue=>{var ve=I().decode,v=V(),c=Array.isArray,h=ArrayBuffer,_=DataView;function y(L){return h.isView(L)&&!(L instanceof _)}Ue.isTypedArray=y;function x(L){return c(L)||y(L)}Ue.isArrayOrTypedArray=x;function w(L){return!x(L[0])}Ue.isArray1D=w,Ue.ensureArray=function(L,j){return c(L)||(L=[]),L.length=j,L};var A={u1c:typeof Uint8ClampedArray>"u"?void 0:Uint8ClampedArray,i1:typeof Int8Array>"u"?void 0:Int8Array,u1:typeof Uint8Array>"u"?void 0:Uint8Array,i2:typeof Int16Array>"u"?void 0:Int16Array,u2:typeof Uint16Array>"u"?void 0:Uint16Array,i4:typeof Int32Array>"u"?void 0:Int32Array,u4:typeof Uint32Array>"u"?void 0:Uint32Array,f4:typeof Float32Array>"u"?void 0:Float32Array,f8:typeof Float64Array>"u"?void 0:Float64Array};A.uint8c=A.u1c,A.uint8=A.u1,A.int8=A.i1,A.uint16=A.u2,A.int16=A.i2,A.uint32=A.u4,A.int32=A.i4,A.float32=A.f4,A.float64=A.f8;function d(L){return L.constructor===ArrayBuffer}Ue.isArrayBuffer=d,Ue.decodeTypedArraySpec=function(L){var j=[],P=k(L),N=P.dtype,O=A[N];if(!O)throw new Error('Error in dtype: "'+N+'"');var B=O.BYTES_PER_ELEMENT,S=P.bdata;d(S)||(S=ve(S));var D=P.shape===void 0?[S.byteLength/B]:(""+P.shape).split(",");D.reverse();var z=D.length,H,Y,ht=+D[0],Se=B*ht,ie=0;if(z===1)j=new O(S);else if(z===2)for(H=+D[1],Y=0;Y<H;Y++)j[Y]=new O(S,ie,ht),ie+=Se;else if(z===3){H=+D[1];for(var X=+D[2],ft=0;ft<X;ft++)for(j[ft]=[],Y=0;Y<H;Y++)j[ft][Y]=new O(S,ie,ht),ie+=Se}else throw new Error("ndim: "+z+'is not supported with the shape:"'+P.shape+'"');return j.bdata=P.bdata,j.dtype=P.dtype,j.shape=D.reverse().join(","),L._inputArray=j,j},Ue.isTypedArraySpec=function(L){return v(L)&&L.hasOwnProperty("dtype")&&typeof L.dtype=="string"&&L.hasOwnProperty("bdata")&&(typeof L.bdata=="string"||d(L.bdata))&&(L.shape===void 0||L.hasOwnProperty("shape")&&(typeof L.shape=="string"||typeof L.shape=="number"))};function k(L){return{bdata:L.bdata,dtype:L.dtype,shape:L.shape}}Ue.concat=function(){var L=[],j=!0,P=0,N,O,B,S,D,z,H,Y;for(B=0;B<arguments.length;B++)S=arguments[B],z=S.length,z&&(O?L.push(S):(O=S,D=z),c(S)?N=!1:(j=!1,P?N!==S.constructor&&(N=!1):N=S.constructor),P+=z);if(!P)return[];if(!L.length)return O;if(j)return O.concat.apply(O,L);if(N){for(H=new N(P),H.set(O),B=0;B<L.length;B++)S=L[B],H.set(S,D),D+=S.length;return H}for(H=new Array(P),Y=0;Y<O.length;Y++)H[Y]=O[Y];for(B=0;B<L.length;B++){for(S=L[B],Y=0;Y<S.length;Y++)H[D+Y]=S[Y];D+=Y}return H},Ue.maxRowLength=function(L){return T(L,Math.max,0)},Ue.minRowLength=function(L){return T(L,Math.min,1/0)};function T(L,j,P){if(x(L))if(x(L[0])){for(var N=P,O=0;O<L.length;O++)N=j(N,L[O].length);return N}else return L.length;return 0}}),ee=t((Ue,ve)=>{var v=E(),c=Z().isArrayOrTypedArray;ve.exports=function(T,L){if(v(L))L=String(L);else if(typeof L!="string"||L.substr(L.length-4)==="[-1]")throw"bad property string";var j=L.split("."),P,N,O,B;for(B=0;B<j.length;B++)if(String(j[B]).slice(0,2)==="__")throw"bad property string";for(B=0;B<j.length;){if(P=String(j[B]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/),P){if(P[1])j[B]=P[1];else if(B===0)j.splice(0,1);else throw"bad property string";for(N=P[2].substr(1,P[2].length-2).split("]["),O=0;O<N.length;O++)B++,j.splice(B,0,Number(N[O]))}B++}return typeof T!="object"?k(T,L,j):{set:x(T,j,L),get:h(T,j),astr:L,parts:j,obj:T}};function h(T,L){return function(j){var P=T,N,O,B,S,D;for(S=0;S<L.length-1;S++){if(N=L[S],N===-1){for(O=!0,B=[],D=0;D<P.length;D++)B[D]=h(P[D],L.slice(S+1))(j),B[D]!==B[0]&&(O=!1);return O?B[0]:B}if(typeof N=="number"&&!c(P)||(P=P[N],typeof P!="object"||P===null))return}if(!(typeof P!="object"||P===null)&&(B=P[L[S]],!(!j&&B===null)))return B}}var _=/(^|\.)args\[/;function y(T,L){return T===void 0||T===null&&!L.match(_)}function x(T,L,j){return function(P){var N=T,O="",B=y(P,j),S,D;for(D=0;D<L.length-1;D++){if(S=L[D],typeof S=="number"&&!c(N))throw"array index but container is not an array";if(S===-1){if(B=!A(N,L.slice(D+1),P,j),B)break;return}if(!d(N,S,L[D+1],B))break;if(N=N[S],typeof N!="object"||N===null)throw"container is not an object";O=w(O,S)}if(B){if(D===L.length-1&&(delete N[L[D]],Array.isArray(N)&&+L[D]===N.length-1))for(;N.length&&N[N.length-1]===void 0;)N.pop()}else N[L[D]]=P}}function w(T,L){var j=L;return v(L)?j="["+L+"]":T&&(j="."+L),T+j}function A(T,L,j,P){var N=c(j),O=!0,B=j,S=P.replace("-1",0),D=N?!1:y(j,S),z=L[0],H;for(H=0;H<T.length;H++)S=P.replace("-1",H),N&&(B=j[H%j.length],D=y(B,S)),D&&(O=!1),d(T,H,z,D)&&x(T[H],L,P.replace("-1",H))(B);return O}function d(T,L,j,P){if(T[L]===void 0){if(P)return!1;typeof j=="number"?T[L]=[]:T[L]={}}return!0}function k(T,L,j){return{set:function(){throw"bad container"},get:function(){},astr:L,parts:j,obj:T}}}),le=t((Ue,ve)=>{var v=ee(),c=/^\w*$/,h=0,_=1,y=2,x=3,w=4;ve.exports=function(A,d,k,T){k=k||"name",T=T||"value";var L,j,P,N={};d&&d.length?(P=v(A,d),j=P.get()):j=A,d=d||"";var O={};if(j)for(L=0;L<j.length;L++)O[j[L][k]]=L;var B=c.test(T),S={set:function(D,z){var H=z===null?w:h;if(!j){if(!P||H===w)return;j=[],P.set(j)}var Y=O[D];if(Y===void 0){if(H===w)return;H=H|x,Y=j.length,O[D]=Y}else z!==(B?j[Y][T]:v(j[Y],T).get())&&(H=H|y);var ht=j[Y]=j[Y]||{};return ht[k]=D,B?ht[T]=z:v(ht,T).set(z),z!==null&&(H=H&~w),N[Y]=N[Y]|H,S},get:function(D){if(j){var z=O[D];if(z!==void 0)return B?j[z][T]:v(j[z],T).get()}},rename:function(D,z){var H=O[D];return H===void 0||(N[H]=N[H]|_,O[z]=H,delete O[D],j[H][k]=z),S},remove:function(D){var z=O[D];if(z===void 0)return S;var H=j[z];if(Object.keys(H).length>2)return N[z]=N[z]|y,S.set(D,null);if(B){for(L=z;L<j.length;L++)N[L]=N[L]|x;for(L=z;L<j.length;L++)O[j[L][k]]--;j.splice(z,1),delete O[D]}else v(H,T).set(null),N[z]=N[z]|y|w;return S},constructUpdate:function(){for(var D,z,H={},Y=Object.keys(N),ht=0;ht<Y.length;ht++)z=Y[ht],D=d+"["+z+"]",j[z]?(N[z]&_&&(H[D+"."+k]=j[z][k]),N[z]&y&&(B?H[D+"."+T]=N[z]&w?null:j[z][T]:H[D+"."+T]=N[z]&w?null:v(j[z],T).get())):H[D]=null;return H}};return S}}),K=t((Ue,ve)=>{var v=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,c=/^[^\.\[\]]+$/;ve.exports=function(h,_){for(;_;){var y=h.match(v);if(y)h=y[1];else if(h.match(c))h="";else throw new Error("bad relativeAttr call:"+[h,_]);if(_.charAt(0)==="^")_=_.slice(1);else break}return h&&_.charAt(0)!=="["?h+"."+_:h+_}}),vt=t((Ue,ve)=>{var v=E();ve.exports=function(c,h){if(c>0)return Math.log(c)/Math.LN10;var _=Math.log(Math.min(h[0],h[1]))/Math.LN10;return v(_)||(_=Math.log(Math.max(h[0],h[1]))/Math.LN10-6),_}}),q=t((Ue,ve)=>{var v=Z().isArrayOrTypedArray,c=V();ve.exports=function h(_,y){for(var x in y){var w=y[x],A=_[x];if(A!==w)if(x.charAt(0)==="_"||typeof w=="function"){if(x in _)continue;_[x]=w}else if(v(w)&&v(A)&&c(w[0])){if(x==="customdata"||x==="ids")continue;for(var d=Math.min(w.length,A.length),k=0;k<d;k++)A[k]!==w[k]&&c(w[k])&&c(A[k])&&h(A[k],w[k])}else c(w)&&c(A)&&(h(A,w),Object.keys(A).length||delete _[x])}}}),Q=t((Ue,ve)=>{function v(h,_){var y=h%_;return y<0?y+_:y}function c(h,_){return Math.abs(h)>_/2?h-Math.round(h/_)*_:h}ve.exports={mod:v,modHalf:c}}),wt=t((Ue,ve)=>{(function(v){var c=/^\s+/,h=/\s+$/,_=0,y=v.round,x=v.min,w=v.max,A=v.random;function d(G,ne){if(G=G||"",ne=ne||{},G instanceof d)return G;if(!(this instanceof d))return new d(G,ne);var et=k(G);this._originalInput=G,this._r=et.r,this._g=et.g,this._b=et.b,this._a=et.a,this._roundA=y(100*this._a)/100,this._format=ne.format||et.format,this._gradientType=ne.gradientType,this._r<1&&(this._r=y(this._r)),this._g<1&&(this._g=y(this._g)),this._b<1&&(this._b=y(this._b)),this._ok=et.ok,this._tc_id=_++}d.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var G=this.toRgb();return(G.r*299+G.g*587+G.b*114)/1e3},getLuminance:function(){var G=this.toRgb(),ne,et,ct,kt,Gt,$t;return ne=G.r/255,et=G.g/255,ct=G.b/255,ne<=.03928?kt=ne/12.92:kt=v.pow((ne+.055)/1.055,2.4),et<=.03928?Gt=et/12.92:Gt=v.pow((et+.055)/1.055,2.4),ct<=.03928?$t=ct/12.92:$t=v.pow((ct+.055)/1.055,2.4),.2126*kt+.7152*Gt+.0722*$t},setAlpha:function(G){return this._a=gt(G),this._roundA=y(100*this._a)/100,this},toHsv:function(){var G=P(this._r,this._g,this._b);return{h:G.h*360,s:G.s,v:G.v,a:this._a}},toHsvString:function(){var G=P(this._r,this._g,this._b),ne=y(G.h*360),et=y(G.s*100),ct=y(G.v*100);return this._a==1?"hsv("+ne+", "+et+"%, "+ct+"%)":"hsva("+ne+", "+et+"%, "+ct+"%, "+this._roundA+")"},toHsl:function(){var G=L(this._r,this._g,this._b);return{h:G.h*360,s:G.s,l:G.l,a:this._a}},toHslString:function(){var G=L(this._r,this._g,this._b),ne=y(G.h*360),et=y(G.s*100),ct=y(G.l*100);return this._a==1?"hsl("+ne+", "+et+"%, "+ct+"%)":"hsla("+ne+", "+et+"%, "+ct+"%, "+this._roundA+")"},toHex:function(G){return O(this._r,this._g,this._b,G)},toHexString:function(G){return"#"+this.toHex(G)},toHex8:function(G){return B(this._r,this._g,this._b,this._a,G)},toHex8String:function(G){return"#"+this.toHex8(G)},toRgb:function(){return{r:y(this._r),g:y(this._g),b:y(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+y(this._r)+", "+y(this._g)+", "+y(this._b)+")":"rgba("+y(this._r)+", "+y(this._g)+", "+y(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:y(xt(this._r,255)*100)+"%",g:y(xt(this._g,255)*100)+"%",b:y(xt(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+y(xt(this._r,255)*100)+"%, "+y(xt(this._g,255)*100)+"%, "+y(xt(this._b,255)*100)+"%)":"rgba("+y(xt(this._r,255)*100)+"%, "+y(xt(this._g,255)*100)+"%, "+y(xt(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:pt[O(this._r,this._g,this._b,!0)]||!1},toFilter:function(G){var ne="#"+S(this._r,this._g,this._b,this._a),et=ne,ct=this._gradientType?"GradientType = 1, ":"";if(G){var kt=d(G);et="#"+S(kt._r,kt._g,kt._b,kt._a)}return"progid:DXImageTransform.Microsoft.gradient("+ct+"startColorstr="+ne+",endColorstr="+et+")"},toString:function(G){var ne=!!G;G=G||this._format;var et=!1,ct=this._a<1&&this._a>=0,kt=!ne&&ct&&(G==="hex"||G==="hex6"||G==="hex3"||G==="hex4"||G==="hex8"||G==="name");return kt?G==="name"&&this._a===0?this.toName():this.toRgbString():(G==="rgb"&&(et=this.toRgbString()),G==="prgb"&&(et=this.toPercentageRgbString()),(G==="hex"||G==="hex6")&&(et=this.toHexString()),G==="hex3"&&(et=this.toHexString(!0)),G==="hex4"&&(et=this.toHex8String(!0)),G==="hex8"&&(et=this.toHex8String()),G==="name"&&(et=this.toName()),G==="hsl"&&(et=this.toHslString()),G==="hsv"&&(et=this.toHsvString()),et||this.toHexString())},clone:function(){return d(this.toString())},_applyModification:function(G,ne){var et=G.apply(null,[this].concat([].slice.call(ne)));return this._r=et._r,this._g=et._g,this._b=et._b,this.setAlpha(et._a),this},lighten:function(){return this._applyModification(Y,arguments)},brighten:function(){return this._applyModification(ht,arguments)},darken:function(){return this._applyModification(Se,arguments)},desaturate:function(){return this._applyModification(D,arguments)},saturate:function(){return this._applyModification(z,arguments)},greyscale:function(){return this._applyModification(H,arguments)},spin:function(){return this._applyModification(ie,arguments)},_applyCombination:function(G,ne){return G.apply(null,[this].concat([].slice.call(ne)))},analogous:function(){return this._applyCombination(Ze,arguments)},complement:function(){return this._applyCombination(X,arguments)},monochromatic:function(){return this._applyCombination(rt,arguments)},splitcomplement:function(){return this._applyCombination(nt,arguments)},triad:function(){return this._applyCombination(ft,arguments)},tetrad:function(){return this._applyCombination(Le,arguments)}},d.fromRatio=function(G,ne){if(typeof G=="object"){var et={};for(var ct in G)G.hasOwnProperty(ct)&&(ct==="a"?et[ct]=G[ct]:et[ct]=jo(G[ct]));G=et}return d(G,ne)};function k(G){var ne={r:0,g:0,b:0},et=1,ct=null,kt=null,Gt=null,$t=!1,Ko=!1;return typeof G=="string"&&(G=Lt(G)),typeof G=="object"&&(yt(G.r)&&yt(G.g)&&yt(G.b)?(ne=T(G.r,G.g,G.b),$t=!0,Ko=String(G.r).substr(-1)==="%"?"prgb":"rgb"):yt(G.h)&&yt(G.s)&&yt(G.v)?(ct=jo(G.s),kt=jo(G.v),ne=N(G.h,ct,kt),$t=!0,Ko="hsv"):yt(G.h)&&yt(G.s)&&yt(G.l)&&(ct=jo(G.s),Gt=jo(G.l),ne=j(G.h,ct,Gt),$t=!0,Ko="hsl"),G.hasOwnProperty("a")&&(et=G.a)),et=gt(et),{ok:$t,format:G.format||Ko,r:x(255,w(ne.r,0)),g:x(255,w(ne.g,0)),b:x(255,w(ne.b,0)),a:et}}function T(G,ne,et){return{r:xt(G,255)*255,g:xt(ne,255)*255,b:xt(et,255)*255}}function L(G,ne,et){G=xt(G,255),ne=xt(ne,255),et=xt(et,255);var ct=w(G,ne,et),kt=x(G,ne,et),Gt,$t,Ko=(ct+kt)/2;if(ct==kt)Gt=$t=0;else{var Up=ct-kt;switch($t=Ko>.5?Up/(2-ct-kt):Up/(ct+kt),ct){case G:Gt=(ne-et)/Up+(ne<et?6:0);break;case ne:Gt=(et-G)/Up+2;break;case et:Gt=(G-ne)/Up+4;break}Gt/=6}return{h:Gt,s:$t,l:Ko}}function j(G,ne,et){var ct,kt,Gt;G=xt(G,360),ne=xt(ne,100),et=xt(et,100);function $t(e0,E0,m0){return m0<0&&(m0+=1),m0>1&&(m0-=1),m0<1/6?e0+(E0-e0)*6*m0:m0<1/2?E0:m0<2/3?e0+(E0-e0)*(2/3-m0)*6:e0}if(ne===0)ct=kt=Gt=et;else{var Ko=et<.5?et*(1+ne):et+ne-et*ne,Up=2*et-Ko;ct=$t(Up,Ko,G+1/3),kt=$t(Up,Ko,G),Gt=$t(Up,Ko,G-1/3)}return{r:ct*255,g:kt*255,b:Gt*255}}function P(G,ne,et){G=xt(G,255),ne=xt(ne,255),et=xt(et,255);var ct=w(G,ne,et),kt=x(G,ne,et),Gt,$t,Ko=ct,Up=ct-kt;if($t=ct===0?0:Up/ct,ct==kt)Gt=0;else{switch(ct){case G:Gt=(ne-et)/Up+(ne<et?6:0);break;case ne:Gt=(et-G)/Up+2;break;case et:Gt=(G-ne)/Up+4;break}Gt/=6}return{h:Gt,s:$t,v:Ko}}function N(G,ne,et){G=xt(G,360)*6,ne=xt(ne,100),et=xt(et,100);var ct=v.floor(G),kt=G-ct,Gt=et*(1-ne),$t=et*(1-kt*ne),Ko=et*(1-(1-kt)*ne),Up=ct%6,e0=[et,$t,Gt,Gt,Ko,et][Up],E0=[Ko,et,et,$t,Gt,Gt][Up],m0=[Gt,Gt,Ko,et,et,$t][Up];return{r:e0*255,g:E0*255,b:m0*255}}function O(G,ne,et,ct){var kt=[oa(y(G).toString(16)),oa(y(ne).toString(16)),oa(y(et).toString(16))];return ct&&kt[0].charAt(0)==kt[0].charAt(1)&&kt[1].charAt(0)==kt[1].charAt(1)&&kt[2].charAt(0)==kt[2].charAt(1)?kt[0].charAt(0)+kt[1].charAt(0)+kt[2].charAt(0):kt.join("")}function B(G,ne,et,ct,kt){var Gt=[oa(y(G).toString(16)),oa(y(ne).toString(16)),oa(y(et).toString(16)),oa(lt(ct))];return kt&&Gt[0].charAt(0)==Gt[0].charAt(1)&&Gt[1].charAt(0)==Gt[1].charAt(1)&&Gt[2].charAt(0)==Gt[2].charAt(1)&&Gt[3].charAt(0)==Gt[3].charAt(1)?Gt[0].charAt(0)+Gt[1].charAt(0)+Gt[2].charAt(0)+Gt[3].charAt(0):Gt.join("")}function S(G,ne,et,ct){var kt=[oa(lt(ct)),oa(y(G).toString(16)),oa(y(ne).toString(16)),oa(y(et).toString(16))];return kt.join("")}d.equals=function(G,ne){return!G||!ne?!1:d(G).toRgbString()==d(ne).toRgbString()},d.random=function(){return d.fromRatio({r:A(),g:A(),b:A()})};function D(G,ne){ne=ne===0?0:ne||10;var et=d(G).toHsl();return et.s-=ne/100,et.s=Nt(et.s),d(et)}function z(G,ne){ne=ne===0?0:ne||10;var et=d(G).toHsl();return et.s+=ne/100,et.s=Nt(et.s),d(et)}function H(G){return d(G).desaturate(100)}function Y(G,ne){ne=ne===0?0:ne||10;var et=d(G).toHsl();return et.l+=ne/100,et.l=Nt(et.l),d(et)}function ht(G,ne){ne=ne===0?0:ne||10;var et=d(G).toRgb();return et.r=w(0,x(255,et.r-y(255*-(ne/100)))),et.g=w(0,x(255,et.g-y(255*-(ne/100)))),et.b=w(0,x(255,et.b-y(255*-(ne/100)))),d(et)}function Se(G,ne){ne=ne===0?0:ne||10;var et=d(G).toHsl();return et.l-=ne/100,et.l=Nt(et.l),d(et)}function ie(G,ne){var et=d(G).toHsl(),ct=(et.h+ne)%360;return et.h=ct<0?360+ct:ct,d(et)}function X(G){var ne=d(G).toHsl();return ne.h=(ne.h+180)%360,d(ne)}function ft(G){var ne=d(G).toHsl(),et=ne.h;return[d(G),d({h:(et+120)%360,s:ne.s,l:ne.l}),d({h:(et+240)%360,s:ne.s,l:ne.l})]}function Le(G){var ne=d(G).toHsl(),et=ne.h;return[d(G),d({h:(et+90)%360,s:ne.s,l:ne.l}),d({h:(et+180)%360,s:ne.s,l:ne.l}),d({h:(et+270)%360,s:ne.s,l:ne.l})]}function nt(G){var ne=d(G).toHsl(),et=ne.h;return[d(G),d({h:(et+72)%360,s:ne.s,l:ne.l}),d({h:(et+216)%360,s:ne.s,l:ne.l})]}function Ze(G,ne,et){ne=ne||6,et=et||30;var ct=d(G).toHsl(),kt=360/et,Gt=[d(G)];for(ct.h=(ct.h-(kt*ne>>1)+720)%360;--ne;)ct.h=(ct.h+kt)%360,Gt.push(d(ct));return Gt}function rt(G,ne){ne=ne||6;for(var et=d(G).toHsv(),ct=et.h,kt=et.s,Gt=et.v,$t=[],Ko=1/ne;ne--;)$t.push(d({h:ct,s:kt,v:Gt})),Gt=(Gt+Ko)%1;return $t}d.mix=function(G,ne,et){et=et===0?0:et||50;var ct=d(G).toRgb(),kt=d(ne).toRgb(),Gt=et/100,$t={r:(kt.r-ct.r)*Gt+ct.r,g:(kt.g-ct.g)*Gt+ct.g,b:(kt.b-ct.b)*Gt+ct.b,a:(kt.a-ct.a)*Gt+ct.a};return d($t)},d.readability=function(G,ne){var et=d(G),ct=d(ne);return(v.max(et.getLuminance(),ct.getLuminance())+.05)/(v.min(et.getLuminance(),ct.getLuminance())+.05)},d.isReadable=function(G,ne,et){var ct=d.readability(G,ne),kt,Gt;switch(Gt=!1,kt=ke(et),kt.level+kt.size){case"AAsmall":case"AAAlarge":Gt=ct>=4.5;break;case"AAlarge":Gt=ct>=3;break;case"AAAsmall":Gt=ct>=7;break}return Gt},d.mostReadable=function(G,ne,et){var ct=null,kt=0,Gt,$t,Ko,Up;et=et||{},$t=et.includeFallbackColors,Ko=et.level,Up=et.size;for(var e0=0;e0<ne.length;e0++)Gt=d.readability(G,ne[e0]),Gt>kt&&(kt=Gt,ct=d(ne[e0]));return d.isReadable(G,ct,{level:Ko,size:Up})||!$t?ct:(et.includeFallbackColors=!1,d.mostReadable(G,["#fff","#000"],et))};var dt=d.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},pt=d.hexNames=se(dt);function se(G){var ne={};for(var et in G)G.hasOwnProperty(et)&&(ne[G[et]]=et);return ne}function gt(G){return G=parseFloat(G),(isNaN(G)||G<0||G>1)&&(G=1),G}function xt(G,ne){Pt(G)&&(G="100%");var et=xn(G);return G=x(ne,w(0,parseFloat(G))),et&&(G=parseInt(G*ne,10)/100),v.abs(G-ne)<1e-6?1:G%ne/parseFloat(ne)}function Nt(G){return x(1,w(0,G))}function Rt(G){return parseInt(G,16)}function Pt(G){return typeof G=="string"&&G.indexOf(".")!=-1&&parseFloat(G)===1}function xn(G){return typeof G=="string"&&G.indexOf("%")!=-1}function oa(G){return G.length==1?"0"+G:""+G}function jo(G){return G<=1&&(G=G*100+"%"),G}function lt(G){return v.round(parseFloat(G)*255).toString(16)}function ut(G){return Rt(G)/255}var $=(function(){var G="[-\\+]?\\d+%?",ne="[-\\+]?\\d*\\.\\d+%?",et="(?:"+ne+")|(?:"+G+")",ct="[\\s|\\(]+("+et+")[,|\\s]+("+et+")[,|\\s]+("+et+")\\s*\\)?",kt="[\\s|\\(]+("+et+")[,|\\s]+("+et+")[,|\\s]+("+et+")[,|\\s]+("+et+")\\s*\\)?";return{CSS_UNIT:new RegExp(et),rgb:new RegExp("rgb"+ct),rgba:new RegExp("rgba"+kt),hsl:new RegExp("hsl"+ct),hsla:new RegExp("hsla"+kt),hsv:new RegExp("hsv"+ct),hsva:new RegExp("hsva"+kt),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}})();function yt(G){return!!$.CSS_UNIT.exec(G)}function Lt(G){G=G.replace(c,"").replace(h,"").toLowerCase();var ne=!1;if(dt[G])G=dt[G],ne=!0;else if(G=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var et;return(et=$.rgb.exec(G))?{r:et[1],g:et[2],b:et[3]}:(et=$.rgba.exec(G))?{r:et[1],g:et[2],b:et[3],a:et[4]}:(et=$.hsl.exec(G))?{h:et[1],s:et[2],l:et[3]}:(et=$.hsla.exec(G))?{h:et[1],s:et[2],l:et[3],a:et[4]}:(et=$.hsv.exec(G))?{h:et[1],s:et[2],v:et[3]}:(et=$.hsva.exec(G))?{h:et[1],s:et[2],v:et[3],a:et[4]}:(et=$.hex8.exec(G))?{r:Rt(et[1]),g:Rt(et[2]),b:Rt(et[3]),a:ut(et[4]),format:ne?"name":"hex8"}:(et=$.hex6.exec(G))?{r:Rt(et[1]),g:Rt(et[2]),b:Rt(et[3]),format:ne?"name":"hex"}:(et=$.hex4.exec(G))?{r:Rt(et[1]+""+et[1]),g:Rt(et[2]+""+et[2]),b:Rt(et[3]+""+et[3]),a:ut(et[4]+""+et[4]),format:ne?"name":"hex8"}:(et=$.hex3.exec(G))?{r:Rt(et[1]+""+et[1]),g:Rt(et[2]+""+et[2]),b:Rt(et[3]+""+et[3]),format:ne?"name":"hex"}:!1}function ke(G){var ne,et;return G=G||{level:"AA",size:"small"},ne=(G.level||"AA").toUpperCase(),et=(G.size||"small").toLowerCase(),ne!=="AA"&&ne!=="AAA"&&(ne="AA"),et!=="small"&&et!=="large"&&(et="small"),{level:ne,size:et}}typeof ve<"u"&&ve.exports?ve.exports=d:window.tinycolor=d})(Math)}),bt=t(Ue=>{var ve=V(),v=Array.isArray;function c(_,y){var x,w;for(x=0;x<_.length;x++){if(w=_[x],w!==null&&typeof w=="object")return!1;w!==void 0&&(y[x]=w)}return!0}Ue.extendFlat=function(){return h(arguments,!1,!1,!1)},Ue.extendDeep=function(){return h(arguments,!0,!1,!1)},Ue.extendDeepAll=function(){return h(arguments,!0,!0,!1)},Ue.extendDeepNoArrays=function(){return h(arguments,!0,!1,!0)};function h(_,y,x,w){var A=_[0],d=_.length,k,T,L,j,P,N,O;if(d===2&&v(A)&&v(_[1])&&A.length===0){if(O=c(_[1],A),O)return A;A.splice(0,A.length)}for(var B=1;B<d;B++){k=_[B];for(T in k)L=A[T],j=k[T],w&&v(j)?A[T]=j:y&&j&&(ve(j)||(P=v(j)))?(P?(P=!1,N=L&&v(L)?L:[]):N=L&&ve(L)?L:{},A[T]=h([N,j],y,x,w)):(typeof j<"u"||x)&&(A[T]=j)}return A}}),Ut=t((Ue,ve)=>{ve.exports=function(v){var c=v.variantValues,h=v.editType,_=v.colorEditType;_===void 0&&(_=h);var y={editType:h,valType:"integer",min:1,max:1e3,extras:["normal","bold"],dflt:"normal"};v.noNumericWeightValues&&(y.valType="enumerated",y.values=y.extras,y.extras=void 0,y.min=void 0,y.max=void 0);var x={family:{valType:"string",noBlank:!0,strict:!0,editType:h},size:{valType:"number",min:1,editType:h},color:{valType:"color",editType:_},weight:y,style:{editType:h,valType:"enumerated",values:["normal","italic"],dflt:"normal"},variant:v.noFontVariant?void 0:{editType:h,valType:"enumerated",values:c||["normal","small-caps","all-small-caps","all-petite-caps","petite-caps","unicase"],dflt:"normal"},textcase:v.noFontTextcase?void 0:{editType:h,valType:"enumerated",values:["normal","word caps","upper","lower"],dflt:"normal"},lineposition:v.noFontLineposition?void 0:{editType:h,valType:"flaglist",flags:["under","over","through"],extras:["none"],dflt:"none"},shadow:v.noFontShadow?void 0:{editType:h,valType:"string",dflt:v.autoShadowDflt?"auto":"none"},editType:h};return v.autoSize&&(x.size.dflt="auto"),v.autoColor&&(x.color.dflt="auto"),v.arrayOk&&(x.family.arrayOk=!0,x.weight.arrayOk=!0,x.style.arrayOk=!0,v.noFontVariant||(x.variant.arrayOk=!0),v.noFontTextcase||(x.textcase.arrayOk=!0),v.noFontLineposition||(x.lineposition.arrayOk=!0),v.noFontShadow||(x.shadow.arrayOk=!0),x.size.arrayOk=!0,x.color.arrayOk=!0),x}}),it=t((Ue,ve)=>{ve.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}}),zt=t((Ue,ve)=>{var v=it(),c=Ut(),h=c({editType:"none"});h.family.dflt=v.HOVERFONT,h.size.dflt=v.HOVERFONTSIZE,ve.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoversubplots:{valType:"enumerated",values:["single","overlaying","axis"],dflt:"overlaying",editType:"none"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:h,grouptitlefont:c({editType:"none"}),align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},showarrow:{valType:"boolean",dflt:!0,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}}),Zt=t((Ue,ve)=>{var v=Ut(),c=zt().hoverlabel,h=bt().extendFlat;ve.exports={hoverlabel:{bgcolor:h({},c.bgcolor,{arrayOk:!0}),bordercolor:h({},c.bordercolor,{arrayOk:!0}),font:v({arrayOk:!0,editType:"none"}),align:h({},c.align,{arrayOk:!0}),namelength:h({},c.namelength,{arrayOk:!0}),showarrow:h({},c.showarrow),editType:"none"}}}),Mn=t((Ue,ve)=>{var v=Ut(),c=Zt();ve.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legend:{valType:"subplotid",dflt:"legend",editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:v({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},legendwidth:{valType:"number",min:0,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:c.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},uirevision:{valType:"any",editType:"none"}}}),kp=t((Ue,ve)=>{var v=wt(),c={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},h=c.RdBu;function _(w,A){if(A||(A=h),!w)return A;function d(){try{w=c[w]||JSON.parse(w)}catch{w=A}}return typeof w=="string"&&(d(),typeof w=="string"&&d()),y(w)?w:A}function y(w){var A=0;if(!Array.isArray(w)||w.length<2||!w[0]||!w[w.length-1]||+w[0][0]!=0||+w[w.length-1][0]!=1)return!1;for(var d=0;d<w.length;d++){var k=w[d];if(k.length!==2||+k[0]<A||!v(k[1]).isValid())return!1;A=+k[0]}return!0}function x(w){return c[w]!==void 0?!0:y(w)}ve.exports={scales:c,defaultScale:h,get:_,isValid:x}}),zp=t(Ue=>{Ue.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],Ue.defaultLine="#444",Ue.lightLine="#eee",Ue.background="#fff",Ue.borderLine="#BEC8D9",Ue.lightFraction=1e3/11}),sa=t((Ue,ve)=>{var v=wt(),c=E(),h=Z().isTypedArray,_=ve.exports={},y=zp();_.defaults=y.defaults;var x=_.defaultLine=y.defaultLine;_.lightLine=y.lightLine;var w=_.background=y.background;_.tinyRGB=function(d){var k=d.toRgb();return"rgb("+Math.round(k.r)+", "+Math.round(k.g)+", "+Math.round(k.b)+")"},_.rgb=function(d){return _.tinyRGB(v(d))},_.opacity=function(d){return d?v(d).getAlpha():0},_.addOpacity=function(d,k){var T=v(d).toRgb();return"rgba("+Math.round(T.r)+", "+Math.round(T.g)+", "+Math.round(T.b)+", "+k+")"},_.combine=function(d,k){var T=v(d).toRgb();if(T.a===1)return v(d).toRgbString();var L=v(k||w).toRgb(),j=L.a===1?L:{r:255*(1-L.a)+L.r*L.a,g:255*(1-L.a)+L.g*L.a,b:255*(1-L.a)+L.b*L.a},P={r:j.r*(1-T.a)+T.r*T.a,g:j.g*(1-T.a)+T.g*T.a,b:j.b*(1-T.a)+T.b*T.a};return v(P).toRgbString()},_.interpolate=function(d,k,T){var L=v(d).toRgb(),j=v(k).toRgb(),P={r:T*L.r+(1-T)*j.r,g:T*L.g+(1-T)*j.g,b:T*L.b+(1-T)*j.b};return v(P).toRgbString()},_.contrast=function(d,k,T){var L=v(d);L.getAlpha()!==1&&(L=v(_.combine(d,w)));var j=L.isDark()?k?L.lighten(k):w:T?L.darken(T):x;return j.toString()},_.stroke=function(d,k){var T=v(k);d.style({stroke:_.tinyRGB(T),"stroke-opacity":T.getAlpha()})},_.fill=function(d,k){var T=v(k);d.style({fill:_.tinyRGB(T),"fill-opacity":T.getAlpha()})},_.clean=function(d){if(!(!d||typeof d!="object")){var k=Object.keys(d),T,L,j,P;for(T=0;T<k.length;T++)if(j=k[T],P=d[j],j.substr(j.length-5)==="color")if(Array.isArray(P))for(L=0;L<P.length;L++)P[L]=A(P[L]);else d[j]=A(P);else if(j.substr(j.length-10)==="colorscale"&&Array.isArray(P))for(L=0;L<P.length;L++)Array.isArray(P[L])&&(P[L][1]=A(P[L][1]));else if(Array.isArray(P)){var N=P[0];if(!Array.isArray(N)&&N&&typeof N=="object")for(L=0;L<P.length;L++)_.clean(P[L])}else P&&typeof P=="object"&&!h(P)&&_.clean(P)}};function A(d){if(c(d)||typeof d!="string")return d;var k=d.trim();if(k.substr(0,3)!=="rgb")return d;var T=k.match(/^rgba?\s*\(([^()]*)\)$/);if(!T)return d;var L=T[1].trim().split(/\s*[\s,]\s*/),j=k.charAt(3)==="a"&&L.length===4;if(!j&&L.length!==3)return d;for(var P=0;P<L.length;P++){if(!L[P].length||(L[P]=Number(L[P]),!(L[P]>=0)))return d;if(P===3)L[P]>1&&(L[P]=1);else if(L[P]>=1)return d}var N=Math.round(L[0]*255)+", "+Math.round(L[1]*255)+", "+Math.round(L[2]*255);return j?"rgba("+N+", "+L[3]+")":"rgb("+N+")"}}),qo=t((Ue,ve)=>{ve.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}}),ae=t(Ue=>{Ue.counter=function(ve,v,c,h){var _=(v||"")+(c?"":"$"),y=h===!1?"":"^";return ve==="xy"?new RegExp(y+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+_):new RegExp(y+ve+"([2-9]|[1-9][0-9]+)?"+_)}}),wp=t(Ue=>{var ve=E(),v=wt(),c=bt().extendFlat,h=Mn(),_=kp(),y=sa(),x=qo().DESELECTDIM,w=ee(),A=ae().counter,d=Q().modHalf,k=Z().isArrayOrTypedArray,T=Z().isTypedArraySpec,L=Z().decodeTypedArraySpec;Ue.valObjectMeta={data_array:{coerceFunction:function(P,N,O){N.set(k(P)?P:T(P)?L(P):O)}},enumerated:{coerceFunction:function(P,N,O,B){B.coerceNumber&&(P=+P),B.values.indexOf(P)===-1?N.set(O):N.set(P)},validateFunction:function(P,N){N.coerceNumber&&(P=+P);for(var O=N.values,B=0;B<O.length;B++){var S=String(O[B]);if(S.charAt(0)==="/"&&S.charAt(S.length-1)==="/"){var D=new RegExp(S.substr(1,S.length-2));if(D.test(P))return!0}else if(P===O[B])return!0}return!1}},boolean:{coerceFunction:function(P,N,O){P===!0||P===!1?N.set(P):N.set(O)}},number:{coerceFunction:function(P,N,O,B){T(P)&&(P=L(P)),!ve(P)||B.min!==void 0&&P<B.min||B.max!==void 0&&P>B.max?N.set(O):N.set(+P)}},integer:{coerceFunction:function(P,N,O,B){if((B.extras||[]).indexOf(P)!==-1){N.set(P);return}T(P)&&(P=L(P)),P%1||!ve(P)||B.min!==void 0&&P<B.min||B.max!==void 0&&P>B.max?N.set(O):N.set(+P)}},string:{coerceFunction:function(P,N,O,B){if(typeof P!="string"){var S=typeof P=="number";B.strict===!0||!S?N.set(O):N.set(String(P))}else B.noBlank&&!P?N.set(O):N.set(P)}},color:{coerceFunction:function(P,N,O){T(P)&&(P=L(P)),v(P).isValid()?N.set(P):N.set(O)}},colorlist:{coerceFunction:function(P,N,O){function B(S){return v(S).isValid()}!Array.isArray(P)||!P.length?N.set(O):P.every(B)?N.set(P):N.set(O)}},colorscale:{coerceFunction:function(P,N,O){N.set(_.get(P,O))}},angle:{coerceFunction:function(P,N,O){T(P)&&(P=L(P)),P==="auto"?N.set("auto"):ve(P)?N.set(d(+P,360)):N.set(O)}},subplotid:{coerceFunction:function(P,N,O,B){var S=B.regex||A(O);if(typeof P=="string"&&S.test(P)){N.set(P);return}N.set(O)},validateFunction:function(P,N){var O=N.dflt;return P===O?!0:typeof P!="string"?!1:!!A(O).test(P)}},flaglist:{coerceFunction:function(P,N,O,B){if((B.extras||[]).indexOf(P)!==-1){N.set(P);return}if(typeof P!="string"){N.set(O);return}for(var S=P.split("+"),D=0;D<S.length;){var z=S[D];B.flags.indexOf(z)===-1||S.indexOf(z)<D?S.splice(D,1):D++}S.length?N.set(S.join("+")):N.set(O)}},any:{coerceFunction:function(P,N,O){P===void 0?N.set(O):N.set(T(P)?L(P):P)}},info_array:{coerceFunction:function(P,N,O,B){function S(dt,pt,se){var gt,xt={set:function(Nt){gt=Nt}};return se===void 0&&(se=pt.dflt),Ue.valObjectMeta[pt.valType].coerceFunction(dt,xt,se,pt),gt}if(T(P)&&(P=L(P)),!k(P)){N.set(O);return}var D=B.dimensions===2||B.dimensions==="1-2"&&Array.isArray(P)&&k(P[0]),z=B.items,H=[],Y=Array.isArray(z),ht=Y&&D&&k(z[0]),Se=D&&Y&&!ht,ie=Y&&!Se?z.length:P.length,X,ft,Le,nt,Ze,rt;if(O=Array.isArray(O)?O:[],D)for(X=0;X<ie;X++)for(H[X]=[],Le=k(P[X])?P[X]:[],Se?Ze=z.length:Y?Ze=z[X].length:Ze=Le.length,ft=0;ft<Ze;ft++)Se?nt=z[ft]:Y?nt=z[X][ft]:nt=z,rt=S(Le[ft],nt,(O[X]||[])[ft]),rt!==void 0&&(H[X][ft]=rt);else for(X=0;X<ie;X++)rt=S(P[X],Y?z[X]:z,O[X]),rt!==void 0&&(H[X]=rt);N.set(H)},validateFunction:function(P,N){if(!k(P))return!1;var O=N.items,B=Array.isArray(O),S=N.dimensions===2;if(!N.freeLength&&P.length!==O.length)return!1;for(var D=0;D<P.length;D++)if(S){if(!k(P[D])||!N.freeLength&&P[D].length!==O[D].length)return!1;for(var z=0;z<P[D].length;z++)if(!j(P[D][z],B?O[D][z]:O))return!1}else if(!j(P[D],B?O[D]:O))return!1;return!0}}},Ue.coerce=function(P,N,O,B,S){var D=w(O,B).get(),z=w(P,B),H=w(N,B),Y=z.get(),ht=N._template;if(Y===void 0&&ht&&(Y=w(ht,B).get(),ht=0),S===void 0&&(S=D.dflt),D.arrayOk){if(k(Y))return H.set(Y),Y;if(T(Y))return Y=L(Y),H.set(Y),Y}var Se=Ue.valObjectMeta[D.valType].coerceFunction;Se(Y,H,S,D);var ie=H.get();return ht&&ie===S&&!j(Y,D)&&(Y=w(ht,B).get(),Se(Y,H,S,D),ie=H.get()),ie},Ue.coerce2=function(P,N,O,B,S){var D=w(P,B),z=Ue.coerce(P,N,O,B,S),H=D.get();return H!=null?z:!1},Ue.coerceFont=function(P,N,O,B){B||(B={}),O=c({},O),O=c(O,B.overrideDflt||{});var S={family:P(N+".family",O.family),size:P(N+".size",O.size),color:P(N+".color",O.color),weight:P(N+".weight",O.weight),style:P(N+".style",O.style)};if(B.noFontVariant||(S.variant=P(N+".variant",O.variant)),B.noFontLineposition||(S.lineposition=P(N+".lineposition",O.lineposition)),B.noFontTextcase||(S.textcase=P(N+".textcase",O.textcase)),!B.noFontShadow){var D=O.shadow;D==="none"&&B.autoShadowDflt&&(D="auto"),S.shadow=P(N+".shadow",D)}return S},Ue.coercePattern=function(P,N,O,B){var S=P(N+".shape"),D;if(S||(D=P(N+".path")),S||D){S&&P(N+".solidity"),P(N+".size");var z=P(N+".fillmode"),H=z==="overlay";if(!B){var Y=P(N+".bgcolor",H?O:void 0);P(N+".fgcolor",H?y.contrast(Y):O)}P(N+".fgopacity",H?.5:1)}},Ue.coerceHoverinfo=function(P,N,O){var B=N._module.attributes,S=B.hoverinfo?B:h,D=S.hoverinfo,z;if(O._dataLength===1){var H=D.dflt==="all"?D.flags.slice():D.dflt.split("+");H.splice(H.indexOf("name"),1),z=H.join("+")}return Ue.coerce(P,N,S,"hoverinfo",z)},Ue.coerceSelectionMarkerOpacity=function(P,N){if(P.marker){var O=P.marker.opacity;if(O!==void 0){var B,S;!k(O)&&!P.selected&&!P.unselected&&(B=O,S=x*O),N("selected.marker.opacity",B),N("unselected.marker.opacity",S)}}};function j(P,N){var O=Ue.valObjectMeta[N.valType];if(N.arrayOk&&k(P))return!0;if(O.validateFunction)return O.validateFunction(P,N);var B={},S=B,D={set:function(z){S=z}};return O.coerceFunction(P,D,B,N),S!==B}Ue.validate=j}),Cp=t((Ue,ve)=>{var v={staticPlot:{valType:"boolean",dflt:!1},typesetMath:{valType:"boolean",dflt:!0},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},editSelection:{valType:"boolean",dflt:!0},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox","map"],extras:[!0,!1],dflt:"gl3d+geo+map"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/un/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},c={};function h(_,y){for(var x in _){var w=_[x];w.valType?y[x]=w.dflt:(y[x]||(y[x]={}),h(w,y[x]))}}h(v,c),ve.exports={configAttributes:v,dfltConfig:c}}),Kt=t((Ue,ve)=>{var v=l(),c=E(),h=[];ve.exports=function(_,y){if(h.indexOf(_)!==-1)return;h.push(_);var x=1e3;c(y)?x=y:y==="long"&&(x=3e3);var w=v.select("body").selectAll(".plotly-notifier").data([0]);w.enter().append("div").classed("plotly-notifier",!0);var A=w.selectAll(".notifier-note").data(h);function d(k){k.duration(700).style("opacity",0).each("end",function(T){var L=h.indexOf(T);L!==-1&&h.splice(L,1),v.select(this).remove()})}A.enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(k){var T=v.select(this);T.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){T.transition().call(d)});for(var L=T.append("p"),j=k.split(/<br\s*\/?>/g),P=0;P<j.length;P++)P&&L.append("br"),L.append("span").text(j[P]);y==="stick"?T.transition().duration(350).style("opacity",1):T.transition().duration(700).style("opacity",1).transition().delay(x).call(d)})}}),h0=t((Ue,ve)=>{var v=Cp().dfltConfig,c=Kt(),h=ve.exports={};h.log=function(){var _;if(v.logging>1){var y=["LOG:"];for(_=0;_<arguments.length;_++)y.push(arguments[_]);console.trace.apply(console,y)}if(v.notifyOnLogging>1){var x=[];for(_=0;_<arguments.length;_++)x.push(arguments[_]);c(x.join("<br>"),"long")}},h.warn=function(){var _;if(v.logging>0){var y=["WARN:"];for(_=0;_<arguments.length;_++)y.push(arguments[_]);console.trace.apply(console,y)}if(v.notifyOnLogging>0){var x=[];for(_=0;_<arguments.length;_++)x.push(arguments[_]);c(x.join("<br>"),"stick")}},h.error=function(){var _;if(v.logging>0){var y=["ERROR:"];for(_=0;_<arguments.length;_++)y.push(arguments[_]);console.error.apply(console,y)}if(v.notifyOnLogging>0){var x=[];for(_=0;_<arguments.length;_++)x.push(arguments[_]);c(x.join("<br>"),"stick")}}}),Pp=t((Ue,ve)=>{ve.exports=function(){}}),d0=t((Ue,ve)=>{ve.exports=function(v,c){if(c instanceof RegExp){for(var h=c.toString(),_=0;_<v.length;_++)if(v[_]instanceof RegExp&&v[_].toString()===h)return v;v.push(c)}else(c||c===0)&&v.indexOf(c)===-1&&v.push(c);return v}}),x0=t((Ue,ve)=>{ve.exports=v;function v(){var c=new Float32Array(16);return c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=1,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}}),Dp=t((Ue,ve)=>{ve.exports=v;function v(c){var h=new Float32Array(16);return h[0]=c[0],h[1]=c[1],h[2]=c[2],h[3]=c[3],h[4]=c[4],h[5]=c[5],h[6]=c[6],h[7]=c[7],h[8]=c[8],h[9]=c[9],h[10]=c[10],h[11]=c[11],h[12]=c[12],h[13]=c[13],h[14]=c[14],h[15]=c[15],h}}),c0=t((Ue,ve)=>{ve.exports=v;function v(c,h){return c[0]=h[0],c[1]=h[1],c[2]=h[2],c[3]=h[3],c[4]=h[4],c[5]=h[5],c[6]=h[6],c[7]=h[7],c[8]=h[8],c[9]=h[9],c[10]=h[10],c[11]=h[11],c[12]=h[12],c[13]=h[13],c[14]=h[14],c[15]=h[15],c}}),u0=t((Ue,ve)=>{ve.exports=v;function v(c){return c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=1,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}}),y0=t((Ue,ve)=>{ve.exports=v;function v(c,h){if(c===h){var _=h[1],y=h[2],x=h[3],w=h[6],A=h[7],d=h[11];c[1]=h[4],c[2]=h[8],c[3]=h[12],c[4]=_,c[6]=h[9],c[7]=h[13],c[8]=y,c[9]=w,c[11]=h[14],c[12]=x,c[13]=A,c[14]=d}else c[0]=h[0],c[1]=h[4],c[2]=h[8],c[3]=h[12],c[4]=h[1],c[5]=h[5],c[6]=h[9],c[7]=h[13],c[8]=h[2],c[9]=h[6],c[10]=h[10],c[11]=h[14],c[12]=h[3],c[13]=h[7],c[14]=h[11],c[15]=h[15];return c}}),M0=t((Ue,ve)=>{ve.exports=v;function v(c,h){var _=h[0],y=h[1],x=h[2],w=h[3],A=h[4],d=h[5],k=h[6],T=h[7],L=h[8],j=h[9],P=h[10],N=h[11],O=h[12],B=h[13],S=h[14],D=h[15],z=_*d-y*A,H=_*k-x*A,Y=_*T-w*A,ht=y*k-x*d,Se=y*T-w*d,ie=x*T-w*k,X=L*B-j*O,ft=L*S-P*O,Le=L*D-N*O,nt=j*S-P*B,Ze=j*D-N*B,rt=P*D-N*S,dt=z*rt-H*Ze+Y*nt+ht*Le-Se*ft+ie*X;return dt?(dt=1/dt,c[0]=(d*rt-k*Ze+T*nt)*dt,c[1]=(x*Ze-y*rt-w*nt)*dt,c[2]=(B*ie-S*Se+D*ht)*dt,c[3]=(P*Se-j*ie-N*ht)*dt,c[4]=(k*Le-A*rt-T*ft)*dt,c[5]=(_*rt-x*Le+w*ft)*dt,c[6]=(S*Y-O*ie-D*H)*dt,c[7]=(L*ie-P*Y+N*H)*dt,c[8]=(A*Ze-d*Le+T*X)*dt,c[9]=(y*Le-_*Ze-w*X)*dt,c[10]=(O*Se-B*Y+D*z)*dt,c[11]=(j*Y-L*Se-N*z)*dt,c[12]=(d*ft-A*nt-k*X)*dt,c[13]=(_*nt-y*ft+x*X)*dt,c[14]=(B*H-O*ht-S*z)*dt,c[15]=(L*ht-j*H+P*z)*dt,c):null}}),sm=t((Ue,ve)=>{ve.exports=v;function v(c,h){var _=h[0],y=h[1],x=h[2],w=h[3],A=h[4],d=h[5],k=h[6],T=h[7],L=h[8],j=h[9],P=h[10],N=h[11],O=h[12],B=h[13],S=h[14],D=h[15];return c[0]=d*(P*D-N*S)-j*(k*D-T*S)+B*(k*N-T*P),c[1]=-(y*(P*D-N*S)-j*(x*D-w*S)+B*(x*N-w*P)),c[2]=y*(k*D-T*S)-d*(x*D-w*S)+B*(x*T-w*k),c[3]=-(y*(k*N-T*P)-d*(x*N-w*P)+j*(x*T-w*k)),c[4]=-(A*(P*D-N*S)-L*(k*D-T*S)+O*(k*N-T*P)),c[5]=_*(P*D-N*S)-L*(x*D-w*S)+O*(x*N-w*P),c[6]=-(_*(k*D-T*S)-A*(x*D-w*S)+O*(x*T-w*k)),c[7]=_*(k*N-T*P)-A*(x*N-w*P)+L*(x*T-w*k),c[8]=A*(j*D-N*B)-L*(d*D-T*B)+O*(d*N-T*j),c[9]=-(_*(j*D-N*B)-L*(y*D-w*B)+O*(y*N-w*j)),c[10]=_*(d*D-T*B)-A*(y*D-w*B)+O*(y*T-w*d),c[11]=-(_*(d*N-T*j)-A*(y*N-w*j)+L*(y*T-w*d)),c[12]=-(A*(j*S-P*B)-L*(d*S-k*B)+O*(d*P-k*j)),c[13]=_*(j*S-P*B)-L*(y*S-x*B)+O*(y*P-x*j),c[14]=-(_*(d*S-k*B)-A*(y*S-x*B)+O*(y*k-x*d)),c[15]=_*(d*P-k*j)-A*(y*P-x*j)+L*(y*k-x*d),c}}),mm=t((Ue,ve)=>{ve.exports=v;function v(c){var h=c[0],_=c[1],y=c[2],x=c[3],w=c[4],A=c[5],d=c[6],k=c[7],T=c[8],L=c[9],j=c[10],P=c[11],N=c[12],O=c[13],B=c[14],S=c[15],D=h*A-_*w,z=h*d-y*w,H=h*k-x*w,Y=_*d-y*A,ht=_*k-x*A,Se=y*k-x*d,ie=T*O-L*N,X=T*B-j*N,ft=T*S-P*N,Le=L*B-j*O,nt=L*S-P*O,Ze=j*S-P*B;return D*Ze-z*nt+H*Le+Y*ft-ht*X+Se*ie}}),Mm=t((Ue,ve)=>{ve.exports=v;function v(c,h,_){var y=h[0],x=h[1],w=h[2],A=h[3],d=h[4],k=h[5],T=h[6],L=h[7],j=h[8],P=h[9],N=h[10],O=h[11],B=h[12],S=h[13],D=h[14],z=h[15],H=_[0],Y=_[1],ht=_[2],Se=_[3];return c[0]=H*y+Y*d+ht*j+Se*B,c[1]=H*x+Y*k+ht*P+Se*S,c[2]=H*w+Y*T+ht*N+Se*D,c[3]=H*A+Y*L+ht*O+Se*z,H=_[4],Y=_[5],ht=_[6],Se=_[7],c[4]=H*y+Y*d+ht*j+Se*B,c[5]=H*x+Y*k+ht*P+Se*S,c[6]=H*w+Y*T+ht*N+Se*D,c[7]=H*A+Y*L+ht*O+Se*z,H=_[8],Y=_[9],ht=_[10],Se=_[11],c[8]=H*y+Y*d+ht*j+Se*B,c[9]=H*x+Y*k+ht*P+Se*S,c[10]=H*w+Y*T+ht*N+Se*D,c[11]=H*A+Y*L+ht*O+Se*z,H=_[12],Y=_[13],ht=_[14],Se=_[15],c[12]=H*y+Y*d+ht*j+Se*B,c[13]=H*x+Y*k+ht*P+Se*S,c[14]=H*w+Y*T+ht*N+Se*D,c[15]=H*A+Y*L+ht*O+Se*z,c}}),v1=t((Ue,ve)=>{ve.exports=v;function v(c,h,_){var y=_[0],x=_[1],w=_[2],A,d,k,T,L,j,P,N,O,B,S,D;return h===c?(c[12]=h[0]*y+h[4]*x+h[8]*w+h[12],c[13]=h[1]*y+h[5]*x+h[9]*w+h[13],c[14]=h[2]*y+h[6]*x+h[10]*w+h[14],c[15]=h[3]*y+h[7]*x+h[11]*w+h[15]):(A=h[0],d=h[1],k=h[2],T=h[3],L=h[4],j=h[5],P=h[6],N=h[7],O=h[8],B=h[9],S=h[10],D=h[11],c[0]=A,c[1]=d,c[2]=k,c[3]=T,c[4]=L,c[5]=j,c[6]=P,c[7]=N,c[8]=O,c[9]=B,c[10]=S,c[11]=D,c[12]=A*y+L*x+O*w+h[12],c[13]=d*y+j*x+B*w+h[13],c[14]=k*y+P*x+S*w+h[14],c[15]=T*y+N*x+D*w+h[15]),c}}),v0=t((Ue,ve)=>{ve.exports=v;function v(c,h,_){var y=_[0],x=_[1],w=_[2];return c[0]=h[0]*y,c[1]=h[1]*y,c[2]=h[2]*y,c[3]=h[3]*y,c[4]=h[4]*x,c[5]=h[5]*x,c[6]=h[6]*x,c[7]=h[7]*x,c[8]=h[8]*w,c[9]=h[9]*w,c[10]=h[10]*w,c[11]=h[11]*w,c[12]=h[12],c[13]=h[13],c[14]=h[14],c[15]=h[15],c}}),D1=t((Ue,ve)=>{ve.exports=v;function v(c,h,_,y){var x=y[0],w=y[1],A=y[2],d=Math.sqrt(x*x+w*w+A*A),k,T,L,j,P,N,O,B,S,D,z,H,Y,ht,Se,ie,X,ft,Le,nt,Ze,rt,dt,pt;return Math.abs(d)<1e-6?null:(d=1/d,x*=d,w*=d,A*=d,k=Math.sin(_),T=Math.cos(_),L=1-T,j=h[0],P=h[1],N=h[2],O=h[3],B=h[4],S=h[5],D=h[6],z=h[7],H=h[8],Y=h[9],ht=h[10],Se=h[11],ie=x*x*L+T,X=w*x*L+A*k,ft=A*x*L-w*k,Le=x*w*L-A*k,nt=w*w*L+T,Ze=A*w*L+x*k,rt=x*A*L+w*k,dt=w*A*L-x*k,pt=A*A*L+T,c[0]=j*ie+B*X+H*ft,c[1]=P*ie+S*X+Y*ft,c[2]=N*ie+D*X+ht*ft,c[3]=O*ie+z*X+Se*ft,c[4]=j*Le+B*nt+H*Ze,c[5]=P*Le+S*nt+Y*Ze,c[6]=N*Le+D*nt+ht*Ze,c[7]=O*Le+z*nt+Se*Ze,c[8]=j*rt+B*dt+H*pt,c[9]=P*rt+S*dt+Y*pt,c[10]=N*rt+D*dt+ht*pt,c[11]=O*rt+z*dt+Se*pt,h!==c&&(c[12]=h[12],c[13]=h[13],c[14]=h[14],c[15]=h[15]),c)}}),P1=t((Ue,ve)=>{ve.exports=v;function v(c,h,_){var y=Math.sin(_),x=Math.cos(_),w=h[4],A=h[5],d=h[6],k=h[7],T=h[8],L=h[9],j=h[10],P=h[11];return h!==c&&(c[0]=h[0],c[1]=h[1],c[2]=h[2],c[3]=h[3],c[12]=h[12],c[13]=h[13],c[14]=h[14],c[15]=h[15]),c[4]=w*x+T*y,c[5]=A*x+L*y,c[6]=d*x+j*y,c[7]=k*x+P*y,c[8]=T*x-w*y,c[9]=L*x-A*y,c[10]=j*x-d*y,c[11]=P*x-k*y,c}}),ig=t((Ue,ve)=>{ve.exports=v;function v(c,h,_){var y=Math.sin(_),x=Math.cos(_),w=h[0],A=h[1],d=h[2],k=h[3],T=h[8],L=h[9],j=h[10],P=h[11];return h!==c&&(c[4]=h[4],c[5]=h[5],c[6]=h[6],c[7]=h[7],c[12]=h[12],c[13]=h[13],c[14]=h[14],c[15]=h[15]),c[0]=w*x-T*y,c[1]=A*x-L*y,c[2]=d*x-j*y,c[3]=k*x-P*y,c[8]=w*y+T*x,c[9]=A*y+L*x,c[10]=d*y+j*x,c[11]=k*y+P*x,c}}),w1=t((Ue,ve)=>{ve.exports=v;function v(c,h,_){var y=Math.sin(_),x=Math.cos(_),w=h[0],A=h[1],d=h[2],k=h[3],T=h[4],L=h[5],j=h[6],P=h[7];return h!==c&&(c[8]=h[8],c[9]=h[9],c[10]=h[10],c[11]=h[11],c[12]=h[12],c[13]=h[13],c[14]=h[14],c[15]=h[15]),c[0]=w*x+T*y,c[1]=A*x+L*y,c[2]=d*x+j*y,c[3]=k*x+P*y,c[4]=T*x-w*y,c[5]=L*x-A*y,c[6]=j*x-d*y,c[7]=P*x-k*y,c}}),o1=t((Ue,ve)=>{ve.exports=v;function v(c,h,_){var y,x,w,A=_[0],d=_[1],k=_[2],T=Math.sqrt(A*A+d*d+k*k);return Math.abs(T)<1e-6?null:(T=1/T,A*=T,d*=T,k*=T,y=Math.sin(h),x=Math.cos(h),w=1-x,c[0]=A*A*w+x,c[1]=d*A*w+k*y,c[2]=k*A*w-d*y,c[3]=0,c[4]=A*d*w-k*y,c[5]=d*d*w+x,c[6]=k*d*w+A*y,c[7]=0,c[8]=A*k*w+d*y,c[9]=d*k*w-A*y,c[10]=k*k*w+x,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c)}}),g1=t((Ue,ve)=>{ve.exports=v;function v(c,h,_){var y=h[0],x=h[1],w=h[2],A=h[3],d=y+y,k=x+x,T=w+w,L=y*d,j=y*k,P=y*T,N=x*k,O=x*T,B=w*T,S=A*d,D=A*k,z=A*T;return c[0]=1-(N+B),c[1]=j+z,c[2]=P-D,c[3]=0,c[4]=j-z,c[5]=1-(L+B),c[6]=O+S,c[7]=0,c[8]=P+D,c[9]=O-S,c[10]=1-(L+N),c[11]=0,c[12]=_[0],c[13]=_[1],c[14]=_[2],c[15]=1,c}}),X1=t((Ue,ve)=>{ve.exports=v;function v(c,h){return c[0]=h[0],c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=h[1],c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=h[2],c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}}),sg=t((Ue,ve)=>{ve.exports=v;function v(c,h){return c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=1,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=h[0],c[13]=h[1],c[14]=h[2],c[15]=1,c}}),og=t((Ue,ve)=>{ve.exports=v;function v(c,h){var _=Math.sin(h),y=Math.cos(h);return c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=y,c[6]=_,c[7]=0,c[8]=0,c[9]=-_,c[10]=y,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}}),R0=t((Ue,ve)=>{ve.exports=v;function v(c,h){var _=Math.sin(h),y=Math.cos(h);return c[0]=y,c[1]=0,c[2]=-_,c[3]=0,c[4]=0,c[5]=1,c[6]=0,c[7]=0,c[8]=_,c[9]=0,c[10]=y,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}}),Xp=t((Ue,ve)=>{ve.exports=v;function v(c,h){var _=Math.sin(h),y=Math.cos(h);return c[0]=y,c[1]=_,c[2]=0,c[3]=0,c[4]=-_,c[5]=y,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}}),wm=t((Ue,ve)=>{ve.exports=v;function v(c,h){var _=h[0],y=h[1],x=h[2],w=h[3],A=_+_,d=y+y,k=x+x,T=_*A,L=y*A,j=y*d,P=x*A,N=x*d,O=x*k,B=w*A,S=w*d,D=w*k;return c[0]=1-j-O,c[1]=L+D,c[2]=P-S,c[3]=0,c[4]=L-D,c[5]=1-T-O,c[6]=N+B,c[7]=0,c[8]=P+S,c[9]=N-B,c[10]=1-T-j,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}}),$m=t((Ue,ve)=>{ve.exports=v;function v(c,h,_,y,x,w,A){var d=1/(_-h),k=1/(x-y),T=1/(w-A);return c[0]=w*2*d,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=w*2*k,c[6]=0,c[7]=0,c[8]=(_+h)*d,c[9]=(x+y)*k,c[10]=(A+w)*T,c[11]=-1,c[12]=0,c[13]=0,c[14]=A*w*2*T,c[15]=0,c}}),Vp=t((Ue,ve)=>{ve.exports=v;function v(c,h,_,y,x){var w=1/Math.tan(h/2),A=1/(y-x);return c[0]=w/_,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=w,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=(x+y)*A,c[11]=-1,c[12]=0,c[13]=0,c[14]=2*x*y*A,c[15]=0,c}}),r0=t((Ue,ve)=>{ve.exports=v;function v(c,h,_,y){var x=Math.tan(h.upDegrees*Math.PI/180),w=Math.tan(h.downDegrees*Math.PI/180),A=Math.tan(h.leftDegrees*Math.PI/180),d=Math.tan(h.rightDegrees*Math.PI/180),k=2/(A+d),T=2/(x+w);return c[0]=k,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=T,c[6]=0,c[7]=0,c[8]=-((A-d)*k*.5),c[9]=(x-w)*T*.5,c[10]=y/(_-y),c[11]=-1,c[12]=0,c[13]=0,c[14]=y*_/(_-y),c[15]=0,c}}),B0=t((Ue,ve)=>{ve.exports=v;function v(c,h,_,y,x,w,A){var d=1/(h-_),k=1/(y-x),T=1/(w-A);return c[0]=-2*d,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=-2*k,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=2*T,c[11]=0,c[12]=(h+_)*d,c[13]=(x+y)*k,c[14]=(A+w)*T,c[15]=1,c}}),bm=t((Ue,ve)=>{var v=u0();ve.exports=c;function c(h,_,y,x){var w,A,d,k,T,L,j,P,N,O,B=_[0],S=_[1],D=_[2],z=x[0],H=x[1],Y=x[2],ht=y[0],Se=y[1],ie=y[2];return Math.abs(B-ht)<1e-6&&Math.abs(S-Se)<1e-6&&Math.abs(D-ie)<1e-6?v(h):(j=B-ht,P=S-Se,N=D-ie,O=1/Math.sqrt(j*j+P*P+N*N),j*=O,P*=O,N*=O,w=H*N-Y*P,A=Y*j-z*N,d=z*P-H*j,O=Math.sqrt(w*w+A*A+d*d),O?(O=1/O,w*=O,A*=O,d*=O):(w=0,A=0,d=0),k=P*d-N*A,T=N*w-j*d,L=j*A-P*w,O=Math.sqrt(k*k+T*T+L*L),O?(O=1/O,k*=O,T*=O,L*=O):(k=0,T=0,L=0),h[0]=w,h[1]=k,h[2]=j,h[3]=0,h[4]=A,h[5]=T,h[6]=P,h[7]=0,h[8]=d,h[9]=L,h[10]=N,h[11]=0,h[12]=-(w*B+A*S+d*D),h[13]=-(k*B+T*S+L*D),h[14]=-(j*B+P*S+N*D),h[15]=1,h)}}),Sm=t((Ue,ve)=>{ve.exports=v;function v(c){return"mat4("+c[0]+", "+c[1]+", "+c[2]+", "+c[3]+", "+c[4]+", "+c[5]+", "+c[6]+", "+c[7]+", "+c[8]+", "+c[9]+", "+c[10]+", "+c[11]+", "+c[12]+", "+c[13]+", "+c[14]+", "+c[15]+")"}}),Xm=t((Ue,ve)=>{ve.exports={create:x0(),clone:Dp(),copy:c0(),identity:u0(),transpose:y0(),invert:M0(),adjoint:sm(),determinant:mm(),multiply:Mm(),translate:v1(),scale:v0(),rotate:D1(),rotateX:P1(),rotateY:ig(),rotateZ:w1(),fromRotation:o1(),fromRotationTranslation:g1(),fromScaling:X1(),fromTranslation:sg(),fromXRotation:og(),fromYRotation:R0(),fromZRotation:Xp(),fromQuat:wm(),frustum:$m(),perspective:Vp(),perspectiveFromFieldOfView:r0(),ortho:B0(),lookAt:bm(),str:Sm()}}),cm=t(Ue=>{var ve=Xm();Ue.init2dArray=function(v,c){for(var h=new Array(v),_=0;_<v;_++)h[_]=new Array(c);return h},Ue.transposeRagged=function(v){var c=0,h=v.length,_,y;for(_=0;_<h;_++)c=Math.max(c,v[_].length);var x=new Array(c);for(_=0;_<c;_++)for(x[_]=new Array(h),y=0;y<h;y++)x[_][y]=v[y][_];return x},Ue.dot=function(v,c){if(!(v.length&&c.length)||v.length!==c.length)return null;var h=v.length,_,y;if(v[0].length)for(_=new Array(h),y=0;y<h;y++)_[y]=Ue.dot(v[y],c);else if(c[0].length){var x=Ue.transposeRagged(c);for(_=new Array(x.length),y=0;y<x.length;y++)_[y]=Ue.dot(v,x[y])}else for(_=0,y=0;y<h;y++)_+=v[y]*c[y];return _},Ue.translationMatrix=function(v,c){return[[1,0,v],[0,1,c],[0,0,1]]},Ue.rotationMatrix=function(v){var c=v*Math.PI/180;return[[Math.cos(c),-Math.sin(c),0],[Math.sin(c),Math.cos(c),0],[0,0,1]]},Ue.rotationXYMatrix=function(v,c,h){return Ue.dot(Ue.dot(Ue.translationMatrix(c,h),Ue.rotationMatrix(v)),Ue.translationMatrix(-c,-h))},Ue.apply3DTransform=function(v){return function(){var c=arguments,h=arguments.length===1?c[0]:[c[0],c[1],c[2]||0];return Ue.dot(v,[h[0],h[1],h[2],1]).slice(0,3)}},Ue.apply2DTransform=function(v){return function(){var c=arguments;c.length===3&&(c=c[0]);var h=arguments.length===1?c[0]:[c[0],c[1]];return Ue.dot(v,[h[0],h[1],1]).slice(0,2)}},Ue.apply2DTransform2=function(v){var c=Ue.apply2DTransform(v);return function(h){return c(h.slice(0,2)).concat(c(h.slice(2,4)))}},Ue.convertCssMatrix=function(v){if(v){var c=v.length;if(c===16)return v;if(c===6)return[v[0],v[1],0,0,v[2],v[3],0,0,0,0,1,0,v[4],v[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},Ue.inverseTransformMatrix=function(v){var c=[];return ve.invert(c,v),[[c[0],c[1],c[2],c[3]],[c[4],c[5],c[6],c[7]],[c[8],c[9],c[10],c[11]],[c[12],c[13],c[14],c[15]]]}}),zm=t((Ue,ve)=>{var v=l(),c=h0(),h=cm(),_=Xm();function y(B){var S;if(typeof B=="string"){if(S=document.getElementById(B),S===null)throw new Error("No DOM element with id '"+B+"' exists on the page.");return S}else if(B==null)throw new Error("DOM element provided is null or undefined");return B}function x(B){var S=v.select(B);return S.node()instanceof HTMLElement&&S.size()&&S.classed("js-plotly-plot")}function w(B){var S=B&&B.parentNode;S&&S.removeChild(B)}function A(B,S){d("global",B,S)}function d(B,S,D){var z="plotly.js-style-"+B,H=document.getElementById(z);if(!(H&&H.matches(".no-inline-styles"))){H||(H=document.createElement("style"),H.setAttribute("id",z),H.appendChild(document.createTextNode("")),document.head.appendChild(H));var Y=H.sheet;Y?Y.insertRule?Y.insertRule(S+"{"+D+"}",0):Y.addRule?Y.addRule(S,D,0):c.warn("addStyleRule failed"):c.warn("Cannot addRelatedStyleRule, probably due to strict CSP...")}}function k(B){var S="plotly.js-style-"+B,D=document.getElementById(S);D&&w(D)}function T(B,S,D,z,H,Y){var ht=z.split(":"),Se=H.split(":"),ie="data-btn-style-event-added";Y||(Y=document),Y.querySelectorAll(B).forEach(function(X){X.getAttribute(ie)||(X.addEventListener("mouseenter",function(){var ft=this.querySelector(D);ft&&(ft.style[ht[0]]=ht[1])}),X.addEventListener("mouseleave",function(){var ft=this.querySelector(D);ft&&(S&&this.matches(S)?ft.style[ht[0]]=ht[1]:ft.style[Se[0]]=Se[1])}),X.setAttribute(ie,!0))})}function L(B){var S=P(B),D=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return S.forEach(function(z){var H=j(z);if(H){var Y=h.convertCssMatrix(H);D=_.multiply(D,D,Y)}}),D}function j(B){var S=window.getComputedStyle(B,null),D=S.getPropertyValue("-webkit-transform")||S.getPropertyValue("-moz-transform")||S.getPropertyValue("-ms-transform")||S.getPropertyValue("-o-transform")||S.getPropertyValue("transform");return D==="none"?null:D.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(z){return+z})}function P(B){for(var S=[];N(B);)S.push(B),B=B.parentNode,typeof ShadowRoot=="function"&&B instanceof ShadowRoot&&(B=B.host);return S}function N(B){return B&&(B instanceof Element||B instanceof HTMLElement)}function O(B,S){return B&&S&&B.top===S.top&&B.left===S.left&&B.right===S.right&&B.bottom===S.bottom}ve.exports={getGraphDiv:y,isPlotDiv:x,removeElement:w,addStyleRule:A,addRelatedStyleRule:d,deleteRelatedStyleRule:k,setStyleOnHover:T,getFullTransformMatrix:L,getElementTransformMatrix:j,getElementAndAncestors:P,equalDomRects:O}}),x1=t((Ue,ve)=>{ve.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}}),Um=t((Ue,ve)=>{var v=bt().extendFlat,c=V(),h={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},_={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},y=h.flags.slice().concat(["fullReplot"]),x=_.flags.slice().concat("layoutReplot");ve.exports={traces:h,layout:_,traceFlags:function(){return w(y)},layoutFlags:function(){return w(x)},update:function(k,T){var L=T.editType;if(L&&L!=="none")for(var j=L.split("+"),P=0;P<j.length;P++)k[j[P]]=!0},overrideAll:A};function w(k){for(var T={},L=0;L<k.length;L++)T[k[L]]=!1;return T}function A(k,T,L){var j=v({},k);for(var P in j){var N=j[P];c(N)&&(j[P]=d(N,T,L,P))}return L==="from-root"&&(j.editType=T),j}function d(k,T,L,j){if(k.valType){var P=v({},k);if(P.editType=T,Array.isArray(k.items)){P.items=new Array(k.items.length);for(var N=0;N<k.items.length;N++)P.items[N]=d(k.items[N],T)}return P}else return A(k,T,j.charAt(0)==="_"?"nested":"from-root")}}),h1=t(Ue=>{Ue.dash={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"},Ue.pattern={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style"},path:{valType:"string",arrayOk:!0,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style"},editType:"style"}}),Sg=t((Ue,ve)=>{ve.exports={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"}}),um=t(Ue=>{var ve=Sg(),v=ve.FORMAT_LINK,c=ve.DATE_FORMAT_LINK;function h(y){var x=y&&y.supportOther;return["Variables are inserted using %{variable},",'for example "y: %{y}"'+(x?" as well as %{xother}, {%_xother}, {%_xother_}, {%xother_}. When showing info for several points, *xother* will be added to those with different x positions from the first point. An underscore before or after *(x|y)other* will add a space on that side, only when this field is shown.":"."),`Numbers are formatted using d3-format's syntax %{variable:d3-format}, for example "Price: %{y:$.2f}".`,v,"for details on the formatting syntax.",`Dates are formatted using d3-time-format's syntax %{variable|d3-time-format}, for example "Day: %{2019-01-01|%A}".`,c,"for details on the date formatting syntax."].join(" ")}Ue.templateFormatStringDescription=h;function _(y){var x=y.description?" "+y.description:"",w=y.keys||[];if(w.length>0){for(var A=[],d=0;d<w.length;d++)A[d]="`"+w[d]+"`";x=x+"Finally, the template string has access to ",w.length===1?x=x+"variable "+A[0]:x=x+"variables "+A.slice(0,-1).join(", ")+" and "+A.slice(-1)+"."}return x}Ue.hovertemplateAttrs=function(y,x){y=y||{},x=x||{},_(x);var w={valType:"string",dflt:"",editType:y.editType||"none"};return y.arrayOk!==!1&&(w.arrayOk=!0),w},Ue.texttemplateAttrs=function(y,x){y=y||{},x=x||{},_(x);var w={valType:"string",dflt:"",editType:y.editType||"calc"};return y.arrayOk!==!1&&(w.arrayOk=!0),w},Ue.shapeTexttemplateAttrs=function(y,x){y=y||{},x=x||{},y.newshape,_(x);var w={valType:"string",dflt:"",editType:y.editType||"arraydraw"};return w}}),M1=t((Ue,ve)=>{function v(D,z){return z?z.d2l(D):D}function c(D,z){return z?z.l2d(D):D}function h(D){return D.x0}function _(D){return D.x1}function y(D){return D.y0}function x(D){return D.y1}function w(D){return D.x0shift||0}function A(D){return D.x1shift||0}function d(D){return D.y0shift||0}function k(D){return D.y1shift||0}function T(D,z){return v(D.x1,z)+A(D)-v(D.x0,z)-w(D)}function L(D,z,H){return v(D.y1,H)+k(D)-v(D.y0,H)-d(D)}function j(D,z){return Math.abs(T(D,z))}function P(D,z,H){return Math.abs(L(D,z,H))}function N(D,z,H){return D.type!=="line"?void 0:Math.sqrt(Math.pow(T(D,z),2)+Math.pow(L(D,z,H),2))}function O(D,z){return c((v(D.x1,z)+A(D)+v(D.x0,z)+w(D))/2,z)}function B(D,z,H){return c((v(D.y1,H)+k(D)+v(D.y0,H)+d(D))/2,H)}function S(D,z,H){return D.type!=="line"?void 0:L(D,z,H)/T(D,z)}ve.exports={x0:h,x1:_,y0:y,y1:x,slope:S,dx:T,dy:L,width:j,height:P,length:N,xcenter:O,ycenter:B}}),F1=t((Ue,ve)=>{var v=Um().overrideAll,c=Mn(),h=Ut(),_=h1().dash,y=bt().extendFlat,x=um().shapeTexttemplateAttrs,w=M1();ve.exports=v({newshape:{visible:y({},c.visible,{}),showlegend:{valType:"boolean",dflt:!1},legend:y({},c.legend,{}),legendgroup:y({},c.legendgroup,{}),legendgrouptitle:{text:y({},c.legendgrouptitle.text,{}),font:h({})},legendrank:y({},c.legendrank,{}),legendwidth:y({},c.legendwidth,{}),line:{color:{valType:"color"},width:{valType:"number",min:0,dflt:4},dash:y({},_,{dflt:"solid"})},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd"},opacity:{valType:"number",min:0,max:1,dflt:1},layer:{valType:"enumerated",values:["below","above","between"],dflt:"above"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal"},name:y({},c.name,{}),label:{text:{valType:"string",dflt:""},texttemplate:x({newshape:!0},{keys:Object.keys(w)}),font:h({}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"]},textangle:{valType:"angle",dflt:"auto"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto"},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},padding:{valType:"number",dflt:3,min:0}}},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)"},opacity:{valType:"number",min:0,max:1,dflt:.5}}},"none","from-root")}),Y1=t((Ue,ve)=>{var v=h1().dash,c=bt().extendFlat;ve.exports={newselection:{mode:{valType:"enumerated",values:["immediate","gradual"],dflt:"immediate",editType:"none"},line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:1,dflt:1,editType:"none"},dash:c({},v,{dflt:"dot",editType:"none"}),editType:"none"},editType:"none"},activeselection:{fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}}),n1=t((Ue,ve)=>{ve.exports=function(v){var c=v.editType;return{t:{valType:"number",dflt:0,editType:c},r:{valType:"number",dflt:0,editType:c},b:{valType:"number",dflt:0,editType:c},l:{valType:"number",dflt:0,editType:c},editType:c}}}),Zm=t((Ue,ve)=>{var v=Ut(),c=x1(),h=zp(),_=F1(),y=Y1(),x=n1(),w=bt().extendFlat,A=v({editType:"calc"});A.family.dflt='"Open Sans", verdana, arial, sans-serif',A.size.dflt=12,A.color.dflt=h.defaultLine,ve.exports={font:A,title:{text:{valType:"string",editType:"layoutstyle"},font:v({editType:"layoutstyle"}),subtitle:{text:{valType:"string",editType:"layoutstyle"},font:v({editType:"layoutstyle"}),editType:"layoutstyle"},xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:w(x({editType:"layoutstyle"}),{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},minreducedwidth:{valType:"number",min:2,dflt:64,editType:"plot"},minreducedheight:{valType:"number",min:2,dflt:64,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:h.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:h.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:h.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:_.newshape,activeshape:_.activeshape,newselection:y.newselection,activeselection:y.activeselection,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:w({},c.transition,{editType:"none"})}}),S1=t(()=>{(function(){if(!document.getElementById("ce8d464691048653ffe3a57c6c18ab566e8366f186677868cf724621a857b4fe")){var Ue=document.createElement("style");Ue.id="ce8d464691048653ffe3a57c6c18ab566e8366f186677868cf724621a857b4fe",Ue.textContent=`.maplibregl-map{font:12px/20px Helvetica Neue,Arial,Helvetica,sans-serif;overflow:hidden;position:relative;-webkit-tap-highlight-color:rgb(0 0 0/0)}.maplibregl-canvas{left:0;position:absolute;top:0}.maplibregl-map:fullscreen{height:100%;width:100%}.maplibregl-ctrl-group button.maplibregl-ctrl-compass{touch-action:none}.maplibregl-canvas-container.maplibregl-interactive,.maplibregl-ctrl-group button.maplibregl-ctrl-compass{cursor:grab;-webkit-user-select:none;-moz-user-select:none;user-select:none}.maplibregl-canvas-container.maplibregl-interactive.maplibregl-track-pointer{cursor:pointer}.maplibregl-canvas-container.maplibregl-interactive:active,.maplibregl-ctrl-group button.maplibregl-ctrl-compass:active{cursor:grabbing}.maplibregl-canvas-container.maplibregl-touch-zoom-rotate,.maplibregl-canvas-container.maplibregl-touch-zoom-rotate .maplibregl-canvas{touch-action:pan-x pan-y}.maplibregl-canvas-container.maplibregl-touch-drag-pan,.maplibregl-canvas-container.maplibregl-touch-drag-pan .maplibregl-canvas{touch-action:pinch-zoom}.maplibregl-canvas-container.maplibregl-touch-zoom-rotate.maplibregl-touch-drag-pan,.maplibregl-canvas-container.maplibregl-touch-zoom-rotate.maplibregl-touch-drag-pan .maplibregl-canvas{touch-action:none}.maplibregl-canvas-container.maplibregl-touch-drag-pan.maplibregl-cooperative-gestures,.maplibregl-canvas-container.maplibregl-touch-drag-pan.maplibregl-cooperative-gestures .maplibregl-canvas{touch-action:pan-x pan-y}.maplibregl-ctrl-bottom-left,.maplibregl-ctrl-bottom-right,.maplibregl-ctrl-top-left,.maplibregl-ctrl-top-right{pointer-events:none;position:absolute;z-index:2}.maplibregl-ctrl-top-left{left:0;top:0}.maplibregl-ctrl-top-right{right:0;top:0}.maplibregl-ctrl-bottom-left{bottom:0;left:0}.maplibregl-ctrl-bottom-right{bottom:0;right:0}.maplibregl-ctrl{clear:both;pointer-events:auto;transform:translate(0)}.maplibregl-ctrl-top-left .maplibregl-ctrl{float:left;margin:10px 0 0 10px}.maplibregl-ctrl-top-right .maplibregl-ctrl{float:right;margin:10px 10px 0 0}.maplibregl-ctrl-bottom-left .maplibregl-ctrl{float:left;margin:0 0 10px 10px}.maplibregl-ctrl-bottom-right .maplibregl-ctrl{float:right;margin:0 10px 10px 0}.maplibregl-ctrl-group{background:#fff;border-radius:4px}.maplibregl-ctrl-group:not(:empty){box-shadow:0 0 0 2px rgba(0,0,0,.1)}@media (forced-colors:active){.maplibregl-ctrl-group:not(:empty){box-shadow:0 0 0 2px ButtonText}}.maplibregl-ctrl-group button{background-color:transparent;border:0;box-sizing:border-box;cursor:pointer;display:block;height:29px;outline:none;padding:0;width:29px}.maplibregl-ctrl-group button+button{border-top:1px solid #ddd}.maplibregl-ctrl button .maplibregl-ctrl-icon{background-position:50%;background-repeat:no-repeat;display:block;height:100%;width:100%}@media (forced-colors:active){.maplibregl-ctrl-icon{background-color:transparent}.maplibregl-ctrl-group button+button{border-top:1px solid ButtonText}}.maplibregl-ctrl button::-moz-focus-inner{border:0;padding:0}.maplibregl-ctrl-attrib-button:focus,.maplibregl-ctrl-group button:focus{box-shadow:0 0 2px 2px #0096ff}.maplibregl-ctrl button:disabled{cursor:not-allowed}.maplibregl-ctrl button:disabled .maplibregl-ctrl-icon{opacity:.25}.maplibregl-ctrl button:not(:disabled):hover{background-color:rgb(0 0 0/5%)}.maplibregl-ctrl-group button:focus:focus-visible{box-shadow:0 0 2px 2px #0096ff}.maplibregl-ctrl-group button:focus:not(:focus-visible){box-shadow:none}.maplibregl-ctrl-group button:focus:first-child{border-radius:4px 4px 0 0}.maplibregl-ctrl-group button:focus:last-child{border-radius:0 0 4px 4px}.maplibregl-ctrl-group button:focus:only-child{border-radius:inherit}.maplibregl-ctrl button.maplibregl-ctrl-zoom-out .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23333' viewBox='0 0 29 29'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-zoom-in .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23333' viewBox='0 0 29 29'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5'/%3E%3C/svg%3E")}@media (forced-colors:active){.maplibregl-ctrl button.maplibregl-ctrl-zoom-out .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff' viewBox='0 0 29 29'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-zoom-in .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff' viewBox='0 0 29 29'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5'/%3E%3C/svg%3E")}}@media (forced-colors:active) and (prefers-color-scheme:light){.maplibregl-ctrl button.maplibregl-ctrl-zoom-out .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 29 29'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-zoom-in .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 29 29'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5'/%3E%3C/svg%3E")}}.maplibregl-ctrl button.maplibregl-ctrl-fullscreen .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23333' viewBox='0 0 29 29'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-shrink .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 29 29'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1z'/%3E%3C/svg%3E")}@media (forced-colors:active){.maplibregl-ctrl button.maplibregl-ctrl-fullscreen .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff' viewBox='0 0 29 29'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-shrink .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff' viewBox='0 0 29 29'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1z'/%3E%3C/svg%3E")}}@media (forced-colors:active) and (prefers-color-scheme:light){.maplibregl-ctrl button.maplibregl-ctrl-fullscreen .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 29 29'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-shrink .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 29 29'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1z'/%3E%3C/svg%3E")}}.maplibregl-ctrl button.maplibregl-ctrl-compass .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23333' viewBox='0 0 29 29'%3E%3Cpath d='m10.5 14 4-8 4 8z'/%3E%3Cpath fill='%23ccc' d='m10.5 16 4 8 4-8z'/%3E%3C/svg%3E")}@media (forced-colors:active){.maplibregl-ctrl button.maplibregl-ctrl-compass .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff' viewBox='0 0 29 29'%3E%3Cpath d='m10.5 14 4-8 4 8z'/%3E%3Cpath fill='%23ccc' d='m10.5 16 4 8 4-8z'/%3E%3C/svg%3E")}}@media (forced-colors:active) and (prefers-color-scheme:light){.maplibregl-ctrl button.maplibregl-ctrl-compass .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 29 29'%3E%3Cpath d='m10.5 14 4-8 4 8z'/%3E%3Cpath fill='%23ccc' d='m10.5 16 4 8 4-8z'/%3E%3C/svg%3E")}}.maplibregl-ctrl button.maplibregl-ctrl-terrain .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='22' height='22' fill='%23333' viewBox='0 0 22 22'%3E%3Cpath d='m1.754 13.406 4.453-4.851 3.09 3.09 3.281 3.277.969-.969-3.309-3.312 3.844-4.121 6.148 6.886h1.082v-.855l-7.207-8.07-4.84 5.187L6.169 6.57l-5.48 5.965v.871ZM.688 16.844h20.625v1.375H.688Zm0 0'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-terrain-enabled .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='22' height='22' fill='%2333b5e5' viewBox='0 0 22 22'%3E%3Cpath d='m1.754 13.406 4.453-4.851 3.09 3.09 3.281 3.277.969-.969-3.309-3.312 3.844-4.121 6.148 6.886h1.082v-.855l-7.207-8.07-4.84 5.187L6.169 6.57l-5.48 5.965v.871ZM.688 16.844h20.625v1.375H.688Zm0 0'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23333' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate:disabled .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23aaa' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath fill='red' d='m14 5 1 1-9 9-1-1z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-active .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%2333b5e5' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-active-error .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23e58978' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-background .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%2333b5e5' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-background-error .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23e54e33' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-waiting .maplibregl-ctrl-icon{animation:maplibregl-spin 2s linear infinite}@media (forced-colors:active){.maplibregl-ctrl button.maplibregl-ctrl-geolocate .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate:disabled .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23999' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath fill='red' d='m14 5 1 1-9 9-1-1z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-active .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%2333b5e5' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-active-error .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23e58978' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-background .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%2333b5e5' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-background-error .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23e54e33' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3C/svg%3E")}}@media (forced-colors:active) and (prefers-color-scheme:light){.maplibregl-ctrl button.maplibregl-ctrl-geolocate .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate:disabled .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23666' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath fill='red' d='m14 5 1 1-9 9-1-1z'/%3E%3C/svg%3E")}}@keyframes maplibregl-spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}a.maplibregl-ctrl-logo{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='88' height='23' fill='none'%3E%3Cpath fill='%23000' fill-opacity='.4' fill-rule='evenodd' d='M17.408 16.796h-1.827l2.501-12.095h.198l3.324 6.533.988 2.19.988-2.19 3.258-6.533h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.929 5.644h-.098l-2.914-5.644-.757-1.71-.345 1.71zm1.958-3.42-.726 3.663a1.255 1.255 0 0 1-1.232 1.011h-1.827a1.255 1.255 0 0 1-1.229-1.509l2.501-12.095a1.255 1.255 0 0 1 1.23-1.001h.197a1.25 1.25 0 0 1 1.12.685l3.19 6.273 3.125-6.263a1.25 1.25 0 0 1 1.123-.695h.181a1.255 1.255 0 0 1 1.227.991l1.443 6.71a5 5 0 0 1 .314-.787l.009-.016a4.6 4.6 0 0 1 1.777-1.887c.782-.46 1.668-.667 2.611-.667a4.6 4.6 0 0 1 1.7.32l.306.134c.21-.16.474-.256.759-.256h1.694a1.255 1.255 0 0 1 1.212.925 1.255 1.255 0 0 1 1.212-.925h1.711c.284 0 .545.094.755.252.613-.3 1.312-.45 2.075-.45 1.356 0 2.557.445 3.482 1.4q.47.48.763 1.064V4.701a1.255 1.255 0 0 1 1.255-1.255h1.86A1.255 1.255 0 0 1 54.44 4.7v9.194h2.217c.19 0 .37.043.532.118v-4.77c0-.356.147-.678.385-.906a2.42 2.42 0 0 1-.682-1.71c0-.665.267-1.253.735-1.7a2.45 2.45 0 0 1 1.722-.674 2.43 2.43 0 0 1 1.705.675q.318.302.504.683V4.7a1.255 1.255 0 0 1 1.255-1.255h1.744A1.255 1.255 0 0 1 65.812 4.7v3.335a4.8 4.8 0 0 1 1.526-.246c.938 0 1.817.214 2.59.69a4.47 4.47 0 0 1 1.67 1.743v-.98a1.255 1.255 0 0 1 1.256-1.256h1.777c.233 0 .451.064.639.174a3.4 3.4 0 0 1 1.567-.372c.346 0 .861.02 1.285.232a1.25 1.25 0 0 1 .689 1.004 4.7 4.7 0 0 1 .853-.588c.795-.44 1.675-.647 2.61-.647 1.385 0 2.65.39 3.525 1.396.836.938 1.168 2.173 1.168 3.528q-.001.515-.056 1.051a1.255 1.255 0 0 1-.947 1.09l.408.952a1.255 1.255 0 0 1-.477 1.552c-.418.268-.92.463-1.458.612-.613.171-1.304.244-2.049.244-1.06 0-2.043-.207-2.886-.698l-.015-.008c-.798-.48-1.419-1.135-1.818-1.963l-.004-.008a5.8 5.8 0 0 1-.548-2.512q0-.429.053-.843a1.3 1.3 0 0 1-.333-.086l-.166-.004c-.223 0-.426.062-.643.228-.03.024-.142.139-.142.59v3.883a1.255 1.255 0 0 1-1.256 1.256h-1.777a1.255 1.255 0 0 1-1.256-1.256V15.69l-.032.057a4.8 4.8 0 0 1-1.86 1.833 5.04 5.04 0 0 1-2.484.634 4.5 4.5 0 0 1-1.935-.424 1.25 1.25 0 0 1-.764.258h-1.71a1.255 1.255 0 0 1-1.256-1.255V7.687a2.4 2.4 0 0 1-.428.625c.253.23.412.561.412.93v7.553a1.255 1.255 0 0 1-1.256 1.255h-1.843a1.25 1.25 0 0 1-.894-.373c-.228.23-.544.373-.894.373H51.32a1.255 1.255 0 0 1-1.256-1.255v-1.251l-.061.117a4.7 4.7 0 0 1-1.782 1.884 4.77 4.77 0 0 1-2.485.67 5.6 5.6 0 0 1-1.485-.188l.009 2.764a1.255 1.255 0 0 1-1.255 1.259h-1.729a1.255 1.255 0 0 1-1.255-1.255v-3.537a1.255 1.255 0 0 1-1.167.793h-1.679a1.25 1.25 0 0 1-.77-.263 4.5 4.5 0 0 1-1.945.429c-.885 0-1.724-.21-2.495-.632l-.017-.01a5 5 0 0 1-1.081-.836 1.255 1.255 0 0 1-1.254 1.312h-1.81a1.255 1.255 0 0 1-1.228-.99l-.782-3.625-2.044 3.939a1.25 1.25 0 0 1-1.115.676h-.098a1.25 1.25 0 0 1-1.116-.68l-2.061-3.994zM35.92 16.63l.207-.114.223-.15q.493-.356.735-.785l.061-.118.033 1.332h1.678V9.242h-1.694l-.033 1.267q-.133-.329-.526-.658l-.032-.028a3.2 3.2 0 0 0-.668-.428l-.27-.12a3.3 3.3 0 0 0-1.235-.23q-1.136-.001-1.974.493a3.36 3.36 0 0 0-1.3 1.382q-.445.89-.444 2.074 0 1.2.51 2.107a3.8 3.8 0 0 0 1.382 1.381 3.9 3.9 0 0 0 1.893.477q.795 0 1.455-.33zm-2.789-5.38q-.576.675-.575 1.762 0 1.102.559 1.794.576.675 1.645.675a2.25 2.25 0 0 0 .934-.19 2.2 2.2 0 0 0 .468-.29l.178-.161a2.2 2.2 0 0 0 .397-.561q.244-.5.244-1.15v-.115q0-.708-.296-1.267l-.043-.077a2.2 2.2 0 0 0-.633-.709l-.13-.086-.047-.028a2.1 2.1 0 0 0-1.073-.285q-1.052 0-1.629.692zm2.316 2.706c.163-.17.28-.407.28-.83v-.114c0-.292-.06-.508-.15-.68a.96.96 0 0 0-.353-.389.85.85 0 0 0-.464-.127c-.4 0-.56.114-.664.239l-.01.012c-.148.174-.275.45-.275.945 0 .506.122.801.27.99.097.11.266.224.68.224.303 0 .504-.09.687-.269zm7.545 1.705a2.6 2.6 0 0 0 .331.423q.319.33.755.548l.173.074q.65.255 1.49.255 1.02 0 1.844-.493a3.45 3.45 0 0 0 1.316-1.4q.493-.904.493-2.089 0-1.909-.988-2.913-.988-1.02-2.584-1.02-.898 0-1.575.347a3 3 0 0 0-.415.262l-.199.166a3.4 3.4 0 0 0-.64.82V9.242h-1.712v11.553h1.729l-.017-5.134zm.53-1.138q.206.29.48.5l.155.11.053.034q.51.296 1.119.297 1.07 0 1.645-.675.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.435 0-.835.16a2 2 0 0 0-.284.136 2 2 0 0 0-.363.254 2.2 2.2 0 0 0-.46.569l-.082.162a2.6 2.6 0 0 0-.213 1.072v.115q0 .707.296 1.267l.135.211zm.964-.818a1.1 1.1 0 0 0 .367.385.94.94 0 0 0 .476.118c.423 0 .59-.117.687-.23.159-.194.28-.478.28-.95 0-.53-.133-.8-.266-.952l-.021-.025c-.078-.094-.231-.221-.68-.221a1 1 0 0 0-.503.135l-.012.007a.86.86 0 0 0-.335.343c-.073.133-.132.324-.132.614v.115a1.4 1.4 0 0 0 .14.66zm15.7-6.222q.347-.346.346-.856a1.05 1.05 0 0 0-.345-.79 1.18 1.18 0 0 0-.84-.329q-.51 0-.855.33a1.05 1.05 0 0 0-.346.79q0 .51.346.855.345.346.856.346.51 0 .839-.346zm4.337 9.314.033-1.332q.191.403.59.747l.098.081a4 4 0 0 0 .316.224l.223.122a3.2 3.2 0 0 0 1.44.322 3.8 3.8 0 0 0 1.875-.477 3.5 3.5 0 0 0 1.382-1.366q.527-.89.526-2.09 0-1.184-.444-2.073a3.24 3.24 0 0 0-1.283-1.399q-.823-.51-1.942-.51a3.5 3.5 0 0 0-1.527.344l-.086.043-.165.09a3 3 0 0 0-.33.214q-.432.315-.656.707a2 2 0 0 0-.099.198l.082-1.283V4.701h-1.744v12.095zm.473-2.509a2.5 2.5 0 0 0 .566.7q.117.098.245.18l.144.08a2.1 2.1 0 0 0 .975.232q1.07 0 1.645-.675.576-.69.576-1.778 0-1.102-.576-1.777-.56-.691-1.645-.692a2.2 2.2 0 0 0-1.015.235q-.22.113-.415.282l-.15.142a2.1 2.1 0 0 0-.42.594q-.223.479-.223 1.1v.115q0 .705.293 1.26zm2.616-.293c.157-.191.28-.479.28-.967 0-.51-.13-.79-.276-.961l-.021-.026c-.082-.1-.232-.225-.67-.225a.87.87 0 0 0-.681.279l-.012.011c-.154.155-.274.38-.274.807v.115c0 .285.057.499.144.669a1.1 1.1 0 0 0 .367.405c.137.082.28.123.455.123.423 0 .59-.118.686-.23zm8.266-3.013q.345-.13.724-.14l.069-.002q.493 0 .642.099l.247-1.794q-.196-.099-.717-.099a2.3 2.3 0 0 0-.545.063 2 2 0 0 0-.411.148 2.2 2.2 0 0 0-.4.249 2.5 2.5 0 0 0-.485.499 2.7 2.7 0 0 0-.32.581l-.05.137v-1.48h-1.778v7.553h1.777v-3.884q0-.546.159-.943a1.5 1.5 0 0 1 .466-.636 2.5 2.5 0 0 1 .399-.253 2 2 0 0 1 .224-.099zm9.784 2.656.05-.922q0-1.743-.856-2.698-.838-.97-2.584-.97-1.119-.001-2.007.493a3.46 3.46 0 0 0-1.4 1.382q-.493.906-.493 2.106 0 1.07.428 1.975.428.89 1.332 1.432.906.526 2.255.526.973 0 1.668-.185l.044-.012.135-.04q.613-.184.984-.421l-.542-1.267q-.3.162-.642.274l-.297.087q-.51.131-1.3.131-.954 0-1.497-.444a1.6 1.6 0 0 1-.192-.193q-.366-.44-.512-1.234l-.004-.021zm-5.427-1.256-.003.022h3.752v-.138q-.011-.727-.288-1.118a1 1 0 0 0-.156-.176q-.46-.428-1.316-.428-.986 0-1.494.604-.379.45-.494 1.234zm-27.053 2.77V4.7h-1.86v12.095h5.333V15.15zm7.103-5.908v7.553h-1.843V9.242h1.843z'/%3E%3Cpath fill='%23fff' d='m19.63 11.151-.757-1.71-.345 1.71-1.12 5.644h-1.827L18.083 4.7h.197l3.325 6.533.988 2.19.988-2.19L26.839 4.7h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.93 5.644h-.098l-2.913-5.644zm14.836 5.81q-1.02 0-1.893-.478a3.8 3.8 0 0 1-1.381-1.382q-.51-.906-.51-2.106 0-1.185.444-2.074a3.36 3.36 0 0 1 1.3-1.382q.839-.494 1.974-.494a3.3 3.3 0 0 1 1.234.231 3.3 3.3 0 0 1 .97.575q.396.33.527.659l.033-1.267h1.694v7.553H37.18l-.033-1.332q-.279.593-1.02 1.053a3.17 3.17 0 0 1-1.662.444zm.296-1.482q.938 0 1.58-.642.642-.66.642-1.711v-.115q0-.708-.296-1.267a2.2 2.2 0 0 0-.807-.872 2.1 2.1 0 0 0-1.119-.313q-1.053 0-1.629.692-.575.675-.575 1.76 0 1.103.559 1.795.577.675 1.645.675zm6.521-6.237h1.711v1.4q.906-1.597 2.83-1.597 1.596 0 2.584 1.02.988 1.005.988 2.914 0 1.185-.493 2.09a3.46 3.46 0 0 1-1.316 1.399 3.5 3.5 0 0 1-1.844.493q-.954 0-1.662-.329a2.67 2.67 0 0 1-1.086-.97l.017 5.134h-1.728zm4.048 6.22q1.07 0 1.645-.674.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.592 0-1.12.296-.51.28-.822.823-.296.527-.296 1.234v.115q0 .708.296 1.267.313.543.823.855.51.296 1.119.297z'/%3E%3Cpath fill='%23e1e3e9' d='M51.325 4.7h1.86v10.45h3.473v1.646h-5.333zm7.12 4.542h1.843v7.553h-1.843zm.905-1.415a1.16 1.16 0 0 1-.856-.346 1.17 1.17 0 0 1-.346-.856 1.05 1.05 0 0 1 .346-.79q.346-.329.856-.329.494 0 .839.33a1.05 1.05 0 0 1 .345.79 1.16 1.16 0 0 1-.345.855q-.33.346-.84.346zm7.875 9.133a3.17 3.17 0 0 1-1.662-.444q-.723-.46-1.004-1.053l-.033 1.332h-1.71V4.701h1.743v4.657l-.082 1.283q.279-.658 1.086-1.119a3.5 3.5 0 0 1 1.778-.477q1.119 0 1.942.51a3.24 3.24 0 0 1 1.283 1.4q.445.888.444 2.072 0 1.201-.526 2.09a3.5 3.5 0 0 1-1.382 1.366 3.8 3.8 0 0 1-1.876.477zm-.296-1.481q1.069 0 1.645-.675.577-.69.577-1.778 0-1.102-.577-1.776-.56-.691-1.645-.692a2.12 2.12 0 0 0-1.58.659q-.642.641-.642 1.694v.115q0 .71.296 1.267a2.4 2.4 0 0 0 .807.872 2.1 2.1 0 0 0 1.119.313zm5.927-6.237h1.777v1.481q.263-.757.856-1.217a2.14 2.14 0 0 1 1.349-.46q.527 0 .724.098l-.247 1.794q-.149-.099-.642-.099-.774 0-1.416.494-.626.493-.626 1.58v3.883h-1.777V9.242zm9.534 7.718q-1.35 0-2.255-.526-.904-.543-1.332-1.432a4.6 4.6 0 0 1-.428-1.975q0-1.2.493-2.106a3.46 3.46 0 0 1 1.4-1.382q.889-.495 2.007-.494 1.744 0 2.584.97.855.956.856 2.7 0 .444-.05.92h-5.43q.18 1.005.708 1.45.542.443 1.497.443.79 0 1.3-.131a4 4 0 0 0 .938-.362l.542 1.267q-.411.263-1.119.46-.708.198-1.711.197zm1.596-4.558q.016-1.02-.444-1.432-.46-.428-1.316-.428-1.728 0-1.991 1.86z'/%3E%3Cpath d='M5.074 15.948a.484.657 0 0 0-.486.659v1.84a.484.657 0 0 0 .486.659h4.101a.484.657 0 0 0 .486-.659v-1.84a.484.657 0 0 0-.486-.659zm3.56 1.16H5.617v.838h3.017z' style='fill:%23fff;fill-rule:evenodd;stroke-width:1.03600001'/%3E%3Cg style='stroke-width:1.12603545'%3E%3Cpath d='M-9.408-1.416c-3.833-.025-7.056 2.912-7.08 6.615-.02 3.08 1.653 4.832 3.107 6.268.903.892 1.721 1.74 2.32 2.902l-.525-.004c-.543-.003-.992.304-1.24.639a1.87 1.87 0 0 0-.362 1.121l-.011 1.877c-.003.402.104.787.347 1.125.244.338.688.653 1.23.656l4.142.028c.542.003.99-.306 1.238-.641a1.87 1.87 0 0 0 .363-1.121l.012-1.875a1.87 1.87 0 0 0-.348-1.127c-.243-.338-.688-.653-1.23-.656l-.518-.004c.597-1.145 1.425-1.983 2.348-2.87 1.473-1.414 3.18-3.149 3.2-6.226-.016-3.59-2.923-6.684-6.993-6.707m-.006 1.1v.002c3.274.02 5.92 2.532 5.9 5.6-.017 2.706-1.39 4.026-2.863 5.44-1.034.994-2.118 2.033-2.814 3.633-.018.041-.052.055-.075.065q-.013.004-.02.01a.34.34 0 0 1-.226.084.34.34 0 0 1-.224-.086l-.092-.077c-.699-1.615-1.768-2.669-2.781-3.67-1.454-1.435-2.797-2.762-2.78-5.478.02-3.067 2.7-5.545 5.975-5.523m-.02 2.826c-1.62-.01-2.944 1.315-2.955 2.96-.01 1.646 1.295 2.988 2.916 2.999h.002c1.621.01 2.943-1.316 2.953-2.961.011-1.646-1.294-2.988-2.916-2.998m-.005 1.1c1.017.006 1.829.83 1.822 1.89s-.83 1.874-1.848 1.867c-1.018-.006-1.829-.83-1.822-1.89s.83-1.874 1.848-1.868m-2.155 11.857 4.14.025c.271.002.49.305.487.676l-.013 1.875c-.003.37-.224.67-.495.668l-4.14-.025c-.27-.002-.487-.306-.485-.676l.012-1.875c.003-.37.224-.67.494-.668' style='color:%23000;font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:medium;line-height:normal;font-family:sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-feature-settings:normal;text-indent:0;text-align:start;text-decoration:none;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:%23000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;text-anchor:start;white-space:normal;shape-padding:0;clip-rule:evenodd;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:%23000;solid-opacity:1;vector-effect:none;fill:%23000;fill-opacity:.4;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto' transform='translate(15.553 2.85)scale(.88807)'/%3E%3Cpath d='M-9.415-.316C-12.69-.338-15.37 2.14-15.39 5.207c-.017 2.716 1.326 4.041 2.78 5.477 1.013 1 2.081 2.055 2.78 3.67l.092.076a.34.34 0 0 0 .225.086.34.34 0 0 0 .227-.083l.019-.01c.022-.009.057-.024.074-.064.697-1.6 1.78-2.64 2.814-3.634 1.473-1.414 2.847-2.733 2.864-5.44.02-3.067-2.627-5.58-5.901-5.601m-.057 8.784c1.621.011 2.944-1.315 2.955-2.96.01-1.646-1.295-2.988-2.916-2.999-1.622-.01-2.945 1.315-2.955 2.96s1.295 2.989 2.916 3' style='clip-rule:evenodd;fill:%23e1e3e9;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4' transform='translate(15.553 2.85)scale(.88807)'/%3E%3Cpath d='M-11.594 15.465c-.27-.002-.492.297-.494.668l-.012 1.876c-.003.371.214.673.485.675l4.14.027c.271.002.492-.298.495-.668l.012-1.877c.003-.37-.215-.672-.485-.674z' style='clip-rule:evenodd;fill:%23fff;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4' transform='translate(15.553 2.85)scale(.88807)'/%3E%3C/g%3E%3C/svg%3E");background-repeat:no-repeat;cursor:pointer;display:block;height:23px;margin:0 0 -4px -4px;overflow:hidden;width:88px}a.maplibregl-ctrl-logo.maplibregl-compact{width:14px}@media (forced-colors:active){a.maplibregl-ctrl-logo{background-color:transparent;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='88' height='23' fill='none'%3E%3Cpath fill='%23000' fill-opacity='.4' fill-rule='evenodd' d='M17.408 16.796h-1.827l2.501-12.095h.198l3.324 6.533.988 2.19.988-2.19 3.258-6.533h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.929 5.644h-.098l-2.914-5.644-.757-1.71-.345 1.71zm1.958-3.42-.726 3.663a1.255 1.255 0 0 1-1.232 1.011h-1.827a1.255 1.255 0 0 1-1.229-1.509l2.501-12.095a1.255 1.255 0 0 1 1.23-1.001h.197a1.25 1.25 0 0 1 1.12.685l3.19 6.273 3.125-6.263a1.25 1.25 0 0 1 1.123-.695h.181a1.255 1.255 0 0 1 1.227.991l1.443 6.71a5 5 0 0 1 .314-.787l.009-.016a4.6 4.6 0 0 1 1.777-1.887c.782-.46 1.668-.667 2.611-.667a4.6 4.6 0 0 1 1.7.32l.306.134c.21-.16.474-.256.759-.256h1.694a1.255 1.255 0 0 1 1.212.925 1.255 1.255 0 0 1 1.212-.925h1.711c.284 0 .545.094.755.252.613-.3 1.312-.45 2.075-.45 1.356 0 2.557.445 3.482 1.4q.47.48.763 1.064V4.701a1.255 1.255 0 0 1 1.255-1.255h1.86A1.255 1.255 0 0 1 54.44 4.7v9.194h2.217c.19 0 .37.043.532.118v-4.77c0-.356.147-.678.385-.906a2.42 2.42 0 0 1-.682-1.71c0-.665.267-1.253.735-1.7a2.45 2.45 0 0 1 1.722-.674 2.43 2.43 0 0 1 1.705.675q.318.302.504.683V4.7a1.255 1.255 0 0 1 1.255-1.255h1.744A1.255 1.255 0 0 1 65.812 4.7v3.335a4.8 4.8 0 0 1 1.526-.246c.938 0 1.817.214 2.59.69a4.47 4.47 0 0 1 1.67 1.743v-.98a1.255 1.255 0 0 1 1.256-1.256h1.777c.233 0 .451.064.639.174a3.4 3.4 0 0 1 1.567-.372c.346 0 .861.02 1.285.232a1.25 1.25 0 0 1 .689 1.004 4.7 4.7 0 0 1 .853-.588c.795-.44 1.675-.647 2.61-.647 1.385 0 2.65.39 3.525 1.396.836.938 1.168 2.173 1.168 3.528q-.001.515-.056 1.051a1.255 1.255 0 0 1-.947 1.09l.408.952a1.255 1.255 0 0 1-.477 1.552c-.418.268-.92.463-1.458.612-.613.171-1.304.244-2.049.244-1.06 0-2.043-.207-2.886-.698l-.015-.008c-.798-.48-1.419-1.135-1.818-1.963l-.004-.008a5.8 5.8 0 0 1-.548-2.512q0-.429.053-.843a1.3 1.3 0 0 1-.333-.086l-.166-.004c-.223 0-.426.062-.643.228-.03.024-.142.139-.142.59v3.883a1.255 1.255 0 0 1-1.256 1.256h-1.777a1.255 1.255 0 0 1-1.256-1.256V15.69l-.032.057a4.8 4.8 0 0 1-1.86 1.833 5.04 5.04 0 0 1-2.484.634 4.5 4.5 0 0 1-1.935-.424 1.25 1.25 0 0 1-.764.258h-1.71a1.255 1.255 0 0 1-1.256-1.255V7.687a2.4 2.4 0 0 1-.428.625c.253.23.412.561.412.93v7.553a1.255 1.255 0 0 1-1.256 1.255h-1.843a1.25 1.25 0 0 1-.894-.373c-.228.23-.544.373-.894.373H51.32a1.255 1.255 0 0 1-1.256-1.255v-1.251l-.061.117a4.7 4.7 0 0 1-1.782 1.884 4.77 4.77 0 0 1-2.485.67 5.6 5.6 0 0 1-1.485-.188l.009 2.764a1.255 1.255 0 0 1-1.255 1.259h-1.729a1.255 1.255 0 0 1-1.255-1.255v-3.537a1.255 1.255 0 0 1-1.167.793h-1.679a1.25 1.25 0 0 1-.77-.263 4.5 4.5 0 0 1-1.945.429c-.885 0-1.724-.21-2.495-.632l-.017-.01a5 5 0 0 1-1.081-.836 1.255 1.255 0 0 1-1.254 1.312h-1.81a1.255 1.255 0 0 1-1.228-.99l-.782-3.625-2.044 3.939a1.25 1.25 0 0 1-1.115.676h-.098a1.25 1.25 0 0 1-1.116-.68l-2.061-3.994zM35.92 16.63l.207-.114.223-.15q.493-.356.735-.785l.061-.118.033 1.332h1.678V9.242h-1.694l-.033 1.267q-.133-.329-.526-.658l-.032-.028a3.2 3.2 0 0 0-.668-.428l-.27-.12a3.3 3.3 0 0 0-1.235-.23q-1.136-.001-1.974.493a3.36 3.36 0 0 0-1.3 1.382q-.445.89-.444 2.074 0 1.2.51 2.107a3.8 3.8 0 0 0 1.382 1.381 3.9 3.9 0 0 0 1.893.477q.795 0 1.455-.33zm-2.789-5.38q-.576.675-.575 1.762 0 1.102.559 1.794.576.675 1.645.675a2.25 2.25 0 0 0 .934-.19 2.2 2.2 0 0 0 .468-.29l.178-.161a2.2 2.2 0 0 0 .397-.561q.244-.5.244-1.15v-.115q0-.708-.296-1.267l-.043-.077a2.2 2.2 0 0 0-.633-.709l-.13-.086-.047-.028a2.1 2.1 0 0 0-1.073-.285q-1.052 0-1.629.692zm2.316 2.706c.163-.17.28-.407.28-.83v-.114c0-.292-.06-.508-.15-.68a.96.96 0 0 0-.353-.389.85.85 0 0 0-.464-.127c-.4 0-.56.114-.664.239l-.01.012c-.148.174-.275.45-.275.945 0 .506.122.801.27.99.097.11.266.224.68.224.303 0 .504-.09.687-.269zm7.545 1.705a2.6 2.6 0 0 0 .331.423q.319.33.755.548l.173.074q.65.255 1.49.255 1.02 0 1.844-.493a3.45 3.45 0 0 0 1.316-1.4q.493-.904.493-2.089 0-1.909-.988-2.913-.988-1.02-2.584-1.02-.898 0-1.575.347a3 3 0 0 0-.415.262l-.199.166a3.4 3.4 0 0 0-.64.82V9.242h-1.712v11.553h1.729l-.017-5.134zm.53-1.138q.206.29.48.5l.155.11.053.034q.51.296 1.119.297 1.07 0 1.645-.675.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.435 0-.835.16a2 2 0 0 0-.284.136 2 2 0 0 0-.363.254 2.2 2.2 0 0 0-.46.569l-.082.162a2.6 2.6 0 0 0-.213 1.072v.115q0 .707.296 1.267l.135.211zm.964-.818a1.1 1.1 0 0 0 .367.385.94.94 0 0 0 .476.118c.423 0 .59-.117.687-.23.159-.194.28-.478.28-.95 0-.53-.133-.8-.266-.952l-.021-.025c-.078-.094-.231-.221-.68-.221a1 1 0 0 0-.503.135l-.012.007a.86.86 0 0 0-.335.343c-.073.133-.132.324-.132.614v.115a1.4 1.4 0 0 0 .14.66zm15.7-6.222q.347-.346.346-.856a1.05 1.05 0 0 0-.345-.79 1.18 1.18 0 0 0-.84-.329q-.51 0-.855.33a1.05 1.05 0 0 0-.346.79q0 .51.346.855.345.346.856.346.51 0 .839-.346zm4.337 9.314.033-1.332q.191.403.59.747l.098.081a4 4 0 0 0 .316.224l.223.122a3.2 3.2 0 0 0 1.44.322 3.8 3.8 0 0 0 1.875-.477 3.5 3.5 0 0 0 1.382-1.366q.527-.89.526-2.09 0-1.184-.444-2.073a3.24 3.24 0 0 0-1.283-1.399q-.823-.51-1.942-.51a3.5 3.5 0 0 0-1.527.344l-.086.043-.165.09a3 3 0 0 0-.33.214q-.432.315-.656.707a2 2 0 0 0-.099.198l.082-1.283V4.701h-1.744v12.095zm.473-2.509a2.5 2.5 0 0 0 .566.7q.117.098.245.18l.144.08a2.1 2.1 0 0 0 .975.232q1.07 0 1.645-.675.576-.69.576-1.778 0-1.102-.576-1.777-.56-.691-1.645-.692a2.2 2.2 0 0 0-1.015.235q-.22.113-.415.282l-.15.142a2.1 2.1 0 0 0-.42.594q-.223.479-.223 1.1v.115q0 .705.293 1.26zm2.616-.293c.157-.191.28-.479.28-.967 0-.51-.13-.79-.276-.961l-.021-.026c-.082-.1-.232-.225-.67-.225a.87.87 0 0 0-.681.279l-.012.011c-.154.155-.274.38-.274.807v.115c0 .285.057.499.144.669a1.1 1.1 0 0 0 .367.405c.137.082.28.123.455.123.423 0 .59-.118.686-.23zm8.266-3.013q.345-.13.724-.14l.069-.002q.493 0 .642.099l.247-1.794q-.196-.099-.717-.099a2.3 2.3 0 0 0-.545.063 2 2 0 0 0-.411.148 2.2 2.2 0 0 0-.4.249 2.5 2.5 0 0 0-.485.499 2.7 2.7 0 0 0-.32.581l-.05.137v-1.48h-1.778v7.553h1.777v-3.884q0-.546.159-.943a1.5 1.5 0 0 1 .466-.636 2.5 2.5 0 0 1 .399-.253 2 2 0 0 1 .224-.099zm9.784 2.656.05-.922q0-1.743-.856-2.698-.838-.97-2.584-.97-1.119-.001-2.007.493a3.46 3.46 0 0 0-1.4 1.382q-.493.906-.493 2.106 0 1.07.428 1.975.428.89 1.332 1.432.906.526 2.255.526.973 0 1.668-.185l.044-.012.135-.04q.613-.184.984-.421l-.542-1.267q-.3.162-.642.274l-.297.087q-.51.131-1.3.131-.954 0-1.497-.444a1.6 1.6 0 0 1-.192-.193q-.366-.44-.512-1.234l-.004-.021zm-5.427-1.256-.003.022h3.752v-.138q-.011-.727-.288-1.118a1 1 0 0 0-.156-.176q-.46-.428-1.316-.428-.986 0-1.494.604-.379.45-.494 1.234zm-27.053 2.77V4.7h-1.86v12.095h5.333V15.15zm7.103-5.908v7.553h-1.843V9.242h1.843z'/%3E%3Cpath fill='%23fff' d='m19.63 11.151-.757-1.71-.345 1.71-1.12 5.644h-1.827L18.083 4.7h.197l3.325 6.533.988 2.19.988-2.19L26.839 4.7h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.93 5.644h-.098l-2.913-5.644zm14.836 5.81q-1.02 0-1.893-.478a3.8 3.8 0 0 1-1.381-1.382q-.51-.906-.51-2.106 0-1.185.444-2.074a3.36 3.36 0 0 1 1.3-1.382q.839-.494 1.974-.494a3.3 3.3 0 0 1 1.234.231 3.3 3.3 0 0 1 .97.575q.396.33.527.659l.033-1.267h1.694v7.553H37.18l-.033-1.332q-.279.593-1.02 1.053a3.17 3.17 0 0 1-1.662.444zm.296-1.482q.938 0 1.58-.642.642-.66.642-1.711v-.115q0-.708-.296-1.267a2.2 2.2 0 0 0-.807-.872 2.1 2.1 0 0 0-1.119-.313q-1.053 0-1.629.692-.575.675-.575 1.76 0 1.103.559 1.795.577.675 1.645.675zm6.521-6.237h1.711v1.4q.906-1.597 2.83-1.597 1.596 0 2.584 1.02.988 1.005.988 2.914 0 1.185-.493 2.09a3.46 3.46 0 0 1-1.316 1.399 3.5 3.5 0 0 1-1.844.493q-.954 0-1.662-.329a2.67 2.67 0 0 1-1.086-.97l.017 5.134h-1.728zm4.048 6.22q1.07 0 1.645-.674.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.592 0-1.12.296-.51.28-.822.823-.296.527-.296 1.234v.115q0 .708.296 1.267.313.543.823.855.51.296 1.119.297z'/%3E%3Cpath fill='%23e1e3e9' d='M51.325 4.7h1.86v10.45h3.473v1.646h-5.333zm7.12 4.542h1.843v7.553h-1.843zm.905-1.415a1.16 1.16 0 0 1-.856-.346 1.17 1.17 0 0 1-.346-.856 1.05 1.05 0 0 1 .346-.79q.346-.329.856-.329.494 0 .839.33a1.05 1.05 0 0 1 .345.79 1.16 1.16 0 0 1-.345.855q-.33.346-.84.346zm7.875 9.133a3.17 3.17 0 0 1-1.662-.444q-.723-.46-1.004-1.053l-.033 1.332h-1.71V4.701h1.743v4.657l-.082 1.283q.279-.658 1.086-1.119a3.5 3.5 0 0 1 1.778-.477q1.119 0 1.942.51a3.24 3.24 0 0 1 1.283 1.4q.445.888.444 2.072 0 1.201-.526 2.09a3.5 3.5 0 0 1-1.382 1.366 3.8 3.8 0 0 1-1.876.477zm-.296-1.481q1.069 0 1.645-.675.577-.69.577-1.778 0-1.102-.577-1.776-.56-.691-1.645-.692a2.12 2.12 0 0 0-1.58.659q-.642.641-.642 1.694v.115q0 .71.296 1.267a2.4 2.4 0 0 0 .807.872 2.1 2.1 0 0 0 1.119.313zm5.927-6.237h1.777v1.481q.263-.757.856-1.217a2.14 2.14 0 0 1 1.349-.46q.527 0 .724.098l-.247 1.794q-.149-.099-.642-.099-.774 0-1.416.494-.626.493-.626 1.58v3.883h-1.777V9.242zm9.534 7.718q-1.35 0-2.255-.526-.904-.543-1.332-1.432a4.6 4.6 0 0 1-.428-1.975q0-1.2.493-2.106a3.46 3.46 0 0 1 1.4-1.382q.889-.495 2.007-.494 1.744 0 2.584.97.855.956.856 2.7 0 .444-.05.92h-5.43q.18 1.005.708 1.45.542.443 1.497.443.79 0 1.3-.131a4 4 0 0 0 .938-.362l.542 1.267q-.411.263-1.119.46-.708.198-1.711.197zm1.596-4.558q.016-1.02-.444-1.432-.46-.428-1.316-.428-1.728 0-1.991 1.86z'/%3E%3Cpath d='M5.074 15.948a.484.657 0 0 0-.486.659v1.84a.484.657 0 0 0 .486.659h4.101a.484.657 0 0 0 .486-.659v-1.84a.484.657 0 0 0-.486-.659zm3.56 1.16H5.617v.838h3.017z' style='fill:%23fff;fill-rule:evenodd;stroke-width:1.03600001'/%3E%3Cg style='stroke-width:1.12603545'%3E%3Cpath d='M-9.408-1.416c-3.833-.025-7.056 2.912-7.08 6.615-.02 3.08 1.653 4.832 3.107 6.268.903.892 1.721 1.74 2.32 2.902l-.525-.004c-.543-.003-.992.304-1.24.639a1.87 1.87 0 0 0-.362 1.121l-.011 1.877c-.003.402.104.787.347 1.125.244.338.688.653 1.23.656l4.142.028c.542.003.99-.306 1.238-.641a1.87 1.87 0 0 0 .363-1.121l.012-1.875a1.87 1.87 0 0 0-.348-1.127c-.243-.338-.688-.653-1.23-.656l-.518-.004c.597-1.145 1.425-1.983 2.348-2.87 1.473-1.414 3.18-3.149 3.2-6.226-.016-3.59-2.923-6.684-6.993-6.707m-.006 1.1v.002c3.274.02 5.92 2.532 5.9 5.6-.017 2.706-1.39 4.026-2.863 5.44-1.034.994-2.118 2.033-2.814 3.633-.018.041-.052.055-.075.065q-.013.004-.02.01a.34.34 0 0 1-.226.084.34.34 0 0 1-.224-.086l-.092-.077c-.699-1.615-1.768-2.669-2.781-3.67-1.454-1.435-2.797-2.762-2.78-5.478.02-3.067 2.7-5.545 5.975-5.523m-.02 2.826c-1.62-.01-2.944 1.315-2.955 2.96-.01 1.646 1.295 2.988 2.916 2.999h.002c1.621.01 2.943-1.316 2.953-2.961.011-1.646-1.294-2.988-2.916-2.998m-.005 1.1c1.017.006 1.829.83 1.822 1.89s-.83 1.874-1.848 1.867c-1.018-.006-1.829-.83-1.822-1.89s.83-1.874 1.848-1.868m-2.155 11.857 4.14.025c.271.002.49.305.487.676l-.013 1.875c-.003.37-.224.67-.495.668l-4.14-.025c-.27-.002-.487-.306-.485-.676l.012-1.875c.003-.37.224-.67.494-.668' style='color:%23000;font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:medium;line-height:normal;font-family:sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-feature-settings:normal;text-indent:0;text-align:start;text-decoration:none;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:%23000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;text-anchor:start;white-space:normal;shape-padding:0;clip-rule:evenodd;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:%23000;solid-opacity:1;vector-effect:none;fill:%23000;fill-opacity:.4;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto' transform='translate(15.553 2.85)scale(.88807)'/%3E%3Cpath d='M-9.415-.316C-12.69-.338-15.37 2.14-15.39 5.207c-.017 2.716 1.326 4.041 2.78 5.477 1.013 1 2.081 2.055 2.78 3.67l.092.076a.34.34 0 0 0 .225.086.34.34 0 0 0 .227-.083l.019-.01c.022-.009.057-.024.074-.064.697-1.6 1.78-2.64 2.814-3.634 1.473-1.414 2.847-2.733 2.864-5.44.02-3.067-2.627-5.58-5.901-5.601m-.057 8.784c1.621.011 2.944-1.315 2.955-2.96.01-1.646-1.295-2.988-2.916-2.999-1.622-.01-2.945 1.315-2.955 2.96s1.295 2.989 2.916 3' style='clip-rule:evenodd;fill:%23e1e3e9;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4' transform='translate(15.553 2.85)scale(.88807)'/%3E%3Cpath d='M-11.594 15.465c-.27-.002-.492.297-.494.668l-.012 1.876c-.003.371.214.673.485.675l4.14.027c.271.002.492-.298.495-.668l.012-1.877c.003-.37-.215-.672-.485-.674z' style='clip-rule:evenodd;fill:%23fff;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4' transform='translate(15.553 2.85)scale(.88807)'/%3E%3C/g%3E%3C/svg%3E")}}@media (forced-colors:active) and (prefers-color-scheme:light){a.maplibregl-ctrl-logo{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='88' height='23' fill='none'%3E%3Cpath fill='%23000' fill-opacity='.4' fill-rule='evenodd' d='M17.408 16.796h-1.827l2.501-12.095h.198l3.324 6.533.988 2.19.988-2.19 3.258-6.533h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.929 5.644h-.098l-2.914-5.644-.757-1.71-.345 1.71zm1.958-3.42-.726 3.663a1.255 1.255 0 0 1-1.232 1.011h-1.827a1.255 1.255 0 0 1-1.229-1.509l2.501-12.095a1.255 1.255 0 0 1 1.23-1.001h.197a1.25 1.25 0 0 1 1.12.685l3.19 6.273 3.125-6.263a1.25 1.25 0 0 1 1.123-.695h.181a1.255 1.255 0 0 1 1.227.991l1.443 6.71a5 5 0 0 1 .314-.787l.009-.016a4.6 4.6 0 0 1 1.777-1.887c.782-.46 1.668-.667 2.611-.667a4.6 4.6 0 0 1 1.7.32l.306.134c.21-.16.474-.256.759-.256h1.694a1.255 1.255 0 0 1 1.212.925 1.255 1.255 0 0 1 1.212-.925h1.711c.284 0 .545.094.755.252.613-.3 1.312-.45 2.075-.45 1.356 0 2.557.445 3.482 1.4q.47.48.763 1.064V4.701a1.255 1.255 0 0 1 1.255-1.255h1.86A1.255 1.255 0 0 1 54.44 4.7v9.194h2.217c.19 0 .37.043.532.118v-4.77c0-.356.147-.678.385-.906a2.42 2.42 0 0 1-.682-1.71c0-.665.267-1.253.735-1.7a2.45 2.45 0 0 1 1.722-.674 2.43 2.43 0 0 1 1.705.675q.318.302.504.683V4.7a1.255 1.255 0 0 1 1.255-1.255h1.744A1.255 1.255 0 0 1 65.812 4.7v3.335a4.8 4.8 0 0 1 1.526-.246c.938 0 1.817.214 2.59.69a4.47 4.47 0 0 1 1.67 1.743v-.98a1.255 1.255 0 0 1 1.256-1.256h1.777c.233 0 .451.064.639.174a3.4 3.4 0 0 1 1.567-.372c.346 0 .861.02 1.285.232a1.25 1.25 0 0 1 .689 1.004 4.7 4.7 0 0 1 .853-.588c.795-.44 1.675-.647 2.61-.647 1.385 0 2.65.39 3.525 1.396.836.938 1.168 2.173 1.168 3.528q-.001.515-.056 1.051a1.255 1.255 0 0 1-.947 1.09l.408.952a1.255 1.255 0 0 1-.477 1.552c-.418.268-.92.463-1.458.612-.613.171-1.304.244-2.049.244-1.06 0-2.043-.207-2.886-.698l-.015-.008c-.798-.48-1.419-1.135-1.818-1.963l-.004-.008a5.8 5.8 0 0 1-.548-2.512q0-.429.053-.843a1.3 1.3 0 0 1-.333-.086l-.166-.004c-.223 0-.426.062-.643.228-.03.024-.142.139-.142.59v3.883a1.255 1.255 0 0 1-1.256 1.256h-1.777a1.255 1.255 0 0 1-1.256-1.256V15.69l-.032.057a4.8 4.8 0 0 1-1.86 1.833 5.04 5.04 0 0 1-2.484.634 4.5 4.5 0 0 1-1.935-.424 1.25 1.25 0 0 1-.764.258h-1.71a1.255 1.255 0 0 1-1.256-1.255V7.687a2.4 2.4 0 0 1-.428.625c.253.23.412.561.412.93v7.553a1.255 1.255 0 0 1-1.256 1.255h-1.843a1.25 1.25 0 0 1-.894-.373c-.228.23-.544.373-.894.373H51.32a1.255 1.255 0 0 1-1.256-1.255v-1.251l-.061.117a4.7 4.7 0 0 1-1.782 1.884 4.77 4.77 0 0 1-2.485.67 5.6 5.6 0 0 1-1.485-.188l.009 2.764a1.255 1.255 0 0 1-1.255 1.259h-1.729a1.255 1.255 0 0 1-1.255-1.255v-3.537a1.255 1.255 0 0 1-1.167.793h-1.679a1.25 1.25 0 0 1-.77-.263 4.5 4.5 0 0 1-1.945.429c-.885 0-1.724-.21-2.495-.632l-.017-.01a5 5 0 0 1-1.081-.836 1.255 1.255 0 0 1-1.254 1.312h-1.81a1.255 1.255 0 0 1-1.228-.99l-.782-3.625-2.044 3.939a1.25 1.25 0 0 1-1.115.676h-.098a1.25 1.25 0 0 1-1.116-.68l-2.061-3.994zM35.92 16.63l.207-.114.223-.15q.493-.356.735-.785l.061-.118.033 1.332h1.678V9.242h-1.694l-.033 1.267q-.133-.329-.526-.658l-.032-.028a3.2 3.2 0 0 0-.668-.428l-.27-.12a3.3 3.3 0 0 0-1.235-.23q-1.136-.001-1.974.493a3.36 3.36 0 0 0-1.3 1.382q-.445.89-.444 2.074 0 1.2.51 2.107a3.8 3.8 0 0 0 1.382 1.381 3.9 3.9 0 0 0 1.893.477q.795 0 1.455-.33zm-2.789-5.38q-.576.675-.575 1.762 0 1.102.559 1.794.576.675 1.645.675a2.25 2.25 0 0 0 .934-.19 2.2 2.2 0 0 0 .468-.29l.178-.161a2.2 2.2 0 0 0 .397-.561q.244-.5.244-1.15v-.115q0-.708-.296-1.267l-.043-.077a2.2 2.2 0 0 0-.633-.709l-.13-.086-.047-.028a2.1 2.1 0 0 0-1.073-.285q-1.052 0-1.629.692zm2.316 2.706c.163-.17.28-.407.28-.83v-.114c0-.292-.06-.508-.15-.68a.96.96 0 0 0-.353-.389.85.85 0 0 0-.464-.127c-.4 0-.56.114-.664.239l-.01.012c-.148.174-.275.45-.275.945 0 .506.122.801.27.99.097.11.266.224.68.224.303 0 .504-.09.687-.269zm7.545 1.705a2.6 2.6 0 0 0 .331.423q.319.33.755.548l.173.074q.65.255 1.49.255 1.02 0 1.844-.493a3.45 3.45 0 0 0 1.316-1.4q.493-.904.493-2.089 0-1.909-.988-2.913-.988-1.02-2.584-1.02-.898 0-1.575.347a3 3 0 0 0-.415.262l-.199.166a3.4 3.4 0 0 0-.64.82V9.242h-1.712v11.553h1.729l-.017-5.134zm.53-1.138q.206.29.48.5l.155.11.053.034q.51.296 1.119.297 1.07 0 1.645-.675.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.435 0-.835.16a2 2 0 0 0-.284.136 2 2 0 0 0-.363.254 2.2 2.2 0 0 0-.46.569l-.082.162a2.6 2.6 0 0 0-.213 1.072v.115q0 .707.296 1.267l.135.211zm.964-.818a1.1 1.1 0 0 0 .367.385.94.94 0 0 0 .476.118c.423 0 .59-.117.687-.23.159-.194.28-.478.28-.95 0-.53-.133-.8-.266-.952l-.021-.025c-.078-.094-.231-.221-.68-.221a1 1 0 0 0-.503.135l-.012.007a.86.86 0 0 0-.335.343c-.073.133-.132.324-.132.614v.115a1.4 1.4 0 0 0 .14.66zm15.7-6.222q.347-.346.346-.856a1.05 1.05 0 0 0-.345-.79 1.18 1.18 0 0 0-.84-.329q-.51 0-.855.33a1.05 1.05 0 0 0-.346.79q0 .51.346.855.345.346.856.346.51 0 .839-.346zm4.337 9.314.033-1.332q.191.403.59.747l.098.081a4 4 0 0 0 .316.224l.223.122a3.2 3.2 0 0 0 1.44.322 3.8 3.8 0 0 0 1.875-.477 3.5 3.5 0 0 0 1.382-1.366q.527-.89.526-2.09 0-1.184-.444-2.073a3.24 3.24 0 0 0-1.283-1.399q-.823-.51-1.942-.51a3.5 3.5 0 0 0-1.527.344l-.086.043-.165.09a3 3 0 0 0-.33.214q-.432.315-.656.707a2 2 0 0 0-.099.198l.082-1.283V4.701h-1.744v12.095zm.473-2.509a2.5 2.5 0 0 0 .566.7q.117.098.245.18l.144.08a2.1 2.1 0 0 0 .975.232q1.07 0 1.645-.675.576-.69.576-1.778 0-1.102-.576-1.777-.56-.691-1.645-.692a2.2 2.2 0 0 0-1.015.235q-.22.113-.415.282l-.15.142a2.1 2.1 0 0 0-.42.594q-.223.479-.223 1.1v.115q0 .705.293 1.26zm2.616-.293c.157-.191.28-.479.28-.967 0-.51-.13-.79-.276-.961l-.021-.026c-.082-.1-.232-.225-.67-.225a.87.87 0 0 0-.681.279l-.012.011c-.154.155-.274.38-.274.807v.115c0 .285.057.499.144.669a1.1 1.1 0 0 0 .367.405c.137.082.28.123.455.123.423 0 .59-.118.686-.23zm8.266-3.013q.345-.13.724-.14l.069-.002q.493 0 .642.099l.247-1.794q-.196-.099-.717-.099a2.3 2.3 0 0 0-.545.063 2 2 0 0 0-.411.148 2.2 2.2 0 0 0-.4.249 2.5 2.5 0 0 0-.485.499 2.7 2.7 0 0 0-.32.581l-.05.137v-1.48h-1.778v7.553h1.777v-3.884q0-.546.159-.943a1.5 1.5 0 0 1 .466-.636 2.5 2.5 0 0 1 .399-.253 2 2 0 0 1 .224-.099zm9.784 2.656.05-.922q0-1.743-.856-2.698-.838-.97-2.584-.97-1.119-.001-2.007.493a3.46 3.46 0 0 0-1.4 1.382q-.493.906-.493 2.106 0 1.07.428 1.975.428.89 1.332 1.432.906.526 2.255.526.973 0 1.668-.185l.044-.012.135-.04q.613-.184.984-.421l-.542-1.267q-.3.162-.642.274l-.297.087q-.51.131-1.3.131-.954 0-1.497-.444a1.6 1.6 0 0 1-.192-.193q-.366-.44-.512-1.234l-.004-.021zm-5.427-1.256-.003.022h3.752v-.138q-.011-.727-.288-1.118a1 1 0 0 0-.156-.176q-.46-.428-1.316-.428-.986 0-1.494.604-.379.45-.494 1.234zm-27.053 2.77V4.7h-1.86v12.095h5.333V15.15zm7.103-5.908v7.553h-1.843V9.242h1.843z'/%3E%3Cpath fill='%23fff' d='m19.63 11.151-.757-1.71-.345 1.71-1.12 5.644h-1.827L18.083 4.7h.197l3.325 6.533.988 2.19.988-2.19L26.839 4.7h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.93 5.644h-.098l-2.913-5.644zm14.836 5.81q-1.02 0-1.893-.478a3.8 3.8 0 0 1-1.381-1.382q-.51-.906-.51-2.106 0-1.185.444-2.074a3.36 3.36 0 0 1 1.3-1.382q.839-.494 1.974-.494a3.3 3.3 0 0 1 1.234.231 3.3 3.3 0 0 1 .97.575q.396.33.527.659l.033-1.267h1.694v7.553H37.18l-.033-1.332q-.279.593-1.02 1.053a3.17 3.17 0 0 1-1.662.444zm.296-1.482q.938 0 1.58-.642.642-.66.642-1.711v-.115q0-.708-.296-1.267a2.2 2.2 0 0 0-.807-.872 2.1 2.1 0 0 0-1.119-.313q-1.053 0-1.629.692-.575.675-.575 1.76 0 1.103.559 1.795.577.675 1.645.675zm6.521-6.237h1.711v1.4q.906-1.597 2.83-1.597 1.596 0 2.584 1.02.988 1.005.988 2.914 0 1.185-.493 2.09a3.46 3.46 0 0 1-1.316 1.399 3.5 3.5 0 0 1-1.844.493q-.954 0-1.662-.329a2.67 2.67 0 0 1-1.086-.97l.017 5.134h-1.728zm4.048 6.22q1.07 0 1.645-.674.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.592 0-1.12.296-.51.28-.822.823-.296.527-.296 1.234v.115q0 .708.296 1.267.313.543.823.855.51.296 1.119.297z'/%3E%3Cpath fill='%23e1e3e9' d='M51.325 4.7h1.86v10.45h3.473v1.646h-5.333zm7.12 4.542h1.843v7.553h-1.843zm.905-1.415a1.16 1.16 0 0 1-.856-.346 1.17 1.17 0 0 1-.346-.856 1.05 1.05 0 0 1 .346-.79q.346-.329.856-.329.494 0 .839.33a1.05 1.05 0 0 1 .345.79 1.16 1.16 0 0 1-.345.855q-.33.346-.84.346zm7.875 9.133a3.17 3.17 0 0 1-1.662-.444q-.723-.46-1.004-1.053l-.033 1.332h-1.71V4.701h1.743v4.657l-.082 1.283q.279-.658 1.086-1.119a3.5 3.5 0 0 1 1.778-.477q1.119 0 1.942.51a3.24 3.24 0 0 1 1.283 1.4q.445.888.444 2.072 0 1.201-.526 2.09a3.5 3.5 0 0 1-1.382 1.366 3.8 3.8 0 0 1-1.876.477zm-.296-1.481q1.069 0 1.645-.675.577-.69.577-1.778 0-1.102-.577-1.776-.56-.691-1.645-.692a2.12 2.12 0 0 0-1.58.659q-.642.641-.642 1.694v.115q0 .71.296 1.267a2.4 2.4 0 0 0 .807.872 2.1 2.1 0 0 0 1.119.313zm5.927-6.237h1.777v1.481q.263-.757.856-1.217a2.14 2.14 0 0 1 1.349-.46q.527 0 .724.098l-.247 1.794q-.149-.099-.642-.099-.774 0-1.416.494-.626.493-.626 1.58v3.883h-1.777V9.242zm9.534 7.718q-1.35 0-2.255-.526-.904-.543-1.332-1.432a4.6 4.6 0 0 1-.428-1.975q0-1.2.493-2.106a3.46 3.46 0 0 1 1.4-1.382q.889-.495 2.007-.494 1.744 0 2.584.97.855.956.856 2.7 0 .444-.05.92h-5.43q.18 1.005.708 1.45.542.443 1.497.443.79 0 1.3-.131a4 4 0 0 0 .938-.362l.542 1.267q-.411.263-1.119.46-.708.198-1.711.197zm1.596-4.558q.016-1.02-.444-1.432-.46-.428-1.316-.428-1.728 0-1.991 1.86z'/%3E%3Cpath d='M5.074 15.948a.484.657 0 0 0-.486.659v1.84a.484.657 0 0 0 .486.659h4.101a.484.657 0 0 0 .486-.659v-1.84a.484.657 0 0 0-.486-.659zm3.56 1.16H5.617v.838h3.017z' style='fill:%23fff;fill-rule:evenodd;stroke-width:1.03600001'/%3E%3Cg style='stroke-width:1.12603545'%3E%3Cpath d='M-9.408-1.416c-3.833-.025-7.056 2.912-7.08 6.615-.02 3.08 1.653 4.832 3.107 6.268.903.892 1.721 1.74 2.32 2.902l-.525-.004c-.543-.003-.992.304-1.24.639a1.87 1.87 0 0 0-.362 1.121l-.011 1.877c-.003.402.104.787.347 1.125.244.338.688.653 1.23.656l4.142.028c.542.003.99-.306 1.238-.641a1.87 1.87 0 0 0 .363-1.121l.012-1.875a1.87 1.87 0 0 0-.348-1.127c-.243-.338-.688-.653-1.23-.656l-.518-.004c.597-1.145 1.425-1.983 2.348-2.87 1.473-1.414 3.18-3.149 3.2-6.226-.016-3.59-2.923-6.684-6.993-6.707m-.006 1.1v.002c3.274.02 5.92 2.532 5.9 5.6-.017 2.706-1.39 4.026-2.863 5.44-1.034.994-2.118 2.033-2.814 3.633-.018.041-.052.055-.075.065q-.013.004-.02.01a.34.34 0 0 1-.226.084.34.34 0 0 1-.224-.086l-.092-.077c-.699-1.615-1.768-2.669-2.781-3.67-1.454-1.435-2.797-2.762-2.78-5.478.02-3.067 2.7-5.545 5.975-5.523m-.02 2.826c-1.62-.01-2.944 1.315-2.955 2.96-.01 1.646 1.295 2.988 2.916 2.999h.002c1.621.01 2.943-1.316 2.953-2.961.011-1.646-1.294-2.988-2.916-2.998m-.005 1.1c1.017.006 1.829.83 1.822 1.89s-.83 1.874-1.848 1.867c-1.018-.006-1.829-.83-1.822-1.89s.83-1.874 1.848-1.868m-2.155 11.857 4.14.025c.271.002.49.305.487.676l-.013 1.875c-.003.37-.224.67-.495.668l-4.14-.025c-.27-.002-.487-.306-.485-.676l.012-1.875c.003-.37.224-.67.494-.668' style='color:%23000;font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:medium;line-height:normal;font-family:sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-feature-settings:normal;text-indent:0;text-align:start;text-decoration:none;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:%23000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;text-anchor:start;white-space:normal;shape-padding:0;clip-rule:evenodd;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:%23000;solid-opacity:1;vector-effect:none;fill:%23000;fill-opacity:.4;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto' transform='translate(15.553 2.85)scale(.88807)'/%3E%3Cpath d='M-9.415-.316C-12.69-.338-15.37 2.14-15.39 5.207c-.017 2.716 1.326 4.041 2.78 5.477 1.013 1 2.081 2.055 2.78 3.67l.092.076a.34.34 0 0 0 .225.086.34.34 0 0 0 .227-.083l.019-.01c.022-.009.057-.024.074-.064.697-1.6 1.78-2.64 2.814-3.634 1.473-1.414 2.847-2.733 2.864-5.44.02-3.067-2.627-5.58-5.901-5.601m-.057 8.784c1.621.011 2.944-1.315 2.955-2.96.01-1.646-1.295-2.988-2.916-2.999-1.622-.01-2.945 1.315-2.955 2.96s1.295 2.989 2.916 3' style='clip-rule:evenodd;fill:%23e1e3e9;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4' transform='translate(15.553 2.85)scale(.88807)'/%3E%3Cpath d='M-11.594 15.465c-.27-.002-.492.297-.494.668l-.012 1.876c-.003.371.214.673.485.675l4.14.027c.271.002.492-.298.495-.668l.012-1.877c.003-.37-.215-.672-.485-.674z' style='clip-rule:evenodd;fill:%23fff;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4' transform='translate(15.553 2.85)scale(.88807)'/%3E%3C/g%3E%3C/svg%3E")}}.maplibregl-ctrl.maplibregl-ctrl-attrib{background-color:hsla(0,0%,100%,.5);margin:0;padding:0 5px}@media screen{.maplibregl-ctrl-attrib.maplibregl-compact{background-color:#fff;border-radius:12px;box-sizing:content-box;color:#000;margin:10px;min-height:20px;padding:2px 24px 2px 0;position:relative}.maplibregl-ctrl-attrib.maplibregl-compact-show{padding:2px 28px 2px 8px;visibility:visible}.maplibregl-ctrl-bottom-left>.maplibregl-ctrl-attrib.maplibregl-compact-show,.maplibregl-ctrl-top-left>.maplibregl-ctrl-attrib.maplibregl-compact-show{border-radius:12px;padding:2px 8px 2px 28px}.maplibregl-ctrl-attrib.maplibregl-compact .maplibregl-ctrl-attrib-inner{display:none}.maplibregl-ctrl-attrib-button{background-color:hsla(0,0%,100%,.5);background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' fill-rule='evenodd' viewBox='0 0 20 20'%3E%3Cpath d='M4 10a6 6 0 1 0 12 0 6 6 0 1 0-12 0m5-3a1 1 0 1 0 2 0 1 1 0 1 0-2 0m0 3a1 1 0 1 1 2 0v3a1 1 0 1 1-2 0'/%3E%3C/svg%3E");border:0;border-radius:12px;box-sizing:border-box;cursor:pointer;display:none;height:24px;outline:none;position:absolute;right:0;top:0;width:24px}.maplibregl-ctrl-attrib summary.maplibregl-ctrl-attrib-button{-webkit-appearance:none;-moz-appearance:none;appearance:none;list-style:none}.maplibregl-ctrl-attrib summary.maplibregl-ctrl-attrib-button::-webkit-details-marker{display:none}.maplibregl-ctrl-bottom-left .maplibregl-ctrl-attrib-button,.maplibregl-ctrl-top-left .maplibregl-ctrl-attrib-button{left:0}.maplibregl-ctrl-attrib.maplibregl-compact .maplibregl-ctrl-attrib-button,.maplibregl-ctrl-attrib.maplibregl-compact-show .maplibregl-ctrl-attrib-inner{display:block}.maplibregl-ctrl-attrib.maplibregl-compact-show .maplibregl-ctrl-attrib-button{background-color:rgb(0 0 0/5%)}.maplibregl-ctrl-bottom-right>.maplibregl-ctrl-attrib.maplibregl-compact:after{bottom:0;right:0}.maplibregl-ctrl-top-right>.maplibregl-ctrl-attrib.maplibregl-compact:after{right:0;top:0}.maplibregl-ctrl-top-left>.maplibregl-ctrl-attrib.maplibregl-compact:after{left:0;top:0}.maplibregl-ctrl-bottom-left>.maplibregl-ctrl-attrib.maplibregl-compact:after{bottom:0;left:0}}@media screen and (forced-colors:active){.maplibregl-ctrl-attrib.maplibregl-compact:after{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' fill='%23fff' fill-rule='evenodd' viewBox='0 0 20 20'%3E%3Cpath d='M4 10a6 6 0 1 0 12 0 6 6 0 1 0-12 0m5-3a1 1 0 1 0 2 0 1 1 0 1 0-2 0m0 3a1 1 0 1 1 2 0v3a1 1 0 1 1-2 0'/%3E%3C/svg%3E")}}@media screen and (forced-colors:active) and (prefers-color-scheme:light){.maplibregl-ctrl-attrib.maplibregl-compact:after{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' fill-rule='evenodd' viewBox='0 0 20 20'%3E%3Cpath d='M4 10a6 6 0 1 0 12 0 6 6 0 1 0-12 0m5-3a1 1 0 1 0 2 0 1 1 0 1 0-2 0m0 3a1 1 0 1 1 2 0v3a1 1 0 1 1-2 0'/%3E%3C/svg%3E")}}.maplibregl-ctrl-attrib a{color:rgba(0,0,0,.75);text-decoration:none}.maplibregl-ctrl-attrib a:hover{color:inherit;text-decoration:underline}.maplibregl-attrib-empty{display:none}.maplibregl-ctrl-scale{background-color:hsla(0,0%,100%,.75);border:2px solid #333;border-top:#333;box-sizing:border-box;color:#333;font-size:10px;padding:0 5px}.maplibregl-popup{display:flex;left:0;pointer-events:none;position:absolute;top:0;will-change:transform}.maplibregl-popup-anchor-top,.maplibregl-popup-anchor-top-left,.maplibregl-popup-anchor-top-right{flex-direction:column}.maplibregl-popup-anchor-bottom,.maplibregl-popup-anchor-bottom-left,.maplibregl-popup-anchor-bottom-right{flex-direction:column-reverse}.maplibregl-popup-anchor-left{flex-direction:row}.maplibregl-popup-anchor-right{flex-direction:row-reverse}.maplibregl-popup-tip{border:10px solid transparent;height:0;width:0;z-index:1}.maplibregl-popup-anchor-top .maplibregl-popup-tip{align-self:center;border-bottom-color:#fff;border-top:none}.maplibregl-popup-anchor-top-left .maplibregl-popup-tip{align-self:flex-start;border-bottom-color:#fff;border-left:none;border-top:none}.maplibregl-popup-anchor-top-right .maplibregl-popup-tip{align-self:flex-end;border-bottom-color:#fff;border-right:none;border-top:none}.maplibregl-popup-anchor-bottom .maplibregl-popup-tip{align-self:center;border-bottom:none;border-top-color:#fff}.maplibregl-popup-anchor-bottom-left .maplibregl-popup-tip{align-self:flex-start;border-bottom:none;border-left:none;border-top-color:#fff}.maplibregl-popup-anchor-bottom-right .maplibregl-popup-tip{align-self:flex-end;border-bottom:none;border-right:none;border-top-color:#fff}.maplibregl-popup-anchor-left .maplibregl-popup-tip{align-self:center;border-left:none;border-right-color:#fff}.maplibregl-popup-anchor-right .maplibregl-popup-tip{align-self:center;border-left-color:#fff;border-right:none}.maplibregl-popup-close-button{background-color:transparent;border:0;border-radius:0 3px 0 0;cursor:pointer;position:absolute;right:0;top:0}.maplibregl-popup-close-button:hover{background-color:rgb(0 0 0/5%)}.maplibregl-popup-content{background:#fff;border-radius:3px;box-shadow:0 1px 2px rgba(0,0,0,.1);padding:15px 10px;pointer-events:auto;position:relative}.maplibregl-popup-anchor-top-left .maplibregl-popup-content{border-top-left-radius:0}.maplibregl-popup-anchor-top-right .maplibregl-popup-content{border-top-right-radius:0}.maplibregl-popup-anchor-bottom-left .maplibregl-popup-content{border-bottom-left-radius:0}.maplibregl-popup-anchor-bottom-right .maplibregl-popup-content{border-bottom-right-radius:0}.maplibregl-popup-track-pointer{display:none}.maplibregl-popup-track-pointer *{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.maplibregl-map:hover .maplibregl-popup-track-pointer{display:flex}.maplibregl-map:active .maplibregl-popup-track-pointer{display:none}.maplibregl-marker{left:0;position:absolute;top:0;transition:opacity .2s;will-change:transform}.maplibregl-user-location-dot,.maplibregl-user-location-dot:before{background-color:#1da1f2;border-radius:50%;height:15px;width:15px}.maplibregl-user-location-dot:before{animation:maplibregl-user-location-dot-pulse 2s infinite;content:"";position:absolute}.maplibregl-user-location-dot:after{border:2px solid #fff;border-radius:50%;box-shadow:0 0 3px rgba(0,0,0,.35);box-sizing:border-box;content:"";height:19px;left:-2px;position:absolute;top:-2px;width:19px}@keyframes maplibregl-user-location-dot-pulse{0%{opacity:1;transform:scale(1)}70%{opacity:0;transform:scale(3)}to{opacity:0;transform:scale(1)}}.maplibregl-user-location-dot-stale{background-color:#aaa}.maplibregl-user-location-dot-stale:after{display:none}.maplibregl-user-location-accuracy-circle{background-color:#1da1f233;border-radius:100%;height:1px;width:1px}.maplibregl-crosshair,.maplibregl-crosshair .maplibregl-interactive,.maplibregl-crosshair .maplibregl-interactive:active{cursor:crosshair}.maplibregl-boxzoom{background:#fff;border:2px dotted #202020;height:0;left:0;opacity:.5;position:absolute;top:0;width:0}.maplibregl-cooperative-gesture-screen{align-items:center;background:rgba(0,0,0,.4);color:#fff;display:flex;font-size:1.4em;inset:0;justify-content:center;line-height:1.2;opacity:0;padding:1rem;pointer-events:none;position:absolute;transition:opacity 1s ease 1s;z-index:99999}.maplibregl-cooperative-gesture-screen.maplibregl-show{opacity:1;transition:opacity .05s}.maplibregl-cooperative-gesture-screen .maplibregl-mobile-message{display:none}@media (hover:none),(width <= 480px){.maplibregl-cooperative-gesture-screen .maplibregl-desktop-message{display:none}.maplibregl-cooperative-gesture-screen .maplibregl-mobile-message{display:block}}.maplibregl-pseudo-fullscreen{height:100%!important;left:0!important;position:fixed!important;top:0!important;width:100%!important;z-index:99999}`,document.head.appendChild(Ue)}})()}),p1=t(Ue=>{var ve=h0(),v=Pp(),c=d0(),h=V(),_=zm().addStyleRule,y=bt(),x=Mn(),w=Zm(),A=y.extendFlat,d=y.extendDeepAll;Ue.modules={},Ue.allCategories={},Ue.allTypes=[],Ue.subplotsRegistry={},Ue.componentsRegistry={},Ue.layoutArrayContainers=[],Ue.layoutArrayRegexes=[],Ue.traceLayoutAttributes={},Ue.localeRegistry={},Ue.apiMethodRegistry={},Ue.collectableSubplotTypes=null,Ue.register=function(D){if(Ue.collectableSubplotTypes=null,D)D&&!Array.isArray(D)&&(D=[D]);else throw new Error("No argument passed to Plotly.register.");for(var z=0;z<D.length;z++){var H=D[z];if(!H)throw new Error("Invalid module was attempted to be registered!");switch(H.moduleType){case"trace":k(H);break;case"transform":j(H);break;case"component":L(H);break;case"locale":P(H);break;case"apiMethod":var Y=H.name;Ue.apiMethodRegistry[Y]=H.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},Ue.getModule=function(D){var z=Ue.modules[S(D)];return z?z._module:!1},Ue.traceIs=function(D,z){if(D=S(D),D==="various")return!1;var H=Ue.modules[D];return H||(D&&ve.log("Unrecognized trace type "+D+"."),H=Ue.modules[x.type.dflt]),!!H.categories[z]},Ue.getComponentMethod=function(D,z){var H=Ue.componentsRegistry[D];return H&&H[z]||v},Ue.call=function(){var D=arguments[0],z=[].slice.call(arguments,1);return Ue.apiMethodRegistry[D].apply(null,z)};function k(D){var z=D.name,H=D.categories,Y=D.meta;if(Ue.modules[z]){ve.log("Type "+z+" already registered");return}Ue.subplotsRegistry[D.basePlotModule.name]||T(D.basePlotModule);for(var ht={},Se=0;Se<H.length;Se++)ht[H[Se]]=!0,Ue.allCategories[H[Se]]=!0;Ue.modules[z]={_module:D,categories:ht},Y&&Object.keys(Y).length&&(Ue.modules[z].meta=Y),Ue.allTypes.push(z);for(var ie in Ue.componentsRegistry)O(ie,z);D.layoutAttributes&&A(Ue.traceLayoutAttributes,D.layoutAttributes);var X=D.basePlotModule,ft=X.name;if(ft==="mapbox"){var Le=X.constants.styleRules;for(var nt in Le)_(".js-plotly-plot .plotly .mapboxgl-"+nt,Le[nt])}ft==="map"&&S1(),(ft==="geo"||ft==="mapbox"||ft==="map")&&window.PlotlyGeoAssets===void 0&&(window.PlotlyGeoAssets={topojson:{}})}function T(D){var z=D.name;if(Ue.subplotsRegistry[z]){ve.log("Plot type "+z+" already registered.");return}N(D),Ue.subplotsRegistry[z]=D;for(var H in Ue.componentsRegistry)B(H,D.name)}function L(D){if(typeof D.name!="string")throw new Error("Component module *name* must be a string.");var z=D.name;Ue.componentsRegistry[z]=D,D.layoutAttributes&&(D.layoutAttributes._isLinkedToArray&&c(Ue.layoutArrayContainers,z),N(D));for(var H in Ue.modules)O(z,H);for(var Y in Ue.subplotsRegistry)B(z,Y);D.schema&&D.schema.layout&&d(w,D.schema.layout)}function j(D){if(typeof D.name!="string")throw new Error("Transform module *name* must be a string.");var z="Transform module "+D.name,H=typeof D.transform=="function",Y=typeof D.calcTransform=="function";if(!H&&!Y)throw new Error(z+" is missing a *transform* or *calcTransform* method.");H&&Y&&ve.log([z+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),h(D.attributes)||ve.log(z+" registered without an *attributes* object."),typeof D.supplyDefaults!="function"&&ve.log(z+" registered without a *supplyDefaults* method.")}function P(D){var z=D.name,H=z.split("-")[0],Y=D.dictionary,ht=D.format,Se=Y&&Object.keys(Y).length,ie=ht&&Object.keys(ht).length,X=Ue.localeRegistry,ft=X[z];if(ft||(X[z]=ft={}),H!==z){var Le=X[H];Le||(X[H]=Le={}),Se&&Le.dictionary===ft.dictionary&&(Le.dictionary=Y),ie&&Le.format===ft.format&&(Le.format=ht)}Se&&(ft.dictionary=Y),ie&&(ft.format=ht)}function N(D){if(D.layoutAttributes){var z=D.layoutAttributes._arrayAttrRegexps;if(z)for(var H=0;H<z.length;H++)c(Ue.layoutArrayRegexes,z[H])}}function O(D,z){var H=Ue.componentsRegistry[D].schema;if(!(!H||!H.traces)){var Y=H.traces[z];Y&&d(Ue.modules[z]._module.attributes,Y)}}function B(D,z){var H=Ue.componentsRegistry[D].schema;if(!(!H||!H.subplots)){var Y=Ue.subplotsRegistry[z],ht=Y.layoutAttributes,Se=Y.attr==="subplot"?Y.name:Y.attr;Array.isArray(Se)&&(Se=Se[0]);var ie=H.subplots[Se];ht&&ie&&d(ht,ie)}}function S(D){return typeof D=="object"&&(D=D.type),D}}),hv=t(Ue=>{var ve=f().timeFormat,v=E(),c=h0(),h=Q().mod,_=M(),y=_.BADNUM,x=_.ONEDAY,w=_.ONEHOUR,A=_.ONEMIN,d=_.ONESEC,k=_.EPOCHJD,T=p1(),L=f().utcFormat,j=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,P=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,N=new Date().getFullYear()-70;function O(dt){return dt&&T.componentsRegistry.calendars&&typeof dt=="string"&&dt!=="gregorian"}Ue.dateTick0=function(dt,pt){var se=B(dt,!!pt);if(pt<2)return se;var gt=Ue.dateTime2ms(se,dt);return gt+=x*(pt-1),Ue.ms2DateTime(gt,0,dt)};function B(dt,pt){return O(dt)?pt?T.getComponentMethod("calendars","CANONICAL_SUNDAY")[dt]:T.getComponentMethod("calendars","CANONICAL_TICK")[dt]:pt?"2000-01-02":"2000-01-01"}Ue.dfltRange=function(dt){return O(dt)?T.getComponentMethod("calendars","DFLTRANGE")[dt]:["2000-01-01","2001-01-01"]},Ue.isJSDate=function(dt){return typeof dt=="object"&&dt!==null&&typeof dt.getTime=="function"};var S,D;Ue.dateTime2ms=function(dt,pt){if(Ue.isJSDate(dt)){var se=dt.getTimezoneOffset()*A,gt=(dt.getUTCMinutes()-dt.getMinutes())*A+(dt.getUTCSeconds()-dt.getSeconds())*d+(dt.getUTCMilliseconds()-dt.getMilliseconds());if(gt){var xt=3*A;se=se-xt/2+h(gt-se+xt/2,xt)}return dt=Number(dt)-se,dt>=S&&dt<=D?dt:y}if(typeof dt!="string"&&typeof dt!="number")return y;dt=String(dt);var Nt=O(pt),Rt=dt.charAt(0);Nt&&(Rt==="G"||Rt==="g")&&(dt=dt.substr(1),pt="");var Pt=Nt&&pt.substr(0,7)==="chinese",xn=dt.match(Pt?P:j);if(!xn)return y;var oa=xn[1],jo=xn[3]||"1",lt=Number(xn[5]||1),ut=Number(xn[7]||0),$=Number(xn[9]||0),yt=Number(xn[11]||0);if(Nt){if(oa.length===2)return y;oa=Number(oa);var Lt;try{var ke=T.getComponentMethod("calendars","getCal")(pt);if(Pt){var G=jo.charAt(jo.length-1)==="i";jo=parseInt(jo,10),Lt=ke.newDate(oa,ke.toMonthIndex(oa,jo,G),lt)}else Lt=ke.newDate(oa,Number(jo),lt)}catch{return y}return Lt?(Lt.toJD()-k)*x+ut*w+$*A+yt*d:y}oa.length===2?oa=(Number(oa)+2e3-N)%100+N:oa=Number(oa),jo-=1;var ne=new Date(Date.UTC(2e3,jo,lt,ut,$));return ne.setUTCFullYear(oa),ne.getUTCMonth()!==jo||ne.getUTCDate()!==lt?y:ne.getTime()+yt*d},S=Ue.MIN_MS=Ue.dateTime2ms("-9999"),D=Ue.MAX_MS=Ue.dateTime2ms("9999-12-31 23:59:59.9999"),Ue.isDateTime=function(dt,pt){return Ue.dateTime2ms(dt,pt)!==y};function z(dt,pt){return String(dt+Math.pow(10,pt)).substr(1)}var H=90*x,Y=3*w,ht=5*A;Ue.ms2DateTime=function(dt,pt,se){if(typeof dt!="number"||!(dt>=S&&dt<=D))return y;pt||(pt=0);var gt=Math.floor(h(dt+.05,1)*10),xt=Math.round(dt-gt/10),Nt,Rt,Pt,xn,oa,jo;if(O(se)){var lt=Math.floor(xt/x)+k,ut=Math.floor(h(dt,x));try{Nt=T.getComponentMethod("calendars","getCal")(se).fromJD(lt).formatDate("yyyy-mm-dd")}catch{Nt=L("G%Y-%m-%d")(new Date(xt))}if(Nt.charAt(0)==="-")for(;Nt.length<11;)Nt="-0"+Nt.substr(1);else for(;Nt.length<10;)Nt="0"+Nt;Rt=pt<H?Math.floor(ut/w):0,Pt=pt<H?Math.floor(ut%w/A):0,xn=pt<Y?Math.floor(ut%A/d):0,oa=pt<ht?ut%d*10+gt:0}else jo=new Date(xt),Nt=L("%Y-%m-%d")(jo),Rt=pt<H?jo.getUTCHours():0,Pt=pt<H?jo.getUTCMinutes():0,xn=pt<Y?jo.getUTCSeconds():0,oa=pt<ht?jo.getUTCMilliseconds()*10+gt:0;return Se(Nt,Rt,Pt,xn,oa)},Ue.ms2DateTimeLocal=function(dt){if(!(dt>=S+x&&dt<=D-x))return y;var pt=Math.floor(h(dt+.05,1)*10),se=new Date(Math.round(dt-pt/10)),gt=ve("%Y-%m-%d")(se),xt=se.getHours(),Nt=se.getMinutes(),Rt=se.getSeconds(),Pt=se.getUTCMilliseconds()*10+pt;return Se(gt,xt,Nt,Rt,Pt)};function Se(dt,pt,se,gt,xt){if((pt||se||gt||xt)&&(dt+=" "+z(pt,2)+":"+z(se,2),(gt||xt)&&(dt+=":"+z(gt,2),xt))){for(var Nt=4;xt%10===0;)Nt-=1,xt/=10;dt+="."+z(xt,Nt)}return dt}Ue.cleanDate=function(dt,pt,se){if(dt===y)return pt;if(Ue.isJSDate(dt)||typeof dt=="number"&&isFinite(dt)){if(O(se))return c.error("JS Dates and milliseconds are incompatible with world calendars",dt),pt;if(dt=Ue.ms2DateTimeLocal(+dt),!dt&&pt!==void 0)return pt}else if(!Ue.isDateTime(dt,se))return c.error("unrecognized date",dt),pt;return dt};var ie=/%\d?f/g,X=/%h/g,ft={1:"1",2:"1",3:"2",4:"2"};function Le(dt,pt,se,gt){dt=dt.replace(ie,function(Nt){var Rt=Math.min(+Nt.charAt(1)||6,6),Pt=(pt/1e3%1+2).toFixed(Rt).substr(2).replace(/0+$/,"")||"0";return Pt});var xt=new Date(Math.floor(pt+.05));if(dt=dt.replace(X,function(){return ft[se("%q")(xt)]}),O(gt))try{dt=T.getComponentMethod("calendars","worldCalFmt")(dt,pt,gt)}catch{return"Invalid"}return se(dt)(xt)}var nt=[59,59.9,59.99,59.999,59.9999];function Ze(dt,pt){var se=h(dt+.05,x),gt=z(Math.floor(se/w),2)+":"+z(h(Math.floor(se/A),60),2);if(pt!=="M"){v(pt)||(pt=0);var xt=Math.min(h(dt/d,60),nt[pt]),Nt=(100+xt).toFixed(pt).substr(1);pt>0&&(Nt=Nt.replace(/0+$/,"").replace(/[\.]$/,"")),gt+=":"+Nt}return gt}Ue.formatDate=function(dt,pt,se,gt,xt,Nt){if(xt=O(xt)&&xt,!pt)if(se==="y")pt=Nt.year;else if(se==="m")pt=Nt.month;else if(se==="d")pt=Nt.dayMonth+`
`+Nt.year;else return Ze(dt,se)+`
`+Le(Nt.dayMonthYear,dt,gt,xt);return Le(pt,dt,gt,xt)};var rt=3*x;Ue.incrementMonth=function(dt,pt,se){se=O(se)&&se;var gt=h(dt,x);if(dt=Math.round(dt-gt),se)try{var xt=Math.round(dt/x)+k,Nt=T.getComponentMethod("calendars","getCal")(se),Rt=Nt.fromJD(xt);return pt%12?Nt.add(Rt,pt,"m"):Nt.add(Rt,pt/12,"y"),(Rt.toJD()-k)*x+gt}catch{c.error("invalid ms "+dt+" in calendar "+se)}var Pt=new Date(dt+rt);return Pt.setUTCMonth(Pt.getUTCMonth()+pt)+gt-rt},Ue.findExactDates=function(dt,pt){for(var se=0,gt=0,xt=0,Nt=0,Rt,Pt,xn=O(pt)&&T.getComponentMethod("calendars","getCal")(pt),oa=0;oa<dt.length;oa++){if(Pt=dt[oa],!v(Pt)){Nt++;continue}if(!(Pt%x))if(xn)try{Rt=xn.fromJD(Pt/x+k),Rt.day()===1?Rt.month()===1?se++:gt++:xt++}catch{}else Rt=new Date(Pt),Rt.getUTCDate()===1?Rt.getUTCMonth()===0?se++:gt++:xt++}gt+=se,xt+=gt;var jo=dt.length-Nt;return{exactYears:se/jo,exactMonths:gt/jo,exactDays:xt/jo}}}),Gg=t((Ue,ve)=>{ve.exports=function(v){return v}}),Cv=t(Ue=>{var ve=E(),v=h0(),c=Gg(),h=M().BADNUM,_=1e-9;Ue.findBin=function(d,k,T){if(ve(k.start))return T?Math.ceil((d-k.start)/k.size-_)-1:Math.floor((d-k.start)/k.size+_);var L=0,j=k.length,P=0,N=j>1?(k[j-1]-k[0])/(j-1):1,O,B;for(N>=0?B=T?y:x:B=T?A:w,d+=N*_*(T?-1:1)*(N>=0?1:-1);L<j&&P++<100;)O=Math.floor((L+j)/2),B(k[O],d)?L=O+1:j=O;return P>90&&v.log("Long binary search..."),L-1};function y(d,k){return d<k}function x(d,k){return d<=k}function w(d,k){return d>k}function A(d,k){return d>=k}Ue.sorterAsc=function(d,k){return d-k},Ue.sorterDes=function(d,k){return k-d},Ue.distinctVals=function(d){var k=d.slice();k.sort(Ue.sorterAsc);var T;for(T=k.length-1;T>-1&&k[T]===h;T--);for(var L=k[T]-k[0]||1,j=L/(T||1)/1e4,P=[],N,O=0;O<=T;O++){var B=k[O],S=B-N;N===void 0?(P.push(B),N=B):S>j&&(L=Math.min(L,S),P.push(B),N=B)}return{vals:P,minDiff:L}},Ue.roundUp=function(d,k,T){for(var L=0,j=k.length-1,P,N=0,O=T?0:1,B=T?1:0,S=T?Math.ceil:Math.floor;L<j&&N++<100;)P=S((L+j)/2),k[P]<=d?L=P+O:j=P-B;return k[L]},Ue.sort=function(d,k){for(var T=0,L=0,j=1;j<d.length;j++){var P=k(d[j],d[j-1]);if(P<0?T=1:P>0&&(L=1),T&&L)return d.sort(k)}return L?d:d.reverse()},Ue.findIndexOfMin=function(d,k){k=k||c;for(var T=1/0,L,j=0;j<d.length;j++){var P=k(d[j]);P<T&&(T=P,L=j)}return L}}),ey=t((Ue,ve)=>{ve.exports=function(v){return Object.keys(v).sort()}}),xy=t(Ue=>{var ve=E(),v=Z().isArrayOrTypedArray;Ue.aggNums=function(c,h,_,y){var x,w;if((!y||y>_.length)&&(y=_.length),ve(h)||(h=!1),v(_[0])){for(w=new Array(y),x=0;x<y;x++)w[x]=Ue.aggNums(c,h,_[x]);_=w}for(x=0;x<y;x++)ve(h)?ve(_[x])&&(h=c(+h,+_[x])):h=_[x];return h},Ue.len=function(c){return Ue.aggNums(function(h){return h+1},0,c)},Ue.mean=function(c,h){return h||(h=Ue.len(c)),Ue.aggNums(function(_,y){return _+y},0,c)/h},Ue.geometricMean=function(c,h){return h||(h=Ue.len(c)),Math.pow(Ue.aggNums(function(_,y){return _*y},1,c),1/h)},Ue.midRange=function(c){if(!(c===void 0||c.length===0))return(Ue.aggNums(Math.max,null,c)+Ue.aggNums(Math.min,null,c))/2},Ue.variance=function(c,h,_){return h||(h=Ue.len(c)),ve(_)||(_=Ue.mean(c,h)),Ue.aggNums(function(y,x){return y+Math.pow(x-_,2)},0,c)/h},Ue.stdev=function(c,h,_){return Math.sqrt(Ue.variance(c,h,_))},Ue.median=function(c){var h=c.slice().sort();return Ue.interp(h,.5)},Ue.interp=function(c,h){if(!ve(h))throw"n should be a finite number";if(h=h*c.length-.5,h<0)return c[0];if(h>c.length-1)return c[c.length-1];var _=h%1;return _*c[Math.ceil(h)]+(1-_)*c[Math.floor(h)]}}),Gv=t((Ue,ve)=>{var v=Q(),c=v.mod,h=v.modHalf,_=Math.PI,y=2*_;function x(B){return B/180*_}function w(B){return B/_*180}function A(B){return Math.abs(B[1]-B[0])>y-1e-14}function d(B,S){return h(S-B,y)}function k(B,S){return Math.abs(d(B,S))}function T(B,S){if(A(S))return!0;var D,z;S[0]<S[1]?(D=S[0],z=S[1]):(D=S[1],z=S[0]),D=c(D,y),z=c(z,y),D>z&&(z+=y);var H=c(B,y),Y=H+y;return H>=D&&H<=z||Y>=D&&Y<=z}function L(B,S,D,z){if(!T(S,z))return!1;var H,Y;return D[0]<D[1]?(H=D[0],Y=D[1]):(H=D[1],Y=D[0]),B>=H&&B<=Y}function j(B,S,D,z,H,Y,ht){H=H||0,Y=Y||0;var Se=A([D,z]),ie,X,ft,Le,nt;Se?(ie=0,X=_,ft=y):D<z?(ie=D,ft=z):(ie=z,ft=D),B<S?(Le=B,nt=S):(Le=S,nt=B);function Ze(se,gt){return[se*Math.cos(gt)+H,Y-se*Math.sin(gt)]}var rt=Math.abs(ft-ie)<=_?0:1;function dt(se,gt,xt){return"A"+[se,se]+" "+[0,rt,xt]+" "+Ze(se,gt)}var pt;return Se?Le===null?pt="M"+Ze(nt,ie)+dt(nt,X,0)+dt(nt,ft,0)+"Z":pt="M"+Ze(Le,ie)+dt(Le,X,0)+dt(Le,ft,0)+"ZM"+Ze(nt,ie)+dt(nt,X,1)+dt(nt,ft,1)+"Z":Le===null?(pt="M"+Ze(nt,ie)+dt(nt,ft,0),ht&&(pt+="L0,0Z")):pt="M"+Ze(Le,ie)+"L"+Ze(nt,ie)+dt(nt,ft,0)+"L"+Ze(Le,ft)+dt(Le,ie,1)+"Z",pt}function P(B,S,D,z,H){return j(null,B,S,D,z,H,0)}function N(B,S,D,z,H){return j(null,B,S,D,z,H,1)}function O(B,S,D,z,H,Y){return j(B,S,D,z,H,Y,1)}ve.exports={deg2rad:x,rad2deg:w,angleDelta:d,angleDist:k,isFullCircle:A,isAngleInsideSector:T,isPtInsideSector:L,pathArc:P,pathSector:N,pathAnnulus:O}}),yv=t(Ue=>{Ue.isLeftAnchor=function(ve){return ve.xanchor==="left"||ve.xanchor==="auto"&&ve.x<=1/3},Ue.isCenterAnchor=function(ve){return ve.xanchor==="center"||ve.xanchor==="auto"&&ve.x>1/3&&ve.x<2/3},Ue.isRightAnchor=function(ve){return ve.xanchor==="right"||ve.xanchor==="auto"&&ve.x>=2/3},Ue.isTopAnchor=function(ve){return ve.yanchor==="top"||ve.yanchor==="auto"&&ve.y>=2/3},Ue.isMiddleAnchor=function(ve){return ve.yanchor==="middle"||ve.yanchor==="auto"&&ve.y>1/3&&ve.y<2/3},Ue.isBottomAnchor=function(ve){return ve.yanchor==="bottom"||ve.yanchor==="auto"&&ve.y<=1/3}}),Wv=t(Ue=>{var ve=Q().mod;Ue.segmentsIntersect=v;function v(x,w,A,d,k,T,L,j){var P=A-x,N=k-x,O=L-k,B=d-w,S=T-w,D=j-T,z=P*D-O*B;if(z===0)return null;var H=(N*D-O*S)/z,Y=(N*B-P*S)/z;return Y<0||Y>1||H<0||H>1?null:{x:x+P*H,y:w+B*H}}Ue.segmentDistance=function(x,w,A,d,k,T,L,j){if(v(x,w,A,d,k,T,L,j))return 0;var P=A-x,N=d-w,O=L-k,B=j-T,S=P*P+N*N,D=O*O+B*B,z=Math.min(c(P,N,S,k-x,T-w),c(P,N,S,L-x,j-w),c(O,B,D,x-k,w-T),c(O,B,D,A-k,d-T));return Math.sqrt(z)};function c(x,w,A,d,k){var T=d*x+k*w;if(T<0)return d*d+k*k;if(T>A){var L=d-x,j=k-w;return L*L+j*j}else{var P=d*w-k*x;return P*P/A}}var h,_,y;Ue.getTextLocation=function(x,w,A,d){if((x!==_||d!==y)&&(h={},_=x,y=d),h[A])return h[A];var k=x.getPointAtLength(ve(A-d/2,w)),T=x.getPointAtLength(ve(A+d/2,w)),L=Math.atan((T.y-k.y)/(T.x-k.x)),j=x.getPointAtLength(ve(A,w)),P=(j.x*4+k.x+T.x)/6,N=(j.y*4+k.y+T.y)/6,O={x:P,y:N,theta:L};return h[A]=O,O},Ue.clearLocationCache=function(){_=null},Ue.getVisibleSegment=function(x,w,A){var d=w.left,k=w.right,T=w.top,L=w.bottom,j=0,P=x.getTotalLength(),N=P,O,B;function S(z){var H=x.getPointAtLength(z);z===0?O=H:z===P&&(B=H);var Y=H.x<d?d-H.x:H.x>k?H.x-k:0,ht=H.y<T?T-H.y:H.y>L?H.y-L:0;return Math.sqrt(Y*Y+ht*ht)}for(var D=S(j);D;){if(j+=D+A,j>N)return;D=S(j)}for(D=S(N);D;){if(N-=D+A,j>N)return;D=S(N)}return{min:j,max:N,len:N-j,total:P,isClosed:j===0&&N===P&&Math.abs(O.x-B.x)<.1&&Math.abs(O.y-B.y)<.1}},Ue.findPointOnPath=function(x,w,A,d){d=d||{};for(var k=d.pathLength||x.getTotalLength(),T=d.tolerance||.001,L=d.iterationLimit||30,j=x.getPointAtLength(0)[A]>x.getPointAtLength(k)[A]?-1:1,P=0,N=0,O=k,B,S,D;P<L;){if(B=(N+O)/2,S=x.getPointAtLength(B),D=S[A]-w,Math.abs(D)<T)return S;j*D>0?O=B:N=B,P++}return S}}),_y=t(Ue=>{var ve={};Ue.throttle=function(c,h,_){var y=ve[c],x=Date.now();if(!y){for(var w in ve)ve[w].ts<x-6e4&&delete ve[w];y=ve[c]={ts:0,timer:null}}v(y);function A(){_(),y.ts=Date.now(),y.onDone&&(y.onDone(),y.onDone=null)}if(x>y.ts+h){A();return}y.timer=setTimeout(function(){A(),y.timer=null},h)},Ue.done=function(c){var h=ve[c];return!h||!h.timer?Promise.resolve():new Promise(function(_){var y=h.onDone;h.onDone=function(){y&&y(),_(),h.onDone=null}})},Ue.clear=function(c){if(c)v(ve[c]),delete ve[c];else for(var h in ve)Ue.clear(h)};function v(c){c&&c.timer!==null&&(clearTimeout(c.timer),c.timer=null)}}),iy=t((Ue,ve)=>{ve.exports=function(v){v._responsiveChartHandler&&(window.removeEventListener("resize",v._responsiveChartHandler),delete v._responsiveChartHandler)}}),Cy=t((Ue,ve)=>{ve.exports=_,ve.exports.isMobile=_,ve.exports.default=_;var v=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,c=/CrOS/,h=/android|ipad|playbook|silk/i;function _(y){y||(y={});let x=y.ua;if(!x&&typeof navigator<"u"&&(x=navigator.userAgent),x&&x.headers&&typeof x.headers["user-agent"]=="string"&&(x=x.headers["user-agent"]),typeof x!="string")return!1;let w=v.test(x)&&!c.test(x)||!!y.tablet&&h.test(x);return!w&&y.tablet&&y.featureDetect&&navigator&&navigator.maxTouchPoints>1&&x.indexOf("Macintosh")!==-1&&x.indexOf("Safari")!==-1&&(w=!0),w}}),$v=t((Ue,ve)=>{var v=E(),c=Cy();ve.exports=function(_){var y;if(_&&_.hasOwnProperty("userAgent")?y=_.userAgent:y=h(),typeof y!="string")return!0;var x=c({ua:{headers:{"user-agent":y}},tablet:!0,featureDetect:!1});if(!x)for(var w=y.split(" "),A=1;A<w.length;A++){var d=w[A];if(d.indexOf("Safari")!==-1)for(var k=A-1;k>-1;k--){var T=w[k];if(T.substr(0,8)==="Version/"){var L=T.substr(8).split(".")[0];if(v(L)&&(L=+L),L>=13)return!0}}}return x};function h(){var _;return typeof navigator<"u"&&(_=navigator.userAgent),_&&_.headers&&typeof _.headers["user-agent"]=="string"&&(_=_.headers["user-agent"]),_}}),Lv=t((Ue,ve)=>{var v=l();ve.exports=function(c,h,_){var y=c.selectAll("g."+_.replace(/\s/g,".")).data(h,function(w){return w[0].trace.uid});y.exit().remove(),y.enter().append("g").attr("class",_),y.order();var x=c.classed("rangeplot")?"nodeRangePlot3":"node3";return y.each(function(w){w[0][x]=v.select(this)}),y}}),wg=t((Ue,ve)=>{var v=p1();ve.exports=function(c,h){for(var _=c._context.locale,y=0;y<2;y++){for(var x=c._context.locales,w=0;w<2;w++){var A=(x[_]||{}).dictionary;if(A){var d=A[h];if(d)return d}x=v.localeRegistry}var k=_.split("-")[0];if(k===_)break;_=k}return h}}),Ov=t((Ue,ve)=>{ve.exports=function(v){for(var c={},h=[],_=0,y=0;y<v.length;y++){var x=v[y];c[x]!==1&&(c[x]=1,h[_++]=x)}return h}}),Uv=t((Ue,ve)=>{ve.exports=function(_){for(var y=h(_)?c:v,x=[],w=0;w<_.length;w++){var A=_[w];y(A)&&x.push(A)}return x};function v(_){return _.visible===!0}function c(_){var y=_[0].trace;return y.visible===!0&&y._length!==0}function h(_){return Array.isArray(_)&&Array.isArray(_[0])&&_[0][0]&&_[0][0].trace}}),zy=t((Ue,ve)=>{ve.exports=function(v,c){if(!c)return v;var h=1/Math.abs(c),_=h>1?(h*v+h*c)/h:v+c,y=String(_).length;if(y>16){var x=String(c).length,w=String(v).length;if(y>=w+x){var A=parseFloat(_).toPrecision(12);A.indexOf("e+")===-1&&(_=+A)}}return _}}),mg=t((Ue,ve)=>{var v=E(),c=M().BADNUM,h=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;ve.exports=function(_){return typeof _=="string"&&(_=_.replace(h,"")),v(_)?Number(_):c}}),Re=t((Ue,ve)=>{var v=l(),c=f().utcFormat,h=m().format,_=E(),y=M(),x=y.FP_SAFE,w=-x,A=y.BADNUM,d=ve.exports={};d.adjustFormat=function(ke){return!ke||/^\d[.]\df/.test(ke)||/[.]\d%/.test(ke)?ke:ke==="0.f"?"~f":/^\d%/.test(ke)?"~%":/^\ds/.test(ke)?"~s":!/^[~,.0$]/.test(ke)&&/[&fps]/.test(ke)?"~"+ke:ke};var k={};d.warnBadFormat=function(ke){var G=String(ke);k[G]||(k[G]=1,d.warn('encountered bad format: "'+G+'"'))},d.noFormat=function(ke){return String(ke)},d.numberFormat=function(ke){var G;try{G=h(d.adjustFormat(ke))}catch{return d.warnBadFormat(ke),d.noFormat}return G},d.nestedProperty=ee(),d.keyedContainer=le(),d.relativeAttr=K(),d.isPlainObject=V(),d.toLogRange=vt(),d.relinkPrivateKeys=q();var T=Z();d.isArrayBuffer=T.isArrayBuffer,d.isTypedArray=T.isTypedArray,d.isArrayOrTypedArray=T.isArrayOrTypedArray,d.isArray1D=T.isArray1D,d.ensureArray=T.ensureArray,d.concat=T.concat,d.maxRowLength=T.maxRowLength,d.minRowLength=T.minRowLength;var L=Q();d.mod=L.mod,d.modHalf=L.modHalf;var j=wp();d.valObjectMeta=j.valObjectMeta,d.coerce=j.coerce,d.coerce2=j.coerce2,d.coerceFont=j.coerceFont,d.coercePattern=j.coercePattern,d.coerceHoverinfo=j.coerceHoverinfo,d.coerceSelectionMarkerOpacity=j.coerceSelectionMarkerOpacity,d.validate=j.validate;var P=hv();d.dateTime2ms=P.dateTime2ms,d.isDateTime=P.isDateTime,d.ms2DateTime=P.ms2DateTime,d.ms2DateTimeLocal=P.ms2DateTimeLocal,d.cleanDate=P.cleanDate,d.isJSDate=P.isJSDate,d.formatDate=P.formatDate,d.incrementMonth=P.incrementMonth,d.dateTick0=P.dateTick0,d.dfltRange=P.dfltRange,d.findExactDates=P.findExactDates,d.MIN_MS=P.MIN_MS,d.MAX_MS=P.MAX_MS;var N=Cv();d.findBin=N.findBin,d.sorterAsc=N.sorterAsc,d.sorterDes=N.sorterDes,d.distinctVals=N.distinctVals,d.roundUp=N.roundUp,d.sort=N.sort,d.findIndexOfMin=N.findIndexOfMin,d.sortObjectKeys=ey();var O=xy();d.aggNums=O.aggNums,d.len=O.len,d.mean=O.mean,d.geometricMean=O.geometricMean,d.median=O.median,d.midRange=O.midRange,d.variance=O.variance,d.stdev=O.stdev,d.interp=O.interp;var B=cm();d.init2dArray=B.init2dArray,d.transposeRagged=B.transposeRagged,d.dot=B.dot,d.translationMatrix=B.translationMatrix,d.rotationMatrix=B.rotationMatrix,d.rotationXYMatrix=B.rotationXYMatrix,d.apply3DTransform=B.apply3DTransform,d.apply2DTransform=B.apply2DTransform,d.apply2DTransform2=B.apply2DTransform2,d.convertCssMatrix=B.convertCssMatrix,d.inverseTransformMatrix=B.inverseTransformMatrix;var S=Gv();d.deg2rad=S.deg2rad,d.rad2deg=S.rad2deg,d.angleDelta=S.angleDelta,d.angleDist=S.angleDist,d.isFullCircle=S.isFullCircle,d.isAngleInsideSector=S.isAngleInsideSector,d.isPtInsideSector=S.isPtInsideSector,d.pathArc=S.pathArc,d.pathSector=S.pathSector,d.pathAnnulus=S.pathAnnulus;var D=yv();d.isLeftAnchor=D.isLeftAnchor,d.isCenterAnchor=D.isCenterAnchor,d.isRightAnchor=D.isRightAnchor,d.isTopAnchor=D.isTopAnchor,d.isMiddleAnchor=D.isMiddleAnchor,d.isBottomAnchor=D.isBottomAnchor;var z=Wv();d.segmentsIntersect=z.segmentsIntersect,d.segmentDistance=z.segmentDistance,d.getTextLocation=z.getTextLocation,d.clearLocationCache=z.clearLocationCache,d.getVisibleSegment=z.getVisibleSegment,d.findPointOnPath=z.findPointOnPath;var H=bt();d.extendFlat=H.extendFlat,d.extendDeep=H.extendDeep,d.extendDeepAll=H.extendDeepAll,d.extendDeepNoArrays=H.extendDeepNoArrays;var Y=h0();d.log=Y.log,d.warn=Y.warn,d.error=Y.error;var ht=ae();d.counterRegex=ht.counter;var Se=_y();d.throttle=Se.throttle,d.throttleDone=Se.done,d.clearThrottle=Se.clear;var ie=zm();d.getGraphDiv=ie.getGraphDiv,d.isPlotDiv=ie.isPlotDiv,d.removeElement=ie.removeElement,d.addStyleRule=ie.addStyleRule,d.addRelatedStyleRule=ie.addRelatedStyleRule,d.deleteRelatedStyleRule=ie.deleteRelatedStyleRule,d.setStyleOnHover=ie.setStyleOnHover,d.getFullTransformMatrix=ie.getFullTransformMatrix,d.getElementTransformMatrix=ie.getElementTransformMatrix,d.getElementAndAncestors=ie.getElementAndAncestors,d.equalDomRects=ie.equalDomRects,d.clearResponsive=iy(),d.preserveDrawingBuffer=$v(),d.makeTraceGroups=Lv(),d._=wg(),d.notifier=Kt(),d.filterUnique=Ov(),d.filterVisible=Uv(),d.pushUnique=d0(),d.increment=zy(),d.cleanNumber=mg(),d.ensureNumber=function(ke){return _(ke)?(ke=Number(ke),ke>x||ke<w?A:ke):A},d.isIndex=function(ke,G){return G!==void 0&&ke>=G?!1:_(ke)&&ke>=0&&ke%1===0},d.noop=Pp(),d.identity=Gg(),d.repeat=function(ke,G){for(var ne=new Array(G),et=0;et<G;et++)ne[et]=ke;return ne},d.swapAttrs=function(ke,G,ne,et){ne||(ne="x"),et||(et="y");for(var ct=0;ct<G.length;ct++){var kt=G[ct],Gt=d.nestedProperty(ke,kt.replace("?",ne)),$t=d.nestedProperty(ke,kt.replace("?",et)),Ko=Gt.get();Gt.set($t.get()),$t.set(Ko)}},d.raiseToTop=function(ke){ke.parentNode.appendChild(ke)},d.cancelTransition=function(ke){return ke.transition().duration(0)},d.constrain=function(ke,G,ne){return G>ne?Math.max(ne,Math.min(G,ke)):Math.max(G,Math.min(ne,ke))},d.bBoxIntersect=function(ke,G,ne){return ne=ne||0,ke.left<=G.right+ne&&G.left<=ke.right+ne&&ke.top<=G.bottom+ne&&G.top<=ke.bottom+ne},d.simpleMap=function(ke,G,ne,et,ct){for(var kt=ke.length,Gt=new Array(kt),$t=0;$t<kt;$t++)Gt[$t]=G(ke[$t],ne,et,ct);return Gt},d.randstr=function ke(G,ne,et,ct){if(et||(et=16),ne===void 0&&(ne=24),ne<=0)return"0";var kt=Math.log(Math.pow(2,ne))/Math.log(et),Gt="",$t,Ko,Up;for($t=2;kt===1/0;$t*=2)kt=Math.log(Math.pow(2,ne/$t))/Math.log(et)*$t;var e0=kt-Math.floor(kt);for($t=0;$t<Math.floor(kt);$t++)Up=Math.floor(Math.random()*et).toString(et),Gt=Up+Gt;e0&&(Ko=Math.pow(et,e0),Up=Math.floor(Math.random()*Ko).toString(et),Gt=Up+Gt);var E0=parseInt(Gt,et);return G&&G[Gt]||E0!==1/0&&E0>=Math.pow(2,ne)?ct>10?(d.warn("randstr failed uniqueness"),Gt):ke(G,ne,et,(ct||0)+1):Gt},d.OptionControl=function(ke,G){ke||(ke={}),G||(G="opt");var ne={};return ne.optionList=[],ne._newoption=function(et){et[G]=ke,ne[et.name]=et,ne.optionList.push(et)},ne["_"+G]=ke,ne},d.smooth=function(ke,G){if(G=Math.round(G)||0,G<2)return ke;var ne=ke.length,et=2*ne,ct=2*G-1,kt=new Array(ct),Gt=new Array(ne),$t,Ko,Up,e0;for($t=0;$t<ct;$t++)kt[$t]=(1-Math.cos(Math.PI*($t+1)/G))/(2*G);for($t=0;$t<ne;$t++){for(e0=0,Ko=0;Ko<ct;Ko++)Up=$t+Ko+1-G,Up<-ne?Up-=et*Math.round(Up/et):Up>=et&&(Up-=et*Math.floor(Up/et)),Up<0?Up=-1-Up:Up>=ne&&(Up=et-1-Up),e0+=ke[Up]*kt[Ko];Gt[$t]=e0}return Gt},d.syncOrAsync=function(ke,G,ne){var et,ct;function kt(){return d.syncOrAsync(ke,G,ne)}for(;ke.length;)if(ct=ke.splice(0,1)[0],et=ct(G),et&&et.then)return et.then(kt);return ne&&ne(G)},d.stripTrailingSlash=function(ke){return ke.substr(-1)==="/"?ke.substr(0,ke.length-1):ke},d.noneOrAll=function(ke,G,ne){if(ke){var et=!1,ct=!0,kt,Gt;for(kt=0;kt<ne.length;kt++)Gt=ke[ne[kt]],Gt!=null?et=!0:ct=!1;if(et&&!ct)for(kt=0;kt<ne.length;kt++)ke[ne[kt]]=G[ne[kt]]}},d.mergeArray=function(ke,G,ne,et){var ct=typeof et=="function";if(d.isArrayOrTypedArray(ke))for(var kt=Math.min(ke.length,G.length),Gt=0;Gt<kt;Gt++){var $t=ke[Gt];G[Gt][ne]=ct?et($t):$t}},d.mergeArrayCastPositive=function(ke,G,ne){return d.mergeArray(ke,G,ne,function(et){var ct=+et;return isFinite(ct)&&ct>0?ct:0})},d.fillArray=function(ke,G,ne,et){if(et=et||d.identity,d.isArrayOrTypedArray(ke))for(var ct=0;ct<G.length;ct++)G[ct][ne]=et(ke[ct])},d.castOption=function(ke,G,ne,et){et=et||d.identity;var ct=d.nestedProperty(ke,ne).get();return d.isArrayOrTypedArray(ct)?Array.isArray(G)&&d.isArrayOrTypedArray(ct[G[0]])?et(ct[G[0]][G[1]]):et(ct[G]):ct},d.extractOption=function(ke,G,ne,et){if(ne in ke)return ke[ne];var ct=d.nestedProperty(G,et).get();if(!Array.isArray(ct))return ct};function X(ke){var G={};for(var ne in ke)for(var et=ke[ne],ct=0;ct<et.length;ct++)G[et[ct]]=+ne;return G}d.tagSelected=function(ke,G,ne){var et=G.selectedpoints,ct=G._indexToPoints,kt;ct&&(kt=X(ct));function Gt(E0){return E0!==void 0&&E0<ke.length}for(var $t=0;$t<et.length;$t++){var Ko=et[$t];if(d.isIndex(Ko)||d.isArrayOrTypedArray(Ko)&&d.isIndex(Ko[0])&&d.isIndex(Ko[1])){var Up=kt?kt[Ko]:Ko,e0=ne?ne[Up]:Up;Gt(e0)&&(ke[e0].selected=1)}}},d.selIndices2selPoints=function(ke){var G=ke.selectedpoints,ne=ke._indexToPoints;if(ne){for(var et=X(ne),ct=[],kt=0;kt<G.length;kt++){var Gt=G[kt];if(d.isIndex(Gt)){var $t=et[Gt];d.isIndex($t)&&ct.push($t)}}return ct}else return G},d.getTargetArray=function(ke,G){var ne=G.target;if(typeof ne=="string"&&ne){var et=d.nestedProperty(ke,ne).get();return d.isArrayOrTypedArray(et)?et:!1}else if(d.isArrayOrTypedArray(ne))return ne;return!1};function ft(ke,G,ne){var et={};typeof G!="object"&&(G={});var ct=ne==="pieLike"?-1:3,kt=Object.keys(ke),Gt,$t,Ko;for(Gt=0;Gt<kt.length;Gt++)$t=kt[Gt],Ko=ke[$t],!($t.charAt(0)==="_"||typeof Ko=="function")&&($t==="module"?et[$t]=Ko:Array.isArray(Ko)?$t==="colorscale"||ct===-1?et[$t]=Ko.slice():et[$t]=Ko.slice(0,ct):d.isTypedArray(Ko)?ct===-1?et[$t]=Ko.subarray():et[$t]=Ko.subarray(0,ct):Ko&&typeof Ko=="object"?et[$t]=ft(ke[$t],G[$t],ne):et[$t]=Ko);for(kt=Object.keys(G),Gt=0;Gt<kt.length;Gt++)$t=kt[Gt],Ko=G[$t],(typeof Ko!="object"||!($t in et)||typeof et[$t]!="object")&&(et[$t]=Ko);return et}d.minExtend=ft,d.titleCase=function(ke){return ke.charAt(0).toUpperCase()+ke.substr(1)},d.containsAny=function(ke,G){for(var ne=0;ne<G.length;ne++)if(ke.indexOf(G[ne])!==-1)return!0;return!1};var Le=/Version\/[\d\.]+.*Safari/;d.isSafari=function(){return Le.test(window.navigator.userAgent)};var nt=/iPad|iPhone|iPod/;d.isIOS=function(){return nt.test(window.navigator.userAgent)};var Ze=/Macintosh.+AppleWebKit.+Gecko\)$/;d.isMacWKWebView=()=>Ze.test(window.navigator.userAgent);var rt=/Firefox\/(\d+)\.\d+/;d.getFirefoxVersion=function(){var ke=rt.exec(window.navigator.userAgent);if(ke&&ke.length===2){var G=parseInt(ke[1]);if(!isNaN(G))return G}return null},d.isD3Selection=function(ke){return ke instanceof v.selection},d.ensureSingle=function(ke,G,ne,et){var ct=ke.select(G+(ne?"."+ne:""));if(ct.size())return ct;var kt=ke.append(G);return ne&&kt.classed(ne,!0),et&&kt.call(et),kt},d.ensureSingleById=function(ke,G,ne,et){var ct=ke.select(G+"#"+ne);if(ct.size())return ct;var kt=ke.append(G).attr("id",ne);return et&&kt.call(et),kt},d.objectFromPath=function(ke,G){for(var ne=ke.split("."),et,ct=et={},kt=0;kt<ne.length;kt++){var Gt=ne[kt],$t=null,Ko=ne[kt].match(/(.*)\[([0-9]+)\]/);Ko?(Gt=Ko[1],$t=Ko[2],et=et[Gt]=[],kt===ne.length-1?et[$t]=G:et[$t]={},et=et[$t]):(kt===ne.length-1?et[Gt]=G:et[Gt]={},et=et[Gt])}return ct};var dt=/^([^\[\.]+)\.(.+)?/,pt=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;function se(ke){return ke.slice(0,2)==="__"}d.expandObjectPaths=function(ke){var G,ne,et,ct,kt,Gt,$t;if(typeof ke=="object"&&!Array.isArray(ke)){for(ne in ke)if(ke.hasOwnProperty(ne))if(G=ne.match(dt)){if(ct=ke[ne],et=G[1],se(et))continue;delete ke[ne],ke[et]=d.extendDeepNoArrays(ke[et]||{},d.objectFromPath(ne,d.expandObjectPaths(ct))[et])}else if(G=ne.match(pt)){if(ct=ke[ne],et=G[1],se(et))continue;if(kt=parseInt(G[2]),delete ke[ne],ke[et]=ke[et]||[],G[3]===".")$t=G[4],Gt=ke[et][kt]=ke[et][kt]||{},d.extendDeepNoArrays(Gt,d.objectFromPath($t,d.expandObjectPaths(ct)));else{if(se(et))continue;ke[et][kt]=d.expandObjectPaths(ct)}}else{if(se(ne))continue;ke[ne]=d.expandObjectPaths(ke[ne])}}return ke},d.numSeparate=function(ke,G,ne){if(ne||(ne=!1),typeof G!="string"||G.length===0)throw new Error("Separator string required for formatting!");typeof ke=="number"&&(ke=String(ke));var et=/(\d+)(\d{3})/,ct=G.charAt(0),kt=G.charAt(1),Gt=ke.split("."),$t=Gt[0],Ko=Gt.length>1?ct+Gt[1]:"";if(kt&&(Gt.length>1||$t.length>4||ne))for(;et.test($t);)$t=$t.replace(et,"$1"+kt+"$2");return $t+Ko},d.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var gt=/^\w*$/;d.templateString=function(ke,G){var ne={};return ke.replace(d.TEMPLATE_STRING_REGEX,function(et,ct){var kt;return gt.test(ct)?kt=G[ct]:(ne[ct]=ne[ct]||d.nestedProperty(G,ct).get,kt=ne[ct](!0)),kt!==void 0?kt:""})};var xt={max:10,count:0,name:"hovertemplate"};d.hovertemplateString=function(){return jo.apply(xt,arguments)};var Nt={max:10,count:0,name:"texttemplate"};d.texttemplateString=function(){return jo.apply(Nt,arguments)};var Rt=/^(\S+)([\*\/])(-?\d+(\.\d+)?)$/;function Pt(ke){var G=ke.match(Rt);return G?{key:G[1],op:G[2],number:Number(G[3])}:{key:ke,op:null,number:null}}var xn={max:10,count:0,name:"texttemplate",parseMultDiv:!0};d.texttemplateStringForShapes=function(){return jo.apply(xn,arguments)};var oa=/^[:|\|]/;function jo(ke,G,ne){var et=this,ct=arguments;return G||(G={}),ke.replace(d.TEMPLATE_STRING_REGEX,function(kt,Gt,$t){var Ko=Gt==="xother"||Gt==="yother",Up=Gt==="_xother"||Gt==="_yother",e0=Gt==="_xother_"||Gt==="_yother_",E0=Gt==="xother_"||Gt==="yother_",m0=Ko||Up||E0||e0,f0=Gt;(Up||e0)&&(f0=f0.substring(1)),(E0||e0)&&(f0=f0.substring(0,f0.length-1));var la=null,$o=null;if(et.parseMultDiv){var jt=Pt(f0);f0=jt.key,la=jt.op,$o=jt.number}var Fp;if(m0){if(Fp=G[f0],Fp===void 0)return""}else{var i0,b0;for(b0=3;b0<ct.length;b0++)if(i0=ct[b0],!!i0){if(i0.hasOwnProperty(f0)){Fp=i0[f0];break}if(gt.test(f0)||(Fp=d.nestedProperty(i0,f0).get(!0)),Fp!==void 0)break}}if(Fp!==void 0&&(la==="*"&&(Fp*=$o),la==="/"&&(Fp/=$o)),Fp===void 0&&et)return et.count<et.max&&(d.warn("Variable '"+f0+"' in "+et.name+" could not be found!"),Fp=kt),et.count===et.max&&d.warn("Too many "+et.name+" warnings - additional warnings will be suppressed"),et.count++,kt;if($t){var O0;if($t[0]===":"&&(O0=ne?ne.numberFormat:d.numberFormat,Fp!==""&&(Fp=O0($t.replace(oa,""))(Fp))),$t[0]==="|"){O0=ne?ne.timeFormat:c;var C0=d.dateTime2ms(Fp);Fp=d.formatDate(C0,$t.replace(oa,""),!1,O0)}}else{var I0=f0+"Label";G.hasOwnProperty(I0)&&(Fp=G[I0])}return m0&&(Fp="("+Fp+")",(Up||e0)&&(Fp=" "+Fp),(E0||e0)&&(Fp=Fp+" ")),Fp})}var lt=48,ut=57;d.subplotSort=function(ke,G){for(var ne=Math.min(ke.length,G.length)+1,et=0,ct=0,kt=0;kt<ne;kt++){var Gt=ke.charCodeAt(kt)||0,$t=G.charCodeAt(kt)||0,Ko=Gt>=lt&&Gt<=ut,Up=$t>=lt&&$t<=ut;if(Ko&&(et=10*et+Gt-lt),Up&&(ct=10*ct+$t-lt),!Ko||!Up){if(et!==ct)return et-ct;if(Gt!==$t)return Gt-$t}}return ct-et};var $=2e9;d.seedPseudoRandom=function(){$=2e9},d.pseudoRandom=function(){var ke=$;return $=(69069*$+1)%4294967296,Math.abs($-ke)<429496729?d.pseudoRandom():$/4294967296},d.fillText=function(ke,G,ne){var et=Array.isArray(ne)?function(Gt){ne.push(Gt)}:function(Gt){ne.text=Gt},ct=d.extractOption(ke,G,"htx","hovertext");if(d.isValidTextValue(ct))return et(ct);var kt=d.extractOption(ke,G,"tx","text");if(d.isValidTextValue(kt))return et(kt)},d.isValidTextValue=function(ke){return ke||ke===0},d.formatPercent=function(ke,G){G=G||0;for(var ne=(Math.round(100*ke*Math.pow(10,G))*Math.pow(.1,G)).toFixed(G)+"%",et=0;et<G;et++)ne.indexOf(".")!==-1&&(ne=ne.replace("0%","%"),ne=ne.replace(".%","%"));return ne},d.isHidden=function(ke){var G=window.getComputedStyle(ke).display;return!G||G==="none"},d.strTranslate=function(ke,G){return ke||G?"translate("+ke+","+G+")":""},d.strRotate=function(ke){return ke?"rotate("+ke+")":""},d.strScale=function(ke){return ke!==1?"scale("+ke+")":""},d.getTextTransform=function(ke){var G=ke.noCenter,ne=ke.textX,et=ke.textY,ct=ke.targetX,kt=ke.targetY,Gt=ke.anchorX||0,$t=ke.anchorY||0,Ko=ke.rotate,Up=ke.scale;return Up?Up>1&&(Up=1):Up=0,d.strTranslate(ct-Up*(ne+Gt),kt-Up*(et+$t))+d.strScale(Up)+(Ko?"rotate("+Ko+(G?"":" "+ne+" "+et)+")":"")},d.setTransormAndDisplay=function(ke,G){ke.attr("transform",d.getTextTransform(G)),ke.style("display",G.scale?null:"none")},d.ensureUniformFontSize=function(ke,G){var ne=d.extendFlat({},G);return ne.size=Math.max(G.size,ke._fullLayout.uniformtext.minsize||0),ne},d.join2=function(ke,G,ne){var et=ke.length;return et>1?ke.slice(0,-1).join(G)+ne+ke[et-1]:ke.join(G)},d.bigFont=function(ke){return Math.round(1.2*ke)};var yt=d.getFirefoxVersion(),Lt=yt!==null&&yt<86;d.getPositionFromD3Event=function(){return Lt?[v.event.layerX,v.event.layerY]:[v.event.offsetX,v.event.offsetY]}}),Kp=t(()=>{var Ue=Re(),ve={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X:focus-within .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-group a":"display:grid;place-content:center;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;border:none;background:rgba(0,0,0,0);","X .modebar-btn svg":"position:relative;","X .modebar-btn:focus-visible":"outline:1px solid #000;outline-offset:1px;border-radius:3px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:rgba(0,0,0,0);border:6px solid rgba(0,0,0,0);z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid rgba(0,0,0,0);border-left-color:#69738a;margin-top:8px;margin-right:-30px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(c in ve)v=c.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier"),Ue.addStyleRule(v,ve[c]);var v,c}),Fn=t((Ue,ve)=>{ve.exports=!0}),t0=t((Ue,ve)=>{var v=Fn(),c;typeof window.matchMedia=="function"?c=!window.matchMedia("(hover: none)").matches:c=v,ve.exports=c}),s0=t((Ue,ve)=>{var v=typeof Reflect=="object"?Reflect:null,c=v&&typeof v.apply=="function"?v.apply:function(H,Y,ht){return Function.prototype.apply.call(H,Y,ht)},h;v&&typeof v.ownKeys=="function"?h=v.ownKeys:Object.getOwnPropertySymbols?h=function(H){return Object.getOwnPropertyNames(H).concat(Object.getOwnPropertySymbols(H))}:h=function(H){return Object.getOwnPropertyNames(H)};function _(H){console&&console.warn&&console.warn(H)}var y=Number.isNaN||function(H){return H!==H};function x(){x.init.call(this)}ve.exports=x,ve.exports.once=S,x.EventEmitter=x,x.prototype._events=void 0,x.prototype._eventsCount=0,x.prototype._maxListeners=void 0;var w=10;function A(H){if(typeof H!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof H)}Object.defineProperty(x,"defaultMaxListeners",{enumerable:!0,get:function(){return w},set:function(H){if(typeof H!="number"||H<0||y(H))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+H+".");w=H}}),x.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},x.prototype.setMaxListeners=function(H){if(typeof H!="number"||H<0||y(H))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+H+".");return this._maxListeners=H,this};function d(H){return H._maxListeners===void 0?x.defaultMaxListeners:H._maxListeners}x.prototype.getMaxListeners=function(){return d(this)},x.prototype.emit=function(H){for(var Y=[],ht=1;ht<arguments.length;ht++)Y.push(arguments[ht]);var Se=H==="error",ie=this._events;if(ie!==void 0)Se=Se&&ie.error===void 0;else if(!Se)return!1;if(Se){var X;if(Y.length>0&&(X=Y[0]),X instanceof Error)throw X;var ft=new Error("Unhandled error."+(X?" ("+X.message+")":""));throw ft.context=X,ft}var Le=ie[H];if(Le===void 0)return!1;if(typeof Le=="function")c(Le,this,Y);else for(var nt=Le.length,Ze=N(Le,nt),ht=0;ht<nt;++ht)c(Ze[ht],this,Y);return!0};function k(H,Y,ht,Se){var ie,X,ft;if(A(ht),X=H._events,X===void 0?(X=H._events=Object.create(null),H._eventsCount=0):(X.newListener!==void 0&&(H.emit("newListener",Y,ht.listener?ht.listener:ht),X=H._events),ft=X[Y]),ft===void 0)ft=X[Y]=ht,++H._eventsCount;else if(typeof ft=="function"?ft=X[Y]=Se?[ht,ft]:[ft,ht]:Se?ft.unshift(ht):ft.push(ht),ie=d(H),ie>0&&ft.length>ie&&!ft.warned){ft.warned=!0;var Le=new Error("Possible EventEmitter memory leak detected. "+ft.length+" "+String(Y)+" listeners added. Use emitter.setMaxListeners() to increase limit");Le.name="MaxListenersExceededWarning",Le.emitter=H,Le.type=Y,Le.count=ft.length,_(Le)}return H}x.prototype.addListener=function(H,Y){return k(this,H,Y,!1)},x.prototype.on=x.prototype.addListener,x.prototype.prependListener=function(H,Y){return k(this,H,Y,!0)};function T(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function L(H,Y,ht){var Se={fired:!1,wrapFn:void 0,target:H,type:Y,listener:ht},ie=T.bind(Se);return ie.listener=ht,Se.wrapFn=ie,ie}x.prototype.once=function(H,Y){return A(Y),this.on(H,L(this,H,Y)),this},x.prototype.prependOnceListener=function(H,Y){return A(Y),this.prependListener(H,L(this,H,Y)),this},x.prototype.removeListener=function(H,Y){var ht,Se,ie,X,ft;if(A(Y),Se=this._events,Se===void 0)return this;if(ht=Se[H],ht===void 0)return this;if(ht===Y||ht.listener===Y)--this._eventsCount===0?this._events=Object.create(null):(delete Se[H],Se.removeListener&&this.emit("removeListener",H,ht.listener||Y));else if(typeof ht!="function"){for(ie=-1,X=ht.length-1;X>=0;X--)if(ht[X]===Y||ht[X].listener===Y){ft=ht[X].listener,ie=X;break}if(ie<0)return this;ie===0?ht.shift():O(ht,ie),ht.length===1&&(Se[H]=ht[0]),Se.removeListener!==void 0&&this.emit("removeListener",H,ft||Y)}return this},x.prototype.off=x.prototype.removeListener,x.prototype.removeAllListeners=function(H){var Y,ht,Se;if(ht=this._events,ht===void 0)return this;if(ht.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):ht[H]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete ht[H]),this;if(arguments.length===0){var ie=Object.keys(ht),X;for(Se=0;Se<ie.length;++Se)X=ie[Se],X!=="removeListener"&&this.removeAllListeners(X);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(Y=ht[H],typeof Y=="function")this.removeListener(H,Y);else if(Y!==void 0)for(Se=Y.length-1;Se>=0;Se--)this.removeListener(H,Y[Se]);return this};function j(H,Y,ht){var Se=H._events;if(Se===void 0)return[];var ie=Se[Y];return ie===void 0?[]:typeof ie=="function"?ht?[ie.listener||ie]:[ie]:ht?B(ie):N(ie,ie.length)}x.prototype.listeners=function(H){return j(this,H,!0)},x.prototype.rawListeners=function(H){return j(this,H,!1)},x.listenerCount=function(H,Y){return typeof H.listenerCount=="function"?H.listenerCount(Y):P.call(H,Y)},x.prototype.listenerCount=P;function P(H){var Y=this._events;if(Y!==void 0){var ht=Y[H];if(typeof ht=="function")return 1;if(ht!==void 0)return ht.length}return 0}x.prototype.eventNames=function(){return this._eventsCount>0?h(this._events):[]};function N(H,Y){for(var ht=new Array(Y),Se=0;Se<Y;++Se)ht[Se]=H[Se];return ht}function O(H,Y){for(;Y+1<H.length;Y++)H[Y]=H[Y+1];H.pop()}function B(H){for(var Y=new Array(H.length),ht=0;ht<Y.length;++ht)Y[ht]=H[ht].listener||H[ht];return Y}function S(H,Y){return new Promise(function(ht,Se){function ie(ft){H.removeListener(Y,X),Se(ft)}function X(){typeof H.removeListener=="function"&&H.removeListener("error",ie),ht([].slice.call(arguments))}z(H,Y,X,{once:!0}),Y!=="error"&&D(H,ie,{once:!0})})}function D(H,Y,ht){typeof H.on=="function"&&z(H,"error",Y,ht)}function z(H,Y,ht,Se){if(typeof H.on=="function")Se.once?H.once(Y,ht):H.on(Y,ht);else if(typeof H.addEventListener=="function")H.addEventListener(Y,function ie(X){Se.once&&H.removeEventListener(Y,ie),ht(X)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof H)}}),J0=t((Ue,ve)=>{var v=s0().EventEmitter,c={init:function(h){if(h._ev instanceof v)return h;var _=new v,y=new v;return h._ev=_,h._internalEv=y,h.on=_.on.bind(_),h.once=_.once.bind(_),h.removeListener=_.removeListener.bind(_),h.removeAllListeners=_.removeAllListeners.bind(_),h._internalOn=y.on.bind(y),h._internalOnce=y.once.bind(y),h._removeInternalListener=y.removeListener.bind(y),h._removeAllInternalListeners=y.removeAllListeners.bind(y),h.emit=function(x,w){_.emit(x,w),y.emit(x,w)},typeof h.addEventListener=="function"&&h.addEventListener("wheel",()=>{},{passive:!0}),h},triggerHandler:function(h,_,y){var x,w=h._ev;if(!w)return;var A=w._events[_];if(!A)return;function d(T){if(T.listener){if(w.removeListener(_,T.listener),!T.fired)return T.fired=!0,T.listener.apply(w,[y])}else return T.apply(w,[y])}A=Array.isArray(A)?A:[A];var k;for(k=0;k<A.length-1;k++)d(A[k]);return x=d(A[k]),x},purge:function(h){return delete h._ev,delete h.on,delete h.once,delete h.removeListener,delete h.removeAllListeners,delete h.emit,delete h._ev,delete h._internalEv,delete h._internalOn,delete h._internalOnce,delete h._removeInternalListener,delete h._removeAllInternalListeners,h}};ve.exports=c}),F0=t((Ue,ve)=>{var v=Re(),c=Cp().dfltConfig;function h(y,x){for(var w=[],A,d=0;d<x.length;d++)A=x[d],A===y?w[d]=A:typeof A=="object"?w[d]=Array.isArray(A)?v.extendDeep([],A):v.extendDeepAll({},A):w[d]=A;return w}var _={};_.add=function(y,x,w,A,d){var k,T;if(y.undoQueue=y.undoQueue||{index:0,queue:[],sequence:!1},T=y.undoQueue.index,y.autoplay){y.undoQueue.inSequence||(y.autoplay=!1);return}!y.undoQueue.sequence||y.undoQueue.beginSequence?(k={undo:{calls:[],args:[]},redo:{calls:[],args:[]}},y.undoQueue.queue.splice(T,y.undoQueue.queue.length-T,k),y.undoQueue.index+=1):k=y.undoQueue.queue[T-1],y.undoQueue.beginSequence=!1,k&&(k.undo.calls.unshift(x),k.undo.args.unshift(w),k.redo.calls.push(A),k.redo.args.push(d)),y.undoQueue.queue.length>c.queueLength&&(y.undoQueue.queue.shift(),y.undoQueue.index--)},_.startSequence=function(y){y.undoQueue=y.undoQueue||{index:0,queue:[],sequence:!1},y.undoQueue.sequence=!0,y.undoQueue.beginSequence=!0},_.stopSequence=function(y){y.undoQueue=y.undoQueue||{index:0,queue:[],sequence:!1},y.undoQueue.sequence=!1,y.undoQueue.beginSequence=!1},_.undo=function(y){var x,w;if(!(y.undoQueue===void 0||isNaN(y.undoQueue.index)||y.undoQueue.index<=0)){for(y.undoQueue.index--,x=y.undoQueue.queue[y.undoQueue.index],y.undoQueue.inSequence=!0,w=0;w<x.undo.calls.length;w++)_.plotDo(y,x.undo.calls[w],x.undo.args[w]);y.undoQueue.inSequence=!1,y.autoplay=!1}},_.redo=function(y){var x,w;if(!(y.undoQueue===void 0||isNaN(y.undoQueue.index)||y.undoQueue.index>=y.undoQueue.queue.length)){for(x=y.undoQueue.queue[y.undoQueue.index],y.undoQueue.inSequence=!0,w=0;w<x.redo.calls.length;w++)_.plotDo(y,x.redo.calls[w],x.redo.args[w]);y.undoQueue.inSequence=!1,y.autoplay=!1,y.undoQueue.index++}},_.plotDo=function(y,x,w){y.autoplay=!0,w=h(y,w),x.apply(null,w)},ve.exports=_}),lm=t((Ue,ve)=>{ve.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}}),Bm=t(Ue=>{var ve=p1(),v=Re(),c=Mn(),h=Zm(),_=lm(),y=x1(),x=Cp().configAttributes,w=Um(),A=v.extendDeepAll,d=v.isPlainObject,k=v.isArrayOrTypedArray,T=v.nestedProperty,L=v.valObjectMeta,j="_isSubplotObj",P="_isLinkedToArray",N="_arrayAttrRegexps",O="_deprecated",B=[j,P,N,O];Ue.IS_SUBPLOT_OBJ=j,Ue.IS_LINKED_TO_ARRAY=P,Ue.DEPRECATED=O,Ue.UNDERSCORE_ATTRS=B,Ue.get=function(){var Ze={};return ve.allTypes.forEach(function(rt){Ze[rt]=H(rt)}),{defs:{valObjects:L,metaKeys:B.concat(["description","role","editType","impliedEdits"]),editType:{traces:w.traces,layout:w.layout},impliedEdits:{}},traces:Ze,layout:Y(),frames:ht(),animation:Se(y),config:Se(x)}},Ue.crawl=function(Ze,rt,dt,pt){var se=dt||0;pt=pt||"",Object.keys(Ze).forEach(function(gt){var xt=Ze[gt];if(B.indexOf(gt)===-1){var Nt=(pt?pt+".":"")+gt;rt(xt,gt,Ze,se,Nt),!Ue.isValObject(xt)&&d(xt)&&gt!=="impliedEdits"&&Ue.crawl(xt,rt,se+1,Nt)}})},Ue.isValObject=function(Ze){return Ze&&Ze.valType!==void 0},Ue.findArrayAttributes=function(Ze){var rt=[],dt=[],pt=[],se,gt;function xt(Rt,Pt,xn,oa){dt=dt.slice(0,oa).concat([Pt]),pt=pt.slice(0,oa).concat([Rt&&Rt._isLinkedToArray]);var jo=Rt&&(Rt.valType==="data_array"||Rt.arrayOk===!0)&&!(dt[oa-1]==="colorbar"&&(Pt==="ticktext"||Pt==="tickvals"));jo&&Nt(se,0,"")}function Nt(Rt,Pt,xn){var oa=Rt[dt[Pt]],jo=xn+dt[Pt];if(Pt===dt.length-1)k(oa)&&rt.push(gt+jo);else if(pt[Pt]){if(Array.isArray(oa))for(var lt=0;lt<oa.length;lt++)d(oa[lt])&&Nt(oa[lt],Pt+1,jo+"["+lt+"].")}else d(oa)&&Nt(oa,Pt+1,jo+".")}return se=Ze,gt="",Ue.crawl(c,xt),Ze._module&&Ze._module.attributes&&Ue.crawl(Ze._module.attributes,xt),rt},Ue.getTraceValObject=function(Ze,rt){var dt=rt[0],pt=1,se,gt,xt=Ze._module;if(xt||(xt=(ve.modules[Ze.type||c.type.dflt]||{})._module),!xt)return!1;if(se=xt.attributes,gt=se&&se[dt],!gt){var Nt=xt.basePlotModule;Nt&&Nt.attributes&&(gt=Nt.attributes[dt])}return gt||(gt=c[dt]),D(gt,rt,pt)},Ue.getLayoutValObject=function(Ze,rt){var dt=S(Ze,rt[0]);return D(dt,rt,1)};function S(Ze,rt){var dt,pt,se,gt,xt=Ze._basePlotModules;if(xt){var Nt;for(dt=0;dt<xt.length;dt++){if(se=xt[dt],se.attrRegex&&se.attrRegex.test(rt)){if(se.layoutAttrOverrides)return se.layoutAttrOverrides;!Nt&&se.layoutAttributes&&(Nt=se.layoutAttributes)}var Rt=se.baseLayoutAttrOverrides;if(Rt&&rt in Rt)return Rt[rt]}if(Nt)return Nt}var Pt=Ze._modules;if(Pt){for(dt=0;dt<Pt.length;dt++)if(gt=Pt[dt].layoutAttributes,gt&&rt in gt)return gt[rt]}for(pt in ve.componentsRegistry){if(se=ve.componentsRegistry[pt],se.name==="colorscale"&&rt.indexOf("coloraxis")===0)return se.layoutAttributes[rt];if(!se.schema&&rt===se.name)return se.layoutAttributes}return rt in h?h[rt]:!1}function D(Ze,rt,dt){if(!Ze)return!1;if(Ze._isLinkedToArray){if(z(rt[dt]))dt++;else if(dt<rt.length)return!1}for(;dt<rt.length;dt++){var pt=Ze[rt[dt]];if(d(pt))Ze=pt;else break;if(dt===rt.length-1)break;if(Ze._isLinkedToArray){if(dt++,!z(rt[dt]))return!1}else if(Ze.valType==="info_array"){dt++;var se=rt[dt];if(!z(se))return!1;var gt=Ze.items;if(Array.isArray(gt)){if(se>=gt.length)return!1;if(Ze.dimensions===2){if(dt++,rt.length===dt)return Ze;var xt=rt[dt];if(!z(xt))return!1;Ze=gt[se][xt]}else Ze=gt[se]}else Ze=gt}}return Ze}function z(Ze){return Ze===Math.round(Ze)&&Ze>=0}function H(Ze){var rt,dt;rt=ve.modules[Ze]._module,dt=rt.basePlotModule;var pt={};pt.type=null;var se=A({},c),gt=A({},rt.attributes);Ue.crawl(gt,function(Rt,Pt,xn,oa,jo){T(se,jo).set(void 0),Rt===void 0&&T(gt,jo).set(void 0)}),A(pt,se),ve.traceIs(Ze,"noOpacity")&&delete pt.opacity,ve.traceIs(Ze,"showLegend")||(delete pt.showlegend,delete pt.legendgroup),ve.traceIs(Ze,"noHover")&&(delete pt.hoverinfo,delete pt.hoverlabel),rt.selectPoints||delete pt.selectedpoints,A(pt,gt),dt.attributes&&A(pt,dt.attributes),pt.type=Ze;var xt={meta:rt.meta||{},categories:rt.categories||{},animatable:!!rt.animatable,type:Ze,attributes:Se(pt)};if(rt.layoutAttributes){var Nt={};A(Nt,rt.layoutAttributes),xt.layoutAttributes=Se(Nt)}return rt.animatable||Ue.crawl(xt,function(Rt){Ue.isValObject(Rt)&&"anim"in Rt&&delete Rt.anim}),xt}function Y(){var Ze={},rt,dt;A(Ze,h);for(rt in ve.subplotsRegistry)if(dt=ve.subplotsRegistry[rt],!!dt.layoutAttributes)if(Array.isArray(dt.attr))for(var pt=0;pt<dt.attr.length;pt++)Le(Ze,dt,dt.attr[pt]);else{var se=dt.attr==="subplot"?dt.name:dt.attr;Le(Ze,dt,se)}for(rt in ve.componentsRegistry){dt=ve.componentsRegistry[rt];var gt=dt.schema;if(gt&&(gt.subplots||gt.layout)){var xt=gt.subplots;if(xt&&xt.xaxis&&!xt.yaxis)for(var Nt in xt.xaxis)delete Ze.yaxis[Nt];delete Ze.xaxis.shift,delete Ze.xaxis.autoshift}else dt.name==="colorscale"?A(Ze,dt.layoutAttributes):dt.layoutAttributes&&nt(Ze,dt.layoutAttributes,dt.name)}return{layoutAttributes:Se(Ze)}}function ht(){var Ze={frames:A({},_)};return Se(Ze),Ze.frames}function Se(Ze){return ie(Ze),X(Ze),ft(Ze),Ze}function ie(Ze){function rt(pt){return{valType:"string",editType:"none"}}function dt(pt,se,gt){Ue.isValObject(pt)?(pt.arrayOk===!0||pt.valType==="data_array")&&(gt[se+"src"]=rt()):d(pt)&&(pt.role="object")}Ue.crawl(Ze,dt)}function X(Ze){function rt(dt,pt,se){if(dt){var gt=dt[P];gt&&(delete dt[P],se[pt]={items:{}},se[pt].items[gt]=dt,se[pt].role="object")}}Ue.crawl(Ze,rt)}function ft(Ze){function rt(dt){for(var pt in dt)if(d(dt[pt]))rt(dt[pt]);else if(Array.isArray(dt[pt]))for(var se=0;se<dt[pt].length;se++)rt(dt[pt][se]);else dt[pt]instanceof RegExp&&(dt[pt]=dt[pt].toString())}rt(Ze)}function Le(Ze,rt,dt){var pt=T(Ze,dt),se=A({},rt.layoutAttributes);se[j]=!0,pt.set(se)}function nt(Ze,rt,dt){var pt=T(Ze,dt);pt.set(A(pt.get()||{},rt))}}),Nm=t(Ue=>{var ve=Re(),v=Mn(),c="templateitemname",h={name:{valType:"string",editType:"none"}};h[c]={valType:"string",editType:"calc"},Ue.templatedArray=function(x,w){return w._isLinkedToArray=x,w.name=h.name,w[c]=h[c],w},Ue.traceTemplater=function(x){var w={},A,d;for(A in x)d=x[A],Array.isArray(d)&&d.length&&(w[A]=0);function k(T){A=ve.coerce(T,{},v,"type");var L={type:A,_template:null};if(A in w){d=x[A];var j=w[A]%d.length;w[A]++,L._template=d[j]}return L}return{newTrace:k}},Ue.newContainer=function(x,w,A){var d=x._template,k=d&&(d[w]||A&&d[A]);ve.isPlainObject(k)||(k=null);var T=x[w]={_template:k};return T},Ue.arrayTemplater=function(x,w,A){var d=x._template,k=d&&d[y(w)],T=d&&d[w];(!Array.isArray(T)||!T.length)&&(T=[]);var L={};function j(N){var O={name:N.name,_input:N},B=O[c]=N[c];if(!_(B))return O._template=k,O;for(var S=0;S<T.length;S++){var D=T[S];if(D.name===B)return L[B]=1,O._template=D,O}return O[A]=N[A]||!1,O._template=!1,O}function P(){for(var N=[],O=0;O<T.length;O++){var B=T[O],S=B.name;if(_(S)&&!L[S]){var D={_template:B,name:S,_input:{_templateitemname:S}};D[c]=B[c],N.push(D),L[S]=1}}return N}return{newItem:j,defaultItems:P}};function _(x){return x&&typeof x=="string"}function y(x){var w=x.length-1;return x.charAt(w)!=="s"&&ve.warn("bad argument to arrayDefaultKey: "+x),x.substr(0,x.length-1)+"defaults"}Ue.arrayDefaultKey=y,Ue.arrayEditor=function(x,w,A){var d=(ve.nestedProperty(x,w).get()||[]).length,k=A._index,T=k>=d&&(A._input||{})._templateitemname;T&&(k=d);var L=w+"["+k+"]",j;function P(){j={},T&&(j[L]={},j[L][c]=T)}P();function N(D,z){j[D]=z}function O(D,z){T?ve.nestedProperty(j[L],D).set(z):j[L+"."+D]=z}function B(){var D=j;return P(),D}function S(D,z){D&&O(D,z);var H=B();for(var Y in H)ve.nestedProperty(x,Y).set(H[Y])}return{modifyBase:N,modifyItem:O,getUpdateObj:B,applyUpdate:S}}}),jm=t((Ue,ve)=>{var v=ae().counter;ve.exports={idRegex:{x:v("x","( domain)?"),y:v("y","( domain)?")},attrRegex:v("[xy]axis"),xAxisMatch:v("xaxis"),yAxisMatch:v("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINZOOM:20,DRAGGERSIZE:20,REDRAWDELAY:50,DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"},zindexSeparator:"z"}}),A1=t(Ue=>{var ve=p1(),v=jm();Ue.id2name=function(h){if(!(typeof h!="string"||!h.match(v.AX_ID_PATTERN))){var _=h.split(" ")[0].substr(1);return _==="1"&&(_=""),h.charAt(0)+"axis"+_}},Ue.name2id=function(h){if(h.match(v.AX_NAME_PATTERN)){var _=h.substr(5);return _==="1"&&(_=""),h.charAt(0)+_}},Ue.cleanId=function(h,_,y){var x=/( domain)$/.test(h);if(!(typeof h!="string"||!h.match(v.AX_ID_PATTERN))&&!(_&&h.charAt(0)!==_)&&!(x&&!y)){var w=h.split(" ")[0].substr(1).replace(/^0+/,"");return w==="1"&&(w=""),h.charAt(0)+w+(x&&y?" domain":"")}},Ue.list=function(h,_,y){var x=h._fullLayout;if(!x)return[];var w=Ue.listIds(h,_),A=new Array(w.length),d;for(d=0;d<w.length;d++){var k=w[d];A[d]=x[k.charAt(0)+"axis"+k.substr(1)]}if(!y){var T=x._subplots.gl3d||[];for(d=0;d<T.length;d++){var L=x[T[d]];_?A.push(L[_+"axis"]):A.push(L.xaxis,L.yaxis,L.zaxis)}}return A},Ue.listIds=function(h,_){var y=h._fullLayout;if(!y)return[];var x=y._subplots;return _?x[_+"axis"]:x.xaxis.concat(x.yaxis)},Ue.getFromId=function(h,_,y){var x=h._fullLayout;return _=_===void 0||typeof _!="string"?_:_.replace(" domain",""),y==="x"?_=_.replace(/y[0-9]*/,""):y==="y"&&(_=_.replace(/x[0-9]*/,"")),x[Ue.id2name(_)]},Ue.getFromTrace=function(h,_,y){var x=h._fullLayout,w=null;if(ve.traceIs(_,"gl3d")){var A=_.scene;A.substr(0,5)==="scene"&&(w=x[A][y+"axis"])}else w=Ue.getFromId(h,_[y+"axis"]||y);return w},Ue.idSort=function(h,_){var y=h.charAt(0),x=_.charAt(0);return y!==x?y>x?1:-1:+(h.substr(1)||1)-+(_.substr(1)||1)},Ue.ref2id=function(h){return/^[xyz]/.test(h)?h.split(" ")[0]:!1};function c(h,_){if(_&&_.length){for(var y=0;y<_.length;y++)if(_[y][h])return!0}return!1}Ue.isLinked=function(h,_){return c(_,h._axisMatchGroups)||c(_,h._axisConstraintGroups)}}),L1=t((Ue,ve)=>{function v(h){var _=h._fullLayout._zoomlayer;_&&_.selectAll(".outline-controllers").remove()}function c(h){var _=h._fullLayout._zoomlayer;_&&_.selectAll(".select-outline").remove(),h._fullLayout._outlining=!1}ve.exports={clearOutlineControllers:v,clearOutline:c}}),K1=t((Ue,ve)=>{ve.exports={scattermode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},scattergap:{valType:"number",min:0,max:1,editType:"calc"}}}),Tg=t(Ue=>{var ve=p1();jm().SUBPLOT_PATTERN,Ue.getSubplotCalcData=function(v,c,h){var _=ve.subplotsRegistry[c];if(!_)return[];for(var y=_.attr,x=[],w=0;w<v.length;w++){var A=v[w],d=A[0].trace;d[y]===h&&x.push(A)}return x},Ue.getModuleCalcData=function(v,c,h){var _=[],y=[],x;if(typeof c=="string"?x=ve.getModule(c).plot:typeof c=="function"?x=c:x=c.plot,!x)return[_,v];for(var w=h,A=0;A<v.length;A++){var d=v[A],k=d[0].trace,T=k.zorder!==void 0;k.visible!==!0||k._length===0||(k._module&&k._module.plot===x&&(!T||k.zorder===w)?_.push(d):y.push(d))}return[_,y]},Ue.getSubplotData=function(v,c,h){if(!ve.subplotsRegistry[c])return[];for(var _=ve.subplotsRegistry[c].attr,y=[],x,w,A,d=0;d<v.length;d++)x=v[d],x[_]===h&&y.push(x);return y}}),Lg=t(Ue=>{var ve=p1(),v=Re();Ue.manageCommandObserver=function(w,A,d,k){var T={},L=!0;A&&A._commandObserver&&(T=A._commandObserver),T.cache||(T.cache={}),T.lookupTable={};var j=Ue.hasSimpleAPICommandBindings(w,d,T.lookupTable);if(A&&A._commandObserver){if(j)return T;if(A._commandObserver.remove)return A._commandObserver.remove(),A._commandObserver=null,T}if(j){c(w,j,T.cache),T.check=function(){if(L){var O=c(w,j,T.cache);return O.changed&&k&&T.lookupTable[O.value]!==void 0&&(T.disable(),Promise.resolve(k({value:O.value,type:j.type,prop:j.prop,traces:j.traces,index:T.lookupTable[O.value]})).then(T.enable,T.enable)),O.changed}};for(var P=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],N=0;N<P.length;N++)w._internalOn(P[N],T.check);T.remove=function(){for(var O=0;O<P.length;O++)w._removeInternalListener(P[O],T.check)}}else v.log("Unable to automatically bind plot updates to API command"),T.lookupTable={},T.remove=function(){};return T.disable=function(){L=!1},T.enable=function(){L=!0},A&&(A._commandObserver=T),T},Ue.hasSimpleAPICommandBindings=function(w,A,d){var k,T=A.length,L;for(k=0;k<T;k++){var j,P=A[k],N=P.method,O=P.args;if(Array.isArray(O)||(O=[]),!N)return!1;var B=Ue.computeAPICommandBindings(w,N,O);if(B.length!==1)return!1;if(!L)L=B[0],Array.isArray(L.traces)&&L.traces.sort();else{if(j=B[0],j.type!==L.type||j.prop!==L.prop)return!1;if(Array.isArray(L.traces))if(Array.isArray(j.traces)){j.traces.sort();for(var S=0;S<L.traces.length;S++)if(L.traces[S]!==j.traces[S])return!1}else return!1;else if(j.prop!==L.prop)return!1}j=B[0];var D=j.value;if(Array.isArray(D))if(D.length===1)D=D[0];else return!1;d&&(d[D]=k)}return L};function c(w,A,d){var k,T,L,j=!1;if(A.type==="data")k=w._fullData[A.traces!==null?A.traces[0]:0];else if(A.type==="layout")k=w._fullLayout;else return!1;return T=v.nestedProperty(k,A.prop).get(),L=d[A.type]=d[A.type]||{},L.hasOwnProperty(A.prop)&&L[A.prop]!==T&&(j=!0),L[A.prop]=T,{changed:j,value:T}}Ue.executeAPICommand=function(w,A,d){if(A==="skip")return Promise.resolve();var k=ve.apiMethodRegistry[A],T=[w];Array.isArray(d)||(d=[]);for(var L=0;L<d.length;L++)T.push(d[L]);return k.apply(null,T).catch(function(j){return v.warn("API call to Plotly."+A+" rejected.",j),Promise.reject(j)})},Ue.computeAPICommandBindings=function(w,A,d){var k;switch(Array.isArray(d)||(d=[]),A){case"restyle":k=y(w,d);break;case"relayout":k=_(w,d);break;case"update":k=y(w,[d[0],d[2]]).concat(_(w,[d[1]]));break;case"animate":k=h(w,d);break;default:k=[]}return k};function h(w,A){return Array.isArray(A[0])&&A[0].length===1&&["string","number"].indexOf(typeof A[0][0])!==-1?[{type:"layout",prop:"_currentFrame",value:A[0][0].toString()}]:[]}function _(w,A){var d=[],k=A[0],T={};if(typeof k=="string")T[k]=A[1];else if(v.isPlainObject(k))T=k;else return d;return x(T,function(L,j,P){d.push({type:"layout",prop:L,value:P})},"",0),d}function y(w,A){var d,k,T,L,j=[];if(k=A[0],T=A[1],d=A[2],L={},typeof k=="string")L[k]=T;else if(v.isPlainObject(k))L=k,d===void 0&&(d=T);else return j;return d===void 0&&(d=null),x(L,function(P,N,O){var B,S;if(Array.isArray(O)){S=O.slice();var D=Math.min(S.length,w.data.length);d&&(D=Math.min(D,d.length)),B=[];for(var z=0;z<D;z++)B[z]=d?d[z]:z}else S=O,B=d?d.slice():null;if(B===null)Array.isArray(S)&&(S=S[0]);else if(Array.isArray(B)){if(!Array.isArray(S)){var H=S;S=[];for(var Y=0;Y<B.length;Y++)S[Y]=H}S.length=Math.min(B.length,S.length)}j.push({type:"data",prop:P,traces:B,value:S})},"",0),j}function x(w,A,d,k){Object.keys(w).forEach(function(T){var L=w[T];if(T[0]!=="_"){var j=d+(k>0?".":"")+T;v.isPlainObject(L)?x(L,A,j,k+1):A(j,T,L)}})}}),lg=t((Ue,ve)=>{var v=l(),c=f().timeFormatLocale,h=m().formatLocale,_=E(),y=I(),x=p1(),w=Bm(),A=Nm(),d=Re(),k=sa(),T=M().BADNUM,L=A1(),j=L1().clearOutline,P=K1(),N=x1(),O=lm(),B=Tg().getModuleCalcData,S=d.relinkPrivateKeys,D=d._,z=ve.exports={};d.extendFlat(z,x),z.attributes=Mn(),z.attributes.type.values=z.allTypes,z.fontAttrs=Ut(),z.layoutAttributes=Zm();var H=Lg();z.executeAPICommand=H.executeAPICommand,z.computeAPICommandBindings=H.computeAPICommandBindings,z.manageCommandObserver=H.manageCommandObserver,z.hasSimpleAPICommandBindings=H.hasSimpleAPICommandBindings,z.redrawText=function(lt){return lt=d.getGraphDiv(lt),new Promise(function(ut){setTimeout(function(){lt._fullLayout&&(x.getComponentMethod("annotations","draw")(lt),x.getComponentMethod("legend","draw")(lt),x.getComponentMethod("colorbar","draw")(lt),ut(z.previousPromises(lt)))},300)})},z.resize=function(lt){lt=d.getGraphDiv(lt);var ut,$=new Promise(function(yt,Lt){(!lt||d.isHidden(lt))&&Lt(new Error("Resize must be passed a displayed plot div element.")),lt._redrawTimer&&clearTimeout(lt._redrawTimer),lt._resolveResize&&(ut=lt._resolveResize),lt._resolveResize=yt,lt._redrawTimer=setTimeout(function(){if(!lt.layout||lt.layout.width&&lt.layout.height||d.isHidden(lt)){yt(lt);return}delete lt.layout.width,delete lt.layout.height;var ke=lt.changed;lt.autoplay=!0,x.call("relayout",lt,{autosize:!0}).then(function(){lt.changed=ke,lt._resolveResize===yt&&(delete lt._resolveResize,yt(lt))})},100)});return ut&&ut($),$},z.previousPromises=function(lt){if((lt._promises||[]).length)return Promise.all(lt._promises).then(function(){lt._promises=[]})},z.addLinks=function(lt){if(!(!lt._context.showLink&&!lt._context.showSources)){var ut=lt._fullLayout,$=d.ensureSingle(ut._paper,"text","js-plot-link-container",function(et){et.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:k.defaultLine,"pointer-events":"all"}).each(function(){var ct=v.select(this);ct.append("tspan").classed("js-link-to-tool",!0),ct.append("tspan").classed("js-link-spacer",!0),ct.append("tspan").classed("js-sourcelinks",!0)})}),yt=$.node(),Lt={y:ut._paper.attr("height")-9};document.body.contains(yt)&&yt.getComputedTextLength()>=ut.width-20?(Lt["text-anchor"]="start",Lt.x=5):(Lt["text-anchor"]="end",Lt.x=ut._paper.attr("width")-7),$.attr(Lt);var ke=$.select(".js-link-to-tool"),G=$.select(".js-link-spacer"),ne=$.select(".js-sourcelinks");lt._context.showSources&&lt._context.showSources(lt),lt._context.showLink&&Y(lt,ke),G.text(ke.text()&&ne.text()?" - ":"")}};function Y(lt,ut){ut.text("");var $=ut.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(lt._context.linkText+" »");if(lt._context.sendData)$.on("click",function(){z.sendDataToCloud(lt)});else{var yt=window.location.pathname.split("/"),Lt=window.location.search;$.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+yt[2].split(".")[0]+"/"+yt[1]+Lt})}}z.sendDataToCloud=function(lt){var ut=(window.PLOTLYENV||{}).BASE_URL||lt._context.plotlyServerURL;if(ut){lt.emit("plotly_beforeexport");var $=v.select(lt).append("div").attr("id","hiddenform").style("display","none"),yt=$.append("form").attr({action:ut+"/external",method:"post",target:"_blank"}),Lt=yt.append("input").attr({type:"text",name:"data"});return Lt.node().value=z.graphJson(lt,!1,"keepdata"),yt.node().submit(),$.remove(),lt.emit("plotly_afterexport"),!1}};var ht=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],Se=["year","month","dayMonth","dayMonthYear"];z.supplyDefaults=function(lt,ut){var $=ut&&ut.skipUpdateCalc,yt=lt._fullLayout||{};if(yt._skipDefaults){delete yt._skipDefaults;return}var Lt=lt._fullLayout={},ke=lt.layout||{},G=lt._fullData||[],ne=lt._fullData=[],et=lt.data||[],ct=lt.calcdata||[],kt=lt._context||{},Gt;lt._transitionData||z.createTransitionData(lt),Lt._dfltTitle={plot:D(lt,"Click to enter Plot title"),subtitle:D(lt,"Click to enter Plot subtitle"),x:D(lt,"Click to enter X axis title"),y:D(lt,"Click to enter Y axis title"),colorbar:D(lt,"Click to enter Colorscale title"),annotation:D(lt,"new text")},Lt._traceWord=D(lt,"trace");var $t=ft(lt,ht);if(Lt._mapboxAccessToken=kt.mapboxAccessToken,yt._initialAutoSizeIsDone){var Ko=yt.width,Up=yt.height;z.supplyLayoutGlobalDefaults(ke,Lt,$t),ke.width||(Lt.width=Ko),ke.height||(Lt.height=Up),z.sanitizeMargins(Lt)}else{z.supplyLayoutGlobalDefaults(ke,Lt,$t);var e0=!ke.width||!ke.height,E0=Lt.autosize,m0=kt.autosizable,f0=e0&&(E0||m0);f0?z.plotAutoSize(lt,ke,Lt):e0&&z.sanitizeMargins(Lt),!E0&&e0&&(ke.width=Lt.width,ke.height=Lt.height)}Lt._d3locale=Le($t,Lt.separators),Lt._extraFormat=ft(lt,Se),Lt._initialAutoSizeIsDone=!0,Lt._dataLength=et.length,Lt._modules=[],Lt._visibleModules=[],Lt._basePlotModules=[];var la=Lt._subplots=X(),$o=Lt._splomAxes={x:{},y:{}},jt=Lt._splomSubplots={};Lt._splomGridDflt={},Lt._scatterStackOpts={},Lt._firstScatter={},Lt._alignmentOpts={},Lt._colorAxes={},Lt._requestRangeslider={},Lt._traceUids=ie(G,et),z.supplyDataDefaults(et,ne,ke,Lt);var Fp=Object.keys($o.x),i0=Object.keys($o.y);if(Fp.length>1&&i0.length>1){for(x.getComponentMethod("grid","sizeDefaults")(ke,Lt),Gt=0;Gt<Fp.length;Gt++)d.pushUnique(la.xaxis,Fp[Gt]);for(Gt=0;Gt<i0.length;Gt++)d.pushUnique(la.yaxis,i0[Gt]);for(var b0 in jt)d.pushUnique(la.cartesian,b0)}if(Lt._has=z._hasPlotType.bind(Lt),G.length===ne.length)for(Gt=0;Gt<ne.length;Gt++)S(ne[Gt],G[Gt]);z.supplyLayoutModuleDefaults(ke,Lt,ne,lt._transitionData);var O0=Lt._visibleModules,C0=[];for(Gt=0;Gt<O0.length;Gt++){var I0=O0[Gt].crossTraceDefaults;I0&&d.pushUnique(C0,I0)}for(Gt=0;Gt<C0.length;Gt++)C0[Gt](ne,Lt);Lt._hasOnlyLargeSploms=Lt._basePlotModules.length===1&&Lt._basePlotModules[0].name==="splom"&&Fp.length>15&&i0.length>15&&Lt.shapes.length===0&&Lt.images.length===0,z.linkSubplots(ne,Lt,G,yt),z.cleanPlot(ne,Lt,G,yt);var V0=!!(yt._has&&yt._has("cartesian")),H0=!!(Lt._has&&Lt._has("cartesian")),im=V0,k0=H0;im&&!k0?yt._bgLayer.remove():k0&&!im&&(Lt._shouldCreateBgLayer=!0),yt._zoomlayer&&!lt._dragging&&j({_fullLayout:yt}),nt(ne,Lt),S(Lt,yt),x.getComponentMethod("colorscale","crossTraceDefaults")(ne,Lt),Lt._preGUI||(Lt._preGUI={}),Lt._tracePreGUI||(Lt._tracePreGUI={});var fm=Lt._tracePreGUI,Tm={},om;for(om in fm)Tm[om]="old";for(Gt=0;Gt<ne.length;Gt++)om=ne[Gt]._fullInput.uid,Tm[om]||(fm[om]={}),Tm[om]="new";for(om in Tm)Tm[om]==="old"&&delete fm[om];dt(Lt),x.getComponentMethod("rangeslider","makeData")(Lt),!$&&ct.length===ne.length&&z.supplyDefaultsUpdateCalc(ct,ne)},z.supplyDefaultsUpdateCalc=function(lt,ut){for(var $=0;$<ut.length;$++){var yt=ut[$],Lt=(lt[$]||[])[0];if(Lt&&Lt.trace){var ke=Lt.trace;if(ke._hasCalcTransform){var G=ke._arrayAttrs,ne,et,ct;for(ne=0;ne<G.length;ne++)et=G[ne],ct=d.nestedProperty(ke,et).get().slice(),d.nestedProperty(yt,et).set(ct)}Lt.trace=yt}}};function ie(lt,ut){var $=ut.length,yt=[],Lt,ke;for(Lt=0;Lt<lt.length;Lt++){var G=lt[Lt]._fullInput;G!==ke&&yt.push(G),ke=G}var ne=yt.length,et=new Array($),ct={};function kt(Ko,Up){et[Up]=Ko,ct[Ko]=1}function Gt(Ko,Up){if(Ko&&typeof Ko=="string"&&!ct[Ko])return kt(Ko,Up),!0}for(Lt=0;Lt<$;Lt++){var $t=ut[Lt].uid;typeof $t=="number"&&($t=String($t)),!Gt($t,Lt)&&(Lt<ne&&Gt(yt[Lt].uid,Lt)||kt(d.randstr(ct),Lt))}return et}function X(){var lt=x.collectableSubplotTypes,ut={},$,yt;if(!lt){lt=[];var Lt=x.subplotsRegistry;for(var ke in Lt){var G=Lt[ke],ne=G.attr;if(ne&&(lt.push(ke),Array.isArray(ne)))for(yt=0;yt<ne.length;yt++)d.pushUnique(lt,ne[yt])}}for($=0;$<lt.length;$++)ut[lt[$]]=[];return ut}function ft(lt,ut){var $=lt._context.locale;$||($="en-US");var yt=!1,Lt={};function ke(Gt){for(var $t=!0,Ko=0;Ko<ut.length;Ko++){var Up=ut[Ko];Lt[Up]||(Gt[Up]?Lt[Up]=Gt[Up]:$t=!1)}$t&&(yt=!0)}for(var G=0;G<2;G++){for(var ne=lt._context.locales,et=0;et<2;et++){var ct=(ne[$]||{}).format;if(ct&&(ke(ct),yt))break;ne=x.localeRegistry}var kt=$.split("-")[0];if(yt||kt===$)break;$=kt}return yt||ke(x.localeRegistry.en.format),Lt}function Le(lt,ut){return lt.decimal=ut.charAt(0),lt.thousands=ut.charAt(1),{numberFormat:function($){try{$=h(lt).format(d.adjustFormat($))}catch{return d.warnBadFormat($),d.noFormat}return $},timeFormat:c(lt).utcFormat}}function nt(lt,ut){var $,yt=[];ut.meta&&($=ut._meta={meta:ut.meta,layout:{meta:ut.meta}});for(var Lt=0;Lt<lt.length;Lt++){var ke=lt[Lt];ke.meta?yt[ke.index]=ke._meta={meta:ke.meta}:ut.meta&&(ke._meta={meta:ut.meta}),ut.meta&&(ke._meta.layout={meta:ut.meta})}yt.length&&($||($=ut._meta={}),$.data=yt)}z.createTransitionData=function(lt){lt._transitionData||(lt._transitionData={}),lt._transitionData._frames||(lt._transitionData._frames=[]),lt._transitionData._frameHash||(lt._transitionData._frameHash={}),lt._transitionData._counter||(lt._transitionData._counter=0),lt._transitionData._interruptCallbacks||(lt._transitionData._interruptCallbacks=[])},z._hasPlotType=function(lt){var ut,$=this._basePlotModules||[];for(ut=0;ut<$.length;ut++)if($[ut].name===lt)return!0;var yt=this._modules||[];for(ut=0;ut<yt.length;ut++){var Lt=yt[ut].name;if(Lt===lt)return!0;var ke=x.modules[Lt];if(ke&&ke.categories[lt])return!0}return!1},z.cleanPlot=function(lt,ut,$,yt){var Lt,ke,G=yt._basePlotModules||[];for(Lt=0;Lt<G.length;Lt++){var ne=G[Lt];ne.clean&&ne.clean(lt,ut,$,yt)}var et=yt._has&&yt._has("gl"),ct=ut._has&&ut._has("gl");et&&!ct&&yt._glcontainer!==void 0&&(yt._glcontainer.selectAll(".gl-canvas").remove(),yt._glcontainer.selectAll(".no-webgl").remove(),yt._glcanvas=null);var kt=!!yt._infolayer;e:for(Lt=0;Lt<$.length;Lt++){var Gt=$[Lt],$t=Gt.uid;for(ke=0;ke<lt.length;ke++){var Ko=lt[ke];if($t===Ko.uid)continue e}kt&&yt._infolayer.select(".cb"+$t).remove()}},z.linkSubplots=function(lt,ut,$,yt){var Lt,ke,G=yt._plots||{},ne=ut._plots={},et=ut._subplots,ct={_fullData:lt,_fullLayout:ut},kt=et.cartesian||[];for(Lt=0;Lt<kt.length;Lt++){var Gt=kt[Lt],$t=G[Gt],Ko=L.getFromId(ct,Gt,"x"),Up=L.getFromId(ct,Gt,"y"),e0;for($t?e0=ne[Gt]=$t:(e0=ne[Gt]={},e0.id=Gt),Ko._counterAxes.push(Up._id),Up._counterAxes.push(Ko._id),Ko._subplotsWith.push(Gt),Up._subplotsWith.push(Gt),e0.xaxis=Ko,e0.yaxis=Up,e0._hasClipOnAxisFalse=!1,ke=0;ke<lt.length;ke++){var E0=lt[ke];if(E0.xaxis===e0.xaxis._id&&E0.yaxis===e0.yaxis._id&&E0.cliponaxis===!1){e0._hasClipOnAxisFalse=!0;break}}}var m0=L.list(ct,null,!0),f0;for(Lt=0;Lt<m0.length;Lt++){f0=m0[Lt];var la=null;f0.overlaying&&(la=L.getFromId(ct,f0.overlaying),la&&la.overlaying&&(f0.overlaying=!1,la=null)),f0._mainAxis=la||f0,la&&(f0.domain=la.domain.slice()),f0._anchorAxis=f0.anchor==="free"?null:L.getFromId(ct,f0.anchor)}for(Lt=0;Lt<m0.length;Lt++)if(f0=m0[Lt],f0._counterAxes.sort(L.idSort),f0._subplotsWith.sort(d.subplotSort),f0._mainSubplot=Ze(f0,ut),f0._counterAxes.length&&(f0.spikemode&&f0.spikemode.indexOf("across")!==-1||f0.automargin&&f0.mirror&&f0.anchor!=="free"||x.getComponentMethod("rangeslider","isVisible")(f0))){var $o=1,jt=0;for(ke=0;ke<f0._counterAxes.length;ke++){var Fp=L.getFromId(ct,f0._counterAxes[ke]);$o=Math.min($o,Fp.domain[0]),jt=Math.max(jt,Fp.domain[1])}$o<jt&&(f0._counterDomainMin=$o,f0._counterDomainMax=jt)}};function Ze(lt,ut){var $={_fullLayout:ut},yt=lt._id.charAt(0)==="x",Lt=lt._mainAxis._anchorAxis,ke="",G="",ne="";if(Lt&&(ne=Lt._mainAxis._id,ke=yt?lt._id+ne:ne+lt._id),!ke||!ut._plots[ke]){ke="";for(var et=lt._counterAxes,ct=0;ct<et.length;ct++){var kt=et[ct],Gt=yt?lt._id+kt:kt+lt._id;G||(G=Gt);var $t=L.getFromId($,kt);if(ne&&$t.overlaying===ne){ke=Gt;break}}}return ke||G}z.clearExpandedTraceDefaultColors=function(lt){var ut,$,yt;function Lt(G,ne,et,ct){$[ct]=ne,$.length=ct+1,G.valType==="color"&&G.dflt===void 0&&ut.push($.join("."))}for($=[],ut=lt._module._colorAttrs,ut||(lt._module._colorAttrs=ut=[],w.crawl(lt._module.attributes,Lt)),yt=0;yt<ut.length;yt++){var ke=d.nestedProperty(lt,"_input."+ut[yt]);ke.get()||d.nestedProperty(lt,ut[yt]).set(null)}},z.supplyDataDefaults=function(lt,ut,$,yt){var Lt=yt._modules,ke=yt._visibleModules,G=yt._basePlotModules,ne=0,et,ct,kt;yt._transformModules=[];function Gt(m0){ut.push(m0);var f0=m0._module;f0&&(d.pushUnique(Lt,f0),m0.visible===!0&&d.pushUnique(ke,f0),d.pushUnique(G,m0._module.basePlotModule),m0._input.visible!==!1&&ne++)}var $t={},Ko=[],Up=($.template||{}).data||{},e0=A.traceTemplater(Up);for(et=0;et<lt.length;et++)kt=lt[et],ct=e0.newTrace(kt),ct.uid=yt._traceUids[et],z.supplyTraceDefaults(kt,ct,ne,yt,et),ct.index=et,ct._input=kt,ct._fullInput=ct,Gt(ct),x.traceIs(ct,"carpetAxis")&&($t[ct.carpet]=ct),x.traceIs(ct,"carpetDependent")&&Ko.push(et);for(et=0;et<Ko.length;et++)if(ct=ut[Ko[et]],!!ct.visible){var E0=$t[ct.carpet];if(ct._carpet=E0,!E0||!E0.visible){ct.visible=!1;continue}ct.xaxis=E0.xaxis,ct.yaxis=E0.yaxis}},z.supplyAnimationDefaults=function(lt){lt=lt||{};var ut,$={};function yt(Lt,ke){return d.coerce(lt||{},$,N,Lt,ke)}if(yt("mode"),yt("direction"),yt("fromcurrent"),Array.isArray(lt.frame))for($.frame=[],ut=0;ut<lt.frame.length;ut++)$.frame[ut]=z.supplyAnimationFrameDefaults(lt.frame[ut]||{});else $.frame=z.supplyAnimationFrameDefaults(lt.frame||{});if(Array.isArray(lt.transition))for($.transition=[],ut=0;ut<lt.transition.length;ut++)$.transition[ut]=z.supplyAnimationTransitionDefaults(lt.transition[ut]||{});else $.transition=z.supplyAnimationTransitionDefaults(lt.transition||{});return $},z.supplyAnimationFrameDefaults=function(lt){var ut={};function $(yt,Lt){return d.coerce(lt||{},ut,N.frame,yt,Lt)}return $("duration"),$("redraw"),ut},z.supplyAnimationTransitionDefaults=function(lt){var ut={};function $(yt,Lt){return d.coerce(lt||{},ut,N.transition,yt,Lt)}return $("duration"),$("easing"),ut},z.supplyFrameDefaults=function(lt){var ut={};function $(yt,Lt){return d.coerce(lt,ut,O,yt,Lt)}return $("group"),$("name"),$("traces"),$("baseframe"),$("data"),$("layout"),ut},z.supplyTraceDefaults=function(lt,ut,$,yt,Lt){var ke=yt.colorway||k.defaults,G=ke[$%ke.length],ne;function et(la,$o){return d.coerce(lt,ut,z.attributes,la,$o)}var ct=et("visible");et("type"),et("name",yt._traceWord+" "+Lt),et("uirevision",yt.uirevision);var kt=z.getModule(ut);if(ut._module=kt,kt){var Gt=kt.basePlotModule,$t=Gt.attr,Ko=Gt.attributes;if($t&&Ko){var Up=yt._subplots,e0="";if(Array.isArray($t))for(ne=0;ne<$t.length;ne++){var E0=$t[ne],m0=d.coerce(lt,ut,Ko,E0);Up[E0]&&d.pushUnique(Up[E0],m0),e0+=m0}else e0=d.coerce(lt,ut,Ko,$t);Up[Gt.name]&&d.pushUnique(Up[Gt.name],e0)}}if(ct&&(et("customdata"),et("ids"),et("meta"),x.traceIs(ut,"showLegend")?(d.coerce(lt,ut,kt.attributes.showlegend?kt.attributes:z.attributes,"showlegend"),et("legend"),et("legendwidth"),et("legendgroup"),et("legendgrouptitle.text"),et("legendrank"),ut._dfltShowLegend=!0):ut._dfltShowLegend=!1,kt&&kt.supplyDefaults(lt,ut,G,yt),x.traceIs(ut,"noOpacity")||et("opacity"),x.traceIs(ut,"notLegendIsolatable")&&(ut.visible=!!ut.visible),x.traceIs(ut,"noHover")||(ut.hovertemplate||d.coerceHoverinfo(lt,ut,yt),ut.type!=="parcats"&&x.getComponentMethod("fx","supplyDefaults")(lt,ut,G,yt)),kt&&kt.selectPoints)){var f0=et("selectedpoints");d.isTypedArray(f0)&&(ut.selectedpoints=Array.from(f0))}return ut},z.supplyLayoutGlobalDefaults=function(lt,ut,$){function yt(Gt,$t){return d.coerce(lt,ut,z.layoutAttributes,Gt,$t)}var Lt=lt.template;d.isPlainObject(Lt)&&(ut.template=Lt,ut._template=Lt.layout,ut._dataTemplate=Lt.data),yt("autotypenumbers");var ke=d.coerceFont(yt,"font"),G=ke.size;d.coerceFont(yt,"title.font",ke,{overrideDflt:{size:Math.round(G*1.4)}}),yt("title.text",ut._dfltTitle.plot),yt("title.xref");var ne=yt("title.yref");yt("title.pad.t"),yt("title.pad.r"),yt("title.pad.b"),yt("title.pad.l");var et=yt("title.automargin");yt("title.x"),yt("title.xanchor"),yt("title.y"),yt("title.yanchor"),yt("title.subtitle.text",ut._dfltTitle.subtitle),d.coerceFont(yt,"title.subtitle.font",ke,{overrideDflt:{size:Math.round(ut.title.font.size*.7)}}),et&&(ne==="paper"&&(ut.title.y!==0&&(ut.title.y=1),ut.title.yanchor==="auto"&&(ut.title.yanchor=ut.title.y===0?"top":"bottom")),ne==="container"&&(ut.title.y==="auto"&&(ut.title.y=1),ut.title.yanchor==="auto"&&(ut.title.yanchor=ut.title.y<.5?"bottom":"top")));var ct=yt("uniformtext.mode");ct&&yt("uniformtext.minsize"),yt("autosize",!(lt.width&&lt.height)),yt("width"),yt("height"),yt("minreducedwidth"),yt("minreducedheight"),yt("margin.l"),yt("margin.r"),yt("margin.t"),yt("margin.b"),yt("margin.pad"),yt("margin.autoexpand"),lt.width&&lt.height&&z.sanitizeMargins(ut),x.getComponentMethod("grid","sizeDefaults")(lt,ut),yt("paper_bgcolor"),yt("separators",$.decimal+$.thousands),yt("hidesources"),yt("colorway"),yt("datarevision");var kt=yt("uirevision");yt("editrevision",kt),yt("selectionrevision",kt),x.getComponentMethod("modebar","supplyLayoutDefaults")(lt,ut),x.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(lt,ut,yt),x.getComponentMethod("selections","supplyDrawNewSelectionDefaults")(lt,ut,yt),yt("meta"),d.isPlainObject(lt.transition)&&(yt("transition.duration"),yt("transition.easing"),yt("transition.ordering")),x.getComponentMethod("calendars","handleDefaults")(lt,ut,"calendar"),x.getComponentMethod("fx","supplyLayoutGlobalDefaults")(lt,ut,yt),d.coerce(lt,ut,P,"scattermode")};function rt(lt){return typeof lt=="string"&&lt.substr(lt.length-2)==="px"&&parseFloat(lt)}z.plotAutoSize=function(lt,ut,$){var yt=lt._context||{},Lt=yt.frameMargins,ke,G,ne=d.isPlotDiv(lt);if(ne&&lt.emit("plotly_autosize"),yt.fillFrame)ke=window.innerWidth,G=window.innerHeight,document.body.style.overflow="hidden";else{var et=ne?window.getComputedStyle(lt):{};if(ke=rt(et.width)||rt(et.maxWidth)||$.width,G=rt(et.height)||rt(et.maxHeight)||$.height,_(Lt)&&Lt>0){var ct=1-2*Lt;ke=Math.round(ct*ke),G=Math.round(ct*G)}}var kt=z.layoutAttributes.width.min,Gt=z.layoutAttributes.height.min;ke<kt&&(ke=kt),G<Gt&&(G=Gt);var $t=!ut.width&&Math.abs($.width-ke)>1,Ko=!ut.height&&Math.abs($.height-G)>1;(Ko||$t)&&($t&&($.width=ke),Ko&&($.height=G)),lt._initialAutoSize||(lt._initialAutoSize={width:ke,height:G}),z.sanitizeMargins($)},z.supplyLayoutModuleDefaults=function(lt,ut,$,yt){var Lt=x.componentsRegistry,ke=ut._basePlotModules,G,ne,et,ct=x.subplotsRegistry.cartesian;for(G in Lt)et=Lt[G],et.includeBasePlot&&et.includeBasePlot(lt,ut);ke.length||ke.push(ct),ut._has("cartesian")&&(x.getComponentMethod("grid","contentDefaults")(lt,ut),ct.finalizeSubplots(lt,ut));for(var kt in ut._subplots)ut._subplots[kt].sort(d.subplotSort);for(ne=0;ne<ke.length;ne++)et=ke[ne],et.supplyLayoutDefaults&&et.supplyLayoutDefaults(lt,ut,$);var Gt=ut._modules;for(ne=0;ne<Gt.length;ne++)et=Gt[ne],et.supplyLayoutDefaults&&et.supplyLayoutDefaults(lt,ut,$);var $t=ut._transformModules;for(ne=0;ne<$t.length;ne++)et=$t[ne],et.supplyLayoutDefaults&&et.supplyLayoutDefaults(lt,ut,$,yt);for(G in Lt)et=Lt[G],et.supplyLayoutDefaults&&et.supplyLayoutDefaults(lt,ut,$)},z.purge=function(lt){var ut=lt._fullLayout||{};ut._glcontainer!==void 0&&(ut._glcontainer.selectAll(".gl-canvas").remove(),ut._glcontainer.remove(),ut._glcanvas=null),ut._modeBar&&ut._modeBar.destroy(),lt._transitionData&&(lt._transitionData._interruptCallbacks&&(lt._transitionData._interruptCallbacks.length=0),lt._transitionData._animationRaf&&window.cancelAnimationFrame(lt._transitionData._animationRaf)),d.clearThrottle(),d.clearResponsive(lt),delete lt.data,delete lt.layout,delete lt._fullData,delete lt._fullLayout,delete lt.calcdata,delete lt.empty,delete lt.fid,delete lt.undoqueue,delete lt.undonum,delete lt.autoplay,delete lt.changed,delete lt._promises,delete lt._redrawTimer,delete lt._hmlumcount,delete lt._hmpixcount,delete lt._transitionData,delete lt._transitioning,delete lt._initialAutoSize,delete lt._transitioningWithDuration,delete lt._dragging,delete lt._dragged,delete lt._dragdata,delete lt._hoverdata,delete lt._snapshotInProgress,delete lt._editing,delete lt._mouseDownTime,delete lt._legendMouseDownTime,lt.removeAllListeners&&lt.removeAllListeners()},z.style=function(lt){var ut=lt._fullLayout._visibleModules,$=[],yt;for(yt=0;yt<ut.length;yt++){var Lt=ut[yt];Lt.style&&d.pushUnique($,Lt.style)}for(yt=0;yt<$.length;yt++)$[yt](lt)},z.sanitizeMargins=function(lt){if(!(!lt||!lt.margin)){var ut=lt.width,$=lt.height,yt=lt.margin,Lt=ut-(yt.l+yt.r),ke=$-(yt.t+yt.b),G;Lt<0&&(G=(ut-1)/(yt.l+yt.r),yt.l=Math.floor(G*yt.l),yt.r=Math.floor(G*yt.r)),ke<0&&(G=($-1)/(yt.t+yt.b),yt.t=Math.floor(G*yt.t),yt.b=Math.floor(G*yt.b))}},z.clearAutoMarginIds=function(lt){lt._fullLayout._pushmarginIds={}},z.allowAutoMargin=function(lt,ut){lt._fullLayout._pushmarginIds[ut]=1};function dt(lt){var ut=lt.margin;if(!lt._size){var $=lt._size={l:Math.round(ut.l),r:Math.round(ut.r),t:Math.round(ut.t),b:Math.round(ut.b),p:Math.round(ut.pad)};$.w=Math.round(lt.width)-$.l-$.r,$.h=Math.round(lt.height)-$.t-$.b}lt._pushmargin||(lt._pushmargin={}),lt._pushmarginIds||(lt._pushmarginIds={}),lt._reservedMargin||(lt._reservedMargin={})}var pt=2,se=2;z.autoMargin=function(lt,ut,$){var yt=lt._fullLayout,Lt=yt.width,ke=yt.height,G=yt.margin,ne=yt.minreducedwidth,et=yt.minreducedheight,ct=d.constrain(Lt-G.l-G.r,pt,ne),kt=d.constrain(ke-G.t-G.b,se,et),Gt=Math.max(0,Lt-ct),$t=Math.max(0,ke-kt),Ko=yt._pushmargin,Up=yt._pushmarginIds;if(G.autoexpand!==!1){if(!$)delete Ko[ut],delete Up[ut];else{var e0=$.pad;if(e0===void 0&&(e0=Math.min(12,G.l,G.r,G.t,G.b)),Gt){var E0=($.l+$.r)/Gt;E0>1&&($.l/=E0,$.r/=E0)}if($t){var m0=($.t+$.b)/$t;m0>1&&($.t/=m0,$.b/=m0)}var f0=$.xl!==void 0?$.xl:$.x,la=$.xr!==void 0?$.xr:$.x,$o=$.yt!==void 0?$.yt:$.y,jt=$.yb!==void 0?$.yb:$.y;Ko[ut]={l:{val:f0,size:$.l+e0},r:{val:la,size:$.r+e0},b:{val:jt,size:$.b+e0},t:{val:$o,size:$.t+e0}},Up[ut]=1}if(!yt._replotting)return z.doAutoMargin(lt)}};function gt(lt){if("_redrawFromAutoMarginCount"in lt._fullLayout)return!1;var ut=L.list(lt,"",!0);for(var $ in ut)if(ut[$].autoshift||ut[$].shift)return!0;return!1}z.doAutoMargin=function(lt){var ut=lt._fullLayout,$=ut.width,yt=ut.height;ut._size||(ut._size={}),dt(ut);var Lt=ut._size,ke=ut.margin,G={t:0,b:0,l:0,r:0},ne=d.extendFlat({},Lt),et=ke.l,ct=ke.r,kt=ke.t,Gt=ke.b,$t=ut._pushmargin,Ko=ut._pushmarginIds,Up=ut.minreducedwidth,e0=ut.minreducedheight;if(ke.autoexpand!==!1){for(var E0 in $t)Ko[E0]||delete $t[E0];var m0=lt._fullLayout._reservedMargin;for(var f0 in m0)for(var la in m0[f0]){var $o=m0[f0][la];G[la]=Math.max(G[la],$o)}$t.base={l:{val:0,size:et},r:{val:1,size:ct},t:{val:1,size:kt},b:{val:0,size:Gt}};for(var jt in G){var Fp=0;for(var i0 in $t)i0!=="base"&&_($t[i0][jt].size)&&(Fp=$t[i0][jt].size>Fp?$t[i0][jt].size:Fp);var b0=Math.max(0,ke[jt]-Fp);G[jt]=Math.max(0,G[jt]-b0)}for(var O0 in $t){var C0=$t[O0].l||{},I0=$t[O0].b||{},V0=C0.val,H0=C0.size,im=I0.val,k0=I0.size,fm=$-G.r-G.l,Tm=yt-G.t-G.b;for(var om in $t){if(_(H0)&&$t[om].r){var Rm=$t[om].r.val,ci=$t[om].r.size;if(Rm>V0){var Hp=(H0*Rm+(ci-fm)*V0)/(Rm-V0),St=(ci*(1-V0)+(H0-fm)*(1-Rm))/(Rm-V0);Hp+St>et+ct&&(et=Hp,ct=St)}}if(_(k0)&&$t[om].t){var Ht=$t[om].t.val,Sr=$t[om].t.size;if(Ht>im){var Rp=(k0*Ht+(Sr-Tm)*im)/(Ht-im),Np=(Sr*(1-im)+(k0-Tm)*(1-Ht))/(Ht-im);Rp+Np>Gt+kt&&(Gt=Rp,kt=Np)}}}}}var Jp=d.constrain($-ke.l-ke.r,pt,Up),n0=d.constrain(yt-ke.t-ke.b,se,e0),S0=Math.max(0,$-Jp),_0=Math.max(0,yt-n0);if(S0){var w0=(et+ct)/S0;w0>1&&(et/=w0,ct/=w0)}if(_0){var X0=(Gt+kt)/_0;X0>1&&(Gt/=X0,kt/=X0)}if(Lt.l=Math.round(et)+G.l,Lt.r=Math.round(ct)+G.r,Lt.t=Math.round(kt)+G.t,Lt.b=Math.round(Gt)+G.b,Lt.p=Math.round(ke.pad),Lt.w=Math.round($)-Lt.l-Lt.r,Lt.h=Math.round(yt)-Lt.t-Lt.b,!ut._replotting&&(z.didMarginChange(ne,Lt)||gt(lt))){"_redrawFromAutoMarginCount"in ut?ut._redrawFromAutoMarginCount++:ut._redrawFromAutoMarginCount=1;var $0=3*(1+Object.keys(Ko).length);if(ut._redrawFromAutoMarginCount<$0)return x.call("_doPlot",lt);ut._size=ne,d.warn("Too many auto-margin redraws.")}xt(lt)};function xt(lt){var ut=L.list(lt,"",!0);["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function($){for(var yt=0;yt<ut.length;yt++){var Lt=ut[yt][$];Lt&&Lt()}})}var Nt=["l","r","t","b","p","w","h"];z.didMarginChange=function(lt,ut){for(var $=0;$<Nt.length;$++){var yt=Nt[$],Lt=lt[yt],ke=ut[yt];if(!_(Lt)||Math.abs(ke-Lt)>1)return!0}return!1},z.graphJson=function(lt,ut,$,yt,Lt,ke){(Lt&&ut&&!lt._fullData||Lt&&!ut&&!lt._fullLayout)&&z.supplyDefaults(lt);var G=Lt?lt._fullData:lt.data,ne=Lt?lt._fullLayout:lt.layout,et=(lt._transitionData||{})._frames;function ct($t,Ko){if(typeof $t=="function")return Ko?"_function_":null;if(d.isPlainObject($t)){var Up={},e0;return Object.keys($t).sort().forEach(function(la){if(["_","["].indexOf(la.charAt(0))===-1){if(typeof $t[la]=="function"){Ko&&(Up[la]="_function");return}if($==="keepdata"){if(la.substr(la.length-3)==="src")return}else if($==="keepstream"){if(e0=$t[la+"src"],typeof e0=="string"&&e0.indexOf(":")>0&&!d.isPlainObject($t.stream))return}else if($!=="keepall"&&(e0=$t[la+"src"],typeof e0=="string"&&e0.indexOf(":")>0))return;Up[la]=ct($t[la],Ko)}}),Up}var E0=Array.isArray($t),m0=d.isTypedArray($t);if((E0||m0)&&$t.dtype&&$t.shape){var f0=$t.bdata;return ct({dtype:$t.dtype,shape:$t.shape,bdata:d.isArrayBuffer(f0)?y.encode(f0):f0},Ko)}return E0?$t.map(function(la){return ct(la,Ko)}):m0?d.simpleMap($t,d.identity):d.isJSDate($t)?d.ms2DateTimeLocal(+$t):$t}var kt={data:(G||[]).map(function($t){var Ko=ct($t);return ut&&delete Ko.fit,Ko})};if(!ut&&(kt.layout=ct(ne),Lt)){var Gt=ne._size;kt.layout.computed={margin:{b:Gt.b,l:Gt.l,r:Gt.r,t:Gt.t}}}return et&&(kt.frames=ct(et)),ke&&(kt.config=ct(lt._context,!0)),yt==="object"?kt:JSON.stringify(kt)},z.modifyFrames=function(lt,ut){var $,yt,Lt,ke=lt._transitionData._frames,G=lt._transitionData._frameHash;for($=0;$<ut.length;$++)switch(yt=ut[$],yt.type){case"replace":Lt=yt.value;var ne=(ke[yt.index]||{}).name,et=Lt.name;ke[yt.index]=G[et]=Lt,et!==ne&&(delete G[ne],G[et]=Lt);break;case"insert":Lt=yt.value,G[Lt.name]=Lt,ke.splice(yt.index,0,Lt);break;case"delete":Lt=ke[yt.index],delete G[Lt.name],ke.splice(yt.index,1);break}return Promise.resolve()},z.computeFrame=function(lt,ut){var $=lt._transitionData._frameHash,yt,Lt,ke,G;if(!ut)throw new Error("computeFrame must be given a string frame name");var ne=$[ut.toString()];if(!ne)return!1;for(var et=[ne],ct=[ne.name];ne.baseframe&&(ne=$[ne.baseframe.toString()])&&ct.indexOf(ne.name)===-1;)et.push(ne),ct.push(ne.name);for(var kt={};ne=et.pop();)if(ne.layout&&(kt.layout=z.extendLayout(kt.layout,ne.layout)),ne.data){if(kt.data||(kt.data=[]),Lt=ne.traces,!Lt)for(Lt=[],yt=0;yt<ne.data.length;yt++)Lt[yt]=yt;for(kt.traces||(kt.traces=[]),yt=0;yt<ne.data.length;yt++)ke=Lt[yt],ke!=null&&(G=kt.traces.indexOf(ke),G===-1&&(G=kt.data.length,kt.traces[G]=ke),kt.data[G]=z.extendTrace(kt.data[G],ne.data[yt]))}return kt},z.recomputeFrameHash=function(lt){for(var ut=lt._transitionData._frameHash={},$=lt._transitionData._frames,yt=0;yt<$.length;yt++){var Lt=$[yt];Lt&&Lt.name&&(ut[Lt.name]=Lt)}},z.extendObjectWithContainers=function(lt,ut,$){var yt,Lt,ke,G,ne,et,ct,kt,Gt=d.extendDeepNoArrays({},ut||{}),$t=d.expandObjectPaths(Gt),Ko={};if($&&$.length)for(ke=0;ke<$.length;ke++)yt=d.nestedProperty($t,$[ke]),Lt=yt.get(),Lt===void 0?d.nestedProperty(Ko,$[ke]).set(null):(yt.set(null),d.nestedProperty(Ko,$[ke]).set(Lt));if(lt=d.extendDeepNoArrays(lt||{},$t),$&&$.length){for(ke=0;ke<$.length;ke++)if(ne=d.nestedProperty(Ko,$[ke]),ct=ne.get(),!!ct){for(et=d.nestedProperty(lt,$[ke]),kt=et.get(),Array.isArray(kt)||(kt=[],et.set(kt)),G=0;G<ct.length;G++){var Up=ct[G];Up===null?kt[G]=null:kt[G]=z.extendObjectWithContainers(kt[G],Up)}et.set(kt)}}return lt},z.dataArrayContainers=["transforms","dimensions"],z.layoutArrayContainers=x.layoutArrayContainers,z.extendTrace=function(lt,ut){return z.extendObjectWithContainers(lt,ut,z.dataArrayContainers)},z.extendLayout=function(lt,ut){return z.extendObjectWithContainers(lt,ut,z.layoutArrayContainers)},z.transition=function(lt,ut,$,yt,Lt,ke){var G={redraw:Lt.redraw},ne={},et=[];return G.prepareFn=function(){for(var ct=Array.isArray(ut)?ut.length:0,kt=yt.slice(0,ct),Gt=0;Gt<kt.length;Gt++){var $t=kt[Gt],Ko=lt._fullData[$t],Up=Ko._module;if(Up){if(Up.animatable){var e0=Up.basePlotModule.name;ne[e0]||(ne[e0]=[]),ne[e0].push($t)}lt.data[kt[Gt]]=z.extendTrace(lt.data[kt[Gt]],ut[Gt])}}var E0=d.expandObjectPaths(d.extendDeepNoArrays({},$)),m0=/^[xy]axis[0-9]*$/;for(var f0 in E0)m0.test(f0)&&delete E0[f0].range;z.extendLayout(lt.layout,E0),delete lt.calcdata,z.supplyDefaults(lt),z.doCalcdata(lt);var la=d.expandObjectPaths($);if(la){var $o=lt._fullLayout._plots;for(var jt in $o){var Fp=$o[jt],i0=Fp.xaxis,b0=Fp.yaxis,O0=i0.range.slice(),C0=b0.range.slice(),I0=null,V0=null,H0=null,im=null;Array.isArray(la[i0._name+".range"])?I0=la[i0._name+".range"].slice():Array.isArray((la[i0._name]||{}).range)&&(I0=la[i0._name].range.slice()),Array.isArray(la[b0._name+".range"])?V0=la[b0._name+".range"].slice():Array.isArray((la[b0._name]||{}).range)&&(V0=la[b0._name].range.slice()),O0&&I0&&(i0.r2l(O0[0])!==i0.r2l(I0[0])||i0.r2l(O0[1])!==i0.r2l(I0[1]))&&(H0={xr0:O0,xr1:I0}),C0&&V0&&(b0.r2l(C0[0])!==b0.r2l(V0[0])||b0.r2l(C0[1])!==b0.r2l(V0[1]))&&(im={yr0:C0,yr1:V0}),(H0||im)&&et.push(d.extendFlat({plotinfo:Fp},H0,im))}}return Promise.resolve()},G.runFn=function(ct){var kt,Gt=lt._fullLayout._basePlotModules,$t=et.length,Ko;if($)for(Ko=0;Ko<Gt.length;Ko++)Gt[Ko].transitionAxes&&Gt[Ko].transitionAxes(lt,et,ke,ct);$t?(kt=d.extendFlat({},ke),kt.duration=0,delete ne.cartesian):kt=ke;for(var Up in ne){var e0=ne[Up],E0=lt._fullData[e0[0]]._module;E0.basePlotModule.plot(lt,e0,kt,ct)}},Rt(lt,ke,G)},z.transitionFromReact=function(lt,ut,$,yt){var Lt=lt._fullLayout,ke=Lt.transition,G={},ne=[];return G.prepareFn=function(){var et=Lt._plots;G.redraw=!1,ut.anim==="some"&&(G.redraw=!0),$.anim==="some"&&(G.redraw=!0);for(var ct in et){var kt=et[ct],Gt=kt.xaxis,$t=kt.yaxis,Ko=yt[Gt._name].range.slice(),Up=yt[$t._name].range.slice(),e0=Gt.range.slice(),E0=$t.range.slice();Gt.setScale(),$t.setScale();var m0=null,f0=null;(Gt.r2l(Ko[0])!==Gt.r2l(e0[0])||Gt.r2l(Ko[1])!==Gt.r2l(e0[1]))&&(m0={xr0:Ko,xr1:e0}),($t.r2l(Up[0])!==$t.r2l(E0[0])||$t.r2l(Up[1])!==$t.r2l(E0[1]))&&(f0={yr0:Up,yr1:E0}),(m0||f0)&&ne.push(d.extendFlat({plotinfo:kt},m0,f0))}return Promise.resolve()},G.runFn=function(et){for(var ct=lt._fullData,kt=lt._fullLayout,Gt=kt._basePlotModules,$t,Ko,Up,e0=[],E0=0;E0<ct.length;E0++)e0.push(E0);function m0(){if(lt._fullLayout)for(var la=0;la<Gt.length;la++)Gt[la].transitionAxes&&Gt[la].transitionAxes(lt,ne,$t,et)}function f0(){if(lt._fullLayout)for(var la=0;la<Gt.length;la++)Gt[la].plot(lt,Up,Ko,et)}ne.length&&ut.anim?ke.ordering==="traces first"?($t=d.extendFlat({},ke,{duration:0}),Up=e0,Ko=ke,setTimeout(m0,ke.duration),f0()):($t=ke,Up=null,Ko=d.extendFlat({},ke,{duration:0}),setTimeout(f0,$t.duration),m0()):ne.length?($t=ke,m0()):ut.anim&&(Up=e0,Ko=ke,f0())},Rt(lt,ke,G)};function Rt(lt,ut,$){var yt=!1;function Lt(Gt){var $t=Promise.resolve();if(!Gt)return $t;for(;Gt.length;)$t=$t.then(Gt.shift());return $t}function ke(Gt){if(Gt)for(;Gt.length;)Gt.shift()}function G(){return lt.emit("plotly_transitioning",[]),new Promise(function(Gt){lt._transitioning=!0,ut.duration>0&&(lt._transitioningWithDuration=!0),lt._transitionData._interruptCallbacks.push(function(){yt=!0}),$.redraw&&lt._transitionData._interruptCallbacks.push(function(){return x.call("redraw",lt)}),lt._transitionData._interruptCallbacks.push(function(){lt.emit("plotly_transitioninterrupted",[])});var $t=0,Ko=0;function Up(){return $t++,function(){Ko++,!yt&&Ko===$t&&ne(Gt)}}$.runFn(Up),setTimeout(Up())})}function ne(Gt){if(lt._transitionData)return ke(lt._transitionData._interruptCallbacks),Promise.resolve().then(function(){if($.redraw)return x.call("redraw",lt)}).then(function(){lt._transitioning=!1,lt._transitioningWithDuration=!1,lt.emit("plotly_transitioned",[])}).then(Gt)}function et(){if(lt._transitionData)return lt._transitioning=!1,Lt(lt._transitionData._interruptCallbacks)}var ct=[z.previousPromises,et,$.prepareFn,z.rehover,z.reselect,G],kt=d.syncOrAsync(ct,lt);return(!kt||!kt.then)&&(kt=Promise.resolve()),kt.then(function(){return lt})}z.doCalcdata=function(lt,ut){var $=L.list(lt),yt=lt._fullData,Lt=lt._fullLayout,ke,G,ne,et,ct=new Array(yt.length),kt=(lt.calcdata||[]).slice();for(lt.calcdata=ct,Lt._numBoxes=0,Lt._numViolins=0,Lt._violinScaleGroupStats={},lt._hmpixcount=0,lt._hmlumcount=0,Lt._piecolormap={},Lt._sunburstcolormap={},Lt._treemapcolormap={},Lt._iciclecolormap={},Lt._funnelareacolormap={},ne=0;ne<yt.length;ne++)if(Array.isArray(ut)&&ut.indexOf(ne)===-1){ct[ne]=kt[ne];continue}for(ne=0;ne<yt.length;ne++)ke=yt[ne],ke._arrayAttrs=w.findArrayAttributes(ke),ke._extremes={};var Gt=Lt._subplots.polar||[];for(ne=0;ne<Gt.length;ne++)$.push(Lt[Gt[ne]].radialaxis,Lt[Gt[ne]].angularaxis);for(var $t in Lt._colorAxes){var Ko=Lt[$t];Ko.cauto!==!1&&(delete Ko.cmin,delete Ko.cmax)}var Up=!1;function e0(f0){if(ke=yt[f0],G=ke._module,ke.visible===!0&&ke.transforms){if(G&&G.calc){var la=G.calc(lt,ke);la[0]&&la[0].t&&la[0].t._scene&&delete la[0].t._scene.dirty}for(et=0;et<ke.transforms.length;et++){var $o=ke.transforms[et];G=transformsRegistry[$o.type],G&&G.calcTransform&&(ke._hasCalcTransform=!0,Up=!0,G.calcTransform(lt,ke,$o))}}}function E0(f0,la){if(ke=yt[f0],G=ke._module,!!G.isContainer===la){var $o=[];if(ke.visible===!0&&ke._length!==0){delete ke._indexToPoints;var jt=ke.transforms||[];for(et=jt.length-1;et>=0;et--)if(jt[et].enabled){ke._indexToPoints=jt[et]._indexToPoints;break}G&&G.calc&&($o=G.calc(lt,ke))}(!Array.isArray($o)||!$o[0])&&($o=[{x:T,y:T}]),$o[0].t||($o[0].t={}),$o[0].trace=ke,ct[f0]=$o}}for(oa($,yt,Lt),ne=0;ne<yt.length;ne++)E0(ne,!0);for(ne=0;ne<yt.length;ne++)e0(ne);for(Up&&oa($,yt,Lt),ne=0;ne<yt.length;ne++)E0(ne,!0);for(ne=0;ne<yt.length;ne++)E0(ne,!1);jo(lt);var m0=xn($,lt);if(m0.length){for(Lt._numBoxes=0,Lt._numViolins=0,ne=0;ne<m0.length;ne++)E0(m0[ne],!0);for(ne=0;ne<m0.length;ne++)E0(m0[ne],!1);jo(lt)}x.getComponentMethod("fx","calc")(lt),x.getComponentMethod("errorbars","calc")(lt)};var Pt=/(total|sum|min|max|mean|geometric mean|median) (ascending|descending)/;function xn(lt,ut){var $=[],yt,Lt,ke,G,ne;function et(om,Rm,ci){var Hp=Rm._id.charAt(0);if(om==="histogram2dcontour"){var St=Rm._counterAxes[0],Ht=L.getFromId(ut,St),Sr=Hp==="x"||St==="x"&&Ht.type==="category",Rp=Hp==="y"||St==="y"&&Ht.type==="category";return function(Np,Jp){return Np===0||Jp===0||Sr&&Np===ci[Jp].length-1||Rp&&Jp===ci.length-1?-1:(Hp==="y"?Jp:Np)-1}}else return function(Np,Jp){return Hp==="y"?Jp:Np}}var ct={min:function(om){return d.aggNums(Math.min,null,om)},max:function(om){return d.aggNums(Math.max,null,om)},sum:function(om){return d.aggNums(function(Rm,ci){return Rm+ci},null,om)},total:function(om){return d.aggNums(function(Rm,ci){return Rm+ci},null,om)},mean:function(om){return d.mean(om)},"geometric mean":function(om){return d.geometricMean(om)},median:function(om){return d.median(om)}};function kt(om,Rm){return om[1]-Rm[1]}function Gt(om,Rm){return Rm[1]-om[1]}for(yt=0;yt<lt.length;yt++){var $t=lt[yt];if($t.type==="category"){var Ko=$t.categoryorder.match(Pt);if(Ko){var Up=Ko[1],e0=Ko[2],E0=$t._id.charAt(0),m0=E0==="x",f0=[];for(Lt=0;Lt<$t._categories.length;Lt++)f0.push([$t._categories[Lt],[]]);for(Lt=0;Lt<$t._traceIndices.length;Lt++){var la=$t._traceIndices[Lt],$o=ut._fullData[la];if($o.visible===!0){var jt=$o.type;x.traceIs($o,"histogram")&&(delete $o._xautoBinFinished,delete $o._yautoBinFinished);var Fp=jt==="splom",i0=jt==="scattergl",b0=ut.calcdata[la];for(ke=0;ke<b0.length;ke++){var O0=b0[ke],C0,I0;if(Fp){var V0=$o._axesDim[$t._id];if(!m0){var H0=$o._diag[V0][0];H0&&($t=ut._fullLayout[L.id2name(H0)])}var im=O0.trace.dimensions[V0].values;for(G=0;G<im.length;G++)for(C0=$t._categoriesMap[im[G]],ne=0;ne<O0.trace.dimensions.length;ne++)if(ne!==V0){var k0=O0.trace.dimensions[ne];f0[C0][1].push(k0.values[G])}}else if(i0){for(G=0;G<O0.t.x.length;G++)m0?(C0=O0.t.x[G],I0=O0.t.y[G]):(C0=O0.t.y[G],I0=O0.t.x[G]),f0[C0][1].push(I0);O0.t&&O0.t._scene&&delete O0.t._scene.dirty}else if(O0.hasOwnProperty("z")){I0=O0.z;var fm=et($o.type,$t,I0);for(G=0;G<I0.length;G++)for(ne=0;ne<I0[G].length;ne++)C0=fm(ne,G),C0+1&&f0[C0][1].push(I0[G][ne])}else for(C0=O0.p,C0===void 0&&(C0=O0[E0]),I0=O0.s,I0===void 0&&(I0=O0.v),I0===void 0&&(I0=m0?O0.y:O0.x),Array.isArray(I0)||(I0===void 0?I0=[]:I0=[I0]),G=0;G<I0.length;G++)f0[C0][1].push(I0[G])}}}$t._categoriesValue=f0;var Tm=[];for(Lt=0;Lt<f0.length;Lt++)Tm.push([f0[Lt][0],ct[Up](f0[Lt][1])]);Tm.sort(e0==="descending"?Gt:kt),$t._categoriesAggregatedValue=Tm,$t._initialCategories=Tm.map(function(om){return om[0]}),$=$.concat($t.sortByInitialCategories())}}}return $}function oa(lt,ut,$){var yt={};function Lt(et){et.clearCalc(),et.type==="multicategory"&&et.setupMultiCategory(ut),yt[et._id]=1}d.simpleMap(lt,Lt);for(var ke=$._axisMatchGroups||[],G=0;G<ke.length;G++)for(var ne in ke[G])yt[ne]||Lt($[L.id2name(ne)])}function jo(lt){var ut=lt._fullLayout,$=ut._visibleModules,yt={},Lt,ke,G;for(ke=0;ke<$.length;ke++){var ne=$[ke],et=ne.crossTraceCalc;if(et){var ct=ne.basePlotModule.name;yt[ct]?d.pushUnique(yt[ct],et):yt[ct]=[et]}}for(G in yt){var kt=yt[G],Gt=ut._subplots[G];if(Array.isArray(Gt))for(Lt=0;Lt<Gt.length;Lt++){var $t=Gt[Lt],Ko=G==="cartesian"?ut._plots[$t]:ut[$t];for(ke=0;ke<kt.length;ke++)kt[ke](lt,Ko,$t)}else for(ke=0;ke<kt.length;ke++)kt[ke](lt)}}z.rehover=function(lt){lt._fullLayout._rehover&&lt._fullLayout._rehover()},z.redrag=function(lt){lt._fullLayout._redrag&&lt._fullLayout._redrag()},z.reselect=function(lt){var ut=lt._fullLayout,$=(lt.layout||{}).selections,yt=ut._previousSelections;ut._previousSelections=$;var Lt=ut._reselect||JSON.stringify($)!==JSON.stringify(yt);x.getComponentMethod("selections","reselect")(lt,Lt)},z.generalUpdatePerTraceModule=function(lt,ut,$,yt){var Lt=ut.traceHash,ke={},G;for(G=0;G<$.length;G++){var ne=$[G],et=ne[0].trace;et.visible&&(ke[et.type]=ke[et.type]||[],ke[et.type].push(ne))}for(var ct in Lt)if(!ke[ct]){var kt=Lt[ct][0],Gt=kt[0].trace;Gt.visible=!1,ke[ct]=[kt]}for(var $t in ke){var Ko=ke[$t],Up=Ko[0][0].trace._module;Up.plot(lt,ut,d.filterVisible(Ko),yt)}ut.traceHash=ke},z.plotBasePlot=function(lt,ut,$,yt,Lt){var ke=x.getModule(lt),G=B(ut.calcdata,ke)[0];ke.plot(ut,G,yt,Lt)},z.cleanBasePlot=function(lt,ut,$,yt,Lt){var ke=Lt._has&&Lt._has(lt),G=$._has&&$._has(lt);ke&&!G&&Lt["_"+lt+"layer"].selectAll("g.trace").remove()}}),Mg=t(Ue=>{Ue.xmlns="http://www.w3.org/2000/xmlns/",Ue.svg="http://www.w3.org/2000/svg",Ue.xlink="http://www.w3.org/1999/xlink",Ue.svgAttrs={xmlns:Ue.svg,"xmlns:xlink":Ue.xlink}}),$1=t((Ue,ve)=>{ve.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}}),j1=t(Ue=>{var ve=l(),v=Re(),c=v.strTranslate,h=Mg(),_=$1().LINE_SPACING,y=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;Ue.convertToTspans=function(se,gt,xt){var Nt=se.text(),Rt=!se.attr("data-notex")&&gt&&gt._context.typesetMath&&typeof MathJax<"u"&&Nt.match(y),Pt=ve.select(se.node().parentNode);if(Pt.empty())return;var xn=se.attr("class")?se.attr("class").split(" ")[0]:"text";xn+="-math",Pt.selectAll("svg."+xn).remove(),Pt.selectAll("g."+xn+"-group").remove(),se.style("display",null).attr({"data-unformatted":Nt,"data-math":"N"});function oa(){Pt.empty()||(xn=se.attr("class")+"-math",Pt.select("svg."+xn).remove()),se.text("").style("white-space","pre");var jo=Ze(se.node(),Nt);jo&&se.style("pointer-events","all"),Ue.positionText(se),xt&&xt.call(se)}return Rt?(gt&&gt._promises||[]).push(new Promise(function(jo){se.style("display","none");var lt=parseInt(se.node().style.fontSize,10),ut={fontSize:lt};k(Rt[2],ut,function($,yt,Lt){Pt.selectAll("svg."+xn).remove(),Pt.selectAll("g."+xn+"-group").remove();var ke=$&&$.select("svg");if(!ke||!ke.node()){oa(),jo();return}var G=Pt.append("g").classed(xn+"-group",!0).attr({"pointer-events":"none","data-unformatted":Nt,"data-math":"Y"});G.node().appendChild(ke.node()),yt&&yt.node()&&ke.node().insertBefore(yt.node().cloneNode(!0),ke.node().firstChild);var ne=Lt.width,et=Lt.height;ke.attr({class:xn,height:et,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var ct=se.node().style.fill||"black",kt=ke.select("g");kt.attr({fill:ct,stroke:ct});var Gt=kt.node().getBoundingClientRect(),$t=Gt.width,Ko=Gt.height;($t>ne||Ko>et)&&(ke.style("overflow","hidden"),Gt=ke.node().getBoundingClientRect(),$t=Gt.width,Ko=Gt.height);var Up=+se.attr("x"),e0=+se.attr("y"),E0=lt||se.node().getBoundingClientRect().height,m0=-E0/4;if(xn[0]==="y")G.attr({transform:"rotate("+[-90,Up,e0]+")"+c(-$t/2,m0-Ko/2)});else if(xn[0]==="l")e0=m0-Ko/2;else if(xn[0]==="a"&&xn.indexOf("atitle")!==0)Up=0,e0=m0;else{var f0=se.attr("text-anchor");Up=Up-$t*(f0==="middle"?.5:f0==="end"?1:0),e0=e0+m0-Ko/2}ke.attr({x:Up,y:e0}),xt&&xt.call(se,G),jo(G)})})):oa(),se};var x=/(<|&lt;|&#60;)/g,w=/(>|&gt;|&#62;)/g;function A(se){return se.replace(x,"\\lt ").replace(w,"\\gt ")}var d=[["$","$"],["\\(","\\)"]];function k(se,gt,xt){var Nt=parseInt((MathJax.version||"").split(".")[0]);if(Nt!==2&&Nt!==3){v.warn("No MathJax version:",MathJax.version);return}var Rt,Pt,xn,oa,jo=function(){return Pt=v.extendDeepAll({},MathJax.Hub.config),xn=MathJax.Hub.processSectionDelay,MathJax.Hub.processSectionDelay!==void 0&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:d},displayAlign:"left"})},lt=function(){Pt=v.extendDeepAll({},MathJax.config),MathJax.config.tex||(MathJax.config.tex={}),MathJax.config.tex.inlineMath=d},ut=function(){if(Rt=MathJax.Hub.config.menuSettings.renderer,Rt!=="SVG")return MathJax.Hub.setRenderer("SVG")},$=function(){Rt=MathJax.config.startup.output,Rt!=="svg"&&(MathJax.config.startup.output="svg")},yt=function(){var ct="math-output-"+v.randstr({},64);oa=ve.select("body").append("div").attr({id:ct}).style({visibility:"hidden",position:"absolute","font-size":gt.fontSize+"px"}).text(A(se));var kt=oa.node();return Nt===2?MathJax.Hub.Typeset(kt):MathJax.typeset([kt])},Lt=function(){var ct=oa.select(Nt===2?".MathJax_SVG":".MathJax"),kt=!ct.empty()&&oa.select("svg").node();if(!kt)v.log("There was an error in the tex syntax.",se),xt();else{var Gt=kt.getBoundingClientRect(),$t;Nt===2?$t=ve.select("body").select("#MathJax_SVG_glyphs"):$t=ct.select("defs"),xt(ct,$t,Gt)}oa.remove()},ke=function(){if(Rt!=="SVG")return MathJax.Hub.setRenderer(Rt)},G=function(){Rt!=="svg"&&(MathJax.config.startup.output=Rt)},ne=function(){return xn!==void 0&&(MathJax.Hub.processSectionDelay=xn),MathJax.Hub.Config(Pt)},et=function(){MathJax.config=Pt};Nt===2?MathJax.Hub.Queue(jo,ut,yt,Lt,ke,ne):Nt===3&&(lt(),$(),MathJax.startup.defaultReady(),MathJax.startup.promise.then(function(){yt(),Lt(),G(),et()}))}var T={sup:"font-size:70%",sub:"font-size:70%",s:"text-decoration:line-through",u:"text-decoration:underline",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},L={sub:"0.3em",sup:"-0.6em"},j={sub:"-0.21em",sup:"0.42em"},P="​",N=["http:","https:","mailto:","",void 0,":"],O=Ue.NEWLINES=/(\r\n?|\n)/g,B=/(<[^<>]*>)/,S=/<(\/?)([^ >]*)(\s+(.*))?>/i,D=/<br(\s+.*)?>/i;Ue.BR_TAG_ALL=/<br(\s+.*)?>/gi;var z=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,H=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,Y=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,ht=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function Se(se,gt){if(!se)return null;var xt=se.match(gt),Nt=xt&&(xt[3]||xt[4]);return Nt&&Le(Nt)}var ie=/(^|;)\s*color:/;Ue.plainText=function(se,gt){gt=gt||{};for(var xt=gt.len!==void 0&&gt.len!==-1?gt.len:1/0,Nt=gt.allowedTags!==void 0?gt.allowedTags:["br"],Rt="...",Pt=Rt.length,xn=se.split(B),oa=[],jo="",lt=0,ut=0;ut<xn.length;ut++){var $=xn[ut],yt=$.match(S),Lt=yt&&yt[2].toLowerCase();if(Lt)Nt.indexOf(Lt)!==-1&&(oa.push($),jo=Lt);else{var ke=$.length;if(lt+ke<xt)oa.push($),lt+=ke;else if(lt<xt){var G=xt-lt;jo&&(jo!=="br"||G<=Pt||ke<=Pt)&&oa.pop(),xt>Pt?oa.push($.substr(0,G-Pt)+Rt):oa.push($.substr(0,G));break}jo=""}}return oa.join("")};var X={mu:"μ",amp:"&",lt:"<",gt:">",nbsp:" ",times:"×",plusmn:"±",deg:"°"},ft=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function Le(se){return se.replace(ft,function(gt,xt){var Nt;return xt.charAt(0)==="#"?Nt=nt(xt.charAt(1)==="x"?parseInt(xt.substr(2),16):parseInt(xt.substr(1),10)):Nt=X[xt],Nt||gt})}Ue.convertEntities=Le;function nt(se){if(!(se>1114111)){var gt=String.fromCodePoint;if(gt)return gt(se);var xt=String.fromCharCode;return se<=65535?xt(se):xt((se>>10)+55232,se%1024+56320)}}function Ze(se,gt){gt=gt.replace(O," ");var xt=!1,Nt=[],Rt,Pt=-1;function xn(){Pt++;var Ko=document.createElementNS(h.svg,"tspan");ve.select(Ko).attr({class:"line",dy:Pt*_+"em"}),se.appendChild(Ko),Rt=Ko;var Up=Nt;if(Nt=[{node:Ko}],Up.length>1)for(var e0=1;e0<Up.length;e0++)oa(Up[e0])}function oa(Ko){var Up=Ko.type,e0={},E0;if(Up==="a"){E0="a";var m0=Ko.target,f0=Ko.href,la=Ko.popup;f0&&(e0={"xlink:xlink:show":m0==="_blank"||m0.charAt(0)!=="_"?"new":"replace",target:m0,"xlink:xlink:href":f0},la&&(e0.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+la+'");return false;'))}else E0="tspan";Ko.style&&(e0.style=Ko.style);var $o=document.createElementNS(h.svg,E0);if(Up==="sup"||Up==="sub"){jo(Rt,P),Rt.appendChild($o);var jt=document.createElementNS(h.svg,"tspan");jo(jt,P),ve.select(jt).attr("dy",j[Up]),e0.dy=L[Up],Rt.appendChild($o),Rt.appendChild(jt)}else Rt.appendChild($o);ve.select($o).attr(e0),Rt=Ko.node=$o,Nt.push(Ko)}function jo(Ko,Up){Ko.appendChild(document.createTextNode(Up))}function lt(Ko){if(Nt.length===1){v.log("Ignoring unexpected end tag </"+Ko+">.",gt);return}var Up=Nt.pop();Ko!==Up.type&&v.log("Start tag <"+Up.type+"> doesnt match end tag <"+Ko+">. Pretending it did match.",gt),Rt=Nt[Nt.length-1].node}var ut=D.test(gt);ut?xn():(Rt=se,Nt=[{node:se}]);for(var $=gt.split(B),yt=0;yt<$.length;yt++){var Lt=$[yt],ke=Lt.match(S),G=ke&&ke[2].toLowerCase(),ne=T[G];if(G==="br")xn();else if(ne===void 0)jo(Rt,Le(Lt));else if(ke[1])lt(G);else{var et=ke[4],ct={type:G},kt=Se(et,z);if(kt?(kt=kt.replace(ie,"$1 fill:"),ne&&(kt+=";"+ne)):ne&&(kt=ne),kt&&(ct.style=kt),G==="a"){xt=!0;var Gt=Se(et,H);if(Gt){var $t=rt(Gt);$t&&(ct.href=$t,ct.target=Se(et,Y)||"_blank",ct.popup=Se(et,ht))}}oa(ct)}}return xt}function rt(se){var gt=encodeURI(decodeURI(se)),xt=document.createElement("a"),Nt=document.createElement("a");xt.href=se,Nt.href=gt;var Rt=xt.protocol,Pt=Nt.protocol;return N.indexOf(Rt)!==-1&&N.indexOf(Pt)!==-1?gt:""}Ue.sanitizeHTML=function(se){se=se.replace(O," ");for(var gt=document.createElement("p"),xt=gt,Nt=[],Rt=se.split(B),Pt=0;Pt<Rt.length;Pt++){var xn=Rt[Pt],oa=xn.match(S),jo=oa&&oa[2].toLowerCase();if(jo in T)if(oa[1])Nt.length&&(xt=Nt.pop());else{var lt=oa[4],ut=Se(lt,z),$=ut?{style:ut}:{};if(jo==="a"){var yt=Se(lt,H);if(yt){var Lt=rt(yt);if(Lt){$.href=Lt;var ke=Se(lt,Y);ke&&($.target=ke)}}}var G=document.createElement(jo);xt.appendChild(G),ve.select(G).attr($),xt=G,Nt.push(G)}else xt.appendChild(document.createTextNode(Le(xn)))}var ne="innerHTML";return gt[ne]},Ue.lineCount=function(se){return se.selectAll("tspan.line").size()||1},Ue.positionText=function(se,gt,xt){return se.each(function(){var Nt=ve.select(this);function Rt(oa,jo){return jo===void 0?(jo=Nt.attr(oa),jo===null&&(Nt.attr(oa,0),jo=0)):Nt.attr(oa,jo),jo}var Pt=Rt("x",gt),xn=Rt("y",xt);this.nodeName==="text"&&Nt.selectAll("tspan.line").attr({x:Pt,y:xn})})};function dt(se,gt,xt){var Nt=xt.horizontalAlign,Rt=xt.verticalAlign||"top",Pt=se.node().getBoundingClientRect(),xn=gt.node().getBoundingClientRect(),oa,jo,lt;return Rt==="bottom"?jo=function(){return Pt.bottom-oa.height}:Rt==="middle"?jo=function(){return Pt.top+(Pt.height-oa.height)/2}:jo=function(){return Pt.top},Nt==="right"?lt=function(){return Pt.right-oa.width}:Nt==="center"?lt=function(){return Pt.left+(Pt.width-oa.width)/2}:lt=function(){return Pt.left},function(){oa=this.node().getBoundingClientRect();var ut=lt()-xn.left,$=jo()-xn.top,yt=xt.gd||{};if(xt.gd){yt._fullLayout._calcInverseTransform(yt);var Lt=v.apply3DTransform(yt._fullLayout._invTransform)(ut,$);ut=Lt[0],$=Lt[1]}return this.style({top:$+"px",left:ut+"px","z-index":1e3}),this}}var pt="1px ";Ue.makeTextShadow=function(se){var gt=pt,xt=pt,Nt=pt;return gt+xt+Nt+se+", -"+gt+"-"+xt+Nt+se+", "+gt+"-"+xt+Nt+se+", -"+gt+xt+Nt+se},Ue.makeEditable=function(se,gt){var xt=gt.gd,Nt=gt.delegate,Rt=ve.dispatch("edit","input","cancel"),Pt=Nt||se;if(se.style({"pointer-events":Nt?"none":"all"}),se.size()!==1)throw new Error("boo");function xn(){jo(),se.style({opacity:0});var lt=Pt.attr("class"),ut;lt?ut="."+lt.split(" ")[0]+"-math-group":ut="[class*=-math-group]",ut&&ve.select(se.node().parentNode).select(ut).style({opacity:0})}function oa(lt){var ut=lt.node(),$=document.createRange();$.selectNodeContents(ut);var yt=window.getSelection();yt.removeAllRanges(),yt.addRange($),ut.focus()}function jo(){var lt=ve.select(xt),ut=lt.select(".svg-container"),$=ut.append("div"),yt=se.node().style,Lt=parseFloat(yt.fontSize||12),ke=gt.text;ke===void 0&&(ke=se.attr("data-unformatted")),$.classed("plugin-editable editable",!0).style({position:"absolute","font-family":yt.fontFamily||"Arial","font-size":Lt,color:gt.fill||yt.fill||"black",opacity:1,"background-color":gt.background||"transparent",outline:"#ffffff33 1px solid",margin:[-Lt/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(ke).call(dt(se,ut,gt)).on("blur",function(){xt._editing=!1,se.text(this.textContent).style({opacity:1});var G=ve.select(this).attr("class"),ne;G?ne="."+G.split(" ")[0]+"-math-group":ne="[class*=-math-group]",ne&&ve.select(se.node().parentNode).select(ne).style({opacity:0});var et=this.textContent;ve.select(this).transition().duration(0).remove(),ve.select(document).on("mouseup",null),Rt.edit.call(se,et)}).on("focus",function(){var G=this;xt._editing=!0,ve.select(document).on("mouseup",function(){if(ve.event.target===G)return!1;document.activeElement===$.node()&&$.node().blur()})}).on("keyup",function(){ve.event.which===27?(xt._editing=!1,se.style({opacity:1}),ve.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),Rt.cancel.call(se,this.textContent)):(Rt.input.call(se,this.textContent),ve.select(this).call(dt(se,ut,gt)))}).on("keydown",function(){ve.event.which===13&&this.blur()}).call(oa)}return gt.immediate?xn():Pt.on("click",xn),ve.rebind(se,Rt,"on")}}),ng=t((Ue,ve)=>{var v=l(),c=wt(),h=E(),_=Re(),y=sa(),x=kp().isValid;function w(O,B,S){var D=B?_.nestedProperty(O,B).get()||{}:O,z=D[S||"color"];z&&z._inputArray&&(z=z._inputArray);var H=!1;if(_.isArrayOrTypedArray(z)){for(var Y=0;Y<z.length;Y++)if(h(z[Y])){H=!0;break}}return _.isPlainObject(D)&&(H||D.showscale===!0||h(D.cmin)&&h(D.cmax)||x(D.colorscale)||_.isPlainObject(D.colorbar))}var A=["showscale","autocolorscale","colorscale","reversescale","colorbar"],d=["min","max","mid","auto"];function k(O){var B=O._colorAx,S=B||O,D={},z,H,Y;for(H=0;H<A.length;H++)Y=A[H],D[Y]=S[Y];if(B)for(z="c",H=0;H<d.length;H++)Y=d[H],D[Y]=S["c"+Y];else{var ht;for(H=0;H<d.length;H++){if(Y=d[H],ht="c"+Y,ht in S){D[Y]=S[ht];continue}ht="z"+Y,ht in S&&(D[Y]=S[ht])}z=ht.charAt(0)}return D._sync=function(Se,ie){var X=d.indexOf(Se)!==-1?z+Se:Se;S[X]=S["_"+X]=ie},D}function T(O){for(var B=k(O),S=B.min,D=B.max,z=B.reversescale?L(B.colorscale):B.colorscale,H=z.length,Y=new Array(H),ht=new Array(H),Se=0;Se<H;Se++){var ie=z[Se];Y[Se]=S+ie[0]*(D-S),ht[Se]=ie[1]}return{domain:Y,range:ht}}function L(O){for(var B=O.length,S=new Array(B),D=B-1,z=0;D>=0;D--,z++){var H=O[D];S[z]=[1-H[0],H[1]]}return S}function j(O,B){B=B||{};for(var S=O.domain,D=O.range,z=D.length,H=new Array(z),Y=0;Y<z;Y++){var ht=c(D[Y]).toRgb();H[Y]=[ht.r,ht.g,ht.b,ht.a]}var Se=v.scale.linear().domain(S).range(H).clamp(!0),ie=B.noNumericCheck,X=B.returnArray,ft;return ie&&X?ft=Se:ie?ft=function(Le){return N(Se(Le))}:X?ft=function(Le){return h(Le)?Se(Le):c(Le).isValid()?Le:y.defaultLine}:ft=function(Le){return h(Le)?N(Se(Le)):c(Le).isValid()?Le:y.defaultLine},ft.domain=Se.domain,ft.range=function(){return D},ft}function P(O,B){return j(T(O),B)}function N(O){var B={r:O[0],g:O[1],b:O[2],a:O[3]};return c(B).toRgbString()}ve.exports={hasColorscale:w,extractOpts:k,extractScale:T,flipScale:L,makeColorScaleFunc:j,makeColorScaleFuncFromTrace:P}}),zv=t((Ue,ve)=>{var v=Sg(),c=v.FORMAT_LINK,h=v.DATE_FORMAT_LINK;function _(w,A){return{valType:"string",dflt:"",editType:"none",description:(A?y:x)("hover text",w)+["By default the values are formatted using "+(A?"generic number format":"`"+w+"axis.hoverformat`")+"."].join(" ")}}function y(w,A){return["Sets the "+w+" formatting rule"+(A?"for `"+A+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+c+"."].join(" ")}function x(w,A){return y(w,A)+[" And for dates see: "+h+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}ve.exports={axisHoverFormat:_,descriptionOnlyNumbers:y,descriptionWithDates:x}}),o0=t((Ue,ve)=>{var v=Ut(),c=zp(),h=h1().dash,_=bt().extendFlat,y=Nm().templatedArray;um().templateFormatStringDescription;var x=zv().descriptionWithDates,w=M().ONEDAY,A=jm(),d=A.HOUR_PATTERN,k=A.WEEKDAY_PATTERN,T={valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}},L=_({},T,{values:T.values.slice().concat(["sync"])});function j(ie){return{valType:"integer",min:0,dflt:ie?5:0,editType:"ticks"}}var P={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},N={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},O={valType:"data_array",editType:"ticks"},B={valType:"enumerated",values:["outside","inside",""],editType:"ticks"};function S(ie){var X={valType:"number",min:0,editType:"ticks"};return ie||(X.dflt=5),X}function D(ie){var X={valType:"number",min:0,editType:"ticks"};return ie||(X.dflt=1),X}var z={valType:"color",dflt:c.defaultLine,editType:"ticks"},H={valType:"color",dflt:c.lightLine,editType:"ticks"};function Y(ie){var X={valType:"number",min:0,editType:"ticks"};return ie||(X.dflt=1),X}var ht=_({},h,{editType:"ticks"}),Se={valType:"boolean",editType:"ticks"};ve.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:c.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:v({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed","min reversed","max reversed","min","max"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},autorangeoptions:{minallowed:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},maxallowed:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},clipmin:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},clipmax:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},include:{valType:"any",arrayOk:!0,editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},editType:"plot"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},minallowed:{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},maxallowed:{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},modebardisable:{valType:"flaglist",flags:["autoscale","zoominout"],extras:["none"],dflt:"none",editType:"modebar"},insiderange:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},scaleanchor:{valType:"enumerated",values:[A.idRegex.x.toString(),A.idRegex.y.toString(),!1],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[A.idRegex.x.toString(),A.idRegex.y.toString()],editType:"calc"},rangebreaks:y("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[k,d,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:w},editType:"calc"}),tickmode:L,nticks:j(),tick0:P,dtick:N,ticklabelstep:{valType:"integer",min:1,dflt:1,editType:"ticks"},tickvals:O,ticktext:{valType:"data_array",editType:"ticks"},ticks:B,tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},ticklabelshift:{valType:"integer",dflt:0,editType:"ticks"},ticklabelstandoff:{valType:"integer",dflt:0,editType:"ticks"},ticklabelindex:{valType:"integer",arrayOk:!0,editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:S(),tickwidth:D(),tickcolor:z,showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},labelalias:{valType:"any",dflt:!1,editType:"ticks"},automargin:{valType:"flaglist",flags:["height","width","left","right","top","bottom"],extras:[!0,!1],dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:_({},h,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:v({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},autotickangles:{valType:"info_array",freeLength:!0,items:{valType:"angle"},dflt:[0,30,90],editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B","SI extended"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:x("tick label")},tickformatstops:y("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:x("hover text")},unifiedhovertitle:{text:{valType:"string",dflt:"",editType:"none"},editType:"none"},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:c.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:Se,gridcolor:H,gridwidth:Y(),griddash:ht,zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:c.defaultLine,editType:"ticks"},zerolinelayer:{valType:"enumerated",values:["above traces","below traces"],dflt:"below traces",editType:"plot"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:c.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",A.idRegex.x.toString(),A.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",A.idRegex.x.toString(),A.idRegex.y.toString()],editType:"plot"},minor:{tickmode:T,nticks:j("minor"),tick0:P,dtick:N,tickvals:O,ticks:B,ticklen:S("minor"),tickwidth:D("minor"),tickcolor:z,gridcolor:H,gridwidth:Y("minor"),griddash:ht,showgrid:Se,editType:"ticks"},minorloglabels:{valType:"enumerated",values:["small digits","complete","none"],dflt:"small digits",editType:"calc"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},autoshift:{valType:"boolean",dflt:!1,editType:"plot"},shift:{valType:"number",editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","geometric mean ascending","geometric mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc"}}),p=t((Ue,ve)=>{var v=o0(),c=Ut(),h=bt().extendFlat,_=Um().overrideAll;ve.exports=_({orientation:{valType:"enumerated",values:["h","v"],dflt:"v"},thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number"},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},xanchor:{valType:"enumerated",values:["left","center","right"]},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number"},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},ypad:{valType:"number",min:0,dflt:10},outlinecolor:v.linecolor,outlinewidth:v.linewidth,bordercolor:v.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:v.minor.tickmode,nticks:v.nticks,tick0:v.tick0,dtick:v.dtick,tickvals:v.tickvals,ticktext:v.ticktext,ticks:h({},v.ticks,{dflt:""}),ticklabeloverflow:h({},v.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside"},ticklen:v.ticklen,tickwidth:v.tickwidth,tickcolor:v.tickcolor,ticklabelstep:v.ticklabelstep,showticklabels:v.showticklabels,labelalias:v.labelalias,tickfont:c({}),tickangle:v.tickangle,tickformat:v.tickformat,tickformatstops:v.tickformatstops,tickprefix:v.tickprefix,showtickprefix:v.showtickprefix,ticksuffix:v.ticksuffix,showticksuffix:v.showticksuffix,separatethousands:v.separatethousands,exponentformat:v.exponentformat,minexponent:v.minexponent,showexponent:v.showexponent,title:{text:{valType:"string"},font:c({}),side:{valType:"enumerated",values:["right","top","bottom"]}}},"colorbars","from-root")}),R=t((Ue,ve)=>{var v=p(),c=ae().counter,h=ey(),_=kp().scales;h(_);function y(x){return"`"+x+"`"}ve.exports=function(x,w){x=x||"",w=w||{};var A=w.cLetter||"c";"onlyIfNumerical"in w&&w.onlyIfNumerical;var d="noScale"in w?w.noScale:x==="marker.line",k="showScaleDflt"in w?w.showScaleDflt:A==="z",T=typeof w.colorscaleDflt=="string"?_[w.colorscaleDflt]:null,L=w.editTypeOverride||"",j=x?x+".":"",P;"colorAttr"in w?(P=w.colorAttr,w.colorAttr):(P={z:"z",c:"color"}[A],""+y(j+P));var N=A+"auto",O=A+"min",B=A+"max",S=A+"mid",D={};D[O]=D[B]=void 0;var z={};z[N]=!1;var H={};return P==="color"&&(H.color={valType:"color",arrayOk:!0,editType:L||"style"},w.anim&&(H.color.anim=!0)),H[N]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:D},H[O]={valType:"number",dflt:null,editType:L||"plot",impliedEdits:z},H[B]={valType:"number",dflt:null,editType:L||"plot",impliedEdits:z},H[S]={valType:"number",dflt:null,editType:"calc",impliedEdits:D},H.colorscale={valType:"colorscale",editType:"calc",dflt:T,impliedEdits:{autocolorscale:!1}},H.autocolorscale={valType:"boolean",dflt:w.autoColorDflt!==!1,editType:"calc",impliedEdits:{colorscale:void 0}},H.reversescale={valType:"boolean",dflt:!1,editType:"plot"},d||(H.showscale={valType:"boolean",dflt:k,editType:"calc"},H.colorbar=v),w.noColorAxis||(H.coloraxis={valType:"subplotid",regex:c("coloraxis"),dflt:null,editType:"calc"}),H}}),W=t((Ue,ve)=>{var v=bt().extendFlat,c=R(),h=kp().scales;ve.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:h.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:h.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:h.RdBu,editType:"calc"}},coloraxis:v({_isSubplotObj:!0,editType:"calc"},c("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}}),J=t((Ue,ve)=>{var v=Re();ve.exports=function(c){return v.isPlainObject(c.colorbar)}}),Et=t(Ue=>{var ve=E(),v=Re(),c=M(),h=c.ONEDAY,_=c.ONEWEEK;Ue.dtick=function(y,x){var w=x==="log",A=x==="date",d=x==="category",k=A?h:1;if(!y)return k;if(ve(y))return y=Number(y),y<=0?k:d?Math.max(1,Math.round(y)):A?Math.max(.1,y):y;if(typeof y!="string"||!(A||w))return k;var T=y.charAt(0),L=y.substr(1);return L=ve(L)?Number(L):0,L<=0||!(A&&T==="M"&&L===Math.round(L)||w&&T==="L"||w&&T==="D"&&(L===1||L===2))?k:y},Ue.tick0=function(y,x,w,A){if(x==="date")return v.cleanDate(y,v.dateTick0(w,A%_===0?1:0));if(!(A==="D1"||A==="D2"))return ve(y)?Number(y):0}}),tt=t((Ue,ve)=>{var v=Et(),c=Re().isArrayOrTypedArray,h=Z().isTypedArraySpec,_=Z().decodeTypedArraySpec;ve.exports=function(y,x,w,A,d){d||(d={});var k=d.isMinor,T=k?y.minor||{}:y,L=k?x.minor:x,j=k?"minor.":"";function P(Y){var ht=T[Y];return h(ht)&&(ht=_(ht)),ht!==void 0?ht:(L._template||{})[Y]}var N=P("tick0"),O=P("dtick"),B=P("tickvals"),S=c(B)?"array":O?"linear":"auto",D=w(j+"tickmode",S);if(D==="auto"||D==="sync")w(j+"nticks");else if(D==="linear"){var z=L.dtick=v.dtick(O,A);L.tick0=v.tick0(N,A,x.calendar,z)}else if(A!=="multicategory"){var H=w(j+"tickvals");H===void 0?L.tickmode="auto":k||w("ticktext")}}}),Dt=t((Ue,ve)=>{var v=Re(),c=o0();ve.exports=function(h,_,y,x){var w=x.isMinor,A=w?h.minor||{}:h,d=w?_.minor:_,k=w?c.minor:c,T=w?"minor.":"",L=v.coerce2(A,d,k,"ticklen",w?(_.ticklen||5)*.6:void 0),j=v.coerce2(A,d,k,"tickwidth",w?_.tickwidth||1:void 0),P=v.coerce2(A,d,k,"tickcolor",(w?_.tickcolor:void 0)||d.color),N=y(T+"ticks",!w&&x.outerTicks||L||j||P?"outside":"");N||(delete d.ticklen,delete d.tickwidth,delete d.tickcolor)}}),It=t((Ue,ve)=>{ve.exports=function(v){var c=["showexponent","showtickprefix","showticksuffix"],h=c.filter(function(y){return v[y]!==void 0}),_=function(y){return v[y]===v[h[0]]};if(h.every(_)||h.length===1)return v[h[0]]}}),Mt=t((Ue,ve)=>{var v=Re(),c=Nm();ve.exports=function(h,_,y){var x=y.name,w=y.inclusionAttr||"visible",A=_[x],d=v.isArrayOrTypedArray(h[x])?h[x]:[],k=_[x]=[],T=c.arrayTemplater(_,x,w),L,j;for(L=0;L<d.length;L++){var P=d[L];v.isPlainObject(P)?j=T.newItem(P):(j=T.newItem({}),j[w]=!1),j._index=L,j[w]!==!1&&y.handleItemDefaults(P,j,_,y),k.push(j)}var N=T.defaultItems();for(L=0;L<N.length;L++)j=N[L],j._index=k.length,y.handleItemDefaults({},j,_,y,{}),k.push(j);if(v.isArrayOrTypedArray(A)){var O=Math.min(A.length,k.length);for(L=0;L<O;L++)v.relinkPrivateKeys(k[L],A[L])}return k}}),Wt=t((Ue,ve)=>{var v=Re(),c=sa().contrast,h=o0(),_=It(),y=Mt();ve.exports=function(w,A,d,k,T){T||(T={});var L=d("labelalias");v.isPlainObject(L)||delete A.labelalias;var j=_(w),P=d("showticklabels");if(P){T.noTicklabelshift||d("ticklabelshift"),T.noTicklabelstandoff||d("ticklabelstandoff");var N=T.font||{},O=A.color,B=A.ticklabelposition||"",S=B.indexOf("inside")!==-1?c(T.bgColor):O&&O!==h.color.dflt?O:N.color;if(v.coerceFont(d,"tickfont",N,{overrideDflt:{color:S}}),!T.noTicklabelstep&&k!=="multicategory"&&k!=="log"&&d("ticklabelstep"),!T.noAng){var D=d("tickangle");!T.noAutotickangles&&D==="auto"&&d("autotickangles")}if(k!=="category"){var z=d("tickformat");y(w,A,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:x}),A.tickformatstops.length||delete A.tickformatstops,!T.noExp&&!z&&k!=="date"&&(d("showexponent",j),d("exponentformat"),d("minexponent"),d("separatethousands"))}!T.noMinorloglabels&&k==="log"&&d("minorloglabels")}};function x(w,A){function d(T,L){return v.coerce(w,A,h.tickformatstops,T,L)}var k=d("enabled");k&&(d("dtickrange"),d("value"))}}),Yt=t((Ue,ve)=>{var v=It();ve.exports=function(c,h,_,y,x){x||(x={});var w=x.tickSuffixDflt,A=v(c),d=_("tickprefix");d&&_("showtickprefix",A);var k=_("ticksuffix",w);k&&_("showticksuffix",A)}}),Zo=t((Ue,ve)=>{var v=Re(),c=Nm(),h=tt(),_=Dt(),y=Wt(),x=Yt(),w=p();ve.exports=function(A,d,k){var T=c.newContainer(d,"colorbar"),L=A.colorbar||{};function j(se,gt){return v.coerce(L,T,w,se,gt)}var P=k.margin||{t:0,b:0,l:0,r:0},N=k.width-P.l-P.r,O=k.height-P.t-P.b,B=j("orientation"),S=B==="v",D=j("thicknessmode");j("thickness",D==="fraction"?30/(S?N:O):30);var z=j("lenmode");j("len",z==="fraction"?1:S?O:N);var H=j("yref"),Y=j("xref"),ht=H==="paper",Se=Y==="paper",ie,X,ft,Le="left";S?(ft="middle",Le=Se?"left":"right",ie=Se?1.02:1,X=.5):(ft=ht?"bottom":"top",Le="center",ie=.5,X=ht?1.02:1),v.coerce(L,T,{x:{valType:"number",min:Se?-2:0,max:Se?3:1,dflt:ie}},"x"),v.coerce(L,T,{y:{valType:"number",min:ht?-2:0,max:ht?3:1,dflt:X}},"y"),j("xanchor",Le),j("xpad"),j("yanchor",ft),j("ypad"),v.noneOrAll(L,T,["x","y"]),j("outlinecolor"),j("outlinewidth"),j("bordercolor"),j("borderwidth"),j("bgcolor");var nt=v.coerce(L,T,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:S?["outside","inside","outside top","inside top","outside bottom","inside bottom"]:["outside","inside","outside left","inside left","outside right","inside right"]}},"ticklabelposition");j("ticklabeloverflow",nt.indexOf("inside")!==-1?"hide past domain":"hide past div"),h(L,T,j,"linear");var Ze=k.font,rt={noAutotickangles:!0,noTicklabelshift:!0,noTicklabelstandoff:!0,outerTicks:!1,font:Ze};nt.indexOf("inside")!==-1&&(rt.bgColor="black"),x(L,T,j,"linear",rt),y(L,T,j,"linear",rt),_(L,T,j,"linear",rt),j("title.text",k._dfltTitle.colorbar);var dt=T.showticklabels?T.tickfont:Ze,pt=v.extendFlat({},Ze,{family:dt.family,size:v.bigFont(dt.size)});v.coerceFont(j,"title.font",pt),j("title.side",S?"top":"right")}}),wi=t((Ue,ve)=>{var v=E(),c=Re(),h=J(),_=Zo(),y=kp().isValid,x=p1().traceIs;function w(A,d){var k=d.slice(0,d.length-1);return d?c.nestedProperty(A,k).get()||{}:A}ve.exports=function A(d,k,T,L,j){var P=j.prefix,N=j.cLetter,O="_module"in k,B=w(d,P),S=w(k,P),D=w(k._template||{},P)||{},z=function(){return delete d.coloraxis,delete k.coloraxis,A(d,k,T,L,j)};if(O){var H=T._colorAxes||{},Y=L(P+"coloraxis");if(Y){var ht=x(k,"contour")&&c.nestedProperty(k,"contours.coloring").get()||"heatmap",Se=H[Y];Se?(Se[2].push(z),Se[0]!==ht&&(Se[0]=!1,c.warn(["Ignoring coloraxis:",Y,"setting","as it is linked to incompatible colorscales."].join(" ")))):H[Y]=[ht,k,[z]];return}}var ie=B[N+"min"],X=B[N+"max"],ft=v(ie)&&v(X)&&ie<X,Le=L(P+N+"auto",!ft);Le?L(P+N+"mid"):(L(P+N+"min"),L(P+N+"max"));var nt=B.colorscale,Ze=D.colorscale,rt;if(nt!==void 0&&(rt=!y(nt)),Ze!==void 0&&(rt=!y(Ze)),L(P+"autocolorscale",rt),L(P+"colorscale"),L(P+"reversescale"),P!=="marker.line."){var dt;P&&O&&(dt=h(B));var pt=L(P+"showscale",dt);pt&&(P&&D&&(S._template=D),_(B,S,T))}}}),aa=t((Ue,ve)=>{var v=Re(),c=Nm(),h=W(),_=wi();ve.exports=function(y,x){function w(N,O){return v.coerce(y,x,h,N,O)}w("colorscale.sequential"),w("colorscale.sequentialminus"),w("colorscale.diverging");var A=x._colorAxes,d,k;function T(N,O){return v.coerce(d,k,h.coloraxis,N,O)}for(var L in A){var j=A[L];if(j[0])d=y[L]||{},k=c.newContainer(x,L,"coloraxis"),k._name=L,_(d,k,x,T,{prefix:"",cLetter:"c"});else{for(var P=0;P<j[2].length;P++)j[2][P]();delete x._colorAxes[L]}}}}),Yo=t((Ue,ve)=>{var v=Re(),c=ng().hasColorscale,h=ng().extractOpts;ve.exports=function(_,y){function x(j,P){var N=j["_"+P];N!==void 0&&(j[P]=N)}function w(j,P){var N=P.container?v.nestedProperty(j,P.container).get():j;if(N)if(N.coloraxis)N._colorAx=y[N.coloraxis];else{var O=h(N),B=O.auto;(B||O.min===void 0)&&x(N,P.min),(B||O.max===void 0)&&x(N,P.max),O.autocolorscale&&x(N,"colorscale")}}for(var A=0;A<_.length;A++){var d=_[A],k=d._module.colorbar;if(k)if(Array.isArray(k))for(var T=0;T<k.length;T++)w(d,k[T]);else w(d,k);c(d,"marker.line")&&w(d,{container:"marker.line",min:"cmin",max:"cmax"})}for(var L in y._colorAxes)w(y[L],{min:"cmin",max:"cmax"})}}),Ci=t((Ue,ve)=>{var v=E(),c=Re(),h=ng().extractOpts;ve.exports=function(_,y,x){var w=_._fullLayout,A=x.vals,d=x.containerStr,k=d?c.nestedProperty(y,d).get():y,T=h(k),L=T.auto!==!1,j=T.min,P=T.max,N=T.mid,O=function(){return c.aggNums(Math.min,null,A)},B=function(){return c.aggNums(Math.max,null,A)};if(j===void 0?j=O():L&&(k._colorAx&&v(j)?j=Math.min(j,O()):j=O()),P===void 0?P=B():L&&(k._colorAx&&v(P)?P=Math.max(P,B()):P=B()),L&&N!==void 0&&(P-N>N-j?j=N-(P-N):P-N<N-j&&(P=N+(N-j))),j===P&&(j-=.5,P+=.5),T._sync("min",j),T._sync("max",P),T.autocolorscale){var S;j*P<0?S=w.colorscale.diverging:j>=0?S=w.colorscale.sequential:S=w.colorscale.sequentialminus,T._sync("colorscale",S)}}}),Ip=t((Ue,ve)=>{var v=kp(),c=ng();ve.exports={moduleType:"component",name:"colorscale",attributes:R(),layoutAttributes:W(),supplyLayoutDefaults:aa(),handleDefaults:wi(),crossTraceDefaults:Yo(),calc:Ci(),scales:v.scales,defaultScale:v.defaultScale,getScale:v.get,isValidScale:v.isValid,hasColorscale:c.hasColorscale,extractOpts:c.extractOpts,extractScale:c.extractScale,flipScale:c.flipScale,makeColorScaleFunc:c.makeColorScaleFunc,makeColorScaleFuncFromTrace:c.makeColorScaleFuncFromTrace}}),$p=t((Ue,ve)=>{var v=Re(),c=Z().isTypedArraySpec;ve.exports={hasLines:function(h){return h.visible&&h.mode&&h.mode.indexOf("lines")!==-1},hasMarkers:function(h){return h.visible&&(h.mode&&h.mode.indexOf("markers")!==-1||h.type==="splom")},hasText:function(h){return h.visible&&h.mode&&h.mode.indexOf("text")!==-1},isBubble:function(h){var _=h.marker;return v.isPlainObject(_)&&(v.isArrayOrTypedArray(_.size)||c(_.size))}}}),Qp=t((Ue,ve)=>{var v=E();ve.exports=function(c,h){h||(h=2);var _=c.marker,y=_.sizeref||1,x=_.sizemin||0,w=_.sizemode==="area"?function(A){return Math.sqrt(A/y)}:function(A){return A/y};return function(A){var d=w(A/h);return v(d)&&d>0?Math.max(d,x):0}}}),T0=t(Ue=>{var ve=Re();Ue.getSubplot=function(x){return x.subplot||x.xaxis+x.yaxis||x.geo},Ue.isTraceInSubplots=function(x,w){if(x.type==="splom"){for(var A=x.xaxes||[],d=x.yaxes||[],k=0;k<A.length;k++)for(var T=0;T<d.length;T++)if(w.indexOf(A[k]+d[T])!==-1)return!0;return!1}return w.indexOf(Ue.getSubplot(x))!==-1},Ue.flat=function(x,w){for(var A=new Array(x.length),d=0;d<x.length;d++)A[d]=w;return A},Ue.p2c=function(x,w){for(var A=new Array(x.length),d=0;d<x.length;d++)A[d]=x[d].p2c(w);return A},Ue.getDistanceFunction=function(x,w,A,d){return x==="closest"?d||Ue.quadrature(w,A):x.charAt(0)==="x"?w:A},Ue.getClosest=function(x,w,A){if(A.index!==!1)A.index>=0&&A.index<x.length?A.distance=0:A.index=!1;else for(var d=1/0,k=x.length,T=0;T<k;T++)d=w(x[T]),d<=A.distance&&(A.index=T,A.distance=d);return A},Ue.inbox=function(x,w,A){return x*w<0||x===0?A:1/0},Ue.quadrature=function(x,w){return function(A){var d=x(A),k=w(A);return Math.sqrt(d*d+k*k)}},Ue.makeEventData=function(x,w,A){var d="index"in x?x.index:x.pointNumber,k={data:w._input,fullData:w,curveNumber:w.index,pointNumber:d};if(w._indexToPoints){var T=w._indexToPoints[d];T.length===1?k.pointIndex=T[0]:k.pointIndices=T}else k.pointIndex=d;return w._module.eventData?k=w._module.eventData(k,x,w,A,d):("xVal"in x?k.x=x.xVal:"x"in x&&(k.x=x.x),"yVal"in x?k.y=x.yVal:"y"in x&&(k.y=x.y),x.xa&&(k.xaxis=x.xa),x.ya&&(k.yaxis=x.ya),x.zLabelVal!==void 0&&(k.z=x.zLabelVal)),Ue.appendArrayPointValue(k,w,d),k},Ue.appendArrayPointValue=function(x,w,A){var d=w._arrayAttrs;if(d)for(var k=0;k<d.length;k++){var T=d[k],L=c(T);if(x[L]===void 0){var j=ve.nestedProperty(w,T).get(),P=h(j,A);P!==void 0&&(x[L]=P)}}},Ue.appendArrayMultiPointValues=function(x,w,A){var d=w._arrayAttrs;if(d)for(var k=0;k<d.length;k++){var T=d[k],L=c(T);if(x[L]===void 0){for(var j=ve.nestedProperty(w,T).get(),P=new Array(A.length),N=0;N<A.length;N++)P[N]=h(j,A[N]);x[L]=P}}};var v={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function c(x){return v[x]||x}function h(x,w){if(Array.isArray(w)){if(Array.isArray(x)&&Array.isArray(x[w[0]]))return x[w[0]][w[1]]}else return x[w]}var _={x:!0,y:!0},y={"x unified":!0,"y unified":!0};Ue.isUnifiedHover=function(x){return typeof x!="string"?!1:!!y[x]},Ue.isXYhover=function(x){return typeof x!="string"?!1:!!_[x]}}),g0=t((Ue,ve)=>{ve.exports=h;var v={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},c=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function h(x){var w=[];return x.replace(c,function(A,d,k){var T=d.toLowerCase();for(k=y(k),T=="m"&&k.length>2&&(w.push([d].concat(k.splice(0,2))),T="l",d=d=="m"?"l":"L");;){if(k.length==v[T])return k.unshift(d),w.push(k);if(k.length<v[T])throw new Error("malformed path data");w.push([d].concat(k.splice(0,v[T])))}}),w}var _=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function y(x){var w=x.match(_);return w?w.map(Number):[]}}),U0=t((Ue,ve)=>{var v=g0(),c=function(N,O){return O?Math.round(N*(O=Math.pow(10,O)))/O:Math.round(N)},h="M0,0Z",_=Math.sqrt(2),y=Math.sqrt(3),x=Math.PI,w=Math.cos,A=Math.sin;ve.exports={circle:{n:0,f:function(N,O,B){if(d(O))return h;var S=c(N,2),D="M"+S+",0A"+S+","+S+" 0 1,1 0,-"+S+"A"+S+","+S+" 0 0,1 "+S+",0Z";return B?P(O,B,D):D}},square:{n:1,f:function(N,O,B){if(d(O))return h;var S=c(N,2);return P(O,B,"M"+S+","+S+"H-"+S+"V-"+S+"H"+S+"Z")}},diamond:{n:2,f:function(N,O,B){if(d(O))return h;var S=c(N*1.3,2);return P(O,B,"M"+S+",0L0,"+S+"L-"+S+",0L0,-"+S+"Z")}},cross:{n:3,f:function(N,O,B){if(d(O))return h;var S=c(N*.4,2),D=c(N*1.2,2);return P(O,B,"M"+D+","+S+"H"+S+"V"+D+"H-"+S+"V"+S+"H-"+D+"V-"+S+"H-"+S+"V-"+D+"H"+S+"V-"+S+"H"+D+"Z")}},x:{n:4,f:function(N,O,B){if(d(O))return h;var S=c(N*.8/_,2),D="l"+S+","+S,z="l"+S+",-"+S,H="l-"+S+",-"+S,Y="l-"+S+","+S;return P(O,B,"M0,"+S+D+z+H+z+H+Y+H+Y+D+Y+D+"Z")}},"triangle-up":{n:5,f:function(N,O,B){if(d(O))return h;var S=c(N*2/y,2),D=c(N/2,2),z=c(N,2);return P(O,B,"M-"+S+","+D+"H"+S+"L0,-"+z+"Z")}},"triangle-down":{n:6,f:function(N,O,B){if(d(O))return h;var S=c(N*2/y,2),D=c(N/2,2),z=c(N,2);return P(O,B,"M-"+S+",-"+D+"H"+S+"L0,"+z+"Z")}},"triangle-left":{n:7,f:function(N,O,B){if(d(O))return h;var S=c(N*2/y,2),D=c(N/2,2),z=c(N,2);return P(O,B,"M"+D+",-"+S+"V"+S+"L-"+z+",0Z")}},"triangle-right":{n:8,f:function(N,O,B){if(d(O))return h;var S=c(N*2/y,2),D=c(N/2,2),z=c(N,2);return P(O,B,"M-"+D+",-"+S+"V"+S+"L"+z+",0Z")}},"triangle-ne":{n:9,f:function(N,O,B){if(d(O))return h;var S=c(N*.6,2),D=c(N*1.2,2);return P(O,B,"M-"+D+",-"+S+"H"+S+"V"+D+"Z")}},"triangle-se":{n:10,f:function(N,O,B){if(d(O))return h;var S=c(N*.6,2),D=c(N*1.2,2);return P(O,B,"M"+S+",-"+D+"V"+S+"H-"+D+"Z")}},"triangle-sw":{n:11,f:function(N,O,B){if(d(O))return h;var S=c(N*.6,2),D=c(N*1.2,2);return P(O,B,"M"+D+","+S+"H-"+S+"V-"+D+"Z")}},"triangle-nw":{n:12,f:function(N,O,B){if(d(O))return h;var S=c(N*.6,2),D=c(N*1.2,2);return P(O,B,"M-"+S+","+D+"V-"+S+"H"+D+"Z")}},pentagon:{n:13,f:function(N,O,B){if(d(O))return h;var S=c(N*.951,2),D=c(N*.588,2),z=c(-N,2),H=c(N*-.309,2),Y=c(N*.809,2);return P(O,B,"M"+S+","+H+"L"+D+","+Y+"H-"+D+"L-"+S+","+H+"L0,"+z+"Z")}},hexagon:{n:14,f:function(N,O,B){if(d(O))return h;var S=c(N,2),D=c(N/2,2),z=c(N*y/2,2);return P(O,B,"M"+z+",-"+D+"V"+D+"L0,"+S+"L-"+z+","+D+"V-"+D+"L0,-"+S+"Z")}},hexagon2:{n:15,f:function(N,O,B){if(d(O))return h;var S=c(N,2),D=c(N/2,2),z=c(N*y/2,2);return P(O,B,"M-"+D+","+z+"H"+D+"L"+S+",0L"+D+",-"+z+"H-"+D+"L-"+S+",0Z")}},octagon:{n:16,f:function(N,O,B){if(d(O))return h;var S=c(N*.924,2),D=c(N*.383,2);return P(O,B,"M-"+D+",-"+S+"H"+D+"L"+S+",-"+D+"V"+D+"L"+D+","+S+"H-"+D+"L-"+S+","+D+"V-"+D+"Z")}},star:{n:17,f:function(N,O,B){if(d(O))return h;var S=N*1.4,D=c(S*.225,2),z=c(S*.951,2),H=c(S*.363,2),Y=c(S*.588,2),ht=c(-S,2),Se=c(S*-.309,2),ie=c(S*.118,2),X=c(S*.809,2),ft=c(S*.382,2);return P(O,B,"M"+D+","+Se+"H"+z+"L"+H+","+ie+"L"+Y+","+X+"L0,"+ft+"L-"+Y+","+X+"L-"+H+","+ie+"L-"+z+","+Se+"H-"+D+"L0,"+ht+"Z")}},hexagram:{n:18,f:function(N,O,B){if(d(O))return h;var S=c(N*.66,2),D=c(N*.38,2),z=c(N*.76,2);return P(O,B,"M-"+z+",0l-"+D+",-"+S+"h"+z+"l"+D+",-"+S+"l"+D+","+S+"h"+z+"l-"+D+","+S+"l"+D+","+S+"h-"+z+"l-"+D+","+S+"l-"+D+",-"+S+"h-"+z+"Z")}},"star-triangle-up":{n:19,f:function(N,O,B){if(d(O))return h;var S=c(N*y*.8,2),D=c(N*.8,2),z=c(N*1.6,2),H=c(N*4,2),Y="A "+H+","+H+" 0 0 1 ";return P(O,B,"M-"+S+","+D+Y+S+","+D+Y+"0,-"+z+Y+"-"+S+","+D+"Z")}},"star-triangle-down":{n:20,f:function(N,O,B){if(d(O))return h;var S=c(N*y*.8,2),D=c(N*.8,2),z=c(N*1.6,2),H=c(N*4,2),Y="A "+H+","+H+" 0 0 1 ";return P(O,B,"M"+S+",-"+D+Y+"-"+S+",-"+D+Y+"0,"+z+Y+S+",-"+D+"Z")}},"star-square":{n:21,f:function(N,O,B){if(d(O))return h;var S=c(N*1.1,2),D=c(N*2,2),z="A "+D+","+D+" 0 0 1 ";return P(O,B,"M-"+S+",-"+S+z+"-"+S+","+S+z+S+","+S+z+S+",-"+S+z+"-"+S+",-"+S+"Z")}},"star-diamond":{n:22,f:function(N,O,B){if(d(O))return h;var S=c(N*1.4,2),D=c(N*1.9,2),z="A "+D+","+D+" 0 0 1 ";return P(O,B,"M-"+S+",0"+z+"0,"+S+z+S+",0"+z+"0,-"+S+z+"-"+S+",0Z")}},"diamond-tall":{n:23,f:function(N,O,B){if(d(O))return h;var S=c(N*.7,2),D=c(N*1.4,2);return P(O,B,"M0,"+D+"L"+S+",0L0,-"+D+"L-"+S+",0Z")}},"diamond-wide":{n:24,f:function(N,O,B){if(d(O))return h;var S=c(N*1.4,2),D=c(N*.7,2);return P(O,B,"M0,"+D+"L"+S+",0L0,-"+D+"L-"+S+",0Z")}},hourglass:{n:25,f:function(N,O,B){if(d(O))return h;var S=c(N,2);return P(O,B,"M"+S+","+S+"H-"+S+"L"+S+",-"+S+"H-"+S+"Z")},noDot:!0},bowtie:{n:26,f:function(N,O,B){if(d(O))return h;var S=c(N,2);return P(O,B,"M"+S+","+S+"V-"+S+"L-"+S+","+S+"V-"+S+"Z")},noDot:!0},"circle-cross":{n:27,f:function(N,O,B){if(d(O))return h;var S=c(N,2);return P(O,B,"M0,"+S+"V-"+S+"M"+S+",0H-"+S+"M"+S+",0A"+S+","+S+" 0 1,1 0,-"+S+"A"+S+","+S+" 0 0,1 "+S+",0Z")},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(N,O,B){if(d(O))return h;var S=c(N,2),D=c(N/_,2);return P(O,B,"M"+D+","+D+"L-"+D+",-"+D+"M"+D+",-"+D+"L-"+D+","+D+"M"+S+",0A"+S+","+S+" 0 1,1 0,-"+S+"A"+S+","+S+" 0 0,1 "+S+",0Z")},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(N,O,B){if(d(O))return h;var S=c(N,2);return P(O,B,"M0,"+S+"V-"+S+"M"+S+",0H-"+S+"M"+S+","+S+"H-"+S+"V-"+S+"H"+S+"Z")},needLine:!0,noDot:!0},"square-x":{n:30,f:function(N,O,B){if(d(O))return h;var S=c(N,2);return P(O,B,"M"+S+","+S+"L-"+S+",-"+S+"M"+S+",-"+S+"L-"+S+","+S+"M"+S+","+S+"H-"+S+"V-"+S+"H"+S+"Z")},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(N,O,B){if(d(O))return h;var S=c(N*1.3,2);return P(O,B,"M"+S+",0L0,"+S+"L-"+S+",0L0,-"+S+"ZM0,-"+S+"V"+S+"M-"+S+",0H"+S)},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(N,O,B){if(d(O))return h;var S=c(N*1.3,2),D=c(N*.65,2);return P(O,B,"M"+S+",0L0,"+S+"L-"+S+",0L0,-"+S+"ZM-"+D+",-"+D+"L"+D+","+D+"M-"+D+","+D+"L"+D+",-"+D)},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(N,O,B){if(d(O))return h;var S=c(N*1.4,2);return P(O,B,"M0,"+S+"V-"+S+"M"+S+",0H-"+S)},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(N,O,B){if(d(O))return h;var S=c(N,2);return P(O,B,"M"+S+","+S+"L-"+S+",-"+S+"M"+S+",-"+S+"L-"+S+","+S)},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(N,O,B){if(d(O))return h;var S=c(N*1.2,2),D=c(N*.85,2);return P(O,B,"M0,"+S+"V-"+S+"M"+S+",0H-"+S+"M"+D+","+D+"L-"+D+",-"+D+"M"+D+",-"+D+"L-"+D+","+D)},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(N,O,B){if(d(O))return h;var S=c(N/2,2),D=c(N,2);return P(O,B,"M"+S+","+D+"V-"+D+"M"+(S-D)+",-"+D+"V"+D+"M"+D+","+S+"H-"+D+"M-"+D+","+(S-D)+"H"+D)},needLine:!0,noFill:!0},"y-up":{n:37,f:function(N,O,B){if(d(O))return h;var S=c(N*1.2,2),D=c(N*1.6,2),z=c(N*.8,2);return P(O,B,"M-"+S+","+z+"L0,0M"+S+","+z+"L0,0M0,-"+D+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(N,O,B){if(d(O))return h;var S=c(N*1.2,2),D=c(N*1.6,2),z=c(N*.8,2);return P(O,B,"M-"+S+",-"+z+"L0,0M"+S+",-"+z+"L0,0M0,"+D+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(N,O,B){if(d(O))return h;var S=c(N*1.2,2),D=c(N*1.6,2),z=c(N*.8,2);return P(O,B,"M"+z+","+S+"L0,0M"+z+",-"+S+"L0,0M-"+D+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(N,O,B){if(d(O))return h;var S=c(N*1.2,2),D=c(N*1.6,2),z=c(N*.8,2);return P(O,B,"M-"+z+","+S+"L0,0M-"+z+",-"+S+"L0,0M"+D+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(N,O,B){if(d(O))return h;var S=c(N*1.4,2);return P(O,B,"M"+S+",0H-"+S)},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(N,O,B){if(d(O))return h;var S=c(N*1.4,2);return P(O,B,"M0,"+S+"V-"+S)},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(N,O,B){if(d(O))return h;var S=c(N,2);return P(O,B,"M"+S+",-"+S+"L-"+S+","+S)},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(N,O,B){if(d(O))return h;var S=c(N,2);return P(O,B,"M"+S+","+S+"L-"+S+",-"+S)},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(N,O,B){if(d(O))return h;var S=c(N,2),D=c(N*2,2);return P(O,B,"M0,0L-"+S+","+D+"H"+S+"Z")},backoff:1,noDot:!0},"arrow-down":{n:46,f:function(N,O,B){if(d(O))return h;var S=c(N,2),D=c(N*2,2);return P(O,B,"M0,0L-"+S+",-"+D+"H"+S+"Z")},noDot:!0},"arrow-left":{n:47,f:function(N,O,B){if(d(O))return h;var S=c(N*2,2),D=c(N,2);return P(O,B,"M0,0L"+S+",-"+D+"V"+D+"Z")},noDot:!0},"arrow-right":{n:48,f:function(N,O,B){if(d(O))return h;var S=c(N*2,2),D=c(N,2);return P(O,B,"M0,0L-"+S+",-"+D+"V"+D+"Z")},noDot:!0},"arrow-bar-up":{n:49,f:function(N,O,B){if(d(O))return h;var S=c(N,2),D=c(N*2,2);return P(O,B,"M-"+S+",0H"+S+"M0,0L-"+S+","+D+"H"+S+"Z")},backoff:1,needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(N,O,B){if(d(O))return h;var S=c(N,2),D=c(N*2,2);return P(O,B,"M-"+S+",0H"+S+"M0,0L-"+S+",-"+D+"H"+S+"Z")},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(N,O,B){if(d(O))return h;var S=c(N*2,2),D=c(N,2);return P(O,B,"M0,-"+D+"V"+D+"M0,0L"+S+",-"+D+"V"+D+"Z")},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(N,O,B){if(d(O))return h;var S=c(N*2,2),D=c(N,2);return P(O,B,"M0,-"+D+"V"+D+"M0,0L-"+S+",-"+D+"V"+D+"Z")},needLine:!0,noDot:!0},arrow:{n:53,f:function(N,O,B){if(d(O))return h;var S=x/2.5,D=2*N*w(S),z=2*N*A(S);return P(O,B,"M0,0L"+-D+","+z+"L"+D+","+z+"Z")},backoff:.9,noDot:!0},"arrow-wide":{n:54,f:function(N,O,B){if(d(O))return h;var S=x/4,D=2*N*w(S),z=2*N*A(S);return P(O,B,"M0,0L"+-D+","+z+"A "+2*N+","+2*N+" 0 0 1 "+D+","+z+"Z")},backoff:.4,noDot:!0}};function d(N){return N===null}var k,T,L,j;function P(N,O,B){if((!N||N%360===0)&&!O)return B;if(L===N&&j===O&&k===B)return T;L=N,j=O,k=B;function S(rt,dt){var pt=w(rt),se=A(rt),gt=dt[0],xt=dt[1]+(O||0);return[gt*pt-xt*se,gt*se+xt*pt]}for(var D=N/180*x,z=0,H=0,Y=v(B),ht="",Se=0;Se<Y.length;Se++){var ie=Y[Se],X=ie[0],ft=z,Le=H;if(X==="M"||X==="L")z=+ie[1],H=+ie[2];else if(X==="m"||X==="l")z+=+ie[1],H+=+ie[2];else if(X==="H")z=+ie[1];else if(X==="h")z+=+ie[1];else if(X==="V")H=+ie[1];else if(X==="v")H+=+ie[1];else if(X==="A"){z=+ie[1],H=+ie[2];var nt=S(D,[+ie[6],+ie[7]]);ie[6]=nt[0],ie[7]=nt[1],ie[3]=+ie[3]+N}(X==="H"||X==="V")&&(X="L"),(X==="h"||X==="v")&&(X="l"),(X==="m"||X==="l")&&(z-=ft,H-=Le);var Ze=S(D,[z,H]);(X==="H"||X==="V")&&(X="L"),(X==="M"||X==="L"||X==="m"||X==="l")&&(ie[1]=Ze[0],ie[2]=Ze[1]),ie[0]=X,ht+=ie[0]+ie.slice(1).join(",")}return T=ht,ht}}),Y0=t((Ue,ve)=>{var v=l(),c=Re(),h=c.numberFormat,_=E(),y=wt(),x=p1(),w=sa(),A=Ip(),d=c.strTranslate,k=j1(),T=Mg(),L=$1(),j=L.LINE_SPACING,P=qo().DESELECTDIM,N=$p(),O=Qp(),B=T0().appendArrayPointValue,S=ve.exports={};S.font=function(la,$o){var jt=$o.variant,Fp=$o.style,i0=$o.weight,b0=$o.color,O0=$o.size,C0=$o.family,I0=$o.shadow,V0=$o.lineposition,H0=$o.textcase;C0&&la.style("font-family",C0),O0+1&&la.style("font-size",O0+"px"),b0&&la.call(w.fill,b0),i0&&la.style("font-weight",i0),Fp&&la.style("font-style",Fp),jt&&la.style("font-variant",jt),H0&&la.style("text-transform",D(H(H0))),I0&&la.style("text-shadow",I0==="auto"?k.makeTextShadow(w.contrast(b0)):D(I0)),V0&&la.style("text-decoration-line",D(Y(V0)))};function D(la){return la==="none"?void 0:la}var z={normal:"none",lower:"lowercase",upper:"uppercase","word caps":"capitalize"};function H(la){return z[la]}function Y(la){return la.replace("under","underline").replace("over","overline").replace("through","line-through").split("+").join(" ")}S.setPosition=function(la,$o,jt){la.attr("x",$o).attr("y",jt)},S.setSize=function(la,$o,jt){la.attr("width",$o).attr("height",jt)},S.setRect=function(la,$o,jt,Fp,i0){la.call(S.setPosition,$o,jt).call(S.setSize,Fp,i0)},S.translatePoint=function(la,$o,jt,Fp){var i0=jt.c2p(la.x),b0=Fp.c2p(la.y);if(_(i0)&&_(b0)&&$o.node())$o.node().nodeName==="text"?$o.attr("x",i0).attr("y",b0):$o.attr("transform",d(i0,b0));else return!1;return!0},S.translatePoints=function(la,$o,jt){la.each(function(Fp){var i0=v.select(this);S.translatePoint(Fp,i0,$o,jt)})},S.hideOutsideRangePoint=function(la,$o,jt,Fp,i0,b0){$o.attr("display",jt.isPtWithinRange(la,i0)&&Fp.isPtWithinRange(la,b0)?null:"none")},S.hideOutsideRangePoints=function(la,$o){if($o._hasClipOnAxisFalse){var jt=$o.xaxis,Fp=$o.yaxis;la.each(function(i0){var b0=i0[0].trace,O0=b0.xcalendar,C0=b0.ycalendar,I0=x.traceIs(b0,"bar-like")?".bartext":".point,.textpoint";la.selectAll(I0).each(function(V0){S.hideOutsideRangePoint(V0,v.select(this),jt,Fp,O0,C0)})})}},S.crispRound=function(la,$o,jt){return!$o||!_($o)?jt||0:la._context.staticPlot?$o:$o<1?1:Math.round($o)},S.singleLineStyle=function(la,$o,jt,Fp,i0){$o.style("fill","none");var b0=(((la||[])[0]||{}).trace||{}).line||{},O0=jt||b0.width||0,C0=i0||b0.dash||"";w.stroke($o,Fp||b0.color),S.dashLine($o,C0,O0)},S.lineGroupStyle=function(la,$o,jt,Fp){la.style("fill","none").each(function(i0){var b0=(((i0||[])[0]||{}).trace||{}).line||{},O0=$o||b0.width||0,C0=Fp||b0.dash||"";v.select(this).call(w.stroke,jt||b0.color).call(S.dashLine,C0,O0)})},S.dashLine=function(la,$o,jt){jt=+jt||0,$o=S.dashStyle($o,jt),la.style({"stroke-dasharray":$o,"stroke-width":jt+"px"})},S.dashStyle=function(la,$o){$o=+$o||1;var jt=Math.max($o,3);return la==="solid"?la="":la==="dot"?la=jt+"px,"+jt+"px":la==="dash"?la=3*jt+"px,"+3*jt+"px":la==="longdash"?la=5*jt+"px,"+5*jt+"px":la==="dashdot"?la=3*jt+"px,"+jt+"px,"+jt+"px,"+jt+"px":la==="longdashdot"&&(la=5*jt+"px,"+2*jt+"px,"+jt+"px,"+2*jt+"px"),la};function ht(la,$o,jt,Fp){var i0=$o.fillpattern,b0=$o.fillgradient,O0=S.getPatternAttr,C0=i0&&(O0(i0.shape,0,"")||O0(i0.path,0,""));if(C0){var I0=O0(i0.bgcolor,0,null),V0=O0(i0.fgcolor,0,null),H0=i0.fgopacity,im=O0(i0.size,0,8),k0=O0(i0.solidity,0,.3),fm=$o.uid;S.pattern(la,"point",jt,fm,C0,im,k0,void 0,i0.fillmode,I0,V0,H0)}else if(b0&&b0.type!=="none"){var Tm=b0.type,om="scatterfill-"+$o.uid;if(Fp&&(om="legendfill-"+$o.uid),!Fp&&(b0.start!==void 0||b0.stop!==void 0)){var Rm,ci;Tm==="horizontal"?(Rm={x:b0.start,y:0},ci={x:b0.stop,y:0}):Tm==="vertical"&&(Rm={x:0,y:b0.start},ci={x:0,y:b0.stop}),Rm.x=$o._xA.c2p(Rm.x===void 0?$o._extremes.x.min[0].val:Rm.x,!0),Rm.y=$o._yA.c2p(Rm.y===void 0?$o._extremes.y.min[0].val:Rm.y,!0),ci.x=$o._xA.c2p(ci.x===void 0?$o._extremes.x.max[0].val:ci.x,!0),ci.y=$o._yA.c2p(ci.y===void 0?$o._extremes.y.max[0].val:ci.y,!0),la.call(Ze,jt,om,"linear",b0.colorscale,"fill",Rm,ci,!0,!1)}else Tm==="horizontal"&&(Tm=Tm+"reversed"),la.call(S.gradient,jt,om,Tm,b0.colorscale,"fill")}else $o.fillcolor&&la.call(w.fill,$o.fillcolor)}S.singleFillStyle=function(la,$o){var jt=v.select(la.node()),Fp=jt.data(),i0=((Fp[0]||[])[0]||{}).trace||{};ht(la,i0,$o,!1)},S.fillGroupStyle=function(la,$o,jt){la.style("stroke-width",0).each(function(Fp){var i0=v.select(this);Fp[0].trace&&ht(i0,Fp[0].trace,$o,jt)})};var Se=U0();S.symbolNames=[],S.symbolFuncs=[],S.symbolBackOffs=[],S.symbolNeedLines={},S.symbolNoDot={},S.symbolNoFill={},S.symbolList=[],Object.keys(Se).forEach(function(la){var $o=Se[la],jt=$o.n;S.symbolList.push(jt,String(jt),la,jt+100,String(jt+100),la+"-open"),S.symbolNames[jt]=la,S.symbolFuncs[jt]=$o.f,S.symbolBackOffs[jt]=$o.backoff||0,$o.needLine&&(S.symbolNeedLines[jt]=!0),$o.noDot?S.symbolNoDot[jt]=!0:S.symbolList.push(jt+200,String(jt+200),la+"-dot",jt+300,String(jt+300),la+"-open-dot"),$o.noFill&&(S.symbolNoFill[jt]=!0)});var ie=S.symbolNames.length,X="M0,0.5L0.5,0L0,-0.5L-0.5,0Z";S.symbolNumber=function(la){if(_(la))la=+la;else if(typeof la=="string"){var $o=0;la.indexOf("-open")>0&&($o=100,la=la.replace("-open","")),la.indexOf("-dot")>0&&($o+=200,la=la.replace("-dot","")),la=S.symbolNames.indexOf(la),la>=0&&(la+=$o)}return la%100>=ie||la>=400?0:Math.floor(Math.max(la,0))};function ft(la,$o,jt,Fp){var i0=la%100;return S.symbolFuncs[i0]($o,jt,Fp)+(la>=200?X:"")}var Le=h("~f"),nt={radial:{type:"radial"},radialreversed:{type:"radial",reversed:!0},horizontal:{type:"linear",start:{x:1,y:0},stop:{x:0,y:0}},horizontalreversed:{type:"linear",start:{x:1,y:0},stop:{x:0,y:0},reversed:!0},vertical:{type:"linear",start:{x:0,y:1},stop:{x:0,y:0}},verticalreversed:{type:"linear",start:{x:0,y:1},stop:{x:0,y:0},reversed:!0}};S.gradient=function(la,$o,jt,Fp,i0,b0){var O0=nt[Fp];return Ze(la,$o,jt,O0.type,i0,b0,O0.start,O0.stop,!1,O0.reversed)};function Ze(la,$o,jt,Fp,i0,b0,O0,C0,I0,V0){var H0=i0.length,im;Fp==="linear"?im={node:"linearGradient",attrs:{x1:O0.x,y1:O0.y,x2:C0.x,y2:C0.y,gradientUnits:I0?"userSpaceOnUse":"objectBoundingBox"},reversed:V0}:Fp==="radial"&&(im={node:"radialGradient",reversed:V0});for(var k0=new Array(H0),fm=0;fm<H0;fm++)im.reversed?k0[H0-1-fm]=[Le((1-i0[fm][0])*100),i0[fm][1]]:k0[fm]=[Le(i0[fm][0]*100),i0[fm][1]];var Tm=$o._fullLayout,om="g"+Tm._uid+"-"+jt,Rm=Tm._defs.select(".gradients").selectAll("#"+om).data([Fp+k0.join(";")],c.identity);Rm.exit().remove(),Rm.enter().append(im.node).each(function(){var ci=v.select(this);im.attrs&&ci.attr(im.attrs),ci.attr("id",om);var Hp=ci.selectAll("stop").data(k0);Hp.exit().remove(),Hp.enter().append("stop"),Hp.each(function(St){var Ht=y(St[1]);v.select(this).attr({offset:St[0]+"%","stop-color":w.tinyRGB(Ht),"stop-opacity":Ht.getAlpha()})})}),la.style(b0,Lt(om,$o)).style(b0+"-opacity",null),la.classed("gradient_filled",!0)}S.pattern=function(la,$o,jt,Fp,i0,b0,O0,C0,I0,V0,H0,im){var k0=$o==="legend";C0&&(I0==="overlay"?(V0=C0,H0=w.contrast(V0)):(V0=void 0,H0=C0));var fm=jt._fullLayout,Tm="p"+fm._uid+"-"+Fp,om,Rm,ci=function(X0,$0,Z0,Am,e1){return Am+(e1-Am)*(X0-$0)/(Z0-$0)},Hp,St,Ht,Sr,Rp={},Np=y(H0),Jp=w.tinyRGB(Np),n0=Np.getAlpha(),S0=im*n0;switch(i0){case"/":om=b0*Math.sqrt(2),Rm=b0*Math.sqrt(2),Hp="M-"+om/4+","+Rm/4+"l"+om/2+",-"+Rm/2+"M0,"+Rm+"L"+om+",0M"+om/4*3+","+Rm/4*5+"l"+om/2+",-"+Rm/2,St=O0*b0,Sr="path",Rp={d:Hp,opacity:S0,stroke:Jp,"stroke-width":St+"px"};break;case"\\":om=b0*Math.sqrt(2),Rm=b0*Math.sqrt(2),Hp="M"+om/4*3+",-"+Rm/4+"l"+om/2+","+Rm/2+"M0,0L"+om+","+Rm+"M-"+om/4+","+Rm/4*3+"l"+om/2+","+Rm/2,St=O0*b0,Sr="path",Rp={d:Hp,opacity:S0,stroke:Jp,"stroke-width":St+"px"};break;case"x":om=b0*Math.sqrt(2),Rm=b0*Math.sqrt(2),Hp="M-"+om/4+","+Rm/4+"l"+om/2+",-"+Rm/2+"M0,"+Rm+"L"+om+",0M"+om/4*3+","+Rm/4*5+"l"+om/2+",-"+Rm/2+"M"+om/4*3+",-"+Rm/4+"l"+om/2+","+Rm/2+"M0,0L"+om+","+Rm+"M-"+om/4+","+Rm/4*3+"l"+om/2+","+Rm/2,St=b0-b0*Math.sqrt(1-O0),Sr="path",Rp={d:Hp,opacity:S0,stroke:Jp,"stroke-width":St+"px"};break;case"|":om=b0,Rm=b0,Sr="path",Hp="M"+om/2+",0L"+om/2+","+Rm,St=O0*b0,Sr="path",Rp={d:Hp,opacity:S0,stroke:Jp,"stroke-width":St+"px"};break;case"-":om=b0,Rm=b0,Sr="path",Hp="M0,"+Rm/2+"L"+om+","+Rm/2,St=O0*b0,Sr="path",Rp={d:Hp,opacity:S0,stroke:Jp,"stroke-width":St+"px"};break;case"+":om=b0,Rm=b0,Sr="path",Hp="M"+om/2+",0L"+om/2+","+Rm+"M0,"+Rm/2+"L"+om+","+Rm/2,St=b0-b0*Math.sqrt(1-O0),Sr="path",Rp={d:Hp,opacity:S0,stroke:Jp,"stroke-width":St+"px"};break;case".":om=b0,Rm=b0,O0<Math.PI/4?Ht=Math.sqrt(O0*b0*b0/Math.PI):Ht=ci(O0,Math.PI/4,1,b0/2,b0/Math.sqrt(2)),Sr="circle",Rp={cx:om/2,cy:Rm/2,r:Ht,opacity:S0,fill:Jp};break;default:om=b0,Rm=b0,Sr="path",Rp={d:i0,opacity:S0,fill:Jp};break}var _0=[i0||"noSh",V0||"noBg",H0||"noFg",b0,O0].join(";"),w0=fm._defs.select(".patterns").selectAll("#"+Tm).data([_0],c.identity);w0.exit().remove(),w0.enter().append("pattern").each(function(){var X0=v.select(this);if(X0.attr({id:Tm,width:om+"px",height:Rm+"px",patternUnits:"userSpaceOnUse",patternTransform:k0?"scale(0.8)":""}),V0){var $0=y(V0),Z0=w.tinyRGB($0),Am=$0.getAlpha(),e1=X0.selectAll("rect").data([0]);e1.exit().remove(),e1.enter().append("rect").attr({width:om+"px",height:Rm+"px",fill:Z0,"fill-opacity":Am})}var E1=X0.selectAll(Sr).data([0]);E1.exit().remove(),E1.enter().append(Sr).attr(Rp)}),la.style("fill",Lt(Tm,jt)).style("fill-opacity",null),la.classed("pattern_filled",!0)},S.initGradients=function(la){var $o=la._fullLayout,jt=c.ensureSingle($o._defs,"g","gradients");jt.selectAll("linearGradient,radialGradient").remove(),v.select(la).selectAll(".gradient_filled").classed("gradient_filled",!1)},S.initPatterns=function(la){var $o=la._fullLayout,jt=c.ensureSingle($o._defs,"g","patterns");jt.selectAll("pattern").remove(),v.select(la).selectAll(".pattern_filled").classed("pattern_filled",!1)},S.getPatternAttr=function(la,$o,jt){return la&&c.isArrayOrTypedArray(la)?$o<la.length?la[$o]:jt:la},S.pointStyle=function(la,$o,jt,Fp){if(la.size()){var i0=S.makePointStyleFns($o);la.each(function(b0){S.singlePointStyle(b0,v.select(this),$o,i0,jt,Fp)})}},S.singlePointStyle=function(la,$o,jt,Fp,i0,b0){var O0=jt.marker,C0=O0.line;if(b0&&b0.i>=0&&la.i===void 0&&(la.i=b0.i),$o.style("opacity",Fp.selectedOpacityFn?Fp.selectedOpacityFn(la):la.mo===void 0?O0.opacity:la.mo),Fp.ms2mrc){var I0;la.ms==="various"||O0.size==="various"?I0=3:I0=Fp.ms2mrc(la.ms),la.mrc=I0,Fp.selectedSizeFn&&(I0=la.mrc=Fp.selectedSizeFn(la));var V0=S.symbolNumber(la.mx||O0.symbol)||0;la.om=V0%200>=100;var H0=f0(la,jt),im=ne(la,jt);$o.attr("d",ft(V0,I0,H0,im))}var k0=!1,fm,Tm,om;if(la.so)om=C0.outlierwidth,Tm=C0.outliercolor,fm=O0.outliercolor;else{var Rm=(C0||{}).width;om=(la.mlw+1||Rm+1||(la.trace?(la.trace.marker.line||{}).width:0)+1)-1||0,"mlc"in la?Tm=la.mlcc=Fp.lineScale(la.mlc):c.isArrayOrTypedArray(C0.color)?Tm=w.defaultLine:Tm=C0.color,c.isArrayOrTypedArray(O0.color)&&(fm=w.defaultLine,k0=!0),"mc"in la?fm=la.mcc=Fp.markerScale(la.mc):fm=O0.color||O0.colors||"rgba(0,0,0,0)",Fp.selectedColorFn&&(fm=Fp.selectedColorFn(la))}if(la.om)$o.call(w.stroke,fm).style({"stroke-width":(om||1)+"px",fill:"none"});else{$o.style("stroke-width",(la.isBlank?0:om)+"px");var ci=O0.gradient,Hp=la.mgt;Hp?k0=!0:Hp=ci&&ci.type,c.isArrayOrTypedArray(Hp)&&(Hp=Hp[0],nt[Hp]||(Hp=0));var St=O0.pattern,Ht=S.getPatternAttr,Sr=St&&(Ht(St.shape,la.i,"")||Ht(St.path,la.i,""));if(Hp&&Hp!=="none"){var Rp=la.mgc;Rp?k0=!0:Rp=ci.color;var Np=jt.uid;k0&&(Np+="-"+la.i),S.gradient($o,i0,Np,Hp,[[0,Rp],[1,fm]],"fill")}else if(Sr){var Jp=!1,n0=St.fgcolor;!n0&&b0&&b0.color&&(n0=b0.color,Jp=!0);var S0=Ht(n0,la.i,b0&&b0.color||null),_0=Ht(St.bgcolor,la.i,null),w0=St.fgopacity,X0=Ht(St.size,la.i,8),$0=Ht(St.solidity,la.i,.3);Jp=Jp||la.mcc||c.isArrayOrTypedArray(St.shape)||c.isArrayOrTypedArray(St.path)||c.isArrayOrTypedArray(St.bgcolor)||c.isArrayOrTypedArray(St.fgcolor)||c.isArrayOrTypedArray(St.size)||c.isArrayOrTypedArray(St.solidity);var Z0=jt.uid;Jp&&(Z0+="-"+la.i),S.pattern($o,"point",i0,Z0,Sr,X0,$0,la.mcc,St.fillmode,_0,S0,w0)}else c.isArrayOrTypedArray(fm)?w.fill($o,fm[la.i]):w.fill($o,fm);om&&w.stroke($o,Tm)}},S.makePointStyleFns=function(la){var $o={},jt=la.marker;return $o.markerScale=S.tryColorscale(jt,""),$o.lineScale=S.tryColorscale(jt,"line"),x.traceIs(la,"symbols")&&($o.ms2mrc=N.isBubble(la)?O(la):function(){return(jt.size||6)/2}),la.selectedpoints&&c.extendFlat($o,S.makeSelectedPointStyleFns(la)),$o},S.makeSelectedPointStyleFns=function(la){var $o={},jt=la.selected||{},Fp=la.unselected||{},i0=la.marker||{},b0=jt.marker||{},O0=Fp.marker||{},C0=i0.opacity,I0=b0.opacity,V0=O0.opacity,H0=I0!==void 0,im=V0!==void 0;(c.isArrayOrTypedArray(C0)||H0||im)&&($o.selectedOpacityFn=function(Ht){var Sr=Ht.mo===void 0?i0.opacity:Ht.mo;return Ht.selected?H0?I0:Sr:im?V0:P*Sr});var k0=i0.color,fm=b0.color,Tm=O0.color;(fm||Tm)&&($o.selectedColorFn=function(Ht){var Sr=Ht.mcc||k0;return Ht.selected?fm||Sr:Tm||Sr});var om=i0.size,Rm=b0.size,ci=O0.size,Hp=Rm!==void 0,St=ci!==void 0;return x.traceIs(la,"symbols")&&(Hp||St)&&($o.selectedSizeFn=function(Ht){var Sr=Ht.mrc||om/2;return Ht.selected?Hp?Rm/2:Sr:St?ci/2:Sr}),$o},S.makeSelectedTextStyleFns=function(la){var $o={},jt=la.selected||{},Fp=la.unselected||{},i0=la.textfont||{},b0=jt.textfont||{},O0=Fp.textfont||{},C0=i0.color,I0=b0.color,V0=O0.color;return $o.selectedTextColorFn=function(H0){var im=H0.tc||C0;return H0.selected?I0||im:V0||(I0?im:w.addOpacity(im,P))},$o},S.selectedPointStyle=function(la,$o){if(!(!la.size()||!$o.selectedpoints)){var jt=S.makeSelectedPointStyleFns($o),Fp=$o.marker||{},i0=[];jt.selectedOpacityFn&&i0.push(function(b0,O0){b0.style("opacity",jt.selectedOpacityFn(O0))}),jt.selectedColorFn&&i0.push(function(b0,O0){w.fill(b0,jt.selectedColorFn(O0))}),jt.selectedSizeFn&&i0.push(function(b0,O0){var C0=O0.mx||Fp.symbol||0,I0=jt.selectedSizeFn(O0);b0.attr("d",ft(S.symbolNumber(C0),I0,f0(O0,$o),ne(O0,$o))),O0.mrc2=I0}),i0.length&&la.each(function(b0){for(var O0=v.select(this),C0=0;C0<i0.length;C0++)i0[C0](O0,b0)})}},S.tryColorscale=function(la,$o){var jt=$o?c.nestedProperty(la,$o).get():la;if(jt){var Fp=jt.color;if((jt.colorscale||jt._colorAx)&&c.isArrayOrTypedArray(Fp))return A.makeColorScaleFuncFromTrace(jt)}return c.identity};var rt={start:1,end:-1,middle:0,bottom:1,top:-1};function dt(la,$o,jt,Fp,i0){var b0=v.select(la.node().parentNode),O0=$o.indexOf("top")!==-1?"top":$o.indexOf("bottom")!==-1?"bottom":"middle",C0=$o.indexOf("left")!==-1?"end":$o.indexOf("right")!==-1?"start":"middle",I0=Fp?Fp/.8+1:0,V0=(k.lineCount(la)-1)*j+1,H0=rt[C0]*I0,im=jt*.75+rt[O0]*I0+(rt[O0]-1)*V0*jt/2;la.attr("text-anchor",C0),i0||b0.attr("transform",d(H0,im))}function pt(la,$o){var jt=la.ts||$o.textfont.size;return _(jt)&&jt>0?jt:0}S.textPointStyle=function(la,$o,jt){if(la.size()){var Fp;if($o.selectedpoints){var i0=S.makeSelectedTextStyleFns($o);Fp=i0.selectedTextColorFn}var b0=$o.texttemplate,O0=jt._fullLayout;la.each(function(C0){var I0=v.select(this),V0=b0?c.extractOption(C0,$o,"txt","texttemplate"):c.extractOption(C0,$o,"tx","text");if(!V0&&V0!==0){I0.remove();return}if(b0){var H0=$o._module.formatLabels,im=H0?H0(C0,$o,O0):{},k0={};B(k0,$o,C0.i);var fm=$o._meta||{};V0=c.texttemplateString(V0,im,O0._d3locale,k0,C0,fm)}var Tm=C0.tp||$o.textposition,om=pt(C0,$o),Rm=Fp?Fp(C0):C0.tc||$o.textfont.color;I0.call(S.font,{family:C0.tf||$o.textfont.family,weight:C0.tw||$o.textfont.weight,style:C0.ty||$o.textfont.style,variant:C0.tv||$o.textfont.variant,textcase:C0.tC||$o.textfont.textcase,lineposition:C0.tE||$o.textfont.lineposition,shadow:C0.tS||$o.textfont.shadow,size:om,color:Rm}).text(V0).call(k.convertToTspans,jt).call(dt,Tm,om,C0.mrc)})}},S.selectedTextStyle=function(la,$o){if(!(!la.size()||!$o.selectedpoints)){var jt=S.makeSelectedTextStyleFns($o);la.each(function(Fp){var i0=v.select(this),b0=jt.selectedTextColorFn(Fp),O0=Fp.tp||$o.textposition,C0=pt(Fp,$o);w.fill(i0,b0);var I0=x.traceIs($o,"bar-like");dt(i0,O0,C0,Fp.mrc2||Fp.mrc,I0)})}};var se=.5;S.smoothopen=function(la,$o){if(la.length<3)return"M"+la.join("L");var jt="M"+la[0],Fp=[],i0;for(i0=1;i0<la.length-1;i0++)Fp.push(xn(la[i0-1],la[i0],la[i0+1],$o));for(jt+="Q"+Fp[0][0]+" "+la[1],i0=2;i0<la.length-1;i0++)jt+="C"+Fp[i0-2][1]+" "+Fp[i0-1][0]+" "+la[i0];return jt+="Q"+Fp[la.length-3][1]+" "+la[la.length-1],jt},S.smoothclosed=function(la,$o){if(la.length<3)return"M"+la.join("L")+"Z";var jt="M"+la[0],Fp=la.length-1,i0=[xn(la[Fp],la[0],la[1],$o)],b0;for(b0=1;b0<Fp;b0++)i0.push(xn(la[b0-1],la[b0],la[b0+1],$o));for(i0.push(xn(la[Fp-1],la[Fp],la[0],$o)),b0=1;b0<=Fp;b0++)jt+="C"+i0[b0-1][1]+" "+i0[b0][0]+" "+la[b0];return jt+="C"+i0[Fp][1]+" "+i0[0][0]+" "+la[0]+"Z",jt};var gt,xt;function Nt(la,$o,jt){return jt&&(la=lt(la)),$o?Pt(la[1]):Rt(la[0])}function Rt(la){var $o=v.round(la,2);return gt=$o,$o}function Pt(la){var $o=v.round(la,2);return xt=$o,$o}function xn(la,$o,jt,Fp){var i0=la[0]-$o[0],b0=la[1]-$o[1],O0=jt[0]-$o[0],C0=jt[1]-$o[1],I0=Math.pow(i0*i0+b0*b0,se/2),V0=Math.pow(O0*O0+C0*C0,se/2),H0=(V0*V0*i0-I0*I0*O0)*Fp,im=(V0*V0*b0-I0*I0*C0)*Fp,k0=3*V0*(I0+V0),fm=3*I0*(I0+V0);return[[Rt($o[0]+(k0&&H0/k0)),Pt($o[1]+(k0&&im/k0))],[Rt($o[0]-(fm&&H0/fm)),Pt($o[1]-(fm&&im/fm))]]}var oa={hv:function(la,$o,jt){return"H"+Rt($o[0])+"V"+Nt($o,1,jt)},vh:function(la,$o,jt){return"V"+Pt($o[1])+"H"+Nt($o,0,jt)},hvh:function(la,$o,jt){return"H"+Rt((la[0]+$o[0])/2)+"V"+Pt($o[1])+"H"+Nt($o,0,jt)},vhv:function(la,$o,jt){return"V"+Pt((la[1]+$o[1])/2)+"H"+Rt($o[0])+"V"+Nt($o,1,jt)}},jo=function(la,$o,jt){return"L"+Nt($o,0,jt)+","+Nt($o,1,jt)};S.steps=function(la){var $o=oa[la]||jo;return function(jt){for(var Fp="M"+Rt(jt[0][0])+","+Pt(jt[0][1]),i0=jt.length,b0=1;b0<i0;b0++)Fp+=$o(jt[b0-1],jt[b0],b0===i0-1);return Fp}};function lt(la,$o){var jt=la.backoff,Fp=la.trace,i0=la.d,b0=la.i;if(jt&&Fp&&Fp.marker&&Fp.marker.angle%360===0&&Fp.line&&Fp.line.shape!=="spline"){var O0=c.isArrayOrTypedArray(jt),C0=la,I0=$o?$o[0]:gt||0,V0=$o?$o[1]:xt||0,H0=C0[0],im=C0[1],k0=H0-I0,fm=im-V0,Tm=Math.atan2(fm,k0),om=O0?jt[b0]:jt;if(om==="auto"){var Rm=C0.i;Fp.type==="scatter"&&Rm--;var ci=C0.marker,Hp=ci.symbol;c.isArrayOrTypedArray(Hp)&&(Hp=Hp[Rm]);var St=ci.size;c.isArrayOrTypedArray(St)&&(St=St[Rm]),om=ci?S.symbolBackOffs[S.symbolNumber(Hp)]*St:0,om+=S.getMarkerStandoff(i0[Rm],Fp)||0}var Ht=H0-om*Math.cos(Tm),Sr=im-om*Math.sin(Tm);(Ht<=H0&&Ht>=I0||Ht>=H0&&Ht<=I0)&&(Sr<=im&&Sr>=V0||Sr>=im&&Sr<=V0)&&(la=[Ht,Sr])}return la}S.applyBackoff=lt,S.makeTester=function(){var la=c.ensureSingleById(v.select("body"),"svg","js-plotly-tester",function(jt){jt.attr(T.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),$o=c.ensureSingle(la,"path","js-reference-point",function(jt){jt.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});S.tester=la,S.testref=$o},S.savedBBoxes={};var ut=0,$=1e4;S.bBox=function(la,$o,jt){jt||(jt=yt(la));var Fp;if(jt){if(Fp=S.savedBBoxes[jt],Fp)return c.extendFlat({},Fp)}else if(la.childNodes.length===1){var i0=la.childNodes[0];if(jt=yt(i0),jt){var b0=+i0.getAttribute("x")||0,O0=+i0.getAttribute("y")||0,C0=i0.getAttribute("transform");if(!C0){var I0=S.bBox(i0,!1,jt);return b0&&(I0.left+=b0,I0.right+=b0),O0&&(I0.top+=O0,I0.bottom+=O0),I0}if(jt+="~"+b0+"~"+O0+"~"+C0,Fp=S.savedBBoxes[jt],Fp)return c.extendFlat({},Fp)}}var V0,H0;$o?V0=la:(H0=S.tester.node(),V0=la.cloneNode(!0),H0.appendChild(V0)),v.select(V0).attr("transform",null).call(k.positionText,0,0);var im=V0.getBoundingClientRect(),k0=S.testref.node().getBoundingClientRect();$o||H0.removeChild(V0);var fm={height:im.height,width:im.width,left:im.left-k0.left,top:im.top-k0.top,right:im.right-k0.left,bottom:im.bottom-k0.top};return ut>=$&&(S.savedBBoxes={},ut=0),jt&&(S.savedBBoxes[jt]=fm),ut++,c.extendFlat({},fm)};function yt(la){var $o=la.getAttribute("data-unformatted");if($o!==null)return $o+la.getAttribute("data-math")+la.getAttribute("text-anchor")+la.getAttribute("style")}S.setClipUrl=function(la,$o,jt){la.attr("clip-path",Lt($o,jt))};function Lt(la,$o){if(!la)return null;var jt=$o._context,Fp=jt._exportedPlot?"":jt._baseUrl||"";return Fp?"url('"+Fp+"#"+la+"')":"url(#"+la+")"}S.getTranslate=function(la){var $o=/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,jt=la.attr?"attr":"getAttribute",Fp=la[jt]("transform")||"",i0=Fp.replace($o,function(b0,O0,C0){return[O0,C0].join(" ")}).split(" ");return{x:+i0[0]||0,y:+i0[1]||0}},S.setTranslate=function(la,$o,jt){var Fp=/(\btranslate\(.*?\);?)/,i0=la.attr?"attr":"getAttribute",b0=la.attr?"attr":"setAttribute",O0=la[i0]("transform")||"";return $o=$o||0,jt=jt||0,O0=O0.replace(Fp,"").trim(),O0+=d($o,jt),O0=O0.trim(),la[b0]("transform",O0),O0},S.getScale=function(la){var $o=/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,jt=la.attr?"attr":"getAttribute",Fp=la[jt]("transform")||"",i0=Fp.replace($o,function(b0,O0,C0){return[O0,C0].join(" ")}).split(" ");return{x:+i0[0]||1,y:+i0[1]||1}},S.setScale=function(la,$o,jt){var Fp=/(\bscale\(.*?\);?)/,i0=la.attr?"attr":"getAttribute",b0=la.attr?"attr":"setAttribute",O0=la[i0]("transform")||"";return $o=$o||1,jt=jt||1,O0=O0.replace(Fp,"").trim(),O0+="scale("+$o+","+jt+")",O0=O0.trim(),la[b0]("transform",O0),O0};var ke=/\s*sc.*/;S.setPointGroupScale=function(la,$o,jt){if($o=$o||1,jt=jt||1,!!la){var Fp=$o===1&&jt===1?"":"scale("+$o+","+jt+")";la.each(function(){var i0=(this.getAttribute("transform")||"").replace(ke,"");i0+=Fp,i0=i0.trim(),this.setAttribute("transform",i0)})}};var G=/translate\([^)]*\)\s*$/;S.setTextPointsScale=function(la,$o,jt){la&&la.each(function(){var Fp,i0=v.select(this),b0=i0.select("text");if(b0.node()){var O0=parseFloat(b0.attr("x")||0),C0=parseFloat(b0.attr("y")||0),I0=(i0.attr("transform")||"").match(G);$o===1&&jt===1?Fp=[]:Fp=[d(O0,C0),"scale("+$o+","+jt+")",d(-O0,-C0)],I0&&Fp.push(I0),i0.attr("transform",Fp.join(""))}})};function ne(la,$o){var jt;return la&&(jt=la.mf),jt===void 0&&(jt=$o.marker&&$o.marker.standoff||0),!$o._geo&&!$o._xA?-jt:jt}S.getMarkerStandoff=ne;var et=Math.atan2,ct=Math.cos,kt=Math.sin;function Gt(la,$o){var jt=$o[0],Fp=$o[1];return[jt*ct(la)-Fp*kt(la),jt*kt(la)+Fp*ct(la)]}var $t,Ko,Up,e0,E0,m0;function f0(la,$o){var jt=la.ma;jt===void 0&&(jt=$o.marker.angle,(!jt||c.isArrayOrTypedArray(jt))&&(jt=0));var Fp,i0,b0=$o.marker.angleref;if(b0==="previous"||b0==="north"){if($o._geo){var O0=$o._geo.project(la.lonlat);Fp=O0[0],i0=O0[1]}else{var C0=$o._xA,I0=$o._yA;if(C0&&I0)Fp=C0.c2p(la.x),i0=I0.c2p(la.y);else return 90}if($o._geo){var V0=la.lonlat[0],H0=la.lonlat[1],im=$o._geo.project([V0,H0+1e-5]),k0=$o._geo.project([V0+1e-5,H0]),fm=et(k0[1]-i0,k0[0]-Fp),Tm=et(im[1]-i0,im[0]-Fp),om;if(b0==="north")om=jt/180*Math.PI;else if(b0==="previous"){var Rm=V0/180*Math.PI,ci=H0/180*Math.PI,Hp=$t/180*Math.PI,St=Ko/180*Math.PI,Ht=Hp-Rm,Sr=ct(St)*kt(Ht),Rp=kt(St)*ct(ci)-ct(St)*kt(ci)*ct(Ht);om=-et(Sr,Rp)-Math.PI,$t=V0,Ko=H0}var Np=Gt(fm,[ct(om),0]),Jp=Gt(Tm,[kt(om),0]);jt=et(Np[1]+Jp[1],Np[0]+Jp[0])/Math.PI*180,b0==="previous"&&!(m0===$o.uid&&la.i===E0+1)&&(jt=null)}if(b0==="previous"&&!$o._geo)if(m0===$o.uid&&la.i===E0+1&&_(Fp)&&_(i0)){var n0=Fp-Up,S0=i0-e0,_0=$o.line&&$o.line.shape||"",w0=_0.slice(_0.length-1);w0==="h"&&(S0=0),w0==="v"&&(n0=0),jt+=et(S0,n0)/Math.PI*180+90}else jt=null}return Up=Fp,e0=i0,E0=la.i,m0=$o.uid,jt}S.getMarkerAngle=f0}),Q0=t((Ue,ve)=>{var v=l(),c=E(),h=lg(),_=p1(),y=Re(),x=y.strTranslate,w=Y0(),A=sa(),d=j1(),k=qo(),T=$1().OPPOSITE_SIDE,L=/ [XY][0-9]* /,j=1.6,P=1.6;function N(O,B,S){var D=O._fullLayout,z=S.propContainer,H=S.propName,Y=S.placeholder,ht=S.traceIndex,Se=S.avoid||{},ie=S.attributes,X=S.transform,ft=S.containerGroup,Le=1,nt=z.title,Ze=(nt&&nt.text?nt.text:"").trim(),rt=!1,dt=nt&&nt.font?nt.font:{},pt=dt.family,se=dt.size,gt=dt.color,xt=dt.weight,Nt=dt.style,Rt=dt.variant,Pt=dt.textcase,xn=dt.lineposition,oa=dt.shadow,jo=S.subtitlePropName,lt=!!jo,ut=S.subtitlePlaceholder,$=(z.title||{}).subtitle||{text:"",font:{}},yt=($.text||"").trim(),Lt=!1,ke=1,G=$.font,ne=G.family,et=G.size,ct=G.color,kt=G.weight,Gt=G.style,$t=G.variant,Ko=G.textcase,Up=G.lineposition,e0=G.shadow,E0;H==="title.text"?E0="titleText":H.indexOf("axis")!==-1?E0="axisTitleText":H.indexOf("colorbar")!==-1&&(E0="colorbarTitleText");var m0=O._context.edits[E0];function f0(k0,fm){return k0===void 0||fm===void 0?!1:k0.replace(L," % ")===fm.replace(L," % ")}Ze===""?Le=0:f0(Ze,Y)&&(m0||(Ze=""),Le=.2,rt=!0),lt&&(yt===""?ke=0:f0(yt,ut)&&(m0||(yt=""),ke=.2,Lt=!0)),S._meta?Ze=y.templateString(Ze,S._meta):D._meta&&(Ze=y.templateString(Ze,D._meta));var la=Ze||yt||m0,$o;ft||(ft=y.ensureSingle(D._infolayer,"g","g-"+B),$o=D._hColorbarMoveTitle);var jt=ft.selectAll("text."+B).data(la?[0]:[]);jt.enter().append("text"),jt.text(Ze).attr("class",B),jt.exit().remove();var Fp=null,i0=B+"-subtitle",b0=yt||m0;if(lt&&(Fp=ft.selectAll("text."+i0).data(b0?[0]:[]),Fp.enter().append("text"),Fp.text(yt).attr("class",i0),Fp.exit().remove()),!la)return ft;function O0(k0,fm){y.syncOrAsync([C0,I0],{title:k0,subtitle:fm})}function C0(k0){var fm=k0.title,Tm=k0.subtitle,om;!X&&$o&&(X={}),X?(om="",X.rotate&&(om+="rotate("+[X.rotate,ie.x,ie.y]+")"),(X.offset||$o)&&(om+=x(0,(X.offset||0)-($o||0)))):om=null,fm.attr("transform",om);function Rm(Rp){if(Rp){var Np=v.select(Rp.node().parentNode).select("."+i0);if(!Np.empty()){var Jp=Rp.node().getBBox();if(Jp.height){var n0=Jp.y+Jp.height+j*et;Np.attr("y",n0)}}}}if(fm.style("opacity",Le*A.opacity(gt)).call(w.font,{color:A.rgb(gt),size:v.round(se,2),family:pt,weight:xt,style:Nt,variant:Rt,textcase:Pt,shadow:oa,lineposition:xn}).attr(ie).call(d.convertToTspans,O,Rm),Tm&&!Tm.empty()){var ci=ft.select("."+B+"-math-group"),Hp=fm.node().getBBox(),St=ci.node()?ci.node().getBBox():void 0,Ht=St?St.y+St.height+j*et:Hp.y+Hp.height+P*et,Sr=y.extendFlat({},ie,{y:Ht});Tm.attr("transform",om),Tm.style("opacity",ke*A.opacity(ct)).call(w.font,{color:A.rgb(ct),size:v.round(et,2),family:ne,weight:kt,style:Gt,variant:$t,textcase:Ko,shadow:e0,lineposition:Up}).attr(Sr).call(d.convertToTspans,O)}return h.previousPromises(O)}function I0(k0){var fm=k0.title,Tm=v.select(fm.node().parentNode);if(Se&&Se.selection&&Se.side&&Ze){Tm.attr("transform",null);var om=T[Se.side],Rm=Se.side==="left"||Se.side==="top"?-1:1,ci=c(Se.pad)?Se.pad:2,Hp=w.bBox(Tm.node()),St={t:0,b:0,l:0,r:0},Ht=O._fullLayout._reservedMargin;for(var Sr in Ht)for(var Rp in Ht[Sr]){var Np=Ht[Sr][Rp];St[Rp]=Math.max(St[Rp],Np)}var Jp={left:St.l,top:St.t,right:D.width-St.r,bottom:D.height-St.b},n0=Se.maxShift||Rm*(Jp[Se.side]-Hp[Se.side]),S0=0;if(n0<0)S0=n0;else{var _0=Se.offsetLeft||0,w0=Se.offsetTop||0;Hp.left-=_0,Hp.right-=_0,Hp.top-=w0,Hp.bottom-=w0,Se.selection.each(function(){var $0=w.bBox(this);y.bBoxIntersect(Hp,$0,ci)&&(S0=Math.max(S0,Rm*($0[Se.side]-Hp[om])+ci))}),S0=Math.min(n0,S0),z._titleScoot=Math.abs(S0)}if(S0>0||n0<0){var X0={left:[-S0,0],right:[S0,0],top:[0,-S0],bottom:[0,S0]}[Se.side];Tm.attr("transform",x(X0[0],X0[1]))}}}jt.call(O0,Fp);function V0(k0,fm){k0.text(fm).on("mouseover.opacity",function(){v.select(this).transition().duration(k.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){v.select(this).transition().duration(k.HIDE_PLACEHOLDER).style("opacity",0)})}if(m0&&(Ze?jt.on(".opacity",null):(V0(jt,Y),rt=!0),jt.call(d.makeEditable,{gd:O}).on("edit",function(k0){ht!==void 0?_.call("_guiRestyle",O,H,k0,ht):_.call("_guiRelayout",O,H,k0)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(O0)}).on("input",function(k0){this.text(k0||" ").call(d.positionText,ie.x,ie.y)}),lt)){if(lt&&!Ze){var H0=jt.node().getBBox(),im=H0.y+H0.height+P*et;Fp.attr("y",im)}yt?Fp.on(".opacity",null):(V0(Fp,ut),Lt=!0),Fp.call(d.makeEditable,{gd:O}).on("edit",function(k0){_.call("_guiRelayout",O,"title.subtitle.text",k0)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(O0)}).on("input",function(k0){this.text(k0||" ").call(d.positionText,Fp.attr("x"),Fp.attr("y"))})}return jt.classed("js-placeholder",rt),Fp&&!Fp.empty()&&Fp.classed("js-placeholder",Lt),ft}ve.exports={draw:N,SUBTITLE_PADDING_EM:P,SUBTITLE_PADDING_MATHJAX_EM:j}}),tm=t((Ue,ve)=>{var v=l(),c=f().utcFormat,h=Re(),_=h.numberFormat,y=E(),x=h.cleanNumber,w=h.ms2DateTime,A=h.dateTime2ms,d=h.ensureNumber,k=h.isArrayOrTypedArray,T=M(),L=T.FP_SAFE,j=T.BADNUM,P=T.LOG_CLIP,N=T.ONEWEEK,O=T.ONEDAY,B=T.ONEHOUR,S=T.ONEMIN,D=T.ONESEC,z=A1(),H=jm(),Y=H.HOUR_PATTERN,ht=H.WEEKDAY_PATTERN;function Se(X){return Math.pow(10,X)}function ie(X){return X!=null}ve.exports=function(X,ft){ft=ft||{};var Le=X._id||"x",nt=Le.charAt(0);function Ze($,yt){if($>0)return Math.log($)/Math.LN10;if($<=0&&yt&&X.range&&X.range.length===2){var Lt=X.range[0],ke=X.range[1];return .5*(Lt+ke-2*P*Math.abs(Lt-ke))}else return j}function rt($,yt,Lt,ke){if((ke||{}).msUTC&&y($))return+$;var G=A($,Lt||X.calendar);if(G===j)if(y($)){$=+$;var ne=Math.floor(h.mod($+.05,1)*10),et=Math.round($-ne/10);G=A(new Date(et))+ne/10}else return j;return G}function dt($,yt,Lt){return w($,yt,Lt||X.calendar)}function pt($){return X._categories[Math.round($)]}function se($){if(ie($)){if(X._categoriesMap===void 0&&(X._categoriesMap={}),X._categoriesMap[$]!==void 0)return X._categoriesMap[$];X._categories.push(typeof $=="number"?String($):$);var yt=X._categories.length-1;return X._categoriesMap[$]=yt,yt}return j}function gt($,yt){for(var Lt=new Array(yt),ke=0;ke<yt;ke++){var G=($[0]||[])[ke],ne=($[1]||[])[ke];Lt[ke]=xt([G,ne])}return Lt}function xt($){if(X._categoriesMap)return X._categoriesMap[$]}function Nt($){var yt=xt($);if(yt!==void 0)return yt;if(y($))return+$}function Rt($){return y($)?+$:xt($)}function Pt($,yt,Lt){return v.round(Lt+yt*$,2)}function xn($,yt,Lt){return($-Lt)/yt}var oa=function($){return y($)?Pt($,X._m,X._b):j},jo=function($){return xn($,X._m,X._b)};if(X.rangebreaks){var lt=nt==="y";oa=function($){if(!y($))return j;var yt=X._rangebreaks.length;if(!yt)return Pt($,X._m,X._b);var Lt=lt;X.range[0]>X.range[1]&&(Lt=!Lt);for(var ke=Lt?-1:1,G=ke*$,ne=0,et=0;et<yt;et++){var ct=ke*X._rangebreaks[et].min,kt=ke*X._rangebreaks[et].max;if(G<ct)break;if(G>kt)ne=et+1;else{ne=G<(ct+kt)/2?et:et+1;break}}var Gt=X._B[ne]||0;return isFinite(Gt)?Pt($,X._m2,Gt):0},jo=function($){var yt=X._rangebreaks.length;if(!yt)return xn($,X._m,X._b);for(var Lt=0,ke=0;ke<yt&&!($<X._rangebreaks[ke].pmin);ke++)$>X._rangebreaks[ke].pmax&&(Lt=ke+1);return xn($,X._m2,X._B[Lt])}}X.c2l=X.type==="log"?Ze:d,X.l2c=X.type==="log"?Se:d,X.l2p=oa,X.p2l=jo,X.c2p=X.type==="log"?function($,yt){return oa(Ze($,yt))}:oa,X.p2c=X.type==="log"?function($){return Se(jo($))}:jo,["linear","-"].indexOf(X.type)!==-1?(X.d2r=X.r2d=X.d2c=X.r2c=X.d2l=X.r2l=x,X.c2d=X.c2r=X.l2d=X.l2r=d,X.d2p=X.r2p=function($){return X.l2p(x($))},X.p2d=X.p2r=jo,X.cleanPos=d):X.type==="log"?(X.d2r=X.d2l=function($,yt){return Ze(x($),yt)},X.r2d=X.r2c=function($){return Se(x($))},X.d2c=X.r2l=x,X.c2d=X.l2r=d,X.c2r=Ze,X.l2d=Se,X.d2p=function($,yt){return X.l2p(X.d2r($,yt))},X.p2d=function($){return Se(jo($))},X.r2p=function($){return X.l2p(x($))},X.p2r=jo,X.cleanPos=d):X.type==="date"?(X.d2r=X.r2d=h.identity,X.d2c=X.r2c=X.d2l=X.r2l=rt,X.c2d=X.c2r=X.l2d=X.l2r=dt,X.d2p=X.r2p=function($,yt,Lt){return X.l2p(rt($,0,Lt))},X.p2d=X.p2r=function($,yt,Lt){return dt(jo($),yt,Lt)},X.cleanPos=function($){return h.cleanDate($,j,X.calendar)}):X.type==="category"?(X.d2c=X.d2l=se,X.r2d=X.c2d=X.l2d=pt,X.d2r=X.d2l_noadd=Nt,X.r2c=function($){var yt=Rt($);return yt!==void 0?yt:X.fraction2r(.5)},X.l2r=X.c2r=d,X.r2l=Rt,X.d2p=function($){return X.l2p(X.r2c($))},X.p2d=function($){return pt(jo($))},X.r2p=X.d2p,X.p2r=jo,X.cleanPos=function($){return typeof $=="string"&&$!==""?$:d($)}):X.type==="multicategory"&&(X.r2d=X.c2d=X.l2d=pt,X.d2r=X.d2l_noadd=Nt,X.r2c=function($){var yt=Nt($);return yt!==void 0?yt:X.fraction2r(.5)},X.r2c_just_indices=xt,X.l2r=X.c2r=d,X.r2l=Nt,X.d2p=function($){return X.l2p(X.r2c($))},X.p2d=function($){return pt(jo($))},X.r2p=X.d2p,X.p2r=jo,X.cleanPos=function($){return Array.isArray($)||typeof $=="string"&&$!==""?$:d($)},X.setupMultiCategory=function($){var yt=X._traceIndices,Lt,ke,G=X._matchGroup;if(G&&X._categories.length===0){for(var ne in G)if(ne!==Le){var et=ft[z.id2name(ne)];yt=yt.concat(et._traceIndices)}}var ct=[[0,{}],[0,{}]],kt=[];for(Lt=0;Lt<yt.length;Lt++){var Gt=$[yt[Lt]];if(nt in Gt){var $t=Gt[nt],Ko=Gt._length||h.minRowLength($t);if(k($t[0])&&k($t[1]))for(ke=0;ke<Ko;ke++){var Up=$t[0][ke],e0=$t[1][ke];ie(Up)&&ie(e0)&&(kt.push([Up,e0]),Up in ct[0][1]||(ct[0][1][Up]=ct[0][0]++),e0 in ct[1][1]||(ct[1][1][e0]=ct[1][0]++))}}}for(kt.sort(function(E0,m0){var f0=ct[0][1],la=f0[E0[0]]-f0[m0[0]];if(la)return la;var $o=ct[1][1];return $o[E0[1]]-$o[m0[1]]}),Lt=0;Lt<kt.length;Lt++)se(kt[Lt])}),X.fraction2r=function($){var yt=X.r2l(X.range[0]),Lt=X.r2l(X.range[1]);return X.l2r(yt+$*(Lt-yt))},X.r2fraction=function($){var yt=X.r2l(X.range[0]),Lt=X.r2l(X.range[1]);return(X.r2l($)-yt)/(Lt-yt)},X.limitRange=function($){var yt=X.minallowed,Lt=X.maxallowed;if(!(yt===void 0&&Lt===void 0)){$||($="range");var ke=h.nestedProperty(X,$).get(),G=h.simpleMap(ke,X.r2l),ne=G[1]<G[0];ne&&G.reverse();var et=h.simpleMap([yt,Lt],X.r2l);if(yt!==void 0&&G[0]<et[0]&&(ke[ne?1:0]=yt),Lt!==void 0&&G[1]>et[1]&&(ke[ne?0:1]=Lt),ke[0]===ke[1]){var ct=X.l2r(yt),kt=X.l2r(Lt);if(yt!==void 0){var Gt=ct+1;Lt!==void 0&&(Gt=Math.min(Gt,kt)),ke[ne?1:0]=Gt}if(Lt!==void 0){var $t=kt+1;yt!==void 0&&($t=Math.max($t,ct)),ke[ne?0:1]=$t}}}},X.cleanRange=function($,yt){X._cleanRange($,yt),X.limitRange($)},X._cleanRange=function($,yt){yt||(yt={}),$||($="range");var Lt=h.nestedProperty(X,$).get(),ke,G;if(X.type==="date"?G=h.dfltRange(X.calendar):nt==="y"?G=H.DFLTRANGEY:X._name==="realaxis"?G=[0,1]:G=yt.dfltRange||H.DFLTRANGEX,G=G.slice(),(X.rangemode==="tozero"||X.rangemode==="nonnegative")&&(G[0]=0),!Lt||Lt.length!==2){h.nestedProperty(X,$).set(G);return}var ne=Lt[0]===null,et=Lt[1]===null;for(X.type==="date"&&!X.autorange&&(Lt[0]=h.cleanDate(Lt[0],j,X.calendar),Lt[1]=h.cleanDate(Lt[1],j,X.calendar)),ke=0;ke<2;ke++)if(X.type==="date"){if(!h.isDateTime(Lt[ke],X.calendar)){X[$]=G;break}if(X.r2l(Lt[0])===X.r2l(Lt[1])){var ct=h.constrain(X.r2l(Lt[0]),h.MIN_MS+1e3,h.MAX_MS-1e3);Lt[0]=X.l2r(ct-1e3),Lt[1]=X.l2r(ct+1e3);break}}else{if(!y(Lt[ke]))if(!(ne||et)&&y(Lt[1-ke]))Lt[ke]=Lt[1-ke]*(ke?10:.1);else{X[$]=G;break}if(Lt[ke]<-L?Lt[ke]=-L:Lt[ke]>L&&(Lt[ke]=L),Lt[0]===Lt[1]){var kt=Math.max(1,Math.abs(Lt[0]*1e-6));Lt[0]-=kt,Lt[1]+=kt}}},X.setScale=function($){var yt=ft._size;if(X.overlaying){var Lt=z.getFromId({_fullLayout:ft},X.overlaying);X.domain=Lt.domain}var ke=$&&X._r?"_r":"range",G=X.calendar;X.cleanRange(ke);var ne=X.r2l(X[ke][0],G),et=X.r2l(X[ke][1],G),ct=nt==="y";if(ct?(X._offset=yt.t+(1-X.domain[1])*yt.h,X._length=yt.h*(X.domain[1]-X.domain[0]),X._m=X._length/(ne-et),X._b=-X._m*et):(X._offset=yt.l+X.domain[0]*yt.w,X._length=yt.w*(X.domain[1]-X.domain[0]),X._m=X._length/(et-ne),X._b=-X._m*ne),X._rangebreaks=[],X._lBreaks=0,X._m2=0,X._B=[],X.rangebreaks){var kt,Gt;if(X._rangebreaks=X.locateBreaks(Math.min(ne,et),Math.max(ne,et)),X._rangebreaks.length){for(kt=0;kt<X._rangebreaks.length;kt++)Gt=X._rangebreaks[kt],X._lBreaks+=Math.abs(Gt.max-Gt.min);var $t=ct;ne>et&&($t=!$t),$t&&X._rangebreaks.reverse();var Ko=$t?-1:1;for(X._m2=Ko*X._length/(Math.abs(et-ne)-X._lBreaks),X._B.push(-X._m2*(ct?et:ne)),kt=0;kt<X._rangebreaks.length;kt++)Gt=X._rangebreaks[kt],X._B.push(X._B[X._B.length-1]-Ko*X._m2*(Gt.max-Gt.min));for(kt=0;kt<X._rangebreaks.length;kt++)Gt=X._rangebreaks[kt],Gt.pmin=oa(Gt.min),Gt.pmax=oa(Gt.max)}}if(!isFinite(X._m)||!isFinite(X._b)||X._length<0)throw ft._replotting=!1,new Error("Something went wrong with axis scaling")},X.maskBreaks=function($){var yt=X.rangebreaks||[],Lt,ke,G,ne,et;yt._cachedPatterns||(yt._cachedPatterns=yt.map(function(f0){return f0.enabled&&f0.bounds?h.simpleMap(f0.bounds,f0.pattern?x:X.d2c):null})),yt._cachedValues||(yt._cachedValues=yt.map(function(f0){return f0.enabled&&f0.values?h.simpleMap(f0.values,X.d2c).sort(h.sorterAsc):null}));for(var ct=0;ct<yt.length;ct++){var kt=yt[ct];if(kt.enabled){if(kt.bounds){var Gt=kt.pattern;switch(Lt=yt._cachedPatterns[ct],ke=Lt[0],G=Lt[1],Gt){case ht:et=new Date($),ne=et.getUTCDay(),ke>G&&(G+=7,ne<ke&&(ne+=7));break;case Y:et=new Date($);var $t=et.getUTCHours(),Ko=et.getUTCMinutes(),Up=et.getUTCSeconds(),e0=et.getUTCMilliseconds();ne=$t+(Ko/60+Up/3600+e0/36e5),ke>G&&(G+=24,ne<ke&&(ne+=24));break;case"":ne=$;break}if(ne>=ke&&ne<G)return j}else for(var E0=yt._cachedValues[ct],m0=0;m0<E0.length;m0++)if(ke=E0[m0],G=ke+kt.dvalue,$>=ke&&$<G)return j}}return $},X.locateBreaks=function($,yt){var Lt,ke,G,ne,et=[];if(!X.rangebreaks)return et;var ct=X.rangebreaks.slice().sort(function($o,jt){return $o.pattern===ht&&jt.pattern===Y?-1:jt.pattern===ht&&$o.pattern===Y?1:0}),kt=function($o,jt){if($o=h.constrain($o,$,yt),jt=h.constrain(jt,$,yt),$o!==jt){for(var Fp=!0,i0=0;i0<et.length;i0++){var b0=et[i0];$o<b0.max&&jt>=b0.min&&($o<b0.min&&(b0.min=$o),jt>b0.max&&(b0.max=jt),Fp=!1)}Fp&&et.push({min:$o,max:jt})}};for(Lt=0;Lt<ct.length;Lt++){var Gt=ct[Lt];if(Gt.enabled)if(Gt.bounds){var $t=$,Ko=yt;Gt.pattern&&($t=Math.floor($t)),ke=h.simpleMap(Gt.bounds,Gt.pattern?x:X.r2l),G=ke[0],ne=ke[1];var Up=new Date($t),e0,E0;switch(Gt.pattern){case ht:E0=N,e0=((ne<G?7:0)+(ne-G))*O,$t+=G*O-(Up.getUTCDay()*O+Up.getUTCHours()*B+Up.getUTCMinutes()*S+Up.getUTCSeconds()*D+Up.getUTCMilliseconds());break;case Y:E0=O,e0=((ne<G?24:0)+(ne-G))*B,$t+=G*B-(Up.getUTCHours()*B+Up.getUTCMinutes()*S+Up.getUTCSeconds()*D+Up.getUTCMilliseconds());break;default:$t=Math.min(ke[0],ke[1]),Ko=Math.max(ke[0],ke[1]),E0=Ko-$t,e0=E0}for(var m0=$t;m0<Ko;m0+=E0)kt(m0,m0+e0)}else for(var f0=h.simpleMap(Gt.values,X.d2c),la=0;la<f0.length;la++)G=f0[la],ne=G+Gt.dvalue,kt(G,ne)}return et.sort(function($o,jt){return $o.min-jt.min}),et},X.makeCalcdata=function($,yt,Lt){var ke,G,ne,et,ct=X.type,kt=ct==="date"&&$[yt+"calendar"];if(yt in $){if(ke=$[yt],et=$._length||h.minRowLength(ke),h.isTypedArray(ke)&&(ct==="linear"||ct==="log")){if(et===ke.length)return ke;if(ke.subarray)return ke.subarray(0,et)}if(ct==="multicategory")return gt(ke,et);for(G=new Array(et),ne=0;ne<et;ne++)G[ne]=X.d2c(ke[ne],0,kt,Lt)}else{var Gt=yt+"0"in $?X.d2c($[yt+"0"],0,kt):0,$t=$["d"+yt]?Number($["d"+yt]):1;for(ke=$[{x:"y",y:"x"}[yt]],et=$._length||ke.length,G=new Array(et),ne=0;ne<et;ne++)G[ne]=Gt+ne*$t}if(X.rangebreaks)for(ne=0;ne<et;ne++)G[ne]=X.maskBreaks(G[ne]);return G},X.isValidRange=function($,yt){return Array.isArray($)&&$.length===2&&(yt&&$[0]===null||y(X.r2l($[0])))&&(yt&&$[1]===null||y(X.r2l($[1])))},X.getAutorangeDflt=function($,yt){var Lt=!X.isValidRange($,"nullOk");return Lt&&yt&&yt.reverseDflt?Lt="reversed":$&&($[0]===null&&$[1]===null?Lt=!0:$[0]===null&&$[1]!==null?Lt="min":$[0]!==null&&$[1]===null&&(Lt="max")),Lt},X.isReversed=function(){var $=X.autorange;return $==="reversed"||$==="min reversed"||$==="max reversed"},X.isPtWithinRange=function($,yt){var Lt=X.c2l($[nt],null,yt),ke=X.r2l(X.range[0]),G=X.r2l(X.range[1]);return ke<G?ke<=Lt&&Lt<=G:G<=Lt&&Lt<=ke},X._emptyCategories=function(){X._categories=[],X._categoriesMap={}},X.clearCalc=function(){var $=X._matchGroup;if($){var yt=null,Lt=null;for(var ke in $){var G=ft[z.id2name(ke)];if(G._categories){yt=G._categories,Lt=G._categoriesMap;break}}yt&&Lt?(X._categories=yt,X._categoriesMap=Lt):X._emptyCategories()}else X._emptyCategories();if(X._initialCategories)for(var ne=0;ne<X._initialCategories.length;ne++)se(X._initialCategories[ne])},X.sortByInitialCategories=function(){var $=[];if(X._emptyCategories(),X._initialCategories)for(var yt=0;yt<X._initialCategories.length;yt++)se(X._initialCategories[yt]);$=$.concat(X._traceIndices);var Lt=X._matchGroup;for(var ke in Lt)if(Le!==ke){var G=ft[z.id2name(ke)];G._categories=X._categories,G._categoriesMap=X._categoriesMap,$=$.concat(G._traceIndices)}return $};var ut=ft._d3locale;X.type==="date"&&(X._dateFormat=ut?ut.timeFormat:c,X._extraFormat=ft._extraFormat),X._separators=ft.separators,X._numFormat=ut?ut.numberFormat:_,delete X._minDtick,delete X._forceTick0}}),G0=t((Ue,ve)=>{var v=E(),c=Re(),h=M().BADNUM,_=c.isArrayOrTypedArray,y=c.isDateTime,x=c.cleanNumber,w=Math.round;ve.exports=function(P,N,O){var B=P,S=O.noMultiCategory;if(_(B)&&!B.length)return"-";if(!S&&j(B))return"multicategory";if(S&&Array.isArray(B[0])){for(var D=[],z=0;z<B.length;z++)if(_(B[z]))for(var H=0;H<B[z].length;H++)D.push(B[z][H]);B=D}if(k(B,N))return"date";var Y=O.autotypenumbers!=="strict";return L(B,Y)?"category":d(B,Y)?"linear":"-"};function A(P,N){return N?v(P):typeof P=="number"}function d(P,N){for(var O=P.length,B=0;B<O;B++)if(A(P[B],N))return!0;return!1}function k(P,N){for(var O=P.length,B=T(O),S=0,D=0,z={},H=0;H<O;H+=B){var Y=w(H),ht=P[Y],Se=String(ht);z[Se]||(z[Se]=1,y(ht,N)&&S++,v(ht)&&D++)}return S>D*2}function T(P){return Math.max(1,(P-1)/1e3)}function L(P,N){for(var O=P.length,B=T(O),S=0,D=0,z={},H=0;H<O;H+=B){var Y=w(H),ht=P[Y],Se=String(ht);if(!z[Se]){z[Se]=1;var ie=typeof ht;ie==="boolean"?D++:(N?x(ht)!==h:ie==="number")?S++:ie==="string"&&D++}}return D>S*2}function j(P){return _(P[0])&&_(P[1])}}),Pm=t((Ue,ve)=>{var v=l(),c=E(),h=Re(),_=M().FP_SAFE,y=p1(),x=Y0(),w=A1(),A=w.getFromId,d=w.isLinked;ve.exports={applyAutorangeOptions:ft,getAutoRange:k,makePadFn:L,doAutoRange:O,findExtremes:B,concatExtremes:N};function k(Le,nt){var Ze,rt,dt=[],pt=Le._fullLayout,se=L(pt,nt,0),gt=L(pt,nt,1),xt=N(Le,nt),Nt=xt.min,Rt=xt.max;if(Nt.length===0||Rt.length===0)return h.simpleMap(nt.range,nt.r2l);var Pt=Nt[0].val,xn=Rt[0].val;for(Ze=1;Ze<Nt.length&&Pt===xn;Ze++)Pt=Math.min(Pt,Nt[Ze].val);for(Ze=1;Ze<Rt.length&&Pt===xn;Ze++)xn=Math.max(xn,Rt[Ze].val);var oa=nt.autorange,jo=oa==="reversed"||oa==="min reversed"||oa==="max reversed";if(!jo&&nt.range){var lt=h.simpleMap(nt.range,nt.r2l);jo=lt[1]<lt[0]}nt.autorange==="reversed"&&(nt.autorange=!0);var ut=nt.rangemode,$=ut==="tozero",yt=ut==="nonnegative",Lt=nt._length,ke=Lt/10,G=0,ne,et,ct,kt,Gt,$t;for(Ze=0;Ze<Nt.length;Ze++)for(ne=Nt[Ze],rt=0;rt<Rt.length;rt++)et=Rt[rt],$t=et.val-ne.val-T(nt,ne.val,et.val),$t>0&&(Gt=Lt-se(ne)-gt(et),Gt>ke?$t/Gt>G&&(ct=ne,kt=et,G=$t/Gt):$t/Lt>G&&(ct={val:ne.val,nopad:1},kt={val:et.val,nopad:1},G=$t/Lt));function Ko(f0,la){return Math.max(f0,gt(la))}if(Pt===xn){var Up=Pt-1,e0=Pt+1;if($)if(Pt===0)dt=[0,1];else{var E0=(Pt>0?Rt:Nt).reduce(Ko,0),m0=Pt/(1-Math.min(.5,E0/Lt));dt=Pt>0?[0,m0]:[m0,0]}else yt?dt=[Math.max(0,Up),Math.max(1,e0)]:dt=[Up,e0]}else $?(ct.val>=0&&(ct={val:0,nopad:1}),kt.val<=0&&(kt={val:0,nopad:1})):yt&&(ct.val-G*se(ct)<0&&(ct={val:0,nopad:1}),kt.val<=0&&(kt={val:1,nopad:1})),G=(kt.val-ct.val-T(nt,ne.val,et.val))/(Lt-se(ct)-gt(kt)),dt=[ct.val-G*se(ct),kt.val+G*gt(kt)];return dt=ft(dt,nt),nt.limitRange&&nt.limitRange(),jo&&dt.reverse(),h.simpleMap(dt,nt.l2r||Number)}function T(Le,nt,Ze){var rt=0;if(Le.rangebreaks)for(var dt=Le.locateBreaks(nt,Ze),pt=0;pt<dt.length;pt++){var se=dt[pt];rt+=se.max-se.min}return rt}function L(Le,nt,Ze){var rt=.05*nt._length,dt=nt._anchorAxis||{};if((nt.ticklabelposition||"").indexOf("inside")!==-1||(dt.ticklabelposition||"").indexOf("inside")!==-1){var pt=nt.isReversed();if(!pt){var se=h.simpleMap(nt.range,nt.r2l);pt=se[1]<se[0]}pt&&(Ze=!Ze)}var gt=0;return d(Le,nt._id)||(gt=P(Le,nt,Ze)),rt=Math.max(gt,rt),nt.constrain==="domain"&&nt._inputDomain&&(rt*=(nt._inputDomain[1]-nt._inputDomain[0])/(nt.domain[1]-nt.domain[0])),function(xt){return xt.nopad?0:xt.pad+(xt.extrapad?rt:gt)}}var j=3;function P(Le,nt,Ze){var rt=0,dt=nt._id.charAt(0)==="x";for(var pt in Le._plots){var se=Le._plots[pt];if(!(nt._id!==se.xaxis._id&&nt._id!==se.yaxis._id)){var gt=(dt?se.yaxis:se.xaxis)||{};if((gt.ticklabelposition||"").indexOf("inside")!==-1&&(!Ze&&(gt.side==="left"||gt.side==="bottom")||Ze&&(gt.side==="top"||gt.side==="right"))){if(gt._vals){var xt=h.deg2rad(gt._tickAngles[gt._id+"tick"]||0),Nt=Math.abs(Math.cos(xt)),Rt=Math.abs(Math.sin(xt));if(!gt._vals[0].bb){var Pt=gt._id+"tick",xn=gt._selections[Pt];xn.each(function(yt){var Lt=v.select(this),ke=Lt.select(".text-math-group");ke.empty()&&(yt.bb=x.bBox(Lt.node()))})}for(var oa=0;oa<gt._vals.length;oa++){var jo=gt._vals[oa],lt=jo.bb;if(lt){var ut=2*j+lt.width,$=2*j+lt.height;rt=Math.max(rt,dt?Math.max(ut*Nt,$*Rt):Math.max($*Nt,ut*Rt))}}}gt.ticks==="inside"&&gt.ticklabelposition==="inside"&&(rt+=gt.ticklen||0)}}}return rt}function N(Le,nt,Ze){var rt=nt._id,dt=Le._fullData,pt=Le._fullLayout,se=[],gt=[],xt,Nt,Rt;function Pt(ut,$){for(xt=0;xt<$.length;xt++){var yt=ut[$[xt]],Lt=(yt._extremes||{})[rt];if(yt.visible===!0&&Lt){for(Nt=0;Nt<Lt.min.length;Nt++)Rt=Lt.min[Nt],S(se,Rt.val,Rt.pad,{extrapad:Rt.extrapad});for(Nt=0;Nt<Lt.max.length;Nt++)Rt=Lt.max[Nt],D(gt,Rt.val,Rt.pad,{extrapad:Rt.extrapad})}}}if(Pt(dt,nt._traceIndices),Pt(pt.annotations||[],nt._annIndices||[]),Pt(pt.shapes||[],nt._shapeIndices||[]),nt._matchGroup&&!Ze){for(var xn in nt._matchGroup)if(xn!==nt._id){var oa=A(Le,xn),jo=N(Le,oa,!0),lt=nt._length/oa._length;for(Nt=0;Nt<jo.min.length;Nt++)Rt=jo.min[Nt],S(se,Rt.val,Rt.pad*lt,{extrapad:Rt.extrapad});for(Nt=0;Nt<jo.max.length;Nt++)Rt=jo.max[Nt],D(gt,Rt.val,Rt.pad*lt,{extrapad:Rt.extrapad})}}return{min:se,max:gt}}function O(Le,nt,Ze){if(nt.setScale(),nt.autorange){nt.range=Ze?Ze.slice():k(Le,nt),nt._r=nt.range.slice(),nt._rl=h.simpleMap(nt._r,nt.r2l);var rt=nt._input,dt={};dt[nt._attr+".range"]=nt.range,dt[nt._attr+".autorange"]=nt.autorange,y.call("_storeDirectGUIEdit",Le.layout,Le._fullLayout._preGUI,dt),rt.range=nt.range.slice(),rt.autorange=nt.autorange}var pt=nt._anchorAxis;if(pt&&pt.rangeslider){var se=pt.rangeslider[nt._name];se&&se.rangemode==="auto"&&(se.range=k(Le,nt)),pt._input.rangeslider[nt._name]=h.extendFlat({},se)}}function B(Le,nt,Ze){Ze||(Ze={}),Le._m||Le.setScale();var rt=[],dt=[],pt=nt.length,se=Ze.padded||!1,gt=Ze.tozero&&(Le.type==="linear"||Le.type==="-"),xt=Le.type==="log",Nt=!1,Rt=Ze.vpadLinearized||!1,Pt,xn,oa,jo,lt,ut,$,yt,Lt;function ke(Ko){if(Array.isArray(Ko))return Nt=!0,function(e0){return Math.max(Number(Ko[e0]||0),0)};var Up=Math.max(Number(Ko||0),0);return function(){return Up}}var G=ke((Le._m>0?Ze.ppadplus:Ze.ppadminus)||Ze.ppad||0),ne=ke((Le._m>0?Ze.ppadminus:Ze.ppadplus)||Ze.ppad||0),et=ke(Ze.vpadplus||Ze.vpad),ct=ke(Ze.vpadminus||Ze.vpad);if(!Nt){if(yt=1/0,Lt=-1/0,xt)for(Pt=0;Pt<pt;Pt++)xn=nt[Pt],xn<yt&&xn>0&&(yt=xn),xn>Lt&&xn<_&&(Lt=xn);else for(Pt=0;Pt<pt;Pt++)xn=nt[Pt],xn<yt&&xn>-_&&(yt=xn),xn>Lt&&xn<_&&(Lt=xn);nt=[yt,Lt],pt=2}var kt={tozero:gt,extrapad:se};function Gt(Ko){oa=nt[Ko],c(oa)&&(ut=G(Ko),$=ne(Ko),Rt?(jo=Le.c2l(oa)-ct(Ko),lt=Le.c2l(oa)+et(Ko)):(yt=oa-ct(Ko),Lt=oa+et(Ko),xt&&yt<Lt/10&&(yt=Lt/10),jo=Le.c2l(yt),lt=Le.c2l(Lt)),gt&&(jo=Math.min(0,jo),lt=Math.max(0,lt)),H(jo)&&S(rt,jo,$,kt),H(lt)&&D(dt,lt,ut,kt))}var $t=Math.min(6,pt);for(Pt=0;Pt<$t;Pt++)Gt(Pt);for(Pt=pt-1;Pt>=$t;Pt--)Gt(Pt);return{min:rt,max:dt,opts:Ze}}function S(Le,nt,Ze,rt){z(Le,nt,Ze,rt,Y)}function D(Le,nt,Ze,rt){z(Le,nt,Ze,rt,ht)}function z(Le,nt,Ze,rt,dt){for(var pt=rt.tozero,se=rt.extrapad,gt=!0,xt=0;xt<Le.length&&gt;xt++){var Nt=Le[xt];if(dt(Nt.val,nt)&&Nt.pad>=Ze&&(Nt.extrapad||!se)){gt=!1;break}else dt(nt,Nt.val)&&Nt.pad<=Ze&&(se||!Nt.extrapad)&&(Le.splice(xt,1),xt--)}if(gt){var Rt=pt&&nt===0;Le.push({val:nt,pad:Rt?0:Ze,extrapad:Rt?!1:se})}}function H(Le){return c(Le)&&Math.abs(Le)<_}function Y(Le,nt){return Le<=nt}function ht(Le,nt){return Le>=nt}function Se(Le,nt){var Ze=nt.autorangeoptions;return Ze&&Ze.minallowed!==void 0&&X(nt,Ze.minallowed,Ze.maxallowed)?Ze.minallowed:Ze&&Ze.clipmin!==void 0&&X(nt,Ze.clipmin,Ze.clipmax)?Math.max(Le,nt.d2l(Ze.clipmin)):Le}function ie(Le,nt){var Ze=nt.autorangeoptions;return Ze&&Ze.maxallowed!==void 0&&X(nt,Ze.minallowed,Ze.maxallowed)?Ze.maxallowed:Ze&&Ze.clipmax!==void 0&&X(nt,Ze.clipmin,Ze.clipmax)?Math.min(Le,nt.d2l(Ze.clipmax)):Le}function X(Le,nt,Ze){return nt!==void 0&&Ze!==void 0?(nt=Le.d2l(nt),Ze=Le.d2l(Ze),nt<Ze):!0}function ft(Le,nt){if(!nt||!nt.autorangeoptions)return Le;var Ze=Le[0],rt=Le[1],dt=nt.autorangeoptions.include;if(dt!==void 0){var pt=nt.d2l(Ze),se=nt.d2l(rt);h.isArrayOrTypedArray(dt)||(dt=[dt]);for(var gt=0;gt<dt.length;gt++){var xt=nt.d2l(dt[gt]);pt>=xt&&(pt=xt,Ze=xt),se<=xt&&(se=xt,rt=xt)}}return Ze=Se(Ze,nt),rt=ie(rt,nt),[Ze,rt]}}),km=t((Ue,ve)=>{var v=l(),c=E(),h=lg(),_=p1(),y=Re(),x=y.strTranslate,w=j1(),A=Q0(),d=sa(),k=Y0(),T=o0(),L=Et(),j=M(),P=j.ONEMAXYEAR,N=j.ONEAVGYEAR,O=j.ONEMINYEAR,B=j.ONEMAXQUARTER,S=j.ONEAVGQUARTER,D=j.ONEMINQUARTER,z=j.ONEMAXMONTH,H=j.ONEAVGMONTH,Y=j.ONEMINMONTH,ht=j.ONEWEEK,Se=j.ONEDAY,ie=Se/2,X=j.ONEHOUR,ft=j.ONEMIN,Le=j.ONESEC,nt=j.ONEMILLI,Ze=j.ONEMICROSEC,rt=j.MINUS_SIGN,dt=j.BADNUM,pt={K:"zeroline"},se={K:"gridline",L:"path"},gt={K:"minor-gridline",L:"path"},xt={K:"tick",L:"path"},Nt={K:"tick",L:"text"},Rt={width:["x","r","l","xl","xr"],height:["y","t","b","yt","yb"],right:["r","xr"],left:["l","xl"],top:["t","yt"],bottom:["b","yb"]},Pt=$1(),xn=Pt.MID_SHIFT,oa=Pt.CAP_SHIFT,jo=Pt.LINE_SPACING,lt=Pt.OPPOSITE_SIDE,ut=3,$=ve.exports={};$.setConvert=tm();var yt=G0(),Lt=A1(),ke=Lt.idSort,G=Lt.isLinked;$.id2name=Lt.id2name,$.name2id=Lt.name2id,$.cleanId=Lt.cleanId,$.list=Lt.list,$.listIds=Lt.listIds,$.getFromId=Lt.getFromId,$.getFromTrace=Lt.getFromTrace;var ne=Pm();$.getAutoRange=ne.getAutoRange,$.findExtremes=ne.findExtremes;var et=1e-4;function ct(Ct){var Tt=(Ct[1]-Ct[0])*et;return[Ct[0]-Tt,Ct[1]+Tt]}$.coerceRef=function(Ct,Tt,jp,Zp,l0,Bp){var Gp=Zp.charAt(Zp.length-1),p0=jp._fullLayout._subplots[Gp+"axis"],a0=Zp+"ref",D0={};return l0||(l0=p0[0]||(typeof Bp=="string"?Bp:Bp[0])),Bp||(Bp=l0),p0=p0.concat(p0.map(function(z0){return z0+" domain"})),D0[a0]={valType:"enumerated",values:p0.concat(Bp?typeof Bp=="string"?[Bp]:Bp:[]),dflt:l0},y.coerce(Ct,Tt,D0,a0)},$.getRefType=function(Ct){return Ct===void 0?Ct:Ct==="paper"?"paper":Ct==="pixel"?"pixel":/( domain)$/.test(Ct)?"domain":"range"},$.coercePosition=function(Ct,Tt,jp,Zp,l0,Bp){var Gp,p0,a0=$.getRefType(Zp);if(a0!=="range")Gp=y.ensureNumber,p0=jp(l0,Bp);else{var D0=$.getFromId(Tt,Zp);Bp=D0.fraction2r(Bp),p0=jp(l0,Bp),Gp=D0.cleanPos}Ct[l0]=Gp(p0)},$.cleanPosition=function(Ct,Tt,jp){var Zp=jp==="paper"||jp==="pixel"?y.ensureNumber:$.getFromId(Tt,jp).cleanPos;return Zp(Ct)},$.redrawComponents=function(Ct,Tt){Tt=Tt||$.listIds(Ct);var jp=Ct._fullLayout;function Zp(l0,Bp,Gp,p0){for(var a0=_.getComponentMethod(l0,Bp),D0={},z0=0;z0<Tt.length;z0++)for(var am=jp[$.id2name(Tt[z0])],Ym=am[Gp],Hm=0;Hm<Ym.length;Hm++){var f1=Ym[Hm];if(!D0[f1]&&(a0(Ct,f1),D0[f1]=1,p0))return}}Zp("annotations","drawOne","_annIndices"),Zp("shapes","drawOne","_shapeIndices"),Zp("images","draw","_imgIndices",!0),Zp("selections","drawOne","_selectionIndices")};var kt=$.getDataConversions=function(Ct,Tt,jp,Zp){var l0,Bp=jp==="x"||jp==="y"||jp==="z"?jp:Zp;if(y.isArrayOrTypedArray(Bp)){if(l0={type:yt(Zp,void 0,{autotypenumbers:Ct._fullLayout.autotypenumbers}),_categories:[]},$.setConvert(l0),l0.type==="category")for(var Gp=0;Gp<Zp.length;Gp++)l0.d2c(Zp[Gp])}else l0=$.getFromTrace(Ct,Tt,Bp);return l0?{d2c:l0.d2c,c2d:l0.c2d}:Bp==="ids"?{d2c:$t,c2d:$t}:{d2c:Gt,c2d:Gt}};function Gt(Ct){return+Ct}function $t(Ct){return String(Ct)}$.getDataToCoordFunc=function(Ct,Tt,jp,Zp){return kt(Ct,Tt,jp,Zp).d2c},$.counterLetter=function(Ct){var Tt=Ct.charAt(0);if(Tt==="x")return"y";if(Tt==="y")return"x"},$.minDtick=function(Ct,Tt,jp,Zp){["log","category","multicategory"].indexOf(Ct.type)!==-1||!Zp?Ct._minDtick=0:Ct._minDtick===void 0?(Ct._minDtick=Tt,Ct._forceTick0=jp):Ct._minDtick&&((Ct._minDtick/Tt+1e-6)%1<2e-6&&((jp-Ct._forceTick0)/Tt%1+1.000001)%1<2e-6?(Ct._minDtick=Tt,Ct._forceTick0=jp):((Tt/Ct._minDtick+1e-6)%1>2e-6||((jp-Ct._forceTick0)/Ct._minDtick%1+1.000001)%1>2e-6)&&(Ct._minDtick=0))},$.saveRangeInitial=function(Ct,Tt){for(var jp=$.list(Ct,"",!0),Zp=!1,l0=0;l0<jp.length;l0++){var Bp=jp[l0],Gp=Bp._rangeInitial0===void 0&&Bp._rangeInitial1===void 0,p0=Gp||Bp.range[0]!==Bp._rangeInitial0||Bp.range[1]!==Bp._rangeInitial1,a0=Bp.autorange;(Gp&&a0!==!0||Tt&&p0)&&(Bp._rangeInitial0=a0==="min"||a0==="max reversed"?void 0:Bp.range[0],Bp._rangeInitial1=a0==="max"||a0==="min reversed"?void 0:Bp.range[1],Bp._autorangeInitial=a0,Zp=!0)}return Zp},$.saveShowSpikeInitial=function(Ct,Tt){for(var jp=$.list(Ct,"",!0),Zp=!1,l0="on",Bp=0;Bp<jp.length;Bp++){var Gp=jp[Bp],p0=Gp._showSpikeInitial===void 0,a0=p0||Gp.showspikes!==Gp._showspikes;(p0||Tt&&a0)&&(Gp._showSpikeInitial=Gp.showspikes,Zp=!0),l0==="on"&&!Gp.showspikes&&(l0="off")}return Ct._fullLayout._cartesianSpikesEnabled=l0,Zp},$.autoBin=function(Ct,Tt,jp,Zp,l0,Bp){var Gp=y.aggNums(Math.min,null,Ct),p0=y.aggNums(Math.max,null,Ct);if(Tt.type==="category"||Tt.type==="multicategory")return{start:Gp-.5,end:p0+.5,size:Math.max(1,Math.round(Bp)||1),_dataSpan:p0-Gp};l0||(l0=Tt.calendar);var a0;if(Tt.type==="log"?a0={type:"linear",range:[Gp,p0]}:a0={type:Tt.type,range:y.simpleMap([Gp,p0],Tt.c2r,0,l0),calendar:l0},$.setConvert(a0),Bp=Bp&&L.dtick(Bp,a0.type),Bp)a0.dtick=Bp,a0.tick0=L.tick0(void 0,a0.type,l0);else{var D0;if(jp)D0=(p0-Gp)/jp;else{var z0=y.distinctVals(Ct),am=Math.pow(10,Math.floor(Math.log(z0.minDiff)/Math.LN10)),Ym=am*y.roundUp(z0.minDiff/am,[.9,1.9,4.9,9.9],!0);D0=Math.max(Ym,2*y.stdev(Ct)/Math.pow(Ct.length,Zp?.25:.4)),c(D0)||(D0=1)}$.autoTicks(a0,D0)}var Hm=a0.dtick,f1=$.tickIncrement($.tickFirst(a0),Hm,"reverse",l0),Im,Jm;if(typeof Hm=="number")f1=Ko(f1,Ct,a0,Gp,p0),Jm=1+Math.floor((p0-f1)/Hm),Im=f1+Jm*Hm;else for(a0.dtick.charAt(0)==="M"&&(f1=Up(f1,Ct,Hm,Gp,l0)),Im=f1,Jm=0;Im<=p0;)Im=$.tickIncrement(Im,Hm,!1,l0),Jm++;return{start:Tt.c2r(f1,0,l0),end:Tt.c2r(Im,0,l0),size:Hm,_dataSpan:p0-Gp}};function Ko(Ct,Tt,jp,Zp,l0){var Bp=0,Gp=0,p0=0,a0=0;function D0(Hm){return(1+(Hm-Ct)*100/jp.dtick)%100<2}for(var z0=0;z0<Tt.length;z0++)Tt[z0]%1===0?p0++:c(Tt[z0])||a0++,D0(Tt[z0])&&Bp++,D0(Tt[z0]+jp.dtick/2)&&Gp++;var am=Tt.length-a0;if(p0===am&&jp.type!=="date")jp.dtick<1?Ct=Zp-.5*jp.dtick:(Ct-=.5,Ct+jp.dtick<Zp&&(Ct+=jp.dtick));else if(Gp<am*.1&&(Bp>am*.3||D0(Zp)||D0(l0))){var Ym=jp.dtick/2;Ct+=Ct+Ym<Zp?Ym:-Ym}return Ct}function Up(Ct,Tt,jp,Zp,l0){var Bp=y.findExactDates(Tt,l0),Gp=.8;if(Bp.exactDays>Gp){var p0=Number(jp.substr(1));Bp.exactYears>Gp&&p0%12===0?Ct=$.tickIncrement(Ct,"M6","reverse")+Se*1.5:Bp.exactMonths>Gp?Ct=$.tickIncrement(Ct,"M1","reverse")+Se*15.5:Ct-=ie;var a0=$.tickIncrement(Ct,jp);if(a0<=Zp)return a0}return Ct}$.prepMinorTicks=function(Ct,Tt,jp){if(!Tt.minor.dtick){delete Ct.dtick;var Zp=Tt.dtick&&c(Tt._tmin),l0;if(Zp){var Bp=$.tickIncrement(Tt._tmin,Tt.dtick,!0);l0=[Tt._tmin,Bp*.99+Tt._tmin*.01]}else{var Gp=y.simpleMap(Tt.range,Tt.r2l);l0=[Gp[0],.8*Gp[0]+.2*Gp[1]]}if(Ct.range=y.simpleMap(l0,Tt.l2r),Ct._isMinor=!0,$.prepTicks(Ct,jp),Zp){var p0=c(Tt.dtick),a0=c(Ct.dtick),D0=p0?Tt.dtick:+Tt.dtick.substring(1),z0=a0?Ct.dtick:+Ct.dtick.substring(1);p0&&a0?e0(D0,z0)?D0===2*ht&&z0===2*Se&&(Ct.dtick=ht):D0===2*ht&&z0===3*Se?Ct.dtick=ht:D0===ht&&!(Tt._input.minor||{}).nticks?Ct.dtick=Se:E0(D0/z0,2.5)?Ct.dtick=D0/2:Ct.dtick=D0:String(Tt.dtick).charAt(0)==="M"?a0?Ct.dtick="M1":e0(D0,z0)?D0>=12&&z0===2&&(Ct.dtick="M3"):Ct.dtick=Tt.dtick:String(Ct.dtick).charAt(0)==="L"?String(Tt.dtick).charAt(0)==="L"?e0(D0,z0)||(Ct.dtick=E0(D0/z0,2.5)?Tt.dtick/2:Tt.dtick):Ct.dtick="D1":Ct.dtick==="D2"&&+Tt.dtick>1&&(Ct.dtick=1)}Ct.range=Tt.range}Tt.minor._tick0Init===void 0&&(Ct.tick0=Tt.tick0)};function e0(Ct,Tt){return Math.abs((Ct/Tt+.5)%1-.5)<.001}function E0(Ct,Tt){return Math.abs(Ct/Tt-1)<.001}$.prepTicks=function(Ct,Tt){var jp=y.simpleMap(Ct.range,Ct.r2l,void 0,void 0,Tt);if(Ct.tickmode==="auto"||!Ct.dtick){var Zp=Ct.nticks,l0;Zp||(Ct.type==="category"||Ct.type==="multicategory"?(l0=Ct.tickfont?y.bigFont(Ct.tickfont.size||12):15,Zp=Ct._length/l0):(l0=Ct._id.charAt(0)==="y"?40:80,Zp=y.constrain(Ct._length/l0,4,9)+1),Ct._name==="radialaxis"&&(Zp*=2)),Ct.minor&&Ct.minor.tickmode!=="array"||Ct.tickmode==="array"&&(Zp*=100),Ct._roughDTick=Math.abs(jp[1]-jp[0])/Zp,$.autoTicks(Ct,Ct._roughDTick),Ct._minDtick>0&&Ct.dtick<Ct._minDtick*2&&(Ct.dtick=Ct._minDtick,Ct.tick0=Ct.l2r(Ct._forceTick0))}Ct.ticklabelmode==="period"&&f0(Ct),Ct.tick0||(Ct.tick0=Ct.type==="date"?"2000-01-01":0),Ct.type==="date"&&Ct.dtick<.1&&(Ct.dtick=.1),k0(Ct)};function m0(Ct){return+Ct.substring(1)}function f0(Ct){var Tt;function jp(){return!(c(Ct.dtick)||Ct.dtick.charAt(0)!=="M")}var Zp=jp(),l0=$.getTickFormat(Ct);if(l0){var Bp=Ct._dtickInit!==Ct.dtick;/%[fLQsSMX]/.test(l0)||(/%[HI]/.test(l0)?(Tt=X,Bp&&!Zp&&Ct.dtick<X&&(Ct.dtick=X)):/%p/.test(l0)?(Tt=ie,Bp&&!Zp&&Ct.dtick<ie&&(Ct.dtick=ie)):/%[Aadejuwx]/.test(l0)?(Tt=Se,Bp&&!Zp&&Ct.dtick<Se&&(Ct.dtick=Se)):/%[UVW]/.test(l0)?(Tt=ht,Bp&&!Zp&&Ct.dtick<ht&&(Ct.dtick=ht)):/%[Bbm]/.test(l0)?(Tt=H,Bp&&(Zp?m0(Ct.dtick)<1:Ct.dtick<Y)&&(Ct.dtick="M1")):/%[q]/.test(l0)?(Tt=S,Bp&&(Zp?m0(Ct.dtick)<3:Ct.dtick<D)&&(Ct.dtick="M3")):/%[Yy]/.test(l0)&&(Tt=N,Bp&&(Zp?m0(Ct.dtick)<12:Ct.dtick<O)&&(Ct.dtick="M12")))}Zp=jp(),Zp&&Ct.tick0===Ct._dowTick0&&(Ct.tick0=Ct._rawTick0),Ct._definedDelta=Tt}function la(Ct,Tt,jp){for(var Zp=0;Zp<Ct.length;Zp++){var l0=Ct[Zp].value,Bp=Zp,Gp=Zp+1;Zp<Ct.length-1?(Bp=Zp,Gp=Zp+1):Zp>0?(Bp=Zp-1,Gp=Zp):(Bp=Zp,Gp=Zp);var p0=Ct[Bp].value,a0=Ct[Gp].value,D0=Math.abs(a0-p0),z0=jp||D0,am=0;z0>=O?D0>=O&&D0<=P?am=D0:am=N:jp===S&&z0>=D?D0>=D&&D0<=B?am=D0:am=S:z0>=Y?D0>=Y&&D0<=z?am=D0:am=H:jp===ht&&z0>=ht?am=ht:z0>=Se?am=Se:jp===ie&&z0>=ie?am=ie:jp===X&&z0>=X&&(am=X);var Ym;am>=D0&&(am=D0,Ym=!0);var Hm=l0+am;if(Tt.rangebreaks&&am>0){for(var f1=84,Im=0,Jm=0;Jm<f1;Jm++){var R1=(Jm+.5)/f1;Tt.maskBreaks(l0*(1-R1)+R1*Hm)!==dt&&Im++}am*=Im/f1,am||(Ct[Zp].drop=!0),Ym&&D0>ht&&(am=D0)}(am>0||Zp===0)&&(Ct[Zp].periodX=l0+am/2)}}$.calcTicks=function(Ct,Tt){for(var jp=Ct.type,Zp=Ct.calendar,l0=Ct.ticklabelstep,Bp=Ct.ticklabelmode==="period",Gp=Ct.range[0]>Ct.range[1],p0=!Ct.ticklabelindex||y.isArrayOrTypedArray(Ct.ticklabelindex)?Ct.ticklabelindex:[Ct.ticklabelindex],a0=y.simpleMap(Ct.range,Ct.r2l,void 0,void 0,Tt),D0=a0[1]<a0[0],z0=Math.min(a0[0],a0[1]),am=Math.max(a0[0],a0[1]),Ym=Math.max(1e3,Ct._length||0),Hm=[],f1=[],Im=[],Jm=[],R1=[],Ng=Ct.minor&&(Ct.minor.ticks||Ct.minor.showgrid),B1=1;B1>=(Ng?0:1);B1--){var av=!B1;B1?(Ct._dtickInit=Ct.dtick,Ct._tick0Init=Ct.tick0):(Ct.minor._dtickInit=Ct.minor.dtick,Ct.minor._tick0Init=Ct.minor.tick0);var dg=B1?Ct:y.extendFlat({},Ct,Ct.minor);if(av?$.prepMinorTicks(dg,Ct,Tt):$.prepTicks(dg,Tt),dg.tickmode==="array"){B1?(Im=[],Hm=Fp(Ct,!av)):(Jm=[],f1=Fp(Ct,!av));continue}if(dg.tickmode==="sync"){Im=[],Hm=jt(Ct);continue}var sv=ct(a0),xg=sv[0],Jg=sv[1],ov=c(dg.dtick),fg=jp==="log"&&!(ov||dg.dtick.charAt(0)==="L"),kv=$.tickFirst(dg,Tt);if(B1){if(Ct._tmin=kv,kv<xg!==D0)break;(jp==="category"||jp==="multicategory")&&(Jg=D0?Math.max(-.5,Jg):Math.min(Ct._categories.length-.5,Jg))}var _v=null,Dg=kv,gv;if(B1){var Kg;ov?Kg=Ct.dtick:jp==="date"?typeof Ct.dtick=="string"&&Ct.dtick.charAt(0)==="M"&&(Kg=H*Ct.dtick.substring(1)):Kg=Ct._roughDTick,gv=Math.round((Ct.r2l(Dg)-Ct.r2l(Ct.tick0))/Kg)-1}var iv=dg.dtick;for(dg.rangebreaks&&dg._tick0Init!==dg.tick0&&(Dg=Ig(Dg,Ct),D0||(Dg=$.tickIncrement(Dg,iv,!D0,Zp))),B1&&Bp&&(Dg=$.tickIncrement(Dg,iv,!D0,Zp),gv--);D0?Dg>=Jg:Dg<=Jg;Dg=$.tickIncrement(Dg,iv,D0,Zp)){if(B1&&gv++,dg.rangebreaks&&!D0){if(Dg<xg)continue;if(dg.maskBreaks(Dg)===dt&&Ig(Dg,dg)>=am)break}if(Im.length>Ym||Dg===_v)break;_v=Dg;var Kv={value:Dg};B1?(fg&&Dg!==(Dg|0)&&(Kv.simpleLabel=!0),l0>1&&gv%l0&&(Kv.skipLabel=!0),Im.push(Kv)):(Kv.minor=!0,Jm.push(Kv))}}if(!Jm||Jm.length<2)p0=!1;else{var Nv=(Jm[1].value-Jm[0].value)*(Gp?-1:1);Xg(Nv,Ct.tickformat)||(p0=!1)}if(!p0)R1=Im;else{var Bg=Im.concat(Jm);Bp&&Im.length&&(Bg=Bg.slice(1)),Bg=Bg.sort(function(Ag,Cg){return Ag.value-Cg.value}).filter(function(Ag,Cg,zg){return Cg===0||Ag.value!==zg[Cg-1].value});var Qg=Bg.map(function(Ag,Cg){return Ag.minor===void 0&&!Ag.skipLabel?Cg:null}).filter(function(Ag){return Ag!==null});Qg.forEach(function(Ag){p0.map(function(Cg){var zg=Ag+Cg;zg>=0&&zg<Bg.length&&y.pushUnique(R1,Bg[zg])})})}if(Ng){var Hg=Ct.minor.ticks==="inside"&&Ct.ticks==="outside"||Ct.minor.ticks==="outside"&&Ct.ticks==="inside";if(!Hg){for(var ev=Im.map(function(Ag){return Ag.value}),Iv=[],Yv=0;Yv<Jm.length;Yv++){var Dv=Jm[Yv],Qv=Dv.value;if(ev.indexOf(Qv)===-1){for(var ny=!1,Bv=0;!ny&&Bv<Im.length;Bv++)1e7+Im[Bv].value===1e7+Qv&&(ny=!0);ny||Iv.push(Dv)}}Jm=Iv}}Bp&&la(R1,Ct,Ct._definedDelta);var tv;if(Ct.rangebreaks){var Sy=Ct._id.charAt(0)==="y",ly=1;Ct.tickmode==="auto"&&(ly=Ct.tickfont?Ct.tickfont.size:12);var Ey=NaN;for(tv=Im.length-1;tv>-1;tv--){if(Im[tv].drop){Im.splice(tv,1);continue}Im[tv].value=Ig(Im[tv].value,Ct);var cy=Ct.c2p(Im[tv].value);(Sy?Ey>cy-ly:Ey<cy+ly)?Im.splice(D0?tv+1:tv,1):Ey=cy}}Eg(Ct)&&Math.abs(a0[1]-a0[0])===360&&Im.pop(),Ct._tmax=(Im[Im.length-1]||{}).value,Ct._prevDateHead="",Ct._inCalcTicks=!0;var uy,Fy=function(Ag){Ag.text="",Ct._prevDateHead=uy};Im=Im.concat(Jm);function Ny(Ag,Cg){var zg=$.tickText(Ag,Cg.value,!1,Cg.simpleLabel),rv=Cg.periodX;return rv!==void 0&&(zg.periodX=rv,(rv>am||rv<z0)&&(rv>am&&(zg.periodX=am),rv<z0&&(zg.periodX=z0),Fy(zg))),zg}var yy;for(tv=0;tv<Im.length;tv++){var Hy=Im[tv].minor,lv=Im[tv].value;Hy?(p0&&R1.indexOf(Im[tv])!==-1?yy=Ny(Ct,Im[tv]):yy={x:lv},yy.minor=!0,f1.push(yy)):(uy=Ct._prevDateHead,yy=Ny(Ct,Im[tv]),(Im[tv].skipLabel||p0&&R1.indexOf(Im[tv])===-1)&&Fy(yy),Hm.push(yy))}return Hm=Hm.concat(f1),Ct._inCalcTicks=!1,Bp&&Hm.length&&(Hm[0].noTick=!0),Hm};function $o(Ct,Tt){return Ct.rangebreaks&&(Tt=Tt.filter(function(jp){return Ct.maskBreaks(jp.x)!==dt})),Tt}function jt(Ct){var Tt=Ct._mainAxis,jp=[];if(Tt._vals){for(var Zp=0;Zp<Tt._vals.length;Zp++)if(!Tt._vals[Zp].noTick){var l0=Tt.l2p(Tt._vals[Zp].x),Bp=Ct.p2l(l0),Gp=$.tickText(Ct,Bp);Tt._vals[Zp].minor&&(Gp.minor=!0,Gp.text=""),jp.push(Gp)}}return jp=$o(Ct,jp),jp}function Fp(Ct,Tt){var jp=y.simpleMap(Ct.range,Ct.r2l),Zp=ct(jp),l0=Math.min(Zp[0],Zp[1]),Bp=Math.max(Zp[0],Zp[1]),Gp=Ct.type==="category"?Ct.d2l_noadd:Ct.d2l;Ct.type==="log"&&String(Ct.dtick).charAt(0)!=="L"&&(Ct.dtick="L"+Math.pow(10,Math.floor(Math.min(Ct.range[0],Ct.range[1]))-1));for(var p0=[],a0=0;a0<=1;a0++)if(!(Tt!==void 0&&(Tt&&a0||Tt===!1&&!a0))&&!(a0&&!Ct.minor)){var D0=a0?Ct.minor.tickvals:Ct.tickvals,z0=a0?[]:Ct.ticktext;if(D0){y.isArrayOrTypedArray(z0)||(z0=[]);for(var am=0;am<D0.length;am++){var Ym=Gp(D0[am]);if(Ym>l0&&Ym<Bp){var Hm=$.tickText(Ct,Ym,!1,String(z0[am]));a0&&(Hm.minor=!0,Hm.text=""),p0.push(Hm)}}}}return p0=$o(Ct,p0),p0}var i0=[2,5,10],b0=[1,2,3,6,12],O0=[1,2,5,10,15,30],C0=[1,2,3,7,14],I0=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],V0=[-.301,0,.301,.699,1],H0=[15,30,45,90,180];function im(Ct,Tt,jp){return Tt*y.roundUp(Ct/Tt,jp)}$.autoTicks=function(Ct,Tt,jp){var Zp;function l0(am){return Math.pow(am,Math.floor(Math.log(Tt)/Math.LN10))}if(Ct.type==="date"){Ct.tick0=y.dateTick0(Ct.calendar,0);var Bp=2*Tt;if(Bp>N)Tt/=N,Zp=l0(10),Ct.dtick="M"+12*im(Tt,Zp,i0);else if(Bp>H)Tt/=H,Ct.dtick="M"+im(Tt,1,b0);else if(Bp>Se){if(Ct.dtick=im(Tt,Se,Ct._hasDayOfWeekBreaks?[1,2,7,14]:C0),!jp){var Gp=$.getTickFormat(Ct),p0=Ct.ticklabelmode==="period";p0&&(Ct._rawTick0=Ct.tick0),/%[uVW]/.test(Gp)?Ct.tick0=y.dateTick0(Ct.calendar,2):Ct.tick0=y.dateTick0(Ct.calendar,1),p0&&(Ct._dowTick0=Ct.tick0)}}else Bp>X?Ct.dtick=im(Tt,X,b0):Bp>ft?Ct.dtick=im(Tt,ft,O0):Bp>Le?Ct.dtick=im(Tt,Le,O0):(Zp=l0(10),Ct.dtick=im(Tt,Zp,i0))}else if(Ct.type==="log"){Ct.tick0=0;var a0=y.simpleMap(Ct.range,Ct.r2l);if(Ct._isMinor&&(Tt*=1.5),Tt>.7)Ct.dtick=Math.ceil(Tt);else if(Math.abs(a0[1]-a0[0])<1){var D0=1.5*Math.abs((a0[1]-a0[0])/Tt);Tt=Math.abs(Math.pow(10,a0[1])-Math.pow(10,a0[0]))/D0,Zp=l0(10),Ct.dtick="L"+im(Tt,Zp,i0)}else Ct.dtick=Tt>.3?"D2":"D1"}else Ct.type==="category"||Ct.type==="multicategory"?(Ct.tick0=0,Ct.dtick=Math.ceil(Math.max(Tt,1))):Eg(Ct)?(Ct.tick0=0,Zp=1,Ct.dtick=im(Tt,Zp,H0)):(Ct.tick0=0,Zp=l0(10),Ct.dtick=im(Tt,Zp,i0));if(Ct.dtick===0&&(Ct.dtick=1),!c(Ct.dtick)&&typeof Ct.dtick!="string"){var z0=Ct.dtick;throw Ct.dtick=1,"ax.dtick error: "+String(z0)}};function k0(Ct){var Tt=Ct.dtick;if(Ct._tickexponent=0,!c(Tt)&&typeof Tt!="string"&&(Tt=1),(Ct.type==="category"||Ct.type==="multicategory")&&(Ct._tickround=null),Ct.type==="date"){var jp=Ct.r2l(Ct.tick0),Zp=Ct.l2r(jp).replace(/(^-|i)/g,""),l0=Zp.length;if(String(Tt).charAt(0)==="M")l0>10||Zp.substr(5)!=="01-01"?Ct._tickround="d":Ct._tickround=+Tt.substr(1)%12===0?"y":"m";else if(Tt>=Se&&l0<=10||Tt>=Se*15)Ct._tickround="d";else if(Tt>=ft&&l0<=16||Tt>=X)Ct._tickround="M";else if(Tt>=Le&&l0<=19||Tt>=ft)Ct._tickround="S";else{var Bp=Ct.l2r(jp+Tt).replace(/^-/,"").length;Ct._tickround=Math.max(l0,Bp)-20,Ct._tickround<0&&(Ct._tickround=4)}}else if(c(Tt)||Tt.charAt(0)==="L"){var Gp=Ct.range.map(Ct.r2d||Number);c(Tt)||(Tt=Number(Tt.substr(1))),Ct._tickround=2-Math.floor(Math.log(Tt)/Math.LN10+.01);var p0=Math.max(Math.abs(Gp[0]),Math.abs(Gp[1])),a0=Math.floor(Math.log(p0)/Math.LN10+.01),D0=Ct.minexponent===void 0?3:Ct.minexponent;Math.abs(a0)>D0&&(Np(Ct.exponentformat)&&Ct.exponentformat!=="SI extended"&&!Jp(a0)||Np(Ct.exponentformat)&&Ct.exponentformat==="SI extended"&&!n0(a0)?Ct._tickexponent=3*Math.round((a0-1)/3):Ct._tickexponent=a0)}else Ct._tickround=null}$.tickIncrement=function(Ct,Tt,jp,Zp){var l0=jp?-1:1;if(c(Tt))return y.increment(Ct,l0*Tt);var Bp=Tt.charAt(0),Gp=l0*Number(Tt.substr(1));if(Bp==="M")return y.incrementMonth(Ct,Gp,Zp);if(Bp==="L")return Math.log(Math.pow(10,Ct)+Gp)/Math.LN10;if(Bp==="D"){var p0=Tt==="D2"?V0:I0,a0=Ct+l0*.01,D0=y.roundUp(y.mod(a0,1),p0,jp);return Math.floor(a0)+Math.log(v.round(Math.pow(10,D0),1))/Math.LN10}throw"unrecognized dtick "+String(Tt)},$.tickFirst=function(Ct,Tt){var jp=Ct.r2l||Number,Zp=y.simpleMap(Ct.range,jp,void 0,void 0,Tt),l0=Zp[1]<Zp[0],Bp=l0?Math.floor:Math.ceil,Gp=ct(Zp)[0],p0=Ct.dtick,a0=jp(Ct.tick0);if(c(p0)){var D0=Bp((Gp-a0)/p0)*p0+a0;return(Ct.type==="category"||Ct.type==="multicategory")&&(D0=y.constrain(D0,0,Ct._categories.length-1)),D0}var z0=p0.charAt(0),am=Number(p0.substr(1));if(z0==="M"){for(var Ym=0,Hm=a0,f1,Im,Jm;Ym<10;){if(f1=$.tickIncrement(Hm,p0,l0,Ct.calendar),(f1-Gp)*(Hm-Gp)<=0)return l0?Math.min(Hm,f1):Math.max(Hm,f1);Im=(Gp-(Hm+f1)/2)/(f1-Hm),Jm=z0+(Math.abs(Math.round(Im))||1)*am,Hm=$.tickIncrement(Hm,Jm,Im<0?!l0:l0,Ct.calendar),Ym++}return y.error("tickFirst did not converge",Ct),Hm}else{if(z0==="L")return Math.log(Bp((Math.pow(10,Gp)-a0)/am)*am+a0)/Math.LN10;if(z0==="D"){var R1=p0==="D2"?V0:I0,Ng=y.roundUp(y.mod(Gp,1),R1,l0);return Math.floor(Gp)+Math.log(v.round(Math.pow(10,Ng),1))/Math.LN10}else throw"unrecognized dtick "+String(p0)}},$.tickText=function(Ct,Tt,jp,Zp){var l0=fm(Ct,Tt),Bp=Ct.tickmode==="array",Gp=jp||Bp,p0=Ct.type,a0=p0==="category"?Ct.d2l_noadd:Ct.d2l,D0,z0=function(Jm){var R1=Ct.l2p(Jm);return R1>=0&&R1<=Ct._length?Jm:null};if(Bp&&y.isArrayOrTypedArray(Ct.ticktext)){var am=y.simpleMap(Ct.range,Ct.r2l),Ym=(Math.abs(am[1]-am[0])-(Ct._lBreaks||0))/1e4;for(D0=0;D0<Ct.ticktext.length&&!(Math.abs(Tt-a0(Ct.tickvals[D0]))<Ym);D0++);if(D0<Ct.ticktext.length)return l0.text=String(Ct.ticktext[D0]),l0.xbnd=[z0(l0.x-.5),z0(l0.x+Ct.dtick-.5)],l0}function Hm(Jm){if(Jm===void 0)return!0;if(jp)return Jm==="none";var R1={first:Ct._tmin,last:Ct._tmax}[Jm];return Jm!=="all"&&Tt!==R1}var f1=jp?"never":Ct.exponentformat!=="none"&&Hm(Ct.showexponent)?"hide":"";if(p0==="date"?Tm(Ct,l0,jp,Gp):p0==="log"?om(Ct,l0,jp,Gp,f1):p0==="category"?Rm(Ct,l0):p0==="multicategory"?ci(Ct,l0,jp):Eg(Ct)?St(Ct,l0,jp,Gp,f1):Hp(Ct,l0,jp,Gp,f1),Zp||(Ct.tickprefix&&!Hm(Ct.showtickprefix)&&(l0.text=Ct.tickprefix+l0.text),Ct.ticksuffix&&!Hm(Ct.showticksuffix)&&(l0.text+=Ct.ticksuffix)),Ct.labelalias&&Ct.labelalias.hasOwnProperty(l0.text)){var Im=Ct.labelalias[l0.text];typeof Im=="string"&&(l0.text=Im)}return(Ct.tickson==="boundaries"||Ct.showdividers)&&(l0.xbnd=[z0(l0.x-.5),z0(l0.x+Ct.dtick-.5)]),l0},$.hoverLabelText=function(Ct,Tt,jp){jp&&(Ct=y.extendFlat({},Ct,{hoverformat:jp}));var Zp=y.isArrayOrTypedArray(Tt)?Tt[0]:Tt,l0=y.isArrayOrTypedArray(Tt)?Tt[1]:void 0;if(l0!==void 0&&l0!==Zp)return $.hoverLabelText(Ct,Zp,jp)+" - "+$.hoverLabelText(Ct,l0,jp);var Bp=Ct.type==="log"&&Zp<=0,Gp=$.tickText(Ct,Ct.c2l(Bp?-Zp:Zp),"hover").text;return Bp?Zp===0?"0":rt+Gp:Gp};function fm(Ct,Tt,jp){var Zp=Ct.tickfont||{};return{x:Tt,dx:0,dy:0,text:jp||"",fontSize:Zp.size,font:Zp.family,fontWeight:Zp.weight,fontStyle:Zp.style,fontVariant:Zp.variant,fontTextcase:Zp.textcase,fontLineposition:Zp.lineposition,fontShadow:Zp.shadow,fontColor:Zp.color}}function Tm(Ct,Tt,jp,Zp){var l0=Ct._tickround,Bp=jp&&Ct.hoverformat||$.getTickFormat(Ct);Zp=!Bp&&Zp,Zp&&(c(l0)?l0=4:l0={y:"m",m:"d",d:"M",M:"S",S:4}[l0]);var Gp=y.formatDate(Tt.x,Bp,l0,Ct._dateFormat,Ct.calendar,Ct._extraFormat),p0,a0=Gp.indexOf(`
`);if(a0!==-1&&(p0=Gp.substr(a0+1),Gp=Gp.substr(0,a0)),Zp&&(p0!==void 0&&(Gp==="00:00:00"||Gp==="00:00")?(Gp=p0,p0=""):Gp.length===8&&(Gp=Gp.replace(/:00$/,""))),p0)if(jp)l0==="d"?Gp+=", "+p0:Gp=p0+(Gp?", "+Gp:"");else if(!Ct._inCalcTicks||Ct._prevDateHead!==p0)Ct._prevDateHead=p0,Gp+="<br>"+p0;else{var D0=Q1(Ct),z0=Ct._trueSide||Ct.side;(!D0&&z0==="top"||D0&&z0==="bottom")&&(Gp+="<br> ")}Tt.text=Gp}function om(Ct,Tt,jp,Zp,l0){var Bp=Ct.dtick,Gp=Tt.x,p0=Ct.tickformat,a0=typeof Bp=="string"&&Bp.charAt(0);if(l0==="never"&&(l0=""),Zp&&a0!=="L"&&(Bp="L3",a0="L"),p0||a0==="L")Tt.text=_0(Math.pow(10,Gp),Ct,l0,Zp);else if(c(Bp)||a0==="D"&&(Ct.minorloglabels==="complete"||y.mod(Gp+.01,1)<.1)){Ct.minorloglabels==="complete"&&!(y.mod(Gp+.01,1)<.1)&&(Tt.fontSize*=.75);var D0=Math.pow(10,Gp).toExponential(0),z0=D0.split("e"),am=+z0[1],Ym=Math.abs(am),Hm=Ct.exponentformat;Hm==="power"||Np(Hm)&&Hm!=="SI extended"&&Jp(am)||Np(Hm)&&Hm==="SI extended"&&n0(am)?(Tt.text=z0[0],Ym>0&&(Tt.text+="x10"),Tt.text==="1x10"&&(Tt.text="10"),am!==0&&am!==1&&(Tt.text+="<sup>"+(am>0?"":rt)+Ym+"</sup>"),Tt.fontSize*=1.25):(Hm==="e"||Hm==="E")&&Ym>2?Tt.text=z0[0]+Hm+(am>0?"+":rt)+Ym:(Tt.text=_0(Math.pow(10,Gp),Ct,"","fakehover"),Bp==="D1"&&Ct._id.charAt(0)==="y"&&(Tt.dy-=Tt.fontSize/6))}else if(a0==="D")Tt.text=Ct.minorloglabels==="none"?"":String(Math.round(Math.pow(10,y.mod(Gp,1)))),Tt.fontSize*=.75;else throw"unrecognized dtick "+String(Bp);if(Ct.dtick==="D1"){var f1=String(Tt.text).charAt(0);(f1==="0"||f1==="1")&&(Ct._id.charAt(0)==="y"?Tt.dx-=Tt.fontSize/4:(Tt.dy+=Tt.fontSize/2,Tt.dx+=(Ct.range[1]>Ct.range[0]?1:-1)*Tt.fontSize*(Gp<0?.5:.25)))}}function Rm(Ct,Tt){var jp=Ct._categories[Math.round(Tt.x)];jp===void 0&&(jp=""),Tt.text=String(jp)}function ci(Ct,Tt,jp){var Zp=Math.round(Tt.x),l0=Ct._categories[Zp]||[],Bp=l0[1]===void 0?"":String(l0[1]),Gp=l0[0]===void 0?"":String(l0[0]);jp?Tt.text=Gp+" - "+Bp:(Tt.text=Bp,Tt.text2=Gp)}function Hp(Ct,Tt,jp,Zp,l0){l0==="never"?l0="":Ct.showexponent==="all"&&Math.abs(Tt.x/Ct.dtick)<1e-6&&(l0="hide"),Tt.text=_0(Tt.x,Ct,l0,Zp)}function St(Ct,Tt,jp,Zp,l0){if(Ct.thetaunit==="radians"&&!jp){var Bp=Tt.x/180;if(Bp===0)Tt.text="0";else{var Gp=Ht(Bp);if(Gp[1]>=100)Tt.text=_0(y.deg2rad(Tt.x),Ct,l0,Zp);else{var p0=Tt.x<0;Gp[1]===1?Gp[0]===1?Tt.text="π":Tt.text=Gp[0]+"π":Tt.text=["<sup>",Gp[0],"</sup>","⁄","<sub>",Gp[1],"</sub>","π"].join(""),p0&&(Tt.text=rt+Tt.text)}}}else Tt.text=_0(Tt.x,Ct,l0,Zp)}function Ht(Ct){function Tt(p0,a0){return Math.abs(p0-a0)<=1e-6}function jp(p0,a0){return Tt(a0,0)?p0:jp(a0,p0%a0)}function Zp(p0){for(var a0=1;!Tt(Math.round(p0*a0)/a0,p0);)a0*=10;return a0}var l0=Zp(Ct),Bp=Ct*l0,Gp=Math.abs(jp(Bp,l0));return[Math.round(Bp/Gp),Math.round(l0/Gp)]}var Sr=["f","p","n","μ","m","","k","M","G","T"],Rp=["q","r","y","z","a",...Sr,"P","E","Z","Y","R","Q"],Np=Ct=>["SI","SI extended","B"].includes(Ct);function Jp(Ct){return Ct>14||Ct<-15}function n0(Ct){return Ct>32||Ct<-30}function S0(Ct,Tt){return Np(Tt)?!!(Tt==="SI extended"&&n0(Ct)||Tt!=="SI extended"&&Jp(Ct)):!1}function _0(Ct,Tt,jp,Zp){var l0=Ct<0,Bp=Tt._tickround,Gp=jp||Tt.exponentformat||"B",p0=Tt._tickexponent,a0=$.getTickFormat(Tt),D0=Tt.separatethousands;if(Zp){var z0={exponentformat:Gp,minexponent:Tt.minexponent,dtick:Tt.showexponent==="none"?Tt.dtick:c(Ct)&&Math.abs(Ct)||1,range:Tt.showexponent==="none"?Tt.range.map(Tt.r2d):[0,Ct||1]};k0(z0),Bp=(Number(z0._tickround)||0)+4,p0=z0._tickexponent,Tt.hoverformat&&(a0=Tt.hoverformat)}if(a0)return Tt._numFormat(a0)(Ct).replace(/-/g,rt);var am=Math.pow(10,-Bp)/2;if(Gp==="none"&&(p0=0),Ct=Math.abs(Ct),Ct<am)Ct="0",l0=!1;else{if(Ct+=am,p0&&(Ct*=Math.pow(10,-p0),Bp+=p0),Bp===0)Ct=String(Math.floor(Ct));else if(Bp<0){Ct=String(Math.round(Ct)),Ct=Ct.substr(0,Ct.length+Bp);for(var Ym=Bp;Ym<0;Ym++)Ct+="0"}else{Ct=String(Ct);var Hm=Ct.indexOf(".")+1;Hm&&(Ct=Ct.substr(0,Hm+Bp).replace(/\.?0+$/,""))}Ct=y.numSeparate(Ct,Tt._separators,D0)}if(p0&&Gp!=="hide"){S0(p0,Gp)&&(Gp="power");var f1;p0<0?f1=rt+-p0:Gp!=="power"?f1="+"+p0:f1=String(p0),Gp==="e"||Gp==="E"?Ct+=Gp+f1:Gp==="power"?Ct+="×10<sup>"+f1+"</sup>":Gp==="B"&&p0===9?Ct+="B":Np(Gp)&&(Ct+=Gp==="SI extended"?Rp[p0/3+10]:Sr[p0/3+5])}return l0?rt+Ct:Ct}$.getTickFormat=function(Ct){var Tt;function jp(a0){return typeof a0!="string"?a0:Number(a0.replace("M",""))*H}function Zp(a0,D0){var z0=["L","D"];if(typeof a0==typeof D0){if(typeof a0=="number")return a0-D0;var am=z0.indexOf(a0.charAt(0)),Ym=z0.indexOf(D0.charAt(0));return am===Ym?Number(a0.replace(/(L|D)/g,""))-Number(D0.replace(/(L|D)/g,"")):am-Ym}else return typeof a0=="number"?1:-1}function l0(a0,D0,z0){var am=z0||function(f1){return f1},Ym=D0[0],Hm=D0[1];return(!Ym&&typeof Ym!="number"||am(Ym)<=am(a0))&&(!Hm&&typeof Hm!="number"||am(Hm)>=am(a0))}function Bp(a0,D0){var z0=D0[0]===null,am=D0[1]===null,Ym=Zp(a0,D0[0])>=0,Hm=Zp(a0,D0[1])<=0;return(z0||Ym)&&(am||Hm)}var Gp,p0;if(Ct.tickformatstops&&Ct.tickformatstops.length>0)switch(Ct.type){case"date":case"linear":{for(Tt=0;Tt<Ct.tickformatstops.length;Tt++)if(p0=Ct.tickformatstops[Tt],p0.enabled&&l0(Ct.dtick,p0.dtickrange,jp)){Gp=p0;break}break}case"log":{for(Tt=0;Tt<Ct.tickformatstops.length;Tt++)if(p0=Ct.tickformatstops[Tt],p0.enabled&&Bp(Ct.dtick,p0.dtickrange)){Gp=p0;break}break}}return Gp?Gp.value:Ct.tickformat},$.getSubplots=function(Ct,Tt){var jp=Ct._fullLayout._subplots,Zp=jp.cartesian.concat(jp.gl2d||[]),l0=Tt?$.findSubplotsWithAxis(Zp,Tt):Zp;return l0.sort(function(Bp,Gp){var p0=Bp.substr(1).split("y"),a0=Gp.substr(1).split("y");return p0[0]===a0[0]?+p0[1]-+a0[1]:+p0[0]-+a0[0]}),l0},$.findSubplotsWithAxis=function(Ct,Tt){for(var jp=new RegExp(Tt._id.charAt(0)==="x"?"^"+Tt._id+"y":Tt._id+"$"),Zp=[],l0=0;l0<Ct.length;l0++){var Bp=Ct[l0];jp.test(Bp)&&Zp.push(Bp)}return Zp},$.makeClipPaths=function(Ct){var Tt=Ct._fullLayout;if(!Tt._hasOnlyLargeSploms){var jp={_offset:0,_length:Tt.width,_id:""},Zp={_offset:0,_length:Tt.height,_id:""},l0=$.list(Ct,"x",!0),Bp=$.list(Ct,"y",!0),Gp=[],p0,a0;for(p0=0;p0<l0.length;p0++)for(Gp.push({x:l0[p0],y:Zp}),a0=0;a0<Bp.length;a0++)p0===0&&Gp.push({x:jp,y:Bp[a0]}),Gp.push({x:l0[p0],y:Bp[a0]});var D0=Tt._clips.selectAll(".axesclip").data(Gp,function(z0){return z0.x._id+z0.y._id});D0.enter().append("clipPath").classed("axesclip",!0).attr("id",function(z0){return"clip"+Tt._uid+z0.x._id+z0.y._id}).append("rect"),D0.exit().remove(),D0.each(function(z0){v.select(this).select("rect").attr({x:z0.x._offset||0,y:z0.y._offset||0,width:z0.x._length||1,height:z0.y._length||1})})}},$.draw=function(Ct,Tt,jp){var Zp=Ct._fullLayout;Tt==="redraw"&&Zp._paper.selectAll("g.subplot").each(function(a0){var D0=a0[0],z0=Zp._plots[D0];if(z0){var am=z0.xaxis,Ym=z0.yaxis;z0.xaxislayer.selectAll("."+am._id+"tick").remove(),z0.yaxislayer.selectAll("."+Ym._id+"tick").remove(),z0.xaxislayer.selectAll("."+am._id+"tick2").remove(),z0.yaxislayer.selectAll("."+Ym._id+"tick2").remove(),z0.xaxislayer.selectAll("."+am._id+"divider").remove(),z0.yaxislayer.selectAll("."+Ym._id+"divider").remove(),z0.minorGridlayer&&z0.minorGridlayer.selectAll("path").remove(),z0.gridlayer&&z0.gridlayer.selectAll("path").remove(),z0.zerolinelayer&&z0.zerolinelayer.selectAll("path").remove(),z0.zerolinelayerAbove&&z0.zerolinelayerAbove.selectAll("path").remove(),Zp._infolayer.select(".g-"+am._id+"title").remove(),Zp._infolayer.select(".g-"+Ym._id+"title").remove()}});var l0=!Tt||Tt==="redraw"?$.listIds(Ct):Tt,Bp=$.list(Ct),Gp=Bp.filter(function(a0){return a0.autoshift}).map(function(a0){return a0.overlaying});l0.map(function(a0){var D0=$.getFromId(Ct,a0);if(D0.tickmode==="sync"&&D0.overlaying){var z0=l0.findIndex(function(am){return am===D0.overlaying});z0>=0&&l0.unshift(l0.splice(z0,1).shift())}});var p0={false:{left:0,right:0}};return y.syncOrAsync(l0.map(function(a0){return function(){if(a0){var D0=$.getFromId(Ct,a0);jp||(jp={}),jp.axShifts=p0,jp.overlayingShiftedAx=Gp;var z0=$.drawOne(Ct,D0,jp);return D0._shiftPusher&&cg(D0,D0._fullDepth||0,p0,!0),D0._r=D0.range.slice(),D0._rl=y.simpleMap(D0._r,D0.r2l),z0}}}))},$.drawOne=function(Ct,Tt,jp){jp=jp||{};var Zp=jp.axShifts||{},l0=jp.overlayingShiftedAx||[],Bp,Gp,p0;Tt.setScale();var a0=Ct._fullLayout,D0=Tt._id,z0=D0.charAt(0),am=$.counterLetter(D0),Ym=a0._plots[Tt._mainSubplot],Hm=Tt.zerolinelayer==="above traces";if(!Ym)return;if(Tt._shiftPusher=Tt.autoshift||l0.indexOf(Tt._id)!==-1||l0.indexOf(Tt.overlaying)!==-1,Tt._shiftPusher&Tt.anchor==="free"){var f1=Tt.linewidth/2||0;Tt.ticks==="inside"&&(f1+=Tt.ticklen),cg(Tt,f1,Zp,!0),cg(Tt,Tt.shift||0,Zp,!1)}(jp.skipTitle!==!0||Tt._shift===void 0)&&(Tt._shift=Vm(Tt,Zp));var Im=Ym[z0+"axislayer"],Jm=Tt._mainLinePosition,R1=Jm+=Tt._shift,Ng=Tt._mainMirrorPosition,B1=Tt._vals=$.calcTicks(Tt),av=[Tt.mirror,R1,Ng].join("_");for(Bp=0;Bp<B1.length;Bp++)B1[Bp].axInfo=av;Tt._selections={},Tt._tickAngles&&(Tt._prevTickAngles=Tt._tickAngles),Tt._tickAngles={},Tt._depth=null;var dg={};function sv(Ag){var Cg=D0+(Ag||"tick");return dg[Cg]||(dg[Cg]=Am(Tt,Cg,R1)),dg[Cg]}if(Tt.visible){var xg=$.makeTransTickFn(Tt),Jg=$.makeTransTickLabelFn(Tt),ov,fg,kv=Tt.ticks==="inside",_v=Tt.ticks==="outside";if(Tt.tickson==="boundaries"){var Dg=X0(Tt,B1);fg=$.clipEnds(Tt,Dg),ov=kv?fg:Dg}else fg=$.clipEnds(Tt,B1),ov=kv&&Tt.ticklabelmode!=="period"?fg:B1;var gv=Tt._gridVals=fg,Kg=Z0(Tt,B1);if(!a0._hasOnlyLargeSploms){var iv=Tt._subplotsWith,Kv={};for(Bp=0;Bp<iv.length;Bp++){Gp=iv[Bp],p0=a0._plots[Gp];var Nv=p0[am+"axis"],Bg=Nv._mainAxis._id;if(!Kv[Bg]){Kv[Bg]=1;var Qg=z0==="x"?"M0,"+Nv._offset+"v"+Nv._length:"M"+Nv._offset+",0h"+Nv._length;$.drawGrid(Ct,Tt,{vals:gv,counterAxis:Nv,layer:p0.gridlayer.select("."+D0),minorLayer:p0.minorGridlayer.select("."+D0),path:Qg,transFn:xg}),$.drawZeroLine(Ct,Tt,{counterAxis:Nv,layer:Hm?p0.zerolinelayerAbove:p0.zerolinelayer,path:Qg,transFn:xg})}}}var Hg,ev=$.getTickSigns(Tt),Iv=$.getTickSigns(Tt,"minor");if(Tt.ticks||Tt.minor&&Tt.minor.ticks){var Yv=$.makeTickPath(Tt,R1,ev[2]),Dv=$.makeTickPath(Tt,R1,Iv[2],{minor:!0}),Qv,ny,Bv,tv;if(Tt._anchorAxis&&Tt.mirror&&Tt.mirror!==!0?(Qv=$.makeTickPath(Tt,Ng,ev[3]),ny=$.makeTickPath(Tt,Ng,Iv[3],{minor:!0}),Bv=Yv+Qv,tv=Dv+ny):(Qv="",ny="",Bv=Yv,tv=Dv),Tt.showdividers&&_v&&Tt.tickson==="boundaries"){var Sy={};for(Bp=0;Bp<Kg.length;Bp++)Sy[Kg[Bp].x]=1;Hg=function(Ag){return Sy[Ag.x]?Qv:Bv}}else Hg=function(Ag){return Ag.minor?tv:Bv}}if($.drawTicks(Ct,Tt,{vals:ov,layer:Im,path:Hg,transFn:xg}),Tt.mirror==="allticks"){var ly=Object.keys(Tt._linepositions||{});for(Bp=0;Bp<ly.length;Bp++){Gp=ly[Bp],p0=a0._plots[Gp];var Ey=Tt._linepositions[Gp]||[],cy=Ey[0],uy=Ey[1],Fy=Ey[2],Ny=$.makeTickPath(Tt,cy,Fy?ev[0]:Iv[0],{minor:Fy})+$.makeTickPath(Tt,uy,Fy?ev[1]:Iv[1],{minor:Fy});$.drawTicks(Ct,Tt,{vals:ov,layer:p0[z0+"axislayer"],path:Ny,transFn:xg})}}var yy=[];if(yy.push(function(){return $.drawLabels(Ct,Tt,{vals:B1,layer:Im,plotinfo:p0,transFn:Jg,labelFns:$.makeLabelFns(Tt,R1)})}),Tt.type==="multicategory"){var Hy={x:2,y:10}[z0];yy.push(function(){var Ag={x:"height",y:"width"}[z0],Cg=sv()[Ag]+Hy+(Tt._tickAngles[D0+"tick"]?Tt.tickfont.size*jo:0);return $.drawLabels(Ct,Tt,{vals:$0(Tt,B1),layer:Im,cls:D0+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:xg,labelFns:$.makeLabelFns(Tt,R1+Cg*ev[4])})}),yy.push(function(){return Tt._depth=ev[4]*(sv("tick2")[Tt.side]-R1),z1(Ct,Tt,{vals:Kg,layer:Im,path:$.makeTickPath(Tt,R1,ev[4],{len:Tt._depth}),transFn:xg})})}else Tt.title.hasOwnProperty("standoff")&&yy.push(function(){Tt._depth=ev[4]*(sv()[Tt.side]-R1)});var lv=_.getComponentMethod("rangeslider","isVisible")(Tt);return!jp.skipTitle&&!(lv&&Tt.side==="bottom")&&yy.push(function(){return Lm(Ct,Tt)}),yy.push(function(){var Ag=Tt.side.charAt(0),Cg=lt[Tt.side].charAt(0),zg=$.getPxPosition(Ct,Tt),rv=_v?Tt.ticklen:0,vv,uv,vy,vx;(Tt.automargin||lv||Tt._shiftPusher)&&(Tt.type==="multicategory"?vv=sv("tick2"):(vv=sv(),z0==="x"&&Ag==="b"&&(Tt._depth=Math.max(vv.width>0?vv.bottom-zg:0,rv))));var Oy=0,ay=0;if(Tt._shiftPusher&&(Oy=Math.max(rv,vv.height>0?Ag==="l"?zg-vv.left:vv.right-zg:0),Tt.title.text!==a0._dfltTitle[z0]&&(ay=(Tt._titleStandoff||0)+(Tt._titleScoot||0),Ag==="l"&&(ay+=r1(Tt))),Tt._fullDepth=Math.max(Oy,ay)),Tt.automargin){uv={x:0,y:0,r:0,l:0,t:0,b:0};var By=[0,1],yx=typeof Tt._shift=="number"?Tt._shift:0;if(z0==="x"){if(Ag==="b"?uv[Ag]=Tt._depth:(uv[Ag]=Tt._depth=Math.max(vv.width>0?zg-vv.top:0,rv),By.reverse()),vv.width>0){var L2=vv.right-(Tt._offset+Tt._length);L2>0&&(uv.xr=1,uv.r=L2);var jy=Tt._offset-vv.left;jy>0&&(uv.xl=0,uv.l=jy)}}else if(Ag==="l"?(Tt._depth=Math.max(vv.height>0?zg-vv.left:0,rv),uv[Ag]=Tt._depth-yx):(Tt._depth=Math.max(vv.height>0?vv.right-zg:0,rv),uv[Ag]=Tt._depth+yx,By.reverse()),vv.height>0){var xx=vv.bottom-(Tt._offset+Tt._length);xx>0&&(uv.yb=0,uv.b=xx);var cx=Tt._offset-vv.top;cx>0&&(uv.yt=1,uv.t=cx)}uv[am]=Tt.anchor==="free"?Tt.position:Tt._anchorAxis.domain[By[0]],Tt.title.text!==a0._dfltTitle[z0]&&(uv[Ag]+=r1(Tt)+(Tt.title.standoff||0)),Tt.mirror&&Tt.anchor!=="free"&&(vy={x:0,y:0,r:0,l:0,t:0,b:0},vy[Cg]=Tt.linewidth,Tt.mirror&&Tt.mirror!==!0&&(vy[Cg]+=rv),Tt.mirror===!0||Tt.mirror==="ticks"?vy[am]=Tt._anchorAxis.domain[By[1]]:(Tt.mirror==="all"||Tt.mirror==="allticks")&&(vy[am]=[Tt._counterDomainMin,Tt._counterDomainMax][By[1]]))}lv&&(vx=_.getComponentMethod("rangeslider","autoMarginOpts")(Ct,Tt)),typeof Tt.automargin=="string"&&(w0(uv,Tt.automargin),w0(vy,Tt.automargin)),h.autoMargin(Ct,m1(Tt),uv),h.autoMargin(Ct,t1(Tt),vy),h.autoMargin(Ct,Z1(Tt),vx)}),y.syncOrAsync(yy)}};function w0(Ct,Tt){if(Ct){var jp=Object.keys(Rt).reduce(function(Zp,l0){return Tt.indexOf(l0)!==-1&&Rt[l0].forEach(function(Bp){Zp[Bp]=1}),Zp},{});Object.keys(Ct).forEach(function(Zp){jp[Zp]||(Zp.length===1?Ct[Zp]=0:delete Ct[Zp])})}}function X0(Ct,Tt){var jp=[],Zp,l0=function(Bp,Gp){var p0=Bp.xbnd[Gp];p0!==null&&jp.push(y.extendFlat({},Bp,{x:p0}))};if(Tt.length){for(Zp=0;Zp<Tt.length;Zp++)l0(Tt[Zp],0);l0(Tt[Zp-1],1)}return jp}function $0(Ct,Tt){for(var jp=[],Zp={},l0=0;l0<Tt.length;l0++){var Bp=Tt[l0];Zp[Bp.text2]?Zp[Bp.text2].push(Bp.x):Zp[Bp.text2]=[Bp.x]}for(var Gp in Zp)jp.push(fm(Ct,y.interp(Zp[Gp],.5),Gp));return jp}function Z0(Ct,Tt){var jp=[],Zp,l0,Bp=Tt.length&&Tt[Tt.length-1].x<Tt[0].x,Gp=function(a0,D0){var z0=a0.xbnd[D0];z0!==null&&jp.push(y.extendFlat({},a0,{x:z0}))};if(Ct.showdividers&&Tt.length){for(Zp=0;Zp<Tt.length;Zp++){var p0=Tt[Zp];p0.text2!==l0&&Gp(p0,Bp?1:0),l0=p0.text2}Gp(Tt[Zp-1],Bp?0:1)}return jp}function Am(Ct,Tt,jp){var Zp,l0,Bp,Gp;if(Ct._selections[Tt].size())Zp=1/0,l0=-1/0,Bp=1/0,Gp=-1/0,Ct._selections[Tt].each(function(){var a0=l1(this);if(a0.node().style.display!=="none"){var D0=k.bBox(a0.node().parentNode);Zp=Math.min(Zp,D0.top),l0=Math.max(l0,D0.bottom),Bp=Math.min(Bp,D0.left),Gp=Math.max(Gp,D0.right)}});else{var p0=$.makeLabelFns(Ct,jp);Zp=l0=p0.yFn({dx:0,dy:0,fontSize:0}),Bp=Gp=p0.xFn({dx:0,dy:0,fontSize:0})}return{top:Zp,bottom:l0,left:Bp,right:Gp,height:l0-Zp,width:Gp-Bp}}$.getTickSigns=function(Ct,Tt){var jp=Ct._id.charAt(0),Zp={x:"top",y:"right"}[jp],l0=Ct.side===Zp?1:-1,Bp=[-1,1,l0,-l0],Gp=Tt?(Ct.minor||{}).ticks:Ct.ticks;return Gp!=="inside"==(jp==="x")&&(Bp=Bp.map(function(p0){return-p0})),Ct.side&&Bp.push({l:-1,t:-1,r:1,b:1}[Ct.side.charAt(0)]),Bp},$.makeTransTickFn=function(Ct){return Ct._id.charAt(0)==="x"?function(Tt){return x(Ct._offset+Ct.l2p(Tt.x),0)}:function(Tt){return x(0,Ct._offset+Ct.l2p(Tt.x))}},$.makeTransTickLabelFn=function(Ct){var Tt=E1(Ct),jp=Ct.ticklabelshift||0,Zp=Ct.ticklabelstandoff||0,l0=Tt[0],Bp=Tt[1],Gp=Ct.range[0]>Ct.range[1],p0=Ct.ticklabelposition&&Ct.ticklabelposition.indexOf("inside")!==-1,a0=!p0;if(jp){var D0=Gp?-1:1;jp=jp*D0}if(Zp){var z0=Ct.side,am=p0&&(z0==="top"||z0==="left")||a0&&(z0==="bottom"||z0==="right")?1:-1;Zp=Zp*am}return Ct._id.charAt(0)==="x"?function(Ym){return x(l0+Ct._offset+Ct.l2p(e1(Ym))+jp,Bp+Zp)}:function(Ym){return x(Bp+Zp,l0+Ct._offset+Ct.l2p(e1(Ym))+jp)}};function e1(Ct){return Ct.periodX!==void 0?Ct.periodX:Ct.x}function E1(Ct){var Tt=Ct.ticklabelposition||"",jp=Ct.tickson||"",Zp=function(f1){return Tt.indexOf(f1)!==-1},l0=Zp("top"),Bp=Zp("left"),Gp=Zp("right"),p0=Zp("bottom"),a0=Zp("inside"),D0=jp!=="boundaries"&&(p0||Bp||l0||Gp);if(!D0&&!a0)return[0,0];var z0=Ct.side,am=D0?(Ct.tickwidth||0)/2:0,Ym=ut,Hm=Ct.tickfont?Ct.tickfont.size:12;return(p0||l0)&&(am+=Hm*oa,Ym+=(Ct.linewidth||0)/2),(Bp||Gp)&&(am+=(Ct.linewidth||0)/2,Ym+=ut),a0&&z0==="top"&&(Ym-=Hm*(1-oa)),(Bp||l0)&&(am=-am),(z0==="bottom"||z0==="right")&&(Ym=-Ym),[D0?am:0,a0?Ym:0]}$.makeTickPath=function(Ct,Tt,jp,Zp){Zp||(Zp={});var l0=Zp.minor;if(l0&&!Ct.minor)return"";var Bp=Zp.len!==void 0?Zp.len:l0?Ct.minor.ticklen:Ct.ticklen,Gp=Ct._id.charAt(0),p0=(Ct.linewidth||1)/2;return Gp==="x"?"M0,"+(Tt+p0*jp)+"v"+Bp*jp:"M"+(Tt+p0*jp)+",0h"+Bp*jp},$.makeLabelFns=function(Ct,Tt,jp){var Zp=Ct.ticklabelposition||"",l0=Ct.tickson||"",Bp=function(Dg){return Zp.indexOf(Dg)!==-1},Gp=Bp("top"),p0=Bp("left"),a0=Bp("right"),D0=Bp("bottom"),z0=l0!=="boundaries"&&(D0||p0||Gp||a0),am=Bp("inside"),Ym=Zp==="inside"&&Ct.ticks==="inside"||!am&&Ct.ticks==="outside"&&l0!=="boundaries",Hm=0,f1=0,Im=Ym?Ct.ticklen:0;if(am?Im*=-1:z0&&(Im=0),Ym&&(Hm+=Im,jp)){var Jm=y.deg2rad(jp);Hm=Im*Math.cos(Jm)+1,f1=Im*Math.sin(Jm)}Ct.showticklabels&&(Ym||Ct.showline)&&(Hm+=.2*Ct.tickfont.size),Hm+=(Ct.linewidth||1)/2*(am?-1:1);var R1={labelStandoff:Hm,labelShift:f1},Ng,B1,av,dg,sv=0,xg=Ct.side,Jg=Ct._id.charAt(0),ov=Ct.tickangle,fg;if(Jg==="x")fg=!am&&xg==="bottom"||am&&xg==="top",dg=fg?1:-1,am&&(dg*=-1),Ng=f1*dg,B1=Tt+Hm*dg,av=fg?1:-.2,Math.abs(ov)===90&&(am?av+=xn:ov===-90&&xg==="bottom"?av=oa:ov===90&&xg==="top"?av=xn:av=.5,sv=xn/2*(ov/90)),R1.xFn=function(Dg){return Dg.dx+Ng+sv*Dg.fontSize},R1.yFn=function(Dg){return Dg.dy+B1+Dg.fontSize*av},R1.anchorFn=function(Dg,gv){if(z0){if(p0)return"end";if(a0)return"start"}return!c(gv)||gv===0||gv===180?"middle":gv*dg<0!==am?"end":"start"},R1.heightFn=function(Dg,gv,Kg){return gv<-60||gv>60?-.5*Kg:Ct.side==="top"!==am?-Kg:0};else if(Jg==="y"){if(fg=!am&&xg==="left"||am&&xg==="right",dg=fg?1:-1,am&&(dg*=-1),Ng=Hm,B1=f1*dg,av=0,!am&&Math.abs(ov)===90&&(ov===-90&&xg==="left"||ov===90&&xg==="right"?av=oa:av=.5),am){var kv=c(ov)?+ov:0;if(kv!==0){var _v=y.deg2rad(kv);sv=Math.abs(Math.sin(_v))*oa*dg,av=0}}R1.xFn=function(Dg){return Dg.dx+Tt-(Ng+Dg.fontSize*av)*dg+sv*Dg.fontSize},R1.yFn=function(Dg){return Dg.dy+B1+Dg.fontSize*xn},R1.anchorFn=function(Dg,gv){return c(gv)&&Math.abs(gv)===90?"middle":fg?"end":"start"},R1.heightFn=function(Dg,gv,Kg){return Ct.side==="right"&&(gv*=-1),gv<-30?-Kg:gv<30?-.5*Kg:0}}return R1};function N1(Ct){return[Ct.text,Ct.x,Ct.axInfo,Ct.font,Ct.fontSize,Ct.fontColor].join("_")}$.drawTicks=function(Ct,Tt,jp){jp=jp||{};var Zp=Tt._id+"tick",l0=[].concat(Tt.minor&&Tt.minor.ticks?jp.vals.filter(function(Gp){return Gp.minor&&!Gp.noTick}):[]).concat(Tt.ticks?jp.vals.filter(function(Gp){return!Gp.minor&&!Gp.noTick}):[]),Bp=jp.layer.selectAll("path."+Zp).data(l0,N1);Bp.exit().remove(),Bp.enter().append("path").classed(Zp,1).classed("ticks",1).classed("crisp",jp.crisp!==!1).each(function(Gp){return d.stroke(v.select(this),Gp.minor?Tt.minor.tickcolor:Tt.tickcolor)}).style("stroke-width",function(Gp){return k.crispRound(Ct,Gp.minor?Tt.minor.tickwidth:Tt.tickwidth,1)+"px"}).attr("d",jp.path).style("display",null),Rg(Tt,[xt]),Bp.attr("transform",jp.transFn)},$.drawGrid=function(Ct,Tt,jp){if(jp=jp||{},Tt.tickmode!=="sync"){var Zp=Tt._id+"grid",l0=Tt.minor&&Tt.minor.showgrid,Bp=l0?jp.vals.filter(function(R1){return R1.minor}):[],Gp=Tt.showgrid?jp.vals.filter(function(R1){return!R1.minor}):[],p0=jp.counterAxis;if(p0&&$.shouldShowZeroLine(Ct,Tt,p0))for(var a0=Tt.tickmode==="array",D0=0;D0<Gp.length;D0++){var z0=Gp[D0].x;if(a0?!z0:Math.abs(z0)<Tt.dtick/100)if(Gp=Gp.slice(0,D0).concat(Gp.slice(D0+1)),a0)D0--;else break}Tt._gw=k.crispRound(Ct,Tt.gridwidth,1);for(var am=l0?k.crispRound(Ct,Tt.minor.gridwidth,1):0,Ym=jp.layer,Hm=jp.minorLayer,f1=1;f1>=0;f1--){var Im=f1?Ym:Hm;if(Im){var Jm=Im.selectAll("path."+Zp).data(f1?Gp:Bp,N1);Jm.exit().remove(),Jm.enter().append("path").classed(Zp,1).classed("crisp",jp.crisp!==!1),Jm.attr("transform",jp.transFn).attr("d",jp.path).each(function(R1){return d.stroke(v.select(this),R1.minor?Tt.minor.gridcolor:Tt.gridcolor||"#ddd")}).style("stroke-dasharray",function(R1){return k.dashStyle(R1.minor?Tt.minor.griddash:Tt.griddash,R1.minor?Tt.minor.gridwidth:Tt.gridwidth)}).style("stroke-width",function(R1){return(R1.minor?am:Tt._gw)+"px"}).style("display",null),typeof jp.path=="function"&&Jm.attr("d",jp.path)}}Rg(Tt,[se,gt])}},$.drawZeroLine=function(Ct,Tt,jp){jp=jp||jp;var Zp=Tt._id+"zl",l0=$.shouldShowZeroLine(Ct,Tt,jp.counterAxis),Bp=jp.layer.selectAll("path."+Zp).data(l0?[{x:0,id:Tt._id}]:[]);Bp.exit().remove(),Bp.enter().append("path").classed(Zp,1).classed("zl",1).classed("crisp",jp.crisp!==!1).each(function(){jp.layer.selectAll("path").sort(function(Gp,p0){return ke(Gp.id,p0.id)})}),Bp.attr("transform",jp.transFn).attr("d",jp.path).call(d.stroke,Tt.zerolinecolor||d.defaultLine).style("stroke-width",k.crispRound(Ct,Tt.zerolinewidth,Tt._gw||1)+"px").style("display",null),Rg(Tt,[pt])},$.drawLabels=function(Ct,Tt,jp){jp=jp||{};var Zp=Ct._fullLayout,l0=Tt._id,Bp=Tt.zerolinelayer==="above traces",Gp=jp.cls||l0+"tick",p0=jp.vals.filter(function(Bg){return Bg.text}),a0=jp.labelFns,D0=jp.secondary?0:Tt.tickangle,z0=(Tt._prevTickAngles||{})[Gp],am=jp.layer.selectAll("g."+Gp).data(Tt.showticklabels?p0:[],N1),Ym=[];am.enter().append("g").classed(Gp,1).append("text").attr("text-anchor","middle").each(function(Bg){var Qg=v.select(this),Hg=Ct._promises.length;Qg.call(w.positionText,a0.xFn(Bg),a0.yFn(Bg)).call(k.font,{family:Bg.font,size:Bg.fontSize,color:Bg.fontColor,weight:Bg.fontWeight,style:Bg.fontStyle,variant:Bg.fontVariant,textcase:Bg.fontTextcase,lineposition:Bg.fontLineposition,shadow:Bg.fontShadow}).text(Bg.text).call(w.convertToTspans,Ct),Ct._promises[Hg]?Ym.push(Ct._promises.pop().then(function(){Hm(Qg,D0)})):Hm(Qg,D0)}),Rg(Tt,[Nt]),am.exit().remove(),jp.repositionOnUpdate&&am.each(function(Bg){v.select(this).select("text").call(w.positionText,a0.xFn(Bg),a0.yFn(Bg))});function Hm(Bg,Qg){Bg.each(function(Hg){var ev=v.select(this),Iv=ev.select(".text-math-group"),Yv=a0.anchorFn(Hg,Qg),Dv=jp.transFn.call(ev.node(),Hg)+(c(Qg)&&+Qg!=0?" rotate("+Qg+","+a0.xFn(Hg)+","+(a0.yFn(Hg)-Hg.fontSize/2)+")":""),Qv=w.lineCount(ev),ny=jo*Hg.fontSize,Bv=a0.heightFn(Hg,c(Qg)?+Qg:0,(Qv-1)*ny);if(Bv&&(Dv+=x(0,Bv)),Iv.empty()){var tv=ev.select("text");tv.attr({transform:Dv,"text-anchor":Yv}),tv.style("display",null),Tt._adjustTickLabelsOverflow&&Tt._adjustTickLabelsOverflow()}else{var Sy=k.bBox(Iv.node()).width,ly=Sy*{end:-.5,start:.5}[Yv];Iv.attr("transform",Dv+x(ly,0))}})}Tt._adjustTickLabelsOverflow=function(){var Bg=Tt.ticklabeloverflow;if(!(!Bg||Bg==="allow")){var Qg=Bg.indexOf("hide")!==-1,Hg=Tt._id.charAt(0)==="x",ev=0,Iv=Hg?Ct._fullLayout.width:Ct._fullLayout.height;if(Bg.indexOf("domain")!==-1){var Yv=y.simpleMap(Tt.range,Tt.r2l);ev=Tt.l2p(Yv[0])+Tt._offset,Iv=Tt.l2p(Yv[1])+Tt._offset}var Dv=Math.min(ev,Iv),Qv=Math.max(ev,Iv),ny=Tt.side,Bv=1/0,tv=-1/0;am.each(function(cy){var uy=v.select(this),Fy=uy.select(".text-math-group");if(Fy.empty()){var Ny=k.bBox(uy.node()),yy=0;Hg?(Ny.right>Qv||Ny.left<Dv)&&(yy=1):(Ny.bottom>Qv||Ny.top+(Tt.tickangle?0:cy.fontSize/4)<Dv)&&(yy=1);var Hy=uy.select("text");yy?Qg&&Hy.style("display","none"):Hy.node().style.display!=="none"&&(Hy.style("display",null),ny==="bottom"||ny==="right"?Bv=Math.min(Bv,Hg?Ny.top:Ny.left):Bv=-1/0,ny==="top"||ny==="left"?tv=Math.max(tv,Hg?Ny.bottom:Ny.right):tv=1/0)}});for(var Sy in Zp._plots){var ly=Zp._plots[Sy];if(!(Tt._id!==ly.xaxis._id&&Tt._id!==ly.yaxis._id)){var Ey=Hg?ly.yaxis:ly.xaxis;Ey&&(Ey["_visibleLabelMin_"+Tt._id]=Bv,Ey["_visibleLabelMax_"+Tt._id]=tv)}}}},Tt._hideCounterAxisInsideTickLabels=function(Bg){var Qg=Tt._id.charAt(0)==="x",Hg=[];for(var ev in Zp._plots){var Iv=Zp._plots[ev];Tt._id!==Iv.xaxis._id&&Tt._id!==Iv.yaxis._id||Hg.push(Qg?Iv.yaxis:Iv.xaxis)}Hg.forEach(function(Yv,Dv){Yv&&Q1(Yv)&&(Bg||[pt,gt,se,xt,Nt]).forEach(function(Qv){var ny=Qv.K==="tick"&&Qv.L==="text"&&Tt.ticklabelmode==="period",Bv=Zp._plots[Tt._mainSubplot],tv;if(Qv.K===pt.K){var Sy=Bp?Bv.zerolinelayerAbove:Bv.zerolinelayer;tv=Sy.selectAll("."+Tt._id+"zl")}else Qv.K===gt.K?tv=Bv.minorGridlayer.selectAll("."+Tt._id):Qv.K===se.K?tv=Bv.gridlayer.selectAll("."+Tt._id):tv=Bv[Tt._id.charAt(0)+"axislayer"];tv.each(function(){var ly=v.select(this);Qv.L&&(ly=ly.selectAll(Qv.L)),ly.each(function(Ey){var cy=Tt.l2p(ny?e1(Ey):Ey.x)+Tt._offset,uy=v.select(this);cy<Tt["_visibleLabelMax_"+Yv._id]&&cy>Tt["_visibleLabelMin_"+Yv._id]?uy.style("display","none"):Qv.K==="tick"&&!Dv&&uy.node().style.display!=="none"&&uy.style("display",null)})})})})},Hm(am,z0+1?z0:D0);function f1(){return Ym.length&&Promise.all(Ym)}var Im=null;function Jm(){if(Hm(am,D0),p0.length&&Tt.autotickangles&&(Tt.type!=="log"||String(Tt.dtick).charAt(0)!=="D")){Im=Tt.autotickangles[0];var Bg=0,Qg=[],Hg,ev=1;am.each(function(uv){Bg=Math.max(Bg,uv.fontSize);var vy=Tt.l2p(uv.x),vx=l1(this),Oy=k.bBox(vx.node());ev=Math.max(ev,w.lineCount(vx)),Qg.push({top:0,bottom:10,height:10,left:vy-Oy.width/2,right:vy+Oy.width/2+2,width:Oy.width+2})});var Iv=(Tt.tickson==="boundaries"||Tt.showdividers)&&!jp.secondary,Yv=p0.length,Dv=Math.abs((p0[Yv-1].x-p0[0].x)*Tt._m)/(Yv-1),Qv=Iv?Dv/2:Dv,ny=Iv?Tt.ticklen:Bg*1.25*ev,Bv=Math.sqrt(Math.pow(Qv,2)+Math.pow(ny,2)),tv=Qv/Bv,Sy=Tt.autotickangles.map(function(uv){return uv*Math.PI/180}),ly=Sy.find(function(uv){return Math.abs(Math.cos(uv))<=tv});ly===void 0&&(ly=Sy.reduce(function(uv,vy){return Math.abs(Math.cos(uv))<Math.abs(Math.cos(vy))?uv:vy},Sy[0]));var Ey=ly*(180/Math.PI);if(Iv){var cy=2;for(Tt.ticks&&(cy+=Tt.tickwidth/2),Hg=0;Hg<Qg.length;Hg++){var uy=p0[Hg].xbnd,Fy=Qg[Hg];if(uy[0]!==null&&Fy.left-Tt.l2p(uy[0])<cy||uy[1]!==null&&Tt.l2p(uy[1])-Fy.right<cy){Im=Ey;break}}}else{var Ny=Tt.ticklabelposition||"",yy=Tt.tickson||"",Hy=function(uv){return Ny.indexOf(uv)!==-1},lv=Hy("top"),Ag=Hy("left"),Cg=Hy("right"),zg=Hy("bottom"),rv=yy!=="boundaries"&&(zg||Ag||lv||Cg),vv=rv?(Tt.tickwidth||0)+2*ut:0;for(Hg=0;Hg<Qg.length-1;Hg++)if(y.bBoxIntersect(Qg[Hg],Qg[Hg+1],vv)){Im=Ey;break}}Im&&Hm(am,Im)}}Tt._selections&&(Tt._selections[Gp]=am);var R1=[f1];Tt.automargin&&Zp._redrawFromAutoMarginCount&&z0===90?(Im=z0,R1.push(function(){Hm(am,z0)})):R1.push(Jm),Tt._tickAngles&&R1.push(function(){Tt._tickAngles[Gp]=Im===null?c(D0)?D0:0:Im});var Ng=function(){var Bg=0,Qg=0;return am.each(function(Hg,ev){var Iv=l1(this),Yv=Iv.select(".text-math-group");if(Yv.empty()){var Dv;Tt._vals[ev]&&(Dv=Tt._vals[ev].bb||k.bBox(Iv.node()),Tt._vals[ev].bb=Dv),Bg=Math.max(Bg,Dv.width),Qg=Math.max(Qg,Dv.height)}}),{labelsMaxW:Bg,labelsMaxH:Qg}},B1=Tt._anchorAxis;if(B1&&(B1.autorange||B1.insiderange)&&Q1(Tt)&&!G(Zp,Tt._id)&&(Zp._insideTickLabelsUpdaterange||(Zp._insideTickLabelsUpdaterange={}),B1.autorange&&(Zp._insideTickLabelsUpdaterange[B1._name+".autorange"]=B1.autorange,R1.push(Ng)),B1.insiderange)){var av=Ng(),dg=Tt._id.charAt(0)==="y"?av.labelsMaxW:av.labelsMaxH;dg+=2*ut,Tt.ticklabelposition==="inside"&&(dg+=Tt.ticklen||0);var sv=Tt.side==="right"||Tt.side==="top"?1:-1,xg=sv===1?1:0,Jg=sv===1?0:1,ov=[];ov[Jg]=B1.range[Jg];var fg=B1.range,kv=B1.r2p(fg[xg]),_v=B1.r2p(fg[Jg]),Dg=Zp._insideTickLabelsUpdaterange[B1._name+".range"];if(Dg){var gv=B1.r2p(Dg[xg]),Kg=B1.r2p(Dg[Jg]),iv=sv*(Tt._id.charAt(0)==="y"?1:-1);iv*kv<iv*gv&&(kv=gv,ov[xg]=fg[xg]=Dg[xg]),iv*_v>iv*Kg&&(_v=Kg,ov[Jg]=fg[Jg]=Dg[Jg])}var Kv=Math.abs(_v-kv);Kv-dg>0?(Kv-=dg,dg*=1+dg/Kv):dg=0,Tt._id.charAt(0)!=="y"&&(dg=-dg),ov[xg]=B1.p2r(B1.r2p(fg[xg])+sv*dg),B1.autorange==="min"||B1.autorange==="max reversed"?(ov[0]=null,B1._rangeInitial0=void 0,B1._rangeInitial1=void 0):(B1.autorange==="max"||B1.autorange==="min reversed")&&(ov[1]=null,B1._rangeInitial0=void 0,B1._rangeInitial1=void 0),Zp._insideTickLabelsUpdaterange[B1._name+".range"]=ov}var Nv=y.syncOrAsync(R1);return Nv&&Nv.then&&Ct._promises.push(Nv),Nv};function z1(Ct,Tt,jp){var Zp=Tt._id+"divider",l0=jp.vals,Bp=jp.layer.selectAll("path."+Zp).data(l0,N1);Bp.exit().remove(),Bp.enter().insert("path",":first-child").classed(Zp,1).classed("crisp",1).call(d.stroke,Tt.dividercolor).style("stroke-width",k.crispRound(Ct,Tt.dividerwidth,1)+"px"),Bp.attr("transform",jp.transFn).attr("d",jp.path)}$.getPxPosition=function(Ct,Tt){var jp=Ct._fullLayout._size,Zp=Tt._id.charAt(0),l0=Tt.side,Bp;if(Tt.anchor!=="free"?Bp=Tt._anchorAxis:Zp==="x"?Bp={_offset:jp.t+(1-(Tt.position||0))*jp.h,_length:0}:Zp==="y"&&(Bp={_offset:jp.l+(Tt.position||0)*jp.w+Tt._shift,_length:0}),l0==="top"||l0==="left")return Bp._offset;if(l0==="bottom"||l0==="right")return Bp._offset+Bp._length};function r1(Ct){var Tt=Ct.title.font.size,jp=(Ct.title.text.match(w.BR_TAG_ALL)||[]).length;return Ct.title.hasOwnProperty("standoff")?Tt*(oa+jp*jo):jp?Tt*(jp+1)*jo:Tt}function Lm(Ct,Tt){var jp=Ct._fullLayout,Zp=Tt._id,l0=Zp.charAt(0),Bp=Tt.title.font.size,Gp,p0=(Tt.title.text.match(w.BR_TAG_ALL)||[]).length;if(Tt.title.hasOwnProperty("standoff"))Tt.side==="bottom"||Tt.side==="right"?Gp=Tt._depth+Tt.title.standoff+Bp*oa:(Tt.side==="top"||Tt.side==="left")&&(Gp=Tt._depth+Tt.title.standoff+Bp*(xn+p0*jo));else{var a0=Q1(Tt);if(Tt.type==="multicategory")Gp=Tt._depth;else{var D0=1.5*Bp;a0&&(D0=.5*Bp,Tt.ticks==="outside"&&(D0+=Tt.ticklen)),Gp=10+D0+(Tt.linewidth?Tt.linewidth-1:0)}a0||(l0==="x"?Gp+=Tt.side==="top"?Bp*(Tt.showticklabels?1:0):Bp*(Tt.showticklabels?1.5:.5):Gp+=Tt.side==="right"?Bp*(Tt.showticklabels?1:.5):Bp*(Tt.showticklabels?.5:0))}var z0=$.getPxPosition(Ct,Tt),am,Ym,Hm;l0==="x"?(Ym=Tt._offset+Tt._length/2,Hm=Tt.side==="top"?z0-Gp:z0+Gp):(Hm=Tt._offset+Tt._length/2,Ym=Tt.side==="right"?z0+Gp:z0-Gp,am={rotate:"-90",offset:0});var f1;if(Tt.type!=="multicategory"){var Im=Tt._selections[Tt._id+"tick"];if(f1={selection:Im,side:Tt.side},Im&&Im.node()&&Im.node().parentNode){var Jm=k.getTranslate(Im.node().parentNode);f1.offsetLeft=Jm.x,f1.offsetTop=Jm.y}Tt.title.hasOwnProperty("standoff")&&(f1.pad=0)}return Tt._titleStandoff=Gp,A.draw(Ct,Zp+"title",{propContainer:Tt,propName:Tt._name+".title.text",placeholder:jp._dfltTitle[l0],avoid:f1,transform:am,attributes:{x:Ym,y:Hm,"text-anchor":"middle"}})}$.shouldShowZeroLine=function(Ct,Tt,jp){var Zp=y.simpleMap(Tt.range,Tt.r2l);return Zp[0]*Zp[1]<=0&&Tt.zeroline&&(Tt.type==="linear"||Tt.type==="-")&&!(Tt.rangebreaks&&Tt.maskBreaks(0)===dt)&&(T1(Tt,0)||!O1(Ct,Tt,jp,Zp)||y1(Ct,Tt))},$.clipEnds=function(Ct,Tt){return Tt.filter(function(jp){return T1(Ct,jp.x)})};function T1(Ct,Tt){var jp=Ct.l2p(Tt);return jp>1&&jp<Ct._length-1}function O1(Ct,Tt,jp,Zp){var l0=jp._mainAxis;if(!l0)return;var Bp=Ct._fullLayout,Gp=Tt._id.charAt(0),p0=$.counterLetter(Tt._id),a0=Tt._offset+(Math.abs(Zp[0])<Math.abs(Zp[1])==(Gp==="x")?0:Tt._length);function D0(f1){if(!f1.showline||!f1.linewidth)return!1;var Im=Math.max((f1.linewidth+Tt.zerolinewidth)/2,1);function Jm(B1){return typeof B1=="number"&&Math.abs(B1-a0)<Im}if(Jm(f1._mainLinePosition)||Jm(f1._mainMirrorPosition))return!0;var R1=f1._linepositions||{};for(var Ng in R1)if(Jm(R1[Ng][0])||Jm(R1[Ng][1]))return!0}var z0=Bp._plots[jp._mainSubplot];if(!(z0.mainplotinfo||z0).overlays.length)return D0(jp);for(var am=$.list(Ct,p0),Ym=0;Ym<am.length;Ym++){var Hm=am[Ym];if(Hm._mainAxis===l0&&D0(Hm))return!0}}function y1(Ct,Tt){for(var jp=Ct._fullData,Zp=Tt._mainSubplot,l0=Tt._id.charAt(0),Bp=0;Bp<jp.length;Bp++){var Gp=jp[Bp];if(Gp.visible===!0&&Gp.xaxis+Gp.yaxis===Zp&&(_.traceIs(Gp,"bar-like")&&Gp.orientation==={x:"h",y:"v"}[l0]||Gp.fill&&Gp.fill.charAt(Gp.fill.length-1)===l0))return!0}return!1}function l1(Ct){var Tt=v.select(Ct),jp=Tt.select(".text-math-group");return jp.empty()?Tt.select("text"):jp}$.allowAutoMargin=function(Ct){for(var Tt=$.list(Ct,"",!0),jp=0;jp<Tt.length;jp++){var Zp=Tt[jp];Zp.automargin&&(h.allowAutoMargin(Ct,m1(Zp)),Zp.mirror&&h.allowAutoMargin(Ct,t1(Zp))),_.getComponentMethod("rangeslider","isVisible")(Zp)&&h.allowAutoMargin(Ct,Z1(Zp))}};function m1(Ct){return Ct._id+".automargin"}function t1(Ct){return m1(Ct)+".mirror"}function Z1(Ct){return Ct._id+".rangeslider"}$.swap=function(Ct,Tt){for(var jp=rg(Ct,Tt),Zp=0;Zp<jp.length;Zp++)ug(Ct,jp[Zp].x,jp[Zp].y)};function rg(Ct,Tt){var jp=[],Zp,l0;for(Zp=0;Zp<Tt.length;Zp++){var Bp=[],Gp=Ct._fullData[Tt[Zp]].xaxis,p0=Ct._fullData[Tt[Zp]].yaxis;if(!(!Gp||!p0)){for(l0=0;l0<jp.length;l0++)(jp[l0].x.indexOf(Gp)!==-1||jp[l0].y.indexOf(p0)!==-1)&&Bp.push(l0);if(!Bp.length){jp.push({x:[Gp],y:[p0]});continue}var a0=jp[Bp[0]],D0;if(Bp.length>1)for(l0=1;l0<Bp.length;l0++)D0=jp[Bp[l0]],k1(a0.x,D0.x),k1(a0.y,D0.y);k1(a0.x,[Gp]),k1(a0.y,[p0])}}return jp}function k1(Ct,Tt){for(var jp=0;jp<Tt.length;jp++)Ct.indexOf(Tt[jp])===-1&&Ct.push(Tt[jp])}function ug(Ct,Tt,jp){var Zp=[],l0=[],Bp=Ct.layout,Gp,p0;for(Gp=0;Gp<Tt.length;Gp++)Zp.push($.getFromId(Ct,Tt[Gp]));for(Gp=0;Gp<jp.length;Gp++)l0.push($.getFromId(Ct,jp[Gp]));var a0=Object.keys(T),D0=["anchor","domain","overlaying","position","side","tickangle","editType"],z0=["linear","log"];for(Gp=0;Gp<a0.length;Gp++){var am=a0[Gp],Ym=Zp[0][am],Hm=l0[0][am],f1=!0,Im=!1,Jm=!1;if(!(am.charAt(0)==="_"||typeof Ym=="function"||D0.indexOf(am)!==-1)){for(p0=1;p0<Zp.length&&f1;p0++){var R1=Zp[p0][am];am==="type"&&z0.indexOf(Ym)!==-1&&z0.indexOf(R1)!==-1&&Ym!==R1?Im=!0:R1!==Ym&&(f1=!1)}for(p0=1;p0<l0.length&&f1;p0++){var Ng=l0[p0][am];am==="type"&&z0.indexOf(Hm)!==-1&&z0.indexOf(Ng)!==-1&&Hm!==Ng?Jm=!0:l0[p0][am]!==Hm&&(f1=!1)}f1&&(Im&&(Bp[Zp[0]._name].type="linear"),Jm&&(Bp[l0[0]._name].type="linear"),yg(Bp,am,Zp,l0,Ct._fullLayout._dfltTitle))}}for(Gp=0;Gp<Ct._fullLayout.annotations.length;Gp++){var B1=Ct._fullLayout.annotations[Gp];Tt.indexOf(B1.xref)!==-1&&jp.indexOf(B1.yref)!==-1&&y.swapAttrs(Bp.annotations[Gp],["?"])}}function yg(Ct,Tt,jp,Zp,l0){var Bp=y.nestedProperty,Gp=Bp(Ct[jp[0]._name],Tt).get(),p0=Bp(Ct[Zp[0]._name],Tt).get(),a0;for(Tt==="title"&&(Gp&&Gp.text===l0.x&&(Gp.text=l0.y),p0&&p0.text===l0.y&&(p0.text=l0.x)),a0=0;a0<jp.length;a0++)Bp(Ct,jp[a0]._name+"."+Tt).set(p0);for(a0=0;a0<Zp.length;a0++)Bp(Ct,Zp[a0]._name+"."+Tt).set(Gp)}function Eg(Ct){return Ct._id==="angularaxis"}function Ig(Ct,Tt){for(var jp=Tt._rangebreaks.length,Zp=0;Zp<jp;Zp++){var l0=Tt._rangebreaks[Zp];if(Ct>=l0.min&&Ct<l0.max)return l0.max}return Ct}function Q1(Ct){return(Ct.ticklabelposition||"").indexOf("inside")!==-1}function Rg(Ct,Tt){Q1(Ct._anchorAxis||{})&&Ct._hideCounterAxisInsideTickLabels&&Ct._hideCounterAxisInsideTickLabels(Tt)}function cg(Ct,Tt,jp,Zp){var l0=Ct.anchor!=="free"&&(Ct.overlaying===void 0||Ct.overlaying===!1)?Ct._id:Ct.overlaying,Bp;Zp?Bp=Ct.side==="right"?Tt:-Tt:Bp=Tt,l0 in jp||(jp[l0]={}),Ct.side in jp[l0]||(jp[l0][Ct.side]=0),jp[l0][Ct.side]+=Bp}function Vm(Ct,Tt){return Ct.autoshift?Tt[Ct.overlaying][Ct.side]:Ct.shift||0}function Xg(Ct,Tt){return/%f/.test(Tt)?Ct>=Ze:/%L/.test(Tt)?Ct>=nt:/%[SX]/.test(Tt)?Ct>=Le:/%M/.test(Tt)?Ct>=ft:/%[HI]/.test(Tt)?Ct>=X:/%p/.test(Tt)?Ct>=ie:/%[Aadejuwx]/.test(Tt)?Ct>=Se:/%[UVW]/.test(Tt)?Ct>=ht:/%[Bbm]/.test(Tt)?Ct>=Y:/%[q]/.test(Tt)?Ct>=D:/%[Yy]/.test(Tt)?Ct>=O:!0}}),i1=t((Ue,ve)=>{ve.exports=function(v,c,h){var _,y;if(h){var x=c==="reversed"||c==="min reversed"||c==="max reversed";_=h[x?1:0],y=h[x?0:1]}var w=v("autorangeoptions.minallowed",y===null?_:void 0),A=v("autorangeoptions.maxallowed",_===null?y:void 0);w===void 0&&v("autorangeoptions.clipmin"),A===void 0&&v("autorangeoptions.clipmax"),v("autorangeoptions.include")}}),Qm=t((Ue,ve)=>{var v=i1();ve.exports=function(c,h,_,y){var x=h._template||{},w=h.type||x.type||"-";_("minallowed"),_("maxallowed");var A=_("range");if(!A){var d;!y.noInsiderange&&w!=="log"&&(d=_("insiderange"),d&&(d[0]===null||d[1]===null)&&(h.insiderange=!1,d=void 0),d&&(A=_("range",d)))}var k=h.getAutorangeDflt(A,y),T=_("autorange",k),L;A&&(A[0]===null&&A[1]===null||(A[0]===null||A[1]===null)&&(T==="reversed"||T===!0)||A[0]!==null&&(T==="min"||T==="max reversed")||A[1]!==null&&(T==="max"||T==="min reversed"))&&(A=void 0,delete h.range,h.autorange=!0,L=!0),L||(k=h.getAutorangeDflt(A,y),T=_("autorange",k)),T&&(v(_,T,A),(w==="linear"||w==="-")&&_("rangemode")),h.cleanRange()}}),_1=t((Ue,ve)=>{var v={left:0,top:0};ve.exports=c;function c(_,y,x){y=y||_.currentTarget||_.srcElement,Array.isArray(x)||(x=[0,0]);var w=_.clientX||0,A=_.clientY||0,d=h(y);return x[0]=w-d.left,x[1]=A-d.top,x}function h(_){return _===window||_===document||_===document.body?v:_.getBoundingClientRect()}}),C1=t((Ue,ve)=>{var v=Fn();function c(){var h=!1;try{var _=Object.defineProperty({},"passive",{get:function(){h=!0}});window.addEventListener("test",null,_),window.removeEventListener("test",null,_)}catch{h=!1}return h}ve.exports=v&&c()}),a1=t((Ue,ve)=>{ve.exports=function(v,c,h,_,y){var x=(v-h)/(_-h),w=x+c/(_-h),A=(x+w)/2;return y==="left"||y==="bottom"?x:y==="center"||y==="middle"?A:y==="right"||y==="top"?w:x<2/3-A?x:w>4/3-A?w:A}}),I1=t((Ue,ve)=>{var v=Re(),c=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];ve.exports=function(h,_,y,x){return y==="left"?h=0:y==="center"?h=1:y==="right"?h=2:h=v.constrain(Math.floor(h*3),0,2),x==="bottom"?_=0:x==="middle"?_=1:x==="top"?_=2:_=v.constrain(Math.floor(_*3),0,2),c[_][h]}}),Fm=t((Ue,ve)=>{var v=J0(),c=_y(),h=zm().getGraphDiv,_=it(),y=ve.exports={};y.wrapped=function(x,w,A){x=h(x),x._fullLayout&&c.clear(x._fullLayout._uid+_.HOVERID),y.raw(x,w,A)},y.raw=function(x,w){var A=x._fullLayout,d=x._hoverdata;w||(w={}),!(w.target&&!x._dragged&&v.triggerHandler(x,"plotly_beforehover",w)===!1)&&(A._hoverlayer.selectAll("g").remove(),A._hoverlayer.selectAll("line").remove(),A._hoverlayer.selectAll("circle").remove(),x._hoverdata=void 0,w.target&&d&&x.emit("plotly_unhover",{event:w,points:d}))}}),Km=t((Ue,ve)=>{var v=_1(),c=t0(),h=C1(),_=Re().removeElement,y=jm(),x=ve.exports={};x.align=a1(),x.getCursor=I1();var w=Fm();x.unhover=w.wrapped,x.unhoverRaw=w.raw,x.init=function(k){var T=k.gd,L=1,j=T._context.doubleClickDelay,P=k.element,N,O,B,S,D,z,H,Y;T._mouseDownTime||(T._mouseDownTime=0),P.style.pointerEvents="all",P.onmousedown=ie,h?(P._ontouchstart&&P.removeEventListener("touchstart",P._ontouchstart),P._ontouchstart=ie,P.addEventListener("touchstart",ie,{passive:!1})):P.ontouchstart=ie;function ht(Le,nt,Ze){return Math.abs(Le)<Ze&&(Le=0),Math.abs(nt)<Ze&&(nt=0),[Le,nt]}var Se=k.clampFn||ht;function ie(Le){T._dragged=!1,T._dragging=!0;var nt=d(Le);N=nt[0],O=nt[1],H=Le.target,z=Le,Y=Le.buttons===2||Le.ctrlKey,typeof Le.clientX>"u"&&typeof Le.clientY>"u"&&(Le.clientX=N,Le.clientY=O),B=new Date().getTime(),B-T._mouseDownTime<j?L+=1:(L=1,T._mouseDownTime=B),k.prepFn&&k.prepFn(Le,N,O),c&&!Y?(D=A(),D.style.cursor=window.getComputedStyle(P).cursor):c||(D=document,S=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(P).cursor),document.addEventListener("mouseup",ft),document.addEventListener("touchend",ft),k.dragmode!==!1&&(Le.preventDefault(),document.addEventListener("mousemove",X),document.addEventListener("touchmove",X,{passive:!1}))}function X(Le){Le.preventDefault();var nt=d(Le),Ze=k.minDrag||y.MINDRAG,rt=Se(nt[0]-N,nt[1]-O,Ze),dt=rt[0],pt=rt[1];(dt||pt)&&(T._dragged=!0,x.unhover(T,Le)),T._dragged&&k.moveFn&&!Y&&(T._dragdata={element:P,dx:dt,dy:pt},k.moveFn(dt,pt))}function ft(Le){if(delete T._dragdata,k.dragmode!==!1&&(Le.preventDefault(),document.removeEventListener("mousemove",X),document.removeEventListener("touchmove",X)),document.removeEventListener("mouseup",ft),document.removeEventListener("touchend",ft),c?_(D):S&&(D.documentElement.style.cursor=S,S=null),!T._dragging){T._dragged=!1;return}if(T._dragging=!1,new Date().getTime()-T._mouseDownTime>j&&(L=Math.max(L-1,1)),T._dragged)k.doneFn&&k.doneFn();else{var nt;z.target===H?nt=z:(nt={target:H,srcElement:H,toElement:H},Object.keys(z).concat(Object.keys(z.__proto__)).forEach(Ze=>{var rt=z[Ze];!nt[Ze]&&typeof rt!="function"&&(nt[Ze]=rt)})),k.clickFn&&k.clickFn(L,nt),Y||H.dispatchEvent(new MouseEvent("click",Le))}T._dragging=!1,T._dragged=!1}};function A(){var k=document.createElement("div");k.className="dragcover";var T=k.style;return T.position="fixed",T.left=0,T.right=0,T.top=0,T.bottom=0,T.zIndex=999999999,T.background="none",document.body.appendChild(k),k}x.coverSlip=A;function d(k){return v(k.changedTouches?k.changedTouches[0]:k,document.body)}}),W1=t((Ue,ve)=>{ve.exports=function(v,c){(v.attr("class")||"").split(" ").forEach(function(h){h.indexOf("cursor-")===0&&v.classed(h,!1)}),c&&v.classed("cursor-"+c,!0)}}),s1=t((Ue,ve)=>{var v=W1(),c="data-savedcursor",h="!!";ve.exports=function(_,y){var x=_.attr(c);if(y){if(!x){for(var w=(_.attr("class")||"").split(" "),A=0;A<w.length;A++){var d=w[A];d.indexOf("cursor-")===0&&_.attr(c,d.substr(7)).classed(d,!1)}_.attr(c)||_.attr(c,h)}v(_,y)}else x&&(_.attr(c,null),x===h?v(_):v(_,x))}}),H1=t((Ue,ve)=>{var v=Ut(),c=zp();ve.exports={_isSubplotObj:!0,visible:{valType:"boolean",dflt:!0,editType:"legend"},bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:c.defaultLine,editType:"legend"},maxheight:{valType:"number",min:0,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:v({editType:"legend"}),grouptitlefont:v({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},entrywidth:{valType:"number",min:0,editType:"legend"},entrywidthmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels",editType:"legend"},indentation:{valType:"number",min:-15,dflt:0,editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend"},x:{valType:"number",editType:"legend"},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",editType:"legend"},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:v({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left","top center","top right"],editType:"legend"},editType:"legend"},editType:"legend"}}),q1=t(Ue=>{Ue.isGrouped=function(ve){return(ve.traceorder||"").indexOf("grouped")!==-1},Ue.isVertical=function(ve){return ve.orientation!=="h"},Ue.isReversed=function(ve){return(ve.traceorder||"").indexOf("reversed")!==-1}}),u1=t((Ue,ve)=>{var v=p1(),c=Re(),h=Nm(),_=Mn(),y=H1(),x=Zm(),w=q1();function A(d,k,T,L){var j=k[d]||{},P=h.newContainer(T,d);function N(jo,lt){return c.coerce(j,P,y,jo,lt)}var O=c.coerceFont(N,"font",T.font);N("bgcolor",T.paper_bgcolor),N("bordercolor");var B=N("visible");if(B){for(var S,D=function(jo,lt){var ut=S._input,$=S;return c.coerce(ut,$,_,jo,lt)},z=T.font||{},H=c.coerceFont(N,"grouptitlefont",z,{overrideDflt:{size:Math.round(z.size*1.1)}}),Y=0,ht=!1,Se="normal",ie=(T.shapes||[]).filter(function(jo){return jo.showlegend}),X=L.concat(ie).filter(function(jo){return d===(jo.legend||"legend")}),ft=0;ft<X.length;ft++)if(S=X[ft],!!S.visible){var Le=S._isShape;(S.showlegend||S._dfltShowLegend&&!(S._module&&S._module.attributes&&S._module.attributes.showlegend&&S._module.attributes.showlegend.dflt===!1))&&(Y++,S.showlegend&&(ht=!0,(!Le&&v.traceIs(S,"pie-like")||S._input.showlegend===!0)&&Y++),c.coerceFont(D,"legendgrouptitle.font",H)),(!Le&&v.traceIs(S,"bar")&&T.barmode==="stack"||["tonextx","tonexty"].indexOf(S.fill)!==-1)&&(Se=w.isGrouped({traceorder:Se})?"grouped+reversed":"reversed"),S.legendgroup!==void 0&&S.legendgroup!==""&&(Se=w.isReversed({traceorder:Se})?"reversed+grouped":"grouped")}var nt=c.coerce(k,T,x,"showlegend",ht&&Y>(d==="legend"?1:0));if(nt===!1&&(T[d]=void 0),!(nt===!1&&!j.uirevision)&&(N("uirevision",T.uirevision),nt!==!1)){N("borderwidth");var Ze=N("orientation"),rt=N("yref"),dt=N("xref"),pt=Ze==="h",se=rt==="paper",gt=dt==="paper",xt,Nt,Rt,Pt="left";pt?(xt=0,v.getComponentMethod("rangeslider","isVisible")(k.xaxis)?se?(Nt=1.1,Rt="bottom"):(Nt=1,Rt="top"):se?(Nt=-.1,Rt="top"):(Nt=0,Rt="bottom")):(Nt=1,Rt="auto",gt?xt=1.02:(xt=1,Pt="right")),c.coerce(j,P,{x:{valType:"number",editType:"legend",min:gt?-2:0,max:gt?3:1,dflt:xt}},"x"),c.coerce(j,P,{y:{valType:"number",editType:"legend",min:se?-2:0,max:se?3:1,dflt:Nt}},"y"),N("traceorder",Se),w.isGrouped(T[d])&&N("tracegroupgap"),N("entrywidth"),N("entrywidthmode"),N("indentation"),N("itemsizing"),N("itemwidth"),N("itemclick"),N("itemdoubleclick"),N("groupclick"),N("xanchor",Pt),N("yanchor",Rt),N("maxheight"),N("valign"),c.noneOrAll(j,P,["x","y"]);var xn=N("title.text");if(xn){N("title.side",pt?"left":"top");var oa=c.extendFlat({},O,{size:c.bigFont(O.size)});c.coerceFont(N,"title.font",oa)}}}}ve.exports=function(d,k,T){var L,j=T.slice(),P=k.shapes;if(P)for(L=0;L<P.length;L++){var N=P[L];if(N.showlegend){var O={_input:N._input,visible:N.visible,showlegend:N.showlegend,legend:N.legend};j.push(O)}}var B=["legend"];for(L=0;L<j.length;L++)c.pushUnique(B,j[L].legend);for(k._legends=[],L=0;L<B.length;L++){var S=B[L];A(S,d,k,j),k[S]&&(k[S]._id=S),k._legends.push(S)}}}),eg=t((Ue,ve)=>{var v=p1(),c=Re(),h=c.pushUnique,_=!0;ve.exports=function(y,x,w){var A=x._fullLayout;if(x._dragged||x._editing)return;var d=A.legend.itemclick,k=A.legend.itemdoubleclick,T=A.legend.groupclick;w===1&&d==="toggle"&&k==="toggleothers"&&_&&x.data&&x._context.showTips&&c.notifier(c._(x,"Double-click on legend to isolate one trace"),"long"),_=!1;var L;if(w===1?L=d:w===2&&(L=k),!L)return;var j=T==="togglegroup",P=A.hiddenlabels?A.hiddenlabels.slice():[],N=y.data()[0][0];if(N.groupTitle&&N.noClick)return;var O=x._fullData,B=(A.shapes||[]).filter(function(f0){return f0.showlegend}),S=O.concat(B),D=N.trace;D._isShape&&(D=D._fullInput);var z=D.legendgroup,H,Y,ht,Se,ie,X,ft={},Le=[],nt=[],Ze=[];function rt(f0,la){var $o=Le.indexOf(f0),jt=ft.visible;return jt||(jt=ft.visible=[]),Le.indexOf(f0)===-1&&(Le.push(f0),$o=Le.length-1),jt[$o]=la,$o}var dt=(A.shapes||[]).map(function(f0){return f0._input}),pt=!1;function se(f0,la){dt[f0].visible=la,pt=!0}function gt(f0,la){if(!(N.groupTitle&&!j)){var $o=f0._fullInput||f0,jt=$o._isShape,Fp=$o.index;Fp===void 0&&(Fp=$o._index);var i0=$o.visible===!1?!1:la;jt?se(Fp,i0):rt(Fp,i0)}}var xt=D.legend,Nt=D._fullInput,Rt=Nt&&Nt._isShape;if(!Rt&&v.traceIs(D,"pie-like")){var Pt=N.label,xn=P.indexOf(Pt);if(L==="toggle")xn===-1?P.push(Pt):P.splice(xn,1);else if(L==="toggleothers"){var oa=xn!==-1,jo=[];for(H=0;H<x.calcdata.length;H++){var lt=x.calcdata[H];for(Y=0;Y<lt.length;Y++){var ut=lt[Y],$=ut.label;xt===lt[0].trace.legend&&Pt!==$&&(P.indexOf($)===-1&&(oa=!0),h(P,$),jo.push($))}}if(!oa)for(var yt=0;yt<jo.length;yt++){var Lt=P.indexOf(jo[yt]);Lt!==-1&&P.splice(Lt,1)}}v.call("_guiRelayout",x,"hiddenlabels",P)}else{var ke=z&&z.length,G=[],ne;if(ke)for(H=0;H<S.length;H++)ne=S[H],ne.visible&&ne.legendgroup===z&&G.push(H);if(L==="toggle"){var et;switch(D.visible){case!0:et="legendonly";break;case!1:et=!1;break;case"legendonly":et=!0;break}if(ke)if(j)for(H=0;H<S.length;H++){var ct=S[H];ct.visible!==!1&&ct.legendgroup===z&&gt(ct,et)}else gt(D,et);else gt(D,et)}else if(L==="toggleothers"){var kt,Gt,$t,Ko,Up,e0=!0;for(H=0;H<S.length;H++)if(Up=S[H],kt=Up===D,$t=Up.showlegend!==!0,!(kt||$t)&&(Gt=ke&&Up.legendgroup===z,!Gt&&Up.legend===xt&&Up.visible===!0&&!v.traceIs(Up,"notLegendIsolatable"))){e0=!1;break}for(H=0;H<S.length;H++)if(Up=S[H],!(Up.visible===!1||Up.legend!==xt)&&!v.traceIs(Up,"notLegendIsolatable"))switch(D.visible){case"legendonly":gt(Up,!0);break;case!0:Ko=e0?!0:"legendonly",kt=Up===D,$t=Up.showlegend!==!0&&!Up.legendgroup,Gt=kt||ke&&Up.legendgroup===z,gt(Up,Gt||$t?!0:Ko);break}}for(H=0;H<nt.length;H++)if(ht=nt[H],!!ht){var E0=ht.constructUpdate(),m0=Object.keys(E0);for(Y=0;Y<m0.length;Y++)Se=m0[Y],X=ft[Se]=ft[Se]||[],X[Ze[H]]=E0[Se]}for(ie=Object.keys(ft),H=0;H<ie.length;H++)for(Se=ie[H],Y=0;Y<Le.length;Y++)ft[Se].hasOwnProperty(Y)||(ft[Se][Y]=void 0);pt?v.call("_guiUpdate",x,ft,{shapes:dt},Le):v.call("_guiRestyle",x,ft,Le)}}}),kg=t((Ue,ve)=>{ve.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}}),J1=t((Ue,ve)=>{var v=p1(),c=q1();ve.exports=function(h,_,y){var x=_._inHover,w=c.isGrouped(_),A=c.isReversed(_),d={},k=[],T=!1,L={},j=0,P=0,N,O;function B(gt,xt,Nt){if(_.visible!==!1&&!(y&&gt!==_._id))if(xt===""||!c.isGrouped(_)){var Rt="~~i"+j;k.push(Rt),d[Rt]=[Nt],j++}else k.indexOf(xt)===-1?(k.push(xt),T=!0,d[xt]=[Nt]):d[xt].push(Nt)}for(N=0;N<h.length;N++){var S=h[N],D=S[0],z=D.trace,H=z.legend,Y=z.legendgroup;if(!(!x&&(!z.visible||!z.showlegend)))if(v.traceIs(z,"pie-like"))for(L[Y]||(L[Y]={}),O=0;O<S.length;O++){var ht=S[O].label;L[Y][ht]||(B(H,Y,{label:ht,color:S[O].color,i:S[O].i,trace:z,pts:S[O].pts}),L[Y][ht]=!0,P=Math.max(P,(ht||"").length))}else B(H,Y,D),P=Math.max(P,(z.name||"").length)}if(!k.length)return[];var Se=!T||!w,ie=[];for(N=0;N<k.length;N++){var X=d[k[N]];Se?ie.push(X[0]):ie.push(X)}for(Se&&(ie=[ie]),N=0;N<ie.length;N++){var ft=1/0;for(O=0;O<ie[N].length;O++){var Le=ie[N][O].trace.legendrank;ft>Le&&(ft=Le)}ie[N][0]._groupMinRank=ft,ie[N][0]._preGroupSort=N}var nt=function(gt,xt){return gt[0]._groupMinRank-xt[0]._groupMinRank||gt[0]._preGroupSort-xt[0]._preGroupSort},Ze=function(gt,xt){return gt.trace.legendrank-xt.trace.legendrank||gt._preSort-xt._preSort};for(ie.forEach(function(gt,xt){gt[0]._preGroupSort=xt}),ie.sort(nt),N=0;N<ie.length;N++){ie[N].forEach(function(gt,xt){gt._preSort=xt}),ie[N].sort(Ze);var rt=ie[N][0].trace,dt=null;for(O=0;O<ie[N].length;O++){var pt=ie[N][O].trace.legendgrouptitle;if(pt&&pt.text){dt=pt,x&&(pt.font=_._groupTitleFont);break}}if(A&&ie[N].reverse(),dt){var se=!1;for(O=0;O<ie[N].length;O++)if(v.traceIs(ie[N][O].trace,"pie-like")){se=!0;break}ie[N].unshift({i:-1,groupTitle:dt,noClick:se,trace:{showlegend:rt.showlegend,legendgroup:rt.legendgroup,visible:_.groupclick==="toggleitem"?!0:rt.visible}})}for(O=0;O<ie[N].length;O++)ie[N][O]=[ie[N][O]]}return _._lgroupsLength=ie.length,_._maxNameLength=P,ie}}),b1=t(Ue=>{var ve=Re();function v(c){return c.indexOf("e")!==-1?c.replace(/[.]?0+e/,"e"):c.indexOf(".")!==-1?c.replace(/[.]?0+$/,""):c}Ue.formatPiePercent=function(c,h){var _=v((c*100).toPrecision(3));return ve.numSeparate(_,h)+"%"},Ue.formatPieValue=function(c,h){var _=v(c.toPrecision(10));return ve.numSeparate(_,h)},Ue.getFirstFilled=function(c,h){if(ve.isArrayOrTypedArray(c))for(var _=0;_<h.length;_++){var y=c[h[_]];if(y||y===0||y==="")return y}},Ue.castOption=function(c,h){if(ve.isArrayOrTypedArray(c))return Ue.getFirstFilled(c,h);if(c)return c},Ue.getRotationAngle=function(c){return(c==="auto"?0:c)*Math.PI/180}}),Ug=t((Ue,ve)=>{var v=Y0(),c=sa();ve.exports=function(h,_,y,x){var w=y.marker.pattern;w&&w.shape?v.pointStyle(h,y,x,_):c.fill(h,_.color)}}),gg=t((Ue,ve)=>{var v=sa(),c=b1().castOption,h=Ug();ve.exports=function(_,y,x,w){var A=x.marker.line,d=c(A.color,y.pts)||v.defaultLine,k=c(A.width,y.pts)||0;_.call(h,y,x,w).style("stroke-width",k).call(v.stroke,d)}}),Pg=t((Ue,ve)=>{var v=l(),c=p1(),h=Re(),_=h.strTranslate,y=Y0(),x=sa(),w=ng().extractOpts,A=$p(),d=gg(),k=b1().castOption,T=kg(),L=12,j=5,P=2,N=10,O=5;ve.exports=function(z,H,Y){var ht=H._fullLayout;Y||(Y=ht.legend);var Se=Y.itemsizing==="constant",ie=Y.itemwidth,X=(ie+T.itemGap*2)/2,ft=_(X,0),Le=function(jo,lt,ut,$){var yt;if(jo+1)yt=jo;else if(lt&&lt.width>0)yt=lt.width;else return 0;return Se?$:Math.min(yt,ut)};z.each(function(jo){var lt=v.select(this),ut=h.ensureSingle(lt,"g","layers");ut.style("opacity",jo[0].trace.opacity);var $=Y.indentation,yt=Y.valign,Lt=jo[0].lineHeight,ke=jo[0].height;if(yt==="middle"&&$===0||!Lt||!ke)ut.attr("transform",null);else{var G={top:1,bottom:-1}[yt],ne=G*(.5*(Lt-ke+3))||0,et=Y.indentation;ut.attr("transform",_(et,ne))}var ct=ut.selectAll("g.legendfill").data([jo]);ct.enter().append("g").classed("legendfill",!0);var kt=ut.selectAll("g.legendlines").data([jo]);kt.enter().append("g").classed("legendlines",!0);var Gt=ut.selectAll("g.legendsymbols").data([jo]);Gt.enter().append("g").classed("legendsymbols",!0),Gt.selectAll("g.legendpoints").data([jo]).enter().append("g").classed("legendpoints",!0)}).each(oa).each(rt).each(pt).each(dt).each(gt).each(Pt).each(Rt).each(nt).each(Ze).each(xt).each(Nt);function nt(jo){var lt=S(jo),ut=lt.showFill,$=lt.showLine,yt=lt.showGradientLine,Lt=lt.showGradientFill,ke=lt.anyFill,G=lt.anyLine,ne=jo[0],et=ne.trace,ct,kt,Gt=w(et),$t=Gt.colorscale,Ko=Gt.reversescale,Up=function(jt){if(jt.size())if(ut)y.fillGroupStyle(jt,H,!0);else{var Fp="legendfill-"+et.uid;y.gradient(jt,H,Fp,B(Ko),$t,"fill")}},e0=function(jt){if(jt.size()){var Fp="legendline-"+et.uid;y.lineGroupStyle(jt),y.gradient(jt,H,Fp,B(Ko),$t,"stroke")}},E0=A.hasMarkers(et)||!ke?"M5,0":G?"M5,-2":"M5,-3",m0=v.select(this),f0=m0.select(".legendfill").selectAll("path").data(ut||Lt?[jo]:[]);if(f0.enter().append("path").classed("js-fill",!0),f0.exit().remove(),f0.attr("d",E0+"h"+ie+"v6h-"+ie+"z").call(Up),$||yt){var la=Le(void 0,et.line,N,j);kt=h.minExtend(et,{line:{width:la}}),ct=[h.minExtend(ne,{trace:kt})]}var $o=m0.select(".legendlines").selectAll("path").data($||yt?[ct]:[]);$o.enter().append("path").classed("js-line",!0),$o.exit().remove(),$o.attr("d",E0+(yt?"l"+ie+",0.0001":"h"+ie)).call($?y.lineGroupStyle:e0)}function Ze(jo){var lt=S(jo),ut=lt.anyFill,$=lt.anyLine,yt=lt.showLine,Lt=lt.showMarker,ke=jo[0],G=ke.trace,ne=!Lt&&!$&&!ut&&A.hasText(G),et,ct;function kt(f0,la,$o,jt){var Fp=h.nestedProperty(G,f0).get(),i0=h.isArrayOrTypedArray(Fp)&&la?la(Fp):Fp;if(Se&&i0&&jt!==void 0&&(i0=jt),$o){if(i0<$o[0])return $o[0];if(i0>$o[1])return $o[1]}return i0}function Gt(f0){return ke._distinct&&ke.index&&f0[ke.index]?f0[ke.index]:f0[0]}if(Lt||ne||yt){var $t={},Ko={};if(Lt){$t.mc=kt("marker.color",Gt),$t.mx=kt("marker.symbol",Gt),$t.mo=kt("marker.opacity",h.mean,[.2,1]),$t.mlc=kt("marker.line.color",Gt),$t.mlw=kt("marker.line.width",h.mean,[0,5],P),Ko.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var Up=kt("marker.size",h.mean,[2,16],L);$t.ms=Up,Ko.marker.size=Up}yt&&(Ko.line={width:kt("line.width",Gt,[0,10],j)}),ne&&($t.tx="Aa",$t.tp=kt("textposition",Gt),$t.ts=10,$t.tc=kt("textfont.color",Gt),$t.tf=kt("textfont.family",Gt),$t.tw=kt("textfont.weight",Gt),$t.ty=kt("textfont.style",Gt),$t.tv=kt("textfont.variant",Gt),$t.tC=kt("textfont.textcase",Gt),$t.tE=kt("textfont.lineposition",Gt),$t.tS=kt("textfont.shadow",Gt)),et=[h.minExtend(ke,$t)],ct=h.minExtend(G,Ko),ct.selectedpoints=null,ct.texttemplate=null}var e0=v.select(this).select("g.legendpoints"),E0=e0.selectAll("path.scatterpts").data(Lt?et:[]);E0.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",ft),E0.exit().remove(),E0.call(y.pointStyle,ct,H),Lt&&(et[0].mrc=3);var m0=e0.selectAll("g.pointtext").data(ne?et:[]);m0.enter().append("g").classed("pointtext",!0).append("text").attr("transform",ft),m0.exit().remove(),m0.selectAll("text").call(y.textPointStyle,ct,H)}function rt(jo){var lt=jo[0].trace,ut=lt.type==="waterfall";if(jo[0]._distinct&&ut){var $=jo[0].trace[jo[0].dir].marker;return jo[0].mc=$.color,jo[0].mlw=$.line.width,jo[0].mlc=$.line.color,se(jo,this,"waterfall")}var yt=[];lt.visible&&ut&&(yt=jo[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var Lt=v.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(yt);Lt.enter().append("path").classed("legendwaterfall",!0).attr("transform",ft).style("stroke-miterlimit",1),Lt.exit().remove(),Lt.each(function(ke){var G=v.select(this),ne=lt[ke[0]].marker,et=Le(void 0,ne.line,O,P);G.attr("d",ke[1]).style("stroke-width",et+"px").call(x.fill,ne.color),et&&G.call(x.stroke,ne.line.color)})}function dt(jo){se(jo,this)}function pt(jo){se(jo,this,"funnel")}function se(jo,lt,ut){var $=jo[0].trace,yt=$.marker||{},Lt=yt.line||{},ke=yt.cornerradius?"M6,3a3,3,0,0,1-3,3H-3a3,3,0,0,1-3-3V-3a3,3,0,0,1,3-3H3a3,3,0,0,1,3,3Z":"M6,6H-6V-6H6Z",G=ut?$.visible&&$.type===ut:c.traceIs($,"bar"),ne=v.select(lt).select("g.legendpoints").selectAll("path.legend"+ut).data(G?[jo]:[]);ne.enter().append("path").classed("legend"+ut,!0).attr("d",ke).attr("transform",ft),ne.exit().remove(),ne.each(function(et){var ct=v.select(this),kt=et[0],Gt=Le(kt.mlw,yt.line,O,P);ct.style("stroke-width",Gt+"px");var $t=kt.mcc;if(!Y._inHover&&"mc"in kt){var Ko=w(yt),Up=Ko.mid;Up===void 0&&(Up=(Ko.max+Ko.min)/2),$t=y.tryColorscale(yt,"")(Up)}var e0=$t||kt.mc||yt.color,E0=yt.pattern,m0=y.getPatternAttr,f0=E0&&(m0(E0.shape,0,"")||m0(E0.path,0,""));if(f0){var la=m0(E0.bgcolor,0,null),$o=m0(E0.fgcolor,0,null),jt=E0.fgopacity,Fp=D(E0.size,8,10),i0=D(E0.solidity,.5,1),b0="legend-"+$.uid;ct.call(y.pattern,"legend",H,b0,f0,Fp,i0,$t,E0.fillmode,la,$o,jt)}else ct.call(x.fill,e0);Gt&&x.stroke(ct,kt.mlc||Lt.color)})}function gt(jo){var lt=jo[0].trace,ut=v.select(this).select("g.legendpoints").selectAll("path.legendbox").data(lt.visible&&c.traceIs(lt,"box-violin")?[jo]:[]);ut.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",ft),ut.exit().remove(),ut.each(function(){var $=v.select(this);if((lt.boxpoints==="all"||lt.points==="all")&&x.opacity(lt.fillcolor)===0&&x.opacity((lt.line||{}).color)===0){var yt=h.minExtend(lt,{marker:{size:Se?L:h.constrain(lt.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});ut.call(y.pointStyle,yt,H)}else{var Lt=Le(void 0,lt.line,O,P);$.style("stroke-width",Lt+"px").call(x.fill,lt.fillcolor),Lt&&x.stroke($,lt.line.color)}})}function xt(jo){var lt=jo[0].trace,ut=v.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(lt.visible&&lt.type==="candlestick"?[jo,jo]:[]);ut.enter().append("path").classed("legendcandle",!0).attr("d",function($,yt){return yt?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",ft).style("stroke-miterlimit",1),ut.exit().remove(),ut.each(function($,yt){var Lt=v.select(this),ke=lt[yt?"increasing":"decreasing"],G=Le(void 0,ke.line,O,P);Lt.style("stroke-width",G+"px").call(x.fill,ke.fillcolor),G&&x.stroke(Lt,ke.line.color)})}function Nt(jo){var lt=jo[0].trace,ut=v.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(lt.visible&&lt.type==="ohlc"?[jo,jo]:[]);ut.enter().append("path").classed("legendohlc",!0).attr("d",function($,yt){return yt?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",ft).style("stroke-miterlimit",1),ut.exit().remove(),ut.each(function($,yt){var Lt=v.select(this),ke=lt[yt?"increasing":"decreasing"],G=Le(void 0,ke.line,O,P);Lt.style("fill","none").call(y.dashLine,ke.line.dash,G),G&&x.stroke(Lt,ke.line.color)})}function Rt(jo){xn(jo,this,"pie")}function Pt(jo){xn(jo,this,"funnelarea")}function xn(jo,lt,ut){var $=jo[0],yt=$.trace,Lt=ut?yt.visible&&yt.type===ut:c.traceIs(yt,ut),ke=v.select(lt).select("g.legendpoints").selectAll("path.legend"+ut).data(Lt?[jo]:[]);if(ke.enter().append("path").classed("legend"+ut,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",ft),ke.exit().remove(),ke.size()){var G=yt.marker||{},ne=Le(k(G.line.width,$.pts),G.line,O,P),et="pieLike",ct=h.minExtend(yt,{marker:{line:{width:ne}}},et),kt=h.minExtend($,{trace:ct},et);d(ke,kt,ct,H)}}function oa(jo){var lt=jo[0].trace,ut,$=[];if(lt.visible)switch(lt.type){case"histogram2d":case"heatmap":$=[["M-15,-2V4H15V-2Z"]],ut=!0;break;case"choropleth":case"choroplethmapbox":case"choroplethmap":$=[["M-6,-6V6H6V-6Z"]],ut=!0;break;case"densitymapbox":case"densitymap":$=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],ut="radial";break;case"cone":$=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],ut=!1;break;case"streamtube":$=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],ut=!1;break;case"surface":$=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],ut=!0;break;case"mesh3d":$=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],ut=!1;break;case"volume":$=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],ut=!0;break;case"isosurface":$=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],ut=!1;break}var yt=v.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data($);yt.enter().append("path").classed("legend3dandfriends",!0).attr("transform",ft).style("stroke-miterlimit",1),yt.exit().remove(),yt.each(function(Lt,ke){var G=v.select(this),ne=w(lt),et=ne.colorscale,ct=ne.reversescale,kt=function(Up){if(Up.size()){var e0="legendfill-"+lt.uid;y.gradient(Up,H,e0,B(ct,ut==="radial"),et,"fill")}},Gt;if(et){if(!ut){var $t=et.length;Gt=ke===0?et[ct?$t-1:0][1]:ke===1?et[ct?0:$t-1][1]:et[Math.floor(($t-1)/2)][1]}}else{var Ko=lt.vertexcolor||lt.facecolor||lt.color;Gt=h.isArrayOrTypedArray(Ko)?Ko[ke]||Ko[0]:Ko}G.attr("d",Lt[0]),Gt?G.call(x.fill,Gt):G.call(kt)})}};function B(z,H){var Y=H?"radial":"horizontal";return Y+(z?"":"reversed")}function S(z){var H=z[0].trace,Y=H.contours,ht=A.hasLines(H),Se=A.hasMarkers(H),ie=H.visible&&H.fill&&H.fill!=="none",X=!1,ft=!1;if(Y){var Le=Y.coloring;Le==="lines"?X=!0:ht=Le==="none"||Le==="heatmap"||Y.showlines,Y.type==="constraint"?ie=Y._operation!=="=":(Le==="fill"||Le==="heatmap")&&(ft=!0)}return{showMarker:Se,showLine:ht,showFill:ie,showGradientLine:X,showGradientFill:ft,anyLine:ht||X,anyFill:ie||ft}}function D(z,H,Y){return z&&h.isArrayOrTypedArray(z)?H:z>Y?Y:z}}),vg=t((Ue,ve)=>{var v=l(),c=Re(),h=lg(),_=p1(),y=J0(),x=Km(),w=Y0(),A=sa(),d=j1(),k=eg(),T=kg(),L=$1(),j=L.LINE_SPACING,P=L.FROM_TL,N=L.FROM_BR,O=J1(),B=Pg(),S=q1(),D=1,z=/^legend[0-9]*$/;ve.exports=function(xt,Nt){if(Nt)Y(xt,Nt);else{var Rt=xt._fullLayout,Pt=Rt._legends,xn=Rt._infolayer.selectAll('[class^="legend"]');xn.each(function(){var ut=v.select(this),$=ut.attr("class"),yt=$.split(" ")[0];yt.match(z)&&Pt.indexOf(yt)===-1&&ut.remove()});for(var oa=0;oa<Pt.length;oa++){var jo=Pt[oa],lt=xt._fullLayout[jo];Y(xt,lt)}}};function H(xt,Nt,Rt){if(!(Nt.title.side!=="top center"&&Nt.title.side!=="top right")){var Pt=Nt.title.font,xn=Pt.size*j,oa=0,jo=xt.node(),lt=w.bBox(jo).width;Nt.title.side==="top center"?oa=.5*(Nt._width-2*Rt-2*T.titlePad-lt):Nt.title.side==="top right"&&(oa=Nt._width-2*Rt-2*T.titlePad-lt),d.positionText(xt,Rt+T.titlePad+oa,Rt+xn)}}function Y(xt,Nt){var Rt=Nt||{},Pt=xt._fullLayout,xn=gt(Rt),oa,jo,lt=Rt._inHover;if(lt?(jo=Rt.layer,oa="hover"):(jo=Pt._infolayer,oa=xn),!!jo){oa+=Pt._uid,xt._legendMouseDownTime||(xt._legendMouseDownTime=0);var ut;if(lt){if(!Rt.entries)return;ut=O(Rt.entries,Rt)}else{for(var $=(xt.calcdata||[]).slice(),yt=Pt.shapes,Lt=0;Lt<yt.length;Lt++){var ke=yt[Lt];if(ke.showlegend){var G={_isShape:!0,_fullInput:ke,index:ke._index,name:ke.name||ke.label.text||"shape "+ke._index,legend:ke.legend,legendgroup:ke.legendgroup,legendgrouptitle:ke.legendgrouptitle,legendrank:ke.legendrank,legendwidth:ke.legendwidth,showlegend:ke.showlegend,visible:ke.visible,opacity:ke.opacity,mode:ke.type==="line"?"lines":"markers",line:ke.line,marker:{line:ke.line,color:ke.fillcolor,size:12,symbol:ke.type==="rect"?"square":ke.type==="circle"?"circle":"hexagon2"}};$.push([{trace:G}])}}ut=Pt.showlegend&&O($,Rt,Pt._legends.length>1)}var ne=Pt.hiddenlabels||[];if(!lt&&(!Pt.showlegend||!ut.length))return jo.selectAll("."+xn).remove(),Pt._topdefs.select("#"+oa).remove(),h.autoMargin(xt,xn);var et=c.ensureSingle(jo,"g",xn,function(m0){lt||m0.attr("pointer-events","all")}),ct=c.ensureSingleById(Pt._topdefs,"clipPath",oa,function(m0){m0.append("rect")}),kt=c.ensureSingle(et,"rect","bg",function(m0){m0.attr("shape-rendering","crispEdges")});kt.call(A.stroke,Rt.bordercolor).call(A.fill,Rt.bgcolor).style("stroke-width",Rt.borderwidth+"px");var Gt=c.ensureSingle(et,"g","scrollbox"),$t=Rt.title;Rt._titleWidth=0,Rt._titleHeight=0;var Ko;$t.text?(Ko=c.ensureSingle(Gt,"text",xn+"titletext"),Ko.attr("text-anchor","start").call(w.font,$t.font).text($t.text),Le(Ko,Gt,xt,Rt,D)):Gt.selectAll("."+xn+"titletext").remove();var Up=c.ensureSingle(et,"rect","scrollbar",function(m0){m0.attr(T.scrollBarEnterAttrs).call(A.fill,T.scrollBarColor)}),e0=Gt.selectAll("g.groups").data(ut);e0.enter().append("g").attr("class","groups"),e0.exit().remove();var E0=e0.selectAll("g.traces").data(c.identity);E0.enter().append("g").attr("class","traces"),E0.exit().remove(),E0.style("opacity",function(m0){var f0=m0[0].trace;return _.traceIs(f0,"pie-like")?ne.indexOf(m0[0].label)!==-1?.5:1:f0.visible==="legendonly"?.5:1}).each(function(){v.select(this).call(ie,xt,Rt)}).call(B,xt,Rt).each(function(){lt||v.select(this).call(ft,xt,xn)}),c.syncOrAsync([h.previousPromises,function(){return rt(xt,e0,E0,Rt)},function(){var m0=Pt._size,f0=Rt.borderwidth,la=Rt.xref==="paper",$o=Rt.yref==="paper";if($t.text&&H(Ko,Rt,f0),!lt){var jt,Fp;la?jt=m0.l+m0.w*Rt.x-P[pt(Rt)]*Rt._width:jt=Pt.width*Rt.x-P[pt(Rt)]*Rt._width,$o?Fp=m0.t+m0.h*(1-Rt.y)-P[se(Rt)]*Rt._effHeight:Fp=Pt.height*(1-Rt.y)-P[se(Rt)]*Rt._effHeight;var i0=dt(xt,xn,jt,Fp);if(i0)return;if(Pt.margin.autoexpand){var b0=jt,O0=Fp;jt=la?c.constrain(jt,0,Pt.width-Rt._width):b0,Fp=$o?c.constrain(Fp,0,Pt.height-Rt._effHeight):O0,jt!==b0&&c.log("Constrain "+xn+".x to make legend fit inside graph"),Fp!==O0&&c.log("Constrain "+xn+".y to make legend fit inside graph")}w.setTranslate(et,jt,Fp)}if(Up.on(".drag",null),et.on("wheel",null),lt||Rt._height<=Rt._maxHeight||xt._context.staticPlot){var C0=Rt._effHeight;lt&&(C0=Rt._height),kt.attr({width:Rt._width-f0,height:C0-f0,x:f0/2,y:f0/2}),w.setTranslate(Gt,0,0),ct.select("rect").attr({width:Rt._width-2*f0,height:C0-2*f0,x:f0,y:f0}),w.setClipUrl(Gt,oa,xt),w.setRect(Up,0,0,0,0),delete Rt._scrollY}else{var I0=Math.max(T.scrollBarMinHeight,Rt._effHeight*Rt._effHeight/Rt._height),V0=Rt._effHeight-I0-2*T.scrollBarMargin,H0=Rt._height-Rt._effHeight,im=V0/H0,k0=Math.min(Rt._scrollY||0,H0);kt.attr({width:Rt._width-2*f0+T.scrollBarWidth+T.scrollBarMargin,height:Rt._effHeight-f0,x:f0/2,y:f0/2}),ct.select("rect").attr({width:Rt._width-2*f0+T.scrollBarWidth+T.scrollBarMargin,height:Rt._effHeight-2*f0,x:f0,y:f0+k0}),w.setClipUrl(Gt,oa,xt),Ht(k0,I0,im),et.on("wheel",function(){k0=c.constrain(Rt._scrollY+v.event.deltaY/V0*H0,0,H0),Ht(k0,I0,im),k0!==0&&k0!==H0&&v.event.preventDefault()});var fm,Tm,om,Rm=function(n0,S0,_0){var w0=(_0-S0)/im+n0;return c.constrain(w0,0,H0)},ci=function(n0,S0,_0){var w0=(S0-_0)/im+n0;return c.constrain(w0,0,H0)},Hp=v.behavior.drag().on("dragstart",function(){var n0=v.event.sourceEvent;n0.type==="touchstart"?fm=n0.changedTouches[0].clientY:fm=n0.clientY,om=k0}).on("drag",function(){var n0=v.event.sourceEvent;n0.buttons===2||n0.ctrlKey||(n0.type==="touchmove"?Tm=n0.changedTouches[0].clientY:Tm=n0.clientY,k0=Rm(om,fm,Tm),Ht(k0,I0,im))});Up.call(Hp);var St=v.behavior.drag().on("dragstart",function(){var n0=v.event.sourceEvent;n0.type==="touchstart"&&(fm=n0.changedTouches[0].clientY,om=k0)}).on("drag",function(){var n0=v.event.sourceEvent;n0.type==="touchmove"&&(Tm=n0.changedTouches[0].clientY,k0=ci(om,fm,Tm),Ht(k0,I0,im))});Gt.call(St)}function Ht(n0,S0,_0){Rt._scrollY=xt._fullLayout[xn]._scrollY=n0,w.setTranslate(Gt,0,-n0),w.setRect(Up,Rt._width,T.scrollBarMargin+n0*_0,T.scrollBarWidth,S0),ct.select("rect").attr("y",f0+n0)}if(xt._context.edits.legendPosition){var Sr,Rp,Np,Jp;et.classed("cursor-move",!0),x.init({element:et.node(),gd:xt,prepFn:function(n0){if(n0.target!==Up.node()){var S0=w.getTranslate(et);Np=S0.x,Jp=S0.y}},moveFn:function(n0,S0){if(Np!==void 0&&Jp!==void 0){var _0=Np+n0,w0=Jp+S0;w.setTranslate(et,_0,w0),Sr=x.align(_0,Rt._width,m0.l,m0.l+m0.w,Rt.xanchor),Rp=x.align(w0+Rt._height,-Rt._height,m0.t+m0.h,m0.t,Rt.yanchor)}},doneFn:function(){if(Sr!==void 0&&Rp!==void 0){var n0={};n0[xn+".x"]=Sr,n0[xn+".y"]=Rp,_.call("_guiRelayout",xt,n0)}},clickFn:function(n0,S0){var _0=jo.selectAll("g.traces").filter(function(){var w0=this.getBoundingClientRect();return S0.clientX>=w0.left&&S0.clientX<=w0.right&&S0.clientY>=w0.top&&S0.clientY<=w0.bottom});_0.size()>0&&Se(xt,et,_0,n0,S0)}})}}],xt)}}function ht(xt,Nt,Rt){var Pt=xt[0],xn=Pt.width,oa=Nt.entrywidthmode,jo=Pt.trace.legendwidth||Nt.entrywidth;return oa==="fraction"?Nt._maxWidth*jo:Rt+(jo||xn)}function Se(xt,Nt,Rt,Pt,xn){var oa=Rt.data()[0][0].trace,jo={event:xn,node:Rt.node(),curveNumber:oa.index,expandedIndex:oa.index,data:xt.data,layout:xt.layout,frames:xt._transitionData._frames,config:xt._context,fullData:xt._fullData,fullLayout:xt._fullLayout};oa._group&&(jo.group=oa._group),_.traceIs(oa,"pie-like")&&(jo.label=Rt.datum()[0].label);var lt=y.triggerHandler(xt,"plotly_legendclick",jo);if(Pt===1){if(lt===!1)return;Nt._clickTimeout=setTimeout(function(){xt._fullLayout&&k(Rt,xt,Pt)},xt._context.doubleClickDelay)}else if(Pt===2){Nt._clickTimeout&&clearTimeout(Nt._clickTimeout),xt._legendMouseDownTime=0;var ut=y.triggerHandler(xt,"plotly_legenddoubleclick",jo);ut!==!1&&lt!==!1&&k(Rt,xt,Pt)}}function ie(xt,Nt,Rt){var Pt=gt(Rt),xn=xt.data()[0][0],oa=xn.trace,jo=_.traceIs(oa,"pie-like"),lt=!Rt._inHover&&Nt._context.edits.legendText&&!jo,ut=Rt._maxNameLength,$,yt;xn.groupTitle?($=xn.groupTitle.text,yt=xn.groupTitle.font):(yt=Rt.font,Rt.entries?$=xn.text:($=jo?xn.label:oa.name,oa._meta&&($=c.templateString($,oa._meta))));var Lt=c.ensureSingle(xt,"text",Pt+"text");Lt.attr("text-anchor","start").call(w.font,yt).text(lt?X($,ut):$);var ke=Rt.indentation+Rt.itemwidth+T.itemGap*2;d.positionText(Lt,ke,0),lt?Lt.call(d.makeEditable,{gd:Nt,text:$}).call(Le,xt,Nt,Rt).on("edit",function(G){this.text(X(G,ut)).call(Le,xt,Nt,Rt);var ne=xn.trace._fullInput||{},et={};return et.name=G,ne._isShape?_.call("_guiRelayout",Nt,"shapes["+oa.index+"].name",et.name):_.call("_guiRestyle",Nt,et,oa.index)}):Le(Lt,xt,Nt,Rt)}function X(xt,Nt){var Rt=Math.max(4,Nt);if(xt&&xt.trim().length>=Rt/2)return xt;xt=xt||"";for(var Pt=Rt-xt.length;Pt>0;Pt--)xt+=" ";return xt}function ft(xt,Nt,Rt){var Pt=Nt._context.doubleClickDelay,xn,oa=1,jo=c.ensureSingle(xt,"rect",Rt+"toggle",function(lt){Nt._context.staticPlot||lt.style("cursor","pointer").attr("pointer-events","all"),lt.call(A.fill,"rgba(0,0,0,0)")});Nt._context.staticPlot||(jo.on("mousedown",function(){xn=new Date().getTime(),xn-Nt._legendMouseDownTime<Pt?oa+=1:(oa=1,Nt._legendMouseDownTime=xn)}),jo.on("mouseup",function(){if(!(Nt._dragged||Nt._editing)){var lt=Nt._fullLayout[Rt];new Date().getTime()-Nt._legendMouseDownTime>Pt&&(oa=Math.max(oa-1,1)),Se(Nt,lt,xt,oa,v.event)}}))}function Le(xt,Nt,Rt,Pt,xn){Pt._inHover&&xt.attr("data-notex",!0),d.convertToTspans(xt,Rt,function(){nt(Nt,Rt,Pt,xn)})}function nt(xt,Nt,Rt,Pt){var xn=xt.data()[0][0];if(!Rt._inHover&&xn&&!xn.trace.showlegend){xt.remove();return}var oa=xt.select("g[class*=math-group]"),jo=oa.node(),lt=gt(Rt);Rt||(Rt=Nt._fullLayout[lt]);var ut=Rt.borderwidth,$;Pt===D?$=Rt.title.font:xn.groupTitle?$=xn.groupTitle.font:$=Rt.font;var yt=$.size*j,Lt,ke;if(jo){var G=w.bBox(jo);Lt=G.height,ke=G.width,Pt===D?w.setTranslate(oa,ut,ut+Lt*.75):w.setTranslate(oa,0,Lt*.25)}else{var ne="."+lt+(Pt===D?"title":"")+"text",et=xt.select(ne),ct=d.lineCount(et),kt=et.node();if(Lt=yt*ct,ke=kt?w.bBox(kt).width:0,Pt===D)Rt.title.side==="left"&&(ke+=T.itemGap*2),d.positionText(et,ut+T.titlePad,ut+yt);else{var Gt=T.itemGap*2+Rt.indentation+Rt.itemwidth;xn.groupTitle&&(Gt=T.itemGap,ke-=Rt.indentation+Rt.itemwidth),d.positionText(et,Gt,-yt*((ct-1)/2-.3))}}Pt===D?(Rt._titleWidth=ke,Rt._titleHeight=Lt):(xn.lineHeight=yt,xn.height=Math.max(Lt,16)+3,xn.width=ke)}function Ze(xt){var Nt=0,Rt=0,Pt=xt.title.side;return Pt&&(Pt.indexOf("left")!==-1&&(Nt=xt._titleWidth),Pt.indexOf("top")!==-1&&(Rt=xt._titleHeight)),[Nt,Rt]}function rt(xt,Nt,Rt,Pt){var xn=xt._fullLayout,oa=gt(Pt);Pt||(Pt=xn[oa]);var jo=xn._size,lt=S.isVertical(Pt),ut=S.isGrouped(Pt),$=Pt.entrywidthmode==="fraction",yt=Pt.borderwidth,Lt=2*yt,ke=T.itemGap,G=Pt.indentation+Pt.itemwidth+ke*2,ne=2*(yt+ke),et=se(Pt),ct=Pt.y<0||Pt.y===0&&et==="top",kt=Pt.y>1||Pt.y===1&&et==="bottom",Gt=Pt.tracegroupgap,$t={};let{orientation:Ko,yref:Up}=Pt,{maxheight:e0}=Pt,E0=ct||kt||Ko!=="v"||Up!=="paper";e0||(e0=E0?.5:1);let m0=E0?xn.height:jo.h;Pt._maxHeight=Math.max(e0>1?e0:e0*m0,30);var f0=0;Pt._width=0,Pt._height=0;var la=Ze(Pt);if(lt)Rt.each(function(Ht){var Sr=Ht[0].height;w.setTranslate(this,yt+la[0],yt+la[1]+Pt._height+Sr/2+ke),Pt._height+=Sr,Pt._width=Math.max(Pt._width,Ht[0].width)}),f0=G+Pt._width,Pt._width+=ke+G+Lt,Pt._height+=ne,ut&&(Nt.each(function(Ht,Sr){w.setTranslate(this,0,Sr*Pt.tracegroupgap)}),Pt._height+=(Pt._lgroupsLength-1)*Pt.tracegroupgap);else{var $o=pt(Pt),jt=Pt.x<0||Pt.x===0&&$o==="right",Fp=Pt.x>1||Pt.x===1&&$o==="left",i0=kt||ct,b0=xn.width/2;Pt._maxWidth=Math.max(jt?i0&&$o==="left"?jo.l+jo.w:b0:Fp?i0&&$o==="right"?jo.r+jo.w:b0:jo.w,2*G);var O0=0,C0=0;Rt.each(function(Ht){var Sr=ht(Ht,Pt,G);O0=Math.max(O0,Sr),C0+=Sr}),f0=null;var I0=0;if(ut){var V0=0,H0=0,im=0;Nt.each(function(){var Ht=0,Sr=0;v.select(this).selectAll("g.traces").each(function(Np){var Jp=ht(Np,Pt,G),n0=Np[0].height;w.setTranslate(this,la[0],la[1]+yt+ke+n0/2+Sr),Sr+=n0,Ht=Math.max(Ht,Jp),$t[Np[0].trace.legendgroup]=Ht});var Rp=Ht+ke;H0>0&&Rp+yt+H0>Pt._maxWidth?(I0=Math.max(I0,H0),H0=0,im+=V0+Gt,V0=Sr):V0=Math.max(V0,Sr),w.setTranslate(this,H0,im),H0+=Rp}),Pt._width=Math.max(I0,H0)+yt,Pt._height=im+V0+ne}else{var k0=Rt.size(),fm=C0+Lt+(k0-1)*ke<Pt._maxWidth,Tm=0,om=0,Rm=0,ci=0;Rt.each(function(Ht){var Sr=Ht[0].height,Rp=ht(Ht,Pt,G),Np=fm?Rp:O0;$||(Np+=ke),Np+yt+om-ke>=Pt._maxWidth&&(I0=Math.max(I0,ci),om=0,Rm+=Tm,Pt._height+=Tm,Tm=0),w.setTranslate(this,la[0]+yt+om,la[1]+yt+Rm+Sr/2+ke),ci=om+Rp+ke,om+=Np,Tm=Math.max(Tm,Sr)}),fm?(Pt._width=om+Lt,Pt._height=Tm+ne):(Pt._width=Math.max(I0,ci)+Lt,Pt._height+=Tm+ne)}}Pt._width=Math.ceil(Math.max(Pt._width+la[0],Pt._titleWidth+2*(yt+T.titlePad))),Pt._height=Math.ceil(Math.max(Pt._height+la[1],Pt._titleHeight+2*(yt+T.itemGap))),Pt._effHeight=Math.min(Pt._height,Pt._maxHeight);var Hp=xt._context.edits,St=Hp.legendText||Hp.legendPosition;Rt.each(function(Ht){var Sr=v.select(this).select("."+oa+"toggle"),Rp=Ht[0].height,Np=Ht[0].trace.legendgroup,Jp=ht(Ht,Pt,G);ut&&Np!==""&&(Jp=$t[Np]);var n0=St?G:f0||Jp;!lt&&!$&&(n0+=ke/2),w.setRect(Sr,0,-Rp/2,n0,Rp)})}function dt(xt,Nt,Rt,Pt){var xn=xt._fullLayout,oa=xn[Nt],jo=pt(oa),lt=se(oa),ut=oa.xref==="paper",$=oa.yref==="paper";xt._fullLayout._reservedMargin[Nt]={};var yt=oa.y<.5?"b":"t",Lt=oa.x<.5?"l":"r",ke={r:xn.width-Rt,l:Rt+oa._width,b:xn.height-Pt,t:Pt+oa._effHeight};if(ut&&$)return h.autoMargin(xt,Nt,{x:oa.x,y:oa.y,l:oa._width*P[jo],r:oa._width*N[jo],b:oa._effHeight*N[lt],t:oa._effHeight*P[lt]});ut?xt._fullLayout._reservedMargin[Nt][yt]=ke[yt]:$||oa.orientation==="v"?xt._fullLayout._reservedMargin[Nt][Lt]=ke[Lt]:xt._fullLayout._reservedMargin[Nt][yt]=ke[yt]}function pt(xt){return c.isRightAnchor(xt)?"right":c.isCenterAnchor(xt)?"center":"left"}function se(xt){return c.isBottomAnchor(xt)?"bottom":c.isMiddleAnchor(xt)?"middle":"top"}function gt(xt){return xt._id||"legend"}}),jg=t(Ue=>{var ve=l(),v=E(),c=wt(),h=Re(),_=h.pushUnique,y=h.strTranslate,x=h.strRotate,w=J0(),A=j1(),d=s1(),k=Y0(),T=sa(),L=Km(),j=km(),P=jm().zindexSeparator,N=p1(),O=T0(),B=it(),S=u1(),D=vg(),z=B.YANGLE,H=Math.PI*z/180,Y=1/Math.sin(H),ht=Math.cos(H),Se=Math.sin(H),ie=B.HOVERARROWSIZE,X=B.HOVERTEXTPAD,ft={box:!0,ohlc:!0,violin:!0,candlestick:!0},Le={scatter:!0,scattergl:!0,splom:!0};function nt(G,ne){return G.distance-ne.distance}Ue.hover=function(G,ne,et,ct){G=h.getGraphDiv(G);var kt=ne.target;h.throttle(G._fullLayout._uid+B.HOVERID,B.HOVERMINTIME,function(){Ze(G,ne,et,ct,kt)})},Ue.loneHover=function(G,ne){var et=!0;Array.isArray(G)||(et=!1,G=[G]);var ct=ne.gd,kt=yt(ct),Gt=Lt(ct),$t=G.map(function(jt){var Fp=jt._x0||jt.x0||jt.x||0,i0=jt._x1||jt.x1||jt.x||0,b0=jt._y0||jt.y0||jt.y||0,O0=jt._y1||jt.y1||jt.y||0,C0=jt.eventData;if(C0){var I0=Math.min(Fp,i0),V0=Math.max(Fp,i0),H0=Math.min(b0,O0),im=Math.max(b0,O0),k0=jt.trace;if(N.traceIs(k0,"gl3d")){var fm=ct._fullLayout[k0.scene]._scene.container,Tm=fm.offsetLeft,om=fm.offsetTop;I0+=Tm,V0+=Tm,H0+=om,im+=om}C0.bbox={x0:I0+Gt,x1:V0+Gt,y0:H0+kt,y1:im+kt},ne.inOut_bbox&&ne.inOut_bbox.push(C0.bbox)}else C0=!1;return{color:jt.color||T.defaultLine,x0:jt.x0||jt.x||0,x1:jt.x1||jt.x||0,y0:jt.y0||jt.y||0,y1:jt.y1||jt.y||0,xLabel:jt.xLabel,yLabel:jt.yLabel,zLabel:jt.zLabel,text:jt.text,name:jt.name,idealAlign:jt.idealAlign,borderColor:jt.borderColor,fontFamily:jt.fontFamily,fontSize:jt.fontSize,fontColor:jt.fontColor,fontWeight:jt.fontWeight,fontStyle:jt.fontStyle,fontVariant:jt.fontVariant,nameLength:jt.nameLength,textAlign:jt.textAlign,trace:jt.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:jt.hovertemplate||!1,hovertemplateLabels:jt.hovertemplateLabels||!1,eventData:C0}}),Ko=!1,Up=pt($t,{gd:ct,hovermode:"closest",rotateLabels:Ko,bgColor:ne.bgColor||T.background,container:ve.select(ne.container),outerContainer:ne.outerContainer||ne.container}),e0=Up.hoverLabels,E0=5,m0=0,f0=0;e0.sort(function(jt,Fp){return jt.y0-Fp.y0}).each(function(jt,Fp){var i0=jt.y0-jt.by/2;i0-E0<m0?jt.offset=m0-i0+E0:jt.offset=0,m0=i0+jt.by+jt.offset,Fp===ne.anchorIndex&&(f0=jt.offset)}).each(function(jt){jt.offset-=f0});var la=ct._fullLayout._invScaleX,$o=ct._fullLayout._invScaleY;return Rt(e0,Ko,la,$o),et?e0:e0.node()};function Ze(G,ne,et,ct,kt){et||(et="xy"),typeof et=="string"&&(et=et.split(P)[0]);var Gt=Array.isArray(et)?et:[et],$t,Ko=G._fullLayout,Up=Ko.hoversubplots,e0=Ko._plots||[],E0=e0[et],m0=Ko._has("cartesian"),f0=ne.hovermode||Ko.hovermode,la=(f0||"").charAt(0)==="x",$o=(f0||"").charAt(0)==="y",jt,Fp;if(m0&&(la||$o)&&Up==="axis"){for(var i0=Gt.length,b0=0;b0<i0;b0++)if($t=Gt[b0],e0[$t]){jt=j.getFromId(G,$t,"x"),Fp=j.getFromId(G,$t,"y");var O0=(la?jt:Fp)._subplotsWith;if(O0&&O0.length)for(var C0=0;C0<O0.length;C0++)_(Gt,O0[C0])}}if(E0&&Up!=="single"){var I0=E0.overlays.map(function(fg){return fg.id});Gt=Gt.concat(I0)}for(var V0=Gt.length,H0=new Array(V0),im=new Array(V0),k0=!1,fm=0;fm<V0;fm++)if($t=Gt[fm],e0[$t])k0=!0,H0[fm]=e0[$t].xaxis,im[fm]=e0[$t].yaxis;else if(Ko[$t]&&Ko[$t]._subplot){var Tm=Ko[$t]._subplot;H0[fm]=Tm.xaxis,im[fm]=Tm.yaxis}else{h.warn("Unrecognized subplot: "+$t);return}if(f0&&!k0&&(f0="closest"),["x","y","closest","x unified","y unified"].indexOf(f0)===-1||!G.calcdata||G.querySelector(".zoombox")||G._dragging)return L.unhoverRaw(G,ne);var om=Ko.hoverdistance;om===-1&&(om=1/0);var Rm=Ko.spikedistance;Rm===-1&&(Rm=1/0);var ci=[],Hp=[],St,Ht,Sr,Rp,Np,Jp,n0,S0,_0,w0,X0,$0,Z0,Am={hLinePoint:null,vLinePoint:null},e1=!1;if(Array.isArray(ne))for(f0="array",Sr=0;Sr<ne.length;Sr++)Np=G.calcdata[ne[Sr].curveNumber||0],Np&&(Jp=Np[0].trace,Np[0].trace.hoverinfo!=="skip"&&(Hp.push(Np),Jp.orientation==="h"&&(e1=!0)));else{var E1=G.calcdata.slice();for(E1.sort(function(fg,kv){var _v=fg[0].trace.zorder||0,Dg=kv[0].trace.zorder||0;return _v-Dg}),Rp=0;Rp<E1.length;Rp++)Np=E1[Rp],Jp=Np[0].trace,Jp.hoverinfo!=="skip"&&O.isTraceInSubplots(Jp,Gt)&&(Hp.push(Np),Jp.orientation==="h"&&(e1=!0));var N1=!kt,z1,r1;if(N1)"xpx"in ne?z1=ne.xpx:z1=H0[0]._length/2,"ypx"in ne?r1=ne.ypx:r1=im[0]._length/2;else{if(w.triggerHandler(G,"plotly_beforehover",ne)===!1)return;var Lm=kt.getBoundingClientRect();z1=ne.clientX-Lm.left,r1=ne.clientY-Lm.top,Ko._calcInverseTransform(G);var T1=h.apply3DTransform(Ko._invTransform)(z1,r1);if(z1=T1[0],r1=T1[1],z1<0||z1>H0[0]._length||r1<0||r1>im[0]._length)return L.unhoverRaw(G,ne)}if(ne.pointerX=z1+H0[0]._offset,ne.pointerY=r1+im[0]._offset,"xval"in ne?St=O.flat(Gt,ne.xval):St=O.p2c(H0,z1),"yval"in ne?Ht=O.flat(Gt,ne.yval):Ht=O.p2c(im,r1),!v(St[0])||!v(Ht[0]))return h.warn("Fx.hover failed",ne,G),L.unhoverRaw(G,ne)}var O1=1/0;function y1(fg,kv){for(Rp=0;Rp<Hp.length;Rp++)if(Np=Hp[Rp],!(!Np||!Np[0]||!Np[0].trace)&&(Jp=Np[0].trace,!(Jp.visible!==!0||Jp._length===0)&&["carpet","contourcarpet"].indexOf(Jp._module.name)===-1)){if(_0=f0,O.isUnifiedHover(_0)&&(_0=_0.charAt(0)),Jp.type==="splom"?(S0=0,n0=Gt[S0]):(n0=O.getSubplot(Jp),S0=Gt.indexOf(n0)),$0={cd:Np,trace:Jp,xa:H0[S0],ya:im[S0],maxHoverDistance:om,maxSpikeDistance:Rm,index:!1,distance:Math.min(O1,om),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:T.defaultLine,name:Jp.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},Ko[n0]&&($0.subplot=Ko[n0]._subplot),Ko._splomScenes&&Ko._splomScenes[Jp.uid]&&($0.scene=Ko._splomScenes[Jp.uid]),_0==="array"){var _v=ne[Rp];"pointNumber"in _v?($0.index=_v.pointNumber,_0="closest"):(_0="","xval"in _v&&(w0=_v.xval,_0="x"),"yval"in _v&&(X0=_v.yval,_0=_0?"closest":"y"))}else fg!==void 0&&kv!==void 0?(w0=fg,X0=kv):(w0=St[S0],X0=Ht[S0]);if(Z0=ci.length,om!==0)if(Jp._module&&Jp._module.hoverPoints){var Dg=Jp._module.hoverPoints($0,w0,X0,_0,{finiteRange:!0,hoverLayer:Ko._hoverlayer,hoversubplots:Up,gd:G});if(Dg)for(var gv,Kg=0;Kg<Dg.length;Kg++)gv=Dg[Kg],v(gv.x0)&&v(gv.y0)&&ci.push(Pt(gv,f0))}else h.log("Unrecognized trace type in hover:",Jp);if(f0==="closest"&&ci.length>Z0&&(ci.splice(0,Z0),O1=ci[0].distance),m0&&Rm!==0&&ci.length===0){$0.distance=Rm,$0.index=!1;var iv=Jp._module.hoverPoints($0,w0,X0,"closest",{hoverLayer:Ko._hoverlayer});if(iv&&(iv=iv.filter(function(ev){return ev.spikeDistance<=Rm})),iv&&iv.length){var Kv,Nv=iv.filter(function(ev){return ev.xa.showspikes&&ev.xa.spikesnap!=="hovered data"});if(Nv.length){var Bg=Nv[0];v(Bg.x0)&&v(Bg.y0)&&(Kv=m1(Bg),(!Am.vLinePoint||Am.vLinePoint.spikeDistance>Kv.spikeDistance)&&(Am.vLinePoint=Kv))}var Qg=iv.filter(function(ev){return ev.ya.showspikes&&ev.ya.spikesnap!=="hovered data"});if(Qg.length){var Hg=Qg[0];v(Hg.x0)&&v(Hg.y0)&&(Kv=m1(Hg),(!Am.hLinePoint||Am.hLinePoint.spikeDistance>Kv.spikeDistance)&&(Am.hLinePoint=Kv))}}}}}y1();function l1(fg,kv,_v){for(var Dg=null,gv=1/0,Kg,iv=0;iv<fg.length;iv++)jt&&jt._id!==fg[iv].xa._id||Fp&&Fp._id!==fg[iv].ya._id||(Kg=fg[iv].spikeDistance,_v&&iv===0&&(Kg=-1/0),Kg<=gv&&Kg<=kv&&(Dg=fg[iv],gv=Kg));return Dg}function m1(fg){return fg?{xa:fg.xa,ya:fg.ya,x:fg.xSpike!==void 0?fg.xSpike:(fg.x0+fg.x1)/2,y:fg.ySpike!==void 0?fg.ySpike:(fg.y0+fg.y1)/2,distance:fg.distance,spikeDistance:fg.spikeDistance,curveNumber:fg.trace.index,color:fg.color,pointNumber:fg.index}:null}var t1={fullLayout:Ko,container:Ko._hoverlayer,event:ne};G._spikepoints;var Z1={vLinePoint:Am.vLinePoint,hLinePoint:Am.hLinePoint};G._spikepoints=Z1;var rg=function(){var fg=ci.filter(function(_v){return jt&&jt._id===_v.xa._id&&Fp&&Fp._id===_v.ya._id}),kv=ci.filter(function(_v){return!(jt&&jt._id===_v.xa._id&&Fp&&Fp._id===_v.ya._id)});fg.sort(nt),kv.sort(nt),ci=fg.concat(kv),ci=ut(ci,f0)};rg();var k1=f0.charAt(0),ug=(k1==="x"||k1==="y")&&ci[0]&&Le[ci[0].trace.type];if(m0&&Rm!==0&&ci.length!==0){var yg=ci.filter(function(fg){return fg.ya.showspikes}),Eg=l1(yg,Rm,ug);Am.hLinePoint=m1(Eg);var Ig=ci.filter(function(fg){return fg.xa.showspikes}),Q1=l1(Ig,Rm,ug);Am.vLinePoint=m1(Q1)}if(ci.length===0){var Rg=L.unhoverRaw(G,ne);return m0&&(Am.hLinePoint!==null||Am.vLinePoint!==null)&&jo()&&xn(G,Am,t1),Rg}if(m0&&jo()&&xn(G,Am,t1),O.isXYhover(_0)&&ci[0].length!==0&&ci[0].trace.type!=="splom"){var cg=ci[0];ft[cg.trace.type]?ci=ci.filter(function(fg){return fg.trace.index===cg.trace.index}):ci=[cg];var Vm=ci.length,Xg=$("x",cg,Ko),Ct=$("y",cg,Ko);y1(Xg,Ct);var Tt=[],jp={},Zp=0,l0=function(fg){var kv=ft[fg.trace.type]?rt(fg):fg.trace.index;if(!jp[kv])Zp++,jp[kv]=Zp,Tt.push(fg);else{var _v=jp[kv]-1,Dg=Tt[_v];_v>0&&Math.abs(fg.distance)<Math.abs(Dg.distance)&&(Tt[_v]=fg)}},Bp;for(Bp=0;Bp<Vm;Bp++)l0(ci[Bp]);for(Bp=ci.length-1;Bp>Vm-1;Bp--)l0(ci[Bp]);ci=Tt,rg()}var Gp=G._hoverdata,p0=[],a0=yt(G),D0=Lt(G);for(Sr=0;Sr<ci.length;Sr++){var z0=ci[Sr],am=O.makeEventData(z0,z0.trace,z0.cd);if(z0.hovertemplate!==!1){var Ym=!1;z0.cd[z0.index]&&z0.cd[z0.index].ht&&(Ym=z0.cd[z0.index].ht),z0.hovertemplate=Ym||z0.trace.hovertemplate||!1}if(z0.xa&&z0.ya){var Hm=z0.x0+z0.xa._offset,f1=z0.x1+z0.xa._offset,Im=z0.y0+z0.ya._offset,Jm=z0.y1+z0.ya._offset,R1=Math.min(Hm,f1),Ng=Math.max(Hm,f1),B1=Math.min(Im,Jm),av=Math.max(Im,Jm);am.bbox={x0:R1+D0,x1:Ng+D0,y0:B1+a0,y1:av+a0}}z0.eventData=[am],p0.push(am)}G._hoverdata=p0;var dg=f0==="y"&&(Hp.length>1||ci.length>1)||f0==="closest"&&e1&&ci.length>1,sv=T.combine(Ko.plot_bgcolor||T.background,Ko.paper_bgcolor),xg=pt(ci,{gd:G,hovermode:f0,rotateLabels:dg,bgColor:sv,container:Ko._hoverlayer,outerContainer:Ko._paper.node(),commonLabelOpts:Ko.hoverlabel,hoverdistance:Ko.hoverdistance}),Jg=xg.hoverLabels;if(O.isUnifiedHover(f0)||(gt(Jg,dg,Ko,xg.commonLabelBoundingBox),Rt(Jg,dg,Ko._invScaleX,Ko._invScaleY)),kt&&kt.tagName){var ov=N.getComponentMethod("annotations","hasClickToShow")(G,p0);d(ve.select(kt),ov?"pointer":"")}!kt||ct||!oa(G,ne,Gp)||(Gp&&G.emit("plotly_unhover",{event:ne,points:Gp}),G.emit("plotly_hover",{event:ne,points:G._hoverdata,xaxes:H0,yaxes:im,xvals:St,yvals:Ht}))}function rt(G){return[G.trace.index,G.index,G.x0,G.y0,G.name,G.attr,G.xa?G.xa._id:"",G.ya?G.ya._id:""].join(",")}var dt=/<extra>([\s\S]*)<\/extra>/;function pt(G,ne){var et=ne.gd,ct=et._fullLayout,kt=ne.hovermode,Gt=ne.rotateLabels,$t=ne.bgColor,Ko=ne.container,Up=ne.outerContainer,e0=ne.commonLabelOpts||{};if(G.length===0)return[[]];var E0=ne.fontFamily||B.HOVERFONT,m0=ne.fontSize||B.HOVERFONTSIZE,f0=ne.fontWeight||ct.font.weight,la=ne.fontStyle||ct.font.style,$o=ne.fontVariant||ct.font.variant,jt=ne.fontTextcase||ct.font.textcase,Fp=ne.fontLineposition||ct.font.lineposition,i0=ne.fontShadow||ct.font.shadow,b0=G[0],O0=b0.xa,C0=b0.ya,I0=kt.charAt(0),V0=I0+"Label",H0=b0[V0];if(H0===void 0&&O0.type==="multicategory")for(var im=0;im<G.length&&(H0=G[im][V0],H0===void 0);im++);var k0=ke(et,Up),fm=k0.top,Tm=k0.width,om=k0.height,Rm=H0!==void 0&&b0.distance<=ne.hoverdistance&&(kt==="x"||kt==="y");if(Rm){var ci=!0,Hp,St;for(Hp=0;Hp<G.length;Hp++)if(ci&&G[Hp].zLabel===void 0&&(ci=!1),St=G[Hp].hoverinfo||G[Hp].trace.hoverinfo,St){var Ht=Array.isArray(St)?St:St.split("+");if(Ht.indexOf("all")===-1&&Ht.indexOf(kt)===-1){Rm=!1;break}}ci&&(Rm=!1)}var Sr=Ko.selectAll("g.axistext").data(Rm?[0]:[]);Sr.enter().append("g").classed("axistext",!0),Sr.exit().remove();var Rp={minX:0,maxX:0,minY:0,maxY:0};if(Sr.each(function(){var Vm=ve.select(this),Xg=h.ensureSingle(Vm,"path","",function(dg){dg.style({"stroke-width":"1px"})}),Ct=h.ensureSingle(Vm,"text","",function(dg){dg.attr("data-notex",1)}),Tt=e0.bgcolor||T.defaultLine,jp=e0.bordercolor||T.contrast(Tt),Zp=T.contrast(Tt),l0=e0.font,Bp={weight:l0.weight||f0,style:l0.style||la,variant:l0.variant||$o,textcase:l0.textcase||jt,lineposition:l0.lineposition||Fp,shadow:l0.shadow||i0,family:l0.family||E0,size:l0.size||m0,color:l0.color||Zp};Xg.style({fill:Tt,stroke:jp}),Ct.text(H0).call(k.font,Bp).call(A.positionText,0,0).call(A.convertToTspans,et),Vm.attr("transform","");var Gp=ke(et,Ct.node()),p0,a0;if(kt==="x"){var D0=O0.side==="top"?"-":"";Ct.attr("text-anchor","middle").call(A.positionText,0,O0.side==="top"?fm-Gp.bottom-ie-X:fm-Gp.top+ie+X),p0=O0._offset+(b0.x0+b0.x1)/2,a0=C0._offset+(O0.side==="top"?0:C0._length);var z0=Gp.width/2+X,am=p0;p0<z0?am=z0:p0>ct.width-z0&&(am=ct.width-z0),Xg.attr("d","M"+(p0-am)+",0L"+(p0-am+ie)+","+D0+ie+"H"+z0+"v"+D0+(X*2+Gp.height)+"H"+-z0+"V"+D0+ie+"H"+(p0-am-ie)+"Z"),p0=am,Rp.minX=p0-z0,Rp.maxX=p0+z0,O0.side==="top"?(Rp.minY=a0-(X*2+Gp.height),Rp.maxY=a0-X):(Rp.minY=a0+X,Rp.maxY=a0+(X*2+Gp.height))}else{var Ym,Hm,f1;C0.side==="right"?(Ym="start",Hm=1,f1="",p0=O0._offset+O0._length):(Ym="end",Hm=-1,f1="-",p0=O0._offset),a0=C0._offset+(b0.y0+b0.y1)/2,Ct.attr("text-anchor",Ym),Xg.attr("d","M0,0L"+f1+ie+","+ie+"V"+(X+Gp.height/2)+"h"+f1+(X*2+Gp.width)+"V-"+(X+Gp.height/2)+"H"+f1+ie+"V-"+ie+"Z"),Rp.minY=a0-(X+Gp.height/2),Rp.maxY=a0+(X+Gp.height/2),C0.side==="right"?(Rp.minX=p0+ie,Rp.maxX=p0+ie+(X*2+Gp.width)):(Rp.minX=p0-ie-(X*2+Gp.width),Rp.maxX=p0-ie);var Im=Gp.height/2,Jm=fm-Gp.top-Im,R1="clip"+ct._uid+"commonlabel"+C0._id,Ng;if(p0<Gp.width+2*X+ie){Ng="M-"+(ie+X)+"-"+Im+"h-"+(Gp.width-X)+"V"+Im+"h"+(Gp.width-X)+"Z";var B1=Gp.width-p0+X;A.positionText(Ct,B1,Jm),Ym==="end"&&Ct.selectAll("tspan").each(function(){var dg=ve.select(this),sv=k.tester.append("text").text(dg.text()).call(k.font,Bp),xg=ke(et,sv.node());Math.round(xg.width)<Math.round(Gp.width)&&dg.attr("x",B1-xg.width),sv.remove()})}else A.positionText(Ct,Hm*(X+ie),Jm),Ng=null;var av=ct._topclips.selectAll("#"+R1).data(Ng?[0]:[]);av.enter().append("clipPath").attr("id",R1).append("path"),av.exit().remove(),av.select("path").attr("d",Ng),k.setClipUrl(Ct,Ng?R1:null,et)}Vm.attr("transform",y(p0,a0))}),O.isUnifiedHover(kt)){Ko.selectAll("g.hovertext").remove();var Np=G.filter(function(Vm){return Vm.hoverinfo!=="none"});if(Np.length===0)return[];var Jp=ct.hoverlabel,n0=Jp.font,S0=Np[0],_0=((kt==="x unified"?S0.xa:S0.ya).unifiedhovertitle||{}).text,w0=_0?h.hovertemplateString(_0,{},ct._d3locale,kt==="x unified"?{xa:S0.xa,x:S0.xVal}:{ya:S0.ya,y:S0.yVal}):H0,X0={showlegend:!0,legend:{title:{text:w0,font:n0},font:n0,bgcolor:Jp.bgcolor,bordercolor:Jp.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:ct.legend?ct.legend.traceorder:void 0,orientation:"v"}},$0={font:n0};S(X0,$0,et._fullData);var Z0=$0.legend;Z0.entries=[];for(var Am=0;Am<Np.length;Am++){var e1=Np[Am];if(e1.hoverinfo!=="none"){var E1=se(e1,!0,kt,ct,H0),N1=E1[0],z1=E1[1];e1.name=z1,z1!==""?e1.text=z1+" : "+N1:e1.text=N1;var r1=e1.cd[e1.index];r1&&(r1.mc&&(e1.mc=r1.mc),r1.mcc&&(e1.mc=r1.mcc),r1.mlc&&(e1.mlc=r1.mlc),r1.mlcc&&(e1.mlc=r1.mlcc),r1.mlw&&(e1.mlw=r1.mlw),r1.mrc&&(e1.mrc=r1.mrc),r1.dir&&(e1.dir=r1.dir)),e1._distinct=!0,Z0.entries.push([e1])}}Z0.entries.sort(function(Vm,Xg){return Vm[0].trace.index-Xg[0].trace.index}),Z0.layer=Ko,Z0._inHover=!0,Z0._groupTitleFont=Jp.grouptitlefont,D(et,Z0);var Lm=Ko.select("g.legend"),T1=ke(et,Lm.node()),O1=T1.width+2*X,y1=T1.height+2*X,l1=Np[0],m1=(l1.x0+l1.x1)/2,t1=(l1.y0+l1.y1)/2,Z1=!(N.traceIs(l1.trace,"bar-like")||N.traceIs(l1.trace,"box-violin")),rg,k1;I0==="y"?Z1?(k1=t1-X,rg=t1+X):(k1=Math.min.apply(null,Np.map(function(Vm){return Math.min(Vm.y0,Vm.y1)})),rg=Math.max.apply(null,Np.map(function(Vm){return Math.max(Vm.y0,Vm.y1)}))):k1=rg=h.mean(Np.map(function(Vm){return(Vm.y0+Vm.y1)/2}))-y1/2;var ug,yg;I0==="x"?Z1?(ug=m1+X,yg=m1-X):(ug=Math.max.apply(null,Np.map(function(Vm){return Math.max(Vm.x0,Vm.x1)})),yg=Math.min.apply(null,Np.map(function(Vm){return Math.min(Vm.x0,Vm.x1)}))):ug=yg=h.mean(Np.map(function(Vm){return(Vm.x0+Vm.x1)/2}))-O1/2;var Eg=O0._offset,Ig=C0._offset;rg+=Ig,ug+=Eg,yg+=Eg-O1,k1+=Ig-y1;var Q1,Rg;return ug+O1<Tm&&ug>=0?Q1=ug:yg+O1<Tm&&yg>=0?Q1=yg:Eg+O1<Tm?Q1=Eg:ug-m1<m1-yg+O1?Q1=Tm-O1:Q1=0,Q1+=X,rg+y1<om&&rg>=0?Rg=rg:k1+y1<om&&k1>=0?Rg=k1:Ig+y1<om?Rg=Ig:rg-t1<t1-k1+y1?Rg=om-y1:Rg=0,Rg+=X,Lm.attr("transform",y(Q1-1,Rg-1)),Lm}var cg=Ko.selectAll("g.hovertext").data(G,function(Vm){return rt(Vm)});return cg.enter().append("g").classed("hovertext",!0).each(function(){var Vm=ve.select(this);Vm.append("rect").call(T.fill,T.addOpacity($t,.8)),Vm.append("text").classed("name",!0),Vm.append("path").style("stroke-width","1px"),Vm.append("text").classed("nums",!0).call(k.font,{weight:f0,style:la,variant:$o,textcase:jt,lineposition:Fp,shadow:i0,family:E0,size:m0})}),cg.exit().remove(),cg.each(function(Vm){var Xg=ve.select(this).attr("transform",""),Ct=Vm.color;Array.isArray(Ct)&&(Ct=Ct[Vm.eventData[0].pointNumber]);var Tt=Vm.bgcolor||Ct,jp=T.combine(T.opacity(Tt)?Tt:T.defaultLine,$t),Zp=T.combine(T.opacity(Ct)?Ct:T.defaultLine,$t),l0=Vm.borderColor||T.contrast(jp),Bp=se(Vm,Rm,kt,ct,H0,Xg),Gp=Bp[0],p0=Bp[1],a0=Xg.select("text.nums").call(k.font,{family:Vm.fontFamily||E0,size:Vm.fontSize||m0,color:Vm.fontColor||l0,weight:Vm.fontWeight||f0,style:Vm.fontStyle||la,variant:Vm.fontVariant||$o,textcase:Vm.fontTextcase||jt,lineposition:Vm.fontLineposition||Fp,shadow:Vm.fontShadow||i0}).text(Gp).attr("data-notex",1).call(A.positionText,0,0).call(A.convertToTspans,et),D0=Xg.select("text.name"),z0=0,am=0;if(p0&&p0!==Gp){D0.call(k.font,{family:Vm.fontFamily||E0,size:Vm.fontSize||m0,color:Zp,weight:Vm.fontWeight||f0,style:Vm.fontStyle||la,variant:Vm.fontVariant||$o,textcase:Vm.fontTextcase||jt,lineposition:Vm.fontLineposition||Fp,shadow:Vm.fontShadow||i0}).text(p0).attr("data-notex",1).call(A.positionText,0,0).call(A.convertToTspans,et);var Ym=ke(et,D0.node());z0=Ym.width+2*X,am=Ym.height+2*X}else D0.remove(),Xg.select("rect").remove();Xg.select("path").style({fill:jp,stroke:l0});var Hm=Vm.xa._offset+(Vm.x0+Vm.x1)/2,f1=Vm.ya._offset+(Vm.y0+Vm.y1)/2,Im=Math.abs(Vm.x1-Vm.x0),Jm=Math.abs(Vm.y1-Vm.y0),R1=ke(et,a0.node()),Ng=R1.width/ct._invScaleX,B1=R1.height/ct._invScaleY;Vm.ty0=(fm-R1.top)/ct._invScaleY,Vm.bx=Ng+2*X,Vm.by=Math.max(B1+2*X,am),Vm.anchor="start",Vm.txwidth=Ng,Vm.tx2width=z0,Vm.offset=0;var av=(Ng+ie+X+z0)*ct._invScaleX,dg,sv;if(Gt)Vm.pos=Hm,dg=f1+Jm/2+av<=om,sv=f1-Jm/2-av>=0,(Vm.idealAlign==="top"||!dg)&&sv?(f1-=Jm/2,Vm.anchor="end"):dg?(f1+=Jm/2,Vm.anchor="start"):Vm.anchor="middle",Vm.crossPos=f1;else{if(Vm.pos=f1,dg=Hm+Im/2+av<=Tm,sv=Hm-Im/2-av>=0,(Vm.idealAlign==="left"||!dg)&&sv)Hm-=Im/2,Vm.anchor="end";else if(dg)Hm+=Im/2,Vm.anchor="start";else{Vm.anchor="middle";var xg=av/2,Jg=Hm+xg-Tm,ov=Hm-xg;Jg>0&&(Hm-=Jg),ov<0&&(Hm+=-ov)}Vm.crossPos=Hm}a0.attr("text-anchor",Vm.anchor),z0&&D0.attr("text-anchor",Vm.anchor),Xg.attr("transform",y(Hm,f1)+(Gt?x(z):""))}),{hoverLabels:cg,commonLabelBoundingBox:Rp}}function se(G,ne,et,ct,kt,Gt){var $t="",Ko="";G.nameOverride!==void 0&&(G.name=G.nameOverride),G.name&&(G.trace._meta&&(G.name=h.templateString(G.name,G.trace._meta)),$t=lt(G.name,G.nameLength));var Up=et.charAt(0),e0=Up==="x"?"y":"x";G.zLabel!==void 0?(G.xLabel!==void 0&&(Ko+="x: "+G.xLabel+"<br>"),G.yLabel!==void 0&&(Ko+="y: "+G.yLabel+"<br>"),G.trace.type!=="choropleth"&&G.trace.type!=="choroplethmapbox"&&G.trace.type!=="choroplethmap"&&(Ko+=(Ko?"z: ":"")+G.zLabel)):ne&&G[Up+"Label"]===kt?Ko=G[e0+"Label"]||"":G.xLabel===void 0?G.yLabel!==void 0&&G.trace.type!=="scattercarpet"&&(Ko=G.yLabel):G.yLabel===void 0?Ko=G.xLabel:Ko="("+G.xLabel+", "+G.yLabel+")",(G.text||G.text===0)&&!Array.isArray(G.text)&&(Ko+=(Ko?"<br>":"")+G.text),G.extraText!==void 0&&(Ko+=(Ko?"<br>":"")+G.extraText),Gt&&Ko===""&&!G.hovertemplate&&($t===""&&Gt.remove(),Ko=$t);var E0=G.hovertemplate||!1;if(E0){var m0=G.hovertemplateLabels||G;G[Up+"Label"]!==kt&&(m0[Up+"other"]=m0[Up+"Val"],m0[Up+"otherLabel"]=m0[Up+"Label"]),Ko=h.hovertemplateString(E0,m0,ct._d3locale,G.eventData[0]||{},G.trace._meta),Ko=Ko.replace(dt,function(f0,la){return $t=lt(la,G.nameLength),""})}return[Ko,$t]}function gt(G,ne,et,ct){var kt=ne?"xa":"ya",Gt=ne?"ya":"xa",$t=0,Ko=1,Up=G.size(),e0=new Array(Up),E0=0,m0=ct.minX,f0=ct.maxX,la=ct.minY,$o=ct.maxY,jt=function(St){return St*et._invScaleX},Fp=function(St){return St*et._invScaleY};G.each(function(St){var Ht=St[kt],Sr=St[Gt],Rp=Ht._id.charAt(0)==="x",Np=Ht.range;E0===0&&Np&&Np[0]>Np[1]!==Rp&&(Ko=-1);var Jp=0,n0=Rp?et.width:et.height;if(et.hovermode==="x"||et.hovermode==="y"){var S0=xt(St,ne),_0=St.anchor,w0=_0==="end"?-1:1,X0,$0;if(_0==="middle")X0=St.crossPos+(Rp?Fp(S0.y-St.by/2):jt(St.bx/2+St.tx2width/2)),$0=X0+(Rp?Fp(St.by):jt(St.bx));else if(Rp)X0=St.crossPos+Fp(ie+S0.y)-Fp(St.by/2-ie),$0=X0+Fp(St.by);else{var Z0=jt(w0*ie+S0.x),Am=Z0+jt(w0*St.bx);X0=St.crossPos+Math.min(Z0,Am),$0=St.crossPos+Math.max(Z0,Am)}Rp?la!==void 0&&$o!==void 0&&Math.min($0,$o)-Math.max(X0,la)>1&&(Sr.side==="left"?(Jp=Sr._mainLinePosition,n0=et.width):n0=Sr._mainLinePosition):m0!==void 0&&f0!==void 0&&Math.min($0,f0)-Math.max(X0,m0)>1&&(Sr.side==="top"?(Jp=Sr._mainLinePosition,n0=et.height):n0=Sr._mainLinePosition)}e0[E0++]=[{datum:St,traceIndex:St.trace.index,dp:0,pos:St.pos,posref:St.posref,size:St.by*(Rp?Y:1)/2,pmin:Jp,pmax:n0}]}),e0.sort(function(St,Ht){return St[0].posref-Ht[0].posref||Ko*(Ht[0].traceIndex-St[0].traceIndex)});var i0,b0,O0,C0,I0,V0,H0;function im(St){var Ht=St[0],Sr=St[St.length-1];if(b0=Ht.pmin-Ht.pos-Ht.dp+Ht.size,O0=Sr.pos+Sr.dp+Sr.size-Ht.pmax,b0>.01){for(I0=St.length-1;I0>=0;I0--)St[I0].dp+=b0;i0=!1}if(!(O0<.01)){if(b0<-.01){for(I0=St.length-1;I0>=0;I0--)St[I0].dp-=O0;i0=!1}if(i0){var Rp=0;for(C0=0;C0<St.length;C0++)V0=St[C0],V0.pos+V0.dp+V0.size>Ht.pmax&&Rp++;for(C0=St.length-1;C0>=0&&!(Rp<=0);C0--)V0=St[C0],V0.pos>Ht.pmax-1&&(V0.del=!0,Rp--);for(C0=0;C0<St.length&&!(Rp<=0);C0++)if(V0=St[C0],V0.pos<Ht.pmin+1)for(V0.del=!0,Rp--,O0=V0.size*2,I0=St.length-1;I0>=0;I0--)St[I0].dp-=O0;for(C0=St.length-1;C0>=0&&!(Rp<=0);C0--)V0=St[C0],V0.pos+V0.dp+V0.size>Ht.pmax&&(V0.del=!0,Rp--)}}}for(;!i0&&$t<=Up;){for($t++,i0=!0,C0=0;C0<e0.length-1;){var k0=e0[C0],fm=e0[C0+1],Tm=k0[k0.length-1],om=fm[0];if(b0=Tm.pos+Tm.dp+Tm.size-om.pos-om.dp+om.size,b0>.01){for(I0=fm.length-1;I0>=0;I0--)fm[I0].dp+=b0;for(k0.push.apply(k0,fm),e0.splice(C0+1,1),H0=0,I0=k0.length-1;I0>=0;I0--)H0+=k0[I0].dp;for(O0=H0/k0.length,I0=k0.length-1;I0>=0;I0--)k0[I0].dp-=O0;i0=!1}else C0++}e0.forEach(im)}for(C0=e0.length-1;C0>=0;C0--){var Rm=e0[C0];for(I0=Rm.length-1;I0>=0;I0--){var ci=Rm[I0],Hp=ci.datum;Hp.offset=ci.dp,Hp.del=ci.del}}}function xt(G,ne){var et=0,ct=G.offset;return ne&&(ct*=-Se,et=G.offset*ht),{x:et,y:ct}}function Nt(G){var ne={start:1,end:-1,middle:0}[G.anchor],et=ne*(ie+X),ct=et+ne*(G.txwidth+X),kt=G.anchor==="middle";return kt&&(et-=G.tx2width/2,ct+=G.txwidth/2+X),{alignShift:ne,textShiftX:et,text2ShiftX:ct}}function Rt(G,ne,et,ct){var kt=function($t){return $t*et},Gt=function($t){return $t*ct};G.each(function($t){var Ko=ve.select(this);if($t.del)return Ko.remove();var Up=Ko.select("text.nums"),e0=$t.anchor,E0=e0==="end"?-1:1,m0=Nt($t),f0=xt($t,ne),la=f0.x,$o=f0.y,jt=e0==="middle",Fp="hoverlabel"in $t.trace?$t.trace.hoverlabel.showarrow:!0,i0;jt?i0="M-"+kt($t.bx/2+$t.tx2width/2)+","+Gt($o-$t.by/2)+"h"+kt($t.bx)+"v"+Gt($t.by)+"h-"+kt($t.bx)+"Z":Fp?i0="M0,0L"+kt(E0*ie+la)+","+Gt(ie+$o)+"v"+Gt($t.by/2-ie)+"h"+kt(E0*$t.bx)+"v-"+Gt($t.by)+"H"+kt(E0*ie+la)+"V"+Gt($o-ie)+"Z":i0="M"+kt(E0*ie+la)+","+Gt($o-$t.by/2)+"h"+kt(E0*$t.bx)+"v"+Gt($t.by)+"h"+kt(-E0*$t.bx)+"Z",Ko.select("path").attr("d",i0);var b0=la+m0.textShiftX,O0=$o+$t.ty0-$t.by/2+X,C0=$t.textAlign||"auto";C0!=="auto"&&(C0==="left"&&e0!=="start"?(Up.attr("text-anchor","start"),b0=jt?-$t.bx/2-$t.tx2width/2+X:-$t.bx-X):C0==="right"&&e0!=="end"&&(Up.attr("text-anchor","end"),b0=jt?$t.bx/2-$t.tx2width/2-X:$t.bx+X)),Up.call(A.positionText,kt(b0),Gt(O0)),$t.tx2width&&(Ko.select("text.name").call(A.positionText,kt(m0.text2ShiftX+m0.alignShift*X+la),Gt($o+$t.ty0-$t.by/2+X)),Ko.select("rect").call(k.setRect,kt(m0.text2ShiftX+(m0.alignShift-1)*$t.tx2width/2+la),Gt($o-$t.by/2-1),kt($t.tx2width),Gt($t.by+2)))})}function Pt(G,ne){var et=G.index,ct=G.trace||{},kt=G.cd[0],Gt=G.cd[et]||{};function $t(f0){return f0||v(f0)&&f0===0}var Ko=Array.isArray(et)?function(f0,la){var $o=h.castOption(kt,et,f0);return $t($o)?$o:h.extractOption({},ct,"",la)}:function(f0,la){return h.extractOption(Gt,ct,f0,la)};function Up(f0,la,$o){var jt=Ko(la,$o);$t(jt)&&(G[f0]=jt)}if(Up("hoverinfo","hi","hoverinfo"),Up("bgcolor","hbg","hoverlabel.bgcolor"),Up("borderColor","hbc","hoverlabel.bordercolor"),Up("fontFamily","htf","hoverlabel.font.family"),Up("fontSize","hts","hoverlabel.font.size"),Up("fontColor","htc","hoverlabel.font.color"),Up("fontWeight","htw","hoverlabel.font.weight"),Up("fontStyle","hty","hoverlabel.font.style"),Up("fontVariant","htv","hoverlabel.font.variant"),Up("nameLength","hnl","hoverlabel.namelength"),Up("textAlign","hta","hoverlabel.align"),G.posref=ne==="y"||ne==="closest"&&ct.orientation==="h"?G.xa._offset+(G.x0+G.x1)/2:G.ya._offset+(G.y0+G.y1)/2,G.x0=h.constrain(G.x0,0,G.xa._length),G.x1=h.constrain(G.x1,0,G.xa._length),G.y0=h.constrain(G.y0,0,G.ya._length),G.y1=h.constrain(G.y1,0,G.ya._length),G.xLabelVal!==void 0&&(G.xLabel="xLabel"in G?G.xLabel:j.hoverLabelText(G.xa,G.xLabelVal,ct.xhoverformat),G.xVal=G.xa.c2d(G.xLabelVal)),G.yLabelVal!==void 0&&(G.yLabel="yLabel"in G?G.yLabel:j.hoverLabelText(G.ya,G.yLabelVal,ct.yhoverformat),G.yVal=G.ya.c2d(G.yLabelVal)),G.zLabelVal!==void 0&&G.zLabel===void 0&&(G.zLabel=String(G.zLabelVal)),!isNaN(G.xerr)&&!(G.xa.type==="log"&&G.xerr<=0)){var e0=j.tickText(G.xa,G.xa.c2l(G.xerr),"hover").text;G.xerrneg!==void 0?G.xLabel+=" +"+e0+" / -"+j.tickText(G.xa,G.xa.c2l(G.xerrneg),"hover").text:G.xLabel+=" ± "+e0,ne==="x"&&(G.distance+=1)}if(!isNaN(G.yerr)&&!(G.ya.type==="log"&&G.yerr<=0)){var E0=j.tickText(G.ya,G.ya.c2l(G.yerr),"hover").text;G.yerrneg!==void 0?G.yLabel+=" +"+E0+" / -"+j.tickText(G.ya,G.ya.c2l(G.yerrneg),"hover").text:G.yLabel+=" ± "+E0,ne==="y"&&(G.distance+=1)}var m0=G.hoverinfo||G.trace.hoverinfo;return m0&&m0!=="all"&&(m0=Array.isArray(m0)?m0:m0.split("+"),m0.indexOf("x")===-1&&(G.xLabel=void 0),m0.indexOf("y")===-1&&(G.yLabel=void 0),m0.indexOf("z")===-1&&(G.zLabel=void 0),m0.indexOf("text")===-1&&(G.text=void 0),m0.indexOf("name")===-1&&(G.name=void 0)),G}function xn(G,ne,et){var ct=et.container,kt=et.fullLayout,Gt=kt._size,$t=et.event,Ko=!!ne.hLinePoint,Up=!!ne.vLinePoint,e0,E0;if(ct.selectAll(".spikeline").remove(),!!(Up||Ko)){var m0=T.combine(kt.plot_bgcolor,kt.paper_bgcolor);if(Ko){var f0=ne.hLinePoint,la,$o;e0=f0&&f0.xa,E0=f0&&f0.ya;var jt=E0.spikesnap;jt==="cursor"?(la=$t.pointerX,$o=$t.pointerY):(la=e0._offset+f0.x,$o=E0._offset+f0.y);var Fp=c.readability(f0.color,m0)<1.5?T.contrast(m0):f0.color,i0=E0.spikemode,b0=E0.spikethickness,O0=E0.spikecolor||Fp,C0=j.getPxPosition(G,E0),I0,V0;if(i0.indexOf("toaxis")!==-1||i0.indexOf("across")!==-1){if(i0.indexOf("toaxis")!==-1&&(I0=C0,V0=la),i0.indexOf("across")!==-1){var H0=E0._counterDomainMin,im=E0._counterDomainMax;E0.anchor==="free"&&(H0=Math.min(H0,E0.position),im=Math.max(im,E0.position)),I0=Gt.l+H0*Gt.w,V0=Gt.l+im*Gt.w}ct.insert("line",":first-child").attr({x1:I0,x2:V0,y1:$o,y2:$o,"stroke-width":b0,stroke:O0,"stroke-dasharray":k.dashStyle(E0.spikedash,b0)}).classed("spikeline",!0).classed("crisp",!0),ct.insert("line",":first-child").attr({x1:I0,x2:V0,y1:$o,y2:$o,"stroke-width":b0+2,stroke:m0}).classed("spikeline",!0).classed("crisp",!0)}i0.indexOf("marker")!==-1&&ct.insert("circle",":first-child").attr({cx:C0+(E0.side!=="right"?b0:-b0),cy:$o,r:b0,fill:O0}).classed("spikeline",!0)}if(Up){var k0=ne.vLinePoint,fm,Tm;e0=k0&&k0.xa,E0=k0&&k0.ya;var om=e0.spikesnap;om==="cursor"?(fm=$t.pointerX,Tm=$t.pointerY):(fm=e0._offset+k0.x,Tm=E0._offset+k0.y);var Rm=c.readability(k0.color,m0)<1.5?T.contrast(m0):k0.color,ci=e0.spikemode,Hp=e0.spikethickness,St=e0.spikecolor||Rm,Ht=j.getPxPosition(G,e0),Sr,Rp;if(ci.indexOf("toaxis")!==-1||ci.indexOf("across")!==-1){if(ci.indexOf("toaxis")!==-1&&(Sr=Ht,Rp=Tm),ci.indexOf("across")!==-1){var Np=e0._counterDomainMin,Jp=e0._counterDomainMax;e0.anchor==="free"&&(Np=Math.min(Np,e0.position),Jp=Math.max(Jp,e0.position)),Sr=Gt.t+(1-Jp)*Gt.h,Rp=Gt.t+(1-Np)*Gt.h}ct.insert("line",":first-child").attr({x1:fm,x2:fm,y1:Sr,y2:Rp,"stroke-width":Hp,stroke:St,"stroke-dasharray":k.dashStyle(e0.spikedash,Hp)}).classed("spikeline",!0).classed("crisp",!0),ct.insert("line",":first-child").attr({x1:fm,x2:fm,y1:Sr,y2:Rp,"stroke-width":Hp+2,stroke:m0}).classed("spikeline",!0).classed("crisp",!0)}ci.indexOf("marker")!==-1&&ct.insert("circle",":first-child").attr({cx:fm,cy:Ht-(e0.side!=="top"?Hp:-Hp),r:Hp,fill:St}).classed("spikeline",!0)}}}function oa(G,ne,et){if(!et||et.length!==G._hoverdata.length)return!0;for(var ct=et.length-1;ct>=0;ct--){var kt=et[ct],Gt=G._hoverdata[ct];if(kt.curveNumber!==Gt.curveNumber||String(kt.pointNumber)!==String(Gt.pointNumber)||String(kt.pointNumbers)!==String(Gt.pointNumbers)||kt.binNumber!==Gt.binNumber)return!0}return!1}function jo(G,ne){return!0}function lt(G,ne){return A.plainText(G||"",{len:ne,allowedTags:["br","sub","sup","b","i","em","s","u"]})}function ut(G,ne){for(var et=ne.charAt(0),ct=[],kt=[],Gt=[],$t=0;$t<G.length;$t++){var Ko=G[$t];N.traceIs(Ko.trace,"bar-like")||N.traceIs(Ko.trace,"box-violin")?Gt.push(Ko):Ko.trace[et+"period"]?kt.push(Ko):ct.push(Ko)}return ct.concat(kt).concat(Gt)}function $(G,ne,et){var ct=ne[G+"a"],kt=ne[G+"Val"],Gt=ne.cd[0];if(ct.type==="category"||ct.type==="multicategory")kt=ct._categoriesMap[kt];else if(ct.type==="date"){var $t=ne.trace[G+"periodalignment"];if($t){var Ko=ne.cd[ne.index],Up=Ko[G+"Start"];Up===void 0&&(Up=Ko[G]);var e0=Ko[G+"End"];e0===void 0&&(e0=Ko[G]);var E0=e0-Up;$t==="end"?kt+=E0:$t==="middle"&&(kt+=E0/2)}kt=ct.d2c(kt)}return Gt&&Gt.t&&Gt.t.posLetter===ct._id&&(et.boxmode==="group"||et.violinmode==="group")&&(kt+=Gt.t.dPos),kt}function yt(G){return G.offsetTop+G.clientTop}function Lt(G){return G.offsetLeft+G.clientLeft}function ke(G,ne){var et=G._fullLayout,ct=ne.getBoundingClientRect(),kt=ct.left,Gt=ct.top,$t=kt+ct.width,Ko=Gt+ct.height,Up=h.apply3DTransform(et._invTransform)(kt,Gt),e0=h.apply3DTransform(et._invTransform)($t,Ko),E0=Up[0],m0=Up[1],f0=e0[0],la=e0[1];return{x:E0,y:m0,width:f0-E0,height:la-m0,top:Math.min(m0,la),left:Math.min(E0,f0),right:Math.max(E0,f0),bottom:Math.max(m0,la)}}}),mv=t((Ue,ve)=>{var v=Re(),c=sa(),h=T0().isUnifiedHover;ve.exports=function(_,y,x,w){w=w||{};var A=y.legend;function d(k){w.font[k]||(w.font[k]=A?y.legend.font[k]:y.font[k])}y&&h(y.hovermode)&&(w.font||(w.font={}),d("size"),d("family"),d("color"),d("weight"),d("style"),d("variant"),A?(w.bgcolor||(w.bgcolor=c.combine(y.legend.bgcolor,y.paper_bgcolor)),w.bordercolor||(w.bordercolor=y.legend.bordercolor)):w.bgcolor||(w.bgcolor=y.paper_bgcolor)),x("hoverlabel.bgcolor",w.bgcolor),x("hoverlabel.bordercolor",w.bordercolor),x("hoverlabel.namelength",w.namelength),x("hoverlabel.showarrow",w.showarrow),v.coerceFont(x,"hoverlabel.font",w.font),x("hoverlabel.align",w.align)}}),Fv=t((Ue,ve)=>{var v=Re(),c=mv(),h=zt();ve.exports=function(_,y){function x(w,A){return v.coerce(_,y,h,w,A)}c(_,y,x)}}),Pv=t((Ue,ve)=>{var v=Re(),c=Zt(),h=mv();ve.exports=function(_,y,x,w){function A(k,T){return v.coerce(_,y,c,k,T)}var d=v.extendFlat({},w.hoverlabel);y.hovertemplate&&(d.namelength=-1),h(_,y,A,d)}}),fy=t((Ue,ve)=>{var v=Re(),c=zt();ve.exports=function(h,_){function y(x,w){return _[x]!==void 0?_[x]:v.coerce(h,_,c,x,w)}return y("clickmode"),y("hoversubplots"),y("hovermode")}}),ty=t((Ue,ve)=>{var v=Re(),c=zt(),h=fy(),_=mv();ve.exports=function(y,x){function w(P,N){return v.coerce(y,x,c,P,N)}var A=h(y,x);A&&(w("hoverdistance"),w("spikedistance"));var d=w("dragmode");d==="select"&&w("selectdirection");var k=x._has("mapbox"),T=x._has("map"),L=x._has("geo"),j=x._basePlotModules.length;x.dragmode==="zoom"&&((k||T||L)&&j===1||(k||T)&&L&&j===2)&&(x.dragmode="pan"),_(y,x,w),v.coerceFont(w,"hoverlabel.grouptitlefont",x.hoverlabel.font)}}),wv=t((Ue,ve)=>{var v=Re(),c=p1();ve.exports=function(_){var y=_.calcdata,x=_._fullLayout;function w(L){return function(j){return v.coerceHoverinfo({hoverinfo:j},{_module:L._module},x)}}for(var A=0;A<y.length;A++){var d=y[A],k=d[0].trace;if(!c.traceIs(k,"pie-like")){var T=c.traceIs(k,"2dMap")?h:v.fillArray;T(k.hoverinfo,d,"hi",w(k)),k.hovertemplate&&T(k.hovertemplate,d,"ht"),k.hoverlabel&&(T(k.hoverlabel.bgcolor,d,"hbg"),T(k.hoverlabel.bordercolor,d,"hbc"),T(k.hoverlabel.font.size,d,"hts"),T(k.hoverlabel.font.color,d,"htc"),T(k.hoverlabel.font.family,d,"htf"),T(k.hoverlabel.font.weight,d,"htw"),T(k.hoverlabel.font.style,d,"hty"),T(k.hoverlabel.font.variant,d,"htv"),T(k.hoverlabel.namelength,d,"hnl"),T(k.hoverlabel.align,d,"hta"),T(k.hoverlabel.showarrow,d,"htsa"))}}};function h(_,y,x,w){w=w||v.identity,Array.isArray(_)&&(y[0][x]=w(_))}}),py=t((Ue,ve)=>{var v=p1(),c=jg().hover;ve.exports=function(h,_,y){var x=v.getComponentMethod("annotations","onClick")(h,h._hoverdata);y!==void 0&&c(h,_,y,!0);function w(){h.emit("plotly_click",{points:h._hoverdata,event:_})}h._hoverdata&&_&&_.target&&(x&&x.then?x.then(w):w(),_.stopImmediatePropagation&&_.stopImmediatePropagation())}}),Zv=t((Ue,ve)=>{var v=l(),c=Re(),h=Km(),_=T0(),y=zt(),x=jg();ve.exports={moduleType:"component",name:"fx",constants:it(),schema:{layout:y},attributes:Zt(),layoutAttributes:y,supplyLayoutGlobalDefaults:Fv(),supplyDefaults:Pv(),supplyLayoutDefaults:ty(),calc:wv(),getDistanceFunction:_.getDistanceFunction,getClosest:_.getClosest,inbox:_.inbox,quadrature:_.quadrature,appendArrayPointValue:_.appendArrayPointValue,castHoverOption:A,castHoverinfo:d,hover:x.hover,unhover:h.unhover,loneHover:x.loneHover,loneUnhover:w,click:py()};function w(k){var T=c.isD3Selection(k)?k:v.select(k);T.selectAll("g.hovertext").remove(),T.selectAll(".spikeline").remove()}function A(k,T,L){return c.castOption(k,T,"hoverlabel."+L)}function d(k,T,L){function j(P){return c.coerceHoverinfo({hoverinfo:P},{_module:k._module},T)}return c.castOption(k,L,"hoverinfo",j)}}),ry=t(Ue=>{Ue.selectMode=function(ve){return ve==="lasso"||ve==="select"},Ue.drawMode=function(ve){return ve==="drawclosedpath"||ve==="drawopenpath"||ve==="drawline"||ve==="drawrect"||ve==="drawcircle"},Ue.openMode=function(ve){return ve==="drawline"||ve==="drawopenpath"},Ue.rectMode=function(ve){return ve==="select"||ve==="drawline"||ve==="drawrect"||ve==="drawcircle"},Ue.freeMode=function(ve){return ve==="lasso"||ve==="drawclosedpath"||ve==="drawopenpath"},Ue.selectingOrDrawing=function(ve){return Ue.freeMode(ve)||Ue.rectMode(ve)}}),my=t((Ue,ve)=>{ve.exports=function(v){var c=v._fullLayout;c._glcanvas&&c._glcanvas.size()&&c._glcanvas.each(function(h){h.regl&&h.regl.clear({color:!0,depth:!0})})}}),Ry=t((Ue,ve)=>{ve.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:["<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'>"," <title>plotly-logomark</title>"," <g id='symbol'>","  <rect fill='#000' x='0' y='0' width='132' height='132' rx='18' ry='18'/>","  <circle fill='#9EF' cx='102' cy='30' r='6'/>","  <circle fill='#BAC' cx='78' cy='30' r='6'/>","  <circle fill='#BAC' cx='78' cy='54' r='6'/>","  <circle fill='#D69' cx='54' cy='30' r='6'/>","  <circle fill='#F26' cx='30' cy='30' r='6'/>","  <circle fill='#F26' cx='30' cy='54' r='6'/>","  <path fill='#FFF' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/>","  <path fill='#FFF' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/>","  <path fill='#FFF' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/>","  <path fill='#FFF' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/>"," </g>","</svg>"].join("")}}}),gy=t((Ue,ve)=>{var v=32;ve.exports={CIRCLE_SIDES:v,i000:0,i090:v/4,i180:v/2,i270:v/4*3,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}}),Py=t((Ue,ve)=>{var v=Re().strTranslate;function c(x,w){switch(x.type){case"log":return x.p2d(w);case"date":return x.p2r(w,0,x.calendar);default:return x.p2r(w)}}function h(x,w){switch(x.type){case"log":return x.d2p(w);case"date":return x.r2p(w,0,x.calendar);default:return x.r2p(w)}}function _(x){var w=x._id.charAt(0)==="y"?1:0;return function(A){return c(x,A[w])}}function y(x){return v(x.xaxis._offset,x.yaxis._offset)}ve.exports={p2r:c,r2p:h,axValue:_,getTransform:y}}),Mv=t(Ue=>{var ve=g0(),v=gy(),c=v.CIRCLE_SIDES,h=v.SQRT2,_=Py(),y=_.p2r,x=_.r2p,w=[0,3,4,5,6,1,2],A=[0,3,4,1,2];Ue.writePaths=function(T){var L=T.length;if(!L)return"M0,0Z";for(var j="",P=0;P<L;P++)for(var N=T[P].length,O=0;O<N;O++){var B=T[P][O][0];if(B==="Z")j+="Z";else for(var S=T[P][O].length,D=0;D<S;D++){var z=D;B==="Q"||B==="S"?z=A[D]:B==="C"&&(z=w[D]),j+=T[P][O][z],D>0&&D<S-1&&(j+=",")}}return j},Ue.readPaths=function(T,L,j,P){var N=ve(T),O=[],B=-1,S=function(){B++,O[B]=[]},D,z=0,H=0,Y,ht,Se=function(){Y=z,ht=H};Se();for(var ie=0;ie<N.length;ie++){var X=[],ft,Le,nt,Ze,rt=N[ie][0],dt=rt;switch(rt){case"M":S(),z=+N[ie][1],H=+N[ie][2],X.push([dt,z,H]),Se();break;case"Q":case"S":ft=+N[ie][1],nt=+N[ie][2],z=+N[ie][3],H=+N[ie][4],X.push([dt,z,H,ft,nt]);break;case"C":ft=+N[ie][1],nt=+N[ie][2],Le=+N[ie][3],Ze=+N[ie][4],z=+N[ie][5],H=+N[ie][6],X.push([dt,z,H,ft,nt,Le,Ze]);break;case"T":case"L":z=+N[ie][1],H=+N[ie][2],X.push([dt,z,H]);break;case"H":dt="L",z=+N[ie][1],X.push([dt,z,H]);break;case"V":dt="L",H=+N[ie][1],X.push([dt,z,H]);break;case"A":dt="L";var pt=+N[ie][1],se=+N[ie][2];+N[ie][4]||(pt=-pt,se=-se);var gt=z-pt,xt=H;for(D=1;D<=c/2;D++){var Nt=2*Math.PI*D/c;X.push([dt,gt+pt*Math.cos(Nt),xt+se*Math.sin(Nt)])}break;case"Z":(z!==Y||H!==ht)&&(z=Y,H=ht,X.push([dt,z,H]));break}for(var Rt=(j||{}).domain,Pt=L._fullLayout._size,xn=j&&j.xsizemode==="pixel",oa=j&&j.ysizemode==="pixel",jo=P===!1,lt=0;lt<X.length;lt++){for(D=0;D+2<7;D+=2){var ut=X[lt][D+1],$=X[lt][D+2];ut===void 0||$===void 0||(z=ut,H=$,j&&(j.xaxis&&j.xaxis.p2r?(jo&&(ut-=j.xaxis._offset),xn?ut=x(j.xaxis,j.xanchor)+ut:ut=y(j.xaxis,ut)):(jo&&(ut-=Pt.l),Rt?ut=Rt.x[0]+ut/Pt.w:ut=ut/Pt.w),j.yaxis&&j.yaxis.p2r?(jo&&($-=j.yaxis._offset),oa?$=x(j.yaxis,j.yanchor)-$:$=y(j.yaxis,$)):(jo&&($-=Pt.t),Rt?$=Rt.y[1]-$/Pt.h:$=1-$/Pt.h)),X[lt][D+1]=ut,X[lt][D+2]=$)}O[B].push(X[lt].slice())}}return O};function d(T,L){return Math.abs(T-L)<=1e-6}function k(T,L){var j=L[1]-T[1],P=L[2]-T[2];return Math.sqrt(j*j+P*P)}Ue.pointsOnRectangle=function(T){var L=T.length;if(L!==5)return!1;for(var j=1;j<3;j++){var P=T[0][j]-T[1][j],N=T[3][j]-T[2][j];if(!d(P,N))return!1;var O=T[0][j]-T[3][j],B=T[1][j]-T[2][j];if(!d(O,B))return!1}return!d(T[0][1],T[1][1])&&!d(T[0][1],T[3][1])?!1:!!(k(T[0],T[1])*k(T[0],T[3]))},Ue.pointsOnEllipse=function(T){var L=T.length;if(L!==c+1)return!1;L=c;for(var j=0;j<L;j++){var P=(L*2-j)%L,N=(L/2+P)%L,O=(L/2+j)%L;if(!d(k(T[j],T[O]),k(T[P],T[N])))return!1}return!0},Ue.handleEllipse=function(T,L,j){if(!T)return[L,j];var P=Ue.ellipseOver({x0:L[0],y0:L[1],x1:j[0],y1:j[1]}),N=(P.x1+P.x0)/2,O=(P.y1+P.y0)/2,B=(P.x1-P.x0)/2,S=(P.y1-P.y0)/2;B||(B=S=S/h),S||(S=B=B/h);for(var D=[],z=0;z<c;z++){var H=z*2*Math.PI/c;D.push([N+B*Math.cos(H),O+S*Math.sin(H)])}return D},Ue.ellipseOver=function(T){var L=T.x0,j=T.y0,P=T.x1,N=T.y1,O=P-L,B=N-j;L-=O,j-=B;var S=(L+P)/2,D=(j+N)/2,z=h;return O*=z,B*=z,{x0:S-O,y0:D-B,x1:S+O,y1:D+B}},Ue.fixDatesForPaths=function(T,L,j){var P=L.type==="date",N=j.type==="date";if(!P&&!N)return T;for(var O=0;O<T.length;O++)for(var B=0;B<T[O].length;B++)for(var S=0;S+2<T[O][B].length;S+=2)P&&(T[O][B][S+1]=T[O][B][S+1].replace(" ","_")),N&&(T[O][B][S+2]=T[O][B][S+2].replace(" ","_"));return T}}),jv=t((Ue,ve)=>{var v=A1(),c=ry(),h=c.drawMode,_=c.openMode,y=gy(),x=y.i000,w=y.i090,A=y.i180,d=y.i270,k=y.cos45,T=y.sin45,L=Py(),j=L.p2r,P=L.r2p,N=L1(),O=N.clearOutline,B=Mv(),S=B.readPaths,D=B.writePaths,z=B.ellipseOver,H=B.fixDatesForPaths;function Y(Se,ie){if(Se.length){var X=Se[0][0];if(X){var ft=ie.gd,Le=ie.isActiveShape,nt=ie.dragmode,Ze=(ft.layout||{}).shapes||[];if(!h(nt)&&Le!==void 0){var rt=ft._fullLayout._activeShapeIndex;if(rt<Ze.length)switch(ft._fullLayout.shapes[rt].type){case"rect":nt="drawrect";break;case"circle":nt="drawcircle";break;case"line":nt="drawline";break;case"path":var dt=Ze[rt].path||"";dt[dt.length-1]==="Z"?nt="drawclosedpath":nt="drawopenpath";break}}var pt=ht(Se,ie,nt);O(ft);for(var se=ie.editHelpers,gt=(se||{}).modifyItem,xt=[],Nt=0;Nt<Ze.length;Nt++){var Rt=ft._fullLayout.shapes[Nt];if(xt[Nt]=Rt._input,Le!==void 0&&Nt===ft._fullLayout._activeShapeIndex){var Pt=pt;switch(Rt.type){case"line":case"rect":case"circle":var xn=v.getFromId(ft,Rt.xref);Rt.xref.charAt(0)==="x"&&xn.type.includes("category")?(gt("x0",Pt.x0-(Rt.x0shift||0)),gt("x1",Pt.x1-(Rt.x1shift||0))):(gt("x0",Pt.x0),gt("x1",Pt.x1));var oa=v.getFromId(ft,Rt.yref);Rt.yref.charAt(0)==="y"&&oa.type.includes("category")?(gt("y0",Pt.y0-(Rt.y0shift||0)),gt("y1",Pt.y1-(Rt.y1shift||0))):(gt("y0",Pt.y0),gt("y1",Pt.y1));break;case"path":gt("path",Pt.path);break}}}return Le===void 0?(xt.push(pt),xt):se?se.getUpdateObj():{}}}}function ht(Se,ie,X){var ft=Se[0][0],Le=ie.gd,nt=ft.getAttribute("d"),Ze=Le._fullLayout.newshape,rt=ie.plotinfo,dt=ie.isActiveShape,pt=rt.xaxis,se=rt.yaxis,gt=!!rt.domain||!rt.xaxis,xt=!!rt.domain||!rt.yaxis,Nt=_(X),Rt=S(nt,Le,rt,dt),Pt={editable:!0,visible:Ze.visible,name:Ze.name,showlegend:Ze.showlegend,legend:Ze.legend,legendwidth:Ze.legendwidth,legendgroup:Ze.legendgroup,legendgrouptitle:{text:Ze.legendgrouptitle.text,font:Ze.legendgrouptitle.font},legendrank:Ze.legendrank,label:Ze.label,xref:gt?"paper":pt._id,yref:xt?"paper":se._id,layer:Ze.layer,opacity:Ze.opacity,line:{color:Ze.line.color,width:Ze.line.width,dash:Ze.line.dash}};Nt||(Pt.fillcolor=Ze.fillcolor,Pt.fillrule=Ze.fillrule);var xn;if(Rt.length===1&&(xn=Rt[0]),xn&&xn.length===5&&X==="drawrect")Pt.type="rect",Pt.x0=xn[0][1],Pt.y0=xn[0][2],Pt.x1=xn[2][1],Pt.y1=xn[2][2];else if(xn&&X==="drawline")Pt.type="line",Pt.x0=xn[0][1],Pt.y0=xn[0][2],Pt.x1=xn[1][1],Pt.y1=xn[1][2];else if(xn&&X==="drawcircle"){Pt.type="circle";var oa=xn[x][1],jo=xn[w][1],lt=xn[A][1],ut=xn[d][1],$=xn[x][2],yt=xn[w][2],Lt=xn[A][2],ke=xn[d][2],G=rt.xaxis&&(rt.xaxis.type==="date"||rt.xaxis.type==="log"),ne=rt.yaxis&&(rt.yaxis.type==="date"||rt.yaxis.type==="log");G&&(oa=P(rt.xaxis,oa),jo=P(rt.xaxis,jo),lt=P(rt.xaxis,lt),ut=P(rt.xaxis,ut)),ne&&($=P(rt.yaxis,$),yt=P(rt.yaxis,yt),Lt=P(rt.yaxis,Lt),ke=P(rt.yaxis,ke));var et=(jo+ut)/2,ct=($+Lt)/2,kt=(ut-jo+lt-oa)/2,Gt=(ke-yt+Lt-$)/2,$t=z({x0:et,y0:ct,x1:et+kt*k,y1:ct+Gt*T});G&&($t.x0=j(rt.xaxis,$t.x0),$t.x1=j(rt.xaxis,$t.x1)),ne&&($t.y0=j(rt.yaxis,$t.y0),$t.y1=j(rt.yaxis,$t.y1)),Pt.x0=$t.x0,Pt.y0=$t.y0,Pt.x1=$t.x1,Pt.y1=$t.y1}else Pt.type="path",pt&&se&&H(Rt,pt,se),Pt.path=D(Rt),xn=null;return Pt}ve.exports={newShapes:Y,createShapeObj:ht}}),Xv=t((Ue,ve)=>{var v=ry(),c=v.selectMode,h=L1(),_=h.clearOutline,y=Mv(),x=y.readPaths,w=y.writePaths,A=y.fixDatesForPaths;ve.exports=function(d,k){if(d.length){var T=d[0][0];if(T){var L=T.getAttribute("d"),j=k.gd,P=j._fullLayout.newselection,N=k.plotinfo,O=N.xaxis,B=N.yaxis,S=k.isActiveSelection,D=k.dragmode,z=(j.layout||{}).selections||[];if(!c(D)&&S!==void 0){var H=j._fullLayout._activeSelectionIndex;if(H<z.length)switch(j._fullLayout.selections[H].type){case"rect":D="select";break;case"path":D="lasso";break}}var Y=x(L,j,N,S),ht={xref:O._id,yref:B._id,opacity:P.opacity,line:{color:P.line.color,width:P.line.width,dash:P.line.dash}},Se;Y.length===1&&(Se=Y[0]),Se&&Se.length===5&&D==="select"?(ht.type="rect",ht.x0=Se[0][1],ht.y0=Se[0][2],ht.x1=Se[2][1],ht.y1=Se[2][2]):(ht.type="path",O&&B&&A(Y,O,B),ht.path=w(Y),Se=null),_(j);for(var ie=k.editHelpers,X=(ie||{}).modifyItem,ft=[],Le=0;Le<z.length;Le++){var nt=j._fullLayout.selections[Le];if(!nt){ft[Le]=nt;continue}if(ft[Le]=nt._input,S!==void 0&&Le===j._fullLayout._activeSelectionIndex){var Ze=ht;switch(nt.type){case"rect":X("x0",Ze.x0),X("x1",Ze.x1),X("y0",Ze.y0),X("y1",Ze.y1);break;case"path":X("path",Ze.path);break}}}return S===void 0?(ft.push(ht),ft):ie?ie.getUpdateObj():{}}}}}),Jv=t((Ue,ve)=>{ve.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}}),we=t(Ue=>{var ve=Jv(),v=Re(),c=km();Ue.rangeToShapePosition=function(y){return y.type==="log"?y.r2d:function(x){return x}},Ue.shapePositionToRange=function(y){return y.type==="log"?y.d2r:function(x){return x}},Ue.decodeDate=function(y){return function(x){return x.replace&&(x=x.replace("_"," ")),y(x)}},Ue.encodeDate=function(y){return function(x){return y(x).replace(" ","_")}},Ue.extractPathCoords=function(y,x,w){var A=[],d=y.match(ve.segmentRE);return d.forEach(function(k){var T=x[k.charAt(0)].drawn;if(T!==void 0){var L=k.substr(1).match(ve.paramRE);if(!(!L||L.length<T)){var j=L[T],P=w?j:v.cleanNumber(j);A.push(P)}}}),A},Ue.getDataToPixel=function(y,x,w,A,d){var k=y._fullLayout._size,T;if(x)if(d==="domain")T=function(j){return x._length*(A?1-j:j)+x._offset};else{var L=Ue.shapePositionToRange(x);T=function(j){var P=_(x,w);return x._offset+x.r2p(L(j,!0))+P},x.type==="date"&&(T=Ue.decodeDate(T))}else A?T=function(j){return k.t+k.h*(1-j)}:T=function(j){return k.l+k.w*j};return T},Ue.getPixelToData=function(y,x,w,A){var d=y._fullLayout._size,k;if(x)if(A==="domain")k=function(L){var j=(L-x._offset)/x._length;return w?1-j:j};else{var T=Ue.rangeToShapePosition(x);k=function(L){return T(x.p2r(L-x._offset))}}else w?k=function(L){return 1-(L-d.t)/d.h}:k=function(L){return(L-d.l)/d.w};return k},Ue.roundPositionForSharpStrokeRendering=function(y,x){var w=Math.round(x%2)===1,A=Math.round(y);return w?A+.5:A},Ue.makeShapesOptionsAndPlotinfo=function(y,x){var w=y._fullLayout.shapes[x]||{},A=y._fullLayout._plots[w.xref+w.yref],d=!!A;return d?A._hadPlotinfo=!0:(A={},w.xref&&w.xref!=="paper"&&(A.xaxis=y._fullLayout[w.xref+"axis"]),w.yref&&w.yref!=="paper"&&(A.yaxis=y._fullLayout[w.yref+"axis"])),A.xsizemode=w.xsizemode,A.ysizemode=w.ysizemode,A.xanchor=w.xanchor,A.yanchor=w.yanchor,{options:w,plotinfo:A}},Ue.makeSelectionsOptionsAndPlotinfo=function(y,x){var w=y._fullLayout.selections[x]||{},A=y._fullLayout._plots[w.xref+w.yref],d=!!A;return d?A._hadPlotinfo=!0:(A={},w.xref&&(A.xaxis=y._fullLayout[w.xref+"axis"]),w.yref&&(A.yaxis=y._fullLayout[w.yref+"axis"])),{options:w,plotinfo:A}},Ue.getPathString=function(y,x){var w=x.type,A=c.getRefType(x.xref),d=c.getRefType(x.yref),k=c.getFromId(y,x.xref),T=c.getFromId(y,x.yref),L=y._fullLayout._size,j,P,N,O,B=_(k,x.x0shift),S=_(k,x.x1shift),D=_(T,x.y0shift),z=_(T,x.y1shift),H,Y,ht,Se;if(k?A==="domain"?P=function(se){return k._offset+k._length*se}:(j=Ue.shapePositionToRange(k),P=function(se){return k._offset+k.r2p(j(se,!0))}):P=function(se){return L.l+L.w*se},T?d==="domain"?O=function(se){return T._offset+T._length*(1-se)}:(N=Ue.shapePositionToRange(T),O=function(se){return T._offset+T.r2p(N(se,!0))}):O=function(se){return L.t+L.h*(1-se)},w==="path")return k&&k.type==="date"&&(P=Ue.decodeDate(P)),T&&T.type==="date"&&(O=Ue.decodeDate(O)),h(x,P,O);if(x.xsizemode==="pixel"){var ie=P(x.xanchor);H=ie+x.x0+B,Y=ie+x.x1+S}else H=P(x.x0)+B,Y=P(x.x1)+S;if(x.ysizemode==="pixel"){var X=O(x.yanchor);ht=X-x.y0+D,Se=X-x.y1+z}else ht=O(x.y0)+D,Se=O(x.y1)+z;if(w==="line")return"M"+H+","+ht+"L"+Y+","+Se;if(w==="rect")return"M"+H+","+ht+"H"+Y+"V"+Se+"H"+H+"Z";var ft=(H+Y)/2,Le=(ht+Se)/2,nt=Math.abs(ft-H),Ze=Math.abs(Le-ht),rt="A"+nt+","+Ze,dt=ft+nt+","+Le,pt=ft+","+(Le-Ze);return"M"+dt+rt+" 0 1,1 "+pt+rt+" 0 0,1 "+dt+"Z"};function h(y,x,w){var A=y.path,d=y.xsizemode,k=y.ysizemode,T=y.xanchor,L=y.yanchor;return A.replace(ve.segmentRE,function(j){var P=0,N=j.charAt(0),O=ve.paramIsX[N],B=ve.paramIsY[N],S=ve.numParams[N],D=j.substr(1).replace(ve.paramRE,function(z){return O[P]?d==="pixel"?z=x(T)+Number(z):z=x(z):B[P]&&(k==="pixel"?z=w(L)-Number(z):z=w(z)),P++,P>S&&(z="X"),z});return P>S&&(D=D.replace(/[\s,]*X.*/,""),v.log("Ignoring extra params in segment "+j)),N+D})}function _(y,x){x=x||0;var w=0;return x&&y&&(y.type==="category"||y.type==="multicategory")&&(w=(y.r2p(1)-y.r2p(0))*x),w}}),Op=t((Ue,ve)=>{var v=Re(),c=km(),h=j1(),_=Y0(),y=Mv().readPaths,x=we(),w=x.getPathString,A=M1(),d=$1().FROM_TL;ve.exports=function(L,j,P,N){if(N.selectAll(".shape-label").remove(),!!(P.label.text||P.label.texttemplate)){var O;if(P.label.texttemplate){var B={};if(P.type!=="path"){var S=c.getFromId(L,P.xref),D=c.getFromId(L,P.yref);for(var z in A){var H=A[z](P,S,D);H!==void 0&&(B[z]=H)}}O=v.texttemplateStringForShapes(P.label.texttemplate,{},L._fullLayout._d3locale,B)}else O=P.label.text;var Y={"data-index":j},ht=P.label.font,Se={"data-notex":1},ie=N.append("g").attr(Y).classed("shape-label",!0),X=ie.append("text").attr(Se).classed("shape-label-text",!0).text(O),ft,Le,nt,Ze;if(P.path){var rt=w(L,P),dt=y(rt,L);ft=1/0,nt=1/0,Le=-1/0,Ze=-1/0;for(var pt=0;pt<dt.length;pt++)for(var se=0;se<dt[pt].length;se++)for(var gt=dt[pt][se],xt=1;xt<gt.length;xt+=2){var Nt=gt[xt],Rt=gt[xt+1];ft=Math.min(ft,Nt),Le=Math.max(Le,Nt),nt=Math.min(nt,Rt),Ze=Math.max(Ze,Rt)}}else{var Pt=c.getFromId(L,P.xref),xn=P.x0shift,oa=P.x1shift,jo=c.getRefType(P.xref),lt=c.getFromId(L,P.yref),ut=P.y0shift,$=P.y1shift,yt=c.getRefType(P.yref),Lt=function($t,Ko){var Up=x.getDataToPixel(L,Pt,Ko,!1,jo);return Up($t)},ke=function($t,Ko){var Up=x.getDataToPixel(L,lt,Ko,!0,yt);return Up($t)};ft=Lt(P.x0,xn),Le=Lt(P.x1,oa),nt=ke(P.y0,ut),Ze=ke(P.y1,$)}var G=P.label.textangle;G==="auto"&&(P.type==="line"?G=k(ft,nt,Le,Ze):G=0),X.call(function($t){return $t.call(_.font,ht).attr({}),h.convertToTspans($t,L),$t});var ne=_.bBox(X.node()),et=T(ft,nt,Le,Ze,P,G,ne),ct=et.textx,kt=et.texty,Gt=et.xanchor;X.attr({"text-anchor":{left:"start",center:"middle",right:"end"}[Gt],y:kt,x:ct,transform:"rotate("+G+","+ct+","+kt+")"}).call(h.positionText,ct,kt)}};function k(L,j,P,N){var O,B;return B=Math.abs(P-L),P>=L?O=j-N:O=N-j,-180/Math.PI*Math.atan2(O,B)}function T(L,j,P,N,O,B,S){var D=O.label.textposition,z=O.label.textangle,H=O.label.padding,Y=O.type,ht=Math.PI/180*B,Se=Math.sin(ht),ie=Math.cos(ht),X=O.label.xanchor,ft=O.label.yanchor,Le,nt,Ze,rt;if(Y==="line"){D==="start"?(Le=L,nt=j):D==="end"?(Le=P,nt=N):(Le=(L+P)/2,nt=(j+N)/2),X==="auto"&&(D==="start"?z==="auto"?P>L?X="left":P<L?X="right":X="center":P>L?X="right":P<L?X="left":X="center":D==="end"?z==="auto"?P>L?X="right":P<L?X="left":X="center":P>L?X="left":P<L?X="right":X="center":X="center");var dt={left:1,center:0,right:-1},pt={bottom:-1,middle:0,top:1};if(z==="auto"){var se=pt[ft];Ze=-H*Se*se,rt=H*ie*se}else{var gt=dt[X],xt=pt[ft];Ze=H*gt,rt=H*xt}Le=Le+Ze,nt=nt+rt}else Ze=H+3,D.indexOf("right")!==-1?(Le=Math.max(L,P)-Ze,X==="auto"&&(X="right")):D.indexOf("left")!==-1?(Le=Math.min(L,P)+Ze,X==="auto"&&(X="left")):(Le=(L+P)/2,X==="auto"&&(X="center")),D.indexOf("top")!==-1?nt=Math.min(j,N):D.indexOf("bottom")!==-1?nt=Math.max(j,N):nt=(j+N)/2,rt=H,ft==="bottom"?nt=nt-rt:ft==="top"&&(nt=nt+rt);var Nt=d[ft],Rt=O.label.font.size,Pt=S.height,xn=(Pt*Nt-Rt)*Se,oa=-(Pt*Nt-Rt)*ie;return{textx:Le+xn,texty:nt+oa,xanchor:X}}}),mt=t((Ue,ve)=>{var v=Re(),c=v.strTranslate,h=Km(),_=ry(),y=_.drawMode,x=_.selectMode,w=p1(),A=sa(),d=gy(),k=d.i000,T=d.i090,L=d.i180,j=d.i270,P=L1(),N=P.clearOutlineControllers,O=Mv(),B=O.pointsOnRectangle,S=O.pointsOnEllipse,D=O.writePaths,z=jv().newShapes,H=jv().createShapeObj,Y=Xv(),ht=Op();ve.exports=function ft(Le,nt,Ze,rt){rt||(rt=0);var dt=Ze.gd;function pt(){ft(Le,nt,Ze,rt++),(S(Le[0])||Ze.hasText)&&se({redrawing:!0})}function se(m0){var f0={};Ze.isActiveShape!==void 0&&(Ze.isActiveShape=!1,f0=z(nt,Ze)),Ze.isActiveSelection!==void 0&&(Ze.isActiveSelection=!1,f0=Y(nt,Ze),dt._fullLayout._reselect=!0),Object.keys(f0).length&&w.call((m0||{}).redrawing?"relayout":"_guiRelayout",dt,f0)}var gt=dt._fullLayout,xt=gt._zoomlayer,Nt=Ze.dragmode,Rt=y(Nt),Pt=x(Nt);(Rt||Pt)&&(dt._fullLayout._outlining=!0),N(dt),nt.attr("d",D(Le));var xn,oa,jo,lt,ut;if(!rt&&(Ze.isActiveShape||Ze.isActiveSelection)){ut=Se([],Le);var $=xt.append("g").attr("class","outline-controllers");kt($),E0()}if(Rt&&Ze.hasText){var yt=xt.select(".label-temp"),Lt=H(nt,Ze,Ze.dragmode);ht(dt,"label-temp",Lt,yt)}function ke(m0){jo=+m0.srcElement.getAttribute("data-i"),lt=+m0.srcElement.getAttribute("data-j"),xn[jo][lt].moveFn=G}function G(m0,f0){if(Le.length){var la=ut[jo][lt][1],$o=ut[jo][lt][2],jt=Le[jo],Fp=jt.length;if(B(jt)){var i0=m0,b0=f0;if(Ze.isActiveSelection){var O0=ie(jt,lt);O0[1]===jt[lt][1]?b0=0:i0=0}for(var C0=0;C0<Fp;C0++)if(C0!==lt){var I0=jt[C0];I0[1]===jt[lt][1]&&(I0[1]=la+i0),I0[2]===jt[lt][2]&&(I0[2]=$o+b0)}if(jt[lt][1]=la+i0,jt[lt][2]=$o+b0,!B(jt))for(var V0=0;V0<Fp;V0++)for(var H0=0;H0<jt[V0].length;H0++)jt[V0][H0]=ut[jo][V0][H0]}else jt[lt][1]=la+m0,jt[lt][2]=$o+f0;pt()}}function ne(){se()}function et(){if(Le.length&&Le[jo]&&Le[jo].length){for(var m0=[],f0=0;f0<Le[jo].length;f0++)f0!==lt&&m0.push(Le[jo][f0]);m0.length>1&&!(m0.length===2&&m0[1][0]==="Z")&&(lt===0&&(m0[0][0]="M"),Le[jo]=m0,pt(),se())}}function ct(m0,f0){if(m0===2){jo=+f0.srcElement.getAttribute("data-i"),lt=+f0.srcElement.getAttribute("data-j");var la=Le[jo];!B(la)&&!S(la)&&et()}}function kt(m0){xn=[];for(var f0=0;f0<Le.length;f0++){var la=Le[f0],$o=B(la),jt=!$o&&S(la);xn[f0]=[];for(var Fp=la.length,i0=0;i0<Fp;i0++)if(la[i0][0]!=="Z"&&!(jt&&i0!==k&&i0!==T&&i0!==L&&i0!==j)){var b0=$o&&Ze.isActiveSelection,O0;b0&&(O0=ie(la,i0));var C0=la[i0][1],I0=la[i0][2],V0=m0.append(b0?"rect":"circle").attr("data-i",f0).attr("data-j",i0).style({fill:A.background,stroke:A.defaultLine,"stroke-width":1,"shape-rendering":"crispEdges"});if(b0){var H0=O0[1]-C0,im=O0[2]-I0,k0=im?5:Math.max(Math.min(25,Math.abs(H0)-5),5),fm=H0?5:Math.max(Math.min(25,Math.abs(im)-5),5);V0.classed(im?"cursor-ew-resize":"cursor-ns-resize",!0).attr("width",k0).attr("height",fm).attr("x",C0-k0/2).attr("y",I0-fm/2).attr("transform",c(H0/2,im/2))}else V0.classed("cursor-grab",!0).attr("r",5).attr("cx",C0).attr("cy",I0);xn[f0][i0]={element:V0.node(),gd:dt,prepFn:ke,doneFn:ne,clickFn:ct},h.init(xn[f0][i0])}}}function Gt(m0,f0){if(Le.length)for(var la=0;la<Le.length;la++)for(var $o=0;$o<Le[la].length;$o++)for(var jt=0;jt+2<Le[la][$o].length;jt+=2)Le[la][$o][jt+1]=ut[la][$o][jt+1]+m0,Le[la][$o][jt+2]=ut[la][$o][jt+2]+f0}function $t(m0,f0){Gt(m0,f0),pt()}function Ko(m0){jo=+m0.srcElement.getAttribute("data-i"),jo||(jo=0),oa[jo].moveFn=$t}function Up(){se()}function e0(m0){m0===2&&X(dt)}function E0(){if(oa=[],!!Le.length){var m0=0;oa[m0]={element:nt[0][0],gd:dt,prepFn:Ko,doneFn:Up,clickFn:e0},h.init(oa[m0])}}};function Se(ft,Le){for(var nt=0;nt<Le.length;nt++){var Ze=Le[nt];ft[nt]=[];for(var rt=0;rt<Ze.length;rt++){ft[nt][rt]=[];for(var dt=0;dt<Ze[rt].length;dt++)ft[nt][rt][dt]=Ze[rt][dt]}}return ft}function ie(ft,Le){var nt=ft[Le][1],Ze=ft[Le][2],rt=ft.length,dt,pt,se;return dt=(Le+1)%rt,pt=ft[dt][1],se=ft[dt][2],pt===nt&&se===Ze&&(dt=(Le+2)%rt,pt=ft[dt][1],se=ft[dt][2]),[dt,pt,se]}function X(ft){if(x(ft._fullLayout.dragmode)){N(ft);var Le=ft._fullLayout._activeSelectionIndex,nt=(ft.layout||{}).selections||[];if(Le<nt.length){for(var Ze=[],rt=0;rt<nt.length;rt++)rt!==Le&&Ze.push(nt[rt]);delete ft._fullLayout._activeSelectionIndex;var dt=ft._fullLayout.selections[Le];ft._fullLayout._deselect={xref:dt.xref,yref:dt.yref},w.call("_guiRelayout",ft,{selections:Ze})}}}}),W0=t((Ue,ve)=>{var v=l(),c=p1(),h=Re(),_=km(),y=Mv().readPaths,x=mt(),w=Op(),A=L1().clearOutlineControllers,d=sa(),k=Y0(),T=Nm().arrayEditor,L=Km(),j=W1(),P=Jv(),N=we(),O=N.getPathString;ve.exports={draw:B,drawOne:z,eraseActiveShape:X,drawLabel:w};function B(ft){var Le=ft._fullLayout;Le._shapeUpperLayer.selectAll("path").remove(),Le._shapeLowerLayer.selectAll("path").remove(),Le._shapeUpperLayer.selectAll("text").remove(),Le._shapeLowerLayer.selectAll("text").remove();for(var nt in Le._plots){var Ze=Le._plots[nt].shapelayer;Ze&&(Ze.selectAll("path").remove(),Ze.selectAll("text").remove())}for(var rt=0;rt<Le.shapes.length;rt++)Le.shapes[rt].visible===!0&&z(ft,rt)}function S(ft){return!!ft._fullLayout._outlining}function D(ft){return!ft._context.edits.shapePosition}function z(ft,Le){ft._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+Le+'"]').remove();var nt=N.makeShapesOptionsAndPlotinfo(ft,Le),Ze=nt.options,rt=nt.plotinfo;if(!Ze._input||Ze.visible!==!0)return;if(Ze.layer==="above")pt(ft._fullLayout._shapeUpperLayer);else if(Ze.xref==="paper"||Ze.yref==="paper")pt(ft._fullLayout._shapeLowerLayer);else if(Ze.layer==="between")pt(rt.shapelayerBetween);else if(rt._hadPlotinfo){var dt=rt.mainplotinfo||rt;pt(dt.shapelayer)}else pt(ft._fullLayout._shapeLowerLayer);function pt(se){var gt=O(ft,Ze),xt={"data-index":Le,"fill-rule":Ze.fillrule,d:gt},Nt=Ze.opacity,Rt=Ze.fillcolor,Pt=Ze.line.width?Ze.line.color:"rgba(0,0,0,0)",xn=Ze.line.width,oa=Ze.line.dash;!xn&&Ze.editable===!0&&(xn=5,oa="solid");var jo=gt[gt.length-1]!=="Z",lt=D(ft)&&Ze.editable&&ft._fullLayout._activeShapeIndex===Le;lt&&(Rt=jo?"rgba(0,0,0,0)":ft._fullLayout.activeshape.fillcolor,Nt=ft._fullLayout.activeshape.opacity);var ut=se.append("g").classed("shape-group",!0).attr({"data-index":Le}),$=ut.append("path").attr(xt).style("opacity",Nt).call(d.stroke,Pt).call(d.fill,Rt).call(k.dashLine,oa,xn);H(ut,ft,Ze),w(ft,Le,Ze,ut);var yt;if((lt||ft._context.edits.shapePosition)&&(yt=T(ft.layout,"shapes",Ze)),lt){$.style({cursor:"move"});var Lt={element:$.node(),plotinfo:rt,gd:ft,editHelpers:yt,hasText:Ze.label.text||Ze.label.texttemplate,isActiveShape:!0},ke=y(gt,ft);x(ke,$,Lt)}else ft._context.edits.shapePosition?Y(ft,$,Ze,Le,se,yt):Ze.editable===!0&&$.style("pointer-events",jo||d.opacity(Rt)*Nt<=.5?"stroke":"all");$.node().addEventListener("click",function(){return Se(ft,$)})}}function H(ft,Le,nt){var Ze=(nt.xref+nt.yref).replace(/paper/g,"").replace(/[xyz][0-9]* *domain/g,"");k.setClipUrl(ft,Ze?"clip"+Le._fullLayout._uid+Ze:null,Le)}function Y(ft,Le,nt,Ze,rt,dt){var pt=10,se=10,gt=nt.xsizemode==="pixel",xt=nt.ysizemode==="pixel",Nt=nt.type==="line",Rt=nt.type==="path",Pt=dt.modifyItem,xn,oa,jo,lt,ut,$,yt,Lt,ke,G,ne,et,ct,kt,Gt,$t=v.select(Le.node().parentNode),Ko=_.getFromId(ft,nt.xref),Up=_.getRefType(nt.xref),e0=_.getFromId(ft,nt.yref),E0=_.getRefType(nt.yref),m0=nt.x0shift,f0=nt.x1shift,la=nt.y0shift,$o=nt.y1shift,jt=function(Ht,Sr){var Rp=N.getDataToPixel(ft,Ko,Sr,!1,Up);return Rp(Ht)},Fp=function(Ht,Sr){var Rp=N.getDataToPixel(ft,e0,Sr,!0,E0);return Rp(Ht)},i0=N.getPixelToData(ft,Ko,!1,Up),b0=N.getPixelToData(ft,e0,!0,E0),O0=V0(),C0={element:O0.node(),gd:ft,prepFn:k0,doneFn:fm,clickFn:Tm},I0;L.init(C0),O0.node().onmousemove=im;function V0(){return Nt?H0():Le}function H0(){var Ht=10,Sr=Math.max(nt.line.width,Ht),Rp=rt.append("g").attr("data-index",Ze).attr("drag-helper",!0);Rp.append("path").attr("d",Le.attr("d")).style({cursor:"move","stroke-width":Sr,"stroke-opacity":"0"});var Np={"fill-opacity":"0"},Jp=Math.max(Sr/2,Ht);return Rp.append("circle").attr({"data-line-point":"start-point",cx:gt?jt(nt.xanchor)+nt.x0:jt(nt.x0,m0),cy:xt?Fp(nt.yanchor)-nt.y0:Fp(nt.y0,la),r:Jp}).style(Np).classed("cursor-grab",!0),Rp.append("circle").attr({"data-line-point":"end-point",cx:gt?jt(nt.xanchor)+nt.x1:jt(nt.x1,f0),cy:xt?Fp(nt.yanchor)-nt.y1:Fp(nt.y1,$o),r:Jp}).style(Np).classed("cursor-grab",!0),Rp}function im(Ht){if(S(ft)){I0=null;return}if(Nt)Ht.target.tagName==="path"?I0="move":I0=Ht.target.attributes["data-line-point"].value==="start-point"?"resize-over-start-point":"resize-over-end-point";else{var Sr=C0.element.getBoundingClientRect(),Rp=Sr.right-Sr.left,Np=Sr.bottom-Sr.top,Jp=Ht.clientX-Sr.left,n0=Ht.clientY-Sr.top,S0=!Rt&&Rp>pt&&Np>se&&!Ht.shiftKey?L.getCursor(Jp/Rp,1-n0/Np):"move";j(Le,S0),I0=S0.split("-")[0]}}function k0(Ht){S(ft)||(gt&&(ut=jt(nt.xanchor)),xt&&($=Fp(nt.yanchor)),nt.type==="path"?Gt=nt.path:(xn=gt?nt.x0:jt(nt.x0),oa=xt?nt.y0:Fp(nt.y0),jo=gt?nt.x1:jt(nt.x1),lt=xt?nt.y1:Fp(nt.y1)),xn<jo?(ke=xn,ct="x0",G=jo,kt="x1"):(ke=jo,ct="x1",G=xn,kt="x0"),!xt&&oa<lt||xt&&oa>lt?(yt=oa,ne="y0",Lt=lt,et="y1"):(yt=lt,ne="y1",Lt=oa,et="y0"),im(Ht),ci(rt,nt),St(Le,nt,ft),C0.moveFn=I0==="move"?om:Rm,C0.altKey=Ht.altKey)}function fm(){S(ft)||(j(Le),Hp(rt),H(Le,ft,nt),c.call("_guiRelayout",ft,dt.getUpdateObj()))}function Tm(){S(ft)||Hp(rt)}function om(Ht,Sr){if(nt.type==="path"){var Rp=function(n0){return n0},Np=Rp,Jp=Rp;gt?Pt("xanchor",nt.xanchor=i0(ut+Ht)):(Np=function(n0){return i0(jt(n0)+Ht)},Ko&&Ko.type==="date"&&(Np=N.encodeDate(Np))),xt?Pt("yanchor",nt.yanchor=b0($+Sr)):(Jp=function(n0){return b0(Fp(n0)+Sr)},e0&&e0.type==="date"&&(Jp=N.encodeDate(Jp))),Pt("path",nt.path=ht(Gt,Np,Jp))}else gt?Pt("xanchor",nt.xanchor=i0(ut+Ht)):(Pt("x0",nt.x0=i0(xn+Ht)),Pt("x1",nt.x1=i0(jo+Ht))),xt?Pt("yanchor",nt.yanchor=b0($+Sr)):(Pt("y0",nt.y0=b0(oa+Sr)),Pt("y1",nt.y1=b0(lt+Sr)));Le.attr("d",O(ft,nt)),ci(rt,nt),w(ft,Ze,nt,$t)}function Rm(Ht,Sr){if(Rt){var Rp=function(Lm){return Lm},Np=Rp,Jp=Rp;gt?Pt("xanchor",nt.xanchor=i0(ut+Ht)):(Np=function(Lm){return i0(jt(Lm)+Ht)},Ko&&Ko.type==="date"&&(Np=N.encodeDate(Np))),xt?Pt("yanchor",nt.yanchor=b0($+Sr)):(Jp=function(Lm){return b0(Fp(Lm)+Sr)},e0&&e0.type==="date"&&(Jp=N.encodeDate(Jp))),Pt("path",nt.path=ht(Gt,Np,Jp))}else if(Nt){if(I0==="resize-over-start-point"){var n0=xn+Ht,S0=xt?oa-Sr:oa+Sr;Pt("x0",nt.x0=gt?n0:i0(n0)),Pt("y0",nt.y0=xt?S0:b0(S0))}else if(I0==="resize-over-end-point"){var _0=jo+Ht,w0=xt?lt-Sr:lt+Sr;Pt("x1",nt.x1=gt?_0:i0(_0)),Pt("y1",nt.y1=xt?w0:b0(w0))}}else{var X0=function(Lm){return I0.indexOf(Lm)!==-1},$0=X0("n"),Z0=X0("s"),Am=X0("w"),e1=X0("e"),E1=$0?yt+Sr:yt,N1=Z0?Lt+Sr:Lt,z1=Am?ke+Ht:ke,r1=e1?G+Ht:G;xt&&($0&&(E1=yt-Sr),Z0&&(N1=Lt-Sr)),(!xt&&N1-E1>se||xt&&E1-N1>se)&&(Pt(ne,nt[ne]=xt?E1:b0(E1)),Pt(et,nt[et]=xt?N1:b0(N1))),r1-z1>pt&&(Pt(ct,nt[ct]=gt?z1:i0(z1)),Pt(kt,nt[kt]=gt?r1:i0(r1)))}Le.attr("d",O(ft,nt)),ci(rt,nt),w(ft,Ze,nt,$t)}function ci(Ht,Sr){(gt||xt)&&Rp();function Rp(){var Np=Sr.type!=="path",Jp=Ht.selectAll(".visual-cue").data([0]),n0=1;Jp.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":n0}).classed("visual-cue",!0);var S0=jt(gt?Sr.xanchor:h.midRange(Np?[Sr.x0,Sr.x1]:N.extractPathCoords(Sr.path,P.paramIsX))),_0=Fp(xt?Sr.yanchor:h.midRange(Np?[Sr.y0,Sr.y1]:N.extractPathCoords(Sr.path,P.paramIsY)));if(S0=N.roundPositionForSharpStrokeRendering(S0,n0),_0=N.roundPositionForSharpStrokeRendering(_0,n0),gt&&xt){var w0="M"+(S0-1-n0)+","+(_0-1-n0)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z";Jp.attr("d",w0)}else if(gt){var X0="M"+(S0-1-n0)+","+(_0-9-n0)+"v18 h2 v-18 Z";Jp.attr("d",X0)}else{var $0="M"+(S0-9-n0)+","+(_0-1-n0)+"h18 v2 h-18 Z";Jp.attr("d",$0)}}}function Hp(Ht){Ht.selectAll(".visual-cue").remove()}function St(Ht,Sr,Rp){var Np=Sr.xref,Jp=Sr.yref,n0=_.getFromId(Rp,Np),S0=_.getFromId(Rp,Jp),_0="";Np!=="paper"&&!n0.autorange&&(_0+=Np),Jp!=="paper"&&!S0.autorange&&(_0+=Jp),k.setClipUrl(Ht,_0?"clip"+Rp._fullLayout._uid+_0:null,Rp)}}function ht(ft,Le,nt){return ft.replace(P.segmentRE,function(Ze){var rt=0,dt=Ze.charAt(0),pt=P.paramIsX[dt],se=P.paramIsY[dt],gt=P.numParams[dt],xt=Ze.substr(1).replace(P.paramRE,function(Nt){return rt>=gt||(pt[rt]?Nt=Le(Nt):se[rt]&&(Nt=nt(Nt)),rt++),Nt});return dt+xt})}function Se(ft,Le){if(D(ft)){var nt=Le.node(),Ze=+nt.getAttribute("data-index");if(Ze>=0){if(Ze===ft._fullLayout._activeShapeIndex){ie(ft);return}ft._fullLayout._activeShapeIndex=Ze,ft._fullLayout._deactivateShape=ie,B(ft)}}}function ie(ft){if(D(ft)){var Le=ft._fullLayout._activeShapeIndex;Le>=0&&(A(ft),delete ft._fullLayout._activeShapeIndex,B(ft))}}function X(ft){if(D(ft)){A(ft);var Le=ft._fullLayout._activeShapeIndex,nt=(ft.layout||{}).shapes||[];if(Le<nt.length){for(var Ze=[],rt=0;rt<nt.length;rt++)rt!==Le&&Ze.push(nt[rt]);return delete ft._fullLayout._activeShapeIndex,c.call("_guiRelayout",ft,{shapes:Ze})}}}}),j0=t((Ue,ve)=>{var v=p1(),c=lg(),h=A1(),_=Ry(),y=W0().eraseActiveShape,x=Re(),w=x._,A=ve.exports={};A.toImage={name:"toImage",title:function(Y){var ht=Y._context.toImageButtonOptions||{},Se=ht.format||"png";return Se==="png"?w(Y,"Download plot as a PNG"):w(Y,"Download plot")},icon:_.camera,click:function(Y){var ht=Y._context.toImageButtonOptions,Se={format:ht.format||"png"};x.notifier(w(Y,"Taking snapshot - this may take a few seconds"),"long"),["filename","width","height","scale"].forEach(function(ie){ie in ht&&(Se[ie]=ht[ie])}),v.call("downloadImage",Y,Se).then(function(ie){x.notifier(w(Y,"Snapshot succeeded")+" - "+ie,"long")}).catch(function(){x.notifier(w(Y,"Sorry, there was a problem downloading your snapshot!"),"long")})}},A.sendDataToCloud={name:"sendDataToCloud",title:function(Y){return w(Y,"Edit in Chart Studio")},icon:_.disk,click:function(Y){c.sendDataToCloud(Y)}},A.editInChartStudio={name:"editInChartStudio",title:function(Y){return w(Y,"Edit in Chart Studio")},icon:_.pencil,click:function(Y){c.sendDataToCloud(Y)}},A.zoom2d={name:"zoom2d",_cat:"zoom",title:function(Y){return w(Y,"Zoom")},attr:"dragmode",val:"zoom",icon:_.zoombox,click:d},A.pan2d={name:"pan2d",_cat:"pan",title:function(Y){return w(Y,"Pan")},attr:"dragmode",val:"pan",icon:_.pan,click:d},A.select2d={name:"select2d",_cat:"select",title:function(Y){return w(Y,"Box Select")},attr:"dragmode",val:"select",icon:_.selectbox,click:d},A.lasso2d={name:"lasso2d",_cat:"lasso",title:function(Y){return w(Y,"Lasso Select")},attr:"dragmode",val:"lasso",icon:_.lasso,click:d},A.drawclosedpath={name:"drawclosedpath",title:function(Y){return w(Y,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:_.drawclosedpath,click:d},A.drawopenpath={name:"drawopenpath",title:function(Y){return w(Y,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:_.drawopenpath,click:d},A.drawline={name:"drawline",title:function(Y){return w(Y,"Draw line")},attr:"dragmode",val:"drawline",icon:_.drawline,click:d},A.drawrect={name:"drawrect",title:function(Y){return w(Y,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:_.drawrect,click:d},A.drawcircle={name:"drawcircle",title:function(Y){return w(Y,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:_.drawcircle,click:d},A.eraseshape={name:"eraseshape",title:function(Y){return w(Y,"Erase active shape")},icon:_.eraseshape,click:y},A.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(Y){return w(Y,"Zoom in")},attr:"zoom",val:"in",icon:_.zoom_plus,click:d},A.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(Y){return w(Y,"Zoom out")},attr:"zoom",val:"out",icon:_.zoom_minus,click:d},A.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(Y){return w(Y,"Autoscale")},attr:"zoom",val:"auto",icon:_.autoscale,click:d},A.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(Y){return w(Y,"Reset axes")},attr:"zoom",val:"reset",icon:_.home,click:d},A.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(Y){return w(Y,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:_.tooltip_basic,gravity:"ne",click:d},A.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(Y){return w(Y,"Compare data on hover")},attr:"hovermode",val:function(Y){return Y._fullLayout._isHoriz?"y":"x"},icon:_.tooltip_compare,gravity:"ne",click:d};function d(Y,ht){var Se=ht.currentTarget,ie=Se.getAttribute("data-attr"),X=Se.getAttribute("data-val")||!0,ft=Y._fullLayout,Le={},nt=h.list(Y,null,!0),Ze=ft._cartesianSpikesEnabled,rt,dt;if(ie==="zoom"){var pt=X==="in"?.5:2,se=(1+pt)/2,gt=(1-pt)/2,xt,Nt;for(dt=0;dt<nt.length;dt++)if(rt=nt[dt],Nt=rt.modebardisable==="none"||rt.modebardisable.indexOf(X==="auto"||X==="reset"?"autoscale":"zoominout")===-1,Nt&&!rt.fixedrange)if(xt=rt._name,X==="auto")Le[xt+".autorange"]=!0;else if(X==="reset")rt._rangeInitial0===void 0&&rt._rangeInitial1===void 0?Le[xt+".autorange"]=!0:rt._rangeInitial0===void 0?(Le[xt+".autorange"]=rt._autorangeInitial,Le[xt+".range"]=[null,rt._rangeInitial1]):rt._rangeInitial1===void 0?(Le[xt+".range"]=[rt._rangeInitial0,null],Le[xt+".autorange"]=rt._autorangeInitial):Le[xt+".range"]=[rt._rangeInitial0,rt._rangeInitial1],rt._showSpikeInitial!==void 0&&(Le[xt+".showspikes"]=rt._showSpikeInitial,Ze==="on"&&!rt._showSpikeInitial&&(Ze="off"));else{var Rt=[rt.r2l(rt.range[0]),rt.r2l(rt.range[1])],Pt=[se*Rt[0]+gt*Rt[1],se*Rt[1]+gt*Rt[0]];Le[xt+".range[0]"]=rt.l2r(Pt[0]),Le[xt+".range[1]"]=rt.l2r(Pt[1])}}else ie==="hovermode"&&(X==="x"||X==="y")&&(X=ft._isHoriz?"y":"x",Se.setAttribute("data-val",X)),Le[ie]=X;ft._cartesianSpikesEnabled=Ze,v.call("_guiRelayout",Y,Le)}A.zoom3d={name:"zoom3d",_cat:"zoom",title:function(Y){return w(Y,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:_.zoombox,click:k},A.pan3d={name:"pan3d",_cat:"pan",title:function(Y){return w(Y,"Pan")},attr:"scene.dragmode",val:"pan",icon:_.pan,click:k},A.orbitRotation={name:"orbitRotation",title:function(Y){return w(Y,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:_["3d_rotate"],click:k},A.tableRotation={name:"tableRotation",title:function(Y){return w(Y,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:_["z-axis"],click:k};function k(Y,ht){for(var Se=ht.currentTarget,ie=Se.getAttribute("data-attr"),X=Se.getAttribute("data-val")||!0,ft=Y._fullLayout._subplots.gl3d||[],Le={},nt=ie.split("."),Ze=0;Ze<ft.length;Ze++)Le[ft[Ze]+"."+nt[1]]=X;var rt=X==="pan"?X:"zoom";Le.dragmode=rt,v.call("_guiRelayout",Y,Le)}A.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(Y){return w(Y,"Reset camera to default")},attr:"resetDefault",icon:_.home,click:T},A.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(Y){return w(Y,"Reset camera to last save")},attr:"resetLastSave",icon:_.movie,click:T};function T(Y,ht){for(var Se=ht.currentTarget,ie=Se.getAttribute("data-attr"),X=ie==="resetLastSave",ft=ie==="resetDefault",Le=Y._fullLayout,nt=Le._subplots.gl3d||[],Ze={},rt=0;rt<nt.length;rt++){var dt=nt[rt],pt=dt+".camera",se=dt+".aspectratio",gt=dt+".aspectmode",xt=Le[dt]._scene,Nt;X?(Ze[pt+".up"]=xt.viewInitial.up,Ze[pt+".eye"]=xt.viewInitial.eye,Ze[pt+".center"]=xt.viewInitial.center,Nt=!0):ft&&(Ze[pt+".up"]=null,Ze[pt+".eye"]=null,Ze[pt+".center"]=null,Nt=!0),Nt&&(Ze[se+".x"]=xt.viewInitial.aspectratio.x,Ze[se+".y"]=xt.viewInitial.aspectratio.y,Ze[se+".z"]=xt.viewInitial.aspectratio.z,Ze[gt]=xt.viewInitial.aspectmode)}v.call("_guiRelayout",Y,Ze)}A.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(Y){return w(Y,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:_.tooltip_basic,gravity:"ne",click:j};function L(Y,ht){var Se=ht.currentTarget,ie=Se._previousVal,X=Y._fullLayout,ft=X._subplots.gl3d||[],Le=["xaxis","yaxis","zaxis"],nt={},Ze={};if(ie)Ze=ie,Se._previousVal=null;else{for(var rt=0;rt<ft.length;rt++){var dt=ft[rt],pt=X[dt],se=dt+".hovermode";nt[se]=pt.hovermode,Ze[se]=!1;for(var gt=0;gt<3;gt++){var xt=Le[gt],Nt=dt+"."+xt+".showspikes";Ze[Nt]=!1,nt[Nt]=pt[xt].showspikes}}Se._previousVal=nt}return Ze}function j(Y,ht){var Se=L(Y,ht);v.call("_guiRelayout",Y,Se)}A.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(Y){return w(Y,"Zoom in")},attr:"zoom",val:"in",icon:_.zoom_plus,click:P},A.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(Y){return w(Y,"Zoom out")},attr:"zoom",val:"out",icon:_.zoom_minus,click:P},A.resetGeo={name:"resetGeo",_cat:"reset",title:function(Y){return w(Y,"Reset")},attr:"reset",val:null,icon:_.autoscale,click:P},A.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(Y){return w(Y,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:_.tooltip_basic,gravity:"ne",click:O};function P(Y,ht){for(var Se=ht.currentTarget,ie=Se.getAttribute("data-attr"),X=Se.getAttribute("data-val")||!0,ft=Y._fullLayout,Le=ft._subplots.geo||[],nt=0;nt<Le.length;nt++){var Ze=Le[nt],rt=ft[Ze];if(ie==="zoom"){var dt=rt.projection.scale,pt=X==="in"?2*dt:.5*dt;v.call("_guiRelayout",Y,Ze+".projection.scale",pt)}}ie==="reset"&&H(Y,"geo")}A.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(Y){return w(Y,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:_.tooltip_basic,gravity:"ne",click:O};function N(Y){var ht=Y._fullLayout;return ht.hovermode?!1:ht._has("cartesian")?ht._isHoriz?"y":"x":"closest"}function O(Y){var ht=N(Y);v.call("_guiRelayout",Y,"hovermode",ht)}A.resetViewSankey={name:"resetSankeyGroup",title:function(Y){return w(Y,"Reset view")},icon:_.home,click:function(Y){for(var ht={"node.groups":[],"node.x":[],"node.y":[]},Se=0;Se<Y._fullData.length;Se++){var ie=Y._fullData[Se]._viewInitial;ht["node.groups"].push(ie.node.groups.slice()),ht["node.x"].push(ie.node.x.slice()),ht["node.y"].push(ie.node.y.slice())}v.call("restyle",Y,ht)}},A.toggleHover={name:"toggleHover",title:function(Y){return w(Y,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:_.tooltip_basic,gravity:"ne",click:function(Y,ht){var Se=L(Y,ht);Se.hovermode=N(Y),v.call("_guiRelayout",Y,Se)}},A.resetViews={name:"resetViews",title:function(Y){return w(Y,"Reset views")},icon:_.home,click:function(Y,ht){var Se=ht.currentTarget;Se.setAttribute("data-attr","zoom"),Se.setAttribute("data-val","reset"),d(Y,ht),Se.setAttribute("data-attr","resetLastSave"),T(Y,ht),H(Y,"geo"),H(Y,"mapbox"),H(Y,"map")}},A.toggleSpikelines={name:"toggleSpikelines",title:function(Y){return w(Y,"Toggle Spike Lines")},icon:_.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(Y){var ht=Y._fullLayout,Se=ht._cartesianSpikesEnabled;ht._cartesianSpikesEnabled=Se==="on"?"off":"on",v.call("_guiRelayout",Y,B(Y))}};function B(Y){for(var ht=Y._fullLayout,Se=ht._cartesianSpikesEnabled==="on",ie=h.list(Y,null,!0),X={},ft=0;ft<ie.length;ft++){var Le=ie[ft];X[Le._name+".showspikes"]=Se?!0:Le._showSpikeInitial}return X}A.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(Y){return w(Y,"Reset view")},attr:"reset",icon:_.home,click:function(Y){H(Y,"mapbox")}},A.resetViewMap={name:"resetViewMap",_cat:"resetView",title:function(Y){return w(Y,"Reset view")},attr:"reset",icon:_.home,click:function(Y){H(Y,"map")}},A.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(Y){return w(Y,"Zoom in")},attr:"zoom",val:"in",icon:_.zoom_plus,click:S},A.zoomInMap={name:"zoomInMap",_cat:"zoomin",title:function(Y){return w(Y,"Zoom in")},attr:"zoom",val:"in",icon:_.zoom_plus,click:D},A.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(Y){return w(Y,"Zoom out")},attr:"zoom",val:"out",icon:_.zoom_minus,click:S},A.zoomOutMap={name:"zoomOutMap",_cat:"zoomout",title:function(Y){return w(Y,"Zoom out")},attr:"zoom",val:"out",icon:_.zoom_minus,click:D};function S(Y,ht){z(Y,ht,"mapbox")}function D(Y,ht){z(Y,ht,"map")}function z(Y,ht,Se){for(var ie=ht.currentTarget,X=ie.getAttribute("data-val"),ft=Y._fullLayout,Le=ft._subplots[Se]||[],nt=1.05,Ze={},rt=0;rt<Le.length;rt++){var dt=Le[rt],pt=ft[dt].zoom,se=X==="in"?nt*pt:pt/nt;Ze[dt+".zoom"]=se}v.call("_guiRelayout",Y,Ze)}function H(Y,ht){for(var Se=Y._fullLayout,ie=Se._subplots[ht]||[],X={},ft=0;ft<ie.length;ft++)for(var Le=ie[ft],nt=Se[Le]._subplot,Ze=nt.viewInitial,rt=Object.keys(Ze),dt=0;dt<rt.length;dt++){var pt=rt[dt];X[Le+"."+pt]=Ze[pt]}v.call("_guiRelayout",Y,X)}}),P0=t((Ue,ve)=>{var v=j0(),c=Object.keys(v),h=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],_=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(h),y=[],x=function(w){if(_.indexOf(w._cat||w.name)===-1){var A=w.name,d=(w._cat||w.name).toLowerCase();y.indexOf(A)===-1&&y.push(A),y.indexOf(d)===-1&&y.push(d)}};c.forEach(function(w){x(v[w])}),y.sort(),ve.exports={DRAW_MODES:h,backButtons:_,foreButtons:y}}),Wm=t((Ue,ve)=>{P0(),ve.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"}}}),dm=t((Ue,ve)=>{var v=Re(),c=sa(),h=Nm(),_=Wm();ve.exports=function(y,x){var w=y.modebar||{},A=h.newContainer(x,"modebar");function d(T,L){return v.coerce(w,A,_,T,L)}d("orientation"),d("bgcolor",c.addOpacity(x.paper_bgcolor,.5));var k=c.contrast(c.rgb(x.modebar.bgcolor));d("color",c.addOpacity(k,.3)),d("activecolor",c.addOpacity(k,.7)),d("uirevision",x.uirevision),d("add"),d("remove")}}),U1=t((Ue,ve)=>{var v=l(),c=E(),h=Re(),_=Ry(),y=a().version,x=new DOMParser;function w(T){this.container=T.container,this.element=document.createElement("div"),this.update(T.graphInfo,T.buttons),this.container.appendChild(this.element)}var A=w.prototype;A.update=function(T,L){this.graphInfo=T;var j=this.graphInfo._context,P=this.graphInfo._fullLayout,N="modebar-"+P._uid;this.element.setAttribute("id",N),this.element.setAttribute("role","toolbar"),this._uid=N,this.element.className="modebar modebar--custom",j.displayModeBar==="hover"&&(this.element.className+=" modebar--hover ease-bg"),P.modebar.orientation==="v"&&(this.element.className+=" vertical",L=L.reverse());var O=P.modebar,B="#"+N+" .modebar-group";document.querySelectorAll(B).forEach(function(Y){Y.style.backgroundColor=O.bgcolor});var S=!this.hasButtons(L),D=this.hasLogo!==j.displaylogo,z=this.locale!==j.locale;if(this.locale=j.locale,(S||D||z)&&(this.removeAllButtons(),this.updateButtons(L),j.watermark||j.displaylogo)){var H=this.getLogo();j.watermark&&(H.className=H.className+" watermark"),P.modebar.orientation==="v"?this.element.insertBefore(H,this.element.childNodes[0]):this.element.appendChild(H),this.hasLogo=!0}this.updateActiveButton(),h.setStyleOnHover("#"+N+" .modebar-btn",".active",".icon path","fill: "+O.activecolor,"fill: "+O.color,this.element)},A.updateButtons=function(T){var L=this;this.buttons=T,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(j){var P=L.createGroup();j.forEach(function(N){var O=N.name;if(!O)throw new Error("must provide button 'name' in button config");if(L.buttonsNames.indexOf(O)!==-1)throw new Error("button name '"+O+"' is taken");L.buttonsNames.push(O);var B=L.createButton(N);L.buttonElements.push(B),P.appendChild(B)}),L.element.appendChild(P)})},A.createGroup=function(){var T=document.createElement("div");T.className="modebar-group";var L=this.graphInfo._fullLayout.modebar;return T.style.backgroundColor=L.bgcolor,T},A.createButton=function(T){var L=this,j=document.createElement("button");j.setAttribute("type","button"),j.setAttribute("rel","tooltip"),j.className="modebar-btn";var P=T.title;P===void 0?P=T.name:typeof P=="function"&&(P=P(this.graphInfo)),(P||P===0)&&(j.setAttribute("data-title",P),j.setAttribute("aria-label",P)),T.attr!==void 0&&j.setAttribute("data-attr",T.attr);var N=T.val;N!==void 0&&(typeof N=="function"&&(N=N(this.graphInfo)),j.setAttribute("data-val",N));var O=T.click;if(typeof O!="function")throw new Error("must provide button 'click' function in button config");j.addEventListener("click",function(S){T.click(L.graphInfo,S),L.updateActiveButton(S.currentTarget)}),j.setAttribute("data-toggle",T.toggle||!1),T.toggle&&v.select(j).classed("active",!0);var B=T.icon;return typeof B=="function"?j.appendChild(B()):j.appendChild(this.createIcon(B||_.question)),j.setAttribute("data-gravity",T.gravity||"n"),j},A.createIcon=function(T){var L=c(T.height)?Number(T.height):T.ascent-T.descent,j="http://www.w3.org/2000/svg",P;if(T.path){P=document.createElementNS(j,"svg"),P.setAttribute("viewBox",[0,0,T.width,L].join(" ")),P.setAttribute("class","icon");var N=document.createElementNS(j,"path");N.setAttribute("d",T.path),T.transform?N.setAttribute("transform",T.transform):T.ascent!==void 0&&N.setAttribute("transform","matrix(1 0 0 -1 0 "+T.ascent+")"),P.appendChild(N)}if(T.svg){var O=x.parseFromString(T.svg,"application/xml");P=O.childNodes[0]}return P.setAttribute("height","1em"),P.setAttribute("width","1em"),P},A.updateActiveButton=function(T){var L=this.graphInfo._fullLayout,j=T!==void 0?T.getAttribute("data-attr"):null;this.buttonElements.forEach(function(P){var N=P.getAttribute("data-val")||!0,O=P.getAttribute("data-attr"),B=P.getAttribute("data-toggle")==="true",S=v.select(P),D=function(Y,ht){var Se=L.modebar,ie=Y.querySelector(".icon path");ie&&(ht||Y.matches(":hover")?ie.style.fill=Se.activecolor:ie.style.fill=Se.color)};if(B){if(O===j){var z=!S.classed("active");S.classed("active",z),D(P,z)}}else{var H=O===null?O:h.nestedProperty(L,O).get();S.classed("active",H===N),D(P,H===N)}})},A.hasButtons=function(T){var L=this.buttons;if(!L||T.length!==L.length)return!1;for(var j=0;j<T.length;++j){if(T[j].length!==L[j].length)return!1;for(var P=0;P<T[j].length;P++)if(T[j][P].name!==L[j][P].name)return!1}return!0};function d(T){return T+" (v"+y+")"}A.getLogo=function(){var T=this.createGroup(),L=document.createElement("a");return L.href="https://plotly.com/",L.target="_blank",L.setAttribute("data-title",d(h._(this.graphInfo,"Produced with Plotly.js"))),L.className="modebar-btn plotlyjsicon modebar-btn--logo",L.appendChild(this.createIcon(_.newplotlylogo)),T.appendChild(L),T},A.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},A.destroy=function(){h.removeElement(this.container.querySelector(".modebar"))};function k(T,L){var j=T._fullLayout,P=new w({graphInfo:T,container:j._modebardiv.node(),buttons:L});return j._privateplot&&v.select(P.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),P}ve.exports=k}),gm=t((Ue,ve)=>{var v=A1(),c=$p(),h=p1(),_=T0().isUnifiedHover,y=U1(),x=j0(),w=P0().DRAW_MODES,A=Re().extendDeep;ve.exports=function(N){var O=N._fullLayout,B=N._context,S=O._modeBar;if(!B.displayModeBar&&!B.watermark){S&&(S.destroy(),delete O._modeBar);return}if(!Array.isArray(B.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(B.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var D=B.modeBarButtons,z;Array.isArray(D)&&D.length?z=P(D):!B.displayModeBar&&B.watermark?z=[]:z=d(N),S?S.update(N,z):O._modeBar=y(N,z)};function d(N){var O=N._fullLayout,B=N._fullData,S=N._context;function D(G,ne){if(typeof ne=="string"){if(ne.toLowerCase()===G.toLowerCase())return!0}else{var et=ne.name,ct=ne._cat||ne.name;if(et===G||ct===G.toLowerCase())return!0}return!1}var z=O.modebar.add;typeof z=="string"&&(z=[z]);var H=O.modebar.remove;typeof H=="string"&&(H=[H]);var Y=S.modeBarButtonsToAdd.concat(z.filter(function(G){for(var ne=0;ne<S.modeBarButtonsToRemove.length;ne++)if(D(G,S.modeBarButtonsToRemove[ne]))return!1;return!0})),ht=S.modeBarButtonsToRemove.concat(H.filter(function(G){for(var ne=0;ne<S.modeBarButtonsToAdd.length;ne++)if(D(G,S.modeBarButtonsToAdd[ne]))return!1;return!0})),Se=O._has("cartesian"),ie=O._has("gl3d"),X=O._has("geo"),ft=O._has("pie"),Le=O._has("funnelarea"),nt=O._has("ternary"),Ze=O._has("mapbox"),rt=O._has("map"),dt=O._has("polar"),pt=O._has("smith"),se=O._has("sankey"),gt=k(O),xt=_(O.hovermode),Nt=[];function Rt(G){if(G.length){for(var ne=[],et=0;et<G.length;et++){for(var ct=G[et],kt=x[ct],Gt=kt.name.toLowerCase(),$t=(kt._cat||kt.name).toLowerCase(),Ko=!1,Up=0;Up<ht.length;Up++){var e0=ht[Up].toLowerCase();if(e0===Gt||e0===$t){Ko=!0;break}}Ko||ne.push(x[ct])}Nt.push(ne)}}var Pt=["toImage"];S.showEditInChartStudio?Pt.push("editInChartStudio"):S.showSendToCloud&&Pt.push("sendDataToCloud"),Rt(Pt);var xn=[],oa=[],jo=[],lt=[];(Se||ft||Le||nt)+X+ie+Ze+rt+dt+pt>1?(oa=["toggleHover"],jo=["resetViews"]):X?(xn=["zoomInGeo","zoomOutGeo"],oa=["hoverClosestGeo"],jo=["resetGeo"]):ie?(oa=["hoverClosest3d"],jo=["resetCameraDefault3d","resetCameraLastSave3d"]):Ze?(xn=["zoomInMapbox","zoomOutMapbox"],oa=["toggleHover"],jo=["resetViewMapbox"]):rt?(xn=["zoomInMap","zoomOutMap"],oa=["toggleHover"],jo=["resetViewMap"]):ft?oa=["hoverClosestPie"]:se?(oa=["hoverClosestCartesian","hoverCompareCartesian"],jo=["resetViewSankey"]):oa=["toggleHover"],Se&&oa.push("toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"),(L(B)||xt)&&(oa=[]),Se&&!gt&&(xn=["zoomIn2d","zoomOut2d","autoScale2d"],jo[0]!=="resetViews"&&(jo=["resetScale2d"])),ie?lt=["zoom3d","pan3d","orbitRotation","tableRotation"]:Se&&!gt||nt?lt=["zoom2d","pan2d"]:Ze||rt||X?lt=["pan2d"]:dt&&(lt=["zoom2d"]),T(B)&&lt.push("select2d","lasso2d");var ut=[],$=function(G){ut.indexOf(G)===-1&&oa.indexOf(G)!==-1&&ut.push(G)};if(Array.isArray(Y)){for(var yt=[],Lt=0;Lt<Y.length;Lt++){var ke=Y[Lt];typeof ke=="string"?(ke=ke.toLowerCase(),w.indexOf(ke)!==-1?(O._has("mapbox")||O._has("map")||O._has("cartesian"))&&lt.push(ke):ke==="togglespikelines"?$("toggleSpikelines"):ke==="togglehover"?$("toggleHover"):ke==="hovercompare"?$("hoverCompareCartesian"):ke==="hoverclosest"?($("hoverClosestCartesian"),$("hoverClosestGeo"),$("hoverClosest3d"),$("hoverClosestPie")):ke==="v1hovermode"&&($("hoverClosestCartesian"),$("hoverCompareCartesian"),$("hoverClosestGeo"),$("hoverClosest3d"),$("hoverClosestPie"))):yt.push(ke)}Y=yt}return Rt(lt),Rt(xn.concat(jo)),Rt(ut),j(Nt,Y)}function k(N){for(var O=v.list({_fullLayout:N},null,!0),B=0;B<O.length;B++){var S=O[B].modebardisable;if(!O[B].fixedrange&&S!=="autoscale+zoominout"&&S!=="zoominout+autoscale")return!1}return!0}function T(N){for(var O=!1,B=0;B<N.length&&!O;B++){var S=N[B];!S._module||!S._module.selectPoints||(h.traceIs(S,"scatter-like")?(c.hasMarkers(S)||c.hasText(S))&&(O=!0):h.traceIs(S,"box-violin")?(S.boxpoints==="all"||S.points==="all")&&(O=!0):O=!0)}return O}function L(N){for(var O=0;O<N.length;O++)if(!h.traceIs(N[O],"noHover"))return!1;return!0}function j(N,O){if(O.length)if(Array.isArray(O[0]))for(var B=0;B<O.length;B++)N.push(O[B]);else N.push(O);return N}function P(N){for(var O=A([],N),B=0;B<O.length;B++)for(var S=O[B],D=0;D<S.length;D++){var z=S[D];if(typeof z=="string")if(x[z]!==void 0)O[B][D]=x[z];else throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "))}return O}}),qm=t((Ue,ve)=>{ve.exports={moduleType:"component",name:"modebar",layoutAttributes:Wm(),supplyLayoutDefaults:dm(),manage:gm()}}),Wg=t((Ue,ve)=>{var v=$1().FROM_BL;ve.exports=function(c,h,_){_===void 0&&(_=v[c.constraintoward||"center"]);var y=[c.r2l(c.range[0]),c.r2l(c.range[1])],x=y[0]+(y[1]-y[0])*_;c.range=c._input.range=[c.l2r(x+(y[0]-x)*h),c.l2r(x+(y[1]-x)*h)],c.setScale()}}),_g=t(Ue=>{var ve=Re(),v=Pm(),c=A1().id2name,h=o0(),_=Wg(),y=tm(),x=M().ALMOST_EQUAL,w=$1().FROM_BL;Ue.handleDefaults=function(N,O,B){var S=B.axIds,D=B.axHasImage,z=O._axisConstraintGroups=[],H=O._axisMatchGroups=[],Y,ht,Se,ie,X,ft,Le,nt;for(Y=0;Y<S.length;Y++)ie=c(S[Y]),X=N[ie],ft=O[ie],A(X,ft,{axIds:S,layoutOut:O,hasImage:D[ie]});function Ze(Pt,xn){for(Y=0;Y<Pt.length;Y++){ht=Pt[Y];for(Se in ht)O[c(Se)][xn]=ht}}for(Ze(H,"_matchGroup"),Y=0;Y<z.length;Y++){ht=z[Y];for(Se in ht)if(ft=O[c(Se)],ft.fixedrange){for(var rt in ht){var dt=c(rt);(N[dt]||{}).fixedrange===!1&&ve.warn("fixedrange was specified as false for axis "+dt+" but was overridden because another axis in its constraint group has fixedrange true"),O[dt].fixedrange=!0}break}}for(Y=0;Y<z.length;){ht=z[Y];for(Se in ht){ft=O[c(Se)],ft._matchGroup&&Object.keys(ft._matchGroup).length===Object.keys(ht).length&&(z.splice(Y,1),Y--);break}Y++}Ze(z,"_constraintGroup");var pt=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],se=!1,gt=!1;function xt(){nt=ft[Le],Le==="rangebreaks"&&(gt=ft._hasDayOfWeekBreaks)}for(Y=0;Y<H.length;Y++){ht=H[Y];for(var Nt=0;Nt<pt.length;Nt++){Le=pt[Nt],nt=null;var Rt;for(Se in ht)if(ie=c(Se),X=N[ie],ft=O[ie],Le in ft){if(!ft.matches&&(Rt=ft,Le in X)){xt();break}nt===null&&Le in X&&xt()}if(Le==="range"&&nt&&X.range&&X.range.length===2&&X.range[0]!==null&&X.range[1]!==null&&(se=!0),Le==="autorange"&&nt===null&&se&&(nt=!1),nt===null&&Le in Rt&&(nt=Rt[Le]),nt!==null)for(Se in ht)ft=O[c(Se)],ft[Le]=Le==="range"?nt.slice():nt,Le==="rangebreaks"&&(ft._hasDayOfWeekBreaks=gt,y(ft,O))}}};function A(N,O,B){var S=B.axIds,D=B.layoutOut,z=B.hasImage,H=D._axisConstraintGroups,Y=D._axisMatchGroups,ht=O._id,Se=ht.charAt(0),ie=((D._splomAxes||{})[Se]||{})[ht]||{},X=O._id,ft=X.charAt(0)==="x";O._matchGroup=null,O._constraintGroup=null;function Le(lt,ut){return ve.coerce(N,O,h,lt,ut)}Le("constrain",z?"domain":"range"),ve.coerce(N,O,{constraintoward:{valType:"enumerated",values:ft?["left","center","right"]:["bottom","middle","top"],dflt:ft?"center":"middle"}},"constraintoward");var nt=O.type,Ze,rt,dt=[];for(Ze=0;Ze<S.length;Ze++)if(rt=S[Ze],rt!==X){var pt=D[c(rt)];pt.type===nt&&dt.push(rt)}var se=k(H,X);if(se){var gt=[];for(Ze=0;Ze<dt.length;Ze++)rt=dt[Ze],se[rt]||gt.push(rt);dt=gt}var xt=dt.length,Nt,Rt;xt&&(N.matches||ie.matches)&&(Nt=ve.coerce(N,O,{matches:{valType:"enumerated",values:dt,dflt:dt.indexOf(ie.matches)!==-1?ie.matches:void 0}},"matches"));var Pt=z&&!ft?O.anchor:void 0;if(xt&&!Nt&&(N.scaleanchor||Pt)&&(Rt=ve.coerce(N,O,{scaleanchor:{valType:"enumerated",values:dt.concat([!1])}},"scaleanchor",Pt)),Nt){O._matchGroup=T(Y,X,Nt,1);var xn=D[c(Nt)],oa=d(D,O)/d(D,xn);ft!==(Nt.charAt(0)==="x")&&(oa=(ft?"x":"y")+oa),T(H,X,Nt,oa)}else N.matches&&S.indexOf(N.matches)!==-1&&ve.warn("ignored "+O._name+'.matches: "'+N.matches+'" to avoid an infinite loop');if(Rt){var jo=Le("scaleratio");jo||(jo=O.scaleratio=1),T(H,X,Rt,jo)}else N.scaleanchor&&S.indexOf(N.scaleanchor)!==-1&&ve.warn("ignored "+O._name+'.scaleanchor: "'+N.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function d(N,O){var B=O.domain;return B||(B=N[c(O.overlaying)].domain),B[1]-B[0]}function k(N,O){for(var B=0;B<N.length;B++)if(N[B][O])return N[B];return null}function T(N,O,B,S){var D,z,H,Y,ht,Se=k(N,O);Se===null?(Se={},Se[O]=1,ht=N.length,N.push(Se)):ht=N.indexOf(Se);var ie=Object.keys(Se);for(D=0;D<N.length;D++)if(H=N[D],D!==ht&&H[B]){var X=H[B];for(z=0;z<ie.length;z++)Y=ie[z],H[Y]=L(X,L(S,Se[Y]));N.splice(ht,1);return}if(S!==1)for(z=0;z<ie.length;z++){var ft=ie[z];Se[ft]=L(S,Se[ft])}Se[B]=1}function L(N,O){var B="",S="",D,z;typeof N=="string"&&(B=N.match(/^[xy]*/)[0],D=B.length,N=+N.substr(D)),typeof O=="string"&&(S=O.match(/^[xy]*/)[0],z=S.length,O=+O.substr(z));var H=N*O;return!D&&!z?H:!D||!z||B.charAt(0)===S.charAt(0)?B+S+N*O:D===z?H:(D>z?B.substr(z):S.substr(D))+H}function j(N,O){for(var B=O._size,S=B.h/B.w,D={},z=Object.keys(N),H=0;H<z.length;H++){var Y=z[H],ht=N[Y];if(typeof ht=="string"){var Se=ht.match(/^[xy]*/)[0],ie=Se.length;ht=+ht.substr(ie);for(var X=Se.charAt(0)==="y"?S:1/S,ft=0;ft<ie;ft++)ht*=X}D[Y]=ht}return D}Ue.enforce=function(N){var O=N._fullLayout,B=O._axisConstraintGroups||[],S,D,z,H,Y,ht,Se,ie;for(S=0;S<B.length;S++){z=j(B[S],O);var X=Object.keys(z),ft=1/0,Le=0,nt=1/0,Ze={},rt={},dt=!1;for(D=0;D<X.length;D++)H=X[D],rt[H]=Y=O[c(H)],Y._inputDomain?Y.domain=Y._inputDomain.slice():Y._inputDomain=Y.domain.slice(),Y._inputRange||(Y._inputRange=Y.range.slice()),Y.setScale(),Ze[H]=ht=Math.abs(Y._m)/z[H],ft=Math.min(ft,ht),(Y.constrain==="domain"||!Y._constraintShrinkable)&&(nt=Math.min(nt,ht)),delete Y._constraintShrinkable,Le=Math.max(Le,ht),Y.constrain==="domain"&&(dt=!0);if(!(ft>x*Le&&!dt)){for(D=0;D<X.length;D++)if(H=X[D],ht=Ze[H],Y=rt[H],Se=Y.constrain,ht!==nt||Se==="domain")if(ie=ht/nt,Se==="range")_(Y,ie);else{var pt=Y._inputDomain,se=(Y.domain[1]-Y.domain[0])/(pt[1]-pt[0]),gt=(Y.r2l(Y.range[1])-Y.r2l(Y.range[0]))/(Y.r2l(Y._inputRange[1])-Y.r2l(Y._inputRange[0]));if(ie/=se,ie*gt<1){Y.domain=Y._input.domain=pt.slice(),_(Y,ie);continue}if(gt<1&&(Y.range=Y._input.range=Y._inputRange.slice(),ie*=gt),Y.autorange){var xt=Y.r2l(Y.range[0]),Nt=Y.r2l(Y.range[1]),Rt=(xt+Nt)/2,Pt=Rt,xn=Rt,oa=Math.abs(Nt-Rt),jo=Rt-oa*ie*1.0001,lt=Rt+oa*ie*1.0001,ut=v.makePadFn(O,Y,0),$=v.makePadFn(O,Y,1);P(Y,ie);var yt=Math.abs(Y._m),Lt=v.concatExtremes(N,Y),ke=Lt.min,G=Lt.max,ne,et;for(et=0;et<ke.length;et++)ne=ke[et].val-ut(ke[et])/yt,ne>jo&&ne<Pt&&(Pt=ne);for(et=0;et<G.length;et++)ne=G[et].val+$(G[et])/yt,ne<lt&&ne>xn&&(xn=ne);var ct=(xn-Pt)/(2*oa);ie/=ct,Pt=Y.l2r(Pt),xn=Y.l2r(xn),Y.range=Y._input.range=xt<Nt?[Pt,xn]:[xn,Pt]}P(Y,ie)}}}},Ue.getAxisGroup=function(N,O){for(var B=N._axisMatchGroups,S=0;S<B.length;S++){var D=B[S];if(D[O])return"g"+S}return O},Ue.clean=function(N,O){if(O._inputDomain){for(var B=!1,S=O._id,D=N._fullLayout._axisConstraintGroups,z=0;z<D.length;z++)if(D[z][S]){B=!0;break}(!B||O.constrain!=="domain")&&(O._input.domain=O.domain=O._inputDomain,delete O._inputDomain)}};function P(N,O){var B=N._inputDomain,S=w[N.constraintoward],D=B[0]+(B[1]-B[0])*S;N.domain=N._input.domain=[D+(B[0]-D)/O,D+(B[1]-D)/O],N.setScale()}}),V1=t(Ue=>{var ve=l(),v=p1(),c=lg(),h=Re(),_=j1(),y=my(),x=sa(),w=Y0(),A=Q0(),d=qm(),k=km(),T=$1(),L=_g(),j=L.enforce,P=L.clean,N=Pm().doAutoRange,O="start",B="middle",S="end",D=jm().zindexSeparator;Ue.layoutStyles=function(se){return h.syncOrAsync([c.doAutoMargin,H],se)};function z(se,gt,xt){for(var Nt=0;Nt<xt.length;Nt++){var Rt=xt[Nt][0],Pt=xt[Nt][1];if(!(Rt[0]>=se[1]||Rt[1]<=se[0])&&Pt[0]<gt[1]&&Pt[1]>gt[0])return!0}return!1}function H(se){var gt=se._fullLayout,xt=gt._size,Nt=xt.p,Rt=k.list(se,"",!0),Pt,xn,oa,jo,lt,ut;if(gt._paperdiv.style({width:se._context.responsive&&gt.autosize&&!se._context._hasZeroWidth&&!se.layout.width?"100%":gt.width+"px",height:se._context.responsive&&gt.autosize&&!se._context._hasZeroHeight&&!se.layout.height?"100%":gt.height+"px"}).selectAll(".main-svg").call(w.setSize,gt.width,gt.height),se._context.setBackground(se,gt.paper_bgcolor),Ue.drawMainTitle(se),d.manage(se),!gt._has("cartesian"))return c.previousPromises(se);function $(St,Ht,Sr){var Rp=St._lw/2;if(St._id.charAt(0)==="x"){if(Ht){if(Sr==="top")return Ht._offset-Nt-Rp}else return xt.t+xt.h*(1-(St.position||0))+Rp%1;return Ht._offset+Ht._length+Nt+Rp}if(Ht){if(Sr==="right")return Ht._offset+Ht._length+Nt+Rp}else return xt.l+xt.w*(St.position||0)+Rp%1;return Ht._offset-Nt-Rp}for(Pt=0;Pt<Rt.length;Pt++){jo=Rt[Pt];var yt=jo._anchorAxis;jo._linepositions={},jo._lw=w.crispRound(se,jo.linewidth,1),jo._mainLinePosition=$(jo,yt,jo.side),jo._mainMirrorPosition=jo.mirror&&yt?$(jo,yt,T.OPPOSITE_SIDE[jo.side]):null}var Lt=[],ke=[],G=[],ne=x.opacity(gt.paper_bgcolor)===1&&x.opacity(gt.plot_bgcolor)===1&&gt.paper_bgcolor===gt.plot_bgcolor;for(xn in gt._plots)if(oa=gt._plots[xn],oa.mainplot)oa.bg&&oa.bg.remove(),oa.bg=void 0;else{var et=oa.xaxis.domain,ct=oa.yaxis.domain,kt=oa.plotgroup;if(z(et,ct,G)&&xn.indexOf(D)===-1){var Gt=kt.node(),$t=oa.bg=h.ensureSingle(kt,"rect","bg");Gt.insertBefore($t.node(),Gt.childNodes[0]),ke.push(xn)}else kt.select("rect.bg").remove(),G.push([et,ct]),ne||(Lt.push(xn),ke.push(xn))}var Ko=gt._bgLayer.selectAll(".bg").data(Lt);for(Ko.enter().append("rect").classed("bg",!0),Ko.exit().remove(),Ko.each(function(St){gt._plots[St].bg=ve.select(this)}),Pt=0;Pt<ke.length;Pt++)oa=gt._plots[ke[Pt]],lt=oa.xaxis,ut=oa.yaxis,oa.bg&&lt._offset!==void 0&&ut._offset!==void 0&&oa.bg.call(w.setRect,lt._offset-Nt,ut._offset-Nt,lt._length+2*Nt,ut._length+2*Nt).call(x.fill,gt.plot_bgcolor).style("stroke-width",0);if(!gt._hasOnlyLargeSploms)for(xn in gt._plots){oa=gt._plots[xn],lt=oa.xaxis,ut=oa.yaxis;var Up=oa.clipId="clip"+gt._uid+xn+"plot",e0=h.ensureSingleById(gt._clips,"clipPath",Up,function(St){St.classed("plotclip",!0).append("rect")});oa.clipRect=e0.select("rect").attr({width:lt._length,height:ut._length}),w.setTranslate(oa.plot,lt._offset,ut._offset);var E0,m0;oa._hasClipOnAxisFalse?(E0=null,m0=Up):(E0=Up,m0=null),w.setClipUrl(oa.plot,E0,se),oa.layerClipId=m0}var f0,la,$o,jt,Fp,i0,b0,O0,C0,I0,V0,H0,im;function k0(St){return"M"+f0+","+St+"H"+la}function fm(St){return"M"+lt._offset+","+St+"h"+lt._length}function Tm(St){return"M"+St+","+O0+"V"+b0}function om(St){return ut._shift!==void 0&&(St+=ut._shift),"M"+St+","+ut._offset+"v"+ut._length}function Rm(St,Ht,Sr){if(!St.showline||xn!==St._mainSubplot)return"";if(!St._anchorAxis)return Sr(St._mainLinePosition);var Rp=Ht(St._mainLinePosition);return St.mirror&&(Rp+=Ht(St._mainMirrorPosition)),Rp}for(xn in gt._plots){oa=gt._plots[xn],lt=oa.xaxis,ut=oa.yaxis;var ci="M0,0";Y(lt,xn)&&(Fp=Se(lt,"left",ut,Rt),f0=lt._offset-(Fp?Nt+Fp:0),i0=Se(lt,"right",ut,Rt),la=lt._offset+lt._length+(i0?Nt+i0:0),$o=$(lt,ut,"bottom"),jt=$(lt,ut,"top"),im=!lt._anchorAxis||xn!==lt._mainSubplot,im&&(lt.mirror==="allticks"||lt.mirror==="all")&&(lt._linepositions[xn]=[$o,jt]),ci=Rm(lt,k0,fm),im&&lt.showline&&(lt.mirror==="all"||lt.mirror==="allticks")&&(ci+=k0($o)+k0(jt)),oa.xlines.style("stroke-width",lt._lw+"px").call(x.stroke,lt.showline?lt.linecolor:"rgba(0,0,0,0)")),oa.xlines.attr("d",ci);var Hp="M0,0";Y(ut,xn)&&(V0=Se(ut,"bottom",lt,Rt),b0=ut._offset+ut._length+(V0?Nt:0),H0=Se(ut,"top",lt,Rt),O0=ut._offset-(H0?Nt:0),C0=$(ut,lt,"left"),I0=$(ut,lt,"right"),im=!ut._anchorAxis||xn!==ut._mainSubplot,im&&(ut.mirror==="allticks"||ut.mirror==="all")&&(ut._linepositions[xn]=[C0,I0]),Hp=Rm(ut,Tm,om),im&&ut.showline&&(ut.mirror==="all"||ut.mirror==="allticks")&&(Hp+=Tm(C0)+Tm(I0)),oa.ylines.style("stroke-width",ut._lw+"px").call(x.stroke,ut.showline?ut.linecolor:"rgba(0,0,0,0)")),oa.ylines.attr("d",Hp)}return k.makeClipPaths(se),c.previousPromises(se)}function Y(se,gt){return(se.ticks||se.showline)&&(gt===se._mainSubplot||se.mirror==="all"||se.mirror==="allticks")}function ht(se,gt,xt){if(!xt.showline||!xt._lw)return!1;if(xt.mirror==="all"||xt.mirror==="allticks")return!0;var Nt=xt._anchorAxis;if(!Nt)return!1;var Rt=T.FROM_BL[gt];return xt.side===gt?Nt.domain[Rt]===se.domain[Rt]:xt.mirror&&Nt.domain[1-Rt]===se.domain[1-Rt]}function Se(se,gt,xt,Nt){if(ht(se,gt,xt))return xt._lw;for(var Rt=0;Rt<Nt.length;Rt++){var Pt=Nt[Rt];if(Pt._mainAxis===xt._mainAxis&&ht(se,gt,Pt))return Pt._lw}return 0}Ue.drawMainTitle=function(se){var gt=se._fullLayout.title,xt=se._fullLayout,Nt=dt(xt),Rt=pt(xt),Pt=Ze(xt,Rt),xn=nt(xt,Nt);if(A.draw(se,"gtitle",{propContainer:xt,propName:"title.text",subtitlePropName:"title.subtitle.text",placeholder:xt._dfltTitle.plot,subtitlePlaceholder:xt._dfltTitle.subtitle,attributes:{x:xn,y:Pt,"text-anchor":Nt,dy:Rt}}),gt.text&&gt.automargin){var oa=ve.select(se).selectAll(".gtitle"),jo=w.bBox(ve.select(se).selectAll(".g-gtitle").node()).height,lt=ft(se,gt,jo);if(lt>0){Le(se,Pt,lt,jo),oa.attr({x:xn,y:Pt,"text-anchor":Nt,dy:rt(gt.yanchor)}).call(_.positionText,xn,Pt);var ut=(gt.text.match(_.BR_TAG_ALL)||[]).length;if(ut){var $=T.LINE_SPACING*ut+T.MID_SHIFT;gt.y===0&&($=-$),oa.selectAll(".line").each(function(){var ne=+this.getAttribute("dy").slice(0,-2)-$+"em";this.setAttribute("dy",ne)})}var yt=ve.select(se).selectAll(".gtitle-subtitle");if(yt.node()){var Lt=oa.node().getBBox(),ke=Lt.y+Lt.height,G=ke+A.SUBTITLE_PADDING_EM*gt.subtitle.font.size;yt.attr({x:xn,y:G,"text-anchor":Nt,dy:rt(gt.yanchor)}).call(_.positionText,xn,G)}}}};function ie(se,gt,xt,Nt,Rt){var Pt=gt.yref==="paper"?se._fullLayout._size.h:se._fullLayout.height,xn=h.isTopAnchor(gt)?Nt:Nt-Rt,oa=xt==="b"?Pt-xn:xn;return h.isTopAnchor(gt)&&xt==="t"||h.isBottomAnchor(gt)&&xt==="b"?!1:oa<Rt}function X(se,gt,xt,Nt,Rt){var Pt=0;return xt==="middle"&&(Pt+=Rt/2),se==="t"?(xt==="top"&&(Pt+=Rt),Pt+=Nt-gt*Nt):(xt==="bottom"&&(Pt+=Rt),Pt+=gt*Nt),Pt}function ft(se,gt,xt){var Nt=gt.y,Rt=gt.yanchor,Pt=Nt>.5?"t":"b",xn=se._fullLayout.margin[Pt],oa=0;return gt.yref==="paper"?oa=xt+gt.pad.t+gt.pad.b:gt.yref==="container"&&(oa=X(Pt,Nt,Rt,se._fullLayout.height,xt)+gt.pad.t+gt.pad.b),oa>xn?oa:0}function Le(se,gt,xt,Nt){var Rt="title.automargin",Pt=se._fullLayout.title,xn=Pt.y>.5?"t":"b",oa={x:Pt.x,y:Pt.y,t:0,b:0},jo={};Pt.yref==="paper"&&ie(se,Pt,xn,gt,Nt)?oa[xn]=xt:Pt.yref==="container"&&(jo[xn]=xt,se._fullLayout._reservedMargin[Rt]=jo),c.allowAutoMargin(se,Rt),c.autoMargin(se,Rt,oa)}function nt(se,gt){var xt=se.title,Nt=se._size,Rt=0;switch(gt===O?Rt=xt.pad.l:gt===S&&(Rt=-xt.pad.r),xt.xref){case"paper":return Nt.l+Nt.w*xt.x+Rt;case"container":default:return se.width*xt.x+Rt}}function Ze(se,gt){var xt=se.title,Nt=se._size,Rt=0;if(gt==="0em"||!gt?Rt=-xt.pad.b:gt===T.CAP_SHIFT+"em"&&(Rt=xt.pad.t),xt.y==="auto")return Nt.t/2;switch(xt.yref){case"paper":return Nt.t+Nt.h-Nt.h*xt.y+Rt;case"container":default:return se.height-se.height*xt.y+Rt}}function rt(se){return se==="top"?T.CAP_SHIFT+.3+"em":se==="bottom"?"-0.3em":T.MID_SHIFT+"em"}function dt(se){var gt=se.title,xt=B;return h.isRightAnchor(gt)?xt=S:h.isLeftAnchor(gt)&&(xt=O),xt}function pt(se){var gt=se.title,xt="0em";return h.isTopAnchor(gt)?xt=T.CAP_SHIFT+"em":h.isMiddleAnchor(gt)&&(xt=T.MID_SHIFT+"em"),xt}Ue.doTraceStyle=function(se){var gt=se.calcdata,xt=[],Nt;for(Nt=0;Nt<gt.length;Nt++){var Rt=gt[Nt],Pt=Rt[0]||{},xn=Pt.trace||{},oa=xn._module||{},jo=oa.arraysToCalcdata;jo&&jo(Rt,xn);var lt=oa.editStyle;lt&&xt.push({fn:lt,cd0:Pt})}if(xt.length){for(Nt=0;Nt<xt.length;Nt++){var ut=xt[Nt];ut.fn(se,ut.cd0)}y(se),Ue.redrawReglTraces(se)}return c.style(se),v.getComponentMethod("legend","draw")(se),c.previousPromises(se)},Ue.doColorBars=function(se){return v.getComponentMethod("colorbar","draw")(se),c.previousPromises(se)},Ue.layoutReplot=function(se){var gt=se.layout;return se.layout=void 0,v.call("_doPlot",se,"",gt)},Ue.doLegend=function(se){return v.getComponentMethod("legend","draw")(se),c.previousPromises(se)},Ue.doTicksRelayout=function(se){return k.draw(se,"redraw"),se._fullLayout._hasOnlyLargeSploms&&(v.subplotsRegistry.splom.updateGrid(se),y(se),Ue.redrawReglTraces(se)),Ue.drawMainTitle(se),c.previousPromises(se)},Ue.doModeBar=function(se){var gt=se._fullLayout;d.manage(se);for(var xt=0;xt<gt._basePlotModules.length;xt++){var Nt=gt._basePlotModules[xt].updateFx;Nt&&Nt(se)}return c.previousPromises(se)},Ue.doCamera=function(se){for(var gt=se._fullLayout,xt=gt._subplots.gl3d,Nt=0;Nt<xt.length;Nt++){var Rt=gt[xt[Nt]],Pt=Rt._scene;Pt.setViewport(Rt)}},Ue.drawData=function(se){var gt=se._fullLayout;y(se);for(var xt=gt._basePlotModules,Nt=0;Nt<xt.length;Nt++)xt[Nt].plot(se);return Ue.redrawReglTraces(se),c.style(se),v.getComponentMethod("selections","draw")(se),v.getComponentMethod("shapes","draw")(se),v.getComponentMethod("annotations","draw")(se),v.getComponentMethod("images","draw")(se),gt._replotting=!1,c.previousPromises(se)},Ue.redrawReglTraces=function(se){var gt=se._fullLayout;if(gt._has("regl")){var xt=se._fullData,Nt=[],Rt=[],Pt,xn;for(gt._hasOnlyLargeSploms&&gt._splomGrid.draw(),Pt=0;Pt<xt.length;Pt++){var oa=xt[Pt];oa.visible===!0&&oa._length!==0&&(oa.type==="splom"?gt._splomScenes[oa.uid].draw():oa.type==="scattergl"?h.pushUnique(Nt,oa.xaxis+oa.yaxis):oa.type==="scatterpolargl"&&h.pushUnique(Rt,oa.subplot))}for(Pt=0;Pt<Nt.length;Pt++)xn=gt._plots[Nt[Pt]],xn._scene&&xn._scene.draw();for(Pt=0;Pt<Rt.length;Pt++)xn=gt[Rt[Pt]]._subplot,xn._scene&&xn._scene.draw()}},Ue.doAutoRangeAndConstraints=function(se){for(var gt=k.list(se,"",!0),xt,Nt={},Rt=0;Rt<gt.length;Rt++)if(xt=gt[Rt],!Nt[xt._id]){Nt[xt._id]=1,P(se,xt),N(se,xt);var Pt=xt._matchGroup;if(Pt)for(var xn in Pt){var oa=k.getFromId(se,xn);N(se,oa,xt.range),Nt[xn]=1}}j(se)},Ue.finalDraw=function(se){v.getComponentMethod("rangeslider","draw")(se),v.getComponentMethod("rangeselector","draw")(se)},Ue.drawMarginPushers=function(se){v.getComponentMethod("legend","draw")(se),v.getComponentMethod("rangeselector","draw")(se),v.getComponentMethod("sliders","draw")(se),v.getComponentMethod("updatemenus","draw")(se),v.getComponentMethod("colorbar","draw")(se)}}),oy=t((Ue,ve)=>{var v=Mv().readPaths,c=mt(),h=L1().clearOutlineControllers,_=sa(),y=Y0(),x=Nm().arrayEditor,w=we(),A=w.getPathString;ve.exports={draw:d,drawOne:T,activateLastSelection:P};function d(O){var B=O._fullLayout;h(O),B._selectionLayer.selectAll("path").remove();for(var S in B._plots){var D=B._plots[S].selectionLayer;D&&D.selectAll("path").remove()}for(var z=0;z<B.selections.length;z++)T(O,z)}function k(O){return O._context.editSelection}function T(O,B){O._fullLayout._paperdiv.selectAll('.selectionlayer [data-index="'+B+'"]').remove();var S=w.makeSelectionsOptionsAndPlotinfo(O,B),D=S.options,z=S.plotinfo;if(!D._input)return;H(O._fullLayout._selectionLayer);function H(Y){var ht=A(O,D),Se={"data-index":B,"fill-rule":"evenodd",d:ht},ie=D.opacity,X="rgba(0,0,0,0)",ft=D.line.color||_.contrast(O._fullLayout.plot_bgcolor),Le=D.line.width,nt=D.line.dash;Le||(Le=5,nt="solid");var Ze=k(O)&&O._fullLayout._activeSelectionIndex===B;Ze&&(X=O._fullLayout.activeselection.fillcolor,ie=O._fullLayout.activeselection.opacity);for(var rt=[],dt=1;dt>=0;dt--){var pt=Y.append("path").attr(Se).style("opacity",dt?.1:ie).call(_.stroke,ft).call(_.fill,X).call(y.dashLine,dt?"solid":nt,dt?4+Le:Le);if(L(pt,O,D),Ze){var se=x(O.layout,"selections",D);pt.style({cursor:"move"});var gt={element:pt.node(),plotinfo:z,gd:O,editHelpers:se,isActiveSelection:!0},xt=v(ht,O);c(xt,pt,gt)}else pt.style("pointer-events",dt?"all":"none");rt[dt]=pt}var Nt=rt[0],Rt=rt[1];Rt.node().addEventListener("click",function(){return j(O,Nt)})}}function L(O,B,S){var D=S.xref+S.yref;y.setClipUrl(O,"clip"+B._fullLayout._uid+D,B)}function j(O,B){if(k(O)){var S=B.node(),D=+S.getAttribute("data-index");if(D>=0){if(D===O._fullLayout._activeSelectionIndex){N(O);return}O._fullLayout._activeSelectionIndex=D,O._fullLayout._deactivateSelection=N,d(O)}}}function P(O){if(k(O)){var B=O._fullLayout.selections.length-1;O._fullLayout._activeSelectionIndex=B,O._fullLayout._deactivateSelection=N,d(O)}}function N(O){if(k(O)){var B=O._fullLayout._activeSelectionIndex;B>=0&&(h(O),delete O._fullLayout._activeSelectionIndex,d(O))}}}),xv=t((Ue,ve)=>{function v(){var c,h=0,_=!1;function y(x,w){return c.list.push({type:x,data:w?JSON.parse(JSON.stringify(w)):void 0}),c}return c={list:[],segmentId:function(){return h++},checkIntersection:function(x,w){return y("check",{seg1:x,seg2:w})},segmentChop:function(x,w){return y("div_seg",{seg:x,pt:w}),y("chop",{seg:x,pt:w})},statusRemove:function(x){return y("pop_seg",{seg:x})},segmentUpdate:function(x){return y("seg_update",{seg:x})},segmentNew:function(x,w){return y("new_seg",{seg:x,primary:w})},segmentRemove:function(x){return y("rem_seg",{seg:x})},tempStatus:function(x,w,A){return y("temp_status",{seg:x,above:w,below:A})},rewind:function(x){return y("rewind",{seg:x})},status:function(x,w,A){return y("status",{seg:x,above:w,below:A})},vert:function(x){return x===_?c:(_=x,y("vert",{x}))},log:function(x){return typeof x!="string"&&(x=JSON.stringify(x,!1,"  ")),y("log",{txt:x})},reset:function(){return y("reset")},selected:function(x){return y("selected",{segs:x})},chainStart:function(x){return y("chain_start",{seg:x})},chainRemoveHead:function(x,w){return y("chain_rem_head",{index:x,pt:w})},chainRemoveTail:function(x,w){return y("chain_rem_tail",{index:x,pt:w})},chainNew:function(x,w){return y("chain_new",{pt1:x,pt2:w})},chainMatch:function(x){return y("chain_match",{index:x})},chainClose:function(x){return y("chain_close",{index:x})},chainAddHead:function(x,w){return y("chain_add_head",{index:x,pt:w})},chainAddTail:function(x,w){return y("chain_add_tail",{index:x,pt:w})},chainConnect:function(x,w){return y("chain_con",{index1:x,index2:w})},chainReverse:function(x){return y("chain_rev",{index:x})},chainJoin:function(x,w){return y("chain_join",{index1:x,index2:w})},done:function(){return y("done")}},c}ve.exports=v}),Og=t((Ue,ve)=>{function v(c){typeof c!="number"&&(c=1e-10);var h={epsilon:function(_){return typeof _=="number"&&(c=_),c},pointAboveOrOnLine:function(_,y,x){var w=y[0],A=y[1],d=x[0],k=x[1],T=_[0],L=_[1];return(d-w)*(L-A)-(k-A)*(T-w)>=-c},pointBetween:function(_,y,x){var w=_[1]-y[1],A=x[0]-y[0],d=_[0]-y[0],k=x[1]-y[1],T=d*A+w*k;if(T<c)return!1;var L=A*A+k*k;return!(T-L>-c)},pointsSameX:function(_,y){return Math.abs(_[0]-y[0])<c},pointsSameY:function(_,y){return Math.abs(_[1]-y[1])<c},pointsSame:function(_,y){return h.pointsSameX(_,y)&&h.pointsSameY(_,y)},pointsCompare:function(_,y){return h.pointsSameX(_,y)?h.pointsSameY(_,y)?0:_[1]<y[1]?-1:1:_[0]<y[0]?-1:1},pointsCollinear:function(_,y,x){var w=_[0]-y[0],A=_[1]-y[1],d=y[0]-x[0],k=y[1]-x[1];return Math.abs(w*k-d*A)<c},linesIntersect:function(_,y,x,w){var A=y[0]-_[0],d=y[1]-_[1],k=w[0]-x[0],T=w[1]-x[1],L=A*T-d*k;if(Math.abs(L)<c)return!1;var j=_[0]-x[0],P=_[1]-x[1],N=(k*P-T*j)/L,O=(A*P-d*j)/L,B={alongA:0,alongB:0,pt:[_[0]+N*A,_[1]+N*d]};return N<=-c?B.alongA=-2:N<c?B.alongA=-1:N-1<=-c?B.alongA=0:N-1<c?B.alongA=1:B.alongA=2,O<=-c?B.alongB=-2:O<c?B.alongB=-1:O-1<=-c?B.alongB=0:O-1<c?B.alongB=1:B.alongB=2,B},pointInsideRegion:function(_,y){for(var x=_[0],w=_[1],A=y[y.length-1][0],d=y[y.length-1][1],k=!1,T=0;T<y.length;T++){var L=y[T][0],j=y[T][1];j-w>c!=d-w>c&&(A-L)*(w-j)/(d-j)+L-x>c&&(k=!k),A=L,d=j}return k}};return h}ve.exports=v}),Rv=t((Ue,ve)=>{var v={create:function(){var c={root:{root:!0,next:null},exists:function(h){return!(h===null||h===c.root)},isEmpty:function(){return c.root.next===null},getHead:function(){return c.root.next},insertBefore:function(h,_){for(var y=c.root,x=c.root.next;x!==null;){if(_(x)){h.prev=x.prev,h.next=x,x.prev.next=h,x.prev=h;return}y=x,x=x.next}y.next=h,h.prev=y,h.next=null},findTransition:function(h){for(var _=c.root,y=c.root.next;y!==null&&!h(y);)_=y,y=y.next;return{before:_===c.root?null:_,after:y,insert:function(x){return x.prev=_,x.next=y,_.next=x,y!==null&&(y.prev=x),x}}}};return c},node:function(c){return c.prev=null,c.next=null,c.remove=function(){c.prev.next=c.next,c.next&&(c.next.prev=c.prev),c.prev=null,c.next=null},c}};ve.exports=v}),$g=t((Ue,ve)=>{var v=Rv();function c(h,_,y){function x(B,S){return{id:y?y.segmentId():-1,start:B,end:S,myFill:{above:null,below:null},otherFill:null}}function w(B,S,D){return{id:y?y.segmentId():-1,start:B,end:S,myFill:{above:D.myFill.above,below:D.myFill.below},otherFill:null}}var A=v.create();function d(B,S,D,z,H,Y){var ht=_.pointsCompare(S,H);return ht!==0?ht:_.pointsSame(D,Y)?0:B!==z?B?1:-1:_.pointAboveOrOnLine(D,z?H:Y,z?Y:H)?1:-1}function k(B,S){A.insertBefore(B,function(D){var z=d(B.isStart,B.pt,S,D.isStart,D.pt,D.other.pt);return z<0})}function T(B,S){var D=v.node({isStart:!0,pt:B.start,seg:B,primary:S,other:null,status:null});return k(D,B.end),D}function L(B,S,D){var z=v.node({isStart:!1,pt:S.end,seg:S,primary:D,other:B,status:null});B.other=z,k(z,B.pt)}function j(B,S){var D=T(B,S);return L(D,B,S),D}function P(B,S){y&&y.segmentChop(B.seg,S),B.other.remove(),B.seg.end=S,B.other.pt=S,k(B.other,B.pt)}function N(B,S){var D=w(S,B.seg.end,B.seg);return P(B,S),j(D,B.primary)}function O(B,S){var D=v.create();function z(pt,se){var gt=pt.seg.start,xt=pt.seg.end,Nt=se.seg.start,Rt=se.seg.end;return _.pointsCollinear(gt,Nt,Rt)?_.pointsCollinear(xt,Nt,Rt)||_.pointAboveOrOnLine(xt,Nt,Rt)?1:-1:_.pointAboveOrOnLine(gt,Nt,Rt)?1:-1}function H(pt){return D.findTransition(function(se){var gt=z(pt,se.ev);return gt>0})}function Y(pt,se){var gt=pt.seg,xt=se.seg,Nt=gt.start,Rt=gt.end,Pt=xt.start,xn=xt.end;y&&y.checkIntersection(gt,xt);var oa=_.linesIntersect(Nt,Rt,Pt,xn);if(oa===!1){if(!_.pointsCollinear(Nt,Rt,Pt)||_.pointsSame(Nt,xn)||_.pointsSame(Rt,Pt))return!1;var jo=_.pointsSame(Nt,Pt),lt=_.pointsSame(Rt,xn);if(jo&&lt)return se;var ut=!jo&&_.pointBetween(Nt,Pt,xn),$=!lt&&_.pointBetween(Rt,Pt,xn);if(jo)return $?N(se,Rt):N(pt,xn),se;ut&&(lt||($?N(se,Rt):N(pt,xn)),N(se,Nt))}else oa.alongA===0&&(oa.alongB===-1?N(pt,Pt):oa.alongB===0?N(pt,oa.pt):oa.alongB===1&&N(pt,xn)),oa.alongB===0&&(oa.alongA===-1?N(se,Nt):oa.alongA===0?N(se,oa.pt):oa.alongA===1&&N(se,Rt));return!1}for(var ht=[];!A.isEmpty();){var Se=A.getHead();if(y&&y.vert(Se.pt[0]),Se.isStart){let pt=function(){if(X){var se=Y(Se,X);if(se)return se}return ft?Y(Se,ft):!1};y&&y.segmentNew(Se.seg,Se.primary);var ie=H(Se),X=ie.before?ie.before.ev:null,ft=ie.after?ie.after.ev:null;y&&y.tempStatus(Se.seg,X?X.seg:!1,ft?ft.seg:!1);var Le=pt();if(Le){if(h){var nt;Se.seg.myFill.below===null?nt=!0:nt=Se.seg.myFill.above!==Se.seg.myFill.below,nt&&(Le.seg.myFill.above=!Le.seg.myFill.above)}else Le.seg.otherFill=Se.seg.myFill;y&&y.segmentUpdate(Le.seg),Se.other.remove(),Se.remove()}if(A.getHead()!==Se){y&&y.rewind(Se.seg);continue}if(h){var nt;Se.seg.myFill.below===null?nt=!0:nt=Se.seg.myFill.above!==Se.seg.myFill.below,ft?Se.seg.myFill.below=ft.seg.myFill.above:Se.seg.myFill.below=B,nt?Se.seg.myFill.above=!Se.seg.myFill.below:Se.seg.myFill.above=Se.seg.myFill.below}else if(Se.seg.otherFill===null){var Ze;ft?Se.primary===ft.primary?Ze=ft.seg.otherFill.above:Ze=ft.seg.myFill.above:Ze=Se.primary?S:B,Se.seg.otherFill={above:Ze,below:Ze}}y&&y.status(Se.seg,X?X.seg:!1,ft?ft.seg:!1),Se.other.status=ie.insert(v.node({ev:Se}))}else{var rt=Se.status;if(rt===null)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(D.exists(rt.prev)&&D.exists(rt.next)&&Y(rt.prev.ev,rt.next.ev),y&&y.statusRemove(rt.ev.seg),rt.remove(),!Se.primary){var dt=Se.seg.myFill;Se.seg.myFill=Se.seg.otherFill,Se.seg.otherFill=dt}ht.push(Se.seg)}A.getHead().remove()}return y&&y.done(),ht}return h?{addRegion:function(B){for(var S,D=B[B.length-1],z=0;z<B.length;z++){S=D,D=B[z];var H=_.pointsCompare(S,D);H!==0&&j(x(H<0?S:D,H<0?D:S),!0)}},calculate:function(B){return O(B,!1)}}:{calculate:function(B,S,D,z){return B.forEach(function(H){j(w(H.start,H.end,H),!0)}),D.forEach(function(H){j(w(H.start,H.end,H),!1)}),O(S,z)}}}ve.exports=c}),tg=t((Ue,ve)=>{function v(c,h,_){var y=[],x=[];return c.forEach(function(w){var A=w.start,d=w.end;if(h.pointsSame(A,d)){console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");return}_&&_.chainStart(w);var k={index:0,matches_head:!1,matches_pt1:!1},T={index:0,matches_head:!1,matches_pt1:!1},L=k;function j(Ze,rt,dt){return L.index=Ze,L.matches_head=rt,L.matches_pt1=dt,L===k?(L=T,!1):(L=null,!0)}for(var P=0;P<y.length;P++){var N=y[P],O=N[0];N[1];var B=N[N.length-1];if(N[N.length-2],h.pointsSame(O,A)){if(j(P,!0,!0))break}else if(h.pointsSame(O,d)){if(j(P,!0,!1))break}else if(h.pointsSame(B,A)){if(j(P,!1,!0))break}else if(h.pointsSame(B,d)&&j(P,!1,!1))break}if(L===k){y.push([A,d]),_&&_.chainNew(A,d);return}if(L===T){_&&_.chainMatch(k.index);var S=k.index,D=k.matches_pt1?d:A,z=k.matches_head,N=y[S],H=z?N[0]:N[N.length-1],Y=z?N[1]:N[N.length-2],ht=z?N[N.length-1]:N[0],Se=z?N[N.length-2]:N[1];if(h.pointsCollinear(Y,H,D)&&(z?(_&&_.chainRemoveHead(k.index,D),N.shift()):(_&&_.chainRemoveTail(k.index,D),N.pop()),H=Y),h.pointsSame(ht,D)){y.splice(S,1),h.pointsCollinear(Se,ht,H)&&(z?(_&&_.chainRemoveTail(k.index,H),N.pop()):(_&&_.chainRemoveHead(k.index,H),N.shift())),_&&_.chainClose(k.index),x.push(N);return}z?(_&&_.chainAddHead(k.index,D),N.unshift(D)):(_&&_.chainAddTail(k.index,D),N.push(D));return}function ie(Ze){_&&_.chainReverse(Ze),y[Ze].reverse()}function X(Ze,rt){var dt=y[Ze],pt=y[rt],se=dt[dt.length-1],gt=dt[dt.length-2],xt=pt[0],Nt=pt[1];h.pointsCollinear(gt,se,xt)&&(_&&_.chainRemoveTail(Ze,se),dt.pop(),se=gt),h.pointsCollinear(se,xt,Nt)&&(_&&_.chainRemoveHead(rt,xt),pt.shift()),_&&_.chainJoin(Ze,rt),y[Ze]=dt.concat(pt),y.splice(rt,1)}var ft=k.index,Le=T.index;_&&_.chainConnect(ft,Le);var nt=y[ft].length<y[Le].length;k.matches_head?T.matches_head?nt?(ie(ft),X(ft,Le)):(ie(Le),X(Le,ft)):X(Le,ft):T.matches_head?X(ft,Le):nt?(ie(ft),X(Le,ft)):(ie(Le),X(ft,Le))}),x}ve.exports=v}),Vg=t((Ue,ve)=>{function v(h,_,y){var x=[];return h.forEach(function(w){var A=(w.myFill.above?8:0)+(w.myFill.below?4:0)+(w.otherFill&&w.otherFill.above?2:0)+(w.otherFill&&w.otherFill.below?1:0);_[A]!==0&&x.push({id:y?y.segmentId():-1,start:w.start,end:w.end,myFill:{above:_[A]===1,below:_[A]===2},otherFill:null})}),y&&y.selected(x),x}var c={union:function(h,_){return v(h,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],_)},intersect:function(h,_){return v(h,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],_)},difference:function(h,_){return v(h,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],_)},differenceRev:function(h,_){return v(h,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],_)},xor:function(h,_){return v(h,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],_)}};ve.exports=c}),Ev=t((Ue,ve)=>{var v={toPolygon:function(c,h){function _(w){if(w.length<=0)return c.segments({inverted:!1,regions:[]});function A(T){var L=T.slice(0,T.length-1);return c.segments({inverted:!1,regions:[L]})}for(var d=A(w[0]),k=1;k<w.length;k++)d=c.selectDifference(c.combine(d,A(w[k])));return d}if(h.type==="Polygon")return c.polygon(_(h.coordinates));if(h.type==="MultiPolygon"){for(var y=c.segments({inverted:!1,regions:[]}),x=0;x<h.coordinates.length;x++)y=c.selectUnion(c.combine(y,_(h.coordinates[x])));return c.polygon(y)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(c,h,_){_=c.polygon(c.segments(_));function y(N,O){return h.pointInsideRegion([(N[0][0]+N[1][0])*.5,(N[0][1]+N[1][1])*.5],O)}function x(N){return{region:N,children:[]}}var w=x(null);function A(N,O){for(var B=0;B<N.children.length;B++){var S=N.children[B];if(y(O,S.region)){A(S,O);return}}for(var D=x(O),B=0;B<N.children.length;B++){var S=N.children[B];y(S.region,O)&&(D.children.push(S),N.children.splice(B,1),B--)}N.children.push(D)}for(var d=0;d<_.regions.length;d++){var k=_.regions[d];k.length<3||A(w,k)}function T(N,O){for(var B=0,S=N[N.length-1][0],D=N[N.length-1][1],z=[],H=0;H<N.length;H++){var Y=N[H][0],ht=N[H][1];z.push([Y,ht]),B+=ht*S-Y*D,S=Y,D=ht}var Se=B<0;return Se!==O&&z.reverse(),z.push([z[0][0],z[0][1]]),z}var L=[];function j(N){var O=[T(N.region,!1)];L.push(O);for(var B=0;B<N.children.length;B++)O.push(P(N.children[B]))}function P(N){for(var O=0;O<N.children.length;O++)j(N.children[O]);return T(N.region,!0)}for(var d=0;d<w.children.length;d++)j(w.children[d]);return L.length<=0?{type:"Polygon",coordinates:[]}:L.length==1?{type:"Polygon",coordinates:L[0]}:{type:"MultiPolygon",coordinates:L}}};ve.exports=v}),ag=t((Ue,ve)=>{var v=xv(),c=Og(),h=$g(),_=tg(),y=Vg(),x=Ev(),w=!1,A=c(),d;d={buildLog:function(T){return T===!0?w=v():T===!1&&(w=!1),w===!1?!1:w.list},epsilon:function(T){return A.epsilon(T)},segments:function(T){var L=h(!0,A,w);return T.regions.forEach(L.addRegion),{segments:L.calculate(T.inverted),inverted:T.inverted}},combine:function(T,L){var j=h(!1,A,w);return{combined:j.calculate(T.segments,T.inverted,L.segments,L.inverted),inverted1:T.inverted,inverted2:L.inverted}},selectUnion:function(T){return{segments:y.union(T.combined,w),inverted:T.inverted1||T.inverted2}},selectIntersect:function(T){return{segments:y.intersect(T.combined,w),inverted:T.inverted1&&T.inverted2}},selectDifference:function(T){return{segments:y.difference(T.combined,w),inverted:T.inverted1&&!T.inverted2}},selectDifferenceRev:function(T){return{segments:y.differenceRev(T.combined,w),inverted:!T.inverted1&&T.inverted2}},selectXor:function(T){return{segments:y.xor(T.combined,w),inverted:T.inverted1!==T.inverted2}},polygon:function(T){return{regions:_(T.segments,A,w),inverted:T.inverted}},polygonFromGeoJSON:function(T){return x.toPolygon(d,T)},polygonToGeoJSON:function(T){return x.fromPolygon(d,A,T)},union:function(T,L){return k(T,L,d.selectUnion)},intersect:function(T,L){return k(T,L,d.selectIntersect)},difference:function(T,L){return k(T,L,d.selectDifference)},differenceRev:function(T,L){return k(T,L,d.selectDifferenceRev)},xor:function(T,L){return k(T,L,d.selectXor)}};function k(T,L,j){var P=d.segments(T),N=d.segments(L),O=d.combine(P,N),B=j(O);return d.polygon(B)}typeof window=="object"&&(window.PolyBool=d),ve.exports=d}),fv=t((Ue,ve)=>{ve.exports=function(v,c,h,_){var y=v[0],x=v[1],w=!1;h===void 0&&(h=0),_===void 0&&(_=c.length);for(var A=_-h,d=0,k=A-1;d<A;k=d++){var T=c[d+h][0],L=c[d+h][1],j=c[k+h][0],P=c[k+h][1],N=L>x!=P>x&&y<(j-T)*(x-L)/(P-L)+T;N&&(w=!w)}return w}}),Zg=t((Ue,ve)=>{var v=cm().dot,c=M().BADNUM,h=ve.exports={};h.tester=function(_){var y=_.slice(),x=y[0][0],w=x,A=y[0][1],d=A,k;for((y[y.length-1][0]!==y[0][0]||y[y.length-1][1]!==y[0][1])&&y.push(y[0]),k=1;k<y.length;k++)x=Math.min(x,y[k][0]),w=Math.max(w,y[k][0]),A=Math.min(A,y[k][1]),d=Math.max(d,y[k][1]);var T=!1,L;y.length===5&&(y[0][0]===y[1][0]?y[2][0]===y[3][0]&&y[0][1]===y[3][1]&&y[1][1]===y[2][1]&&(T=!0,L=function(B){return B[0]===y[0][0]}):y[0][1]===y[1][1]&&y[2][1]===y[3][1]&&y[0][0]===y[3][0]&&y[1][0]===y[2][0]&&(T=!0,L=function(B){return B[1]===y[0][1]}));function j(B,S){var D=B[0],z=B[1];return!(D===c||D<x||D>w||z===c||z<A||z>d||S&&L(B))}function P(B,S){var D=B[0],z=B[1];if(D===c||D<x||D>w||z===c||z<A||z>d)return!1;var H=y.length,Y=y[0][0],ht=y[0][1],Se=0,ie,X,ft,Le,nt;for(ie=1;ie<H;ie++)if(X=Y,ft=ht,Y=y[ie][0],ht=y[ie][1],Le=Math.min(X,Y),!(D<Le||D>Math.max(X,Y)||z>Math.max(ft,ht)))if(z<Math.min(ft,ht))D!==Le&&Se++;else{if(Y===X?nt=z:nt=ft+(D-X)*(ht-ft)/(Y-X),z===nt)return!(ie===1&&S);z<=nt&&D!==Le&&Se++}return Se%2===1}var N=!0,O=y[0];for(k=1;k<y.length;k++)if(O[0]!==y[k][0]||O[1]!==y[k][1]){N=!1;break}return{xmin:x,xmax:w,ymin:A,ymax:d,pts:y,contains:T?j:P,isRect:T,degenerate:N}},h.isSegmentBent=function(_,y,x,w){var A=_[y],d=[_[x][0]-A[0],_[x][1]-A[1]],k=v(d,d),T=Math.sqrt(k),L=[-d[1]/T,d[0]/T],j,P,N;for(j=y+1;j<x;j++)if(P=[_[j][0]-A[0],_[j][1]-A[1]],N=v(P,d),N<0||N>k||Math.abs(v(P,L))>w)return!0;return!1},h.filter=function(_,y){var x=[_[0]],w=0,A=0;function d(T){_.push(T);var L=x.length,j=w;x.splice(A+1);for(var P=j+1;P<_.length;P++)(P===_.length-1||h.isSegmentBent(_,j,P+1,y))&&(x.push(_[P]),x.length<L-2&&(w=P,A=x.length-1),j=P)}if(_.length>1){var k=_.pop();d(k)}return{addPt:d,raw:_,filtered:x}}}),Fg=t((Ue,ve)=>{ve.exports={BENDPX:1.5,MINSELECT:12,SELECTDELAY:100,SELECTID:"-select"}}),pv=t((Ue,ve)=>{var v=ag(),c=fv(),h=p1(),_=Y0().dashStyle,y=sa(),x=Zv(),w=T0().makeEventData,A=ry(),d=A.freeMode,k=A.rectMode,T=A.drawMode,L=A.openMode,j=A.selectMode,P=we(),N=Jv(),O=mt(),B=L1().clearOutline,S=Mv(),D=S.handleEllipse,z=S.readPaths,H=jv().newShapes,Y=Xv(),ht=oy().activateLastSelection,Se=Re(),ie=Se.sorterAsc,X=Zg(),ft=_y(),Le=A1().getFromId,nt=my(),Ze=V1().redrawReglTraces,rt=Fg(),dt=rt.MINSELECT,pt=X.filter,se=X.tester,gt=Py(),xt=gt.p2r,Nt=gt.axValue,Rt=gt.getTransform;function Pt(ci){return ci.subplot!==void 0}function xn(ci,Hp,St,Ht,Sr){var Rp=!Pt(Ht),Np=d(Sr),Jp=k(Sr),n0=L(Sr),S0=T(Sr),_0=j(Sr),w0=Sr==="drawline",X0=Sr==="drawcircle",$0=w0||X0,Z0=Ht.gd,Am=Z0._fullLayout,e1=_0&&Am.newselection.mode==="immediate"&&Rp,E1=Am._zoomlayer,N1=Ht.element.getBoundingClientRect(),z1=Ht.plotinfo,r1=Rt(z1),Lm=Hp-N1.left,T1=St-N1.top;Am._calcInverseTransform(Z0);var O1=Se.apply3DTransform(Am._invTransform)(Lm,T1);Lm=O1[0],T1=O1[1];var y1=Am._invScaleX,l1=Am._invScaleY,m1=Lm,t1=T1,Z1="M"+Lm+","+T1,rg=Ht.xaxes[0],k1=Ht.yaxes[0],ug=rg._length,yg=k1._length,Eg=ci.altKey&&!(T(Sr)&&n0),Ig,Q1,Rg,cg,Vm,Xg,Ct;yt(ci,Z0,Ht),Np&&(Ig=pt([[Lm,T1]],rt.BENDPX));var Tt=E1.selectAll("path.select-outline-"+z1.id).data([1]),jp=S0?Am.newshape:Am.newselection;S0&&(Ht.hasText=jp.label.text||jp.label.texttemplate);var Zp=S0&&!n0?jp.fillcolor:"rgba(0,0,0,0)",l0=jp.line.color||(Rp?y.contrast(Z0._fullLayout.plot_bgcolor):"#7f7f7f");Tt.enter().append("path").attr("class","select-outline select-outline-"+z1.id).style({opacity:S0?jp.opacity/2:1,"stroke-dasharray":_(jp.line.dash,jp.line.width),"stroke-width":jp.line.width+"px","shape-rendering":"crispEdges"}).call(y.stroke,l0).call(y.fill,Zp).attr("fill-rule","evenodd").classed("cursor-move",!!S0).attr("transform",r1).attr("d",Z1+"Z");var Bp=E1.append("path").attr("class","zoombox-corners").style({fill:y.background,stroke:y.defaultLine,"stroke-width":1}).attr("transform",r1).attr("d","M0,0Z");if(S0&&Ht.hasText){var Gp=E1.select(".label-temp");Gp.empty()&&(Gp=E1.append("g").classed("label-temp",!0).classed("select-outline",!0).style({opacity:.8}))}var p0=Am._uid+rt.SELECTID,a0=[],D0=et(Z0,Ht.xaxes,Ht.yaxes,Ht.subplot);e1&&!ci.shiftKey&&(Ht._clearSubplotSelections=function(){if(Rp){var am=rg._id,Ym=k1._id;b0(Z0,am,Ym,D0);for(var Hm=(Z0.layout||{}).selections||[],f1=[],Im=!1,Jm=0;Jm<Hm.length;Jm++){var R1=Am.selections[Jm];!R1||R1.xref!==am||R1.yref!==Ym?f1.push(Hm[Jm]):Im=!0}Im&&(Z0._fullLayout._noEmitSelectedAtStart=!0,h.call("_guiRelayout",Z0,{selections:f1}))}});var z0=fm(Ht);Ht.moveFn=function(am,Ym){Ht._clearSubplotSelections&&(Ht._clearSubplotSelections(),Ht._clearSubplotSelections=void 0),m1=Math.max(0,Math.min(ug,y1*am+Lm)),t1=Math.max(0,Math.min(yg,l1*Ym+T1));var Hm=Math.abs(m1-Lm),f1=Math.abs(t1-T1);if(Jp){var Im,Jm,R1;if(_0){var Ng=Am.selectdirection;switch(Ng==="any"?f1<Math.min(Hm*.6,dt)?Im="h":Hm<Math.min(f1*.6,dt)?Im="v":Im="d":Im=Ng,Im){case"h":Jm=X0?yg/2:0,R1=yg;break;case"v":Jm=X0?ug/2:0,R1=ug;break}}if(S0)switch(Am.newshape.drawdirection){case"vertical":Im="h",Jm=X0?yg/2:0,R1=yg;break;case"horizontal":Im="v",Jm=X0?ug/2:0,R1=ug;break;case"ortho":Hm<f1?(Im="h",Jm=T1,R1=t1):(Im="v",Jm=Lm,R1=m1);break;default:Im="d"}Im==="h"?(cg=$0?D(X0,[m1,Jm],[m1,R1]):[[Lm,Jm],[Lm,R1],[m1,R1],[m1,Jm]],cg.xmin=$0?m1:Math.min(Lm,m1),cg.xmax=$0?m1:Math.max(Lm,m1),cg.ymin=Math.min(Jm,R1),cg.ymax=Math.max(Jm,R1),Bp.attr("d","M"+cg.xmin+","+(T1-dt)+"h-4v"+2*dt+"h4ZM"+(cg.xmax-1)+","+(T1-dt)+"h4v"+2*dt+"h-4Z")):Im==="v"?(cg=$0?D(X0,[Jm,t1],[R1,t1]):[[Jm,T1],[Jm,t1],[R1,t1],[R1,T1]],cg.xmin=Math.min(Jm,R1),cg.xmax=Math.max(Jm,R1),cg.ymin=$0?t1:Math.min(T1,t1),cg.ymax=$0?t1:Math.max(T1,t1),Bp.attr("d","M"+(Lm-dt)+","+cg.ymin+"v-4h"+2*dt+"v4ZM"+(Lm-dt)+","+(cg.ymax-1)+"v4h"+2*dt+"v-4Z")):Im==="d"&&(cg=$0?D(X0,[Lm,T1],[m1,t1]):[[Lm,T1],[Lm,t1],[m1,t1],[m1,T1]],cg.xmin=Math.min(Lm,m1),cg.xmax=Math.max(Lm,m1),cg.ymin=Math.min(T1,t1),cg.ymax=Math.max(T1,t1),Bp.attr("d","M0,0Z"))}else Np&&(Ig.addPt([m1,t1]),cg=Ig.filtered);if(Ht.selectionDefs&&Ht.selectionDefs.length?(Rg=m0(Ht.mergedPolygons,cg,Eg),cg.subtract=Eg,Q1=$(Ht.selectionDefs.concat([cg]))):(Rg=[cg],Q1=se(cg)),O(la(Rg,n0),Tt,Ht),_0){var B1=jt(Z0,!1),av=B1.eventData?B1.eventData.points.slice():[];B1=jt(Z0,!1,Q1,D0,Ht),Q1=B1.selectionTesters,Ct=B1.eventData;var dg;Ig?dg=Ig.filtered:dg=H0(Rg),ft.throttle(p0,rt.SELECTDELAY,function(){a0=$o(Q1,D0);for(var sv=a0.slice(),xg=0;xg<av.length;xg++){for(var Jg=av[xg],ov=!1,fg=0;fg<sv.length;fg++)if(sv[fg].curveNumber===Jg.curveNumber&&sv[fg].pointNumber===Jg.pointNumber){ov=!0;break}ov||sv.push(Jg)}sv.length&&(Ct||(Ct={}),Ct.points=sv),z0(Ct,dg),Tm(Z0,Ct)})}},Ht.clickFn=function(am,Ym){if(Bp.remove(),Z0._fullLayout._activeShapeIndex>=0){Z0._fullLayout._deactivateShape(Z0);return}if(!S0){var Hm=Am.clickmode;ft.done(p0).then(function(){if(ft.clear(p0),am===2){for(Tt.remove(),Vm=0;Vm<D0.length;Vm++)Xg=D0[Vm],Xg._module.selectPoints(Xg,!1);if(e0(Z0,D0),G(Ht),Rm(Z0),D0.length){var f1=D0[0].xaxis,Im=D0[0].yaxis;if(f1&&Im){for(var Jm=[],R1=Z0._fullLayout.selections,Ng=0;Ng<R1.length;Ng++){var B1=R1[Ng];B1&&(B1.xref!==f1._id||B1.yref!==Im._id)&&Jm.push(B1)}Jm.length<R1.length&&(Z0._fullLayout._noEmitSelectedAtStart=!0,h.call("_guiRelayout",Z0,{selections:Jm}))}}}else Hm.indexOf("select")>-1&&oa(Ym,Z0,Ht.xaxes,Ht.yaxes,Ht.subplot,Ht,Tt),Hm==="event"&&om(Z0,void 0);x.click(Z0,Ym,z1.id)}).catch(Se.error)}},Ht.doneFn=function(){Bp.remove(),ft.done(p0).then(function(){ft.clear(p0),!e1&&cg&&Ht.selectionDefs&&(cg.subtract=Eg,Ht.selectionDefs.push(cg),Ht.mergedPolygons.length=0,[].push.apply(Ht.mergedPolygons,Rg)),(e1||S0)&&G(Ht,e1),Ht.doneFnCompleted&&Ht.doneFnCompleted(a0),_0&&om(Z0,Ct)}).catch(Se.error)}}function oa(ci,Hp,St,Ht,Sr,Rp,Np){var Jp=Hp._hoverdata,n0=Hp._fullLayout,S0=n0.clickmode,_0=S0.indexOf("event")>-1,w0=[],X0,$0,Z0,Am,e1,E1,N1,z1,r1,Lm;if(kt(Jp)){yt(ci,Hp,Rp),X0=et(Hp,St,Ht,Sr);var T1=Gt(Jp,X0),O1=T1.pointNumbers.length>0;if(O1?Ko(X0,T1):Up(X0)&&(N1=$t(T1))){for(Np&&Np.remove(),Lm=0;Lm<X0.length;Lm++)$0=X0[Lm],$0._module.selectPoints($0,!1);e0(Hp,X0),G(Rp),_0&&Rm(Hp)}else{z1=ci.shiftKey&&(N1!==void 0?N1:$t(T1)),Z0=jo(T1.pointNumber,T1.searchInfo,z1);var y1=Rp.selectionDefs.concat([Z0]);for(Am=$(y1),Lm=0;Lm<X0.length;Lm++)if(e1=X0[Lm]._module.selectPoints(X0[Lm],Am),E1=f0(e1,X0[Lm]),w0.length)for(var l1=0;l1<E1.length;l1++)w0.push(E1[l1]);else w0=E1;if(r1={points:w0},e0(Hp,X0,r1),Z0&&Rp&&Rp.selectionDefs.push(Z0),Np){var m1=Rp.mergedPolygons,t1=L(Rp.dragmode);O(la(m1,t1),Np,Rp)}_0&&om(Hp,r1)}}}function jo(ci,Hp,St){return{pointNumber:ci,searchInfo:Hp,subtract:!!St}}function lt(ci){return"pointNumber"in ci&&"searchInfo"in ci}function ut(ci){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(Hp,St,Ht,Sr){var Rp=ci.searchInfo.cd[0].trace.index,Np=Sr.cd[0].trace.index;return Np===Rp&&Ht===ci.pointNumber},isRect:!1,degenerate:!1,subtract:!!ci.subtract}}function $(ci){if(!ci.length)return;for(var Hp=[],St=lt(ci[0])?0:ci[0][0][0],Ht=St,Sr=lt(ci[0])?0:ci[0][0][1],Rp=Sr,Np=0;Np<ci.length;Np++)if(lt(ci[Np]))Hp.push(ut(ci[Np]));else{var Jp=se(ci[Np]);Jp.subtract=!!ci[Np].subtract,Hp.push(Jp),St=Math.min(St,Jp.xmin),Ht=Math.max(Ht,Jp.xmax),Sr=Math.min(Sr,Jp.ymin),Rp=Math.max(Rp,Jp.ymax)}function n0(S0,_0,w0,X0){for(var $0=!1,Z0=0;Z0<Hp.length;Z0++)Hp[Z0].contains(S0,_0,w0,X0)&&($0=!Hp[Z0].subtract);return $0}return{xmin:St,xmax:Ht,ymin:Sr,ymax:Rp,pts:[],contains:n0,isRect:!1,degenerate:!1}}function yt(ci,Hp,St){var Ht=Hp._fullLayout,Sr=St.plotinfo,Rp=St.dragmode,Np=Ht._lastSelectedSubplot&&Ht._lastSelectedSubplot===Sr.id,Jp=(ci.shiftKey||ci.altKey)&&!(T(Rp)&&L(Rp));Np&&Jp&&Sr.selection&&Sr.selection.selectionDefs&&!St.selectionDefs?(St.selectionDefs=Sr.selection.selectionDefs,St.mergedPolygons=Sr.selection.mergedPolygons):(!Jp||!Sr.selection)&&G(St),Np||(B(Hp),Ht._lastSelectedSubplot=Sr.id)}function Lt(ci){return ci._fullLayout._activeShapeIndex>=0}function ke(ci){return ci._fullLayout._activeSelectionIndex>=0}function G(ci,Hp){var St=ci.dragmode,Ht=ci.plotinfo,Sr=ci.gd;Lt(Sr)&&Sr._fullLayout._deactivateShape(Sr),ke(Sr)&&Sr._fullLayout._deactivateSelection(Sr);var Rp=Sr._fullLayout,Np=Rp._zoomlayer,Jp=T(St),n0=j(St);if(Jp||n0){var S0=Np.selectAll(".select-outline-"+Ht.id);if(S0&&Sr._fullLayout._outlining){var _0;Jp&&(_0=H(S0,ci)),_0&&h.call("_guiRelayout",Sr,{shapes:_0});var w0;n0&&!Pt(ci)&&(w0=Y(S0,ci)),w0&&(Sr._fullLayout._noEmitSelectedAtStart=!0,h.call("_guiRelayout",Sr,{selections:w0}).then(function(){Hp&&ht(Sr)})),Sr._fullLayout._outlining=!1}}Ht.selection={},Ht.selection.selectionDefs=ci.selectionDefs=[],Ht.selection.mergedPolygons=ci.mergedPolygons=[]}function ne(ci){return ci._id}function et(ci,Hp,St,Ht){if(!ci.calcdata)return[];var Sr=[],Rp=Hp.map(ne),Np=St.map(ne),Jp,n0,S0;for(S0=0;S0<ci.calcdata.length;S0++)if(Jp=ci.calcdata[S0],n0=Jp[0].trace,!(n0.visible!==!0||!n0._module||!n0._module.selectPoints))if(Pt({subplot:Ht})&&(n0.subplot===Ht||n0.geo===Ht))Sr.push(ct(n0._module,Jp,Hp[0],St[0]));else if(n0.type==="splom"){if(n0._xaxes[Rp[0]]&&n0._yaxes[Np[0]]){var _0=ct(n0._module,Jp,Hp[0],St[0]);_0.scene=ci._fullLayout._splomScenes[n0.uid],Sr.push(_0)}}else if(n0.type==="sankey"){var w0=ct(n0._module,Jp,Hp[0],St[0]);Sr.push(w0)}else{if(Rp.indexOf(n0.xaxis)===-1&&(!n0._xA||!n0._xA.overlaying)||Np.indexOf(n0.yaxis)===-1&&(!n0._yA||!n0._yA.overlaying))continue;Sr.push(ct(n0._module,Jp,Le(ci,n0.xaxis),Le(ci,n0.yaxis)))}return Sr}function ct(ci,Hp,St,Ht){return{_module:ci,cd:Hp,xaxis:St,yaxis:Ht}}function kt(ci){return ci&&Array.isArray(ci)&&ci[0].hoverOnBox!==!0}function Gt(ci,Hp){var St=ci[0],Ht=-1,Sr=[],Rp,Np;for(Np=0;Np<Hp.length;Np++)if(Rp=Hp[Np],St.fullData.index===Rp.cd[0].trace.index){if(St.hoverOnBox===!0)break;St.pointNumber!==void 0?Ht=St.pointNumber:St.binNumber!==void 0&&(Ht=St.binNumber,Sr=St.pointNumbers);break}return{pointNumber:Ht,pointNumbers:Sr,searchInfo:Rp}}function $t(ci){var Hp=ci.searchInfo.cd[0].trace,St=ci.pointNumber,Ht=ci.pointNumbers,Sr=Ht.length>0,Rp=Sr?Ht[0]:St;return Hp.selectedpoints?Hp.selectedpoints.indexOf(Rp)>-1:!1}function Ko(ci,Hp){var St=[],Ht,Sr,Rp,Np;for(Np=0;Np<ci.length;Np++)Ht=ci[Np],Ht.cd[0].trace.selectedpoints&&Ht.cd[0].trace.selectedpoints.length>0&&St.push(Ht);if(St.length===1&&(Rp=St[0]===Hp.searchInfo,Rp&&(Sr=Hp.searchInfo.cd[0].trace,Sr.selectedpoints.length===Hp.pointNumbers.length))){for(Np=0;Np<Hp.pointNumbers.length;Np++)if(Sr.selectedpoints.indexOf(Hp.pointNumbers[Np])<0)return!1;return!0}return!1}function Up(ci){var Hp=0,St,Ht,Sr;for(Sr=0;Sr<ci.length;Sr++)if(St=ci[Sr],Ht=St.cd[0].trace,Ht.selectedpoints&&(Ht.selectedpoints.length>1||(Hp+=Ht.selectedpoints.length,Hp>1)))return!1;return Hp===1}function e0(ci,Hp,St){var Ht;for(Ht=0;Ht<Hp.length;Ht++){var Sr=Hp[Ht].cd[0].trace._fullInput,Rp=ci._fullLayout._tracePreGUI[Sr.uid]||{};Rp.selectedpoints===void 0&&(Rp.selectedpoints=Sr._input.selectedpoints||null)}var Np;if(St){var Jp=St.points||[];for(Ht=0;Ht<Hp.length;Ht++)Np=Hp[Ht].cd[0].trace,Np._input.selectedpoints=Np._fullInput.selectedpoints=[],Np._fullInput!==Np&&(Np.selectedpoints=[]);for(var n0=0;n0<Jp.length;n0++){var S0=Jp[n0],_0=S0.data,w0=S0.fullData,X0=S0.pointIndex,$0=S0.pointIndices;$0?([].push.apply(_0.selectedpoints,$0),Np._fullInput!==Np&&[].push.apply(w0.selectedpoints,$0)):(_0.selectedpoints.push(X0),Np._fullInput!==Np&&w0.selectedpoints.push(X0))}}else for(Ht=0;Ht<Hp.length;Ht++)Np=Hp[Ht].cd[0].trace,delete Np.selectedpoints,delete Np._input.selectedpoints,Np._fullInput!==Np&&delete Np._fullInput.selectedpoints;E0(ci,Hp)}function E0(ci,Hp){for(var St=!1,Ht=0;Ht<Hp.length;Ht++){var Sr=Hp[Ht],Rp=Sr.cd;h.traceIs(Rp[0].trace,"regl")&&(St=!0);var Np=Sr._module,Jp=Np.styleOnSelect||Np.style;Jp&&(Jp(ci,Rp,Rp[0].node3),Rp[0].nodeRangePlot3&&Jp(ci,Rp,Rp[0].nodeRangePlot3))}St&&(nt(ci),Ze(ci))}function m0(ci,Hp,St){for(var Ht=St?v.difference:v.union,Sr=Ht({regions:ci},{regions:[Hp]}),Rp=Sr.regions.reverse(),Np=0;Np<Rp.length;Np++){var Jp=Rp[Np];Jp.subtract=I0(Jp,Rp.slice(0,Np))}return Rp}function f0(ci,Hp){if(Array.isArray(ci))for(var St=Hp.cd,Ht=Hp.cd[0].trace,Sr=0;Sr<ci.length;Sr++)ci[Sr]=w(ci[Sr],Ht,St);return ci}function la(ci,Hp){for(var St=[],Ht=0;Ht<ci.length;Ht++){St[Ht]=[];for(var Sr=0;Sr<ci[Ht].length;Sr++){St[Ht][Sr]=[],St[Ht][Sr][0]=Sr?"L":"M";for(var Rp=0;Rp<ci[Ht][Sr].length;Rp++)St[Ht][Sr].push(ci[Ht][Sr][Rp])}Hp||St[Ht].push(["Z",St[Ht][0][1],St[Ht][0][2]])}return St}function $o(ci,Hp){for(var St=[],Ht,Sr=[],Rp,Np=0;Np<Hp.length;Np++){var Jp=Hp[Np];Rp=Jp._module.selectPoints(Jp,ci),Sr.push(Rp),Ht=f0(Rp,Jp),St=St.concat(Ht)}return St}function jt(ci,Hp,St,Ht,Sr){var Rp=!!Ht,Np,Jp,n0;Sr&&(Np=Sr.plotinfo,Jp=Sr.xaxes[0]._id,n0=Sr.yaxes[0]._id);var S0=[],_0=[],w0=C0(ci),X0=ci._fullLayout;if(Np){var $0=X0._zoomlayer,Z0=X0.dragmode,Am=T(Z0),e1=j(Z0);if(Am||e1){var E1=Le(ci,Jp,"x"),N1=Le(ci,n0,"y");if(E1&&N1){var z1=$0.selectAll(".select-outline-"+Np.id);if(z1&&ci._fullLayout._outlining&&z1.length){for(var r1=z1[0][0],Lm=r1.getAttribute("d"),T1=z(Lm,ci,Np),O1=[],y1=0;y1<T1.length;y1++){for(var l1=T1[y1],m1=[],t1=0;t1<l1.length;t1++)m1.push([V0(E1,l1[t1][1]),V0(N1,l1[t1][2])]);m1.xref=Jp,m1.yref=n0,m1.subtract=I0(m1,O1),O1.push(m1)}w0=w0.concat(O1)}}}}var Z1=Jp&&n0?[Jp+n0]:X0._subplots.cartesian;Fp(ci);for(var rg={},k1=0;k1<Z1.length;k1++){var ug=Z1[k1],yg=ug.indexOf("y"),Eg=ug.slice(0,yg),Ig=ug.slice(yg),Q1=Jp&&n0?St:void 0;if(Q1=O0(w0,Eg,Ig,Q1),Q1){var Rg=Ht;if(!Rp){var cg=Le(ci,Eg,"x"),Vm=Le(ci,Ig,"y");Rg=et(ci,[cg],[Vm],ug);for(var Xg=0;Xg<Rg.length;Xg++){var Ct=Rg[Xg],Tt=Ct.cd[0],jp=Tt.trace;if(Ct._module.name==="scattergl"&&!Tt.t.xpx){var Zp=jp.x,l0=jp.y,Bp=jp._length;Tt.t.xpx=[],Tt.t.ypx=[];for(var Gp=0;Gp<Bp;Gp++)Tt.t.xpx[Gp]=cg.c2p(Zp[Gp]),Tt.t.ypx[Gp]=Vm.c2p(l0[Gp])}Ct._module.name==="splom"&&(rg[jp.uid]||(rg[jp.uid]=!0))}}var p0=$o(Q1,Rg);S0=S0.concat(p0),_0=_0.concat(Rg)}}var a0={points:S0};e0(ci,_0,a0);var D0=X0.clickmode,z0=D0.indexOf("event")>-1&&Hp;if(!Np&&Hp){var am=C0(ci,!0);if(am.length){var Ym=am[0].xref,Hm=am[0].yref;if(Ym&&Hm){var f1=H0(am),Im=k0([Le(ci,Ym,"x"),Le(ci,Hm,"y")]);Im(a0,f1)}}ci._fullLayout._noEmitSelectedAtStart?ci._fullLayout._noEmitSelectedAtStart=!1:z0&&om(ci,a0),X0._reselect=!1}if(!Np&&X0._deselect){var Jm=X0._deselect;Jp=Jm.xref,n0=Jm.yref,i0(Jp,n0,_0)||b0(ci,Jp,n0,Ht),z0&&(a0.points.length?om(ci,a0):Rm(ci)),X0._deselect=!1}return{eventData:a0,selectionTesters:St}}function Fp(ci){var Hp=ci.calcdata;if(Hp)for(var St=0;St<Hp.length;St++){var Ht=Hp[St][0],Sr=Ht.trace,Rp=ci._fullLayout._splomScenes;if(Rp){var Np=Rp[Sr.uid];Np&&(Np.selectBatch=[])}}}function i0(ci,Hp,St){for(var Ht=0;Ht<St.length;Ht++){var Sr=St[Ht];if(Sr.xaxis&&Sr.xaxis._id===ci&&Sr.yaxis&&Sr.yaxis._id===Hp)return!0}return!1}function b0(ci,Hp,St,Ht){Ht=et(ci,[Le(ci,Hp,"x")],[Le(ci,St,"y")],Hp+St);for(var Sr=0;Sr<Ht.length;Sr++){var Rp=Ht[Sr];Rp._module.selectPoints(Rp,!1)}e0(ci,Ht)}function O0(ci,Hp,St,Ht){for(var Sr,Rp=0;Rp<ci.length;Rp++){var Np=ci[Rp];if(!(Hp!==Np.xref||St!==Np.yref))if(Sr){var Jp=!!Np.subtract;Sr=m0(Sr,Np,Jp),Ht=$(Sr)}else Sr=[Np],Ht=se(Np)}return Ht}function C0(ci,Hp){for(var St=[],Ht=ci._fullLayout,Sr=Ht.selections,Rp=Sr.length,Np=0;Np<Rp;Np++)if(!(Hp&&Np!==Ht._activeSelectionIndex)){var Jp=Sr[Np];if(Jp){var n0=Jp.xref,S0=Jp.yref,_0=Le(ci,n0,"x"),w0=Le(ci,S0,"y"),X0,$0,Z0,Am,e1;if(Jp.type==="rect"){e1=[];var E1=V0(_0,Jp.x0),N1=V0(_0,Jp.x1),z1=V0(w0,Jp.y0),r1=V0(w0,Jp.y1);e1=[[E1,z1],[E1,r1],[N1,r1],[N1,z1]],X0=Math.min(E1,N1),$0=Math.max(E1,N1),Z0=Math.min(z1,r1),Am=Math.max(z1,r1),e1.xmin=X0,e1.xmax=$0,e1.ymin=Z0,e1.ymax=Am,e1.xref=n0,e1.yref=S0,e1.subtract=!1,e1.isRect=!0,St.push(e1)}else if(Jp.type==="path")for(var Lm=Jp.path.split("Z"),T1=[],O1=0;O1<Lm.length;O1++){var y1=Lm[O1];if(y1){y1+="Z";var l1=P.extractPathCoords(y1,N.paramIsX,"raw"),m1=P.extractPathCoords(y1,N.paramIsY,"raw");X0=1/0,$0=-1/0,Z0=1/0,Am=-1/0,e1=[];for(var t1=0;t1<l1.length;t1++){var Z1=V0(_0,l1[t1]),rg=V0(w0,m1[t1]);e1.push([Z1,rg]),X0=Math.min(Z1,X0),$0=Math.max(Z1,$0),Z0=Math.min(rg,Z0),Am=Math.max(rg,Am)}e1.xmin=X0,e1.xmax=$0,e1.ymin=Z0,e1.ymax=Am,e1.xref=n0,e1.yref=S0,e1.subtract=I0(e1,T1),T1.push(e1),St.push(e1)}}}}return St}function I0(ci,Hp){for(var St=!1,Ht=0;Ht<Hp.length;Ht++)for(var Sr=Hp[Ht],Rp=0;Rp<ci.length;Rp++)if(c(ci[Rp],Sr)){St=!St;break}return St}function V0(ci,Hp){return ci.type==="date"&&(Hp=Hp.replace("_"," ")),ci.type==="log"?ci.c2p(Hp):ci.r2p(Hp,null,ci.calendar)}function H0(ci){for(var Hp=ci.length,St=[],Ht=0;Ht<Hp;Ht++){var Sr=ci[Ht];St=St.concat(Sr),St=St.concat([Sr[0]])}return im(St)}function im(ci){return ci.isRect=ci.length===5&&ci[0][0]===ci[4][0]&&ci[0][1]===ci[4][1]&&ci[0][0]===ci[1][0]&&ci[2][0]===ci[3][0]&&ci[0][1]===ci[3][1]&&ci[1][1]===ci[2][1]||ci[0][1]===ci[1][1]&&ci[2][1]===ci[3][1]&&ci[0][0]===ci[3][0]&&ci[1][0]===ci[2][0],ci.isRect&&(ci.xmin=Math.min(ci[0][0],ci[2][0]),ci.xmax=Math.max(ci[0][0],ci[2][0]),ci.ymin=Math.min(ci[0][1],ci[2][1]),ci.ymax=Math.max(ci[0][1],ci[2][1])),ci}function k0(ci){return function(Hp,St){for(var Ht,Sr,Rp=0;Rp<ci.length;Rp++){var Np=ci[Rp],Jp=Np._id,n0=Jp.charAt(0);if(St.isRect){Ht||(Ht={});var S0=St[n0+"min"],_0=St[n0+"max"];S0!==void 0&&_0!==void 0&&(Ht[Jp]=[xt(Np,S0),xt(Np,_0)].sort(ie))}else Sr||(Sr={}),Sr[Jp]=St.map(Nt(Np))}Ht&&(Hp.range=Ht),Sr&&(Hp.lassoPoints=Sr)}}function fm(ci){var Hp=ci.plotinfo;return Hp.fillRangeItems||k0(ci.xaxes.concat(ci.yaxes))}function Tm(ci,Hp){ci.emit("plotly_selecting",Hp)}function om(ci,Hp){Hp&&(Hp.selections=(ci.layout||{}).selections||[]),ci.emit("plotly_selected",Hp)}function Rm(ci){ci.emit("plotly_deselect",null)}ve.exports={reselect:jt,prepSelect:xn,clearOutline:B,clearSelectionsCache:G,selectOnClick:oa}}),Dy=t((Ue,ve)=>{ve.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]}),rx=t((Ue,ve)=>{ve.exports={axisRefDescription:function(v,c,h){return["If set to a",v,"axis id (e.g. *"+v+"* or","*"+v+"2*), the `"+v+"` position refers to a",v,"coordinate. If set to *paper*, the `"+v+"`","position refers to the distance from the",c,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",c,"("+h+"). If set to a",v,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",c,"of the domain of that axis: e.g.,","*"+v+"2 domain* refers to the domain of the second",v," axis and a",v,"position of 0.5 refers to the","point between the",c,"and the",h,"of the domain of the","second",v,"axis."].join(" ")}}}),nx=t((Ue,ve)=>{var v=Dy(),c=Ut(),h=jm(),_=Nm().templatedArray;rx(),ve.exports=_("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:c({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:v.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:v.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",h.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",h.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",h.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",h.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:c({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc"})}),Tx=t((Ue,ve)=>{ve.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}}),Qx=t((Ue,ve)=>{ve.exports=function(v){return{valType:"color",editType:"style",anim:!0}}}),e2=t((Ue,ve)=>{var v=zv().axisHoverFormat,c=um().texttemplateAttrs,h=um().hovertemplateAttrs,_=R(),y=Ut(),x=h1().dash,w=h1().pattern,A=Y0(),d=Tx(),k=bt().extendFlat,T=Qx();function L(N){return{valType:"any",dflt:0,editType:"calc"}}function j(N){return{valType:"any",editType:"calc"}}function P(N){return{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"}}ve.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:L(),yperiod:L(),xperiod0:j(),yperiod0:j(),xperiodalignment:P(),yperiodalignment:P(),xhoverformat:v("x"),yhoverformat:v("y"),offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:c({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:h({},{keys:d.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:k({},x,{editType:"style"}),backoff:{valType:"number",min:0,dflt:"auto",arrayOk:!0,editType:"plot"},simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:T(!0),fillgradient:k({type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],dflt:"none",editType:"calc"},start:{valType:"number",editType:"calc"},stop:{valType:"number",editType:"calc"},colorscale:{valType:"colorscale",editType:"style"},editType:"calc"}),fillpattern:w,marker:k({symbol:{valType:"enumerated",values:A.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},angle:{valType:"angle",dflt:0,arrayOk:!0,editType:"plot",anim:!1},angleref:{valType:"enumerated",values:["previous","up"],dflt:"up",editType:"plot",anim:!1},standoff:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"plot",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:k({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},_("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},_("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:y({editType:"calc",colorEditType:"style",arrayOk:!0}),zorder:{valType:"integer",dflt:0,editType:"plot"}}}),I3=t((Ue,ve)=>{var v=nx(),c=e2().line,h=h1().dash,_=bt().extendFlat,y=Um().overrideAll,x=Nm().templatedArray;rx(),ve.exports=y(x("selection",{type:{valType:"enumerated",values:["rect","path"]},xref:_({},v.xref,{}),yref:_({},v.yref,{}),x0:{valType:"any"},x1:{valType:"any"},y0:{valType:"any"},y1:{valType:"any"},path:{valType:"string",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:.7,editType:"arraydraw"},line:{color:c.color,width:_({},c.width,{min:1,dflt:1}),dash:_({},h,{dflt:"dot"})}}),"arraydraw","from-root")}),Q5=t((Ue,ve)=>{var v=Re(),c=km(),h=Mt(),_=I3(),y=we();ve.exports=function(w,A){h(w,A,{name:"selections",handleItemDefaults:x});for(var d=A.selections,k=0;k<d.length;k++){var T=d[k];T&&T.path===void 0&&(T.x0===void 0||T.x1===void 0||T.y0===void 0||T.y1===void 0)&&(A.selections[k]=null)}};function x(w,A,d){function k(nt,Ze){return v.coerce(w,A,_,nt,Ze)}var T=k("path"),L=T?"path":"rect",j=k("type",L),P=j!=="path";P&&delete A.path,k("opacity"),k("line.color"),k("line.width"),k("line.dash");for(var N=["x","y"],O=0;O<2;O++){var B=N[O],S={_fullLayout:d},D,z,H,Y=c.coerceRef(w,A,S,B);if(D=c.getFromId(S,Y),D._selectionIndices.push(A._index),H=y.rangeToShapePosition(D),z=y.shapePositionToRange(D),P){var ht=B+"0",Se=B+"1",ie=w[ht],X=w[Se];w[ht]=z(w[ht],!0),w[Se]=z(w[Se],!0),c.coercePosition(A,S,k,Y,ht),c.coercePosition(A,S,k,Y,Se);var ft=A[ht],Le=A[Se];ft!==void 0&&Le!==void 0&&(A[ht]=H(ft),A[Se]=H(Le),w[ht]=ie,w[Se]=X)}}P&&v.noneOrAll(w,A,["x0","x1","y0","y1"])}}),ew=t((Ue,ve)=>{ve.exports=function(v,c,h){h("newselection.mode");var _=h("newselection.line.width");_&&(h("newselection.line.color"),h("newselection.line.dash")),h("activeselection.fillcolor"),h("activeselection.opacity")}}),D_=t((Ue,ve)=>{var v=p1(),c=Re(),h=A1();ve.exports=function(_){return function(y,x){var w=y[_];if(Array.isArray(w))for(var A=v.subplotsRegistry.cartesian,d=A.idRegex,k=x._subplots,T=k.xaxis,L=k.yaxis,j=k.cartesian,P=x._has("cartesian"),N=0;N<w.length;N++){var O=w[N];if(c.isPlainObject(O)){var B=h.cleanId(O.xref,"x",!1),S=h.cleanId(O.yref,"y",!1),D=d.x.test(B),z=d.y.test(S);if(D||z){P||c.pushUnique(x._basePlotModules,A);var H=!1;D&&T.indexOf(B)===-1&&(T.push(B),H=!0),z&&L.indexOf(S)===-1&&(L.push(S),H=!0),H&&D&&z&&j.push(B+S)}}}}}}),X2=t((Ue,ve)=>{var v=oy(),c=pv();ve.exports={moduleType:"component",name:"selections",layoutAttributes:I3(),supplyLayoutDefaults:Q5(),supplyDrawNewSelectionDefaults:ew(),includeBasePlot:D_()("selections"),draw:v.draw,drawOne:v.drawOne,reselect:c.reselect,prepSelect:c.prepSelect,clearOutline:c.clearOutline,clearSelectionsCache:c.clearSelectionsCache,selectOnClick:c.selectOnClick}}),$y=t((Ue,ve)=>{var v=l(),c=Re(),h=c.numberFormat,_=wt(),y=C1(),x=p1(),w=c.strTranslate,A=j1(),d=sa(),k=Y0(),T=Zv(),L=km(),j=W1(),P=Km(),N=ry(),O=N.selectingOrDrawing,B=N.freeMode,S=$1().FROM_TL,D=my(),z=V1().redrawReglTraces,H=lg(),Y=A1().getFromId,ht=X2().prepSelect,Se=X2().clearOutline,ie=X2().selectOnClick,X=Wg(),ft=jm(),Le=ft.MINDRAG,nt=ft.MINZOOM,Ze=!0;function rt(ct,kt,Gt,$t,Ko,Up,e0,E0){var m0=ct._fullLayout._zoomlayer,f0=e0+E0==="nsew",la=(e0+E0).length===1,$o,jt,Fp,i0,b0,O0,C0,I0,V0,H0,im,k0,fm,Tm,om,Rm,ci,Hp,St,Ht,Sr,Rp,Np;Gt+=kt.yaxis._shift;function Jp(){if($o=kt.xaxis,jt=kt.yaxis,V0=$o._length,H0=jt._length,C0=$o._offset,I0=jt._offset,Fp={},Fp[$o._id]=$o,i0={},i0[jt._id]=jt,e0&&E0)for(var Tt=kt.overlays,jp=0;jp<Tt.length;jp++){var Zp=Tt[jp].xaxis;Fp[Zp._id]=Zp;var l0=Tt[jp].yaxis;i0[l0._id]=l0}b0=et(Fp),O0=et(i0),fm=se(b0,E0),Tm=se(O0,e0),om=!Tm&&!fm,k0=G(ct,ct._fullLayout._axisMatchGroups,Fp,i0),im=G(ct,ct._fullLayout._axisConstraintGroups,Fp,i0,k0);var Bp=im.isSubplotConstrained||k0.isSubplotConstrained;Rm=E0||Bp,ci=e0||Bp;var Gp=ct._fullLayout;Hp=Gp._has("scattergl"),St=Gp._has("splom"),Ht=Gp._has("svg")}Jp();var n0=Pt(Tm+fm,ct._fullLayout.dragmode,f0),S0=pt(kt,e0+E0+"drag",n0,Gt,$t,Ko,Up);if(om&&!f0)return S0.onmousedown=null,S0.style.pointerEvents="none",S0;var _0={element:S0,gd:ct,plotinfo:kt};_0.prepFn=function(Tt,jp,Zp){var l0=_0.dragmode,Bp=ct._fullLayout.dragmode;Bp!==l0&&(_0.dragmode=Bp),Jp(),Rp=ct._fullLayout._invScaleX,Np=ct._fullLayout._invScaleY,om||(f0?Tt.shiftKey?Bp==="pan"?Bp="zoom":O(Bp)||(Bp="pan"):Tt.ctrlKey&&(Bp="pan"):Bp="pan"),B(Bp)?_0.minDrag=1:_0.minDrag=void 0,O(Bp)?(_0.xaxes=b0,_0.yaxes=O0,ht(Tt,jp,Zp,_0,Bp)):(_0.clickFn=X0,O(l0)&&w0(),om||(Bp==="zoom"?(_0.moveFn=y1,_0.doneFn=m1,_0.minDrag=1,O1(Tt,jp,Zp)):Bp==="pan"&&(_0.moveFn=yg,_0.doneFn=Rg))),ct._fullLayout._redrag=function(){var Gp=ct._dragdata;if(Gp&&Gp.element===S0){var p0=ct._fullLayout.dragmode;O(p0)||(Jp(),cg([0,0,V0,H0]),_0.moveFn(Gp.dx,Gp.dy))}}};function w0(){_0.plotinfo.selection=!1,Se(ct)}function X0(Tt,jp){var Zp=_0.gd;if(Zp._fullLayout._activeShapeIndex>=0){Zp._fullLayout._deactivateShape(Zp);return}var l0=Zp._fullLayout.clickmode;if(ut(Zp),Tt===2&&!la&&Q1(),f0)l0.indexOf("select")>-1&&ie(jp,Zp,b0,O0,kt.id,_0),l0.indexOf("event")>-1&&T.click(Zp,jp,kt.id);else if(Tt===1&&la){var Bp=e0?jt:$o,Gp=e0==="s"||E0==="w"?0:1,p0=Bp._name+".range["+Gp+"]",a0=gt(Bp,Gp),D0="left",z0="middle";if(Bp.fixedrange)return;e0?(z0=e0==="n"?"top":"bottom",Bp.side==="right"&&(D0="right")):E0==="e"&&(D0="right"),Zp._context.showAxisRangeEntryBoxes&&v.select(S0).call(A.makeEditable,{gd:Zp,immediate:!0,background:Zp._fullLayout.paper_bgcolor,text:String(a0),fill:Bp.tickfont?Bp.tickfont.color:"#444",horizontalAlign:D0,verticalAlign:z0}).on("edit",function(am){var Ym=Bp.d2r(am);Ym!==void 0&&x.call("_guiRelayout",Zp,p0,Ym)})}}P.init(_0);var $0,Z0,Am,e1,E1,N1,z1,r1,Lm,T1;function O1(Tt,jp,Zp){var l0=S0.getBoundingClientRect();$0=jp-l0.left,Z0=Zp-l0.top,ct._fullLayout._calcInverseTransform(ct);var Bp=c.apply3DTransform(ct._fullLayout._invTransform)($0,Z0);$0=Bp[0],Z0=Bp[1],Am={l:$0,r:$0,w:0,t:Z0,b:Z0,h:0},e1=ct._hmpixcount?ct._hmlumcount/ct._hmpixcount:_(ct._fullLayout.plot_bgcolor).getLuminance(),E1="M0,0H"+V0+"V"+H0+"H0V0",N1=!1,z1="xy",T1=!1,r1=xn(m0,e1,C0,I0,E1),Lm=oa(m0,C0,I0)}function y1(Tt,jp){if(ct._transitioningWithDuration)return!1;var Zp=Math.max(0,Math.min(V0,Rp*Tt+$0)),l0=Math.max(0,Math.min(H0,Np*jp+Z0)),Bp=Math.abs(Zp-$0),Gp=Math.abs(l0-Z0);Am.l=Math.min($0,Zp),Am.r=Math.max($0,Zp),Am.t=Math.min(Z0,l0),Am.b=Math.max(Z0,l0);function p0(){z1="",Am.r=Am.l,Am.t=Am.b,Lm.attr("d","M0,0Z")}if(im.isSubplotConstrained)Bp>nt||Gp>nt?(z1="xy",Bp/V0>Gp/H0?(Gp=Bp*H0/V0,Z0>l0?Am.t=Z0-Gp:Am.b=Z0+Gp):(Bp=Gp*V0/H0,$0>Zp?Am.l=$0-Bp:Am.r=$0+Bp),Lm.attr("d",ke(Am))):p0();else if(k0.isSubplotConstrained)if(Bp>nt||Gp>nt){z1="xy";var a0=Math.min(Am.l/V0,(H0-Am.b)/H0),D0=Math.max(Am.r/V0,(H0-Am.t)/H0);Am.l=a0*V0,Am.r=D0*V0,Am.b=(1-a0)*H0,Am.t=(1-D0)*H0,Lm.attr("d",ke(Am))}else p0();else!Tm||Gp<Math.min(Math.max(Bp*.6,Le),nt)?Bp<Le||!fm?p0():(Am.t=0,Am.b=H0,z1="x",Lm.attr("d",yt(Am,Z0))):!fm||Bp<Math.min(Gp*.6,nt)?(Am.l=0,Am.r=V0,z1="y",Lm.attr("d",Lt(Am,$0))):(z1="xy",Lm.attr("d",ke(Am)));Am.w=Am.r-Am.l,Am.h=Am.b-Am.t,z1&&(T1=!0),ct._dragged=T1,jo(r1,Lm,Am,E1,N1,e1),l1(),ct.emit("plotly_relayouting",Sr),N1=!0}function l1(){Sr={},(z1==="xy"||z1==="x")&&(xt(b0,Am.l/V0,Am.r/V0,Sr,im.xaxes),Eg("x",Sr)),(z1==="xy"||z1==="y")&&(xt(O0,(H0-Am.b)/H0,(H0-Am.t)/H0,Sr,im.yaxes),Eg("y",Sr))}function m1(){l1(),ut(ct),Rg(),$(ct)}var t1=[0,0,V0,H0],Z1=null,rg=ft.REDRAWDELAY,k1=kt.mainplot?ct._fullLayout._plots[kt.mainplot]:kt;function ug(Tt){if(!ct._context._scrollZoom.cartesian&&!ct._fullLayout._enablescrollzoom)return;if(w0(),ct._transitioningWithDuration){Tt.preventDefault(),Tt.stopPropagation();return}Jp(),clearTimeout(Z1);var jp=-Tt.deltaY;if(isFinite(jp)||(jp=Tt.wheelDelta/10),!isFinite(jp)){c.log("Did not find wheel motion attributes: ",Tt);return}var Zp=Math.exp(-Math.min(Math.max(jp,-20),20)/200),l0=k1.draglayer.select(".nsewdrag").node().getBoundingClientRect(),Bp=(Tt.clientX-l0.left)/l0.width,Gp=(l0.bottom-Tt.clientY)/l0.height,p0;function a0(D0,z0,am){if(D0.fixedrange)return;var Ym=c.simpleMap(D0.range,D0.r2l),Hm=Ym[0]+(Ym[1]-Ym[0])*z0;function f1(Im){return D0.l2r(Hm+(Im-Hm)*am)}D0.range=Ym.map(f1)}if(Rm){for(E0||(Bp=.5),p0=0;p0<b0.length;p0++)a0(b0[p0],Bp,Zp);Eg("x"),t1[2]*=Zp,t1[0]+=t1[2]*Bp*(1/Zp-1)}if(ci){for(e0||(Gp=.5),p0=0;p0<O0.length;p0++)a0(O0[p0],Gp,Zp);Eg("y"),t1[3]*=Zp,t1[1]+=t1[3]*(1-Gp)*(1/Zp-1)}cg(t1),Ig(),ct.emit("plotly_relayouting",Sr),Z1=setTimeout(function(){ct._fullLayout&&(t1=[0,0,V0,H0],Rg())},rg),Tt.preventDefault()}e0.length*E0.length!==1&&ne(S0,ug);function yg(Tt,jp){if(Tt=Tt*Rp,jp=jp*Np,ct._transitioningWithDuration)return;if(ct._fullLayout._replotting=!0,fm==="ew"||Tm==="ns"){var Zp=fm?-Tt:0,l0=Tm?-jp:0;if(k0.isSubplotConstrained){if(fm&&Tm){var Bp=(Tt/V0-jp/H0)/2;Tt=Bp*V0,jp=-Bp*H0,Zp=-Tt,l0=-jp}Tm?Zp=-l0*V0/H0:l0=-Zp*H0/V0}fm&&(Nt(b0,Tt),Eg("x")),Tm&&(Nt(O0,jp),Eg("y")),cg([Zp,l0,V0,H0]),Ig(),ct.emit("plotly_relayouting",Sr);return}function Gp(f1,Im,Jm){for(var R1=1-Im,Ng,B1,av=0;av<f1.length;av++){var dg=f1[av];if(!dg.fixedrange){Ng=dg,B1=dg._rl[R1]+(dg._rl[Im]-dg._rl[R1])/Rt(Jm/dg._length);var sv=dg.l2r(B1);sv!==!1&&sv!==void 0&&(dg.range[Im]=sv)}}return Ng._length*(Ng._rl[Im]-B1)/(Ng._rl[Im]-Ng._rl[R1])}var p0=fm==="w"==(Tm==="n")?1:-1;if(fm&&Tm&&(im.isSubplotConstrained||k0.isSubplotConstrained)){var a0=(Tt/V0+p0*jp/H0)/2;Tt=a0*V0,jp=p0*a0*H0}var D0,z0;if(fm==="w"?Tt=Gp(b0,0,Tt):fm==="e"?Tt=Gp(b0,1,-Tt):fm||(Tt=0),Tm==="n"?jp=Gp(O0,1,jp):Tm==="s"?jp=Gp(O0,0,-jp):Tm||(jp=0),D0=fm==="w"?Tt:0,z0=Tm==="n"?jp:0,im.isSubplotConstrained&&!k0.isSubplotConstrained||k0.isSubplotConstrained&&fm&&Tm&&p0>0){var am;if(k0.isSubplotConstrained||!fm&&Tm.length===1){for(am=0;am<b0.length;am++)b0[am].range=b0[am]._r.slice(),X(b0[am],1-jp/H0);Tt=jp*V0/H0,D0=Tt/2}if(k0.isSubplotConstrained||!Tm&&fm.length===1){for(am=0;am<O0.length;am++)O0[am].range=O0[am]._r.slice(),X(O0[am],1-Tt/V0);jp=Tt*H0/V0,z0=jp/2}}(!k0.isSubplotConstrained||!Tm)&&Eg("x"),(!k0.isSubplotConstrained||!fm)&&Eg("y");var Ym=V0-Tt,Hm=H0-jp;k0.isSubplotConstrained&&!(fm&&Tm)&&(fm?(z0=D0?0:Tt*H0/V0,Hm=Ym*H0/V0):(D0=z0?0:jp*V0/H0,Ym=Hm*V0/H0)),cg([D0,z0,Ym,Hm]),Ig(),ct.emit("plotly_relayouting",Sr)}function Eg(Tt,jp){for(var Zp=k0.isSubplotConstrained?{x:O0,y:b0}[Tt]:k0[Tt+"axes"],l0=k0.isSubplotConstrained?{x:b0,y:O0}[Tt]:[],Bp=0;Bp<Zp.length;Bp++){var Gp=Zp[Bp],p0=Gp._id,a0=k0.xLinks[p0]||k0.yLinks[p0],D0=l0[0]||Fp[a0]||i0[a0];D0&&(jp?(jp[Gp._name+".range[0]"]=jp[D0._name+".range[0]"],jp[Gp._name+".range[1]"]=jp[D0._name+".range[1]"]):Gp.range=D0.range.slice())}}function Ig(){var Tt=[],jp;function Zp(p0){for(jp=0;jp<p0.length;jp++)p0[jp].fixedrange||Tt.push(p0[jp]._id)}function l0(p0,a0){for(jp=0;jp<p0.length;jp++){var D0=p0[jp],z0=D0[a0];!D0.fixedrange&&z0.tickmode==="sync"&&Tt.push(z0._id)}}for(Rm&&(Zp(b0),Zp(im.xaxes),Zp(k0.xaxes),l0(kt.overlays,"xaxis")),ci&&(Zp(O0),Zp(im.yaxes),Zp(k0.yaxes),l0(kt.overlays,"yaxis")),Sr={},jp=0;jp<Tt.length;jp++){var Bp=Tt[jp],Gp=Y(ct,Bp);L.drawOne(ct,Gp,{skipTitle:!0}),Sr[Gp._name+".range[0]"]=Gp.range[0],Sr[Gp._name+".range[1]"]=Gp.range[1]}L.redrawComponents(ct,Tt)}function Q1(){if(!ct._transitioningWithDuration){var Tt=ct._context.doubleClick,jp=[];fm&&(jp=jp.concat(b0)),Tm&&(jp=jp.concat(O0)),k0.xaxes&&(jp=jp.concat(k0.xaxes)),k0.yaxes&&(jp=jp.concat(k0.yaxes));var Zp={},l0,Bp;if(Tt==="reset+autosize")for(Tt="autosize",Bp=0;Bp<jp.length;Bp++){l0=jp[Bp];var Gp=l0._rangeInitial0,p0=l0._rangeInitial1,a0=Gp!==void 0||p0!==void 0;if(a0&&(Gp!==void 0&&Gp!==l0.range[0]||p0!==void 0&&p0!==l0.range[1])||!a0&&l0.autorange!==!0){Tt="reset";break}}if(Tt==="autosize")for(Bp=0;Bp<jp.length;Bp++)l0=jp[Bp],l0.fixedrange||(Zp[l0._name+".autorange"]=!0);else if(Tt==="reset"){for((fm||im.isSubplotConstrained)&&(jp=jp.concat(im.xaxes)),Tm&&!im.isSubplotConstrained&&(jp=jp.concat(im.yaxes)),im.isSubplotConstrained&&(fm?Tm||(jp=jp.concat(O0)):jp=jp.concat(b0)),Bp=0;Bp<jp.length;Bp++)if(l0=jp[Bp],!l0.fixedrange){var D0=l0._name,z0=l0._autorangeInitial;l0._rangeInitial0===void 0&&l0._rangeInitial1===void 0?Zp[D0+".autorange"]=!0:l0._rangeInitial0===void 0?(Zp[D0+".autorange"]=z0,Zp[D0+".range"]=[null,l0._rangeInitial1]):l0._rangeInitial1===void 0?(Zp[D0+".range"]=[l0._rangeInitial0,null],Zp[D0+".autorange"]=z0):Zp[D0+".range"]=[l0._rangeInitial0,l0._rangeInitial1]}}ct.emit("plotly_doubleclick",null),x.call("_guiRelayout",ct,Zp)}}function Rg(){cg([0,0,V0,H0]),c.syncOrAsync([H.previousPromises,function(){ct._fullLayout._replotting=!1,x.call("_guiRelayout",ct,Sr)}],ct)}function cg(Tt){var jp=ct._fullLayout,Zp=jp._plots,l0=jp._subplots.cartesian,Bp,Gp,p0,a0;if(St&&x.subplotsRegistry.splom.drag(ct),Hp){for(Bp=0;Bp<l0.length;Bp++)if(Gp=Zp[l0[Bp]],p0=Gp.xaxis,a0=Gp.yaxis,Gp._scene){p0.limitRange&&p0.limitRange(),a0.limitRange&&a0.limitRange();var D0=c.simpleMap(p0.range,p0.r2l),z0=c.simpleMap(a0.range,a0.r2l);Gp._scene.update({range:[D0[0],z0[0],D0[1],z0[1]]})}}if((St||Hp)&&(D(ct),z(ct)),Ht){var am=Tt[2]/$o._length,Ym=Tt[3]/jt._length;for(Bp=0;Bp<l0.length;Bp++){Gp=Zp[l0[Bp]],p0=Gp.xaxis,a0=Gp.yaxis;var Hm=(Rm||k0.isSubplotConstrained)&&!p0.fixedrange&&Fp[p0._id],f1=(ci||k0.isSubplotConstrained)&&!a0.fixedrange&&i0[a0._id],Im,Jm,R1,Ng;if(Hm?(Im=am,R1=E0||k0.isSubplotConstrained?Tt[0]:Ct(p0,Im)):k0.xaHash[p0._id]?(Im=am,R1=Tt[0]*p0._length/$o._length):k0.yaHash[p0._id]?(Im=Ym,R1=Tm==="ns"?-Tt[1]*p0._length/jt._length:Ct(p0,Im,{n:"top",s:"bottom"}[Tm])):(Im=Vm(p0,am,Ym),R1=Xg(p0,Im)),Im>1&&(p0.maxallowed!==void 0&&Rm===(p0.range[0]<p0.range[1]?"e":"w")||p0.minallowed!==void 0&&Rm===(p0.range[0]<p0.range[1]?"w":"e"))&&(Im=1,R1=0),f1?(Jm=Ym,Ng=e0||k0.isSubplotConstrained?Tt[1]:Ct(a0,Jm)):k0.yaHash[a0._id]?(Jm=Ym,Ng=Tt[1]*a0._length/jt._length):k0.xaHash[a0._id]?(Jm=am,Ng=fm==="ew"?-Tt[0]*a0._length/$o._length:Ct(a0,Jm,{e:"right",w:"left"}[fm])):(Jm=Vm(a0,am,Ym),Ng=Xg(a0,Jm)),Jm>1&&(a0.maxallowed!==void 0&&ci===(a0.range[0]<a0.range[1]?"n":"s")||a0.minallowed!==void 0&&ci===(a0.range[0]<a0.range[1]?"s":"n"))&&(Jm=1,Ng=0),!(!Im&&!Jm)){Im||(Im=1),Jm||(Jm=1);var B1=p0._offset-R1/Im,av=a0._offset-Ng/Jm;Gp.clipRect.call(k.setTranslate,R1,Ng).call(k.setScale,Im,Jm),Gp.plot.call(k.setTranslate,B1,av).call(k.setScale,1/Im,1/Jm),(Im!==Gp.xScaleFactor||Jm!==Gp.yScaleFactor)&&(k.setPointGroupScale(Gp.zoomScalePts,Im,Jm),k.setTextPointsScale(Gp.zoomScaleTxt,Im,Jm)),k.hideOutsideRangePoints(Gp.clipOnAxisFalseTraces,Gp),Gp.xScaleFactor=Im,Gp.yScaleFactor=Jm}}}}function Vm(Tt,jp,Zp){return Tt.fixedrange?0:Rm&&im.xaHash[Tt._id]?jp:ci&&(im.isSubplotConstrained?im.xaHash:im.yaHash)[Tt._id]?Zp:0}function Xg(Tt,jp){return jp?(Tt.range=Tt._r.slice(),X(Tt,jp),Ct(Tt,jp)):0}function Ct(Tt,jp,Zp){return Tt._length*(1-jp)*S[Zp||Tt.constraintoward||"middle"]}return S0}function dt(ct,kt,Gt,$t){var Ko=c.ensureSingle(ct.draglayer,kt,Gt,function(Up){Up.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",ct.id)});return Ko.call(j,$t),Ko.node()}function pt(ct,kt,Gt,$t,Ko,Up,e0){var E0=dt(ct,"rect",kt,Gt);return v.select(E0).call(k.setRect,$t,Ko,Up,e0),E0}function se(ct,kt){for(var Gt=0;Gt<ct.length;Gt++)if(!ct[Gt].fixedrange)return kt;return""}function gt(ct,kt){var Gt=ct.range[kt],$t=Math.abs(Gt-ct.range[1-kt]),Ko;return ct.type==="date"?Gt:ct.type==="log"?(Ko=Math.ceil(Math.max(0,-Math.log($t)/Math.LN10))+3,h("."+Ko+"g")(Math.pow(10,Gt))):(Ko=Math.floor(Math.log(Math.abs(Gt))/Math.LN10)-Math.floor(Math.log($t)/Math.LN10)+4,h("."+String(Ko)+"g")(Gt))}function xt(ct,kt,Gt,$t,Ko){for(var Up=0;Up<ct.length;Up++){var e0=ct[Up];if(!e0.fixedrange)if(e0.rangebreaks){var E0=e0._id.charAt(0)==="y",m0=E0?1-kt:kt,f0=E0?1-Gt:Gt;$t[e0._name+".range[0]"]=e0.l2r(e0.p2l(m0*e0._length)),$t[e0._name+".range[1]"]=e0.l2r(e0.p2l(f0*e0._length))}else{var la=e0._rl[0],$o=e0._rl[1]-la;$t[e0._name+".range[0]"]=e0.l2r(la+$o*kt),$t[e0._name+".range[1]"]=e0.l2r(la+$o*Gt)}}if(Ko&&Ko.length){var jt=(kt+(1-Gt))/2;xt(Ko,jt,1-jt,$t,[])}}function Nt(ct,kt){for(var Gt=0;Gt<ct.length;Gt++){var $t=ct[Gt];if(!$t.fixedrange){if($t.rangebreaks){var Ko=0,Up=$t._length,e0=$t.p2l(Ko+kt)-$t.p2l(Ko),E0=$t.p2l(Up+kt)-$t.p2l(Up),m0=(e0+E0)/2;$t.range=[$t.l2r($t._rl[0]-m0),$t.l2r($t._rl[1]-m0)]}else $t.range=[$t.l2r($t._rl[0]-kt/$t._m),$t.l2r($t._rl[1]-kt/$t._m)];$t.limitRange&&$t.limitRange()}}}function Rt(ct){return 1-(ct>=0?Math.min(ct,.9):1/(1/Math.max(ct,-.3)+3.222))}function Pt(ct,kt,Gt){return ct?ct==="nsew"?Gt?"":kt==="pan"?"move":"crosshair":ct.toLowerCase()+"-resize":"pointer"}function xn(ct,kt,Gt,$t,Ko){return ct.append("path").attr("class","zoombox").style({fill:kt>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",w(Gt,$t)).attr("d",Ko+"Z")}function oa(ct,kt,Gt){return ct.append("path").attr("class","zoombox-corners").style({fill:d.background,stroke:d.defaultLine,"stroke-width":1,opacity:0}).attr("transform",w(kt,Gt)).attr("d","M0,0Z")}function jo(ct,kt,Gt,$t,Ko,Up){ct.attr("d",$t+"M"+Gt.l+","+Gt.t+"v"+Gt.h+"h"+Gt.w+"v-"+Gt.h+"h-"+Gt.w+"Z"),lt(ct,kt,Ko,Up)}function lt(ct,kt,Gt,$t){Gt||(ct.transition().style("fill",$t>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),kt.transition().style("opacity",1).duration(200))}function ut(ct){v.select(ct).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function $(ct){Ze&&ct.data&&ct._context.showTips&&(c.notifier(c._(ct,"Double-click to zoom back out"),"long"),Ze=!1)}function yt(ct,kt){return"M"+(ct.l-.5)+","+(kt-nt-.5)+"h-3v"+(2*nt+1)+"h3ZM"+(ct.r+.5)+","+(kt-nt-.5)+"h3v"+(2*nt+1)+"h-3Z"}function Lt(ct,kt){return"M"+(kt-nt-.5)+","+(ct.t-.5)+"v-3h"+(2*nt+1)+"v3ZM"+(kt-nt-.5)+","+(ct.b+.5)+"v3h"+(2*nt+1)+"v-3Z"}function ke(ct){var kt=Math.floor(Math.min(ct.b-ct.t,ct.r-ct.l,nt)/2);return"M"+(ct.l-3.5)+","+(ct.t-.5+kt)+"h3v"+-kt+"h"+kt+"v-3h-"+(kt+3)+"ZM"+(ct.r+3.5)+","+(ct.t-.5+kt)+"h-3v"+-kt+"h"+-kt+"v-3h"+(kt+3)+"ZM"+(ct.r+3.5)+","+(ct.b+.5-kt)+"h-3v"+kt+"h"+-kt+"v3h"+(kt+3)+"ZM"+(ct.l-3.5)+","+(ct.b+.5-kt)+"h3v"+kt+"h"+kt+"v3h-"+(kt+3)+"Z"}function G(ct,kt,Gt,$t,Ko){for(var Up=!1,e0={},E0={},m0,f0,la,$o,jt=(Ko||{}).xaHash,Fp=(Ko||{}).yaHash,i0=0;i0<kt.length;i0++){var b0=kt[i0];for(m0 in Gt)if(b0[m0]){for(la in b0)!(Ko&&(jt[la]||Fp[la]))&&!(la.charAt(0)==="x"?Gt:$t)[la]&&(e0[la]=m0);for(f0 in $t)!(Ko&&(jt[f0]||Fp[f0]))&&b0[f0]&&(Up=!0)}for(f0 in $t)if(b0[f0])for($o in b0)!(Ko&&(jt[$o]||Fp[$o]))&&!($o.charAt(0)==="x"?Gt:$t)[$o]&&(E0[$o]=f0)}Up&&(c.extendFlat(e0,E0),E0={});var O0={},C0=[];for(la in e0){var I0=Y(ct,la);C0.push(I0),O0[I0._id]=I0}var V0={},H0=[];for($o in E0){var im=Y(ct,$o);H0.push(im),V0[im._id]=im}return{xaHash:O0,yaHash:V0,xaxes:C0,yaxes:H0,xLinks:e0,yLinks:E0,isSubplotConstrained:Up}}function ne(ct,kt){if(!y)ct.onwheel!==void 0?ct.onwheel=kt:ct.onmousewheel!==void 0?ct.onmousewheel=kt:ct.isAddedWheelEvent||(ct.isAddedWheelEvent=!0,ct.addEventListener("wheel",kt,{passive:!1}));else{var Gt=ct.onwheel!==void 0?"wheel":"mousewheel";ct._onwheel&&ct.removeEventListener(Gt,ct._onwheel),ct._onwheel=kt,ct.addEventListener(Gt,kt,{passive:!1})}}function et(ct){var kt=[];for(var Gt in ct)kt.push(ct[Gt]);return kt}ve.exports={makeDragBox:rt,makeDragger:dt,makeRectDragger:pt,makeZoombox:xn,makeCorners:oa,updateZoombox:jo,xyCorners:ke,transitionZoombox:lt,removeZoombox:ut,showDoubleClickNotifier:$,attachWheelEventHandler:ne}}),v2=t(Ue=>{var ve=l(),v=Zv(),c=Km(),h=W1(),_=$y().makeDragBox,y=jm().DRAGGERSIZE;Ue.initInteractions=function(x){var w=x._fullLayout;if(x._context.staticPlot){ve.select(x).selectAll(".drag").remove();return}if(!(!w._has("cartesian")&&!w._has("splom"))){var A=Object.keys(w._plots||{}).sort(function(k,T){if((w._plots[k].mainplot&&!0)===(w._plots[T].mainplot&&!0)){var L=k.split("y"),j=T.split("y");return L[0]===j[0]?Number(L[1]||1)-Number(j[1]||1):Number(L[0]||1)-Number(j[0]||1)}return w._plots[k].mainplot?1:-1});A.forEach(function(k){var T=w._plots[k],L=T.xaxis,j=T.yaxis;if(!T.mainplot){var P=_(x,T,L._offset,j._offset,L._length,j._length,"ns","ew");P.onmousemove=function(B){x._fullLayout._rehover=function(){x._fullLayout._hoversubplot===k&&x._fullLayout._plots[k]&&v.hover(x,B,k)},v.hover(x,B,k),x._fullLayout._lasthover=P,x._fullLayout._hoversubplot=k},P.onmouseout=function(B){x._dragging||(x._fullLayout._hoversubplot=null,c.unhover(x,B))},x._context.showAxisDragHandles&&(_(x,T,L._offset-y,j._offset-y,y,y,"n","w"),_(x,T,L._offset+L._length,j._offset-y,y,y,"n","e"),_(x,T,L._offset-y,j._offset+j._length,y,y,"s","w"),_(x,T,L._offset+L._length,j._offset+j._length,y,y,"s","e"))}if(x._context.showAxisDragHandles){if(k===L._mainSubplot){var N=L._mainLinePosition;L.side==="top"&&(N-=y),_(x,T,L._offset+L._length*.1,N,L._length*.8,y,"","ew"),_(x,T,L._offset,N,L._length*.1,y,"","w"),_(x,T,L._offset+L._length*.9,N,L._length*.1,y,"","e")}if(k===j._mainSubplot){var O=j._mainLinePosition;j.side!=="right"&&(O-=y),_(x,T,O,j._offset+j._length*.1,y,j._length*.8,"ns",""),_(x,T,O,j._offset+j._length*.9,y,j._length*.1,"s",""),_(x,T,O,j._offset,y,j._length*.1,"n","")}}});var d=w._hoverlayer.node();d.onmousemove=function(k){k.target=x._fullLayout._lasthover,v.hover(x,k,w._hoversubplot)},d.onclick=function(k){k.target=x._fullLayout._lasthover,v.click(x,k)},d.onmousedown=function(k){x._fullLayout._lasthover.onmousedown(k)},Ue.updateFx(x)}},Ue.updateFx=function(x){var w=x._fullLayout,A=w.dragmode==="pan"?"move":"crosshair";h(w._draggers,A)}}),U3=t((Ue,ve)=>{var v=p1();ve.exports=function(c){for(var h=v.layoutArrayContainers,_=v.layoutArrayRegexes,y=c.split("[")[0],x,w,A=0;A<_.length;A++)if(w=c.match(_[A]),w&&w.index===0){x=w[0];break}if(x||(x=h[h.indexOf(y)]),!x)return!1;var d=c.substr(x.length);return d?(w=d.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/),w?{array:x,index:Number(w[1]),property:w[3]||""}:!1):{array:x,index:"",property:""}}}),F3=t(Ue=>{var ve=V(),v=Pp(),c=h0(),h=Cv().sorterAsc,_=p1();Ue.containerArrayMatch=U3();var y=Ue.isAddVal=function(w){return w==="add"||ve(w)},x=Ue.isRemoveVal=function(w){return w===null||w==="remove"};Ue.applyContainerArrayChanges=function(w,A,d,k,T){var L=A.astr,j=_.getComponentMethod(L,"supplyLayoutDefaults"),P=_.getComponentMethod(L,"draw"),N=_.getComponentMethod(L,"drawOne"),O=k.replot||k.recalc||j===v||P===v,B=w.layout,S=w._fullLayout;if(d[""]){Object.keys(d).length>1&&c.warn("Full array edits are incompatible with other edits",L);var D=d[""][""];if(x(D))A.set(null);else if(Array.isArray(D))A.set(D);else return c.warn("Unrecognized full array edit value",L,D),!0;return O?!1:(j(B,S),P(w),!0)}var z=Object.keys(d).map(Number).sort(h),H=A.get(),Y=H||[],ht=T(S,L).get(),Se=[],ie=-1,X=Y.length,ft,Le,nt,Ze,rt,dt,pt,se;for(ft=0;ft<z.length;ft++){if(nt=z[ft],Ze=d[nt],rt=Object.keys(Ze),dt=Ze[""],pt=y(dt),nt<0||nt>Y.length-(pt?0:1)){c.warn("index out of range",L,nt);continue}if(dt!==void 0)rt.length>1&&c.warn("Insertion & removal are incompatible with edits to the same index.",L,nt),x(dt)?Se.push(nt):pt?(dt==="add"&&(dt={}),Y.splice(nt,0,dt),ht&&ht.splice(nt,0,{})):c.warn("Unrecognized full object edit value",L,nt,dt),ie===-1&&(ie=nt);else for(Le=0;Le<rt.length;Le++)se=L+"["+nt+"].",T(Y[nt],rt[Le],se).set(Ze[rt[Le]])}for(ft=Se.length-1;ft>=0;ft--)Y.splice(Se[ft],1),ht&&ht.splice(Se[ft],1);if(Y.length?H||A.set(Y):A.set(null),O)return!1;if(j(B,S),N!==v){var gt;if(ie===-1)gt=z;else{for(X=Math.max(Y.length,X),gt=[],ft=0;ft<z.length&&(nt=z[ft],!(nt>=ie));ft++)gt.push(nt);for(ft=ie;ft<X;ft++)gt.push(ft)}for(ft=0;ft<gt.length;ft++)N(w,gt[ft])}else P(w);return!0}}),B3=t(Ue=>{var ve=E(),v=p1(),c=Re(),h=lg(),_=A1(),y=sa(),x=_.cleanId,w=_.getFromTrace,A=v.traceIs,d=["x","y","z"];Ue.clearPromiseQueue=function(S){Array.isArray(S._promises)&&S._promises.length>0&&c.log("Clearing previous rejected promises from queue."),S._promises=[]},Ue.cleanLayout=function(S){var D;S||(S={}),S.xaxis1&&(S.xaxis||(S.xaxis=S.xaxis1),delete S.xaxis1),S.yaxis1&&(S.yaxis||(S.yaxis=S.yaxis1),delete S.yaxis1),S.scene1&&(S.scene||(S.scene=S.scene1),delete S.scene1);var z=(h.subplotsRegistry.cartesian||{}).attrRegex;(h.subplotsRegistry.polar||{}).attrRegex,(h.subplotsRegistry.ternary||{}).attrRegex,(h.subplotsRegistry.gl3d||{}).attrRegex;var H=Object.keys(S);for(D=0;D<H.length;D++){var Y=H[D];if(z&&z.test(Y)){var ht=S[Y];ht.anchor&&ht.anchor!=="free"&&(ht.anchor=x(ht.anchor)),ht.overlaying&&(ht.overlaying=x(ht.overlaying)),ht.type||(ht.isdate?ht.type="date":ht.islog?ht.type="log":ht.isdate===!1&&ht.islog===!1&&(ht.type="linear")),(ht.autorange==="withzero"||ht.autorange==="tozero")&&(ht.autorange=!0,ht.rangemode="tozero"),ht.insiderange&&delete ht.range,delete ht.islog,delete ht.isdate,delete ht.categories,P(ht,"domain")&&delete ht.domain}}var Se=Array.isArray(S.annotations)?S.annotations.length:0;for(D=0;D<Se;D++){var ie=S.annotations[D];c.isPlainObject(ie)&&(k(ie,"xref"),k(ie,"yref"))}var X=Array.isArray(S.shapes)?S.shapes.length:0;for(D=0;D<X;D++){var ft=S.shapes[D];c.isPlainObject(ft)&&(k(ft,"xref"),k(ft,"yref"))}var Le=Array.isArray(S.images)?S.images.length:0;for(D=0;D<Le;D++){var nt=S.images[D];c.isPlainObject(nt)&&(k(nt,"xref"),k(nt,"yref"))}var Ze=S.legend;return Ze&&(Ze.x>3?(Ze.x=1.02,Ze.xanchor="left"):Ze.x<-2&&(Ze.x=-.02,Ze.xanchor="right"),Ze.y>3?(Ze.y=1.02,Ze.yanchor="bottom"):Ze.y<-2&&(Ze.y=-.02,Ze.yanchor="top")),S.dragmode==="rotate"&&(S.dragmode="orbit"),y.clean(S),S.template&&S.template.layout&&Ue.cleanLayout(S.template.layout),S};function k(S,D){var z=S[D],H=D.charAt(0);z&&z!=="paper"&&(S[D]=x(z,H,!0))}Ue.cleanData=function(S){for(var D=0;D<S.length;D++){var z=S[D],H;if(z.type==="histogramy"&&"xbins"in z&&!("ybins"in z)&&(z.ybins=z.xbins,delete z.xbins),z.type==="histogramy"&&Ue.swapXYData(z),(z.type==="histogramx"||z.type==="histogramy")&&(z.type="histogram"),"scl"in z&&!("colorscale"in z)&&(z.colorscale=z.scl,delete z.scl),"reversescl"in z&&!("reversescale"in z)&&(z.reversescale=z.reversescl,delete z.reversescl),z.xaxis&&(z.xaxis=x(z.xaxis,"x")),z.yaxis&&(z.yaxis=x(z.yaxis,"y")),A(z,"gl3d")&&z.scene&&(z.scene=h.subplotsRegistry.gl3d.cleanId(z.scene)),!A(z,"pie-like")&&!A(z,"bar-like"))if(Array.isArray(z.textposition))for(H=0;H<z.textposition.length;H++)z.textposition[H]=j(z.textposition[H]);else z.textposition&&(z.textposition=j(z.textposition));var Y=v.getModule(z);if(Y&&Y.colorbar){var ht=Y.colorbar.container,Se=ht?z[ht]:z;Se&&Se.colorscale&&(Se.colorscale==="YIGnBu"&&(Se.colorscale="YlGnBu"),Se.colorscale==="YIOrRd"&&(Se.colorscale="YlOrRd"))}if(z.type==="surface"&&c.isPlainObject(z.contours)){var ie=["x","y","z"];for(H=0;H<ie.length;H++){var X=z.contours[ie[H]];c.isPlainObject(X)&&(X.highlightColor&&(X.highlightcolor=X.highlightColor,delete X.highlightColor),X.highlightWidth&&(X.highlightwidth=X.highlightWidth,delete X.highlightWidth))}}if(z.type==="candlestick"||z.type==="ohlc"){var ft=(z.increasing||{}).showlegend!==!1,Le=(z.decreasing||{}).showlegend!==!1,nt=T(z.increasing),Ze=T(z.decreasing);if(nt!==!1&&Ze!==!1){var rt=L(nt,Ze,ft,Le);rt&&(z.name=rt)}else(nt||Ze)&&!z.name&&(z.name=nt||Ze)}P(z,"line")&&delete z.line,"marker"in z&&(P(z.marker,"line")&&delete z.marker.line,P(z,"marker")&&delete z.marker),y.clean(z),z.autobinx&&(delete z.autobinx,delete z.xbins),z.autobiny&&(delete z.autobiny,delete z.ybins)}};function T(S){if(!c.isPlainObject(S))return!1;var D=S.name;return delete S.name,delete S.showlegend,(typeof D=="string"||typeof D=="number")&&String(D)}function L(S,D,z,H){if(z&&!H)return S;if(H&&!z||!S.trim())return D;if(!D.trim())return S;var Y=Math.min(S.length,D.length),ht;for(ht=0;ht<Y&&S.charAt(ht)===D.charAt(ht);ht++);var Se=S.substr(0,ht);return Se.trim()}function j(S){var D="middle",z="center";return typeof S=="string"&&(S.indexOf("top")!==-1?D="top":S.indexOf("bottom")!==-1&&(D="bottom"),S.indexOf("left")!==-1?z="left":S.indexOf("right")!==-1&&(z="right")),D+" "+z}function P(S,D){return D in S&&typeof S[D]=="object"&&Object.keys(S[D]).length===0}Ue.swapXYData=function(S){var D;if(c.swapAttrs(S,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(S.z)&&Array.isArray(S.z[0])&&(S.transpose?delete S.transpose:S.transpose=!0),S.error_x&&S.error_y){var z=S.error_y,H="copy_ystyle"in z?z.copy_ystyle:!(z.color||z.thickness||z.width);c.swapAttrs(S,["error_?.copy_ystyle"]),H&&c.swapAttrs(S,["error_?.color","error_?.thickness","error_?.width"])}if(typeof S.hoverinfo=="string"){var Y=S.hoverinfo.split("+");for(D=0;D<Y.length;D++)Y[D]==="x"?Y[D]="y":Y[D]==="y"&&(Y[D]="x");S.hoverinfo=Y.join("+")}},Ue.coerceTraceIndices=function(S,D){if(ve(D))return[D];if(!Array.isArray(D)||!D.length)return S.data.map(function(Y,ht){return ht});if(Array.isArray(D)){for(var z=[],H=0;H<D.length;H++)c.isIndex(D[H],S.data.length)?z.push(D[H]):c.warn("trace index (",D[H],") is not a number or is out of bounds");return z}return D},Ue.manageArrayContainers=function(S,D,z){var H=S.obj,Y=S.parts,ht=Y.length,Se=Y[ht-1],ie=ve(Se);if(ie&&D===null){var X=Y.slice(0,ht-1).join("."),ft=c.nestedProperty(H,X).get();ft.splice(Se,1)}else ie&&S.get()===void 0&&S.get()===void 0&&(z[S.astr]=null),S.set(D)};var N=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function O(S){var D=S.search(N);if(D>0)return S.substr(0,D)}Ue.hasParent=function(S,D){for(var z=O(D);z;){if(z in S)return!0;z=O(z)}return!1},Ue.clearAxisTypes=function(S,D,z){for(var H=0;H<D.length;H++)for(var Y=S._fullData[H],ht=0;ht<3;ht++){var Se=w(S,Y,d[ht]);if(Se&&Se.type!=="log"){var ie=Se._name,X=Se._id.substr(1);if(X.substr(0,5)==="scene"){if(z[X]!==void 0)continue;ie=X+"."+ie}var ft=ie+".type";z[ie]===void 0&&z[ft]===void 0&&c.nestedProperty(S.layout,ft).set(null)}}};var B=(S,D)=>{let z=(...H)=>H.every(Y=>c.isPlainObject(Y))||H.every(Y=>Array.isArray(Y));if([S,D].every(H=>Array.isArray(H))){if(S.length!==D.length)return!1;for(let H=0;H<S.length;H++){let Y=S[H],ht=D[H];if(Y!==ht&&!(z(Y,ht)&&B(Y,ht)))return!1}return!0}else if([S,D].every(H=>c.isPlainObject(H))){if(Object.keys(S).length!==Object.keys(D).length)return!1;for(let H in S){if(H.startsWith("_"))continue;let Y=S[H],ht=D[H];if(Y!==ht&&!(z(Y,ht)&&B(Y,ht)))return!1}return!0}return!1};Ue.collectionsAreEqual=B}),Tb=t(Ue=>{var ve=l(),v=E(),c=t0(),h=Re(),_=h.nestedProperty,y=J0(),x=F0(),w=p1(),A=Bm(),d=lg(),k=km(),T=Qm(),L=o0(),j=Y0(),P=sa(),N=v2().initInteractions,O=Mg(),B=X2().clearOutline,S=Cp().dfltConfig,D=F3(),z=B3(),H=V1(),Y=Um(),ht=jm().AX_NAME_PATTERN,Se=0,ie=5;function X(St,Ht,Sr,Rp){var Np;if(St=h.getGraphDiv(St),y.init(St),h.isPlainObject(Ht)){var Jp=Ht;Ht=Jp.data,Sr=Jp.layout,Rp=Jp.config,Np=Jp.frames}var n0=y.triggerHandler(St,"plotly_beforeplot",[Ht,Sr,Rp]);if(n0===!1)return Promise.reject();!Ht&&!Sr&&!h.isPlotDiv(St)&&h.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",St);function S0(){if(Np)return Ue.addFrames(St,Np)}rt(St,Rp),Sr||(Sr={}),ve.select(St).classed("js-plotly-plot",!0),j.makeTester(),Array.isArray(St._promises)||(St._promises=[]);var _0=(St.data||[]).length===0&&Array.isArray(Ht);Array.isArray(Ht)&&(z.cleanData(Ht),_0?St.data=Ht:St.data.push.apply(St.data,Ht),St.empty=!1),(!St.layout||_0)&&(St.layout=z.cleanLayout(Sr)),d.supplyDefaults(St);var w0=St._fullLayout,X0=w0._has("cartesian");w0._replotting=!0,(_0||w0._shouldCreateBgLayer)&&(Hp(St),w0._shouldCreateBgLayer&&delete w0._shouldCreateBgLayer),j.initGradients(St),j.initPatterns(St),_0&&k.saveShowSpikeInitial(St);var $0=!St.calcdata||St.calcdata.length!==(St._fullData||[]).length;$0&&d.doCalcdata(St);for(var Z0=0;Z0<St.calcdata.length;Z0++)St.calcdata[Z0][0].trace=St._fullData[Z0];St._context.responsive?St._responsiveChartHandler||(St._responsiveChartHandler=function(){h.isHidden(St)||d.resize(St)},window.addEventListener("resize",St._responsiveChartHandler)):h.clearResponsive(St);var Am=h.extendFlat({},w0._size),e1=0;function E1(){for(var l1=w0._basePlotModules,m1=0;m1<l1.length;m1++)l1[m1].drawFramework&&l1[m1].drawFramework(St);!w0._glcanvas&&w0._has("gl")&&(w0._glcanvas=w0._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(k1){return k1.key}),w0._glcanvas.enter().append("canvas").attr("class",function(k1){return"gl-canvas gl-canvas-"+k1.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));var t1=St._context.plotGlPixelRatio;if(w0._glcanvas){w0._glcanvas.attr("width",w0.width*t1).attr("height",w0.height*t1).style("width",w0.width+"px").style("height",w0.height+"px");var Z1=w0._glcanvas.data()[0].regl;if(Z1&&(Math.floor(w0.width*t1)!==Z1._gl.drawingBufferWidth||Math.floor(w0.height*t1)!==Z1._gl.drawingBufferHeight)){var rg="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(e1)h.error(rg);else return h.log(rg+" Clearing graph and plotting again."),d.cleanPlot([],{},St._fullData,w0),d.supplyDefaults(St),w0=St._fullLayout,d.doCalcdata(St),e1++,E1()}}return w0.modebar.orientation==="h"?w0._modebardiv.style("height",null).style("width","100%"):w0._modebardiv.style("width",null).style("height",w0.height+"px"),d.previousPromises(St)}function N1(){if(d.clearAutoMarginIds(St),H.drawMarginPushers(St),k.allowAutoMargin(St),St._fullLayout.title.text&&St._fullLayout.title.automargin&&d.allowAutoMargin(St,"title.automargin"),w0._has("pie"))for(var l1=St._fullData,m1=0;m1<l1.length;m1++){var t1=l1[m1];t1.type==="pie"&&t1.automargin&&d.allowAutoMargin(St,"pie."+t1.uid+".automargin")}return d.doAutoMargin(St),d.previousPromises(St)}function z1(){if(d.didMarginChange(Am,w0._size))return h.syncOrAsync([N1,H.layoutStyles],St)}function r1(){if(!$0){Lm();return}return h.syncOrAsync([w.getComponentMethod("shapes","calcAutorange"),w.getComponentMethod("annotations","calcAutorange"),Lm],St)}function Lm(){St._transitioning||(H.doAutoRangeAndConstraints(St),_0&&k.saveRangeInitial(St),w.getComponentMethod("rangeslider","calcAutorange")(St))}function T1(){return k.draw(St,_0?"":"redraw")}var O1=[d.previousPromises,S0,E1,N1,z1];X0&&O1.push(r1),O1.push(H.layoutStyles),X0&&O1.push(T1,function(l1){var m1=l1._fullLayout._insideTickLabelsUpdaterange;if(m1)return l1._fullLayout._insideTickLabelsUpdaterange=void 0,kt(l1,m1).then(function(){k.saveRangeInitial(l1,!0)})}),O1.push(H.drawData,H.finalDraw,N,d.addLinks,d.rehover,d.redrag,d.reselect,d.doAutoMargin,d.previousPromises);var y1=h.syncOrAsync(O1,St);return(!y1||!y1.then)&&(y1=Promise.resolve()),y1.then(function(){return ft(St),St})}function ft(St){var Ht=St._fullLayout;Ht._redrawFromAutoMarginCount?Ht._redrawFromAutoMarginCount--:St.emit("plotly_afterplot")}function Le(St){return h.extendFlat(S,St)}function nt(St,Ht){try{St._fullLayout._paper.style("background",Ht)}catch(Sr){h.error(Sr)}}function Ze(St,Ht){var Sr=P.combine(Ht,"white");nt(St,Sr)}function rt(St,Ht){if(!St._context){St._context=h.extendDeep({},S);var Sr=ve.select("base");St._context._baseUrl=Sr.size()&&Sr.attr("href")?window.location.href.split("#")[0]:""}var Rp=St._context,Np,Jp,n0;if(Ht){for(Jp=Object.keys(Ht),Np=0;Np<Jp.length;Np++)n0=Jp[Np],!(n0==="editable"||n0==="edits")&&n0 in Rp&&(n0==="setBackground"&&Ht[n0]==="opaque"?Rp[n0]=Ze:Rp[n0]=Ht[n0]);var S0=Ht.editable;if(S0!==void 0)for(Rp.editable=S0,Jp=Object.keys(Rp.edits),Np=0;Np<Jp.length;Np++)Rp.edits[Jp[Np]]=S0;if(Ht.edits)for(Jp=Object.keys(Ht.edits),Np=0;Np<Jp.length;Np++)n0=Jp[Np],n0 in Rp.edits&&(Rp.edits[n0]=Ht.edits[n0]);Rp._exportedPlot=Ht._exportedPlot}Rp.staticPlot&&(Rp.editable=!1,Rp.edits={},Rp.autosizable=!1,Rp.scrollZoom=!1,Rp.doubleClick=!1,Rp.showTips=!1,Rp.showLink=!1,Rp.displayModeBar=!1),Rp.displayModeBar==="hover"&&!c&&(Rp.displayModeBar=!0),(Rp.setBackground==="transparent"||typeof Rp.setBackground!="function")&&(Rp.setBackground=nt),Rp._hasZeroHeight=Rp._hasZeroHeight||St.clientHeight===0,Rp._hasZeroWidth=Rp._hasZeroWidth||St.clientWidth===0;var _0=Rp.scrollZoom,w0=Rp._scrollZoom={};if(_0===!0)w0.cartesian=1,w0.gl3d=1,w0.geo=1,w0.mapbox=1,w0.map=1;else if(typeof _0=="string"){var X0=_0.split("+");for(Np=0;Np<X0.length;Np++)w0[X0[Np]]=1}else _0!==!1&&(w0.gl3d=1,w0.geo=1,w0.mapbox=1,w0.map=1)}function dt(St){if(St=h.getGraphDiv(St),!h.isPlotDiv(St))throw new Error("This element is not a Plotly plot: "+St);return z.cleanData(St.data),z.cleanLayout(St.layout),St.calcdata=void 0,Ue._doPlot(St).then(function(){return St.emit("plotly_redraw"),St})}function pt(St,Ht,Sr,Rp){return St=h.getGraphDiv(St),d.cleanPlot([],{},St._fullData||[],St._fullLayout||{}),d.purge(St),Ue._doPlot(St,Ht,Sr,Rp)}function se(St,Ht){var Sr=Ht+1,Rp=[],Np,Jp;for(Np=0;Np<St.length;Np++)Jp=St[Np],Jp<0?Rp.push(Sr+Jp):Rp.push(Jp);return Rp}function gt(St,Ht,Sr){var Rp,Np;for(Rp=0;Rp<Ht.length;Rp++){if(Np=Ht[Rp],Np!==parseInt(Np,10))throw new Error("all values in "+Sr+" must be integers");if(Np>=St.data.length||Np<-St.data.length)throw new Error(Sr+" must be valid indices for gd.data.");if(Ht.indexOf(Np,Rp+1)>-1||Np>=0&&Ht.indexOf(-St.data.length+Np)>-1||Np<0&&Ht.indexOf(St.data.length+Np)>-1)throw new Error("each index in "+Sr+" must be unique.")}}function xt(St,Ht,Sr){if(!Array.isArray(St.data))throw new Error("gd.data must be an array.");if(typeof Ht>"u")throw new Error("currentIndices is a required argument.");if(Array.isArray(Ht)||(Ht=[Ht]),gt(St,Ht,"currentIndices"),typeof Sr<"u"&&!Array.isArray(Sr)&&(Sr=[Sr]),typeof Sr<"u"&&gt(St,Sr,"newIndices"),typeof Sr<"u"&&Ht.length!==Sr.length)throw new Error("current and new indices must be of equal length.")}function Nt(St,Ht,Sr){var Rp,Np;if(!Array.isArray(St.data))throw new Error("gd.data must be an array.");if(typeof Ht>"u")throw new Error("traces must be defined.");for(Array.isArray(Ht)||(Ht=[Ht]),Rp=0;Rp<Ht.length;Rp++)if(Np=Ht[Rp],typeof Np!="object"||Array.isArray(Np)||Np===null)throw new Error("all values in traces array must be non-array objects");if(typeof Sr<"u"&&!Array.isArray(Sr)&&(Sr=[Sr]),typeof Sr<"u"&&Sr.length!==Ht.length)throw new Error("if indices is specified, traces.length must equal indices.length")}function Rt(St,Ht,Sr,Rp){var Np=h.isPlainObject(Rp);if(!Array.isArray(St.data))throw new Error("gd.data must be an array");if(!h.isPlainObject(Ht))throw new Error("update must be a key:value object");if(typeof Sr>"u")throw new Error("indices must be an integer or array of integers");gt(St,Sr,"indices");for(var Jp in Ht){if(!Array.isArray(Ht[Jp])||Ht[Jp].length!==Sr.length)throw new Error("attribute "+Jp+" must be an array of length equal to indices array length");if(Np&&(!(Jp in Rp)||!Array.isArray(Rp[Jp])||Rp[Jp].length!==Ht[Jp].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 correspondence with the keys and number of traces in the update object")}}function Pt(St,Ht,Sr,Rp){var Np=h.isPlainObject(Rp),Jp=[],n0,S0,_0,w0,X0;Array.isArray(Sr)||(Sr=[Sr]),Sr=se(Sr,St.data.length-1);for(var $0 in Ht)for(var Z0=0;Z0<Sr.length;Z0++){if(n0=St.data[Sr[Z0]],_0=_(n0,$0),S0=_0.get(),w0=Ht[$0][Z0],!h.isArrayOrTypedArray(w0))throw new Error("attribute: "+$0+" index: "+Z0+" must be an array");if(!h.isArrayOrTypedArray(S0))throw new Error("cannot extend missing or non-array attribute: "+$0);if(S0.constructor!==w0.constructor)throw new Error("cannot extend array with an array of a different type: "+$0);X0=Np?Rp[$0][Z0]:Rp,v(X0)||(X0=-1),Jp.push({prop:_0,target:S0,insert:w0,maxp:Math.floor(X0)})}return Jp}function xn(St,Ht,Sr,Rp,Np){Rt(St,Ht,Sr,Rp);for(var Jp=Pt(St,Ht,Sr,Rp),n0={},S0={},_0=0;_0<Jp.length;_0++){var w0=Jp[_0].prop,X0=Jp[_0].maxp,$0=Np(Jp[_0].target,Jp[_0].insert,X0);w0.set($0[0]),Array.isArray(n0[w0.astr])||(n0[w0.astr]=[]),n0[w0.astr].push($0[1]),Array.isArray(S0[w0.astr])||(S0[w0.astr]=[]),S0[w0.astr].push(Jp[_0].target.length)}return{update:n0,maxPoints:S0}}function oa(St,Ht){var Sr=new St.constructor(St.length+Ht.length);return Sr.set(St),Sr.set(Ht,St.length),Sr}function jo(St,Ht,Sr,Rp){St=h.getGraphDiv(St);function Np(_0,w0,X0){var $0,Z0;if(h.isTypedArray(_0))if(X0<0){var Am=new _0.constructor(0),e1=oa(_0,w0);X0<0?($0=e1,Z0=Am):($0=Am,Z0=e1)}else if($0=new _0.constructor(X0),Z0=new _0.constructor(_0.length+w0.length-X0),X0===w0.length)$0.set(w0),Z0.set(_0);else if(X0<w0.length){var E1=w0.length-X0;$0.set(w0.subarray(E1)),Z0.set(_0),Z0.set(w0.subarray(0,E1),_0.length)}else{var N1=X0-w0.length,z1=_0.length-N1;$0.set(_0.subarray(z1)),$0.set(w0,N1),Z0.set(_0.subarray(0,z1))}else $0=_0.concat(w0),Z0=X0>=0&&X0<$0.length?$0.splice(0,$0.length-X0):[];return[$0,Z0]}var Jp=xn(St,Ht,Sr,Rp,Np),n0=Ue.redraw(St),S0=[St,Jp.update,Sr,Jp.maxPoints];return x.add(St,Ue.prependTraces,S0,jo,arguments),n0}function lt(St,Ht,Sr,Rp){St=h.getGraphDiv(St);function Np(_0,w0,X0){var $0,Z0;if(h.isTypedArray(_0))if(X0<=0){var Am=new _0.constructor(0),e1=oa(w0,_0);X0<0?($0=e1,Z0=Am):($0=Am,Z0=e1)}else if($0=new _0.constructor(X0),Z0=new _0.constructor(_0.length+w0.length-X0),X0===w0.length)$0.set(w0),Z0.set(_0);else if(X0<w0.length){var E1=w0.length-X0;$0.set(w0.subarray(0,E1)),Z0.set(w0.subarray(E1)),Z0.set(_0,E1)}else{var N1=X0-w0.length;$0.set(w0),$0.set(_0.subarray(0,N1),w0.length),Z0.set(_0.subarray(N1))}else $0=w0.concat(_0),Z0=X0>=0&&X0<$0.length?$0.splice(X0,$0.length):[];return[$0,Z0]}var Jp=xn(St,Ht,Sr,Rp,Np),n0=Ue.redraw(St),S0=[St,Jp.update,Sr,Jp.maxPoints];return x.add(St,Ue.extendTraces,S0,lt,arguments),n0}function ut(St,Ht,Sr){St=h.getGraphDiv(St);var Rp=[],Np=Ue.deleteTraces,Jp=ut,n0=[St,Rp],S0=[St,Ht],_0,w0;for(Nt(St,Ht,Sr),Array.isArray(Ht)||(Ht=[Ht]),Ht=Ht.map(function(X0){return h.extendFlat({},X0)}),z.cleanData(Ht),_0=0;_0<Ht.length;_0++)St.data.push(Ht[_0]);for(_0=0;_0<Ht.length;_0++)Rp.push(-Ht.length+_0);if(typeof Sr>"u")return w0=Ue.redraw(St),x.add(St,Np,n0,Jp,S0),w0;Array.isArray(Sr)||(Sr=[Sr]);try{xt(St,Rp,Sr)}catch(X0){throw St.data.splice(St.data.length-Ht.length,Ht.length),X0}return x.startSequence(St),x.add(St,Np,n0,Jp,S0),w0=Ue.moveTraces(St,Rp,Sr),x.stopSequence(St),w0}function $(St,Ht){St=h.getGraphDiv(St);var Sr=[],Rp=Ue.addTraces,Np=$,Jp=[St,Sr,Ht],n0=[St,Ht],S0,_0;if(typeof Ht>"u")throw new Error("indices must be an integer or array of integers.");for(Array.isArray(Ht)||(Ht=[Ht]),gt(St,Ht,"indices"),Ht=se(Ht,St.data.length-1),Ht.sort(h.sorterDes),S0=0;S0<Ht.length;S0+=1)_0=St.data.splice(Ht[S0],1)[0],Sr.push(_0);var w0=Ue.redraw(St);return x.add(St,Rp,Jp,Np,n0),w0}function yt(St,Ht,Sr){St=h.getGraphDiv(St);var Rp=[],Np=[],Jp=yt,n0=yt,S0=[St,Sr,Ht],_0=[St,Ht,Sr],w0;if(xt(St,Ht,Sr),Ht=Array.isArray(Ht)?Ht:[Ht],typeof Sr>"u")for(Sr=[],w0=0;w0<Ht.length;w0++)Sr.push(-Ht.length+w0);for(Sr=Array.isArray(Sr)?Sr:[Sr],Ht=se(Ht,St.data.length-1),Sr=se(Sr,St.data.length-1),w0=0;w0<St.data.length;w0++)Ht.indexOf(w0)===-1&&Rp.push(St.data[w0]);for(w0=0;w0<Ht.length;w0++)Np.push({newIndex:Sr[w0],trace:St.data[Ht[w0]]});for(Np.sort(function($0,Z0){return $0.newIndex-Z0.newIndex}),w0=0;w0<Np.length;w0+=1)Rp.splice(Np[w0].newIndex,0,Np[w0].trace);St.data=Rp;var X0=Ue.redraw(St);return x.add(St,Jp,S0,n0,_0),X0}function Lt(St,Ht,Sr,Rp){St=h.getGraphDiv(St),z.clearPromiseQueue(St);var Np={};if(typeof Ht=="string")Np[Ht]=Sr;else if(h.isPlainObject(Ht))Np=h.extendFlat({},Ht),Rp===void 0&&(Rp=Sr);else return h.warn("Restyle fail.",Ht,Sr,Rp),Promise.reject();Object.keys(Np).length&&(St.changed=!0);var Jp=z.coerceTraceIndices(St,Rp),n0=ct(St,Np,Jp),S0=n0.flags;S0.calc&&(St.calcdata=void 0),S0.clearAxisTypes&&z.clearAxisTypes(St,Jp,{});var _0=[];S0.fullReplot?_0.push(Ue._doPlot):(_0.push(d.previousPromises),d.supplyDefaults(St),S0.markerSize&&(d.doCalcdata(St),$t(_0)),S0.style&&_0.push(H.doTraceStyle),S0.colorbars&&_0.push(H.doColorBars),_0.push(ft)),_0.push(d.rehover,d.redrag,d.reselect),x.add(St,Lt,[St,n0.undoit,n0.traces],Lt,[St,n0.redoit,n0.traces]);var w0=h.syncOrAsync(_0,St);return(!w0||!w0.then)&&(w0=Promise.resolve()),w0.then(function(){return St.emit("plotly_restyle",n0.eventData),St})}function ke(St){return St===void 0?null:St}function G(St,Ht){return Ht?function(Sr,Rp,Np){var Jp=_(Sr,Rp),n0=Jp.set;return Jp.set=function(S0){var _0=(Np||"")+Rp;ne(_0,Jp.get(),S0,St),n0(S0)},Jp}:_}function ne(St,Ht,Sr,Rp){if(Array.isArray(Ht)||Array.isArray(Sr))for(var Np=Array.isArray(Ht)?Ht:[],Jp=Array.isArray(Sr)?Sr:[],n0=Math.max(Np.length,Jp.length),S0=0;S0<n0;S0++)ne(St+"["+S0+"]",Np[S0],Jp[S0],Rp);else if(h.isPlainObject(Ht)||h.isPlainObject(Sr)){var _0=h.isPlainObject(Ht)?Ht:{},w0=h.isPlainObject(Sr)?Sr:{},X0=h.extendFlat({},_0,w0);for(var $0 in X0)ne(St+"."+$0,_0[$0],w0[$0],Rp)}else Rp[St]===void 0&&(Rp[St]=ke(Ht))}function et(St,Ht,Sr){for(var Rp in Sr){var Np=_(St,Rp);ne(Rp,Np.get(),Sr[Rp],Ht)}}function ct(St,Ht,Sr){var Rp=St._fullLayout,Np=St._fullData,Jp=St.data,n0=Rp._guiEditing,S0=G(Rp._preGUI,n0),_0=h.extendDeepAll({},Ht),w0,X0=Y.traceFlags(),$0={},Z0={},Am;function e1(){return Sr.map(function(){})}function E1(z0){var am=k.id2name(z0);Am.indexOf(am)===-1&&Am.push(am)}function N1(z0){return"LAYOUT"+z0+".autorange"}function z1(z0){return"LAYOUT"+z0+".range"}function r1(z0){for(var am=z0;am<Np.length;am++)if(Np[am]._input===Jp[z0])return Np[am]}function Lm(z0,am,Ym){if(Array.isArray(z0)){z0.forEach(function(Jm){Lm(Jm,am,Ym)});return}if(!(z0 in Ht||z.hasParent(Ht,z0))){var Hm;if(z0.substr(0,6)==="LAYOUT")Hm=S0(St.layout,z0.replace("LAYOUT",""));else{var f1=Sr[Ym],Im=Rp._tracePreGUI[r1(f1)._fullInput.uid];Hm=G(Im,n0)(Jp[f1],z0)}z0 in Z0||(Z0[z0]=e1()),Z0[z0][Ym]===void 0&&(Z0[z0][Ym]=ke(Hm.get())),am!==void 0&&Hm.set(am)}}function T1(z0){return function(am){return Np[am][z0]}}function O1(z0){return function(am,Ym){return am===!1?Np[Sr[Ym]][z0]:null}}for(var y1 in Ht){if(z.hasParent(Ht,y1))throw new Error("cannot set "+y1+" and a parent attribute simultaneously");var l1=Ht[y1],m1,t1,Z1,rg,k1,ug;if((y1==="autobinx"||y1==="autobiny")&&(y1=y1.charAt(y1.length-1)+"bins",Array.isArray(l1)?l1=l1.map(O1(y1)):l1===!1?l1=Sr.map(T1(y1)):l1=null),$0[y1]=l1,y1.substr(0,6)==="LAYOUT"){Z1=S0(St.layout,y1.replace("LAYOUT","")),Z0[y1]=[ke(Z1.get())],Z1.set(Array.isArray(l1)?l1[0]:l1),X0.calc=!0;continue}for(Z0[y1]=e1(),w0=0;w0<Sr.length;w0++){m1=Jp[Sr[w0]],t1=r1(Sr[w0]);var yg=Rp._tracePreGUI[t1._fullInput.uid];if(Z1=G(yg,n0)(m1,y1),rg=Z1.get(),k1=Array.isArray(l1)?l1[w0%l1.length]:l1,k1!==void 0){var Eg=Z1.parts[Z1.parts.length-1],Ig=y1.substr(0,y1.length-Eg.length-1),Q1=Ig?Ig+".":"",Rg=Ig?_(t1,Ig).get():t1;if(ug=A.getTraceValObject(t1,Z1.parts),ug&&ug.impliedEdits&&k1!==null)for(var cg in ug.impliedEdits)Lm(h.relativeAttr(y1,cg),ug.impliedEdits[cg],w0);else if((Eg==="thicknessmode"||Eg==="lenmode")&&rg!==k1&&(k1==="fraction"||k1==="pixels")&&Rg){var Vm=Rp._size,Xg=Rg.orient,Ct=Xg==="top"||Xg==="bottom";if(Eg==="thicknessmode"){var Tt=Ct?Vm.h:Vm.w;Lm(Q1+"thickness",Rg.thickness*(k1==="fraction"?1/Tt:Tt),w0)}else{var jp=Ct?Vm.w:Vm.h;Lm(Q1+"len",Rg.len*(k1==="fraction"?1/jp:jp),w0)}}else if(y1==="type"&&(k1==="pie"!=(rg==="pie")||k1==="funnelarea"!=(rg==="funnelarea"))){var Zp="x",l0="y";(k1==="bar"||rg==="bar")&&m1.orientation==="h"&&(Zp="y",l0="x"),h.swapAttrs(m1,["?","?src"],"labels",Zp),h.swapAttrs(m1,["d?","?0"],"label",Zp),h.swapAttrs(m1,["?","?src"],"values",l0),rg==="pie"||rg==="funnelarea"?(_(m1,"marker.color").set(_(m1,"marker.colors").get()),Rp._pielayer.selectAll("g.trace").remove()):w.traceIs(m1,"cartesian")&&_(m1,"marker.colors").set(_(m1,"marker.color").get())}Z0[y1][w0]=ke(rg);var Bp=["swapxy","swapxyaxes","orientation","orientationaxes"];if(Bp.indexOf(y1)!==-1){if(y1==="orientation"){Z1.set(k1);var Gp=m1.x&&!m1.y?"h":"v";if((Z1.get()||Gp)===t1.orientation)continue}else y1==="orientationaxes"&&(m1.orientation={v:"h",h:"v"}[t1.orientation]);z.swapXYData(m1),X0.calc=X0.clearAxisTypes=!0}else d.dataArrayContainers.indexOf(Z1.parts[0])!==-1?(z.manageArrayContainers(Z1,k1,Z0),X0.calc=!0):(ug?ug.arrayOk&&!w.traceIs(t1,"regl")&&(h.isArrayOrTypedArray(k1)||h.isArrayOrTypedArray(rg))?X0.calc=!0:Y.update(X0,ug):X0.calc=!0,Z1.set(k1))}}if(["swapxyaxes","orientationaxes"].indexOf(y1)!==-1&&k.swap(St,Sr),y1==="orientationaxes"){var p0=_(St.layout,"hovermode"),a0=p0.get();a0==="x"?p0.set("y"):a0==="y"?p0.set("x"):a0==="x unified"?p0.set("y unified"):a0==="y unified"&&p0.set("x unified")}if(["orientation","type"].indexOf(y1)!==-1){for(Am=[],w0=0;w0<Sr.length;w0++){var D0=Jp[Sr[w0]];w.traceIs(D0,"cartesian")&&(E1(D0.xaxis||"x"),E1(D0.yaxis||"y"))}Lm(Am.map(N1),!0,0),Lm(Am.map(z1),[0,1],0)}}return(X0.calc||X0.plot)&&(X0.fullReplot=!0),{flags:X0,undoit:Z0,redoit:$0,traces:Sr,eventData:h.extendDeepNoArrays([],[_0,Sr])}}function kt(St,Ht,Sr){St=h.getGraphDiv(St),z.clearPromiseQueue(St);var Rp={};if(typeof Ht=="string")Rp[Ht]=Sr;else if(h.isPlainObject(Ht))Rp=h.extendFlat({},Ht);else return h.warn("Relayout fail.",Ht,Sr),Promise.reject();Object.keys(Rp).length&&(St.changed=!0);var Np=E0(St,Rp),Jp=Np.flags;Jp.calc&&(St.calcdata=void 0);var n0=[d.previousPromises];Jp.layoutReplot?n0.push(H.layoutReplot):Object.keys(Rp).length&&(Gt(St,Jp,Np)||d.supplyDefaults(St),Jp.legend&&n0.push(H.doLegend),Jp.layoutstyle&&n0.push(H.layoutStyles),Jp.axrange&&$t(n0,Np.rangesAltered),Jp.ticks&&n0.push(H.doTicksRelayout),Jp.modebar&&n0.push(H.doModeBar),Jp.camera&&n0.push(H.doCamera),Jp.colorbars&&n0.push(H.doColorBars),n0.push(ft)),n0.push(d.rehover,d.redrag,d.reselect),x.add(St,kt,[St,Np.undoit],kt,[St,Np.redoit]);var S0=h.syncOrAsync(n0,St);return(!S0||!S0.then)&&(S0=Promise.resolve(St)),S0.then(function(){return St.emit("plotly_relayout",Np.eventData),St})}function Gt(St,Ht,Sr){var Rp=St._fullLayout;if(!Ht.axrange)return!1;for(var Np in Ht)if(Np!=="axrange"&&Ht[Np])return!1;var Jp,n0,S0=function(Am,e1){return h.coerce(Jp,n0,L,Am,e1)},_0={};for(var w0 in Sr.rangesAltered){var X0=k.id2name(w0);if(Jp=St.layout[X0],n0=Rp[X0],T(Jp,n0,S0,_0),n0._matchGroup){for(var $0 in n0._matchGroup)if($0!==w0){var Z0=Rp[k.id2name($0)];Z0.autorange=n0.autorange,Z0.range=n0.range.slice(),Z0._input.range=n0.range.slice()}}}return!0}function $t(St,Ht){var Sr=Ht?function(Rp){var Np=[],Jp=!0;for(var n0 in Ht){var S0=k.getFromId(Rp,n0);if(Np.push(n0),(S0.ticklabelposition||"").indexOf("inside")!==-1&&S0._anchorAxis&&Np.push(S0._anchorAxis._id),S0._matchGroup)for(var _0 in S0._matchGroup)Ht[_0]||Np.push(_0)}return k.draw(Rp,Np,{skipTitle:Jp})}:function(Rp){return k.draw(Rp,"redraw")};St.push(B,H.doAutoRangeAndConstraints,Sr,H.drawData,H.finalDraw)}var Ko=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,Up=/^[xyz]axis[0-9]*\.autorange$/,e0=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function E0(St,Ht){var Sr=St.layout,Rp=St._fullLayout,Np=Rp._guiEditing,Jp=G(Rp._preGUI,Np),n0=Object.keys(Ht),S0=k.list(St),_0=h.extendDeepAll({},Ht),w0={},X0,$0,Z0;for(n0=Object.keys(Ht),$0=0;$0<n0.length;$0++)if(n0[$0].indexOf("allaxes")===0){for(Z0=0;Z0<S0.length;Z0++){var Am=S0[Z0]._id.substr(1),e1=Am.indexOf("scene")!==-1?Am+".":"",E1=n0[$0].replace("allaxes",e1+S0[Z0]._name);Ht[E1]||(Ht[E1]=Ht[n0[$0]])}delete Ht[n0[$0]]}var N1=Y.layoutFlags(),z1={},r1={};function Lm(Im,Jm){if(Array.isArray(Im)){Im.forEach(function(Ng){Lm(Ng,Jm)});return}if(!(Im in Ht||z.hasParent(Ht,Im))){var R1=Jp(Sr,Im);Im in r1||(r1[Im]=ke(R1.get())),Jm!==void 0&&R1.set(Jm)}}var T1={},O1;function y1(Im){var Jm=k.name2id(Im.split(".")[0]);return T1[Jm]=1,Jm}for(var l1 in Ht){if(z.hasParent(Ht,l1))throw new Error("cannot set "+l1+" and a parent attribute simultaneously");for(var m1=Jp(Sr,l1),t1=Ht[l1],Z1=m1.parts.length,rg=Z1-1;rg>0&&typeof m1.parts[rg]!="string";)rg--;var k1=m1.parts[rg],ug=m1.parts[rg-1]+"."+k1,yg=m1.parts.slice(0,rg).join("."),Eg=_(St.layout,yg).get(),Ig=_(Rp,yg).get(),Q1=m1.get();if(t1!==void 0){z1[l1]=t1,r1[l1]=k1==="reverse"?t1:ke(Q1);var Rg=A.getLayoutValObject(Rp,m1.parts);if(Rg&&Rg.impliedEdits&&t1!==null)for(var cg in Rg.impliedEdits)Lm(h.relativeAttr(l1,cg),Rg.impliedEdits[cg]);if(["width","height"].indexOf(l1)!==-1)if(t1){Lm("autosize",null);var Vm=l1==="height"?"width":"height";Lm(Vm,Rp[Vm])}else Rp[l1]=St._initialAutoSize[l1];else if(l1==="autosize")Lm("width",t1?null:Rp.width),Lm("height",t1?null:Rp.height);else if(ug.match(Ko))y1(ug),_(Rp,yg+"._inputRange").set(null);else if(ug.match(Up)){y1(ug),_(Rp,yg+"._inputRange").set(null);var Xg=_(Rp,yg).get();Xg._inputDomain&&(Xg._input.domain=Xg._inputDomain.slice())}else ug.match(e0)&&_(Rp,yg+"._inputDomain").set(null);if(k1==="type"){O1=Eg;var Ct=Ig.type==="linear"&&t1==="log",Tt=Ig.type==="log"&&t1==="linear";if(Ct||Tt){if(!O1||!O1.range)Lm(yg+".autorange",!0);else if(Ig.autorange)Ct&&(O1.range=O1.range[1]>O1.range[0]?[1,2]:[2,1]);else{var jp=O1.range[0],Zp=O1.range[1];Ct?(jp<=0&&Zp<=0&&Lm(yg+".autorange",!0),jp<=0?jp=Zp/1e6:Zp<=0&&(Zp=jp/1e6),Lm(yg+".range[0]",Math.log(jp)/Math.LN10),Lm(yg+".range[1]",Math.log(Zp)/Math.LN10)):(Lm(yg+".range[0]",Math.pow(10,jp)),Lm(yg+".range[1]",Math.pow(10,Zp)))}Array.isArray(Rp._subplots.polar)&&Rp._subplots.polar.length&&Rp[m1.parts[0]]&&m1.parts[1]==="radialaxis"&&delete Rp[m1.parts[0]]._subplot.viewInitial["radialaxis.range"],w.getComponentMethod("annotations","convertCoords")(St,Ig,t1,Lm),w.getComponentMethod("images","convertCoords")(St,Ig,t1,Lm)}else Lm(yg+".autorange",!0),Lm(yg+".range",null);_(Rp,yg+"._inputRange").set(null)}else if(k1.match(ht)){var l0=_(Rp,l1).get(),Bp=(t1||{}).type;(!Bp||Bp==="-")&&(Bp="linear"),w.getComponentMethod("annotations","convertCoords")(St,l0,Bp,Lm),w.getComponentMethod("images","convertCoords")(St,l0,Bp,Lm)}var Gp=D.containerArrayMatch(l1);if(Gp){X0=Gp.array,$0=Gp.index;var p0=Gp.property,a0=Rg||{editType:"calc"};$0!==""&&p0===""&&(D.isAddVal(t1)?r1[l1]=null:D.isRemoveVal(t1)?r1[l1]=(_(Sr,X0).get()||[])[$0]:h.warn("unrecognized full object value",Ht)),Y.update(N1,a0),w0[X0]||(w0[X0]={});var D0=w0[X0][$0];D0||(D0=w0[X0][$0]={}),D0[p0]=t1,delete Ht[l1]}else k1==="reverse"?(Eg.range?Eg.range.reverse():(Lm(yg+".autorange",!0),Eg.range=[1,0]),Ig.autorange?N1.calc=!0:N1.plot=!0):(l1==="dragmode"&&(t1===!1&&Q1!==!1||t1!==!1&&Q1===!1)||Rp._has("scatter-like")&&Rp._has("regl")&&l1==="dragmode"&&(t1==="lasso"||t1==="select")&&!(Q1==="lasso"||Q1==="select")?N1.plot=!0:Rg?Y.update(N1,Rg):N1.calc=!0,m1.set(t1))}}for(X0 in w0){var z0=D.applyContainerArrayChanges(St,Jp(Sr,X0),w0[X0],N1,Jp);z0||(N1.plot=!0)}for(var am in T1){O1=k.getFromId(St,am);var Ym=O1&&O1._constraintGroup;if(Ym){N1.calc=!0;for(var Hm in Ym)T1[Hm]||(k.getFromId(St,Hm)._constraintShrinkable=!0)}}(m0(St)||Ht.height||Ht.width)&&(N1.plot=!0);var f1=Rp.shapes;for($0=0;$0<f1.length;$0++)if(f1[$0].showlegend){N1.calc=!0;break}return(N1.plot||N1.calc)&&(N1.layoutReplot=!0),{flags:N1,rangesAltered:T1,undoit:r1,redoit:z1,eventData:_0}}function m0(St){var Ht=St._fullLayout,Sr=Ht.width,Rp=Ht.height;return St.layout.autosize&&d.plotAutoSize(St,St.layout,Ht),Ht.width!==Sr||Ht.height!==Rp}function f0(St,Ht,Sr,Rp){St=h.getGraphDiv(St),z.clearPromiseQueue(St),h.isPlainObject(Ht)||(Ht={}),h.isPlainObject(Sr)||(Sr={}),Object.keys(Ht).length&&(St.changed=!0),Object.keys(Sr).length&&(St.changed=!0);var Np=z.coerceTraceIndices(St,Rp),Jp=ct(St,h.extendFlat({},Ht),Np),n0=Jp.flags,S0=E0(St,h.extendFlat({},Sr)),_0=S0.flags;(n0.calc||_0.calc)&&(St.calcdata=void 0),n0.clearAxisTypes&&z.clearAxisTypes(St,Np,Sr);var w0=[];_0.layoutReplot?w0.push(H.layoutReplot):n0.fullReplot?w0.push(Ue._doPlot):(w0.push(d.previousPromises),Gt(St,_0,S0)||d.supplyDefaults(St),n0.style&&w0.push(H.doTraceStyle),(n0.colorbars||_0.colorbars)&&w0.push(H.doColorBars),_0.legend&&w0.push(H.doLegend),_0.layoutstyle&&w0.push(H.layoutStyles),_0.axrange&&$t(w0,S0.rangesAltered),_0.ticks&&w0.push(H.doTicksRelayout),_0.modebar&&w0.push(H.doModeBar),_0.camera&&w0.push(H.doCamera),w0.push(ft)),w0.push(d.rehover,d.redrag,d.reselect),x.add(St,f0,[St,Jp.undoit,S0.undoit,Jp.traces],f0,[St,Jp.redoit,S0.redoit,Jp.traces]);var X0=h.syncOrAsync(w0,St);return(!X0||!X0.then)&&(X0=Promise.resolve(St)),X0.then(function(){return St.emit("plotly_update",{data:Jp.eventData,layout:S0.eventData}),St})}function la(St){return function(Ht){Ht._fullLayout._guiEditing=!0;var Sr=St.apply(null,arguments);return Ht._fullLayout._guiEditing=!1,Sr}}var $o=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^(map\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],jt=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function Fp(St,Ht){for(var Sr=0;Sr<Ht.length;Sr++){var Rp=Ht[Sr],Np=St.match(Rp.pattern);if(Np){var Jp=Np[1]||"";return{head:Jp,tail:St.substr(Jp.length+1),attr:Rp.attr}}}}function i0(St,Ht){var Sr=_(Ht,St).get();if(Sr!==void 0)return Sr;var Rp=St.split(".");for(Rp.pop();Rp.length>1;)if(Rp.pop(),Sr=_(Ht,Rp.join(".")+".uirevision").get(),Sr!==void 0)return Sr;return Ht.uirevision}function b0(St,Ht){for(var Sr=0;Sr<Ht.length;Sr++)if(Ht[Sr]._fullInput.uid===St)return Sr;return-1}function O0(St,Ht,Sr){for(var Rp=0;Rp<Ht.length;Rp++)if(Ht[Rp].uid===St)return Rp;return!Ht[Sr]||Ht[Sr].uid?-1:Sr}function C0(St,Ht){var Sr=h.isPlainObject(St),Rp=Array.isArray(St);return Sr||Rp?(Sr&&h.isPlainObject(Ht)||Rp&&Array.isArray(Ht))&&JSON.stringify(St)===JSON.stringify(Ht):St===Ht}function I0(St,Ht,Sr,Rp){var Np=Rp._preGUI,Jp,n0,S0,_0,w0,X0,$0,Z0,Am,e1,E1=[],N1={},z1={};for(Jp in Np){if(w0=Fp(Jp,$o),w0){if(Am=w0.head,e1=w0.tail,n0=w0.attr||Am+".uirevision",S0=_(Rp,n0).get(),_0=S0&&i0(n0,Ht),_0&&_0===S0){if(X0=Np[Jp],X0===null&&(X0=void 0),$0=_(Ht,Jp),Z0=$0.get(),C0(Z0,X0)){Z0===void 0&&e1==="autorange"&&E1.push(Am),$0.set(ke(_(Rp,Jp).get()));continue}else if(e1==="autorange"||e1.substr(0,6)==="range["){var r1=Np[Am+".range[0]"],Lm=Np[Am+".range[1]"],T1=Np[Am+".autorange"];if(T1||T1===null&&r1===null&&Lm===null){if(!(Am in N1)){var O1=_(Ht,Am).get();N1[Am]=O1&&(O1.autorange||O1.autorange!==!1&&(!O1.range||O1.range.length!==2))}if(N1[Am]){$0.set(ke(_(Rp,Jp).get()));continue}}}}}else h.warn("unrecognized GUI edit: "+Jp);delete Np[Jp],w0&&w0.tail.substr(0,6)==="range["&&(z1[w0.head]=1)}for(var y1=0;y1<E1.length;y1++){var l1=E1[y1];if(z1[l1]){var m1=_(Ht,l1).get();m1&&delete m1.autorange}}var t1=Rp._tracePreGUI;for(var Z1 in t1){var rg=t1[Z1],k1=null,ug;for(Jp in rg){if(!k1){var yg=b0(Z1,Sr);if(yg<0){delete t1[Z1];break}var Eg=Sr[yg];ug=Eg._fullInput;var Ig=O0(Z1,St,ug.index);if(Ig<0){delete t1[Z1];break}k1=St[Ig]}if(w0=Fp(Jp,jt),w0){if(w0.attr?(S0=_(Rp,w0.attr).get(),_0=S0&&i0(w0.attr,Ht)):(S0=ug.uirevision,_0=k1.uirevision,_0===void 0&&(_0=Ht.uirevision)),_0&&_0===S0&&(X0=rg[Jp],X0===null&&(X0=void 0),$0=_(k1,Jp),Z0=$0.get(),C0(Z0,X0))){$0.set(ke(_(ug,Jp).get()));continue}}else h.warn("unrecognized GUI edit: "+Jp+" in trace uid "+Z1);delete rg[Jp]}}}function V0(St,Ht,Sr,Rp){var Np,Jp;function n0(){return Ue.addFrames(St,Np)}St=h.getGraphDiv(St),z.clearPromiseQueue(St);var S0=St._fullData,_0=St._fullLayout;if(!h.isPlotDiv(St)||!S0||!_0)Jp=Ue.newPlot(St,Ht,Sr,Rp);else{if(h.isPlainObject(Ht)){var w0=Ht;Ht=w0.data,Sr=w0.layout,Rp=w0.config,Np=w0.frames}var X0=!1;if(Rp){let ug=h.extendDeepAll({},St._context);St._context=void 0,rt(St,Rp),X0=!z.collectionsAreEqual(ug,St._context)}if(X0){let ug=St._ev.eventNames().map(yg=>[yg,St._ev.listeners(yg)]);Jp=Ue.newPlot(St,Ht,Sr,Rp).then(()=>{for(let[yg,Eg]of ug)Eg.forEach(Ig=>St.on(yg,Ig));return Ue.react(St,Ht,Sr,Rp)})}else{St.data=Ht||[],z.cleanData(St.data),St.layout=Sr||{},z.cleanLayout(St.layout),I0(St.data,St.layout,S0,_0),d.supplyDefaults(St,{skipUpdateCalc:!0});var $0=St._fullData,Z0=St._fullLayout,Am=Z0.datarevision===void 0,e1=Z0.transition,E1=im(St,_0,Z0,Am,e1),N1=E1.newDataRevision,z1=H0(St,S0,$0,Am,e1,N1);if(m0(St)&&(E1.layoutReplot=!0),z1.calc||E1.calc){St.calcdata=void 0;for(var r1=Object.getOwnPropertyNames(Z0),Lm=0;Lm<r1.length;Lm++){var T1=r1[Lm],O1=T1.substring(0,5);if(O1==="xaxis"||O1==="yaxis"){var y1=Z0[T1]._emptyCategories;y1&&y1()}}}else d.supplyDefaultsUpdateCalc(St.calcdata,$0);var l1=[];if(Np&&(St._transitionData={},d.createTransitionData(St),l1.push(n0)),Z0.transition&&(z1.anim||E1.anim))E1.ticks&&l1.push(H.doTicksRelayout),d.doCalcdata(St),H.doAutoRangeAndConstraints(St),l1.push(function(){return d.transitionFromReact(St,z1,E1,_0)});else if(z1.fullReplot||E1.layoutReplot)St._fullLayout._skipDefaults=!0,l1.push(Ue._doPlot);else{for(var m1 in E1.arrays){var t1=E1.arrays[m1];if(t1.length){var Z1=w.getComponentMethod(m1,"drawOne");if(Z1!==h.noop)for(var rg=0;rg<t1.length;rg++)Z1(St,t1[rg]);else{var k1=w.getComponentMethod(m1,"draw");if(k1===h.noop)throw new Error("cannot draw components: "+m1);k1(St)}}}l1.push(d.previousPromises),z1.style&&l1.push(H.doTraceStyle),(z1.colorbars||E1.colorbars)&&l1.push(H.doColorBars),E1.legend&&l1.push(H.doLegend),E1.layoutstyle&&l1.push(H.layoutStyles),E1.axrange&&$t(l1),E1.ticks&&l1.push(H.doTicksRelayout),E1.modebar&&l1.push(H.doModeBar),E1.camera&&l1.push(H.doCamera),l1.push(ft)}l1.push(d.rehover,d.redrag,d.reselect),Jp=h.syncOrAsync(l1,St),(!Jp||!Jp.then)&&(Jp=Promise.resolve(St))}}return Jp.then(()=>(X0||St.emit("plotly_react",{config:Rp,data:Ht,layout:Sr}),St))}function H0(St,Ht,Sr,Rp,Np,Jp){var n0=Ht.length===Sr.length;if(!Np&&!n0)return{fullReplot:!0,calc:!0};var S0=Y.traceFlags();S0.arrays={},S0.nChanges=0,S0.nChangesAnim=0;var _0,w0;function X0(Am){var e1=A.getTraceValObject(w0,Am);return!w0._module.animatable&&e1.anim&&(e1.anim=!1),e1}var $0={getValObject:X0,flags:S0,immutable:Rp,transition:Np,newDataRevision:Jp,gd:St},Z0={};for(_0=0;_0<Ht.length;_0++)if(Sr[_0]){if(w0=Sr[_0]._fullInput,Z0[w0.uid])continue;Z0[w0.uid]=1,k0(Ht[_0]._fullInput,w0,[],$0)}return(S0.calc||S0.plot)&&(S0.fullReplot=!0),Np&&S0.nChanges&&S0.nChangesAnim&&(S0.anim=S0.nChanges===S0.nChangesAnim&&n0?"all":"some"),S0}function im(St,Ht,Sr,Rp,Np){var Jp=Y.layoutFlags();Jp.arrays={},Jp.rangesAltered={},Jp.nChanges=0,Jp.nChangesAnim=0;function n0(Z0){return A.getLayoutValObject(Sr,Z0)}for(var S0 in Sr)if(!(!S0.startsWith("xaxis")&&!S0.startsWith("yaxis"))&&Ht[S0]){var _0=Sr[S0].domain,w0=Ht[S0].domain,X0=Ht[S0]._inputDomain;Ht[S0]._inputDomain&&(_0[0]===X0[0]&&_0[1]===X0[1]?Sr[S0].domain=Ht[S0].domain:(_0[0]!==w0[0]||_0[1]!==w0[1])&&(Sr[S0]._inputDomain=null))}var $0={getValObject:n0,flags:Jp,immutable:Rp,transition:Np,gd:St};return k0(Ht,Sr,[],$0),(Jp.plot||Jp.calc)&&(Jp.layoutReplot=!0),Np&&Jp.nChanges&&Jp.nChangesAnim&&(Jp.anim=Jp.nChanges===Jp.nChangesAnim?"all":"some"),Jp}function k0(St,Ht,Sr,Rp){var Np,Jp,n0,S0=Rp.getValObject,_0=Rp.flags,w0=Rp.immutable,X0=Rp.inArray,$0=Rp.arrayIndex;function Z0(){var yg=Np.editType;if(X0&&yg.indexOf("arraydraw")!==-1){h.pushUnique(_0.arrays[X0],$0);return}Y.update(_0,Np),yg!=="none"&&_0.nChanges++,Rp.transition&&Np.anim&&_0.nChangesAnim++,(Ko.test(n0)||Up.test(n0))&&(_0.rangesAltered[Sr[0]]=1),Jp==="datarevision"&&(_0.newDataRevision=1)}function Am(yg){return yg.valType==="data_array"||yg.arrayOk}for(Jp in St){if(_0.calc&&!Rp.transition)return;var e1=St[Jp],E1=Ht[Jp],N1=Sr.concat(Jp);if(n0=N1.join("."),!(Jp.charAt(0)==="_"||typeof e1=="function"||e1===E1)){if((Jp==="tick0"||Jp==="dtick")&&Sr[0]!=="geo"){var z1=Ht.tickmode;if(z1==="auto"||z1==="array"||!z1)continue}if(!(Jp==="range"&&Ht.autorange)&&!((Jp==="zmin"||Jp==="zmax")&&Ht.type==="contourcarpet")&&(Np=S0(N1),!!Np&&!(Np._compareAsJSON&&JSON.stringify(e1)===JSON.stringify(E1)))){var r1=Np.valType,Lm,T1=Am(Np),O1=Array.isArray(e1),y1=Array.isArray(E1);if(O1&&y1){var l1="_input_"+Jp,m1=St[l1],t1=Ht[l1];if(Array.isArray(m1)&&m1===t1)continue}if(E1===void 0)T1&&O1?_0.calc=!0:Z0();else if(Np._isLinkedToArray){var Z1=[],rg=!1;X0||(_0.arrays[Jp]=Z1);var k1=Math.min(e1.length,E1.length),ug=Math.max(e1.length,E1.length);if(k1!==ug)if(Np.editType==="arraydraw")rg=!0;else{Z0();continue}for(Lm=0;Lm<k1;Lm++)k0(e1[Lm],E1[Lm],N1.concat(Lm),h.extendFlat({inArray:Jp,arrayIndex:Lm},Rp));if(rg)for(Lm=k1;Lm<ug;Lm++)Z1.push(Lm)}else!r1&&h.isPlainObject(e1)?k0(e1,E1,N1,Rp):T1?O1&&y1?(w0&&(_0.calc=!0),(w0||Rp.newDataRevision)&&Z0()):O1!==y1?_0.calc=!0:Z0():O1&&y1?(e1.length!==E1.length||String(e1)!==String(E1))&&Z0():Z0()}}}for(Jp in Ht)if(!(Jp in St||Jp.charAt(0)==="_"||typeof Ht[Jp]=="function"))if(Np=S0(Sr.concat(Jp)),Am(Np)&&Array.isArray(Ht[Jp])){_0.calc=!0;return}else Z0()}function fm(St,Ht,Sr){if(St=h.getGraphDiv(St),!h.isPlotDiv(St))throw new Error("This element is not a Plotly plot: "+St+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var Rp=St._transitionData;Rp._frameQueue||(Rp._frameQueue=[]),Sr=d.supplyAnimationDefaults(Sr);var Np=Sr.transition,Jp=Sr.frame;Rp._frameWaitingCnt===void 0&&(Rp._frameWaitingCnt=0);function n0(w0){return Array.isArray(Np)?w0>=Np.length?Np[0]:Np[w0]:Np}function S0(w0){return Array.isArray(Jp)?w0>=Jp.length?Jp[0]:Jp[w0]:Jp}function _0(w0,X0){var $0=0;return function(){if(w0&&++$0===X0)return w0()}}return new Promise(function(w0,X0){function $0(){if(Rp._frameQueue.length!==0){for(;Rp._frameQueue.length;){var k1=Rp._frameQueue.pop();k1.onInterrupt&&k1.onInterrupt()}St.emit("plotly_animationinterrupted",[])}}function Z0(k1){if(k1.length!==0){for(var ug=0;ug<k1.length;ug++){var yg;k1[ug].type==="byname"?yg=d.computeFrame(St,k1[ug].name):yg=k1[ug].data;var Eg=S0(ug),Ig=n0(ug);Ig.duration=Math.min(Ig.duration,Eg.duration);var Q1={frame:yg,name:k1[ug].name,frameOpts:Eg,transitionOpts:Ig};ug===k1.length-1&&(Q1.onComplete=_0(w0,2),Q1.onInterrupt=X0),Rp._frameQueue.push(Q1)}Sr.mode==="immediate"&&(Rp._lastFrameAt=-1/0),Rp._animationRaf||E1()}}function Am(){St.emit("plotly_animated"),window.cancelAnimationFrame(Rp._animationRaf),Rp._animationRaf=null}function e1(){Rp._currentFrame&&Rp._currentFrame.onComplete&&Rp._currentFrame.onComplete();var k1=Rp._currentFrame=Rp._frameQueue.shift();if(k1){var ug=k1.name?k1.name.toString():null;St._fullLayout._currentFrame=ug,Rp._lastFrameAt=Date.now(),Rp._timeToNext=k1.frameOpts.duration,d.transition(St,k1.frame.data,k1.frame.layout,z.coerceTraceIndices(St,k1.frame.traces),k1.frameOpts,k1.transitionOpts).then(function(){k1.onComplete&&k1.onComplete()}),St.emit("plotly_animatingframe",{name:ug,frame:k1.frame,animation:{frame:k1.frameOpts,transition:k1.transitionOpts}})}else Am()}function E1(){St.emit("plotly_animating"),Rp._lastFrameAt=-1/0,Rp._timeToNext=0,Rp._runningTransitions=0,Rp._currentFrame=null;var k1=function(){Rp._animationRaf=window.requestAnimationFrame(k1),Date.now()-Rp._lastFrameAt>Rp._timeToNext&&e1()};k1()}var N1=0;function z1(k1){return Array.isArray(Np)?N1>=Np.length?k1.transitionOpts=Np[N1]:k1.transitionOpts=Np[0]:k1.transitionOpts=Np,N1++,k1}var r1,Lm,T1=[],O1=Ht==null,y1=Array.isArray(Ht),l1=!O1&&!y1&&h.isPlainObject(Ht);if(l1)T1.push({type:"object",data:z1(h.extendFlat({},Ht))});else if(O1||["string","number"].indexOf(typeof Ht)!==-1)for(r1=0;r1<Rp._frames.length;r1++)Lm=Rp._frames[r1],Lm&&(O1||String(Lm.group)===String(Ht))&&T1.push({type:"byname",name:String(Lm.name),data:z1({name:Lm.name})});else if(y1)for(r1=0;r1<Ht.length;r1++){var m1=Ht[r1];["number","string"].indexOf(typeof m1)!==-1?(m1=String(m1),T1.push({type:"byname",name:m1,data:z1({name:m1})})):h.isPlainObject(m1)&&T1.push({type:"object",data:z1(h.extendFlat({},m1))})}for(r1=0;r1<T1.length;r1++)if(Lm=T1[r1],Lm.type==="byname"&&!Rp._frameHash[Lm.data.name]){h.warn('animate failure: frame not found: "'+Lm.data.name+'"'),X0();return}["next","immediate"].indexOf(Sr.mode)!==-1&&$0(),Sr.direction==="reverse"&&T1.reverse();var t1=St._fullLayout._currentFrame;if(t1&&Sr.fromcurrent){var Z1=-1;for(r1=0;r1<T1.length;r1++)if(Lm=T1[r1],Lm.type==="byname"&&Lm.name===t1){Z1=r1;break}if(Z1>0&&Z1<T1.length-1){var rg=[];for(r1=0;r1<T1.length;r1++)Lm=T1[r1],(T1[r1].type!=="byname"||r1>Z1)&&rg.push(Lm);T1=rg}}T1.length>0?Z0(T1):(St.emit("plotly_animated"),w0())})}function Tm(St,Ht,Sr){if(St=h.getGraphDiv(St),Ht==null)return Promise.resolve();if(!h.isPlotDiv(St))throw new Error("This element is not a Plotly plot: "+St+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var Rp,Np,Jp,n0,S0=St._transitionData._frames,_0=St._transitionData._frameHash;if(!Array.isArray(Ht))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+Ht);var w0=S0.length+Ht.length*2,X0=[],$0={};for(Rp=Ht.length-1;Rp>=0;Rp--)if(h.isPlainObject(Ht[Rp])){var Z0=Ht[Rp].name,Am=(_0[Z0]||$0[Z0]||{}).name,e1=Ht[Rp].name,E1=_0[Am]||$0[Am];Am&&e1&&typeof e1=="number"&&E1&&Se<ie&&(Se++,h.warn('addFrames: overwriting frame "'+(_0[Am]||$0[Am]).name+'" with a frame whose name of type "number" also equates to "'+Am+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),Se===ie&&h.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),$0[Z0]={name:Z0},X0.push({frame:d.supplyFrameDefaults(Ht[Rp]),index:Sr&&Sr[Rp]!==void 0&&Sr[Rp]!==null?Sr[Rp]:w0+Rp})}X0.sort(function(l1,m1){return l1.index>m1.index?-1:l1.index<m1.index?1:0});var N1=[],z1=[],r1=S0.length;for(Rp=X0.length-1;Rp>=0;Rp--){if(Np=X0[Rp].frame,typeof Np.name=="number"&&h.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!Np.name)for(;_0[Np.name="frame "+St._transitionData._counter++];);if(_0[Np.name]){for(Jp=0;Jp<S0.length&&(S0[Jp]||{}).name!==Np.name;Jp++);N1.push({type:"replace",index:Jp,value:Np}),z1.unshift({type:"replace",index:Jp,value:S0[Jp]})}else n0=Math.max(0,Math.min(X0[Rp].index,r1)),N1.push({type:"insert",index:n0,value:Np}),z1.unshift({type:"delete",index:n0}),r1++}var Lm=d.modifyFrames,T1=d.modifyFrames,O1=[St,z1],y1=[St,N1];return x&&x.add(St,Lm,O1,T1,y1),d.modifyFrames(St,N1)}function om(St,Ht){if(St=h.getGraphDiv(St),!h.isPlotDiv(St))throw new Error("This element is not a Plotly plot: "+St);var Sr,Rp,Np=St._transitionData._frames,Jp=[],n0=[];if(!Ht)for(Ht=[],Sr=0;Sr<Np.length;Sr++)Ht.push(Sr);for(Ht=Ht.slice(),Ht.sort(),Sr=Ht.length-1;Sr>=0;Sr--)Rp=Ht[Sr],Jp.push({type:"delete",index:Rp}),n0.unshift({type:"insert",index:Rp,value:Np[Rp]});var S0=d.modifyFrames,_0=d.modifyFrames,w0=[St,n0],X0=[St,Jp];return x&&x.add(St,S0,w0,_0,X0),d.modifyFrames(St,Jp)}function Rm(St){St=h.getGraphDiv(St);var Ht=St._fullLayout||{},Sr=St._fullData||[];return d.cleanPlot([],{},Sr,Ht),d.purge(St),y.purge(St),Ht._container&&Ht._container.remove(),delete St._context,St}function ci(St){var Ht=St._fullLayout,Sr=St.getBoundingClientRect();if(!h.equalDomRects(Sr,Ht._lastBBox)){var Rp=Ht._invTransform=h.inverseTransformMatrix(h.getFullTransformMatrix(St));Ht._invScaleX=Math.sqrt(Rp[0][0]*Rp[0][0]+Rp[0][1]*Rp[0][1]+Rp[0][2]*Rp[0][2]),Ht._invScaleY=Math.sqrt(Rp[1][0]*Rp[1][0]+Rp[1][1]*Rp[1][1]+Rp[1][2]*Rp[1][2]),Ht._lastBBox=Sr}}function Hp(St){var Ht=ve.select(St),Sr=St._fullLayout;if(Sr._calcInverseTransform=ci,Sr._calcInverseTransform(St),Sr._container=Ht.selectAll(".plot-container").data([0]),Sr._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0).style({width:"100%",height:"100%"}),Sr._paperdiv=Sr._container.selectAll(".svg-container").data([0]),Sr._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),Sr._glcontainer=Sr._paperdiv.selectAll(".gl-container").data([{}]),Sr._glcontainer.enter().append("div").classed("gl-container",!0),Sr._paperdiv.selectAll(".main-svg").remove(),Sr._paperdiv.select(".modebar-container").remove(),Sr._paper=Sr._paperdiv.insert("svg",":first-child").classed("main-svg",!0),Sr._toppaper=Sr._paperdiv.append("svg").classed("main-svg",!0),Sr._modebardiv=Sr._paperdiv.append("div"),delete Sr._modeBar,Sr._hoverpaper=Sr._paperdiv.append("svg").classed("main-svg",!0),!Sr._uid){var Rp={};ve.selectAll("defs").each(function(){this.id&&(Rp[this.id.split("-")[1]]=1)}),Sr._uid=h.randstr(Rp)}Sr._paperdiv.selectAll(".main-svg").attr(O.svgAttrs),Sr._defs=Sr._paper.append("defs").attr("id","defs-"+Sr._uid),Sr._clips=Sr._defs.append("g").classed("clips",!0),Sr._topdefs=Sr._toppaper.append("defs").attr("id","topdefs-"+Sr._uid),Sr._topclips=Sr._topdefs.append("g").classed("clips",!0),Sr._bgLayer=Sr._paper.append("g").classed("bglayer",!0),Sr._draggers=Sr._paper.append("g").classed("draglayer",!0);var Np=Sr._paper.append("g").classed("layer-below",!0);Sr._imageLowerLayer=Np.append("g").classed("imagelayer",!0),Sr._shapeLowerLayer=Np.append("g").classed("shapelayer",!0),Sr._cartesianlayer=Sr._paper.append("g").classed("cartesianlayer",!0),Sr._polarlayer=Sr._paper.append("g").classed("polarlayer",!0),Sr._smithlayer=Sr._paper.append("g").classed("smithlayer",!0),Sr._ternarylayer=Sr._paper.append("g").classed("ternarylayer",!0),Sr._geolayer=Sr._paper.append("g").classed("geolayer",!0),Sr._funnelarealayer=Sr._paper.append("g").classed("funnelarealayer",!0),Sr._pielayer=Sr._paper.append("g").classed("pielayer",!0),Sr._iciclelayer=Sr._paper.append("g").classed("iciclelayer",!0),Sr._treemaplayer=Sr._paper.append("g").classed("treemaplayer",!0),Sr._sunburstlayer=Sr._paper.append("g").classed("sunburstlayer",!0),Sr._indicatorlayer=Sr._toppaper.append("g").classed("indicatorlayer",!0),Sr._glimages=Sr._paper.append("g").classed("glimages",!0);var Jp=Sr._toppaper.append("g").classed("layer-above",!0);Sr._imageUpperLayer=Jp.append("g").classed("imagelayer",!0),Sr._shapeUpperLayer=Jp.append("g").classed("shapelayer",!0),Sr._selectionLayer=Sr._toppaper.append("g").classed("selectionlayer",!0),Sr._infolayer=Sr._toppaper.append("g").classed("infolayer",!0),Sr._menulayer=Sr._toppaper.append("g").classed("menulayer",!0),Sr._zoomlayer=Sr._toppaper.append("g").classed("zoomlayer",!0),Sr._hoverlayer=Sr._hoverpaper.append("g").classed("hoverlayer",!0),Sr._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),St.emit("plotly_framework")}Ue.animate=fm,Ue.addFrames=Tm,Ue.deleteFrames=om,Ue.addTraces=ut,Ue.deleteTraces=$,Ue.extendTraces=jo,Ue.moveTraces=yt,Ue.prependTraces=lt,Ue.newPlot=pt,Ue._doPlot=X,Ue.purge=Rm,Ue.react=V0,Ue.redraw=dt,Ue.relayout=kt,Ue.restyle=Lt,Ue.setPlotConfig=Le,Ue.update=f0,Ue._guiRelayout=la(kt),Ue._guiRestyle=la(Lt),Ue._guiUpdate=la(f0),Ue._storeDirectGUIEdit=et}),zx=t(Ue=>{var ve=p1();Ue.getDelay=function(h){return h._has&&(h._has("gl3d")||h._has("mapbox")||h._has("map"))?500:0},Ue.getRedrawFunc=function(h){return function(){ve.getComponentMethod("colorbar","draw")(h)}},Ue.encodeSVG=function(h){return"data:image/svg+xml,"+encodeURIComponent(h)},Ue.encodeJSON=function(h){return"data:application/json,"+encodeURIComponent(h)};var v=window.URL||window.webkitURL;Ue.createObjectURL=function(h){return v.createObjectURL(h)},Ue.revokeObjectURL=function(h){return v.revokeObjectURL(h)},Ue.createBlob=function(h,_){if(_==="svg")return new window.Blob([h],{type:"image/svg+xml;charset=utf-8"});if(_==="full-json")return new window.Blob([h],{type:"application/json;charset=utf-8"});var y=c(window.atob(h));return new window.Blob([y],{type:"image/"+_})},Ue.octetStream=function(h){document.location.href="data:application/octet-stream"+h};function c(h){for(var _=h.length,y=new ArrayBuffer(_),x=new Uint8Array(y),w=0;w<_;w++)x[w]=h.charCodeAt(w);return y}Ue.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/}),Mb=t((Ue,ve)=>{var v=l();Re();var c=Y0(),h=sa();Mg();var _=/"/g,y="TOBESTRIPPED",x=new RegExp('("'+y+")|("+y+'")',"g");function w(d){var k=v.select("body").append("div").style({display:"none"}).html(""),T=d.replace(/(&[^;]*;)/gi,function(L){return L==="&lt;"?"&#60;":L==="&rt;"?"&#62;":L.indexOf("<")!==-1||L.indexOf(">")!==-1?"":k.html(L).text()});return k.remove(),T}function A(d){return d.replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")}ve.exports=function(d,k,T){var L=d._fullLayout,j=L._paper,P=L._toppaper,N=L.width,O=L.height,B;j.insert("rect",":first-child").call(c.setRect,0,0,N,O).call(h.fill,L.paper_bgcolor);var S=L._basePlotModules||[];for(B=0;B<S.length;B++){var D=S[B];D.toSVG&&D.toSVG(d)}if(P){var z=P.node().childNodes,H=Array.prototype.slice.call(z);for(B=0;B<H.length;B++){var Y=H[B];Y.childNodes.length&&j.node().appendChild(Y)}}L._draggers&&L._draggers.remove(),j.node().style.background="",j.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var Se=v.select(this);if(this.style.visibility==="hidden"||this.style.display==="none"){Se.remove();return}else Se.style({visibility:null,display:null});var ie=this.style.fontFamily;ie&&ie.indexOf('"')!==-1&&Se.style("font-family",ie.replace(_,y));var X=this.style.fontWeight;X&&(X==="normal"||X==="400")&&Se.style("font-weight",void 0);var ft=this.style.fontStyle;ft&&ft==="normal"&&Se.style("font-style",void 0);var Le=this.style.fontVariant;Le&&Le==="normal"&&Se.style("font-variant",void 0)}),j.selectAll(".gradient_filled,.pattern_filled").each(function(){var Se=v.select(this),ie=this.style.fill;ie&&ie.indexOf("url(")!==-1&&Se.style("fill",ie.replace(_,y));var X=this.style.stroke;X&&X.indexOf("url(")!==-1&&Se.style("stroke",X.replace(_,y))}),(k==="pdf"||k==="eps")&&j.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),k==="svg"&&T&&(j.attr("width",T*N),j.attr("height",T*O),j.attr("viewBox","0 0 "+N+" "+O));var ht=new window.XMLSerializer().serializeToString(j.node());return ht=w(ht),ht=A(ht),ht=ht.replace(x,"'"),ht}}),Px=t((Ue,ve)=>{var v=Re(),c=s0().EventEmitter,h=zx();function _(y){var x=y.emitter||new c,w=new Promise(function(A,d){var k=window.Image,T=y.svg,L=y.format||"png",j=y.canvas,P=y.scale||1,N=y.width||300,O=y.height||150,B=P*N,S=P*O,D=j.getContext("2d",{willReadFrequently:!0}),z=new k,H,Y;L==="svg"||v.isSafari()?Y=h.encodeSVG(T):(H=h.createBlob(T,"svg"),Y=h.createObjectURL(H)),j.width=B,j.height=S,z.onload=function(){var ht;switch(H=null,h.revokeObjectURL(Y),L!=="svg"&&D.drawImage(z,0,0,B,S),L){case"jpeg":ht=j.toDataURL("image/jpeg");break;case"png":ht=j.toDataURL("image/png");break;case"webp":ht=j.toDataURL("image/webp");break;case"svg":ht=Y;break;default:var Se="Image format is not jpeg, png, svg or webp.";if(d(new Error(Se)),!y.promise)return x.emit("error",Se)}A(ht),y.promise||x.emit("success",ht)},z.onerror=function(ht){if(H=null,h.revokeObjectURL(Y),d(ht),!y.promise)return x.emit("error",ht)},z.src=Y});return y.promise?w:x}ve.exports=_}),L_=t((Ue,ve)=>{var v=E(),c=Tb(),h=lg(),_=Re(),y=zx(),x=Mb(),w=Px(),A=a().version,d={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};function k(T,L){L=L||{};var j,P,N,O;_.isPlainObject(T)?(j=T.data||[],P=T.layout||{},N=T.config||{},O={}):(T=_.getGraphDiv(T),j=_.extendDeep([],T.data),P=_.extendDeep({},T.layout),N=T._context,O=T._fullLayout||{});function B(pt){return!(pt in L)||_.validate(L[pt],d[pt])}if(!B("width")&&L.width!==null||!B("height")&&L.height!==null)throw new Error("Height and width should be pixel values.");if(!B("format"))throw new Error("Export format is not "+_.join2(d.format.values,", "," or ")+".");var S={};function D(pt,se){return _.coerce(L,S,d,pt,se)}var z=D("format"),H=D("width"),Y=D("height"),ht=D("scale"),Se=D("setBackground"),ie=D("imageDataOnly"),X=document.createElement("div");X.style.position="absolute",X.style.left="-5000px",document.body.appendChild(X);var ft=_.extendFlat({},P);H?ft.width=H:L.width===null&&v(O.width)&&(ft.width=O.width),Y?ft.height=Y:L.height===null&&v(O.height)&&(ft.height=O.height);var Le=_.extendFlat({},N,{_exportedPlot:!0,staticPlot:!0,setBackground:Se}),nt=y.getRedrawFunc(X);function Ze(){return new Promise(function(pt){setTimeout(pt,y.getDelay(X._fullLayout))})}function rt(){return new Promise(function(pt,se){var gt=x(X,z,ht),xt=X._fullLayout.width,Nt=X._fullLayout.height;function Rt(){c.purge(X),document.body.removeChild(X)}if(z==="full-json"){var Pt=h.graphJson(X,!1,"keepdata","object",!0,!0);return Pt.version=A,Pt=JSON.stringify(Pt),Rt(),pt(ie?Pt:y.encodeJSON(Pt))}if(Rt(),z==="svg")return pt(ie?gt:y.encodeSVG(gt));var xn=document.createElement("canvas");xn.id=_.randstr(),w({format:z,width:xt,height:Nt,scale:ht,canvas:xn,svg:gt,promise:!0}).then(pt).catch(se)})}function dt(pt){return ie?pt.replace(y.IMAGE_URL_PREFIX,""):pt}return new Promise(function(pt,se){c.newPlot(X,j,ft,Le).then(nt).then(Ze).then(rt).then(function(gt){pt(dt(gt))}).catch(function(gt){se(gt)})})}ve.exports=k}),q2=t((Ue,ve)=>{var v=Re(),c=lg(),h=Bm(),_=Cp().dfltConfig,y=v.isPlainObject,x=Array.isArray,w=v.isArrayOrTypedArray;ve.exports=function(S,D){S===void 0&&(S=[]),D===void 0&&(D={});var z=h.get(),H=[],Y={_context:v.extendFlat({},_)},ht,Se;x(S)?(Y.data=v.extendDeep([],S),ht=S):(Y.data=[],ht=[],H.push(L("array","data"))),y(D)?(Y.layout=v.extendDeep({},D),Se=D):(Y.layout={},Se={},arguments.length>1&&H.push(L("object","layout"))),c.supplyDefaults(Y);for(var ie=Y._fullData,X=ht.length,ft=0;ft<X;ft++){var Le=ht[ft],nt=["data",ft];if(!y(Le)){H.push(L("object",nt));continue}var Ze=ie[ft],rt=Ze.type,dt=z.traces[rt].attributes;dt.type={valType:"enumerated",values:[rt]},Ze.visible===!1&&Le.visible!==!1&&H.push(L("invisible",nt)),A(Le,Ze,dt,H,nt)}var pt=Y._fullLayout,se=d(z,ie);return A(Se,pt,se,H,"layout"),H.length===0?void 0:H};function A(S,D,z,H,Y,ht){ht=ht||[];for(var Se=Object.keys(S),ie=0;ie<Se.length;ie++){var X=Se[ie],ft=ht.slice();ft.push(X);var Le=S[X],nt=D[X],Ze=P(z,X),rt=(Ze||{}).valType,dt=rt==="info_array",pt=rt==="colorscale",se=(Ze||{}).items;if(!j(z,X))H.push(L("schema",Y,ft));else if(y(Le)&&y(nt)&&rt!=="any")A(Le,nt,Ze,H,Y,ft);else if(dt&&x(Le)){Le.length>nt.length&&H.push(L("unused",Y,ft.concat(nt.length)));var gt=nt.length,xt=Array.isArray(se);xt&&(gt=Math.min(gt,se.length));var Nt,Rt,Pt,xn,oa;if(Ze.dimensions===2)for(Rt=0;Rt<gt;Rt++)if(x(Le[Rt])){Le[Rt].length>nt[Rt].length&&H.push(L("unused",Y,ft.concat(Rt,nt[Rt].length)));var jo=nt[Rt].length;for(Nt=0;Nt<(xt?Math.min(jo,se[Rt].length):jo);Nt++)Pt=xt?se[Rt][Nt]:se,xn=Le[Rt][Nt],oa=nt[Rt][Nt],v.validate(xn,Pt)?oa!==xn&&oa!==+xn&&H.push(L("dynamic",Y,ft.concat(Rt,Nt),xn,oa)):H.push(L("value",Y,ft.concat(Rt,Nt),xn))}else H.push(L("array",Y,ft.concat(Rt),Le[Rt]));else for(Rt=0;Rt<gt;Rt++)Pt=xt?se[Rt]:se,xn=Le[Rt],oa=nt[Rt],v.validate(xn,Pt)?oa!==xn&&oa!==+xn&&H.push(L("dynamic",Y,ft.concat(Rt),xn,oa)):H.push(L("value",Y,ft.concat(Rt),xn))}else if(Ze.items&&!dt&&x(Le)){var lt=se[Object.keys(se)[0]],ut=[],$,yt;for($=0;$<nt.length;$++){var Lt=nt[$]._index||$;if(yt=ft.slice(),yt.push(Lt),y(Le[Lt])&&y(nt[$])){ut.push(Lt);var ke=Le[Lt],G=nt[$];y(ke)&&ke.visible!==!1&&G.visible===!1?H.push(L("invisible",Y,yt)):A(ke,G,lt,H,Y,yt)}}for($=0;$<Le.length;$++)yt=ft.slice(),yt.push($),y(Le[$])?ut.indexOf($)===-1&&H.push(L("unused",Y,yt)):H.push(L("object",Y,yt,Le[$]))}else!y(Le)&&y(nt)?H.push(L("object",Y,ft,Le)):!w(Le)&&w(nt)&&!dt&&!pt?H.push(L("array",Y,ft,Le)):X in D?v.validate(Le,Ze)?Ze.valType==="enumerated"&&(Ze.coerceNumber&&Le!==+nt||!w(Le)&&Le!==nt||String(Le)!==String(nt))&&H.push(L("dynamic",Y,ft,Le,nt)):H.push(L("value",Y,ft,Le)):H.push(L("unused",Y,ft,Le))}return H}function d(S,D){for(var z=S.layout.layoutAttributes,H=0;H<D.length;H++){var Y=D[H],ht=S.traces[Y.type],Se=ht.layoutAttributes;Se&&(Y.subplot?v.extendFlat(z[ht.attributes.subplot.dflt],Se):v.extendFlat(z,Se))}return z}var k={object:function(S,D){var z;return S==="layout"&&D===""?z="The layout argument":S[0]==="data"&&D===""?z="Trace "+S[1]+" in the data argument":z=T(S)+"key "+D,z+" must be linked to an object container"},array:function(S,D){var z;return S==="data"?z="The data argument":z=T(S)+"key "+D,z+" must be linked to an array container"},schema:function(S,D){return T(S)+"key "+D+" is not part of the schema"},unused:function(S,D,z){var H=y(z)?"container":"key";return T(S)+H+" "+D+" did not get coerced"},dynamic:function(S,D,z,H){return[T(S)+"key",D,"(set to '"+z+"')","got reset to","'"+H+"'","during defaults."].join(" ")},invisible:function(S,D){return(D?T(S)+"item "+D:"Trace "+S[1])+" got defaulted to be not visible"},value:function(S,D,z){return[T(S)+"key "+D,"is set to an invalid value ("+z+")"].join(" ")}};function T(S){return x(S)?"In data trace "+S[1]+", ":"In "+S+", "}function L(S,D,z,H,Y){z=z||"";var ht,Se;x(D)?(ht=D[0],Se=D[1]):(ht=D,Se=null);var ie=B(z),X=k[S](D,ie,H,Y);return v.log(X),{code:S,container:ht,trace:Se,path:z,astr:ie,msg:X}}function j(S,D){var z=O(D),H=z.keyMinusId,Y=z.id;return H in S&&S[H]._isSubplotObj&&Y?!0:D in S}function P(S,D){if(D in S)return S[D];var z=O(D);return S[z.keyMinusId]}var N=v.counterRegex("([a-z]+)");function O(S){var D=S.match(N);return{keyMinusId:D&&D[1],id:D&&D[2]}}function B(S){if(!x(S))return String(S);for(var D="",z=0;z<S.length;z++){var H=S[z];typeof H=="number"?D=D.substr(0,D.length-1)+"["+H+"]":D+=H,z<S.length-1&&(D+=".")}return D}}),Eb=t((Ue,ve)=>{var v=Re(),c=zx();function h(_,y,x){var w=document.createElement("a"),A="download"in w,d=new Promise(function(k,T){var L,j;if(A)return L=c.createBlob(_,x),j=c.createObjectURL(L),w.href=j,w.download=y,document.body.appendChild(w),w.click(),document.body.removeChild(w),c.revokeObjectURL(j),L=null,k(y);if(v.isSafari()){var P=x==="svg"?",":";base64,";return c.octetStream(P+encodeURIComponent(_)),k(y)}T(new Error("download error"))});return d}ve.exports=h}),Ab=t((Ue,ve)=>{var v=Re(),c=L_(),h=Eb();zx();function _(y,x){var w;return v.isPlainObject(y)||(w=v.getGraphDiv(y)),x=x||{},x.format=x.format||"png",x.width=x.width||null,x.height=x.height||null,x.imageDataOnly=!0,new Promise(function(A,d){w&&w._snapshotInProgress&&d(new Error("Snapshotting already in progress.")),w&&(w._snapshotInProgress=!0);var k=c(y,x),T=x.filename||y.fn||"newplot";T+="."+x.format.replace("-","."),k.then(function(L){return w&&(w._snapshotInProgress=!1),h(L,T,x.format)}).then(function(L){A(L)}).catch(function(L){w&&(w._snapshotInProgress=!1),d(L)})})}ve.exports=_}),t2=t(Ue=>{var ve=Re(),v=ve.isPlainObject,c=Bm(),h=lg(),_=Mn(),y=Nm(),x=Cp().dfltConfig;Ue.makeTemplate=function(N){N=ve.isPlainObject(N)?N:ve.getGraphDiv(N),N=ve.extendDeep({_context:x},{data:N.data,layout:N.layout}),h.supplyDefaults(N);var O=N.data||[],B=N.layout||{};B._basePlotModules=N._fullLayout._basePlotModules,B._modules=N._fullLayout._modules;var S={data:{},layout:{}};O.forEach(function(Le){var nt={};d(Le,nt,T.bind(null,Le));var Ze=ve.coerce(Le,{},_,"type"),rt=S.data[Ze];rt||(rt=S.data[Ze]=[]),rt.push(nt)}),d(B,S.layout,k.bind(null,B)),delete S.layout.template;var D=B.template;if(v(D)){var z=D.layout,H,Y,ht,Se,ie,X;v(z)&&w(z,S.layout);var ft=D.data;if(v(ft)){for(Y in S.data)if(ht=ft[Y],Array.isArray(ht)){for(ie=S.data[Y],X=ie.length,Se=ht.length,H=0;H<X;H++)w(ht[H%Se],ie[H]);for(H=X;H<Se;H++)ie.push(ve.extendDeep({},ht[H]))}for(Y in ft)Y in S.data||(S.data[Y]=ve.extendDeep([],ft[Y]))}}return S};function w(N,O){N=ve.extendDeep({},N);var B=Object.keys(N).sort(),S,D;function z(ie,X,ft){if(v(X)&&v(ie))w(ie,X);else if(Array.isArray(X)&&Array.isArray(ie)){var Le=y.arrayTemplater({_template:N},ft);for(D=0;D<X.length;D++){var nt=X[D],Ze=Le.newItem(nt)._template;Ze&&w(Ze,nt)}var rt=Le.defaultItems();for(D=0;D<rt.length;D++)X.push(rt[D]._template);for(D=0;D<X.length;D++)delete X[D].templateitemname}}for(S=0;S<B.length;S++){var H=B[S],Y=N[H];if(H in O?z(Y,O[H],H):O[H]=Y,A(H)===H)for(var ht in O){var Se=A(ht);ht!==Se&&Se===H&&!(ht in N)&&z(Y,O[ht],H)}}}function A(N){return N.replace(/[0-9]+$/,"")}function d(N,O,B,S,D){var z=D&&B(D);for(var H in N){var Y=N[H],ht=L(N,H,S),Se=L(N,H,D),ie=B(Se);if(!ie){var X=A(H);X!==H&&(Se=L(N,X,D),ie=B(Se))}if(!(z&&z===ie)&&!(!ie||ie._noTemplating||ie.valType==="data_array"||ie.arrayOk&&Array.isArray(Y)))if(!ie.valType&&v(Y))d(Y,O,B,ht,Se);else if(ie._isLinkedToArray&&Array.isArray(Y))for(var ft=!1,Le=0,nt={},Ze=0;Ze<Y.length;Ze++){var rt=Y[Ze];if(v(rt)){var dt=rt.name;if(dt)nt[dt]||(d(rt,O,B,L(Y,Le,ht),L(Y,Le,Se)),Le++,nt[dt]=1);else if(!ft){var pt=y.arrayDefaultKey(H),se=L(N,pt,S),gt=L(Y,Le,ht);d(rt,O,B,gt,L(Y,Le,Se));var xt=ve.nestedProperty(O,gt),Nt=ve.nestedProperty(O,se);Nt.set(xt.get()),xt.set(null),ft=!0}}}else{var Rt=ve.nestedProperty(O,ht);Rt.set(Y)}}}function k(N,O){return c.getLayoutValObject(N,ve.nestedProperty({},O).parts)}function T(N,O){return c.getTraceValObject(N,ve.nestedProperty({},O).parts)}function L(N,O,B){var S;return B?Array.isArray(N)?S=B+"["+O+"]":S=B+"."+O:S=O,S}Ue.validateTemplate=function(N,O){var B=ve.extendDeep({},{_context:x,data:N.data,layout:N.layout}),S=B.layout||{};v(O)||(O=S.template||{});var D=O.layout,z=O.data,H=[];B.layout=S,B.layout.template=O,h.supplyDefaults(B);var Y=B._fullLayout,ht=B._fullData,Se={};function ie(se,gt){for(var xt in se)if(xt.charAt(0)!=="_"&&v(se[xt])){var Nt=A(xt),Rt=[],Pt;for(Pt=0;Pt<gt.length;Pt++)Rt.push(L(se,xt,gt[Pt])),Nt!==xt&&Rt.push(L(se,Nt,gt[Pt]));for(Pt=0;Pt<Rt.length;Pt++)Se[Rt[Pt]]=1;ie(se[xt],Rt)}}function X(se,gt){for(var xt in se)if(xt.indexOf("defaults")===-1&&v(se[xt])){var Nt=L(se,xt,gt);Se[Nt]?X(se[xt],Nt):H.push({code:"unused",path:Nt})}}if(v(D)?(ie(Y,["layout"]),X(D,"layout")):H.push({code:"layout"}),!v(z))H.push({code:"data"});else{for(var ft={},Le,nt=0;nt<ht.length;nt++){var Ze=ht[nt];Le=Ze.type,ft[Le]=(ft[Le]||0)+1,Ze._fullInput._template||H.push({code:"missing",index:Ze.index,traceType:Le})}for(Le in z){var rt=z[Le].length,dt=ft[Le]||0;rt>dt?H.push({code:"unused",traceType:Le,templateCount:rt,dataCount:dt}):dt>rt&&H.push({code:"reused",traceType:Le,templateCount:rt,dataCount:dt})}}function pt(se,gt){for(var xt in se)if(xt.charAt(0)!=="_"){var Nt=se[xt],Rt=L(se,xt,gt);v(Nt)?(Array.isArray(se)&&Nt._template===!1&&Nt.templateitemname&&H.push({code:"missing",path:Rt,templateitemname:Nt.templateitemname}),pt(Nt,Rt)):Array.isArray(Nt)&&j(Nt)&&pt(Nt,Rt)}}if(pt({data:ht,layout:Y},""),H.length)return H.map(P)};function j(N){for(var O=0;O<N.length;O++)if(v(N[O]))return!0}function P(N){var O;switch(N.code){case"data":O="The template has no key data.";break;case"layout":O="The template has no key layout.";break;case"missing":N.path?O="There are no templates for item "+N.path+" with name "+N.templateitemname:O="There are no templates for trace "+N.index+", of type "+N.traceType+".";break;case"unused":N.path?O="The template item at "+N.path+" was not used in constructing the plot.":N.dataCount?O="Some of the templates of type "+N.traceType+" were not used. The template has "+N.templateCount+" traces, the data only has "+N.dataCount+" of this type.":O="The template has "+N.templateCount+" traces of type "+N.traceType+" but there are none in the data.";break;case"reused":O="Some of the templates of type "+N.traceType+" were used more than once. The template has "+N.templateCount+" traces, the data has "+N.dataCount+" of this type.";break}return N.msg=O,N}}),y2=t(Ue=>{var ve=Tb();Ue._doPlot=ve._doPlot,Ue.newPlot=ve.newPlot,Ue.restyle=ve.restyle,Ue.relayout=ve.relayout,Ue.redraw=ve.redraw,Ue.update=ve.update,Ue._guiRestyle=ve._guiRestyle,Ue._guiRelayout=ve._guiRelayout,Ue._guiUpdate=ve._guiUpdate,Ue._storeDirectGUIEdit=ve._storeDirectGUIEdit,Ue.react=ve.react,Ue.extendTraces=ve.extendTraces,Ue.prependTraces=ve.prependTraces,Ue.addTraces=ve.addTraces,Ue.deleteTraces=ve.deleteTraces,Ue.moveTraces=ve.moveTraces,Ue.purge=ve.purge,Ue.addFrames=ve.addFrames,Ue.deleteFrames=ve.deleteFrames,Ue.animate=ve.animate,Ue.setPlotConfig=ve.setPlotConfig;var v=zm().getGraphDiv,c=W0().eraseActiveShape;Ue.deleteActiveShape=function(_){return c(v(_))},Ue.toImage=L_(),Ue.validate=q2(),Ue.downloadImage=Ab();var h=t2();Ue.makeTemplate=h.makeTemplate,Ue.validateTemplate=h.validateTemplate}),k_=t((Ue,ve)=>{var v=Re(),c=p1();ve.exports=function(h,_,y,x){var w=x("x"),A=x("y"),d,k=c.getComponentMethod("calendars","handleTraceDefaults");if(k(h,_,["x","y"],y),w){var T=v.minRowLength(w);A?d=Math.min(T,v.minRowLength(A)):(d=T,x("y0"),x("dy"))}else{if(!A)return 0;d=v.minRowLength(A),x("x0"),x("dx")}return _._length=d,d}}),Cb=t((Ue,ve)=>{var v=Re().dateTick0,c=M(),h=c.ONEWEEK;function _(y,x){return y%h===0?v(x,1):v(x,0)}ve.exports=function(y,x,w,A,d){if(d||(d={x:!0,y:!0}),d.x){var k=A("xperiod");k&&(A("xperiod0",_(k,x.xcalendar)),A("xperiodalignment"))}if(d.y){var T=A("yperiod");T&&(A("yperiod0",_(T,x.ycalendar)),A("yperiodalignment"))}}}),r2=t((Ue,ve)=>{var v=["orientation","groupnorm","stackgaps"];ve.exports=function(c,h,_,y){var x=_._scatterStackOpts,w=y("stackgroup");if(w){var A=h.xaxis+h.yaxis,d=x[A];d||(d=x[A]={});var k=d[w],T=!1;k?k.traces.push(h):(k=d[w]={traceIndices:[],traces:[h]},T=!0);for(var L={orientation:h.x&&!h.y?"h":"v"},j=0;j<v.length;j++){var P=v[j],N=P+"Found";if(!k[N]){var O=c[P]!==void 0,B=P==="orientation";if((O||T)&&(k[P]=y(P,L[P]),B&&(k.fillDflt=k[P]==="h"?"tonextx":"tonexty"),O&&(k[N]=!0,!T&&(delete k.traces[0][P],B))))for(var S=0;S<k.traces.length-1;S++){var D=k.traces[S];D._input.fill!==D.fill&&(D.fill=k.fillDflt)}}}return k}}}),j3=t((Ue,ve)=>{var v=sa(),c=ng().hasColorscale,h=wi(),_=$p();ve.exports=function(y,x,w,A,d,k){var T=_.isBubble(y),L=(y.line||{}).color,j;if(k=k||{},L&&(w=L),d("marker.symbol"),d("marker.opacity",T?.7:1),d("marker.size"),k.noAngle||(d("marker.angle"),k.noAngleRef||d("marker.angleref"),k.noStandOff||d("marker.standoff")),d("marker.color",w),c(y,"marker")&&h(y,x,A,d,{prefix:"marker.",cLetter:"c"}),k.noSelect||(d("selected.marker.color"),d("unselected.marker.color"),d("selected.marker.size"),d("unselected.marker.size")),k.noLine||(L&&!Array.isArray(L)&&x.marker.color!==L?j=L:T?j=v.background:j=v.defaultLine,d("marker.line.color",j),c(y,"marker.line")&&h(y,x,A,d,{prefix:"marker.line.",cLetter:"c"}),d("marker.line.width",T?1:0)),T&&(d("marker.sizeref"),d("marker.sizemin"),d("marker.sizemode")),k.gradient){var P=d("marker.gradient.type");P!=="none"&&d("marker.gradient.color")}}}),V3=t((Ue,ve)=>{var v=Re().isArrayOrTypedArray,c=ng().hasColorscale,h=wi();ve.exports=function(_,y,x,w,A,d){d||(d={});var k=(_.marker||{}).color;if(k&&k._inputArray&&(k=k._inputArray),A("line.color",x),c(_,"line"))h(_,y,w,A,{prefix:"line.",cLetter:"c"});else{var T=(v(k)?!1:k)||x;A("line.color",T)}A("line.width"),d.noDash||A("line.dash"),d.backoff&&A("line.backoff")}}),H3=t((Ue,ve)=>{ve.exports=function(v,c,h){var _=h("line.shape");_==="spline"&&h("line.smoothing")}}),tw=t((Ue,ve)=>{var v=Re();ve.exports=function(c,h,_,y,x){x=x||{},y("textposition"),v.coerceFont(y,"textfont",x.font||_.font,x),x.noSelect||(y("selected.textfont.color"),y("unselected.textfont.color"))}}),rw=t((Ue,ve)=>{var v=sa(),c=Re().isArrayOrTypedArray;function h(_){for(var y=v.interpolate(_[0][1],_[1][1],.5),x=2;x<_.length;x++){var w=v.interpolate(_[x-1][1],_[x][1],.5);y=v.interpolate(y,w,_[x-1][0]/_[x][0])}return y}ve.exports=function(_,y,x,w,A){A||(A={});var d=!1;if(y.marker){var k=y.marker.color,T=(y.marker.line||{}).color;k&&!c(k)?d=k:T&&!c(T)&&(d=T)}var L;if(A.moduleHasFillgradient){var j=w("fillgradient.type");if(j!=="none"){w("fillgradient.start"),w("fillgradient.stop");var P=w("fillgradient.colorscale");P&&(L=h(P))}}w("fillcolor",v.addOpacity((y.line||{}).color||d||L||x,.5))}}),nw=t((Ue,ve)=>{var v=Re(),c=p1(),h=e2(),_=Tx(),y=$p(),x=k_(),w=Cb(),A=r2(),d=j3(),k=V3(),T=H3(),L=tw(),j=rw(),P=Re().coercePattern;ve.exports=function(N,O,B,S){function D(ft,Le){return v.coerce(N,O,h,ft,Le)}var z=x(N,O,S,D);if(z||(O.visible=!1),!!O.visible){w(N,O,S,D),D("xhoverformat"),D("yhoverformat"),D("zorder");var H=A(N,O,S,D);S.scattermode==="group"&&O.orientation===void 0&&D("orientation","v");var Y=!H&&z<_.PTS_LINESONLY?"lines+markers":"lines";D("text"),D("hovertext"),D("mode",Y),y.hasMarkers(O)&&d(N,O,B,S,D,{gradient:!0}),y.hasLines(O)&&(k(N,O,B,S,D,{backoff:!0}),T(N,O,D),D("connectgaps"),D("line.simplify")),y.hasText(O)&&(D("texttemplate"),L(N,O,S,D));var ht=[];(y.hasMarkers(O)||y.hasText(O))&&(D("cliponaxis"),D("marker.maxdisplayed"),ht.push("points")),D("fill",H?H.fillDflt:"none"),O.fill!=="none"&&(j(N,O,B,D,{moduleHasFillgradient:!0}),y.hasLines(O)||T(N,O,D),P(D,"fillpattern",O.fillcolor,!1));var Se=(O.line||{}).color,ie=(O.marker||{}).color;(O.fill==="tonext"||O.fill==="toself")&&ht.push("fills"),D("hoveron",ht.join("+")||"points"),O.hoveron!=="fills"&&D("hovertemplate");var X=c.getComponentMethod("errorbars","supplyDefaults");X(N,O,Se||ie||B,{axis:"y"}),X(N,O,Se||ie||B,{axis:"x",inherit:"y"}),v.coerceSelectionMarkerOpacity(O,D)}}}),Rb=t((Ue,ve)=>{var v=_g().getAxisGroup;ve.exports=function(c,h,_,y,x){var w=h.orientation,A=h[{v:"x",h:"y"}[w]+"axis"],d=v(_,A)+w,k=_._alignmentOpts||{},T=y("alignmentgroup"),L=k[d];L||(L=k[d]={});var j=L[T];j?j.traces.push(h):j=L[T]={traces:[h],alignmentIndex:Object.keys(L).length,offsetGroups:{}};var P=y("offsetgroup")||"",N=j.offsetGroups,O=N[P];h._offsetIndex=0,(x!=="group"||P)&&(O||(O=N[P]={offsetIndex:Object.keys(N).length}),h._offsetIndex=O.offsetIndex)}}),G3=t((Ue,ve)=>{var v=Re(),c=Rb(),h=e2();ve.exports=function(_,y){var x,w,A,d=y.scattermode;function k(N){return v.coerce(w._input,w,h,N)}if(y.scattermode==="group")for(A=0;A<_.length;A++)w=_[A],w.type==="scatter"&&(x=w._input,c(x,w,y,k,d));for(A=0;A<_.length;A++){var T=_[A];if(T.type==="scatter"){var L=T.fill;if(!(L==="none"||L==="toself")&&(T.opacity=void 0,L==="tonexty"||L==="tonextx"))for(var j=A-1;j>=0;j--){var P=_[j];if(P.type==="scatter"&&P.xaxis===T.xaxis&&P.yaxis===T.yaxis){P.opacity=void 0;break}}}}}}),Db=t((Ue,ve)=>{var v=Re(),c=K1();ve.exports=function(h,_){function y(w,A){return v.coerce(h,_,c,w,A)}var x=_.barmode==="group";_.scattermode==="group"&&y("scattergap",x?_.bargap:.2)}}),ax=t((Ue,ve)=>{var v=E(),c=Re(),h=c.dateTime2ms,_=c.incrementMonth,y=M(),x=y.ONEAVGMONTH;ve.exports=function(w,A,d,k){if(A.type!=="date")return{vals:k};var T=w[d+"periodalignment"];if(!T)return{vals:k};var L=w[d+"period"],j;if(v(L)){if(L=+L,L<=0)return{vals:k}}else if(typeof L=="string"&&L.charAt(0)==="M"){var P=+L.substring(1);if(P>0&&Math.round(P)===P)j=P;else return{vals:k}}for(var N=A.calendar,O=T==="start",B=T==="end",S=w[d+"period0"],D=h(S,N)||0,z=[],H=[],Y=[],ht=k.length,Se=0;Se<ht;Se++){var ie=k[Se],X,ft,Le;if(j){for(X=Math.round((ie-D)/(j*x)),Le=_(D,j*X,N);Le>ie;)Le=_(Le,-j,N);for(;Le<=ie;)Le=_(Le,j,N);ft=_(Le,-j,N)}else{for(X=Math.round((ie-D)/L),Le=D+X*L;Le>ie;)Le-=L;for(;Le<=ie;)Le+=L;ft=Le-L}z[Se]=O?ft:B?Le:(ft+Le)/2,H[Se]=ft,Y[Se]=Le}return{vals:z,starts:H,ends:Y}}}),N_=t((Ue,ve)=>{var v=ng().hasColorscale,c=Ci(),h=$p();ve.exports=function(_,y){h.hasLines(y)&&v(y,"line")&&c(_,y,{vals:y.line.color,containerStr:"line",cLetter:"c"}),h.hasMarkers(y)&&(v(y,"marker")&&c(_,y,{vals:y.marker.color,containerStr:"marker",cLetter:"c"}),v(y,"marker.line")&&c(_,y,{vals:y.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}}),Zy=t((Ue,ve)=>{var v=Re();ve.exports=function(c,h){for(var _=0;_<c.length;_++)c[_].i=_;v.mergeArray(h.text,c,"tx"),v.mergeArray(h.texttemplate,c,"txt"),v.mergeArray(h.hovertext,c,"htx"),v.mergeArray(h.customdata,c,"data"),v.mergeArray(h.textposition,c,"tp"),h.textfont&&(v.mergeArrayCastPositive(h.textfont.size,c,"ts"),v.mergeArray(h.textfont.color,c,"tc"),v.mergeArray(h.textfont.family,c,"tf"),v.mergeArray(h.textfont.weight,c,"tw"),v.mergeArray(h.textfont.style,c,"ty"),v.mergeArray(h.textfont.variant,c,"tv"),v.mergeArray(h.textfont.textcase,c,"tC"),v.mergeArray(h.textfont.lineposition,c,"tE"),v.mergeArray(h.textfont.shadow,c,"tS"));var y=h.marker;if(y){v.mergeArrayCastPositive(y.size,c,"ms"),v.mergeArrayCastPositive(y.opacity,c,"mo"),v.mergeArray(y.symbol,c,"mx"),v.mergeArray(y.angle,c,"ma"),v.mergeArray(y.standoff,c,"mf"),v.mergeArray(y.color,c,"mc");var x=y.line;y.line&&(v.mergeArray(x.color,c,"mlc"),v.mergeArrayCastPositive(x.width,c,"mlw"));var w=y.gradient;w&&w.type!=="none"&&(v.mergeArray(w.type,c,"mgt"),v.mergeArray(w.color,c,"mgc"))}}}),n2=t((Ue,ve)=>{var v=Re();ve.exports=function(c,h){v.isArrayOrTypedArray(h.selectedpoints)&&v.tagSelected(c,h)}}),O_=t((Ue,ve)=>{var v=E(),c=Re(),h=km(),_=ax(),y=M().BADNUM,x=$p(),w=N_(),A=Zy(),d=n2();function k(O,B){var S=O._fullLayout,D=B._xA=h.getFromId(O,B.xaxis||"x","x"),z=B._yA=h.getFromId(O,B.yaxis||"y","y"),H=D.makeCalcdata(B,"x"),Y=z.makeCalcdata(B,"y"),ht=_(B,D,"x",H),Se=_(B,z,"y",Y),ie=ht.vals,X=Se.vals,ft=B._length,Le=new Array(ft),nt=B.ids,Ze=N(B,S,D,z),rt=!1,dt,pt,se,gt,xt,Nt;j(S,B);var Rt="x",Pt="y",xn;if(Ze)c.pushUnique(Ze.traceIndices,B.index),dt=Ze.orientation==="v",dt?(Pt="s",xn="x"):(Rt="s",xn="y"),xt=Ze.stackgaps==="interpolate";else{var oa=L(B,ft);T(O,B,D,z,ie,X,oa)}var jo=!!B.xperiodalignment,lt=!!B.yperiodalignment;for(pt=0;pt<ft;pt++){var ut=Le[pt]={},$=v(ie[pt]),yt=v(X[pt]);$&&yt?(ut[Rt]=ie[pt],ut[Pt]=X[pt],jo&&(ut.orig_x=H[pt],ut.xEnd=ht.ends[pt],ut.xStart=ht.starts[pt]),lt&&(ut.orig_y=Y[pt],ut.yEnd=Se.ends[pt],ut.yStart=Se.starts[pt])):Ze&&(dt?$:yt)?(ut[xn]=dt?ie[pt]:X[pt],ut.gap=!0,xt?(ut.s=y,rt=!0):ut.s=0):ut[Rt]=ut[Pt]=y,nt&&(ut.id=String(nt[pt]))}if(A(Le,B),w(O,B),d(Le,B),Ze){for(pt=0;pt<Le.length;)Le[pt][xn]===y?Le.splice(pt,1):pt++;if(c.sort(Le,function(ne,et){return ne[xn]-et[xn]||ne.i-et.i}),rt){for(pt=0;pt<Le.length-1&&Le[pt].gap;)pt++;for(Nt=Le[pt].s,Nt||(Nt=Le[pt].s=0),se=0;se<pt;se++)Le[se].s=Nt;for(gt=Le.length-1;gt>pt&&Le[gt].gap;)gt--;for(Nt=Le[gt].s,se=Le.length-1;se>gt;se--)Le[se].s=Nt;for(;pt<gt;)if(pt++,Le[pt].gap){for(se=pt+1;Le[se].gap;)se++;for(var Lt=Le[pt-1][xn],ke=Le[pt-1].s,G=(Le[se].s-ke)/(Le[se][xn]-Lt);pt<se;)Le[pt].s=ke+(Le[pt][xn]-Lt)*G,pt++}}}return Le}function T(O,B,S,D,z,H,Y){var ht=B._length,Se=O._fullLayout,ie=S._id,X=D._id,ft=Se._firstScatter[P(B)]===B.uid,Le=(N(B,Se,S,D)||{}).orientation,nt=B.fill;S._minDtick=0,D._minDtick=0;var Ze={padded:!0},rt={padded:!0};Y&&(Ze.ppad=rt.ppad=Y);var dt=ht<2||z[0]!==z[ht-1]||H[0]!==H[ht-1];dt&&(nt==="tozerox"||nt==="tonextx"&&(ft||Le==="h"))?Ze.tozero=!0:!(B.error_y||{}).visible&&(nt==="tonexty"||nt==="tozeroy"||!x.hasMarkers(B)&&!x.hasText(B))&&(Ze.padded=!1,Ze.ppad=0),dt&&(nt==="tozeroy"||nt==="tonexty"&&(ft||Le==="v"))?rt.tozero=!0:(nt==="tonextx"||nt==="tozerox")&&(rt.padded=!1),ie&&(B._extremes[ie]=h.findExtremes(S,z,Ze)),X&&(B._extremes[X]=h.findExtremes(D,H,rt))}function L(O,B){if(x.hasMarkers(O)){var S=O.marker,D=1.6*(O.marker.sizeref||1),z;if(O.marker.sizemode==="area"?z=function(ie){return Math.max(Math.sqrt((ie||0)/D),3)}:z=function(ie){return Math.max((ie||0)/D,3)},c.isArrayOrTypedArray(S.size)){var H={type:"linear"};h.setConvert(H);for(var Y=H.makeCalcdata(O.marker,"size"),ht=new Array(B),Se=0;Se<B;Se++)ht[Se]=z(Y[Se]);return ht}else return z(S.size)}}function j(O,B){var S=P(B),D=O._firstScatter;D[S]||(D[S]=B.uid)}function P(O){var B=O.stackgroup;return O.xaxis+O.yaxis+O.type+(B?"-"+B:"")}function N(O,B,S,D){var z=O.stackgroup;if(z){var H=B._scatterStackOpts[S._id+D._id][z],Y=H.orientation==="v"?D:S;if(Y.type==="linear"||Y.type==="log")return H}}ve.exports={calc:k,calcMarkerSize:L,calcAxisExpansion:T,setFirstScatter:j,getStackOpts:N}}),z_=t((Ue,ve)=>{ve.exports=c;var v=Re().distinctVals;function c(h,_){this.traces=h,this.sepNegVal=_.sepNegVal,this.overlapNoMerge=_.overlapNoMerge;for(var y=1/0,x=_.posAxis._id.charAt(0),w=[],A=0;A<h.length;A++){for(var d=h[A],k=0;k<d.length;k++){var T=d[k],L=T.p;L===void 0&&(L=T[x]),L!==void 0&&w.push(L)}d[0]&&d[0].width1&&(y=Math.min(d[0].width1,y))}this.positions=w;var j=v(w);this.distinctPositions=j.vals,j.vals.length===1&&y!==1/0?this.minDiff=y:this.minDiff=Math.min(j.minDiff,y);var P=(_.posAxis||{}).type;(P==="category"||P==="multicategory")&&(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}c.prototype.put=function(h,_,y){var x=this.getLabel(h,_,y),w=this.bins[x]||0;return this.bins[x]=w+y,w},c.prototype.get=function(h,_,y){var x=this.getLabel(h,_,y);return this.bins[x]||0},c.prototype.getLabel=function(h,_,y){var x=y<0&&this.sepNegVal?"v":"^",w=this.overlapNoMerge?h:Math.round(h/this.binWidth);return x+w+"g"+_}}),Y2=t((Ue,ve)=>{var v=E(),c=Re().isArrayOrTypedArray,h=M().BADNUM,_=p1(),y=km(),x=_g().getAxisGroup,w=z_();function A(Le,nt){for(var Ze=nt.xaxis,rt=nt.yaxis,dt=Le._fullLayout,pt=Le._fullData,se=Le.calcdata,gt=[],xt=[],Nt=0;Nt<pt.length;Nt++){var Rt=pt[Nt];if(Rt.visible===!0&&_.traceIs(Rt,"bar")&&Rt.xaxis===Ze._id&&Rt.yaxis===rt._id&&(Rt.orientation==="h"?gt.push(se[Nt]):xt.push(se[Nt]),Rt._computePh))for(var Pt=Le.calcdata[Nt],xn=0;xn<Pt.length;xn++)typeof Pt[xn].ph0=="function"&&(Pt[xn].ph0=Pt[xn].ph0()),typeof Pt[xn].ph1=="function"&&(Pt[xn].ph1=Pt[xn].ph1())}var oa={xCat:Ze.type==="category"||Ze.type==="multicategory",yCat:rt.type==="category"||rt.type==="multicategory",mode:dt.barmode,norm:dt.barnorm,gap:dt.bargap,groupgap:dt.bargroupgap};d(Le,Ze,rt,xt,oa),d(Le,rt,Ze,gt,oa)}function d(Le,nt,Ze,rt,dt){if(rt.length){var pt,se,gt,xt,Nt;switch(L(Ze,rt),dt.mode){case"overlay":j(Le,nt,Ze,rt,dt);break;case"group":for(pt=[],se=[],gt=0;gt<rt.length;gt++)xt=rt[gt],Nt=xt[0].trace,Nt.offset===void 0?se.push(xt):pt.push(xt);se.length&&P(Le,nt,Ze,se,dt),pt.length&&j(Le,nt,Ze,pt,dt);break;case"stack":case"relative":for(pt=[],se=[],gt=0;gt<rt.length;gt++)xt=rt[gt],Nt=xt[0].trace,Nt.base===void 0?se.push(xt):pt.push(xt);T(se),se.length&&N(Le,nt,Ze,se,dt),pt.length&&j(Le,nt,Ze,pt,dt);break}k(rt),X(rt,nt)}}function k(Le){var nt,Ze,rt,dt,pt,se,gt;for(nt=0;nt<Le.length;nt++)Ze=Le[nt],rt=Ze[0].trace,dt=Ze[0].t,dt.cornerradiusvalue===void 0&&(pt=rt.marker?rt.marker.cornerradius:void 0,pt!==void 0&&(se=v(pt)?+pt:+pt.slice(0,-1),gt=v(pt)?"px":"%",dt.cornerradiusvalue=se,dt.cornerradiusform=gt))}function T(Le){if(!(Le.length<2)){var nt,Ze,rt,dt,pt,se,gt;for(nt=0;nt<Le.length&&(Ze=Le[nt],rt=Ze[0].trace,pt=rt.marker?rt.marker.cornerradius:void 0,pt===void 0);nt++);if(pt!==void 0)for(se=v(pt)?+pt:+pt.slice(0,-1),gt=v(pt)?"px":"%",nt=0;nt<Le.length;nt++)Ze=Le[nt],dt=Ze[0].t,dt.cornerradiusvalue=se,dt.cornerradiusform=gt}}function L(Le,nt){var Ze,rt;for(Ze=0;Ze<nt.length;Ze++){var dt=nt[Ze],pt=dt[0].trace,se=pt.type==="funnel"?pt._base:pt.base,gt,xt=pt.orientation==="h"?pt.xcalendar:pt.ycalendar,Nt=Le.type==="category"||Le.type==="multicategory"?function(){return null}:Le.d2c;if(c(se)){for(rt=0;rt<Math.min(se.length,dt.length);rt++)gt=Nt(se[rt],0,xt),v(gt)?(dt[rt].b=+gt,dt[rt].hasB=1):dt[rt].b=0;for(;rt<dt.length;rt++)dt[rt].b=0}else{gt=Nt(se,0,xt);var Rt=v(gt);for(gt=Rt?gt:0,rt=0;rt<dt.length;rt++)dt[rt].b=gt,Rt&&(dt[rt].hasB=1)}}}function j(Le,nt,Ze,rt,dt){for(var pt=0;pt<rt.length;pt++){var se=rt[pt],gt=new w([se],{posAxis:nt,sepNegVal:!1,overlapNoMerge:!dt.norm});O(Le,nt,gt,dt),dt.norm?(Y(gt),Se(Ze,gt,dt)):z(Ze,gt)}}function P(Le,nt,Ze,rt,dt){var pt=new w(rt,{posAxis:nt,sepNegVal:!1,overlapNoMerge:!dt.norm});O(Le,nt,pt,dt),ht(pt,nt),dt.norm?(Y(pt),Se(Ze,pt,dt)):z(Ze,pt)}function N(Le,nt,Ze,rt,dt){var pt=new w(rt,{posAxis:nt,sepNegVal:dt.mode==="relative",overlapNoMerge:!(dt.norm||dt.mode==="stack"||dt.mode==="relative")});O(Le,nt,pt,dt),H(Ze,pt,dt);for(var se=0;se<rt.length;se++)for(var gt=rt[se],xt=gt[0].t.offsetindex,Nt=0;Nt<gt.length;Nt++){var Rt=gt[Nt];if(Rt.s!==h){var Pt=Rt.b+Rt.s===pt.get(Rt.p,xt,Rt.s);Pt&&(Rt._outmost=!0)}}dt.norm&&Se(Ze,pt,dt)}function O(Le,nt,Ze,rt){var dt=Le._fullLayout,pt=Ze.positions,se=Ze.distinctPositions,gt=Ze.minDiff,xt=Ze.traces,Nt=xt.length,Rt=pt.length!==se.length,Pt=gt*(1-rt.gap),xn,oa,jo,lt;if(nt._id==="angularaxis")xn=Pt,oa=xn*(1-(rt.groupgap||0)),jo=-oa/2;else{var ut=x(dt,nt._id)+xt[0][0].trace.orientation;lt=dt._alignmentOpts[ut]||{}}for(var $=0;$<Nt;$++){var yt=xt[$],Lt=yt[0].trace;if(nt._id!=="angularaxis"){var ke=lt[Lt.alignmentgroup]||{},G=Object.keys(ke.offsetGroups||{}).length;G?xn=Pt/G:xn=Rt?Pt/Nt:Pt,oa=xn*(1-(rt.groupgap||0)),G?jo=((2*Lt._offsetIndex+1-G)*xn-oa)/2:jo=Rt?((2*$+1-Nt)*xn-oa)/2:-oa/2}var ne=yt[0].t;ne.barwidth=oa,ne.offsetindex=Lt._offsetIndex||0,ne.poffset=jo,ne.bargroupwidth=Pt,ne.bardelta=gt}Ze.binWidth=xt[0][0].t.barwidth/100,B(Ze),S(nt,Ze),nt._id==="angularaxis"?D(nt,Ze):D(nt,Ze,Rt)}function B(Le){var nt=Le.traces,Ze,rt;for(Ze=0;Ze<nt.length;Ze++){var dt=nt[Ze],pt=dt[0],se=pt.trace,gt=pt.t,xt=se._offset||se.offset,Nt=gt.poffset,Rt;if(c(xt)){for(Rt=Array.prototype.slice.call(xt,0,dt.length),rt=0;rt<Rt.length;rt++)v(Rt[rt])||(Rt[rt]=Nt);for(rt=Rt.length;rt<dt.length;rt++)Rt.push(Nt);gt.poffset=Rt}else xt!==void 0&&(gt.poffset=xt);var Pt=se._width||se.width,xn=gt.barwidth;if(c(Pt)){var oa=Array.prototype.slice.call(Pt,0,dt.length);for(rt=0;rt<oa.length;rt++)v(oa[rt])||(oa[rt]=xn);for(rt=oa.length;rt<dt.length;rt++)oa.push(xn);if(gt.barwidth=oa,xt===void 0){for(Rt=[],rt=0;rt<dt.length;rt++)Rt.push(Nt+(xn-oa[rt])/2);gt.poffset=Rt}}else Pt!==void 0&&(gt.barwidth=Pt,xt===void 0&&(gt.poffset=Nt+(xn-Pt)/2))}}function S(Le,nt){for(var Ze=nt.traces,rt=ft(Le),dt=0;dt<Ze.length;dt++)for(var pt=Ze[dt],se=pt[0].t,gt=se.poffset,xt=c(gt),Nt=se.barwidth,Rt=c(Nt),Pt=0;Pt<pt.length;Pt++){var xn=pt[Pt],oa=xn.w=Rt?Nt[Pt]:Nt;xn.p===void 0&&(xn.p=xn[rt],xn["orig_"+rt]=xn[rt]);var jo=(xt?gt[Pt]:gt)+oa/2;xn[rt]=xn.p+jo}}function D(Le,nt,Ze){var rt=nt.traces,dt=nt.minDiff,pt=dt/2;y.minDtick(Le,nt.minDiff,nt.distinctPositions[0],Ze);for(var se=0;se<rt.length;se++){var gt=rt[se],xt=gt[0],Nt=xt.trace,Rt=[],Pt,xn,oa,jo;for(jo=0;jo<gt.length;jo++)Pt=gt[jo],xn=Pt.p-pt,oa=Pt.p+pt,Rt.push(xn,oa);if(Nt.width||Nt.offset){var lt=xt.t,ut=lt.poffset,$=lt.barwidth,yt=c(ut),Lt=c($);for(jo=0;jo<gt.length;jo++){Pt=gt[jo];var ke=yt?ut[jo]:ut,G=Lt?$[jo]:$;xn=Pt.p+ke,oa=xn+G,Rt.push(xn,oa)}}Nt._extremes[Le._id]=y.findExtremes(Le,Rt,{padded:!1})}}function z(Le,nt){for(var Ze=nt.traces,rt=ft(Le),dt=0;dt<Ze.length;dt++){for(var pt=Ze[dt],se=pt[0].trace,gt=se.type==="scatter",xt=se.orientation==="v",Nt=[],Rt=!1,Pt=0;Pt<pt.length;Pt++){var xn=pt[Pt],oa=gt?0:xn.b,jo=gt?xt?xn.y:xn.x:oa+xn.s;xn[rt]=jo,Nt.push(jo),xn.hasB&&Nt.push(oa),(!xn.hasB||!xn.b)&&(Rt=!0)}se._extremes[Le._id]=y.findExtremes(Le,Nt,{tozero:Rt,padded:!0})}}function H(Le,nt,Ze){var rt=ft(Le),dt=nt.traces,pt,se,gt,xt,Nt,Rt,Pt;for(xt=0;xt<dt.length;xt++)if(pt=dt[xt],se=pt[0].trace,se.type==="funnel")for(Pt=pt[0].t.offsetindex,Nt=0;Nt<pt.length;Nt++)Rt=pt[Nt],Rt.s!==h&&nt.put(Rt.p,Pt,-.5*Rt.s);for(xt=0;xt<dt.length;xt++){pt=dt[xt],se=pt[0].trace,gt=se.type==="funnel",Pt=se.type==="barpolar"?0:pt[0].t.offsetindex;var xn=[];for(Nt=0;Nt<pt.length;Nt++)if(Rt=pt[Nt],Rt.s!==h){var oa;gt?oa=Rt.s:oa=Rt.s+Rt.b;var jo=nt.put(Rt.p,Pt,oa),lt=jo+oa;Rt.b=jo,Rt[rt]=lt,Ze.norm||(xn.push(lt),Rt.hasB&&xn.push(jo))}Ze.norm||(se._extremes[Le._id]=y.findExtremes(Le,xn,{tozero:!0,padded:!0}))}}function Y(Le){for(var nt=Le.traces,Ze=0;Ze<nt.length;Ze++)for(var rt=nt[Ze],dt=rt[0].t.offsetindex,pt=0;pt<rt.length;pt++){var se=rt[pt];se.s!==h&&Le.put(se.p,dt,se.b+se.s)}}function ht(Le,nt){for(var Ze=Le.traces,rt=0;rt<Ze.length;rt++){var dt=Ze[rt],pt=dt[0].trace,se=dt[0].t.offsetindex;if(pt.base===void 0)for(var gt=new w([dt],{posAxis:nt,sepNegVal:!0,overlapNoMerge:!0}),xt=0;xt<dt.length;xt++){var Nt=dt[xt];if(Nt.p!==h){var Rt=gt.put(Nt.p,se,Nt.b+Nt.s);Rt&&(Nt.b=Rt)}}}}function Se(Le,nt,Ze){var rt=nt.traces,dt=ft(Le),pt=Ze.norm==="fraction"?1:100,se=pt/1e9,gt=Le.l2c(Le.c2l(0)),xt=Ze.mode==="stack"?pt:gt;function Nt(ne){return v(Le.c2l(ne))&&(ne<gt-se||ne>xt+se||!v(gt))}for(var Rt=0;Rt<rt.length;Rt++){for(var Pt=rt[Rt],xn=Pt[0].t.offsetindex,oa=Pt[0].trace,jo=[],lt=!1,ut=!1,$=0;$<Pt.length;$++){var yt=Pt[$];if(yt.s!==h){var Lt=Math.abs(pt/nt.get(yt.p,xn,yt.s));yt.b*=Lt,yt.s*=Lt;var ke=yt.b,G=ke+yt.s;yt[dt]=G,jo.push(G),ut=ut||Nt(G),yt.hasB&&(jo.push(ke),ut=ut||Nt(ke)),(!yt.hasB||!yt.b)&&(lt=!0)}}oa._extremes[Le._id]=y.findExtremes(Le,jo,{tozero:lt,padded:ut})}}function ie(Le,nt,Ze,rt){for(var dt=ft(rt),pt=0;pt<Le.length;pt++)for(var se=Le[pt],gt=0;gt<se.length;gt++){var xt=se[gt],Nt=xt[dt];xt._sMin=nt[Nt],xt._sMax=Ze[Nt]}}function X(Le,nt){var Ze=ft(nt),rt={},dt,pt,se,gt=1/0,xt=-1/0;for(dt=0;dt<Le.length;dt++)for(se=Le[dt],pt=0;pt<se.length;pt++){var Nt=se[pt].p;v(Nt)&&(gt=Math.min(gt,Nt),xt=Math.max(xt,Nt))}var Rt=1e4/(xt-gt),Pt=rt.round=function(ct){return String(Math.round(Rt*(ct-gt)))},xn={},oa={},jo=Le.some(function(ct){var kt=ct[0].trace;return"marker"in kt&&kt.marker.cornerradius});for(dt=0;dt<Le.length;dt++){se=Le[dt],se[0].t.extents=rt;var lt=se[0].t.poffset,ut=c(lt);for(pt=0;pt<se.length;pt++){var $=se[pt],yt=$[Ze]-$.w/2;if(v(yt)){var Lt=$[Ze]+$.w/2,ke=Pt($.p);rt[ke]?rt[ke]=[Math.min(yt,rt[ke][0]),Math.max(Lt,rt[ke][1])]:rt[ke]=[yt,Lt]}if($.p0=$.p+(ut?lt[pt]:lt),$.p1=$.p0+$.w,$.s0=$.b,$.s1=$.s0+$.s,jo){var G=Math.min($.s0,$.s1)||0,ne=Math.max($.s0,$.s1)||0,et=$[Ze];xn[et]=et in xn?Math.min(xn[et],G):G,oa[et]=et in oa?Math.max(oa[et],ne):ne}}}jo&&ie(Le,xn,oa,nt)}function ft(Le){return Le._id.charAt(0)}ve.exports={crossTraceCalc:A,setGroupPositions:d}}),Lb=t((Ue,ve)=>{var v=O_(),c=Y2().setGroupPositions;function h(x,w){for(var A=w.xaxis,d=w.yaxis,k=x._fullLayout,T=x._fullData,L=x.calcdata,j=[],P=[],N=0;N<T.length;N++){var O=T[N];O.visible===!0&&O.type==="scatter"&&O.xaxis===A._id&&O.yaxis===d._id&&(O.orientation==="h"?j.push(L[N]):O.orientation==="v"&&P.push(L[N]))}var B={mode:k.scattermode,gap:k.scattergap};c(x,A,d,P,B),c(x,d,A,j,B)}ve.exports=function(x,w){x._fullLayout.scattermode==="group"&&h(x,w);var A=w.xaxis,d=w.yaxis,k=A._id+d._id,T=x._fullLayout._scatterStackOpts[k];if(T){var L=x.calcdata,j,P,N,O,B,S,D,z,H,Y,ht,Se,ie,X,ft;for(var Le in T){Y=T[Le];var nt=Y.traceIndices;if(nt.length){for(ht=Y.stackgaps==="interpolate",Se=Y.groupnorm,Y.orientation==="v"?(ie="x",X="y"):(ie="y",X="x"),ft=new Array(nt.length),j=0;j<ft.length;j++)ft[j]=!1;S=L[nt[0]];var Ze=new Array(S.length);for(j=0;j<S.length;j++)Ze[j]=S[j][ie];for(j=1;j<nt.length;j++){for(B=L[nt[j]],P=N=0;P<B.length;P++){for(D=B[P][ie];D>Ze[N]&&N<Ze.length;N++)_(B,P,Ze[N],j,ft,ht,ie),P++;if(D!==Ze[N]){for(O=0;O<j;O++)_(L[nt[O]],N,D,O,ft,ht,ie);Ze.splice(N,0,D)}N++}for(;N<Ze.length;N++)_(B,P,Ze[N],j,ft,ht,ie),P++}var rt=Ze.length;for(P=0;P<S.length;P++){for(z=S[P][X]=S[P].s,j=1;j<nt.length;j++)B=L[nt[j]],B[0].trace._rawLength=B[0].trace._length,B[0].trace._length=rt,z+=B[P].s,B[P][X]=z;if(Se)for(H=(Se==="fraction"?z:z/100)||1,j=0;j<nt.length;j++){var dt=L[nt[j]][P];dt[X]/=H,dt.sNorm=dt.s/H}}for(j=0;j<nt.length;j++){B=L[nt[j]];var pt=B[0].trace,se=v.calcMarkerSize(pt,pt._rawLength),gt=Array.isArray(se);if(se&&ft[j]||gt){var xt=se;for(se=new Array(rt),P=0;P<rt;P++)se[P]=B[P].gap?0:gt?xt[B[P].i]:xt}var Nt=new Array(rt),Rt=new Array(rt);for(P=0;P<rt;P++)Nt[P]=B[P].x,Rt[P]=B[P].y;v.calcAxisExpansion(x,pt,A,d,Nt,Rt,se),B[0].t.orientation=Y.orientation}}}}};function _(x,w,A,d,k,T,L){k[d]=!0;var j={i:null,gap:!0,s:0};if(j[L]=A,x.splice(w,0,j),w&&A===x[w-1][L]){var P=x[w-1];j.s=P.s,j.i=P.i,j.gap=P.gap}else T&&(j.s=y(x,w,A,L));w||(x[0].t=x[1].t,x[0].trace=x[1].trace,delete x[1].t,delete x[1].trace)}function y(x,w,A,d){var k=x[w-1],T=x[w+1];return T?k?k.s+(T.s-k.s)*(A-k[d])/(T[d]-k[d]):T.s:k.s}}),a2=t((Ue,ve)=>{var v=Y0(),c=M(),h=c.BADNUM,_=c.LOG_CLIP,y=_+.5,x=_-.5,w=Re(),A=w.segmentsIntersect,d=w.constrain,k=Tx();ve.exports=function(T,L){var j=L.trace||{},P=L.xaxis,N=L.yaxis,O=P.type==="log",B=N.type==="log",S=P._length,D=N._length,z=L.backoff,H=j.marker,Y=L.connectGaps,ht=L.baseTolerance,Se=L.shape,ie=Se==="linear",X=j.fill&&j.fill!=="none",ft=[],Le=k.minTolerance,nt=T.length,Ze=new Array(nt),rt=0,dt,pt,se,gt,xt,Nt,Rt,Pt,xn,oa,jo,lt,ut,$,yt,Lt;function ke(n0){var S0=T[n0];if(!S0)return!1;var _0=L.linearized?P.l2p(S0.x):P.c2p(S0.x),w0=L.linearized?N.l2p(S0.y):N.c2p(S0.y);if(_0===h){if(O&&(_0=P.c2p(S0.x,!0)),_0===h)return!1;B&&w0===h&&(_0*=Math.abs(P._m*D*(P._m>0?y:x)/(N._m*S*(N._m>0?y:x)))),_0*=1e3}if(w0===h){if(B&&(w0=N.c2p(S0.y,!0)),w0===h)return!1;w0*=1e3}return[_0,w0]}function G(n0,S0,_0,w0){var X0=_0-n0,$0=w0-S0,Z0=.5-n0,Am=.5-S0,e1=X0*X0+$0*$0,E1=X0*Z0+$0*Am;if(E1>0&&E1<e1){var N1=Z0*$0-Am*X0;if(N1*N1<e1)return!0}}var ne,et;function ct(n0,S0){var _0=n0[0]/S,w0=n0[1]/D,X0=Math.max(0,-_0,_0-1,-w0,w0-1);return X0&&ne!==void 0&&G(_0,w0,ne,et)&&(X0=0),X0&&S0&&G(_0,w0,S0[0]/S,S0[1]/D)&&(X0=0),(1+k.toleranceGrowth*X0)*ht}function kt(n0,S0){var _0=n0[0]-S0[0],w0=n0[1]-S0[1];return Math.sqrt(_0*_0+w0*w0)}var Gt=k.maxScreensAway,$t=-S*Gt,Ko=S*(1+Gt),Up=-D*Gt,e0=D*(1+Gt),E0=[[$t,Up,Ko,Up],[Ko,Up,Ko,e0],[Ko,e0,$t,e0],[$t,e0,$t,Up]],m0,f0,la,$o,jt,Fp;function i0(n0,S0){for(var _0=[],w0=0,X0=0;X0<4;X0++){var $0=E0[X0],Z0=A(n0[0],n0[1],S0[0],S0[1],$0[0],$0[1],$0[2],$0[3]);Z0&&(!w0||Math.abs(Z0.x-_0[0][0])>1||Math.abs(Z0.y-_0[0][1])>1)&&(Z0=[Z0.x,Z0.y],w0&&kt(Z0,n0)<kt(_0[0],n0)?_0.unshift(Z0):_0.push(Z0),w0++)}return _0}function b0(n0){if(n0[0]<$t||n0[0]>Ko||n0[1]<Up||n0[1]>e0)return[d(n0[0],$t,Ko),d(n0[1],Up,e0)]}function O0(n0,S0){if(n0[0]===S0[0]&&(n0[0]===$t||n0[0]===Ko)||n0[1]===S0[1]&&(n0[1]===Up||n0[1]===e0))return!0}function C0(n0,S0){var _0=[],w0=b0(n0),X0=b0(S0);return w0&&X0&&O0(w0,X0)||(w0&&_0.push(w0),X0&&_0.push(X0)),_0}function I0(n0,S0,_0){return function(w0,X0){var $0=b0(w0),Z0=b0(X0),Am=[];if($0&&Z0&&O0($0,Z0))return Am;$0&&Am.push($0),Z0&&Am.push(Z0);var e1=2*w.constrain((w0[n0]+X0[n0])/2,S0,_0)-(($0||w0)[n0]+(Z0||X0)[n0]);if(e1){var E1;$0&&Z0?E1=e1>0==$0[n0]>Z0[n0]?$0:Z0:E1=$0||Z0,E1[n0]+=e1}return Am}}var V0;Se==="linear"||Se==="spline"?V0=i0:Se==="hv"||Se==="vh"?V0=C0:Se==="hvh"?V0=I0(0,$t,Ko):Se==="vhv"&&(V0=I0(1,Up,e0));function H0(n0,S0){var _0=S0[0]-n0[0],w0=(S0[1]-n0[1])/_0,X0=(n0[1]*S0[0]-S0[1]*n0[0])/_0;return X0>0?[w0>0?$t:Ko,e0]:[w0>0?Ko:$t,Up]}function im(n0){var S0=n0[0],_0=n0[1],w0=S0===Ze[rt-1][0],X0=_0===Ze[rt-1][1];if(!(w0&&X0))if(rt>1){var $0=S0===Ze[rt-2][0],Z0=_0===Ze[rt-2][1];w0&&(S0===$t||S0===Ko)&&$0?Z0?rt--:Ze[rt-1]=n0:X0&&(_0===Up||_0===e0)&&Z0?$0?rt--:Ze[rt-1]=n0:Ze[rt++]=n0}else Ze[rt++]=n0}function k0(n0){Ze[rt-1][0]!==n0[0]&&Ze[rt-1][1]!==n0[1]&&im([la,$o]),im(n0),jt=null,la=$o=0}var fm=w.isArrayOrTypedArray(H);function Tm(n0){if(n0&&z&&(n0.i=dt,n0.d=T,n0.trace=j,n0.marker=fm?H[n0.i]:H,n0.backoff=z),ne=n0[0]/S,et=n0[1]/D,m0=n0[0]<$t?$t:n0[0]>Ko?Ko:0,f0=n0[1]<Up?Up:n0[1]>e0?e0:0,m0||f0){if(!rt)Ze[rt++]=[m0||n0[0],f0||n0[1]];else if(jt){var S0=V0(jt,n0);S0.length>1&&(k0(S0[0]),Ze[rt++]=S0[1])}else Fp=V0(Ze[rt-1],n0)[0],Ze[rt++]=Fp;var _0=Ze[rt-1];m0&&f0&&(_0[0]!==m0||_0[1]!==f0)?(jt&&(la!==m0&&$o!==f0?im(la&&$o?H0(jt,n0):[la||m0,$o||f0]):la&&$o&&im([la,$o])),im([m0,f0])):la-m0&&$o-f0&&im([m0||la,f0||$o]),jt=n0,la=m0,$o=f0}else jt&&k0(V0(jt,n0)[0]),Ze[rt++]=n0}for(dt=0;dt<nt;dt++)if(pt=ke(dt),!!pt){for(rt=0,jt=null,Tm(pt),dt++;dt<nt;dt++){if(gt=ke(dt),!gt){if(Y)continue;break}if(!ie||!L.simplify){Tm(gt);continue}var om=ke(dt+1);if(oa=kt(gt,pt),!(!(X&&(rt===0||rt===nt-1))&&oa<ct(gt,om)*Le)){for(Pt=[(gt[0]-pt[0])/oa,(gt[1]-pt[1])/oa],xt=pt,jo=oa,lt=$=yt=0,Rt=!1,se=gt,dt++;dt<T.length;dt++){if(Nt=om,om=ke(dt+1),!Nt){if(Y)continue;break}if(xn=[Nt[0]-pt[0],Nt[1]-pt[1]],Lt=xn[0]*Pt[1]-xn[1]*Pt[0],$=Math.min($,Lt),yt=Math.max(yt,Lt),yt-$>ct(Nt,om))break;se=Nt,ut=xn[0]*Pt[0]+xn[1]*Pt[1],ut>jo?(jo=ut,gt=Nt,Rt=!1):ut<lt&&(lt=ut,xt=Nt,Rt=!0)}if(Rt?(Tm(gt),se!==xt&&Tm(xt)):(xt!==pt&&Tm(xt),se!==gt&&Tm(gt)),Tm(se),dt>=T.length||!Nt)break;Tm(Nt),pt=Nt}}jt&&im([la||jt[0],$o||jt[1]]),ft.push(Ze.slice(0,rt))}var Rm=Se.slice(Se.length-1);if(z&&Rm!=="h"&&Rm!=="v"){for(var ci=!1,Hp=-1,St=[],Ht=0;Ht<ft.length;Ht++)for(var Sr=0;Sr<ft[Ht].length-1;Sr++){var Rp=ft[Ht][Sr],Np=ft[Ht][Sr+1],Jp=v.applyBackoff(Np,Rp);(Jp[0]!==Np[0]||Jp[1]!==Np[1])&&(ci=!0),St[Hp+1]||(Hp++,St[Hp]=[Rp,[Jp[0],Jp[1]]])}return ci?St:ft}return ft}}),W3=t((Ue,ve)=>{var v={tonextx:1,tonexty:1,tonext:1};ve.exports=function(c,h,_){var y,x,w,A,d,k={},T=!1,L=-1,j=0,P=-1;for(x=0;x<_.length;x++)y=_[x][0].trace,w=y.stackgroup||"",w?w in k?d=k[w]:(d=k[w]=j,j++):y.fill in v&&P>=0?d=P:(d=P=j,j++),d<L&&(T=!0),y._groupIndex=L=d;var N=_.slice();T&&N.sort(function(B,S){var D=B[0].trace,z=S[0].trace;return D._groupIndex-z._groupIndex||D.index-z.index});var O={};for(x=0;x<N.length;x++)y=N[x][0].trace,w=y.stackgroup||"",y.visible===!0?(y._nexttrace=null,y.fill in v&&(A=O[w],y._prevtrace=A||null,A&&(A._nexttrace=y)),y._ownfill=y.fill&&(y.fill.substr(0,6)==="tozero"||y.fill==="toself"||y.fill.substr(0,2)==="to"&&!y._prevtrace),O[w]=y):y._prevtrace=y._nexttrace=y._ownfill=null;return N}}),P_=t((Ue,ve)=>{var v=l(),c=p1(),h=Re(),_=h.ensureSingle,y=h.identity,x=Y0(),w=$p(),A=a2(),d=W3(),k=Zg().tester;ve.exports=function(P,N,O,B,S,D){var z,H,Y=!S,ht=!!S&&S.duration>0,Se=d(P,N,O);if(z=B.selectAll("g.trace").data(Se,function(X){return X[0].trace.uid}),z.enter().append("g").attr("class",function(X){return"trace scatter trace"+X[0].trace.uid}).style("stroke-miterlimit",2),z.order(),T(P,z,N),ht){D&&(H=D());var ie=v.transition().duration(S.duration).ease(S.easing).each("end",function(){H&&H()}).each("interrupt",function(){H&&H()});ie.each(function(){B.selectAll("g.trace").each(function(X,ft){L(P,ft,N,X,Se,this,S)})})}else z.each(function(X,ft){L(P,ft,N,X,Se,this,S)});Y&&z.exit().remove(),B.selectAll("path:not([d])").remove()};function T(P,N,O){N.each(function(B){var S=_(v.select(this),"g","fills");x.setClipUrl(S,O.layerClipId,P);var D=B[0].trace,z=[];D._ownfill&&z.push("_ownFill"),D._nexttrace&&z.push("_nextFill");var H=S.selectAll("g").data(z,y);H.enter().append("g"),H.exit().each(function(Y){D[Y]=null}).remove(),H.order().each(function(Y){D[Y]=_(v.select(this),"path","js-fill")})})}function L(P,N,O,B,S,D,z){var H=P._context.staticPlot,Y;j(P,N,O,B,S);var ht=!!z&&z.duration>0;function Se(k0){return ht?k0.transition():k0}var ie=O.xaxis,X=O.yaxis,ft=B[0].trace,Le=ft.line,nt=v.select(D),Ze=_(nt,"g","errorbars"),rt=_(nt,"g","lines"),dt=_(nt,"g","points"),pt=_(nt,"g","text");if(c.getComponentMethod("errorbars","plot")(P,Ze,O,z),ft.visible!==!0)return;Se(nt).style("opacity",ft.opacity);var se,gt,xt=ft.fill.charAt(ft.fill.length-1);xt!=="x"&&xt!=="y"&&(xt="");var Nt,Rt;xt==="y"?(Nt=1,Rt=X.c2p(0,!0)):xt==="x"&&(Nt=0,Rt=ie.c2p(0,!0)),B[0][O.isRangePlot?"nodeRangePlot3":"node3"]=nt;var Pt="",xn=[],oa=ft._prevtrace,jo=null,lt=null;oa&&(Pt=oa._prevRevpath||"",gt=oa._nextFill,xn=oa._ownPolygons,jo=oa._fillsegments,lt=oa._fillElement);var ut,$,yt="",Lt="",ke,G,ne,et,ct,kt,Gt=[];ft._polygons=[];var $t=[],Ko=[],Up=h.noop;if(se=ft._ownFill,w.hasLines(ft)||ft.fill!=="none"){gt&&gt.datum(B),["hv","vh","hvh","vhv"].indexOf(Le.shape)!==-1?(ke=x.steps(Le.shape),G=x.steps(Le.shape.split("").reverse().join(""))):Le.shape==="spline"?ke=G=function(k0){var fm=k0[k0.length-1];return k0.length>1&&k0[0][0]===fm[0]&&k0[0][1]===fm[1]?x.smoothclosed(k0.slice(1),Le.smoothing):x.smoothopen(k0,Le.smoothing)}:ke=G=function(k0){return"M"+k0.join("L")},ne=function(k0){return G(k0.reverse())},Ko=A(B,{xaxis:ie,yaxis:X,trace:ft,connectGaps:ft.connectgaps,baseTolerance:Math.max(Le.width||1,3)/4,shape:Le.shape,backoff:Le.backoff,simplify:Le.simplify,fill:ft.fill}),$t=new Array(Ko.length);var e0=0;for(Y=0;Y<Ko.length;Y++){var E0,m0=Ko[Y];!E0||!xt?(E0=m0.slice(),$t[e0]=E0,e0++):E0.push.apply(E0,m0)}ft._fillElement=null,ft._fillExclusionElement=lt,ft._fillsegments=$t.slice(0,e0),$t=ft._fillsegments,Ko.length&&(et=Ko[0][0].slice(),ct=Ko[Ko.length-1],kt=ct[ct.length-1].slice()),Up=function(k0){return function(fm){if(ut=ke(fm),$=ne(fm),yt?xt?(yt+="L"+ut.substr(1),Lt=$+("L"+Lt.substr(1))):(yt+="Z"+ut,Lt=$+"Z"+Lt):(yt=ut,Lt=$),w.hasLines(ft)){var Tm=v.select(this);if(Tm.datum(B),k0)Se(Tm.style("opacity",0).attr("d",ut).call(x.lineGroupStyle)).style("opacity",1);else{var om=Se(Tm);om.attr("d",ut),x.singleLineStyle(B,om)}}}}}var f0=rt.selectAll(".js-line").data(Ko);Se(f0.exit()).style("opacity",0).remove(),f0.each(Up(!1)),f0.enter().append("path").classed("js-line",!0).style("vector-effect",H?"none":"non-scaling-stroke").call(x.lineGroupStyle).each(Up(!0)),x.setClipUrl(f0,O.layerClipId,P);function la(k0){Se(k0).attr("d","M0,0Z")}var $o=function(){var k0=new Array($t.length);for(Y=0;Y<$t.length;Y++)k0[Y]=k($t[Y]);return k0},jt=function(k0){var fm,Tm;if(!k0||k0.length===0)for(fm=new Array($t.length),Tm=0;Tm<$t.length;Tm++){var om=$t[Tm][0].slice(),Rm=$t[Tm][$t[Tm].length-1].slice();om[Nt]=Rm[Nt]=Rt;var ci=[Rm,om],Hp=ci.concat($t[Tm]);fm[Tm]=k(Hp)}else{for(fm=new Array(k0.length-1+$t.length),Tm=0;Tm<k0.length-1;Tm++)fm[Tm]=k(k0[Tm]);var St=k0[k0.length-1].slice();for(St.reverse(),Tm=0;Tm<$t.length;Tm++)fm[k0.length-1+Tm]=k($t[Tm].concat(St))}return fm};Ko.length?(se?(se.datum(B),et&&kt&&(xt?(et[Nt]=kt[Nt]=Rt,Se(se).attr("d","M"+kt+"L"+et+"L"+yt.substr(1)).call(x.singleFillStyle,P),Gt=jt(null)):(Se(se).attr("d",yt+"Z").call(x.singleFillStyle,P),Gt=$o())),ft._polygons=Gt,ft._fillElement=se):gt&&(ft.fill.substr(0,6)==="tonext"&&yt&&Pt?(ft.fill==="tonext"?(Se(gt).attr("d",yt+"Z"+Pt+"Z").call(x.singleFillStyle,P),Gt=$o(),ft._polygons=Gt.concat(xn)):(Se(gt).attr("d",yt+"L"+Pt.substr(1)+"Z").call(x.singleFillStyle,P),Gt=jt(jo),ft._polygons=Gt),ft._fillElement=gt):la(gt)),ft._prevRevpath=Lt):(se?la(se):gt&&la(gt),ft._prevRevpath=null),ft._ownPolygons=Gt;function Fp(k0){return k0.filter(function(fm){return!fm.gap&&fm.vis})}function i0(k0){return k0.filter(function(fm){return fm.vis})}function b0(k0){return k0.filter(function(fm){return!fm.gap})}function O0(k0){return k0.id}function C0(k0){if(k0.ids)return O0}function I0(){return!1}function V0(k0,fm,Tm){var om,Rm,ci,Hp=Tm[0].trace,St=w.hasMarkers(Hp),Ht=w.hasText(Hp),Sr=C0(Hp),Rp=I0,Np=I0;if(St||Ht){var Jp=y,n0=Hp.stackgroup,S0=n0&&P._fullLayout._scatterStackOpts[ie._id+X._id][n0].stackgaps==="infer zero";Hp.marker.maxdisplayed||Hp._needsCull?Jp=S0?i0:Fp:n0&&!S0&&(Jp=b0),St&&(Rp=Jp),Ht&&(Np=Jp)}Rm=k0.selectAll("path.point"),om=Rm.data(Rp,Sr);var _0=om.enter().append("path").classed("point",!0);ht&&_0.call(x.pointStyle,Hp,P).call(x.translatePoints,ie,X).style("opacity",0).transition().style("opacity",1),om.order();var w0;St&&(w0=x.makePointStyleFns(Hp)),om.each(function(X0){var $0=v.select(this),Z0=Se($0);ci=x.translatePoint(X0,Z0,ie,X),ci?(x.singlePointStyle(X0,Z0,Hp,w0,P),O.layerClipId&&x.hideOutsideRangePoint(X0,Z0,ie,X,Hp.xcalendar,Hp.ycalendar),Hp.customdata&&$0.classed("plotly-customdata",X0.data!==null&&X0.data!==void 0)):Z0.remove()}),ht?om.exit().transition().style("opacity",0).remove():om.exit().remove(),Rm=fm.selectAll("g"),om=Rm.data(Np,Sr),om.enter().append("g").classed("textpoint",!0).append("text"),om.order(),om.each(function(X0){var $0=v.select(this),Z0=Se($0.select("text"));ci=x.translatePoint(X0,Z0,ie,X),ci?O.layerClipId&&x.hideOutsideRangePoint(X0,$0,ie,X,Hp.xcalendar,Hp.ycalendar):$0.remove()}),om.selectAll("text").call(x.textPointStyle,Hp,P).each(function(X0){var $0=ie.c2p(X0.x),Z0=X.c2p(X0.y);v.select(this).selectAll("tspan.line").each(function(){Se(v.select(this)).attr({x:$0,y:Z0})})}),om.exit().remove()}dt.datum(B),pt.datum(B),V0(dt,pt,B);var H0=ft.cliponaxis===!1,im=H0?null:O.layerClipId;x.setClipUrl(dt,im,P),x.setClipUrl(pt,im,P)}function j(P,N,O,B,S){var D=O.xaxis,z=O.yaxis,H=v.extent(h.simpleMap(D.range,D.r2c)),Y=v.extent(h.simpleMap(z.range,z.r2c)),ht=B[0].trace;if(w.hasMarkers(ht)){var Se=ht.marker.maxdisplayed;if(Se!==0){var ie=B.filter(function(nt){return nt.x>=H[0]&&nt.x<=H[1]&&nt.y>=Y[0]&&nt.y<=Y[1]}),X=Math.ceil(ie.length/Se),ft=0;S.forEach(function(nt,Ze){var rt=nt[0].trace;w.hasMarkers(rt)&&rt.marker.maxdisplayed>0&&Ze<N&&ft++});var Le=Math.round(ft*X/3+Math.floor(ft/3)*X/7.1);B.forEach(function(nt){delete nt.vis}),ie.forEach(function(nt,Ze){Math.round((Ze+Le)%X)===0&&(nt.vis=!0)})}}}}),i2=t((Ue,ve)=>{ve.exports={container:"marker",min:"cmin",max:"cmax"}}),aw=t((Ue,ve)=>{var v=km();ve.exports=function(c,h,_){var y={},x={_fullLayout:_},w=v.getFromTrace(x,h,"x"),A=v.getFromTrace(x,h,"y"),d=c.orig_x;d===void 0&&(d=c.x);var k=c.orig_y;return k===void 0&&(k=c.y),y.xLabel=v.tickText(w,w.c2l(d),!0).text,y.yLabel=v.tickText(A,A.c2l(k),!0).text,y}}),Gy=t((Ue,ve)=>{var v=l(),c=Y0(),h=p1();function _(A){var d=v.select(A).selectAll("g.trace.scatter");d.style("opacity",function(k){return k[0].trace.opacity}),d.selectAll("g.points").each(function(k){var T=v.select(this),L=k.trace||k[0].trace;y(T,L,A)}),d.selectAll("g.text").each(function(k){var T=v.select(this),L=k.trace||k[0].trace;x(T,L,A)}),d.selectAll("g.trace path.js-line").call(c.lineGroupStyle),d.selectAll("g.trace path.js-fill").call(c.fillGroupStyle,A,!1),h.getComponentMethod("errorbars","style")(d)}function y(A,d,k){c.pointStyle(A.selectAll("path.point"),d,k)}function x(A,d,k){c.textPointStyle(A.selectAll("text"),d,k)}function w(A,d,k){var T=d[0].trace;T.selectedpoints?(c.selectedPointStyle(k.selectAll("path.point"),T),c.selectedTextStyle(k.selectAll("text"),T)):(y(k,T,A),x(k,T,A))}ve.exports={style:_,stylePoints:y,styleText:x,styleOnSelect:w}}),kb=t((Ue,ve)=>{var v=sa(),c=$p();ve.exports=function(h,_){var y,x;if(h.mode==="lines")return y=h.line.color,y&&v.opacity(y)?y:h.fillcolor;if(h.mode==="none")return h.fill?h.fillcolor:"";var w=_.mcc||(h.marker||{}).color,A=_.mlcc||((h.marker||{}).line||{}).color;return x=w&&v.opacity(w)?w:A&&v.opacity(A)&&(_.mlw||((h.marker||{}).line||{}).width)?A:"",x?v.opacity(x)<.3?v.addOpacity(x,.3):x:(y=(h.line||{}).color,y&&v.opacity(y)&&c.hasLines(h)&&h.line.width?y:h.fillcolor)}}),Mx=t((Ue,ve)=>{var v=Re(),c=Zv(),h=p1(),_=kb(),y=sa(),x=v.fillText;ve.exports=function(w,A,d,k){var T=w.cd,L=T[0].trace,j=w.xa,P=w.ya,N=j.c2p(A),O=P.c2p(d),B=[N,O],S=L.hoveron||"",D=L.mode.indexOf("markers")!==-1?3:.5,z=!!L.xperiodalignment,H=!!L.yperiodalignment;if(S.indexOf("points")!==-1){var Y=function(Pt){if(z){var xn=j.c2p(Pt.xStart),oa=j.c2p(Pt.xEnd);return N>=Math.min(xn,oa)&&N<=Math.max(xn,oa)?0:1/0}var jo=Math.max(3,Pt.mrc||0),lt=1-1/jo,ut=Math.abs(j.c2p(Pt.x)-N);return ut<jo?lt*ut/jo:ut-jo+lt},ht=function(Pt){if(H){var xn=P.c2p(Pt.yStart),oa=P.c2p(Pt.yEnd);return O>=Math.min(xn,oa)&&O<=Math.max(xn,oa)?0:1/0}var jo=Math.max(3,Pt.mrc||0),lt=1-1/jo,ut=Math.abs(P.c2p(Pt.y)-O);return ut<jo?lt*ut/jo:ut-jo+lt},Se=function(Pt){var xn=Math.max(D,Pt.mrc||0),oa=j.c2p(Pt.x)-N,jo=P.c2p(Pt.y)-O;return Math.max(Math.sqrt(oa*oa+jo*jo)-xn,1-D/xn)},ie=c.getDistanceFunction(k,Y,ht,Se);if(c.getClosest(T,ie,w),w.index!==!1){var X=T[w.index],ft=j.c2p(X.x,!0),Le=P.c2p(X.y,!0),nt=X.mrc||1;w.index=X.i;var Ze=T[0].t.orientation,rt=Ze&&(X.sNorm||X.s),dt=Ze==="h"?rt:X.orig_x!==void 0?X.orig_x:X.x,pt=Ze==="v"?rt:X.orig_y!==void 0?X.orig_y:X.y;return v.extendFlat(w,{color:_(L,X),x0:ft-nt,x1:ft+nt,xLabelVal:dt,y0:Le-nt,y1:Le+nt,yLabelVal:pt,spikeDistance:Se(X),hovertemplate:L.hovertemplate}),x(X,L,w),h.getComponentMethod("errorbars","hoverInfo")(X,L,w),[w]}}function se(Pt){if(!Pt)return!1;var xn=Pt.node();try{var oa=new DOMPoint(B[0],B[1]);return xn.isPointInFill(oa)}catch{var jo=xn.ownerSVGElement.createSVGPoint();return jo.x=B[0],jo.y=B[1],xn.isPointInFill(jo)}}function gt(Pt){var xn,oa=[],jo=1/0,lt=-1/0,ut=1/0,$=-1/0,yt;for(xn=0;xn<Pt.length;xn++){var Lt=Pt[xn];Lt.contains(B)&&(oa.push(Lt),ut=Math.min(ut,Lt.ymin),$=Math.max($,Lt.ymax))}if(oa.length===0)return null;ut=Math.max(ut,0),$=Math.min($,P._length),yt=(ut+$)/2;var ke,G,ne,et,ct,kt,Gt;for(xn=0;xn<oa.length;xn++)for(G=oa[xn].pts,ke=1;ke<G.length;ke++)kt=G[ke-1][1],Gt=G[ke][1],kt>yt!=Gt>=yt&&(et=G[ke-1][0],ct=G[ke][0],Gt-kt&&(ne=et+(ct-et)*(yt-kt)/(Gt-kt),jo=Math.min(jo,ne),lt=Math.max(lt,ne)));return jo=Math.max(jo,0),lt=Math.min(lt,j._length),{x0:jo,x1:lt,y0:yt,y1:yt}}if(S.indexOf("fills")!==-1&&L._fillElement){var xt=se(L._fillElement)&&!se(L._fillExclusionElement);if(xt){var Nt=gt(L._polygons);Nt===null&&(Nt={x0:B[0],x1:B[0],y0:B[1],y1:B[1]});var Rt=y.defaultLine;return y.opacity(L.fillcolor)?Rt=L.fillcolor:y.opacity((L.line||{}).color)&&(Rt=L.line.color),v.extendFlat(w,{distance:w.maxHoverDistance,x0:Nt.x0,x1:Nt.x1,y0:Nt.y0,y1:Nt.y1,color:Rt,hovertemplate:!1}),delete w.index,L.text&&!v.isArrayOrTypedArray(L.text)?w.text=String(L.text):w.text=L.name,[w]}}}}),X3=t((Ue,ve)=>{var v=$p();ve.exports=function(c,h){var _=c.cd,y=c.xaxis,x=c.yaxis,w=[],A=_[0].trace,d,k,T,L,j=!v.hasMarkers(A)&&!v.hasText(A);if(j)return[];if(h===!1)for(d=0;d<_.length;d++)_[d].selected=0;else for(d=0;d<_.length;d++)k=_[d],T=y.c2p(k.x),L=x.c2p(k.y),k.i!==null&&h.contains([T,L],!1,d,c)?(w.push({pointNumber:k.i,x:y.c2d(k.x),y:x.c2d(k.y)}),k.selected=1):k.selected=0;return w}}),I_=t((Ue,ve)=>{ve.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}}),o2=t((Ue,ve)=>{var v=p1().traceIs,c=G0();ve.exports=function(w,A,d,k){d("autotypenumbers",k.autotypenumbersDflt);var T=d("type",(k.splomStash||{}).type);T==="-"&&(h(A,k.data),A.type==="-"?A.type="linear":w.type=A.type)};function h(w,A){if(w.type==="-"){var d=w._id,k=d.charAt(0),T;d.indexOf("scene")!==-1&&(d=k);var L=_(A,d,k);if(L){if(L.type==="histogram"&&k==={v:"y",h:"x"}[L.orientation||"v"]){w.type="linear";return}var j=k+"calendar",P=L[j],N={noMultiCategory:!v(L,"cartesian")||v(L,"noMultiCategory")};if(L.type==="box"&&L._hasPreCompStats&&k==={h:"x",v:"y"}[L.orientation||"v"]&&(N.noMultiCategory=!0),N.autotypenumbers=w.autotypenumbers,x(L,k)){var O=y(L),B=[];for(T=0;T<A.length;T++){var S=A[T];!v(S,"box-violin")||(S[k+"axis"]||k)!==d||(S[O]!==void 0?B.push(S[O][0]):S.name!==void 0?B.push(S.name):B.push("text"),S[j]!==P&&(P=void 0))}w.type=c(B,P,N)}else if(L.type==="splom"){var D=L.dimensions,z=D[L._axesDim[d]];z.visible&&(w.type=c(z.values,P,N))}else w.type=c(L[k]||[L[k+"0"]],P,N)}}}function _(w,A,d){for(var k=0;k<w.length;k++){var T=w[k];if(T.type==="splom"&&T._length>0&&(T["_"+d+"axes"]||{})[A]||(T[d+"axis"]||d)===A&&(x(T,d)||(T[d]||[]).length||T[d+"0"]))return T}}function y(w){return{v:"x",h:"y"}[w.orientation||"v"]}function x(w,A){var d=y(w),k=v(w,"box-violin"),T=v(w._fullInput||{},"candlestick");return k&&!T&&A===d&&w[d]===void 0&&w[d+"0"]===void 0}}),Nb=t((Ue,ve)=>{var v=Z().isTypedArraySpec;function c(h,_){var y=_.dataAttr||h._id.charAt(0),x={},w,A,d;if(_.axData)w=_.axData;else for(w=[],A=0;A<_.data.length;A++){var k=_.data[A];k[y+"axis"]===h._id&&w.push(k)}for(A=0;A<w.length;A++){var T=w[A][y];for(d=0;d<T.length;d++){var L=T[d];L!=null&&(x[L]=1)}}return Object.keys(x)}ve.exports=function(h,_,y,x){if(_.type==="category"){var w=h.categoryarray,A=Array.isArray(w)&&w.length>0||v(w),d;A&&(d="array");var k=y("categoryorder",d),T;k==="array"&&(T=y("categoryarray")),!A&&k==="array"&&(k=_.categoryorder="trace"),k==="trace"?_._initialCategories=[]:k==="array"?_._initialCategories=T.slice():(T=c(_,x).sort(),k==="category ascending"?_._initialCategories=T:k==="category descending"&&(_._initialCategories=T.reverse()))}}}),q3=t((Ue,ve)=>{var v=wt().mix,c=zp(),h=Re();ve.exports=function(_,y,x,w){w=w||{};var A=w.dfltColor;function d(X,ft){return h.coerce2(_,y,w.attributes,X,ft)}var k=d("linecolor",A),T=d("linewidth"),L=x("showline",w.showLine||!!k||!!T);L||(delete y.linecolor,delete y.linewidth);var j=v(A,w.bgColor,w.blend||c.lightFraction).toRgbString(),P=d("gridcolor",j),N=d("gridwidth"),O=d("griddash"),B=x("showgrid",w.showGrid||!!P||!!N||!!O);if(B||(delete y.gridcolor,delete y.gridwidth,delete y.griddash),w.hasMinor){var S=v(y.gridcolor,w.bgColor,67).toRgbString(),D=d("minor.gridcolor",S),z=d("minor.gridwidth",y.gridwidth||1),H=d("minor.griddash",y.griddash||"solid"),Y=x("minor.showgrid",!!D||!!z||!!H);Y||(delete y.minor.gridcolor,delete y.minor.gridwidth,delete y.minor.griddash)}if(!w.noZeroLine){d("zerolinelayer");var ht=d("zerolinecolor",A),Se=d("zerolinewidth"),ie=x("zeroline",w.showGrid||!!ht||!!Se);ie||(delete y.zerolinelayer,delete y.zerolinecolor,delete y.zerolinewidth)}}}),U_=t((Ue,ve)=>{var v=E(),c=p1(),h=Re(),_=Nm(),y=Mt(),x=o0(),w=tt(),A=Dt(),d=Wt(),k=Yt(),T=Nb(),L=q3(),j=Qm(),P=tm(),N=jm().WEEKDAY_PATTERN,O=jm().HOUR_PATTERN;ve.exports=function(z,H,Y,ht,Se){var ie=ht.letter,X=ht.font||{},ft=ht.splomStash||{},Le=Y("visible",!ht.visibleDflt),nt=H._template||{},Ze=H.type||nt.type||"-",rt;if(Ze==="date"){var dt=c.getComponentMethod("calendars","handleDefaults");dt(z,H,"calendar",ht.calendar),ht.noTicklabelmode||(rt=Y("ticklabelmode"))}!ht.noTicklabelindex&&(Ze==="date"||Ze==="linear")&&Y("ticklabelindex");var pt="";(!ht.noTicklabelposition||Ze==="multicategory")&&(pt=h.coerce(z,H,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:rt==="period"?["outside","inside"]:ie==="x"?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),ht.noTicklabeloverflow||Y("ticklabeloverflow",pt.indexOf("inside")!==-1?"hide past domain":Ze==="category"||Ze==="multicategory"?"allow":"hide past div"),P(H,Se),j(z,H,Y,ht),T(z,H,Y,ht),ht.noHover||(Ze!=="category"&&Y("hoverformat"),ht.noUnifiedhovertitle||Y("unifiedhovertitle.text"));var se=Y("color"),gt=se!==x.color.dflt?se:X.color,xt=ft.label||Se._dfltTitle[ie];if(k(z,H,Y,Ze,ht),!Le)return H;Y("title.text",xt),h.coerceFont(Y,"title.font",X,{overrideDflt:{size:h.bigFont(X.size),color:gt}}),w(z,H,Y,Ze);var Nt=ht.hasMinor;if(Nt&&(_.newContainer(H,"minor"),w(z,H,Y,Ze,{isMinor:!0})),d(z,H,Y,Ze,ht),A(z,H,Y,ht),Nt){var Rt=ht.isMinor;ht.isMinor=!0,A(z,H,Y,ht),ht.isMinor=Rt}L(z,H,Y,{dfltColor:se,bgColor:ht.bgColor,showGrid:ht.showGrid,hasMinor:Nt,attributes:x}),Nt&&!H.minor.ticks&&!H.minor.showgrid&&delete H.minor,(H.showline||H.ticks)&&Y("mirror");var Pt=Ze==="multicategory";if(!ht.noTickson&&(Ze==="category"||Pt)&&(H.ticks||H.showgrid)&&(Pt?(Y("tickson","boundaries"),delete H.ticklabelposition):Y("tickson")),Pt){var xn=Y("showdividers");xn&&(Y("dividercolor"),Y("dividerwidth"))}if(Ze==="date")if(y(z,H,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:B}),!H.rangebreaks.length)delete H.rangebreaks;else{for(var oa=0;oa<H.rangebreaks.length;oa++)if(H.rangebreaks[oa].pattern===N){H._hasDayOfWeekBreaks=!0;break}if(P(H,Se),Se._has("scattergl")||Se._has("splom"))for(var jo=0;jo<ht.data.length;jo++){var lt=ht.data[jo];(lt.type==="scattergl"||lt.type==="splom")&&(lt.visible=!1,h.warn(lt.type+" traces do not work on axes with rangebreaks. Setting trace "+lt.index+" to `visible: false`."))}}return H};function B(z,H,Y){function ht(dt,pt){return h.coerce(z,H,x.rangebreaks,dt,pt)}var Se=ht("enabled");if(Se){var ie=ht("bounds");if(ie&&ie.length>=2){var X="",ft,Le;if(ie.length===2){for(ft=0;ft<2;ft++)if(Le=D(ie[ft]),Le){X=N;break}}var nt=ht("pattern",X);if(nt===N)for(ft=0;ft<2;ft++)Le=D(ie[ft]),Le&&(H.bounds[ft]=ie[ft]=Le-1);if(nt)for(ft=0;ft<2;ft++)switch(Le=ie[ft],nt){case N:if(!v(Le)){H.enabled=!1;return}if(Le=+Le,Le!==Math.floor(Le)||Le<0||Le>=7){H.enabled=!1;return}H.bounds[ft]=ie[ft]=Le;break;case O:if(!v(Le)){H.enabled=!1;return}if(Le=+Le,Le<0||Le>24){H.enabled=!1;return}H.bounds[ft]=ie[ft]=Le;break}if(Y.autorange===!1){var Ze=Y.range;if(Ze[0]<Ze[1]){if(ie[0]<Ze[0]&&ie[1]>Ze[1]){H.enabled=!1;return}}else if(ie[0]>Ze[0]&&ie[1]<Ze[1]){H.enabled=!1;return}}}else{var rt=ht("values");if(rt&&rt.length)ht("dvalue");else{H.enabled=!1;return}}}}var S={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function D(z){if(typeof z=="string")return S[z.substr(0,3).toLowerCase()]}}),Ob=t((Ue,ve)=>{var v=E(),c=Re();ve.exports=function(h,_,y,x){var w=x.counterAxes||[],A=x.overlayableAxes||[],d=x.letter,k=x.grid,T=x.overlayingDomain,L,j,P,N,O,B;k&&(j=k._domains[d][k._axisMap[_._id]],L=k._anchors[_._id],j&&(P=k[d+"side"].split(" ")[0],N=k.domain[d][P==="right"||P==="top"?1:0])),j=j||[0,1],L=L||(v(h.position)?"free":w[0]||"free"),P=P||(d==="x"?"bottom":"left"),N=N||0,O=0,B=!1;var S=c.coerce(h,_,{anchor:{valType:"enumerated",values:["free"].concat(w),dflt:L}},"anchor"),D=c.coerce(h,_,{side:{valType:"enumerated",values:d==="x"?["bottom","top"]:["left","right"],dflt:P}},"side");if(S==="free"){if(d==="y"){var z=y("autoshift");z&&(N=D==="left"?T[0]:T[1],B=_.automargin?_.automargin:!0,O=D==="left"?-3:3),y("shift",O)}y("position",N)}y("automargin",B);var H=!1;if(A.length&&(H=c.coerce(h,_,{overlaying:{valType:"enumerated",values:[!1].concat(A),dflt:!1}},"overlaying")),!H){var Y=y("domain",j);Y[0]>Y[1]-1/4096&&(_.domain=j),c.noneOrAll(h.domain,_.domain,j),_.tickmode==="sync"&&(_.tickmode="auto")}return y("layer"),_}}),ix=t((Ue,ve)=>{var v=Re(),c=sa(),h=T0().isUnifiedHover,_=fy(),y=Nm(),x=Zm(),w=o0(),A=o2(),d=U_(),k=_g(),T=Ob(),L=A1(),j=L.id2name,P=L.name2id,N=jm().AX_ID_PATTERN,O=p1(),B=O.traceIs,S=O.getComponentMethod;function D(z,H,Y){Array.isArray(z[H])?z[H].push(Y):z[H]=[Y]}ve.exports=function(z,H,Y){var ht=H.autotypenumbers,Se={},ie={},X={},ft={},Le={},nt={},Ze={},rt={},dt={},pt={},se,gt;for(se=0;se<Y.length;se++){var xt=Y[se];if(B(xt,"cartesian")){var Nt;if(xt.xaxis)Nt=j(xt.xaxis),D(Se,Nt,xt);else if(xt.xaxes)for(gt=0;gt<xt.xaxes.length;gt++)D(Se,j(xt.xaxes[gt]),xt);var Rt;if(xt.yaxis)Rt=j(xt.yaxis),D(Se,Rt,xt);else if(xt.yaxes)for(gt=0;gt<xt.yaxes.length;gt++)D(Se,j(xt.yaxes[gt]),xt);if(xt.type==="funnel"?xt.orientation==="h"?(Nt&&(ie[Nt]=!0),Rt&&(Ze[Rt]=!0)):Rt&&(X[Rt]=!0):xt.type==="image"?(Rt&&(rt[Rt]=!0),Nt&&(rt[Nt]=!0)):(Rt&&(Le[Rt]=!0,nt[Rt]=!0),(!B(xt,"carpet")||xt.type==="carpet"&&!xt._cheater)&&Nt&&(ft[Nt]=!0)),xt.type==="carpet"&&xt._cheater&&Nt&&(ie[Nt]=!0),B(xt,"2dMap")&&(dt[Nt]=!0,dt[Rt]=!0),B(xt,"oriented")){var Pt=xt.orientation==="h"?Rt:Nt;pt[Pt]=!0}}}var xn=H._subplots,oa=xn.xaxis,jo=xn.yaxis,lt=v.simpleMap(oa,j),ut=v.simpleMap(jo,j),$=lt.concat(ut),yt=c.background;oa.length&&jo.length&&(yt=v.coerce(z,H,x,"plot_bgcolor"));var Lt=c.combine(yt,H.paper_bgcolor),ke,G,ne,et,ct;function kt(){var Sr=Se[ke]||[];ct._traceIndices=Sr.map(function(Rp){return Rp.index}),ct._annIndices=[],ct._shapeIndices=[],ct._selectionIndices=[],ct._imgIndices=[],ct._subplotsWith=[],ct._counterAxes=[],ct._name=ct._attr=ke,ct._id=G}function Gt(Sr,Rp){return v.coerce(et,ct,w,Sr,Rp)}function $t(Sr,Rp){return v.coerce2(et,ct,w,Sr,Rp)}function Ko(Sr){return Sr==="x"?jo:oa}function Up(Sr,Rp){for(var Np=Sr==="x"?lt:ut,Jp=[],n0=0;n0<Np.length;n0++){var S0=Np[n0];S0!==Rp&&!(z[S0]||{}).overlaying&&Jp.push(P(S0))}return Jp}var e0={x:Ko("x"),y:Ko("y")},E0=e0.x.concat(e0.y),m0={},f0=[];function la(){var Sr=et.matches;N.test(Sr)&&E0.indexOf(Sr)===-1&&(m0[Sr]=et.type,f0=Object.keys(m0))}var $o=_(z,H),jt=h($o);for(se=0;se<$.length;se++){ke=$[se],G=P(ke),ne=ke.charAt(0),v.isPlainObject(z[ke])||(z[ke]={}),et=z[ke],ct=y.newContainer(H,ke,ne+"axis"),kt();var Fp=ne==="x"&&!ft[ke]&&ie[ke]||ne==="y"&&!Le[ke]&&X[ke],i0=ne==="y"&&(!nt[ke]&&Ze[ke]||rt[ke]),b0={hasMinor:!0,letter:ne,font:H.font,outerTicks:dt[ke],showGrid:!pt[ke],data:Se[ke]||[],bgColor:Lt,calendar:H.calendar,automargin:!0,visibleDflt:Fp,reverseDflt:i0,autotypenumbersDflt:ht,splomStash:((H._splomAxes||{})[ne]||{})[G],noAutotickangles:ne==="y"};Gt("uirevision",H.uirevision),A(et,ct,Gt,b0),d(et,ct,Gt,b0,H);var O0=jt&&ne===$o.charAt(0),C0=$t("spikecolor",jt?ct.color:void 0),I0=$t("spikethickness",jt?1.5:void 0),V0=$t("spikedash",jt?"dot":void 0),H0=$t("spikemode",jt?"across":void 0),im=$t("spikesnap"),k0=Gt("showspikes",!!O0||!!C0||!!I0||!!V0||!!H0||!!im);k0||(delete ct.spikecolor,delete ct.spikethickness,delete ct.spikedash,delete ct.spikemode,delete ct.spikesnap);var fm=j(et.overlaying),Tm=[0,1];if(H[fm]!==void 0){var om=j(H[fm].anchor);H[om]!==void 0&&(Tm=H[om].domain)}T(et,ct,Gt,{letter:ne,counterAxes:e0[ne],overlayableAxes:Up(ne,ke),grid:H.grid,overlayingDomain:Tm}),Gt("title.standoff"),la(),ct._input=et}for(se=0;se<f0.length;){G=f0[se++],ke=j(G),ne=ke.charAt(0),v.isPlainObject(z[ke])||(z[ke]={}),et=z[ke],ct=y.newContainer(H,ke,ne+"axis"),kt();var Rm={letter:ne,font:H.font,outerTicks:dt[ke],showGrid:!pt[ke],data:[],bgColor:Lt,calendar:H.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:ht,splomStash:((H._splomAxes||{})[ne]||{})[G]};Gt("uirevision",H.uirevision),ct.type=m0[G]||"linear",d(et,ct,Gt,Rm,H),T(et,ct,Gt,{letter:ne,counterAxes:e0[ne],overlayableAxes:Up(ne,ke),grid:H.grid}),Gt("fixedrange"),Gt("modebardisable"),la(),ct._input=et}var ci=S("rangeslider","handleDefaults"),Hp=S("rangeselector","handleDefaults");for(se=0;se<lt.length;se++)ke=lt[se],et=z[ke],ct=H[ke],ci(z,H,ke),ct.type==="date"&&Hp(et,ct,H,ut,ct.calendar),Gt("fixedrange"),Gt("modebardisable");for(se=0;se<ut.length;se++){ke=ut[se],et=z[ke],ct=H[ke];var St=H[j(ct.anchor)],Ht=S("rangeslider","isVisible")(St);Gt("fixedrange",Ht),Gt("modebardisable")}k.handleDefaults(z,H,{axIds:E0.concat(f0).sort(L.idSort),axHasImage:rt})}}),x2=t((Ue,ve)=>{var v=l(),c=p1(),h=Re(),_=Y0(),y=km();ve.exports=function(x,w,A,d){var k=x._fullLayout;if(w.length===0){y.redrawComponents(x);return}function T(H){var Y=H.xaxis,ht=H.yaxis;k._defs.select("#"+H.clipId+"> rect").call(_.setTranslate,0,0).call(_.setScale,1,1),H.plot.call(_.setTranslate,Y._offset,ht._offset).call(_.setScale,1,1);var Se=H.plot.selectAll(".scatterlayer .trace");Se.selectAll(".point").call(_.setPointGroupScale,1,1),Se.selectAll(".textpoint").call(_.setTextPointsScale,1,1),Se.call(_.hideOutsideRangePoints,H)}function L(H,Y){var ht=H.plotinfo,Se=ht.xaxis,ie=ht.yaxis,X=Se._length,ft=ie._length,Le=!!H.xr1,nt=!!H.yr1,Ze=[];if(Le){var rt=h.simpleMap(H.xr0,Se.r2l),dt=h.simpleMap(H.xr1,Se.r2l),pt=rt[1]-rt[0],se=dt[1]-dt[0];Ze[0]=(rt[0]*(1-Y)+Y*dt[0]-rt[0])/(rt[1]-rt[0])*X,Ze[2]=X*(1-Y+Y*se/pt),Se.range[0]=Se.l2r(rt[0]*(1-Y)+Y*dt[0]),Se.range[1]=Se.l2r(rt[1]*(1-Y)+Y*dt[1])}else Ze[0]=0,Ze[2]=X;if(nt){var gt=h.simpleMap(H.yr0,ie.r2l),xt=h.simpleMap(H.yr1,ie.r2l),Nt=gt[1]-gt[0],Rt=xt[1]-xt[0];Ze[1]=(gt[1]*(1-Y)+Y*xt[1]-gt[1])/(gt[0]-gt[1])*ft,Ze[3]=ft*(1-Y+Y*Rt/Nt),ie.range[0]=Se.l2r(gt[0]*(1-Y)+Y*xt[0]),ie.range[1]=ie.l2r(gt[1]*(1-Y)+Y*xt[1])}else Ze[1]=0,Ze[3]=ft;y.drawOne(x,Se,{skipTitle:!0}),y.drawOne(x,ie,{skipTitle:!0}),y.redrawComponents(x,[Se._id,ie._id]);var Pt=Le?X/Ze[2]:1,xn=nt?ft/Ze[3]:1,oa=Le?Ze[0]:0,jo=nt?Ze[1]:0,lt=Le?Ze[0]/Ze[2]*X:0,ut=nt?Ze[1]/Ze[3]*ft:0,$=Se._offset-lt,yt=ie._offset-ut;ht.clipRect.call(_.setTranslate,oa,jo).call(_.setScale,1/Pt,1/xn),ht.plot.call(_.setTranslate,$,yt).call(_.setScale,Pt,xn),_.setPointGroupScale(ht.zoomScalePts,1/Pt,1/xn),_.setTextPointsScale(ht.zoomScaleTxt,1/Pt,1/xn)}var j;d&&(j=d());function P(){for(var H={},Y=0;Y<w.length;Y++){var ht=w[Y],Se=ht.plotinfo.xaxis,ie=ht.plotinfo.yaxis;ht.xr1&&(H[Se._name+".range"]=ht.xr1.slice()),ht.yr1&&(H[ie._name+".range"]=ht.yr1.slice())}return j&&j(),c.call("relayout",x,H).then(function(){for(var X=0;X<w.length;X++)T(w[X].plotinfo)})}function N(){for(var H={},Y=0;Y<w.length;Y++){var ht=w[Y],Se=ht.plotinfo.xaxis,ie=ht.plotinfo.yaxis;ht.xr0&&(H[Se._name+".range"]=ht.xr0.slice()),ht.yr0&&(H[ie._name+".range"]=ht.yr0.slice())}return c.call("relayout",x,H).then(function(){for(var X=0;X<w.length;X++)T(w[X].plotinfo)})}var O,B,S,D=v.ease(A.easing);x._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(S),S=null,N()});function z(){B=Date.now();for(var H=Math.min(1,(B-O)/A.duration),Y=D(H),ht=0;ht<w.length;ht++)L(w[ht],Y);B-O>A.duration?(P(),S=window.cancelAnimationFrame(z)):S=window.requestAnimationFrame(z)}return O=Date.now(),S=window.requestAnimationFrame(z),Promise.resolve()}}),Ix=t(Ue=>{var ve=l(),v=p1(),c=Re(),h=lg(),_=Y0(),y=Tg().getModuleCalcData,x=A1(),w=jm(),A=Mg(),d=c.ensureSingle;function k(B,S,D){return c.ensureSingle(B,S,D,function(z){z.datum(D)})}var T=w.zindexSeparator;Ue.name="cartesian",Ue.attr=["xaxis","yaxis"],Ue.idRoot=["x","y"],Ue.idRegex=w.idRegex,Ue.attrRegex=w.attrRegex,Ue.attributes=I_(),Ue.layoutAttributes=o0(),Ue.supplyLayoutDefaults=ix(),Ue.transitionAxes=x2(),Ue.finalizeSubplots=function(B,S){var D=S._subplots,z=D.xaxis,H=D.yaxis,Y=D.cartesian,ht=Y,Se={},ie={},X,ft,Le;for(X=0;X<ht.length;X++){var nt=ht[X].split("y");Se[nt[0]]=1,ie["y"+nt[1]]=1}for(X=0;X<z.length;X++)ft=z[X],Se[ft]||(Le=(B[x.id2name(ft)]||{}).anchor,w.idRegex.y.test(Le)||(Le="y"),Y.push(ft+Le),ht.push(ft+Le),ie[Le]||(ie[Le]=1,c.pushUnique(H,Le)));for(X=0;X<H.length;X++)Le=H[X],ie[Le]||(ft=(B[x.id2name(Le)]||{}).anchor,w.idRegex.x.test(ft)||(ft="x"),Y.push(ft+Le),ht.push(ft+Le),Se[ft]||(Se[ft]=1,c.pushUnique(z,ft)));if(!ht.length){ft="",Le="";for(var Ze in B)if(w.attrRegex.test(Ze)){var rt=Ze.charAt(0);rt==="x"?(!ft||+Ze.substr(5)<+ft.substr(5))&&(ft=Ze):(!Le||+Ze.substr(5)<+Le.substr(5))&&(Le=Ze)}ft=ft?x.name2id(ft):"x",Le=Le?x.name2id(Le):"y",z.push(ft),H.push(Le),Y.push(ft+Le)}},Ue.plot=function(B,S,D,z){var H=B._fullLayout,Y=H._subplots.cartesian,ht=B.calcdata,Se;if(!Array.isArray(S))for(S=[],Se=0;Se<ht.length;Se++)S.push(Se);for(var ie=H._zindices,X=0;X<ie.length;X++){var ft=ie[X];for(Se=0;Se<Y.length;Se++){var Le=Y[Se],nt=H._plots[Le];if(X>0){var Ze=nt.id;if(Ze.indexOf(T)!==-1)continue;Ze+=T+(X+1),nt=c.extendFlat({},nt,{id:Ze,plot:H._cartesianlayer.selectAll(".subplot").select("."+Ze)})}for(var rt=[],dt,pt=0;pt<ht.length;pt++){var se=ht[pt],gt=se[0].trace;ft===(gt.zorder||0)&&gt.xaxis+gt.yaxis===Le&&((S.indexOf(gt.index)!==-1||gt.carpet)&&(dt&&dt[0].trace.xaxis+dt[0].trace.yaxis===Le&&["tonextx","tonexty","tonext"].indexOf(gt.fill)!==-1&&rt.indexOf(dt)===-1&&rt.push(dt),rt.push(se)),dt=se)}L(B,nt,rt,D,z)}}};function L(B,S,D,z,H){for(var Y=w.traceLayerClasses,ht=B._fullLayout,Se=ht._zindices,ie=ht._modules,X,ft,Le,nt=[],Ze=[],rt=0;rt<Se.length;rt++)for(var dt=Se[rt],pt=0;pt<ie.length;pt++){X=ie[pt];var se=X.name,gt=v.modules[se].categories;if(gt.svg){var xt=X.layerName||se+"layer",Nt=xt+(rt?Number(rt)+1:""),Rt=X.plot;ft=y(D,Rt,dt),Le=ft[0],D=ft[1],Le.length&&nt.push({i:Y.indexOf(xt),zindex:rt,className:Nt,plotMethod:Rt,cdModule:Le}),gt.zoomScale&&Ze.push("."+Nt)}}nt.sort(function(oa,jo){return(oa.zindex||0)-(jo.zindex||0)||oa.i-jo.i});var Pt=S.plot.selectAll("g.mlayer").data(nt,function(oa){return oa.className});if(Pt.enter().append("g").attr("class",function(oa){return oa.className}).classed("mlayer",!0).classed("rangeplot",S.isRangePlot),Pt.exit().remove(),Pt.order(),Pt.each(function(oa){var jo=ve.select(this),lt=oa.className;oa.plotMethod(B,S,oa.cdModule,jo,z,H),w.clipOnAxisFalseQuery.indexOf("."+lt)===-1&&_.setClipUrl(jo,S.layerClipId,B)}),ht._has("scattergl")&&(X=v.getModule("scattergl"),Le=y(D,X)[0],X.plot(B,S,Le)),!B._context.staticPlot&&(S._hasClipOnAxisFalse&&(S.clipOnAxisFalseTraces=S.plot.selectAll(w.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),Ze.length)){var xn=S.plot.selectAll(Ze.join(",")).selectAll(".trace");S.zoomScalePts=xn.selectAll("path.point"),S.zoomScaleTxt=xn.selectAll(".textpoint")}}Ue.clean=function(B,S,D,z){var H=z._plots||{},Y=S._plots||{},ht=z._subplots||{},Se,ie,X;if(z._hasOnlyLargeSploms&&!S._hasOnlyLargeSploms)for(X in H)Se=H[X],Se.plotgroup&&Se.plotgroup.remove();var ft=z._has&&z._has("gl"),Le=S._has&&S._has("gl");if(ft&&!Le)for(X in H)Se=H[X],Se._scene&&Se._scene.destroy();if(ht.xaxis&&ht.yaxis){var nt=x.listIds({_fullLayout:z});for(ie=0;ie<nt.length;ie++){var Ze=nt[ie];S[x.id2name(Ze)]||z._infolayer.selectAll(".g-"+Ze+"title").remove()}}var rt=z._has&&z._has("cartesian"),dt=S._has&&S._has("cartesian");if(rt&&!dt)N(z._cartesianlayer.selectAll(".subplot"),z),z._defs.selectAll(".axesclip").remove(),delete z._axisConstraintGroups,delete z._axisMatchGroups;else if(ht.cartesian)for(ie=0;ie<ht.cartesian.length;ie++){var pt=ht.cartesian[ie];if(pt.indexOf(T)===-1&&!Y[pt]){var se="."+pt+",."+pt+"-x,."+pt+"-y";z._cartesianlayer.selectAll(se).remove(),O(pt,z)}}},Ue.drawFramework=function(B){var S=B._fullLayout,D=B.calcdata,z,H={};for(z=0;z<D.length;z++){var Y=D[z][0],ht=Y.trace,Se=ht.zorder||0;H[Se]||(H[Se]=[]),H[Se].push(Y)}var ie=Object.keys(H).map(Number).sort(c.sorterAsc);ie.length||(ie=[0]),S._zindices=ie;var X=j(B),ft=X.length,Le=[];for(z=0;z<ft;z++)Le[z]=X[z].slice();for(var nt=1;nt<ie.length;nt++){var Ze=[];for(z=0;z<ft;z++)Ze[z]=X[z].slice(),Ze[z][0]+=T+(nt+1);Le=Le.concat(Ze)}var rt=S._cartesianlayer.selectAll(".subplot").data(Le,String);rt.enter().append("g").attr("class",function(dt){return"subplot "+dt[0]}),rt.order(),rt.exit().call(N,S),rt.each(function(dt){var pt=dt[0],se=pt.indexOf(T),gt=se!==-1,xt=gt?pt.slice(0,se):pt,Nt=S._plots[pt];Nt||(Nt=c.extendFlat({},S._plots[xt]),Nt&&(Nt.id=pt,S._plots[pt]=Nt,S._subplots.cartesian.push(pt))),Nt&&(Nt.plotgroup=ve.select(this),P(B,Nt),gt||(Nt.draglayer=d(S._draggers,"g",pt)))})},Ue.rangePlot=function(B,S,D){P(B,S),L(B,S,D),h.style(B)};function j(B){var S=B._fullLayout,D=S._zindices.length,z=S._subplots.cartesian,H=z.length,Y,ht,Se,ie,X,ft,Le=[],nt=[];for(Y=0;Y<H;Y++){Se=z[Y],ie=S._plots[Se],X=ie.xaxis,ft=ie.yaxis;var Ze=X._mainAxis,rt=ft._mainAxis,dt=Ze._id+rt._id,pt=S._plots[dt];ie.overlays=[],dt!==Se&&pt?(ie.mainplot=dt,ie.mainplotinfo=pt,nt.push(Se)):(ie.mainplot=void 0,ie.mainplotinfo=void 0,Le.push(Se))}for(Y=0;Y<nt.length;Y++)Se=nt[Y],ie=S._plots[Se],ie.mainplotinfo.overlays.push(ie);var se=Le.concat(nt),gt=[];for(Y=0;Y<H;Y++){Se=se[Y],ie=S._plots[Se],X=ie.xaxis,ft=ie.yaxis;for(var xt=[],Nt=1;Nt<=D;Nt++){var Rt="";for(Nt>1&&(Rt+=T+Nt),xt.push(Se+Rt),ht=0;ht<ie.overlays.length;ht++)xt.push(ie.overlays[ht].id+Rt)}xt=xt.concat([X.layer,ft.layer,X.overlaying||"",ft.overlaying||""]),gt.push(xt)}return gt}function P(B,S){var D=B._fullLayout,z=S.plotgroup,H=S.id,Y=H.indexOf(T),ht=Y!==-1,Se=w.layerValue2layerClass[S.xaxis.layer],ie=w.layerValue2layerClass[S.yaxis.layer],X=D._hasOnlyLargeSploms,ft=D._zindices.length>1,Le=S.mainplotinfo;if(!S.mainplot||ft)if(X)S.xlines=d(z,"path","xlines-above"),S.ylines=d(z,"path","ylines-above"),S.xaxislayer=d(z,"g","xaxislayer-above"),S.yaxislayer=d(z,"g","yaxislayer-above");else{if(!ht){var nt=d(z,"g","layer-subplot");S.shapelayer=d(nt,"g","shapelayer"),S.imagelayer=d(nt,"g","imagelayer"),Le&&ft?(S.minorGridlayer=Le.minorGridlayer,S.gridlayer=Le.gridlayer,S.zerolinelayer=Le.zerolinelayer):(S.minorGridlayer=d(z,"g","minor-gridlayer"),S.gridlayer=d(z,"g","gridlayer"),S.zerolinelayer=d(z,"g","zerolinelayer"));var Ze=d(z,"g","layer-between");S.shapelayerBetween=d(Ze,"g","shapelayer"),S.imagelayerBetween=d(Ze,"g","imagelayer"),d(z,"path","xlines-below"),d(z,"path","ylines-below"),S.overlinesBelow=d(z,"g","overlines-below"),d(z,"g","xaxislayer-below"),d(z,"g","yaxislayer-below"),S.overaxesBelow=d(z,"g","overaxes-below")}S.overplot=d(z,"g","overplot"),S.plot=d(S.overplot,"g",H),Le&&ft?S.zerolinelayerAbove=Le.zerolinelayerAbove:S.zerolinelayerAbove=d(z,"g","zerolinelayer-above"),ht||(S.xlines=d(z,"path","xlines-above"),S.ylines=d(z,"path","ylines-above"),S.overlinesAbove=d(z,"g","overlines-above"),d(z,"g","xaxislayer-above"),d(z,"g","yaxislayer-above"),S.overaxesAbove=d(z,"g","overaxes-above"),S.xlines=z.select(".xlines-"+Se),S.ylines=z.select(".ylines-"+ie),S.xaxislayer=z.select(".xaxislayer-"+Se),S.yaxislayer=z.select(".yaxislayer-"+ie))}else{var rt=Le.plotgroup,dt=H+"-x",pt=H+"-y";S.minorGridlayer=Le.minorGridlayer,S.gridlayer=Le.gridlayer,S.zerolinelayer=Le.zerolinelayer,S.zerolinelayerAbove=Le.zerolinelayerAbove,d(Le.overlinesBelow,"path",dt),d(Le.overlinesBelow,"path",pt),d(Le.overaxesBelow,"g",dt),d(Le.overaxesBelow,"g",pt),S.plot=d(Le.overplot,"g",H),d(Le.overlinesAbove,"path",dt),d(Le.overlinesAbove,"path",pt),d(Le.overaxesAbove,"g",dt),d(Le.overaxesAbove,"g",pt),S.xlines=rt.select(".overlines-"+Se).select("."+dt),S.ylines=rt.select(".overlines-"+ie).select("."+pt),S.xaxislayer=rt.select(".overaxes-"+Se).select("."+dt),S.yaxislayer=rt.select(".overaxes-"+ie).select("."+pt)}ht||(X||(k(S.minorGridlayer,"g",S.xaxis._id),k(S.minorGridlayer,"g",S.yaxis._id),S.minorGridlayer.selectAll("g").map(function(se){return se[0]}).sort(x.idSort),k(S.gridlayer,"g",S.xaxis._id),k(S.gridlayer,"g",S.yaxis._id),S.gridlayer.selectAll("g").map(function(se){return se[0]}).sort(x.idSort)),S.xlines.style("fill","none").classed("crisp",!0),S.ylines.style("fill","none").classed("crisp",!0))}function N(B,S){if(B){var D={};B.each(function(ie){var X=ie[0],ft=ve.select(this);ft.remove(),O(X,S),D[X]=!0});for(var z in S._plots)for(var H=S._plots[z],Y=H.overlays||[],ht=0;ht<Y.length;ht++){var Se=Y[ht];D[Se.id]&&Se.plot.selectAll(".trace").remove()}}}function O(B,S){S._draggers.selectAll("g."+B).remove(),S._defs.select("#clip"+S._uid+B+"plot").remove()}Ue.toSVG=function(B){var S=B._fullLayout._glimages,D=ve.select(B).selectAll(".svg-container"),z=D.filter(function(Y,ht){return ht===D.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus");function H(){var Y=this,ht=Y.toDataURL("image/png"),Se=S.append("svg:image");Se.attr({xmlns:A.svg,"xlink:href":ht,preserveAspectRatio:"none",x:0,y:0,width:Y.style.width,height:Y.style.height})}z.each(H)},Ue.updateFx=v2().updateFx}),F_=t((Ue,ve)=>{var v=$p();ve.exports={hasLines:v.hasLines,hasMarkers:v.hasMarkers,hasText:v.hasText,isBubble:v.isBubble,attributes:e2(),layoutAttributes:K1(),supplyDefaults:nw(),crossTraceDefaults:G3(),supplyLayoutDefaults:Db(),calc:O_().calc,crossTraceCalc:Lb(),arraysToCalcdata:Zy(),plot:P_(),colorbar:i2(),formatLabels:aw(),style:Gy().style,styleOnSelect:Gy().styleOnSelect,hoverPoints:Mx(),selectPoints:X3(),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:Ix(),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}}),$2=t((Ue,ve)=>{var v=l(),c=sa(),h=Dy(),_=Re(),y=_.strScale,x=_.strRotate,w=_.strTranslate;ve.exports=function(A,d,k){var T=A.node(),L=h[k.arrowhead||0],j=h[k.startarrowhead||0],P=(k.arrowwidth||1)*(k.arrowsize||1),N=(k.arrowwidth||1)*(k.startarrowsize||1),O=d.indexOf("start")>=0,B=d.indexOf("end")>=0,S=L.backoff*P+k.standoff,D=j.backoff*N+k.startstandoff,z,H,Y,ht;if(T.nodeName==="line"){z={x:+A.attr("x1"),y:+A.attr("y1")},H={x:+A.attr("x2"),y:+A.attr("y2")};var Se=z.x-H.x,ie=z.y-H.y;if(Y=Math.atan2(ie,Se),ht=Y+Math.PI,S&&D&&S+D>Math.sqrt(Se*Se+ie*ie)){Nt();return}if(S){if(S*S>Se*Se+ie*ie){Nt();return}var X=S*Math.cos(Y),ft=S*Math.sin(Y);H.x+=X,H.y+=ft,A.attr({x2:H.x,y2:H.y})}if(D){if(D*D>Se*Se+ie*ie){Nt();return}var Le=D*Math.cos(Y),nt=D*Math.sin(Y);z.x-=Le,z.y-=nt,A.attr({x1:z.x,y1:z.y})}}else if(T.nodeName==="path"){var Ze=T.getTotalLength(),rt="";if(Ze<S+D){Nt();return}var dt=T.getPointAtLength(0),pt=T.getPointAtLength(.1);Y=Math.atan2(dt.y-pt.y,dt.x-pt.x),z=T.getPointAtLength(Math.min(D,Ze)),rt="0px,"+D+"px,";var se=T.getPointAtLength(Ze),gt=T.getPointAtLength(Ze-.1);ht=Math.atan2(se.y-gt.y,se.x-gt.x),H=T.getPointAtLength(Math.max(0,Ze-S));var xt=rt?D+S:S;rt+=Ze-xt+"px,"+Ze+"px",A.style("stroke-dasharray",rt)}function Nt(){A.style("stroke-dasharray","0px,100px")}function Rt(Pt,xn,oa,jo){Pt.path&&(Pt.noRotate&&(oa=0),v.select(T.parentNode).append("path").attr({class:A.attr("class"),d:Pt.path,transform:w(xn.x,xn.y)+x(oa*180/Math.PI)+y(jo)}).style({fill:c.rgb(k.arrowcolor),"stroke-width":0}))}O&&Rt(j,z,Y,N),B&&Rt(L,H,ht,P)}}),Wy=t((Ue,ve)=>{var v=l(),c=p1(),h=lg(),_=Re(),y=_.strTranslate,x=km(),w=sa(),A=Y0(),d=Zv(),k=j1(),T=W1(),L=Km(),j=Nm().arrayEditor,P=$2();ve.exports={draw:N,drawOne:O,drawRaw:S};function N(D){var z=D._fullLayout;z._infolayer.selectAll(".annotation").remove();for(var H=0;H<z.annotations.length;H++)z.annotations[H].visible&&O(D,H);return h.previousPromises(D)}function O(D,z){var H=D._fullLayout,Y=H.annotations[z]||{},ht=x.getFromId(D,Y.xref),Se=x.getFromId(D,Y.yref);ht&&ht.setScale(),Se&&Se.setScale(),S(D,Y,z,!1,ht,Se)}function B(D,z,H,Y,ht){var Se=ht[H],ie=ht[H+"ref"],X=H.indexOf("y")!==-1,ft=x.getRefType(ie)==="domain",Le=X?Y.h:Y.w;return D?ft?Se+(X?-z:z)/D._length:D.p2r(D.r2p(Se)+z):Se+(X?-z:z)/Le}function S(D,z,H,Y,ht,Se){var ie=D._fullLayout,X=D._fullLayout._size,ft=D._context.edits,Le,nt;Y?(Le="annotation-"+Y,nt=Y+".annotations"):(Le="annotation",nt="annotations");var Ze=j(D.layout,nt,z),rt=Ze.modifyBase,dt=Ze.modifyItem,pt=Ze.getUpdateObj;ie._infolayer.selectAll("."+Le+'[data-index="'+H+'"]').remove();var se="clip"+ie._uid+"_ann"+H;if(!z._input||z.visible===!1){v.selectAll("#"+se).remove();return}var gt={x:{},y:{}},xt=+z.textangle||0,Nt=ie._infolayer.append("g").classed(Le,!0).attr("data-index",String(H)).style("opacity",z.opacity),Rt=Nt.append("g").classed("annotation-text-g",!0),Pt=ft[z.showarrow?"annotationTail":"annotationPosition"],xn=z.captureevents||ft.annotationText||Pt;function oa(Gt){var $t={index:H,annotation:z._input,fullAnnotation:z,event:Gt};return Y&&($t.subplotId=Y),$t}var jo=Rt.append("g").style("pointer-events",xn?"all":null).call(T,"pointer").on("click",function(){D._dragging=!1,D.emit("plotly_clickannotation",oa(v.event))});z.hovertext&&jo.on("mouseover",function(){var Gt=z.hoverlabel,$t=Gt.font,Ko=this.getBoundingClientRect(),Up=D.getBoundingClientRect();d.loneHover({x0:Ko.left-Up.left,x1:Ko.right-Up.left,y:(Ko.top+Ko.bottom)/2-Up.top,text:z.hovertext,color:Gt.bgcolor,borderColor:Gt.bordercolor,fontFamily:$t.family,fontSize:$t.size,fontColor:$t.color,fontWeight:$t.weight,fontStyle:$t.style,fontVariant:$t.variant,fontShadow:$t.fontShadow,fontLineposition:$t.fontLineposition,fontTextcase:$t.fontTextcase},{container:ie._hoverlayer.node(),outerContainer:ie._paper.node(),gd:D})}).on("mouseout",function(){d.loneUnhover(ie._hoverlayer.node())});var lt=z.borderwidth,ut=z.borderpad,$=lt+ut,yt=jo.append("rect").attr("class","bg").style("stroke-width",lt+"px").call(w.stroke,z.bordercolor).call(w.fill,z.bgcolor),Lt=z.width||z.height,ke=ie._topclips.selectAll("#"+se).data(Lt?[0]:[]);ke.enter().append("clipPath").classed("annclip",!0).attr("id",se).append("rect"),ke.exit().remove();var G=z.font,ne=ie._meta?_.templateString(z.text,ie._meta):z.text,et=jo.append("text").classed("annotation-text",!0).text(ne);function ct(Gt){return Gt.call(A.font,G).attr({"text-anchor":{left:"start",right:"end"}[z.align]||"middle"}),k.convertToTspans(Gt,D,kt),Gt}function kt(){var Gt=et.selectAll("a");if(Gt.size()===1&&Gt.text()===et.text()){var $t=jo.insert("a",":first-child").attr({"xlink:xlink:href":Gt.attr("xlink:href"),"xlink:xlink:show":Gt.attr("xlink:show")}).style({cursor:"pointer"});$t.node().appendChild(yt.node())}var Ko=jo.select(".annotation-text-math-group"),Up=!Ko.empty(),e0=A.bBox((Up?Ko:et).node()),E0=e0.width,m0=e0.height,f0=z.width||E0,la=z.height||m0,$o=Math.round(f0+2*$),jt=Math.round(la+2*$);function Fp(r1,Lm){return Lm==="auto"&&(r1<1/3?Lm="left":r1>2/3?Lm="right":Lm="center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[Lm]}for(var i0=!1,b0=["x","y"],O0=0;O0<b0.length;O0++){var C0=b0[O0],I0=z[C0+"ref"]||C0,V0=z["a"+C0+"ref"],H0={x:ht,y:Se}[C0],im=(xt+(C0==="x"?0:-90))*Math.PI/180,k0=$o*Math.cos(im),fm=jt*Math.sin(im),Tm=Math.abs(k0)+Math.abs(fm),om=z[C0+"anchor"],Rm=z[C0+"shift"]*(C0==="x"?1:-1),ci=gt[C0],Hp,St,Ht,Sr,Rp,Np=x.getRefType(I0);if(H0&&Np!=="domain"){var Jp=H0.r2fraction(z[C0]);(Jp<0||Jp>1)&&(V0===I0?(Jp=H0.r2fraction(z["a"+C0]),(Jp<0||Jp>1)&&(i0=!0)):i0=!0),Hp=H0._offset+H0.r2p(z[C0]),Sr=.5}else{var n0=Np==="domain";C0==="x"?(Ht=z[C0],Hp=n0?H0._offset+H0._length*Ht:Hp=X.l+X.w*Ht):(Ht=1-z[C0],Hp=n0?H0._offset+H0._length*Ht:Hp=X.t+X.h*Ht),Sr=z.showarrow?.5:Ht}if(z.showarrow){ci.head=Hp;var S0=z["a"+C0];if(Rp=k0*Fp(.5,z.xanchor)-fm*Fp(.5,z.yanchor),V0===I0){var _0=x.getRefType(V0);_0==="domain"?(C0==="y"&&(S0=1-S0),ci.tail=H0._offset+H0._length*S0):_0==="paper"?C0==="y"?(S0=1-S0,ci.tail=X.t+X.h*S0):ci.tail=X.l+X.w*S0:ci.tail=H0._offset+H0.r2p(S0),St=Rp}else ci.tail=Hp+S0,St=Rp+S0;ci.text=ci.tail+Rp;var w0=ie[C0==="x"?"width":"height"];if(I0==="paper"&&(ci.head=_.constrain(ci.head,1,w0-1)),V0==="pixel"){var X0=-Math.max(ci.tail-3,ci.text),$0=Math.min(ci.tail+3,ci.text)-w0;X0>0?(ci.tail+=X0,ci.text+=X0):$0>0&&(ci.tail-=$0,ci.text-=$0)}ci.tail+=Rm,ci.head+=Rm}else Rp=Tm*Fp(Sr,om),St=Rp,ci.text=Hp+Rp;ci.text+=Rm,Rp+=Rm,St+=Rm,z["_"+C0+"padplus"]=Tm/2+St,z["_"+C0+"padminus"]=Tm/2-St,z["_"+C0+"size"]=Tm,z["_"+C0+"shift"]=Rp}if(i0){jo.remove();return}var Z0=0,Am=0;if(z.align!=="left"&&(Z0=(f0-E0)*(z.align==="center"?.5:1)),z.valign!=="top"&&(Am=(la-m0)*(z.valign==="middle"?.5:1)),Up)Ko.select("svg").attr({x:$+Z0-1,y:$+Am}).call(A.setClipUrl,Lt?se:null,D);else{var e1=$+Am-e0.top,E1=$+Z0-e0.left;et.call(k.positionText,E1,e1).call(A.setClipUrl,Lt?se:null,D)}ke.select("rect").call(A.setRect,$,$,f0,la),yt.call(A.setRect,lt/2,lt/2,$o-lt,jt-lt),jo.call(A.setTranslate,Math.round(gt.x.text-$o/2),Math.round(gt.y.text-jt/2)),Rt.attr({transform:"rotate("+xt+","+gt.x.text+","+gt.y.text+")"});var N1=function(r1,Lm){Nt.selectAll(".annotation-arrow-g").remove();var T1=gt.x.head,O1=gt.y.head,y1=gt.x.tail+r1,l1=gt.y.tail+Lm,m1=gt.x.text+r1,t1=gt.y.text+Lm,Z1=_.rotationXYMatrix(xt,m1,t1),rg=_.apply2DTransform(Z1),k1=_.apply2DTransform2(Z1),ug=+yt.attr("width"),yg=+yt.attr("height"),Eg=m1-.5*ug,Ig=Eg+ug,Q1=t1-.5*yg,Rg=Q1+yg,cg=[[Eg,Q1,Eg,Rg],[Eg,Rg,Ig,Rg],[Ig,Rg,Ig,Q1],[Ig,Q1,Eg,Q1]].map(k1);if(!cg.reduce(function(D0,z0){return D0^!!_.segmentsIntersect(T1,O1,T1+1e6,O1+1e6,z0[0],z0[1],z0[2],z0[3])},!1)){cg.forEach(function(D0){var z0=_.segmentsIntersect(y1,l1,T1,O1,D0[0],D0[1],D0[2],D0[3]);z0&&(y1=z0.x,l1=z0.y)});var Vm=z.arrowwidth,Xg=z.arrowcolor,Ct=z.arrowside,Tt=Nt.append("g").style({opacity:w.opacity(Xg)}).classed("annotation-arrow-g",!0),jp=Tt.append("path").attr("d","M"+y1+","+l1+"L"+T1+","+O1).style("stroke-width",Vm+"px").call(w.stroke,w.rgb(Xg));if(P(jp,Ct,z),ft.annotationPosition&&jp.node().parentNode&&!Y){var Zp=T1,l0=O1;if(z.standoff){var Bp=Math.sqrt(Math.pow(T1-y1,2)+Math.pow(O1-l1,2));Zp+=z.standoff*(y1-T1)/Bp,l0+=z.standoff*(l1-O1)/Bp}var Gp=Tt.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(y1-Zp)+","+(l1-l0),transform:y(Zp,l0)}).style("stroke-width",Vm+6+"px").call(w.stroke,"rgba(0,0,0,0)").call(w.fill,"rgba(0,0,0,0)"),p0,a0;L.init({element:Gp.node(),gd:D,prepFn:function(){var D0=A.getTranslate(jo);p0=D0.x,a0=D0.y,ht&&ht.autorange&&rt(ht._name+".autorange",!0),Se&&Se.autorange&&rt(Se._name+".autorange",!0)},moveFn:function(D0,z0){var am=rg(p0,a0),Ym=am[0]+D0,Hm=am[1]+z0;jo.call(A.setTranslate,Ym,Hm),dt("x",B(ht,D0,"x",X,z)),dt("y",B(Se,z0,"y",X,z)),z.axref===z.xref&&dt("ax",B(ht,D0,"ax",X,z)),z.ayref===z.yref&&dt("ay",B(Se,z0,"ay",X,z)),Tt.attr("transform",y(D0,z0)),Rt.attr({transform:"rotate("+xt+","+Ym+","+Hm+")"})},doneFn:function(){c.call("_guiRelayout",D,pt());var D0=document.querySelector(".js-notes-box-panel");D0&&D0.redraw(D0.selectedObj)}})}}};if(z.showarrow&&N1(0,0),Pt){var z1;L.init({element:jo.node(),gd:D,prepFn:function(){z1=Rt.attr("transform")},moveFn:function(r1,Lm){var T1="pointer";if(z.showarrow)z.axref===z.xref?dt("ax",B(ht,r1,"ax",X,z)):dt("ax",z.ax+r1),z.ayref===z.yref?dt("ay",B(Se,Lm,"ay",X.w,z)):dt("ay",z.ay+Lm),N1(r1,Lm);else{if(Y)return;var O1,y1;if(ht)O1=B(ht,r1,"x",X,z);else{var l1=z._xsize/X.w,m1=z.x+(z._xshift-z.xshift)/X.w-l1/2;O1=L.align(m1+r1/X.w,l1,0,1,z.xanchor)}if(Se)y1=B(Se,Lm,"y",X,z);else{var t1=z._ysize/X.h,Z1=z.y-(z._yshift+z.yshift)/X.h-t1/2;y1=L.align(Z1-Lm/X.h,t1,0,1,z.yanchor)}dt("x",O1),dt("y",y1),(!ht||!Se)&&(T1=L.getCursor(ht?.5:O1,Se?.5:y1,z.xanchor,z.yanchor))}Rt.attr({transform:y(r1,Lm)+z1}),T(jo,T1)},clickFn:function(r1,Lm){z.captureevents&&D.emit("plotly_clickannotation",oa(Lm))},doneFn:function(){T(jo),c.call("_guiRelayout",D,pt());var r1=document.querySelector(".js-notes-box-panel");r1&&r1.redraw(r1.selectedObj)}})}}ft.annotationText?et.call(k.makeEditable,{delegate:jo,gd:D}).call(ct).on("edit",function(Gt){z.text=Gt,this.call(ct),dt("text",Gt),ht&&ht.autorange&&rt(ht._name+".autorange",!0),Se&&Se.autorange&&rt(Se._name+".autorange",!0),c.call("_guiRelayout",D,pt())}):et.call(ct)}}),ox=t((Ue,ve)=>{var v=Re(),c=p1(),h=Nm().arrayEditor;ve.exports={hasClickToShow:_,onClick:y};function _(A,d){var k=x(A,d);return k.on.length>0||k.explicitOff.length>0}function y(A,d){var k=x(A,d),T=k.on,L=k.off.concat(k.explicitOff),j={},P=A._fullLayout.annotations,N,O;if(T.length||L.length){for(N=0;N<T.length;N++)O=h(A.layout,"annotations",P[T[N]]),O.modifyItem("visible",!0),v.extendFlat(j,O.getUpdateObj());for(N=0;N<L.length;N++)O=h(A.layout,"annotations",P[L[N]]),O.modifyItem("visible",!1),v.extendFlat(j,O.getUpdateObj());return c.call("update",A,{},j)}}function x(A,d){var k=A._fullLayout.annotations,T=[],L=[],j=[],P=(d||[]).length,N,O,B,S,D,z,H,Y;for(N=0;N<k.length;N++)if(B=k[N],S=B.clicktoshow,S){for(O=0;O<P;O++)if(D=d[O],z=D.xaxis,H=D.yaxis,z._id===B.xref&&H._id===B.yref&&z.d2r(D.x)===w(B._xclick,z)&&H.d2r(D.y)===w(B._yclick,H)){B.visible?S==="onout"?Y=L:Y=j:Y=T,Y.push(N);break}O===P&&B.visible&&S==="onout"&&L.push(N)}return{on:T,off:L,explicitOff:j}}function w(A,d){return d.type==="log"?d.l2r(A):d.d2r(A)}}),Ex=t((Ue,ve)=>{var v=Re(),c=sa();ve.exports=function(h,_,y,x){x("opacity");var w=x("bgcolor"),A=x("bordercolor"),d=c.opacity(A);x("borderpad");var k=x("borderwidth"),T=x("showarrow");x("text",T?" ":y._dfltTitle.annotation),x("textangle"),v.coerceFont(x,"font",y.font),x("width"),x("align");var L=x("height");if(L&&x("valign"),T){var j=x("arrowside"),P,N;j.indexOf("end")!==-1&&(P=x("arrowhead"),N=x("arrowsize")),j.indexOf("start")!==-1&&(x("startarrowhead",P),x("startarrowsize",N)),x("arrowcolor",d?_.bordercolor:c.defaultLine),x("arrowwidth",(d&&k||1)*2),x("standoff"),x("startstandoff")}var O=x("hovertext"),B=y.hoverlabel||{};if(O){var S=x("hoverlabel.bgcolor",B.bgcolor||(c.opacity(w)?c.rgb(w):c.defaultLine)),D=x("hoverlabel.bordercolor",B.bordercolor||c.contrast(S)),z=v.extendFlat({},B.font);z.color||(z.color=D),v.coerceFont(x,"hoverlabel.font",z)}x("captureevents",!!O)}}),mx=t((Ue,ve)=>{var v=Re(),c=km(),h=Mt(),_=Ex(),y=nx();ve.exports=function(w,A){h(w,A,{name:"annotations",handleItemDefaults:x})};function x(w,A,d){function k(X,ft){return v.coerce(w,A,y,X,ft)}var T=k("visible"),L=k("clicktoshow");if(T||L){_(w,A,d,k);for(var j=A.showarrow,P=["x","y"],N=[-10,-30],O={_fullLayout:d},B=0;B<2;B++){var S=P[B],D=c.coerceRef(w,A,O,S,"","paper");if(D!=="paper"){var z=c.getFromId(O,D);z._annIndices.push(A._index)}if(c.coercePosition(A,O,k,D,S,.5),j){var H="a"+S,Y=c.coerceRef(w,A,O,H,"pixel",["pixel","paper"]);Y!=="pixel"&&Y!==D&&(Y=A[H]="pixel");var ht=Y==="pixel"?N[B]:.4;c.coercePosition(A,O,k,Y,H,ht)}k(S+"anchor"),k(S+"shift")}if(v.noneOrAll(w,A,["x","y"]),j&&v.noneOrAll(w,A,["ax","ay"]),L){var Se=k("xclick"),ie=k("yclick");A._xclick=Se===void 0?A.x:c.cleanPosition(Se,O,A.xref),A._yclick=ie===void 0?A.y:c.cleanPosition(ie,O,A.yref)}}}}),gx=t((Ue,ve)=>{var v=Re(),c=km(),h=Wy().draw;ve.exports=function(x){var w=x._fullLayout,A=v.filterVisible(w.annotations);if(A.length&&x._fullData.length)return v.syncOrAsync([h,_],x)};function _(x){var w=x._fullLayout;v.filterVisible(w.annotations).forEach(function(A){var d=c.getFromId(x,A.xref),k=c.getFromId(x,A.yref),T=c.getRefType(A.xref),L=c.getRefType(A.yref);A._extremes={},T==="range"&&y(A,d),L==="range"&&y(A,k)})}function y(x,w){var A=w._id,d=A.charAt(0),k=x[d],T=x["a"+d],L=x[d+"ref"],j=x["a"+d+"ref"],P=x["_"+d+"padplus"],N=x["_"+d+"padminus"],O={x:1,y:-1}[d]*x[d+"shift"],B=3*x.arrowsize*x.arrowwidth||0,S=B+O,D=B-O,z=3*x.startarrowsize*x.arrowwidth||0,H=z+O,Y=z-O,ht;if(j===L){var Se=c.findExtremes(w,[w.r2c(k)],{ppadplus:S,ppadminus:D}),ie=c.findExtremes(w,[w.r2c(T)],{ppadplus:Math.max(P,H),ppadminus:Math.max(N,Y)});ht={min:[Se.min[0],ie.min[0]],max:[Se.max[0],ie.max[0]]}}else H=T?H+T:H,Y=T?Y-T:Y,ht=c.findExtremes(w,[w.r2c(k)],{ppadplus:Math.max(P,S,H),ppadminus:Math.max(N,D,Y)});x._extremes[A]=ht}}),Ax=t((Ue,ve)=>{var v=E(),c=vt();ve.exports=function(h,_,y,x){_=_||{};var w=y==="log"&&_.type==="linear",A=y==="linear"&&_.type==="log";if(!(w||A))return;var d=h._fullLayout.annotations,k=_._id.charAt(0),T,L;function j(N){var O=T[N],B=null;w?B=c(O,_.range):B=Math.pow(10,O),v(B)||(B=null),x(L+N,B)}for(var P=0;P<d.length;P++)T=d[P],L="annotations["+P+"].",T[k+"ref"]===_._id&&j(k),T["a"+k+"ref"]===_._id&&j("a"+k)}}),Y3=t((Ue,ve)=>{var v=Wy(),c=ox();ve.exports={moduleType:"component",name:"annotations",layoutAttributes:nx(),supplyLayoutDefaults:mx(),includeBasePlot:D_()("annotations"),calcAutorange:gx(),draw:v.draw,drawOne:v.drawOne,drawRaw:v.drawRaw,hasClickToShow:c.hasClickToShow,onClick:c.onClick,convertCoords:Ax()}}),Z2=t((Ue,ve)=>{var v=nx(),c=Um().overrideAll,h=Nm().templatedArray;ve.exports=c(h("annotation",{visible:v.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:v.xanchor,xshift:v.xshift,yanchor:v.yanchor,yshift:v.yshift,text:v.text,textangle:v.textangle,font:v.font,width:v.width,height:v.height,opacity:v.opacity,align:v.align,valign:v.valign,bgcolor:v.bgcolor,bordercolor:v.bordercolor,borderpad:v.borderpad,borderwidth:v.borderwidth,showarrow:v.showarrow,arrowcolor:v.arrowcolor,arrowhead:v.arrowhead,startarrowhead:v.startarrowhead,arrowside:v.arrowside,arrowsize:v.arrowsize,startarrowsize:v.startarrowsize,arrowwidth:v.arrowwidth,standoff:v.standoff,startstandoff:v.startstandoff,hovertext:v.hovertext,hoverlabel:v.hoverlabel,captureevents:v.captureevents}),"calc","from-root")}),zb=t((Ue,ve)=>{var v=Re(),c=km(),h=Mt(),_=Ex(),y=Z2();ve.exports=function(w,A,d){h(w,A,{name:"annotations",handleItemDefaults:x,fullLayout:d.fullLayout})};function x(w,A,d,k){function T(P,N){return v.coerce(w,A,y,P,N)}function L(P){var N=P+"axis",O={_fullLayout:{}};return O._fullLayout[N]=d[N],c.coercePosition(A,O,T,P,P,.5)}var j=T("visible");j&&(_(w,A,k.fullLayout,T),L("x"),L("y"),L("z"),v.noneOrAll(w,A,["x","y","z"]),A.xref="x",A.yref="y",A.zref="z",T("xanchor"),T("yanchor"),T("xshift"),T("yshift"),A.showarrow&&(A.axref="pixel",A.ayref="pixel",T("ax",-10),T("ay",-30),v.noneOrAll(w,A,["ax","ay"])))}}),$3=t((Ue,ve)=>{var v=Re(),c=km();ve.exports=function(_){for(var y=_.fullSceneLayout,x=y.annotations,w=0;w<x.length;w++)h(x[w],_);_.fullLayout._infolayer.selectAll(".annotation-"+_.id).remove()};function h(_,y){var x=y.fullSceneLayout,w=x.domain,A=y.fullLayout._size,d={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};_._xa={},v.extendFlat(_._xa,d),c.setConvert(_._xa),_._xa._offset=A.l+w.x[0]*A.w,_._xa.l2p=function(){return .5*(1+_._pdata[0]/_._pdata[3])*A.w*(w.x[1]-w.x[0])},_._ya={},v.extendFlat(_._ya,d),c.setConvert(_._ya),_._ya._offset=A.t+(1-w.y[1])*A.h,_._ya.l2p=function(){return .5*(1-_._pdata[1]/_._pdata[3])*A.h*(w.y[1]-w.y[0])}}}),Iy=t((Ue,ve)=>{function v(h,_){var y=[0,0,0,0],x,w;for(x=0;x<4;++x)for(w=0;w<4;++w)y[w]+=h[4*x+w]*_[x];return y}function c(h,_){var y=v(h.projection,v(h.view,v(h.model,[_[0],_[1],_[2],1])));return y}ve.exports=c}),sy=t((Ue,ve)=>{var v=Wy().drawRaw,c=Iy(),h=["x","y","z"];ve.exports=function(_){for(var y=_.fullSceneLayout,x=_.dataScale,w=y.annotations,A=0;A<w.length;A++){for(var d=w[A],k=!1,T=0;T<3;T++){var L=h[T],j=d[L],P=y[L+"axis"],N=P.r2fraction(j);if(N<0||N>1){k=!0;break}}k?_.fullLayout._infolayer.select(".annotation-"+_.id+'[data-index="'+A+'"]').remove():(d._pdata=c(_.glplot.cameraParams,[y.xaxis.r2l(d.x)*x[0],y.yaxis.r2l(d.y)*x[1],y.zaxis.r2l(d.z)*x[2]]),v(_.graphDiv,d,A,_.id,d._xa,d._ya))}}}),Av=t((Ue,ve)=>{var v=p1(),c=Re();ve.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:Z2()}}},layoutAttributes:Z2(),handleDefaults:zb(),includeBasePlot:h,convert:$3(),draw:sy()};function h(_,y){var x=v.subplotsRegistry.gl3d;if(x)for(var w=x.attrRegex,A=Object.keys(_),d=0;d<A.length;d++){var k=A[d];w.test(k)&&(_[k].annotations||[]).length&&(c.pushUnique(y._basePlotModules,x),c.pushUnique(y._subplots.gl3d,k))}}}),Cx=t((Ue,ve)=>{var v=nx(),c=Ut(),h=e2().line,_=h1().dash,y=bt().extendFlat,x=Nm().templatedArray;rx();var w=Mn(),A=um().shapeTexttemplateAttrs,d=M1();ve.exports=x("shape",{visible:y({},w.visible,{editType:"calc+arraydraw"}),showlegend:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},legend:y({},w.legend,{editType:"calc+arraydraw"}),legendgroup:y({},w.legendgroup,{editType:"calc+arraydraw"}),legendgrouptitle:{text:y({},w.legendgrouptitle.text,{editType:"calc+arraydraw"}),font:c({editType:"calc+arraydraw"}),editType:"calc+arraydraw"},legendrank:y({},w.legendrank,{editType:"calc+arraydraw"}),legendwidth:y({},w.legendwidth,{editType:"calc+arraydraw"}),type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above","between"],dflt:"above",editType:"arraydraw"},xref:y({},v.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},x0shift:{valType:"number",dflt:0,min:-1,max:1,editType:"calc"},x1shift:{valType:"number",dflt:0,min:-1,max:1,editType:"calc"},yref:y({},v.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},y0shift:{valType:"number",dflt:0,min:-1,max:1,editType:"calc"},y1shift:{valType:"number",dflt:0,min:-1,max:1,editType:"calc"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:y({},h.color,{editType:"arraydraw"}),width:y({},h.width,{editType:"calc+arraydraw"}),dash:y({},_,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},label:{text:{valType:"string",dflt:"",editType:"arraydraw"},texttemplate:A({},{keys:Object.keys(d)}),font:c({editType:"calc+arraydraw",colorEditType:"arraydraw"}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"],editType:"arraydraw"},textangle:{valType:"angle",dflt:"auto",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],editType:"calc+arraydraw"},padding:{valType:"number",dflt:3,min:0,editType:"arraydraw"},editType:"arraydraw"},editType:"arraydraw"})}),sx=t((Ue,ve)=>{var v=Re(),c=km(),h=Mt(),_=Cx(),y=we();ve.exports=function(A,d){h(A,d,{name:"shapes",handleItemDefaults:w})};function x(A,d){return A?"bottom":d.indexOf("top")!==-1?"top":d.indexOf("bottom")!==-1?"bottom":"middle"}function w(A,d,k){function T(lt,ut){return v.coerce(A,d,_,lt,ut)}d._isShape=!0;var L=T("visible");if(L){var j=T("showlegend");j&&(T("legend"),T("legendwidth"),T("legendgroup"),T("legendgrouptitle.text"),v.coerceFont(T,"legendgrouptitle.font"),T("legendrank"));var P=T("path"),N=P?"path":"rect",O=T("type",N),B=O!=="path";B&&delete d.path,T("editable"),T("layer"),T("opacity"),T("fillcolor"),T("fillrule");var S=T("line.width");S&&(T("line.color"),T("line.dash"));for(var D=T("xsizemode"),z=T("ysizemode"),H=["x","y"],Y=0;Y<2;Y++){var ht=H[Y],Se=ht+"anchor",ie=ht==="x"?D:z,X={_fullLayout:k},ft,Le,nt,Ze=c.coerceRef(A,d,X,ht,void 0,"paper"),rt=c.getRefType(Ze);if(rt==="range"?(ft=c.getFromId(X,Ze),ft._shapeIndices.push(d._index),nt=y.rangeToShapePosition(ft),Le=y.shapePositionToRange(ft),(ft.type==="category"||ft.type==="multicategory")&&(T(ht+"0shift"),T(ht+"1shift"))):Le=nt=v.identity,B){var dt=.25,pt=.75,se=ht+"0",gt=ht+"1",xt=A[se],Nt=A[gt];A[se]=Le(A[se],!0),A[gt]=Le(A[gt],!0),ie==="pixel"?(T(se,0),T(gt,10)):(c.coercePosition(d,X,T,Ze,se,dt),c.coercePosition(d,X,T,Ze,gt,pt)),d[se]=nt(d[se]),d[gt]=nt(d[gt]),A[se]=xt,A[gt]=Nt}if(ie==="pixel"){var Rt=A[Se];A[Se]=Le(A[Se],!0),c.coercePosition(d,X,T,Ze,Se,.25),d[Se]=nt(d[Se]),A[Se]=Rt}}B&&v.noneOrAll(A,d,["x0","x1","y0","y1"]);var Pt=O==="line",xn,oa;if(B&&(xn=T("label.texttemplate")),xn||(oa=T("label.text")),oa||xn){T("label.textangle");var jo=T("label.textposition",Pt?"middle":"middle center");T("label.xanchor"),T("label.yanchor",x(Pt,jo)),T("label.padding"),v.coerceFont(T,"label.font",k.font)}}}}),Pb=t((Ue,ve)=>{var v=sa(),c=Re();function h(_,y){return _?"bottom":y.indexOf("top")!==-1?"top":y.indexOf("bottom")!==-1?"bottom":"middle"}ve.exports=function(_,y,x){x("newshape.visible"),x("newshape.name"),x("newshape.showlegend"),x("newshape.legend"),x("newshape.legendwidth"),x("newshape.legendgroup"),x("newshape.legendgrouptitle.text"),c.coerceFont(x,"newshape.legendgrouptitle.font"),x("newshape.legendrank"),x("newshape.drawdirection"),x("newshape.layer"),x("newshape.fillcolor"),x("newshape.fillrule"),x("newshape.opacity");var w=x("newshape.line.width");if(w){var A=(_||{}).plot_bgcolor||"#FFF";x("newshape.line.color",v.contrast(A)),x("newshape.line.dash")}var d=_.dragmode==="drawline",k=x("newshape.label.text"),T=x("newshape.label.texttemplate");if(k||T){x("newshape.label.textangle");var L=x("newshape.label.textposition",d?"middle":"middle center");x("newshape.label.xanchor"),x("newshape.label.yanchor",h(d,L)),x("newshape.label.padding"),c.coerceFont(x,"newshape.label.font",y.font)}x("activeshape.fillcolor"),x("activeshape.opacity")}}),Ux=t((Ue,ve)=>{var v=Re(),c=km(),h=Jv(),_=we();ve.exports=function(d){var k=d._fullLayout,T=v.filterVisible(k.shapes);if(!(!T.length||!d._fullData.length))for(var L=0;L<T.length;L++){var j=T[L];j._extremes={};var P,N,O=c.getRefType(j.xref),B=c.getRefType(j.yref);j.xref!=="paper"&&O!=="domain"&&(P=c.getFromId(d,j.xref),N=A(P,j,h.paramIsX),N&&(j._extremes[P._id]=c.findExtremes(P,N,y(j)))),j.yref!=="paper"&&B!=="domain"&&(P=c.getFromId(d,j.yref),N=A(P,j,h.paramIsY),N&&(j._extremes[P._id]=c.findExtremes(P,N,x(j))))}};function y(d){return w(d.line.width,d.xsizemode,d.x0,d.x1,d.path,!1)}function x(d){return w(d.line.width,d.ysizemode,d.y0,d.y1,d.path,!0)}function w(d,k,T,L,j,P){var N=d/2,O=P;if(k==="pixel"){var B=j?_.extractPathCoords(j,P?h.paramIsY:h.paramIsX):[T,L],S=v.aggNums(Math.max,null,B),D=v.aggNums(Math.min,null,B),z=D<0?Math.abs(D)+N:N,H=S>0?S+N:N;return{ppad:N,ppadplus:O?z:H,ppadminus:O?H:z}}else return{ppad:N}}function A(d,k,T){var L=d._id.charAt(0)==="x"?"x":"y",j=d.type==="category"||d.type==="multicategory",P,N,O=0,B=0,S=j?d.r2c:d.d2c,D=k[L+"sizemode"]==="scaled";if(D?(P=k[L+"0"],N=k[L+"1"],j&&(O=k[L+"0shift"],B=k[L+"1shift"])):(P=k[L+"anchor"],N=k[L+"anchor"]),P!==void 0)return[S(P)+O,S(N)+B];if(k.path){var z=1/0,H=-1/0,Y=k.path.match(h.segmentRE),ht,Se,ie,X,ft;for(d.type==="date"&&(S=_.decodeDate(S)),ht=0;ht<Y.length;ht++)Se=Y[ht],ie=T[Se.charAt(0)].drawn,ie!==void 0&&(X=Y[ht].substr(1).match(h.paramRE),!(!X||X.length<ie)&&(ft=S(X[ie]),ft<z&&(z=ft),ft>H&&(H=ft)));if(H>=z)return[z,H]}}}),Z3=t((Ue,ve)=>{var v=W0();ve.exports={moduleType:"component",name:"shapes",layoutAttributes:Cx(),supplyLayoutDefaults:sx(),supplyDrawNewShapeDefaults:Pb(),includeBasePlot:D_()("shapes"),calcAutorange:Ux(),draw:v.draw,drawOne:v.drawOne}}),Ib=t((Ue,ve)=>{var v=jm(),c=Nm().templatedArray;rx(),ve.exports=c("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",v.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",v.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})}),_2=t((Ue,ve)=>{var v=Re(),c=km(),h=Mt(),_=Ib(),y="images";ve.exports=function(w,A){var d={name:y,handleItemDefaults:x};h(w,A,d)};function x(w,A,d){function k(D,z){return v.coerce(w,A,_,D,z)}var T=k("source"),L=k("visible",!!T);if(!L)return A;k("layer"),k("xanchor"),k("yanchor"),k("sizex"),k("sizey"),k("sizing"),k("opacity");for(var j={_fullLayout:d},P=["x","y"],N=0;N<2;N++){var O=P[N],B=c.coerceRef(w,A,j,O,"paper",void 0);if(B!=="paper"){var S=c.getFromId(j,B);S._imgIndices.push(A._index)}c.coercePosition(A,j,k,B,O,0)}return A}}),s2=t((Ue,ve)=>{var v=l(),c=Y0(),h=km(),_=A1(),y=Mg();ve.exports=function(x){var w=x._fullLayout,A=[],d={},k=[],T,L;for(L=0;L<w.images.length;L++){var j=w.images[L];if(j.visible)if(j.layer==="below"&&j.xref!=="paper"&&j.yref!=="paper"){T=_.ref2id(j.xref)+_.ref2id(j.yref);var P=w._plots[T];if(!P){k.push(j);continue}P.mainplot&&(T=P.mainplot.id),d[T]||(d[T]=[]),d[T].push(j)}else j.layer==="above"?A.push(j):k.push(j)}var N={x:{left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-1/2},right:{sizing:"xMax",offset:-1}},y:{top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-1/2},bottom:{sizing:"YMax",offset:-1}}};function O(ie){var X=v.select(this);if(this._imgSrc!==ie.source)if(X.attr("xmlns",y.svg),!x._context.staticPlot||ie.source&&ie.source.slice(0,5)==="data:")X.attr("xlink:href",ie.source),this._imgSrc=ie.source;else{var ft=new Promise((function(Le){var nt=new Image;this.img=nt,nt.setAttribute("crossOrigin","anonymous"),nt.onerror=Ze,nt.onload=function(){var rt=document.createElement("canvas");rt.width=this.width,rt.height=this.height;var dt=rt.getContext("2d",{willReadFrequently:!0});dt.drawImage(this,0,0);var pt=rt.toDataURL("image/png");X.attr("xlink:href",pt),Le()},X.on("error",Ze),nt.src=ie.source,this._imgSrc=ie.source;function Ze(){X.remove(),Le()}}).bind(this));x._promises.push(ft)}}function B(ie){var X=v.select(this),ft=h.getFromId(x,ie.xref),Le=h.getFromId(x,ie.yref),nt=h.getRefType(ie.xref)==="domain",Ze=h.getRefType(ie.yref)==="domain",rt=w._size,dt,pt;ft!==void 0?dt=typeof ie.xref=="string"&&nt?ft._length*ie.sizex:Math.abs(ft.l2p(ie.sizex)-ft.l2p(0)):dt=ie.sizex*rt.w,Le!==void 0?pt=typeof ie.yref=="string"&&Ze?Le._length*ie.sizey:Math.abs(Le.l2p(ie.sizey)-Le.l2p(0)):pt=ie.sizey*rt.h;var se=dt*N.x[ie.xanchor].offset,gt=pt*N.y[ie.yanchor].offset,xt=N.x[ie.xanchor].sizing+N.y[ie.yanchor].sizing,Nt,Rt;switch(ft!==void 0?Nt=typeof ie.xref=="string"&&nt?ft._length*ie.x+ft._offset:ft.r2p(ie.x)+ft._offset:Nt=ie.x*rt.w+rt.l,Nt+=se,Le!==void 0?Rt=typeof ie.yref=="string"&&Ze?Le._length*(1-ie.y)+Le._offset:Le.r2p(ie.y)+Le._offset:Rt=rt.h-ie.y*rt.h+rt.t,Rt+=gt,ie.sizing){case"fill":xt+=" slice";break;case"stretch":xt="none";break}X.attr({x:Nt,y:Rt,width:dt,height:pt,preserveAspectRatio:xt,opacity:ie.opacity});var Pt=ft&&h.getRefType(ie.xref)!=="domain"?ft._id:"",xn=Le&&h.getRefType(ie.yref)!=="domain"?Le._id:"",oa=Pt+xn;c.setClipUrl(X,oa?"clip"+w._uid+oa:null,x)}function S(ie){return[ie.xref,ie.x,ie.sizex,ie.yref,ie.y,ie.sizey].join("_")}function D(ie,X){return ie._index-X._index}var z=w._imageLowerLayer.selectAll("image").data(k,S),H=w._imageUpperLayer.selectAll("image").data(A,S);z.enter().append("image"),H.enter().append("image"),z.exit().remove(),H.exit().remove(),z.each(function(ie){O.bind(this)(ie),B.bind(this)(ie)}),H.each(function(ie){O.bind(this)(ie),B.bind(this)(ie)}),z.sort(D),H.sort(D);var Y=Object.keys(w._plots);for(L=0;L<Y.length;L++){T=Y[L];var ht=w._plots[T];if(ht.imagelayer){var Se=ht.imagelayer.selectAll("image").data(d[T]||[],S);Se.enter().append("image"),Se.exit().remove(),Se.each(function(ie){O.bind(this)(ie),B.bind(this)(ie)}),Se.sort(D)}}}}),Ub=t((Ue,ve)=>{var v=E(),c=vt();ve.exports=function(h,_,y,x){_=_||{};var w=y==="log"&&_.type==="linear",A=y==="linear"&&_.type==="log";if(w||A){for(var d=h._fullLayout.images,k=_._id.charAt(0),T,L,j=0;j<d.length;j++)if(T=d[j],L="images["+j+"].",T[k+"ref"]===_._id){var P=T[k],N=T["size"+k],O=null,B=null;if(w){O=c(P,_.range);var S=N/Math.pow(10,O)/2;B=2*Math.log(S+Math.sqrt(1+S*S))/Math.LN10}else O=Math.pow(10,P),B=O*(Math.pow(10,N/2)-Math.pow(10,-N/2));v(O)?v(B)||(B=null):(O=null,B=null),x(L+k,O),x(L+"size"+k,B)}}}}),J2=t((Ue,ve)=>{ve.exports={moduleType:"component",name:"images",layoutAttributes:Ib(),supplyLayoutDefaults:_2(),includeBasePlot:D_()("images"),draw:s2(),convertCoords:Ub()}}),K2=t((Ue,ve)=>{ve.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"◄",right:"►",up:"▲",down:"▼"}}}),Fx=t((Ue,ve)=>{var v=Ut(),c=zp(),h=bt().extendFlat,_=Um().overrideAll,y=n1(),x=Nm().templatedArray,w=x("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});ve.exports=_(x("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:w,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:h(y({editType:"arraydraw"}),{}),font:v({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:c.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")}),Rx=t((Ue,ve)=>{var v=Re(),c=Mt(),h=Fx(),_=K2(),y=_.name,x=h.buttons;ve.exports=function(d,k){var T={name:y,handleItemDefaults:w};c(d,k,T)};function w(d,k,T){function L(N,O){return v.coerce(d,k,h,N,O)}var j=c(d,k,{name:"buttons",handleItemDefaults:A}),P=L("visible",j.length>0);P&&(L("active"),L("direction"),L("type"),L("showactive"),L("x"),L("y"),v.noneOrAll(d,k,["x","y"]),L("xanchor"),L("yanchor"),L("pad.t"),L("pad.r"),L("pad.b"),L("pad.l"),v.coerceFont(L,"font",T.font),L("bgcolor",T.paper_bgcolor),L("bordercolor"),L("borderwidth"))}function A(d,k){function T(j,P){return v.coerce(d,k,x,j,P)}var L=T("visible",d.method==="skip"||Array.isArray(d.args));L&&(T("method"),T("args"),T("args2"),T("label"),T("execute"))}}),Bx=t((Ue,ve)=>{ve.exports=y;var v=l(),c=sa(),h=Y0(),_=Re();function y(x,w,A){this.gd=x,this.container=w,this.id=A,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}y.barWidth=2,y.barLength=20,y.barRadius=2,y.barPad=1,y.barColor="#808BA4",y.prototype.enable=function(x,w,A){var d=this.gd._fullLayout,k=d.width,T=d.height;this.position=x;var L=this.position.l,j=this.position.w,P=this.position.t,N=this.position.h,O=this.position.direction,B=O==="down",S=O==="left",D=O==="right",z=O==="up",H=j,Y=N,ht,Se,ie,X;!B&&!S&&!D&&!z&&(this.position.direction="down",B=!0);var ft=B||z;ft?(ht=L,Se=ht+H,B?(ie=P,X=Math.min(ie+Y,T),Y=X-ie):(X=P+Y,ie=Math.max(X-Y,0),Y=X-ie)):(ie=P,X=ie+Y,S?(Se=L+H,ht=Math.max(Se-H,0),H=Se-ht):(ht=L,Se=Math.min(ht+H,k),H=Se-ht)),this._box={l:ht,t:ie,w:H,h:Y};var Le=j>H,nt=y.barLength+2*y.barPad,Ze=y.barWidth+2*y.barPad,rt=L,dt=P+N;dt+Ze>T&&(dt=T-Ze);var pt=this.container.selectAll("rect.scrollbar-horizontal").data(Le?[0]:[]);pt.exit().on(".drag",null).remove(),pt.enter().append("rect").classed("scrollbar-horizontal",!0).call(c.fill,y.barColor),Le?(this.hbar=pt.attr({rx:y.barRadius,ry:y.barRadius,x:rt,y:dt,width:nt,height:Ze}),this._hbarXMin=rt+nt/2,this._hbarTranslateMax=H-nt):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var se=N>Y,gt=y.barWidth+2*y.barPad,xt=y.barLength+2*y.barPad,Nt=L+j,Rt=P;Nt+gt>k&&(Nt=k-gt);var Pt=this.container.selectAll("rect.scrollbar-vertical").data(se?[0]:[]);Pt.exit().on(".drag",null).remove(),Pt.enter().append("rect").classed("scrollbar-vertical",!0).call(c.fill,y.barColor),se?(this.vbar=Pt.attr({rx:y.barRadius,ry:y.barRadius,x:Nt,y:Rt,width:gt,height:xt}),this._vbarYMin=Rt+xt/2,this._vbarTranslateMax=Y-xt):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var xn=this.id,oa=ht-.5,jo=se?Se+gt+.5:Se+.5,lt=ie-.5,ut=Le?X+Ze+.5:X+.5,$=d._topdefs.selectAll("#"+xn).data(Le||se?[0]:[]);if($.exit().remove(),$.enter().append("clipPath").attr("id",xn).append("rect"),Le||se?(this._clipRect=$.select("rect").attr({x:Math.floor(oa),y:Math.floor(lt),width:Math.ceil(jo)-Math.floor(oa),height:Math.ceil(ut)-Math.floor(lt)}),this.container.call(h.setClipUrl,xn,this.gd),this.bg.attr({x:L,y:P,width:j,height:N})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(h.setClipUrl,null),delete this._clipRect),Le||se){var yt=v.behavior.drag().on("dragstart",function(){v.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(yt);var Lt=v.behavior.drag().on("dragstart",function(){v.event.sourceEvent.preventDefault(),v.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));Le&&this.hbar.on(".drag",null).call(Lt),se&&this.vbar.on(".drag",null).call(Lt)}this.setTranslate(w,A)},y.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(h.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},y.prototype._onBoxDrag=function(){var x=this.translateX,w=this.translateY;this.hbar&&(x-=v.event.dx),this.vbar&&(w-=v.event.dy),this.setTranslate(x,w)},y.prototype._onBoxWheel=function(){var x=this.translateX,w=this.translateY;this.hbar&&(x+=v.event.deltaY),this.vbar&&(w+=v.event.deltaY),this.setTranslate(x,w)},y.prototype._onBarDrag=function(){var x=this.translateX,w=this.translateY;if(this.hbar){var A=x+this._hbarXMin,d=A+this._hbarTranslateMax,k=_.constrain(v.event.x,A,d),T=(k-A)/(d-A),L=this.position.w-this._box.w;x=T*L}if(this.vbar){var j=w+this._vbarYMin,P=j+this._vbarTranslateMax,N=_.constrain(v.event.y,j,P),O=(N-j)/(P-j),B=this.position.h-this._box.h;w=O*B}this.setTranslate(x,w)},y.prototype.setTranslate=function(x,w){var A=this.position.w-this._box.w,d=this.position.h-this._box.h;if(x=_.constrain(x||0,0,A),w=_.constrain(w||0,0,d),this.translateX=x,this.translateY=w,this.container.call(h.setTranslate,this._box.l-this.position.l-x,this._box.t-this.position.t-w),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+x-.5),y:Math.floor(this.position.t+w-.5)}),this.hbar){var k=x/A;this.hbar.call(h.setTranslate,x+k*this._hbarTranslateMax,w)}if(this.vbar){var T=w/d;this.vbar.call(h.setTranslate,x,w+T*this._vbarTranslateMax)}}}),Dx=t((Ue,ve)=>{var v=l(),c=lg(),h=sa(),_=Y0(),y=Re(),x=j1(),w=Nm().arrayEditor,A=$1().LINE_SPACING,d=K2(),k=Bx();ve.exports=function(nt){var Ze=nt._fullLayout,rt=y.filterVisible(Ze[d.name]);function dt(xn){c.autoMargin(nt,X(xn))}var pt=Ze._menulayer.selectAll("g."+d.containerClassName).data(rt.length>0?[0]:[]);if(pt.enter().append("g").classed(d.containerClassName,!0).style("cursor","pointer"),pt.exit().each(function(){v.select(this).selectAll("g."+d.headerGroupClassName).each(dt)}).remove(),rt.length!==0){var se=pt.selectAll("g."+d.headerGroupClassName).data(rt,T);se.enter().append("g").classed(d.headerGroupClassName,!0);for(var gt=y.ensureSingle(pt,"g",d.dropdownButtonGroupClassName,function(xn){xn.style("pointer-events","all")}),xt=0;xt<rt.length;xt++){var Nt=rt[xt];ie(nt,Nt)}var Rt="updatemenus"+Ze._uid,Pt=new k(nt,gt,Rt);se.enter().size()&&(gt.node().parentNode.appendChild(gt.node()),gt.call(Le)),se.exit().each(function(xn){gt.call(Le),dt(xn)}).remove(),se.each(function(xn){var oa=v.select(this),jo=xn.type==="dropdown"?gt:null;c.manageCommandObserver(nt,xn,xn.buttons,function(lt){P(nt,xn,xn.buttons[lt.index],oa,jo,Pt,lt.index,!0)}),xn.type==="dropdown"?(N(nt,oa,gt,Pt,xn),j(gt,xn)&&O(nt,oa,gt,Pt,xn)):O(nt,oa,null,null,xn)})}};function T(nt){return nt._index}function L(nt){return+nt.attr(d.menuIndexAttrName)==-1}function j(nt,Ze){return+nt.attr(d.menuIndexAttrName)===Ze._index}function P(nt,Ze,rt,dt,pt,se,gt,xt){Ze.active=gt,w(nt.layout,d.name,Ze).applyUpdate("active",gt),Ze.type==="buttons"?O(nt,dt,null,null,Ze):Ze.type==="dropdown"&&(pt.attr(d.menuIndexAttrName,"-1"),N(nt,dt,pt,se,Ze),xt||O(nt,dt,pt,se,Ze))}function N(nt,Ze,rt,dt,pt){var se=y.ensureSingle(Ze,"g",d.headerClassName,function(oa){oa.style("pointer-events","all")}),gt=pt._dims,xt=pt.active,Nt=pt.buttons[xt]||d.blankHeaderOpts,Rt={y:pt.pad.t,yPad:0,x:pt.pad.l,xPad:0,index:0},Pt={width:gt.headerWidth,height:gt.headerHeight};se.call(D,pt,Nt,nt).call(ft,pt,Rt,Pt);var xn=y.ensureSingle(Ze,"text",d.headerArrowClassName,function(oa){oa.attr("text-anchor","end").call(_.font,pt.font).text(d.arrowSymbol[pt.direction])});xn.attr({x:gt.headerWidth-d.arrowOffsetX+pt.pad.l,y:gt.headerHeight/2+d.textOffsetY+pt.pad.t}),se.on("click",function(){rt.call(Le,String(j(rt,pt)?-1:pt._index)),O(nt,Ze,rt,dt,pt)}),se.on("mouseover",function(){se.call(ht)}),se.on("mouseout",function(){se.call(Se,pt)}),_.setTranslate(Ze,gt.lx,gt.ly)}function O(nt,Ze,rt,dt,pt){rt||(rt=Ze,rt.attr("pointer-events","all"));var se=!L(rt)||pt.type==="buttons"?pt.buttons:[],gt=pt.type==="dropdown"?d.dropdownButtonClassName:d.buttonClassName,xt=rt.selectAll("g."+gt).data(y.filterVisible(se)),Nt=xt.enter().append("g").classed(gt,!0),Rt=xt.exit();pt.type==="dropdown"?(Nt.attr("opacity","0").transition().attr("opacity","1"),Rt.transition().attr("opacity","0").remove()):Rt.remove();var Pt=0,xn=0,oa=pt._dims,jo=["up","down"].indexOf(pt.direction)!==-1;pt.type==="dropdown"&&(jo?xn=oa.headerHeight+d.gapButtonHeader:Pt=oa.headerWidth+d.gapButtonHeader),pt.type==="dropdown"&&pt.direction==="up"&&(xn=-d.gapButtonHeader+d.gapButton-oa.openHeight),pt.type==="dropdown"&&pt.direction==="left"&&(Pt=-d.gapButtonHeader+d.gapButton-oa.openWidth);var lt={x:oa.lx+Pt+pt.pad.l,y:oa.ly+xn+pt.pad.t,yPad:d.gapButton,xPad:d.gapButton,index:0},ut={l:lt.x+pt.borderwidth,t:lt.y+pt.borderwidth};xt.each(function($,yt){var Lt=v.select(this);Lt.call(D,pt,$,nt).call(ft,pt,lt),Lt.on("click",function(){v.event.defaultPrevented||($.execute&&($.args2&&pt.active===yt?(P(nt,pt,$,Ze,rt,dt,-1),c.executeAPICommand(nt,$.method,$.args2)):(P(nt,pt,$,Ze,rt,dt,yt),c.executeAPICommand(nt,$.method,$.args))),nt.emit("plotly_buttonclicked",{menu:pt,button:$,active:pt.active}))}),Lt.on("mouseover",function(){Lt.call(ht)}),Lt.on("mouseout",function(){Lt.call(Se,pt),xt.call(Y,pt)})}),xt.call(Y,pt),jo?(ut.w=Math.max(oa.openWidth,oa.headerWidth),ut.h=lt.y-ut.t):(ut.w=lt.x-ut.l,ut.h=Math.max(oa.openHeight,oa.headerHeight)),ut.direction=pt.direction,dt&&(xt.size()?B(nt,Ze,rt,dt,pt,ut):S(dt))}function B(nt,Ze,rt,dt,pt,se){var gt=pt.direction,xt=gt==="up"||gt==="down",Nt=pt._dims,Rt=pt.active,Pt,xn,oa;if(xt)for(xn=0,oa=0;oa<Rt;oa++)xn+=Nt.heights[oa]+d.gapButton;else for(Pt=0,oa=0;oa<Rt;oa++)Pt+=Nt.widths[oa]+d.gapButton;dt.enable(se,Pt,xn),dt.hbar&&dt.hbar.attr("opacity","0").transition().attr("opacity","1"),dt.vbar&&dt.vbar.attr("opacity","0").transition().attr("opacity","1")}function S(nt){var Ze=!!nt.hbar,rt=!!nt.vbar;Ze&&nt.hbar.transition().attr("opacity","0").each("end",function(){Ze=!1,rt||nt.disable()}),rt&&nt.vbar.transition().attr("opacity","0").each("end",function(){rt=!1,Ze||nt.disable()})}function D(nt,Ze,rt,dt){nt.call(z,Ze).call(H,Ze,rt,dt)}function z(nt,Ze){var rt=y.ensureSingle(nt,"rect",d.itemRectClassName,function(dt){dt.attr({rx:d.rx,ry:d.ry,"shape-rendering":"crispEdges"})});rt.call(h.stroke,Ze.bordercolor).call(h.fill,Ze.bgcolor).style("stroke-width",Ze.borderwidth+"px")}function H(nt,Ze,rt,dt){var pt=y.ensureSingle(nt,"text",d.itemTextClassName,function(xt){xt.attr({"text-anchor":"start","data-notex":1})}),se=rt.label,gt=dt._fullLayout._meta;gt&&(se=y.templateString(se,gt)),pt.call(_.font,Ze.font).text(se).call(x.convertToTspans,dt)}function Y(nt,Ze){var rt=Ze.active;nt.each(function(dt,pt){var se=v.select(this);pt===rt&&Ze.showactive&&se.select("rect."+d.itemRectClassName).call(h.fill,d.activeColor)})}function ht(nt){nt.select("rect."+d.itemRectClassName).call(h.fill,d.hoverColor)}function Se(nt,Ze){nt.select("rect."+d.itemRectClassName).call(h.fill,Ze.bgcolor)}function ie(nt,Ze){var rt=Ze._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},dt=_.tester.selectAll("g."+d.dropdownButtonClassName).data(y.filterVisible(Ze.buttons));dt.enter().append("g").classed(d.dropdownButtonClassName,!0);var pt=["up","down"].indexOf(Ze.direction)!==-1;dt.each(function(Pt,xn){var oa=v.select(this);oa.call(D,Ze,Pt,nt);var jo=oa.select("."+d.itemTextClassName),lt=jo.node()&&_.bBox(jo.node()).width,ut=Math.max(lt+d.textPadX,d.minWidth),$=Ze.font.size*A,yt=x.lineCount(jo),Lt=Math.max($*yt,d.minHeight)+d.textOffsetY;Lt=Math.ceil(Lt),ut=Math.ceil(ut),rt.widths[xn]=ut,rt.heights[xn]=Lt,rt.height1=Math.max(rt.height1,Lt),rt.width1=Math.max(rt.width1,ut),pt?(rt.totalWidth=Math.max(rt.totalWidth,ut),rt.openWidth=rt.totalWidth,rt.totalHeight+=Lt+d.gapButton,rt.openHeight+=Lt+d.gapButton):(rt.totalWidth+=ut+d.gapButton,rt.openWidth+=ut+d.gapButton,rt.totalHeight=Math.max(rt.totalHeight,Lt),rt.openHeight=rt.totalHeight)}),pt?rt.totalHeight-=d.gapButton:rt.totalWidth-=d.gapButton,rt.headerWidth=rt.width1+d.arrowPadX,rt.headerHeight=rt.height1,Ze.type==="dropdown"&&(pt?(rt.width1+=d.arrowPadX,rt.totalHeight=rt.height1):rt.totalWidth=rt.width1,rt.totalWidth+=d.arrowPadX),dt.remove();var se=rt.totalWidth+Ze.pad.l+Ze.pad.r,gt=rt.totalHeight+Ze.pad.t+Ze.pad.b,xt=nt._fullLayout._size;rt.lx=xt.l+xt.w*Ze.x,rt.ly=xt.t+xt.h*(1-Ze.y);var Nt="left";y.isRightAnchor(Ze)&&(rt.lx-=se,Nt="right"),y.isCenterAnchor(Ze)&&(rt.lx-=se/2,Nt="center");var Rt="top";y.isBottomAnchor(Ze)&&(rt.ly-=gt,Rt="bottom"),y.isMiddleAnchor(Ze)&&(rt.ly-=gt/2,Rt="middle"),rt.totalWidth=Math.ceil(rt.totalWidth),rt.totalHeight=Math.ceil(rt.totalHeight),rt.lx=Math.round(rt.lx),rt.ly=Math.round(rt.ly),c.autoMargin(nt,X(Ze),{x:Ze.x,y:Ze.y,l:se*({right:1,center:.5}[Nt]||0),r:se*({left:1,center:.5}[Nt]||0),b:gt*({top:1,middle:.5}[Rt]||0),t:gt*({bottom:1,middle:.5}[Rt]||0)})}function X(nt){return d.autoMarginIdRoot+nt._index}function ft(nt,Ze,rt,dt){dt=dt||{};var pt=nt.select("."+d.itemRectClassName),se=nt.select("."+d.itemTextClassName),gt=Ze.borderwidth,xt=rt.index,Nt=Ze._dims;_.setTranslate(nt,gt+rt.x,gt+rt.y);var Rt=["up","down"].indexOf(Ze.direction)!==-1,Pt=dt.height||(Rt?Nt.heights[xt]:Nt.height1);pt.attr({x:0,y:0,width:dt.width||(Rt?Nt.width1:Nt.widths[xt]),height:Pt});var xn=Ze.font.size*A,oa=x.lineCount(se),jo=(oa-1)*xn/2;x.positionText(se,d.textOffsetX,Pt/2-jo+d.textOffsetY),Rt?rt.y+=Nt.heights[xt]+rt.yPad:rt.x+=Nt.widths[xt]+rt.xPad,rt.index++}function Le(nt,Ze){nt.attr(d.menuIndexAttrName,Ze||"-1").selectAll("g."+d.dropdownButtonClassName).remove()}}),Fb=t((Ue,ve)=>{var v=K2();ve.exports={moduleType:"component",name:v.name,layoutAttributes:Fx(),supplyLayoutDefaults:Rx(),draw:Dx()}}),b2=t((Ue,ve)=>{ve.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}}),l2=t((Ue,ve)=>{var v=Ut(),c=n1(),h=bt().extendDeepAll,_=Um().overrideAll,y=x1(),x=Nm().templatedArray,w=b2(),A=x("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});ve.exports=_(x("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:A,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:h(c({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:y.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:v({})},font:v({}),activebgcolor:{valType:"color",dflt:w.gripBgActiveColor},bgcolor:{valType:"color",dflt:w.railBgColor},bordercolor:{valType:"color",dflt:w.railBorderColor},borderwidth:{valType:"number",min:0,dflt:w.railBorderWidth},ticklen:{valType:"number",min:0,dflt:w.tickLength},tickcolor:{valType:"color",dflt:w.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:w.minorTickLength}}),"arraydraw","from-root")}),B_=t((Ue,ve)=>{var v=Re(),c=Mt(),h=l2(),_=b2(),y=_.name,x=h.steps;ve.exports=function(d,k){c(d,k,{name:y,handleItemDefaults:w})};function w(d,k,T){function L(z,H){return v.coerce(d,k,h,z,H)}for(var j=c(d,k,{name:"steps",handleItemDefaults:A}),P=0,N=0;N<j.length;N++)j[N].visible&&P++;var O;if(P<2?O=k.visible=!1:O=L("visible"),!!O){k._stepCount=P;var B=k._visibleSteps=v.filterVisible(j),S=L("active");(j[S]||{}).visible||(k.active=B[0]._index),L("x"),L("y"),v.noneOrAll(d,k,["x","y"]),L("xanchor"),L("yanchor"),L("len"),L("lenmode"),L("pad.t"),L("pad.r"),L("pad.b"),L("pad.l"),v.coerceFont(L,"font",T.font);var D=L("currentvalue.visible");D&&(L("currentvalue.xanchor"),L("currentvalue.prefix"),L("currentvalue.suffix"),L("currentvalue.offset"),v.coerceFont(L,"currentvalue.font",k.font)),L("transition.duration"),L("transition.easing"),L("bgcolor"),L("activebgcolor"),L("bordercolor"),L("borderwidth"),L("ticklen"),L("tickwidth"),L("tickcolor"),L("minorticklen")}}function A(d,k){function T(P,N){return v.coerce(d,k,x,P,N)}var L;if(d.method!=="skip"&&!Array.isArray(d.args)?L=k.visible=!1:L=T("visible"),L){T("method"),T("args");var j=T("label","step-"+k._index);T("value",j),T("execute")}}}),c2=t((Ue,ve)=>{var v=l(),c=lg(),h=sa(),_=Y0(),y=Re(),x=y.strTranslate,w=j1(),A=Nm().arrayEditor,d=b2(),k=$1(),T=k.LINE_SPACING,L=k.FROM_TL,j=k.FROM_BR;ve.exports=function(pt){var se=pt._context.staticPlot,gt=pt._fullLayout,xt=N(gt,pt),Nt=gt._infolayer.selectAll("g."+d.containerClassName).data(xt.length>0?[0]:[]);Nt.enter().append("g").classed(d.containerClassName,!0).style("cursor",se?null:"ew-resize");function Rt(jo){jo._commandObserver&&(jo._commandObserver.remove(),delete jo._commandObserver),c.autoMargin(pt,P(jo))}if(Nt.exit().each(function(){v.select(this).selectAll("g."+d.groupClassName).each(Rt)}).remove(),xt.length!==0){var Pt=Nt.selectAll("g."+d.groupClassName).data(xt,O);Pt.enter().append("g").classed(d.groupClassName,!0),Pt.exit().each(Rt).remove();for(var xn=0;xn<xt.length;xn++){var oa=xt[xn];B(pt,oa)}Pt.each(function(jo){var lt=v.select(this);ft(jo),c.manageCommandObserver(pt,jo,jo._visibleSteps,function(ut){var $=lt.data()[0];$.active!==ut.index&&($._dragging||Se(pt,lt,$,ut.index,!1,!0))}),S(pt,v.select(this),jo)})}};function P(pt){return d.autoMarginIdRoot+pt._index}function N(pt,se){for(var gt=pt[d.name],xt=[],Nt=0;Nt<gt.length;Nt++){var Rt=gt[Nt];Rt.visible&&(Rt._gd=se,xt.push(Rt))}return xt}function O(pt){return pt._index}function B(pt,se){var gt=_.tester.selectAll("g."+d.labelGroupClass).data(se._visibleSteps);gt.enter().append("g").classed(d.labelGroupClass,!0);var xt=0,Nt=0;gt.each(function(Lt){var ke=v.select(this),G=H(ke,{step:Lt},se),ne=G.node();if(ne){var et=_.bBox(ne);Nt=Math.max(Nt,et.height),xt=Math.max(xt,et.width)}}),gt.remove();var Rt=se._dims={};Rt.inputAreaWidth=Math.max(d.railWidth,d.gripHeight);var Pt=pt._fullLayout._size;Rt.lx=Pt.l+Pt.w*se.x,Rt.ly=Pt.t+Pt.h*(1-se.y),se.lenmode==="fraction"?Rt.outerLength=Math.round(Pt.w*se.len):Rt.outerLength=se.len,Rt.inputAreaStart=0,Rt.inputAreaLength=Math.round(Rt.outerLength-se.pad.l-se.pad.r);var xn=Rt.inputAreaLength-2*d.stepInset,oa=xn/(se._stepCount-1),jo=xt+d.labelPadding;if(Rt.labelStride=Math.max(1,Math.ceil(jo/oa)),Rt.labelHeight=Nt,Rt.currentValueMaxWidth=0,Rt.currentValueHeight=0,Rt.currentValueTotalHeight=0,Rt.currentValueMaxLines=1,se.currentvalue.visible){var lt=_.tester.append("g");gt.each(function(Lt){var ke=D(lt,se,Lt.label),G=ke.node()&&_.bBox(ke.node())||{width:0,height:0},ne=w.lineCount(ke);Rt.currentValueMaxWidth=Math.max(Rt.currentValueMaxWidth,Math.ceil(G.width)),Rt.currentValueHeight=Math.max(Rt.currentValueHeight,Math.ceil(G.height)),Rt.currentValueMaxLines=Math.max(Rt.currentValueMaxLines,ne)}),Rt.currentValueTotalHeight=Rt.currentValueHeight+se.currentvalue.offset,lt.remove()}Rt.height=Rt.currentValueTotalHeight+d.tickOffset+se.ticklen+d.labelOffset+Rt.labelHeight+se.pad.t+se.pad.b;var ut="left";y.isRightAnchor(se)&&(Rt.lx-=Rt.outerLength,ut="right"),y.isCenterAnchor(se)&&(Rt.lx-=Rt.outerLength/2,ut="center");var $="top";y.isBottomAnchor(se)&&(Rt.ly-=Rt.height,$="bottom"),y.isMiddleAnchor(se)&&(Rt.ly-=Rt.height/2,$="middle"),Rt.outerLength=Math.ceil(Rt.outerLength),Rt.height=Math.ceil(Rt.height),Rt.lx=Math.round(Rt.lx),Rt.ly=Math.round(Rt.ly);var yt={y:se.y,b:Rt.height*j[$],t:Rt.height*L[$]};se.lenmode==="fraction"?(yt.l=0,yt.xl=se.x-se.len*L[ut],yt.r=0,yt.xr=se.x+se.len*j[ut]):(yt.x=se.x,yt.l=Rt.outerLength*L[ut],yt.r=Rt.outerLength*j[ut]),c.autoMargin(pt,P(se),yt)}function S(pt,se,gt){(gt.steps[gt.active]||{}).visible||(gt.active=gt._visibleSteps[0]._index),se.call(D,gt).call(dt,gt).call(Y,gt).call(X,gt).call(rt,pt,gt).call(z,pt,gt);var xt=gt._dims;_.setTranslate(se,xt.lx+gt.pad.l,xt.ly+gt.pad.t),se.call(Le,gt,!1),se.call(D,gt)}function D(pt,se,gt){if(se.currentvalue.visible){var xt=se._dims,Nt,Rt;switch(se.currentvalue.xanchor){case"right":Nt=xt.inputAreaLength-d.currentValueInset-xt.currentValueMaxWidth,Rt="left";break;case"center":Nt=xt.inputAreaLength*.5,Rt="middle";break;default:Nt=d.currentValueInset,Rt="left"}var Pt=y.ensureSingle(pt,"text",d.labelClass,function($){$.attr({"text-anchor":Rt,"data-notex":1})}),xn=se.currentvalue.prefix?se.currentvalue.prefix:"";if(typeof gt=="string")xn+=gt;else{var oa=se.steps[se.active].label,jo=se._gd._fullLayout._meta;jo&&(oa=y.templateString(oa,jo)),xn+=oa}se.currentvalue.suffix&&(xn+=se.currentvalue.suffix),Pt.call(_.font,se.currentvalue.font).text(xn).call(w.convertToTspans,se._gd);var lt=w.lineCount(Pt),ut=(xt.currentValueMaxLines+1-lt)*se.currentvalue.font.size*T;return w.positionText(Pt,Nt,ut),Pt}}function z(pt,se,gt){var xt=y.ensureSingle(pt,"rect",d.gripRectClass,function(Nt){Nt.call(ie,se,pt,gt).style("pointer-events","all")});xt.attr({width:d.gripWidth,height:d.gripHeight,rx:d.gripRadius,ry:d.gripRadius}).call(h.stroke,gt.bordercolor).call(h.fill,gt.bgcolor).style("stroke-width",gt.borderwidth+"px")}function H(pt,se,gt){var xt=y.ensureSingle(pt,"text",d.labelClass,function(Pt){Pt.attr({"text-anchor":"middle","data-notex":1})}),Nt=se.step.label,Rt=gt._gd._fullLayout._meta;return Rt&&(Nt=y.templateString(Nt,Rt)),xt.call(_.font,gt.font).text(Nt).call(w.convertToTspans,gt._gd),xt}function Y(pt,se){var gt=y.ensureSingle(pt,"g",d.labelsClass),xt=se._dims,Nt=gt.selectAll("g."+d.labelGroupClass).data(xt.labelSteps);Nt.enter().append("g").classed(d.labelGroupClass,!0),Nt.exit().remove(),Nt.each(function(Rt){var Pt=v.select(this);Pt.call(H,Rt,se),_.setTranslate(Pt,nt(se,Rt.fraction),d.tickOffset+se.ticklen+se.font.size*T+d.labelOffset+xt.currentValueTotalHeight)})}function ht(pt,se,gt,xt,Nt){var Rt=Math.round(xt*(gt._stepCount-1)),Pt=gt._visibleSteps[Rt]._index;Pt!==gt.active&&Se(pt,se,gt,Pt,!0,Nt)}function Se(pt,se,gt,xt,Nt,Rt){var Pt=gt.active;gt.active=xt,A(pt.layout,d.name,gt).applyUpdate("active",xt);var xn=gt.steps[gt.active];se.call(Le,gt,Rt),se.call(D,gt),pt.emit("plotly_sliderchange",{slider:gt,step:gt.steps[gt.active],interaction:Nt,previousActive:Pt}),xn&&xn.method&&Nt&&(se._nextMethod?(se._nextMethod.step=xn,se._nextMethod.doCallback=Nt,se._nextMethod.doTransition=Rt):(se._nextMethod={step:xn,doCallback:Nt,doTransition:Rt},se._nextMethodRaf=window.requestAnimationFrame(function(){var oa=se._nextMethod.step;oa.method&&(oa.execute&&c.executeAPICommand(pt,oa.method,oa.args),se._nextMethod=null,se._nextMethodRaf=null)})))}function ie(pt,se,gt){if(se._context.staticPlot)return;var xt=gt.node(),Nt=v.select(se);function Rt(){return gt.data()[0]}function Pt(){var xn=Rt();se.emit("plotly_sliderstart",{slider:xn});var oa=gt.select("."+d.gripRectClass);v.event.stopPropagation(),v.event.preventDefault(),oa.call(h.fill,xn.activebgcolor);var jo=Ze(xn,v.mouse(xt)[0]);ht(se,gt,xn,jo,!0),xn._dragging=!0;function lt(){var $=Rt(),yt=Ze($,v.mouse(xt)[0]);ht(se,gt,$,yt,!1)}Nt.on("mousemove",lt),Nt.on("touchmove",lt);function ut(){var $=Rt();$._dragging=!1,oa.call(h.fill,$.bgcolor),Nt.on("mouseup",null),Nt.on("mousemove",null),Nt.on("touchend",null),Nt.on("touchmove",null),se.emit("plotly_sliderend",{slider:$,step:$.steps[$.active]})}Nt.on("mouseup",ut),Nt.on("touchend",ut)}pt.on("mousedown",Pt),pt.on("touchstart",Pt)}function X(pt,se){var gt=pt.selectAll("rect."+d.tickRectClass).data(se._visibleSteps),xt=se._dims;gt.enter().append("rect").classed(d.tickRectClass,!0),gt.exit().remove(),gt.attr({width:se.tickwidth+"px","shape-rendering":"crispEdges"}),gt.each(function(Nt,Rt){var Pt=Rt%xt.labelStride===0,xn=v.select(this);xn.attr({height:Pt?se.ticklen:se.minorticklen}).call(h.fill,se.tickcolor),_.setTranslate(xn,nt(se,Rt/(se._stepCount-1))-.5*se.tickwidth,(Pt?d.tickOffset:d.minorTickOffset)+xt.currentValueTotalHeight)})}function ft(pt){var se=pt._dims;se.labelSteps=[];for(var gt=pt._stepCount,xt=0;xt<gt;xt+=se.labelStride)se.labelSteps.push({fraction:xt/(gt-1),step:pt._visibleSteps[xt]})}function Le(pt,se,gt){for(var xt=pt.select("rect."+d.gripRectClass),Nt=0,Rt=0;Rt<se._stepCount;Rt++)if(se._visibleSteps[Rt]._index===se.active){Nt=Rt;break}var Pt=nt(se,Nt/(se._stepCount-1));if(!se._invokingCommand){var xn=xt;gt&&se.transition.duration>0&&(xn=xn.transition().duration(se.transition.duration).ease(se.transition.easing)),xn.attr("transform",x(Pt-d.gripWidth*.5,se._dims.currentValueTotalHeight))}}function nt(pt,se){var gt=pt._dims;return gt.inputAreaStart+d.stepInset+(gt.inputAreaLength-2*d.stepInset)*Math.min(1,Math.max(0,se))}function Ze(pt,se){var gt=pt._dims;return Math.min(1,Math.max(0,(se-d.stepInset-gt.inputAreaStart)/(gt.inputAreaLength-2*d.stepInset-2*gt.inputAreaStart)))}function rt(pt,se,gt){var xt=gt._dims,Nt=y.ensureSingle(pt,"rect",d.railTouchRectClass,function(Rt){Rt.call(ie,se,pt,gt).style("pointer-events","all")});Nt.attr({width:xt.inputAreaLength,height:Math.max(xt.inputAreaWidth,d.tickOffset+gt.ticklen+xt.labelHeight)}).call(h.fill,gt.bgcolor).attr("opacity",0),_.setTranslate(Nt,0,xt.currentValueTotalHeight)}function dt(pt,se){var gt=se._dims,xt=gt.inputAreaLength-d.railInset*2,Nt=y.ensureSingle(pt,"rect",d.railRectClass);Nt.attr({width:xt,height:d.railWidth,rx:d.railRadius,ry:d.railRadius,"shape-rendering":"crispEdges"}).call(h.stroke,se.bordercolor).call(h.fill,se.bgcolor).style("stroke-width",se.borderwidth+"px"),_.setTranslate(Nt,d.railInset,(gt.inputAreaWidth-d.railWidth)*.5+gt.currentValueTotalHeight)}}),Uy=t((Ue,ve)=>{var v=b2();ve.exports={moduleType:"component",name:v.name,layoutAttributes:l2(),supplyLayoutDefaults:B_(),draw:c2()}}),w2=t((Ue,ve)=>{var v=zp();ve.exports={bgcolor:{valType:"color",dflt:v.background,editType:"plot"},bordercolor:{valType:"color",dflt:v.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}}),Bb=t((Ue,ve)=>{ve.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}}),jb=t((Ue,ve)=>{ve.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}}),iw=t(Ue=>{var ve=A1(),v=j1(),c=jb(),h=$1().LINE_SPACING,_=c.name;function y(x){var w=x&&x[_];return w&&w.visible}Ue.isVisible=y,Ue.makeData=function(x){for(var w=ve.list({_fullLayout:x},"x",!0),A=x.margin,d=[],k=0;k<w.length;k++){var T=w[k];if(y(T)){d.push(T);var L=T[_];L._id=_+T._id,L._height=(x.height-A.b-A.t)*L.thickness,L._offsetShift=Math.floor(L.borderwidth/2)}}x._rangeSliderData=d},Ue.autoMarginOpts=function(x,w){var A=x._fullLayout,d=w[_],k=w._id.charAt(0),T=0,L=0;if(w.side==="bottom"&&(T=w._depth,w.title.text!==A._dfltTitle[k])){L=1.5*w.title.font.size+10+d._offsetShift;var j=(w.title.text.match(v.BR_TAG_ALL)||[]).length;L+=j*w.title.font.size*h}return{x:0,y:w._counterDomainMin,l:0,r:0,t:0,b:d._height+T+Math.max(A.margin.b,L),pad:c.extraPad+d._offsetShift*2}}}),ow=t((Ue,ve)=>{var v=Re(),c=Nm(),h=A1(),_=w2(),y=Bb();ve.exports=function(x,w,A){var d=x[A],k=w[A];if(!(d.rangeslider||w._requestRangeslider[k._id]))return;v.isPlainObject(d.rangeslider)||(d.rangeslider={});var T=d.rangeslider,L=c.newContainer(k,"rangeslider");function j(X,ft){return v.coerce(T,L,_,X,ft)}var P,N;function O(X,ft){return v.coerce(P,N,y,X,ft)}var B=j("visible");if(B){j("bgcolor",w.plot_bgcolor),j("bordercolor"),j("borderwidth"),j("thickness"),j("autorange",!k.isValidRange(T.range)),j("range");var S=w._subplots;if(S)for(var D=S.cartesian.filter(function(X){return X.substr(0,X.indexOf("y"))===h.name2id(A)}).map(function(X){return X.substr(X.indexOf("y"),X.length)}),z=v.simpleMap(D,h.id2name),H=0;H<z.length;H++){var Y=z[H];P=T[Y]||{},N=c.newContainer(L,Y,"yaxis");var ht=w[Y],Se;P.range&&ht.isValidRange(P.range)&&(Se="fixed");var ie=O("rangemode",Se);ie!=="match"&&O("range",ht.range.slice())}L._input=T}}}),Ty=t((Ue,ve)=>{var v=A1().list,c=Pm().getAutoRange,h=jb();ve.exports=function(_){for(var y=v(_,"x",!0),x=0;x<y.length;x++){var w=y[x],A=w[h.name];A&&A.visible&&A.autorange&&(A._input.autorange=!0,A._input.range=A.range=c(_,w))}}}),Vb=t((Ue,ve)=>{var v=l(),c=p1(),h=lg(),_=Re(),y=_.strTranslate,x=Y0(),w=sa(),A=Q0(),d=Ix(),k=A1(),T=Km(),L=W1(),j=jb();ve.exports=function(ie){for(var X=ie._fullLayout,ft=X._rangeSliderData,Le=0;Le<ft.length;Le++){var nt=ft[Le][j.name];nt._clipId=nt._id+"-"+X._uid}function Ze(dt){return dt._name}var rt=X._infolayer.selectAll("g."+j.containerClassName).data(ft,Ze);rt.exit().each(function(dt){var pt=dt[j.name];X._topdefs.select("#"+pt._clipId).remove()}).remove(),ft.length!==0&&(rt.enter().append("g").classed(j.containerClassName,!0).attr("pointer-events","all"),rt.each(function(dt){var pt=v.select(this),se=dt[j.name],gt=X[k.id2name(dt.anchor)],xt=se[k.id2name(dt.anchor)];if(se.range){var Nt=_.simpleMap(se.range,dt.r2l),Rt=_.simpleMap(dt.range,dt.r2l),Pt;Rt[0]<Rt[1]?Pt=[Math.min(Nt[0],Rt[0]),Math.max(Nt[1],Rt[1])]:Pt=[Math.max(Nt[0],Rt[0]),Math.min(Nt[1],Rt[1])],se.range=se._input.range=_.simpleMap(Pt,dt.l2r)}dt.cleanRange("rangeslider.range");var xn=X._size,oa=dt.domain;se._width=xn.w*(oa[1]-oa[0]);var jo=Math.round(xn.l+xn.w*oa[0]),lt=Math.round(xn.t+xn.h*(1-dt._counterDomainMin)+(dt.side==="bottom"?dt._depth:0)+se._offsetShift+j.extraPad);pt.attr("transform",y(jo,lt)),se._rl=_.simpleMap(se.range,dt.r2l);var ut=se._rl[0],$=se._rl[1],yt=$-ut;if(se.p2d=function(Ko){return Ko/se._width*yt+ut},se.d2p=function(Ko){return(Ko-ut)/yt*se._width},dt.rangebreaks){var Lt=dt.locateBreaks(ut,$);if(Lt.length){var ke,G,ne=0;for(ke=0;ke<Lt.length;ke++)G=Lt[ke],ne+=G.max-G.min;var et=se._width/($-ut-ne),ct=[-et*ut];for(ke=0;ke<Lt.length;ke++)G=Lt[ke],ct.push(ct[ct.length-1]-et*(G.max-G.min));for(se.d2p=function(Ko){for(var Up=ct[0],e0=0;e0<Lt.length;e0++){var E0=Lt[e0];if(Ko>=E0.max)Up=ct[e0+1];else if(Ko<E0.min)break}return Up+et*Ko},ke=0;ke<Lt.length;ke++)G=Lt[ke],G.pmin=se.d2p(G.min),G.pmax=se.d2p(G.max);se.p2d=function(Ko){for(var Up=ct[0],e0=0;e0<Lt.length;e0++){var E0=Lt[e0];if(Ko>=E0.pmax)Up=ct[e0+1];else if(Ko<E0.pmin)break}return(Ko-Up)/et}}}if(xt.rangemode!=="match"){var kt=gt.r2l(xt.range[0]),Gt=gt.r2l(xt.range[1]),$t=Gt-kt;se.d2pOppAxis=function(Ko){return(Ko-kt)/$t*se._height}}pt.call(S,ie,dt,se).call(D,ie,dt,se).call(z,ie,dt,se).call(Y,ie,dt,se,xt).call(ht,ie,dt,se).call(Se,ie,dt,se),N(pt,ie,dt,se),B(pt,ie,dt,se,gt,xt),dt.side==="bottom"&&A.draw(ie,dt._id+"title",{propContainer:dt,propName:dt._name+".title.text",placeholder:X._dfltTitle.x,attributes:{x:dt._offset+dt._length/2,y:lt+se._height+se._offsetShift+10+1.5*dt.title.font.size,"text-anchor":"middle"}})}))};function P(ie){return typeof ie.clientX=="number"?ie.clientX:ie.touches&&ie.touches.length>0?ie.touches[0].clientX:0}function N(ie,X,ft,Le){if(X._context.staticPlot)return;var nt=ie.select("rect."+j.slideBoxClassName).node(),Ze=ie.select("rect."+j.grabAreaMinClassName).node(),rt=ie.select("rect."+j.grabAreaMaxClassName).node();function dt(){var pt=v.event,se=pt.target,gt=P(pt),xt=gt-ie.node().getBoundingClientRect().left,Nt=Le.d2p(ft._rl[0]),Rt=Le.d2p(ft._rl[1]),Pt=T.coverSlip();this.addEventListener("touchmove",xn),this.addEventListener("touchend",oa),Pt.addEventListener("mousemove",xn),Pt.addEventListener("mouseup",oa);function xn(jo){var lt=P(jo),ut=+lt-gt,$,yt,Lt;switch(se){case nt:if(Lt="ew-resize",Nt+ut>ft._length||Rt+ut<0)return;$=Nt+ut,yt=Rt+ut;break;case Ze:if(Lt="col-resize",Nt+ut>ft._length)return;$=Nt+ut,yt=Rt;break;case rt:if(Lt="col-resize",Rt+ut<0)return;$=Nt,yt=Rt+ut;break;default:Lt="ew-resize",$=xt,yt=xt+ut;break}if(yt<$){var ke=yt;yt=$,$=ke}Le._pixelMin=$,Le._pixelMax=yt,L(v.select(Pt),Lt),O(ie,X,ft,Le)}function oa(){Pt.removeEventListener("mousemove",xn),Pt.removeEventListener("mouseup",oa),this.removeEventListener("touchmove",xn),this.removeEventListener("touchend",oa),_.removeElement(Pt)}}ie.on("mousedown",dt),ie.on("touchstart",dt)}function O(ie,X,ft,Le){function nt(dt){return ft.l2r(_.constrain(dt,Le._rl[0],Le._rl[1]))}var Ze=nt(Le.p2d(Le._pixelMin)),rt=nt(Le.p2d(Le._pixelMax));window.requestAnimationFrame(function(){c.call("_guiRelayout",X,ft._name+".range",[Ze,rt])})}function B(ie,X,ft,Le,nt,Ze){var rt=j.handleWidth/2;function dt(jo){return _.constrain(jo,0,Le._width)}function pt(jo){return _.constrain(jo,0,Le._height)}function se(jo){return _.constrain(jo,-rt,Le._width+rt)}var gt=dt(Le.d2p(ft._rl[0])),xt=dt(Le.d2p(ft._rl[1]));if(ie.select("rect."+j.slideBoxClassName).attr("x",gt).attr("width",xt-gt),ie.select("rect."+j.maskMinClassName).attr("width",gt),ie.select("rect."+j.maskMaxClassName).attr("x",xt).attr("width",Le._width-xt),Ze.rangemode!=="match"){var Nt=Le._height-pt(Le.d2pOppAxis(nt._rl[1])),Rt=Le._height-pt(Le.d2pOppAxis(nt._rl[0]));ie.select("rect."+j.maskMinOppAxisClassName).attr("x",gt).attr("height",Nt).attr("width",xt-gt),ie.select("rect."+j.maskMaxOppAxisClassName).attr("x",gt).attr("y",Rt).attr("height",Le._height-Rt).attr("width",xt-gt),ie.select("rect."+j.slideBoxClassName).attr("y",Nt).attr("height",Rt-Nt)}var Pt=.5,xn=Math.round(se(gt-rt))-Pt,oa=Math.round(se(xt-rt))+Pt;ie.select("g."+j.grabberMinClassName).attr("transform",y(xn,Pt)),ie.select("g."+j.grabberMaxClassName).attr("transform",y(oa,Pt))}function S(ie,X,ft,Le){var nt=_.ensureSingle(ie,"rect",j.bgClassName,function(pt){pt.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),Ze=Le.borderwidth%2===0?Le.borderwidth:Le.borderwidth-1,rt=-Le._offsetShift,dt=x.crispRound(X,Le.borderwidth);nt.attr({width:Le._width+Ze,height:Le._height+Ze,transform:y(rt,rt),"stroke-width":dt}).call(w.stroke,Le.bordercolor).call(w.fill,Le.bgcolor)}function D(ie,X,ft,Le){var nt=X._fullLayout,Ze=_.ensureSingleById(nt._topdefs,"clipPath",Le._clipId,function(rt){rt.append("rect").attr({x:0,y:0})});Ze.select("rect").attr({width:Le._width,height:Le._height})}function z(ie,X,ft,Le){var nt=X.calcdata,Ze=ie.selectAll("g."+j.rangePlotClassName).data(ft._subplotsWith,_.identity);Ze.enter().append("g").attr("class",function(dt){return j.rangePlotClassName+" "+dt}).call(x.setClipUrl,Le._clipId,X),Ze.order(),Ze.exit().remove();var rt;Ze.each(function(dt,pt){var se=v.select(this),gt=pt===0,xt=k.getFromId(X,dt,"y"),Nt=xt._name,Rt=Le[Nt],Pt={data:[],layout:{xaxis:{type:ft.type,domain:[0,1],range:Le.range.slice(),calendar:ft.calendar},width:Le._width,height:Le._height,margin:{t:0,b:0,l:0,r:0}},_context:X._context};ft.rangebreaks&&(Pt.layout.xaxis.rangebreaks=ft.rangebreaks),Pt.layout[Nt]={type:xt.type,domain:[0,1],range:Rt.rangemode!=="match"?Rt.range.slice():xt.range.slice(),calendar:xt.calendar},xt.rangebreaks&&(Pt.layout[Nt].rangebreaks=xt.rangebreaks),h.supplyDefaults(Pt);var xn=Pt._fullLayout.xaxis,oa=Pt._fullLayout[Nt];xn.clearCalc(),xn.setScale(),oa.clearCalc(),oa.setScale();var jo={id:dt,plotgroup:se,xaxis:xn,yaxis:oa,isRangePlot:!0};gt?rt=jo:(jo.mainplot="xy",jo.mainplotinfo=rt),d.rangePlot(X,jo,H(nt,dt))})}function H(ie,X){for(var ft=[],Le=0;Le<ie.length;Le++){var nt=ie[Le],Ze=nt[0].trace;Ze.xaxis+Ze.yaxis===X&&ft.push(nt)}return ft}function Y(ie,X,ft,Le,nt){var Ze=_.ensureSingle(ie,"rect",j.maskMinClassName,function(se){se.attr({x:0,y:0,"shape-rendering":"crispEdges"})});Ze.attr("height",Le._height).call(w.fill,j.maskColor);var rt=_.ensureSingle(ie,"rect",j.maskMaxClassName,function(se){se.attr({y:0,"shape-rendering":"crispEdges"})});if(rt.attr("height",Le._height).call(w.fill,j.maskColor),nt.rangemode!=="match"){var dt=_.ensureSingle(ie,"rect",j.maskMinOppAxisClassName,function(se){se.attr({y:0,"shape-rendering":"crispEdges"})});dt.attr("width",Le._width).call(w.fill,j.maskOppAxisColor);var pt=_.ensureSingle(ie,"rect",j.maskMaxOppAxisClassName,function(se){se.attr({y:0,"shape-rendering":"crispEdges"})});pt.attr("width",Le._width).style("border-top",j.maskOppBorder).call(w.fill,j.maskOppAxisColor)}}function ht(ie,X,ft,Le){if(!X._context.staticPlot){var nt=_.ensureSingle(ie,"rect",j.slideBoxClassName,function(Ze){Ze.attr({y:0,cursor:j.slideBoxCursor,"shape-rendering":"crispEdges"})});nt.attr({height:Le._height,fill:j.slideBoxFill})}}function Se(ie,X,ft,Le){var nt=_.ensureSingle(ie,"g",j.grabberMinClassName),Ze=_.ensureSingle(ie,"g",j.grabberMaxClassName),rt={x:0,width:j.handleWidth,rx:j.handleRadius,fill:w.background,stroke:w.defaultLine,"stroke-width":j.handleStrokeWidth,"shape-rendering":"crispEdges"},dt={y:Math.round(Le._height/4),height:Math.round(Le._height/2)},pt=_.ensureSingle(nt,"rect",j.handleMinClassName,function(Rt){Rt.attr(rt)});pt.attr(dt);var se=_.ensureSingle(Ze,"rect",j.handleMaxClassName,function(Rt){Rt.attr(rt)});se.attr(dt);var gt={width:j.grabAreaWidth,x:0,y:0,fill:j.grabAreaFill,cursor:X._context.staticPlot?void 0:j.grabAreaCursor},xt=_.ensureSingle(nt,"rect",j.grabAreaMinClassName,function(Rt){Rt.attr(gt)});xt.attr("height",Le._height);var Nt=_.ensureSingle(Ze,"rect",j.grabAreaMaxClassName,function(Rt){Rt.attr(gt)});Nt.attr("height",Le._height)}}),Q2=t((Ue,ve)=>{var v=Re(),c=w2(),h=Bb(),_=iw();ve.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:v.extendFlat({},c,{yaxis:h})}}},layoutAttributes:w2(),handleDefaults:ow(),calcAutorange:Ty(),draw:Vb(),isVisible:_.isVisible,makeData:_.makeData,autoMarginOpts:_.autoMarginOpts}}),u2=t((Ue,ve)=>{var v=Ut(),c=zp(),h=Nm().templatedArray,_=h("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});ve.exports={visible:{valType:"boolean",editType:"plot"},buttons:_,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:v({editType:"plot"}),bgcolor:{valType:"color",dflt:c.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:c.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}}),j_=t((Ue,ve)=>{ve.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}}),S2=t((Ue,ve)=>{var v=Re(),c=sa(),h=Nm(),_=Mt(),y=u2(),x=j_();ve.exports=function(d,k,T,L,j){var P=d.rangeselector||{},N=h.newContainer(k,"rangeselector");function O(H,Y){return v.coerce(P,N,y,H,Y)}var B=_(P,N,{name:"buttons",handleItemDefaults:w,calendar:j}),S=O("visible",B.length>0);if(S){var D=A(k,T,L);O("x",D[0]),O("y",D[1]),v.noneOrAll(d,k,["x","y"]),O("xanchor"),O("yanchor"),v.coerceFont(O,"font",T.font);var z=O("bgcolor");O("activecolor",c.contrast(z,x.lightAmount,x.darkAmount)),O("bordercolor"),O("borderwidth")}};function w(d,k,T,L){var j=L.calendar;function P(B,S){return v.coerce(d,k,y.buttons,B,S)}var N=P("visible");if(N){var O=P("step");O!=="all"&&(j&&j!=="gregorian"&&(O==="month"||O==="year")?k.stepmode="backward":P("stepmode"),P("count")),P("label")}}function A(d,k,T){for(var L=T.filter(function(O){return k[O].anchor===d._id}),j=0,P=0;P<L.length;P++){var N=k[L[P]].domain;N&&(j=Math.max(N[1],j))}return[d.domain[0],j+x.yPad]}}),T2=t((Ue,ve)=>{var v=s(),c=Re().titleCase;ve.exports=function(_,y){var x=_._name,w={};if(y.step==="all")w[x+".autorange"]=!0;else{var A=h(_,y);w[x+".range[0]"]=A[0],w[x+".range[1]"]=A[1]}return w};function h(_,y){var x=_.range,w=new Date(_.r2l(x[1])),A=y.step,d=v["utc"+c(A)],k=y.count,T;switch(y.stepmode){case"backward":T=_.l2r(+d.offset(w,-k));break;case"todate":var L=d.offset(w,-k);T=_.l2r(+d.ceil(L));break}var j=x[1];return[T,j]}}),sw=t((Ue,ve)=>{var v=l(),c=p1(),h=lg(),_=sa(),y=Y0(),x=Re(),w=x.strTranslate,A=j1(),d=A1(),k=$1(),T=k.LINE_SPACING,L=k.FROM_TL,j=k.FROM_BR,P=j_(),N=T2();ve.exports=function(Se){var ie=Se._fullLayout,X=ie._infolayer.selectAll(".rangeselector").data(O(Se),B);X.enter().append("g").classed("rangeselector",!0),X.exit().remove(),X.style({cursor:"pointer","pointer-events":"all"}),X.each(function(ft){var Le=v.select(this),nt=ft,Ze=nt.rangeselector,rt=Le.selectAll("g.button").data(x.filterVisible(Ze.buttons));rt.enter().append("g").classed("button",!0),rt.exit().remove(),rt.each(function(dt){var pt=v.select(this),se=N(nt,dt);dt._isActive=S(nt,dt,se),pt.call(D,Ze,dt),pt.call(H,Ze,dt,Se),pt.on("click",function(){Se._dragged||c.call("_guiRelayout",Se,se)}),pt.on("mouseover",function(){dt._isHovered=!0,pt.call(D,Ze,dt)}),pt.on("mouseout",function(){dt._isHovered=!1,pt.call(D,Ze,dt)})}),ht(Se,rt,Ze,nt._name,Le)})};function O(Se){for(var ie=d.list(Se,"x",!0),X=[],ft=0;ft<ie.length;ft++){var Le=ie[ft];Le.rangeselector&&Le.rangeselector.visible&&X.push(Le)}return X}function B(Se){return Se._id}function S(Se,ie,X){if(ie.step==="all")return Se.autorange===!0;var ft=Object.keys(X);return Se.range[0]===X[ft[0]]&&Se.range[1]===X[ft[1]]}function D(Se,ie,X){var ft=x.ensureSingle(Se,"rect","selector-rect",function(Le){Le.attr("shape-rendering","crispEdges")});ft.attr({rx:P.rx,ry:P.ry}),ft.call(_.stroke,ie.bordercolor).call(_.fill,z(ie,X)).style("stroke-width",ie.borderwidth+"px")}function z(Se,ie){return ie._isActive||ie._isHovered?Se.activecolor:Se.bgcolor}function H(Se,ie,X,ft){function Le(Ze){A.convertToTspans(Ze,ft)}var nt=x.ensureSingle(Se,"text","selector-text",function(Ze){Ze.attr("text-anchor","middle")});nt.call(y.font,ie.font).text(Y(X,ft._fullLayout._meta)).call(Le)}function Y(Se,ie){return Se.label?ie?x.templateString(Se.label,ie):Se.label:Se.step==="all"?"all":Se.count+Se.step.charAt(0)}function ht(Se,ie,X,ft,Le){var nt=0,Ze=0,rt=X.borderwidth;ie.each(function(){var Nt=v.select(this),Rt=Nt.select(".selector-text"),Pt=X.font.size*T,xn=Math.max(Pt*A.lineCount(Rt),16)+3;Ze=Math.max(Ze,xn)}),ie.each(function(){var Nt=v.select(this),Rt=Nt.select(".selector-rect"),Pt=Nt.select(".selector-text"),xn=Pt.node()&&y.bBox(Pt.node()).width,oa=X.font.size*T,jo=A.lineCount(Pt),lt=Math.max(xn+10,P.minButtonWidth);Nt.attr("transform",w(rt+nt,rt)),Rt.attr({x:0,y:0,width:lt,height:Ze}),A.positionText(Pt,lt/2,Ze/2-(jo-1)*oa/2+3),nt+=lt+5});var dt=Se._fullLayout._size,pt=dt.l+dt.w*X.x,se=dt.t+dt.h*(1-X.y),gt="left";x.isRightAnchor(X)&&(pt-=nt,gt="right"),x.isCenterAnchor(X)&&(pt-=nt/2,gt="center");var xt="top";x.isBottomAnchor(X)&&(se-=Ze,xt="bottom"),x.isMiddleAnchor(X)&&(se-=Ze/2,xt="middle"),nt=Math.ceil(nt),Ze=Math.ceil(Ze),pt=Math.round(pt),se=Math.round(se),h.autoMargin(Se,ft+"-range-selector",{x:X.x,y:X.y,l:nt*L[gt],r:nt*j[gt],b:Ze*j[xt],t:Ze*L[xt]}),Le.attr("transform",w(pt,se))}}),J3=t((Ue,ve)=>{ve.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:u2()}}},layoutAttributes:u2(),handleDefaults:S2(),draw:sw()}}),Hb=t(Ue=>{var ve=bt().extendFlat;Ue.attributes=function(v,c){v=v||{},c=c||{};var h={valType:"info_array",editType:v.editType,items:[{valType:"number",min:0,max:1,editType:v.editType},{valType:"number",min:0,max:1,editType:v.editType}],dflt:[0,1]};v.name&&v.name+"",v.trace,c.description&&""+c.description;var _={x:ve({},h,{}),y:ve({},h,{}),editType:v.editType};return v.noGridCell||(_.row={valType:"integer",min:0,dflt:0,editType:v.editType},_.column={valType:"integer",min:0,dflt:0,editType:v.editType}),_},Ue.defaults=function(v,c,h,_){var y=_&&_.x||[0,1],x=_&&_.y||[0,1],w=c.grid;if(w){var A=h("domain.column");A!==void 0&&(A<w.columns?y=w._domains.x[A]:delete v.domain.column);var d=h("domain.row");d!==void 0&&(d<w.rows?x=w._domains.y[d]:delete v.domain.row)}var k=h("domain.x",y),T=h("domain.y",x);k[0]<k[1]||(v.domain.x=y.slice()),T[0]<T[1]||(v.domain.y=x.slice())}}),K3=t((Ue,ve)=>{var v=Re(),c=ae().counter,h=Hb().attributes,_=jm().idRegex,y=Nm(),x={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[c("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[_.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[_.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:h({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function w(L,j,P){var N=j[P+"axes"],O=Object.keys((L._splomAxes||{})[P]||{});if(Array.isArray(N))return N;if(O.length)return O}function A(L,j){var P=L.grid||{},N=w(j,P,"x"),O=w(j,P,"y");if(!L.grid&&!N&&!O)return;var B=Array.isArray(P.subplots)&&Array.isArray(P.subplots[0]),S=Array.isArray(N),D=Array.isArray(O),z=S&&N!==P.xaxes&&D&&O!==P.yaxes,H,Y;B?(H=P.subplots.length,Y=P.subplots[0].length):(D&&(H=O.length),S&&(Y=N.length));var ht=y.newContainer(j,"grid");function Se(se,gt){return v.coerce(P,ht,x,se,gt)}var ie=Se("rows",H),X=Se("columns",Y);if(!(ie*X>1)){delete j.grid;return}if(!B&&!S&&!D){var ft=Se("pattern")==="independent";ft&&(B=!0)}ht._hasSubplotGrid=B;var Le=Se("roworder"),nt=Le==="top to bottom",Ze=B?.2:.1,rt=B?.3:.1,dt,pt;z&&j._splomGridDflt&&(dt=j._splomGridDflt.xside,pt=j._splomGridDflt.yside),ht._domains={x:d("x",Se,Ze,dt,X),y:d("y",Se,rt,pt,ie,nt)}}function d(L,j,P,N,O,B){var S=j(L+"gap",P),D=j("domain."+L);j(L+"side",N);for(var z=new Array(O),H=D[0],Y=(D[1]-H)/(O-S),ht=Y*(1-S),Se=0;Se<O;Se++){var ie=H+Y*Se;z[B?O-1-Se:Se]=[ie,ie+ht]}return z}function k(L,j){var P=j.grid;if(!(!P||!P._domains)){var N=L.grid||{},O=j._subplots,B=P._hasSubplotGrid,S=P.rows,D=P.columns,z=P.pattern==="independent",H,Y,ht,Se,ie,X,ft,Le=P._axisMap={};if(B){var nt=N.subplots||[];X=P.subplots=new Array(S);var Ze=1;for(H=0;H<S;H++){var rt=X[H]=new Array(D),dt=nt[H]||[];for(Y=0;Y<D;Y++)if(z?(ie=Ze===1?"xy":"x"+Ze+"y"+Ze,Ze++):ie=dt[Y],rt[Y]="",O.cartesian.indexOf(ie)!==-1){if(ft=ie.indexOf("y"),ht=ie.slice(0,ft),Se=ie.slice(ft),Le[ht]!==void 0&&Le[ht]!==Y||Le[Se]!==void 0&&Le[Se]!==H)continue;rt[Y]=ie,Le[ht]=Y,Le[Se]=H}}}else{var pt=w(j,N,"x"),se=w(j,N,"y");P.xaxes=T(pt,O.xaxis,D,Le,"x"),P.yaxes=T(se,O.yaxis,S,Le,"y")}var gt=P._anchors={},xt=P.roworder==="top to bottom";for(var Nt in Le){var Rt=Nt.charAt(0),Pt=P[Rt+"side"],xn,oa,jo;if(Pt.length<8)gt[Nt]="free";else if(Rt==="x"){if(Pt.charAt(0)==="t"===xt?(xn=0,oa=1,jo=S):(xn=S-1,oa=-1,jo=-1),B){var lt=Le[Nt];for(H=xn;H!==jo;H+=oa)if(ie=X[H][lt],!!ie&&(ft=ie.indexOf("y"),ie.slice(0,ft)===Nt)){gt[Nt]=ie.slice(ft);break}}else for(H=xn;H!==jo;H+=oa)if(Se=P.yaxes[H],O.cartesian.indexOf(Nt+Se)!==-1){gt[Nt]=Se;break}}else if(Pt.charAt(0)==="l"?(xn=0,oa=1,jo=D):(xn=D-1,oa=-1,jo=-1),B){var ut=Le[Nt];for(H=xn;H!==jo;H+=oa)if(ie=X[ut][H],!!ie&&(ft=ie.indexOf("y"),ie.slice(ft)===Nt)){gt[Nt]=ie.slice(0,ft);break}}else for(H=xn;H!==jo;H+=oa)if(ht=P.xaxes[H],O.cartesian.indexOf(ht+Nt)!==-1){gt[Nt]=ht;break}}}}function T(L,j,P,N,O){var B=new Array(P),S;function D(z,H){j.indexOf(H)!==-1&&N[H]===void 0?(B[z]=H,N[H]=z):B[z]=""}if(Array.isArray(L))for(S=0;S<P;S++)D(S,L[S]);else for(D(0,O),S=1;S<P;S++)D(S,O+(S+1));return B}ve.exports={moduleType:"component",name:"grid",schema:{layout:{grid:x}},layoutAttributes:x,sizeDefaults:A,contentDefaults:k}}),jx=t((Ue,ve)=>{ve.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc"}}),Gb=t((Ue,ve)=>{var v=E(),c=p1(),h=Re(),_=Nm(),y=jx();ve.exports=function(x,w,A,d){var k="error_"+d.axis,T=_.newContainer(w,k),L=x[k]||{};function j(z,H){return h.coerce(L,T,y,z,H)}var P=L.array!==void 0||L.value!==void 0||L.type==="sqrt",N=j("visible",P);if(N!==!1){var O=j("type","array"in L?"data":"percent"),B=!0;O!=="sqrt"&&(B=j("symmetric",!((O==="data"?"arrayminus":"valueminus")in L))),O==="data"?(j("array"),j("traceref"),B||(j("arrayminus"),j("tracerefminus"))):(O==="percent"||O==="constant")&&(j("value"),B||j("valueminus"));var S="copy_"+d.inherit+"style";if(d.inherit){var D=w["error_"+d.inherit];(D||{}).visible&&j(S,!(L.color||v(L.thickness)||v(L.width)))}(!d.inherit||!T[S])&&(j("color",A),j("thickness"),j("width",c.traceIs(w,"gl3d")?0:4))}}}),e_=t((Ue,ve)=>{ve.exports=function(c){var h=c.type,_=c.symmetric;if(h==="data"){var y=c.array||[];if(_)return function(d,k){var T=+y[k];return[T,T]};var x=c.arrayminus||[];return function(d,k){var T=+y[k],L=+x[k];return!isNaN(T)||!isNaN(L)?[L||0,T||0]:[NaN,NaN]}}else{var w=v(h,c.value),A=v(h,c.valueminus);return _||c.valueminus===void 0?function(d){var k=w(d);return[k,k]}:function(d){return[A(d),w(d)]}}};function v(c,h){if(c==="percent")return function(_){return Math.abs(_*h/100)};if(c==="constant")return function(){return Math.abs(h)};if(c==="sqrt")return function(_){return Math.sqrt(Math.abs(_))}}}),Q3=t((Ue,ve)=>{var v=E(),c=p1(),h=km(),_=Re(),y=e_();ve.exports=function(w){for(var A=w.calcdata,d=0;d<A.length;d++){var k=A[d],T=k[0].trace;if(T.visible===!0&&c.traceIs(T,"errorBarsOK")){var L=h.getFromId(w,T.xaxis),j=h.getFromId(w,T.yaxis);x(k,T,L,"x"),x(k,T,j,"y")}}};function x(w,A,d,k){var T=A["error_"+k]||{},L=T.visible&&["linear","log"].indexOf(d.type)!==-1,j=[];if(L){for(var P=y(T),N=0;N<w.length;N++){var O=w[N],B=O.i;if(B===void 0)B=N;else if(B===null)continue;var S=O[k];if(v(d.c2l(S))){var D=P(S,B);if(v(D[0])&&v(D[1])){var z=O[k+"s"]=S-D[0],H=O[k+"h"]=S+D[1];j.push(z,H)}}}var Y=d._id,ht=A._extremes[Y],Se=h.findExtremes(d,j,_.extendFlat({tozero:ht.opts.tozero},{padded:!0}));ht.min=ht.min.concat(Se.min),ht.max=ht.max.concat(Se.max)}}}),M2=t((Ue,ve)=>{var v=l(),c=E(),h=Y0(),_=$p();ve.exports=function(x,w,A,d){var k,T=A.xaxis,L=A.yaxis,j=d&&d.duration>0,P=x._context.staticPlot;w.each(function(N){var O=N[0].trace,B=O.error_x||{},S=O.error_y||{},D;O.ids&&(D=function(ht){return ht.id});var z=_.hasMarkers(O)&&O.marker.maxdisplayed>0;!S.visible&&!B.visible&&(N=[]);var H=v.select(this).selectAll("g.errorbar").data(N,D);if(H.exit().remove(),!!N.length){B.visible||H.selectAll("path.xerror").remove(),S.visible||H.selectAll("path.yerror").remove(),H.style("opacity",1);var Y=H.enter().append("g").classed("errorbar",!0);j&&Y.style("opacity",0).transition().duration(d.duration).style("opacity",1),h.setClipUrl(H,A.layerClipId,x),H.each(function(ht){var Se=v.select(this),ie=y(ht,T,L);if(!(z&&!ht.vis)){var X,ft=Se.select("path.yerror");if(S.visible&&c(ie.x)&&c(ie.yh)&&c(ie.ys)){var Le=S.width;X="M"+(ie.x-Le)+","+ie.yh+"h"+2*Le+"m-"+Le+",0V"+ie.ys,ie.noYS||(X+="m-"+Le+",0h"+2*Le),k=!ft.size(),k?ft=Se.append("path").style("vector-effect",P?"none":"non-scaling-stroke").classed("yerror",!0):j&&(ft=ft.transition().duration(d.duration).ease(d.easing)),ft.attr("d",X)}else ft.remove();var nt=Se.select("path.xerror");if(B.visible&&c(ie.y)&&c(ie.xh)&&c(ie.xs)){var Ze=(B.copy_ystyle?S:B).width;X="M"+ie.xh+","+(ie.y-Ze)+"v"+2*Ze+"m0,-"+Ze+"H"+ie.xs,ie.noXS||(X+="m0,-"+Ze+"v"+2*Ze),k=!nt.size(),k?nt=Se.append("path").style("vector-effect",P?"none":"non-scaling-stroke").classed("xerror",!0):j&&(nt=nt.transition().duration(d.duration).ease(d.easing)),nt.attr("d",X)}else nt.remove()}})}})};function y(x,w,A){var d={x:w.c2p(x.x),y:A.c2p(x.y)};return x.yh!==void 0&&(d.yh=A.c2p(x.yh),d.ys=A.c2p(x.ys),c(d.ys)||(d.noYS=!0,d.ys=A.c2p(x.ys,!0))),x.xh!==void 0&&(d.xh=w.c2p(x.xh),d.xs=w.c2p(x.xs),c(d.xs)||(d.noXS=!0,d.xs=w.c2p(x.xs,!0))),d}}),Wb=t((Ue,ve)=>{var v=l(),c=sa();ve.exports=function(h){h.each(function(_){var y=_[0].trace,x=y.error_y||{},w=y.error_x||{},A=v.select(this);A.selectAll("path.yerror").style("stroke-width",x.thickness+"px").call(c.stroke,x.color),w.copy_ystyle&&(w=x),A.selectAll("path.xerror").style("stroke-width",w.thickness+"px").call(c.stroke,w.color)})}}),V_=t((Ue,ve)=>{var v=Re(),c=Um().overrideAll,h=jx(),_={error_x:v.extendFlat({},h),error_y:v.extendFlat({},h)};delete _.error_x.copy_zstyle,delete _.error_y.copy_zstyle,delete _.error_y.copy_ystyle;var y={error_x:v.extendFlat({},h),error_y:v.extendFlat({},h),error_z:v.extendFlat({},h)};delete y.error_x.copy_ystyle,delete y.error_y.copy_ystyle,delete y.error_z.copy_ystyle,delete y.error_z.copy_zstyle,ve.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:_,bar:_,histogram:_,scatter3d:c(y,"calc","nested"),scattergl:c(_,"calc","nested")}},supplyDefaults:Gb(),calc:Q3(),makeComputeError:e_(),plot:M2(),style:Wb(),hoverInfo:x};function x(w,A,d){(A.error_y||{}).visible&&(d.yerr=w.yh-w.y,A.error_y.symmetric||(d.yerrneg=w.y-w.ys)),(A.error_x||{}).visible&&(d.xerr=w.xh-w.x,A.error_x.symmetric||(d.xerrneg=w.x-w.xs))}}),H_=t((Ue,ve)=>{ve.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}}),e5=t((Ue,ve)=>{var v=l(),c=wt(),h=lg(),_=p1(),y=km(),x=Km(),w=Re(),A=w.strTranslate,d=bt().extendFlat,k=W1(),T=Y0(),L=sa(),j=Q0(),P=j1(),N=ng().flipScale,O=U_(),B=Ob(),S=o0(),D=$1(),z=D.LINE_SPACING,H=D.FROM_TL,Y=D.FROM_BR,ht=H_().cn;function Se(Ze){var rt=Ze._fullLayout,dt=rt._infolayer.selectAll("g."+ht.colorbar).data(ie(Ze),function(pt){return pt._id});dt.enter().append("g").attr("class",function(pt){return pt._id}).classed(ht.colorbar,!0),dt.each(function(pt){var se=v.select(this);w.ensureSingle(se,"rect",ht.cbbg),w.ensureSingle(se,"g",ht.cbfills),w.ensureSingle(se,"g",ht.cblines),w.ensureSingle(se,"g",ht.cbaxis,function(xt){xt.classed(ht.crisp,!0)}),w.ensureSingle(se,"g",ht.cbtitleunshift,function(xt){xt.append("g").classed(ht.cbtitle,!0)}),w.ensureSingle(se,"rect",ht.cboutline);var gt=X(se,pt,Ze);gt&&gt.then&&(Ze._promises||[]).push(gt),Ze._context.edits.colorbarPosition&&ft(se,pt,Ze)}),dt.exit().each(function(pt){h.autoMargin(Ze,pt._id)}).remove(),dt.order()}function ie(Ze){var rt=Ze._fullLayout,dt=Ze.calcdata,pt=[],se,gt,xt,Nt;function Rt(G){return d(G,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function Pt(){typeof Nt.calc=="function"?Nt.calc(Ze,xt,se):(se._fillgradient=gt.reversescale?N(gt.colorscale):gt.colorscale,se._zrange=[gt[Nt.min],gt[Nt.max]])}for(var xn=0;xn<dt.length;xn++){var oa=dt[xn];if(xt=oa[0].trace,!!xt._module){var jo=xt._module.colorbar;if(xt.visible===!0&&jo)for(var lt=Array.isArray(jo),ut=lt?jo:[jo],$=0;$<ut.length;$++){Nt=ut[$];var yt=Nt.container;gt=yt?xt[yt]:xt,gt&&gt.showscale&&(se=Rt(gt.colorbar),se._id="cb"+xt.uid+(lt&&yt?"-"+yt:""),se._traceIndex=xt.index,se._propPrefix=(yt?yt+".":"")+"colorbar.",se._meta=xt._meta,Pt(),pt.push(se))}}}for(var Lt in rt._colorAxes)if(gt=rt[Lt],gt.showscale){var ke=rt._colorAxes[Lt];se=Rt(gt.colorbar),se._id="cb"+Lt,se._propPrefix=Lt+".colorbar.",se._meta=rt._meta,Nt={min:"cmin",max:"cmax"},ke[0]!=="heatmap"&&(xt=ke[1],Nt.calc=xt._module.colorbar.calc),Pt(),pt.push(se)}return pt}function X(Ze,rt,dt){var pt=rt.orientation==="v",se=rt.len,gt=rt.lenmode,xt=rt.thickness,Nt=rt.thicknessmode,Rt=rt.outlinewidth,Pt=rt.borderwidth,xn=rt.bgcolor,oa=rt.xanchor,jo=rt.yanchor,lt=rt.xpad,ut=rt.ypad,$=rt.x,yt=pt?rt.y:1-rt.y,Lt=rt.yref==="paper",ke=rt.xref==="paper",G=dt._fullLayout,ne=G._size,et=rt._fillcolor,ct=rt._line,kt=rt.title,Gt=kt.side,$t=rt._zrange||v.extent((typeof et=="function"?et:ct.color).domain()),Ko=typeof ct.color=="function"?ct.color:function(){return ct.color},Up=typeof et=="function"?et:function(){return et},e0=rt._levels,E0=Le(dt,rt,$t),m0=E0.fill,f0=E0.line,la=Math.round(xt*(Nt==="fraction"?pt?ne.w:ne.h:1)),$o=la/(pt?ne.w:ne.h),jt=Math.round(se*(gt==="fraction"?pt?ne.h:ne.w:1)),Fp=jt/(pt?ne.h:ne.w),i0=ke?ne.w:dt._fullLayout.width,b0=Lt?ne.h:dt._fullLayout.height,O0=Math.round(pt?$*i0+lt:yt*b0+ut),C0={center:.5,right:1}[oa]||0,I0={top:1,middle:.5}[jo]||0,V0=pt?$-C0*$o:yt-I0*$o,H0=pt?yt-I0*Fp:$-C0*Fp,im=Math.round(pt?b0*(1-H0):i0*H0);rt._lenFrac=Fp,rt._thickFrac=$o,rt._uFrac=V0,rt._vFrac=H0;var k0=rt._axis=nt(dt,rt,$t);k0.position=$o+(pt?$+lt/ne.w:yt+ut/ne.h);var fm=["top","bottom"].indexOf(Gt)!==-1;if(pt&&fm&&(k0.title.side=Gt,k0.titlex=$+lt/ne.w,k0.titley=H0+(kt.side==="top"?Fp-ut/ne.h:ut/ne.h)),!pt&&!fm&&(k0.title.side=Gt,k0.titley=yt+ut/ne.h,k0.titlex=H0+lt/ne.w),ct.color&&rt.tickmode==="auto"){k0.tickmode="linear",k0.tick0=e0.start;var Tm=e0.size,om=w.constrain(jt/50,4,15)+1,Rm=($t[1]-$t[0])/((rt.nticks||om)*Tm);if(Rm>1){var ci=Math.pow(10,Math.floor(Math.log(Rm)/Math.LN10));Tm*=ci*w.roundUp(Rm/ci,[2,5,10]),(Math.abs(e0.start)/e0.size+1e-6)%1<2e-6&&(k0.tick0=0)}k0.dtick=Tm}k0.domain=pt?[H0+ut/ne.h,H0+Fp-ut/ne.h]:[H0+lt/ne.w,H0+Fp-lt/ne.w],k0.setScale(),Ze.attr("transform",A(Math.round(ne.l),Math.round(ne.t)));var Hp=Ze.select("."+ht.cbtitleunshift).attr("transform",A(-Math.round(ne.l),-Math.round(ne.t))),St=k0.ticklabelposition,Ht=k0.title.font.size,Sr=Ze.select("."+ht.cbaxis),Rp,Np=0,Jp=0;function n0($0,Z0){var Am={propContainer:k0,propName:rt._propPrefix+"title.text",traceIndex:rt._traceIndex,_meta:rt._meta,placeholder:G._dfltTitle.colorbar,containerGroup:Ze.select("."+ht.cbtitle)},e1=$0.charAt(0)==="h"?$0.substr(1):"h"+$0;Ze.selectAll("."+e1+",."+e1+"-math-group").remove(),j.draw(dt,$0,d(Am,Z0||{}))}function S0(){if(pt&&fm||!pt&&!fm){var $0,Z0;Gt==="top"&&($0=lt+ne.l+i0*$,Z0=ut+ne.t+b0*(1-H0-Fp)+3+Ht*.75),Gt==="bottom"&&($0=lt+ne.l+i0*$,Z0=ut+ne.t+b0*(1-H0)-3-Ht*.25),Gt==="right"&&(Z0=ut+ne.t+b0*yt+3+Ht*.75,$0=lt+ne.l+i0*H0),n0(k0._id+"title",{attributes:{x:$0,y:Z0,"text-anchor":pt?"start":"middle"}})}}function _0(){if(pt&&!fm||!pt&&fm){var $0=k0.position||0,Z0=k0._offset+k0._length/2,Am,e1;if(Gt==="right")e1=Z0,Am=ne.l+i0*$0+10+Ht*(k0.showticklabels?1:.5);else if(Am=Z0,Gt==="bottom"&&(e1=ne.t+b0*$0+10+(St.indexOf("inside")===-1?k0.tickfont.size:0)+(k0.ticks!=="inside"&&rt.ticklen||0)),Gt==="top"){var E1=kt.text.split("<br>").length;e1=ne.t+b0*$0+10-la-z*Ht*E1}n0((pt?"h":"v")+k0._id+"title",{avoid:{selection:v.select(dt).selectAll("g."+k0._id+"tick"),side:Gt,offsetTop:pt?0:ne.t,offsetLeft:pt?ne.l:0,maxShift:pt?G.width:G.height},attributes:{x:Am,y:e1,"text-anchor":"middle"},transform:{rotate:pt?-90:0,offset:0}})}}function w0(){if(!pt&&!fm||pt&&fm){var $0=Ze.select("."+ht.cbtitle),Z0=$0.select("text"),Am=[-Rt/2,Rt/2],e1=$0.select(".h"+k0._id+"title-math-group").node(),E1=15.6;Z0.node()&&(E1=parseInt(Z0.node().style.fontSize,10)*z);var N1;if(e1?(N1=T.bBox(e1),Jp=N1.width,Np=N1.height,Np>E1&&(Am[1]-=(Np-E1)/2)):Z0.node()&&!Z0.classed(ht.jsPlaceholder)&&(N1=T.bBox(Z0.node()),Jp=N1.width,Np=N1.height),pt){if(Np){if(Np+=5,Gt==="top")k0.domain[1]-=Np/ne.h,Am[1]*=-1;else{k0.domain[0]+=Np/ne.h;var z1=P.lineCount(Z0);Am[1]+=(1-z1)*E1}$0.attr("transform",A(Am[0],Am[1])),k0.setScale()}}else Jp&&(Gt==="right"&&(k0.domain[0]+=(Jp+Ht/2)/ne.w),$0.attr("transform",A(Am[0],Am[1])),k0.setScale())}Ze.selectAll("."+ht.cbfills+",."+ht.cblines).attr("transform",pt?A(0,Math.round(ne.h*(1-k0.domain[1]))):A(Math.round(ne.w*k0.domain[0]),0)),Sr.attr("transform",pt?A(0,Math.round(-ne.t)):A(Math.round(-ne.l),0));var r1=Ze.select("."+ht.cbfills).selectAll("rect."+ht.cbfill).attr("style","").data(m0);r1.enter().append("rect").classed(ht.cbfill,!0).attr("style",""),r1.exit().remove();var Lm=$t.map(k0.c2p).map(Math.round).sort(function(m1,t1){return m1-t1});r1.each(function(m1,t1){var Z1=[t1===0?$t[0]:(m0[t1]+m0[t1-1])/2,t1===m0.length-1?$t[1]:(m0[t1]+m0[t1+1])/2].map(k0.c2p).map(Math.round);pt&&(Z1[1]=w.constrain(Z1[1]+(Z1[1]>Z1[0])?1:-1,Lm[0],Lm[1]));var rg=v.select(this).attr(pt?"x":"y",O0).attr(pt?"y":"x",v.min(Z1)).attr(pt?"width":"height",Math.max(la,2)).attr(pt?"height":"width",Math.max(v.max(Z1)-v.min(Z1),2));if(rt._fillgradient)T.gradient(rg,dt,rt._id,pt?"vertical":"horizontalreversed",rt._fillgradient,"fill");else{var k1=Up(m1).replace("e-","");rg.attr("fill",c(k1).toHexString())}});var T1=Ze.select("."+ht.cblines).selectAll("path."+ht.cbline).data(ct.color&&ct.width?f0:[]);T1.enter().append("path").classed(ht.cbline,!0),T1.exit().remove(),T1.each(function(m1){var t1=O0,Z1=Math.round(k0.c2p(m1))+ct.width/2%1;v.select(this).attr("d","M"+(pt?t1+","+Z1:Z1+","+t1)+(pt?"h":"v")+la).call(T.lineGroupStyle,ct.width,Ko(m1),ct.dash)}),Sr.selectAll("g."+k0._id+"tick,path").remove();var O1=O0+la+(Rt||0)/2-(rt.ticks==="outside"?1:0),y1=y.calcTicks(k0),l1=y.getTickSigns(k0)[2];return y.drawTicks(dt,k0,{vals:k0.ticks==="inside"?y.clipEnds(k0,y1):y1,layer:Sr,path:y.makeTickPath(k0,O1,l1),transFn:y.makeTransTickFn(k0)}),y.drawLabels(dt,k0,{vals:y1,layer:Sr,transFn:y.makeTransTickLabelFn(k0),labelFns:y.makeLabelFns(k0,O1)})}function X0(){var $0,Z0=la+Rt/2;St.indexOf("inside")===-1&&($0=T.bBox(Sr.node()),Z0+=pt?$0.width:$0.height),Rp=Hp.select("text");var Am=0,e1=pt&&Gt==="top",E1=!pt&&Gt==="right",N1=0;if(Rp.node()&&!Rp.classed(ht.jsPlaceholder)){var z1,r1=Hp.select(".h"+k0._id+"title-math-group").node();r1&&(pt&&fm||!pt&&!fm)?($0=T.bBox(r1),Am=$0.width,z1=$0.height):($0=T.bBox(Hp.node()),Am=$0.right-ne.l-(pt?O0:im),z1=$0.bottom-ne.t-(pt?im:O0),!pt&&Gt==="top"&&(Z0+=$0.height,N1=$0.height)),E1&&(Rp.attr("transform",A(Am/2+Ht/2,0)),Am*=2),Z0=Math.max(Z0,pt?Am:z1)}var Lm=(pt?lt:ut)*2+Z0+Pt+Rt/2,T1=0;!pt&&kt.text&&jo==="bottom"&&yt<=0&&(T1=Lm/2,Lm+=T1,N1+=T1),G._hColorbarMoveTitle=T1,G._hColorbarMoveCBTitle=N1;var O1=Pt+Rt,y1=(pt?O0:im)-O1/2-(pt?lt:0),l1=(pt?im:O0)-(pt?jt:ut+N1-T1);Ze.select("."+ht.cbbg).attr("x",y1).attr("y",l1).attr(pt?"width":"height",Math.max(Lm-T1,2)).attr(pt?"height":"width",Math.max(jt+O1,2)).call(L.fill,xn).call(L.stroke,rt.bordercolor).style("stroke-width",Pt);var m1=E1?Math.max(Am-10,0):0;Ze.selectAll("."+ht.cboutline).attr("x",(pt?O0:im+lt)+m1).attr("y",(pt?im+ut-jt:O0)+(e1?Np:0)).attr(pt?"width":"height",Math.max(la,2)).attr(pt?"height":"width",Math.max(jt-(pt?2*ut+Np:2*lt+m1),2)).call(L.stroke,rt.outlinecolor).style({fill:"none","stroke-width":Rt});var t1=pt?C0*Lm:0,Z1=pt?0:(1-I0)*Lm-N1;if(t1=ke?ne.l-t1:-t1,Z1=Lt?ne.t-Z1:-Z1,Ze.attr("transform",A(t1,Z1)),!pt&&(Pt||c(xn).getAlpha()&&!c.equals(G.paper_bgcolor,xn))){var rg=Sr.selectAll("text"),k1=rg[0].length,ug=Ze.select("."+ht.cbbg).node(),yg=T.bBox(ug),Eg=T.getTranslate(Ze),Ig=2;rg.each(function(l0,Bp){var Gp=0,p0=k1-1;if(Bp===Gp||Bp===p0){var a0=T.bBox(this),D0=T.getTranslate(this),z0;if(Bp===p0){var am=a0.right+D0.x,Ym=yg.right+Eg.x+im-Pt-Ig+$;z0=Ym-am,z0>0&&(z0=0)}else if(Bp===Gp){var Hm=a0.left+D0.x,f1=yg.left+Eg.x+im+Pt+Ig;z0=f1-Hm,z0<0&&(z0=0)}z0&&(k1<3?this.setAttribute("transform","translate("+z0+",0) "+this.getAttribute("transform")):this.setAttribute("visibility","hidden"))}})}var Q1={},Rg=H[oa],cg=Y[oa],Vm=H[jo],Xg=Y[jo],Ct=Lm-la;pt?(gt==="pixels"?(Q1.y=yt,Q1.t=jt*Vm,Q1.b=jt*Xg):(Q1.t=Q1.b=0,Q1.yt=yt+se*Vm,Q1.yb=yt-se*Xg),Nt==="pixels"?(Q1.x=$,Q1.l=Lm*Rg,Q1.r=Lm*cg):(Q1.l=Ct*Rg,Q1.r=Ct*cg,Q1.xl=$-xt*Rg,Q1.xr=$+xt*cg)):(gt==="pixels"?(Q1.x=$,Q1.l=jt*Rg,Q1.r=jt*cg):(Q1.l=Q1.r=0,Q1.xl=$+se*Rg,Q1.xr=$-se*cg),Nt==="pixels"?(Q1.y=1-yt,Q1.t=Lm*Vm,Q1.b=Lm*Xg):(Q1.t=Ct*Vm,Q1.b=Ct*Xg,Q1.yt=yt-xt*Vm,Q1.yb=yt+xt*Xg));var Tt=rt.y<.5?"b":"t",jp=rt.x<.5?"l":"r";dt._fullLayout._reservedMargin[rt._id]={};var Zp={r:G.width-y1-t1,l:y1+Q1.r,b:G.height-l1-Z1,t:l1+Q1.b};ke&&Lt?h.autoMargin(dt,rt._id,Q1):ke?dt._fullLayout._reservedMargin[rt._id][Tt]=Zp[Tt]:Lt||pt?dt._fullLayout._reservedMargin[rt._id][jp]=Zp[jp]:dt._fullLayout._reservedMargin[rt._id][Tt]=Zp[Tt]}return w.syncOrAsync([h.previousPromises,S0,w0,_0,h.previousPromises,X0],dt)}function ft(Ze,rt,dt){var pt=rt.orientation==="v",se=dt._fullLayout,gt=se._size,xt,Nt,Rt;x.init({element:Ze.node(),gd:dt,prepFn:function(){xt=Ze.attr("transform"),k(Ze)},moveFn:function(Pt,xn){Ze.attr("transform",xt+A(Pt,xn)),Nt=x.align((pt?rt._uFrac:rt._vFrac)+Pt/gt.w,pt?rt._thickFrac:rt._lenFrac,0,1,rt.xanchor),Rt=x.align((pt?rt._vFrac:1-rt._uFrac)-xn/gt.h,pt?rt._lenFrac:rt._thickFrac,0,1,rt.yanchor);var oa=x.getCursor(Nt,Rt,rt.xanchor,rt.yanchor);k(Ze,oa)},doneFn:function(){if(k(Ze),Nt!==void 0&&Rt!==void 0){var Pt={};Pt[rt._propPrefix+"x"]=Nt,Pt[rt._propPrefix+"y"]=Rt,rt._traceIndex!==void 0?_.call("_guiRestyle",dt,Pt,rt._traceIndex):_.call("_guiRelayout",dt,Pt)}}})}function Le(Ze,rt,dt){var pt=rt._levels,se=[],gt=[],xt,Nt,Rt=pt.end+pt.size/100,Pt=pt.size,xn=1.001*dt[0]-.001*dt[1],oa=1.001*dt[1]-.001*dt[0];for(Nt=0;Nt<1e5&&(xt=pt.start+Nt*Pt,!(Pt>0?xt>=Rt:xt<=Rt));Nt++)xt>xn&&xt<oa&&se.push(xt);if(rt._fillgradient)gt=[0];else if(typeof rt._fillcolor=="function"){var jo=rt._filllevels;if(jo)for(Rt=jo.end+jo.size/100,Pt=jo.size,Nt=0;Nt<1e5&&(xt=jo.start+Nt*Pt,!(Pt>0?xt>=Rt:xt<=Rt));Nt++)xt>dt[0]&&xt<dt[1]&&gt.push(xt);else gt=se.map(function(lt){return lt-pt.size/2}),gt.push(gt[gt.length-1]+pt.size)}else rt._fillcolor&&typeof rt._fillcolor=="string"&&(gt=[0]);return pt.size<0&&(se.reverse(),gt.reverse()),{line:se,fill:gt}}function nt(Ze,rt,dt){var pt=Ze._fullLayout,se=rt.orientation==="v",gt={type:"linear",range:dt,tickmode:rt.tickmode,nticks:rt.nticks,tick0:rt.tick0,dtick:rt.dtick,tickvals:rt.tickvals,ticktext:rt.ticktext,ticks:rt.ticks,ticklen:rt.ticklen,tickwidth:rt.tickwidth,tickcolor:rt.tickcolor,showticklabels:rt.showticklabels,labelalias:rt.labelalias,ticklabelposition:rt.ticklabelposition,ticklabeloverflow:rt.ticklabeloverflow,ticklabelstep:rt.ticklabelstep,tickfont:rt.tickfont,tickangle:rt.tickangle,tickformat:rt.tickformat,exponentformat:rt.exponentformat,minexponent:rt.minexponent,separatethousands:rt.separatethousands,showexponent:rt.showexponent,showtickprefix:rt.showtickprefix,tickprefix:rt.tickprefix,showticksuffix:rt.showticksuffix,ticksuffix:rt.ticksuffix,title:rt.title,showline:!0,anchor:"free",side:se?"right":"bottom",position:1},xt=se?"y":"x",Nt={type:"linear",_id:xt+rt._id},Rt={letter:xt,font:pt.font,noAutotickangles:xt==="y",noHover:!0,noTickson:!0,noTicklabelmode:!0,noInsideRange:!0,calendar:pt.calendar};function Pt(xn,oa){return w.coerce(gt,Nt,S,xn,oa)}return O(gt,Nt,Pt,Rt,pt),B(gt,Nt,Pt,Rt),Nt}ve.exports={draw:Se}}),t5=t((Ue,ve)=>{ve.exports={moduleType:"component",name:"colorbar",attributes:p(),supplyDefaults:Zo(),draw:e5().draw,hasColorbar:J()}}),d2=t((Ue,ve)=>{ve.exports={moduleType:"component",name:"legend",layoutAttributes:H1(),supplyLayoutDefaults:u1(),draw:vg(),style:Pg()}}),h2=t((Ue,ve)=>{ve.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}}),r5=t((Ue,ve)=>{ve.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}}),Xb=t((Ue,ve)=>{var v=p1(),c=Re(),h=c.extendFlat,_=c.extendDeep;function y(w){var A;switch(w){case"themes__thumb":A={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":A={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:A={}}return A}function x(w){var A=["xaxis","yaxis","zaxis"];return A.indexOf(w.slice(0,5))>-1}ve.exports=function(w,A){var d,k=w.data,T=w.layout,L=_([],k),j=_({},T,y(A.tileClass)),P=w._context||{};if(A.width&&(j.width=A.width),A.height&&(j.height=A.height),A.tileClass==="thumbnail"||A.tileClass==="themes__thumb"){j.annotations=[];var N=Object.keys(j);for(d=0;d<N.length;d++)x(N[d])&&(j[N[d]].title={text:""});for(d=0;d<L.length;d++){var O=L[d];O.showscale=!1,O.marker&&(O.marker.showscale=!1),v.traceIs(O,"pie-like")&&(O.textposition="none")}}if(Array.isArray(A.annotations))for(d=0;d<A.annotations.length;d++)j.annotations.push(A.annotations[d]);var B=Object.keys(j).filter(function(Y){return Y.match(/^scene\d*$/)});if(B.length){var S={};for(A.tileClass==="thumbnail"&&(S={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),d=0;d<B.length;d++){var D=j[B[d]];D.xaxis||(D.xaxis={}),D.yaxis||(D.yaxis={}),D.zaxis||(D.zaxis={}),h(D.xaxis,S),h(D.yaxis,S),h(D.zaxis,S),D._scene=null}}var z=document.createElement("div");A.tileClass&&(z.className=A.tileClass);var H={gd:z,td:z,layout:j,data:L,config:{staticPlot:A.staticPlot===void 0?!0:A.staticPlot,plotGlPixelRatio:A.plotGlPixelRatio===void 0?2:A.plotGlPixelRatio,displaylogo:A.displaylogo||!1,showLink:A.showLink||!1,showTips:A.showTips||!1,mapboxAccessToken:P.mapboxAccessToken}};return A.setBackground!=="transparent"&&(H.config.setBackground=A.setBackground||"opaque"),H.gd.defaultLayout=y(A.tileClass),H}}),E2=t((Ue,ve)=>{var v=s0().EventEmitter,c=p1(),h=Re(),_=zx(),y=Xb(),x=Mb(),w=Px();function A(d,k){var T=new v,L=y(d,{format:"png"}),j=L.gd;j.style.position="absolute",j.style.left="-5000px",document.body.appendChild(j);function P(){var O=_.getDelay(j._fullLayout);setTimeout(function(){var B=x(j),S=document.createElement("canvas");S.id=h.randstr(),T=w({format:k.format,width:j._fullLayout.width,height:j._fullLayout.height,canvas:S,emitter:T,svg:B}),T.clean=function(){j&&document.body.removeChild(j)}},O)}var N=_.getRedrawFunc(j);return c.call("_doPlot",j,L.data,L.layout,L.config).then(N).then(P).catch(function(O){T.emit("error",O)}),T}ve.exports=A}),t_=t((Ue,ve)=>{var v=zx(),c={getDelay:v.getDelay,getRedrawFunc:v.getRedrawFunc,clone:Xb(),toSVG:Mb(),svgToImg:Px(),toImage:E2(),downloadImage:Ab()};ve.exports=c}),G_=t(Ue=>{Ue.version=a().version,o(),Kp();var ve=p1(),v=Ue.register=ve.register,c=y2(),h=Object.keys(c);for(y=0;y<h.length;y++)_=h[y],_.charAt(0)!=="_"&&(Ue[_]=c[_]),v({moduleType:"apiMethod",name:_,fn:c[_]});var _,y;v(F_()),v([Y3(),Av(),X2(),Z3(),J2(),Fb(),Uy(),Q2(),J3(),K3(),V_(),Ip(),t5(),d2(),Zv(),qm()]),v([h2(),r5()]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(v(window.PlotlyLocales),delete window.PlotlyLocales),Ue.Icons=Ry();var x=Zv(),w=lg();Ue.Plots={resize:w.resize,graphJson:w.graphJson,sendDataToCloud:w.sendDataToCloud},Ue.Fx={hover:x.hover,unhover:x.unhover,loneHover:x.loneHover,loneUnhover:x.loneUnhover},Ue.Snapshot=t_(),Ue.PlotSchema=Bm()}),r_=t((Ue,ve)=>{ve.exports=G_()}),A2=t((Ue,ve)=>{ve.exports={TEXTPAD:3,eventDataKeys:["value","label"]}}),n_=t((Ue,ve)=>{var v=e2(),c=zv().axisHoverFormat,h=um().hovertemplateAttrs,_=um().texttemplateAttrs,y=R(),x=Ut(),w=A2(),A=h1().pattern,d=bt().extendFlat,k=x({editType:"calc",arrayOk:!0,colorEditType:"style"}),T=v.marker,L=T.line,j=d({},L.width,{dflt:0}),P=d({width:j,editType:"calc"},y("marker.line")),N=d({line:P,editType:"calc"},y("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"},pattern:A,cornerradius:{valType:"any",editType:"calc"}});ve.exports={x:v.x,x0:v.x0,dx:v.dx,y:v.y,y0:v.y0,dy:v.dy,xperiod:v.xperiod,yperiod:v.yperiod,xperiod0:v.xperiod0,yperiod0:v.yperiod0,xperiodalignment:v.xperiodalignment,yperiodalignment:v.yperiodalignment,xhoverformat:c("x"),yhoverformat:c("y"),text:v.text,texttemplate:_({editType:"plot"},{keys:w.eventDataKeys}),hovertext:v.hovertext,hovertemplate:h({},{keys:w.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:d({},k,{}),insidetextfont:d({},k,{}),outsidetextfont:d({},k,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:d({},v.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:N,offsetgroup:v.offsetgroup,alignmentgroup:v.alignmentgroup,selected:{marker:{opacity:v.selected.marker.opacity,color:v.selected.marker.color,editType:"style"},textfont:v.selected.textfont,editType:"style"},unselected:{marker:{opacity:v.unselected.marker.opacity,color:v.unselected.marker.color,editType:"style"},textfont:v.unselected.textfont,editType:"style"},zorder:v.zorder}}),Vx=t((Ue,ve)=>{ve.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},barcornerradius:{valType:"any",editType:"calc"}}}),n5=t((Ue,ve)=>{var v=sa(),c=ng().hasColorscale,h=wi(),_=Re().coercePattern;ve.exports=function(y,x,w,A,d){var k=w("marker.color",A),T=c(y,"marker");T&&h(y,x,d,w,{prefix:"marker.",cLetter:"c"}),w("marker.line.color",v.defaultLine),c(y,"marker.line")&&h(y,x,d,w,{prefix:"marker.line.",cLetter:"c"}),w("marker.line.width"),w("marker.opacity"),_(w,"marker.pattern",k,T),w("selected.marker.color"),w("unselected.marker.color")}}),hx=t((Ue,ve)=>{var v=E(),c=Re(),h=sa(),_=p1(),y=k_(),x=Cb(),w=n5(),A=Rb(),d=n_(),k=c.coerceFont;function T(N,O,B,S){function D(Se,ie){return c.coerce(N,O,d,Se,ie)}var z=y(N,O,S,D);if(!z){O.visible=!1;return}x(N,O,S,D),D("xhoverformat"),D("yhoverformat"),D("zorder"),D("orientation",O.x&&!O.y?"h":"v"),D("base"),D("offset"),D("width"),D("text"),D("hovertext"),D("hovertemplate");var H=D("textposition");P(N,O,S,D,H,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),w(N,O,D,B,S);var Y=(O.marker.line||{}).color,ht=_.getComponentMethod("errorbars","supplyDefaults");ht(N,O,Y||h.defaultLine,{axis:"y"}),ht(N,O,Y||h.defaultLine,{axis:"x",inherit:"y"}),c.coerceSelectionMarkerOpacity(O,D)}function L(N,O){var B,S;function D(Y,ht){return c.coerce(S._input,S,d,Y,ht)}for(var z=0;z<N.length;z++)if(S=N[z],S.type==="bar"){B=S._input;var H=D("marker.cornerradius",O.barcornerradius);S.marker&&(S.marker.cornerradius=j(H)),A(B,S,O,D,O.barmode)}}function j(N){if(v(N)){if(N=+N,N>=0)return N}else if(typeof N=="string"&&(N=N.trim(),N.slice(-1)==="%"&&v(N.slice(0,-1))&&(N=+N.slice(0,-1),N>=0)))return N+"%"}function P(N,O,B,S,D,z){z=z||{};var H=z.moduleHasSelected!==!1,Y=z.moduleHasUnselected!==!1,ht=z.moduleHasConstrain!==!1,Se=z.moduleHasCliponaxis!==!1,ie=z.moduleHasTextangle!==!1,X=z.moduleHasInsideanchor!==!1,ft=!!z.hasPathbar,Le=Array.isArray(D)||D==="auto",nt=Le||D==="inside",Ze=Le||D==="outside";if(nt||Ze){var rt=k(S,"textfont",B.font),dt=c.extendFlat({},rt),pt=N.textfont&&N.textfont.color,se=!pt;if(se&&delete dt.color,k(S,"insidetextfont",dt),ft){var gt=c.extendFlat({},rt);se&&delete gt.color,k(S,"pathbar.textfont",gt)}Ze&&k(S,"outsidetextfont",rt),H&&S("selected.textfont.color"),Y&&S("unselected.textfont.color"),ht&&S("constraintext"),Se&&S("cliponaxis"),ie&&S("textangle"),S("texttemplate")}nt&&X&&S("insidetextanchor")}ve.exports={supplyDefaults:T,crossTraceDefaults:L,handleText:P,validateCornerradius:j}}),qb=t((Ue,ve)=>{var v=p1(),c=km(),h=Re(),_=Vx(),y=hx().validateCornerradius;ve.exports=function(x,w,A){function d(H,Y){return h.coerce(x,w,_,H,Y)}for(var k=!1,T=!1,L=!1,j={},P=d("barmode"),N=P==="group",O=0;O<A.length;O++){var B=A[O];if(v.traceIs(B,"bar")&&B.visible)k=!0;else continue;var S=B.xaxis+B.yaxis;if(N?(j[S]&&(L=!0),j[S]=!0):(S+=B._input.offsetgroup,j.length>0&&!j[S]&&(L=!0),j[S]=!0),B.visible&&B.type==="histogram"){var D=c.getFromId({_fullLayout:w},B[B.orientation==="v"?"xaxis":"yaxis"]);D.type!=="category"&&(T=!0)}}if(!k){delete w.barmode;return}P!=="overlay"&&d("barnorm"),d("bargap",T&&!L?0:.2),d("bargroupgap");var z=d("barcornerradius");w.barcornerradius=y(z)}}),W_=t((Ue,ve)=>{var v=Re();ve.exports=function(c,h){for(var _=0;_<c.length;_++)c[_].i=_;v.mergeArray(h.text,c,"tx"),v.mergeArray(h.hovertext,c,"htx");var y=h.marker;if(y){v.mergeArray(y.opacity,c,"mo",!0),v.mergeArray(y.color,c,"mc");var x=y.line;x&&(v.mergeArray(x.color,c,"mlc"),v.mergeArrayCastPositive(x.width,c,"mlw"))}}}),Hx=t((Ue,ve)=>{var v=km(),c=ax(),h=ng().hasColorscale,_=Ci(),y=W_(),x=n2();ve.exports=function(w,A){var d=v.getFromId(w,A.xaxis||"x"),k=v.getFromId(w,A.yaxis||"y"),T,L,j,P,N,O,B={msUTC:!!(A.base||A.base===0)};A.orientation==="h"?(T=d.makeCalcdata(A,"x",B),j=k.makeCalcdata(A,"y"),P=c(A,k,"y",j),N=!!A.yperiodalignment,O="y"):(T=k.makeCalcdata(A,"y",B),j=d.makeCalcdata(A,"x"),P=c(A,d,"x",j),N=!!A.xperiodalignment,O="x"),L=P.vals;for(var S=Math.min(L.length,T.length),D=new Array(S),z=0;z<S;z++)D[z]={p:L[z],s:T[z]},N&&(D[z].orig_p=j[z],D[z][O+"End"]=P.ends[z],D[z][O+"Start"]=P.starts[z]),A.ids&&(D[z].id=String(A.ids[z]));return h(A,"marker")&&_(w,A,{vals:A.marker.color,containerStr:"marker",cLetter:"c"}),h(A,"marker.line")&&_(w,A,{vals:A.marker.line.color,containerStr:"marker.line",cLetter:"c"}),y(D,A),x(D,A),D}}),fx=t((Ue,ve)=>{var v=l(),c=Re();function h(w,A,d){var k=w._fullLayout,T=k["_"+d+"Text_minsize"];if(T){var L=k.uniformtext.mode==="hide",j;switch(d){case"funnelarea":case"pie":case"sunburst":j="g.slice";break;case"treemap":case"icicle":j="g.slice, g.pathbar";break;default:j="g.points > g.point"}A.selectAll(j).each(function(P){var N=P.transform;if(N){N.scale=L&&N.hide?0:T/N.fontSize;var O=v.select(this).select("text");c.setTransormAndDisplay(O,N)}})}}function _(w,A,d){if(d.uniformtext.mode){var k=x(w),T=d.uniformtext.minsize,L=A.scale*A.fontSize;A.hide=L<T,d[k]=d[k]||1/0,A.hide||(d[k]=Math.min(d[k],Math.max(L,T)))}}function y(w,A){var d=x(w);A[d]=void 0}function x(w){return"_"+w+"Text_minsize"}ve.exports={recordMinTextSize:_,clearMinTextSize:y,resizeText:h}}),f2=t(Ue=>{var ve=E(),v=wt(),c=Re().isArrayOrTypedArray;Ue.coerceString=function(h,_,y){if(typeof _=="string"){if(_||!h.noBlank)return _}else if((typeof _=="number"||_===!0)&&!h.strict)return String(_);return y!==void 0?y:h.dflt},Ue.coerceNumber=function(h,_,y){if(ve(_)){_=+_;var x=h.min,w=h.max,A=x!==void 0&&_<x||w!==void 0&&_>w;if(!A)return _}return y!==void 0?y:h.dflt},Ue.coerceColor=function(h,_,y){return v(_).isValid()?_:y!==void 0?y:h.dflt},Ue.coerceEnumerated=function(h,_,y){return h.coerceNumber&&(_=+_),h.values.indexOf(_)!==-1?_:y!==void 0?y:h.dflt},Ue.getValue=function(h,_){var y;return c(h)?_<h.length&&(y=h[_]):y=h,y},Ue.getLineWidth=function(h,_){var y=0<_.mlw?_.mlw:c(h.marker.line.width)?0:h.marker.line.width;return y}}),a_=t((Ue,ve)=>{var v=l(),c=sa(),h=Y0(),_=Re(),y=p1(),x=fx().resizeText,w=n_(),A=w.textfont,d=w.insidetextfont,k=w.outsidetextfont,T=f2();function L(Se){var ie=v.select(Se).selectAll('g[class^="barlayer"]').selectAll("g.trace");x(Se,ie,"bar");var X=ie.size(),ft=Se._fullLayout;ie.style("opacity",function(Le){return Le[0].trace.opacity}).each(function(Le){(ft.barmode==="stack"&&X>1||ft.bargap===0&&ft.bargroupgap===0&&!Le[0].trace.marker.line.width)&&v.select(this).attr("shape-rendering","crispEdges")}),ie.selectAll("g.points").each(function(Le){var nt=v.select(this),Ze=Le[0].trace;j(nt,Ze,Se)}),y.getComponentMethod("errorbars","style")(ie)}function j(Se,ie,X){h.pointStyle(Se.selectAll("path"),ie,X),P(Se,ie,X)}function P(Se,ie,X){Se.selectAll("text").each(function(ft){var Le=v.select(this),nt=_.ensureUniformFontSize(X,S(Le,ft,ie,X));h.font(Le,nt)})}function N(Se,ie,X){var ft=ie[0].trace;ft.selectedpoints?O(X,ft,Se):(j(X,ft,Se),y.getComponentMethod("errorbars","style")(X))}function O(Se,ie,X){h.selectedPointStyle(Se.selectAll("path"),ie),B(Se.selectAll("text"),ie,X)}function B(Se,ie,X){Se.each(function(ft){var Le=v.select(this),nt;if(ft.selected){nt=_.ensureUniformFontSize(X,S(Le,ft,ie,X));var Ze=ie.selected.textfont&&ie.selected.textfont.color;Ze&&(nt.color=Ze),h.font(Le,nt)}else h.selectedTextStyle(Le,ie)})}function S(Se,ie,X,ft){var Le=ft._fullLayout.font,nt=X.textfont;if(Se.classed("bartext-inside")){var Ze=ht(ie,X);nt=z(X,ie.i,Le,Ze)}else Se.classed("bartext-outside")&&(nt=H(X,ie.i,Le));return nt}function D(Se,ie,X){return Y(A,Se.textfont,ie,X)}function z(Se,ie,X,ft){var Le=D(Se,ie,X),nt=Se._input.textfont===void 0||Se._input.textfont.color===void 0||Array.isArray(Se.textfont.color)&&Se.textfont.color[ie]===void 0;return nt&&(Le={color:c.contrast(ft),family:Le.family,size:Le.size,weight:Le.weight,style:Le.style,variant:Le.variant,textcase:Le.textcase,lineposition:Le.lineposition,shadow:Le.shadow}),Y(d,Se.insidetextfont,ie,Le)}function H(Se,ie,X){var ft=D(Se,ie,X);return Y(k,Se.outsidetextfont,ie,ft)}function Y(Se,ie,X,ft){ie=ie||{};var Le=T.getValue(ie.family,X),nt=T.getValue(ie.size,X),Ze=T.getValue(ie.color,X),rt=T.getValue(ie.weight,X),dt=T.getValue(ie.style,X),pt=T.getValue(ie.variant,X),se=T.getValue(ie.textcase,X),gt=T.getValue(ie.lineposition,X),xt=T.getValue(ie.shadow,X);return{family:T.coerceString(Se.family,Le,ft.family),size:T.coerceNumber(Se.size,nt,ft.size),color:T.coerceColor(Se.color,Ze,ft.color),weight:T.coerceString(Se.weight,rt,ft.weight),style:T.coerceString(Se.style,dt,ft.style),variant:T.coerceString(Se.variant,pt,ft.variant),textcase:T.coerceString(Se.variant,se,ft.textcase),lineposition:T.coerceString(Se.variant,gt,ft.lineposition),shadow:T.coerceString(Se.variant,xt,ft.shadow)}}function ht(Se,ie){return ie.type==="waterfall"?ie[Se.dir].marker.color:Se.mcc||Se.mc||ie.marker.color}ve.exports={style:L,styleTextPoints:P,styleOnSelect:N,getInsideTextFont:z,getOutsideTextFont:H,getBarColor:ht,resizeText:x}}),Yb=t((Ue,ve)=>{var v=l(),c=E(),h=Re(),_=j1(),y=sa(),x=Y0(),w=p1(),A=km().tickText,d=fx(),k=d.recordMinTextSize,T=d.clearMinTextSize,L=a_(),j=f2(),P=A2(),N=n_(),O=N.text,B=N.textposition,S=T0().appendArrayPointValue,D=P.TEXTPAD;function z(Pt){return Pt.id}function H(Pt){if(Pt.ids)return z}function Y(Pt){return(Pt>0)-(Pt<0)}function ht(Pt,xn){return Pt<xn?1:-1}function Se(Pt,xn,oa,jo){var lt=[],ut=[],$=jo?xn:oa,yt=jo?oa:xn;return lt[0]=$.c2p(Pt.s0,!0),ut[0]=yt.c2p(Pt.p0,!0),lt[1]=$.c2p(Pt.s1,!0),ut[1]=yt.c2p(Pt.p1,!0),jo?[lt,ut]:[ut,lt]}function ie(Pt,xn,oa,jo){if(!xn.uniformtext.mode&&X(oa)){var lt;return jo&&(lt=jo()),Pt.transition().duration(oa.duration).ease(oa.easing).each("end",function(){lt&&lt()}).each("interrupt",function(){lt&&lt()})}else return Pt}function X(Pt){return Pt&&Pt.duration>0}function ft(Pt,xn,oa,jo,lt,ut){var $=xn.xaxis,yt=xn.yaxis,Lt=Pt._fullLayout,ke=Pt._context.staticPlot;lt||(lt={mode:Lt.barmode,norm:Lt.barmode,gap:Lt.bargap,groupgap:Lt.bargroupgap},T("bar",Lt));var G=h.makeTraceGroups(jo,oa,"trace bars").each(function(ne){var et=v.select(this),ct=ne[0].trace,kt=ne[0].t,Gt=ct.type==="waterfall",$t=ct.type==="funnel",Ko=ct.type==="histogram",Up=ct.type==="bar",e0=Up||$t,E0=0;Gt&&ct.connector.visible&&ct.connector.mode==="between"&&(E0=ct.connector.line.width/2);var m0=ct.orientation==="h",f0=X(lt),la=h.ensureSingle(et,"g","points"),$o=H(ct),jt=la.selectAll("g.point").data(h.identity,$o);jt.enter().append("g").classed("point",!0),jt.exit().remove(),jt.each(function(i0,b0){var O0=v.select(this),C0=Se(i0,$,yt,m0),I0=C0[0][0],V0=C0[0][1],H0=C0[1][0],im=C0[1][1],k0=(m0?V0-I0:im-H0)===0;k0&&e0&&j.getLineWidth(ct,i0)&&(k0=!1),k0||(k0=!c(I0)||!c(V0)||!c(H0)||!c(im)),i0.isBlank=k0,k0&&(m0?V0=I0:im=H0),E0&&!k0&&(m0?(I0-=ht(I0,V0)*E0,V0+=ht(I0,V0)*E0):(H0-=ht(H0,im)*E0,im+=ht(H0,im)*E0));var fm,Tm;if(ct.type==="waterfall"){if(!k0){var om=ct[i0.dir].marker;fm=om.line.width,Tm=om.color}}else fm=j.getLineWidth(ct,i0),Tm=i0.mc||ct.marker.color;function Rm(O1){var y1=v.round(fm/2%1,2);return lt.gap===0&&lt.groupgap===0?v.round(Math.round(O1)-y1,2):O1}function ci(O1,y1,l1){return l1&&O1===y1?O1:Math.abs(O1-y1)>=2?Rm(O1):O1>y1?Math.ceil(O1):Math.floor(O1)}var Hp=y.opacity(Tm),St=Hp<1||fm>.01?Rm:ci;Pt._context.staticPlot||(I0=St(I0,V0,m0),V0=St(V0,I0,m0),H0=St(H0,im,!m0),im=St(im,H0,!m0));var Ht=m0?$.c2p:yt.c2p,Sr;i0.s0>0?Sr=i0._sMax:i0.s0<0?Sr=i0._sMin:Sr=i0.s1>0?i0._sMax:i0._sMin;function Rp(O1,y1){if(!O1)return 0;var l1=Math.abs(m0?im-H0:V0-I0),m1=Math.abs(m0?V0-I0:im-H0),t1=St(Math.abs(Ht(Sr,!0)-Ht(0,!0))),Z1=i0.hasB?Math.min(l1/2,m1/2):Math.min(l1/2,t1),rg;if(y1==="%"){var k1=Math.min(50,O1);rg=l1*(k1/100)}else rg=O1;return St(Math.max(Math.min(rg,Z1),0))}var Np=Up||Ko?Rp(kt.cornerradiusvalue,kt.cornerradiusform):0,Jp,n0,S0="M"+I0+","+H0+"V"+im+"H"+V0+"V"+H0+"Z",_0=0;if(Np&&i0.s){var w0=Y(i0.s0)===0||Y(i0.s)===Y(i0.s0)?i0.s1:i0.s0;if(_0=St(i0.hasB?0:Math.abs(Ht(Sr,!0)-Ht(w0,!0))),_0<Np){var X0=ht(I0,V0),$0=ht(H0,im),Z0=X0===-$0?1:0;if(m0)if(i0.hasB)Jp="M"+(I0+Np*X0)+","+H0+"A "+Np+","+Np+" 0 0 "+Z0+" "+I0+","+(H0+Np*$0)+"V"+(im-Np*$0)+"A "+Np+","+Np+" 0 0 "+Z0+" "+(I0+Np*X0)+","+im+"H"+(V0-Np*X0)+"A "+Np+","+Np+" 0 0 "+Z0+" "+V0+","+(im-Np*$0)+"V"+(H0+Np*$0)+"A "+Np+","+Np+" 0 0 "+Z0+" "+(V0-Np*X0)+","+H0+"Z";else{n0=Math.abs(V0-I0)+_0;var Am=n0<Np?Np-Math.sqrt(n0*(2*Np-n0)):0,e1=_0>0?Math.sqrt(_0*(2*Np-_0)):0,E1=X0>0?Math.max:Math.min;Jp="M"+I0+","+H0+"V"+(im-Am*$0)+"H"+E1(V0-(Np-_0)*X0,I0)+"A "+Np+","+Np+" 0 0 "+Z0+" "+V0+","+(im-Np*$0-e1)+"V"+(H0+Np*$0+e1)+"A "+Np+","+Np+" 0 0 "+Z0+" "+E1(V0-(Np-_0)*X0,I0)+","+(H0+Am*$0)+"Z"}else if(i0.hasB)Jp="M"+(I0+Np*X0)+","+H0+"A "+Np+","+Np+" 0 0 "+Z0+" "+I0+","+(H0+Np*$0)+"V"+(im-Np*$0)+"A "+Np+","+Np+" 0 0 "+Z0+" "+(I0+Np*X0)+","+im+"H"+(V0-Np*X0)+"A "+Np+","+Np+" 0 0 "+Z0+" "+V0+","+(im-Np*$0)+"V"+(H0+Np*$0)+"A "+Np+","+Np+" 0 0 "+Z0+" "+(V0-Np*X0)+","+H0+"Z";else{n0=Math.abs(im-H0)+_0;var N1=n0<Np?Np-Math.sqrt(n0*(2*Np-n0)):0,z1=_0>0?Math.sqrt(_0*(2*Np-_0)):0,r1=$0>0?Math.max:Math.min;Jp="M"+(I0+N1*X0)+","+H0+"V"+r1(im-(Np-_0)*$0,H0)+"A "+Np+","+Np+" 0 0 "+Z0+" "+(I0+Np*X0-z1)+","+im+"H"+(V0-Np*X0+z1)+"A "+Np+","+Np+" 0 0 "+Z0+" "+(V0-N1*X0)+","+r1(im-(Np-_0)*$0,H0)+"V"+H0+"Z"}}else Jp=S0}else Jp=S0;var Lm=ie(h.ensureSingle(O0,"path"),Lt,lt,ut);if(Lm.style("vector-effect",ke?"none":"non-scaling-stroke").attr("d",isNaN((V0-I0)*(im-H0))||k0&&Pt._context.staticPlot?"M0,0Z":Jp).call(x.setClipUrl,xn.layerClipId,Pt),!Lt.uniformtext.mode&&f0){var T1=x.makePointStyleFns(ct);x.singlePointStyle(i0,Lm,ct,T1,Pt)}Le(Pt,xn,O0,ne,b0,I0,V0,H0,im,Np,_0,lt,ut),xn.layerClipId&&x.hideOutsideRangePoint(i0,O0.select("text"),$,yt,ct.xcalendar,ct.ycalendar)});var Fp=ct.cliponaxis===!1;x.setClipUrl(et,Fp?null:xn.layerClipId,Pt)});w.getComponentMethod("errorbars","plot")(Pt,G,xn,lt)}function Le(Pt,xn,oa,jo,lt,ut,$,yt,Lt,ke,G,ne,et){var ct=xn.xaxis,kt=xn.yaxis,Gt=Pt._fullLayout,$t;function Ko(n0,S0,_0){var w0=h.ensureSingle(n0,"text").text(S0).attr({class:"bartext bartext-"+$t,"text-anchor":"middle","data-notex":1}).call(x.font,_0).call(_.convertToTspans,Pt);return w0}var Up=jo[0].trace,e0=Up.orientation==="h",E0=gt(Gt,jo,lt,ct,kt);$t=xt(Up,lt);var m0=ne.mode==="stack"||ne.mode==="relative",f0=jo[lt],la=!m0||f0._outmost,$o=f0.hasB,jt=ke&&ke-G>D;if(!E0||$t==="none"||(f0.isBlank||ut===$||yt===Lt)&&($t==="auto"||$t==="inside")){oa.select("text").remove();return}var Fp=Gt.font,i0=L.getBarColor(jo[lt],Up),b0=L.getInsideTextFont(Up,lt,Fp,i0),O0=L.getOutsideTextFont(Up,lt,Fp),C0=Up.insidetextanchor||"end",I0=oa.datum();e0?ct.type==="log"&&I0.s0<=0&&(ct.range[0]<ct.range[1]?ut=0:ut=ct._length):kt.type==="log"&&I0.s0<=0&&(kt.range[0]<kt.range[1]?yt=kt._length:yt=0);var V0=Math.abs($-ut),H0=Math.abs(Lt-yt),im=V0-2*D,k0=H0-2*D,fm,Tm,om,Rm,ci;if($t==="outside"&&!la&&!f0.hasB&&($t="inside"),$t==="auto")if(la){$t="inside",ci=h.ensureUniformFontSize(Pt,b0),fm=Ko(oa,E0,ci),Tm=x.bBox(fm.node()),om=Tm.width,Rm=Tm.height;var Hp=om>0&&Rm>0,St;jt?$o?St=nt(im-2*ke,k0,om,Rm,e0)||nt(im,k0-2*ke,om,Rm,e0):e0?St=nt(im-(ke-G),k0,om,Rm,e0)||nt(im,k0-2*(ke-G),om,Rm,e0):St=nt(im,k0-(ke-G),om,Rm,e0)||nt(im-2*(ke-G),k0,om,Rm,e0):St=nt(im,k0,om,Rm,e0),Hp&&St?$t="inside":($t="outside",fm.remove(),fm=null)}else $t="inside";if(!fm){ci=h.ensureUniformFontSize(Pt,$t==="outside"?O0:b0),fm=Ko(oa,E0,ci);var Ht=fm.attr("transform");if(fm.attr("transform",""),Tm=x.bBox(fm.node()),om=Tm.width,Rm=Tm.height,fm.attr("transform",Ht),om<=0||Rm<=0){fm.remove();return}}var Sr=Up.textangle,Rp,Np;$t==="outside"?(Np=Up.constraintext==="both"||Up.constraintext==="outside",Rp=se(ut,$,yt,Lt,Tm,{isHorizontal:e0,constrained:Np,angle:Sr})):(Np=Up.constraintext==="both"||Up.constraintext==="inside",Rp=dt(ut,$,yt,Lt,Tm,{isHorizontal:e0,constrained:Np,angle:Sr,anchor:C0,hasB:$o,r:ke,overhead:G})),Rp.fontSize=ci.size,k(Up.type==="histogram"?"bar":Up.type,Rp,Gt),f0.transform=Rp;var Jp=ie(fm,Gt,ne,et);h.setTransormAndDisplay(Jp,Rp)}function nt(Pt,xn,oa,jo,lt){if(Pt<0||xn<0)return!1;var ut=oa<=Pt&&jo<=xn,$=oa<=xn&&jo<=Pt,yt=lt?Pt>=oa*(xn/jo):xn>=jo*(Pt/oa);return ut||$||yt}function Ze(Pt){return Pt==="auto"?0:Pt}function rt(Pt,xn){var oa=Math.PI/180*xn,jo=Math.abs(Math.sin(oa)),lt=Math.abs(Math.cos(oa));return{x:Pt.width*lt+Pt.height*jo,y:Pt.width*jo+Pt.height*lt}}function dt(Pt,xn,oa,jo,lt,ut){var $=!!ut.isHorizontal,yt=!!ut.constrained,Lt=ut.angle||0,ke=ut.anchor,G=ke==="end",ne=ke==="start",et=ut.leftToRight||0,ct=(et+1)/2,kt=1-ct,Gt=ut.hasB,$t=ut.r,Ko=ut.overhead,Up=lt.width,e0=lt.height,E0=Math.abs(xn-Pt),m0=Math.abs(jo-oa),f0=E0>2*D&&m0>2*D?D:0;E0-=2*f0,m0-=2*f0;var la=Ze(Lt);Lt==="auto"&&!(Up<=E0&&e0<=m0)&&(Up>E0||e0>m0)&&(!(Up>m0||e0>E0)||Up<e0!=E0<m0)&&(la+=90);var $o=rt(lt,la),jt,Fp;if($t&&$t-Ko>D){var i0=pt(Pt,xn,oa,jo,$o,$t,Ko,$,Gt);jt=i0.scale,Fp=i0.pad}else jt=1,yt&&(jt=Math.min(1,E0/$o.x,m0/$o.y)),Fp=0;var b0=lt.left*kt+lt.right*ct,O0=(lt.top+lt.bottom)/2,C0=(Pt+D)*kt+(xn-D)*ct,I0=(oa+jo)/2,V0=0,H0=0;if(ne||G){var im=($?$o.x:$o.y)/2;$t&&(G||Gt)&&(f0+=Fp);var k0=$?ht(Pt,xn):ht(oa,jo);$?ne?(C0=Pt+k0*f0,V0=-k0*im):(C0=xn-k0*f0,V0=k0*im):ne?(I0=oa+k0*f0,H0=-k0*im):(I0=jo-k0*f0,H0=k0*im)}return{textX:b0,textY:O0,targetX:C0,targetY:I0,anchorX:V0,anchorY:H0,scale:jt,rotate:la}}function pt(Pt,xn,oa,jo,lt,ut,$,yt,Lt){var ke=Math.max(0,Math.abs(xn-Pt)-2*D),G=Math.max(0,Math.abs(jo-oa)-2*D),ne=ut-D,et=$?ne-Math.sqrt(ne*ne-(ne-$)*(ne-$)):ne,ct=Lt?ne*2:yt?ne-$:2*et,kt=Lt?ne*2:yt?2*et:ne-$,Gt,$t,Ko,Up,e0;return lt.y/lt.x>=G/(ke-ct)?Up=G/lt.y:lt.y/lt.x<=(G-kt)/ke?Up=ke/lt.x:!Lt&&yt?(Gt=lt.x*lt.x+lt.y*lt.y/4,$t=-2*lt.x*(ke-ne)-lt.y*(G/2-ne),Ko=(ke-ne)*(ke-ne)+(G/2-ne)*(G/2-ne)-ne*ne,Up=(-$t+Math.sqrt($t*$t-4*Gt*Ko))/(2*Gt)):Lt?(Gt=(lt.x*lt.x+lt.y*lt.y)/4,$t=-lt.x*(ke/2-ne)-lt.y*(G/2-ne),Ko=(ke/2-ne)*(ke/2-ne)+(G/2-ne)*(G/2-ne)-ne*ne,Up=(-$t+Math.sqrt($t*$t-4*Gt*Ko))/(2*Gt)):(Gt=lt.x*lt.x/4+lt.y*lt.y,$t=-lt.x*(ke/2-ne)-2*lt.y*(G-ne),Ko=(ke/2-ne)*(ke/2-ne)+(G-ne)*(G-ne)-ne*ne,Up=(-$t+Math.sqrt($t*$t-4*Gt*Ko))/(2*Gt)),Up=Math.min(1,Up),yt?e0=Math.max(0,ne-Math.sqrt(Math.max(0,ne*ne-(ne-(G-lt.y*Up)/2)*(ne-(G-lt.y*Up)/2)))-$):e0=Math.max(0,ne-Math.sqrt(Math.max(0,ne*ne-(ne-(ke-lt.x*Up)/2)*(ne-(ke-lt.x*Up)/2)))-$),{scale:Up,pad:e0}}function se(Pt,xn,oa,jo,lt,ut){var $=!!ut.isHorizontal,yt=!!ut.constrained,Lt=ut.angle||0,ke=lt.width,G=lt.height,ne=Math.abs(xn-Pt),et=Math.abs(jo-oa),ct;$?ct=et>2*D?D:0:ct=ne>2*D?D:0;var kt=1;yt&&(kt=$?Math.min(1,et/G):Math.min(1,ne/ke));var Gt=Ze(Lt),$t=rt(lt,Gt),Ko=($?$t.x:$t.y)/2,Up=(lt.left+lt.right)/2,e0=(lt.top+lt.bottom)/2,E0=(Pt+xn)/2,m0=(oa+jo)/2,f0=0,la=0,$o=$?ht(xn,Pt):ht(oa,jo);return $?(E0=xn-$o*ct,f0=$o*Ko):(m0=jo+$o*ct,la=-$o*Ko),{textX:Up,textY:e0,targetX:E0,targetY:m0,anchorX:f0,anchorY:la,scale:kt,rotate:Gt}}function gt(Pt,xn,oa,jo,lt){var ut=xn[0].trace,$=ut.texttemplate,yt;return $?yt=Nt(Pt,xn,oa,jo,lt):ut.textinfo?yt=Rt(xn,oa,jo,lt):yt=j.getValue(ut.text,oa),j.coerceString(O,yt)}function xt(Pt,xn){var oa=j.getValue(Pt.textposition,xn);return j.coerceEnumerated(B,oa)}function Nt(Pt,xn,oa,jo,lt){var ut=xn[0].trace,$=h.castOption(ut,oa,"texttemplate");if(!$)return"";var yt=ut.type==="histogram",Lt=ut.type==="waterfall",ke=ut.type==="funnel",G=ut.orientation==="h",ne,et,ct,kt;G?(ne="y",et=lt,ct="x",kt=jo):(ne="x",et=jo,ct="y",kt=lt);function Gt(f0){return A(et,et.c2l(f0),!0).text}function $t(f0){return A(kt,kt.c2l(f0),!0).text}var Ko=xn[oa],Up={};Up.label=Ko.p,Up.labelLabel=Up[ne+"Label"]=Gt(Ko.p);var e0=h.castOption(ut,Ko.i,"text");(e0===0||e0)&&(Up.text=e0),Up.value=Ko.s,Up.valueLabel=Up[ct+"Label"]=$t(Ko.s);var E0={};S(E0,ut,Ko.i),(yt||E0.x===void 0)&&(E0.x=G?Up.value:Up.label),(yt||E0.y===void 0)&&(E0.y=G?Up.label:Up.value),(yt||E0.xLabel===void 0)&&(E0.xLabel=G?Up.valueLabel:Up.labelLabel),(yt||E0.yLabel===void 0)&&(E0.yLabel=G?Up.labelLabel:Up.valueLabel),Lt&&(Up.delta=+Ko.rawS||Ko.s,Up.deltaLabel=$t(Up.delta),Up.final=Ko.v,Up.finalLabel=$t(Up.final),Up.initial=Up.final-Up.delta,Up.initialLabel=$t(Up.initial)),ke&&(Up.value=Ko.s,Up.valueLabel=$t(Up.value),Up.percentInitial=Ko.begR,Up.percentInitialLabel=h.formatPercent(Ko.begR),Up.percentPrevious=Ko.difR,Up.percentPreviousLabel=h.formatPercent(Ko.difR),Up.percentTotal=Ko.sumR,Up.percenTotalLabel=h.formatPercent(Ko.sumR));var m0=h.castOption(ut,Ko.i,"customdata");return m0&&(Up.customdata=m0),h.texttemplateString($,Up,Pt._d3locale,E0,Up,ut._meta||{})}function Rt(Pt,xn,oa,jo){var lt=Pt[0].trace,ut=lt.orientation==="h",$=lt.type==="waterfall",yt=lt.type==="funnel";function Lt(m0){var f0=ut?jo:oa;return A(f0,m0,!0).text}function ke(m0){var f0=ut?oa:jo;return A(f0,+m0,!0).text}var G=lt.textinfo,ne=Pt[xn],et=G.split("+"),ct=[],kt,Gt=function(m0){return et.indexOf(m0)!==-1};if(Gt("label")&&ct.push(Lt(Pt[xn].p)),Gt("text")&&(kt=h.castOption(lt,ne.i,"text"),(kt===0||kt)&&ct.push(kt)),$){var $t=+ne.rawS||ne.s,Ko=ne.v,Up=Ko-$t;Gt("initial")&&ct.push(ke(Up)),Gt("delta")&&ct.push(ke($t)),Gt("final")&&ct.push(ke(Ko))}if(yt){Gt("value")&&ct.push(ke(ne.s));var e0=0;Gt("percent initial")&&e0++,Gt("percent previous")&&e0++,Gt("percent total")&&e0++;var E0=e0>1;Gt("percent initial")&&(kt=h.formatPercent(ne.begR),E0&&(kt+=" of initial"),ct.push(kt)),Gt("percent previous")&&(kt=h.formatPercent(ne.difR),E0&&(kt+=" of previous"),ct.push(kt)),Gt("percent total")&&(kt=h.formatPercent(ne.sumR),E0&&(kt+=" of total"),ct.push(kt))}return ct.join("<br>")}ve.exports={plot:ft,toMoveInsideBar:dt}}),i_=t((Ue,ve)=>{var v=Zv(),c=p1(),h=sa(),_=Re().fillText,y=f2().getLineWidth,x=km().hoverLabelText,w=M().BADNUM;function A(T,L,j,P,N){var O=d(T,L,j,P,N);if(O){var B=O.cd,S=B[0].trace,D=B[O.index];return O.color=k(S,D),c.getComponentMethod("errorbars","hoverInfo")(D,S,O),[O]}}function d(T,L,j,P,N){var O=T.cd,B=O[0].trace,S=O[0].t,D=P==="closest",z=B.type==="waterfall",H=T.maxHoverDistance,Y=T.maxSpikeDistance,ht,Se,ie,X,ft,Le,nt;B.orientation==="h"?(ht=j,Se=L,ie="y",X="x",ft=jo,Le=Pt):(ht=L,Se=j,ie="x",X="y",Le=jo,ft=Pt);var Ze=B[ie+"period"],rt=D||Ze;function dt(kt){return se(kt,-1)}function pt(kt){return se(kt,1)}function se(kt,Gt){var $t=kt.w;return kt[ie]+Gt*$t/2}function gt(kt){return kt[ie+"End"]-kt[ie+"Start"]}var xt=D?dt:Ze?function(kt){return kt.p-gt(kt)/2}:function(kt){return Math.min(dt(kt),kt.p-S.bardelta/2)},Nt=D?pt:Ze?function(kt){return kt.p+gt(kt)/2}:function(kt){return Math.max(pt(kt),kt.p+S.bardelta/2)};function Rt(kt,Gt,$t){return N.finiteRange&&($t=0),v.inbox(kt-ht,Gt-ht,$t+Math.min(1,Math.abs(Gt-kt)/nt)-1)}function Pt(kt){return Rt(xt(kt),Nt(kt),H)}function xn(kt){return Rt(dt(kt),pt(kt),Y)}function oa(kt){var Gt=kt[X];if(z){var $t=Math.abs(kt.rawS)||0;Se>0?Gt+=$t:Se<0&&(Gt-=$t)}return Gt}function jo(kt){var Gt=Se,$t=kt.b,Ko=oa(kt);return v.inbox($t-Gt,Ko-Gt,H+(Ko-Gt)/(Ko-$t)-1)}function lt(kt){var Gt=Se,$t=kt.b,Ko=oa(kt);return v.inbox($t-Gt,Ko-Gt,Y+(Ko-Gt)/(Ko-$t)-1)}var ut=T[ie+"a"],$=T[X+"a"];nt=Math.abs(ut.r2c(ut.range[1])-ut.r2c(ut.range[0]));function yt(kt){return(ft(kt)+Le(kt))/2}var Lt=v.getDistanceFunction(P,ft,Le,yt);if(v.getClosest(O,Lt,T),T.index!==!1&&O[T.index].p!==w){rt||(xt=function(kt){return Math.min(dt(kt),kt.p-S.bargroupwidth/2)},Nt=function(kt){return Math.max(pt(kt),kt.p+S.bargroupwidth/2)});var ke=T.index,G=O[ke],ne=B.base?G.b+G.s:G.s;T[X+"0"]=T[X+"1"]=$.c2p(G[X],!0),T[X+"LabelVal"]=ne;var et=S.extents[S.extents.round(G.p)];T[ie+"0"]=ut.c2p(D?xt(G):et[0],!0),T[ie+"1"]=ut.c2p(D?Nt(G):et[1],!0);var ct=G.orig_p!==void 0;return T[ie+"LabelVal"]=ct?G.orig_p:G.p,T.labelLabel=x(ut,T[ie+"LabelVal"],B[ie+"hoverformat"]),T.valueLabel=x($,T[X+"LabelVal"],B[X+"hoverformat"]),T.baseLabel=x($,G.b,B[X+"hoverformat"]),T.spikeDistance=(lt(G)+xn(G))/2,T[ie+"Spike"]=ut.c2p(G.p,!0),_(G,B,T),T.hovertemplate=B.hovertemplate,T}}function k(T,L){var j=L.mcc||T.marker.color,P=L.mlcc||T.marker.line.color,N=y(T,L);if(h.opacity(j))return j;if(h.opacity(P)&&N)return P}ve.exports={hoverPoints:A,hoverOnBars:d,getTraceColor:k}}),o_=t((Ue,ve)=>{ve.exports=function(v,c,h){return v.x="xVal"in c?c.xVal:c.x,v.y="yVal"in c?c.yVal:c.y,c.xa&&(v.xaxis=c.xa),c.ya&&(v.yaxis=c.ya),h.orientation==="h"?(v.label=v.y,v.value=v.x):(v.label=v.x,v.value=v.y),v}}),a5=t((Ue,ve)=>{ve.exports=function(c,h){var _=c.cd,y=c.xaxis,x=c.yaxis,w=_[0].trace,A=w.type==="funnel",d=w.orientation==="h",k=[],T;if(h===!1)for(T=0;T<_.length;T++)_[T].selected=0;else for(T=0;T<_.length;T++){var L=_[T],j="ct"in L?L.ct:v(L,y,x,d,A);h.contains(j,!1,T,c)?(k.push({pointNumber:T,x:y.c2d(L.x),y:x.c2d(L.y)}),L.selected=1):L.selected=0}return k};function v(c,h,_,y,x){var w=h.c2p(y?c.s0:c.p0,!0),A=h.c2p(y?c.s1:c.p1,!0),d=_.c2p(y?c.p0:c.s0,!0),k=_.c2p(y?c.p1:c.s1,!0);return x?[(w+A)/2,(d+k)/2]:y?[A,(d+k)/2]:[(w+A)/2,k]}}),i5=t((Ue,ve)=>{ve.exports={attributes:n_(),layoutAttributes:Vx(),supplyDefaults:hx().supplyDefaults,crossTraceDefaults:hx().crossTraceDefaults,supplyLayoutDefaults:qb(),calc:Hx(),crossTraceCalc:Y2().crossTraceCalc,colorbar:i2(),arraysToCalcdata:W_(),plot:Yb().plot,style:a_().style,styleOnSelect:a_().styleOnSelect,hoverPoints:i_().hoverPoints,eventData:o_(),selectPoints:a5(),moduleType:"trace",name:"bar",basePlotModule:Ix(),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{}}}),C2=t((Ue,ve)=>{ve.exports=i5()}),s_=t((Ue,ve)=>{var v=Mn(),c=Hb().attributes,h=Ut(),_=zp(),y=um().hovertemplateAttrs,x=um().texttemplateAttrs,w=bt().extendFlat,A=h1().pattern,d=h({editType:"plot",arrayOk:!0,colorEditType:"plot"});ve.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:_.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},pattern:A,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:w({},v.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:y({},{keys:["label","color","value","percent","text"]}),texttemplate:x({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:w({},d,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:w({},d,{}),outsidetextfont:w({},d,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:w({},d,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:c({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"}}}),o5=t((Ue,ve)=>{var v=E(),c=Re(),h=s_(),_=Hb().defaults,y=hx().handleText,x=Re().coercePattern;function w(k,T){var L=c.isArrayOrTypedArray(k),j=c.isArrayOrTypedArray(T),P=Math.min(L?k.length:1/0,j?T.length:1/0);if(isFinite(P)||(P=0),P&&j){for(var N,O=0;O<P;O++){var B=T[O];if(v(B)&&B>0){N=!0;break}}N||(P=0)}return{hasLabels:L,hasValues:j,len:P}}function A(k,T,L,j,P){var N=j("marker.line.width");N&&j("marker.line.color",P?void 0:L.paper_bgcolor);var O=j("marker.colors");x(j,"marker.pattern",O),k.marker&&!T.marker.pattern.fgcolor&&(T.marker.pattern.fgcolor=k.marker.colors),T.marker.pattern.bgcolor||(T.marker.pattern.bgcolor=L.paper_bgcolor)}function d(k,T,L,j){function P(Le,nt){return c.coerce(k,T,h,Le,nt)}var N=P("labels"),O=P("values"),B=w(N,O),S=B.len;if(T._hasLabels=B.hasLabels,T._hasValues=B.hasValues,!T._hasLabels&&T._hasValues&&(P("label0"),P("dlabel")),!S){T.visible=!1;return}T._length=S,A(k,T,j,P,!0),P("scalegroup");var D=P("text"),z=P("texttemplate"),H;if(z||(H=P("textinfo",c.isArrayOrTypedArray(D)?"text+percent":"percent")),P("hovertext"),P("hovertemplate"),z||H&&H!=="none"){var Y=P("textposition");y(k,T,j,P,Y,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1});var ht=Array.isArray(Y)||Y==="auto",Se=ht||Y==="outside";Se&&P("automargin"),(Y==="inside"||Y==="auto"||Array.isArray(Y))&&P("insidetextorientation")}else H==="none"&&P("textposition","none");_(T,j,P);var ie=P("hole"),X=P("title.text");if(X){var ft=P("title.position",ie?"middle center":"top center");!ie&&ft==="middle center"&&(T.title.position="top center"),c.coerceFont(P,"title.font",j.font)}P("sort"),P("direction"),P("rotation"),P("pull")}ve.exports={handleLabelsAndValues:w,handleMarkerDefaults:A,supplyDefaults:d}}),X_=t((Ue,ve)=>{ve.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}}),$b=t((Ue,ve)=>{var v=Re(),c=X_();ve.exports=function(h,_){function y(x,w){return v.coerce(h,_,c,x,w)}y("hiddenlabels"),y("piecolorway",_.colorway),y("extendpiecolors")}}),Xy=t((Ue,ve)=>{var v=E(),c=wt(),h=sa(),_={};function y(d,k){var T=[],L=d._fullLayout,j=L.hiddenlabels||[],P=k.labels,N=k.marker.colors||[],O=k.values,B=k._length,S=k._hasValues&&B,D,z;if(k.dlabel)for(P=new Array(B),D=0;D<B;D++)P[D]=String(k.label0+D*k.dlabel);var H={},Y=x(L["_"+k.type+"colormap"]),ht=0,Se=!1;for(D=0;D<B;D++){var ie,X,ft;if(S){if(ie=O[D],!v(ie))continue;ie=+ie}else ie=1;X=P[D],(X===void 0||X==="")&&(X=D),X=String(X);var Le=H[X];Le===void 0?(H[X]=T.length,ft=j.indexOf(X)!==-1,ft||(ht+=ie),T.push({v:ie,label:X,color:Y(N[D],X),i:D,pts:[D],hidden:ft})):(Se=!0,z=T[Le],z.v+=ie,z.pts.push(D),z.hidden||(ht+=ie),z.color===!1&&N[D]&&(z.color=Y(N[D],X)))}T=T.filter(function(Ze){return Ze.v>=0});var nt=k.type==="funnelarea"?Se:k.sort;return nt&&T.sort(function(Ze,rt){return rt.v-Ze.v}),T[0]&&(T[0].vTotal=ht),T}function x(d){return function(k,T){return!k||(k=c(k),!k.isValid())?!1:(k=h.addOpacity(k,k.getAlpha()),d[T]||(d[T]=k),k)}}function w(d,k){var T=(k||{}).type;T||(T="pie");var L=d._fullLayout,j=d.calcdata,P=L[T+"colorway"],N=L["_"+T+"colormap"];L["extend"+T+"colors"]&&(P=A(P,_));for(var O=0,B=0;B<j.length;B++){var S=j[B],D=S[0].trace.type;if(D===T)for(var z=0;z<S.length;z++){var H=S[z];H.color===!1&&(N[H.label]?H.color=N[H.label]:(N[H.label]=H.color=P[O%P.length],O++))}}}function A(d,k){var T,L=JSON.stringify(d),j=k[L];if(!j){for(j=d.slice(),T=0;T<d.length;T++)j.push(c(d[T]).lighten(20).toHexString());for(T=0;T<d.length;T++)j.push(c(d[T]).darken(20).toHexString());k[L]=j}return j}ve.exports={calc:y,crossTraceCalc:w,makePullColorFn:x,generateExtendedColors:A}}),lx=t((Ue,ve)=>{var v=T0().appendArrayMultiPointValues;ve.exports=function(c,h){var _={curveNumber:h.index,pointNumbers:c.pts,data:h._input,fullData:h,label:c.label,color:c.color,value:c.v,percent:c.percent,text:c.text,bbox:c.bbox,v:c.v};return c.pts.length===1&&(_.pointNumber=_.i=c.pts[0]),v(_,h,c.pts),h.type==="funnelarea"&&(delete _.v,delete _.i),_}}),Gx=t((Ue,ve)=>{var v=l(),c=lg(),h=Zv(),_=sa(),y=Y0(),x=Re(),w=x.strScale,A=x.strTranslate,d=j1(),k=fx(),T=k.recordMinTextSize,L=k.clearMinTextSize,j=A2().TEXTPAD,P=b1(),N=lx(),O=Re().isValidTextValue;function B(ut,$){var yt=ut._context.staticPlot,Lt=ut._fullLayout,ke=Lt._size;L("pie",Lt),Y($,ut),Rt($,ke);var G=x.makeTraceGroups(Lt._pielayer,$,"trace").each(function(ne){var et=v.select(this),ct=ne[0],kt=ct.trace;xn(ne),et.attr("stroke-linejoin","round"),et.each(function(){var Gt=v.select(this).selectAll("g.slice").data(ne);Gt.enter().append("g").classed("slice",!0),Gt.exit().remove();var $t=[[[],[]],[[],[]]],Ko=!1;Gt.each(function(jt,Fp){if(jt.hidden){v.select(this).selectAll("path,g").remove();return}jt.pointNumber=jt.i,jt.curveNumber=kt.index,$t[jt.pxmid[1]<0?0:1][jt.pxmid[0]<0?0:1].push(jt);var i0=ct.cx,b0=ct.cy,O0=v.select(this),C0=O0.selectAll("path.surface").data([jt]);if(C0.enter().append("path").classed("surface",!0).style({"pointer-events":yt?"none":"all"}),O0.call(D,ut,ne),kt.pull){var I0=+P.castOption(kt.pull,jt.pts)||0;I0>0&&(i0+=I0*jt.pxmid[0],b0+=I0*jt.pxmid[1])}jt.cxFinal=i0,jt.cyFinal=b0;function V0(Rm,ci,Hp,St){var Ht=St*(ci[0]-Rm[0]),Sr=St*(ci[1]-Rm[1]);return"a"+St*ct.r+","+St*ct.r+" 0 "+jt.largeArc+(Hp?" 1 ":" 0 ")+Ht+","+Sr}var H0=kt.hole;if(jt.v===ct.vTotal){var im="M"+(i0+jt.px0[0])+","+(b0+jt.px0[1])+V0(jt.px0,jt.pxmid,!0,1)+V0(jt.pxmid,jt.px0,!0,1)+"Z";H0?C0.attr("d","M"+(i0+H0*jt.px0[0])+","+(b0+H0*jt.px0[1])+V0(jt.px0,jt.pxmid,!1,H0)+V0(jt.pxmid,jt.px0,!1,H0)+"Z"+im):C0.attr("d",im)}else{var k0=V0(jt.px0,jt.px1,!0,1);if(H0){var fm=1-H0;C0.attr("d","M"+(i0+H0*jt.px1[0])+","+(b0+H0*jt.px1[1])+V0(jt.px1,jt.px0,!1,H0)+"l"+fm*jt.px0[0]+","+fm*jt.px0[1]+k0+"Z")}else C0.attr("d","M"+i0+","+b0+"l"+jt.px0[0]+","+jt.px0[1]+k0+"Z")}jo(ut,jt,ct);var Tm=P.castOption(kt.textposition,jt.pts),om=O0.selectAll("g.slicetext").data(jt.text&&Tm!=="none"?[0]:[]);om.enter().append("g").classed("slicetext",!0),om.exit().remove(),om.each(function(){var Rm=x.ensureSingle(v.select(this),"text","",function(Jp){Jp.attr("data-notex",1)}),ci=x.ensureUniformFontSize(ut,Tm==="outside"?z(kt,jt,Lt.font):H(kt,jt,Lt.font));Rm.text(jt.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(y.font,ci).call(d.convertToTspans,ut);var Hp=y.bBox(Rm.node()),St;if(Tm==="outside")St=rt(Hp,jt);else if(St=ht(Hp,jt,ct),Tm==="auto"&&St.scale<1){var Ht=x.ensureUniformFontSize(ut,kt.outsidetextfont);Rm.call(y.font,Ht),Hp=y.bBox(Rm.node()),St=rt(Hp,jt)}var Sr=St.textPosAngle,Rp=Sr===void 0?jt.pxmid:oa(ct.r,Sr);if(St.targetX=i0+Rp[0]*St.rCenter+(St.x||0),St.targetY=b0+Rp[1]*St.rCenter+(St.y||0),lt(St,Hp),St.outside){var Np=St.targetY;jt.yLabelMin=Np-Hp.height/2,jt.yLabelMid=Np,jt.yLabelMax=Np+Hp.height/2,jt.labelExtraX=0,jt.labelExtraY=0,Ko=!0}St.fontSize=ci.size,T(kt.type,St,Lt),ne[Fp].transform=St,x.setTransormAndDisplay(Rm,St)})});var Up=v.select(this).selectAll("g.titletext").data(kt.title.text?[0]:[]);if(Up.enter().append("g").classed("titletext",!0),Up.exit().remove(),Up.each(function(){var jt=x.ensureSingle(v.select(this),"text","",function(b0){b0.attr("data-notex",1)}),Fp=kt.title.text;kt._meta&&(Fp=x.templateString(Fp,kt._meta)),jt.text(Fp).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(y.font,kt.title.font).call(d.convertToTspans,ut);var i0;kt.title.position==="middle center"?i0=dt(ct):i0=pt(ct,ke),jt.attr("transform",A(i0.x,i0.y)+w(Math.min(1,i0.scale))+A(i0.tx,i0.ty))}),Ko&&Nt($t,kt),S(Gt,kt),Ko&&kt.automargin){var e0=y.bBox(et.node()),E0=kt.domain,m0=ke.w*(E0.x[1]-E0.x[0]),f0=ke.h*(E0.y[1]-E0.y[0]),la=(.5*m0-ct.r)/ke.w,$o=(.5*f0-ct.r)/ke.h;c.autoMargin(ut,"pie."+kt.uid+".automargin",{xl:E0.x[0]-la,xr:E0.x[1]+la,yb:E0.y[0]-$o,yt:E0.y[1]+$o,l:Math.max(ct.cx-ct.r-e0.left,0),r:Math.max(e0.right-(ct.cx+ct.r),0),b:Math.max(e0.bottom-(ct.cy+ct.r),0),t:Math.max(ct.cy-ct.r-e0.top,0),pad:5})}})});setTimeout(function(){G.selectAll("tspan").each(function(){var ne=v.select(this);ne.attr("dy")&&ne.attr("dy",ne.attr("dy"))})},0)}function S(ut,$){ut.each(function(yt){var Lt=v.select(this);if(!yt.labelExtraX&&!yt.labelExtraY){Lt.select("path.textline").remove();return}var ke=Lt.select("g.slicetext text");yt.transform.targetX+=yt.labelExtraX,yt.transform.targetY+=yt.labelExtraY,x.setTransormAndDisplay(ke,yt.transform);var G=yt.cxFinal+yt.pxmid[0],ne=yt.cyFinal+yt.pxmid[1],et="M"+G+","+ne,ct=(yt.yLabelMax-yt.yLabelMin)*(yt.pxmid[0]<0?-1:1)/4;if(yt.labelExtraX){var kt=yt.labelExtraX*yt.pxmid[1]/yt.pxmid[0],Gt=yt.yLabelMid+yt.labelExtraY-(yt.cyFinal+yt.pxmid[1]);Math.abs(kt)>Math.abs(Gt)?et+="l"+Gt*yt.pxmid[0]/yt.pxmid[1]+","+Gt+"H"+(G+yt.labelExtraX+ct):et+="l"+yt.labelExtraX+","+kt+"v"+(Gt-kt)+"h"+ct}else et+="V"+(yt.yLabelMid+yt.labelExtraY)+"h"+ct;x.ensureSingle(Lt,"path","textline").call(_.stroke,$.outsidetextfont.color).attr({"stroke-width":Math.min(2,$.outsidetextfont.size/8),d:et,fill:"none"})})}function D(ut,$,yt){var Lt=yt[0],ke=Lt.cx,G=Lt.cy,ne=Lt.trace,et=ne.type==="funnelarea";"_hasHoverLabel"in ne||(ne._hasHoverLabel=!1),"_hasHoverEvent"in ne||(ne._hasHoverEvent=!1),ut.on("mouseover",function(ct){var kt=$._fullLayout,Gt=$._fullData[ne.index];if(!($._dragging||kt.hovermode===!1)){var $t=Gt.hoverinfo;if(Array.isArray($t)&&($t=h.castHoverinfo({hoverinfo:[P.castOption($t,ct.pts)],_module:ne._module},kt,0)),$t==="all"&&($t="label+text+value+percent+name"),Gt.hovertemplate||$t!=="none"&&$t!=="skip"&&$t){var Ko=ct.rInscribed||0,Up=ke+ct.pxmid[0]*(1-Ko),e0=G+ct.pxmid[1]*(1-Ko),E0=kt.separators,m0=[];if($t&&$t.indexOf("label")!==-1&&m0.push(ct.label),ct.text=P.castOption(Gt.hovertext||Gt.text,ct.pts),$t&&$t.indexOf("text")!==-1){var f0=ct.text;x.isValidTextValue(f0)&&m0.push(f0)}ct.value=ct.v,ct.valueLabel=P.formatPieValue(ct.v,E0),$t&&$t.indexOf("value")!==-1&&m0.push(ct.valueLabel),ct.percent=ct.v/Lt.vTotal,ct.percentLabel=P.formatPiePercent(ct.percent,E0),$t&&$t.indexOf("percent")!==-1&&m0.push(ct.percentLabel);var la=Gt.hoverlabel,$o=la.font,jt=[];h.loneHover({trace:ne,x0:Up-Ko*Lt.r,x1:Up+Ko*Lt.r,y:e0,_x0:et?ke+ct.TL[0]:Up-Ko*Lt.r,_x1:et?ke+ct.TR[0]:Up+Ko*Lt.r,_y0:et?G+ct.TL[1]:e0-Ko*Lt.r,_y1:et?G+ct.BL[1]:e0+Ko*Lt.r,text:m0.join("<br>"),name:Gt.hovertemplate||$t.indexOf("name")!==-1?Gt.name:void 0,idealAlign:ct.pxmid[0]<0?"left":"right",color:P.castOption(la.bgcolor,ct.pts)||ct.color,borderColor:P.castOption(la.bordercolor,ct.pts),fontFamily:P.castOption($o.family,ct.pts),fontSize:P.castOption($o.size,ct.pts),fontColor:P.castOption($o.color,ct.pts),nameLength:P.castOption(la.namelength,ct.pts),textAlign:P.castOption(la.align,ct.pts),hovertemplate:P.castOption(Gt.hovertemplate,ct.pts),hovertemplateLabels:ct,eventData:[N(ct,Gt)]},{container:kt._hoverlayer.node(),outerContainer:kt._paper.node(),gd:$,inOut_bbox:jt}),ct.bbox=jt[0],ne._hasHoverLabel=!0}ne._hasHoverEvent=!0,$.emit("plotly_hover",{points:[N(ct,Gt)],event:v.event})}}),ut.on("mouseout",function(ct){var kt=$._fullLayout,Gt=$._fullData[ne.index],$t=v.select(this).datum();ne._hasHoverEvent&&(ct.originalEvent=v.event,$.emit("plotly_unhover",{points:[N($t,Gt)],event:v.event}),ne._hasHoverEvent=!1),ne._hasHoverLabel&&(h.loneUnhover(kt._hoverlayer.node()),ne._hasHoverLabel=!1)}),ut.on("click",function(ct){var kt=$._fullLayout,Gt=$._fullData[ne.index];$._dragging||kt.hovermode===!1||($._hoverdata=[N(ct,Gt)],h.click($,v.event))})}function z(ut,$,yt){var Lt=P.castOption(ut.outsidetextfont.color,$.pts)||P.castOption(ut.textfont.color,$.pts)||yt.color,ke=P.castOption(ut.outsidetextfont.family,$.pts)||P.castOption(ut.textfont.family,$.pts)||yt.family,G=P.castOption(ut.outsidetextfont.size,$.pts)||P.castOption(ut.textfont.size,$.pts)||yt.size,ne=P.castOption(ut.outsidetextfont.weight,$.pts)||P.castOption(ut.textfont.weight,$.pts)||yt.weight,et=P.castOption(ut.outsidetextfont.style,$.pts)||P.castOption(ut.textfont.style,$.pts)||yt.style,ct=P.castOption(ut.outsidetextfont.variant,$.pts)||P.castOption(ut.textfont.variant,$.pts)||yt.variant,kt=P.castOption(ut.outsidetextfont.textcase,$.pts)||P.castOption(ut.textfont.textcase,$.pts)||yt.textcase,Gt=P.castOption(ut.outsidetextfont.lineposition,$.pts)||P.castOption(ut.textfont.lineposition,$.pts)||yt.lineposition,$t=P.castOption(ut.outsidetextfont.shadow,$.pts)||P.castOption(ut.textfont.shadow,$.pts)||yt.shadow;return{color:Lt,family:ke,size:G,weight:ne,style:et,variant:ct,textcase:kt,lineposition:Gt,shadow:$t}}function H(ut,$,yt){var Lt=P.castOption(ut.insidetextfont.color,$.pts);!Lt&&ut._input.textfont&&(Lt=P.castOption(ut._input.textfont.color,$.pts));var ke=P.castOption(ut.insidetextfont.family,$.pts)||P.castOption(ut.textfont.family,$.pts)||yt.family,G=P.castOption(ut.insidetextfont.size,$.pts)||P.castOption(ut.textfont.size,$.pts)||yt.size,ne=P.castOption(ut.insidetextfont.weight,$.pts)||P.castOption(ut.textfont.weight,$.pts)||yt.weight,et=P.castOption(ut.insidetextfont.style,$.pts)||P.castOption(ut.textfont.style,$.pts)||yt.style,ct=P.castOption(ut.insidetextfont.variant,$.pts)||P.castOption(ut.textfont.variant,$.pts)||yt.variant,kt=P.castOption(ut.insidetextfont.textcase,$.pts)||P.castOption(ut.textfont.textcase,$.pts)||yt.textcase,Gt=P.castOption(ut.insidetextfont.lineposition,$.pts)||P.castOption(ut.textfont.lineposition,$.pts)||yt.lineposition,$t=P.castOption(ut.insidetextfont.shadow,$.pts)||P.castOption(ut.textfont.shadow,$.pts)||yt.shadow;return{color:Lt||_.contrast($.color),family:ke,size:G,weight:ne,style:et,variant:ct,textcase:kt,lineposition:Gt,shadow:$t}}function Y(ut,$){for(var yt,Lt,ke=0;ke<ut.length;ke++)if(yt=ut[ke][0],Lt=yt.trace,Lt.title.text){var G=Lt.title.text;Lt._meta&&(G=x.templateString(G,Lt._meta));var ne=y.tester.append("text").attr("data-notex",1).text(G).call(y.font,Lt.title.font).call(d.convertToTspans,$),et=y.bBox(ne.node(),!0);yt.titleBox={width:et.width,height:et.height},ne.remove()}}function ht(ut,$,yt){var Lt=yt.r||$.rpx1,ke=$.rInscribed,G=$.startangle===$.stopangle;if(G)return{rCenter:1-ke,scale:0,rotate:0,textPosAngle:0};var ne=$.ring,et=ne===1&&Math.abs($.startangle-$.stopangle)===Math.PI*2,ct=$.halfangle,kt=$.midangle,Gt=yt.trace.insidetextorientation,$t=Gt==="horizontal",Ko=Gt==="tangential",Up=Gt==="radial",e0=Gt==="auto",E0=[],m0;if(!e0){var f0=function(O0,C0){if(Se($,O0)){var I0=Math.abs(O0-$.startangle),V0=Math.abs(O0-$.stopangle),H0=I0<V0?I0:V0;C0==="tan"?m0=X(ut,Lt,ne,H0,0):m0=ie(ut,Lt,ne,H0,Math.PI/2),m0.textPosAngle=O0,E0.push(m0)}},la;if($t||Ko){for(la=4;la>=-4;la-=2)f0(Math.PI*la,"tan");for(la=4;la>=-4;la-=2)f0(Math.PI*(la+1),"tan")}if($t||Up){for(la=4;la>=-4;la-=2)f0(Math.PI*(la+1.5),"rad");for(la=4;la>=-4;la-=2)f0(Math.PI*(la+.5),"rad")}}if(et||e0||$t){var $o=Math.sqrt(ut.width*ut.width+ut.height*ut.height);if(m0={scale:ke*Lt*2/$o,rCenter:1-ke,rotate:0},m0.textPosAngle=($.startangle+$.stopangle)/2,m0.scale>=1)return m0;E0.push(m0)}(e0||Up)&&(m0=ie(ut,Lt,ne,ct,kt),m0.textPosAngle=($.startangle+$.stopangle)/2,E0.push(m0)),(e0||Ko)&&(m0=X(ut,Lt,ne,ct,kt),m0.textPosAngle=($.startangle+$.stopangle)/2,E0.push(m0));for(var jt=0,Fp=0,i0=0;i0<E0.length;i0++){var b0=E0[i0].scale;if(Fp<b0&&(Fp=b0,jt=i0),!e0&&Fp>=1)break}return E0[jt]}function Se(ut,$){var yt=ut.startangle,Lt=ut.stopangle;return yt>$&&$>Lt||yt<$&&$<Lt}function ie(ut,$,yt,Lt,ke){$=Math.max(0,$-2*j);var G=ut.width/ut.height,ne=nt(G,Lt,$,yt);return{scale:ne*2/ut.height,rCenter:ft(G,ne/$),rotate:Le(ke)}}function X(ut,$,yt,Lt,ke){$=Math.max(0,$-2*j);var G=ut.height/ut.width,ne=nt(G,Lt,$,yt);return{scale:ne*2/ut.width,rCenter:ft(G,ne/$),rotate:Le(ke+Math.PI/2)}}function ft(ut,$){return Math.cos($)-ut*$}function Le(ut){return(180/Math.PI*ut+720)%180-90}function nt(ut,$,yt,Lt){var ke=ut+1/(2*Math.tan($));return yt*Math.min(1/(Math.sqrt(ke*ke+.5)+ke),Lt/(Math.sqrt(ut*ut+Lt/2)+ut))}function Ze(ut,$){return ut.v===$.vTotal&&!$.trace.hole?1:Math.min(1/(1+1/Math.sin(ut.halfangle)),ut.ring/2)}function rt(ut,$){var yt=$.pxmid[0],Lt=$.pxmid[1],ke=ut.width/2,G=ut.height/2;return yt<0&&(ke*=-1),Lt<0&&(G*=-1),{scale:1,rCenter:1,rotate:0,x:ke+Math.abs(G)*(ke>0?1:-1)/2,y:G/(1+yt*yt/(Lt*Lt)),outside:!0}}function dt(ut){var $=Math.sqrt(ut.titleBox.width*ut.titleBox.width+ut.titleBox.height*ut.titleBox.height);return{x:ut.cx,y:ut.cy,scale:ut.trace.hole*ut.r*2/$,tx:0,ty:-ut.titleBox.height/2+ut.trace.title.font.size}}function pt(ut,$){var yt=1,Lt=1,ke,G=ut.trace,ne={x:ut.cx,y:ut.cy},et={tx:0,ty:0};et.ty+=G.title.font.size,ke=xt(G),G.title.position.indexOf("top")!==-1?(ne.y-=(1+ke)*ut.r,et.ty-=ut.titleBox.height):G.title.position.indexOf("bottom")!==-1&&(ne.y+=(1+ke)*ut.r);var ct=se(ut.r,ut.trace.aspectratio),kt=$.w*(G.domain.x[1]-G.domain.x[0])/2;return G.title.position.indexOf("left")!==-1?(kt=kt+ct,ne.x-=(1+ke)*ct,et.tx+=ut.titleBox.width/2):G.title.position.indexOf("center")!==-1?kt*=2:G.title.position.indexOf("right")!==-1&&(kt=kt+ct,ne.x+=(1+ke)*ct,et.tx-=ut.titleBox.width/2),yt=kt/ut.titleBox.width,Lt=gt(ut,$)/ut.titleBox.height,{x:ne.x,y:ne.y,scale:Math.min(yt,Lt),tx:et.tx,ty:et.ty}}function se(ut,$){return ut/($===void 0?1:$)}function gt(ut,$){var yt=ut.trace,Lt=$.h*(yt.domain.y[1]-yt.domain.y[0]);return Math.min(ut.titleBox.height,Lt/2)}function xt(ut){var $=ut.pull;if(!$)return 0;var yt;if(x.isArrayOrTypedArray($))for($=0,yt=0;yt<ut.pull.length;yt++)ut.pull[yt]>$&&($=ut.pull[yt]);return $}function Nt(ut,$){var yt,Lt,ke,G,ne,et,ct,kt,Gt,$t,Ko,Up,e0;function E0($o,jt){return $o.pxmid[1]-jt.pxmid[1]}function m0($o,jt){return jt.pxmid[1]-$o.pxmid[1]}function f0($o,jt){jt||(jt={});var Fp=jt.labelExtraY+(Lt?jt.yLabelMax:jt.yLabelMin),i0=Lt?$o.yLabelMin:$o.yLabelMax,b0=Lt?$o.yLabelMax:$o.yLabelMin,O0=$o.cyFinal+ne($o.px0[1],$o.px1[1]),C0=Fp-i0,I0,V0,H0,im,k0,fm;if(C0*ct>0&&($o.labelExtraY=C0),!!x.isArrayOrTypedArray($.pull))for(V0=0;V0<$t.length;V0++)H0=$t[V0],!(H0===$o||(P.castOption($.pull,$o.pts)||0)>=(P.castOption($.pull,H0.pts)||0))&&(($o.pxmid[1]-H0.pxmid[1])*ct>0?(im=H0.cyFinal+ne(H0.px0[1],H0.px1[1]),C0=im-i0-$o.labelExtraY,C0*ct>0&&($o.labelExtraY+=C0)):(b0+$o.labelExtraY-O0)*ct>0&&(I0=3*et*Math.abs(V0-$t.indexOf($o)),k0=H0.cxFinal+G(H0.px0[0],H0.px1[0]),fm=k0+I0-($o.cxFinal+$o.pxmid[0])-$o.labelExtraX,fm*et>0&&($o.labelExtraX+=fm)))}for(Lt=0;Lt<2;Lt++)for(ke=Lt?E0:m0,ne=Lt?Math.max:Math.min,ct=Lt?1:-1,yt=0;yt<2;yt++){for(G=yt?Math.max:Math.min,et=yt?1:-1,kt=ut[Lt][yt],kt.sort(ke),Gt=ut[1-Lt][yt],$t=Gt.concat(kt),Up=[],Ko=0;Ko<kt.length;Ko++)kt[Ko].yLabelMid!==void 0&&Up.push(kt[Ko]);for(e0=!1,Ko=0;Lt&&Ko<Gt.length;Ko++)if(Gt[Ko].yLabelMid!==void 0){e0=Gt[Ko];break}for(Ko=0;Ko<Up.length;Ko++){var la=Ko&&Up[Ko-1];e0&&!Ko&&(la=e0),f0(Up[Ko],la)}}}function Rt(ut,$){for(var yt=[],Lt=0;Lt<ut.length;Lt++){var ke=ut[Lt][0],G=ke.trace,ne=G.domain,et=$.w*(ne.x[1]-ne.x[0]),ct=$.h*(ne.y[1]-ne.y[0]);G.title.text&&G.title.position!=="middle center"&&(ct-=gt(ke,$));var kt=et/2,Gt=ct/2;G.type==="funnelarea"&&!G.scalegroup&&(Gt/=G.aspectratio),ke.r=Math.min(kt,Gt)/(1+xt(G)),ke.cx=$.l+$.w*(G.domain.x[1]+G.domain.x[0])/2,ke.cy=$.t+$.h*(1-G.domain.y[0])-ct/2,G.title.text&&G.title.position.indexOf("bottom")!==-1&&(ke.cy-=gt(ke,$)),G.scalegroup&&yt.indexOf(G.scalegroup)===-1&&yt.push(G.scalegroup)}Pt(ut,yt)}function Pt(ut,$){for(var yt,Lt,ke,G=0;G<$.length;G++){var ne=1/0,et=$[G];for(Lt=0;Lt<ut.length;Lt++)if(yt=ut[Lt][0],ke=yt.trace,ke.scalegroup===et){var ct;if(ke.type==="pie")ct=yt.r*yt.r;else if(ke.type==="funnelarea"){var kt,Gt;ke.aspectratio>1?(kt=yt.r,Gt=kt/ke.aspectratio):(Gt=yt.r,kt=Gt*ke.aspectratio),kt*=(1+ke.baseratio)/2,ct=kt*Gt}ne=Math.min(ne,ct/yt.vTotal)}for(Lt=0;Lt<ut.length;Lt++)if(yt=ut[Lt][0],ke=yt.trace,ke.scalegroup===et){var $t=ne*yt.vTotal;ke.type==="funnelarea"&&($t/=(1+ke.baseratio)/2,$t/=ke.aspectratio),yt.r=Math.sqrt($t)}}}function xn(ut){var $=ut[0],yt=$.r,Lt=$.trace,ke=P.getRotationAngle(Lt.rotation),G=2*Math.PI/$.vTotal,ne="px0",et="px1",ct,kt,Gt;if(Lt.direction==="counterclockwise"){for(ct=0;ct<ut.length&&ut[ct].hidden;ct++);if(ct===ut.length)return;ke+=G*ut[ct].v,G*=-1,ne="px1",et="px0"}for(Gt=oa(yt,ke),ct=0;ct<ut.length;ct++)kt=ut[ct],!kt.hidden&&(kt[ne]=Gt,kt.startangle=ke,ke+=G*kt.v/2,kt.pxmid=oa(yt,ke),kt.midangle=ke,ke+=G*kt.v/2,Gt=oa(yt,ke),kt.stopangle=ke,kt[et]=Gt,kt.largeArc=kt.v>$.vTotal/2?1:0,kt.halfangle=Math.PI*Math.min(kt.v/$.vTotal,.5),kt.ring=1-Lt.hole,kt.rInscribed=Ze(kt,$))}function oa(ut,$){return[ut*Math.sin($),-ut*Math.cos($)]}function jo(ut,$,yt){var Lt=ut._fullLayout,ke=yt.trace,G=ke.texttemplate,ne=ke.textinfo;if(!G&&ne&&ne!=="none"){var et=ne.split("+"),ct=function(jt){return et.indexOf(jt)!==-1},kt=ct("label"),Gt=ct("text"),$t=ct("value"),Ko=ct("percent"),Up=Lt.separators,e0;if(e0=kt?[$.label]:[],Gt){var E0=P.getFirstFilled(ke.text,$.pts);O(E0)&&e0.push(E0)}$t&&e0.push(P.formatPieValue($.v,Up)),Ko&&e0.push(P.formatPiePercent($.v/yt.vTotal,Up)),$.text=e0.join("<br>")}function m0(jt){return{label:jt.label,value:jt.v,valueLabel:P.formatPieValue(jt.v,Lt.separators),percent:jt.v/yt.vTotal,percentLabel:P.formatPiePercent(jt.v/yt.vTotal,Lt.separators),color:jt.color,text:jt.text,customdata:x.castOption(ke,jt.i,"customdata")}}if(G){var f0=x.castOption(ke,$.i,"texttemplate");if(!f0)$.text="";else{var la=m0($),$o=P.getFirstFilled(ke.text,$.pts);(O($o)||$o==="")&&(la.text=$o),$.text=x.texttemplateString(f0,la,ut._fullLayout._d3locale,la,ke._meta||{})}}}function lt(ut,$){var yt=ut.rotate*Math.PI/180,Lt=Math.cos(yt),ke=Math.sin(yt),G=($.left+$.right)/2,ne=($.top+$.bottom)/2;ut.textX=G*Lt-ne*ke,ut.textY=G*ke+ne*Lt,ut.noCenter=!0}ve.exports={plot:B,formatSliceLabel:jo,transformInsideText:ht,determineInsideTextFont:H,positionTitleOutside:pt,prerenderTitles:Y,layoutAreas:Rt,attachFxHandlers:D,computeTransform:lt}}),Zb=t((Ue,ve)=>{var v=l(),c=gg(),h=fx().resizeText;ve.exports=function(_){var y=_._fullLayout._pielayer.selectAll(".trace");h(_,y,"pie"),y.each(function(x){var w=x[0],A=w.trace,d=v.select(this);d.style({opacity:A.opacity}),d.selectAll("path.surface").each(function(k){v.select(this).call(c,k,A,_)})})}}),s5=t(Ue=>{var ve=lg();Ue.name="pie",Ue.plot=function(v,c,h,_){ve.plotBasePlot(Ue.name,v,c,h,_)},Ue.clean=function(v,c,h,_){ve.cleanBasePlot(Ue.name,v,c,h,_)}}),Wx=t((Ue,ve)=>{ve.exports={attributes:s_(),supplyDefaults:o5().supplyDefaults,supplyLayoutDefaults:$b(),layoutAttributes:X_(),calc:Xy().calc,crossTraceCalc:Xy().crossTraceCalc,plot:Gx().plot,style:Zb(),styleOne:gg(),moduleType:"trace",name:"pie",basePlotModule:s5(),categories:["pie-like","pie","showLegend"],meta:{}}}),Jy=t((Ue,ve)=>{ve.exports=Wx()}),Sv=t((Ue,ve)=>{var v=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable;function _(x){if(x==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(x)}function y(){try{if(!Object.assign)return!1;var x=new String("abc");if(x[5]="de",Object.getOwnPropertyNames(x)[0]==="5")return!1;for(var w={},A=0;A<10;A++)w["_"+String.fromCharCode(A)]=A;var d=Object.getOwnPropertyNames(w).map(function(T){return w[T]});if(d.join("")!=="0123456789")return!1;var k={};return"abcdefghijklmnopqrst".split("").forEach(function(T){k[T]=T}),Object.keys(Object.assign({},k)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}ve.exports=y()?Object.assign:function(x,w){for(var A,d=_(x),k,T=1;T<arguments.length;T++){A=Object(arguments[T]);for(var L in A)c.call(A,L)&&(d[L]=A[L]);if(v){k=v(A);for(var j=0;j<k.length;j++)h.call(A,k[j])&&(d[k[j]]=A[k[j]])}}return d}}),Ly=t((Ue,ve)=>{var v=Sv();function c(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}v(c.prototype,{instance:function(A,d){A=(A||"gregorian").toLowerCase(),d=d||"";var k=this._localCals[A+"-"+d];if(!k&&this.calendars[A]&&(k=new this.calendars[A](d),this._localCals[A+"-"+d]=k),!k)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,A);return k},newDate:function(A,d,k,T,L){return T=(A!=null&&A.year?A.calendar():typeof T=="string"?this.instance(T,L):T)||this.instance(),T.newDate(A,d,k)},substituteDigits:function(A){return function(d){return(d+"").replace(/[0-9]/g,function(k){return A[k]})}},substituteChineseDigits:function(A,d){return function(k){for(var T="",L=0;k>0;){var j=k%10;T=(j===0?"":A[j]+d[L])+T,L++,k=Math.floor(k/10)}return T.indexOf(A[1]+d[1])===0&&(T=T.substr(1)),T||A[0]}}});function h(A,d,k,T){if(this._calendar=A,this._year=d,this._month=k,this._day=T,this._calendar._validateLevel===0&&!this._calendar.isValid(this._year,this._month,this._day))throw(w.local.invalidDate||w.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function _(A,d){return A=""+A,"000000".substring(0,d-A.length)+A}v(h.prototype,{newDate:function(A,d,k){return this._calendar.newDate(A??this,d,k)},year:function(A){return arguments.length===0?this._year:this.set(A,"y")},month:function(A){return arguments.length===0?this._month:this.set(A,"m")},day:function(A){return arguments.length===0?this._day:this.set(A,"d")},date:function(A,d,k){if(!this._calendar.isValid(A,d,k))throw(w.local.invalidDate||w.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=A,this._month=d,this._day=k,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(A,d){return this._calendar.add(this,A,d)},set:function(A,d){return this._calendar.set(this,A,d)},compareTo:function(A){if(this._calendar.name!==A._calendar.name)throw(w.local.differentCalendars||w.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,A._calendar.local.name);var d=this._year!==A._year?this._year-A._year:this._month!==A._month?this.monthOfYear()-A.monthOfYear():this._day-A._day;return d===0?0:d<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(A){return this._calendar.fromJD(A)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(A){return this._calendar.fromJSDate(A)},toString:function(){return(this.year()<0?"-":"")+_(Math.abs(this.year()),4)+"-"+_(this.month(),2)+"-"+_(this.day(),2)}});function y(){this.shortYearCutoff="+10"}v(y.prototype,{_validateLevel:0,newDate:function(A,d,k){return A==null?this.today():(A.year&&(this._validate(A,d,k,w.local.invalidDate||w.regionalOptions[""].invalidDate),k=A.day(),d=A.month(),A=A.year()),new h(this,A,d,k))},today:function(){return this.fromJSDate(new Date)},epoch:function(A){var d=this._validate(A,this.minMonth,this.minDay,w.local.invalidYear||w.regionalOptions[""].invalidYear);return d.year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(A){var d=this._validate(A,this.minMonth,this.minDay,w.local.invalidYear||w.regionalOptions[""].invalidYear);return(d.year()<0?"-":"")+_(Math.abs(d.year()),4)},monthsInYear:function(A){return this._validate(A,this.minMonth,this.minDay,w.local.invalidYear||w.regionalOptions[""].invalidYear),12},monthOfYear:function(A,d){var k=this._validate(A,d,this.minDay,w.local.invalidMonth||w.regionalOptions[""].invalidMonth);return(k.month()+this.monthsInYear(k)-this.firstMonth)%this.monthsInYear(k)+this.minMonth},fromMonthOfYear:function(A,d){var k=(d+this.firstMonth-2*this.minMonth)%this.monthsInYear(A)+this.minMonth;return this._validate(A,k,this.minDay,w.local.invalidMonth||w.regionalOptions[""].invalidMonth),k},daysInYear:function(A){var d=this._validate(A,this.minMonth,this.minDay,w.local.invalidYear||w.regionalOptions[""].invalidYear);return this.leapYear(d)?366:365},dayOfYear:function(A,d,k){var T=this._validate(A,d,k,w.local.invalidDate||w.regionalOptions[""].invalidDate);return T.toJD()-this.newDate(T.year(),this.fromMonthOfYear(T.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(A,d,k){var T=this._validate(A,d,k,w.local.invalidDate||w.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(T))+2)%this.daysInWeek()},extraInfo:function(A,d,k){return this._validate(A,d,k,w.local.invalidDate||w.regionalOptions[""].invalidDate),{}},add:function(A,d,k){return this._validate(A,this.minMonth,this.minDay,w.local.invalidDate||w.regionalOptions[""].invalidDate),this._correctAdd(A,this._add(A,d,k),d,k)},_add:function(A,d,k){if(this._validateLevel++,k==="d"||k==="w"){var T=A.toJD()+d*(k==="w"?this.daysInWeek():1),L=A.calendar().fromJD(T);return this._validateLevel--,[L.year(),L.month(),L.day()]}try{var j=A.year()+(k==="y"?d:0),P=A.monthOfYear()+(k==="m"?d:0),L=A.day(),N=function(S){for(;P<S.minMonth;)j--,P+=S.monthsInYear(j);for(var D=S.monthsInYear(j);P>D-1+S.minMonth;)j++,P-=D,D=S.monthsInYear(j)};k==="y"?(A.month()!==this.fromMonthOfYear(j,P)&&(P=this.newDate(j,A.month(),this.minDay).monthOfYear()),P=Math.min(P,this.monthsInYear(j)),L=Math.min(L,this.daysInMonth(j,this.fromMonthOfYear(j,P)))):k==="m"&&(N(this),L=Math.min(L,this.daysInMonth(j,this.fromMonthOfYear(j,P))));var O=[j,this.fromMonthOfYear(j,P),L];return this._validateLevel--,O}catch(B){throw this._validateLevel--,B}},_correctAdd:function(A,d,k,T){if(!this.hasYearZero&&(T==="y"||T==="m")&&(d[0]===0||A.year()>0!=d[0]>0)){var L={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[T],j=k<0?-1:1;d=this._add(A,k*L[0]+j*L[1],L[2])}return A.date(d[0],d[1],d[2])},set:function(A,d,k){this._validate(A,this.minMonth,this.minDay,w.local.invalidDate||w.regionalOptions[""].invalidDate);var T=k==="y"?d:A.year(),L=k==="m"?d:A.month(),j=k==="d"?d:A.day();return(k==="y"||k==="m")&&(j=Math.min(j,this.daysInMonth(T,L))),A.date(T,L,j)},isValid:function(A,d,k){this._validateLevel++;var T=this.hasYearZero||A!==0;if(T){var L=this.newDate(A,d,this.minDay);T=d>=this.minMonth&&d-this.minMonth<this.monthsInYear(L)&&k>=this.minDay&&k-this.minDay<this.daysInMonth(L)}return this._validateLevel--,T},toJSDate:function(A,d,k){var T=this._validate(A,d,k,w.local.invalidDate||w.regionalOptions[""].invalidDate);return w.instance().fromJD(this.toJD(T)).toJSDate()},fromJSDate:function(A){return this.fromJD(w.instance().fromJSDate(A).toJD())},_validate:function(A,d,k,T){if(A.year){if(this._validateLevel===0&&this.name!==A.calendar().name)throw(w.local.differentCalendars||w.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,A.calendar().local.name);return A}try{if(this._validateLevel++,this._validateLevel===1&&!this.isValid(A,d,k))throw T.replace(/\{0\}/,this.local.name);var L=this.newDate(A,d,k);return this._validateLevel--,L}catch(j){throw this._validateLevel--,j}}});function x(A){this.local=this.regionalOptions[A]||this.regionalOptions[""]}x.prototype=new y,v(x.prototype,{name:"Gregorian",jdEpoch:17214255e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(k){var d=this._validate(k,this.minMonth,this.minDay,w.local.invalidYear||w.regionalOptions[""].invalidYear),k=d.year()+(d.year()<0?1:0);return k%4===0&&(k%100!==0||k%400===0)},weekOfYear:function(A,d,k){var T=this.newDate(A,d,k);return T.add(4-(T.dayOfWeek()||7),"d"),Math.floor((T.dayOfYear()-1)/7)+1},daysInMonth:function(A,d){var k=this._validate(A,d,this.minDay,w.local.invalidMonth||w.regionalOptions[""].invalidMonth);return this.daysPerMonth[k.month()-1]+(k.month()===2&&this.leapYear(k.year())?1:0)},weekDay:function(A,d,k){return(this.dayOfWeek(A,d,k)||7)<6},toJD:function(A,d,k){var T=this._validate(A,d,k,w.local.invalidDate||w.regionalOptions[""].invalidDate);A=T.year(),d=T.month(),k=T.day(),A<0&&A++,d<3&&(d+=12,A--);var L=Math.floor(A/100),j=2-L+Math.floor(L/4);return Math.floor(365.25*(A+4716))+Math.floor(30.6001*(d+1))+k+j-1524.5},fromJD:function(A){var d=Math.floor(A+.5),k=Math.floor((d-186721625e-2)/36524.25);k=d+1+k-Math.floor(k/4);var T=k+1524,L=Math.floor((T-122.1)/365.25),j=Math.floor(365.25*L),P=Math.floor((T-j)/30.6001),N=T-j-Math.floor(P*30.6001),O=P-(P>13.5?13:1),B=L-(O>2.5?4716:4715);return B<=0&&B--,this.newDate(B,O,N)},toJSDate:function(A,d,k){var T=this._validate(A,d,k,w.local.invalidDate||w.regionalOptions[""].invalidDate),L=new Date(T.year(),T.month()-1,T.day());return L.setHours(0),L.setMinutes(0),L.setSeconds(0),L.setMilliseconds(0),L.setHours(L.getHours()>12?L.getHours()+2:0),L},fromJSDate:function(A){return this.newDate(A.getFullYear(),A.getMonth()+1,A.getDate())}});var w=ve.exports=new c;w.cdate=h,w.baseCalendar=y,w.calendars.gregorian=x}),Lx=t(()=>{var Ue=Sv(),ve=Ly();Ue(ve.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),ve.local=ve.regionalOptions[""],Ue(ve.cdate.prototype,{formatDate:function(v,c){return typeof v!="string"&&(c=v,v=""),this._calendar.formatDate(v||"",this,c)}}),Ue(ve.baseCalendar.prototype,{UNIX_EPOCH:ve.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:1440*60,TICKS_EPOCH:ve.instance().jdEpoch,TICKS_PER_DAY:1440*60*1e7,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(v,c,h){if(typeof v!="string"&&(h=c,c=v,v=""),!c)return"";if(c.calendar()!==this)throw ve.local.invalidFormat||ve.regionalOptions[""].invalidFormat;v=v||this.local.dateFormat,h=h||{};for(var _=h.dayNamesShort||this.local.dayNamesShort,y=h.dayNames||this.local.dayNames,x=h.monthNumbers||this.local.monthNumbers,w=h.monthNamesShort||this.local.monthNamesShort,A=h.monthNames||this.local.monthNames,d=h.calculateWeek||this.local.calculateWeek,k=function(H,Y){for(var ht=1;z+ht<v.length&&v.charAt(z+ht)===H;)ht++;return z+=ht-1,Math.floor(ht/(Y||1))>1},T=function(H,Y,ht,Se){var ie=""+Y;if(k(H,Se))for(;ie.length<ht;)ie="0"+ie;return ie},L=function(H,Y,ht,Se){return k(H)?Se[Y]:ht[Y]},j=this,P=function(H){return typeof x=="function"?x.call(j,H,k("m")):B(T("m",H.month(),2))},N=function(H,Y){return Y?typeof A=="function"?A.call(j,H):A[H.month()-j.minMonth]:typeof w=="function"?w.call(j,H):w[H.month()-j.minMonth]},O=this.local.digits,B=function(H){return h.localNumbers&&O?O(H):H},S="",D=!1,z=0;z<v.length;z++)if(D)v.charAt(z)==="'"&&!k("'")?D=!1:S+=v.charAt(z);else switch(v.charAt(z)){case"d":S+=B(T("d",c.day(),2));break;case"D":S+=L("D",c.dayOfWeek(),_,y);break;case"o":S+=T("o",c.dayOfYear(),3);break;case"w":S+=T("w",c.weekOfYear(),2);break;case"m":S+=P(c);break;case"M":S+=N(c,k("M"));break;case"y":S+=k("y",2)?c.year():(c.year()%100<10?"0":"")+c.year()%100;break;case"Y":k("Y",2),S+=c.formatYear();break;case"J":S+=c.toJD();break;case"@":S+=(c.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":S+=(c.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":k("'")?S+="'":D=!0;break;default:S+=v.charAt(z)}return S},parseDate:function(v,c,h){if(c==null)throw ve.local.invalidArguments||ve.regionalOptions[""].invalidArguments;if(c=typeof c=="object"?c.toString():c+"",c==="")return null;v=v||this.local.dateFormat,h=h||{};var _=h.shortYearCutoff||this.shortYearCutoff;_=typeof _!="string"?_:this.today().year()%100+parseInt(_,10);for(var y=h.dayNamesShort||this.local.dayNamesShort,x=h.dayNames||this.local.dayNames,w=h.parseMonth||this.local.parseMonth,A=h.monthNumbers||this.local.monthNumbers,d=h.monthNamesShort||this.local.monthNamesShort,k=h.monthNames||this.local.monthNames,T=-1,L=-1,j=-1,P=-1,N=-1,O=!1,B=!1,S=function(nt,Ze){for(var rt=1;X+rt<v.length&&v.charAt(X+rt)===nt;)rt++;return X+=rt-1,Math.floor(rt/(Ze||1))>1},D=function(nt,Ze){var rt=S(nt,Ze),dt=[2,3,rt?4:2,rt?4:2,10,11,20]["oyYJ@!".indexOf(nt)+1],pt=new RegExp("^-?\\d{1,"+dt+"}"),se=c.substring(ie).match(pt);if(!se)throw(ve.local.missingNumberAt||ve.regionalOptions[""].missingNumberAt).replace(/\{0\}/,ie);return ie+=se[0].length,parseInt(se[0],10)},z=this,H=function(){if(typeof A=="function"){S("m");var nt=A.call(z,c.substring(ie));return ie+=nt.length,nt}return D("m")},Y=function(nt,Ze,rt,dt){for(var pt=S(nt,dt)?rt:Ze,se=0;se<pt.length;se++)if(c.substr(ie,pt[se].length).toLowerCase()===pt[se].toLowerCase())return ie+=pt[se].length,se+z.minMonth;throw(ve.local.unknownNameAt||ve.regionalOptions[""].unknownNameAt).replace(/\{0\}/,ie)},ht=function(){if(typeof k=="function"){var nt=S("M")?k.call(z,c.substring(ie)):d.call(z,c.substring(ie));return ie+=nt.length,nt}return Y("M",d,k)},Se=function(){if(c.charAt(ie)!==v.charAt(X))throw(ve.local.unexpectedLiteralAt||ve.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,ie);ie++},ie=0,X=0;X<v.length;X++)if(B)v.charAt(X)==="'"&&!S("'")?B=!1:Se();else switch(v.charAt(X)){case"d":P=D("d");break;case"D":Y("D",y,x);break;case"o":N=D("o");break;case"w":D("w");break;case"m":j=H();break;case"M":j=ht();break;case"y":var ft=X;O=!S("y",2),X=ft,L=D("y",2);break;case"Y":L=D("Y",2);break;case"J":T=D("J")+.5,c.charAt(ie)==="."&&(ie++,D("J"));break;case"@":T=D("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":T=D("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":ie=c.length;break;case"'":S("'")?Se():B=!0;break;default:Se()}if(ie<c.length)throw ve.local.unexpectedText||ve.regionalOptions[""].unexpectedText;if(L===-1?L=this.today().year():L<100&&O&&(L+=_===-1?1900:this.today().year()-this.today().year()%100-(L<=_?0:100)),typeof j=="string"&&(j=w.call(this,L,j)),N>-1){j=1,P=N;for(var Le=this.daysInMonth(L,j);P>Le;Le=this.daysInMonth(L,j))j++,P-=Le}return T>-1?this.fromJD(T):this.newDate(L,j,P)},determineDate:function(v,c,h,_,y){h&&typeof h!="object"&&(y=_,_=h,h=null),typeof _!="string"&&(y=_,_="");var x=this,w=function(A){try{return x.parseDate(_,A,y)}catch{}A=A.toLowerCase();for(var d=(A.match(/^c/)&&h?h.newDate():null)||x.today(),k=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,T=k.exec(A);T;)d.add(parseInt(T[1],10),T[2]||"d"),T=k.exec(A);return d};return c=c?c.newDate():null,v=v==null?c:typeof v=="string"?w(v):typeof v=="number"?isNaN(v)||v===1/0||v===-1/0?c:x.today().add(v,"d"):x.newDate(v),v}})}),cv=t(()=>{var Ue=Ly(),ve=Sv(),v=Ue.instance();function c(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}c.prototype=new Ue.baseCalendar,ve(c.prototype,{name:"Chinese",jdEpoch:17214255e-1,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(T,L){if(typeof T=="string"){var j=T.match(_);return j?j[0]:""}var P=this._validateYear(T),N=T.month(),O=""+this.toChineseMonth(P,N);return L&&O.length<2&&(O="0"+O),this.isIntercalaryMonth(P,N)&&(O+="i"),O},monthNames:function(T){if(typeof T=="string"){var L=T.match(y);return L?L[0]:""}var j=this._validateYear(T),P=T.month(),N=this.toChineseMonth(j,P),O=["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"][N-1];return this.isIntercalaryMonth(j,P)&&(O="闰"+O),O},monthNamesShort:function(T){if(typeof T=="string"){var L=T.match(x);return L?L[0]:""}var j=this._validateYear(T),P=T.month(),N=this.toChineseMonth(j,P),O=["一","二","三","四","五","六","七","八","九","十","十一","十二"][N-1];return this.isIntercalaryMonth(j,P)&&(O="闰"+O),O},parseMonth:function(T,L){T=this._validateYear(T);var j=parseInt(L),P;if(isNaN(j))L[0]==="闰"&&(P=!0,L=L.substring(1)),L[L.length-1]==="月"&&(L=L.substring(0,L.length-1)),j=1+["一","二","三","四","五","六","七","八","九","十","十一","十二"].indexOf(L);else{var N=L[L.length-1];P=N==="i"||N==="I"}var O=this.toMonthIndex(T,j,P);return O},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(T,L){if(T.year&&(T=T.year()),typeof T!="number"||T<1888||T>2111)throw L.replace(/\{0\}/,this.local.name);return T},toMonthIndex:function(T,L,j){var P=this.intercalaryMonth(T),N=j&&L!==P;if(N||L<1||L>12)throw Ue.local.invalidMonth.replace(/\{0\}/,this.local.name);var O;return P?!j&&L<=P?O=L-1:O=L:O=L-1,O},toChineseMonth:function(T,L){T.year&&(T=T.year(),L=T.month());var j=this.intercalaryMonth(T),P=j?12:11;if(L<0||L>P)throw Ue.local.invalidMonth.replace(/\{0\}/,this.local.name);var N;return j?L<j?N=L+1:N=L:N=L+1,N},intercalaryMonth:function(T){T=this._validateYear(T);var L=w[T-w[0]],j=L>>13;return j},isIntercalaryMonth:function(T,L){T.year&&(T=T.year(),L=T.month());var j=this.intercalaryMonth(T);return!!j&&j===L},leapYear:function(T){return this.intercalaryMonth(T)!==0},weekOfYear:function(T,L,j){var P=this._validateYear(T,Ue.local.invalidyear),N=A[P-A[0]],O=N>>9&4095,B=N>>5&15,S=N&31,D;D=v.newDate(O,B,S),D.add(4-(D.dayOfWeek()||7),"d");var z=this.toJD(T,L,j)-D.toJD();return 1+Math.floor(z/7)},monthsInYear:function(T){return this.leapYear(T)?13:12},daysInMonth:function(T,L){T.year&&(L=T.month(),T=T.year()),T=this._validateYear(T);var j=w[T-w[0]],P=j>>13,N=P?12:11;if(L>N)throw Ue.local.invalidMonth.replace(/\{0\}/,this.local.name);var O=j&1<<12-L?30:29;return O},weekDay:function(T,L,j){return(this.dayOfWeek(T,L,j)||7)<6},toJD:function(T,L,j){var P=this._validate(T,O,j,Ue.local.invalidDate);T=this._validateYear(P.year()),L=P.month(),j=P.day();var N=this.isIntercalaryMonth(T,L),O=this.toChineseMonth(T,L),B=k(T,O,j,N);return v.toJD(B.year,B.month,B.day)},fromJD:function(T){var L=v.fromJD(T),j=d(L.year(),L.month(),L.day()),P=this.toMonthIndex(j.year,j.month,j.isIntercalary);return this.newDate(j.year,P,j.day)},fromString:function(T){var L=T.match(h),j=this._validateYear(+L[1]),P=+L[2],N=!!L[3],O=this.toMonthIndex(j,P,N),B=+L[4];return this.newDate(j,O,B)},add:function(T,L,j){var P=T.year(),N=T.month(),O=this.isIntercalaryMonth(P,N),B=this.toChineseMonth(P,N),S=Object.getPrototypeOf(c.prototype).add.call(this,T,L,j);if(j==="y"){var D=S.year(),z=S.month(),H=this.isIntercalaryMonth(D,B),Y=O&&H?this.toMonthIndex(D,B,!0):this.toMonthIndex(D,B,!1);Y!==z&&S.month(Y)}return S}});var h=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,_=/^\d?\d[iI]?/m,y=/^闰?十?[一二三四五六七八九]?月/m,x=/^闰?十?[一二三四五六七八九]?/m;Ue.calendars.chinese=c;var w=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],A=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904];function d(T,L,j,P){var N,O;if(typeof T=="object")N=T,O=L||{};else{var B=typeof T=="number"&&T>=1888&&T<=2111;if(!B)throw new Error("Solar year outside range 1888-2111");var S=typeof L=="number"&&L>=1&&L<=12;if(!S)throw new Error("Solar month outside range 1 - 12");var D=typeof j=="number"&&j>=1&&j<=31;if(!D)throw new Error("Solar day outside range 1 - 31");N={year:T,month:L,day:j},O={}}var z=A[N.year-A[0]],H=N.year<<9|N.month<<5|N.day;O.year=H>=z?N.year:N.year-1,z=A[O.year-A[0]];var Y=z>>9&4095,ht=z>>5&15,Se=z&31,ie,X=new Date(Y,ht-1,Se),ft=new Date(N.year,N.month-1,N.day);ie=Math.round((ft-X)/(24*3600*1e3));var Le=w[O.year-w[0]],nt;for(nt=0;nt<13;nt++){var Ze=Le&1<<12-nt?30:29;if(ie<Ze)break;ie-=Ze}var rt=Le>>13;return!rt||nt<rt?(O.isIntercalary=!1,O.month=1+nt):nt===rt?(O.isIntercalary=!0,O.month=nt):(O.isIntercalary=!1,O.month=nt),O.day=1+ie,O}function k(T,L,j,P,N){var O,B;if(typeof T=="object")B=T,O=L||{};else{var S=typeof T=="number"&&T>=1888&&T<=2111;if(!S)throw new Error("Lunar year outside range 1888-2111");var D=typeof L=="number"&&L>=1&&L<=12;if(!D)throw new Error("Lunar month outside range 1 - 12");var z=typeof j=="number"&&j>=1&&j<=30;if(!z)throw new Error("Lunar day outside range 1 - 30");var H;typeof P=="object"?(H=!1,O=P):(H=!!P,O={}),B={year:T,month:L,day:j,isIntercalary:H}}var Y;Y=B.day-1;var ht=w[B.year-w[0]],Se=ht>>13,ie;Se&&(B.month>Se||B.isIntercalary)?ie=B.month:ie=B.month-1;for(var X=0;X<ie;X++){var ft=ht&1<<12-X?30:29;Y+=ft}var Le=A[B.year-A[0]],nt=Le>>9&4095,Ze=Le>>5&15,rt=Le&31,dt=new Date(nt,Ze-1,rt+Y);return O.year=dt.getFullYear(),O.month=1+dt.getMonth(),O.day=dt.getDate(),O}}),qv=t(()=>{var Ue=Ly(),ve=Sv();function v(c){this.local=this.regionalOptions[c||""]||this.regionalOptions[""]}v.prototype=new Ue.baseCalendar,ve(v.prototype,{name:"Coptic",jdEpoch:18250295e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(_){var h=this._validate(_,this.minMonth,this.minDay,Ue.local.invalidYear),_=h.year()+(h.year()<0?1:0);return _%4===3||_%4===-1},monthsInYear:function(c){return this._validate(c,this.minMonth,this.minDay,Ue.local.invalidYear||Ue.regionalOptions[""].invalidYear),13},weekOfYear:function(c,h,_){var y=this.newDate(c,h,_);return y.add(-y.dayOfWeek(),"d"),Math.floor((y.dayOfYear()-1)/7)+1},daysInMonth:function(c,h){var _=this._validate(c,h,this.minDay,Ue.local.invalidMonth);return this.daysPerMonth[_.month()-1]+(_.month()===13&&this.leapYear(_.year())?1:0)},weekDay:function(c,h,_){return(this.dayOfWeek(c,h,_)||7)<6},toJD:function(c,h,_){var y=this._validate(c,h,_,Ue.local.invalidDate);return c=y.year(),c<0&&c++,y.day()+(y.month()-1)*30+(c-1)*365+Math.floor(c/4)+this.jdEpoch-1},fromJD:function(c){var h=Math.floor(c)+.5-this.jdEpoch,_=Math.floor((h-Math.floor((h+366)/1461))/365)+1;_<=0&&_--,h=Math.floor(c)+.5-this.newDate(_,1,1).toJD();var y=Math.floor(h/30)+1,x=h-(y-1)*30+1;return this.newDate(_,y,x)}}),Ue.calendars.coptic=v}),My=t(()=>{var Ue=Ly(),ve=Sv();function v(h){this.local=this.regionalOptions[h||""]||this.regionalOptions[""]}v.prototype=new Ue.baseCalendar,ve(v.prototype,{name:"Discworld",jdEpoch:17214255e-1,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(h){return this._validate(h,this.minMonth,this.minDay,Ue.local.invalidYear),!1},monthsInYear:function(h){return this._validate(h,this.minMonth,this.minDay,Ue.local.invalidYear),13},daysInYear:function(h){return this._validate(h,this.minMonth,this.minDay,Ue.local.invalidYear),400},weekOfYear:function(h,_,y){var x=this.newDate(h,_,y);return x.add(-x.dayOfWeek(),"d"),Math.floor((x.dayOfYear()-1)/8)+1},daysInMonth:function(h,_){var y=this._validate(h,_,this.minDay,Ue.local.invalidMonth);return this.daysPerMonth[y.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(h,_,y){var x=this._validate(h,_,y,Ue.local.invalidDate);return(x.day()+1)%8},weekDay:function(h,_,y){var x=this.dayOfWeek(h,_,y);return x>=2&&x<=6},extraInfo:function(h,_,y){var x=this._validate(h,_,y,Ue.local.invalidDate);return{century:c[Math.floor((x.year()-1)/100)+1]||""}},toJD:function(h,_,y){var x=this._validate(h,_,y,Ue.local.invalidDate);return h=x.year()+(x.year()<0?1:0),_=x.month(),y=x.day(),y+(_>1?16:0)+(_>2?(_-2)*32:0)+(h-1)*400+this.jdEpoch-1},fromJD:function(h){h=Math.floor(h+.5)-Math.floor(this.jdEpoch)-1;var _=Math.floor(h/400)+1;h-=(_-1)*400,h+=h>15?16:0;var y=Math.floor(h/32)+1,x=h-(y-1)*32+1;return this.newDate(_<=0?_-1:_,y,x)}});var c={20:"Fruitbat",21:"Anchovy"};Ue.calendars.discworld=v}),q_=t(()=>{var Ue=Ly(),ve=Sv();function v(c){this.local=this.regionalOptions[c||""]||this.regionalOptions[""]}v.prototype=new Ue.baseCalendar,ve(v.prototype,{name:"Ethiopian",jdEpoch:17242205e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(_){var h=this._validate(_,this.minMonth,this.minDay,Ue.local.invalidYear),_=h.year()+(h.year()<0?1:0);return _%4===3||_%4===-1},monthsInYear:function(c){return this._validate(c,this.minMonth,this.minDay,Ue.local.invalidYear||Ue.regionalOptions[""].invalidYear),13},weekOfYear:function(c,h,_){var y=this.newDate(c,h,_);return y.add(-y.dayOfWeek(),"d"),Math.floor((y.dayOfYear()-1)/7)+1},daysInMonth:function(c,h){var _=this._validate(c,h,this.minDay,Ue.local.invalidMonth);return this.daysPerMonth[_.month()-1]+(_.month()===13&&this.leapYear(_.year())?1:0)},weekDay:function(c,h,_){return(this.dayOfWeek(c,h,_)||7)<6},toJD:function(c,h,_){var y=this._validate(c,h,_,Ue.local.invalidDate);return c=y.year(),c<0&&c++,y.day()+(y.month()-1)*30+(c-1)*365+Math.floor(c/4)+this.jdEpoch-1},fromJD:function(c){var h=Math.floor(c)+.5-this.jdEpoch,_=Math.floor((h-Math.floor((h+366)/1461))/365)+1;_<=0&&_--,h=Math.floor(c)+.5-this.newDate(_,1,1).toJD();var y=Math.floor(h/30)+1,x=h-(y-1)*30+1;return this.newDate(_,y,x)}}),Ue.calendars.ethiopian=v}),R2=t(()=>{var Ue=Ly(),ve=Sv();function v(h){this.local=this.regionalOptions[h||""]||this.regionalOptions[""]}v.prototype=new Ue.baseCalendar,ve(v.prototype,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(h){var _=this._validate(h,this.minMonth,this.minDay,Ue.local.invalidYear);return this._leapYear(_.year())},_leapYear:function(h){return h=h<0?h+1:h,c(h*7+1,19)<7},monthsInYear:function(h){return this._validate(h,this.minMonth,this.minDay,Ue.local.invalidYear),this._leapYear(h.year?h.year():h)?13:12},weekOfYear:function(h,_,y){var x=this.newDate(h,_,y);return x.add(-x.dayOfWeek(),"d"),Math.floor((x.dayOfYear()-1)/7)+1},daysInYear:function(h){var _=this._validate(h,this.minMonth,this.minDay,Ue.local.invalidYear);return h=_.year(),this.toJD(h===-1?1:h+1,7,1)-this.toJD(h,7,1)},daysInMonth:function(h,_){return h.year&&(_=h.month(),h=h.year()),this._validate(h,_,this.minDay,Ue.local.invalidMonth),_===12&&this.leapYear(h)||_===8&&c(this.daysInYear(h),10)===5?30:_===9&&c(this.daysInYear(h),10)===3?29:this.daysPerMonth[_-1]},weekDay:function(h,_,y){return this.dayOfWeek(h,_,y)!==6},extraInfo:function(h,_,y){var x=this._validate(h,_,y,Ue.local.invalidDate);return{yearType:(this.leapYear(x)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(x)%10-3]}},toJD:function(h,_,y){var x=this._validate(h,_,y,Ue.local.invalidDate);h=x.year(),_=x.month(),y=x.day();var w=h<=0?h+1:h,A=this.jdEpoch+this._delay1(w)+this._delay2(w)+y+1;if(_<7){for(var d=7;d<=this.monthsInYear(h);d++)A+=this.daysInMonth(h,d);for(var d=1;d<_;d++)A+=this.daysInMonth(h,d)}else for(var d=7;d<_;d++)A+=this.daysInMonth(h,d);return A},_delay1:function(h){var _=Math.floor((235*h-234)/19),y=12084+13753*_,x=_*29+Math.floor(y/25920);return c(3*(x+1),7)<3&&x++,x},_delay2:function(h){var _=this._delay1(h-1),y=this._delay1(h),x=this._delay1(h+1);return x-y===356?2:y-_===382?1:0},fromJD:function(h){h=Math.floor(h)+.5;for(var _=Math.floor((h-this.jdEpoch)*98496/35975351)-1;h>=this.toJD(_===-1?1:_+1,7,1);)_++;for(var y=h<this.toJD(_,1,1)?7:1;h>this.toJD(_,y,this.daysInMonth(_,y));)y++;var x=h-this.toJD(_,y,1)+1;return this.newDate(_,y,x)}});function c(h,_){return h-_*Math.floor(h/_)}Ue.calendars.hebrew=v}),p2=t(()=>{var Ue=Ly(),ve=Sv();function v(c){this.local=this.regionalOptions[c||""]||this.regionalOptions[""]}v.prototype=new Ue.baseCalendar,ve(v.prototype,{name:"Islamic",jdEpoch:19484395e-1,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-khamīs","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(c){var h=this._validate(c,this.minMonth,this.minDay,Ue.local.invalidYear);return(h.year()*11+14)%30<11},weekOfYear:function(c,h,_){var y=this.newDate(c,h,_);return y.add(-y.dayOfWeek(),"d"),Math.floor((y.dayOfYear()-1)/7)+1},daysInYear:function(c){return this.leapYear(c)?355:354},daysInMonth:function(c,h){var _=this._validate(c,h,this.minDay,Ue.local.invalidMonth);return this.daysPerMonth[_.month()-1]+(_.month()===12&&this.leapYear(_.year())?1:0)},weekDay:function(c,h,_){return this.dayOfWeek(c,h,_)!==5},toJD:function(c,h,_){var y=this._validate(c,h,_,Ue.local.invalidDate);return c=y.year(),h=y.month(),_=y.day(),c=c<=0?c+1:c,_+Math.ceil(29.5*(h-1))+(c-1)*354+Math.floor((3+11*c)/30)+this.jdEpoch-1},fromJD:function(c){c=Math.floor(c)+.5;var h=Math.floor((30*(c-this.jdEpoch)+10646)/10631);h=h<=0?h-1:h;var _=Math.min(12,Math.ceil((c-29-this.toJD(h,1,1))/29.5)+1),y=c-this.toJD(h,_,1)+1;return this.newDate(h,_,y)}}),Ue.calendars.islamic=v}),Y_=t(()=>{var Ue=Ly(),ve=Sv();function v(c){this.local=this.regionalOptions[c||""]||this.regionalOptions[""]}v.prototype=new Ue.baseCalendar,ve(v.prototype,{name:"Julian",jdEpoch:17214235e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(_){var h=this._validate(_,this.minMonth,this.minDay,Ue.local.invalidYear),_=h.year()<0?h.year()+1:h.year();return _%4===0},weekOfYear:function(c,h,_){var y=this.newDate(c,h,_);return y.add(4-(y.dayOfWeek()||7),"d"),Math.floor((y.dayOfYear()-1)/7)+1},daysInMonth:function(c,h){var _=this._validate(c,h,this.minDay,Ue.local.invalidMonth);return this.daysPerMonth[_.month()-1]+(_.month()===2&&this.leapYear(_.year())?1:0)},weekDay:function(c,h,_){return(this.dayOfWeek(c,h,_)||7)<6},toJD:function(c,h,_){var y=this._validate(c,h,_,Ue.local.invalidDate);return c=y.year(),h=y.month(),_=y.day(),c<0&&c++,h<=2&&(c--,h+=12),Math.floor(365.25*(c+4716))+Math.floor(30.6001*(h+1))+_-1524.5},fromJD:function(c){var h=Math.floor(c+.5),_=h+1524,y=Math.floor((_-122.1)/365.25),x=Math.floor(365.25*y),w=Math.floor((_-x)/30.6001),A=w-Math.floor(w<14?1:13),d=y-Math.floor(A>2?4716:4715),k=_-x-Math.floor(30.6001*w);return d<=0&&d--,this.newDate(d,A,k)}}),Ue.calendars.julian=v}),l_=t(()=>{var Ue=Ly(),ve=Sv();function v(_){this.local=this.regionalOptions[_||""]||this.regionalOptions[""]}v.prototype=new Ue.baseCalendar,ve(v.prototype,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(_){return this._validate(_,this.minMonth,this.minDay,Ue.local.invalidYear),!1},formatYear:function(_){var y=this._validate(_,this.minMonth,this.minDay,Ue.local.invalidYear);_=y.year();var x=Math.floor(_/400);_=_%400,_+=_<0?400:0;var w=Math.floor(_/20);return x+"."+w+"."+_%20},forYear:function(_){if(_=_.split("."),_.length<3)throw"Invalid Mayan year";for(var y=0,x=0;x<_.length;x++){var w=parseInt(_[x],10);if(Math.abs(w)>19||x>0&&w<0)throw"Invalid Mayan year";y=y*20+w}return y},monthsInYear:function(_){return this._validate(_,this.minMonth,this.minDay,Ue.local.invalidYear),18},weekOfYear:function(_,y,x){return this._validate(_,y,x,Ue.local.invalidDate),0},daysInYear:function(_){return this._validate(_,this.minMonth,this.minDay,Ue.local.invalidYear),360},daysInMonth:function(_,y){return this._validate(_,y,this.minDay,Ue.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(_,y,x){var w=this._validate(_,y,x,Ue.local.invalidDate);return w.day()},weekDay:function(_,y,x){return this._validate(_,y,x,Ue.local.invalidDate),!0},extraInfo:function(_,y,x){var w=this._validate(_,y,x,Ue.local.invalidDate),A=w.toJD(),d=this._toHaab(A),k=this._toTzolkin(A);return{haabMonthName:this.local.haabMonths[d[0]-1],haabMonth:d[0],haabDay:d[1],tzolkinDayName:this.local.tzolkinMonths[k[0]-1],tzolkinDay:k[0],tzolkinTrecena:k[1]}},_toHaab:function(_){_-=this.jdEpoch;var y=c(_+8+340,365);return[Math.floor(y/20)+1,c(y,20)]},_toTzolkin:function(_){return _-=this.jdEpoch,[h(_+20,20),h(_+4,13)]},toJD:function(_,y,x){var w=this._validate(_,y,x,Ue.local.invalidDate);return w.day()+w.month()*20+w.year()*360+this.jdEpoch},fromJD:function(_){_=Math.floor(_)+.5-this.jdEpoch;var y=Math.floor(_/360);_=_%360,_+=_<0?360:0;var x=Math.floor(_/20),w=_%20;return this.newDate(y,x,w)}});function c(_,y){return _-y*Math.floor(_/y)}function h(_,y){return c(_-1,y)+1}Ue.calendars.mayan=v}),D2=t(()=>{var Ue=Ly(),ve=Sv();function v(h){this.local=this.regionalOptions[h||""]||this.regionalOptions[""]}v.prototype=new Ue.baseCalendar;var c=Ue.instance("gregorian");ve(v.prototype,{name:"Nanakshahi",jdEpoch:22576735e-1,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(h){var _=this._validate(h,this.minMonth,this.minDay,Ue.local.invalidYear||Ue.regionalOptions[""].invalidYear);return c.leapYear(_.year()+(_.year()<1?1:0)+1469)},weekOfYear:function(h,_,y){var x=this.newDate(h,_,y);return x.add(1-(x.dayOfWeek()||7),"d"),Math.floor((x.dayOfYear()-1)/7)+1},daysInMonth:function(h,_){var y=this._validate(h,_,this.minDay,Ue.local.invalidMonth);return this.daysPerMonth[y.month()-1]+(y.month()===12&&this.leapYear(y.year())?1:0)},weekDay:function(h,_,y){return(this.dayOfWeek(h,_,y)||7)<6},toJD:function(w,_,y){var x=this._validate(w,_,y,Ue.local.invalidMonth),w=x.year();w<0&&w++;for(var A=x.day(),d=1;d<x.month();d++)A+=this.daysPerMonth[d-1];return A+c.toJD(w+1468,3,13)},fromJD:function(h){h=Math.floor(h+.5);for(var _=Math.floor((h-(this.jdEpoch-1))/366);h>=this.toJD(_+1,1,1);)_++;for(var y=h-Math.floor(this.toJD(_,1,1)+.5)+1,x=1;y>this.daysInMonth(_,x);)y-=this.daysInMonth(_,x),x++;return this.newDate(_,x,y)}}),Ue.calendars.nanakshahi=v}),lw=t(()=>{var Ue=Ly(),ve=Sv();function v(c){this.local=this.regionalOptions[c||""]||this.regionalOptions[""]}v.prototype=new Ue.baseCalendar,ve(v.prototype,{name:"Nepali",jdEpoch:17007095e-1,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(c){return this.daysInYear(c)!==this.daysPerYear},weekOfYear:function(c,h,_){var y=this.newDate(c,h,_);return y.add(-y.dayOfWeek(),"d"),Math.floor((y.dayOfYear()-1)/7)+1},daysInYear:function(c){var h=this._validate(c,this.minMonth,this.minDay,Ue.local.invalidYear);if(c=h.year(),typeof this.NEPALI_CALENDAR_DATA[c]>"u")return this.daysPerYear;for(var _=0,y=this.minMonth;y<=12;y++)_+=this.NEPALI_CALENDAR_DATA[c][y];return _},daysInMonth:function(c,h){return c.year&&(h=c.month(),c=c.year()),this._validate(c,h,this.minDay,Ue.local.invalidMonth),typeof this.NEPALI_CALENDAR_DATA[c]>"u"?this.daysPerMonth[h-1]:this.NEPALI_CALENDAR_DATA[c][h]},weekDay:function(c,h,_){return this.dayOfWeek(c,h,_)!==6},toJD:function(c,h,_){var y=this._validate(c,h,_,Ue.local.invalidDate);c=y.year(),h=y.month(),_=y.day();var x=Ue.instance(),w=0,A=h,d=c;this._createMissingCalendarData(c);var k=c-(A>9||A===9&&_>=this.NEPALI_CALENDAR_DATA[d][0]?56:57);for(h!==9&&(w=_,A--);A!==9;)A<=0&&(A=12,d--),w+=this.NEPALI_CALENDAR_DATA[d][A],A--;return h===9?(w+=_-this.NEPALI_CALENDAR_DATA[d][0],w<0&&(w+=x.daysInYear(k))):w+=this.NEPALI_CALENDAR_DATA[d][9]-this.NEPALI_CALENDAR_DATA[d][0],x.newDate(k,1,1).add(w,"d").toJD()},fromJD:function(c){var h=Ue.instance(),_=h.fromJD(c),y=_.year(),x=_.dayOfYear(),w=y+56;this._createMissingCalendarData(w);for(var A=9,d=this.NEPALI_CALENDAR_DATA[w][0],k=this.NEPALI_CALENDAR_DATA[w][A]-d+1;x>k;)A++,A>12&&(A=1,w++),k+=this.NEPALI_CALENDAR_DATA[w][A];var T=this.NEPALI_CALENDAR_DATA[w][A]-(k-x);return this.newDate(w,A,T)},_createMissingCalendarData:function(c){var h=this.daysPerMonth.slice(0);h.unshift(17);for(var _=c-1;_<c+2;_++)typeof this.NEPALI_CALENDAR_DATA[_]>"u"&&(this.NEPALI_CALENDAR_DATA[_]=h)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}}),Ue.calendars.nepali=v}),by=t(()=>{var Ue=Ly(),ve=Sv();function v(h){this.local=this.regionalOptions[h||""]||this.regionalOptions[""]}function c(h){var _=h-475;h<0&&_++;var y=.242197,x=y*_,w=y*(_+1),A=x-Math.floor(x),d=w-Math.floor(w);return A>d}v.prototype=new Ue.baseCalendar,ve(v.prototype,{name:"Persian",jdEpoch:19483205e-1,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Dey","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Dey","Bah","Esf"],dayNames:["Yekshanbeh","Doshanbeh","Seshanbeh","Chahārshanbeh","Panjshanbeh","Jom'eh","Shanbeh"],dayNamesShort:["Yek","Do","Se","Cha","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(h){var _=this._validate(h,this.minMonth,this.minDay,Ue.local.invalidYear);return c(_.year())},weekOfYear:function(h,_,y){var x=this.newDate(h,_,y);return x.add(-((x.dayOfWeek()+1)%7),"d"),Math.floor((x.dayOfYear()-1)/7)+1},daysInMonth:function(h,_){var y=this._validate(h,_,this.minDay,Ue.local.invalidMonth);return this.daysPerMonth[y.month()-1]+(y.month()===12&&this.leapYear(y.year())?1:0)},weekDay:function(h,_,y){return this.dayOfWeek(h,_,y)!==5},toJD:function(h,_,y){var x=this._validate(h,_,y,Ue.local.invalidDate);h=x.year(),_=x.month(),y=x.day();var w=0;if(h>0)for(var A=1;A<h;A++)c(A)&&w++;else if(h<0)for(var A=h;A<0;A++)c(A)&&w--;return y+(_<=7?(_-1)*31:(_-1)*30+6)+(h>0?h-1:h)*365+w+this.jdEpoch-1},fromJD:function(h){h=Math.floor(h)+.5;var _=475+(h-this.toJD(475,1,1))/365.242197,y=Math.floor(_);y<=0&&y--,h>this.toJD(y,12,c(y)?30:29)&&(y++,y===0&&y++);var x=h-this.toJD(y,1,1)+1,w=x<=186?Math.ceil(x/31):Math.ceil((x-6)/30),A=h-this.toJD(y,w,1)+1;return this.newDate(y,w,A)}}),Ue.calendars.persian=v,Ue.calendars.jalali=v}),Jb=t(()=>{var Ue=Ly(),ve=Sv(),v=Ue.instance();function c(h){this.local=this.regionalOptions[h||""]||this.regionalOptions[""]}c.prototype=new Ue.baseCalendar,ve(c.prototype,{name:"Taiwan",jdEpoch:24194025e-1,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(y){var _=this._validate(y,this.minMonth,this.minDay,Ue.local.invalidYear),y=this._t2gYear(_.year());return v.leapYear(y)},weekOfYear:function(w,_,y){var x=this._validate(w,this.minMonth,this.minDay,Ue.local.invalidYear),w=this._t2gYear(x.year());return v.weekOfYear(w,x.month(),x.day())},daysInMonth:function(h,_){var y=this._validate(h,_,this.minDay,Ue.local.invalidMonth);return this.daysPerMonth[y.month()-1]+(y.month()===2&&this.leapYear(y.year())?1:0)},weekDay:function(h,_,y){return(this.dayOfWeek(h,_,y)||7)<6},toJD:function(w,_,y){var x=this._validate(w,_,y,Ue.local.invalidDate),w=this._t2gYear(x.year());return v.toJD(w,x.month(),x.day())},fromJD:function(h){var _=v.fromJD(h),y=this._g2tYear(_.year());return this.newDate(y,_.month(),_.day())},_t2gYear:function(h){return h+this.yearsOffset+(h>=-this.yearsOffset&&h<=-1?1:0)},_g2tYear:function(h){return h-this.yearsOffset-(h>=1&&h<=this.yearsOffset?1:0)}}),Ue.calendars.taiwan=c}),Kb=t(()=>{var Ue=Ly(),ve=Sv(),v=Ue.instance();function c(h){this.local=this.regionalOptions[h||""]||this.regionalOptions[""]}c.prototype=new Ue.baseCalendar,ve(c.prototype,{name:"Thai",jdEpoch:15230985e-1,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(y){var _=this._validate(y,this.minMonth,this.minDay,Ue.local.invalidYear),y=this._t2gYear(_.year());return v.leapYear(y)},weekOfYear:function(w,_,y){var x=this._validate(w,this.minMonth,this.minDay,Ue.local.invalidYear),w=this._t2gYear(x.year());return v.weekOfYear(w,x.month(),x.day())},daysInMonth:function(h,_){var y=this._validate(h,_,this.minDay,Ue.local.invalidMonth);return this.daysPerMonth[y.month()-1]+(y.month()===2&&this.leapYear(y.year())?1:0)},weekDay:function(h,_,y){return(this.dayOfWeek(h,_,y)||7)<6},toJD:function(w,_,y){var x=this._validate(w,_,y,Ue.local.invalidDate),w=this._t2gYear(x.year());return v.toJD(w,x.month(),x.day())},fromJD:function(h){var _=v.fromJD(h),y=this._g2tYear(_.year());return this.newDate(y,_.month(),_.day())},_t2gYear:function(h){return h-this.yearsOffset-(h>=1&&h<=this.yearsOffset?1:0)},_g2tYear:function(h){return h+this.yearsOffset+(h>=-this.yearsOffset&&h<=-1?1:0)}}),Ue.calendars.thai=c}),l5=t(()=>{var Ue=Ly(),ve=Sv();function v(h){this.local=this.regionalOptions[h||""]||this.regionalOptions[""]}v.prototype=new Ue.baseCalendar,ve(v.prototype,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thalāthā’","Yawm al-Arba‘ā’","Yawm al-Khamīs","Yawm al-Jum‘a","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(h){var _=this._validate(h,this.minMonth,this.minDay,Ue.local.invalidYear);return this.daysInYear(_.year())===355},weekOfYear:function(h,_,y){var x=this.newDate(h,_,y);return x.add(-x.dayOfWeek(),"d"),Math.floor((x.dayOfYear()-1)/7)+1},daysInYear:function(h){for(var _=0,y=1;y<=12;y++)_+=this.daysInMonth(h,y);return _},daysInMonth:function(h,_){for(var y=this._validate(h,_,this.minDay,Ue.local.invalidMonth),x=y.toJD()-24e5+.5,w=0,A=0;A<c.length;A++){if(c[A]>x)return c[w]-c[w-1];w++}return 30},weekDay:function(h,_,y){return this.dayOfWeek(h,_,y)!==5},toJD:function(h,_,y){var x=this._validate(h,_,y,Ue.local.invalidDate),w=12*(x.year()-1)+x.month()-15292,A=x.day()+c[w-1]-1;return A+24e5-.5},fromJD:function(h){for(var _=h-24e5+.5,y=0,x=0;x<c.length&&!(c[x]>_);x++)y++;var w=y+15292,A=Math.floor((w-1)/12),d=A+1,k=w-12*A,T=_-c[y-1]+1;return this.newDate(d,k,T)},isValid:function(h,_,y){var x=Ue.baseCalendar.prototype.isValid.apply(this,arguments);return x&&(h=h.year!=null?h.year:h,x=h>=1276&&h<=1500),x},_validate:function(h,_,y,x){var w=Ue.baseCalendar.prototype._validate.apply(this,arguments);if(w.year<1276||w.year>1500)throw x.replace(/\{0\}/,this.local.name);return w}}),Ue.calendars.ummalqura=v;var c=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]}),c5=t((Ue,ve)=>{ve.exports=Ly(),Lx(),cv(),qv(),My(),q_(),R2(),p2(),Y_(),l_(),D2(),lw(),by(),Jb(),Kb(),l5()}),cw=t((Ue,ve)=>{var v=c5(),c=Re(),h=M(),_=h.EPOCHJD,y=h.ONEDAY,x={valType:"enumerated",values:c.sortObjectKeys(v.calendars),editType:"calc",dflt:"gregorian"},w=function(ht,Se,ie,X){var ft={};return ft[ie]=x,c.coerce(ht,Se,ft,ie,X)},A=function(ht,Se,ie,X){for(var ft=0;ft<ie.length;ft++)w(ht,Se,ie[ft]+"calendar",X.calendar)},d={chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},k={chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},T={chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},L="##",j={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:L,w:L,c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}};function P(ht,Se,ie){for(var X=Math.floor((Se+.05)/y)+_,ft=O(ie).fromJD(X),Le=0,nt,Ze,rt,dt,pt;(Le=ht.indexOf("%",Le))!==-1;)nt=ht.charAt(Le+1),nt==="0"||nt==="-"||nt==="_"?(rt=3,Ze=ht.charAt(Le+2),nt==="_"&&(nt="-")):(Ze=nt,nt="0",rt=2),dt=j[Ze],dt?(dt===L?pt=L:pt=ft.formatDate(dt[nt]),ht=ht.substr(0,Le)+pt+ht.substr(Le+rt),Le+=pt.length):Le+=rt;return ht}var N={};function O(ht){var Se=N[ht];return Se||(Se=N[ht]=v.instance(ht),Se)}function B(ht){return c.extendFlat({},x,{description:ht})}function S(ht){return"Sets the calendar system to use with `"+ht+"` date data."}var D={xcalendar:B(S("x"))},z=c.extendFlat({},D,{ycalendar:B(S("y"))}),H=c.extendFlat({},z,{zcalendar:B(S("z"))}),Y=B(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));ve.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:z,bar:z,box:z,heatmap:z,contour:z,histogram:z,histogram2d:z,histogram2dcontour:z,scatter3d:H,surface:H,mesh3d:H,scattergl:z,ohlc:D,candlestick:D},layout:{calendar:B(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:Y},yaxis:{calendar:Y},scene:{xaxis:{calendar:Y},yaxis:{calendar:Y},zaxis:{calendar:Y}},polar:{radialaxis:{calendar:Y}}}},layoutAttributes:x,handleDefaults:w,handleTraceDefaults:A,CANONICAL_SUNDAY:k,CANONICAL_TICK:d,DFLTRANGE:T,getCal:O,worldCalFmt:P}}),Qb=t((Ue,ve)=>{ve.exports=cw()}),e3=t((Ue,ve)=>{var v=r_();v.register([C2(),Jy(),Qb()]),ve.exports=v});return e3()})();/*! Bundled license information:

		native-promise-only/lib/npo.src.js:
		  (*! Native Promise Only
		      v0.8.1 (c) Kyle Simpson
		      MIT License: http://getify.mit-license.org
		  *)

		polybooljs/index.js:
		  (*
		   * @copyright 2016 Sean Connelly (@voidqk), http://syntheti.cc
		   * @license MIT
		   * @preserve Project Home: https://github.com/voidqk/polybooljs
		   *)

		object-assign/index.js:
		  (*
		  object-assign
		  (c) Sindre Sorhus
		  @license MIT
		  *)
		*/return window.Plotly=e,e})})(plotlyBasic_min$1)),plotlyBasic_min$1.exports}var plotlyBasic_minExports=requirePlotlyBasic_min();const Plotly=getDefaultExportFromCjs(plotlyBasic_minExports);function getBandTraces(r,e,t={}){const a=[];return e.forEach((o,l)=>{a.push({name:t.name,legendgroup:t.name,showlegend:l===0,...traceDefaultBands,...t,x:r,y:o})}),a}function getBandLayout(r=[],e=[]){return deepmerge.all([plotBandLayout,{xaxis:{tickvals:e,ticktext:r},yaxis:{}}])}function getBandStructure(r){const t=getXLabelsfromkpath(r[0].bandsData.path).map(prettifyLabels),a=getXLabelPos(r[0].bandsData.paths),o=getBandLayout(t,a);let l=[];for(const[s,f]of r.entries()){let m=f.traceFormat;(!m||Object.keys(m).length===0)&&(m={name:`Band Structure ${s}`,line:{color:getColor(s),width:1}});const b=f.bandsData,{xs:E,ys:M}=getXYData(b),I=getBandTraces(E,M,m);l.push(...I)}return{bandTraces:l,bandLayout:o}}function getDosLayout(r="h"){let e;return r==="v"?e=plotDOSLayoutF:e=plotDOSLayout,e}function getDosTraces(r,e="h",t={}){const a=e==="v"?r.y:r.x,o=e==="v"?r.x:r.y;return{...traceDefaultDos,...t,x:a,y:o}}function getDos(r,e="h"){const t=[];for(const[o,l]of r.entries()){let s=l.traceFormat;(!s||Object.keys(s).length===0)&&(s={name:`DOS ${o}`,line:{color:getColor(o),width:2}});const f=l.dosData,m=getDosTraces(f,e,s);t.push(m)}const a=getDosLayout(e);return{dosTraces:t,dosLayout:a}}function getProjectionTraces(r,e,t,a={},o=1){const l=transpose(t),s=transpose(e),f=[];return s.forEach((m,b)=>{const E=l[b],M=new Float64Array(m.length),I=new Float64Array(m.length);for(let le=0;le<m.length;le++){const K=E[le]*o;M[le]=m[le]+K,I[le]=m[le]-K}const V=r.length,Z=new Float32Array(V*2),ee=new Float32Array(V*2);for(let le=0;le<V;le++)Z[le]=r[le],ee[le]=I[le],Z[2*V-1-le]=r[le],ee[2*V-1-le]=M[le];f.push({name:a.name,legendgroup:a.name,type:"scatter",mode:"lines",fill:"toself",...a,showlegend:b===0,x:Z,y:ee})}),f}function handleSettings(r,e){for(const t in r)r[t]!==null&&typeof r[t]=="object"&&!Array.isArray(r[t])&&e[t]&&typeof e[t]=="object"&&!Array.isArray(e[t])?e[t]=deepmerge(e[t],r[t]):e[t]=r[t]}function BandsVisualiser(r,{bandsDataArray:e=[],dosDataArray:t=[],fermiLevels:a=[],customTraces:o=[],settings:l={}}){let s=[],f={},m=[],b=[],E={};typeof a=="number"&&(a=[a]);const M=e.length>0,I=t.length>0;if(M){const le=getBandStructure(e);s=le.bandTraces,f=le.bandLayout;for(const[K,vt]of e.entries())if(vt.hasOwnProperty("projections"))for(const[q,Q]of vt.projections.entries()){const wt=Q.traceFormat&&Object.keys(Q.traceFormat).length>0?Q.traceFormat:{name:`Projection ${q}`,line:{color:getColor(q),width:0}};m.push(...getProjectionTraces(vt.bandsData.x,vt.bandsData.y,Q.projData.weights,wt))}}if(I){const K=getDos(t,M?"v":"h");b=K.dosTraces,E=K.dosLayout}let V={},Z=[];if(I&&!M)Z=b,V={...E,showlegend:E?.showlegend??!0};else if(M&&!I)Z=[...s,...m],V={...f,showlegend:f?.showlegend??!0};else if(I&&M){b=b.map(K=>({...K,xaxis:"x2",yaxis:"y"}));const le=mergeLegendTracesByName([...m,...b]);Z=[...s,...le],V={...plotCombinedLayout,xaxis:{...plotCombinedLayout.xaxis||{},...f?.xaxis||{}},xaxis2:{...plotCombinedLayout.xaxis2||{},...E?.xaxis2||{}},yaxis:{...plotCombinedLayout.yaxis||{},...f?.yaxis||{},...E?.yaxis||{}}}}for(const le of o)console.log(le),le.target==="dos"?Z.push({...le,xaxis:"x2",yaxis:"y"}):le.target==="bands"?Z.push({...le,xaxis:"x",yaxis:"y"}):Z.push({...le});const ee=addfermiLines(a,Z,I,M);handleSettings(l,V),Plotly.react(r,ee,V,{displaylogo:!1,responsive:!0})}function CardContainer({children:r,header:e,footer:t,className:a="",childrenClassName:o="",style:l={}}){return jsxRuntimeExports.jsxs("div",{className:`ae:w-full ae:max-w-full ae:bg-slate-100 ae:border ae:border-slate-200 ae:p-3 ae:rounded-md ae:shadow-md ${a}`,style:l,children:[e&&jsxRuntimeExports.jsx("div",{className:"explorerHeadingBig ae:mb-2",children:e}),jsxRuntimeExports.jsx("div",{className:`ae:px-1 ${o}`,children:r}),t&&jsxRuntimeExports.jsx("div",{className:"ae:mt-2 ae:text-sm ae:text-gray-500",children:t})]})}function BandsDataVisualiser({nodeData:r}){const e=reactExports.useRef(null),[t,a]=reactExports.useState(null),[o,l]=reactExports.useState(!1),[s,f]=reactExports.useState(null),m=r.downloadByFormat?.json,b=r?.attributes?.units||"N/A";return reactExports.useEffect(()=>{if(!m)return;(async()=>{l(!0),f(null);try{const M=await fetch(m);if(!M.ok)throw new Error(`HTTP error: ${M.status}`);const I=await M.json();a([{bandsData:I}])}catch(M){console.error("Failed to fetch bands JSON:",M),f(M.message)}finally{l(!1)}})()},[m]),reactExports.useEffect(()=>{!e.current||!t||BandsVisualiser(e.current,{bandsDataArray:t,settings:{showlegend:!1,yaxis:{title:{text:`Value [${b}]`}},xaxis:{title:{text:"Path"}},margin:{l:80,b:45}}})},[t,b]),jsxRuntimeExports.jsx("div",{className:"ae:w-full ae:mx-auto ae:p-4 ae:space-y-6",children:jsxRuntimeExports.jsx(CardContainer,{header:"Bands Structure Plot",className:"ae:!px-1.5 ae:!pt-2",childrenClassName:"ae:!p-0",children:jsxRuntimeExports.jsxs("div",{className:"ae:w-full ae:h-[450px] ae:relative ae:flex ae:items-center ae:justify-center",children:[o&&jsxRuntimeExports.jsx(Spinner,{}),s&&!o&&jsxRuntimeExports.jsx(ErrorDisplay,{message:s,onRetry:()=>{}}),!o&&!s&&t&&jsxRuntimeExports.jsx("div",{ref:e,className:"ae:absolute ae:inset-0 "})]})})})}function FileTable({title:r,dataArray:e=[],onView:t}){const a=["File","Download","View"],o=e.map(l=>({File:l.name,Download:jsxRuntimeExports.jsx("a",{href:l.downloadUrl||"#",download:l.name||void 0,rel:"noopener noreferrer",className:"ae:text-blue-600 ae:hover:text-blue-800 ae:transition-colors ae:duration-75",children:jsxRuntimeExports.jsx(DownloadIcon,{size:18,className:"ae:hover:scale-105 ae:transition-all ae:duration-75"})}),View:jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>t?.(l.name,l.downloadUrl),className:"ae:text-green-600 ae:hover:text-green-800 ae:transition-colors ae:duration-75",children:jsxRuntimeExports.jsx(ViewIcon,{size:18,className:"ae:hover:scale-105 ae:transition-all ae:duration-75"})})}));return jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(DataTable,{title:r,columns:a,data:o,sortableCols:["File"]})})}function CalcJobVisualiser({nodeData:r={}}){const[e,t]=reactExports.useState(null),[a,o]=reactExports.useState(null),[l,s]=reactExports.useState(!1),f=async(b,E)=>{try{const I=await(await fetch(E)).text();t(I),o(b),s(!0)}catch(M){console.error("Error loading preview:",M),t("Failed to load preview."),o(b),s(!0)}},m=jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(FileTable,{title:"Input Files (in this node)",dataArray:r.files?.input_files||[],onView:f}),jsxRuntimeExports.jsx(FileTable,{title:"Output Files (retrieved)",dataArray:r.files?.output_files||[],onView:f})]});return jsxRuntimeExports.jsxs("div",{className:"ae:flex ae:flex-col ae:px-3 ae:py-2 ae:gap-2 ae:lg:gap-4",children:[m,jsxRuntimeExports.jsx(Overlay,{active:l,onClose:()=>s(!1),title:`Preview: ${a}`,children:jsxRuntimeExports.jsx("pre",{className:"ae:overflow-y-auto ae:whitespace-pre-wrap ae:text-sm ae:flex-1",children:e})})]})}const Qn={ROTATE:0,DOLLY:1,PAN:2},$n={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},Jo=0,ua=1,Qo=2,_o=1,tl=2,en=3,gn=0,Te=1,Xe=2,mn=0,ti=1,da=2,fa=3,pa=4,el=5,wn=100,nl=101,il=102,rl=103,sl=104,al=200,ol=201,ll=202,cl=203,is=204,rs=205,hl=206,ul=207,dl=208,fl=209,pl=210,ml=211,_l=212,gl=213,vl=214,ss=0,as=1,os=2,ii=3,ls=4,cs=5,hs=6,us=7,go=0,xl=1,Ml=2,_n=0,Sl=1,El=2,yl=3,Tl=4,bl=5,Al=6,Rl=7,vo=300,ri=301,si=302,ds=303,fs=304,gr=306,ps=1e3,Pn=1001,ms=1002,Ge=1003,wl=1004,Pi=1005,Ye=1006,yr=1007,Dn=1008,sn=1009,xo=1010,Mo=1011,vi=1012,Ys=1013,Ln=1014,nn=1015,yi=1016,qs=1017,Ks=1018,xi=1020,So=35902,Eo=35899,yo=1021,To=1022,Ve=1023,Mi=1026,Si=1027,bo=1028,Zs=1029,Ao=1030,js=1031,$s=1033,sr=33776,ar=33777,or=33778,lr=33779,_s=35840,gs=35841,vs=35842,xs=35843,Ms=36196,Ss=37492,Es=37496,ys=37808,Ts=37809,bs=37810,As=37811,Rs=37812,ws=37813,Cs=37814,Ps=37815,Ds=37816,Ls=37817,Us=37818,Is=37819,Ns=37820,Fs=37821,Os=36492,Bs=36494,zs=36495,Hs=36283,Vs=36284,Gs=36285,ks=36286,Cl=3200,Pl=3201,Dl=0,Ll=1,pn="",Ne="srgb",ai="srgb-linear",hr="linear",Jt="srgb",On=7680,ma=519,Ul=512,Il=513,Nl=514,Ro=515,Fl=516,Ol=517,Bl=518,zl=519,_a=35044,ga="300 es",qe=2e3,ur=2001;class Nn{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const a=this._listeners;a[e]===void 0&&(a[e]=[]),a[e].indexOf(t)===-1&&a[e].push(t)}hasEventListener(e,t){const a=this._listeners;return a===void 0?!1:a[e]!==void 0&&a[e].indexOf(t)!==-1}removeEventListener(e,t){const a=this._listeners;if(a===void 0)return;const o=a[e];if(o!==void 0){const l=o.indexOf(t);l!==-1&&o.splice(l,1)}}dispatchEvent(e){const t=this._listeners;if(t===void 0)return;const a=t[e.type];if(a!==void 0){e.target=this;const o=a.slice(0);for(let l=0,s=o.length;l<s;l++)o[l].call(this,e);e.target=null}}}const _e=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],gi=Math.PI/180,Ws=180/Math.PI;function Ti(){const r=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,a=Math.random()*4294967295|0;return(_e[r&255]+_e[r>>8&255]+_e[r>>16&255]+_e[r>>24&255]+"-"+_e[e&255]+_e[e>>8&255]+"-"+_e[e>>16&15|64]+_e[e>>24&255]+"-"+_e[t&63|128]+_e[t>>8&255]+"-"+_e[t>>16&255]+_e[t>>24&255]+_e[a&255]+_e[a>>8&255]+_e[a>>16&255]+_e[a>>24&255]).toLowerCase()}function Vt(r,e,t){return Math.max(e,Math.min(t,r))}function Hl(r,e){return(r%e+e)%e}function Tr(r,e,t){return(1-t)*r+t*e}function hi(r,e){switch(e.constructor){case Float32Array:return r;case Uint32Array:return r/4294967295;case Uint16Array:return r/65535;case Uint8Array:return r/255;case Int32Array:return Math.max(r/2147483647,-1);case Int16Array:return Math.max(r/32767,-1);case Int8Array:return Math.max(r/127,-1);default:throw new Error("Invalid component type.")}}function Ee(r,e){switch(e.constructor){case Float32Array:return r;case Uint32Array:return Math.round(r*4294967295);case Uint16Array:return Math.round(r*65535);case Uint8Array:return Math.round(r*255);case Int32Array:return Math.round(r*2147483647);case Int16Array:return Math.round(r*32767);case Int8Array:return Math.round(r*127);default:throw new Error("Invalid component type.")}}const Vl={DEG2RAD:gi};class Bt{constructor(e=0,t=0){Bt.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,a=this.y,o=e.elements;return this.x=o[0]*t+o[3]*a+o[6],this.y=o[1]*t+o[4]*a+o[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Vt(this.x,e.x,t.x),this.y=Vt(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=Vt(this.x,e,t),this.y=Vt(this.y,e,t),this}clampLength(e,t){const a=this.length();return this.divideScalar(a||1).multiplyScalar(Vt(a,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const a=this.dot(e)/t;return Math.acos(Vt(a,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,a=this.y-e.y;return t*t+a*a}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,a){return this.x=e.x+(t.x-e.x)*a,this.y=e.y+(t.y-e.y)*a,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const a=Math.cos(t),o=Math.sin(t),l=this.x-e.x,s=this.y-e.y;return this.x=l*a-s*o+e.x,this.y=l*o+s*a+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Un{constructor(e=0,t=0,a=0,o=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=a,this._w=o}static slerpFlat(e,t,a,o,l,s,f){let m=a[o+0],b=a[o+1],E=a[o+2],M=a[o+3];const I=l[s+0],V=l[s+1],Z=l[s+2],ee=l[s+3];if(f===0){e[t+0]=m,e[t+1]=b,e[t+2]=E,e[t+3]=M;return}if(f===1){e[t+0]=I,e[t+1]=V,e[t+2]=Z,e[t+3]=ee;return}if(M!==ee||m!==I||b!==V||E!==Z){let le=1-f;const K=m*I+b*V+E*Z+M*ee,vt=K>=0?1:-1,q=1-K*K;if(q>Number.EPSILON){const wt=Math.sqrt(q),bt=Math.atan2(wt,K*vt);le=Math.sin(le*bt)/wt,f=Math.sin(f*bt)/wt}const Q=f*vt;if(m=m*le+I*Q,b=b*le+V*Q,E=E*le+Z*Q,M=M*le+ee*Q,le===1-f){const wt=1/Math.sqrt(m*m+b*b+E*E+M*M);m*=wt,b*=wt,E*=wt,M*=wt}}e[t]=m,e[t+1]=b,e[t+2]=E,e[t+3]=M}static multiplyQuaternionsFlat(e,t,a,o,l,s){const f=a[o],m=a[o+1],b=a[o+2],E=a[o+3],M=l[s],I=l[s+1],V=l[s+2],Z=l[s+3];return e[t]=f*Z+E*M+m*V-b*I,e[t+1]=m*Z+E*I+b*M-f*V,e[t+2]=b*Z+E*V+f*I-m*M,e[t+3]=E*Z-f*M-m*I-b*V,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,a,o){return this._x=e,this._y=t,this._z=a,this._w=o,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const a=e._x,o=e._y,l=e._z,s=e._order,f=Math.cos,m=Math.sin,b=f(a/2),E=f(o/2),M=f(l/2),I=m(a/2),V=m(o/2),Z=m(l/2);switch(s){case"XYZ":this._x=I*E*M+b*V*Z,this._y=b*V*M-I*E*Z,this._z=b*E*Z+I*V*M,this._w=b*E*M-I*V*Z;break;case"YXZ":this._x=I*E*M+b*V*Z,this._y=b*V*M-I*E*Z,this._z=b*E*Z-I*V*M,this._w=b*E*M+I*V*Z;break;case"ZXY":this._x=I*E*M-b*V*Z,this._y=b*V*M+I*E*Z,this._z=b*E*Z+I*V*M,this._w=b*E*M-I*V*Z;break;case"ZYX":this._x=I*E*M-b*V*Z,this._y=b*V*M+I*E*Z,this._z=b*E*Z-I*V*M,this._w=b*E*M+I*V*Z;break;case"YZX":this._x=I*E*M+b*V*Z,this._y=b*V*M+I*E*Z,this._z=b*E*Z-I*V*M,this._w=b*E*M-I*V*Z;break;case"XZY":this._x=I*E*M-b*V*Z,this._y=b*V*M-I*E*Z,this._z=b*E*Z+I*V*M,this._w=b*E*M+I*V*Z;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const a=t/2,o=Math.sin(a);return this._x=e.x*o,this._y=e.y*o,this._z=e.z*o,this._w=Math.cos(a),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,a=t[0],o=t[4],l=t[8],s=t[1],f=t[5],m=t[9],b=t[2],E=t[6],M=t[10],I=a+f+M;if(I>0){const V=.5/Math.sqrt(I+1);this._w=.25/V,this._x=(E-m)*V,this._y=(l-b)*V,this._z=(s-o)*V}else if(a>f&&a>M){const V=2*Math.sqrt(1+a-f-M);this._w=(E-m)/V,this._x=.25*V,this._y=(o+s)/V,this._z=(l+b)/V}else if(f>M){const V=2*Math.sqrt(1+f-a-M);this._w=(l-b)/V,this._x=(o+s)/V,this._y=.25*V,this._z=(m+E)/V}else{const V=2*Math.sqrt(1+M-a-f);this._w=(s-o)/V,this._x=(l+b)/V,this._y=(m+E)/V,this._z=.25*V}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let a=e.dot(t)+1;return a<1e-8?(a=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=a):(this._x=0,this._y=-e.z,this._z=e.y,this._w=a)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=a),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Vt(this.dot(e),-1,1)))}rotateTowards(e,t){const a=this.angleTo(e);if(a===0)return this;const o=Math.min(1,t/a);return this.slerp(e,o),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const a=e._x,o=e._y,l=e._z,s=e._w,f=t._x,m=t._y,b=t._z,E=t._w;return this._x=a*E+s*f+o*b-l*m,this._y=o*E+s*m+l*f-a*b,this._z=l*E+s*b+a*m-o*f,this._w=s*E-a*f-o*m-l*b,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const a=this._x,o=this._y,l=this._z,s=this._w;let f=s*e._w+a*e._x+o*e._y+l*e._z;if(f<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,f=-f):this.copy(e),f>=1)return this._w=s,this._x=a,this._y=o,this._z=l,this;const m=1-f*f;if(m<=Number.EPSILON){const V=1-t;return this._w=V*s+t*this._w,this._x=V*a+t*this._x,this._y=V*o+t*this._y,this._z=V*l+t*this._z,this.normalize(),this}const b=Math.sqrt(m),E=Math.atan2(b,f),M=Math.sin((1-t)*E)/b,I=Math.sin(t*E)/b;return this._w=s*M+this._w*I,this._x=a*M+this._x*I,this._y=o*M+this._y*I,this._z=l*M+this._z*I,this._onChangeCallback(),this}slerpQuaternions(e,t,a){return this.copy(e).slerp(t,a)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),a=Math.random(),o=Math.sqrt(1-a),l=Math.sqrt(a);return this.set(o*Math.sin(e),o*Math.cos(e),l*Math.sin(t),l*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class U{constructor(e=0,t=0,a=0){U.prototype.isVector3=!0,this.x=e,this.y=t,this.z=a}set(e,t,a){return a===void 0&&(a=this.z),this.x=e,this.y=t,this.z=a,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(va.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(va.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,a=this.y,o=this.z,l=e.elements;return this.x=l[0]*t+l[3]*a+l[6]*o,this.y=l[1]*t+l[4]*a+l[7]*o,this.z=l[2]*t+l[5]*a+l[8]*o,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,a=this.y,o=this.z,l=e.elements,s=1/(l[3]*t+l[7]*a+l[11]*o+l[15]);return this.x=(l[0]*t+l[4]*a+l[8]*o+l[12])*s,this.y=(l[1]*t+l[5]*a+l[9]*o+l[13])*s,this.z=(l[2]*t+l[6]*a+l[10]*o+l[14])*s,this}applyQuaternion(e){const t=this.x,a=this.y,o=this.z,l=e.x,s=e.y,f=e.z,m=e.w,b=2*(s*o-f*a),E=2*(f*t-l*o),M=2*(l*a-s*t);return this.x=t+m*b+s*M-f*E,this.y=a+m*E+f*b-l*M,this.z=o+m*M+l*E-s*b,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,a=this.y,o=this.z,l=e.elements;return this.x=l[0]*t+l[4]*a+l[8]*o,this.y=l[1]*t+l[5]*a+l[9]*o,this.z=l[2]*t+l[6]*a+l[10]*o,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Vt(this.x,e.x,t.x),this.y=Vt(this.y,e.y,t.y),this.z=Vt(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=Vt(this.x,e,t),this.y=Vt(this.y,e,t),this.z=Vt(this.z,e,t),this}clampLength(e,t){const a=this.length();return this.divideScalar(a||1).multiplyScalar(Vt(a,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,a){return this.x=e.x+(t.x-e.x)*a,this.y=e.y+(t.y-e.y)*a,this.z=e.z+(t.z-e.z)*a,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const a=e.x,o=e.y,l=e.z,s=t.x,f=t.y,m=t.z;return this.x=o*m-l*f,this.y=l*s-a*m,this.z=a*f-o*s,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const a=e.dot(this)/t;return this.copy(e).multiplyScalar(a)}projectOnPlane(e){return br.copy(this).projectOnVector(e),this.sub(br)}reflect(e){return this.sub(br.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const a=this.dot(e)/t;return Math.acos(Vt(a,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,a=this.y-e.y,o=this.z-e.z;return t*t+a*a+o*o}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,a){const o=Math.sin(t)*e;return this.x=o*Math.sin(a),this.y=Math.cos(t)*e,this.z=o*Math.cos(a),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,a){return this.x=e*Math.sin(t),this.y=a,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),a=this.setFromMatrixColumn(e,1).length(),o=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=a,this.z=o,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,a=Math.sqrt(1-t*t);return this.x=a*Math.cos(e),this.y=t,this.z=a*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const br=new U,va=new Un;class Ft{constructor(e,t,a,o,l,s,f,m,b){Ft.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,a,o,l,s,f,m,b)}set(e,t,a,o,l,s,f,m,b){const E=this.elements;return E[0]=e,E[1]=o,E[2]=f,E[3]=t,E[4]=l,E[5]=m,E[6]=a,E[7]=s,E[8]=b,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,a=e.elements;return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[8]=a[8],this}extractBasis(e,t,a){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),a.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const a=e.elements,o=t.elements,l=this.elements,s=a[0],f=a[3],m=a[6],b=a[1],E=a[4],M=a[7],I=a[2],V=a[5],Z=a[8],ee=o[0],le=o[3],K=o[6],vt=o[1],q=o[4],Q=o[7],wt=o[2],bt=o[5],Ut=o[8];return l[0]=s*ee+f*vt+m*wt,l[3]=s*le+f*q+m*bt,l[6]=s*K+f*Q+m*Ut,l[1]=b*ee+E*vt+M*wt,l[4]=b*le+E*q+M*bt,l[7]=b*K+E*Q+M*Ut,l[2]=I*ee+V*vt+Z*wt,l[5]=I*le+V*q+Z*bt,l[8]=I*K+V*Q+Z*Ut,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],a=e[1],o=e[2],l=e[3],s=e[4],f=e[5],m=e[6],b=e[7],E=e[8];return t*s*E-t*f*b-a*l*E+a*f*m+o*l*b-o*s*m}invert(){const e=this.elements,t=e[0],a=e[1],o=e[2],l=e[3],s=e[4],f=e[5],m=e[6],b=e[7],E=e[8],M=E*s-f*b,I=f*m-E*l,V=b*l-s*m,Z=t*M+a*I+o*V;if(Z===0)return this.set(0,0,0,0,0,0,0,0,0);const ee=1/Z;return e[0]=M*ee,e[1]=(o*b-E*a)*ee,e[2]=(f*a-o*s)*ee,e[3]=I*ee,e[4]=(E*t-o*m)*ee,e[5]=(o*l-f*t)*ee,e[6]=V*ee,e[7]=(a*m-b*t)*ee,e[8]=(s*t-a*l)*ee,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,a,o,l,s,f){const m=Math.cos(l),b=Math.sin(l);return this.set(a*m,a*b,-a*(m*s+b*f)+s+e,-o*b,o*m,-o*(-b*s+m*f)+f+t,0,0,1),this}scale(e,t){return this.premultiply(Ar.makeScale(e,t)),this}rotate(e){return this.premultiply(Ar.makeRotation(-e)),this}translate(e,t){return this.premultiply(Ar.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),a=Math.sin(e);return this.set(t,-a,0,a,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,a=e.elements;for(let o=0;o<9;o++)if(t[o]!==a[o])return!1;return!0}fromArray(e,t=0){for(let a=0;a<9;a++)this.elements[a]=e[a+t];return this}toArray(e=[],t=0){const a=this.elements;return e[t]=a[0],e[t+1]=a[1],e[t+2]=a[2],e[t+3]=a[3],e[t+4]=a[4],e[t+5]=a[5],e[t+6]=a[6],e[t+7]=a[7],e[t+8]=a[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const Ar=new Ft;function wo(r){for(let e=r.length-1;e>=0;--e)if(r[e]>=65535)return!0;return!1}function dr(r){return document.createElementNS("http://www.w3.org/1999/xhtml",r)}function Gl(){const r=dr("canvas");return r.style.display="block",r}const xa={};function Ei(r){r in xa||(xa[r]=!0,console.warn(r))}function kl(r,e,t){return new Promise(function(a,o){function l(){switch(r.clientWaitSync(e,r.SYNC_FLUSH_COMMANDS_BIT,0)){case r.WAIT_FAILED:o();break;case r.TIMEOUT_EXPIRED:setTimeout(l,t);break;default:a()}}setTimeout(l,t)})}const Ma=new Ft().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),Sa=new Ft().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function Wl(){const r={enabled:!0,workingColorSpace:ai,spaces:{},convert:function(o,l,s){return this.enabled===!1||l===s||!l||!s||(this.spaces[l].transfer===Jt&&(o.r=rn(o.r),o.g=rn(o.g),o.b=rn(o.b)),this.spaces[l].primaries!==this.spaces[s].primaries&&(o.applyMatrix3(this.spaces[l].toXYZ),o.applyMatrix3(this.spaces[s].fromXYZ)),this.spaces[s].transfer===Jt&&(o.r=ei(o.r),o.g=ei(o.g),o.b=ei(o.b))),o},workingToColorSpace:function(o,l){return this.convert(o,this.workingColorSpace,l)},colorSpaceToWorking:function(o,l){return this.convert(o,l,this.workingColorSpace)},getPrimaries:function(o){return this.spaces[o].primaries},getTransfer:function(o){return o===pn?hr:this.spaces[o].transfer},getToneMappingMode:function(o){return this.spaces[o].outputColorSpaceConfig.toneMappingMode||"standard"},getLuminanceCoefficients:function(o,l=this.workingColorSpace){return o.fromArray(this.spaces[l].luminanceCoefficients)},define:function(o){Object.assign(this.spaces,o)},_getMatrix:function(o,l,s){return o.copy(this.spaces[l].toXYZ).multiply(this.spaces[s].fromXYZ)},_getDrawingBufferColorSpace:function(o){return this.spaces[o].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(o=this.workingColorSpace){return this.spaces[o].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(o,l){return Ei("THREE.ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),r.workingToColorSpace(o,l)},toWorkingColorSpace:function(o,l){return Ei("THREE.ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),r.colorSpaceToWorking(o,l)}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],a=[.3127,.329];return r.define({[ai]:{primaries:e,whitePoint:a,transfer:hr,toXYZ:Ma,fromXYZ:Sa,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:Ne},outputColorSpaceConfig:{drawingBufferColorSpace:Ne}},[Ne]:{primaries:e,whitePoint:a,transfer:Jt,toXYZ:Ma,fromXYZ:Sa,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:Ne}}}),r}const Xt=Wl();function rn(r){return r<.04045?r*.0773993808:Math.pow(r*.9478672986+.0521327014,2.4)}function ei(r){return r<.0031308?r*12.92:1.055*Math.pow(r,.41666)-.055}let Bn;class Xl{static getDataURL(e,t="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let a;if(e instanceof HTMLCanvasElement)a=e;else{Bn===void 0&&(Bn=dr("canvas")),Bn.width=e.width,Bn.height=e.height;const o=Bn.getContext("2d");e instanceof ImageData?o.putImageData(e,0,0):o.drawImage(e,0,0,e.width,e.height),a=Bn}return a.toDataURL(t)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=dr("canvas");t.width=e.width,t.height=e.height;const a=t.getContext("2d");a.drawImage(e,0,0,e.width,e.height);const o=a.getImageData(0,0,e.width,e.height),l=o.data;for(let s=0;s<l.length;s++)l[s]=rn(l[s]/255)*255;return a.putImageData(o,0,0),t}else if(e.data){const t=e.data.slice(0);for(let a=0;a<t.length;a++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[a]=Math.floor(rn(t[a]/255)*255):t[a]=rn(t[a]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let Yl=0;class Js{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Yl++}),this.uuid=Ti(),this.data=e,this.dataReady=!0,this.version=0}getSize(e){const t=this.data;return typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement?e.set(t.videoWidth,t.videoHeight,0):t instanceof VideoFrame?e.set(t.displayHeight,t.displayWidth,0):t!==null?e.set(t.width,t.height,t.depth||0):e.set(0,0,0),e}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const a={uuid:this.uuid,url:""},o=this.data;if(o!==null){let l;if(Array.isArray(o)){l=[];for(let s=0,f=o.length;s<f;s++)o[s].isDataTexture?l.push(Rr(o[s].image)):l.push(Rr(o[s]))}else l=Rr(o);a.url=l}return t||(e.images[this.uuid]=a),a}}function Rr(r){return typeof HTMLImageElement<"u"&&r instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&r instanceof ImageBitmap?Xl.getDataURL(r):r.data?{data:Array.from(r.data),width:r.width,height:r.height,type:r.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let ql=0;const wr=new U;class be extends Nn{constructor(e=be.DEFAULT_IMAGE,t=be.DEFAULT_MAPPING,a=Pn,o=Pn,l=Ye,s=Dn,f=Ve,m=sn,b=be.DEFAULT_ANISOTROPY,E=pn){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:ql++}),this.uuid=Ti(),this.name="",this.source=new Js(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=a,this.wrapT=o,this.magFilter=l,this.minFilter=s,this.anisotropy=b,this.format=f,this.internalFormat=null,this.type=m,this.offset=new Bt(0,0),this.repeat=new Bt(1,1),this.center=new Bt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Ft,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=E,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(e&&e.depth&&e.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(wr).x}get height(){return this.source.getSize(wr).y}get depth(){return this.source.getSize(wr).z}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isArrayTexture=e.isArrayTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}setValues(e){for(const t in e){const a=e[t];if(a===void 0){console.warn(`THREE.Texture.setValues(): parameter '${t}' has value of undefined.`);continue}const o=this[t];if(o===void 0){console.warn(`THREE.Texture.setValues(): property '${t}' does not exist.`);continue}o&&a&&o.isVector2&&a.isVector2||o&&a&&o.isVector3&&a.isVector3||o&&a&&o.isMatrix3&&a.isMatrix3?o.copy(a):this[t]=a}}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const a={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(a.userData=this.userData),t||(e.textures[this.uuid]=a),a}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==vo)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case ps:e.x=e.x-Math.floor(e.x);break;case Pn:e.x=e.x<0?0:1;break;case ms:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case ps:e.y=e.y-Math.floor(e.y);break;case Pn:e.y=e.y<0?0:1;break;case ms:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}be.DEFAULT_IMAGE=null;be.DEFAULT_MAPPING=vo;be.DEFAULT_ANISOTROPY=1;class oe{constructor(e=0,t=0,a=0,o=1){oe.prototype.isVector4=!0,this.x=e,this.y=t,this.z=a,this.w=o}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,a,o){return this.x=e,this.y=t,this.z=a,this.w=o,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,a=this.y,o=this.z,l=this.w,s=e.elements;return this.x=s[0]*t+s[4]*a+s[8]*o+s[12]*l,this.y=s[1]*t+s[5]*a+s[9]*o+s[13]*l,this.z=s[2]*t+s[6]*a+s[10]*o+s[14]*l,this.w=s[3]*t+s[7]*a+s[11]*o+s[15]*l,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,a,o,l;const s=e.elements,f=s[0],m=s[4],b=s[8],E=s[1],M=s[5],I=s[9],V=s[2],Z=s[6],ee=s[10];if(Math.abs(m-E)<.01&&Math.abs(b-V)<.01&&Math.abs(I-Z)<.01){if(Math.abs(m+E)<.1&&Math.abs(b+V)<.1&&Math.abs(I+Z)<.1&&Math.abs(f+M+ee-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const K=(f+1)/2,vt=(M+1)/2,q=(ee+1)/2,Q=(m+E)/4,wt=(b+V)/4,bt=(I+Z)/4;return K>vt&&K>q?K<.01?(a=0,o=.707106781,l=.707106781):(a=Math.sqrt(K),o=Q/a,l=wt/a):vt>q?vt<.01?(a=.707106781,o=0,l=.707106781):(o=Math.sqrt(vt),a=Q/o,l=bt/o):q<.01?(a=.707106781,o=.707106781,l=0):(l=Math.sqrt(q),a=wt/l,o=bt/l),this.set(a,o,l,t),this}let le=Math.sqrt((Z-I)*(Z-I)+(b-V)*(b-V)+(E-m)*(E-m));return Math.abs(le)<.001&&(le=1),this.x=(Z-I)/le,this.y=(b-V)/le,this.z=(E-m)/le,this.w=Math.acos((f+M+ee-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Vt(this.x,e.x,t.x),this.y=Vt(this.y,e.y,t.y),this.z=Vt(this.z,e.z,t.z),this.w=Vt(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=Vt(this.x,e,t),this.y=Vt(this.y,e,t),this.z=Vt(this.z,e,t),this.w=Vt(this.w,e,t),this}clampLength(e,t){const a=this.length();return this.divideScalar(a||1).multiplyScalar(Vt(a,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,a){return this.x=e.x+(t.x-e.x)*a,this.y=e.y+(t.y-e.y)*a,this.z=e.z+(t.z-e.z)*a,this.w=e.w+(t.w-e.w)*a,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Kl extends Nn{constructor(e=1,t=1,a={}){super(),a=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Ye,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},a),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=a.depth,this.scissor=new oe(0,0,e,t),this.scissorTest=!1,this.viewport=new oe(0,0,e,t);const o={width:e,height:t,depth:a.depth},l=new be(o);this.textures=[];const s=a.count;for(let f=0;f<s;f++)this.textures[f]=l.clone(),this.textures[f].isRenderTargetTexture=!0,this.textures[f].renderTarget=this;this._setTextureOptions(a),this.depthBuffer=a.depthBuffer,this.stencilBuffer=a.stencilBuffer,this.resolveDepthBuffer=a.resolveDepthBuffer,this.resolveStencilBuffer=a.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=a.depthTexture,this.samples=a.samples,this.multiview=a.multiview}_setTextureOptions(e={}){const t={minFilter:Ye,generateMipmaps:!1,flipY:!1,internalFormat:null};e.mapping!==void 0&&(t.mapping=e.mapping),e.wrapS!==void 0&&(t.wrapS=e.wrapS),e.wrapT!==void 0&&(t.wrapT=e.wrapT),e.wrapR!==void 0&&(t.wrapR=e.wrapR),e.magFilter!==void 0&&(t.magFilter=e.magFilter),e.minFilter!==void 0&&(t.minFilter=e.minFilter),e.format!==void 0&&(t.format=e.format),e.type!==void 0&&(t.type=e.type),e.anisotropy!==void 0&&(t.anisotropy=e.anisotropy),e.colorSpace!==void 0&&(t.colorSpace=e.colorSpace),e.flipY!==void 0&&(t.flipY=e.flipY),e.generateMipmaps!==void 0&&(t.generateMipmaps=e.generateMipmaps),e.internalFormat!==void 0&&(t.internalFormat=e.internalFormat);for(let a=0;a<this.textures.length;a++)this.textures[a].setValues(t)}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,a=1){if(this.width!==e||this.height!==t||this.depth!==a){this.width=e,this.height=t,this.depth=a;for(let o=0,l=this.textures.length;o<l;o++)this.textures[o].image.width=e,this.textures[o].image.height=t,this.textures[o].image.depth=a,this.textures[o].isArrayTexture=this.textures[o].image.depth>1;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,a=e.textures.length;t<a;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const o=Object.assign({},e.textures[t].image);this.textures[t].source=new Js(o)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class In extends Kl{constructor(e=1,t=1,a={}){super(e,t,a),this.isWebGLRenderTarget=!0}}class Co extends be{constructor(e=null,t=1,a=1,o=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:a,depth:o},this.magFilter=Ge,this.minFilter=Ge,this.wrapR=Pn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class Zl extends be{constructor(e=null,t=1,a=1,o=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:a,depth:o},this.magFilter=Ge,this.minFilter=Ge,this.wrapR=Pn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class bi{constructor(e=new U(1/0,1/0,1/0),t=new U(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,a=e.length;t<a;t+=3)this.expandByPoint(Be.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,a=e.count;t<a;t++)this.expandByPoint(Be.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,a=e.length;t<a;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const a=Be.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(a),this.max.copy(e).add(a),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const a=e.geometry;if(a!==void 0){const l=a.getAttribute("position");if(t===!0&&l!==void 0&&e.isInstancedMesh!==!0)for(let s=0,f=l.count;s<f;s++)e.isMesh===!0?e.getVertexPosition(s,Be):Be.fromBufferAttribute(l,s),Be.applyMatrix4(e.matrixWorld),this.expandByPoint(Be);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),Di.copy(e.boundingBox)):(a.boundingBox===null&&a.computeBoundingBox(),Di.copy(a.boundingBox)),Di.applyMatrix4(e.matrixWorld),this.union(Di)}const o=e.children;for(let l=0,s=o.length;l<s;l++)this.expandByObject(o[l],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Be),Be.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,a;return e.normal.x>0?(t=e.normal.x*this.min.x,a=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,a=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,a+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,a+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,a+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,a+=e.normal.z*this.min.z),t<=-e.constant&&a>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(ui),Li.subVectors(this.max,ui),zn.subVectors(e.a,ui),Hn.subVectors(e.b,ui),Vn.subVectors(e.c,ui),on.subVectors(Hn,zn),ln.subVectors(Vn,Hn),Sn.subVectors(zn,Vn);let t=[0,-on.z,on.y,0,-ln.z,ln.y,0,-Sn.z,Sn.y,on.z,0,-on.x,ln.z,0,-ln.x,Sn.z,0,-Sn.x,-on.y,on.x,0,-ln.y,ln.x,0,-Sn.y,Sn.x,0];return!Cr(t,zn,Hn,Vn,Li)||(t=[1,0,0,0,1,0,0,0,1],!Cr(t,zn,Hn,Vn,Li))?!1:(Ui.crossVectors(on,ln),t=[Ui.x,Ui.y,Ui.z],Cr(t,zn,Hn,Vn,Li))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Be).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Be).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(je[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),je[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),je[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),je[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),je[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),je[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),je[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),je[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(je),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(e){return this.min.fromArray(e.min),this.max.fromArray(e.max),this}}const je=[new U,new U,new U,new U,new U,new U,new U,new U],Be=new U,Di=new bi,zn=new U,Hn=new U,Vn=new U,on=new U,ln=new U,Sn=new U,ui=new U,Li=new U,Ui=new U,En=new U;function Cr(r,e,t,a,o){for(let l=0,s=r.length-3;l<=s;l+=3){En.fromArray(r,l);const f=o.x*Math.abs(En.x)+o.y*Math.abs(En.y)+o.z*Math.abs(En.z),m=e.dot(En),b=t.dot(En),E=a.dot(En);if(Math.max(-Math.max(m,b,E),Math.min(m,b,E))>f)return!1}return!0}const jl=new bi,di=new U,Pr=new U;class vr{constructor(e=new U,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const a=this.center;t!==void 0?a.copy(t):jl.setFromPoints(e).getCenter(a);let o=0;for(let l=0,s=e.length;l<s;l++)o=Math.max(o,a.distanceToSquared(e[l]));return this.radius=Math.sqrt(o),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const a=this.center.distanceToSquared(e);return t.copy(e),a>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;di.subVectors(e,this.center);const t=di.lengthSq();if(t>this.radius*this.radius){const a=Math.sqrt(t),o=(a-this.radius)*.5;this.center.addScaledVector(di,o/a),this.radius+=o}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(Pr.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(di.copy(e.center).add(Pr)),this.expandByPoint(di.copy(e.center).sub(Pr))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(e){return this.radius=e.radius,this.center.fromArray(e.center),this}}const $e=new U,Dr=new U,Ii=new U,cn=new U,Lr=new U,Ni=new U,Ur=new U;class Qs{constructor(e=new U,t=new U(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,$e)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const a=t.dot(this.direction);return a<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,a)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=$e.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):($e.copy(this.origin).addScaledVector(this.direction,t),$e.distanceToSquared(e))}distanceSqToSegment(e,t,a,o){Dr.copy(e).add(t).multiplyScalar(.5),Ii.copy(t).sub(e).normalize(),cn.copy(this.origin).sub(Dr);const l=e.distanceTo(t)*.5,s=-this.direction.dot(Ii),f=cn.dot(this.direction),m=-cn.dot(Ii),b=cn.lengthSq(),E=Math.abs(1-s*s);let M,I,V,Z;if(E>0)if(M=s*m-f,I=s*f-m,Z=l*E,M>=0)if(I>=-Z)if(I<=Z){const ee=1/E;M*=ee,I*=ee,V=M*(M+s*I+2*f)+I*(s*M+I+2*m)+b}else I=l,M=Math.max(0,-(s*I+f)),V=-M*M+I*(I+2*m)+b;else I=-l,M=Math.max(0,-(s*I+f)),V=-M*M+I*(I+2*m)+b;else I<=-Z?(M=Math.max(0,-(-s*l+f)),I=M>0?-l:Math.min(Math.max(-l,-m),l),V=-M*M+I*(I+2*m)+b):I<=Z?(M=0,I=Math.min(Math.max(-l,-m),l),V=I*(I+2*m)+b):(M=Math.max(0,-(s*l+f)),I=M>0?l:Math.min(Math.max(-l,-m),l),V=-M*M+I*(I+2*m)+b);else I=s>0?-l:l,M=Math.max(0,-(s*I+f)),V=-M*M+I*(I+2*m)+b;return a&&a.copy(this.origin).addScaledVector(this.direction,M),o&&o.copy(Dr).addScaledVector(Ii,I),V}intersectSphere(e,t){$e.subVectors(e.center,this.origin);const a=$e.dot(this.direction),o=$e.dot($e)-a*a,l=e.radius*e.radius;if(o>l)return null;const s=Math.sqrt(l-o),f=a-s,m=a+s;return m<0?null:f<0?this.at(m,t):this.at(f,t)}intersectsSphere(e){return e.radius<0?!1:this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const a=-(this.origin.dot(e.normal)+e.constant)/t;return a>=0?a:null}intersectPlane(e,t){const a=this.distanceToPlane(e);return a===null?null:this.at(a,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let a,o,l,s,f,m;const b=1/this.direction.x,E=1/this.direction.y,M=1/this.direction.z,I=this.origin;return b>=0?(a=(e.min.x-I.x)*b,o=(e.max.x-I.x)*b):(a=(e.max.x-I.x)*b,o=(e.min.x-I.x)*b),E>=0?(l=(e.min.y-I.y)*E,s=(e.max.y-I.y)*E):(l=(e.max.y-I.y)*E,s=(e.min.y-I.y)*E),a>s||l>o||((l>a||isNaN(a))&&(a=l),(s<o||isNaN(o))&&(o=s),M>=0?(f=(e.min.z-I.z)*M,m=(e.max.z-I.z)*M):(f=(e.max.z-I.z)*M,m=(e.min.z-I.z)*M),a>m||f>o)||((f>a||a!==a)&&(a=f),(m<o||o!==o)&&(o=m),o<0)?null:this.at(a>=0?a:o,t)}intersectsBox(e){return this.intersectBox(e,$e)!==null}intersectTriangle(e,t,a,o,l){Lr.subVectors(t,e),Ni.subVectors(a,e),Ur.crossVectors(Lr,Ni);let s=this.direction.dot(Ur),f;if(s>0){if(o)return null;f=1}else if(s<0)f=-1,s=-s;else return null;cn.subVectors(this.origin,e);const m=f*this.direction.dot(Ni.crossVectors(cn,Ni));if(m<0)return null;const b=f*this.direction.dot(Lr.cross(cn));if(b<0||m+b>s)return null;const E=-f*cn.dot(Ur);return E<0?null:this.at(E/s,l)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class he{constructor(e,t,a,o,l,s,f,m,b,E,M,I,V,Z,ee,le){he.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,a,o,l,s,f,m,b,E,M,I,V,Z,ee,le)}set(e,t,a,o,l,s,f,m,b,E,M,I,V,Z,ee,le){const K=this.elements;return K[0]=e,K[4]=t,K[8]=a,K[12]=o,K[1]=l,K[5]=s,K[9]=f,K[13]=m,K[2]=b,K[6]=E,K[10]=M,K[14]=I,K[3]=V,K[7]=Z,K[11]=ee,K[15]=le,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new he().fromArray(this.elements)}copy(e){const t=this.elements,a=e.elements;return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[8]=a[8],t[9]=a[9],t[10]=a[10],t[11]=a[11],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15],this}copyPosition(e){const t=this.elements,a=e.elements;return t[12]=a[12],t[13]=a[13],t[14]=a[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,a){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),a.setFromMatrixColumn(this,2),this}makeBasis(e,t,a){return this.set(e.x,t.x,a.x,0,e.y,t.y,a.y,0,e.z,t.z,a.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,a=e.elements,o=1/Gn.setFromMatrixColumn(e,0).length(),l=1/Gn.setFromMatrixColumn(e,1).length(),s=1/Gn.setFromMatrixColumn(e,2).length();return t[0]=a[0]*o,t[1]=a[1]*o,t[2]=a[2]*o,t[3]=0,t[4]=a[4]*l,t[5]=a[5]*l,t[6]=a[6]*l,t[7]=0,t[8]=a[8]*s,t[9]=a[9]*s,t[10]=a[10]*s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,a=e.x,o=e.y,l=e.z,s=Math.cos(a),f=Math.sin(a),m=Math.cos(o),b=Math.sin(o),E=Math.cos(l),M=Math.sin(l);if(e.order==="XYZ"){const I=s*E,V=s*M,Z=f*E,ee=f*M;t[0]=m*E,t[4]=-m*M,t[8]=b,t[1]=V+Z*b,t[5]=I-ee*b,t[9]=-f*m,t[2]=ee-I*b,t[6]=Z+V*b,t[10]=s*m}else if(e.order==="YXZ"){const I=m*E,V=m*M,Z=b*E,ee=b*M;t[0]=I+ee*f,t[4]=Z*f-V,t[8]=s*b,t[1]=s*M,t[5]=s*E,t[9]=-f,t[2]=V*f-Z,t[6]=ee+I*f,t[10]=s*m}else if(e.order==="ZXY"){const I=m*E,V=m*M,Z=b*E,ee=b*M;t[0]=I-ee*f,t[4]=-s*M,t[8]=Z+V*f,t[1]=V+Z*f,t[5]=s*E,t[9]=ee-I*f,t[2]=-s*b,t[6]=f,t[10]=s*m}else if(e.order==="ZYX"){const I=s*E,V=s*M,Z=f*E,ee=f*M;t[0]=m*E,t[4]=Z*b-V,t[8]=I*b+ee,t[1]=m*M,t[5]=ee*b+I,t[9]=V*b-Z,t[2]=-b,t[6]=f*m,t[10]=s*m}else if(e.order==="YZX"){const I=s*m,V=s*b,Z=f*m,ee=f*b;t[0]=m*E,t[4]=ee-I*M,t[8]=Z*M+V,t[1]=M,t[5]=s*E,t[9]=-f*E,t[2]=-b*E,t[6]=V*M+Z,t[10]=I-ee*M}else if(e.order==="XZY"){const I=s*m,V=s*b,Z=f*m,ee=f*b;t[0]=m*E,t[4]=-M,t[8]=b*E,t[1]=I*M+ee,t[5]=s*E,t[9]=V*M-Z,t[2]=Z*M-V,t[6]=f*E,t[10]=ee*M+I}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose($l,e,Jl)}lookAt(e,t,a){const o=this.elements;return Ce.subVectors(e,t),Ce.lengthSq()===0&&(Ce.z=1),Ce.normalize(),hn.crossVectors(a,Ce),hn.lengthSq()===0&&(Math.abs(a.z)===1?Ce.x+=1e-4:Ce.z+=1e-4,Ce.normalize(),hn.crossVectors(a,Ce)),hn.normalize(),Fi.crossVectors(Ce,hn),o[0]=hn.x,o[4]=Fi.x,o[8]=Ce.x,o[1]=hn.y,o[5]=Fi.y,o[9]=Ce.y,o[2]=hn.z,o[6]=Fi.z,o[10]=Ce.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const a=e.elements,o=t.elements,l=this.elements,s=a[0],f=a[4],m=a[8],b=a[12],E=a[1],M=a[5],I=a[9],V=a[13],Z=a[2],ee=a[6],le=a[10],K=a[14],vt=a[3],q=a[7],Q=a[11],wt=a[15],bt=o[0],Ut=o[4],it=o[8],zt=o[12],Zt=o[1],Mn=o[5],kp=o[9],zp=o[13],sa=o[2],qo=o[6],ae=o[10],wp=o[14],Cp=o[3],Kt=o[7],h0=o[11],Pp=o[15];return l[0]=s*bt+f*Zt+m*sa+b*Cp,l[4]=s*Ut+f*Mn+m*qo+b*Kt,l[8]=s*it+f*kp+m*ae+b*h0,l[12]=s*zt+f*zp+m*wp+b*Pp,l[1]=E*bt+M*Zt+I*sa+V*Cp,l[5]=E*Ut+M*Mn+I*qo+V*Kt,l[9]=E*it+M*kp+I*ae+V*h0,l[13]=E*zt+M*zp+I*wp+V*Pp,l[2]=Z*bt+ee*Zt+le*sa+K*Cp,l[6]=Z*Ut+ee*Mn+le*qo+K*Kt,l[10]=Z*it+ee*kp+le*ae+K*h0,l[14]=Z*zt+ee*zp+le*wp+K*Pp,l[3]=vt*bt+q*Zt+Q*sa+wt*Cp,l[7]=vt*Ut+q*Mn+Q*qo+wt*Kt,l[11]=vt*it+q*kp+Q*ae+wt*h0,l[15]=vt*zt+q*zp+Q*wp+wt*Pp,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],a=e[4],o=e[8],l=e[12],s=e[1],f=e[5],m=e[9],b=e[13],E=e[2],M=e[6],I=e[10],V=e[14],Z=e[3],ee=e[7],le=e[11],K=e[15];return Z*(+l*m*M-o*b*M-l*f*I+a*b*I+o*f*V-a*m*V)+ee*(+t*m*V-t*b*I+l*s*I-o*s*V+o*b*E-l*m*E)+le*(+t*b*M-t*f*V-l*s*M+a*s*V+l*f*E-a*b*E)+K*(-o*f*E-t*m*M+t*f*I+o*s*M-a*s*I+a*m*E)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,a){const o=this.elements;return e.isVector3?(o[12]=e.x,o[13]=e.y,o[14]=e.z):(o[12]=e,o[13]=t,o[14]=a),this}invert(){const e=this.elements,t=e[0],a=e[1],o=e[2],l=e[3],s=e[4],f=e[5],m=e[6],b=e[7],E=e[8],M=e[9],I=e[10],V=e[11],Z=e[12],ee=e[13],le=e[14],K=e[15],vt=M*le*b-ee*I*b+ee*m*V-f*le*V-M*m*K+f*I*K,q=Z*I*b-E*le*b-Z*m*V+s*le*V+E*m*K-s*I*K,Q=E*ee*b-Z*M*b+Z*f*V-s*ee*V-E*f*K+s*M*K,wt=Z*M*m-E*ee*m-Z*f*I+s*ee*I+E*f*le-s*M*le,bt=t*vt+a*q+o*Q+l*wt;if(bt===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const Ut=1/bt;return e[0]=vt*Ut,e[1]=(ee*I*l-M*le*l-ee*o*V+a*le*V+M*o*K-a*I*K)*Ut,e[2]=(f*le*l-ee*m*l+ee*o*b-a*le*b-f*o*K+a*m*K)*Ut,e[3]=(M*m*l-f*I*l-M*o*b+a*I*b+f*o*V-a*m*V)*Ut,e[4]=q*Ut,e[5]=(E*le*l-Z*I*l+Z*o*V-t*le*V-E*o*K+t*I*K)*Ut,e[6]=(Z*m*l-s*le*l-Z*o*b+t*le*b+s*o*K-t*m*K)*Ut,e[7]=(s*I*l-E*m*l+E*o*b-t*I*b-s*o*V+t*m*V)*Ut,e[8]=Q*Ut,e[9]=(Z*M*l-E*ee*l-Z*a*V+t*ee*V+E*a*K-t*M*K)*Ut,e[10]=(s*ee*l-Z*f*l+Z*a*b-t*ee*b-s*a*K+t*f*K)*Ut,e[11]=(E*f*l-s*M*l-E*a*b+t*M*b+s*a*V-t*f*V)*Ut,e[12]=wt*Ut,e[13]=(E*ee*o-Z*M*o+Z*a*I-t*ee*I-E*a*le+t*M*le)*Ut,e[14]=(Z*f*o-s*ee*o-Z*a*m+t*ee*m+s*a*le-t*f*le)*Ut,e[15]=(s*M*o-E*f*o+E*a*m-t*M*m-s*a*I+t*f*I)*Ut,this}scale(e){const t=this.elements,a=e.x,o=e.y,l=e.z;return t[0]*=a,t[4]*=o,t[8]*=l,t[1]*=a,t[5]*=o,t[9]*=l,t[2]*=a,t[6]*=o,t[10]*=l,t[3]*=a,t[7]*=o,t[11]*=l,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],a=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],o=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,a,o))}makeTranslation(e,t,a){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,a,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),a=Math.sin(e);return this.set(1,0,0,0,0,t,-a,0,0,a,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),a=Math.sin(e);return this.set(t,0,a,0,0,1,0,0,-a,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),a=Math.sin(e);return this.set(t,-a,0,0,a,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const a=Math.cos(t),o=Math.sin(t),l=1-a,s=e.x,f=e.y,m=e.z,b=l*s,E=l*f;return this.set(b*s+a,b*f-o*m,b*m+o*f,0,b*f+o*m,E*f+a,E*m-o*s,0,b*m-o*f,E*m+o*s,l*m*m+a,0,0,0,0,1),this}makeScale(e,t,a){return this.set(e,0,0,0,0,t,0,0,0,0,a,0,0,0,0,1),this}makeShear(e,t,a,o,l,s){return this.set(1,a,l,0,e,1,s,0,t,o,1,0,0,0,0,1),this}compose(e,t,a){const o=this.elements,l=t._x,s=t._y,f=t._z,m=t._w,b=l+l,E=s+s,M=f+f,I=l*b,V=l*E,Z=l*M,ee=s*E,le=s*M,K=f*M,vt=m*b,q=m*E,Q=m*M,wt=a.x,bt=a.y,Ut=a.z;return o[0]=(1-(ee+K))*wt,o[1]=(V+Q)*wt,o[2]=(Z-q)*wt,o[3]=0,o[4]=(V-Q)*bt,o[5]=(1-(I+K))*bt,o[6]=(le+vt)*bt,o[7]=0,o[8]=(Z+q)*Ut,o[9]=(le-vt)*Ut,o[10]=(1-(I+ee))*Ut,o[11]=0,o[12]=e.x,o[13]=e.y,o[14]=e.z,o[15]=1,this}decompose(e,t,a){const o=this.elements;let l=Gn.set(o[0],o[1],o[2]).length();const s=Gn.set(o[4],o[5],o[6]).length(),f=Gn.set(o[8],o[9],o[10]).length();this.determinant()<0&&(l=-l),e.x=o[12],e.y=o[13],e.z=o[14],ze.copy(this);const m=1/l,b=1/s,E=1/f;return ze.elements[0]*=m,ze.elements[1]*=m,ze.elements[2]*=m,ze.elements[4]*=b,ze.elements[5]*=b,ze.elements[6]*=b,ze.elements[8]*=E,ze.elements[9]*=E,ze.elements[10]*=E,t.setFromRotationMatrix(ze),a.x=l,a.y=s,a.z=f,this}makePerspective(e,t,a,o,l,s,f=qe,m=!1){const b=this.elements,E=2*l/(t-e),M=2*l/(a-o),I=(t+e)/(t-e),V=(a+o)/(a-o);let Z,ee;if(m)Z=l/(s-l),ee=s*l/(s-l);else if(f===qe)Z=-(s+l)/(s-l),ee=-2*s*l/(s-l);else if(f===ur)Z=-s/(s-l),ee=-s*l/(s-l);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+f);return b[0]=E,b[4]=0,b[8]=I,b[12]=0,b[1]=0,b[5]=M,b[9]=V,b[13]=0,b[2]=0,b[6]=0,b[10]=Z,b[14]=ee,b[3]=0,b[7]=0,b[11]=-1,b[15]=0,this}makeOrthographic(e,t,a,o,l,s,f=qe,m=!1){const b=this.elements,E=2/(t-e),M=2/(a-o),I=-(t+e)/(t-e),V=-(a+o)/(a-o);let Z,ee;if(m)Z=1/(s-l),ee=s/(s-l);else if(f===qe)Z=-2/(s-l),ee=-(s+l)/(s-l);else if(f===ur)Z=-1/(s-l),ee=-l/(s-l);else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+f);return b[0]=E,b[4]=0,b[8]=0,b[12]=I,b[1]=0,b[5]=M,b[9]=0,b[13]=V,b[2]=0,b[6]=0,b[10]=Z,b[14]=ee,b[3]=0,b[7]=0,b[11]=0,b[15]=1,this}equals(e){const t=this.elements,a=e.elements;for(let o=0;o<16;o++)if(t[o]!==a[o])return!1;return!0}fromArray(e,t=0){for(let a=0;a<16;a++)this.elements[a]=e[a+t];return this}toArray(e=[],t=0){const a=this.elements;return e[t]=a[0],e[t+1]=a[1],e[t+2]=a[2],e[t+3]=a[3],e[t+4]=a[4],e[t+5]=a[5],e[t+6]=a[6],e[t+7]=a[7],e[t+8]=a[8],e[t+9]=a[9],e[t+10]=a[10],e[t+11]=a[11],e[t+12]=a[12],e[t+13]=a[13],e[t+14]=a[14],e[t+15]=a[15],e}}const Gn=new U,ze=new he,$l=new U(0,0,0),Jl=new U(1,1,1),hn=new U,Fi=new U,Ce=new U,Ea=new he,ya=new Un;class an{constructor(e=0,t=0,a=0,o=an.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=a,this._order=o}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,a,o=this._order){return this._x=e,this._y=t,this._z=a,this._order=o,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,a=!0){const o=e.elements,l=o[0],s=o[4],f=o[8],m=o[1],b=o[5],E=o[9],M=o[2],I=o[6],V=o[10];switch(t){case"XYZ":this._y=Math.asin(Vt(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(-E,V),this._z=Math.atan2(-s,l)):(this._x=Math.atan2(I,b),this._z=0);break;case"YXZ":this._x=Math.asin(-Vt(E,-1,1)),Math.abs(E)<.9999999?(this._y=Math.atan2(f,V),this._z=Math.atan2(m,b)):(this._y=Math.atan2(-M,l),this._z=0);break;case"ZXY":this._x=Math.asin(Vt(I,-1,1)),Math.abs(I)<.9999999?(this._y=Math.atan2(-M,V),this._z=Math.atan2(-s,b)):(this._y=0,this._z=Math.atan2(m,l));break;case"ZYX":this._y=Math.asin(-Vt(M,-1,1)),Math.abs(M)<.9999999?(this._x=Math.atan2(I,V),this._z=Math.atan2(m,l)):(this._x=0,this._z=Math.atan2(-s,b));break;case"YZX":this._z=Math.asin(Vt(m,-1,1)),Math.abs(m)<.9999999?(this._x=Math.atan2(-E,b),this._y=Math.atan2(-M,l)):(this._x=0,this._y=Math.atan2(f,V));break;case"XZY":this._z=Math.asin(-Vt(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(I,b),this._y=Math.atan2(f,l)):(this._x=Math.atan2(-E,V),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,a===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,a){return Ea.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Ea,t,a)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return ya.setFromEuler(this),this.setFromQuaternion(ya,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}an.DEFAULT_ORDER="XYZ";class Po{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let Ql=0;const Ta=new U,kn=new Un,Je=new he,Oi=new U,fi=new U,tc=new U,ec=new Un,ba=new U(1,0,0),Aa=new U(0,1,0),Ra=new U(0,0,1),wa={type:"added"},nc={type:"removed"},Wn={type:"childadded",child:null},Ir={type:"childremoved",child:null};class Me extends Nn{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Ql++}),this.uuid=Ti(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Me.DEFAULT_UP.clone();const e=new U,t=new an,a=new Un,o=new U(1,1,1);function l(){a.setFromEuler(t,!1)}function s(){t.setFromQuaternion(a,void 0,!1)}t._onChange(l),a._onChange(s),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:a},scale:{configurable:!0,enumerable:!0,value:o},modelViewMatrix:{value:new he},normalMatrix:{value:new Ft}}),this.matrix=new he,this.matrixWorld=new he,this.matrixAutoUpdate=Me.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Me.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Po,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return kn.setFromAxisAngle(e,t),this.quaternion.multiply(kn),this}rotateOnWorldAxis(e,t){return kn.setFromAxisAngle(e,t),this.quaternion.premultiply(kn),this}rotateX(e){return this.rotateOnAxis(ba,e)}rotateY(e){return this.rotateOnAxis(Aa,e)}rotateZ(e){return this.rotateOnAxis(Ra,e)}translateOnAxis(e,t){return Ta.copy(e).applyQuaternion(this.quaternion),this.position.add(Ta.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(ba,e)}translateY(e){return this.translateOnAxis(Aa,e)}translateZ(e){return this.translateOnAxis(Ra,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Je.copy(this.matrixWorld).invert())}lookAt(e,t,a){e.isVector3?Oi.copy(e):Oi.set(e,t,a);const o=this.parent;this.updateWorldMatrix(!0,!1),fi.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Je.lookAt(fi,Oi,this.up):Je.lookAt(Oi,fi,this.up),this.quaternion.setFromRotationMatrix(Je),o&&(Je.extractRotation(o.matrixWorld),kn.setFromRotationMatrix(Je),this.quaternion.premultiply(kn.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(wa),Wn.child=e,this.dispatchEvent(Wn),Wn.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let a=0;a<arguments.length;a++)this.remove(arguments[a]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(nc),Ir.child=e,this.dispatchEvent(Ir),Ir.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Je.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Je.multiply(e.parent.matrixWorld)),e.applyMatrix4(Je),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(wa),Wn.child=e,this.dispatchEvent(Wn),Wn.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let a=0,o=this.children.length;a<o;a++){const l=this.children[a].getObjectByProperty(e,t);if(l!==void 0)return l}}getObjectsByProperty(e,t,a=[]){this[e]===t&&a.push(this);const o=this.children;for(let l=0,s=o.length;l<s;l++)o[l].getObjectsByProperty(e,t,a);return a}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(fi,e,tc),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(fi,ec,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let a=0,o=t.length;a<o;a++)t[a].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let a=0,o=t.length;a<o;a++)t[a].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let a=0,o=t.length;a<o;a++)t[a].updateMatrixWorld(e)}updateWorldMatrix(e,t){const a=this.parent;if(e===!0&&a!==null&&a.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const o=this.children;for(let l=0,s=o.length;l<s;l++)o[l].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",a={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},a.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const o={};o.uuid=this.uuid,o.type=this.type,this.name!==""&&(o.name=this.name),this.castShadow===!0&&(o.castShadow=!0),this.receiveShadow===!0&&(o.receiveShadow=!0),this.visible===!1&&(o.visible=!1),this.frustumCulled===!1&&(o.frustumCulled=!1),this.renderOrder!==0&&(o.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(o.userData=this.userData),o.layers=this.layers.mask,o.matrix=this.matrix.toArray(),o.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(o.matrixAutoUpdate=!1),this.isInstancedMesh&&(o.type="InstancedMesh",o.count=this.count,o.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(o.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(o.type="BatchedMesh",o.perObjectFrustumCulled=this.perObjectFrustumCulled,o.sortObjects=this.sortObjects,o.drawRanges=this._drawRanges,o.reservedRanges=this._reservedRanges,o.geometryInfo=this._geometryInfo.map(f=>({...f,boundingBox:f.boundingBox?f.boundingBox.toJSON():void 0,boundingSphere:f.boundingSphere?f.boundingSphere.toJSON():void 0})),o.instanceInfo=this._instanceInfo.map(f=>({...f})),o.availableInstanceIds=this._availableInstanceIds.slice(),o.availableGeometryIds=this._availableGeometryIds.slice(),o.nextIndexStart=this._nextIndexStart,o.nextVertexStart=this._nextVertexStart,o.geometryCount=this._geometryCount,o.maxInstanceCount=this._maxInstanceCount,o.maxVertexCount=this._maxVertexCount,o.maxIndexCount=this._maxIndexCount,o.geometryInitialized=this._geometryInitialized,o.matricesTexture=this._matricesTexture.toJSON(e),o.indirectTexture=this._indirectTexture.toJSON(e),this._colorsTexture!==null&&(o.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(o.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(o.boundingBox=this.boundingBox.toJSON()));function l(f,m){return f[m.uuid]===void 0&&(f[m.uuid]=m.toJSON(e)),m.uuid}if(this.isScene)this.background&&(this.background.isColor?o.background=this.background.toJSON():this.background.isTexture&&(o.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(o.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){o.geometry=l(e.geometries,this.geometry);const f=this.geometry.parameters;if(f!==void 0&&f.shapes!==void 0){const m=f.shapes;if(Array.isArray(m))for(let b=0,E=m.length;b<E;b++){const M=m[b];l(e.shapes,M)}else l(e.shapes,m)}}if(this.isSkinnedMesh&&(o.bindMode=this.bindMode,o.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(l(e.skeletons,this.skeleton),o.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const f=[];for(let m=0,b=this.material.length;m<b;m++)f.push(l(e.materials,this.material[m]));o.material=f}else o.material=l(e.materials,this.material);if(this.children.length>0){o.children=[];for(let f=0;f<this.children.length;f++)o.children.push(this.children[f].toJSON(e).object)}if(this.animations.length>0){o.animations=[];for(let f=0;f<this.animations.length;f++){const m=this.animations[f];o.animations.push(l(e.animations,m))}}if(t){const f=s(e.geometries),m=s(e.materials),b=s(e.textures),E=s(e.images),M=s(e.shapes),I=s(e.skeletons),V=s(e.animations),Z=s(e.nodes);f.length>0&&(a.geometries=f),m.length>0&&(a.materials=m),b.length>0&&(a.textures=b),E.length>0&&(a.images=E),M.length>0&&(a.shapes=M),I.length>0&&(a.skeletons=I),V.length>0&&(a.animations=V),Z.length>0&&(a.nodes=Z)}return a.object=o,a;function s(f){const m=[];for(const b in f){const E=f[b];delete E.metadata,m.push(E)}return m}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let a=0;a<e.children.length;a++){const o=e.children[a];this.add(o.clone())}return this}}Me.DEFAULT_UP=new U(0,1,0);Me.DEFAULT_MATRIX_AUTO_UPDATE=!0;Me.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const He=new U,Qe=new U,Nr=new U,tn=new U,Xn=new U,Yn=new U,Ca=new U,Fr=new U,Or=new U,Br=new U,zr=new oe,Hr=new oe,Vr=new oe;class Oe{constructor(e=new U,t=new U,a=new U){this.a=e,this.b=t,this.c=a}static getNormal(e,t,a,o){o.subVectors(a,t),He.subVectors(e,t),o.cross(He);const l=o.lengthSq();return l>0?o.multiplyScalar(1/Math.sqrt(l)):o.set(0,0,0)}static getBarycoord(e,t,a,o,l){He.subVectors(o,t),Qe.subVectors(a,t),Nr.subVectors(e,t);const s=He.dot(He),f=He.dot(Qe),m=He.dot(Nr),b=Qe.dot(Qe),E=Qe.dot(Nr),M=s*b-f*f;if(M===0)return l.set(0,0,0),null;const I=1/M,V=(b*m-f*E)*I,Z=(s*E-f*m)*I;return l.set(1-V-Z,Z,V)}static containsPoint(e,t,a,o){return this.getBarycoord(e,t,a,o,tn)===null?!1:tn.x>=0&&tn.y>=0&&tn.x+tn.y<=1}static getInterpolation(e,t,a,o,l,s,f,m){return this.getBarycoord(e,t,a,o,tn)===null?(m.x=0,m.y=0,"z"in m&&(m.z=0),"w"in m&&(m.w=0),null):(m.setScalar(0),m.addScaledVector(l,tn.x),m.addScaledVector(s,tn.y),m.addScaledVector(f,tn.z),m)}static getInterpolatedAttribute(e,t,a,o,l,s){return zr.setScalar(0),Hr.setScalar(0),Vr.setScalar(0),zr.fromBufferAttribute(e,t),Hr.fromBufferAttribute(e,a),Vr.fromBufferAttribute(e,o),s.setScalar(0),s.addScaledVector(zr,l.x),s.addScaledVector(Hr,l.y),s.addScaledVector(Vr,l.z),s}static isFrontFacing(e,t,a,o){return He.subVectors(a,t),Qe.subVectors(e,t),He.cross(Qe).dot(o)<0}set(e,t,a){return this.a.copy(e),this.b.copy(t),this.c.copy(a),this}setFromPointsAndIndices(e,t,a,o){return this.a.copy(e[t]),this.b.copy(e[a]),this.c.copy(e[o]),this}setFromAttributeAndIndices(e,t,a,o){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,a),this.c.fromBufferAttribute(e,o),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return He.subVectors(this.c,this.b),Qe.subVectors(this.a,this.b),He.cross(Qe).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Oe.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Oe.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,a,o,l){return Oe.getInterpolation(e,this.a,this.b,this.c,t,a,o,l)}containsPoint(e){return Oe.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Oe.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const a=this.a,o=this.b,l=this.c;let s,f;Xn.subVectors(o,a),Yn.subVectors(l,a),Fr.subVectors(e,a);const m=Xn.dot(Fr),b=Yn.dot(Fr);if(m<=0&&b<=0)return t.copy(a);Or.subVectors(e,o);const E=Xn.dot(Or),M=Yn.dot(Or);if(E>=0&&M<=E)return t.copy(o);const I=m*M-E*b;if(I<=0&&m>=0&&E<=0)return s=m/(m-E),t.copy(a).addScaledVector(Xn,s);Br.subVectors(e,l);const V=Xn.dot(Br),Z=Yn.dot(Br);if(Z>=0&&V<=Z)return t.copy(l);const ee=V*b-m*Z;if(ee<=0&&b>=0&&Z<=0)return f=b/(b-Z),t.copy(a).addScaledVector(Yn,f);const le=E*Z-V*M;if(le<=0&&M-E>=0&&V-Z>=0)return Ca.subVectors(l,o),f=(M-E)/(M-E+(V-Z)),t.copy(o).addScaledVector(Ca,f);const K=1/(le+ee+I);return s=ee*K,f=I*K,t.copy(a).addScaledVector(Xn,s).addScaledVector(Yn,f)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const Do={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},un={h:0,s:0,l:0},Bi={h:0,s:0,l:0};function Gr(r,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?r+(e-r)*6*t:t<1/2?e:t<2/3?r+(e-r)*6*(2/3-t):r}class qt{constructor(e,t,a){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,a)}set(e,t,a){if(t===void 0&&a===void 0){const o=e;o&&o.isColor?this.copy(o):typeof o=="number"?this.setHex(o):typeof o=="string"&&this.setStyle(o)}else this.setRGB(e,t,a);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Ne){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Xt.colorSpaceToWorking(this,t),this}setRGB(e,t,a,o=Xt.workingColorSpace){return this.r=e,this.g=t,this.b=a,Xt.colorSpaceToWorking(this,o),this}setHSL(e,t,a,o=Xt.workingColorSpace){if(e=Hl(e,1),t=Vt(t,0,1),a=Vt(a,0,1),t===0)this.r=this.g=this.b=a;else{const l=a<=.5?a*(1+t):a+t-a*t,s=2*a-l;this.r=Gr(s,l,e+1/3),this.g=Gr(s,l,e),this.b=Gr(s,l,e-1/3)}return Xt.colorSpaceToWorking(this,o),this}setStyle(e,t=Ne){function a(l){l!==void 0&&parseFloat(l)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let o;if(o=/^(\w+)\(([^\)]*)\)/.exec(e)){let l;const s=o[1],f=o[2];switch(s){case"rgb":case"rgba":if(l=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(f))return a(l[4]),this.setRGB(Math.min(255,parseInt(l[1],10))/255,Math.min(255,parseInt(l[2],10))/255,Math.min(255,parseInt(l[3],10))/255,t);if(l=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(f))return a(l[4]),this.setRGB(Math.min(100,parseInt(l[1],10))/100,Math.min(100,parseInt(l[2],10))/100,Math.min(100,parseInt(l[3],10))/100,t);break;case"hsl":case"hsla":if(l=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(f))return a(l[4]),this.setHSL(parseFloat(l[1])/360,parseFloat(l[2])/100,parseFloat(l[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(o=/^\#([A-Fa-f\d]+)$/.exec(e)){const l=o[1],s=l.length;if(s===3)return this.setRGB(parseInt(l.charAt(0),16)/15,parseInt(l.charAt(1),16)/15,parseInt(l.charAt(2),16)/15,t);if(s===6)return this.setHex(parseInt(l,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Ne){const a=Do[e.toLowerCase()];return a!==void 0?this.setHex(a,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=rn(e.r),this.g=rn(e.g),this.b=rn(e.b),this}copyLinearToSRGB(e){return this.r=ei(e.r),this.g=ei(e.g),this.b=ei(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Ne){return Xt.workingToColorSpace(ge.copy(this),e),Math.round(Vt(ge.r*255,0,255))*65536+Math.round(Vt(ge.g*255,0,255))*256+Math.round(Vt(ge.b*255,0,255))}getHexString(e=Ne){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Xt.workingColorSpace){Xt.workingToColorSpace(ge.copy(this),t);const a=ge.r,o=ge.g,l=ge.b,s=Math.max(a,o,l),f=Math.min(a,o,l);let m,b;const E=(f+s)/2;if(f===s)m=0,b=0;else{const M=s-f;switch(b=E<=.5?M/(s+f):M/(2-s-f),s){case a:m=(o-l)/M+(o<l?6:0);break;case o:m=(l-a)/M+2;break;case l:m=(a-o)/M+4;break}m/=6}return e.h=m,e.s=b,e.l=E,e}getRGB(e,t=Xt.workingColorSpace){return Xt.workingToColorSpace(ge.copy(this),t),e.r=ge.r,e.g=ge.g,e.b=ge.b,e}getStyle(e=Ne){Xt.workingToColorSpace(ge.copy(this),e);const t=ge.r,a=ge.g,o=ge.b;return e!==Ne?`color(${e} ${t.toFixed(3)} ${a.toFixed(3)} ${o.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(a*255)},${Math.round(o*255)})`}offsetHSL(e,t,a){return this.getHSL(un),this.setHSL(un.h+e,un.s+t,un.l+a)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,a){return this.r=e.r+(t.r-e.r)*a,this.g=e.g+(t.g-e.g)*a,this.b=e.b+(t.b-e.b)*a,this}lerpHSL(e,t){this.getHSL(un),e.getHSL(Bi);const a=Tr(un.h,Bi.h,t),o=Tr(un.s,Bi.s,t),l=Tr(un.l,Bi.l,t);return this.setHSL(a,o,l),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,a=this.g,o=this.b,l=e.elements;return this.r=l[0]*t+l[3]*a+l[6]*o,this.g=l[1]*t+l[4]*a+l[7]*o,this.b=l[2]*t+l[5]*a+l[8]*o,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const ge=new qt;qt.NAMES=Do;let ic=0;class Ai extends Nn{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:ic++}),this.uuid=Ti(),this.name="",this.type="Material",this.blending=ti,this.side=gn,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=is,this.blendDst=rs,this.blendEquation=wn,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new qt(0,0,0),this.blendAlpha=0,this.depthFunc=ii,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=ma,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=On,this.stencilZFail=On,this.stencilZPass=On,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const a=e[t];if(a===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const o=this[t];if(o===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}o&&o.isColor?o.set(a):o&&o.isVector3&&a&&a.isVector3?o.copy(a):this[t]=a}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const a={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};a.uuid=this.uuid,a.type=this.type,this.name!==""&&(a.name=this.name),this.color&&this.color.isColor&&(a.color=this.color.getHex()),this.roughness!==void 0&&(a.roughness=this.roughness),this.metalness!==void 0&&(a.metalness=this.metalness),this.sheen!==void 0&&(a.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(a.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(a.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(a.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(a.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(a.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(a.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(a.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(a.shininess=this.shininess),this.clearcoat!==void 0&&(a.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(a.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(a.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(a.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(a.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,a.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.sheenColorMap&&this.sheenColorMap.isTexture&&(a.sheenColorMap=this.sheenColorMap.toJSON(e).uuid),this.sheenRoughnessMap&&this.sheenRoughnessMap.isTexture&&(a.sheenRoughnessMap=this.sheenRoughnessMap.toJSON(e).uuid),this.dispersion!==void 0&&(a.dispersion=this.dispersion),this.iridescence!==void 0&&(a.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(a.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(a.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(a.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(a.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(a.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(a.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(a.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(a.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(a.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(a.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(a.lightMap=this.lightMap.toJSON(e).uuid,a.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(a.aoMap=this.aoMap.toJSON(e).uuid,a.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(a.bumpMap=this.bumpMap.toJSON(e).uuid,a.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(a.normalMap=this.normalMap.toJSON(e).uuid,a.normalMapType=this.normalMapType,a.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(a.displacementMap=this.displacementMap.toJSON(e).uuid,a.displacementScale=this.displacementScale,a.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(a.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(a.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(a.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(a.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(a.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(a.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(a.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(a.combine=this.combine)),this.envMapRotation!==void 0&&(a.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(a.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(a.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(a.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(a.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(a.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(a.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(a.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(a.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(a.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(a.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(a.size=this.size),this.shadowSide!==null&&(a.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(a.sizeAttenuation=this.sizeAttenuation),this.blending!==ti&&(a.blending=this.blending),this.side!==gn&&(a.side=this.side),this.vertexColors===!0&&(a.vertexColors=!0),this.opacity<1&&(a.opacity=this.opacity),this.transparent===!0&&(a.transparent=!0),this.blendSrc!==is&&(a.blendSrc=this.blendSrc),this.blendDst!==rs&&(a.blendDst=this.blendDst),this.blendEquation!==wn&&(a.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(a.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(a.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(a.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(a.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(a.blendAlpha=this.blendAlpha),this.depthFunc!==ii&&(a.depthFunc=this.depthFunc),this.depthTest===!1&&(a.depthTest=this.depthTest),this.depthWrite===!1&&(a.depthWrite=this.depthWrite),this.colorWrite===!1&&(a.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(a.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==ma&&(a.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(a.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(a.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==On&&(a.stencilFail=this.stencilFail),this.stencilZFail!==On&&(a.stencilZFail=this.stencilZFail),this.stencilZPass!==On&&(a.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(a.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(a.rotation=this.rotation),this.polygonOffset===!0&&(a.polygonOffset=!0),this.polygonOffsetFactor!==0&&(a.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(a.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(a.linewidth=this.linewidth),this.dashSize!==void 0&&(a.dashSize=this.dashSize),this.gapSize!==void 0&&(a.gapSize=this.gapSize),this.scale!==void 0&&(a.scale=this.scale),this.dithering===!0&&(a.dithering=!0),this.alphaTest>0&&(a.alphaTest=this.alphaTest),this.alphaHash===!0&&(a.alphaHash=!0),this.alphaToCoverage===!0&&(a.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(a.premultipliedAlpha=!0),this.forceSinglePass===!0&&(a.forceSinglePass=!0),this.wireframe===!0&&(a.wireframe=!0),this.wireframeLinewidth>1&&(a.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(a.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(a.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(a.flatShading=!0),this.visible===!1&&(a.visible=!1),this.toneMapped===!1&&(a.toneMapped=!1),this.fog===!1&&(a.fog=!1),Object.keys(this.userData).length>0&&(a.userData=this.userData);function o(l){const s=[];for(const f in l){const m=l[f];delete m.metadata,s.push(m)}return s}if(t){const l=o(e.textures),s=o(e.images);l.length>0&&(a.textures=l),s.length>0&&(a.images=s)}return a}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let a=null;if(t!==null){const o=t.length;a=new Array(o);for(let l=0;l!==o;++l)a[l]=t[l].clone()}return this.clippingPlanes=a,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class ni extends Ai{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new qt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new an,this.combine=go,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const ce=new U,zi=new Bt;let rc=0;class Ke{constructor(e,t,a=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:rc++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=a,this.usage=_a,this.updateRanges=[],this.gpuType=nn,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,a){e*=this.itemSize,a*=t.itemSize;for(let o=0,l=this.itemSize;o<l;o++)this.array[e+o]=t.array[a+o];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,a=this.count;t<a;t++)zi.fromBufferAttribute(this,t),zi.applyMatrix3(e),this.setXY(t,zi.x,zi.y);else if(this.itemSize===3)for(let t=0,a=this.count;t<a;t++)ce.fromBufferAttribute(this,t),ce.applyMatrix3(e),this.setXYZ(t,ce.x,ce.y,ce.z);return this}applyMatrix4(e){for(let t=0,a=this.count;t<a;t++)ce.fromBufferAttribute(this,t),ce.applyMatrix4(e),this.setXYZ(t,ce.x,ce.y,ce.z);return this}applyNormalMatrix(e){for(let t=0,a=this.count;t<a;t++)ce.fromBufferAttribute(this,t),ce.applyNormalMatrix(e),this.setXYZ(t,ce.x,ce.y,ce.z);return this}transformDirection(e){for(let t=0,a=this.count;t<a;t++)ce.fromBufferAttribute(this,t),ce.transformDirection(e),this.setXYZ(t,ce.x,ce.y,ce.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let a=this.array[e*this.itemSize+t];return this.normalized&&(a=hi(a,this.array)),a}setComponent(e,t,a){return this.normalized&&(a=Ee(a,this.array)),this.array[e*this.itemSize+t]=a,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=hi(t,this.array)),t}setX(e,t){return this.normalized&&(t=Ee(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=hi(t,this.array)),t}setY(e,t){return this.normalized&&(t=Ee(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=hi(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Ee(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=hi(t,this.array)),t}setW(e,t){return this.normalized&&(t=Ee(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,a){return e*=this.itemSize,this.normalized&&(t=Ee(t,this.array),a=Ee(a,this.array)),this.array[e+0]=t,this.array[e+1]=a,this}setXYZ(e,t,a,o){return e*=this.itemSize,this.normalized&&(t=Ee(t,this.array),a=Ee(a,this.array),o=Ee(o,this.array)),this.array[e+0]=t,this.array[e+1]=a,this.array[e+2]=o,this}setXYZW(e,t,a,o,l){return e*=this.itemSize,this.normalized&&(t=Ee(t,this.array),a=Ee(a,this.array),o=Ee(o,this.array),l=Ee(l,this.array)),this.array[e+0]=t,this.array[e+1]=a,this.array[e+2]=o,this.array[e+3]=l,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==_a&&(e.usage=this.usage),e}}class Lo extends Ke{constructor(e,t,a){super(new Uint16Array(e),t,a)}}class Uo extends Ke{constructor(e,t,a){super(new Uint32Array(e),t,a)}}class me extends Ke{constructor(e,t,a){super(new Float32Array(e),t,a)}}let sc=0;const Ie=new he,kr=new Me,qn=new U,Pe=new bi,pi=new bi,pe=new U;class Ae extends Nn{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:sc++}),this.uuid=Ti(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(wo(e)?Uo:Lo)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,a=0){this.groups.push({start:e,count:t,materialIndex:a})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const a=this.attributes.normal;if(a!==void 0){const l=new Ft().getNormalMatrix(e);a.applyNormalMatrix(l),a.needsUpdate=!0}const o=this.attributes.tangent;return o!==void 0&&(o.transformDirection(e),o.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Ie.makeRotationFromQuaternion(e),this.applyMatrix4(Ie),this}rotateX(e){return Ie.makeRotationX(e),this.applyMatrix4(Ie),this}rotateY(e){return Ie.makeRotationY(e),this.applyMatrix4(Ie),this}rotateZ(e){return Ie.makeRotationZ(e),this.applyMatrix4(Ie),this}translate(e,t,a){return Ie.makeTranslation(e,t,a),this.applyMatrix4(Ie),this}scale(e,t,a){return Ie.makeScale(e,t,a),this.applyMatrix4(Ie),this}lookAt(e){return kr.lookAt(e),kr.updateMatrix(),this.applyMatrix4(kr.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(qn).negate(),this.translate(qn.x,qn.y,qn.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const a=[];for(let o=0,l=e.length;o<l;o++){const s=e[o];a.push(s.x,s.y,s.z||0)}this.setAttribute("position",new me(a,3))}else{const a=Math.min(e.length,t.count);for(let o=0;o<a;o++){const l=e[o];t.setXYZ(o,l.x,l.y,l.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new bi);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new U(-1/0,-1/0,-1/0),new U(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let a=0,o=t.length;a<o;a++){const l=t[a];Pe.setFromBufferAttribute(l),this.morphTargetsRelative?(pe.addVectors(this.boundingBox.min,Pe.min),this.boundingBox.expandByPoint(pe),pe.addVectors(this.boundingBox.max,Pe.max),this.boundingBox.expandByPoint(pe)):(this.boundingBox.expandByPoint(Pe.min),this.boundingBox.expandByPoint(Pe.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new vr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new U,1/0);return}if(e){const a=this.boundingSphere.center;if(Pe.setFromBufferAttribute(e),t)for(let l=0,s=t.length;l<s;l++){const f=t[l];pi.setFromBufferAttribute(f),this.morphTargetsRelative?(pe.addVectors(Pe.min,pi.min),Pe.expandByPoint(pe),pe.addVectors(Pe.max,pi.max),Pe.expandByPoint(pe)):(Pe.expandByPoint(pi.min),Pe.expandByPoint(pi.max))}Pe.getCenter(a);let o=0;for(let l=0,s=e.count;l<s;l++)pe.fromBufferAttribute(e,l),o=Math.max(o,a.distanceToSquared(pe));if(t)for(let l=0,s=t.length;l<s;l++){const f=t[l],m=this.morphTargetsRelative;for(let b=0,E=f.count;b<E;b++)pe.fromBufferAttribute(f,b),m&&(qn.fromBufferAttribute(e,b),pe.add(qn)),o=Math.max(o,a.distanceToSquared(pe))}this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const a=t.position,o=t.normal,l=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Ke(new Float32Array(4*a.count),4));const s=this.getAttribute("tangent"),f=[],m=[];for(let it=0;it<a.count;it++)f[it]=new U,m[it]=new U;const b=new U,E=new U,M=new U,I=new Bt,V=new Bt,Z=new Bt,ee=new U,le=new U;function K(it,zt,Zt){b.fromBufferAttribute(a,it),E.fromBufferAttribute(a,zt),M.fromBufferAttribute(a,Zt),I.fromBufferAttribute(l,it),V.fromBufferAttribute(l,zt),Z.fromBufferAttribute(l,Zt),E.sub(b),M.sub(b),V.sub(I),Z.sub(I);const Mn=1/(V.x*Z.y-Z.x*V.y);isFinite(Mn)&&(ee.copy(E).multiplyScalar(Z.y).addScaledVector(M,-V.y).multiplyScalar(Mn),le.copy(M).multiplyScalar(V.x).addScaledVector(E,-Z.x).multiplyScalar(Mn),f[it].add(ee),f[zt].add(ee),f[Zt].add(ee),m[it].add(le),m[zt].add(le),m[Zt].add(le))}let vt=this.groups;vt.length===0&&(vt=[{start:0,count:e.count}]);for(let it=0,zt=vt.length;it<zt;++it){const Zt=vt[it],Mn=Zt.start,kp=Zt.count;for(let zp=Mn,sa=Mn+kp;zp<sa;zp+=3)K(e.getX(zp+0),e.getX(zp+1),e.getX(zp+2))}const q=new U,Q=new U,wt=new U,bt=new U;function Ut(it){wt.fromBufferAttribute(o,it),bt.copy(wt);const zt=f[it];q.copy(zt),q.sub(wt.multiplyScalar(wt.dot(zt))).normalize(),Q.crossVectors(bt,zt);const Zt=Q.dot(m[it])<0?-1:1;s.setXYZW(it,q.x,q.y,q.z,Zt)}for(let it=0,zt=vt.length;it<zt;++it){const Zt=vt[it],Mn=Zt.start,kp=Zt.count;for(let zp=Mn,sa=Mn+kp;zp<sa;zp+=3)Ut(e.getX(zp+0)),Ut(e.getX(zp+1)),Ut(e.getX(zp+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let a=this.getAttribute("normal");if(a===void 0)a=new Ke(new Float32Array(t.count*3),3),this.setAttribute("normal",a);else for(let I=0,V=a.count;I<V;I++)a.setXYZ(I,0,0,0);const o=new U,l=new U,s=new U,f=new U,m=new U,b=new U,E=new U,M=new U;if(e)for(let I=0,V=e.count;I<V;I+=3){const Z=e.getX(I+0),ee=e.getX(I+1),le=e.getX(I+2);o.fromBufferAttribute(t,Z),l.fromBufferAttribute(t,ee),s.fromBufferAttribute(t,le),E.subVectors(s,l),M.subVectors(o,l),E.cross(M),f.fromBufferAttribute(a,Z),m.fromBufferAttribute(a,ee),b.fromBufferAttribute(a,le),f.add(E),m.add(E),b.add(E),a.setXYZ(Z,f.x,f.y,f.z),a.setXYZ(ee,m.x,m.y,m.z),a.setXYZ(le,b.x,b.y,b.z)}else for(let I=0,V=t.count;I<V;I+=3)o.fromBufferAttribute(t,I+0),l.fromBufferAttribute(t,I+1),s.fromBufferAttribute(t,I+2),E.subVectors(s,l),M.subVectors(o,l),E.cross(M),a.setXYZ(I+0,E.x,E.y,E.z),a.setXYZ(I+1,E.x,E.y,E.z),a.setXYZ(I+2,E.x,E.y,E.z);this.normalizeNormals(),a.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,a=e.count;t<a;t++)pe.fromBufferAttribute(e,t),pe.normalize(),e.setXYZ(t,pe.x,pe.y,pe.z)}toNonIndexed(){function e(f,m){const b=f.array,E=f.itemSize,M=f.normalized,I=new b.constructor(m.length*E);let V=0,Z=0;for(let ee=0,le=m.length;ee<le;ee++){f.isInterleavedBufferAttribute?V=m[ee]*f.data.stride+f.offset:V=m[ee]*E;for(let K=0;K<E;K++)I[Z++]=b[V++]}return new Ke(I,E,M)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Ae,a=this.index.array,o=this.attributes;for(const f in o){const m=o[f],b=e(m,a);t.setAttribute(f,b)}const l=this.morphAttributes;for(const f in l){const m=[],b=l[f];for(let E=0,M=b.length;E<M;E++){const I=b[E],V=e(I,a);m.push(V)}t.morphAttributes[f]=m}t.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let f=0,m=s.length;f<m;f++){const b=s[f];t.addGroup(b.start,b.count,b.materialIndex)}return t}toJSON(){const e={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const m=this.parameters;for(const b in m)m[b]!==void 0&&(e[b]=m[b]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const a=this.attributes;for(const m in a){const b=a[m];e.data.attributes[m]=b.toJSON(e.data)}const o={};let l=!1;for(const m in this.morphAttributes){const b=this.morphAttributes[m],E=[];for(let M=0,I=b.length;M<I;M++){const V=b[M];E.push(V.toJSON(e.data))}E.length>0&&(o[m]=E,l=!0)}l&&(e.data.morphAttributes=o,e.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));const f=this.boundingSphere;return f!==null&&(e.data.boundingSphere=f.toJSON()),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const a=e.index;a!==null&&this.setIndex(a.clone());const o=e.attributes;for(const b in o){const E=o[b];this.setAttribute(b,E.clone(t))}const l=e.morphAttributes;for(const b in l){const E=[],M=l[b];for(let I=0,V=M.length;I<V;I++)E.push(M[I].clone(t));this.morphAttributes[b]=E}this.morphTargetsRelative=e.morphTargetsRelative;const s=e.groups;for(let b=0,E=s.length;b<E;b++){const M=s[b];this.addGroup(M.start,M.count,M.materialIndex)}const f=e.boundingBox;f!==null&&(this.boundingBox=f.clone());const m=e.boundingSphere;return m!==null&&(this.boundingSphere=m.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const Pa=new he,yn=new Qs,Hi=new vr,Da=new U,Vi=new U,Gi=new U,ki=new U,Wr=new U,Wi=new U,La=new U,Xi=new U;class De extends Me{constructor(e=new Ae,t=new ni){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const a=e[t[0]];if(a!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,l=a.length;o<l;o++){const s=a[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=o}}}}getVertexPosition(e,t){const a=this.geometry,o=a.attributes.position,l=a.morphAttributes.position,s=a.morphTargetsRelative;t.fromBufferAttribute(o,e);const f=this.morphTargetInfluences;if(l&&f){Wi.set(0,0,0);for(let m=0,b=l.length;m<b;m++){const E=f[m],M=l[m];E!==0&&(Wr.fromBufferAttribute(M,e),s?Wi.addScaledVector(Wr,E):Wi.addScaledVector(Wr.sub(t),E))}t.add(Wi)}return t}raycast(e,t){const a=this.geometry,o=this.material,l=this.matrixWorld;o!==void 0&&(a.boundingSphere===null&&a.computeBoundingSphere(),Hi.copy(a.boundingSphere),Hi.applyMatrix4(l),yn.copy(e.ray).recast(e.near),!(Hi.containsPoint(yn.origin)===!1&&(yn.intersectSphere(Hi,Da)===null||yn.origin.distanceToSquared(Da)>(e.far-e.near)**2))&&(Pa.copy(l).invert(),yn.copy(e.ray).applyMatrix4(Pa),!(a.boundingBox!==null&&yn.intersectsBox(a.boundingBox)===!1)&&this._computeIntersections(e,t,yn)))}_computeIntersections(e,t,a){let o;const l=this.geometry,s=this.material,f=l.index,m=l.attributes.position,b=l.attributes.uv,E=l.attributes.uv1,M=l.attributes.normal,I=l.groups,V=l.drawRange;if(f!==null)if(Array.isArray(s))for(let Z=0,ee=I.length;Z<ee;Z++){const le=I[Z],K=s[le.materialIndex],vt=Math.max(le.start,V.start),q=Math.min(f.count,Math.min(le.start+le.count,V.start+V.count));for(let Q=vt,wt=q;Q<wt;Q+=3){const bt=f.getX(Q),Ut=f.getX(Q+1),it=f.getX(Q+2);o=Yi(this,K,e,a,b,E,M,bt,Ut,it),o&&(o.faceIndex=Math.floor(Q/3),o.face.materialIndex=le.materialIndex,t.push(o))}}else{const Z=Math.max(0,V.start),ee=Math.min(f.count,V.start+V.count);for(let le=Z,K=ee;le<K;le+=3){const vt=f.getX(le),q=f.getX(le+1),Q=f.getX(le+2);o=Yi(this,s,e,a,b,E,M,vt,q,Q),o&&(o.faceIndex=Math.floor(le/3),t.push(o))}}else if(m!==void 0)if(Array.isArray(s))for(let Z=0,ee=I.length;Z<ee;Z++){const le=I[Z],K=s[le.materialIndex],vt=Math.max(le.start,V.start),q=Math.min(m.count,Math.min(le.start+le.count,V.start+V.count));for(let Q=vt,wt=q;Q<wt;Q+=3){const bt=Q,Ut=Q+1,it=Q+2;o=Yi(this,K,e,a,b,E,M,bt,Ut,it),o&&(o.faceIndex=Math.floor(Q/3),o.face.materialIndex=le.materialIndex,t.push(o))}}else{const Z=Math.max(0,V.start),ee=Math.min(m.count,V.start+V.count);for(let le=Z,K=ee;le<K;le+=3){const vt=le,q=le+1,Q=le+2;o=Yi(this,s,e,a,b,E,M,vt,q,Q),o&&(o.faceIndex=Math.floor(le/3),t.push(o))}}}}function ac(r,e,t,a,o,l,s,f){let m;if(e.side===Te?m=a.intersectTriangle(s,l,o,!0,f):m=a.intersectTriangle(o,l,s,e.side===gn,f),m===null)return null;Xi.copy(f),Xi.applyMatrix4(r.matrixWorld);const b=t.ray.origin.distanceTo(Xi);return b<t.near||b>t.far?null:{distance:b,point:Xi.clone(),object:r}}function Yi(r,e,t,a,o,l,s,f,m,b){r.getVertexPosition(f,Vi),r.getVertexPosition(m,Gi),r.getVertexPosition(b,ki);const E=ac(r,e,t,a,Vi,Gi,ki,La);if(E){const M=new U;Oe.getBarycoord(La,Vi,Gi,ki,M),o&&(E.uv=Oe.getInterpolatedAttribute(o,f,m,b,M,new Bt)),l&&(E.uv1=Oe.getInterpolatedAttribute(l,f,m,b,M,new Bt)),s&&(E.normal=Oe.getInterpolatedAttribute(s,f,m,b,M,new U),E.normal.dot(a.direction)>0&&E.normal.multiplyScalar(-1));const I={a:f,b:m,c:b,normal:new U,materialIndex:0};Oe.getNormal(Vi,Gi,ki,I.normal),E.face=I,E.barycoord=M}return E}class Ri extends Ae{constructor(e=1,t=1,a=1,o=1,l=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:a,widthSegments:o,heightSegments:l,depthSegments:s};const f=this;o=Math.floor(o),l=Math.floor(l),s=Math.floor(s);const m=[],b=[],E=[],M=[];let I=0,V=0;Z("z","y","x",-1,-1,a,t,e,s,l,0),Z("z","y","x",1,-1,a,t,-e,s,l,1),Z("x","z","y",1,1,e,a,t,o,s,2),Z("x","z","y",1,-1,e,a,-t,o,s,3),Z("x","y","z",1,-1,e,t,a,o,l,4),Z("x","y","z",-1,-1,e,t,-a,o,l,5),this.setIndex(m),this.setAttribute("position",new me(b,3)),this.setAttribute("normal",new me(E,3)),this.setAttribute("uv",new me(M,2));function Z(ee,le,K,vt,q,Q,wt,bt,Ut,it,zt){const Zt=Q/Ut,Mn=wt/it,kp=Q/2,zp=wt/2,sa=bt/2,qo=Ut+1,ae=it+1;let wp=0,Cp=0;const Kt=new U;for(let h0=0;h0<ae;h0++){const Pp=h0*Mn-zp;for(let d0=0;d0<qo;d0++){const x0=d0*Zt-kp;Kt[ee]=x0*vt,Kt[le]=Pp*q,Kt[K]=sa,b.push(Kt.x,Kt.y,Kt.z),Kt[ee]=0,Kt[le]=0,Kt[K]=bt>0?1:-1,E.push(Kt.x,Kt.y,Kt.z),M.push(d0/Ut),M.push(1-h0/it),wp+=1}}for(let h0=0;h0<it;h0++)for(let Pp=0;Pp<Ut;Pp++){const d0=I+Pp+qo*h0,x0=I+Pp+qo*(h0+1),Dp=I+(Pp+1)+qo*(h0+1),c0=I+(Pp+1)+qo*h0;m.push(d0,x0,c0),m.push(x0,Dp,c0),Cp+=6}f.addGroup(V,Cp,zt),V+=Cp,I+=wp}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ri(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function oi(r){const e={};for(const t in r){e[t]={};for(const a in r[t]){const o=r[t][a];o&&(o.isColor||o.isMatrix3||o.isMatrix4||o.isVector2||o.isVector3||o.isVector4||o.isTexture||o.isQuaternion)?o.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][a]=null):e[t][a]=o.clone():Array.isArray(o)?e[t][a]=o.slice():e[t][a]=o}}return e}function xe(r){const e={};for(let t=0;t<r.length;t++){const a=oi(r[t]);for(const o in a)e[o]=a[o]}return e}function oc(r){const e=[];for(let t=0;t<r.length;t++)e.push(r[t].clone());return e}function Io(r){const e=r.getRenderTarget();return e===null?r.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Xt.workingColorSpace}const lc={clone:oi,merge:xe};var cc=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,hc=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class vn extends Ai{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=cc,this.fragmentShader=hc,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=oi(e.uniforms),this.uniformsGroups=oc(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const o in this.uniforms){const l=this.uniforms[o].value;l&&l.isTexture?t.uniforms[o]={type:"t",value:l.toJSON(e).uuid}:l&&l.isColor?t.uniforms[o]={type:"c",value:l.getHex()}:l&&l.isVector2?t.uniforms[o]={type:"v2",value:l.toArray()}:l&&l.isVector3?t.uniforms[o]={type:"v3",value:l.toArray()}:l&&l.isVector4?t.uniforms[o]={type:"v4",value:l.toArray()}:l&&l.isMatrix3?t.uniforms[o]={type:"m3",value:l.toArray()}:l&&l.isMatrix4?t.uniforms[o]={type:"m4",value:l.toArray()}:t.uniforms[o]={value:l}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const a={};for(const o in this.extensions)this.extensions[o]===!0&&(a[o]=!0);return Object.keys(a).length>0&&(t.extensions=a),t}}class No extends Me{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new he,this.projectionMatrix=new he,this.projectionMatrixInverse=new he,this.coordinateSystem=qe,this._reversedDepth=!1}get reversedDepth(){return this._reversedDepth}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const dn=new U,Ua=new Bt,Ia=new Bt;class Fe extends No{constructor(e=50,t=1,a=.1,o=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=a,this.far=o,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Ws*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(gi*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Ws*2*Math.atan(Math.tan(gi*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,a){dn.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(dn.x,dn.y).multiplyScalar(-e/dn.z),dn.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),a.set(dn.x,dn.y).multiplyScalar(-e/dn.z)}getViewSize(e,t){return this.getViewBounds(e,Ua,Ia),t.subVectors(Ia,Ua)}setViewOffset(e,t,a,o,l,s){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=a,this.view.offsetY=o,this.view.width=l,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(gi*.5*this.fov)/this.zoom,a=2*t,o=this.aspect*a,l=-.5*o;const s=this.view;if(this.view!==null&&this.view.enabled){const m=s.fullWidth,b=s.fullHeight;l+=s.offsetX*o/m,t-=s.offsetY*a/b,o*=s.width/m,a*=s.height/b}const f=this.filmOffset;f!==0&&(l+=e*f/this.getFilmWidth()),this.projectionMatrix.makePerspective(l,l+o,t,t-a,e,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Kn=-90,Zn=1;class uc extends Me{constructor(e,t,a){super(),this.type="CubeCamera",this.renderTarget=a,this.coordinateSystem=null,this.activeMipmapLevel=0;const o=new Fe(Kn,Zn,e,t);o.layers=this.layers,this.add(o);const l=new Fe(Kn,Zn,e,t);l.layers=this.layers,this.add(l);const s=new Fe(Kn,Zn,e,t);s.layers=this.layers,this.add(s);const f=new Fe(Kn,Zn,e,t);f.layers=this.layers,this.add(f);const m=new Fe(Kn,Zn,e,t);m.layers=this.layers,this.add(m);const b=new Fe(Kn,Zn,e,t);b.layers=this.layers,this.add(b)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[a,o,l,s,f,m]=t;for(const b of t)this.remove(b);if(e===qe)a.up.set(0,1,0),a.lookAt(1,0,0),o.up.set(0,1,0),o.lookAt(-1,0,0),l.up.set(0,0,-1),l.lookAt(0,1,0),s.up.set(0,0,1),s.lookAt(0,-1,0),f.up.set(0,1,0),f.lookAt(0,0,1),m.up.set(0,1,0),m.lookAt(0,0,-1);else if(e===ur)a.up.set(0,-1,0),a.lookAt(-1,0,0),o.up.set(0,-1,0),o.lookAt(1,0,0),l.up.set(0,0,1),l.lookAt(0,1,0),s.up.set(0,0,-1),s.lookAt(0,-1,0),f.up.set(0,-1,0),f.lookAt(0,0,1),m.up.set(0,-1,0),m.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const b of t)this.add(b),b.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:a,activeMipmapLevel:o}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[l,s,f,m,b,E]=this.children,M=e.getRenderTarget(),I=e.getActiveCubeFace(),V=e.getActiveMipmapLevel(),Z=e.xr.enabled;e.xr.enabled=!1;const ee=a.texture.generateMipmaps;a.texture.generateMipmaps=!1,e.setRenderTarget(a,0,o),e.render(t,l),e.setRenderTarget(a,1,o),e.render(t,s),e.setRenderTarget(a,2,o),e.render(t,f),e.setRenderTarget(a,3,o),e.render(t,m),e.setRenderTarget(a,4,o),e.render(t,b),a.texture.generateMipmaps=ee,e.setRenderTarget(a,5,o),e.render(t,E),e.setRenderTarget(M,I,V),e.xr.enabled=Z,a.texture.needsPMREMUpdate=!0}}class Fo extends be{constructor(e=[],t=ri,a,o,l,s,f,m,b,E){super(e,t,a,o,l,s,f,m,b,E),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class dc extends In{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const a={width:e,height:e,depth:1},o=[a,a,a,a,a,a];this.texture=new Fo(o),this._setTextureOptions(t),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const a={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},o=new Ri(5,5,5),l=new vn({name:"CubemapFromEquirect",uniforms:oi(a.uniforms),vertexShader:a.vertexShader,fragmentShader:a.fragmentShader,side:Te,blending:mn});l.uniforms.tEquirect.value=t;const s=new De(o,l),f=t.minFilter;return t.minFilter===Dn&&(t.minFilter=Ye),new uc(1,10,this).update(e,s),t.minFilter=f,s.geometry.dispose(),s.material.dispose(),this}clear(e,t=!0,a=!0,o=!0){const l=e.getRenderTarget();for(let s=0;s<6;s++)e.setRenderTarget(this,s),e.clear(t,a,o);e.setRenderTarget(l)}}class qi extends Me{constructor(){super(),this.isGroup=!0,this.type="Group"}}const fc={type:"move"};class Xr{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new qi,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new qi,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new U,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new U),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new qi,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new U,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new U),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const a of e.hand.values())this._getHandJoint(t,a)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,a){let o=null,l=null,s=null;const f=this._targetRay,m=this._grip,b=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(b&&e.hand){s=!0;for(const ee of e.hand.values()){const le=t.getJointPose(ee,a),K=this._getHandJoint(b,ee);le!==null&&(K.matrix.fromArray(le.transform.matrix),K.matrix.decompose(K.position,K.rotation,K.scale),K.matrixWorldNeedsUpdate=!0,K.jointRadius=le.radius),K.visible=le!==null}const E=b.joints["index-finger-tip"],M=b.joints["thumb-tip"],I=E.position.distanceTo(M.position),V=.02,Z=.005;b.inputState.pinching&&I>V+Z?(b.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!b.inputState.pinching&&I<=V-Z&&(b.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else m!==null&&e.gripSpace&&(l=t.getPose(e.gripSpace,a),l!==null&&(m.matrix.fromArray(l.transform.matrix),m.matrix.decompose(m.position,m.rotation,m.scale),m.matrixWorldNeedsUpdate=!0,l.linearVelocity?(m.hasLinearVelocity=!0,m.linearVelocity.copy(l.linearVelocity)):m.hasLinearVelocity=!1,l.angularVelocity?(m.hasAngularVelocity=!0,m.angularVelocity.copy(l.angularVelocity)):m.hasAngularVelocity=!1));f!==null&&(o=t.getPose(e.targetRaySpace,a),o===null&&l!==null&&(o=l),o!==null&&(f.matrix.fromArray(o.transform.matrix),f.matrix.decompose(f.position,f.rotation,f.scale),f.matrixWorldNeedsUpdate=!0,o.linearVelocity?(f.hasLinearVelocity=!0,f.linearVelocity.copy(o.linearVelocity)):f.hasLinearVelocity=!1,o.angularVelocity?(f.hasAngularVelocity=!0,f.angularVelocity.copy(o.angularVelocity)):f.hasAngularVelocity=!1,this.dispatchEvent(fc)))}return f!==null&&(f.visible=o!==null),m!==null&&(m.visible=l!==null),b!==null&&(b.visible=s!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const a=new qi;a.matrixAutoUpdate=!1,a.visible=!1,e.joints[t.jointName]=a,e.add(a)}return e.joints[t.jointName]}}class pc extends Me{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new an,this.environmentIntensity=1,this.environmentRotation=new an,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}const Yr=new U,mc=new U,_c=new Ft;class fn{constructor(e=new U(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,a,o){return this.normal.set(e,t,a),this.constant=o,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,a){const o=Yr.subVectors(a,t).cross(mc.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(o,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const a=e.delta(Yr),o=this.normal.dot(a);if(o===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const l=-(e.start.dot(this.normal)+this.constant)/o;return l<0||l>1?null:t.copy(e.start).addScaledVector(a,l)}intersectsLine(e){const t=this.distanceToPoint(e.start),a=this.distanceToPoint(e.end);return t<0&&a>0||a<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const a=t||_c.getNormalMatrix(e),o=this.coplanarPoint(Yr).applyMatrix4(e),l=this.normal.applyMatrix3(a).normalize();return this.constant=-o.dot(l),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Tn=new vr,gc=new Bt(.5,.5),Ki=new U;class Oo{constructor(e=new fn,t=new fn,a=new fn,o=new fn,l=new fn,s=new fn){this.planes=[e,t,a,o,l,s]}set(e,t,a,o,l,s){const f=this.planes;return f[0].copy(e),f[1].copy(t),f[2].copy(a),f[3].copy(o),f[4].copy(l),f[5].copy(s),this}copy(e){const t=this.planes;for(let a=0;a<6;a++)t[a].copy(e.planes[a]);return this}setFromProjectionMatrix(e,t=qe,a=!1){const o=this.planes,l=e.elements,s=l[0],f=l[1],m=l[2],b=l[3],E=l[4],M=l[5],I=l[6],V=l[7],Z=l[8],ee=l[9],le=l[10],K=l[11],vt=l[12],q=l[13],Q=l[14],wt=l[15];if(o[0].setComponents(b-s,V-E,K-Z,wt-vt).normalize(),o[1].setComponents(b+s,V+E,K+Z,wt+vt).normalize(),o[2].setComponents(b+f,V+M,K+ee,wt+q).normalize(),o[3].setComponents(b-f,V-M,K-ee,wt-q).normalize(),a)o[4].setComponents(m,I,le,Q).normalize(),o[5].setComponents(b-m,V-I,K-le,wt-Q).normalize();else if(o[4].setComponents(b-m,V-I,K-le,wt-Q).normalize(),t===qe)o[5].setComponents(b+m,V+I,K+le,wt+Q).normalize();else if(t===ur)o[5].setComponents(m,I,le,Q).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Tn.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Tn.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Tn)}intersectsSprite(e){Tn.center.set(0,0,0);const t=gc.distanceTo(e.center);return Tn.radius=.7071067811865476+t,Tn.applyMatrix4(e.matrixWorld),this.intersectsSphere(Tn)}intersectsSphere(e){const t=this.planes,a=e.center,o=-e.radius;for(let l=0;l<6;l++)if(t[l].distanceToPoint(a)<o)return!1;return!0}intersectsBox(e){const t=this.planes;for(let a=0;a<6;a++){const o=t[a];if(Ki.x=o.normal.x>0?e.max.x:e.min.x,Ki.y=o.normal.y>0?e.max.y:e.min.y,Ki.z=o.normal.z>0?e.max.z:e.min.z,o.distanceToPoint(Ki)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let a=0;a<6;a++)if(t[a].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}class fr extends Ai{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new qt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const pr=new U,mr=new U,Na=new he,mi=new Qs,Zi=new vr,qr=new U,Fa=new U;class ta extends Me{constructor(e=new Ae,t=new fr){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,a=[0];for(let o=1,l=t.count;o<l;o++)pr.fromBufferAttribute(t,o-1),mr.fromBufferAttribute(t,o),a[o]=a[o-1],a[o]+=pr.distanceTo(mr);e.setAttribute("lineDistance",new me(a,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const a=this.geometry,o=this.matrixWorld,l=e.params.Line.threshold,s=a.drawRange;if(a.boundingSphere===null&&a.computeBoundingSphere(),Zi.copy(a.boundingSphere),Zi.applyMatrix4(o),Zi.radius+=l,e.ray.intersectsSphere(Zi)===!1)return;Na.copy(o).invert(),mi.copy(e.ray).applyMatrix4(Na);const f=l/((this.scale.x+this.scale.y+this.scale.z)/3),m=f*f,b=this.isLineSegments?2:1,E=a.index,M=a.attributes.position;if(E!==null){const I=Math.max(0,s.start),V=Math.min(E.count,s.start+s.count);for(let Z=I,ee=V-1;Z<ee;Z+=b){const le=E.getX(Z),K=E.getX(Z+1),vt=ji(this,e,mi,m,le,K,Z);vt&&t.push(vt)}if(this.isLineLoop){const Z=E.getX(V-1),ee=E.getX(I),le=ji(this,e,mi,m,Z,ee,V-1);le&&t.push(le)}}else{const I=Math.max(0,s.start),V=Math.min(M.count,s.start+s.count);for(let Z=I,ee=V-1;Z<ee;Z+=b){const le=ji(this,e,mi,m,Z,Z+1,Z);le&&t.push(le)}if(this.isLineLoop){const Z=ji(this,e,mi,m,V-1,I,V-1);Z&&t.push(Z)}}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const a=e[t[0]];if(a!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,l=a.length;o<l;o++){const s=a[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=o}}}}}function ji(r,e,t,a,o,l,s){const f=r.geometry.attributes.position;if(pr.fromBufferAttribute(f,o),mr.fromBufferAttribute(f,l),t.distanceSqToSegment(pr,mr,qr,Fa)>a)return;qr.applyMatrix4(r.matrixWorld);const m=e.ray.origin.distanceTo(qr);if(!(m<e.near||m>e.far))return{distance:m,point:Fa.clone().applyMatrix4(r.matrixWorld),index:s,face:null,faceIndex:null,barycoord:null,object:r}}const Oa=new U,Ba=new U;class vc extends ta{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,a=[];for(let o=0,l=t.count;o<l;o+=2)Oa.fromBufferAttribute(t,o),Ba.fromBufferAttribute(t,o+1),a[o]=o===0?0:a[o-1],a[o+1]=a[o]+Oa.distanceTo(Ba);e.setAttribute("lineDistance",new me(a,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class Bo extends be{constructor(e,t,a=Ln,o,l,s,f=Ge,m=Ge,b,E=Mi,M=1){if(E!==Mi&&E!==Si)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");const I={width:e,height:t,depth:M};super(I,o,l,s,f,m,E,a,b),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new Js(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class zo extends be{constructor(e=null){super(),this.sourceTexture=e,this.isExternalTexture=!0}copy(e){return super.copy(e),this.sourceTexture=e.sourceTexture,this}}class ea extends Ae{constructor(e=1,t=1,a=1,o=32,l=1,s=!1,f=0,m=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:a,radialSegments:o,heightSegments:l,openEnded:s,thetaStart:f,thetaLength:m};const b=this;o=Math.floor(o),l=Math.floor(l);const E=[],M=[],I=[],V=[];let Z=0;const ee=[],le=a/2;let K=0;vt(),s===!1&&(e>0&&q(!0),t>0&&q(!1)),this.setIndex(E),this.setAttribute("position",new me(M,3)),this.setAttribute("normal",new me(I,3)),this.setAttribute("uv",new me(V,2));function vt(){const Q=new U,wt=new U;let bt=0;const Ut=(t-e)/a;for(let it=0;it<=l;it++){const zt=[],Zt=it/l,Mn=Zt*(t-e)+e;for(let kp=0;kp<=o;kp++){const zp=kp/o,sa=zp*m+f,qo=Math.sin(sa),ae=Math.cos(sa);wt.x=Mn*qo,wt.y=-Zt*a+le,wt.z=Mn*ae,M.push(wt.x,wt.y,wt.z),Q.set(qo,Ut,ae).normalize(),I.push(Q.x,Q.y,Q.z),V.push(zp,1-Zt),zt.push(Z++)}ee.push(zt)}for(let it=0;it<o;it++)for(let zt=0;zt<l;zt++){const Zt=ee[zt][it],Mn=ee[zt+1][it],kp=ee[zt+1][it+1],zp=ee[zt][it+1];(e>0||zt!==0)&&(E.push(Zt,Mn,zp),bt+=3),(t>0||zt!==l-1)&&(E.push(Mn,kp,zp),bt+=3)}b.addGroup(K,bt,0),K+=bt}function q(Q){const wt=Z,bt=new Bt,Ut=new U;let it=0;const zt=Q===!0?e:t,Zt=Q===!0?1:-1;for(let kp=1;kp<=o;kp++)M.push(0,le*Zt,0),I.push(0,Zt,0),V.push(.5,.5),Z++;const Mn=Z;for(let kp=0;kp<=o;kp++){const zp=kp/o*m+f,sa=Math.cos(zp),qo=Math.sin(zp);Ut.x=zt*qo,Ut.y=le*Zt,Ut.z=zt*sa,M.push(Ut.x,Ut.y,Ut.z),I.push(0,Zt,0),bt.x=sa*.5+.5,bt.y=qo*.5*Zt+.5,V.push(bt.x,bt.y),Z++}for(let kp=0;kp<o;kp++){const zp=wt+kp,sa=Mn+kp;Q===!0?E.push(sa,sa+1,zp):E.push(sa+1,sa,zp),it+=3}b.addGroup(K,it,Q===!0?1:2),K+=it}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ea(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class na extends ea{constructor(e=1,t=1,a=32,o=1,l=!1,s=0,f=Math.PI*2){super(0,e,t,a,o,l,s,f),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:a,heightSegments:o,openEnded:l,thetaStart:s,thetaLength:f}}static fromJSON(e){return new na(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}const $i=new U,Ji=new U,Kr=new U,Qi=new Oe;class xc extends Ae{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const a=Math.pow(10,4),o=Math.cos(gi*t),l=e.getIndex(),s=e.getAttribute("position"),f=l?l.count:s.count,m=[0,0,0],b=["a","b","c"],E=new Array(3),M={},I=[];for(let V=0;V<f;V+=3){l?(m[0]=l.getX(V),m[1]=l.getX(V+1),m[2]=l.getX(V+2)):(m[0]=V,m[1]=V+1,m[2]=V+2);const{a:Z,b:ee,c:le}=Qi;if(Z.fromBufferAttribute(s,m[0]),ee.fromBufferAttribute(s,m[1]),le.fromBufferAttribute(s,m[2]),Qi.getNormal(Kr),E[0]=`${Math.round(Z.x*a)},${Math.round(Z.y*a)},${Math.round(Z.z*a)}`,E[1]=`${Math.round(ee.x*a)},${Math.round(ee.y*a)},${Math.round(ee.z*a)}`,E[2]=`${Math.round(le.x*a)},${Math.round(le.y*a)},${Math.round(le.z*a)}`,!(E[0]===E[1]||E[1]===E[2]||E[2]===E[0]))for(let K=0;K<3;K++){const vt=(K+1)%3,q=E[K],Q=E[vt],wt=Qi[b[K]],bt=Qi[b[vt]],Ut=`${q}_${Q}`,it=`${Q}_${q}`;it in M&&M[it]?(Kr.dot(M[it].normal)<=o&&(I.push(wt.x,wt.y,wt.z),I.push(bt.x,bt.y,bt.z)),M[it]=null):Ut in M||(M[Ut]={index0:m[K],index1:m[vt],normal:Kr.clone()})}}for(const V in M)if(M[V]){const{index0:Z,index1:ee}=M[V];$i.fromBufferAttribute(s,Z),Ji.fromBufferAttribute(s,ee),I.push($i.x,$i.y,$i.z),I.push(Ji.x,Ji.y,Ji.z)}this.setAttribute("position",new me(I,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class xr extends Ae{constructor(e=1,t=1,a=1,o=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:a,heightSegments:o};const l=e/2,s=t/2,f=Math.floor(a),m=Math.floor(o),b=f+1,E=m+1,M=e/f,I=t/m,V=[],Z=[],ee=[],le=[];for(let K=0;K<E;K++){const vt=K*I-s;for(let q=0;q<b;q++){const Q=q*M-l;Z.push(Q,-vt,0),ee.push(0,0,1),le.push(q/f),le.push(1-K/m)}}for(let K=0;K<m;K++)for(let vt=0;vt<f;vt++){const q=vt+b*K,Q=vt+b*(K+1),wt=vt+1+b*(K+1),bt=vt+1+b*K;V.push(q,Q,bt),V.push(Q,wt,bt)}this.setIndex(V),this.setAttribute("position",new me(Z,3)),this.setAttribute("normal",new me(ee,3)),this.setAttribute("uv",new me(le,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new xr(e.width,e.height,e.widthSegments,e.heightSegments)}}class _r extends Ae{constructor(e=1,t=32,a=16,o=0,l=Math.PI*2,s=0,f=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:a,phiStart:o,phiLength:l,thetaStart:s,thetaLength:f},t=Math.max(3,Math.floor(t)),a=Math.max(2,Math.floor(a));const m=Math.min(s+f,Math.PI);let b=0;const E=[],M=new U,I=new U,V=[],Z=[],ee=[],le=[];for(let K=0;K<=a;K++){const vt=[],q=K/a;let Q=0;K===0&&s===0?Q=.5/t:K===a&&m===Math.PI&&(Q=-.5/t);for(let wt=0;wt<=t;wt++){const bt=wt/t;M.x=-e*Math.cos(o+bt*l)*Math.sin(s+q*f),M.y=e*Math.cos(s+q*f),M.z=e*Math.sin(o+bt*l)*Math.sin(s+q*f),Z.push(M.x,M.y,M.z),I.copy(M).normalize(),ee.push(I.x,I.y,I.z),le.push(bt+Q,1-q),vt.push(b++)}E.push(vt)}for(let K=0;K<a;K++)for(let vt=0;vt<t;vt++){const q=E[K][vt+1],Q=E[K][vt],wt=E[K+1][vt],bt=E[K+1][vt+1];(K!==0||s>0)&&V.push(q,Q,bt),(K!==a-1||m<Math.PI)&&V.push(Q,wt,bt)}this.setIndex(V),this.setAttribute("position",new me(Z,3)),this.setAttribute("normal",new me(ee,3)),this.setAttribute("uv",new me(le,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new _r(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Mc extends Ai{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Cl,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class Sc extends Ai{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class Ec extends No{constructor(e=-1,t=1,a=1,o=-1,l=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=a,this.bottom=o,this.near=l,this.far=s,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,a,o,l,s){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=a,this.view.offsetY=o,this.view.width=l,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),a=(this.right+this.left)/2,o=(this.top+this.bottom)/2;let l=a-e,s=a+e,f=o+t,m=o-t;if(this.view!==null&&this.view.enabled){const b=(this.right-this.left)/this.view.fullWidth/this.zoom,E=(this.top-this.bottom)/this.view.fullHeight/this.zoom;l+=b*this.view.offsetX,s=l+b*this.view.width,f-=E*this.view.offsetY,m=f-E*this.view.height}this.projectionMatrix.makeOrthographic(l,s,f,m,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class yc extends Fe{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}class za{constructor(e=1,t=0,a=0){this.radius=e,this.phi=t,this.theta=a}set(e,t,a){return this.radius=e,this.phi=t,this.theta=a,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Vt(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,a){return this.radius=Math.sqrt(e*e+t*t+a*a),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,a),this.phi=Math.acos(Vt(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}const Ha=new U;let tr,Zr;class Va extends Me{constructor(e=new U(0,0,1),t=new U(0,0,0),a=1,o=16776960,l=a*.2,s=l*.2){super(),this.type="ArrowHelper",tr===void 0&&(tr=new Ae,tr.setAttribute("position",new me([0,0,0,0,1,0],3)),Zr=new na(.5,1,5,1),Zr.translate(0,-.5,0)),this.position.copy(t),this.line=new ta(tr,new fr({color:o,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new De(Zr,new ni({color:o,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(a,l,s)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{Ha.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(Ha,t)}}setLength(e,t=e*.2,a=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(a,t,a),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class Tc extends Nn{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){console.warn("THREE.Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}}function Ga(r,e,t,a){const o=bc(a);switch(t){case yo:return r*e;case bo:return r*e/o.components*o.byteLength;case Zs:return r*e/o.components*o.byteLength;case Ao:return r*e*2/o.components*o.byteLength;case js:return r*e*2/o.components*o.byteLength;case To:return r*e*3/o.components*o.byteLength;case Ve:return r*e*4/o.components*o.byteLength;case $s:return r*e*4/o.components*o.byteLength;case sr:case ar:return Math.floor((r+3)/4)*Math.floor((e+3)/4)*8;case or:case lr:return Math.floor((r+3)/4)*Math.floor((e+3)/4)*16;case gs:case xs:return Math.max(r,16)*Math.max(e,8)/4;case _s:case vs:return Math.max(r,8)*Math.max(e,8)/2;case Ms:case Ss:return Math.floor((r+3)/4)*Math.floor((e+3)/4)*8;case Es:return Math.floor((r+3)/4)*Math.floor((e+3)/4)*16;case ys:return Math.floor((r+3)/4)*Math.floor((e+3)/4)*16;case Ts:return Math.floor((r+4)/5)*Math.floor((e+3)/4)*16;case bs:return Math.floor((r+4)/5)*Math.floor((e+4)/5)*16;case As:return Math.floor((r+5)/6)*Math.floor((e+4)/5)*16;case Rs:return Math.floor((r+5)/6)*Math.floor((e+5)/6)*16;case ws:return Math.floor((r+7)/8)*Math.floor((e+4)/5)*16;case Cs:return Math.floor((r+7)/8)*Math.floor((e+5)/6)*16;case Ps:return Math.floor((r+7)/8)*Math.floor((e+7)/8)*16;case Ds:return Math.floor((r+9)/10)*Math.floor((e+4)/5)*16;case Ls:return Math.floor((r+9)/10)*Math.floor((e+5)/6)*16;case Us:return Math.floor((r+9)/10)*Math.floor((e+7)/8)*16;case Is:return Math.floor((r+9)/10)*Math.floor((e+9)/10)*16;case Ns:return Math.floor((r+11)/12)*Math.floor((e+9)/10)*16;case Fs:return Math.floor((r+11)/12)*Math.floor((e+11)/12)*16;case Os:case Bs:case zs:return Math.ceil(r/4)*Math.ceil(e/4)*16;case Hs:case Vs:return Math.ceil(r/4)*Math.ceil(e/4)*8;case Gs:case ks:return Math.ceil(r/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function bc(r){switch(r){case sn:case xo:return{byteLength:1,components:1};case vi:case Mo:case yi:return{byteLength:2,components:1};case qs:case Ks:return{byteLength:2,components:4};case Ln:case Ys:case nn:return{byteLength:4,components:1};case So:case Eo:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${r}.`)}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"180"}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="180");/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function Ho(){let r=null,e=!1,t=null,a=null;function o(l,s){t(l,s),a=r.requestAnimationFrame(o)}return{start:function(){e!==!0&&t!==null&&(a=r.requestAnimationFrame(o),e=!0)},stop:function(){r.cancelAnimationFrame(a),e=!1},setAnimationLoop:function(l){t=l},setContext:function(l){r=l}}}function Ac(r){const e=new WeakMap;function t(f,m){const b=f.array,E=f.usage,M=b.byteLength,I=r.createBuffer();r.bindBuffer(m,I),r.bufferData(m,b,E),f.onUploadCallback();let V;if(b instanceof Float32Array)V=r.FLOAT;else if(typeof Float16Array<"u"&&b instanceof Float16Array)V=r.HALF_FLOAT;else if(b instanceof Uint16Array)f.isFloat16BufferAttribute?V=r.HALF_FLOAT:V=r.UNSIGNED_SHORT;else if(b instanceof Int16Array)V=r.SHORT;else if(b instanceof Uint32Array)V=r.UNSIGNED_INT;else if(b instanceof Int32Array)V=r.INT;else if(b instanceof Int8Array)V=r.BYTE;else if(b instanceof Uint8Array)V=r.UNSIGNED_BYTE;else if(b instanceof Uint8ClampedArray)V=r.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+b);return{buffer:I,type:V,bytesPerElement:b.BYTES_PER_ELEMENT,version:f.version,size:M}}function a(f,m,b){const E=m.array,M=m.updateRanges;if(r.bindBuffer(b,f),M.length===0)r.bufferSubData(b,0,E);else{M.sort((V,Z)=>V.start-Z.start);let I=0;for(let V=1;V<M.length;V++){const Z=M[I],ee=M[V];ee.start<=Z.start+Z.count+1?Z.count=Math.max(Z.count,ee.start+ee.count-Z.start):(++I,M[I]=ee)}M.length=I+1;for(let V=0,Z=M.length;V<Z;V++){const ee=M[V];r.bufferSubData(b,ee.start*E.BYTES_PER_ELEMENT,E,ee.start,ee.count)}m.clearUpdateRanges()}m.onUploadCallback()}function o(f){return f.isInterleavedBufferAttribute&&(f=f.data),e.get(f)}function l(f){f.isInterleavedBufferAttribute&&(f=f.data);const m=e.get(f);m&&(r.deleteBuffer(m.buffer),e.delete(f))}function s(f,m){if(f.isInterleavedBufferAttribute&&(f=f.data),f.isGLBufferAttribute){const E=e.get(f);(!E||E.version<f.version)&&e.set(f,{buffer:f.buffer,type:f.type,bytesPerElement:f.elementSize,version:f.version});return}const b=e.get(f);if(b===void 0)e.set(f,t(f,m));else if(b.version<f.version){if(b.size!==f.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");a(b.buffer,f,m),b.version=f.version}}return{get:o,remove:l,update:s}}var Rc=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,wc=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,Cc=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,Pc=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Dc=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,Lc=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Uc=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Ic=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Nc=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,Fc=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,Oc=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,Bc=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,zc=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,Hc=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Vc=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Gc=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,kc=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Wc=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Xc=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,Yc=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,qc=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,Kc=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,Zc=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,jc=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,$c=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,Jc=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Qc=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,th=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,eh=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,nh=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,ih="gl_FragColor = linearToOutputTexel( gl_FragColor );",rh=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,sh=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,ah=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,oh=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,lh=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,ch=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,hh=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,uh=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,dh=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,fh=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,ph=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,mh=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,_h=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,gh=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,vh=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,xh=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,Mh=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,Sh=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,Eh=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,yh=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,Th=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,bh=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Ah=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Rh=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,wh=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,Ch=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,Ph=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Dh=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Lh=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,Uh=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,Ih=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Nh=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Fh=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Oh=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Bh=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,zh=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,Hh=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Vh=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Gh=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,kh=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Wh=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,Xh=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Yh=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,qh=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Kh=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,Zh=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,jh=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,$h=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,Jh=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,Qh=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,tu=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,eu=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,nu=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,iu=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,ru=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,su=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,au=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,ou=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,lu=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		float depth = unpackRGBAToDepth( texture2D( depths, uv ) );
		#ifdef USE_REVERSED_DEPTH_BUFFER
			return step( depth, compare );
		#else
			return step( compare, depth );
		#endif
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow( sampler2D shadow, vec2 uv, float compare ) {
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		#ifdef USE_REVERSED_DEPTH_BUFFER
			float hard_shadow = step( distribution.x, compare );
		#else
			float hard_shadow = step( compare, distribution.x );
		#endif
		if ( hard_shadow != 1.0 ) {
			float distance = compare - distribution.x;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,cu=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,hu=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,uu=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,du=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,fu=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,pu=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,mu=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,_u=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,gu=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,vu=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,xu=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,Mu=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,Su=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,Eu=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,yu=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Tu=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,bu=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const Au=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,Ru=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,wu=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Cu=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Pu=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Du=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Lu=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,Uu=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	#ifdef USE_REVERSED_DEPTH_BUFFER
		float fragCoordZ = vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ];
	#else
		float fragCoordZ = 0.5 * vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ] + 0.5;
	#endif
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,Iu=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Nu=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,Fu=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,Ou=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Bu=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,zu=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Hu=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Vu=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Gu=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,ku=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Wu=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,Xu=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Yu=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,qu=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,Ku=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Zu=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,ju=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,$u=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Ju=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Qu=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,td$1=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,ed=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,nd=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,id=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,rd=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,sd=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Ot={alphahash_fragment:Rc,alphahash_pars_fragment:wc,alphamap_fragment:Cc,alphamap_pars_fragment:Pc,alphatest_fragment:Dc,alphatest_pars_fragment:Lc,aomap_fragment:Uc,aomap_pars_fragment:Ic,batching_pars_vertex:Nc,batching_vertex:Fc,begin_vertex:Oc,beginnormal_vertex:Bc,bsdfs:zc,iridescence_fragment:Hc,bumpmap_pars_fragment:Vc,clipping_planes_fragment:Gc,clipping_planes_pars_fragment:kc,clipping_planes_pars_vertex:Wc,clipping_planes_vertex:Xc,color_fragment:Yc,color_pars_fragment:qc,color_pars_vertex:Kc,color_vertex:Zc,common:jc,cube_uv_reflection_fragment:$c,defaultnormal_vertex:Jc,displacementmap_pars_vertex:Qc,displacementmap_vertex:th,emissivemap_fragment:eh,emissivemap_pars_fragment:nh,colorspace_fragment:ih,colorspace_pars_fragment:rh,envmap_fragment:sh,envmap_common_pars_fragment:ah,envmap_pars_fragment:oh,envmap_pars_vertex:lh,envmap_physical_pars_fragment:xh,envmap_vertex:ch,fog_vertex:hh,fog_pars_vertex:uh,fog_fragment:dh,fog_pars_fragment:fh,gradientmap_pars_fragment:ph,lightmap_pars_fragment:mh,lights_lambert_fragment:_h,lights_lambert_pars_fragment:gh,lights_pars_begin:vh,lights_toon_fragment:Mh,lights_toon_pars_fragment:Sh,lights_phong_fragment:Eh,lights_phong_pars_fragment:yh,lights_physical_fragment:Th,lights_physical_pars_fragment:bh,lights_fragment_begin:Ah,lights_fragment_maps:Rh,lights_fragment_end:wh,logdepthbuf_fragment:Ch,logdepthbuf_pars_fragment:Ph,logdepthbuf_pars_vertex:Dh,logdepthbuf_vertex:Lh,map_fragment:Uh,map_pars_fragment:Ih,map_particle_fragment:Nh,map_particle_pars_fragment:Fh,metalnessmap_fragment:Oh,metalnessmap_pars_fragment:Bh,morphinstance_vertex:zh,morphcolor_vertex:Hh,morphnormal_vertex:Vh,morphtarget_pars_vertex:Gh,morphtarget_vertex:kh,normal_fragment_begin:Wh,normal_fragment_maps:Xh,normal_pars_fragment:Yh,normal_pars_vertex:qh,normal_vertex:Kh,normalmap_pars_fragment:Zh,clearcoat_normal_fragment_begin:jh,clearcoat_normal_fragment_maps:$h,clearcoat_pars_fragment:Jh,iridescence_pars_fragment:Qh,opaque_fragment:tu,packing:eu,premultiplied_alpha_fragment:nu,project_vertex:iu,dithering_fragment:ru,dithering_pars_fragment:su,roughnessmap_fragment:au,roughnessmap_pars_fragment:ou,shadowmap_pars_fragment:lu,shadowmap_pars_vertex:cu,shadowmap_vertex:hu,shadowmask_pars_fragment:uu,skinbase_vertex:du,skinning_pars_vertex:fu,skinning_vertex:pu,skinnormal_vertex:mu,specularmap_fragment:_u,specularmap_pars_fragment:gu,tonemapping_fragment:vu,tonemapping_pars_fragment:xu,transmission_fragment:Mu,transmission_pars_fragment:Su,uv_pars_fragment:Eu,uv_pars_vertex:yu,uv_vertex:Tu,worldpos_vertex:bu,background_vert:Au,background_frag:Ru,backgroundCube_vert:wu,backgroundCube_frag:Cu,cube_vert:Pu,cube_frag:Du,depth_vert:Lu,depth_frag:Uu,distanceRGBA_vert:Iu,distanceRGBA_frag:Nu,equirect_vert:Fu,equirect_frag:Ou,linedashed_vert:Bu,linedashed_frag:zu,meshbasic_vert:Hu,meshbasic_frag:Vu,meshlambert_vert:Gu,meshlambert_frag:ku,meshmatcap_vert:Wu,meshmatcap_frag:Xu,meshnormal_vert:Yu,meshnormal_frag:qu,meshphong_vert:Ku,meshphong_frag:Zu,meshphysical_vert:ju,meshphysical_frag:$u,meshtoon_vert:Ju,meshtoon_frag:Qu,points_vert:td$1,points_frag:ed,shadow_vert:nd,shadow_frag:id,sprite_vert:rd,sprite_frag:sd},at={common:{diffuse:{value:new qt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Ft},alphaMap:{value:null},alphaMapTransform:{value:new Ft},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Ft}},envmap:{envMap:{value:null},envMapRotation:{value:new Ft},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Ft}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Ft}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Ft},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Ft},normalScale:{value:new Bt(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Ft},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Ft}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Ft}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Ft}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new qt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new qt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Ft},alphaTest:{value:0},uvTransform:{value:new Ft}},sprite:{diffuse:{value:new qt(16777215)},opacity:{value:1},center:{value:new Bt(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Ft},alphaMap:{value:null},alphaMapTransform:{value:new Ft},alphaTest:{value:0}}},We={basic:{uniforms:xe([at.common,at.specularmap,at.envmap,at.aomap,at.lightmap,at.fog]),vertexShader:Ot.meshbasic_vert,fragmentShader:Ot.meshbasic_frag},lambert:{uniforms:xe([at.common,at.specularmap,at.envmap,at.aomap,at.lightmap,at.emissivemap,at.bumpmap,at.normalmap,at.displacementmap,at.fog,at.lights,{emissive:{value:new qt(0)}}]),vertexShader:Ot.meshlambert_vert,fragmentShader:Ot.meshlambert_frag},phong:{uniforms:xe([at.common,at.specularmap,at.envmap,at.aomap,at.lightmap,at.emissivemap,at.bumpmap,at.normalmap,at.displacementmap,at.fog,at.lights,{emissive:{value:new qt(0)},specular:{value:new qt(1118481)},shininess:{value:30}}]),vertexShader:Ot.meshphong_vert,fragmentShader:Ot.meshphong_frag},standard:{uniforms:xe([at.common,at.envmap,at.aomap,at.lightmap,at.emissivemap,at.bumpmap,at.normalmap,at.displacementmap,at.roughnessmap,at.metalnessmap,at.fog,at.lights,{emissive:{value:new qt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Ot.meshphysical_vert,fragmentShader:Ot.meshphysical_frag},toon:{uniforms:xe([at.common,at.aomap,at.lightmap,at.emissivemap,at.bumpmap,at.normalmap,at.displacementmap,at.gradientmap,at.fog,at.lights,{emissive:{value:new qt(0)}}]),vertexShader:Ot.meshtoon_vert,fragmentShader:Ot.meshtoon_frag},matcap:{uniforms:xe([at.common,at.bumpmap,at.normalmap,at.displacementmap,at.fog,{matcap:{value:null}}]),vertexShader:Ot.meshmatcap_vert,fragmentShader:Ot.meshmatcap_frag},points:{uniforms:xe([at.points,at.fog]),vertexShader:Ot.points_vert,fragmentShader:Ot.points_frag},dashed:{uniforms:xe([at.common,at.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Ot.linedashed_vert,fragmentShader:Ot.linedashed_frag},depth:{uniforms:xe([at.common,at.displacementmap]),vertexShader:Ot.depth_vert,fragmentShader:Ot.depth_frag},normal:{uniforms:xe([at.common,at.bumpmap,at.normalmap,at.displacementmap,{opacity:{value:1}}]),vertexShader:Ot.meshnormal_vert,fragmentShader:Ot.meshnormal_frag},sprite:{uniforms:xe([at.sprite,at.fog]),vertexShader:Ot.sprite_vert,fragmentShader:Ot.sprite_frag},background:{uniforms:{uvTransform:{value:new Ft},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Ot.background_vert,fragmentShader:Ot.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Ft}},vertexShader:Ot.backgroundCube_vert,fragmentShader:Ot.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Ot.cube_vert,fragmentShader:Ot.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Ot.equirect_vert,fragmentShader:Ot.equirect_frag},distanceRGBA:{uniforms:xe([at.common,at.displacementmap,{referencePosition:{value:new U},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Ot.distanceRGBA_vert,fragmentShader:Ot.distanceRGBA_frag},shadow:{uniforms:xe([at.lights,at.fog,{color:{value:new qt(0)},opacity:{value:1}}]),vertexShader:Ot.shadow_vert,fragmentShader:Ot.shadow_frag}};We.physical={uniforms:xe([We.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Ft},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Ft},clearcoatNormalScale:{value:new Bt(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Ft},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Ft},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Ft},sheen:{value:0},sheenColor:{value:new qt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Ft},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Ft},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Ft},transmissionSamplerSize:{value:new Bt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Ft},attenuationDistance:{value:0},attenuationColor:{value:new qt(0)},specularColor:{value:new qt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Ft},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Ft},anisotropyVector:{value:new Bt},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Ft}}]),vertexShader:Ot.meshphysical_vert,fragmentShader:Ot.meshphysical_frag};const er={r:0,b:0,g:0},bn=new an,ad=new he;function od(r,e,t,a,o,l,s){const f=new qt(0);let m=l===!0?0:1,b,E,M=null,I=0,V=null;function Z(q){let Q=q.isScene===!0?q.background:null;return Q&&Q.isTexture&&(Q=(q.backgroundBlurriness>0?t:e).get(Q)),Q}function ee(q){let Q=!1;const wt=Z(q);wt===null?K(f,m):wt&&wt.isColor&&(K(wt,1),Q=!0);const bt=r.xr.getEnvironmentBlendMode();bt==="additive"?a.buffers.color.setClear(0,0,0,1,s):bt==="alpha-blend"&&a.buffers.color.setClear(0,0,0,0,s),(r.autoClear||Q)&&(a.buffers.depth.setTest(!0),a.buffers.depth.setMask(!0),a.buffers.color.setMask(!0),r.clear(r.autoClearColor,r.autoClearDepth,r.autoClearStencil))}function le(q,Q){const wt=Z(Q);wt&&(wt.isCubeTexture||wt.mapping===gr)?(E===void 0&&(E=new De(new Ri(1,1,1),new vn({name:"BackgroundCubeMaterial",uniforms:oi(We.backgroundCube.uniforms),vertexShader:We.backgroundCube.vertexShader,fragmentShader:We.backgroundCube.fragmentShader,side:Te,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),E.geometry.deleteAttribute("normal"),E.geometry.deleteAttribute("uv"),E.onBeforeRender=function(bt,Ut,it){this.matrixWorld.copyPosition(it.matrixWorld)},Object.defineProperty(E.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),o.update(E)),bn.copy(Q.backgroundRotation),bn.x*=-1,bn.y*=-1,bn.z*=-1,wt.isCubeTexture&&wt.isRenderTargetTexture===!1&&(bn.y*=-1,bn.z*=-1),E.material.uniforms.envMap.value=wt,E.material.uniforms.flipEnvMap.value=wt.isCubeTexture&&wt.isRenderTargetTexture===!1?-1:1,E.material.uniforms.backgroundBlurriness.value=Q.backgroundBlurriness,E.material.uniforms.backgroundIntensity.value=Q.backgroundIntensity,E.material.uniforms.backgroundRotation.value.setFromMatrix4(ad.makeRotationFromEuler(bn)),E.material.toneMapped=Xt.getTransfer(wt.colorSpace)!==Jt,(M!==wt||I!==wt.version||V!==r.toneMapping)&&(E.material.needsUpdate=!0,M=wt,I=wt.version,V=r.toneMapping),E.layers.enableAll(),q.unshift(E,E.geometry,E.material,0,0,null)):wt&&wt.isTexture&&(b===void 0&&(b=new De(new xr(2,2),new vn({name:"BackgroundMaterial",uniforms:oi(We.background.uniforms),vertexShader:We.background.vertexShader,fragmentShader:We.background.fragmentShader,side:gn,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),b.geometry.deleteAttribute("normal"),Object.defineProperty(b.material,"map",{get:function(){return this.uniforms.t2D.value}}),o.update(b)),b.material.uniforms.t2D.value=wt,b.material.uniforms.backgroundIntensity.value=Q.backgroundIntensity,b.material.toneMapped=Xt.getTransfer(wt.colorSpace)!==Jt,wt.matrixAutoUpdate===!0&&wt.updateMatrix(),b.material.uniforms.uvTransform.value.copy(wt.matrix),(M!==wt||I!==wt.version||V!==r.toneMapping)&&(b.material.needsUpdate=!0,M=wt,I=wt.version,V=r.toneMapping),b.layers.enableAll(),q.unshift(b,b.geometry,b.material,0,0,null))}function K(q,Q){q.getRGB(er,Io(r)),a.buffers.color.setClear(er.r,er.g,er.b,Q,s)}function vt(){E!==void 0&&(E.geometry.dispose(),E.material.dispose(),E=void 0),b!==void 0&&(b.geometry.dispose(),b.material.dispose(),b=void 0)}return{getClearColor:function(){return f},setClearColor:function(q,Q=1){f.set(q),m=Q,K(f,m)},getClearAlpha:function(){return m},setClearAlpha:function(q){m=q,K(f,m)},render:ee,addToRenderList:le,dispose:vt}}function ld(r,e){const t=r.getParameter(r.MAX_VERTEX_ATTRIBS),a={},o=I(null);let l=o,s=!1;function f(Zt,Mn,kp,zp,sa){let qo=!1;const ae=M(zp,kp,Mn);l!==ae&&(l=ae,b(l.object)),qo=V(Zt,zp,kp,sa),qo&&Z(Zt,zp,kp,sa),sa!==null&&e.update(sa,r.ELEMENT_ARRAY_BUFFER),(qo||s)&&(s=!1,Q(Zt,Mn,kp,zp),sa!==null&&r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,e.get(sa).buffer))}function m(){return r.createVertexArray()}function b(Zt){return r.bindVertexArray(Zt)}function E(Zt){return r.deleteVertexArray(Zt)}function M(Zt,Mn,kp){const zp=kp.wireframe===!0;let sa=a[Zt.id];sa===void 0&&(sa={},a[Zt.id]=sa);let qo=sa[Mn.id];qo===void 0&&(qo={},sa[Mn.id]=qo);let ae=qo[zp];return ae===void 0&&(ae=I(m()),qo[zp]=ae),ae}function I(Zt){const Mn=[],kp=[],zp=[];for(let sa=0;sa<t;sa++)Mn[sa]=0,kp[sa]=0,zp[sa]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Mn,enabledAttributes:kp,attributeDivisors:zp,object:Zt,attributes:{},index:null}}function V(Zt,Mn,kp,zp){const sa=l.attributes,qo=Mn.attributes;let ae=0;const wp=kp.getAttributes();for(const Cp in wp)if(wp[Cp].location>=0){const Kt=sa[Cp];let h0=qo[Cp];if(h0===void 0&&(Cp==="instanceMatrix"&&Zt.instanceMatrix&&(h0=Zt.instanceMatrix),Cp==="instanceColor"&&Zt.instanceColor&&(h0=Zt.instanceColor)),Kt===void 0||Kt.attribute!==h0||h0&&Kt.data!==h0.data)return!0;ae++}return l.attributesNum!==ae||l.index!==zp}function Z(Zt,Mn,kp,zp){const sa={},qo=Mn.attributes;let ae=0;const wp=kp.getAttributes();for(const Cp in wp)if(wp[Cp].location>=0){let Kt=qo[Cp];Kt===void 0&&(Cp==="instanceMatrix"&&Zt.instanceMatrix&&(Kt=Zt.instanceMatrix),Cp==="instanceColor"&&Zt.instanceColor&&(Kt=Zt.instanceColor));const h0={};h0.attribute=Kt,Kt&&Kt.data&&(h0.data=Kt.data),sa[Cp]=h0,ae++}l.attributes=sa,l.attributesNum=ae,l.index=zp}function ee(){const Zt=l.newAttributes;for(let Mn=0,kp=Zt.length;Mn<kp;Mn++)Zt[Mn]=0}function le(Zt){K(Zt,0)}function K(Zt,Mn){const kp=l.newAttributes,zp=l.enabledAttributes,sa=l.attributeDivisors;kp[Zt]=1,zp[Zt]===0&&(r.enableVertexAttribArray(Zt),zp[Zt]=1),sa[Zt]!==Mn&&(r.vertexAttribDivisor(Zt,Mn),sa[Zt]=Mn)}function vt(){const Zt=l.newAttributes,Mn=l.enabledAttributes;for(let kp=0,zp=Mn.length;kp<zp;kp++)Mn[kp]!==Zt[kp]&&(r.disableVertexAttribArray(kp),Mn[kp]=0)}function q(Zt,Mn,kp,zp,sa,qo,ae){ae===!0?r.vertexAttribIPointer(Zt,Mn,kp,sa,qo):r.vertexAttribPointer(Zt,Mn,kp,zp,sa,qo)}function Q(Zt,Mn,kp,zp){ee();const sa=zp.attributes,qo=kp.getAttributes(),ae=Mn.defaultAttributeValues;for(const wp in qo){const Cp=qo[wp];if(Cp.location>=0){let Kt=sa[wp];if(Kt===void 0&&(wp==="instanceMatrix"&&Zt.instanceMatrix&&(Kt=Zt.instanceMatrix),wp==="instanceColor"&&Zt.instanceColor&&(Kt=Zt.instanceColor)),Kt!==void 0){const h0=Kt.normalized,Pp=Kt.itemSize,d0=e.get(Kt);if(d0===void 0)continue;const x0=d0.buffer,Dp=d0.type,c0=d0.bytesPerElement,u0=Dp===r.INT||Dp===r.UNSIGNED_INT||Kt.gpuType===Ys;if(Kt.isInterleavedBufferAttribute){const y0=Kt.data,M0=y0.stride,sm=Kt.offset;if(y0.isInstancedInterleavedBuffer){for(let mm=0;mm<Cp.locationSize;mm++)K(Cp.location+mm,y0.meshPerAttribute);Zt.isInstancedMesh!==!0&&zp._maxInstanceCount===void 0&&(zp._maxInstanceCount=y0.meshPerAttribute*y0.count)}else for(let mm=0;mm<Cp.locationSize;mm++)le(Cp.location+mm);r.bindBuffer(r.ARRAY_BUFFER,x0);for(let mm=0;mm<Cp.locationSize;mm++)q(Cp.location+mm,Pp/Cp.locationSize,Dp,h0,M0*c0,(sm+Pp/Cp.locationSize*mm)*c0,u0)}else{if(Kt.isInstancedBufferAttribute){for(let y0=0;y0<Cp.locationSize;y0++)K(Cp.location+y0,Kt.meshPerAttribute);Zt.isInstancedMesh!==!0&&zp._maxInstanceCount===void 0&&(zp._maxInstanceCount=Kt.meshPerAttribute*Kt.count)}else for(let y0=0;y0<Cp.locationSize;y0++)le(Cp.location+y0);r.bindBuffer(r.ARRAY_BUFFER,x0);for(let y0=0;y0<Cp.locationSize;y0++)q(Cp.location+y0,Pp/Cp.locationSize,Dp,h0,Pp*c0,Pp/Cp.locationSize*y0*c0,u0)}}else if(ae!==void 0){const h0=ae[wp];if(h0!==void 0)switch(h0.length){case 2:r.vertexAttrib2fv(Cp.location,h0);break;case 3:r.vertexAttrib3fv(Cp.location,h0);break;case 4:r.vertexAttrib4fv(Cp.location,h0);break;default:r.vertexAttrib1fv(Cp.location,h0)}}}}vt()}function wt(){it();for(const Zt in a){const Mn=a[Zt];for(const kp in Mn){const zp=Mn[kp];for(const sa in zp)E(zp[sa].object),delete zp[sa];delete Mn[kp]}delete a[Zt]}}function bt(Zt){if(a[Zt.id]===void 0)return;const Mn=a[Zt.id];for(const kp in Mn){const zp=Mn[kp];for(const sa in zp)E(zp[sa].object),delete zp[sa];delete Mn[kp]}delete a[Zt.id]}function Ut(Zt){for(const Mn in a){const kp=a[Mn];if(kp[Zt.id]===void 0)continue;const zp=kp[Zt.id];for(const sa in zp)E(zp[sa].object),delete zp[sa];delete kp[Zt.id]}}function it(){zt(),s=!0,l!==o&&(l=o,b(l.object))}function zt(){o.geometry=null,o.program=null,o.wireframe=!1}return{setup:f,reset:it,resetDefaultState:zt,dispose:wt,releaseStatesOfGeometry:bt,releaseStatesOfProgram:Ut,initAttributes:ee,enableAttribute:le,disableUnusedAttributes:vt}}function cd(r,e,t){let a;function o(b){a=b}function l(b,E){r.drawArrays(a,b,E),t.update(E,a,1)}function s(b,E,M){M!==0&&(r.drawArraysInstanced(a,b,E,M),t.update(E,a,M))}function f(b,E,M){if(M===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(a,b,0,E,0,M);let I=0;for(let V=0;V<M;V++)I+=E[V];t.update(I,a,1)}function m(b,E,M,I){if(M===0)return;const V=e.get("WEBGL_multi_draw");if(V===null)for(let Z=0;Z<b.length;Z++)s(b[Z],E[Z],I[Z]);else{V.multiDrawArraysInstancedWEBGL(a,b,0,E,0,I,0,M);let Z=0;for(let ee=0;ee<M;ee++)Z+=E[ee]*I[ee];t.update(Z,a,1)}}this.setMode=o,this.render=l,this.renderInstances=s,this.renderMultiDraw=f,this.renderMultiDrawInstances=m}function hd(r,e,t,a){let o;function l(){if(o!==void 0)return o;if(e.has("EXT_texture_filter_anisotropic")===!0){const Ut=e.get("EXT_texture_filter_anisotropic");o=r.getParameter(Ut.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else o=0;return o}function s(Ut){return!(Ut!==Ve&&a.convert(Ut)!==r.getParameter(r.IMPLEMENTATION_COLOR_READ_FORMAT))}function f(Ut){const it=Ut===yi&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(Ut!==sn&&a.convert(Ut)!==r.getParameter(r.IMPLEMENTATION_COLOR_READ_TYPE)&&Ut!==nn&&!it)}function m(Ut){if(Ut==="highp"){if(r.getShaderPrecisionFormat(r.VERTEX_SHADER,r.HIGH_FLOAT).precision>0&&r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT).precision>0)return"highp";Ut="mediump"}return Ut==="mediump"&&r.getShaderPrecisionFormat(r.VERTEX_SHADER,r.MEDIUM_FLOAT).precision>0&&r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let b=t.precision!==void 0?t.precision:"highp";const E=m(b);E!==b&&(console.warn("THREE.WebGLRenderer:",b,"not supported, using",E,"instead."),b=E);const M=t.logarithmicDepthBuffer===!0,I=t.reversedDepthBuffer===!0&&e.has("EXT_clip_control"),V=r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS),Z=r.getParameter(r.MAX_VERTEX_TEXTURE_IMAGE_UNITS),ee=r.getParameter(r.MAX_TEXTURE_SIZE),le=r.getParameter(r.MAX_CUBE_MAP_TEXTURE_SIZE),K=r.getParameter(r.MAX_VERTEX_ATTRIBS),vt=r.getParameter(r.MAX_VERTEX_UNIFORM_VECTORS),q=r.getParameter(r.MAX_VARYING_VECTORS),Q=r.getParameter(r.MAX_FRAGMENT_UNIFORM_VECTORS),wt=Z>0,bt=r.getParameter(r.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:l,getMaxPrecision:m,textureFormatReadable:s,textureTypeReadable:f,precision:b,logarithmicDepthBuffer:M,reversedDepthBuffer:I,maxTextures:V,maxVertexTextures:Z,maxTextureSize:ee,maxCubemapSize:le,maxAttributes:K,maxVertexUniforms:vt,maxVaryings:q,maxFragmentUniforms:Q,vertexTextures:wt,maxSamples:bt}}function ud(r){const e=this;let t=null,a=0,o=!1,l=!1;const s=new fn,f=new Ft,m={value:null,needsUpdate:!1};this.uniform=m,this.numPlanes=0,this.numIntersection=0,this.init=function(M,I){const V=M.length!==0||I||a!==0||o;return o=I,a=M.length,V},this.beginShadows=function(){l=!0,E(null)},this.endShadows=function(){l=!1},this.setGlobalState=function(M,I){t=E(M,I,0)},this.setState=function(M,I,V){const Z=M.clippingPlanes,ee=M.clipIntersection,le=M.clipShadows,K=r.get(M);if(!o||Z===null||Z.length===0||l&&!le)l?E(null):b();else{const vt=l?0:a,q=vt*4;let Q=K.clippingState||null;m.value=Q,Q=E(Z,I,q,V);for(let wt=0;wt!==q;++wt)Q[wt]=t[wt];K.clippingState=Q,this.numIntersection=ee?this.numPlanes:0,this.numPlanes+=vt}};function b(){m.value!==t&&(m.value=t,m.needsUpdate=a>0),e.numPlanes=a,e.numIntersection=0}function E(M,I,V,Z){const ee=M!==null?M.length:0;let le=null;if(ee!==0){if(le=m.value,Z!==!0||le===null){const K=V+ee*4,vt=I.matrixWorldInverse;f.getNormalMatrix(vt),(le===null||le.length<K)&&(le=new Float32Array(K));for(let q=0,Q=V;q!==ee;++q,Q+=4)s.copy(M[q]).applyMatrix4(vt,f),s.normal.toArray(le,Q),le[Q+3]=s.constant}m.value=le,m.needsUpdate=!0}return e.numPlanes=ee,e.numIntersection=0,le}}function dd(r){let e=new WeakMap;function t(s,f){return f===ds?s.mapping=ri:f===fs&&(s.mapping=si),s}function a(s){if(s&&s.isTexture){const f=s.mapping;if(f===ds||f===fs)if(e.has(s)){const m=e.get(s).texture;return t(m,s.mapping)}else{const m=s.image;if(m&&m.height>0){const b=new dc(m.height);return b.fromEquirectangularTexture(r,s),e.set(s,b),s.addEventListener("dispose",o),t(b.texture,s.mapping)}else return null}}return s}function o(s){const f=s.target;f.removeEventListener("dispose",o);const m=e.get(f);m!==void 0&&(e.delete(f),m.dispose())}function l(){e=new WeakMap}return{get:a,dispose:l}}const Jn=4,ka=[.125,.215,.35,.446,.526,.582],Cn=20,jr=new Ec,Wa=new qt;let $r=null,Jr=0,Qr=0,ts=!1;const Rn=(1+Math.sqrt(5))/2,jn=1/Rn,Xa=[new U(-Rn,jn,0),new U(Rn,jn,0),new U(-jn,0,Rn),new U(jn,0,Rn),new U(0,Rn,-jn),new U(0,Rn,jn),new U(-1,1,-1),new U(1,1,-1),new U(-1,1,1),new U(1,1,1)],fd=new U;class Ya{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,a=.1,o=100,l={}){const{size:s=256,position:f=fd}=l;$r=this._renderer.getRenderTarget(),Jr=this._renderer.getActiveCubeFace(),Qr=this._renderer.getActiveMipmapLevel(),ts=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(s);const m=this._allocateTargets();return m.depthBuffer=!0,this._sceneToCubeUV(e,a,o,m,f),t>0&&this._blur(m,0,0,t),this._applyPMREM(m),this._cleanup(m),m}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=Za(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=Ka(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget($r,Jr,Qr),this._renderer.xr.enabled=ts,e.scissorTest=!1,nr(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===ri||e.mapping===si?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),$r=this._renderer.getRenderTarget(),Jr=this._renderer.getActiveCubeFace(),Qr=this._renderer.getActiveMipmapLevel(),ts=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const a=t||this._allocateTargets();return this._textureToCubeUV(e,a),this._applyPMREM(a),this._cleanup(a),a}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,a={magFilter:Ye,minFilter:Ye,generateMipmaps:!1,type:yi,format:Ve,colorSpace:ai,depthBuffer:!1},o=qa(e,t,a);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=qa(e,t,a);const{_lodMax:l}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=pd(l)),this._blurMaterial=md(l,e,t)}return o}_compileMaterial(e){const t=new De(this._lodPlanes[0],e);this._renderer.compile(t,jr)}_sceneToCubeUV(e,t,a,o,l){const s=new Fe(90,1,t,a),f=[1,-1,1,1,1,1],m=[1,1,1,-1,-1,-1],b=this._renderer,E=b.autoClear,M=b.toneMapping;b.getClearColor(Wa),b.toneMapping=_n,b.autoClear=!1,b.state.buffers.depth.getReversed()&&(b.setRenderTarget(o),b.clearDepth(),b.setRenderTarget(null));const I=new ni({name:"PMREM.Background",side:Te,depthWrite:!1,depthTest:!1}),V=new De(new Ri,I);let Z=!1;const ee=e.background;ee?ee.isColor&&(I.color.copy(ee),e.background=null,Z=!0):(I.color.copy(Wa),Z=!0);for(let le=0;le<6;le++){const K=le%3;K===0?(s.up.set(0,f[le],0),s.position.set(l.x,l.y,l.z),s.lookAt(l.x+m[le],l.y,l.z)):K===1?(s.up.set(0,0,f[le]),s.position.set(l.x,l.y,l.z),s.lookAt(l.x,l.y+m[le],l.z)):(s.up.set(0,f[le],0),s.position.set(l.x,l.y,l.z),s.lookAt(l.x,l.y,l.z+m[le]));const vt=this._cubeSize;nr(o,K*vt,le>2?vt:0,vt,vt),b.setRenderTarget(o),Z&&b.render(V,s),b.render(e,s)}V.geometry.dispose(),V.material.dispose(),b.toneMapping=M,b.autoClear=E,e.background=ee}_textureToCubeUV(e,t){const a=this._renderer,o=e.mapping===ri||e.mapping===si;o?(this._cubemapMaterial===null&&(this._cubemapMaterial=Za()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=Ka());const l=o?this._cubemapMaterial:this._equirectMaterial,s=new De(this._lodPlanes[0],l),f=l.uniforms;f.envMap.value=e;const m=this._cubeSize;nr(t,0,0,3*m,2*m),a.setRenderTarget(t),a.render(s,jr)}_applyPMREM(e){const t=this._renderer,a=t.autoClear;t.autoClear=!1;const o=this._lodPlanes.length;for(let l=1;l<o;l++){const s=Math.sqrt(this._sigmas[l]*this._sigmas[l]-this._sigmas[l-1]*this._sigmas[l-1]),f=Xa[(o-l-1)%Xa.length];this._blur(e,l-1,l,s,f)}t.autoClear=a}_blur(e,t,a,o,l){const s=this._pingPongRenderTarget;this._halfBlur(e,s,t,a,o,"latitudinal",l),this._halfBlur(s,e,a,a,o,"longitudinal",l)}_halfBlur(e,t,a,o,l,s,f){const m=this._renderer,b=this._blurMaterial;s!=="latitudinal"&&s!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const E=3,M=new De(this._lodPlanes[o],b),I=b.uniforms,V=this._sizeLods[a]-1,Z=isFinite(l)?Math.PI/(2*V):2*Math.PI/(2*Cn-1),ee=l/Z,le=isFinite(l)?1+Math.floor(E*ee):Cn;le>Cn&&console.warn(`sigmaRadians, ${l}, is too large and will clip, as it requested ${le} samples when the maximum is set to ${Cn}`);const K=[];let vt=0;for(let Ut=0;Ut<Cn;++Ut){const it=Ut/ee,zt=Math.exp(-it*it/2);K.push(zt),Ut===0?vt+=zt:Ut<le&&(vt+=2*zt)}for(let Ut=0;Ut<K.length;Ut++)K[Ut]=K[Ut]/vt;I.envMap.value=e.texture,I.samples.value=le,I.weights.value=K,I.latitudinal.value=s==="latitudinal",f&&(I.poleAxis.value=f);const{_lodMax:q}=this;I.dTheta.value=Z,I.mipInt.value=q-a;const Q=this._sizeLods[o],wt=3*Q*(o>q-Jn?o-q+Jn:0),bt=4*(this._cubeSize-Q);nr(t,wt,bt,3*Q,2*Q),m.setRenderTarget(t),m.render(M,jr)}}function pd(r){const e=[],t=[],a=[];let o=r;const l=r-Jn+1+ka.length;for(let s=0;s<l;s++){const f=Math.pow(2,o);t.push(f);let m=1/f;s>r-Jn?m=ka[s-r+Jn-1]:s===0&&(m=0),a.push(m);const b=1/(f-2),E=-b,M=1+b,I=[E,E,M,E,M,M,E,E,M,M,E,M],V=6,Z=6,ee=3,le=2,K=1,vt=new Float32Array(ee*Z*V),q=new Float32Array(le*Z*V),Q=new Float32Array(K*Z*V);for(let bt=0;bt<V;bt++){const Ut=bt%3*2/3-1,it=bt>2?0:-1,zt=[Ut,it,0,Ut+2/3,it,0,Ut+2/3,it+1,0,Ut,it,0,Ut+2/3,it+1,0,Ut,it+1,0];vt.set(zt,ee*Z*bt),q.set(I,le*Z*bt);const Zt=[bt,bt,bt,bt,bt,bt];Q.set(Zt,K*Z*bt)}const wt=new Ae;wt.setAttribute("position",new Ke(vt,ee)),wt.setAttribute("uv",new Ke(q,le)),wt.setAttribute("faceIndex",new Ke(Q,K)),e.push(wt),o>Jn&&o--}return{lodPlanes:e,sizeLods:t,sigmas:a}}function qa(r,e,t){const a=new In(r,e,t);return a.texture.mapping=gr,a.texture.name="PMREM.cubeUv",a.scissorTest=!0,a}function nr(r,e,t,a,o){r.viewport.set(e,t,a,o),r.scissor.set(e,t,a,o)}function md(r,e,t){const a=new Float32Array(Cn),o=new U(0,1,0);return new vn({name:"SphericalGaussianBlur",defines:{n:Cn,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${r}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:a},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:o}},vertexShader:ia(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:mn,depthTest:!1,depthWrite:!1})}function Ka(){return new vn({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:ia(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:mn,depthTest:!1,depthWrite:!1})}function Za(){return new vn({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:ia(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:mn,depthTest:!1,depthWrite:!1})}function ia(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function _d(r){let e=new WeakMap,t=null;function a(f){if(f&&f.isTexture){const m=f.mapping,b=m===ds||m===fs,E=m===ri||m===si;if(b||E){let M=e.get(f);const I=M!==void 0?M.texture.pmremVersion:0;if(f.isRenderTargetTexture&&f.pmremVersion!==I)return t===null&&(t=new Ya(r)),M=b?t.fromEquirectangular(f,M):t.fromCubemap(f,M),M.texture.pmremVersion=f.pmremVersion,e.set(f,M),M.texture;if(M!==void 0)return M.texture;{const V=f.image;return b&&V&&V.height>0||E&&V&&o(V)?(t===null&&(t=new Ya(r)),M=b?t.fromEquirectangular(f):t.fromCubemap(f),M.texture.pmremVersion=f.pmremVersion,e.set(f,M),f.addEventListener("dispose",l),M.texture):null}}}return f}function o(f){let m=0;const b=6;for(let E=0;E<b;E++)f[E]!==void 0&&m++;return m===b}function l(f){const m=f.target;m.removeEventListener("dispose",l);const b=e.get(m);b!==void 0&&(e.delete(m),b.dispose())}function s(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:a,dispose:s}}function gd(r){const e={};function t(a){if(e[a]!==void 0)return e[a];let o;switch(a){case"WEBGL_depth_texture":o=r.getExtension("WEBGL_depth_texture")||r.getExtension("MOZ_WEBGL_depth_texture")||r.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":o=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":o=r.getExtension("WEBGL_compressed_texture_s3tc")||r.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":o=r.getExtension("WEBGL_compressed_texture_pvrtc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:o=r.getExtension(a)}return e[a]=o,o}return{has:function(a){return t(a)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(a){const o=t(a);return o===null&&Ei("THREE.WebGLRenderer: "+a+" extension not supported."),o}}}function vd(r,e,t,a){const o={},l=new WeakMap;function s(M){const I=M.target;I.index!==null&&e.remove(I.index);for(const Z in I.attributes)e.remove(I.attributes[Z]);I.removeEventListener("dispose",s),delete o[I.id];const V=l.get(I);V&&(e.remove(V),l.delete(I)),a.releaseStatesOfGeometry(I),I.isInstancedBufferGeometry===!0&&delete I._maxInstanceCount,t.memory.geometries--}function f(M,I){return o[I.id]===!0||(I.addEventListener("dispose",s),o[I.id]=!0,t.memory.geometries++),I}function m(M){const I=M.attributes;for(const V in I)e.update(I[V],r.ARRAY_BUFFER)}function b(M){const I=[],V=M.index,Z=M.attributes.position;let ee=0;if(V!==null){const vt=V.array;ee=V.version;for(let q=0,Q=vt.length;q<Q;q+=3){const wt=vt[q+0],bt=vt[q+1],Ut=vt[q+2];I.push(wt,bt,bt,Ut,Ut,wt)}}else if(Z!==void 0){const vt=Z.array;ee=Z.version;for(let q=0,Q=vt.length/3-1;q<Q;q+=3){const wt=q+0,bt=q+1,Ut=q+2;I.push(wt,bt,bt,Ut,Ut,wt)}}else return;const le=new(wo(I)?Uo:Lo)(I,1);le.version=ee;const K=l.get(M);K&&e.remove(K),l.set(M,le)}function E(M){const I=l.get(M);if(I){const V=M.index;V!==null&&I.version<V.version&&b(M)}else b(M);return l.get(M)}return{get:f,update:m,getWireframeAttribute:E}}function xd(r,e,t){let a;function o(I){a=I}let l,s;function f(I){l=I.type,s=I.bytesPerElement}function m(I,V){r.drawElements(a,V,l,I*s),t.update(V,a,1)}function b(I,V,Z){Z!==0&&(r.drawElementsInstanced(a,V,l,I*s,Z),t.update(V,a,Z))}function E(I,V,Z){if(Z===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(a,V,0,l,I,0,Z);let ee=0;for(let le=0;le<Z;le++)ee+=V[le];t.update(ee,a,1)}function M(I,V,Z,ee){if(Z===0)return;const le=e.get("WEBGL_multi_draw");if(le===null)for(let K=0;K<I.length;K++)b(I[K]/s,V[K],ee[K]);else{le.multiDrawElementsInstancedWEBGL(a,V,0,l,I,0,ee,0,Z);let K=0;for(let vt=0;vt<Z;vt++)K+=V[vt]*ee[vt];t.update(K,a,1)}}this.setMode=o,this.setIndex=f,this.render=m,this.renderInstances=b,this.renderMultiDraw=E,this.renderMultiDrawInstances=M}function Md(r){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function a(l,s,f){switch(t.calls++,s){case r.TRIANGLES:t.triangles+=f*(l/3);break;case r.LINES:t.lines+=f*(l/2);break;case r.LINE_STRIP:t.lines+=f*(l-1);break;case r.LINE_LOOP:t.lines+=f*l;break;case r.POINTS:t.points+=f*l;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",s);break}}function o(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:o,update:a}}function Sd(r,e,t){const a=new WeakMap,o=new oe;function l(s,f,m){const b=s.morphTargetInfluences,E=f.morphAttributes.position||f.morphAttributes.normal||f.morphAttributes.color,M=E!==void 0?E.length:0;let I=a.get(f);if(I===void 0||I.count!==M){let V=function(){it.dispose(),a.delete(f),f.removeEventListener("dispose",V)};I!==void 0&&I.texture.dispose();const Z=f.morphAttributes.position!==void 0,ee=f.morphAttributes.normal!==void 0,le=f.morphAttributes.color!==void 0,K=f.morphAttributes.position||[],vt=f.morphAttributes.normal||[],q=f.morphAttributes.color||[];let Q=0;Z===!0&&(Q=1),ee===!0&&(Q=2),le===!0&&(Q=3);let wt=f.attributes.position.count*Q,bt=1;wt>e.maxTextureSize&&(bt=Math.ceil(wt/e.maxTextureSize),wt=e.maxTextureSize);const Ut=new Float32Array(wt*bt*4*M),it=new Co(Ut,wt,bt,M);it.type=nn,it.needsUpdate=!0;const zt=Q*4;for(let Zt=0;Zt<M;Zt++){const Mn=K[Zt],kp=vt[Zt],zp=q[Zt],sa=wt*bt*4*Zt;for(let qo=0;qo<Mn.count;qo++){const ae=qo*zt;Z===!0&&(o.fromBufferAttribute(Mn,qo),Ut[sa+ae+0]=o.x,Ut[sa+ae+1]=o.y,Ut[sa+ae+2]=o.z,Ut[sa+ae+3]=0),ee===!0&&(o.fromBufferAttribute(kp,qo),Ut[sa+ae+4]=o.x,Ut[sa+ae+5]=o.y,Ut[sa+ae+6]=o.z,Ut[sa+ae+7]=0),le===!0&&(o.fromBufferAttribute(zp,qo),Ut[sa+ae+8]=o.x,Ut[sa+ae+9]=o.y,Ut[sa+ae+10]=o.z,Ut[sa+ae+11]=zp.itemSize===4?o.w:1)}}I={count:M,texture:it,size:new Bt(wt,bt)},a.set(f,I),f.addEventListener("dispose",V)}if(s.isInstancedMesh===!0&&s.morphTexture!==null)m.getUniforms().setValue(r,"morphTexture",s.morphTexture,t);else{let V=0;for(let ee=0;ee<b.length;ee++)V+=b[ee];const Z=f.morphTargetsRelative?1:1-V;m.getUniforms().setValue(r,"morphTargetBaseInfluence",Z),m.getUniforms().setValue(r,"morphTargetInfluences",b)}m.getUniforms().setValue(r,"morphTargetsTexture",I.texture,t),m.getUniforms().setValue(r,"morphTargetsTextureSize",I.size)}return{update:l}}function Ed(r,e,t,a){let o=new WeakMap;function l(m){const b=a.render.frame,E=m.geometry,M=e.get(m,E);if(o.get(M)!==b&&(e.update(M),o.set(M,b)),m.isInstancedMesh&&(m.hasEventListener("dispose",f)===!1&&m.addEventListener("dispose",f),o.get(m)!==b&&(t.update(m.instanceMatrix,r.ARRAY_BUFFER),m.instanceColor!==null&&t.update(m.instanceColor,r.ARRAY_BUFFER),o.set(m,b))),m.isSkinnedMesh){const I=m.skeleton;o.get(I)!==b&&(I.update(),o.set(I,b))}return M}function s(){o=new WeakMap}function f(m){const b=m.target;b.removeEventListener("dispose",f),t.remove(b.instanceMatrix),b.instanceColor!==null&&t.remove(b.instanceColor)}return{update:l,dispose:s}}const Vo=new be,ja=new Bo(1,1),Go=new Co,ko=new Zl,Wo=new Fo,$a=[],Ja=[],Qa=new Float32Array(16),to=new Float32Array(9),eo=new Float32Array(4);function li(r,e,t){const a=r[0];if(a<=0||a>0)return r;const o=e*t;let l=$a[o];if(l===void 0&&(l=new Float32Array(o),$a[o]=l),e!==0){a.toArray(l,0);for(let s=1,f=0;s!==e;++s)f+=t,r[s].toArray(l,f)}return l}function de(r,e){if(r.length!==e.length)return!1;for(let t=0,a=r.length;t<a;t++)if(r[t]!==e[t])return!1;return!0}function fe(r,e){for(let t=0,a=e.length;t<a;t++)r[t]=e[t]}function Mr(r,e){let t=Ja[e];t===void 0&&(t=new Int32Array(e),Ja[e]=t);for(let a=0;a!==e;++a)t[a]=r.allocateTextureUnit();return t}function yd(r,e){const t=this.cache;t[0]!==e&&(r.uniform1f(this.addr,e),t[0]=e)}function Td(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(de(t,e))return;r.uniform2fv(this.addr,e),fe(t,e)}}function bd(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(r.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(de(t,e))return;r.uniform3fv(this.addr,e),fe(t,e)}}function Ad(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(de(t,e))return;r.uniform4fv(this.addr,e),fe(t,e)}}function Rd(r,e){const t=this.cache,a=e.elements;if(a===void 0){if(de(t,e))return;r.uniformMatrix2fv(this.addr,!1,e),fe(t,e)}else{if(de(t,a))return;eo.set(a),r.uniformMatrix2fv(this.addr,!1,eo),fe(t,a)}}function wd(r,e){const t=this.cache,a=e.elements;if(a===void 0){if(de(t,e))return;r.uniformMatrix3fv(this.addr,!1,e),fe(t,e)}else{if(de(t,a))return;to.set(a),r.uniformMatrix3fv(this.addr,!1,to),fe(t,a)}}function Cd(r,e){const t=this.cache,a=e.elements;if(a===void 0){if(de(t,e))return;r.uniformMatrix4fv(this.addr,!1,e),fe(t,e)}else{if(de(t,a))return;Qa.set(a),r.uniformMatrix4fv(this.addr,!1,Qa),fe(t,a)}}function Pd(r,e){const t=this.cache;t[0]!==e&&(r.uniform1i(this.addr,e),t[0]=e)}function Dd(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(de(t,e))return;r.uniform2iv(this.addr,e),fe(t,e)}}function Ld(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(de(t,e))return;r.uniform3iv(this.addr,e),fe(t,e)}}function Ud(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(de(t,e))return;r.uniform4iv(this.addr,e),fe(t,e)}}function Id(r,e){const t=this.cache;t[0]!==e&&(r.uniform1ui(this.addr,e),t[0]=e)}function Nd(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(de(t,e))return;r.uniform2uiv(this.addr,e),fe(t,e)}}function Fd(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(de(t,e))return;r.uniform3uiv(this.addr,e),fe(t,e)}}function Od(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(de(t,e))return;r.uniform4uiv(this.addr,e),fe(t,e)}}function Bd(r,e,t){const a=this.cache,o=t.allocateTextureUnit();a[0]!==o&&(r.uniform1i(this.addr,o),a[0]=o);let l;this.type===r.SAMPLER_2D_SHADOW?(ja.compareFunction=Ro,l=ja):l=Vo,t.setTexture2D(e||l,o)}function zd(r,e,t){const a=this.cache,o=t.allocateTextureUnit();a[0]!==o&&(r.uniform1i(this.addr,o),a[0]=o),t.setTexture3D(e||ko,o)}function Hd(r,e,t){const a=this.cache,o=t.allocateTextureUnit();a[0]!==o&&(r.uniform1i(this.addr,o),a[0]=o),t.setTextureCube(e||Wo,o)}function Vd(r,e,t){const a=this.cache,o=t.allocateTextureUnit();a[0]!==o&&(r.uniform1i(this.addr,o),a[0]=o),t.setTexture2DArray(e||Go,o)}function Gd(r){switch(r){case 5126:return yd;case 35664:return Td;case 35665:return bd;case 35666:return Ad;case 35674:return Rd;case 35675:return wd;case 35676:return Cd;case 5124:case 35670:return Pd;case 35667:case 35671:return Dd;case 35668:case 35672:return Ld;case 35669:case 35673:return Ud;case 5125:return Id;case 36294:return Nd;case 36295:return Fd;case 36296:return Od;case 35678:case 36198:case 36298:case 36306:case 35682:return Bd;case 35679:case 36299:case 36307:return zd;case 35680:case 36300:case 36308:case 36293:return Hd;case 36289:case 36303:case 36311:case 36292:return Vd}}function kd(r,e){r.uniform1fv(this.addr,e)}function Wd(r,e){const t=li(e,this.size,2);r.uniform2fv(this.addr,t)}function Xd(r,e){const t=li(e,this.size,3);r.uniform3fv(this.addr,t)}function Yd(r,e){const t=li(e,this.size,4);r.uniform4fv(this.addr,t)}function qd(r,e){const t=li(e,this.size,4);r.uniformMatrix2fv(this.addr,!1,t)}function Kd(r,e){const t=li(e,this.size,9);r.uniformMatrix3fv(this.addr,!1,t)}function Zd(r,e){const t=li(e,this.size,16);r.uniformMatrix4fv(this.addr,!1,t)}function jd(r,e){r.uniform1iv(this.addr,e)}function $d(r,e){r.uniform2iv(this.addr,e)}function Jd(r,e){r.uniform3iv(this.addr,e)}function Qd(r,e){r.uniform4iv(this.addr,e)}function tf(r,e){r.uniform1uiv(this.addr,e)}function ef(r,e){r.uniform2uiv(this.addr,e)}function nf(r,e){r.uniform3uiv(this.addr,e)}function rf(r,e){r.uniform4uiv(this.addr,e)}function sf(r,e,t){const a=this.cache,o=e.length,l=Mr(t,o);de(a,l)||(r.uniform1iv(this.addr,l),fe(a,l));for(let s=0;s!==o;++s)t.setTexture2D(e[s]||Vo,l[s])}function af(r,e,t){const a=this.cache,o=e.length,l=Mr(t,o);de(a,l)||(r.uniform1iv(this.addr,l),fe(a,l));for(let s=0;s!==o;++s)t.setTexture3D(e[s]||ko,l[s])}function of(r,e,t){const a=this.cache,o=e.length,l=Mr(t,o);de(a,l)||(r.uniform1iv(this.addr,l),fe(a,l));for(let s=0;s!==o;++s)t.setTextureCube(e[s]||Wo,l[s])}function lf(r,e,t){const a=this.cache,o=e.length,l=Mr(t,o);de(a,l)||(r.uniform1iv(this.addr,l),fe(a,l));for(let s=0;s!==o;++s)t.setTexture2DArray(e[s]||Go,l[s])}function cf(r){switch(r){case 5126:return kd;case 35664:return Wd;case 35665:return Xd;case 35666:return Yd;case 35674:return qd;case 35675:return Kd;case 35676:return Zd;case 5124:case 35670:return jd;case 35667:case 35671:return $d;case 35668:case 35672:return Jd;case 35669:case 35673:return Qd;case 5125:return tf;case 36294:return ef;case 36295:return nf;case 36296:return rf;case 35678:case 36198:case 36298:case 36306:case 35682:return sf;case 35679:case 36299:case 36307:return af;case 35680:case 36300:case 36308:case 36293:return of;case 36289:case 36303:case 36311:case 36292:return lf}}class hf{constructor(e,t,a){this.id=e,this.addr=a,this.cache=[],this.type=t.type,this.setValue=Gd(t.type)}}class uf{constructor(e,t,a){this.id=e,this.addr=a,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=cf(t.type)}}class df{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,a){const o=this.seq;for(let l=0,s=o.length;l!==s;++l){const f=o[l];f.setValue(e,t[f.id],a)}}}const es=/(\w+)(\])?(\[|\.)?/g;function no(r,e){r.seq.push(e),r.map[e.id]=e}function ff(r,e,t){const a=r.name,o=a.length;for(es.lastIndex=0;;){const l=es.exec(a),s=es.lastIndex;let f=l[1];const m=l[2]==="]",b=l[3];if(m&&(f=f|0),b===void 0||b==="["&&s+2===o){no(t,b===void 0?new hf(f,r,e):new uf(f,r,e));break}else{let E=t.map[f];E===void 0&&(E=new df(f),no(t,E)),t=E}}}class cr{constructor(e,t){this.seq=[],this.map={};const a=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let o=0;o<a;++o){const l=e.getActiveUniform(t,o),s=e.getUniformLocation(t,l.name);ff(l,s,this)}}setValue(e,t,a,o){const l=this.map[t];l!==void 0&&l.setValue(e,a,o)}setOptional(e,t,a){const o=t[a];o!==void 0&&this.setValue(e,a,o)}static upload(e,t,a,o){for(let l=0,s=t.length;l!==s;++l){const f=t[l],m=a[f.id];m.needsUpdate!==!1&&f.setValue(e,m.value,o)}}static seqWithValue(e,t){const a=[];for(let o=0,l=e.length;o!==l;++o){const s=e[o];s.id in t&&a.push(s)}return a}}function io(r,e,t){const a=r.createShader(e);return r.shaderSource(a,t),r.compileShader(a),a}const pf=37297;let mf=0;function _f(r,e){const t=r.split(`
`),a=[],o=Math.max(e-6,0),l=Math.min(e+6,t.length);for(let s=o;s<l;s++){const f=s+1;a.push(`${f===e?">":" "} ${f}: ${t[s]}`)}return a.join(`
`)}const ro=new Ft;function gf(r){Xt._getMatrix(ro,Xt.workingColorSpace,r);const e=`mat3( ${ro.elements.map(t=>t.toFixed(4))} )`;switch(Xt.getTransfer(r)){case hr:return[e,"LinearTransferOETF"];case Jt:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",r),[e,"LinearTransferOETF"]}}function so(r,e,t){const a=r.getShaderParameter(e,r.COMPILE_STATUS),o=(r.getShaderInfoLog(e)||"").trim();if(a&&o==="")return"";const l=/ERROR: 0:(\d+)/.exec(o);if(l){const s=parseInt(l[1]);return t.toUpperCase()+`

`+o+`

`+_f(r.getShaderSource(e),s)}else return o}function vf(r,e){const t=gf(e);return[`vec4 ${r}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function xf(r,e){let t;switch(e){case Sl:t="Linear";break;case El:t="Reinhard";break;case yl:t="Cineon";break;case Tl:t="ACESFilmic";break;case Al:t="AgX";break;case Rl:t="Neutral";break;case bl:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+r+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const ir=new U;function Mf(){Xt.getLuminanceCoefficients(ir);const r=ir.x.toFixed(4),e=ir.y.toFixed(4),t=ir.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${r}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function Sf(r){return[r.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",r.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(_i).join(`
`)}function Ef(r){const e=[];for(const t in r){const a=r[t];a!==!1&&e.push("#define "+t+" "+a)}return e.join(`
`)}function yf(r,e){const t={},a=r.getProgramParameter(e,r.ACTIVE_ATTRIBUTES);for(let o=0;o<a;o++){const l=r.getActiveAttrib(e,o),s=l.name;let f=1;l.type===r.FLOAT_MAT2&&(f=2),l.type===r.FLOAT_MAT3&&(f=3),l.type===r.FLOAT_MAT4&&(f=4),t[s]={type:l.type,location:r.getAttribLocation(e,s),locationSize:f}}return t}function _i(r){return r!==""}function ao(r,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return r.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function oo(r,e){return r.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Tf=/^[ \t]*#include +<([\w\d./]+)>/gm;function Xs(r){return r.replace(Tf,Af)}const bf=new Map;function Af(r,e){let t=Ot[e];if(t===void 0){const a=bf.get(e);if(a!==void 0)t=Ot[a],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,a);else throw new Error("Can not resolve #include <"+e+">")}return Xs(t)}const Rf=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function lo(r){return r.replace(Rf,wf)}function wf(r,e,t,a){let o="";for(let l=parseInt(e);l<parseInt(t);l++)o+=a.replace(/\[\s*i\s*\]/g,"[ "+l+" ]").replace(/UNROLLED_LOOP_INDEX/g,l);return o}function co(r){let e=`precision ${r.precision} float;
	precision ${r.precision} int;
	precision ${r.precision} sampler2D;
	precision ${r.precision} samplerCube;
	precision ${r.precision} sampler3D;
	precision ${r.precision} sampler2DArray;
	precision ${r.precision} sampler2DShadow;
	precision ${r.precision} samplerCubeShadow;
	precision ${r.precision} sampler2DArrayShadow;
	precision ${r.precision} isampler2D;
	precision ${r.precision} isampler3D;
	precision ${r.precision} isamplerCube;
	precision ${r.precision} isampler2DArray;
	precision ${r.precision} usampler2D;
	precision ${r.precision} usampler3D;
	precision ${r.precision} usamplerCube;
	precision ${r.precision} usampler2DArray;
	`;return r.precision==="highp"?e+=`
#define HIGH_PRECISION`:r.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:r.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function Cf(r){let e="SHADOWMAP_TYPE_BASIC";return r.shadowMapType===_o?e="SHADOWMAP_TYPE_PCF":r.shadowMapType===tl?e="SHADOWMAP_TYPE_PCF_SOFT":r.shadowMapType===en&&(e="SHADOWMAP_TYPE_VSM"),e}function Pf(r){let e="ENVMAP_TYPE_CUBE";if(r.envMap)switch(r.envMapMode){case ri:case si:e="ENVMAP_TYPE_CUBE";break;case gr:e="ENVMAP_TYPE_CUBE_UV";break}return e}function Df(r){let e="ENVMAP_MODE_REFLECTION";if(r.envMap)switch(r.envMapMode){case si:e="ENVMAP_MODE_REFRACTION";break}return e}function Lf(r){let e="ENVMAP_BLENDING_NONE";if(r.envMap)switch(r.combine){case go:e="ENVMAP_BLENDING_MULTIPLY";break;case xl:e="ENVMAP_BLENDING_MIX";break;case Ml:e="ENVMAP_BLENDING_ADD";break}return e}function Uf(r){const e=r.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,a=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:a,maxMip:t}}function If(r,e,t,a){const o=r.getContext(),l=t.defines;let s=t.vertexShader,f=t.fragmentShader;const m=Cf(t),b=Pf(t),E=Df(t),M=Lf(t),I=Uf(t),V=Sf(t),Z=Ef(l),ee=o.createProgram();let le,K,vt=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(le=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,Z].filter(_i).join(`
`),le.length>0&&(le+=`
`),K=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,Z].filter(_i).join(`
`),K.length>0&&(K+=`
`)):(le=[co(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,Z,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+E:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+m:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",t.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(_i).join(`
`),K=[co(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,Z,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+b:"",t.envMap?"#define "+E:"",t.envMap?"#define "+M:"",I?"#define CUBEUV_TEXEL_WIDTH "+I.texelWidth:"",I?"#define CUBEUV_TEXEL_HEIGHT "+I.texelHeight:"",I?"#define CUBEUV_MAX_MIP "+I.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+m:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",t.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==_n?"#define TONE_MAPPING":"",t.toneMapping!==_n?Ot.tonemapping_pars_fragment:"",t.toneMapping!==_n?xf("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Ot.colorspace_pars_fragment,vf("linearToOutputTexel",t.outputColorSpace),Mf(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(_i).join(`
`)),s=Xs(s),s=ao(s,t),s=oo(s,t),f=Xs(f),f=ao(f,t),f=oo(f,t),s=lo(s),f=lo(f),t.isRawShaderMaterial!==!0&&(vt=`#version 300 es
`,le=[V,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+le,K=["#define varying in",t.glslVersion===ga?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===ga?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+K);const q=vt+le+s,Q=vt+K+f,wt=io(o,o.VERTEX_SHADER,q),bt=io(o,o.FRAGMENT_SHADER,Q);o.attachShader(ee,wt),o.attachShader(ee,bt),t.index0AttributeName!==void 0?o.bindAttribLocation(ee,0,t.index0AttributeName):t.morphTargets===!0&&o.bindAttribLocation(ee,0,"position"),o.linkProgram(ee);function Ut(Mn){if(r.debug.checkShaderErrors){const kp=o.getProgramInfoLog(ee)||"",zp=o.getShaderInfoLog(wt)||"",sa=o.getShaderInfoLog(bt)||"",qo=kp.trim(),ae=zp.trim(),wp=sa.trim();let Cp=!0,Kt=!0;if(o.getProgramParameter(ee,o.LINK_STATUS)===!1)if(Cp=!1,typeof r.debug.onShaderError=="function")r.debug.onShaderError(o,ee,wt,bt);else{const h0=so(o,wt,"vertex"),Pp=so(o,bt,"fragment");console.error("THREE.WebGLProgram: Shader Error "+o.getError()+" - VALIDATE_STATUS "+o.getProgramParameter(ee,o.VALIDATE_STATUS)+`

Material Name: `+Mn.name+`
Material Type: `+Mn.type+`

Program Info Log: `+qo+`
`+h0+`
`+Pp)}else qo!==""?console.warn("THREE.WebGLProgram: Program Info Log:",qo):(ae===""||wp==="")&&(Kt=!1);Kt&&(Mn.diagnostics={runnable:Cp,programLog:qo,vertexShader:{log:ae,prefix:le},fragmentShader:{log:wp,prefix:K}})}o.deleteShader(wt),o.deleteShader(bt),it=new cr(o,ee),zt=yf(o,ee)}let it;this.getUniforms=function(){return it===void 0&&Ut(this),it};let zt;this.getAttributes=function(){return zt===void 0&&Ut(this),zt};let Zt=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return Zt===!1&&(Zt=o.getProgramParameter(ee,pf)),Zt},this.destroy=function(){a.releaseStatesOfProgram(this),o.deleteProgram(ee),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=mf++,this.cacheKey=e,this.usedTimes=1,this.program=ee,this.vertexShader=wt,this.fragmentShader=bt,this}let Nf=0;class Ff{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,a=e.fragmentShader,o=this._getShaderStage(t),l=this._getShaderStage(a),s=this._getShaderCacheForMaterial(e);return s.has(o)===!1&&(s.add(o),o.usedTimes++),s.has(l)===!1&&(s.add(l),l.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const a of t)a.usedTimes--,a.usedTimes===0&&this.shaderCache.delete(a.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let a=t.get(e);return a===void 0&&(a=new Set,t.set(e,a)),a}_getShaderStage(e){const t=this.shaderCache;let a=t.get(e);return a===void 0&&(a=new Of(e),t.set(e,a)),a}}class Of{constructor(e){this.id=Nf++,this.code=e,this.usedTimes=0}}function Bf(r,e,t,a,o,l,s){const f=new Po,m=new Ff,b=new Set,E=[],M=o.logarithmicDepthBuffer,I=o.vertexTextures;let V=o.precision;const Z={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function ee(zt){return b.add(zt),zt===0?"uv":`uv${zt}`}function le(zt,Zt,Mn,kp,zp){const sa=kp.fog,qo=zp.geometry,ae=zt.isMeshStandardMaterial?kp.environment:null,wp=(zt.isMeshStandardMaterial?t:e).get(zt.envMap||ae),Cp=wp&&wp.mapping===gr?wp.image.height:null,Kt=Z[zt.type];zt.precision!==null&&(V=o.getMaxPrecision(zt.precision),V!==zt.precision&&console.warn("THREE.WebGLProgram.getParameters:",zt.precision,"not supported, using",V,"instead."));const h0=qo.morphAttributes.position||qo.morphAttributes.normal||qo.morphAttributes.color,Pp=h0!==void 0?h0.length:0;let d0=0;qo.morphAttributes.position!==void 0&&(d0=1),qo.morphAttributes.normal!==void 0&&(d0=2),qo.morphAttributes.color!==void 0&&(d0=3);let x0,Dp,c0,u0;if(Kt){const Gg=We[Kt];x0=Gg.vertexShader,Dp=Gg.fragmentShader}else x0=zt.vertexShader,Dp=zt.fragmentShader,m.update(zt),c0=m.getVertexShaderID(zt),u0=m.getFragmentShaderID(zt);const y0=r.getRenderTarget(),M0=r.state.buffers.depth.getReversed(),sm=zp.isInstancedMesh===!0,mm=zp.isBatchedMesh===!0,Mm=!!zt.map,v1=!!zt.matcap,v0=!!wp,D1=!!zt.aoMap,P1=!!zt.lightMap,ig=!!zt.bumpMap,w1=!!zt.normalMap,o1=!!zt.displacementMap,g1=!!zt.emissiveMap,X1=!!zt.metalnessMap,sg=!!zt.roughnessMap,og=zt.anisotropy>0,R0=zt.clearcoat>0,Xp=zt.dispersion>0,wm=zt.iridescence>0,$m=zt.sheen>0,Vp=zt.transmission>0,r0=og&&!!zt.anisotropyMap,B0=R0&&!!zt.clearcoatMap,bm=R0&&!!zt.clearcoatNormalMap,Sm=R0&&!!zt.clearcoatRoughnessMap,Xm=wm&&!!zt.iridescenceMap,cm=wm&&!!zt.iridescenceThicknessMap,zm=$m&&!!zt.sheenColorMap,x1=$m&&!!zt.sheenRoughnessMap,Um=!!zt.specularMap,h1=!!zt.specularColorMap,Sg=!!zt.specularIntensityMap,um=Vp&&!!zt.transmissionMap,M1=Vp&&!!zt.thicknessMap,F1=!!zt.gradientMap,Y1=!!zt.alphaMap,n1=zt.alphaTest>0,Zm=!!zt.alphaHash,S1=!!zt.extensions;let p1=_n;zt.toneMapped&&(y0===null||y0.isXRRenderTarget===!0)&&(p1=r.toneMapping);const hv={shaderID:Kt,shaderType:zt.type,shaderName:zt.name,vertexShader:x0,fragmentShader:Dp,defines:zt.defines,customVertexShaderID:c0,customFragmentShaderID:u0,isRawShaderMaterial:zt.isRawShaderMaterial===!0,glslVersion:zt.glslVersion,precision:V,batching:mm,batchingColor:mm&&zp._colorsTexture!==null,instancing:sm,instancingColor:sm&&zp.instanceColor!==null,instancingMorph:sm&&zp.morphTexture!==null,supportsVertexTextures:I,outputColorSpace:y0===null?r.outputColorSpace:y0.isXRRenderTarget===!0?y0.texture.colorSpace:ai,alphaToCoverage:!!zt.alphaToCoverage,map:Mm,matcap:v1,envMap:v0,envMapMode:v0&&wp.mapping,envMapCubeUVHeight:Cp,aoMap:D1,lightMap:P1,bumpMap:ig,normalMap:w1,displacementMap:I&&o1,emissiveMap:g1,normalMapObjectSpace:w1&&zt.normalMapType===Ll,normalMapTangentSpace:w1&&zt.normalMapType===Dl,metalnessMap:X1,roughnessMap:sg,anisotropy:og,anisotropyMap:r0,clearcoat:R0,clearcoatMap:B0,clearcoatNormalMap:bm,clearcoatRoughnessMap:Sm,dispersion:Xp,iridescence:wm,iridescenceMap:Xm,iridescenceThicknessMap:cm,sheen:$m,sheenColorMap:zm,sheenRoughnessMap:x1,specularMap:Um,specularColorMap:h1,specularIntensityMap:Sg,transmission:Vp,transmissionMap:um,thicknessMap:M1,gradientMap:F1,opaque:zt.transparent===!1&&zt.blending===ti&&zt.alphaToCoverage===!1,alphaMap:Y1,alphaTest:n1,alphaHash:Zm,combine:zt.combine,mapUv:Mm&&ee(zt.map.channel),aoMapUv:D1&&ee(zt.aoMap.channel),lightMapUv:P1&&ee(zt.lightMap.channel),bumpMapUv:ig&&ee(zt.bumpMap.channel),normalMapUv:w1&&ee(zt.normalMap.channel),displacementMapUv:o1&&ee(zt.displacementMap.channel),emissiveMapUv:g1&&ee(zt.emissiveMap.channel),metalnessMapUv:X1&&ee(zt.metalnessMap.channel),roughnessMapUv:sg&&ee(zt.roughnessMap.channel),anisotropyMapUv:r0&&ee(zt.anisotropyMap.channel),clearcoatMapUv:B0&&ee(zt.clearcoatMap.channel),clearcoatNormalMapUv:bm&&ee(zt.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Sm&&ee(zt.clearcoatRoughnessMap.channel),iridescenceMapUv:Xm&&ee(zt.iridescenceMap.channel),iridescenceThicknessMapUv:cm&&ee(zt.iridescenceThicknessMap.channel),sheenColorMapUv:zm&&ee(zt.sheenColorMap.channel),sheenRoughnessMapUv:x1&&ee(zt.sheenRoughnessMap.channel),specularMapUv:Um&&ee(zt.specularMap.channel),specularColorMapUv:h1&&ee(zt.specularColorMap.channel),specularIntensityMapUv:Sg&&ee(zt.specularIntensityMap.channel),transmissionMapUv:um&&ee(zt.transmissionMap.channel),thicknessMapUv:M1&&ee(zt.thicknessMap.channel),alphaMapUv:Y1&&ee(zt.alphaMap.channel),vertexTangents:!!qo.attributes.tangent&&(w1||og),vertexColors:zt.vertexColors,vertexAlphas:zt.vertexColors===!0&&!!qo.attributes.color&&qo.attributes.color.itemSize===4,pointsUvs:zp.isPoints===!0&&!!qo.attributes.uv&&(Mm||Y1),fog:!!sa,useFog:zt.fog===!0,fogExp2:!!sa&&sa.isFogExp2,flatShading:zt.flatShading===!0&&zt.wireframe===!1,sizeAttenuation:zt.sizeAttenuation===!0,logarithmicDepthBuffer:M,reversedDepthBuffer:M0,skinning:zp.isSkinnedMesh===!0,morphTargets:qo.morphAttributes.position!==void 0,morphNormals:qo.morphAttributes.normal!==void 0,morphColors:qo.morphAttributes.color!==void 0,morphTargetsCount:Pp,morphTextureStride:d0,numDirLights:Zt.directional.length,numPointLights:Zt.point.length,numSpotLights:Zt.spot.length,numSpotLightMaps:Zt.spotLightMap.length,numRectAreaLights:Zt.rectArea.length,numHemiLights:Zt.hemi.length,numDirLightShadows:Zt.directionalShadowMap.length,numPointLightShadows:Zt.pointShadowMap.length,numSpotLightShadows:Zt.spotShadowMap.length,numSpotLightShadowsWithMaps:Zt.numSpotLightShadowsWithMaps,numLightProbes:Zt.numLightProbes,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:zt.dithering,shadowMapEnabled:r.shadowMap.enabled&&Mn.length>0,shadowMapType:r.shadowMap.type,toneMapping:p1,decodeVideoTexture:Mm&&zt.map.isVideoTexture===!0&&Xt.getTransfer(zt.map.colorSpace)===Jt,decodeVideoTextureEmissive:g1&&zt.emissiveMap.isVideoTexture===!0&&Xt.getTransfer(zt.emissiveMap.colorSpace)===Jt,premultipliedAlpha:zt.premultipliedAlpha,doubleSided:zt.side===Xe,flipSided:zt.side===Te,useDepthPacking:zt.depthPacking>=0,depthPacking:zt.depthPacking||0,index0AttributeName:zt.index0AttributeName,extensionClipCullDistance:S1&&zt.extensions.clipCullDistance===!0&&a.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(S1&&zt.extensions.multiDraw===!0||mm)&&a.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:a.has("KHR_parallel_shader_compile"),customProgramCacheKey:zt.customProgramCacheKey()};return hv.vertexUv1s=b.has(1),hv.vertexUv2s=b.has(2),hv.vertexUv3s=b.has(3),b.clear(),hv}function K(zt){const Zt=[];if(zt.shaderID?Zt.push(zt.shaderID):(Zt.push(zt.customVertexShaderID),Zt.push(zt.customFragmentShaderID)),zt.defines!==void 0)for(const Mn in zt.defines)Zt.push(Mn),Zt.push(zt.defines[Mn]);return zt.isRawShaderMaterial===!1&&(vt(Zt,zt),q(Zt,zt),Zt.push(r.outputColorSpace)),Zt.push(zt.customProgramCacheKey),Zt.join()}function vt(zt,Zt){zt.push(Zt.precision),zt.push(Zt.outputColorSpace),zt.push(Zt.envMapMode),zt.push(Zt.envMapCubeUVHeight),zt.push(Zt.mapUv),zt.push(Zt.alphaMapUv),zt.push(Zt.lightMapUv),zt.push(Zt.aoMapUv),zt.push(Zt.bumpMapUv),zt.push(Zt.normalMapUv),zt.push(Zt.displacementMapUv),zt.push(Zt.emissiveMapUv),zt.push(Zt.metalnessMapUv),zt.push(Zt.roughnessMapUv),zt.push(Zt.anisotropyMapUv),zt.push(Zt.clearcoatMapUv),zt.push(Zt.clearcoatNormalMapUv),zt.push(Zt.clearcoatRoughnessMapUv),zt.push(Zt.iridescenceMapUv),zt.push(Zt.iridescenceThicknessMapUv),zt.push(Zt.sheenColorMapUv),zt.push(Zt.sheenRoughnessMapUv),zt.push(Zt.specularMapUv),zt.push(Zt.specularColorMapUv),zt.push(Zt.specularIntensityMapUv),zt.push(Zt.transmissionMapUv),zt.push(Zt.thicknessMapUv),zt.push(Zt.combine),zt.push(Zt.fogExp2),zt.push(Zt.sizeAttenuation),zt.push(Zt.morphTargetsCount),zt.push(Zt.morphAttributeCount),zt.push(Zt.numDirLights),zt.push(Zt.numPointLights),zt.push(Zt.numSpotLights),zt.push(Zt.numSpotLightMaps),zt.push(Zt.numHemiLights),zt.push(Zt.numRectAreaLights),zt.push(Zt.numDirLightShadows),zt.push(Zt.numPointLightShadows),zt.push(Zt.numSpotLightShadows),zt.push(Zt.numSpotLightShadowsWithMaps),zt.push(Zt.numLightProbes),zt.push(Zt.shadowMapType),zt.push(Zt.toneMapping),zt.push(Zt.numClippingPlanes),zt.push(Zt.numClipIntersection),zt.push(Zt.depthPacking)}function q(zt,Zt){f.disableAll(),Zt.supportsVertexTextures&&f.enable(0),Zt.instancing&&f.enable(1),Zt.instancingColor&&f.enable(2),Zt.instancingMorph&&f.enable(3),Zt.matcap&&f.enable(4),Zt.envMap&&f.enable(5),Zt.normalMapObjectSpace&&f.enable(6),Zt.normalMapTangentSpace&&f.enable(7),Zt.clearcoat&&f.enable(8),Zt.iridescence&&f.enable(9),Zt.alphaTest&&f.enable(10),Zt.vertexColors&&f.enable(11),Zt.vertexAlphas&&f.enable(12),Zt.vertexUv1s&&f.enable(13),Zt.vertexUv2s&&f.enable(14),Zt.vertexUv3s&&f.enable(15),Zt.vertexTangents&&f.enable(16),Zt.anisotropy&&f.enable(17),Zt.alphaHash&&f.enable(18),Zt.batching&&f.enable(19),Zt.dispersion&&f.enable(20),Zt.batchingColor&&f.enable(21),Zt.gradientMap&&f.enable(22),zt.push(f.mask),f.disableAll(),Zt.fog&&f.enable(0),Zt.useFog&&f.enable(1),Zt.flatShading&&f.enable(2),Zt.logarithmicDepthBuffer&&f.enable(3),Zt.reversedDepthBuffer&&f.enable(4),Zt.skinning&&f.enable(5),Zt.morphTargets&&f.enable(6),Zt.morphNormals&&f.enable(7),Zt.morphColors&&f.enable(8),Zt.premultipliedAlpha&&f.enable(9),Zt.shadowMapEnabled&&f.enable(10),Zt.doubleSided&&f.enable(11),Zt.flipSided&&f.enable(12),Zt.useDepthPacking&&f.enable(13),Zt.dithering&&f.enable(14),Zt.transmission&&f.enable(15),Zt.sheen&&f.enable(16),Zt.opaque&&f.enable(17),Zt.pointsUvs&&f.enable(18),Zt.decodeVideoTexture&&f.enable(19),Zt.decodeVideoTextureEmissive&&f.enable(20),Zt.alphaToCoverage&&f.enable(21),zt.push(f.mask)}function Q(zt){const Zt=Z[zt.type];let Mn;if(Zt){const kp=We[Zt];Mn=lc.clone(kp.uniforms)}else Mn=zt.uniforms;return Mn}function wt(zt,Zt){let Mn;for(let kp=0,zp=E.length;kp<zp;kp++){const sa=E[kp];if(sa.cacheKey===Zt){Mn=sa,++Mn.usedTimes;break}}return Mn===void 0&&(Mn=new If(r,Zt,zt,l),E.push(Mn)),Mn}function bt(zt){if(--zt.usedTimes===0){const Zt=E.indexOf(zt);E[Zt]=E[E.length-1],E.pop(),zt.destroy()}}function Ut(zt){m.remove(zt)}function it(){m.dispose()}return{getParameters:le,getProgramCacheKey:K,getUniforms:Q,acquireProgram:wt,releaseProgram:bt,releaseShaderCache:Ut,programs:E,dispose:it}}function zf(){let r=new WeakMap;function e(s){return r.has(s)}function t(s){let f=r.get(s);return f===void 0&&(f={},r.set(s,f)),f}function a(s){r.delete(s)}function o(s,f,m){r.get(s)[f]=m}function l(){r=new WeakMap}return{has:e,get:t,remove:a,update:o,dispose:l}}function Hf(r,e){return r.groupOrder!==e.groupOrder?r.groupOrder-e.groupOrder:r.renderOrder!==e.renderOrder?r.renderOrder-e.renderOrder:r.material.id!==e.material.id?r.material.id-e.material.id:r.z!==e.z?r.z-e.z:r.id-e.id}function ho(r,e){return r.groupOrder!==e.groupOrder?r.groupOrder-e.groupOrder:r.renderOrder!==e.renderOrder?r.renderOrder-e.renderOrder:r.z!==e.z?e.z-r.z:r.id-e.id}function uo(){const r=[];let e=0;const t=[],a=[],o=[];function l(){e=0,t.length=0,a.length=0,o.length=0}function s(M,I,V,Z,ee,le){let K=r[e];return K===void 0?(K={id:M.id,object:M,geometry:I,material:V,groupOrder:Z,renderOrder:M.renderOrder,z:ee,group:le},r[e]=K):(K.id=M.id,K.object=M,K.geometry=I,K.material=V,K.groupOrder=Z,K.renderOrder=M.renderOrder,K.z=ee,K.group=le),e++,K}function f(M,I,V,Z,ee,le){const K=s(M,I,V,Z,ee,le);V.transmission>0?a.push(K):V.transparent===!0?o.push(K):t.push(K)}function m(M,I,V,Z,ee,le){const K=s(M,I,V,Z,ee,le);V.transmission>0?a.unshift(K):V.transparent===!0?o.unshift(K):t.unshift(K)}function b(M,I){t.length>1&&t.sort(M||Hf),a.length>1&&a.sort(I||ho),o.length>1&&o.sort(I||ho)}function E(){for(let M=e,I=r.length;M<I;M++){const V=r[M];if(V.id===null)break;V.id=null,V.object=null,V.geometry=null,V.material=null,V.group=null}}return{opaque:t,transmissive:a,transparent:o,init:l,push:f,unshift:m,finish:E,sort:b}}function Vf(){let r=new WeakMap;function e(a,o){const l=r.get(a);let s;return l===void 0?(s=new uo,r.set(a,[s])):o>=l.length?(s=new uo,l.push(s)):s=l[o],s}function t(){r=new WeakMap}return{get:e,dispose:t}}function Gf(){const r={};return{get:function(e){if(r[e.id]!==void 0)return r[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new U,color:new qt};break;case"SpotLight":t={position:new U,direction:new U,color:new qt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new U,color:new qt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new U,skyColor:new qt,groundColor:new qt};break;case"RectAreaLight":t={color:new qt,position:new U,halfWidth:new U,halfHeight:new U};break}return r[e.id]=t,t}}}function kf(){const r={};return{get:function(e){if(r[e.id]!==void 0)return r[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Bt};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Bt};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Bt,shadowCameraNear:1,shadowCameraFar:1e3};break}return r[e.id]=t,t}}}let Wf=0;function Xf(r,e){return(e.castShadow?2:0)-(r.castShadow?2:0)+(e.map?1:0)-(r.map?1:0)}function Yf(r){const e=new Gf,t=kf(),a={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let b=0;b<9;b++)a.probe.push(new U);const o=new U,l=new he,s=new he;function f(b){let E=0,M=0,I=0;for(let zt=0;zt<9;zt++)a.probe[zt].set(0,0,0);let V=0,Z=0,ee=0,le=0,K=0,vt=0,q=0,Q=0,wt=0,bt=0,Ut=0;b.sort(Xf);for(let zt=0,Zt=b.length;zt<Zt;zt++){const Mn=b[zt],kp=Mn.color,zp=Mn.intensity,sa=Mn.distance,qo=Mn.shadow&&Mn.shadow.map?Mn.shadow.map.texture:null;if(Mn.isAmbientLight)E+=kp.r*zp,M+=kp.g*zp,I+=kp.b*zp;else if(Mn.isLightProbe){for(let ae=0;ae<9;ae++)a.probe[ae].addScaledVector(Mn.sh.coefficients[ae],zp);Ut++}else if(Mn.isDirectionalLight){const ae=e.get(Mn);if(ae.color.copy(Mn.color).multiplyScalar(Mn.intensity),Mn.castShadow){const wp=Mn.shadow,Cp=t.get(Mn);Cp.shadowIntensity=wp.intensity,Cp.shadowBias=wp.bias,Cp.shadowNormalBias=wp.normalBias,Cp.shadowRadius=wp.radius,Cp.shadowMapSize=wp.mapSize,a.directionalShadow[V]=Cp,a.directionalShadowMap[V]=qo,a.directionalShadowMatrix[V]=Mn.shadow.matrix,vt++}a.directional[V]=ae,V++}else if(Mn.isSpotLight){const ae=e.get(Mn);ae.position.setFromMatrixPosition(Mn.matrixWorld),ae.color.copy(kp).multiplyScalar(zp),ae.distance=sa,ae.coneCos=Math.cos(Mn.angle),ae.penumbraCos=Math.cos(Mn.angle*(1-Mn.penumbra)),ae.decay=Mn.decay,a.spot[ee]=ae;const wp=Mn.shadow;if(Mn.map&&(a.spotLightMap[wt]=Mn.map,wt++,wp.updateMatrices(Mn),Mn.castShadow&&bt++),a.spotLightMatrix[ee]=wp.matrix,Mn.castShadow){const Cp=t.get(Mn);Cp.shadowIntensity=wp.intensity,Cp.shadowBias=wp.bias,Cp.shadowNormalBias=wp.normalBias,Cp.shadowRadius=wp.radius,Cp.shadowMapSize=wp.mapSize,a.spotShadow[ee]=Cp,a.spotShadowMap[ee]=qo,Q++}ee++}else if(Mn.isRectAreaLight){const ae=e.get(Mn);ae.color.copy(kp).multiplyScalar(zp),ae.halfWidth.set(Mn.width*.5,0,0),ae.halfHeight.set(0,Mn.height*.5,0),a.rectArea[le]=ae,le++}else if(Mn.isPointLight){const ae=e.get(Mn);if(ae.color.copy(Mn.color).multiplyScalar(Mn.intensity),ae.distance=Mn.distance,ae.decay=Mn.decay,Mn.castShadow){const wp=Mn.shadow,Cp=t.get(Mn);Cp.shadowIntensity=wp.intensity,Cp.shadowBias=wp.bias,Cp.shadowNormalBias=wp.normalBias,Cp.shadowRadius=wp.radius,Cp.shadowMapSize=wp.mapSize,Cp.shadowCameraNear=wp.camera.near,Cp.shadowCameraFar=wp.camera.far,a.pointShadow[Z]=Cp,a.pointShadowMap[Z]=qo,a.pointShadowMatrix[Z]=Mn.shadow.matrix,q++}a.point[Z]=ae,Z++}else if(Mn.isHemisphereLight){const ae=e.get(Mn);ae.skyColor.copy(Mn.color).multiplyScalar(zp),ae.groundColor.copy(Mn.groundColor).multiplyScalar(zp),a.hemi[K]=ae,K++}}le>0&&(r.has("OES_texture_float_linear")===!0?(a.rectAreaLTC1=at.LTC_FLOAT_1,a.rectAreaLTC2=at.LTC_FLOAT_2):(a.rectAreaLTC1=at.LTC_HALF_1,a.rectAreaLTC2=at.LTC_HALF_2)),a.ambient[0]=E,a.ambient[1]=M,a.ambient[2]=I;const it=a.hash;(it.directionalLength!==V||it.pointLength!==Z||it.spotLength!==ee||it.rectAreaLength!==le||it.hemiLength!==K||it.numDirectionalShadows!==vt||it.numPointShadows!==q||it.numSpotShadows!==Q||it.numSpotMaps!==wt||it.numLightProbes!==Ut)&&(a.directional.length=V,a.spot.length=ee,a.rectArea.length=le,a.point.length=Z,a.hemi.length=K,a.directionalShadow.length=vt,a.directionalShadowMap.length=vt,a.pointShadow.length=q,a.pointShadowMap.length=q,a.spotShadow.length=Q,a.spotShadowMap.length=Q,a.directionalShadowMatrix.length=vt,a.pointShadowMatrix.length=q,a.spotLightMatrix.length=Q+wt-bt,a.spotLightMap.length=wt,a.numSpotLightShadowsWithMaps=bt,a.numLightProbes=Ut,it.directionalLength=V,it.pointLength=Z,it.spotLength=ee,it.rectAreaLength=le,it.hemiLength=K,it.numDirectionalShadows=vt,it.numPointShadows=q,it.numSpotShadows=Q,it.numSpotMaps=wt,it.numLightProbes=Ut,a.version=Wf++)}function m(b,E){let M=0,I=0,V=0,Z=0,ee=0;const le=E.matrixWorldInverse;for(let K=0,vt=b.length;K<vt;K++){const q=b[K];if(q.isDirectionalLight){const Q=a.directional[M];Q.direction.setFromMatrixPosition(q.matrixWorld),o.setFromMatrixPosition(q.target.matrixWorld),Q.direction.sub(o),Q.direction.transformDirection(le),M++}else if(q.isSpotLight){const Q=a.spot[V];Q.position.setFromMatrixPosition(q.matrixWorld),Q.position.applyMatrix4(le),Q.direction.setFromMatrixPosition(q.matrixWorld),o.setFromMatrixPosition(q.target.matrixWorld),Q.direction.sub(o),Q.direction.transformDirection(le),V++}else if(q.isRectAreaLight){const Q=a.rectArea[Z];Q.position.setFromMatrixPosition(q.matrixWorld),Q.position.applyMatrix4(le),s.identity(),l.copy(q.matrixWorld),l.premultiply(le),s.extractRotation(l),Q.halfWidth.set(q.width*.5,0,0),Q.halfHeight.set(0,q.height*.5,0),Q.halfWidth.applyMatrix4(s),Q.halfHeight.applyMatrix4(s),Z++}else if(q.isPointLight){const Q=a.point[I];Q.position.setFromMatrixPosition(q.matrixWorld),Q.position.applyMatrix4(le),I++}else if(q.isHemisphereLight){const Q=a.hemi[ee];Q.direction.setFromMatrixPosition(q.matrixWorld),Q.direction.transformDirection(le),ee++}}}return{setup:f,setupView:m,state:a}}function fo(r){const e=new Yf(r),t=[],a=[];function o(E){b.camera=E,t.length=0,a.length=0}function l(E){t.push(E)}function s(E){a.push(E)}function f(){e.setup(t)}function m(E){e.setupView(t,E)}const b={lightsArray:t,shadowsArray:a,camera:null,lights:e,transmissionRenderTarget:{}};return{init:o,state:b,setupLights:f,setupLightsView:m,pushLight:l,pushShadow:s}}function qf(r){let e=new WeakMap;function t(o,l=0){const s=e.get(o);let f;return s===void 0?(f=new fo(r),e.set(o,[f])):l>=s.length?(f=new fo(r),s.push(f)):f=s[l],f}function a(){e=new WeakMap}return{get:t,dispose:a}}const Kf=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,Zf=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function jf(r,e,t){let a=new Oo;const o=new Bt,l=new Bt,s=new oe,f=new Mc({depthPacking:Pl}),m=new Sc,b={},E=t.maxTextureSize,M={[gn]:Te,[Te]:gn,[Xe]:Xe},I=new vn({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Bt},radius:{value:4}},vertexShader:Kf,fragmentShader:Zf}),V=I.clone();V.defines.HORIZONTAL_PASS=1;const Z=new Ae;Z.setAttribute("position",new Ke(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const ee=new De(Z,I),le=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=_o;let K=this.type;this.render=function(bt,Ut,it){if(le.enabled===!1||le.autoUpdate===!1&&le.needsUpdate===!1||bt.length===0)return;const zt=r.getRenderTarget(),Zt=r.getActiveCubeFace(),Mn=r.getActiveMipmapLevel(),kp=r.state;kp.setBlending(mn),kp.buffers.depth.getReversed()===!0?kp.buffers.color.setClear(0,0,0,0):kp.buffers.color.setClear(1,1,1,1),kp.buffers.depth.setTest(!0),kp.setScissorTest(!1);const zp=K!==en&&this.type===en,sa=K===en&&this.type!==en;for(let qo=0,ae=bt.length;qo<ae;qo++){const wp=bt[qo],Cp=wp.shadow;if(Cp===void 0){console.warn("THREE.WebGLShadowMap:",wp,"has no shadow.");continue}if(Cp.autoUpdate===!1&&Cp.needsUpdate===!1)continue;o.copy(Cp.mapSize);const Kt=Cp.getFrameExtents();if(o.multiply(Kt),l.copy(Cp.mapSize),(o.x>E||o.y>E)&&(o.x>E&&(l.x=Math.floor(E/Kt.x),o.x=l.x*Kt.x,Cp.mapSize.x=l.x),o.y>E&&(l.y=Math.floor(E/Kt.y),o.y=l.y*Kt.y,Cp.mapSize.y=l.y)),Cp.map===null||zp===!0||sa===!0){const Pp=this.type!==en?{minFilter:Ge,magFilter:Ge}:{};Cp.map!==null&&Cp.map.dispose(),Cp.map=new In(o.x,o.y,Pp),Cp.map.texture.name=wp.name+".shadowMap",Cp.camera.updateProjectionMatrix()}r.setRenderTarget(Cp.map),r.clear();const h0=Cp.getViewportCount();for(let Pp=0;Pp<h0;Pp++){const d0=Cp.getViewport(Pp);s.set(l.x*d0.x,l.y*d0.y,l.x*d0.z,l.y*d0.w),kp.viewport(s),Cp.updateMatrices(wp,Pp),a=Cp.getFrustum(),Q(Ut,it,Cp.camera,wp,this.type)}Cp.isPointLightShadow!==!0&&this.type===en&&vt(Cp,it),Cp.needsUpdate=!1}K=this.type,le.needsUpdate=!1,r.setRenderTarget(zt,Zt,Mn)};function vt(bt,Ut){const it=e.update(ee);I.defines.VSM_SAMPLES!==bt.blurSamples&&(I.defines.VSM_SAMPLES=bt.blurSamples,V.defines.VSM_SAMPLES=bt.blurSamples,I.needsUpdate=!0,V.needsUpdate=!0),bt.mapPass===null&&(bt.mapPass=new In(o.x,o.y)),I.uniforms.shadow_pass.value=bt.map.texture,I.uniforms.resolution.value=bt.mapSize,I.uniforms.radius.value=bt.radius,r.setRenderTarget(bt.mapPass),r.clear(),r.renderBufferDirect(Ut,null,it,I,ee,null),V.uniforms.shadow_pass.value=bt.mapPass.texture,V.uniforms.resolution.value=bt.mapSize,V.uniforms.radius.value=bt.radius,r.setRenderTarget(bt.map),r.clear(),r.renderBufferDirect(Ut,null,it,V,ee,null)}function q(bt,Ut,it,zt){let Zt=null;const Mn=it.isPointLight===!0?bt.customDistanceMaterial:bt.customDepthMaterial;if(Mn!==void 0)Zt=Mn;else if(Zt=it.isPointLight===!0?m:f,r.localClippingEnabled&&Ut.clipShadows===!0&&Array.isArray(Ut.clippingPlanes)&&Ut.clippingPlanes.length!==0||Ut.displacementMap&&Ut.displacementScale!==0||Ut.alphaMap&&Ut.alphaTest>0||Ut.map&&Ut.alphaTest>0||Ut.alphaToCoverage===!0){const kp=Zt.uuid,zp=Ut.uuid;let sa=b[kp];sa===void 0&&(sa={},b[kp]=sa);let qo=sa[zp];qo===void 0&&(qo=Zt.clone(),sa[zp]=qo,Ut.addEventListener("dispose",wt)),Zt=qo}if(Zt.visible=Ut.visible,Zt.wireframe=Ut.wireframe,zt===en?Zt.side=Ut.shadowSide!==null?Ut.shadowSide:Ut.side:Zt.side=Ut.shadowSide!==null?Ut.shadowSide:M[Ut.side],Zt.alphaMap=Ut.alphaMap,Zt.alphaTest=Ut.alphaToCoverage===!0?.5:Ut.alphaTest,Zt.map=Ut.map,Zt.clipShadows=Ut.clipShadows,Zt.clippingPlanes=Ut.clippingPlanes,Zt.clipIntersection=Ut.clipIntersection,Zt.displacementMap=Ut.displacementMap,Zt.displacementScale=Ut.displacementScale,Zt.displacementBias=Ut.displacementBias,Zt.wireframeLinewidth=Ut.wireframeLinewidth,Zt.linewidth=Ut.linewidth,it.isPointLight===!0&&Zt.isMeshDistanceMaterial===!0){const kp=r.properties.get(Zt);kp.light=it}return Zt}function Q(bt,Ut,it,zt,Zt){if(bt.visible===!1)return;if(bt.layers.test(Ut.layers)&&(bt.isMesh||bt.isLine||bt.isPoints)&&(bt.castShadow||bt.receiveShadow&&Zt===en)&&(!bt.frustumCulled||a.intersectsObject(bt))){bt.modelViewMatrix.multiplyMatrices(it.matrixWorldInverse,bt.matrixWorld);const kp=e.update(bt),zp=bt.material;if(Array.isArray(zp)){const sa=kp.groups;for(let qo=0,ae=sa.length;qo<ae;qo++){const wp=sa[qo],Cp=zp[wp.materialIndex];if(Cp&&Cp.visible){const Kt=q(bt,Cp,zt,Zt);bt.onBeforeShadow(r,bt,Ut,it,kp,Kt,wp),r.renderBufferDirect(it,null,kp,Kt,bt,wp),bt.onAfterShadow(r,bt,Ut,it,kp,Kt,wp)}}}else if(zp.visible){const sa=q(bt,zp,zt,Zt);bt.onBeforeShadow(r,bt,Ut,it,kp,sa,null),r.renderBufferDirect(it,null,kp,sa,bt,null),bt.onAfterShadow(r,bt,Ut,it,kp,sa,null)}}const Mn=bt.children;for(let kp=0,zp=Mn.length;kp<zp;kp++)Q(Mn[kp],Ut,it,zt,Zt)}function wt(bt){bt.target.removeEventListener("dispose",wt);for(const Ut in b){const it=b[Ut],zt=bt.target.uuid;zt in it&&(it[zt].dispose(),delete it[zt])}}}const $f={[ss]:as,[os]:hs,[ls]:us,[ii]:cs,[as]:ss,[hs]:os,[us]:ls,[cs]:ii};function Jf(r,e){function t(){let um=!1;const M1=new oe;let F1=null;const Y1=new oe(0,0,0,0);return{setMask:function(n1){F1!==n1&&!um&&(r.colorMask(n1,n1,n1,n1),F1=n1)},setLocked:function(n1){um=n1},setClear:function(n1,Zm,S1,p1,hv){hv===!0&&(n1*=p1,Zm*=p1,S1*=p1),M1.set(n1,Zm,S1,p1),Y1.equals(M1)===!1&&(r.clearColor(n1,Zm,S1,p1),Y1.copy(M1))},reset:function(){um=!1,F1=null,Y1.set(-1,0,0,0)}}}function a(){let um=!1,M1=!1,F1=null,Y1=null,n1=null;return{setReversed:function(Zm){if(M1!==Zm){const S1=e.get("EXT_clip_control");Zm?S1.clipControlEXT(S1.LOWER_LEFT_EXT,S1.ZERO_TO_ONE_EXT):S1.clipControlEXT(S1.LOWER_LEFT_EXT,S1.NEGATIVE_ONE_TO_ONE_EXT),M1=Zm;const p1=n1;n1=null,this.setClear(p1)}},getReversed:function(){return M1},setTest:function(Zm){Zm?y0(r.DEPTH_TEST):M0(r.DEPTH_TEST)},setMask:function(Zm){F1!==Zm&&!um&&(r.depthMask(Zm),F1=Zm)},setFunc:function(Zm){if(M1&&(Zm=$f[Zm]),Y1!==Zm){switch(Zm){case ss:r.depthFunc(r.NEVER);break;case as:r.depthFunc(r.ALWAYS);break;case os:r.depthFunc(r.LESS);break;case ii:r.depthFunc(r.LEQUAL);break;case ls:r.depthFunc(r.EQUAL);break;case cs:r.depthFunc(r.GEQUAL);break;case hs:r.depthFunc(r.GREATER);break;case us:r.depthFunc(r.NOTEQUAL);break;default:r.depthFunc(r.LEQUAL)}Y1=Zm}},setLocked:function(Zm){um=Zm},setClear:function(Zm){n1!==Zm&&(M1&&(Zm=1-Zm),r.clearDepth(Zm),n1=Zm)},reset:function(){um=!1,F1=null,Y1=null,n1=null,M1=!1}}}function o(){let um=!1,M1=null,F1=null,Y1=null,n1=null,Zm=null,S1=null,p1=null,hv=null;return{setTest:function(Gg){um||(Gg?y0(r.STENCIL_TEST):M0(r.STENCIL_TEST))},setMask:function(Gg){M1!==Gg&&!um&&(r.stencilMask(Gg),M1=Gg)},setFunc:function(Gg,Cv,ey){(F1!==Gg||Y1!==Cv||n1!==ey)&&(r.stencilFunc(Gg,Cv,ey),F1=Gg,Y1=Cv,n1=ey)},setOp:function(Gg,Cv,ey){(Zm!==Gg||S1!==Cv||p1!==ey)&&(r.stencilOp(Gg,Cv,ey),Zm=Gg,S1=Cv,p1=ey)},setLocked:function(Gg){um=Gg},setClear:function(Gg){hv!==Gg&&(r.clearStencil(Gg),hv=Gg)},reset:function(){um=!1,M1=null,F1=null,Y1=null,n1=null,Zm=null,S1=null,p1=null,hv=null}}}const l=new t,s=new a,f=new o,m=new WeakMap,b=new WeakMap;let E={},M={},I=new WeakMap,V=[],Z=null,ee=!1,le=null,K=null,vt=null,q=null,Q=null,wt=null,bt=null,Ut=new qt(0,0,0),it=0,zt=!1,Zt=null,Mn=null,kp=null,zp=null,sa=null;const qo=r.getParameter(r.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let ae=!1,wp=0;const Cp=r.getParameter(r.VERSION);Cp.indexOf("WebGL")!==-1?(wp=parseFloat(/^WebGL (\d)/.exec(Cp)[1]),ae=wp>=1):Cp.indexOf("OpenGL ES")!==-1&&(wp=parseFloat(/^OpenGL ES (\d)/.exec(Cp)[1]),ae=wp>=2);let Kt=null,h0={};const Pp=r.getParameter(r.SCISSOR_BOX),d0=r.getParameter(r.VIEWPORT),x0=new oe().fromArray(Pp),Dp=new oe().fromArray(d0);function c0(um,M1,F1,Y1){const n1=new Uint8Array(4),Zm=r.createTexture();r.bindTexture(um,Zm),r.texParameteri(um,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(um,r.TEXTURE_MAG_FILTER,r.NEAREST);for(let S1=0;S1<F1;S1++)um===r.TEXTURE_3D||um===r.TEXTURE_2D_ARRAY?r.texImage3D(M1,0,r.RGBA,1,1,Y1,0,r.RGBA,r.UNSIGNED_BYTE,n1):r.texImage2D(M1+S1,0,r.RGBA,1,1,0,r.RGBA,r.UNSIGNED_BYTE,n1);return Zm}const u0={};u0[r.TEXTURE_2D]=c0(r.TEXTURE_2D,r.TEXTURE_2D,1),u0[r.TEXTURE_CUBE_MAP]=c0(r.TEXTURE_CUBE_MAP,r.TEXTURE_CUBE_MAP_POSITIVE_X,6),u0[r.TEXTURE_2D_ARRAY]=c0(r.TEXTURE_2D_ARRAY,r.TEXTURE_2D_ARRAY,1,1),u0[r.TEXTURE_3D]=c0(r.TEXTURE_3D,r.TEXTURE_3D,1,1),l.setClear(0,0,0,1),s.setClear(1),f.setClear(0),y0(r.DEPTH_TEST),s.setFunc(ii),ig(!1),w1(ua),y0(r.CULL_FACE),D1(mn);function y0(um){E[um]!==!0&&(r.enable(um),E[um]=!0)}function M0(um){E[um]!==!1&&(r.disable(um),E[um]=!1)}function sm(um,M1){return M[um]!==M1?(r.bindFramebuffer(um,M1),M[um]=M1,um===r.DRAW_FRAMEBUFFER&&(M[r.FRAMEBUFFER]=M1),um===r.FRAMEBUFFER&&(M[r.DRAW_FRAMEBUFFER]=M1),!0):!1}function mm(um,M1){let F1=V,Y1=!1;if(um){F1=I.get(M1),F1===void 0&&(F1=[],I.set(M1,F1));const n1=um.textures;if(F1.length!==n1.length||F1[0]!==r.COLOR_ATTACHMENT0){for(let Zm=0,S1=n1.length;Zm<S1;Zm++)F1[Zm]=r.COLOR_ATTACHMENT0+Zm;F1.length=n1.length,Y1=!0}}else F1[0]!==r.BACK&&(F1[0]=r.BACK,Y1=!0);Y1&&r.drawBuffers(F1)}function Mm(um){return Z!==um?(r.useProgram(um),Z=um,!0):!1}const v1={[wn]:r.FUNC_ADD,[nl]:r.FUNC_SUBTRACT,[il]:r.FUNC_REVERSE_SUBTRACT};v1[rl]=r.MIN,v1[sl]=r.MAX;const v0={[al]:r.ZERO,[ol]:r.ONE,[ll]:r.SRC_COLOR,[is]:r.SRC_ALPHA,[pl]:r.SRC_ALPHA_SATURATE,[dl]:r.DST_COLOR,[hl]:r.DST_ALPHA,[cl]:r.ONE_MINUS_SRC_COLOR,[rs]:r.ONE_MINUS_SRC_ALPHA,[fl]:r.ONE_MINUS_DST_COLOR,[ul]:r.ONE_MINUS_DST_ALPHA,[ml]:r.CONSTANT_COLOR,[_l]:r.ONE_MINUS_CONSTANT_COLOR,[gl]:r.CONSTANT_ALPHA,[vl]:r.ONE_MINUS_CONSTANT_ALPHA};function D1(um,M1,F1,Y1,n1,Zm,S1,p1,hv,Gg){if(um===mn){ee===!0&&(M0(r.BLEND),ee=!1);return}if(ee===!1&&(y0(r.BLEND),ee=!0),um!==el){if(um!==le||Gg!==zt){if((K!==wn||Q!==wn)&&(r.blendEquation(r.FUNC_ADD),K=wn,Q=wn),Gg)switch(um){case ti:r.blendFuncSeparate(r.ONE,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA);break;case da:r.blendFunc(r.ONE,r.ONE);break;case fa:r.blendFuncSeparate(r.ZERO,r.ONE_MINUS_SRC_COLOR,r.ZERO,r.ONE);break;case pa:r.blendFuncSeparate(r.DST_COLOR,r.ONE_MINUS_SRC_ALPHA,r.ZERO,r.ONE);break;default:console.error("THREE.WebGLState: Invalid blending: ",um);break}else switch(um){case ti:r.blendFuncSeparate(r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA);break;case da:r.blendFuncSeparate(r.SRC_ALPHA,r.ONE,r.ONE,r.ONE);break;case fa:console.error("THREE.WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case pa:console.error("THREE.WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:console.error("THREE.WebGLState: Invalid blending: ",um);break}vt=null,q=null,wt=null,bt=null,Ut.set(0,0,0),it=0,le=um,zt=Gg}return}n1=n1||M1,Zm=Zm||F1,S1=S1||Y1,(M1!==K||n1!==Q)&&(r.blendEquationSeparate(v1[M1],v1[n1]),K=M1,Q=n1),(F1!==vt||Y1!==q||Zm!==wt||S1!==bt)&&(r.blendFuncSeparate(v0[F1],v0[Y1],v0[Zm],v0[S1]),vt=F1,q=Y1,wt=Zm,bt=S1),(p1.equals(Ut)===!1||hv!==it)&&(r.blendColor(p1.r,p1.g,p1.b,hv),Ut.copy(p1),it=hv),le=um,zt=!1}function P1(um,M1){um.side===Xe?M0(r.CULL_FACE):y0(r.CULL_FACE);let F1=um.side===Te;M1&&(F1=!F1),ig(F1),um.blending===ti&&um.transparent===!1?D1(mn):D1(um.blending,um.blendEquation,um.blendSrc,um.blendDst,um.blendEquationAlpha,um.blendSrcAlpha,um.blendDstAlpha,um.blendColor,um.blendAlpha,um.premultipliedAlpha),s.setFunc(um.depthFunc),s.setTest(um.depthTest),s.setMask(um.depthWrite),l.setMask(um.colorWrite);const Y1=um.stencilWrite;f.setTest(Y1),Y1&&(f.setMask(um.stencilWriteMask),f.setFunc(um.stencilFunc,um.stencilRef,um.stencilFuncMask),f.setOp(um.stencilFail,um.stencilZFail,um.stencilZPass)),g1(um.polygonOffset,um.polygonOffsetFactor,um.polygonOffsetUnits),um.alphaToCoverage===!0?y0(r.SAMPLE_ALPHA_TO_COVERAGE):M0(r.SAMPLE_ALPHA_TO_COVERAGE)}function ig(um){Zt!==um&&(um?r.frontFace(r.CW):r.frontFace(r.CCW),Zt=um)}function w1(um){um!==Jo?(y0(r.CULL_FACE),um!==Mn&&(um===ua?r.cullFace(r.BACK):um===Qo?r.cullFace(r.FRONT):r.cullFace(r.FRONT_AND_BACK))):M0(r.CULL_FACE),Mn=um}function o1(um){um!==kp&&(ae&&r.lineWidth(um),kp=um)}function g1(um,M1,F1){um?(y0(r.POLYGON_OFFSET_FILL),(zp!==M1||sa!==F1)&&(r.polygonOffset(M1,F1),zp=M1,sa=F1)):M0(r.POLYGON_OFFSET_FILL)}function X1(um){um?y0(r.SCISSOR_TEST):M0(r.SCISSOR_TEST)}function sg(um){um===void 0&&(um=r.TEXTURE0+qo-1),Kt!==um&&(r.activeTexture(um),Kt=um)}function og(um,M1,F1){F1===void 0&&(Kt===null?F1=r.TEXTURE0+qo-1:F1=Kt);let Y1=h0[F1];Y1===void 0&&(Y1={type:void 0,texture:void 0},h0[F1]=Y1),(Y1.type!==um||Y1.texture!==M1)&&(Kt!==F1&&(r.activeTexture(F1),Kt=F1),r.bindTexture(um,M1||u0[um]),Y1.type=um,Y1.texture=M1)}function R0(){const um=h0[Kt];um!==void 0&&um.type!==void 0&&(r.bindTexture(um.type,null),um.type=void 0,um.texture=void 0)}function Xp(){try{r.compressedTexImage2D(...arguments)}catch(um){console.error("THREE.WebGLState:",um)}}function wm(){try{r.compressedTexImage3D(...arguments)}catch(um){console.error("THREE.WebGLState:",um)}}function $m(){try{r.texSubImage2D(...arguments)}catch(um){console.error("THREE.WebGLState:",um)}}function Vp(){try{r.texSubImage3D(...arguments)}catch(um){console.error("THREE.WebGLState:",um)}}function r0(){try{r.compressedTexSubImage2D(...arguments)}catch(um){console.error("THREE.WebGLState:",um)}}function B0(){try{r.compressedTexSubImage3D(...arguments)}catch(um){console.error("THREE.WebGLState:",um)}}function bm(){try{r.texStorage2D(...arguments)}catch(um){console.error("THREE.WebGLState:",um)}}function Sm(){try{r.texStorage3D(...arguments)}catch(um){console.error("THREE.WebGLState:",um)}}function Xm(){try{r.texImage2D(...arguments)}catch(um){console.error("THREE.WebGLState:",um)}}function cm(){try{r.texImage3D(...arguments)}catch(um){console.error("THREE.WebGLState:",um)}}function zm(um){x0.equals(um)===!1&&(r.scissor(um.x,um.y,um.z,um.w),x0.copy(um))}function x1(um){Dp.equals(um)===!1&&(r.viewport(um.x,um.y,um.z,um.w),Dp.copy(um))}function Um(um,M1){let F1=b.get(M1);F1===void 0&&(F1=new WeakMap,b.set(M1,F1));let Y1=F1.get(um);Y1===void 0&&(Y1=r.getUniformBlockIndex(M1,um.name),F1.set(um,Y1))}function h1(um,M1){const F1=b.get(M1).get(um);m.get(M1)!==F1&&(r.uniformBlockBinding(M1,F1,um.__bindingPointIndex),m.set(M1,F1))}function Sg(){r.disable(r.BLEND),r.disable(r.CULL_FACE),r.disable(r.DEPTH_TEST),r.disable(r.POLYGON_OFFSET_FILL),r.disable(r.SCISSOR_TEST),r.disable(r.STENCIL_TEST),r.disable(r.SAMPLE_ALPHA_TO_COVERAGE),r.blendEquation(r.FUNC_ADD),r.blendFunc(r.ONE,r.ZERO),r.blendFuncSeparate(r.ONE,r.ZERO,r.ONE,r.ZERO),r.blendColor(0,0,0,0),r.colorMask(!0,!0,!0,!0),r.clearColor(0,0,0,0),r.depthMask(!0),r.depthFunc(r.LESS),s.setReversed(!1),r.clearDepth(1),r.stencilMask(4294967295),r.stencilFunc(r.ALWAYS,0,4294967295),r.stencilOp(r.KEEP,r.KEEP,r.KEEP),r.clearStencil(0),r.cullFace(r.BACK),r.frontFace(r.CCW),r.polygonOffset(0,0),r.activeTexture(r.TEXTURE0),r.bindFramebuffer(r.FRAMEBUFFER,null),r.bindFramebuffer(r.DRAW_FRAMEBUFFER,null),r.bindFramebuffer(r.READ_FRAMEBUFFER,null),r.useProgram(null),r.lineWidth(1),r.scissor(0,0,r.canvas.width,r.canvas.height),r.viewport(0,0,r.canvas.width,r.canvas.height),E={},Kt=null,h0={},M={},I=new WeakMap,V=[],Z=null,ee=!1,le=null,K=null,vt=null,q=null,Q=null,wt=null,bt=null,Ut=new qt(0,0,0),it=0,zt=!1,Zt=null,Mn=null,kp=null,zp=null,sa=null,x0.set(0,0,r.canvas.width,r.canvas.height),Dp.set(0,0,r.canvas.width,r.canvas.height),l.reset(),s.reset(),f.reset()}return{buffers:{color:l,depth:s,stencil:f},enable:y0,disable:M0,bindFramebuffer:sm,drawBuffers:mm,useProgram:Mm,setBlending:D1,setMaterial:P1,setFlipSided:ig,setCullFace:w1,setLineWidth:o1,setPolygonOffset:g1,setScissorTest:X1,activeTexture:sg,bindTexture:og,unbindTexture:R0,compressedTexImage2D:Xp,compressedTexImage3D:wm,texImage2D:Xm,texImage3D:cm,updateUBOMapping:Um,uniformBlockBinding:h1,texStorage2D:bm,texStorage3D:Sm,texSubImage2D:$m,texSubImage3D:Vp,compressedTexSubImage2D:r0,compressedTexSubImage3D:B0,scissor:zm,viewport:x1,reset:Sg}}function Qf(r,e,t,a,o,l,s){const f=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,m=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),b=new Bt,E=new WeakMap;let M;const I=new WeakMap;let V=!1;try{V=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function Z(R0,Xp){return V?new OffscreenCanvas(R0,Xp):dr("canvas")}function ee(R0,Xp,wm){let $m=1;const Vp=og(R0);if((Vp.width>wm||Vp.height>wm)&&($m=wm/Math.max(Vp.width,Vp.height)),$m<1)if(typeof HTMLImageElement<"u"&&R0 instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&R0 instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&R0 instanceof ImageBitmap||typeof VideoFrame<"u"&&R0 instanceof VideoFrame){const r0=Math.floor($m*Vp.width),B0=Math.floor($m*Vp.height);M===void 0&&(M=Z(r0,B0));const bm=Xp?Z(r0,B0):M;return bm.width=r0,bm.height=B0,bm.getContext("2d").drawImage(R0,0,0,r0,B0),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Vp.width+"x"+Vp.height+") to ("+r0+"x"+B0+")."),bm}else return"data"in R0&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Vp.width+"x"+Vp.height+")."),R0;return R0}function le(R0){return R0.generateMipmaps}function K(R0){r.generateMipmap(R0)}function vt(R0){return R0.isWebGLCubeRenderTarget?r.TEXTURE_CUBE_MAP:R0.isWebGL3DRenderTarget?r.TEXTURE_3D:R0.isWebGLArrayRenderTarget||R0.isCompressedArrayTexture?r.TEXTURE_2D_ARRAY:r.TEXTURE_2D}function q(R0,Xp,wm,$m,Vp=!1){if(R0!==null){if(r[R0]!==void 0)return r[R0];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+R0+"'")}let r0=Xp;if(Xp===r.RED&&(wm===r.FLOAT&&(r0=r.R32F),wm===r.HALF_FLOAT&&(r0=r.R16F),wm===r.UNSIGNED_BYTE&&(r0=r.R8)),Xp===r.RED_INTEGER&&(wm===r.UNSIGNED_BYTE&&(r0=r.R8UI),wm===r.UNSIGNED_SHORT&&(r0=r.R16UI),wm===r.UNSIGNED_INT&&(r0=r.R32UI),wm===r.BYTE&&(r0=r.R8I),wm===r.SHORT&&(r0=r.R16I),wm===r.INT&&(r0=r.R32I)),Xp===r.RG&&(wm===r.FLOAT&&(r0=r.RG32F),wm===r.HALF_FLOAT&&(r0=r.RG16F),wm===r.UNSIGNED_BYTE&&(r0=r.RG8)),Xp===r.RG_INTEGER&&(wm===r.UNSIGNED_BYTE&&(r0=r.RG8UI),wm===r.UNSIGNED_SHORT&&(r0=r.RG16UI),wm===r.UNSIGNED_INT&&(r0=r.RG32UI),wm===r.BYTE&&(r0=r.RG8I),wm===r.SHORT&&(r0=r.RG16I),wm===r.INT&&(r0=r.RG32I)),Xp===r.RGB_INTEGER&&(wm===r.UNSIGNED_BYTE&&(r0=r.RGB8UI),wm===r.UNSIGNED_SHORT&&(r0=r.RGB16UI),wm===r.UNSIGNED_INT&&(r0=r.RGB32UI),wm===r.BYTE&&(r0=r.RGB8I),wm===r.SHORT&&(r0=r.RGB16I),wm===r.INT&&(r0=r.RGB32I)),Xp===r.RGBA_INTEGER&&(wm===r.UNSIGNED_BYTE&&(r0=r.RGBA8UI),wm===r.UNSIGNED_SHORT&&(r0=r.RGBA16UI),wm===r.UNSIGNED_INT&&(r0=r.RGBA32UI),wm===r.BYTE&&(r0=r.RGBA8I),wm===r.SHORT&&(r0=r.RGBA16I),wm===r.INT&&(r0=r.RGBA32I)),Xp===r.RGB&&(wm===r.UNSIGNED_INT_5_9_9_9_REV&&(r0=r.RGB9_E5),wm===r.UNSIGNED_INT_10F_11F_11F_REV&&(r0=r.R11F_G11F_B10F)),Xp===r.RGBA){const B0=Vp?hr:Xt.getTransfer($m);wm===r.FLOAT&&(r0=r.RGBA32F),wm===r.HALF_FLOAT&&(r0=r.RGBA16F),wm===r.UNSIGNED_BYTE&&(r0=B0===Jt?r.SRGB8_ALPHA8:r.RGBA8),wm===r.UNSIGNED_SHORT_4_4_4_4&&(r0=r.RGBA4),wm===r.UNSIGNED_SHORT_5_5_5_1&&(r0=r.RGB5_A1)}return(r0===r.R16F||r0===r.R32F||r0===r.RG16F||r0===r.RG32F||r0===r.RGBA16F||r0===r.RGBA32F)&&e.get("EXT_color_buffer_float"),r0}function Q(R0,Xp){let wm;return R0?Xp===null||Xp===Ln||Xp===xi?wm=r.DEPTH24_STENCIL8:Xp===nn?wm=r.DEPTH32F_STENCIL8:Xp===vi&&(wm=r.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):Xp===null||Xp===Ln||Xp===xi?wm=r.DEPTH_COMPONENT24:Xp===nn?wm=r.DEPTH_COMPONENT32F:Xp===vi&&(wm=r.DEPTH_COMPONENT16),wm}function wt(R0,Xp){return le(R0)===!0||R0.isFramebufferTexture&&R0.minFilter!==Ge&&R0.minFilter!==Ye?Math.log2(Math.max(Xp.width,Xp.height))+1:R0.mipmaps!==void 0&&R0.mipmaps.length>0?R0.mipmaps.length:R0.isCompressedTexture&&Array.isArray(R0.image)?Xp.mipmaps.length:1}function bt(R0){const Xp=R0.target;Xp.removeEventListener("dispose",bt),it(Xp),Xp.isVideoTexture&&E.delete(Xp)}function Ut(R0){const Xp=R0.target;Xp.removeEventListener("dispose",Ut),Zt(Xp)}function it(R0){const Xp=a.get(R0);if(Xp.__webglInit===void 0)return;const wm=R0.source,$m=I.get(wm);if($m){const Vp=$m[Xp.__cacheKey];Vp.usedTimes--,Vp.usedTimes===0&&zt(R0),Object.keys($m).length===0&&I.delete(wm)}a.remove(R0)}function zt(R0){const Xp=a.get(R0);r.deleteTexture(Xp.__webglTexture);const wm=R0.source,$m=I.get(wm);delete $m[Xp.__cacheKey],s.memory.textures--}function Zt(R0){const Xp=a.get(R0);if(R0.depthTexture&&(R0.depthTexture.dispose(),a.remove(R0.depthTexture)),R0.isWebGLCubeRenderTarget)for(let $m=0;$m<6;$m++){if(Array.isArray(Xp.__webglFramebuffer[$m]))for(let Vp=0;Vp<Xp.__webglFramebuffer[$m].length;Vp++)r.deleteFramebuffer(Xp.__webglFramebuffer[$m][Vp]);else r.deleteFramebuffer(Xp.__webglFramebuffer[$m]);Xp.__webglDepthbuffer&&r.deleteRenderbuffer(Xp.__webglDepthbuffer[$m])}else{if(Array.isArray(Xp.__webglFramebuffer))for(let $m=0;$m<Xp.__webglFramebuffer.length;$m++)r.deleteFramebuffer(Xp.__webglFramebuffer[$m]);else r.deleteFramebuffer(Xp.__webglFramebuffer);if(Xp.__webglDepthbuffer&&r.deleteRenderbuffer(Xp.__webglDepthbuffer),Xp.__webglMultisampledFramebuffer&&r.deleteFramebuffer(Xp.__webglMultisampledFramebuffer),Xp.__webglColorRenderbuffer)for(let $m=0;$m<Xp.__webglColorRenderbuffer.length;$m++)Xp.__webglColorRenderbuffer[$m]&&r.deleteRenderbuffer(Xp.__webglColorRenderbuffer[$m]);Xp.__webglDepthRenderbuffer&&r.deleteRenderbuffer(Xp.__webglDepthRenderbuffer)}const wm=R0.textures;for(let $m=0,Vp=wm.length;$m<Vp;$m++){const r0=a.get(wm[$m]);r0.__webglTexture&&(r.deleteTexture(r0.__webglTexture),s.memory.textures--),a.remove(wm[$m])}a.remove(R0)}let Mn=0;function kp(){Mn=0}function zp(){const R0=Mn;return R0>=o.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+R0+" texture units while this GPU supports only "+o.maxTextures),Mn+=1,R0}function sa(R0){const Xp=[];return Xp.push(R0.wrapS),Xp.push(R0.wrapT),Xp.push(R0.wrapR||0),Xp.push(R0.magFilter),Xp.push(R0.minFilter),Xp.push(R0.anisotropy),Xp.push(R0.internalFormat),Xp.push(R0.format),Xp.push(R0.type),Xp.push(R0.generateMipmaps),Xp.push(R0.premultiplyAlpha),Xp.push(R0.flipY),Xp.push(R0.unpackAlignment),Xp.push(R0.colorSpace),Xp.join()}function qo(R0,Xp){const wm=a.get(R0);if(R0.isVideoTexture&&X1(R0),R0.isRenderTargetTexture===!1&&R0.isExternalTexture!==!0&&R0.version>0&&wm.__version!==R0.version){const $m=R0.image;if($m===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if($m.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{u0(wm,R0,Xp);return}}else R0.isExternalTexture&&(wm.__webglTexture=R0.sourceTexture?R0.sourceTexture:null);t.bindTexture(r.TEXTURE_2D,wm.__webglTexture,r.TEXTURE0+Xp)}function ae(R0,Xp){const wm=a.get(R0);if(R0.isRenderTargetTexture===!1&&R0.version>0&&wm.__version!==R0.version){u0(wm,R0,Xp);return}t.bindTexture(r.TEXTURE_2D_ARRAY,wm.__webglTexture,r.TEXTURE0+Xp)}function wp(R0,Xp){const wm=a.get(R0);if(R0.isRenderTargetTexture===!1&&R0.version>0&&wm.__version!==R0.version){u0(wm,R0,Xp);return}t.bindTexture(r.TEXTURE_3D,wm.__webglTexture,r.TEXTURE0+Xp)}function Cp(R0,Xp){const wm=a.get(R0);if(R0.version>0&&wm.__version!==R0.version){y0(wm,R0,Xp);return}t.bindTexture(r.TEXTURE_CUBE_MAP,wm.__webglTexture,r.TEXTURE0+Xp)}const Kt={[ps]:r.REPEAT,[Pn]:r.CLAMP_TO_EDGE,[ms]:r.MIRRORED_REPEAT},h0={[Ge]:r.NEAREST,[wl]:r.NEAREST_MIPMAP_NEAREST,[Pi]:r.NEAREST_MIPMAP_LINEAR,[Ye]:r.LINEAR,[yr]:r.LINEAR_MIPMAP_NEAREST,[Dn]:r.LINEAR_MIPMAP_LINEAR},Pp={[Ul]:r.NEVER,[zl]:r.ALWAYS,[Il]:r.LESS,[Ro]:r.LEQUAL,[Nl]:r.EQUAL,[Bl]:r.GEQUAL,[Fl]:r.GREATER,[Ol]:r.NOTEQUAL};function d0(R0,Xp){if(Xp.type===nn&&e.has("OES_texture_float_linear")===!1&&(Xp.magFilter===Ye||Xp.magFilter===yr||Xp.magFilter===Pi||Xp.magFilter===Dn||Xp.minFilter===Ye||Xp.minFilter===yr||Xp.minFilter===Pi||Xp.minFilter===Dn)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),r.texParameteri(R0,r.TEXTURE_WRAP_S,Kt[Xp.wrapS]),r.texParameteri(R0,r.TEXTURE_WRAP_T,Kt[Xp.wrapT]),(R0===r.TEXTURE_3D||R0===r.TEXTURE_2D_ARRAY)&&r.texParameteri(R0,r.TEXTURE_WRAP_R,Kt[Xp.wrapR]),r.texParameteri(R0,r.TEXTURE_MAG_FILTER,h0[Xp.magFilter]),r.texParameteri(R0,r.TEXTURE_MIN_FILTER,h0[Xp.minFilter]),Xp.compareFunction&&(r.texParameteri(R0,r.TEXTURE_COMPARE_MODE,r.COMPARE_REF_TO_TEXTURE),r.texParameteri(R0,r.TEXTURE_COMPARE_FUNC,Pp[Xp.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(Xp.magFilter===Ge||Xp.minFilter!==Pi&&Xp.minFilter!==Dn||Xp.type===nn&&e.has("OES_texture_float_linear")===!1)return;if(Xp.anisotropy>1||a.get(Xp).__currentAnisotropy){const wm=e.get("EXT_texture_filter_anisotropic");r.texParameterf(R0,wm.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Xp.anisotropy,o.getMaxAnisotropy())),a.get(Xp).__currentAnisotropy=Xp.anisotropy}}}function x0(R0,Xp){let wm=!1;R0.__webglInit===void 0&&(R0.__webglInit=!0,Xp.addEventListener("dispose",bt));const $m=Xp.source;let Vp=I.get($m);Vp===void 0&&(Vp={},I.set($m,Vp));const r0=sa(Xp);if(r0!==R0.__cacheKey){Vp[r0]===void 0&&(Vp[r0]={texture:r.createTexture(),usedTimes:0},s.memory.textures++,wm=!0),Vp[r0].usedTimes++;const B0=Vp[R0.__cacheKey];B0!==void 0&&(Vp[R0.__cacheKey].usedTimes--,B0.usedTimes===0&&zt(Xp)),R0.__cacheKey=r0,R0.__webglTexture=Vp[r0].texture}return wm}function Dp(R0,Xp,wm){return Math.floor(Math.floor(R0/wm)/Xp)}function c0(R0,Xp,wm,$m){const Vp=R0.updateRanges;if(Vp.length===0)t.texSubImage2D(r.TEXTURE_2D,0,0,0,Xp.width,Xp.height,wm,$m,Xp.data);else{Vp.sort((Xm,cm)=>Xm.start-cm.start);let r0=0;for(let Xm=1;Xm<Vp.length;Xm++){const cm=Vp[r0],zm=Vp[Xm],x1=cm.start+cm.count,Um=Dp(zm.start,Xp.width,4),h1=Dp(cm.start,Xp.width,4);zm.start<=x1+1&&Um===h1&&Dp(zm.start+zm.count-1,Xp.width,4)===Um?cm.count=Math.max(cm.count,zm.start+zm.count-cm.start):(++r0,Vp[r0]=zm)}Vp.length=r0+1;const B0=r.getParameter(r.UNPACK_ROW_LENGTH),bm=r.getParameter(r.UNPACK_SKIP_PIXELS),Sm=r.getParameter(r.UNPACK_SKIP_ROWS);r.pixelStorei(r.UNPACK_ROW_LENGTH,Xp.width);for(let Xm=0,cm=Vp.length;Xm<cm;Xm++){const zm=Vp[Xm],x1=Math.floor(zm.start/4),Um=Math.ceil(zm.count/4),h1=x1%Xp.width,Sg=Math.floor(x1/Xp.width),um=Um;r.pixelStorei(r.UNPACK_SKIP_PIXELS,h1),r.pixelStorei(r.UNPACK_SKIP_ROWS,Sg),t.texSubImage2D(r.TEXTURE_2D,0,h1,Sg,um,1,wm,$m,Xp.data)}R0.clearUpdateRanges(),r.pixelStorei(r.UNPACK_ROW_LENGTH,B0),r.pixelStorei(r.UNPACK_SKIP_PIXELS,bm),r.pixelStorei(r.UNPACK_SKIP_ROWS,Sm)}}function u0(R0,Xp,wm){let $m=r.TEXTURE_2D;(Xp.isDataArrayTexture||Xp.isCompressedArrayTexture)&&($m=r.TEXTURE_2D_ARRAY),Xp.isData3DTexture&&($m=r.TEXTURE_3D);const Vp=x0(R0,Xp),r0=Xp.source;t.bindTexture($m,R0.__webglTexture,r.TEXTURE0+wm);const B0=a.get(r0);if(r0.version!==B0.__version||Vp===!0){t.activeTexture(r.TEXTURE0+wm);const bm=Xt.getPrimaries(Xt.workingColorSpace),Sm=Xp.colorSpace===pn?null:Xt.getPrimaries(Xp.colorSpace),Xm=Xp.colorSpace===pn||bm===Sm?r.NONE:r.BROWSER_DEFAULT_WEBGL;r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,Xp.flipY),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Xp.premultiplyAlpha),r.pixelStorei(r.UNPACK_ALIGNMENT,Xp.unpackAlignment),r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,Xm);let cm=ee(Xp.image,!1,o.maxTextureSize);cm=sg(Xp,cm);const zm=l.convert(Xp.format,Xp.colorSpace),x1=l.convert(Xp.type);let Um=q(Xp.internalFormat,zm,x1,Xp.colorSpace,Xp.isVideoTexture);d0($m,Xp);let h1;const Sg=Xp.mipmaps,um=Xp.isVideoTexture!==!0,M1=B0.__version===void 0||Vp===!0,F1=r0.dataReady,Y1=wt(Xp,cm);if(Xp.isDepthTexture)Um=Q(Xp.format===Si,Xp.type),M1&&(um?t.texStorage2D(r.TEXTURE_2D,1,Um,cm.width,cm.height):t.texImage2D(r.TEXTURE_2D,0,Um,cm.width,cm.height,0,zm,x1,null));else if(Xp.isDataTexture)if(Sg.length>0){um&&M1&&t.texStorage2D(r.TEXTURE_2D,Y1,Um,Sg[0].width,Sg[0].height);for(let n1=0,Zm=Sg.length;n1<Zm;n1++)h1=Sg[n1],um?F1&&t.texSubImage2D(r.TEXTURE_2D,n1,0,0,h1.width,h1.height,zm,x1,h1.data):t.texImage2D(r.TEXTURE_2D,n1,Um,h1.width,h1.height,0,zm,x1,h1.data);Xp.generateMipmaps=!1}else um?(M1&&t.texStorage2D(r.TEXTURE_2D,Y1,Um,cm.width,cm.height),F1&&c0(Xp,cm,zm,x1)):t.texImage2D(r.TEXTURE_2D,0,Um,cm.width,cm.height,0,zm,x1,cm.data);else if(Xp.isCompressedTexture)if(Xp.isCompressedArrayTexture){um&&M1&&t.texStorage3D(r.TEXTURE_2D_ARRAY,Y1,Um,Sg[0].width,Sg[0].height,cm.depth);for(let n1=0,Zm=Sg.length;n1<Zm;n1++)if(h1=Sg[n1],Xp.format!==Ve)if(zm!==null)if(um){if(F1)if(Xp.layerUpdates.size>0){const S1=Ga(h1.width,h1.height,Xp.format,Xp.type);for(const p1 of Xp.layerUpdates){const hv=h1.data.subarray(p1*S1/h1.data.BYTES_PER_ELEMENT,(p1+1)*S1/h1.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(r.TEXTURE_2D_ARRAY,n1,0,0,p1,h1.width,h1.height,1,zm,hv)}Xp.clearLayerUpdates()}else t.compressedTexSubImage3D(r.TEXTURE_2D_ARRAY,n1,0,0,0,h1.width,h1.height,cm.depth,zm,h1.data)}else t.compressedTexImage3D(r.TEXTURE_2D_ARRAY,n1,Um,h1.width,h1.height,cm.depth,0,h1.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else um?F1&&t.texSubImage3D(r.TEXTURE_2D_ARRAY,n1,0,0,0,h1.width,h1.height,cm.depth,zm,x1,h1.data):t.texImage3D(r.TEXTURE_2D_ARRAY,n1,Um,h1.width,h1.height,cm.depth,0,zm,x1,h1.data)}else{um&&M1&&t.texStorage2D(r.TEXTURE_2D,Y1,Um,Sg[0].width,Sg[0].height);for(let n1=0,Zm=Sg.length;n1<Zm;n1++)h1=Sg[n1],Xp.format!==Ve?zm!==null?um?F1&&t.compressedTexSubImage2D(r.TEXTURE_2D,n1,0,0,h1.width,h1.height,zm,h1.data):t.compressedTexImage2D(r.TEXTURE_2D,n1,Um,h1.width,h1.height,0,h1.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):um?F1&&t.texSubImage2D(r.TEXTURE_2D,n1,0,0,h1.width,h1.height,zm,x1,h1.data):t.texImage2D(r.TEXTURE_2D,n1,Um,h1.width,h1.height,0,zm,x1,h1.data)}else if(Xp.isDataArrayTexture)if(um){if(M1&&t.texStorage3D(r.TEXTURE_2D_ARRAY,Y1,Um,cm.width,cm.height,cm.depth),F1)if(Xp.layerUpdates.size>0){const n1=Ga(cm.width,cm.height,Xp.format,Xp.type);for(const Zm of Xp.layerUpdates){const S1=cm.data.subarray(Zm*n1/cm.data.BYTES_PER_ELEMENT,(Zm+1)*n1/cm.data.BYTES_PER_ELEMENT);t.texSubImage3D(r.TEXTURE_2D_ARRAY,0,0,0,Zm,cm.width,cm.height,1,zm,x1,S1)}Xp.clearLayerUpdates()}else t.texSubImage3D(r.TEXTURE_2D_ARRAY,0,0,0,0,cm.width,cm.height,cm.depth,zm,x1,cm.data)}else t.texImage3D(r.TEXTURE_2D_ARRAY,0,Um,cm.width,cm.height,cm.depth,0,zm,x1,cm.data);else if(Xp.isData3DTexture)um?(M1&&t.texStorage3D(r.TEXTURE_3D,Y1,Um,cm.width,cm.height,cm.depth),F1&&t.texSubImage3D(r.TEXTURE_3D,0,0,0,0,cm.width,cm.height,cm.depth,zm,x1,cm.data)):t.texImage3D(r.TEXTURE_3D,0,Um,cm.width,cm.height,cm.depth,0,zm,x1,cm.data);else if(Xp.isFramebufferTexture){if(M1)if(um)t.texStorage2D(r.TEXTURE_2D,Y1,Um,cm.width,cm.height);else{let n1=cm.width,Zm=cm.height;for(let S1=0;S1<Y1;S1++)t.texImage2D(r.TEXTURE_2D,S1,Um,n1,Zm,0,zm,x1,null),n1>>=1,Zm>>=1}}else if(Sg.length>0){if(um&&M1){const n1=og(Sg[0]);t.texStorage2D(r.TEXTURE_2D,Y1,Um,n1.width,n1.height)}for(let n1=0,Zm=Sg.length;n1<Zm;n1++)h1=Sg[n1],um?F1&&t.texSubImage2D(r.TEXTURE_2D,n1,0,0,zm,x1,h1):t.texImage2D(r.TEXTURE_2D,n1,Um,zm,x1,h1);Xp.generateMipmaps=!1}else if(um){if(M1){const n1=og(cm);t.texStorage2D(r.TEXTURE_2D,Y1,Um,n1.width,n1.height)}F1&&t.texSubImage2D(r.TEXTURE_2D,0,0,0,zm,x1,cm)}else t.texImage2D(r.TEXTURE_2D,0,Um,zm,x1,cm);le(Xp)&&K($m),B0.__version=r0.version,Xp.onUpdate&&Xp.onUpdate(Xp)}R0.__version=Xp.version}function y0(R0,Xp,wm){if(Xp.image.length!==6)return;const $m=x0(R0,Xp),Vp=Xp.source;t.bindTexture(r.TEXTURE_CUBE_MAP,R0.__webglTexture,r.TEXTURE0+wm);const r0=a.get(Vp);if(Vp.version!==r0.__version||$m===!0){t.activeTexture(r.TEXTURE0+wm);const B0=Xt.getPrimaries(Xt.workingColorSpace),bm=Xp.colorSpace===pn?null:Xt.getPrimaries(Xp.colorSpace),Sm=Xp.colorSpace===pn||B0===bm?r.NONE:r.BROWSER_DEFAULT_WEBGL;r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,Xp.flipY),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Xp.premultiplyAlpha),r.pixelStorei(r.UNPACK_ALIGNMENT,Xp.unpackAlignment),r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,Sm);const Xm=Xp.isCompressedTexture||Xp.image[0].isCompressedTexture,cm=Xp.image[0]&&Xp.image[0].isDataTexture,zm=[];for(let Zm=0;Zm<6;Zm++)!Xm&&!cm?zm[Zm]=ee(Xp.image[Zm],!0,o.maxCubemapSize):zm[Zm]=cm?Xp.image[Zm].image:Xp.image[Zm],zm[Zm]=sg(Xp,zm[Zm]);const x1=zm[0],Um=l.convert(Xp.format,Xp.colorSpace),h1=l.convert(Xp.type),Sg=q(Xp.internalFormat,Um,h1,Xp.colorSpace),um=Xp.isVideoTexture!==!0,M1=r0.__version===void 0||$m===!0,F1=Vp.dataReady;let Y1=wt(Xp,x1);d0(r.TEXTURE_CUBE_MAP,Xp);let n1;if(Xm){um&&M1&&t.texStorage2D(r.TEXTURE_CUBE_MAP,Y1,Sg,x1.width,x1.height);for(let Zm=0;Zm<6;Zm++){n1=zm[Zm].mipmaps;for(let S1=0;S1<n1.length;S1++){const p1=n1[S1];Xp.format!==Ve?Um!==null?um?F1&&t.compressedTexSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Zm,S1,0,0,p1.width,p1.height,Um,p1.data):t.compressedTexImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Zm,S1,Sg,p1.width,p1.height,0,p1.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):um?F1&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Zm,S1,0,0,p1.width,p1.height,Um,h1,p1.data):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Zm,S1,Sg,p1.width,p1.height,0,Um,h1,p1.data)}}}else{if(n1=Xp.mipmaps,um&&M1){n1.length>0&&Y1++;const Zm=og(zm[0]);t.texStorage2D(r.TEXTURE_CUBE_MAP,Y1,Sg,Zm.width,Zm.height)}for(let Zm=0;Zm<6;Zm++)if(cm){um?F1&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Zm,0,0,0,zm[Zm].width,zm[Zm].height,Um,h1,zm[Zm].data):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Zm,0,Sg,zm[Zm].width,zm[Zm].height,0,Um,h1,zm[Zm].data);for(let S1=0;S1<n1.length;S1++){const p1=n1[S1].image[Zm].image;um?F1&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Zm,S1+1,0,0,p1.width,p1.height,Um,h1,p1.data):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Zm,S1+1,Sg,p1.width,p1.height,0,Um,h1,p1.data)}}else{um?F1&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Zm,0,0,0,Um,h1,zm[Zm]):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Zm,0,Sg,Um,h1,zm[Zm]);for(let S1=0;S1<n1.length;S1++){const p1=n1[S1];um?F1&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Zm,S1+1,0,0,Um,h1,p1.image[Zm]):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Zm,S1+1,Sg,Um,h1,p1.image[Zm])}}}le(Xp)&&K(r.TEXTURE_CUBE_MAP),r0.__version=Vp.version,Xp.onUpdate&&Xp.onUpdate(Xp)}R0.__version=Xp.version}function M0(R0,Xp,wm,$m,Vp,r0){const B0=l.convert(wm.format,wm.colorSpace),bm=l.convert(wm.type),Sm=q(wm.internalFormat,B0,bm,wm.colorSpace),Xm=a.get(Xp),cm=a.get(wm);if(cm.__renderTarget=Xp,!Xm.__hasExternalTextures){const zm=Math.max(1,Xp.width>>r0),x1=Math.max(1,Xp.height>>r0);Vp===r.TEXTURE_3D||Vp===r.TEXTURE_2D_ARRAY?t.texImage3D(Vp,r0,Sm,zm,x1,Xp.depth,0,B0,bm,null):t.texImage2D(Vp,r0,Sm,zm,x1,0,B0,bm,null)}t.bindFramebuffer(r.FRAMEBUFFER,R0),g1(Xp)?f.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,$m,Vp,cm.__webglTexture,0,o1(Xp)):(Vp===r.TEXTURE_2D||Vp>=r.TEXTURE_CUBE_MAP_POSITIVE_X&&Vp<=r.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&r.framebufferTexture2D(r.FRAMEBUFFER,$m,Vp,cm.__webglTexture,r0),t.bindFramebuffer(r.FRAMEBUFFER,null)}function sm(R0,Xp,wm){if(r.bindRenderbuffer(r.RENDERBUFFER,R0),Xp.depthBuffer){const $m=Xp.depthTexture,Vp=$m&&$m.isDepthTexture?$m.type:null,r0=Q(Xp.stencilBuffer,Vp),B0=Xp.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT,bm=o1(Xp);g1(Xp)?f.renderbufferStorageMultisampleEXT(r.RENDERBUFFER,bm,r0,Xp.width,Xp.height):wm?r.renderbufferStorageMultisample(r.RENDERBUFFER,bm,r0,Xp.width,Xp.height):r.renderbufferStorage(r.RENDERBUFFER,r0,Xp.width,Xp.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,B0,r.RENDERBUFFER,R0)}else{const $m=Xp.textures;for(let Vp=0;Vp<$m.length;Vp++){const r0=$m[Vp],B0=l.convert(r0.format,r0.colorSpace),bm=l.convert(r0.type),Sm=q(r0.internalFormat,B0,bm,r0.colorSpace),Xm=o1(Xp);wm&&g1(Xp)===!1?r.renderbufferStorageMultisample(r.RENDERBUFFER,Xm,Sm,Xp.width,Xp.height):g1(Xp)?f.renderbufferStorageMultisampleEXT(r.RENDERBUFFER,Xm,Sm,Xp.width,Xp.height):r.renderbufferStorage(r.RENDERBUFFER,Sm,Xp.width,Xp.height)}}r.bindRenderbuffer(r.RENDERBUFFER,null)}function mm(R0,Xp){if(Xp&&Xp.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(r.FRAMEBUFFER,R0),!(Xp.depthTexture&&Xp.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const wm=a.get(Xp.depthTexture);wm.__renderTarget=Xp,(!wm.__webglTexture||Xp.depthTexture.image.width!==Xp.width||Xp.depthTexture.image.height!==Xp.height)&&(Xp.depthTexture.image.width=Xp.width,Xp.depthTexture.image.height=Xp.height,Xp.depthTexture.needsUpdate=!0),qo(Xp.depthTexture,0);const $m=wm.__webglTexture,Vp=o1(Xp);if(Xp.depthTexture.format===Mi)g1(Xp)?f.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,$m,0,Vp):r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,$m,0);else if(Xp.depthTexture.format===Si)g1(Xp)?f.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.TEXTURE_2D,$m,0,Vp):r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.TEXTURE_2D,$m,0);else throw new Error("Unknown depthTexture format")}function Mm(R0){const Xp=a.get(R0),wm=R0.isWebGLCubeRenderTarget===!0;if(Xp.__boundDepthTexture!==R0.depthTexture){const $m=R0.depthTexture;if(Xp.__depthDisposeCallback&&Xp.__depthDisposeCallback(),$m){const Vp=()=>{delete Xp.__boundDepthTexture,delete Xp.__depthDisposeCallback,$m.removeEventListener("dispose",Vp)};$m.addEventListener("dispose",Vp),Xp.__depthDisposeCallback=Vp}Xp.__boundDepthTexture=$m}if(R0.depthTexture&&!Xp.__autoAllocateDepthBuffer){if(wm)throw new Error("target.depthTexture not supported in Cube render targets");const $m=R0.texture.mipmaps;$m&&$m.length>0?mm(Xp.__webglFramebuffer[0],R0):mm(Xp.__webglFramebuffer,R0)}else if(wm){Xp.__webglDepthbuffer=[];for(let $m=0;$m<6;$m++)if(t.bindFramebuffer(r.FRAMEBUFFER,Xp.__webglFramebuffer[$m]),Xp.__webglDepthbuffer[$m]===void 0)Xp.__webglDepthbuffer[$m]=r.createRenderbuffer(),sm(Xp.__webglDepthbuffer[$m],R0,!1);else{const Vp=R0.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT,r0=Xp.__webglDepthbuffer[$m];r.bindRenderbuffer(r.RENDERBUFFER,r0),r.framebufferRenderbuffer(r.FRAMEBUFFER,Vp,r.RENDERBUFFER,r0)}}else{const $m=R0.texture.mipmaps;if($m&&$m.length>0?t.bindFramebuffer(r.FRAMEBUFFER,Xp.__webglFramebuffer[0]):t.bindFramebuffer(r.FRAMEBUFFER,Xp.__webglFramebuffer),Xp.__webglDepthbuffer===void 0)Xp.__webglDepthbuffer=r.createRenderbuffer(),sm(Xp.__webglDepthbuffer,R0,!1);else{const Vp=R0.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT,r0=Xp.__webglDepthbuffer;r.bindRenderbuffer(r.RENDERBUFFER,r0),r.framebufferRenderbuffer(r.FRAMEBUFFER,Vp,r.RENDERBUFFER,r0)}}t.bindFramebuffer(r.FRAMEBUFFER,null)}function v1(R0,Xp,wm){const $m=a.get(R0);Xp!==void 0&&M0($m.__webglFramebuffer,R0,R0.texture,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,0),wm!==void 0&&Mm(R0)}function v0(R0){const Xp=R0.texture,wm=a.get(R0),$m=a.get(Xp);R0.addEventListener("dispose",Ut);const Vp=R0.textures,r0=R0.isWebGLCubeRenderTarget===!0,B0=Vp.length>1;if(B0||($m.__webglTexture===void 0&&($m.__webglTexture=r.createTexture()),$m.__version=Xp.version,s.memory.textures++),r0){wm.__webglFramebuffer=[];for(let bm=0;bm<6;bm++)if(Xp.mipmaps&&Xp.mipmaps.length>0){wm.__webglFramebuffer[bm]=[];for(let Sm=0;Sm<Xp.mipmaps.length;Sm++)wm.__webglFramebuffer[bm][Sm]=r.createFramebuffer()}else wm.__webglFramebuffer[bm]=r.createFramebuffer()}else{if(Xp.mipmaps&&Xp.mipmaps.length>0){wm.__webglFramebuffer=[];for(let bm=0;bm<Xp.mipmaps.length;bm++)wm.__webglFramebuffer[bm]=r.createFramebuffer()}else wm.__webglFramebuffer=r.createFramebuffer();if(B0)for(let bm=0,Sm=Vp.length;bm<Sm;bm++){const Xm=a.get(Vp[bm]);Xm.__webglTexture===void 0&&(Xm.__webglTexture=r.createTexture(),s.memory.textures++)}if(R0.samples>0&&g1(R0)===!1){wm.__webglMultisampledFramebuffer=r.createFramebuffer(),wm.__webglColorRenderbuffer=[],t.bindFramebuffer(r.FRAMEBUFFER,wm.__webglMultisampledFramebuffer);for(let bm=0;bm<Vp.length;bm++){const Sm=Vp[bm];wm.__webglColorRenderbuffer[bm]=r.createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,wm.__webglColorRenderbuffer[bm]);const Xm=l.convert(Sm.format,Sm.colorSpace),cm=l.convert(Sm.type),zm=q(Sm.internalFormat,Xm,cm,Sm.colorSpace,R0.isXRRenderTarget===!0),x1=o1(R0);r.renderbufferStorageMultisample(r.RENDERBUFFER,x1,zm,R0.width,R0.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+bm,r.RENDERBUFFER,wm.__webglColorRenderbuffer[bm])}r.bindRenderbuffer(r.RENDERBUFFER,null),R0.depthBuffer&&(wm.__webglDepthRenderbuffer=r.createRenderbuffer(),sm(wm.__webglDepthRenderbuffer,R0,!0)),t.bindFramebuffer(r.FRAMEBUFFER,null)}}if(r0){t.bindTexture(r.TEXTURE_CUBE_MAP,$m.__webglTexture),d0(r.TEXTURE_CUBE_MAP,Xp);for(let bm=0;bm<6;bm++)if(Xp.mipmaps&&Xp.mipmaps.length>0)for(let Sm=0;Sm<Xp.mipmaps.length;Sm++)M0(wm.__webglFramebuffer[bm][Sm],R0,Xp,r.COLOR_ATTACHMENT0,r.TEXTURE_CUBE_MAP_POSITIVE_X+bm,Sm);else M0(wm.__webglFramebuffer[bm],R0,Xp,r.COLOR_ATTACHMENT0,r.TEXTURE_CUBE_MAP_POSITIVE_X+bm,0);le(Xp)&&K(r.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(B0){for(let bm=0,Sm=Vp.length;bm<Sm;bm++){const Xm=Vp[bm],cm=a.get(Xm);let zm=r.TEXTURE_2D;(R0.isWebGL3DRenderTarget||R0.isWebGLArrayRenderTarget)&&(zm=R0.isWebGL3DRenderTarget?r.TEXTURE_3D:r.TEXTURE_2D_ARRAY),t.bindTexture(zm,cm.__webglTexture),d0(zm,Xm),M0(wm.__webglFramebuffer,R0,Xm,r.COLOR_ATTACHMENT0+bm,zm,0),le(Xm)&&K(zm)}t.unbindTexture()}else{let bm=r.TEXTURE_2D;if((R0.isWebGL3DRenderTarget||R0.isWebGLArrayRenderTarget)&&(bm=R0.isWebGL3DRenderTarget?r.TEXTURE_3D:r.TEXTURE_2D_ARRAY),t.bindTexture(bm,$m.__webglTexture),d0(bm,Xp),Xp.mipmaps&&Xp.mipmaps.length>0)for(let Sm=0;Sm<Xp.mipmaps.length;Sm++)M0(wm.__webglFramebuffer[Sm],R0,Xp,r.COLOR_ATTACHMENT0,bm,Sm);else M0(wm.__webglFramebuffer,R0,Xp,r.COLOR_ATTACHMENT0,bm,0);le(Xp)&&K(bm),t.unbindTexture()}R0.depthBuffer&&Mm(R0)}function D1(R0){const Xp=R0.textures;for(let wm=0,$m=Xp.length;wm<$m;wm++){const Vp=Xp[wm];if(le(Vp)){const r0=vt(R0),B0=a.get(Vp).__webglTexture;t.bindTexture(r0,B0),K(r0),t.unbindTexture()}}}const P1=[],ig=[];function w1(R0){if(R0.samples>0){if(g1(R0)===!1){const Xp=R0.textures,wm=R0.width,$m=R0.height;let Vp=r.COLOR_BUFFER_BIT;const r0=R0.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT,B0=a.get(R0),bm=Xp.length>1;if(bm)for(let Xm=0;Xm<Xp.length;Xm++)t.bindFramebuffer(r.FRAMEBUFFER,B0.__webglMultisampledFramebuffer),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+Xm,r.RENDERBUFFER,null),t.bindFramebuffer(r.FRAMEBUFFER,B0.__webglFramebuffer),r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0+Xm,r.TEXTURE_2D,null,0);t.bindFramebuffer(r.READ_FRAMEBUFFER,B0.__webglMultisampledFramebuffer);const Sm=R0.texture.mipmaps;Sm&&Sm.length>0?t.bindFramebuffer(r.DRAW_FRAMEBUFFER,B0.__webglFramebuffer[0]):t.bindFramebuffer(r.DRAW_FRAMEBUFFER,B0.__webglFramebuffer);for(let Xm=0;Xm<Xp.length;Xm++){if(R0.resolveDepthBuffer&&(R0.depthBuffer&&(Vp|=r.DEPTH_BUFFER_BIT),R0.stencilBuffer&&R0.resolveStencilBuffer&&(Vp|=r.STENCIL_BUFFER_BIT)),bm){r.framebufferRenderbuffer(r.READ_FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.RENDERBUFFER,B0.__webglColorRenderbuffer[Xm]);const cm=a.get(Xp[Xm]).__webglTexture;r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,cm,0)}r.blitFramebuffer(0,0,wm,$m,0,0,wm,$m,Vp,r.NEAREST),m===!0&&(P1.length=0,ig.length=0,P1.push(r.COLOR_ATTACHMENT0+Xm),R0.depthBuffer&&R0.resolveDepthBuffer===!1&&(P1.push(r0),ig.push(r0),r.invalidateFramebuffer(r.DRAW_FRAMEBUFFER,ig)),r.invalidateFramebuffer(r.READ_FRAMEBUFFER,P1))}if(t.bindFramebuffer(r.READ_FRAMEBUFFER,null),t.bindFramebuffer(r.DRAW_FRAMEBUFFER,null),bm)for(let Xm=0;Xm<Xp.length;Xm++){t.bindFramebuffer(r.FRAMEBUFFER,B0.__webglMultisampledFramebuffer),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+Xm,r.RENDERBUFFER,B0.__webglColorRenderbuffer[Xm]);const cm=a.get(Xp[Xm]).__webglTexture;t.bindFramebuffer(r.FRAMEBUFFER,B0.__webglFramebuffer),r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0+Xm,r.TEXTURE_2D,cm,0)}t.bindFramebuffer(r.DRAW_FRAMEBUFFER,B0.__webglMultisampledFramebuffer)}else if(R0.depthBuffer&&R0.resolveDepthBuffer===!1&&m){const Xp=R0.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT;r.invalidateFramebuffer(r.DRAW_FRAMEBUFFER,[Xp])}}}function o1(R0){return Math.min(o.maxSamples,R0.samples)}function g1(R0){const Xp=a.get(R0);return R0.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&Xp.__useRenderToTexture!==!1}function X1(R0){const Xp=s.render.frame;E.get(R0)!==Xp&&(E.set(R0,Xp),R0.update())}function sg(R0,Xp){const wm=R0.colorSpace,$m=R0.format,Vp=R0.type;return R0.isCompressedTexture===!0||R0.isVideoTexture===!0||wm!==ai&&wm!==pn&&(Xt.getTransfer(wm)===Jt?($m!==Ve||Vp!==sn)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",wm)),Xp}function og(R0){return typeof HTMLImageElement<"u"&&R0 instanceof HTMLImageElement?(b.width=R0.naturalWidth||R0.width,b.height=R0.naturalHeight||R0.height):typeof VideoFrame<"u"&&R0 instanceof VideoFrame?(b.width=R0.displayWidth,b.height=R0.displayHeight):(b.width=R0.width,b.height=R0.height),b}this.allocateTextureUnit=zp,this.resetTextureUnits=kp,this.setTexture2D=qo,this.setTexture2DArray=ae,this.setTexture3D=wp,this.setTextureCube=Cp,this.rebindTextures=v1,this.setupRenderTarget=v0,this.updateRenderTargetMipmap=D1,this.updateMultisampleRenderTarget=w1,this.setupDepthRenderbuffer=Mm,this.setupFrameBufferTexture=M0,this.useMultisampledRTT=g1}function tp(r,e){function t(a,o=pn){let l;const s=Xt.getTransfer(o);if(a===sn)return r.UNSIGNED_BYTE;if(a===qs)return r.UNSIGNED_SHORT_4_4_4_4;if(a===Ks)return r.UNSIGNED_SHORT_5_5_5_1;if(a===So)return r.UNSIGNED_INT_5_9_9_9_REV;if(a===Eo)return r.UNSIGNED_INT_10F_11F_11F_REV;if(a===xo)return r.BYTE;if(a===Mo)return r.SHORT;if(a===vi)return r.UNSIGNED_SHORT;if(a===Ys)return r.INT;if(a===Ln)return r.UNSIGNED_INT;if(a===nn)return r.FLOAT;if(a===yi)return r.HALF_FLOAT;if(a===yo)return r.ALPHA;if(a===To)return r.RGB;if(a===Ve)return r.RGBA;if(a===Mi)return r.DEPTH_COMPONENT;if(a===Si)return r.DEPTH_STENCIL;if(a===bo)return r.RED;if(a===Zs)return r.RED_INTEGER;if(a===Ao)return r.RG;if(a===js)return r.RG_INTEGER;if(a===$s)return r.RGBA_INTEGER;if(a===sr||a===ar||a===or||a===lr)if(s===Jt)if(l=e.get("WEBGL_compressed_texture_s3tc_srgb"),l!==null){if(a===sr)return l.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(a===ar)return l.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(a===or)return l.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(a===lr)return l.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(l=e.get("WEBGL_compressed_texture_s3tc"),l!==null){if(a===sr)return l.COMPRESSED_RGB_S3TC_DXT1_EXT;if(a===ar)return l.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(a===or)return l.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(a===lr)return l.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(a===_s||a===gs||a===vs||a===xs)if(l=e.get("WEBGL_compressed_texture_pvrtc"),l!==null){if(a===_s)return l.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(a===gs)return l.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(a===vs)return l.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(a===xs)return l.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(a===Ms||a===Ss||a===Es)if(l=e.get("WEBGL_compressed_texture_etc"),l!==null){if(a===Ms||a===Ss)return s===Jt?l.COMPRESSED_SRGB8_ETC2:l.COMPRESSED_RGB8_ETC2;if(a===Es)return s===Jt?l.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:l.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(a===ys||a===Ts||a===bs||a===As||a===Rs||a===ws||a===Cs||a===Ps||a===Ds||a===Ls||a===Us||a===Is||a===Ns||a===Fs)if(l=e.get("WEBGL_compressed_texture_astc"),l!==null){if(a===ys)return s===Jt?l.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:l.COMPRESSED_RGBA_ASTC_4x4_KHR;if(a===Ts)return s===Jt?l.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:l.COMPRESSED_RGBA_ASTC_5x4_KHR;if(a===bs)return s===Jt?l.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:l.COMPRESSED_RGBA_ASTC_5x5_KHR;if(a===As)return s===Jt?l.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:l.COMPRESSED_RGBA_ASTC_6x5_KHR;if(a===Rs)return s===Jt?l.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:l.COMPRESSED_RGBA_ASTC_6x6_KHR;if(a===ws)return s===Jt?l.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:l.COMPRESSED_RGBA_ASTC_8x5_KHR;if(a===Cs)return s===Jt?l.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:l.COMPRESSED_RGBA_ASTC_8x6_KHR;if(a===Ps)return s===Jt?l.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:l.COMPRESSED_RGBA_ASTC_8x8_KHR;if(a===Ds)return s===Jt?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:l.COMPRESSED_RGBA_ASTC_10x5_KHR;if(a===Ls)return s===Jt?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:l.COMPRESSED_RGBA_ASTC_10x6_KHR;if(a===Us)return s===Jt?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:l.COMPRESSED_RGBA_ASTC_10x8_KHR;if(a===Is)return s===Jt?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:l.COMPRESSED_RGBA_ASTC_10x10_KHR;if(a===Ns)return s===Jt?l.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:l.COMPRESSED_RGBA_ASTC_12x10_KHR;if(a===Fs)return s===Jt?l.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:l.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(a===Os||a===Bs||a===zs)if(l=e.get("EXT_texture_compression_bptc"),l!==null){if(a===Os)return s===Jt?l.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:l.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(a===Bs)return l.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(a===zs)return l.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(a===Hs||a===Vs||a===Gs||a===ks)if(l=e.get("EXT_texture_compression_rgtc"),l!==null){if(a===Hs)return l.COMPRESSED_RED_RGTC1_EXT;if(a===Vs)return l.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(a===Gs)return l.COMPRESSED_RED_GREEN_RGTC2_EXT;if(a===ks)return l.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return a===xi?r.UNSIGNED_INT_24_8:r[a]!==void 0?r[a]:null}return{convert:t}}const ep=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,np=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class ip{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t){if(this.texture===null){const a=new zo(e.texture);(e.depthNear!==t.depthNear||e.depthFar!==t.depthFar)&&(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=a}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,a=new vn({vertexShader:ep,fragmentShader:np,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new De(new xr(20,20),a)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class rp extends Nn{constructor(e,t){super();const a=this;let o=null,l=1,s=null,f="local-floor",m=1,b=null,E=null,M=null,I=null,V=null,Z=null;const ee=typeof XRWebGLBinding<"u",le=new ip,K={},vt=t.getContextAttributes();let q=null,Q=null;const wt=[],bt=[],Ut=new Bt;let it=null;const zt=new Fe;zt.viewport=new oe;const Zt=new Fe;Zt.viewport=new oe;const Mn=[zt,Zt],kp=new yc;let zp=null,sa=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(u0){let y0=wt[u0];return y0===void 0&&(y0=new Xr,wt[u0]=y0),y0.getTargetRaySpace()},this.getControllerGrip=function(u0){let y0=wt[u0];return y0===void 0&&(y0=new Xr,wt[u0]=y0),y0.getGripSpace()},this.getHand=function(u0){let y0=wt[u0];return y0===void 0&&(y0=new Xr,wt[u0]=y0),y0.getHandSpace()};function qo(u0){const y0=bt.indexOf(u0.inputSource);if(y0===-1)return;const M0=wt[y0];M0!==void 0&&(M0.update(u0.inputSource,u0.frame,b||s),M0.dispatchEvent({type:u0.type,data:u0.inputSource}))}function ae(){o.removeEventListener("select",qo),o.removeEventListener("selectstart",qo),o.removeEventListener("selectend",qo),o.removeEventListener("squeeze",qo),o.removeEventListener("squeezestart",qo),o.removeEventListener("squeezeend",qo),o.removeEventListener("end",ae),o.removeEventListener("inputsourceschange",wp);for(let u0=0;u0<wt.length;u0++){const y0=bt[u0];y0!==null&&(bt[u0]=null,wt[u0].disconnect(y0))}zp=null,sa=null,le.reset();for(const u0 in K)delete K[u0];e.setRenderTarget(q),V=null,I=null,M=null,o=null,Q=null,c0.stop(),a.isPresenting=!1,e.setPixelRatio(it),e.setSize(Ut.width,Ut.height,!1),a.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(u0){l=u0,a.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(u0){f=u0,a.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return b||s},this.setReferenceSpace=function(u0){b=u0},this.getBaseLayer=function(){return I!==null?I:V},this.getBinding=function(){return M===null&&ee&&(M=new XRWebGLBinding(o,t)),M},this.getFrame=function(){return Z},this.getSession=function(){return o},this.setSession=async function(u0){if(o=u0,o!==null){if(q=e.getRenderTarget(),o.addEventListener("select",qo),o.addEventListener("selectstart",qo),o.addEventListener("selectend",qo),o.addEventListener("squeeze",qo),o.addEventListener("squeezestart",qo),o.addEventListener("squeezeend",qo),o.addEventListener("end",ae),o.addEventListener("inputsourceschange",wp),vt.xrCompatible!==!0&&await t.makeXRCompatible(),it=e.getPixelRatio(),e.getSize(Ut),ee&&"createProjectionLayer"in XRWebGLBinding.prototype){let y0=null,M0=null,sm=null;vt.depth&&(sm=vt.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,y0=vt.stencil?Si:Mi,M0=vt.stencil?xi:Ln);const mm={colorFormat:t.RGBA8,depthFormat:sm,scaleFactor:l};M=this.getBinding(),I=M.createProjectionLayer(mm),o.updateRenderState({layers:[I]}),e.setPixelRatio(1),e.setSize(I.textureWidth,I.textureHeight,!1),Q=new In(I.textureWidth,I.textureHeight,{format:Ve,type:sn,depthTexture:new Bo(I.textureWidth,I.textureHeight,M0,void 0,void 0,void 0,void 0,void 0,void 0,y0),stencilBuffer:vt.stencil,colorSpace:e.outputColorSpace,samples:vt.antialias?4:0,resolveDepthBuffer:I.ignoreDepthValues===!1,resolveStencilBuffer:I.ignoreDepthValues===!1})}else{const y0={antialias:vt.antialias,alpha:!0,depth:vt.depth,stencil:vt.stencil,framebufferScaleFactor:l};V=new XRWebGLLayer(o,t,y0),o.updateRenderState({baseLayer:V}),e.setPixelRatio(1),e.setSize(V.framebufferWidth,V.framebufferHeight,!1),Q=new In(V.framebufferWidth,V.framebufferHeight,{format:Ve,type:sn,colorSpace:e.outputColorSpace,stencilBuffer:vt.stencil,resolveDepthBuffer:V.ignoreDepthValues===!1,resolveStencilBuffer:V.ignoreDepthValues===!1})}Q.isXRRenderTarget=!0,this.setFoveation(m),b=null,s=await o.requestReferenceSpace(f),c0.setContext(o),c0.start(),a.isPresenting=!0,a.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(o!==null)return o.environmentBlendMode},this.getDepthTexture=function(){return le.getDepthTexture()};function wp(u0){for(let y0=0;y0<u0.removed.length;y0++){const M0=u0.removed[y0],sm=bt.indexOf(M0);sm>=0&&(bt[sm]=null,wt[sm].disconnect(M0))}for(let y0=0;y0<u0.added.length;y0++){const M0=u0.added[y0];let sm=bt.indexOf(M0);if(sm===-1){for(let Mm=0;Mm<wt.length;Mm++)if(Mm>=bt.length){bt.push(M0),sm=Mm;break}else if(bt[Mm]===null){bt[Mm]=M0,sm=Mm;break}if(sm===-1)break}const mm=wt[sm];mm&&mm.connect(M0)}}const Cp=new U,Kt=new U;function h0(u0,y0,M0){Cp.setFromMatrixPosition(y0.matrixWorld),Kt.setFromMatrixPosition(M0.matrixWorld);const sm=Cp.distanceTo(Kt),mm=y0.projectionMatrix.elements,Mm=M0.projectionMatrix.elements,v1=mm[14]/(mm[10]-1),v0=mm[14]/(mm[10]+1),D1=(mm[9]+1)/mm[5],P1=(mm[9]-1)/mm[5],ig=(mm[8]-1)/mm[0],w1=(Mm[8]+1)/Mm[0],o1=v1*ig,g1=v1*w1,X1=sm/(-ig+w1),sg=X1*-ig;if(y0.matrixWorld.decompose(u0.position,u0.quaternion,u0.scale),u0.translateX(sg),u0.translateZ(X1),u0.matrixWorld.compose(u0.position,u0.quaternion,u0.scale),u0.matrixWorldInverse.copy(u0.matrixWorld).invert(),mm[10]===-1)u0.projectionMatrix.copy(y0.projectionMatrix),u0.projectionMatrixInverse.copy(y0.projectionMatrixInverse);else{const og=v1+X1,R0=v0+X1,Xp=o1-sg,wm=g1+(sm-sg),$m=D1*v0/R0*og,Vp=P1*v0/R0*og;u0.projectionMatrix.makePerspective(Xp,wm,$m,Vp,og,R0),u0.projectionMatrixInverse.copy(u0.projectionMatrix).invert()}}function Pp(u0,y0){y0===null?u0.matrixWorld.copy(u0.matrix):u0.matrixWorld.multiplyMatrices(y0.matrixWorld,u0.matrix),u0.matrixWorldInverse.copy(u0.matrixWorld).invert()}this.updateCamera=function(u0){if(o===null)return;let y0=u0.near,M0=u0.far;le.texture!==null&&(le.depthNear>0&&(y0=le.depthNear),le.depthFar>0&&(M0=le.depthFar)),kp.near=Zt.near=zt.near=y0,kp.far=Zt.far=zt.far=M0,(zp!==kp.near||sa!==kp.far)&&(o.updateRenderState({depthNear:kp.near,depthFar:kp.far}),zp=kp.near,sa=kp.far),kp.layers.mask=u0.layers.mask|6,zt.layers.mask=kp.layers.mask&3,Zt.layers.mask=kp.layers.mask&5;const sm=u0.parent,mm=kp.cameras;Pp(kp,sm);for(let Mm=0;Mm<mm.length;Mm++)Pp(mm[Mm],sm);mm.length===2?h0(kp,zt,Zt):kp.projectionMatrix.copy(zt.projectionMatrix),d0(u0,kp,sm)};function d0(u0,y0,M0){M0===null?u0.matrix.copy(y0.matrixWorld):(u0.matrix.copy(M0.matrixWorld),u0.matrix.invert(),u0.matrix.multiply(y0.matrixWorld)),u0.matrix.decompose(u0.position,u0.quaternion,u0.scale),u0.updateMatrixWorld(!0),u0.projectionMatrix.copy(y0.projectionMatrix),u0.projectionMatrixInverse.copy(y0.projectionMatrixInverse),u0.isPerspectiveCamera&&(u0.fov=Ws*2*Math.atan(1/u0.projectionMatrix.elements[5]),u0.zoom=1)}this.getCamera=function(){return kp},this.getFoveation=function(){if(!(I===null&&V===null))return m},this.setFoveation=function(u0){m=u0,I!==null&&(I.fixedFoveation=u0),V!==null&&V.fixedFoveation!==void 0&&(V.fixedFoveation=u0)},this.hasDepthSensing=function(){return le.texture!==null},this.getDepthSensingMesh=function(){return le.getMesh(kp)},this.getCameraTexture=function(u0){return K[u0]};let x0=null;function Dp(u0,y0){if(E=y0.getViewerPose(b||s),Z=y0,E!==null){const M0=E.views;V!==null&&(e.setRenderTargetFramebuffer(Q,V.framebuffer),e.setRenderTarget(Q));let sm=!1;M0.length!==kp.cameras.length&&(kp.cameras.length=0,sm=!0);for(let Mm=0;Mm<M0.length;Mm++){const v1=M0[Mm];let v0=null;if(V!==null)v0=V.getViewport(v1);else{const P1=M.getViewSubImage(I,v1);v0=P1.viewport,Mm===0&&(e.setRenderTargetTextures(Q,P1.colorTexture,P1.depthStencilTexture),e.setRenderTarget(Q))}let D1=Mn[Mm];D1===void 0&&(D1=new Fe,D1.layers.enable(Mm),D1.viewport=new oe,Mn[Mm]=D1),D1.matrix.fromArray(v1.transform.matrix),D1.matrix.decompose(D1.position,D1.quaternion,D1.scale),D1.projectionMatrix.fromArray(v1.projectionMatrix),D1.projectionMatrixInverse.copy(D1.projectionMatrix).invert(),D1.viewport.set(v0.x,v0.y,v0.width,v0.height),Mm===0&&(kp.matrix.copy(D1.matrix),kp.matrix.decompose(kp.position,kp.quaternion,kp.scale)),sm===!0&&kp.cameras.push(D1)}const mm=o.enabledFeatures;if(mm&&mm.includes("depth-sensing")&&o.depthUsage=="gpu-optimized"&&ee){M=a.getBinding();const Mm=M.getDepthInformation(M0[0]);Mm&&Mm.isValid&&Mm.texture&&le.init(Mm,o.renderState)}if(mm&&mm.includes("camera-access")&&ee){e.state.unbindTexture(),M=a.getBinding();for(let Mm=0;Mm<M0.length;Mm++){const v1=M0[Mm].camera;if(v1){let v0=K[v1];v0||(v0=new zo,K[v1]=v0);const D1=M.getCameraImage(v1);v0.sourceTexture=D1}}}}for(let M0=0;M0<wt.length;M0++){const sm=bt[M0],mm=wt[M0];sm!==null&&mm!==void 0&&mm.update(sm,y0,b||s)}x0&&x0(u0,y0),y0.detectedPlanes&&a.dispatchEvent({type:"planesdetected",data:y0}),Z=null}const c0=new Ho;c0.setAnimationLoop(Dp),this.setAnimationLoop=function(u0){x0=u0},this.dispose=function(){}}}const An=new an,sp=new he;function ap(r,e){function t(le,K){le.matrixAutoUpdate===!0&&le.updateMatrix(),K.value.copy(le.matrix)}function a(le,K){K.color.getRGB(le.fogColor.value,Io(r)),K.isFog?(le.fogNear.value=K.near,le.fogFar.value=K.far):K.isFogExp2&&(le.fogDensity.value=K.density)}function o(le,K,vt,q,Q){K.isMeshBasicMaterial||K.isMeshLambertMaterial?l(le,K):K.isMeshToonMaterial?(l(le,K),M(le,K)):K.isMeshPhongMaterial?(l(le,K),E(le,K)):K.isMeshStandardMaterial?(l(le,K),I(le,K),K.isMeshPhysicalMaterial&&V(le,K,Q)):K.isMeshMatcapMaterial?(l(le,K),Z(le,K)):K.isMeshDepthMaterial?l(le,K):K.isMeshDistanceMaterial?(l(le,K),ee(le,K)):K.isMeshNormalMaterial?l(le,K):K.isLineBasicMaterial?(s(le,K),K.isLineDashedMaterial&&f(le,K)):K.isPointsMaterial?m(le,K,vt,q):K.isSpriteMaterial?b(le,K):K.isShadowMaterial?(le.color.value.copy(K.color),le.opacity.value=K.opacity):K.isShaderMaterial&&(K.uniformsNeedUpdate=!1)}function l(le,K){le.opacity.value=K.opacity,K.color&&le.diffuse.value.copy(K.color),K.emissive&&le.emissive.value.copy(K.emissive).multiplyScalar(K.emissiveIntensity),K.map&&(le.map.value=K.map,t(K.map,le.mapTransform)),K.alphaMap&&(le.alphaMap.value=K.alphaMap,t(K.alphaMap,le.alphaMapTransform)),K.bumpMap&&(le.bumpMap.value=K.bumpMap,t(K.bumpMap,le.bumpMapTransform),le.bumpScale.value=K.bumpScale,K.side===Te&&(le.bumpScale.value*=-1)),K.normalMap&&(le.normalMap.value=K.normalMap,t(K.normalMap,le.normalMapTransform),le.normalScale.value.copy(K.normalScale),K.side===Te&&le.normalScale.value.negate()),K.displacementMap&&(le.displacementMap.value=K.displacementMap,t(K.displacementMap,le.displacementMapTransform),le.displacementScale.value=K.displacementScale,le.displacementBias.value=K.displacementBias),K.emissiveMap&&(le.emissiveMap.value=K.emissiveMap,t(K.emissiveMap,le.emissiveMapTransform)),K.specularMap&&(le.specularMap.value=K.specularMap,t(K.specularMap,le.specularMapTransform)),K.alphaTest>0&&(le.alphaTest.value=K.alphaTest);const vt=e.get(K),q=vt.envMap,Q=vt.envMapRotation;q&&(le.envMap.value=q,An.copy(Q),An.x*=-1,An.y*=-1,An.z*=-1,q.isCubeTexture&&q.isRenderTargetTexture===!1&&(An.y*=-1,An.z*=-1),le.envMapRotation.value.setFromMatrix4(sp.makeRotationFromEuler(An)),le.flipEnvMap.value=q.isCubeTexture&&q.isRenderTargetTexture===!1?-1:1,le.reflectivity.value=K.reflectivity,le.ior.value=K.ior,le.refractionRatio.value=K.refractionRatio),K.lightMap&&(le.lightMap.value=K.lightMap,le.lightMapIntensity.value=K.lightMapIntensity,t(K.lightMap,le.lightMapTransform)),K.aoMap&&(le.aoMap.value=K.aoMap,le.aoMapIntensity.value=K.aoMapIntensity,t(K.aoMap,le.aoMapTransform))}function s(le,K){le.diffuse.value.copy(K.color),le.opacity.value=K.opacity,K.map&&(le.map.value=K.map,t(K.map,le.mapTransform))}function f(le,K){le.dashSize.value=K.dashSize,le.totalSize.value=K.dashSize+K.gapSize,le.scale.value=K.scale}function m(le,K,vt,q){le.diffuse.value.copy(K.color),le.opacity.value=K.opacity,le.size.value=K.size*vt,le.scale.value=q*.5,K.map&&(le.map.value=K.map,t(K.map,le.uvTransform)),K.alphaMap&&(le.alphaMap.value=K.alphaMap,t(K.alphaMap,le.alphaMapTransform)),K.alphaTest>0&&(le.alphaTest.value=K.alphaTest)}function b(le,K){le.diffuse.value.copy(K.color),le.opacity.value=K.opacity,le.rotation.value=K.rotation,K.map&&(le.map.value=K.map,t(K.map,le.mapTransform)),K.alphaMap&&(le.alphaMap.value=K.alphaMap,t(K.alphaMap,le.alphaMapTransform)),K.alphaTest>0&&(le.alphaTest.value=K.alphaTest)}function E(le,K){le.specular.value.copy(K.specular),le.shininess.value=Math.max(K.shininess,1e-4)}function M(le,K){K.gradientMap&&(le.gradientMap.value=K.gradientMap)}function I(le,K){le.metalness.value=K.metalness,K.metalnessMap&&(le.metalnessMap.value=K.metalnessMap,t(K.metalnessMap,le.metalnessMapTransform)),le.roughness.value=K.roughness,K.roughnessMap&&(le.roughnessMap.value=K.roughnessMap,t(K.roughnessMap,le.roughnessMapTransform)),K.envMap&&(le.envMapIntensity.value=K.envMapIntensity)}function V(le,K,vt){le.ior.value=K.ior,K.sheen>0&&(le.sheenColor.value.copy(K.sheenColor).multiplyScalar(K.sheen),le.sheenRoughness.value=K.sheenRoughness,K.sheenColorMap&&(le.sheenColorMap.value=K.sheenColorMap,t(K.sheenColorMap,le.sheenColorMapTransform)),K.sheenRoughnessMap&&(le.sheenRoughnessMap.value=K.sheenRoughnessMap,t(K.sheenRoughnessMap,le.sheenRoughnessMapTransform))),K.clearcoat>0&&(le.clearcoat.value=K.clearcoat,le.clearcoatRoughness.value=K.clearcoatRoughness,K.clearcoatMap&&(le.clearcoatMap.value=K.clearcoatMap,t(K.clearcoatMap,le.clearcoatMapTransform)),K.clearcoatRoughnessMap&&(le.clearcoatRoughnessMap.value=K.clearcoatRoughnessMap,t(K.clearcoatRoughnessMap,le.clearcoatRoughnessMapTransform)),K.clearcoatNormalMap&&(le.clearcoatNormalMap.value=K.clearcoatNormalMap,t(K.clearcoatNormalMap,le.clearcoatNormalMapTransform),le.clearcoatNormalScale.value.copy(K.clearcoatNormalScale),K.side===Te&&le.clearcoatNormalScale.value.negate())),K.dispersion>0&&(le.dispersion.value=K.dispersion),K.iridescence>0&&(le.iridescence.value=K.iridescence,le.iridescenceIOR.value=K.iridescenceIOR,le.iridescenceThicknessMinimum.value=K.iridescenceThicknessRange[0],le.iridescenceThicknessMaximum.value=K.iridescenceThicknessRange[1],K.iridescenceMap&&(le.iridescenceMap.value=K.iridescenceMap,t(K.iridescenceMap,le.iridescenceMapTransform)),K.iridescenceThicknessMap&&(le.iridescenceThicknessMap.value=K.iridescenceThicknessMap,t(K.iridescenceThicknessMap,le.iridescenceThicknessMapTransform))),K.transmission>0&&(le.transmission.value=K.transmission,le.transmissionSamplerMap.value=vt.texture,le.transmissionSamplerSize.value.set(vt.width,vt.height),K.transmissionMap&&(le.transmissionMap.value=K.transmissionMap,t(K.transmissionMap,le.transmissionMapTransform)),le.thickness.value=K.thickness,K.thicknessMap&&(le.thicknessMap.value=K.thicknessMap,t(K.thicknessMap,le.thicknessMapTransform)),le.attenuationDistance.value=K.attenuationDistance,le.attenuationColor.value.copy(K.attenuationColor)),K.anisotropy>0&&(le.anisotropyVector.value.set(K.anisotropy*Math.cos(K.anisotropyRotation),K.anisotropy*Math.sin(K.anisotropyRotation)),K.anisotropyMap&&(le.anisotropyMap.value=K.anisotropyMap,t(K.anisotropyMap,le.anisotropyMapTransform))),le.specularIntensity.value=K.specularIntensity,le.specularColor.value.copy(K.specularColor),K.specularColorMap&&(le.specularColorMap.value=K.specularColorMap,t(K.specularColorMap,le.specularColorMapTransform)),K.specularIntensityMap&&(le.specularIntensityMap.value=K.specularIntensityMap,t(K.specularIntensityMap,le.specularIntensityMapTransform))}function Z(le,K){K.matcap&&(le.matcap.value=K.matcap)}function ee(le,K){const vt=e.get(K).light;le.referencePosition.value.setFromMatrixPosition(vt.matrixWorld),le.nearDistance.value=vt.shadow.camera.near,le.farDistance.value=vt.shadow.camera.far}return{refreshFogUniforms:a,refreshMaterialUniforms:o}}function op(r,e,t,a){let o={},l={},s=[];const f=r.getParameter(r.MAX_UNIFORM_BUFFER_BINDINGS);function m(vt,q){const Q=q.program;a.uniformBlockBinding(vt,Q)}function b(vt,q){let Q=o[vt.id];Q===void 0&&(Z(vt),Q=E(vt),o[vt.id]=Q,vt.addEventListener("dispose",le));const wt=q.program;a.updateUBOMapping(vt,wt);const bt=e.render.frame;l[vt.id]!==bt&&(I(vt),l[vt.id]=bt)}function E(vt){const q=M();vt.__bindingPointIndex=q;const Q=r.createBuffer(),wt=vt.__size,bt=vt.usage;return r.bindBuffer(r.UNIFORM_BUFFER,Q),r.bufferData(r.UNIFORM_BUFFER,wt,bt),r.bindBuffer(r.UNIFORM_BUFFER,null),r.bindBufferBase(r.UNIFORM_BUFFER,q,Q),Q}function M(){for(let vt=0;vt<f;vt++)if(s.indexOf(vt)===-1)return s.push(vt),vt;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function I(vt){const q=o[vt.id],Q=vt.uniforms,wt=vt.__cache;r.bindBuffer(r.UNIFORM_BUFFER,q);for(let bt=0,Ut=Q.length;bt<Ut;bt++){const it=Array.isArray(Q[bt])?Q[bt]:[Q[bt]];for(let zt=0,Zt=it.length;zt<Zt;zt++){const Mn=it[zt];if(V(Mn,bt,zt,wt)===!0){const kp=Mn.__offset,zp=Array.isArray(Mn.value)?Mn.value:[Mn.value];let sa=0;for(let qo=0;qo<zp.length;qo++){const ae=zp[qo],wp=ee(ae);typeof ae=="number"||typeof ae=="boolean"?(Mn.__data[0]=ae,r.bufferSubData(r.UNIFORM_BUFFER,kp+sa,Mn.__data)):ae.isMatrix3?(Mn.__data[0]=ae.elements[0],Mn.__data[1]=ae.elements[1],Mn.__data[2]=ae.elements[2],Mn.__data[3]=0,Mn.__data[4]=ae.elements[3],Mn.__data[5]=ae.elements[4],Mn.__data[6]=ae.elements[5],Mn.__data[7]=0,Mn.__data[8]=ae.elements[6],Mn.__data[9]=ae.elements[7],Mn.__data[10]=ae.elements[8],Mn.__data[11]=0):(ae.toArray(Mn.__data,sa),sa+=wp.storage/Float32Array.BYTES_PER_ELEMENT)}r.bufferSubData(r.UNIFORM_BUFFER,kp,Mn.__data)}}}r.bindBuffer(r.UNIFORM_BUFFER,null)}function V(vt,q,Q,wt){const bt=vt.value,Ut=q+"_"+Q;if(wt[Ut]===void 0)return typeof bt=="number"||typeof bt=="boolean"?wt[Ut]=bt:wt[Ut]=bt.clone(),!0;{const it=wt[Ut];if(typeof bt=="number"||typeof bt=="boolean"){if(it!==bt)return wt[Ut]=bt,!0}else if(it.equals(bt)===!1)return it.copy(bt),!0}return!1}function Z(vt){const q=vt.uniforms;let Q=0;const wt=16;for(let Ut=0,it=q.length;Ut<it;Ut++){const zt=Array.isArray(q[Ut])?q[Ut]:[q[Ut]];for(let Zt=0,Mn=zt.length;Zt<Mn;Zt++){const kp=zt[Zt],zp=Array.isArray(kp.value)?kp.value:[kp.value];for(let sa=0,qo=zp.length;sa<qo;sa++){const ae=zp[sa],wp=ee(ae),Cp=Q%wt,Kt=Cp%wp.boundary,h0=Cp+Kt;Q+=Kt,h0!==0&&wt-h0<wp.storage&&(Q+=wt-h0),kp.__data=new Float32Array(wp.storage/Float32Array.BYTES_PER_ELEMENT),kp.__offset=Q,Q+=wp.storage}}}const bt=Q%wt;return bt>0&&(Q+=wt-bt),vt.__size=Q,vt.__cache={},this}function ee(vt){const q={boundary:0,storage:0};return typeof vt=="number"||typeof vt=="boolean"?(q.boundary=4,q.storage=4):vt.isVector2?(q.boundary=8,q.storage=8):vt.isVector3||vt.isColor?(q.boundary=16,q.storage=12):vt.isVector4?(q.boundary=16,q.storage=16):vt.isMatrix3?(q.boundary=48,q.storage=48):vt.isMatrix4?(q.boundary=64,q.storage=64):vt.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",vt),q}function le(vt){const q=vt.target;q.removeEventListener("dispose",le);const Q=s.indexOf(q.__bindingPointIndex);s.splice(Q,1),r.deleteBuffer(o[q.id]),delete o[q.id],delete l[q.id]}function K(){for(const vt in o)r.deleteBuffer(o[vt]);s=[],o={},l={}}return{bind:m,update:b,dispose:K}}class lp{constructor(e={}){const{canvas:t=Gl(),context:a=null,depth:o=!0,stencil:l=!1,alpha:s=!1,antialias:f=!1,premultipliedAlpha:m=!0,preserveDrawingBuffer:b=!1,powerPreference:E="default",failIfMajorPerformanceCaveat:M=!1,reversedDepthBuffer:I=!1}=e;this.isWebGLRenderer=!0;let V;if(a!==null){if(typeof WebGLRenderingContext<"u"&&a instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");V=a.getContextAttributes().alpha}else V=s;const Z=new Uint32Array(4),ee=new Int32Array(4);let le=null,K=null;const vt=[],q=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=_n,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const Q=this;let wt=!1;this._outputColorSpace=Ne;let bt=0,Ut=0,it=null,zt=-1,Zt=null;const Mn=new oe,kp=new oe;let zp=null;const sa=new qt(0);let qo=0,ae=t.width,wp=t.height,Cp=1,Kt=null,h0=null;const Pp=new oe(0,0,ae,wp),d0=new oe(0,0,ae,wp);let x0=!1;const Dp=new Oo;let c0=!1,u0=!1;const y0=new he,M0=new U,sm=new oe,mm={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Mm=!1;function v1(){return it===null?Cp:1}let v0=a;function D1(Fn,t0){return t.getContext(Fn,t0)}try{const Fn={alpha:!0,depth:o,stencil:l,antialias:f,premultipliedAlpha:m,preserveDrawingBuffer:b,powerPreference:E,failIfMajorPerformanceCaveat:M};if("setAttribute"in t&&t.setAttribute("data-engine","three.js r180"),t.addEventListener("webglcontextlost",F1,!1),t.addEventListener("webglcontextrestored",Y1,!1),t.addEventListener("webglcontextcreationerror",n1,!1),v0===null){const t0="webgl2";if(v0=D1(t0,Fn),v0===null)throw D1(t0)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(Fn){throw console.error("THREE.WebGLRenderer: "+Fn.message),Fn}let P1,ig,w1,o1,g1,X1,sg,og,R0,Xp,wm,$m,Vp,r0,B0,bm,Sm,Xm,cm,zm,x1,Um,h1,Sg;function um(){P1=new gd(v0),P1.init(),Um=new tp(v0,P1),ig=new hd(v0,P1,e,Um),w1=new Jf(v0,P1),ig.reversedDepthBuffer&&I&&w1.buffers.depth.setReversed(!0),o1=new Md(v0),g1=new zf,X1=new Qf(v0,P1,w1,g1,ig,Um,o1),sg=new dd(Q),og=new _d(Q),R0=new Ac(v0),h1=new ld(v0,R0),Xp=new vd(v0,R0,o1,h1),wm=new Ed(v0,Xp,R0,o1),cm=new Sd(v0,ig,X1),bm=new ud(g1),$m=new Bf(Q,sg,og,P1,ig,h1,bm),Vp=new ap(Q,g1),r0=new Vf,B0=new qf(P1),Xm=new od(Q,sg,og,w1,wm,V,m),Sm=new jf(Q,wm,ig),Sg=new op(v0,o1,ig,w1),zm=new cd(v0,P1,o1),x1=new xd(v0,P1,o1),o1.programs=$m.programs,Q.capabilities=ig,Q.extensions=P1,Q.properties=g1,Q.renderLists=r0,Q.shadowMap=Sm,Q.state=w1,Q.info=o1}um();const M1=new rp(Q,v0);this.xr=M1,this.getContext=function(){return v0},this.getContextAttributes=function(){return v0.getContextAttributes()},this.forceContextLoss=function(){const Fn=P1.get("WEBGL_lose_context");Fn&&Fn.loseContext()},this.forceContextRestore=function(){const Fn=P1.get("WEBGL_lose_context");Fn&&Fn.restoreContext()},this.getPixelRatio=function(){return Cp},this.setPixelRatio=function(Fn){Fn!==void 0&&(Cp=Fn,this.setSize(ae,wp,!1))},this.getSize=function(Fn){return Fn.set(ae,wp)},this.setSize=function(Fn,t0,s0=!0){if(M1.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}ae=Fn,wp=t0,t.width=Math.floor(Fn*Cp),t.height=Math.floor(t0*Cp),s0===!0&&(t.style.width=Fn+"px",t.style.height=t0+"px"),this.setViewport(0,0,Fn,t0)},this.getDrawingBufferSize=function(Fn){return Fn.set(ae*Cp,wp*Cp).floor()},this.setDrawingBufferSize=function(Fn,t0,s0){ae=Fn,wp=t0,Cp=s0,t.width=Math.floor(Fn*s0),t.height=Math.floor(t0*s0),this.setViewport(0,0,Fn,t0)},this.getCurrentViewport=function(Fn){return Fn.copy(Mn)},this.getViewport=function(Fn){return Fn.copy(Pp)},this.setViewport=function(Fn,t0,s0,J0){Fn.isVector4?Pp.set(Fn.x,Fn.y,Fn.z,Fn.w):Pp.set(Fn,t0,s0,J0),w1.viewport(Mn.copy(Pp).multiplyScalar(Cp).round())},this.getScissor=function(Fn){return Fn.copy(d0)},this.setScissor=function(Fn,t0,s0,J0){Fn.isVector4?d0.set(Fn.x,Fn.y,Fn.z,Fn.w):d0.set(Fn,t0,s0,J0),w1.scissor(kp.copy(d0).multiplyScalar(Cp).round())},this.getScissorTest=function(){return x0},this.setScissorTest=function(Fn){w1.setScissorTest(x0=Fn)},this.setOpaqueSort=function(Fn){Kt=Fn},this.setTransparentSort=function(Fn){h0=Fn},this.getClearColor=function(Fn){return Fn.copy(Xm.getClearColor())},this.setClearColor=function(){Xm.setClearColor(...arguments)},this.getClearAlpha=function(){return Xm.getClearAlpha()},this.setClearAlpha=function(){Xm.setClearAlpha(...arguments)},this.clear=function(Fn=!0,t0=!0,s0=!0){let J0=0;if(Fn){let F0=!1;if(it!==null){const lm=it.texture.format;F0=lm===$s||lm===js||lm===Zs}if(F0){const lm=it.texture.type,Bm=lm===sn||lm===Ln||lm===vi||lm===xi||lm===qs||lm===Ks,Nm=Xm.getClearColor(),jm=Xm.getClearAlpha(),A1=Nm.r,L1=Nm.g,K1=Nm.b;Bm?(Z[0]=A1,Z[1]=L1,Z[2]=K1,Z[3]=jm,v0.clearBufferuiv(v0.COLOR,0,Z)):(ee[0]=A1,ee[1]=L1,ee[2]=K1,ee[3]=jm,v0.clearBufferiv(v0.COLOR,0,ee))}else J0|=v0.COLOR_BUFFER_BIT}t0&&(J0|=v0.DEPTH_BUFFER_BIT),s0&&(J0|=v0.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),v0.clear(J0)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",F1,!1),t.removeEventListener("webglcontextrestored",Y1,!1),t.removeEventListener("webglcontextcreationerror",n1,!1),Xm.dispose(),r0.dispose(),B0.dispose(),g1.dispose(),sg.dispose(),og.dispose(),wm.dispose(),h1.dispose(),Sg.dispose(),$m.dispose(),M1.dispose(),M1.removeEventListener("sessionstart",ey),M1.removeEventListener("sessionend",xy),Gv.stop()};function F1(Fn){Fn.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),wt=!0}function Y1(){console.log("THREE.WebGLRenderer: Context Restored."),wt=!1;const Fn=o1.autoReset,t0=Sm.enabled,s0=Sm.autoUpdate,J0=Sm.needsUpdate,F0=Sm.type;um(),o1.autoReset=Fn,Sm.enabled=t0,Sm.autoUpdate=s0,Sm.needsUpdate=J0,Sm.type=F0}function n1(Fn){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Fn.statusMessage)}function Zm(Fn){const t0=Fn.target;t0.removeEventListener("dispose",Zm),S1(t0)}function S1(Fn){p1(Fn),g1.remove(Fn)}function p1(Fn){const t0=g1.get(Fn).programs;t0!==void 0&&(t0.forEach(function(s0){$m.releaseProgram(s0)}),Fn.isShaderMaterial&&$m.releaseShaderCache(Fn))}this.renderBufferDirect=function(Fn,t0,s0,J0,F0,lm){t0===null&&(t0=mm);const Bm=F0.isMesh&&F0.matrixWorld.determinant()<0,Nm=Ov(Fn,t0,s0,J0,F0);w1.setMaterial(J0,Bm);let jm=s0.index,A1=1;if(J0.wireframe===!0){if(jm=Xp.getWireframeAttribute(s0),jm===void 0)return;A1=2}const L1=s0.drawRange,K1=s0.attributes.position;let Tg=L1.start*A1,Lg=(L1.start+L1.count)*A1;lm!==null&&(Tg=Math.max(Tg,lm.start*A1),Lg=Math.min(Lg,(lm.start+lm.count)*A1)),jm!==null?(Tg=Math.max(Tg,0),Lg=Math.min(Lg,jm.count)):K1!=null&&(Tg=Math.max(Tg,0),Lg=Math.min(Lg,K1.count));const lg=Lg-Tg;if(lg<0||lg===1/0)return;h1.setup(F0,J0,Nm,s0,jm);let Mg,$1=zm;if(jm!==null&&(Mg=R0.get(jm),$1=x1,$1.setIndex(Mg)),F0.isMesh)J0.wireframe===!0?(w1.setLineWidth(J0.wireframeLinewidth*v1()),$1.setMode(v0.LINES)):$1.setMode(v0.TRIANGLES);else if(F0.isLine){let j1=J0.linewidth;j1===void 0&&(j1=1),w1.setLineWidth(j1*v1()),F0.isLineSegments?$1.setMode(v0.LINES):F0.isLineLoop?$1.setMode(v0.LINE_LOOP):$1.setMode(v0.LINE_STRIP)}else F0.isPoints?$1.setMode(v0.POINTS):F0.isSprite&&$1.setMode(v0.TRIANGLES);if(F0.isBatchedMesh)if(F0._multiDrawInstances!==null)Ei("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),$1.renderMultiDrawInstances(F0._multiDrawStarts,F0._multiDrawCounts,F0._multiDrawCount,F0._multiDrawInstances);else if(P1.get("WEBGL_multi_draw"))$1.renderMultiDraw(F0._multiDrawStarts,F0._multiDrawCounts,F0._multiDrawCount);else{const j1=F0._multiDrawStarts,ng=F0._multiDrawCounts,zv=F0._multiDrawCount,o0=jm?R0.get(jm).bytesPerElement:1,p=g1.get(J0).currentProgram.getUniforms();for(let R=0;R<zv;R++)p.setValue(v0,"_gl_DrawID",R),$1.render(j1[R]/o0,ng[R])}else if(F0.isInstancedMesh)$1.renderInstances(Tg,lg,F0.count);else if(s0.isInstancedBufferGeometry){const j1=s0._maxInstanceCount!==void 0?s0._maxInstanceCount:1/0,ng=Math.min(s0.instanceCount,j1);$1.renderInstances(Tg,lg,ng)}else $1.render(Tg,lg)};function hv(Fn,t0,s0){Fn.transparent===!0&&Fn.side===Xe&&Fn.forceSinglePass===!1?(Fn.side=Te,Fn.needsUpdate=!0,$v(Fn,t0,s0),Fn.side=gn,Fn.needsUpdate=!0,$v(Fn,t0,s0),Fn.side=Xe):$v(Fn,t0,s0)}this.compile=function(Fn,t0,s0=null){s0===null&&(s0=Fn),K=B0.get(s0),K.init(t0),q.push(K),s0.traverseVisible(function(F0){F0.isLight&&F0.layers.test(t0.layers)&&(K.pushLight(F0),F0.castShadow&&K.pushShadow(F0))}),Fn!==s0&&Fn.traverseVisible(function(F0){F0.isLight&&F0.layers.test(t0.layers)&&(K.pushLight(F0),F0.castShadow&&K.pushShadow(F0))}),K.setupLights();const J0=new Set;return Fn.traverse(function(F0){if(!(F0.isMesh||F0.isPoints||F0.isLine||F0.isSprite))return;const lm=F0.material;if(lm)if(Array.isArray(lm))for(let Bm=0;Bm<lm.length;Bm++){const Nm=lm[Bm];hv(Nm,s0,F0),J0.add(Nm)}else hv(lm,s0,F0),J0.add(lm)}),K=q.pop(),J0},this.compileAsync=function(Fn,t0,s0=null){const J0=this.compile(Fn,t0,s0);return new Promise(F0=>{function lm(){if(J0.forEach(function(Bm){g1.get(Bm).currentProgram.isReady()&&J0.delete(Bm)}),J0.size===0){F0(Fn);return}setTimeout(lm,10)}P1.get("KHR_parallel_shader_compile")!==null?lm():setTimeout(lm,10)})};let Gg=null;function Cv(Fn){Gg&&Gg(Fn)}function ey(){Gv.stop()}function xy(){Gv.start()}const Gv=new Ho;Gv.setAnimationLoop(Cv),typeof self<"u"&&Gv.setContext(self),this.setAnimationLoop=function(Fn){Gg=Fn,M1.setAnimationLoop(Fn),Fn===null?Gv.stop():Gv.start()},M1.addEventListener("sessionstart",ey),M1.addEventListener("sessionend",xy),this.render=function(Fn,t0){if(t0!==void 0&&t0.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(wt===!0)return;if(Fn.matrixWorldAutoUpdate===!0&&Fn.updateMatrixWorld(),t0.parent===null&&t0.matrixWorldAutoUpdate===!0&&t0.updateMatrixWorld(),M1.enabled===!0&&M1.isPresenting===!0&&(M1.cameraAutoUpdate===!0&&M1.updateCamera(t0),t0=M1.getCamera()),Fn.isScene===!0&&Fn.onBeforeRender(Q,Fn,t0,it),K=B0.get(Fn,q.length),K.init(t0),q.push(K),y0.multiplyMatrices(t0.projectionMatrix,t0.matrixWorldInverse),Dp.setFromProjectionMatrix(y0,qe,t0.reversedDepth),u0=this.localClippingEnabled,c0=bm.init(this.clippingPlanes,u0),le=r0.get(Fn,vt.length),le.init(),vt.push(le),M1.enabled===!0&&M1.isPresenting===!0){const lm=Q.xr.getDepthSensingMesh();lm!==null&&yv(lm,t0,-1/0,Q.sortObjects)}yv(Fn,t0,0,Q.sortObjects),le.finish(),Q.sortObjects===!0&&le.sort(Kt,h0),Mm=M1.enabled===!1||M1.isPresenting===!1||M1.hasDepthSensing()===!1,Mm&&Xm.addToRenderList(le,Fn),this.info.render.frame++,c0===!0&&bm.beginShadows();const s0=K.state.shadowsArray;Sm.render(s0,Fn,t0),c0===!0&&bm.endShadows(),this.info.autoReset===!0&&this.info.reset();const J0=le.opaque,F0=le.transmissive;if(K.setupLights(),t0.isArrayCamera){const lm=t0.cameras;if(F0.length>0)for(let Bm=0,Nm=lm.length;Bm<Nm;Bm++){const jm=lm[Bm];_y(J0,F0,Fn,jm)}Mm&&Xm.render(Fn);for(let Bm=0,Nm=lm.length;Bm<Nm;Bm++){const jm=lm[Bm];Wv(le,Fn,jm,jm.viewport)}}else F0.length>0&&_y(J0,F0,Fn,t0),Mm&&Xm.render(Fn),Wv(le,Fn,t0);it!==null&&Ut===0&&(X1.updateMultisampleRenderTarget(it),X1.updateRenderTargetMipmap(it)),Fn.isScene===!0&&Fn.onAfterRender(Q,Fn,t0),h1.resetDefaultState(),zt=-1,Zt=null,q.pop(),q.length>0?(K=q[q.length-1],c0===!0&&bm.setGlobalState(Q.clippingPlanes,K.state.camera)):K=null,vt.pop(),vt.length>0?le=vt[vt.length-1]:le=null};function yv(Fn,t0,s0,J0){if(Fn.visible===!1)return;if(Fn.layers.test(t0.layers)){if(Fn.isGroup)s0=Fn.renderOrder;else if(Fn.isLOD)Fn.autoUpdate===!0&&Fn.update(t0);else if(Fn.isLight)K.pushLight(Fn),Fn.castShadow&&K.pushShadow(Fn);else if(Fn.isSprite){if(!Fn.frustumCulled||Dp.intersectsSprite(Fn)){J0&&sm.setFromMatrixPosition(Fn.matrixWorld).applyMatrix4(y0);const lm=wm.update(Fn),Bm=Fn.material;Bm.visible&&le.push(Fn,lm,Bm,s0,sm.z,null)}}else if((Fn.isMesh||Fn.isLine||Fn.isPoints)&&(!Fn.frustumCulled||Dp.intersectsObject(Fn))){const lm=wm.update(Fn),Bm=Fn.material;if(J0&&(Fn.boundingSphere!==void 0?(Fn.boundingSphere===null&&Fn.computeBoundingSphere(),sm.copy(Fn.boundingSphere.center)):(lm.boundingSphere===null&&lm.computeBoundingSphere(),sm.copy(lm.boundingSphere.center)),sm.applyMatrix4(Fn.matrixWorld).applyMatrix4(y0)),Array.isArray(Bm)){const Nm=lm.groups;for(let jm=0,A1=Nm.length;jm<A1;jm++){const L1=Nm[jm],K1=Bm[L1.materialIndex];K1&&K1.visible&&le.push(Fn,lm,K1,s0,sm.z,L1)}}else Bm.visible&&le.push(Fn,lm,Bm,s0,sm.z,null)}}const F0=Fn.children;for(let lm=0,Bm=F0.length;lm<Bm;lm++)yv(F0[lm],t0,s0,J0)}function Wv(Fn,t0,s0,J0){const F0=Fn.opaque,lm=Fn.transmissive,Bm=Fn.transparent;K.setupLightsView(s0),c0===!0&&bm.setGlobalState(Q.clippingPlanes,s0),J0&&w1.viewport(Mn.copy(J0)),F0.length>0&&iy(F0,t0,s0),lm.length>0&&iy(lm,t0,s0),Bm.length>0&&iy(Bm,t0,s0),w1.buffers.depth.setTest(!0),w1.buffers.depth.setMask(!0),w1.buffers.color.setMask(!0),w1.setPolygonOffset(!1)}function _y(Fn,t0,s0,J0){if((s0.isScene===!0?s0.overrideMaterial:null)!==null)return;K.state.transmissionRenderTarget[J0.id]===void 0&&(K.state.transmissionRenderTarget[J0.id]=new In(1,1,{generateMipmaps:!0,type:P1.has("EXT_color_buffer_half_float")||P1.has("EXT_color_buffer_float")?yi:sn,minFilter:Dn,samples:4,stencilBuffer:l,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Xt.workingColorSpace}));const F0=K.state.transmissionRenderTarget[J0.id],lm=J0.viewport||Mn;F0.setSize(lm.z*Q.transmissionResolutionScale,lm.w*Q.transmissionResolutionScale);const Bm=Q.getRenderTarget(),Nm=Q.getActiveCubeFace(),jm=Q.getActiveMipmapLevel();Q.setRenderTarget(F0),Q.getClearColor(sa),qo=Q.getClearAlpha(),qo<1&&Q.setClearColor(16777215,.5),Q.clear(),Mm&&Xm.render(s0);const A1=Q.toneMapping;Q.toneMapping=_n;const L1=J0.viewport;if(J0.viewport!==void 0&&(J0.viewport=void 0),K.setupLightsView(J0),c0===!0&&bm.setGlobalState(Q.clippingPlanes,J0),iy(Fn,s0,J0),X1.updateMultisampleRenderTarget(F0),X1.updateRenderTargetMipmap(F0),P1.has("WEBGL_multisampled_render_to_texture")===!1){let K1=!1;for(let Tg=0,Lg=t0.length;Tg<Lg;Tg++){const lg=t0[Tg],Mg=lg.object,$1=lg.geometry,j1=lg.material,ng=lg.group;if(j1.side===Xe&&Mg.layers.test(J0.layers)){const zv=j1.side;j1.side=Te,j1.needsUpdate=!0,Cy(Mg,s0,J0,$1,j1,ng),j1.side=zv,j1.needsUpdate=!0,K1=!0}}K1===!0&&(X1.updateMultisampleRenderTarget(F0),X1.updateRenderTargetMipmap(F0))}Q.setRenderTarget(Bm,Nm,jm),Q.setClearColor(sa,qo),L1!==void 0&&(J0.viewport=L1),Q.toneMapping=A1}function iy(Fn,t0,s0){const J0=t0.isScene===!0?t0.overrideMaterial:null;for(let F0=0,lm=Fn.length;F0<lm;F0++){const Bm=Fn[F0],Nm=Bm.object,jm=Bm.geometry,A1=Bm.group;let L1=Bm.material;L1.allowOverride===!0&&J0!==null&&(L1=J0),Nm.layers.test(s0.layers)&&Cy(Nm,t0,s0,jm,L1,A1)}}function Cy(Fn,t0,s0,J0,F0,lm){Fn.onBeforeRender(Q,t0,s0,J0,F0,lm),Fn.modelViewMatrix.multiplyMatrices(s0.matrixWorldInverse,Fn.matrixWorld),Fn.normalMatrix.getNormalMatrix(Fn.modelViewMatrix),F0.onBeforeRender(Q,t0,s0,J0,Fn,lm),F0.transparent===!0&&F0.side===Xe&&F0.forceSinglePass===!1?(F0.side=Te,F0.needsUpdate=!0,Q.renderBufferDirect(s0,t0,J0,F0,Fn,lm),F0.side=gn,F0.needsUpdate=!0,Q.renderBufferDirect(s0,t0,J0,F0,Fn,lm),F0.side=Xe):Q.renderBufferDirect(s0,t0,J0,F0,Fn,lm),Fn.onAfterRender(Q,t0,s0,J0,F0,lm)}function $v(Fn,t0,s0){t0.isScene!==!0&&(t0=mm);const J0=g1.get(Fn),F0=K.state.lights,lm=K.state.shadowsArray,Bm=F0.state.version,Nm=$m.getParameters(Fn,F0.state,lm,t0,s0),jm=$m.getProgramCacheKey(Nm);let A1=J0.programs;J0.environment=Fn.isMeshStandardMaterial?t0.environment:null,J0.fog=t0.fog,J0.envMap=(Fn.isMeshStandardMaterial?og:sg).get(Fn.envMap||J0.environment),J0.envMapRotation=J0.environment!==null&&Fn.envMap===null?t0.environmentRotation:Fn.envMapRotation,A1===void 0&&(Fn.addEventListener("dispose",Zm),A1=new Map,J0.programs=A1);let L1=A1.get(jm);if(L1!==void 0){if(J0.currentProgram===L1&&J0.lightsStateVersion===Bm)return wg(Fn,Nm),L1}else Nm.uniforms=$m.getUniforms(Fn),Fn.onBeforeCompile(Nm,Q),L1=$m.acquireProgram(Nm,jm),A1.set(jm,L1),J0.uniforms=Nm.uniforms;const K1=J0.uniforms;return(!Fn.isShaderMaterial&&!Fn.isRawShaderMaterial||Fn.clipping===!0)&&(K1.clippingPlanes=bm.uniform),wg(Fn,Nm),J0.needsLights=zy(Fn),J0.lightsStateVersion=Bm,J0.needsLights&&(K1.ambientLightColor.value=F0.state.ambient,K1.lightProbe.value=F0.state.probe,K1.directionalLights.value=F0.state.directional,K1.directionalLightShadows.value=F0.state.directionalShadow,K1.spotLights.value=F0.state.spot,K1.spotLightShadows.value=F0.state.spotShadow,K1.rectAreaLights.value=F0.state.rectArea,K1.ltc_1.value=F0.state.rectAreaLTC1,K1.ltc_2.value=F0.state.rectAreaLTC2,K1.pointLights.value=F0.state.point,K1.pointLightShadows.value=F0.state.pointShadow,K1.hemisphereLights.value=F0.state.hemi,K1.directionalShadowMap.value=F0.state.directionalShadowMap,K1.directionalShadowMatrix.value=F0.state.directionalShadowMatrix,K1.spotShadowMap.value=F0.state.spotShadowMap,K1.spotLightMatrix.value=F0.state.spotLightMatrix,K1.spotLightMap.value=F0.state.spotLightMap,K1.pointShadowMap.value=F0.state.pointShadowMap,K1.pointShadowMatrix.value=F0.state.pointShadowMatrix),J0.currentProgram=L1,J0.uniformsList=null,L1}function Lv(Fn){if(Fn.uniformsList===null){const t0=Fn.currentProgram.getUniforms();Fn.uniformsList=cr.seqWithValue(t0.seq,Fn.uniforms)}return Fn.uniformsList}function wg(Fn,t0){const s0=g1.get(Fn);s0.outputColorSpace=t0.outputColorSpace,s0.batching=t0.batching,s0.batchingColor=t0.batchingColor,s0.instancing=t0.instancing,s0.instancingColor=t0.instancingColor,s0.instancingMorph=t0.instancingMorph,s0.skinning=t0.skinning,s0.morphTargets=t0.morphTargets,s0.morphNormals=t0.morphNormals,s0.morphColors=t0.morphColors,s0.morphTargetsCount=t0.morphTargetsCount,s0.numClippingPlanes=t0.numClippingPlanes,s0.numIntersection=t0.numClipIntersection,s0.vertexAlphas=t0.vertexAlphas,s0.vertexTangents=t0.vertexTangents,s0.toneMapping=t0.toneMapping}function Ov(Fn,t0,s0,J0,F0){t0.isScene!==!0&&(t0=mm),X1.resetTextureUnits();const lm=t0.fog,Bm=J0.isMeshStandardMaterial?t0.environment:null,Nm=it===null?Q.outputColorSpace:it.isXRRenderTarget===!0?it.texture.colorSpace:ai,jm=(J0.isMeshStandardMaterial?og:sg).get(J0.envMap||Bm),A1=J0.vertexColors===!0&&!!s0.attributes.color&&s0.attributes.color.itemSize===4,L1=!!s0.attributes.tangent&&(!!J0.normalMap||J0.anisotropy>0),K1=!!s0.morphAttributes.position,Tg=!!s0.morphAttributes.normal,Lg=!!s0.morphAttributes.color;let lg=_n;J0.toneMapped&&(it===null||it.isXRRenderTarget===!0)&&(lg=Q.toneMapping);const Mg=s0.morphAttributes.position||s0.morphAttributes.normal||s0.morphAttributes.color,$1=Mg!==void 0?Mg.length:0,j1=g1.get(J0),ng=K.state.lights;if(c0===!0&&(u0===!0||Fn!==Zt)){const Dt=Fn===Zt&&J0.id===zt;bm.setState(J0,Fn,Dt)}let zv=!1;J0.version===j1.__version?(j1.needsLights&&j1.lightsStateVersion!==ng.state.version||j1.outputColorSpace!==Nm||F0.isBatchedMesh&&j1.batching===!1||!F0.isBatchedMesh&&j1.batching===!0||F0.isBatchedMesh&&j1.batchingColor===!0&&F0.colorTexture===null||F0.isBatchedMesh&&j1.batchingColor===!1&&F0.colorTexture!==null||F0.isInstancedMesh&&j1.instancing===!1||!F0.isInstancedMesh&&j1.instancing===!0||F0.isSkinnedMesh&&j1.skinning===!1||!F0.isSkinnedMesh&&j1.skinning===!0||F0.isInstancedMesh&&j1.instancingColor===!0&&F0.instanceColor===null||F0.isInstancedMesh&&j1.instancingColor===!1&&F0.instanceColor!==null||F0.isInstancedMesh&&j1.instancingMorph===!0&&F0.morphTexture===null||F0.isInstancedMesh&&j1.instancingMorph===!1&&F0.morphTexture!==null||j1.envMap!==jm||J0.fog===!0&&j1.fog!==lm||j1.numClippingPlanes!==void 0&&(j1.numClippingPlanes!==bm.numPlanes||j1.numIntersection!==bm.numIntersection)||j1.vertexAlphas!==A1||j1.vertexTangents!==L1||j1.morphTargets!==K1||j1.morphNormals!==Tg||j1.morphColors!==Lg||j1.toneMapping!==lg||j1.morphTargetsCount!==$1)&&(zv=!0):(zv=!0,j1.__version=J0.version);let o0=j1.currentProgram;zv===!0&&(o0=$v(J0,t0,F0));let p=!1,R=!1,W=!1;const J=o0.getUniforms(),Et=j1.uniforms;if(w1.useProgram(o0.program)&&(p=!0,R=!0,W=!0),J0.id!==zt&&(zt=J0.id,R=!0),p||Zt!==Fn){w1.buffers.depth.getReversed()&&Fn.reversedDepth!==!0&&(Fn._reversedDepth=!0,Fn.updateProjectionMatrix()),J.setValue(v0,"projectionMatrix",Fn.projectionMatrix),J.setValue(v0,"viewMatrix",Fn.matrixWorldInverse);const Dt=J.map.cameraPosition;Dt!==void 0&&Dt.setValue(v0,M0.setFromMatrixPosition(Fn.matrixWorld)),ig.logarithmicDepthBuffer&&J.setValue(v0,"logDepthBufFC",2/(Math.log(Fn.far+1)/Math.LN2)),(J0.isMeshPhongMaterial||J0.isMeshToonMaterial||J0.isMeshLambertMaterial||J0.isMeshBasicMaterial||J0.isMeshStandardMaterial||J0.isShaderMaterial)&&J.setValue(v0,"isOrthographic",Fn.isOrthographicCamera===!0),Zt!==Fn&&(Zt=Fn,R=!0,W=!0)}if(F0.isSkinnedMesh){J.setOptional(v0,F0,"bindMatrix"),J.setOptional(v0,F0,"bindMatrixInverse");const Dt=F0.skeleton;Dt&&(Dt.boneTexture===null&&Dt.computeBoneTexture(),J.setValue(v0,"boneTexture",Dt.boneTexture,X1))}F0.isBatchedMesh&&(J.setOptional(v0,F0,"batchingTexture"),J.setValue(v0,"batchingTexture",F0._matricesTexture,X1),J.setOptional(v0,F0,"batchingIdTexture"),J.setValue(v0,"batchingIdTexture",F0._indirectTexture,X1),J.setOptional(v0,F0,"batchingColorTexture"),F0._colorsTexture!==null&&J.setValue(v0,"batchingColorTexture",F0._colorsTexture,X1));const tt=s0.morphAttributes;if((tt.position!==void 0||tt.normal!==void 0||tt.color!==void 0)&&cm.update(F0,s0,o0),(R||j1.receiveShadow!==F0.receiveShadow)&&(j1.receiveShadow=F0.receiveShadow,J.setValue(v0,"receiveShadow",F0.receiveShadow)),J0.isMeshGouraudMaterial&&J0.envMap!==null&&(Et.envMap.value=jm,Et.flipEnvMap.value=jm.isCubeTexture&&jm.isRenderTargetTexture===!1?-1:1),J0.isMeshStandardMaterial&&J0.envMap===null&&t0.environment!==null&&(Et.envMapIntensity.value=t0.environmentIntensity),R&&(J.setValue(v0,"toneMappingExposure",Q.toneMappingExposure),j1.needsLights&&Uv(Et,W),lm&&J0.fog===!0&&Vp.refreshFogUniforms(Et,lm),Vp.refreshMaterialUniforms(Et,J0,Cp,wp,K.state.transmissionRenderTarget[Fn.id]),cr.upload(v0,Lv(j1),Et,X1)),J0.isShaderMaterial&&J0.uniformsNeedUpdate===!0&&(cr.upload(v0,Lv(j1),Et,X1),J0.uniformsNeedUpdate=!1),J0.isSpriteMaterial&&J.setValue(v0,"center",F0.center),J.setValue(v0,"modelViewMatrix",F0.modelViewMatrix),J.setValue(v0,"normalMatrix",F0.normalMatrix),J.setValue(v0,"modelMatrix",F0.matrixWorld),J0.isShaderMaterial||J0.isRawShaderMaterial){const Dt=J0.uniformsGroups;for(let It=0,Mt=Dt.length;It<Mt;It++){const Wt=Dt[It];Sg.update(Wt,o0),Sg.bind(Wt,o0)}}return o0}function Uv(Fn,t0){Fn.ambientLightColor.needsUpdate=t0,Fn.lightProbe.needsUpdate=t0,Fn.directionalLights.needsUpdate=t0,Fn.directionalLightShadows.needsUpdate=t0,Fn.pointLights.needsUpdate=t0,Fn.pointLightShadows.needsUpdate=t0,Fn.spotLights.needsUpdate=t0,Fn.spotLightShadows.needsUpdate=t0,Fn.rectAreaLights.needsUpdate=t0,Fn.hemisphereLights.needsUpdate=t0}function zy(Fn){return Fn.isMeshLambertMaterial||Fn.isMeshToonMaterial||Fn.isMeshPhongMaterial||Fn.isMeshStandardMaterial||Fn.isShadowMaterial||Fn.isShaderMaterial&&Fn.lights===!0}this.getActiveCubeFace=function(){return bt},this.getActiveMipmapLevel=function(){return Ut},this.getRenderTarget=function(){return it},this.setRenderTargetTextures=function(Fn,t0,s0){const J0=g1.get(Fn);J0.__autoAllocateDepthBuffer=Fn.resolveDepthBuffer===!1,J0.__autoAllocateDepthBuffer===!1&&(J0.__useRenderToTexture=!1),g1.get(Fn.texture).__webglTexture=t0,g1.get(Fn.depthTexture).__webglTexture=J0.__autoAllocateDepthBuffer?void 0:s0,J0.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(Fn,t0){const s0=g1.get(Fn);s0.__webglFramebuffer=t0,s0.__useDefaultFramebuffer=t0===void 0};const mg=v0.createFramebuffer();this.setRenderTarget=function(Fn,t0=0,s0=0){it=Fn,bt=t0,Ut=s0;let J0=!0,F0=null,lm=!1,Bm=!1;if(Fn){const Nm=g1.get(Fn);if(Nm.__useDefaultFramebuffer!==void 0)w1.bindFramebuffer(v0.FRAMEBUFFER,null),J0=!1;else if(Nm.__webglFramebuffer===void 0)X1.setupRenderTarget(Fn);else if(Nm.__hasExternalTextures)X1.rebindTextures(Fn,g1.get(Fn.texture).__webglTexture,g1.get(Fn.depthTexture).__webglTexture);else if(Fn.depthBuffer){const L1=Fn.depthTexture;if(Nm.__boundDepthTexture!==L1){if(L1!==null&&g1.has(L1)&&(Fn.width!==L1.image.width||Fn.height!==L1.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");X1.setupDepthRenderbuffer(Fn)}}const jm=Fn.texture;(jm.isData3DTexture||jm.isDataArrayTexture||jm.isCompressedArrayTexture)&&(Bm=!0);const A1=g1.get(Fn).__webglFramebuffer;Fn.isWebGLCubeRenderTarget?(Array.isArray(A1[t0])?F0=A1[t0][s0]:F0=A1[t0],lm=!0):Fn.samples>0&&X1.useMultisampledRTT(Fn)===!1?F0=g1.get(Fn).__webglMultisampledFramebuffer:Array.isArray(A1)?F0=A1[s0]:F0=A1,Mn.copy(Fn.viewport),kp.copy(Fn.scissor),zp=Fn.scissorTest}else Mn.copy(Pp).multiplyScalar(Cp).floor(),kp.copy(d0).multiplyScalar(Cp).floor(),zp=x0;if(s0!==0&&(F0=mg),w1.bindFramebuffer(v0.FRAMEBUFFER,F0)&&J0&&w1.drawBuffers(Fn,F0),w1.viewport(Mn),w1.scissor(kp),w1.setScissorTest(zp),lm){const Nm=g1.get(Fn.texture);v0.framebufferTexture2D(v0.FRAMEBUFFER,v0.COLOR_ATTACHMENT0,v0.TEXTURE_CUBE_MAP_POSITIVE_X+t0,Nm.__webglTexture,s0)}else if(Bm){const Nm=t0;for(let jm=0;jm<Fn.textures.length;jm++){const A1=g1.get(Fn.textures[jm]);v0.framebufferTextureLayer(v0.FRAMEBUFFER,v0.COLOR_ATTACHMENT0+jm,A1.__webglTexture,s0,Nm)}}else if(Fn!==null&&s0!==0){const Nm=g1.get(Fn.texture);v0.framebufferTexture2D(v0.FRAMEBUFFER,v0.COLOR_ATTACHMENT0,v0.TEXTURE_2D,Nm.__webglTexture,s0)}zt=-1},this.readRenderTargetPixels=function(Fn,t0,s0,J0,F0,lm,Bm,Nm=0){if(!(Fn&&Fn.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let jm=g1.get(Fn).__webglFramebuffer;if(Fn.isWebGLCubeRenderTarget&&Bm!==void 0&&(jm=jm[Bm]),jm){w1.bindFramebuffer(v0.FRAMEBUFFER,jm);try{const A1=Fn.textures[Nm],L1=A1.format,K1=A1.type;if(!ig.textureFormatReadable(L1)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!ig.textureTypeReadable(K1)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}t0>=0&&t0<=Fn.width-J0&&s0>=0&&s0<=Fn.height-F0&&(Fn.textures.length>1&&v0.readBuffer(v0.COLOR_ATTACHMENT0+Nm),v0.readPixels(t0,s0,J0,F0,Um.convert(L1),Um.convert(K1),lm))}finally{const A1=it!==null?g1.get(it).__webglFramebuffer:null;w1.bindFramebuffer(v0.FRAMEBUFFER,A1)}}},this.readRenderTargetPixelsAsync=async function(Fn,t0,s0,J0,F0,lm,Bm,Nm=0){if(!(Fn&&Fn.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let jm=g1.get(Fn).__webglFramebuffer;if(Fn.isWebGLCubeRenderTarget&&Bm!==void 0&&(jm=jm[Bm]),jm)if(t0>=0&&t0<=Fn.width-J0&&s0>=0&&s0<=Fn.height-F0){w1.bindFramebuffer(v0.FRAMEBUFFER,jm);const A1=Fn.textures[Nm],L1=A1.format,K1=A1.type;if(!ig.textureFormatReadable(L1))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!ig.textureTypeReadable(K1))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const Tg=v0.createBuffer();v0.bindBuffer(v0.PIXEL_PACK_BUFFER,Tg),v0.bufferData(v0.PIXEL_PACK_BUFFER,lm.byteLength,v0.STREAM_READ),Fn.textures.length>1&&v0.readBuffer(v0.COLOR_ATTACHMENT0+Nm),v0.readPixels(t0,s0,J0,F0,Um.convert(L1),Um.convert(K1),0);const Lg=it!==null?g1.get(it).__webglFramebuffer:null;w1.bindFramebuffer(v0.FRAMEBUFFER,Lg);const lg=v0.fenceSync(v0.SYNC_GPU_COMMANDS_COMPLETE,0);return v0.flush(),await kl(v0,lg,4),v0.bindBuffer(v0.PIXEL_PACK_BUFFER,Tg),v0.getBufferSubData(v0.PIXEL_PACK_BUFFER,0,lm),v0.deleteBuffer(Tg),v0.deleteSync(lg),lm}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(Fn,t0=null,s0=0){const J0=Math.pow(2,-s0),F0=Math.floor(Fn.image.width*J0),lm=Math.floor(Fn.image.height*J0),Bm=t0!==null?t0.x:0,Nm=t0!==null?t0.y:0;X1.setTexture2D(Fn,0),v0.copyTexSubImage2D(v0.TEXTURE_2D,s0,0,0,Bm,Nm,F0,lm),w1.unbindTexture()};const Re=v0.createFramebuffer(),Kp=v0.createFramebuffer();this.copyTextureToTexture=function(Fn,t0,s0=null,J0=null,F0=0,lm=null){lm===null&&(F0!==0?(Ei("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),lm=F0,F0=0):lm=0);let Bm,Nm,jm,A1,L1,K1,Tg,Lg,lg;const Mg=Fn.isCompressedTexture?Fn.mipmaps[lm]:Fn.image;if(s0!==null)Bm=s0.max.x-s0.min.x,Nm=s0.max.y-s0.min.y,jm=s0.isBox3?s0.max.z-s0.min.z:1,A1=s0.min.x,L1=s0.min.y,K1=s0.isBox3?s0.min.z:0;else{const tt=Math.pow(2,-F0);Bm=Math.floor(Mg.width*tt),Nm=Math.floor(Mg.height*tt),Fn.isDataArrayTexture?jm=Mg.depth:Fn.isData3DTexture?jm=Math.floor(Mg.depth*tt):jm=1,A1=0,L1=0,K1=0}J0!==null?(Tg=J0.x,Lg=J0.y,lg=J0.z):(Tg=0,Lg=0,lg=0);const $1=Um.convert(t0.format),j1=Um.convert(t0.type);let ng;t0.isData3DTexture?(X1.setTexture3D(t0,0),ng=v0.TEXTURE_3D):t0.isDataArrayTexture||t0.isCompressedArrayTexture?(X1.setTexture2DArray(t0,0),ng=v0.TEXTURE_2D_ARRAY):(X1.setTexture2D(t0,0),ng=v0.TEXTURE_2D),v0.pixelStorei(v0.UNPACK_FLIP_Y_WEBGL,t0.flipY),v0.pixelStorei(v0.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t0.premultiplyAlpha),v0.pixelStorei(v0.UNPACK_ALIGNMENT,t0.unpackAlignment);const zv=v0.getParameter(v0.UNPACK_ROW_LENGTH),o0=v0.getParameter(v0.UNPACK_IMAGE_HEIGHT),p=v0.getParameter(v0.UNPACK_SKIP_PIXELS),R=v0.getParameter(v0.UNPACK_SKIP_ROWS),W=v0.getParameter(v0.UNPACK_SKIP_IMAGES);v0.pixelStorei(v0.UNPACK_ROW_LENGTH,Mg.width),v0.pixelStorei(v0.UNPACK_IMAGE_HEIGHT,Mg.height),v0.pixelStorei(v0.UNPACK_SKIP_PIXELS,A1),v0.pixelStorei(v0.UNPACK_SKIP_ROWS,L1),v0.pixelStorei(v0.UNPACK_SKIP_IMAGES,K1);const J=Fn.isDataArrayTexture||Fn.isData3DTexture,Et=t0.isDataArrayTexture||t0.isData3DTexture;if(Fn.isDepthTexture){const tt=g1.get(Fn),Dt=g1.get(t0),It=g1.get(tt.__renderTarget),Mt=g1.get(Dt.__renderTarget);w1.bindFramebuffer(v0.READ_FRAMEBUFFER,It.__webglFramebuffer),w1.bindFramebuffer(v0.DRAW_FRAMEBUFFER,Mt.__webglFramebuffer);for(let Wt=0;Wt<jm;Wt++)J&&(v0.framebufferTextureLayer(v0.READ_FRAMEBUFFER,v0.COLOR_ATTACHMENT0,g1.get(Fn).__webglTexture,F0,K1+Wt),v0.framebufferTextureLayer(v0.DRAW_FRAMEBUFFER,v0.COLOR_ATTACHMENT0,g1.get(t0).__webglTexture,lm,lg+Wt)),v0.blitFramebuffer(A1,L1,Bm,Nm,Tg,Lg,Bm,Nm,v0.DEPTH_BUFFER_BIT,v0.NEAREST);w1.bindFramebuffer(v0.READ_FRAMEBUFFER,null),w1.bindFramebuffer(v0.DRAW_FRAMEBUFFER,null)}else if(F0!==0||Fn.isRenderTargetTexture||g1.has(Fn)){const tt=g1.get(Fn),Dt=g1.get(t0);w1.bindFramebuffer(v0.READ_FRAMEBUFFER,Re),w1.bindFramebuffer(v0.DRAW_FRAMEBUFFER,Kp);for(let It=0;It<jm;It++)J?v0.framebufferTextureLayer(v0.READ_FRAMEBUFFER,v0.COLOR_ATTACHMENT0,tt.__webglTexture,F0,K1+It):v0.framebufferTexture2D(v0.READ_FRAMEBUFFER,v0.COLOR_ATTACHMENT0,v0.TEXTURE_2D,tt.__webglTexture,F0),Et?v0.framebufferTextureLayer(v0.DRAW_FRAMEBUFFER,v0.COLOR_ATTACHMENT0,Dt.__webglTexture,lm,lg+It):v0.framebufferTexture2D(v0.DRAW_FRAMEBUFFER,v0.COLOR_ATTACHMENT0,v0.TEXTURE_2D,Dt.__webglTexture,lm),F0!==0?v0.blitFramebuffer(A1,L1,Bm,Nm,Tg,Lg,Bm,Nm,v0.COLOR_BUFFER_BIT,v0.NEAREST):Et?v0.copyTexSubImage3D(ng,lm,Tg,Lg,lg+It,A1,L1,Bm,Nm):v0.copyTexSubImage2D(ng,lm,Tg,Lg,A1,L1,Bm,Nm);w1.bindFramebuffer(v0.READ_FRAMEBUFFER,null),w1.bindFramebuffer(v0.DRAW_FRAMEBUFFER,null)}else Et?Fn.isDataTexture||Fn.isData3DTexture?v0.texSubImage3D(ng,lm,Tg,Lg,lg,Bm,Nm,jm,$1,j1,Mg.data):t0.isCompressedArrayTexture?v0.compressedTexSubImage3D(ng,lm,Tg,Lg,lg,Bm,Nm,jm,$1,Mg.data):v0.texSubImage3D(ng,lm,Tg,Lg,lg,Bm,Nm,jm,$1,j1,Mg):Fn.isDataTexture?v0.texSubImage2D(v0.TEXTURE_2D,lm,Tg,Lg,Bm,Nm,$1,j1,Mg.data):Fn.isCompressedTexture?v0.compressedTexSubImage2D(v0.TEXTURE_2D,lm,Tg,Lg,Mg.width,Mg.height,$1,Mg.data):v0.texSubImage2D(v0.TEXTURE_2D,lm,Tg,Lg,Bm,Nm,$1,j1,Mg);v0.pixelStorei(v0.UNPACK_ROW_LENGTH,zv),v0.pixelStorei(v0.UNPACK_IMAGE_HEIGHT,o0),v0.pixelStorei(v0.UNPACK_SKIP_PIXELS,p),v0.pixelStorei(v0.UNPACK_SKIP_ROWS,R),v0.pixelStorei(v0.UNPACK_SKIP_IMAGES,W),lm===0&&t0.generateMipmaps&&v0.generateMipmap(ng),w1.unbindTexture()},this.initRenderTarget=function(Fn){g1.get(Fn).__webglFramebuffer===void 0&&X1.setupRenderTarget(Fn)},this.initTexture=function(Fn){Fn.isCubeTexture?X1.setTextureCube(Fn,0):Fn.isData3DTexture?X1.setTexture3D(Fn,0):Fn.isDataArrayTexture||Fn.isCompressedArrayTexture?X1.setTexture2DArray(Fn,0):X1.setTexture2D(Fn,0),w1.unbindTexture()},this.resetState=function(){bt=0,Ut=0,it=null,w1.reset(),h1.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return qe}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=Xt._getDrawingBufferColorSpace(e),t.unpackColorSpace=Xt._getUnpackColorSpace()}}const po={type:"change"},ra={type:"start"},Xo={type:"end"},rr=new Qs,mo=new fn,cp=Math.cos(70*Vl.DEG2RAD),ue=new U,ye=2*Math.PI,Qt={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},ns=1e-6;class hp extends Tc{constructor(e,t=null){super(e,t),this.state=Qt.NONE,this.target=new U,this.cursor=new U,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.keyRotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:Qn.ROTATE,MIDDLE:Qn.DOLLY,RIGHT:Qn.PAN},this.touches={ONE:$n.ROTATE,TWO:$n.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this._lastPosition=new U,this._lastQuaternion=new Un,this._lastTargetPosition=new U,this._quat=new Un().setFromUnitVectors(e.up,new U(0,1,0)),this._quatInverse=this._quat.clone().invert(),this._spherical=new za,this._sphericalDelta=new za,this._scale=1,this._panOffset=new U,this._rotateStart=new Bt,this._rotateEnd=new Bt,this._rotateDelta=new Bt,this._panStart=new Bt,this._panEnd=new Bt,this._panDelta=new Bt,this._dollyStart=new Bt,this._dollyEnd=new Bt,this._dollyDelta=new Bt,this._dollyDirection=new U,this._mouse=new Bt,this._performCursorZoom=!1,this._pointers=[],this._pointerPositions={},this._controlActive=!1,this._onPointerMove=dp.bind(this),this._onPointerDown=up.bind(this),this._onPointerUp=fp.bind(this),this._onContextMenu=Mp.bind(this),this._onMouseWheel=_p.bind(this),this._onKeyDown=gp.bind(this),this._onTouchStart=vp.bind(this),this._onTouchMove=xp.bind(this),this._onMouseDown=pp.bind(this),this._onMouseMove=mp.bind(this),this._interceptControlDown=Sp.bind(this),this._interceptControlUp=Ep.bind(this),this.domElement!==null&&this.connect(this.domElement),this.update()}connect(e){super.connect(e),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerUp),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1}),this.domElement.getRootNode().addEventListener("keydown",this._interceptControlDown,{passive:!0,capture:!0}),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerUp),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.stopListenToKeyEvents(),this.domElement.getRootNode().removeEventListener("keydown",this._interceptControlDown,{capture:!0}),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}getPolarAngle(){return this._spherical.phi}getAzimuthalAngle(){return this._spherical.theta}getDistance(){return this.object.position.distanceTo(this.target)}listenToKeyEvents(e){e.addEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=e}stopListenToKeyEvents(){this._domElementKeyEvents!==null&&(this._domElementKeyEvents.removeEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=null)}saveState(){this.target0.copy(this.target),this.position0.copy(this.object.position),this.zoom0=this.object.zoom}reset(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(po),this.update(),this.state=Qt.NONE}update(e=null){const t=this.object.position;ue.copy(t).sub(this.target),ue.applyQuaternion(this._quat),this._spherical.setFromVector3(ue),this.autoRotate&&this.state===Qt.NONE&&this._rotateLeft(this._getAutoRotationAngle(e)),this.enableDamping?(this._spherical.theta+=this._sphericalDelta.theta*this.dampingFactor,this._spherical.phi+=this._sphericalDelta.phi*this.dampingFactor):(this._spherical.theta+=this._sphericalDelta.theta,this._spherical.phi+=this._sphericalDelta.phi);let a=this.minAzimuthAngle,o=this.maxAzimuthAngle;isFinite(a)&&isFinite(o)&&(a<-Math.PI?a+=ye:a>Math.PI&&(a-=ye),o<-Math.PI?o+=ye:o>Math.PI&&(o-=ye),a<=o?this._spherical.theta=Math.max(a,Math.min(o,this._spherical.theta)):this._spherical.theta=this._spherical.theta>(a+o)/2?Math.max(a,this._spherical.theta):Math.min(o,this._spherical.theta)),this._spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this._spherical.phi)),this._spherical.makeSafe(),this.enableDamping===!0?this.target.addScaledVector(this._panOffset,this.dampingFactor):this.target.add(this._panOffset),this.target.sub(this.cursor),this.target.clampLength(this.minTargetRadius,this.maxTargetRadius),this.target.add(this.cursor);let l=!1;if(this.zoomToCursor&&this._performCursorZoom||this.object.isOrthographicCamera)this._spherical.radius=this._clampDistance(this._spherical.radius);else{const s=this._spherical.radius;this._spherical.radius=this._clampDistance(this._spherical.radius*this._scale),l=s!=this._spherical.radius}if(ue.setFromSpherical(this._spherical),ue.applyQuaternion(this._quatInverse),t.copy(this.target).add(ue),this.object.lookAt(this.target),this.enableDamping===!0?(this._sphericalDelta.theta*=1-this.dampingFactor,this._sphericalDelta.phi*=1-this.dampingFactor,this._panOffset.multiplyScalar(1-this.dampingFactor)):(this._sphericalDelta.set(0,0,0),this._panOffset.set(0,0,0)),this.zoomToCursor&&this._performCursorZoom){let s=null;if(this.object.isPerspectiveCamera){const f=ue.length();s=this._clampDistance(f*this._scale);const m=f-s;this.object.position.addScaledVector(this._dollyDirection,m),this.object.updateMatrixWorld(),l=!!m}else if(this.object.isOrthographicCamera){const f=new U(this._mouse.x,this._mouse.y,0);f.unproject(this.object);const m=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),this.object.updateProjectionMatrix(),l=m!==this.object.zoom;const b=new U(this._mouse.x,this._mouse.y,0);b.unproject(this.object),this.object.position.sub(b).add(f),this.object.updateMatrixWorld(),s=ue.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),this.zoomToCursor=!1;s!==null&&(this.screenSpacePanning?this.target.set(0,0,-1).transformDirection(this.object.matrix).multiplyScalar(s).add(this.object.position):(rr.origin.copy(this.object.position),rr.direction.set(0,0,-1).transformDirection(this.object.matrix),Math.abs(this.object.up.dot(rr.direction))<cp?this.object.lookAt(this.target):(mo.setFromNormalAndCoplanarPoint(this.object.up,this.target),rr.intersectPlane(mo,this.target))))}else if(this.object.isOrthographicCamera){const s=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),s!==this.object.zoom&&(this.object.updateProjectionMatrix(),l=!0)}return this._scale=1,this._performCursorZoom=!1,l||this._lastPosition.distanceToSquared(this.object.position)>ns||8*(1-this._lastQuaternion.dot(this.object.quaternion))>ns||this._lastTargetPosition.distanceToSquared(this.target)>ns?(this.dispatchEvent(po),this._lastPosition.copy(this.object.position),this._lastQuaternion.copy(this.object.quaternion),this._lastTargetPosition.copy(this.target),!0):!1}_getAutoRotationAngle(e){return e!==null?ye/60*this.autoRotateSpeed*e:ye/60/60*this.autoRotateSpeed}_getZoomScale(e){const t=Math.abs(e*.01);return Math.pow(.95,this.zoomSpeed*t)}_rotateLeft(e){this._sphericalDelta.theta-=e}_rotateUp(e){this._sphericalDelta.phi-=e}_panLeft(e,t){ue.setFromMatrixColumn(t,0),ue.multiplyScalar(-e),this._panOffset.add(ue)}_panUp(e,t){this.screenSpacePanning===!0?ue.setFromMatrixColumn(t,1):(ue.setFromMatrixColumn(t,0),ue.crossVectors(this.object.up,ue)),ue.multiplyScalar(e),this._panOffset.add(ue)}_pan(e,t){const a=this.domElement;if(this.object.isPerspectiveCamera){const o=this.object.position;ue.copy(o).sub(this.target);let l=ue.length();l*=Math.tan(this.object.fov/2*Math.PI/180),this._panLeft(2*e*l/a.clientHeight,this.object.matrix),this._panUp(2*t*l/a.clientHeight,this.object.matrix)}else this.object.isOrthographicCamera?(this._panLeft(e*(this.object.right-this.object.left)/this.object.zoom/a.clientWidth,this.object.matrix),this._panUp(t*(this.object.top-this.object.bottom)/this.object.zoom/a.clientHeight,this.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),this.enablePan=!1)}_dollyOut(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale/=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_dollyIn(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale*=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_updateZoomParameters(e,t){if(!this.zoomToCursor)return;this._performCursorZoom=!0;const a=this.domElement.getBoundingClientRect(),o=e-a.left,l=t-a.top,s=a.width,f=a.height;this._mouse.x=o/s*2-1,this._mouse.y=-(l/f)*2+1,this._dollyDirection.set(this._mouse.x,this._mouse.y,1).unproject(this.object).sub(this.object.position).normalize()}_clampDistance(e){return Math.max(this.minDistance,Math.min(this.maxDistance,e))}_handleMouseDownRotate(e){this._rotateStart.set(e.clientX,e.clientY)}_handleMouseDownDolly(e){this._updateZoomParameters(e.clientX,e.clientX),this._dollyStart.set(e.clientX,e.clientY)}_handleMouseDownPan(e){this._panStart.set(e.clientX,e.clientY)}_handleMouseMoveRotate(e){this._rotateEnd.set(e.clientX,e.clientY),this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const t=this.domElement;this._rotateLeft(ye*this._rotateDelta.x/t.clientHeight),this._rotateUp(ye*this._rotateDelta.y/t.clientHeight),this._rotateStart.copy(this._rotateEnd),this.update()}_handleMouseMoveDolly(e){this._dollyEnd.set(e.clientX,e.clientY),this._dollyDelta.subVectors(this._dollyEnd,this._dollyStart),this._dollyDelta.y>0?this._dollyOut(this._getZoomScale(this._dollyDelta.y)):this._dollyDelta.y<0&&this._dollyIn(this._getZoomScale(this._dollyDelta.y)),this._dollyStart.copy(this._dollyEnd),this.update()}_handleMouseMovePan(e){this._panEnd.set(e.clientX,e.clientY),this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd),this.update()}_handleMouseWheel(e){this._updateZoomParameters(e.clientX,e.clientY),e.deltaY<0?this._dollyIn(this._getZoomScale(e.deltaY)):e.deltaY>0&&this._dollyOut(this._getZoomScale(e.deltaY)),this.update()}_handleKeyDown(e){let t=!1;switch(e.code){case this.keys.UP:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateUp(ye*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,this.keyPanSpeed),t=!0;break;case this.keys.BOTTOM:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateUp(-ye*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,-this.keyPanSpeed),t=!0;break;case this.keys.LEFT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateLeft(ye*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(this.keyPanSpeed,0),t=!0;break;case this.keys.RIGHT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateLeft(-ye*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(-this.keyPanSpeed,0),t=!0;break}t&&(e.preventDefault(),this.update())}_handleTouchStartRotate(e){if(this._pointers.length===1)this._rotateStart.set(e.pageX,e.pageY);else{const t=this._getSecondPointerPosition(e),a=.5*(e.pageX+t.x),o=.5*(e.pageY+t.y);this._rotateStart.set(a,o)}}_handleTouchStartPan(e){if(this._pointers.length===1)this._panStart.set(e.pageX,e.pageY);else{const t=this._getSecondPointerPosition(e),a=.5*(e.pageX+t.x),o=.5*(e.pageY+t.y);this._panStart.set(a,o)}}_handleTouchStartDolly(e){const t=this._getSecondPointerPosition(e),a=e.pageX-t.x,o=e.pageY-t.y,l=Math.sqrt(a*a+o*o);this._dollyStart.set(0,l)}_handleTouchStartDollyPan(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enablePan&&this._handleTouchStartPan(e)}_handleTouchStartDollyRotate(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enableRotate&&this._handleTouchStartRotate(e)}_handleTouchMoveRotate(e){if(this._pointers.length==1)this._rotateEnd.set(e.pageX,e.pageY);else{const a=this._getSecondPointerPosition(e),o=.5*(e.pageX+a.x),l=.5*(e.pageY+a.y);this._rotateEnd.set(o,l)}this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const t=this.domElement;this._rotateLeft(ye*this._rotateDelta.x/t.clientHeight),this._rotateUp(ye*this._rotateDelta.y/t.clientHeight),this._rotateStart.copy(this._rotateEnd)}_handleTouchMovePan(e){if(this._pointers.length===1)this._panEnd.set(e.pageX,e.pageY);else{const t=this._getSecondPointerPosition(e),a=.5*(e.pageX+t.x),o=.5*(e.pageY+t.y);this._panEnd.set(a,o)}this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd)}_handleTouchMoveDolly(e){const t=this._getSecondPointerPosition(e),a=e.pageX-t.x,o=e.pageY-t.y,l=Math.sqrt(a*a+o*o);this._dollyEnd.set(0,l),this._dollyDelta.set(0,Math.pow(this._dollyEnd.y/this._dollyStart.y,this.zoomSpeed)),this._dollyOut(this._dollyDelta.y),this._dollyStart.copy(this._dollyEnd);const s=(e.pageX+t.x)*.5,f=(e.pageY+t.y)*.5;this._updateZoomParameters(s,f)}_handleTouchMoveDollyPan(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enablePan&&this._handleTouchMovePan(e)}_handleTouchMoveDollyRotate(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enableRotate&&this._handleTouchMoveRotate(e)}_addPointer(e){this._pointers.push(e.pointerId)}_removePointer(e){delete this._pointerPositions[e.pointerId];for(let t=0;t<this._pointers.length;t++)if(this._pointers[t]==e.pointerId){this._pointers.splice(t,1);return}}_isTrackingPointer(e){for(let t=0;t<this._pointers.length;t++)if(this._pointers[t]==e.pointerId)return!0;return!1}_trackPointer(e){let t=this._pointerPositions[e.pointerId];t===void 0&&(t=new Bt,this._pointerPositions[e.pointerId]=t),t.set(e.pageX,e.pageY)}_getSecondPointerPosition(e){const t=e.pointerId===this._pointers[0]?this._pointers[1]:this._pointers[0];return this._pointerPositions[t]}_customWheelEvent(e){const t=e.deltaMode,a={clientX:e.clientX,clientY:e.clientY,deltaY:e.deltaY};switch(t){case 1:a.deltaY*=16;break;case 2:a.deltaY*=100;break}return e.ctrlKey&&!this._controlActive&&(a.deltaY*=10),a}}function up(r){this.enabled!==!1&&(this._pointers.length===0&&(this.domElement.setPointerCapture(r.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerup",this._onPointerUp)),!this._isTrackingPointer(r)&&(this._addPointer(r),r.pointerType==="touch"?this._onTouchStart(r):this._onMouseDown(r)))}function dp(r){this.enabled!==!1&&(r.pointerType==="touch"?this._onTouchMove(r):this._onMouseMove(r))}function fp(r){switch(this._removePointer(r),this._pointers.length){case 0:this.domElement.releasePointerCapture(r.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.dispatchEvent(Xo),this.state=Qt.NONE;break;case 1:const e=this._pointers[0],t=this._pointerPositions[e];this._onTouchStart({pointerId:e,pageX:t.x,pageY:t.y});break}}function pp(r){let e;switch(r.button){case 0:e=this.mouseButtons.LEFT;break;case 1:e=this.mouseButtons.MIDDLE;break;case 2:e=this.mouseButtons.RIGHT;break;default:e=-1}switch(e){case Qn.DOLLY:if(this.enableZoom===!1)return;this._handleMouseDownDolly(r),this.state=Qt.DOLLY;break;case Qn.ROTATE:if(r.ctrlKey||r.metaKey||r.shiftKey){if(this.enablePan===!1)return;this._handleMouseDownPan(r),this.state=Qt.PAN}else{if(this.enableRotate===!1)return;this._handleMouseDownRotate(r),this.state=Qt.ROTATE}break;case Qn.PAN:if(r.ctrlKey||r.metaKey||r.shiftKey){if(this.enableRotate===!1)return;this._handleMouseDownRotate(r),this.state=Qt.ROTATE}else{if(this.enablePan===!1)return;this._handleMouseDownPan(r),this.state=Qt.PAN}break;default:this.state=Qt.NONE}this.state!==Qt.NONE&&this.dispatchEvent(ra)}function mp(r){switch(this.state){case Qt.ROTATE:if(this.enableRotate===!1)return;this._handleMouseMoveRotate(r);break;case Qt.DOLLY:if(this.enableZoom===!1)return;this._handleMouseMoveDolly(r);break;case Qt.PAN:if(this.enablePan===!1)return;this._handleMouseMovePan(r);break}}function _p(r){this.enabled===!1||this.enableZoom===!1||this.state!==Qt.NONE||(r.preventDefault(),this.dispatchEvent(ra),this._handleMouseWheel(this._customWheelEvent(r)),this.dispatchEvent(Xo))}function gp(r){this.enabled!==!1&&this._handleKeyDown(r)}function vp(r){switch(this._trackPointer(r),this._pointers.length){case 1:switch(this.touches.ONE){case $n.ROTATE:if(this.enableRotate===!1)return;this._handleTouchStartRotate(r),this.state=Qt.TOUCH_ROTATE;break;case $n.PAN:if(this.enablePan===!1)return;this._handleTouchStartPan(r),this.state=Qt.TOUCH_PAN;break;default:this.state=Qt.NONE}break;case 2:switch(this.touches.TWO){case $n.DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchStartDollyPan(r),this.state=Qt.TOUCH_DOLLY_PAN;break;case $n.DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchStartDollyRotate(r),this.state=Qt.TOUCH_DOLLY_ROTATE;break;default:this.state=Qt.NONE}break;default:this.state=Qt.NONE}this.state!==Qt.NONE&&this.dispatchEvent(ra)}function xp(r){switch(this._trackPointer(r),this.state){case Qt.TOUCH_ROTATE:if(this.enableRotate===!1)return;this._handleTouchMoveRotate(r),this.update();break;case Qt.TOUCH_PAN:if(this.enablePan===!1)return;this._handleTouchMovePan(r),this.update();break;case Qt.TOUCH_DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchMoveDollyPan(r),this.update();break;case Qt.TOUCH_DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchMoveDollyRotate(r),this.update();break;default:this.state=Qt.NONE}}function Mp(r){this.enabled!==!1&&r.preventDefault()}function Sp(r){r.key==="Control"&&(this._controlActive=!0,this.domElement.getRootNode().addEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}function Ep(r){r.key==="Control"&&(this._controlActive=!1,this.domElement.getRootNode().removeEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}var yp=function(r,e){return e=typeof e<"u"?e:!1,r=r.replace(/GAMMA/gi,"&Gamma;"),r=r.replace(/DELTA/gi,"&Delta;"),r=r.replace(/SIGMA/gi,"&Sigma;"),r=r.replace(/LAMBDA/gi,"&Lambda;"),r=r.replace(/\-/gi,"&mdash;"),e?r=r.replace(/_(.)/gi,function(t,a,o,l){return'<tspan baseline-shift="sub">'+a+"</tspan>"}):r=r.replace(/_(.)/gi,function(t,a,o,l){return"<sub>"+a+"</sub>"}),r},Tp=function(a,o,t){var a=a,o=o;t==null&&(t={});var l=t.showAxes??!0,s=t.showBVectors??!0,f=t.showPathpoints??!1,m=t.disableInteractOverlay??!1,b=t.cameraState??null,E=!1,M=[],I=new ni({color:13975119,opacity:.15,transparent:!0,side:Xe}),V=new fr({color:3355443,opacity:1,transparent:!1,linewidth:1}),Z=new fr({color:285405,opacity:1,transparent:!1}),ee=new ni({color:3311805,opacity:1,transparent:!1}),le=new ni({color:8925746,opacity:1,transparent:!1}),K=null,vt=null,q=null;this.resizeRenderer=function(){if(a){var it=window.devicePixelRatio||1,zt=a.offsetWidth,Zt=a.offsetHeight;q&&(vt.aspect=zt/Zt,vt.updateProjectionMatrix(),q.setSize(zt*it,Zt*it),q.domElement.style.width=zt+"px",q.domElement.style.height=Zt+"px",q.domElement.width=zt*it,q.domElement.height=Zt*it,Ut())}},this.getCameraState=function(){return!vt||!this.controls?null:{position:vt.position.clone(),target:this.controls.target.clone()}};var Q=function(it,zt){zt=typeof zt<"u"?zt:"#000000";var Zt;{var Zt=document.createElement("div");Zt.style.position="absolute",Zt.style.fontFamily="'Helvetica Neue', Helvetica, Arial, sans-serif",Zt.style.color=zt,Zt.style.width=100,Zt.style.height=100,Zt.style.fontSize="12px",Zt.innerHTML=it,Zt.style.top="-100px",Zt.style.left="-100px",Zt.style.userSelect="none",Zt.style.userSelect="none",Zt.style.webkitUserSelect="none",Zt.style.MozUserSelect="none",Zt.setAttribute("unselectable","on"),Zt.style.pointerEvents="none"}return Zt},wt=function(it){var zt=document.createElement("div");zt.classList.add(it),zt.style.position="absolute",zt.style.fontFamily="'Helvetica Neue', Helvetica, Arial, sans-serif",zt.style.zIndex=1,zt.style.width="100%",zt.style.height="100%",zt.style.display="table",zt.style.top="0px",zt.style.left="0px",zt.style.textAlign="center",zt.style.verticalAlign="middle",zt.style.userSelect="none",zt.style.userSelect="none",zt.style.webkitUserSelect="none",zt.style.MozUserSelect="none",zt.setAttribute("unselectable","on");var Zt=document.createElement("span");return Zt.innerHTML="Double click to toggle interaction",Zt.style.color="rgb(80, 80, 80)",Zt.style.fontSize="24px",Zt.style.fontWeight="bold",Zt.style.backgroundColor="rgba(230,230,230,0.5)",Zt.style.display="table-cell",Zt.style.verticalAlign="middle",Zt.style.lineHeight="normal",Zt.style.userSelect="none",Zt.style.userSelect="none",Zt.style.webkitUserSelect="none",Zt.style.MozUserSelect="none",Zt.setAttribute("unselectable","on"),Zt.onmouseover=function(){this.style.backgroundColor="rgba(230,230,230,0.5)",this.innerHTML="Double click to toggle interaction"},Zt.onmouseleave=function(){this.style.backgroundColor="rgba(255,255,255,0.01)",this.innerHTML=""},zt.appendChild(Zt),zt};this.loadBZ=function(it){if(it==null||Object.keys(it).length===0||a==null||a.id==""||o==null)return;let zt=it.b1,Zt=it.b2,Mn=it.b3,kp=it.faces_data,zp=it.kpoints,sa=it.path,qo=it.explicit_kpoints_abs;var ae=window.devicePixelRatio||1;o.innerHTML="";for(var wp=a;wp.firstChild;)wp.removeChild(wp.firstChild);M=[],K=new pc;let Cp=wp.offsetWidth,Kt=wp.offsetHeight;vt=new Fe(45,Cp/Kt,.01,1e3),vt.position.z=3,q=new lp({alpha:!0,preserveDrawingBuffer:!0}),q.setClearColor(16777215,0),q.setSize(Cp*ae,Kt*ae),q.domElement.style.width=Cp+"px",q.domElement.style.height=Kt+"px",q.domElement.width=Cp*ae,q.domElement.height=Kt*ae,wp.appendChild(q.domElement);let h0=new hp(vt,q.domElement);this.controls=h0,this.camera=vt,b&&(vt.position.copy(b.position),h0.target.copy(b.target),h0.update()),h0.addEventListener("change",Ut),h0.enableDamping=!0,h0.dampingFactor=.25,h0.enableZoom=!0;let Pp=Math.sqrt(Math.max(Math.pow(zt[0],2)+Math.pow(zt[1],2)+Math.pow(zt[2],2),Math.pow(Zt[0],2)+Math.pow(Zt[1],2)+Math.pow(Zt[2],2),Math.pow(Mn[0],2)+Math.pow(Mn[1],2)+Math.pow(Mn[2],2)));var d0=Pp*1.5;if(vt.position.z=Pp*3,l){var x0=[[new U(1,0,0),'<span style="font-style: italic">x</span>'],[new U(0,1,0),'<span style="font-style: italic">y</span>'],[new U(0,0,1),'<span style="font-style: italic">z</span>']];x0.forEach(function(sg){var og=sg[0],R0=sg[1],Xp=new U(0,0,0),wm=5592405,$m=new Va(og,Xp,d0,wm,d0/10,d0/20);K.add($m);var Vp="#555555",r0=Q(R0,Vp),B0=og.clone();B0.sub(Xp),B0.multiplyScalar(d0),wp.appendChild(r0),M.push([B0,r0])})}var Dp=[[zt,'<span style="font-weight: bold">b</span><sub>1</sub>'],[Zt,'<span style="font-weight: bold">b</span><sub>2</sub>'],[Mn,'<span style="font-weight: bold">b</span><sub>3</sub>']],Dp;if(s||(Dp=[]),Dp.forEach(function(sg){var og=sg[0],R0=sg[1],Xp=Math.sqrt(Math.pow(og[0],2)+Math.pow(og[1],2)+Math.pow(og[2],2)),wm=new U(og[0]/Xp,og[1]/Xp,og[2]/Xp),$m=new U(0,0,0),Vp=0,r0=new Va(wm,$m,length=Xp,Vp=Vp,Xp/10,Xp/20);K.add(r0);var B0=Q(R0=R0),bm=wm.clone();bm.sub($m),bm.multiplyScalar(Xp),wp.appendChild(B0),M.push([bm,B0])}),kp){var c0=new Ae,u0=[];kp.triangles_vertices.forEach(function(sg){u0.push(sg[0],sg[1],sg[2])}),c0.setAttribute("position",new me(u0,3));var y0=[];kp.triangles.forEach(function(sg){y0.push(sg[0],sg[1],sg[2])}),c0.setIndex(y0);var M0=new De(c0,I),sm=new xc(M0.geometry),mm=new vc(sm,V);K.add(M0),K.add(mm)}if(zp)for(var Mm in zp){let sg=zp[Mm],og=.02*Pp;var v1=new _r(og,16,16),v0=new De(v1,ee);v0.translateX(sg[0]),v0.translateY(sg[1]),v0.translateZ(sg[2]),K.add(v0),Mm=yp(Mm,E);var D1=Q(Mm);wp.appendChild(D1),M.push([new U(sg[0],sg[1],sg[2]),D1])}if(sa&&zp&&sa.forEach(function(sg){var og=sg[0],R0=sg[1],Xp=zp[og],wm=zp[R0],$m=[];$m.push(new U(Xp[0],Xp[1],Xp[2])),$m.push(new U(wm[0],wm[1],wm[2]));var Vp=new Ae().setFromPoints($m),r0=new ta(Vp,Z);r0.material.linewidth=4,K.add(r0)}),f&&qo)for(var P1 in qo){var ig=qo[P1],w1=.01*Pp,v1=new _r(w1,16,16),v0=new De(v1,le);v0.translateX(ig[0]),v0.translateY(ig[1]),v0.translateZ(ig[2]),K.add(v0)}Ut();var o1=function(sg,og){if(typeof og>"u")var R0=!h0.enabled;else var R0=og;h0.enabled=R0;for(var Xp=wp.getElementsByClassName("BZDoubleClickText"),wm=0;wm<Xp.length;wm++)wp.removeChild(Xp[wm]);R0||wp.appendChild(wt("BZDoubleClickText"))};m||(o1(),wp.addEventListener("dblclick",o1));var g1,X1=!1;wp.addEventListener("touchend",function(sg){if(typeof g1<"u"&&clearTimeout(g1),X1)X1=!1,sg.preventDefault(),o1();else{if(sg.targetTouches.length!=0){typeof g1<"u"&&(clearTimeout(g1),X1=!1);return}X1=!0,g1=setTimeout(function(){X1=!1},500)}}),wp.addEventListener("touchcancel",function(sg){typeof g1<"u"&&(clearTimeout(g1),X1=!1)}),wp.addEventListener("touchmove",function(sg){typeof g1<"u"&&(clearTimeout(g1),X1=!1)})};function bt(it,zt){var Zt=it.clone().project(zt),Mn=window.devicePixelRatio||1,kp,zp;{var kp=.5*q.domElement.width/Mn,zp=.5*q.domElement.height/Mn;Zt.x=Zt.x*kp+kp,Zt.y=-(Zt.y*zp)+zp}return{left:Zt.x,top:Zt.y}}function Ut(){q.render(K,vt),M.forEach(function(it){var zt=it[0],Zt=it[1],Mn=bt(zt,vt);Zt.style.top=Mn.top+"px",Zt.style.left=Mn.left+"px"})}};function bp(r){let e="";for(;e.length<r;)e+=Math.random().toString(36).substring(2);return e.substring(0,r)}function Ap(r,e,t,a){let o=document.createElement("div");o.className="bz-main-container";let l=bp(6),s=document.createElement("div");s.id=`canvas-${l}`,s.className="bz-canvas3d";let f=document.createElement("div");f.id=`info-${l}`,o.appendChild(s),o.appendChild(f),r.appendChild(o);let m=new Tp(s,f,t);return window.addEventListener("resize",m.resizeRenderer),requestAnimationFrame(()=>{m.loadBZ(e),a&&a(m)}),m}const labelStyle="ae:flex ae:items-center ae:gap-1 ae:text-xs";function BZControls({showPathpoints:r,setShowPathpoints:e,showBVectors:t,setShowBVectors:a,showAxes:o,setShowAxes:l}){const[s,f]=reactExports.useState(!1),m=reactExports.useRef(null);return reactExports.useEffect(()=>{function b(E){m.current&&!m.current.contains(E.target)&&f(!1)}return document.addEventListener("click",b),()=>document.removeEventListener("click",b)},[]),reactExports.useEffect(()=>{function b(E){E.key==="Escape"&&f(!1)}return document.addEventListener("click",b),()=>document.removeEventListener("click",b)},[]),jsxRuntimeExports.jsxs("div",{ref:m,className:`ae:absolute ae:top-1 ae:right-1 ae:z-10 ae:overflow-hidden ae:rounded-md ae:bg-slate-50  ae:transition-all ae:duration-300 ${s?"ae:w-22":"ae:w-6"}`,children:[jsxRuntimeExports.jsx("button",{onClick:()=>f(b=>!b),className:"ae:text-xl ae:w-full ae:flex ae:justify-end ae:rounded-md ae:hover:cursor-pointer ae:hover:bg-slate-100","aria-expanded":s,children:"⚙️"}),s&&jsxRuntimeExports.jsxs("div",{className:"ae:flex ae:flex-col ae:gap-1 ae:pb-2 ae:pl-2",children:[jsxRuntimeExports.jsxs("label",{className:`${labelStyle}`,children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:r,onChange:b=>e(b.target.checked)}),"Kpoints"]}),jsxRuntimeExports.jsxs("label",{className:`${labelStyle}`,children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:o,onChange:b=>l(b.target.checked)}),"Axes"]}),jsxRuntimeExports.jsxs("label",{className:`${labelStyle}`,children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:t,onChange:b=>a(b.target.checked)}),"Bvectors"]})]})]})}function useContainerBucket(r,e=100){const[t,a]=reactExports.useState(null);return reactExports.useEffect(()=>{if(!r.current)return;const o=r.current,l=()=>{const{width:f}=o.getBoundingClientRect(),m=Math.floor(f/e);a(b=>b!==m?m:b)};l();const s=new ResizeObserver(()=>{l()});return s.observe(o),()=>s.disconnect()},[r,e]),t}function BZVisualizer({data:r}){const e=reactExports.useRef(null),t=reactExports.useRef(null),a=reactExports.useRef(null),[o,l]=reactExports.useState(!1),[s,f]=reactExports.useState(!0),[m,b]=reactExports.useState(!0),E=useContainerBucket(e,50);return reactExports.useEffect(()=>{if(!e.current)return;const M=setTimeout(()=>{t.current?.getCameraState&&(a.current=t.current.getCameraState()),e.current.innerHTML="",t.current=Ap(e.current,r,{showAxes:m,showBVectors:s,showPathpoints:o,disableInteractOverlay:!0},I=>{a.current&&(I.camera.position.copy(a.current.position),I.controls.target.copy(a.current.target),I.controls.update())})},100);return()=>clearTimeout(M)},[r,m,s,o,E]),jsxRuntimeExports.jsxs("div",{className:"ae:relative ae:w-full",style:{height:"400px"},children:[jsxRuntimeExports.jsx(BZControls,{showPathpoints:o,setShowPathpoints:l,showBVectors:s,setShowBVectors:f,showAxes:m,setShowAxes:b}),jsxRuntimeExports.jsx("div",{ref:e,style:{width:"100%",height:"100%"}})]})}const RoundVals=(r,e=4,t=[])=>r.map(a=>Object.fromEntries(Object.entries(a).map(([o,l])=>[o,t.includes(o)?l:typeof l=="number"?l.toFixed(e):l])));function reciprocalLattice(r){if(!r||r.length<3)return[[1,0,0],[0,1,0],[0,0,1]];const[e,t,a]=r,o=(E,M)=>[E[1]*M[2]-E[2]*M[1],E[2]*M[0]-E[0]*M[2],E[0]*M[1]-E[1]*M[0]],s=((E,M)=>E[0]*M[0]+E[1]*M[1]+E[2]*M[2])(e,o(t,a)),f=o(t,a).map(E=>2*Math.PI*E/s),m=o(a,e).map(E=>2*Math.PI*E/s),b=o(e,t).map(E=>2*Math.PI*E/s);return[f,m,b]}const Columns={recipColumns:["","x","y","z"],cellColumns:["x","y","z"],meshOffsetCols:["","b₁","b₂","b₃"],pbcCols:["Axis","Value"],kpointColumns:["Kx","Ky","Kz"],kpointColumnsR:["Kx","Ky","Kz"]};function KpointsDataVisualiser({nodeData:r={}}){const e=reactExports.useMemo(()=>r.attributes||{},[r.attributes]),t=reactExports.useMemo(()=>r.derived_properties||{},[r.derived_properties]),a=!!e?.cell||!!t,o=e?.labels&&e?.label_numbers?e.labels.join(" → ").slice(0,20):null,[l,s,f]=reactExports.useMemo(()=>e.cell?reciprocalLattice(e.cell):[null,null,null],[e.cell]),m=reactExports.useMemo(()=>e.cell?{...t,b1:l,b2:s,b3:f,kpoints:t.labelled_kpoints_abs,path:t.labelled_path}:null,[l,s,f,t,e.cell]),b=reactExports.useMemo(()=>!l||!s||!f?[]:RoundVals([{"":"b₁",x:l[0],y:l[1],z:l[2]},{"":"b₂",x:s[0],y:s[1],z:s[2]},{"":"b₃",x:f[0],y:f[1],z:f[2]}],4),[l,s,f]),E=reactExports.useMemo(()=>RoundVals((e.cell||[]).map(le=>({x:le[0]??0,y:le[1]??0,z:le[2]??0}))),[e.cell]),M=reactExports.useMemo(()=>{const[le,K,vt]=e.mesh??["N/A","N/A","N/A"],[q,Q,wt]=Array.isArray(e.offset?.[0])?e.offset[0]:e.offset??[0,0,0];return[{"":"Mesh","b₁":le,"b₂":K,"b₃":vt},{"":"Offset","b₁":q??0,"b₂":Q??0,"b₃":wt??0}]},[e.mesh,e.offset]),I=reactExports.useMemo(()=>[{Axis:"b₁",Value:String(e.pbc1)},{Axis:"b₂",Value:String(e.pbc2)},{Axis:"b₃",Value:String(e.pbc3)}],[e.pbc1,e.pbc2,e.pbc3]),V=reactExports.useMemo(()=>RoundVals((t.explicit_kpoints_abs||[]).map(le=>({Kx:le[0]??0,Ky:le[1]??0,Kz:le[2]??0})),5),[t.explicit_kpoints_abs]),Z=reactExports.useMemo(()=>RoundVals((t.explicit_kpoints_rel||[]).map(le=>({Kx:le[0]??0,Ky:le[1]??0,Kz:le[2]??0})),5),[t.explicit_kpoints_rel]),ee=reactExports.useMemo(()=>[{title:"Reciprocal cell vectors (1/Å)",columns:Columns.recipColumns,data:b},{title:"Cell",columns:Columns.cellColumns,data:E},{title:"Kpoints mesh and offset",columns:Columns.meshOffsetCols,data:M},{title:"PBC Flags",columns:Columns.pbcCols,data:I},{title:"Kpoints (1/Å)",columns:Columns.kpointColumns,data:V},{title:"Kpoints (scaled units)",columns:Columns.kpointColumnsR,data:Z}],[b,E,M,I,V,Z]);return a?jsxRuntimeExports.jsxs("div",{className:"ae:w-full ae:mx-auto ae:p-4 ae:space-y-2",children:[e?.cell&&m&&jsxRuntimeExports.jsx(CardContainer,{header:`Brillouin Zone${o?` (${o})`:""}`,className:"ae:px-1.5! ae:py-2!",childrenClassName:"ae:!p-0",children:jsxRuntimeExports.jsx("div",{className:"ae:w-full",children:jsxRuntimeExports.jsx(BZVisualizer,{data:m})})}),jsxRuntimeExports.jsx("div",{className:"ae:@container",children:jsxRuntimeExports.jsx("div",{className:"ae:grid ae:grid-cols-1 ae:@xl:grid-cols-2",children:ee.map(({title:le,columns:K,data:vt})=>jsxRuntimeExports.jsx(DataTable,{title:le,columns:K,data:vt,sortableCols:!1},le))})})]}):jsxRuntimeExports.jsx("div",{children:"No attributes available"})}const ControlBox=({viewerParams:r,onViewerParamChange:e,onViewerEvent:t})=>{const a=(s,f)=>{let m=r.supercell;m[s]=parseInt(f),e("supercell",m)},o=s=>{e(s,!r[s])},l=s=>{t("camera",s)};return jsxRuntimeExports.jsxs("div",{className:"control-box",children:[jsxRuntimeExports.jsxs("div",{className:"control-box-row",children:[jsxRuntimeExports.jsxs("div",{className:"supercell-container",children:[jsxRuntimeExports.jsx("label",{children:"Supercell: "}),jsxRuntimeExports.jsx("div",{style:{display:"flex"},children:[0,1,2].map(s=>jsxRuntimeExports.jsx("input",{className:"supercell-input",type:"number",min:"1",max:"99",value:r.supercell[s],onChange:f=>a(s,f.target.value)},s))})]}),jsxRuntimeExports.jsxs("div",{className:"camera-controls",children:[jsxRuntimeExports.jsx("label",{children:"Camera: "}),jsxRuntimeExports.jsx("button",{className:"camera-button",onClick:()=>l("x"),children:"x"}),jsxRuntimeExports.jsx("button",{className:"camera-button",onClick:()=>l("y"),children:"y"}),jsxRuntimeExports.jsx("button",{className:"camera-button",onClick:()=>l("z"),children:"z"})]})]}),jsxRuntimeExports.jsxs("div",{className:"control-box-row",style:{display:"flex"},children:[jsxRuntimeExports.jsxs("label",{className:"option-checkbox",children:[jsxRuntimeExports.jsx("input",{className:"control-box-input",type:"checkbox",checked:r.bonds,onChange:()=>o("bonds")}),jsxRuntimeExports.jsx("span",{children:"Bonds"})]}),jsxRuntimeExports.jsxs("label",{className:"option-checkbox",children:[jsxRuntimeExports.jsx("input",{className:"control-box-input",type:"checkbox",checked:r.packedCell,onChange:()=>o("packedCell")}),jsxRuntimeExports.jsx("span",{children:"Packed cell"})]}),jsxRuntimeExports.jsxs("label",{className:"option-checkbox",children:[jsxRuntimeExports.jsx("input",{className:"control-box-input",type:"checkbox",checked:r.atomLabels,onChange:()=>o("atomLabels")}),jsxRuntimeExports.jsx("span",{children:"Atom labels"})]}),jsxRuntimeExports.jsxs("label",{className:"option-checkbox",children:[jsxRuntimeExports.jsx("input",{className:"control-box-input",type:"checkbox",checked:r.spaceFilling,onChange:()=>o("vdwRadius")}),jsxRuntimeExports.jsx("span",{children:"vdW radius"})]})]})]})};var _3DmolMin={exports:{}};/*! For license information please see 3Dmol-min.js.LICENSE.txt */var hasRequired_3DmolMin;function require_3DmolMin(){return hasRequired_3DmolMin||(hasRequired_3DmolMin=1,(function(module,exports){var factory;factory=()=>(()=>{var __webpack_modules__={3:(r,e,t)=>{var a=t(663),o=t(981),l=t(972),s=t(681),f=t(834),m=t(746),b=t(670),E=Object.prototype.toString;function M(V){if(!(this instanceof M))return new M(V);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},V||{});var Z=this.options;Z.raw&&Z.windowBits>=0&&Z.windowBits<16&&(Z.windowBits=-Z.windowBits,Z.windowBits===0&&(Z.windowBits=-15)),!(Z.windowBits>=0&&Z.windowBits<16)||V&&V.windowBits||(Z.windowBits+=32),Z.windowBits>15&&Z.windowBits<48&&(15&Z.windowBits||(Z.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new m,this.strm.avail_out=0;var ee=a.inflateInit2(this.strm,Z.windowBits);if(ee!==s.Z_OK)throw new Error(f[ee]);if(this.header=new b,a.inflateGetHeader(this.strm,this.header),Z.dictionary&&(typeof Z.dictionary=="string"?Z.dictionary=l.string2buf(Z.dictionary):E.call(Z.dictionary)==="[object ArrayBuffer]"&&(Z.dictionary=new Uint8Array(Z.dictionary)),Z.raw&&(ee=a.inflateSetDictionary(this.strm,Z.dictionary))!==s.Z_OK))throw new Error(f[ee])}function I(V,Z){var ee=new M(Z);if(ee.push(V,!0),ee.err)throw ee.msg||f[ee.err];return ee.result}M.prototype.push=function(V,Z){var ee,le,K,vt,q,Q=this.strm,wt=this.options.chunkSize,bt=this.options.dictionary,Ut=!1;if(this.ended)return!1;le=Z===~~Z?Z:Z===!0?s.Z_FINISH:s.Z_NO_FLUSH,typeof V=="string"?Q.input=l.binstring2buf(V):E.call(V)==="[object ArrayBuffer]"?Q.input=new Uint8Array(V):Q.input=V,Q.next_in=0,Q.avail_in=Q.input.length;do{if(Q.avail_out===0&&(Q.output=new o.Buf8(wt),Q.next_out=0,Q.avail_out=wt),(ee=a.inflate(Q,s.Z_NO_FLUSH))===s.Z_NEED_DICT&&bt&&(ee=a.inflateSetDictionary(this.strm,bt)),ee===s.Z_BUF_ERROR&&Ut===!0&&(ee=s.Z_OK,Ut=!1),ee!==s.Z_STREAM_END&&ee!==s.Z_OK)return this.onEnd(ee),this.ended=!0,!1;Q.next_out&&(Q.avail_out!==0&&ee!==s.Z_STREAM_END&&(Q.avail_in!==0||le!==s.Z_FINISH&&le!==s.Z_SYNC_FLUSH)||(this.options.to==="string"?(K=l.utf8border(Q.output,Q.next_out),vt=Q.next_out-K,q=l.buf2string(Q.output,K),Q.next_out=vt,Q.avail_out=wt-vt,vt&&o.arraySet(Q.output,Q.output,K,vt,0),this.onData(q)):this.onData(o.shrinkBuf(Q.output,Q.next_out)))),Q.avail_in===0&&Q.avail_out===0&&(Ut=!0)}while((Q.avail_in>0||Q.avail_out===0)&&ee!==s.Z_STREAM_END);return ee===s.Z_STREAM_END&&(le=s.Z_FINISH),le===s.Z_FINISH?(ee=a.inflateEnd(this.strm),this.onEnd(ee),this.ended=!0,ee===s.Z_OK):le!==s.Z_SYNC_FLUSH||(this.onEnd(s.Z_OK),Q.avail_out=0,!0)},M.prototype.onData=function(V){this.chunks.push(V)},M.prototype.onEnd=function(V){V===s.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=V,this.msg=this.strm.msg},e.Inflate=M,e.inflate=I,e.inflateRaw=function(V,Z){return(Z=Z||{}).raw=!0,I(V,Z)},e.ungzip=I},16:(r,e,t)=>{t.r(e),t.d(e,{CAP:()=>a,CC:()=>b.CC,CONTEXTS_PER_VIEWPORT:()=>jm,Color:()=>b.Color,CustomLinear:()=>E.CustomLinear,Cylinder:()=>f.Cylinder,GLDraw:()=>o,GLModel:()=>wg,GLShape:()=>s0,GLViewer:()=>L1,GLVolumetricRender:()=>Nm,Gradient:()=>E.Gradient,GradientType:()=>E.GradientType,Label:()=>Bm,LabelCount:()=>F0,MarchingCube:()=>Re,MarchingCubeInitializer:()=>mg,Matrix3:()=>m.Matrix3,Matrix4:()=>m.Matrix4,Parsers:()=>Um,PausableTimer:()=>M.PausableTimer,PointGrid:()=>Kp,ProteinSurface:()=>Fn,Quaternion:()=>m.Quaternion,ROYGB:()=>E.ROYGB,RWB:()=>E.RWB,Ray:()=>m.Ray,Sinebow:()=>E.Sinebow,Sphere:()=>f.Sphere,SurfaceType:()=>Ov,Triangle:()=>f.Triangle,Vector2:()=>m.Vector2,Vector3:()=>m.Vector3,VolumeData:()=>t0.VolumeData,adjustVolumeStyle:()=>M.adjustVolumeStyle,applyPartialCharges:()=>zv,autoinit:()=>lg,autoload:()=>j1,base64ToArray:()=>M.base64ToArray,bondLength:()=>M0.bondLength,builtinColorSchemes:()=>b.builtinColorSchemes,builtinGradients:()=>E.builtinGradients,chains:()=>b.chains,clamp:()=>m.clamp,conversionMatrix3:()=>m.conversionMatrix3,createStereoViewer:()=>Lg,createViewer:()=>K1,createViewerGrid:()=>Tg,deepCopy:()=>M.deepCopy,degToRad:()=>m.degToRad,download:()=>M.download,drawCartoon:()=>kp,elementColors:()=>b.elementColors,extend:()=>M.extend,get:()=>M.get,getAtomProperty:()=>M.getAtomProperty,getColorFromStyle:()=>M.getColorFromStyle,getElement:()=>M.getElement,getExtent:()=>M.getExtent,getGradient:()=>E.getGradient,getPropertyRange:()=>M.getPropertyRange,getbin:()=>M.getbin,htmlColors:()=>b.htmlColors,inflateString:()=>M.inflateString,isEmptyObject:()=>M.isEmptyObject,isNumeric:()=>M.isNumeric,makeFunction:()=>M.makeFunction,mergeGeos:()=>M.mergeGeos,normalizeValue:()=>E.normalizeValue,partialCharges:()=>ng,processing_autoinit:()=>Mg,residues:()=>b.residues,setBondLength:()=>M0.setBondLength,setSyncSurface:()=>zy,specStringToObject:()=>M.specStringToObject,splitMesh:()=>J0,ssColors:()=>b.ssColors,subdivide_spline:()=>I,syncSurface:()=>Uv,viewers:()=>$1});var a,o,l=t(111),s=t(378),f=t(99),m=t(529),b=t(222);(function(o0){o0[o0.NONE=0]="NONE",o0[o0.FLAT=1]="FLAT",o0[o0.ROUND=2]="ROUND"})(a||(a={})),(function(o0){function p(J,Et,tt){var Dt,It,Mt,Wt,Yt,Zo=Math.hypot(J,Et);Zo<1e-4?(It=0,Mt=1):(It=-J/Zo,Mt=Et/Zo),Et=-It*J+Mt*Et,(Dt=Math.hypot(Et,tt))<1e-4?(Wt=0,Yt=1):(Wt=tt/Dt,Yt=Et/Dt);var wi=new Float32Array(9);return wi[0]=Mt,wi[1]=It,wi[2]=0,wi[3]=-It*Yt,wi[4]=Mt*Yt,wi[5]=Wt,wi[6]=It*Wt,wi[7]=-Mt*Wt,wi[8]=Yt,wi}var R=new class{constructor(){this.cache={};let J,Et=[],tt=Math.pow(2,4),Dt=2,It=Math.pow(2,Dt),Mt=tt/It;for(Et[0]=new m.Vector3(-1,0,0),Et[Mt]=new m.Vector3(0,0,1),Et[2*Mt]=new m.Vector3(1,0,0),Et[3*Mt]=new m.Vector3(0,0,-1),Dt=3;Dt<=4;Dt++){for(It=Math.pow(2,Dt-1),Mt=tt/It,J=0;J<It-1;J++)Et[Mt/2+J*Mt]=Et[J*Mt].clone().add(Et[(J+1)*Mt]).normalize();J=It-1,Et[Mt/2+J*Mt]=Et[J*Mt].clone().add(Et[0]).normalize()}this.basisVectors=Et}getVerticesForRadius(J,Et,tt){if(this.cache!==void 0&&this.cache[J]!==void 0&&this.cache[J][Et+tt]!==void 0)return this.cache[J][Et+tt];for(var Dt,It=this.basisVectors.length,Mt=[],Wt=[],Yt=0;Yt<It;Yt++)Mt.push(this.basisVectors[Yt].clone().multiplyScalar(J)),Mt.push(this.basisVectors[Yt].clone().multiplyScalar(J)),Dt=this.basisVectors[Yt].clone().normalize(),Wt.push(Dt),Wt.push(Dt);var Zo,wi,aa=[],Yo=10,Ci=It,Ip=2*Math.PI,$p=Math.PI,Qp=!1,T0=!1;for(wi=0;wi<=Yo;wi++){Qp=wi===0||wi===Yo,T0=wi===5;var g0=[],U0=[];for(Zo=0;Zo<=Ci;Zo++)if(T0){var Y0=Zo<Ci?2*Zo:0;U0.push(Y0+1),g0.push(Y0)}else{var Q0=Zo/Ci,tm=wi/Yo;if(Qp&&Zo!==0)Qp&&g0.push(Mt.length-1);else if(Zo<Ci){var G0=new m.Vector3;G0.x=-J*Math.cos(0+Q0*Ip)*Math.sin(0+tm*$p),G0.y=Et==1?0:J*Math.cos(0+tm*$p),G0.z=J*Math.sin(0+Q0*Ip)*Math.sin(0+tm*$p),Math.abs(G0.x)<1e-5&&(G0.x=0),Math.abs(G0.y)<1e-5&&(G0.y=0),Math.abs(G0.z)<1e-5&&(G0.z=0),Et==a.FLAT?(Dt=new m.Vector3(0,Math.cos(0+tm*$p),0)).normalize():(Dt=new m.Vector3(G0.x,G0.y,G0.z)).normalize(),Mt.push(G0),Wt.push(Dt),g0.push(Mt.length-1)}else g0.push(Mt.length-Ci)}T0&&aa.push(U0),aa.push(g0)}var Pm={vertices:Mt,normals:Wt,verticesRows:aa,w:Ci,h:Yo};return J in this.cache||(this.cache[J]={}),this.cache[J][Et+tt]=Pm,Pm}};o0.drawCylinder=function(J,Et,tt,Dt,It,Mt=0,Wt=0){if(!Et||!tt)return;let Yt=function(j0){if(typeof j0=="string"){let P0=j0;return P0.toLowerCase()=="flat"?a.FLAT:P0.toLowerCase()=="round"?a.ROUND:a.NONE}return j0};Mt=Yt(Mt);var Zo=(Wt=Yt(Wt))||Mt;It=It||{r:0,g:0,b:0};var wi,aa,Yo,Ci,Ip,$p,Qp=p(tt.x-Et.x,tt.y-Et.y,tt.z-Et.z),T0=R.getVerticesForRadius(Dt,Wt,"to"),g0=T0.w,U0=T0.h,Y0=Zo?U0*g0+2:2*g0,Q0=J.updateGeoGroup(Y0),tm=T0.vertices,G0=T0.normals,Pm=T0.verticesRows,km=Pm[U0/2],i1=Pm[U0/2+1],Qm=Q0.vertices,_1=Q0.vertexArray,C1=Q0.normalArray,a1=Q0.colorArray,I1=Q0.faceArray;for(Yo=0;Yo<g0;++Yo){var Fm=2*Yo;Ci=Qp[0]*tm[Fm].x+Qp[3]*tm[Fm].y+Qp[6]*tm[Fm].z,Ip=Qp[1]*tm[Fm].x+Qp[4]*tm[Fm].y+Qp[7]*tm[Fm].z,$p=Qp[5]*tm[Fm].y+Qp[8]*tm[Fm].z,wi=3*(Qm+Fm),aa=Q0.faceidx,_1[wi]=Ci+Et.x,_1[wi+1]=Ip+Et.y,_1[wi+2]=$p+Et.z,_1[wi+3]=Ci+tt.x,_1[wi+4]=Ip+tt.y,_1[wi+5]=$p+tt.z,C1[wi]=Ci,C1[wi+3]=Ci,C1[wi+1]=Ip,C1[wi+4]=Ip,C1[wi+2]=$p,C1[wi+5]=$p,a1[wi]=It.r,a1[wi+3]=It.r,a1[wi+1]=It.g,a1[wi+4]=It.g,a1[wi+2]=It.b,a1[wi+5]=It.b,I1[aa]=i1[Yo]+Qm,I1[aa+1]=i1[Yo+1]+Qm,I1[aa+2]=km[Yo]+Qm,I1[aa+3]=km[Yo]+Qm,I1[aa+4]=i1[Yo+1]+Qm,I1[aa+5]=km[Yo+1]+Qm,Q0.faceidx+=6}if(Zo){var Km,W1,s1,H1,q1,u1,eg,kg,J1,b1,Ug,gg,Pg,vg,jg,mv,Fv,Pv,fy,ty,wv,py,Zv,ry,my,Ry,gy,Py,Mv,jv,Xv,Jv,we=Mt?U0+1:U0/2+1;for(Ip=Wt?0:U0/2;Ip<we;Ip++)if(Ip!==U0/2){var Op=Ip<=U0/2?tt:Et,mt=R.getVerticesForRadius(Dt,Wt,"to"),W0=R.getVerticesForRadius(Dt,Mt,"from");for(Op===tt?(tm=mt.vertices,G0=mt.normals,Pm=mt.verticesRows):Op==Et&&(tm=W0.vertices,G0=W0.normals,Pm=W0.verticesRows),Ci=0;Ci<g0;Ci++)aa=Q0.faceidx,Mv=3*((Km=Pm[Ip][Ci+1])+Qm),jv=3*((W1=Pm[Ip][Ci])+Qm),Xv=3*((s1=Pm[Ip+1][Ci])+Qm),Jv=3*((H1=Pm[Ip+1][Ci+1])+Qm),q1=Qp[0]*tm[Km].x+Qp[3]*tm[Km].y+Qp[6]*tm[Km].z,u1=Qp[0]*tm[W1].x+Qp[3]*tm[W1].y+Qp[6]*tm[W1].z,eg=Qp[0]*tm[s1].x+Qp[3]*tm[s1].y+Qp[6]*tm[s1].z,kg=Qp[0]*tm[H1].x+Qp[3]*tm[H1].y+Qp[6]*tm[H1].z,J1=Qp[1]*tm[Km].x+Qp[4]*tm[Km].y+Qp[7]*tm[Km].z,b1=Qp[1]*tm[W1].x+Qp[4]*tm[W1].y+Qp[7]*tm[W1].z,Ug=Qp[1]*tm[s1].x+Qp[4]*tm[s1].y+Qp[7]*tm[s1].z,gg=Qp[1]*tm[H1].x+Qp[4]*tm[H1].y+Qp[7]*tm[H1].z,Pg=Qp[5]*tm[Km].y+Qp[8]*tm[Km].z,vg=Qp[5]*tm[W1].y+Qp[8]*tm[W1].z,jg=Qp[5]*tm[s1].y+Qp[8]*tm[s1].z,mv=Qp[5]*tm[H1].y+Qp[8]*tm[H1].z,_1[Mv]=q1+Op.x,_1[jv]=u1+Op.x,_1[Xv]=eg+Op.x,_1[Jv]=kg+Op.x,_1[Mv+1]=J1+Op.y,_1[jv+1]=b1+Op.y,_1[Xv+1]=Ug+Op.y,_1[Jv+1]=gg+Op.y,_1[Mv+2]=Pg+Op.z,_1[jv+2]=vg+Op.z,_1[Xv+2]=jg+Op.z,_1[Jv+2]=mv+Op.z,a1[Mv]=It.r,a1[jv]=It.r,a1[Xv]=It.r,a1[Jv]=It.r,a1[Mv+1]=It.g,a1[jv+1]=It.g,a1[Xv+1]=It.g,a1[Jv+1]=It.g,a1[Mv+2]=It.b,a1[jv+2]=It.b,a1[Xv+2]=It.b,a1[Jv+2]=It.b,Fv=Qp[0]*G0[Km].x+Qp[3]*G0[Km].y+Qp[6]*G0[Km].z,Pv=Qp[0]*G0[W1].x+Qp[3]*G0[W1].y+Qp[6]*G0[W1].z,fy=Qp[0]*G0[s1].x+Qp[3]*G0[s1].y+Qp[6]*G0[s1].z,ty=Qp[0]*G0[H1].x+Qp[3]*G0[H1].y+Qp[6]*G0[H1].z,wv=Qp[1]*G0[Km].x+Qp[4]*G0[Km].y+Qp[7]*G0[Km].z,py=Qp[1]*G0[W1].x+Qp[4]*G0[W1].y+Qp[7]*G0[W1].z,Zv=Qp[1]*G0[s1].x+Qp[4]*G0[s1].y+Qp[7]*G0[s1].z,ry=Qp[1]*G0[H1].x+Qp[4]*G0[H1].y+Qp[7]*G0[H1].z,my=Qp[5]*G0[Km].y+Qp[8]*G0[Km].z,Ry=Qp[5]*G0[W1].y+Qp[8]*G0[W1].z,gy=Qp[5]*G0[s1].y+Qp[8]*G0[s1].z,Py=Qp[5]*G0[H1].y+Qp[8]*G0[H1].z,Ip===0?(C1[Mv]=Fv,C1[Xv]=fy,C1[Jv]=ty,C1[Mv+1]=wv,C1[Xv+1]=Zv,C1[Jv+1]=ry,C1[Mv+2]=my,C1[Xv+2]=gy,C1[Jv+2]=Py,I1[aa]=Km+Qm,I1[aa+1]=s1+Qm,I1[aa+2]=H1+Qm,Q0.faceidx+=3):Ip===we-1?(C1[Mv]=Fv,C1[jv]=Pv,C1[Xv]=fy,C1[Mv+1]=wv,C1[jv+1]=py,C1[Xv+1]=Zv,C1[Mv+2]=my,C1[jv+2]=Ry,C1[Xv+2]=gy,I1[aa]=Km+Qm,I1[aa+1]=W1+Qm,I1[aa+2]=s1+Qm,Q0.faceidx+=3):(C1[Mv]=Fv,C1[jv]=Pv,C1[Jv]=ty,C1[Mv+1]=wv,C1[jv+1]=py,C1[Jv+1]=ry,C1[Mv+2]=my,C1[jv+2]=Ry,C1[Jv+2]=Py,C1[jv]=Pv,C1[Xv]=fy,C1[Jv]=ty,C1[jv+1]=py,C1[Xv+1]=Zv,C1[Jv+1]=ry,C1[jv+2]=Ry,C1[Xv+2]=gy,C1[Jv+2]=Py,I1[aa]=Km+Qm,I1[aa+1]=W1+Qm,I1[aa+2]=H1+Qm,I1[aa+3]=W1+Qm,I1[aa+4]=s1+Qm,I1[aa+5]=H1+Qm,Q0.faceidx+=6)}}Q0.vertices+=Y0},o0.drawCone=function(J,Et,tt,Dt,It){if(!Et||!tt)return;It=It||{r:0,g:0,b:0};let Mt=new m.Vector3(tt.x-Et.x,tt.y-Et.y,tt.z-Et.z);var Wt=p(Mt.x,Mt.y,Mt.z);Mt=Mt.normalize();var Yt,Zo,wi,aa,Yo,Ci,Ip=R.basisVectors.length,$p=R.basisVectors,Qp=Ip+2,T0=J.updateGeoGroup(Qp),g0=T0.vertices,U0=T0.vertexArray,Y0=T0.normalArray,Q0=T0.colorArray,tm=T0.faceArray;for(U0[Yt=3*g0]=Et.x,U0[Yt+1]=Et.y,U0[Yt+2]=Et.z,Y0[Yt]=-Mt.x,Y0[Yt+1]=-Mt.y,Y0[Yt+2]=-Mt.z,Q0[Yt]=It.r,Q0[Yt+1]=It.g,Q0[Yt+2]=It.b,U0[Yt+3]=tt.x,U0[Yt+4]=tt.y,U0[Yt+5]=tt.z,Y0[Yt+3]=Mt.x,Y0[Yt+4]=Mt.y,Y0[Yt+5]=Mt.z,Q0[Yt+3]=It.r,Q0[Yt+4]=It.g,Q0[Yt+5]=It.b,Yt+=6,wi=0;wi<Ip;++wi){var G0=$p[wi].clone();G0.multiplyScalar(Dt),aa=Wt[0]*G0.x+Wt[3]*G0.y+Wt[6]*G0.z,Yo=Wt[1]*G0.x+Wt[4]*G0.y+Wt[7]*G0.z,Ci=Wt[5]*G0.y+Wt[8]*G0.z,U0[Yt]=aa+Et.x,U0[Yt+1]=Yo+Et.y,U0[Yt+2]=Ci+Et.z,Y0[Yt]=aa,Y0[Yt+1]=Yo,Y0[Yt+2]=Ci,Q0[Yt]=It.r,Q0[Yt+1]=It.g,Q0[Yt+2]=It.b,Yt+=3}for(T0.vertices+=Ip+2,Zo=T0.faceidx,wi=0;wi<Ip;wi++){var Pm=g0+2+wi,km=g0+2+(wi+1)%Ip;tm[Zo]=Pm,tm[Zo+1]=km,tm[Zo+2]=g0,tm[Zo+=3]=Pm,tm[Zo+1]=km,tm[Zo+2]=g0+1,Zo+=3}T0.faceidx+=6*Ip};var W=new class{constructor(){this.cache=new Map}getVerticesForRadius(J,Et){Et=Et||2,this.cache.has(Et)||this.cache.set(Et,new Map);let tt=this.cache.get(Et);if(tt.has(J))return tt.get(J);var Dt={vertices:[],verticesRows:[],normals:[]},It=16*Et,Mt=10*Et;J<1&&(It=10*Et,Mt=8*Et);var Wt,Yt,Zo=2*Math.PI,wi=Math.PI;for(Yt=0;Yt<=Mt;Yt++){let Yo=[];for(Wt=0;Wt<=It;Wt++){let Ci=Wt/It,Ip=Yt/Mt,$p=-J*Math.cos(0+Ci*Zo)*Math.sin(0+Ip*wi),Qp=J*Math.cos(0+Ip*wi),T0=J*Math.sin(0+Ci*Zo)*Math.sin(0+Ip*wi);var aa=new m.Vector3($p,Qp,T0);aa.normalize(),Dt.vertices.push({x:$p,y:Qp,z:T0}),Dt.normals.push(aa),Yo.push(Dt.vertices.length-1)}Dt.verticesRows.push(Yo)}return tt.set(J,Dt),Dt}};o0.drawSphere=function(J,Et,tt,Dt,It){var Mt=W.getVerticesForRadius(tt,It),Wt=Mt.vertices,Yt=Mt.normals,Zo=J.updateGeoGroup(Wt.length),wi=Zo.vertices,aa=Zo.vertexArray,Yo=Zo.colorArray,Ci=Zo.faceArray,Ip=Zo.lineArray,$p=Zo.normalArray;for(let g0=0,U0=Wt.length;g0<U0;++g0){let Y0=3*(wi+g0),Q0=Wt[g0];aa[Y0]=Q0.x+Et.x,aa[Y0+1]=Q0.y+Et.y,aa[Y0+2]=Q0.z+Et.z,Yo[Y0]=Dt.r,Yo[Y0+1]=Dt.g,Yo[Y0+2]=Dt.b}Zo.vertices+=Wt.length;let Qp=Mt.verticesRows,T0=Qp.length-1;for(let g0=0;g0<T0;g0++){let U0=Qp[g0].length-1;for(let Y0=0;Y0<U0;Y0++){let Q0=Zo.faceidx,tm=Zo.lineidx,G0=Qp[g0][Y0+1]+wi,Pm=3*G0,km=Qp[g0][Y0]+wi,i1=3*km,Qm=Qp[g0+1][Y0]+wi,_1=3*Qm,C1=Qp[g0+1][Y0+1]+wi,a1=3*C1,I1=Yt[G0-wi],Fm=Yt[km-wi],Km=Yt[Qm-wi],W1=Yt[C1-wi];Math.abs(Wt[G0-wi].y)===tt?($p[Pm]=I1.x,$p[_1]=Km.x,$p[a1]=W1.x,$p[Pm+1]=I1.y,$p[_1+1]=Km.y,$p[a1+1]=W1.y,$p[Pm+2]=I1.z,$p[_1+2]=Km.z,$p[a1+2]=W1.z,Ci[Q0]=G0,Ci[Q0+1]=Qm,Ci[Q0+2]=C1,Ip[tm]=G0,Ip[tm+1]=Qm,Ip[tm+2]=G0,Ip[tm+3]=C1,Ip[tm+4]=Qm,Ip[tm+5]=C1,Zo.faceidx+=3,Zo.lineidx+=6):Math.abs(Wt[Qm-wi].y)===tt?($p[Pm]=I1.x,$p[i1]=Fm.x,$p[_1]=Km.x,$p[Pm+1]=I1.y,$p[i1+1]=Fm.y,$p[_1+1]=Km.y,$p[Pm+2]=I1.z,$p[i1+2]=Fm.z,$p[_1+2]=Km.z,Ci[Q0]=G0,Ci[Q0+1]=km,Ci[Q0+2]=Qm,Ip[tm]=G0,Ip[tm+1]=km,Ip[tm+2]=G0,Ip[tm+3]=Qm,Ip[tm+4]=km,Ip[tm+5]=Qm,Zo.faceidx+=3,Zo.lineidx+=6):($p[Pm]=I1.x,$p[i1]=Fm.x,$p[a1]=W1.x,$p[Pm+1]=I1.y,$p[i1+1]=Fm.y,$p[a1+1]=W1.y,$p[Pm+2]=I1.z,$p[i1+2]=Fm.z,$p[a1+2]=W1.z,$p[i1]=Fm.x,$p[_1]=Km.x,$p[a1]=W1.x,$p[i1+1]=Fm.y,$p[_1+1]=Km.y,$p[a1+1]=W1.y,$p[i1+2]=Fm.z,$p[_1+2]=Km.z,$p[a1+2]=W1.z,Ci[Q0]=G0,Ci[Q0+1]=km,Ci[Q0+2]=C1,Ci[Q0+3]=km,Ci[Q0+4]=Qm,Ci[Q0+5]=C1,Ip[tm]=G0,Ip[tm+1]=km,Ip[tm+2]=G0,Ip[tm+3]=C1,Ip[tm+4]=km,Ip[tm+5]=Qm,Ip[tm+6]=Qm,Ip[tm+7]=C1,Zo.faceidx+=6,Zo.lineidx+=8)}}}})(o||(o={}));var E=t(546),M=t(864);function I(o0,p){var R,W,J,Et,tt,Dt,It,Mt,Wt,Yt=[],Zo=o0;for((Zo=[]).push(o0[0]),R=1,W=o0.length-1;R<W;R++)if(tt=o0[R],Dt=o0[R+1],tt.smoothen){var wi=new m.Vector3((tt.x+Dt.x)/2,(tt.y+Dt.y)/2,(tt.z+Dt.z)/2);wi.atom=tt.atom,Zo.push(wi)}else Zo.push(tt);for(Zo.push(o0[o0.length-1]),R=-1,J=Zo.length;R<=J-3;R++)if(Et=Zo[R===-1?0:R],tt=Zo[R+1],Dt=Zo[R+2],It=Zo[R===J-3?J-1:R+3],Mt=new m.Vector3().subVectors(Dt,Et).multiplyScalar(.5),Wt=new m.Vector3().subVectors(It,tt).multiplyScalar(.5),!Dt.skip)for(var aa=0;aa<p;aa++){var Yo=1/p*aa,Ci=tt.x+Yo*Mt.x+Yo*Yo*(-3*tt.x+3*Dt.x-2*Mt.x-Wt.x)+Yo*Yo*Yo*(2*tt.x-2*Dt.x+Mt.x+Wt.x),Ip=tt.y+Yo*Mt.y+Yo*Yo*(-3*tt.y+3*Dt.y-2*Mt.y-Wt.y)+Yo*Yo*Yo*(2*tt.y-2*Dt.y+Mt.y+Wt.y),$p=tt.z+Yo*Mt.z+Yo*Yo*(-3*tt.z+3*Dt.z-2*Mt.z-Wt.z)+Yo*Yo*Yo*(2*tt.z-2*Dt.z+Mt.z+Wt.z),Qp=new m.Vector3(Ci,Ip,$p);Qp.atom=aa<p/2?tt.atom:Dt.atom,Yt.push(Qp)}return Yt.push(Zo[Zo.length-1]),Yt}const V=.5,Z=1.3,ee=.8,le=.4,K=.4;function vt(o0,p,R,W){for(var J,Et,tt,Dt,It=0,Mt=p.length;It<Mt;It++){Dt=Math.round(It*(W.length-1)/Mt),tt=b.CC.color(W[Dt]);var Wt=o0.updateGeoGroup(2),Yt=Wt.vertexArray,Zo=Wt.colorArray,wi=Wt.faceArray;Yt[Et=3*(J=Wt.vertices)]=p[It].x,Yt[Et+1]=p[It].y,Yt[Et+2]=p[It].z,Yt[Et+3]=R[It].x,Yt[Et+4]=R[It].y,Yt[Et+5]=R[It].z;for(var aa=0;aa<6;++aa)Zo[Et+3*aa]=tt.r,Zo[Et+1+3*aa]=tt.g,Zo[Et+2+3*aa]=tt.b;if(It>0){var Yo=[J,J+1,J-1,J-2],Ci=Wt.faceidx;wi[Ci]=Yo[0],wi[Ci+1]=Yo[1],wi[Ci+2]=Yo[3],wi[Ci+3]=Yo[1],wi[Ci+4]=Yo[2],wi[Ci+5]=Yo[3],Wt.faceidx+=6}Wt.vertices+=2}}function q(o0,p,R,W,J,Et,tt){tt&&tt!=="default"||(tt="rectangle"),tt==="edged"?(function(Dt,It,Mt,Wt,Yt){if(!(It.length<2)){var Zo,wi;if(Zo=It[0],wi=It[It.length-1],Zo=I(Zo,Wt),wi=I(wi,Wt),!Yt)return vt(Dt,Zo,wi,Mt);var aa,Yo,Ci,Ip,$p,Qp,T0,g0,U0,Y0,Q0,tm,G0,Pm,km,i1,Qm,_1,C1,a1,I1,Fm,Km=[],W1=[[0,2,-6,-8],[-4,-2,6,4],[7,-1,-5,3],[-3,5,1,-7]];for(G0=0,Pm=Zo.length;G0<Pm;G0++){if(Y0=Math.round(G0*(Mt.length-1)/Pm),U0=b.CC.color(Mt[Y0]),Km.push(Yo=Zo[G0]),Km.push(Yo),Km.push(Ci=wi[G0]),Km.push(Ci),G0<Pm-1){var s1=Zo[G0+1].clone().sub(Zo[G0]);aa=wi[G0].clone().sub(Zo[G0]).cross(s1).normalize().multiplyScalar(Yt)}for(Km.push(Ip=Zo[G0].clone().add(aa)),Km.push(Ip),Km.push($p=wi[G0].clone().add(aa)),Km.push($p),Yo.atom!==void 0&&(Q0=Yo.atom),a1=(C1=Dt.updateGeoGroup(8)).vertexArray,I1=C1.colorArray,Fm=C1.faceArray,a1[T0=3*(Qp=C1.vertices)]=Yo.x,a1[T0+1]=Yo.y,a1[T0+2]=Yo.z,a1[T0+3]=Yo.x,a1[T0+4]=Yo.y,a1[T0+5]=Yo.z,a1[T0+6]=Ci.x,a1[T0+7]=Ci.y,a1[T0+8]=Ci.z,a1[T0+9]=Ci.x,a1[T0+10]=Ci.y,a1[T0+11]=Ci.z,a1[T0+12]=Ip.x,a1[T0+13]=Ip.y,a1[T0+14]=Ip.z,a1[T0+15]=Ip.x,a1[T0+16]=Ip.y,a1[T0+17]=Ip.z,a1[T0+18]=$p.x,a1[T0+19]=$p.y,a1[T0+20]=$p.z,a1[T0+21]=$p.x,a1[T0+22]=$p.y,a1[T0+23]=$p.z,km=0;km<8;++km)I1[T0+3*km]=U0.r,I1[T0+1+3*km]=U0.g,I1[T0+2+3*km]=U0.b;if(G0>0){var H1=tm!==void 0&&Q0!==void 0&&tm.serial!==Q0.serial;for(km=0;km<4;km++){var q1=[Qp+W1[km][0],Qp+W1[km][1],Qp+W1[km][2],Qp+W1[km][3]];if(Fm[g0=C1.faceidx]=q1[0],Fm[g0+1]=q1[1],Fm[g0+2]=q1[3],Fm[g0+3]=q1[1],Fm[g0+4]=q1[2],Fm[g0+5]=q1[3],C1.faceidx+=6,Q0.clickable||tm.clickable||Q0.hoverable||tm.hoverable){var u1=Km[q1[3]].clone(),eg=Km[q1[0]].clone(),kg=Km[q1[2]].clone(),J1=Km[q1[1]].clone();if(u1.atom=Km[q1[3]].atom||null,kg.atom=Km[q1[2]].atom||null,eg.atom=Km[q1[0]].atom||null,J1.atom=Km[q1[1]].atom||null,H1){var b1=u1.clone().add(eg).multiplyScalar(.5),Ug=kg.clone().add(J1).multiplyScalar(.5),gg=u1.clone().add(J1).multiplyScalar(.5);km%2==0?((tm.clickable||tm.hoverable)&&(i1=new f.Triangle(b1,gg,u1),Qm=new f.Triangle(Ug,kg,gg),_1=new f.Triangle(gg,kg,u1),tm.intersectionShape.triangle.push(i1),tm.intersectionShape.triangle.push(Qm),tm.intersectionShape.triangle.push(_1)),(Q0.clickable||Q0.hoverable)&&(i1=new f.Triangle(eg,J1,gg),Qm=new f.Triangle(J1,Ug,gg),_1=new f.Triangle(eg,gg,b1),Q0.intersectionShape.triangle.push(i1),Q0.intersectionShape.triangle.push(Qm),Q0.intersectionShape.triangle.push(_1))):((Q0.clickable||Q0.hoverable)&&(i1=new f.Triangle(b1,gg,u1),Qm=new f.Triangle(Ug,kg,gg),_1=new f.Triangle(gg,kg,u1),Q0.intersectionShape.triangle.push(i1),Q0.intersectionShape.triangle.push(Qm),Q0.intersectionShape.triangle.push(_1)),(tm.clickable||tm.hoverable)&&(i1=new f.Triangle(eg,J1,gg),Qm=new f.Triangle(J1,Ug,gg),_1=new f.Triangle(eg,gg,b1),tm.intersectionShape.triangle.push(i1),tm.intersectionShape.triangle.push(Qm),tm.intersectionShape.triangle.push(_1)))}else(Q0.clickable||Q0.hoverable)&&(i1=new f.Triangle(eg,J1,u1),Qm=new f.Triangle(J1,kg,u1),Q0.intersectionShape.triangle.push(i1),Q0.intersectionShape.triangle.push(Qm))}}}C1.vertices+=8,tm=Q0}var Pg=Km.length-8;for(a1=(C1=Dt.updateGeoGroup(8)).vertexArray,I1=C1.colorArray,Fm=C1.faceArray,T0=3*(Qp=C1.vertices),g0=C1.faceidx,G0=0;G0<4;G0++){Km.push(Km[2*G0]),Km.push(Km[Pg+2*G0]);var vg=Km[2*G0],jg=Km[Pg+2*G0];a1[T0+6*G0]=vg.x,a1[T0+1+6*G0]=vg.y,a1[T0+2+6*G0]=vg.z,a1[T0+3+6*G0]=jg.x,a1[T0+4+6*G0]=jg.y,a1[T0+5+6*G0]=jg.z,I1[T0+6*G0]=U0.r,I1[T0+1+6*G0]=U0.g,I1[T0+2+6*G0]=U0.b,I1[T0+3+6*G0]=U0.r,I1[T0+4+6*G0]=U0.g,I1[T0+5+6*G0]=U0.b}Pg+=8,i1=[Qp,Qp+2,Qp+6,Qp+4],Qm=[Qp+1,Qp+5,Qp+7,Qp+3],Fm[g0]=i1[0],Fm[g0+1]=i1[1],Fm[g0+2]=i1[3],Fm[g0+3]=i1[1],Fm[g0+4]=i1[2],Fm[g0+5]=i1[3],Fm[g0+6]=Qm[0],Fm[g0+7]=Qm[1],Fm[g0+8]=Qm[3],Fm[g0+9]=Qm[1],Fm[g0+10]=Qm[2],Fm[g0+11]=Qm[3],C1.faceidx+=12,C1.vertices+=8}})(o0,p,R,W,J):tt!=="rectangle"&&tt!=="oval"&&tt!=="parabola"||(function(Dt,It,Mt,Wt,Yt,Zo,wi){var aa,Yo,Ci,Ip,$p,Qp,T0,g0,U0,Y0;if((Ci=It.length)<2||It[0].length<2)return;for(aa=0;aa<Ci;aa++)It[aa]=I(It[aa],Wt);if(Ip=It[0].length,!Yt)return vt(Dt,It[0],It[Ci-1],Mt);var Q0=[],tm=[],G0=[];for(Yo=0;Yo<Ci;Yo++)Q0.push(.25+1.5*Math.sqrt((Ci-1)*Yo-Math.pow(Yo,2))/(Ci-1)),tm.push(.5),G0.push(2*(Math.pow(Yo/Ci,2)-Yo/Ci)+.6);var Pm,km,i1,Qm,_1,C1,a1,I1,Fm,Km,W1=[];for(Yo=0;Yo<2*Ci-1;Yo++)W1[Yo]=[Yo,Yo+1,Yo+1-2*Ci,Yo-2*Ci];W1[2*Ci-1]=[Yo,Yo+1-2*Ci,Yo+1-4*Ci,Yo-2*Ci];let s1=Dt.updateGeoGroup();for(aa=0;aa<Ip;aa++){let eg=Dt.groups,kg=!1;var H1,q1;for(s1=Dt.updateGeoGroup(2*Ci),eg!=Dt.groups&&aa>0&&(aa-=1,kg=!0),C1=Math.round(aa*(Mt.length-1)/Ip),_1=b.CC.color(Mt[C1]),U0=T0,Y0=g0,T0=[],g0=[],$p=[],It[0][aa].atom!==void 0&&(Qm=It[0][aa].atom,wi==="oval"?Qp=Q0:wi==="rectangle"?Qp=tm:wi==="parabola"&&(Qp=G0)),Qp||(Qp=tm),Yo=0;Yo<Ci;Yo++)H1=aa<Ip-1?It[Yo][aa+1].clone().sub(It[Yo][aa]):It[Yo][aa-1].clone().sub(It[Yo][aa]).negate(),q1=Yo<Ci-1?It[Yo+1][aa].clone().sub(It[Yo][aa]):It[Yo-1][aa].clone().sub(It[Yo][aa]).negate(),$p[Yo]=q1.cross(H1).normalize().multiplyScalar(Yt*Qp[Yo]);for(Yo=0;Yo<Ci;Yo++)T0[Yo]=It[Yo][aa].clone().add($p[Yo].clone().negate());for(Yo=0;Yo<Ci;Yo++)g0[Yo]=It[Yo][aa].clone().add($p[Yo]);for(a1=s1.vertexArray,I1=s1.colorArray,Fm=s1.faceArray,km=3*(Pm=s1.vertices),Yo=0;Yo<Ci;Yo++)a1[km+3*Yo+0]=T0[Yo].x,a1[km+3*Yo+1]=T0[Yo].y,a1[km+3*Yo+2]=T0[Yo].z;for(Yo=0;Yo<Ci;Yo++)a1[km+3*Yo+0+3*Ci]=g0[Ci-1-Yo].x,a1[km+3*Yo+1+3*Ci]=g0[Ci-1-Yo].y,a1[km+3*Yo+2+3*Ci]=g0[Ci-1-Yo].z;for(Yo=0;Yo<2*Ci;++Yo)I1[km+3*Yo+0]=_1.r,I1[km+3*Yo+1]=_1.g,I1[km+3*Yo+2]=_1.b;if(aa>0&&!kg){for(Yo=0;Yo<2*Ci;Yo++)Km=[Pm+W1[Yo][0],Pm+W1[Yo][1],Pm+W1[Yo][2],Pm+W1[Yo][3]],Fm[i1=s1.faceidx]=Km[0],Fm[i1+1]=Km[1],Fm[i1+2]=Km[3],Fm[i1+3]=Km[1],Fm[i1+4]=Km[2],Fm[i1+5]=Km[3],s1.faceidx+=6;if(Qm.clickable||Qm.hoverable){var u1=[];for(Yo in u1.push(new f.Triangle(U0[0],T0[0],T0[Ci-1])),u1.push(new f.Triangle(U0[0],T0[Ci-1],U0[Ci-1])),u1.push(new f.Triangle(U0[Ci-1],T0[Ci-1],g0[Ci-1])),u1.push(new f.Triangle(U0[Ci-1],g0[Ci-1],Y0[Ci-1])),u1.push(new f.Triangle(g0[0],Y0[0],Y0[Ci-1])),u1.push(new f.Triangle(g0[Ci-1],g0[0],Y0[Ci-1])),u1.push(new f.Triangle(T0[0],U0[0],Y0[0])),u1.push(new f.Triangle(g0[0],T0[0],Y0[0])),u1)Qm.intersectionShape.triangle.push(u1[Yo])}}s1.vertices+=2*Ci}for(a1=s1.vertexArray,I1=s1.colorArray,Fm=s1.faceArray,km=3*(Pm=s1.vertices),i1=s1.faceidx,aa=0;aa<Ci-1;aa++)Km=[aa,aa+1,2*Ci-2-aa,2*Ci-1-aa],Fm[i1=s1.faceidx]=Km[0],Fm[i1+1]=Km[1],Fm[i1+2]=Km[3],Fm[i1+3]=Km[1],Fm[i1+4]=Km[2],Fm[i1+5]=Km[3],s1.faceidx+=6;for(aa=0;aa<Ci-1;aa++)Km=[Pm-1-aa,Pm-2-aa,Pm-2*Ci+aa+1,Pm-2*Ci+aa],Fm[i1=s1.faceidx]=Km[0],Fm[i1+1]=Km[1],Fm[i1+2]=Km[3],Fm[i1+3]=Km[1],Fm[i1+4]=Km[2],Fm[i1+5]=Km[3],s1.faceidx+=6})(o0,p,R,W,J,0,tt)}function Q(o0){return o0&&o0.elem==="C"&&o0.atom==="CA"}function wt(o0,p){if(o0&&p&&o0.chain===p.chain){if(!(o0.hetflag||p.hetflag||o0.reschain!==p.reschain||o0.resi!==p.resi&&o0.resi!==p.resi-1))return!0;if(o0.resi<p.resi){var R=o0.x-p.x,W=o0.y-p.y,J=o0.z-p.z,Et=R*R+W*W+J*J;if(o0.atom=="CA"&&p.atom=="CA"&&Et<16||(o0.atom=="P"||p.atom=="P")&&Et<64)return!0}}return!1}function bt(o0,p,R,W,J){if(p!=null&&p.vertices!=0){J&&(p.initTypedArrays(),p.setUpNormals());var Et=new s.MeshDoubleLambertMaterial;Et.vertexColors=s.Coloring.FaceColors,typeof R=="number"&&R>=0&&R<1&&(Et.transparent=!0,Et.opacity=R),Et.outline=W;var tt=new s.Mesh(p,Et);o0.add(tt)}}function Ut(o0,p,R,W,J,Et,tt,Dt,It){var Mt,Wt,Yt,Zo,wi,aa;if(W&&J&&tt){var Yo=J.sub(W);Yo.normalize();var Ci=Dt[It];for(Wt=It+1;Wt<Dt.length&&(Ci=Dt[Wt]).atom!=tt.atom;Wt++);if((Ci=Ci?new m.Vector3(Ci.x,Ci.y,Ci.z):new m.Vector3(0,0,0)).sub(W),tt.ss==="arrow start"){var Ip=Ci.clone().multiplyScalar(.3).cross(J);W.add(Ip);var $p=Ci.clone().cross(Yo).normalize();Yo.rotateAboutVector($p,.43)}for(tt.style.cartoon.ribbon?Mt=tt.style.cartoon.thickness||le:tt.style.cartoon.width?Mt=tt.style.cartoon.width:tt.ss==="c"?Mt=tt.atom==="P"?ee:V:tt.ss==="arrow start"?(Mt=Z,wi=!0):Mt=tt.ss==="arrow end"||tt.ss==="h"&&tt.style.cartoon.tubes||tt.ss==="tube start"?V:Z,Et!=null&&Yo.dot(Et)<0&&Yo.negate(),Yo.multiplyScalar(Mt),Wt=0;Wt<p;Wt++)Yt=2*Wt/(p-1)-1,(Zo=new m.Vector3(W.x+Yt*Yo.x,W.y+Yt*Yo.y,W.z+Yt*Yo.z)).atom=tt,tt.ss==="s"&&(Zo.smoothen=!0),o0[Wt].push(Zo);if(wi)for(Yo.multiplyScalar(2),Wt=0;Wt<p;Wt++)Yt=2*Wt/(p-1)-1,(Zo=new m.Vector3(W.x+Yt*Yo.x,W.y+Yt*Yo.y,W.z+Yt*Yo.z)).atom=tt,Zo.smoothen=!1,Zo.skip=!0,o0[Wt].push(Zo);return aa=tt.style.cartoon.style||"default",o0.style?o0.style!=aa&&(console.log("Warning: a cartoon chain's strand-style is ambiguous"),o0.style="default"):o0.style=aa,tt.ss!=="arrow start"&&tt.ss!=="arrow end"||(tt.ss="s"),wi}}const it={C:!0,CA:!0,O:!0,P:!0,OP2:!0,O2P:!0,"O5'":!0,"O3'":!0,"C5'":!0,"C2'":!0,"O5*":!0,"O3*":!0,"C5*":!0,"C2*":!0,N1:!0,N3:!0},zt={DA:!0,DG:!0,A:!0,G:!0},Zt={DT:!0,DC:!0,U:!0,C:!0,T:!0},Mn={DA:!0,DG:!0,A:!0,G:!0,DT:!0,DC:!0,U:!0,C:!0,T:!0};function kp(o0,p,R,W=10){let J=W,Et=W;var tt,Dt,It,Mt,Wt,Yt,Zo,wi,aa,Yo,Ci,Ip,$p,Qp,T0,g0,U0,Y0,Q0=new s.Geometry(!0),tm=new s.Geometry(!0),G0=[],Pm=[],km=1,i1=!1,Qm={};for(var _1 in E.Gradient.builtinGradients)E.Gradient.builtinGradients.hasOwnProperty(_1)&&(Qm[_1]=new E.Gradient.builtinGradients[_1](R[1],R[0]));var C1=function(vg,jg){return R&&jg.color==="spectrum"?jg.colorscheme in Qm?Qm[jg.colorscheme].valueToHex(vg.resi):Qm.sinebow.valueToHex(vg.resi):(0,M.getColorFromStyle)(vg,jg).getHex()};for(wi=0;wi<J;wi++)Pm[wi]=[];var a1=!1,I1=!1,Fm=[];for(wi in p){if((Mt=p[wi]).elem==="C"&&Mt.atom==="CA"){var Km=wt(It,Mt);Km&&Mt.ss==="s"?a1=!0:a1&&(It&&Dt&&It.style.cartoon.arrows&&Dt.style.cartoon.arrows&&(It.ss="arrow end",Dt.ss="arrow start"),a1=!1),Km&&(It.ss==="h"||It.ss=="tube start")&&It.style.cartoon.tubes?!I1&&It.ss!="tube start"&&Mt.style.cartoon.tubes&&(Mt.ss="tube start",I1=!0):I1&&(It.ss==="tube start"?It.ss="tube end":Dt&&Dt.style.cartoon.tubes&&(Dt.ss="tube end"),I1=!1),Dt=It,It=Mt}Mt&&Mt.atom in it&&Fm.push(Mt)}I1&&It.style.cartoon.tubes&&(It.ss="tube end",I1=!1);var W1=function(vg){Pm[0].length>0&&q(tm,Pm,G0,Et,Zo,0,Pm.style);var jg=[],mv=null;if(vg){for(wi=0;wi<J;wi++)jg[wi]=Pm[wi][Pm[wi].length-1];mv=G0[G0.length-1]}for(Pm=[],wi=0;wi<J;wi++)Pm[wi]=[];if(G0=[],vg){for(wi=0;wi<J;wi++)Pm[wi].push(jg[wi]);G0.push(mv)}bt(o0,tm,km,i1,!0),bt(o0,Q0,km,i1,!1),tm=new s.Geometry(!0),Q0=new s.Geometry(!0)};It=void 0;let s1=[];for(var H1=0;H1<Fm.length;H1++){var q1=(Mt=Fm[H1]).resn.trim(),u1=q1 in Mn;if(km=1,tt=Mt.style.cartoon,It&&It.style.cartoon&&(km=It.style.cartoon.opacity),It&&It.style.cartoon&&It.style.cartoon.outline&&(i1=It.style.cartoon.outline),!It||!It.style.cartoon||Mt.style.cartoon&&It.style.cartoon.opacity==Mt.style.cartoon.opacity||W1(It.chain==Mt.chain),It&&Mt&&!wt(It,Mt)&&It.chain&&It.chain==Mt.chain&&!It.hetflag&&!Mt.hetflag&&It.reschain+1==Mt.reschain&&s1.push([It,Mt]),tt.style==="trace"){if(!Mt.hetflag&&(Mt.elem==="C"&&Mt.atom==="CA"||u1&&Mt.atom==="P"||Mt.atom==="BB")){if(Yt=C1(Mt,tt),Zo=(0,M.isNumeric)(tt.thickness)?tt.thickness:le,wt(It,Mt))if(Yt==Wt){var eg=b.CC.color(Yt);o.drawCylinder(Q0,It,Mt,Zo,eg,2,2)}else{var kg=new m.Vector3().addVectors(It,Mt).multiplyScalar(.5),J1=b.CC.color(Wt),b1=b.CC.color(Yt);o.drawCylinder(Q0,It,kg,Zo,J1,2,0),o.drawCylinder(Q0,kg,Mt,Zo,b1,0,2)}if((Mt.clickable===!0||Mt.hoverable)&&Mt.intersectionShape!==void 0){var Ug=new m.Vector3(Mt.x,Mt.y,Mt.z);Mt.intersectionShape.sphere.push(new f.Sphere(Ug,Zo))}It=Mt,Wt=Yt}}else{if(Q(Mt)||u1&&(Mt.atom==="P"||Mt.atom.indexOf("O5")==0)){if(Y0)if(Mt.ss==="tube end")Y0=!1,U0=new m.Vector3(Mt.x,Mt.y,Mt.z),o.drawCylinder(Q0,g0,U0,2,b.CC.color(Wt),1,1),Mt.ss="h";else{if(It.chain==Mt.chain&&It.ss!=="tube end")continue;Y0=!1,It.ss="h",U0=new m.Vector3(It.x,It.y,It.z),o.drawCylinder(Q0,g0,U0,2,b.CC.color(Wt),1,1)}if(It&&(!wt(It,Mt)||It.ss==="tube start")){for(It.ss==="tube start"&&(Y0=!0,g0=new m.Vector3(It.x,It.y,It.z),It.ss="h"),T0&&(Qp=Ip?new m.Vector3().addVectors(It,Ip).multiplyScalar(.5):new m.Vector3(It.x,It.y,It.z),o.drawCylinder(Q0,Qp,T0,K,b.CC.color(T0.color),0,2),Ut(Pm,J,!0,Ip,$p,Ci,It,Fm,H1),G0.push(Yt),Qp=null,T0=null),Pm[0].length>0&&q(tm,Pm,G0,Et,Zo,0,Pm.style),Pm=[],wi=0;wi<J;wi++)Pm[wi]=[];G0=[]}if(It===void 0||It.rescode!=Mt.rescode||It.resi!=Mt.resi){if(T0&&It!=null){var gg=(Qp=new m.Vector3().addVectors(It,Mt).multiplyScalar(.5)).clone().sub(T0).multiplyScalar(.02);Qp.add(gg),o.drawCylinder(Q0,Qp,T0,K,b.CC.color(T0.color),0,2),Qp=null,T0=null}Yt=C1(Mt,tt),G0.push(Yt),Zo=(0,M.isNumeric)(tt.thickness)?tt.thickness:le,It=Mt,(aa=new m.Vector3(It.x,It.y,It.z)).resi=It.resi,Wt=Yt}Mt.clickable!==!0&&Mt.hoverable!==!0||Mt.intersectionShape!==void 0&&Mt.intersectionShape.triangle!==void 0||(Mt.intersectionShape={sphere:null,cylinder:[],line:[],triangle:[]})}else It!=null&&(Q(It)&&Mt.atom==="O"||u1&&It.atom==="P"&&(Mt.atom==="OP2"||Mt.atom==="O2P")||u1&&It.atom.indexOf("O5")==0&&Mt.atom.indexOf("C5")==0)?((Yo=new m.Vector3(Mt.x,Mt.y,Mt.z)).resi=Mt.resi,Mt.atom!=="OP2"&&Mt.atom!=="O2P"||($p=new m.Vector3(Mt.x,Mt.y,Mt.z))):u1&&Mt.atom.indexOf("O3")==0?Ip=new m.Vector3(Mt.x,Mt.y,Mt.z):(Mt.atom==="N1"&&q1 in zt||Mt.atom==="N3"&&q1 in Zt)&&((T0=new m.Vector3(Mt.x,Mt.y,Mt.z)).color=(0,M.getColorFromStyle)(Mt,tt).getHex());Yo&&aa&&Yo.resi===aa.resi&&(Ut(Pm,J,!0,aa,Yo,Ci,It,Fm,H1),Ci=Yo,aa=null,Yo=null,G0.push(Yt))}}T0&&(Qp=Ip?new m.Vector3().addVectors(It,Ip).multiplyScalar(.5):new m.Vector3(It.x,It.y,It.z),o.drawCylinder(Q0,Qp,T0,K,b.CC.color(T0.color),0,2),Ut(Pm,J,!0,Ip,$p,Ci,It,Fm,H1),G0.push(Yt)),W1(!1);var Pg=function(vg,jg){if(vg.style.cartoon.gapcutoff&&vg.style.cartoon.gapcutoff==jg.style.cartoon.gapcutoff){let Fv=vg.style.cartoon.gapcutoff,Pv=jg.resi-vg.resi;if(Pv>0&&Pv<Fv){let fy=.25,ty=jg.x-vg.x,wv=jg.y-vg.y,py=jg.z-vg.z,Zv=Math.sqrt(ty*ty+wv*wv+py*py),ry=Zv/(2*Pv),my=new m.Vector3(vg.x,vg.y,vg.z),Ry=Zv/ry,gy=new m.Vector3((jg.x-vg.x)/Ry,(jg.y-vg.y)/Ry,(jg.z-vg.z)/Ry);my.add({x:gy.x/2,y:gy.y/2,z:gy.z/2});let Py=my.clone().add(gy);gy.multiplyScalar(2);let Mv=(0,M.extend)({},vg);for(var mv=0;mv<Pv;mv++){Mv.resi+=1;let jv=C1(Mv,Mv.style.cartoon);o.drawCylinder(Q0,my,Py,fy,b.CC.color(jv),a.FLAT,a.FLAT),my.add(gy),Py.add(gy)}W1(!1)}}};for(let vg of s1)Pg(vg[0],vg[1])}var zp=t(797),sa=t(865),qo=t(392);function ae(o0,p){for(var R=[[]],W=(p=p||{}).assignBonds===void 0||p.assignBonds,J=o0.trimStart().split(/\r?\n|\r/);J.length>0&&!(J.length<3);){var Et=parseInt(J[0]);if(isNaN(Et)||Et<=0||J.length<Et+2)break;var tt=/Lattice\s*=\s*["\{\}]([^"\{\}]+)["\{\}]\s*/gi.exec(J[1]);if(tt!=null&&tt.length>1){var Dt=new Float32Array(tt[1].split(/\s+/)),It=new s.Matrix3(Dt[0],Dt[3],Dt[6],Dt[1],Dt[4],Dt[7],Dt[2],Dt[5],Dt[8]);R.modelData=[{cryst:{matrix:It}}]}for(var Mt=2,Wt=R[R.length-1].length,Yt=Wt+Et,Zo=Wt;Zo<Yt;Zo++){var wi=J[Mt++].trim().split(/\s+/),aa={};aa.serial=Zo;var Yo=wi[0];aa.atom=aa.elem=Yo[0].toUpperCase()+Yo.substring(1,2).toLowerCase(),aa.x=parseFloat(wi[1]),aa.y=parseFloat(wi[2]),aa.z=parseFloat(wi[3]),aa.hetflag=!0,aa.bonds=[],aa.bondOrder=[],aa.properties={},R[R.length-1][Zo]=aa,wi.length>=7&&(aa.dx=parseFloat(wi[4]),aa.dy=parseFloat(wi[5]),aa.dz=parseFloat(wi[6]))}if(!p.multimodel)break;R.push([]),J.splice(0,Mt)}if(W)for(let Ip=0;Ip<R.length;Ip++)(0,qo.assignBonds)(R[Ip],p);if(p.onemol){var Ci=R;(R=[]).push(Ci[0]);for(let Ip=1;Ip<Ci.length;Ip++){let $p=R[0].length;for(let Qp=0;Qp<Ci[Ip].length;Qp++){let T0=Ci[Ip][Qp];for(let g0=0;g0<T0.bonds.length;g0++)T0.bonds[g0]=T0.bonds[g0]+$p;T0.index=R[0].length,T0.serial=R[0].length,R[0].push(T0)}}}return R}function wp(o0,p){var R="V2000",W=o0.split(/\r?\n|\r/);return W.length>3&&W[3].length>38&&(R=W[3].substring(34,39)),R==="V2000"?(function(J,Et){var tt=[[]],Dt=!1;for(Et.keepH!==void 0&&(Dt=!Et.keepH);J.length>0&&!(J.length<4);){var It=parseInt(J[3].substring(0,3));if(isNaN(It)||It<=0)break;var Mt=parseInt(J[3].substring(3,6)),Wt=4;if(J.length<4+It+Mt)break;var Yt,Zo,wi=[],aa=tt[tt.length-1].length,Yo=aa+It;for(Yt=aa;Yt<Yo;Yt++,Wt++){var Ci={},Ip=(Zo=J[Wt]).substring(31,34).replace(/ /g,"");Ci.atom=Ci.elem=Ip[0].toUpperCase()+Ip.substring(1).toLowerCase(),Ci.elem==="H"&&Dt||(Ci.serial=Yt,wi[Yt]=tt[tt.length-1].length,Ci.x=parseFloat(Zo.substring(0,10)),Ci.y=parseFloat(Zo.substring(10,20)),Ci.z=parseFloat(Zo.substring(20,30)),Ci.hetflag=!0,Ci.bonds=[],Ci.bondOrder=[],Ci.properties={},Ci.index=tt[tt.length-1].length,tt[tt.length-1].push(Ci))}for(Yt=0;Yt<Mt;Yt++,Wt++){Zo=J[Wt];var $p=wi[parseInt(Zo.substring(0,3))-1+aa],Qp=wi[parseInt(Zo.substring(3,6))-1+aa],T0=parseFloat(Zo.substring(6));$p!==void 0&&Qp!==void 0&&(tt[tt.length-1][$p].bonds.push(Qp),tt[tt.length-1][$p].bondOrder.push(T0),tt[tt.length-1][Qp].bonds.push($p),tt[tt.length-1][Qp].bondOrder.push(T0))}if(!Et.multimodel)break;for(Et.onemol||tt.push([]);J[Wt]!=="$$$$"&&Wt<J.length;)Wt++;J.splice(0,++Wt)}return tt})(W,p):R==="V3000"?(function(J,Et){var tt=[[]],Dt=!1;for(Et.keepH!==void 0&&(Dt=!Et.keepH);J.length>0&&!(J.length<8)&&J[4].startsWith("M  V30 BEGIN CTAB")&&J[5].startsWith("M  V30 COUNTS")&&!(J[5].length<14);){var It=J[5].substring(13).match(/\S+/g);if(It.length<2)break;var Mt=parseInt(It[0]);if(isNaN(Mt)||Mt<=0)break;var Wt=parseInt(It[1]),Yt=7;if(J.length<8+Mt+Wt)break;var Zo,wi=[],aa=tt[tt.length-1].length,Yo=aa+Mt;for(Zo=aa;Zo<Yo;Zo++,Yt++){var Ci=J[Yt].substring(6).match(/\S+/g);if(Ci.length>4){var Ip={},$p=Ci[1].replace(/ /g,"");Ip.atom=Ip.elem=$p[0].toUpperCase()+$p.substring(1).toLowerCase(),Ip.elem==="H"&&Dt||(Ip.serial=Zo,wi[Zo]=tt[tt.length-1].length,Ip.x=parseFloat(Ci[2]),Ip.y=parseFloat(Ci[3]),Ip.z=parseFloat(Ci[4]),Ip.hetflag=!0,Ip.bonds=[],Ip.bondOrder=[],Ip.properties={},Ip.index=tt[tt.length-1].length,tt[tt.length-1].push(Ip))}}if(J[Yt]!=="M  V30 END ATOM"||(Yt++,Wt===0||J[Yt]!=="M  V30 BEGIN BOND"))break;for(Yt++,Zo=0;Zo<Wt;Zo++,Yt++){var Qp=J[Yt].substring(6).match(/\S+/g);if(Qp.length>3){var T0=wi[parseInt(Qp[2])-1+aa],g0=wi[parseInt(Qp[3])-1+aa],U0=parseFloat(Qp[1]);T0!==void 0&&g0!==void 0&&(tt[tt.length-1][T0].bonds.push(g0),tt[tt.length-1][T0].bondOrder.push(U0),tt[tt.length-1][g0].bonds.push(T0),tt[tt.length-1][g0].bondOrder.push(U0))}}if(!Et.multimodel)break;for(Et.onemol||tt.push([]);J[Yt]!=="$$$$"&&Yt<J.length;)Yt++;J.splice(0,++Yt)}return tt})(W,p):[[""]]}function Cp(o0,p){var R=[[]];typeof o0=="string"&&(o0=JSON.parse(o0));for(var W=o0.m,J=W[0].a,Et=W[0].b,tt=W[0].s,Dt=p!==void 0&&p.parseStyle!==void 0?p.parseStyle:tt!==void 0,It=R[R.length-1].length,Mt=0;Mt<J.length;Mt++){var Wt=J[Mt],Yt={};Yt.id=Wt.i,Yt.x=Wt.x,Yt.y=Wt.y,Yt.z=Wt.z||0,Yt.bonds=[],Yt.bondOrder=[];var Zo=Wt.l||"C";Yt.elem=Zo[0].toUpperCase()+Zo.substring(1).toLowerCase(),Yt.serial=R[R.length-1].length,Dt&&(Yt.style=tt[Wt.s||0]),R[R.length-1].push(Yt)}for(let wi=0;wi<Et.length;wi++){let aa=Et[wi],Yo=aa.b+It,Ci=aa.e+It,Ip=aa.o||1,$p=R[R.length-1][Yo],Qp=R[R.length-1][Ci];$p.bonds.push(Ci),$p.bondOrder.push(Ip),Qp.bonds.push(Yo),Qp.bondOrder.push(Ip)}return R}function Kt(o0,p){(function(Mt,Wt){const Yt=Wt||3.2,Zo=Yt*Yt,wi=[];for(let aa=0,Yo=Mt.length;aa<Yo;aa++){Mt[aa].index=aa;const Ci=Mt[aa];Ci.hetflag||Ci.atom!=="N"&&Ci.atom!=="O"||(wi.push(Ci),Ci.hbondOther=null,Ci.hbondDistanceSq=Number.POSITIVE_INFINITY)}wi.sort(function(aa,Yo){return aa.z-Yo.z});for(let aa=0,Yo=wi.length;aa<Yo;aa++){const Ci=wi[aa];for(let Ip=aa+1;Ip<Yo;Ip++){const $p=wi[Ip],Qp=$p.z-Ci.z;if(Qp>Yt)break;if($p.atom==Ci.atom)continue;const T0=Math.abs($p.y-Ci.y);if(T0>Yt)continue;const g0=Math.abs($p.x-Ci.x);if(g0>Yt)continue;const U0=g0*g0+T0*T0+Qp*Qp;U0>Zo||$p.chain==Ci.chain&&Math.abs($p.resi-Ci.resi)<4||(U0<Ci.hbondDistanceSq&&(Ci.hbondOther=$p,Ci.hbondDistanceSq=U0),U0<$p.hbondDistanceSq&&($p.hbondOther=Ci,$p.hbondDistanceSq=U0))}}})(o0,p);const R={};let W,J,Et,tt,Dt,It;for(W=0,J=o0.length;W<J;W++)if(Dt=o0[W],R[Dt.chain]===void 0&&(R[Dt.chain]=[]),isFinite(Dt.hbondDistanceSq)){const Mt=Dt.hbondOther;R[Mt.chain]===void 0&&(R[Mt.chain]=[]),Math.abs(Mt.resi-Dt.resi)===4&&(R[Dt.chain][Dt.resi]="h")}for(Et in R)for(tt=1;tt<R[Et].length-1;tt++){const Mt=R[Et][tt-1],Wt=R[Et][tt+1];It=R[Et][tt],Mt=="h"&&Mt==Wt&&It!=Mt&&(R[Et][tt]=Mt)}for(W=0,J=o0.length;W<J;W++)Dt=o0[W],isFinite(Dt.hbondDistanceSq)&&R[Dt.chain][Dt.resi]!="h"&&Dt.ss!=="h"&&(R[Dt.chain][Dt.resi]="maybesheet");for(let Mt=0,Wt=o0.length;Mt<Wt;Mt++)if(Dt=o0[Mt],isFinite(Dt.hbondDistanceSq)&&R[Dt.chain][Dt.resi]=="maybesheet"){let Yt=Dt.hbondOther,Zo=R[Yt.chain][Yt.resi];Zo!="maybesheet"&&Zo!="s"||(R[Dt.chain][Dt.resi]="s",R[Yt.chain][Yt.resi]="s")}for(let Mt in R){for(let Wt=1;Wt<R[Mt].length-1;Wt++){const Yt=R[Mt][Wt-1],Zo=R[Mt][Wt+1];It=R[Mt][Wt],Yt=="s"&&Yt==Zo&&It!=Yt&&(R[Mt][Wt]=Yt)}for(let Wt=0;Wt<R[Mt].length;Wt++){const Yt=R[Mt][Wt];Yt!="h"&&Yt!="s"||R[Mt][Wt-1]!=Yt&&R[Mt][Wt+1]!=Yt&&delete R[Mt][Wt]}}for(W=0,J=o0.length;W<J;W++)Dt=o0[W],It=R[Dt.chain][Dt.resi],delete Dt.hbondOther,delete Dt.hbondDistanceSq,It!==void 0&&It!=="maybesheet"&&(Dt.ss=It,R[Dt.chain][Dt.resi-1]!=It&&(Dt.ssbegin=!0),R[Dt.chain][Dt.resi+1]!=It&&(Dt.ssend=!0))}function h0(o0,p,R,W){const J=!R.duplicateAssemblyAtoms,Et=p.length;let tt=Et,Dt=-1,It=null,Mt=null;(R.normalizeAssembly||R.wrapAtoms)&&W&&(It=(0,s.conversionMatrix3)(W.a,W.b,W.c,W.alpha,W.beta,W.gamma),Mt=new s.Matrix3,Mt.getInverse3(It));let Wt=function(wi){let aa=wi.clone().applyMatrix3(Mt);const Yo=[aa.x,aa.y,aa.z],Ci=[0,0,0];for(let $p=0;$p<3;$p++){for(;Yo[$p]<-.001;)Yo[$p]+=1,Ci[$p]+=1;for(;Yo[$p]>1.001;)Yo[$p]-=1,Ci[$p]-=1}const Ip=new s.Vector3(Ci[0],Ci[1],Ci[2]);return Ip.applyMatrix3(It),Ip};if(R.normalizeAssembly&&W)for(let wi=0;wi<o0.length;wi++){const aa=new s.Vector3(0,0,0);for(let Ci=0;Ci<Et;Ci++){const Ip=new s.Vector3(p[Ci].x,p[Ci].y,p[Ci].z);Ip.applyMatrix4(o0[wi]),aa.add(Ip)}aa.divideScalar(Et);const Yo=Wt(aa);o0[wi].isNearlyIdentity()&&Yo.lengthSq()>.001&&(Dt=wi),o0[wi].translate(Yo)}if(J){if(o0.length>1)for(let wi=0;wi<p.length;wi++){var Yt=[];for(let aa=0;aa<o0.length;aa++)if(!o0[aa].isNearlyIdentity()){var Zo=new s.Vector3;Zo.set(p[wi].x,p[wi].y,p[wi].z),Zo.applyMatrix4(o0[aa]),Yt.push(Zo)}p[wi].symmetries=Yt}}else{for(let wi=0;wi<Et;wi++)p[wi].sym=-1;for(let wi=0;wi<o0.length;wi++)if(o0[wi].isNearlyIdentity()||Dt==wi)for(let aa=0;aa<Et;aa++)p[aa].sym=wi;else{let aa=new s.Vector3;for(let Yo=0;Yo<Et;Yo++){const Ci=[];for(let $p=0;$p<p[Yo].bonds.length;$p++)Ci.push(p[Yo].bonds[$p]+tt);if(aa.set(p[Yo].x,p[Yo].y,p[Yo].z),aa.applyMatrix4(o0[wi]),R.wrapAtoms&&W){let $p=Wt(aa);aa.add($p)}const Ip={};for(const $p in p[Yo])Ip[$p]=p[Yo][$p];Ip.x=aa.x,Ip.y=aa.y,Ip.z=aa.z,Ip.bonds=Ci,Ip.sym=wi,Ip.index=p.length,p.push(Ip)}tt=p.length}if(R.wrapAtoms&&W){let wi=new s.Vector3;for(let aa=0;aa<Et;aa++){wi.set(p[aa].x,p[aa].y,p[aa].z);let Yo=Wt(wi);wi.add(Yo),p[aa].x=wi.x,p[aa].y=wi.y,p[aa].z=wi.z}}if(Dt>=0){const wi=new s.Vector3;for(let aa=0;aa<Et;aa++)wi.set(p[aa].x,p[aa].y,p[aa].z),wi.applyMatrix4(o0[Dt]),p[aa].x=wi.x,p[aa].y=wi.y,p[aa].z=wi.z}o0.length=0}}var Pp=t(408);const d0=new Set(["ABU","ACD","ALA","ALB","ALI","ARG","AR0","ASN","ASP","ASX","BAS","CYS","CYH","CYX","CSS","CSH","GLN","GLU","GLX","GLY","HIS","HIE","HID","HIP","HYP","ILE","ILU","LEU","LYS","MET","PCA","PGA","PHE","PR0","PRO","PRZ","SER","THR","TRP","TYR","VAL","A","1MA","C","5MC","OMC","G","1MG","2MG","M2G","7MG","OMG","YG","I","T","U","+U","H2U","5MU","PSU","ACE","F0R","H2O","HOH","WAT"]);function x0(o0,p){const R=[],W=[];for(let Dt=0,It=o0.length;Dt<It;Dt++){const Mt=o0[Dt];Mt.index=Dt,Mt.hetflag||!d0.has(Mt.resn)?W.push(Mt):R.push(Mt)}(0,qo.assignBonds)(W,p),R.sort(function(Dt,It){return Dt.chain!==It.chain?Dt.chain<It.chain?-1:1:Dt.resi-It.resi});let J,Et=-1,tt=-1;for(let Dt=0,It=R.length;Dt<It;Dt++){const Mt=R[Dt];Mt.resi!==Et&&(Et=Mt.resi,J||tt++,J=!1),Mt.reschain=tt;for(let Wt=Dt+1;Wt<R.length;Wt++){const Yt=R[Wt];if(Yt.chain!==Mt.chain||Yt.resi-Mt.resi>1)break;(0,Pp.areConnected)(Mt,Yt,p)&&(Mt.bonds.indexOf(Yt.index)===-1&&(Mt.bonds.push(Yt.index),Mt.bondOrder.push(1),Yt.bonds.push(Mt.index),Yt.bondOrder.push(1)),Mt.resi!==Yt.resi&&(J=!0))}}}const Dp=function(o0,p,R,W){return new s.Vector3(p,R,W).applyMatrix3(o0)};function c0(o0,p={}){const R=[],W=!p.doAssembly,J=R.modelData=[],Et=p.assignBonds===void 0||p.assignBonds;function tt(Zo,wi){const aa=[];let Yo=0,Ci=0;for(;Ci<Zo.length;){for(;Zo.substring(Ci,Ci+wi.length)!==wi&&Ci<Zo.length;)if(Zo[Ci]==="'"){for(Ci++;Ci<Zo.length&&Zo[Ci]!=="'";)Ci++;for(;Zo.substring(Ci,Ci+wi.length)!==wi&&Ci<Zo.length;)Ci++}else if(Zo[Ci]==='"'){for(Ci++;Ci<Zo.length&&Zo[Ci]!=='"';)Ci++;Ci++}else Ci++;aa.push(Zo.substring(Yo,Ci)),Yo=Ci+=wi.length}return aa}const Dt=o0.split(/\r?\n|\r/),It=[];let Mt=!1;for(let Zo=0;Zo<Dt.length;Zo++){var Wt=Dt[Zo].split("#")[0];if(Mt?Wt[0]===";"&&(Mt=!1):Wt[0]===";"&&(Mt=!0),Mt||Wt!==""){if(!Mt&&(Wt=Wt.trim())[0]==="_"){const wi=Wt.split(/\s/)[0].indexOf(".");if(wi>-1){let aa=Wt.split("");aa[wi]="_",Wt=(Wt=aa.join("")).substring(0,wi)+"_"+Wt.substring(wi+1)}}It.push(Wt)}}let Yt=0;for(;Yt<It.length;){for(;!It[Yt].startsWith("data_")||It[Yt]==="data_global";)Yt++;Yt++;const Zo={};for(;Yt<It.length&&!It[Yt].startsWith("data_");)if(It[Yt][0]===void 0)Yt++;else if(It[Yt][0]==="_"){const Ci=It[Yt].split(/\s/)[0].toLowerCase(),Ip=Zo[Ci]=Zo[Ci]||[],$p=It[Yt].substring(It[Yt].indexOf(Ci)+Ci.length);if($p==="")if(Yt++,It[Yt][0]===";"){let Qp=It[Yt].substring(1);for(Yt++;It[Yt]!==";";)Qp=Qp+`
`+It[Yt],Yt++;Ip.push(Qp)}else Ip.push(It[Yt]);else Ip.push($p.trim());Yt++}else if(It[Yt].substring(0,5)==="loop_"){Yt++;const Ci=[];for(;It[Yt]===""||It[Yt][0]==="_";){if(It[Yt]!==""){let $p=It[Yt].split(/\s/)[0].toLowerCase(),Qp=Zo[$p]=Zo[$p]||[];Ci.push(Qp)}Yt++}let Ip=0;for(;Yt<It.length&&It[Yt][0]!=="_"&&!It[Yt].startsWith("loop_")&&!It[Yt].startsWith("data_");){let $p=tt(It[Yt]," ");for(let Qp=0;Qp<$p.length;Qp++)$p[Qp]!==""&&(Ci[Ip].push($p[Qp]),Ip=(Ip+1)%Ci.length);Yt++}}else Yt++;J.push({symmetries:[]}),R.push([]);const wi=Zo._atom_site_id!==void 0?Zo._atom_site_id.length:Zo._atom_site_label.length;let aa;if(Zo._cell_length_a!==void 0){const Ci=parseFloat(Zo._cell_length_a),Ip=parseFloat(Zo._cell_length_b),$p=parseFloat(Zo._cell_length_c),Qp=parseFloat(Zo._cell_angle_alpha)||90,T0=parseFloat(Zo._cell_angle_beta)||90,g0=parseFloat(Zo._cell_angle_gamma)||90;aa=(0,s.conversionMatrix3)(Ci,Ip,$p,Qp,T0,g0),J[J.length-1].cryst={a:Ci,b:Ip,c:$p,alpha:Qp,beta:T0,gamma:g0}}for(let Ci=0;Ci<wi;Ci++){if(Zo._atom_site_group_pdb!==void 0&&Zo._atom_site_group_pdb[Ci]==="TER")continue;const Ip={};if(Zo._atom_site_cartn_x!==void 0)Ip.x=parseFloat(Zo._atom_site_cartn_x[Ci]),Ip.y=parseFloat(Zo._atom_site_cartn_y[Ci]),Ip.z=parseFloat(Zo._atom_site_cartn_z[Ci]);else{const Qp=Dp(aa,parseFloat(Zo._atom_site_fract_x[Ci]),parseFloat(Zo._atom_site_fract_y[Ci]),parseFloat(Zo._atom_site_fract_z[Ci]));Ip.x=Qp.x,Ip.y=Qp.y,Ip.z=Qp.z}Ip.chain=Zo._atom_site_auth_asym_id?Zo._atom_site_auth_asym_id[Ci]:Zo._atom_site_label_asym_id?Zo._atom_site_label_asym_id[Ci]:void 0,Ip.lchain=Zo._atom_site_label_asym_id?Zo._atom_site_label_asym_id[Ci]:void 0,Ip.resi=Zo._atom_site_auth_seq_id?parseInt(Zo._atom_site_auth_seq_id[Ci]):Zo._atom_site_label_seq_id?Zo._atom_site_label_seq_id[Ci]:void 0,Ip.resn=Zo._atom_site_auth_comp_id?Zo._atom_site_auth_comp_id[Ci].trim():Zo._atom_site_label_comp_id?Zo._atom_site_label_comp_id[Ci].trim():void 0,Ip.atom=Zo._atom_site_auth_atom_id?Zo._atom_site_auth_atom_id[Ci].replace(/"/gm,""):Zo._atom_site_label_atom_id?Zo._atom_site_label_atom_id[Ci].replace(/"/gm,""):void 0,Ip.hetflag=!Zo._atom_site_group_pdb||Zo._atom_site_group_pdb[Ci]==="HETA"||Zo._atom_site_group_pdb[Ci]==="HETATM",Zo._atom_site_b_iso_or_equiv&&(Ip.b=parseFloat(Zo._atom_site_b_iso_or_equiv[Ci]));let $p="X";Zo._atom_site_type_symbol?$p=Zo._atom_site_type_symbol[Ci].replace(/\(?\+?\d+.*/,""):Zo._atom_site_label&&($p=Zo._atom_site_label[Ci].split("_")[0].replace(/\(?\d+.*/,"")),Ip.elem=$p[0].toUpperCase()+$p.substring(1,2).toLowerCase(),Ip.bonds=[],Ip.ss="c",Ip.serial=Ci,Ip.bondOrder=[],Ip.properties={},R[R.length-1].push(Ip)}if(Zo._pdbx_struct_oper_list_id!==void 0&&!W)for(let Ci=0;Ci<Zo._pdbx_struct_oper_list_id.length;Ci++){const Ip=parseFloat(Zo["_pdbx_struct_oper_list_matrix[1][1]"][Ci]),$p=parseFloat(Zo["_pdbx_struct_oper_list_matrix[1][2]"][Ci]),Qp=parseFloat(Zo["_pdbx_struct_oper_list_matrix[1][3]"][Ci]),T0=parseFloat(Zo["_pdbx_struct_oper_list_vector[1]"][Ci]),g0=parseFloat(Zo["_pdbx_struct_oper_list_matrix[2][1]"][Ci]),U0=parseFloat(Zo["_pdbx_struct_oper_list_matrix[2][2]"][Ci]),Y0=parseFloat(Zo["_pdbx_struct_oper_list_matrix[2][3]"][Ci]),Q0=parseFloat(Zo["_pdbx_struct_oper_list_vector[2]"][Ci]),tm=parseFloat(Zo["_pdbx_struct_oper_list_matrix[3][1]"][Ci]),G0=parseFloat(Zo["_pdbx_struct_oper_list_matrix[3][2]"][Ci]),Pm=parseFloat(Zo["_pdbx_struct_oper_list_matrix[3][3]"][Ci]),km=parseFloat(Zo["_pdbx_struct_oper_list_vector[3]"][Ci]),i1=new s.Matrix4(Ip,$p,Qp,T0,g0,U0,Y0,Q0,tm,G0,Pm,km);J[J.length-1].symmetries.push(i1)}const Yo=function(Ci){const Ip=Ci.match("-"),$p=(Ci=Ci.replace(/[-xyz]/g,"")).split("/");let Qp,T0;return T0=$p[1]===void 0?1:parseInt($p[1]),Qp=$p[0]===""?1:parseInt($p[0]),Qp/T0*(Ip?-1:1)};if(Zo._symmetry_equiv_pos_as_xyz!==void 0&&!W)for(let Ci=0;Ci<Zo._symmetry_equiv_pos_as_xyz.length;Ci++){const Ip=Zo._symmetry_equiv_pos_as_xyz[Ci].replace(/["' ]/g,"").split(",").map(function(g0){return g0.replace(/-/g,"+-")});let $p=new s.Matrix4(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1);for(let g0=0;g0<3;g0++){const U0=Ip[g0].split("+");for(let Y0=0;Y0<U0.length;Y0++){const Q0=U0[Y0];if(Q0==="")continue;const tm=Yo(Q0);Q0.match("x")?$p.elements[g0+0]=tm:Q0.match("y")?$p.elements[g0+4]=tm:Q0.match("z")?$p.elements[g0+8]=tm:$p.elements[g0+12]=tm}}const Qp=aa.getMatrix4(),T0=new s.Matrix4().getInverse(Qp,!0);$p=new s.Matrix4().multiplyMatrices($p,T0),$p=new s.Matrix4().multiplyMatrices(Qp,$p),J[J.length-1].symmetries.push($p)}}for(let Zo=0;Zo<R.length;Zo++)!Et||p.duplicateAssemblyAtoms&&!p.dontConnectDuplicatedAtoms||x0(R[Zo],p),Kt(R[Zo],p.hbondCutoff),h0(J[Zo].symmetries,R[Zo],p,J[Zo].cryst),p.duplicateAssemblyAtoms&&!p.dontConnectDuplicatedAtoms&&Et&&x0(R[Zo],p);return R}let u0={"C.1":"C",C1:"C","C.2":"C",C2:"C","C.3":"C",C3:"C","C.ar":"C",Car:"C","C.cat":"C",Ccat:"C","H.spc":"H",Hspc:"H","H.t3p":"H",Ht3p:"H","N.1":"N",N1:"N","N.2":"N",N2:"N","N.3":"N",N3:"N","N.4":"N",N4:"N","N.am":"N",Nam:"N","N.ar":"N",Nar:"N","N.p13":"N",Np13:"N","O.2":"O",O2:"O","O.3":"O",O3:"O","O.co2":"O",Oco2:"O","O.spc":"O",Ospc:"O","O.t3p":"O",Ot3p:"O","P.3":"P",P3:"P","S.2":"S",S2:"S","S.3":"S",S3:"S","S.o":"S",So:"S","S.o2":"S",So2:"S"};function y0(o0,p){var R=[[]],W=!1;p.keepH!==void 0&&(W=!p.keepH);var J=o0.search(/@<TRIPOS>MOLECULE/),Et=o0.search(/@<TRIPOS>ATOM/);if(J==-1||Et==-1)return R;for(var tt=o0.substring(J).split(/\r?\n|\r/);tt.length>0;){var Dt=[],It=tt[2].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),Mt=parseInt(It[0]),Wt=0;It.length>1&&(Wt=parseInt(It[1]));var Yt,Zo=4;for(Yt=3;Yt<tt.length;Yt++)if(tt[Yt]=="@<TRIPOS>ATOM"){Zo=Yt+1;break}var wi=R[R.length-1].length,aa=wi+Mt;for(Yt=wi;Yt<aa;Yt++){var Yo={},Ci=(It=tt[Zo++].replace(/^\s+/,"").replace(/\s+/g," ").split(" "))[5];if(Ci=u0[Ci]!==void 0?u0[Ci]:(Ci=Ci.split(".")[0])[0].toUpperCase()+Ci.substring(1).toLowerCase(),Yo.atom=It[1],Yo.elem=Ci,!(Yo.elem=="H"&&W)){var Ip=R[R.length-1].length,$p=parseInt(It[0]);Yo.serial=$p,Yo.x=parseFloat(It[2]),Yo.y=parseFloat(It[3]),Yo.z=parseFloat(It[4]),Yo.atom=It[5];var Qp=parseFloat(It[8]);Yo.index=Ip,Yo.bonds=[],Yo.bondOrder=[],Yo.properties={charge:Qp,partialCharge:Qp},Dt[$p]=Ip,R[R.length-1].push(Yo)}}for(var T0=!1;Zo<tt.length;)if(tt[Zo++]=="@<TRIPOS>BOND"){T0=!0;break}if(T0&&Wt)for(Yt=0;Yt<Wt;Yt++){It=tt[Zo++].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");var g0=parseInt(It[1]),U0=R[R.length-1][Dt[g0]],Y0=parseInt(It[2]),Q0=R[R.length-1][Dt[Y0]],tm=parseInt(It[3]);isNaN(tm)&&(tm=1),U0!==void 0&&Q0!==void 0&&(U0.bonds.push(Dt[Y0]),U0.bondOrder.push(tm),Q0.bonds.push(Dt[g0]),Q0.bondOrder.push(tm))}if(!p.multimodel)break;p.onemol||R.push([]),tt.splice(0,Zo),o0=tt.join(`
`)}return R}var M0=t(40);function sm(o0,p){let R=o0.replace(/ /g,"");return R.length>0&&R[0]==="H"&&R!=="Hg"&&R!=="He"&&R!=="Hf"&&R!=="Hs"&&R!=="Ho"&&(R="H"),R.length>1&&(R=R[0].toUpperCase()+R.substring(1).toLowerCase(),M0.bondTable[R]===void 0?R=R[0]:p&&(R==="Ca"||R==="Cd")&&(R="C")),R}function mm(o0){for(const p in o0)return!1;return!0}function Mm(o0,p,R){const W=[],J=p.assignBonds===void 0||p.assignBonds,Et=!p.keepH,tt=!!p.noSecondaryStructure,Dt=!p.noComputeSecondaryStructure,It=!p.doAssembly,Mt=p.altLoc?p.altLoc:"A",Wt={symmetries:[],cryst:void 0};let Yt,Zo=[];const wi=[];let aa;const Yo={};for(let Ci=0;Ci<o0.length;Ci++){aa=o0[Ci].replace(/^\s*/,"");const Ip=aa.substring(0,6);let $p,Qp,T0;if(Ip.indexOf("END")===0){if(Zo=o0.slice(Ci+1),Ip==="END")for(const g0 in R)R.hasOwnProperty(g0)&&delete R[g0];break}if(Ip==="ATOM  "||Ip==="HETATM"){let g0,U0,Y0,Q0,tm,G0,Pm,km,i1,Qm,_1,C1;if(_1=aa.substring(16,17),_1!==" "&&_1!==Mt&&Mt!=="*"||(Qm=parseInt(aa.substring(6,11)),Yt=aa.substring(12,16).replace(/ /g,""),g0=aa.substring(17,20).replace(/ /g,""),U0=aa.substring(21,22),Y0=parseInt(aa.substring(22,26)),Q0=aa.substring(26,27),tm=parseFloat(aa.substring(30,38)),G0=parseFloat(aa.substring(38,46)),Pm=parseFloat(aa.substring(46,54)),C1=parseFloat(aa.substring(60,68)),i1=aa.substring(76,78).replace(/ /g,""),i1=i1===""||M0.bondTable[i1]===void 0?sm(aa.substring(12,14),aa[0]=="A"):i1[0].toUpperCase()+i1.substring(1).toLowerCase(),i1==="H"&&Et))continue;km=Ip[0]=="H",wi[Qm]=W.length,W.push({resn:g0,x:tm,y:G0,z:Pm,elem:i1,hetflag:km,altLoc:_1,chain:U0,resi:Y0,icode:Q0,rescode:Y0+(Q0!==" "?"^"+Q0:""),serial:Qm,atom:Yt,bonds:[],ss:"c",bondOrder:[],properties:{},b:C1,pdbline:aa})}else if(Ip==="SHEET "){$p=aa.substring(21,22),Qp=parseInt(aa.substring(22,26)),T0=parseInt(aa.substring(33,37)),$p in R||(R[$p]={}),R[$p][Qp]="s1";for(let g0=Qp+1;g0<T0;g0++)R[$p][g0]="s";R[$p][T0]="s2"}else if(Ip==="CONECT"){const g0=wi[parseInt(aa.substring(6,11))],U0=W[g0],Y0=[11,16,21,26];for(let Q0=0;Q0<4;Q0++){const tm=wi[parseInt(aa.substring(Y0[Q0],Y0[Q0]+5))];let G0=g0+":"+tm;const Pm=W[tm];if(U0!==void 0&&Pm!==void 0)if(Yo[G0]){Yo[G0]+=1;for(let km=0;km<U0.bonds.length;km++)if(U0.bonds[km]==tm){const i1=Yo[G0];U0.bondOrder[km]=i1>=4?1:i1}}else Yo[G0]=1,U0.bonds.length!=0&&U0.bonds[U0.bonds.length-1]===tm||(U0.bonds.push(tm),U0.bondOrder.push(1))}}else if(Ip==="HELIX "){$p=aa.substring(19,20),Qp=parseInt(aa.substring(21,25)),T0=parseInt(aa.substring(33,37)),$p in R||(R[$p]={}),R[$p][Qp]="h1";for(let g0=Qp+1;g0<T0;g0++)R[$p][g0]="h";R[$p][T0]="h2"}else if(It||Ip!=="REMARK"||aa.substring(13,18)!=="BIOMT"){if(Ip==="CRYST1"){let g0,U0,Y0,Q0,tm,G0;g0=parseFloat(aa.substring(7,15)),U0=parseFloat(aa.substring(16,24)),Y0=parseFloat(aa.substring(25,33)),Q0=parseFloat(aa.substring(34,40)),tm=parseFloat(aa.substring(41,47)),G0=parseFloat(aa.substring(48,54)),Wt.cryst={a:g0,b:U0,c:Y0,alpha:Q0,beta:tm,gamma:G0}}else if(Ip==="ANISOU"){const g0=W[wi[parseInt(aa.substring(6,11))]];if(g0){const U0=aa.substring(30).trim().split(/\s+/),Y0={u11:parseInt(U0[0]),u22:parseInt(U0[1]),u33:parseInt(U0[2]),u12:parseInt(U0[3]),u13:parseInt(U0[4]),u23:parseInt(U0[5])};g0.uMat=Y0}}}else{let g0,U0=new s.Matrix4;for(g0=1;g0<=3;g0++)if(aa=o0[Ci].replace(/^\s*/,""),parseInt(aa.substring(18,19))==g0)U0.elements[g0-1]=parseFloat(aa.substring(23,33)),U0.elements[g0-1+4]=parseFloat(aa.substring(33,43)),U0.elements[g0-1+8]=parseFloat(aa.substring(43,53)),U0.elements[g0-1+12]=parseFloat(aa.substring(53)),Ci++;else for(;aa.substring(13,18)==="BIOMT";)Ci++,aa=o0[Ci].replace(/^\s*/,"");U0.elements[3]=0,U0.elements[7]=0,U0.elements[11]=0,U0.elements[15]=1,Wt.symmetries.push(U0),Ci--}}if((function(Ci,Ip){for(let $p=0,Qp=Ci.length;$p<Qp;$p++){const T0=Ci[$p];for(let g0=0;g0<T0.bonds.length;g0++){const U0=Ci[T0.bonds[g0]],Y0=Ip[T0.serial];U0&&Y0&&U0.bonds.indexOf(Y0)<0&&(U0.bonds.push(Y0),U0.bondOrder.push(T0.bondOrder[g0]))}}})(W,wi),J&&x0(W,p),It||h0(Wt.symmetries,W,p,Wt.cryst),Dt&&!tt&&Kt(W,p.hbondCutoff),!mm(R))for(let Ci=0;Ci<W.length;Ci++){const Ip=W[Ci];if(Ip!==void 0&&Ip.chain in R&&Ip.resi in R[Ip.chain]){const $p=R[Ip.chain][Ip.resi];Ip.ss=$p[0],$p.length>1&&($p[1]=="1"?Ip.ssbegin=!0:$p[1]=="2"&&(Ip.ssend=!0))}}return[W,Wt,Zo]}function v1(o0,p){p=p||{};var R=[],W={};R.modelData=[];for(var J=o0.split(/\r?\n|\r/);J.length>0;){var Et=Mm(J,p,W),tt=Et[0],Dt=Et[1];if(J=Et[2],tt.length!=0){if(p.multimodel&&p.onemol&&R.length>0)for(var It=R[0].length,Mt=0;Mt<tt.length;Mt++){var Wt=tt[Mt];Wt.index=Mt;for(var Yt=0;Yt<Wt.bonds.length;Yt++)Wt.bonds[Yt]+=It;R[0].push(Wt)}else R.modelData.push(Dt),R.push(tt);if(!p.multimodel)break}}return R}function v0(o0,p){var R=[[]],W=!p.noSecondaryStructure;R.modelData=[{symmetries:[]}];var J,Et=[],tt=o0.split(/\r?\n|\r/);for(let T0=0;T0<tt.length;T0++){var Dt=(J=tt[T0].replace(/^\s*/,"")).substring(0,6);if(Dt.indexOf("END")==0){if(p.multimodel){p.onemol||R.push([]);continue}break}if(Dt=="ATOM  "||Dt=="HETATM"){var It;let g0=parseInt(J.substring(6,11)),U0=J.substring(12,16).replace(/ /g,""),Y0=J.substring(17,20).trim(),Q0=J.substring(21,22),tm=parseInt(J.substring(22,26));var Mt=J.substring(30).trim().split(/\s+/),Wt=parseFloat(Mt[0]),Yt=parseFloat(Mt[1]),Zo=parseFloat(Mt[2]),wi=parseFloat(Mt[3]),aa=parseFloat(Mt[4]),Yo=U0[0];U0.length>1&&U0[1].toUpperCase()!=U0[1]&&(Yo=U0.substring(0,2)),It=J[0]=="H",Et[g0]=R[R.length-1].length,R[R.length-1].push({resn:Y0,x:Wt,y:Yt,z:Zo,elem:Yo,hetflag:It,chain:Q0,resi:tm,serial:g0,atom:U0,bonds:[],ss:"c",bondOrder:[],properties:{charge:wi,partialCharge:wi,radius:aa},pdbline:J})}else if(Dt=="CONECT"){var Ci=parseInt(J.substring(6,11)),Ip=R[R.length-1][Et[Ci]];for(let g0=0;g0<4;g0++){var $p=parseInt(J.substring([11,16,21,26][g0],[11,16,21,26][g0]+5)),Qp=R[R.length-1][Et[$p]];Ip!==void 0&&Qp!==void 0&&(Ip.bonds.push(Et[$p]),Ip.bondOrder.push(1))}}}for(let T0=0;T0<R.length;T0++)x0(R[T0],p),W&&Kt(R[T0],p.hbondCutoff);return R}var D1=t(471),P1=function(o0){return String.fromCharCode.apply(null,o0).replace(/\0/g,"")},ig=function(o0){return o0==0||o0==2||o0==4?"h":o0==3?"s":"c"};let w1=new Set(["D-SACCHARIDE","D-SACCHARIDE 1,4 AND 1,4 LINKING","D-SACCHARIDE 1,4 AND 1,6 LINKING","L-SACCHARIDE","L-SACCHARIDE 1,4 AND 1,4 LINKING","L-SACCHARIDE 1,4 AND 1,6 LINKING","NON-POLYMER","OTHER","PEPTIDE-LIKE","SACCHARIDE"]);function o1(o0,p){var R=!p.keepH,W=p.altLoc?p.altLoc:"A",J=!!p.noSecondaryStructure,Et=!p.noComputeSecondaryStructure,tt=!p.doAssembly,Dt=p.assemblyIndex?p.assemblyIndex:0;o0=typeof o0=="string"?(0,M.base64ToArray)(o0):new Uint8Array(o0);var It,Mt,Wt,Yt,Zo,wi,aa=D1.decode(o0),Yo=[[]],Ci=Yo.modelData=[],Ip=0,$p=0,Qp=0,T0=aa.secStructList,g0=aa.bFactorList,U0=aa.altLocList,Y0=aa.occupancyList,Q0=aa.bondAtomList,tm=aa.bondOrderList,G0=aa.numModels;if(G0==0)return Yo;p.multimodel||(G0=1);var Pm=[];if(!tt&&aa.bioAssemblyList&&aa.bioAssemblyList.length>0){var km=aa.bioAssemblyList[Dt].transformList;for(It=0,wi=km.length;It<wi;It++){var i1=new s.Matrix4(km[It].matrix);i1.transpose(),Pm.push(i1)}}var Qm=null;if(aa.unitCell){var _1=aa.unitCell;Qm={a:_1[0],b:_1[1],c:_1[2],alpha:_1[3],beta:_1[4],gamma:_1[5]}}let C1=[];aa.entityList.forEach(Op=>{Op.chainIndexList.forEach(mt=>{C1[mt]=Op.type=="polymer"})});var a1=0;for(Zo=0;Zo<G0;Zo++){var I1=aa.chainsPerModel[Zo],Fm=Yo[Yo.length-1],Km=[];for(Ci.push({symmetries:Pm,cryst:Qm}),It=0;It<I1;++It){var W1=aa.groupsPerChain[Ip],s1=P1(aa.chainIdList.subarray(4*Ip,4*Ip+4));aa.chainNameList&&(s1=P1(aa.chainNameList.subarray(4*Ip,4*Ip+4)));var H1=$p,q1="";for(Mt=0;Mt<W1;++Mt){var u1=aa.groupList[aa.groupTypeList[$p]],eg=u1.atomNameList.length,kg=0,J1=!1,b1=!1;if(T0){kg=T0[$p];var Ug=ig(kg);$p!=0&&Ug==q1||(J1=!0),q1=Ug;var gg=$p+1;(gg>=T0.length||ig(T0[gg]!=Ug))&&(b1=!0)}var Pg=aa.groupIdList[$p],vg=u1.groupName;let Op=u1.chemCompType;var jg=Qp;let mt=w1.has(Op)||!C1[Ip];for(Wt=0;Wt<eg;++Wt){var mv=u1.elementList[Wt];if(R&&mv=="H")Qp+=1;else{var Fv="";g0&&(Fv=g0[Qp]);var Pv="";U0&&U0[Qp]&&(Pv=String.fromCharCode(U0[Qp]));var fy="";if(Y0&&(fy=Y0[Qp]),Pv==""||Pv==W||W=="*"){var ty=aa.atomIdList[Qp],wv=u1.atomNameList[Wt],py=0;u1.atomChargeList&&(py=u1.atomChargeList[Wt]);var Zv=aa.xCoordList[Qp],ry=aa.yCoordList[Qp],my=aa.zCoordList[Qp];Km[Qp]=Fm.length,Fm.push({resn:vg,x:Zv,y:ry,z:my,elem:mv,hetflag:mt,chain:s1,resi:Pg,icode:Pv,rescode:Pg+(Pv!=" "?"^"+Pv:""),serial:ty,altLoc:Pv,index:Qp,atom:wv,bonds:[],ss:ig(kg),ssbegin:J1,ssend:b1,bondOrder:[],properties:{charge:py,occupancy:fy},b:Fv}),Qp+=1}else Qp+=1}}var Ry=u1.bondAtomList;for(Wt=0,Yt=u1.bondOrderList.length;Wt<Yt;++Wt){var gy=jg+Ry[2*Wt],Py=jg+Ry[2*Wt+1],Mv=u1.bondOrderList[Wt],jv=Km[gy],Xv=Km[Py],Jv=Fm[jv],we=Fm[Xv];Jv&&we&&(Jv.bonds.push(Xv),Jv.bondOrder.push(Mv),we.bonds.push(jv),we.bondOrder.push(Mv))}$p+=1}for($p=H1,Mt=0;Mt<W1;++Mt)$p+=1;Ip+=1}if(Q0)for(let Op=a1,mt=Q0.length;Op<mt;Op+=2){let W0=Q0[Op],j0=Q0[Op+1],P0=tm?tm[Op/2]:1;if(W0>=Qp){a1=Op;break}let Wm=Km[W0],dm=Km[j0],U1=Fm[Wm],gm=Fm[dm];U1&&gm&&(U1.bonds.push(dm),U1.bondOrder.push(P0),gm.bonds.push(Wm),gm.bondOrder.push(P0))}p.multimodel&&(p.onemol||Yo.push([]))}if(!tt)for(let Op=0;Op<Yo.length;Op++)h0(Ci[Op].symmetries,Yo[Op],p,Ci[Op].cryst);return Et&&!J&&Kt(Yo,p.hbondCutoff),Yo}function g1(o0){var p,R=[],W=0,J=o0.split(/\r?\n|\r/);if(!(J.length>0&&J[0].includes("VERSION")))return[];{var Et=J.filter(function(aa){return aa.includes("POINTERS")||aa.includes("ATOM_NAME")||aa.includes("CHARGE")||aa.includes("RADII")||aa.includes("BONDS_INC_HYDROGEN")||aa.includes("BONDS_WITHOUT_HYDROGEN")||aa.includes("RESIDUE_LABEL")||aa.includes("RESIDUE_POINTER")}),tt=Yt("POINTERS");if(tt==-1)return[];var Dt=Zo(tt),It=parseInt(J[tt+1].slice(0,Dt[1]));let wi=parseInt(J[tt+2].slice(Dt[1],Dt[0]+Dt[1]));if(isNaN(It)||It<=0)return[];if((tt=Yt("ATOM_NAME"))==-1)return[];var Mt=(Dt=Zo(tt))[0];for(let aa=0;aa<It/Dt[0];aa++){aa==parseInt(It/Dt[0])&&(Mt=It%Dt[0]);for(let Yo=0;Yo<Mt;Yo++){let Ci={},Ip={charge:"",radii:""};Ci.serial=W,Ci.x=0,Ci.y=0,Ci.z=0,Ci.atom=J[tt+1].slice(Dt[1]*Yo,Dt[1]*(Yo+1)).trim(),Ci.elem=J[tt+1].slice(Dt[1]*Yo,Dt[1]*Yo+1).trim(),Ci.properties=Ip,Ci.bonds=[],Ci.bondOrder=[],Ci.index=R.length,R.push(Ci),W++}tt++}if((tt=Yt("CHARGE"))!=-1){W=0,Mt=(Dt=Zo(tt))[0];for(let aa=0;aa<It/Dt[0];aa++){aa==parseInt(It/Dt[0])&&(Mt=It%Dt[0]);for(let Yo=0;Yo<Mt;Yo++)R[W].properties.charge=parseFloat(J[tt+1].slice(Dt[1]*Yo,Dt[1]*(Yo+1))),W++;tt++}}var Wt=[];if((tt=Yt("RESIDUE_POINTER"))!=-1){Mt=(Dt=Zo(tt))[0],tt+=1;for(let aa=0;aa<wi/Dt[0];aa++){aa==parseInt(wi/Dt[0])&&(Mt=wi%Dt[0]);for(let Yo=0;Yo<Mt;Yo++)Wt.push(parseInt(J[tt].slice(Dt[1]*Yo,Dt[1]*(Yo+1))));tt++}if((tt=Yt("RESIDUE_LABEL"))!=-1){let aa=[];Mt=(Dt=Zo(tt))[0],tt+=1;for(let $p=0;$p<wi/Dt[0];$p++){$p==parseInt(wi/Dt[0])&&(Mt=wi%Dt[0]);for(let Qp=0;Qp<Mt;Qp++)aa.push(J[tt].slice(Dt[1]*Qp,Dt[1]*(Qp+1)).trim());tt++}let Yo=0,Ci=0,Ip="";Wt.push(R.length+1);for(let $p=0;$p<R.length;$p++)$p+1>=Wt[Yo]&&(Ip=aa[Yo],Yo+=1,Ci+=1),R[$p].resi=Ci,R[$p].resn=Ip}}if((tt=Yt("RADII"))!=-1){W=0,Mt=(Dt=Zo(tt))[0];for(let aa=0;aa<It/Dt[0];aa++){aa==parseInt(It/Dt[0])&&(Mt=It%Dt[0]);for(let Yo=0;Yo<Mt;Yo++)R[W].properties.radii=parseFloat(J[tt+1].slice(Dt[1]*Yo,Dt[1]*(Yo+1))),W++;tt++}}if((tt=Yt("BONDS_WITHOUT_HYDROGEN"))!=-1)for(W=0,Mt=(Dt=Zo(tt))[0],tt+=1;!J[tt].match(/^%FLAG/);){J[tt+1].match(/^%FLAG/)&&(Mt=It%Dt[0]);for(let aa=0;aa<Mt;aa++)W%3==0?p=parseInt(J[tt].slice(Dt[1]*aa,Dt[1]*(aa+1))/3):W%3==1&&(R[p].bonds.push(parseInt(J[tt].slice(Dt[1]*aa,Dt[1]*(aa+1))/3)),R[p].bondOrder.push(1)),W++;tt++}if((tt=Yt("BONDS_INC_HYDROGEN"))!=-1)for(W=0,Mt=(Dt=Zo(tt))[0],tt+=1;!J[tt].match(/^%FLAG/);){J[tt+1].match(/^%FLAG/)&&(Mt=It%Dt[0]);for(let aa=0;aa<Mt;aa++)W%3==0?p=parseInt(J[tt].slice(Dt[1]*aa,Dt[1]*(aa+1))/3):W%3==1&&(R[p].bonds.push(parseInt(J[tt].slice(Dt[1]*aa,Dt[1]*(aa+1))/3)),R[p].bonds.push(1)),W++;tt++}}function Yt(wi){var aa=J.indexOf(Et.filter(function(Yo){return Yo.includes(wi)})[0]);if(Number.isInteger(aa)&&aa>0){for(;!J[aa].includes("FORMAT");)aa++;return aa}return-1}function Zo(wi){var aa=J[wi].match(/\((\d*)\S*/),Yo=J[wi].match(/[a-zA-Z](\d*)\)\s*/);return Yo==null&&(Yo=J[wi].match(/[a-zA-Z](\d*)\.\d*\)\s*/)),[parseInt(aa[1]),parseInt(Yo[1])]}return[R]}function X1(o0,p){const R=[],W=o0.split(/\r?\n|\r/);for(;W.length>0;){const J=parseInt(W[1]);if(W.length<3||isNaN(J)||J<=0||W.length<J+3)break;const Et=[];R.push(Et);let tt=2;const Dt=Et.length,It=Dt+J;for(let Mt=Dt;Mt<It;Mt++){const Wt=W[tt++],Yt={};Yt.serial=Mt,Yt.atom=Wt.slice(10,15).trim(),Yt.elem=sm(Yt.atom,!0),Yt.x=10*parseFloat(Wt.slice(20,28)),Yt.y=10*parseFloat(Wt.slice(28,36)),Yt.z=10*parseFloat(Wt.slice(36,44)),Yt.resi=parseInt(Wt.slice(0,5)),Yt.resn=Wt.slice(5,10).trim(),Yt.bonds=[],Yt.bondOrder=[],Yt.properties={},Wt.length>44&&(Yt.dx=10*parseFloat(Wt.slice(44,52)),Yt.dy=10*parseFloat(Wt.slice(52,60)),Yt.dz=10*parseFloat(Wt.slice(60,68))),Et[Mt]=Yt}if(W.length<=tt+3){const Mt=W[tt++].trim().split(/\s+/);if(Mt.length===3){for(let Wt=0;Wt<3;Wt++)Mt[Wt]=(10*parseFloat(Mt[Wt])).toString();R.box=Mt}}W.splice(0,++tt)}for(let J=0;J<R.length;J++)x0(R[J],p);return R}const sg={id:"serial",type:"atom",element:"elem",q:"charge",radius:"radius",x:"x",xu:"x",xs:"x",xsu:"x",y:"y",yu:"y",ys:"y",ysu:"y",z:"z",zu:"z",zs:"z",zsu:"z"};function og(o0,p){const R=[],W=o0.split(/\r?\n|\r/);let J=0,Et=0,tt=0;for(;tt<W.length-9;){for(var Dt=tt;Dt<W.length;Dt++)if(W[Dt].match(/ITEM: NUMBER OF ATOMS/)&&(Et=parseInt(W[Dt+1])),W[Dt].match(/ITEM: ATOMS/)){J=Dt+1;break}const It=W[J-1].replace("ITEM: ATOMS ","").split(" ");R.push([]);for(let Mt=J;Mt<J+Et;Mt++){const Wt={},Yt={},Zo=W[Mt].split(" ");for(let wi=0;wi<Zo.length;wi++){const aa=sg[It[wi]];aa!==void 0&&(aa==="serial"?Wt[aa]=parseInt(Zo[wi]):aa==="x"||aa==="y"||aa==="z"?Wt[aa]=parseFloat(Zo[wi]):aa==="charge"||aa==="radius"?Yt[aa]=parseFloat(Zo[wi]):Wt[aa]=Zo[wi]),Wt.properties=Yt,Wt.bonds=[],Wt.bondOrder=[]}R[R.length-1][Mt-J]=Wt}tt=J+Et-1}if(p.assignBonds)for(let It=0;It<R.length;It++)(0,qo.assignBonds)(R[It],p);return R}var R0;(function(o0){(function(p){p[p.Int8=1]="Int8",p[p.Int16=2]="Int16",p[p.Int32=3]="Int32",p[p.Uint8=4]="Uint8",p[p.Uint16=5]="Uint16",p[p.Uint32=6]="Uint32"})(o0.IntDataType||(o0.IntDataType={})),(function(p){p[p.Float32=32]="Float32",p[p.Float64=33]="Float64"})(o0.FloatDataType||(o0.FloatDataType={})),o0.getDataType=function(p){let R;return R=p instanceof Int8Array?o0.IntDataType.Int8:p instanceof Int16Array?o0.IntDataType.Int16:p instanceof Int32Array?o0.IntDataType.Int32:p instanceof Uint8Array?o0.IntDataType.Uint8:p instanceof Uint16Array?o0.IntDataType.Uint16:p instanceof Uint32Array?o0.IntDataType.Uint32:p instanceof Float32Array?o0.FloatDataType.Float32:p instanceof Float64Array?o0.FloatDataType.Float64:o0.IntDataType.Int32,R},o0.isSignedIntegerDataType=function(p){if(p instanceof Int8Array||p instanceof Int16Array||p instanceof Int32Array)return!0;for(let R=0,W=p.length;R<W;R++)if(R<0)return!1;return!0}})(R0||(R0={}));const Xp=new Uint16Array(new Uint8Array([18,52]).buffer)[0]===13330;function wm(o0){let p=o0.data;for(let R=o0.encoding.length-1;R>=0;R--)p=$m(p,o0.encoding[R]);return p}function $m(o0,p){switch(p.kind){case"ByteArray":switch(p.type){case R0.IntDataType.Uint8:return o0;case R0.IntDataType.Int8:return(function(R){return new Int8Array(R.buffer,R.byteOffset)})(o0);case R0.IntDataType.Int16:return(function(R){return B0(R,2,Int16Array)})(o0);case R0.IntDataType.Uint16:return(function(R){return B0(R,2,Uint16Array)})(o0);case R0.IntDataType.Int32:return(function(R){return B0(R,4,Int32Array)})(o0);case R0.IntDataType.Uint32:return(function(R){return B0(R,4,Uint32Array)})(o0);case R0.FloatDataType.Float32:return(function(R){return B0(R,4,Float32Array)})(o0);case R0.FloatDataType.Float64:return(function(R){return B0(R,8,Float64Array)})(o0);default:throw new Error("unreachable")}case"FixedPoint":return(function(R,W){const J=R.length,Et=r0(W.srcType,J),tt=1/W.factor;for(let Dt=0;Dt<J;Dt++)Et[Dt]=tt*R[Dt];return Et})(o0,p);case"IntervalQuantization":return(function(R,W){const J=R.length,Et=r0(W.srcType,J),tt=(W.max-W.min)/(W.numSteps-1),Dt=W.min;for(let It=0;It<J;It++)Et[It]=Dt+tt*R[It];return Et})(o0,p);case"RunLength":return(function(R,W){const J=Vp(W.srcType,W.srcSize);let Et=0;for(let tt=0,Dt=R.length;tt<Dt;tt+=2){const It=R[tt],Mt=R[tt+1];for(let Wt=0;Wt<Mt;++Wt)J[Et++]=It}return J})(o0,p);case"Delta":return(function(R,W){const J=R.length,Et=Vp(W.srcType,J);if(!J)return R;Et[0]=R[0]+(0|W.origin);for(let tt=1;tt<J;++tt)Et[tt]=R[tt]+Et[tt-1];return Et})(o0,p);case"IntegerPacking":return(function(R,W){return R.length===W.srcSize?R:W.isUnsigned?(function(J,Et){const tt=Et.byteCount===1?255:65535,Dt=J.length,It=new Int32Array(Et.srcSize);let Mt=0,Wt=0;for(;Mt<Dt;){let Yt=0,Zo=J[Mt];for(;Zo===tt;)Yt+=Zo,Mt++,Zo=J[Mt];Yt+=Zo,It[Wt]=Yt,Mt++,Wt++}return It})(R,W):(function(J,Et){const tt=Et.byteCount===1?127:32767,Dt=-tt-1,It=J.length,Mt=new Int32Array(Et.srcSize);let Wt=0,Yt=0;for(;Wt<It;){let Zo=0,wi=J[Wt];for(;wi===tt||wi===Dt;)Zo+=wi,Wt++,wi=J[Wt];Zo+=wi,Mt[Yt]=Zo,Wt++,Yt++}return Mt})(R,W)})(o0,p);case"StringArray":return(function(R,W){const J=wm({encoding:W.offsetEncoding,data:W.offsets}),Et=wm({encoding:W.dataEncoding,data:R}),tt=W.stringData,Dt=new Array(J.length);Dt[0]="";for(let Wt=1,Yt=J.length;Wt<Yt;Wt++)Dt[Wt]=tt.substring(J[Wt-1],J[Wt]);let It=0;const Mt=new Array(Et.length);for(let Wt=0,Yt=Et.length;Wt<Yt;Wt++)Mt[It++]=Dt[Et[Wt]+1];return Mt})(o0,p)}}function Vp(o0,p){switch(o0){case R0.IntDataType.Int8:return new Int8Array(p);case R0.IntDataType.Int16:return new Int16Array(p);case R0.IntDataType.Int32:return new Int32Array(p);case R0.IntDataType.Uint8:return new Uint8Array(p);case R0.IntDataType.Uint16:return new Uint16Array(p);case R0.IntDataType.Uint32:return new Uint32Array(p);default:return new Int32Array(p)}}function r0(o0,p){switch(o0){case R0.FloatDataType.Float32:return new Float32Array(p);case R0.FloatDataType.Float64:default:return new Float64Array(p)}}function B0(o0,p,R){return o0.byteOffset==0&&o0.byteLength==o0.buffer.byteLength||(o0=new Uint8Array(o0)),new R(Xp?o0.buffer:(function(W,J){const Et=new ArrayBuffer(W.length),tt=new Uint8Array(Et);for(let Dt=0,It=W.length;Dt<It;Dt+=J)for(let Mt=0;Mt<J;Mt++)tt[Dt+J-Mt-1]=W[Dt+Mt];return Et})(o0,p))}function bm(o0){const p=Object.create(null),R=Object.create(null);for(const W of o0.columns)p[W.name]=W;return{rowCount:o0.rowCount,name:o0.name.substring(1),fieldNames:o0.columns.map(W=>W.name),getField(W){const J=p[W];if(J)return R[W]||(R[W]=wm(J.data)),R[W]}}}var Sm=t(471);class Xm{constructor(p){if(this.C={},p){let R=p.getField("comp_id"),W=p.getField("atom_id_1"),J=p.getField("atom_id_2"),Et=p.getField("value_order");for(let tt=0;tt<R.length;tt++){let Dt=R[tt],It=W[tt],Mt=J[tt],Wt=Et[tt],Yt=1;Wt=="doub"?Yt=2:Wt=="trip"&&(Yt=3),this.C[Dt]==null&&(this.C[Dt]={}),this.C[Dt][It]==null&&(this.C[Dt][It]={}),this.C[Dt][Mt]==null&&(this.C[Dt][Mt]={}),this.C[Dt][It][Mt]=Yt,this.C[Dt][Mt][It]=Yt}}}order(p,R,W){return this.C[p]!==void 0&&this.C[p][R]!==void 0&&this.C[p][R][W]!==void 0?this.C[p][R][W]:0}}class cm{constructor(p){if(this.C=[],p){let R=p.getField("conn_type_id"),W=p.getField("ptnr1_label_asym_id"),J=p.getField("ptnr1_label_seq_id"),Et=p.getField("ptnr1_label_comp_id"),tt=p.getField("ptnr1_label_atom_id"),Dt=p.getField("ptnr2_label_asym_id"),It=p.getField("ptnr2_label_seq_id"),Mt=p.getField("ptnr2_label_comp_id"),Wt=p.getField("ptnr2_label_atom_id"),Yt=p.getField("pdbx_value_order");for(let Zo=0;Zo<R.length;Zo++)if(R[Zo]=="disulf"||R[Zo]=="covale"){let wi=Yt?Yt[Zo]==""?1:parseInt(Yt[Zo]):1;this.C.push([[W[Zo],J[Zo],Et[Zo],tt[Zo]],[Dt[Zo],It[Zo],Mt[Zo],Wt[Zo]],wi])}}}}class zm{constructor(){this.R={}}add(p){this.R[p.lchain]==null&&(this.R[p.lchain]={}),this.R[p.lchain][p.lresi]==null&&(this.R[p.lchain][p.lresi]={}),this.R[p.lchain][p.lresi][p.lresn]==null&&(this.R[p.lchain][p.lresi][p.lresn]=[]),this.R[p.lchain][p.lresi][p.lresn].push(p),this.R[p.lchain][p.lresi][p.lresn][p.atom]=p}geta([p,R,W,J]){if(this.R[p]!==void 0&&this.R[p][R]!==void 0&&this.R[p][R][W]!==void 0)return this.R[p][R][W][J]}setBonds(p,R){for(let W in this.R)for(let J in this.R[W])for(let Et in this.R[W][J]){let tt=this.R[W][J][Et];for(let Dt=0;Dt<tt.length;Dt++)for(let It=Dt+1;It<tt.length;It++){let Mt=tt[Dt],Wt=tt[It],Yt=p.order(Et,Mt.atom,Wt.atom);Mt.altLoc!=Wt.altLoc&&Mt.altLoc!=""&&Wt.altLoc!=""&&(Yt=0),Yt>0&&(Mt.bonds.push(Wt.index),Wt.bonds.push(Mt.index),Mt.bondOrder.push(Yt),Wt.bondOrder.push(Yt))}}for(let W of R.C){let J=W[0],Et=W[1],tt=W[2],Dt=this.geta(J),It=this.geta(Et);Dt!=null&&It!=null&&(Dt.bonds.push(It.index),It.bonds.push(Dt.index),Dt.bondOrder.push(tt),It.bondOrder.push(tt))}}}function x1(o0,p){var R=!p.keepH,W=p.altLoc?p.altLoc:"A",J=!p.noComputeSecondaryStructure;const Et=!p.doAssembly,tt=p.assignBonds===void 0||p.assignBonds;if(typeof o0=="string")try{o0=(0,M.base64ToArray)(o0)}catch{o0=new TextEncoder().encode(o0)}else o0=new Uint8Array(o0);var Dt=Sm.decodeMsgpack(o0);Dt==31&&(o0=(0,M.inflateString)(o0,!1),Dt=Sm.decodeMsgpack(o0));var It=[],Mt=It.modelData=[],Wt=Dt.dataBlocks.length;if(Wt==0)return It;p.multimodel||(Wt=1);for(let Yt=0;Yt<Wt;Yt++){let Zo=It.length;const wi=[];Mt.push({symmetries:[]}),It.push([]);const aa=Dt.dataBlocks[Yt],Yo=Object.create(null);for(const J1 of aa.categories)Yo[J1.name.substr(1)]=bm(J1);let Ci={},Ip=Yo.struct_conf;if(Ip){let J1=Ip.getField("conf_type_id"),b1=Ip.getField("beg_label_asym_id"),Ug=Ip.getField("beg_label_seq_id"),gg=Ip.getField("end_label_seq_id");for(let Pg=0;Pg<J1.length;Pg++)if(J1[Pg].startsWith("H")){let vg=b1[Pg],jg=Ug[Pg],mv=gg[Pg];vg in Ci||(Ci[vg]={}),Ci[vg][jg]="h1";for(let Fv=jg+1;Fv<mv;Fv++)Ci[vg][Fv]="h";Ci[vg][mv]="h2"}}let $p=Yo.struct_sheet_range;if($p){let J1=$p.getField("id"),b1=$p.getField("beg_label_asym_id"),Ug=$p.getField("beg_label_seq_id"),gg=$p.getField("end_label_seq_id");for(let Pg=0;Pg<J1.length;Pg++){let vg=b1[Pg],jg=Ug[Pg],mv=gg[Pg];vg in Ci||(Ci[vg]={}),Ci[vg][jg]="s1";for(let Fv=jg+1;Fv<mv;Fv++)Ci[vg][Fv]="s";Ci[vg][mv]="s2"}}let Qp=Yo.pdbx_struct_oper_list,T0=Qp.getField("id");if(T0&&!Et){let J1=Qp.getField("matrix[1][1]"),b1=Qp.getField("matrix[1][2]"),Ug=Qp.getField("matrix[1][3]"),gg=Qp.getField("matrix[2][1]"),Pg=Qp.getField("matrix[2][2]"),vg=Qp.getField("matrix[2][3]"),jg=Qp.getField("matrix[3][1]"),mv=Qp.getField("matrix[3][2]"),Fv=Qp.getField("matrix[3][3]"),Pv=Qp.getField("vector[1]"),fy=Qp.getField("vector[2]"),ty=Qp.getField("vector[3]");for(let wv=0;wv<T0.length;wv++){const py=new s.Matrix4(J1[wv],b1[wv],Ug[wv],Pv[wv],gg[wv],Pg[wv],vg[wv],fy[wv],jg[wv],mv[wv],Fv[wv],ty[wv]);Mt[Mt.length-1].symmetries.push(py)}}let g0=new Xm(Yo.chem_comp_bond),U0=new zm,Y0=new cm(Yo.struct_conn),Q0=Yo.atom_site,tm=Q0.rowCount,G0=Q0.getField("group_PDB"),Pm=Q0.getField("Cartn_x"),km=Q0.getField("Cartn_y"),i1=Q0.getField("Cartn_z"),Qm=Q0.getField("auth_asym_id"),_1=Q0.getField("label_asym_id"),C1=Q0.getField("auth_seq_id"),a1=Q0.getField("label_seq_id"),I1=Q0.getField("auth_comp_id"),Fm=Q0.getField("label_comp_id"),Km=Q0.getField("auth_atom_id"),W1=Q0.getField("label_atom_id"),s1=Q0.getField("type_symbol"),H1=Q0.getField("B_iso_or_equiv"),q1=Q0.getField("id"),u1=Q0.getField("label_alt_id"),eg=Q0.getField("pdbx_PDB_model_num"),kg=eg?eg[0]:0;for(let J1=0;J1<tm;J1++){if(G0!==void 0&&G0[J1]==="TER")continue;if(eg&&eg[J1]!=kg){if(kg=eg[J1],!p.multimodel)break;p.onemol||(It.push([]),Mt.push(Mt[Mt.length-1]),kg=eg[J1],U0.setBonds(g0,Y0),U0=new zm)}const b1={};b1.x=Pm[J1],b1.y=km[J1],b1.z=i1[J1],b1.chain=Qm?Qm[J1]:_1?_1[J1]:void 0,b1.lchain=_1?_1[J1]:void 0,b1.resi=C1?C1[J1]:a1?a1[J1]:void 0,b1.lresi=a1?a1[J1]:void 0,b1.resn=I1?I1[J1].trim():Fm?Fm[J1].trim():void 0,b1.lresn=Fm?Fm[J1].trim():void 0,b1.atom=Km?Km[J1].replace(/"/gm,""):W1?W1[J1].replace(/"/gm,""):void 0,b1.icode=u1?u1[J1]:void 0,b1.altLoc=b1.icode,b1.hetflag=!G0||G0[J1]==="HETA"||G0[J1]==="HETATM";let Ug="X";s1&&(Ug=s1[J1].replace(/\(?\+?\d+.*/,"")),b1.elem=Ug[0].toUpperCase()+Ug.substring(1,2).toLowerCase(),H1&&(b1.b=H1[J1]),R&&b1.elem=="H"||b1.altLoc!=""&&b1.altLoc!=W&&W!="*"||(b1.bonds=[],b1.ss="c",b1.serial=q1[J1],b1.model=kg,b1.bondOrder=[],b1.properties={},b1.index=It[It.length-1].length,wi[b1.serial]=[It.length,b1.index],It[It.length-1].push(b1),U0.add(b1))}if(U0.setBonds(g0,Y0),!mm(Ci))for(let J1=Zo;J1<It.length;J1++){let b1=It[J1];for(let Ug=0;Ug<b1.length;Ug++){const gg=b1[Ug];if(gg!==void 0&&gg.lchain in Ci&&gg.lresi in Ci[gg.lchain]){const Pg=Ci[gg.lchain][gg.lresi];gg.ss=Pg[0],Pg.length>1&&(Pg[1]=="1"?gg.ssbegin=!0:Pg[1]=="2"&&(gg.ssend=!0))}}}p.multimodel&&Yt<Wt-1&&(p.onemol||(It.push([]),Mt.push({symmetries:[]})))}for(let Yt=0;Yt<It.length;Yt++)!tt||p.duplicateAssemblyAtoms&&!p.dontConnectDuplicatedAtoms||x0(It[Yt],p),J&&Kt(It[Yt],p.hbondCutoff),h0(Mt[Yt].symmetries,It[Yt],p,Mt[Yt].cryst),p.duplicateAssemblyAtoms&&!p.dontConnectDuplicatedAtoms&&tt&&x0(It[Yt],p);return It}const Um={vasp:zp.VASP,VASP:zp.VASP,cube:sa.CUBE,CUBE:sa.CUBE,xyz:ae,XYZ:ae,sdf:wp,SDF:wp,json:Cp,cdjson:Cp,CDJSON:Cp,mcif:c0,cif:c0,CIF:c0,mol2:y0,MOL2:y0,pdb:v1,PDB:v1,pdbqt:v1,PDBQT:v1,pqr:v0,PQR:v0,mmtf:o1,MMTF:o1,prmtop:g1,PRMTOP:g1,gro:X1,GRO:X1,lammpstrj:og,LAMMPSTRJ:og,bcif:x1,BCIF:x1};function h1(o0,p="utf8"){return new TextDecoder(p).decode(o0)}const Sg=new TextEncoder,um=(()=>{const o0=new Uint8Array(4);return!((new Uint32Array(o0.buffer)[0]=1)&o0[0])})(),M1={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class F1{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(p=8192,R={}){let W=!1;typeof p=="number"?p=new ArrayBuffer(p):(W=!0,this.lastWrittenByte=p.byteLength);const J=R.offset?R.offset>>>0:0,Et=p.byteLength-J;let tt=J;(ArrayBuffer.isView(p)||p instanceof F1)&&(p.byteLength!==p.buffer.byteLength&&(tt=p.byteOffset+J),p=p.buffer),this.lastWrittenByte=W?Et:0,this.buffer=p,this.length=Et,this.byteLength=Et,this.byteOffset=tt,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,tt,Et),this._mark=0,this._marks=[]}available(p=1){return this.offset+p<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(p=1){return this.offset+=p,this}back(p=1){return this.offset-=p,this}seek(p){return this.offset=p,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const p=this._marks.pop();if(p===void 0)throw new Error("Mark stack empty");return this.seek(p),this}rewind(){return this.offset=0,this}ensureAvailable(p=1){if(!this.available(p)){const R=2*(this.offset+p),W=new Uint8Array(R);W.set(new Uint8Array(this.buffer)),this.buffer=W.buffer,this.length=R,this.byteLength=R,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(p=1){return this.readArray(p,"uint8")}readArray(p,R){const W=M1[R].BYTES_PER_ELEMENT*p,J=this.byteOffset+this.offset,Et=this.buffer.slice(J,J+W);if(this.littleEndian===um&&R!=="uint8"&&R!=="int8"){const Dt=new Uint8Array(this.buffer.slice(J,J+W));Dt.reverse();const It=new M1[R](Dt.buffer);return this.offset+=W,It.reverse(),It}const tt=new M1[R](Et);return this.offset+=W,tt}readInt16(){const p=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,p}readUint16(){const p=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,p}readInt32(){const p=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,p}readUint32(){const p=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,p}readFloat32(){const p=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,p}readFloat64(){const p=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,p}readBigInt64(){const p=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,p}readBigUint64(){const p=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,p}readChar(){return String.fromCharCode(this.readInt8())}readChars(p=1){let R="";for(let W=0;W<p;W++)R+=this.readChar();return R}readUtf8(p=1){return h1(this.readBytes(p))}decodeText(p=1,R="utf8"){return h1(this.readBytes(p),R)}writeBoolean(p){return this.writeUint8(p?255:0),this}writeInt8(p){return this.ensureAvailable(1),this._data.setInt8(this.offset++,p),this._updateLastWrittenByte(),this}writeUint8(p){return this.ensureAvailable(1),this._data.setUint8(this.offset++,p),this._updateLastWrittenByte(),this}writeByte(p){return this.writeUint8(p)}writeBytes(p){this.ensureAvailable(p.length);for(let R=0;R<p.length;R++)this._data.setUint8(this.offset++,p[R]);return this._updateLastWrittenByte(),this}writeInt16(p){return this.ensureAvailable(2),this._data.setInt16(this.offset,p,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(p){return this.ensureAvailable(2),this._data.setUint16(this.offset,p,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(p){return this.ensureAvailable(4),this._data.setInt32(this.offset,p,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(p){return this.ensureAvailable(4),this._data.setUint32(this.offset,p,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(p){return this.ensureAvailable(4),this._data.setFloat32(this.offset,p,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(p){return this.ensureAvailable(8),this._data.setFloat64(this.offset,p,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(p){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,p,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(p){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,p,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(p){return this.writeUint8(p.charCodeAt(0))}writeChars(p){for(let R=0;R<p.length;R++)this.writeUint8(p.charCodeAt(R));return this}writeUtf8(p){return this.writeBytes((function(R){return Sg.encode(R)})(p))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}const Y1=1,n1=2,Zm=3,S1=4,p1=5,hv=6;function Gg(o0){switch(Number(o0)){case Y1:return"byte";case n1:return"char";case Zm:return"short";case S1:return"int";case p1:return"float";case hv:return"double";default:return"undefined"}}function Cv(o0){switch(Number(o0)){case Y1:case n1:return 1;case Zm:return 2;case S1:case p1:return 4;case hv:return 8;default:return-1}}function ey(o0){switch(String(o0)){case"byte":return Y1;case"char":return n1;case"short":return Zm;case"int":return S1;case"float":return p1;case"double":return hv;default:return-1}}function xy(o0,p){if(o0!==1){const R=new Array(o0);for(let W=0;W<o0;W++)R[W]=p();return R}return p()}function Gv(o0,p,R){switch(p){case Y1:return Array.from(o0.readBytes(R));case n1:return(W=o0.readChars(R)).charCodeAt(W.length-1)===0?W.substring(0,W.length-1):W;case Zm:return xy(R,o0.readInt16.bind(o0));case S1:return xy(R,o0.readInt32.bind(o0));case p1:return xy(R,o0.readFloat32.bind(o0));case hv:return xy(R,o0.readFloat64.bind(o0));default:throw new Error(`non valid type ${p}`)}var W}function yv(o0,p){if(o0)throw new TypeError(`Not a valid NetCDF v3.x file: ${p}`)}function Wv(o0){o0.offset%4!=0&&o0.skip(4-o0.offset%4)}function _y(o0){const p=o0.readUint32(),R=o0.readChars(p);return Wv(o0),R}function iy(o0,p){const R={version:p},W={length:o0.readUint32()},J=(function(tt){const Dt={};let It,Mt;const Wt=tt.readUint32();let Yt;if(Wt===0)return yv(tt.readUint32()!==0,"wrong empty tag for list of dimensions"),[];{yv(Wt!==10,"wrong tag for list of dimensions");const Zo=tt.readUint32();Yt=new Array(Zo);for(let wi=0;wi<Zo;wi++){const aa=_y(tt),Yo=tt.readUint32();Yo===0&&(It=wi,Mt=aa),Yt[wi]={name:aa,size:Yo}}}return It!==void 0&&(Dt.recordId=It),Mt!==void 0&&(Dt.recordName=Mt),Dt.dimensions=Yt,Dt})(o0);Array.isArray(J)||(W.id=J.recordId,W.name=J.recordName,R.dimensions=J.dimensions),R.globalAttributes=Cy(o0);const Et=(function(tt,Dt,It){const Mt=tt.readUint32();let Wt,Yt=0;if(Mt===0)return yv(tt.readUint32()!==0,"wrong empty tag for list of variables"),[];{yv(Mt!==11,"wrong tag for list of variables");const Zo=tt.readUint32();Wt=new Array(Zo);for(let wi=0;wi<Zo;wi++){const aa=_y(tt),Yo=tt.readUint32(),Ci=new Array(Yo);for(let U0=0;U0<Yo;U0++)Ci[U0]=tt.readUint32();const Ip=Cy(tt),$p=tt.readUint32();yv($p<1&&$p>6,`non valid type ${$p}`);const Qp=tt.readUint32();let T0=tt.readUint32();It===2&&(yv(T0>0,"offsets larger than 4GB not supported"),T0=tt.readUint32());let g0=!1;Dt!==void 0&&Ci[0]===Dt&&(Yt+=Qp,g0=!0),Wt[wi]={name:aa,dimensions:Ci,attributes:Ip,type:Gg($p),size:Qp,offset:T0,record:g0}}}return{variables:Wt,recordStep:Yt}})(o0,W?.id,p);return Array.isArray(Et)||(R.variables=Et.variables,W.recordStep=Et.recordStep),R.recordDimension=W,R}function Cy(o0){const p=o0.readUint32();let R;if(p===0)return yv(o0.readUint32()!==0,"wrong empty tag for list of attributes"),[];{yv(p!==12,"wrong tag for list of attributes");const W=o0.readUint32();R=new Array(W);for(let J=0;J<W;J++){const Et=_y(o0),tt=o0.readUint32();yv(tt<1||tt>6,`non valid type ${tt}`);const Dt=o0.readUint32(),It=Gv(o0,tt,Dt);Wv(o0),R[J]={name:Et,type:Gg(tt),value:It}}}return R}function $v(){const o0=[];o0.push("DIMENSIONS");for(const R of this.dimensions)o0.push(`  ${R.name.padEnd(30)} = size: ${R.size}`);o0.push(""),o0.push("GLOBAL ATTRIBUTES");for(const R of this.globalAttributes)o0.push(`  ${R.name.padEnd(30)} = ${R.value}`);const p=JSON.parse(JSON.stringify(this.variables));o0.push(""),o0.push("VARIABLES:");for(const R of p){R.value=this.getDataVariable(R);let W=JSON.stringify(R.value);W.length>50&&(W=W.substring(0,50)),isNaN(R.value.length)||(W+=` (length: ${R.value.length})`),o0.push(`  ${R.name.padEnd(30)} = ${W}`)}return o0.join(`
`)}class Lv{constructor(p){this.toString=$v;const R=new F1(p);R.setBigEndian(),yv(R.readChars(3)!=="CDF","should start with CDF");const W=R.readByte();yv(W>2,"unknown version"),this.header=iy(R,W),this.buffer=R}get version(){return this.header.version===1?"classic format":"64-bit offset format"}get recordDimension(){return this.header.recordDimension}get dimensions(){return this.header.dimensions}get globalAttributes(){return this.header.globalAttributes}getAttribute(p){const R=this.globalAttributes.find(W=>W.name===p);return R?R.value:null}getDataVariableAsString(p){const R=this.getDataVariable(p);return R?R.join(""):null}get variables(){return this.header.variables}getDataVariable(p){let R;if(R=typeof p=="string"?this.header.variables.find(W=>W.name===p):p,R===void 0)throw new Error("Not a valid NetCDF v3.x file: variable not found");return this.buffer.seek(R.offset),R.record?(function(W,J,Et){const tt=ey(J.type),Dt=J.size?J.size/Cv(tt):1,It=Et.length,Mt=new Array(It),Wt=Et.recordStep;if(!Wt)throw new Error("recordDimension.recordStep is undefined");for(let Yt=0;Yt<It;Yt++){const Zo=W.offset;Mt[Yt]=Gv(W,tt,Dt),W.seek(Zo+Wt)}return Mt})(this.buffer,R,this.header.recordDimension):(function(W,J){const Et=ey(J.type),tt=J.size/Cv(Et),Dt=new Array(tt);for(let It=0;It<tt;It++)Dt[It]=Gv(W,Et,1);return Dt})(this.buffer,R)}dataVariableExists(p){return this.header.variables.find(R=>R.name===p)!==void 0}attributeExists(p){return this.globalAttributes.find(R=>R.name===p)!==void 0}}class wg{static sameObj(p,R){return p&&R?JSON.stringify(p)==JSON.stringify(R):p==R}constructor(p,R,W){this.atoms=[],this.frames=[],this.box=null,this.atomdfs=null,this.id=0,this.hidden=!1,this.molObj=null,this.renderedMolObj=null,this.lastColors=null,this.modelData={},this.modelDatas=null,this.idMatrix=new m.Matrix4,this.dontDuplicateAtoms=!0,this.defaultColor=b.elementColors.defaultColor,this.defaultStickRadius=.25,this.options=R||{},this.viewer=W,this.ElementColors=this.options.defaultcolors?this.options.defaultcolors:b.elementColors.defaultColors,this.defaultSphereRadius=this.options.defaultSphereRadius?this.options.defaultSphereRadius:1.5,this.defaultCartoonQuality=this.options.cartoonQuality?this.options.cartoonQuality:10,this.id=p}getRadiusFromStyle(p,R){var W=this.defaultSphereRadius;if(R.radius!==void 0)W=R.radius;else if(wg.vdwRadii[p.elem])W=wg.vdwRadii[p.elem];else if(p.elem.length>1){let J=p.elem;J=J[0].toUpperCase()+J[1].toLowerCase(),wg.vdwRadii[J]&&(W=wg.vdwRadii[J])}return R.scale!==void 0&&(W*=R.scale),W}drawAtomCross(p,R){if(p.style.cross){var W=p.style.cross;if(!W.hidden){var J=W.linewidth||wg.defaultlineWidth;R[J]||(R[J]=new s.Geometry);var Et=R[J].updateGeoGroup(6),tt=this.getRadiusFromStyle(p,W),Dt=[[tt,0,0],[-tt,0,0],[0,tt,0],[0,-tt,0],[0,0,tt],[0,0,-tt]],It=p.clickable||p.hoverable;It&&p.intersectionShape===void 0&&(p.intersectionShape={sphere:[],cylinder:[],line:[]});for(var Mt=(0,M.getColorFromStyle)(p,W),Wt=Et.vertexArray,Yt=Et.colorArray,Zo=0;Zo<6;Zo++){var wi=3*Et.vertices;if(Et.vertices++,Wt[wi]=p.x+Dt[Zo][0],Wt[wi+1]=p.y+Dt[Zo][1],Wt[wi+2]=p.z+Dt[Zo][2],Yt[wi]=Mt.r,Yt[wi+1]=Mt.g,Yt[wi+2]=Mt.b,It){var aa=new m.Vector3(Dt[Zo][0],Dt[Zo][1],Dt[Zo][2]);aa.multiplyScalar(.1),aa.set(aa.x+p.x,aa.y+p.y,aa.z+p.z),p.intersectionShape.line.push(aa)}}}}}getGoodCross(p,R,W,J){for(var Et=null,tt=-1,Dt=0,It=p.bonds.length;Dt<It;Dt++)if(p.bonds[Dt]!=R.index){let Wt=p.bonds[Dt],Yt=this.atoms[Wt],Zo=new m.Vector3(Yt.x,Yt.y,Yt.z).clone();Zo.sub(W);let wi=Zo.clone();wi.cross(J);var Mt=wi.lengthSq();if(Mt>tt&&(Et=wi,(tt=Mt)>.1))return Et}return Et}getSideBondV(p,R,W){var J,Et,tt,Dt,It=new m.Vector3(p.x,p.y,p.z),Mt=new m.Vector3(R.x,R.y,R.z).clone(),Wt=null;if(Mt.sub(It),p.bonds.length===1)R.bonds.length===1?(Wt=Mt.clone(),Math.abs(Wt.x)>1e-4?Wt.y+=1:Wt.x+=1):(J=(W+1)%R.bonds.length,Et=R.bonds[J],(tt=this.atoms[Et]).index==p.index&&(J=(J+1)%R.bonds.length,Et=R.bonds[J],tt=this.atoms[Et]),(Dt=new m.Vector3(tt.x,tt.y,tt.z).clone()).sub(It),(Wt=Dt.clone()).cross(Mt));else if((Wt=this.getGoodCross(p,R,It,Mt)).lengthSq()<.01){var Yt=this.getGoodCross(R,p,It,Mt);Yt!=null&&(Wt=Yt)}return Wt.lengthSq()<.01&&(Wt=Mt.clone(),Math.abs(Wt.x)>1e-4?Wt.y+=1:Wt.x+=1),Wt.cross(Mt),Wt.normalize(),Wt}addLine(p,R,W,J,Et,tt){p[W]=J.x,p[W+1]=J.y,p[W+2]=J.z,R[W]=tt.r,R[W+1]=tt.g,R[W+2]=tt.b,p[W+3]=Et.x,p[W+4]=Et.y,p[W+5]=Et.z,R[W+3]=tt.r,R[W+4]=tt.g,R[W+5]=tt.b}drawBondLines(p,R,W){if(p.style.line){var J=p.style.line;if(!J.hidden){var Et,tt,Dt,It,Mt=J.linewidth||wg.defaultlineWidth;W[Mt]||(W[Mt]=new s.Geometry);for(var Wt=W[Mt].updateGeoGroup(6*p.bonds.length),Yt=Wt.vertexArray,Zo=Wt.colorArray,wi=0;wi<p.bonds.length;wi++){var aa=R[p.bonds[wi]];if(aa.style.line&&!(p.index>=aa.index)){var Yo=new m.Vector3(p.x,p.y,p.z),Ci=new m.Vector3(aa.x,aa.y,aa.z),Ip=Yo.clone().add(Ci).multiplyScalar(.5),$p=!1,Qp=p.clickable||p.hoverable,T0=aa.clickable||aa.hoverable;(Qp||T0)&&(Qp&&(p.intersectionShape===void 0&&(p.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),p.intersectionShape.line.push(Yo),p.intersectionShape.line.push(Ip)),T0&&(aa.intersectionShape===void 0&&(aa.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),aa.intersectionShape.line.push(Ip),aa.intersectionShape.line.push(Ci)));var g0=(0,M.getColorFromStyle)(p,p.style.line),U0=(0,M.getColorFromStyle)(aa,aa.style.line);if(p.bondStyles&&p.bondStyles[wi]){var Y0=p.bondStyles[wi];if(!Y0.iswire)continue;Y0.singleBond&&($p=!0),Y0.color1!==void 0&&(g0=b.CC.color(Y0.color1)),Y0.color2!==void 0&&(U0=b.CC.color(Y0.color2))}var Q0,tm,G0=3*Wt.vertices;if(p.bondOrder[wi]>1&&p.bondOrder[wi]<4&&!$p){var Pm=this.getSideBondV(p,aa,wi),km=Ci.clone();km.sub(Yo),p.bondOrder[wi]==2?(Pm.multiplyScalar(.1),(Et=Yo.clone()).add(Pm),(tt=Yo.clone()).sub(Pm),(Dt=Et.clone()).add(km),(It=tt.clone()).add(km),g0==U0?(Wt.vertices+=4,this.addLine(Yt,Zo,G0,Et,Dt,g0),this.addLine(Yt,Zo,G0+6,tt,It,g0)):(Wt.vertices+=8,km.multiplyScalar(.5),(Q0=Et.clone()).add(km),(tm=tt.clone()).add(km),this.addLine(Yt,Zo,G0,Et,Q0,g0),this.addLine(Yt,Zo,G0+6,Q0,Dt,U0),this.addLine(Yt,Zo,G0+12,tt,tm,g0),this.addLine(Yt,Zo,G0+18,tm,It,U0))):p.bondOrder[wi]==3&&(Pm.multiplyScalar(.1),(Et=Yo.clone()).add(Pm),(tt=Yo.clone()).sub(Pm),(Dt=Et.clone()).add(km),(It=tt.clone()).add(km),g0==U0?(Wt.vertices+=6,this.addLine(Yt,Zo,G0,Yo,Ci,g0),this.addLine(Yt,Zo,G0+6,Et,Dt,g0),this.addLine(Yt,Zo,G0+12,tt,It,g0)):(Wt.vertices+=12,km.multiplyScalar(.5),(Q0=Et.clone()).add(km),(tm=tt.clone()).add(km),this.addLine(Yt,Zo,G0,Yo,Ip,g0),this.addLine(Yt,Zo,G0+6,Ip,Ci,U0),this.addLine(Yt,Zo,G0+12,Et,Q0,g0),this.addLine(Yt,Zo,G0+18,Q0,Dt,U0),this.addLine(Yt,Zo,G0+24,tt,tm,g0),this.addLine(Yt,Zo,G0+30,tm,It,U0)))}else g0==U0?(Wt.vertices+=2,this.addLine(Yt,Zo,G0,Yo,Ci,g0)):(Wt.vertices+=4,this.addLine(Yt,Zo,G0,Yo,Ip,g0),this.addLine(Yt,Zo,G0+6,Ip,Ci,U0))}}}}}drawAtomSphere(p,R){if(p.style.sphere){var W=p.style.sphere;if(!W.hidden){var J=(0,M.getColorFromStyle)(p,W),Et=this.getRadiusFromStyle(p,W);if((p.clickable===!0||p.hoverable)&&p.intersectionShape!==void 0){var tt=new m.Vector3(p.x,p.y,p.z);p.intersectionShape.sphere.push(new f.Sphere(tt,Et))}o.drawSphere(R,p,Et,J)}}}drawAtomClickSphere(p){if(p.style.clicksphere){var R=p.style.clicksphere;if(!R.hidden){var W=this.getRadiusFromStyle(p,R);if((p.clickable===!0||p.hoverable)&&p.intersectionShape!==void 0){var J=new m.Vector3(p.x,p.y,p.z);p.intersectionShape.sphere.push(new f.Sphere(J,W))}}}}drawAtomInstanced(p,R){if(p.style.sphere){var W=p.style.sphere;if(!W.hidden){var J=this.getRadiusFromStyle(p,W),Et=(0,M.getColorFromStyle)(p,W),tt=R.updateGeoGroup(1),Dt=tt.vertices,It=3*Dt,Mt=tt.vertexArray,Wt=tt.colorArray,Yt=tt.radiusArray;if(Mt[It]=p.x,Mt[It+1]=p.y,Mt[It+2]=p.z,Wt[It]=Et.r,Wt[It+1]=Et.g,Wt[It+2]=Et.b,Yt[Dt]=J,(p.clickable===!0||p.hoverable)&&p.intersectionShape!==void 0){var Zo=new m.Vector3(p.x,p.y,p.z);p.intersectionShape.sphere.push(new f.Sphere(Zo,J))}tt.vertices+=1}}}drawSphereImposter(p,R,W,J){var Et,tt=p.updateGeoGroup(4),Dt=tt.vertices,It=3*Dt,Mt=tt.vertexArray,Wt=tt.colorArray;for(Et=0;Et<4;Et++)Mt[It+3*Et]=R.x,Mt[It+3*Et+1]=R.y,Mt[It+3*Et+2]=R.z;var Yt=tt.normalArray;for(Et=0;Et<4;Et++)Wt[It+3*Et]=J.r,Wt[It+3*Et+1]=J.g,Wt[It+3*Et+2]=J.b;Yt[It+0]=-W,Yt[It+1]=W,Yt[It+2]=0,Yt[It+3]=-W,Yt[It+4]=-W,Yt[It+5]=0,Yt[It+6]=W,Yt[It+7]=-W,Yt[It+8]=0,Yt[It+9]=W,Yt[It+10]=W,Yt[It+11]=0,tt.vertices+=4;var Zo=tt.faceArray,wi=tt.faceidx;Zo[wi+0]=Dt,Zo[wi+1]=Dt+1,Zo[wi+2]=Dt+2,Zo[wi+3]=Dt+2,Zo[wi+4]=Dt+3,Zo[wi+5]=Dt,tt.faceidx+=6}drawAtomImposter(p,R){if(p.style.sphere){var W=p.style.sphere;if(!W.hidden){var J=this.getRadiusFromStyle(p,W),Et=(0,M.getColorFromStyle)(p,W);if((p.clickable===!0||p.hoverable)&&p.intersectionShape!==void 0){var tt=new m.Vector3(p.x,p.y,p.z);p.intersectionShape.sphere.push(new f.Sphere(tt,J))}this.drawSphereImposter(R,p,J,Et)}}}calculateDashes(p,R,W,J,Et){var tt=Math.sqrt(Math.pow(p.x-R.x,2)+Math.pow(p.y-R.y,2)+Math.pow(p.z-R.z,2));W=Math.max(W,0),Et=Math.max(Et,0)+2*W,(J=Math.max(J,.001))+Et>tt&&(J=tt,Et=0);var Dt,It=Math.floor((tt-J)/(J+Et))+1;Et=(tt-It*J)/It;for(var Mt=new m.Vector3(p.x,p.y,p.z),Wt=new m.Vector3((R.x-p.x)/(tt/Et),(R.y-p.y)/(tt/Et),(R.z-p.z)/(tt/Et)),Yt=new m.Vector3((R.x-p.x)/(tt/J),(R.y-p.y)/(tt/J),(R.z-p.z)/(tt/J)),Zo=[],wi=0;wi<It;wi++)Dt=new m.Vector3(Mt.x+Yt.x,Mt.y+Yt.y,Mt.z+Yt.z),Zo.push({from:Mt,to:Dt}),Mt=new m.Vector3(Dt.x+Wt.x,Dt.y+Wt.y,Dt.z+Wt.z);return Zo}static drawStickImposter(p,R,W,J,Et,tt=0,Dt=0){for(var It=p.updateGeoGroup(4),Mt=It.vertices,Wt=3*Mt,Yt=It.vertexArray,Zo=It.colorArray,wi=It.radiusArray,aa=It.normalArray,Yo=Et.r,Ci=Et.g,Ip=Et.b,$p=function(Y0){var Q0=-Y0;return Q0==0&&(Q0=-1e-4),Q0},Qp=Wt,T0=0;T0<4;T0++)Yt[Qp]=R.x,aa[Qp]=W.x,Zo[Qp]=Yo,Yt[++Qp]=R.y,aa[Qp]=W.y,Zo[Qp]=Ci,Yt[++Qp]=R.z,aa[Qp]=W.z,Zo[Qp]=T0<2?Ip:$p(Ip),Qp++;It.vertices+=4,wi[Mt]=-J,wi[Mt+1]=J,wi[Mt+2]=-J,wi[Mt+3]=J;var g0=It.faceArray,U0=It.faceidx;g0[U0+0]=Mt,g0[U0+1]=Mt+1,g0[U0+2]=Mt+2,g0[U0+3]=Mt+2,g0[U0+4]=Mt+3,g0[U0+5]=Mt,It.faceidx+=6}drawBondSticks(p,R,W){var J,Et;if(p.style.stick){var tt=p.style.stick;if(!tt.hidden){var Dt,It,Mt,Wt,Yt,Zo,wi,aa,Yo,Ci,Ip,$p,Qp,T0,g0=tt.radius||this.defaultStickRadius,U0=tt.doubleBondScaling||.4,Y0=tt.tripleBondScaling||.25,Q0=((J=tt.dashedBondConfig)===null||J===void 0?void 0:J.dashLength)||.1,tm=((Et=tt.dashedBondConfig)===null||Et===void 0?void 0:Et.gapLength)||.25,G0=g0,Pm=tt.singleBonds||!1,km=tt.dashedBonds||!1,i1=0,Qm=0,_1=(0,M.getColorFromStyle)(p,tt);!p.capDrawn&&p.bonds.length<4&&(i1=2);var C1=ty=>{var wv=W.imposter?wg.drawStickImposter:o.drawCylinder;return!km&&ty>=1?wv:(py,Zv,ry,my,Ry,gy=0,Py=0,Mv=.1,jv=.25)=>{this.calculateDashes(Zv,ry,my,Mv,jv).forEach(Xv=>{wv(py,Xv.from,Xv.to,my,Ry,gy,Py)})}};for(Mt=0;Mt<p.bonds.length;Mt++){var a1=C1(p.bondOrder[Mt]),I1=R[p.bonds[Mt]];if($p=Qp=T0=null,p.index<I1.index){var Fm=I1.style;if(!Fm.stick||Fm.stick.hidden)continue;var Km=(0,M.getColorFromStyle)(I1,Fm.stick);if(G0=g0,Wt=Pm,p.bondStyles&&p.bondStyles[Mt]){if((Yt=p.bondStyles[Mt]).iswire)continue;Yt.radius&&(G0=Yt.radius),Yt.singleBond&&(Wt=!0),Yt.color1!==void 0&&(_1=b.CC.color(Yt.color1)),Yt.color2!==void 0&&(Km=b.CC.color(Yt.color2))}var W1=new m.Vector3(p.x,p.y,p.z),s1=new m.Vector3(I1.x,I1.y,I1.z);if(p.bondOrder[Mt]<=1||Wt||p.bondOrder[Mt]>3){if(p.bondOrder[Mt]<1&&(G0*=p.bondOrder[Mt]),!I1.capDrawn&&I1.bonds.length<4&&(Qm=2),_1!=Km?($p=new m.Vector3().addVectors(W1,s1).multiplyScalar(.5),a1(W,W1,$p,G0,_1,i1,0,Q0,tm),a1(W,$p,s1,G0,Km,0,Qm,Q0,tm)):a1(W,W1,s1,G0,_1,i1,Qm,Q0,tm),Dt=p.clickable||p.hoverable,It=I1.clickable||I1.hoverable,Dt||It){if($p||($p=new m.Vector3().addVectors(W1,s1).multiplyScalar(.5)),Dt){var H1=new f.Cylinder(W1,$p,G0),q1=new f.Sphere(W1,G0);p.intersectionShape.cylinder.push(H1),p.intersectionShape.sphere.push(q1)}if(It){var u1=new f.Cylinder(s1,$p,G0),eg=new f.Sphere(s1,G0);I1.intersectionShape.cylinder.push(u1),I1.intersectionShape.sphere.push(eg)}}}else if(p.bondOrder[Mt]>1){var kg=0,J1=0;G0!=g0&&(kg=2,J1=2);var b1,Ug,gg,Pg,vg,jg=s1.clone(),mv=null;jg.sub(W1),mv=this.getSideBondV(p,I1,Mt),p.bondOrder[Mt]==2?(b1=G0*U0,mv.multiplyScalar(1.5*b1),(Ug=W1.clone()).add(mv),(gg=W1.clone()).sub(mv),(Pg=Ug.clone()).add(jg),(vg=gg.clone()).add(jg),_1!=Km?($p=new m.Vector3().addVectors(Ug,Pg).multiplyScalar(.5),Qp=new m.Vector3().addVectors(gg,vg).multiplyScalar(.5),a1(W,Ug,$p,b1,_1,kg,0),a1(W,$p,Pg,b1,Km,0,J1),a1(W,gg,Qp,b1,_1,kg,0),a1(W,Qp,vg,b1,Km,0,J1)):(a1(W,Ug,Pg,b1,_1,kg,J1),a1(W,gg,vg,b1,_1,kg,J1)),Dt=p.clickable||p.hoverable,It=I1.clickable||I1.hoverable,(Dt||It)&&($p||($p=new m.Vector3().addVectors(Ug,Pg).multiplyScalar(.5)),Qp||(Qp=new m.Vector3().addVectors(gg,vg).multiplyScalar(.5)),Dt&&(Zo=new f.Cylinder(Ug,$p,b1),wi=new f.Cylinder(gg,Qp,b1),p.intersectionShape.cylinder.push(Zo),p.intersectionShape.cylinder.push(wi)),It&&(Yo=new f.Cylinder(Pg,$p,b1),Ci=new f.Cylinder(vg,Qp,b1),I1.intersectionShape.cylinder.push(Yo),I1.intersectionShape.cylinder.push(Ci)))):p.bondOrder[Mt]==3&&(b1=G0*Y0,mv.cross(jg),mv.normalize(),mv.multiplyScalar(3*b1),(Ug=W1.clone()).add(mv),(gg=W1.clone()).sub(mv),(Pg=Ug.clone()).add(jg),(vg=gg.clone()).add(jg),_1!=Km?($p=new m.Vector3().addVectors(Ug,Pg).multiplyScalar(.5),Qp=new m.Vector3().addVectors(gg,vg).multiplyScalar(.5),T0=new m.Vector3().addVectors(W1,s1).multiplyScalar(.5),a1(W,Ug,$p,b1,_1,kg,0),a1(W,$p,Pg,b1,Km,0,J1),a1(W,W1,T0,b1,_1,i1,0),a1(W,T0,s1,b1,Km,0,Qm),a1(W,gg,Qp,b1,_1,kg,0),a1(W,Qp,vg,b1,Km,0,J1)):(a1(W,Ug,Pg,b1,_1,kg,J1),a1(W,W1,s1,b1,_1,i1,Qm),a1(W,gg,vg,b1,_1,kg,J1)),Dt=p.clickable||p.hoverable,It=I1.clickable||I1.hoverable,(Dt||It)&&($p||($p=new m.Vector3().addVectors(Ug,Pg).multiplyScalar(.5)),Qp||(Qp=new m.Vector3().addVectors(gg,vg).multiplyScalar(.5)),T0||(T0=new m.Vector3().addVectors(W1,s1).multiplyScalar(.5)),Dt&&(Zo=new f.Cylinder(Ug.clone(),$p.clone(),b1),wi=new f.Cylinder(gg.clone(),Qp.clone(),b1),aa=new f.Cylinder(W1.clone(),T0.clone(),b1),p.intersectionShape.cylinder.push(Zo),p.intersectionShape.cylinder.push(wi),p.intersectionShape.cylinder.push(aa)),It&&(Yo=new f.Cylinder(Pg.clone(),$p.clone(),b1),Ci=new f.Cylinder(vg.clone(),Qp.clone(),b1),Ip=new f.Cylinder(s1.clone(),T0.clone(),b1),I1.intersectionShape.cylinder.push(Yo),I1.intersectionShape.cylinder.push(Ci),I1.intersectionShape.cylinder.push(Ip))))}}}var Fv=!1,Pv=0,fy=!1;for(Mt=0;Mt<p.bonds.length;Mt++)Wt=Pm,p.bondStyles&&p.bondStyles[Mt]&&((Yt=p.bondStyles[Mt]).singleBond&&(Wt=!0),Yt.radius&&Yt.radius!=g0&&(fy=!0)),(Wt||p.bondOrder[Mt]==1)&&Pv++;fy?Pv>0&&(Fv=!0):Pv==0&&(p.bonds.length>0||tt.showNonBonded)&&(Fv=!0),Fv&&(G0=g0,W.imposter?this.drawSphereImposter(W.sphereGeometry,p,G0,_1):o.drawSphere(W,p,G0,_1))}}}createMolObj(p,R){R=R||{};var W,J,Et,tt,Dt=new s.Object3D,It=[],Mt={},Wt={},Yt=this.drawAtomSphere,Zo=null,wi=null;R.supportsImposters?(Yt=this.drawAtomImposter,(Zo=new s.Geometry(!0)).imposter=!0,(wi=new s.Geometry(!0,!0)).imposter=!0,wi.sphereGeometry=new s.Geometry(!0),wi.sphereGeometry.imposter=!0,wi.drawnCaps={}):R.supportsAIA?(Yt=this.drawAtomInstanced,(Zo=new s.Geometry(!1,!0,!0)).instanced=!0,wi=new s.Geometry(!0)):(Zo=new s.Geometry(!0),wi=new s.Geometry(!0));var aa,Yo={},Ci=[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];for(W=0,Et=p.length;W<Et;W++){var Ip=p[W];if(Ip&&Ip.style){for(J in(Ip.clickable||Ip.hoverable)&&Ip.intersectionShape===void 0&&(Ip.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),tt={line:void 0,cross:void 0,stick:void 0,sphere:void 0})Ip.style[J]?Ip.style[J].opacity?tt[J]=parseFloat(Ip.style[J].opacity):tt[J]=1:tt[J]=void 0,Yo[J]?tt[J]!=null&&Yo[J]!=tt[J]&&(console.log("Warning: "+J+" opacity is ambiguous"),Yo[J]=1):Yo[J]=tt[J];Yt.call(this,Ip,Zo),this.drawAtomClickSphere(Ip),this.drawAtomCross(Ip,Wt),this.drawBondLines(Ip,p,Mt),this.drawBondSticks(Ip,p,wi),Ip.style.cartoon===void 0||Ip.style.cartoon.hidden||(Ip.style.cartoon.color!=="spectrum"||typeof Ip.resi!="number"||Ip.hetflag||(Ip.resi<Ci[0]&&(Ci[0]=Ip.resi),Ip.resi>Ci[1]&&(Ci[1]=Ip.resi)),It.push(Ip))}}if(It.length>0&&kp(Dt,It,Ci,this.defaultCartoonQuality),Zo&&Zo.vertices>0){Zo.initTypedArrays();var $p=null,Qp=null;Zo.imposter?$p=new s.SphereImposterMaterial({ambient:0,vertexColors:!0,reflectivity:0}):Zo.instanced?(Qp=new s.Geometry(!0),o.drawSphere(Qp,{x:0,y:0,z:0},1,new b.Color(.5,.5,.5)),Qp.initTypedArrays(),$p=new s.InstancedMaterial({sphereMaterial:new s.MeshLambertMaterial({ambient:0,vertexColors:!0,reflectivity:0}),sphere:Qp})):$p=new s.MeshLambertMaterial({ambient:0,vertexColors:!0,reflectivity:0}),Yo.sphere<1&&Yo.sphere>=0&&($p.transparent=!0,$p.opacity=Yo.sphere),Qp=new s.Mesh(Zo,$p),Dt.add(Qp)}if(wi.vertices>0){var T0=null,g0=null,U0=wi.sphereGeometry;U0&&U0.vertices!==void 0&&U0.vertices!=0||(U0=null),wi.initTypedArrays(),U0&&U0.initTypedArrays();var Y0={ambient:0,vertexColors:!0,reflectivity:0};wi.imposter?(T0=new s.StickImposterMaterial(Y0),g0=new s.SphereImposterMaterial(Y0)):(T0=new s.MeshLambertMaterial(Y0),g0=new s.MeshLambertMaterial(Y0),T0.wireframe&&(wi.setUpWireframe(),U0&&U0.setUpWireframe())),Yo.stick<1&&Yo.stick>=0&&(T0.transparent=!0,T0.opacity=Yo.stick,g0.transparent=!0,g0.opacity=Yo.stick);var Q0=new s.Mesh(wi,T0);if(Dt.add(Q0),U0){var tm=new s.Mesh(U0,g0);Dt.add(tm)}}for(W in Mt)if(Mt.hasOwnProperty(W)){aa=W;var G0=new s.LineBasicMaterial({linewidth:aa,vertexColors:!0});Yo.line<1&&Yo.line>=0&&(G0.transparent=!0,G0.opacity=Yo.line),Mt[W].initTypedArrays();var Pm=new s.Line(Mt[W],G0,s.LineStyle.LinePieces);Dt.add(Pm)}for(W in Wt)if(Wt.hasOwnProperty(W)){aa=W;var km=new s.LineBasicMaterial({linewidth:aa,vertexColors:!0});Yo.cross<1&&Yo.cross>=0&&(km.transparent=!0,km.opacity=Yo.cross),Wt[W].initTypedArrays();var i1=new s.Line(Wt[W],km,s.LineStyle.LinePieces);Dt.add(i1)}if(this.dontDuplicateAtoms&&this.modelData.symmetries&&this.modelData.symmetries.length>0){var Qm,_1=new s.Object3D;for(Qm=0;Qm<this.modelData.symmetries.length;Qm++){var C1=new s.Object3D;(C1=Dt.clone()).matrix.copy(this.modelData.symmetries[Qm]),C1.matrixAutoUpdate=!1,_1.add(C1)}return _1}return Dt}getViewer(){return this.viewer}getInternalState(){return{atoms:this.atoms,frames:this.frames}}setInternalState(p){this.atoms=p.atoms,this.frames=p.frames,this.molObj=null}getCrystData(){if(this.modelData.cryst){if(!this.modelData.cryst.matrix){const p=this.modelData.cryst;this.modelData.cryst.matrix=(0,m.conversionMatrix3)(p.a,p.b,p.c,p.alpha,p.beta,p.gamma)}return this.modelData.cryst}return null}setCrystData(p,R,W,J,Et,tt){p=p||1,R=R||1,W=W||1,J=J||90,Et=Et||90,tt=tt||90;const Dt=(0,m.conversionMatrix3)(p,R,W,J,Et,tt);this.modelData.cryst={a:p,b:R,c:W,alpha:J,beta:Et,gamma:tt,matrix:Dt}}setCrystMatrix(p){p=p||new m.Matrix3(1,0,0,0,1,0,0,0,1),this.modelData.cryst={matrix:p}}getSymmetries(){return this.modelData.symmetries===void 0&&(this.modelData.symmetries=[this.idMatrix]),this.modelData.symmetries}setSymmetries(p){p===void 0?this.modelData.symmetries=[this.idMatrix]:(this.modelData.symmetries=p,this.molObj=null)}getID(){return this.id}getNumFrames(){return this.frames.numFrames!=null?this.frames.numFrames:this.frames.length}adjustCoord(p,R,W,J){var Et=R-p;return Et<-W?R+J:Et>W?R-J:R}adjustCoordinatesToBox(){if(this.box&&this.atomdfs)for(var p=this.box[0],R=this.box[1],W=this.box[2],J=.9*p,Et=.9*R,tt=.9*W,Dt=0;Dt<this.atomdfs.length;Dt++)for(var It=this.atomdfs[Dt],Mt=1;Mt<It.length;Mt++){var Wt=this.atoms[It[Mt][0]],Yt=this.atoms[It[Mt][1]];Wt.x=this.adjustCoord(Yt.x,Wt.x,J,p),Wt.y=this.adjustCoord(Yt.y,Wt.y,Et,R),Wt.z=this.adjustCoord(Yt.z,Wt.z,tt,W)}}setFrame(p){var R=this.getNumFrames();let W=this,J=this.viewer;return new Promise(function(Et,tt){if(R==0&&Et(),(p<0||p>=R)&&(p=R-1),W.frames.url!=null){var Dt=W.frames.url;(0,M.getbin)(Dt+"/traj/frame/"+p+"/"+W.frames.path,void 0,"POST",void 0).then(function(It){for(var Mt=new Float32Array(It,44),Wt=0,Yt=0;Yt<W.atoms.length;Yt++)W.atoms[Yt].x=Mt[Wt++],W.atoms[Yt].y=Mt[Wt++],W.atoms[Yt].z=Mt[Wt++];W.box&&W.atomdfs&&W.adjustCoordinatesToBox(),Et()}).catch(tt)}else W.atoms=W.frames[p],Et();W.molObj=null,W.modelDatas&&p<W.modelDatas.length&&(W.modelData=W.modelDatas[p],W.unitCellObjects&&J&&(J.removeUnitCell(W),J.addUnitCell(W)))})}addFrame(p){this.frames.push(p)}vibrate(p=10,R=1,W=!1,J){var Et=0,tt=p;let Dt=this.viewer;W&&(Et=-p,tt=p),this.frames!==void 0&&this.frames.origIndex!==void 0?this.setFrame(this.frames.origIndex):this.setFrame(0),Et<tt&&(this.frames=[]),W&&(this.frames.origIndex=p);for(var It=Et;It<tt;It++){var Mt=[],Wt=this.frames.length;if(It!=0||J){for(var Yt=0;Yt<this.atoms.length;Yt++){var Zo=(0,M.getAtomProperty)(this.atoms[Yt],"dx"),wi=(0,M.getAtomProperty)(this.atoms[Yt],"dy"),aa=(0,M.getAtomProperty)(this.atoms[Yt],"dz"),Yo=new m.Vector3(Zo,wi,aa),Ci=new m.Vector3(this.atoms[Yt].x,this.atoms[Yt].y,this.atoms[Yt].z),Ip=It*R/p;Yo.multiplyScalar(Ip),Ci.add(Yo);var $p={};for(var Qp in this.atoms[Yt])$p[Qp]=this.atoms[Yt][Qp];if($p.x=Ci.x,$p.y=Ci.y,$p.z=Ci.z,Mt.push($p),Dt&&J){var T0=(0,M.extend)({},J),g0=new m.Vector3(Zo,wi,aa);if(g0.multiplyScalar(R),g0.add(Ci),T0.start=Ci,T0.end=g0,T0.frame=Wt,!T0.color){var U0=$p.style.sphere;U0||(U0=$p.style.stick),U0||(U0=$p.style.line),T0.color=(0,M.getColorFromStyle)($p,U0)}Dt.addArrow(T0)}}this.frames.push(Mt)}else this.frames.push(this.atoms)}}setAtomDefaults(p){for(let R=0;R<p.length;R++){let W=p[R];W&&(W.style=W.style||(0,M.deepCopy)(wg.defaultAtomStyle),W.color=W.color||this.ElementColors[W.elem]||this.defaultColor,W.model=this.id,(W.clickable||W.hoverable)&&(W.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}))}}addMolData(p,R,W={}){var J=wg.parseMolData(p,R,W);this.dontDuplicateAtoms=!W.duplicateAssemblyAtoms;var Et=J.modelData;if(Et&&(Array.isArray(Et)?(this.modelData=Et[0],W.frames&&(this.modelDatas=Et)):this.modelData=Et),J.box?this.box=J.box:this.box=null,this.frames.length==0){for(let Dt=0;Dt<J.length;Dt++)J[Dt].length!=0&&this.frames.push(J[Dt]);this.frames[0]&&(this.atoms=this.frames[0])}else if(W.frames)for(let Dt=0;Dt<J.length;Dt++)this.frames.push(J[Dt]);else for(var tt=0;tt<J.length;tt++)this.addAtoms(J[tt]);for(let Dt=0;Dt<this.frames.length;Dt++)this.setAtomDefaults(this.frames[Dt]);W.vibrate&&W.vibrate.frames&&W.vibrate.amplitude&&this.vibrate(W.vibrate.frames,W.vibrate.amplitude),W.style&&this.setStyle({},W.style)}setDontDuplicateAtoms(p){this.dontDuplicateAtoms=p}setModelData(p){this.modelData=p}propertyMatches(p,R){if(p==R)return!0;if(typeof R=="string"&&typeof p=="number"){var W=R.match(/(-?\d+)\s*-\s*(-?\d+)/);if(W){var J=parseInt(W[1]),Et=parseInt(W[2]);if(W&&p>=J&&p<=Et)return!0}}return!1}static deepCopyAndCache(p,R){if(typeof p!="object"||p==null||p instanceof wg||p.__cache_created)return p;const W={};for(const J in p){const Et=p[J];if(Array.isArray(Et)){W[J]=[];for(let tt=0;tt<Et.length;tt++)W[J].push(wg.deepCopyAndCache(Et[tt],R))}else W[J]=typeof Et=="object"&&J!="properties"&&J!="model"?wg.deepCopyAndCache(Et,R):Et;if(J=="and"||J=="or"){const tt=[];for(const Dt of W[J]){const It=new Set;for(const Mt of R.selectedAtoms(Dt))It.add(Mt.index);tt.push(It)}if(J=="and"){const Dt=function(Mt,Wt){const Yt=new Set;for(const Zo of Wt)Mt.has(Zo)&&Yt.add(Zo);return Yt};let It=new Set(tt[0]);for(const Mt of tt.splice(1))It=Dt(It,Mt);W[J].__cached_results=It}else if(J=="or"){const Dt=new Set;for(const It of tt)for(const Mt of It)Dt.add(Mt);W[J].__cached_results=Dt}}}return W.__cache_created=!0,W}atomIsSelected(p,R){if(R===void 0)return!0;var W=!!R.invert,J=!0;for(var Et in R)if(Et=="and"||Et=="or"||Et=="not"){if(Et=="not"){if(this.atomIsSelected(p,R[Et])){J=!1;break}}else if(R[Et].__cached_results===void 0&&(R=wg.deepCopyAndCache(R,this)),!(J=R[Et].__cached_results.has(p.index)))break}else if(Et==="predicate"){if(!R.predicate(p)){J=!1;break}}else if(Et=="properties"&&p[Et]){for(var tt in R.properties)if(!tt.startsWith("__cache")){if(p.properties[tt]===void 0){J=!1;break}if(p.properties[tt]!=R.properties[tt]){J=!1;break}}}else if(Et=="model"){let Mt=R.model;if(typeof Mt=="number"&&Mt<0&&(Mt=this.viewer.getNextModelId()+Mt),Array.isArray(Mt)){let Wt=!1;for(let Yt=0;Yt<Mt.length;Yt++)if(Mt[Yt]==this||Mt[Yt]==this.id){Wt=!0;break}if(!Wt){J=!1;break}}else if(Mt!=this&&Mt!=this.id){J=!1;break}}else if(R.hasOwnProperty(Et)&&!wg.ignoredKeys.has(Et)&&!Et.startsWith("__cache")){if(p[Et]===void 0){J=!1;break}let Mt=!1;if(Et==="bonds"){if(R[Et]!=p.bonds.length){J=!1;break}}else if(Array.isArray(R[Et])){var Dt=R[Et],It=p[Et];for(let Wt=0;Wt<Dt.length;Wt++)if(this.propertyMatches(It,Dt[Wt])){Mt=!0;break}if(!Mt){J=!1;break}}else{let Wt=R[Et];if(!this.propertyMatches(p[Et],Wt)){J=!1;break}}}return W?!J:J}static squaredDistance(p,R){var W=R.x-p.x,J=R.y-p.y,Et=R.z-p.z;return W*W+J*J+Et*Et}expandAtomList(p,R){if(R<=0)return p;for(var W=(0,M.getExtent)(p,void 0),J=[[],[],[]],Et=0;Et<3;Et++)J[0][Et]=W[0][Et]-R,J[1][Et]=W[1][Et]+R,J[2][Et]=W[2][Et];var tt=[];for(let Wt=0;Wt<this.atoms.length;Wt++){var Dt=this.atoms[Wt].x,It=this.atoms[Wt].y,Mt=this.atoms[Wt].z;Dt>=J[0][0]&&Dt<=J[1][0]&&It>=J[0][1]&&It<=J[1][1]&&Mt>=J[0][2]&&Mt<=J[1][2]&&(Dt>=W[0][0]&&Dt<=W[1][0]&&It>=W[0][1]&&It<=W[1][1]&&Mt>=W[0][2]&&Mt<=W[1][2]||tt.push(this.atoms[Wt]))}return tt}static getFloat(p){return typeof p=="number"?p:parseFloat(p)}selectedAtoms(p,R){var W=[];p=wg.deepCopyAndCache(p||{},this),R||(R=this.atoms);for(var J=R.length,Et=0;Et<J;Et++){var tt=R[Et];tt&&this.atomIsSelected(tt,p)&&W.push(tt)}if(p.hasOwnProperty("expand")){const $p=wg.getFloat(p.expand);let Qp=this.expandAtomList(W,$p),T0=W.length;const g0=$p*$p;for(let U0=0;U0<Qp.length;U0++)for(let Y0=0;Y0<T0;Y0++){var Dt=wg.squaredDistance(Qp[U0],W[Y0]);Dt<g0&&Dt>0&&W.push(Qp[U0])}}if(p.hasOwnProperty("within")&&p.within.hasOwnProperty("sel")&&p.within.hasOwnProperty("distance")){var It=this.selectedAtoms(p.within.sel,this.atoms),Mt={};const $p=wg.getFloat(p.within.distance),Qp=$p*$p;for(let T0=0;T0<It.length;T0++)for(let g0=0;g0<W.length;g0++){let U0=wg.squaredDistance(It[T0],W[g0]);U0<Qp&&U0>0&&(Mt[g0]=1)}var Wt=[];if(p.within.invert)for(let T0=0;T0<W.length;T0++)Mt[T0]||Wt.push(W[T0]);else for(let T0 in Mt)Wt.push(W[T0]);W=Wt}if(p.hasOwnProperty("byres")){var Yt={},Zo=[],wi=[];for(let $p=0;$p<W.length;$p++){let Qp=W[$p];var aa=Qp.chain,Yo=Qp.resi;if(Yt[aa]===void 0&&(Yt[aa]={}),Qp.hasOwnProperty("resi")&&Yt[aa][Yo]===void 0){for(Yt[aa][Yo]=!0,wi.push(Qp);wi.length>0;)if(Qp=wi.pop(),aa=Qp.chain,Yo=Qp.resi,Zo[Qp.index]===void 0){Zo[Qp.index]=!0;for(var Ci=0;Ci<Qp.bonds.length;Ci++){var Ip=this.atoms[Qp.bonds[Ci]];Zo[Ip.index]===void 0&&Ip.hasOwnProperty("resi")&&Ip.chain==aa&&Ip.resi==Yo&&(wi.push(Ip),W.push(Ip))}}}}}return W}addAtoms(p){this.molObj=null;var R,W=this.atoms.length,J=[];for(R=0;R<p.length;R++)p[R].index===void 0&&(p[R].index=R),p[R].serial===void 0&&(p[R].serial=R),J[p[R].index]=W+R;for(R=0;R<p.length;R++){var Et=p[R],tt=J[Et.index],Dt=(0,M.extend)({},Et);Dt.index=tt,Dt.bonds=[],Dt.bondOrder=[],Dt.model=this.id,Dt.style=Dt.style||(0,M.deepCopy)(wg.defaultAtomStyle),Dt.color===void 0&&(Dt.color=this.ElementColors[Dt.elem]||this.defaultColor);for(var It=Et.bonds?Et.bonds.length:0,Mt=0;Mt<It;Mt++){var Wt=J[Et.bonds[Mt]];Wt!==void 0&&(Dt.bonds.push(Wt),Dt.bondOrder.push(Et.bondOrder?Et.bondOrder[Mt]:1))}this.atoms.push(Dt)}}assignBonds(){(0,qo.assignBonds)(this.atoms,{assignBonds:!0})}removeAtoms(p){this.molObj=null;var R,W=[];for(R=0;R<p.length;R++)W[p[R].index]=!0;var J=[];for(R=0;R<this.atoms.length;R++){var Et=this.atoms[R];W[Et.index]||J.push(Et)}this.atoms=[],this.addAtoms(J)}setStyle(p,R,W){R===void 0&&W===void 0&&(R=p,p={}),typeof R=="string"&&(R=(0,M.specStringToObject)(R));var J=!1,Et=this,tt=function(It){var Mt=Et.selectedAtoms(p,It);for(let Wt=0;Wt<It.length;Wt++)It[Wt]&&(It[Wt].capDrawn=!1);for(let Wt=0;Wt<Mt.length;Wt++){J=!0,(Mt[Wt].clickable||Mt[Wt].hoverable)&&(Mt[Wt].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),W||(Mt[Wt].style={});for(let Yt in R)R.hasOwnProperty(Yt)&&(Mt[Wt].style[Yt]=Mt[Wt].style[Yt]||{},Object.assign(Mt[Wt].style[Yt],R[Yt]))}};if(p.frame!==void 0&&p.frame<this.frames.length){let It=p.frame;It<0&&(It=this.frames.length+It),tt(this.frames[It])}else{tt(this.atoms);for(var Dt=0;Dt<this.frames.length;Dt++)this.frames[Dt]!==this.atoms&&tt(this.frames[Dt])}J&&(this.molObj=null)}setClickable(p,R,W){if(R=!!R,(W=(0,M.makeFunction)(W))!==null){var J=this.selectedAtoms(p,this.atoms),Et=J.length;for(let tt=0;tt<Et;tt++)J[tt].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},J[tt].clickable=R,W&&(J[tt].callback=W);Et>0&&(this.molObj=null)}else console.log("Callback is not a function")}setHoverable(p,R,W,J){if(R=!!R,W=(0,M.makeFunction)(W),J=(0,M.makeFunction)(J),W!==null)if(J!==null){var Et=this.selectedAtoms(p,this.atoms),tt=Et.length;for(let Dt=0;Dt<tt;Dt++)Et[Dt].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},Et[Dt].hoverable=R,W&&(Et[Dt].hover_callback=W),J&&(Et[Dt].unhover_callback=J);tt>0&&(this.molObj=null)}else console.log("Unhover_callback is not a function");else console.log("Hover_callback is not a function")}enableContextMenu(p,R){var W;R=!!R;var J=this.selectedAtoms(p,this.atoms),Et=J.length;for(W=0;W<Et;W++)J[W].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},J[W].contextMenuEnabled=R;Et>0&&(this.molObj=null)}setColorByElement(p,R){if(this.molObj===null||!wg.sameObj(R,this.lastColors)){this.lastColors=R;var W=this.selectedAtoms(p,W);W.length>0&&(this.molObj=null);for(var J=0;J<W.length;J++){var Et=W[J];R[Et.elem]!==void 0&&(Et.color=R[Et.elem])}}}setColorByProperty(p,R,W,J){var Et,tt,Dt=this.selectedAtoms(p,Dt);for(this.lastColors=null,Dt.length>0&&(this.molObj=null),typeof W=="string"&&E.Gradient.builtinGradients[W]!==void 0&&(W=new E.Gradient.builtinGradients[W]),J||(J=W.range()),J||(J=(0,M.getPropertyRange)(Dt,R)),Et=0;Et<Dt.length;Et++)tt=Dt[Et],(0,M.getAtomProperty)(tt,R)!=null&&(tt.color=W.valueToHex(parseFloat(tt.properties[R]),J))}setColorByFunction(p,R){var W=this.selectedAtoms(p,W);if(typeof R=="function"){this.lastColors=null,W.length>0&&(this.molObj=null);for(let J=0;J<W.length;J++){let Et=W[J];Et.color=R(Et)}}}toCDObject(p=!1){var R={a:[],b:[]};p&&(R.s=[]);for(let J=0;J<this.atoms.length;J++){let Et={},tt=this.atoms[J];if(Et.x=tt.x,Et.y=tt.y,Et.z=tt.z,tt.elem!="C"&&(Et.l=tt.elem),p){for(var W=0;W<R.s.length&&JSON.stringify(tt.style)!==JSON.stringify(R.s[W]);)W++;W===R.s.length&&R.s.push(tt.style),W!==0&&(Et.s=W)}R.a.push(Et);for(let Dt=0;Dt<tt.bonds.length;Dt++){let It=J,Mt=tt.bonds[Dt];if(It>=Mt)continue;let Wt={b:It,e:Mt},Yt=tt.bondOrder[Dt];Yt!=1&&(Wt.o=Yt),R.b.push(Wt)}}return R}globj(p,R){(this.molObj===null||R.regen)&&(this.molObj=this.createMolObj(this.atoms,R),this.renderedMolObj&&(p.remove(this.renderedMolObj),this.renderedMolObj=null),this.renderedMolObj=this.molObj.clone(),this.hidden&&(this.renderedMolObj.setVisible(!1),this.molObj.setVisible(!1)),p.add(this.renderedMolObj))}exportVRML(){return this.createMolObj(this.atoms,{supportsImposters:!1,supportsAIA:!1}).vrml()}removegl(p){this.renderedMolObj&&(this.renderedMolObj.geometry!==void 0&&this.renderedMolObj.geometry.dispose(),this.renderedMolObj.material!==void 0&&this.renderedMolObj.material.dispose(),p.remove(this.renderedMolObj),this.renderedMolObj=null),this.molObj=null}hide(){this.hidden=!0,this.renderedMolObj&&this.renderedMolObj.setVisible(!1),this.molObj&&this.molObj.setVisible(!1)}show(){this.hidden=!1,this.renderedMolObj&&this.renderedMolObj.setVisible(!0),this.molObj&&this.molObj.setVisible(!0)}addPropertyLabels(p,R,W){let J=this.selectedAtoms(R),Et=this.viewer,tt=(0,M.deepCopy)(W);for(let It=0;It<J.length;It++){let Mt=J[It];var Dt=null;Mt[p]!==void 0?Dt=String(Mt[p]):Mt.properties[p]!==void 0&&(Dt=String(Mt.properties[p])),Dt!=null&&(tt.position=Mt,Et.addLabel(Dt,tt))}}addResLabels(p,R,W=!1){let J=this.viewer;var Et=[],tt=function(It,Mt){for(var Wt=It.selectedAtoms(p,Wt),Yt={},Zo=0;Zo<Wt.length;Zo++){var wi=Wt[Zo],aa=wi.chain,Yo=wi.resn+""+wi.resi;Yt[aa]||(Yt[aa]={}),Yt[aa][Yo]||(Yt[aa][Yo]=[]),Yt[aa][Yo].push(wi)}var Ci=(0,M.deepCopy)(R);for(let $p in Yt)if(Yt.hasOwnProperty($p)){var Ip=Yt[$p];for(let Qp in Ip)if(Ip.hasOwnProperty(Qp)){let T0=Ip[Qp],g0=new m.Vector3(0,0,0);for(let Y0=0;Y0<T0.length;Y0++){let Q0=T0[Y0];g0.x+=Q0.x,g0.y+=Q0.y,g0.z+=Q0.z}g0.divideScalar(T0.length),Ci.position=g0,Ci.frame=Mt;let U0=J.addLabel(Qp,Ci,void 0,!0);Et.push(U0)}}};if(W){var Dt=this.getNumFrames();let It=this.atoms;for(let Mt=0;Mt<Dt;Mt++)this.frames[Mt]&&(this.atoms=this.frames[Mt],tt(this,Mt));this.atoms=It}else tt(this);return Et}setupDFS(){this.atomdfs=[];var p=this,R=new Int8Array(this.atoms.length);R.fill(0);for(var W=function(tt,Dt,It){It.push([tt,Dt]);var Mt=p.atoms[tt];R[tt]=1;for(var Wt=0;Wt<Mt.bonds.length;Wt++){var Yt=Mt.bonds[Wt];p.atoms[Yt]&&!R[Yt]&&W(Yt,tt,It)}},J=0;J<this.atoms.length;J++)if(this.atoms[J]&&!R[J]){var Et=[];W(J,-1,Et),this.atomdfs.push(Et)}}setCoordinatesFromURL(p,R){this.frames=[];var W=this;return this.box&&this.setupDFS(),p.startsWith("http")||(p="http://"+p),(0,M.get)(p+"/traj/numframes/"+R,function(J){if(!isNaN(parseInt(J)))return W.frames.push(W.atoms),W.frames.numFrames=J,W.frames.url=p,W.frames.path=R,W.setFrame(0)})}setCoordinates(p,R){if(!p)return[];if(/\.gz$/.test(R=R||"")){R=R.replace(/\.gz$/,"");try{p=(0,M.inflateString)(p)}catch(Wt){console.log(Wt)}}if({mdcrd:"",inpcrd:"",pdb:"",netcdf:"",array:""}.hasOwnProperty(R)){this.frames=[];for(var W=this.atoms.length,J=wg.parseCrd(p,R),Et=0;Et<J.length;){for(var tt=[],Dt=0;Dt<W;Dt++){var It={};for(var Mt in this.atoms[Dt])It[Mt]=this.atoms[Dt][Mt];tt[Dt]=It,tt[Dt].x=J[Et++],tt[Dt].y=J[Et++],tt[Dt].z=J[Et++]}this.frames.push(tt)}return this.atoms=this.frames[0],this.frames}return[]}addAtomSpecs(p){}static parseCrd(p,R){var W=[],J=0;if(R=="pdb")for(var Et=p.indexOf(`
ATOM`);Et!=-1;){for(;p.slice(Et,Et+5)==`
ATOM`||p.slice(Et,Et+7)==`
HETATM`;)W[J++]=parseFloat(p.slice(Et+31,Et+39)),W[J++]=parseFloat(p.slice(Et+39,Et+47)),W[J++]=parseFloat(p.slice(Et+47,Et+55)),Et=p.indexOf(`
`,Et+54),p.slice(Et,Et+4)==`
TER`&&(Et=p.indexOf(`
`,Et+5));Et=p.indexOf(`
ATOM`,Et)}else if(R=="netcdf"){var tt=new Lv(p);W=[].concat.apply([],tt.getDataVariable("coordinates"))}else{if(R=="array"||Array.isArray(p))return p.flat(2);{let Dt=p.indexOf(`
`);R=="inpcrd"&&(Dt=p.indexOf(`
`,Dt+1)),W=(p=p.slice(Dt+1)).match(/\S+/g).map(parseFloat)}}return W}static parseMolData(p,R="",W){if(!p)return[];if(/\.gz$/.test(R)){R=R.replace(/\.gz$/,"");try{p=R.match(/bcif/i)?(0,M.inflateString)(p,!1):(0,M.inflateString)(p)}catch(J){console.log(J)}}return Um[R]===void 0&&(R=R.split(".").pop(),Um[R]===void 0&&(console.log("Unknown format: "+R),R=p instanceof Uint8Array?"bcif":p.match(/^@<TRIPOS>MOLECULE/gm)?"mol2":p.match(/^data_/gm)&&p.match(/^loop_/gm)?"cif":p.match(/^HETATM/gm)||p.match(/^ATOM/gm)?"pdb":p.match(/ITEM: TIMESTEP/gm)?"lammpstrj":p.match(/^.*\n.*\n.\s*(\d+)\s+(\d+)/gm)?"sdf":p.match(/^%VERSION\s+VERSION_STAMP/gm)?"prmtop":"xyz",console.log("Best guess: "+R))),(0,Um[R])(p,W)}}var Ov;wg.defaultAtomStyle={line:{}},wg.defaultlineWidth=1,wg.vdwRadii={H:1.2,He:1.4,Li:1.82,Be:1.53,B:1.92,C:1.7,N:1.55,O:1.52,F:1.47,Ne:1.54,Na:2.27,Mg:1.73,Al:1.84,Si:2.1,P:1.8,S:1.8,Cl:1.75,Ar:1.88,K:2.75,Ca:2.31,Ni:1.63,Cu:1.4,Zn:1.39,Ga:1.87,Ge:2.11,As:1.85,Se:1.9,Br:1.85,Kr:2.02,Rb:3.03,Sr:2.49,Pd:1.63,Ag:1.72,Cd:1.58,In:1.93,Sn:2.17,Sb:2.06,Te:2.06,I:1.98,Xe:2.16,Cs:3.43,Ba:2.68,Pt:1.75,Au:1.66,Hg:1.55,Tl:1.96,Pb:2.02,Bi:2.07,Po:1.97,At:2.02,Rn:2.2,Fr:3.48,Ra:2.83,U:1.86},wg.ignoredKeys=new Set(["props","invert","model","frame","byres","expand","within","and","or","not"]),(function(o0){o0[o0.VDW=1]="VDW",o0[o0.MS=2]="MS",o0[o0.SAS=3]="SAS",o0[o0.SES=4]="SES"})(Ov||(Ov={}));var Uv=!1;function zy(o0){Uv=o0}(window.navigator.userAgent.indexOf("MSIE ")>=0||window.navigator.userAgent.indexOf("Trident/")>=0)&&(Uv=!0);class mg{constructor(){this.ISDONE=2,this.edgeTable=new Uint32Array([0,0,0,0,0,0,0,2816,0,0,0,1792,0,3328,3584,3840,0,0,0,138,0,21,0,134,0,0,0,652,0,2067,3865,3600,0,0,0,42,0,0,0,294,0,0,21,28,0,3875,1049,3360,0,168,162,170,0,645,2475,2210,0,687,293,172,4010,3747,3497,3232,0,0,0,0,0,69,0,900,0,0,0,1792,138,131,1608,1920,0,81,0,2074,84,85,84,86,0,81,0,3676,330,1105,1881,1616,0,0,0,42,0,69,0,502,0,0,21,3580,138,2035,1273,1520,2816,104,2337,106,840,581,367,102,2816,3695,3429,3180,1898,1635,1385,1120,0,0,0,0,0,0,0,3910,0,0,69,588,42,2083,41,2880,0,0,0,1722,0,2293,4095,3830,0,255,757,764,2538,2291,3065,2800,0,0,81,338,0,3925,1119,3414,84,855,85,340,2130,2899,89,2384,1792,712,194,1162,4036,3781,3535,3270,708,719,197,204,3018,2755,2505,2240,0,0,0,0,168,420,168,1958,162,162,676,2988,170,163,680,928,3328,3096,3328,3642,52,53,1855,1590,2340,2111,2869,2620,298,51,825,560,3584,3584,3090,3482,1668,1941,1183,1430,146,2975,2069,2460,154,915,153,400,3840,3592,3329,3082,1796,1541,1295,1030,2818,2575,2309,2060,778,515,265,0]),this.triTable=[[],[],[],[],[],[],[],[11,9,8],[],[],[],[8,10,9],[],[10,8,11],[9,11,10],[8,10,9,8,11,10],[],[],[],[1,7,3],[],[4,2,0],[],[2,1,7],[],[],[],[2,7,3,2,9,7],[],[1,4,11,1,0,4],[3,8,0,11,9,4,11,10,9],[4,11,9,11,10,9],[],[],[],[5,3,1],[],[],[],[2,5,8,2,1,5],[],[],[2,4,0],[3,2,4],[],[0,9,1,8,10,5,8,11,10],[3,4,0,3,10,4],[5,8,10,8,11,10],[],[3,5,7],[7,1,5],[1,7,3,1,5,7],[],[9,2,0,9,7,2],[0,3,8,1,7,11,1,5,7],[11,1,7,1,5,7],[],[9,1,0,5,3,2,5,7,3],[8,2,5,8,0,2],[2,5,3,5,7,3],[3,9,1,3,8,9,7,11,10,7,10,5],[9,1,0,10,7,11,10,5,7],[3,8,0,7,10,5,7,11,10],[11,5,7,11,10,5],[],[],[],[],[],[0,6,2],[],[7,2,9,7,9,8],[],[],[],[8,10,9],[7,1,3],[7,1,0],[6,9,3,6,10,9],[7,10,8,10,9,8],[],[6,0,4],[],[11,1,4,11,3,1],[2,4,6],[2,0,4,2,4,6],[2,4,6],[1,4,2,4,6,2],[],[6,0,4],[],[2,11,3,6,9,4,6,10,9],[8,6,1,8,1,3],[10,0,6,0,4,6],[8,0,3,9,6,10,9,4,6],[10,4,6,10,9,4],[],[],[],[5,3,1],[],[0,6,2],[],[7,4,8,5,2,1,5,6,2],[],[],[2,4,0],[7,4,8,2,11,3,10,5,6],[7,1,3],[5,6,10,0,9,1,8,7,4],[5,6,10,7,0,3,7,4,0],[10,5,6,4,8,7],[9,11,8],[3,5,6],[0,5,11,0,11,8],[6,3,5,3,1,5],[3,9,6,3,8,9],[9,6,0,6,2,0],[0,3,8,2,5,6,2,1,5],[1,6,2,1,5,6],[9,11,8],[1,0,9,6,10,5,11,3,2],[6,10,5,2,8,0,2,11,8],[3,2,11,10,5,6],[10,5,6,9,3,8,9,1,3],[0,9,1,5,6,10],[8,0,3,10,5,6],[10,5,6],[],[],[],[],[],[],[],[1,10,2,9,11,6,9,8,11],[],[],[6,0,2],[3,6,9,3,2,6],[3,5,1],[0,5,1,0,11,5],[0,3,5],[6,9,11,9,8,11],[],[],[],[4,5,9,7,1,10,7,3,1],[],[11,6,7,2,4,5,2,0,4],[11,6,7,8,0,3,1,10,2,9,4,5],[6,7,11,1,10,2,9,4,5],[],[4,1,0,4,5,1,6,7,3,6,3,2],[9,4,5,0,6,7,0,2,6],[4,5,9,6,3,2,6,7,3],[6,7,11,5,3,8,5,1,3],[6,7,11,4,1,0,4,5,1],[4,5,9,3,8,0,11,6,7],[9,4,5,7,11,6],[],[],[0,6,4],[8,6,4,8,1,6],[],[0,10,2,0,9,10,4,8,11,4,11,6],[10,2,1,6,0,3,6,4,0],[10,2,1,11,4,8,11,6,4],[4,2,6],[1,0,9,2,4,8,2,6,4],[2,4,0,2,6,4],[8,2,4,2,6,4],[11,4,1,11,6,4],[0,9,1,4,11,6,4,8,11],[3,6,0,6,4,0],[8,6,4,8,11,6],[10,8,9],[6,3,9,6,7,3],[6,7,1],[10,7,1,7,3,1],[7,11,6,8,10,2,8,9,10],[11,6,7,10,0,9,10,2,0],[2,1,10,7,11,6,8,0,3],[1,10,2,6,7,11],[7,2,6,7,9,2],[1,0,9,3,6,7,3,2,6],[7,0,6,0,2,6],[2,7,3,2,6,7],[7,11,6,3,9,1,3,8,9],[9,1,0,11,6,7],[0,3,8,11,6,7],[11,6,7],[],[],[],[],[5,3,7],[8,5,2,8,7,5],[5,3,7],[1,10,2,5,8,7,5,9,8],[1,7,5],[1,7,5],[9,2,7,9,7,5],[11,3,2,8,5,9,8,7,5],[1,3,7,1,7,5],[0,7,1,7,5,1],[9,3,5,3,7,5],[9,7,5,9,8,7],[8,10,11],[3,4,10,3,10,11],[8,10,11],[5,9,4,1,11,3,1,10,11],[2,4,5],[5,2,4,2,0,4],[0,3,8,5,9,4,10,2,1],[2,1,10,9,4,5],[2,8,5,2,11,8],[3,2,11,1,4,5,1,0,4],[9,4,5,8,2,11,8,0,2],[11,3,2,9,4,5],[8,5,3,5,1,3],[5,0,4,5,1,0],[3,8,0,4,5,9],[9,4,5],[11,9,10],[11,9,10],[1,11,4,1,10,11],[8,7,4,11,1,10,11,3,1],[2,7,9,2,9,10],[4,8,7,0,10,2,0,9,10],[2,1,10,0,7,4,0,3,7],[10,2,1,8,7,4],[1,7,4],[3,2,11,4,8,7,9,1,0],[11,4,2,4,0,2],[2,11,3,7,4,8],[4,1,7,1,3,7],[1,0,9,8,7,4],[3,4,0,3,7,4],[8,7,4],[8,9,10,8,10,11],[3,9,11,9,10,11],[0,10,8,10,11,8],[10,3,1,10,11,3],[2,8,10,8,9,10],[9,2,0,9,10,2],[8,0,3,1,10,2],[10,2,1],[1,11,9,11,8,9],[11,3,2,0,9,1],[11,0,2,11,8,0],[11,3,2],[8,1,3,8,9,1],[9,1,0],[8,0,3],[]],this.edgeTable2=[0,265,515,778,2060,2309,2575,2822,1030,1295,1541,1804,3082,3331,3593,3840,400,153,915,666,2460,2197,2975,2710,1430,1183,1941,1692,3482,3219,3993,3728,560,825,51,314,2620,2869,2111,2358,1590,1855,1077,1340,3642,3891,3129,3376,928,681,419,170,2988,2725,2479,2214,1958,1711,1445,1196,4010,3747,3497,3232,2240,2505,2755,3018,204,453,719,966,3270,3535,3781,4044,1226,1475,1737,1984,2384,2137,2899,2650,348,85,863,598,3414,3167,3925,3676,1370,1107,1881,1616,2800,3065,2291,2554,764,1013,255,502,3830,4095,3317,3580,1786,2035,1273,1520,2912,2665,2403,2154,876,613,367,102,3942,3695,3429,3180,1898,1635,1385,1120,1120,1385,1635,1898,3180,3429,3695,3942,102,367,613,876,2154,2403,2665,2912,1520,1273,2035,1786,3580,3317,4095,3830,502,255,1013,764,2554,2291,3065,2800,1616,1881,1107,1370,3676,3925,3167,3414,598,863,85,348,2650,2899,2137,2384,1984,1737,1475,1226,4044,3781,3535,3270,966,719,453,204,3018,2755,2505,2240,3232,3497,3747,4010,1196,1445,1711,1958,2214,2479,2725,2988,170,419,681,928,3376,3129,3891,3642,1340,1077,1855,1590,2358,2111,2869,2620,314,51,825,560,3728,3993,3219,3482,1692,1941,1183,1430,2710,2975,2197,2460,666,915,153,400,3840,3593,3331,3082,1804,1541,1295,1030,2822,2575,2309,2060,778,515,265,0],this.triTable2=[[],[8,3,0],[9,0,1],[8,3,1,8,1,9],[11,2,3],[11,2,0,11,0,8],[11,2,3,0,1,9],[2,1,11,1,9,11,11,9,8],[10,1,2],[8,3,0,1,2,10],[9,0,2,9,2,10],[3,2,8,2,10,8,8,10,9],[10,1,3,10,3,11],[1,0,10,0,8,10,10,8,11],[0,3,9,3,11,9,9,11,10],[8,10,9,8,11,10],[8,4,7],[3,0,4,3,4,7],[1,9,0,8,4,7],[9,4,1,4,7,1,1,7,3],[2,3,11,7,8,4],[7,11,4,11,2,4,4,2,0],[3,11,2,4,7,8,9,0,1],[2,7,11,2,1,7,1,4,7,1,9,4],[10,1,2,8,4,7],[2,10,1,0,4,7,0,7,3],[4,7,8,0,2,10,0,10,9],[2,7,3,2,9,7,7,9,4,2,10,9],[8,4,7,11,10,1,11,1,3],[11,4,7,1,4,11,1,11,10,1,0,4],[3,8,0,7,11,4,11,9,4,11,10,9],[7,11,4,4,11,9,11,10,9],[9,5,4],[3,0,8,4,9,5],[5,4,0,5,0,1],[4,8,5,8,3,5,5,3,1],[11,2,3,9,5,4],[9,5,4,8,11,2,8,2,0],[3,11,2,1,5,4,1,4,0],[8,5,4,2,5,8,2,8,11,2,1,5],[2,10,1,9,5,4],[0,8,3,5,4,9,10,1,2],[10,5,2,5,4,2,2,4,0],[3,4,8,3,2,4,2,5,4,2,10,5],[5,4,9,1,3,11,1,11,10],[0,9,1,4,8,5,8,10,5,8,11,10],[3,4,0,3,10,4,4,10,5,3,11,10],[4,8,5,5,8,10,8,11,10],[9,5,7,9,7,8],[0,9,3,9,5,3,3,5,7],[8,0,7,0,1,7,7,1,5],[1,7,3,1,5,7],[11,2,3,8,9,5,8,5,7],[9,2,0,9,7,2,2,7,11,9,5,7],[0,3,8,2,1,11,1,7,11,1,5,7],[2,1,11,11,1,7,1,5,7],[1,2,10,5,7,8,5,8,9],[9,1,0,10,5,2,5,3,2,5,7,3],[5,2,10,8,2,5,8,5,7,8,0,2],[10,5,2,2,5,3,5,7,3],[3,9,1,3,8,9,7,11,10,7,10,5],[9,1,0,10,7,11,10,5,7],[3,8,0,7,10,5,7,11,10],[11,5,7,11,10,5],[11,7,6],[0,8,3,11,7,6],[9,0,1,11,7,6],[7,6,11,3,1,9,3,9,8],[2,3,7,2,7,6],[8,7,0,7,6,0,0,6,2],[1,9,0,3,7,6,3,6,2],[7,6,2,7,2,9,2,1,9,7,9,8],[1,2,10,6,11,7],[2,10,1,7,6,11,8,3,0],[11,7,6,10,9,0,10,0,2],[7,6,11,3,2,8,8,2,10,8,10,9],[6,10,7,10,1,7,7,1,3],[6,10,1,6,1,7,7,1,0,7,0,8],[9,0,3,6,9,3,6,10,9,6,3,7],[6,10,7,7,10,8,10,9,8],[8,4,6,8,6,11],[11,3,6,3,0,6,6,0,4],[0,1,9,4,6,11,4,11,8],[1,9,4,11,1,4,11,3,1,11,4,6],[3,8,2,8,4,2,2,4,6],[2,0,4,2,4,6],[1,9,0,3,8,2,2,8,4,2,4,6],[9,4,1,1,4,2,4,6,2],[10,1,2,11,8,4,11,4,6],[10,1,2,11,3,6,6,3,0,6,0,4],[0,2,10,0,10,9,4,11,8,4,6,11],[2,11,3,6,9,4,6,10,9],[8,4,6,8,6,1,6,10,1,8,1,3],[1,0,10,10,0,6,0,4,6],[8,0,3,9,6,10,9,4,6],[10,4,6,10,9,4],[9,5,4,7,6,11],[4,9,5,3,0,8,11,7,6],[6,11,7,4,0,1,4,1,5],[6,11,7,4,8,5,5,8,3,5,3,1],[4,9,5,6,2,3,6,3,7],[9,5,4,8,7,0,0,7,6,0,6,2],[4,0,1,4,1,5,6,3,7,6,2,3],[7,4,8,5,2,1,5,6,2],[6,11,7,1,2,10,9,5,4],[11,7,6,8,3,0,1,2,10,9,5,4],[11,7,6,10,5,2,2,5,4,2,4,0],[7,4,8,2,11,3,10,5,6],[4,9,5,6,10,7,7,10,1,7,1,3],[5,6,10,0,9,1,8,7,4],[5,6,10,7,0,3,7,4,0],[10,5,6,4,8,7],[5,6,9,6,11,9,9,11,8],[0,9,5,0,5,3,3,5,6,3,6,11],[0,1,5,0,5,11,5,6,11,0,11,8],[11,3,6,6,3,5,3,1,5],[9,5,6,3,9,6,3,8,9,3,6,2],[5,6,9,9,6,0,6,2,0],[0,3,8,2,5,6,2,1,5],[1,6,2,1,5,6],[1,2,10,5,6,9,9,6,11,9,11,8],[1,0,9,6,10,5,11,3,2],[6,10,5,2,8,0,2,11,8],[3,2,11,10,5,6],[10,5,6,9,3,8,9,1,3],[0,9,1,5,6,10],[8,0,3,10,5,6],[10,5,6],[10,6,5],[8,3,0,10,6,5],[0,1,9,5,10,6],[10,6,5,9,8,3,9,3,1],[3,11,2,10,6,5],[6,5,10,2,0,8,2,8,11],[1,9,0,6,5,10,11,2,3],[1,10,2,5,9,6,9,11,6,9,8,11],[1,2,6,1,6,5],[0,8,3,2,6,5,2,5,1],[5,9,6,9,0,6,6,0,2],[9,6,5,3,6,9,3,9,8,3,2,6],[11,6,3,6,5,3,3,5,1],[0,5,1,0,11,5,5,11,6,0,8,11],[0,5,9,0,3,5,3,6,5,3,11,6],[5,9,6,6,9,11,9,8,11],[10,6,5,4,7,8],[5,10,6,7,3,0,7,0,4],[5,10,6,0,1,9,8,4,7],[4,5,9,6,7,10,7,1,10,7,3,1],[7,8,4,2,3,11,10,6,5],[11,6,7,10,2,5,2,4,5,2,0,4],[11,6,7,8,0,3,1,10,2,9,4,5],[6,7,11,1,10,2,9,4,5],[7,8,4,5,1,2,5,2,6],[4,1,0,4,5,1,6,7,3,6,3,2],[9,4,5,8,0,7,0,6,7,0,2,6],[4,5,9,6,3,2,6,7,3],[6,7,11,4,5,8,5,3,8,5,1,3],[6,7,11,4,1,0,4,5,1],[4,5,9,3,8,0,11,6,7],[9,4,5,7,11,6],[10,6,4,10,4,9],[8,3,0,9,10,6,9,6,4],[1,10,0,10,6,0,0,6,4],[8,6,4,8,1,6,6,1,10,8,3,1],[2,3,11,6,4,9,6,9,10],[0,10,2,0,9,10,4,8,11,4,11,6],[10,2,1,11,6,3,6,0,3,6,4,0],[10,2,1,11,4,8,11,6,4],[9,1,4,1,2,4,4,2,6],[1,0,9,3,2,8,2,4,8,2,6,4],[2,4,0,2,6,4],[3,2,8,8,2,4,2,6,4],[1,4,9,11,4,1,11,1,3,11,6,4],[0,9,1,4,11,6,4,8,11],[11,6,3,3,6,0,6,4,0],[8,6,4,8,11,6],[6,7,10,7,8,10,10,8,9],[9,3,0,6,3,9,6,9,10,6,7,3],[6,1,10,6,7,1,7,0,1,7,8,0],[6,7,10,10,7,1,7,3,1],[7,11,6,3,8,2,8,10,2,8,9,10],[11,6,7,10,0,9,10,2,0],[2,1,10,7,11,6,8,0,3],[1,10,2,6,7,11],[7,2,6,7,9,2,2,9,1,7,8,9],[1,0,9,3,6,7,3,2,6],[8,0,7,7,0,6,0,2,6],[2,7,3,2,6,7],[7,11,6,3,9,1,3,8,9],[9,1,0,11,6,7],[0,3,8,11,6,7],[11,6,7],[11,7,5,11,5,10],[3,0,8,7,5,10,7,10,11],[9,0,1,10,11,7,10,7,5],[3,1,9,3,9,8,7,10,11,7,5,10],[10,2,5,2,3,5,5,3,7],[5,10,2,8,5,2,8,7,5,8,2,0],[9,0,1,10,2,5,5,2,3,5,3,7],[1,10,2,5,8,7,5,9,8],[2,11,1,11,7,1,1,7,5],[0,8,3,2,11,1,1,11,7,1,7,5],[9,0,2,9,2,7,2,11,7,9,7,5],[11,3,2,8,5,9,8,7,5],[1,3,7,1,7,5],[8,7,0,0,7,1,7,5,1],[0,3,9,9,3,5,3,7,5],[9,7,5,9,8,7],[4,5,8,5,10,8,8,10,11],[3,0,4,3,4,10,4,5,10,3,10,11],[0,1,9,4,5,8,8,5,10,8,10,11],[5,9,4,1,11,3,1,10,11],[3,8,4,3,4,2,2,4,5,2,5,10],[10,2,5,5,2,4,2,0,4],[0,3,8,5,9,4,10,2,1],[2,1,10,9,4,5],[8,4,5,2,8,5,2,11,8,2,5,1],[3,2,11,1,4,5,1,0,4],[9,4,5,8,2,11,8,0,2],[11,3,2,9,4,5],[4,5,8,8,5,3,5,1,3],[5,0,4,5,1,0],[3,8,0,4,5,9],[9,4,5],[7,4,11,4,9,11,11,9,10],[3,0,8,7,4,11,11,4,9,11,9,10],[11,7,4,1,11,4,1,10,11,1,4,0],[8,7,4,11,1,10,11,3,1],[2,3,7,2,7,9,7,4,9,2,9,10],[4,8,7,0,10,2,0,9,10],[2,1,10,0,7,4,0,3,7],[10,2,1,8,7,4],[2,11,7,2,7,1,1,7,4,1,4,9],[3,2,11,4,8,7,9,1,0],[7,4,11,11,4,2,4,0,2],[2,11,3,7,4,8],[9,1,4,4,1,7,1,3,7],[1,0,9,8,7,4],[3,4,0,3,7,4],[8,7,4],[8,9,10,8,10,11],[0,9,3,3,9,11,9,10,11],[1,10,0,0,10,8,10,11,8],[10,3,1,10,11,3],[3,8,2,2,8,10,8,9,10],[9,2,0,9,10,2],[8,0,3,1,10,2],[10,2,1],[2,11,1,1,11,9,11,8,9],[11,3,2,0,9,1],[11,0,2,11,8,0],[11,3,2],[8,1,3,8,9,1],[9,1,0],[8,0,3],[]]}march(p,R,W,J){let Et=!!J.fulltable,tt=J.hasOwnProperty("origin")&&J.origin.hasOwnProperty("x")?J.origin:{x:0,y:0,z:0},Dt=!!J.voxel,It=J.matrix,Mt=J.nX||0,Wt=J.nY||0,Yt=J.nZ||0,Zo=J.scale||1,wi=null;wi=J.unitCube?J.unitCube:{x:Zo,y:Zo,z:Zo};let aa,Yo,Ci=new Int32Array(Mt*Wt*Yt);for(aa=0,Yo=Ci.length;aa<Yo;++aa)Ci[aa]=-1;let Ip=function(g0,U0,Y0,Q0,tm,G0){let Pm={x:0,y:0,z:0},km=tm;if(!(Q0&1<<tm)&&Q0&1<<G0&&(km=G0),1&km&&Y0++,2&km&&U0++,4&km&&g0++,It){let Qm=new m.Vector3(g0,U0,Y0);Qm=Qm.applyMatrix4(It),Pm={x:Qm.x,y:Qm.y,z:Qm.z}}else Pm.x=tt.x+wi.x*g0,Pm.y=tt.y+wi.y*U0,Pm.z=tt.z+wi.z*Y0;let i1=(Wt*g0+U0)*Yt+Y0;return Dt?(R.push(Pm),R.length-1):(Ci[i1]<0&&(Ci[i1]=R.length,R.push(Pm)),Ci[i1])},$p=new Int32Array(12),Qp=Et?this.edgeTable2:this.edgeTable,T0=Et?this.triTable2:this.triTable;for(aa=0;aa<Mt-1;++aa)for(let g0=0;g0<Wt-1;++g0)for(let U0=0;U0<Yt-1;++U0){let Y0=0;for(let G0=0;G0<8;++G0)Y0|=!!(p[(Wt*(aa+((4&G0)>>2))+g0+((2&G0)>>1))*Yt+U0+(1&G0)]&this.ISDONE)<<G0;if(Y0===0||Y0===255)continue;let Q0=Qp[Y0];if(Q0===0)continue;let tm=T0[Y0];1&Q0&&($p[0]=Ip(aa,g0,U0,Y0,0,1)),2&Q0&&($p[1]=Ip(aa,g0,U0,Y0,1,3)),4&Q0&&($p[2]=Ip(aa,g0,U0,Y0,3,2)),8&Q0&&($p[3]=Ip(aa,g0,U0,Y0,2,0)),16&Q0&&($p[4]=Ip(aa,g0,U0,Y0,4,5)),32&Q0&&($p[5]=Ip(aa,g0,U0,Y0,5,7)),64&Q0&&($p[6]=Ip(aa,g0,U0,Y0,7,6)),128&Q0&&($p[7]=Ip(aa,g0,U0,Y0,6,4)),256&Q0&&($p[8]=Ip(aa,g0,U0,Y0,0,4)),512&Q0&&($p[9]=Ip(aa,g0,U0,Y0,1,5)),1024&Q0&&($p[10]=Ip(aa,g0,U0,Y0,3,7)),2048&Q0&&($p[11]=Ip(aa,g0,U0,Y0,2,6));for(let G0=0;G0<tm.length;G0+=3){let Pm=$p[tm[G0]],km=$p[tm[G0+1]],i1=$p[tm[G0+2]];Dt&&G0>=3&&(R.push(R[Pm]),Pm=R.length-1,R.push(R[km]),km=R.length-1,R.push(R[i1]),i1=R.length-1),W.push(Pm),W.push(km),W.push(i1)}}}laplacianSmooth(p,R,W){let J,Et,tt,Dt,It,Mt=new Array(R.length);for(J=0,Et=R.length;J<Et;J++)Mt[J]={x:0,y:0,z:0};let Wt,Yt=new Array(20);for(J=0;J<20;J++)Yt[J]=new Array(R.length);for(J=0,Et=R.length;J<Et;J++)Yt[0][J]=0;for(J=0,Et=W.length/3;J<Et;J++){let wi=3*J,aa=3*J+1,Yo=3*J+2;for(Wt=!0,tt=0,Dt=Yt[0][W[wi]];tt<Dt;tt++)if(W[aa]==Yt[tt+1][W[wi]]){Wt=!1;break}for(Wt&&(Yt[0][W[wi]]++,Yt[Yt[0][W[wi]]][W[wi]]=W[aa]),Wt=!0,tt=0,Dt=Yt[0][W[wi]];tt<Dt;tt++)if(W[Yo]==Yt[tt+1][W[wi]]){Wt=!1;break}for(Wt&&(Yt[0][W[wi]]++,Yt[Yt[0][W[wi]]][W[wi]]=W[Yo]),Wt=!0,tt=0,Dt=Yt[0][W[aa]];tt<Dt;tt++)if(W[wi]==Yt[tt+1][W[aa]]){Wt=!1;break}for(Wt&&(Yt[0][W[aa]]++,Yt[Yt[0][W[aa]]][W[aa]]=W[wi]),Wt=!0,tt=0,Dt=Yt[0][W[aa]];tt<Dt;tt++)if(W[Yo]==Yt[tt+1][W[aa]]){Wt=!1;break}for(Wt&&(Yt[0][W[aa]]++,Yt[Yt[0][W[aa]]][W[aa]]=W[Yo]),Wt=!0,tt=0;tt<Yt[0][W[Yo]];tt++)if(W[wi]==Yt[tt+1][W[Yo]]){Wt=!1;break}for(Wt&&(Yt[0][W[Yo]]++,Yt[Yt[0][W[Yo]]][W[Yo]]=W[wi]),Wt=!0,tt=0,Dt=Yt[0][W[Yo]];tt<Dt;tt++)if(W[aa]==Yt[tt+1][W[Yo]]){Wt=!1;break}Wt&&(Yt[0][W[Yo]]++,Yt[Yt[0][W[Yo]]][W[Yo]]=W[aa])}let Zo=.5;for(It=0;It<p;It++){for(J=0,Et=R.length;J<Et;J++)if(Yt[0][J]<3)Mt[J].x=R[J].x,Mt[J].y=R[J].y,Mt[J].z=R[J].z;else if(Yt[0][J]==3||Yt[0][J]==4){for(Mt[J].x=0,Mt[J].y=0,Mt[J].z=0,tt=0,Dt=Yt[0][J];tt<Dt;tt++)Mt[J].x+=R[Yt[tt+1][J]].x,Mt[J].y+=R[Yt[tt+1][J]].y,Mt[J].z+=R[Yt[tt+1][J]].z;Mt[J].x+=Zo*R[J].x,Mt[J].y+=Zo*R[J].y,Mt[J].z+=Zo*R[J].z,Mt[J].x/=Zo+Yt[0][J],Mt[J].y/=Zo+Yt[0][J],Mt[J].z/=Zo+Yt[0][J]}else{for(Mt[J].x=0,Mt[J].y=0,Mt[J].z=0,tt=0,Dt=Yt[0][J];tt<Dt;tt++)Mt[J].x+=R[Yt[tt+1][J]].x,Mt[J].y+=R[Yt[tt+1][J]].y,Mt[J].z+=R[Yt[tt+1][J]].z;Mt[J].x+=1*R[J].x,Mt[J].y+=1*R[J].y,Mt[J].z+=1*R[J].z,Mt[J].x/=1+Yt[0][J],Mt[J].y/=1+Yt[0][J],Mt[J].z/=1+Yt[0][J]}for(J=0,Et=R.length;J<Et;J++)R[J].x=Mt[J].x,R[J].y=Mt[J].y,R[J].z=Mt[J].z}}}let Re=new mg;class Kp{constructor(p,R,W){this.data=new Int32Array(p*R*W*3),this.width=R,this.height=W}set(p,R,W,J){let Et=3*((p*this.width+R)*this.height+W);this.data[Et]=J.ix,this.data[Et+1]=J.iy,this.data[Et+2]=J.iz}get(p,R,W){let J=3*((p*this.width+R)*this.height+W);return{ix:this.data[J],iy:this.data[J+1],iz:this.data[J+2]}}}class Fn{constructor(){this.INOUT=1,this.ISDONE=2,this.ISBOUND=4,this.ptranx=0,this.ptrany=0,this.ptranz=0,this.probeRadius=1.4,this.defaultScaleFactor=2,this.scaleFactor=this.defaultScaleFactor,this.pHeight=0,this.pWidth=0,this.pLength=0,this.cutRadius=0,this.vpBits=null,this.vpDistance=null,this.vpAtomID=null,this.pminx=0,this.pminy=0,this.pminz=0,this.pmaxx=0,this.pmaxy=0,this.pmaxz=0,this.depty={},this.widxz={},this.faces=[],this.verts=[],this.vdwRadii={H:1.2,Li:1.82,Na:2.27,K:2.75,C:1.7,N:1.55,O:1.52,F:1.47,P:1.8,S:1.8,CL:1.75,BR:1.85,SE:1.9,ZN:1.39,CU:1.4,NI:1.63,X:2},this.nb=[new Int32Array([1,0,0]),new Int32Array([-1,0,0]),new Int32Array([0,1,0]),new Int32Array([0,-1,0]),new Int32Array([0,0,1]),new Int32Array([0,0,-1]),new Int32Array([1,1,0]),new Int32Array([1,-1,0]),new Int32Array([-1,1,0]),new Int32Array([-1,-1,0]),new Int32Array([1,0,1]),new Int32Array([1,0,-1]),new Int32Array([-1,0,1]),new Int32Array([-1,0,-1]),new Int32Array([0,1,1]),new Int32Array([0,1,-1]),new Int32Array([0,-1,1]),new Int32Array([0,-1,-1]),new Int32Array([1,1,1]),new Int32Array([1,1,-1]),new Int32Array([1,-1,1]),new Int32Array([-1,1,1]),new Int32Array([1,-1,-1]),new Int32Array([-1,-1,1]),new Int32Array([-1,1,-1]),new Int32Array([-1,-1,-1])],Fn.MarchingCube||(Fn.MarchingCube=new mg)}getVDWIndex(p){return p.elem&&this.vdwRadii[p.elem]!==void 0?p.elem:"X"}getFacesAndVertices(p){let R={};for(let Et=0,tt=p.length;Et<tt;Et++)R[p[Et]]=!0;let W=this.verts;for(let Et=0,tt=W.length;Et<tt;Et++)W[Et].x=W[Et].x/this.scaleFactor-this.ptranx,W[Et].y=W[Et].y/this.scaleFactor-this.ptrany,W[Et].z=W[Et].z/this.scaleFactor-this.ptranz;let J=[];for(let Et=0,tt=this.faces.length;Et<tt;Et+=3){let Dt=this.faces[Et],It=this.faces[Et+1],Mt=this.faces[Et+2],Wt=W[Dt].atomid,Yt=W[It].atomid,Zo=W[Mt].atomid,wi=Wt;Yt<wi&&(wi=Yt),Zo<wi&&(wi=Zo),R[wi]&&Dt!==It&&It!==Mt&&Dt!==Mt&&(J.push(Dt),J.push(It),J.push(Mt))}return this.vpBits=null,this.vpDistance=null,this.vpAtomID=null,{vertices:W,faces:J}}initparm(p,R,W){W>1e6&&(this.scaleFactor=this.defaultScaleFactor/2);let J=1/this.scaleFactor*5.5;this.pminx=p[0][0],this.pmaxx=p[1][0],this.pminy=p[0][1],this.pmaxy=p[1][1],this.pminz=p[0][2],this.pmaxz=p[1][2],R?(this.pminx-=this.probeRadius+J,this.pminy-=this.probeRadius+J,this.pminz-=this.probeRadius+J,this.pmaxx+=this.probeRadius+J,this.pmaxy+=this.probeRadius+J,this.pmaxz+=this.probeRadius+J):(this.pminx-=J,this.pminy-=J,this.pminz-=J,this.pmaxx+=J,this.pmaxy+=J,this.pmaxz+=J),this.pminx=Math.floor(this.pminx*this.scaleFactor)/this.scaleFactor,this.pminy=Math.floor(this.pminy*this.scaleFactor)/this.scaleFactor,this.pminz=Math.floor(this.pminz*this.scaleFactor)/this.scaleFactor,this.pmaxx=Math.ceil(this.pmaxx*this.scaleFactor)/this.scaleFactor,this.pmaxy=Math.ceil(this.pmaxy*this.scaleFactor)/this.scaleFactor,this.pmaxz=Math.ceil(this.pmaxz*this.scaleFactor)/this.scaleFactor,this.ptranx=-this.pminx,this.ptrany=-this.pminy,this.ptranz=-this.pminz,this.pLength=Math.ceil(this.scaleFactor*(this.pmaxx-this.pminx))+1,this.pWidth=Math.ceil(this.scaleFactor*(this.pmaxy-this.pminy))+1,this.pHeight=Math.ceil(this.scaleFactor*(this.pmaxz-this.pminz))+1,this.boundingatom(R),this.cutRadius=this.probeRadius*this.scaleFactor,this.vpBits=new Uint8Array(this.pLength*this.pWidth*this.pHeight),this.vpDistance=new Float64Array(this.pLength*this.pWidth*this.pHeight),this.vpAtomID=new Int32Array(this.pLength*this.pWidth*this.pHeight)}boundingatom(p){let R={};for(const W in this.vdwRadii){let J=this.vdwRadii[W];R[W]=p?(J+this.probeRadius)*this.scaleFactor+.5:J*this.scaleFactor+.5;let Et=R[W]*R[W];this.widxz[W]=Math.floor(R[W])+1,this.depty[W]=new Int32Array(this.widxz[W]*this.widxz[W]);let tt=0;for(let Dt=0;Dt<this.widxz[W];Dt++)for(let It=0;It<this.widxz[W];It++){let Mt=Dt*Dt+It*It;if(Mt>Et)this.depty[W][tt]=-1;else{let Wt=Math.sqrt(Et-Mt);this.depty[W][tt]=Math.floor(Wt)}tt++}}}fillvoxels(p,R){for(let W=0,J=this.vpBits.length;W<J;W++)this.vpBits[W]=0,this.vpDistance[W]=-1,this.vpAtomID[W]=-1;for(let W in R){let J=p[R[W]];J!==void 0&&this.fillAtom(J,p)}for(let W=0,J=this.vpBits.length;W<J;W++)this.vpBits[W]&this.INOUT&&(this.vpBits[W]|=this.ISDONE)}fillAtom(p,R){let W=Math.floor(.5+this.scaleFactor*(p.x+this.ptranx)),J=Math.floor(.5+this.scaleFactor*(p.y+this.ptrany)),Et=Math.floor(.5+this.scaleFactor*(p.z+this.ptranz)),tt=this.getVDWIndex(p),Dt=0,It=this.pWidth*this.pHeight;for(let Mt=0,Wt=this.widxz[tt];Mt<Wt;Mt++)for(let Yt=0;Yt<Wt;Yt++){if(this.depty[tt][Dt]!=-1){for(let Zo=-1;Zo<2;Zo++)for(let wi=-1;wi<2;wi++)for(let aa=-1;aa<2;aa++)if(Zo!==0&&wi!==0&&aa!==0){let Yo=Zo*Mt,Ci=aa*Yt;for(let Ip=0;Ip<=this.depty[tt][Dt];Ip++){let $p=Ip*wi,Qp=W+Yo,T0=J+$p,g0=Et+Ci;if(Qp<0||T0<0||g0<0||Qp>=this.pLength||T0>=this.pWidth||g0>=this.pHeight)continue;let U0=Qp*It+T0*this.pHeight+g0;if(this.vpBits[U0]&this.INOUT){let Y0=R[this.vpAtomID[U0]];if(Y0.serial!=p.serial){let Q0=W+Yo-Math.floor(.5+this.scaleFactor*(Y0.x+this.ptranx)),tm=J+$p-Math.floor(.5+this.scaleFactor*(Y0.y+this.ptrany)),G0=Et+Ci-Math.floor(.5+this.scaleFactor*(Y0.z+this.ptranz));Yo*Yo+$p*$p+Ci*Ci<Q0*Q0+tm*tm+G0*G0&&(this.vpAtomID[U0]=p.serial)}}else this.vpBits[U0]|=this.INOUT,this.vpAtomID[U0]=p.serial}}}Dt++}}fillvoxelswaals(p,R){for(let W=0,J=this.vpBits.length;W<J;W++)this.vpBits[W]&=~this.ISDONE;for(let W in R){let J=p[R[W]];J!==void 0&&this.fillAtomWaals(J,p)}}fillAtomWaals(p,R){let W=0,J=Math.floor(.5+this.scaleFactor*(p.x+this.ptranx)),Et=Math.floor(.5+this.scaleFactor*(p.y+this.ptrany)),tt=Math.floor(.5+this.scaleFactor*(p.z+this.ptranz)),Dt=this.getVDWIndex(p),It=this.pWidth*this.pHeight;for(let Mt=0,Wt=this.widxz[Dt];Mt<Wt;Mt++)for(let Yt=0;Yt<Wt;Yt++){if(this.depty[Dt][W]!=-1){for(let Zo=-1;Zo<2;Zo++)for(let wi=-1;wi<2;wi++)for(let aa=-1;aa<2;aa++)if(Zo!==0&&wi!==0&&aa!==0){let Yo=Zo*Mt,Ci=aa*Yt;for(let Ip=0;Ip<=this.depty[Dt][W];Ip++){let $p=Ip*wi,Qp=J+Yo,T0=Et+$p,g0=tt+Ci;if(Qp<0||T0<0||g0<0||Qp>=this.pLength||T0>=this.pWidth||g0>=this.pHeight)continue;let U0=Qp*It+T0*this.pHeight+g0;if(this.vpBits[U0]&this.ISDONE){let Y0=R[this.vpAtomID[U0]];if(Y0.serial!=p.serial){let Q0=J+Yo-Math.floor(.5+this.scaleFactor*(Y0.x+this.ptranx)),tm=Et+$p-Math.floor(.5+this.scaleFactor*(Y0.y+this.ptrany)),G0=tt+Ci-Math.floor(.5+this.scaleFactor*(Y0.z+this.ptranz));Yo*Yo+$p*$p+Ci*Ci<Q0*Q0+tm*tm+G0*G0&&(this.vpAtomID[U0]=p.serial)}}else this.vpBits[U0]|=this.ISDONE,this.vpAtomID[U0]=p.serial}}}W++}}buildboundary(){let p=this.pWidth*this.pHeight;for(let R=0;R<this.pLength;R++)for(let W=0;W<this.pHeight;W++)for(let J=0;J<this.pWidth;J++){let Et=R*p+J*this.pHeight+W;if(this.vpBits[Et]&this.INOUT){let tt=0;for(;tt<26;){let Dt=R+this.nb[tt][0],It=W+this.nb[tt][2],Mt=J+this.nb[tt][1];if(Dt>-1&&Dt<this.pLength&&Mt>-1&&Mt<this.pWidth&&It>-1&&It<this.pHeight&&!(this.vpBits[Dt*p+Mt*this.pHeight+It]&this.INOUT)){this.vpBits[Et]|=this.ISBOUND;break}tt++}}}}fastdistancemap(){let p,R=new Kp(this.pLength,this.pWidth,this.pHeight),W=this.pWidth*this.pHeight,J=this.cutRadius*this.cutRadius,Et=[],tt=[];for(let Mt=0;Mt<this.pLength;Mt++)for(let Wt=0;Wt<this.pWidth;Wt++)for(let Yt=0;Yt<this.pHeight;Yt++)if(p=Mt*W+Wt*this.pHeight+Yt,this.vpBits[p]&=~this.ISDONE,this.vpBits[p]&this.INOUT&&this.vpBits[p]&this.ISBOUND){let Zo={ix:Mt,iy:Wt,iz:Yt};R.set(Mt,Wt,Yt,Zo),Et.push(Zo),this.vpDistance[p]=0,this.vpBits[p]|=this.ISDONE,this.vpBits[p]&=~this.ISBOUND}do{tt=this.fastoneshell(Et,R),Et=[];for(let Mt=0,Wt=tt.length;Mt<Wt;Mt++)p=W*tt[Mt].ix+this.pHeight*tt[Mt].iy+tt[Mt].iz,this.vpBits[p]&=~this.ISBOUND,this.vpDistance[p]<=1.0404*J&&Et.push({ix:tt[Mt].ix,iy:tt[Mt].iy,iz:tt[Mt].iz})}while(Et.length!==0);Et=[],tt=[],R=null;let Dt=this.scaleFactor-.5;Dt<0&&(Dt=0);let It=J-.5/(.1+Dt);for(let Mt=0;Mt<this.pLength;Mt++)for(let Wt=0;Wt<this.pWidth;Wt++)for(let Yt=0;Yt<this.pHeight;Yt++)p=Mt*W+Wt*this.pHeight+Yt,this.vpBits[p]&=~this.ISBOUND,this.vpBits[p]&this.INOUT&&(this.vpBits[p]&this.ISDONE&&!(this.vpBits[p]&this.ISDONE&&this.vpDistance[p]>=It)||(this.vpBits[p]|=this.ISBOUND))}fastoneshell(p,R){let W,J,Et,tt,Dt,It,Mt,Wt,Yt,Zo=[];if(p.length===0)return Zo;let wi={ix:-1,iy:-1,iz:-1},aa=this.pWidth*this.pHeight;for(let Yo=0,Ci=p.length;Yo<Ci;Yo++){W=p[Yo].ix,J=p[Yo].iy,Et=p[Yo].iz,Wt=R.get(W,J,Et);for(let Ip=0;Ip<6;Ip++)wi.ix=W+this.nb[Ip][0],wi.iy=J+this.nb[Ip][1],wi.iz=Et+this.nb[Ip][2],wi.ix<this.pLength&&wi.ix>-1&&wi.iy<this.pWidth&&wi.iy>-1&&wi.iz<this.pHeight&&wi.iz>-1&&(Yt=wi.ix*aa+this.pHeight*wi.iy+wi.iz,this.vpBits[Yt]&this.INOUT&&!(this.vpBits[Yt]&this.ISDONE)?(R.set(wi.ix,wi.iy,Et+this.nb[Ip][2],Wt),tt=wi.ix-Wt.ix,Dt=wi.iy-Wt.iy,It=wi.iz-Wt.iz,Mt=tt*tt+Dt*Dt+It*It,this.vpDistance[Yt]=Mt,this.vpBits[Yt]|=this.ISDONE,this.vpBits[Yt]|=this.ISBOUND,Zo.push({ix:wi.ix,iy:wi.iy,iz:wi.iz})):this.vpBits[Yt]&this.INOUT&&this.vpBits[Yt]&this.ISDONE&&(tt=wi.ix-Wt.ix,Dt=wi.iy-Wt.iy,It=wi.iz-Wt.iz,Mt=tt*tt+Dt*Dt+It*It,Mt<this.vpDistance[Yt]&&(R.set(wi.ix,wi.iy,wi.iz,Wt),this.vpDistance[Yt]=Mt,this.vpBits[Yt]&this.ISBOUND||(this.vpBits[Yt]|=this.ISBOUND,Zo.push({ix:wi.ix,iy:wi.iy,iz:wi.iz})))))}for(let Yo=0,Ci=p.length;Yo<Ci;Yo++){W=p[Yo].ix,J=p[Yo].iy,Et=p[Yo].iz,Wt=R.get(W,J,Et);for(let Ip=6;Ip<18;Ip++)wi.ix=W+this.nb[Ip][0],wi.iy=J+this.nb[Ip][1],wi.iz=Et+this.nb[Ip][2],wi.ix<this.pLength&&wi.ix>-1&&wi.iy<this.pWidth&&wi.iy>-1&&wi.iz<this.pHeight&&wi.iz>-1&&(Yt=wi.ix*aa+this.pHeight*wi.iy+wi.iz,this.vpBits[Yt]&this.INOUT&&!(this.vpBits[Yt]&this.ISDONE)?(R.set(wi.ix,wi.iy,Et+this.nb[Ip][2],Wt),tt=wi.ix-Wt.ix,Dt=wi.iy-Wt.iy,It=wi.iz-Wt.iz,Mt=tt*tt+Dt*Dt+It*It,this.vpDistance[Yt]=Mt,this.vpBits[Yt]|=this.ISDONE,this.vpBits[Yt]|=this.ISBOUND,Zo.push({ix:wi.ix,iy:wi.iy,iz:wi.iz})):this.vpBits[Yt]&this.INOUT&&this.vpBits[Yt]&this.ISDONE&&(tt=wi.ix-Wt.ix,Dt=wi.iy-Wt.iy,It=wi.iz-Wt.iz,Mt=tt*tt+Dt*Dt+It*It,Mt<this.vpDistance[Yt]&&(R.set(wi.ix,wi.iy,wi.iz,Wt),this.vpDistance[Yt]=Mt,this.vpBits[Yt]&this.ISBOUND||(this.vpBits[Yt]|=this.ISBOUND,Zo.push({ix:wi.ix,iy:wi.iy,iz:wi.iz})))))}for(let Yo=0,Ci=p.length;Yo<Ci;Yo++){W=p[Yo].ix,J=p[Yo].iy,Et=p[Yo].iz,Wt=R.get(W,J,Et);for(let Ip=18;Ip<26;Ip++)wi.ix=W+this.nb[Ip][0],wi.iy=J+this.nb[Ip][1],wi.iz=Et+this.nb[Ip][2],wi.ix<this.pLength&&wi.ix>-1&&wi.iy<this.pWidth&&wi.iy>-1&&wi.iz<this.pHeight&&wi.iz>-1&&(Yt=wi.ix*aa+this.pHeight*wi.iy+wi.iz,this.vpBits[Yt]&this.INOUT&&!(this.vpBits[Yt]&this.ISDONE)?(R.set(wi.ix,wi.iy,Et+this.nb[Ip][2],Wt),tt=wi.ix-Wt.ix,Dt=wi.iy-Wt.iy,It=wi.iz-Wt.iz,Mt=tt*tt+Dt*Dt+It*It,this.vpDistance[Yt]=Mt,this.vpBits[Yt]|=this.ISDONE,this.vpBits[Yt]|=this.ISBOUND,Zo.push({ix:wi.ix,iy:wi.iy,iz:wi.iz})):this.vpBits[Yt]&this.INOUT&&this.vpBits[Yt]&this.ISDONE&&(tt=wi.ix-Wt.ix,Dt=wi.iy-Wt.iy,It=wi.iz-Wt.iz,Mt=tt*tt+Dt*Dt+It*It,Mt<this.vpDistance[Yt]&&(R.set(wi.ix,wi.iy,wi.iz,Wt),this.vpDistance[Yt]=Mt,this.vpBits[Yt]&this.ISBOUND||(this.vpBits[Yt]|=this.ISBOUND,Zo.push({ix:wi.ix,iy:wi.iy,iz:wi.iz})))))}return Zo}marchingcubeinit(p){for(let R=0,W=this.vpBits.length;R<W;R++)p==1?this.vpBits[R]&=~this.ISBOUND:p==4?(this.vpBits[R]&=~this.ISDONE,this.vpBits[R]&this.ISBOUND&&(this.vpBits[R]|=this.ISDONE),this.vpBits[R]&=~this.ISBOUND):p==2?this.vpBits[R]&this.ISBOUND&&this.vpBits[R]&this.ISDONE?this.vpBits[R]&=~this.ISBOUND:this.vpBits[R]&this.ISBOUND&&!(this.vpBits[R]&this.ISDONE)&&(this.vpBits[R]|=this.ISDONE):p==3&&(this.vpBits[R]&=~this.ISBOUND)}marchingcube(p){this.marchingcubeinit(p),this.verts=[],this.faces=[],Fn.MarchingCube.march(this.vpBits,this.verts,this.faces,{smooth:1,nX:this.pLength,nY:this.pWidth,nZ:this.pHeight});let R=this.pWidth*this.pHeight;for(let W=0,J=this.verts.length;W<J;W++)this.verts[W].atomid=this.vpAtomID[this.verts[W].x*R+this.pHeight*this.verts[W].y+this.verts[W].z];Fn.MarchingCube.laplacianSmooth(1,this.verts,this.faces)}}Fn.MarchingCube=new mg;var t0=t(848);class s0{static finalizeGeo(p){var R=p.updateGeoGroup(0);R.vertices>0&&R.truncateArrayBuffers(!0,!0)}static updateColor(p,R){var W,J,Et;R=R||b.CC.color(R),p.colorsNeedUpdate=!0,R.constructor!==Array&&(W=R.r,J=R.g,Et=R.b);for(let tt in p.geometryGroups){let Dt=p.geometryGroups[tt],It=Dt.colorArray;for(let Mt=0,Wt=Dt.vertices;Mt<Wt;++Mt){if(R.constructor===Array){let Yt=R[Mt];W=Yt.r,J=Yt.g,Et=Yt.b}It[3*Mt]=W,It[3*Mt+1]=J,It[3*Mt+2]=Et}}}static drawArrow(p,R,W){var J=W.start,Et=W.end,tt=W.radius,Dt=W.radiusRatio,It=W.mid,Mt=W.midpos;if(!J||!Et)return;var Wt=R.updateGeoGroup(51),Yt=new m.Vector3(Et.x,Et.y,Et.z).sub(J);if(Mt){let my=Yt.length();It=Mt>0?Mt/my:(my+Mt)/my}Yt.multiplyScalar(It);var Zo=new m.Vector3(J.x,J.y,J.z).add(Yt),wi=Yt.clone().negate();let aa=new m.Vector3(J.x,J.y,J.z);p.intersectionShape.cylinder.push(new f.Cylinder(aa,Zo.clone(),tt)),p.intersectionShape.sphere.push(new f.Sphere(aa,tt));var Yo=[];Yo[0]=Yt.clone(),Math.abs(Yo[0].x)>1e-4?Yo[0].y+=1:Yo[0].x+=1,Yo[0].cross(Yt),Yo[0].normalize(),Yo[4]=Yo[0].clone(),Yo[4].crossVectors(Yo[0],Yt),Yo[4].normalize(),Yo[8]=Yo[0].clone().negate(),Yo[12]=Yo[4].clone().negate(),Yo[2]=Yo[0].clone().add(Yo[4]).normalize(),Yo[6]=Yo[4].clone().add(Yo[8]).normalize(),Yo[10]=Yo[8].clone().add(Yo[12]).normalize(),Yo[14]=Yo[12].clone().add(Yo[0]).normalize(),Yo[1]=Yo[0].clone().add(Yo[2]).normalize(),Yo[3]=Yo[2].clone().add(Yo[4]).normalize(),Yo[5]=Yo[4].clone().add(Yo[6]).normalize(),Yo[7]=Yo[6].clone().add(Yo[8]).normalize(),Yo[9]=Yo[8].clone().add(Yo[10]).normalize(),Yo[11]=Yo[10].clone().add(Yo[12]).normalize(),Yo[13]=Yo[12].clone().add(Yo[14]).normalize(),Yo[15]=Yo[14].clone().add(Yo[0]).normalize();var Ci,Ip,$p,Qp,T0,g0,U0,Y0,Q0,tm,G0,Pm,km,i1,Qm,_1,C1,a1,I1,Fm,Km,W1,s1=Wt.vertices,H1=Wt.vertexArray,q1=Wt.faceArray,u1=Wt.normalArray,eg=Wt.lineArray;for(Ip=0,$p=Yo.length;Ip<$p;++Ip){Ci=3*(s1+3*Ip);var kg=Yo[Ip].clone().multiplyScalar(tt).add(J),J1=Yo[Ip].clone().multiplyScalar(tt).add(Zo),b1=Yo[Ip].clone().multiplyScalar(tt*Dt).add(Zo);if(H1[Ci]=kg.x,H1[Ci+1]=kg.y,H1[Ci+2]=kg.z,H1[Ci+3]=J1.x,H1[Ci+4]=J1.y,H1[Ci+5]=J1.z,H1[Ci+6]=b1.x,H1[Ci+7]=b1.y,H1[Ci+8]=b1.z,Ip>0){var Ug=H1[Ci-3],gg=H1[Ci-2],Pg=H1[Ci-1],vg=new m.Vector3(Ug,gg,Pg),jg=new m.Vector3(Et.x,Et.y,Et.z),mv=Zo.clone(),Fv=new m.Vector3(b1.x,b1.y,b1.z);p.intersectionShape.triangle.push(new f.Triangle(Fv,jg,vg)),p.intersectionShape.triangle.push(new f.Triangle(vg.clone(),mv,Fv.clone()))}}Wt.vertices+=48,H1[Ci=3*Wt.vertices]=J.x,H1[Ci+1]=J.y,H1[Ci+2]=J.z,H1[Ci+3]=Zo.x,H1[Ci+4]=Zo.y,H1[Ci+5]=Zo.z,H1[Ci+6]=Et.x,H1[Ci+7]=Et.y,H1[Ci+8]=Et.z,Wt.vertices+=3;var Pv=Wt.vertices-3,fy=Wt.vertices-2,ty=Wt.vertices-1,wv=3*Pv,py=3*fy,Zv=3*ty;for(Ip=0,$p=Yo.length-1;Ip<$p;++Ip){var ry=s1+3*Ip;Ci=3*ry,T0=Wt.faceidx,g0=Wt.lineidx,km=3*(U0=ry),i1=3*(Y0=ry+1),Qm=3*(Q0=ry+2),_1=3*(tm=ry+4),C1=3*(G0=ry+5),a1=3*(Pm=ry+3),I1=Fm=Yo[Ip],Km=W1=Yo[Ip+1],u1[km]=I1.x,u1[i1]=Fm.x,u1[a1]=W1.x,u1[km+1]=I1.y,u1[i1+1]=Fm.y,u1[a1+1]=W1.y,u1[km+2]=I1.z,u1[i1+2]=Fm.z,u1[a1+2]=W1.z,u1[i1]=Fm.x,u1[_1]=Km.x,u1[a1]=W1.x,u1[i1+1]=Fm.y,u1[_1+1]=Km.y,u1[a1+1]=W1.y,u1[i1+2]=Fm.z,u1[_1+2]=Km.z,u1[a1+2]=W1.z,u1[Qm]=Fm.x,u1[C1]=Km.x,u1[Qm+1]=Fm.y,u1[C1+1]=Km.y,u1[Qm+2]=Fm.z,u1[C1+2]=Km.z,q1[T0]=U0,q1[T0+1]=Y0,q1[T0+2]=Pm,q1[T0+3]=Y0,q1[T0+4]=tm,q1[T0+5]=Pm,q1[T0+6]=U0,q1[T0+7]=Pm,q1[T0+8]=Pv,q1[T0+9]=Q0,q1[T0+10]=fy,q1[T0+11]=G0,q1[T0+12]=Q0,q1[T0+13]=ty,q1[T0+14]=G0,eg[g0]=U0,eg[g0+1]=Y0,eg[g0+2]=U0,eg[g0+3]=Pm,eg[g0+4]=tm,eg[g0+5]=Pm,eg[g0+6]=U0,eg[g0+7]=Pm,eg[g0+8]=Q0,eg[g0+9]=Y0,eg[g0+10]=Q0,eg[g0+11]=G0,eg[g0+12]=tm,eg[g0+13]=G0,eg[g0+14]=Q0,eg[g0+15]=ty,eg[g0+16]=Q0,eg[g0+17]=G0,eg[g0+18]=ty,eg[g0+19]=G0,Wt.faceidx+=15,Wt.lineidx+=20}Qp=[s1+45,s1+46,s1+1,s1,s1+47,s1+2],T0=Wt.faceidx,g0=Wt.lineidx,km=3*(U0=Qp[0]),i1=3*(Y0=Qp[1]),Qm=3*(Q0=Qp[4]),_1=3*(tm=Qp[2]),C1=3*(G0=Qp[5]),a1=3*(Pm=Qp[3]),I1=Fm=Yo[15],Km=W1=Yo[0],u1[km]=I1.x,u1[i1]=Fm.x,u1[a1]=W1.x,u1[km+1]=I1.y,u1[i1+1]=Fm.y,u1[a1+1]=W1.y,u1[km+2]=I1.z,u1[i1+2]=Fm.z,u1[a1+2]=W1.z,u1[i1]=Fm.x,u1[_1]=Km.x,u1[a1]=W1.x,u1[i1+1]=Fm.y,u1[_1+1]=Km.y,u1[a1+1]=W1.y,u1[i1+2]=Fm.z,u1[_1+2]=Km.z,u1[a1+2]=W1.z,u1[Qm]=Fm.x,u1[C1]=Km.x,u1[Qm+1]=Fm.y,u1[C1+1]=Km.y,u1[Qm+2]=Fm.z,u1[C1+2]=Km.z,Yt.normalize(),wi.normalize(),u1[wv]=wi.x,u1[py]=u1[Zv]=Yt.x,u1[wv+1]=wi.y,u1[py+1]=u1[Zv+1]=Yt.y,u1[wv+2]=wi.z,u1[py+2]=u1[Zv+2]=Yt.z,q1[T0]=U0,q1[T0+1]=Y0,q1[T0+2]=Pm,q1[T0+3]=Y0,q1[T0+4]=tm,q1[T0+5]=Pm,q1[T0+6]=U0,q1[T0+7]=Pm,q1[T0+8]=Pv,q1[T0+9]=Q0,q1[T0+10]=fy,q1[T0+11]=G0,q1[T0+12]=Q0,q1[T0+13]=ty,q1[T0+14]=G0,eg[g0]=U0,eg[g0+1]=Y0,eg[g0+2]=U0,eg[g0+3]=Pm,eg[g0+4]=tm,eg[g0+5]=Pm,eg[g0+6]=U0,eg[g0+7]=Pm,eg[g0+8]=Q0,eg[g0+9]=Y0,eg[g0+10]=Q0,eg[g0+11]=G0,eg[g0+12]=tm,eg[g0+13]=G0,eg[g0+14]=Q0,eg[g0+15]=ty,eg[g0+16]=Q0,eg[g0+17]=G0,eg[g0+18]=ty,eg[g0+19]=G0,Wt.faceidx+=15,Wt.lineidx+=20}static updateBoundingFromPoints(p,R,W,J){p.center.set(0,0,0);let Et=1/0,tt=1/0,Dt=1/0,It=-1/0,Mt=-1/0,Wt=-1/0;p.box&&(Et=p.box.min.x,It=p.box.max.x,tt=p.box.min.y,Mt=p.box.max.y,Dt=p.box.min.z,Wt=p.box.max.z);for(let aa=0,Yo=J;aa<Yo;aa++){var Yt=W[3*aa],Zo=W[3*aa+1],wi=W[3*aa+2];Yt<Et&&(Et=Yt),Zo<tt&&(tt=Zo),wi<Dt&&(Dt=wi),Yt>It&&(It=Yt),Zo>Mt&&(Mt=Zo),wi>Wt&&(Wt=wi)}p.center.set((It+Et)/2,(Mt+tt)/2,(Wt+Dt)/2),p.radius=p.center.distanceTo({x:It,y:Mt,z:Wt}),p.box={min:{x:Et,y:tt,z:Dt},max:{x:It,y:Mt,z:Wt}}}static addCustomGeo(p,R,W,J,Et){var tt,Dt,It,Mt,Wt,Yt,Zo,wi,aa,Yo=R.addGeoGroup(),Ci=W.vertexArr,Ip=W.normalArr,$p=W.faceArr;Yo.vertices=Ci.length,Yo.faceidx=$p.length;var Qp=Yo.vertexArray,T0=Yo.colorArray;for(J.constructor!==Array&&(wi=J.r,aa=J.g,Mt=J.b),Yt=0,Zo=Yo.vertices;Yt<Zo;++Yt)tt=3*Yt,Dt=Ci[Yt],Qp[tt]=Dt.x,Qp[tt+1]=Dt.y,Qp[tt+2]=Dt.z,J.constructor===Array&&(wi=(Wt=J[Yt]).r,aa=Wt.g,Mt=Wt.b),T0[tt]=wi,T0[tt+1]=aa,T0[tt+2]=Mt;if(Et)for(Yt=0,Zo=Yo.faceidx/3;Yt<Zo;++Yt){It=$p[tt=3*Yt],Mt=$p[tt+1],Wt=$p[tt+2];var g0=new m.Vector3,U0=new m.Vector3,Y0=new m.Vector3;p.intersectionShape.triangle.push(new f.Triangle(g0.copy(Ci[It]),U0.copy(Ci[Mt]),Y0.copy(Ci[Wt])))}if(Et){var Q0=new m.Vector3(0,0,0),tm=0;for(let km=0;km<R.geometryGroups.length;km++)Q0.add(R.geometryGroups[km].getCentroid()),tm++;Q0.divideScalar(tm),s0.updateBoundingFromPoints(p.boundingSphere,{centroid:Q0},Qp,Yo.vertices)}if(Yo.faceArray=new Uint16Array($p),Yo.truncateArrayBuffers(!0,!0),Ip.length<Yo.vertices)Yo.setNormals();else{var G0,Pm=Yo.normalArray=new Float32Array(3*Yo.vertices);for(Yt=0,Zo=Yo.vertices;Yt<Zo;++Yt)tt=3*Yt,G0=Ip[Yt],Pm[tt]=G0.x,Pm[tt+1]=G0.y,Pm[tt+2]=G0.z}Yo.setLineIndices(),Yo.lineidx=Yo.lineArray.length}static updateFromStyle(p,R){R.color!==void 0?(p.color=R.color||new b.Color,R.color instanceof b.Color||(p.color=b.CC.color(R.color))):p.color=b.CC.color(0),p.wireframe=!!R.wireframe,p.opacity=R.alpha?(0,m.clamp)(R.alpha,0,1):1,R.opacity!==void 0&&(p.opacity=(0,m.clamp)(R.opacity,0,1)),p.side=R.side!==void 0?R.side:s.DoubleSide,p.linewidth=R.linewidth===void 0?1:R.linewidth,p.clickable=!!R.clickable,p.callback=(0,M.makeFunction)(R.callback),p.hoverable=!!R.hoverable,p.hover_callback=(0,M.makeFunction)(R.hover_callback),p.unhover_callback=(0,M.makeFunction)(R.unhover_callback),p.contextMenuEnabled=!!R.contextMenuEnabled,p.hidden=R.hidden,p.frame=R.frame}constructor(p){this.color=16777215,this.hidden=!1,this.wireframe=!1,this.opacity=1,this.linewidth=1,this.clickable=!1,this.hoverable=!1,this.contextMenuEnabled=!1,this.side=s.DoubleSide,this.stylespec=p||{},this.boundingSphere=new f.Sphere,this.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},s0.updateFromStyle(this,this.stylespec),this.components=[],this.shapeObj=null,this.renderedShapeObj=null,this.geo=new s.Geometry(!0),this.linegeo=new s.Geometry(!0)}updateStyle(p){for(var R in p)this.stylespec[R]=p[R];if(s0.updateFromStyle(this,this.stylespec),p.voldata&&p.volscheme){(0,M.adjustVolumeStyle)(p);const W=p.volscheme,J=p.voldata,Et=b.CC,tt=W.range()||[-1,1];this.geo.setColors(function(Dt,It,Mt){let Wt=J.getVal(Dt,It,Mt);return Et.color(W.valueToHex(Wt,tt))}),delete this.color}}addCustom(p){p.vertexArr=p.vertexArr||[],p.faceArr=p.faceArr||[],p.normalArr=p.normalArr||[],s0.drawCustom(this,this.geo,p)}addSphere(p){p.center||(p.center=new m.Vector3(0,0,0)),p.radius=p.radius?(0,m.clamp)(p.radius,0,1/0):1.5,p.color=b.CC.color(p.color),this.intersectionShape.sphere.push(new f.Sphere(p.center,p.radius)),o.drawSphere(this.geo,p.center,p.radius,p.color,p.quality),this.components.push({centroid:new m.Vector3(p.center.x,p.center.y,p.center.z)});var R=this.geo.updateGeoGroup(0);s0.updateBoundingFromPoints(this.boundingSphere,this.components,R.vertexArray,R.vertices)}addBox(p){var R,W,J,Et=p.dimensions||{w:1,h:1,d:1};R=typeof Et.w=="number"?{x:Et.w,y:0,z:0}:Et.w,W=typeof Et.h=="number"?{x:0,y:Et.h,z:0}:Et.h,J=typeof Et.d=="number"?{x:0,y:0,z:Et.d}:Et.d;var tt=p.corner;tt==null&&(tt=p.center!==void 0?{x:p.center.x-.5*(R.x+W.x+J.x),y:p.center.y-.5*(R.y+W.y+J.y),z:p.center.z-.5*(R.z+W.z+J.z)}:{x:0,y:0,z:0});var Dt=[{x:tt.x,y:tt.y,z:tt.z},{x:tt.x+R.x,y:tt.y+R.y,z:tt.z+R.z},{x:tt.x+W.x,y:tt.y+W.y,z:tt.z+W.z},{x:tt.x+R.x+W.x,y:tt.y+R.y+W.y,z:tt.z+R.z+W.z},{x:tt.x+J.x,y:tt.y+J.y,z:tt.z+J.z},{x:tt.x+R.x+J.x,y:tt.y+R.y+J.y,z:tt.z+R.z+J.z},{x:tt.x+W.x+J.x,y:tt.y+W.y+J.y,z:tt.z+W.z+J.z},{x:tt.x+R.x+W.x+J.x,y:tt.y+R.y+W.y+J.y,z:tt.z+R.z+W.z+J.z}],It=[],Mt=[];It.splice(It.length,0,Dt[0],Dt[1],Dt[2],Dt[3]),Mt.splice(Mt.length,0,0,2,1,1,2,3);var Wt=4;It.splice(It.length,0,Dt[2],Dt[3],Dt[6],Dt[7]),Mt.splice(Mt.length,0,Wt+0,Wt+2,Wt+1,Wt+1,Wt+2,Wt+3),Wt+=4,It.splice(It.length,0,Dt[4],Dt[5],Dt[0],Dt[1]),Mt.splice(Mt.length,0,Wt+0,Wt+2,Wt+1,Wt+1,Wt+2,Wt+3),Wt+=4,It.splice(It.length,0,Dt[6],Dt[7],Dt[4],Dt[5]),Mt.splice(Mt.length,0,Wt+0,Wt+2,Wt+1,Wt+1,Wt+2,Wt+3),Wt+=4,It.splice(It.length,0,Dt[3],Dt[1],Dt[7],Dt[5]),Mt.splice(Mt.length,0,Wt+0,Wt+2,Wt+1,Wt+1,Wt+2,Wt+3),Wt+=4,It.splice(It.length,0,Dt[2],Dt[6],Dt[0],Dt[4]),Mt.splice(Mt.length,0,Wt+0,Wt+2,Wt+1,Wt+1,Wt+2,Wt+3),Wt+=4;var Yt=(0,M.extend)({},p);Yt.vertexArr=It,Yt.faceArr=Mt,Yt.normalArr=[],s0.drawCustom(this,this.geo,Yt);var Zo=new m.Vector3;this.components.push({centroid:Zo.addVectors(Dt[0],Dt[7]).multiplyScalar(.5)});var wi=this.geo.updateGeoGroup(0);s0.updateBoundingFromPoints(this.boundingSphere,this.components,wi.vertexArray,wi.vertices)}addCylinder(p){var R,W;R=p.start?new m.Vector3(p.start.x||0,p.start.y||0,p.start.z||0):new m.Vector3(0,0,0),p.end?(W=new m.Vector3(p.end.x,p.end.y||0,p.end.z||0)).x===void 0&&(W.x=3):W=new m.Vector3(0,0,0);var J=p.radius||.1,Et=b.CC.color(p.color);this.intersectionShape.cylinder.push(new f.Cylinder(R,W,J)),o.drawCylinder(this.geo,R,W,J,Et,p.fromCap,p.toCap);var tt=new m.Vector3;this.components.push({centroid:tt.addVectors(R,W).multiplyScalar(.5)});var Dt=this.geo.updateGeoGroup(0);s0.updateBoundingFromPoints(this.boundingSphere,this.components,Dt.vertexArray,Dt.vertices)}addDashedCylinder(p){var R,W;p.dashLength=p.dashLength||.25,p.gapLength=p.gapLength||.25,R=p.start?new m.Vector3(p.start.x||0,p.start.y||0,p.start.z||0):new m.Vector3(0,0,0),p.end?(W=new m.Vector3(p.end.x,p.end.y||0,p.end.z||0)).x===void 0&&(W.x=3):W=new m.Vector3(3,0,0);for(var J=p.radius||.1,Et=b.CC.color(p.color),tt=Math.sqrt(Math.pow(R.x-W.x,2)+Math.pow(R.y-W.y,2)+Math.pow(R.z-W.z,2)),Dt=tt/(p.gapLength+p.dashLength),It=new m.Vector3(p.start.x||0,p.start.y||0,p.start.z||0),Mt=new m.Vector3(p.end.x,p.end.y||0,p.end.z||0),Wt=new m.Vector3((W.x-R.x)/(tt/p.gapLength),(W.y-R.y)/(tt/p.gapLength),(W.z-R.z)/(tt/p.gapLength)),Yt=new m.Vector3((W.x-R.x)/(tt/p.dashLength),(W.y-R.y)/(tt/p.dashLength),(W.z-R.z)/(tt/p.dashLength)),Zo=0;Zo<Dt;Zo++)Mt=new m.Vector3(It.x+Yt.x,It.y+Yt.y,It.z+Yt.z),this.intersectionShape.cylinder.push(new f.Cylinder(It,Mt,J)),o.drawCylinder(this.geo,It,Mt,J,Et,p.fromCap,p.toCap),It=new m.Vector3(Mt.x+Wt.x,Mt.y+Wt.y,Mt.z+Wt.z);var wi=new m.Vector3;this.components.push({centroid:wi.addVectors(R,W).multiplyScalar(.5)});var aa=this.geo.updateGeoGroup(0);s0.updateBoundingFromPoints(this.boundingSphere,this.components,aa.vertexArray,aa.vertices)}addCurve(p){p.points=p.points||[],p.smooth=p.smooth||10,p.fromCap===void 0&&(p.fromCap=2),p.toCap===void 0&&(p.toCap=2);var R=I(p.points,p.smooth);if(R.length<3)console.log("Too few points in addCurve");else{var W=p.radius||.1,J=b.CC.color(p.color),Et=0,tt=R.length-1,Dt=R[0].distanceTo(R[1]),It=Math.ceil(2*W/Dt);if(p.toArrow){let Zo={start:R[tt-=It],end:R[R.length-1],radius:W,color:J,mid:1e-4};this.addArrow(Zo)}if(p.fromArrow){let Zo={start:R[Et+=It],end:R[0],radius:W,color:J,mid:1e-4};this.addArrow(Zo)}for(var Mt=Math.ceil(R.length/2),Wt={radius:W,color:J,fromCap:2,toCap:2},Yt=Et;Yt<tt;Yt++)Wt.start=R[Yt],Wt.end=R[Yt+1],Wt.fromCap=2,Wt.toCap=2,Yt<Mt?(Wt.fromCap=2,Wt.toCap=0):Yt>Mt?(Wt.fromCap=0,Wt.toCap=2):(Wt.fromCap=2,Wt.toCap=2),this.addCylinder(Wt)}}addLine(p){var R,W;R=p.start?new m.Vector3(p.start.x||0,p.start.y||0,p.start.z||0):new m.Vector3(0,0,0),p.end?(W=new m.Vector3(p.end.x,p.end.y||0,p.end.z||0)).x===void 0&&(W.x=3):W=new m.Vector3(3,0,0);var J=this.geo.updateGeoGroup(2),Et=J.vertices,tt=3*Et,Dt=J.vertexArray;Dt[tt]=R.x,Dt[tt+1]=R.y,Dt[tt+2]=R.z,Dt[tt+3]=W.x,Dt[tt+4]=W.y,Dt[tt+5]=W.z,J.vertices+=2;var It=J.lineArray,Mt=J.lineidx;It[Mt]=Et,It[Mt+1]=Et+1,J.lineidx+=2;var Wt=new m.Vector3;this.components.push({centroid:Wt.addVectors(R,W).multiplyScalar(.5)}),J=this.geo.updateGeoGroup(0),s0.updateBoundingFromPoints(this.boundingSphere,this.components,J.vertexArray,J.vertices)}addArrow(p){if(p.start?p.start=new m.Vector3(p.start.x||0,p.start.y||0,p.start.z||0):p.start=new m.Vector3(0,0,0),p.dir instanceof m.Vector3&&typeof p.length=="number"){var R=p.dir.clone().multiplyScalar(p.length).add(p.start);p.end=R}else p.end?(p.end=new m.Vector3(p.end.x,p.end.y||0,p.end.z||0),p.end.x===void 0&&(p.end.x=3)):p.end=new m.Vector3(3,0,0);p.radius=p.radius||.1,p.radiusRatio=p.radiusRatio||1.618034,p.mid=0<p.mid&&p.mid<1?p.mid:.618034,s0.drawArrow(this,this.geo,p);var W=new m.Vector3;this.components.push({centroid:W.addVectors(p.start,p.end).multiplyScalar(.5)});var J=this.geo.updateGeoGroup(0);s0.updateBoundingFromPoints(this.boundingSphere,this.components,J.vertexArray,J.vertices)}static distance_from(p,R){return Math.sqrt(Math.pow(p.x-R.x,2)+Math.pow(p.y-R.y,2)+Math.pow(p.z-R.z,2))}static inSelectedRegion(p,R,W){for(var J=0;J<R.length;J++)if(s0.distance_from(R[J],p)<=W)return!0;return!1}addIsosurface(p,R,W,J){var Et,tt,Dt=R.isoval!==void 0&&typeof R.isoval=="number"?R.isoval:0,It=!!R.voxel,Mt=R.smoothness===void 0?1:R.smoothness,Wt=p.size.x,Yt=p.size.y,Zo=p.size.z,wi=new Int16Array(Wt*Yt*Zo),aa=p.data;for(Et=0,tt=wi.length;Et<tt;++Et)wi[Et]=-1;var Yo=new Uint8Array(Wt*Yt*Zo);for(Et=0,tt=aa.length;Et<tt;++Et)(Dt>=0?aa[Et]-Dt:Dt-aa[Et])>0&&(Yo[Et]|=s0.ISDONE);var Ci=[],Ip=[];Re.march(Yo,Ci,Ip,{fulltable:!0,voxel:It,unitCube:p.unit,origin:p.origin,matrix:p.matrix,nX:Wt,nY:Yt,nZ:Zo}),!It&&Mt>0&&Re.laplacianSmooth(Mt,Ci,Ip);var $p=[],Qp=[],T0=[];if(R.selectedRegion&&R.coords===void 0&&(R.coords=R.selectedRegion),R.coords===void 0&&R.selection!==void 0&&(J?R.coords=J.selectedAtoms(R.selection):console.log("addIsosurface needs viewer is selection provided.")),R.coords!==void 0){var g0=R.coords[0].x,U0=R.coords[0].y,Y0=R.coords[0].z,Q0=R.coords[0].x,tm=R.coords[0].y,G0=R.coords[0].z;for(let Fm=0;Fm<R.coords.length;Fm++)R.coords[Fm].x>g0?g0=R.coords[Fm].x:R.coords[Fm].x<Q0&&(Q0=R.coords[Fm].x),R.coords[Fm].y>U0?U0=R.coords[Fm].y:R.coords[Fm].y<tm&&(tm=R.coords[Fm].y),R.coords[Fm].z>Y0?Y0=R.coords[Fm].z:R.coords[Fm].z<G0&&(G0=R.coords[Fm].z);var Pm=2;R.radius!==void 0&&(Pm=R.radius),R.selectedOffset!==void 0&&(Pm=R.selectedOffset),R.seldist!==void 0&&(Pm=R.seldist),Q0-=Pm,g0+=Pm,tm-=Pm,U0+=Pm,G0-=Pm,Y0+=Pm;for(let Fm=0;Fm<Ci.length;Fm++)Ci[Fm].x>Q0&&Ci[Fm].x<g0&&Ci[Fm].y>tm&&Ci[Fm].y<U0&&Ci[Fm].z>G0&&Ci[Fm].z<Y0&&s0.inSelectedRegion(Ci[Fm],R.coords,Pm)?($p.push(Qp.length),Qp.push(Ci[Fm])):$p.push(-1);for(let Fm=0;Fm+2<Ip.length;Fm+=3)$p[Ip[Fm]]!==-1&&$p[Ip[Fm+1]]!==-1&&$p[Ip[Fm+2]]!==-1&&(T0.push(Ip[Fm]-(Ip[Fm]-$p[Ip[Fm]])),T0.push(Ip[Fm+1]-(Ip[Fm+1]-$p[Ip[Fm+1]])),T0.push(Ip[Fm+2]-(Ip[Fm+2]-$p[Ip[Fm+2]])));Ci=Qp,Ip=T0}s0.drawCustom(this,this.geo,{vertexArr:Ci,faceArr:Ip,normalArr:[],clickable:R.clickable,hoverable:R.hoverable}),this.updateStyle(R);var km=new m.Vector3(p.origin.x,p.origin.y,p.origin.z),i1=new m.Vector3(p.size.x*p.unit.x,p.size.y*p.unit.y,p.size.z*p.unit.z),Qm=new m.Vector3(0,0,0),_1=km.clone(),C1=km.clone().add(i1);for(let Fm=0;Fm<Ci.length;Fm++)Qm.add(Ci[Fm]),_1.max(Ci[Fm]),C1.min(Ci[Fm]);Qm.divideScalar(Ci.length);var a1=Qm.distanceTo(C1),I1=Qm.distanceTo(_1);this.boundingSphere.center=Qm,this.boundingSphere.radius=Math.max(a1,I1),typeof W=="function"&&W()}addVolumetricData(p,R,W){p=new t0.VolumeData(p,R),this.addIsosurface(p,W)}finalize(){return s0.finalizeGeo(this.geo),this.geo.initTypedArrays(),this.geo}globj(p){if(this.renderedShapeObj&&(p.remove(this.renderedShapeObj),this.renderedShapeObj=null),!this.hidden){s0.finalizeGeo(this.geo),this.geo.initTypedArrays(),this.wireframe&&this.geo.setUpWireframe(),this.color!==void 0&&s0.updateColor(this.geo,this.color),this.shapeObj=new s.Object3D;var R=null;R=this.side==s.DoubleSide?new s.MeshDoubleLambertMaterial({wireframe:this.wireframe,side:this.side,transparent:this.opacity<1,opacity:this.opacity,wireframeLinewidth:this.linewidth,vertexColors:s.Coloring.VertexColors}):new s.MeshLambertMaterial({wireframe:this.wireframe,side:this.side,transparent:this.opacity<1,opacity:this.opacity,wireframeLinewidth:this.linewidth,vertexColors:s.Coloring.VertexColors});var W=new s.Mesh(this.geo,R);if(this.shapeObj.add(W),this.linegeo&&this.linegeo.vertices>0){var J=new s.LineBasicMaterial({linewidth:this.linewidth,color:this.color}),Et=new s.Line(this.linegeo,J,s.LineStyle.LinePieces);this.shapeObj.add(Et)}this.renderedShapeObj=this.shapeObj.clone(),p.add(this.renderedShapeObj)}}removegl(p){this.renderedShapeObj&&(this.renderedShapeObj.geometry!==void 0&&this.renderedShapeObj.geometry.dispose(),this.renderedShapeObj.material!==void 0&&this.renderedShapeObj.material.dispose(),p.remove(this.renderedShapeObj),this.renderedShapeObj=null),this.shapeObj=null}get position(){return this.boundingSphere.center}get x(){return this.boundingSphere.center.x}get y(){return this.boundingSphere.center.y}get z(){return this.boundingSphere.center.z}}function J0(o0){if(o0.vertexArr.length<64e3)return[o0];var p=[{vertexArr:[],normalArr:[],faceArr:[]}];o0.colorArr&&(p.colorArr=[]);var R=[],W=[],J=0,Et=o0.faceArr;for(let Dt=0,It=Et.length;Dt<It;Dt+=3){let Mt=p[J];for(let Wt=0;Wt<3;Wt++){var tt=Et[Dt+Wt];R[tt]!==J&&(R[tt]=J,W[tt]=Mt.vertexArr.length,Mt.vertexArr.push(o0.vertexArr[tt]),o0.normalArr&&o0.normalArr[tt]&&Mt.normalArr.push(o0.normalArr[tt]),o0.colorArr&&o0.colorArr[tt]&&Mt.colorArr.push(o0.colorArr[tt])),Mt.faceArr.push(W[tt])}Mt.vertexArr.length>=64e3&&(p.push({vertexArr:[],normalArr:[],faceArr:[]}),o0.colorArr&&(p.colorArr=[]),J++)}return p}s0.ISDONE=2,s0.drawCustom=function(o0,p,R){var W=R,J=W.vertexArr,Et=W.faceArr;J.length!==0&&Et.length!==0||console.warn("Error adding custom shape component: No vertices and/or face indices supplied!");var tt=R.color;tt===void 0&&(tt=o0.color),tt=b.CC.color(tt);for(var Dt=J0(W),It=0,Mt=Dt.length;It<Mt;It++)s0.addCustomGeo(o0,p,Dt[It],Dt[It].colorArr?Dt[It].colorArr:tt,R.clickable)};let F0=0;function lm(o0,p,R){var W=R;return o0!==void 0&&(o0 instanceof b.Color?W=o0.scaled():(W=b.CC.color(o0)).scaled!==void 0&&(W=W.scaled())),p!==void 0&&(W.a=parseFloat(p)),W}class Bm{constructor(p,R){this.id=F0++,this.stylespec=R||{},this.canvas=document.createElement("canvas"),this.canvas.width=134,this.canvas.height=35,this.context=this.canvas.getContext("2d"),this.sprite=new s.Sprite,this.text=p,this.frame=this.stylespec.frame}getStyle(){return this.stylespec}hide(){this.sprite&&(this.sprite.visible=!1)}show(){this.sprite&&(this.sprite.visible=!0)}setContext(){var p=this.stylespec,R=p.useScreen!==void 0&&p.useScreen,W=p.showBackground;W!=="0"&&W!=="false"||(W=!1),W===void 0&&(W=!0);var J=p.font?p.font:"sans-serif",Et=parseInt(p.fontSize)?parseInt(p.fontSize):18,tt=lm(p.fontColor,p.fontOpacity,{r:255,g:255,b:255,a:1}),Dt=p.padding?p.padding:4,It=p.borderThickness?p.borderThickness:0,Mt=lm(p.backgroundColor,p.backgroundOpacity,{r:0,g:0,b:0,a:1}),Wt=lm(p.borderColor,p.borderOpacity,Mt),Yt=p.position?p.position:{x:-10,y:1,z:1},Zo=p.inFront===void 0||p.inFront;Zo!=="false"&&Zo!=="0"||(Zo=!1);var wi=p.alignment||s.SpriteAlignment.topLeft;typeof wi=="string"&&wi in s.SpriteAlignment&&(wi=s.SpriteAlignment[wi]);var aa="";p.bold&&(aa="bold "),this.context.font=aa+Et+"px  "+J;var Yo=this.context.measureText(this.text).width;W||(It=0);var Ci=Yo+2.5*It+2*Dt,Ip=1.25*Et+2*It+2*Dt;if(p.backgroundImage){var $p=p.backgroundImage,Qp=p.backgroundWidth?p.backgroundWidth:$p.width,T0=p.backgroundHeight?p.backgroundHeight:$p.height;Qp>Ci&&(Ci=Qp),T0>Ip&&(Ip=T0)}if(this.canvas.width=Ci,this.canvas.height=Ip,this.context.clearRect(0,0,this.canvas.width,this.canvas.height),aa="",p.bold&&(aa="bold "),this.context.font=aa+Et+"px  "+J,this.context.fillStyle="rgba("+Mt.r+","+Mt.g+","+Mt.b+","+Mt.a+")",this.context.strokeStyle="rgba("+Wt.r+","+Wt.g+","+Wt.b+","+Wt.a+")",p.backgroundGradient){let U0=this.context.createLinearGradient(0,Ip/2,Ci,Ip/2),Y0=E.Gradient.getGradient(p.backgroundGradient),Q0=Y0.range(),tm=-1,G0=1;Q0&&(tm=Q0[0],G0=Q0[1]);let Pm=G0-tm;for(let km=0;km<1.01;km+=.1){let i1=lm(Y0.valueToHex(tm+Pm*km)),Qm="rgba("+i1.r+","+i1.g+","+i1.b+","+i1.a+")";U0.addColorStop(km,Qm)}this.context.fillStyle=U0}this.context.lineWidth=It,W&&(function(U0,Y0,Q0,tm,G0,Pm,km){U0.beginPath(),U0.moveTo(Y0+Pm,Q0),U0.lineTo(Y0+tm-Pm,Q0),U0.quadraticCurveTo(Y0+tm,Q0,Y0+tm,Q0+Pm),U0.lineTo(Y0+tm,Q0+G0-Pm),U0.quadraticCurveTo(Y0+tm,Q0+G0,Y0+tm-Pm,Q0+G0),U0.lineTo(Y0+Pm,Q0+G0),U0.quadraticCurveTo(Y0,Q0+G0,Y0,Q0+G0-Pm),U0.lineTo(Y0,Q0+Pm),U0.quadraticCurveTo(Y0,Q0,Y0+Pm,Q0),U0.closePath(),U0.fill(),km&&U0.stroke()})(this.context,It,It,Ci-2*It,Ip-2*It,6,It>0),p.backgroundImage&&this.context.drawImage($p,0,0,Ci,Ip),this.context.fillStyle="rgba("+tt.r+","+tt.g+","+tt.b+","+tt.a+")",this.context.fillText(this.text,It+Dt,Et+It+Dt,Yo);var g0=new s.Texture(this.canvas);g0.needsUpdate=!0,this.sprite.material=new s.SpriteMaterial({map:g0,useScreenCoordinates:R,alignment:wi,depthTest:!Zo,screenOffset:p.screenOffset||null}),this.sprite.scale.set(1,1,1),this.sprite.position.set(Yt.x,Yt.y,Yt.z)}dispose(){this.sprite.material.map!==void 0&&this.sprite.material.map.dispose(),this.sprite.material!==void 0&&this.sprite.material.dispose()}}class Nm{static interpolateArray(p,R){function W(Yt,Zo,wi){return Yt+(Zo-Yt)*wi}var J=[],Et=(p.length-1)/(R-1);J[0]=p[0];for(var tt=1;tt<R-1;tt++){var Dt=tt*Et,It=Math.floor(Dt),Mt=Math.ceil(Dt),Wt=Dt-It;J[tt]=W(p[It],p[Mt],Wt)}return J[R-1]=p[p.length-1],J}constructor(p,R,W){this.hidden=!1,this.boundingSphere=new f.Sphere,this.renderedShapeObj=null,this.shapeObj=null,this.subsamples=5,this.data=null,this.transferfunctionbuffer=[],this.min=0,this.max=0,R=R||{};var J,Et,tt,Dt,It,Mt,Wt,Yt,Zo,wi,aa=Object.assign([],R.transferfn);this.subsamples=R.subsamples||5,aa.forEach(function(Ci){Ci.value=parseFloat(Ci.value)}),aa.sort(function(Ci,Ip){return Ci.value-Ip.value}),this.min=aa[0].value,aa.length==0&&aa.push(aa[0]),this.max=aa[aa.length-1].value;for(let Ci=0;Ci<aa.length-1;Ci++)if(tt=b.CC.color(aa[Ci].color),Dt=b.CC.color(aa[Ci+1].color),Zo=aa[Ci].opacity,wi=aa[Ci+1].opacity,(J=Math.floor(256*(aa[Ci].value-this.min)/(this.max-this.min)))!=(Et=Math.floor(256*(aa[Ci+1].value-this.min)/(this.max-this.min)))){It=Nm.interpolateArray([255*tt.r,255*Dt.r],Et-J),Mt=Nm.interpolateArray([255*tt.g,255*Dt.g],Et-J),Wt=Nm.interpolateArray([255*tt.b,255*Dt.b],Et-J),Yt=Nm.interpolateArray([255*Zo,255*wi],Et-J);for(let Ip=0;Ip<It.length;Ip++)this.transferfunctionbuffer.push(It[Ip]),this.transferfunctionbuffer.push(Mt[Ip]),this.transferfunctionbuffer.push(Wt[Ip]),this.transferfunctionbuffer.push(Yt[Ip])}if(this.transferfunctionbuffer=new Uint8ClampedArray(this.transferfunctionbuffer),p.matrix){let Ci=new m.Vector3(0,0,0),Ip=new m.Vector3(p.size.x,p.size.y,p.size.z),$p=new m.Vector3(1,1,1);Ci.applyMatrix4(p.matrix),Ip.applyMatrix4(p.matrix),$p.applyMatrix4(p.matrix).sub(Ci),this.extent=[[Ci.x,Ci.y,Ci.z],[Ip.x,Ip.y,Ip.z]];for(let U0=1;U0<7;U0++)Ip.x=1&U0?p.size.x:0,Ip.y=2&U0?p.size.y:0,Ip.z=4&U0?p.size.z:0,Ip.applyMatrix4(p.matrix),this.extent[0][0]=Math.min(this.extent[0][0],Ip.x),this.extent[0][1]=Math.min(this.extent[0][1],Ip.y),this.extent[0][2]=Math.min(this.extent[0][2],Ip.z),this.extent[1][0]=Math.max(this.extent[1][0],Ip.x),this.extent[1][1]=Math.max(this.extent[1][1],Ip.y),this.extent[1][2]=Math.max(this.extent[1][2],Ip.z);let Qp=Ip.x-Ci.x,T0=Ip.y-Ci.y,g0=Ip.z-Ci.z;this.maxdepth=Math.sqrt(Qp*Qp+T0*T0+g0*g0),this.minunit=Math.min(Math.min($p.x,$p.y),$p.z),this.texmatrix=new m.Matrix4().identity().scale({x:p.size.x,y:p.size.y,z:p.size.z}),this.texmatrix=this.texmatrix.multiplyMatrices(p.matrix,this.texmatrix),this.texmatrix=this.texmatrix.getInverse(this.texmatrix)}else{this.texmatrix=new m.Matrix4().identity();let Ci=p.unit.x*p.size.x,Ip=p.unit.y*p.size.y,$p=p.unit.z*p.size.z;this.texmatrix.makeTranslation(-p.origin.x/Ci,-p.origin.y/Ip,-p.origin.z/$p),this.texmatrix.scale({x:1/Ci,y:1/Ip,z:1/$p}),this.minunit=Math.min(Math.min(p.unit.x,p.unit.y),p.unit.z),this.extent=[[p.origin.x,p.origin.y,p.origin.z],[p.origin.x+Ci,p.origin.y+Ip,p.origin.z+$p]],this.maxdepth=Math.sqrt(Ci*Ci+Ip*Ip+$p*$p)}var Yo=new s0({});if(Yo.addBox({corner:{x:this.extent[0][0],y:this.extent[0][1],z:this.extent[0][2]},dimensions:{w:this.extent[1][0]-this.extent[0][0],h:this.extent[1][1]-this.extent[0][1],d:this.extent[1][2]-this.extent[0][2]}}),this.geo=Yo.finalize(),this.boundingSphere.center=new m.Vector3((this.extent[0][0]+this.extent[1][0])/2,(this.extent[0][1]+this.extent[1][1])/2,(this.extent[0][2]+this.extent[1][2])/2),this.boundingSphere.radius=this.maxdepth/2,R.coords===void 0&&R.selection!==void 0&&(W?R.coords=W.selectedAtoms(R.selection):console.log("Need to provide viewer to volumetric renderer if selection specified.")),R.coords!==void 0&&R.seldist!==void 0){let Ci=new Uint8Array(p.data.length),Ip=R.seldist,$p=Ip*Ip;for(let Qp=0,T0=R.coords.length;Qp<T0;Qp++){let g0=R.coords[Qp],U0=g0.x-Ip,Y0=g0.y-Ip,Q0=g0.z-Ip,tm=g0.x+Ip,G0=g0.y+Ip,Pm=g0.z+Ip;if(p.getIndex(U0,Y0,Q0)>=0||p.getIndex(tm,G0,Pm)>=0)for(let km=U0;km<tm;km+=this.minunit)for(let i1=Y0;i1<G0;i1+=this.minunit)for(let Qm=Q0;Qm<Pm;Qm+=this.minunit){let _1=p.getIndex(km,i1,Qm);_1>=0&&!Ci[_1]&&(km-g0.x)*(km-g0.x)+(i1-g0.y)*(i1-g0.y)+(Qm-g0.z)*(Qm-g0.z)<$p&&(Ci[_1]=1)}}for(let Qp=0,T0=p.data.length;Qp<T0;Qp++)Ci[Qp]==0&&(p.data[Qp]=1/0)}this.data=p}globj(p){if(this.renderedShapeObj&&(p.remove(this.renderedShapeObj),this.renderedShapeObj=null),!this.hidden){this.shapeObj=new s.Object3D;var R,W=new s.Texture(this.data,!0),J=new s.Texture(this.transferfunctionbuffer,!1);W.needsUpdate=!0,J.needsUpdate=!0,J.flipY=!1,R=new s.VolumetricMaterial({transferfn:J,transfermin:this.min,transfermax:this.max,map:W,extent:this.extent,maxdepth:this.maxdepth,texmatrix:this.texmatrix,unit:this.minunit,subsamples:this.subsamples});var Et=new s.Mesh(this.geo,R);this.shapeObj.add(Et),this.renderedShapeObj=this.shapeObj.clone(),p.add(this.renderedShapeObj)}}removegl(p){this.renderedShapeObj&&(this.renderedShapeObj.geometry!==void 0&&this.renderedShapeObj.geometry.dispose(),this.renderedShapeObj.material!==void 0&&this.renderedShapeObj.material.dispose(),p.remove(this.renderedShapeObj),this.renderedShapeObj=null),this.shapeObj=null}get position(){return this.boundingSphere.center}get x(){return this.boundingSphere.center.x}get y(){return this.boundingSphere.center.y}get z(){return this.boundingSphere.center.z}}const jm=16;class A1 extends Array{constructor(p){super(...p)}getSymmetries(){if(this.length==0)return[];let p=this[0];return p.symmetries===void 0&&this.setSymmetries([new m.Matrix4]),p.symmetries}setSymmetries(p){p===void 0&&(p=[new m.Matrix4]);for(let R of this)R.symmetries=p,R.finished=!1}}class L1{getWidth(){let p=this.container,R=p.offsetWidth;if(R==0&&p.style.display==="none"){let W=p.style.position,J=p.style.visibility;p.style.display="block",p.style.visibility="hidden",p.style.position="absolute",R=p.offsetWidth,p.style.display="none",p.style.visibility=J,p.style.position=W}return R}getHeight(){let p=this.container,R=p.offsetHeight;if(R==0&&p.style.display==="none"){let W=p.style.position,J=p.style.visibility;p.style.display="block",p.style.visibility="hidden",p.style.position="absolute",R=p.offsetHeight,p.style.display="none",p.style.visibility=J,p.style.position=W}return R}setupRenderer(){let p=Object.assign(Object.assign({},this.config),{preserveDrawingBuffer:!0,premultipliedAlpha:!1,containerWidth:this.WIDTH,containerHeight:this.HEIGHT});this.renderer=new s.Renderer(p),this.renderer.domElement.style.width="100%",this.renderer.domElement.style.height="100%",this.renderer.domElement.style.padding="0",this.renderer.domElement.style.position="absolute",this.renderer.domElement.style.top="0px",this.renderer.domElement.style.left="0px",this.renderer.domElement.style.zIndex="0"}initializeScene(){this.scene=new s.Scene,this.scene.fog=new s.Fog(this.bgColor,100,200),this.modelGroup=new s.Object3D,this.rotationGroup=new s.Object3D,this.rotationGroup.useQuaternion=!0,this.rotationGroup.quaternion=new m.Quaternion(0,0,0,1),this.rotationGroup.add(this.modelGroup),this.scene.add(this.rotationGroup);var p=new s.Light(16777215);p.position=new m.Vector3(.2,.2,1).normalize(),p.intensity=1,this.scene.add(p)}_handleLostContext(p){const R=function(W){const J=W.getBoundingClientRect();return!(J.right<0||J.bottom<0||J.top>(window.innerHeight||document.documentElement.clientHeight)||J.left>(window.innerWidth||document.documentElement.clientWidth))};if(R(this.container)){let W=0;for(let J of document.getElementsByTagName("canvas"))if(R(J)&&J._3dmol_viewer!=null&&(J._3dmol_viewer.resize(),W+=1,W>=jm))break}}initContainer(p){this.container=p,this.WIDTH=this.getWidth(),this.HEIGHT=this.getHeight(),this.ASPECT=this.renderer.getAspect(this.WIDTH,this.HEIGHT),this.renderer.setSize(this.WIDTH,this.HEIGHT),this.container.append(this.renderer.domElement),this.glDOM=this.renderer.domElement,this.glDOM._3dmol_viewer=this,this.glDOM.addEventListener("webglcontextlost",this._handleLostContext.bind(this)),this.nomouse||(this.glDOM.addEventListener("mousedown",this._handleMouseDown.bind(this),{passive:!1}),this.glDOM.addEventListener("touchstart",this._handleMouseDown.bind(this),{passive:!1}),this.glDOM.addEventListener("wheel",this._handleMouseScroll.bind(this),{passive:!1}),this.glDOM.addEventListener("mousemove",this._handleMouseMove.bind(this),{passive:!1}),this.glDOM.addEventListener("touchmove",this._handleMouseMove.bind(this),{passive:!1}),this.glDOM.addEventListener("contextmenu",this._handleContextMenu.bind(this),{passive:!1}))}decAnim(){this.animated--,this.animated<0&&(this.animated=0)}incAnim(){this.animated++}nextSurfID(){var p=0;for(let W in this.surfaces)if(this.surfaces.hasOwnProperty(W)){var R=parseInt(W);isNaN(R)||R>p&&(p=R)}return p+1}setSlabAndFog(){let p=this.camera.position.z-this.rotationGroup.position.z;p<1&&(p=1),this.camera.near=p+this.slabNear,!this.camera.ortho&&this.camera.near<1&&(this.camera.near=1),this.camera.far=p+this.slabFar,this.camera.near+1>this.camera.far&&(this.camera.far=this.camera.near+1),this.camera.fov=this.fov,this.camera.right=p*Math.tan(Math.PI/180*this.fov),this.camera.left=-this.camera.right,this.camera.top=this.camera.right/this.ASPECT,this.camera.bottom=-this.camera.top,this.camera.updateProjectionMatrix(),this.scene.fog.near=this.camera.near+this.fogStart*(this.camera.far-this.camera.near),this.scene.fog.far=this.camera.near+this.fogEnd*(this.camera.far-this.camera.near),this.config.disableFog&&(this.scene.fog.near=this.scene.fog.far)}show(p){if(this.renderer.setViewport(),this.scene&&(this.setSlabAndFog(),this.renderer.render(this.scene,this.camera),this.viewChangeCallback&&this.viewChangeCallback(this._viewer.getView()),!p&&this.linkedViewers.length>0))for(var R=this._viewer.getView(),W=0;W<this.linkedViewers.length;W++)this.linkedViewers[W].setView(R,!0)}updateClickables(){this.clickables.splice(0,this.clickables.length),this.hoverables.splice(0,this.hoverables.length),this.contextMenuEnabledObjects.splice(0,this.contextMenuEnabledObjects.length);for(let p=0,R=this.models.length;p<R;p++){let W=this.models[p];if(W){let J=W.selectedAtoms({clickable:!0}),Et=W.selectedAtoms({hoverable:!0}),tt=W.selectedAtoms({contextMenuEnabled:!0});for(let Dt=0;Dt<Et.length;Dt++)this.hoverables.push(Et[Dt]);for(let Dt=0;Dt<J.length;Dt++)this.clickables.push(J[Dt]);for(let Dt=0;Dt<tt.length;Dt++)this.contextMenuEnabledObjects.push(tt[Dt])}}for(let p=0,R=this.shapes.length;p<R;p++){let W=this.shapes[p];W&&W.clickable&&this.clickables.push(W),W&&W.hoverable&&this.hoverables.push(W),W&&W.contextMenuEnabled&&this.contextMenuEnabledObjects.push(W)}}handleClickSelection(p,R,W){let J=this.targetedObjects(p,R,this.clickables);if(J.length){var Et=J[0].clickable;Et.callback!==void 0&&(typeof Et.callback!="function"&&(Et.callback=(0,M.makeFunction)(Et.callback)),typeof Et.callback=="function")&&(this.mouseButton===3&&this.contextMenuEnabledObjects.includes(Et)&&this.userContextMenuHandler||Et.callback(Et,this._viewer,W,this.container,J))}}canvasOffset(){let p=this.glDOM,R=p.getBoundingClientRect(),W=p.ownerDocument,J=W.documentElement,Et=W.defaultView;return{top:R.top+Et.pageYOffset-J.clientTop,left:R.left+Et.pageXOffset-J.clientLeft}}setHover(p,R,W){this.current_hover!=p&&(this.current_hover&&(typeof this.current_hover.unhover_callback!="function"&&(this.current_hover.unhover_callback=(0,M.makeFunction)(this.current_hover.unhover_callback)),this.current_hover.unhover_callback(this.current_hover,this._viewer,R,this.container,W)),this.current_hover=p,p&&p.hover_callback!==void 0&&(typeof p.hover_callback!="function"&&(p.hover_callback=(0,M.makeFunction)(p.hover_callback)),typeof p.hover_callback=="function"&&p.hover_callback(p,this._viewer,R,this.container,W)))}handleHoverSelection(p,R,W){if(this.hoverables.length==0)return;let J=this.targetedObjects(p,R,this.hoverables);if(J.length){var Et=J[0].clickable;this.setHover(Et,W,J),this.current_hover=Et}else this.setHover(null)}handleHoverContinue(p,R){let W=this.targetedObjects(p,R,this.hoverables);W.length!=0&&W[0]!==void 0||this.setHover(null),W[0]!==void 0&&W[0].clickable!==this.current_hover&&this.setHover(null)}closeEnoughForClick(p,{allowTolerance:R=p.targetTouches,tolerance:W=5}={}){const J=this.getX(p),Et=this.getY(p);if(R){const tt=Math.abs(J-this.mouseStartX),Dt=Math.abs(Et-this.mouseStartY);return tt<=W&&Dt<=W}return J===this.mouseStartX&&Et===this.mouseStartY}calcTouchDistance(p){var R=p.targetTouches[0].pageX-p.targetTouches[1].pageX,W=p.targetTouches[0].pageY-p.targetTouches[1].pageY;return Math.hypot(R,W)}getX(p){var R=p.pageX;return R==null&&(R=p.pageX),p.targetTouches&&p.targetTouches[0]?R=p.targetTouches[0].pageX:p.changedTouches&&p.changedTouches[0]&&(R=p.changedTouches[0].pageX),R}getY(p){var R=p.pageY;return R==null&&(R=p.pageY),p.targetTouches&&p.targetTouches[0]?R=p.targetTouches[0].pageY:p.changedTouches&&p.changedTouches[0]&&(R=p.changedTouches[0].pageY),R}isInViewer(p,R){if(this.viewers!=null){var W=this.WIDTH/this.cols,J=this.HEIGHT/this.rows,Et=this.canvasOffset(),tt=p-Et.left,Dt=R-Et.top,It=this.rows-Math.floor(Dt/J)-1,Mt=Math.floor(tt/W);if(It!=this.row||Mt!=this.col)return!1}return!0}adjustZoomToLimits(p){if(this.config.lowerZoomLimit&&this.config.lowerZoomLimit>0){let R=this.CAMERA_Z-this.config.lowerZoomLimit;p>R&&(p=R)}if(this.config.upperZoomLimit&&this.config.upperZoomLimit>0){let R=this.CAMERA_Z-this.config.upperZoomLimit;p<R&&(p=R)}return p>this.CAMERA_Z-1&&(p=this.CAMERA_Z-1),p}static slerp(p,R,W){if(W==1)return R.clone();if(W==0)return p.clone();let J=p.x*R.x+p.y*R.y+p.z*R.z+p.w*R.w;if(J>.9995){let Wt=new m.Quaternion(p.x+W*(R.x-p.x),p.y+W*(R.y-p.y),p.z+W*(R.z-p.z),p.w+W*(R.w-p.w));return Wt.normalize(),Wt}J<0&&(R=R.clone().multiplyScalar(-1),J=-J),J>1?J=1:J<-1&&(J=-1);var Et=Math.acos(J)*W,tt=R.clone();tt.sub(p.clone().multiplyScalar(J)),tt.normalize();var Dt=Math.cos(Et),It=Math.sin(Et),Mt=new m.Quaternion(p.x*Dt+tt.x*It,p.y*Dt+tt.y*It,p.z*Dt+tt.z*It,p.w*Dt+tt.w*It);return Mt.normalize(),Mt}constructor(p,R={}){if(this.nomouse=!1,this.glDOM=null,this.models=[],this.surfaces={},this.shapes=[],this.labels=[],this.clickables=[],this.hoverables=[],this.contextMenuEnabledObjects=[],this.current_hover=null,this.hoverDuration=500,this.longTouchDuration=1e3,this.viewer_frame=0,this.viewChangeCallback=null,this.stateChangeCallback=null,this.NEAR=1,this.FAR=800,this.CAMERA_Z=150,this.fov=20,this.linkedViewers=[],this.renderer=null,this.control_all=!1,this.scene=null,this.rotationGroup=null,this.modelGroup=null,this.fogStart=.4,this.fogEnd=1,this.slabNear=-50,this.slabFar=50,this.cq=new m.Quaternion(0,0,0,1),this.dq=new m.Quaternion(0,0,0,1),this.animated=0,this.animationTimers=new Set,this.isDragging=!1,this.mouseStartX=0,this.mouseStartY=0,this.touchDistanceStart=0,this.touchHold=!1,this.currentModelPos=0,this.cz=0,this.cslabNear=0,this.cslabFar=0,this.userContextMenuHandler=null,this.config=R,this.callback=this.config.callback,this.defaultcolors=this.config.defaultcolors,this.defaultcolors||(this.defaultcolors=b.elementColors.defaultColors),this.nomouse=!!this.config.nomouse,this.bgColor=0,this.config.backgroundColor=this.config.backgroundColor||"#ffffff",this.config.backgroundColor!==void 0&&(this.bgColor=b.CC.color(this.config.backgroundColor).getHex()),this.config.backgroundAlpha=this.config.backgroundAlpha==null?1:this.config.backgroundAlpha,this.camerax=0,this.config.camerax!==void 0&&(this.camerax=typeof this.config.camerax=="string"?parseFloat(this.config.camerax):this.config.camerax),this._viewer=this,this.container=p,this.config.hoverDuration!=null&&(this.hoverDuration=this.config.hoverDuration),this.config.antialias===void 0&&(this.config.antialias=!0),this.config.cartoonQuality===void 0&&(this.config.cartoonQuality=10),this.WIDTH=this.getWidth(),this.HEIGHT=this.getHeight(),this.setupRenderer(),this.row=this.config.row==null?0:this.config.row,this.col=this.config.col==null?0:this.config.col,this.cols=this.config.cols,this.rows=this.config.rows,this.viewers=this.config.viewers,this.control_all=this.config.control_all,this.ASPECT=this.renderer.getAspect(this.WIDTH,this.HEIGHT),this.camera=new s.Camera(this.fov,this.ASPECT,this.NEAR,this.FAR,this.config.orthographic),this.camera.position=new m.Vector3(this.camerax,0,this.CAMERA_Z),this.lookingAt=new m.Vector3,this.camera.lookAt(this.lookingAt),this.raycaster=new s.Raycaster(new m.Vector3(0,0,0),new m.Vector3(0,0,0)),this.projector=new s.Projector,this.initializeScene(),this.renderer.setClearColorHex(this.bgColor,this.config.backgroundAlpha),this.scene.fog.color=b.CC.color(this.bgColor),document.body.addEventListener("mouseup",this._handleMouseUp.bind(this)),document.body.addEventListener("touchend",this._handleMouseUp.bind(this)),this.initContainer(this.container),this.config.style&&this.setViewStyle(this.config),window.addEventListener("resize",this.resize.bind(this)),window.ResizeObserver!==void 0&&(this.divwatcher=new window.ResizeObserver(this.resize.bind(this)),this.divwatcher.observe(this.container)),window.IntersectionObserver!==void 0){let W=(J,Et)=>{J.forEach(tt=>{tt.isIntersecting&&this.resize()})};this.intwatcher=new window.IntersectionObserver(W),this.intwatcher.observe(this.container)}try{typeof this.callback=="function"&&this.callback(this)}catch(W){console.log("error with glviewer callback: "+W)}}targetedObjects(p,R,W){var J={x:p,y:R,z:-1};return Array.isArray(W)||(W=this.selectedAtoms(W)),W.length==0?[]:(this.raycaster.setFromCamera(J,this.camera),this.raycaster.intersectObjects(this.modelGroup,W))}modelToScreen(p){let R=!1;Array.isArray(p)||(p=[p],R=!0);let W=this.renderer.getXRatio(),J=this.renderer.getYRatio(),Et=this.col,tt=this.row,Dt=Et*(this.WIDTH/W),It=(J-tt-1)*(this.HEIGHT/J),Mt=[],Wt=this.canvasOffset();return p.forEach(Yt=>{let Zo=new m.Vector3(Yt.x,Yt.y,Yt.z);Zo.applyMatrix4(this.modelGroup.matrixWorld),this.projector.projectVector(Zo,this.camera);let wi=this.WIDTH/W*(Zo.x+1)/2+Wt.left+Dt,aa=-this.HEIGHT/J*(Zo.y-1)/2+Wt.top+It;Mt.push({x:wi,y:aa})}),R&&(Mt=Mt[0]),Mt}screenOffsetToModel(p,R,W){var J=p/this.WIDTH,Et=R/this.HEIGHT,tt=W===void 0?this.rotationGroup.position.z:W,Dt=this.rotationGroup.quaternion,It=new m.Vector3(0,0,tt);return this.projector.projectVector(It,this.camera),It.x+=2*J,It.y-=2*Et,this.projector.unprojectVector(It,this.camera),It.z=0,It.applyQuaternion(Dt),It}screenToModelDistance(p,R){let W=this.canvasOffset(),J=new m.Vector3(R.x,R.y,R.z);J.applyMatrix4(this.modelGroup.matrixWorld);let Et=J.clone();this.projector.projectVector(J,this.camera);let tt=new m.Vector3(2*(p.x-W.left)/this.WIDTH-1,2*(p.y-W.top)/-this.HEIGHT+1,J.z);return this.projector.unprojectVector(tt,this.camera),tt.distanceTo(Et)}setViewChangeCallback(p){typeof p!="function"&&p!=null||(this.viewChangeCallback=p)}setStateChangeCallback(p){typeof p!="function"&&p!=null||(this.stateChangeCallback=p)}getConfig(){return this.config}setConfig(p){this.config=p,p.ambientOcclusion&&this.renderer.enableAmbientOcclusion(p.ambientOcclusion)}getInternalState(){var p={models:[],surfaces:[],shapes:[],labels:[]};for(let R=0;R<this.models.length;R++)this.models[R]&&(p.models[R]=this.models[R].getInternalState());return p}setInternalState(p){this.clear();var R=p.models;for(let W=0;W<R.length;W++)R[W]&&(this.models[W]=new wg(W,void 0,this),this.models[W].setInternalState(R[W]));this.render()}setZoomLimits(p,R){p!==void 0&&(this.config.lowerZoomLimit=p),R&&(this.config.upperZoomLimit=R),this.rotationGroup.position.z=this.adjustZoomToLimits(this.rotationGroup.position.z),this.show()}setCameraParameters(p){p.fov!==void 0&&(this.fov=p.fov,this.camera.fov=this.fov),p.z!==void 0&&(this.CAMERA_Z=p.z,this.camera.z=this.CAMERA_Z),p.orthographic!==void 0&&(this.camera.ortho=p.orthographic),this.setSlabAndFog()}_handleMouseDown(p){if(p.preventDefault(),!this.scene)return;var R=this.getX(p),W=this.getY(p);if(R===void 0)return;this.isDragging=!0,this.mouseButton=p.which,this.mouseStartX=R,this.mouseStartY=W,this.touchHold=!0,this.touchDistanceStart=0,p.targetTouches&&p.targetTouches.length==2&&(this.touchDistanceStart=this.calcTouchDistance(p)),this.cq=this.rotationGroup.quaternion.clone(),this.cz=this.rotationGroup.position.z,this.currentModelPos=this.modelGroup.position.clone(),this.cslabNear=this.slabNear,this.cslabFar=this.slabFar;let J=this;p.targetTouches&&p.targetTouches.length===1&&(this.longTouchTimeout=setTimeout(function(){if(J.touchHold==1){J.glDOM=J.renderer.domElement;const Et=p.targetTouches[0],tt=new PointerEvent("contextmenu",Object.assign(Object.assign({},p),{pageX:Et.pageX,pageY:Et.pageY,screenX:Et.screenX,screenY:Et.screenY,clientX:Et.clientX,clientY:Et.clientY}));J.glDOM.dispatchEvent(tt)}},this.longTouchDuration))}_handleMouseUp(p){if(this.touchHold=!1,this.isDragging&&this.scene){var R=this.getX(p),W=this.getY(p);if(this.closeEnoughForClick(p)&&this.isInViewer(R,W)){let J=this.mouseXY(R,W);this.handleClickSelection(J.x,J.y,p)}}this.isDragging=!1}_handleMouseScroll(p){if(p.preventDefault(),this.scene){var R=this.getX(p),W=this.getY(p);if(R!==void 0&&(this.control_all||this.isInViewer(R,W))){var J=.85*(this.CAMERA_Z-this.rotationGroup.position.z),Et=1;if(p.ctrlKey&&(Et=-1),p.detail)this.rotationGroup.position.z+=Et*J*p.detail/10;else if(p.wheelDelta){let tt=600*p.wheelDelta/(p.wheelDelta+600);this.rotationGroup.position.z-=Et*J*tt/400}this.rotationGroup.position.z=this.adjustZoomToLimits(this.rotationGroup.position.z),this.show()}}}pngURI(){return this.getCanvas().toDataURL("image/png")}apngURI(p){let R=this;return p=p||1,new Promise(function(W){let J=0,Et=R.viewChangeCallback,tt=[],Dt=[],It=Date.now();R.viewChangeCallback=function(){Dt.push(Date.now()-It),It=Date.now(),tt.push(new Promise(Mt=>{R.getCanvas().toBlob(function(Wt){Wt.arrayBuffer().then(Mt)},"image/png")})),J+=1,J==p&&(R.viewChangeCallback=Et,Promise.all(tt).then(Mt=>{let Wt=[];for(let Ci=0;Ci<Mt.length;Ci++){let Ip=(0,l.decode)(Mt[Ci]);Wt.push((0,l.toRGBA8)(Ip)[0])}let Yt=R.getCanvas().width,Zo=R.getCanvas().height,wi=(0,l.encode)(Wt,Yt,Zo,0,Dt),aa=new Blob([wi],{type:"image/png"}),Yo=new FileReader;Yo.onload=function(Ci){W(Ci.target.result)},Yo.readAsDataURL(aa)}))}})}getCanvas(){return this.glDOM}getRenderer(){return this.renderer}setHoverDuration(p){this.hoverDuration=p}mouseXY(p,R){let W=this.canvasOffset(),J=this.renderer.getXRatio(),Et=this.renderer.getYRatio(),tt=this.col,Dt=this.row,It=tt*(this.WIDTH/J),Mt=(Et-Dt-1)*(this.HEIGHT/Et);return{x:(p-W.left-It)/(this.WIDTH/J)*2-1,y:-(R-W.top-Mt)/(this.HEIGHT/Et)*2+1}}_handleMouseMove(p){clearTimeout(this.hoverTimeout),p.preventDefault();let R=this.getX(p),W=this.getY(p);if(R===void 0)return;let J=this.renderer.getXRatio(),Et=this.renderer.getYRatio(),tt=this.mouseXY(R,W),Dt=this;this.current_hover!==null&&this.handleHoverContinue(tt.x,tt.y);var It=0;if((this.control_all||this.isInViewer(R,W))&&this.scene&&(this.hoverables.length>0&&(this.hoverTimeout=setTimeout(function(){Dt.handleHoverSelection(tt.x,tt.y,p)},this.hoverDuration)),this.isDragging)){p.targetTouches&&(p.targetTouches.length>1||p.targetTouches.length===1&&!this.closeEnoughForClick(p))&&clearTimeout(this.longTouchTimeout);var Mt=(R-this.mouseStartX)/this.WIDTH,Wt=(W-this.mouseStartY)/this.HEIGHT;this.touchDistanceStart!=0&&p.targetTouches&&p.targetTouches.length==2?(It=2,Wt=2*(this.calcTouchDistance(p)-this.touchDistanceStart)/(this.WIDTH+this.HEIGHT)):p.targetTouches&&p.targetTouches.length==3&&(It=1),Mt*=J,Wt*=Et;var Yt,Zo=Math.hypot(Mt,Wt);if(It==3||this.mouseButton==3&&p.ctrlKey)this.slabNear=this.cslabNear+100*Mt,this.slabFar=this.cslabFar-100*Wt;else if(It==2||this.mouseButton==3||p.shiftKey)(Yt=.85*(this.CAMERA_Z-this.rotationGroup.position.z))<80&&(Yt=80),this.rotationGroup.position.z=this.cz+Wt*Yt,this.rotationGroup.position.z=this.adjustZoomToLimits(this.rotationGroup.position.z);else if(It==1||this.mouseButton==2||p.ctrlKey){var wi=this.screenOffsetToModel(J*(R-this.mouseStartX),Et*(W-this.mouseStartY));this.modelGroup.position.addVectors(this.currentModelPos,wi)}else if((It===0||this.mouseButton==1)&&Zo!==0){var aa=Math.sin(Zo*Math.PI)/Zo;this.dq.x=Math.cos(Zo*Math.PI),this.dq.y=0,this.dq.z=aa*Mt,this.dq.w=-aa*Wt,this.rotationGroup.quaternion.set(1,0,0,0),this.rotationGroup.quaternion.multiply(this.dq),this.rotationGroup.quaternion.multiply(this.cq)}this.show()}}_handleContextMenu(p){if(p.preventDefault(),this.closeEnoughForClick(p)){var R=this.mouseStartX,W=this.mouseStartY,J=this.canvasOffset();let tt=this.mouseXY(R,W),Dt=tt.x,It=tt.y,Mt=this.targetedObjects(Dt,It,this.contextMenuEnabledObjects);var Et=null;Mt.length&&(Et=Mt[0].clickable),J=this.canvasOffset(),R=this.mouseStartX-J.left,W=this.mouseStartY-J.top,this.userContextMenuHandler&&(this.userContextMenuHandler(Et,R,W,Mt,p),this.isDragging=!1)}}setContainer(p){let R=(0,M.getElement)(p)||this.container;return this.initContainer(R),this}setBackgroundColor(p,R){(R===void 0||R<0||R>1)&&(R=1);var W=b.CC.color(p);return this.scene.fog.color=W,this.bgColor=W.getHex(),this.renderer.setClearColorHex(W.getHex(),R),this.show(),this}setProjection(p){this.camera.ortho=p==="orthographic",this.setSlabAndFog()}setViewStyle(p){if((p=p||{}).style=p.style||"",p.style.includes("outline")?this.renderer.enableOutline(p):this.renderer.disableOutline(),p.style.includes("ambientOcclusion")){var R={};p.strength&&(R.strength=p.strength),p.radius&&(R.radius=p.radius),this.renderer.enableAmbientOcclusion(R)}else this.renderer.disableAmbientOcclusion();return this}updateSize(){this.renderer.setSize(this.WIDTH,this.HEIGHT),this.ASPECT=this.renderer.getAspect(this.WIDTH,this.HEIGHT),this.renderer.setSize(this.WIDTH,this.HEIGHT),this.camera.aspect=this.ASPECT,this.camera.updateProjectionMatrix()}setWidth(p){return this.WIDTH=p||this.WIDTH,this.updateSize(),this}setHeight(p){return this.HEIGHT=p||this.HEIGHT,this.updateSize(),this}resize(){this.WIDTH=this.getWidth(),this.HEIGHT=this.getHeight();let p=!1;if(this.renderer.isLost()&&this.WIDTH>0&&this.HEIGHT>0){let R=!1,W=this.container.querySelector("canvas");W&&W!=this.renderer.getCanvas()?this.config.canvas=W:(W.remove(),this.config&&this.config.canvas!=null&&(delete this.config.canvas,R=!0)),this.setupRenderer(),this.initContainer(this.container),this.renderer.setClearColorHex(this.bgColor,this.config.backgroundAlpha),p=!0,R&&(this.config.canvas=this.renderer.getCanvas())}if(this.WIDTH==0||this.HEIGHT==0?this.animated&&this._viewer.pauseAnimate():this.animated&&this._viewer.resumeAnimate(),this.updateSize(),p){let R=this.renderer.supportedExtensions();if(R.regen=!0,this.viewers)for(let W=0,J=this.viewers.length;W<J;W++)for(let Et=0,tt=this.viewers[W].length;Et<tt;Et++)this.viewers[W][Et].render(null,R);this._viewer.render(null,R)}else this.WIDTH>0&&this.HEIGHT>0&&this.show();return this}getModel(p){return p===void 0?this.models.length==0?null:this.models[this.models.length-1]:p instanceof wg?p:p in this.models?this.models[p]:this.models.length==0?null:this.models[this.models.length-1]}spin(p,R=1,W=!1){if(clearInterval(this.spinInterval),p===void 0&&(p="y"),typeof p=="boolean"){if(!p)return;p="y"}Array.isArray(p)&&(p={x:p[0],y:p[1],z:p[2]});var J=this;this.spinInterval=setInterval(function(){!J.getCanvas().isConnected&&J.renderer.isLost()&&clearInterval(J.spinInterval),(!W||J.container.checkVisibility&&J.container.checkVisibility())&&J.rotate(1*R,p)},25)}animateMotion(p,R,W,J,Et,tt){var Dt=Math.ceil(p/20);Dt<1&&(Dt=1),this.incAnim();var It={mpos:this.modelGroup.position.clone(),rz:this.rotationGroup.position.z,rot:this.rotationGroup.quaternion.clone(),cam:this.lookingAt.clone()};if(R){let Yt=new Array(Dt);for(let Yo=0;Yo<Dt;Yo++){let Ci=(Yo+1)/Dt,Ip={mpos:It.mpos,rz:It.rz,rot:It.rot};Ip.mpos=W.clone().sub(It.mpos).multiplyScalar(Ci).add(It.mpos),Ip.rz=It.rz+Ci*(J-It.rz),Ip.rot=L1.slerp(It.rot,Et,Ci),Ip.cam=tt.clone().sub(It.cam).multiplyScalar(Ci).add(It.cam),Yt[Yo]=Ip}let Zo=0,wi=this,aa=function(){var Yo=Yt[Zo];Zo+=1,wi.modelGroup.position=Yo.mpos,wi.rotationGroup.position.z=Yo.rz,wi.rotationGroup.quaternion=Yo.rot,wi.camera.lookAt(Yo.cam),Zo<Yt.length?setTimeout(aa,20):wi.decAnim(),wi.show()};setTimeout(aa,20)}else{var Mt={};let Yt=1/Dt;if(W&&(Mt.mpos=W.clone().sub(It.mpos).multiplyScalar(Yt)),J!==void 0&&J!=null&&(Mt.rz=Yt*(J-It.rz)),Et){var Wt=L1.slerp(It.rot,Et,Yt);Mt.rot=It.rot.clone().inverse().multiply(Wt)}tt&&(Mt.cam=tt.clone().sub(It.cam).multiplyScalar(Yt));let Zo=0,wi=this,aa=function(){Zo+=1,Mt.mpos&&wi.modelGroup.position.add(Mt.mpos),Mt.rz&&(wi.rotationGroup.position.z+=Mt.rz),Mt.rot&&wi.rotationGroup.quaternion.multiply(Mt.rot),Mt.cam&&(wi.lookingAt.add(Mt.cam),wi.camera.lookAt(wi.lookingAt)),Zo<Dt?setTimeout(aa,20):wi.decAnim(),wi.show()};setTimeout(aa,20)}}rotate(p,R="y",W=0,J=!1){if(R=="x"?R={x:1,y:0,z:0}:R=="y"?R={x:0,y:1,z:0}:R=="z"&&(R={x:0,y:0,z:1}),R=="vx"?R={vx:1,vy:0,vz:0}:R=="vy"?R={vx:0,vy:1,vz:0}:R=="vz"&&(R={vx:0,vy:0,vz:1}),R.vx!==void 0){var Et=new m.Vector3(R.vx,R.vy,R.vz);Et.applyQuaternion(this.rotationGroup.quaternion),R={x:Et.x,y:Et.y,z:Et.z}}var tt=(function(It){var Mt,Wt,Yt,Zo=Math.sin(It/2),wi=Math.cos(It/2);return Mt=R.x*Zo,Wt=R.y*Zo,Yt=R.z*Zo,new m.Quaternion(Mt,Wt,Yt,wi).normalize()})(Math.PI*p/180);if(W){var Dt=new m.Quaternion().copy(this.rotationGroup.quaternion).multiply(tt);this.animateMotion(W,J,this.modelGroup.position,this.rotationGroup.position.z,Dt,this.lookingAt)}else this.rotationGroup.quaternion.multiply(tt),this.show();return this}surfacesFinished(){for(var p in this.surfaces)if(!this.surfaces[p][0].done)return!1;return!0}getView(){if(!this.modelGroup)return[0,0,0,0,0,0,0,1];var p=this.modelGroup.position,R=this.rotationGroup.quaternion;return[p.x,p.y,p.z,this.rotationGroup.position.z,R.x,R.y,R.z,R.w]}setView(p,R){return p!==void 0&&(p instanceof Array||p.length!==8)&&this.modelGroup&&this.rotationGroup?(this.modelGroup.position.x=p[0],this.modelGroup.position.y=p[1],this.modelGroup.position.z=p[2],this.rotationGroup.position.z=p[3],this.rotationGroup.quaternion.x=p[4],this.rotationGroup.quaternion.y=p[5],this.rotationGroup.quaternion.z=p[6],this.rotationGroup.quaternion.w=p[7],p[8]!==void 0&&(this.rotationGroup.position.x=p[8],this.rotationGroup.position.y=p[9]),this.show(R),this):this}render(p,R){this.renderer.setViewport(),this.updateClickables();var W,J,Et=this.getView();for(this.stateChangeCallback&&this.stateChangeCallback(this.getInternalState()),R||(R=this.renderer.supportedExtensions()),W=0;W<this.models.length;W++)this.models[W]&&this.models[W].globj(this.modelGroup,R);for(W=0;W<this.shapes.length;W++)this.shapes[W]&&(this.shapes[W].frame===void 0||this.viewer_frame<0||this.shapes[W].frame<0||this.shapes[W].frame==this.viewer_frame?this.shapes[W].globj(this.modelGroup,R):this.shapes[W].removegl(this.modelGroup));for(W=0;W<this.labels.length;W++)R.regen&&(this.labels[W].dispose(),this.modelGroup.remove(this.labels[W].sprite),this.labels[W].setContext(),this.modelGroup.add(this.labels[W].sprite)),this.labels[W]&&this.labels[W].frame!==void 0&&this.labels[W].frame>=0&&(this.modelGroup.remove(this.labels[W].sprite),(this.viewer_frame<0||this.labels[W].frame==this.viewer_frame)&&this.modelGroup.add(this.labels[W].sprite));for(W in this.surfaces)if(this.surfaces.hasOwnProperty(W)){var tt=this.surfaces[W];for(J=0;J<tt.length;J++)if(tt.hasOwnProperty(J)){var Dt=tt[J].geo;if(!tt[J].finished||R.regen){Dt.verticesNeedUpdate=!0,Dt.elementsNeedUpdate=!0,Dt.normalsNeedUpdate=!0,Dt.colorsNeedUpdate=!0,Dt.buffersNeedUpdate=!0,tt[J].mat.needsUpdate=!0,tt[J].done&&(tt[J].finished=!0),tt[J].lastGL&&this.modelGroup.remove(tt[J].lastGL);var It=null;if(tt[J].mat instanceof s.LineBasicMaterial?It=new s.Line(Dt,tt[J].mat):("wireframe"in tt.style&&tt.style.wireframe&&Dt.setUpWireframe(),It=new s.Mesh(Dt,tt[J].mat)),tt[J].mat.transparent&&tt[J].mat.opacity==0?It.visible=!1:It.visible=!0,tt[J].symmetries.length>1||tt[J].symmetries.length==1&&!tt[J].symmetries[0].isIdentity()){var Mt,Wt=new s.Object3D;for(Mt=0;Mt<tt[J].symmetries.length;Mt++){var Yt=It.clone();Yt.matrix=tt[J].symmetries[Mt],Yt.matrixAutoUpdate=!1,Wt.add(Yt)}tt[J].lastGL=Wt,this.modelGroup.add(Wt)}else tt[J].lastGL=It,this.modelGroup.add(It)}}}return this.setView(Et),typeof p=="function"&&p(this),this}getModelList(p){let R=[];if(p===void 0||p.model===void 0)for(let J=0;J<this.models.length;J++)this.models[J]&&R.push(this.models[J]);else{let J=p.model;Array.isArray(J)||(J=[J]);for(let Et=0;Et<J.length;Et++)if(typeof J[Et]=="number"){var W=J[Et];W<0&&(W+=this.models.length),R.push(this.models[W])}else R.push(J[Et])}return R}getAtomsFromSel(p){var R=[];p===void 0&&(p={});var W=this.getModelList(p);for(let J=0;J<W.length;J++)R=R.concat(W[J].selectedAtoms(p));return R}atomIsSelected(p,R){R===void 0&&(R={});for(var W=this.getModelList(R),J=0;J<W.length;J++)if(W[J].atomIsSelected(p,R))return!0;return!1}selectedAtoms(p){return this.getAtomsFromSel(p)}getUniqueValues(p,R){R===void 0&&(R={});var W=this.getAtomsFromSel(R),J={};for(var Et in W)W[Et].hasOwnProperty(p)&&(J[W[Et][p]]=!0);return Object.keys(J)}pdbData(p){for(var R=this.getAtomsFromSel(p),W="",J=0,Et=R.length;J<Et;++J)W+=R[J].pdbline+`
`;return W}zoom(p=2,R=0,W=!1){var J=(this.CAMERA_Z-this.rotationGroup.position.z)/p,Et=this.CAMERA_Z-J;return R>0?this.animateMotion(R,W,this.modelGroup.position,this.adjustZoomToLimits(Et),this.rotationGroup.quaternion,this.lookingAt):(this.rotationGroup.position.z=this.adjustZoomToLimits(Et),this.show()),this}translate(p,R,W=0,J=!1){var Et=p/this.WIDTH,tt=R/this.HEIGHT,Dt=new m.Vector3(0,0,-this.CAMERA_Z);this.projector.projectVector(Dt,this.camera),Dt.x-=Et,Dt.y-=tt,this.projector.unprojectVector(Dt,this.camera),Dt.z=0;var It=this.lookingAt.clone().add(Dt);return W>0?this.animateMotion(W,J,this.modelGroup.position,this.rotationGroup.position.z,this.rotationGroup.quaternion,It):(this.lookingAt=It,this.camera.lookAt(this.lookingAt),this.show()),this}translateScene(p,R,W=0,J=!1){var Et=this.screenOffsetToModel(p,R),tt=this.modelGroup.position.clone().add(Et);return W>0?this.animateMotion(W,J,this.modelGroup.position,this.rotationGroup.position.z,this.rotationGroup.quaternion,this.lookingAt):(this.modelGroup.position=tt,this.show()),this}fitSlab(p){p=p||{};var R=this.getAtomsFromSel(p),W=(0,M.getExtent)(R),J=W[1][0]-W[0][0],Et=W[1][1]-W[0][1],tt=W[1][2]-W[0][2],Dt=Math.hypot(J,Et,tt);return Dt<5&&(Dt=5),this.slabNear=-Dt/1.9,this.slabFar=Dt/2,this}center(p={},R=0,W=!1){var J,Et,tt=this.getAtomsFromSel(p),Dt=(0,M.getExtent)(tt);(0,M.isEmptyObject)(p)?(this.shapes.forEach(Ip=>{if(Ip&&Ip.boundingSphere&&Ip.boundingSphere.center){var $p=Ip.boundingSphere.center,Qp=Ip.boundingSphere.radius;Qp>0?(tt.push(new m.Vector3($p.x+Qp,$p.y,$p.z)),tt.push(new m.Vector3($p.x-Qp,$p.y,$p.z)),tt.push(new m.Vector3($p.x,$p.y+Qp,$p.z)),tt.push(new m.Vector3($p.x,$p.y-Qp,$p.z)),tt.push(new m.Vector3($p.x,$p.y,$p.z+Qp)),tt.push(new m.Vector3($p.x,$p.y,$p.z-Qp))):tt.push($p)}}),Dt=(0,M.getExtent)(tt),J=tt,Et=Dt):(J=this.getAtomsFromSel({}),Et=(0,M.getExtent)(J));var It=new m.Vector3(Dt[2][0],Dt[2][1],Dt[2][2]),Mt=Et[1][0]-Et[0][0],Wt=Et[1][1]-Et[0][1],Yt=Et[1][2]-Et[0][2],Zo=Math.hypot(Mt,Wt,Yt);Zo<5&&(Zo=5),this.slabNear=-Zo/1.9,this.slabFar=Zo/2,Mt=Dt[1][0]-Dt[0][0],Wt=Dt[1][1]-Dt[0][1],Yt=Dt[1][2]-Dt[0][2],(Zo=Math.hypot(Mt,Wt,Yt))<5&&(Zo=5);for(var wi=25,aa=0;aa<tt.length;aa++)if(tt[aa]){var Yo=It.distanceToSquared(tt[aa]);Yo>wi&&(wi=Yo)}Zo=2*Math.sqrt(wi);var Ci=It.clone().multiplyScalar(-1);return R>0?this.animateMotion(R,W,Ci,this.rotationGroup.position.z,this.rotationGroup.quaternion,this.lookingAt):(this.modelGroup.position=Ci,this.show()),this}zoomTo(p={},R=0,W=!1){let J=this.getAtomsFromSel(p),Et=(0,M.getExtent)(J),tt=Et;if((0,M.isEmptyObject)(p)){let $p=J&&J.length;if(this.shapes.forEach(Qp=>{if(Qp&&Qp.boundingSphere){if(Qp.boundingSphere.box){let U0=Qp.boundingSphere.box;J.push(new m.Vector3(U0.min.x,U0.min.y,U0.min.z)),J.push(new m.Vector3(U0.max.x,U0.max.y,U0.max.z))}else if(Qp.boundingSphere.center){var T0=Qp.boundingSphere.center,g0=Qp.boundingSphere.radius;g0>0?(J.push(new m.Vector3(T0.x+g0,T0.y,T0.z)),J.push(new m.Vector3(T0.x-g0,T0.y,T0.z)),J.push(new m.Vector3(T0.x,T0.y+g0,T0.z)),J.push(new m.Vector3(T0.x,T0.y-g0,T0.z)),J.push(new m.Vector3(T0.x,T0.y,T0.z+g0)),J.push(new m.Vector3(T0.x,T0.y,T0.z-g0))):J.push(T0)}}}),tt=(0,M.getExtent)(J),!$p)for(let Qp=0;Qp<3;Qp++)Et[2][Qp]=(tt[0][Qp]+tt[1][Qp])/2}else{let $p=this.getAtomsFromSel({});tt=(0,M.getExtent)($p)}var Dt=new m.Vector3(Et[2][0],Et[2][1],Et[2][2]),It=tt[1][0]-tt[0][0],Mt=tt[1][1]-tt[0][1],Wt=tt[1][2]-tt[0][2],Yt=Math.hypot(It,Mt,Wt);Yt<5&&(Yt=5),this.slabNear=-Yt/1.9,this.slabFar=Yt/2,Object.keys(p).length===0&&(this.slabNear=Math.min(2*-Yt,-50),this.slabFar=Math.max(2*Yt,50));var Zo=this.config.minimumZoomToDistance||5;It=Et[1][0]-Et[0][0],Mt=Et[1][1]-Et[0][1],Wt=Et[1][2]-Et[0][2],(Yt=Math.hypot(It,Mt,Wt))<Zo&&(Yt=Zo);for(var wi=Zo*Zo,aa=0;aa<J.length;aa++)if(J[aa]){var Yo=Dt.distanceToSquared(J[aa]);Yo>wi&&(wi=Yo)}Yt=2*Math.sqrt(wi);var Ci=Dt.clone().multiplyScalar(-1),Ip=-(.5*Yt/Math.tan(Math.PI/180*this.camera.fov/2)-this.CAMERA_Z);return Ip=this.adjustZoomToLimits(Ip),R>0?this.animateMotion(R,W,Ci,Ip,this.rotationGroup.quaternion,this.lookingAt):(this.modelGroup.position=Ci,this.rotationGroup.position.z=Ip,this.show()),this}setSlab(p,R){this.slabNear=p,this.slabFar=R}getSlab(){return{near:this.slabNear,far:this.slabFar}}addLabel(p,R={},W,J=!1){if(W){var Et=(0,M.getExtent)(this.getAtomsFromSel(W));R.position={x:Et[2][0],y:Et[2][1],z:Et[2][2]}}var tt=new Bm(p,R);return tt.setContext(),this.modelGroup.add(tt.sprite),this.labels.push(tt),J||this.show(),tt}addResLabels(p,R,W=!1){let J=this.labels.length;return this.applyToModels("addResLabels",p,R,W),this.show(),this.labels.slice(J)}addPropertyLabels(p,R,W){return this.applyToModels("addPropertyLabels",p,R,W),this.show(),this}removeLabel(p){for(var R=0;R<this.labels.length;R++)if(this.labels[R]==p){this.labels.splice(R,1),p.dispose(),this.modelGroup.remove(p.sprite);break}return this.show(),this}removeAllLabels(){for(var p=0;p<this.labels.length;p++)this.labels[p]&&this.labels[p].sprite&&this.modelGroup.remove(this.labels[p].sprite);return this.labels.splice(0,this.labels.length),this.show(),this}hideAllLabels(){for(var p=0;p<this.labels.length;p++)this.labels[p]&&this.labels[p].hide();return this.show(),this}showAllLabels(){for(var p=0;p<this.labels.length;p++)this.labels[p]&&this.labels[p].show();return this.show(),this}setLabelStyle(p,R){return this.modelGroup.remove(p.sprite),p.dispose(),p.stylespec=R,p.setContext(),this.modelGroup.add(p.sprite),this.show(),p}setLabelText(p,R){return this.modelGroup.remove(p.sprite),p.dispose(),p.text=R,p.setContext(),this.modelGroup.add(p.sprite),this.show(),p}addShape(p){var R=new s0(p=p||{});return R.shapePosition=this.shapes.length,this.shapes.push(R),R}removeShape(p){if(!p)return this;for(p.removegl(this.modelGroup),delete this.shapes[p.shapePosition];this.shapes.length>0&&this.shapes[this.shapes.length-1]===void 0;)this.shapes.pop();return this}removeAllShapes(){for(var p=0;p<this.shapes.length;p++){var R=this.shapes[p];R&&R.removegl(this.modelGroup)}return this.shapes.splice(0,this.shapes.length),this}getSelectionCenter(p){if(p.hasOwnProperty("x")&&p.hasOwnProperty("y")&&p.hasOwnProperty("z"))return p;var R=this.getAtomsFromSel(p);if(R.length==0)return{x:0,y:0,z:0};var W=(0,M.getExtent)(R);return{x:W[0][0]+(W[1][0]-W[0][0])/2,y:W[0][1]+(W[1][1]-W[0][1])/2,z:W[0][2]+(W[1][2]-W[0][2])/2}}addSphere(p){(p=p||{}).center=this.getSelectionCenter(p.center);var R=new s0(p);return R.shapePosition=this.shapes.length,R.addSphere(p),this.shapes.push(R),R.finalize(),R}addBox(p={}){p.corner!=null&&(p.corner=this.getSelectionCenter(p.corner)),p.center!=null&&(p.center=this.getSelectionCenter(p.center));var R=new s0(p);return R.shapePosition=this.shapes.length,R.addBox(p),this.shapes.push(R),R.finalize(),R}addArrow(p={}){p.start=this.getSelectionCenter(p.start),p.end=this.getSelectionCenter(p.end);var R=new s0(p);return R.shapePosition=this.shapes.length,R.addArrow(p),this.shapes.push(R),R.finalize(),R}addCylinder(p={}){p.start=this.getSelectionCenter(p.start),p.end=this.getSelectionCenter(p.end);var R=new s0(p);return R.shapePosition=this.shapes.length,p.dashed?R.addDashedCylinder(p):R.addCylinder(p),this.shapes.push(R),R.finalize(),R}addCurve(p={}){var R=new s0(p);return R.shapePosition=this.shapes.length,R.addCurve(p),this.shapes.push(R),R.finalize(),R}addLine(p={}){p.start=this.getSelectionCenter(p.start),p.end=this.getSelectionCenter(p.end),p.wireframe=!0;var R=new s0(p);return R.shapePosition=this.shapes.length,p.dashed?R=this.addLineDashed(p,R):R.addLine(p),this.shapes.push(R),R.finalize(),R}addUnitCell(p,R){p=this.getModel(p),(R=R||{alabel:"a",blabel:"b",clabel:"c"}).box=R.box||{},R.astyle=R.astyle||{color:"red",radius:.1,midpos:-1},R.bstyle=R.bstyle||{color:"green",radius:.1,midpos:-1},R.cstyle=R.cstyle||{color:"blue",radius:.1,midpos:-1},R.alabelstyle=R.alabelstyle||{fontColor:"red",showBackground:!1,alignment:"center",inFront:!1},R.blabelstyle=R.blabelstyle||{fontColor:"green",showBackground:!1,alignment:"center",inFront:!1},R.clabelstyle=R.clabelstyle||{fontColor:"blue",showBackground:!1,alignment:"center",inFront:!1},p.unitCellObjects&&this.removeUnitCell(p),p.unitCellObjects={shapes:[],labels:[]};var W=p.getCrystData(),J=null;if(W){if(W.matrix)J=W.matrix;else{var Et,tt,Dt,It=W.a,Mt=W.b,Wt=W.c,Yt=W.alpha,Zo=W.beta,wi=W.gamma;Yt=Yt*Math.PI/180,Zo=Zo*Math.PI/180,wi=wi*Math.PI/180,Et=Math.cos(Zo),tt=(Math.cos(Yt)-Math.cos(Zo)*Math.cos(wi))/Math.sin(wi),Dt=Math.sqrt(Math.max(0,1-Et*Et-tt*tt)),J=new m.Matrix3(It,Mt*Math.cos(wi),Wt*Et,0,Mt*Math.sin(wi),Wt*tt,0,0,Wt*Dt)}var aa=[new m.Vector3(0,0,0),new m.Vector3(1,0,0),new m.Vector3(0,1,0),new m.Vector3(0,0,1),new m.Vector3(1,1,0),new m.Vector3(0,1,1),new m.Vector3(1,0,1),new m.Vector3(1,1,1)];if(W.matrix4)for(let Ci=0;Ci<aa.length;Ci++)W.size&&aa[Ci].multiplyVectors(aa[Ci],W.size),aa[Ci]=aa[Ci].applyMatrix4(W.matrix4);else for(let Ci=0;Ci<aa.length;Ci++)aa[Ci]=aa[Ci].applyMatrix3(J);if(R.box&&!R.box.hidden){R.box.wireframe=!0;var Yo=new s0(R.box);Yo.shapePosition=this.shapes.length,Yo.addLine({start:aa[0],end:aa[1]}),Yo.addLine({start:aa[0],end:aa[2]}),Yo.addLine({start:aa[1],end:aa[4]}),Yo.addLine({start:aa[2],end:aa[4]}),Yo.addLine({start:aa[0],end:aa[3]}),Yo.addLine({start:aa[3],end:aa[5]}),Yo.addLine({start:aa[2],end:aa[5]}),Yo.addLine({start:aa[1],end:aa[6]}),Yo.addLine({start:aa[4],end:aa[7]}),Yo.addLine({start:aa[6],end:aa[7]}),Yo.addLine({start:aa[3],end:aa[6]}),Yo.addLine({start:aa[5],end:aa[7]}),this.shapes.push(Yo),p.unitCellObjects.shapes.push(Yo),Yo.finalize()}if(!R.astyle.hidden){R.astyle.start=aa[0],R.astyle.end=aa[1];let Ci=this.addArrow(R.astyle);p.unitCellObjects.shapes.push(Ci)}if(!R.bstyle.hidden){R.bstyle.start=aa[0],R.bstyle.end=aa[2];let Ci=this.addArrow(R.bstyle);p.unitCellObjects.shapes.push(Ci)}if(!R.cstyle.hidden){R.cstyle.start=aa[0],R.cstyle.end=aa[3];let Ci=this.addArrow(R.cstyle);p.unitCellObjects.shapes.push(Ci)}if(R.alabel){R.alabelstyle.position=aa[1];let Ci=this.addLabel(R.alabel,R.alabelstyle);p.unitCellObjects.labels.push(Ci)}if(R.blabel){R.blabelstyle.position=aa[2];let Ci=this.addLabel(R.blabel,R.blabelstyle);p.unitCellObjects.labels.push(Ci)}if(R.clabel){R.clabelstyle.position=aa[3];let Ci=this.addLabel(R.clabel,R.clabelstyle);p.unitCellObjects.labels.push(Ci)}}}removeUnitCell(p){if((p=this.getModel(p)).unitCellObjects){let R=this;p.unitCellObjects.shapes.forEach(function(W){R.removeShape(W)}),p.unitCellObjects.labels.forEach(function(W){R.removeLabel(W)})}delete p.unitCellObjects}replicateUnitCell(p=3,R=p,W=R,J,Et,tt){let Dt=(J=this.getModel(J)).getCrystData();if(Dt){const It=J.selectedAtoms({}),Mt=Dt.matrix;let Wt=function(Zo){return Zo%2==0?-Zo/2:Math.ceil(Zo/2)};p<=1&&R<=1&&W<=1&&(tt=!0,p=R=W=3);let Yt=function(Zo,wi,aa){return!1};if(tt){const Zo=new m.Matrix3().getInverse3(Mt);Yt=function(wi,aa,Yo){let Ci=new m.Vector3(wi,aa,Yo).applyMatrix3(Zo);return!(Ci.x>-1e-4&&Ci.x<1.0001&&Ci.y>-1e-4&&Ci.y<1.0001&&Ci.z>-1e-4&&Ci.z<1.0001)}}for(let Zo=0;Zo<p;Zo++)for(let wi=0;wi<R;wi++)for(let aa=0;aa<W;aa++){if(Zo==0&&wi==0&&aa==0)continue;let Yo=new m.Vector3(Wt(Zo),Wt(wi),Wt(aa));Yo.applyMatrix3(Mt);let Ci=[];for(let Ip=0;Ip<It.length;Ip++){let $p=It[Ip].x+Yo.x,Qp=It[Ip].y+Yo.y,T0=It[Ip].z+Yo.z;if(Yt($p,Qp,T0))continue;let g0={};for(let U0 in It[Ip])g0[U0]=It[Ip][U0];g0.x=$p,g0.y=Qp,g0.z=T0,Ci.push(g0)}J.addAtoms(Ci)}Et&&J.assignBonds()}}addLineDashed(p,R){var W,J;p.dashLength=p.dashLength||.5,p.gapLength=p.gapLength||.5,W=p.start?new m.Vector3(p.start.x||0,p.start.y||0,p.start.z||0):new m.Vector3(0,0,0),J=p.end?new m.Vector3(p.end.x,p.end.y||0,p.end.z||0):new m.Vector3(0,0,0);var Et,tt,Dt,It=new m.Vector3,Mt=new m.Vector3,Wt=new m.Vector3,Yt=W.clone(),Zo=0;for(It.subVectors(J,W),Et=It.length(),It.normalize(),Mt=It.clone(),Wt=It.clone(),Mt.multiplyScalar(p.dashLength),Wt.multiplyScalar(p.gapLength),tt=Mt.length(),Dt=Wt.length();Zo<Et;){if(Zo+tt>Et){p.start=W,p.end=J,R.addLine(p);break}Yt.addVectors(W,Mt),p.start=W,p.end=Yt,R.addLine(p),W=Yt.clone(),Zo+=tt,Yt.addVectors(W,Wt),W=Yt.clone(),Zo+=Dt}return R.finalize(),R}addCustom(p){var R=new s0(p=p||{});return R.shapePosition=this.shapes.length,R.addCustom(p),this.shapes.push(R),R.finalize(),R}addVolumetricData(p,R,W={}){var J=new t0.VolumeData(p,R);return W.hasOwnProperty("transferfn")?this.addVolumetricRender(J,W):this.addIsosurface(J,W)}addIsosurface(p,R={},W){var J=new s0(R);return J.shapePosition=this.shapes.length,J.addIsosurface(p,R,W,this),this.shapes.push(J),J}addVolumetricRender(p,R){var W=new Nm(p,R=R||{},this);return W.shapePosition=this.shapes.length,this.shapes.push(W),W}hasVolumetricRender(){return this.renderer.supportsVolumetric()}enableFog(p){if(p){this.scene.fog=new s.Fog(this.bgColor,100,200),this.config.disableFog=!1;const R=p;R.fogStart==null?this.fogStart=.4:this.fogStart=R.fogStart,R.fogEnd==null?this.fogEnd=1:this.fogEnd=R.fogEnd}else this.config.disableFog=!0,this.show()}setFrame(p){this.viewer_frame=p;let R=this;return new Promise(function(W){var J=R.models.map(function(Et){return Et.setFrame(p)});Promise.all(J).then(function(){W()})})}getFrame(){return this.viewer_frame}getNumFrames(){var p=0;for(let R=0;R<this.models.length;R++)this.models[R].getNumFrames()>p&&(p=this.models[R].getNumFrames());for(let R=0;R<this.shapes.length;R++)this.shapes[R].frame&&this.shapes[R].frame>=p&&(p=this.shapes[R].frame+1);for(let R=0;R<this.labels.length;R++)this.labels[R].frame&&this.labels[R].frame>=p&&(p=this.labels[R].frame+1);return p}getNextModelId(){return this.models.length}animate(p){this.incAnim();var R=100,W="forward",J=1/0;(p=p||{}).interval&&(R=p.interval),p.loop&&(W=p.loop),p.reps&&(J=p.reps);var Et=this.getNumFrames(),tt=this,Dt=0;p.startFrame&&(Dt=p.startFrame%Et);var It=1;p.step&&(J/=It=p.step);var Mt,Wt,Yt=0,Zo=Et*J,wi=new Date,aa=function(Yo){wi=new Date,Yo=="forward"?tt.setFrame(Dt).then(function(){Dt=(Dt+It)%Et,Mt()}):Yo=="backward"?tt.setFrame(Et-1-Dt).then(function(){Dt=(Dt+It)%Et,Mt()}):tt.setFrame(Dt).then(function(){It*=(Dt+=It)%(Et-1)==0?-1:1,Mt()})};return Mt=function(){if(tt.render(),tt.getCanvas().isConnected)if(++Yt>=Zo||!tt.isAnimated())Wt.cancel(),tt.animationTimers.delete(Wt),tt.decAnim();else{var Yo=R-(new Date().getTime()-wi.getTime());Yo=Yo>0?Yo:0,Wt.cancel(),tt.animationTimers.delete(Wt),Wt=new M.PausableTimer(aa,Yo,W),tt.animationTimers.add(Wt)}else tt.stopAnimate()},Wt=new M.PausableTimer(aa,0,W),this.animationTimers.add(Wt),this}stopAnimate(){return this.animated=0,this.animationTimers.forEach(function(p){p.cancel()}),this.animationTimers=new Set,this}pauseAnimate(){return this.animationTimers.forEach(function(p){p.pause()}),this}resumeAnimate(){return this.animationTimers.forEach(function(p){p.resume()}),this}isAnimated(){return this.animated>0}getModelOpt(p){return p&&!p.defaultcolors?(p.defaultcolors=this.defaultcolors,p.cartoonQuality=p.cartoonQuality||this.config.cartoonQuality):p===void 0&&(p={defaultcolors:this.defaultcolors,cartoonQuality:this.config.cartoonQuality}),p}addModel(p,R="",W){W=this.getModelOpt(W);var J=new wg(this.models.length,W,this);return J.addMolData(p,R,W),this.models.push(J),J}addModels(p,R,W){(W=this.getModelOpt(W)).multimodel=!0,W.frames=!0;for(var J=wg.parseMolData(p,R,W),Et=0;Et<J.length;Et++){var tt=new wg(this.models.length,W,this);tt.setAtomDefaults(J[Et]),tt.addFrame(J[Et]),tt.setFrame(0),J.modelData&&tt.setModelData(J.modelData[Et]),tt.setDontDuplicateAtoms(!W.duplicateAssemblyAtoms),this.models.push(tt)}return this.models}addModelsAsFrames(p,R,W){(W=this.getModelOpt(W)).multimodel=!0,W.frames=!0;var J=new wg(this.models.length,W,this);return J.addMolData(p,R,W),this.models.push(J),J}addAsOneMolecule(p,R,W){(W=this.getModelOpt(W)).multimodel=!0,W.onemol=!0;var J=new wg(this.models.length,W,this);return J.addMolData(p,R,W),this.models.push(J),J}removeModel(p){if(p=this.getModel(p)){for(p.removegl(this.modelGroup),delete this.models[p.getID()];this.models.length>0&&this.models[this.models.length-1]===void 0;)this.models.pop();return this}}removeAllModels(){for(var p=0;p<this.models.length;p++){var R=this.models[p];R&&R.removegl(this.modelGroup)}return this.models.splice(0,this.models.length),this}exportJSON(p,R){var W={};return W.m=R===void 0?this.models.map(function(J){return J.toCDObject(p)}):[this.models[R].toCDObject()],JSON.stringify(W)}exportVRML(){var p=this.modelGroup;this.applyToModels("removegl",this.modelGroup),this.modelGroup=new s.Object3D,this.render(null,{supportsImposters:!1,supportsAIA:!1,regen:!0});var R=`#VRML V2.0 utf8
`+this.modelGroup.vrml()+`
`;return this.applyToModels("removegl",this.modelGroup),this.modelGroup=p,R}createModelFrom(p,R=!1){for(var W=new wg(this.models.length,this.defaultcolors,this),J=0;J<this.models.length;J++)if(this.models[J]){var Et=this.models[J].selectedAtoms(p);W.addAtoms(Et),R&&this.models[J].removeAtoms(Et)}return this.models.push(W),W}applyToModels(p,R,W,J,Et,tt,Dt){for(var It=this.getModelList(R),Mt=0;Mt<It.length;Mt++)It[Mt][p](R,W,J,Et,tt,Dt)}setStyle(p,R){return R===void 0&&(R=p,p={}),this.applyToModels("setStyle",p,R,!1),this}addStyle(p,R){return R===void 0&&(R=p,p={}),this.applyToModels("setStyle",p,R,!0),this}setClickable(p,R,W){return this.applyToModels("setClickable",p,R,W),this}setHoverable(p,R,W,J){return this.applyToModels("setHoverable",p,R,W,J),this}enableContextMenu(p,R){return this.applyToModels("enableContextMenu",p,R),this}vibrate(p,R,W,J){return this.applyToModels("vibrate",p,R,W,J),this}setColorByProperty(p,R,W,J){return this.applyToModels("setColorByProperty",p,R,W,J),this}setColorByElement(p,R){return this.applyToModels("setColorByElement",p,R),this}static getAtomsWithin(p,R){var W=[];for(let Et=0;Et<p.length;Et++){var J=p[Et];J!==void 0&&(J.x<R[0][0]||J.x>R[1][0]||J.y<R[0][1]||J.y>R[1][1]||J.z<R[0][2]||J.z>R[1][2]||W.push(J))}return W}static volume(p){return(p[1][0]-p[0][0])*(p[1][1]-p[0][1])*(p[1][2]-p[0][2])}carveUpExtent(p,R,W){let J=[],Et={};for(let Wt=0,Yt=R.length;Wt<Yt;Wt++)Et[R[Wt].index]=Wt;let tt=function(Wt){let Yt=[];for(let Zo=0,wi=Wt.length;Zo<wi;Zo++)Wt[Zo].index in Et&&Yt.push(Et[Wt[Zo].index]);return Yt},Dt=function(Wt){let Yt=[];return Yt[0]=[Wt[0][0],Wt[0][1],Wt[0][2]],Yt[1]=[Wt[1][0],Wt[1][1],Wt[1][2]],Yt},It=function(Wt){if(L1.volume(Wt)<L1.maxVolume)return[Wt];var Yt,Zo=Wt[1][0]-Wt[0][0],wi=Wt[1][1]-Wt[0][1],aa=Wt[1][2]-Wt[0][2];Yt=Zo>wi&&Zo>aa?0:wi>Zo&&wi>aa?1:2;var Yo=Dt(Wt),Ci=Dt(Wt),Ip=(Wt[1][Yt]-Wt[0][Yt])/2+Wt[0][Yt];Yo[1][Yt]=Ip,Ci[0][Yt]=Ip;var $p=It(Yo),Qp=It(Ci);return $p.concat(Qp)},Mt=It(p);for(let Wt=0,Yt=Mt.length;Wt<Yt;Wt++){let Zo=Dt(Mt[Wt]);Zo[0][0]-=6,Zo[0][1]-=6,Zo[0][2]-=6,Zo[1][0]+=6,Zo[1][1]+=6,Zo[1][2]+=6;let wi=L1.getAtomsWithin(R,Zo),aa=L1.getAtomsWithin(W,Mt[Wt]);J.push({extent:Mt[Wt],atoms:tt(wi),toshow:tt(aa)})}return J}static generateSurfaceMesh(p,R,W){var J=new s.Geometry(!0),Et=J.updateGeoGroup(0),tt=[];for(let tm=0,G0=p.length;tm<G0;tm++){var Dt=p[tm];Dt&&(Dt.surfaceColor!==void 0?tt[tm]=Dt.surfaceColor:Dt.color&&(tt[tm]=b.CC.color(Dt.color)))}var It=Et.vertexArray,Mt=R.vertices;for(let tm=0,G0=Mt.length;tm<G0;tm++){let Pm=3*Et.vertices;It[Pm]=Mt[tm].x,It[Pm+1]=Mt[tm].y,It[Pm+2]=Mt[tm].z,Et.vertices++}var Wt=Et.colorArray;let Yt=Et.atomArray;if(W.voldata&&W.volscheme){var Zo=W.volscheme,wi=W.voldata,aa=Zo.range()||[-1,1];for(let tm=0,G0=Mt.length;tm<G0;tm++){let Pm=Mt[tm].atomid,km=wi.getVal(Mt[tm].x,Mt[tm].y,Mt[tm].z),i1=b.CC.color(Zo.valueToHex(km,aa)),Qm=3*tm;Wt[Qm]=i1.r,Wt[Qm+1]=i1.g,Wt[Qm+2]=i1.b,Yt[tm]=p[Pm]}}else if(tt.length>0)for(let tm=0,G0=Mt.length;tm<G0;tm++){let Pm=Mt[tm].atomid,km=3*tm;Wt[km]=tt[Pm].r,Wt[km+1]=tt[Pm].g,Wt[km+2]=tt[Pm].b,Yt[tm]=p[Pm]}var Yo=R.faces;Et.faceidx=Yo.length,J.initTypedArrays();var Ci,Ip,$p,Qp,T0=Et.vertexArray,g0=Et.normalArray;for(let tm=0,G0=Yo.length;tm<G0;tm+=3){var U0=3*Yo[tm],Y0=3*Yo[tm+1],Q0=3*Yo[tm+2];Ci=new m.Vector3(T0[U0],T0[U0+1],T0[U0+2]),Ip=new m.Vector3(T0[Y0],T0[Y0+1],T0[Y0+2]),($p=new m.Vector3(T0[Q0],T0[Q0+1],T0[Q0+2])).subVectors($p,Ip),Ci.subVectors(Ci,Ip),$p.cross(Ci),(Qp=$p).normalize(),g0[U0]+=Qp.x,g0[Y0]+=Qp.x,g0[Q0]+=Qp.x,g0[U0+1]+=Qp.y,g0[Y0+1]+=Qp.y,g0[Q0+1]+=Qp.y,g0[U0+2]+=Qp.z,g0[Y0+2]+=Qp.z,g0[Q0+2]+=Qp.z}return Et.faceArray=new Uint16Array(Yo),new s.Mesh(J,W)}static generateMeshSyncHelper(p,R,W,J,Et,tt){var Dt=new Fn;return Dt.initparm(R,p!==1,tt),Dt.fillvoxels(Et,W),Dt.buildboundary(),p!=Ov.SES&&p!=Ov.MS||(Dt.fastdistancemap(),Dt.boundingatom(!1),Dt.fillvoxelswaals(Et,W)),Dt.marchingcube(p),Dt.getFacesAndVertices(J)}static getMatWithStyle(p){let R=null;for(var W in R=p.onesided?new s.MeshLambertMaterial:new s.MeshDoubleLambertMaterial,R.vertexColors=s.Coloring.VertexColors,p)W==="color"||W==="map"||p.hasOwnProperty(W)&&(R[W]=p[W]);return p.opacity!==void 0&&(p.opacity===1?R.transparent=!1:R.transparent=!0),p.wireframe!==void 0&&(R.wireframe=p.wireframe),R}addMesh(p){let R={geo:p.geometry,mat:p.material,done:!0,finished:!1};var W=this.nextSurfID();return this.surfaces[W]=new A1([R]),W}static shallowCopy(p){var R=[];let W=p.length;for(let J=0;J<W;J++)R[J]=(0,M.extend)({},p[J]);return R}addSurface(p,R={},W={},J,Et,tt){let Dt=this.nextSurfID(),It=null,Mt=this,Wt=Ov.VDW;typeof p=="string"?L1.surfaceTypeMap[p.toUpperCase()]!==void 0?Wt=L1.surfaceTypeMap[p]:console.log("Surface type : "+p+" is not recognized"):typeof p=="number"&&(Wt=p);var Yt=null,Zo=null,wi=L1.shallowCopy(this.getAtomsFromSel(W));Yt=J?L1.shallowCopy(this.getAtomsFromSel(J)):wi,(0,M.adjustVolumeStyle)(R);var aa,Yo=!1;for(aa=0;aa<this.models.length;aa++)if(this.models[aa]){var Ci=this.models[aa].getSymmetries();if(Ci.length>1||Ci.length==1&&!Ci[0].isIdentity()){Yo=!0;break}}var Ip=function(Y0,Q0,tm){var G0;Zo=Et?L1.shallowCopy(Mt.getAtomsFromSel(Et)):tm;var Pm=(0,M.getExtent)(tm,!0);if(R.map&&R.map.prop){var km=R.map.prop;let s1=(0,E.getGradient)(R.map.scheme||R.map.gradient||new E.Gradient.RWB),H1=s1.range();H1||(H1=(0,M.getPropertyRange)(tm,km)),R.colorscheme={prop:km,gradient:s1}}for(let s1=0,H1=Q0.length;s1<H1;s1++)(G0=Q0[s1]).surfaceColor=(0,M.getColorFromStyle)(G0,R);var i1=L1.volume(Pm),Qm=Mt.carveUpExtent(Pm,Q0,tm);if(Zo&&Zo.length&&Zo.length>0){var _1=(0,M.getExtent)(Zo,!0);Qm.sort(function(s1,H1){var q1=function(u1,eg){var kg=u1.extent,J1=kg[1][0]-kg[0][0],b1=kg[1][1]-kg[0][1],Ug=kg[1][2]-kg[0][2],gg=J1-eg[2][0];gg*=gg;var Pg=b1-eg[2][1];Pg*=Pg;var vg=Ug-eg[2][2];return gg+Pg+(vg*=vg)};return q1(s1,_1)-q1(H1,_1)})}var C1=[];for(let s1=0,H1=Q0.length;s1<H1;s1++)G0=Q0[s1],C1[s1]={x:G0.x,y:G0.y,z:G0.z,serial:s1,elem:G0.elem};var a1=!!Uv;if(typeof $3Dmol<"u"&&$3Dmol.SurfaceWorker!==void 0||(console.log("$3Dmol.SurfaceWorker is not defined, using synchronous surface generation."),a1=!0),a1){var I1=function(s1){return new Promise(function(H1){for(var q1=L1.generateMeshSyncHelper(Wt,Qm[s1].extent,Qm[s1].atoms,Qm[s1].toshow,C1,i1),u1=J0({vertexArr:q1.vertices,faceArr:q1.faces}),eg=0,kg=u1.length;eg<kg;eg++){q1={vertices:u1[eg].vertexArr,faces:u1[eg].faceArr};var J1=L1.generateSurfaceMesh(Q0,q1,It);(0,M.mergeGeos)(Y0.geo,J1)}Mt.render(),H1()})},Fm=[];for(let s1=0;s1<Qm.length;s1++)Fm.push(I1(s1));return Promise.all(Fm).then(function(){return Y0.done=!0,Mt.render(),Promise.resolve(Dt)})}var Km=[];Wt<0&&(Wt=0);for(let s1=0,H1=L1.numWorkers;s1<H1;s1++){var W1=new Worker($3Dmol.SurfaceWorker);Km.push(W1),W1.postMessage({type:-1,atoms:C1,volume:i1})}return new Promise(function(s1,H1){var q1=0,u1=function(){Km&&Km.length&&Km.forEach(function(b1){b1&&b1.terminate&&b1.terminate()})},eg=function(b1){for(var Ug=J0({vertexArr:b1.data.vertices,faceArr:b1.data.faces}),gg=0,Pg=Ug.length;gg<Pg;gg++){var vg={vertices:Ug[gg].vertexArr,faces:Ug[gg].faceArr},jg=L1.generateSurfaceMesh(Q0,vg,It);(0,M.mergeGeos)(Y0.geo,jg)}Mt.render(),++q1==Qm.length&&(Y0.done=!0,u1(),s1(Dt))},kg=function(b1){u1(),console.log(b1.message+" ("+b1.filename+":"+b1.lineno+")"),H1(b1)};for(let b1=0;b1<Qm.length;b1++){var J1=Km[b1%Km.length];J1.onmessage=eg,J1.onerror=kg,J1.postMessage({type:Wt,expandedExtent:Qm[b1].extent,extendedAtoms:Qm[b1].atoms,atomsToShow:Qm[b1].toshow})}})};R=R||{},It=L1.getMatWithStyle(R);let $p=new A1([]);$p.style=R,$p.atomsel=W,$p.allsel=J,$p.focus=Et;var Qp=null;if(Yo){var T0={},g0={};for(aa=0;aa<this.models.length;aa++)T0[aa]=[],g0[aa]=[];for(aa=0;aa<Yt.length;aa++)T0[Yt[aa].model].push(Yt[aa]);for(aa=0;aa<wi.length;aa++)g0[wi[aa].model].push(wi[aa]);var U0=[];for(aa=0;aa<this.models.length;aa++)g0[aa].length>0&&($p.push({geo:new s.Geometry(!0),mat:It,done:!1,finished:!1,symmetries:this.models[aa].getSymmetries()}),U0.push(Ip($p[$p.length-1],T0[aa],g0[aa])));Qp=Promise.all(U0)}else $p.push({geo:new s.Geometry(!0),mat:It,done:!1,finished:!1,symmetries:[new m.Matrix4]}),Qp=Ip($p[$p.length-1],Yt,wi);return this.surfaces[Dt]=$p,Qp.surfid=Dt,tt&&typeof tt=="function"?(Qp.then(function(Y0){tt(Y0)}),Dt):Qp}setSurfaceMaterialStyle(p,R){if((0,M.adjustVolumeStyle)(R),this.surfaces[p]){var W=this.surfaces[p];for(let Et=0;Et<W.length;Et++){var J=W[Et].mat=L1.getMatWithStyle(R);if(W[Et].mat.side=s.FrontSide,R.wireframe&&W[Et].geo.setUpWireframe(),R.color){W[Et].mat.color=b.CC.color(R.color),W[Et].geo.colorsNeedUpdate=!0;const tt=b.CC.color(R.color);W[Et].geo.setColor(tt)}else if(J.voldata&&J.volscheme){const tt=J.volscheme,Dt=J.voldata,It=b.CC,Mt=tt.range()||[-1,1];W[Et].geo.setColors(function(Wt,Yt,Zo){let wi=Dt.getVal(Wt,Yt,Zo);return It.color(tt.valueToHex(wi,Mt))})}else{W[Et].geo.colorsNeedUpdate=!0;for(let tt of W[Et].geo.geometryGroups)for(let Dt=0;Dt<tt.vertices;Dt++){let It=(0,M.getColorFromStyle)(tt.atomArray[Dt],R),Mt=3*Dt;tt.colorArray[Mt]=It.r,tt.colorArray[Mt+1]=It.g,tt.colorArray[Mt+2]=It.b}}W[Et].finished=!1}}return this}getSurface(p){return this.surfaces[p]}removeSurface(p){for(var R=this.surfaces[p],W=0;W<R.length;W++)R[W]&&R[W].lastGL&&(R[W].geo!==void 0&&R[W].geo.dispose(),R[W].mat!==void 0&&R[W].mat.dispose(),this.modelGroup.remove(R[W].lastGL));return delete this.surfaces[p],this.show(),this}removeAllSurfaces(){for(var p in this.surfaces)if(this.surfaces.hasOwnProperty(p)){for(var R=this.surfaces[p],W=0;W<R.length;W++)R[W]&&R[W].lastGL&&(R[W].geo!==void 0&&R[W].geo.dispose(),R[W].mat!==void 0&&R[W].mat.dispose(),this.modelGroup.remove(R[W].lastGL));delete this.surfaces[p]}return this.show(),this}jmolMoveTo(){var p=this.modelGroup.position,R="center { "+-p.x+" "+-p.y+" "+-p.z+" }; ",W=this.rotationGroup.quaternion;return R+="moveto .5 quaternion { "+W.x+" "+W.y+" "+W.z+" "+W.w+" };"}clear(){return this.removeAllSurfaces(),this.removeAllModels(),this.removeAllLabels(),this.removeAllShapes(),this.show(),this}mapAtomProperties(p,R){R=R||{};var W=this.getAtomsFromSel(R);if(typeof p=="function")for(let tt=0,Dt=W.length;tt<Dt;tt++)p(W[tt]);else for(let tt=0,Dt=W.length;tt<Dt;tt++){var J=W[tt];for(let It=0,Mt=p.length;It<Mt;It++){let Wt=p[It];if(Wt.props)for(var Et in Wt.props)Wt.props.hasOwnProperty(Et)&&this.atomIsSelected(J,Wt)&&(J.properties||(J.properties={}),J.properties[Et]=Wt.props[Et])}}return this}linkViewer(p){return this.linkedViewers.push(p),this}getPerceivedDistance(){return this.CAMERA_Z-this.rotationGroup.position.z}setPerceivedDistance(p){this.rotationGroup.position.z=this.CAMERA_Z-p}setAutoEyeSeparation(p,R){var W=this.getPerceivedDistance();return R||(R=5),p||this.camera.position.x>0?this.camera.position.x=W*Math.tan(Math.PI/180*R):this.camera.position.x=-W*Math.tan(Math.PI/180*R),this.camera.lookAt(new m.Vector3(0,0,this.rotationGroup.position.z)),this.camera.position.x}setDefaultCartoonQuality(p){this.config.cartoonQuality=p}}function K1(o0,p){if(o0=(0,M.getElement)(o0)){p=p||{};try{return new L1(o0,p)}catch(R){throw"error creating viewer: "+R}}}function Tg(o0,p={},R={}){if(o0=(0,M.getElement)(o0)){var W=[],J=document.createElement("canvas");R.rows=p.rows,R.cols=p.cols,R.control_all=p.control_all!=null&&p.control_all,o0.appendChild(J);try{for(var Et=0;Et<p.rows;Et++){for(var tt=[],Dt=0;Dt<p.cols;Dt++){R.row=Et,R.col=Dt,R.canvas=J,R.viewers=W,R.control_all=p.control_all;var It=K1(o0,(0,M.extend)({},R));tt.push(It)}W.unshift(tt)}}catch(Mt){throw"error creating viewer grid: "+Mt}return W}}function Lg(o0){var p=this;if(o0=(0,M.getElement)(o0)){var R=Tg(o0,{rows:1,cols:2,control_all:!0});this.glviewer1=R[0][0],this.glviewer2=R[0][1],this.glviewer1.setAutoEyeSeparation(!1),this.glviewer2.setAutoEyeSeparation(!0),this.glviewer1.linkViewer(this.glviewer2),this.glviewer2.linkViewer(this.glviewer1);for(var W=Object.getOwnPropertyNames(this.glviewer1.__proto__).filter(function(Et){return typeof p.glviewer1[Et]=="function"}),J=0;J<W.length;J++)this[W[J]]=(function(Et){return function(){return[this.glviewer1[Et].apply(this.glviewer1,arguments),this.glviewer2[Et].apply(this.glviewer2,arguments)]}})(W[J]);this.setCoordinates=function(Et,tt,Dt){for(var It=0;It<Et.length;It++)Et[It].setCoordinates(tt,Dt)},this.surfacesFinished=function(){return this.glviewer1.surfacesFinished()&&this.glviewer2.surfacesFinished()},this.isAnimated=function(){return this.glviewer1.isAnimated()||this.glviewer2.isAnimated()},this.render=function(Et){this.glviewer1.render(),this.glviewer2.render(),Et&&Et(this)},this.getCanvas=function(){return this.glviewer1.getCanvas()}}}L1.numWorkers=4,L1.maxVolume=64e3,L1.surfaceTypeMap={VDW:Ov.VDW,MS:Ov.MS,SAS:Ov.SAS,SES:Ov.SES};var lg=!1,Mg=!1,$1={};function j1(o0,p){var R,W,J;if(document.querySelector(".viewer_3Dmoljs")!=null&&(lg=!0),lg){Mg=!0,o0=o0??null;var Et=0;document.querySelectorAll(".viewer_3Dmoljs").forEach(tt=>{var Dt=[],It=[],Mt="";tt.style.position=="static"&&(tt.style.position="relative");var Wt=null;if(J=null,tt.dataset.pdb)Dt.push("https://files.rcsb.org/view/"+tt.dataset.pdb+".pdb"),It.push("pdb");else if(tt.dataset.cid)It.push("sdf"),Dt.push("https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/"+tt.dataset.cid+"/SDF?record_type=3d");else if(tt.dataset.href||tt.dataset.url){if(Mt=tt.dataset.href?tt.dataset.href:tt.dataset.url,Dt.push(Mt),(J=Mt.substring(Mt.lastIndexOf(".")+1))=="gz"){let s1=Mt.substring(0,Mt.lastIndexOf(".")).lastIndexOf(".");J=Mt.substring(s1+1)}It.push(J);var Yt=Mt.substring(Mt.lastIndexOf("/")+1,Mt.lastIndexOf("."));Yt=="/"&&(Yt=Mt.substring(Mt.lastIndexOf("/")+1)),tt.dataset[It[It.length-1]]=Yt}let Zo=tt.dataset;for(R in Zo)R.substring(0,3)==="pdb"&&R!=="pdb"?(Dt.push("https://files.rcsb.org/view/"+Zo[R]+".pdb"),It.push("pdb")):R.substring(0,4)==="href"&&R!=="href"?(Mt=Zo[R],Dt.push(Mt),It.push(Mt.substring(Mt.lastIndexOf(".")+1))):R.substring(0,3)==="cid"&&R!=="cid"&&(Dt.push("https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/"+Zo[R]+"/SDF?record_type=3d"),It.push("sdf"));var wi={};tt.dataset.options&&(wi=(0,M.specStringToObject)(tt.dataset.options));var aa=b.CC.color(tt.dataset.backgroundcolor),Yo=tt.dataset.backgroundalpha;Yo=Yo==null?1:parseFloat(Yo);var Ci={line:{}};tt.dataset.style&&(Ci=(0,M.specStringToObject)(tt.dataset.style));var Ip={};tt.dataset.select&&(Ip=(0,M.specStringToObject)(tt.dataset.select));var $p=[],Qp=[],T0=[],g0={},U0=null,Y0=tt.dataset,Q0=/style(.+)/,tm=/surface(.*)/,G0=/labelres(.*)/,Pm=[];for(W in Y0)Object.prototype.hasOwnProperty.call(Y0,W)&&Pm.push(W);for(Pm.sort(),R=0;R<Pm.length;R++){W=Pm[R];var km,i1,Qm,_1=Q0.exec(W);_1&&(km="select"+_1[1],i1=(0,M.specStringToObject)(Y0[km]),Qm=(0,M.specStringToObject)(Y0[W]),$p.push([i1,Qm])),(_1=tm.exec(W))&&(km="select"+_1[1],i1=(0,M.specStringToObject)(Y0[km]),Qm=(0,M.specStringToObject)(Y0[W]),Qp.push([i1,Qm])),(_1=G0.exec(W))&&(km="select"+_1[1],i1=(0,M.specStringToObject)(Y0[km]),Qm=(0,M.specStringToObject)(Y0[W]),T0.push([i1,Qm])),W=="zoomto"&&(g0=(0,M.specStringToObject)(Y0[W])),W=="spin"&&(U0=(0,M.specStringToObject)(Y0[W]))}var C1=function(s1){for(s1.setStyle(Ip,Ci),Wt&&Wt.createSelectionAndStyle(Ip,Ci),R=0;R<$p.length;R++){let H1=$p[R][0]||{},q1=$p[R][1]||{line:{}};s1.setStyle(H1,q1),Wt&&Wt.createSelectionAndStyle(Ip,Ci)}for(R=0;R<Qp.length;R++){let H1=Qp[R][0]||{},q1=Qp[R][1]||{};Wt?s1.addSurface(Ov.VDW,q1,H1,H1).then(u1=>{Wt.loadSurface("VDW",H1,q1,u1)}):s1.addSurface(Ov.VDW,q1,H1,H1)}for(R=0;R<T0.length;R++){let H1=T0[R][0]||{},q1=T0[R][1]||{};s1.addResLabels(H1,q1)}s1.render(),s1.zoomTo(g0),U0&&s1.spin(U0.axis,U0.speed)};let a1=o0;try{var I1=(0,M.specStringToObject)(tt.dataset.config)||{};I1.backgroundColor===void 0&&(I1.backgroundColor=aa),I1.backgroundAlpha===void 0&&(I1.backgroundAlpha=Yo),a1==null?a1=$1[tt.id||Et++]=K1(tt,I1):(a1.setBackgroundColor(aa,Yo),a1.setConfig(I1),Wt&&Wt.initiateUI()),tt.dataset.ui&&$3Dmol.StateManager&&(Wt=new $3Dmol.StateManager(a1))}catch(s1){console.log(s1),tt.textContent="WebGL appears to be disabled."}if(Dt.length!=0){let s1=0,H1=((q1,u1)=>function(eg){Mt=Dt[s1];var kg=q1.dataset.type||q1.dataset.datatype||It[s1];if(u1.addModel(eg,kg,wi),Wt){var J1=q1.dataset[It[s1]];Wt.setModelTitle(J1)}s1+=1,s1<Dt.length?(0,M.get)(Dt[s1]).then(H1):(C1(u1),q1.dataset.callback&&(0,M.makeFunction)(q1.dataset.callback)(u1),Mg=!1,p&&p(u1))})(tt,a1);J&&J.endsWith("gz")?(0,M.getbin)(Dt[0]).then(H1):(0,M.get)(Dt[0]).then(H1)}else{if(tt.dataset.element){var Fm="#"+tt.dataset.element,Km=document.querySelector(Fm),W1=Km?Km.textContent:"";J=tt.dataset.type||tt.dataset.datatype,a1.addModel(W1,J,wi)}C1(a1),tt.dataset.callback&&(0,M.makeFunction)(tt.dataset.callback)(a1),Mg=!1,p&&p(a1)}})}}document.onreadystatechange=()=>{document.readyState==="complete"&&j1()};const ng={"ALA:N":-.15,"ALA:CA":.1,"ALA:CB":0,"ALA:C":.6,"ALA:O":-.55,"ARG:N":-.15,"ARG:CA":.1,"ARG:CB":0,"ARG:CG":0,"ARG:CD":.1,"ARG:NE":-.1,"ARG:CZ":.5,"ARG:NH1":.25,"ARG:NH2":.25,"ARG:C":.6,"ARG:O":-.55,"ASN:N":-.15,"ASN:CA":.1,"ASN:CB":0,"ASN:CG":.55,"ASN:OD1":-.55,"ASN:ND2":0,"ASN:C":.6,"ASN:O":-.55,"ASP:N":-.15,"ASP:CA":.1,"ASP:CB":0,"ASP:CG":.14,"ASP:OD1":-.57,"ASP:OD2":-.57,"ASP:C":.6,"ASP:O":-.55,"CYS:N":-.15,"CYS:CA":.1,"CYS:CB":.19,"CYS:SG":-.19,"CYS:C":.6,"CYS:O":-.55,"GLN:N":-.15,"GLN:CA":.1,"GLN:CB":0,"GLN:CG":0,"GLN:CD":.55,"GLN:OE1":-.55,"GLN:NE2":0,"GLN:C":.6,"GLN:O":-.55,"GLU:N":-.15,"GLU:CA":.1,"GLU:CB":0,"GLU:CG":0,"GLU:CD":.14,"GLU:OE1":-.57,"GLU:OE2":-.57,"GLU:C":.6,"GLU:O":-.55,"GLY:N":-.15,"GLY:CA":.1,"GLY:C":.6,"GLY:O":-.55,"HIS:N":-.15,"HIS:CA":.1,"HIS:CB":0,"HIS:CG":.1,"HIS:ND1":-.1,"HIS:CD2":.1,"HIS:NE2":-.4,"HIS:CE1":.3,"HIS:C":.6,"HIS:O":-.55,"ILE:N":-.15,"ILE:CA":.1,"ILE:CB":0,"ILE:CG2":0,"ILE:CG1":0,"ILE:CD":0,"ILE:C":.6,"ILE:O":-.55,"LEU:N":-.15,"LEU:CA":.1,"LEU:CB":0,"LEU:CG":0,"LEU:CD1":0,"LEU:CD2":0,"LEU:C":.6,"LEU:O":-.55,"LYS:N":-.15,"LYS:CA":.1,"LYS:CB":0,"LYS:CG":0,"LYS:CD":0,"LYS:CE":.25,"LYS:NZ":.75,"LYS:C":.6,"LYS:O":-.55,"MET:N":-.15,"MET:CA":.1,"MET:CB":0,"MET:CG":.06,"MET:SD":-.12,"MET:CE":.06,"MET:C":.6,"MET:O":-.55,"PHE:N":-.15,"PHE:CA":.1,"PHE:CB":0,"PHE:CG":0,"PHE:CD1":0,"PHE:CD2":0,"PHE:CE1":0,"PHE:CE2":0,"PHE:CZ":0,"PHE:C":.6,"PHE:O":-.55,"PRO:N":-.25,"PRO:CD":.1,"PRO:CA":.1,"PRO:CB":0,"PRO:CG":0,"PRO:C":.6,"PRO:O":-.55,"SER:N":-.15,"SER:CA":.1,"SER:CB":.25,"SER:OG":-.25,"SER:C":.6,"SER:O":-.55,"THR:N":-.15,"THR:CA":.1,"THR:CB":.25,"THR:OG1":-.25,"THR:CG2":0,"THR:C":.6,"THR:O":-.55,"TRP:N":-.15,"TRP:CA":.1,"TRP:CB":0,"TRP:CG":-.03,"TRP:CD2":.1,"TRP:CE2":-.04,"TRP:CE3":-.03,"TRP:CD1":.06,"TRP:NE1":-.06,"TRP:CZ2":0,"TRP:CZ3":0,"TRP:CH2":0,"TRP:C":.6,"TRP:O":-.55,"TYR:N":-.15,"TYR:CA":.1,"TYR:CB":0,"TYR:CG":0,"TYR:CD1":0,"TYR:CE1":0,"TYR:CD2":0,"TYR:CE2":0,"TYR:CZ":.25,"TYR:OH":-.25,"TYR:C":.6,"TYR:O":-.55,"VAL:N":-.15,"VAL:CA":.1,"VAL:CB":0,"VAL:CG1":0,"VAL:CG2":0,"VAL:C":.6,"VAL:O":-.55};function zv(o0,p){if((!p||o0.partialCharge===void 0)&&o0.resn&&o0.atom){var R=o0.resn+":"+o0.atom;o0.properties.partialCharge=ng[R]}}window&&(window.$3Dmol=e)},40:(r,e,t)=>{t.r(e),t.d(e,{bondLength:()=>o,bondTable:()=>a,setBondLength:()=>l});let a={H:.37,He:.32,Li:1.34,Be:.9,B:.82,C:.77,N:.75,O:.73,F:.71,Ne:.69,Na:1.54,Mg:1.3,Al:1.18,Si:1.11,P:1.06,S:1.02,Cl:.99,Ar:.97,K:1.96,Ca:1.74,Sc:1.44,Ti:1.56,V:1.25,Mn:1.39,Fe:1.25,Co:1.26,Ni:1.21,Cu:1.38,Zn:1.31,Ga:1.26,Ge:1.22,Se:1.16,Br:1.14,Kr:1.1,Rb:2.11,Sr:1.92,Y:1.62,Zr:1.48,Nb:1.37,Mo:1.45,Tc:1.56,Ru:1.26,Rh:1.35,Pd:1.31,Ag:1.53,Cd:1.48,In:1.44,Sn:1.41,Sb:1.38,Te:1.35,I:1.33,Xe:1.3,Cs:2.25,Ba:1.98,Lu:1.6,Hf:1.5,Ta:1.38,W:1.46,Re:1.59,Os:1.44,Ir:1.37,Pt:1.28,Au:1.44,Hg:1.49,Tl:1.48,Pb:1.47,Bi:1.46,Rn:1.45};function o(s){return a[s]||1.6}function l(s,f){f<0&&(f=0),a[s]=f}},71:(r,e,t)=>{var a=t(107),o=t(981),l=t(972),s=t(834),f=t(746),m=Object.prototype.toString;function b(M){if(!(this instanceof b))return new b(M);this.options=o.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},M||{});var I=this.options;I.raw&&I.windowBits>0?I.windowBits=-I.windowBits:I.gzip&&I.windowBits>0&&I.windowBits<16&&(I.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var V=a.deflateInit2(this.strm,I.level,I.method,I.windowBits,I.memLevel,I.strategy);if(V!==0)throw new Error(s[V]);if(I.header&&a.deflateSetHeader(this.strm,I.header),I.dictionary){var Z;if(Z=typeof I.dictionary=="string"?l.string2buf(I.dictionary):m.call(I.dictionary)==="[object ArrayBuffer]"?new Uint8Array(I.dictionary):I.dictionary,(V=a.deflateSetDictionary(this.strm,Z))!==0)throw new Error(s[V]);this._dict_set=!0}}function E(M,I){var V=new b(I);if(V.push(M,!0),V.err)throw V.msg||s[V.err];return V.result}b.prototype.push=function(M,I){var V,Z,ee=this.strm,le=this.options.chunkSize;if(this.ended)return!1;Z=I===~~I?I:I===!0?4:0,typeof M=="string"?ee.input=l.string2buf(M):m.call(M)==="[object ArrayBuffer]"?ee.input=new Uint8Array(M):ee.input=M,ee.next_in=0,ee.avail_in=ee.input.length;do{if(ee.avail_out===0&&(ee.output=new o.Buf8(le),ee.next_out=0,ee.avail_out=le),(V=a.deflate(ee,Z))!==1&&V!==0)return this.onEnd(V),this.ended=!0,!1;ee.avail_out!==0&&(ee.avail_in!==0||Z!==4&&Z!==2)||(this.options.to==="string"?this.onData(l.buf2binstring(o.shrinkBuf(ee.output,ee.next_out))):this.onData(o.shrinkBuf(ee.output,ee.next_out)))}while((ee.avail_in>0||ee.avail_out===0)&&V!==1);return Z===4?(V=a.deflateEnd(this.strm),this.onEnd(V),this.ended=!0,V===0):Z!==2||(this.onEnd(0),ee.avail_out=0,!0)},b.prototype.onData=function(M){this.chunks.push(M)},b.prototype.onEnd=function(M){M===0&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=M,this.msg=this.strm.msg},e.Deflate=b,e.deflate=E,e.deflateRaw=function(M,I){return(I=I||{}).raw=!0,E(M,I)},e.gzip=function(M,I){return(I=I||{}).gzip=!0,E(M,I)}},75:(r,e,t)=>{function a(we){let Op=we.length;for(;--Op>=0;)we[Op]=0}t.r(e),t.d(e,{Deflate:()=>Zv,Inflate:()=>gy,constants:()=>Xv,default:()=>Jv,deflate:()=>ry,deflateRaw:()=>my,gzip:()=>Ry,inflate:()=>Py,inflateRaw:()=>Mv,ungzip:()=>jv});const o=256,l=286,s=30,f=15,m=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),b=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),E=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),M=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),I=new Array(576);a(I);const V=new Array(60);a(V);const Z=new Array(512);a(Z);const ee=new Array(256);a(ee);const le=new Array(29);a(le);const K=new Array(s);function vt(we,Op,mt,W0,j0){this.static_tree=we,this.extra_bits=Op,this.extra_base=mt,this.elems=W0,this.max_length=j0,this.has_stree=we&&we.length}let q,Q,wt;function bt(we,Op){this.dyn_tree=we,this.max_code=0,this.stat_desc=Op}a(K);const Ut=we=>we<256?Z[we]:Z[256+(we>>>7)],it=(we,Op)=>{we.pending_buf[we.pending++]=255&Op,we.pending_buf[we.pending++]=Op>>>8&255},zt=(we,Op,mt)=>{we.bi_valid>16-mt?(we.bi_buf|=Op<<we.bi_valid&65535,it(we,we.bi_buf),we.bi_buf=Op>>16-we.bi_valid,we.bi_valid+=mt-16):(we.bi_buf|=Op<<we.bi_valid&65535,we.bi_valid+=mt)},Zt=(we,Op,mt)=>{zt(we,mt[2*Op],mt[2*Op+1])},Mn=(we,Op)=>{let mt=0;do mt|=1&we,we>>>=1,mt<<=1;while(--Op>0);return mt>>>1},kp=(we,Op,mt)=>{const W0=new Array(16);let j0,P0,Wm=0;for(j0=1;j0<=f;j0++)Wm=Wm+mt[j0-1]<<1,W0[j0]=Wm;for(P0=0;P0<=Op;P0++){let dm=we[2*P0+1];dm!==0&&(we[2*P0]=Mn(W0[dm]++,dm))}},zp=we=>{let Op;for(Op=0;Op<l;Op++)we.dyn_ltree[2*Op]=0;for(Op=0;Op<s;Op++)we.dyn_dtree[2*Op]=0;for(Op=0;Op<19;Op++)we.bl_tree[2*Op]=0;we.dyn_ltree[512]=1,we.opt_len=we.static_len=0,we.sym_next=we.matches=0},sa=we=>{we.bi_valid>8?it(we,we.bi_buf):we.bi_valid>0&&(we.pending_buf[we.pending++]=we.bi_buf),we.bi_buf=0,we.bi_valid=0},qo=(we,Op,mt,W0)=>{const j0=2*Op,P0=2*mt;return we[j0]<we[P0]||we[j0]===we[P0]&&W0[Op]<=W0[mt]},ae=(we,Op,mt)=>{const W0=we.heap[mt];let j0=mt<<1;for(;j0<=we.heap_len&&(j0<we.heap_len&&qo(Op,we.heap[j0+1],we.heap[j0],we.depth)&&j0++,!qo(Op,W0,we.heap[j0],we.depth));)we.heap[mt]=we.heap[j0],mt=j0,j0<<=1;we.heap[mt]=W0},wp=(we,Op,mt)=>{let W0,j0,P0,Wm,dm=0;if(we.sym_next!==0)do W0=255&we.pending_buf[we.sym_buf+dm++],W0+=(255&we.pending_buf[we.sym_buf+dm++])<<8,j0=we.pending_buf[we.sym_buf+dm++],W0===0?Zt(we,j0,Op):(P0=ee[j0],Zt(we,P0+o+1,Op),Wm=m[P0],Wm!==0&&(j0-=le[P0],zt(we,j0,Wm)),W0--,P0=Ut(W0),Zt(we,P0,mt),Wm=b[P0],Wm!==0&&(W0-=K[P0],zt(we,W0,Wm)));while(dm<we.sym_next);Zt(we,256,Op)},Cp=(we,Op)=>{const mt=Op.dyn_tree,W0=Op.stat_desc.static_tree,j0=Op.stat_desc.has_stree,P0=Op.stat_desc.elems;let Wm,dm,U1,gm=-1;for(we.heap_len=0,we.heap_max=573,Wm=0;Wm<P0;Wm++)mt[2*Wm]!==0?(we.heap[++we.heap_len]=gm=Wm,we.depth[Wm]=0):mt[2*Wm+1]=0;for(;we.heap_len<2;)U1=we.heap[++we.heap_len]=gm<2?++gm:0,mt[2*U1]=1,we.depth[U1]=0,we.opt_len--,j0&&(we.static_len-=W0[2*U1+1]);for(Op.max_code=gm,Wm=we.heap_len>>1;Wm>=1;Wm--)ae(we,mt,Wm);U1=P0;do Wm=we.heap[1],we.heap[1]=we.heap[we.heap_len--],ae(we,mt,1),dm=we.heap[1],we.heap[--we.heap_max]=Wm,we.heap[--we.heap_max]=dm,mt[2*U1]=mt[2*Wm]+mt[2*dm],we.depth[U1]=(we.depth[Wm]>=we.depth[dm]?we.depth[Wm]:we.depth[dm])+1,mt[2*Wm+1]=mt[2*dm+1]=U1,we.heap[1]=U1++,ae(we,mt,1);while(we.heap_len>=2);we.heap[--we.heap_max]=we.heap[1],((qm,Wg)=>{const _g=Wg.dyn_tree,V1=Wg.max_code,oy=Wg.stat_desc.static_tree,xv=Wg.stat_desc.has_stree,Og=Wg.stat_desc.extra_bits,Rv=Wg.stat_desc.extra_base,$g=Wg.stat_desc.max_length;let tg,Vg,Ev,ag,fv,Zg,Fg=0;for(ag=0;ag<=f;ag++)qm.bl_count[ag]=0;for(_g[2*qm.heap[qm.heap_max]+1]=0,tg=qm.heap_max+1;tg<573;tg++)Vg=qm.heap[tg],ag=_g[2*_g[2*Vg+1]+1]+1,ag>$g&&(ag=$g,Fg++),_g[2*Vg+1]=ag,Vg>V1||(qm.bl_count[ag]++,fv=0,Vg>=Rv&&(fv=Og[Vg-Rv]),Zg=_g[2*Vg],qm.opt_len+=Zg*(ag+fv),xv&&(qm.static_len+=Zg*(oy[2*Vg+1]+fv)));if(Fg!==0){do{for(ag=$g-1;qm.bl_count[ag]===0;)ag--;qm.bl_count[ag]--,qm.bl_count[ag+1]+=2,qm.bl_count[$g]--,Fg-=2}while(Fg>0);for(ag=$g;ag!==0;ag--)for(Vg=qm.bl_count[ag];Vg!==0;)Ev=qm.heap[--tg],Ev>V1||(_g[2*Ev+1]!==ag&&(qm.opt_len+=(ag-_g[2*Ev+1])*_g[2*Ev],_g[2*Ev+1]=ag),Vg--)}})(we,Op),kp(mt,gm,we.bl_count)},Kt=(we,Op,mt)=>{let W0,j0,P0=-1,Wm=Op[1],dm=0,U1=7,gm=4;for(Wm===0&&(U1=138,gm=3),Op[2*(mt+1)+1]=65535,W0=0;W0<=mt;W0++)j0=Wm,Wm=Op[2*(W0+1)+1],++dm<U1&&j0===Wm||(dm<gm?we.bl_tree[2*j0]+=dm:j0!==0?(j0!==P0&&we.bl_tree[2*j0]++,we.bl_tree[32]++):dm<=10?we.bl_tree[34]++:we.bl_tree[36]++,dm=0,P0=j0,Wm===0?(U1=138,gm=3):j0===Wm?(U1=6,gm=3):(U1=7,gm=4))},h0=(we,Op,mt)=>{let W0,j0,P0=-1,Wm=Op[1],dm=0,U1=7,gm=4;for(Wm===0&&(U1=138,gm=3),W0=0;W0<=mt;W0++)if(j0=Wm,Wm=Op[2*(W0+1)+1],!(++dm<U1&&j0===Wm)){if(dm<gm)do Zt(we,j0,we.bl_tree);while(--dm!==0);else j0!==0?(j0!==P0&&(Zt(we,j0,we.bl_tree),dm--),Zt(we,16,we.bl_tree),zt(we,dm-3,2)):dm<=10?(Zt(we,17,we.bl_tree),zt(we,dm-3,3)):(Zt(we,18,we.bl_tree),zt(we,dm-11,7));dm=0,P0=j0,Wm===0?(U1=138,gm=3):j0===Wm?(U1=6,gm=3):(U1=7,gm=4)}};let Pp=!1;const d0=(we,Op,mt,W0)=>{zt(we,0+(W0?1:0),3),sa(we),it(we,mt),it(we,~mt),mt&&we.pending_buf.set(we.window.subarray(Op,Op+mt),we.pending),we.pending+=mt};var x0=(we,Op,mt,W0)=>{let j0,P0,Wm=0;we.level>0?(we.strm.data_type===2&&(we.strm.data_type=(dm=>{let U1,gm=4093624447;for(U1=0;U1<=31;U1++,gm>>>=1)if(1&gm&&dm.dyn_ltree[2*U1]!==0)return 0;if(dm.dyn_ltree[18]!==0||dm.dyn_ltree[20]!==0||dm.dyn_ltree[26]!==0)return 1;for(U1=32;U1<o;U1++)if(dm.dyn_ltree[2*U1]!==0)return 1;return 0})(we)),Cp(we,we.l_desc),Cp(we,we.d_desc),Wm=(dm=>{let U1;for(Kt(dm,dm.dyn_ltree,dm.l_desc.max_code),Kt(dm,dm.dyn_dtree,dm.d_desc.max_code),Cp(dm,dm.bl_desc),U1=18;U1>=3&&dm.bl_tree[2*M[U1]+1]===0;U1--);return dm.opt_len+=3*(U1+1)+5+5+4,U1})(we),j0=we.opt_len+3+7>>>3,P0=we.static_len+3+7>>>3,P0<=j0&&(j0=P0)):j0=P0=mt+5,mt+4<=j0&&Op!==-1?d0(we,Op,mt,W0):we.strategy===4||P0===j0?(zt(we,2+(W0?1:0),3),wp(we,I,V)):(zt(we,4+(W0?1:0),3),((dm,U1,gm,qm)=>{let Wg;for(zt(dm,U1-257,5),zt(dm,gm-1,5),zt(dm,qm-4,4),Wg=0;Wg<qm;Wg++)zt(dm,dm.bl_tree[2*M[Wg]+1],3);h0(dm,dm.dyn_ltree,U1-1),h0(dm,dm.dyn_dtree,gm-1)})(we,we.l_desc.max_code+1,we.d_desc.max_code+1,Wm+1),wp(we,we.dyn_ltree,we.dyn_dtree)),zp(we),W0&&sa(we)},Dp={_tr_init:we=>{Pp||((()=>{let Op,mt,W0,j0,P0;const Wm=new Array(16);for(W0=0,j0=0;j0<28;j0++)for(le[j0]=W0,Op=0;Op<1<<m[j0];Op++)ee[W0++]=j0;for(ee[W0-1]=j0,P0=0,j0=0;j0<16;j0++)for(K[j0]=P0,Op=0;Op<1<<b[j0];Op++)Z[P0++]=j0;for(P0>>=7;j0<s;j0++)for(K[j0]=P0<<7,Op=0;Op<1<<b[j0]-7;Op++)Z[256+P0++]=j0;for(mt=0;mt<=f;mt++)Wm[mt]=0;for(Op=0;Op<=143;)I[2*Op+1]=8,Op++,Wm[8]++;for(;Op<=255;)I[2*Op+1]=9,Op++,Wm[9]++;for(;Op<=279;)I[2*Op+1]=7,Op++,Wm[7]++;for(;Op<=287;)I[2*Op+1]=8,Op++,Wm[8]++;for(kp(I,287,Wm),Op=0;Op<s;Op++)V[2*Op+1]=5,V[2*Op]=Mn(Op,5);q=new vt(I,m,257,l,f),Q=new vt(V,b,0,s,f),wt=new vt(new Array(0),E,0,19,7)})(),Pp=!0),we.l_desc=new bt(we.dyn_ltree,q),we.d_desc=new bt(we.dyn_dtree,Q),we.bl_desc=new bt(we.bl_tree,wt),we.bi_buf=0,we.bi_valid=0,zp(we)},_tr_stored_block:d0,_tr_flush_block:x0,_tr_tally:(we,Op,mt)=>(we.pending_buf[we.sym_buf+we.sym_next++]=Op,we.pending_buf[we.sym_buf+we.sym_next++]=Op>>8,we.pending_buf[we.sym_buf+we.sym_next++]=mt,Op===0?we.dyn_ltree[2*mt]++:(we.matches++,Op--,we.dyn_ltree[2*(ee[mt]+o+1)]++,we.dyn_dtree[2*Ut(Op)]++),we.sym_next===we.sym_end),_tr_align:we=>{zt(we,2,3),Zt(we,256,I),(Op=>{Op.bi_valid===16?(it(Op,Op.bi_buf),Op.bi_buf=0,Op.bi_valid=0):Op.bi_valid>=8&&(Op.pending_buf[Op.pending++]=255&Op.bi_buf,Op.bi_buf>>=8,Op.bi_valid-=8)})(we)}},c0=(we,Op,mt,W0)=>{let j0=65535&we,P0=we>>>16&65535,Wm=0;for(;mt!==0;){Wm=mt>2e3?2e3:mt,mt-=Wm;do j0=j0+Op[W0++]|0,P0=P0+j0|0;while(--Wm);j0%=65521,P0%=65521}return j0|P0<<16};const u0=new Uint32Array((()=>{let we,Op=[];for(var mt=0;mt<256;mt++){we=mt;for(var W0=0;W0<8;W0++)we=1&we?3988292384^we>>>1:we>>>1;Op[mt]=we}return Op})());var y0=(we,Op,mt,W0)=>{const j0=u0,P0=W0+mt;we^=-1;for(let Wm=W0;Wm<P0;Wm++)we=we>>>8^j0[255&(we^Op[Wm])];return-1^we},M0={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},sm={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:mm,_tr_stored_block:Mm,_tr_flush_block:v1,_tr_tally:v0,_tr_align:D1}=Dp,{Z_NO_FLUSH:P1,Z_PARTIAL_FLUSH:ig,Z_FULL_FLUSH:w1,Z_FINISH:o1,Z_BLOCK:g1,Z_OK:X1,Z_STREAM_END:sg,Z_STREAM_ERROR:og,Z_DATA_ERROR:R0,Z_BUF_ERROR:Xp,Z_DEFAULT_COMPRESSION:wm,Z_FILTERED:$m,Z_HUFFMAN_ONLY:Vp,Z_RLE:r0,Z_FIXED:B0,Z_DEFAULT_STRATEGY:bm,Z_UNKNOWN:Sm,Z_DEFLATED:Xm}=sm,cm=258,zm=262,x1=42,Um=113,h1=666,Sg=(we,Op)=>(we.msg=M0[Op],Op),um=we=>2*we-(we>4?9:0),M1=we=>{let Op=we.length;for(;--Op>=0;)we[Op]=0},F1=we=>{let Op,mt,W0,j0=we.w_size;Op=we.hash_size,W0=Op;do mt=we.head[--W0],we.head[W0]=mt>=j0?mt-j0:0;while(--Op);Op=j0,W0=Op;do mt=we.prev[--W0],we.prev[W0]=mt>=j0?mt-j0:0;while(--Op)};let Y1=(we,Op,mt)=>(Op<<we.hash_shift^mt)&we.hash_mask;const n1=we=>{const Op=we.state;let mt=Op.pending;mt>we.avail_out&&(mt=we.avail_out),mt!==0&&(we.output.set(Op.pending_buf.subarray(Op.pending_out,Op.pending_out+mt),we.next_out),we.next_out+=mt,Op.pending_out+=mt,we.total_out+=mt,we.avail_out-=mt,Op.pending-=mt,Op.pending===0&&(Op.pending_out=0))},Zm=(we,Op)=>{v1(we,we.block_start>=0?we.block_start:-1,we.strstart-we.block_start,Op),we.block_start=we.strstart,n1(we.strm)},S1=(we,Op)=>{we.pending_buf[we.pending++]=Op},p1=(we,Op)=>{we.pending_buf[we.pending++]=Op>>>8&255,we.pending_buf[we.pending++]=255&Op},hv=(we,Op,mt,W0)=>{let j0=we.avail_in;return j0>W0&&(j0=W0),j0===0?0:(we.avail_in-=j0,Op.set(we.input.subarray(we.next_in,we.next_in+j0),mt),we.state.wrap===1?we.adler=c0(we.adler,Op,j0,mt):we.state.wrap===2&&(we.adler=y0(we.adler,Op,j0,mt)),we.next_in+=j0,we.total_in+=j0,j0)},Gg=(we,Op)=>{let mt,W0,j0=we.max_chain_length,P0=we.strstart,Wm=we.prev_length,dm=we.nice_match;const U1=we.strstart>we.w_size-zm?we.strstart-(we.w_size-zm):0,gm=we.window,qm=we.w_mask,Wg=we.prev,_g=we.strstart+cm;let V1=gm[P0+Wm-1],oy=gm[P0+Wm];we.prev_length>=we.good_match&&(j0>>=2),dm>we.lookahead&&(dm=we.lookahead);do if(mt=Op,gm[mt+Wm]===oy&&gm[mt+Wm-1]===V1&&gm[mt]===gm[P0]&&gm[++mt]===gm[P0+1]){P0+=2,mt++;do;while(gm[++P0]===gm[++mt]&&gm[++P0]===gm[++mt]&&gm[++P0]===gm[++mt]&&gm[++P0]===gm[++mt]&&gm[++P0]===gm[++mt]&&gm[++P0]===gm[++mt]&&gm[++P0]===gm[++mt]&&gm[++P0]===gm[++mt]&&P0<_g);if(W0=cm-(_g-P0),P0=_g-cm,W0>Wm){if(we.match_start=Op,Wm=W0,W0>=dm)break;V1=gm[P0+Wm-1],oy=gm[P0+Wm]}}while((Op=Wg[Op&qm])>U1&&--j0!==0);return Wm<=we.lookahead?Wm:we.lookahead},Cv=we=>{const Op=we.w_size;let mt,W0,j0;do{if(W0=we.window_size-we.lookahead-we.strstart,we.strstart>=Op+(Op-zm)&&(we.window.set(we.window.subarray(Op,Op+Op-W0),0),we.match_start-=Op,we.strstart-=Op,we.block_start-=Op,we.insert>we.strstart&&(we.insert=we.strstart),F1(we),W0+=Op),we.strm.avail_in===0)break;if(mt=hv(we.strm,we.window,we.strstart+we.lookahead,W0),we.lookahead+=mt,we.lookahead+we.insert>=3)for(j0=we.strstart-we.insert,we.ins_h=we.window[j0],we.ins_h=Y1(we,we.ins_h,we.window[j0+1]);we.insert&&(we.ins_h=Y1(we,we.ins_h,we.window[j0+3-1]),we.prev[j0&we.w_mask]=we.head[we.ins_h],we.head[we.ins_h]=j0,j0++,we.insert--,!(we.lookahead+we.insert<3)););}while(we.lookahead<zm&&we.strm.avail_in!==0)},ey=(we,Op)=>{let mt,W0,j0,P0=we.pending_buf_size-5>we.w_size?we.w_size:we.pending_buf_size-5,Wm=0,dm=we.strm.avail_in;do{if(mt=65535,j0=we.bi_valid+42>>3,we.strm.avail_out<j0||(j0=we.strm.avail_out-j0,W0=we.strstart-we.block_start,mt>W0+we.strm.avail_in&&(mt=W0+we.strm.avail_in),mt>j0&&(mt=j0),mt<P0&&(mt===0&&Op!==o1||Op===P1||mt!==W0+we.strm.avail_in)))break;Wm=Op===o1&&mt===W0+we.strm.avail_in?1:0,Mm(we,0,0,Wm),we.pending_buf[we.pending-4]=mt,we.pending_buf[we.pending-3]=mt>>8,we.pending_buf[we.pending-2]=~mt,we.pending_buf[we.pending-1]=~mt>>8,n1(we.strm),W0&&(W0>mt&&(W0=mt),we.strm.output.set(we.window.subarray(we.block_start,we.block_start+W0),we.strm.next_out),we.strm.next_out+=W0,we.strm.avail_out-=W0,we.strm.total_out+=W0,we.block_start+=W0,mt-=W0),mt&&(hv(we.strm,we.strm.output,we.strm.next_out,mt),we.strm.next_out+=mt,we.strm.avail_out-=mt,we.strm.total_out+=mt)}while(Wm===0);return dm-=we.strm.avail_in,dm&&(dm>=we.w_size?(we.matches=2,we.window.set(we.strm.input.subarray(we.strm.next_in-we.w_size,we.strm.next_in),0),we.strstart=we.w_size,we.insert=we.strstart):(we.window_size-we.strstart<=dm&&(we.strstart-=we.w_size,we.window.set(we.window.subarray(we.w_size,we.w_size+we.strstart),0),we.matches<2&&we.matches++,we.insert>we.strstart&&(we.insert=we.strstart)),we.window.set(we.strm.input.subarray(we.strm.next_in-dm,we.strm.next_in),we.strstart),we.strstart+=dm,we.insert+=dm>we.w_size-we.insert?we.w_size-we.insert:dm),we.block_start=we.strstart),we.high_water<we.strstart&&(we.high_water=we.strstart),Wm?4:Op!==P1&&Op!==o1&&we.strm.avail_in===0&&we.strstart===we.block_start?2:(j0=we.window_size-we.strstart,we.strm.avail_in>j0&&we.block_start>=we.w_size&&(we.block_start-=we.w_size,we.strstart-=we.w_size,we.window.set(we.window.subarray(we.w_size,we.w_size+we.strstart),0),we.matches<2&&we.matches++,j0+=we.w_size,we.insert>we.strstart&&(we.insert=we.strstart)),j0>we.strm.avail_in&&(j0=we.strm.avail_in),j0&&(hv(we.strm,we.window,we.strstart,j0),we.strstart+=j0,we.insert+=j0>we.w_size-we.insert?we.w_size-we.insert:j0),we.high_water<we.strstart&&(we.high_water=we.strstart),j0=we.bi_valid+42>>3,j0=we.pending_buf_size-j0>65535?65535:we.pending_buf_size-j0,P0=j0>we.w_size?we.w_size:j0,W0=we.strstart-we.block_start,(W0>=P0||(W0||Op===o1)&&Op!==P1&&we.strm.avail_in===0&&W0<=j0)&&(mt=W0>j0?j0:W0,Wm=Op===o1&&we.strm.avail_in===0&&mt===W0?1:0,Mm(we,we.block_start,mt,Wm),we.block_start+=mt,n1(we.strm)),Wm?3:1)},xy=(we,Op)=>{let mt,W0;for(;;){if(we.lookahead<zm){if(Cv(we),we.lookahead<zm&&Op===P1)return 1;if(we.lookahead===0)break}if(mt=0,we.lookahead>=3&&(we.ins_h=Y1(we,we.ins_h,we.window[we.strstart+3-1]),mt=we.prev[we.strstart&we.w_mask]=we.head[we.ins_h],we.head[we.ins_h]=we.strstart),mt!==0&&we.strstart-mt<=we.w_size-zm&&(we.match_length=Gg(we,mt)),we.match_length>=3)if(W0=v0(we,we.strstart-we.match_start,we.match_length-3),we.lookahead-=we.match_length,we.match_length<=we.max_lazy_match&&we.lookahead>=3){we.match_length--;do we.strstart++,we.ins_h=Y1(we,we.ins_h,we.window[we.strstart+3-1]),mt=we.prev[we.strstart&we.w_mask]=we.head[we.ins_h],we.head[we.ins_h]=we.strstart;while(--we.match_length!==0);we.strstart++}else we.strstart+=we.match_length,we.match_length=0,we.ins_h=we.window[we.strstart],we.ins_h=Y1(we,we.ins_h,we.window[we.strstart+1]);else W0=v0(we,0,we.window[we.strstart]),we.lookahead--,we.strstart++;if(W0&&(Zm(we,!1),we.strm.avail_out===0))return 1}return we.insert=we.strstart<2?we.strstart:2,Op===o1?(Zm(we,!0),we.strm.avail_out===0?3:4):we.sym_next&&(Zm(we,!1),we.strm.avail_out===0)?1:2},Gv=(we,Op)=>{let mt,W0,j0;for(;;){if(we.lookahead<zm){if(Cv(we),we.lookahead<zm&&Op===P1)return 1;if(we.lookahead===0)break}if(mt=0,we.lookahead>=3&&(we.ins_h=Y1(we,we.ins_h,we.window[we.strstart+3-1]),mt=we.prev[we.strstart&we.w_mask]=we.head[we.ins_h],we.head[we.ins_h]=we.strstart),we.prev_length=we.match_length,we.prev_match=we.match_start,we.match_length=2,mt!==0&&we.prev_length<we.max_lazy_match&&we.strstart-mt<=we.w_size-zm&&(we.match_length=Gg(we,mt),we.match_length<=5&&(we.strategy===$m||we.match_length===3&&we.strstart-we.match_start>4096)&&(we.match_length=2)),we.prev_length>=3&&we.match_length<=we.prev_length){j0=we.strstart+we.lookahead-3,W0=v0(we,we.strstart-1-we.prev_match,we.prev_length-3),we.lookahead-=we.prev_length-1,we.prev_length-=2;do++we.strstart<=j0&&(we.ins_h=Y1(we,we.ins_h,we.window[we.strstart+3-1]),mt=we.prev[we.strstart&we.w_mask]=we.head[we.ins_h],we.head[we.ins_h]=we.strstart);while(--we.prev_length!==0);if(we.match_available=0,we.match_length=2,we.strstart++,W0&&(Zm(we,!1),we.strm.avail_out===0))return 1}else if(we.match_available){if(W0=v0(we,0,we.window[we.strstart-1]),W0&&Zm(we,!1),we.strstart++,we.lookahead--,we.strm.avail_out===0)return 1}else we.match_available=1,we.strstart++,we.lookahead--}return we.match_available&&(W0=v0(we,0,we.window[we.strstart-1]),we.match_available=0),we.insert=we.strstart<2?we.strstart:2,Op===o1?(Zm(we,!0),we.strm.avail_out===0?3:4):we.sym_next&&(Zm(we,!1),we.strm.avail_out===0)?1:2};function yv(we,Op,mt,W0,j0){this.good_length=we,this.max_lazy=Op,this.nice_length=mt,this.max_chain=W0,this.func=j0}const Wv=[new yv(0,0,0,0,ey),new yv(4,4,8,4,xy),new yv(4,5,16,8,xy),new yv(4,6,32,32,xy),new yv(4,4,16,16,Gv),new yv(8,16,32,32,Gv),new yv(8,16,128,128,Gv),new yv(8,32,128,256,Gv),new yv(32,128,258,1024,Gv),new yv(32,258,258,4096,Gv)];function _y(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Xm,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),M1(this.dyn_ltree),M1(this.dyn_dtree),M1(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),M1(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),M1(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const iy=we=>{if(!we)return 1;const Op=we.state;return!Op||Op.strm!==we||Op.status!==x1&&Op.status!==57&&Op.status!==69&&Op.status!==73&&Op.status!==91&&Op.status!==103&&Op.status!==Um&&Op.status!==h1?1:0},Cy=we=>{if(iy(we))return Sg(we,og);we.total_in=we.total_out=0,we.data_type=Sm;const Op=we.state;return Op.pending=0,Op.pending_out=0,Op.wrap<0&&(Op.wrap=-Op.wrap),Op.status=Op.wrap===2?57:Op.wrap?x1:Um,we.adler=Op.wrap===2?0:1,Op.last_flush=-2,mm(Op),X1},$v=we=>{const Op=Cy(we);var mt;return Op===X1&&((mt=we.state).window_size=2*mt.w_size,M1(mt.head),mt.max_lazy_match=Wv[mt.level].max_lazy,mt.good_match=Wv[mt.level].good_length,mt.nice_match=Wv[mt.level].nice_length,mt.max_chain_length=Wv[mt.level].max_chain,mt.strstart=0,mt.block_start=0,mt.lookahead=0,mt.insert=0,mt.match_length=mt.prev_length=2,mt.match_available=0,mt.ins_h=0),Op},Lv=(we,Op,mt,W0,j0,P0)=>{if(!we)return og;let Wm=1;if(Op===wm&&(Op=6),W0<0?(Wm=0,W0=-W0):W0>15&&(Wm=2,W0-=16),j0<1||j0>9||mt!==Xm||W0<8||W0>15||Op<0||Op>9||P0<0||P0>B0||W0===8&&Wm!==1)return Sg(we,og);W0===8&&(W0=9);const dm=new _y;return we.state=dm,dm.strm=we,dm.status=x1,dm.wrap=Wm,dm.gzhead=null,dm.w_bits=W0,dm.w_size=1<<dm.w_bits,dm.w_mask=dm.w_size-1,dm.hash_bits=j0+7,dm.hash_size=1<<dm.hash_bits,dm.hash_mask=dm.hash_size-1,dm.hash_shift=~~((dm.hash_bits+3-1)/3),dm.window=new Uint8Array(2*dm.w_size),dm.head=new Uint16Array(dm.hash_size),dm.prev=new Uint16Array(dm.w_size),dm.lit_bufsize=1<<j0+6,dm.pending_buf_size=4*dm.lit_bufsize,dm.pending_buf=new Uint8Array(dm.pending_buf_size),dm.sym_buf=dm.lit_bufsize,dm.sym_end=3*(dm.lit_bufsize-1),dm.level=Op,dm.strategy=P0,dm.method=mt,$v(we)};var wg={deflateInit:(we,Op)=>Lv(we,Op,Xm,15,8,bm),deflateInit2:Lv,deflateReset:$v,deflateResetKeep:Cy,deflateSetHeader:(we,Op)=>iy(we)||we.state.wrap!==2?og:(we.state.gzhead=Op,X1),deflate:(we,Op)=>{if(iy(we)||Op>g1||Op<0)return we?Sg(we,og):og;const mt=we.state;if(!we.output||we.avail_in!==0&&!we.input||mt.status===h1&&Op!==o1)return Sg(we,we.avail_out===0?Xp:og);const W0=mt.last_flush;if(mt.last_flush=Op,mt.pending!==0){if(n1(we),we.avail_out===0)return mt.last_flush=-1,X1}else if(we.avail_in===0&&um(Op)<=um(W0)&&Op!==o1)return Sg(we,Xp);if(mt.status===h1&&we.avail_in!==0)return Sg(we,Xp);if(mt.status===x1&&mt.wrap===0&&(mt.status=Um),mt.status===x1){let j0=Xm+(mt.w_bits-8<<4)<<8,P0=-1;if(P0=mt.strategy>=Vp||mt.level<2?0:mt.level<6?1:mt.level===6?2:3,j0|=P0<<6,mt.strstart!==0&&(j0|=32),j0+=31-j0%31,p1(mt,j0),mt.strstart!==0&&(p1(mt,we.adler>>>16),p1(mt,65535&we.adler)),we.adler=1,mt.status=Um,n1(we),mt.pending!==0)return mt.last_flush=-1,X1}if(mt.status===57){if(we.adler=0,S1(mt,31),S1(mt,139),S1(mt,8),mt.gzhead)S1(mt,(mt.gzhead.text?1:0)+(mt.gzhead.hcrc?2:0)+(mt.gzhead.extra?4:0)+(mt.gzhead.name?8:0)+(mt.gzhead.comment?16:0)),S1(mt,255&mt.gzhead.time),S1(mt,mt.gzhead.time>>8&255),S1(mt,mt.gzhead.time>>16&255),S1(mt,mt.gzhead.time>>24&255),S1(mt,mt.level===9?2:mt.strategy>=Vp||mt.level<2?4:0),S1(mt,255&mt.gzhead.os),mt.gzhead.extra&&mt.gzhead.extra.length&&(S1(mt,255&mt.gzhead.extra.length),S1(mt,mt.gzhead.extra.length>>8&255)),mt.gzhead.hcrc&&(we.adler=y0(we.adler,mt.pending_buf,mt.pending,0)),mt.gzindex=0,mt.status=69;else if(S1(mt,0),S1(mt,0),S1(mt,0),S1(mt,0),S1(mt,0),S1(mt,mt.level===9?2:mt.strategy>=Vp||mt.level<2?4:0),S1(mt,3),mt.status=Um,n1(we),mt.pending!==0)return mt.last_flush=-1,X1}if(mt.status===69){if(mt.gzhead.extra){let j0=mt.pending,P0=(65535&mt.gzhead.extra.length)-mt.gzindex;for(;mt.pending+P0>mt.pending_buf_size;){let dm=mt.pending_buf_size-mt.pending;if(mt.pending_buf.set(mt.gzhead.extra.subarray(mt.gzindex,mt.gzindex+dm),mt.pending),mt.pending=mt.pending_buf_size,mt.gzhead.hcrc&&mt.pending>j0&&(we.adler=y0(we.adler,mt.pending_buf,mt.pending-j0,j0)),mt.gzindex+=dm,n1(we),mt.pending!==0)return mt.last_flush=-1,X1;j0=0,P0-=dm}let Wm=new Uint8Array(mt.gzhead.extra);mt.pending_buf.set(Wm.subarray(mt.gzindex,mt.gzindex+P0),mt.pending),mt.pending+=P0,mt.gzhead.hcrc&&mt.pending>j0&&(we.adler=y0(we.adler,mt.pending_buf,mt.pending-j0,j0)),mt.gzindex=0}mt.status=73}if(mt.status===73){if(mt.gzhead.name){let j0,P0=mt.pending;do{if(mt.pending===mt.pending_buf_size){if(mt.gzhead.hcrc&&mt.pending>P0&&(we.adler=y0(we.adler,mt.pending_buf,mt.pending-P0,P0)),n1(we),mt.pending!==0)return mt.last_flush=-1,X1;P0=0}j0=mt.gzindex<mt.gzhead.name.length?255&mt.gzhead.name.charCodeAt(mt.gzindex++):0,S1(mt,j0)}while(j0!==0);mt.gzhead.hcrc&&mt.pending>P0&&(we.adler=y0(we.adler,mt.pending_buf,mt.pending-P0,P0)),mt.gzindex=0}mt.status=91}if(mt.status===91){if(mt.gzhead.comment){let j0,P0=mt.pending;do{if(mt.pending===mt.pending_buf_size){if(mt.gzhead.hcrc&&mt.pending>P0&&(we.adler=y0(we.adler,mt.pending_buf,mt.pending-P0,P0)),n1(we),mt.pending!==0)return mt.last_flush=-1,X1;P0=0}j0=mt.gzindex<mt.gzhead.comment.length?255&mt.gzhead.comment.charCodeAt(mt.gzindex++):0,S1(mt,j0)}while(j0!==0);mt.gzhead.hcrc&&mt.pending>P0&&(we.adler=y0(we.adler,mt.pending_buf,mt.pending-P0,P0))}mt.status=103}if(mt.status===103){if(mt.gzhead.hcrc){if(mt.pending+2>mt.pending_buf_size&&(n1(we),mt.pending!==0))return mt.last_flush=-1,X1;S1(mt,255&we.adler),S1(mt,we.adler>>8&255),we.adler=0}if(mt.status=Um,n1(we),mt.pending!==0)return mt.last_flush=-1,X1}if(we.avail_in!==0||mt.lookahead!==0||Op!==P1&&mt.status!==h1){let j0=mt.level===0?ey(mt,Op):mt.strategy===Vp?((P0,Wm)=>{let dm;for(;;){if(P0.lookahead===0&&(Cv(P0),P0.lookahead===0)){if(Wm===P1)return 1;break}if(P0.match_length=0,dm=v0(P0,0,P0.window[P0.strstart]),P0.lookahead--,P0.strstart++,dm&&(Zm(P0,!1),P0.strm.avail_out===0))return 1}return P0.insert=0,Wm===o1?(Zm(P0,!0),P0.strm.avail_out===0?3:4):P0.sym_next&&(Zm(P0,!1),P0.strm.avail_out===0)?1:2})(mt,Op):mt.strategy===r0?((P0,Wm)=>{let dm,U1,gm,qm;const Wg=P0.window;for(;;){if(P0.lookahead<=cm){if(Cv(P0),P0.lookahead<=cm&&Wm===P1)return 1;if(P0.lookahead===0)break}if(P0.match_length=0,P0.lookahead>=3&&P0.strstart>0&&(gm=P0.strstart-1,U1=Wg[gm],U1===Wg[++gm]&&U1===Wg[++gm]&&U1===Wg[++gm])){qm=P0.strstart+cm;do;while(U1===Wg[++gm]&&U1===Wg[++gm]&&U1===Wg[++gm]&&U1===Wg[++gm]&&U1===Wg[++gm]&&U1===Wg[++gm]&&U1===Wg[++gm]&&U1===Wg[++gm]&&gm<qm);P0.match_length=cm-(qm-gm),P0.match_length>P0.lookahead&&(P0.match_length=P0.lookahead)}if(P0.match_length>=3?(dm=v0(P0,1,P0.match_length-3),P0.lookahead-=P0.match_length,P0.strstart+=P0.match_length,P0.match_length=0):(dm=v0(P0,0,P0.window[P0.strstart]),P0.lookahead--,P0.strstart++),dm&&(Zm(P0,!1),P0.strm.avail_out===0))return 1}return P0.insert=0,Wm===o1?(Zm(P0,!0),P0.strm.avail_out===0?3:4):P0.sym_next&&(Zm(P0,!1),P0.strm.avail_out===0)?1:2})(mt,Op):Wv[mt.level].func(mt,Op);if(j0!==3&&j0!==4||(mt.status=h1),j0===1||j0===3)return we.avail_out===0&&(mt.last_flush=-1),X1;if(j0===2&&(Op===ig?D1(mt):Op!==g1&&(Mm(mt,0,0,!1),Op===w1&&(M1(mt.head),mt.lookahead===0&&(mt.strstart=0,mt.block_start=0,mt.insert=0))),n1(we),we.avail_out===0))return mt.last_flush=-1,X1}return Op!==o1?X1:mt.wrap<=0?sg:(mt.wrap===2?(S1(mt,255&we.adler),S1(mt,we.adler>>8&255),S1(mt,we.adler>>16&255),S1(mt,we.adler>>24&255),S1(mt,255&we.total_in),S1(mt,we.total_in>>8&255),S1(mt,we.total_in>>16&255),S1(mt,we.total_in>>24&255)):(p1(mt,we.adler>>>16),p1(mt,65535&we.adler)),n1(we),mt.wrap>0&&(mt.wrap=-mt.wrap),mt.pending!==0?X1:sg)},deflateEnd:we=>{if(iy(we))return og;const Op=we.state.status;return we.state=null,Op===Um?Sg(we,R0):X1},deflateSetDictionary:(we,Op)=>{let mt=Op.length;if(iy(we))return og;const W0=we.state,j0=W0.wrap;if(j0===2||j0===1&&W0.status!==x1||W0.lookahead)return og;if(j0===1&&(we.adler=c0(we.adler,Op,mt,0)),W0.wrap=0,mt>=W0.w_size){j0===0&&(M1(W0.head),W0.strstart=0,W0.block_start=0,W0.insert=0);let U1=new Uint8Array(W0.w_size);U1.set(Op.subarray(mt-W0.w_size,mt),0),Op=U1,mt=W0.w_size}const P0=we.avail_in,Wm=we.next_in,dm=we.input;for(we.avail_in=mt,we.next_in=0,we.input=Op,Cv(W0);W0.lookahead>=3;){let U1=W0.strstart,gm=W0.lookahead-2;do W0.ins_h=Y1(W0,W0.ins_h,W0.window[U1+3-1]),W0.prev[U1&W0.w_mask]=W0.head[W0.ins_h],W0.head[W0.ins_h]=U1,U1++;while(--gm);W0.strstart=U1,W0.lookahead=2,Cv(W0)}return W0.strstart+=W0.lookahead,W0.block_start=W0.strstart,W0.insert=W0.lookahead,W0.lookahead=0,W0.match_length=W0.prev_length=2,W0.match_available=0,we.next_in=Wm,we.input=dm,we.avail_in=P0,W0.wrap=j0,X1},deflateInfo:"pako deflate (from Nodeca project)"};const Ov=(we,Op)=>Object.prototype.hasOwnProperty.call(we,Op);var Uv=function(we){const Op=Array.prototype.slice.call(arguments,1);for(;Op.length;){const mt=Op.shift();if(mt){if(typeof mt!="object")throw new TypeError(mt+"must be non-object");for(const W0 in mt)Ov(mt,W0)&&(we[W0]=mt[W0])}}return we},zy=we=>{let Op=0;for(let W0=0,j0=we.length;W0<j0;W0++)Op+=we[W0].length;const mt=new Uint8Array(Op);for(let W0=0,j0=0,P0=we.length;W0<P0;W0++){let Wm=we[W0];mt.set(Wm,j0),j0+=Wm.length}return mt};let mg=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{mg=!1}const Re=new Uint8Array(256);for(let we=0;we<256;we++)Re[we]=we>=252?6:we>=248?5:we>=240?4:we>=224?3:we>=192?2:1;Re[254]=Re[254]=1;var Kp=we=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(we);let Op,mt,W0,j0,P0,Wm=we.length,dm=0;for(j0=0;j0<Wm;j0++)mt=we.charCodeAt(j0),(64512&mt)==55296&&j0+1<Wm&&(W0=we.charCodeAt(j0+1),(64512&W0)==56320&&(mt=65536+(mt-55296<<10)+(W0-56320),j0++)),dm+=mt<128?1:mt<2048?2:mt<65536?3:4;for(Op=new Uint8Array(dm),P0=0,j0=0;P0<dm;j0++)mt=we.charCodeAt(j0),(64512&mt)==55296&&j0+1<Wm&&(W0=we.charCodeAt(j0+1),(64512&W0)==56320&&(mt=65536+(mt-55296<<10)+(W0-56320),j0++)),mt<128?Op[P0++]=mt:mt<2048?(Op[P0++]=192|mt>>>6,Op[P0++]=128|63&mt):mt<65536?(Op[P0++]=224|mt>>>12,Op[P0++]=128|mt>>>6&63,Op[P0++]=128|63&mt):(Op[P0++]=240|mt>>>18,Op[P0++]=128|mt>>>12&63,Op[P0++]=128|mt>>>6&63,Op[P0++]=128|63&mt);return Op},Fn=(we,Op)=>{const mt=Op||we.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(we.subarray(0,Op));let W0,j0;const P0=new Array(2*mt);for(j0=0,W0=0;W0<mt;){let Wm=we[W0++];if(Wm<128){P0[j0++]=Wm;continue}let dm=Re[Wm];if(dm>4)P0[j0++]=65533,W0+=dm-1;else{for(Wm&=dm===2?31:dm===3?15:7;dm>1&&W0<mt;)Wm=Wm<<6|63&we[W0++],dm--;dm>1?P0[j0++]=65533:Wm<65536?P0[j0++]=Wm:(Wm-=65536,P0[j0++]=55296|Wm>>10&1023,P0[j0++]=56320|1023&Wm)}}return((Wm,dm)=>{if(dm<65534&&Wm.subarray&&mg)return String.fromCharCode.apply(null,Wm.length===dm?Wm:Wm.subarray(0,dm));let U1="";for(let gm=0;gm<dm;gm++)U1+=String.fromCharCode(Wm[gm]);return U1})(P0,j0)},t0=(we,Op)=>{(Op=Op||we.length)>we.length&&(Op=we.length);let mt=Op-1;for(;mt>=0&&(192&we[mt])==128;)mt--;return mt<0||mt===0?Op:mt+Re[we[mt]]>Op?mt:Op},s0=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const J0=Object.prototype.toString,{Z_NO_FLUSH:F0,Z_SYNC_FLUSH:lm,Z_FULL_FLUSH:Bm,Z_FINISH:Nm,Z_OK:jm,Z_STREAM_END:A1,Z_DEFAULT_COMPRESSION:L1,Z_DEFAULT_STRATEGY:K1,Z_DEFLATED:Tg}=sm;function Lg(we){this.options=Uv({level:L1,method:Tg,chunkSize:16384,windowBits:15,memLevel:8,strategy:K1},we||{});let Op=this.options;Op.raw&&Op.windowBits>0?Op.windowBits=-Op.windowBits:Op.gzip&&Op.windowBits>0&&Op.windowBits<16&&(Op.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s0,this.strm.avail_out=0;let mt=wg.deflateInit2(this.strm,Op.level,Op.method,Op.windowBits,Op.memLevel,Op.strategy);if(mt!==jm)throw new Error(M0[mt]);if(Op.header&&wg.deflateSetHeader(this.strm,Op.header),Op.dictionary){let W0;if(W0=typeof Op.dictionary=="string"?Kp(Op.dictionary):J0.call(Op.dictionary)==="[object ArrayBuffer]"?new Uint8Array(Op.dictionary):Op.dictionary,mt=wg.deflateSetDictionary(this.strm,W0),mt!==jm)throw new Error(M0[mt]);this._dict_set=!0}}function lg(we,Op){const mt=new Lg(Op);if(mt.push(we,!0),mt.err)throw mt.msg||M0[mt.err];return mt.result}Lg.prototype.push=function(we,Op){const mt=this.strm,W0=this.options.chunkSize;let j0,P0;if(this.ended)return!1;for(P0=Op===~~Op?Op:Op===!0?Nm:F0,typeof we=="string"?mt.input=Kp(we):J0.call(we)==="[object ArrayBuffer]"?mt.input=new Uint8Array(we):mt.input=we,mt.next_in=0,mt.avail_in=mt.input.length;;)if(mt.avail_out===0&&(mt.output=new Uint8Array(W0),mt.next_out=0,mt.avail_out=W0),(P0===lm||P0===Bm)&&mt.avail_out<=6)this.onData(mt.output.subarray(0,mt.next_out)),mt.avail_out=0;else{if(j0=wg.deflate(mt,P0),j0===A1)return mt.next_out>0&&this.onData(mt.output.subarray(0,mt.next_out)),j0=wg.deflateEnd(this.strm),this.onEnd(j0),this.ended=!0,j0===jm;if(mt.avail_out!==0){if(P0>0&&mt.next_out>0)this.onData(mt.output.subarray(0,mt.next_out)),mt.avail_out=0;else if(mt.avail_in===0)break}else this.onData(mt.output)}return!0},Lg.prototype.onData=function(we){this.chunks.push(we)},Lg.prototype.onEnd=function(we){we===jm&&(this.result=zy(this.chunks)),this.chunks=[],this.err=we,this.msg=this.strm.msg};var Mg={Deflate:Lg,deflate:lg,deflateRaw:function(we,Op){return(Op=Op||{}).raw=!0,lg(we,Op)},gzip:function(we,Op){return(Op=Op||{}).gzip=!0,lg(we,Op)}};const $1=16209;var j1=function(we,Op){let mt,W0,j0,P0,Wm,dm,U1,gm,qm,Wg,_g,V1,oy,xv,Og,Rv,$g,tg,Vg,Ev,ag,fv,Zg,Fg;const pv=we.state;mt=we.next_in,Zg=we.input,W0=mt+(we.avail_in-5),j0=we.next_out,Fg=we.output,P0=j0-(Op-we.avail_out),Wm=j0+(we.avail_out-257),dm=pv.dmax,U1=pv.wsize,gm=pv.whave,qm=pv.wnext,Wg=pv.window,_g=pv.hold,V1=pv.bits,oy=pv.lencode,xv=pv.distcode,Og=(1<<pv.lenbits)-1,Rv=(1<<pv.distbits)-1;e:do{V1<15&&(_g+=Zg[mt++]<<V1,V1+=8,_g+=Zg[mt++]<<V1,V1+=8),$g=oy[_g&Og];t:for(;;){if(tg=$g>>>24,_g>>>=tg,V1-=tg,tg=$g>>>16&255,tg===0)Fg[j0++]=65535&$g;else{if(!(16&tg)){if(64&tg){if(32&tg){pv.mode=16191;break e}we.msg="invalid literal/length code",pv.mode=$1;break e}$g=oy[(65535&$g)+(_g&(1<<tg)-1)];continue t}for(Vg=65535&$g,tg&=15,tg&&(V1<tg&&(_g+=Zg[mt++]<<V1,V1+=8),Vg+=_g&(1<<tg)-1,_g>>>=tg,V1-=tg),V1<15&&(_g+=Zg[mt++]<<V1,V1+=8,_g+=Zg[mt++]<<V1,V1+=8),$g=xv[_g&Rv];;){if(tg=$g>>>24,_g>>>=tg,V1-=tg,tg=$g>>>16&255,16&tg){if(Ev=65535&$g,tg&=15,V1<tg&&(_g+=Zg[mt++]<<V1,V1+=8,V1<tg&&(_g+=Zg[mt++]<<V1,V1+=8)),Ev+=_g&(1<<tg)-1,Ev>dm){we.msg="invalid distance too far back",pv.mode=$1;break e}if(_g>>>=tg,V1-=tg,tg=j0-P0,Ev>tg){if(tg=Ev-tg,tg>gm&&pv.sane){we.msg="invalid distance too far back",pv.mode=$1;break e}if(ag=0,fv=Wg,qm===0){if(ag+=U1-tg,tg<Vg){Vg-=tg;do Fg[j0++]=Wg[ag++];while(--tg);ag=j0-Ev,fv=Fg}}else if(qm<tg){if(ag+=U1+qm-tg,tg-=qm,tg<Vg){Vg-=tg;do Fg[j0++]=Wg[ag++];while(--tg);if(ag=0,qm<Vg){tg=qm,Vg-=tg;do Fg[j0++]=Wg[ag++];while(--tg);ag=j0-Ev,fv=Fg}}}else if(ag+=qm-tg,tg<Vg){Vg-=tg;do Fg[j0++]=Wg[ag++];while(--tg);ag=j0-Ev,fv=Fg}for(;Vg>2;)Fg[j0++]=fv[ag++],Fg[j0++]=fv[ag++],Fg[j0++]=fv[ag++],Vg-=3;Vg&&(Fg[j0++]=fv[ag++],Vg>1&&(Fg[j0++]=fv[ag++]))}else{ag=j0-Ev;do Fg[j0++]=Fg[ag++],Fg[j0++]=Fg[ag++],Fg[j0++]=Fg[ag++],Vg-=3;while(Vg>2);Vg&&(Fg[j0++]=Fg[ag++],Vg>1&&(Fg[j0++]=Fg[ag++]))}break}if(64&tg){we.msg="invalid distance code",pv.mode=$1;break e}$g=xv[(65535&$g)+(_g&(1<<tg)-1)]}}break}}while(mt<W0&&j0<Wm);Vg=V1>>3,mt-=Vg,V1-=Vg<<3,_g&=(1<<V1)-1,we.next_in=mt,we.next_out=j0,we.avail_in=mt<W0?W0-mt+5:5-(mt-W0),we.avail_out=j0<Wm?Wm-j0+257:257-(j0-Wm),pv.hold=_g,pv.bits=V1};const ng=15,zv=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),o0=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),p=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),R=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var W=(we,Op,mt,W0,j0,P0,Wm,dm)=>{const U1=dm.bits;let gm,qm,Wg,_g,V1,oy,xv=0,Og=0,Rv=0,$g=0,tg=0,Vg=0,Ev=0,ag=0,fv=0,Zg=0,Fg=null;const pv=new Uint16Array(16),Dy=new Uint16Array(16);let rx,nx,Tx,Qx=null;for(xv=0;xv<=ng;xv++)pv[xv]=0;for(Og=0;Og<W0;Og++)pv[Op[mt+Og]]++;for(tg=U1,$g=ng;$g>=1&&pv[$g]===0;$g--);if(tg>$g&&(tg=$g),$g===0)return j0[P0++]=20971520,j0[P0++]=20971520,dm.bits=1,0;for(Rv=1;Rv<$g&&pv[Rv]===0;Rv++);for(tg<Rv&&(tg=Rv),ag=1,xv=1;xv<=ng;xv++)if(ag<<=1,ag-=pv[xv],ag<0)return-1;if(ag>0&&(we===0||$g!==1))return-1;for(Dy[1]=0,xv=1;xv<ng;xv++)Dy[xv+1]=Dy[xv]+pv[xv];for(Og=0;Og<W0;Og++)Op[mt+Og]!==0&&(Wm[Dy[Op[mt+Og]]++]=Og);if(we===0?(Fg=Qx=Wm,oy=20):we===1?(Fg=zv,Qx=o0,oy=257):(Fg=p,Qx=R,oy=0),Zg=0,Og=0,xv=Rv,V1=P0,Vg=tg,Ev=0,Wg=-1,fv=1<<tg,_g=fv-1,we===1&&fv>852||we===2&&fv>592)return 1;for(;;){rx=xv-Ev,Wm[Og]+1<oy?(nx=0,Tx=Wm[Og]):Wm[Og]>=oy?(nx=Qx[Wm[Og]-oy],Tx=Fg[Wm[Og]-oy]):(nx=96,Tx=0),gm=1<<xv-Ev,qm=1<<Vg,Rv=qm;do qm-=gm,j0[V1+(Zg>>Ev)+qm]=rx<<24|nx<<16|Tx;while(qm!==0);for(gm=1<<xv-1;Zg&gm;)gm>>=1;if(gm!==0?(Zg&=gm-1,Zg+=gm):Zg=0,Og++,--pv[xv]===0){if(xv===$g)break;xv=Op[mt+Wm[Og]]}if(xv>tg&&(Zg&_g)!==Wg){for(Ev===0&&(Ev=tg),V1+=Rv,Vg=xv-Ev,ag=1<<Vg;Vg+Ev<$g&&(ag-=pv[Vg+Ev],!(ag<=0));)Vg++,ag<<=1;if(fv+=1<<Vg,we===1&&fv>852||we===2&&fv>592)return 1;Wg=Zg&_g,j0[Wg]=tg<<24|Vg<<16|V1-P0}}return Zg!==0&&(j0[V1+Zg]=xv-Ev<<24|64<<16),dm.bits=tg,0};const{Z_FINISH:J,Z_BLOCK:Et,Z_TREES:tt,Z_OK:Dt,Z_STREAM_END:It,Z_NEED_DICT:Mt,Z_STREAM_ERROR:Wt,Z_DATA_ERROR:Yt,Z_MEM_ERROR:Zo,Z_BUF_ERROR:wi,Z_DEFLATED:aa}=sm,Yo=16180,Ci=16190,Ip=16191,$p=16192,Qp=16194,T0=16199,g0=16200,U0=16206,Y0=16209,Q0=we=>(we>>>24&255)+(we>>>8&65280)+((65280&we)<<8)+((255&we)<<24);function tm(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const G0=we=>{if(!we)return 1;const Op=we.state;return!Op||Op.strm!==we||Op.mode<Yo||Op.mode>16211?1:0},Pm=we=>{if(G0(we))return Wt;const Op=we.state;return we.total_in=we.total_out=Op.total=0,we.msg="",Op.wrap&&(we.adler=1&Op.wrap),Op.mode=Yo,Op.last=0,Op.havedict=0,Op.flags=-1,Op.dmax=32768,Op.head=null,Op.hold=0,Op.bits=0,Op.lencode=Op.lendyn=new Int32Array(852),Op.distcode=Op.distdyn=new Int32Array(592),Op.sane=1,Op.back=-1,Dt},km=we=>{if(G0(we))return Wt;const Op=we.state;return Op.wsize=0,Op.whave=0,Op.wnext=0,Pm(we)},i1=(we,Op)=>{let mt;if(G0(we))return Wt;const W0=we.state;return Op<0?(mt=0,Op=-Op):(mt=5+(Op>>4),Op<48&&(Op&=15)),Op&&(Op<8||Op>15)?Wt:(W0.window!==null&&W0.wbits!==Op&&(W0.window=null),W0.wrap=mt,W0.wbits=Op,km(we))},Qm=(we,Op)=>{if(!we)return Wt;const mt=new tm;we.state=mt,mt.strm=we,mt.window=null,mt.mode=Yo;const W0=i1(we,Op);return W0!==Dt&&(we.state=null),W0};let _1,C1,a1=!0;const I1=we=>{if(a1){_1=new Int32Array(512),C1=new Int32Array(32);let Op=0;for(;Op<144;)we.lens[Op++]=8;for(;Op<256;)we.lens[Op++]=9;for(;Op<280;)we.lens[Op++]=7;for(;Op<288;)we.lens[Op++]=8;for(W(1,we.lens,0,288,_1,0,we.work,{bits:9}),Op=0;Op<32;)we.lens[Op++]=5;W(2,we.lens,0,32,C1,0,we.work,{bits:5}),a1=!1}we.lencode=_1,we.lenbits=9,we.distcode=C1,we.distbits=5},Fm=(we,Op,mt,W0)=>{let j0;const P0=we.state;return P0.window===null&&(P0.wsize=1<<P0.wbits,P0.wnext=0,P0.whave=0,P0.window=new Uint8Array(P0.wsize)),W0>=P0.wsize?(P0.window.set(Op.subarray(mt-P0.wsize,mt),0),P0.wnext=0,P0.whave=P0.wsize):(j0=P0.wsize-P0.wnext,j0>W0&&(j0=W0),P0.window.set(Op.subarray(mt-W0,mt-W0+j0),P0.wnext),(W0-=j0)?(P0.window.set(Op.subarray(mt-W0,mt),0),P0.wnext=W0,P0.whave=P0.wsize):(P0.wnext+=j0,P0.wnext===P0.wsize&&(P0.wnext=0),P0.whave<P0.wsize&&(P0.whave+=j0))),0};var Km={inflateReset:km,inflateReset2:i1,inflateResetKeep:Pm,inflateInit:we=>Qm(we,15),inflateInit2:Qm,inflate:(we,Op)=>{let mt,W0,j0,P0,Wm,dm,U1,gm,qm,Wg,_g,V1,oy,xv,Og,Rv,$g,tg,Vg,Ev,ag,fv,Zg=0;const Fg=new Uint8Array(4);let pv,Dy;const rx=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(G0(we)||!we.output||!we.input&&we.avail_in!==0)return Wt;mt=we.state,mt.mode===Ip&&(mt.mode=$p),Wm=we.next_out,j0=we.output,U1=we.avail_out,P0=we.next_in,W0=we.input,dm=we.avail_in,gm=mt.hold,qm=mt.bits,Wg=dm,_g=U1,fv=Dt;e:for(;;)switch(mt.mode){case Yo:if(mt.wrap===0){mt.mode=$p;break}for(;qm<16;){if(dm===0)break e;dm--,gm+=W0[P0++]<<qm,qm+=8}if(2&mt.wrap&&gm===35615){mt.wbits===0&&(mt.wbits=15),mt.check=0,Fg[0]=255&gm,Fg[1]=gm>>>8&255,mt.check=y0(mt.check,Fg,2,0),gm=0,qm=0,mt.mode=16181;break}if(mt.head&&(mt.head.done=!1),!(1&mt.wrap)||(((255&gm)<<8)+(gm>>8))%31){we.msg="incorrect header check",mt.mode=Y0;break}if((15&gm)!==aa){we.msg="unknown compression method",mt.mode=Y0;break}if(gm>>>=4,qm-=4,ag=8+(15&gm),mt.wbits===0&&(mt.wbits=ag),ag>15||ag>mt.wbits){we.msg="invalid window size",mt.mode=Y0;break}mt.dmax=1<<mt.wbits,mt.flags=0,we.adler=mt.check=1,mt.mode=512&gm?16189:Ip,gm=0,qm=0;break;case 16181:for(;qm<16;){if(dm===0)break e;dm--,gm+=W0[P0++]<<qm,qm+=8}if(mt.flags=gm,(255&mt.flags)!==aa){we.msg="unknown compression method",mt.mode=Y0;break}if(57344&mt.flags){we.msg="unknown header flags set",mt.mode=Y0;break}mt.head&&(mt.head.text=gm>>8&1),512&mt.flags&&4&mt.wrap&&(Fg[0]=255&gm,Fg[1]=gm>>>8&255,mt.check=y0(mt.check,Fg,2,0)),gm=0,qm=0,mt.mode=16182;case 16182:for(;qm<32;){if(dm===0)break e;dm--,gm+=W0[P0++]<<qm,qm+=8}mt.head&&(mt.head.time=gm),512&mt.flags&&4&mt.wrap&&(Fg[0]=255&gm,Fg[1]=gm>>>8&255,Fg[2]=gm>>>16&255,Fg[3]=gm>>>24&255,mt.check=y0(mt.check,Fg,4,0)),gm=0,qm=0,mt.mode=16183;case 16183:for(;qm<16;){if(dm===0)break e;dm--,gm+=W0[P0++]<<qm,qm+=8}mt.head&&(mt.head.xflags=255&gm,mt.head.os=gm>>8),512&mt.flags&&4&mt.wrap&&(Fg[0]=255&gm,Fg[1]=gm>>>8&255,mt.check=y0(mt.check,Fg,2,0)),gm=0,qm=0,mt.mode=16184;case 16184:if(1024&mt.flags){for(;qm<16;){if(dm===0)break e;dm--,gm+=W0[P0++]<<qm,qm+=8}mt.length=gm,mt.head&&(mt.head.extra_len=gm),512&mt.flags&&4&mt.wrap&&(Fg[0]=255&gm,Fg[1]=gm>>>8&255,mt.check=y0(mt.check,Fg,2,0)),gm=0,qm=0}else mt.head&&(mt.head.extra=null);mt.mode=16185;case 16185:if(1024&mt.flags&&(V1=mt.length,V1>dm&&(V1=dm),V1&&(mt.head&&(ag=mt.head.extra_len-mt.length,mt.head.extra||(mt.head.extra=new Uint8Array(mt.head.extra_len)),mt.head.extra.set(W0.subarray(P0,P0+V1),ag)),512&mt.flags&&4&mt.wrap&&(mt.check=y0(mt.check,W0,V1,P0)),dm-=V1,P0+=V1,mt.length-=V1),mt.length))break e;mt.length=0,mt.mode=16186;case 16186:if(2048&mt.flags){if(dm===0)break e;V1=0;do ag=W0[P0+V1++],mt.head&&ag&&mt.length<65536&&(mt.head.name+=String.fromCharCode(ag));while(ag&&V1<dm);if(512&mt.flags&&4&mt.wrap&&(mt.check=y0(mt.check,W0,V1,P0)),dm-=V1,P0+=V1,ag)break e}else mt.head&&(mt.head.name=null);mt.length=0,mt.mode=16187;case 16187:if(4096&mt.flags){if(dm===0)break e;V1=0;do ag=W0[P0+V1++],mt.head&&ag&&mt.length<65536&&(mt.head.comment+=String.fromCharCode(ag));while(ag&&V1<dm);if(512&mt.flags&&4&mt.wrap&&(mt.check=y0(mt.check,W0,V1,P0)),dm-=V1,P0+=V1,ag)break e}else mt.head&&(mt.head.comment=null);mt.mode=16188;case 16188:if(512&mt.flags){for(;qm<16;){if(dm===0)break e;dm--,gm+=W0[P0++]<<qm,qm+=8}if(4&mt.wrap&&gm!==(65535&mt.check)){we.msg="header crc mismatch",mt.mode=Y0;break}gm=0,qm=0}mt.head&&(mt.head.hcrc=mt.flags>>9&1,mt.head.done=!0),we.adler=mt.check=0,mt.mode=Ip;break;case 16189:for(;qm<32;){if(dm===0)break e;dm--,gm+=W0[P0++]<<qm,qm+=8}we.adler=mt.check=Q0(gm),gm=0,qm=0,mt.mode=Ci;case Ci:if(mt.havedict===0)return we.next_out=Wm,we.avail_out=U1,we.next_in=P0,we.avail_in=dm,mt.hold=gm,mt.bits=qm,Mt;we.adler=mt.check=1,mt.mode=Ip;case Ip:if(Op===Et||Op===tt)break e;case $p:if(mt.last){gm>>>=7&qm,qm-=7&qm,mt.mode=U0;break}for(;qm<3;){if(dm===0)break e;dm--,gm+=W0[P0++]<<qm,qm+=8}switch(mt.last=1&gm,gm>>>=1,qm-=1,3&gm){case 0:mt.mode=16193;break;case 1:if(I1(mt),mt.mode=T0,Op===tt){gm>>>=2,qm-=2;break e}break;case 2:mt.mode=16196;break;case 3:we.msg="invalid block type",mt.mode=Y0}gm>>>=2,qm-=2;break;case 16193:for(gm>>>=7&qm,qm-=7&qm;qm<32;){if(dm===0)break e;dm--,gm+=W0[P0++]<<qm,qm+=8}if((65535&gm)!=(gm>>>16^65535)){we.msg="invalid stored block lengths",mt.mode=Y0;break}if(mt.length=65535&gm,gm=0,qm=0,mt.mode=Qp,Op===tt)break e;case Qp:mt.mode=16195;case 16195:if(V1=mt.length,V1){if(V1>dm&&(V1=dm),V1>U1&&(V1=U1),V1===0)break e;j0.set(W0.subarray(P0,P0+V1),Wm),dm-=V1,P0+=V1,U1-=V1,Wm+=V1,mt.length-=V1;break}mt.mode=Ip;break;case 16196:for(;qm<14;){if(dm===0)break e;dm--,gm+=W0[P0++]<<qm,qm+=8}if(mt.nlen=257+(31&gm),gm>>>=5,qm-=5,mt.ndist=1+(31&gm),gm>>>=5,qm-=5,mt.ncode=4+(15&gm),gm>>>=4,qm-=4,mt.nlen>286||mt.ndist>30){we.msg="too many length or distance symbols",mt.mode=Y0;break}mt.have=0,mt.mode=16197;case 16197:for(;mt.have<mt.ncode;){for(;qm<3;){if(dm===0)break e;dm--,gm+=W0[P0++]<<qm,qm+=8}mt.lens[rx[mt.have++]]=7&gm,gm>>>=3,qm-=3}for(;mt.have<19;)mt.lens[rx[mt.have++]]=0;if(mt.lencode=mt.lendyn,mt.lenbits=7,pv={bits:mt.lenbits},fv=W(0,mt.lens,0,19,mt.lencode,0,mt.work,pv),mt.lenbits=pv.bits,fv){we.msg="invalid code lengths set",mt.mode=Y0;break}mt.have=0,mt.mode=16198;case 16198:for(;mt.have<mt.nlen+mt.ndist;){for(;Zg=mt.lencode[gm&(1<<mt.lenbits)-1],Og=Zg>>>24,Rv=Zg>>>16&255,$g=65535&Zg,!(Og<=qm);){if(dm===0)break e;dm--,gm+=W0[P0++]<<qm,qm+=8}if($g<16)gm>>>=Og,qm-=Og,mt.lens[mt.have++]=$g;else{if($g===16){for(Dy=Og+2;qm<Dy;){if(dm===0)break e;dm--,gm+=W0[P0++]<<qm,qm+=8}if(gm>>>=Og,qm-=Og,mt.have===0){we.msg="invalid bit length repeat",mt.mode=Y0;break}ag=mt.lens[mt.have-1],V1=3+(3&gm),gm>>>=2,qm-=2}else if($g===17){for(Dy=Og+3;qm<Dy;){if(dm===0)break e;dm--,gm+=W0[P0++]<<qm,qm+=8}gm>>>=Og,qm-=Og,ag=0,V1=3+(7&gm),gm>>>=3,qm-=3}else{for(Dy=Og+7;qm<Dy;){if(dm===0)break e;dm--,gm+=W0[P0++]<<qm,qm+=8}gm>>>=Og,qm-=Og,ag=0,V1=11+(127&gm),gm>>>=7,qm-=7}if(mt.have+V1>mt.nlen+mt.ndist){we.msg="invalid bit length repeat",mt.mode=Y0;break}for(;V1--;)mt.lens[mt.have++]=ag}}if(mt.mode===Y0)break;if(mt.lens[256]===0){we.msg="invalid code -- missing end-of-block",mt.mode=Y0;break}if(mt.lenbits=9,pv={bits:mt.lenbits},fv=W(1,mt.lens,0,mt.nlen,mt.lencode,0,mt.work,pv),mt.lenbits=pv.bits,fv){we.msg="invalid literal/lengths set",mt.mode=Y0;break}if(mt.distbits=6,mt.distcode=mt.distdyn,pv={bits:mt.distbits},fv=W(2,mt.lens,mt.nlen,mt.ndist,mt.distcode,0,mt.work,pv),mt.distbits=pv.bits,fv){we.msg="invalid distances set",mt.mode=Y0;break}if(mt.mode=T0,Op===tt)break e;case T0:mt.mode=g0;case g0:if(dm>=6&&U1>=258){we.next_out=Wm,we.avail_out=U1,we.next_in=P0,we.avail_in=dm,mt.hold=gm,mt.bits=qm,j1(we,_g),Wm=we.next_out,j0=we.output,U1=we.avail_out,P0=we.next_in,W0=we.input,dm=we.avail_in,gm=mt.hold,qm=mt.bits,mt.mode===Ip&&(mt.back=-1);break}for(mt.back=0;Zg=mt.lencode[gm&(1<<mt.lenbits)-1],Og=Zg>>>24,Rv=Zg>>>16&255,$g=65535&Zg,!(Og<=qm);){if(dm===0)break e;dm--,gm+=W0[P0++]<<qm,qm+=8}if(Rv&&!(240&Rv)){for(tg=Og,Vg=Rv,Ev=$g;Zg=mt.lencode[Ev+((gm&(1<<tg+Vg)-1)>>tg)],Og=Zg>>>24,Rv=Zg>>>16&255,$g=65535&Zg,!(tg+Og<=qm);){if(dm===0)break e;dm--,gm+=W0[P0++]<<qm,qm+=8}gm>>>=tg,qm-=tg,mt.back+=tg}if(gm>>>=Og,qm-=Og,mt.back+=Og,mt.length=$g,Rv===0){mt.mode=16205;break}if(32&Rv){mt.back=-1,mt.mode=Ip;break}if(64&Rv){we.msg="invalid literal/length code",mt.mode=Y0;break}mt.extra=15&Rv,mt.mode=16201;case 16201:if(mt.extra){for(Dy=mt.extra;qm<Dy;){if(dm===0)break e;dm--,gm+=W0[P0++]<<qm,qm+=8}mt.length+=gm&(1<<mt.extra)-1,gm>>>=mt.extra,qm-=mt.extra,mt.back+=mt.extra}mt.was=mt.length,mt.mode=16202;case 16202:for(;Zg=mt.distcode[gm&(1<<mt.distbits)-1],Og=Zg>>>24,Rv=Zg>>>16&255,$g=65535&Zg,!(Og<=qm);){if(dm===0)break e;dm--,gm+=W0[P0++]<<qm,qm+=8}if(!(240&Rv)){for(tg=Og,Vg=Rv,Ev=$g;Zg=mt.distcode[Ev+((gm&(1<<tg+Vg)-1)>>tg)],Og=Zg>>>24,Rv=Zg>>>16&255,$g=65535&Zg,!(tg+Og<=qm);){if(dm===0)break e;dm--,gm+=W0[P0++]<<qm,qm+=8}gm>>>=tg,qm-=tg,mt.back+=tg}if(gm>>>=Og,qm-=Og,mt.back+=Og,64&Rv){we.msg="invalid distance code",mt.mode=Y0;break}mt.offset=$g,mt.extra=15&Rv,mt.mode=16203;case 16203:if(mt.extra){for(Dy=mt.extra;qm<Dy;){if(dm===0)break e;dm--,gm+=W0[P0++]<<qm,qm+=8}mt.offset+=gm&(1<<mt.extra)-1,gm>>>=mt.extra,qm-=mt.extra,mt.back+=mt.extra}if(mt.offset>mt.dmax){we.msg="invalid distance too far back",mt.mode=Y0;break}mt.mode=16204;case 16204:if(U1===0)break e;if(V1=_g-U1,mt.offset>V1){if(V1=mt.offset-V1,V1>mt.whave&&mt.sane){we.msg="invalid distance too far back",mt.mode=Y0;break}V1>mt.wnext?(V1-=mt.wnext,oy=mt.wsize-V1):oy=mt.wnext-V1,V1>mt.length&&(V1=mt.length),xv=mt.window}else xv=j0,oy=Wm-mt.offset,V1=mt.length;V1>U1&&(V1=U1),U1-=V1,mt.length-=V1;do j0[Wm++]=xv[oy++];while(--V1);mt.length===0&&(mt.mode=g0);break;case 16205:if(U1===0)break e;j0[Wm++]=mt.length,U1--,mt.mode=g0;break;case U0:if(mt.wrap){for(;qm<32;){if(dm===0)break e;dm--,gm|=W0[P0++]<<qm,qm+=8}if(_g-=U1,we.total_out+=_g,mt.total+=_g,4&mt.wrap&&_g&&(we.adler=mt.check=mt.flags?y0(mt.check,j0,_g,Wm-_g):c0(mt.check,j0,_g,Wm-_g)),_g=U1,4&mt.wrap&&(mt.flags?gm:Q0(gm))!==mt.check){we.msg="incorrect data check",mt.mode=Y0;break}gm=0,qm=0}mt.mode=16207;case 16207:if(mt.wrap&&mt.flags){for(;qm<32;){if(dm===0)break e;dm--,gm+=W0[P0++]<<qm,qm+=8}if(4&mt.wrap&&gm!==(4294967295&mt.total)){we.msg="incorrect length check",mt.mode=Y0;break}gm=0,qm=0}mt.mode=16208;case 16208:fv=It;break e;case Y0:fv=Yt;break e;case 16210:return Zo;default:return Wt}return we.next_out=Wm,we.avail_out=U1,we.next_in=P0,we.avail_in=dm,mt.hold=gm,mt.bits=qm,(mt.wsize||_g!==we.avail_out&&mt.mode<Y0&&(mt.mode<U0||Op!==J))&&Fm(we,we.output,we.next_out,_g-we.avail_out),Wg-=we.avail_in,_g-=we.avail_out,we.total_in+=Wg,we.total_out+=_g,mt.total+=_g,4&mt.wrap&&_g&&(we.adler=mt.check=mt.flags?y0(mt.check,j0,_g,we.next_out-_g):c0(mt.check,j0,_g,we.next_out-_g)),we.data_type=mt.bits+(mt.last?64:0)+(mt.mode===Ip?128:0)+(mt.mode===T0||mt.mode===Qp?256:0),(Wg===0&&_g===0||Op===J)&&fv===Dt&&(fv=wi),fv},inflateEnd:we=>{if(G0(we))return Wt;let Op=we.state;return Op.window&&(Op.window=null),we.state=null,Dt},inflateGetHeader:(we,Op)=>{if(G0(we))return Wt;const mt=we.state;return 2&mt.wrap?(mt.head=Op,Op.done=!1,Dt):Wt},inflateSetDictionary:(we,Op)=>{const mt=Op.length;let W0,j0,P0;return G0(we)?Wt:(W0=we.state,W0.wrap!==0&&W0.mode!==Ci?Wt:W0.mode===Ci&&(j0=1,j0=c0(j0,Op,mt,0),j0!==W0.check)?Yt:(P0=Fm(we,Op,mt,mt),P0?(W0.mode=16210,Zo):(W0.havedict=1,Dt)))},inflateInfo:"pako inflate (from Nodeca project)"},W1=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const s1=Object.prototype.toString,{Z_NO_FLUSH:H1,Z_FINISH:q1,Z_OK:u1,Z_STREAM_END:eg,Z_NEED_DICT:kg,Z_STREAM_ERROR:J1,Z_DATA_ERROR:b1,Z_MEM_ERROR:Ug}=sm;function gg(we){this.options=Uv({chunkSize:65536,windowBits:15,to:""},we||{});const Op=this.options;Op.raw&&Op.windowBits>=0&&Op.windowBits<16&&(Op.windowBits=-Op.windowBits,Op.windowBits===0&&(Op.windowBits=-15)),!(Op.windowBits>=0&&Op.windowBits<16)||we&&we.windowBits||(Op.windowBits+=32),Op.windowBits>15&&Op.windowBits<48&&(15&Op.windowBits||(Op.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s0,this.strm.avail_out=0;let mt=Km.inflateInit2(this.strm,Op.windowBits);if(mt!==u1)throw new Error(M0[mt]);if(this.header=new W1,Km.inflateGetHeader(this.strm,this.header),Op.dictionary&&(typeof Op.dictionary=="string"?Op.dictionary=Kp(Op.dictionary):s1.call(Op.dictionary)==="[object ArrayBuffer]"&&(Op.dictionary=new Uint8Array(Op.dictionary)),Op.raw&&(mt=Km.inflateSetDictionary(this.strm,Op.dictionary),mt!==u1)))throw new Error(M0[mt])}function Pg(we,Op){const mt=new gg(Op);if(mt.push(we),mt.err)throw mt.msg||M0[mt.err];return mt.result}gg.prototype.push=function(we,Op){const mt=this.strm,W0=this.options.chunkSize,j0=this.options.dictionary;let P0,Wm,dm;if(this.ended)return!1;for(Wm=Op===~~Op?Op:Op===!0?q1:H1,s1.call(we)==="[object ArrayBuffer]"?mt.input=new Uint8Array(we):mt.input=we,mt.next_in=0,mt.avail_in=mt.input.length;;){for(mt.avail_out===0&&(mt.output=new Uint8Array(W0),mt.next_out=0,mt.avail_out=W0),P0=Km.inflate(mt,Wm),P0===kg&&j0&&(P0=Km.inflateSetDictionary(mt,j0),P0===u1?P0=Km.inflate(mt,Wm):P0===b1&&(P0=kg));mt.avail_in>0&&P0===eg&&mt.state.wrap>0&&we[mt.next_in]!==0;)Km.inflateReset(mt),P0=Km.inflate(mt,Wm);switch(P0){case J1:case b1:case kg:case Ug:return this.onEnd(P0),this.ended=!0,!1}if(dm=mt.avail_out,mt.next_out&&(mt.avail_out===0||P0===eg))if(this.options.to==="string"){let U1=t0(mt.output,mt.next_out),gm=mt.next_out-U1,qm=Fn(mt.output,U1);mt.next_out=gm,mt.avail_out=W0-gm,gm&&mt.output.set(mt.output.subarray(U1,U1+gm),0),this.onData(qm)}else this.onData(mt.output.length===mt.next_out?mt.output:mt.output.subarray(0,mt.next_out));if(P0!==u1||dm!==0){if(P0===eg)return P0=Km.inflateEnd(this.strm),this.onEnd(P0),this.ended=!0,!0;if(mt.avail_in===0)break}}return!0},gg.prototype.onData=function(we){this.chunks.push(we)},gg.prototype.onEnd=function(we){we===u1&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=zy(this.chunks)),this.chunks=[],this.err=we,this.msg=this.strm.msg};var vg={Inflate:gg,inflate:Pg,inflateRaw:function(we,Op){return(Op=Op||{}).raw=!0,Pg(we,Op)},ungzip:Pg};const{Deflate:jg,deflate:mv,deflateRaw:Fv,gzip:Pv}=Mg,{Inflate:fy,inflate:ty,inflateRaw:wv,ungzip:py}=vg;var Zv=jg,ry=mv,my=Fv,Ry=Pv,gy=fy,Py=ty,Mv=wv,jv=py,Xv=sm,Jv={Deflate:jg,deflate:mv,deflateRaw:Fv,gzip:Pv,Inflate:fy,inflate:ty,inflateRaw:wv,ungzip:py,constants:sm}},99:(r,e,t)=>{t.r(e),t.d(e,{Cylinder:()=>s,Sphere:()=>o,Triangle:()=>m});var a=t(529);class o{constructor(E={x:0,y:0,z:0},M=0){this.center=new a.Vector3(E.x,E.y,E.z),this.radius=M}set(E,M){return this.center.copy(E),this.radius=M,this}copy(E){return this.center.copy(E.center),this.radius=E.radius,this}applyMatrix4(E){return this.center.applyMatrix4(E),this.radius=this.radius*E.getMaxScaleOnAxis(),this}translate(E){return this.center.add(E),this}equals(E){return E.center.equals(this.center)&&E.radius===this.radius}clone(){return new o().copy(this)}}let l=new a.Vector3;class s{constructor(E=new a.Vector3,M=new a.Vector3,I=0){this.c1=E,this.c2=M,this.radius=I,this.direction=new a.Vector3().subVectors(this.c2,this.c1).normalize()}copy(E){return this.c1.copy(E.c1),this.c2.copy(E.c2),this.direction.copy(E.direction),this.radius=E.radius,this}lengthSq(){return l.subVectors(this.c2,this.c1).lengthSq()}applyMatrix4(E){return this.direction.add(this.c1).applyMatrix4(E),this.c1.applyMatrix4(E),this.c2.applyMatrix4(E),this.direction.sub(this.c1).normalize(),this.radius=this.radius*E.getMaxScaleOnAxis(),this}}const f=new a.Vector3;class m{constructor(E=new a.Vector3,M=new a.Vector3,I=new a.Vector3){this.a=E,this.b=M,this.c=I}copy(E){return this.a.copy(E.a),this.b.copy(E.b),this.c.copy(E.c),this}applyMatrix4(E){return this.a.applyMatrix4(E),this.b.applyMatrix4(E),this.c.applyMatrix4(E),this}getNormal(){var E=this.a.clone();return E.sub(this.b),f.subVectors(this.c,this.b),E.cross(f),E.normalize(),E}}},107:(r,e,t)=>{var a,o=t(981),l=t(697),s=t(701),f=t(407),m=t(834),b=-2,E=258,M=262,I=103,V=113,Z=666;function ee(ae,wp){return ae.msg=m[wp],wp}function le(ae){return(ae<<1)-(ae>4?9:0)}function K(ae){for(var wp=ae.length;--wp>=0;)ae[wp]=0}function vt(ae){var wp=ae.state,Cp=wp.pending;Cp>ae.avail_out&&(Cp=ae.avail_out),Cp!==0&&(o.arraySet(ae.output,wp.pending_buf,wp.pending_out,Cp,ae.next_out),ae.next_out+=Cp,wp.pending_out+=Cp,ae.total_out+=Cp,ae.avail_out-=Cp,wp.pending-=Cp,wp.pending===0&&(wp.pending_out=0))}function q(ae,wp){l._tr_flush_block(ae,ae.block_start>=0?ae.block_start:-1,ae.strstart-ae.block_start,wp),ae.block_start=ae.strstart,vt(ae.strm)}function Q(ae,wp){ae.pending_buf[ae.pending++]=wp}function wt(ae,wp){ae.pending_buf[ae.pending++]=wp>>>8&255,ae.pending_buf[ae.pending++]=255&wp}function bt(ae,wp,Cp,Kt){var h0=ae.avail_in;return h0>Kt&&(h0=Kt),h0===0?0:(ae.avail_in-=h0,o.arraySet(wp,ae.input,ae.next_in,h0,Cp),ae.state.wrap===1?ae.adler=s(ae.adler,wp,h0,Cp):ae.state.wrap===2&&(ae.adler=f(ae.adler,wp,h0,Cp)),ae.next_in+=h0,ae.total_in+=h0,h0)}function Ut(ae,wp){var Cp,Kt,h0=ae.max_chain_length,Pp=ae.strstart,d0=ae.prev_length,x0=ae.nice_match,Dp=ae.strstart>ae.w_size-M?ae.strstart-(ae.w_size-M):0,c0=ae.window,u0=ae.w_mask,y0=ae.prev,M0=ae.strstart+E,sm=c0[Pp+d0-1],mm=c0[Pp+d0];ae.prev_length>=ae.good_match&&(h0>>=2),x0>ae.lookahead&&(x0=ae.lookahead);do if(c0[(Cp=wp)+d0]===mm&&c0[Cp+d0-1]===sm&&c0[Cp]===c0[Pp]&&c0[++Cp]===c0[Pp+1]){Pp+=2,Cp++;do;while(c0[++Pp]===c0[++Cp]&&c0[++Pp]===c0[++Cp]&&c0[++Pp]===c0[++Cp]&&c0[++Pp]===c0[++Cp]&&c0[++Pp]===c0[++Cp]&&c0[++Pp]===c0[++Cp]&&c0[++Pp]===c0[++Cp]&&c0[++Pp]===c0[++Cp]&&Pp<M0);if(Kt=E-(M0-Pp),Pp=M0-E,Kt>d0){if(ae.match_start=wp,d0=Kt,Kt>=x0)break;sm=c0[Pp+d0-1],mm=c0[Pp+d0]}}while((wp=y0[wp&u0])>Dp&&--h0!==0);return d0<=ae.lookahead?d0:ae.lookahead}function it(ae){var wp,Cp,Kt,h0,Pp,d0=ae.w_size;do{if(h0=ae.window_size-ae.lookahead-ae.strstart,ae.strstart>=d0+(d0-M)){o.arraySet(ae.window,ae.window,d0,d0,0),ae.match_start-=d0,ae.strstart-=d0,ae.block_start-=d0,wp=Cp=ae.hash_size;do Kt=ae.head[--wp],ae.head[wp]=Kt>=d0?Kt-d0:0;while(--Cp);wp=Cp=d0;do Kt=ae.prev[--wp],ae.prev[wp]=Kt>=d0?Kt-d0:0;while(--Cp);h0+=d0}if(ae.strm.avail_in===0)break;if(Cp=bt(ae.strm,ae.window,ae.strstart+ae.lookahead,h0),ae.lookahead+=Cp,ae.lookahead+ae.insert>=3)for(Pp=ae.strstart-ae.insert,ae.ins_h=ae.window[Pp],ae.ins_h=(ae.ins_h<<ae.hash_shift^ae.window[Pp+1])&ae.hash_mask;ae.insert&&(ae.ins_h=(ae.ins_h<<ae.hash_shift^ae.window[Pp+3-1])&ae.hash_mask,ae.prev[Pp&ae.w_mask]=ae.head[ae.ins_h],ae.head[ae.ins_h]=Pp,Pp++,ae.insert--,!(ae.lookahead+ae.insert<3)););}while(ae.lookahead<M&&ae.strm.avail_in!==0)}function zt(ae,wp){for(var Cp,Kt;;){if(ae.lookahead<M){if(it(ae),ae.lookahead<M&&wp===0)return 1;if(ae.lookahead===0)break}if(Cp=0,ae.lookahead>=3&&(ae.ins_h=(ae.ins_h<<ae.hash_shift^ae.window[ae.strstart+3-1])&ae.hash_mask,Cp=ae.prev[ae.strstart&ae.w_mask]=ae.head[ae.ins_h],ae.head[ae.ins_h]=ae.strstart),Cp!==0&&ae.strstart-Cp<=ae.w_size-M&&(ae.match_length=Ut(ae,Cp)),ae.match_length>=3)if(Kt=l._tr_tally(ae,ae.strstart-ae.match_start,ae.match_length-3),ae.lookahead-=ae.match_length,ae.match_length<=ae.max_lazy_match&&ae.lookahead>=3){ae.match_length--;do ae.strstart++,ae.ins_h=(ae.ins_h<<ae.hash_shift^ae.window[ae.strstart+3-1])&ae.hash_mask,Cp=ae.prev[ae.strstart&ae.w_mask]=ae.head[ae.ins_h],ae.head[ae.ins_h]=ae.strstart;while(--ae.match_length!==0);ae.strstart++}else ae.strstart+=ae.match_length,ae.match_length=0,ae.ins_h=ae.window[ae.strstart],ae.ins_h=(ae.ins_h<<ae.hash_shift^ae.window[ae.strstart+1])&ae.hash_mask;else Kt=l._tr_tally(ae,0,ae.window[ae.strstart]),ae.lookahead--,ae.strstart++;if(Kt&&(q(ae,!1),ae.strm.avail_out===0))return 1}return ae.insert=ae.strstart<2?ae.strstart:2,wp===4?(q(ae,!0),ae.strm.avail_out===0?3:4):ae.last_lit&&(q(ae,!1),ae.strm.avail_out===0)?1:2}function Zt(ae,wp){for(var Cp,Kt,h0;;){if(ae.lookahead<M){if(it(ae),ae.lookahead<M&&wp===0)return 1;if(ae.lookahead===0)break}if(Cp=0,ae.lookahead>=3&&(ae.ins_h=(ae.ins_h<<ae.hash_shift^ae.window[ae.strstart+3-1])&ae.hash_mask,Cp=ae.prev[ae.strstart&ae.w_mask]=ae.head[ae.ins_h],ae.head[ae.ins_h]=ae.strstart),ae.prev_length=ae.match_length,ae.prev_match=ae.match_start,ae.match_length=2,Cp!==0&&ae.prev_length<ae.max_lazy_match&&ae.strstart-Cp<=ae.w_size-M&&(ae.match_length=Ut(ae,Cp),ae.match_length<=5&&(ae.strategy===1||ae.match_length===3&&ae.strstart-ae.match_start>4096)&&(ae.match_length=2)),ae.prev_length>=3&&ae.match_length<=ae.prev_length){h0=ae.strstart+ae.lookahead-3,Kt=l._tr_tally(ae,ae.strstart-1-ae.prev_match,ae.prev_length-3),ae.lookahead-=ae.prev_length-1,ae.prev_length-=2;do++ae.strstart<=h0&&(ae.ins_h=(ae.ins_h<<ae.hash_shift^ae.window[ae.strstart+3-1])&ae.hash_mask,Cp=ae.prev[ae.strstart&ae.w_mask]=ae.head[ae.ins_h],ae.head[ae.ins_h]=ae.strstart);while(--ae.prev_length!==0);if(ae.match_available=0,ae.match_length=2,ae.strstart++,Kt&&(q(ae,!1),ae.strm.avail_out===0))return 1}else if(ae.match_available){if((Kt=l._tr_tally(ae,0,ae.window[ae.strstart-1]))&&q(ae,!1),ae.strstart++,ae.lookahead--,ae.strm.avail_out===0)return 1}else ae.match_available=1,ae.strstart++,ae.lookahead--}return ae.match_available&&(Kt=l._tr_tally(ae,0,ae.window[ae.strstart-1]),ae.match_available=0),ae.insert=ae.strstart<2?ae.strstart:2,wp===4?(q(ae,!0),ae.strm.avail_out===0?3:4):ae.last_lit&&(q(ae,!1),ae.strm.avail_out===0)?1:2}function Mn(ae,wp,Cp,Kt,h0){this.good_length=ae,this.max_lazy=wp,this.nice_length=Cp,this.max_chain=Kt,this.func=h0}function kp(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(1146),this.dyn_dtree=new o.Buf16(122),this.bl_tree=new o.Buf16(78),K(this.dyn_ltree),K(this.dyn_dtree),K(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(16),this.heap=new o.Buf16(573),K(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(573),K(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function zp(ae){var wp;return ae&&ae.state?(ae.total_in=ae.total_out=0,ae.data_type=2,(wp=ae.state).pending=0,wp.pending_out=0,wp.wrap<0&&(wp.wrap=-wp.wrap),wp.status=wp.wrap?42:V,ae.adler=wp.wrap===2?0:1,wp.last_flush=0,l._tr_init(wp),0):ee(ae,b)}function sa(ae){var wp,Cp=zp(ae);return Cp===0&&((wp=ae.state).window_size=2*wp.w_size,K(wp.head),wp.max_lazy_match=a[wp.level].max_lazy,wp.good_match=a[wp.level].good_length,wp.nice_match=a[wp.level].nice_length,wp.max_chain_length=a[wp.level].max_chain,wp.strstart=0,wp.block_start=0,wp.lookahead=0,wp.insert=0,wp.match_length=wp.prev_length=2,wp.match_available=0,wp.ins_h=0),Cp}function qo(ae,wp,Cp,Kt,h0,Pp){if(!ae)return b;var d0=1;if(wp===-1&&(wp=6),Kt<0?(d0=0,Kt=-Kt):Kt>15&&(d0=2,Kt-=16),h0<1||h0>9||Cp!==8||Kt<8||Kt>15||wp<0||wp>9||Pp<0||Pp>4)return ee(ae,b);Kt===8&&(Kt=9);var x0=new kp;return ae.state=x0,x0.strm=ae,x0.wrap=d0,x0.gzhead=null,x0.w_bits=Kt,x0.w_size=1<<x0.w_bits,x0.w_mask=x0.w_size-1,x0.hash_bits=h0+7,x0.hash_size=1<<x0.hash_bits,x0.hash_mask=x0.hash_size-1,x0.hash_shift=~~((x0.hash_bits+3-1)/3),x0.window=new o.Buf8(2*x0.w_size),x0.head=new o.Buf16(x0.hash_size),x0.prev=new o.Buf16(x0.w_size),x0.lit_bufsize=1<<h0+6,x0.pending_buf_size=4*x0.lit_bufsize,x0.pending_buf=new o.Buf8(x0.pending_buf_size),x0.d_buf=1*x0.lit_bufsize,x0.l_buf=3*x0.lit_bufsize,x0.level=wp,x0.strategy=Pp,x0.method=Cp,sa(ae)}a=[new Mn(0,0,0,0,function(ae,wp){var Cp=65535;for(Cp>ae.pending_buf_size-5&&(Cp=ae.pending_buf_size-5);;){if(ae.lookahead<=1){if(it(ae),ae.lookahead===0&&wp===0)return 1;if(ae.lookahead===0)break}ae.strstart+=ae.lookahead,ae.lookahead=0;var Kt=ae.block_start+Cp;if((ae.strstart===0||ae.strstart>=Kt)&&(ae.lookahead=ae.strstart-Kt,ae.strstart=Kt,q(ae,!1),ae.strm.avail_out===0)||ae.strstart-ae.block_start>=ae.w_size-M&&(q(ae,!1),ae.strm.avail_out===0))return 1}return ae.insert=0,wp===4?(q(ae,!0),ae.strm.avail_out===0?3:4):(ae.strstart>ae.block_start&&(q(ae,!1),ae.strm.avail_out),1)}),new Mn(4,4,8,4,zt),new Mn(4,5,16,8,zt),new Mn(4,6,32,32,zt),new Mn(4,4,16,16,Zt),new Mn(8,16,32,32,Zt),new Mn(8,16,128,128,Zt),new Mn(8,32,128,256,Zt),new Mn(32,128,258,1024,Zt),new Mn(32,258,258,4096,Zt)],e.deflateInit=function(ae,wp){return qo(ae,wp,8,15,8,0)},e.deflateInit2=qo,e.deflateReset=sa,e.deflateResetKeep=zp,e.deflateSetHeader=function(ae,wp){return ae&&ae.state?ae.state.wrap!==2?b:(ae.state.gzhead=wp,0):b},e.deflate=function(ae,wp){var Cp,Kt,h0,Pp;if(!ae||!ae.state||wp>5||wp<0)return ae?ee(ae,b):b;if(Kt=ae.state,!ae.output||!ae.input&&ae.avail_in!==0||Kt.status===Z&&wp!==4)return ee(ae,ae.avail_out===0?-5:b);if(Kt.strm=ae,Cp=Kt.last_flush,Kt.last_flush=wp,Kt.status===42)if(Kt.wrap===2)ae.adler=0,Q(Kt,31),Q(Kt,139),Q(Kt,8),Kt.gzhead?(Q(Kt,(Kt.gzhead.text?1:0)+(Kt.gzhead.hcrc?2:0)+(Kt.gzhead.extra?4:0)+(Kt.gzhead.name?8:0)+(Kt.gzhead.comment?16:0)),Q(Kt,255&Kt.gzhead.time),Q(Kt,Kt.gzhead.time>>8&255),Q(Kt,Kt.gzhead.time>>16&255),Q(Kt,Kt.gzhead.time>>24&255),Q(Kt,Kt.level===9?2:Kt.strategy>=2||Kt.level<2?4:0),Q(Kt,255&Kt.gzhead.os),Kt.gzhead.extra&&Kt.gzhead.extra.length&&(Q(Kt,255&Kt.gzhead.extra.length),Q(Kt,Kt.gzhead.extra.length>>8&255)),Kt.gzhead.hcrc&&(ae.adler=f(ae.adler,Kt.pending_buf,Kt.pending,0)),Kt.gzindex=0,Kt.status=69):(Q(Kt,0),Q(Kt,0),Q(Kt,0),Q(Kt,0),Q(Kt,0),Q(Kt,Kt.level===9?2:Kt.strategy>=2||Kt.level<2?4:0),Q(Kt,3),Kt.status=V);else{var d0=8+(Kt.w_bits-8<<4)<<8;d0|=(Kt.strategy>=2||Kt.level<2?0:Kt.level<6?1:Kt.level===6?2:3)<<6,Kt.strstart!==0&&(d0|=32),d0+=31-d0%31,Kt.status=V,wt(Kt,d0),Kt.strstart!==0&&(wt(Kt,ae.adler>>>16),wt(Kt,65535&ae.adler)),ae.adler=1}if(Kt.status===69)if(Kt.gzhead.extra){for(h0=Kt.pending;Kt.gzindex<(65535&Kt.gzhead.extra.length)&&(Kt.pending!==Kt.pending_buf_size||(Kt.gzhead.hcrc&&Kt.pending>h0&&(ae.adler=f(ae.adler,Kt.pending_buf,Kt.pending-h0,h0)),vt(ae),h0=Kt.pending,Kt.pending!==Kt.pending_buf_size));)Q(Kt,255&Kt.gzhead.extra[Kt.gzindex]),Kt.gzindex++;Kt.gzhead.hcrc&&Kt.pending>h0&&(ae.adler=f(ae.adler,Kt.pending_buf,Kt.pending-h0,h0)),Kt.gzindex===Kt.gzhead.extra.length&&(Kt.gzindex=0,Kt.status=73)}else Kt.status=73;if(Kt.status===73)if(Kt.gzhead.name){h0=Kt.pending;do{if(Kt.pending===Kt.pending_buf_size&&(Kt.gzhead.hcrc&&Kt.pending>h0&&(ae.adler=f(ae.adler,Kt.pending_buf,Kt.pending-h0,h0)),vt(ae),h0=Kt.pending,Kt.pending===Kt.pending_buf_size)){Pp=1;break}Pp=Kt.gzindex<Kt.gzhead.name.length?255&Kt.gzhead.name.charCodeAt(Kt.gzindex++):0,Q(Kt,Pp)}while(Pp!==0);Kt.gzhead.hcrc&&Kt.pending>h0&&(ae.adler=f(ae.adler,Kt.pending_buf,Kt.pending-h0,h0)),Pp===0&&(Kt.gzindex=0,Kt.status=91)}else Kt.status=91;if(Kt.status===91)if(Kt.gzhead.comment){h0=Kt.pending;do{if(Kt.pending===Kt.pending_buf_size&&(Kt.gzhead.hcrc&&Kt.pending>h0&&(ae.adler=f(ae.adler,Kt.pending_buf,Kt.pending-h0,h0)),vt(ae),h0=Kt.pending,Kt.pending===Kt.pending_buf_size)){Pp=1;break}Pp=Kt.gzindex<Kt.gzhead.comment.length?255&Kt.gzhead.comment.charCodeAt(Kt.gzindex++):0,Q(Kt,Pp)}while(Pp!==0);Kt.gzhead.hcrc&&Kt.pending>h0&&(ae.adler=f(ae.adler,Kt.pending_buf,Kt.pending-h0,h0)),Pp===0&&(Kt.status=I)}else Kt.status=I;if(Kt.status===I&&(Kt.gzhead.hcrc?(Kt.pending+2>Kt.pending_buf_size&&vt(ae),Kt.pending+2<=Kt.pending_buf_size&&(Q(Kt,255&ae.adler),Q(Kt,ae.adler>>8&255),ae.adler=0,Kt.status=V)):Kt.status=V),Kt.pending!==0){if(vt(ae),ae.avail_out===0)return Kt.last_flush=-1,0}else if(ae.avail_in===0&&le(wp)<=le(Cp)&&wp!==4)return ee(ae,-5);if(Kt.status===Z&&ae.avail_in!==0)return ee(ae,-5);if(ae.avail_in!==0||Kt.lookahead!==0||wp!==0&&Kt.status!==Z){var x0=Kt.strategy===2?(function(Dp,c0){for(var u0;;){if(Dp.lookahead===0&&(it(Dp),Dp.lookahead===0)){if(c0===0)return 1;break}if(Dp.match_length=0,u0=l._tr_tally(Dp,0,Dp.window[Dp.strstart]),Dp.lookahead--,Dp.strstart++,u0&&(q(Dp,!1),Dp.strm.avail_out===0))return 1}return Dp.insert=0,c0===4?(q(Dp,!0),Dp.strm.avail_out===0?3:4):Dp.last_lit&&(q(Dp,!1),Dp.strm.avail_out===0)?1:2})(Kt,wp):Kt.strategy===3?(function(Dp,c0){for(var u0,y0,M0,sm,mm=Dp.window;;){if(Dp.lookahead<=E){if(it(Dp),Dp.lookahead<=E&&c0===0)return 1;if(Dp.lookahead===0)break}if(Dp.match_length=0,Dp.lookahead>=3&&Dp.strstart>0&&(y0=mm[M0=Dp.strstart-1])===mm[++M0]&&y0===mm[++M0]&&y0===mm[++M0]){sm=Dp.strstart+E;do;while(y0===mm[++M0]&&y0===mm[++M0]&&y0===mm[++M0]&&y0===mm[++M0]&&y0===mm[++M0]&&y0===mm[++M0]&&y0===mm[++M0]&&y0===mm[++M0]&&M0<sm);Dp.match_length=E-(sm-M0),Dp.match_length>Dp.lookahead&&(Dp.match_length=Dp.lookahead)}if(Dp.match_length>=3?(u0=l._tr_tally(Dp,1,Dp.match_length-3),Dp.lookahead-=Dp.match_length,Dp.strstart+=Dp.match_length,Dp.match_length=0):(u0=l._tr_tally(Dp,0,Dp.window[Dp.strstart]),Dp.lookahead--,Dp.strstart++),u0&&(q(Dp,!1),Dp.strm.avail_out===0))return 1}return Dp.insert=0,c0===4?(q(Dp,!0),Dp.strm.avail_out===0?3:4):Dp.last_lit&&(q(Dp,!1),Dp.strm.avail_out===0)?1:2})(Kt,wp):a[Kt.level].func(Kt,wp);if(x0!==3&&x0!==4||(Kt.status=Z),x0===1||x0===3)return ae.avail_out===0&&(Kt.last_flush=-1),0;if(x0===2&&(wp===1?l._tr_align(Kt):wp!==5&&(l._tr_stored_block(Kt,0,0,!1),wp===3&&(K(Kt.head),Kt.lookahead===0&&(Kt.strstart=0,Kt.block_start=0,Kt.insert=0))),vt(ae),ae.avail_out===0))return Kt.last_flush=-1,0}return wp!==4?0:Kt.wrap<=0?1:(Kt.wrap===2?(Q(Kt,255&ae.adler),Q(Kt,ae.adler>>8&255),Q(Kt,ae.adler>>16&255),Q(Kt,ae.adler>>24&255),Q(Kt,255&ae.total_in),Q(Kt,ae.total_in>>8&255),Q(Kt,ae.total_in>>16&255),Q(Kt,ae.total_in>>24&255)):(wt(Kt,ae.adler>>>16),wt(Kt,65535&ae.adler)),vt(ae),Kt.wrap>0&&(Kt.wrap=-Kt.wrap),Kt.pending!==0?0:1)},e.deflateEnd=function(ae){var wp;return ae&&ae.state?(wp=ae.state.status)!==42&&wp!==69&&wp!==73&&wp!==91&&wp!==I&&wp!==V&&wp!==Z?ee(ae,b):(ae.state=null,wp===V?ee(ae,-3):0):b},e.deflateSetDictionary=function(ae,wp){var Cp,Kt,h0,Pp,d0,x0,Dp,c0,u0=wp.length;if(!ae||!ae.state||(Pp=(Cp=ae.state).wrap)===2||Pp===1&&Cp.status!==42||Cp.lookahead)return b;for(Pp===1&&(ae.adler=s(ae.adler,wp,u0,0)),Cp.wrap=0,u0>=Cp.w_size&&(Pp===0&&(K(Cp.head),Cp.strstart=0,Cp.block_start=0,Cp.insert=0),c0=new o.Buf8(Cp.w_size),o.arraySet(c0,wp,u0-Cp.w_size,Cp.w_size,0),wp=c0,u0=Cp.w_size),d0=ae.avail_in,x0=ae.next_in,Dp=ae.input,ae.avail_in=u0,ae.next_in=0,ae.input=wp,it(Cp);Cp.lookahead>=3;){Kt=Cp.strstart,h0=Cp.lookahead-2;do Cp.ins_h=(Cp.ins_h<<Cp.hash_shift^Cp.window[Kt+3-1])&Cp.hash_mask,Cp.prev[Kt&Cp.w_mask]=Cp.head[Cp.ins_h],Cp.head[Cp.ins_h]=Kt,Kt++;while(--h0);Cp.strstart=Kt,Cp.lookahead=2,it(Cp)}return Cp.strstart+=Cp.lookahead,Cp.block_start=Cp.strstart,Cp.insert=Cp.lookahead,Cp.lookahead=0,Cp.match_length=Cp.prev_length=2,Cp.match_available=0,ae.next_in=x0,ae.input=Dp,ae.avail_in=d0,Cp.wrap=Pp,0},e.deflateInfo="pako deflate (from Nodeca project)"},111:(r,e,t)=>{var a;a={},r.exports=a,(function(o,l){o.toRGBA8=function(s){var f=s.width,m=s.height;if(s.tabs.acTL==null)return[o.toRGBA8.decodeImage(s.data,f,m,s).buffer];var b=[];s.frames[0].data==null&&(s.frames[0].data=s.data);for(var E,M=new Uint8Array(f*m*4),I=0;I<s.frames.length;I++){var V=s.frames[I],Z=V.rect.x,ee=V.rect.y,le=V.rect.width,K=V.rect.height,vt=o.toRGBA8.decodeImage(V.data,le,K,s);if(I==0?E=vt:V.blend==0?o._copyTile(vt,le,K,E,f,m,Z,ee,0):V.blend==1&&o._copyTile(vt,le,K,E,f,m,Z,ee,1),b.push(E.buffer),E=E.slice(0),V.dispose!=0){if(V.dispose==1)o._copyTile(M,le,K,E,f,m,Z,ee,0);else if(V.dispose==2){for(var q=I-1;s.frames[q].dispose==2;)q--;E=new Uint8Array(b[q]).slice(0)}}}return b},o.toRGBA8.decodeImage=function(s,f,m,b){var E=f*m,M=o.decode._getBPP(b),I=Math.ceil(f*M/8),V=new Uint8Array(4*E),Z=new Uint32Array(V.buffer),ee=b.ctype,le=b.depth,K=o._bin.readUshort;if(ee==6){var vt=E<<2;if(le==8)for(var q=0;q<vt;q++)V[q]=s[q];if(le==16)for(q=0;q<vt;q++)V[q]=s[q<<1]}else if(ee==2){var Q=b.tabs.tRNS,wt=-1,bt=-1,Ut=-1;if(Q&&(wt=Q[0],bt=Q[1],Ut=Q[2]),le==8)for(q=0;q<E;q++){var it=3*q;V[qo=q<<2]=s[it],V[qo+1]=s[it+1],V[qo+2]=s[it+2],V[qo+3]=255,wt!=-1&&s[it]==wt&&s[it+1]==bt&&s[it+2]==Ut&&(V[qo+3]=0)}if(le==16)for(q=0;q<E;q++)it=6*q,V[qo=q<<2]=s[it],V[qo+1]=s[it+2],V[qo+2]=s[it+4],V[qo+3]=255,wt!=-1&&K(s,it)==wt&&K(s,it+2)==bt&&K(s,it+4)==Ut&&(V[qo+3]=0)}else if(ee==3){var zt=b.tabs.PLTE,Zt=b.tabs.tRNS,Mn=Zt?Zt.length:0;if(le==1)for(var kp=0;kp<m;kp++){var zp=kp*I,sa=kp*f;for(q=0;q<f;q++){var qo=sa+q<<2,ae=3*(wp=s[zp+(q>>3)]>>7-(7&q)&1);V[qo]=zt[ae],V[qo+1]=zt[ae+1],V[qo+2]=zt[ae+2],V[qo+3]=wp<Mn?Zt[wp]:255}}if(le==2)for(kp=0;kp<m;kp++)for(zp=kp*I,sa=kp*f,q=0;q<f;q++)qo=sa+q<<2,ae=3*(wp=s[zp+(q>>2)]>>6-((3&q)<<1)&3),V[qo]=zt[ae],V[qo+1]=zt[ae+1],V[qo+2]=zt[ae+2],V[qo+3]=wp<Mn?Zt[wp]:255;if(le==4)for(kp=0;kp<m;kp++)for(zp=kp*I,sa=kp*f,q=0;q<f;q++)qo=sa+q<<2,ae=3*(wp=s[zp+(q>>1)]>>4-((1&q)<<2)&15),V[qo]=zt[ae],V[qo+1]=zt[ae+1],V[qo+2]=zt[ae+2],V[qo+3]=wp<Mn?Zt[wp]:255;if(le==8)for(q=0;q<E;q++){var wp;qo=q<<2,ae=3*(wp=s[q]),V[qo]=zt[ae],V[qo+1]=zt[ae+1],V[qo+2]=zt[ae+2],V[qo+3]=wp<Mn?Zt[wp]:255}}else if(ee==4){if(le==8)for(q=0;q<E;q++){qo=q<<2;var Cp=s[Kt=q<<1];V[qo]=Cp,V[qo+1]=Cp,V[qo+2]=Cp,V[qo+3]=s[Kt+1]}if(le==16)for(q=0;q<E;q++){var Kt;qo=q<<2,Cp=s[Kt=q<<2],V[qo]=Cp,V[qo+1]=Cp,V[qo+2]=Cp,V[qo+3]=s[Kt+2]}}else if(ee==0){if(wt=b.tabs.tRNS?b.tabs.tRNS:-1,le==1)for(q=0;q<E;q++){var h0=(Cp=255*(s[q>>3]>>7-(7&q)&1))==255*wt?0:255;Z[q]=h0<<24|Cp<<16|Cp<<8|Cp}if(le==2)for(q=0;q<E;q++)h0=(Cp=85*(s[q>>2]>>6-((3&q)<<1)&3))==85*wt?0:255,Z[q]=h0<<24|Cp<<16|Cp<<8|Cp;if(le==4)for(q=0;q<E;q++)h0=(Cp=17*(s[q>>1]>>4-((1&q)<<2)&15))==17*wt?0:255,Z[q]=h0<<24|Cp<<16|Cp<<8|Cp;if(le==8)for(q=0;q<E;q++)h0=(Cp=s[q])==wt?0:255,Z[q]=h0<<24|Cp<<16|Cp<<8|Cp;if(le==16)for(q=0;q<E;q++)Cp=s[q<<1],h0=K(s,q<<1)==wt?0:255,Z[q]=h0<<24|Cp<<16|Cp<<8|Cp}return V},o.decode=function(s){for(var f,m=new Uint8Array(s),b=8,E=o._bin,M=E.readUshort,I=E.readUint,V={tabs:{},frames:[]},Z=new Uint8Array(m.length),ee=0,le=0,K=[137,80,78,71,13,10,26,10],vt=0;vt<8;vt++)if(m[vt]!=K[vt])throw"The input is not a PNG file!";for(;b<m.length;){var q=E.readUint(m,b);b+=4;var Q=E.readASCII(m,b,4);if(b+=4,Q=="IHDR")o.decode._IHDR(m,b,V);else if(Q=="IDAT"){for(vt=0;vt<q;vt++)Z[ee+vt]=m[b+vt];ee+=q}else if(Q=="acTL")V.tabs[Q]={num_frames:I(m,b),num_plays:I(m,b+4)},f=new Uint8Array(m.length);else if(Q=="fcTL"){le!=0&&((zp=V.frames[V.frames.length-1]).data=o.decode._decompress(V,f.slice(0,le),zp.rect.width,zp.rect.height),le=0);var wt={x:I(m,b+12),y:I(m,b+16),width:I(m,b+4),height:I(m,b+8)},bt=M(m,b+22);bt=M(m,b+20)/(bt==0?100:bt);var Ut={rect:wt,delay:Math.round(1e3*bt),dispose:m[b+24],blend:m[b+25]};V.frames.push(Ut)}else if(Q=="fdAT"){for(vt=0;vt<q-4;vt++)f[le+vt]=m[b+vt+4];le+=q-4}else if(Q=="pHYs")V.tabs[Q]=[E.readUint(m,b),E.readUint(m,b+4),m[b+8]];else if(Q=="cHRM")for(V.tabs[Q]=[],vt=0;vt<8;vt++)V.tabs[Q].push(E.readUint(m,b+4*vt));else if(Q=="tEXt"){V.tabs[Q]==null&&(V.tabs[Q]={});var it=E.nextZero(m,b),zt=E.readASCII(m,b,it-b),Zt=E.readASCII(m,it+1,b+q-it-1);V.tabs[Q][zt]=Zt}else if(Q=="iTXt"){V.tabs[Q]==null&&(V.tabs[Q]={}),it=0;var Mn=b;it=E.nextZero(m,Mn),zt=E.readASCII(m,Mn,it-Mn),m[Mn=it+1],m[Mn+1],Mn+=2,it=E.nextZero(m,Mn),E.readASCII(m,Mn,it-Mn),Mn=it+1,it=E.nextZero(m,Mn),E.readUTF8(m,Mn,it-Mn),Mn=it+1,Zt=E.readUTF8(m,Mn,q-(Mn-b)),V.tabs[Q][zt]=Zt}else if(Q=="PLTE")V.tabs[Q]=E.readBytes(m,b,q);else if(Q=="hIST"){var kp=V.tabs.PLTE.length/3;for(V.tabs[Q]=[],vt=0;vt<kp;vt++)V.tabs[Q].push(M(m,b+2*vt))}else if(Q=="tRNS")V.ctype==3?V.tabs[Q]=E.readBytes(m,b,q):V.ctype==0?V.tabs[Q]=M(m,b):V.ctype==2&&(V.tabs[Q]=[M(m,b),M(m,b+2),M(m,b+4)]);else if(Q=="gAMA")V.tabs[Q]=E.readUint(m,b)/1e5;else if(Q=="sRGB")V.tabs[Q]=m[b];else if(Q=="bKGD")V.ctype==0||V.ctype==4?V.tabs[Q]=[M(m,b)]:V.ctype==2||V.ctype==6?V.tabs[Q]=[M(m,b),M(m,b+2),M(m,b+4)]:V.ctype==3&&(V.tabs[Q]=m[b]);else if(Q=="IEND"){var zp;le!=0&&((zp=V.frames[V.frames.length-1]).data=o.decode._decompress(V,f.slice(0,le),zp.rect.width,zp.rect.height),le=0),V.data=o.decode._decompress(V,Z,V.width,V.height);break}b+=q,E.readUint(m,b),b+=4}return delete V.compress,delete V.interlace,delete V.filter,V},o.decode._decompress=function(s,f,m,b){return s.compress==0&&(f=o.decode._inflate(f)),s.interlace==0?f=o.decode._filterZero(f,s,0,m,b):s.interlace==1&&(f=o.decode._readInterlace(f,s)),f},o.decode._inflate=function(s){return l.inflate(s)},o.decode._readInterlace=function(s,f){for(var m=f.width,b=f.height,E=o.decode._getBPP(f),M=E>>3,I=Math.ceil(m*E/8),V=new Uint8Array(b*I),Z=0,ee=[0,0,4,0,2,0,1],le=[0,4,0,2,0,1,0],K=[8,8,8,4,4,2,2],vt=[8,8,4,4,2,2,1],q=0;q<7;){for(var Q=K[q],wt=vt[q],bt=0,Ut=0,it=ee[q];it<b;)it+=Q,Ut++;for(var zt=le[q];zt<m;)zt+=wt,bt++;var Zt=Math.ceil(bt*E/8);o.decode._filterZero(s,f,Z,bt,Ut);for(var Mn=0,kp=ee[q];kp<b;){for(var zp=le[q],sa=Z+Mn*Zt<<3;zp<m;){var qo;if(E==1&&(qo=(qo=s[sa>>3])>>7-(7&sa)&1,V[kp*I+(zp>>3)]|=qo<<7-(3&zp)),E==2&&(qo=(qo=s[sa>>3])>>6-(7&sa)&3,V[kp*I+(zp>>2)]|=qo<<6-((3&zp)<<1)),E==4&&(qo=(qo=s[sa>>3])>>4-(7&sa)&15,V[kp*I+(zp>>1)]|=qo<<4-((1&zp)<<2)),E>=8)for(var ae=kp*I+zp*M,wp=0;wp<M;wp++)V[ae+wp]=s[(sa>>3)+wp];sa+=E,zp+=wt}Mn++,kp+=Q}bt*Ut!=0&&(Z+=Ut*(1+Zt)),q+=1}return V},o.decode._getBPP=function(s){return[1,null,3,1,2,null,4][s.ctype]*s.depth},o.decode._filterZero=function(s,f,m,b,E){var M=o.decode._getBPP(f),I=Math.ceil(b*M/8),V=o.decode._paeth;M=Math.ceil(M/8);for(var Z=0;Z<E;Z++){var ee=m+Z*I,le=ee+Z+1,K=s[le-1];if(K==0)for(var vt=0;vt<I;vt++)s[ee+vt]=s[le+vt];else if(K==1){for(vt=0;vt<M;vt++)s[ee+vt]=s[le+vt];for(vt=M;vt<I;vt++)s[ee+vt]=s[le+vt]+s[ee+vt-M]&255}else if(Z==0){for(vt=0;vt<M;vt++)s[ee+vt]=s[le+vt];if(K==2)for(vt=M;vt<I;vt++)s[ee+vt]=255&s[le+vt];if(K==3)for(vt=M;vt<I;vt++)s[ee+vt]=s[le+vt]+(s[ee+vt-M]>>1)&255;if(K==4)for(vt=M;vt<I;vt++)s[ee+vt]=s[le+vt]+V(s[ee+vt-M],0,0)&255}else{if(K==2)for(vt=0;vt<I;vt++)s[ee+vt]=s[le+vt]+s[ee+vt-I]&255;if(K==3){for(vt=0;vt<M;vt++)s[ee+vt]=s[le+vt]+(s[ee+vt-I]>>1)&255;for(vt=M;vt<I;vt++)s[ee+vt]=s[le+vt]+(s[ee+vt-I]+s[ee+vt-M]>>1)&255}if(K==4){for(vt=0;vt<M;vt++)s[ee+vt]=s[le+vt]+V(0,s[ee+vt-I],0)&255;for(vt=M;vt<I;vt++)s[ee+vt]=s[le+vt]+V(s[ee+vt-M],s[ee+vt-I],s[ee+vt-M-I])&255}}}return s},o.decode._paeth=function(s,f,m){var b=s+f-m,E=Math.abs(b-s),M=Math.abs(b-f),I=Math.abs(b-m);return E<=M&&E<=I?s:M<=I?f:m},o.decode._IHDR=function(s,f,m){var b=o._bin;m.width=b.readUint(s,f),f+=4,m.height=b.readUint(s,f),f+=4,m.depth=s[f],f++,m.ctype=s[f],f++,m.compress=s[f],f++,m.filter=s[f],f++,m.interlace=s[f],f++},o._bin={nextZero:function(s,f){for(;s[f]!=0;)f++;return f},readUshort:function(s,f){return s[f]<<8|s[f+1]},writeUshort:function(s,f,m){s[f]=m>>8&255,s[f+1]=255&m},readUint:function(s,f){return 16777216*s[f]+(s[f+1]<<16|s[f+2]<<8|s[f+3])},writeUint:function(s,f,m){s[f]=m>>24&255,s[f+1]=m>>16&255,s[f+2]=m>>8&255,s[f+3]=255&m},readASCII:function(s,f,m){for(var b="",E=0;E<m;E++)b+=String.fromCharCode(s[f+E]);return b},writeASCII:function(s,f,m){for(var b=0;b<m.length;b++)s[f+b]=m.charCodeAt(b)},readBytes:function(s,f,m){for(var b=[],E=0;E<m;E++)b.push(s[f+E]);return b},pad:function(s){return s.length<2?"0"+s:s},readUTF8:function(s,f,m){for(var b,E="",M=0;M<m;M++)E+="%"+o._bin.pad(s[f+M].toString(16));try{b=decodeURIComponent(E)}catch{return o._bin.readASCII(s,f,m)}return b}},o._copyTile=function(s,f,m,b,E,M,I,V,Z){for(var ee=Math.min(f,E),le=Math.min(m,M),K=0,vt=0,q=0;q<le;q++)for(var Q=0;Q<ee;Q++)if(I>=0&&V>=0?(K=q*f+Q<<2,vt=(V+q)*E+I+Q<<2):(K=(-V+q)*f-I+Q<<2,vt=q*E+Q<<2),Z==0)b[vt]=s[K],b[vt+1]=s[K+1],b[vt+2]=s[K+2],b[vt+3]=s[K+3];else if(Z==1){var wt=s[K+3]*.00392156862745098,bt=s[K]*wt,Ut=s[K+1]*wt,it=s[K+2]*wt,zt=b[vt+3]*(1/255),Zt=b[vt]*zt,Mn=b[vt+1]*zt,kp=b[vt+2]*zt,zp=1-wt,sa=wt+zt*zp,qo=sa==0?0:1/sa;b[vt+3]=255*sa,b[vt+0]=(bt+Zt*zp)*qo,b[vt+1]=(Ut+Mn*zp)*qo,b[vt+2]=(it+kp*zp)*qo}else if(Z==2)wt=s[K+3],bt=s[K],Ut=s[K+1],it=s[K+2],zt=b[vt+3],Zt=b[vt],Mn=b[vt+1],kp=b[vt+2],wt==zt&&bt==Zt&&Ut==Mn&&it==kp?(b[vt]=0,b[vt+1]=0,b[vt+2]=0,b[vt+3]=0):(b[vt]=bt,b[vt+1]=Ut,b[vt+2]=it,b[vt+3]=wt);else if(Z==3){if(wt=s[K+3],bt=s[K],Ut=s[K+1],it=s[K+2],zt=b[vt+3],Zt=b[vt],Mn=b[vt+1],kp=b[vt+2],wt==zt&&bt==Zt&&Ut==Mn&&it==kp)continue;if(wt<220&&zt>20)return!1}return!0},o.encode=function(s,f,m,b,E,M){b==null&&(b=0),M==null&&(M=!1);for(var I=new Uint8Array(s[0].byteLength*s.length+100),V=[137,80,78,71,13,10,26,10],Z=0;Z<8;Z++)I[Z]=V[Z];var ee=8,le=o._bin,K=o.crc.crc,vt=le.writeUint,q=le.writeUshort,Q=le.writeASCII,wt=o.encode.compressPNG(s,f,m,b,M);vt(I,ee,13),Q(I,ee+=4,"IHDR"),vt(I,ee+=4,f),vt(I,ee+=4,m),I[ee+=4]=wt.depth,I[++ee]=wt.ctype,I[++ee]=0,I[++ee]=0,I[++ee]=0,vt(I,++ee,K(I,ee-17,17)),vt(I,ee+=4,1),Q(I,ee+=4,"sRGB"),I[ee+=4]=1,vt(I,++ee,K(I,ee-5,5)),ee+=4;var bt=s.length>1;if(bt&&(vt(I,ee,8),Q(I,ee+=4,"acTL"),vt(I,ee+=4,s.length),vt(I,ee+=4,0),vt(I,ee+=4,K(I,ee-12,12)),ee+=4),wt.ctype==3){for(vt(I,ee,3*(qo=wt.plte.length)),Q(I,ee+=4,"PLTE"),ee+=4,Z=0;Z<qo;Z++){var Ut=3*Z,it=wt.plte[Z],zt=255&it,Zt=it>>8&255,Mn=it>>16&255;I[ee+Ut+0]=zt,I[ee+Ut+1]=Zt,I[ee+Ut+2]=Mn}if(vt(I,ee+=3*qo,K(I,ee-3*qo-4,3*qo+4)),ee+=4,wt.gotAlpha){for(vt(I,ee,qo),Q(I,ee+=4,"tRNS"),ee+=4,Z=0;Z<qo;Z++)I[ee+Z]=wt.plte[Z]>>24&255;vt(I,ee+=qo,K(I,ee-qo-4,qo+4)),ee+=4}}for(var kp=0,zp=0;zp<wt.frames.length;zp++){var sa=wt.frames[zp];bt&&(vt(I,ee,26),Q(I,ee+=4,"fcTL"),vt(I,ee+=4,kp++),vt(I,ee+=4,sa.rect.width),vt(I,ee+=4,sa.rect.height),vt(I,ee+=4,sa.rect.x),vt(I,ee+=4,sa.rect.y),q(I,ee+=4,E[zp]),q(I,ee+=2,1e3),I[ee+=2]=sa.dispose,I[++ee]=sa.blend,vt(I,++ee,K(I,ee-30,30)),ee+=4);var qo,ae=sa.cimg;vt(I,ee,(qo=ae.length)+(zp==0?0:4));var wp=ee+=4;for(Q(I,ee,zp==0?"IDAT":"fdAT"),ee+=4,zp!=0&&(vt(I,ee,kp++),ee+=4),Z=0;Z<qo;Z++)I[ee+Z]=ae[Z];vt(I,ee+=qo,K(I,wp,ee-wp)),ee+=4}return vt(I,ee,0),Q(I,ee+=4,"IEND"),vt(I,ee+=4,K(I,ee-4,4)),ee+=4,I.buffer.slice(0,ee)},o.encode.compressPNG=function(s,f,m,b,E){for(var M=o.encode.compress(s,f,m,b,!1,E),I=0;I<s.length;I++){var V=M.frames[I],Z=(V.rect.width,V.rect.height),ee=V.bpl,le=V.bpp,K=new Uint8Array(Z*ee+Z);V.cimg=o.encode._filterZero(V.img,Z,le,ee,K)}return M},o.encode.compress=function(s,f,m,b,E,M){M==null&&(M=!1);for(var I=6,V=8,Z=4,ee=255,le=0;le<s.length;le++)for(var K=new Uint8Array(s[le]),vt=K.length,q=0;q<vt;q+=4)ee&=K[q+3];var Q=ee!=255,wt={},bt=[];if(s.length!=0&&(wt[0]=0,bt.push(0),b!=0&&b--),b!=0){var Ut=o.quantize(s,b,E);for(s=Ut.bufs,q=0;q<Ut.plte.length;q++)wt[zt=Ut.plte[q].est.rgba]==null&&(wt[zt]=bt.length,bt.push(zt))}else for(le=0;le<s.length;le++){var it=new Uint32Array(s[le]);for(vt=it.length,q=0;q<vt;q++){var zt=it[q];if((q<f||zt!=it[q-1]&&zt!=it[q-f])&&wt[zt]==null&&(wt[zt]=bt.length,bt.push(zt),bt.length>=300))break}}var Zt=!!Q&&E,Mn=bt.length;Mn<=256&&M==0&&(V=Mn<=2?1:Mn<=4?2:Mn<=16?4:8,E&&(V=8),Q=!0);var kp=[];for(le=0;le<s.length;le++){var zp=new Uint8Array(s[le]),sa=new Uint32Array(zp.buffer),qo=0,ae=0,wp=f,Cp=m,Kt=0;if(le!=0&&!Zt){for(var h0=E||le==1||kp[kp.length-2].dispose==2?1:2,Pp=0,d0=1e9,x0=0;x0<h0;x0++){for(var Dp=new Uint8Array(s[le-1-x0]),c0=new Uint32Array(s[le-1-x0]),u0=f,y0=m,M0=-1,sm=-1,mm=0;mm<m;mm++)for(var Mm=0;Mm<f;Mm++)sa[q=mm*f+Mm]!=c0[q]&&(Mm<u0&&(u0=Mm),Mm>M0&&(M0=Mm),mm<y0&&(y0=mm),mm>sm&&(sm=mm));var v1=M0==-1?1:(M0-u0+1)*(sm-y0+1);v1<d0&&(d0=v1,Pp=x0,M0==-1?(qo=ae=0,wp=Cp=1):(qo=u0,ae=y0,wp=M0-u0+1,Cp=sm-y0+1))}Dp=new Uint8Array(s[le-1-Pp]),Pp==1&&(kp[kp.length-1].dispose=2);var v0=new Uint8Array(wp*Cp*4);new Uint32Array(v0.buffer),o._copyTile(Dp,f,m,v0,wp,Cp,-qo,-ae,0),o._copyTile(zp,f,m,v0,wp,Cp,-qo,-ae,3)?(o._copyTile(zp,f,m,v0,wp,Cp,-qo,-ae,2),Kt=1):(o._copyTile(zp,f,m,v0,wp,Cp,-qo,-ae,0),Kt=0),zp=v0,sa=new Uint32Array(zp.buffer)}var D1=4*wp;if(Mn<=256&&M==0){for(D1=Math.ceil(V*wp/8),v0=new Uint8Array(D1*Cp),mm=0;mm<Cp;mm++){q=mm*D1;var P1=mm*wp;if(V==8)for(Mm=0;Mm<wp;Mm++)v0[q+Mm]=wt[sa[P1+Mm]];else if(V==4)for(Mm=0;Mm<wp;Mm++)v0[q+(Mm>>1)]|=wt[sa[P1+Mm]]<<4-4*(1&Mm);else if(V==2)for(Mm=0;Mm<wp;Mm++)v0[q+(Mm>>2)]|=wt[sa[P1+Mm]]<<6-2*(3&Mm);else if(V==1)for(Mm=0;Mm<wp;Mm++)v0[q+(Mm>>3)]|=wt[sa[P1+Mm]]<<7-1*(7&Mm)}zp=v0,I=3,Z=1}else if(Q==0&&s.length==1){v0=new Uint8Array(wp*Cp*3);var ig=wp*Cp;for(q=0;q<ig;q++){var w1=3*q,o1=4*q;v0[w1]=zp[o1],v0[w1+1]=zp[o1+1],v0[w1+2]=zp[o1+2]}zp=v0,I=2,Z=3,D1=3*wp}kp.push({rect:{x:qo,y:ae,width:wp,height:Cp},img:zp,bpl:D1,bpp:Z,blend:Kt,dispose:Zt?1:0})}return{ctype:I,depth:V,plte:bt,gotAlpha:Q,frames:kp}},o.encode._filterZero=function(s,f,m,b,E){for(var M=[],I=0;I<5;I++)if(!(f*b>5e5)||I!=2&&I!=3&&I!=4){for(var V=0;V<f;V++)o.encode._filterLine(E,s,V,b,m,I);if(M.push(l.deflate(E)),m==1)break}for(var Z,ee=1e9,le=0;le<M.length;le++)M[le].length<ee&&(Z=le,ee=M[le].length);return M[Z]},o.encode._filterLine=function(s,f,m,b,E,M){var I=m*b,V=I+m,Z=o.decode._paeth;if(s[V]=M,V++,M==0)for(var ee=0;ee<b;ee++)s[V+ee]=f[I+ee];else if(M==1){for(ee=0;ee<E;ee++)s[V+ee]=f[I+ee];for(ee=E;ee<b;ee++)s[V+ee]=f[I+ee]-f[I+ee-E]+256&255}else if(m==0){for(ee=0;ee<E;ee++)s[V+ee]=f[I+ee];if(M==2)for(ee=E;ee<b;ee++)s[V+ee]=f[I+ee];if(M==3)for(ee=E;ee<b;ee++)s[V+ee]=f[I+ee]-(f[I+ee-E]>>1)+256&255;if(M==4)for(ee=E;ee<b;ee++)s[V+ee]=f[I+ee]-Z(f[I+ee-E],0,0)+256&255}else{if(M==2)for(ee=0;ee<b;ee++)s[V+ee]=f[I+ee]+256-f[I+ee-b]&255;if(M==3){for(ee=0;ee<E;ee++)s[V+ee]=f[I+ee]+256-(f[I+ee-b]>>1)&255;for(ee=E;ee<b;ee++)s[V+ee]=f[I+ee]+256-(f[I+ee-b]+f[I+ee-E]>>1)&255}if(M==4){for(ee=0;ee<E;ee++)s[V+ee]=f[I+ee]+256-Z(0,f[I+ee-b],0)&255;for(ee=E;ee<b;ee++)s[V+ee]=f[I+ee]+256-Z(f[I+ee-E],f[I+ee-b],f[I+ee-E-b])&255}}},o.crc={table:(function(){for(var s=new Uint32Array(256),f=0;f<256;f++){for(var m=f,b=0;b<8;b++)1&m?m=3988292384^m>>>1:m>>>=1;s[f]=m}return s})(),update:function(s,f,m,b){for(var E=0;E<b;E++)s=o.crc.table[255&(s^f[m+E])]^s>>>8;return s},crc:function(s,f,m){return 4294967295^o.crc.update(4294967295,s,f,m)}},o.quantize=function(s,f,m){for(var b=[],E=0,M=0;M<s.length;M++)b.push(o.encode.alphaMul(new Uint8Array(s[M]),m)),E+=s[M].byteLength;var I=new Uint8Array(E),V=new Uint32Array(I.buffer),Z=0;for(M=0;M<b.length;M++){for(var ee=b[M],le=ee.length,K=0;K<le;K++)I[Z+K]=ee[K];Z+=le}var vt={i0:0,i1:I.length,bst:null,est:null,tdst:0,left:null,right:null};vt.bst=o.quantize.stats(I,vt.i0,vt.i1),vt.est=o.quantize.estats(vt.bst);for(var q=[vt];q.length<f;){var Q=0,wt=0;for(M=0;M<q.length;M++)q[M].est.L>Q&&(Q=q[M].est.L,wt=M);if(Q<.001)break;var bt=q[wt],Ut=o.quantize.splitPixels(I,V,bt.i0,bt.i1,bt.est.e,bt.est.eMq255),it={i0:bt.i0,i1:Ut,bst:null,est:null,tdst:0,left:null,right:null};it.bst=o.quantize.stats(I,it.i0,it.i1),it.est=o.quantize.estats(it.bst);var zt={i0:Ut,i1:bt.i1,bst:null,est:null,tdst:0,left:null,right:null};for(zt.bst={R:[],m:[],N:bt.bst.N-it.bst.N},M=0;M<16;M++)zt.bst.R[M]=bt.bst.R[M]-it.bst.R[M];for(M=0;M<4;M++)zt.bst.m[M]=bt.bst.m[M]-it.bst.m[M];zt.est=o.quantize.estats(zt.bst),bt.left=it,bt.right=zt,q[wt]=it,q.push(zt)}q.sort(function(h0,Pp){return Pp.bst.N-h0.bst.N});for(var Zt=0;Zt<b.length;Zt++){var Mn=o.quantize.planeDst,kp=new Uint8Array(b[Zt].buffer),zp=new Uint32Array(b[Zt].buffer),sa=kp.length;for(M=0;M<sa;M+=4){for(var qo=kp[M]*.00392156862745098,ae=kp[M+1]*.00392156862745098,wp=kp[M+2]*.00392156862745098,Cp=kp[M+3]*.00392156862745098,Kt=vt;Kt.left;)Kt=Mn(Kt.est,qo,ae,wp,Cp)<=0?Kt.left:Kt.right;zp[M>>2]=Kt.est.rgba}b[Zt]=zp.buffer}return{bufs:b,plte:q}},o.quantize.getNearest=function(s,f,m,b,E){if(s.left==null)return s.tdst=o.quantize.dist(s.est.q,f,m,b,E),s;var M=o.quantize.planeDst(s.est,f,m,b,E),I=s.left,V=s.right;M>0&&(I=s.right,V=s.left);var Z=o.quantize.getNearest(I,f,m,b,E);if(Z.tdst<=M*M)return Z;var ee=o.quantize.getNearest(V,f,m,b,E);return ee.tdst<Z.tdst?ee:Z},o.quantize.planeDst=function(s,f,m,b,E){var M=s.e;return M[0]*f+M[1]*m+M[2]*b+M[3]*E-s.eMq},o.quantize.dist=function(s,f,m,b,E){var M=f-s[0],I=m-s[1],V=b-s[2],Z=E-s[3];return M*M+I*I+V*V+Z*Z},o.quantize.splitPixels=function(s,f,m,b,E,M){var I=o.quantize.vecDot;for(b-=4;m<b;){for(;I(s,m,E)<=M;)m+=4;for(;I(s,b,E)>M;)b-=4;if(m>=b)break;var V=f[m>>2];f[m>>2]=f[b>>2],f[b>>2]=V,m+=4,b-=4}for(;I(s,m,E)>M;)m-=4;return m+4},o.quantize.vecDot=function(s,f,m){return s[f]*m[0]+s[f+1]*m[1]+s[f+2]*m[2]+s[f+3]*m[3]},o.quantize.stats=function(s,f,m){for(var b=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],E=[0,0,0,0],M=m-f>>2,I=f;I<m;I+=4){var V=s[I]*.00392156862745098,Z=s[I+1]*(1/255),ee=s[I+2]*(1/255),le=s[I+3]*(1/255);E[0]+=V,E[1]+=Z,E[2]+=ee,E[3]+=le,b[0]+=V*V,b[1]+=V*Z,b[2]+=V*ee,b[3]+=V*le,b[5]+=Z*Z,b[6]+=Z*ee,b[7]+=Z*le,b[10]+=ee*ee,b[11]+=ee*le,b[15]+=le*le}return b[4]=b[1],b[8]=b[2],b[12]=b[3],b[9]=b[6],b[13]=b[7],b[14]=b[11],{R:b,m:E,N:M}},o.quantize.estats=function(s){var f=s.R,m=s.m,b=s.N,E=m[0],M=m[1],I=m[2],V=m[3],Z=b==0?0:1/b,ee=[f[0]-E*E*Z,f[1]-E*M*Z,f[2]-E*I*Z,f[3]-E*V*Z,f[4]-M*E*Z,f[5]-M*M*Z,f[6]-M*I*Z,f[7]-M*V*Z,f[8]-I*E*Z,f[9]-I*M*Z,f[10]-I*I*Z,f[11]-I*V*Z,f[12]-V*E*Z,f[13]-V*M*Z,f[14]-V*I*Z,f[15]-V*V*Z],le=ee,K=o.M4,vt=[.5,.5,.5,.5],q=0,Q=0;if(b!=0)for(var wt=0;wt<10&&(vt=K.multVec(le,vt),Q=Math.sqrt(K.dot(vt,vt)),vt=K.sml(1/Q,vt),!(Math.abs(Q-q)<1e-9));wt++)q=Q;var bt=[E*Z,M*Z,I*Z,V*Z],Ut=K.dot(K.sml(255,bt),vt),it=bt[3]<.001?0:1/bt[3];return{Cov:ee,q:bt,e:vt,L:q,eMq255:Ut,eMq:K.dot(vt,bt),rgba:(Math.round(255*bt[3])<<24|Math.round(255*bt[2]*it)<<16|Math.round(255*bt[1]*it)<<8|Math.round(255*bt[0]*it))>>>0}},o.M4={multVec:function(s,f){return[s[0]*f[0]+s[1]*f[1]+s[2]*f[2]+s[3]*f[3],s[4]*f[0]+s[5]*f[1]+s[6]*f[2]+s[7]*f[3],s[8]*f[0]+s[9]*f[1]+s[10]*f[2]+s[11]*f[3],s[12]*f[0]+s[13]*f[1]+s[14]*f[2]+s[15]*f[3]]},dot:function(s,f){return s[0]*f[0]+s[1]*f[1]+s[2]*f[2]+s[3]*f[3]},sml:function(s,f){return[s*f[0],s*f[1],s*f[2],s*f[3]]}},o.encode.alphaMul=function(s,f){for(var m=new Uint8Array(s.length),b=s.length>>2,E=0;E<b;E++){var M=E<<2,I=s[M+3];f&&(I=I<128?0:255);var V=I*(1/255);m[M+0]=s[M+0]*V,m[M+1]=s[M+1]*V,m[M+2]=s[M+2]*V,m[M+3]=I}return m}})(a,t(788))},165:r=>{r.exports=function(e,t){var a,o,l,s,f,m,b,E,M,I,V,Z,ee,le,K,vt,q,Q,wt,bt,Ut,it,zt,Zt,Mn;a=e.state,o=e.next_in,Zt=e.input,l=o+(e.avail_in-5),s=e.next_out,Mn=e.output,f=s-(t-e.avail_out),m=s+(e.avail_out-257),b=a.dmax,E=a.wsize,M=a.whave,I=a.wnext,V=a.window,Z=a.hold,ee=a.bits,le=a.lencode,K=a.distcode,vt=(1<<a.lenbits)-1,q=(1<<a.distbits)-1;e:do{ee<15&&(Z+=Zt[o++]<<ee,ee+=8,Z+=Zt[o++]<<ee,ee+=8),Q=le[Z&vt];t:for(;;){if(Z>>>=wt=Q>>>24,ee-=wt,(wt=Q>>>16&255)==0)Mn[s++]=65535&Q;else{if(!(16&wt)){if(64&wt){if(32&wt){a.mode=12;break e}e.msg="invalid literal/length code",a.mode=30;break e}Q=le[(65535&Q)+(Z&(1<<wt)-1)];continue t}for(bt=65535&Q,(wt&=15)&&(ee<wt&&(Z+=Zt[o++]<<ee,ee+=8),bt+=Z&(1<<wt)-1,Z>>>=wt,ee-=wt),ee<15&&(Z+=Zt[o++]<<ee,ee+=8,Z+=Zt[o++]<<ee,ee+=8),Q=K[Z&q];;){if(Z>>>=wt=Q>>>24,ee-=wt,16&(wt=Q>>>16&255)){if(Ut=65535&Q,ee<(wt&=15)&&(Z+=Zt[o++]<<ee,(ee+=8)<wt&&(Z+=Zt[o++]<<ee,ee+=8)),(Ut+=Z&(1<<wt)-1)>b){e.msg="invalid distance too far back",a.mode=30;break e}if(Z>>>=wt,ee-=wt,Ut>(wt=s-f)){if((wt=Ut-wt)>M&&a.sane){e.msg="invalid distance too far back",a.mode=30;break e}if(it=0,zt=V,I===0){if(it+=E-wt,wt<bt){bt-=wt;do Mn[s++]=V[it++];while(--wt);it=s-Ut,zt=Mn}}else if(I<wt){if(it+=E+I-wt,(wt-=I)<bt){bt-=wt;do Mn[s++]=V[it++];while(--wt);if(it=0,I<bt){bt-=wt=I;do Mn[s++]=V[it++];while(--wt);it=s-Ut,zt=Mn}}}else if(it+=I-wt,wt<bt){bt-=wt;do Mn[s++]=V[it++];while(--wt);it=s-Ut,zt=Mn}for(;bt>2;)Mn[s++]=zt[it++],Mn[s++]=zt[it++],Mn[s++]=zt[it++],bt-=3;bt&&(Mn[s++]=zt[it++],bt>1&&(Mn[s++]=zt[it++]))}else{it=s-Ut;do Mn[s++]=Mn[it++],Mn[s++]=Mn[it++],Mn[s++]=Mn[it++],bt-=3;while(bt>2);bt&&(Mn[s++]=Mn[it++],bt>1&&(Mn[s++]=Mn[it++]))}break}if(64&wt){e.msg="invalid distance code",a.mode=30;break e}Q=K[(65535&Q)+(Z&(1<<wt)-1)]}}break}}while(o<l&&s<m);o-=bt=ee>>3,Z&=(1<<(ee-=bt<<3))-1,e.next_in=o,e.next_out=s,e.avail_in=o<l?l-o+5:5-(o-l),e.avail_out=s<m?m-s+257:257-(s-m),a.hold=Z,a.bits=ee}},185:()=>{$3Dmol.workerString=(function(){self.onmessage=function(r){var e=r.data,t=e.type;if(t<0)self.atomData=e.atoms,self.volume=e.volume,self.ps=new ProteinSurface;else{var a=self.ps;a.initparm(e.expandedExtent,t!=1,self.volume),a.fillvoxels(self.atomData,e.extendedAtoms),a.buildboundary(),t!==4&&t!==2||(a.fastdistancemap(),a.boundingatom(!1),a.fillvoxelswaals(self.atomData,e.extendedAtoms)),a.marchingcube(t);var o=a.getFacesAndVertices(e.atomsToShow);self.postMessage(o)}}}).toString().replace(/(^.*?\{|\}$)/g,""),$3Dmol.workerString+=`;
function _classCallCheck() {};`,$3Dmol.workerString+=`;
`+$3Dmol.Vector3.toString(),$3Dmol.workerString+=`;
`+$3Dmol.MarchingCubeInitializer.toString()+`;

`,$3Dmol.workerString+=`;
`+$3Dmol.PointGrid.toString()+`;
`,$3Dmol.workerString+=`;
var ProteinSurface = `+$3Dmol.ProteinSurface.toString()+`;
`,$3Dmol.SurfaceWorker=window.URL?window.URL.createObjectURL(new Blob([$3Dmol.workerString],{type:"text/javascript"})):void 0},222:(r,e,t)=>{t.r(e),t.d(e,{CC:()=>o,Color:()=>a,builtinColorSchemes:()=>M,chains:()=>E,elementColors:()=>m,htmlColors:()=>l,residues:()=>b,ssColors:()=>s});class a{constructor(V,Z,ee){return this.r=0,this.g=0,this.b=0,arguments.length>1&&typeof V=="number"?(this.r=V||0,this.g=Z||0,this.b=ee||0,this):this.set(V||0)}set(V){return V instanceof a?V.clone():(typeof V=="number"?this.setHex(V):typeof V=="object"&&(this.r=V?.r||0,this.g=V?.g||0,this.b=V?.b||0),this)}setHex(V){return V=Math.floor(V),this.r=(V>>16&255)/255,this.g=(V>>8&255)/255,this.b=(255&V)/255,this}getHex(){return Math.round(255*this.r)<<16|Math.round(255*this.g)<<8|Math.round(255*this.b)}clone(){return new a(this.r,this.g,this.b)}copy(V){return this.r=V.r,this.g=V.g,this.b=V.b,this}scaled(){var V={};return V.r=Math.round(255*this.r),V.g=Math.round(255*this.g),V.b=Math.round(255*this.b),V.a=1,V}}class o{static color(V){if(!V)return o.cache[0];if(V instanceof a)return V;if(typeof V=="number"&&o.cache[V]!==void 0)return o.cache[V];if(V&&Array.isArray(V))return V.map(o.color);let Z=o.getHex(V),ee=new a(Z);return o.cache[Z]=ee,ee}static getHex(V){if(Array.isArray(V))return V.map(o.getHex);if(typeof V=="string"){let Z=V;if(!isNaN(parseInt(Z)))return parseInt(Z);if(Z=Z.trim(),Z.length==4&&Z[0]=="#"&&(Z="#"+Z[1]+Z[1]+Z[2]+Z[2]+Z[3]+Z[3]),Z.length==7&&Z[0]=="#")return parseInt(Z.substring(1),16);let ee=o.rgbRegEx.exec(Z);if(ee){ee[1]!=""&&console.log("WARNING: Opacity value in rgba ignored.  Specify separately as opacity attribute.");let K=0;for(let vt=2;vt<5;vt++){K*=256;let q=ee[vt].endsWith("%")?255*parseFloat(ee[vt])/100:parseFloat(ee[vt]);K+=Math.round(q)}return K}let le=l[Z.toLowerCase()];return le!==void 0?le:(console.error("color not found",V.toLowerCase(),l),0)}return V}}o.rgbRegEx=/rgb(a?)\(\s*([^ ,\)\t]+)\s*,\s*([^ ,\)\t]+)\s*,\s*([^ ,\)\t]+)/i,o.cache={0:new a(0)};const l={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgrey:11119017,darkgreen:25600,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,grey:8421504,green:32768,greenyellow:11403055,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgrey:13882323,lightgreen:9498256,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074,b:255,g:32768,r:16711680,c:49087,m:12517567,y:12566272,k:0,w:16777215},s={pyMol:{h:16711680,s:16776960,c:65280},Jmol:{h:16711808,s:16762880,c:16777215}},f={H:16777215,He:16761035,HE:16761035,Li:11674146,LI:11674146,B:65280,C:13158600,N:9408511,O:15728640,F:14329120,Na:255,NA:255,Mg:2263842,MG:2263842,Al:8421520,AL:8421520,Si:14329120,SI:14329120,P:16753920,S:16762930,Cl:65280,CL:65280,Ca:8421520,CA:8421520,Ti:8421520,TI:8421520,Cr:8421520,CR:8421520,Mn:8421520,MN:8421520,Fe:16753920,FE:16753920,Ni:10824234,NI:10824234,Cu:10824234,CU:10824234,Zn:10824234,ZN:10824234,Br:10824234,BR:10824234,Ag:8421520,AG:8421520,I:10494192,Ba:16753920,BA:16753920,Au:14329120,AU:14329120},m={defaultColor:16716947,Jmol:{H:16777215,He:14286847,HE:14286847,Li:13402367,LI:13402367,Be:12779264,BE:12779264,B:16758197,C:9474192,N:3166456,O:16715021,F:9494608,Ne:11789301,NE:11789301,Na:11230450,NA:11230450,Mg:9109248,MG:9109248,Al:12560038,AL:12560038,Si:1578e4,SI:1578e4,P:16744448,S:16777008,Cl:2093087,CL:2093087,Ar:8442339,AR:8442339,K:9388244,Ca:4062976,CA:4062976,Sc:15132390,SC:15132390,Ti:12567239,TI:12567239,V:10921643,Cr:9083335,CR:9083335,Mn:10255047,MN:10255047,Fe:14706227,FE:14706227,Co:15765664,CO:15765664,Ni:5296208,NI:5296208,Cu:13140019,CU:13140019,Zn:8224944,ZN:8224944,Ga:12750735,GA:12750735,Ge:6721423,GE:6721423,As:12419299,AS:12419299,Se:16752896,SE:16752896,Br:10889513,BR:10889513,Kr:6076625,KR:6076625,Rb:7351984,RB:7351984,Sr:65280,SR:65280,Y:9764863,Zr:9756896,ZR:9756896,Nb:7586505,NB:7586505,Mo:5551541,MO:5551541,Tc:3907230,TC:3907230,Ru:2396047,RU:2396047,Rh:687500,RH:687500,Pd:27013,PD:27013,Ag:12632256,AG:12632256,Cd:16767375,CD:16767375,In:10909043,IN:10909043,Sn:6717568,SN:6717568,Sb:10380213,SB:10380213,Te:13924864,TE:13924864,I:9699476,Xe:4366e3,XE:4366e3,Cs:5707663,CS:5707663,Ba:51456,BA:51456,La:7394559,LA:7394559,Ce:16777159,CE:16777159,Pr:14286791,PR:14286791,Nd:13107143,ND:13107143,Pm:10747847,PM:10747847,Sm:9437127,SM:9437127,Eu:6422471,EU:6422471,Gd:4587463,GD:4587463,Tb:3211207,TB:3211207,Dy:2097095,DY:2097095,Ho:65436,HO:65436,Er:58997,ER:58997,Tm:54354,TM:54354,Yb:48952,YB:48952,Lu:43812,LU:43812,Hf:5096191,HF:5096191,Ta:5089023,TA:5089023,W:2200790,Re:2522539,RE:2522539,Os:2516630,OS:2516630,Ir:1528967,IR:1528967,Pt:13684960,PT:13684960,Au:16765219,AU:16765219,Hg:12105936,HG:12105936,Tl:10900557,TL:10900557,Pb:5724513,PB:5724513,Bi:10375093,BI:10375093,Po:11230208,PO:11230208,At:7688005,AT:7688005,Rn:4358806,RN:4358806,Fr:4325478,FR:4325478,Ra:32e3,RA:32e3,Ac:7384058,AC:7384058,Th:47871,TH:47871,Pa:41471,PA:41471,U:36863,Np:33023,NP:33023,Pu:27647,PU:27647,Am:5528818,AM:5528818,Cm:7888099,CM:7888099,Bk:9064419,BK:9064419,Cf:10565332,CF:10565332,Es:11739092,ES:11739092,Fm:11739066,FM:11739066,Md:11734438,MD:11734438,No:12389767,NO:12389767,Lr:13041766,LR:13041766,Rf:13369433,RF:13369433,Db:13697103,DB:13697103,Sg:14221381,SG:14221381,Bh:14680120,BH:14680120,Hs:15073326,HS:15073326,Mt:15400998,MT:15400998},rasmol:f,defaultColors:Object.assign({},f),greenCarbon:Object.assign(Object.assign({},f),{C:65280}),cyanCarbon:Object.assign(Object.assign({},f),{C:65535}),magentaCarbon:Object.assign(Object.assign({},f),{C:16711935}),yellowCarbon:Object.assign(Object.assign({},f),{C:16776960}),whiteCarbon:Object.assign(Object.assign({},f),{C:16777215}),orangeCarbon:Object.assign(Object.assign({},f),{C:16753920}),purpleCarbon:Object.assign(Object.assign({},f),{C:8388736}),blueCarbon:Object.assign(Object.assign({},f),{C:255})},b={amino:{ALA:13158600,ARG:1334015,ASN:56540,ASP:15075850,CYS:15132160,GLN:56540,GLU:15075850,GLY:15461355,HIS:8553170,ILE:1016335,LEU:1016335,LYS:1334015,MET:15132160,PHE:3289770,PRO:14456450,SER:16422400,THR:16422400,TRP:11819700,TYR:3289770,VAL:1016335,ASX:16738740,GLX:16738740},shapely:{ALA:9240460,ARG:124,ASN:16743536,ASP:10485826,CYS:16777072,GLN:16731212,GLU:6684672,GLY:16777215,HIS:7368959,ILE:19456,LEU:4546117,LYS:4671416,MET:12099650,PHE:5459026,PRO:5395026,SER:16740418,THR:12078080,TRP:5195264,TYR:9203788,VAL:16747775,ASX:16711935,GLX:16711935},nucleic:{A:10526975,G:16740464,I:8454143,C:16747595,T:10551200,U:16744576}},E={atom:{A:12636415,B:11599792,C:16761032,D:16777088,E:16761087,F:11596016,G:16765040,H:15761536,I:16113331,J:49151,K:13458524,L:6737322,M:10145074,N:15631086,O:52945,P:65407,Q:3978097,R:139,S:12433259,T:25600,U:8388608,V:8421376,W:8388736,X:32896,Y:12092939,Z:11674146},hetatm:{A:9478351,B:8441752,C:13602992,D:13619056,E:13603023,F:8437952,G:13607008,H:12603504,I:12955267,J:42959,K:11881548,L:5682578,M:9090346,N:12481214,O:46753,P:53103,Q:3447649,R:187,S:10854235,T:37888,U:11534336,V:11579392,W:11534512,X:45232,Y:15250963,Z:12726834}},M={ssPyMol:{prop:"ss",map:s.pyMol},ssJmol:{prop:"ss",map:s.Jmol},Jmol:{prop:"elem",map:m.Jmol},amino:{prop:"resn",map:b.amino},shapely:{prop:"resn",map:b.shapely},nucleic:{prop:"resn",map:b.nucleic},chain:{prop:"chain",map:E.atom},rasmol:{prop:"elem",map:m.rasmol},default:{prop:"elem",map:m.defaultColors},greenCarbon:{prop:"elem",map:m.greenCarbon},chainHetatm:{prop:"chain",map:E.hetatm},cyanCarbon:{prop:"elem",map:m.cyanCarbon},magentaCarbon:{prop:"elem",map:m.magentaCarbon},purpleCarbon:{prop:"elem",map:m.purpleCarbon},whiteCarbon:{prop:"elem",map:m.whiteCarbon},orangeCarbon:{prop:"elem",map:m.orangeCarbon},yellowCarbon:{prop:"elem",map:m.yellowCarbon},blueCarbon:{prop:"elem",map:m.blueCarbon}}},307:r=>{typeof r.exports=="object"&&(r.exports=window.$3Dmol)},358:(r,e,t)=>{var a=t(981),o=15,l=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],s=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],f=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],m=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(b,E,M,I,V,Z,ee,le){var K,vt,q,Q,wt,bt,Ut,it,zt,Zt=le.bits,Mn=0,kp=0,zp=0,sa=0,qo=0,ae=0,wp=0,Cp=0,Kt=0,h0=0,Pp=null,d0=0,x0=new a.Buf16(16),Dp=new a.Buf16(16),c0=null,u0=0;for(Mn=0;Mn<=o;Mn++)x0[Mn]=0;for(kp=0;kp<I;kp++)x0[E[M+kp]]++;for(qo=Zt,sa=o;sa>=1&&x0[sa]===0;sa--);if(qo>sa&&(qo=sa),sa===0)return V[Z++]=20971520,V[Z++]=20971520,le.bits=1,0;for(zp=1;zp<sa&&x0[zp]===0;zp++);for(qo<zp&&(qo=zp),Cp=1,Mn=1;Mn<=o;Mn++)if(Cp<<=1,(Cp-=x0[Mn])<0)return-1;if(Cp>0&&(b===0||sa!==1))return-1;for(Dp[1]=0,Mn=1;Mn<o;Mn++)Dp[Mn+1]=Dp[Mn]+x0[Mn];for(kp=0;kp<I;kp++)E[M+kp]!==0&&(ee[Dp[E[M+kp]]++]=kp);if(b===0?(Pp=c0=ee,bt=19):b===1?(Pp=l,d0-=257,c0=s,u0-=257,bt=256):(Pp=f,c0=m,bt=-1),h0=0,kp=0,Mn=zp,wt=Z,ae=qo,wp=0,q=-1,Q=(Kt=1<<qo)-1,b===1&&Kt>852||b===2&&Kt>592)return 1;for(;;){Ut=Mn-wp,ee[kp]<bt?(it=0,zt=ee[kp]):ee[kp]>bt?(it=c0[u0+ee[kp]],zt=Pp[d0+ee[kp]]):(it=96,zt=0),K=1<<Mn-wp,zp=vt=1<<ae;do V[wt+(h0>>wp)+(vt-=K)]=Ut<<24|it<<16|zt;while(vt!==0);for(K=1<<Mn-1;h0&K;)K>>=1;if(K!==0?(h0&=K-1,h0+=K):h0=0,kp++,--x0[Mn]===0){if(Mn===sa)break;Mn=E[M+ee[kp]]}if(Mn>qo&&(h0&Q)!==q){for(wp===0&&(wp=qo),wt+=zp,Cp=1<<(ae=Mn-wp);ae+wp<sa&&!((Cp-=x0[ae+wp])<=0);)ae++,Cp<<=1;if(Kt+=1<<ae,b===1&&Kt>852||b===2&&Kt>592)return 1;V[q=h0&Q]=qo<<24|ae<<16|wt-Z}}return h0!==0&&(V[wt+h0]=Mn-wp<<24|4194304),le.bits=qo,0}},378:(r,e,t)=>{var a;t.r(e),t.d(e,{BackSide:()=>l,Camera:()=>Cy,ClampToEdgeWrapping:()=>E,Coloring:()=>a,Cylinder:()=>Kt.Cylinder,DoubleSide:()=>s,EventDispatcher:()=>Q,FloatType:()=>ee,Fog:()=>$v,FrontSide:()=>o,Geometry:()=>Mn,GeometryGroup:()=>Zt,GeometryIDCount:()=>kp,ImposterMaterial:()=>ig,InstancedMaterial:()=>w1,Light:()=>ae,Line:()=>r0,LineBasicMaterial:()=>it,LineStyle:()=>Vp,LinearFilter:()=>M,LinearMipMapLinearFilter:()=>V,Material:()=>bt,MaterialIdCount:()=>Ut,Matrix3:()=>m.Matrix3,Matrix4:()=>m.Matrix4,Mesh:()=>B0,MeshDoubleLambertMaterial:()=>g1,MeshLambertMaterial:()=>o1,MeshOutlineMaterial:()=>X1,NearestFilter:()=>I,Object3D:()=>sa,Object3DIDCount:()=>zp,Projector:()=>Cp,Quaternion:()=>m.Quaternion,R32Format:()=>vt,RFormat:()=>K,RGBAFormat:()=>le,Ray:()=>m.Ray,Raycaster:()=>d0,Renderer:()=>zy,Scene:()=>qo,ShaderLib:()=>Wv,ShaderUtils:()=>iy,Shading:()=>f,Sphere:()=>Kt.Sphere,SphereImposterMaterial:()=>sg,SphereImposterOutlineMaterial:()=>og,Sprite:()=>bm,SpriteAlignment:()=>b,SpriteMaterial:()=>R0,SpritePlugin:()=>Lv,StickImposterMaterial:()=>Xp,StickImposterOutlineMaterial:()=>wm,Texture:()=>D1,TextureIdCount:()=>P1,TextureOperations:()=>q,Triangle:()=>Kt.Triangle,UVMapping:()=>v0,UnsignedByteType:()=>Z,Vector2:()=>m.Vector2,Vector3:()=>m.Vector3,VolumetricMaterial:()=>$m,basic:()=>Xm,clamp:()=>m.clamp,clone:()=>_y,conversionMatrix3:()=>m.conversionMatrix3,degToRad:()=>m.degToRad,instanced:()=>zm,intersectObject:()=>v1,lambert:()=>Um,lambertdouble:()=>Sg,outline:()=>M1,screen:()=>F1,screenaa:()=>Y1,sphereimposter:()=>Zm,sphereimposteroutline:()=>p1,sprite:()=>hv,stickimposter:()=>ey,stickimposteroutline:()=>xy,volumetric:()=>yv}),(function(mg){mg[mg.NoColors=0]="NoColors",mg[mg.FaceColors=1]="FaceColors",mg[mg.VertexColors=2]="VertexColors"})(a||(a={}));const o=0,l=1,s=2;var f;(function(mg){mg[mg.NoShading=0]="NoShading",mg[mg.FlatShading=1]="FlatShading",mg[mg.SmoothShading=2]="SmoothShading"})(f||(f={}));var m=t(529);const b={topLeft:new m.Vector2(1,-1),topCenter:new m.Vector2(0,-1),topRight:new m.Vector2(-1,-1),centerLeft:new m.Vector2(1,0),center:new m.Vector2(0,0),centerRight:new m.Vector2(-1,0),bottomLeft:new m.Vector2(1,1),bottomCenter:new m.Vector2(0,1),bottomRight:new m.Vector2(-1,1)},E=1001,M=1006,I=1007,V=1008,Z=1009,ee=1010,le=1021,K=1022,vt=1023;var q;(function(mg){mg[mg.MultiplyOperation=0]="MultiplyOperation",mg[mg.MixOperation=1]="MixOperation",mg[mg.AddOperation=2]="AddOperation"})(q||(q={}));class Q{constructor(){this.listeners={}}dispatchEvent(Re){var Kp=this.listeners[Re.type];if(Kp!==void 0){Re.target=this;for(var Fn=0,t0=Kp.length;Fn<t0;Fn++)Kp[Fn].call(this,Re)}}removeEventListener(Re,Kp){if(Kp){var Fn=this.listeners[Re].indexOf(Kp);Fn!==-1&&this.listeners[Re].splice(Fn,1)}else this.listeners[Re]=[]}addEventListener(Re,Kp){this.listeners[Re]===void 0&&(this.listeners[Re]=[]),this.listeners[Re].indexOf(Kp)===-1&&this.listeners[Re].push(Kp)}}var wt=t(222);class bt extends Q{constructor(){super(...arguments),this.id=Ut++,this.name="",this.side=o,this.opacity=1,this.transparent=!1,this.depthTest=!0,this.depthWrite=!0,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.alphaTest=0,this.visible=!0,this.needsUpdate=!0,this.outline=!1,this.wireframe=!1,this.shaded=!1}setValues(Re={}){if(Re!==void 0)for(var Kp in Re){var Fn=Re[Kp];if(Fn!==void 0){if(Kp in this){var t0=this[Kp];t0 instanceof wt.Color&&Fn instanceof wt.Color?t0.copy(Fn):t0 instanceof wt.Color?t0.set(Fn):t0 instanceof m.Vector3&&Fn instanceof m.Vector3?t0.copy(Fn):this[Kp]=Fn}}else console.warn("$3Dmol.Material: '"+Kp+"' parameter is undefined.")}}clone(Re=new bt){return Re.name=this.name,Re.side=this.side,Re.opacity=this.opacity,Re.transparent=this.transparent,Re.depthTest=this.depthTest,Re.depthWrite=this.depthWrite,Re.polygonOffset=this.polygonOffset,Re.polygonOffsetFactor=this.polygonOffsetFactor,Re.polygonOffsetUnits=this.polygonOffsetUnits,Re.alphaTest=this.alphaTest,Re.overdraw=this.overdraw,Re.visible=this.visible,Re}makeShaded(Re){this.shaded=!0,this.uniforms&&(this.uniforms.shading={type:"i",value:Re},this.uniforms.vWidth={type:"f",value:1},this.uniforms.vHeight={type:"f",value:1})}dispose(){this.dispatchEvent({type:"dispose"})}}let Ut=0;class it extends bt{constructor(Re){super(),this.color=new wt.Color(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.vertexColors=!1,this.fog=!0,this.shaderID="basic",this.setValues(Re)}clone(Re=new it){return super.clone.call(this,Re),Re.color.copy(this.color),Re}}const zt=65535;class Zt{constructor(Re=0){this.vertexArray=null,this.colorArray=null,this.normalArray=null,this.radiusArray=null,this.faceArray=null,this.lineArray=null,this.atomArray=Array(),this.vertices=0,this.faceidx=0,this.lineidx=0,this.__inittedArrays=!1,this.id=Re}setColor(Re){var Kp=this.vertexArray,Fn=this.colorArray;if(!Kp)throw new Error("vertex array not initialized");if(!Fn)throw new Error("color array not initialized");let t0=wt.CC.color(Re);for(var s0=0;s0<Kp.length;s0+=3)Fn[s0]=t0.r,Fn[s0+1]=t0.g,Fn[s0+2]=t0.b}setColors(Re){var Kp=this.vertexArray,Fn=this.colorArray;if(!Kp)throw new Error("vertex array not initialized");if(!Fn)throw new Error("color array not initialized");if(Kp.length==Fn.length)for(var t0=0;t0<Kp.length;t0+=3){var s0=Re(Kp[t0],Kp[t0+1],Kp[t0+2]);s0 instanceof wt.Color||(s0=wt.CC.color(s0)),Fn[t0]=s0.r,Fn[t0+1]=s0.g,Fn[t0+2]=s0.b}else console.log("Cannot re-color geometry group due to mismatched lengths.")}getNumVertices(){return this.vertices}getVertices(){return this.vertexArray}getCentroid(){if(!this.vertexArray)throw new Error("vertex array not initialized");for(var Re,Kp,Fn,t0,s0=new m.Vector3,J0=0;J0<this.vertices;++J0)Re=3*J0,Kp=this.vertexArray[Re],Fn=this.vertexArray[Re+1],t0=this.vertexArray[Re+2],s0.x+=Kp,s0.y+=Fn,s0.z+=t0;return s0.divideScalar(this.vertices),s0}setNormals(){var Re=this.faceArray,Kp=this.vertexArray,Fn=this.normalArray;if(this.vertices&&this.faceidx){if(!Re)throw new Error("face array not initialized");if(!Kp)throw new Error("vertex array not initialized");if(!Fn)throw new Error("normal array not initialized");for(var t0,s0,J0,F0,lm,Bm,Nm,jm=0;jm<Re.length/3;++jm)t0=3*Re[3*jm],s0=3*Re[3*jm+1],J0=3*Re[3*jm+2],F0=new m.Vector3(Kp[t0],Kp[t0+1],Kp[t0+2]),lm=new m.Vector3(Kp[s0],Kp[s0+1],Kp[s0+2]),Bm=new m.Vector3(Kp[J0],Kp[J0+1],Kp[J0+2]),F0.subVectors(F0,lm),Bm.subVectors(Bm,lm),Bm.cross(F0),(Nm=Bm).normalize(),Fn[t0]+=Nm.x,Fn[s0]+=Nm.x,Fn[J0]+=Nm.x,Fn[t0+1]+=Nm.y,Fn[s0+1]+=Nm.y,Fn[J0+1]+=Nm.y,Fn[t0+2]+=Nm.z,Fn[s0+2]+=Nm.z,Fn[J0+2]+=Nm.z}}setLineIndices(){if(this.faceidx&&(!this.lineArray||this.lineArray.length!=2*this.faceidx||this.lineidx!=2*this.faceidx)){var Re=this.faceArray,Kp=this.lineArray=new Uint16Array(2*this.faceidx);if(this.lineidx=2*this.faceidx,!Re)throw new Error("face array not initialized");for(var Fn=0;Fn<this.faceidx/3;++Fn){var t0=3*Fn,s0=2*t0,J0=Re[t0],F0=Re[t0+1],lm=Re[t0+2];Kp[s0]=J0,Kp[s0+1]=F0,Kp[s0+2]=J0,Kp[s0+3]=lm,Kp[s0+4]=F0,Kp[s0+5]=lm}}}vrml(Re,Kp){var Fn,t0,s0,J0,F0,lm,Bm,Nm,jm,A1,L1,K1,Tg,Lg,lg,Mg,$1,j1,ng="";if(ng+=Re+`Shape {
`+Re+` appearance Appearance {
`+Re+`  material Material {
`+Re+"   diffuseColor "+((Fn=Kp?.color)===null||Fn===void 0?void 0:Fn.r)+" "+((t0=Kp?.color)===null||t0===void 0?void 0:t0.g)+" "+((s0=Kp?.color)===null||s0===void 0?void 0:s0.b)+`
`,Kp.wireframe&&this.colorArray){let o0=this.colorArray;ng+=Re+"    emissiveColor "+o0[0]+" "+o0[1]+" "+o0[2]+`
`}Kp?.transparent&&(ng+=Re+"   transparency "+(1-Kp.opacity)+`
`),ng+=Re+`  }
`,ng+=Re+` }
`;var zv=Re;if(Re+=" ",Kp instanceof it||Kp.wireframe){let o0,p,R;ng+=Re+`geometry IndexedLineSet {
`+Re+` colorPerVertex TRUE
`+Re+` coord Coordinate {
`+Re+`  point [
`;for(let W=0;W<this.vertices;++W){let J=3*W;o0=(J0=this.vertexArray)===null||J0===void 0?void 0:J0[J],p=(F0=this.vertexArray)===null||F0===void 0?void 0:F0[J+1],R=(lm=this.vertexArray)===null||lm===void 0?void 0:lm[J+2],ng+=Re+"   "+o0+" "+p+" "+R+`,
`}if(ng+=Re+`  ]
`,ng+=Re+` }
`,this.colorArray&&!Kp.wireframe){ng+=Re+` color Color {
`+Re+`  color [
`;for(let W=0;W<this.vertices;++W){let J=3*W;o0=this.colorArray[J],p=this.colorArray[J+1],R=this.colorArray[J+2],ng+=Re+"   "+o0+" "+p+" "+R+`,
`}ng+=Re+`  ]
`,ng+=Re+` }
`}if(ng+=Re+` coordIndex [
`,Kp.wireframe&&this.faceArray)for(let W=0;W<this.faceidx;W+=3)o0=(Bm=this.faceArray)===null||Bm===void 0?void 0:Bm[W],p=(Nm=this.faceArray)===null||Nm===void 0?void 0:Nm[W+1],R=(jm=this.faceArray)===null||jm===void 0?void 0:jm[W+2],ng+=Re+"  "+o0+", "+p+", "+R+`, -1,
`;else for(let W=0;W<this.vertices-1;W+=2)ng+=Re+"  "+W+", "+(W+1)+`, -1,
`;ng+=Re+` ]
`,ng+=Re+`}
`}else{let o0,p,R;ng+=Re+`geometry IndexedFaceSet {
`+Re+` colorPerVertex TRUE
`+Re+` normalPerVertex TRUE
`+Re+` solid FALSE
`,ng+=Re+` coord Coordinate {
`+Re+`  point [
`;for(let W=0;W<this.vertices;++W){let J=3*W;o0=(A1=this.vertexArray)===null||A1===void 0?void 0:A1[J],p=(L1=this.vertexArray)===null||L1===void 0?void 0:L1[J+1],R=(K1=this.vertexArray)===null||K1===void 0?void 0:K1[J+2],ng+=Re+"   "+o0+" "+p+" "+R+`,
`}ng+=Re+`  ]
`,ng+=Re+` }
`,ng+=Re+` normal Normal {
`+Re+`  vector [
`;for(let W=0;W<this.vertices;++W){let J=3*W;o0=(Tg=this.normalArray)===null||Tg===void 0?void 0:Tg[J],p=(Lg=this.normalArray)===null||Lg===void 0?void 0:Lg[J+1],R=(lg=this.normalArray)===null||lg===void 0?void 0:lg[J+2],ng+=Re+"   "+o0+" "+p+" "+R+`,
`}if(ng+=Re+`  ]
`,ng+=Re+` }
`,this.colorArray){ng+=Re+` color Color {
`+Re+`  color [
`;for(let W=0;W<this.vertices;++W){let J=3*W;o0=this.colorArray[J],p=this.colorArray[J+1],R=this.colorArray[J+2],ng+=Re+"   "+o0+" "+p+" "+R+`,
`}ng+=Re+`  ]
`,ng+=Re+` }
`}ng+=Re+` coordIndex [
`;for(let W=0;W<this.faceidx;W+=3)o0=(Mg=this.faceArray)===null||Mg===void 0?void 0:Mg[W],p=($1=this.faceArray)===null||$1===void 0?void 0:$1[W+1],R=(j1=this.faceArray)===null||j1===void 0?void 0:j1[W+2],ng+=Re+"  "+o0+", "+p+", "+R+`, -1,
`;ng+=Re+` ]
`,ng+=Re+`}
`}return ng+=zv+"}"}truncateArrayBuffers(Re=!0,Kp=!1){var Fn=this.vertexArray,t0=this.colorArray,s0=this.normalArray,J0=this.faceArray,F0=this.lineArray,lm=this.radiusArray;this.vertexArray=Fn?.subarray(0,3*this.vertices)||null,this.colorArray=t0?.subarray(0,3*this.vertices)||null,Re?(this.normalArray=s0?.subarray(0,3*this.vertices)||null,this.faceArray=J0?.subarray(0,this.faceidx)||null,this.lineidx>0?this.lineArray=F0?.subarray(0,this.lineidx)||null:this.lineArray=new Uint16Array(0)):(this.normalArray=new Float32Array(0),this.faceArray=new Uint16Array(0),this.lineArray=new Uint16Array(0)),lm&&(this.radiusArray=lm.subarray(0,this.vertices)),Kp&&(this.normalArray&&(this.normalArray=new Float32Array(this.normalArray)),this.faceArray&&(this.faceArray=new Uint16Array(this.faceArray)),this.lineArray&&(this.lineArray=new Uint16Array(this.lineArray)),this.vertexArray&&(this.vertexArray=new Float32Array(this.vertexArray)),this.colorArray&&(this.colorArray=new Float32Array(this.colorArray)),this.radiusArray&&(this.radiusArray=new Float32Array(this.radiusArray))),this.__inittedArrays=!0}}class Mn extends Q{constructor(Re=!1,Kp=!1,Fn=!1){super(),this.name="",this.hasTangents=!1,this.dynamic=!0,this.verticesNeedUpdate=!1,this.elementsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.buffersNeedUpdate=!1,this.imposter=!1,this.instanced=!1,this.geometryGroups=[],this.groups=0,this.id=kp++,this.mesh=Re,this.radii=Kp,this.offset=Fn}updateGeoGroup(Re=0){var Kp,Fn=this.groups>0?this.geometryGroups[this.groups-1]:null;return(!Fn||Fn.vertices+Re>(((Kp=Fn?.vertexArray)===null||Kp===void 0?void 0:Kp.length)||0)/3)&&(Fn=this.addGeoGroup()),Fn}vrml(Re,Kp){for(var Fn="",t0=this.geometryGroups.length,s0=0;s0<t0;s0++)Fn+=this.geometryGroups[s0].vrml(Re,Kp)+`,
`;return Fn}addGeoGroup(){var Re=new Zt(this.geometryGroups.length);return this.geometryGroups.push(Re),this.groups=this.geometryGroups.length,Re.vertexArray=new Float32Array(196605),Re.colorArray=new Float32Array(196605),this.mesh&&(Re.normalArray=new Float32Array(196605),Re.faceArray=new Uint16Array(393210),Re.lineArray=new Uint16Array(393210)),this.radii&&(Re.radiusArray=new Float32Array(zt)),Re.useOffset=this.offset,Re}setUpNormals(...Re){for(var Kp=0;Kp<this.groups;Kp++)this.geometryGroups[Kp].setNormals(...Re)}setColors(...Re){for(var Kp=this.geometryGroups.length,Fn=0;Fn<Kp;Fn++)this.geometryGroups[Fn].setColors(...Re)}setColor(...Re){let Kp=this.geometryGroups.length;for(var Fn=0;Fn<Kp;Fn++)this.geometryGroups[Fn].setColor(...Re)}setUpWireframe(...Re){let Kp=this.geometryGroups.length;for(var Fn=0;Fn<Kp;Fn++)this.geometryGroups[Fn].setLineIndices(...Re)}initTypedArrays(){for(var Re=0;Re<this.groups;Re++){var Kp=this.geometryGroups[Re];Kp.__inittedArrays!==!0&&Kp.truncateArrayBuffers(this.mesh,!1)}}dispose(){this.dispatchEvent({type:"dispose"})}get vertices(){for(var Re=0,Kp=0;Kp<this.groups;Kp++)Re+=this.geometryGroups[Kp].vertices;return Re}}let kp=0,zp=0;class sa{constructor(){this.id=zp++,this.name="",this.children=[],this.position=new m.Vector3,this.rotation=new m.Vector3,this.matrix=new m.Matrix4,this.matrixWorld=new m.Matrix4,this.quaternion=new m.Quaternion,this.eulerOrder="XYZ",this.up=new m.Vector3(0,1,0),this.scale=new m.Vector3(1,1,1),this.matrixAutoUpdate=!0,this.matrixWorldNeedsUpdate=!0,this.rotationAutoUpdate=!0,this.useQuaternion=!1,this.visible=!0}lookAt(Re){this.matrix.lookAt(Re,this.position,this.up),this.rotationAutoUpdate&&(this.useQuaternion===!0?console.error("Unimplemented math operation."):this.rotation instanceof m.Vector3&&this.rotation.setEulerFromRotationMatrix(this.matrix,this.eulerOrder))}add(Re){if(Re!==this){Re.parent=this,this.children.push(Re);for(var Kp=this;Kp.parent!==void 0;)Kp=Kp.parent;Kp!==void 0&&Kp instanceof qo&&Kp.__addObject(Re)}else console.error("Can't add $3Dmol.Object3D to itself")}remove(Re){var Kp=this.children.indexOf(Re);if(Kp!==-1){Re.parent=void 0,this.children.splice(Kp,1);for(var Fn=this;Fn.parent!==void 0;)Fn=Fn.parent;Fn!==void 0&&Fn instanceof qo&&Fn.__removeObject(Re)}}vrml(Re){Re||(Re=" ");var Kp=2*Math.atan2(this.quaternion.lengthxyz(),this.quaternion.w),Fn=0,t0=0,s0=0;if(Kp!=0){let lm=Math.sin(Kp/2);Fn=this.quaternion.x/lm,t0=this.quaternion.y/lm,s0=this.quaternion.z/lm}var J0=Re+`Transform {
`+Re+" center "+this.position.x+" "+this.position.y+" "+this.position.z+`
`+Re+" rotation "+Fn+" "+t0+" "+s0+" "+Kp+`
`+Re+` children [
`;this.geometry&&(J0+=this.geometry.vrml(Re,this.material));for(var F0=0;F0<this.children.length;F0++)J0+=this.children[F0].vrml(Re+" ")+`,
`;return J0+=` ]
`,J0+="}"}updateMatrix(){this.matrix.setPosition(this.position),this.useQuaternion===!1&&this.rotation instanceof m.Vector3?this.matrix.setRotationFromEuler(this.rotation,this.eulerOrder):this.matrix.setRotationFromQuaternion(this.quaternion),this.scale.x===1&&this.scale.y===1&&this.scale.z===1||this.matrix.scale(this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(Re){this.matrixAutoUpdate===!0&&this.updateMatrix(),this.matrixWorldNeedsUpdate!==!0&&Re!==!0||(this.parent===void 0?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1;for(var Kp=0;Kp<this.children.length;Kp++)this.children[Kp].updateMatrixWorld(!0)}clone(Re){Re===void 0&&(Re=new sa),Re.name=this.name,Re.up.copy(this.up),Re.position.copy(this.position),Re.rotation instanceof m.Vector3&&this.rotation instanceof m.Vector3?Re.rotation.copy(this.rotation):Re.rotation=this.rotation,Re.eulerOrder=this.eulerOrder,Re.scale.copy(this.scale),Re.rotationAutoUpdate=this.rotationAutoUpdate,Re.matrix.copy(this.matrix),Re.matrixWorld.copy(this.matrixWorld),Re.quaternion.copy(this.quaternion),Re.matrixAutoUpdate=this.matrixAutoUpdate,Re.matrixWorldNeedsUpdate=this.matrixWorldNeedsUpdate,Re.useQuaternion=this.useQuaternion,Re.visible=this.visible;for(var Kp=0;Kp<this.children.length;Kp++){var Fn=this.children[Kp];Re.add(Fn.clone())}return Re}setVisible(Re){this.visible=Re;for(var Kp=0;Kp<this.children.length;Kp++)this.children[Kp].setVisible(Re)}}class qo extends sa{constructor(){super(...arguments),this.fog=null,this.overrideMaterial=null,this.matrixAutoUpdate=!1,this.__objects=[],this.__lights=[],this.__objectsAdded=[],this.__objectsRemoved=[]}__addObject(Re){if(Re instanceof ae)this.__lights.indexOf(Re)===-1&&this.__lights.push(Re),Re.target&&Re.target.parent===void 0&&this.add(Re.target);else if(this.__objects.indexOf(Re)===-1){this.__objects.push(Re),this.__objectsAdded.push(Re);var Kp=this.__objectsRemoved.indexOf(Re);Kp!==-1&&this.__objectsRemoved.splice(Kp,1)}for(var Fn=0;Fn<Re.children.length;Fn++)this.__addObject(Re.children[Fn])}__removeObject(Re){var Kp;Re instanceof ae?(Kp=this.__lights.indexOf(Re))!==-1&&this.__lights.splice(Kp,1):(Kp=this.__objects.indexOf(Re))!==-1&&(this.__objects.splice(Kp,1),this.__objectsRemoved.push(Re),this.__objectsAdded.indexOf(Re)!==-1&&this.__objectsAdded.splice(Kp,1));for(var Fn=0;Fn<Re.children.length;Fn++)this.__removeObject(Re.children[Fn])}}class ae extends sa{constructor(Re,Kp=1){super(),this.position=new m.Vector3(0,1,0),this.target=new sa,this.castShadow=!1,this.onlyShadow=!1,this.color=new wt.Color(Re),this.intensity=Kp}}const wp=new m.Matrix4;class Cp{static unprojectVector(Re,Kp){return Kp.projectionMatrixInverse.getInverse(Kp.projectionMatrix),wp.multiplyMatrices(Kp.matrixWorld,Kp.projectionMatrixInverse),Re.applyProjection(wp)}static projectVector(Re,Kp){return Kp.matrixWorldInverse.getInverse(Kp.matrixWorld),wp.multiplyMatrices(Kp.projectionMatrix,Kp.matrixWorldInverse),Re.applyProjection(wp)}projectVector(Re,Kp){return Cp.projectVector(Re,Kp)}unprojectVector(Re,Kp){return Cp.unprojectVector(Re,Kp)}}var Kt=t(99);const h0=(mg,Re)=>mg.distance-Re.distance,Pp=new m.Matrix4;class d0{constructor(Re,Kp,Fn,t0){this.precision=1e-4,this.linePrecision=.2,this.ray=new m.Ray(Re,Kp),this.ray.direction.lengthSq()>0&&this.ray.direction.normalize(),this.near=t0||0,this.far=Fn||1/0}set(Re,Kp){this.ray.set(Re,Kp)}setFromCamera(Re,Kp){Kp.ortho?(this.ray.origin.set(Re.x,Re.y,(Kp.near+Kp.far)/(Kp.near-Kp.far)).unproject(Kp),this.ray.direction.set(0,0,-1).transformDirection(Kp.matrixWorld)):(this.ray.origin.setFromMatrixPosition(Kp.matrixWorld),this.ray.direction.set(Re.x,Re.y,Re.z),Kp.projectionMatrixInverse.getInverse(Kp.projectionMatrix),Pp.multiplyMatrices(Kp.matrixWorld,Kp.projectionMatrixInverse),this.ray.direction.applyProjection(Pp),this.ray.direction.sub(this.ray.origin).normalize())}intersectObjects(Re,Kp){for(var Fn=[],t0=0,s0=Kp.length;t0<s0;t0++)v1(Re,Kp[t0],this,Fn);return Fn.sort(h0),Fn}}const x0=mg=>Math.min(Math.max(mg,-1),1);var Dp=new Kt.Sphere,c0=new Kt.Cylinder,u0=new Kt.Triangle,y0=new m.Vector3,M0=new m.Vector3,sm=new m.Vector3,mm=new m.Vector3,Mm=new m.Vector3;function v1(mg,Re,Kp,Fn){if(Mm.getPositionFromMatrix(mg.matrixWorld),Re.intersectionShape===void 0||Re.hidden)return Fn;var t0,s0,J0,F0,lm,Bm,Nm,jm,A1,L1,K1,Tg,Lg,lg,Mg=Re.intersectionShape,$1=Kp.linePrecision,j1=($1*=mg.matrixWorld.getMaxScaleOnAxis())*$1;if(Re.boundingSphere!==void 0&&Re.boundingSphere instanceof Kt.Sphere&&(Dp.copy(Re.boundingSphere),Dp.applyMatrix4(mg.matrixWorld),!Kp.ray.isIntersectionSphere(Dp)))return Fn;for(t0=0,s0=Mg.triangle.length;t0<s0;t0++)if(Mg.triangle[t0]instanceof Kt.Triangle){if(u0.copy(Mg.triangle[t0]),u0.applyMatrix4(mg.matrixWorld),J0=u0.getNormal(),(F0=Kp.ray.direction.dot(J0))>=0||(y0.subVectors(u0.a,Kp.ray.origin),(Nm=J0.dot(y0)/F0)<0))continue;M0.copy(Kp.ray.direction).multiplyScalar(Nm).add(Kp.ray.origin),M0.sub(u0.a),sm.copy(u0.b).sub(u0.a),mm.copy(u0.c).sub(u0.a);var ng=sm.dot(mm),zv=sm.lengthSq(),o0=mm.lengthSq();if((Tg=(zv*M0.dot(mm)-ng*M0.dot(sm))/(zv*o0-ng*ng))<0||Tg>1||(K1=(M0.dot(sm)-Tg*ng)/zv)<0||K1>1||K1+Tg>1)continue;Fn.push({clickable:Re,distance:Nm})}for(t0=0,s0=Mg.cylinder.length;t0<s0;t0++)if(Mg.cylinder[t0]instanceof Kt.Cylinder){if(c0.copy(Mg.cylinder[t0]),c0.applyMatrix4(mg.matrixWorld),y0.subVectors(c0.c1,Kp.ray.origin),lm=y0.dot(c0.direction),Bm=y0.dot(Kp.ray.direction),(A1=1-(F0=x0(Kp.ray.direction.dot(c0.direction)))*F0)==0)continue;Lg=(F0*Bm-lm)/A1,lg=(Bm-F0*lm)/A1,M0.copy(c0.direction).multiplyScalar(Lg).add(c0.c1),sm.copy(Kp.ray.direction).multiplyScalar(lg).add(Kp.ray.origin),jm=mm.subVectors(M0,sm).lengthSq();var p=c0.radius*c0.radius;if(jm<=p){if((K1=F0*(Tg=Nm=(L1=(F0*lm-Bm)*(F0*lm-Bm)-A1*(y0.lengthSq()-lm*lm-p))<=0?Math.sqrt(jm):(Bm-F0*lm-Math.sqrt(L1))/A1)-lm)<0||K1*K1>c0.lengthSq()||Tg<0)continue;Fn.push({clickable:Re,distance:Nm})}}for(t0=0,s0=Mg.line.length;t0<s0;t0+=2){M0.copy(Mg.line[t0]),M0.applyMatrix4(mg.matrixWorld),sm.copy(Mg.line[t0+1]),sm.applyMatrix4(mg.matrixWorld),mm.subVectors(sm,M0);var R=mm.lengthSq();mm.normalize(),y0.subVectors(M0,Kp.ray.origin);var W=y0.dot(mm);Bm=y0.dot(Kp.ray.direction),(A1=1-(F0=x0(Kp.ray.direction.dot(mm)))*F0)!=0&&(Lg=(F0*Bm-W)/A1,lg=(Bm-F0*W)/A1,M0.add(mm.multiplyScalar(Lg)),sm.copy(Kp.ray.direction).multiplyScalar(lg).add(Kp.ray.origin),(jm=mm.subVectors(sm,M0).lengthSq())<j1&&Lg*Lg<R&&Fn.push({clickable:Re,distance:lg}))}for(t0=0,s0=Mg.sphere.length;t0<s0;t0++)if(Mg.sphere[t0]instanceof Kt.Sphere&&(Dp.copy(Mg.sphere[t0]),Dp.applyMatrix4(mg.matrixWorld),Kp.ray.isIntersectionSphere(Dp))){M0.subVectors(Dp.center,Kp.ray.origin);var J=M0.dot(Kp.ray.direction);if(L1=J*J-(M0.lengthSq()-Dp.radius*Dp.radius),J<0)return Fn;Nm=L1<=0?J:J-Math.sqrt(L1),Fn.push({clickable:Re,distance:Nm})}return Fn}class v0{}class D1 extends Q{constructor(Re,Kp){super(),this.id=P1++,this.name="",this.image=Re,this.mapping=new v0,this.wrapS=E,this.wrapT=E,this.anisotropy=1,Kp?(this.format=K,this.type=ee,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.magFilter=I,this.minFilter=I):(this.format=le,this.type=Z,this.offset=new m.Vector2(0,0),this.repeat=new m.Vector2(1,1),this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.magFilter=M,this.minFilter=V),this.needsUpdate=!1,this.onUpdate=null}clone(Re=new D1){return Re.image=this.image,Re.mapping=this.mapping,Re.wrapS=this.wrapS,Re.wrapT=this.wrapT,Re.magFilter=this.magFilter,Re.minFilter=this.minFilter,Re.anisotropy=this.anisotropy,Re.format=this.format,Re.type=this.type,Re.offset.copy(this.offset),Re.repeat.copy(this.repeat),Re.premultiplyAlpha=this.premultiplyAlpha,Re.flipY=this.flipY,Re.unpackAlignment=this.unpackAlignment,Re}dispose(){this.dispatchEvent({type:"dispose"})}}let P1=0;class ig extends bt{constructor(Re){super(),this.color=new wt.Color(16777215),this.ambient=new wt.Color(1048575),this.emissive=new wt.Color(0),this.imposter=!0,this.wrapAround=!1,this.wrapRGB=new m.Vector3(1,1,1),this.map=void 0,this.lightMap=null,this.specularMap=null,this.envMap=null,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.shading=f.SmoothShading,this.shaderID=null,this.vertexColors=a.NoColors,this.skinning=!1,this.setValues(Re)}clone(Re=new ig){return super.clone.call(this,Re),Re.color.copy(this.color),Re.ambient.copy(this.ambient),Re.emissive.copy(this.emissive),Re.wrapAround=this.wrapAround,Re.wrapRGB.copy(this.wrapRGB),Re.map=this.map,Re.lightMap=this.lightMap,Re.specularMap=this.specularMap,Re.envMap=this.envMap,Re.combine=this.combine,Re.reflectivity=this.reflectivity,Re.refractionRatio=this.refractionRatio,Re.fog=this.fog,Re.shading=this.shading,Re.shaderID=this.shaderID,Re.vertexColors=this.vertexColors,Re.skinning=this.skinning,Re.morphTargets=this.morphTargets,Re.morphNormals=this.morphNormals,Re}}class w1 extends bt{constructor(Re){super(),this.color=new wt.Color(16777215),this.ambient=new wt.Color(1048575),this.emissive=new wt.Color(0),this.wrapAround=!1,this.wrapRGB=new m.Vector3(1,1,1),this.map=void 0,this.lightMap=null,this.specularMap=null,this.envMap=null,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.shading=f.SmoothShading,this.shaderID="instanced",this.vertexColors=a.NoColors,this.skinning=!1,this.sphere=null,this.setValues(Re)}clone(Re=new w1){return super.clone.call(this,Re),Re.color.copy(this.color),Re.ambient.copy(this.ambient),Re.emissive.copy(this.emissive),Re.wrapAround=this.wrapAround,Re.wrapRGB.copy(this.wrapRGB),Re.map=this.map,Re.lightMap=this.lightMap,Re.specularMap=this.specularMap,Re.envMap=this.envMap,Re.combine=this.combine,Re.reflectivity=this.reflectivity,Re.refractionRatio=this.refractionRatio,Re.fog=this.fog,Re.shading=this.shading,Re.shaderID=this.shaderID,Re.vertexColors=this.vertexColors,Re.skinning=this.skinning,Re.morphTargets=this.morphTargets,Re.morphNormals=this.morphNormals,Re.sphere=this.sphere,Re}}class o1 extends bt{constructor(Re){super(),this.color=new wt.Color(16777215),this.ambient=new wt.Color(1048575),this.emissive=new wt.Color(0),this.wrapAround=!1,this.wrapRGB=new m.Vector3(1,1,1),this.map=void 0,this.lightMap=null,this.specularMap=null,this.envMap=null,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.shading=f.SmoothShading,this.shaderID="lambert",this.vertexColors=a.NoColors,this.skinning=!1,this.setValues(Re)}clone(Re=new o1){return super.clone.call(this,Re),Re.color.copy(this.color),Re.ambient.copy(this.ambient),Re.emissive.copy(this.emissive),Re.wrapAround=this.wrapAround,Re.wrapRGB.copy(this.wrapRGB),Re.map=this.map,Re.lightMap=this.lightMap,Re.specularMap=this.specularMap,Re.envMap=this.envMap,Re.combine=this.combine,Re.reflectivity=this.reflectivity,Re.refractionRatio=this.refractionRatio,Re.fog=this.fog,Re.shading=this.shading,Re.shaderID=this.shaderID,Re.vertexColors=this.vertexColors,Re.skinning=this.skinning,Re.morphTargets=this.morphTargets,Re.morphNormals=this.morphNormals,Re}}class g1 extends o1{constructor(Re){super(Re),this.shaderID="lambertdouble",this.side=s,this.outline=!1}clone(Re=new g1){return super.clone.call(this,Re),Re}}class X1 extends bt{constructor(Re){super(),Re=Re||{},this.fog=!0,this.shaderID="outline",this.wireframe=!1,this.outlineColor=wt.CC.color(Re.color||new wt.Color(0,0,0)),this.outlineWidth=Re.width||.1,this.outlinePushback=Re.pushback||1,this.outlineMaxPixels=Re.maxpixels||0}clone(Re=new X1){return super.clone.call(this,Re),Re.fog=this.fog,Re.shaderID=this.shaderID,Re.wireframe=this.wireframe,Re.outlineColor=this.outlineColor,Re.outlineWidth=this.outlineWidth,Re.outlinePushback=this.outlinePushback,Re.outlineMaxPixels=this.outlineMaxPixels,Re}}class sg extends ig{constructor(Re){super(Re),this.shaderID="sphereimposter",this.setValues(Re)}clone(Re=new sg){return super.clone.call(this,Re),Re}}class og extends ig{constructor(Re){super(Re),Re=Re||{},this.shaderID="sphereimposteroutline",this.outlineColor=wt.CC.color(Re.color||new wt.Color(0,0,0)),this.outlineWidth=Re.width||.1,this.outlinePushback=Re.pushback||1,this.outlineMaxPixels=Re.maxpixels||0,this.setValues(Re)}clone(Re=new og){return super.clone.call(this,Re),Re.outlineColor=this.outlineColor,Re.outlineWidth=this.outlineWidth,Re.outlinePushback=this.outlinePushback,Re.outlineMaxPixels=this.outlineMaxPixels,Re}}class R0 extends bt{constructor(Re){super(),this.color=new wt.Color(16777215),this.map=new D1,this.useScreenCoordinates=!0,this.fog=!1,this.uvOffset=new m.Vector2(0,0),this.uvScale=new m.Vector2(1,1),this.depthTest=!this.useScreenCoordinates,this.sizeAttenuation=!this.useScreenCoordinates,this.screenOffset=this.screenOffset,this.scaleByViewPort=!this.sizeAttenuation,this.alignment=b.center.clone(),this.setValues(Re),(Re=Re||{}).depthTest===void 0&&(this.depthTest=!this.useScreenCoordinates),Re.sizeAttenuation===void 0&&(this.sizeAttenuation=!this.useScreenCoordinates),Re.scaleByViewPort===void 0&&(this.scaleByViewPort=!this.sizeAttenuation)}clone(Re=new R0){return super.clone.call(this,Re),Re.color.copy(this.color),Re.map=this.map,Re.useScreenCoordinates=this.useScreenCoordinates,Re.screenOffset=this.screenOffset,Re.sizeAttenuation=this.sizeAttenuation,Re.scaleByViewport=this.scaleByViewPort,Re.alignment.copy(this.alignment),Re.uvOffset.copy(this.uvOffset),Re}}class Xp extends ig{constructor(Re){super(Re),this.shaderID="stickimposter",this.setValues(Re)}clone(Re=new Xp){return super.clone.call(this,Re),Re}}class wm extends ig{constructor(Re={}){super(Re),this.shaderID="stickimposteroutline",this.outlineColor=new wt.Color(0,0,0),this.outlineWidth=.1,this.outlinePushback=1,this.outlineMaxPixels=0,Re.color&&(this.outlineColor=wt.CC.color(Re.color)),Re.width&&(this.outlineWidth=Re.width),Re.pushback&&(this.outlinePushback=Re.pushback),Re.maxpixels&&(this.outlineMaxPixels=Re.maxpixels),this.setValues(Re)}clone(Re=new wm){return super.clone.call(this,Re),Re.outlineColor=this.outlineColor,Re.outlineWidth=this.outlineWidth,Re.outlinePushback=this.outlinePushback,Re.outlineMaxPixels=this.outlineMaxPixels,Re}}class $m extends bt{constructor(Re){super(),this.transparent=!1,this.volumetric=!0,this.color=new wt.Color(16777215),this.transferfn=null,this.map=void 0,this.extent=[],this.maxdepth=100,this.unit=0,this.texmatrix=null,this.transfermin=-1,this.transfermax=1,this.subsamples=5,this.shaderID="volumetric",this.side=o,this.setValues(Re)}clone(Re=new $m){return super.clone.call(this,Re),Re.transparent=this.transparent,Re.volumetric=this.volumetric,Re.color=this.color,Re.transferfn=this.transferfn,Re.map=this.map,Re.extent=this.extent,Re.maxdepth=this.maxdepth,Re.unit=this.unit,Re.texmatrix=this.texmatrix,Re.transfermin=this.transfermin,Re.transfermax=this.transfermax,Re.subsamples=this.subsamples,Re.shaderID=this.shaderID,Re.side=this.side,Re}}var Vp;(function(mg){mg[mg.LineStrip=0]="LineStrip",mg[mg.LinePieces=1]="LinePieces"})(Vp||(Vp={}));class r0 extends sa{constructor(Re,Kp=new it({color:16777215*Math.random()}),Fn=Vp.LineStrip){super(),this.geometry=Re,this.material=Kp,this.type=Fn}clone(Re=new r0(this.geometry,this.material,this.type)){return super.clone.call(this,Re),Re}}class B0 extends sa{constructor(Re,Kp){super(),this.geometry=Re,this.material=Kp}clone(Re){return Re===void 0&&(Re=new B0(this.geometry,this.material)),super.clone.call(this,Re),Re}}class bm extends sa{constructor(Re=new R0){super(),this.material=Re,this.rotation3d=this.rotation,this.rotation=0}updateMatrix(){this.matrix.setPosition(this.position),this.rotation3d.set(0,0,this.rotation),this.matrix.setRotationFromEuler(this.rotation3d),this.scale.x===1&&this.scale.y===1||this.matrix.scale(this.scale),this.matrixWorldNeedsUpdate=!0}clone(Re=new bm(this.material)){return sa.prototype.clone.call(this,Re),Re}}const Sm={opacity:{type:"f",value:1},fogColor:{type:"c",value:new wt.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3}},Xm={vertexShader:`uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;

attribute vec3 position;
attribute vec3 color;

varying vec3 vColor;
varying vec4 mvPosition;

void main() {

    vColor = color;
    mvPosition = modelViewMatrix * vec4( position, 1.0 );
    gl_Position = projectionMatrix * mvPosition;

}`.replace("#define GLSLIFY 1",""),fragmentShader:`uniform mat4 viewMatrix;
uniform float opacity;
uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
varying vec3 vColor;
varying vec4 mvPosition;

//DEFINEFRAGCOLOR
void main() {
    gl_FragColor = vec4( vColor, opacity );
    if(fogNear != fogFar) {
        float depth = -mvPosition.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }
}`.replace("#define GLSLIFY 1",""),uniforms:Sm},cm={opacity:{type:"f",value:1},fogColor:{type:"c",value:new wt.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}},zm={fragmentShader:`uniform mat4 viewMatrix;
uniform float opacity;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
#ifdef SHADED
uniform highp sampler2D shading;
#endif
varying vec3 vLightFront;
varying vec3 vColor;
//DEFINEFRAGCOLOR

void main() {

    gl_FragColor = vec4( vec3 ( 1.0 ), opacity );

    #ifndef WIREFRAME
    gl_FragColor.xyz *= vLightFront;
    #endif

#ifdef SHADED
    ivec2 dim = textureSize(shading,0);
    float shadowFactor = texture2D(shading,vec2(gl_FragCoord.x/float(dim.x),gl_FragCoord.y/float(dim.y))).r;
    vColor *= shadowFactor;
#endif
    gl_FragColor = gl_FragColor * vec4( vColor, opacity );
    float depth = gl_FragCoord.z / gl_FragCoord.w;

    float fogFactor = smoothstep( fogNear, fogFar, depth );

    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );

}


`.replace("#define GLSLIFY 1",""),vertexShader:`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];

attribute vec3 offset;
attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;
attribute float radius;

varying vec3 vColor;
varying vec3 vLightFront;

void main() {

    vColor = color;

    vec3 objectNormal = normal;
    vec3 transformedNormal = normalMatrix * objectNormal;
    vec4 mvPosition = modelViewMatrix * vec4( position * radius + offset, 1.0 );

    vLightFront = vec3( 0.0 );

    transformedNormal = normalize( transformedNormal );

    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );
    vec3 dirVector = normalize( lDirection.xyz );
    float dotProduct = dot( transformedNormal, dirVector );
    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );

    vLightFront += directionalLightColor[ 0 ] * directionalLightWeighting;

    gl_Position = projectionMatrix * mvPosition;
}

`.replace("#define GLSLIFY 1",""),uniforms:cm},x1={opacity:{type:"f",value:1},fogColor:{type:"c",value:new wt.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}},Um={fragmentShader:`uniform mat4 viewMatrix;
uniform float opacity;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
#ifdef SHADED
uniform highp sampler2D shading;
#endif
varying vec3 vLightFront;
varying vec3 vColor;
varying vec4 mvPosition;


//DEFINEFRAGCOLOR

void main() {

    gl_FragColor = vec4( vec3 ( 1.0 ), opacity );

    #ifndef WIREFRAME
    gl_FragColor.xyz *= vLightFront;
    #endif
#ifdef SHADED
    ivec2 dim = textureSize(shading,0);
    float shadowFactor = texture2D(shading,vec2(gl_FragCoord.x/float(dim.x),gl_FragCoord.y/float(dim.y))).r;
    vColor *= shadowFactor;
#endif
    gl_FragColor = gl_FragColor * vec4( vColor, opacity );

    if(fogNear != fogFar) {
        float depth = -mvPosition.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }

}`.replace("#define GLSLIFY 1",""),vertexShader:`
uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;

varying vec3 vColor;
varying vec3 vLightFront;
varying vec4 mvPosition;

void main() {

    vColor = color;

    vec3 objectNormal = normal;
    vec3 transformedNormal = normalMatrix * objectNormal;
    mvPosition = modelViewMatrix * vec4( position, 1.0 );

    vLightFront = vec3( 0.0 );

    transformedNormal = normalize( transformedNormal );

    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );
    vec3 dirVector = normalize( lDirection.xyz );
    float dotProduct = dot( transformedNormal, dirVector );
    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );

    vLightFront += directionalLightColor[ 0 ] * directionalLightWeighting;

    gl_Position = projectionMatrix * mvPosition;
}`.replace("#define GLSLIFY 1",""),uniforms:x1},h1={opacity:{type:"f",value:1},fogColor:{type:"c",value:new wt.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}},Sg={fragmentShader:`
#ifdef SHADED
uniform highp sampler2D shading;
#endif

uniform mat4 viewMatrix;
uniform float opacity;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;

varying vec3 vLightFront;
varying vec3 vLightBack;

varying vec3 vColor;
varying vec4 mvPosition;

//DEFINEFRAGCOLOR

void main() {

    gl_FragColor = vec4( vec3 ( 1.0 ), opacity );

    #ifndef WIREFRAME
    if ( gl_FrontFacing )
       gl_FragColor.xyz *= vLightFront;
    else
       gl_FragColor.xyz *= vLightBack;
    #endif

    vec3 color = vColor;
#ifdef SHADED
    ivec2 dim = textureSize(shading,0);
    float shadowFactor = texture2D(shading,vec2(gl_FragCoord.x/float(dim.x),gl_FragCoord.y/float(dim.y))).r;
    color *= shadowFactor;
#endif
    gl_FragColor = gl_FragColor * vec4( color, opacity );

    if(fogNear != fogFar) {
        float depth = -mvPosition.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }

}


`.replace("#define GLSLIFY 1",""),vertexShader:`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;

varying vec3 vColor;
varying vec3 vLightFront;
varying vec3 vLightBack;
varying vec4 mvPosition;

void main() {

    vColor = color;

    vec3 objectNormal = normal;
    vec3 transformedNormal = normalMatrix * objectNormal;
    mvPosition = modelViewMatrix * vec4( position, 1.0 );

    vLightFront = vec3( 0.0 );
    vLightBack = vec3( 0.0 );

    transformedNormal = normalize( transformedNormal );

    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );
    vec3 dirVector = normalize( lDirection.xyz );
    float dotProduct = dot( transformedNormal, dirVector );
    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );
    vec3 directionalLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );

    vLightFront += directionalLightColor[ 0 ] * directionalLightWeighting;
    vLightBack += directionalLightColor[ 0 ] * directionalLightWeightingBack;

    gl_Position = projectionMatrix * mvPosition;
}

`.replace("#define GLSLIFY 1",""),uniforms:h1},um={opacity:{type:"f",value:1},outlineColor:{type:"c",value:new wt.Color(0,0,0)},fogColor:{type:"c",value:new wt.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},outlineWidth:{type:"f",value:.1},outlinePushback:{type:"f",value:1},outlineMaxPixels:{type:"f",value:0}},M1={fragmentShader:`

uniform float opacity;
uniform vec3 outlineColor;
uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;

varying vec4 mvPosition;
//DEFINEFRAGCOLOR

void main() {
    gl_FragColor = vec4( outlineColor, 1 );

    if(fogNear != fogFar) {
        float depth = -mvPosition.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }
}


`.replace("#define GLSLIFY 1",""),vertexShader:`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform float outlineWidth;
uniform float outlinePushback;
uniform float vWidth;
uniform float vHeight;
uniform float outlineMaxPixels;

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;

varying vec4 mvPosition;

void main() {

    vec4 norm = modelViewMatrix*vec4(normalize(normal),0.0);
    mvPosition = modelViewMatrix * vec4( position, 1.0 );
    mvPosition.xy += norm.xy*outlineWidth;
    vec4 outpos = projectionMatrix * mvPosition;

    if(outlineMaxPixels > 0.0) {
        vec4 unadjusted = projectionMatrix*modelViewMatrix * vec4( position, 1.0 );
        float w = outpos.w;
        //normalize homogeneous coords
        unadjusted /= unadjusted.w;
        outpos /= outpos.w;
        vec2 diff = outpos.xy-unadjusted.xy;
        //put into pixels
        diff.x *= vWidth;
        diff.y *= vHeight;
        if ( length(diff) > outlineMaxPixels) {
            vec2 ndiff = normalize(diff)*outlineMaxPixels;
            ndiff.x /= vWidth;
            ndiff.y /= vHeight;
            outpos.xy = unadjusted.xy;
            outpos.xy += ndiff;
        }
        outpos *= w; //if I don't do this things blow up
    }
    gl_Position = outpos;
    mvPosition.z -= outlinePushback; //go backwards in model space
    vec4 pushpos = projectionMatrix*mvPosition; //project to get z in projection space, I'm probably missing some simple math to do the same thing..
    gl_Position.z = gl_Position.w*pushpos.z/pushpos.w;
}

`.replace("#define GLSLIFY 1",""),uniforms:um},F1={fragmentShader:`uniform sampler2D colormap;
varying highp vec2 vTexCoords;
uniform vec2 dimensions;
//DEFINEFRAGCOLOR
void main (void) {
   gl_FragColor = texture2D(colormap, vTexCoords);

   //gl_FragColor.g = gl_FragColor.b =  gl_FragColor.r; //debug shading 
}
        `.replace("#define GLSLIFY 1",""),vertexShader:`attribute vec2 vertexPosition;
varying highp vec2 vTexCoords;
const vec2 scale = vec2(0.5, 0.5);

void main() {
   vTexCoords  = vertexPosition * scale + scale; // scale vertex attribute to [0,1] range
   gl_Position = vec4(vertexPosition, 0.0, 1.0);
}
        `.replace("#define GLSLIFY 1",""),uniforms:{}},Y1={fragmentShader:`
        
precision highp float;
precision highp int;
precision highp sampler2D;

uniform sampler2D tColor;
varying highp vec2 vTexCoords;

// adapted from https://github.com/kosua20/Rendu
// MIT License Copyright (c) 2017 Simon Rodriguez
// by way of molstar (https://github.com/molstar/molstar/blob/master/src/mol-gl/shader/fxaa.frag.ts)

#define QUALITY(q) ((q) < 5 ? 1.0 : ((q) > 5 ? ((q) < 10 ? 2.0 : ((q) < 11 ? 4.0 : 8.0)) : 1.5))

float rgb2luma(vec3 rgb){
    return sqrt(dot(rgb, vec3(0.299, 0.587, 0.114)));
}

float sampleLuma(vec2 uv) {
    return rgb2luma(texture2D(tColor, uv).rgb);
}

float sampleLuma(vec2 uv, float uOffset, float vOffset) {
    uv += vec2(uOffset, vOffset);
    return sampleLuma(uv);
}

//DEFINEFRAGCOLOR
void main(void) {
    ivec2 dim = textureSize(tColor,0);
    vec2 dimensions = vec2(float(dim.x),float(dim.y));
    vec2 inverseScreenSize = vec2(1.0 / dimensions.x, 1.0 / dimensions.y);
    vec2 coords = vTexCoords;

    vec4 colorCenter = texture2D(tColor, coords);
    float dEdgeThresholdMin = 0.0312;
    float dEdgeThresholdMax = 0.125;
    int dIterations = 12;
    float dSubpixelQuality = 0.3;

    // Luma at the current fragment
    float lumaCenter = rgb2luma(colorCenter.rgb);

    // Luma at the four direct neighbours of the current fragment.
    float lumaDown = sampleLuma(coords, 0.0, -inverseScreenSize.y);
    float lumaUp = sampleLuma(coords, 0.0, inverseScreenSize.y);
    float lumaLeft = sampleLuma(coords, -inverseScreenSize.x, 0.0);
    float lumaRight = sampleLuma(coords, inverseScreenSize.x, 0.0);

    // Find the maximum and minimum luma around the current fragment.
    float lumaMin = min(lumaCenter, min(min(lumaDown, lumaUp), min(lumaLeft, lumaRight)));
    float lumaMax = max(lumaCenter, max(max(lumaDown, lumaUp), max(lumaLeft, lumaRight)));

    // Compute the delta.
    float lumaRange = lumaMax - lumaMin;

    // If the luma variation is lower that a threshold (or if we are in a really dark area),
    // we are not on an edge, don't perform any AA.
    if (lumaRange < max(dEdgeThresholdMin, lumaMax * dEdgeThresholdMax)) {
        gl_FragColor = colorCenter;
        return;
    }

    // Query the 4 remaining corners lumas.
    float lumaDownLeft = sampleLuma(coords, -inverseScreenSize.x, -inverseScreenSize.y);
    float lumaUpRight = sampleLuma(coords, inverseScreenSize.x, inverseScreenSize.y);
    float lumaUpLeft = sampleLuma(coords, -inverseScreenSize.x, inverseScreenSize.y);
    float lumaDownRight = sampleLuma(coords, inverseScreenSize.x, -inverseScreenSize.y);

    // Combine the four edges lumas (using intermediary variables for future computations
    // with the same values).
    float lumaDownUp = lumaDown + lumaUp;
    float lumaLeftRight = lumaLeft + lumaRight;

    // Same for corners
    float lumaLeftCorners = lumaDownLeft + lumaUpLeft;
    float lumaDownCorners = lumaDownLeft + lumaDownRight;
    float lumaRightCorners = lumaDownRight + lumaUpRight;
    float lumaUpCorners = lumaUpRight + lumaUpLeft;

    // Compute an estimation of the gradient along the horizontal and vertical axis.
    float edgeHorizontal = abs(-2.0 * lumaLeft + lumaLeftCorners) + abs(-2.0 * lumaCenter + lumaDownUp) * 2.0 + abs(-2.0 * lumaRight + lumaRightCorners);
    float edgeVertical = abs(-2.0 * lumaUp + lumaUpCorners) + abs(-2.0 * lumaCenter + lumaLeftRight) * 2.0 + abs(-2.0 * lumaDown + lumaDownCorners);

    // Is the local edge horizontal or vertical ?
    bool isHorizontal = (edgeHorizontal >= edgeVertical);

    // Choose the step size (one pixel) accordingly.
    float stepLength = isHorizontal ? inverseScreenSize.y : inverseScreenSize.x;

    // Select the two neighboring texels lumas in the opposite direction to the local edge.
    float luma1 = isHorizontal ? lumaDown : lumaLeft;
    float luma2 = isHorizontal ? lumaUp : lumaRight;
    // Compute gradients in this direction.
    float gradient1 = luma1 - lumaCenter;
    float gradient2 = luma2 - lumaCenter;

    // Which direction is the steepest ?
    bool is1Steepest = abs(gradient1) >= abs(gradient2);

    // Gradient in the corresponding direction, normalized.
    float gradientScaled = 0.25 * max(abs(gradient1), abs(gradient2));

    // Average luma in the correct direction.
    float lumaLocalAverage = 0.0;
    if(is1Steepest){
        // Switch the direction
        stepLength = -stepLength;
        lumaLocalAverage = 0.5 * (luma1 + lumaCenter);
    } else {
        lumaLocalAverage = 0.5 * (luma2 + lumaCenter);
    }

    // Shift UV in the correct direction by half a pixel.
    vec2 currentUv = coords;
    if(isHorizontal){
        currentUv.y += stepLength * 0.5;
    } else {
        currentUv.x += stepLength * 0.5;
    }

    // Compute offset (for each iteration step) in the right direction.
    vec2 offset = isHorizontal ? vec2(inverseScreenSize.x, 0.0) : vec2(0.0, inverseScreenSize.y);
    // Compute UVs to explore on each side of the edge, orthogonally.
    // The QUALITY allows us to step faster.
    vec2 uv1 = currentUv - offset * QUALITY(0);
    vec2 uv2 = currentUv + offset * QUALITY(0);

    // Read the lumas at both current extremities of the exploration segment,
    // and compute the delta wrt to the local average luma.
    float lumaEnd1 = sampleLuma(uv1);
    float lumaEnd2 = sampleLuma(uv2);
    lumaEnd1 -= lumaLocalAverage;
    lumaEnd2 -= lumaLocalAverage;

    // If the luma deltas at the current extremities is larger than the local gradient,
    // we have reached the side of the edge.
    bool reached1 = abs(lumaEnd1) >= gradientScaled;
    bool reached2 = abs(lumaEnd2) >= gradientScaled;
    bool reachedBoth = reached1 && reached2;

    // If the side is not reached, we continue to explore in this direction.
    if(!reached1){
        uv1 -= offset * QUALITY(1);
    }
    if(!reached2){
        uv2 += offset * QUALITY(1);
    }

    // If both sides have not been reached, continue to explore.
    if(!reachedBoth){
        for(int i = 2; i < dIterations; i++){
            // If needed, read luma in 1st direction, compute delta.
            if(!reached1){
                lumaEnd1 = sampleLuma(uv1);
                lumaEnd1 = lumaEnd1 - lumaLocalAverage;
            }
            // If needed, read luma in opposite direction, compute delta.
            if(!reached2){
                lumaEnd2 = sampleLuma(uv2);
                lumaEnd2 = lumaEnd2 - lumaLocalAverage;
            }
            // If the luma deltas at the current extremities is larger than the local gradient,
            // we have reached the side of the edge.
            reached1 = abs(lumaEnd1) >= gradientScaled;
            reached2 = abs(lumaEnd2) >= gradientScaled;
            reachedBoth = reached1 && reached2;

            // If the side is not reached, we continue to explore in this direction,
            // with a variable quality.
            if(!reached1){
                uv1 -= offset * QUALITY(i);
            }
            if(!reached2){
                uv2 += offset * QUALITY(i);
            }

            // If both sides have been reached, stop the exploration.
            if(reachedBoth){
                break;
            }
        }
    }

    // Compute the distances to each side edge of the edge (!).
    float distance1 = isHorizontal ? (coords.x - uv1.x) : (coords.y - uv1.y);
    float distance2 = isHorizontal ? (uv2.x - coords.x) : (uv2.y - coords.y);

    // In which direction is the side of the edge closer ?
    bool isDirection1 = distance1 < distance2;
    float distanceFinal = min(distance1, distance2);

    // Thickness of the edge.
    float edgeThickness = (distance1 + distance2);

    // Is the luma at center smaller than the local average ?
    bool isLumaCenterSmaller = lumaCenter < lumaLocalAverage;

    // If the luma at center is smaller than at its neighbour,
    // the delta luma at each end should be positive (same variation).
    bool correctVariation1 = (lumaEnd1 < 0.0) != isLumaCenterSmaller;
    bool correctVariation2 = (lumaEnd2 < 0.0) != isLumaCenterSmaller;

    // Only keep the result in the direction of the closer side of the edge.
    bool correctVariation = isDirection1 ? correctVariation1 : correctVariation2;

    // UV offset: read in the direction of the closest side of the edge.
    float pixelOffset = - distanceFinal / edgeThickness + 0.5;

    // If the luma variation is incorrect, do not offset.
    float finalOffset = correctVariation ? pixelOffset : 0.0;

    // Sub-pixel shifting
    // Full weighted average of the luma over the 3x3 neighborhood.
    float lumaAverage = (1.0 / 12.0) * (2.0 * (lumaDownUp + lumaLeftRight) + lumaLeftCorners + lumaRightCorners);
    // Ratio of the delta between the global average and the center luma,
    // over the luma range in the 3x3 neighborhood.
    float subPixelOffset1 = clamp(abs(lumaAverage - lumaCenter) / lumaRange, 0.0, 1.0);
    float subPixelOffset2 = (-2.0 * subPixelOffset1 + 3.0) * subPixelOffset1 * subPixelOffset1;
    // Compute a sub-pixel offset based on this delta.
    float subPixelOffsetFinal = subPixelOffset2 * subPixelOffset2 * float(dSubpixelQuality);

    // Pick the biggest of the two offsets.
    finalOffset = max(finalOffset, subPixelOffsetFinal);

    // Compute the final UV coordinates.
    vec2 finalUv = coords;
    if(isHorizontal){
        finalUv.y += finalOffset * stepLength;
    } else {
        finalUv.x += finalOffset * stepLength;
    }

    // Read the color at the new UV coordinates, and use it.
    gl_FragColor = texture2D(tColor, finalUv);
}        

/* old fxaa implementation
uniform highp sampler2D colormap;
varying highp vec2 vTexCoords;


// Basic FXAA implementation based on the code on geeks3d.com 
#define FXAA_REDUCE_MIN (1.0/ 128.0)
#define FXAA_REDUCE_MUL (1.0 / 8.0)
#define FXAA_SPAN_MAX 8.0


vec4 applyFXAA(vec2 fragCoord, highp sampler2D tex)
{
    vec4 color;
    ivec2 dim = textureSize(tex,0);
    vec2 dimensions = vec2(float(dim.x),float(dim.y));
    vec2 inverseVP = vec2(1.0 / dimensions.x, 1.0 / dimensions.y);
    vec4 rgbNW = texture2D(tex, fragCoord + vec2(-1.0, -1.0) * inverseVP);
    vec4 rgbNE = texture2D(tex, fragCoord + vec2(1.0, -1.0) * inverseVP);
    vec4 rgbSW = texture2D(tex, fragCoord + vec2(-1.0, 1.0) * inverseVP);
    vec4 rgbSE = texture2D(tex, fragCoord + vec2(1.0, 1.0) * inverseVP);
    vec4 rgbM  = texture2D(tex, fragCoord );
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW.xyz, luma);
    float lumaNE = dot(rgbNE.xyz, luma);
    float lumaSW = dot(rgbSW.xyz, luma);
    float lumaSE = dot(rgbSE.xyz, luma);
    float lumaM  = dot(rgbM.xyz,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                        (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
            max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
            dir * rcpDirMin)) * inverseVP;

    vec4 rgbA = 0.5 * (
        texture2D(tex, fragCoord + dir * (1.0 / 3.0 - 0.5)) +
        texture2D(tex, fragCoord  + dir * (2.0 / 3.0 - 0.5)));
    vec4 rgbB = rgbA * 0.5 + 0.25 * (
        texture2D(tex, fragCoord  + dir * -0.5) +
        texture2D(tex, fragCoord  + dir * 0.5));

    float lumaB = dot(rgbB.xyz, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = rgbA;
    else
        color = rgbB;

    return color;
}


//DEFINEFRAGCOLOR
void main (void) {
    ivec2 dim = textureSize(colormap,0);

  gl_FragColor = applyFXAA(vTexCoords, colormap);
}
        
*/`.replace("#define GLSLIFY 1",""),vertexShader:`attribute vec2 vertexPosition;
varying highp vec2 vTexCoords;
const vec2 scale = vec2(0.5, 0.5);

void main() {
   vTexCoords  = vertexPosition * scale + scale; // scale vertex attribute to [0,1] range
   gl_Position = vec4(vertexPosition, 0.0, 1.0);
}
        `.replace("#define GLSLIFY 1",""),uniforms:{}},n1={opacity:{type:"f",value:1},fogColor:{type:"c",value:new wt.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}},Zm={vertexShader:`uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;

varying vec2 mapping;
varying vec3 vColor;
varying float rval;
varying vec3 vLight;
varying vec3 center;

void main() {

    vColor = color;
    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
    center = mvPosition.xyz;
    vec4 projPosition = projectionMatrix * mvPosition;
    vec4 adjust = projectionMatrix* vec4(normal,0.0); adjust.z = 0.0; adjust.w = 0.0;
    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );
    vLight = normalize( lDirection.xyz );
    mapping = normal.xy;
    rval = abs(normal.x);
    gl_Position = projPosition+adjust;

}
`.replace("#define GLSLIFY 1",""),fragmentShader:`
uniform mat4 viewMatrix;
uniform float opacity;
uniform mat4 projectionMatrix;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
uniform float uDepth;
uniform vec3 directionalLightColor[ 1 ];

varying vec3 vColor;
varying vec2 mapping;
varying float rval;
varying vec3 vLight;
varying vec3 center;

#ifdef SHADED
uniform highp sampler2D shading;
#endif

//DEFINEFRAGCOLOR

void main() {
    float lensqr = dot(mapping,mapping);
    float rsqr = rval*rval;
    if(lensqr > rsqr)
       discard;
    float z = sqrt(rsqr-lensqr);
    vec3 cameraPos = center+ vec3(mapping.x,mapping.y,z);
    vec4 clipPos = projectionMatrix * vec4(cameraPos, 1.0);
    float ndcDepth = clipPos.z / clipPos.w;
    gl_FragDepthEXT = ((gl_DepthRange.diff * ndcDepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;
    vec3 norm = normalize(vec3(mapping.x,mapping.y,z));
    float dotProduct = dot( norm, vLight );
    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );
    vec3 vLight = directionalLightColor[ 0 ] * directionalLightWeighting;
    vec3 color = vLight*vColor;
#ifdef SHADED
    ivec2 dim = textureSize(shading,0);
    float shadowFactor = texture2D(shading,vec2(gl_FragCoord.x/float(dim.x),gl_FragCoord.y/float(dim.y))).r;
    color *= shadowFactor;
#endif    
    gl_FragColor = vec4(color, opacity*opacity );

    if(fogNear != fogFar) {
        float depth = -cameraPos.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }
     
}

`.replace("#define GLSLIFY 1",""),uniforms:n1},S1={opacity:{type:"f",value:1},outlineColor:{type:"c",value:new wt.Color(0,0,0)},fogColor:{type:"c",value:new wt.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},outlineWidth:{type:"f",value:.1},outlinePushback:{type:"f",value:1},outlineMaxPixels:{type:"f",value:0}},p1={fragmentShader:`

uniform float opacity;
uniform vec3 outlineColor;
uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
uniform mat4 projectionMatrix;
varying vec2 mapping;
varying float rval;
varying vec3 center;

uniform float outlinePushback;

//DEFINEFRAGCOLOR

void main() {
    float lensqr = dot(mapping,mapping);
    float rsqr = rval*rval;
    if(lensqr > rsqr)
       discard;
    float z = sqrt(rsqr-lensqr);
    vec3 cameraPos = center+ vec3(mapping.x,mapping.y,z-outlinePushback);
    vec4 clipPos = projectionMatrix * vec4(cameraPos, 1.0);
    float ndcDepth = clipPos.z / clipPos.w;
    gl_FragDepthEXT = ((gl_DepthRange.diff * ndcDepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;
    gl_FragColor = vec4(outlineColor, 1 );

    if(fogNear != fogFar) {
        float depth = -cameraPos.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }
}


`.replace("#define GLSLIFY 1",""),vertexShader:`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform float outlineWidth;
uniform float outlinePushback;
uniform float outlineMaxPixels;
uniform float vWidth;
uniform float vHeight;

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;

varying vec2 mapping;
varying float rval;
varying vec3 center;

void main() {

    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
    center = mvPosition.xyz;
    vec4 projPosition = projectionMatrix * mvPosition;
    vec2 norm = normal.xy + vec2(sign(normal.x)*outlineWidth,sign(normal.y)*outlineWidth);

    vec4 adjust = projectionMatrix* vec4(norm,normal.z,1.0); 
    mapping = norm.xy;
    rval = abs(norm.x);
    gl_Position = projPosition+vec4(adjust.xy,0.0,0.0);

    if(outlineMaxPixels > 0.0) {
        vec4 unadjusted = projectionMatrix*vec4(center.x+normal.x, center.y,center.z,1.0); 
        vec4 ccoord = projectionMatrix*vec4(center.xyz,1.0);
        adjust = projectionMatrix* vec4(center.x+norm.x,center.y,center.z,1.0); 
        //subtract center 
        unadjusted.xyz -= ccoord.xyz;
        adjust.xyz -= ccoord.xyz;
        unadjusted /= unadjusted.w;
        adjust /= adjust.w;
        float diff = abs(adjust.x-unadjusted.x);
        diff *= vWidth;
        if(diff > outlineMaxPixels) {
            
            float fixlen = abs(unadjusted.x) + outlineMaxPixels/vWidth;
            //adjsut reval by ratio of lengths
            rval *= fixlen/abs(adjust.x);
        }

    }
}

`.replace("#define GLSLIFY 1",""),uniforms:S1},hv={fragmentShader:`

uniform vec3 color;
uniform sampler2D map;
uniform float opacity;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
uniform float alphaTest;

varying vec2 vUV;
//DEFINEFRAGCOLOR

void main() {

    vec4 texture = texture2D(map, vUV);

    if (texture.a <= alphaTest) discard;

    gl_FragColor = vec4(color * texture.xyz, texture.a * opacity);

    if (fogNear != fogFar) {

        float depth = gl_FragCoord.z / gl_FragCoord.w; //probably wrong
        float fogFactor = smoothstep(fogNear, fogFar, depth);        
        gl_FragColor = mix(gl_FragColor, vec4(fogColor, gl_FragColor.w), fogFactor);
    }
}

`.replace("#define GLSLIFY 1",""),vertexShader:`

uniform int useScreenCoordinates;
uniform vec3 screenPosition;
uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform float rotation;
uniform vec2 scale;
uniform vec2 alignment;
uniform vec2 uvOffset;
uniform vec2 uvScale;

attribute vec2 position;
attribute vec2 uv;

varying vec2 vUV;

void main() {

    vUV = uvOffset + uv * uvScale;

    vec2 alignedPosition = position + alignment;

    vec2 rotatedPosition;
    rotatedPosition.x = ( cos(rotation) * alignedPosition.x - sin(rotation) * alignedPosition.y ) * scale.x;
    rotatedPosition.y = ( sin(rotation) * alignedPosition.x + cos(rotation) * alignedPosition.y ) * scale.y;

    vec4 finalPosition;

    if(useScreenCoordinates != 0) {
        finalPosition = vec4(screenPosition.xy + rotatedPosition, screenPosition.z, 1.0);
    }

    else {
        finalPosition = projectionMatrix * modelViewMatrix * vec4(0.0, 0.0, 0.0, 1.0); finalPosition /= finalPosition.w;
        finalPosition.xy += rotatedPosition; 
    }

    gl_Position = finalPosition;

}

`.replace("#define GLSLIFY 1",""),uniforms:{}},Gg={opacity:{type:"f",value:1},fogColor:{type:"c",value:new wt.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}},Cv=`uniform float opacity;
uniform mat4 projectionMatrix;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;

varying vec3 vLight;
varying vec3 vColor;
varying vec3 cposition;
varying vec3 p1;
varying vec3 p2;
varying float r;

#ifdef SHADED
uniform highp sampler2D shading;
#endif

//DEFINEFRAGCOLOR

//cylinder-ray intersection testing taken from http://mrl.nyu.edu/~dzorin/cg05/lecture12.pdf
//also useful: http://stackoverflow.com/questions/9595300/cylinder-impostor-in-glsl
//with a bit more care (caps) this could be a general cylinder imposter (see also outline)
void main() {
    vec3 color = abs(vColor);
    vec3 pos = cposition;
    vec3 p = pos; //ray point
    vec3 v = vec3(0.0,0.0,-1.0); //ray normal - orthographic
    if(projectionMatrix[3][3] == 0.0) v = normalize(pos); //ray normal - perspective
    vec3 pa = p1; //cyl start
    vec3 va = normalize(p2-p1); //cyl norm
    vec3 tmp1 = v-(dot(v,va)*va);
    vec3 deltap = p-pa;
    float A = dot(tmp1,tmp1);
    if(A == 0.0) discard;
    vec3 tmp2 = deltap-(dot(deltap,va)*va);
    float B = 2.0*dot(tmp1, tmp2);
    float C = dot(tmp2,tmp2)-r*r;
//quadratic equation!
    float det = (B*B) - (4.0*A*C);
    if(det < 0.0) discard;
    float sqrtDet = sqrt(det);
    float posT = (-B+sqrtDet)/(2.0*A);
    float negT = (-B-sqrtDet)/(2.0*A);
    float intersectionT = min(posT,negT);
    vec3 qi = p+v*intersectionT;
    float dotp1 = dot(va,qi-p1);
    float dotp2 = dot(va,qi-p2);
    vec3 norm;
    if( dotp1 < 0.0 || dotp2 > 0.0) { //(p-c)^2 + 2(p-c)vt +v^2+t^2 - r^2 = 0
       vec3 cp;
       if( dotp1 < 0.0) {  
//        if(vColor.x < 0.0 ) discard; //color sign bit indicates if we should cap or not
        cp = p1;
       } else {
//          if(vColor.y < 0.0 ) discard;
          cp = p2;
       }
       vec3 diff = p-cp;
       A = dot(v,v);
       B = dot(diff,v)*2.0;
       C = dot(diff,diff)-r*r;
       det = (B*B) - (4.0*C);
       if(det < 0.0) discard;
       sqrtDet = sqrt(det);
       posT = (-B+sqrtDet)/(2.0);
       negT = (-B-sqrtDet)/(2.0);
       float t = min(posT,negT);
       qi = p+v*t; 
       norm = normalize(qi-cp); 
    } else {
       norm = normalize(qi-(dotp1*va + p1));
    }
    vec4 clipPos = projectionMatrix * vec4(qi, 1.0);
    float ndcDepth = clipPos.z / clipPos.w;
    float depth = ((gl_DepthRange.diff * ndcDepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;
    gl_FragDepthEXT = depth;`,ey={fragmentShader:[Cv,`    float dotProduct = dot( norm, vLight );
    vec3 light = vec3( max( dotProduct, 0.0 ) );
    color *= light;
#ifdef SHADED
    ivec2 dim = textureSize(shading,0);
    float shadowFactor = texture2D(shading,vec2(gl_FragCoord.x/float(dim.x),gl_FragCoord.y/float(dim.y))).r;
    color *= shadowFactor;
#endif    
    gl_FragColor = vec4(color, opacity*opacity );
    if(fogNear != fogFar) {
        float depth = -qi.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }
}`].join(`
`),vertexShader:`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;
attribute float radius;

varying vec3 vColor;
varying vec3 vLight;
varying vec3 cposition;
varying vec3 p1;
varying vec3 p2;
varying float r;

void main() {

    vColor = color; vColor.z = abs(vColor.z); //z indicates which vertex and so would vary
    r = abs(radius);
    vec4 to = modelViewMatrix*vec4(normal, 1.0); //normal is other point of cylinder
    vec4 pt = modelViewMatrix*vec4(position, 1.0);
    vec4 mvPosition = pt;
    p1 = pt.xyz; p2 = to.xyz;
    vec3 norm = to.xyz-pt.xyz;
    float mult = 1.1; //slop to account for perspective of sphere
    if(length(p1) > length(p2)) { //billboard at level of closest point
       mvPosition = to;
    }
    vec3 n = normalize(mvPosition.xyz);
    bool isperspective = (projectionMatrix[3][3] == 0.0);
//intersect with the plane defined by the camera looking at the billboard point
    if(color.z >= 0.0) { //p1
       if(isperspective) { //perspective
         vec3 pnorm = normalize(p1);
         float t = dot(mvPosition.xyz-p1,n)/dot(pnorm,n);
         mvPosition.xyz = p1+t*pnorm; 
       } else { //orthographic
         mvPosition.xyz = p1;
       }
    } else {
      if(isperspective) { //perspective
         vec3 pnorm = normalize(p2);
         float t = dot(mvPosition.xyz-p2,n)/dot(pnorm,n);
         mvPosition.xyz = p2+t*pnorm;
       } else { //orthographic
         mvPosition.xyz = p2;
       } 
       mult *= -1.0;
    }

    if(isperspective) { //perspective
      vec3 cr = normalize(cross(mvPosition.xyz,norm))*radius;
      vec3 doublecr = normalize(cross(mvPosition.xyz,cr))*radius;
      mvPosition.xyz +=  mult*(cr + doublecr).xyz;
    } else {
      vec3 cr = normalize(cross(vec3(0.0,0.0,-1.0),norm))*radius;
      vec3 doublecr = normalize(cross(vec3(0.0,0.0,-1.0),cr))*radius;
      mvPosition.xyz +=  mult*(cr + doublecr).xyz;     
    }

    cposition = mvPosition.xyz;
    gl_Position = projectionMatrix * mvPosition;
    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );
    vLight = normalize( lDirection.xyz )*directionalLightColor[0]; //not really sure this is right, but color is always white so..
}

`,uniforms:Gg},xy={fragmentShader:Cv+`
    gl_FragColor = vec4(color, opacity*opacity );
    if(fogNear != fogFar) {
        float depth = -qi.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }
}`,vertexShader:`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];
uniform vec3 outlineColor;
uniform float outlineWidth;
uniform float outlinePushback;
uniform float outlineMaxPixels;
uniform float vWidth;
uniform mat4 projinv;


attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;
attribute float radius;

varying vec3 vColor;
varying vec3 vLight;
varying vec3 cposition;
varying vec3 p1;
varying vec3 p2;
varying float r;

void main() {

    vColor = outlineColor;
    float rad = radius+sign(radius)*outlineWidth;
    r = abs(rad);

    vec4 to = modelViewMatrix*vec4(normal, 1.0); //normal is other point of cylinder
    vec4 pt = modelViewMatrix*vec4(position, 1.0);
//pushback
    float scale = 1.0;
    if(projectionMatrix[3][3] != 0.0) { //orthographic
        to.z -= outlinePushback;
        pt.z -= outlinePushback;
    } else { //perspective
        vec4 midbefore = pt;
        if(length(to.xyz) < length(pt)) {
            midbefore = to;
        }
        vec4 midafter = midbefore;
        midafter.xyz += normalize(midbefore.xyz)*outlinePushback;

        to.xyz += normalize(to.xyz)*outlinePushback;
        pt.xyz += normalize(pt.xyz)*outlinePushback;

        //figure out a scaling factor for radius to account for perspective setback
        vec4 midbeforer = vec4(midbefore.x+rad,midbefore.y, midbefore.z, midbefore.w);
        vec4 midafterr = vec4(midafter.x+rad,midafter.y, midafter.z, midafter.w);

        vec4 mb = projectionMatrix*midbefore;
        vec4 mbr = projectionMatrix*midbeforer;
        vec4 ma = projectionMatrix*midafter;
        vec4 mar = projectionMatrix*midafterr;
        mb /= mb.w;
        mbr /= mbr.w;
        ma /= ma.w;
        mar /= mar.w;
        scale = abs((mbr.x-mb.x)/(mar.x-ma.x));
        rad *= scale;
        r = abs(rad);
    }
    vec4 mvPosition = pt;
    p1 = pt.xyz; p2 = to.xyz;
    vec3 norm = to.xyz-pt.xyz;
    float mult = 1.1; //slop to account for perspective of sphere
    if(length(p1) > length(p2)) { //billboard at level of closest point
       mvPosition = to;
    }

    vec3 n = normalize(mvPosition.xyz);
//intersect with the plane defined by the camera looking at the billboard point
    if(color.z >= 0.0) { //p1
       vec3 pnorm = normalize(p1);
       float t = dot(mvPosition.xyz-p1,n)/dot(pnorm,n);
       mvPosition.xyz = p1+t*pnorm;
    } else {
       vec3 pnorm = normalize(p2);
       float t = dot(mvPosition.xyz-p2,n)/dot(pnorm,n);
       mvPosition.xyz = p2+t*pnorm;
       mult *= -1.0;
    }

    if(outlineMaxPixels > 0.0) {
        vec4 cpos = mvPosition;
        vec4 unadjusted = projectionMatrix*vec4(cpos.x+abs(scale*radius), cpos.y,cpos.z,cpos.w); 
        vec4 ccoord = projectionMatrix*cpos;
        vec4 adjust = projectionMatrix*vec4(cpos.x+r,cpos.y,cpos.z,cpos.w); 
        unadjusted /= unadjusted.w;
        adjust /= adjust.w;
        unadjusted.xyz -= ccoord.xyz/ccoord.w;
        adjust.xyz -= ccoord.xyz/ccoord.w;
        float diff = abs(adjust.x-unadjusted.x);
        diff *= vWidth; //this should now be in pixels
        if(diff > outlineMaxPixels) {
            float fixlen = abs(unadjusted.x) + outlineMaxPixels/vWidth; 
            vec4 pcoord = ccoord;
            pcoord.x += fixlen*pcoord.w;
            vec4 altc = projinv*pcoord;
            r= abs(altc.x-cpos.x);
        }
    }

    vec3 cr = normalize(cross(mvPosition.xyz,norm))*rad;
    vec3 doublecr = normalize(cross(mvPosition.xyz,cr))*rad;
    mvPosition.xy +=  mult*(cr + doublecr).xy;
    cposition = mvPosition.xyz;
    gl_Position = projectionMatrix * mvPosition;
    vLight = vec3(1.0,1.0,1.0);
}

`,uniforms:{opacity:{type:"f",value:1},fogColor:{type:"c",value:new wt.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},outlineColor:{type:"c",value:new wt.Color(0,0,0)},outlineWidth:{type:"f",value:.1},outlinePushback:{type:"f",value:1},outlineMaxPixels:{type:"f",value:0},projinv:{type:"mat4",value:[]}}},Gv={opacity:{type:"f",value:1},fogColor:{type:"c",value:new wt.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},data:{type:"i",value:3},colormap:{type:"i",value:4},depthmap:{type:"i",value:5},step:{type:"f",value:1},maxdepth:{type:"f",value:100},subsamples:{type:"f",value:5},textmat:{type:"mat4",value:[]},projinv:{type:"mat4",value:[]},transfermin:{type:"f",value:-.2},transfermax:{type:"f",value:.2}},yv={fragmentShader:`
uniform highp sampler3D data;
uniform highp sampler2D colormap;
uniform highp sampler2D depthmap;


uniform mat4 textmat;
uniform mat4 projinv;
uniform mat4 projectionMatrix;

uniform float step;
uniform float subsamples;
uniform float maxdepth;
uniform float transfermin;
uniform float transfermax;
in  vec4 mvPosition;
out vec4 color;
void main(void) {

   vec4 pos = mvPosition;
   bool seengood = false;
   float i = 0.0;
   color = vec4(1,1,1,0);
   float increment = 1.0/subsamples;
   float maxsteps = (maxdepth*subsamples/step);
//there's probably a better way to do this..
//calculate farthest possible point in model coordinates
   vec4 maxpos = vec4(pos.x,pos.y,pos.z-maxdepth,1.0);
// convert to projection
   maxpos = projectionMatrix*maxpos;
   vec4 startp = projectionMatrix*pos;
// homogonize
   maxpos /= maxpos.w;
   startp /= startp.w;
//take x,y from start and z from max
   maxpos = vec4(startp.x,startp.y,maxpos.z,1.0);
//convert back to model space
   maxpos = projinv*maxpos;
   maxpos /= maxpos.w;
   float incr = step/subsamples;
//get depth from depthmap
//startp is apparently [-1,1]
   vec2 tpos = startp.xy/2.0+0.5;
   float depth = texture(depthmap, tpos).r;
//compute vector between start and end
   vec4 direction = maxpos-pos;
   for( i = 0.0; i <= maxsteps; i++) {
      vec4 pt = (pos+(i/maxsteps)*direction);
      vec4 ppt = projectionMatrix*pt;
      float ptdepth = ppt.z/ppt.w;
      ptdepth = ((gl_DepthRange.diff * ptdepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;
      if(ptdepth > depth) break;
      pt = textmat*pt;
//       pt /= pt.w;
      if(pt.x >= -0.01 && pt.y >= -0.01 && pt.z >= -0.01 && pt.x <= 1.01 && pt.y <= 1.01 && pt.z <= 1.01) {
         seengood = true;
      } else if(seengood) {
         break;
      }
      if( pt.x < -0.01 || pt.x > 1.01 || pt.y < -0.01 || pt.y > 1.01 || pt.z < -0.01 || pt.z > 1.01  ){
          color.a = 0.0;
          continue;
      }
      else {
         float val = texture(data, pt.zyx).r;
         if(isinf(val)) continue; //masked out
         float cval = (val-transfermin)/(transfermax-transfermin); //scale to texture 0-1 range
         vec4 val_color = texture(colormap, vec2(cval,0.5));
         color.rgb = color.rgb*color.a + (1.0-color.a)*val_color.a*val_color.rgb;
         color.a += (1.0 - color.a) * val_color.a; 
         if(color.a > 0.0) color.rgb /= color.a;
//          color = vec4(pt.x, pt.y, pt.z, 1.0);
      }
//       color = vec4(pt.x, pt.y, pt.z, 0.0)
    }
}

        `.replace("#define GLSLIFY 1",""),vertexShader:`uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;

in vec3 position;
out vec4 mvPosition;
void main() {

    mvPosition = modelViewMatrix * vec4( position, 1.0 );
    gl_Position = projectionMatrix*mvPosition;
}
`.replace("#define GLSLIFY 1",""),uniforms:Gv},Wv={basic:Xm,blur:{fragmentShader:`const float INV_TOTAL_SAMPLES_FACTOR = 1.0 / 9.0;
uniform highp sampler2D inTex;
varying highp vec2 vTexCoords;
    
void main() {
 
 vec2 texelSize = 1.0 / vec2(textureSize(inTex,0));
 float blurred_visibility_factor = 0.0f;
 for (int t = -1; t <= 1; ++t) {
  for (int s = -1; s <= 1; ++s) {
   vec2 offset = vec2(float(s), float(t)) * texelSize;
   blurred_visibility_factor += texture2D(inTex, vTexCoords + offset).r;
  }
 }
    
 gl_FragDepthEXT = blurred_visibility_factor * INV_TOTAL_SAMPLES_FACTOR;
 
}`,vertexShader:`attribute vec2 vertexPosition;
varying highp vec2 vTexCoords;
const vec2 scale = vec2(0.5, 0.5);

void main() {
   vTexCoords  = vertexPosition * scale + scale; // scale vertex attribute to [0,1] range
   gl_Position = vec4(vertexPosition, 0.0, 1.0);
}
        `,uniforms:{}},instanced:zm,lambert:Um,lambertdouble:Sg,outline:M1,screen:F1,screenaa:Y1,ssao:{fragmentShader:`uniform sampler2D depthmap;
varying highp vec2 vTexCoords;
uniform float vWidth;
uniform float vHeight;
uniform float total_strength;
uniform float radius;
uniform mat4 projinv;
uniform mat4 projectionMatrix;

//code for pseudorandom vector from chatgpt
float hash(vec3 p) {
    p = fract(p * vec3(0.1031, 0.1030, 0.0973));
    p += dot(p, p.yzx + 33.33);
    return fract((p.x + p.y) * p.z);
}

// Generate a pseudorandom vec3 from a seed vec3
vec3 pseudorandomVec3(vec3 seed) {
    vec3 randomVec;
    randomVec.x = hash(seed);
    randomVec.y = hash(seed + vec3(1.0, 0.0, 17.1));
    randomVec.z = hash(seed + vec3(0.0, 13.23, 0.0));
    return randomVec;
}

void main(void)
{   
   const float base = 0.2;
   const float area = 0.75;
   const int cycles = 1;

   const int samples = 64;
   vec3 sample_sphere[64] = vec3[](
      vec3(0.091258,-0.510164,0.000000),
      vec3(-0.204347,-0.872967,0.187199),
      vec3(0.009690,-0.263696,-0.110414),
      vec3(0.175208,-0.563987,0.228527),
      vec3(-0.001824,-0.003113,-0.000323),
      vec3(0.411134,-0.719869,-0.261530),
      vec3(-0.074272,-0.377368,0.276290),
      vec3(-0.147773,-0.381587,-0.284529),
      vec3(0.173317,-0.199635,0.063295),
      vec3(-0.186452,-0.199460,0.076965),
      vec3(0.143985,-0.308160,-0.307687),
      vec3(0.053194,-0.148286,0.169589),
      vec3(-0.547656,-0.486476,-0.317378),
      vec3(0.020804,-0.015092,-0.004574),
      vec3(-0.038006,-0.043165,0.054059),
      vec3(-0.094795,-0.443908,-0.731525),
      vec3(0.547552,-0.396466,0.461477),
      vec3(-0.176886,-0.089989,0.007315),
      vec3(0.074401,-0.048840,-0.074039),
      vec3(-0.008240,-0.075697,0.178197),
      vec3(-0.307880,-0.185053,-0.368943),
      vec3(0.309520,-0.108483,0.041646),
      vec3(-0.773478,-0.292946,0.538166),
      vec3(0.184487,-0.231594,-0.820065),
      vec3(0.207318,-0.100531,0.361797),
      vec3(-0.173306,-0.037737,-0.055289),
      vec3(0.548102,-0.105342,-0.253237),
      vec3(-0.119342,-0.043907,0.285162),
      vec3(-0.270247,-0.087861,-0.751357),
      vec3(0.449312,-0.039777,0.236146),
      vec3(-0.743773,-0.036095,0.196056),
      vec3(0.148819,-0.004300,-0.231448),
      vec3(0.008773,0.000809,0.051047),
      vec3(-0.461467,0.027390,-0.357386),
      vec3(0.169626,0.013338,-0.014053),
      vec3(-0.043786,0.007095,0.047331),
      vec3(0.004821,0.140371,-0.988260),
      vec3(0.092402,0.023994,0.101860),
      vec3(-0.295335,0.061530,-0.027372),
      vec3(0.024903,0.007537,-0.018901),
      vec3(-0.081463,0.125402,0.447794),
      vec3(-0.397119,0.231805,-0.631062),
      vec3(0.163853,0.059014,0.044905),
      vec3(-0.495220,0.214357,0.254139),
      vec3(0.306123,0.373687,-0.825715),
      vec3(0.021665,0.026737,0.053220),
      vec3(-0.208231,0.117129,-0.098685),
      vec3(0.139749,0.080968,-0.043086),
      vec3(-0.153599,0.182814,0.262090),
      vec3(-0.159673,0.496777,-0.743568),
      vec3(0.134797,0.117152,0.095753),
      vec3(-0.155626,0.120533,0.019395),
      vec3(0.042311,0.054462,-0.049709),
      vec3(0.001257,0.031288,0.034468),
      vec3(-0.002271,0.003199,-0.002304),
      vec3(0.662104,0.717307,0.033854),
      vec3(-0.373100,0.576021,0.308274),
      vec3(0.024233,0.231316,-0.173688),
      vec3(0.161311,0.420217,0.234273),
      vec3(-0.045248,0.078031,-0.010411),
      vec3(0.167453,0.376942,-0.094872),
      vec3(-0.056194,0.433247,0.173218),
      vec3(-0.016224,0.123149,-0.035569),
      vec3(0.067127,0.407641,0.028479)
   );

   float depth = texture2D(depthmap, vTexCoords).r;
   if(depth == 1.0) {
      discard;
   }

   vec4 screen_position = vec4(vTexCoords, depth,1.0);
   vec4 pos = projinv*screen_position;
   pos /= pos.w;
   vec3 position = pos.xyz;

   //approximate the normal from the depth map; I find this simpler
   //than trying to recompute the exact normal within every possible object shader

   //pixel offset positions in screen space
   ivec2 dim = textureSize(depthmap,0);
   vec2 offset1 = vec2(0.0,1.0/float(dim.y));
   vec2 offset2 = vec2(1.0/float(dim.x),0.0);
   float depth1 = texture2D(depthmap, vTexCoords + offset1).r;
   float depth2 = texture2D(depthmap, vTexCoords + offset2).r;
   
   vec3 p1 = vec3(screen_position.xy+offset1, depth1 - depth);
   vec3 p2 = vec3(screen_position.xy+offset2, depth2 - depth);

   //convert to model space
   vec4 pos1 = projinv*vec4(p1,1);
   pos1 /= pos1.w;
   vec4 pos2 = projinv*vec4(p2,1);
   pos2 /= pos2.w;

   vec3 normal = normalize(cross(pos1.xyz-position, pos2.xyz-position)); //model normal, important we normalize in model space

   //pseudo random number

   float occlusion = 0.0;
   for(int c = 0; c < cycles; c++) {
   vec3 random = normalize(pseudorandomVec3(position+float(c)));
   for(int i=0; i < samples; i++) {

      vec3 ray = radius * reflect(sample_sphere[i],random);
      vec3 hemi_ray = position + sign(dot(ray,normal)) * ray; //model space
      vec4 hemi_screen = projectionMatrix*vec4(hemi_ray,1.0);
      hemi_screen /= hemi_screen.w;
      
      float occ_depth = texture2D(depthmap, clamp(hemi_screen.xy,0.0,1.0)).r;
      float difference = hemi_screen.z - occ_depth;
      
      occlusion += step(0.0, difference) * (1.0-smoothstep(0.0, area, difference));
   }
   }
   float ao = 1.0 - total_strength * occlusion * (1.0 / float(cycles*samples));
   gl_FragDepthEXT = clamp(ao+base,0.0,1.0);

}`,vertexShader:`attribute vec2 vertexPosition;
varying highp vec2 vTexCoords;
const vec2 scale = vec2(0.5, 0.5);

void main() {
   vTexCoords  = vertexPosition * scale + scale; // scale vertex attribute to [0,1] range
   gl_Position = vec4(vertexPosition, 0.0, 1.0);
}
        `,uniforms:{total_strength:{type:"f",value:1},radius:{type:"f",value:5},projinv:{type:"mat4",value:[]}}},sphereimposter:Zm,sphereimposteroutline:p1,sprite:hv,stickimposter:ey,stickimposteroutline:xy,volumetric:yv};function _y(mg){let Re={};for(const Fn in mg){Re[Fn]={},Re[Fn].type=mg[Fn].type;var Kp=mg[Fn].value;Kp instanceof wt.Color?Re[Fn].value=Kp.clone():typeof Kp=="number"?Re[Fn].value=Kp:Kp instanceof Array?Re[Fn].value=[]:console.error("Error copying shader uniforms from ShaderLib: unknown type for uniform")}return Re}const iy={clone:_y};class Cy extends sa{constructor(Re=50,Kp=1,Fn=.1,t0=2e3,s0=!1){super(),this.projectionMatrix=new m.Matrix4,this.projectionMatrixInverse=new m.Matrix4,this.matrixWorldInverse=new m.Matrix4,this.fov=Re,this.aspect=Kp,this.near=Fn,this.far=t0;var J0=this.position.z;this.right=J0*Math.tan(Math.PI/180*Re),this.left=-this.right,this.top=this.right/this.aspect,this.bottom=-this.top,this.ortho=!!s0,this.updateProjectionMatrix()}lookAt(Re){this.matrix.lookAt(this.position,Re,this.up),this.rotationAutoUpdate&&(this.useQuaternion===!1&&this.rotation instanceof m.Vector3?this.rotation.setEulerFromRotationMatrix(this.matrix,this.eulerOrder):console.error("Unimplemented math operation."))}updateProjectionMatrix(){this.ortho?this.projectionMatrix.makeOrthographic(this.left,this.right,this.top,this.bottom,this.near,this.far):this.projectionMatrix.makePerspective(this.fov,this.aspect,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)}}class $v{constructor(Re,Kp=1,Fn=1e3){this.name="",this.color=new wt.Color(Re),this.near=Kp,this.far=Fn}clone(){return new $v(this.color.getHex(),this.near,this.far)}}class Lv{constructor(){this.sprite={vertices:null,faces:null,vertexBuffer:null,elementBuffer:null,program:null,attributes:{},uniforms:null}}init(Re){this.gl=Re.context,this.renderer=Re,this.precision=Re.getPrecision(),this.sprite.vertices=new Float32Array(16),this.sprite.faces=new Uint16Array(6);var Kp=0;this.sprite.vertices[Kp++]=-1,this.sprite.vertices[Kp++]=-1,this.sprite.vertices[Kp++]=0,this.sprite.vertices[Kp++]=0,this.sprite.vertices[Kp++]=1,this.sprite.vertices[Kp++]=-1,this.sprite.vertices[Kp++]=1,this.sprite.vertices[Kp++]=0,this.sprite.vertices[Kp++]=1,this.sprite.vertices[Kp++]=1,this.sprite.vertices[Kp++]=1,this.sprite.vertices[Kp++]=1,this.sprite.vertices[Kp++]=-1,this.sprite.vertices[Kp++]=1,this.sprite.vertices[Kp++]=0,this.sprite.vertices[Kp++]=1,Kp=0,this.sprite.faces[Kp++]=0,this.sprite.faces[Kp++]=1,this.sprite.faces[Kp++]=2,this.sprite.faces[Kp++]=0,this.sprite.faces[Kp++]=2,this.sprite.faces[Kp++]=3,this.sprite.vertexBuffer=this.gl.createBuffer(),this.sprite.elementBuffer=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.sprite.vertexBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.sprite.vertices,this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.sprite.elementBuffer),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,this.sprite.faces,this.gl.STATIC_DRAW),this.sprite.program=this.createProgram(Wv.sprite,this.precision||1),this.sprite.attributes={};const Fn={};this.sprite.attributes.position=this.gl.getAttribLocation(this.sprite.program,"position"),this.sprite.attributes.uv=this.gl.getAttribLocation(this.sprite.program,"uv"),Fn.uvOffset=this.gl.getUniformLocation(this.sprite.program,"uvOffset"),Fn.uvScale=this.gl.getUniformLocation(this.sprite.program,"uvScale"),Fn.rotation=this.gl.getUniformLocation(this.sprite.program,"rotation"),Fn.scale=this.gl.getUniformLocation(this.sprite.program,"scale"),Fn.alignment=this.gl.getUniformLocation(this.sprite.program,"alignment"),Fn.color=this.gl.getUniformLocation(this.sprite.program,"color"),Fn.map=this.gl.getUniformLocation(this.sprite.program,"map"),Fn.opacity=this.gl.getUniformLocation(this.sprite.program,"opacity"),Fn.useScreenCoordinates=this.gl.getUniformLocation(this.sprite.program,"useScreenCoordinates"),Fn.screenPosition=this.gl.getUniformLocation(this.sprite.program,"screenPosition"),Fn.modelViewMatrix=this.gl.getUniformLocation(this.sprite.program,"modelViewMatrix"),Fn.projectionMatrix=this.gl.getUniformLocation(this.sprite.program,"projectionMatrix"),Fn.fogNear=this.gl.getUniformLocation(this.sprite.program,"fogNear"),Fn.fogFar=this.gl.getUniformLocation(this.sprite.program,"fogFar"),Fn.fogColor=this.gl.getUniformLocation(this.sprite.program,"fogColor"),Fn.alphaTest=this.gl.getUniformLocation(this.sprite.program,"alphaTest"),this.sprite.uniforms=Fn}render(Re,Kp,Fn,t0,s0){var J0,F0,lm,Bm,Nm,jm,A1,L1,K1,Tg;if(!this.gl)throw new Error("WebGLRenderer not initialized");let Lg=[];(J0=Re?.__webglSprites)===null||J0===void 0||J0.forEach(Dt=>{(s0&&Dt.material.depthTest==0||!s0&&Dt.material.depthTest)&&Lg.push(Dt)});let lg=Lg.length;if(!lg)return;const Mg=this.sprite.attributes,$1=this.sprite.uniforms;if(!$1)throw new Error("Uniforms not defined");var j1=.5*Fn,ng=.5*t0;this.gl.useProgram(this.sprite.program),this.gl.enableVertexAttribArray(Mg.position),this.gl.enableVertexAttribArray(Mg.uv),this.gl.disable(this.gl.CULL_FACE),this.gl.enable(this.gl.BLEND),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.sprite.vertexBuffer),this.gl.vertexAttribPointer(Mg.position,2,this.gl.FLOAT,!1,16,0),this.gl.vertexAttribPointer(Mg.uv,2,this.gl.FLOAT,!1,16,8),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.sprite.elementBuffer),this.gl.uniformMatrix4fv($1.projectionMatrix,!1,Kp.projectionMatrix.elements),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.uniform1i($1.map,0);var zv,o0=Re.fog;let p,R,W;o0?(this.gl.uniform3f($1.fogColor,o0.color.r,o0.color.g,o0.color.b),this.gl.uniform1f($1.fogNear,o0.near),this.gl.uniform1f($1.fogFar,o0.far)):(this.gl.uniform1f($1.fogNear,0),this.gl.uniform1f($1.fogFar,0));let J=[];for(zv=0;zv<lg;zv++)p=Lg[zv],R=p.material,R&&(R.depthTest!=0||s0)&&p.visible&&R.opacity!==0&&(R.useScreenCoordinates?p.z=-p.position.z:(p._modelViewMatrix.multiplyMatrices(Kp.matrixWorldInverse,p.matrixWorld),p.z=-p._modelViewMatrix.elements[14]));for(Lg.sort(wg),zv=0;zv<lg;zv++)if(p=Lg[zv],R=p.material,R&&p.visible&&R.opacity!==0&&R.map&&R.map.image&&R.map.image.width){this.gl.uniform1f($1?.alphaTest||null,R.alphaTest);var Et=R.map.image.width,tt=R.map.image.height;J[0]=Et*this.renderer.devicePixelRatio/Fn,J[1]=tt*this.renderer.devicePixelRatio/t0,R.useScreenCoordinates===!0?(this.gl.uniform1i($1.useScreenCoordinates,1),this.gl.uniform3f($1.screenPosition,(p.position.x*this.renderer.devicePixelRatio-j1)/j1,(ng-p.position.y*this.renderer.devicePixelRatio)/ng,Math.max(0,Math.min(1,p.position.z)))):(this.gl.uniform1i($1.useScreenCoordinates,0),this.gl.uniformMatrix4fv($1.modelViewMatrix,!1,p._modelViewMatrix.elements)),W=1/(R.scaleByViewport?t0:1),J[0]*=W*p.scale.x,J[1]*=W*p.scale.y;let Dt=(F0=R?.alignment)===null||F0===void 0?void 0:F0.x,It=(lm=R?.alignment)===null||lm===void 0?void 0:lm.y;R.screenOffset&&(Dt=(Dt||0)+2*R.screenOffset.x/Et,It=(It||0)+2*R.screenOffset.y/tt),this.gl.uniform2f($1.uvScale,((Bm=R?.uvScale)===null||Bm===void 0?void 0:Bm.x)||1,((Nm=R?.uvScale)===null||Nm===void 0?void 0:Nm.y)||1),this.gl.uniform2f($1.uvOffset,((jm=R?.uvOffset)===null||jm===void 0?void 0:jm.x)||0,((A1=R?.uvOffset)===null||A1===void 0?void 0:A1.y)||0),this.gl.uniform2f($1.alignment,Dt||0,It||0),this.gl.uniform1f($1.opacity,R.opacity),this.gl.uniform3f($1.color,((L1=R?.color)===null||L1===void 0?void 0:L1.r)||0,((K1=R?.color)===null||K1===void 0?void 0:K1.g)||0,((Tg=R?.color)===null||Tg===void 0?void 0:Tg.b)||0),this.gl.uniform1f($1.rotation,p.rotation),this.gl.uniform2fv($1.scale,J),this.renderer.setDepthTest(R.depthTest),this.renderer.setDepthWrite(R.depthWrite),this.renderer.setTexture(R.map,0),this.gl.drawElements(this.gl.TRIANGLES,6,this.gl.UNSIGNED_SHORT,0)}this.gl.enable(this.gl.CULL_FACE)}createProgram(Re,Kp){if(!this.gl)throw new Error("WebGL Rendering context not found");var Fn=this.gl.createProgram();if(!Fn)throw new Error("Error creating webgl program");var t0=this.gl.createShader(this.gl.FRAGMENT_SHADER),s0=this.gl.createShader(this.gl.VERTEX_SHADER);if(!t0)throw new Error("Unable to create fragment shader SpritePlugin.createProgram");if(!s0)throw new Error("Unable to create vertex shader SpritePlugin.createProgram");var J0="precision "+Kp+` float;
`;if(this.gl.shaderSource(t0,J0+Re.fragmentShader),this.gl.shaderSource(s0,J0+Re.vertexShader),this.gl.compileShader(t0),this.gl.compileShader(s0),!this.gl.getShaderParameter(t0,this.gl.COMPILE_STATUS)||!this.gl.getShaderParameter(s0,this.gl.COMPILE_STATUS))throw new Error(`Error compiling shader: 
      ${this.gl.getShaderInfoLog(t0)} 
      ${this.gl.getShaderInfoLog(s0)}`);return this.gl.attachShader(Fn,t0),this.gl.attachShader(Fn,s0),this.gl.linkProgram(Fn),this.gl.getProgramParameter(Fn,this.gl.LINK_STATUS)||console.error("Could not initialize shader"),Fn}}function wg(mg,Re){return mg.z!==Re.z?Re.z-mg.z:Re.id-mg.id}var Ov=null,Uv=null;class zy{constructor(Re){this.context=null,this.devicePixelRatio=1,this.sortObjects=!0,this.autoUpdateObjects=!0,this.autoUpdateScene=!0,this.info={memory:{programs:0,geometries:0,textures:0},render:{calls:0,vertices:0,faces:0,points:0}},this._offscreen=null,this._bitmap=null,this._programs=[],this._programs_counter=0,this._webglversion=1,this._currentProgram=null,this._currentMaterialId=-1,this._currentGeometryGroupHash=null,this._currentCamera=null,this._geometryGroupCounter=0,this._oldDoubleSided=-1,this._oldFlipSided=-1,this._oldDepthTest=-1,this._oldDepthWrite=-1,this._oldPolygonOffset=null,this._oldLineWidth=null,this._viewportWidth=0,this._viewportHeight=0,this._currentWidth=0,this._currentHeight=0,this._enabledAttributes={},this._vector3=new m.Vector3,this._worldInverse=new m.Matrix4,this._projInverse=new m.Matrix4,this._textureMatrix=new m.Matrix4,this._fullProjModelMatrix=new m.Matrix4,this._fullProjModelMatrixInv=new m.Matrix4,this._direction=new m.Vector3,this._lightsNeedUpdate=!0,this._lights={ambient:[0,0,0],directional:{length:0,colors:[],positions:[]},point:{length:0,colors:[],positions:[],distances:[]},spot:{length:0,colors:[],positions:[],distances:[],directions:[],anglesCos:[],exponents:[]},hemi:{length:0,skyColors:[],groundColors:[],positions:[]}},this.sprites=new Lv,this._screenshader=null,this._AOshader=null,this._blurshader=null,this._vertexattribpos=null,this._aovertexattribpos=null,this._blurvertexattribpos=null,this._screenQuadVBO=null,this._fb=null,this._targetTexture=null,this._depthTexture=null,this._shadingTexture=null,this._scratchTexture=null,this._upscale=null,this._AOstrength=1,this._AOradius=5,this.SHADE_TEXTURE=3,Re=Re||{},this.row=Re.row,this.col=Re.col,this.rows=Re.rows,this.cols=Re.cols,this._canvas=Re.canvas!==void 0?Re.canvas:document.createElement("canvas"),this._precision=Re.precision!==void 0?Re.precision:"highp",this._alpha=Re.alpha===void 0||Re.alpha,this._premultipliedAlpha=Re.premultipliedAlpha===void 0||Re.premultipliedAlpha,this._antialias=Re.antialias!==void 0&&Re.antialias,this._upscale=Re.upscale!==void 0?Re.upscale:this._antialias,this._preserveDrawingBuffer=Re.preserveDrawingBuffer!==void 0&&Re.preserveDrawingBuffer,this._clearColor=Re.clearColor!==void 0?new wt.Color(Re.clearColor):new wt.Color(0),this._clearAlpha=Re.clearAlpha!==void 0?Re.clearAlpha:0,this._outlineMaterial=new X1(Re.outline),this._outlineSphereImposterMaterial=new og(Re.outline),this._outlineStickImposterMaterial=new wm(Re.outline),this._outlineEnabled=!!Re.outline,this._AOEnabled=!!Re.ambientOcclusion,Re.ambientOcclusion&&Re.ambientOcclusion.strength!==void 0&&(this._AOstrength=parseFloat(Re.ambientOcclusion.strength)),this._AOstrength==0&&(this._AOEnabled=!1),Re.ambientOcclusion&&Re.ambientOcclusion.radius!==void 0&&(this._AOradius=parseFloat(Re.ambientOcclusion.radius)),this.domElement=this._canvas,this._canvas.id=Re.id,Re.containerWidth!=0&&Re.containerHeight!=0&&(this.initGL(),this.setDefaultGLState(),this.context=this._gl,this.isWebGL1()?this._extInstanced=this._gl.getExtension("ANGLE_instanced_arrays"):this._extInstanced={vertexAttribDivisorANGLE:this._gl.vertexAttribDivisor.bind(this._gl),drawElementsInstancedANGLE:this._gl.drawElementsInstanced.bind(this._gl)},this._extFragDepth=this._gl.getExtension("EXT_frag_depth"),this._extFloatLinear=this._gl.getExtension("OES_texture_float_linear"),this._extColorBufferFloat=this._gl.getExtension("EXT_color_buffer_float"),this.sprites.init(this))}supportedExtensions(){return{supportsAIA:!!this._extInstanced,supportsImposters:!!this._extFragDepth||!this.isWebGL1(),regen:!1}}getContext(){return this._gl}getCanvas(){return this._canvas}isLost(){return this._gl==null||this._gl.isContextLost()}getPrecision(){return this._precision}setClearColorHex(Re,Kp){this._clearColor.setHex(Re),this._clearAlpha=Kp,this.isLost()||this._gl.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearAlpha)}enableOutline(Re){this._outlineMaterial=new X1(Re),this._outlineSphereImposterMaterial=new og(Re),this._outlineStickImposterMaterial=new wm(Re),this._outlineEnabled=!0}disableOutline(){this._outlineEnabled=!1}enableAmbientOcclusion(Re){Re&&(Re.strength&&(this._AOstrength=Re.strength),Re.scale&&(this._AOradius=Re.scale)),this._AOEnabled=this._AOstrength>0}disableAmbientOcclusion(){this._AOEnabled=!1}setViewport(){if(this._offscreen&&(this._offscreen.width=this._canvas.width,this._offscreen.height=this._canvas.height),this.rows!=null&&this.cols!=null&&this.row!=null&&this.col!=null&&!this.isLost()){var Re=this._gl.drawingBufferWidth/this.cols,Kp=this._gl.drawingBufferHeight/this.rows;this._viewportWidth=Re,this._viewportHeight=Kp,this._gl.enable(this._gl.SCISSOR_TEST),this._gl.scissor(Re*this.col,Kp*this.row,Re,Kp),this._gl.viewport(Re*this.col,Kp*this.row,Re,Kp)}}setSize(Re,Kp){this.devicePixelRatio=window.devicePixelRatio!==void 0?window.devicePixelRatio:1,this._upscale&&this.devicePixelRatio<2&&(this.devicePixelRatio=2),this._canvas.width=Re*this.devicePixelRatio,this._canvas.height=Kp*this.devicePixelRatio,this._canvas.style.width=Re+"px",this._canvas.style.height=Kp+"px",this.rows!=null&&this.cols!=null&&this.row!=null&&this.col!=null?(this.isLost()||(this._viewportWidth=this._gl.drawingBufferWidth/this.cols,this._viewportHeight=this._gl.drawingBufferHeight/this.rows),this.setViewport()):(this._viewportWidth=this._canvas.width,this._viewportHeight=this._canvas.height,this.isLost()||this._gl.viewport(0,0,this._gl.drawingBufferWidth,this._gl.drawingBufferHeight)),this.initFrameBuffer()}clear(Re,Kp,Fn){var t0=0;(Re===void 0||Re)&&(t0|=this._gl.COLOR_BUFFER_BIT),(Kp===void 0||Kp)&&(t0|=this._gl.DEPTH_BUFFER_BIT),(Fn===void 0||Fn)&&(t0|=this._gl.STENCIL_BUFFER_BIT),this._gl.clear(t0)}setMaterialFaces(Re,Kp){var Fn=Re.side===s,t0=Re.side===l;Re.imposter||(t0=Kp?!t0:t0),this._oldDoubleSided!==Fn&&(Fn?this._gl.disable(this._gl.CULL_FACE):this._gl.enable(this._gl.CULL_FACE),this._oldDoubleSided=Fn),this._oldFlipSided!==t0&&(t0?this._gl.frontFace(this._gl.CW):this._gl.frontFace(this._gl.CCW),this._oldFlipSided=t0),this._gl.cullFace(this._gl.BACK)}setDepthTest(Re){this._oldDepthTest!==Re&&(Re?this._gl.enable(this._gl.DEPTH_TEST):this._gl.disable(this._gl.DEPTH_TEST),this._oldDepthTest=Re)}setDepthWrite(Re){this._oldDepthWrite!==Re&&(this._gl.depthMask(Re),this._oldDepthWrite=Re)}setBlending(Re){Re?(this._gl.enable(this._gl.BLEND),this._gl.blendEquationSeparate(this._gl.FUNC_ADD,this._gl.FUNC_ADD),this._gl.blendFuncSeparate(this._gl.SRC_ALPHA,this._gl.ONE_MINUS_SRC_ALPHA,this._gl.ONE,this._gl.ONE_MINUS_SRC_ALPHA)):this._gl.disable(this._gl.BLEND)}initMaterial(Re,Kp,Fn,t0){var s0,J0;if(Re.addEventListener("dispose",this.onMaterialDispose.bind(this)),J0=Re.shaderID){var F0=Wv[J0];Re.vertexShader=F0.vertexShader,Re.fragmentShader=F0.fragmentShader,Re.uniforms=iy.clone(F0.uniforms),Re.shaded&&Re.makeShaded(this.SHADE_TEXTURE)}s0={wireframe:Re.wireframe,fragdepth:Re.imposter,volumetric:Re.volumetric,shaded:Re.shaded},Re.program=this.buildProgram(Re.fragmentShader,Re.vertexShader,Re.uniforms,s0)}renderBuffer(Re,Kp,Fn,t0,s0,J0){var F0,lm;if(t0.visible&&(F0=this.setProgram(Re,Kp,Fn,t0,J0,this))){lm=F0.attributes;var Bm,Nm,jm=!1,A1=t0.wireframe?1:0,L1=16777215*s0.id+2*F0.id+A1;if(L1!==this._currentGeometryGroupHash&&(this._currentGeometryGroupHash=L1,jm=!0),jm&&(this.disableAttributes(),lm.position>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,s0.__webglVertexBuffer),this.enableAttribute(lm.position),this._gl.vertexAttribPointer(lm.position,3,this._gl.FLOAT,!1,0,0)),lm.color>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,s0.__webglColorBuffer),this.enableAttribute(lm.color),this._gl.vertexAttribPointer(lm.color,3,this._gl.FLOAT,!1,0,0)),lm.normal>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,s0.__webglNormalBuffer),this.enableAttribute(lm.normal),this._gl.vertexAttribPointer(lm.normal,3,this._gl.FLOAT,!1,0,0)),lm.offset>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,s0.__webglOffsetBuffer),this.enableAttribute(lm.offset),this._gl.vertexAttribPointer(lm.offset,3,this._gl.FLOAT,!1,0,0)),lm.radius>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,s0.__webglRadiusBuffer),this.enableAttribute(lm.radius),this._gl.vertexAttribPointer(lm.radius,1,this._gl.FLOAT,!1,0,0))),J0 instanceof B0){if(t0.shaderID==="instanced"){var K1=t0.sphere.geometryGroups[0];jm&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,s0.__webglVertexBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,K1.vertexArray,this._gl.STATIC_DRAW),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,s0.__webglNormalBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,K1.normalArray,this._gl.STATIC_DRAW),this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,s0.__webglFaceBuffer),this._gl.bufferData(this._gl.ELEMENT_ARRAY_BUFFER,K1.faceArray,this._gl.STATIC_DRAW)),Bm=K1.faceidx,this._extInstanced.vertexAttribDivisorANGLE(lm.offset,1),this._extInstanced.vertexAttribDivisorANGLE(lm.radius,1),this._extInstanced.vertexAttribDivisorANGLE(lm.color,1),this._extInstanced.drawElementsInstancedANGLE(this._gl.TRIANGLES,Bm,this._gl.UNSIGNED_SHORT,0,s0.radiusArray.length),this._extInstanced.vertexAttribDivisorANGLE(lm.offset,0),this._extInstanced.vertexAttribDivisorANGLE(lm.radius,0),this._extInstanced.vertexAttribDivisorANGLE(lm.color,0)}else t0.wireframe?(Nm=s0.lineidx,this.setLineWidth(t0.wireframeLinewidth),jm&&this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,s0.__webglLineBuffer),this._gl.drawElements(this._gl.LINES,Nm,this._gl.UNSIGNED_SHORT,0)):(Bm=s0.faceidx,jm&&this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,s0.__webglFaceBuffer),this._gl.drawElements(this._gl.TRIANGLES,Bm,this._gl.UNSIGNED_SHORT,0));this.info.render.calls++,this.info.render.vertices+=Bm,this.info.render.faces+=Bm/3}else J0 instanceof r0&&(Nm=s0.vertices,this.setLineWidth(t0.linewidth),this._gl.drawArrays(this._gl.LINES,0,Nm),this.info.render.calls++)}}clearShading(){this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._shadingTexture,0),this.clear(!1,!0,!1),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._depthTexture,0)}setShading(Re,Kp,Fn){let t0=Re.__lights,s0=Re.fog,J0=[];for(let Bm=0,Nm=Re.__webglObjects.length;Bm<Nm;Bm++){let jm=Re.__webglObjects[Bm];jm.render&&jm[Fn]&&J0.push(jm)}if(J0.length==0)return;this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._shadingTexture,0),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.COLOR_ATTACHMENT0,this._gl.TEXTURE_2D,null,0),this.renderObjects(Re.__webglObjects,!0,Fn+"Depth",Kp,t0,s0,!1),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._scratchTexture,0),this.clear(!1,!0,!1),this._gl.useProgram(this._AOshader),this._currentProgram=this._AOshader,this.setDepthTest(-1),this.setDepthWrite(-1);let F0=this._AOshader.uniforms;this._gl.uniform1f(F0.total_strength,this._AOstrength),this._gl.uniform1f(F0.radius,this._AOradius),this._fullProjModelMatrix=new m.Matrix4,this._fullProjModelMatrixInv=new m.Matrix4;let lm=J0[0].object;this._fullProjModelMatrix.multiplyMatrices(Kp.projectionMatrix,lm._modelViewMatrix),this._fullProjModelMatrixInv.getInverse(this._fullProjModelMatrix),this._gl.uniformMatrix4fv(F0.projectionMatrix,!1,this._fullProjModelMatrix.elements),this._gl.uniformMatrix4fv(F0.projinv,!1,this._fullProjModelMatrixInv.elements),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._screenQuadVBO),this._gl.enableVertexAttribArray(this._aovertexattribpos),this._gl.vertexAttribPointer(this._aovertexattribpos,2,this._gl.FLOAT,!1,0,0),this._gl.activeTexture(this._gl.TEXTURE0),this._gl.bindTexture(this._gl.TEXTURE_2D,this._shadingTexture),this._gl.drawArrays(this._gl.TRIANGLES,0,6),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._shadingTexture,0),this.clear(!1,!0,!1),this._gl.useProgram(this._blurshader),this._currentProgram=this._blurshader,this.setDepthTest(-1),this.setDepthWrite(-1),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._screenQuadVBO),this._gl.enableVertexAttribArray(this._blurvertexattribpos),this._gl.vertexAttribPointer(this._blurvertexattribpos,2,this._gl.FLOAT,!1,0,0),this._gl.activeTexture(this._gl.TEXTURE0),this._gl.bindTexture(this._gl.TEXTURE_2D,this._scratchTexture),this._gl.drawArrays(this._gl.TRIANGLES,0,6),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.COLOR_ATTACHMENT0,this._gl.TEXTURE_2D,this._targetTexture,0),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._depthTexture,0)}render(Re,Kp){if(Kp instanceof Cy==0)return void console.error("Renderer.render: camera is not an instance of Camera.");var Fn,t0,s0,J0,F0,lm=Re.__lights,Bm=Re.fog;if(this._currentMaterialId=-1,this._lightsNeedUpdate=!0,this.autoUpdateScene&&Re.updateMatrixWorld(),Kp.parent===void 0&&Kp.updateMatrixWorld(),Kp.matrixWorldInverse.getInverse(Kp.matrixWorld),this.isLost())return;this.autoUpdateObjects&&this.initWebGLObjects(Re),this.info.render.calls=0,this.info.render.vertices=0,this.info.render.faces=0,this.info.render.points=0,this._currentWidth=this._viewportWidth,this._currentHeight=this._viewportHeight,this.setViewport(),this.setFrameBuffer(),this._gl.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearAlpha),this.clear(!0,!0,!0),F0=Re.__webglObjects;let Nm=!1,jm=this._AOEnabled;for(Fn=0,t0=F0.length;Fn<t0;Fn++)J0=(s0=F0[Fn]).object,s0.render=!1,J0.visible&&(this.setupMatrices(J0,Kp),this.unrollBufferMaterial(s0),s0.render=!0,s0.volumetric&&(Nm=!0),s0.hasAO&&(jm=!0));if(this.setBlending(!1),jm&&this.setShading(Re,Kp,"opaque"),this.renderObjects(Re.__webglObjects,!0,"opaque",Kp,lm,Bm,!1),jm&&this.clearShading(),this.renderSprites(Re,Kp,!1),this.renderObjects(Re.__webglObjects,!0,"transparentDepth",Kp,lm,Bm,!0),this.renderObjects(Re.__webglObjects,!1,"transparent",Kp,lm,Bm,!0),Nm&&this._fb&&(this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,null,0),this.renderObjects(Re.__webglObjects,!1,"volumetric",Kp,lm,Bm,!0)),this.renderFrameBuffertoScreen(),this.setDepthTest(!0),this.setDepthWrite(!0),this.renderSprites(Re,Kp,!0),this._bitmap){const A1=this._offscreen.transferToImageBitmap();this._bitmap.transferFromImageBitmap(A1),A1.close()}}setFrameBuffer(){if(this.isWebGL1()||!this._fb)return;let Re=this._viewportWidth,Kp=this._viewportHeight;this._gl.enable(this._gl.SCISSOR_TEST),this._gl.scissor(0,0,Re,Kp),this._gl.viewport(0,0,Re,Kp),this._gl.bindTexture(this._gl.TEXTURE_2D,this._targetTexture),this._gl.texImage2D(this._gl.TEXTURE_2D,0,this._gl.RGBA,Re,Kp,0,this._gl.RGBA,this._gl.UNSIGNED_BYTE,null),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MIN_FILTER,this._gl.LINEAR),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MAG_FILTER,this._gl.LINEAR),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._gl.bindTexture(this._gl.TEXTURE_2D,this._depthTexture),this._gl.texImage2D(this._gl.TEXTURE_2D,0,this._gl.DEPTH_COMPONENT32F,Re,Kp,0,this._gl.DEPTH_COMPONENT,this._gl.FLOAT,null),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MIN_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MAG_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._shadingTexture&&(this._gl.deleteTexture(this._shadingTexture),this._shadingTexture=this._gl.createTexture(),this._gl.bindTexture(this._gl.TEXTURE_2D,this._shadingTexture),this._gl.texImage2D(this._gl.TEXTURE_2D,0,this._gl.DEPTH_COMPONENT32F,Re,Kp,0,this._gl.DEPTH_COMPONENT,this._gl.FLOAT,null),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MIN_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MAG_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._gl.deleteTexture(this._scratchTexture),this._scratchTexture=this._gl.createTexture(),this._gl.bindTexture(this._gl.TEXTURE_2D,this._scratchTexture),this._gl.texImage2D(this._gl.TEXTURE_2D,0,this._gl.DEPTH_COMPONENT32F,Re,Kp,0,this._gl.DEPTH_COMPONENT,this._gl.FLOAT,null),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MIN_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MAG_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE)),this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,this._fb),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.COLOR_ATTACHMENT0,this._gl.TEXTURE_2D,this._targetTexture,0),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._shadingTexture,0),this._gl.clearDepth(1),this._gl.clear(this._gl.DEPTH_BUFFER_BIT),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._depthTexture,0)}initFrameBuffer(){if(this.isWebGL1())return;let Re=this._viewportWidth,Kp=this._viewportHeight;this._gl.enable(this._gl.SCISSOR_TEST),this._gl.scissor(0,0,Re,Kp),this._gl.viewport(0,0,Re,Kp),this._targetTexture=this._gl.createTexture(),this._depthTexture=this._gl.createTexture(),this._shadingTexture=this._gl.createTexture(),this._scratchTexture=this._gl.createTexture(),this._fb=this._gl.createFramebuffer();var Fn=this._antialias?Wv.screenaa:Wv.screen;this._screenshader=this.buildProgram(Fn.fragmentShader,Fn.vertexShader,Fn.uniforms,{}),this._vertexattribpos=this._gl.getAttribLocation(this._screenshader,"vertexPosition"),this._screenQuadVBO=this._gl.createBuffer(),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._screenQuadVBO),this._gl.bufferData(this._gl.ARRAY_BUFFER,new Float32Array([1,1,-1,1,-1,-1,-1,-1,1,-1,1,1]),this._gl.STATIC_DRAW);let t0=Wv.ssao;this._AOshader=this.buildProgram(t0.fragmentShader,t0.vertexShader,t0.uniforms,{}),this._aovertexattribpos=this._gl.getAttribLocation(this._AOshader,"vertexPosition");let s0=Wv.blur;this._blurshader=this.buildProgram(s0.fragmentShader,s0.vertexShader,s0.uniforms,{}),this._blurvertexattribpos=this._gl.getAttribLocation(this._blurshader,"vertexPosition")}renderFrameBuffertoScreen(){this.isWebGL1()||this._fb===null||(this.setViewport(),this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,null),this._gl.clear(this._gl.COLOR_BUFFER_BIT|this._gl.DEPTH_BUFFER_BIT),this._gl.frontFace(this._gl.CCW),this._gl.cullFace(this._gl.BACK),this._gl.useProgram(this._screenshader),this._currentProgram=this._screenshader,this.setDepthTest(-1),this.setDepthWrite(-1),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._screenQuadVBO),this._gl.enableVertexAttribArray(this._vertexattribpos),this._gl.vertexAttribPointer(this._vertexattribpos,2,this._gl.FLOAT,!1,0,0),this._gl.activeTexture(this._gl.TEXTURE0),this._gl.bindTexture(this._gl.TEXTURE_2D,this._targetTexture),this._gl.drawArrays(this._gl.TRIANGLES,0,6))}initWebGLObjects(Re){if(Re.__webglObjects||(Re.__webglObjects=[],Re.__webglObjectsImmediate=[],Re.__webglSprites=[],Re.__webglFlares=[]),Re.__objectsAdded.length){for(;Re.__objectsAdded.length;)this.addObject(Re.__objectsAdded[0],Re),Re.__objectsAdded.splice(0,1);this._currentGeometryGroupHash=-1}for(;Re.__objectsRemoved.length;)this.removeObject(Re.__objectsRemoved[0],Re),Re.__objectsRemoved.splice(0,1);for(var Kp=0,Fn=Re.__webglObjects.length;Kp<Fn;Kp++)this.updateObject(Re.__webglObjects[Kp].object)}getYRatio(){return this.rows!==void 0&&this.row!==void 0?this.rows:1}getXRatio(){return this.cols!==void 0&&this.col!==void 0?this.cols:1}getAspect(Re,Kp){Re!=null&&Kp!=null||(Re=this._canvas.width,Kp=this._canvas.height);var Fn=Re/Kp;return this.rows!=null&&this.cols!=null&&this.row!=null&&this.col!=null&&(Fn=Re/this.cols/(Kp/this.rows)),Fn}setTexture(Re,Kp,Fn){if(Re.needsUpdate){Re.__webglInit||(Re.__webglInit=!0,Re.addEventListener("dispose",this.onTextureDispose.bind(this)),Re.__webglTexture=this._gl.createTexture(),this.info.memory.textures++),this._gl.activeTexture(this._gl.TEXTURE0+Kp);var t0=Fn?this._gl.TEXTURE_3D:this._gl.TEXTURE_2D;this._gl.bindTexture(t0,Re.__webglTexture),this._gl.pixelStorei(this._gl.UNPACK_FLIP_Y_WEBGL,Re.flipY),this._gl.pixelStorei(this._gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Re.premultiplyAlpha),this._gl.pixelStorei(this._gl.UNPACK_ALIGNMENT,Re.unpackAlignment),this._gl.pixelStorei(this._gl.PACK_ALIGNMENT,Re.unpackAlignment);var s0=this.paramToGL(Re.format),J0=this.paramToGL(Re.type);if(Fn)this.setTextureParameters(this._gl.TEXTURE_3D,Re),this._gl.texImage3D(this._gl.TEXTURE_3D,0,this._gl.R32F,Re.image.size.z,Re.image.size.y,Re.image.size.x,0,this._gl.RED,this._gl.FLOAT,Re.image.data);else{var F0=Re.image,lm=F0.width,Bm=F0.height;lm===void 0&&(lm=F0.length,s0==this._gl.RGBA&&(lm/=4),Bm=1),this.setTextureParameters(this._gl.TEXTURE_2D,Re),this.isWebGL1()?this._gl.texImage2D(this._gl.TEXTURE_2D,0,s0,s0,J0,Re.image):this._gl.texImage2D(this._gl.TEXTURE_2D,0,s0,lm,Bm,0,s0,J0,Re.image)}Re.needsUpdate=!1,Re.onUpdate&&Re.onUpdate()}else this._gl.activeTexture(this._gl.TEXTURE0+Kp),Fn?this._gl.bindTexture(this._gl.TEXTURE_3D,Re.__webglTexture):this._gl.bindTexture(this._gl.TEXTURE_2D,Re.__webglTexture)}supportsVolumetric(){return!this.isWebGL1()}enableAttribute(Re){this._enabledAttributes[Re]||(this._gl.enableVertexAttribArray(Re),this._enabledAttributes[Re]=!0)}disableAttributes(){for(let Re in this._enabledAttributes)this._enabledAttributes[Re]&&(this._gl.disableVertexAttribArray(Re),this._enabledAttributes[Re]=!1)}setPolygonOffset(Re,Kp,Fn){this._oldPolygonOffset!==Re&&(Re?this._gl.enable(this._gl.POLYGON_OFFSET_FILL):this._gl.disable(this._gl.POLYGON_OFFSET_FILL))}setLineWidth(Re){Re!==this._oldLineWidth&&(this._gl.lineWidth(Re),this._oldLineWidth=Re)}deallocateGeometry(Re){if(Re.__webglInit=void 0,Re.__webglVertexBuffer!==void 0&&this._gl.deleteBuffer(Re.__webglVertexBuffer),Re.__webglColorBuffer!==void 0&&this._gl.deleteBuffer(Re.__webglColorBuffer),Re.geometryGroups!==void 0)for(var Kp=0,Fn=Re.groups;Kp<Fn;Kp++){var t0=Re.geometryGroups[Kp];t0.__webglVertexBuffer!==void 0&&this._gl.deleteBuffer(t0.__webglVertexBuffer),t0.__webglColorBuffer!==void 0&&this._gl.deleteBuffer(t0.__webglColorBuffer),t0.__webglNormalBuffer!==void 0&&this._gl.deleteBuffer(t0.__webglNormalBuffer),t0.__webglFaceBuffer!==void 0&&this._gl.deleteBuffer(t0.__webglFaceBuffer),t0.__webglLineBuffer!==void 0&&this._gl.deleteBuffer(t0.__webglLineBuffer)}}deallocateMaterial(Re){var Kp=Re.program;if(Kp!==void 0){var Fn,t0,s0;Re.program=void 0;var J0=!1;for(Fn=0,t0=this._programs.length;Fn<t0;Fn++)if((s0=this._programs[Fn]).program===Kp){s0.usedTimes--,s0.usedTimes===0&&(J0=!0);break}if(J0===!0){var F0=[];for(Fn=0,t0=this._programs.length;Fn<t0;Fn++)(s0=this._programs[Fn]).program!==Kp&&F0.push(s0);this._programs=F0,this._gl.deleteProgram(Kp),this.info.memory.programs--}}}deallocateTexture(Re){if(Re.image&&Re.image.__webglTextureCube)this._gl.deleteTexture(Re.image.__webglTextureCube);else{if(!Re.__webglInit)return;Re.__webglInit=!1,this._gl.deleteTexture(Re.__webglTexture)}}onGeometryDispose(Re){var Kp=Re.target;Kp.removeEventListener("dispose",this.onGeometryDispose),this.deallocateGeometry(Kp),this.info.memory.geometries--}onTextureDispose(Re){var Kp=Re.target;Kp.removeEventListener("dispose",this.onTextureDispose),this.deallocateTexture(Kp),this.info.memory.textures--}onMaterialDispose(Re){var Kp=Re.target;Kp.removeEventListener("dispose",this.onMaterialDispose),this.deallocateMaterial(Kp)}getShader(Re,Kp){var Fn;return this.isWebGL1()||Kp.startsWith("#version")||(Kp=Kp.replace(/gl_FragDepthEXT/g,"gl_FragDepth"),Kp=`#version 300 es
`+(Kp=(Kp=(Kp=(Kp=(Kp=Re=="fragment"?Kp.replace(/varying/g,"in"):Kp.replace(/varying/g,"out")).replace(/attribute/g,"in")).replace(/texture2D/g,"texture")).replace(/\/\/DEFINEFRAGCOLOR/g,"out vec4 glFragColor;")).replace(/gl_FragColor/g,"glFragColor"))),Re==="fragment"?Fn=this._gl.createShader(this._gl.FRAGMENT_SHADER):Re==="vertex"&&(Fn=this._gl.createShader(this._gl.VERTEX_SHADER)),Fn==null?null:(this._gl.shaderSource(Fn,Kp),this._gl.compileShader(Fn),this._gl.getShaderParameter(Fn,this._gl.COMPILE_STATUS)?Fn:(console.error(this._gl.getShaderInfoLog(Fn)),console.error("could not initialize shader"),null))}buildProgram(Re,Kp,Fn,t0){var s0,J0,F0,lm,Bm=[];for(s0 in Bm.push(Re),Bm.push(Kp),t0)Bm.push(s0),Bm.push(t0[s0]);for(lm=Bm.join(),s0=0,J0=this._programs.length;s0<J0;s0++){var Nm=this._programs[s0];if(Nm.code===lm)return Nm.usedTimes++,Nm.program}if(this.isWebGL1()&&t0.volumetric)throw new Error("Volumetric rendering requires webgl2 which is not supported by your hardware.");if((F0=this._gl.createProgram())==null)return null;var jm,A1,L1,K1="precision "+this._precision+" float;",Tg=[t0.volumetric?"#version 300 es":"",K1].join(`
`),Lg=[t0.volumetric?"#version 300 es":"",t0.fragdepth&&this.isWebGL1()?"#extension GL_EXT_frag_depth: enable":"",t0.shaded?"#define SHADED 1":"",t0.wireframe?"#define WIREFRAME 1":"",K1].join(`
`),lg=this.getShader("fragment",Lg+Re),Mg=this.getShader("vertex",Tg+Kp);for(A1 in Mg!=null&&this._gl.attachShader(F0,Mg),lg!=null&&this._gl.attachShader(F0,lg),this._gl.linkProgram(F0),this._gl.getProgramParameter(F0,this._gl.LINK_STATUS)||console.error("Could not initialize shader"),F0.uniforms={},F0.attributes={},jm=["viewMatrix","modelViewMatrix","projectionMatrix","normalMatrix","vWidth","vHeight"],Fn)jm.push(A1);for(L1=0;L1<jm.length;L1++){var $1=jm[L1];F0.uniforms[$1]=this._gl.getUniformLocation(F0,$1)}for(jm=["position","normal","color","lineDistance","offset","radius"],L1=0;L1<jm.length;L1++){var j1=jm[L1];F0.attributes[j1]=this._gl.getAttribLocation(F0,j1)}return F0.id=this._programs_counter++,this._programs.push({program:F0,code:lm,usedTimes:1}),this.info.memory.programs=this._programs.length,F0}setProgram(Re,Kp,Fn,t0,s0,J0){if(t0.needsUpdate&&(t0.program&&this.deallocateMaterial(t0),this.initMaterial(t0,Kp,Fn,s0),t0.needsUpdate=!1),t0.program==null)return null;var F0=!1,lm=t0.program,Bm=lm.uniforms,Nm=t0.uniforms;if(lm!=this._currentProgram&&(this._gl.useProgram(lm),this._currentProgram=lm,F0=!0),t0.id!=this._currentMaterialId&&(this._currentMaterialId=t0.id,F0=!0),Re!=this._currentCamera&&(this._currentCamera=Re,F0=!0),Bm.projectionMatrix&&this._gl.uniformMatrix4fv(Bm.projectionMatrix,!1,Re.projectionMatrix.elements),Bm.modelViewMatrix&&this._gl.uniformMatrix4fv(Bm.modelViewMatrix,!1,s0._modelViewMatrix.elements),Bm.normalMatrix&&this._gl.uniformMatrix3fv(Bm.normalMatrix,!1,s0._normalMatrix.elements),Bm.projinv&&(this._projInverse.getInverse(Re.projectionMatrix),this._gl.uniformMatrix4fv(Bm.projinv,!1,this._projInverse.elements)),Bm.viewMatrix&&this._gl.uniformMatrix4fv(Bm.viewMatrix,!1,Re.matrixWorldInverse.elements),Bm.vWidth&&this._gl.uniform1f(Bm.vWidth,this._viewportWidth),Bm.vHeight&&this._gl.uniform1f(Bm.vHeight,this._viewportHeight),F0){if(Nm.fogColor.value=Fn.color,Nm.fogNear.value=Fn.near,Nm.fogFar.value=Fn.far,t0.shaderID.startsWith("lambert")||t0.shaderID==="instanced"||t0.shaderID.endsWith("imposter"))this._lightsNeedUpdate&&(this.setupLights(lm,Kp),this._lightsNeedUpdate=!1),Nm.directionalLightColor.value=this._lights.directional.colors,Nm.directionalLightDirection.value=this._lights.directional.positions;else if(t0.shaderID.endsWith("outline"))Nm.outlineColor.value=t0.outlineColor,Nm.outlineWidth.value=t0.outlineWidth,Nm.outlinePushback.value=t0.outlinePushback,Nm.outlineMaxPixels.value=t0.outlineMaxPixels*this.devicePixelRatio;else if(t0.shaderID==="volumetric"){s0._modelViewMatrix.getScale(this._direction),this._worldInverse.getInverse(s0._modelViewMatrix),this._projInverse.getInverse(Re.projectionMatrix),this._textureMatrix.multiplyMatrices(s0.material.texmatrix,this._worldInverse),this._gl.uniformMatrix4fv(Bm.textmat,!1,this._textureMatrix.elements),this._gl.uniformMatrix4fv(Bm.projinv,!1,this._projInverse.elements);let jm=Math.min(Math.min(this._direction.x,this._direction.y),this._direction.z);Nm.step.value=s0.material.unit*jm,Nm.maxdepth.value=s0.material.maxdepth*jm,Nm.transfermax.value=s0.material.transfermax,Nm.transfermin.value=s0.material.transfermin,Nm.subsamples.value=s0.material.subsamples,J0.setTexture(s0.material.transferfn,4,!1),J0.setTexture(s0.material.map,3,!0),this._gl.activeTexture(this._gl.TEXTURE5),this._gl.bindTexture(this._gl.TEXTURE_2D,this._depthTexture)}Nm.opacity.value=t0.opacity,this.loadMaterialUniforms(Bm,Nm)}return Nm.shading&&(Nm.shading.value==3?(this._gl.activeTexture(this._gl.TEXTURE0+this.SHADE_TEXTURE),this._gl.bindTexture(this._gl.TEXTURE_2D,this._shadingTexture)):console.error("Invalid shading textures.")),lm}loadMaterialUniforms(Re,Kp){var Fn,t0,s0,J0;for(Fn in Kp)Re[Fn]&&(t0=Kp[Fn].type,s0=Kp[Fn].value,J0=Re[Fn],t0==="f"?this._gl.uniform1f(J0,s0):t0==="i"?this._gl.uniform1i(J0,s0):t0==="fv"?this._gl.uniform3fv(J0,s0):t0==="c"?this._gl.uniform3f(J0,s0.r,s0.g,s0.b):t0==="f4"&&this._gl.uniform4f(J0,s0[0],s0[1],s0[2],s0[3]))}addObject(Re,Kp){var Fn,t0,s0,J0;if(!Re.__webglInit&&(Re.__webglInit=!0,Re._modelViewMatrix=new m.Matrix4,Re._normalMatrix=new m.Matrix3,Re.geometry!==void 0&&Re.geometry.__webglInit===void 0&&(Re.geometry.__webglInit=!0,Re.geometry.addEventListener("dispose",this.onGeometryDispose.bind(this))),Re instanceof B0||Re instanceof r0))for(Fn=0,t0=(s0=Re.geometry).geometryGroups.length;Fn<t0;Fn++)(J0=s0.geometryGroups[Fn]).id=this._geometryGroupCounter++,J0.__webglVertexBuffer||(Re instanceof B0?(this.createMeshBuffers(J0),s0.elementsNeedUpdate=!0,s0.normalsNeedUpdate=!0):Re instanceof r0&&this.createLineBuffers(J0),s0.verticesNeedUpdate=!0,s0.colorsNeedUpdate=!0);if(!Re.__webglActive){if(Re instanceof B0||Re instanceof r0)for(Fn=0,t0=(s0=Re.geometry).geometryGroups.length;Fn<t0;Fn++)J0=s0.geometryGroups[Fn],this.addBuffer(Kp.__webglObjects,J0,Re);else Re instanceof bm&&Kp.__webglSprites.push(Re);Re.__webglActive=!0}}updateObject(Re){var Kp,Fn=Re.geometry;if(Re instanceof B0||Re instanceof r0){for(var t0=0,s0=Fn.geometryGroups.length;t0<s0;t0++)Kp=Fn.geometryGroups[t0],(Fn.verticesNeedUpdate||Fn.elementsNeedUpdate||Fn.colorsNeedUpdate||Fn.normalsNeedUpdate)&&this.setBuffers(Kp,this._gl.STATIC_DRAW);Fn.verticesNeedUpdate=!1,Fn.elementsNeedUpdate=!1,Fn.normalsNeedUpdate=!1,Fn.colorsNeedUpdate=!1,Fn.buffersNeedUpdate=!1}}removeObject(Re,Kp){Re instanceof B0||Re instanceof r0?this.removeInstances(Kp.__webglObjects,Re):Re instanceof bm&&this.removeInstancesDirect(Kp.__webglSprites,Re),Re.__webglActive=!1}removeInstances(Re,Kp){for(var Fn=Re.length-1;Fn>=0;--Fn)Re[Fn].object===Kp&&Re.splice(Fn,1)}removeInstancesDirect(Re,Kp){for(var Fn=Re.length-1;Fn>=0;--Fn)Re[Fn]===Kp&&Re.splice(Fn,1)}unrollBufferMaterial(Re){var Kp=Re.object.material;if(Kp.volumetric)Re.opaque=null,Re.transparent=null,Re.volumetric=Kp;else if(Kp.transparent){if(Re.opaque=null,Re.volumetric=null,Re.transparent=Kp,!Kp.wireframe){let Fn=Kp.clone();Fn.opacity=0,Re.transparentDepth=Fn}}else{if(Re.opaque=Kp,Re.transparent=null,Re.volumetric=null,!Kp.wireframe){let Fn=Kp.clone();Fn.opacity=0,Re.opaqueDepth=Fn}Kp.hasAO&&(Re.hasAO=!0),(this._AOEnabled||Re.hasAO)&&(Re.opaqueShaded=Kp.clone(),Re.opaqueShaded.shaded=!0)}}setBuffers(Re,Kp){var Fn=Re.vertexArray,t0=Re.colorArray;if(Re.__webglOffsetBuffer!==void 0?(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,Re.__webglOffsetBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,Fn,Kp)):(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,Re.__webglVertexBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,Fn,Kp)),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,Re.__webglColorBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,t0,Kp),Re.normalArray&&Re.__webglNormalBuffer!==void 0){var s0=Re.normalArray;this._gl.bindBuffer(this._gl.ARRAY_BUFFER,Re.__webglNormalBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,s0,Kp)}if(Re.radiusArray&&Re.__webglRadiusBuffer!==void 0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,Re.__webglRadiusBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,Re.radiusArray,Kp)),Re.faceArray&&Re.__webglFaceBuffer!==void 0){var J0=Re.faceArray;this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,Re.__webglFaceBuffer),this._gl.bufferData(this._gl.ELEMENT_ARRAY_BUFFER,J0,Kp)}if(Re.lineArray&&Re.__webglLineBuffer!==void 0){var F0=Re.lineArray;this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,Re.__webglLineBuffer),this._gl.bufferData(this._gl.ELEMENT_ARRAY_BUFFER,F0,Kp)}}createMeshBuffers(Re){Re.radiusArray&&(Re.__webglRadiusBuffer=this._gl.createBuffer()),Re.useOffset&&(Re.__webglOffsetBuffer=this._gl.createBuffer()),Re.__webglVertexBuffer=this._gl.createBuffer(),Re.__webglNormalBuffer=this._gl.createBuffer(),Re.__webglColorBuffer=this._gl.createBuffer(),Re.__webglFaceBuffer=this._gl.createBuffer(),Re.__webglLineBuffer=this._gl.createBuffer(),this.info.memory.geometries++}createLineBuffers(Re){Re.__webglVertexBuffer=this._gl.createBuffer(),Re.__webglColorBuffer=this._gl.createBuffer(),this.info.memory.geometries++}addBuffer(Re,Kp,Fn){Re.push({buffer:Kp,object:Fn,opaque:null,transparent:null})}setupMatrices(Re,Kp){Re._modelViewMatrix.multiplyMatrices(Kp.matrixWorldInverse,Re.matrixWorld),Re._normalMatrix.getInverse(Re._modelViewMatrix),Re._normalMatrix.transpose()}filterFallback(Re){return this._gl.LINEAR}setTextureParameters(Re,Kp){Re==this._gl.TEXTURE_2D?(this._gl.texParameteri(Re,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(Re,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(Re,this._gl.TEXTURE_MAG_FILTER,this.filterFallback(Kp.magFilter)),this._gl.texParameteri(Re,this._gl.TEXTURE_MIN_FILTER,this.filterFallback(Kp.minFilter))):(this._gl.texParameteri(Re,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(Re,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(Re,this._gl.TEXTURE_WRAP_R,this._gl.CLAMP_TO_EDGE),this._extColorBufferFloat&&this._extFloatLinear?(this._gl.texParameteri(Re,this._gl.TEXTURE_MAG_FILTER,this._gl.LINEAR),this._gl.texParameteri(Re,this._gl.TEXTURE_MIN_FILTER,this._gl.LINEAR)):(this._gl.texParameteri(Re,this._gl.TEXTURE_MAG_FILTER,this._gl.NEAREST),this._gl.texParameteri(Re,this._gl.TEXTURE_MIN_FILTER,this._gl.NEAREST)))}paramToGL(Re){return Re===Z?this._gl.UNSIGNED_BYTE:Re===le?this._gl.RGBA:Re===I?this._gl.NEAREST:0}setupLights(Re,Kp){var Fn,t0,s0,J0,F0,lm=this._lights,Bm=lm.directional.colors,Nm=lm.directional.positions,jm=0,A1=0;for(Fn=0,t0=Kp.length;Fn<t0;Fn++)if(J0=(s0=Kp[Fn]).color,F0=s0.intensity,s0 instanceof ae){if(this._direction.getPositionFromMatrix(s0.matrixWorld),this._vector3.getPositionFromMatrix(s0.target.matrixWorld),this._direction.sub(this._vector3),this._direction.normalize(),this._direction.x===0&&this._direction.y===0&&this._direction.z===0)continue;Nm[A1]=this._direction.x,Nm[A1+1]=this._direction.y,Nm[A1+2]=this._direction.z,Bm[A1]=J0.r*F0,Bm[A1+1]=J0.g*F0,Bm[A1+2]=J0.b*F0,A1+=3,jm++}lm.ambient[0]=0,lm.ambient[1]=0,lm.ambient[2]=0,lm.directional.length=jm}initGL(){try{if(!OffscreenCanvas||this.rows!=null&&this.cols!=null&&this.row!=null&&this.col!=null){if(!(this._gl=this._canvas.getContext("webgl2",{alpha:this._alpha,premultipliedAlpha:this._premultipliedAlpha,antialias:this._antialias,preserveDrawingBuffer:this._preserveDrawingBuffer}))&&!(this._gl=this._canvas.getContext("experimental-webgl",{alpha:this._alpha,premultipliedAlpha:this._premultipliedAlpha,antialias:this._antialias,preserveDrawingBuffer:this._preserveDrawingBuffer}))&&!(this._gl=this._canvas.getContext("webgl",{alpha:this._alpha,premultipliedAlpha:this._premultipliedAlpha,antialias:this._antialias,preserveDrawingBuffer:this._preserveDrawingBuffer})))throw"Error creating WebGL context."}else(Uv==null||Uv.isContextLost())&&(Ov=new OffscreenCanvas(this._canvas.width,this._canvas.height),Uv=Ov.getContext("webgl2",{alpha:!0,premultipliedAlpha:this._premultipliedAlpha,antialias:this._antialias,preserveDrawingBuffer:this._preserveDrawingBuffer})),this._offscreen=Ov,this._gl=Uv,this._bitmap=this._canvas.getContext("bitmaprenderer",{alpha:!0});var Re=this._gl.getParameter(this._gl.VERSION);this._webglversion=parseInt(Re[6])}catch(Kp){console.error(Kp)}}isWebGL1(){return this._webglversion==1}setDefaultGLState(){this._gl.clearDepth(1),this._gl.clearStencil(0),this._gl.enable(this._gl.DEPTH_TEST),this._gl.depthFunc(this._gl.LEQUAL),this._gl.frontFace(this._gl.CCW),this._gl.cullFace(this._gl.BACK),this._gl.enable(this._gl.CULL_FACE),this._gl.enable(this._gl.BLEND),this._gl.blendEquation(this._gl.FUNC_ADD),this._gl.blendFunc(this._gl.SRC_ALPHA,this._gl.ONE_MINUS_SRC_ALPHA),this._gl.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearAlpha)}renderObjects(Re,Kp,Fn,t0,s0,J0,F0){var lm,Bm,Nm,jm,A1,L1,K1;Kp?(A1=Re.length-1,L1=-1,K1=-1):(A1=0,L1=Re.length,K1=1);for(var Tg=A1;Tg!==L1;Tg+=K1)if((lm=Re[Tg]).render){if(Bm=lm.object,Nm=lm.buffer,jm=lm[Fn],(lm.hasAO||this._AOEnabled)&&lm[Fn+"Shaded"]&&(jm=lm[Fn+"Shaded"]),!jm)continue;this.setBlending(F0),this.setDepthTest(jm.depthTest),this.setDepthWrite(jm.depthWrite),this.setPolygonOffset(jm.polygonOffset,jm.polygonOffsetFactor,jm.polygonOffsetUnits);var Lg=Bm._modelViewMatrix.isReflected();if(this.setMaterialFaces(jm,Lg),this.renderBuffer(t0,s0,J0,jm,Nm,Bm),(this._outlineEnabled||jm.outline)&&!jm.wireframe&&jm.shaderID!=="basic"&&jm.opacity!==0){let lg=this._outlineMaterial;jm.shaderID=="sphereimposter"?lg=this._outlineSphereImposterMaterial:jm.shaderID=="stickimposter"&&(lg=this._outlineStickImposterMaterial),this.renderBuffer(t0,s0,J0,lg,Nm,Bm)}}}renderSprites(Re,Kp,Fn){this._currentGeometryGroupHash=-1,this._currentProgram=null,this._currentCamera=null,this._oldDepthWrite=-1,this._oldDepthTest=-1,this._oldDoubleSided=-1,this._currentMaterialId=-1,this._oldFlipSided=-1,this._lightsNeedUpdate=!0,this.sprites.render(Re,Kp,this._currentWidth,this._currentHeight,Fn),this._currentGeometryGroupHash=-1,this._currentProgram=null,this._currentCamera=null,this._oldDepthWrite=-1,this._oldDepthTest=-1,this._oldDoubleSided=-1,this._currentMaterialId=-1,this._oldFlipSided=-1}}},392:(r,e,t)=>{t.r(e),t.d(e,{assignBonds:()=>s});var a=t(408);const o=[{x:0,y:0,z:1},{x:0,y:1,z:-1},{x:0,y:1,z:0},{x:0,y:1,z:1},{x:1,y:-1,z:-1},{x:1,y:-1,z:0},{x:1,y:-1,z:1},{x:1,y:0,z:-1},{x:1,y:0,z:0},{x:1,y:0,z:1},{x:1,y:1,z:-1},{x:1,y:1,z:0},{x:1,y:1,z:1}],l=4.95;function s(f,m){for(let M=0,I=f.length;M<I;M++)f[M].index||(f[M].index=M);const b={x:{y:{z:[]}}};for(let M=0;M<f.length;M++){const I=f[M],V=Math.floor(I.x/l),Z=Math.floor(I.y/l),ee=Math.floor(I.z/l);b[V]||(b[V]={}),b[V][Z]||(b[V][Z]={}),b[V][Z][ee]||(b[V][Z][ee]=[]),b[V][Z][ee].push(I)}function E(M,I){for(let V=0;V<M.length;V++){const Z=M[V];for(let ee=0;ee<I.length;ee++){const le=I[ee];if((0,a.areConnected)(Z,le,m)){const K=Z.bonds.indexOf(le.index),vt=le.bonds.indexOf(Z.index);K===-1&&vt===-1?(Z.bonds.push(le.index),Z.bondOrder.push(1),le.bonds.push(Z.index),le.bondOrder.push(1)):K===-1?(Z.bonds.push(le.index),Z.bondOrder.push(le.bondOrder[vt])):vt===-1&&(le.bonds.push(Z.index),le.bondOrder.push(Z.bondOrder[K]))}}}}for(let M in b){const I=parseInt(M);for(let V in b[I]){const Z=parseInt(V);for(let ee in b[I][Z]){const le=parseInt(ee),K=b[I][Z][le];for(let vt=0;vt<K.length;vt++){const q=K[vt];for(let Q=vt+1;Q<K.length;Q++){const wt=K[Q];(0,a.areConnected)(q,wt,m)&&q.bonds.indexOf(wt.index)==-1&&(q.bonds.push(wt.index),q.bondOrder.push(1),wt.bonds.push(q.index),wt.bondOrder.push(1))}}for(let vt=0;vt<o.length;vt++){const q=o[vt];b[I+q.x]&&b[I+q.x][Z+q.y]&&b[I+q.x][Z+q.y][le+q.z]&&E(K,b[I+q.x][Z+q.y][le+q.z])}}}}}},407:r=>{var e=(function(){for(var t,a=[],o=0;o<256;o++){t=o;for(var l=0;l<8;l++)t=1&t?3988292384^t>>>1:t>>>1;a[o]=t}return a})();r.exports=function(t,a,o,l){var s=e,f=l+o;t^=-1;for(var m=l;m<f;m++)t=t>>>8^s[255&(t^a[m])];return-1^t}},408:(r,e,t)=>{t.r(e),t.d(e,{areConnected:()=>l});var a=t(40);const o=new Set(["Na","K","Ca","Mg","Mn","Sr"]);function l(s,f,m){if(m&&m.unboundCations&&(o.has(s.elem)||o.has(f.elem)))return!1;let b=(0,a.bondLength)(s.elem)+(0,a.bondLength)(f.elem);b+=.25,b*=b;let E=s.x-f.x;if(E*=E,E>b)return!1;let M=s.y-f.y;if(M*=M,M>b)return!1;let I=s.z-f.z;if(I*=I,I>b)return!1;const V=E+M+I;return!(isNaN(V)||V<.5||V>b||s.altLoc!==f.altLoc&&s.altLoc.trim()!==""&&f.altLoc.trim()!=="")}},471:function(r,e){(function(t){function a(Vp,r0,B0){for(var bm=(Vp.byteLength,0),Sm=B0.length;Sm>bm;bm++){var Xm=B0.charCodeAt(bm);if(128>Xm)Vp.setUint8(r0++,Xm>>>0&127);else if(2048>Xm)Vp.setUint8(r0++,Xm>>>6&31|192),Vp.setUint8(r0++,Xm>>>0&63|128);else if(65536>Xm)Vp.setUint8(r0++,Xm>>>12&15|224),Vp.setUint8(r0++,Xm>>>6&63|128),Vp.setUint8(r0++,Xm>>>0&63|128);else{if(!(1114112>Xm))throw new Error("bad codepoint "+Xm);Vp.setUint8(r0++,Xm>>>18&7|240),Vp.setUint8(r0++,Xm>>>12&63|128),Vp.setUint8(r0++,Xm>>>6&63|128),Vp.setUint8(r0++,Xm>>>0&63|128)}}}function o(Vp){for(var r0=0,B0=0,bm=Vp.length;bm>B0;B0++){var Sm=Vp.charCodeAt(B0);if(128>Sm)r0+=1;else if(2048>Sm)r0+=2;else if(65536>Sm)r0+=3;else{if(!(1114112>Sm))throw new Error("bad codepoint "+Sm);r0+=4}}return r0}function l(Vp,r0,B0){var bm=typeof Vp;if(bm==="string"){if(32>(Sm=o(Vp)))return r0.setUint8(B0,160|Sm),a(r0,B0+1,Vp),1+Sm;if(256>Sm)return r0.setUint8(B0,217),r0.setUint8(B0+1,Sm),a(r0,B0+2,Vp),2+Sm;if(65536>Sm)return r0.setUint8(B0,218),r0.setUint16(B0+1,Sm),a(r0,B0+3,Vp),3+Sm;if(4294967296>Sm)return r0.setUint8(B0,219),r0.setUint32(B0+1,Sm),a(r0,B0+5,Vp),5+Sm}if(Vp instanceof Uint8Array){var Sm=Vp.byteLength,Xm=new Uint8Array(r0.buffer);if(256>Sm)return r0.setUint8(B0,196),r0.setUint8(B0+1,Sm),Xm.set(Vp,B0+2),2+Sm;if(65536>Sm)return r0.setUint8(B0,197),r0.setUint16(B0+1,Sm),Xm.set(Vp,B0+3),3+Sm;if(4294967296>Sm)return r0.setUint8(B0,198),r0.setUint32(B0+1,Sm),Xm.set(Vp,B0+5),5+Sm}if(bm==="number"){if(!isFinite(Vp))throw new Error("Number not finite: "+Vp);if(Math.floor(Vp)!==Vp)return r0.setUint8(B0,203),r0.setFloat64(B0+1,Vp),9;if(Vp>=0){if(128>Vp)return r0.setUint8(B0,Vp),1;if(256>Vp)return r0.setUint8(B0,204),r0.setUint8(B0+1,Vp),2;if(65536>Vp)return r0.setUint8(B0,205),r0.setUint16(B0+1,Vp),3;if(4294967296>Vp)return r0.setUint8(B0,206),r0.setUint32(B0+1,Vp),5;throw new Error("Number too big 0x"+Vp.toString(16))}if(Vp>=-32)return r0.setInt8(B0,Vp),1;if(Vp>=-128)return r0.setUint8(B0,208),r0.setInt8(B0+1,Vp),2;if(Vp>=-32768)return r0.setUint8(B0,209),r0.setInt16(B0+1,Vp),3;if(Vp>=-2147483648)return r0.setUint8(B0,210),r0.setInt32(B0+1,Vp),5;throw new Error("Number too small -0x"+(-Vp).toString(16).substr(1))}if(Vp===null)return r0.setUint8(B0,192),1;if(bm==="boolean")return r0.setUint8(B0,Vp?195:194),1;if(bm==="object"){var cm=0,zm=Array.isArray(Vp);if(zm)Sm=Vp.length;else{var x1=Object.keys(Vp);Sm=x1.length}if(16>Sm?(r0.setUint8(B0,Sm|(zm?144:128)),cm=1):65536>Sm?(r0.setUint8(B0,zm?220:222),r0.setUint16(B0+1,Sm),cm=3):4294967296>Sm&&(r0.setUint8(B0,zm?221:223),r0.setUint32(B0+1,Sm),cm=5),zm)for(var Um=0;Sm>Um;Um++)cm+=l(Vp[Um],r0,B0+cm);else for(Um=0;Sm>Um;Um++){var h1=x1[Um];cm+=l(h1,r0,B0+cm),cm+=l(Vp[h1],r0,B0+cm)}return cm}throw new Error("Unknown type "+bm)}function s(Vp){var r0=typeof Vp;if(r0==="string"){if(32>(B0=o(Vp)))return 1+B0;if(256>B0)return 2+B0;if(65536>B0)return 3+B0;if(4294967296>B0)return 5+B0}if(Vp instanceof Uint8Array){if(256>(B0=Vp.byteLength))return 2+B0;if(65536>B0)return 3+B0;if(4294967296>B0)return 5+B0}if(r0==="number"){if(Math.floor(Vp)!==Vp)return 9;if(Vp>=0){if(128>Vp)return 1;if(256>Vp)return 2;if(65536>Vp)return 3;if(4294967296>Vp)return 5;throw new Error("Number too big 0x"+Vp.toString(16))}if(Vp>=-32)return 1;if(Vp>=-128)return 2;if(Vp>=-32768)return 3;if(Vp>=-2147483648)return 5;throw new Error("Number too small -0x"+Vp.toString(16).substr(1))}if(r0==="boolean"||Vp===null)return 1;if(r0==="object"){var B0,bm=0;if(Array.isArray(Vp)){B0=Vp.length;for(var Sm=0;B0>Sm;Sm++)bm+=s(Vp[Sm])}else{var Xm=Object.keys(Vp);for(B0=Xm.length,Sm=0;B0>Sm;Sm++){var cm=Xm[Sm];bm+=s(cm)+s(Vp[cm])}}if(16>B0)return 1+bm;if(65536>B0)return 3+bm;if(4294967296>B0)return 5+bm;throw new Error("Array or object too long 0x"+B0.toString(16))}throw new Error("Unknown type "+r0)}function f(Vp){var r0=new ArrayBuffer(s(Vp));return l(Vp,new DataView(r0),0),new Uint8Array(r0)}function m(Vp,r0,B0){return r0?new Vp(r0.buffer,r0.byteOffset,r0.byteLength/(B0||1)):void 0}function b(Vp){return m(DataView,Vp)}function E(Vp){return m(Uint8Array,Vp)}function M(Vp){return m(Int8Array,Vp)}function I(Vp){return m(Int32Array,Vp,4)}function V(Vp){return m(Float32Array,Vp,4)}function Z(Vp,r0){var B0=Vp.length/2;r0||(r0=new Int16Array(B0));for(var bm=0,Sm=0;B0>bm;++bm,Sm+=2)r0[bm]=Vp[Sm]<<8^Vp[Sm+1];return r0}function ee(Vp,r0){var B0=Vp.length;r0||(r0=new Uint8Array(2*B0));for(var bm=b(r0),Sm=0;B0>Sm;++Sm)bm.setInt16(2*Sm,Vp[Sm]);return E(r0)}function le(Vp,r0){var B0=Vp.length/4;r0||(r0=new Int32Array(B0));for(var bm=0,Sm=0;B0>bm;++bm,Sm+=4)r0[bm]=Vp[Sm]<<24^Vp[Sm+1]<<16^Vp[Sm+2]<<8^Vp[Sm+3];return r0}function K(Vp,r0){var B0=Vp.length;r0||(r0=new Uint8Array(4*B0));for(var bm=b(r0),Sm=0;B0>Sm;++Sm)bm.setInt32(4*Sm,Vp[Sm]);return E(r0)}function vt(Vp,r0){var B0=Vp.length;r0||(r0=new Float32Array(B0/4));for(var bm=b(r0),Sm=b(Vp),Xm=0,cm=0,zm=B0/4;zm>Xm;++Xm,cm+=4)bm.setFloat32(cm,Sm.getFloat32(cm),!0);return r0}function q(Vp,r0,B0){var bm=Vp.length,Sm=1/r0;B0||(B0=new Float32Array(bm));for(var Xm=0;bm>Xm;++Xm)B0[Xm]=Vp[Xm]*Sm;return B0}function Q(Vp,r0,B0){var bm=Vp.length;B0||(B0=new Int32Array(bm));for(var Sm=0;bm>Sm;++Sm)B0[Sm]=Math.round(Vp[Sm]*r0);return B0}function wt(Vp,r0){var B0,bm;if(!r0){var Sm=0;for(B0=0,bm=Vp.length;bm>B0;B0+=2)Sm+=Vp[B0+1];r0=new Vp.constructor(Sm)}var Xm=0;for(B0=0,bm=Vp.length;bm>B0;B0+=2)for(var cm=Vp[B0],zm=Vp[B0+1],x1=0;zm>x1;++x1)r0[Xm]=cm,++Xm;return r0}function bt(Vp){if(Vp.length===0)return new Int32Array;var r0,B0,bm=2;for(r0=1,B0=Vp.length;B0>r0;++r0)Vp[r0-1]!==Vp[r0]&&(bm+=2);var Sm=new Int32Array(bm),Xm=0,cm=1;for(r0=1,B0=Vp.length;B0>r0;++r0)Vp[r0-1]!==Vp[r0]?(Sm[Xm]=Vp[r0-1],Sm[Xm+1]=cm,cm=1,Xm+=2):++cm;return Sm[Xm]=Vp[Vp.length-1],Sm[Xm+1]=cm,Sm}function Ut(Vp,r0){var B0=Vp.length;r0||(r0=new Vp.constructor(B0)),B0&&(r0[0]=Vp[0]);for(var bm=1;B0>bm;++bm)r0[bm]=Vp[bm]+r0[bm-1];return r0}function it(Vp,r0){var B0=Vp.length;r0||(r0=new Vp.constructor(B0)),r0[0]=Vp[0];for(var bm=1;B0>bm;++bm)r0[bm]=Vp[bm]-Vp[bm-1];return r0}function zt(Vp,r0){var B0,bm,Sm=Vp instanceof Int8Array?127:32767,Xm=-Sm-1,cm=Vp.length;if(!r0){var zm=0;for(B0=0;cm>B0;++B0)Vp[B0]<Sm&&Vp[B0]>Xm&&++zm;r0=new Int32Array(zm)}for(B0=0,bm=0;cm>B0;){for(var x1=0;Vp[B0]===Sm||Vp[B0]===Xm;)x1+=Vp[B0],++B0;x1+=Vp[B0],++B0,r0[bm]=x1,++bm}return r0}function Zt(Vp,r0){var B0,bm=32767,Sm=-bm-1,Xm=Vp.length,cm=0;for(B0=0;Xm>B0;++B0)(Um=Vp[B0])===0?++cm:Um>0?(cm+=Math.ceil(Um/bm),Um%bm===0&&(cm+=1)):(cm+=Math.ceil(Um/Sm),Um%Sm===0&&(cm+=1));var zm=new Int16Array(cm),x1=0;for(B0=0;Xm>B0;++B0){var Um;if((Um=Vp[B0])>=0)for(;Um>=bm;)zm[x1]=bm,++x1,Um-=bm;else for(;Sm>=Um;)zm[x1]=Sm,++x1,Um-=Sm;zm[x1]=Um,++x1}return zm}function Mn(Vp,r0){return Ut(wt(Vp),r0)}function kp(Vp){return bt(it(Vp))}function zp(Vp,r0,B0){return q(wt(Vp,I(B0)),r0,B0)}function sa(Vp,r0){return bt(Q(Vp,r0))}function qo(Vp,r0,B0){return q(Ut(Vp,I(B0)),r0,B0)}function ae(Vp,r0,B0){return it(Q(Vp,r0),B0)}function wp(Vp,r0,B0){return q(zt(Vp,I(B0)),r0,B0)}function Cp(Vp,r0,B0){var bm=zt(Vp,I(B0));return qo(bm,r0,V(bm))}function Kt(Vp,r0,B0){return Zt(ae(Vp,r0))}function h0(Vp){var r0=b(Vp),B0=r0.getInt32(0),bm=r0.getInt32(4),Sm=Vp.subarray(8,12);return[B0,Vp=Vp.subarray(12),bm,Sm]}function Pp(Vp,r0,B0,bm){var Sm=new ArrayBuffer(12+bm.byteLength),Xm=new Uint8Array(Sm),cm=new DataView(Sm);return cm.setInt32(0,Vp),cm.setInt32(4,r0),B0&&Xm.set(B0,8),Xm.set(bm,12),Xm}function d0(Vp){return Pp(2,Vp.length,void 0,E(Vp))}function x0(Vp){return Pp(4,Vp.length,void 0,K(Vp))}function Dp(Vp,r0){return Pp(5,Vp.length/r0,K([r0]),E(Vp))}function c0(Vp){return Pp(6,Vp.length,void 0,K(bt(Vp)))}function u0(Vp){return Pp(8,Vp.length,void 0,K(kp(Vp)))}function y0(Vp,r0){return Pp(9,Vp.length,K([r0]),K(sa(Vp,r0)))}function M0(Vp,r0){return Pp(10,Vp.length,K([r0]),ee(Kt(Vp,r0)))}function sm(Vp){var r0={};return X1.forEach(function(B0){Vp[B0]!==void 0&&(r0[B0]=Vp[B0])}),Vp.bondAtomList&&(r0.bondAtomList=x0(Vp.bondAtomList)),Vp.bondOrderList&&(r0.bondOrderList=d0(Vp.bondOrderList)),r0.xCoordList=M0(Vp.xCoordList,1e3),r0.yCoordList=M0(Vp.yCoordList,1e3),r0.zCoordList=M0(Vp.zCoordList,1e3),Vp.bFactorList&&(r0.bFactorList=M0(Vp.bFactorList,100)),Vp.atomIdList&&(r0.atomIdList=u0(Vp.atomIdList)),Vp.altLocList&&(r0.altLocList=c0(Vp.altLocList)),Vp.occupancyList&&(r0.occupancyList=y0(Vp.occupancyList,100)),r0.groupIdList=u0(Vp.groupIdList),r0.groupTypeList=x0(Vp.groupTypeList),Vp.secStructList&&(r0.secStructList=d0(Vp.secStructList)),Vp.insCodeList&&(r0.insCodeList=c0(Vp.insCodeList)),Vp.sequenceIndexList&&(r0.sequenceIndexList=u0(Vp.sequenceIndexList)),r0.chainIdList=Dp(Vp.chainIdList,4),Vp.chainNameList&&(r0.chainNameList=Dp(Vp.chainNameList,4)),r0}function mm(Vp){function r0(x1){for(var Um={},h1=0;x1>h1;h1++)Um[Xm()]=Xm();return Um}function B0(x1){var Um=Vp.subarray(cm,cm+x1);return cm+=x1,Um}function bm(x1){var Um=Vp.subarray(cm,cm+x1);cm+=x1;var h1=65535;if(x1>h1){for(var Sg=[],um=0;um<Um.length;um+=h1)Sg.push(String.fromCharCode.apply(null,Um.subarray(um,um+h1)));return Sg.join("")}return String.fromCharCode.apply(null,Um)}function Sm(x1){for(var Um=new Array(x1),h1=0;x1>h1;h1++)Um[h1]=Xm();return Um}function Xm(){var x1,Um,h1=Vp[cm];if(!(128&h1))return cm++,h1;if((240&h1)==128)return cm++,r0(Um=15&h1);if((240&h1)==144)return cm++,Sm(Um=15&h1);if((224&h1)==160)return cm++,bm(Um=31&h1);if(!(224&~h1))return x1=zm.getInt8(cm),cm++,x1;switch(h1){case 192:return cm++,null;case 194:return cm++,!1;case 195:return cm++,!0;case 196:return Um=zm.getUint8(cm+1),cm+=2,B0(Um);case 197:return Um=zm.getUint16(cm+1),cm+=3,B0(Um);case 198:return Um=zm.getUint32(cm+1),cm+=5,B0(Um);case 202:return x1=zm.getFloat32(cm+1),cm+=5,x1;case 203:return x1=zm.getFloat64(cm+1),cm+=9,x1;case 204:return x1=Vp[cm+1],cm+=2,x1;case 205:return x1=zm.getUint16(cm+1),cm+=3,x1;case 206:return x1=zm.getUint32(cm+1),cm+=5,x1;case 208:return x1=zm.getInt8(cm+1),cm+=2,x1;case 209:return x1=zm.getInt16(cm+1),cm+=3,x1;case 210:return x1=zm.getInt32(cm+1),cm+=5,x1;case 217:return Um=zm.getUint8(cm+1),cm+=2,bm(Um);case 218:return Um=zm.getUint16(cm+1),cm+=3,bm(Um);case 219:return Um=zm.getUint32(cm+1),cm+=5,bm(Um);case 220:return Um=zm.getUint16(cm+1),cm+=3,Sm(Um);case 221:return Um=zm.getUint32(cm+1),cm+=5,Sm(Um);case 222:return Um=zm.getUint16(cm+1),cm+=3,r0(Um);case 223:return Um=zm.getUint32(cm+1),cm+=5,r0(Um)}throw new Error("Unknown type 0x"+h1.toString(16))}var cm=0,zm=new DataView(Vp.buffer);return Xm()}function Mm(Vp,r0,B0,bm){switch(Vp){case 1:return vt(r0);case 2:return M(r0);case 3:return Z(r0);case 4:return le(r0);case 5:return E(r0);case 6:return wt(le(r0),new Uint8Array(B0));case 7:return wt(le(r0));case 8:return Mn(le(r0));case 9:return zp(le(r0),le(bm)[0]);case 10:return Cp(Z(r0),le(bm)[0]);case 11:return q(Z(r0),le(bm)[0]);case 12:return wp(Z(r0),le(bm)[0]);case 13:return wp(M(r0),le(bm)[0]);case 14:return zt(Z(r0));case 15:return zt(M(r0))}}function v1(Vp,r0){var B0=(r0=r0||{}).ignoreFields,bm={};return og.forEach(function(Sm){var Xm=!!B0&&B0.indexOf(Sm)!==-1,cm=Vp[Sm];Xm||cm===void 0||(cm instanceof Uint8Array?bm[Sm]=Mm.apply(null,h0(cm)):bm[Sm]=cm)}),bm}function v0(Vp){return String.fromCharCode.apply(null,Vp).replace(/\0/g,"")}function D1(Vp,r0,B0){var bm,Sm,Xm,cm,zm,x1,Um=(B0=B0||{}).firstModelOnly,h1=r0.onModel,Sg=r0.onChain,um=r0.onGroup,M1=r0.onAtom,F1=r0.onBond,Y1=0,n1=0,Zm=0,S1=0,p1=0,hv=-1,Gg=Vp.chainNameList,Cv=Vp.secStructList,ey=Vp.insCodeList,xy=Vp.sequenceIndexList,Gv=Vp.atomIdList,yv=Vp.bFactorList,Wv=Vp.altLocList,_y=Vp.occupancyList,iy=Vp.bondAtomList,Cy=Vp.bondOrderList;for(bm=0,Sm=Vp.chainsPerModel.length;Sm>bm&&!(Um&&Y1>0);++bm){var $v=Vp.chainsPerModel[Y1];for(h1&&h1({chainCount:$v,modelIndex:Y1}),Xm=0;$v>Xm;++Xm){var Lv=Vp.groupsPerChain[n1];if(Sg){var wg=v0(Vp.chainIdList.subarray(4*n1,4*n1+4)),Ov=null;Gg&&(Ov=v0(Gg.subarray(4*n1,4*n1+4))),Sg({groupCount:Lv,chainIndex:n1,modelIndex:Y1,chainId:wg,chainName:Ov})}for(cm=0;Lv>cm;++cm){var Uv=Vp.groupList[Vp.groupTypeList[Zm]],zy=Uv.atomNameList.length;if(um){var mg=null;Cv&&(mg=Cv[Zm]);var Re=null;Vp.insCodeList&&(Re=String.fromCharCode(ey[Zm]));var Kp=null;xy&&(Kp=xy[Zm]),um({atomCount:zy,groupIndex:Zm,chainIndex:n1,modelIndex:Y1,groupId:Vp.groupIdList[Zm],groupType:Vp.groupTypeList[Zm],groupName:Uv.groupName,singleLetterCode:Uv.singleLetterCode,chemCompType:Uv.chemCompType,secStruct:mg,insCode:Re,sequenceIndex:Kp})}for(zm=0;zy>zm;++zm){if(M1){var Fn=null;Gv&&(Fn=Gv[S1]);var t0=null;yv&&(t0=yv[S1]);var s0=null;Wv&&(s0=String.fromCharCode(Wv[S1]));var J0=null;_y&&(J0=_y[S1]),M1({atomIndex:S1,groupIndex:Zm,chainIndex:n1,modelIndex:Y1,atomId:Fn,element:Uv.elementList[zm],atomName:Uv.atomNameList[zm],formalCharge:Uv.formalChargeList[zm],xCoord:Vp.xCoordList[S1],yCoord:Vp.yCoordList[S1],zCoord:Vp.zCoordList[S1],bFactor:t0,altLoc:s0,occupancy:J0})}S1+=1}if(F1){var F0=Uv.bondAtomList;for(zm=0,x1=Uv.bondOrderList.length;x1>zm;++zm)F1({atomIndex1:S1-zy+F0[2*zm],atomIndex2:S1-zy+F0[2*zm+1],bondOrder:Uv.bondOrderList[zm]})}Zm+=1}n1+=1}if(p1=hv+1,hv=S1-1,F1&&iy)for(zm=0,x1=iy.length;x1>zm;zm+=2){var lm=iy[zm],Bm=iy[zm+1];(lm>=p1&&hv>=lm||Bm>=p1&&hv>=Bm)&&F1({atomIndex1:lm,atomIndex2:Bm,bondOrder:Cy?Cy[zm/2]:null})}Y1+=1}}function P1(Vp){return f(sm(Vp))}function ig(Vp,r0){return Vp instanceof ArrayBuffer&&(Vp=new Uint8Array(Vp)),v1(Vp instanceof Uint8Array?mm(Vp):Vp,r0)}function w1(Vp,r0,B0,bm){function Sm(){try{var cm=ig(Xm.response);B0(cm)}catch(zm){bm(zm)}}var Xm=new XMLHttpRequest;Xm.addEventListener("load",Sm,!0),Xm.addEventListener("error",bm,!0),Xm.responseType="arraybuffer",Xm.open("GET",r0+Vp.toUpperCase()),Xm.send()}function o1(Vp,r0,B0){w1(Vp,wm,r0,B0)}function g1(Vp,r0,B0){w1(Vp,$m,r0,B0)}var X1=["mmtfVersion","mmtfProducer","unitCell","spaceGroup","structureId","title","depositionDate","releaseDate","experimentalMethods","resolution","rFree","rWork","bioAssemblyList","ncsOperatorList","entityList","groupList","numBonds","numAtoms","numGroups","numChains","numModels","groupsPerChain","chainsPerModel"],sg=["xCoordList","yCoordList","zCoordList","groupIdList","groupTypeList","chainIdList","bFactorList","atomIdList","altLocList","occupancyList","secStructList","insCodeList","sequenceIndexList","chainNameList","bondAtomList","bondOrderList"],og=X1.concat(sg),R0="v1.0.1",Xp="//mmtf.rcsb.org/v1.0/",wm=Xp+"full/",$m=Xp+"reduced/";t.encode=P1,t.decode=ig,t.traverse=D1,t.fetch=o1,t.fetchReduced=g1,t.version=R0,t.fetchUrl=wm,t.fetchReducedUrl=$m,t.encodeMsgpack=f,t.encodeMmtf=sm,t.decodeMsgpack=mm,t.decodeMmtf=v1})(e)},529:(r,e,t)=>{t.r(e),t.d(e,{Matrix3:()=>ee,Matrix4:()=>V,Quaternion:()=>a,Ray:()=>le,Vector2:()=>o,Vector3:()=>Z,clamp:()=>l,conversionMatrix3:()=>K,degToRad:()=>f});class a{constructor(q,Q,wt,bt){this.x=q||0,this.y=Q||0,this.z=wt||0,this.w=bt!==void 0?bt:1}set(q,Q,wt,bt){return this.x=q,this.y=Q,this.z=wt,this.w=bt,this}copy(q){return this.x=q.x,this.y=q.y,this.z=q.z,this.w=q.w,this}conjugate(){return this.x*=-1,this.y*=-1,this.z*=-1,this}inverse(){return this.conjugate().normalize()}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}lengthxyz(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}normalize(){let q=this.length();return q===0?(this.x=0,this.y=0,this.z=0,this.w=1):(q=1/q,this.x*=q,this.y*=q,this.z*=q,this.w*=q),this}multiply(q){return this.multiplyQuaternions(this,q)}multiplyScalar(q){return this.x*=q,this.y*=q,this.z*=q,this.w*=q,this}multiplyQuaternions(q,Q){const wt=q.x,bt=q.y,Ut=q.z,it=q.w,zt=Q.x,Zt=Q.y,Mn=Q.z,kp=Q.w;return this.x=wt*kp+it*zt+bt*Mn-Ut*Zt,this.y=bt*kp+it*Zt+Ut*zt-wt*Mn,this.z=Ut*kp+it*Mn+wt*Zt-bt*zt,this.w=it*kp-wt*zt-bt*Zt-Ut*Mn,this}sub(q){return this.x-=q.x,this.y-=q.y,this.z-=q.z,this.w-=q.w,this}clone(){return new a(this.x,this.y,this.z,this.w)}setFromEuler(q){const Q=Math.cos(q.x/2),wt=Math.cos(q.y/2),bt=Math.cos(q.z/2),Ut=Math.sin(q.x/2),it=Math.sin(q.y/2),zt=Math.sin(q.z/2);return this.x=Ut*wt*bt+Q*it*zt,this.y=Q*it*bt-Ut*wt*zt,this.z=Q*wt*zt+Ut*it*bt,this.w=Q*wt*bt-Ut*it*zt,this}}class o{constructor(q,Q){this.x=q||0,this.y=Q||0}set(q,Q){return this.x=q,this.y=Q,this}subVectors(q,Q){return this.x=q.x-Q.x,this.y=q.y-Q.y,this}copy(q){return this.x=q.x,this.y=q.y,this}clone(){return new o(this.x,this.y)}}function l(vt,q,Q){return Math.min(Math.max(vt,q),Q)}const s=Math.PI/180;function f(vt){return vt*s}var m,b,E,M,I;class V{constructor(q=1,Q=0,wt=0,bt=0,Ut=0,it=1,zt=0,Zt=0,Mn=0,kp=0,zp=1,sa=0,qo=0,ae=0,wp=0,Cp=1){q!==void 0&&typeof q!="number"?this.elements=new Float32Array(q):(this.elements=new Float32Array(16),this.elements[0]=q,this.elements[4]=Q,this.elements[8]=wt,this.elements[12]=bt,this.elements[1]=Ut,this.elements[5]=it,this.elements[9]=zt,this.elements[13]=Zt,this.elements[2]=Mn,this.elements[6]=kp,this.elements[10]=zp,this.elements[14]=sa,this.elements[3]=qo,this.elements[7]=ae,this.elements[11]=wp,this.elements[15]=Cp)}makeScale(q,Q,wt){throw new Error("Method not implemented.")}set(q,Q,wt,bt,Ut,it,zt,Zt,Mn,kp,zp,sa,qo,ae,wp,Cp){const Kt=this.elements;return Kt[0]=q,Kt[4]=Q,Kt[8]=wt,Kt[12]=bt,Kt[1]=Ut,Kt[5]=it,Kt[9]=zt,Kt[13]=Zt,Kt[2]=Mn,Kt[6]=kp,Kt[10]=zp,Kt[14]=sa,Kt[3]=qo,Kt[7]=ae,Kt[11]=wp,Kt[15]=Cp,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}copy(q){const Q=q.elements;return this.set(Q[0],Q[4],Q[8],Q[12],Q[1],Q[5],Q[9],Q[13],Q[2],Q[6],Q[10],Q[14],Q[3],Q[7],Q[11],Q[15]),this}matrix3FromTopLeft(){const q=this.elements;return new ee(q[0],q[4],q[8],q[1],q[5],q[9],q[2],q[6],q[10])}setRotationFromEuler(q,Q){const wt=this.elements,{x:bt,y:Ut,z:it}=q,zt=Math.cos(bt),Zt=Math.sin(bt),Mn=Math.cos(Ut),kp=Math.sin(Ut),zp=Math.cos(it),sa=Math.sin(it);if(Q===void 0||Q==="XYZ"){const qo=zt*zp,ae=zt*sa,wp=Zt*zp,Cp=Zt*sa;wt[0]=Mn*zp,wt[4]=-Mn*sa,wt[8]=kp,wt[1]=ae+wp*kp,wt[5]=qo-Cp*kp,wt[9]=-Zt*Mn,wt[2]=Cp-qo*kp,wt[6]=wp+ae*kp,wt[10]=zt*Mn}else console.error(`Error with matrix4 setRotationFromEuler. Order: ${Q}`);return this}setRotationFromQuaternion(q){const Q=this.elements,{x:wt,y:bt,z:Ut,w:it}=q,zt=wt+wt,Zt=bt+bt,Mn=Ut+Ut,kp=wt*zt,zp=wt*Zt,sa=wt*Mn,qo=bt*Zt,ae=bt*Mn,wp=Ut*Mn,Cp=it*zt,Kt=it*Zt,h0=it*Mn;return Q[0]=1-(qo+wp),Q[4]=zp-h0,Q[8]=sa+Kt,Q[1]=zp+h0,Q[5]=1-(kp+wp),Q[9]=ae-Cp,Q[2]=sa-Kt,Q[6]=ae+Cp,Q[10]=1-(kp+qo),this}multiplyMatrices(q,Q){const wt=q.elements,bt=Q.elements,Ut=this.elements,it=wt[0],zt=wt[4],Zt=wt[8],Mn=wt[12],kp=wt[1],zp=wt[5],sa=wt[9],qo=wt[13],ae=wt[2],wp=wt[6],Cp=wt[10],Kt=wt[14],h0=wt[3],Pp=wt[7],d0=wt[11],x0=wt[15],Dp=bt[0],c0=bt[4],u0=bt[8],y0=bt[12],M0=bt[1],sm=bt[5],mm=bt[9],Mm=bt[13],v1=bt[2],v0=bt[6],D1=bt[10],P1=bt[14],ig=bt[3],w1=bt[7],o1=bt[11],g1=bt[15];return Ut[0]=it*Dp+zt*M0+Zt*v1+Mn*ig,Ut[4]=it*c0+zt*sm+Zt*v0+Mn*w1,Ut[8]=it*u0+zt*mm+Zt*D1+Mn*o1,Ut[12]=it*y0+zt*Mm+Zt*P1+Mn*g1,Ut[1]=kp*Dp+zp*M0+sa*v1+qo*ig,Ut[5]=kp*c0+zp*sm+sa*v0+qo*w1,Ut[9]=kp*u0+zp*mm+sa*D1+qo*o1,Ut[13]=kp*y0+zp*Mm+sa*P1+qo*g1,Ut[2]=ae*Dp+wp*M0+Cp*v1+Kt*ig,Ut[6]=ae*c0+wp*sm+Cp*v0+Kt*w1,Ut[10]=ae*u0+wp*mm+Cp*D1+Kt*o1,Ut[14]=ae*y0+wp*Mm+Cp*P1+Kt*g1,Ut[3]=h0*Dp+Pp*M0+d0*v1+x0*ig,Ut[7]=h0*c0+Pp*sm+d0*v0+x0*w1,Ut[11]=h0*u0+Pp*mm+d0*D1+x0*o1,Ut[15]=h0*y0+Pp*Mm+d0*P1+x0*g1,this}multiplyScalar(q){const Q=this.elements;return Q[0]*=q,Q[4]*=q,Q[8]*=q,Q[12]*=q,Q[1]*=q,Q[5]*=q,Q[9]*=q,Q[13]*=q,Q[2]*=q,Q[6]*=q,Q[10]*=q,Q[14]*=q,Q[3]*=q,Q[7]*=q,Q[11]*=q,Q[15]*=q,this}makeTranslation(q,Q,wt){return this.set(1,0,0,q,0,1,0,Q,0,0,1,wt,0,0,0,1),this}snap(q){const Q=Math.pow(10,4),wt=this.elements;for(let bt=0;bt<16;bt++){const Ut=Math.round(wt[bt]);Ut===Math.round(wt[bt]*Q)/Q&&(wt[bt]=Ut)}return this}transpose(){const q=this.elements;let Q;return Q=q[1],q[1]=q[4],q[4]=Q,Q=q[2],q[2]=q[8],q[8]=Q,Q=q[6],q[6]=q[9],q[9]=Q,Q=q[3],q[3]=q[12],q[12]=Q,Q=q[7],q[7]=q[13],q[13]=Q,Q=q[11],q[11]=q[14],q[14]=Q,this}setPosition(q){const Q=this.elements;return Q[12]=q.x,Q[13]=q.y,Q[14]=q.z,this}translate(q){const Q=this.elements;return Q[12]+=q.x,Q[13]+=q.y,Q[14]+=q.z,this}getInverse(q,Q){const wt=this.elements,bt=q.elements,Ut=bt[0],it=bt[4],zt=bt[8],Zt=bt[12],Mn=bt[1],kp=bt[5],zp=bt[9],sa=bt[13],qo=bt[2],ae=bt[6],wp=bt[10],Cp=bt[14],Kt=bt[3],h0=bt[7],Pp=bt[11],d0=bt[15];wt[0]=zp*Cp*h0-sa*wp*h0+sa*ae*Pp-kp*Cp*Pp-zp*ae*d0+kp*wp*d0,wt[4]=Zt*wp*h0-zt*Cp*h0-Zt*ae*Pp+it*Cp*Pp+zt*ae*d0-it*wp*d0,wt[8]=zt*sa*h0-Zt*zp*h0+Zt*kp*Pp-it*sa*Pp-zt*kp*d0+it*zp*d0,wt[12]=Zt*zp*ae-zt*sa*ae-Zt*kp*wp+it*sa*wp+zt*kp*Cp-it*zp*Cp,wt[1]=sa*wp*Kt-zp*Cp*Kt-sa*qo*Pp+Mn*Cp*Pp+zp*qo*d0-Mn*wp*d0,wt[5]=zt*Cp*Kt-Zt*wp*Kt+Zt*qo*Pp-Ut*Cp*Pp-zt*qo*d0+Ut*wp*d0,wt[9]=Zt*zp*Kt-zt*sa*Kt-Zt*Mn*Pp+Ut*sa*Pp+zt*Mn*d0-Ut*zp*d0,wt[13]=zt*sa*qo-Zt*zp*qo+Zt*Mn*wp-Ut*sa*wp-zt*Mn*Cp+Ut*zp*Cp,wt[2]=kp*Cp*Kt-sa*ae*Kt+sa*qo*h0-Mn*Cp*h0-kp*qo*d0+Mn*ae*d0,wt[6]=Zt*ae*Kt-it*Cp*Kt-Zt*qo*h0+Ut*Cp*h0+it*qo*d0-Ut*ae*d0,wt[10]=it*sa*Kt-Zt*kp*Kt+Zt*Mn*h0-Ut*sa*h0-it*Mn*d0+Ut*kp*d0,wt[14]=Zt*kp*qo-it*sa*qo-Zt*Mn*ae+Ut*sa*ae+it*Mn*Cp-Ut*kp*Cp,wt[3]=zp*ae*Kt-kp*wp*Kt-zp*qo*h0+Mn*wp*h0+kp*qo*Pp-Mn*ae*Pp,wt[7]=it*wp*Kt-zt*ae*Kt+zt*qo*h0-Ut*wp*h0-it*qo*Pp+Ut*ae*Pp,wt[11]=zt*kp*Kt-it*zp*Kt-zt*Mn*h0+Ut*zp*h0+it*Mn*Pp-Ut*kp*Pp,wt[15]=it*zp*qo-zt*kp*qo+zt*Mn*ae-Ut*zp*ae-it*Mn*wp+Ut*kp*wp;const x0=Ut*wt[0]+Mn*wt[4]+qo*wt[8]+Kt*wt[12];if(x0===0){const Dp="Matrix4.getInverse(): can't invert matrix, determinant is 0";if(Q)throw new Error(Dp);return console.warn(Dp),this.identity(),this}return this.multiplyScalar(1/x0),this}isReflected(){const q=this.elements,Q=q[0],wt=q[4],bt=q[8],Ut=q[1],it=q[5],zt=q[9],Zt=q[2],Mn=q[6],kp=q[10];return Q*it*kp+Ut*Mn*bt+Zt*wt*zt-Zt*it*bt-Ut*wt*kp-Q*Mn*zt<0}scale(q){const Q=this.elements,{x:wt}=q,{y:bt}=q,{z:Ut}=q;return Q[0]*=wt,Q[4]*=bt,Q[8]*=Ut,Q[1]*=wt,Q[5]*=bt,Q[9]*=Ut,Q[2]*=wt,Q[6]*=bt,Q[10]*=Ut,Q[3]*=wt,Q[7]*=bt,Q[11]*=Ut,this}getMaxScaleOnAxis(){const q=this.elements,Q=q[0]*q[0]+q[1]*q[1]+q[2]*q[2],wt=q[4]*q[4]+q[5]*q[5]+q[6]*q[6],bt=q[8]*q[8]+q[9]*q[9]+q[10]*q[10];return Math.sqrt(Math.max(Q,Math.max(wt,bt)))}makeFrustum(q,Q,wt,bt,Ut,it){const zt=this.elements,Zt=2*Ut/(Q-q),Mn=2*Ut/(bt-wt),kp=(Q+q)/(Q-q),zp=(bt+wt)/(bt-wt),sa=-(it+Ut)/(it-Ut),qo=-2*it*Ut/(it-Ut);return zt[0]=Zt,zt[4]=0,zt[8]=kp,zt[12]=0,zt[1]=0,zt[5]=Mn,zt[9]=zp,zt[13]=0,zt[2]=0,zt[6]=0,zt[10]=sa,zt[14]=qo,zt[3]=0,zt[7]=0,zt[11]=-1,zt[15]=0,this}makePerspective(q,Q,wt,bt){const Ut=wt*Math.tan(f(.5*q)),it=-Ut,zt=it*Q,Zt=Ut*Q;return this.makeFrustum(zt,Zt,it,Ut,wt,bt)}makeOrthographic(q,Q,wt,bt,Ut,it){const zt=this.elements,Zt=1/(Q-q),Mn=1/(wt-bt),kp=1/(it-Ut),zp=(Q+q)*Zt,sa=(wt+bt)*Mn,qo=(it+Ut)*kp;return zt[0]=2*Zt,zt[4]=0,zt[8]=0,zt[12]=-zp,zt[1]=0,zt[5]=2*Mn,zt[9]=0,zt[13]=-sa,zt[2]=0,zt[6]=0,zt[10]=-2*kp,zt[14]=-qo,zt[3]=0,zt[7]=0,zt[11]=0,zt[15]=1,this}isEqual(q){const Q=q.elements,wt=this.elements;return wt[0]===Q[0]&&wt[4]===Q[4]&&wt[8]===Q[8]&&wt[12]===Q[12]&&wt[1]===Q[1]&&wt[5]===Q[5]&&wt[9]===Q[9]&&wt[13]===Q[13]&&wt[2]===Q[2]&&wt[6]===Q[6]&&wt[10]===Q[10]&&wt[14]===Q[14]&&wt[3]===Q[3]&&wt[7]===Q[7]&&wt[11]===Q[11]&&wt[15]===Q[15]}clone(){const q=this.elements;return new V(q[0],q[4],q[8],q[12],q[1],q[5],q[9],q[13],q[2],q[6],q[10],q[14],q[3],q[7],q[11],q[15])}isIdentity(){const q=this.elements;return q[0]===1&&q[4]===0&&q[8]===0&&q[12]===0&&q[1]===0&&q[5]===1&&q[9]===0&&q[13]===0&&q[2]===0&&q[6]===0&&q[10]===1&&q[14]===0&&q[3]===0&&q[7]===0&&q[11]===0&&q[15]===1}isNearlyIdentity(q){return this.clone().snap(q).isIdentity()}getScale(q){const Q=this.elements;return q=q||new Z,E.set(Q[0],Q[1],Q[2]),M.set(Q[4],Q[5],Q[6]),I.set(Q[8],Q[9],Q[10]),q.x=E.length(),q.y=M.length(),q.z=I.length(),q}lookAt(q,Q,wt){const bt=this.elements;return I.subVectors(q,Q).normalize(),I.length()===0&&(I.z=1),E.crossVectors(wt,I).normalize(),E.length()===0&&(I.x+=1e-4,E.crossVectors(wt,I).normalize()),M.crossVectors(I,E),bt[0]=E.x,bt[4]=M.x,bt[8]=I.x,bt[1]=E.y,bt[5]=M.y,bt[9]=I.y,bt[2]=E.z,bt[6]=M.z,bt[10]=I.z,this}compose(q,Q,wt){const bt=this.elements;return m.identity(),m.setRotationFromQuaternion(Q),b.makeScale(wt.x,wt.y,wt.z),this.multiplyMatrices(m,b),bt[12]=q.x,bt[13]=q.y,bt[14]=q.z,this}}m=new V,b=new V;class Z{constructor(q,Q,wt){this.x=q||0,this.y=Q||0,this.z=wt||0,this.atomid=void 0}set(q,Q,wt){return this.x=q,this.y=Q,this.z=wt,this}copy(q){return this.x=q.x,this.y=q.y,this.z=q.z,this}add(q){return this.x+=q.x,this.y+=q.y,this.z+=q.z,this}addVectors(q,Q){return this.x=q.x+Q.x,this.y=q.y+Q.y,this.z=q.z+Q.z,this}multiplyVectors(q,Q){return this.x=q.x*Q.x,this.y=q.y*Q.y,this.z=q.z*Q.z,this}sub(q){return this.x-=q.x,this.y-=q.y,this.z-=q.z,this}subVectors(q,Q){return this.x=q.x-Q.x,this.y=q.y-Q.y,this.z=q.z-Q.z,this}multiplyScalar(q){return this.x*=q,this.y*=q,this.z*=q,this}divideScalar(q){return q!==0?(this.x/=q,this.y/=q,this.z/=q):(this.x=0,this.y=0,this.z=0),this}max(q){return this.x=Math.max(this.x,q.x),this.y=Math.max(this.y,q.y),this.z=Math.max(this.z,q.z),this}min(q){return this.x=Math.min(this.x,q.x),this.y=Math.min(this.y,q.y),this.z=Math.min(this.z,q.z),this}distanceTo(q){return Math.sqrt(this.distanceToSquared(q))}distanceToSquared(q){const Q=this.x-q.x,wt=this.y-q.y,bt=this.z-q.z;return Q*Q+wt*wt+bt*bt}applyMatrix3(q){const{x:Q}=this,{y:wt}=this,{z:bt}=this,Ut=q.elements;return this.x=Ut[0]*Q+Ut[3]*wt+Ut[6]*bt,this.y=Ut[1]*Q+Ut[4]*wt+Ut[7]*bt,this.z=Ut[2]*Q+Ut[5]*wt+Ut[8]*bt,this}applyMatrix4(q){const{x:Q}=this,{y:wt}=this,{z:bt}=this,Ut=q.elements;return this.x=Ut[0]*Q+Ut[4]*wt+Ut[8]*bt+Ut[12],this.y=Ut[1]*Q+Ut[5]*wt+Ut[9]*bt+Ut[13],this.z=Ut[2]*Q+Ut[6]*wt+Ut[10]*bt+Ut[14],this}applyProjection(q){const{x:Q}=this,{y:wt}=this,{z:bt}=this,Ut=q.elements,it=Ut[3]*Q+Ut[7]*wt+Ut[11]*bt+Ut[15];return this.x=(Ut[0]*Q+Ut[4]*wt+Ut[8]*bt+Ut[12])/it,this.y=(Ut[1]*Q+Ut[5]*wt+Ut[9]*bt+Ut[13])/it,this.z=(Ut[2]*Q+Ut[6]*wt+Ut[10]*bt+Ut[14])/it,this}applyQuaternion(q){const{x:Q}=this,{y:wt}=this,{z:bt}=this,Ut=q.x,it=q.y,zt=q.z,Zt=q.w,Mn={};Mn.x=2*(wt*zt-bt*it),Mn.y=2*(bt*Ut-Q*zt),Mn.z=2*(Q*it-wt*Ut);const kp={};return kp.x=Mn.y*zt-Mn.z*it,kp.y=Mn.z*Ut-Mn.x*zt,kp.z=Mn.x*it-Mn.y*Ut,this.x=Q+Zt*Mn.x+kp.x,this.y=wt+Zt*Mn.y+kp.y,this.z=bt+Zt*Mn.z+kp.z,this}negate(){return this.multiplyScalar(-1)}dot(q){return this.x*q.x+this.y*q.y+this.z*q.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}normalize(){return this.divideScalar(this.length())}cross(q){const{x:Q}=this,{y:wt}=this,{z:bt}=this;return this.x=wt*q.z-bt*q.y,this.y=bt*q.x-Q*q.z,this.z=Q*q.y-wt*q.x,this}crossVectors(q,Q){return this.x=q.y*Q.z-q.z*Q.y,this.y=q.z*Q.x-q.x*Q.z,this.z=q.x*Q.y-q.y*Q.x,this}equals(q){return this.x==q.x&&this.y==q.y&&this.z==q.z}getPositionFromMatrix(q){return this.x=q.elements[12],this.y=q.elements[13],this.z=q.elements[14],this}setEulerFromRotationMatrix(q,Q){const wt=q.elements,bt=wt[0],Ut=wt[4],it=wt[8],zt=wt[5],Zt=wt[9],Mn=wt[6],kp=wt[10];return Q===void 0||Q==="XYZ"?(this.y=Math.asin(l(it,-1,1)),Math.abs(it)<.99999?(this.x=Math.atan2(-Zt,kp),this.z=Math.atan2(-Ut,bt)):(this.x=Math.atan2(Mn,zt),this.z=0)):console.error(`Error with vector's setEulerFromRotationMatrix: Unknown order: ${Q}`),this}rotateAboutVector(q,Q){q.normalize();const wt=Math.cos(Q),bt=Math.sin(Q),Ut=this.clone().multiplyScalar(wt),it=q.clone().cross(this).multiplyScalar(bt),zt=q.clone().multiplyScalar(q.clone().dot(this)).multiplyScalar(1-wt),Zt=Ut.add(it).add(zt);return this.x=Zt.x,this.y=Zt.y,this.z=Zt.z,this}setFromMatrixPosition(q){const Q=q.elements;return this.x=Q[12],this.y=Q[13],this.z=Q[14],this}transformDirection(q){const{x:Q}=this,{y:wt}=this,{z:bt}=this,Ut=q.elements;return this.x=Ut[0]*Q+Ut[4]*wt+Ut[8]*bt,this.y=Ut[1]*Q+Ut[5]*wt+Ut[9]*bt,this.z=Ut[2]*Q+Ut[6]*wt+Ut[10]*bt,this.normalize()}clone(){return new Z(this.x,this.y,this.z)}unproject(q){const Q=m;return Q.multiplyMatrices(q.matrixWorld,Q.getInverse(q.projectionMatrix)),this.applyMatrix4(Q)}}E=new Z,M=new Z,I=new Z;class ee{constructor(q=1,Q=0,wt=0,bt=0,Ut=1,it=0,zt=0,Zt=0,Mn=1){this.elements=new Float32Array(9),this.set(q,Q,wt,bt,Ut,it,zt,Zt,Mn)}set(q,Q,wt,bt,Ut,it,zt,Zt,Mn){const kp=this.elements;return kp[0]=q,kp[3]=Q,kp[6]=wt,kp[1]=bt,kp[4]=Ut,kp[7]=it,kp[2]=zt,kp[5]=Zt,kp[8]=Mn,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(q){const Q=q.elements;this.set(Q[0],Q[3],Q[6],Q[1],Q[4],Q[7],Q[2],Q[5],Q[8])}multiplyScalar(q){const Q=this.elements;return Q[0]*=q,Q[3]*=q,Q[6]*=q,Q[1]*=q,Q[4]*=q,Q[7]*=q,Q[2]*=q,Q[5]*=q,Q[8]*=q,this}getInverse3(q){const Q=q.elements,wt=this.elements;wt[0]=Q[4]*Q[8]-Q[5]*Q[7],wt[3]=Q[6]*Q[5]-Q[3]*Q[8],wt[6]=Q[3]*Q[7]-Q[6]*Q[4],wt[1]=Q[7]*Q[2]-Q[1]*Q[8],wt[4]=Q[0]*Q[8]-Q[6]*Q[2],wt[7]=Q[1]*Q[6]-Q[0]*Q[7],wt[2]=Q[1]*Q[5]-Q[2]*Q[4],wt[5]=Q[2]*Q[3]-Q[0]*Q[5],wt[8]=Q[0]*Q[4]-Q[1]*Q[3];const bt=Q[0]*wt[0]+Q[3]*wt[1]+Q[6]*wt[2];return this.multiplyScalar(1/bt),this}getInverse(q,Q){const wt=q.elements,bt=this.elements;bt[0]=wt[10]*wt[5]-wt[6]*wt[9],bt[1]=-wt[10]*wt[1]+wt[2]*wt[9],bt[2]=wt[6]*wt[1]-wt[2]*wt[5],bt[3]=-wt[10]*wt[4]+wt[6]*wt[8],bt[4]=wt[10]*wt[0]-wt[2]*wt[8],bt[5]=-wt[6]*wt[0]+wt[2]*wt[4],bt[6]=wt[9]*wt[4]-wt[5]*wt[8],bt[7]=-wt[9]*wt[0]+wt[1]*wt[8],bt[8]=wt[5]*wt[0]-wt[1]*wt[4];const Ut=wt[0]*bt[0]+wt[1]*bt[3]+wt[2]*bt[6];if(Ut===0){const it="Matrix3.getInverse(): can't invert matrix, determinant is 0";if(Q)throw new Error(it);return console.warn(it),this.identity(),this}return this.multiplyScalar(1/Ut),this}getDeterminant(){const q=this.elements;return q[0]*q[4]*q[8]+q[1]*q[5]*q[6]+q[2]*q[3]*q[7]-q[2]*q[4]*q[6]-q[1]*q[3]*q[8]-q[0]*q[5]*q[7]}transpose(){let q;const Q=this.elements;return q=Q[1],Q[1]=Q[3],Q[3]=q,q=Q[2],Q[2]=Q[6],Q[6]=q,q=Q[5],Q[5]=Q[7],Q[7]=q,this}clone(){const q=this.elements;return new ee(q[0],q[3],q[6],q[1],q[4],q[7],q[2],q[5],q[8])}getMatrix4(){const q=this.elements;return new V(q[0],q[3],q[6],0,q[1],q[4],q[7],0,q[2],q[5],q[8],0)}}class le{constructor(q,Q){this.origin=q!==void 0?q:new Z,this.direction=Q!==void 0?Q:new Z}set(q,Q){return this.origin.copy(q),this.direction.copy(Q),this}copy(q){return this.origin.copy(q.origin),this.direction.copy(q.direction),this}at(q,Q){return(Q||new Z).copy(this.direction).multiplyScalar(q).add(this.origin)}recast(q){const Q=E;return this.origin.copy(this.at(q,Q)),this}closestPointToPoint(q,Q){const wt=Q||new Z;wt.subVectors(q,this.origin);const bt=wt.dot(this.direction);return wt.copy(this.direction).multiplyScalar(bt).add(this.origin)}distanceToPoint(q){const Q=E,wt=Q.subVectors(q,this.origin).dot(this.direction);return Q.copy(this.direction).multiplyScalar(wt).add(this.origin),Q.distanceTo(q)}isIntersectionCylinder(){}isIntersectionSphere(q){return this.distanceToPoint(q.center)<=q.radius}isIntersectionPlane(q){return q.normal.dot(this.direction)!==0||q.distanceToPoint(this.origin)===0}distanceToPlane(q){const Q=q.normal.dot(this.direction);return Q===0?q.distanceToPoint(this.origin)===0?0:void 0:-(this.origin.dot(q.normal)+q.constant)/Q}intersectPlane(q,Q){const wt=this.distanceToPlane(q);if(wt!==void 0)return this.at(wt,Q)}applyMatrix4(q){return this.direction.add(this.origin).applyMatrix4(q),this.origin.applyMatrix4(q),this.direction.sub(this.origin),this}clone(){return new le().copy(this)}}function K(vt,q,Q,wt,bt,Ut){wt=wt*Math.PI/180,bt=bt*Math.PI/180,Ut=Ut*Math.PI/180;const it=zp=>zp*zp,zt=Math.cos(wt),Zt=Math.cos(bt),Mn=Math.cos(Ut),kp=Math.sin(Ut);return new ee(vt,q*Mn,Q*Zt,0,q*kp,Q*(zt-Zt*Mn)/kp,0,0,Q*Math.sqrt(1-it(zt)-it(Zt)-it(Mn)+2*zt*Zt*Mn)/kp)}},546:(r,e,t)=>{t.r(e),t.d(e,{CustomLinear:()=>E,Gradient:()=>I,GradientType:()=>o,ROYGB:()=>m,RWB:()=>f,Sinebow:()=>b,builtinGradients:()=>M,getGradient:()=>s,normalizeValue:()=>l});var a=t(222);class o{}function l(V,Z,ee){return Z>=V?(ee<V&&(ee=V),ee>Z&&(ee=Z),{lo:V,hi:Z,val:ee}):(ee>V&&(ee=V),ee<Z&&(ee=Z),{lo:Z,hi:V,val:ee=V-ee+Z})}function s(V){if(V instanceof o)return V;if(V.gradient!==void 0&&M[V.gradient]){let Z=V.min===void 0?-1:V.min,ee=V.max===void 0?1:V.max;return V.mid===void 0?V.colors===void 0?new M[V.gradient](Z,ee):new M[V.gradient](Z,ee,V.colors):new M[V.gradient](Z,ee,V.mid)}if(typeof V.gradient=="string"&&V.gradient.startsWith("linear_")){let Z=V.gradient.split("_");Z.shift();let ee=V.min===void 0?-1:V.min,le=V.max===void 0?1:V.max;return new E(ee,le,Z)}return V}class f extends o{constructor(Z,ee,le){super(),this.gradient="RWB",this.mult=1,this.mid=le,this.min=Z,this.max=ee,ee===void 0&&Array.isArray(Z)&&Z.length>=2?(this.max=Z[1],this.min=Z[0]):Z&&ee&&!Array.isArray(Z)&&(this.min=Z,this.max=ee)}range(){return this.min!==void 0&&this.max!==void 0?[this.min,this.max]:null}valueToHex(Z,ee){var le,K;if(Z=this.mult*Z,ee?(le=ee[0],K=ee[1]):(le=this.min,K=this.max),Z===void 0)return 16777215;var vt=l(le,K,Z);le=vt.lo;var q,Q=((K=vt.hi)+le)/2;return(Z=vt.val)<(Q=ee&&ee[2]!==void 0?ee[2]:this.mid!==void 0?this.mid:(le+K)/2)?16711680+256*(q=Math.floor(255*Math.sqrt((Z-le)/(Q-le))))+q:Z>Q?65536*(q=Math.floor(255*Math.sqrt(1-(Z-Q)/(K-Q))))+256*q+255:16777215}}class m extends o{constructor(Z,ee){super(),this.gradient="ROYGB",this.mult=1,this.min=Z,this.max=ee,ee===void 0&&Array.isArray(Z)&&Z.length>=2?(this.max=Z[1],this.min=Z[0]):Z&&ee&&!Array.isArray(Z)&&(this.min=Z,this.max=ee)}valueToHex(Z,ee){var le,K;if(Z=this.mult*Z,ee?(le=ee[0],K=ee[1]):(le=this.min,K=this.max),Z===void 0)return 16777215;var vt=l(le,K,Z),q=((le=vt.lo)+(K=vt.hi))/2,Q=(le+q)/2,wt=(q+K)/2;return(Z=vt.val)<Q?16711680+256*Math.floor(255*Math.sqrt((Z-le)/(Q-le)))+0:Z<q?65536*Math.floor(255*Math.sqrt(1-(Z-Q)/(q-Q)))+65280+0:Z<wt?65280+1*Math.floor(255*Math.sqrt((Z-q)/(wt-q))):0+256*Math.floor(255*Math.sqrt(1-(Z-wt)/(K-wt)))+255}range(){return this.min!==void 0&&this.max!==void 0?[this.min,this.max]:null}}class b extends o{constructor(Z,ee){super(),this.gradient="Sinebow",this.mult=1,this.min=Z,this.max=ee,ee===void 0&&Array.isArray(Z)&&Z.length>=2&&(this.max=Z[1],this.min=Z[0]),ee<Z&&(this.mult=-1,this.min*=-1,this.max*=-1)}valueToHex(Z,ee){var le,K;if(Z=this.mult*Z,ee?(le=ee[0],K=ee[1]):(le=this.min,K=this.max),Z===void 0)return 16777215;var vt=I.normalizeValue(le,K,Z);le=vt.lo,K=vt.hi;var q=((Z=vt.val)-le)/(K-le)*5/6+.5,Q=Math.sin(Math.PI*q);Q*=255*Q;var wt=Math.sin(Math.PI*(q+1/3));wt*=255*wt;var bt=Math.sin(Math.PI*(q+2/3));return bt*=255*bt,65536*Math.floor(Q)+256*Math.floor(bt)+1*Math.floor(wt)}range(){return this.min!==void 0&&this.max!==void 0?[this.min,this.max]:null}}class E extends o{constructor(Z,ee,le){var K;if(super(),this.gradient="linear",this.colors=new Array,Array.isArray(Z)&&Z.length>=2?(this.max=Z[1],this.min=Z[0],K=ee):(this.min=Z,this.max=ee,K=le),K)for(let vt of K)this.colors.push(a.CC.color(vt));else this.colors.push(a.CC.color(0))}range(){return this.min!==void 0&&this.max!==void 0?[this.min,this.max]:null}valueToHex(Z,ee){var le,K;if(ee?(le=ee[0],K=ee[1]):(le=this.min,K=this.max),Z===void 0)return 16777215;var vt=l(le,K,Z);le=vt.lo,K=vt.hi,Z=vt.val;let q=this.colors.length,Q=(K-le)/q,wt=Math.min(Math.floor((Z-le)/Q),q-1),bt=Math.min(wt+1,q-1),Ut=(Z-le-wt*Q)/Q,it=this.colors[wt],zt=this.colors[bt];return new a.Color(it.r+Ut*(zt.r-it.r),it.g+Ut*(zt.g-it.g),it.b+Ut*(zt.b-it.b)).getHex()}}const M={rwb:f,RWB:f,roygb:m,ROYGB:m,sinebow:b,linear:E};class I extends o{valueToHex(Z,ee){return 0}range(){return null}}I.RWB=f,I.ROYGB=m,I.Sinebow=b,I.CustomLinear=E,I.builtinGradients=M,I.normalizeValue=l,I.getGradient=s},663:(r,e,t)=>{var a=t(981),o=t(701),l=t(407),s=t(165),f=t(358),m=-2,b=12,E=30;function M(bt){return(bt>>>24&255)+(bt>>>8&65280)+((65280&bt)<<8)+((255&bt)<<24)}function I(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new a.Buf16(320),this.work=new a.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function V(bt){var Ut;return bt&&bt.state?(Ut=bt.state,bt.total_in=bt.total_out=Ut.total=0,bt.msg="",Ut.wrap&&(bt.adler=1&Ut.wrap),Ut.mode=1,Ut.last=0,Ut.havedict=0,Ut.dmax=32768,Ut.head=null,Ut.hold=0,Ut.bits=0,Ut.lencode=Ut.lendyn=new a.Buf32(852),Ut.distcode=Ut.distdyn=new a.Buf32(592),Ut.sane=1,Ut.back=-1,0):m}function Z(bt){var Ut;return bt&&bt.state?((Ut=bt.state).wsize=0,Ut.whave=0,Ut.wnext=0,V(bt)):m}function ee(bt,Ut){var it,zt;return bt&&bt.state?(zt=bt.state,Ut<0?(it=0,Ut=-Ut):(it=1+(Ut>>4),Ut<48&&(Ut&=15)),Ut&&(Ut<8||Ut>15)?m:(zt.window!==null&&zt.wbits!==Ut&&(zt.window=null),zt.wrap=it,zt.wbits=Ut,Z(bt))):m}function le(bt,Ut){var it,zt;return bt?(zt=new I,bt.state=zt,zt.window=null,(it=ee(bt,Ut))!==0&&(bt.state=null),it):m}var K,vt,q=!0;function Q(bt){if(q){var Ut;for(K=new a.Buf32(512),vt=new a.Buf32(32),Ut=0;Ut<144;)bt.lens[Ut++]=8;for(;Ut<256;)bt.lens[Ut++]=9;for(;Ut<280;)bt.lens[Ut++]=7;for(;Ut<288;)bt.lens[Ut++]=8;for(f(1,bt.lens,0,288,K,0,bt.work,{bits:9}),Ut=0;Ut<32;)bt.lens[Ut++]=5;f(2,bt.lens,0,32,vt,0,bt.work,{bits:5}),q=!1}bt.lencode=K,bt.lenbits=9,bt.distcode=vt,bt.distbits=5}function wt(bt,Ut,it,zt){var Zt,Mn=bt.state;return Mn.window===null&&(Mn.wsize=1<<Mn.wbits,Mn.wnext=0,Mn.whave=0,Mn.window=new a.Buf8(Mn.wsize)),zt>=Mn.wsize?(a.arraySet(Mn.window,Ut,it-Mn.wsize,Mn.wsize,0),Mn.wnext=0,Mn.whave=Mn.wsize):((Zt=Mn.wsize-Mn.wnext)>zt&&(Zt=zt),a.arraySet(Mn.window,Ut,it-zt,Zt,Mn.wnext),(zt-=Zt)?(a.arraySet(Mn.window,Ut,it-zt,zt,0),Mn.wnext=zt,Mn.whave=Mn.wsize):(Mn.wnext+=Zt,Mn.wnext===Mn.wsize&&(Mn.wnext=0),Mn.whave<Mn.wsize&&(Mn.whave+=Zt))),0}e.inflateReset=Z,e.inflateReset2=ee,e.inflateResetKeep=V,e.inflateInit=function(bt){return le(bt,15)},e.inflateInit2=le,e.inflate=function(bt,Ut){var it,zt,Zt,Mn,kp,zp,sa,qo,ae,wp,Cp,Kt,h0,Pp,d0,x0,Dp,c0,u0,y0,M0,sm,mm,Mm,v1=0,v0=new a.Buf8(4),D1=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!bt||!bt.state||!bt.output||!bt.input&&bt.avail_in!==0)return m;(it=bt.state).mode===b&&(it.mode=13),kp=bt.next_out,Zt=bt.output,sa=bt.avail_out,Mn=bt.next_in,zt=bt.input,zp=bt.avail_in,qo=it.hold,ae=it.bits,wp=zp,Cp=sa,sm=0;e:for(;;)switch(it.mode){case 1:if(it.wrap===0){it.mode=13;break}for(;ae<16;){if(zp===0)break e;zp--,qo+=zt[Mn++]<<ae,ae+=8}if(2&it.wrap&&qo===35615){it.check=0,v0[0]=255&qo,v0[1]=qo>>>8&255,it.check=l(it.check,v0,2,0),qo=0,ae=0,it.mode=2;break}if(it.flags=0,it.head&&(it.head.done=!1),!(1&it.wrap)||(((255&qo)<<8)+(qo>>8))%31){bt.msg="incorrect header check",it.mode=E;break}if((15&qo)!=8){bt.msg="unknown compression method",it.mode=E;break}if(ae-=4,M0=8+(15&(qo>>>=4)),it.wbits===0)it.wbits=M0;else if(M0>it.wbits){bt.msg="invalid window size",it.mode=E;break}it.dmax=1<<M0,bt.adler=it.check=1,it.mode=512&qo?10:b,qo=0,ae=0;break;case 2:for(;ae<16;){if(zp===0)break e;zp--,qo+=zt[Mn++]<<ae,ae+=8}if(it.flags=qo,(255&it.flags)!=8){bt.msg="unknown compression method",it.mode=E;break}if(57344&it.flags){bt.msg="unknown header flags set",it.mode=E;break}it.head&&(it.head.text=qo>>8&1),512&it.flags&&(v0[0]=255&qo,v0[1]=qo>>>8&255,it.check=l(it.check,v0,2,0)),qo=0,ae=0,it.mode=3;case 3:for(;ae<32;){if(zp===0)break e;zp--,qo+=zt[Mn++]<<ae,ae+=8}it.head&&(it.head.time=qo),512&it.flags&&(v0[0]=255&qo,v0[1]=qo>>>8&255,v0[2]=qo>>>16&255,v0[3]=qo>>>24&255,it.check=l(it.check,v0,4,0)),qo=0,ae=0,it.mode=4;case 4:for(;ae<16;){if(zp===0)break e;zp--,qo+=zt[Mn++]<<ae,ae+=8}it.head&&(it.head.xflags=255&qo,it.head.os=qo>>8),512&it.flags&&(v0[0]=255&qo,v0[1]=qo>>>8&255,it.check=l(it.check,v0,2,0)),qo=0,ae=0,it.mode=5;case 5:if(1024&it.flags){for(;ae<16;){if(zp===0)break e;zp--,qo+=zt[Mn++]<<ae,ae+=8}it.length=qo,it.head&&(it.head.extra_len=qo),512&it.flags&&(v0[0]=255&qo,v0[1]=qo>>>8&255,it.check=l(it.check,v0,2,0)),qo=0,ae=0}else it.head&&(it.head.extra=null);it.mode=6;case 6:if(1024&it.flags&&((Kt=it.length)>zp&&(Kt=zp),Kt&&(it.head&&(M0=it.head.extra_len-it.length,it.head.extra||(it.head.extra=new Array(it.head.extra_len)),a.arraySet(it.head.extra,zt,Mn,Kt,M0)),512&it.flags&&(it.check=l(it.check,zt,Kt,Mn)),zp-=Kt,Mn+=Kt,it.length-=Kt),it.length))break e;it.length=0,it.mode=7;case 7:if(2048&it.flags){if(zp===0)break e;Kt=0;do M0=zt[Mn+Kt++],it.head&&M0&&it.length<65536&&(it.head.name+=String.fromCharCode(M0));while(M0&&Kt<zp);if(512&it.flags&&(it.check=l(it.check,zt,Kt,Mn)),zp-=Kt,Mn+=Kt,M0)break e}else it.head&&(it.head.name=null);it.length=0,it.mode=8;case 8:if(4096&it.flags){if(zp===0)break e;Kt=0;do M0=zt[Mn+Kt++],it.head&&M0&&it.length<65536&&(it.head.comment+=String.fromCharCode(M0));while(M0&&Kt<zp);if(512&it.flags&&(it.check=l(it.check,zt,Kt,Mn)),zp-=Kt,Mn+=Kt,M0)break e}else it.head&&(it.head.comment=null);it.mode=9;case 9:if(512&it.flags){for(;ae<16;){if(zp===0)break e;zp--,qo+=zt[Mn++]<<ae,ae+=8}if(qo!==(65535&it.check)){bt.msg="header crc mismatch",it.mode=E;break}qo=0,ae=0}it.head&&(it.head.hcrc=it.flags>>9&1,it.head.done=!0),bt.adler=it.check=0,it.mode=b;break;case 10:for(;ae<32;){if(zp===0)break e;zp--,qo+=zt[Mn++]<<ae,ae+=8}bt.adler=it.check=M(qo),qo=0,ae=0,it.mode=11;case 11:if(it.havedict===0)return bt.next_out=kp,bt.avail_out=sa,bt.next_in=Mn,bt.avail_in=zp,it.hold=qo,it.bits=ae,2;bt.adler=it.check=1,it.mode=b;case b:if(Ut===5||Ut===6)break e;case 13:if(it.last){qo>>>=7&ae,ae-=7&ae,it.mode=27;break}for(;ae<3;){if(zp===0)break e;zp--,qo+=zt[Mn++]<<ae,ae+=8}switch(it.last=1&qo,ae-=1,3&(qo>>>=1)){case 0:it.mode=14;break;case 1:if(Q(it),it.mode=20,Ut===6){qo>>>=2,ae-=2;break e}break;case 2:it.mode=17;break;case 3:bt.msg="invalid block type",it.mode=E}qo>>>=2,ae-=2;break;case 14:for(qo>>>=7&ae,ae-=7&ae;ae<32;){if(zp===0)break e;zp--,qo+=zt[Mn++]<<ae,ae+=8}if((65535&qo)!=(qo>>>16^65535)){bt.msg="invalid stored block lengths",it.mode=E;break}if(it.length=65535&qo,qo=0,ae=0,it.mode=15,Ut===6)break e;case 15:it.mode=16;case 16:if(Kt=it.length){if(Kt>zp&&(Kt=zp),Kt>sa&&(Kt=sa),Kt===0)break e;a.arraySet(Zt,zt,Mn,Kt,kp),zp-=Kt,Mn+=Kt,sa-=Kt,kp+=Kt,it.length-=Kt;break}it.mode=b;break;case 17:for(;ae<14;){if(zp===0)break e;zp--,qo+=zt[Mn++]<<ae,ae+=8}if(it.nlen=257+(31&qo),qo>>>=5,ae-=5,it.ndist=1+(31&qo),qo>>>=5,ae-=5,it.ncode=4+(15&qo),qo>>>=4,ae-=4,it.nlen>286||it.ndist>30){bt.msg="too many length or distance symbols",it.mode=E;break}it.have=0,it.mode=18;case 18:for(;it.have<it.ncode;){for(;ae<3;){if(zp===0)break e;zp--,qo+=zt[Mn++]<<ae,ae+=8}it.lens[D1[it.have++]]=7&qo,qo>>>=3,ae-=3}for(;it.have<19;)it.lens[D1[it.have++]]=0;if(it.lencode=it.lendyn,it.lenbits=7,mm={bits:it.lenbits},sm=f(0,it.lens,0,19,it.lencode,0,it.work,mm),it.lenbits=mm.bits,sm){bt.msg="invalid code lengths set",it.mode=E;break}it.have=0,it.mode=19;case 19:for(;it.have<it.nlen+it.ndist;){for(;x0=(v1=it.lencode[qo&(1<<it.lenbits)-1])>>>16&255,Dp=65535&v1,!((d0=v1>>>24)<=ae);){if(zp===0)break e;zp--,qo+=zt[Mn++]<<ae,ae+=8}if(Dp<16)qo>>>=d0,ae-=d0,it.lens[it.have++]=Dp;else{if(Dp===16){for(Mm=d0+2;ae<Mm;){if(zp===0)break e;zp--,qo+=zt[Mn++]<<ae,ae+=8}if(qo>>>=d0,ae-=d0,it.have===0){bt.msg="invalid bit length repeat",it.mode=E;break}M0=it.lens[it.have-1],Kt=3+(3&qo),qo>>>=2,ae-=2}else if(Dp===17){for(Mm=d0+3;ae<Mm;){if(zp===0)break e;zp--,qo+=zt[Mn++]<<ae,ae+=8}ae-=d0,M0=0,Kt=3+(7&(qo>>>=d0)),qo>>>=3,ae-=3}else{for(Mm=d0+7;ae<Mm;){if(zp===0)break e;zp--,qo+=zt[Mn++]<<ae,ae+=8}ae-=d0,M0=0,Kt=11+(127&(qo>>>=d0)),qo>>>=7,ae-=7}if(it.have+Kt>it.nlen+it.ndist){bt.msg="invalid bit length repeat",it.mode=E;break}for(;Kt--;)it.lens[it.have++]=M0}}if(it.mode===E)break;if(it.lens[256]===0){bt.msg="invalid code -- missing end-of-block",it.mode=E;break}if(it.lenbits=9,mm={bits:it.lenbits},sm=f(1,it.lens,0,it.nlen,it.lencode,0,it.work,mm),it.lenbits=mm.bits,sm){bt.msg="invalid literal/lengths set",it.mode=E;break}if(it.distbits=6,it.distcode=it.distdyn,mm={bits:it.distbits},sm=f(2,it.lens,it.nlen,it.ndist,it.distcode,0,it.work,mm),it.distbits=mm.bits,sm){bt.msg="invalid distances set",it.mode=E;break}if(it.mode=20,Ut===6)break e;case 20:it.mode=21;case 21:if(zp>=6&&sa>=258){bt.next_out=kp,bt.avail_out=sa,bt.next_in=Mn,bt.avail_in=zp,it.hold=qo,it.bits=ae,s(bt,Cp),kp=bt.next_out,Zt=bt.output,sa=bt.avail_out,Mn=bt.next_in,zt=bt.input,zp=bt.avail_in,qo=it.hold,ae=it.bits,it.mode===b&&(it.back=-1);break}for(it.back=0;x0=(v1=it.lencode[qo&(1<<it.lenbits)-1])>>>16&255,Dp=65535&v1,!((d0=v1>>>24)<=ae);){if(zp===0)break e;zp--,qo+=zt[Mn++]<<ae,ae+=8}if(x0&&!(240&x0)){for(c0=d0,u0=x0,y0=Dp;x0=(v1=it.lencode[y0+((qo&(1<<c0+u0)-1)>>c0)])>>>16&255,Dp=65535&v1,!(c0+(d0=v1>>>24)<=ae);){if(zp===0)break e;zp--,qo+=zt[Mn++]<<ae,ae+=8}qo>>>=c0,ae-=c0,it.back+=c0}if(qo>>>=d0,ae-=d0,it.back+=d0,it.length=Dp,x0===0){it.mode=26;break}if(32&x0){it.back=-1,it.mode=b;break}if(64&x0){bt.msg="invalid literal/length code",it.mode=E;break}it.extra=15&x0,it.mode=22;case 22:if(it.extra){for(Mm=it.extra;ae<Mm;){if(zp===0)break e;zp--,qo+=zt[Mn++]<<ae,ae+=8}it.length+=qo&(1<<it.extra)-1,qo>>>=it.extra,ae-=it.extra,it.back+=it.extra}it.was=it.length,it.mode=23;case 23:for(;x0=(v1=it.distcode[qo&(1<<it.distbits)-1])>>>16&255,Dp=65535&v1,!((d0=v1>>>24)<=ae);){if(zp===0)break e;zp--,qo+=zt[Mn++]<<ae,ae+=8}if(!(240&x0)){for(c0=d0,u0=x0,y0=Dp;x0=(v1=it.distcode[y0+((qo&(1<<c0+u0)-1)>>c0)])>>>16&255,Dp=65535&v1,!(c0+(d0=v1>>>24)<=ae);){if(zp===0)break e;zp--,qo+=zt[Mn++]<<ae,ae+=8}qo>>>=c0,ae-=c0,it.back+=c0}if(qo>>>=d0,ae-=d0,it.back+=d0,64&x0){bt.msg="invalid distance code",it.mode=E;break}it.offset=Dp,it.extra=15&x0,it.mode=24;case 24:if(it.extra){for(Mm=it.extra;ae<Mm;){if(zp===0)break e;zp--,qo+=zt[Mn++]<<ae,ae+=8}it.offset+=qo&(1<<it.extra)-1,qo>>>=it.extra,ae-=it.extra,it.back+=it.extra}if(it.offset>it.dmax){bt.msg="invalid distance too far back",it.mode=E;break}it.mode=25;case 25:if(sa===0)break e;if(Kt=Cp-sa,it.offset>Kt){if((Kt=it.offset-Kt)>it.whave&&it.sane){bt.msg="invalid distance too far back",it.mode=E;break}Kt>it.wnext?(Kt-=it.wnext,h0=it.wsize-Kt):h0=it.wnext-Kt,Kt>it.length&&(Kt=it.length),Pp=it.window}else Pp=Zt,h0=kp-it.offset,Kt=it.length;Kt>sa&&(Kt=sa),sa-=Kt,it.length-=Kt;do Zt[kp++]=Pp[h0++];while(--Kt);it.length===0&&(it.mode=21);break;case 26:if(sa===0)break e;Zt[kp++]=it.length,sa--,it.mode=21;break;case 27:if(it.wrap){for(;ae<32;){if(zp===0)break e;zp--,qo|=zt[Mn++]<<ae,ae+=8}if(Cp-=sa,bt.total_out+=Cp,it.total+=Cp,Cp&&(bt.adler=it.check=it.flags?l(it.check,Zt,Cp,kp-Cp):o(it.check,Zt,Cp,kp-Cp)),Cp=sa,(it.flags?qo:M(qo))!==it.check){bt.msg="incorrect data check",it.mode=E;break}qo=0,ae=0}it.mode=28;case 28:if(it.wrap&&it.flags){for(;ae<32;){if(zp===0)break e;zp--,qo+=zt[Mn++]<<ae,ae+=8}if(qo!==(4294967295&it.total)){bt.msg="incorrect length check",it.mode=E;break}qo=0,ae=0}it.mode=29;case 29:sm=1;break e;case E:sm=-3;break e;case 31:return-4;default:return m}return bt.next_out=kp,bt.avail_out=sa,bt.next_in=Mn,bt.avail_in=zp,it.hold=qo,it.bits=ae,(it.wsize||Cp!==bt.avail_out&&it.mode<E&&(it.mode<27||Ut!==4))&&wt(bt,bt.output,bt.next_out,Cp-bt.avail_out)?(it.mode=31,-4):(wp-=bt.avail_in,Cp-=bt.avail_out,bt.total_in+=wp,bt.total_out+=Cp,it.total+=Cp,it.wrap&&Cp&&(bt.adler=it.check=it.flags?l(it.check,Zt,Cp,bt.next_out-Cp):o(it.check,Zt,Cp,bt.next_out-Cp)),bt.data_type=it.bits+(it.last?64:0)+(it.mode===b?128:0)+(it.mode===20||it.mode===15?256:0),(wp===0&&Cp===0||Ut===4)&&sm===0&&(sm=-5),sm)},e.inflateEnd=function(bt){if(!bt||!bt.state)return m;var Ut=bt.state;return Ut.window&&(Ut.window=null),bt.state=null,0},e.inflateGetHeader=function(bt,Ut){var it;return bt&&bt.state&&2&(it=bt.state).wrap?(it.head=Ut,Ut.done=!1,0):m},e.inflateSetDictionary=function(bt,Ut){var it,zt=Ut.length;return bt&&bt.state?(it=bt.state).wrap!==0&&it.mode!==11?m:it.mode===11&&o(1,Ut,zt,0)!==it.check?-3:wt(bt,Ut,zt,zt)?(it.mode=31,-4):(it.havedict=1,0):m},e.inflateInfo="pako inflate (from Nodeca project)"},670:r=>{r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},681:r=>{r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},697:(r,e,t)=>{var a=t(981);function o(Dp){for(var c0=Dp.length;--c0>=0;)Dp[c0]=0}var l=256,s=286,f=30,m=15,b=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],E=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],M=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],I=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],V=new Array(576);o(V);var Z=new Array(60);o(Z);var ee=new Array(512);o(ee);var le=new Array(256);o(le);var K=new Array(29);o(K);var vt,q,Q,wt=new Array(f);function bt(Dp,c0,u0,y0,M0){this.static_tree=Dp,this.extra_bits=c0,this.extra_base=u0,this.elems=y0,this.max_length=M0,this.has_stree=Dp&&Dp.length}function Ut(Dp,c0){this.dyn_tree=Dp,this.max_code=0,this.stat_desc=c0}function it(Dp){return Dp<256?ee[Dp]:ee[256+(Dp>>>7)]}function zt(Dp,c0){Dp.pending_buf[Dp.pending++]=255&c0,Dp.pending_buf[Dp.pending++]=c0>>>8&255}function Zt(Dp,c0,u0){Dp.bi_valid>16-u0?(Dp.bi_buf|=c0<<Dp.bi_valid&65535,zt(Dp,Dp.bi_buf),Dp.bi_buf=c0>>16-Dp.bi_valid,Dp.bi_valid+=u0-16):(Dp.bi_buf|=c0<<Dp.bi_valid&65535,Dp.bi_valid+=u0)}function Mn(Dp,c0,u0){Zt(Dp,u0[2*c0],u0[2*c0+1])}function kp(Dp,c0){var u0=0;do u0|=1&Dp,Dp>>>=1,u0<<=1;while(--c0>0);return u0>>>1}function zp(Dp,c0,u0){var y0,M0,sm=new Array(16),mm=0;for(y0=1;y0<=m;y0++)sm[y0]=mm=mm+u0[y0-1]<<1;for(M0=0;M0<=c0;M0++){var Mm=Dp[2*M0+1];Mm!==0&&(Dp[2*M0]=kp(sm[Mm]++,Mm))}}function sa(Dp){var c0;for(c0=0;c0<s;c0++)Dp.dyn_ltree[2*c0]=0;for(c0=0;c0<f;c0++)Dp.dyn_dtree[2*c0]=0;for(c0=0;c0<19;c0++)Dp.bl_tree[2*c0]=0;Dp.dyn_ltree[512]=1,Dp.opt_len=Dp.static_len=0,Dp.last_lit=Dp.matches=0}function qo(Dp){Dp.bi_valid>8?zt(Dp,Dp.bi_buf):Dp.bi_valid>0&&(Dp.pending_buf[Dp.pending++]=Dp.bi_buf),Dp.bi_buf=0,Dp.bi_valid=0}function ae(Dp,c0,u0,y0){var M0=2*c0,sm=2*u0;return Dp[M0]<Dp[sm]||Dp[M0]===Dp[sm]&&y0[c0]<=y0[u0]}function wp(Dp,c0,u0){for(var y0=Dp.heap[u0],M0=u0<<1;M0<=Dp.heap_len&&(M0<Dp.heap_len&&ae(c0,Dp.heap[M0+1],Dp.heap[M0],Dp.depth)&&M0++,!ae(c0,y0,Dp.heap[M0],Dp.depth));)Dp.heap[u0]=Dp.heap[M0],u0=M0,M0<<=1;Dp.heap[u0]=y0}function Cp(Dp,c0,u0){var y0,M0,sm,mm,Mm=0;if(Dp.last_lit!==0)do y0=Dp.pending_buf[Dp.d_buf+2*Mm]<<8|Dp.pending_buf[Dp.d_buf+2*Mm+1],M0=Dp.pending_buf[Dp.l_buf+Mm],Mm++,y0===0?Mn(Dp,M0,c0):(Mn(Dp,(sm=le[M0])+l+1,c0),(mm=b[sm])!==0&&Zt(Dp,M0-=K[sm],mm),Mn(Dp,sm=it(--y0),u0),(mm=E[sm])!==0&&Zt(Dp,y0-=wt[sm],mm));while(Mm<Dp.last_lit);Mn(Dp,256,c0)}function Kt(Dp,c0){var u0,y0,M0,sm=c0.dyn_tree,mm=c0.stat_desc.static_tree,Mm=c0.stat_desc.has_stree,v1=c0.stat_desc.elems,v0=-1;for(Dp.heap_len=0,Dp.heap_max=573,u0=0;u0<v1;u0++)sm[2*u0]!==0?(Dp.heap[++Dp.heap_len]=v0=u0,Dp.depth[u0]=0):sm[2*u0+1]=0;for(;Dp.heap_len<2;)sm[2*(M0=Dp.heap[++Dp.heap_len]=v0<2?++v0:0)]=1,Dp.depth[M0]=0,Dp.opt_len--,Mm&&(Dp.static_len-=mm[2*M0+1]);for(c0.max_code=v0,u0=Dp.heap_len>>1;u0>=1;u0--)wp(Dp,sm,u0);M0=v1;do u0=Dp.heap[1],Dp.heap[1]=Dp.heap[Dp.heap_len--],wp(Dp,sm,1),y0=Dp.heap[1],Dp.heap[--Dp.heap_max]=u0,Dp.heap[--Dp.heap_max]=y0,sm[2*M0]=sm[2*u0]+sm[2*y0],Dp.depth[M0]=(Dp.depth[u0]>=Dp.depth[y0]?Dp.depth[u0]:Dp.depth[y0])+1,sm[2*u0+1]=sm[2*y0+1]=M0,Dp.heap[1]=M0++,wp(Dp,sm,1);while(Dp.heap_len>=2);Dp.heap[--Dp.heap_max]=Dp.heap[1],(function(D1,P1){var ig,w1,o1,g1,X1,sg,og=P1.dyn_tree,R0=P1.max_code,Xp=P1.stat_desc.static_tree,wm=P1.stat_desc.has_stree,$m=P1.stat_desc.extra_bits,Vp=P1.stat_desc.extra_base,r0=P1.stat_desc.max_length,B0=0;for(g1=0;g1<=m;g1++)D1.bl_count[g1]=0;for(og[2*D1.heap[D1.heap_max]+1]=0,ig=D1.heap_max+1;ig<573;ig++)(g1=og[2*og[2*(w1=D1.heap[ig])+1]+1]+1)>r0&&(g1=r0,B0++),og[2*w1+1]=g1,w1>R0||(D1.bl_count[g1]++,X1=0,w1>=Vp&&(X1=$m[w1-Vp]),sg=og[2*w1],D1.opt_len+=sg*(g1+X1),wm&&(D1.static_len+=sg*(Xp[2*w1+1]+X1)));if(B0!==0){do{for(g1=r0-1;D1.bl_count[g1]===0;)g1--;D1.bl_count[g1]--,D1.bl_count[g1+1]+=2,D1.bl_count[r0]--,B0-=2}while(B0>0);for(g1=r0;g1!==0;g1--)for(w1=D1.bl_count[g1];w1!==0;)(o1=D1.heap[--ig])>R0||(og[2*o1+1]!==g1&&(D1.opt_len+=(g1-og[2*o1+1])*og[2*o1],og[2*o1+1]=g1),w1--)}})(Dp,c0),zp(sm,v0,Dp.bl_count)}function h0(Dp,c0,u0){var y0,M0,sm=-1,mm=c0[1],Mm=0,v1=7,v0=4;for(mm===0&&(v1=138,v0=3),c0[2*(u0+1)+1]=65535,y0=0;y0<=u0;y0++)M0=mm,mm=c0[2*(y0+1)+1],++Mm<v1&&M0===mm||(Mm<v0?Dp.bl_tree[2*M0]+=Mm:M0!==0?(M0!==sm&&Dp.bl_tree[2*M0]++,Dp.bl_tree[32]++):Mm<=10?Dp.bl_tree[34]++:Dp.bl_tree[36]++,Mm=0,sm=M0,mm===0?(v1=138,v0=3):M0===mm?(v1=6,v0=3):(v1=7,v0=4))}function Pp(Dp,c0,u0){var y0,M0,sm=-1,mm=c0[1],Mm=0,v1=7,v0=4;for(mm===0&&(v1=138,v0=3),y0=0;y0<=u0;y0++)if(M0=mm,mm=c0[2*(y0+1)+1],!(++Mm<v1&&M0===mm)){if(Mm<v0)do Mn(Dp,M0,Dp.bl_tree);while(--Mm!==0);else M0!==0?(M0!==sm&&(Mn(Dp,M0,Dp.bl_tree),Mm--),Mn(Dp,16,Dp.bl_tree),Zt(Dp,Mm-3,2)):Mm<=10?(Mn(Dp,17,Dp.bl_tree),Zt(Dp,Mm-3,3)):(Mn(Dp,18,Dp.bl_tree),Zt(Dp,Mm-11,7));Mm=0,sm=M0,mm===0?(v1=138,v0=3):M0===mm?(v1=6,v0=3):(v1=7,v0=4)}}o(wt);var d0=!1;function x0(Dp,c0,u0,y0){Zt(Dp,0+(y0?1:0),3),(function(M0,sm,mm,Mm){qo(M0),zt(M0,mm),zt(M0,~mm),a.arraySet(M0.pending_buf,M0.window,sm,mm,M0.pending),M0.pending+=mm})(Dp,c0,u0)}e._tr_init=function(Dp){d0||((function(){var c0,u0,y0,M0,sm,mm=new Array(16);for(y0=0,M0=0;M0<28;M0++)for(K[M0]=y0,c0=0;c0<1<<b[M0];c0++)le[y0++]=M0;for(le[y0-1]=M0,sm=0,M0=0;M0<16;M0++)for(wt[M0]=sm,c0=0;c0<1<<E[M0];c0++)ee[sm++]=M0;for(sm>>=7;M0<f;M0++)for(wt[M0]=sm<<7,c0=0;c0<1<<E[M0]-7;c0++)ee[256+sm++]=M0;for(u0=0;u0<=m;u0++)mm[u0]=0;for(c0=0;c0<=143;)V[2*c0+1]=8,c0++,mm[8]++;for(;c0<=255;)V[2*c0+1]=9,c0++,mm[9]++;for(;c0<=279;)V[2*c0+1]=7,c0++,mm[7]++;for(;c0<=287;)V[2*c0+1]=8,c0++,mm[8]++;for(zp(V,287,mm),c0=0;c0<f;c0++)Z[2*c0+1]=5,Z[2*c0]=kp(c0,5);vt=new bt(V,b,257,s,m),q=new bt(Z,E,0,f,m),Q=new bt(new Array(0),M,0,19,7)})(),d0=!0),Dp.l_desc=new Ut(Dp.dyn_ltree,vt),Dp.d_desc=new Ut(Dp.dyn_dtree,q),Dp.bl_desc=new Ut(Dp.bl_tree,Q),Dp.bi_buf=0,Dp.bi_valid=0,sa(Dp)},e._tr_stored_block=x0,e._tr_flush_block=function(Dp,c0,u0,y0){var M0,sm,mm=0;Dp.level>0?(Dp.strm.data_type===2&&(Dp.strm.data_type=(function(Mm){var v1,v0=4093624447;for(v1=0;v1<=31;v1++,v0>>>=1)if(1&v0&&Mm.dyn_ltree[2*v1]!==0)return 0;if(Mm.dyn_ltree[18]!==0||Mm.dyn_ltree[20]!==0||Mm.dyn_ltree[26]!==0)return 1;for(v1=32;v1<l;v1++)if(Mm.dyn_ltree[2*v1]!==0)return 1;return 0})(Dp)),Kt(Dp,Dp.l_desc),Kt(Dp,Dp.d_desc),mm=(function(Mm){var v1;for(h0(Mm,Mm.dyn_ltree,Mm.l_desc.max_code),h0(Mm,Mm.dyn_dtree,Mm.d_desc.max_code),Kt(Mm,Mm.bl_desc),v1=18;v1>=3&&Mm.bl_tree[2*I[v1]+1]===0;v1--);return Mm.opt_len+=3*(v1+1)+5+5+4,v1})(Dp),M0=Dp.opt_len+3+7>>>3,(sm=Dp.static_len+3+7>>>3)<=M0&&(M0=sm)):M0=sm=u0+5,u0+4<=M0&&c0!==-1?x0(Dp,c0,u0,y0):Dp.strategy===4||sm===M0?(Zt(Dp,2+(y0?1:0),3),Cp(Dp,V,Z)):(Zt(Dp,4+(y0?1:0),3),(function(Mm,v1,v0,D1){var P1;for(Zt(Mm,v1-257,5),Zt(Mm,v0-1,5),Zt(Mm,D1-4,4),P1=0;P1<D1;P1++)Zt(Mm,Mm.bl_tree[2*I[P1]+1],3);Pp(Mm,Mm.dyn_ltree,v1-1),Pp(Mm,Mm.dyn_dtree,v0-1)})(Dp,Dp.l_desc.max_code+1,Dp.d_desc.max_code+1,mm+1),Cp(Dp,Dp.dyn_ltree,Dp.dyn_dtree)),sa(Dp),y0&&qo(Dp)},e._tr_tally=function(Dp,c0,u0){return Dp.pending_buf[Dp.d_buf+2*Dp.last_lit]=c0>>>8&255,Dp.pending_buf[Dp.d_buf+2*Dp.last_lit+1]=255&c0,Dp.pending_buf[Dp.l_buf+Dp.last_lit]=255&u0,Dp.last_lit++,c0===0?Dp.dyn_ltree[2*u0]++:(Dp.matches++,c0--,Dp.dyn_ltree[2*(le[u0]+l+1)]++,Dp.dyn_dtree[2*it(c0)]++),Dp.last_lit===Dp.lit_bufsize-1},e._tr_align=function(Dp){Zt(Dp,2,3),Mn(Dp,256,V),(function(c0){c0.bi_valid===16?(zt(c0,c0.bi_buf),c0.bi_buf=0,c0.bi_valid=0):c0.bi_valid>=8&&(c0.pending_buf[c0.pending++]=255&c0.bi_buf,c0.bi_buf>>=8,c0.bi_valid-=8)})(Dp)}},701:r=>{r.exports=function(e,t,a,o){for(var l=65535&e,s=e>>>16&65535,f=0;a!==0;){a-=f=a>2e3?2e3:a;do s=s+(l=l+t[o++]|0)|0;while(--f);l%=65521,s%=65521}return l|s<<16}},746:r=>{r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},788:(r,e,t)=>{var a={};(0,t(981).assign)(a,t(71),t(3),t(681)),r.exports=a},797:(r,e,t)=>{t.r(e),t.d(e,{VASP:()=>l});var a=t(378),o=t(392);function l(s,f={}){var m=[[]],b={};const E=f.assignBonds===void 0||f.assignBonds;var M=s.replace(/^\s+/,"").split(/\r?\n/);if(M.length<3)return m;if(!M[1].match(/\d+/))return console.log("Warning: second line of the vasp structure file must be a number"),m;if(b.length=parseFloat(M[1]),b.length<0)return console.log("Warning: Vasp implementation for negative lattice lengths is not yet available"),m;b.xVec=new Float32Array(M[2].replace(/^\s+/,"").split(/\s+/)),b.yVec=new Float32Array(M[3].replace(/^\s+/,"").split(/\s+/)),b.zVec=new Float32Array(M[4].replace(/^\s+/,"").split(/\s+/));var I=new a.Matrix3(b.xVec[0],b.xVec[1],b.xVec[2],b.yVec[0],b.yVec[1],b.yVec[2],b.zVec[0],b.zVec[1],b.zVec[2]);I.multiplyScalar(b.length),m.modelData=[{symmetries:[],cryst:{matrix:I}}];var V=M[5].trim().split(/\s+/),Z=new Int16Array(M[6].trim().split(/\s+/)),ee=M[7].trim(),le=!1;if(ee.match(/S/)&&(le=!0,ee=M[8].trim()),ee.toLowerCase()[0]=="c")ee="cartesian";else{if(ee.toLowerCase()[0]!="d")return console.log("Warning: Unknown vasp mode in POSCAR file: mode must be either C(artesian) or D(irect)"),m;ee="direct"}if(V.length!=Z.length)return console.log("Warning: declaration of atomary species wrong:"),console.log(V),console.log(Z),m;le?M.splice(0,9):M.splice(0,8);for(var K=0,vt=0,q=V.length;vt<q;vt++){for(var Q=V[vt],wt=0,bt=Z[vt];wt<bt;wt++){var Ut=new Float32Array(M[K+wt].trim().split(/\s+/)),it={};it.elem=Q,ee=="cartesian"?(it.x=b.length*Ut[0],it.y=b.length*Ut[1],it.z=b.length*Ut[2]):(it.x=b.length*(Ut[0]*b.xVec[0]+Ut[1]*b.yVec[0]+Ut[2]*b.zVec[0]),it.y=b.length*(Ut[0]*b.xVec[1]+Ut[1]*b.yVec[1]+Ut[2]*b.zVec[1]),it.z=b.length*(Ut[0]*b.xVec[2]+Ut[1]*b.yVec[2]+Ut[2]*b.zVec[2])),it.bonds=[],it.bondOrder=[],m[0].push(it)}K+=Z[vt]}if(E)for(let zt=0;zt<m.length;zt++)(0,o.assignBonds)(m[zt],f);return m}},834:r=>{r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},848:(r,e,t)=>{t.r(e),t.d(e,{VolumeData:()=>m});var a=t(864),o=t(529),l=t(797),s=t(865),f=t(75);class m{constructor(E,M,I){if(this.unit={x:1,y:1,z:1},this.origin={x:0,y:0,z:0},this.size={x:0,y:0,z:0},this.data=new Float32Array([]),this.matrix=null,this.inversematrix=null,this.isbinary=new Set(["ccp4","CCP4"]),this.getCoordinates=function(K){var vt=K/(this.size.y*this.size.z),q=K%(this.size.y*this.size.z),Q=K%this.size.z;return vt*=this.unit.x,q*=this.unit.y,Q*=this.unit.z,{x:vt+=this.origin.x,y:q+=this.origin.y,z:Q+=this.origin.z}},this.vasp=function(K){var vt=K.replace(/^\s+/,"").split(/[\n\r]/),q=(0,l.VASP)(K)[0].length;if(q==0)return console.warn("No good formating of CHG or CHGCAR file, not atomic information provided in the file."),void(this.data=[]);var Q,wt=1.889725992,bt=parseFloat(vt[1]);Q=vt[2].replace(/^\s+/,"").split(/\s+/);var Ut=new o.Vector3(parseFloat(Q[0]),parseFloat(Q[1]),parseFloat(Q[2])).multiplyScalar(bt*wt);Q=vt[3].replace(/^\s+/,"").split(/\s+/);var it=new o.Vector3(parseFloat(Q[0]),parseFloat(Q[1]),parseFloat(Q[2])).multiplyScalar(bt*wt);Q=vt[4].replace(/^\s+/,"").split(/\s+/);var zt=new o.Vector3(parseFloat(Q[0]),parseFloat(Q[1]),parseFloat(Q[2])).multiplyScalar(bt*wt),Zt=Ut.x*(it.y*zt.z-zt.y*it.z)-it.x*(Ut.y*zt.z-zt.y*Ut.z)+zt.x*(Ut.y*it.z-it.y*Ut.z),Mn=1/(Zt=Math.abs(Zt)/Math.pow(wt,3));vt.splice(0,8+q+1);var kp=vt[0].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),zp=Math.abs(parseFloat(kp[0])),sa=Math.abs(parseFloat(kp[1])),qo=Math.abs(parseFloat(kp[2])),ae=this.origin=new o.Vector3(0,0,0);this.size={x:zp,y:sa,z:qo},this.unit=new o.Vector3(Ut.x,it.y,zt.z),Ut=Ut.multiplyScalar(1/(wt*zp)),it=it.multiplyScalar(1/(wt*sa)),zt=zt.multiplyScalar(1/(wt*qo)),Ut.y==0&&Ut.z==0&&it.x==0&&it.z==0&&zt.x==0&&zt.y==0||(this.matrix=new o.Matrix4(Ut.x,it.x,zt.x,0,Ut.y,it.y,zt.y,0,Ut.z,it.z,zt.z,0,0,0,0,1),this.matrix=this.matrix.multiplyMatrices(this.matrix,new o.Matrix4().makeTranslation(ae.x,ae.y,ae.z)),this.origin=new o.Vector3(0,0,0),this.unit=new o.Vector3(1,1,1)),vt.splice(0,1);var wp=vt.join(" "),Cp=(wp=wp.replace(/^\s+/,"")).split(/[\s\r]+/);Cp.splice(zp*sa*qo+1);for(var Kt=Float32Array.from(Cp,parseFloat),h0=0;h0<Kt.length;h0++)Kt[h0]=Kt[h0]*Mn*.036749309;this.data=Kt},this.dx=function(K){var vt,q=K.split(/[\n\r]+/),Q=/gridpositions\s+counts\s+(\d+)\s+(\d+)\s+(\d+)/,wt=/^origin\s+(\S+)\s+(\S+)\s+(\S+)/,bt=/^delta\s+(\S+)\s+(\S+)\s+(\S+)/,Ut=/data follows/,it=0;for(it=0;it<q.length;it++){var zt=q[it];if(vt=Q.exec(zt)){var Zt=parseInt(vt[1]),Mn=parseInt(vt[2]),kp=parseInt(vt[3]);this.size={x:Zt,y:Mn,z:kp}}else if(vt=bt.exec(zt)){var zp=parseFloat(vt[1]);if(parseFloat(vt[2])==0&&parseFloat(vt[3])==0||console.warn("Non-orthogonal delta matrix not currently supported in dx format"),zt=q[it+=1],(vt=bt.exec(zt))==null)return void console.error("Parse error in dx delta matrix");var sa=parseFloat(vt[2]);if(parseFloat(vt[1])==0&&parseFloat(vt[3])==0||console.warn("Non-orthogonal delta matrix not currently supported in dx format"),zt=q[it+=1],(vt=bt.exec(zt))==null)return void console.error("Parse error in dx delta matrix");var qo=parseFloat(vt[3]);parseFloat(vt[1])==0&&parseFloat(vt[2])==0||console.warn("Non-orthogonal delta matrix not currently supported in dx format"),this.unit=new o.Vector3(zp,sa,qo)}else if(vt=wt.exec(zt)){var ae=parseFloat(vt[1]),wp=parseFloat(vt[2]),Cp=parseFloat(vt[3]);this.origin=new o.Vector3(ae,wp,Cp)}else if(vt=Ut.exec(zt))break}if(it+=1,this.size&&this.origin&&this.unit&&this.size){var Kt=q.splice(it).join(" ").split(/[\s\r]+/);this.data=Float32Array.from(Kt,parseFloat)}else console.error("Error parsing dx format")},M=M.toLowerCase(),/\.gz$/.test(M)){M=M.replace(/\.gz$/,"");try{this[M]&&this.isbinary.has(M)?(typeof E=="string"&&(E=(0,a.base64ToArray)(E)),E=(0,f.inflate)(E)):E=new TextDecoder("utf-8").decode((0,f.inflate)(E))}catch(K){console.error(K)}}if(this[M]&&(this.isbinary.has(M)&&typeof E=="string"&&(E=(0,a.base64ToArray)(E)),this[M](E)),I){if(I.negate)for(let K=0,vt=this.data.length;K<vt;K++)this.data[K]=-this.data[K];if(I.normalize){var V=0;for(let K=0,vt=this.data.length;K<vt;K++)V+=this.data[K];var Z=V/this.data.length;V=0;for(let K=0,vt=this.data.length;K<vt;K++){var ee=this.data[K]-Z;V+=ee*ee}var le=V/this.data.length;for(let K=0,vt=this.data.length;K<vt;K++)this.data[K]=(this.data[K]-Z)/le}}}getIndex(E,M,I){if(this.matrix){this.inversematrix==null&&(this.inversematrix=new o.Matrix4().getInverse(this.matrix));var V=new o.Vector3(E,M,I);E=(V=V.applyMatrix4(this.inversematrix)).x,M=V.y,I=V.z}else E-=this.origin.x,M-=this.origin.y,I-=this.origin.z,E/=this.unit.x,M/=this.unit.y,I/=this.unit.z;return E=Math.round(E),M=Math.round(M),I=Math.round(I),E<0||E>=this.size.x||M<0||M>=this.size.y||I<0||I>=this.size.z?-1:E*this.size.y*this.size.z+M*this.size.z+I}getVal(E,M,I){let V=this.getIndex(E,M,I);return V<0?0:this.data[V]}cube(E){var M=E.split(/\r?\n/);if(!(M.length<6)){var I=(0,s.CUBE)(E,{}).modelData[0].cryst,V=M[2].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),Z=parseFloat(V[0]),ee=Math.abs(Z);this.origin=I.origin,this.size=I.size,this.unit=I.unit,this.matrix=I.matrix4;var le=6;Z<0&&le++;var K=M.splice(ee+le).join(" "),vt=(K=K.replace(/^\s+/,"")).split(/[\s\r]+/);this.data=Float32Array.from(vt,parseFloat)}}ccp4(E){var M={};E=new Int8Array(E);var I=new Int32Array(E.buffer,0,56),V=new Float32Array(E.buffer,0,56),Z=new DataView(E.buffer);if(M.MAP=String.fromCharCode(Z.getUint8(208),Z.getUint8(209),Z.getUint8(210),Z.getUint8(211)),M.MACHST=[Z.getUint8(212),Z.getUint8(213)],M.MACHST[0]===17&&M.MACHST[1]===17)for(var ee=E.byteLength,le=0;le<ee;le+=4)Z.setFloat32(le,Z.getFloat32(le),!0);M.NX=I[0],M.NY=I[1],M.NZ=I[2],M.MODE=I[3],M.NXSTART=I[4],M.NYSTART=I[5],M.NZSTART=I[6],M.MX=I[7],M.MY=I[8],M.MZ=I[9],M.xlen=V[10],M.ylen=V[11],M.zlen=V[12],M.alpha=V[13],M.beta=V[14],M.gamma=V[15],M.MAPC=I[16],M.MAPR=I[17],M.MAPS=I[18],M.DMIN=V[19],M.DMAX=V[20],M.DMEAN=V[21],M.ISPG=I[22],M.NSYMBT=I[23],M.LSKFLG=I[24],M.originX=V[49],M.originY=V[50],M.originZ=V[51],M.ARMS=V[54];var K=M,vt=[K.xlen,0,0],q=[K.ylen*Math.cos(Math.PI/180*K.gamma),K.ylen*Math.sin(Math.PI/180*K.gamma),0],Q=[K.zlen*Math.cos(Math.PI/180*K.beta),K.zlen*(Math.cos(Math.PI/180*K.alpha)-Math.cos(Math.PI/180*K.gamma)*Math.cos(Math.PI/180*K.beta))/Math.sin(Math.PI/180*K.gamma),0];Q[2]=Math.sqrt(K.zlen*K.zlen*Math.sin(Math.PI/180*K.beta)*Math.sin(Math.PI/180*K.beta)-Q[1]*Q[1]);var wt=[0,vt,q,Q],bt=[0,K.MX,K.MY,K.MZ],Ut=[0,K.MAPC,K.MAPR,K.MAPS];this.matrix=new o.Matrix4,this.matrix.set(wt[Ut[1]][0]/bt[Ut[1]],wt[Ut[2]][0]/bt[Ut[2]],wt[Ut[3]][0]/bt[Ut[3]],0,wt[Ut[1]][1]/bt[Ut[1]],wt[Ut[2]][1]/bt[Ut[2]],wt[Ut[3]][1]/bt[Ut[3]],0,wt[Ut[1]][2]/bt[Ut[1]],wt[Ut[2]][2]/bt[Ut[2]],wt[Ut[3]][2]/bt[Ut[3]],0,0,0,0,1),this.matrix=this.matrix.multiplyMatrices(this.matrix,new o.Matrix4().makeTranslation(K.NXSTART+K.originX,K.NYSTART+K.originY,K.NZSTART+K.originZ)),this.origin=new o.Vector3(0,0,0),this.unit=new o.Vector3(1,1,1),this.size={x:M.NX,y:M.NY,z:M.NZ},this.dimensionorder=[M.MAPC,M.MAPR,M.MAPS];var it=new Float32Array(E.buffer,1024+M.NSYMBT),zt=M.NX,Zt=M.NY,Mn=M.NZ;this.data=new Float32Array(zt*Zt*Mn);for(let kp=0;kp<zt;kp++)for(let zp=0;zp<Zt;zp++)for(let sa=0;sa<Mn;sa++)this.data[(kp*Zt+zp)*Mn+sa]=it[(sa*Zt+zp)*zt+kp]}}},864:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{PausableTimer:()=>PausableTimer,adjustVolumeStyle:()=>adjustVolumeStyle,base64ToArray:()=>base64ToArray,deepCopy:()=>deepCopy,download:()=>download,extend:()=>extend,get:()=>get,getAtomProperty:()=>getAtomProperty,getColorFromStyle:()=>getColorFromStyle,getElement:()=>getElement,getExtent:()=>getExtent,getPropertyRange:()=>getPropertyRange,getbin:()=>getbin,inflateString:()=>inflateString,isEmptyObject:()=>isEmptyObject,isNumeric:()=>isNumeric,makeFunction:()=>makeFunction,mergeGeos:()=>mergeGeos,specStringToObject:()=>specStringToObject});var _Gradient__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(546),_VolumeData__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(848),_colors__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(222),pako__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(75);function extend(r,e){for(var t in e)e.hasOwnProperty(t)&&e[t]!==void 0&&(r[t]=e[t]);return r}function deepCopy(r){let e,t,a;if(r==null)return{};if(typeof r!="object"||r===null)return r;for(a in e=Array.isArray(r)?[]:{},r)t=r[a],e[a]=deepCopy(t);return e}function isNumeric(r){var e=typeof r;return(e==="number"||e==="string")&&!isNaN(r-parseFloat(r))}function isEmptyObject(r){return Object.keys(r).length===0}function makeFunction(callback){return callback&&typeof callback=="string"&&(callback=eval("("+callback+")")),callback&&typeof callback!="function"?(console.warn("Invalid callback provided."),()=>{}):callback}function adjustVolumeStyle(r){r&&(!r.volformat||r.voldata instanceof _VolumeData__WEBPACK_IMPORTED_MODULE_1__.VolumeData||(r.voldata=new _VolumeData__WEBPACK_IMPORTED_MODULE_1__.VolumeData(r.voldata,r.volformat)),r.volscheme&&(r.volscheme=_Gradient__WEBPACK_IMPORTED_MODULE_0__.Gradient.getGradient(r.volscheme)))}function getExtent(r,e){var t,a,o,l,s,f,m,b,E,M,I=!e;if(t=a=o=9999,l=s=f=-9999,m=b=E=M=0,r.length===0)return[[0,0,0],[0,0,0],[0,0,0]];for(var V=0;V<r.length;V++){var Z=r[V];if(Z!==void 0&&isFinite(Z.x)&&isFinite(Z.y)&&isFinite(Z.z)&&(M++,m+=Z.x,b+=Z.y,E+=Z.z,t=t<Z.x?t:Z.x,a=a<Z.y?a:Z.y,o=o<Z.z?o:Z.z,l=l>Z.x?l:Z.x,s=s>Z.y?s:Z.y,f=f>Z.z?f:Z.z,Z.symmetries&&I))for(var ee=0;ee<Z.symmetries.length;ee++)M++,m+=Z.symmetries[ee].x,b+=Z.symmetries[ee].y,E+=Z.symmetries[ee].z,t=t<Z.symmetries[ee].x?t:Z.symmetries[ee].x,a=a<Z.symmetries[ee].y?a:Z.symmetries[ee].y,o=o<Z.symmetries[ee].z?o:Z.symmetries[ee].z,l=l>Z.symmetries[ee].x?l:Z.symmetries[ee].x,s=s>Z.symmetries[ee].y?s:Z.symmetries[ee].y,f=f>Z.symmetries[ee].z?f:Z.symmetries[ee].z}return[[t,a,o],[l,s,f],[m/M,b/M,E/M]]}function getPropertyRange(r,e){for(var t=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,o=0,l=r.length;o<l;o++){var s=getAtomProperty(r[o],e);s!=null&&(s<t&&(t=s),s>a&&(a=s))}return isFinite(t)||isFinite(a)?isFinite(t)?isFinite(a)||(a=t):t=a:t=a=0,[t,a]}class PausableTimer{constructor(e,t,a){this.total_time_run=0,this.fn=e,this.arg=a,this.countdown=t,this.start_time=new Date().getTime(),this.ident=setTimeout(e,t,a)}cancel(){clearTimeout(this.ident)}pause(){clearTimeout(this.ident),this.total_time_run=new Date().getTime()-this.start_time}resume(){this.ident=setTimeout(this.fn,Math.max(0,this.countdown-this.total_time_run),this.arg)}}function base64ToArray(r){for(var e=window.atob(r),t=e.length,a=new Uint8Array(t),o=0;o<t;o++)a[o]=e.charCodeAt(o);return a}function getAtomProperty(r,e){var t=null;return r.properties&&r.properties[e]!==void 0?t=r.properties[e]:r[e]!==void 0&&(t=r[e]),t}function mergeGeos(r,e){var t=e.geometry;t!==void 0&&r.geometryGroups.push(t.geometryGroups[0])}function specStringToObject(r){if(typeof r=="object"||r===void 0||r==null)return r;try{return JSON.parse(r)}catch{}var e=function(I){return isNumeric(I)?Math.floor(parseFloat(I))==parseInt(I)||I.indexOf(".")>=0?parseFloat(I):parseInt(I):I==="true"||I!=="false"&&I},t={};if((r=r.replace(/%7E/g,"~"))==="all")return t;for(var a=r.split(";"),o=0;o<a.length;o++){var l=a[o].split(":"),s=l[0],f={},m=l[1];if(m)if((m=m.replace(/~/g,"=")).indexOf("=")!==-1)for(var b=m.split(","),E=0;E<b.length;E++){var M=b[E].split("=",2);f[M[0]]=e(M[1])}else f=m.indexOf(",")!==-1?m.split(","):e(m);t[s]=f}return t}function checkStatus(r){if(!r.ok)throw new Error(`HTTP ${r.status} - ${r.statusText}`);return r}function get(r,e){var t=fetch(r).then(checkStatus).then(a=>a.text());return e?t.then(e):t}function getbin(r,e,t,a){var o;return o=t=="POST"?fetch(r,{method:"POST",body:a}).then(l=>checkStatus(l)).then(l=>l.arrayBuffer()):fetch(r).then(l=>checkStatus(l)).then(l=>l.arrayBuffer()),e?o.then(e):o}function download(r,e,t,a){var o="",l="",s="",f=null,m=e.addModel();if(r.indexOf(":")<0&&(r=r.length==4?"pdb:"+r:isNaN(r)?"url:"+r:"cid:"+r),r.substring(0,5)=="mmtf:"&&(console.warn("WARNING: MMTF now deprecated.  Reverting to bcif."),r="bcif:"+r.slice(5)),r.substring(0,5)==="bcif:")r=r.substring(5).toUpperCase(),s="https://models.rcsb.org/"+r+".bcif.gz",t&&t.noComputeSecondaryStructure===void 0&&(t.noComputeSecondaryStructure=!0),f=new Promise(function(E){getbin(s).then(function(M){m.addMolData(M,"bcif.gz",t),e.zoomTo(),e.render(),E(m)},function(){console.error("fetch of "+s+" failed.")})});else{if(r.substring(0,4)==="pdb:"){if(o="bcif",t&&t.format&&(o=t.format),t&&t.noComputeSecondaryStructure===void 0&&(t.noComputeSecondaryStructure=!0),!(r=r.substring(4).toUpperCase()).match(/^[1-9][A-Za-z0-9]{3}$/))return void alert("Wrong PDB ID");o=="bcif"?s="https://models.rcsb.org/"+r.toUpperCase()+".bcif.gz":(l=t&&t.pdbUri?t.pdbUri:"https://files.rcsb.org/view/",s=l+r+"."+o)}else if(r.substring(0,4)=="cid:"){if(o="sdf",!(r=r.substring(4)).match(/^[0-9]+$/))return void alert("Wrong Compound ID");s="https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/"+r+"/SDF?record_type=3d"}else r.substring(0,4)=="url:"&&(s=r.substring(4),o=s);var b=function(E){m.addMolData(E,o,t),e.zoomTo(),e.render()};f=new Promise(function(E){o=="bcif"?getbin(s).then(function(M){b(M),E(m)}).catch(function(){l=t&&t.pdbUri?t.pdbUri:"https://files.rcsb.org/view/",s=l+r+".pdb",o="pdb",console.warn("falling back to pdb format"),get(s).then(function(M){b(M),E(m)}).catch(function(M){b(""),E(m),console.error("fetch of "+s+" failed: "+M.statusText)})}):get(s).then(function(M){b(M),E(m)}).catch(function(M){b(""),E(m),console.error("fetch of "+s+" failed: "+M.statusText)})})}return a?(f.then(function(E){a(E)}),m):f}function getColorFromStyle(r,e){let t=e.colorscheme;if(_colors__WEBPACK_IMPORTED_MODULE_2__.builtinColorSchemes[t]!==void 0)t=_colors__WEBPACK_IMPORTED_MODULE_2__.builtinColorSchemes[t];else if(typeof t=="string"&&t.endsWith("Carbon")){let l=t.substring(0,t.lastIndexOf("Carbon")).toLowerCase();if(_colors__WEBPACK_IMPORTED_MODULE_2__.htmlColors[l]!==void 0){let s=Object.assign({},_colors__WEBPACK_IMPORTED_MODULE_2__.elementColors.defaultColors);s.C=_colors__WEBPACK_IMPORTED_MODULE_2__.htmlColors[l],_colors__WEBPACK_IMPORTED_MODULE_2__.builtinColorSchemes[t]={prop:"elem",map:s},t=_colors__WEBPACK_IMPORTED_MODULE_2__.builtinColorSchemes[t]}}let a=r.color;if(e.color!==void 0&&e.color!="spectrum"&&(a=e.color),t!==void 0){let l,s;if(_colors__WEBPACK_IMPORTED_MODULE_2__.elementColors[t]!==void 0)t=_colors__WEBPACK_IMPORTED_MODULE_2__.elementColors[t],t[r[t.prop]]!==void 0&&(a=t.map[r[t.prop]]);else if(t[r[t.prop]]!==void 0)a=t.map[r[t.prop]];else if(t.prop!==void 0&&t.gradient!==void 0){l=t.prop;var o=t.gradient;o instanceof _Gradient__WEBPACK_IMPORTED_MODULE_0__.GradientType||(o=(0,_Gradient__WEBPACK_IMPORTED_MODULE_0__.getGradient)(t));let f=o.range()||[-1,1];s=getAtomProperty(r,l),s!=null&&(a=o.valueToHex(s,f))}else t.prop!==void 0&&t.map!==void 0?(l=t.prop,s=getAtomProperty(r,l),t.map[s]!==void 0&&(a=t.map[s])):e.colorscheme[r.elem]!==void 0?a=e.colorscheme[r.elem]:console.warn("Could not interpret colorscheme "+t)}else e.colorfunc!==void 0&&(a=e.colorfunc(r));return _colors__WEBPACK_IMPORTED_MODULE_2__.CC.color(a)}function getElement(r){let e=r;return typeof r=="string"?e=document.querySelector("#"+r):typeof r=="object"&&r.get&&(e=r.get(0)),e}function inflateString(r,e=!0){let t;return t=typeof r=="string"?new TextEncoder().encode(r):new Uint8Array(r),(0,pako__WEBPACK_IMPORTED_MODULE_3__.inflate)(t,{to:e?"string":null})}},865:(r,e,t)=>{t.r(e),t.d(e,{CUBE:()=>s});var a=t(378),o=t(392);const l={1:"H",2:"He",3:"Li",4:"Be",5:"B",6:"C",7:"N",8:"O",9:"F",10:"Ne",11:"Na",12:"Mg",13:"Al",14:"Si",15:"P",16:"S",17:"Cl",18:"Ar",19:"K",20:"Ca",21:"Sc",22:"Ti",23:"V",24:"Cr",25:"Mn",26:"Fe",27:"Co",28:"Ni",29:"Cu",30:"Zn",31:"Ga",32:"Ge",33:"As",34:"Se",35:"Br",36:"Kr",37:"Rb",38:"Sr",39:"Y",40:"Zr",41:"Nb",42:"Mo",43:"Tc",44:"Ru",45:"Rh",46:"Pd",47:"Ag",48:"Cd",49:"In",50:"Sn",51:"Sb",52:"Te",53:"I",54:"Xe",55:"Cs",56:"Ba",71:"Lu",72:"Hf",73:"Ta",74:"W",75:"Re",76:"Os",77:"Ir",78:"Pt",79:"Au",80:"Hg",81:"Tl",82:"Pb",83:"Bi",84:"Po",85:"At",86:"Rn",87:"Fr",88:"Ra",104:"Rf",105:"Db",106:"Sg",107:"Bh",108:"Hs",109:"Mt",110:"Ds",111:"Rg",112:"Cn",113:"Nh",114:"Fl",115:"Mc",116:"Lv",117:"Ts",118:"Og",57:"La",58:"Ce",59:"Pr",60:"Nd",61:"Pm",62:"Sm",63:"Eu",64:"Gd",65:"Tb",66:"Dy",67:"Ho",68:"Er",69:"Tm",70:"Yb",89:"Ac",90:"Th",91:"Pa",92:"U",93:"Np",94:"Pu",95:"Am",96:"Cm",97:"Bk",98:"Cf",99:"Es",100:"Fm",101:"Md",102:"No"};function s(f,m){m=m||{};const b=[[]];let E=f.split(/\r?\n/);const M=m.assignBonds===void 0||m.assignBonds;if(E.length<6)return b;let I=E[2].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");const V=Math.abs(parseFloat(I[0]));let Z={origin:void 0,size:void 0,unit:void 0,matrix4:void 0,matrix:void 0};const ee=Z.origin=new a.Vector3(parseFloat(I[1]),parseFloat(I[2]),parseFloat(I[3]));I=E[3].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),I=E[3].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");const le=I[0]>0?.529177:1;ee.multiplyScalar(le);const K=Math.abs(I[0]),vt=new a.Vector3(parseFloat(I[1]),parseFloat(I[2]),parseFloat(I[3])).multiplyScalar(le);I=E[4].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");const q=Math.abs(I[0]),Q=new a.Vector3(parseFloat(I[1]),parseFloat(I[2]),parseFloat(I[3])).multiplyScalar(le);I=E[5].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");const wt=Math.abs(I[0]),bt=new a.Vector3(parseFloat(I[1]),parseFloat(I[2]),parseFloat(I[3])).multiplyScalar(le);if(Z.size={x:K,y:q,z:wt},Z.unit=new a.Vector3(vt.x,Q.y,bt.z),vt.y!=0||vt.z!=0||Q.x!=0||Q.z!=0||bt.x!=0||bt.y!=0){Z.matrix4=new a.Matrix4(vt.x,Q.x,bt.x,0,vt.y,Q.y,bt.y,0,vt.z,Q.z,bt.z,0,0,0,0,1);let kp=new a.Matrix4().makeTranslation(ee.x,ee.y,ee.z);Z.matrix4=Z.matrix4.multiplyMatrices(kp,Z.matrix4),Z.matrix=Z.matrix4.matrix3FromTopLeft(),Z.origin=new a.Vector3(0,0,0),Z.unit=new a.Vector3(1,1,1)}b.modelData=[{cryst:Z}],E=E.splice(6,V);for(var Ut=b[b.length-1].length,it=Ut+E.length,zt=Ut;zt<it;++zt){var Zt={};Zt.serial=zt;var Mn=E[zt-Ut].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");Zt.elem=l[Mn[0]],Zt.x=parseFloat(Mn[2])*le,Zt.y=parseFloat(Mn[3])*le,Zt.z=parseFloat(Mn[4])*le,Zt.hetflag=!0,Zt.bonds=[],Zt.bondOrder=[],Zt.properties={},b[b.length-1].push(Zt)}if(M)for(let kp=0;kp<b.length;kp++)(0,o.assignBonds)(b[kp],m);return b}},972:(r,e,t)=>{var a=t(981),o=!0,l=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{l=!1}for(var s=new a.Buf8(256),f=0;f<256;f++)s[f]=f>=252?6:f>=248?5:f>=240?4:f>=224?3:f>=192?2:1;function m(b,E){if(E<65534&&(b.subarray&&l||!b.subarray&&o))return String.fromCharCode.apply(null,a.shrinkBuf(b,E));for(var M="",I=0;I<E;I++)M+=String.fromCharCode(b[I]);return M}s[254]=s[254]=1,e.string2buf=function(b){var E,M,I,V,Z,ee=b.length,le=0;for(V=0;V<ee;V++)(64512&(M=b.charCodeAt(V)))==55296&&V+1<ee&&(64512&(I=b.charCodeAt(V+1)))==56320&&(M=65536+(M-55296<<10)+(I-56320),V++),le+=M<128?1:M<2048?2:M<65536?3:4;for(E=new a.Buf8(le),Z=0,V=0;Z<le;V++)(64512&(M=b.charCodeAt(V)))==55296&&V+1<ee&&(64512&(I=b.charCodeAt(V+1)))==56320&&(M=65536+(M-55296<<10)+(I-56320),V++),M<128?E[Z++]=M:M<2048?(E[Z++]=192|M>>>6,E[Z++]=128|63&M):M<65536?(E[Z++]=224|M>>>12,E[Z++]=128|M>>>6&63,E[Z++]=128|63&M):(E[Z++]=240|M>>>18,E[Z++]=128|M>>>12&63,E[Z++]=128|M>>>6&63,E[Z++]=128|63&M);return E},e.buf2binstring=function(b){return m(b,b.length)},e.binstring2buf=function(b){for(var E=new a.Buf8(b.length),M=0,I=E.length;M<I;M++)E[M]=b.charCodeAt(M);return E},e.buf2string=function(b,E){var M,I,V,Z,ee=E||b.length,le=new Array(2*ee);for(I=0,M=0;M<ee;)if((V=b[M++])<128)le[I++]=V;else if((Z=s[V])>4)le[I++]=65533,M+=Z-1;else{for(V&=Z===2?31:Z===3?15:7;Z>1&&M<ee;)V=V<<6|63&b[M++],Z--;Z>1?le[I++]=65533:V<65536?le[I++]=V:(V-=65536,le[I++]=55296|V>>10&1023,le[I++]=56320|1023&V)}return m(le,I)},e.utf8border=function(b,E){var M;for((E=E||b.length)>b.length&&(E=b.length),M=E-1;M>=0&&(192&b[M])==128;)M--;return M<0||M===0?E:M+s[b[M]]>E?M:E}},981:(r,e)=>{var t=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function a(s,f){return Object.prototype.hasOwnProperty.call(s,f)}e.assign=function(s){for(var f=Array.prototype.slice.call(arguments,1);f.length;){var m=f.shift();if(m){if(typeof m!="object")throw new TypeError(m+"must be non-object");for(var b in m)a(m,b)&&(s[b]=m[b])}}return s},e.shrinkBuf=function(s,f){return s.length===f?s:s.subarray?s.subarray(0,f):(s.length=f,s)};var o={arraySet:function(s,f,m,b,E){if(f.subarray&&s.subarray)s.set(f.subarray(m,m+b),E);else for(var M=0;M<b;M++)s[E+M]=f[m+M]},flattenChunks:function(s){var f,m,b,E,M,I;for(b=0,f=0,m=s.length;f<m;f++)b+=s[f].length;for(I=new Uint8Array(b),E=0,f=0,m=s.length;f<m;f++)M=s[f],I.set(M,E),E+=M.length;return I}},l={arraySet:function(s,f,m,b,E){for(var M=0;M<b;M++)s[E+M]=f[m+M]},flattenChunks:function(s){return[].concat.apply([],s)}};e.setTyped=function(s){s?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,o)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,l))},e.setTyped(t)}},__webpack_module_cache__={};function __webpack_require__(r){var e=__webpack_module_cache__[r];if(e!==void 0)return e.exports;var t=__webpack_module_cache__[r]={exports:{}};return __webpack_modules__[r].call(t.exports,t,t.exports,__webpack_require__),t.exports}__webpack_require__.d=(r,e)=>{for(var t in e)__webpack_require__.o(e,t)&&!__webpack_require__.o(r,t)&&Object.defineProperty(r,t,{enumerable:!0,get:e[t]})},__webpack_require__.o=(r,e)=>Object.prototype.hasOwnProperty.call(r,e),__webpack_require__.r=r=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},__webpack_require__(16),__webpack_require__(185);var __webpack_exports__=__webpack_require__(307);return __webpack_exports__})(),module.exports=factory()})(_3DmolMin)),_3DmolMin.exports}require_3DmolMin();const covalentRadii={H:.31,He:.28,Li:1.28,Be:.96,B:.84,C:.76,N:.71,O:.66,F:.57,Ne:.58,Na:1.66,Mg:1.41,Al:1.21,Si:1.11,P:1.07,S:1.05,Cl:1.02,Ar:1.06,K:2.03,Ca:1.76,Sc:1.7,Ti:1.6,V:1.53,Cr:1.39,Mn:1.61,Fe:1.52,Co:1.5,Ni:1.24,Cu:1.32,Zn:1.22,Ga:1.22,Ge:1.2,As:1.19,Se:1.2,Br:1.2,Kr:1.16,Rb:2.2,Sr:1.95,Y:1.9,Zr:1.75,Nb:1.64,Mo:1.54,Tc:1.47,Ru:1.46,Rh:1.42,Pd:1.39,Ag:1.45,Cd:1.44,In:1.42,Sn:1.39,Sb:1.39,Te:1.38,I:1.39,Xe:1.4,Cs:2.44,Ba:2.15,La:2.07,Ce:2.04,Pr:2.03,Nd:2.01,Pm:1.99,Sm:1.98,Eu:1.98,Gd:1.96,Tb:1.94,Dy:1.92,Ho:1.92,Er:1.89,Tm:1.9,Yb:1.87,Lu:1.75,Hf:1.87,Ta:1.7,W:1.62,Re:1.51,Os:1.44,Ir:1.41,Pt:1.36,Au:1.36,Hg:1.32,Tl:1.45,Pb:1.46,Bi:1.48,Po:1.4,At:1.5,Rn:1.5,Fr:2.6,Ra:2.21,Ac:2.15,Th:2.06,Pa:2,U:1.96,Np:1.9,Pu:1.87,Am:1.8,Cm:1.69},$3Dmol$1=window.$3Dmol;function mod(r,e){return(r%e+e)%e}function setCustomBondLengths(){function r(e,t){$3Dmol$1.setBondLength(e,t)}Object.keys(covalentRadii).forEach(e=>{r(e,1.05*covalentRadii[e])})}const Visualizer3dmol=reactExports.forwardRef(({viewerParams:r,cifText:e},t)=>{const a=reactExports.useRef(null),o=reactExports.useRef(null),l=reactExports.useRef("gldiv-"+(Math.random()+1).toString(36).substring(7));reactExports.useEffect(()=>{setCustomBondLengths()},[]);const s=()=>{if(o.current=a.current.addModel(),e){let b=$3Dmol$1.Parsers.CIF(e),E=b[0],M=b.modelData[0].cryst;o.current.setCrystData(M.a,M.b,M.c,M.alpha,M.beta,M.gamma);let I=o.current.modelData.cryst.matrix,V=new $3Dmol$1.Matrix3().getInverse3(I),Z=[],ee=[];E.forEach(vt=>{let q=new $3Dmol$1.Vector3(vt.x,vt.y,vt.z);if(r.packedCell){let Q=q.clone().applyMatrix3(V);q=new $3Dmol$1.Vector3(mod(Q.x,1),mod(Q.y,1),mod(Q.z,1)).applyMatrix3(I)}ee.push({elem:vt.elem,x:q.x,y:q.y,z:q.z})});let le=.03,K=r.supercell;for(let vt=-1;vt<K[0]+1;vt++)for(let q=-1;q<K[1]+1;q++)for(let Q=-1;Q<K[2]+1;Q++){let wt=new $3Dmol$1.Vector3(vt,q,Q);if(wt.applyMatrix3(I),vt==-1||vt==K[0]||q==-1||q==K[1]||Q==-1||Q==K[2])if(r.packedCell)ee.forEach(bt=>{let Ut=new $3Dmol$1.Vector3(bt.x,bt.y,bt.z);Ut.add(wt);let it=Ut.clone().applyMatrix3(V);it.x>-le&&it.x<K[0]+le&&it.y>-le&&it.y<K[1]+le&&it.z>-le&&it.z<K[2]+le&&Z.push({elem:bt.elem,x:Ut.x,y:Ut.y,z:Ut.z})});else continue;else ee.forEach(bt=>{Z.push({elem:bt.elem,x:bt.x+wt.x,y:bt.y+wt.y,z:bt.z+wt.z})})}o.current.addAtoms(Z)}},f=()=>{a.current.removeAllModels(),s();let b={sphere:{scale:.3,colorscheme:"Jmol"}};r.vdwRadius&&(b.sphere.scale=1),r.bonds&&(b.stick={radius:.15,colorscheme:"Jmol"}),a.current.setStyle(b),a.current.addUnitCell(o.current),o.current.assignBonds(),a.current.removeAllLabels(),r.atomLabels&&o.current.atoms.forEach(E=>{a.current.addLabel(E.elem,{position:{x:E.x,y:E.y,z:E.z},fontColor:"black",bold:!0,fontSize:18,showBackground:!1,backgroundOpacity:1,inFront:!0},null,!0)}),a.current.zoomTo(),a.current.zoom(1.4),a.current.render()},m=(b,E)=>{b=="camera"&&(E=="x"&&a.current.setView([0,0,0,0,-.5,-.5,-.5,.5]),E=="y"&&a.current.setView([0,0,0,0,.5,.5,.5,.5]),E=="z"&&a.current.setView([0,0,0,0,0,0,0,1]),a.current.zoomTo(),a.current.zoom(1.4))};return reactExports.useImperativeHandle(t,()=>({handleEvent:m})),reactExports.useEffect(()=>{let b={backgroundColor:"white",orthographic:!0};a.current=$3Dmol$1.createViewer(l.current,b),f()},[]),reactExports.useEffect(()=>{a.current&&f()},[r,e]),jsxRuntimeExports.jsx("div",{id:l.current,className:"gldiv",children:"No data!"})});Visualizer3dmol.displayName="Visualizer3dmol";const StructureWindow=({mouseEnabled:r,setMouseEnabledState:e,visualizerRef:t,viewerParams:a,cifText:o})=>{let l="structure-window";r||(l+=" disable-mouse");let s="Click to interact",f="mouse-disabled-note";return r&&(f="mouse-disabled-note on"),jsxRuntimeExports.jsxs("div",{className:"structure-window-outer",children:[jsxRuntimeExports.jsx("div",{className:"structure-window-click-handler",onClick:()=>e(!0),children:jsxRuntimeExports.jsx("div",{className:l,children:jsxRuntimeExports.jsx(Visualizer3dmol,{ref:t,viewerParams:a,cifText:o})})}),jsxRuntimeExports.jsx("div",{className:f,onClick:()=>e(!r),children:s})]})},StructureVisualizer=r=>{const[e,t]=reactExports.useState({supercell:r.initSupercell||[2,2,2],bonds:!0,packedCell:!0,atomLabels:!1,vdwRadius:!1}),[a,o]=reactExports.useState(!1),l=reactExports.useRef(null),s=reactExports.useRef(null);reactExports.useEffect(()=>{const E=M=>{s&&!s.current.contains(M.target)&&o(!1)};return document.addEventListener("mousedown",E),()=>{document.removeEventListener("mousedown",E)}},[]);const f=E=>{o(E)},m=(E,M)=>{t(I=>({...I,[E]:M}))},b=(E,M)=>{l.current.handleEvent(E,M)};return jsxRuntimeExports.jsxs("div",{ref:s,className:"structure-visualizer",children:[jsxRuntimeExports.jsx(StructureWindow,{visualizerRef:l,viewerParams:e,cifText:r.cifText,mouseEnabled:a,setMouseEnabledState:f}),jsxRuntimeExports.jsx(ControlBox,{viewerParams:e,onViewerParamChange:m,onViewerEvent:b})]})},defaultFormats=[{format:"cif",label:"CIF"},{format:"xsf",label:"XSF"},{format:"xyz",label:"XYZ"}];function StructDownloadButton(r){const e=`${r.aiida_rest_url}/nodes/${r.uuid}/download`,t=r.download_formats||defaultFormats,[a,o]=reactExports.useState(!1),l=reactExports.useRef(null);return reactExports.useEffect(()=>{function s(f){l.current&&!l.current.contains(f.target)&&o(!1)}return document.addEventListener("mousedown",s),()=>document.removeEventListener("mousedown",s)},[]),jsxRuntimeExports.jsxs("div",{ref:l,className:"ae:relative ae:inline-block",children:[jsxRuntimeExports.jsx("button",{type:"button",title:"Download",onClick:()=>o(!a),className:`ae:bg-blue-600 ae:text-white ae:text-xs ae:px-1 ae:py-1 ae:rounded-md ae:cursor-pointer 
                   ae:hover:bg-blue-800 ae:focus:bg-blue-700 ae:focus:ring-3 ae:focus:ring-[#2563eb4d]`,children:jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",children:[jsxRuntimeExports.jsx("path",{d:"M12 15V3"}),jsxRuntimeExports.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),jsxRuntimeExports.jsx("path",{d:"m7 10 5 5 5-5"})]})}),a&&jsxRuntimeExports.jsx("ul",{className:`ae:absolute ae:top-full ae:left-1/2 ae:-translate-x-1/2 ae:mt-1 ae:min-w-max 
                       ae:border ae:border-gray-200 ae:rounded-md ae:shadow-md text-sm z-50`,children:t.map(({format:s,label:f})=>jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx("a",{href:`${e}?download_format=${s}`,className:"ae:block ae:px-3 ae:py-1 ae:text-gray-900 ae:hover:bg-gray-100 ae:whitespace-nowrap",children:f})},s))})]})}function getVol(r,e=4){const t=(l,s)=>[l[1]*s[2]-l[2]*s[1],l[2]*s[0]-l[0]*s[2],l[0]*s[1]-l[1]*s[0]],a=r.attributes.cell,o=Math.abs(a[0].reduce((l,s,f)=>l+s*t(a[1],a[2])[f],0));return parseFloat(o.toFixed(e))}function formatLattice(r){const e=r.attributes.cell,t=Math.hypot(...e[0]),a=Math.hypot(...e[1]),o=Math.hypot(...e[2]);return{a:t,b:a,c:o}}function formatChemicalFormula(r){return r.split(/(\d+)/).map((t,a)=>t.match(/\d+/)?jsxRuntimeExports.jsx("sub",{children:t},a):t)}function calculateDensity(r,e,t){const a={};t.forEach(l=>{a[l.name]=l.mass});let o=0;return r.forEach(l=>{const s=l.kind_name,f=a[s];if(f===void 0)throw new Error(`Unknown kind: ${s}`);o+=f}),Math.round(o*1e4/(e*6.0223))}function StructureDataVisualiser({nodeData:r,restApiUrl:e}){const t=r.downloadByFormat?.cif,[a,o]=reactExports.useState(null),[l,s]=reactExports.useState(!0),[f,m]=reactExports.useState(null),b=reactExports.useCallback(async()=>{if(!t){m("No CIF file available"),s(!1);return}s(!0),m(null);try{const K=await fetch(t);if(!K.ok)throw new Error(`HTTP error: ${K.status}`);const vt=await K.text();o(vt)}catch(K){m(K.message)}finally{s(!1)}},[t]);reactExports.useEffect(()=>{b()},[b]);const E=r.label==="CifData"?[{format:"cif",label:"CIF"}]:[{format:"cif",label:"CIF"},{format:"xsf",label:"XSF"},{format:"xyz",label:"XYZ"}],M=r.derived_properties&&Object.keys(r.derived_properties).length>0,I=r.attributes?.cell?formatLattice(r):null,V=M?r.derived_properties.dimensionality?.value:I?getVol(r):null,Z=r.attributes?.sites?.length||0,ee=r.derived_properties.dimensionality.dim||null;let le;if(ee===3){const K=r.derived_properties.dimensionality.value,vt=r.attributes.kinds,q=r.attributes.sites;le=calculateDensity(q,K,vt)}return l?jsxRuntimeExports.jsx("div",{className:"ae:w-full ae:min-h-[450px] ae:flex ae:items-center ae:justify-center",children:jsxRuntimeExports.jsx(Spinner,{})}):f?jsxRuntimeExports.jsx("div",{className:"ae:w-full ae:min-h-[450px] ae:flex ae:items-center ae:justify-center",children:jsxRuntimeExports.jsx(ErrorDisplay,{message:f,onRetry:b})}):jsxRuntimeExports.jsx("div",{className:"ae:w-full ae:mx-auto ae:p-4 ae:space-y-6",children:jsxRuntimeExports.jsx("div",{className:"ae:@container",children:jsxRuntimeExports.jsxs("div",{className:"ae:grid ae:grid-cols-1 ae:gap-4 ae:@xl:grid-cols-[1fr_auto]",children:[jsxRuntimeExports.jsxs("div",{className:"ae:w-full ae:h-[400px] ae:relative ae:bg-slate-100 ae:shadow-sm ae:overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"ae:absolute ae:top-4 ae:right-4 ae:z-50",children:jsxRuntimeExports.jsx(StructDownloadButton,{aiida_rest_url:e,uuid:r.aiida.uuid,download_formats:E})}),jsxRuntimeExports.jsx("div",{className:"ae:w-full ae:h-full",children:jsxRuntimeExports.jsx(StructureVisualizer,{cifText:a,initSupercell:[2,2,2]})})]}),jsxRuntimeExports.jsx("div",{className:"ae:flex ae:flex-col ae:space-y-4 ae:max-w-xs",children:M&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs(CardContainer,{children:[jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("span",{className:"ae:font-medium",children:"Formula:"})," ",formatChemicalFormula(r.derived_properties.formula)]}),jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("span",{className:"ae:font-medium",children:"Cell Volume:"})," ",V?.toFixed(4)," Å³"]}),jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("span",{className:"ae:font-medium",children:"Dimensionality:"})," ",r.derived_properties.dimensionality?.dim||"N/A"]}),jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("span",{className:"ae:font-medium",children:"Density:"})," ",le||"N/A"," kg/m",jsxRuntimeExports.jsx("sup",{children:"3"})]})]}),I&&jsxRuntimeExports.jsxs(CardContainer,{children:[jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("span",{className:"ae:font-medium",children:"Lattice a:"})," ",I.a.toFixed(4)," Å"]}),jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("span",{className:"ae:font-medium",children:"Lattice b:"})," ",I.b.toFixed(4)," Å"]}),jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("span",{className:"ae:font-medium",children:"Lattice c:"})," ",I.c.toFixed(4)," Å"]}),jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("span",{className:"ae:font-medium",children:"Number of Sites:"})," ",Z]})]})]})})]})})})}function SimplePlot({data:r,layout:e,config:t={},style:a={width:"100%",height:"400"}}){const o=reactExports.useRef(null),l=reactExports.useMemo(()=>r,[r]),s=reactExports.useMemo(()=>e,[e]),f=reactExports.useMemo(()=>t,[t]);return reactExports.useEffect(()=>{const m=o.current;if(!m)return;const b=l.length;let E=0;l.forEach(I=>{E+=(I.x?.length||0)+(I.y?.length||0)+(I.z?.length||0)}),console.debug(`Rendering ${b} traces with ~${E} data points`);const M=performance.now();Plotly.newPlot(m,l,s,{responsive:!0,...f}).then(()=>{const I=performance.now();console.log(`Plotly rendering took ${(I-M).toFixed(2)} ms for ${b} traces (~${E} points)`)})},[l,s,f]),reactExports.useEffect(()=>{if(!o.current)return;const m=new ResizeObserver(()=>{Plotly.Plots.resize(o.current)});return m.observe(o.current),()=>m.disconnect()},[]),jsxRuntimeExports.jsx("div",{ref:o,style:a})}function getRadialFunctionsTraces(r){return!r||!r.atomic_wave_functions||!r.radial_grid?[]:r.atomic_wave_functions.map(t=>{const a=t.label??"",o=t.angular_momentum!=null?`(ℓ=${t.angular_momentum}`:"",l=t.occupation!=null?`, occ=${t.occupation})`:t.angular_momentum!=null?")":"";return{x:r.radial_grid,y:t.radial_function,type:"scatter",mode:"lines",name:`${a} ${o}${l}`}})}function getBetaProjectorsTraces(r){return!r||!r.beta_projectors||!r.radial_grid?[]:r.beta_projectors.map(t=>{const a=t.label??"",o=t.angular_momentum!=null?`(ℓ=${t.angular_momentum}`:"",l=t.ultrasoft_cutoff_radius!=null?`, cutoff=${t.ultrasoft_cutoff_radius})`:t.angular_momentum!=null?")":"";return{x:r.radial_grid,y:t.radial_function,type:"scatter",mode:"lines",name:`${a} ${o}${l}`}})}function getChargeDensitiesTraces(r){if(!r||!r.radial_grid)return[];const e={x:r.radial_grid,y:r.total_charge_density,type:"scatter",mode:"lines",name:"Valence Pseudocharge density"};return[{x:r.radial_grid,y:r.core_charge_density,type:"scatter",mode:"lines",name:"Core Pseudocharge density"},e].filter(a=>Array.isArray(a.y)&&a.y.length>0)}function UpfDataVisualiser({nodeData:r}){const[e,t]=reactExports.useState(!0),[a,o]=reactExports.useState(null),[l,s]=reactExports.useState(null),f=r.downloadByFormat?.json,m=reactExports.useMemo(()=>getRadialFunctionsTraces(l),[l]),b=reactExports.useMemo(()=>getBetaProjectorsTraces(l),[l]),E=reactExports.useMemo(()=>getChargeDensitiesTraces(l),[l]),M=reactExports.useCallback(async()=>{if(!f){o("No JSON path available"),t(!1);return}t(!0),o(null);try{const ee=await fetch(f);if(!ee.ok)throw new Error(`HTTP ${ee.status}`);const le=await ee.json();s(le.pseudo_potential)}catch(ee){console.error("Failed to fetch UPF JSON:",ee),o(ee.message||"Failed to load UPF data")}finally{t(!1)}},[f]);if(reactExports.useEffect(()=>{M()},[M]),e)return jsxRuntimeExports.jsx("div",{className:"ae:w-full ae:min-h-[450px] ae:flex ae:items-center ae:justify-center",children:jsxRuntimeExports.jsx(Spinner,{})});if(a)return jsxRuntimeExports.jsx("div",{className:"ae:w-full ae:min-h-[450px] ae:flex ae:items-center ae:justify-center",children:jsxRuntimeExports.jsx(ErrorDisplay,{message:a,onRetry:M})});if(!l)return null;const{header:I}=l,V={x:.97,y:.95,xanchor:"right",yanchor:"top",bordercolor:"#ccc",borderwidth:1},Z={t:20,b:40,l:50,r:20};return jsxRuntimeExports.jsxs("div",{className:"ae:w-full ae:mx-auto ae:p-4 ae:space-y-6",children:[jsxRuntimeExports.jsxs(CardContainer,{header:"Metadata",children:[jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("span",{className:"ae:font-medium",children:"Element:"})," ",I?.element||"N/A"]}),jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("span",{className:"ae:font-medium",children:"Valence Electrons:"})," ",I?.z_valence??"N/A"]}),jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("span",{className:"ae:font-medium",children:"Pseudopotential Type:"})," ",I?.pseudo_type||"N/A"]}),jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("span",{className:"ae:font-medium",children:"Functional:"})," ",I?.functional||"N/A"]})]}),jsxRuntimeExports.jsx(CardContainer,{header:"Orbital radial functions",className:"ae:px-1.5! ae:py-2!",childrenClassName:"ae:!p-0",children:jsxRuntimeExports.jsx(SimplePlot,{data:m,layout:{autosize:!0,height:400,margin:Z,xaxis:{title:{text:"Radius (Bohr)"},range:[0,20]},yaxis:{title:{text:"φ(r)"}},legend:V},config:{responsive:!0},useResizeHandler:!0,style:{width:"100%",height:400}})}),jsxRuntimeExports.jsx(CardContainer,{header:"Beta projectors",className:"ae:px-1.5! ae:py-2!",childrenClassName:"ae:!p-0",children:jsxRuntimeExports.jsx(SimplePlot,{data:b,layout:{autosize:!0,height:400,margin:Z,xaxis:{title:{text:"Radius (Bohr)"}},yaxis:{title:{text:"φ(r)"}},legend:V},config:{responsive:!0}})}),jsxRuntimeExports.jsx(CardContainer,{header:"Charge densities",className:"ae:px-1.5! ae:py-2!",childrenClassName:"ae:!p-0",children:jsxRuntimeExports.jsx(SimplePlot,{data:E,layout:{autosize:!0,height:400,margin:Z,xaxis:{title:{text:"Radius (Bohr)"},range:[0,5]},yaxis:{title:{text:"φ(r)"}},legend:V},config:{responsive:!0},useResizeHandler:!0,style:{width:"100%",height:"100%"}})})]})}const RICH_TYPES={StructureData:StructureDataVisualiser,CifData:StructureDataVisualiser,BandsData:BandsDataVisualiser,UpfData:UpfDataVisualiser,KpointsData:KpointsDataVisualiser,CalcJobNode:CalcJobVisualiser};function geRichVisualiser(r,e){if(!e||!e.data)return null;const{label:t,aiida:a}=e.data,o=RICH_TYPES[t];return o?jsxRuntimeExports.jsx(o,{nodeData:e.data,restApiUrl:r},a?.uuid):null}function VisualiserPane({restApiUrl:r,selectedNode:e,userData:t,downloadFormats:a}){let o=geRichVisualiser(r,e);const[l,s]=reactExports.useState(o?"rich":"raw");if(reactExports.useEffect(()=>{s(o?"rich":"raw")},[e]),!e)return jsxRuntimeExports.jsx("div",{className:"ae:w-full ae:h-full ae:p-4",children:jsxRuntimeExports.jsx("p",{children:"Click a node to see top level details. Double click to traverse the graph."})});const f=!o;return jsxRuntimeExports.jsxs("div",{className:"ae:w-full ae:h-full ae:flex ae:flex-col ae:overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"ae:px-4 ae:py-3 ae:md:py-2 ae:bg-slate-50",children:jsxRuntimeExports.jsx(FormattedMetaData,{nodeData:e.data,userData:t})}),jsxRuntimeExports.jsxs("div",{className:"ae:flex ae:border-y ae:bg-slate-100",children:[jsxRuntimeExports.jsx("button",{disabled:f,className:`ae:px-4 ae:py-2 ${l==="rich"?"ae:border-b-2 ae:border-slate-500 ae:transition ae:font-medium":f?"ae:text-gray-400 ae:cursor-not-allowed":""}`,onClick:()=>!f&&s("rich"),children:"Rich View"}),jsxRuntimeExports.jsx("button",{className:`ae:px-4 ae:py-2 ${l==="raw"?"ae:border-b-2 ae:border-slate-500 ae:transition ae:font-medium":""}`,onClick:()=>s("raw"),children:"Raw View"})]}),jsxRuntimeExports.jsxs("div",{className:"ae:flex-1 ae:overflow-auto ae:bg-slate-50",children:[l==="rich"&&o,l==="raw"&&jsxRuntimeExports.jsx(RawDataVisualiser,{nodeData:e.data,downloadFormats:a})]})]})}function AiidaExplorer(r){return jsxRuntimeExports.jsx(AiidaExplorerInner,{...r},r.restApiUrl)}function AiidaExplorerInner({restApiUrl:r,rootNode:e,defaultRootNode:t="",onRootNodeChange:a=()=>{},debugMode:o=!1}){const[l,s]=useRootNode(e,t,a),f=reactExports.useRef(null),m=reactExports.useRef(null),b=useMediaQuery("(min-width: 1000px)"),[E,M]=reactExports.useState(!1),[I,V]=reactExports.useState(null),[Z,ee]=reactExports.useState(null),[le,K]=reactExports.useState(null),[vt,q]=reactExports.useState([]),[Q,wt]=reactExports.useState([]),[bt,Ut]=reactExports.useState([]),[it,zt]=reactExports.useState(null),[Zt,Mn]=reactExports.useState({}),[kp,zp]=reactExports.useState("groupsview"),sa=10,qo=reactExports.useRef(!0);reactExports.useEffect(()=>{qo.current&&!l?(qo.current=!1,zp("groupsview")):zp(l?null:"groupsview")},[l]),reactExports.useEffect(()=>{fetchUsers(r).then(ee)},[r]),reactExports.useEffect(()=>{fetchDownloadFormats(r).then(K)},[r]),reactExports.useEffect(()=>{if(!l)return;let h0=!0;async function Pp(){M(!0),V(null);try{const{nodes:d0,edges:x0}=await fetchGraphByNodeId(r,l);if(!h0)return;const Dp=d0.map(u0=>({...u0,data:{...u0.data,...Zt[u0.id]||{}}}));q(Dp),wt(x0),requestAnimationFrame(()=>{const u0=m.current;if(!u0)return;u0.fitView({padding:1.5,duration:300});const y0=Dp.find(M0=>M0.id===l);y0?.position&&setTimeout(()=>{u0.setCenter(y0.position.x+70,y0.position.y+0,{zoom:1.22,duration:500})},400)});const c0=Dp.find(u0=>u0.id===l);if(c0){const u0=await ae(c0);zt(u0)}bt[bt.length-1]?.id!==c0?.id&&Ut(u0=>[...u0,c0].slice(-sa))}catch(d0){console.error("Failed to load graph:",d0),h0&&V(d0.message||"Failed to load node data")}finally{h0&&M(!1)}}return Pp(),()=>{h0=!1}},[l,r,le,Z]);const ae=async h0=>{const Pp=await smartFetchData(r,h0,Zt,le);return Mn(d0=>({...d0,[h0.id]:{...d0[h0.id]||{},...Pp.data}})),Pp},wp=async h0=>{const Pp=await ae(h0);zt(Pp),q(d0=>d0.map(x0=>x0.id===h0.id?{...x0,data:{...x0.data,...Pp.data}}:x0))},Cp=async h0=>{if(!E){M(!0);try{s(h0.id)}finally{M(!1)}}},Kt=async(h0,Pp)=>{Ut(d0=>d0.slice(0,Pp+1)),s(h0.id)};return jsxRuntimeExports.jsx("div",{className:"ae:flex ae:flex-col ae:h-full",children:jsxRuntimeExports.jsxs(OverlayProvider,{ref:f,className:"ae:flex ae:flex-col ae:relative ae:h-full ae:min-h-[300px] ae:border ae:bg-slate-100",children:[jsxRuntimeExports.jsxs(Overlay,{active:kp,onClose:()=>zp(null),title:kp==="groupsview"?"Find node":kp==="typesview"?"Node Types":kp==="helpview"?"Help":"",container:f.current,children:[kp==="groupsview"&&jsxRuntimeExports.jsx(GroupsViewer,{restApiUrl:r,setRootNodeId:s}),kp==="helpview"&&jsxRuntimeExports.jsx(HelpViewer,{})]}),jsxRuntimeExports.jsxs(PanelGroup,{direction:b?"horizontal":"vertical",className:"ae:flex-1 ae:min-h-0 ae:overflow-hidden",children:[jsxRuntimeExports.jsxs(Panel$1,{className:"ae:flex ae:flex-col ae:min-h-0 ae:relative",defaultSize:50,minSize:10,children:[E&&jsxRuntimeExports.jsx("div",{className:"ae:absolute ae:bottom-2 ae:right-2 ae:z-50",children:jsxRuntimeExports.jsx(Spinner,{})}),I&&jsxRuntimeExports.jsx("div",{className:"ae:absolute ae:bottom-2 ae:right-2 ae:z-50",children:jsxRuntimeExports.jsx(ErrorDisplay,{message:`Failed to find node UUID: ${l}`})}),jsxRuntimeExports.jsx(TopControls,{onFindNode:()=>zp("groupsview"),onGetLinkCounts:async()=>{if(!(E||vt.length===0)){M(!0);try{const h0=await fetchLinkCounts(r,vt);q(h0)}finally{M(!1)}}},onHelp:()=>zp("helpview"),isLoading:E,disableGetCounts:vt.length===0}),jsxRuntimeExports.jsx("div",{className:"ae:flex-1 ae:min-h-0",children:jsxRuntimeExports.jsx(FlowChart,{className:"ae:flex-1 ae:min-h-0",nodes:vt,edges:Q,setNodes:q,setEdges:wt,selectedNode:it,onNodeSelect:wp,onNodeDoubleSelect:Cp,onInit:h0=>{m.current=h0}})})]}),jsxRuntimeExports.jsx(PanelResizeHandle,{className:`ae:group ae:flex ae:items-center ae:justify-center ae:bg-slate-200 ae:border-x ${b?"ae:w-1.5 ae:cursor-col-resize":"ae:h-1.5 ae:cursor-row-resize"}`,children:jsxRuntimeExports.jsx("div",{className:`ae:bg-slate-700 ae:rounded ae:group-hover:scale-125 ${b?"ae:w-0.5 ae:h-6":"ae:w-6 ae:h-0.5"}`})}),jsxRuntimeExports.jsxs(Panel$1,{className:"ae:flex-1 ae:flex ae:flex-col ae:min-h-0",children:[o&&jsxRuntimeExports.jsx("div",{className:"ae:hidden ae:md:ae:flex ae:h-1/4 ae:border-b ae:border-slate-300 ae:overflow-y-auto",children:jsxRuntimeExports.jsx(DebugPane,{selectedNode:it})}),jsxRuntimeExports.jsx("div",{className:"ae:flex-1 ae:overflow-y-auto ae:min-h-0",children:jsxRuntimeExports.jsx(VisualiserPane,{restApiUrl:r,selectedNode:it,userData:Z,downloadFormats:le})})]})]}),jsxRuntimeExports.jsx("div",{className:"ae:flex-none ae:overflow-x-auto",children:jsxRuntimeExports.jsx(Breadcrumbs,{trail:bt,onClick:Kt,maxItems:sa})})]})})}const DEFAULT_REST_URL="https://aiida.materialscloud.org/2dtopo/api/v4";function App(){const[r,e]=useSearchParams(),t=r.get("api_url")??DEFAULT_REST_URL,a=r.get("uuid")??"",[o,l]=reactExports.useState(t);reactExports.useEffect(()=>{l(t)},[t]);const s=reactExports.useCallback(m=>{const b=new URLSearchParams(r);m?b.set("uuid",m):b.delete("uuid"),e(b,{replace:!0})},[r,e]),f=()=>{const m=new URLSearchParams(r);m.set("api_url",t.trim()||DEFAULT_REST_URL),m.delete("uuid"),e(m,{replace:!0})};return jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center h-screen space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2 w-[95vw]",children:[jsxRuntimeExports.jsx("label",{htmlFor:"aiida-rest-url",className:"text-gray-800 font-medium whitespace-nowrap",children:"AiiDA REST endpoint:"}),jsxRuntimeExports.jsx("input",{id:"aiida-rest-url",type:"text",value:o,onChange:m=>l(m.target.value),placeholder:"Enter AiiDA REST API URL",className:"flex-grow p-2 border border-gray-400",onKeyDown:m=>m.key==="Enter"&&f()}),jsxRuntimeExports.jsx("button",{onClick:f,className:"px-4 py-2 bg-blue-600 text-white hover:bg-blue-700",children:"Load"})]}),jsxRuntimeExports.jsx("div",{className:"w-[95vw] h-[85vh] bg-amber-600",children:jsxRuntimeExports.jsx(AiidaExplorer,{restApiUrl:t,rootNode:a,onRootNodeChange:s})})]})}ReactDOM.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(React.StrictMode,{children:jsxRuntimeExports.jsx(HashRouter,{children:jsxRuntimeExports.jsx(App,{})})}));
